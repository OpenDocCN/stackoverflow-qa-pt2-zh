# StackOverflow 问答 16162000-16162999

# java - 绑定服务与 Android 上的已启动服务以及如何做到这两者

> ID：16162002
> 
> 赞同：9
> 
> 时间：2013-04-23T05:58:03.283
> 
> 标签：java, android, service, binding

我在问一个已经（部分，在我看来）[here](https://stackoverflow.com/questions/5243562/lifecycle-of-service-that-is-started-and-bound)和[here](https://stackoverflow.com/questions/3514287/android-service-startservice-and-bindservice)解决的烦恼问题。假设在许多示例中，我们想要创建一个音乐应用程序，使用（比如说）单个活动和服务。我们希望服务在 Activity 停止或销毁时持续存在。这种生命周期建议启动服务：

> 当应用程序组件（例如活动）通过调用 startService() 启动服务时，服务被“启动”。一旦启动，服务可以无限期地在后台运行，即使启动它的组件被销毁

好的，但是我们还希望能够与服务进行通信，所以我们需要一个服务绑定。[没问题，正如这个答案所暗示](https://stackoverflow.com/questions/3514287/android-service-startservice-and-bindservice)的那样，我们既有绑定服务也有启动服务：

*   在活动启动时（或其他点），我们调用[startService()](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)
*   之后我们调用[bindService()](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)来获取[IBinder](http://developer.android.com/reference/android/os/IBinder.html)接口，然后从那里继续。

到目前为止一切顺利，但问题在于，当活动开始时，我们不知道服务是否存在。它可能已经开始，也可能尚未开始。答案可能是这样的：

*   在启动时，尝试绑定到服务（使用不带[BIND_AUTO_CREATE](http://developer.android.com/reference/android/content/Context.html#BIND_AUTO_CREATE)标志的[bindService() ）](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)
*   如果失败，则使用 启动服务`startService()`，然后绑定到它。

这个想法的前提是对以下文档的特定阅读`bindService()`：

> 连接到应用程序服务，如果需要，创建它。

如果零标志意味着“真的不需要服务”，那么我们就可以了。所以我们使用以下代码尝试这样的事情：

```
private void connectToService() {
    Log.d("MainActivity", "Connecting to service");
    // We try to bind to an existing service
    Intent bindIntent = new Intent(this, AccelerometerLoggerService.class);
    boolean bindResult = bindService(bindIntent, mConnection, 0);
    if (bindResult) {
        // Service existed, so we just bound to it
        Log.d("MainActivity", "Found a pre-existing service and bound to it");
    } else {
        Log.d("MainActivity", "No pre-existing service starting one");
        // Service did not exist so we must start it

        Intent startIntent = new Intent(this, AccelerometerLoggerService.class);
        ComponentName startResult = startService(startIntent);
        if (startResult==null) {
            Log.e("MainActivity", "Unable to start our service");
        } else {
            Log.d("MainActivity", "Started a service will bind");
            // Now that the service is started, we can bind to it
            bindService(bindIntent, mConnection, 0);
            if (!bindResult) {
                Log.e("MainActivity", "started a service and then failed to bind to it");
            } else {
                Log.d("MainActivity", "Successfully bound");
            }
        }
    }
} 
```

我们得到的是每次成功的绑定：

```
04-23 05:42:59.125: D/MainActivity(842): Connecting to service
04-23 05:42:59.125: D/MainActivity(842): Found a pre-existing service and bound to it
04-23 05:42:59.134: D/MainActivity(842): onCreate 
```

全球问题是“我是否误解了绑定服务与启动服务以及如何使用它们？” 更具体的问题是：

*   认为传递给的零标志`bindService()`意味着“不启动服务”是对文档的正确理解吗？`bindService()`如果没有，不启动服务就没有办法调用吗？
*   为什么即使服务没有运行也会`bindService()`返回？在这种情况下，根据调用`true`，服务似乎没有启动。`Log`
*   如果前一点是正确/预期的行为`bindService()`，是否有解决方法（即以某种方式确保`startService`仅在服务未运行时才调用它？）

PS我已经从我自己的代码中的问题继续前进：我`startService()`无论如何都会发出调用，因为重复`startService()`的只是被忽略了。但是，我仍然想更好地理解这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:28:49.987

1.  如果您使用 0 标志绑定服务，则该服务将不会启动。您可以使用 BIND_AUTO_CREATE 标志绑定服务，如果服务未启动，它将被启动。但是，当您取消绑定服务时，该服务将被销毁。
2.  带有 0 标志的 bindService 始终返回 true。
3.  您可以随时调用 startService。如果服务已经在运行，则不会创建新服务。将调用正在运行的服务 onStartCommand。

如果在 onCreate 中 startService，然后在 onResume 中 bindService，在 onPause 中 unbindService，应该没有问题。

# django - Django CSRF verificCSRF 验证失败。请求中止

> ID：16162004
> 
> 赞同：1
> 
> 时间：2013-04-23T05:58:30.363
> 
> 标签：django, post, csrf

这是一个非常古老的问题和许多与之相关的类似结果，但我根本找不到解决它的正确方法。

我正在使用 Django 1.5，我有一个相当简单的尝试尝试在 Django 中使用“发布”表单：我在 Django 项目“webnote”中创建了一个“note”应用程序，当 url 为“/note/”时，它将简单地显示表单和简单的欢迎信息 当我单击提交时，我希望它会显示另一个简单的welcome1 信息。

这是相关文件

# 注意/models.py

```
from django.db import models
from datetime import datetime, date,time
from django.utils import timezone

class Title(models.Model):
    title =models.CharField(max_length=2000)
    def __unicode__(self):
        return self.title 
```

# 注意/views.py

```
from django.template import Context, loader
from django.shortcuts import get_object_or_404, render
from django.http import HttpResponseRedirect, HttpResponse, Http404
from django.core.urlresolvers import reverse
from note.models import Title
from django.core.context_processors import csrf

def index(request):
    template = loader.get_template('note/index.html')
    context = Context({
                   'Name':"Guys",
                   })
    return HttpResponse(template.render(context))

def insert(request):
    #return HttpResponse("Hello World, This is the Index Page")
    return render(request, 'note/index.html', {'Name':"NewGuy"}) 
```

# 模板/注释/index.html

```
<html>
<body>
    Hello {{ Name }}, Welcome!  
    <form action="insert/" method="post">

        {% csrf_token %}

        <h6>Title</h6>
        <input type="text" name="title_input" value="Please Input Title">
        <input type="submit" name="SB" value="insert">
    </form>

</body>
</html> 
```

A 可能不是那个相关的文件

# 设置.py

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (

)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': 'webnote',                     
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '',                      
        'PORT': '3306',                     
    }
}

ALLOWED_HOSTS = []

TIME_ZONE = 'America/New_York'

LANGUAGE_CODE = 'en-us'

SITE_ID = 1

USE_I18N = True

USE_L10N = True

USE_TZ = True

MEDIA_ROOT = ''

MEDIA_URL = ''

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

SECRET_KEY = 'gpnmov_g$zn8w@_0(s@$wlbgo2+y30*98ab*ne^)@98!zpq_w-'

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',

)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'webnote.urls'

WSGI_APPLICATION = 'webnote.wsgi.application'

TEMPLATE_DIRS = (

    '/www/webnote/note/templates/note'
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'note'
)

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我尝试了该论坛中类似（相同）问题中提到的几种方法。喜欢：

1.使用render_to_response

2.显式使用RequestContext替换Context

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:10:13.227

您还需要首先在生成表单的视图上使用 CSRF。大多数情况下，人们为此使用相同的视图并处理 POST：出于某种原因，您将它们分成两部分，如果您真的想要，这很好，但您必须使用`render`（或 RequestContext，或其他） GET 视图也是如此，因为它负责生成和输出然后在 POST 中检查的令牌。

所以，你的`index`观点应该是：

```
def index(request):
    return render(request, 'note/index.html', {'Name':"Guys"}) 
```

# c# - 从不同格式的文件导入数据到sql server

> ID：16162009
> 
> 赞同：0
> 
> 时间：2013-04-23T05:58:55.690
> 
> 标签：c#, sql-server, ssis

我有一个程序，它监视服务器上的一个文件夹。当新文件（平面文件）进来时，程序（C#）读取数据，批量插入表中。它工作正常。

现在，我们扩展系统。这意味着数据文件可以是不同的格式（平面文件、csv、txt、excel..），或者具有不同的列（我们需要将它们映射到表中的列）。

我的问题是：C# 是最好的选择吗？或者，SSIS 是更好的选择？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:52:58.930

我不一定会选择其中一个，而是根据文件类型和处理量进行选择。对于某些文件类型，使用 C# 可能更容易，而对于其他一些 SSIS 效果更好。

您的团队中是否有人擅长 SSIS？找一个 C# 开发人员为您完成这项工作比找一个了解 SSIS 的人要容易得多。

未来要求/格式更新的可能性有多大？记住这一点也很重要。

我同意其他人所说的 SSIS 更强大，并为更复杂的转换提供支持，但问题是你真的需要这个吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:52:15.900

在 C# 应用程序中，我猜您正在使用 SqlbulkCopy 组件，与 SSIS 相比，它没有那么强大。因此，如果您的数据量变得巨大，那么 C# 应用程序将变得更慢。

如果您熟悉 SSIS，我的建议是使用 SSIS。在 SSIS 中，您可以像在 C# 中开发的那样实现端到端的解决方案，从检查特定文件夹中的文件到将数据加载到数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:04:56.140

这取决于你的上下文。不同的格式不应该决定去SSIS。使用解决方案 C# 程序：您可以继续使用它，因为它之前运行稳定。易于部署，特定于您的域，也易于配置。使用解决方案 SSIS：配置更复杂，需要开发人员对 SSIS 有深入的了解。管理费比C#程序要多。但是它很容易可视化（有图表让您更容易看到流集成）。在我看来，如果集成过程不需要复杂的业务规则，你应该使用 C# 程序。否则，如果集成过程需要复杂的规则，SSIS 会更强大。希望这有帮助。

# ruby-on-rails - 带有过滤器的嵌套资源

> ID：16162010
> 
> 赞同：0
> 
> 时间：2013-04-23T05:59:03.147
> 
> 标签：ruby-on-rails

这是我的房子模型

```
has_many :taggings
has_many :tags, through: :taggings

def self.tagged_with(name)
    Tag.find_by_name!(name).houses
 end

end 
```

这是我的房子控制器

```
 def index
        if params[:tag]
          @houses = House.tagged_with(params[:tag])
    end
end 
```

看法：

```
- @houses.each do |house|
ect 
```

这很好用...这会过滤掉带有当前标签的房屋，例如 /house/tag/tagname

但是我实现了一个嵌套资源，所以我需要改变我的观点。

```
- @regions.each do |region|
      - region.houses.find_all do |house| 
```

如何在新视图中使用过滤器标签？我以为这个

```
- @regions.each do |region|
      - region.houses.find_tagged_with(params[:tags]) do |house| 
```

但这不起作用......请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:41:49.163

为什么不反过来过滤呢？也就是说，不是获取一个地区的所有房屋并按标签过滤，而是获取一个标签的所有房屋并按地区过滤：

```
def index
  @regions = Region.all # or whatever
  @houses = House.tagged_with(params[:tag])

  @regions.each do |region|
    @houses.where(region_id: region.id).each do |house|
      ...
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:09:51.627

这将不起作用，因为 tagged_with 是在类 House 中定义的，并且不能在实例或任何集合上调用。region.houses 是一个数组（假设 region has_many 房子），所以它不能工作。一种方法是使用 ActiveRecord::Relation

```
@regions.each do |region|
 - region.houses.where(:name => params[:tag).each do |house| 
```

请参阅 Rails 指南以了解更多信息...

# sql - Oracle 中的性能问题

> ID：16162011
> 
> 赞同：0
> 
> 时间：2013-04-23T05:59:04.367
> 
> 标签：sql, performance, oracle, oracle10g, toad

这里的要求是向用户提供特定工厂或零件编号的预测详细信息。预测详细信息来自几个源表并由一个视图联合。在此视图上创建一个物化视图 (MV)，以便更快地访问数据。在记录了这支 MV 之后，它的 500K+ 即将到来。

我们有一个 DOTNET 应用程序网页，用户在其中选择工厂或输入零件并从上述 MV 请求这些过滤器的数据。部分过滤器工作正常，但植物过滤器几乎需要 20 分钟来提取某些植物的数据。

根据进一步分析，我发现很少有植物在 MV 中有超过 50K 行。检索 50K+ 记录有问题吗？

以下是查询，当 Executed 快速运行，但同时使用 Execute Script 选项执行时，需要 5-6 分钟才能返回行。

```
SELECT  /*+ hint first_rows(1000) */
PLANT,MATERIAL_NBR,SOLD_TO_CODE,SHIP_TO_CODE,SHIP_TO_NAME,SHIP_TO_PLANT,SHIP_TO_LABEL_FMT,ORD_QTY,ALLOC_QTY,
due_date, PRIME_CNTR,PRIME_UOI,SEC_CNTR,BASE_UOM,ORDER_TYPE,SHIP_POINT,REC_TYPE  
FROM GTCPDBA.VW_FORECAST_REQMNTS_DET 
Where PLANT ='FR10'; 
```

请提出一些意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:32:19.127

您确定要使用 first_rows 优化器提示吗？当您的应用程序支持生产者-消费者设计模式时，应该使用这个。即你有后台线程，它从数据库中获取数据并将它们显示在“厚”客户端的屏幕上。

在 3-TIER Web 应用程序上很难实现这样的事情。

# python - 基于输入参数模拟python函数

> ID：16162015
> 
> 赞同：215
> 
> 时间：2013-04-23T05:59:10.907
> 
> 标签：python, unit-testing, mocking, mockito

我们使用[Mock](http://www.voidspace.org.uk/python/mock/) for python 已经有一段时间了。

现在，我们有一种情况，我们想模拟一个函数

```
def foo(self, my_param):
    #do something here, assign something to my_result
    return my_result 
```

通常，模拟它的方法是（假设 foo 是对象的一部分）

```
self.foo = MagicMock(return_value="mocked!") 
```

即使，如果我调用 foo() 几次，我可以使用

```
self.foo = MagicMock(side_effect=["mocked once", "mocked twice!"]) 
```

现在，我面临一种情况，当输入参数具有特定值时，我想返回一个固定值。因此，如果假设“my_param”等于“某物”，那么我想返回“my_cool_mock”

这似乎在[mockito for python上可用](http://code.google.com/p/mockito-python/)

```
when(dummy).foo("something").thenReturn("my_cool_mock") 
```

我一直在寻找如何通过 Mock 实现同样的目标，但没有成功？

有任何想法吗？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-04-23T06:05:45.360

> 如果`side_effect_func`是一个函数，那么该函数返回的就是对模拟返回的调用。该`side_effect_func`函数使用与模拟相同的参数调用。这允许您根据输入动态改变调用的返回值：
> 
> ```
> >>> def side_effect_func(value):
> ...     return value + 1
> ...
> >>> m = MagicMock(side_effect=side_effect_func)
> >>> m(1)
> 2
> >>> m(2)
> 3
> >>> m.mock_calls
> [call(1), call(2)] 
> ```

[http://www.voidspace.org.uk/python/mock/mock.html#calling](http://www.voidspace.org.uk/python/mock/mock.html#calling)

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-04-23T06:19:43.397

如[Python Mock 对象所示，方法被多次调用](https://stackoverflow.com/questions/7665682/python-mock-object-with-method-called-multiple-times/7665754#7665754)

一个解决方案是编写我自己的 side_effect

```
def my_side_effect(*args, **kwargs):
    if args[0] == 42:
        return "Called with 42"
    elif args[0] == 43:
        return "Called with 43"
    elif kwargs['foo'] == 7:
        return "Foo is seven"

mockobj.mockmethod.side_effect = my_side_effect 
```

这就是诀窍

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-08-30T05:19:38.323

副作用需要一个函数（也可以是**lambda 函数**），因此对于简单的情况，您可以使用：

```
m = MagicMock(side_effect=(lambda x: x+1)) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-05-19T03:20:13.883

如果您*“想在输入参数具有特定值时返回固定值”*，也许您甚至不需要模拟并且可以使用 a`dict`及其`get`方法：

```
foo = {'input1': 'value1', 'input2': 'value2'}.get

foo('input1')  # value1
foo('input2')  # value2 
```

当你的假输出是输入的*映射*时，这很有效。当它是输入的*函数*时，我建议`side_effect`按照**Amber**的回答使用。

如果您想保留`Mock`的功能（等）`assert_called_once`，也可以将两者结合使用：`call_count`

```
self.mock.side_effect = {'input1': 'value1', 'input2': 'value2'}.get 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-24T08:45:35.237

我最终在这里寻找“*如何根据输入参数模拟函数*”，我终于解决了这个问题，创建了一个简单的辅助函数：

```
def mock_responses(responses, default_response=None):
  return lambda input: responses[input] if input in responses else default_response 
```

现在：

```
my_mock.foo.side_effect = mock_responses(
  {
    'x': 42, 
    'y': [1,2,3]
  })
my_mock.goo.side_effect = mock_responses(
  {
    'hello': 'world'
  }, 
  default_response='hi')
...

my_mock.foo('x') # => 42
my_mock.foo('y') # => [1,2,3]
my_mock.foo('unknown') # => None

my_mock.goo('hello') # => 'world'
my_mock.goo('ey') # => 'hi' 
```

希望这会对某人有所帮助！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-01-03T08:59:53.000

虽然可以达到目的，但为每个测试用例`side_effect`设置功能并不那么方便。`side_effect`

我写了一个轻量级的[Mock](https://github.com/pilagod/nextmock)（叫做NextMock）来增强内置的mock来解决这个问题，下面是一个简单的例子：

```
from nextmock import Mock

m = Mock()

m.with_args(1, 2, 3).returns(123)

assert m(1, 2, 3) == 123
assert m(3, 2, 1) != 123 
```

它还支持参数匹配器：

```
from nextmock import Arg, Mock

m = Mock()

m.with_args(1, 2, Arg.Any).returns(123)

assert m(1, 2, 1) == 123
assert m(1, 2, "123") == 123 
```

希望这个包可以使测试更愉快。随时提供任何反馈。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-09-02T07:38:25.860

如果你想使用一个带参数的函数，但你要模拟的函数没有，你也可以使用`partial`from 。`functools`比如像这样：

```
def mock_year(year):
    return datetime.datetime(year, 11, 28, tzinfo=timezone.utc) 
```

```
@patch('django.utils.timezone.now', side_effect=partial(mock_year, year=2020)) 
```

这将返回一个不接受参数的可调用对象（如 Django 的 timezone.now()），但我的 mock_year 函数可以。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-13T19:40:50.860

您还可以使用`@mock.patch.object`：

假设一个模块`my_module.py`用于`pandas`从数据库中读取数据，我们想通过模拟`pd.read_sql_table`方法（它`table_name`作为参数）来测试这个模块。

您可以做的是（在您的测试中）创建一个`db_mock`方法，该方法根据提供的参数返回不同的对象：

```
def db_mock(**kwargs):
    if kwargs['table_name'] == 'table_1':
        # return some DataFrame
    elif kwargs['table_name'] == 'table_2':
        # return some other DataFrame 
```

然后在您的测试功能中执行以下操作：

```
import my_module as my_module_imported

@mock.patch.object(my_module_imported.pd, "read_sql_table", new_callable=lambda: db_mock)
def test_my_module(mock_read_sql_table):
    # You can now test any methods from `my_module`, e.g. `foo` and any call this 
    # method does to `read_sql_table` will be mocked by `db_mock`, e.g.
    ret = my_module_imported.foo(table_name='table_1')
    # `ret` is some DataFrame returned by `db_mock` 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-12-08T21:08:13.917

只是为了展示另一种方式：

```
def mock_isdir(path):
    return path in ['/var/log', '/var/log/apache2', '/var/log/tomcat']

with mock.patch('os.path.isdir') as os_path_isdir:
    os_path_isdir.side_effect = mock_isdir 
```

# c# - 加载视图时添加空记录

> ID：16162024
> 
> 赞同：1
> 
> 时间：2013-04-23T05:59:34.600
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我是 asp.net MVC 的新手。在下面的代码中，我试图向数据库添加一条记录。它工作正常，但每次我加载视图时都会向数据库添加一条空记录。

**模型：**

```
 public class multi
    {
        public int CategoryID { get; set; }

        public string CategoryName { get; set; }
        public string Description { get; set; }

        public string DisplayName { get; set; }
        public string Email { get; set; }
    }

 public class CategoryRepository
    {

private BusDataClassesDataContext dc = new BusDataClassesDataContext();

 public void Save()
        {
            dc.SubmitChanges();
        }

         public void AddMulti(multi mu)
                {
                    tblCategory cat = new tblCategory();
                    cat.CategoryName = mu.CategoryName;
                    cat.Description = mu.Description;

                    tblUser user = new tblUser();
                    user.DisplayName = mu.DisplayName;
                    user.Email = mu.Email;

                    dc.tblCategories.InsertOnSubmit(cat);
                    dc.tblUsers.InsertOnSubmit(user);
                }
    } 
```

**控制器：**

```
CategoryRepository cat = new CategoryRepository();

    public ActionResult AddMulti(multi mu)
            {
                if (ModelState.IsValid)
                {
                    cat.AddMulti(mu);
                    cat.Save();
                    return View(mu);

                }
                else
                {
                    return View(mu);

                }
            } 
```

**看法：**

```
 <% using (Html.BeginForm()) {%>
        <%: Html.ValidationSummary(true) %>

        <fieldset>
            <legend>Fields</legend>

            <div class="editor-label">
                <%: Html.LabelFor(model => model.CategoryName) %>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(model => model.CategoryName) %>
                <%: Html.ValidationMessageFor(model => model.CategoryName) %>
            </div>

            <div class="editor-label">
                <%: Html.LabelFor(model => model.Description) %>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(model => model.Description) %>
                <%: Html.ValidationMessageFor(model => model.Description) %>
            </div>

            <div class="editor-label">
                <%: Html.LabelFor(model => model.DisplayName) %>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(model => model.DisplayName) %>
                <%: Html.ValidationMessageFor(model => model.DisplayName) %>
            </div>

            <div class="editor-label">
                <%: Html.LabelFor(model => model.Email) %>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(model => model.Email) %>
                <%: Html.ValidationMessageFor(model => model.Email) %>
            </div>

            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>

    <% } %>

    <div>
        <%: Html.ActionLink("Back to List", "Index") %>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:25:28.677

这是因为您没有对模型进行验证，所以`ModelState.IsValid`总是如此。然后，您通过添加一个新类别`AddMulti`。因为这个控制器方法是唯一指定的，所以它同时用于 GET 和 POST 请求。这意味着，每次加载页面并呈现表单时，都会使用模型中的空值创建一条新记录。

尝试将控制器拆分为`HttpPost`和`HttpGet`方法：

```
[HttpPost]
public ActionResult AddMulti(multi mu)
{
    if (ModelState.IsValid)
    {
        cat.AddMulti(mu);
        cat.Save();
        return View(mu);
    }
    else
    {
        return View(mu);
    }
}

[HttpGet]
public ActionResult AddMulti()
{
    return View();
} 
```

现在，当您通过 GET 请求访问页面时（即，当您第一次访问它时，在发布表单之前），第二个操作方法被触发，因此您不会创建新记录。

您可能还想为模型添加一些验证属性。因为看起来您将域模型直接传递给视图，所以您还应该考虑创建单独的[视图模型](http://stephenwalther.com/archive/2009/04/13/asp-net-mvc-tip-50-ndash-create-view-models.aspx)。

# ios - 如何检测哪个 EKevent 被更改

> ID：16162027
> 
> 赞同：3
> 
> 时间：2013-04-23T05:59:40.400
> 
> 标签：ios, ekevent, ekeventkit, ekeventstore

我有问题。我需要知道我的 EventStore 中的事件何时发生更改，因此对于这种情况，我使用`EKEventStoreChangedNotification`但此通知返回给我难以理解`userInfo` 的字典，它看起来像这样：

```
EKEventStoreChangedObjectIDsUserInfoKey = ("x-apple-eventkit:///Event/p429" ); 
```

我不知道如何使用这些数据来访问更改的对象。请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-07T14:16:56.023

这将检测更改的事件并记录某个日期范围内的事件标题。虽然，我最终没有这样做，因为实际上我不知道日期范围。我需要与我正在处理的所有事件进行比较，这意味着无论如何我都需要刷新它们，因为对象 ID 可能已经更改。这最终使每个事件都不那么有用，现在我只是在更改出现时每隔几秒钟刷新一次并忽略细节。我希望 Apple 改进这些通知。

```
#pragma mark - Calendar Changed
- (void)calendarChanged:(NSNotification *)notification {
    EKEventStore *ekEventStore = notification.object;

    NSDate *now = [NSDate date];
    NSDateComponents *offsetComponents = [NSDateComponents new];
    [offsetComponents setDay:0];
    [offsetComponents setMonth:4];
    [offsetComponents setYear:0];
    NSDate *endDate = [[NSCalendar currentCalendar] dateByAddingComponents:offsetComponents toDate:now options:0];

    NSArray *ekEventStoreChangedObjectIDArray = [notification.userInfo objectForKey:@"EKEventStoreChangedObjectIDsUserInfoKey"];
    NSPredicate *predicate = [ekEventStore    predicateForEventsWithStartDate:now
                                                                  endDate:endDate
                                                                calendars:nil];
    // Loop through all events in range
    [ekEventStore enumerateEventsMatchingPredicate:predicate usingBlock:^(EKEvent *ekEvent, BOOL *stop) {
        // Check this event against each ekObjectID in notification
        [ekEventStoreChangedObjectIDArray enumerateObjectsUsingBlock:^(NSString *ekEventStoreChangedObjectID, NSUInteger idx, BOOL *stop) {
            NSObject *ekObjectID = [(NSManagedObject *)ekEvent objectID];
            if ([ekEventStoreChangedObjectID isEqual:ekObjectID]) {
                // Log the event we found and stop (each event should only exist once in store)
                NSLog(@"calendarChanged(): Event Changed: title:%@", ekEvent.title);
                *stop = YES;
            }
        }];
    }];
} 
```

# bash - Bash 交互式和非交互式 shell 行为

> ID：16162032
> 
> 赞同：0
> 
> 时间：2013-04-23T06:00:09.993
> 
> 标签：bash, unix, interactive-shell

我很难使用交互式和非交互式 shell。我不明白哪个是哪个。

例如，我读过非交互式 shell 通常`BASH_ENV`在启动时检查变量并执行它指向的任何内容。

所以，我所做的就是将 设置`BASH_ENV`为指向一些只回显 OK 的脚本。然后我`bash`在终端中输入，这个脚本回显OK。但为什么？我不是通过在终端中键入 bash 来调用另一个 INTERACTIVE shell，而不是相反吗？为什么它执行 bash_env？我在 linux mint maya 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:09:53.500

*您唯一*可以确定的是手册页中显示的内容（`bash`请参阅参考资料`INVOCATION`） - 详细列出了每个实例中运行的启动文件。

但是，没有什么可以阻止（例如）其中一个启动文件运行通常不会运行的*其他文件。*

例如，如果`.bash_profile`有以下行：

```
. ~/.profile 
```

它也会运行`.profile`脚本。

事实上，手册页指出：

> 当 bash 以非交互方式启动时，例如运行一个 shell 脚本，它会在环境中查找变量 BASH_ENV，如果它出现，则扩展其值，并将扩展值用作要读取和执行的文件名. Bash 的行为就像执行了以下命令：
> 
> `if [ -n "$BASH_ENV" ]; then . "$BASH_ENV"; fi`

因此，如果您将确切的行放在您的启动脚本中用于交互式 shell（如`~/.bash_profile`），您还将获取`BASH_ENV`.

最好的办法是检查 INVOCATION 部分以找出哪些文件将运行，然后跟踪它们（使用`set -x`脚本顶部的类似内容）以查看从何处调用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:11:34.540

如果没记错的话，Bash 只有在你告诉它的情况下才具有交互性，例如

```
bash -i 
```

因此，通过调用只是`bash`调用了非交互式 Bash。

更多信息

```
-一世

如果存在 -i 选项，则 shell 是交互式的。

```

# dynamics-crm-2011 - CRM 2011 Ribbon CheckBox 默认选中

> ID：16162034
> 
> 赞同：0
> 
> 时间：2013-04-23T06:00:13.520
> 
> 标签：dynamics-crm-2011

如何默认选中功能区上的复选框？[MSDN](http://msdn.microsoft.com/en-us/library/gg327840.aspx)

上似乎没有提到一个属性。 可以用 JavaScript 完成吗？

我在队列视图上有一个复选框，选中时应该保持队列自动刷新：

```
<CustomAction Id="Mscrm.HomepageGrid.queueitem.MainTab.Workflow.Controls.CustomAction" Location="Mscrm.HomepageGrid.queueitem.MainTab.Management.Controls._children" Sequence="60">
  <CommandUIDefinition>
    <CheckBox  Id="Mscrm.HomepageGrid.queueitem.MainTab.Workflow.Controls.CheckBox" LabelText="Auto Refresh" TemplateAlias="o3" ToolTipTitle="Queue Auto Refresh" ToolTipDescription="Periodically auto refresh this queue" Command="Mscrm.HomepageGrid.queueitem.MainTab.Workflow.Controls.Command" Sequence="60" />
  </CommandUIDefinition>
</CustomAction> 
```

自动刷新工作正常，默认开启。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:05:45.593

我不确定，但我相信应用程序之间的 Microsoft 功能区非常相似。

所以你可以试试；[复选框元素](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd371607%28v=vs.85%29.aspx)：`ApplicationDefaults.IsChecked`

*老实说，这是完全的猜测*

# python - 有没有办法从 Python 编写格式化文本？

> ID：16162036
> 
> 赞同：8
> 
> 时间：2013-04-23T06:00:23.823
> 
> 标签：python, text, format, fwrite

如果您正在使用 python 写入文件，有没有办法使文本的某些部分变为粗体、斜体或下划线？

我试过了：

```
test = '/location/tester.rtf'
out_file = open(test,'w')
out_file.write('is this {\bold}?')
out_file.close() #thanks to the comment below 
```

是否可以通过 python 编写粗体、斜体或带下划线的文本？我觉得 .rtf 是最基本的格式化文本，但如果我错了，请纠正我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T06:31:06.540

一直在玩这个假设的 MS 字，我发现您需要将文档包装在“{}”中并定义文档类型，然后以“\b”开始粗体并以“\b0”结束。一个例子是

```
test = 'tester.rtf'
out_file = open(test,'w')
out_file.write("""{\\rtf1
This is \\b Bold  \\b0\line\
}""")
out_file.close() #thanks to the comment below 
```

注意双 '\' 因为 python 对 '\b' 和 '\r' 有特殊的含义。

完整信息来自[http://www.pindari.com/rtf1.html](http://www.pindari.com/rtf1.html)，其中还描述了斜体、字体等。

让我知道这是否对你有用。

# iphone - 使应用程序与 iPhone4 和 iPhone5 兼容，无需设置不同的帧大小

> ID：16162037
> 
> 赞同：0
> 
> 时间：2013-04-23T06:00:29.780
> 
> 标签：iphone, ios, ios5, ios6

今天我将创建一个与 iphone4 和 iphone5 兼容的 iphone 应用程序。早些时候，我通过使用以下代码为 iphone5 调整控制器，以编程方式更改了 iphone4 应用程序视图。

```
 CGRect screenBounds = [[UIScreen mainScreen] bounds];
 if (screenBounds.size.height == 568) {
 // code for iphone5
 }
 else {
 // code for iphone4
 } 
```

我认为这很难每次都跟踪控制器的所有帧和大小。我创建了一个示例应用程序，并尝试在视图开始时使用自动调整大小选项（我已勾选）并在检查器中选择 Retina 4 全屏尺寸。并且还选择了模拟器硬件设备是 iphone Retina-4 inch

![为iphone5选择](https://i.stack.imgur.com/cZWUH.png)

如果我更改模拟器硬件设备是 iphone Retina-3.5 英寸，那么屏幕看起来像

![为 iphone4 选择](https://i.stack.imgur.com/jNoOg.png)

我的问题是没有设置框架我怎么能解决这个问题。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:16:13.843

您可以使用此链接自动调整大小

[http://blog.mugunthkumar.com/coding/supporting-the-iphone-5/](http://blog.mugunthkumar.com/coding/supporting-the-iphone-5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:04:12.000

而不是给`static`数字给框架`dynamically`。意味着不要给 320 给`self.view.frame.size.width`所以你不需要检查设备，只需要添加默认启动屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:14:40.003

使用 XCode 版本 4.x 中提供的自动布局功能可以轻松解决您的问题。通过以下链接：-

[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

通过使用 Autolayout 应用一些约束，您的问题可以很容易地得到解决。快乐编码:)

# php - 解析错误：语法错误，意外的 T_VARIABLE，需要 ',' 或 ';' igradeentry.php 在第 13 行

> ID：16162039
> 
> 赞同：0
> 
> 时间：2013-04-23T06:00:42.390
> 
> 标签：php

```
<?php
include('../connect.php');
$id=$_SESSION['SESS_FIRST_NAME'];
$results = mysql_query("SELECT * FROM advisory WHERE tid='$id'");
while($rows = mysql_fetch_array($results))
{
$level=$rows['level'];
$section=$rows['section'];
}
echo '<input type="hidden" value="" name="level" />';
echo '<input type="hidden" value="" name="section" />';
echo '<input type="hidden" value="'.$id.'" name="tidsss" />'
$result = mysql_query("SELECT * FROM prereg WHERE level='$level' AND section='$section'");
while($row = mysql_fetch_array($result))
{
echo '<tr class="record">';
echo '<td  style="border-left: 1px solid #C1DAD7">'.$row['fname'].' '.$row['mname'].'     '.$row['lname'].'</td>';
echo '<td><div align="left"><input type="hidden" value="'.$row['idnumber'].'"     name="idnumber[]" /><input type="hidden" value="'.$row['schoolyear'].'" name="schooly[]" /><input type="text" name="grade[]" /></div></td>';
echo '</tr>';
}
?> 
```

我正在研究一个年级输入系统但是我遇到了这个问题这是我的数据库 id,idnumber,level,section,tid,grade,schoolyear 列都是 varchar 除了 id=int

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:04:59.560

检查以下行：

```
echo '<input type="hidden" value="'.$id.'" name="tidsss" />' 
```

它应该是：

```
echo '<input type="hidden" value="'.$id.'" name="tidsss" />'; 
```

（你最后错过了分号）

小心类似的语法错误，在大多数情况下，解决方案都包含在其中。学习如何理解错误/警告信息的含义，否则你会浪费很多宝贵的时间来写社区而不是学习编程。

祝你好运！

# jquery - jQuery 如何清除/替换变量中的存储值（来自 .val() ）

> ID：16162040
> 
> 赞同：0
> 
> 时间：2013-04-23T06:00:43.717
> 
> 标签：jquery, variables, text, input

感谢之前的所有帮助，我已经做到了这一点：我能够在表格中添加行并选择一个选项并显示一个文本输入。这是[小提琴链接](http://jsfiddle.net/yvonnezoe/5cbjt/1/)。以前我使用多选，但我现在改为单选，因为多选导致显示我的“输出类型”出现问题（也许你可以建议更好的方法；））

现在我面临另一个问题，即存储在变量中的值不会被新的输入值替换。因此，“输出编号”列将只显示输入的第一个数字。另一个奇怪的事情是，它只能从“区域输入”接收/更新输入，因为它被放置在 html div 的第一个位置。我试图将其他人更改为顶部，同样的事情也发生了。

```
var textInput = "";
$('.TextInput').empty();
textInput = $('.TextInput').val(); 
```

我试过`.empty()`了，但正如你所见，它不起作用。每个 div 都有不同的 ID。但是，如果我使用 ID，就像我之前测试过的一样，`var textInput = $('#outputTextInput').val();`我怎么能为其他人做同样的事情？我使用或`||`喜欢 `var textInput = $('#outputTextInput').val() || $('#zoneTextInput').val();`吗？

另外，我必须为“Arm”创建另一个函数，因为它使用的是复选框而不是文本输入吗？

更新：这是有效的，但不适用于我的程序:(( [http://jsfiddle.net/yvonnezoe/MKfLU/1/](http://jsfiddle.net/yvonnezoe/MKfLU/1/)

**更新：我发现了这个问题！**在这里查看我的问题：[jQuery vs jQuery Mobile - 脚本顺序重要吗？](https://stackoverflow.com/questions/16181610/jquery-vs-jquery-mobile-does-the-script-sequence-matter)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:08:30.157

尝试在您的代码中替换此行：

```
$('.TextInput').empty();
textInput =  $('.TextInput').val(); 
```

有了这个：

```
$('.TextInput').not($(this).prev('.TextInput')).val('');
textInput =  $(this).prev('.TextInput').val(); 
```

然后再试一次...

这是您的标记：

```
<input type="text" class="TextInput" id="zoneTextInput" value="">
<input type="submit" class="add" value="Add" /> 
```

现在，当您单击带有 class 的 Add 按钮时`add`，然后`$(this)`表示当前范围内的元素，而`$(this).prev('.TextInput')`表示带有 class 的元素之前的元素`TextInput`（这里是输入文本框）。因此，`$(this).prev('.TextInput').val()`将通过您单击的添加按钮为您提供当前文本框的值。然而，`$('.TextInput').val()`无论单击哪个添加按钮，都会为您提供第一个元素的值。

更多细节：[prev()](http://api.jquery.com/prev/)和[not()](http://api.jquery.com/not/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:17:54.237

textInput=$(this).prev().val(); 之所以有效，是因为在 click 事件中， this 指向按钮， prev 选择 dom 中的前一个元素（在本例中为 input 元素），然后 .val() 选择它的值。哪一部分还不行？

# java - 更新到 JRE 7u21 后运行 Applet 的 ClassCastException

> ID：16162046
> 
> 赞同：2
> 
> 时间：2013-04-23T06:01:04.427
> 
> 标签：java, applet, classcastexception

我正在开发一个将不再在 JRE 版本 7u21 下启动的签名小程序。

我已经使用 7u21 JDK 重新编译了小程序，我已经将该`Trusted-Library:true`行添加到清单中（并在它导致 SecurityException 后再次删除它），我已经重新安装了 JRE。以下是我可以从 Java 控制台中获得的信息：

```
basic: exception: com.sun.deploy.net.DownloadEngine$2 cannot be cast to com.sun.deploy.cache.CacheEntry.  
ExitException[ 3]java.lang.ClassCastException: com.sun.deploy.net.DownloadEngine$2 cannot be cast to com.sun.deploy.cache.CacheEntry  
               at sun.plugin2.applet.JNLP2Manager.loadJarFiles(Unknown Source)  
               at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)  
               at java.lang.Thread.run(Unknown Source) 
```

该小程序正在使用 Oracle 的 deployJava 脚本进行部署。

这发生在我们所有的 Chrome、FireFox、IE 8 和 9 测试系统上，这表明存在插件问题。它目前正在影响在此 JRE 更新之前运行良好一年多的生产系统。

任何人的任何见解都将不胜感激。

本地构建的 JNLP 文件内容为：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" version="2.0.30" codebase="http://localhost:8080/" href="avs/res/util-applet.jnlp">
    <information>
        <title>Utility Applet - LOCAL</title>
        <vendor>Vendor</vendor>
    </information>
    <resources>
        <j2se version="1.7+" href="http://java.sun.com/products/autodl/j2se" java-vm-args="-Xms256m -Xmx1024m"/>
        <jar href="/avs/res/util-jar-with-dependencies.jar" main="true" />
    </resources>
    <security>
        <all-permissions/>
    </security>
    <applet-desc name="guiApplet" main-class="au.edu.ncver.avs.web.util.UtilApplet" width="1" height="1"/>
    <update check="background"/>
</jnlp> 
```

**更新 1**
我可以很好地确认这是来自插件的缓存。如果我进入 Java 控制面板并禁用本地存储，那么问题就会消失。重新启用本地存储会带来问题。

**更新 2**
更新了 JNLP 以反映对上述 SecurityException 的修复；但 ClassCastException 仍然存在。几周前，我在 Oracle 上记录了一个错误，但没有收到他们的任何消息，而且该错误实际上也没有出现在他们的数据库中。

**更新 3**
问题在 7u25 中仍然存在。

# javascript - 如何在文本区域字段中仅获取两个字母作为字母并保留为数字

> ID：16162048
> 
> 赞同：-2
> 
> 时间：2013-04-23T06:01:11.287
> 
> 标签：javascript, jquery

我是 javascript 新手，我找不到我需要的确切代码。

我想要一个 maxlength="5" 的文本字段，它应该看起来像 ex:AE456, LM975。即，前两个字母应该是字母，接下来的三个字母应该是数字。

文本区域应仅根据此模式接受输入。我不想要任何警报。简单地说，它必须接受仅在此模式中键入的任何内容。最好使用 Javascript。任何帮助都是非常可观的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:11:11.837

如果你有这个 HTML：

```
<input type="text" id="text1" /> 
```

然后你可以使用这个Javascript：

```
function validateInput() {
    var val = document.getElementById("text1").value;
    return /[A-Z]{2}\d{3}/i.test(val);
} 
```

并称之为：

```
if (validateInput()) {
    // Matches pattern: @@###
} 
```

**演示：http:** [//jsfiddle.net/GgQsz/](http://jsfiddle.net/GgQsz/)

这允许以大写和小写字母字符开头。如果您只想允许大写，请删除`i`Regex 的标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:07:48.917

HTML5 支持字段可以根据提供的正则表达式接受值的模式。你可以在这里找到相关的帖子。 [HTML5 文本字段的正则表达式模式](https://stackoverflow.com/questions/14076214/regex-patterns-for-html5-text-field)

但是，如果您想支持旧版浏览器，则必须将“keypress”之类的事件附加到输入字段，并处理该事件以验证输入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:09:17.670

你需要的是一个正则表达式。在此处查看正则表达式。这应该让您了解如何检查您的病情。

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

# android - 复杂的 android 布局（重叠、左/右对齐、居中对齐）

> ID：16162053
> 
> 赞同：0
> 
> 时间：2013-04-23T06:01:23.970
> 
> 标签：android, android-layout

我必须在 Android 设备上创建以下布局：

![布局](https://i.stack.imgur.com/Rtlj6.jpg)

要求如下： 第一个布局占据整个屏幕（fill_parent）；第二个（在屏幕底部）覆盖第一个并具有以下格式：

*   3列；
*   占据整个屏幕宽度；
*   箭头左右对齐，文本区域根据屏幕宽度调整大小；

我尝试了很多东西，但由于我是 Android 世界的新手，我还没有成功。

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="25px"
    android:minHeight="25px"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="100"
    android:id="@+id/RootView">
    <ImageView
        android:src="@android:drawable/ic_menu_gallery"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:id="@+id/mapImageView" />
    <LinearLayout
        android:id="@+id/bottomArea"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentBottom="true">
        <LinearLayout
            android:id="@+id/adsArea"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="horizontal"
            android:layout_alignParentBottom="true">
            <ImageButton
                android:src="@drawable/leftArrow"
                android:id="@+id/btnPrev"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="0dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
            <LinearLayout
                android:orientation="vertical"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_gravity="center">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Title" />
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="This is some summary text" />
            </LinearLayout>
            <ImageButton
                android:src="@drawable/rightArrow"
                android:layout_alignParentRight="true"
                android:layout_marginRight="0dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/btnNext" />
        </LinearLayout>
    </LinearLayout>
</RelativeLayout> 
```

但文本似乎没有居中对齐，也没有调整到屏幕宽度：

![在此处输入图像描述](https://i.stack.imgur.com/qbOHV.jpg)

有人有线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:00:50.210

请在下面找到代码。此外，不要将多个视图组用于简单的布局解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RootView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/mapImageView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@android:drawable/ic_menu_gallery" />

    <RelativeLayout
        android:id="@+id/adsArea"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <ImageButton
            android:id="@+id/btnPrev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:src="@drawable/leftArrow" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:orientation="vertical" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Title" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="This is some summary text" />
        </LinearLayout>

        <ImageButton
            android:id="@+id/btnNext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:src="@drawable/rightArrow" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:30:07.480

**将此代码用于您所需的布局**...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linear1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/linear2" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/ic_launcher" />
</LinearLayout>

<RelativeLayout
    android:id="@+id/linear2"
    android:layout_width="match_parent"
    android:layout_height="70dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" >

    <ImageButton
        android:id="@+id/leftButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toLeftOf="@+id/rightButton1"
        android:layout_toRightOf="@+id/leftButton1"
        android:gravity="center"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Title" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="This is some summary text" />

    </LinearLayout>

    <ImageButton
        android:id="@+id/rightButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_launcher" />
</RelativeLayout> 
```

# c - sizeof(struct tag *) 和 sizeof(struct tag) 的区别

> ID：16162057
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:01:39.207
> 
> 标签：c, struct, sizeof

```
struct student_simple
 {
    int rollno;
    char *name; 
}; 
```

之间的区别

```
struct student_simple *s2 = malloc(sizeof(struct student_simple *)); 

struct student_simple *s3 = malloc(sizeof(struct student_simple )); 
```

我可以毫无问题地使用 s2 和 s3 但是当我在 gdb 中检查大小时

```
gdb$ p sizeof(struct student_simple) gives 16 

gdb$ p sizeof(struct student_simple *) gives 8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:03:58.133

> [...] 和 [...] 有什么区别？

一个星号。而且，如果您尝试将其`s2`用于存储`student_simple`结构，您将获得未定义的行为。

> 大小为 8 字节的 malloc 如何将 student_simple 结构存储在 s2 中？

它不能。为什么你认为它可以？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:05:06.563

`sizeof(struct student_simple *)`给出指向 的指针的大小`student_simple`，但 `sizeof(struct student_simple )`给出类型为 的结构变量的大小`student_simple`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:03:04.497

未定义的行为是未定义的。任何事情都可能发生，包括正确行为的出现。使用`s3`表格，它是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:04:31.020

`sizeof(any_Structure_Pointer)`将给出 8 或 4 这是编译器的基础。但是`sizeof(YOUR_Structure)`会给出在结构中声明的所有数据类型的大小。

如果您有疑问，请检查`sizeof(int*), sizeof(void*)...`。这将给出 8 或 4 ..

# c# - WPF：TreeView 或 TreeListView 标题水平滚动问题

> ID：16162067
> 
> 赞同：5
> 
> 时间：2013-04-23T06:02:35.897
> 
> 标签：c#, wpf, vb.net, treeview, treelistview

[我从这里](http://msdn.microsoft.com/en-us/library/vstudio/ms771523%28v=vs.90%29.aspx)下载了 TreeListView 。剪切数据时不显示水平或垂直滚动​​条。像这样

![](https://i.stack.imgur.com/rMp8I.jpg)

所以我将其样式更改为

```
<Style TargetType="{x:Type l:TreeListView}">
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
            Value="Auto" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
            Value="Auto" />
    <Setter Property="VerticalContentAlignment"
            Value="Center" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type l:TreeListView}">
                <Border BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <DockPanel>
                        <GridViewHeaderRowPresenter Columns="{StaticResource gvcc}"
                                                    DockPanel.Dock="Top" />
                        <ScrollViewer x:Name="_tv_scrollviewer_"
                                      Background="{TemplateBinding Background}"
                                      CanContentScroll="False"
                                      Focusable="True"
                                      HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                      Padding="{TemplateBinding Padding}"
                                      SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                      VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </DockPanel>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="VirtualizingStackPanel.IsVirtualizing"
                             Value="true">
                        <Setter Property="CanContentScroll"
                                TargetName="_tv_scrollviewer_"
                                Value="true" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

垂直滚动条很好。但问题是水平 Scollbar。当数据被水平剪切并且滚动条向右移动时，数据向右移动但标题保持在原位。像这样。

![](https://i.stack.imgur.com/RrrV3.jpg)

如何克服当treeitem水平滚动时，标题随之移动的问题。我不允许将标题放在滚动查看器中，因为它们需要在垂直滚动数据时可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T14:10:48.440

如果您希望完整的树视图（包括标题）水平滚动，请另外添加一个这样的滚动查看器：

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" >
    <Treeview/>
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:04:32.210

我相信设置`HorizontalScrollBarVisibility="Disabled"`应该强制滚动查看器的内容在里面。禁用滚动条后，它应该不会弄乱渲染。这实际上是几个版本的问题。我不确定它是否已在最新的 WPF 中修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T06:56:29.637

我对这种树也有同样的问题，现在通过sincronizing滚动条解决了。我向 GridViewHeaderRowPresenter 添加了一个滚动条，该滚动条水平隐藏并垂直禁用，并且我使用了 codeproject 中的代码，该代码已经实现了滚动条的 sincronization。

```
<DockPanel>
        <ScrollViewer DockPanel.Dock="Top" HorizontalScrollBarVisibility="Hidden"
                    VerticalScrollBarVisibility ="Disabled"
                    controls:ScrollSynchronizer.ScrollGroup="Group1">
          <GridViewHeaderRowPresenter Columns="{StaticResource gvcc}"/>
         </ScrollViewer>
         <ScrollViewer  
                     HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                     VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                     controls:ScrollSynchronizer.ScrollGroup="Group1">
                  <ItemsPresenter />
          </ScrollViewer>
</DockPanel> 
```

链接到库[http://www.codeproject.com/Tips/564665/Synchronize-Two-Scroll-Viewers-in-WPF](http://www.codeproject.com/Tips/564665/Synchronize-Two-Scroll-Viewers-in-WPF) 和库的原始文章[http://www.codeproject.com/Articles/39244/滚动同步](http://www.codeproject.com/Articles/39244/Scroll-Synchronization)。

# android - 在 Eclipse 中打开项目时出现错误消息

> ID：16162080
> 
> 赞同：0
> 
> 时间：2013-04-23T06:03:31.337
> 
> 标签：android, eclipse

我试图通过单击打开一个项目（即展开项目文件夹）。我收到此消息

![在此处输入图像描述](https://i.stack.imgur.com/7XOoc.jpg)

对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:41:37.010

```
sudo apt-get --reinstall install tzdata-java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:36:16.773

Scala 插件不支持 Preferences -> Run/debug -> Launching 的首选项。

例如，启动操作 -> 选择启动先前启动的应用程序。

弹出“编辑器没有主类型”出现是因为应用于启动器的过滤器是 *.scala，所以控制总是传递给 ScalaLaunchShortcut，然后它没有找到任何主类。向启动器添加了一个属性以过滤具有主要方法的 scala 编辑器，如果没有，则 JDT 启动的默认行为（启动前一个等）正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:07:21.537

你应该试试这个：卸载你的eclipse并重新安装它。可能是您的硬件规格不支持您的 Eclipse

# iphone - CLLocationManager trueHeading 为 -1

> ID：16162082
> 
> 赞同：3
> 
> 时间：2013-04-23T06:03:51.773
> 
> 标签：iphone, cllocationmanager

我在使用`CLLocationManager`.

我正在使用`startUpdatingLocation`方法及其委托方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading 
```

我得到了`newHeading.trueHeading`。

问题是有时会`newHeading.trueHeading`返回-1，一旦设备开始返回-1，它就会保持不变，这意味着它总是返回-1。

谁能告诉我这个问题的技术细节和解决方法。

在探索 Apple 的文档时，我发现

`"A negative value means that the reported heading is invalid, which can occur when the device is uncalibrated or there is strong interference from local magnetic fields."`

但没有信息如何避免或解决方法。

**注意：**我正在真实设备 iPhone 4、iPhone 4S、iPad 2 和 iPad 3 上测试这个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-01-03T19:06:25.687

如果您发现 .magneticHeading 具有有效航向（0 到 360）但 .trueheading 具有无效值（-1），则这通常意味着用户已关闭以下设置：

隐私/位置/系统服务/指南针校准

[![在此处输入图像描述](https://i.stack.imgur.com/nHgMv.jpg)](https://i.stack.imgur.com/nHgMv.jpg)

将其重新打开可以解决问题。

您还可以检查 Apple 的指南针应用程序设置，看看它是否启用了“使用真北”设置。当罗盘校准设置被禁用时，该设置也被禁用。

[![在此处输入图像描述](https://i.stack.imgur.com/PLbbB.jpg)](https://i.stack.imgur.com/PLbbB.jpg)

唉，Apple 没有提供任何方法来测试这一点，除了观察磁航向可用而真航向不可用，然后假设这一定是因为用户禁用了罗盘校准设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:59:53.463

> 但没有信息如何避免或解决方法。

在那种情况下`iOS`想要显示一个校准对话框，如果你不禁止这个对话框。一旦用户通过进行 8 字形动作校准设备，该标题就会生效。

如果由于存在永久强磁场（例如在汽车内部）而无法使用，则根本没有机会获得磁航向。

在这种情况下，您可以考虑使用位置管理器中的 location.course，它给出了用户移动的方向，由 GPS 测量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:13:48.047

您可以使用属性检索沿 X、Y 和 Z 轴的原始磁值`CLHeading`。这些值以微特斯拉为单位进行测量，并归一化为 Apple 规定的**-128 到 128**的范围。每个轴值代表与设备内置磁力计跟踪的磁场线的偏移量。

有关更多信息，请参阅此链接..[书籍](http://books.google.co.in/books?id=7T4MuMwQZxgC&pg=PT174&lpg=PT174&dq=CLHeading%20return%20-1%20every%20time&source=bl&ots=mzUVSro77f&sig=wEZK5B3_yuHSdiwZjQQWm1BT7LM&hl=en&sa=X&ei=BSV2UYOiE8HSrQeR_YGABg&sqi=2&ved=0CDkQ6AEwAg#v=onepage&q&f=false)

我希望这对你有帮助......

# android - 突出显示 android html.fromHtml 中的 textcolor

> ID：16162085
> 
> 赞同：1
> 
> 时间：2013-04-23T06:04:01.997
> 
> 标签：android, html, textview

我必须开发一个 android 应用程序。

我必须使用 html.fromHtml 显示文本视图。

这是我的内容：

```
**Hottie Mallika Sherawat speaks about the men whom she’s over the moon about** 
```

在这些文本中，已在 html 文件上对齐，如下所示：

```
 <span style="color:#ff8c00;">Mallika Sherawat&nbsp;</span> 
```

我也必须在我的 android textview 上突出显示 Mallika Sherawat 文本上的那种颜色。

我能怎么做 ？？？

我写了下面的代码：

```
String fullcontent = in.getStringExtra("FullContent");
    full_content = fullcontent.substring(1);

    lblContent = (TextView) findViewById(R.id.title1);

  lblContent.setText(Html.fromHtml(full_content),TextView.BufferType.SPANNABLE); 
```

这里支持 html.fromHtml b,p,斜体文本..但是为什么不支持突出显示特定文本？请问我该怎么办？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:08:48.017

这是textview支持的html标签列表

[http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

使用 SpannableString

[http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

例子：

使用可扩展字符串

```
 _tv.setText("");
              SpannableString ss1=  new SpannableString(s);
        ss1.setSpan(new StyleSpan(Typeface.BOLD), 0, 23, 0);
        ss1.setSpan(new StyleSpan(Typeface.ITALIC), 0, 23, 0);
        ss1.setSpan(new ForegroundColorSpan(Color.BLUE), 0, 23, 0); 
     _tv.setText(ss1); 
```

![在此处输入图像描述](https://i.stack.imgur.com/6xP8h.png)

使用 HTML

```
String text = "<font color=#cc0029>hello</font> <font color=#ffcc00>world</font>";
yourtextview.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:18:41.043

尝试这个...

```
String styledText = "This is <font color='red'>simple</font>.";
textView.setText(Html.fromHtml(styledText), TextView.BufferType.SPANNABLE); 
```

# silverlight - 无法通过 VS2012 在 Windows Phone 8 上部署 WP7 SDK 应用程序

> ID：16162086
> 
> 赞同：2
> 
> 时间：2013-04-23T06:04:10.620
> 
> 标签：silverlight, windows-phone-8

我已经为开发者注册了我的设备。但是在VS2012中选择设备并开始部署后，它给出了错误。 **无法安装应用程序。此手机上的开发者应用程序数量已达到上限。请卸载开发者应用程序，然后重试。**

我是在设备上部署的新手。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:39:10.803

您是否碰巧拥有多个 Windows Phone 8 设备？事实证明，如果您以相同的名称注册两个设备，就会出现此问题。我已经注册了两个用于开发的 Windows Phone 设备，但我没有给它们一个唯一的名称（它们都被命名为默认名称，我认为是 Windows Phone）。在第一台设备上，我安装了多个测试应用程序，显然，在第二台设备上，没有安装任何东西，因此我对这个错误感到沮丧。我做了以下工作以使其工作：

*   从[开发门户](https://dev.windowsphone.com/en-us/Account/Devices)中删除手机，
*   使用 Windows Phone 开发人员注册取消注册这两个设备。
*   [重命名设备](http://forums.wpcentral.com/windows-phone-8/202470-rename-device.html)，确保它们的名称不同。
*   重新注册电话，现在使用新的唯一名称。

我希望它也适用于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:54:01.483

这意味着您已经安装了三 (3) 个测试应用程序。windows phone 最多只能安装 3 个用于调试的应用程序。

1.  卸载您以前安装的应用程序之一。
2.  现在再次部署您的新应用程序。

希望现在会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:32:33.980

1.  从设备中卸载不需要的应用程序。
2.  重启设备
3.  尝试部署解决方案。它现在可以工作了。

# c++ - 将所有 CUDA 函数更改为 __host__ __device__

> ID：16162088
> 
> 赞同：2
> 
> 时间：2013-04-23T06:04:16.603
> 
> 标签：c++, c, cuda

我想在 CUDA 中使用一个存在的函数，但它包含许多类和其他函数。`__host__ __device__`在每个函数之前添加是微不足道的。那么，有没有一种自动方法可以做到这一点？或者如何让 nvcc 将所有函数编译为`__device__ __host__`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:58:56.457

基本上，GPU 编程都是关于大规模并行性的。它与普通的单线程编程完全不同。除非您只想将这些函数同时应用于大型数组的各个元素，否则将其编码到 GPU 中没有任何好处。事实上，GPU 核心时钟比你的处理器慢得多。如果您将主要针对单线程风格的 CPU 编写的函数编译到 GPU，您将获得潜在的性能损失。您需要将您的问题重新考虑到 GPU 范式中。

# html - 缩进正文，但不缩进块引用和图像

> ID：16162089
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:04:18.227
> 
> 标签：html, css

我想缩进文档正文中的所有文本而不缩进块引用或图像。如果我在 style.css 中添加：

```
body {
    text-indent: 2em;
} 
```

文本是缩进的，但块引用和图像也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:07:45.463

设置`text-indent: 0`在您不想缩进的元素上。[这样](http://jsbin.com/iliwuv/1/edit)的。

对于图像，您需要将它们设置为`display: block`或将它们放入带有`text-indent: 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:09:53.433

该[`text-indent`](http://www.w3.org/TR/CSS21/text.html)属性仅适用于块容器，因此不会影响图像。但是包含图像的块会受到影响，这可能会影响图像的位置。

你应该`text-indent`只在那些你想让它们的第一行缩进的块上设置。通常这意味着类似`p { text-indent: 1em; }`. 如果您希望元素以外的块`p`也受到影响，请编写合适的选择器列表而不是简单的`p`.

# list - 如何将 java.util.List 转换为 Scala 列表

> ID：16162090
> 
> 赞同：111
> 
> 时间：2013-04-23T06:04:18.777
> 
> 标签：list, scala, scala-java-interop

我有这个带有以下错误的 Scala 方法。无法转换为 Scala 列表。

```
 def findAllQuestion():List[Question]={
   questionDao.getAllQuestions()
 } 
```

类型不匹配; 找到：`java.util.List[com.aitrich.learnware.model.domain.entity.Question]`需要： `scala.collection.immutable.List[com.aitrich.learnware.model.domain.entity.Question]`

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-23T08:07:51.147

您可以使用 Scala 简单地转换列表`JavaConverters`：

```
import scala.collection.JavaConverters._

def findAllQuestion():List[Question] = {
  questionDao.getAllQuestions().asScala.toList
} 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-10-24T01:16:49.023

```
import scala.collection.JavaConversions._ 
```

将为您进行隐式转换；例如：

```
var list = new java.util.ArrayList[Int](1,2,3)
list.foreach{println} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-10-06T05:02:42.320

```
def findAllStudentTest(): List[StudentTest] = { 
  studentTestDao.getAllStudentTests().asScala.toList
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2019-03-28T23:36:20.113

开始`Scala 2.13`，该软件包`scala.collection.JavaConverters`被标记为已弃用，以支持[`scala.jdk.CollectionConverters`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/jdk/CollectionConverters$.html)：

```
import scala.jdk.CollectionConverters._

// val javaList: java.util.List[Int] = java.util.Arrays.asList(1, 2, 3)
javaList.asScala.toList
// List[Int] = List(1, 2, 3) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-10-13T15:20:41.937

导入`JavaConverters`，@fynn 的响应丢失了`toList`

```
import scala.collection.JavaConverters._

def findAllQuestion():List[Question] = {
  //           java.util.List -> Buffer -> List
  questionDao.getAllQuestions().asScala.toList
} 
```

# for-loop - 在 Dos FOR 命令中获取随机文件顺序

> ID：16162097
> 
> 赞同：1
> 
> 时间：2013-04-23T06:04:52.510
> 
> 标签：for-loop, dos

这是DOS

`FOR /R folder %%f in (*.filetype) DO something`

我喜欢实现，每次运行时，随机文件顺序`something`将从 FOR 循环中输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:16:50.560

这里的技巧是在临时文件中记录以随机数字键为前缀的文件名，按随机键对行进行排序，然后以新顺序提取文件名。这可以通过 DOS 命令来完成，`type`如下`sort`所示：

```
@echo off
setlocal enabledelayedexpansion
set tempfile=_%RANDOM%_%RANDOM%_%RANDOM%_.tmp
type nul >%tempfile%
for /R folder %%i in (*.filetype) do set key=!RANDOM!!RANDOM!!RANDOM!000000000000& echo !key:~0,15!%%i>> %tempfile%
for /F "tokens=*" %%i in ('type %tempfile% ^| sort') do set line=%%i&set file=!line:~15!&something
del %tempfile% 
```

`folder`请注意，在您的示例中，令牌`filetype`位于第一行（写入临时文件的位置），而`something`在下一行。而不是`something`，您可以在这里编写例如`echo !file!`将文件名打印到控制台。

# sql - 任何人都可以为此编写查询吗？

> ID：16162100
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:05:04.857
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot, unpivot

我的表如下

```
recordId    fwildcardId refNumber   wildcardName    wildcardValue   comments
404450  154834               2              aaa               p          p
404450  154833               1              aa                oi         p   
406115  154867               1              98                ff        ff
406199  154869               1              aa                aaaa      ssss
406212  154880               1              bbbbb             card      comm 
```

我需要输出为

```
 RecordId fwildcardid1 refNo1  Name1  Value1 comments1 fwildcardid2 refNo2 Name2 Value2 comments2 fwildcardid3 refNo3 Name3 Value3 comments3 
         404450  154834         2     aaa     p      p        154833       1     aa    oi        p 
         406115   Null         Null   Null   Null   Null      Null        Null   Null   Null   Null   154867        1     98       ff       ff
         406199   Null         Null   Null   Null    Null    154869       1      aa    aaaa     ssss      Null      Null     Null    Null 
```

我尝试像下面这样旋转，但没有成功。

```
select t1.recordId,t1.wildcardid as fwildcardId,t1.refNo as refNumber,t2.wildcardName,t1.attributeValue as wildcardValue,t1.comments 
into #tempp
from fwildcards t1
inner join fwildcardattributes t2 on t2.WildcardID=t1.attributenameid and t2.MarketID=5
inner join fitems t3 on t3.recordid=t1.recordid and t3.marketid=5
order by recordid,attributenameid

select * from #tempp
pivot (min (wildcardValue) for wildcardName in ([aaa],[aa],[aaaa],[98],[kki],[bbbbb],[SUN])) as wildcardValuePivot 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:27:59.467

为了得到这个结果，你将不得不 UNPIVOT 然后 PIVOT 数据。UNPIVOT 将获取 、 、 和 列中的值`fwildcardId`，`refNumber`并将它们`wildcardName`转换为行。一旦数据成行，您就可以应用 PIVOT 函数来获得最终结果。`wildcardValue``comments`

要取消透视数据，您可以使用 UNPIVOT 函数，也可以使用 CROSS APPLY 和 VALUES 子句。

**取消透视**：

```
select recordid,
  col+cast(rn as varchar(10)) col,
  unpiv_value
from
(
  select recordid,
    cast(fwildcardid as varchar(10)) fwildcardid,
    cast(refnumber as varchar(10)) refnumber,
    cast(wildcardname as varchar(10)) name,
    cast(wildcardvalue as varchar(10)) value,
    cast(comments as varchar(10)) comments,
    row_number() over(partition by recordid
                      order by fwildcardid) rn
  from tempp
) d
unpivot
(
  unpiv_value
  for col in (fwildcardid, refnumber, name, value, comments)
) c 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/56180/25)。

**交叉应用和价值观：**

```
select recordid,
  col+cast(rn as varchar(10)) col,
  value
from
(
  select recordid,
    cast(fwildcardid as varchar(10)) fwildcardid,
    cast(refnumber as varchar(10)) refnumber,
    wildcardname,
    wildcardvalue,
    comments,
    row_number() over(partition by recordid
                      order by fwildcardid) rn
  from tempp
) d
cross apply
(
  values
    ('fwildcardid', fwildcardid),
    ('refnumber', refnumber),
    ('name', wildcardname),
    ('value', wildcardvalue),
    ('comments', comments)
) c (col, value) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/56180/26)。

这些将结果转换为以下格式：

```
| RECORDID |          COL |  VALUE |
------------------------------------
|   404450 | fwildcardid1 | 154833 |
|   404450 |   refnumber1 |      1 |
|   404450 |        name1 |     aa |
|   404450 |       value1 |     oi |
|   404450 |    comments1 |      p |
|   404450 | fwildcardid2 | 154834 | 
```

当您将数据反透视到同一列时，它必须是相同的数据类型。您会注意到我将 a 应用于`cast`列，因此数据类型是相同的。

数据为行格式后，您可以使用 PIVOT 将其转换回列：

```
select *
from
(
  select recordid,
    col+cast(rn as varchar(10)) col,
    unpiv_value
  from
  (
    select recordid,
      cast(fwildcardid as varchar(10)) fwildcardid,
      cast(refnumber as varchar(10)) refnumber,
      cast(wildcardname as varchar(10)) name,
      cast(wildcardvalue as varchar(10)) value,
      cast(comments as varchar(10)) comments,
      row_number() over(partition by recordid
                        order by fwildcardid) rn
    from tempp
  ) d
  unpivot
  (
    unpiv_value
    for col in (fwildcardid, refnumber, name, value, comments)
  ) c 
) src
pivot
(
  max(unpiv_value)
  for col in (fwildcardid1, refnumber1, name1, value1, comments1,
              fwildcardid2, refnumber2, name2, value2, comments2)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/56180/13)。

如果您有已知数量的列，则上述版本效果很好，但如果您有未知数量的值将被转换为列，那么您将需要使用动态 sql 来获取结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(c.col+cast(rn as varchar(10))) 
                    from
                    (
                      select row_number() over(partition by recordid
                                                order by fwildcardid) rn
                      from tempp
                    ) t
                    cross apply
                    (
                      select 'fwildcardid' col, 1 sortorder union all
                      select 'refNumber', 2 union all
                      select 'name', 3 union all
                      select 'value', 4 union all
                      select 'comments', 5
                    ) c 
                    group by col, rn, sortorder
                    order by rn, sortorder
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT recordid,' + @cols + ' from 
            (
              select recordid,
                col+cast(rn as varchar(10)) col,
                unpiv_value
              from
              (
                select recordid,
                  cast(fwildcardid as varchar(10)) fwildcardid,
                  cast(refnumber as varchar(10)) refnumber,
                  cast(wildcardname as varchar(10)) name,
                  cast(wildcardvalue as varchar(10)) value,
                  cast(comments as varchar(10)) comments,
                  row_number() over(partition by recordid
                                    order by fwildcardid) rn
                from tempp
              ) d
              unpivot
              (
                unpiv_value
                for col in (fwildcardid, refnumber, name, value, comments)
              ) c 
            ) src
            pivot 
            (
                max(unpiv_value)
                for col in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/56180/24)。这两个都给出了结果：

```
| RECORDID | FWILDCARDID1 | REFNUMBER1 | NAME1 | VALUE1 | COMMENTS1 | FWILDCARDID2 | REFNUMBER2 |  NAME2 | VALUE2 | COMMENTS2 |
-------------------------------------------------------------------------------------------------------------------------------
|   404450 |       154833 |          1 |    aa |     oi |         p |       154834 |          2 |    aaa |      p |         p |
|   406115 |       154867 |          1 |    98 |     ff |        ff |       (null) |     (null) | (null) | (null) |    (null) |
|   406199 |       154869 |          1 |   kki |   aaaa |      ssss |       (null) |     (null) | (null) | (null) |    (null) |
|   406212 |       154880 |          1 | bbbbb |   card |      comm |       (null) |     (null) | (null) | (null) |    (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:38:24.210

**无枢轴无交叉应用**

根据**编辑**的问题。

```
select 
DISTINCT
A.recordId AS recordId,
A1.fwildcardId AS fwildcardId1,
A1.refNumber AS refNumber1,
A1.wildcardName AS wildcardName1,
A1.wildcardValue AS wildcardValue1,
A1.comments AS comments1,
A2.fwildcardId AS fwildcardId2,
A2.refNumber AS refNumber2,
A2.wildcardName AS wildcardName2,
A2.wildcardValue AS wildcardValue2,
A2.comments AS comments2,
A3.fwildcardId AS fwildcardId3,
A3.refNumber AS refNumber3,
A3.wildcardName AS wildcardName3,
A3.wildcardValue AS wildcardValue3,
A3.comments AS comments3,
A4.fwildcardId AS fwildcardId4,
A4.refNumber AS refNumber4,
A4.wildcardName AS wildcardName4,
A4.wildcardValue AS wildcardValue4,
A4.comments AS comments4,
A5.fwildcardId AS fwildcardId5,
A5.refNumber AS refNumber5,
A5.wildcardName AS wildcardName5,
A5.wildcardValue AS wildcardValue5,
A5.comments AS comments5,
A6.fwildcardId AS fwildcardId6,
A6.refNumber AS refNumber6,
A6.wildcardName AS wildcardName6,
A6.wildcardValue AS wildcardValue6,
A6.comments AS comments6,
A7.fwildcardId AS fwildcardId7,
A7.refNumber AS refNumber7,
A7.wildcardName AS wildcardName7,
A7.wildcardValue AS wildcardValue7,
A7.comments AS comments7,
A8.fwildcardId AS fwildcardId8,
A8.refNumber AS refNumber8,
A8.wildcardName AS wildcardName8,
A8.wildcardValue AS wildcardValue8,
A8.comments AS comments8,
A9.fwildcardId AS fwildcardId9,
A9.refNumber AS refNumber9,
A9.wildcardName AS wildcardName9,
A9.wildcardValue AS wildcardValue9,
A9.comments AS comments9,
A10.fwildcardId AS fwildcardId10,
A10.refNumber AS refNumber10,
A10.wildcardName AS wildcardName10,
A10.wildcardValue AS wildcardValue10,
A10.comments AS comments10
from Table_name A
LEFt JOIN Table_name A1 ON A.recordId=A1.recordId AND A1.wildcardName='aaa'
LEFT JOIN Table_name A2 ON A.recordId=A2.recordId AND A2.wildcardName='aa'
LEFT JOIN Table_name A3 ON A.recordId=A3.recordId AND A3.wildcardName='98'
LEFT JOIN Table_name A4 ON A.recordId=A4.recordId AND A4.wildcardName=''
LEFT JOIN Table_name A5 ON A.recordId=A5.recordId AND A5.wildcardName=''
LEFT JOIN Table_name A6 ON A.recordId=A6.recordId AND A6.wildcardName=''
LEFT JOIN Table_name A7 ON A.recordId=A7.recordId AND A7.wildcardName=''
LEFT JOIN Table_name A8 ON A.recordId=A8.recordId AND A8.wildcardName=''
LEFT JOIN Table_name A9 ON A.recordId=A9.recordId AND A9.wildcardName=''
LEFT JOIN Table_name A10 ON A.recordId=A10.recordId AND A10.wildcardName='' 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/daf69/1)**

# c# - 小数精度和小数位数：Entity Framework Code First

> ID：16162102
> 
> 赞同：0
> 
> 时间：2013-04-23T06:05:11.253
> 
> 标签：c#, entity-framework

我想在代码优先方法中为所有十进制字段设置精度。为此

为此创建一个自定义属性：

```
 [AttributeUsage(AttributeTargets.Property, Inherited = false, AllowMultiple = false)]
    public sealed class DecimalPrecisionAttribute : Attribute
    {
        public DecimalPrecisionAttribute(byte precision, byte scale)
        {
            Precision = precision;
            Scale = scale;

        }

        public byte Precision { get; set; }
        public byte Scale { get; set; }

    } 
```

使用

```
 [DecimalPrecision(20,10)]
    public Nullable<decimal> DeliveryPrice { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        foreach (Type classType in from t in Assembly.GetAssembly(typeof(DecimalPrecisionAttribute)).GetTypes()
                                       where t.IsClass && t.Namespace == "YOURMODELNAMESPACE"
                                       select t)
         {
             foreach (var propAttr in classType.GetProperties(BindingFlags.Public | BindingFlags.Instance).Where(p => p.GetCustomAttribute<DecimalPrecisionAttribute>() != null).Select(
                    p => new { prop = p, attr = p.GetCustomAttribute<DecimalPrecisionAttribute>(true) }))
             {

                 var entityConfig = modelBuilder.GetType().GetMethod("Entity").MakeGenericMethod(classType).Invoke(modelBuilder, null);
                 ParameterExpression param = ParameterExpression.Parameter(classType, "c");
                 Expression property = Expression.Property(param, propAttr.prop.Name);
                 LambdaExpression lambdaExpression = Expression.Lambda(property, true,
                                                                          new ParameterExpression[]
                                                                              {param});
                 DecimalPropertyConfiguration decimalConfig;
                 if (propAttr.prop.PropertyType.IsGenericType && propAttr.prop.PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>))
                 {
                     MethodInfo methodInfo = entityConfig.GetType().GetMethods().Where(p => p.Name == "Property").ToList()[7];
                     decimalConfig = methodInfo.Invoke(entityConfig, new[] { lambdaExpression }) as DecimalPropertyConfiguration;
                 }
                 else
                 {
                     MethodInfo methodInfo = entityConfig.GetType().GetMethods().Where(p => p.Name == "Property").ToList()[6];
                     decimalConfig = methodInfo.Invoke(entityConfig, new[] { lambdaExpression }) as DecimalPropertyConfiguration;
                 }

                 decimalConfig.HasPrecision(propAttr.attr.Precision, propAttr.attr.Scale);
            }
        }
    } 
```

但是会检测到错误，

> 错误 1“System.Reflection.PropertyInfo”不包含“GetCustomAttribute”的定义，并且找不到接受“System.Reflection.PropertyInfo”类型的第一个参数的扩展方法“GetCustomAttribute”（您是否缺少 using 指令或装配参考？）。

我该如何解决这个问题？

# batch-file - 批处理文件以重命名多个文件夹中的文件

> ID：16162103
> 
> 赞同：1
> 
> 时间：2013-04-23T06:05:13.310
> 
> 标签：batch-file, directory, rename

我有如下给出的文件夹和文件结构。我需要一个 MS DOS 批处理文件来重命名多个文件夹中的文件。有人可以帮忙吗？

```
- Main Folder

    -->Sub Folder1
        --- File1_EN.txt
        --- File2_EN.txt

    --> Sub Folder2
        --- File3_EN.txt
        --- File4_EN.txt 
```

我想将文件名中的后缀“EN”重命名为“ENU”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:17:52.487

```
@echo off
for /D %%d in (*) do (
   ren "%%d\File*_EN.txt" "File*_ENU.txt"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:28:05.270

你可以这样做：

```
@Echo OFF

Set "Folder=C:\Users\Administrador\Desktop\Nueva carpeta"
Set "Suffix=_EN"
Set "Replace=_ENU"
Set "RegEx=\".*%Suffix%\"$" 

FOR /R "%Folder%" %%# in ("*") DO (
    (Echo "%%~n#"| FINDSTR /I "%RegEx%" 1>NUL) && (
    Set "NewFileName=%%~nx#"
    Call Set "NewFileName=%%NewFileName:%Suffix%=%Replace%%%"
    Call Echo [+] Renaming: "%%~nx#" "%%NewFileName%%"
    Ren "%%#" "%%NewFileName%%"
    )
)

Pause&Exit 
```

Findstr 是为了确保匹配的字符串是一个后缀，比做一个子字符串或将文件名从“_”字符向右拆分要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:13:47.307

尝试这个：

```
ren folder1\file*.txt file*_enu.txt
ren folder2\file*.txt file*_enu.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T19:13:49.050

如果要更改所有子文件夹，请使用：

```
for /f "delims=*" %a in ('dir File*_EN.txt /b /s') do ren "%a" File*_ENU.txt 
```

# django - 使用 django-allauth 实现 Ajax 请求/响应

> ID：16162108
> 
> 赞同：12
> 
> 时间：2013-04-23T06:05:25.420
> 
> 标签：django, django-forms, django-views, django-authentication, django-allauth

我在我的一个项目中使用 django-allauth。我想通过 ajax 实现登录/注册过程。我想要定制的注册表单。我正在浏览他们的 signupmixin 和注册表单。听起来我可以为每个操作编写自定义视图并将其映射到 url 配置。我不确定这样做的最佳方法是什么。

非常感谢您对此提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T15:18:58.963

这有点取决于你所说的ajax是什么意思。如果您只想在每个页面上都有一个弹出式登录/注册框，那么您可以简单地将表单添加到您的基本模板中，并在弹出框中使用 Javascript 动态显示它。如果您将表单操作 url 保留为原始`allauth`url，那么这已经给人一种 ajax 登录的感觉。您还可以通过使用`$.ajax`或`$.post`发布到原始`allauth`视图来调整内容。

类似上述的事情是在[http://officecheese.com/](http://officecheese.com/)上完成的——这是一个`allauth`基于网站的网站，尽管我不隶属于它。

如果 ajax 的意思是所有与身份验证相关的视图都应该通过 ajax 显示，而不会导致新的文档重新加载，那么恐怕你有点不走运。这对于涉及电子邮件验证或 OAuth 握手的场景来说是有问题的，因为在这里您通常从邮箱导航到新 URL，或重定向到 Twitter 等。

# php - 使用最少内存的 Ajax 长轮询、PHP 或 Python？

> ID：16162109
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:05:31.270
> 
> 标签：php, python

哪种语言会更好地实现长 ajax 轮询，我听说 php 在长 ajax 轮询中使用更多内存，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:16:54.110

如果您想进行长轮询，请选择 Node.js，它可以在非常低的硬件配置上处理数千个请求。如果您了解 Python，则可以使用 Tornado 或 Twister 进行长轮询应用程序。

# java - 如果我更改 jar 文件的位置，jar 文件不会拍摄图像

> ID：16162115
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:05:50.327
> 
> 标签：java, jar, embedded-resource, imageicon

我已经创建了一个带有一些图像的 jar 文件，但是如果我将 jar 的位置（即 c 更改为 D 目录），则不会显示图像。如果我将图像保留在 jar 文件存在的位置，则 jar 文件将显示图像，但如果我更改 jar 文件的位置而不是图像的位置，则 jar 文件不会显示图像。请帮我。

为了加载图像，代码执行以下操作：

```
Icon ic=new ImageIcon("Label.jpg"); 
I have created a jar file with some Images, but if I change the location of the jar viz., c to D directory, images are not showing. The jar file is showing Images if I keep Images where jar file exist but if I change the location of the jar file other than location of the Images, jar file not showing the Images.  Please help me. 
```

为了加载图像，代码执行以下操作：

```
Icon ic=new ImageIcon("Label.jpg"); 
```

代码是：

```
import javax.swing.*;
import javax.imageio.*;
import java.awt.*;
import java.io.*;
import java.awt.event.*;
import javax.swing.JLabel;

public class sk extends JFrame
{
BufferedImage img;
JFrame f;
JPanel p,p1;
JLabel l1,l2,l3,l4,l5,l6;
File fl;
    JLabel l=new JLabel("Process Status:");
JButton b=new JButton("Browse");
JButton b1=new JButton("Submit");

    public sk()
    {
    BufferedImage img;
    f=new JFrame("Akritiv.1.0");
    Container fc=f.getContentPane();

   BufferedImage img= null;
   try {
 Icon ic=new ImageIcon(ImageIO.read(getClass().getResource("/Label.jpg")));   
 Icon ic1=new ImageIcon(ImageIO.read(getClass().getResource("/fig.jpg"))); 
 Icon ic2=new ImageIcon(ImageIO.read(getClass().getResource("/na.jpg"))); 
 Icon ic3=new ImageIcon(ImageIO.read(getClass().getResource("/logo1.jpg")));
 Icon ic4=new ImageIcon(ImageIO.read(getClass().getResource("/status1.jpg"))); 
 Icon ic5=new ImageIcon(ImageIO.read(getClass().getResource("/ver.jpg")));  
 }catch (IOException e) {}

//Icon ic=new ImageIcon("Label.jpg");
//Icon ic1=new ImageIcon("fig.jpg");
//Icon ic2=new ImageIcon("na.jpg");
//Icon ic3=new ImageIcon("logo1.jpg");
 //Icon ic4=new ImageIcon("status1.jpg");
 //Icon ic5=new ImageIcon("ver.jpg");

 p=new JPanel();
p1=new JPanel();
l1=new JLabel(ic);
l2=new JLabel(ic1);
l3=new JLabel(ic2);
l4=new JLabel(ic3);
l5=new JLabel(ic4);
l6=new JLabel(ic5);

//l5.setBounds(5,200,30,10);

b.setBounds(50,100,150,100);

p.add(l1);

p1.add(b);
p1.add(b1);

b.addActionListener(new AL());
b1.addActionListener(new BL());

fc.setLayout(new FlowLayout(FlowLayout.LEFT));
l3.setBounds(10,300,200,300);
l4.setBounds(180,250,70,50);
ll.setBounds(250,400,500,150);
fc.add(p);
fc.add(l6);
fc.add(p1);

//fc.add(b1);
 fc.add(l);

fc.add(l2);
fc.add(l3);
fc.add(l4);
fc.add(l5);
fc.add(ll); 
f.pack();
fc.setBackground(Color.blue);
f.setSize(813,455);
f.setVisible(true);
f.setResizable(false);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 }

public class AL implements ActionListener
{
public void actionPerformed(ActionEvent ae)
{
 JFileChooser fc=new JFileChooser();
 fc.setFont(new Font("Comic Sans MS",Font.PLAIN,9));
  int choice=fc.showOpenDialog(f);
 if(choice==JFileChooser.APPROVE_OPTION)
 {
  try{
 String filename=fc.getSelectedFile().getAbsolutePath();

 fl=new File(filename);
 }
  catch(Exception e){}
  }
  }
 }

 public class BL implements ActionListener
{
public void actionPerformed(ActionEvent ae)
{

if(ae.getSource()==b1)
{
 l.setText("Please wait...");
 try
{
new shyam(fl);
l.setText("completed");
}
catch(Exception e){}
}
}
}

 public static void main(String arg[])
 {
  sk ob=new sk();
 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:18:17.820

问题在于您如何加载图像...

```
Icon ic=new ImageIcon("Label.jpg"); 
Icon ic1=new ImageIcon("fig.jpg"); 
Icon ic2=new ImageIcon("na.jpg"); 
Icon ic3=new ImageIcon("logo1.jpg"); 
Icon ic4=new ImageIcon("status1.jpg"); 
Icon ic5=new ImageIcon("ver.jpg"); 
p=new JPanel(); 
p1=new JPanel(); 
l1=new JLabel(ic); 
l2=new JLabel(ic1); 
l3=new JLabel(ic2); 
l4=new JLabel(ic3); 
l5=new JLabel(ic4); 
```

`ImageIcon(String)`假定`String`参数是文件名。在您的示例中，它相当于说`new ImageIcon("./Label.jpg")`，即请从我当前的执行位置加载图像，称为`Label.jpg`.

嵌入式资源不是文件，不能这样对待。

你应该使用

```
Icon ic=new ImageIcon(getClass().getResource("/Label.jpg")); 
```

实际上，您应该避免`ImageIcon`并直接使用[`ImageIO`API](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)。

```
Icon ic=new ImageIcon(ImageIO.read(getClass().getResource("/Label.jpg"))); 
```

`ImageIO`如果找不到/加载命名资源，至少会抛出异常。

# ios - 谷歌地图 iOS 赛车游戏碰撞检测？

> ID：16162121
> 
> 赞同：1
> 
> 时间：2013-04-23T06:06:46.017
> 
> 标签：ios, objective-c, google-maps-api-3, google-maps-sdk-ios

我正在为 iOS 制作一个驾驶游戏，其中一辆汽车（UIView）被放在谷歌地图 ios api 的顶部。我无法检测与地图上出现的汽车和灰色建筑物的碰撞。

我一直在尝试通过像素颜色来做到这一点，即检查汽车前面的像素颜色是否是建筑物屋顶的颜色（灰色）。无法直接访问 iPhone 的像素颜色，所以我使用谷歌地图截图方法来获取图像并从中获取像素颜色。问题是，我只能截取刚刚离开的屏幕。我正在使用 `mapImage = [GMSScreenshot screenshotOfMainScreen];`. 我也尝试过获取窗口和屏幕并调用`mapImage = [GMSScreenshot screenshotOfScreen:topWindow.screen];`两者都有相同的效果。

这个问题的解决方案是什么？你能想出一种更好的方法来处理这种情况下的碰撞吗？反向地理编码是否能够检测建筑物的顶部和街道？感谢您的任何帮助！

编辑：图片： ![](https://i.stack.imgur.com/l2nHw.png) 界面生成器：左边是主菜单，右边是游戏。左上角的 Ui 图像视图设置为当前屏幕截图，以供参考。我是这样知道的

![](https://i.stack.imgur.com/toyP3.png) Game Play，如您所见，它只显示上一个菜单。

我的 viewdidLoad 函数：除此之外，与获取图像无关。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    cameraPosition = CLLocationCoordinate2DMake(42.271291, -83.729918);
    moveDistance = .00055;

    cA = [UIColor colorWithRed:.937255 green:.921569 blue:.886275 alpha:1];

    camera = [GMSCameraPosition cameraWithLatitude:cameraPosition.latitude
                                         longitude:cameraPosition.longitude
                                              zoom:19
                                           bearing:0
                                      viewingAngle:0];

    mapView_ = [GMSMapView mapWithFrame:CGRectMake(0, 0, 480, 300) camera:camera];
    mapView_.myLocationEnabled = NO;

    [self.view addSubview:mapView_];

    car_ = [[Car alloc] initWithFrame:CGRectMake(240, 150, 13, 29) withImage:[UIImage imageNamed:@"carA-01.png"]];
    [self.view addSubview:car_];

    [self.view addSubview:controllerView];

    updateClock = [NSTimer scheduledTimerWithTimeInterval:(1/20)
                                                   target:self
                                                 selector:@selector(update)
                                                 userInfo:nil
                                                  repeats:YES];

    crashClock = [NSTimer scheduledTimerWithTimeInterval:1
                                                  target:self
                                                selector:@selector(checkCrash)
                                                userInfo:nil
                                                 repeats:YES];

    UIWindow *topWindow = [[UIApplication sharedApplication].windows objectAtIndex:0];

    mapImage = [GMSScreenshot screenshotOfScreen:topWindow.screen];

    //  mapImage = [GMSScreenshot screenshotOfMainScreen];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:21:29.743

您是否每帧（或某个时间间隔）都获得一个新的屏幕截图，例如从您的更新回调？

当`GMSMapView`您创建或更改它时，它不会立即呈现 - 它会在下次更新时呈现。因此，当您截取屏幕截图时，`viewDidLoad`您可能会得到添加地图视图时屏幕上的内容，即初始菜单。

# android - 如何在Android中旋转设备时旋转视频？

> ID：16162122
> 
> 赞同：1
> 
> 时间：2013-04-23T06:06:48.007
> 
> 标签：android, rotation, android-videoview

我正在做一个项目，我在 android 中显示一个实时流媒体视频。我正在视频视图中显示视频。我想为用户提供横向和纵向视频视图的功能。如果我旋转设备，视频的宽度应该更大。但目前如果我这样做，从网络重新加载视频需要花费大量时间。视频是否可以正常工作。我的意思是它应该正常播放，只是宽度增加。我能够在 iOS 中实现相同的目标。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:16:12.837

你可以试试这个

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        questionVideo.setDimensions(displayHeight, displayWidth);
        questionVideo.getHolder().setFixedSize(displayHeight, displayWidth);

    } else {
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN, WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

        questionVideo.setDimensions(displayWidth, smallHeight);
        questionVideo.getHolder().setFixedSize(displayWidth, smallHeight);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:25:15.953

试试这个....

```
android:configChanges="orientation" 
```

在 AndroidManifest.xml 中的 Activity 中。这样您的活动就不会自动重新启动。有关更多信息，请参阅[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#config)。

# cakephp - CakePHP 2 请帮助模型协会

> ID：16162123
> 
> 赞同：0
> 
> 时间：2013-04-23T06:06:49.583
> 
> 标签：cakephp, cakephp-2.1

假设我有 3 个模型。

1.  牙医（角色='D' 的用户）
2.  申请人（有关每个用户的更多详细信息，例如地址、电话、兴趣位置等）
3.  职位（在申请表中我只存储 position_id，这是描述的地方）

    牙医类扩展 AppModel { public $hasOne = 'Applicant'; }

    类申请人扩展 AppModel { public $belongsTo = array('Dentists', 'Position'); }

    类位置扩展 AppModel { }

当我`$this->Dentist->find('all');`在我的 DentistsController 中使用时，我在牙医的视图中遇到了问题，因为 SQL 就像

```
select *
from dentists left outer join applicants
  on dentists.id = applicants.dentist_id 
```

不再像左外连接位置...

但是如果我`$this->Applicant->find('all');`在我的申请人控制器中使用，我得到了左外连接位置......

如何设置模型关联以从我的 DentistsController 获取连接语句到表“位置”。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:39:57.350

```
 Your models should have following association
Positions model:

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Applicant' => array(
            'className' => 'Applicant',
            'foreignKey' => 'position_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),

    );

Application model:

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Dentist' => array(
            'className' => 'Dentist',
            'foreignKey' => 'dentist_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),

    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Dentist' => array(
            'className' => 'Dentist',
            'foreignKey' => 'application_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),

    );

Dentist model:

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'Applicant' => array(
            'className' => 'Applicant',
            'foreignKey' => 'applicant_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),

    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Applicant' => array(
            'className' => 'Applicant',
            'foreignKey' => 'dentist_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),

    ); 
```

# java - org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure：找不到 MessageBodyWriter 类型的响应对象：媒体类型：application/xml

> ID：16162128
> 
> 赞同：4
> 
> 时间：2013-04-23T06:07:03.817
> 
> 标签：java, resteasy

```
@POST
@Path("/getmethod")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_XML)
Response getMethod(SomeVO someVO); 
```

在我的*** .ear 中，我可以看到 resteasy-jaxb-provider-2.2.0.GA.jar 和 resteasy-jaxrs-2.2.1.GA.jar 都存在，但是在尝试访问此方法时，我遇到了这个错误：

> [org.jboss.resteasy.core.SynchronousDispatcher] (http-/0.0.0.0:8080-1) 执行 POST 失败 /**/getmethod：org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure：找不到响应对象的 MessageBodyWriter 类型：****媒体类型的VO：org.jboss.resteasy.core.ServerResponse.writeTo(ServerResponse.java:216) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final的应用程序/xml -redhat-1] 在***

 ***org.jboss.resteasy.core.SynchronousDispatcher.writeJaxrsResponse(SynchronousDispatcher.java:585)

> [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1] at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:506) [resteasy-jaxrs -2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1] 在 org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.3 .Final-redhat-1.jar:2.3.3.Final-redhat-1] 在 org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.3 .Final-redhat-1.jar:2.3.3.Final-redhat-1] 在 org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.3 .Final-redhat-1.jar:2.3.3.Final-redhat-1] 在 org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1] 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet -api_3.0_spec-1.0.1.Final-redhat-1.jar:1.0.1.Final-redhat-1] 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0 .16.Final-redhat-1.jar:] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final-redhat-1.jar:] at org. apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.16.Final-redhat-1.jar:] at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161 ) [jbossweb-7.0.16.Final-redhat-1.jar:] 在 org.jboss.as.web.security.SecurityContextAssociationValve。在 org.apache.catalina.core.StandardHostValve.invoke( StandardHostValve.java:155) [jbossweb-7.0.16.Final-redhat-1.jar:] at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.16.Final- redhat-1.jar:] at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.16.Final-redhat-1.jar:] at org.apache.catalina.connector .CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.16.Final-redhat-1.jar:] at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0 .16.Final-redhat-1.jar:] 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679) [jbossweb-7.0.16.Final-redhat-1.jar:] at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931) [jbossweb-7.0.16.Final- redhat-1.jar:] 在 java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_09]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T09:55:40.013

我没有在 VO 类属性中添加注释。

样本：

```
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "user")
public class TestVo {

    String order;
    String serial;
    int number;

    @XmlElement
    public String getorder() {
        return order;
    }

    public void setorder(String order) {
        this.order = order;
    }

    @XmlElement
    public String getserial() {
        return serial;
    }

    public void setserial(String serial) {
        this.serial = serial;
    }

    @XmlAttribute
    public int getnumber() {
        return number;
    }

    public void setnumber(int number) {
        this.number = number;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T11:09:50.590

您可以通过参考以下链接解决它。他建议添加 org.jboss.resteasy resteasy-jaxb-provider 2.2.0.GA jar

[http://www.mkyong.com/webservices/jax-rs/resteasy-could-not-find-messagebodywriter-for-response-object-of-typexx-of-media-type-applicationxml/](http://www.mkyong.com/webservices/jax-rs/resteasy-could-not-find-messagebodywriter-for-response-object-of-typexx-of-media-type-applicationxml/)***

# ios - 以编程方式创建视图 VS。笔尖

> ID：16162133
> 
> 赞同：4
> 
> 时间：2013-04-23T06:07:09.960
> 
> 标签：ios, uiview, nib

我很想知道是否有人有经验将 iPhone 应用程序的加载时间性能与 NIB 中布局的视图与完全以编程方式布局的视图进行比较（这里有一个类似的[问题](https://stackoverflow.com/questions/1112349/performance-penalty-for-using-nib-files)）。

与在 NIB 中布置的视图相比，完全以编程方式布置的视图真的有任何优势吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T06:15:16.070

根据 Apple 的说法，XIB 文件的加载时间比以编程方式构建 UI 的时间长。在 WWDC 讲座中看到了这一点。

如果性能是最重要的，那么在代码中而不是在 IB 中构建您的 UI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T06:29:58.870

在代码上执行它有一些优点：

1.  最好和几个人一起工作。提交到存储库时更容易解决冲突。
2.  您依赖于您在代码中看到的内容，而不是隐藏在 nib 文件中的内容（您在不知情的情况下选择了一些讨厌的选项）。你拥有：所见即所得。

带笔尖：

1.  我会说它的开发速度更快。
2.  代码并没有被关于你的界面的每一个细节都“污染”。
3.  对于没有太多经验的人来说，我也会留下来更容易。

关于性能，您实际上可以检查[this](http://www.raywenderlich.com/31166/25-ios-app-performance-tips-tricks#smallxibs)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:35:31.753

当我开始学习 iOS 编程时，我是在 xib 文件中构建 UI。但是当我开发了一些项目时，我开始只是编写代码来实现我的 UI。

以编程方式构建 UI 有一些好处：

首先，通过编写代码，您可以清楚地记住视图层次结构，并且视图层次结构对于有效实现 UI 非常重要。

其次，如果您的 UI 很复杂，例如带有一些动画或变换，您将从编写 UI 中受益匪浅。甚至有时候你可能不会使用 UIView 来构建 UI，你可能会使用 CALayer 来完成一些 xib 文件无法构建的效果。

此外，当您习惯以编程方式构建 UI 时，您会喜欢上它，因为您可以只在 .m 文件中编写代码，而无需担心 xib 文件。

但是，如果您只是 iOS 编程的初学者，那么从 xib 文件开始就可以了。

（苹果现在提供StoryBoard，我没学过，你可以学学看看有没有新东西。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T07:01:47.533

IMO 两者的混合将是正确的选择。使用界面构建器来定义基本布局（即不会随时间发生太大变化的 xib）和视图的默认选项，其余的可以通过编程方式完成（特定的调整和效果）。这应该在一定程度上解决源代码控制和性能问题。

尽管一旦我们开始以编程方式创建视图，我们每次都继续这样做，却没有意识到在 Interface Builder 中可以用更少的努力来完成同样的事情。毕竟，如果它是我们正在构建的 GUI，最好有一个视觉参考。

# objective-c - 如何正确使用 UIColor 作为属性

> ID：16162142
> 
> 赞同：2
> 
> 时间：2013-04-23T06:07:48.210
> 
> 标签：objective-c, properties, uicolor

为什么我的颜色属性总是`null`？

```
@interface StreamingMediaControlButton : UIButton

@property (strong, nonatomic) UIColor *color;

@end

@implementation StreamingMediaControlButton

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        _color = [UIColor whiteColor];
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    NSLog(@"color: %@", self.color);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, self.color.CGColor);
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:20:12.750

您之前的评论说您正在使用界面构建器，这意味着在按钮上调用了不同的 init 方法。你需要实现：

```
- (id)initWithCoder:(NSCoder *)decoder
{
    if ((self = [super initWithCoder:decoder])) {
        // setup code
    }

    return self;
} 
```

通常，实现两者`initWithCoder:`并`initWithFrame:`让它们都调用`commonInit`共享设置代码所在的方法是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:56:10.663

尝试使用颜色 RGB 值，而不是直接定义更有效的颜色。

# flash - 在 https 中加载 swf 时出现白屏

> ID：16162144
> 
> 赞同：0
> 
> 时间：2013-04-23T06:07:51.993
> 
> 标签：flash, apache-flex, ssl, flash-builder

在 https 中加载时，我的 swf 会闪烁一秒钟，然后变成一个空白屏幕。做 tihs 时似乎正在加载 flash。当用户手动按下浏览器刷新按钮时，它最终会显示出来。这是什么原因造成的？

要重现此问题，请在干净的浏览器环境中打开[https://www.vantagefx.com/webtrader](https://www.vantagefx.com/webtrader)以避免浏览器缓存（例如：Google Chrome 隐身模式）

当通过 http 加载相同的 swf 时，问题不会发生，例如：[http://www.enfinium.com.au/webtrader](http://www.enfinium.com.au/webtrader)。（这些是相同的瑞士法郎，只是不同的品牌）

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:18:15.963

[https://www.vantagefx.com/webtrader](https://www.vantagefx.com/webtrader)抛出错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at mx.managers::SystemManager/http://www.adobe.com/2006/flex/mx/internal::rawChildren_removeChild()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2143]
at mx.managers::SystemChildrenList/removeChild()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemChildrenList.as:163]
at mx.managers::SystemManager/preloader_preloaderDoneHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2645]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.preloaders::Preloader/displayClassCompleteHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\preloaders\Preloader.as:582]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at libs.Preloader::XPreloader/endClose()[C:\Users\GerryT\Documents\git_repositories\WebTrader\src\libs\Preloader\XPreloader.as:237]
at libs.Preloader::XPreloader/closeEffectTimer_timer()[C:\Users\GerryT\Documents\git_repositories\WebTrader\src\libs\Preloader\XPreloader.as:251]
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

# ios - 在 ios 中使用 AVAudioSession 时出错

> ID：16162145
> 
> 赞同：2
> 
> 时间：2013-04-23T06:07:52.787
> 
> 标签：ios, objective-c, xcode

我使用了这些代码

```
- (void)viewDidLoad
{
[[AVAudioSession sharedInstance] setDelegate: self];
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil];
AudioSessionAddPropertyListener (
                                 kAudioSessionProperty_AudioRouteChange,
                                 audioRouteChangeListenerCallback,
                                 self
                                 );
NSError *activationError = nil;
[[AVAudioSession sharedInstance] setActive: YES error: &activationError];
} 
```

和

```
void audioRouteChangeListenerCallback (void *inUserData, AudioSessionPropertyID inPropertyID, UInt32 inPropertyValueSize, const void *inPropertyValue ) {
    // ensure that this callback was invoked for a route change
    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) return;

    {
        // Determines the reason for the route change, to ensure that it is not
        //      because of a category change.
        CFDictionaryRef routeChangeDictionary = (CFDictionaryRef)inPropertyValue;

        CFNumberRef routeChangeReasonRef = (CFNumberRef)CFDictionaryGetValue (routeChangeDictionary, CFSTR (kAudioSession_AudioRouteChangeKey_Reason) );
        SInt32 routeChangeReason;
        CFNumberGetValue (routeChangeReasonRef, kCFNumberSInt32Type, &routeChangeReason);

        if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

            //Handle Headset Unplugged
        } else if (routeChangeReason == kAudioSessionRouteChangeReason_NewDeviceAvailable) {
            //Handle Headset plugged in
        }

    }
} 
```

检测我的项目中是否插入或拔出音频插孔，但最终出现此错误

```
Undefined symbols for architecture armv7:
  "_AVAudioSessionCategoryAmbient", referenced from:
      -[ViewController viewDidLoad] in ViewController.o
  "_OBJC_CLASS_$_AVAudioSession", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

那么其中的问题是什么？我是 ios 的初学者，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T06:13:09.267

您错过了添加`AudioToolBox.Frameworks`到项目文件中。仔细检查您的项目文件设置..

**更新** 实际上错过了 AVFoundation.Frameworks 在项目的构建阶段添加。

**更新 2**
尾随`s`已被删除。现在是`AudioToolBox.Framework`和`AVFoundation.Framework`

# android - OpenCV for Android - 使用 SURF 描述符训练 SVM

> ID：16162150
> 
> 赞同：4
> 
> 时间：2013-04-23T06:08:09.867
> 
> 标签：android, opencv, svm, surf

在为 Android 应用程序训练 SVM 时，我需要一些帮助。我有一组不同类别（12 个类别）的图像，并从中获取了所有描述符。我设法为每个图像获得了相同数量的描述符。我需要的是使用这些描述符为我的 android 应用程序训练一个 SVM。我不确定是否应该在 Android 模拟器中训练它或编写一个 C++ 程序来训练 SVM，然后将其加载到我的应用程序中（如果我使用 OpenCV 的 Windows 库来训练 SVM 然后保存它，将我用于 Android 的 lib 识别保存的 SVM 文件？）。我想我不应该在模拟器中用这么大的数据集训练 SVM。我已经在 Weka 的 SMO 上测试了我的描述符数据集（[http://www.cs.waikato.ac.nz/ml/weka/](http://www.cs.waikato.ac.nz/ml/weka/)) 并得到了很好的结果，但我需要实现（或使用 openCV 的）SVM 并将其保存为将来的分类训练。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:34:19.977

这是在 OpenCV4Android 中训练 SVM 的示例。 `trainData`是 a `MatOfFloat`，其形式将取决于您用于获取特征向量的方法。为此`trainData`，我曾经`Core.hconcat()`将数据集的每个元素的特征向量连接成一个单独的`Mat`.

```
Mat responses = new Mat(1, sizeOfDataset, CvType.CV_32F);
responses.put(0, 0, labelArray); // labelArray is a float[] of labels for the data

CvSVM svm = new CvSVM();
CvSVMParams params = new CvSVMParams();
params.set_svm_type(CvSVM.C_SVC);
params.set_kernel_type(CvSVM.LINEAR);
params.set_term_crit(new TermCriteria(TermCriteria.EPS, 100, 1e-6)); // use TermCriteria.COUNT for speed

svm.train_auto(trainData, responses, new Mat(), new Mat(), params); 
```

我相当确定 OpenCV 使用相同的格式在 Android 和 C++ 接口中保存 SVM。当然，您始终可以在 Android 中训练 SVM，并将 XML 文件保存到模拟器的 SD 卡中，使用类似

```
File datasetFile = new File(Environment.getExternalStorageDirectory(), "dataset.xml");
svm.save(datasetFile.getAbsolutePath()); 
```

然后将其从 SD 卡中拉出并将其存储在应用程序的`/res/raw`文件夹中。

# php - SQL 高级查询

> ID：16162157
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:08:35.973
> 
> 标签：php, mysql, sql

我正在尝试更新（如果存在）或插入（如果不存在）但由于某种原因此查询不起作用

```
DECLARE @serverID varchar(60)
SET @serverID='(SELECT `c_server` FROM `admin_settings` WHERE `member_id`='%1')'
IF EXISTS (SELECT `id` FROM `s_advanced_info` WHERE `s_id` = @serverID)
UPDATE
    `s_advanced_info`
SET
    `s_hostname`='%2',
    `s_password`='%3',
    `s_admin_password`='%4',
    `s_motd`='%5',
    `s_sigcheck`='%6',
    `s_maxplayers`='%7',
    `s_kickduplicate`='%8',
    `s_sidechat`='%9',
    `s_von`='%10',
    `s_vonquality`='%11',
    `s_datetime_type`='%12',
    `s_static_date`='%13',
    `s_static_time`='%14'
WHERE
    `s_id` = @serverID
ELSE
INSERT INTO
    `s_advanced_info`
VALUES
    ('',@serverID,'%2','%3','%4','%5','%6','%7','%8','%9','%10',
    '%11','%12','%13','%14') 
```

当我在 mysql 控制台中尝试它时，它说错误在这里：

DECLARE @serverID varchar(60) SET @serverID = '(SELECT `c_server`FROM `admin_settings`WHERE `member_id`= '%1')'

错误是什么意思以及如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:43:41.120

试试这个： DECLARE @serverID varchar(60) SET @serverID = (SELECT c_server FROM admin_settings WHERE member_id = '%1')

因为您似乎将 serverId 变量设置为恰好是 sql 查询的字符串。这真的是你想做的吗？

# highstock - 为什么我不能显示少于 6 天？

> ID：16162160
> 
> 赞同：0
> 
> 时间：2013-04-23T06:08:49.800
> 
> 标签：highstock

我正在尝试使用 HighStock 显示一些数据。除了我不能显示少于 6 天之外，一切都很好。正如您在下面看到的，我选择了 3 天作为范围，但图表仍然显示 6 列。此外，如果我尝试选择 4 月 18 日之后的任何一天作为“从”值，则该值将被忽略并考虑 2013 年 4 月 18 日。最后，如果我尝试捏导航器，我也会有同样的行为，我不能显示少于 6 天。

我查看了 HighStock API Reference 但我找不到任何关于 6 是默认显示的天数/值这一事实的参考。

![在此处输入图像描述](https://i.stack.imgur.com/jrVD2.png)

下面我报告我的js：

```
$('#container').highcharts('StockChart', {
        chart: {
        backgroundColor: '#E5E7EB'
    },
      rangeSelector: {
        buttons: [{
            type: 'day',
            count: 3,
          text: '3d'
        }, {
            type: 'week',
            count: 1,
            text: '1w'
        }, {
            type: 'month',
            count: 1,
            text: '1m'
        }, {
            type: 'month',
                count: 3,
                text: '3m'
            }, {
                type: 'month',
                count: 6,
                text: '6m'
            }, {
                type: 'ytd',
            count: 1,
                text: 'Ytd'
        },{
                type: 'year',
            count: 1,
                text: '1y'
        }, {
          type: 'all',
            text: 'All'
        }],
        selected: 1
      },

      xAxis: {
    type: 'datetime',
    minTickInterval: 24 * 3600 * 1000 // daily
    },

    yAxis: {
        offset: 8,
        title: {
            text: yAxisTitle
        },
        labels: {
        align:'right'
    }
    },

      plotOptions: {
            column: {
        stacking: 'normal',
      dataLabels: {
        enabled: false,
        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
      }
    }
      },
      series: seriesOptions
    }); 
```

我错过了什么吗？如何显示少于 6 天/值？

感谢，并有一个愉快的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:23:04.487

你应该设置 minRange [http://api.highcharts.com/highstock#xAxis.minRange](http://api.highcharts.com/highstock#xAxis.minRange)

在您的示例中： 3 * 24 * 3600 * 1000 （这意味着 3 天）

# c - 在 Unix 下无法在 C 中工作

> ID：16162161
> 
> 赞同：0
> 
> 时间：2013-04-23T06:08:51.470
> 
> 标签：c

我试图在 Unix 下使用`gets`函数在 C 语言中输入一个字符串，但它不起作用！

它显示以下警告：

```
warning: the `gets' function is dangerous and should not be used. 
```

如果我运行程序，我没有得到输入字段。代码是

```
#include<stdio.h>

int main()
{
 int i;
 char ch,newfile[10],content[100];
 FILE *create;
 printf("Enter New File Name to Create : ");
 scanf("%s",newfile);
 create=fopen(newfile,"w+");
 printf("\nEnter Contents for %s : ",newfile);
 //fgets(content,sizeof content,stdin);
 //scanf("%s",&content);
 //gets(content);
 for(i=0;i<100;i++)
 {
   if(content[i]!='\0')
   {
    ch=content[i];
    putc(ch,create);
   }
 else
   break;
 }
 printf("\nYour File Is Created\n");

 return 0;
} 
```

有人请帮我解决这个问题。我已经评论了我尝试过的所有可能性。谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:14:36.820

raw`scanf("%s")`与 gets() 一样危险（两者都暴露于缓冲区溢出）。您应该改用`fgets()`它，这会限制字符串的长度。

get() 和 fgets() 之间的另一个区别是后者将 放入`'\n'`字符串中，虽然乍一看很烦人，但可以让您查看该行是否被截断。你应该做的是：

*   使用 fgets()
*   寻求`'\n'`
*   如果存在，则该线足够小以适合缓冲区。只需将 a 替换为`'\n'`a`'\0'`即可。
*   如果不存在，则用户键入的行长于缓冲区。根据情况，您对此是否满意。但在这两种情况下，您都必须在下一次输入之前完成对行的读取（要么进入新缓冲区，要么简单地通过`getchar()`循环调用，直到获得`'\n'`or ）。`EOF`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:17:33.390

第一个 scanf 不使用行尾字符 - 您可以通过输入“foo bar”作为文件名来研究这一点。

下一行应格式化为`scanf("\n%99s", content);` - 注意前面的 '\n' 以读取换行符，并注意 99 以防止缓冲区溢出。不幸的是，如果将“foo bar”类型作为文件名，这种方法不足以产生预期的结果。违反直觉的“bar”被读取为内容。

最后，`gets`遭受与以前相同的问题。（+主要问题，它没有防止缓冲区溢出。）

# java - 预加载连接池时出错

> ID：16162165
> 
> 赞同：0
> 
> 时间：2013-04-23T06:09:08.143
> 
> 标签：java, mysql, tomcat7, connection-pooling, apache-commons-dbcp

我正在使用以下环境：

*   jdk1.6.0_21
*   apache-tomcat-7.0.16
*   commons-dbcp.jar（版本：1.2.2）
*   commons-pool.jar（版本：1.3）
*   MySql 服务器 5.1

尝试连接数据库时一直面临以下异常：

```
Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Error preloading the connection pool 
```

请帮忙。

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2014-06-03T05:23:53.687

正如@Luiggi Mendoza 在上述评论中所建议的那样：

将所有 DB 属性（如下所述）值更改为**10**：

*   初始大小
*   DbMaxActive
*   DbMaxIdle
*   DbMaxWait

# sitecore - Sitecore Stimulsoft 报表设计器不支持添加过滤器变量

> ID：16162168
> 
> 赞同：1
> 
> 时间：2013-04-23T06:09:23.170
> 
> 标签：sitecore, stimulsoft

我正在使用 Stimulsoft 报告设计器在 Sitecore 中开发一些报告，并且我需要在此报告中使用过滤器[http://web.stimulsoft.com/default.aspxreportname=ParametersSelectingCountry](http://web.stimulsoft.com/default.aspxreportname=ParametersSelectingCountry)

我查看了有关创建这样的过滤器的视频教程。 [http://www.stimulsoft.com/en/videos?id=69&tags=web,parameters](http://www.stimulsoft.com/en/videos?id=69&tags=web,parameters)

但是，当我在 Sitecore 中使用报表设计器创建新变量时，它不允许我像视频教程中那样选择“来自用户的请求”。此外，与视频教程相比，创建新的变量窗口还有许多缺失的功能。我是否在使用旧版的 Sitecore 报表设计器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T21:20:02.000

我不知道这是否会回答您的问题，但就是这样。

我发现 Sitecore（甚至 7）附带的网络报表设计器并不是很好，而且很多事情似乎都无法正常工作。

一种方法是获取报表包并尽可能使用独立的报表设计器，或者手动编辑报表定义文件。

# c++ - 如何在联合中使用指针

> ID：16162176
> 
> 赞同：2
> 
> 时间：2013-04-23T06:09:44.390
> 
> 标签：c++, c

我想将一维数组指针和二维数组指针放在一个联合中，这样我就可以通过任何一种方式访问​​数据。在下面的程序中，我希望看到值`9`是通过两种方式打印出来的。

```
#include <iostream>
class A {
public:
    union {
        int** array2D;
        int*  array1D;
    };
    A() {
        array2D = new int*[1];
        array2D[0] = new int[1];
    }
};

int main() {
    A a;
    a.array2D[0][0] = 9;
    cout << a.array2D[0][0] << endl;
    cout << a.array1D[0]    << endl;
    cout << a.array2D << endl;
    cout << a.array1D << endl;
} 
```

实际输出：

```
9
146989080
0x8c2e008 //Pointer address of array2D
0x8c2e008 //Pointer address of array1D 
```

地址是相同的，根据定义，多维数组的存储方式与一维数组的存储方式相同。我想知道为什么两者`cout`打印出不同的结果？我错过了什么？

编辑：感谢下面的答案，我可以看到我错过了什么。从 array1D 访问数据的修复方法是：

`cout << *( (int*) a.array1D[0]) << endl;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:16:22.177

首先，您正在调用*undefined-behavior*。

该标准规定，您只能从您上次编写的工会成员中阅读 t，因此不允许阅读`array2D`和`array1D`互换（即使它在实践中经常有效，但**不**推荐）。

第二; 使用`array1D`您正在尝试取消引用并读取当前已分配给 a 的地址处的值（可能是因为 UB ）*，*该*值*`new int*[1]`位于`array2D[0][0]`路径的下一层。

* * *

要访问您期望的值，`a.array1D`您将需要以下内容（不推荐）

```
**reinterpret_cast<int**> (a.array1D); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:13:22.953

当您使用 分配多维数组`new`时，您实际上是在分配多个数组。第一个是指向数组的指针数组。因此，您`a.array1D[0]`实际上包含指向数组指针的指针，并且您正在打印指针的值。

我很确定您是否会执行以下操作：

```
cout << (int*)a.array1D[0] << endl; 
```

你会得到相同的：

```
cout << a.array2D[0] << endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:17:00.110

当您打印出 is 的值时，`a.array2D`它指向数组的开头。由于您同时使用联合`array1D`并`array2D`占用相同的空间并将包含相同的值。

当您访问指针值时，`a.array1D[0]`您是在告诉它获取`array1D`. 因为您使用的是this 也指向恰好是指针`union`的第一个元素。`array2D`

# asp.net - ExecuteReader 需要一个打开且可用的连接。连接的当前状态是正在连接

> ID：16162177
> 
> 赞同：0
> 
> 时间：2013-04-23T06:09:50.053
> 
> 标签：asp.net, exception, odbc, idatareader

我有一个 ASP.NET 网页。它利用了 4 `BackgroundWorkers`。每个 bw 从数据库中检索一些数据。

连接数据库的代码是：

```
if (dbConnection.State == ConnectionState.Closed)
{
    dbConnection.Open();
}    
DataTable dt = new DataTable(); 
OdbcCommand cmd = new OdbcCommand(sqlQuery, dbConnection);
cmd.CommandTimeout = 0;
IDataReader dataReader = cmd.ExecuteReader();
dt.Load(dataReader);
dataReader.Close();
dataReader.Dispose(); 
```

在构造函数中，`this.dbConnection = new OdbcConnection(networkdetails);`

每个 bw 都使用上面的代码片段来查询数据库并检索值。代码有时工作得很好。其他时候它会抛出上面给出的异常。

关于我可能做错了什么的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:41:26.980

尝试处理异常，然后关闭连接。

为此，在“Try”块中编写代码，在“Catch”块中捕获异常并在“Finally”块中关闭连接。

```
try{
      // Your code
}
catch
{
      // Catch exception
}
Finally
{
      // Close the connection
      dbConnection.Close();
} 
```

# xampp - xampp 上的虚拟主机，可从外部设备访问

> ID：16162182
> 
> 赞同：0
> 
> 时间：2013-04-23T06:10:00.233
> 
> 标签：xampp, virtual-hosts

我在我的 WIN7 笔记本电脑上运行 XAMPP 来开发网站。现在我使用虚拟主机和修改后的主机文件，所以我可以通过这个 URL 访问我的网站“www.thisshouldbemysite.nl”。但它将从我的 XAMPP 服务器加载。

对我本地来说，这工作正常。我可以做我想做的事。但我也想从外部设备（例如智能手机或平板电脑）访问此服务器，以便我可以看到该站点在其他设备上的呈现方式。但是在平板浏览器中输入我的 XAMPP PC 的 IP 地址会将我带到该`C:\xampp\htdocs`目录，我无法访问该`C:\xampp\htdocs\thisshouldbemysite.nl`目录。

有谁知道我如何配置我的服务器以使其同时工作（本地和远程）。远程应该在同一个本地网络中！

在这里你可以找到我当前的设置。

主持人：

```
127.0.0.1 www.thisshouldbemysite.nl 
```

httpd-vhosts.conf：

```
<VirtualHost *:80>
  DocumentRoot C:\xampp\htdocs
  ServerName localhost
</VirtualHost>

<VirtualHost *:80>
  DocumentRoot C:\xampp\htdocs\thisshouldbemysite.nl
  ServerName www.thisshouldbemysite.nl
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-31T22:57:12.160

我想介绍一些内容来为您提供全面的了解，也许如果您更好地了解流程的每个部分，那么您可以确定您的问题所在，从而找到答案。

我们需要了解的第一件事是，当您输入域名时，您的浏览器如何知道该去哪里。您的浏览器将检查您的本地主机文件，然后是您的本地 DNS 缓存，然后向 DNS 服务器发出请求。DNS 服务器要么由您的 ISP / DHCP 自动设置，要么在您的 Internet 连接设置中手动设置。因此，向域名发出请求时，您的浏览器/操作系统将按该顺序检查这些位置以查找匹配条目。如果没有找到条目，则域名将无法解析。

DNS 服务器可以有不同种类的条目。它可以告诉您域名托管在哪里，它可以告诉您子域在哪里，它可以将域名指向另一个 DNS 服务器……它是一个灵活的多用途点，域名可以指向任何地方。此外，根据为域名设置的 DNS 条目类型，您的浏览器将自动知道它是否需要向另一个 DNS 服务器询问域名指向的位置，或者它是否是它正在寻找的最终结果。不正确地设置 DNS 服务器可能会导致用户陷入 DNS 循环 - 其中一个 DNS 指向另一个 DNS，而第二个 DNS 指向第一个 DNS。这些事情很容易弄清楚。

Hosts 文件基本上就像一个本地的、手动设置的类似 DNS 的系统。它允许您说“any.domain”位于“any-ip-address”。通过这种方式，您可以在本地覆盖或忽略其他 DNS 资源。这对本地内容很有用，但是如果您想通过 Internet 或通过许多设备访问内容，我强烈建议您使用 DDNS 服务，我将在下面进行介绍。

---Apache VHost 文件---

在 vhosts 文件中，我设置了一个默认 vhost。这样，如果我输入我的 IP 或没有明确定义虚拟主机的域名，我仍然会从我的 Web 服务器获得某种响应。这只是我的偏好，但完全没有必要。设置默认值后，我明确定义要服务的域/子域。

名称虚拟主机 *:80

##############localhost

ServerAdmin webmaster@localhost DocumentRoot "D:/xampp/htdocs" ServerName localhost

```
<Directory "D:/xampp/htdocs">
    AllowOverride All
    Order Allow,Deny
    Allow from all
    Require all granted
</Directory> 
```

########othersite.local.whatever

ServerAdmin webmaster@localhost DocumentRoot "D:/xampp/othersite.local.whatever" ServerName othersite.local.whatever AllowOverride All Order Allow, Deny Allow from all 要求全部授予

保存 VHost 文件后，重新启动 apache。如果 apache 启动然后自动停止运行，那么您的 apache 配置/Vhosts 文件中可能有错误，请仔细检查您的工作，在保存您所做的每个更改后尝试启动 apache 直到它工作。

---Windows 主机文件---

除非您有 DNS 服务器设置，否则您将需要修改 Windows 主机文件，以便告诉您的机器 othersite.local.whatever 指向您的 apache 服务器。该文件的作用是在本地将域名指向一个 IP 地址。它不会影响其他计算机，仅适用于同时运行您的服务器的这台计算机。

主机文件位于 C:/windows/system32/drivers/etc/hosts

根据您的 Windows 权限，您可能需要先将 hosts 文件复制到桌面，使用记事本或收藏夹文本编辑器打开它，进行修改，保存并将其复制回原来的位置。在新行上，添加一个新条目：

127.0.0.1 othersite.local.whatever

将主机文件保存回 C:/windows/system32/drivers/etc/ 后，您现在应该能够毫无问题地访问服务器计算机上的 othersite.local.whatever。如果您有其他本地 Windows 计算机，您可以修改它们的主机文件以指向服务器的 IP 地址（通常类似于 192.168.1.xx），以便这些计算机也可以访问位于 othersite.local.whatever 的虚拟主机。

192.168.1.?? othersite.local.whatever

---通过其他方式解决您的问题---

根据您的需求，您可以做几件事。

1）修改所有windows电脑上的vhost文件，研究一下如何在其他设备上做。如果所有设备都认为 othersite.local.whatever 指向您的服务器，则您的服务器应该使用正确的虚拟主机页面进行响应。这就是它在本地网络或 WAN / Internet 上的天气工作方式。

2) 设置本地 DNS 服务器，将您的所有设备指向您的 DNS，并在您的 DNS 中添加一个条目以将域指向您的服务器。如果您以前从未做过，这是一项复杂的任务，但您可能会发现它很有用。

3) 设置动态 DNS (DDNS)。这个有点复杂，但实际上很容易做到。它真的可以帮助你打开你的选择。

以下是它的工作原理 - 您的家庭互联网连接的 WAN IP 可能会不时更改 - 由您的 ISP 的 DHCP 服务分配的动态 IP。如果您关闭互联网调制解调器然后再次打开，您的 IP 可能会发生变化。这不好，因为如果您有一个外部 DNS 或以某种方式指向您的 IP 的链接，并且您的 IP 更改是因为您的电源关闭然后打开或 DHCP 使用新 IP 更新了您的 IP 租约，那么您将被切断从你的服务器。所以为了解决这个问题，我们有一个叫做动态 DNS 的东西。你注册了一个 DDNS 服务（其中许多是完全免费的），你在你的 PC 上运行了一个小的 DDNS 程序。DDNS 程序每隔几分钟检查一次您的 IP 地址，并使用您的 IP 更新 DDNS 服务器。如果您的 IP 发生变化，

要完成所有设置，您需要设置本地 Internet 连接以将端口 80 上的传入连接（您的网站可能在 80 上运行，除非您更改它）转发到您的 Web 服务器。将服务器的本地 IP 地址设置为静态地址（因此它不会在您的本地网络上更改，您知道类似 192.168.1.100 或任何适合您需要的地址）并修改您的互联网网关/调制解调器/路由器以转发端口 80 上的所有内容到您的服务器 PC。

我喜欢使用名为 No-IP ( [http://no-ip.com/](http://no-ip.com/) ) 的免费 DDNS 服务。它是免费、简单和可靠的。与他们一起创建一个帐户，选择一个子域 - 您可以使用 something.bounceme.net 或其他预定的免费 DDNS 名称。选择名称后，在您的服务器 PC 上安装 DDNS / No-IP 程序。现在，something.bounceme.net 将始终转到您的家庭 IP。如果您正确设置端口转发，端口 80 上的任何内容都会自动转到您的网络服务器。

现在最后一步是获取一个普通域名来指向您的家庭 IP，而不是 something.bounceme.net。你可以支付 No-IP 来做一些花哨的事情，或者你可以免费的方式来做，这就是我将在这里解释的方式。

上次我使用 Godaddy 作为域名注册商，一切都发生了很大变化，您可能需要致电 Godaddy 或您的域名注册商，询问您可以在哪里/如何使用他们的服务进行此操作。

首先，您需要一个域名。假设您拥有 homesite.com，还假设您希望laptop.homesite.com 指向您的家庭网络服务器。

对于域 homesite.com，添加 CNAME 类型的 DNS 记录，其键为“laptop”，您的 DDNS 名称值为“something.bounceme.net”。这将使laptop.homesite.com 将解析为您的家庭IP 地址。说得通？现在，当您键入laptop.homesite.com 时，DNS 将告诉它检查something.bounceme.net，这将解析为您的家庭IP。

CNAME 条目有一些限制。您不能只将“homesite.com”转发到您的 DDNS IP。您基本上必须使用子域条目，例如笔记本电脑或家庭或类似的东西。但是，您可以做的一件事是使用“子域”条目 WWW，以便 www.homesite.com 指向您的家庭 IP。如果您使用 Godaddy，您将获得一个带有您的域名的免费受限托管帐户，该帐户上会显示 Godaddy 广告。您可以为“homesite.com”设置此帐户并在其中放置一些重定向代码以将用户发送到“www.homesite.com”。这样，人们键入 homesite.com 并自动发送到 www.homesite.com。

我希望这一切都是有道理的。

所以让我们回顾一下 - 设置您的服务器静态 IP，设置端口转发，使端口 80 指向您服务器的本地 IP，设置 DDNS（如[http://www.no-ip.com](http://www.no-ip.com)）并安装他们的 DDNS 程序，设置 CNAME与您的域名注册商联系，以便 www.yoursite.com 指向您的主服务器（CNAME www -> your-ddns-url.bounceme.net）。现在，您应该能够从世界任何地方访问您的服务器，网址为 www.yoursite.com，从本地互联网连接内部或从星巴克。

您还可以为 FTP 服务器（通常为 21）设置端口转发，以远程编辑您的网站或访问您的主文件。当您可以远程访问您的家用 PC 时，您可以做各种事情。

我希望这个简短的演练将帮助您了解在所有设备上访问 apache VHost 所需的每个部分。我喜欢使用 DDNS 设置/选项，因为您不需要为每个设备或类似的东西设置主机文件。就像访问普通网站一样！

欢迎提问或评论。我真的只是把这一切都写在我的头上，我希望它有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:22:27.863

您是否为您的虚拟主机尝试过这种配置？

```
<VirtualHost *:80>
  DocumentRoot C:\xampp\htdocs\thisshouldbemysite.nl
  ServerName localhost
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T12:15:51.130

在这个文件中有虚拟主机定义： C:\server\apache\conf\extra\httpd-vhosts.conf 一个虚拟主机已经存在，您使用默认的“localhost”。为具有不同端口号的新项目创建另一个（此处为 81）

`<VirtualHost *:81> DocumentRoot "C:\server\htdocs\YOUR_PROJECT_FOLDER" ServerName YOUR_SERVER_NAME <Directory "C:\server\htdocs\YOUR_PROJECT_FOLDER"> Order allow,deny Allow from all </Directory> </VirtualHost>`

比此文件中包含 apache 将侦听的默认端口 C:\server\apache\conf\httpd.conf

`#Listen 12.34.56.78:80 Listen 80 Listen 81` 在此处添加您的新端口

现在您可以从本地计算机打开 http://YOUR_SERVER_NAME 并[从](http://YOUR_SERVER_NAME)其他本地网络连接的 PC打开[http://local_ip_adress_of_your_machine:81 。](http://local_ip_adress_of_your_machine:81)Windows 用户需要在 C:\Windows\System32\drivers\etc\hosts 文件中添加新的服务器名称

`127.0.0.1 YOUR_SERVER_NAME`

我希望它可以帮助需要的人

# javascript - 包括来自其他小提琴的代码

> ID：16162183
> 
> 赞同：3
> 
> 时间：2013-04-23T06:10:00.767
> 
> 标签：javascript, jsfiddle

假设我已经创建了小提琴 A，并且在我的新小提琴 B 中，我想包含来自小提琴 A 的类。而不是使用复制和粘贴包含，我宁愿参考小提琴 A。

是否有可能包含来自另一个小提琴的代码？

[编辑] 我正在考虑 javascript 部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:12:10.013

不幸的是，你不能在另一个小提琴中包含一个小提琴。这是因为 JSfiddle 将脚本内容直接打印到生成的文档中。外部使用的唯一选择是通过[嵌入](http://doc.jsfiddle.net/use/embedding.html)。

如果您想根据以前的工作创建一个新项目，正确的方法是分叉一个新的小提琴。

否则，您可以在您的站点/CDN 上托管您的共享代码，并将其包含在外部资源面板中。

# java - 删除和重新创建一个数组或用零填充它是否更快，为什么？

> ID：16162185
> 
> 赞同：4
> 
> 时间：2013-04-23T06:10:09.893
> 
> 标签：java, memory-management, garbage-collection, jvm

假设我创建了一个旨在模拟处理器内存的数组：

```
byte[] mem = new byte[0xF00]; 
```

该数组在仿真操作过程中使用，最终（读取：随频率）需要被丢弃或重置。我的问题是，哪个更快，为什么？

```
mem = new byte[0xF00]; 
```

或者：

```
for(int i = 0; i < mem.length; i++) mem[i] = 0; 
```

它可能看起来并不重要，但在模拟大量处理器时，小的效率会产生影响。速度上的差异将来自 JVM 的垃圾收集；一方面，必须转储数组并收集垃圾，但是，JVM 不再需要分配（并且可能归零？）新内存。第二，避免了 JVM 开销，但我们仍然需要遍历数组中的每个元素。

作为对这个问题的额外警告：

1.  成本比是否随数据类型的大小而变化？例如，a`short[]`呢？
2.  数组的长度会影响成本比吗？
3.  最重要的是，**为什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:15:24.477

您可以自己测试它，但删除和重新创建数组大致相同。

但是，它有两个缺点

*   它会导致您的 CPU 数据缓存滚动，从而降低其有效性。
*   它使触发 GC 的可能性更大，尤其是如果您经常这样做，这会暂停系统或减慢它的速度（如果它是并发的）

我更喜欢重用数组，不是因为它是最快的，而是它对应用程序的其余部分影响最小。

* * *

```
for (int size = 16; size <= 16* 1024; size *= 2) {
    int count1 = 0, count1b = 0,count2 = 0;
    long total1 = 0, total1b = 0, total2 = 0;
    for (long i = 0; i < 10000000000L; i += size) {
        long start = System.nanoTime();
        long[] longs = new long[size];
        if (longs[0] + longs[longs.length - 1] != 0)
            throw new AssertionError();
        long mid = System.nanoTime();
        long time1 = mid - start;
        Arrays.fill(longs, 1L);
        long time2 = System.nanoTime() - mid;
        count1b++;
        total1b += time1;
        if (time1 < 10e3) {// no GC
            total1 += time1;
            count1++;
        }
        if (time2 < 10e3) {// no GC
            total2 += time2;
            count2++;
        }
    }
    System.out.printf("%s KB took on average of %,d ns to allocate, %,d ns to allocate including GCs and %,d ns to fill%n",
            size * 8 / 1024.0, total1 / count1, total1b/count1b, total2 / count2);
} 
```

印刷

```
0.125 KB took on average of 35 ns to allocate, 36 ns to allocate including GCs and 19 ns to fill
0.25 KB took on average of 39 ns to allocate, 40 ns to allocate including GCs and 31 ns to fill
0.5 KB took on average of 56 ns to allocate, 58 ns to allocate including GCs and 55 ns to fill
1.0 KB took on average of 75 ns to allocate, 77 ns to allocate including GCs and 117 ns to fill
2.0 KB took on average of 129 ns to allocate, 134 ns to allocate including GCs and 232 ns to fill
4.0 KB took on average of 242 ns to allocate, 248 ns to allocate including GCs and 368 ns to fill
8.0 KB took on average of 479 ns to allocate, 496 ns to allocate including GCs and 644 ns to fill
16.0 KB took on average of 1,018 ns to allocate, 1,055 ns to allocate including GCs and 1,189 ns to fill
32.0 KB took on average of 2,119 ns to allocate, 2,200 ns to allocate including GCs and 2,625 ns to fill
64.0 KB took on average of 4,419 ns to allocate, 4,604 ns to allocate including GCs and 4,728 ns to fill
128.0 KB took on average of 8,333 ns to allocate, 9,472 ns to allocate including GCs and 8,685 ns to fill 
```

仅证明很难假设一种方法在所有情况下都比另一种方法快。

如果我把它改成`long[]`一个`int[]`我看到的差不多

```
0.125 KB took on average of 35 ns to allocate, 36 ns to allocate including GCs and 16 ns to fill
0.25 KB took on average of 40 ns to allocate, 41 ns to allocate including GCs and 24 ns to fill
0.5 KB took on average of 58 ns to allocate, 60 ns to allocate including GCs and 40 ns to fill
1.0 KB took on average of 86 ns to allocate, 87 ns to allocate including GCs and 94 ns to fill
2.0 KB took on average of 139 ns to allocate, 143 ns to allocate including GCs and 149 ns to fill
4.0 KB took on average of 256 ns to allocate, 262 ns to allocate including GCs and 206 ns to fill
8.0 KB took on average of 472 ns to allocate, 481 ns to allocate including GCs and 317 ns to fill
16.0 KB took on average of 981 ns to allocate, 999 ns to allocate including GCs and 516 ns to fill
32.0 KB took on average of 2,098 ns to allocate, 2,146 ns to allocate including GCs and 1,458 ns to fill
64.0 KB took on average of 4,312 ns to allocate, 4,445 ns to allocate including GCs and 4,028 ns to fill
128.0 KB took on average of 8,497 ns to allocate, 9,072 ns to allocate including GCs and 7,141 ns to fill 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T08:15:51.033

重新分配数组实际上并不会增加每次 GC 的成本，因为 GC 只访问和复制活动对象，而对死对象不做任何事情。但是，分配对象会导致次要 GC 更频繁地发生。但是，如果最近分配的对象都没有存活，那么次要 GC 的成本非常低，根本不会引起主要 GC。

此外，在当前的 Java 版本中，对象分配很便宜，分配空间的归零很容易被认为是 JVM 可能实现的最有效的归零。如果您设法像 JVM 一样快地将代码中的数组归零（**编辑**：正如 Steven Schlansker 所提到的，JIT 编译器可能会优化内存填充​​循环），那么重用数组应该会更快。无论如何，在您说明的 for 循环被 JIT 编译器优化之前，我认为它会慢很多。

要回答您的其他问题：

*   GC 会立即将分配空间（Eden）归零，因此无论是 a`short[]`还是`byte[]`. `short[]`但是，当使用 a代替 a时，您的 for 循环只需要一半的迭代次数即可将相同数量的字节归零`byte[]`（将字节或短设置为 0 应该没有任何区别）
*   数组越长，for 循环需要的迭代次数就越多。所以这种增长是线性的。GC 还需要摊销线性时间来将所涉及的字节范围归零，因此我认为两种方法之间的比率保持不变。但是，可能存在比小内存区域清零更有效的方法，这将使 GC（一次整个分配空间）完成的清零比循环方法更有效。对于非常大的数组，情况可能会发生变化：它们直接分配到 Tenured 代（除非使用 G1），因此会导致更昂贵的主要 GC。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T06:40:02.833

我同意继续使用数组对应用程序的影响最小的观察，但您的具体情况似乎对 GC 影响不大：

```
for(int i = 0; i < mem.length; i++) mem[i] = 0; 
```

在上面的循环中（`mem.length`是 61440），会有`2*61400`赋值和`61400`比较。

现在，如果在特定对象的扫描或内存释放阶段发生 GC，整个内存块将被取消引用，这 IMO 应该比来自上述循环的统计数据更快。

但是，当代码/应用程序行为导致过多的 GC 周期（如果其频繁的主要周期甚至更糟）时，应用程序性能的 GC 实际成本就会出现。您的具体情况并没有显示更高的显式 GC。

我认为循环方法`byte[]`会更好。如果是这样`Object[]`的话，我们可能会有不同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:15:02.730

我肯定会去做`mem = new byte[0xF00];`，让 GC 完成剩下的工作。

内存使用量可能会大一点，但它不会对您的应用程序产生影响，除非您每秒执行数千次。

执行时间会快很多，不需要手动调用 GC，反正他会做好自己的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:51:47.507

这里有 4 个重要的因素。

1) 目标平台是什么？（它有很多 RAM 吗？多个 CPU 内核？） 2) 您计划分配的最大内存量是多少？（更大的数量可能有利于分配/解除分配） 3）您计划使用哪个 JVM？4) 如果您的应用程序对性能至关重要，您为什么要使用 Java 开发它？

更重要的是，我会说，“不要担心过早的优化”。首先编写软件，然后对其进行分析，然后优化执行缓慢的部分。作为一般规则，算法性能通常是比数据结构性能更大的问题，特别是当您的数据结构基本上只是一个空白寻址空间时。

# android - 如何检测在CustomList中单击了哪个按钮以及在哪个位置

> ID：16162189
> 
> 赞同：2
> 
> 时间：2013-04-23T06:10:26.550
> 
> 标签：android, android-listview, custom-lists

我正在使用自定义列表视图，其中每个项目都有两个按钮。以下是我的项目 xml。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="10">

            <Button
                android:id="@+id/btn_sound"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_gravity="left"
                android:layout_marginLeft="3dp"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                android:layout_marginRight="0dp"
                android:background="@drawable/btn_background"
                android:gravity="left|center_vertical"
                android:paddingLeft="10dp"
                android:text="Sound Name"
                android:textSize="20sp"
                android:textStyle="bold"
                 android:layout_weight="7" />

            <ImageButton
                android:id="@+id/ib_info"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_gravity="right"
                android:gravity="left|center_vertical"
                android:layout_marginLeft="0dp"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                android:layout_marginRight="3dp"
                android:layout_weight="3"
                android:src="@drawable/btn_info_source"
                android:background="@drawable/btn_info_background" />

</LinearLayout> 
```

以下是我正在使用的 Addapter。

```
public class CustomListAdapter extends BaseAdapter implements OnClickListener {
    Context mContext;
    String[] mArrayList;

    public CustomListAdapter(Context context, String[] SoundNames) {
        this.mContext = context;
        this.mArrayList = SoundNames;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Holder holder;
        if (convertView == null) {
            holder = new Holder();
            LayoutInflater inflater1 = (LayoutInflater) this.mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = inflater1.inflate(R.layout.list_item, null);
            holder.btn_sound = (Button) convertView.findViewById(R.id.btn_sound);
            holder.ib_info = (ImageButton) convertView.findViewById(R.id.ib_info);
            convertView.setTag(holder);
        } else {
            holder = (Holder) convertView.getTag();
        }

        holder.btn_sound.setText(mArrayList[position]);
        //holder.btn_sound.setOnClickListener(this);
        return convertView;
    }

    private static class Holder {

        Button btn_sound;
        ImageButton ib_info;
    }

    @Override
    public int getCount() {
        return mArrayList.length;
    }

    @Override
    public Object getItem(int position) {
        return mArrayList[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

} 
```

我正在以下代码中设置列表视图。

```
public class SectionFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView;
        ListView mListView;
        Bundle args = getArguments();
        int currentView = args.getInt(Constants.ARG_SECTION_NUMBER) - 2;

        if (currentView == 0) {
            rootView = inflater.inflate(R.layout.deer, container, false);
            //mListView = (ListView) rootView.findViewById(R.id.listView_deer);
            CustomListAdapter mListAdapter = new CustomListAdapter(MainActivity.appContext, Constants.deer_Sound_Names);
            //mListView.setAdapter(mListAdapter);
            ((AdapterView<ListAdapter>) rootView.findViewById(R.id.listView_deer)).setAdapter(mListAdapter);
            ((AdapterView<ListAdapter>) rootView.findViewById(R.id.listView_deer)).setOnItemClickListener(mListner);

        } else if (currentView == 1) {
            rootView = inflater.inflate(R.layout.guide_layout, container, false);
            Toast.makeText(MainActivity.appContext, "Loading Guide...", Toast.LENGTH_LONG).show();
            WebView guideViewer = (WebView) rootView.findViewById(R.id.webView_guide);
            guideViewer.loadUrl("file:///android_asset/deer_html/guide.htm");

        } else {

            rootView = inflater.inflate(R.layout.activity_main, container,
                    false);
        }
        return rootView;
    }
    OnItemClickListener mListner = new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
            Log.d("HFI","Item Clicked: "+Constants.deer_Sound_Index[position]);
            switch (view.getId()) {
            case R.id.btn_sound:
                Log.d("HFI","Sound: "+Constants.deer_Sound_Index[position]);
                break;
            case R.id.ib_info:
                Log.d("HFI","Info: "+Constants.deer_Sound_Index[position]);
                break;
            default:
                break;
            }           
        }
    };

} 
```

问题：自定义列表视图未`setOnItemClickListener(mListner);` 注册实际我想检测在`SectionFragment`课堂上单击了哪个按钮和哪个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:51:04.487

我在对我有用的地方添加了 onClick `getView`。代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {
        Holder holder;
        if (convertView == null) {
            holder = new Holder();
            LayoutInflater inflater1 = (LayoutInflater) this.mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater1.inflate(R.layout.list_item, null);
            holder.btn_sound = (Button) convertView.findViewById(R.id.btn_sound);
            holder.ib_info = (ImageButton) convertView.findViewById(R.id.ib_info);
            convertView.setTag(holder);
        } else {
            holder = (Holder) convertView.getTag();
        }

        holder.btn_sound.setText(mArrayList[position]);

        holder.btn_sound.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //Sound Button Click
            }
        });
        holder.ib_info.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //info Button Click
            }
        });
        return convertView;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:43:36.690

这将起作用

```
 @SuppressWarnings("unchecked")
public class ViewHolder
{

private static final String TAG = "View Holder";

public static <T extends View> T get(View view, int id) 
{
    SparseArray<View> viewHolder = (SparseArray<View>) view.getTag();
    if (viewHolder == null) 
    {
        viewHolder = new SparseArray<View>();
        view.setTag(viewHolder);
    }
    View childView = viewHolder.get(id);
    if (childView == null) 
    {
        childView = view.findViewById(id);
        viewHolder.put(id, childView);
    }
    return (T) childView;
}

public static <T extends View> T get(View view, int id, int position) 
{
    SparseArray<View> viewHolder = (SparseArray<View>) view.getTag();
    if (viewHolder == null) 
    {
        viewHolder = new SparseArray<View>();
        view.setTag(viewHolder);
    }
    View childView = viewHolder.get(id);

    if (childView == null) 
    {
        childView = view.findViewById(id);
        viewHolder.put(id, childView);
    }
    childView.setTag(position);
    return (T) childView;
}
} 
```

并在 getView

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {

        LayoutInflater inflater1 = (LayoutInflater) this.mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        convertView = inflater1.inflate(R.layout.list_item, null);

    } 
    Button btn_sound = ViewHolder.get(findViewById(R.id.btn_sound), position);
        ImageButton ib_info = ViewHolder.get(findViewById(R.id.ib_info));

    btn_sound.setText(mArrayList[position]);
    btn_sound.setOnClickListener(this);
    return convertView;
}  

 @Override
    public void onClick(View v) { 
        int position = (Integer)v.getTag();
        // do whatever you want
    } 
```

# ruby-on-rails - RVM 稳定版安装错误

> ID：16162192
> 
> 赞同：2
> 
> 时间：2013-04-23T06:10:35.647
> 
> 标签：ruby-on-rails, installation, rvm, runtime-error

我想将 RVM 与 Ruby 1.9.3 和 Rails 3.2.9 一起安装。我尝试使用以下命令安装 rvm，

> \curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s stable --rails --autolibs=enabled # 或者，--ruby=1.9.3

但是，我收到以下错误。

```
Upgrade Notes:

  * WARNING: You're using ~/.profile, make sure you load it,
    add the following line to ~/.bash_profile if it exists
    otherwise add it to ~/.bash_login:

      source ~/.profile

  * No new notes to display.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues run 'rvm requirements' or read 'rvm notes'

Upgrade of RVM in /home/local/.rvm/ is complete.

ajesh.co,TION
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and
#   more enjoyable!!!
#
# ~Wayne

rvm 1.19.6 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

Searching for binary rubies, this might take some time.
Installing requirements for ubuntu, might require sudo password.
E: Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)
E: Unable to lock directory /var/lib/apt/lists/ 
```

请帮忙。谢谢。:)-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:46:54.943

软件包未安装，因为 apt-get 在执行时停止，导致 apt 处于锁定状态。

您可以使用删除锁定文件

```
sudo rm /var/lib/apt/lists/lock 
```

您可能还需要删除缓存目录中的锁定文件

```
sudo rm /var/cache/apt/archives/lock 
```

之后再次尝试安装命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T11:20:04.257

我有同样的问题。我遵循了本教程，现在我已经启动并运行：

[http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T07:07:55.220

使用以下步骤，您将获得解决方案：

```
1)sudo apt-get -y install curl

2)curl -L get.rvm.io | bash -s stable 

3)source ~/.rvm/scripts/rvm 

4)sudo apt-get -y install build-essential openssl libreadline6 libreadline6-dev zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion

5)rvm install 1.9.3-p374

6)gem install rails -v 3.2.9 
```

# scala - #:: 方法是什么

> ID：16162193
> 
> 赞同：3
> 
> 时间：2013-04-23T06:10:44.663
> 
> 标签：scala

这可能是一个微不足道的问题，但我找不到它的文档：

在内部`Stream`，以及在其他地方，我看到了使用该方法的示例`#::`。例如：

```
val fibs: Stream[BigInt] = BigInt(0) #:: BigInt(1) #:: fibs.zip(fibs.tail).map { n => n._1 + n._2 } 
```

但我`#::`在[api](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)中找不到隐式方法的文档。它是什么？它在哪里声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:26:03.273

[Stream.ConsWrapper](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream%24%24ConsWrapper)中的第一个值成员。我通过使用搜索框下方左侧窗格中的符号索引找到了。

这是它的签名：

def #::(hd: A): 流[A]

简而言之，就是列表`::`，但用于流。

# sql - 哪一层应该在逻辑上负责处理 SQL Server 的超时？

> ID：16162195
> 
> 赞同：0
> 
> 时间：2013-04-23T06:10:50.543
> 
> 标签：sql

我今天注意到我的应用程序出现了几个错误，它试图将记录插入表中，但由于临时网络延迟而收到超时错误。应用程序被编码为识别这一点并在这种情况下重试，它乖乖地这样做了。但是在重试时，它遇到了主键违规 - 主要是因为第一个插入语句实际上已经完成，但是发生了超时，将响应传输回客户端。应用程序认为主键违规是一个不应该发生的严重逻辑错误，因此它中止了整个过程。

对我来说，问题是逻辑上应该由哪一层负责处理这类事情？理想情况下，我会认为 SQL 客户端库（在本例中为 ADO.NET 4.0）应该这样做，但它没有我所知道的自动重试机制。鉴于它没有，似乎有一个可以使用 SQL 客户端库的低级包装器的情况，但是如果没有更多关于超时发生时间的信息的访问权限，我看不出它是如何编写的：例如在这个某种例子有可能

a) INSERT 语句只是使用自动递增键插入新记录，因此在超时后重试会导致插入重复记录，或者 b) 主键违规实际上是一个逻辑错误，并且最初尝试插入如果没有发生超时，aa 记录将产生相同的违规

OTOH 我敢肯定我可以想到是否重试只能在应用程序级别确定的示例（尤其是在需要用户确认的情况下）。

实际上，我有点惊讶我以前从未见过这种特别的错误序列，因为在实践中似乎很有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:27:53.223

显然，解决这个特定问题的一种方法是使用“SET XACT_ABORT ON”。据报道，如果客户端出现运行时错误，这会导致 SQL 服务器回滚语句。我很好奇为什么它实际上不是默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T20:09:05.283

该`IDENTITY`属性[不保证唯一性](http://msdn.microsoft.com/en-us/library/ms186775.aspx)，永远。这意味着当您`INSERT`在给定表上有并发语句时，您的自动递增值可能会在多个活动事务中重复。

`SET TRANSACTION ISOLATION LEVEL SERIALIZABLE`解决此问题的一种方法是在开始交易之前发出声明。这将防止插入冲突，这意味着不能并行执行两个插入。

另一种更常见的方法是简单地重新尝试您的事务或语句，直到您没有收到主键违规。仅当您不执行标识插入并且让 SQL Server 处理主键值并且它是自动递增的时，才应该这样做。

以一种可接受的方式处理此问题的另一种方法是使用`UNIQUEIDENTIFIER`类型主键。这些几乎可以保证是独一无二的。您可以在很长一段时间后开始接收重复；这将需要与重试相同的逻辑，并且您会丢失主键索引的物理布局优化。这与其说是建议，不如说是一种替代或说明。

总而言之，如果您想处理错误并且您使用的是 SQL Server 2012，您可以简单地使用以下模板来确保您的事务被适当地回滚并且错误浮出水面：

```
BEGIN
    SET NOCOUNT ON;
    SET XACT_ABORT OFF;

    BEGIN TRANSACTION;
        BEGIN TRY
            -- Do stuff here
        END TRY
        BEGIN CATCH
            ROLLBACK TRANSACTION;
            THROW;
        END CATCH

    COMMIT TRANSACTION;
END 
```

另请注意，此模板不适用于对存储过程的嵌套调用，如果以这种方式使用，它将回滚整个过程链。

**编辑**

由于您使用的是 ADO .NET，因此您可以禁用连接池并自行处理连接管理。如果在池关闭时连接超时，它将在服务器端发生故障并破坏事务，从而导致回滚。

# php - 2个数据库的差异，保存不同的行

> ID：16162199
> 
> 赞同：0
> 
> 时间：2013-04-23T06:11:08.240
> 
> 标签：php, mysql, diff

我有 2 个结构相同的表。现在其中一个是现场表的旧转储。

与旧转储相比，我需要提取实时表中不同或新的每一行。

我知道如何在每一行上进行选择，然后用 PHP 对其进行比较，但这不是一个有效的解决方案。

有没有人知道如何以更简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:16:01.530

```
SELECT newtable.*
FROM newtable LEFT JOIN oldtable USING (id)
WHERE oldtable.id IS NULL /* new rows */
OR newtable.col1 != oldtable.col1
OR newtable.col2 != oldtable.col2
OR newtable.col3 != oldtable.col3
... 
```

# vb.net - Combobox vb.net中的线形线条

> ID：16162202
> 
> 赞同：0
> 
> 时间：2013-04-23T06:11:19.323
> 
> 标签：vb.net, graphics, combobox, line

是否有可能`combobox with LineShape`在其中有一条线`instead of text`？如果是这样，我该如何实现？

它适用于我试图制作的绘图应用程序，允许用户选择`difrent line types`

（我正在使用`VB.Net`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:37:34.643

您必须从 ComboBox 继承并创建自己的类。设置`DrawMode = DrawMode.OwnerDrawFixed`和处理`OnDrawItem`。有很多关于如何做到这一点的例子。您可以将此用作启动[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawitem.aspx)或[使用 C# 组合框放置图像和字符串](https://stackoverflow.com/questions/4080719/placing-images-and-strings-with-a-c-sharp-combobox)（在 C# 中，但您可以轻松将此代码转换为 VB.NET）

# python - Python：按索引选择，打印列项

> ID：16162203
> 
> 赞同：0
> 
> 时间：2013-04-23T06:11:21.117
> 
> 标签：python, indexing

它已经非常接近于做我想做的事情了，这让用户通过它的索引号（0-11）在列表中选择一个项目。

当我输入一个数字，即 5 时，它会打印“ `You selected [5] as origin point"`..great！但我希望它显示绘图的名称，而不是索引号。名称在第 2 列中（如果索引列计为 0） .我意识到它要求整数，但我希望它很容易修复。

另一个问题是如果我输入 18，它会打印`"You selected [18]..."`，但没有 18。

```
def fmp_sel():
    DataPlotLoc= file('MonPlotDb.csv', 'rU')
    fmpList = csv.reader(DataPlotLoc, dialect=csv.excel_tab)
    next(fmpList, None)
    for item in enumerate(fmpList):
        print "[%d] %s" % (item)

    while True:
        try:
            in_Sel = raw_input(('''Choose a plot from list, or 'q' to quit: '''))

            if in_Sel == 'q':
                print 'Quit?'
                conf = raw_input('Really? (y or n)...')
                if conf == 'y':
                    print 'Seeya!'
                    break
                else:
                    continue

            in_Sel = DataPlotLoc[int(in_Sel) + 1] # The +1 is to align to correct index
            print 'You selected', in_Sel, 'as origin point'
            break

        except (ValueError, IndexError):
            print 'Error: Try again' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:18.763

你需要 fmpList 到一个列表，csv阅读器只会循环一次，

您也可以将代码更改为

```
DataPlotLoc= file('MonPlotDb.csv', 'rU')
fmpList = list(csv.reader(DataPlotLoc, dialect=csv.excel_tab))
for item in enumerate(fmpList):
   print "[%d] %s" % (item)
if fmpList:
   while True:
         try:
            in_Sel = raw_input(('''Choose a plot from list, or 'q' to quit: '''))
            in_Sel = DataPlotLoc[int(in_Sel)][1] # The +1 is to align to correct index
            print 'You selected', in_Sel, 'as origin point'
            break    
        except (ValueError, IndexError):
            print 'Error: Try again' 
```

# xml - XML DTD 命名空间未绑定

> ID：16162205
> 
> 赞同：0
> 
> 时间：2013-04-23T06:11:24.710
> 
> 标签：xml, namespaces, xml-namespaces, dtd

好的，所以我需要为 XML 项目声明名称空间，并使用 DTD 进行验证。一切似乎都是正确的，甚至我的朋友和教授都这么说，但我不断收到一条错误消息，说“元素“st:course”的前缀“st”未绑定。” 它看起来对我很重要，我错过了什么？

XML:

```
<?xml-namespace ns="http://www.student_courses/data/st/ns" prefix="st"?>
<?xml-namespace ns="http://www.student_courses/data/cr/ns" prefix="cr"?>
<!DOCTYPE students SYSTEM "student_courses.dtd">

<students>
<student number="a101"> <!-- number is an ID, required-->
<Name title="Mr.">John Doe</Name><!-- title values can be 'Mr.','Ms.','Dr.'-->
<st:course xmlns= "http://www.student_courses/data/st/ns" section="01">WEB 225</st:course>
<enrolled>22</enrolled>

<content>
<level class="Intro"></level>
<comments>Great course</comments><!-- An optional element -->
<book isbn="">XML</book><!--isbn is required, but the element is optional -->
</content>
</student>

<student number="a102"><!-- number is an ID, required-->
<Name title="Dr.">Jane Williams</Name>
<st:course xmlns= "http://www.student_courses/data/st/ns">WEB 325</st:course>
<enrolled>22</enrolled>

<content>
<level class="Adv."></level>
</content>
</student>

<student number="a103"><!-- number is an ID, required-->
<Name title="Ms.">Jane Doe</Name><!-- title values can be 'Mr.','Ms.','Dr.'-->
<st:course xmlns= "http://www.student_courses/data/st/ns" section="03">WEB  440</st:course>
<enrolled>12</enrolled>

<content>
<level class="Adv."></level>
<comments>Great course</comments><!-- An optional element -->
</content>
</student>

<courses>

<cr:course xmlns = "http://www.student_courses/data/cr/ns" id="WEB225">
<name>Web Development II</name>
<offered>Spring</offered>
<pre_reqs>WEB125</pre_reqs>
</cr:course>

<cr:course xmlns = "http://www.student_courses/data/cr/ns" id="WEB125">
<name>Web Development I</name>
<offered>Fall</offered>
</cr:course>

<cr:course xmlns = "http://www.student_courses/data/cr/ns" id="WEB325">
<name>Client-Side Scripting</name>
<offered>Spring</offered>
<offered>Fall</offered>
<pre_reqs>WEB225</pre_reqs>
</cr:course>

</courses>

</students> 
```

这是我的 DTD：

```
<!ELEMENT students (student+)>
<!ELEMENT student (Name+,st:course+,enrolled+,content+)>
<!ATTLIST student number ID #REQUIRED>
<!ELEMENT Name (#PCDATA)>
<!ATTLIST Name title (Mr. | Ms. | Dr.) #IMPLIED>
<!ELEMENT st:course (#PCDATA)>
<!ATTLIST st:course xmlns CDATA #FIXED "http://www.student_courses/data/st/ns"> 
<!ATTLIST st:course section CDATA #IMPLIED>
<!ELEMENT enrolled (#PCDATA)>
<!ELEMENT content (level+, comments*, book?)>
<!ELEMENT level (#PCDATA)>
<!ATTLIST level class (Intro | Adv.) #IMPLIED>
<!ELEMENT comments (#PCDATA)> 
<!ELEMENT book (#PCDATA)>
<!ATTLIST book isbn CDATA #REQUIRED>
<!ELEMENT courses (cr:course+)>
<!ELEMENT cr:course (name+,offered+,pre_reqs*)>
<!ATTLIST cr:course xmlns:cr CDATA #FIXED "http://www.student_courses/data/cr/ns"> 
<!ATTLIST cr:course id CDATA #REQUIRED>
<!ELEMENT name (#PCDATA)>
<!ELEMENT offered (#PCDATA)>
<!ELEMENT pre_reqs (#PCDATA)> 
```

谢谢大家，喜欢这个地方！！

-K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:38:18.810

你的问题是：

1.  在 DTD 中将 <!ATTLIST st:course xmlns CDATA #FIXED " [http://www.student_courses/data/st/ns](http://www.student_courses/data/st/ns) "> 更改为 <!ATTLIST st:course xmlns:st CDATA #FIXED " [http://www.student_courses /数据/st/ns](http://www.student_courses/data/st/ns) ">

2.  在 XML 注释中，您的 <courses>... </courses> 元素根据您的 DTD 无效。您的 DTD 仅在 <students> 下有 <student>。

3.  随处更改 XML <st:course xmlns= " [http://www.student_courses/data/st/ns](http://www.student_courses/data/st/ns) "...> 到 <st:course xmlns:st="http://www.student_courses/data/st /ns"...>

4.  在 XML 开始时将 <?xml-namespace ns="http://www.student_courses/data/st/ns" prefix="st"?> 更改为 <?xml-namespace st="http://www. student_courses/data/st/ns" 前缀="st"?>

第一个和第三个是相互关联的。如果您想将您的“课程”元素保留为“st:course”（带有命名空间前缀），那么您必须将其添加到您的 DTD 中。

其中第二和第三是不言自明的。

# jquery - 使用 jquery 显示翻转切换开关的打开和关闭状态

> ID：16162209
> 
> 赞同：1
> 
> 时间：2013-04-23T06:12:02.730
> 
> 标签：jquery, jquery-mobile, slider

我希望能够同时显示翻转拨动开关的 On 和 Off 部分。适用于旧版本 jquery 的演示代码是：

```
 <div data-role="fieldcontain"> 
                <label for="slider">Flip switch:</label> 
                <select name="slider" id="my-slider" data-role="slider"> 
                <option value="off">Browse</option> 
                <option value="on">Post</option> 
                </select> 
               </div> 
```

呈现为： ![在此处输入图像描述](https://i.stack.imgur.com/dYO5L.png)

但是在我使用 jquery-1.9.1.min.js 和 jquery.mobile-1.3.1.min.js 的代码中，相同的代码呈现为![在此处输入图像描述](https://i.stack.imgur.com/WpwIN.png)

我怎样才能继续使用相同的 .js 文件，但让开关看起来像以前的图像？我可以更改我正在使用的 .js 文件的版本，但这会弄乱页面上的其他元素。

# objective-c - 检查可变集是否包含具有相同属性的对象

> ID：16162215
> 
> 赞同：2
> 
> 时间：2013-04-23T06:12:38.823
> 
> 标签：objective-c

我想做的是创建一个`NSMutableSet`，其目的是计算有多少对唯一数据。

基本上，我有两个可变数组；`xCoordinates`和`yCoordinates`，以及一个名为 的自定义对象`XYPoint`。重合索引处的每个 X 坐标和 Y 坐标结合起来在笛卡尔平面上形成一个点。例如，在索引 2 处，`xCoordinates`数组中可能有数字 4，而`yCoordinates`数组中可能有数字 8，从而形成点 (4, 8)。

现在，对于问题的关键，我想做的是检查有多少*独特的*点。我打算用一个`NSMutableSet`来做。IE：

```
for (int i = 0; i < [xCoordinates count]; i++) {

        XYPoint *newXY = [[XYPoint alloc] init];
        newXY.xCoordinate = [xCoordinates objectAtIndex:i];
        newXY.yCoordinate = [yCoordinates objectAtIndex:i];

        if ([distinct containsObject:newXY] == NO) {

            [distinct addObject:newXY];

        }

    } 
```

不幸的是，这不起作用。有没有办法说；

```
if (there isn't an object in the set with an identical X coordinate property and Y coordinate property){

    Add one to the set;

} 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T06:35:54.437

`NSSet``isEqual`在测试成员资格时使用。
`isEqual:`并且`hash`是[NSObject 协议](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol)的一部分。

如果您的 XYPoint 类从 NSObject 派生，它会继承默认的 isEqual: 基于指针相等的实现。它比较内存地址以测试 2 个对象是否相同。
由于您的比较标准是*location*，因此您必须`isEqual:`在 XYPoint 类中覆盖并返回`YES`，如果您的 2 个对象的 x/y 坐标相同。

另请查看[集合编程主题](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Collections/Collections.html)。[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html)还有一篇关于平等和散列的非常详细的帖子。

**更新**
正如 JeremyP 在评论中指出的那样，您应该始终提供 when overriding 的`hash`实现`isEqual:`。详细信息在上面的 Mike Ash 文章中进行了解释。
还有一个问题[在 Stack Overflow 上](https://stackoverflow.com/questions/682438/hash-function-providing-unique-uint-from-an-integer-coordinate-pair)讨论坐标的良好哈希函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:24:30.610

这是 Rakesh 提议的增强版。

它不会受到数字到字符串转换的微妙影响，而且它省略了多余的条件。

它使用公共`NSValue`点包装器而不是您的自定义类`XYPoint`。

```
for (NSUInteger i = 0; i < [xCoordinates count]; ++i) {
    CGPoint p = { [xCoordinates[i] floatValue], [yCoordinates[i] floatValue] };
   [distinct addObject:[NSValue valueWithCGPoint:p]];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T09:34:48.337

扩展[weichsel's answer](https://stackoverflow.com/a/16162556/169346)这是最好的，类实现看起来像这样：

```
@interface XYCoordinate : NSObject
-(id) initWithX: (NSNumber*) newX andY: (NSNumber*) newY;
@property (readonly, copy) NSNumber* x;
@property (readonly, copy) NDNumber* y;
@end

@implementation XYCoordinate

@synthesize x = _x;
@synthesize y = _y;

-(id) initWithX: (NSNumber*) newX andY: (NSNumber*) newY
{
    self = [super init];
    if (self != nil)
    {
         [self setX: newX];
         [self setY: newY];
    }
    return self;
}

-(BOOL) isEqual: (id) somethingElse
{
    BOOL ret = NO;
    if ([somethingElse isKindOfClass: [XYCoordinate class]])
    {
        ret = [[self x] isEqual: [somethingElse x]] && [[self y] isEqual: [somethingElse y]]
    }
    return ret;
}

-(NSUInteger) hash
{
     return [[self x] hash] + [[self y] hash];  // Probably a rubbish hash function, but it will do
}
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T08:09:05.173

在我的脑海中，也许一些产生独特结果的操作对于您的特定情况就足够了（尽管可能不是最有效的解决方案）。

```
for (int i = 0; i < [xCoordinates count]; i++) {

    NSString *xStr = [[xCoordinates objectAtIndex:i] stringValue];
    NSString *yStr = [[yCoordinates objectAtIndex:i] stringValue];
    NSString *coordStr = [NSString stringWithFormat:@"%@ %@",xStr,yStr]; //edited
    if (![distinct containsObject:coordStr]) {
       [distinct addObject:coordStr];
    }
} 
```

我猜应该是这样。您的解决方案每次都不起作用，因为创建了一个新对象并且不相等。但是对于像上面这样的 NSString ，情况并非如此。只是一个快速的解决方案。

# vim - 如何以不同的语法语法高亮文件的一部分？

> ID：16162221
> 
> 赞同：11
> 
> 时间：2013-04-23T06:12:54.110
> 
> 标签：vim

我安装了[bnf.vim](http://www.vim.org/scripts/script.php?script_id=250)（突出显示 BNF 语法文件）。

假设我的代码中有一条评论：

```
/* <BNF>

<S> := <A> | h
<A> := a | b | c | .

</BNF> */ 
```

尽管整个文件的文件类型不同，Vim 是否可以通过某种方式编程以突出显示 BNF 语法中的注释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T06:26:14.633

你可以使用我的[SyntaxRange 插件](http://www.vim.org/scripts/script.php?script_id=4168)。

明确分配范围，例如

```
:10,20SyntaxInclude bnf 
```

或自动基于分隔模式：

```
:call SyntaxRange#Include('<BNF>', '</BNF>', 'bnf') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T02:16:02.837

对于许多文件类型，vim 将使用 heredoc 名称作为线索。例如，在 php 文件中，我经常在这里创建文档：

```
<?php 

$my_html = <<<html 
<h1>Solar</h1> 
<p>Is <em>good</em></p> 
html; 

$my_js = <<<javascript 
alert('yeah baby'); 
javascript; 

$my_sql = <<<sql 
SELECT user 
FROM mytable 
WHERE energy = 'solar'; 
sql; 
```

效果很好，唯一的问题是缩进有问题（结束标记不能有前面的空格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-12T12:46:47.047

我的用例是在 CloudFormation 模板中突出显示内联 Lambda 函数。使用上述[SyntaxRange 插件](http://www.vim.org/scripts/script.php?script_id=4168)，我将其添加到我的`.vimrc`：

```
autocmd Syntax * call SyntaxRange#Include('vim: set ft=js:','vim: set ft=js:','javascript') 
```

然后在我的模板中：

```
 Function:
    Type: AWS::Lambda::Function
    Properties:
      FunctionName: myFunction
      Code:
        ZipFile:
          !Sub |
            // vim: set ft=js:

            const aws = require('aws-sdk');
            const aws4 = require('aws4');
            const https = require('https');
            const zlib = require('zlib');

            ...

            // vim: set ft=js:

# vim: set ft=yaml: 
```

# python - python - Python 中的 OpenCV mat::convertTo

> ID：16162227
> 
> 赞同：26
> 
> 时间：2013-04-23T06:13:13.480
> 
> 标签：python, opencv

OpenCV python 包装器中是否有与 OpenCV 2 中 Mat 的 convertTo 方法相同的功能？

我基本上想在python中调用这个函数

```
out.convertTo( out, CV_32F, 1.0/255, 0 ); 
```

其中 out 是灰度图像。

我已经通过将我的 dst 参数保持为 CV_32FC1 类型来使用 cv.ConvertScale，但我试图让我的 python 代码尽可能地与 cv2 一致。有什么线索吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T06:22:52.860

您可以为此简单地使用 Numpy 函数。

例如：

```
res = np.float32(out) 
```

缩放，你将不得不单独做：

```
res = res*scaling_factor 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-11-07T11:50:24.080

如果您不尝试转换数据类型，请使用以下命令：

```
cv2.convertScaleAbs(image, result, alpha, beta) 
```

其中 alpha 是您的比例因子，而 beta 是移位值。 [OpenCV 文档中的更多详细信息。](http://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#convertscaleabs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-27T00:05:14.380

在OP中，

> 0 < 乘数 < 1，

所以你不必担心下溢或溢出。Adid Rahman K 和 knipknap 的解决方案可以正常工作。他们应该足够快。

如果出于任何原因，您需要一个大于 1 的乘数，那么您可能会遇到溢出问题。也就是说，该值不足以容纳所选的数据类型。大多数 OpenCV 函数将通过截断到数据类型的最大值来处理溢出。但是，NumPy 只会“翻转”该值（例如，对于 8 位数据类型——最大值 255——OpenCV 将强制 260 变为 255，但 NumPy 将强制 260 变为 4！）。

因此，要处理 8 位灰度图像并处理欠/溢出流，请执行以下操作：

```
img2 = np.int16(img1)     # convert to signed 16 bit integer to allow overflow
img2 = scale_factor*img2  # apply scale factor
img2 = clip(img2, 0, 255) # force all values to be between 0 and 255

# after clip img2 is effectively unsigned 8 bit, but make it explicit:
img2 = np.uint8(img2) 
```

# android - 使用 AdMob (Android) 加速应用程序加载

> ID：16162229
> 
> 赞同：0
> 
> 时间：2013-04-23T06:13:18.563
> 
> 标签：android, performance, admob

我已将 AdMod 广告添加到我的应用中。关键是现在该应用程序正在加载一个显着的时间，并且添加的内容比我的应用程序首先显示。我的应用程序是本地的，它不需要互联网连接或任何外部呼叫。该应用程序实际上是在 js 中（phonegap 转换）。是否可以先加载我的应用程序，然后再添加？是否可以加快整体加载过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:30:36.183

一旦加载了它的视图，您需要实现 phonegap 实现的回调。然后`loadAd()`在该回调中调用方法！

这会延迟加载您的广告！

# php - 如何更新 DIV 内容（如购物车 DIV）

> ID：16162232
> 
> 赞同：0
> 
> 时间：2013-04-23T06:13:29.470
> 
> 标签：php, javascript

我使用`$.load()`函数加载购物车详细信息。但是，当我单击添加链接时，它只会在我的购物车中显示具有该特定 ID 的详细信息。似乎每次尝试添加一项时都会创建购物车。

```
Code for add button: 
<a href="javascript:void(0)" onClick="recp('.$row["id"].')" > 
```

脚本：

```
function recp(id) {
$('.bottomcorners').load('addToCart.php?id=' + id);
}

</script>

AddToCart function
$conn = mysql_connect ('localhost','root','') or die("Unable to connect to mysql database server");
mysql_select_db('itech7602', $conn) or die ("Unable to select database");
$id = $_GET['id'];

echo $id;
//Check if the ID variable is set
if(isset($id))
{

    //Escape the string from the URL
    $ID = mysql_real_escape_string($id);

    //Check if the ID passed exists within the database
    $result = mysql_query('SELECT * FROM product WHERE id = "'.$ID.'" LIMIT 1');

    //Get the total results of if any product matched the query
    $totalRows = mysql_num_rows($result);

    //If the product ID exists in the database then insert it to the cart
    if($totalRows > 0)
    {

        while($row = mysql_fetch_assoc($result))
        {

            //Check if the cart exists
            if(cartExists())
            {

                //The cart exists so just add it to the cart
                insertToCart($ID, $row['name'], $row['price']);

            }
            else
            {

                //The cart doesn't exist so create the cart
                createCart();

                //The cart is now created so add the product to the cart
                insertToCart($ID, $row['name'], $row['price']);

            }

        }

    }
    else
    {

        //No products were found in the database so notify the user, redirect him and stop the code from continuing
        //notify('Sorry but there is no product with that ID.', 0);
        echo ("No item with that ID");
        //header('Location: store.php');

    }

    //The product was successfully added so set the notification and redirect to the cart page
    //notify('Product added to the cart.', 1);
    echo ("Product added to the cart.");
    //header('Location: store.php');

}
else
{

    //No Product with that ID redirect and display message
    //notify('Sorry but there is no product with that ID.', 0);
    echo "Add Failed!";
    //header('Location: store.php');

}
getCart();
exit();
?> 
```

insertToCart、getCart() 等函数都在另一个名为 functions.php 的 php 脚本中声明。

有什么建议吗？

我尝试使用`InnerHTML`，但没有运气

函数 addPro(id){

```
// This will create the XmlHttpRequest in modern browsers
if(window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();                   
}
// This will create the XmlHttpRequest in older versions of Internet Explorer
else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

// This is how you tell the script what to do with the response from the request
xmlhttp.onreadystatechange=function()
{
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("bottomcorners").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET", "addToCart.php?id="+id, true);
xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:25:54.267

代替：

```
<a href="javascript:void(0)" onClick="recp('.$row["id"].')" > 
```

尝试这个：

```
<a href="javascript:void(0)" onClick="recp('<?php echo $row["id"];?>')" > 
```

# php - 如何用连接声明一个 PHP 类常量？

> ID：16162233
> 
> 赞同：4
> 
> 时间：2013-04-23T06:13:31.530
> 
> 标签：php, class, constants

在 PHP5 类中，我想声明一个常量，如下所示：

```
class MyClass
{
    const sEOLChars = chr(13) . chr(10); 
```

这会产生错误 ( `Parse error: syntax error, unexpected '(', expecting ',' or ';'`)。怎么做才对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:33:00.480

`chr(13)`等效于`"\r"`(CARRIAGE RETURN) 并且`chr(10)`等效于`"\n"`(LINE FEED)。所以基本上你可以这样写你的代码：

```
class MyClass
{
    const sEOLChars = "\r\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:38:20.777

我想我会把我的解决方案作为答案发布——以防万一找不到问题的重复项。

对于您的具体错误，问题在于对[`chr`](http://us3.php.net/manual/en/function.chr.php). 但是，要回答标题，目前无法对 class 进行串联`const`。

不过，为了解决您的特定问题，您可以利用反向引用`\r\n`使您的行看起来像：

```
const sEOLChars = "\r\n"; 
```

或者您可以使用内置[`PHP_EOL`](http://php.net/manual/en/reserved.constants.php)常量，但请注意它只为您提供当前平台的行尾常量。^^

# php - 我正在为 CMS 编写一个插件，用于处理图像（调整它们的大小）。如何确保只有某些目录可以？

> ID：16162234
> 
> 赞同：1
> 
> 时间：2013-04-23T06:13:46.347
> 
> 标签：php, security

我正在为 CMS 编写一个插件，用于处理图像（调整它们的大小）。如何确保只有某些目录可以？

我希望用户能够定义他们希望脚本在哪个目录中查找（并找到所有图像）。

我知道我可以要求`$_POST['sub_directory_to_look_in']`并`glob('galleries/' . $_POST['sub_directory_to_look_in'] . '/*.jpg');`确保`$_POST['sub_directory_to_look_in']`没有`'../'`，但是这样做有任何安全问题吗？

我已经研究过`basedir`功能，但不确定这是否有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:22:16.877

为了安全起见，使用与目标目录相关的唯一标识密钥（例如用户 id 的加盐哈希）在用户与其内容之间进行映射。

这样，您的查询参数甚至不应包含有关您的基础架构的信息，而仅包含有关要传输的数据的信息，包括目标目的地的类型（不是它应该位于的位置，而是它应该相对位于的位置）。

[PS：如果系统用户http://www.php.net/manual/en/function.realpath.php](http://www.php.net/manual/en/function.realpath.php)`realpath`可以浏览， 您可以使用它来解析给定有效路径的符号链接

这个问题可能与[PHP 中的 Sanitize file path有关](https://stackoverflow.com/questions/1911382/sanitize-file-path-in-php)

# ios - 将单元格单击时的数据传递给另一个视图控制器

> ID：16162241
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:14:07.410
> 
> 标签：ios, uitableview

我有一个带有多个单元格（详细信息披露）的 TableViewController，每个单元格都与唯一数据（例如标题/详细信息）相关联。当我单击其中一个单元格时，另一个 ViewController 会被加载（通过 pushViewController），并且应该根据单击的单元格显示数据。

简单例如：

TableViewController 的每个 Cell 都与单独的 url 相关联。当我单击其中一个单元格（详细信息披露）时，下一个包含图像视图的 ViewController 应打开与单击的单元格的 url 对应的图像。

这必须在没有故事板、非 ARC 的情况下完成

你是怎样做的？

这就是我在 DidSelectRowAtIndex 中写的

```
 NSMutableString *URL= [[SubFolderData valueForKey:@"URL"]objectAtIndex:indexPath.row];
    NSLog(@"URL %@", URL);
    File *FileUrl = [[File alloc]init];
    FileUrl.Url = URL;

    DocumentManagementAppDelegate *delegate=(DocumentManagementAppDelegate *)[[UIApplication sharedApplication] delegate];
    File *FileVC=[[File alloc]initWithNibName:@"File" bundle:nil];
    self.FileController=FileVC;
    [delegate.navigationController pushViewController:FileController animated:YES];
    [FileVC release]; 
```

SubFolderData 是一个包含数据的数组，我从中仅检索 URL，该 URL 正在完成而没有任何问题

然后我创建第二个 ViewController 的新实例

在这个“文件”中是具有 NSMutableString“Url”的第二个 ViewController

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:26:46.297

`viewController`用你自己的 init 方法覆盖init 方法。例如

```
-(id) initWithTitle:(NSString *)title
{
     [super init];
      //your code
      //strore the title in your local variable.
     return self;
} 
```

并在创建`viewController`对象时

```
ViewController *vC = [[ViewController alloc] initWithTitle:@"VC Title"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:20:46.250

在 File 的 .h 文件中

```
 @interface File : UIViewController
    {
            NSString *strUploadVideoURL;
    }

    @property(nonatomic,retain) NSString *strUploadVideoURL;
    @end 
```

在 File 的 .m 文件中

```
 @synthesize strUploadVideoURL;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
            self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
            if (self) {
                    self.strUploadVideoURL = [[NSString alloc] init];
            }
            return self;
    }

    -(void) dealloc {
            [strUploadVideoURL release];
            [super dealloc];
    } 
```

在 mainview 的 didselectrow 方法中

```
 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
            NSMutableString *URL= [[SubFolderData valueForKey:@"URL"]objectAtIndex:indexPath.row];
            [self.FileController setStrUploadVideoURL:URL];
            //code for push view.....
    } 
```

# ios - 使用推送通知开发 IOS 应用程序

> ID：16162243
> 
> 赞同：0
> 
> 时间：2013-04-23T06:14:16.720
> 
> 标签：ios, apple-push-notifications

我正计划开发一个带有推送通知的 IOS 应用程序。

是否有任何链接/教程或任何被证明有帮助的东西你会推荐？

我对推送通知更好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:20:28.250

您可以查看 Ray Wenderlich 的这两部分教程：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

和

[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:48:46.200

托管您自己的 APNS 客户端不适合胆小的人。像[http://urbanairship.com/products/push-messaging](http://urbanairship.com/products/push-messaging)这样的服务是开始使用 APNS 的更好方法。

# matlab - 如何在彩色图像上使用 histeq 函数？

> ID：16162244
> 
> 赞同：3
> 
> 时间：2013-04-23T06:14:28.910
> 
> 标签：matlab, image-processing, histogram

我有一个彩色图像。我需要在其中应用**直方图均衡**。

如果我在以下代码中使用它

```
im = imread('E:\S1\New\Image1.png');
Test = histeq(im); 
```

我收到以下错误

```
Function HISTEQ expected its first input, I, to be two-dimensional.

Error in ==> histeq at 71
iptcheckinput(a,{'uint8','uint16','double','int16','single'}, ... 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:22:02.443

我认为最常见的解决方案是将图像转换为[HSV 颜色空间](http://www.mathworks.com/help/matlab/ref/rgb2hsv.html)，然后`histeq`仅应用于`V`（即值或强度）通道。

[http://en.wikipedia.org/wiki/Histogram_equalization#Histogram_equalization_of_color_images](http://en.wikipedia.org/wiki/Histogram_equalization#Histogram_equalization_of_color_images)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:22:21.267

问题是直方图仅适用于灰度图像。您将如何定义颜色的直方图均衡化？
Hist-eq 尝试通过稍微改变像素的亮度来重新分配灰度值以跨越（尽可能均匀地）整个 0..255 范围。
如果您希望对颜色执行相同的操作：即均匀填充整个 RGB 立方体，您会发现自己**正在更改像素的颜色**。也就是说，您最终会看到黄色像素变成棕色。

你必须清楚地定义你所追求的。

如果您只想跨越整个强度范围（不影响颜色），您会发现[Dan](https://stackoverflow.com/a/16162346/1714410)的解决方案非常有用。

如果您确实想“填充”整个 RGB 立方体，您可能需要考虑`hiseq`独立应用到图像的每个通道：

```
for ci = 1:size(im,3)
    Test(:,:,ci) = histeq( im(:,:,ci) );
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T11:48:27.447

对于简单的方法，试试这个：

```
im = imread('E:\S1\New\Image1.png');
Test =im(:,:,1); ir=histeq(ir); figure; imshow(ir, 'Border', 'tight'); 
```

# c# - 从一个类转换到另一个类

> ID：16162245
> 
> 赞同：0
> 
> 时间：2013-04-23T06:14:29.050
> 
> 标签：c#, asp.net, .net

我正在调用一个 Web 服务，它返回四个自定义类之一的数组。所有类都具有相同的内部内容 - 一个名为 Description 的字符串和另一个名为 Value 的字符串。我正在尝试编写一个可以接受四个类中的任何一个的方法，并将其内容放入下拉列表的数据源中。

有没有办法从未知的复合类转换为具有相同内容的指定类？还是去掉内容？

或者我必须用不同的数据类型编写四个相同的函数吗？

*编辑：添加代码*

```
 myDropDown.DataSource = CreateDataSource(myWebServiceResponse.Items);
    myDropDown.DataTextField = "DescriptionField";
    myDropDown.DataValueField = "ValueField";

    // Bind the data to the control.
    myDropDown.DataBind(); 
```

...

```
 public ICollection CreateDataSource(MasterData[] colData)
    {
        // Create a table to store data for the DropDownList control.
        DataTable dt = new DataTable();

        // Define the columns of the table.
        dt.Columns.Add(new DataColumn("DescriptionField", typeof(String)));
        dt.Columns.Add(new DataColumn("ValueField", typeof(String)));

        // Populate the table
        foreach (sapMasterData objItem in colData)
        {
            dt.Rows.Add(CreateRow(objItem, dt));
        }

        // Create a DataView from the DataTable to act as the data source 
        // for the DropDownList control.
        DataView dv = new DataView(dt);
        return dv;
    }

    DataRow CreateRow(MasterData objDataItem, DataTable dt)
    {
        // Create a DataRow using the DataTable defined in the  
        // CreateDataSource method.
        DataRow dr = dt.NewRow();

        dr[0] = objDataItem.Description;
        dr[1] = objDataItem.Value;

        return dr;
    }

public class MasterData
{
    public string Value;
    public string Description;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:18:24.587

实际上，该[`DropDownList`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)控件需要您`IEnumerable`作为 DataSource ，然后您可以指定[`DataTextField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)and [`DataValueField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)：

```
dropDownList.DataSource = some_Array_You_Retrieved_From_Your_Web_Service;
dropDownList.DataValueField = "Value";
dropDownList.DataTextField = "Description";
dropDownList.DataBind(); 
```

正如您所看到的，数组的实际类型并不重要，只要它具有绑定它`Value`的`Description`属性即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:54:47.190

包装器会做，你有两种方法：

```
public class WSData
{
    public string Value;
    public string Description;

    // First approach: single ctor with dynamic parameter
    public WSData(dynamic source)
    {
        this.Value = source.Value;
        this.Description = source.Description;
    }

    // ----- or --------

    // Second approach: one ctor for each class
    public WSData(FirstTypeFromWS source)
    {
        this.Value = source.Value;
        this.Description = source.Description;
    }
    public WSData(SecondTypeFromWS source)
    {
        this.Value = source.Value;
        this.Description = source.Description;
    }
} 
```

用法是一样的：

```
WSData yourData = new WSData(data_retrieved_from_service);
// now, bind the WSData object: you have abstracted yourself from
// the service and as a bonus your code can be attached elsewhere more easily 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:22:55.537

您可以定义一个由所有四个类（例如 IDescriptionValue）实现的接口，并编写一个接受该类型参数的方法，例如：

```
public interface IDescriptionValue
{
public string Description {get;set;}
public string Value {get;set;}
}

public class CustomClass1 : IDescriptionValue{
public string Description {get;set;}
public string Value {get;set;}
}
//snip...
public class CustomClass4 : IDescriptionValue{
public string Description {get;set;}
public string Value {get;set;}
}
//accepts parameters of type IDescriptionValue
public void setDropdownData(IDescriptionValue inputData){
// your code here
} 
```

# ios - Iphone 4 和 Iphone 5 的图像

> ID：16162251
> 
> 赞同：0
> 
> 时间：2013-04-23T06:14:55.570
> 
> 标签：ios, objective-c, uiimage

我的应用程序可以有很多`images`for `background`. 这个`images`我需要下载，所以我不想单独下载**iPhone 4**和**iPhone 5**。我使用方法`self.view.backgroundcolor = [UIColor colorWithPatternImage:[UIImage imagenamed:@"myImage.jpg"]]`。我想`image`为**iPhone 5**下载一个，然后剪切顶部和底部边框以与**iPhone 4**一起使用。我怎样才能以最好的方式以编程方式做到这一点。哦，也许我的问题有最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:19:04.990

您可以使用此功能裁剪图像定义您想要的矩形，因为您需要删除剩余的图像`CoreGraphics.framework`，所以不要忘记在您的项目中添加。

```
- (UIImage *)imageByCroppingtoRect:(CGRect)rect fromImage:(UIImage *)image
{
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return cropped;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:21:02.593

试试这个

```
- (UIImage *)cropImage:(UIImage *)oldImage {
    CGSize imageSize = oldImage.size;
    UIGraphicsBeginImageContextWithOptions(CGSizeMake( imageSize.width,imageSize.height - 100),NO,0.); // this height you want to change
    [oldImage drawAtPoint:CGPointMake( 0, -46) blendMode:kCGBlendModeCopy alpha:1.];// from top to change X is never change
    UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return croppedImage;
} 
```

# c - 为什么在 C 中未定义此代码的行为？

> ID：16162253
> 
> 赞同：2
> 
> 时间：2013-04-23T06:15:00.520
> 
> 标签：c, undefined-behavior

我得到了这段代码，但我不太确定为什么它的行为是未定义的。我的猜测是它与两个字符串的内存位置以及 if 条件中的位置比较有关。

```
int main(void) { 
  char *str1 = "xyz"; 
  char *str2 = "xyz";

  if (str1 == str2) {
     printf("Same!\n");
  }  else {
     printf("Not Same!\n");
  }
  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T06:16:37.293

关于是否折叠相同的字符串常量以占用相同的内存，它是未指定的（不是未定义的，有一个微妙的区别）。

`C++11, 6.4.5 String literals /6`状态：

> 如果它们的元素具有适当的值，则未指定这些数组是否不同。如果程序尝试修改这样的数组，则行为未定义。

`str1`和都是`str2`指向包含四个字符的内存块的指针`{ 'x', 'y', 'z', '\0'}`，根据定义，它们是不可修改的。

这意味着编译器可以自由地将这两个变量设置为指向*同一个*内存块，以提高效率，如果它愿意的话。

因此`str1`和`str2`（我说的是指针，显然指针后面的*内容*是相同的）可能相同或不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:30:20.197

“xyz”是一个字符串文字，它被放入“只读”部分，以只读方式映射到进程空间（这就是您无法更改它的原因）。

所以两者`str1`都`str2`指向同一个地址。`printf("Same!\n");`这就是被处决的原因。

这取决于平台。参考[字符串文字：它们去哪儿了？](https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:20:33.547

C 不支持字符串比较运算符，因此在使用 == 运算符比较字符串时，它实际上比较的是字符串地址，并且因为未定义“xyz”字符串常量在只读内存中将具有相同的内存地址。它取决于编译器和机器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:23:15.097

也许它是未定义的，因为它取决于编译器如何优化字符串。在不知道使用什么编译器和什么选项的情况下，通常无法定义结果。

# ruby-on-rails - 设置父 id 有很多 ember js

> ID：16162261
> 
> 赞同：0
> 
> 时间：2013-04-23T06:15:37.920
> 
> 标签：ruby-on-rails, ember.js, ember-data

我有 2 个模型配方和成分。他们有很多并且属于协会。

配方：ID，标题。成分：id，名称，recipe_id

我用配方和成分创建嵌套形式。我可以在客户端的每种成分中设置 recipe_id，但我认为这是个坏主意，因为用户可以破解并更改此 ID。

**在保存到后端时设置父 ID 的正确方法是什么？**

recipes_new_controller.js.coffee

```
App.RecipesNewController = Ember.ObjectController.extend
  save: ->
    console.log "save recipe"
    @transaction.commit() 
```

新标志

```
h1 Create recipe

form
  div
    label{bindAttr for='title.elementId'} Title
    Ember.TextField valueBinding='title' name='title' viewName='title'

  div
    label{bindAttr for='about.elementId'} About
    Ember.TextArea valueBinding='about' name='about' viewName='about'

  #ingredients
    h3 Ingredients
    each ingredient in content.ingredients
      .control-group
        .controls
          Ember.TextField valueBinding='ingredient.about'
          a{ action removeIngredient ingredient target='controller' } href='#' Remove
    div
      a{ action addIngredient target='controller' } href='#' Add Ingredient

  button.btn.btn-success{ action save this } Create
  button.btn.btn-inverse{ action cancel this } Cancel 
```

# ruby - 无法安装遏制宝石

> ID：16162266
> 
> 赞同：23
> 
> 时间：2013-04-23T06:15:53.370
> 
> 标签：ruby, ubuntu, curl, gem, ubuntu-12.10

它给了我错误

```
 gem install curb
Building native extensions.  This could take a while...
ERROR:  Error installing curb:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>'

Gem files will remain installed in /home/user1/.rvm/gems/ruby-1.9.3-p392/gems/curb-0.8.3 for inspection.
Results logged to /home/user1/.rvm/gems/ruby-1.9.3-p392/gems/curb-0.8.3/ext/gem_make.out 
```

**rvm 列表**

```
rvm rubies

   ruby-1.9.3-p385 [ broken ]
=* ruby-1.9.3-p392 [ x86_64 ]
   ruby-2.0.0-p0 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

user1@ubuntu:~$ sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libcurl3-gnutls is already the newest version.
libcurl4-openssl-dev is already the newest version.
libcurl3 is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded. 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-23T07:07:41.980

我记得它使用 curl 库进行本地编译

所以你需要安装 curl 开发库尝试安装

```
sudo apt-get install libcurl4-openssl-dev 
```

或者

```
sudo apt-get install libcurl4-gnutls-dev 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-16T07:43:02.680

在 Fedora 上我做了`sudo yum install curl-devel` ，然后做了`gem install curb`，这对我有用

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-02T03:31:46.643

在*Ubuntu 18.04*中，使用

```
sudo apt install libcurl4-openssl-dev 
```

然后安装`curb`

```
gem install curb 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-05T10:22:09.177

在 Ubuntu 14.04 上，除了 PriteshJ 提到的 libcurl 包外，我还必须安装 ruby​​-dev 包才能使其工作：

> sudo apt-get install ruby​​-dev

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T08:14:05.167

在 Ubuntu 上，可以通过安装以下软件包来满足依赖关系：

```
$ sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev 
```

在红帽上：

```
$ sudo yum install ruby-devel libcurl-devel openssl-devel 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-23T03:25:08.937

我最近在带有 0.9.0 的 ubuntu 14.04 docker 映像上遇到了这个问题，并通过安装 libgmp-dev 解决了这个问题（除了已经提到的路边页面的建议：libcurl3 libcurl3-gnutls libcurl4-openssl-dev）。

# jquery - 根据属性值选择复选框

> ID：16162280
> 
> 赞同：0
> 
> 时间：2013-04-23T06:16:47.317
> 
> 标签：jquery

我有一个像这样的复选框

```
<input data-index="7" data-name="Sector-108" type="checkbox"> 
```

我想根据数据名称属性选择器**取消选中此复选框**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:19:20.143

您可以使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)

```
$('[data-name=Sector-108]').prop('checked',true); 
```

您可以使用以通配符[开头的属性选择器来获取所有具有类似名称的元素](http://api.jquery.com/attribute-starts-with-selector/)`Sector-`

```
$('[data-name^=Sector-]').prop('checked',false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:19:38.487

```
$('input[data-name=Sector-108]).removeProp('checked'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:20:18.483

您可以按如下方式使用它。

```
$('input').hasAttr('data-name').attr('checked','checked'); 
```

# jquery - 防止从选定元素获得焦点

> ID：16162285
> 
> 赞同：0
> 
> 时间：2013-04-23T06:17:00.030
> 
> 标签：jquery, html

我的网页中有一个 HTML 计算器。我想要做的是选择一个`input`字段，然后通过单击编号的`div`元素输入值，但是当我单击`input`和之后`div`，焦点来到`div`. 如何使用 jQuery 防止这种情况发生。

![HTML 计算器](https://i.stack.imgur.com/vTkDZ.png)

在下面的[小提琴](http://jsfiddle.net/tJ4ZT/1/)中，您会看到当我单击输入元素并尝试输入值时，焦点将离开！如何解决此问题并在输入字段中记录相关值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:46:05.837

在准备好的文档上定义一个变量

`var focusedInput;`

如果焦点更改为在focusedInput 中输入的任何输入存储

`focusedInput = $(this);`

在 div 点击写你的代码

`$('div.num-button').click( function(){`

`//some code here`

`$(focusedInput).focus(); //handle null exception`

`});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T14:18:47.863

我知道这已经很晚了，但是，如果其他人来看这个答案可能会有所帮助。

正如@anil 所说，创建一个变量，您可以在其中存储焦点输入。然后，当您专注于输入时，将元素存储在变量中。现在，当您单击“键盘”时，获取值并将其添加到焦点变量输入值中。

这是[我](https://jsfiddle.net/Ootred/k1ajfvg9/1/)从你原来的小提琴分支出来的小提琴。

这是代码：

```
var focused;
// Stored the input
$('input').focus(function() {
    focused = $(this);
});

// Listen for clicks on the number button
$('.num-button').click(function(){
    // Get the value of the number button that was clicked as string
    var intVal = $(this).find('span').text().toString();
    // Make sure that we have a focused input
    if(typeof focused != 'null' || typeof focused != 'undefined') {
        // Only add numbers to the input field
        if(intVal != "DONE" && intVal != "Del") {
            // Get the values as strings
            var curVal = focused.val().toString(),
                newVal = curVal + intVal;
            focused.val(newVal);
        } else if (intVal == "Del") {
            // Clear the value if the Del "key" was clicked.
            focused.val('');
        }
    }
}); 
```

# html - ruby中smtp的HTML格式发送邮件

> ID：16162286
> 
> 赞同：1
> 
> 时间：2013-04-23T06:17:14.847
> 
> 标签：html, ruby-on-rails, ruby, rubygems, smtp

我编写了一个 ruby​​ 脚本，通过读取文件的内容使用 smtp 发送邮件。一个文件的内容是：

```
+3456|0|2013-04-16|2013-04-19
+3456|0|2013-04-16|2013-05-19 
```

我发送邮件的代码如下：

```
content = File.read(file_name)   
message = << MESSAGE_END   
From: from@localdomain.com
To: to@localdomain.com
MIME-Version: 1.0
Content-type: text/html
Subject: SMTP e-mail test
Body
**HTML CODE to display the table with rows equal to the number of records in the file**
MESSAGE_END

Net::SMTP.start('localhost') do |smtp| 
  smtp.send_message message, 'from@localdomain.com','to@localdomain.com'
end 
```

现在我的问题是如何编写一个 html 代码来创建一个表，其行和列等于文件中的记录数（因为文件中的记录会相应变化）？文件中的记录总是'|' 分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:17:57.917

您可以使用[content_tag](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)助手和[String#split](http://ruby-doc.org/core-2.0/String.html#method-i-split)。例如：

```
def row_markup(row)
  content_tag(:tr) do
    row.map{ |elem| content_tag(:td, elem) }.reduce(:+)
  end
end

def table_markup(rows)
  content_tag(:table) do
    rows.map{ |row| row_markup(row.split("|")) }.reduce(:+)
  end
end 
```

然后打电话

```
table_markup(read_data_from_file.split("\n")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:27:37.093

假设您的输入文件位于`./input.txt`，那么您可以执行以下操作：

```
require 'builder'

html = Builder::XmlMarkup.new
html.table do
  File.open('./input.txt', 'r').each_line do |line|
   html.tr do
      line.chomp.split('|').each do |column|
        html.td column
      end
    end
  end
end

message << html.to_html 
```

# android - setcolor 在自定义列表视图中不起作用

> ID：16162287
> 
> 赞同：0
> 
> 时间：2013-04-23T06:17:25.423
> 
> 标签：android, android-layout, listview

单击列表项时，我想更改文本颜色。

我在 res/color/textcolor_selector 中创建了选择器文件，但是单击 textview 时不会更改 textcolor

下面是我的代码

```
TextView textView = (TextView) view.findViewById(R.id.txt);
            textView.setText(listArr[position]);

            textView.setTextColor(getResources().getColor(R.color.textcolor_selector)); 
```

textcolor_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_selected="true" android:color="@color/selectedcolor"  />
<item android:state_focused="true" android:color="@color/selectedcolor" />
<item android:state_pressed="true" android:color="@color/selectedcolor" />
<item android:color="@color/nonselectedcolor" />
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:27:27.457

而不是只传递一种颜色；

```
getResources().getColor(R.color.textcolor_selector) 
```

您应该改为通过 ColorStateList ；

```
getResources().getColorStateList(R.color.textcolor_selector) 
```

在您当前的实现中，您调用的是`TextView.setTextColor(int)`method 而不是`.setTextColor(ColorStateList)`.

# java - 什么是按位运算？

> ID：16162290
> 
> 赞同：2
> 
> 时间：2013-04-23T06:17:49.500
> 
> 标签：java, bitwise-operators

我正在研究名为《*Beginning Android Games* 》的书。我注意到的一件事是：

```
int action = event.getAction() & MotionEvent.ACTION_MASK;
int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK)
>> MotionEvent.ACTION_POINTER_ID_SHIFT; 
```

这是我第一次看到这样的变量，所以我不知道它的作用。我在 java 中运行代码并创建了一些示例。

如果我运行此代码：

```
 int i = 10 >> 500;
System.out.print("Answer " + i); 
```

答案是0？这是为什么？

如果我运行这段代码：

```
int i = 10 & 500;
System.out.print("Answer  " + i); 
```

起初我认为这是值的串联，所以我假设 i = 10500 但事实并非如此。答案是一样的。还是0？有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T06:22:24.830

& 是按位运算符，而 && 是条件运算符。您正在使用按位运算符。

AND 运算符指定必须对信号 A 和 B 都进行收费，才能对结果进行收费。因此，对字节 10 和 6 进行与运算得到 2，如下所示：

```
a = 0000 1010 (10)

b = 0000 0110 (6)
  ---- ----
r = 0000 0010 (2)  // a&b 
```

有关更多示例，请参见[此处：](http://www.informit.com/articles/article.aspx?p=30868&seqNum=4)

**按位和位移运算符**

```
~       Unary bitwise complement
<<      Signed left shift
>>      Signed right shift
>>>     Unsigned right shift
&       Bitwise AND
^       Bitwise exclusive OR
|       Bitwise inclusive OR 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:20:57.653

它们被称为[按位运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

1.

```
int i = 10 >> 500; 
```

是 10 位模式的有符号右移 500。在二进制数系统中，10 可以表示为 1010（在这种情况下忽略符号位）。将此处的每个位右移 500，将导致最终数字为 0。

2.

```
int i = 10 & 500; 
```

是 10 和 500.10 的位模式的逐位与在二进制数系统中可以表示为 1010 和 500 为 1 1111 0100（在这种情况下忽略符号位）。0 0000 1010 与 1 1111 0100 的每一位按位与结果为 0。

您可以使用`System.out.println(Integer.toBinaryString(number));`打印位模式和检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:41:56.673

为了理解位运算符，使用以 10 为底的数字并不是很有帮助，但最好使用以 2 为底的（二进制）。

因此，在您的第一个示例中，您正在获取数字 0b111110100 并将其向右移动 500 位。这会给你留下0。

相反，如果您将其右移一位，您将得到 0b11111010 或 250。或者两个位置 125。

在您的第二个示例中，您将使用数字 0b111110100 和 %1010 并将它们“与”在一起。这给出了 0，因为 and 运算符只为两个都有 1 的位置返回 1，而在你的情况下，没有一个。对于更说明性的示例，请尝试 18 和 2。这给出了 2。为什么？好吧，因为 0b10010 和 0b10 只有一个 1 相同，所以结果就是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:22:21.787

我认为您可以先阅读一些[java 运算符的](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)基础知识。

`>>`这不是连接运算符，它在 java 中的移位运算符。

> 有符号左移运算符“<<”将位模式左移，有符号右移运算符“>>”将位模式右移。位模式由左侧操作数给出，而要移位的位置数由右侧操作数给出。

`&`称为按位与

> 按位 & 运算符执行按位与运算。

# java - 使用 Selenium 播放和暂停视频

> ID：16162291
> 
> 赞同：1
> 
> 时间：2013-04-23T06:17:52.853
> 
> 标签：java, selenium, youtube, automation

我的目标是使用 selenium 自动播放/暂停网页上的 YouTube 视频。

如何使用 Selenium 的 Java 代码播放/暂停 YouTube 视频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:41:04.863

我是一个很酷的人，所以我会在这里发布一些代码。

```
driver.get("video link"); // open your browser at youtube video.

WebElement video = driver.findElement(By.id("id video")); // use the id of the video to find it

video.click(); // play the video

// implicite wait
//code .....

video.click(); // pause de video 
```

通过练习，您将添加一些条件，例如视频的长度栏是否完成获取另一个视频，否则为 blablabla 。

# algorithm - 自底向上 Makeheap 算法

> ID：16162295
> 
> 赞同：-2
> 
> 时间：2013-04-23T06:18:19.977
> 
> 标签：algorithm, heap

我一直在学习如何使用自下而上的 makeheap**算法**构建堆。我想知道是否有人可以告诉我以下内容是否正确？

所以堆有这些值： [10, 3, 4, 7, 8, 12]

所以我这样做了：-

![图片](https://i.stack.imgur.com/t9QwV.jpg)

我采取的步骤是否正确？这是makeheap算法对数组进行排序的方式吗？这是一个与编程 makeheap 算法相关的基于算法的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:40:02.703

不，这不是自下而上的方法。首先，您必须订购底部子堆 - (3,7,8) -> (8,7,3) 和 (4,12)->(12,4)。然后您可以订购顶部子堆 (10,8,12)->(12,8,10)

# javascript - 如何在页面加载时隐藏 iPad 栏？

> ID：16162302
> 
> 赞同：1
> 
> 时间：2013-04-23T06:18:40.760
> 
> 标签：javascript, jquery, ipad

我需要帮助如何在页面加载时隐藏 iPad 地址栏或顶部的整个栏。

我正在开发基于在线系统的客户管理系统，需要隐藏 iPad 地址栏，因为查看网站时会占用大量空间。

问候涡流

已经尝试了以下代码，但什么也没有。

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:34:07.177

iPad 的 Safari 的地址栏*只有*在您通过添加以下内容使您的网页成为“webapp”时才能隐藏：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/> 
```

并将其添加到主屏幕：

![](https://i.stack.imgur.com/FOGEu.png)

[http://jsfiddle.net/DerekL/djc8D/show](http://jsfiddle.net/DerekL/djc8D/show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:36:41.290

这会告诉 Safari 浏览器以全屏模式运行

`<meta name="apple-mobile-web-app-capable" content="yes">`

快乐编码:)

# javascript - 如何在以下情况下保留此关键字

> ID：16162304
> 
> 赞同：0
> 
> 时间：2013-04-23T06:18:48.077
> 
> 标签：javascript, jquery

我正在开发骨干应用程序。我正在使用调用函数的`mousedown`主干添加事件。我正在设置的`select`内部函数调用另一个函数。在功能中，我想使用. 但是，未定义，因为 this 不引用我当前的模块。**我怎样才能保留这个关键字，以便我可以在选择功能中使用它？**`select``timeout``selection``selection``currently clicked element``console.log(this.el)``this.el`

 **这是我的代码

```
 events: {
        'mousedown': 'select',
        'mouseup': 'deselect'
    },

    select: function () {
        this.timeoutId = setTimeout(this.selection, 1000);
    },

    deselect: function () {
        clearTimeout(this.timeoutId);
    },

    selection: function () {
        console.log(this.el);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:20:53.107

尝试：

```
var self = this;
self.timeoutId = setTimeout(function () {
    self.selection();
}, 1000); 
```

或者：

```
this.timeoutId = setTimeout(this.selection.bind(this), 1000); 
```

参考 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:22:29.643

你可以这样解决它：

```
select: function() {
    var self = this;
    this.timeoutId = setTimeout(function() {
        self.selection();
    }, 1000);
} 
```

许多浏览器也支持`bind`函数，它将对象绑定`this`到函数

```
select: function() {
    this.timeoutId = setTimeout(this.selection.bind(this), 1000);
} 
```**

# php - 将函数的开始日期和结束日期值存储到数组中

> ID：16162305
> 
> 赞同：0
> 
> 时间：2013-04-23T06:18:52.010
> 
> 标签：php, date, dateinterval

有人可以帮我将函数的开始日期和结束日期存储到数组中以供进一步处理。

下面的 php 代码将给出给定期间每个月的开始和结束日期。但我无法将这些值放入函数中的数组中。

PHP代码：

```
 <?php
    //Function to return out start and end dates of all months in a date range given

    function rent_range($start_date, $end_date)
    {
        $start_date = date("m/d/Y", strtotime($start_date));
        $end_date   = date("m/d/Y", strtotime($end_date));
        $start = strtotime($start_date);
        $end = strtotime($end_date);

        $month = $start;
        $months[] = date('Y-m', $start);
        while($month < $end) {
          $month = strtotime("+1 month", $month);
          $months[] = date('Y-m', $month);
        }

        foreach($months as $mon)
        {
            $mon_arr = explode( "-", $mon);
            $y = $mon_arr[0];
            $m = $mon_arr[1];
            $start_dates_arr[] = date("m/d/Y", strtotime($m.'/01/'.$y.' 00:00:00'));
            $end_dates_arr[] = date("m/d/Y", strtotime('-1 minute', strtotime('+1 month',strtotime($m.'/01/'.$y.' 00:00:00'))));
        }

        //to remove first month in start date and add our start date as first date
        array_shift($start_dates_arr);
        array_pop($start_dates_arr);
        array_unshift($start_dates_arr, $start_date);

        //To remove last month in end date and add our end date as last date
        array_pop($end_dates_arr);
        array_pop($end_dates_arr);
        array_push($end_dates_arr, $end_date);

        $result['start_dates'] = $start_dates_arr;
        $result['end_dates'] = $end_dates_arr;
        return $result;
    }

    $start_date = '2013-04-01';
    $end_date = '2014-03-31';
    $res = rent_range($start_date, $end_date);
    echo "<pre>";
    print_r($res);
    echo "</pre>";

    for($i=0; $i<11; $i++)
    {
    echo $res[$i]."<br>";
    }
    ?> 
```

我需要将上述函数的输出放在这样的数组中：所需的输出：

```
 $res[0]='04/01/2013'
    $res[1]='05/01/2013'
    -
    -
    -
    -
    -
    -
    $res[11]='03/01/2014'

    $res[12]='04/30/2013'
    $res[13]='05/31/2013'
    -
    -
    -
    -
    $res[24]='03/31/2014' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:09:53.597

请在函数中使用以下脚本

```
$result = array_merge($start_dates_arr, $end_dates_arr);
//$result['start_dates'][] = $end_dates_arr;
return $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:11:44.357

从您想要的评论中合并您的数组，

```
$new_res = array_merge($res['start_dates'],$res['end_dates']);
print_r($new_res); 
```

[演示。](http://codepad.viper-7.com/zHZAQu)

# c++ - 指向对象的指针的私有向量。如何使用 getter 方法访问这些对象？

> ID：16162309
> 
> 赞同：0
> 
> 时间：2013-04-23T06:19:16.163
> 
> 标签：c++, pointers, methods, vector, getter

我的程序是一个循环的六次迭代，其中八个人互相投票。每个人在每次迭代中投票给谁被保存到私有类成员`voteList`（指针向量）。

我的麻烦是，在六次迭代结​​束时，我希望能够使用`GetVote(int)`我编写的 public 方法说，例如，Anna 在每次投票中投票给了谁。

`*(voteList[round])`我认为应该是安娜在给定一轮中投票给谁的价值（一个人）？并且使用该`GetName()`方法应该检索该人姓名的字符串。但无论我如何摆弄它，每当我调用`GetVote()`.

我确定我犯了一个或多个非常愚蠢的错误，但我不知道问题出在哪里。任何输入将不胜感激！

```
#include <iostream>
#include <vector>
#include <random>
#include <time.h>
using namespace std;

enum gender { male, female };

class Person {
    private:
        string personName;
        gender personGender;
        vector<Person *> voteList;
    public:
        // Constructors
        Person (string, gender);
        // Setters
        void Vote (Person * target) {
            voteList.push_back (target); 
        };
        // Getters
        string GetName () { return personName; };
        string GetVote (int round)
        {
            Person ugh = *(voteList[round]);
            return ugh.GetName ();
        };
};

Person::Person (string a, gender b) {
    personName = a;
    personGender = b; }

void Voting (vector<Person> voters)
{
    for (int i = 0; i < voters.size(); i++) {
        int number = (rand() % voters.size());
        Person * myTarget = &voters[number];
        voters[i].Vote (myTarget);
        cout << voters[i].GetName() << " votes for " << voters[number].GetName() << endl;
    }
    cout << endl;
}

int main()
{
    srand(time(0));

    Person Anna ("Anna", female);
    Person Baxter ("Baxter", male);
    Person Caroline ("Caroline", female);
    Person David ("David", male);
    Person Erin ("Erin", female);
    Person Frank ("Frank", male);
    Person Gemma ("Gemma", female);
    Person Hassan ("Hassan", male);

    vector<Person> theGroup;
    theGroup.push_back (Anna);
    theGroup.push_back (Baxter);
    theGroup.push_back (Caroline);
    theGroup.push_back (David);
    theGroup.push_back (Erin);
    theGroup.push_back (Frank);
    theGroup.push_back (Gemma);
    theGroup.push_back (Hassan);

    for (int n = 0, iterations = (theGroup.size() - 2); n <= iterations; n++)
        Voting (theGroup);

    cout << "ANNA VOTED FOR...";
    for (int n = 0; n <= 5; n++)
    {
        cout << "Round " << (n + 1) << ": " << Anna.GetVote(n) << '\n';
    }

    cin.ignore();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:29:14.903

当您调用时，`voting`您传递了向量的*副本*，并且内容也将被复制。

您应该将此向量作为参考传递：

```
void Voting (vector<Person>& voters) { ... } 
```

您可能还想添加一些安全检查`GetVote`以确保调用者不会提供超出范围的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:34:03.267

首先，您要在`Person`各处复制对象。例如，将您的`Person`对象添加到`theGroup`向量时，以及再次将相同的向量传递给`Voting`函数时。

复制人在语义上没有任何意义。为了避免这种情况，您应该向您的`Person`类添加一个私有复制构造函数和赋值运算符：

```
private:
    Person(const Person& other);
    Person& operator=(const Person& rhs); 
```

接下来，您将不得不更改向量以使用`Person`指针：

```
 vector<Person *> theGroup;
    theGroup.push_back (&Anna);
    theGroup.push_back (&Baxter);
    theGroup.push_back (&Caroline);
    theGroup.push_back (&David);
    theGroup.push_back (&Erin);
    theGroup.push_back (&Frank);
    theGroup.push_back (&Gemma);
    theGroup.push_back (&Hassan); 
```

您可以使用`->`运算符调用指向对象的指针的方法，如下所示：

```
 string GetVote (int round)
    {
        Person *ugh = voteList[round];
        return ugh->GetName ();
    }; 
```

和：

```
void Voting (const vector<Person *>& voters)
{
    for (int i = 0; i < voters.size(); i++) {
        int number = (rand() % voters.size());
        Person *myTarget = voters[number];
        voters[i]->Vote (myTarget);
        cout << voters[i]->GetName() << " votes for " << voters[number]->GetName() << endl;
    }
    cout << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:28:06.040

```
void Voting (vector<Person> voters) 
```

您想将此作为参考。否则，当您获得 的地址时`voters[number]`，您将获得函数的局部变量的地址 - 一旦您尝试实际使用它，一切都会变得很糟糕。

```
void Voting (vector<Person> &voters) 
```

* * *

实际上这并不是问题所在，尽管这仍然与参考有关。您正在通过`vector`副本传递您的原件，这意味着原件`vector`（在`main`函数中）不会被函数的操作修改（当然，其内容也是如此）。所以，`Person`里面的所有 s 都有它们的原始状态，带有一个空的`voteList` `vector`。显然，如果您尝试取消引用它的任何（不存在的）元素，那将不会顺利！

# ios - 使用 ChatKit.framework 时出错

> ID：16162314
> 
> 赞同：1
> 
> 时间：2013-04-23T06:19:41.903
> 
> 标签：ios, jailbreak, iphone-privateapi

我在越狱项目中使用了 ChatKit.framework。编译项目时，出现如下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_xxxxx", referenced from:
      objc-class-ref in main.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我将 ChatKit.framework 添加到项目中。我可以错过什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:45:27.227

我明白了：这个功能在 iOS6 上被删除了。我的SDK是iOS6.1，换成iOS5 SDK就完成了。

# php - 用 php 替换一些标签的正则表达式

> ID：16162318
> 
> 赞同：0
> 
> 时间：2013-04-23T06:19:51.463
> 
> 标签：php, regex

我想替换一些类似`[b],[/b],[i],[/i],[h1],[/h1]`的标签。到目前为止，我已经这样做了：

```
preg_replace("'\[.*\]'i", "",$strmessage); 
```

现在它仍然有效。但是它`&lt;br&gt;`在替换时会插入一个eveytime。我只需要用空格替换这个标签。我没有`<br>`标记它现在总是插入的东西。我认为它需要小的修改。提前致谢 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:02:09.457

使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)它会让你的生活变得一团糟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:22:24.897

```
preg_replace('{\[.*?\]}i', "",$strmessage); 
```

它会删除 [ ] 中的任何内容

# ajax - 在ajax中将表单发送到控制器

> ID：16162321
> 
> 赞同：0
> 
> 时间：2013-04-23T06:20:09.090
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery

这是我的表格

```
<form id="postProblemForm" action="/Problems/Post"  method="post" enctype="multipart/form-data">
            <input type="text" id="problemSubject" name="problemSubject" class="inp-form"/>
            <input type="file" id="uploadFile" name="uploadFile"/>
            <textarea rows="" cols="" class="form-textarea" id="problemDescription" name="problemDescription"></textarea>
            <input type="submit" value="Post" id="btnPostProblem"  style="width:70px;"/>

    </form> 
```

以下是JS

```
$("#postProblemForm").submit(function (event) {
                event.preventDefault();
                var $this = $(this);
                var url = $this.attr('action');
                var dataToSend = $this.serialize();
                var callBack = function (isPosted) {
                                    if (isPosted) { alert("posted successfully"); } }
                $.get(url,dataToSend,callBack);

            }); 
```

以下是控制器代码

```
[HttpPost]
        public bool Post(FormCollection form) 
        {
            string subject = form["problemSubject"];
            string description = form["problemDescription"];
            var image = WebImage.GetImageFromRequest();

            return true;

        } 
```

但是控制器方法没有被调用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:23:49.177

您不能使用 AJAX 上传文件。我看到您的表单包含文件输入，但这不适用于 AJAX。此外，您正在使用`$.get`您可能想要`$.post`的内容。您的操作的另一个问题是它应该返回一个 ActionResult 而不是布尔类型。例如，您可以返回一个 JsonResult 来解决问题。

如果您希望能够使用表单上传文件，您可以使用客户端上传插件，例如[`Uploadify`](http://www.uploadify.com/),[`Fine Uploader`](http://fineuploader.com/)或[`jQuery.form plugin`](http://malsup.com/jquery/form/).

例如，使用 jQuery.form 插件时您的代码可能看起来如何：

```
$('#postProblemForm').ajaxForm(function(isPosted) {
    if (isPosted) { 
        alert('posted successfully');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:23:30.323

您正在执行一个`GET`接受`POST`请求的控制器方法。您需要将其更改为：

```
$.post(url,dataToSend,callBack); 
```

# ios6 - ScrollView 页面指示器未出现

> ID：16162322
> 
> 赞同：3
> 
> 时间：2013-04-23T06:20:12.303
> 
> 标签：ios6, uiscrollview, pagination, splash-screen

我是**IOS**新手，所以请帮我指导这个问题。

我正在处理三个视图，它们打开由`scroll view`和连接的三个不同图像`pagination`。我正在使用**XIB**来获取分页逻辑和滚动视图。

我面临两个问题：

1.  我无法让页面指示器以不同的视图出现在屏幕上

2.  一旦到达第三个视图，我发现很难移动到下一个视图控制器。

我正在关注 Ray Wanderlich 的本[教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)。一旦用户尝试在到达最后一页时滑动到下一页，我对在哪里添加代码以移动到下一个视图控制器感到震惊。

我的代码是这样的：

```
- (void)viewDidLoad {
[super viewDidLoad];

   self.navigationController.navigationBarHidden =YES;
// Set up the image we want to scroll & zoom and add it to the scroll view
self.pageImages = [NSArray arrayWithObjects:
                   [UIImage imageNamed:@"IMAGE1.png"],
                   [UIImage imageNamed:@"IMAGE2.png"],
                   [UIImage imageNamed:@"IMAGE3.png"],
                  // [UIImage imageNamed:@"photo4.png"],
                  // [UIImage imageNamed:@"photo5.png"],
                   nil];

NSInteger pageCount = self.pageImages.count;

// Set up the page control
self.pageControl.currentPage = 0;
self.pageControl.numberOfPages = pageCount;

// Set up the array to hold the views for each page
self.pageViews = [[NSMutableArray alloc] init];
for (NSInteger i = 0; i < pageCount; ++i) {
    [self.pageViews addObject:[NSNull null]];
} 
```

}

```
- (void)loadVisiblePages {
// First, determine which page is currently visible
CGFloat pageWidth = self.scrollView.frame.size.width;
NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

// Update the page control
self.pageControl.currentPage = page;

NSLog(@"One %d",page);

if (page == 2) {

    page = 3;

    if(page == 3){
         NSLog(@"Working");

        SignInViewController *view = [[SignInViewController alloc]initWithNibName:@"SignInViewController" bundle:nil];
        [self.navigationController pushViewController:view animated:NO];
        [view release];
        view=nil;
    }

}

// Work out which pages we want to load
NSInteger firstPage = page - 1;
NSInteger lastPage = page + 1;

// Purge anything before the first page
for (NSInteger i=0; i<firstPage; i++) {
    [self purgePage:i];
}

    // Load pages in our range
for (NSInteger i=firstPage; i<=lastPage; i++) {
    [self loadPage:i];

}

    // Purge anything after the last page
for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
    [self purgePage:i];

} 
```

}

我试图将我的视图控制器的行添加为：

```
SignInViewController *view = [[SignInViewController alloc]initWithNibName:@"SignInViewController" bundle:nil];
            [self.navigationController pushViewController:view animated:NO];
            [view release];
            view=nil; 
```

但这会使第三张图像消失，并在`SignInView`用户尝试从第二张图像滑动到第三张图像时直接将用户带到我的控制器页面。

我应该怎么做才能让用户看到第三张图像，然后检测到滑动并移动到下一个带有动画的视图控制器。我尝试使用滑动动画和检测，但它对我不起作用。我需要在哪里编码以及如何提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:28:21.560

I think it might be late to reply but may be you still might be struck and need help then here is the solution to your second issue:

Answer to part 2.->

try and add this code

```
if (page == 2) {

    page = 3;

    if(page == 3){

        NSLog(@"content ofset--  %f",self.scrollView.contentOffset.x);

        if (self.scrollView.contentOffset.x>=700)
        {
            SignIn2ViewController *view = [[SignIn2ViewController alloc]initWithNibName:@"SignIn2ViewController" bundle:nil];
            [self.navigationController pushViewController:view animated:NO];
            [view release];
            view=nil;
        }

    }
} 
```

You can check for the offset's value to according to your need. may be this works for u.

and answer to part 1\. -->try to read Ray Wanderlich tutorial again and check the settings of XIB you might have skipped some information to be added on outlets or page indicators.

Hope it works for you.

# macos - Java 7 OSX 打印是否损坏？

> ID：16162329
> 
> 赞同：3
> 
> 时间：2013-04-23T06:20:40.267
> 
> 标签：macos, printing, java-7

我有几个现有的打印文档的 Java 应用程序。自 Java 7 升级以来，在 OSX 上的打印似乎被破坏了。在 Windows Java 6 和 Java 7 上一切正常。打印也在 OSX Java 6 上工作，但在 OSX Java 7 上却不行。

我也向甲骨文报告过，但没有收到任何回复。

为了简单起见，我下载了[Oracle 打印示例](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/2d/printing/examples/HelloWorldPrinter.java)并进行了测试。

![操作系统 Java 6](https://i.stack.imgur.com/DvbQs.png)

![操作系统 Java 7](https://i.stack.imgur.com/a43cC.png)

```
/* Now we perform our rendering */
g.drawString ("Hello world!", 100, 100);

String fontName = "Monospaced";

g2d.setFont (new Font (fontName, Font.PLAIN, 8));
g2d.drawString ("Hello world - 8 point", 100, 130);

g.setFont (new Font (fontName, Font.PLAIN, 18));
g.drawString ("Hello world - 18 point", 100, 160);

g.setFont (new Font (fontName, Font.PLAIN, 30));
g.drawString ("Hello world - 30 point", 100, 190); 
```

# android - android文本框上的验证

> ID：16162332
> 
> 赞同：0
> 
> 时间：2013-04-23T06:20:51.807
> 
> 标签：android, android-edittext

我有一个`EditText`用户应该放置 IP 地址的位置，例如**192.168.21.212**。如何为此添加验证？我试过

`android:inputType="numberDecimal"`

但它只允许一个.（点）。如何让它允许三个点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:23:00.797

在 xml 中的 EditText 中，添加`android:digits="0123456789.,! etc"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:26:05.690

试试这个 ：

```
 <EditText
            android:id="@+id/ip_ed_txt"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:digits="0123456789."
            android:inputType="number" >
        </EditText> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:25:17.010

您可以使用具有[isValidInet4Address(String)的 Apache Commons](http://commons.apache.org/proper/commons-validator/apidocs/src-html/org/apache/commons/validator/routines/InetAddressValidator.html#line.71) [InetAddressValidator类](http://commons.apache.org/proper/commons-validator/apidocs/src-html/org/apache/commons/validator/routines/InetAddressValidator.html#line.34)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:23:42.867

您需要`Textwatcher`该 textview 对象。您可以通过

> 文本观察器

界面。

Android 中没有用于 IP 地址验证的 inputType。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:26:15.120

您需要创建自己的 InputFilter：http: [//developer.android.com/reference/android/text/InputFilter.html](http://developer.android.com/reference/android/text/InputFilter.html)

```
EditText text = new EditText(this);
    InputFilter[] filters = new InputFilter[1];
    filters[0] = new InputFilter() {
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            if (end > start) {
                String destTxt = dest.toString();
                String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                if (!resultingTxt.matches ("^\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3})?)?)?)?)?)?")) { 
                    return "";
                } else {
                    String[] splits = resultingTxt.split("\\.");
                    for (int i=0; i<splits.length; i++) {
                        if (Integer.valueOf(splits[i]) > 255) {
                            return "";
                        }
                    }
                }
            }
        return null;
        }
    };
    text.setFilters(filters); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T06:26:29.787

当用户提交编辑文本时，您可以在代码中检查它。

可能是这样的吗？：

```
public boolean DotValidator(String text) {
    int anumOfDots = 0;

    for (int i = 0; i < text.length(); i++) {
        if (text.charAt(i) == '.') {
            anumOfDots++;
        }
    }
    if (anumOfDots == 3) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T06:29:28.057

**IP 地址验证器**

```
private static final String PATTERN = 
    "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$";

public static boolean validate(final String ip){          
  Pattern pattern = Pattern.compile(PATTERN);
  Matcher matcher = pattern.matcher(ip);
  return matcher.matches();             
} 
```

# r - 将 data.frame 从 R 插入到 Mongodb

> ID：16162342
> 
> 赞同：4
> 
> 时间：2013-04-23T06:21:49.037
> 
> 标签：r, mongodb, rmongodb

我有一个 Twitter 数据**CSV**文件，我使用 R 读取了该文件`read.table`，然后我对该数据执行了一些算法并将输出作为表格数据。我想将此表格数据插入到`mongodb`. 任何人都可以帮忙吗？

表格数据如下所示：

```
pqr
          V2                          V1      V3          V4     polarity   emotion
    1  342521635332_318304224958367   FB   2013-03-15   6:43 PM   positive    <NA>
    2  342521635332_325506614238815   FB   2013-03-08   8:23 PM   neutral     sad
    3  342521635332_347654842010216   FB   2013-02-22   8:13 PM   positive    <NA>
    4  342521635332_567940913224072   FB   2013-02-22   6:27 PM   neutral     <NA>
    5  342521635332_318826431554118   FB   2013-02-22   2:22 PM   positive    joy
    6  342521635332_215298638612191   FB   2013-02-20   8:09 PM   negative    angry
    7  342521635332_407970722630311   FB   2013-02-15   8:48 PM   neutral     joy

mongo.insert(m,'abc.xyz',pqr) 
```

当我执行时`mongo insert`，数据被插入，`mongodb`但数据在 mongodb 中看起来像这样。

```
db.xyz.find()
    { "_id" : ObjectId("5176273533da42cdbe49f2c5"), "V2" : [ 3, 5, 6, 9, 4, 2, 7, 1, 10, 8 ], "V1" : [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ], "V3" : [ 6, 5, 4, 4, 4, 3, 2, 1, 1, 1 ], "V4" : [ 5, 8, 7, 4, 1, 6, 10, 9, 3, 2 ], "polarity" : [ 3, 2, 3, 2, 3, 1, 2, 2, 3, 1 ], "emotion" : [  -2147483648,    -2147483648,    -2147483648,    -2147483648,    -2147483648,    -2147483648,    1,  -2147483648,    -2147483648,    -2147483648 ] } 
```

我需要将数据插入到 mongodb 中，类似于表格数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-17T15:28:56.573

首先将数据帧转换为 BSON——

`b=mongo.bson.from.df(df)`然后

使用--加载 mongo 集合

```
mongo.insert(mongo,ns,b) 
```

# cakephp - CakePHP 2.3 - 保存相关模型数据

> ID：16162343
> 
> 赞同：0
> 
> 时间：2013-04-23T06:21:54.623
> 
> 标签：cakephp, validation, cakephp-model, cakephp-2.3

我正在尝试遵循食谱中的约定，但没有运气。我烘焙了所有 CRUD 和模型关联，需要自定义管理员添加视图（管理员有 1 个用户）。当我尝试验证时，我收到了管理员模型的相应错误消息，但没有收到用户模型的错误消息。这是我用于表格的内容...

```
/* User Data */
echo __('<h3>Setup Login Information</h3>');
echo $this->Form->input('User.0.username');
echo $this->Form->input('User.0.password',  array('type'=>'password'));
echo $this->Form->input('User.0.password_confirm',  array('type'=>'password'));
echo $this->Form->input('User.0.user_role_id' );

/* Administrator Data */
echo __('<h3>User Information</h3>');
echo $this->Form->input('Administrator.first_name');
echo $this->Form->input('Administrator.last_name');
echo $this->Form->input('Administrator.title');
echo $this->Form->input('Administrator.email_address');
echo $this->Form->input('Administrator.phone_number'); 
```

这是我在控制器中设置的...

```
if( !empty($this->request->data) ) {
    // Use the following to avoid validation errors:
    unset($this->Administrator->User->validate['Administrator_id']);
    $this->Administrator->saveAssociated($this->request->data);
}

$users = $this->Administrator->User->find('list');
$userRoles = $this->User->UserRole->find('list');
$this->set(compact(array('users', 'userRoles'))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:02:25.760

如果管理员有 1 个用户，则无需在表单输入中指定索引：

```
echo $this->Form->input('User.0.username');
echo $this->Form->input('User.0.password',  array('type'=>'password'));
echo $this->Form->input('User.0.password_confirm',  array('type'=>'password'));
echo $this->Form->input('User.0.user_role_id' ); 
```

实际上应该是：

```
echo $this->Form->input('User.username');
echo $this->Form->input('User.password',  array('type'=>'password'));
echo $this->Form->input('User.password_confirm',  array('type'=>'password'));
echo $this->Form->input('User.user_role_id' ); 
```

# android - 如何在垂直 ScrollView 上添加水平滑动手势？

> ID：16162345
> 
> 赞同：1
> 
> 时间：2013-04-23T06:22:01.797
> 
> 标签：android, gesture

我以这种形式定义了布局：

```
<ScrollView
--------->

   <RelativeLayout
    ------->
   <!--other n stuffs-->
   </RelativeLyout>
</ScrollView> 
```

我正在使用[这种](https://stackoverflow.com/a/16033174/1310152)方法来检测滑动。这同样不适用于 ScrollView。如何在此视图中检测从左到右和从右到左的手势？

# c++ - 从 WAV 文件 c++ 中获取实数值

> ID：16162353
> 
> 赞同：1
> 
> 时间：2013-04-23T06:22:28.930
> 
> 标签：c++, c, audio, voice, voice-recognition

所以我正在做一个非常重要的学校项目。我现在知道如何从 WAVE 文件中读取所有内容，包括数据。问题是我不仅需要真实的~数据值，还需要符号。该文件为 16 bps，但我不知道如何获得实际值，例如 -365 或 +19934。这就是我到目前为止所做的

> > leer = fread(&sbyte, 1, X, 音频);

我应该输入什么数字而不是“X”。4？

我将 sbyte 定义为有符号字符，但有符号字符仅从 -128 变为 127，这意味着它没有给我所需的信息。

我需要这些数字来做一些分析。如果你能在这里帮助我，因为我太迷路了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:28:18.830

从这个页面：[https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

16 位样本存储为 2 的补码有符号整数，范围从 -32768 到 32767。

在这种情况下，您想使用 16 位数据类型，在 C++/C 中是`short`

```
short data;
fread(&data, sizeof(short), 1, audio); 
```

这将为您读取 2 个字节，并将它们存储在 short 中。您将希望循环执行此操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:27:28.637

首先，您需要读取`header`前 44 个字节中的信息，如以下链接所示： [https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

从那里，您可以获取`BitsPerSample`并将读取的字节转换为`short`整数（如果`char`它是 16、8 或`int`32）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T07:04:08.753

```
short[] data = new short[NumSamples * NumChannels];
fread(data, sizeof(short), NumSamples * NumChannels, audio); 
```

# css - 将 Wrap Bootstrap 主题与 Ruby on Rails 集成

> ID：16162356
> 
> 赞同：6
> 
> 时间：2013-04-23T06:22:37.743
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap

我需要帮助在 Rails 中集成 wrap Bootstrap 主题。如果它不要求太多，一步一步更深入会很棒。我总觉得留下了一些小细节。

我购买了[http://wrapbootstrap.com/preview/WB02634G3](http://wrapbootstrap.com/preview/WB02634G3)并且无法让某些样式/JavaScript 正常工作。

*   我已将所有文件添加到相应的资产文件夹中，并尝试在 application.js/application.css 文件中要求每个文件名。就像下面这个例子。

> //= 需要主题

*   对于图像，我已将它们重命名为“/assets/showcase1.png”。在某些情况下，我发现这种格式也适用“../images/showcase.png”

这是我的 application.html.erb 文件的样子。

```
<!DOCTYPE html>

<html>

 <head>
  <title>DPL</title>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <%=s tylesheet_link_tag "application", :media=>"all" %>
      <%=j avascript_include_tag "application" %>
      <%=c srf_meta_tags %>
      <!-- Styles -->
       <link href="css/bootstrap.css" rel="stylesheet">
       <link rel="stylesheet" type="text/css" href="css/theme.css">
       <link rel="stylesheet" href="css/index.css" type="text/css" media="screen" />
       <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
       <link rel="stylesheet" type="text/css" href="css/lib/animate.css" media="screen, projection">
 </head>

 <body>

   <body class="pull_top">
     <div class="navbar transparent navbar-inverse navbar-fixed-top">
       <div class="navbar-inner">
         <div class="container">
         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         </a>
         <a class="brand" href="index.html">
         <strong>DPL</strong>
         </a>

       <div class="nav-collapse collapse">
         <ul class="nav pull-right">
            <li><a href="index.html" class="active">HOME</a></li>
            <li><a href="about-us.html">ABOUT US</a></li>
            <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            PAGES
            <b class="caret"></b>
            </a>

         <ul class="dropdown-menu">
            <li><a href="features.html">Features</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="portfolio-item.html">Portfolio Item</a></li>
            <li><a href="coming-soon.html">Coming Soon</a></li>
            <li><a href="sign-in.html">Sign in</a></li>
            <li><a href="sign-up.html">Sign up</a></li>
            <li><a href="backgrounds.html">Backgrounds</a></li>
         </ul>
            </li>
            <li><a href="pricing.html">PRICING</a></li>
            <li><a href="contact.html">CONTACT US</a></li>
            <li><a href="blog.html">BLOG</a></li>
            <li><a class="btn-header" href="sign-up.html">Sign up</a></li>
            <li><a class="btn-header" href="sign-in.html">Sign in</a></li>
         </ul>
          </div>
      </div>
     </div>
    </div>
    <div class="container">
                <%=y ield %>
            </div>
        </body>

</html> 
```

我已将这些添加到我的 gem 文件中。

```
gem 'libv8'
gem 'twitter-bootstrap-rails'
gem 'bootswatch-rails' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-27T13:42:41.703

[这里](http://joanswork.com/wrapbootstrap-theme-to-rails/)有一篇有用的博客文章，它应该详细说明将主题集成到资产管道时的总体方向。我不得不这样做几次，总的来说，这就是我学到的：

### 一

在你的 app/vendor 目录中保留一个文件夹，让整个主题*完全*保持原样。就像*app/vendor/templates/theme*这样的东西。（不过，不要忘记在您的 .gitignore 文件中包含 vendor/template/* - 这仅供参考。）这样，无论发生什么，您都可以掌握整个主题。不要将文件实际移动到应用程序的资产路径中，而是*复制*它们。

### 二

不要将您的主题资产存储在 app/assets 中。将它们存储在供应商资产中。如果您还在供应商目录中创建清单文件，它可能会帮助您保持更有条理，例如：

```
+ vendor
  - assets
    - stylesheets
      - vendor_sheets.css 
```

然后在*vendor_sheets.css*：

```
/*
 *= require vendor stylesheets
 */ 
```

然后在*assets/stylesheets/applications.css*：

```
/*
 * ...
 *= require vendor_sheets
 */ 
```

Rails 会知道去寻找供应商。然后，您向自己保证不编辑任何供应商文件，除非*绝对必要*- 只要您`require vendor_sheets`在*application.css*中需要您自己的任何样式表，您就可以简单地用您自己的样式覆盖主题的样式。

### 三

首先翻译*一个 html 页面*。不要只是将主题中的所有内容都转移到资产管道中并假设它会起作用。相反，以*index.html*文件为例，然后将*index.html*`link`文件中编辑的每个样式表复制到*vendor/assets/stylesheets*中，并将它们复制到您的*vendor_sheets.css*文件**中，其顺序与指定的完全相同在*****index.html*****文件**中。**`*=require`**

 ***不要做`require_tree`。明确要求文件。这保证了正确的顺序。

### 四

**Inspect Element**是您最好的朋友。看看你的消息来源。确保它们已加载，并且以正确的顺序加载。经常检查您的控制台是否有错误。如果您专注于正确加载样式表，请忽略图像警告和 javascript 警告。一心一意。

### 五

对待 JavaScript 文件的方式与对待样式表的方式相同。*在vendor/assets/javascripts*中创建一个*vendor_scripts.js*清单文件，然后将该清单文件包含在*assets/application.js*中。确保在 Rails 默认设置之后包含此文件，例如 jQuery 和 Turbolinks（我将在稍后介绍），但在您自己的任何自定义脚本之前。同样，检查元素以确保包含所有 JavaScript 文件，并且顺序正确。

 **### 六

图像可能很棘手。将您需要的图像复制到*vendor/assets/images*中。您需要进入*config/application.rb*并将*vendor/assets/images*添加到您的资产路径中，如下所示：

```
config.assets.paths << Rails.root.join("app", "assets", "vendor/assets/images") 
```

重新启动您的服务器。

### 七

进入您的供应商/样式表文件，并一一搜索它们`url('`。替换`url('path/to/image/file_name.ext')`为`image_path('file_name')`。对字体也执行第 6 步和第 7 步，使用`vendor/assets/fonts`您的目录，而不是`image_path`使用 `asset_path('file_name.ext')。任何需要执行此操作的样式表，将“scss”附加到文件名，这样如果之前是*styles.css*，现在是*styles.css.scss*。

尽管您的加载路径在生产中会发生变化，但您可以将许多帮助程序与 Rails 默认随附的*sass-rails gem 一起使用，以查找资产。*使用它们，否则您最终可能会在 localhost 中运行所有内容，然后在部署后完全崩溃。

[以下](https://stackoverflow.com/questions/15257555/how-to-reference-images-in-css-within-rails-4)是有关 Rails 4 中图像引用的一些讨论，您可能会发现它们很有帮助。

### 八

尽可能从模板*.html*文件中复制和粘贴 HTML 。这样可以最大限度地减少错别字。但是，也要彻底阅读它，并尝试很好地掌握如何使用可用的东西。

### 九

*Turbolinks*：如果您的 JavaScript 仍然无法正常工作，Turbolinks 可能会妨碍您。您可以只禁用 Turbolinks，但是……您真的不必这样做，Turbolinks 会加快您网站的感觉，因此没有理由摆脱它。但是您确实需要稍微修改一下您的 JavaScript。任何以以下开头的 JavaScript 文件：

```
$(document).on('ready', function() { 
```

需要改为

```
$(document).ready(function() { 
```

[这](https://stackoverflow.com/questions/23451832/javascript-not-working-changing-image-to-text-on-click)是关于 Turbolinks 的有用讨论，以及如何解决它。

* * *

好的，除此之外，我还注意到您的*application.html.erb*文件存在一些问题：

```
 <%=s tylesheet_link_tag "application", :media=>"all" %>
  <%=j avascript_include_tag "application" %>
  <%=c srf_meta_tags %>
  <!-- Styles -->
   <link href="css/bootstrap.css" rel="stylesheet">
   <link rel="stylesheet" type="text/css" href="css/theme.css">
   <link rel="stylesheet" href="css/index.css" type="text/css" media="screen" />
   <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
   <link rel="stylesheet" type="text/css" href="css/lib/animate.css" media="screen, projection"> 
```

具体来说`<%=s tylesheet`,`<%=j avascript`和`<%=c srf`应该是破坏性的东西。你需要`<%= stylesheet`,`<%= javascript`和`<%= csrf`分别在这里。

最重要的是，*不要在标题中包含指向内部样式表的链接*。如果您在*application.css*中正确要求文件，它们将被包含在内。唯一的例外是 Google 字体。

我还看到您确实删除了 Turbolinks。这不是必需的，甚至不是真正可取的。

祝你的主题好运。*****

# java - 事务隔离级别与表上的锁的关系

> ID：16162357
> 
> 赞同：120
> 
> 时间：2013-04-23T06:22:40.473
> 
> 标签：java, transactions, isolation-level

我已经阅读了大约 4 个隔离级别：

```
Isolation Level       Dirty Read    Nonrepeatable Read  Phantom Read  
READ UNCOMMITTED      Permitted       Permitted           Permitted
READ COMMITTED              --        Permitted           Permitted
REPEATABLE READ             --             --             Permitted
SERIALIZABLE                --             --              -- 
```

**我想了解**每个事务隔离对表的锁定

```
READ UNCOMMITTED - no lock on table
READ COMMITTED - lock on committed data
REPEATABLE READ - lock on block of sql(which is selected by using select query)
SERIALIZABLE - lock on full table(on which Select query is fired) 
```

以下是事务隔离中可能出现的三种现象
*Dirty Read* - no lock
*Nonrepeatable Read* - no dirty read as lock on commited data
*Phantom Read* - lock on block of sql（通过select查询选择）

**我想了解**我们在哪里定义这些隔离级别：仅在 jdbc/hibernate 级别或 DB 中

PS：我已经浏览了[oracle 中的隔离级别中](https://stackoverflow.com/questions/13647604/isolation-levels-in-oracle)的链接，但它们看起来很笨拙并且谈论特定于数据库的内容

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-04-23T06:26:52.147

> **我想了解**每个事务隔离对表的锁定

例如，您有 3 个并发进程 A、B 和 C。A 启动事务、写入数据和提交/回滚（取决于结果）。B 只是执行一条`SELECT`语句来读取数据。C 读取和更新数据。所有这些过程都在同一张表 T 上工作。

*   **READ UNCOMMITTED** - 表上没有锁。您可以在写表的同时读取表中的数据。这意味着 A 写入数据（未提交），B 可以读取此未提交数据并使用它（用于任何目的）。如果 A 执行回滚，B 仍然读取并使用了数据。这是处理数据的最快但最不安全的方式，因为可能会导致物理上不相关的表中出现数据漏洞（是的，两个表在现实世界的应用程序中可以在逻辑上但在物理上不相关=\）。
*   **READ COMMITTED** - 锁定已提交的数据。您可以读取仅提交的数据。这意味着 A 写入数据而 B 无法读取 A 保存的数据，直到 A 执行提交。这里的问题是 C 可以更新在 B 上读取和使用的数据，而 B 客户端将没有更新的数据。
*   **REPEATABLE READ** - 锁定一个 SQL 块（使用 select 查询选择）。这意味着B在某些条件下读取数据，即`WHERE aField > 10 AND aField < 20`A插入`aField`值在10到20之间的数据，然后B再次读取数据并得到不同的结果。
*   **SERIALIZABLE** - 锁定一个完整的表（在其上触发 Select 查询）。这意味着，B 读取数据并且**没有其他事务可以修改**表上的数据。这是处理数据的最安全但最慢的方式。另外，由于一个简单的读操作锁定**了表**，这会导致生产上的严重问题：假设 T 表是一个 Invoice 表，用户 X 想知道当天的发票，用户 Y 想创建一个新发票，所以当 X 执行发票的读取时，Y 不能添加新的发票（当涉及到钱时，人们真的很生气，尤其是老板）。

> **我想了解**我们在哪里定义这些隔离级别：仅在 JDBC/休眠级别或 DB 中

使用 JDBC，您可以使用[`Connection#setTransactionIsolation`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#setTransactionIsolation(int)).

使用休眠：

```
<property name="hibernate.connection.isolation">2</property> 
```

在哪里

*   1：读取未提交
*   2：读已提交
*   4：可重复读取
*   8：可序列化

Hibernate 配置取自[这里](http://federicovarela.blogspot.com/2008/01/isolation-level-en-hibernate.html)（对不起，它是西班牙语）。

顺便说一句，您也可以在 RDBMS 上设置隔离级别：

*   [MySQL隔离级别](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)，
*   [SQL Server 隔离级别](http://msdn.microsoft.com/en-us/library/ms173763(v=sql.110).aspx)
*   [Informix 隔离级别](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst239.htm)（个人注意：我永远不会忘记`SET ISOLATION TO DIRTY READ`句子。）

不断...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-26T17:18:59.540

正如 brb tea 所说，取决于数据库实现和他们使用的算法：MVCC 或两相锁定。

CUBRID（开源 RDBMS）[解释](http://www.cubrid.org/blog/cubrid-life/all-about-two-phase-locking-and-a-little-bit-mvcc/)了这两种算法的思想：

> *   两相锁定 (2PL)
> 
> 第一个是当T2事务试图改变A记录时，它知道T1事务已经改变了A记录并等待直到T1事务完成，因为T2事务无法知道T1事务是提交还是滚动背部。这种方法称为两相锁定 (2PL)。
> 
> *   多版本并发控制（MVCC）
> 
> 另一种是允许它们中的每一个，T1 和 T2 事务，都有自己的更改版本。即使 T1 事务将 A 记录从 1 更改为 2，T1 事务仍保持原值 1 并写入 A 记录的 T1 事务版本为 2。然后，以下 T2 事务更改 A 记录从1到3，不是从2到4，写A记录的T2事务版本是3。
> 
> 当T1事务回滚时，T1事务版本2是否不应用于A记录也没关系。之后，如果提交了 T2 事务，则 T2 事务版本 3 将应用于 A 记录。如果 T1 事务在 T2 事务之前提交，则 A 记录更改为 2，然后在提交 T2 事务时更改为 3。最终的数据库状态与独立执行每个事务的状态相同，对其他事务没有任何影响。因此，它满足 ACID 属性。这种方法称为多版本并发控制（MVCC）。

MVCC 允许并发修改，但会增加内存开销（因为它必须维护相同数据的不同版本）和计算（在 REPETEABLE_READ 级别，您不能丢失更新，因此它必须检查数据的版本，例如 Hiberate与[Optimistick Locking](http://docs.jboss.org/hibernate/orm/5.0/manual/en-US/html/ch13.html#transactions-optimistic)一起使用）。

在 2PL[事务隔离级别中控制以下内容](https://msdn.microsoft.com/en-us/library/ms378149%28v=sql.110%29.aspx)：

> *   读取数据时是否加锁，请求什么类型的锁。
>     
>     
> *   持有读锁的时间。
>     
>     
> *   一个读操作是否引用了另一个事务修改的行：
>     
>     
>     *   阻塞直到行上的排他锁被释放。
>         
>         
>     *   检索语句或事务开始时存在的行的提交版本。
>         
>         
>     *   读取未提交的数据修改。
>         
>         
> 
> 选择事务隔离级别不会影响为保护数据修改而获取的锁。无论为该事务设置的隔离级别如何，事务总是对其修改的任何数据获得排他锁并持有该锁直到事务完成。对于读操作，事务隔离级别主要定义免受其他事务修改影响的保护级别。
> 
> **较低的隔离级别会增加许多用户同时访问数据的能力，但会增加**用户可能遇到的并发影响的数量，例如脏读或丢失更新。

[SQL Server](https://msdn.microsoft.com/en-us/library/ms173763.aspx)中锁和隔离级别之间关系的具体示例（使用 2PL，除了 READ_COMMITED 和 READ_COMMITTED_SNAPSHOT=ON）

*   READ_UNCOMMITED：不发出共享锁，防止其他事务修改当前事务读取的数据。READ UNCOMMITTED 事务也不会被排他锁阻塞，排他锁会阻止当前事务读取已修改但未由其他事务提交的行。[...]

*   READ_COMMITED：

    *   如果 READ_COMMITTED_SNAPSHOT 设置为 OFF（默认值）：使用共享锁来防止其他事务在当前事务正在运行读取操作时修改行。共享锁还阻止语句读取其他事务修改的行，直到其他事务完成。[...] 在处理下一行之前释放行锁。[...]
    *   如果 READ_COMMITTED_SNAPSHOT 设置为 ON，则数据库引擎使用行版本控制为每个语句提供数据的事务一致快照，因为它在语句开始时就存在。锁不用于保护数据不被其他事务更新。
*   REPETEABLE_READ：共享锁被放置在事务中每个语句读取的所有数据上，并一直保持到事务完成。

*   SERIALIZABLE：范围锁放置在与事务中执行的每个语句的搜索条件匹配的键值范围内。[...] 范围锁一直保持到事务完成。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-04T19:49:54.367

锁定始终在数据库级别进行：-

Oracle 官方文档：- 为了避免事务期间的冲突，DBMS 使用锁，这是一种阻止其他人访问事务正在访问的数据的机制。（请注意，在自动提交模式下，每条语句都是一个事务，只有一个语句持有锁。）设置锁后，它一直有效，直到事务被提交或回滚。例如，DBMS 可以锁定表的一行，直到提交更新。这个锁的作用是防止用户进行脏读，也就是说，在一个值被永久化之前读取它。（访问尚未提交的更新值被视为脏读，因为该值有可能回滚到其先前的值。如果您读取的值稍后回滚，则您将读取无效值。 )

如何设置锁取决于所谓的事务隔离级别，它的范围可以从根本不支持事务到支持强制执行非常严格的访问规则的事务。

事务隔离级别的一个示例是 TRANSACTION_READ_COMMITTED，它不允许访问一个值，直到它被提交之后。换言之，如果事务隔离级别设置为 TRANSACTION_READ_COMMITTED，则 DBMS 不允许发生脏读。接口 Connection 包括五个值，它们代表您可以在 JDBC 中使用的事务隔离级别。

# asp.net - SlickGrid 未显示

> ID：16162362
> 
> 赞同：0
> 
> 时间：2013-04-23T06:23:06.240
> 
> 标签：asp.net, slickgrid

新手在这里..目前正在开发我的第一个 ASP.NET Web 应用程序。我正在尝试使用 SlickGrid。不知何故，网格根本没有出现，甚至没有显示标题:-(

**下面是我的 Index.cshtml 代码：**

```
@model IEnumerable<E_2.Models.DYE>

<link href="@Url.Content("~/Content/slick.grid.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery.event.drag-2.0.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/slick.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/slick.grid.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/SlickGridTest.js")" type="text/javascript">

</script>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table width="100">
  <tr>
    <td>
      <div id="teamGrid" style="width:400px;height:300px;"></div>
    </td>
  </tr>
</table> 
```

**..这是我的 SlickGridTest.js 脚本**

```
var grid;
var columns = [
    { id: "ID", name: "ID", field: "ID" },
    { id: "DESCRIPTION", name: "DESCRIPTION", field: "DESCRIPTION" },
];

var options = {
    enableCellNavigation: true,
    enableColumnReorder: false
};

$(function () {
    var myData = [];
    $.getJSON('/DYE/ReloadDyeData', function (data) {
        myData = data;
        grid = new Slick.Grid("#teamGrid", myData, columns, options);
    }); 
```

**..我的模型**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace E_2.Models
{
    public partial class DYE
    {
        public int ID { get; set; }

        [Required]
        public string DESCRIPTION { get; set; }

        [StringLength(3)]
        public string COLOR_CODE { get; set; }
        public Nullable<System.DateTime> VALID_UNTIL { get; set; }
    }
} 
```

* *..以及重新加载数据的控制器部分**

```
public string ReloadDyeData()
{
    var dyes = db.DYEs.ToList();
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    return serializer.Serialize(dyes);
} 
```

由于缺乏这方面的 HTML、JavaScriot 和 ASP.NET 经验，我真的不知道根本问题在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:54:50.643

据我所知，您没有包含 jQuery、jQuery UI，并且您使用的是过期版本的 jquery.event.drag。您可以在此处获取更新版本：http: [//threedubmedia.com/code/event/drag](http://threedubmedia.com/code/event/drag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:36:08.367

可能会出现问题，因为您将 .js 文件加载到错误的位置。

在视图的底部（在最后一个 cshtml 代码之后），您需要为脚本添加一个部分，如下所示

```
</div>
@section scripts {
    <script type="text/javascript" src="~/Scripts/yourfile"></script>
} 
```

这是一个快速的答案，很可能是别的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T17:12:02.457

我将您的代码复制并粘贴到我的 IDE 中，结果我们的 slickGridTest.js 代码末尾缺少大括号和圆括号。

# perl - Perl 的 __PACKAGE__ 特殊词，不能用作命名空间吗？

> ID：16162367
> 
> 赞同：0
> 
> 时间：2013-04-23T06:23:17.713
> 
> 标签：perl

我看到`__PACKAGE__`将被编译为包名。

那么为什么代码：

```
Foo::bar() 
```

能行得通。但代码：

```
__PACKAGE__::bar() 
```

会产生错误：

```
Undefined subroutine &__PACAKGE__::bar called 
```

调用者在 Foo 包中，所以`__PACKAGE__`将是 Foo；

希望你能解释一下:)

让我添加一个示例来解释场景：

```
$ perl -e 'package Foo ; sub bar { print "hello\n" } ; __PACKAGE__::bar()'  
Undefined subroutine &__PACKAGE__::bar called at -e line 1.

$ perl -e 'package Foo ; sub bar { print "hello\n" } ; Foo::bar()'
hello 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:28:41.860

你似乎弄错了。两者`Foo::bar()`的`__PACKAGE__::bar()`工作方式完全相同。

```
$ perl -e'sub Foo { "main" }  Foo::bar()'
Undefined subroutine &Foo::bar called at -e line 1.

$ perl -e'__PACKAGE__::bar()'
Undefined subroutine &__PACKAGE__::bar called at -e line 1. 
```

和

```
$ perl -E'package Foo; sub bar { say "hello" } Foo::bar()'
hello

$ perl -E'package __PACKAGE__; sub bar { say "hello" } __PACKAGE__::bar()'
hello 
```

它们都调用`bar`指定的包（`Foo`和`__PACKAGE__`）。既不`Foo`也不`__PACKAGE__`被视为函数调用。

那是因为您的代码中既不是空话`Foo`也不`__PACKAGE__`是空话。如果你想`bar`从返回的包中调用`__PACKAGE__`，你可以使用

```
bar() 
```

如果你有一个带有任意包的 var（可能从 获取`__PACKAGE__`），你可以使用

```
(\&{ $pkg . '::bar' })->(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:18:46.397

您似乎误解了 when[`__PACKAGE__`](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata")被视为[特殊文字](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata")。

The [special literals](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata") only have their special meaning when they are a ["separate token"](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata").

```
use 5.10.0;
use strict;
use warnings;

say 'in package: ', __PACKAGE__;

sub bar{ say 'this is the one you might be expecting' }

__PACKAGE__::bar(); # not a separate token

{
  package __PACKAGE__;
  sub bar{ say 'this is the one you actually get' }
} 
```

```
in package: main
this is the one you actually get 
```

There are a few ways to get around this:

```
bar(); # recommended

{
  no strict 'refs';
  *{__PACKAGE__.'::bar'}->(); # symbol ref

  ${__PACKAGE__.'::'}{bar}->(); # magical %package:: variable
}

__PACKAGE__->can('bar')->(); # may get 'bar' from a parent package

__PACKAGE__->bar(); # same as __PACKAGE__->can('bar')->(__PACKAGE__)

our $symbol_table = do{ no strict 'refs'; \%{__PACKAGE__.'::'} };

$symbol_table->{bar}->(); 
```

Really there is very rarely a good reason to use [`__PACKAGE__`](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata").

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:55:08.333

在包（包括 in ）中搜索函数（可能是方法）的规范方法`__PACKAGE__`是使用该`can`方法。当在类名或实例上调用时，它返回对函数/方法的引用；然后你可以取消引用它来调用实际的函数。在你的情况下，这可以是

```
perl -E 'sub bar { say "hello" } __PACKAGE__->can("bar")->()' 
```

这与 Michael Prz 在评论中建议的区别在于对第一个参数的处理。例如，当您尝试

```
perl -E 'sub bar { say "hello " . shift } __PACKAGE__->bar("name")' 
```

你得到

```
hello main 
```

因为 main 是调用参数。然而

```
perl -E 'sub bar { say "hello " . shift } __PACKAGE__->can("bar")->("name")' 
```

做你所期望的。

# javascript - 是否可以在 wijgrid 中有一个对象类型的单元格？

> ID：16162378
> 
> 赞同：1
> 
> 时间：2013-04-23T06:23:52.800
> 
> 标签：javascript, knockout.js, wijmo, wijgrid

我使用 KnockOut 可观察数组来填充 wijgrid。在 wijgrid 中，我想使用 JavaScript 对象作为某些单元格的值。不幸的是，wijmo 似乎在它自己的模型中将对象转换为字符串。

请看[一下这个例子](http://jsfiddle.net/muel/TM98D/2/)。我想在表格中显示车主姓名，但我还需要保留 ID（和模型数据结构）。

**淘汰视图模型**

```
var someData =[ { AssetCode: "Truck 5",
              Owner: {
                 id: 1,
                 name: 'Pete'},
              VIN: "T3SN2ADN",
              Odo: 232109,
              TimeStamp: "2012-07-21T09:13:12Z"},
            { AssetCode: "Car 8",
              Owner: {
                 id: 3,
                 name: 'Brian'},
              VIN: "COFAQ211",
              Odo: 433299,
              TimeStamp: "2012-07-17T15:34:54Z"}];

function ViewModel() {
    var self = this;
    self.gridData = ko.observableArray(someData);
}

ko.applyBindings(new ViewModel()); 
```

**维吉格**

```
<table id="t1" data-bind="wijgrid: {
    data: gridData,
    columns: [
    { headerText: 'Asset Code', dataKey: 'AssetCode', dataType: 'string'},
    { headerText: 'Owner name', dataKey: 'Owner'},         <!-- PROBLEM LINE -->
    { headerText: 'VIN', dataKey: 'VIN', dataType: 'string' },
    { headerText: 'Odometer', dateKey: 'Odo', dataType: 'number' },
    { headerText: 'Time', dataKey: 'TimeStamp', dataType: 'datetime', dataFormatString: timePattern }

]}"></table> 
```

我试过了：

*   标准的淘汰赛方法：`{ headerText: 'Owner name', dataKey: 'Owner.name'}`
*   创建自定义 cellFormatter：`{ headerText: 'Owner name', dataKey: 'Owner', cellFormatter: MY_FORMATTER}`

我已经尝试了几乎所有我能想到的方法来让它工作，但是 wijmo 在这里看起来很僵硬......

此外，当我在 Chrome 中调试时，似乎 wijmo 在任何格式化之前已经将对象转换为它自己模型中的字符串。这个用处不大。。

**编辑**- 我们使用的是 Wijmo 2.3.9。到目前为止，我们在使用 Wijmo 3.* 时遇到了性能问题，因此升级并非迫在眉睫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:59:57.173

您可以通过像这样处理 cellStyleFormatter 为任何单元格设置自定义值（或在您的情况下显示车主姓名）：

```
cellStyleFormatter: function (args) {
//check for specific column and header row
if (args.column.headerText == "Owner name" && args.row.dataRowIndex >= 0) {
     //set the custom value to cell i.e. vehicle owner name
     args.$cell.text(args.row.data.Owner.name);
 }
} 
```

有关 CellStyleFormatter 的更多信息，您可以参考：[http ://wijmo.com/wiki/index.php/Grid#cellStyleFormatter](http://wijmo.com/wiki/index.php/Grid#cellStyleFormatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T03:06:28.567

好的，事实证明，您可以使用`cellFormatter`...将单元格值作为对象获取。要使其正常工作，**请不要**指定`dataKey`属性。这是修改后的代码：

```
<table id="t1" data-bind="wijgrid: {
    data: gridData,
    columns: [
        { headerText: 'Asset Code', dataKey: 'AssetCode', dataType: 'string'},
        { headerText: 'Owner name', cellFormatter: MY_FORMATTER},         <!-- FIXED LINE -->
        { headerText: 'VIN', dataKey: 'VIN', dataType: 'string' },
        { headerText: 'Odometer', dateKey: 'Odo', dataType: 'number' },
        { headerText: 'Time', dataKey: 'TimeStamp', dataType: 'datetime', dataFormatString: timePattern }
]}"></table> 
```

以及以下JS：

```
var MY_FORMATTER = function(args) {
  if (args.row.data && args.row.dataRowIndex >= 0) {
    args.formattedValue = args.row.data.Owner.name;
  } 
}; 
```

# python - 如何轻松编写带有变量的多行文件（python 2.6）？

> ID：16162383
> 
> 赞同：6
> 
> 时间：2013-04-23T06:24:07.983
> 
> 标签：python, file, output, multiline

目前我正在通过执行从 python 程序编写多行文件

```
myfile = open('out.txt','w')
myfile.write('1st header line\nSecond header line\n')
myfile.write('There are {0:5.2f} people in {1} rooms\n'.format(npeople,nrooms))
myfile.write('and the {2} is {3}\n'.format('ratio','large'))
myfile.close() 
```

这有点令人厌烦并且容易出现打字错误。我希望能够做的是

```
myfile = open('out.txt','w')
myfile.write(
1st header line
Second header line
There are {npeople} people in {nrooms} rooms
and the {'ratio'} is {'large'}'
myfile.close() 
```

有没有办法在 python 中做这样的事情？一个技巧可能是将其写入文件，然后使用 sed 目标替换，但有没有更简单的方法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-23T06:38:52.490

三引号字符串是你的朋友：

```
template = """1st header line
second header line
There are {npeople:5.2f} people in {nrooms} rooms
and the {ratio} is {large}
""" 
context = {
 "npeople":npeople, 
 "nrooms":nrooms,
 "ratio": ratio,
 "large" : large
 } 
with  open('out.txt','w') as myfile:
    myfile.write(template.format(**context)) 
```

# c# - using 和 DBContext 的使用

> ID：16162384
> 
> 赞同：1
> 
> 时间：2013-04-23T06:24:24.870
> 
> 标签：c#

我确保完全理解以下代码：

```
static void Main(string[] args)
{
    var person = new Person {FirstName = "Nadege", 
    LastName = "Deroussen", BirthDate = DateTime.Now};
    using (var context = new MyContext())
    {
        context.Persons.Add(person);
        context.SaveChanges();
    }
    Console.Write("Person saved !");
    Console.ReadLine();
} 
```

如您所见，使用 is 跟随 {}，如果我错了，请纠正我，这是否意味着上下文将在 {} 之后关闭？DBContext 是否应该像这样每次都关闭？

祝大家欢呼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T06:30:17.103

> 如果我错了，请纠正我，这是否意味着上下文将在 {} 之后关闭？

它会被处理掉，是的。您的代码实际上是：

```
var context = new MyContext();
try
{
    context.Persons.Add(person);
    context.SaveChanges();
}
finally
{
    context.Dispose();
} 
```

> DBContext 是否应该像这样每次都关闭？

假设这是 LINQ to SQL，[您实际上*不需要*处理 context](https://stackoverflow.com/questions/389822/when-should-i-dispose-of-a-data-context)。然而，一般来说，处理任何实现的东西是个好主意`IDisposable`——除非你真的*知道*你不需要。（基本上，在某些情况下，实现 of`IDisposable`是其他东西的不便副作用。）即使在这种情况下，我也会继续这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:29:04.737

是的，`DbContext`将被关闭。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:26:34.380

MyContext 派生自 DBContext，DBContext 派生自 Disposable。当您不再使用它时，您需要处理您的对象。在这方面使用帮助。您不需要调用 context.Dispose() ，因为 using 会调用它自己。

在使用块后使用 using as 上下文是无效的。如果你不使用它并去 context.Dispose() 然后你调用 context ，那么就会出现异常。所以它有助于更​​好的代码管理。

# c++ - Minifilter 驱动程序 - 我应该过滤哪个 IRP 请求以进行实时病毒防护？

> ID：16162385
> 
> 赞同：0
> 
> 时间：2013-04-23T06:24:26.333
> 
> 标签：c++, driver, wdk, minifilter

在我查看了 MS 示例（[扫描仪文件系统 Minifilter 驱动程序](http://code.msdn.microsoft.com/windowshardware/Scanner-File-System-426c8cbe)）之后。我注意到他们只使用`IRP_MJ_CREATE`, `IRP_MJ_WRITE`, `IRP_MJ_CLEANUP`。是否足以进行实时保护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:51:04.597

所有文件写入都将通过`IRP_MJ_WRITE`. 因此，如果您扫描此路径中的文件/数据，您可以相当确定新文件/数据不包含病毒。

但请确保过滤*所有*写入功能（如写入内存映射文件等）。更好/需要也过滤分页 IO。

一旦确定磁盘上的文件不包含病毒，在读取期间扫描它们是多余的。

但是，如果系统上已经存在病毒文件，则不会被捕获。但不要认为这是实时保护所必需的。

# html - HTML5 已贬值 Привет HTML5 弃用了 '<a name=' 以支持 CSS3 id。我是否必须在样式表中定 问问题 问问题 2013-04-23T06:24:28.250 110 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Привет HTML5 弃用了 '<a name=' 以支持 CSS3 id。我是否必须在样式表中定义每个“锚 id”？ 我如何解释 w3c “说”的例子。 <p id="SomeName">Some Text, blah, blah</p> -or- <p><span id="SomeName"></span><P>aragraph Text, blah, blah... < /p> 那么，我是否必须在 head <style 或链接样式表中定义' id="SomeName" '？ #SomeName { 颜色：黑色； 字体系列：Arial、Helvetica、； 等等... } 并对我要创建的每个“内部链接”、“名称”锚重复此操作？这就像 CSS3 和 HTML5 中应该“更好”的大多数东西一样，似乎是一个巨大的痛苦...... :) 或者，我只是“撒谎”并标记任何我想要的“id”（ <h1 id="MadeupID"> ），而不必在风格上描述 ID？ 对不起，但我不太擅长用词，所以我希望这足以继续下去。 在此先感谢 Спасибо， Landis。 ps，我在这里和互联网上都找到了很多文章，但是对于是否需要在样式表中定义或无论如何设置样式都不清楚。 std::function 和 std::bind 行为 我有这个代码： #include <iostream> #include <functional> #include <vector> void fun() { std::cout<<"fun"; } void gun(int) { std::cout<<"gun"; } int main() { std::vector<std::function<void(int)>> vec; vec.push_back(std::bind(fun)); vec.push_back(gun); vec[0](1); vec[1](2); } 你能解释一下绑定函数时如何std::bind返回吗？std::function<void(int)>void() 如何void()使用仿函数调用函数void(int)？ htmlcssanchorstylesheet 4 1 回答 1 This answer is useful 1 HTML5 折旧的“名称” XHTML 中不推荐使用锚定目标的name属性。 支持 CSS3 id。 不，赞成 HTML 的id属性。 那么，我是否必须id="SomeName在其中一个head style或链接的样式表中定义？ 不，您不必设计任何您不想设计的样式。 或者，我只是“撒谎”并标记任何我想要的“id”（<h1 id="MadeupID">），而不必在样式中描述 ID？ 不做造型不是谎言。 该id属性提供了一种标识元素的方法。CSS 选择器、JavaScript、URL 片段标识符和其他一些东西可以使用该标识。它根本不必使用。 于 2013-04-23T06:27:59.190 回答 Related 4 c# - 在 C# 中知道传递给泛型方法的参数类型的正确方法是什么？ 0 iphone - 在 iOS OpenGL ES 2.0 中在两侧绘制纹理时发生 Z-fighting 1 objective-c - NSXML 解析器返回空白结果 2 java - 具有自动换行和有限宽度并支持 HTML 的 Swing 组件 2 iphone - 当我点击按钮时得到大的警告/gdp 输出 2 datagrid - datagrid 没有属性数据源 3 android - 安装 ADT 时出现 Eclipse 依赖项错误 1 java - 在 javac 中使用高于 -source 的 -target 1 python - Pymongo - 转换数据类型并找到最大值 1 java - 为 GWT css 类启用混淆？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16162387
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：html, css, anchor, stylesheet

 Привет

HTML5 弃用了 '<a name=' 以支持 CSS3 id。我是否必须在样式表中定义每个“锚 id”？

我如何解释 w3c “说”的例子。
<p id="SomeName">Some Text, blah, blah</p>
-or-
<p><span id="SomeName"></span><P>aragraph Text, blah, blah... < /p>

那么，我是否必须在 head <style 或链接样式表中定义' id="SomeName" '？
#SomeName {
颜色：黑色；
字体系列：Arial、Helvetica、；
等等...
}

并对我要创建的每个“内部链接”、“名称”锚重复此操作？这就像 CSS3 和 HTML5 中应该“更好”的大多数东西一样，似乎是一个巨大的痛苦...... :)

或者，我只是“撒谎”并标记任何我想要的“id”（ <h1 id="MadeupID"> ），而不必在风格上描述 ID？

对不起，但我不太擅长用词，所以我希望这足以继续下去。
在此先感谢 Спасибо，
Landis。 

ps，我在[这里](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id)和互联网上都找到了很多文章，但是对于是否需要在样式表中定义或无论如何设置样式都不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:27:59.190

> HTML5 折旧的“名称”

XHTML 中不推荐使用锚定目标的`name`属性。

> 支持 CSS3 id。

不，赞成 HTML 的`id`属性。

> 那么，我是否必须`id="SomeName`在其中一个`head` `style`或链接的样式表中定义？

不，您不必设计任何您不想设计的样式。

> 或者，我只是“撒谎”并标记任何我想要的“id”（`<h1 id="MadeupID">`），而不必在样式中描述 ID？

不做造型不是谎言。

该`id`属性提供了一种标识元素的方法。*CSS 选择器、JavaScript、URL 片段标识符和其他一些东西可以*使用该标识。它根本不必*使用*。

# c - C练习题

> ID：16162391
> 
> 赞同：-3
> 
> 时间：2013-04-23T06:25:00.263
> 
> 标签：c

从链接 [http://www.cs.cf.ac.uk/Dave/C/node8.html#SECTION00840000000000000000](http://www.cs.cf.ac.uk/Dave/C/node8.html#SECTION00840000000000000000)

练习 12347

我无法理解问题中这两点的含义。

1)

*   制表符展开后的总字符数
*   制表符展开后的总空格数
*   制表符展开后的前导空格总数

2)

注意：输入中的所有制表符 ('') 应使用以下规则解释为多个空格：

“移动到下一个模 8 列”

其中第一列编号为第 0 列。

```
 col before tab | col after tab

    ---------------+--------------
            0      |      8
            1      |      8
            7      |      8
            8      |     16
            9      |     16
           15      |     16
           16      |     24 
```

假

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:32:10.743

一旦你理解它就足够简单了。制表符扩展是用一系列空格替换制表符的行为，其数量将使您移动到下一个制表位。

因此，例如，让我们考虑第 8、16 列等处的制表位。下面的第一行将被标签扩展为第二行（假设`.`是标签）：

```
 11111111112
12345678901234567890 <- Ruler line
--------------------
hi.there
hi     there 
```

您可以看到单个制表符已扩展为五个空格，以便下一个字符从第 8 列的制表位开始。

所以你只需要根据这些信息重新检查这些问题。

# java - 以编程方式加载数据库设置并与 DBUnit 中的预期数据库进行比较

> ID：16162399
> 
> 赞同：3
> 
> 时间：2013-04-23T06:25:17.107
> 
> 标签：java, unit-testing, junit, dbunit, spring-test

我这样注释我的测试方法：

```
@Test
@DatabaseSetup("/default_database_data.xml")
@ExpectedDatabase(value = "/expected_database_1.xml", assertionMode = NON_STRICT) 
```

是否可以手动执行以下`@DatabaseSetup`操作`@ExpectedDatabase`：

```
@Test
public void test(){
  // DBUnit.setup("/default_database_data.xml");
  dao.insert(...);
  // DBUnit.expected("/expected_database_1.xml");
} 
```

我编写了语法，只是为了让您了解我需要什么：在一个单元测试中执行 2 个设置和断言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:23:56.017

有两件事可能有效，请查看此链接。

[关联](https://stackoverflow.com/questions/3813684/how-to-revert-the-database-back-to-the-initial-state-using-dbunit)

还有这个注释：

```
 @DirtiesContext(classMode=ClassMode.AFTER_EACH_TEST_METHOD) 
```

# android - android中的进度条onclick按钮？

> ID：16162400
> 
> 赞同：1
> 
> 时间：2013-04-23T06:25:19.600
> 
> 标签：android, location

如何在单击活动中的按钮时显示进度条我的主要活动中有一个按钮，如果我单击该按钮我想显示一个进度条我不想为此使用辅助活动我已经完成了 2 个活动但是我需要它在主要活动本身中完成。

谢谢你

我的代码：

家庭活动：

```
public void load(View v){
    Intent intent = new Intent(this,Splash.class);
    this.startActivity(intent);
} 
```

飞溅活动：

```
public class Splash extends Activity {
    private long ms = 0;
    private long splashTime = 20000;
    private boolean splashActive = true;
    private boolean paused = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.splash);

        Thread mythread = new Thread() {
            public void run() {
                try {
                    while (splashActive && ms < splashTime) {
                        if (!paused)
                            ms = ms + 100;
                        sleep(100);
                    }
                } catch (Exception e) {
                } finally {
                    Intent intent = new Intent(Splash.this, Home.class);
                    startActivity(intent);
                }
            }
        };
        mythread.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T06:29:21.293

你可以这样做

```
ProgressDialog progress;

progress = new ProgressDialog(this);
progress.setTitle("Please Wait!!");
progress.setMessage("Wait!!");
progress.setCancelable(true);
progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
progress.show(); 
```

在要显示`ProgressBar`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-07T12:57:49.283

还有一种方法可以在单击按钮时显示进度条。

将此代码放入您的xml

```
 <ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="invisible" /> 
```

只需在您的 Button 单击 java 文件中编写以下代码。

```
progressBar.setVisibility(View.VISIBLE); 
```

它将在您的按钮单击上显示进度条。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-19T12:28:28.157

我相信 user2306156 现在不需要这个，希望正在寻找这个的人会很高兴知道我猜。

将此代码放入您的xml中

```
<ProgressBar
        style="@android:style/Widget.Material.Light.ProgressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/checkBox"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="57dp"
        android:id="@+id/progressBar" /> 
```

把它放在你的活动代码中

```
spinner=(ProgressBar)findViewById(R.id.progressBar);
        spinner.setVisibility(View.GONE); 
```

这在您的活动代码的onClick中

```
spinner.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:29:20.470

请参阅此[Android 进度条示例](http://www.mkyong.com/android/android-progress-bar-example/)

```
public class MyAndroidAppActivity extends Activity {

    Button btnStartProgress;
    ProgressDialog progressBar;
    private int progressBarStatus = 0;
    private Handler progressBarHandler = new Handler();

    private long fileSize = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addListenerOnButton();

    }

    public void addListenerOnButton() {

        btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
        btnStartProgress.setOnClickListener(
                 new OnClickListener() {

           @Override
           public void onClick(View v) {

            // prepare for a progress bar dialog
            progressBar = new ProgressDialog(v.getContext());
            progressBar.setCancelable(true);
            progressBar.setMessage("In Progress ...");
            progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressBar.setProgress(0);
            progressBar.setMax(100);
            progressBar.show();

            //reset progress bar status
            progressBarStatus = 0;

            //reset filesize
            fileSize = 0;

            new Thread(new Runnable() {
              public void run() {
                while (progressBarStatus < 100) {

                  // process some tasks
                  progressBarStatus = doSomeTasks();

                  // your computer is too fast, sleep 1 second
                  try {
                    Thread.sleep(1000);
                  } catch (InterruptedException e) {
                    e.printStackTrace();
                  }

                  // Update the progress bar
                  progressBarHandler.post(new Runnable() {
                    public void run() {
                      progressBar.setProgress(progressBarStatus);
                    }
                  });
                }

                // ok, file is downloaded,
                if (progressBarStatus >= 100) {

                    // sleep 2 seconds, so that you can see the 100%
                    try {
                        Thread.sleep(2000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    // close the progress bar dialog
                    progressBar.dismiss();
                }
              }
               }).start();

               }

                });

        }

    // file download simulator... a really simple
    public int doSomeTasks() {

        while (fileSize <= 1000000) {

            fileSize++;

            if (fileSize == 100000) {
                return 10;
            } else if (fileSize == 200000) {
                return 20;
            } else if (fileSize == 300000) {
                return 30;
            }
            // ...add your own

        }

        return 100;

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-19T22:32:10.090

另一个选项是使用漂亮的[Spezi-Views](https://github.com/halfreal/spezi-views)，它包含一个非常易于使用的 ProgressButton：

```
<de.halfreal.spezi.views.ProgressButton
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Press me"
        app:selectedText="I am loaded"
        app:unselectedText="Press me again"
        app:loadingDrawable="@drawable/spinner"
        /> 
```

在代码中：

```
...
//show a rotation spinner, and no text (or the loading text)
progressButton.enableLoadingState();

//show no animation, but the selected/ unselected text
progressButton.disableLoadingState();
... 
```

# c++ - std::function 和 std::bind 行为

> ID：16162402
> 
> 赞同：5
> 
> 时间：2013-04-23T06:25:28.890
> 
> 标签：c++, c++11, stl

我有这个代码：

```
#include <iostream>
#include <functional>
#include <vector>

void fun()
{
    std::cout<<"fun";
}

void gun(int)
{
    std::cout<<"gun";
}

int main()
{
    std::vector<std::function<void(int)>> vec;

    vec.push_back(std::bind(fun));
    vec.push_back(gun);

    vec[0](1);
    vec[1](2);
} 
```

你能解释一下绑定函数时如何`std::bind`返回吗？`std::function<void(int)>``void()`

如何`void()`使用仿函数调用函数`void(int)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T06:47:03.327

作为模板参数传递的签名`function`仅确定将绑定多少个占位符 ( `_1`) 以及类型。

实际函数的调用仅使用绑定函数实际需要的参数数量。实际上，多余的参数被忽略了。

另一个更有启发性（？）的例子，从另一面来看：

```
#include <iostream>
#include <functional>

void gun(int i)
{
    std::cout<<"gun("<<i<<")";
}

int main()
{
    using namespace std::placeholders;
    std::bind(gun, _5)("ignore", 3, "and", 4, 43);
} 
```

印刷

```
gun(43) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:54:13.883

> 如何`void()`使用仿函数调用函数`void(int)`？

`std::bind(fun)`不返回`void()`函数，它返回未指定类型的调用包装器。

调用该调用包装器的常用方法是使用零个参数，但在大多数`bind()`该类型的实现中，可以使用*零个或多个参数调用*，并且其他参数将被忽略（即不传递给目标函数）

更一般地，对于`F`接受`N`参数的函数，`bind(F)`返回一个可以使用`N`或更多参数调用的调用包装器。如果您绑定参数或使用占位符，那么它将改变调用调用包装器所需的最小参数数量。

# mysql - 整数的mysql查询不返回任何行

> ID：16162408
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:25:58.110
> 
> 标签：mysql, integer

我的使用表有一列 usSEQ 是整数（11）（auto_increment）

```
SELECT * FROM usage WHERE usSEQ = 38098 
```

不返回任何行。

```
SELECT * FROM usage WHERE usSEQ <= 38098

SELECT * FROM usage WHERE usSEQ >= 38098 
```

两者都返回多行，包括 38098 的行

```
SELECT * FROM usage WHERE usSEQ >= 38098 and usSEQ <= 38098 
```

不返回任何行。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:04:59.420

更好的是，您可以将查询更改为“SELECT * FROM usage WHERE usSEQ = 38098”，这等于“SELECT * FROM usage WHERE usSEQ >= 38098 and usSEQ <= 38098”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:36:43.890

UMMMM 尴尬的回答！
对 mySQL 的 UI 不是很熟悉，而且在当天晚些时候，我看到了第一行：“显示第 0 - 0 行（总共 1 行，查询耗时 0.0245 秒）”并将其解释为返回 0 行。数据出现在下面混乱的混乱中。很抱歉造成混乱，并感谢您的回复。早晨的世界更加清晰。

# php - 我已经安装了 ImageMagick，但我仍然在图像库中遇到错误

> ID：16162416
> 
> 赞同：1
> 
> 时间：2013-04-23T06:26:21.470
> 
> 标签：php, codeigniter, imagemagick

我想使用 imageMagick 进行图像处理。现在我已经安装了 ImageMagick ImageMagick-6.8.4-10-Q16-x64-dll.exe。但我仍然面临错误 =“图像处理失败。请验证您的服务器是否支持所选的协议以及您的图像库的路径是否正确。” 我的代码是 -

```
$config = array();
$config['image_library'] = 'ImageMagick';
$config['source_image'] = $file;
$config['new_image'] =  $file;
$config['library_path'] = '/usr/local/bin';
$config['create_thumb']    = FALSE;
$config['maintain_ratio'] = TRUE;
$config['width']     = 50;
$config['height']   = 50;
$this->image_lib->initialize($config); 
 if ( !$this->image_lib->resize())
        {
            echo "resize -".$this->image_lib->display_errors();
        } 
        $this->image_lib->clear(); 
```

请帮我。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:27:48.767

等待。我假设您使用的是 Windows（当您安装 .exe 时），但您的路径是 Linux 路径 ( `/usr/local/bin`)。仔细检查您的安装路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T10:43:50.257

下面给了我预期的结果。希望你也能得到同样的结果。

```
 $this->load->library('image_lib');

    //For resizing of image in size of dilog
    $config['image_library']  = 'ImageMagick';
    $config['library_path'] = 'C:\\ImageMagick\\';

    $config['source_image'] = $source_filepath;
    $config['new_image'] = $new_filepath;

    $config['width'] = 128;
    $config['height'] = 128;
    $config['quality'] = '100%';
    $config['maintain_ratio'] = TRUE;

    $this->image_lib->initialize($config);

    if (! $this->image_lib->resize()) {
        $error_msg = $this->image_lib->display_errors();
        print_r($error_msg);
    }
    else {
        echo "Done";
    } 
```

这里

```
$config['library_path'] = 'C:\\ImageMagick\\'; 
```

是安装 imageMagick 应用程序的窗口的路径。（尝试安装在这样一个文件夹中，我们可以轻松地找到它的路径）。将图像库更改为：

```
$config['image_library']  = 'ImageMagick'; 
```

&其他所有配置保持不变。

# android - Spring Android RestTemplate 设置 Timeout 和 TimeoutListener

> ID：16162417
> 
> 赞同：4
> 
> 时间：2013-04-23T06:26:25.617
> 
> 标签：android

我在我的 Android 应用程序中使用以下代码来使用 RestTemplates

```
return getRestTemplate().postForObject(url, forgotPasswordRequest,
                ForgetPassword.Response.class); 
```

现在我如何设置请求的超时时间并使用超时侦听器来捕获请求超时？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T11:36:58.793

```
RestTemplate restTemplate = new MyRestTemplate(10*1000);
return restTemplate.postForObject(url, forgotPasswordRequest,
            ForgetPassword.Response.class);

[...]

protected class MyRestTemplate extends RestTemplate {
    public MyRestTemplate(int timeout) {
        if (getRequestFactory() instanceof SimpleClientHttpRequestFactory) {
            Log.d("HTTP", "HttpUrlConnection is used");
            ((SimpleClientHttpRequestFactory) getRequestFactory()).setConnectTimeout(timeout);
            ((SimpleClientHttpRequestFactory) getRequestFactory()).setReadTimeout(timeout);
        } else if (getRequestFactory() instanceof HttpComponentsClientHttpRequestFactory) {
            Log.d("HTTP", "HttpClient is used");
            ((HttpComponentsClientHttpRequestFactory) getRequestFactory()).setReadTimeout(timeout);
            ((HttpComponentsClientHttpRequestFactory) getRequestFactory()).setConnectTimeout(timeout);
        }
    }
} 
```

# php - PHP 内存限制没有被添加 osx

> ID：16162427
> 
> 赞同：0
> 
> 时间：2013-04-23T06:26:55.527
> 
> 标签：php, apache, osx-lion

我在 Mac OS X Lion 10.7.4 上运行，

我正在运行 php，在 /etc/php.ini 中我将内存限制设置为 1024M

```
; Maximum amount of memory a script may consume (128MB)
; http://php.net/memory-limit
memory_limit = 1024M 
```

现在，当我运行脚本时，它给了我这个错误

致命错误：允许的内存大小为 268435456 字节已用尽（尝试分配 474610 字节）

这看起来像 PHP 只分配了 256 兆字节的内存，那么我要求它分配的其余内存在哪里？

我没有想法在这里解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:28:21.603

将内存限制设置为 -1

```
memory_limit = -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:36:35.307

我没有使用 silverstripe CMS 的经验，但我发现了这个： [http](http://www.silverstripe.org/general-questions/show/16355) ://www.silverstripe.org/general-questions/show/16355和[http://www.silverstripe.org/installing-silverstripe/show/20228](http://www.silverstripe.org/installing-silverstripe/show/20228)

也许它可以帮助您朝着正确的方向前进。

另一个线索？（关于 php.ini） [https://discussions.apple.com/thread/2446810?start=0&tstart=0](https://discussions.apple.com/thread/2446810?start=0&tstart=0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:52:25.540

当我收到似乎与 php.ini 设置的行为预期不匹配的错误时，我要做的第二件事（第一件事，重新启动服务器，已经提到过）是检查我是否编辑了正确的 php.ini 文件。尝试在页面中快速使用 phpinfo() 以确保您正在编辑的 php.ini 文件确实是根据设置使用的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T07:53:57.663

确保您的 Web 服务器正在加载 corect php.ini 文件。您可以通过在开始时使用以下函数调用准备一个测试 php 文件来检查这一点`phpinfo()`。确保该字段`Loaded Configuration File`与您正在编辑的文件的路径完全相同，这一点很重要。

此外，如果您尝试在此处使用快捷方式并尝试从 PHP CLI 读取上述配置选项的值，您可能会遇到额外的麻烦。在许多操作系统中，本地 Web 服务器使用的 PHP CLI 和 PHP 解释器使用不同的配置文件。这意味着`phpinfo()`在 PHP CLI 中运行的输出可能与通过 Web 服务器调用时不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T16:38:02.027

您可以在没有内存限制的情况下运行 php。终端中的命令是： php -d memory_limit=-1 Symfony 提供以下解决方案：[https://getcomposer.org/doc/articles/troubleshooting.md#memory-limit-errors](https://getcomposer.org/doc/articles/troubleshooting.md#memory-limit-errors)

# c# - 如何使用 C# 替换 XML 文件中的标签名称？

> ID：16162433
> 
> 赞同：2
> 
> 时间：2013-04-23T06:27:17.363
> 
> 标签：c#, xml, replace

我是 XML 新手，所以这可能是一个简单的问题。我有一个结构如下的 XML 文件。

```
<root>
 <Test>
   <EmpID>23</EmpID>
   <EmpName>Packman</EmpName>
   <EmpAge>33</EmpAge>
 </Test>
 <Test>
   <EmpID>34</EmpID>
   <EmpName>James</EmpName>
   <EmpAge>13</EmpAge>
 </Test>
 <Test>
   <EmpID>53</EmpID>
   <EmpName>Nedved</EmpName>
   <EmpAge>52</EmpAge>
 </Test>
<root> 
```

我想替换 XML 文件中的一些元素，如下所示

```
<root>
 <Test>
   <EmpID name="ID">23</EmpID>
   <EmpName name="Nickname">Packman</EmpName>
   <EmpAge name = "Age">33</EmpAge>
 </Test>
 <Test>
   <EmpID name="ID">34</EmpID>
   <EmpName name="Nickname">James</EmpName>
   <EmpAge name = "Age">13</EmpAge>
 </Test>
 <Test>
   <EmpID name="ID">53</EmpID>
   <EmpName name="Nickname">Nedved</EmpName>
   <EmpAge name = "Age">52</EmpAge>
 </Test>
</root> 
```

所以基本上我想替换或添加？元素到属性。

前任）

```
<EmpID>value</EmpID> to <EmpID name="ID">value</EmpID> 
```

我尝试了一些参考资料，但它们对我不起作用。以下是我尝试过的，但它取代了整行。

```
XDocument xdoc1 = XDocument.Load("C:\\Test\\Test.xml");
XElement one = xdoc1.Descendants("EmpID").First();
one.ReplaceWith("EmpID name=NickName");
xdoc1.Save("C:\\Test\\Test_Modified.xml"); 
```

重点是中心“价值”不应该改变。见下文。

```
<EmpID>value</EmpID> to <EmpID name="ID">value</EmpID> 
```

请给我一些想法如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:35:16.267

您所要做的就是设置[属性](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.setattributevalue%28v=vs.90%29.aspx)：

```
one.SetAttributeValue("name", "ID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:10:41.930

要更改属性，您可以使用上述解决方案：

```
one.SetAttributeValue("name", "ID"); 
```

我发现重命名节点的最简单方法是：

```
xmlNode.InnerXmL = newNode.InnerXml.Replace("OldName>", "NewName>") 
```

不要包含开始 < 以确保结束标记也被重命名。

您也可以参考此链接： [http ://www.goodgord.com/2006/10/how-to-rename-xml-node-in-c.html](http://www.goodgord.com/2006/10/how-to-rename-xml-node-in-c.html)

# android - Android SurfaceView覆盖了一个view，但是view的颜色会变暗

> ID：16162434
> 
> 赞同：0
> 
> 时间：2013-04-23T06:27:19.313
> 
> 标签：android, surfaceview

我有一个`SurfaceView`被视图覆盖的视图，这个视图是半透明的，但这`SurfaceView`会让视图的颜色变暗。

如果我们显示一个带有 Activity 的 Toast，视图的颜色会变浅。当 Toast 被关闭时，视图的颜色也会变暗。如何解决这个问题？

有我的 layoutXml 文件：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/full_screen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:descendantFocusability="blocksDescendants"
    >

    <cn.home.widget.MoveSurfaceView
        android:id="@+id/move_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <cn.home.widget.SlidingMenuView
        android:id="@+id/home_sliding_menu"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <ImageView
        android:id="@+id/help_img"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:visibility="gone" />

</FrameLayout> 
```

MoveSurfaceView 是这个 SurfaceView ，这个 SlidingMenuView 是一个 Horizo​​ntalScrollView 这个 MoveSurfaceView 是这样做的：

```
 while (flag) {
        mCanvas = surfaceHolder.lockCanvas();
        if (mCanvas != null) {
            draw();
        }
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            Log.e(e.getMessage(), e);
        }
    }

  void draw(){
      mCanvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
      mCanvas.drawBitmap(bitmap_bg, mBitposX, 0, mPaint);
  } 
```

# python - 如何在 Postgre 新鲜表中为空检查？

> ID：16162437
> 
> 赞同：0
> 
> 时间：2013-04-23T06:27:27.820
> 
> 标签：python, sql, postgresql

现在我的错误是这样的

```
 File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/addons/bpl/bpl.py", line 119, in _max_reg_no
    res = cr.fetchone()[0]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我有一个名为 bpl_worker 的表。我在 python 代码中调用了一个函数。

```
def _max_reg_no(self, cr, uid, context=None):
    res = {}
    cr.execute("""
    select COALESCE(register_no, 'W00001') as reg_no        
    from bpl_worker 
    where id in 
    (select coalesce(max(id),0) from bpl_worker)        
    """)
    rows = cr.fetchall()
    if len(rows) == 0:
        return 'W00001'
    else:
        res = rows[0]
        emp_no = str(res)
        emp_int = emp_no[1:6]
        emp_no_int = int(emp_int)
        result = 'W' + (str(emp_no_int + 1).zfill(4))
        return result 
```

如果表至少有一条记录，则其工作并返回记录。在初始级别无法获取 if null 消息的记录作为输出。请帮我解决这个问题

谢谢

现在我的表如果 null 问题正常。但是在我的记录返回为“W00001”之后，错误出现在以下点

```
res = cr.fetchone()[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:45:46.240

一、全段：

```
CASE 
WHEN register_no IS NULL 
    THEN 'Empty' 
ELSE register_no 
    END 
```

可以替换为：

```
COALESCE(register_no, 'Empty') 
```

Coalesce 是一个众所周知的函数，用于处理行中的空值。还有一个 IFNULL 函数可以满足相同的需求。

据我得到你的问题，你想从一个空表（即不包含行的表）中获取记录。这是行不通的。您可能希望首先检查查询返回的记录数，这可以通过检查`cr.rowcount`属性或尝试获取所有行并检查结果数组的长度来完成：

```
rows = cr.fetchall()
if len(rows) == 0: return 'Empty' 
```

# java-me - 在 J2ME 中从任何端口接收 SMS

> ID：16162439
> 
> 赞同：2
> 
> 时间：2013-04-23T06:27:30.980
> 
> 标签：java-me, sms

我已经制作了用于发送和接收 SMS 的 J2ME 应用程序，其中消息侦听器用于侦听来自特定端口号的传入消息。

我想让 SMS Receiver 监听来自任何地方而不是特定端口的所有传入 SMS（当我打开消息连接时它会询问端口号）。

这个怎么实现？？

如果可能的话建议一些源代码。

希望早日收到你的消息。

当前代码：

```
msgConnection = (MessageConnection)Connector.open("sms://:" + port);
msgConnection.setMessageListener(listener);
void notifyIncomingMessage(MessageConnection conn) { 
  Message message; 
  try { 
    message = conn.receive(); 
  }
} 
```

问候，

帕尔马南

# c++ - 在 C++ 中将 UnicodeString 转换为 const char* 的最简单方法？

> ID：16162440
> 
> 赞同：1
> 
> 时间：2013-04-23T06:27:37.210
> 
> 标签：c++, windows, api, unicode-string, c++builder-xe2

我是 C++ 新手，在将 UnicodeString 转换为字符串时遇到问题，所以现在寻找最简单的方法来从一种类型转换为另一种类型。

我想使用基本的windows函数，它需要带有UnicodeString的字符串，如何使代码工作？

```
UnicodeString Exec = "notepad";
WinExec(Exec.c_str(), 0); 
```

使用的环境是c++ builder xe2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:32:47.613

A`std::string`不能存储 unicode 数据。为此，您将需要一个 std::wstring 。

我以前从未听说过 UnicodeString，但在这里查看 API：

[http://docwiki.embarcadero.com/Libraries/XE2/en/System.UnicodeString_Methods](http://docwiki.embarcadero.com/Libraries/XE2/en/System.UnicodeString_Methods)

它有一个名为 .c_str() 的函数，它返回一个 wchar_t*，然后您可以使用它来构造一个[std::wstring](http://www.cplusplus.com/reference/string/wstring/)

如果你真的需要一个 std::string，那么看看这个答案。

[如何将 wstring 转换为字符串？](https://stackoverflow.com/questions/4804298/how-to-convert-wstring-into-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T21:04:03.077

如果您正在 C++ 中寻找完整的 unicode 支持，请选择 ICU API。这是该网站，您可以在其中找到有关它的所有信息。[http://site.icu-project.org/](http://site.icu-project.org/)

# java - 我需要启用在浏览器中安装小程序的 java (tm) 插件。在 Web 驱动程序中怎么可能

> ID：16162446
> 
> 赞同：0
> 
> 时间：2013-04-23T06:28:06.060
> 
> 标签：java, applet, webdriver

我需要启用在浏览器中安装小程序的 java (tm) 插件。在 Web 驱动程序中怎么可能？我正在测试一个 Web 应用程序，其中必须通过启用 java（即，通过安装小程序）来验证某些功能，以及通过禁用它来验证某些功能。如果小程序工作正常，那么我需要一些预期的结果，如果没有安装小程序，我需要一些其他结果.. 那么我如何在启动浏览器之前启用/禁用小程序（即 java tm 插件）..?? 请帮忙..

目前正在使用WebDriver ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T04:30:46.630

创建一个 firefox 配置文件以使用您想要的插件加载 firefox。使用以下代码并将插件名称替换为您的插件名称。

```
 File file = new File("firebug-1.8.1.xpi");
   FirefoxProfile firefoxProfile = new FirefoxProfile();
   firefoxProfile.addExtension(file);
   firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1"); // Avoid startup screen

   WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

来源：[点击这里](http://code.google.com/p/selenium/wiki/FirefoxDriver#Running_with_firebug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T11:22:22.710

您可以启用任何 Firefox 插件来创建新配置文件并设置首选项。

例如启用 java 插件

```
profile.setPreference("plugin.state.java", 2); 
```

启用 Flash 插件

```
profile.setPreference("plugin.state.flash", 2); 
```

示例代码：

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("plugin.state.java", 2);

WebDriver driver = new FirefoxDriver(profile); 
```

我认为“2”激活了插件。

# java - 如何使用javascript在另一个jsp中包含一个jsp

> ID：16162450
> 
> 赞同：5
> 
> 时间：2013-04-23T06:28:32.527
> 
> 标签：java, javascript, jquery, jsp, struts2

我有一个按钮注销。单击注销后，我需要显示另一个页面。如何使用 JavaScript 做到这一点？谁能帮帮我吗？

我的代码：

```
<s:form name="LogoutAction"
                id="LogoutAction" action="logout">
    <span class="inlayField2">
    <s:a href="logout" cssClass="planTabHeader" id="logoutId"> <img src="../../KY/images/common/header/lock.png" alt="logout" style="border: none;background-color: transparent;" /> &nbsp;Log out</s:a></span>
    </s:form> 
```

我试过这个：

```
$('#logoutId').click(function(event) {

    $('#logoutdiv').load('ConfirmationPopup.jsp');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:26:38.190

您不能`include`让 JSP 响应客户端的单击，因为它是一种服务器端技术。您可以在页面发送之前在页面中包含所需的 HTML，使用 CSS 隐藏该区域，然后使用 JavaScript 使其可见以响应鼠标单击`include`。在页面发送到客户端之前，服务器上已经发生了这种情况。你可以有这样的东西：

```
<div id="confirmPopup" style="display:hidden;">
      <%@ include file="ConfirmationPopup.jsp" %>
</div>
<script>
  $('#logoutId').click(function(event) {
   document.getElementById("confirmPopup").style.display="block";
  });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T08:02:33.193

您可以使用 ajax 从第二个 jsp 获取 html，然后附加到 DOM 或元素的 innerHTML。

**主页.jsp**

```
<span id=confirmSpan></span>
<script language="Javascript">
function xmlhttpPost(strURL, queryStr) {
    var xmlHttpReq = false;
    var self = this;
    // Mozilla/Safari, opera etc
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }else{
        alert("no ajax")
        return
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            updatepageConfirm(self.xmlHttpReq.responseText);
        }
    }
    self.xmlHttpReq.send(queryStr);
}

function updatepageConfirm(str){
    document.getElementById("confirmSpan").innerHTML = str;
}
function logout1(){
xmlhttpPost("confirm.html");//http://sel2in.com/pages/prog/html/ajax/confirm.html", "")
}
</script>
</head>
<body>
<form  id="search" action="/search" method="get">
<input type=button onclick=logout1() value=logout>
</form > 
```

带有确认代码的示例页面 -> 可以为 div 的任何有效 html **确认.jsp** 执行操作...您确定吗？

//todo 在这里形成 span/popup/script/css 的 html -> 就像 iframe

看起来您想显示确认信息 - 一些 UI 询问您是否真的要注销？

最好的方法是创建一个 ID 为“logoutConfirmSpan”的空跨度，然后单击注销，执行 ajax（异步模式-> false，因此它内联发生）获取 html 标记并将其设置为跨度的 innerHTML

html 应该是有效的，这样它才能使 UI 出现并且表单真正注销。

请参阅[Replace inner HTML of a div with Ajax 响应](https://stackoverflow.com/questions/14851684/replace-inner-html-of-a-div-with-ajax-response)告诉您如何将 ajax 与 jQuery 一起使用

简单示例：

[HTML 片段](http://www.quirksmode.org/blog/archives/2005/12/the_ajax_respon.html)

```
<span id = 'logoutConfirmSpan'> </span>
<script>
// call ajax, with the response call setHtmlForConfirm
function setHtmlForConfirm(req)
{
    document.getElementById('logoutConfirmSpan').innerHTML = req.responseText;
}
//req.responseText should have the html to show the confirm UI and form to submit yes/ no
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T08:57:46.363

您可以使用一个简单的`GET`请求来获取辅助`.jsp`页面呈现的 HTML。基本上，在 Ajax 中，您可以使用 jQuery 执行以下操作：

```
$.get({
    url: "mysite.com/otherpage.jsp",
    data: "some data you want to send, optional",
    success: function(data, textStatus, jqXhr)//the response data, the ajax request status and the ajax request object itself {
        $('#someDiv').html(data);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T10:06:02.647

> 1）创建一个`<div id='someID'></div>`while初始页面加载
> 
> 2) 在按钮单击时，通过 javascript 使用您的新 jsp url 创建一个 iframe
> 
> 3）一旦加载了 iframe 内容，可能会在对话框窗口中将其显示为弹出窗口

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:14:24.077

AJAX 是您正在寻找的。

我强烈建议您使用( [showcase -> div](http://struts.jgeppert.com/struts2-jquery-showcase/index.action) )执行`AJAX`调用，但您可以立即尝试使用*已弃用*的插件，而无需下载任何库，只是为了让您有所了解。**`jQuery`**`Struts2` *`Dojo`*

 *```
<%@ taglib prefix="s"  uri="/struts-tags"      %>
<%@ taglib prefix="sx" uri="/struts-dojo-tags" %>

<head>      
    <sx:head/>
    <script>
       function loadAjax(){
           var div = dojo.widget.byId("myDiv");
           div.href = "yourAjaxAction.action";
           div.refresh();
       }
    </script>
</head>
<body>
    <input type="button" 
           value="Include a JSP fragment dynamically" 
           onclick="loadAjax();"/>

    <sx:div id="myDiv"> </sx:div>

</body> 
```

然后，您`yourAjaxAction.action`必须成功返回您想要包含的 JSP 片段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:12:52.573

另一种方法可以保持跨度并点击执行： [http ://sel2in.com/pages/prog/html/ajax/aPage2.html1](http://sel2in.com/pages/prog/html/ajax/aPage2.html1)

```
<span id=confirmSpan></span>
<script language="Javascript">

function logout1(){
    iconfirmSpan = document.getElementById("confirmSpan")
    if (!confirmSpan){
        alert("Error no confirmSpan contact support!");
    }
    confirmSpan.innerHTML = "<iframe src=\"http://sel2in.com/pages/prog/html/ajax/confirm.html\" height=400 width=700></iframe>"
    //in real can keep height 1 width 1 and location off page if you want it just to load elements, scripts etc
}
</script>
</head>
<body>
<form  id="search" action="/search" method="get">
<input type=button onclick=logout1() value="Do Action">
</form > 
```*

# ios - 如何将iOS中UIButton的状态配置更改回默认值

> ID：16162452
> 
> 赞同：0
> 
> 时间：2013-04-23T06:28:37.637
> 
> 标签：ios, uibutton

正如标题所示，需要将状态配置更改回默认值。我该怎么做？

在这方面需要一些指导。谢谢。

编辑：

我有一个测验功能。当一个人选择答案时，如果正确，则背景将变为绿色。否则，它将是红色的。当他选择另一个答案时，前一个按钮应该恢复到默认状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:34:56.373

您可以通过设置其属性来设置按钮属性

```
myButton.highlighted = YES/NO;
myButton.selected = YES/NO;
myButton.enabled = YES/NO; 
```

# java - 哈希图中最有效的键对象类型？

> ID：16162453
> 
> 赞同：6
> 
> 时间：2013-04-23T06:28:38.927
> 
> 标签：java, object, data-structures, hashmap, key

使用 a`HashMap`时，在速度方面，对象类型对元素检索有多大影响？假设我使用循环遍历大型哈希映射的可能键。我可以使用的最有效的密钥类型是什么？

到目前为止，由于简单起见，我使用 String 作为键对象类型。在编码时，这个问题突然出现在我的脑海中，引起了我的好奇心。我试图在网上搜索这个问题，但找不到我正在寻找的答案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:34:05.423

1.  关键`hashCode()`，`equals()`应该很快

2.  `hashCode()`应该分布良好以最小化哈希冲突

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:34:22.200

哈希映射会向您的密钥询问`hashCode()`. 如果生成哈希码所花费的时间不合理，则此类对象的插入和检索时间会很长。举个`java.net.URL`例子。它的 hashcode 方法执行 DNS 查找。这样的对象不会成为哈希映射的好键。

哪个是最好的钥匙没有统一的答案，因为没有最好的钥匙。用于哈希映射的最佳键是检索所需的键。只要确保钥匙的`hashCode()`速度很快并`int`适当地使用空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:33:11.223

重要的是*equals*和*hashCode*方法的实现。请参阅以下内容：[在 Java 中覆盖 equals 和 hashCode 时应考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

由于这些函数用于散列操作，因此当您对集合进行操作时，它们的效率就会发挥作用。

作为旁注，请记住参考链接中的观点：

> 确保您放入集合中的关键对象的 hashCode() 在对象位于集合中时不会更改。确保这一点的防弹方法是使您的密钥不可变，这还有其他好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:33:36.617

在您的情况下，重要的`hashCode`是元素方法和方法的速度`equals`。使用`Integer`s 很好，因为它们不需要对哈希值进行任何特殊计算。字符串也可以，因为哈希值是在内部缓存的，尽管它们在`equals`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:55:37.877

您是尝试通过*get*方法还是通过迭代从 HashMap 中检索值？至于*get*方法，上面的人都回答过了。

*如果您通过entrySet*方法迭代 HashMap ，则 HashMap 中键的类型无关紧要。*此外，在每次迭代中都有一个entrySet*的条目，查找值变得无用。另请注意，entrySet 通常比*values*方法和*keySet*方法更可取，因为它们在内部都使用 entrySet 迭代器并返回条目的键或值。

# android - 在 Android 上的 libgdx 中，如果应用程序被杀死，如何保存游戏状态？

> ID：16162461
> 
> 赞同：4
> 
> 时间：2013-04-23T06:28:52.237
> 
> 标签：android, variables, libgdx, android-lifecycle

在 Android 中，我们通常将所有**状态变量**保存在`onSaveInstanceState()` **回调**中，方法是将它们放在`Bundle`提供的中。

由于类不能使用/返回对象，人们如何处理**保存/加载游戏状态变量**？`libGDX``Bundle`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:10:58.450

这很简单！您可以为此使用[首选项](http://code.google.com/p/libgdx/wiki/Preferences)。您可以将值存储在首选项中。在 android 上，后端使用 Android 本身的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。在桌面上，它保存为用户文件夹中某处的 xml。
我写了一个简单的 Helper 来保存选项并获取我的游戏的选项。这是其中的一些代码。（注意，保存后不要忘记刷新）

```
public class PreferencesHelper {
    public final static String PREF_NAME_OPTION = "options";
    private final static String VOLUMEN = "volumen";
    private final static String VIBRATE = "vibrate";
    private final static String EFFECT_VOLUMEN = "effect";
    private final static String FIRST_START = "start";
    private Preferences optionPref = Gdx.app.getPreferences(PREF_NAME_OPTION);;

    public PreferencesHelper() {
        optionPref = Gdx.app.getPreferences(PREF_NAME_OPTION);
    }

    public float getVolumen() {
        return optionPref.getFloat(VOLUMEN);
    }

    public void setVolumen(float vol) {
        optionPref.putFloat(VOLUMEN, vol);
        optionPref.flush();
    }

    public boolean getVibrate() {
        return optionPref.getBoolean(VIBRATE);
    }

    public void setVibrate(boolean vibr) {
        optionPref.putBoolean(VIBRATE, vibr);
        optionPref.flush();
    }

    public float getEffectVolumen() {
        return optionPref.getFloat(EFFECT_VOLUMEN);
    }

    public void setEffectVolumen(float eff) {
        optionPref.putFloat(EFFECT_VOLUMEN, eff);
        optionPref.flush();
    }
} 
```

这就是我保存选项的方式。要保存一个角色，您也可以这样做，但要保存您需要的所有重要内容，以便在再次加载游戏时重新创建您的角色。您还可以拥有多个偏好！

我希望这会有所帮助。

# iphone - caricature - iOS 中的图像动画

> ID：16162464
> 
> 赞同：6
> 
> 时间：2013-04-23T06:29:02.847
> 
> 标签：iphone, ios, objective-c

![漫画图像动画](https://i.stack.imgur.com/rcAua.gif)

如何在 iOS 目标 c 中实现这种动画。

目前我已经为此实现了“CABasicAnimation”，但仍然无法非常顺利地实现这一点。

有什么建议吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:50:57.597

您需要将 Core Image 与不同失真滤镜的组合一起使用。

然后，您可以随着时间的推移为过滤器的强度设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:44:28.253

我不认为使用 CABasic 动画可以获得它。可能是由 CIFilterd 图像组合制作的一个小“电影”（检查文档中的 CIFilter 类）。另一种方法（但我正在写作）是用 CAShapeLayer 以某种方式掩盖图像并在其上使用 CAAnimation。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T10:30:57.113

正如 Leena 指出的，这是一个简单的图像循环。

在 Xcode 之外创建帧，然后以这种方式对其进行动画处理：

```
NSArray *frames = [NSArray arrayWithObjects:[UIImage imageNamed:@"firstFrame.png"],
                       [UIImage imageNamed:@"secondFrame.png"],
                       // add other frames
                       , nil];
UIImageView *animatedImage = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
animatedImage.animationImages = frames;
animatedImage.animationDuration = 3.0f; // seconds
animatedImage.animationRepeatCount = 0; // 0 = loops forever
[animatedImage startAnimating];
[self.view addSubview:animatedImage];
[animatedImage release]; 
```

# linux - 从文件重定向输入并显示输入

> ID：16162473
> 
> 赞同：0
> 
> 时间：2013-04-23T06:29:44.740
> 
> 标签：linux, redirect, input, io

有没有办法从文件中获取标准输入并在程序运行时在控制台中显示该输入？

例如：

```
std::string s;
std::cout << "Input: ";
std::cin >> s;
std::cout << "Output: " << s << std::endl; 
```

infile.txt：

```
apple 
```

./program < infile.txt 显示：

```
Input: Output: apple 
```

但我希望它显示：

```
Input: apple
Output: apple 
```

# objective-c - “objectWith”方法中“instancetype”关键字的用途？

> ID：16162474
> 
> 赞同：11
> 
> 时间：2013-04-23T06:29:48.773
> 
> 标签：objective-c

最近的 Objective-C 编译器引入了“instancetype”关键字，除其他外，它可用于提供类型化集合。. .

我看到了 instancetype 的另一个用途，即在类的“objectWith”类型方法中使用它。例如：

```
@interface Car

    +(instancetype)carWithWheels:(NSArray*)wheels;

@end 
```

理由是编译器将对 initWith 方法进行类型检查，但不会对“objectWith”方法进行类型检查。

除了可能更容易键入之外，使用“instancetype”代替实际的类名有什么好处？例如：

```
@interface Car

    +(Car*)carWithWheels:(NSArray*)wheels;

@end 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-23T06:50:04.467

通过使用`instancetype`，您是说子类将返回子类的对象。

如果我们有

```
@interface Car

    +(instancetype)carWithWheels1:(NSArray *)wheels;
    +(Car *)carWithWheels2:(NSArray *)wheels;

@end 
```

和

```
@interface VolkswagenBeetle : Car

@end 
```

then`+[VolkswagenBeetle carWithWheels1:]`保证返回`VolkswagenBeetle`;的实例 但`+[VolkswagenBeetle carWithWheels2:]`可能会返回 a `Buick`、 a`Caddilac`或 a `ChittyChittyBangBang`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:39:04.230

您可以继承`Car`并仍然受益于 instancetype。当然，您可以使用 id 来实现这一点，但是您会放松从 instancetype 获得的类型检查。我只是在应该返回当前类的对象（子类返回该子类的对象）的任何地方使用它，特别是在便利方法和其他东西中。

有一个很好的[答案可以提供帮助](https://stackoverflow.com/a/14111291/1032151)。

# python - 未找到 EOF 标记 - 如何在 PyPDF 和 PyPDF2 中修复？

> ID：16162478
> 
> 赞同：13
> 
> 时间：2013-04-23T06:30:14.920
> 
> 标签：python, pdf, pypdf

我正在尝试使用 Python 将几个 PDF 文件组合成一个 PDF 文件。我已经尝试过 PyPDF 和 PyPDF2 - 在某些文件上，它们都抛出了同样的错误：

PdfReadError：未找到 EOF 标记

这是我的代码 (page_files) 是要组合的 PDF 文件路径列表：

```
# use pypdf to combine pdf pages
output = PdfFileWriter()
for pf in page_files:
    filestream = file(pf, "rb")
    pdf = PdfFileReader(filestream)            
    for num in range(pdf.getNumPages()):
        output.addPage(pdf.getPage(num))            

# write final file
outputStream = file(pdf_full_path, "wb")
output.write(outputStream)
outputStream.close() 
```

我已经阅读了一些关于该主题的 StackOverflow 线程，但没有一个包含有效的解决方案。如果您已使用 Python 成功合并 PDF 文件，我很想听听如何。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-22T12:37:11.567

是否还有人在寻找合并 pdf 的“列表”：

注意：使用 glob 获取正确的文件列表。<- 这真的会让你的一天很安全^^

看看这个：[glob 模块参考](https://docs.python.org/3/library/glob.html#module-glob)

```
from PyPDF2 import PdfFileMerger, PdfFileReader, PdfFileWriter
import os
import glob

class MergeAllPDF:
    def __init__(self):
        self.mergelist = []

    def create(self, filepath, outpath, outfilename):
        self.outfilname = outfilename
        self.filepath = filepath
        self.outpath = outpath
        self.pdfs = glob.glob(self.filepath)
        self.myrange = len(self.pdfs)

        for _ in range(self.myrange):
            if self.pdfs:
                self.mergelist.append(self.pdfs.pop(0))
        self.merge()

    def merge(self):
        if self.mergelist:
            self.merger = PdfFileMerger()
            for pdf in self.mergelist:
                self.merger.append(open(pdf, 'rb'))  
            self.merger.write(self.outpath + "%s.pdf" % (self.outfilname))
            self.merger.close()
            self.mergelist = []
        else:
            print("mergelist is empty please check your input path")

# example how to use
#update your path here:

inpath = r"C:\Users\Fabian\Desktop\mergeallpdfs\scan\*.pdf" #here are your single page pdfs stored
outpath = r"C:\Users\Fabian\Desktop\mergeallpdfs\output\\" #here your merged pdf will be stored

b = MergeAllPDF()
b.create(inpath, outpath, "mergedpdf") 
```

# scala - 执行外部命令

> ID：16162483
> 
> 赞同：17
> 
> 时间：2013-04-23T06:30:25.917
> 
> 标签：scala, playframework, exec

我不知道它是 Scala 还是 Play！问题。我想从我的 Play 应用程序中执行一些外部命令，从命令中获取输出并根据命令输出向用户显示报告。任何人都可以帮忙吗？

例如，当我从 shell 输入*my-command*时，它会显示如下输出，我想捕获并在 Web 中显示：

```
Id    Name   IP
====================
1     A      x.y.z.a
2     B      p.q.r.s 
```

请不要担心输出的格式和解析。在功能上，我看起来像 PHP *exec*。我知道 java **Runtime.getRuntime().exec("command")**但是否有任何 Scala/Play 版本可以达到此目的？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-24T15:16:26.013

[Scala 流程包](https://www.scala-lang.org/api/current/scala/sys/process/index.html)`!!`的方法可以满足您的需求，它执行语句并捕获文本输出。例如：

```
import scala.sys.process._
val cmd = "uname -a" // Your command
val output = cmd.!! // Captures the output 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T06:50:43.110

```
scala> import scala.sys.process._
scala> Process("cat temp.txt")! 
```

这假设您的主目录中有一个临时文件。`!`用于实际执行命令。有关详细信息，请参阅 scala.sys.process。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-26T12:29:46.623

您可以使用该`Process`库：例如

```
import scala.sys.process.Process
Process("ls").!! 
```

以字符串形式获取文件夹中的文件列表。`!!`获取命令的输出

# javascript - 如何使用 jquery/ajax 将下拉列表的选定值显示到文本框中

> ID：16162487
> 
> 赞同：1
> 
> 时间：2013-04-23T06:30:37.073
> 
> 标签：javascript, ruby-on-rails, ruby, jquery

```
 <% form_for :credit_card, @cc, :url => '/credit_cards', :method => :post do |f| %>
  <%= f.hidden_field "job_id", :value => params[:job_type_id] %>
  <%= f.hidden_field "job_type", :value => "Job Hourly" %>
  <%= f.hidden_field "lead_id", :value => @job.lead_id %>
  <center><strong>ADD New Credit Card</strong> </center>
  <br/>

  <table align="left">
    <tr>
      <td> <label style="padding-left: 30px;">Type</label></td>
      <td><%= f.select(:card_type, CreditCard::TYPES, {:prompt => "Select Type", :selected => ""}) %></td>
    </tr>
    <tr>
      <td> <label style="padding-left: 30px;">Number</label></td>
      <td><%= f.text_field "card_number", "size" => 16, 'maxlength' => 16%></td>
    </tr>
    <tr>
      <td> <label style="padding-left: 30px;">Expiry</label></td>
      <td> <select id="cc_state" name="credit_card[expiration_month]">
          <%= options_for_select( [[ "Select Month", "" ]] + CreditCard::MONTHS )%>
        </select>
        <select id="cc_state" name="credit_card[expiration_year]">
          <%= options_for_select( [[ "Select Year", "" ]] + ((Date.today.year - 5)..(Date.today.year + 12)).collect{|x| [x,x]}.reverse )%>
        </select>
      </td>
      </td>
    </tr>
    <tr>
      <td> <label style="padding-left: 30px;">CVV</label></td>
      <td><%= f.text_field "security_code", "size" => 4, 'maxlength' => 4%></td>
    </tr>
    <tr>
       <td> <label style="padding-left: 30px;">Expiry</label></td>
       <td> <select id="cc_state" name="credit_card[expiration_year]">
          <%= options_for_select( [[ "Select Year", "" ]] + ((Date.today.year - 5)..(Date.today.year + 12)).collect{|x| [x,x]}.reverse )%>
        </select>
       </td>
    </tr>
<tr>
       <td> <label style="padding-left: 30px;">Location</label></td>
       <td><%= f.select(:id, @job_extra_stops.collect{|s| ["#{s.city},#{s.zip},#{s.state}", s.id]},:onchange => "display_dropdown(this)",:id => "dropdown_id", :prompt => "Select Location")%> </td> 

    </tr> 
    <tr><td> <label style="padding-left: 30px;">Street</label></td>
      <td><%= f.text_field "billing_street_address", "size" => 20 %></td></tr>
    <tr><td> <label style="padding-left: 30px;">City</label></td>
      <td><%= f.text_field "billing_city", "size" => 20 %></td></tr>
    <tr><td> <label style="padding-left: 30px;">State</label></td>
      <td><select id="cc_state" name="credit_card[billing_state]">
          <%= options_for_select( [[ "Select State", "" ]] + State::NAMES )%>
        </select></tr>
    <tr><td> <label style="padding-left: 30px;">Zip</label></td>
      <td><%= f.text_field :billing_zip, "size" => 12 %></td></tr>
    <tr>
      <td colspan="2" align="center"><%= submit_tag 'Save' %></td>
    </tr> 
```

这是视图文件中的代码。目前信用卡模型属性是在表单中手动输入然后保存的。但是我不想手动输入，而是想导入那些已经存在于 job_extra_stop 模型中的属性值。从下拉列表中选择该选项时，我想将下拉列表的那些值（来自 job_extra_stop 模型）映射到信用卡模型属性

这意味着当我选择特定选项时，state、zip、city 的值应显示在文本框中的下方，并在提交后保存在 credit_card 模型中。

我正在使用 rails 1.2.2 和 ruby​​ 1.8.6

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:11:16.313

在脚本中编写以下代码

```
function display() {    

    var val1 = ""
        var val2 = ""
        var e = ""

    e = document.getElementById('display_id')
    val1 = e.options[e.selectedIndex].textContent
    val2 = val1.split(',')

    document.getElementById('street').value = val2[0]
    document.getElementById('city').value = val2[1]
    document.getElementById('state').value = val2[2]
    document.getElementById('zip').value = val2[3]

     } 
```

在代码后面添加选择标签

```
<%= select_tag :id1, options_for_select([[ "Select Location", "" ]] + @job_extra_stops.collect{|s| ["#{s.st_name},#{s.city},#{s.state},#{s.zip}", s.st_name]}),:onchange => "display()", :id => 'display_id', :include_blank => 'Please add locations above' %> 
```

# firefox - 如何使用 Firefox SDK 访问 HTTP 身份验证对话框

> ID：16162488
> 
> 赞同：0
> 
> 时间：2013-04-23T06:30:42.287
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, http-authentication

我正在为 Linux 用户编写一个 Firefox 插件来传递 NTLM 身份验证站点的凭据。有些类似于使用 XUL 框架编写的 AutoAuth

[https://addons.mozilla.org/en-us/firefox/addon/autoauth/](https://addons.mozilla.org/en-us/firefox/addon/autoauth/)

我的问题是如何使用 Firefox SDK 访问身份验证对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T16:19:01.603

使用附加 sdk，您没有 XUL 覆盖，因此您真正可以做的唯一事情就是使用窗口观察器。由于弹出窗口被视为窗​​口，当它们在浏览器中弹出时，您将在`onTrack`函数中看到它们。

此示例代码监视窗口以寻找`chrome://global/content/commonDialog.xul`与自动身份验证插件所做的类似的窗口位置。该对话框用于许多身份验证问题，因此您必须执行检测 NTLM 身份验证的额外工作。

```
var { isBrowser } = require("sdk/window/utils");
var delegate = {
  onTrack: function (window) {
    if (!isBrowser(window) && window.location === "chrome://global/content/commonDialog.xul") {
       // this could be the window we're looking for modify it using it's window.document
    }
  },
  onUntrack: function (window) {
    if (!isBrowser(window) && window.location === "chrome://global/content/commonDialog.xul") {
       // undo the modifications you did
    }
  }
};
var winUtils = require("window-utils");
var tracker = new winUtils.WindowTracker(delegate); 
```

使用此代码，您几乎可以了解 autoauth 附加组件的 load() 函数。您可以使用`window.document.getElementById()`访问该窗口的 DOM 并更改其中的元素。

**注意**该`window-utils`模块已弃用，因此您需要跟上 SDK，因为它们从该模块移动到（希望）其他类似的东西。

# ios - 阿拉伯数据显示？？？？？？使用 afnetworking 库从 asp.net mvc 到 ios 应用程序的字符

> ID：16162494
> 
> 赞同：1
> 
> 时间：2013-04-23T06:31:30.810
> 
> 标签：ios, asp.net-mvc, arabic

阿拉伯数据显示？？？？？？从 asp.net mvc 到 ios app 的字符使用 afnetworking 库来处理响应对象。

```
#import "AppGateway.h"

//the web location of the service
#define kAPIHost @"domain"
#define kAPIPath @"Home/GetNews/"

@implementation AppGateway

/*Singleton*/
+(AppGateway*)sharedInstance
{
    static AppGateway *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[self alloc] initWithBaseURL:[NSURL URLWithString:kAPIHost]];
    });
    return sharedInstance;
}
-(AppGateway*)init{
    self = [super init];
    if(self!=nil) {
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }
    return self;
}

-(void)commandWithParams:(NSMutableDictionary *)params onCompletion:(JSONResponseBlock)completionBlock{
    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST"
                                                                      path:kAPIPath
                                                                parameters:params
                                                 constructingBodyWithBlock:^(id <AFMultipartFormData>formData){
    }];
    AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        NSLog(@"AFNTSUCCESS");
        //This is where response object carry arabic data corrupted to '??????????'
        completionBlock(responseObject);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"AFNTFAILURE");
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];
    [operation start];
}

@end 
```

这是我用来连接到 mvc 操作的课程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:03:49.170

是的，它起作用了，它不是来自服务器中的问题所在的 afnetworking 或 mvc。对此感到抱歉

# php - 未定义的变量：第 10 行和第 11 行中的 sdsdsd

> ID：16162495
> 
> 赞同：0
> 
> 时间：2013-04-23T06:31:32.057
> 
> 标签：php, phpmyadmin

这是我正在处理的代码：

```
<?php
include('../connect.php');
$id=$_SESSION['SESS_FIRST_NAME'];
$results = mysql_query("SELECT * FROM advisory WHERE     tid='$id'");
while($rows = mysql_fetch_array($results))
{
    $sdsdsd=$rows['level'];
    $sdsd=$rows['section'];
}

echo '<input type="hidden" value="'.$sdsdsd.'" name="level" />';
echo '<input type="hidden" value="'.$sdsd.'" name="section" />';
echo '<input type="hidden" value="'.$id.'"     name="tidsss" />';
$result = mysql_query("SELECT * FROM prereg WHERE     level='$sdsdsd' AND  section='$sdsd'");
while($row = mysql_fetch_array($result))
{
    echo '<tr class="record">';
    echo '<td  style="border-left: 1px solid     #C1DAD7">'.$row['fname'].'   '.$row['mname'].' '.$row['lname'].'</td>';
    echo '<td><div align="left"><input     type="hidden" value="'.$row['idnumber'].'"  name="idnumber[]" /><input type="hidden"     value="'.$row['schoolyear'].'"  name="schooly[]" /><input type="text" name="grade[]" />    </div></td>';
    echo '</tr>';
}
?> 
```

我不明白为什么`$sdsdsd`变量未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:36:03.313

可能是因为您的请求没有返回任何内容。

所以你的while循环永远不会执行，你的变量永远不会定义。

您应该在循环之前初始化它们。

```
<?php
// […]
$sdsdsd = null;
$sdsd = null;
while($rows = mysql_fetch_array($results))
{
     $sdsdsd=$rows['level'];
     $sdsd=$rows['section'];
}
// […]
?> 
```

**注意：**顺便说一下，这些对变量来说真的很糟糕。变量的名称应简要说明它们包含的内容或它们的用途等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:35:48.087

由于您在循环内部设置这些变量`while`并在外部使用它们，因此可以肯定的是，您实际上根本没有进入`while`循环。

您需要检查返回值`mysql_fetch_array`- 如果它是错误的，那么您的查询以某种方式失败。我要做的第一件事是输出`$id`以查看查询中使用的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:36:15.707

你忘记了`session_start();`，因为这个声明失败了

```
$id=$_SESSION['SESS_FIRST_NAME']; 
```

因为此语句失败并`$id`变为`NULL`并且您的查询没有给出结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:36:43.083

确定有受影响的行吗？当没有行时，您不设置变量`$sdsdsd`和`$sdsd`. 试一试`var_dump`等`$rows`调试！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:46:34.510

您应该学习先声明变量然后使用它，目前您在内部分配变量 $sdsdsd 而它在外部永远不可用。因此在while循环之前贴上它

```
$sdsdsd = "";
$sdsd    = ""; 
```

# c++ - [C++]Intellisense 报告类型的类参考

> ID：16162499
> 
> 赞同：0
> 
> 时间：2013-04-23T06:31:50.570
> 
> 标签：c++, intellisense, class-reference

几个星期以来，我一直在尝试解决这个问题，但我没有做任何事情来解决它。这似乎是 Intellisense 信息未在 .cpp 文件中更新的问题。

问题是头文件中特定类的类引用传递未被识别，而 Intellisense**仅在 cpp 文件中**被识别。在头文件中，引用被完美读取。

这是头文件，请原谅我在重组、合并函数和重新编写类的过程中出现的一些混乱：

```
#ifndef DAMAGE_H
#define DAMAGE_H

#include <string>
#include "entity.h"
#include "hardPoint.h"
#include <vector>

using std::string;
using std::vector;

class Damage
{
public:

    Damage();

    float findDType(string dType, float damage);

    void dmgProcessing(bAttacker& bAttacker, bTarget& bTarget);

    float dTPiercing1(float damage);
    float dTPiercing2(float damage);
    float dTPiercing3(float damage);

    float dTNapalm1(float damage);
    float dTNapalm2(float damage);
    float dTNapalm3(float damage);

    float dTDesructor(float damage);

    float dTNanite1(float damage);
    float dTNanite2(float damage);
    float dTNanite3(float damage);

    float dTDDay1(float damage);
    float dTDDay2(float damage);

    float dTStealth(float damage);

    float dTFOnly(float damage);

    float dTEMP1(float damage, Player& mPlayer, Hostile args[], string target);
    float dTEMP2(float damage, Player& mPlayer, Hostile args[], string target);
    float dTEMP3(float damage, Player& mPlayer, Hostile args[], string target);

    float dTVirus1();
    float dTVirus2();
    float dTVirus3();
    float dTVirus4();

    float dTMAccel(float damage);

    void bPAttack(bool allout, bool spread, bool wsystem, bool single);

    void setupWQueue(bAttacker& bAttacker, string atype);

    void cleanWQueue();

    float processWQueue(bAttacker& bAttacker, bTarget& bTarget);
    float processSDamage(bTarget& bTarget, string wdtype);
    float processSecDamage(bTarget& bTarget);

    void setupBAT(Entity* entity1, Entity* entity2);

    bool getSDNTurns();
    bool getSDNANTurns();

private:

    vector<hardPoint> weaponQueue;

    float vDamage; //Vanilla Damage
    float mDamage; //Modified Damage
    float fDamage; //Final Damage
    float sDamage; //Secondary Damage
    float tSDamage; //total secodary damage

    int i;

    int sDNTurns, sDNANTurns; //Number of turns to apply secondary damage for (N = Napalm, NAN = Nanite)

    int dLow, dHigh;

    string wdtype; //store weapon name

    int nSDamage, nADamage, nHDamage; //Health interface variables for nanite secondary damage
};
//#endif

/*Damage Types:

piercing1: Armor Piercing, does not affect hull
piercing2: Hull Piercing, does not affect armor
piercing3: Armor and Hull piercing
napalm1: low level napalm damage, lasts two turns
napalm2: medium level napalm damage, lasts four turns
napalm3: high level napalm damage, lasts six turns
destructor: higher damage to defenses
nanite1: low level nanite damage, does 5% of HP damage for two turns
nanite2: medium level nanite damage, does 8% of HP damage for four turns
nanite3: high level nanite damage, does 15% of HP damage for eight turns
doomsday1: large scale damage, kills off 25% of population instantly along with 15% of all infrastructure and 10% of biomass
doomsday2: larger scale damage, kills off 40% of population instantly along with 25% of all infrastructure and 18% of biomass
stealth: invisible to point defenses, point defenses will still have a 2% chance to destroy a missile volley per point defense up to 10%.
frigonly: only damages frigate class ships, no damage to higher classes
null: no special damage
emp1: low level shield damage, if shields down will cripple non-emp protected target for one turn
emp2: medium level shield damage, if shields down will cripple non-emp protected target for three turns
emp3: high level shield damage, if shields down will cripple non-emp protected target for seven turns
virus1: scrambles targeting systems of enemy ship, target will not attack for two turns and loses shields
virus2: scrambles targeting systems and crashes computer, target will not attack for five turns and loses shields
virus3: scrambles targeting systems, crashes computer, and disables life support and loses shields (RTS/RPG).  Crews of ships lower then crusier class can be killed in two turns and ship can be salvaged whole (twice the resources; RTS only)
virus4: crashes all systems and injects core breach code into engines and loses shields.  35% chance that the ship will self destruct over 4 turns, after which systems reboot and core breach stopped.  10% chance per 20 tech crewmen or 5 tech module on board to avert code breach. (RTS only)
massaccel: Mass Accelerator damage bypasses shield and armor and deals direct hull damage.

*/

class bTarget
{
public:

    bTarget();

    void getShip(Entity* entity);

    Ship returnShip(Entity* entity);

    Ship* Ship;
};

class bAttacker
{
public:

    bAttacker();

    void getShip(Entity* entity);

    Ship returnShip(Entity* entity);

    Ship* Ship;
};
#endif 
```

所有与 bTarget 和 bAttacker 相关的参考传递都可以在此头文件中找到，但是一旦我将函数定义放入 .cpp 文件中，Intellisense 就会通过声称定义与 void setupWQueue(error-type &bAttacker , string atype) 只是一个例子。

然而，直接访问 bAttacker 和 bTarget 类，例如 getShip 函数的定义，就可以了。

编辑：

为了彻底，以防万一其中的某些东西导致了这种情况，这里也是 cpp 文件；出于同样的原因，这将比标题更混乱（对不起！）：

```
#include <string>
#include "damage.h"
#include "planet.h"
#include "random.h"
#include "datasystem.h"

using namespace std;

#define EMP1DT 1
#define EMP2DT 3
#define EMP3DT 7

#define NP1P 0.15
#define NAN1P 0.05
#define NP2P 0.28
#define NAN2P 0.08
#define NP3P 0.46
#define NAN3P 0.15

#define NP1T 2
#define NAN1T 2
#define NP2T 4
#define NAN2T 4
#define NP3T 6
#define NAN3T 8

dataSystem ds;

int test = NAN1T;

Damage::Damage()
{

}

void Damage::dmgProcessing(bAttacker& bAttacker, bTarget& bTarget)
{
    setupWQueue(bAttacker, atype);

}

float Damage::dTEMP1(float damage, Player& mPlayer, Hostile args[], string target)
{

    if (target == mPlayer.getName()) //Consider creating main class or matrix for all fighting entities/teams to make this easier
    {
        if ((!mPlayer.Ship.isDisabled()) && (mPlayer.Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
        {
            mPlayer.Ship.disableShip(EMP1DT);
        }

        else if ((mPlayer.Ship.getShieldStatus()) && (mPlayer.Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
        {
            mDamage = damage / Random(8,10);
            return mDamage;
        }
    }

    else
    {

        for (i = 0; i <= sizeof(args)-1; i++)
        {
            if (target == args[i].getName())
            {
                if ((!args[i].Ship.isDisabled()) && (args[i].Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
                {
                args[i].Ship.disableShip(EMP1DT);
                }

                else if ((args[i].Ship.getShieldStatus()) && (args[i].Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
                {
                    mDamage = damage / Random(8,10);
                    return mDamage;
                }
            }
        }
    }
}

float Damage::dTEMP2(float damage, Player& mPlayer, Hostile args[], string target)
{

    if (target == mPlayer.getName()) //Consider creating main class or matrix for all fighting entities/teams to make this easier
    {
        if ((!mPlayer.Ship.isDisabled()) && (mPlayer.Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
        {
            mPlayer.Ship.disableShip(EMP2DT);
        }

        else if ((mPlayer.Ship.getShieldStatus()) && (mPlayer.Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
        {
            mDamage = damage / Random(5,7);
            return mDamage;
        }
    }

    else
    {

        for (i = 0; i <= sizeof(args)-1; i++)
        {
            if (target == args[i].getName())
            {
                if ((!args[i].Ship.isDisabled()) && (args[i].Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
                {
                    args[i].Ship.disableShip(EMP2DT);
                }

                else if ((args[i].Ship.getShieldStatus()) && (args[i].Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
                {
                    mDamage = damage / Random(5,7);
                    return mDamage;
                }
            }
        }
    }
}

float Damage::dTEMP3(float damage, Player& mPlayer, Hostile args[], string target)
{

    if (target == mPlayer.getName()) //Consider creating main class or matrix for all fighting entities/teams to make this easier
    {
        if ((!mPlayer.Ship.isDisabled()) && (mPlayer.Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
        {
            mPlayer.Ship.disableShip(EMP3DT);
        }

        else if ((mPlayer.Ship.getShieldStatus()) && (mPlayer.Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
        {
            mDamage = damage / Random(2,4);
            return mDamage;
        }
    }

    else
    {

        for (i = 0; i <= sizeof(args)-1; i++)
        {
            if (target == args[i].getName())
            {
                if ((!args[i].Ship.isDisabled()) && (args[i].Ship.getSShield() == 0)) //If ship is not disabled already and shilds are 0
                {
                    args[i].Ship.disableShip(EMP3DT);
                }

                else if ((args[i].Ship.getShieldStatus()) && (args[i].Ship.getSShield() != 0)) //If shields are enabled and are greater then 0
                {
                    mDamage = damage / Random(2,4);
                    return mDamage;
                }
            }
        }
    }
}

void Damage::bPAttack(bool allout, bool spread, bool wsystem, bool single)
{
    vDamage = 0.0f;
    mDamage = 0.0f;
    fDamage = 0.0f;

    if (allout)
    {
        fDamage = processWQueue(bAttacker);

        //Check for secondary damage
        if (getSDNTurns())
        {
            fDamage += processSecDamage(bAttacker);
            sDNTurns -= 1;
        }

        if (getSDNANTurns())
        {
            fDamage += processSecDamage(bAttacker);
            sDNANTurns -= 1;
        }

        hostile.takeSDamage(fDamage);
    }

    else if (spread)
    {

    }

    else if (wsystem)
    {

    }

    else if (single)
    {

    }
}

float Damage::processWQueue(bAttacker& bAttacker,bTarget& bTarget)
{
    for (i = 0; i < weaponQueue.size(); i++)
    {
        if (weaponQueue.at(i).getHPWType() == "laser")
        {
            wdtype = bAttacker.Ship->getLWDType(weaponQueue.at(i).getHPSlot()); //send slot of current laser weapon to ship for return of item name

            dLow = bAttacker.Ship->lBanks.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRLow();
            dHigh = bAttacker.Ship->lBanks.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRHigh();
        }

        else if (weaponQueue.at(i).getHPWType() == "missile")
        {
            wdtype = bAttacker.Ship->getMWDType(weaponQueue.at(i).getHPSlot()); //send slot of current missile weapon to ship for return of item name

            dLow = bAttacker.Ship->mTurrets.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRLow();
            dHigh = bAttacker.Ship->mTurrets.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRHigh();
        }

        else if (weaponQueue.at(i).getHPWType() == "bomb")
        {
            wdtype = bAttacker.Ship->getBWDType(weaponQueue.at(i).getHPSlot()); //send slot of current bomb weapon to ship for return of item name

            dLow = bAttacker.Ship->bHolds.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRLow();
            dHigh = bAttacker.Ship->bHolds.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRHigh();
        }

        else if (weaponQueue.at(i).getHPWType() == "rail")
        {
            wdtype = bAttacker.Ship->getRWDType(weaponQueue.at(i).getHPSlot()); //send slot of current rail gun weapon to ship for return of item name

            dLow = bAttacker.Ship->rMounts.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRLow();
            dHigh = bAttacker.Ship->rMounts.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRHigh();
        }

        else if (weaponQueue.at(i).getHPWType() == "heavy")
        {
            wdtype = bAttacker.Ship->getHWDType(weaponQueue.at(i).getHPSlot()); //send slot of current heavy weapon to ship for return of item name

            dLow = bAttacker.Ship->hWBays.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRLow();
            dHigh = bAttacker.Ship->hWBays.at(weaponQueue.at(i).getHPSlot()).hpWeapon.getWDRHigh();
        }

        if (wdtype != "null")
        {
            vDamage += Random(dLow, dHigh);
            mDamage += processSDamage(bTarget,wdtype);
        }

        else
        {
            vDamage += Random(dLow, dHigh);
        }               
    }

    return vDamage;
}

float Damage::processSDamage(bTarget& bTarget, string wdtype)
{
    if (wdtype == "napalm1")
    {
        if (sDamage > 0.0f)
        {
            sDamage += (0.50 * (vDamage * NP1P));
        }

        else
        {
            sDamage = vDamage * NP1P;
        }

        if (sDNTurns < NP1T)
        {
            sDNTurns = NP1T;
        }

    }

    else if (wdtype == "napalm2")
    {
        if (sDamage > 0.0f)
        {
            sDamage += (0.50 * (vDamage * NP2P));
        }

        else
        {
            sDamage = vDamage * NP2P;
        }

        if (sDNTurns < NP2T)
        {
            sDNTurns = NP2T;
        }
    }

    else if (wdtype == "napalm3")
    {
        if (sDamage > 0.0f)
        {
            sDamage += (0.50 * (vDamage * NP3P));
        }

        else
        {
            sDamage = vDamage * NP3P;
        }

        if (sDNTurns < NP3T)
        {
            sDNTurns = NP3T;
        }
    }

    else if (wdtype == "nanite1")
    {
        if (nSDamage > 0.0f)
        {
            nSDamage += (0.75 * (bTarget.Ship->getSShield() * NAN1P));
        }

        else
        {
            nSDamage = bTarget.Ship->getSShield() * NAN1P;
        }

        if (nADamage > 0.0f)
        {
            nADamage += (0.75 * (bTarget.Ship->getSShield() * NAN1P));
        }

        else
        {
            nADamage = bTarget.Ship->getSShield() * NAN1P;
        }

        if (nHDamage > 0.0f)
        {
            nHDamage += (0.75 * (bTarget.Ship->getSShield() * NAN1P));
        }

        else
        {
            nHDamage = bTarget.Ship->getSShield() * NAN1P;
        }

        if (sDNANTurns < NAN1T)
        {
            sDNANTurns = NAN1T;
        }
    }

    else if (wdtype == "nanite2")
    {
        if (nSDamage > 0.0f)
        {
            nSDamage += (0.75 * (bTarget.Ship->getSShield() * NAN2P));
        }

        else
        {
            nSDamage = bTarget.Ship->getSShield() * NAN2P;
        }

        if (nADamage > 0.0f)
        {
            nADamage += (0.75 * (bTarget.Ship->getSShield() * NAN2P));
        }

        else
        {
            nADamage = bTarget.Ship->getSShield() * NAN2P;
        }

        if (nHDamage > 0.0f)
        {
            nHDamage += (0.75 * (bTarget.Ship->getSShield() * NAN2P));
        }

        else
        {
            nHDamage = bTarget.Ship->getSShield() * NAN2P;
        }

        if (sDNANTurns < NAN2T)
        {
            sDNANTurns = NAN2T;
        }
    }

    else if (wdtype == "nanite3")
    {
        if (nSDamage > 0.0f)
        {
            nSDamage += (0.75 * (bTarget.Ship->getSShield() * NAN3P));
        }

        else
        {
            nSDamage = bTarget.Ship->getSShield() * NAN3P;
        }

        if (nADamage > 0.0f)
        {
            nADamage += (0.75 * (bTarget.Ship->getSShield() * NAN3P));
        }

        else
        {
            nADamage = bTarget.Ship->getSShield() * NAN3P;
        }

        if (nHDamage > 0.0f)
        {
            nHDamage += (0.75 * (bTarget.Ship->getSShield() * NAN3P));
        }

        else
        {
            nHDamage = bTarget.Ship->getSShield() * NAN3P;
        }

        if (sDNANTurns < NAN1T)
        {
            sDNANTurns = NAN3T;
        }
    }
}

float Damage::processSecDamage(bTarget& bTarget)
{
    if (getSDNTurns())
    {
        tSDamage += sDamage;
    }

    if (getSDNANTurns())
    {
        //Direct damage
        bTarget.Ship->setSShield(bTarget.Ship->getSShield()-nSDamage);
        bTarget.Ship->setSArmor(bTarget.Ship->getSArmor()-nADamage);
        bTarget.Ship->setSHull(bTarget.Ship->getSHull()-nHDamage);
    }

    return tSDamage;
}

bool Damage::getSDNTurns()
{
    return sDNTurns > 0;
}

bool Damage::getSDNANTurns()
{
    return sDNANTurns > 0;
}

void Damage::setupWQueue(bAttacker& bAttacker, string atype)
{
    cleanWQueue(); //Clear vector

    if (atype == "allout")
    {
        for (i = 0; i < bAttacker.Ship->getWVSize(); i++)
        {
            weaponQueue.push_back(bAttacker.Ship->getSHPoint(i));
        }
    }

    else if (atype == "spread")
    {
        for (i = 0; i < bAttacker.Ship->getSSize(); i++)
        {
            weaponQueue.push_back(bAttacker.Ship->getSHPoint(i));
        }
    }

    else if (atype == "wsystem")
    {
        for (i = 0; i < bAttacker.Ship->getWVSize(); i++)
        {
            weaponQueue.push_back(bAttacker.Ship->getSHPoint(i));
        }
    }

    else if (atype == "single")
    {
        weaponQueue.push_back(bAttacker.Ship->getWVHPoint(0));
    }
}

void Damage::cleanWQueue()
{
    weaponQueue.clear();
}

void Damage::setupBAT(Entity* entity1, Entity* entity2)
{
    bAttacker bAttacker;
    bTarget bTarget;

    bAttacker.getShip(entity1);
    bTarget.getShip(entity2);

    dmgProcessing(bAttacker, bTarget);
}

//bAttacker

void bAttacker::getShip(Entity* entity)
{
    Ship = entity->Ship.rShip(); //Create an easy to use interface to get the ship data
}

//bTarget

void bTarget::getShip(Entity* entity)
{
    Ship = entity->Ship.rShip();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:01:45.803

我最终放弃了，只是将 bAttacker 和 bTarget 移动并组合到一个名为 bEntity（战斗实体）的新类中，并引用它两次，为 Target 和 Attacker 标识符创建两个 bEntity 实例。

那样工作得很好，我想问题在于你不能定义多个不相关的类并正常访问它们（你可以这样做，但主类必须有一个引用或指向标题中其他类的指针）。

另一个原因可能是因为我忘记了 bAttacker 和 bTarget 的 cpp 文件中的构造函数，但无论如何我更喜欢我的新设置，更紧凑。

# java - 无法获取 img 标签

> ID：16162504
> 
> 赞同：0
> 
> 时间：2013-04-23T06:32:11.533
> 
> 标签：java, html, jsoup

我有个问题。当我尝试使用 Java 中的 Jsoup 从网页获取图像时。这是代码：

```
 String link = "http://truyentranhtuan.com/detective-conan/856/doc-truyen/";
    Document docs = Jsoup.connect(link).timeout(60000).get();
    Elements comics = docs.select("#hienthitruyen img");
    System.out.println(comics.size());
    for (Element comic : comics) {
        int i = 0;
        System.out.println(comic);
        String linkImage = comic.attr("src");
        if (!"".equals(linkImage)) {
            URL url = new URL(linkImage);
            BufferedImage image = ImageIO.read(url);
            ImageIO.write(image, "jpg", new File(i + ".jpg"));
            i++;
        }
    } 
```

问题是我无法在此网页中获得任何 img 标签。Elements 的大小始终为零。但是当我在这个网页中查看源代码时，img 标签总是在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:18:33.710

如果你查看真正的源代码，而不是 DOM 结构（例如，保存 HTML 页面并在记事本中打开它），你会看到那里没有 img 标签。它们都是通过 Javascript 动态填充的。

现在的问题是 Jsoup 并不意味着执行 Javascript，因此您只能在 Javascript 修改（填充图像）之前解析原始 DOM 结构。为了做你想做的事，你可以使用可以执行大部分 Javascript 的[HTMLUnit 。](http://htmlunit.sourceforge.net/)

# qt - QtCreator 项目菜单栏和代码可移植性

> ID：16162505
> 
> 赞同：0
> 
> 时间：2013-04-23T06:32:13.013
> 
> 标签：qt

正如我们所知，用 QT 编写的程序能够跨平台移植。

目前我正在使用QTcreator开发程序，在这里我可以直接编辑菜单栏并输入项目。但是这方面的代码在 .cpp 文件中根本不可见。

如下所示：---
[http://codeprogress.com/cpp/libraries/qt/QMenuBarAddMenu.php#.UXYeyaL-EfE](http://codeprogress.com/cpp/libraries/qt/QMenuBarAddMenu.php#.UXYeyaL-EfE)

1> 这个菜单栏的代码在哪里？

2> 还有一个问题是用（Windows 中的QTcreator）编写的GUI 程序是否能够在Linux 主机上运行？

3> Linux 也有 QT creator 吗？

请就这一点提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:46:04.750

1) 在 Qt Creator 中，单击`QMenuBar`并按“F1”或导航到“Help > Context Help”，同时光标在 上`QMenuBar`，或者您可以按“F2”或导航到“Tools > C++ > Follow Symbol under Cursor”，它将带您到定义 QMenuBar 的位置。右键菜单也非常有用。

2) 可能通过`wine`. 虽然大多数人会为其他操作系统重新编译它......所以将 Qt SDK for linux 下载到 linux 发行版上，并在那里构建它。

[http://qt-project.org/doc/qt-4.8/deployment.html](http://qt-project.org/doc/qt-4.8/deployment.html)

3) 是的。

[http://qt-project.org/downloads](http://qt-project.org/downloads)

[http://qt-project.org/downloads#qt-creator](http://qt-project.org/downloads#qt-creator)

但请务必也获得适用于 linux 的 SDK。

[http://qt-project.org/downloads#qt-lib](http://qt-project.org/downloads#qt-lib)

希望有帮助。

# iphone - 从照片库加载图像并按日期排序的内存问题

> ID：16162506
> 
> 赞同：2
> 
> 时间：2013-04-23T06:32:15.487
> 
> 标签：iphone, ios, photolibrary

我正在从我的照片库中获取图像，并根据资产的日期属性，将这些图像排列在不同的文件夹中。我想做的是从照片库中获取图像，根据日期存储它们。例如，如果获取的图像来自 4 月 23 日，则将它们存储在“April”文件夹中。我为此使用 WSAssetPickerController。请帮助我解决内存问题，因为我的应用程序由于设备上的内存问题而崩溃，这在模拟器中运行良好。

```
- (void)storePhotos:(NSArray *)assets {

    int index = 0;

    for (ALAsset *asset in assets) {

        NSLog(@"Current asset :%@ ",asset);
        NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

        NSDateFormatter *format = [[NSDateFormatter alloc] init];
        [format setDateFormat:@"MMMM dd, yyyy"];

        NSString *photoDate = [format stringFromDate:[asset valueForProperty:ALAssetPropertyDate]];

        resourceDocPath = [resourceDocPath stringByAppendingPathComponent:photoDate];

        // Create directory & Check directory
        BOOL checkDir = [self createDocumentDirectory:resourceDocPath fileName:asset.defaultRepresentation.filename];

        if (!checkDir) {
            continue;
        }

        // Write image
        NSString *writablePhotoPath = [resourceDocPath stringByAppendingPathComponent:asset.defaultRepresentation.filename];
        [self writeImage:writablePhotoPath WithImage:asset.defaultRepresentation.fullScreenImage];

        index++;
    }
}

- (void)writeImage:(NSString*)pstrPhotoPath WithImage:(CGImageRef)pImage {

     if (![[NSFileManager defaultManager] fileExistsAtPath:pstrPhotoPath]){

         UIImage *image = [[UIImage alloc] initWithCGImage:pImage];
         NSData *imageData = UIImagePNGRepresentation(image);
         [imageData writeToFile:pstrPhotoPath atomically:YES];

     }
}

- (BOOL)createDocumentDirectory:(NSString*) pCurrentFolder fileName:(NSString*) pStrFileName  {

    if (![[NSFileManager defaultManager] fileExistsAtPath:pCurrentFolder]){

        if ([self checkPhotoIsExistInDocument:pStrFileName]) {
            return FALSE;
        }

        NSError* error;
        if ([[NSFileManager defaultManager] createDirectoryAtPath:pCurrentFolder withIntermediateDirectories:NO attributes:nil error:&error]) {
            // success
            return TRUE;
        } else {
            NSLog(@"[%@] ERROR: attempting to write create MyFolder directory", [self class]);
            NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
            return TRUE;
        }
        return TRUE;
    } else {
        return TRUE;
    }
}

- (BOOL)checkPhotoIsExistInDocument:(NSString*) pStrImageName {

    NSString *bundleRoot = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];
    NSFileManager *manager = [NSFileManager defaultManager];
    NSDirectoryEnumerator *direnum = [manager enumeratorAtPath:bundleRoot];

    NSString *filename;

    while ((filename = [direnum nextObject] )) {
//        NSLog(@"%@", filename);
        if ([filename hasSuffix:pStrImageName]) {
            return TRUE;
        }
    }

    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:03:57.817

您在项目中使用 ARC 吗？因为您还没有释放任何正在分配和初始化的对象。

```
resourceDocPath
format
image
bundleRoot 
```

应在使用结束后立即释放。此外，如果您可以提供应用程序崩溃的日志，那将非常有用。

# android - 当我将地图放入 Scrollview 时，它会水平移动但不能垂直移动

> ID：16162507
> 
> 赞同：4
> 
> 时间：2013-04-23T06:32:16.487
> 
> 标签：android, map, scrollview

```
<ScrollView  
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" > 
            <LinearLayout
                android:id="@+id/below_layout_1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/layout_background" >
                <com.google.android.maps.MapView
                    android:id="@+id/mpDelivery"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                   android:clickable="true" >
                </com.google.android.maps.MapView>
                <LinearLayout
                    android:id="@+id/zoom"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_centerHorizontal="true" >
                </LinearLayout>
            </LinearLayout></ScrollView> 
```

这是我的 XML 文件。所以当我点击地图时，它水平移动意味着从左到右。有没有办法在 ScrollView 内双向滚动移动 MapView ？我怎样才能做到这一点？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T05:21:30.897

该站点的其他解决方案：

[ScrollView 中的 MapView？](https://stackoverflow.com/questions/6546108/mapview-inside-a-scrollview/21669595#21669595)

[ScrollView 正在捕捉谷歌地图的触摸事件](https://stackoverflow.com/questions/14025859/scrollview-is-catching-touch-event-for-google-map?lq=1)

对于 android map v2，请遵循[此解决方案](http://www.londatiga.net/it/programming/android/how-to-make-android-map-scrollable-inside-a-scrollview-layout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:37:12.317

尝试这个：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg" >

    <FrameLayout
        android:id="@+id/below_layout_1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

         <com.google.android.maps.MapView
                    android:id="@+id/mpDelivery"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                   android:clickable="true" >
                </com.google.android.maps.MapView>
        <LinearLayout
            android:id="@+id/zoom"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:gravity="center" >
        </LinearLayout>
    </FrameLayout>

</RelativeLayout> 
```

# php - 在drupal 7中使用规则保存内容后在事件上创建别名

> ID：16162510
> 
> 赞同：1
> 
> 时间：2013-04-23T06:32:22.440
> 
> 标签：php, drupal, drupal-rules

我在第一条规则中创建了两条规则

事件：-保存新用户帐户后

条件：-
用户具有角色参数：用户：[帐户]，角色：教师。

操作：- 创建一个新实体参数：实体类型：节点，内容类型：教师的个人资料，标题：[帐户：名称]，作者：[帐户] 提供变量：创建的实体（entity_created）

在第二条规则中：-

我采取了以下措施：-

事件：-保存新内容后。条件：- 内容是类型参数：内容：[节点]，内容类型：教师的个人资料。

操作：- 创建或删除内容的 URL 别名参数：内容：[node]，URL 别名：node/[site:current-user]/edit。

第一条规则完美运行但问题在于第二条规则它使用**url 创建一个别名：node/anonymous/edit**

我不知道这条规则有什么问题，任何人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:26:48.250

必须有“操作用户”或“当前用户”选项。如果用户将事件创建为访问者并且没有为“用户”提供任何值，那么它当然会采用“匿名”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:04:24.567

代替 token `[site:current-user]`，你必须使用 token `[node:author:name]`。

# matplotlib - 如何仅移动刻度标签（不移动相应的刻度）？

> ID：16162514
> 
> 赞同：13
> 
> 时间：2013-04-23T06:32:43.033
> 
> 标签：matplotlib

我正在使用 matplotlib 生成图表，并使用`set_ticks`and`set_ticklabels`标记 x 轴上的几个重要值。但是其中一些标签太靠近并且重叠。但我不知道如何在不移动刻度的情况下移动这些标签。

这是一个插图：

![重叠的刻度标签](https://i.stack.imgur.com/psnZs.png)

我尝试了几个技巧但都失败了，我在互联网上没有找到这个问题的答案。任何帮助，谢谢。

* * *

## 更新：

源代码：

```
fig = mpl.figure( figsize=(3, 3) )              # force figsize here to reproduce the problem.
ax = fig.add_subplot(1, 1, 1, frameon=False)
ax.set_xlim(-0.015, 1.515)
ax.set_ylim(-0.01, 1.01)
ax.set_xticks([0, 0.3, 0.4, 1.0, 1.5])
ax.grid(True)
mpl.show() 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/PF8af.png)

我尝试了几种技巧，最好的一种是：

```
fig = mpl.figure( figsize=(3, 3) )
ax = fig.add_subplot(1, 1, 1, frameon=False)
ax.set_xlim(-0.015, 1.515)
ax.set_ylim(-0.01, 1.01)
ax.set_xticks([0, 0.3, 0.4, 1.0, 1.5])
ax.set_xticklabels([0.0, "", "", 1.0, 1.5])
ax.set_xticks([0.35], minor=True)
ax.set_xticklabels(["0.3 0.4"], minor=True)
ax.grid(True)
mpl.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/Y2vtu.png)

但是在 x = 0.35 处有一个小勾号，我不知道如何删除它。

* * *

## 更新 2：

好的，我找到了如何自己删除小蜱虫的方法：

```
for line in ax.xaxis.get_minorticklines():
    line.set_visible(False) 
```

通过这种方式，我们可以利用次要刻度将刻度标签放在我们想要的任何位置。

感谢所有的热心人！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-09T16:01:31.840

对于寻找原始问题答案的人：它可能是更改 tick_label 对齐方式的一个选项。

这在matplotlib 网页上的[示例中进行了详细说明。](http://matplotlib.org/examples/pylab_examples/centered_ticklabels.html)基本上在上述情况下会使用

```
ax.get_xaxis().majorTicks[1].label1.set_horizontalalignment('right')
ax.get_xaxis().majorTicks[2].label1.set_horizontalalignment('left') 
```

使标签彼此远离

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T13:29:28.357

从您的评论“..在 x 轴上标出几个重要值”，我认为您不应该更改 xticks 和标签，而是添加带有适当注释的垂直线。

这意味着您的数据保持规则的网格并允许您对重要点进行着色，您也可以相当容易地添加数值。

例子

```
import pylab as py

# Plot a sinc function
delta=2.0
x=py.linspace(-10,10,100)
y=py.sinc(x-delta)

# Mark delta
py.axvline(delta,ls="--",color="r")
py.annotate(r"$\delta$",xy=(delta+0.2,-0.2),color="r",size=15)
py.plot(x,y) 
```

![简单的 sinc 和注解](https://i.stack.imgur.com/DIpHu.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T12:22:25.467

作为对所提问题的严格回答，您可以获得特定的刻度并使用[set_pad()](http://matplotlib.org/api/axis_api.html#matplotlib.axis.Tick.set_pad)

```
ax.get_xaxis().majorTicks[2].set_pad() 
```

我认为更好的做法是使用[autofmt_xdate](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.autofmt_xdate)

```
fig = plt.figure()
fig.autofmt_xdate() 
```

它可以很好地旋转 xtick 标签并允许大多数文本很好地适应而不会重叠。
如果它们仍然重叠 - 这意味着这些刻度非常靠近。然后出现的问题是两个如此紧密地结合在一起的滴答声对你的情节的观众有什么好处？

# asp.net - 如何显示自定义验证器错误消息的消息框？

> ID：16162515
> 
> 赞同：0
> 
> 时间：2013-04-23T06:32:43.533
> 
> 标签：asp.net, validation, messagebox, validation-controls

在我的用户控件中，我的代码如下：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
        <asp:CustomValidator ID="cvOrgTypeGrid" runat="server" Enabled="false" Display="Dynamic" 
            ErrorMessage="Please add rules to get eligible members" >
</asp:CustomValidator> 
```

在后面的代码中，我有一个功能：

```
 public void Validate(bool isOrgType)
    {
        if (!isOrgType) return;
        if (Rules.Any()) return;
        cvOrgTypeGrid.Enabled = true;
        cvOrgTypeGrid.IsValid = false;
    } 
```

我想在消息框中收到错误消息“请添加规则以获取符合条件的成员”。

任何人请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:43:19.717

您可以使用验证摘要控件，检查此 msdn[链接](http://msdn.microsoft.com/en-us/library/dd5c6s6h%28v=vs.71%29.aspx)

# ruby - 有没有更简洁的方法给 JSON 对象一个命名的根？

> ID：16162519
> 
> 赞同：0
> 
> 时间：2013-04-23T06:32:52.223
> 
> 标签：ruby, json, ember.js, jsonp

在提供它之前，我需要给这个对象一个命名的根，有没有更清洁的方法呢？

```
get '/api/ducks/:id' do |id|
    content_type :json
    duck = {
        duck: Duck.find(id)
    }
    JSONP duck
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:23:22.217

不知道你用的是什么orm

假设您正在使用活动记录

您可以在配置中设置一些适用于全局的位置

```
ActiveRecord::Base.include_root_in_json = true 
```

或者

```
Duck.find(id).as_json(:root=>true) 
```

[http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

也检查这个 SO 答案[https://stackoverflow.com/a/6515973/518832](https://stackoverflow.com/a/6515973/518832)

> 对于 MongoMapper

```
class Something
  include MongoMapper::Document
  self.include_root_in_json = true
end 
```

接着

```
JSONP Duck.where(:id=>id).to_json 
```

应该按照这个 github 评论工作 [https://github.com/jnunemaker/mongomapper/issues/392](https://github.com/jnunemaker/mongomapper/issues/392)

您还想检查来源它是如何工作的，只是为了获取知识

[https://github.com/jnunemaker/mongomapper/blob/master/lib/mongo_mapper/plugins/serialization.rb](https://github.com/jnunemaker/mongomapper/blob/master/lib/mongo_mapper/plugins/serialization.rb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:20:13.573

唯一更干净的方法是删除不需要的变量：

```
get '/api/ducks/:id' do |id|
    content_type :json
    JSONP { duck: Duck.find(id) }
end 
```

# iphone - 无法使用 NSDateFormatter 从字符串中解析日期

> ID：16162520
> 
> 赞同：0
> 
> 时间：2013-04-23T06:33:00.227
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我在使用字符串解析日期时卡住了一段时间`NSDateFormatter`

字符串中的日期格式如下

> 2011 年 1 月 1 日凌晨 12:00:00

下面是我用来解析的代码

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MM/dd/yyyy hh:mm:ss"];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
NSDate *date = [[NSDate alloc]init];
date = [dateFormatter dateFromString:@"1/1/2011 12:00:00 AM"]; 
```

此代码适用于日期 @"12/31/2011" 和格式 @"MM/dd/yyyy"

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:40:17.777

使用我的波纹管自定义方法并将该日期解析为另一种格式...

```
-(NSString *)changeDateFormat:(NSString*)stringDate dateFormat:(NSString*)dateFormat getwithFormat:(NSString *)getwithFormat{

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:dateFormat];

    NSDate *date = [dateFormatter dateFromString:stringDate];

    [dateFormatter setDateFormat:getwithFormat];

    NSString *convertedString = [dateFormatter stringFromDate:date];
    //NSLog(@"Converted String : %@",convertedString);
    return convertedString;
} 
```

像下面这样使用这种方法..

```
 NSString *strSDate = [self changeDateFormat:@"1/1/2011 12:00:00 AM" dateFormat:@"dd/MM/yyyy hh:mm:ss a" getwithFormat:@"dd/MM/yyyy"];
 NSLog(@"Converted String : %@",strSDate); 
```

`getwithFormat`在参数中设置您想要的任何格式，并在`dateFormat`您的日期字符串中设置参数格式...

**输出是 => 转换后的字符串：2011 年 1 月 1 日**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:40:09.350

尝试这个

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
//First format date from string
NSDate *date = [dateFormatter dateFromString:@"01/01/2011 12:00:00 AM"];

//Set date formatter to specific format
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];

//Log the value
NSLog(@"%@",[dateFormatter stringFromDate:date]); 
```

# performance - 如何有效地增加 IIS 7 中应用程序池的内存和缓存大小

> ID：16162524
> 
> 赞同：13
> 
> 时间：2013-04-23T06:33:27.180
> 
> 标签：performance, caching, iis, iis-7

我在互联网上搜索了如何在 IIS 7 中增加应用程序池的内存和缓存大小，但所有主题都很分散，我不知道将这些设置组合在一起的效果。

有人可以描述我如何增加 IIS 7 中应用程序池的内存和缓存大小吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T15:41:31.927

据我了解，输出缓存只能在 IIS 级别设置，而不是专门针对应用程序池。在 IIS 级别设置的任何内容都将应用于其下的所有网站。因此，您可以有效地在 Web 应用程序级别应用最大缓存大小。

如果您使用的是 windows 7 专业版（IIS 功能因操作系统而异），如果您打开 IIS 管理器并单击服务器名称，则在功能视图中有一个输出缓存功能。您可以对其进行编辑以设置最大缓存大小。如果将其设置为非常高的值，它将占用大量 RAM，并且可能会降低整个盒子的性能。

![在此处输入图像描述](https://i.stack.imgur.com/Xk9Wv.png)

![在此处输入图像描述](https://i.stack.imgur.com/2zVWj.png)

应用程序池本身可以有私有内存限制和虚拟内存限制。

主内存限制：工作进程在导致应用程序池回收之前可以消耗的最大私有内存量（以 KB 为单位）。

虚拟内存限制：工作进程在导致应用程序池回收之前可以消耗的最大虚拟内存量（以 KB 为单位）。

以上两个设置都默认设置为0，表示没有设置限制。

**长话短说：提高 IIS 服务器级别的输出缓存大小是满足您需求的最佳选择。**

# python - 字符串列表到整数元组列表中

> ID：16162525
> 
> 赞同：0
> 
> 时间：2013-04-23T06:33:31.057
> 
> 标签：python, list

我有一个清单：

`['(128, 134)', '(134, 146)', '(134, 150)', '(137, 143)', '(137, 146)', '(137, 150)', '(143, 150)']`

我想变成一个整数元组列表，所以这个列表将变为：

`[(128, 134), (134, 146), (134, 150), (137, 143), (137, 146), (137, 150), (143, 150)]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:39:38.647

您可以`literal_eval`从[`ast`](http://docs.python.org/2/library/ast.html)模块中使用，它将安全地将字符串评估为 Python 表达式。

```
>>> a = ['(128, 134)', '(134, 146)', '(134, 150)', '(137, 143)', '(137, 146)', '(137, 150)', '(143, 150)']
>>> from ast import literal_eval
>>> map(literal_eval, a)
[(128, 134), (134, 146), (134, 150), (137, 143), (137, 146), (137, 150), (143, 150)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T06:36:35.637

```
>>> import ast
>>> L = ['(128, 134)', '(134, 146)', '(134, 150)', '(137, 143)', '(137, 146)', '(137, 150)', '(143, 150)']
>>> [ast.literal_eval(s) for s in L]
[(128, 134), (134, 146), (134, 150), (137, 143), (137, 146), (137, 150), (143, 150)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:40:33.070

```
import re
l=['(128, 134)', '(134, 146)', '(134, 150)', '(137, 143)', '(137, 146)', '(137, 150)', '(143, 150)']
t = [ tuple(map (int, re.findall("\d+", v))) for v in l ] 
print t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:52:12.260

```
>>> L = ['(128, 134)', '(134, 146)', '(134, 150)', '(137, 143)', '(137, 146)', '(137, 150)', '(143, 150)']
>>> [tuple(map(int, s.strip('()').split(', '))) for s in L]
[(128, 134), (134, 146), (134, 150), (137, 143), (137, 146), (137, 150), (143, 150)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:39:17.690

```
def to_tuple(x):
    ints = x.strip('()').split()
    return tuple(int(m.strip(',')) for m in ints)

print [to_tuple(a) for a in aa] # where aa is your string 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T09:23:31.187

只是 eval 会做

```
[eval(i) for i in a] 
```

# java - SqlInjection 与准备好的语句没有绑定变量？

> ID：16162526
> 
> 赞同：1
> 
> 时间：2013-04-23T06:33:31.580
> 
> 标签：java, sql, sql-injection

正如我们所知，避免 sql 注入的最佳方法是使用带有绑定变量的准备好的语句。但我有疑问，如果我只使用准备好的语句而不是绑定变量，如下所示客户 id 来自用户界面

```
String query ="select * from customer where customerId="+customerId;
PreparedStatement stmt = con.prepareStatement(query); //line1 
```

即使我没有使用绑定变量，第 1 行是否会注意限制 sql 注入？

我同意最好的方法如下，但如果上述方法也可以解决 sql 注入问题，那么我更喜欢上面的方法（因为它是一个遗留项目）

```
String query ="select * from customer where customerId=?";
  PreparedStatement stmt = con.prepareStatement(query); 
  stmt.setInt(1, 100); 
```

不使用绑定变量的准备好的语句是否足以确保无法进行 sql 注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:46:05.497

第 1 行不会检查开发者是否想要删除表。如果您编写查询，则假定它没问题。

sql 注入的目标是准备允许在没有开发人员意愿或知识的情况下进行额外的 sql 查询的值。使用属性中的虚假值查询您的网站。例子：

```
 id = "'); DROP ALL TABLES; --";
        query = "select * from customer where customerId="+id; 
```

PreparedStatement 确保使用 setInt/setString/etc 添加到查询中的特殊符号（如 ' 或 "）不会干扰 sql 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:50:31.157

一个必须区分几个问题。

使用准备好的语句本身不会有任何帮助。
以及通常使用未准备好的方式没有害处。

仅当您需要**将动态部分插入 query**时，该东西才有效。**因此，在后一种情况下，这样的动态部分必须仅通过 placeholder**进入查询，实际值必须稍后绑定（占位符是 a`?`或代表查询中实际数据的任何其他标记）。

术语“准备好的语句”**意味着**对**所有**进入查询的动态数据使用*占位符。*所以，

 ***   如果您在查询中没有动态部分，那么即使不使用准备好的语句，显然也不会有注入。
*   如果您使用的是准备好的语句，但将值直接注入查询而不是绑定它们 - 它会很容易注入。

*所以，再一次 - 只有所有动态*数据准备语句的占位符才有效。它之所以有效，是因为：

*   每个动态值都必须**正确格式化**
*   准备好的语句使正确的格式化（或处理）*不可避免*。
*   *准备好的语句在唯一合适的地方进行*正确的格式化（或处理）——就在查询执行之前，而不是其他地方，所以，我们的安全不会依赖于像这样不可靠的来源
    *   一些“魔术”功能，宁愿破坏数据也不愿使其安全。
    *   一个（或几个）程序员的好意，他们可以决定在程序流的某个地方格式化（或不格式化）我们的变量。这是非常重要的一点。
*   准备好的语句影响进入查询的值，但不影响源变量，源变量保持不变，可以在进一步的代码中使用（通过电子邮件发送或显示在屏幕上）。
*   准备好的语句可以显着缩短应用程序代码，在后台进行所有格式化（*仅在驱动程序允许的情况下）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-23T13:15:04.430

我知道这是一篇较旧的帖子，我只是想补充一点，如果您可以确保只允许整数进入您的第 1 行查询，那么您可以避免注入攻击。字符串输入是注入攻击发生的地方。在上面的示例中，不清楚变量“customerId”是哪一类，尽管它看起来像一个 int。由于该问题被标记为 Java，因此您不能使用 int 进行注入攻击，所以您应该没问题。

如果它是第 1 行中的字符串，您需要确信“customerId”来自一个安全源，它必须是一个整数。如果它来自帖子表单或其他用户生成的字段，那么您可以尝试对其进行转义或将其转换为整数来确定。如果它是一个字符串，则将其转换为一个整数，您将不需要绑定参数。**

# javascript - 添加分页后AngularJS中的自定义过滤器

> ID：16162527
> 
> 赞同：1
> 
> 时间：2013-04-23T06:33:32.210
> 
> 标签：javascript, filter, angularjs, pagination, angularjs-ng-repeat

在对我的 ng-repeat 列表实施分页后（[在过滤后更新 AngularJS 中的分页](https://stackoverflow.com/questions/16144017/update-pagination-in-angularjs-after-filtering)）

```
<li ng-repeat="data in filtered = (list | filter:search) ... > 
```

我的自定义过滤器现在有问题

```
<li ng-repeat="data in filtered = (list | filter:search) | customFilter:search ... > 
```

我需要这个过滤器来搜索多种语言（选择两种或多种语言）。如果我将**过滤后的 = (list | filter:search)**中的**数据**替换为 list 中的数据，您将看到它正在工作。但我需要**过滤**我的分页。

jsFiddle： http: [//jsfiddle.net/StinsonMaster/SuEX6/4/](http://jsfiddle.net/StinsonMaster/SuEX6/4/)（基于上[一个线程的小提琴](http://jsfiddle.net/eqCWL/2/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T00:10:04.077

我建议不要在您的 ng-repeat 指令中使用表达式，而是将 ng-repeat 设置为等于列表控制器上的一个方法，该方法返回您要查找的子集或值。例如：

```
// In your controller

        $scope.filteredList = function() {
           return $filter('filter')($scope.list,{'language':search.language});
        }

// And in your ng-repeat 

        ng-repeat="(key,val) in filteredList()" 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T14:38:06.200

我想我误解了你原来的问题。

我重写了您的自定义过滤器。它并不完全是面向对象的，但稍加修饰它可能会更具可扩展性。基本上，您只需要比基本角度过滤器更具包容性的东西。

```
app.filter("customFilter", function() {
    return function(input, search) {
        if(search && search != undefined) {
            var _toRet = new Array();
            for(var i in search) {
                for(var k in input) {
                    if(search.indexOf(input[k].language) != -1 && _toRet.indexOf(input[k]) == -1) {
                        _toRet.push(input[k]);
                    }
                }
            }
            return _toRet;
        } else {
            return input;
        }
    };
}); 
```

另请注意对您的 ngRepeat 语法的更改。

```
ng-repeat="data in filtered = list | filter:search.name | customFilter:search.language | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit" 
```

[http://jsfiddle.net/doublekid/5Bs3h/](http://jsfiddle.net/doublekid/5Bs3h/)

# jstree - 通过 Javascript 更改 jstree 节点图标

> ID：16162531
> 
> 赞同：1
> 
> 时间：2013-04-23T06:33:51.250
> 
> 标签：jstree

我想根据其 ID 从我的 jstree 中选择一个特定节点，然后更改其图标。我想通过 javascript 执行此操作，但在 jstree 文档中找不到基本示例。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:56:13.927

我认为 jstree 没有为此提供任何 API。我只是查看了一个较旧的项目，我是这样做的：

```
$divTree.find("li[data-id=" + id + "] > a > ins.jstree-icon").css("background-image", "url(" + iconUrl + ")"); 
```

就我而言，我通过属性识别了节点`data-id`。如果您直接使用 ID，您可能必须将选择器调整为类似`#myId > a > ins.jstree-icon`.

希望这可以帮助！

编辑当根据它的 id 选择节点时，试试这个：

```
$divTree.find("#" + id + " > a > ins.jstree-icon").css("background-image", "url(" + iconUrl + ")"); 
```

也许你也可以这样做（没有性能损失，甚至性能提升？）

```
$"#" + id + " > a > ins.jstree-icon").css("background-image", "url(" + iconUrl + ")"); 
```

# plugins - 在哪里可以找到用于 XBMC 插件开发的完整“hello world”示例/教程？

> ID：16162535
> 
> 赞同：5
> 
> 时间：2013-04-23T06:34:06.483
> 
> 标签：plugins, xbmc

我想开始学习xmbc插件开发。

我阅读了官方文档，但我问你是否有一些资源可以一步一步地进入一个 hello-world 示例。

我昨天和今天谷歌了很长时间，但我无法全面了解开发过程。

我正在寻找有关以下方面的详细信息：

*   目录结构
*   为 hello world 创建最简单的 GUI（无警报，一个窗口）
*   带解释的代码
*   创建一个拉链
*   通过存储库安装
*   ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T20:29:40.330

我可以指出的最佳资源是： [http ://wiki.xbmc.org/index.php?title=Add-on_development](http://wiki.xbmc.org/index.php?title=Add-on_development)

它提供了很多信息，这些信息应该对您的第一步有益。

当然，论坛是一个收集信息的好地方：http: [//forum.xbmc.org/forumdisplay.php?fid=26](http://forum.xbmc.org/forumdisplay.php?fid=26)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-27T14:07:08.763

我来自 Kodi/XBMC 团队，刚刚更新了我们 wiki 上的 Hello World 教程：

[http://kodi.wiki/view/HOW-TO:HelloWorld_addon](http://kodi.wiki/view/HOW-TO:HelloWorld_addon)

这是一项正在进行的工作，但希望对于任何编写附加组件的人来说都是一个很好的起点。

我们的主要开发人员页面上还有其他教程：

[http://kodi.wiki/view/Add-on_development](http://kodi.wiki/view/Add-on_development)

# java - 需要获取有关 Permgen 中对象的信息

> ID：16162537
> 
> 赞同：2
> 
> 时间：2013-04-23T06:34:09.230
> 
> 标签：java, memory, permgen

我想获取有关将哪些内容放入 permgen 的信息。使用“jmap -permstat PID;”，我可以获得类、类加载器和编号的列表。占用的字节数，但我真正想看到驻留在那里的对象的内容，更具体地说是 permgen 中字符串文字的内容。

我尝试了visualVM，但它只提供了一个没有详细信息的图表。

我查看了这篇文章：[如何分析 PermGen 内容？](https://stackoverflow.com/questions/2842982/how-to-analyze-permgen-contents/7626113#7626113)但链接中的代码：[https](https://github.com/puneetlakhina/javautils/blob/master/src/com/blogspot/sahyog/PrintStringTable.java) ://github.com/puneetlakhina/javautils/blob/master/src/com/blogspot/sahog/PrintStringTable.java无法编译。

有没有其他出路或者无法在 permgen 中查看对象内容？

编辑：

我已经在我的 Eclipse 设置中安装了 MAT 并生成了我的程序的堆转储。我能够在 MAT 上可视化 heapdump，但仍然无法区分 heap 和 permgen 内存。有人可以指导我吗？

# macos - [[SKPaymentQueue defaultQueue] restoreCompletedTransactions] 没有响应

> ID：16162538
> 
> 赞同：8
> 
> 时间：2013-04-23T06:34:11.683
> 
> 标签：macos, in-app-purchase, storekit

我正在尝试为我的 Mac 应用设置应用内购买。购买产品工作正常，但我无法让 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions] 工作。

设置了一个交易观察器（否则购买将不起作用）并使用 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions] 恢复所有以前的购买。

StoreKit 现在应该使用***paymentQueue:updatedTransactions:***来恢复交易和***paymentQueueRestoreCompletedTransactionsFinished:***或***paymentQueue:restoreCompletedTransactionsFailedWithError:***来报告成功或失败。但是没有调用这些方法。绝对没有回应。

如果我使用 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions] 我得到以下输出：

> 忽略 restoreCompletedTransactions 因为已经恢复事务

有很多讨论 restoreCompletedTransactions 返回一个空结果。但就我而言，根本没有结果。

我怎样才能找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-24T09:56:59.303

无法在模拟器中测试 AFAIK InApp 购买。

**你需要一个真实的设备来测试**！

# linux - 如何在 perl 中安装 parallel-forkmanager

> ID：16162539
> 
> 赞同：12
> 
> 时间：2013-04-23T06:34:16.183
> 
> 标签：linux, perl, parallel-processing

我厌倦了使用使用parallel:ForkManager的perl脚本来并行运行多个作业。

```
#!/usr/bin/perl  -w

use Parallel::ForkManager;

my @make_obj = qw(
 mode1_testlist
 mode1_testlist1
 mode1_testlist2
);

my $fm = $pm = Parallel::ForkManager-> new(3);
foreach my $obj (@make_obj) {
  $fm->start and next;
  print("make regression MODE=1 MODELIST=$make_obj");
  $fm->finish();
} 
```

但它使我陷入错误。

*无法在 @INC 中找到 Parallel/ForkManager.pm（@INC 包含：/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 / usr/lib/perl5/site_perl /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl /usr/ lib64/perl5/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/5.8.8 .) 在 parallel_run.pl 第 3 行。开始失败 - 编译在 parallel_run.pl 第 3 行中止。*

我已经下载了*Parallel-ForkManager-1.03.tar.gz*但我不知道在哪里保存它我的意思是如何安装它。

我试过 perl Makefile.PL && make test && make install

```
WARNING: META_MERGE is not a known parameter.
WARNING: BUILD_REQUIRES is not a known parameter.
WARNING: LICENSE is not a known parameter.
Checking if your kit is complete...
Looks good
'BUILD_REQUIRES' is not a known MakeMaker parameter name.
'LICENSE' is not a known MakeMaker parameter name.
'META_MERGE' is not a known MakeMaker parameter name.
Writing Makefile for Parallel::ForkManager
cp lib/Parallel/ForkManager.pm blib/lib/Parallel/ForkManager.pm
PERL_DL_NONLAZY=1 /usr/bin/perl "-MExtUtils::Command::MM" "-e"test_harness(0,'blib/lib', 'blib/arch')" t/*.t
                                                                                            t/00-load.............ok 1/3    (in cleanup) Undefined subroutine 
&File::Path::remove_tree called at /h/altera_dump2/vjain419/regression_flow_bck
/regression_flow/MSS1/hw/verif/top_/00e/tools/Parallel-ForkManager-1.03/blib
/lib/Parallel  /ForkManager.pm line 662.
t/00-load.............ok
t/01-utf8-all.........skipped
    all skipped: Need utf8::all for this test crashing on Windows
    t/02-callback.........Array found where operator expected at t/02-callback.t line
    21,at  end of line
    (Do you need to predeclare explain?)
    syntax error at t/02-callback.t line 21, near "explain @out"
   xecution of t/02-callback.t aborted due to compilation errors.
   # Looks like your test died before it could output anything.
   t/02-callback.........dubious                                                
    Test returned status 255 (wstat 65280, 0xff00)
     DIED. FAILED tests 1-2
    Failed 2/2 tests, 0.00% okay
    t/03-callback-data....Array found where operator expected at t/03-callback-data.t line 13, at end of line
    (Do you need to predeclare explain?)
   syntax error at t/03-callback-data.t line 13, near "explain @out"
   Execution of t/03-callback-data.t aborted due to compilation errors.
    # Looks like your test died before it could output anything.
    t/03-callback-data....dubious                                                
    Test returned status 255 (wstat 65280, 0xff00)
    DIED. FAILED test 1
    Failed 1/1 tests, 0.00% okay
   Failed Test          Stat Wstat Total Fail  Failed  List of Failed
   t/02-callback.t       255 65280     2    4 200.00%  1-2
   t/03-callback-data.t  255 65280     1    2 200.00%  1
   1 test skipped.
   Failed 2/4 test scripts, 50.00% okay. 3/6 subtests failed, 50.00% okay.
   make: *** [test_dynamic] Error 255 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T06:36:36.660

只需使用

```
cpan Parallel::ForkManager 
```

或者，在确保已安装其依赖项（POSIX、Storable、File::Spec、File::Temp、File::Path 2.00 和 Test::More 0.81_01）后执行以下命令：

```
tar xvzf Parallel-ForkManager-1.03.tar.gz
cd Parallel-ForkManager-1.03
perl Makefile.PL && make test && make install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T18:19:13.297

就像对已接受答案的一些评论所暗示的那样，可能缺少依赖项。以下对我有用：

cpan升级测试::更多

cpan 并行::ForkManager

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T15:49:28.597

您需要运行 dmake，而不是 make

```
perl Makefile.PL && dmake test && dmake install 
```

参考：[http ://www.perlmonks.org/?node_id=946668](http://www.perlmonks.org/?node_id=946668)

# php - php和javascript之间共享访问限制

> ID：16162542
> 
> 赞同：2
> 
> 时间：2013-04-23T06:34:32.450
> 
> 标签：php, javascript, json, security, web-applications

### 实际问题

1.  如何“映射”访问限制以便可以从 php 和 javasript 使用？
2.  我应该使用哪种方法在 php 和 javascript 之间共享访问限制/规则？

### 解释

我使用 php 创建了一个 RESTful 后端，它将使用上下文感知访问控制来限制数据访问和修改。例如，一个人可以修改属于他的地址信息，并且可以查看（但不能修改）同一组中所有其他人的地址信息。当然，组管理员可以修改该组中所有人员的地址详细信息。

现在，php 方面非常“简单”，因为这只是一堆检查。Javascript 方面也很“简单”，因为它也只是一堆检查。这里真正的问题是如何让这些支票来自同一个地方？

Javascript 使用检查来显示/隐藏编辑/保存按钮。PHP 使用检查来进行实际更改。

**是**的，我知道如果我在服务器上运行 javascript（NodeJS 等），情况会更简单，但是后端已经完成，此时改变方式会导致重大挫折。

**也许**有人已经设计了一种以“被动”方式对访问检查进行建模的方法，然后只使用某种“编译器”来运行实际检查？

**编辑：**

值得一提的是，前端（js）部分是用AngularJS构建的......

**编辑2**

这是一些伪代码，用于澄清我认为我正在寻找的内容，但完全不确定这是否可以大规模实现。从好的方面来说，所有访问限制都将集中在一个地方，并且在需要时易于修改。在黑暗的一面，我将不得不用两种语言编写 AccessCheck 和 canAct 函数，或者想出一种方法来 JIT 将一些伪代码编译为 javascript 和 php :)

```
AccessRestrictions = {
    Address: {
        View: [
            OWNER, MEMBER_OF_OWNER_PRIMARY_GROUP
        ],
        Edit: [
            OWNER, ADMIN_OF_OWNER_PRIMARY_GROUP
        ]
    }
}

AccessCheck = {
    OWNER: function(Owner) {
        return Session.Person.Id == Owner.Id;
    },
    MEMBER_OF_OWNER_PRIMARY_GROUP: function(Owner) {
        return Session.Person.inGroup(Owner.PrimaryGroup)
    }
}

canAct('Owner', 'Address', 'View') {
    var result;
    AccessRestrictions.Address.View.map(function(role) {
        return AccessCheck[role](Owner);
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:44:17.913

第一件事。

您不能“在服务器上运行 JavaScript”，因为 Javascript 总是在客户端上运行，就像 PHP 总是在服务器上运行而不是在客户端上运行一样。

接下来，这是我的想法。

1.  定义执行检查所需的小型函数库。这可以像单个函数一样简单，它为您的权限返回布尔值或任何格式。确保返回的值对 PHP 和 Javascript 都有意义（这意味着，返回 JSON 字符串的频率往往更高）

2.  在您的主要 PHP 脚本中，当您需要检查权限并使用您定义的函数来确定用户是否被允许时，请包含该库。

3.  您的前端是需要更新最多的前端：当您需要确定用户的权限时，向您的服务器发出 AJAX 请求（如果您当前的脚本是，您可能需要编写一个类似于 #2 的新脚本来处理 AJAX 请求'不够灵活）这将简单地重用您的权限库。由于返回值采用 JavaScript 易于读取的格式，因此当您收到响应时，您将能够检查要向用户显示的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:36:40.600

这个问题有一些解决方案。我假设您存储会话变量，例如 PHP 会话中授权用户的名称。假设您需要共享的只是 $authenticated_user 变量。我假设我只是一个字符串，但它也可以是一个具有权限等的数组。

如果在加载 AngularJS 应用程序之前 $authenticated_user 是已知的，您可以准备一个小的 PHP 文件，它模仿如下的 JS 文件：

配置.js.php：

```
<?php
session_start();
$authenticated_user = $_SESSION['authenticated_user'];
echo "var authenticated_user = '$authenticated_user';";
?> 
```

如果您将它包含在应用程序的标头中，它将告诉您谁在服务器端登录。客户端只会看到这个 JS 代码：

```
var authenticated_user = 'johndoe'; 
```

你也可以用 ajax 加载这个文件，如果你把它包装在一个函数中，甚至更好的 JSONP：

```
<?php
session_start();
$authenticated_user = $_SESSION['authenticated_user'];
echo <<<EOD;
function set_authenticated_user() {
    window.authenticated_user = '$authenticated_user';
}
EOD;
?> 
```

# c# - 如何在C#中重写最后一个单词

> ID：16162548
> 
> 赞同：0
> 
> 时间：2013-04-23T06:35:23.560
> 
> 标签：c#, word

如何更改或重写类型的最后一个字。例如：and = 和。所以有人可以帮助我做到这一点并告诉我如何做。另外，当我学习这种语言时，我如何加入更多的单词。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:38:40.547

```
string[] words = sentence.Split(' ');
words[words.Length - 1] = "newWord";
sentence = string.Join(" ", words); 
```

# java - 使用 p:calendar 相互限制开始和结束日期时间（无验证）

> ID：16162554
> 
> 赞同：39
> 
> 时间：2013-04-23T06:35:52.737
> 
> 标签：java, ajax, jsf, primefaces, calendar

我们需要向用户呈现两个 p:calendar 组件，分别代表一个开始日期和结束日期。两个日期时间都有日期、小时和分钟。PrimeFaces 具有可用的完美`mindate`、`maxdate`、`minHour`、`maxHour`、`minMinute`和`minMinute`属性。

现在的要求是：

无法将开始日期时间设置为大于或等于结束日期时间的任何值。不可能将结束日期时间设置为小于或等于结束日期时间的任何值。

以下等式应该成立：

```
begin datetime < end datetime 
```

现在我们尝试了以下 JSF：

```
<p:calendar id="begin-date"
            value="#{debugManager.selectedBeginDate}"
            mindate="#{debugManager.minBeginDate}"
            maxdate="#{debugManager.maxBeginDate}"
            maxHour="#{debugManager.maxBeginHour}"
            maxMinute="#{debugManager.maxBeginMinute}"
            pattern="yyyy-MM-dd HH:mm"
            showButtonPanel="true"
            readonlyInput="true"
            navigator="true"
            showOn="button"
            required="true">
    <p:ajax event="dateSelect" update="end-date" />
</p:calendar>

<p:calendar id="end-date"
            value="#{debugManager.selectedEndDate}"
            mindate="#{debugManager.minEndDate}"
            minHour="#{debugManager.minEndHour}"
            minMinute="#{debugManager.minEndMinute}"
            pattern="yyyy-MM-dd HH:mm"
            showButtonPanel="true"
            readonlyInput="true"
            navigator="true"
            showOn="button">
    <p:ajax event="dateSelect" update="begin-date" />
</p:calendar> 
```

这是一个示例性的最小/最大方法（结束日期的 mindate）：

```
public Date getMinEndDate()
{
    return this.getSelectedBeginDate();
} 
```

如您所见，最短结束日期是当前 AJAX 选择的开始日期。正确设置结束日期不允许将开始日期设置为超过结束日期。

当将时间纳入方程式时，问题就开始了……

由于 p:calendar 的接口有单独的方法，bean 必须提供逻辑：

```
public int getMinEndHour()
{
    Date selectedBeginDate = this.getSelectedBeginDate();
    Date selectedEndDate = this.getSelectedEndDate();

    if ( selectedBeginDate != null && DateUtil.isSameDay( selectedBeginDate, selectedEndDate ) )
    {
        return DateUtil.getHourOf( selectedBeginDate );
    }

    return ComplianceConstants.DEFAULT_COMPLIANCE_CASE_MIN_END_HOUR;
} 
```

这基本上只说明如果已设置开始日期并且开始日期和结束日期当前相同，则将可选择的结束时间（`minHour`结束日期）限制为开始时间。

操作：

```
Set the begin datetime to 2013-04-20 12:34 (legit)
Set the end   datetime to 2013-04-22 00:00 (legit) 
```

现在结束日期的时间位于 00:00，只要将结束时间调整为至少 12:35，就应该允许选择日历日期 2013-04-20。

但是 p:calendar 组件现在无法知道这一点

```
sets the end datetime to 2013-04-20 00:00 (legit, but false) 
```

...

现在的问题是，当用户在日历中按下某个新的结束日期时，mindate/maxdate 属性不能限制用户点击与开始日期相同的日期。如果现在结束日期**时间**恰好在**同一个开始日期的时间**之前，那么我们无能为力（这是错误的）。

现在的后续问题是用户能够关闭日历并只需按下提交按钮即可将虚假数据插入数据库。当然，可以/应该运行验证器，但**我们必须以某种方式在没有验证器的情况下实现这一点**。

如果日期在同一天，我们接下来尝试的是修补`setSelectedBeginDate( Date selectedBeginDate )`和`setSelectedEndDate( Date selectedEndDate )`调整设置时间部分的方法。`java.util.Date`像这样的东西：

```
public void adjustSelectedEndDate()
{
    if ( this.selectedEndDate != null )
    {
        this.log.infov( "adjustSelectedEndDate: b-hour = {0}, e-hour = {1}", DateUtil.getHourOf( this.selectedBeginDate ), DateUtil.getHourOf( this.selectedEndDate ) );

        if ( DateUtil.isSameDay( this.selectedBeginDate, this.selectedEndDate ) &&
            ( DateUtil.getHourOf( this.selectedEndDate ) < DateUtil.getHourOf( this.selectedBeginDate ) ) ||
              DateUtil.getHourOf( this.selectedEndDate ) == DateUtil.getHourOf( this.selectedBeginDate ) && DateUtil.getMinuteOf( this.selectedEndDate ) <= DateUtil.getMinuteOf( this.selectedBeginDate ) )
        {
            this.log.info( "Adjusting selected end date!" );

            this.selectedEndDate = DateUtil.addOneMinuteTo( DateUtil.copyTime( this.selectedBeginDate, this.selectedEndDate ) );
        }
    }
} 
```

这要求我们添加`@this`每个`update`属性，`p:calendar`以便在更新期间调用相应的 getter（`getSelectedBeginDate()`和+ 最小/最大限制器）。`getSelectedEndDate`

然而，在更新上放置一个`@this`会混淆 p:calendar 组件，使时间滑块只能滑动一次。随后的滑块事件将被简单地忽略，表现为损坏。

**Q的**

*   您通常如何解决这个问题？
*   是用`p:remoteCommand`的方式来达到我们想要的吗？

**可选问**：

*   为什么没有实施 PrimeFaces p:calendar 来提供单个 minDateTime 和 maxDateTime，这可能会解决手头的问题？

我敢打赌，我描述的这种情况之前已经解决了。如果您能描述您设法解决此问题的方法（甚至分享部分解决方案），我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T04:55:23.740

**前言：**

我不与 JSF 合作，但有几件事可能会引导你回到你想去的地方：

a) 在[标准日历中仅使用 dateTime 的日期部分时](https://stackoverflow.com/questions/13198609/java-calendar-getting-difference-between-two-dates-times-off-by-one)，请考虑使用：

```
someCalendar.set(Calendar.MILLISECOND, 0) 
```

b) 考虑使用[joda-time](http://joda-time.sourceforge.net/) ，因为在许多情况下，为了正确性、性能和易用性，它似乎经常被推荐（[here](https://stackoverflow.com/questions/589870/should-i-use-java-date-and-time-classes-or-go-with-a-3rd-party-library-like-joda/589940#589940)、[here](https://stackoverflow.com/questions/589870/should-i-use-java-date-and-time-classes-or-go-with-a-3rd-party-library-like-joda)和[许多其他地方）而不是标准库。](https://stackoverflow.com/questions/tagged/jodatime)

c) 确保您的 bean 范围在每个 ajax 调用（不重定向，仅发送标准回发等）中幸存，并且每个事件处理程序都在获取 faces 上下文（例如`FacesContext facesContext = FacesContext.getCurrentInstance();`）

d)`mindate`之类的可能不会像您期望的那样工作，而且我不认为自动行为可以如此容易地插入。

**当这些选项不可用时，您必须自己完成所有操作：**

*哲学/用户体验：* 我要做的第一件事是从这对日期中消除对安排或视角的期望。不要将该对视为在时间轴上暴露或期望方向的向量。

*   换句话说，`start`或`from`日期总是小于或早于`end`或`to`日期吗？不，正如查询历史数据或对尚未发生或已经发生的事件应用更正所看到的那样？

    这种含义很容易使用户混淆他们是“返回”还是“前进”（并且很容易混淆您自己）。相反，我会将一对在它们之间有一个时间段的日期视为公正而简单的那个`a pair of dates`或声明一个间隔的 a`range`或 a `period`，并根据任何随后选择的值推断它们在时间线上的相对位置。通过这种方式，您可以尊重日期从不相等的各自和固有的要求，左边总是在左边，右边总是在右边。

我们无法推断“开始”或“从”是什么意思，但我们可以推断出一些意义和相对关系：在时间轴上的右、左和中间。**注意：在进行任何计算或比较之前，始终将日期解析为 UTC。**

```
long oneDateValue = oneDate.toUtc().toMilliseconds();
long anotherDateValue = anotherDate.toUtc().toMilliseconds();

long right = max (oneDateValue, anotherDateValue);
long left = min (oneDateValue, anotherDateValue); 
```

*评估精度：* 在使用任何语言处理一系列日期时，我会考虑的第二件事类似于处理浮点数的方式。对于比较，不要比较是否相等，而是将增量与“可接受的错误级别”进行比较。换句话说，应用程序实际上只关心一定程度的精度，因此请确保仅捕获和考虑该精度：

```
const int dateTimeResolutionInMs = 86400000; // milliseconds per day

public bool areEssentiallySame(long left, long right) {

   // the difference between right and left is less than our precision 
   // requires, thus dates are effectively the same
   return (right - left < dateTimeResolutionInMs);
} 
```

*强制精度：* 第三，即使在分辨率范围内，我们如何解决值的差异？（Out 应用程序的精确度超出了它可以处理或预期或需要的程度）。

`long diff = value % dateTimeResolutionInMs;`

1.  截短： `return value - diff;`

2.  最近（w/bias）： `return value + (diff < dateTimeResolutionInMs/ 2) ? -1 * diff : dateTimeResolutionInMs - diff;`

3.  其他：还有许多其他策略可以将值缩小或扩大到首选分辨率或精度

*附录：* 至于获取回发/Ajax 调用以返回具有您对`calendar`元素触发的事件的期望值的视图，如果前言中的注释没有，您可能希望将该问题分离到一个新问题带您到任何地方，并且您[确定您的 bean 已正确注册和识别。](https://stackoverflow.com/questions/11012301/how-to-set-currentdate-as-mindate-in-calendar-component-of-primefaces) 您可能会遇到一些特定于浏览器/浏览器版本的问题，这些问题会导致不良行为，并且与其他任何事情一样，存在已知和未知的问题。

# c++ - 三法则。复制构造函数、赋值运算符实现

> ID：16162562
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:36:19.283
> 
> 标签：c++, destructor, copy-constructor, assignment-operator, rule-of-three

三法则。复制构造函数、赋值运算符实现

```
#include <iostream>
using namespace std;

class IntPart
{
public:
 IntPart(); // default constructor
 IntPart(int n); 

private:
 unsigned int* Counts;
 unsigned int numParts;
 unsigned int size;
};

IntPart::IntPart()
{
 Counts = new int[101] (); // allocate all to 0s
 numParts = 0;
}

IntPart::IntPart(int n)
{
 Counts = new int[n+1] (); // allocate all to 0s
 Counts[n] = 1;
 numParts = 1;
}

int main ()
{
 IntPart ip2(200);
 IntPart ip3(100);

 IntPart ip(ip2); // call default and copy constructor?

 IntPart ip4; // call default constructor
 ip4 = ip3;

 system("pause"); return 0;
} 
```

显然，这需要有三法则。你能帮我定义它们吗？

Q0。

```
IntPart ip(ip2); 
```

这是否会创建调用默认构造函数的 ip 对象，然后调用复制构造函数？我对吗？

Q1。定义析构函数。

```
IntPart::~IntPart()
{ delete [] Counts; } 
```

这是对的吗？

Q2。定义复制构造函数。

```
IntPart::IntPart(const IntPart& a)
{ // how do I do this? I need to find the length... size.... could anybody can do this?
} 
```

Q3。定义赋值运算符。

```
IntPart& IntPart::operator= (const IntPart& a)
{
  if ( right != a)
  {
    // Anybody has any idea about how to implement this?
  }
  return *this;
} 
```

谢谢，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:40:59.980

Q0。不，这仅调用复制构造函数。这是一个很大的误解，对象只能构造*一次*。

Q1。这是正确的

Q2。大概您打算将数组大小存储在`size`. 例如

```
IntPart::IntPart()
{
    Counts = new int[101] (); // allocate all to 0s
    numParts = 0;
    size = 101; // save array size
} 
```

如果您不将数组大小存储在某处，那么您的复制构造函数将无法编写。

Q3。我会查找[副本并交换](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)成语。这使您可以使用复制构造函数编写赋值运算符。

# joomla - 更改管理模块标题 joomla

> ID：16162564
> 
> 赞同：1
> 
> 时间：2013-04-23T06:36:23.350
> 
> 标签：joomla

当我安装我开发的模块时，在后端的模块管理器屏幕中，我可以看到这样的标题。

模块管理器：模块 mod_examplemodule

所以我想把它改成这样。模块管理器：模块示例模块

我开发了几个 Joomla 模块，但到目前为止我还没有意识到如何做到这一点。

您对此的帮助将不胜感激。

谢谢你。

我使用 Joomla 2.5.8。我刚刚添加了屏幕截图。也许它会更有帮助![在此处输入图像描述](https://i.stack.imgur.com/sFCiC.jpg)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:17:35.930

在我的模块中，我使用：

```
<name>Module Title</name>
<description>MOD_MODULE_TITLE_XML_DESCRIPTION</description> 
```

然后我在语言文件中添加一个条目作为描述。这通常可以满足我的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:55:18.030

我已经解决了这个问题：

1.  您可以更改 mod_examplemodule.xml 文件中的名称标签并再次安装

    或者

2.  如果您有数据库访问权限，则在 [prefix]_modules 表中找到该模块的记录并根据您的要求更改名称字段

# php - 在 Mysql 存储过程中，我试图插入一个不在任何表中的额外参数

> ID：16162570
> 
> 赞同：0
> 
> 时间：2013-04-23T06:36:39.050
> 
> 标签：php, mysql, stored-procedures

```
DROP PROCEDURE `spGetUserLog1`//
CREATE DEFINER=`xxx`@`xxxxx` PROCEDURE `spGetUserLog1`(
        IN sUsername VARCHAR(9), IN dtFrom DATETIME, IN dtTo DATETIME,  
    IN OFFSET SMALLINT(1), IN ROWCOUNT SMALLINT(1), IN iGMT VARCHAR(50))
BEGIN
    DECLARE UId, SR, R, MR, D SMALLINT(1);
    DECLARE G,iGMT VARCHAR(50);
    SELECT UserId, SubReseller, Reseller, MainReseller, Distributor,GMT
    INTO UId, SR, R, MR, D ,G
    FROM Customers WHERE Username=sUsername LIMIT 1;
    CASE
    WHEN D !=0 THEN
        SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) as Status,
        CONVERT_TZ(SentAt,iGMT,G)FROM SmscLog a WHERE Username IN( SELECT Username FROM Customers WHERE DistributorId = ? ) 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

        SET @DistributorId = UId;
        SET @SentFrom = dtFrom;
        SET @SentTo = dtTo;
        SET @Lim = CONCAT(' LIMIT ', OFFSET, ROWCOUNT);
        SET @Query = CONCAT(@Query, @Lim);

        PREPARE Stmt FROM @Query;
        EXECUTE Stmt USING @DistributorId, @SentFrom, @SentTo;
        DEALLOCATE PREPARE Stmt;

    WHEN MR !=0 THEN

        SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) as Status,
        CONVERT_TZ(SentAt,iGMT,G) FROM SmscLog a WHERE Username IN  ( SELECT Username FROM Customers WHERE MainResellerId = ? ) 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

  SET @MainResellerId = UId;
        SET @SentFrom = dtFrom;
        SET @SentTo = dtTo;
        SET @Lim = CONCAT(' LIMIT ', OFFSET, ',', ROWCOUNT);
        SET @Query = CONCAT(@Query, @Lim);

        PREPARE Stmt FROM @Query;
        EXECUTE Stmt USING @MainResellerId, @SentFrom, @SentTo;
        DEALLOCATE PREPARE Stmt;

    WHEN R !=0 THEN
        SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) as Status,
        CONVERT_TZ(SentAt,iGMT,G) FROM SmscLog a WHERE Username IN ( SELECT Username FROM Customers WHERE ResellerId = ? ) 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

        SET @ResellerId = UId;
        SET @SentFrom = dtFrom;
        SET @SentTo = dtTo;
        SET @Lim = CONCAT(' LIMIT ', OFFSET, ',', ROWCOUNT);
        SET @Query = CONCAT(@Query, @Lim);

        PREPARE Stmt FROM @Query;
        EXECUTE Stmt USING @ResellerId, @SentFrom, @SentTo;
        DEALLOCATE PREPARE Stmt;

    WHEN SR !=0 THEN
        SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) as Status,
        CONVERT_TZ(SentAt,iGMT,G) FROM SmscLog a WHERE Username IN ( SELECT Username FROM Customers WHERE SubResellerId = ? ) 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

        SET @SubResellerId = UId;
        SET @SentFrom = dtFrom;
        SET @SentTo = dtTo;
        SET @Lim = CONCAT(' LIMIT ', OFFSET, ',', ROWCOUNT);
        SET @Query = CONCAT(@Query, @Lim);

        PREPARE Stmt FROM @Query;
        EXECUTE Stmt USING  @SubResellerId, @SentFrom, @SentTo;
        DEALLOCATE PREPARE Stmt;
    ELSE
        SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE 
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) AS Status,
        CONVERT_TZ(SentAt,iGMT,G) FROM SmscLog a WHERE Username = ? 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

        SET @Username = sUsername;
        SET @SentFrom = dtFrom;
        SET @SentTo = dtTo;
        SET @Lim = CONCAT(' LIMIT ', OFFSET, ',', ROWCOUNT);
        SET @Query = CONCAT(@Query, @Lim);

        PREPARE Stmt FROM @Query;
        EXECUTE Stmt USING @Username, @SentFrom, @SentTo;
        DEALLOCATE PREPARE Stmt;
    END CASE;
END 
```

在这个我传递的 IGMT 是使用我们的日期函数在 php 页面中计算的，我希望在存储过程中使用这个值。

但是当我在 php 页面上执行它时，我得到一个错误：

> 存储过程中未定义的变量 IGMT。

有没有办法在这个存储过程中传递这个值？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:38:33.297

您正在过程中构建一个 sql 语句，然后准备和执行它。问题是您在准备好的查询中使用文本“iGMT”而不是变量包含的值。

您需要将其换成占位符 (?) 并将 iGMT 参数传递到执行语句中。因此，例如第一个查询将变为

```
SET @Query = "SELECT Username, Sender, Mobile, 
        Type,
        CASE
        WHEN Type = 'TEXT' OR Type = 'FLASH' THEN
            Message
        WHEN Type = 'UNICODE' OR Type = 'UNICODE-FLASH' THEN
            CONVERT( UNHEX(Message) USING utf8)
        ELSE
            Message
        END AS Message, Length, MessageId,
        IFNULL((SELECT Status FROM DLRStatus WHERE MessageId = a.MessageId),IF((DATE(SentAt)=CURRENT_DATE),'ENQUEUE','ACCEPTD')) as Status,
        CONVERT_TZ(SentAt,?,G) FROM SmscLog a WHERE Username IN ( SELECT Username FROM Customers WHERE ResellerId = ? ) 
        AND DATE(SentAt) BETWEEN ? AND ? ORDER BY SentAt DESC";

SET @DistributorId = UId;
SET @SentFrom = dtFrom;
SET @SentTo = dtTo;
SET @Lim = CONCAT(' LIMIT ', OFFSET, ROWCOUNT);
SET @Query = CONCAT(@Query, @Lim);

PREPARE Stmt FROM @Query;
EXECUTE Stmt USING @iGMT, @DistributorId, @SentFrom, @SentTo; 
```

您需要对过程中的每个语句进行此更改

# ssl - openssl x509 - SSL 证书的受信任和拒绝用途是什么？

> ID：16162576
> 
> 赞同：2
> 
> 时间：2013-04-23T06:36:57.010
> 
> 标签：ssl, openssl, x509

使用 OpenSSL 工具对 .csr 请求进行签名时，可以使用“openssl ca”工具和“openssl x509”工具。

Openssl ca 的文本配置文件包含所有需要的 x509 选项，例如 keyUsage、extendedKeyUsage。

Openssl x509 的命令行有选项 -addtrust 和 -addreject。当您使用这些选项签署证书时，您可以稍后在“openssl x509 -text”输出中看到它们，例如：

```
user@inet-pc:~$ openssl x509 -req -in test.csr -CA ca.crt -CAkey ca.key -set_serial 1 -out test.crt -setalias "zzzz test alias" -addtrust emailProtection -addreject serverAuth 
```

^ 使用自己的 CA 密钥和证书签署 test.csr

```
user@inet-pc:~$ openssl x509 -text -in test.crt -nooutCertificate:
Data:
    Version: 1 (0x0)
    Serial Number: 1 (0x1)
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=RU, ST=Some-State, O=Internet Widgits Pty Ltd, OU=sdds, CN=ca
    Validity
        Not Before: Apr 23 06:24:58 2013 GMT
        Not After : May 23 06:24:58 2013 GMT
    Subject: C=AU, ST=Some-State, O=Internet Widgits Pty Ltd, CN=test
    Subject Public Key Info:
    Public Key Algorithm: rsaEncryption
    RSA Public Key: (2048 bit)
         Modulus (2048 bit):
        (huge text here)
    Exponent: 65537 (0x10001)
    Signature Algorithm: sha1WithRSAEncryption
        (huge text here)
Trusted Uses:
  E-mail Protection
Rejected Uses:
  TLS Web Server Authentication
Alias: zzzz test alias 
```

^ 受信任和拒绝使用。这些用途是什么，它们是如何工作的？[为什么我在X509 RFC5280](https://www.rfc-editor.org/rfc/rfc5280)中找不到任何提及它们？如何使用“openssl ca”添加相同的受信任/拒绝使用？“clientAuth”的用法呢？它未列在“受信任”或“拒绝”中 - 大多数常见应用程序会信任此证书吗？

更新 1：OpenSSL 的 x509 手册说“信任”设置对 OpenSSL 的“验证”实用程序有效，但该实用程序是做什么用的？无效的“信任”设置会导致通常的 http 浏览器/等验证失败吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:42:15.257

您需要查看 rfc5280 的第 4.2.1.12 节“扩展密钥用法”：

[https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.12](https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.12)

编辑：

你是对的，恐怕我读你的问题太快了。信任设置是一个 OpenSSL 辅助信息，据我所知，这仍然是实验性的。看 ：

[https://www.openssl.org/docs/apps/x509.html#TRUST_SETTINGS](https://www.openssl.org/docs/apps/x509.html#TRUST_SETTINGS)

再次，我很抱歉我之前的回答。

# netbeans - 如何删除未使用的库声明

> ID：16162577
> 
> 赞同：1
> 
> 时间：2013-04-23T06:37:02.320
> 
> 标签：netbeans, netbeans-7

我是Netbeans的新手。因此，请原谅我提出一些琐碎的问题以及问题的标题是否具有误导性。

我正在使用 Netbeans 进行 PHP 开发。
Netbeans 版本 7.1
操作系统 Windows XP

在我的项目目录结构中，我们有 library/Zend 和 library/Zend_old 两个文件夹。现在，当我 Ctrl + 单击任何方法时。我有两个声明选项。一个在 Zend 文件夹中，第二个在 Zend_old 文件夹中。我们不再使用 Zend_old 文件夹了。那么我怎样才能告诉 netbeans 完全忽略 Zend_old 文件夹呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-08T23:54:18.960

这取决于您如何添加库。转到项目属性-> 库。查看那里列出的库（单击编辑以查看每个库使用的特定路径）。删除 Zend_old 的那个。

如果这不起作用，请转到工具 -> 库。如果为项目设置库文件夹，则需要将“库位置”下拉菜单更改为项目的库目录，而不是全局目录。查看列出的库并找到引用 Zend_old 的库，然后将其删除（使用库列表下方的按钮，而不是库属性右侧的按钮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:57:14.837

不幸的是，没有删除它的选项。这是一个错误报告[https://netbeans.org/bugzilla/show_bug.cgi?id=214239](https://netbeans.org/bugzilla/show_bug.cgi?id=214239)和来自 netbeans 论坛的回答[http://forums.netbeans.org/topic70](http://forums.netbeans.org/topic70)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-27T14:56:33.030

在搜索字段（cmd + i）中搜索库，这将显示您的 gobal 库中的所有库，选择您需要删除的库，然后删除，然后确定。

# azure - 安装的云驱动器（页面 blob）被删除

> ID：16162582
> 
> 赞同：1
> 
> 时间：2013-04-23T06:37:26.307
> 
> 标签：azure, cloud, blob, mount, drive

我们有 Azure PAAS 服务实现。在每个实例中，我们有 10 个客户，每个客户拥有一个已安装的云驱动器（页面 blob）来存储一些文件。此部署在 azure 中可用最后一年。

在过去的 2-3 周里，我们观察到有 1-2 个云驱动器（页面 blob）从该实例中卸载。我们从添加的事件查看器的系统日志中获得了一些错误信息，这个错误也不一致。目前作为解决方法，我们每天重新启动实例，我们再次重新安装 vhd（pageblob）。来宾操作系统版本 1.18 Azure SDK 1.7

请让我们知道这个问题的原因是什么？

### 错误详情

```
日志名称：系统
来源：PlugPlayManager
日期：2013 年 4 月 22 日上午 11:10:50
事件编号：12
任务类别：无
级别：错误
关键词：经典
用户：不适用
电脑：RD00155D477FE9
描述：
设备 'Msft VHD Disk SCSI Disk Device' (SCSI\Disk&Ven_Msft&Prod_VHD_Disk\1&26c3c0c&0&000002) 在没有事先准备好移除的情况下从系统中消失。

日志名称：系统
资料来源：WaDrivePrt
日期：2013 年 4 月 22 日上午 11:10:49
事件编号：4
任务类别：无
级别：错误
关键词：经典
用户：不适用
电脑：RD00155D477FE9
描述：
“/lwe_2f44e5e3.vhd”未能续订指定的 XDisk。

```

# emacs - Emacs 的明天主题将中文字符显示为块

> ID：16162583
> 
> 赞同：4
> 
> 时间：2013-04-23T06:37:30.490
> 
> 标签：emacs

[我使用 melpa 将Tomorrow 主题](https://github.com/chriskempson/tomorrow-theme)安装到我的 Emacs24 中。

中文字符在评论中显示为块，而在其他地方显示正确的字符。

我的 .emacs 中的默认字体如下：

```
(set-default-font "Menlo-12")
(setq default-frame-alist '(font . "Menlo-12")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:04:22.460

Menlo 字体似乎不支持斜体汉字。键入`M-x customize-face RET font-lock-comment-face`并将“倾斜”更改为“正常”，字符应该会出现。

# windows-phone-7 - 将文本框值设为日期时间

> ID：16162585
> 
> 赞同：0
> 
> 时间：2013-04-23T06:37:39.787
> 
> 标签：windows-phone-7, datetime

也许这太简单了。如果我有一个文本框，我想在其中输入一个像“1300”这样的数值，并让它像日期时间一样显示，像这样“13:00”。

因此，您应该看到的只是 13:00，但它也是日期。

有人明白我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:43:00.370

可能您需要使用[Day 或 Time Picker](http://www.geekchamp.com/articles/wp7-datepicker-and-timepicker-in-depth--api-and-customization)。这是 Windows Phone 显示日期和时间的最常用方式。

还要检查[制作 DateTimePicker](http://www.pitorque.de/MisterGoodcat/post/Silverlight-Making-a-DateTimePicker.aspx)
和[Windows Phone 7 - DatePicker 和 TimePicker](http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=172)

但是如果你只想使用`TextBox`，你需要处理`TextBox.LostFocus=OnLostFocus`

```
 private void OnLostFocus(object sender, RoutedEventArgs e)
    {
        //here change text of TextBox however you want.
    } 
```

**UPD**

如果您想将当前时间设置`TextBox`为默认值，您可以使用

```
 tb.Text = DateTime.Now.ToShortTimeString(); 
```

当您到达当前页面或何时`TextBox.GotFocus=OnGotFocus`

```
 private void OnGotFocus(object sender, RoutedEventArgs e)
    {
       tb.Text = DateTime.Now.ToShortTimeString(); 
    } 
```

**UPD2**

当`TextBox`您有值（例如 1300）时，您需要解析它并获取`newHours`小时和`newMinutes`分钟。然后

```
 var today = DateTime.Now;
 var newDate = new DateTime(today.Year, today.Month, today.Day, newHours, newMinutes, 0); 
```

# .htaccess - 301 重定向：匹配查询字符串，不要将其附加到新的重定向

> ID：16162586
> 
> 赞同：2
> 
> 时间：2013-04-23T06:37:45.357
> 
> 标签：.htaccess, redirect

我在 .htaccess 文件中设置了多个 301 重定向，但我遇到了导致重定向不匹配的查询字符串的问题。

例子：

```
Redirect 301 /about/history/?lang=fr http://www.newdomain.com/fr/history
Redirect 301 /about/history/ http://www.newdomain.com/nl/history 
```

所以`olddomain.com/about/history/?lang=fr`现在匹配第二条规则并重定向到`http://www.newdomain.com/nl/history?lang=fr`.

我希望它采用`?lang=fr`字面意思，而不是将查询字符串附加到新的重定向中。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:18:35.517

[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)接受一个不包含查询字符串的 URL- *path 。*所以，第一个`Redirect`永远不匹配。

要实现您想要的，您可以尝试某种[内容协商](http://httpd.apache.org/docs/current/content-negotiation.html)或使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

```
RewriteEngine on
RewriteCond %{QUERY_STRING} lang=fr
RewriteRule /about/history/ http://www.newdomain.com/fr/history? [R,L]
RewriteRule /about/history/ http://www.newdomain.com/nl/history [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

# java - Spring security：如何在异步作业中访问经过身份验证的用户

> ID：16162587
> 
> 赞同：1
> 
> 时间：2013-04-23T06:37:45.727
> 
> 标签：java, spring, spring-security

由于作业异步操作，它们无法访问用户的会话。需要找到一个解决方案，以便作业可以访问用户的会话（如果用户当时仍处于登录状态）。

**用户会话**

```
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;

public class UserPrincipal implements UserDetails {

private User user;

private Collection<SimpleGrantedAuthority> grantedAuthorities;

public UserPrincipal(User user) {
    Assert.notNull(user);
    this.user = user;

    Set<SimpleGrantedAuthority> authorities = new LinkedHashSet<>();
    for (Role role : user.getRoles()) {
        authorities.add(new SimpleGrantedAuthority(role.getName().toUpperCase(Locale.ENGLISH)));
    }
    grantedAuthorities = Collections.unmodifiableCollection(authorities);
} 
```

}

**抽象作业类**

```
public abstract class Job implements Runnable {

protected Logger logger = LoggerFactory.getLogger(getClass());

protected Job() {
}

@Override
public final void run() {
    logger.debug("starting work");
    /* code goes here */
    logger.debug("work is done");
}
} 
```

**职位类别**

```
@Component
@Scope(value = "prototype")
public class ProcessLoggingJob extends Job {

@Override
protected void work(Map<String, Object> context) throws Exception {
    // need to access user session here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:52:29.097

异步作业由另一个线程执行（如预期的那样）。会话由应用服务器管理并由请求提供。Spring security 额外管理本地线程中的上下文以在没有请求的情况下访问它（如@Michael 在他的答案中所示）。

由于安全上下文（从会话中获取）保存在一个本地线程（通常是应用程序服务器的 HTTP 线程）中，异步作业在另一个线程中运行，**没有机会**访问请求线程的本地线程。

我看到的唯一机会是使用**队列机制**，从请求线程创建新的作业数据，包括用户数据，将它们传递到队列，处理作业中队列中的数据。

在请求处理线程中，这可能看起来像（缺少空处理）：

```
private BlockingQueue<UserDetails> usersToProceedAsync;

public void doSomethingInRequestThread() throws InterruptedException {
  UserDetails principal = (UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal()
  ...
  usersToProceedAsync.put(principal);
} 
```

作业实施可能是：

```
private BlockingQueue<UserDetails> usersToProceedAsync;

protected void work(Map<String, Object> context) throws Exception {
  UserDetails principal = usersToProceedAsync.poll();
  if (principal != null) {
    ...
  }
} 
```

您只需通过向两个类注入相同的队列（`LinkedBlockingQueue`例如）来连接这两个类。如果作业实例是在每次作业运行时创建的，您将需要一个工厂来注入队列。

为每个请求创建一个作业数据时要小心！如何确保异步作业足够快以处理所有工作？您有许多选项来调整行为，使用其他方法向[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)添加或删除数据和/或使用其他实现，如 bounded `ArrayBlockingQueue`。

另一个想法可能是使用[执行](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)器框架而不是计划的作业执行。只需在您的请求处理程序中创建一个执行程序并让它为您运行作业：

```
private final Executor asyncJobs = Executors.newCachedThreadPool()

public void doSomethingInRequestThread() throws InterruptedException {
  UserDetails principal = (UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal()
  ...
  asyncJobs.execute(new AsyncJob(principal));
}

private class AsyncJob implements Runnable {
  private final UserDetails principal;

  public AsyncJob(UserDetails principal) {
    this.principal = principal;
  }

  public void run() {
    ...
  }
} 
```

# samsung-smart-tv - 三星智能电视输入法初始化问题

> ID：16162589
> 
> 赞同：0
> 
> 时间：2013-04-23T06:38:01.960
> 
> 标签：samsung-smart-tv

在三星电视中初始化 IME 对象时，出现以下错误：

```
TypeError: 'undefined' is not a function (evaluating 'widgetAPI.registIMEKey()') 
```

已`widgetAPI`正确初始化且可访问。

任何形式的帮助表示赞赏。

我试过的代码：

```
var textBoxController = {
        createInputbox: function (elId){
            var Elmement = $("#"+elId);
            var imeReady = function(imeObject)
            {
                 alert("----------R E A D Y-----------");
                    var ready = true;
                    if (ready)
                    {
                        $("#"+elId).focus();
                    }
            };
            var ime = new IMEShell(elId, imeReady, 'en');
            widgetAPI.registIMEKey();
        },

        test:function(){
            this.createInputbox("txtName");
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:39:43.317

从哪里来`widgetAPI`？

您的代码应该是：

```
var ime = new IMEShell(elId, imeReady, 'en');
ime.registIMEKey(); 
```

# http - WebTest 工作，但 LoadTest 没有

> ID：16162592
> 
> 赞同：3
> 
> 时间：2013-04-23T06:38:23.653
> 
> 标签：http, visual-studio-2012, web-testing, load-testing

我为一个看起来运行良好的网站创建了一个 Web 性能测试。这是一个用于登录和测试导航的简单测试。每次运行该测试都有效。但是当我在 LoadTest 中调用该测试时，问题就出现了。因此，我创建了一个负载测试，其中仅包含此 Web 性能测试，但由于此错误，它在登录后一直失败：

```
The server committed a protocol violation. Section=ResponseStatusLine 
```

我研究了很多这个错误，每个人都建议插入这个语句：

```
<system.net>
  <settings>
    <httpWebRequest useUnsafeHeaderParsing=”true”/>
  </settings>
</system.net> 
```

在 web.config 文件中解决了这个问题，但通常 QA 与 DEV 是分开的，我们无权访问他们的代码。我只是想知道单独执行而不是负载测试时测试如何工作。我认为问题可能出在用户数量或负载模式上，所以我将它从我的初始设置`Step load pattern`为`Constant load pattern`只有一个用户。尽管如此，同样的错误仍会导致测试失败。有没有人有类似的问题？如果您需要更多数据，请告诉我。

编辑：当我在负载测试使用的性能测试中指定代理（本地主机：8888 - 用于提琴手）时，问题没有发生，但负载测试太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T18:09:02.680

我遇到了完全相同的问题。我的测试环境使用 SSL，并使用 F5 负载平衡器进行负载平衡。我在非负载平衡配置中没有遇到问题。

运行时的 webtest 不会缓存依赖请求，而 loadtest 将缓存依赖请求，因此会遇到不同的行为。

为了解决这个问题，您需要创建一个插件来强制在负载测试中不缓存相关请求。下面的文章告诉你如何创建一个插件。

[http://msdn.microsoft.com/en-us/library/ms243191.aspx](http://msdn.microsoft.com/en-us/library/ms243191.aspx)

需要插入代码：

```
using System;
using Microsoft.VisualStudio.TestTools.WebTesting;

namespace DisableCache
{
    public class DisableCache : WebTestPlugin
    {
       public override void PostRequest(object sender, PostRequestEventArgs e)
        {
            foreach (WebTestRequest dependentRequest in e.Request.DependentRequests)
            {
                dependentRequest.Cache = false;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T15:22:00.063

过去，由于URL 中有额外的**\n ，我得到了这个错误。**

就我而言，这是由动态数据源引起的。应清除数据源中的参数。您在测试中使用 DataSource 吗？

# extjs4.1 - Extjs - 4.1 从不同的包中扩展控制器

> ID：16162594
> 
> 赞同：0
> 
> 时间：2013-04-23T06:38:34.250
> 
> 标签：extjs4.1

我有巨大的应用程序。我将有一个通用文件夹，其中包含跨多个扩展的通用 extjs 文件。扩展文件夹将从普通视图扩展基本视图并添加自己的组件。我的应用程序结构是

common -app --model --view --store --controller ---CommonController.js(控制器文件)

extension1 -app --model --view --store --controller ---Extension1Controller.js (这应该扩展 CommonController.js) app.js

应用程序.js

代码：

```
Ext.Loader.setConfig({enabled:true});
Ext.Loader.setPath('Ext.ux', 'extjs/ux');
Ext.Loader.setPath('commonapp', '/common/app');
Ext.require([
    'Ext.data.*',
    'Ext.grid.*',
    'Ext.tree.*'

]);

Ext.application({
    name: 'NSM',
    appFolder: '/extension1/app',

    controllers: [

        'Extension1Controller'

    ],
    launch: function() {

        Ext.create('Ext.panel.Panel', {
        layout: 'fit',
        renderTo:'contentContainer',

        items: [
            {
                xtype: 'panel'

            }
        ]
    });

    }
}); 
```

Extension1Controller.js

```
Ext.define('NSM.controller.Extension1Controller', {
    extend: 'commonapp.controller.CommonController', //Extending the controller from common

    init: function() {
        //this.getWPPolicyStoreStore().addListener('write',this.finishedLoading, this);

        console.log("in sample controller");
    }

    }); 
```

但是扩展会引发以下错误

**未捕获的错误：即使文件已加载，也未声明以下类：'commonapp.controller.CommonController'。请检查其对应文件的源代码是否存在拼写错误：'/common/app/controller/CommonController.js**

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:27:10.233

请将扩展配置替换为 'Ext.app.Controller' 而不是 'commonapp.controller.CommonController' 。因为 extend 您正在指定要扩展的类。要解决您的问题，只需在 Ext.application 块中添加该控制器（'commonapp.controller.CommonController'）作为另一个控制器的一部分。

谢谢。

# jquery-mobile - Jquery Mobile - 标题中的弹出菜单

> ID：16162604
> 
> 赞同：0
> 
> 时间：2013-04-23T06:39:12.370
> 
> 标签：jquery-mobile, android-webview

我的 JQM 页面中有以下标题，以便在点击 时弹出菜单`option`。

```
<div data-role="header" data-theme="a" data-position="fixed">
    <div><a href="#"><img src="custom-icon.png" class="ui-btn-left" width="32" height="32"/></a></div>

    <h1>HOME</h1>

    <a href="#main-menu" class="ui-btn-right" data-rel="popup" data-icon="grid" data-iconpos="notext">Option</a>
    <div data-role="popup" id="main-menu">
        <ul data-role="listview" data-inset="true" data-theme="a">
            <li><a href="menu1" data-theme="c">MENU 1</a>
            <li><a href="menu2" data-theme="c">MENU 2</a></li>
        </ul>
    </div>
</div> 
```

它可以工作，但有时需要在我的安卓设备中多次点击。android-webview 中使用了 JQM 页面。如何解决敲击问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:15:36.967

在我的建议中，您必须停止事件冒泡。您可以通过`jQuery`以下方式执行此操作：

```
e.stopPropagation(); 
```

所以在我的建议中，为菜单链接弹出的点击事件编写一个处理函数。

`JQM`在webview 页面中进行此更改

```
<a href="#" id="my_link" class="ui-btn-right" data-rel="popup" data-icon="grid" data-iconpos="notext">Option</a> 
```

并且更好地在 .ready() 中绑定您的链接，您应该尽量避免在 .ready() 中使用`Javascript`代码以`DOM`获得更好的可维护性。

```
$('#my_link').live('tap',function(event) {
    event.stopPropagation();
    $('#main-menu').popup('open');
}); 
```

**编辑：**

```
$('#YOUR_PAGE_ID').live( 'pageinit',function(event){
    $('#my_link').live('tap',function(event) {
        event.stopPropagation();
        $('#main-menu').popup('open');
    });
}); 
```

# erlang - Erlang RabbitMQ 客户端示例不起作用

> ID：16162605
> 
> 赞同：0
> 
> 时间：2013-04-23T06:39:14.337
> 
> 标签：erlang, websocket, rabbitmq, cowboy

Erlang RabbitMQ 客户端不工作...（[http://www.rabbitmq.com/erlang-client-user-guide.html](http://www.rabbitmq.com/erlang-client-user-guide.html)）

不知何故，我的 RabbitMQ Erlang 客户端无法正常工作。当我尝试使用它进行编译时，它会给出“找不到 amqp_client.hrl”错误

```
ERL_LIBS=deps erlc -o ebin amqp_example.erl 
```

以下是我已采取的步骤。

1.  创建模块 amqp_example.erl
2.  创建了 deps 文件夹
3.  将 rabbit-common 和 amqp_client 放在 deps 文件夹中
4.  使用 ERL_LIBS=deps erlc -o ebin amqp_example.erl 编译

谁能让我知道我错过了什么。顺便说一句，我对二郎很陌生。

另外，我想创建一个可以使用 websocket 连接到 ERlang（最好是 Cowboy）的应用程序，然后我可以从那里连接到 rabbitMQ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:54:38.420

> 谁能让我知道我错过了什么。

编译器错误表示`erlc`无法找到`amqp_client.hrl`头文件。发布一些示例代码，详细说明您如何包含头文件。通常，`include_lib("amqp_client.hrl").`如果您通过设置`ERL_LIBS`环境变量告诉编译器 amqp_client 应用程序的位置，您会使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T06:37:46.173

搞定了。它需要未正确编译的 rabbitmq 服务器。

# php - 从 php 中的外部链接检查音频和视频的媒体类型

> ID：16162606
> 
> 赞同：3
> 
> 时间：2013-04-23T06:39:14.487
> 
> 标签：php, mime-types

有谁知道如何从外部网址检查音频和视频的媒体类型。

```
function get_url_mime_type($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_NOBODY, 1);
    curl_exec($ch);
    return curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:45:19.730

要获取文件的 MIME，请使用以下代码：

```
<?php
$finfo = new finfo(FILEINFO_MIME, "/usr/share/misc/magic"); // return mime type a.k.a. mimetype extension

/* get mime-type for a specific file */
$filename = "/usr/local/something.txt";
echo $finfo->file($filename);
?> 
```

* * *

要获取文件的扩展名：

```
$tokens = explode('.', $filename);
$extension = $tokens[count($tokens)-1]; 
```

* * *

要获取外部文件的 MIME 类型，您可以使用 cURL HEAD 请求来获取标题（可能不准确，因为 Web 服务器可能不会以正确的答案响应），或者使用[getID3](http://www.getid3.org/demo/)。

这个[问题](https://stackoverflow.com/questions/12656889/php-get-remote-file-mime-type)也问类似的事情。看看它。

参考：[finfo_open()](http://www.php.net/manual/en/function.finfo-open.php)

# mysql - 如何使用 Django 的 ORM 创建一个临时表以通过两个条件对同一列进行排序？

> ID：16162611
> 
> 赞同：1
> 
> 时间：2013-04-23T06:39:41.087
> 
> 标签：mysql, django

```
CREATE TEMPORARY TABLE TEMP (SELECT * FROM TABLE ORDER BY COLUMN_A);
SELECT * FROM TEMP ORDER BY COLUMN_B; 
```

我有一张表存储每个城市的最后 24 小时下午点，我想选择每个城市的最新下午点。所以我使用“Select * from city_pm order by date desc limit the_count_of_city”，然后我想有一个排名每个城市的最新下午点，所以我使用之前的选择创建一个临时表，并按下午点对表进行排序......这是我想要完成的，我想不出更好的方法所以我决定创建一个临时表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:55:41.693

我相信左连接可能有助于解决这种情况。您的目标是在最后一个 PM 点之前对城市进行排序。

假设您的表的主键`city`是 city_id，并且一个名为的单独表`city_pm`保存 PM 点，并且您有两个模型 City 和 City_Pm...

在您看来：

```
cities = City.objects.all() 
```

在您的模型中：

```
class City(models.Model):
    # fields ...

    def get_latest_pm(self):
        try:
            return City_Pm.objects.filter(city_id=self.pk).order_by("-date")[:1].get()
        except:
            return None 
```

在您的模板中：

```
{% for city in cities %}
    {{ city.get_latest_pm }}
{% endfor %} 
```

# php - 来自 2 个表和 php 的 sql 查询

> ID：16162614
> 
> 赞同：0
> 
> 时间：2013-04-23T06:39:46.697
> 
> 标签：php, sql

我有一个从 sql 表中获取数据的简单 php 代码。

表格1

```
date_time 
name 
```

和另一个存储名称（与 TABLE1 相同）和图片链接的表。

表 2

```
name
pic 
```

PHP

```
$db = new PDO("mysql:host=$host;dbname=$dbname", "$username", "$password");
$sql = "select * from table1";
foreach ($db->query($sql) as $row) {
echo '<span class=name>'.$row['name'].'</span>';
echo "<img src=".$row['pic']." width='25px' height='25px'/>";
$db = null;
} 
```

我想要的是`$row['pic']`根据表1中的名称显示表2（）中的名称图片。为了实现这一点，sql语句和php代码应该如何？我在 phpMyadmin 中运行了一条 sql 语句并得到了它，但无法在 php 代码中翻译它。

```
select table1.name,table2.pic from table1,table2 where table1.name=table2.name; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:45:09.807

如何使用`JOIN`：

```
SELECT table1.name, table2.pic 
FROM table1 
INNER JOIN table2 
  ON table1.name = table2.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:43:29.090

试试这个，使用`as`关键字来别名列名，这样你就可以在循环中获取`'name'`和索引。`'pic'`

```
select 
   table1.name as `name`,
   table2.pic as `pic` 
from table1, table2 
where table1.name = table2.name; 
```

使用联接的更好方法

```
select 
   `table1`.`name` as `name`,
   `table2`.`pic` as `pic` 
from `table1`
     inner join `table2`
     on `table1`.`name` = `table2`.`name`; 
```

# sockets - 在三星智能电视上使用 WebSocket

> ID：16162616
> 
> 赞同：1
> 
> 时间：2013-04-23T06:39:50.930
> 
> 标签：sockets, websocket, samsung-smart-tv

我的要求是在我的三星智能电视应用程序中有一个监听套接字，以便从同一本地网络中的设备接收事件。

我一直在网上搜索执行此操作的方法，并且遇到了诸如**Node.js**、**Socket.io**、**websocket**之类的术语。尽管我在 Web 开发方面理解这些术语（我认为），但我无法想象在我的三星智能电视应用程序中打开监听套接字的方法。

只是为了玩玩，我使用[GCD 异步套接字](https://github.com/robbiehanson/CocoaAsyncSocket)在 iOS 上编写了一个 TCP 服务器代码，并考虑将其连接到智能电视并发送欢迎消息。这是我智能电视上的代码-

```
//var wsUri = "wss://echo.websocket.org/";
var wsUri = "ws://192.168.1.116:9898/";
//var output;
var webSocketObj={};

webSocketObj.init = function()
{
    //output = document.getElementById("output");
    this.testWebSocket();
};

webSocketObj.testWebSocket = function()
{
    websocket = new WebSocket(wsUri);
    websocket.onopen = function(evt) { onOpen(evt); };
    websocket.onclose = function(evt) { onClose(evt); };
    websocket.onmessage = function(evt) { onMessage(evt); };
    websocket.onerror = function(evt) { onError(evt); };
};

  function onOpen(evt)
  {
    writeToScreen("CONNECTED");
    doSend("WebSocket rocks");
  }

  function onClose(evt)
  {
    writeToScreen("DISCONNECTED");
  }

  function onMessage(evt)
  {
    writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>');
    websocket.close();
  }

  function onError(evt)
  {
    writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
  }

  function doSend(message)
  {
    writeToScreen("SENT: " + message); 
    websocket.send(message);
  }

  function writeToScreen(message)
  {
   /* var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = message;
    output.appendChild(pre);*/
      alert('SOCKET HELPER SAYS : '+message);
  } 
```

我有一个按钮，我在按钮单击时调用 webSocketObj.init() 。

`didReadData`我的服务器日志：

> 客户说：GET / HTTP/1.1

来自 SmartTv 的日志：

```
 [JS ALERT]:  Scenewebsocket.handleKeyDown(29443)
 [JS ERROR]:
File:           file://
Line No:        0
Error Detail:   
 [JS ALERT]:  SOCKET HELPER SAYS : DISCONNECTED 
```

**我**还尝试将消息从服​​务器回显到智能电视。这次我得到了日志

```
Client says : GET / HTTP/1.1
Client says : Upgrade: WebSocket
Client says : Connection: Upgrade
Client says : Host: 192.168.1.116:9898
Client says : Origin: file://
Client says : Sec-WebSocket-Key1: 1504l73  8Ew/J 4   ,L7W6
Client says : Sec-WebSocket-Key2: TK2   81d A64Bo7  118    0 
```

我知道我做错了什么……这是什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T20:35:31.160

您可以使用 socket.io 库让自己更轻松地使用 WebSockets。

您将在三星电视中包含一个 web 浏览器版本的 socket.io，如下所示：

```
<script src="http://*some ip address*/socket.io/socket.io.js"></script> 
```

其中**一些 ip 地址**是您控制的 nodejs 服务器的 ip 地址。

在您的服务器上，您需要安装带有 socket.io 服务器版本的 NodeJS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T09:36:41.027

您是否尝试过[socket.io](http://socket.io/)服务器和客户端库？

我们在 node.js 上有 socket.io 服务器，电视可以使用 socket.io-client 库连接到它。在 2012 年的电视上，它使用 websocket。在 2011 年的电视上，它使用 XHR 后备。

# javascript - 屏幕和窗口属性之间的区别？

> ID：16162639
> 
> 赞同：8
> 
> 时间：2013-04-23T06:41:49.100
> 
> 标签：javascript, asp.net, web-applications

在我的 Web 应用程序中，我需要使用浏览器窗口的高度和宽度。所以我在 JavaScript 中使用**Screen.Width 、 Screen.Height**属性来获取宽度和高度。在冲浪时，我得到了另一个属性**Window.Width ， Window.Height**。谁能告诉我，哪个属性给了我浏览器窗口的大小.....***屏幕（或）窗口？***

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T06:47:41.953

`screen`实际上是`window.screen`因为`window`是全局变量的上下文。

一个`window`对象（通过 获得`document.defaultView`）返回有关窗口和视口的信息。获取应用程序窗口大小使用`window.outerHeight`，获取视口大小使用`window.innerHeight`。

`screen`对象是指实际的监视器窗口或桌面大小。请注意，如果您有一个多监视器设置，那么您将有多个`screen`对象。一个`window`对象属于一个单一的`screen`，虽然不是很`window`属于同一个`screen`。我不知道当浏览器窗口跨越多个`screen`s 时会发生什么。

从这一切中，您可以确定如果您正在运行全屏浏览器，那么`window.outerHeight == window.innerHeight == screen.height`.

来源：[https](https://developer.mozilla.org/en-US/docs/DOM/window.screen) ://developer.mozilla.org/en-US/docs/DOM/window.screen和[https://developer.mozilla.org/en-US/docs/DOM/window](https://developer.mozilla.org/en-US/docs/DOM/window)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-23T07:00:06.077

窗口.屏幕.高度

窗口.屏幕.宽度

屏幕或显示器的高度/宽度（以像素为单位）

window.screen.availHeight

window.screen.availWidth

屏幕或显示器的高度/宽度，以像素为单位，*减去*操作系统显示的永久或半永久用户界面功能，例如 Windows 上的任务栏或智能手机上的设备状态栏

window.innerHeight

window.innerWidth

浏览器窗口内容区域的高度/宽度，包括（如果呈现）水平/垂直滚动条

window.outerHeight

window.outerWidth

浏览器窗口外部的高度/宽度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:46:47.987

[Javascript中的窗口，屏幕和文档有什么区别？](https://stackoverflow.com/questions/9895202/what-is-the-difference-between-window-screen-and-document-in-javascript?rq=1)几乎是同一个问题。解释接受的答案并添加一些我认为可以使用的信息：

`window`在根对象中。您定义的任何变量或函数在某种程度上都是对象的子`window`对象。因此，如果您`var something="blah"`在脚本标记中执行此操作，您以后可以通过 3 种方式访问​​该变量`something`-`window.something`或`window["something"]`.

`screen`是由浏览器创建的 window 的子级之一。`window.something`但是，出于与您可以访问as相同的原因，您可以使用或`something`访问它。这包含实际屏幕的属性，我会在其中获取您想要的详细信息（除非您可以访问 jQuery 或 Prototype 之类的框架，在这种情况下，他们可能会为您提供这些信息而无需担心浏览器兼容性）。`window.screen``screen`

# powershell - 使用 powershell 从 Outlook 中的邮件中读取 excel 内容

> ID：16162641
> 
> 赞同：0
> 
> 时间：2013-04-23T06:41:49.977
> 
> 标签：powershell, outlook, powershell-2.0

我是PowerShell的新手。我确实收到了带有主题和 Excel 表格的 Outlook 邮件。我能够编写代码来根据主题分隔电子邮件，但我无法理解如何获取该电子邮件中的 excel 内容并将其保存到某个本地文件。

谢谢， 悉达多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:09:47.493

您可以以 3 种不同格式输出电子邮件正文和邮件对象：

*   简单的文字：`MailItemObject.Body`
*   HTML：`MailItemObject.HTMLBody`
*   RTF：`MailItemObject.RTFBody`

Simple Text 方法将从左到右获取每一行并将其添加到一个字符串中，您稍后可以解析该字符串：

电子邮件正文示例：

```
Column1 Column2
1       A
2       B
3       C 
```

简单文本输出字符串：

```
Column1 
Column2
1       
A
2       
B
3      
C 
```

`MailItemObject.Body > 'C:\emailBodyText.txt'`因此，您可以将该字符串输出到文本文件（

[MailItem 对象 (Outlook)](http://msdn.microsoft.com/en-us/library/office/ff861332.aspx)

* * *

如果 excel 是您电子邮件的附件，那么您可以使用此方法将附件保存到给定文件夹。

```
#Outlook setup
$olFolderInbox = 6
$objOutlook = New-Object -com "Outlook.Application"
$objNamespace = $objOutlook.GetNamespace("MAPI")
$objFolder = $objNamespace.GetDefaultFolder($olFolderInbox)
$colItems = $objFolder.Items
#Fliter Unread mail
$colFilteredItems = $colItems.Restrict("[UnRead] = True")

#Change this to the folder you want to save to
$saveFilePath = "C:\myfolder"

foreach($unreadEmail in $colFilteredItems){
    $NumberOfFiles = $unreadEmail.Attachments.Count
    $counter = 0
    While($NumberOfFiles -ne $counter){
        $counter++
        $fileName = $unreadEmail.Attachments.Item($counter).FileName
        $unreadEmail.Attachments.Item($counter).SaveAsFile("$saveFilePath\$fileName")
    }
} 
```

**注意：**这是过滤未读电子邮件，因此您需要用过滤器代替我的过滤器。

此外，在使用“while 循环”之前，您还必须整理一下缩进，因为我似乎可以让它正确显示

[http://blogs.technet.com/b/heyscriptingguy/archive/2007/10/05/hey-scripting-guy-how-can-i-save-the-attachments-for-all-my-new-office-展望消息.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2007/10/05/hey-scripting-guy-how-can-i-save-the-attachments-for-all-my-new-office-outlook-messages.aspx)

# asp.net - 使用 ASP.Net 表单身份验证的 WCF 服务 - 在 cookie 过期时调用 $.ajax() 期间出错

> ID：16162647
> 
> 赞同：0
> 
> 时间：2013-04-23T06:42:07.220
> 
> 标签：asp.net, wcf

我有一个托管在 IIS 网站中的 WCF 服务，带有表单身份验证。该服务具有`[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]` 属性，并且 Web 配置具有这一行：`<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />`

服务被称为带有 $.ajax() 调用的表单页面。一切正常，直到用户在他的 cookie 过期后调用服务。在这种情况下，会出现“Windows 安全”窗口，提示用户应输入登录名和密码才能访问该服务。如果用户只是关闭窗口而不做任何事情，页面将被重定向到登录页面（这是正确的）

问题：如何跳过此窗口并立即进行重定向？我猜想配置 WCF 服务有些问题，我尝试了一些绑定方案 - 但我无法逃脱这个窗口。

WCF服务的配置：

```
 <system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="metadataAndDebug">
      <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="Project.Service.DataServiceAspNetAjaxBehavior">
      <enableWebScript/>
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
<services>
  <service name="Project.Service.DataService" behaviorConfiguration="metadataAndDebug" >
    <endpoint address="" behaviorConfiguration="Project.Service.DataServiceAspNetAjaxBehavior"
      binding="webHttpBinding" contract="Project.Service.DataService" />
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:30:25.967

自动重定向功能默认开启。

如果出于某种原因，您想关闭此功能，您可以注册一个消息检查器来执行此操作。

```
public class MyMessageInspector : IDispatchMessageInspector
{
    internal const string RedirectPropertyName = "WebHttpRedirect";
    public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        // remove the RedirectPropertyName from the request
        if ( request.Properties.ContainsKey(RedirectPropertyName))
        {
            request.Properties.Remove(RedirectPropertyName);
        }
        return null;
    }
    public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {

    }
} 
```

# jquery - 判断一个 div 的边框是否被点击

> ID：16162649
> 
> 赞同：4
> 
> 时间：2013-04-23T06:42:15.587
> 
> 标签：jquery

我想实现一个原始的吸管功能，可以在具有背景颜色的 div 上单击吸管光标，并通过使用 jQuery 读取 CSS 样式来拉取这种颜色。但是如果点击了 div 的边框并且它是不同的颜色怎么办？我怎么拉那个颜色？我在 click 事件中看不到任何东西告诉我点击了边框而不是内容。

有没有一种方法可以感知边框点击，而不需要计算边框在哪里以及点击是否在该区域中的所有数学？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:51:31.370

> *有没有一种方法可以感知边框点击，**而不需要计算边框在哪里以及点击是否在该区域中的所有数学？***

**简短的回答**：不，不是没有经过数学计算。

原因是，边框不是元素，它们是 DOM 元素的一部分，没有自己独立的事件处理程序。

**但是**，要实现您想要的，您似乎至少需要这些成分：

`.offset()`, `.innerWidth()`, `innerHeight()`, 4 个边框宽度通过`.css()`,`event.pageX()`和`event.pageY`

**演示：http: [//jsfiddle.net/terryyounghk/YvFQX/](http://jsfiddle.net/terryyounghk/YvFQX/)**

熟悉盒子模型将有助于像这样的思维过程，以及开发一个好的代码策略。

**参考：[http ://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)**

# c - 检测 Linux 上正在运行的进程的内存泄漏

> ID：16162651
> 
> 赞同：0
> 
> 时间：2013-04-23T06:42:31.580
> 
> 标签：c, linux, memory-leaks

我正在尝试检测进程运行时是否存在内存泄漏 - 是否可以使用顶级 vmstat 等来执行此操作。我不想使用 valgrind 之类的工具，请在此处进行净化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T05:52:07.397

我认为测试过程（嵌入式内存统计模块）+远程监控工具可以工作。

1) 就像 Joachim Pileborg 和 User1 所说，您的代码中需要一个嵌入式模块来计算内存统计信息。

2）但是为了方便，需要一个远程工具来监控，比如vmstat/top。而且我认为这个工具应该用这个嵌入式模块来开发。所以需要IPC机制。这是我认为的另一个话题。

3）有了上面的模块和工具，您可以软实时地从测试过程中获取信息，并且没有任何服务中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:52:43.947

不，您无法使用 top 或 vmstat 检测内存泄漏。

top 和 vmstat 有各自的用途。top 有助于监控系统进程的总数及其状态（无论它们是正在运行还是等待）。

内存信息顶部显示，是系统范围的内存使用信息。它不会帮助您找出您的应用程序在哪里泄漏内存。

vmstat 也是一样的，但是它提供了更多关于系统内存使用的信息，帮助系统程序员弄清楚内存管理层是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:53:22.357

如果您不想使用工具程序，您可以在程序中添加一些诊断：

您可以在程序中使用[mallinfo()](http://linux.die.net/man/3/mallinfo)函数来检查使用了多少 malloc。

或者您可以使用[mtrace()](http://man7.org/linux/man-pages/man3/mtrace.3.html)函数来使用 malloc 跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T09:02:28.363

**内存分析** 使用 Perf 工具检查泄漏。

使用 perf 的探针的示例用法可能是检查 libc 的 malloc() 和 free() 调用：

> $ perf probe -x /lib64/libc.so.6 malloc
> 
> $ perf probe -x /lib64/libc.so.6 免费

添加了新事件：probe_libc:malloc（在 0x7eac0 上）

已创建探针。现在，让我们记录下 4 秒内所有系统中 malloc 和 free 的全局使用情况：

> $ perf record -e probe_libc:malloc -agR sleep 4
> 
> $ perf record -e probe_libc:free -agR sleep 4

让我们记录下 4 秒内所有进程中 malloc 和 free 的使用情况：

> $ perf stat -e probe_libc:free -e probe_libc:malloc -ag -p $(pgrep $process_name$) sleep 4

输出：

> 进程 ID '1153' 的性能计数器统计信息：
> 
> 11,312 探针库：免费
> 
> 11,644 探针库：malloc
> 
> 4.001091828 秒时间过去

如果每次运行 perf 命令时 malloc 和 free 计数之间的差异增加，则表明内存泄漏。

# android - 如何从片段更改操作栏选项卡

> ID：16162654
> 
> 赞同：0
> 
> 时间：2013-04-23T06:42:46.823
> 
> 标签：android

我有 3 个操作栏选项卡主页：视频：默认情况下会选择购买主页。我可以在可以替换片段的不同选项卡之间切换。单击我正在使用的任何网格单元格时，我在主页片段中有一个网格视图下面的一段代码导航到购买选项卡，我可以用购买片段替换主页片段，但是如何将操作栏选项卡从主页选项卡更改为购买选项卡？？？？？？

```
FragmentTransaction ft = parentActivity
                            .getFragmentManager()
                            .beginTransaction();
                    ft.replace(R.id.mainLayout,new purchase());
                    ft.commit();

class MyTabsListener implements ActionBar.TabListener {
        public Fragment fragment;

        public MyTabsListener(Fragment fragment) {
            this.fragment = fragment;
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (fragment != null) {
                ft.setCustomAnimations(R.animator.fragmentanimatorleft,
                        R.animator.fragmentanimatorright);
                ft.replace(R.id.mainLayout, fragment);
                // isSettingClicked = false;

            }

        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (fragment != null) {
                try {
                    ft.remove(fragment);
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        } 
```

# java - 在数字中而不是在字符串中转义逗号

> ID：16162657
> 
> 赞同：3
> 
> 时间：2013-04-23T06:43:00.627
> 
> 标签：java

我正在做一个项目，我必须打破一个包含字符和整数的字符串

说String string = hi，我有1,000rs。

上面的字符串必须分成两个字符串，因为
string1=hi
string2=i 有 1,000rs。
但是通过以下逻辑，我可以将其划分为
string1=hi
string2=i have 1
string3=000rs。
谁能帮我解决这个问题。

```
StringTokenizer strTokenizer=new StringTokenizer(string,",");    
while(strTokenizer.hasMoreTokens()){    
String temp=strTokenizer.nextToken();    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:48:24.143

尝试

```
 String[] a = "Say String string=hi,i have 1,000rs.".split(",(?!\\d)");
    for(String e : a) {
        System.out.println(e);
    } 
```

输出

```
Say String string=hi
i have 1,000rs. 
```

**更新**

`"(?<!\\d),|,(?!\\d)"`似乎更可靠

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T06:51:22.303

尝试这个：

```
String s="hi,i have 1,000rs.";
String[] splitted =s.split(",(?=([^\\d]*\\d[^\\d]*\\d)*[^\\d]*$)");
for(String ss: splitted)
    System.out.println(ss); 
```

输出：

```
hi
i have 1,000rs. 
```

# mysql - 我应该对数据库或 uuid_short() 使用序列 ID 吗？

> ID：16162661
> 
> 赞同：0
> 
> 时间：2013-04-23T06:43:08.850
> 
> 标签：mysql, sql, database, database-design, uuid

我想为用户、页面、照片、相册、事件、评论等实现 facebook 之类的 id。它们都是唯一的 id，大部分都可以从[http://facebook.com/](http://facebook.com/) {object_id}访问

要喜欢或评论任何对象，您只需简单地做[http://facebook.com/](http://facebook.com/) {object_id}/comment 或喜欢。

mysql 在序列上的实现：[http ://www.mysqlperformanceblog.com/2008/04/02/stored-function-to-generate-sequences/](http://www.mysqlperformanceblog.com/2008/04/02/stored-function-to-generate-sequences/)

uuid_short() 上的 mysql 文档：http: [//dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid-short](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid-short)

使用序列有什么优点和缺点？

顺便说一句，如果我要实现序列，我会选择 BIGINT 作为字段类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:06:34.440

如果您使用的是 InnoDB，则数值每次都会胜过 UUID 值。

假设您将此值作为主键，它将被聚集。严格递增的数值远远优于 UUID。

有关更多信息，请参阅这些答案[Mysql 如何创建聚集索引？](https://stackoverflow.com/questions/13779138/mysql-how-do-you-create-a-clustered-index)以及随后的链接。还有这个[Google 图书链接](http://books.google.co.uk/books?id=BL0NNoFPuAQC&pg=PA118&lpg=PA118&dq=mysql%20clustered%20index%20uuid&source=bl&ots=COVPApqH1Q&sig=p7ujoLNqwbc3VTHa636BJAAp8YQ&hl=en&sa=X&ei=AjN2UcyvNMHbPdX1gYgF&ved=0CDAQ6AEwAA#v=onepage&q=mysql%20clustered%20index%20uuid&f=false)。和[DBA.SE](https://dba.stackexchange.com/questions/322/what-are-the-drawbacks-with-using-uuid-or-guid-as-a-primary-key)

注意：同样的推理也适用于 SQL Server 和 Sybase

# vxworks - 如何获取我在 VxWorks 中使用的文件系统的类型和版本

> ID：16162665
> 
> 赞同：1
> 
> 时间：2013-04-23T06:43:19.253
> 
> 标签：vxworks

我需要知道我的 VxWorks 系统上的每个分区都使用哪种类型的文件系统进行格式化。我需要一种文件系统和一个版本（如果可能的话）。

可能有某种命令，功能来获取该信息？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T18:33:48.583

据我所知，没有任何命令可以为您提供这些详细信息。但是，`iosDevShow`它将`iosFdShow`为您提供有关打开设备和文件描述符的信息。

# python - pyplot.show() 重新打开旧的 tkinter 对话框

> ID：16162669
> 
> 赞同：4
> 
> 时间：2013-04-23T06:43:29.237
> 
> 标签：python, macos, matplotlib, tkinter, filedialog

***编辑：这似乎是一个仅限于 Mac OS 系统上的 Tcl/Tk 的问题。所以如果你没有这方面的经验，这个话题可能没有实际意义......***

我想要一个 Python 脚本来做两件事：

1.  通过 Tkinter 文件对话框向用户询问文件名。
2.  从所述文件中绘制一些数据。

问题是，matplotlib 使用 Tkinter 进行图形表示，每当我`pyplot.show()`在非交互模式下调用时，（关闭之前）文件对话框就会再次弹出。在我看来，它似乎`pyplot.show()`收集了所有 Tkinter 窗口的列表并将它们全部显示出来。但是，我没有找到任何帮助。我尝试了 Python 2.7 和 3.3，因为很多 Tkinter 模块似乎都发生了变化，但这是同样的现象。我想出的稍微奇怪的解决方法是进入 matplotlib 交互模式，然后使用`raw_input()`命令保持窗口打开。

这是一个在 Python 2 和 3 中工作的最小代码片段，用于显示问题：

```
import matplotlib.pyplot as plt

# import Tkinter GUI (changes from Python 2.x to 3.x)
try:
    import Tkinter
except (ImportError):
    import tkinter as Tkinter
try:
    from tkFileDialog import askopenfilename
except (ImportError):
    from tkinter.filedialog import askopenfilename

root = Tkinter.Tk()
root.withdraw()

input_filename = askopenfilename(master=root)

# This seemed promising, but it doesn't help
root.destroy()

plt.figure()

# uncommenting this to switch to interactive mode is a workaround
#plt.ion()
plt.show()

# Python 2.x and 3.x compatible wait for input:
try: input = raw_input
except NameError: pass
# Wait for keystroke (for interactive mode)
input("Press enter when done...") 
```

如果我在这里遗漏了一些明显的东西，我很抱歉，我对 Python 不是很精通，而且我没有找到关于这个问题的令人满意的信息。但我的直觉告诉我，必须有一个简单而优雅的解决方案。

系统信息（我尝试过的最新版本）：

*   Python 3.3（来自 MacPorts）
*   matplotlib 1.3.x（由 github master 构建）
*   Mac OS X 10.8.3
*   Tcl/Tk 8.6.0（来自 MacPorts）

谢谢，

弗洛赫

# java - 来自另一个 wav 文件的 WAV 文件写入问题

> ID：16162670
> 
> 赞同：0
> 
> 时间：2013-04-23T06:43:31.973
> 
> 标签：java, audio, fileoutputstream, random-access

在我的程序中，我必须从视频和音频中删除某些帧，以便删除广告。视频存储在 .rgb 文件中，音频存储在 .wav 文件中。

视频工作正常。但是，当我尝试仅将一个 wav 文件中的几帧写入输出 wav 文件时，它在播放时会出错。

虽然程序编写正确并且我可以在 Real Player 中播放它，但当我在代码上运行它时，音频给出了一个名为 mark/reset not supported 并且无法获得位置错误的错误，以播放教授给出的 wav 文件.

我找不到写入音频功能的错误。这是功能

```
public void do_audioWrite() throws IOException
{
    long offset=0;
    long offset2=0;
    int audioInfoSize = 2; //audio info is in bytes
    long FRAMESIZE= 352*288*(24/8);
    double MAX_POSSIBLE_FRAMES=AdvRemove.file_len/FRAMESIZE;
    double AUDIO_PER_FRAME = 2000;
    long videoFrames=0;
    byte[] bytes = new byte[4000];
    byte[] head = new byte[44];
    RandomAccessFile raf =  new RandomAccessFile(AdvRemove.afilename,"r");
    OutputStream outputStream = new FileOutputStream(AdvRemove.write_audio);

    raf.seek(0);
    raf.read(head);
    outputStream.write(head);

    for (offset=44; ((offset < raf.length()) && (videoFrames < MAX_POSSIBLE_FRAMES)); offset+=2*AUDIO_PER_FRAME) 
    {

        if(Group1.size()>Group2.size())
        {
            if(Group1.contains((int)videoFrames))
            {

                            raf.seek(offset);
                            raf.read(bytes);
                            outputStream.write(bytes);

            }
        }

        else if(Group1.size()<Group2.size())
        {
            if(Group2.contains((int)videoFrames))
            {
                raf.seek(offset);
                raf.read(bytes);
                outputStream.write(bytes);

            }
        }

        videoFrames++;
    }

} 
```

以上是我编写音频的功能。

如果在我的名为 Group1 和 Group2 的 arrayList 中找到相应的视频帧，我只会写一个音频帧

首先，我获取输入 wav 文件的标题并将其写入输出 wav 文件。

然后我检查是否存在相应的视频帧。如果是，我写对应于该视频帧的音频帧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:09:41.977

您需要更新输出文件标头，使其适合您正在创建的新文件。

```
outputStream.write(head); 
```

在这里，您只是简单地复制原始文件标题，但看起来在您的循环中，您并不总是将样本从原始文件复制到剥离文件（即您的输出文件将比输入文件短）。wav 文件格式在标题中包含有关文件大小的信息（请参阅[https://ccrma.stanford.edu/courses/422-winter-2014/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422-winter-2014/projects/WaveFormat/)以了解标题的细分），您需要更新标题以使新文件具有正确的数据长度。

# eclipse - 在同一个端口上打开多个服务器

> ID：16162677
> 
> 赞同：0
> 
> 时间：2013-04-23T06:43:57.780
> 
> 标签：eclipse, tomcat, jboss

我对网络开发真的很陌生。我已经在我的 windows7 64 位操作系统上安装了 tomcat v7.0 和 jboss v4.2。编辑器是 Eclipse Juno。我启动 Tomcat（在 eclipse 中），然后输入地址

```
 http://localhost:8080 
```

它为我打开了 tomcat 欢迎页面（带有猫的页面）-> 在 IE、Google Chrome 中。

但是在 Firefox 中打开时，相同的地址会打开 Jboss 欢迎页面。

请记住，Jboss 在整个过程中都停止了。只有 tomcat 正在运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:58:46.647

在同一个 TCP 端口上，只有一台服务器可以监听。你能在你的设置上多写一点吗？你是分别运行tomcat和jboss，还是将jboss部署到tomcat中？从你写的我假设是后者。

另外，您确定这两个页面在同一个网址上吗？

# javascript - 获取按键值

> ID：16162680
> 
> 赞同：1
> 
> 时间：2013-04-23T06:44:23.850
> 
> 标签：javascript, jquery, keypress

我有 JS 选择。我需要使 onKeyPress 函数女巫返回我一个真正的值，从我按下的字符开始。

我有一组值，它是跨度值，所以我尝试用 JQuery 来获取它们`.text`。我抓住的是没有正确空格的大数组，就像这样：

`Republic AdygeyaRepublic AltaiAltaisky krayAmur regionArkhangelsk regionAstrahan regionRepublic Bashkorstan` 和更多...

我的按键功能：

```
$(document).keypress(function(e) {
                if (e.which == 33) {
                    var $item = $wrapperItems.find('span');
                    var $mass = $item.text();
                    if ($mass == $mass.toUpperCase()) {
                        alert("$mass");
                    }
                    alert(String.fromCharCode(e.keyCode));
                    console.log($mass);
                }
            }); 
```

抱歉语法错误，感谢关注。

# android - 日期选择器插件不适用于cordova 2.2.0？

> ID：16162682
> 
> 赞同：0
> 
> 时间：2013-04-23T06:44:28.600
> 
> 标签：android, cordova, cordova-2.0.0, android-datepicker

我正在使用 cordova 2.2.0 创建一个 android 应用程序。现在我在 datepicker 插件上遇到错误。我安装了日期选择器插件，请参阅此链接[https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)。

现在我得到 Uncaught TypeError: Cannot read property 'datePicker' of undefined。请指导我。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:55:33.517

确保您将其放入`DatePickerPlugin.java`正确的包装中。他们最近更新了插件的 Java 文件以匹配新的 CordovaPlugin 类，但忘记更新 README。

`DatePickerPlugin.java`应该在一个名为的包中`com.phonegap.plugins`（注意末尾的**s 。）**

然后在您的 config.xml 中，您应该`<plugin name="DatePickerPlugin" value="com.phonegap.plugins.DatePickerPlugin"/>`再次注意到*plugins*中的**s**。

 *此外，我在自述文件中注意到他们没有告诉您在 HTML 页面中包含 .js 文件。如果您想实际使用该插件，请确保将其添加到您的 HTML 页面中：`<script type="text/javascript" charset="utf-8" src="datePickerPlugin.js"></script>`. 根据该错误消息，这实际上可能是您的问题。*

# titanium - 如何替换视图

> ID：16162685
> 
> 赞同：0
> 
> 时间：2013-04-23T06:44:51.583
> 
> 标签：titanium, titanium-mobile

应用程序需要多个窗口（让我们调用 A、B、C）。每个窗口都有多个视图（表格视图、图像视图以及 Web 视图）。假设窗口 A 具有三个视图（x，y，z），窗口 B 具有三个视图（d，e，f）。应用程序需要在方向改变时显示不同大小的图像。

我已经使用手势事件侦听器并通过窗口循环查看视图并用新图像替换视图来实现相同的目的。我遇到的问题是，当我们从一个窗口导航到另一个窗口并且方向发生变化时，循环后视图的加载需要折腾。有没有更好的方法来实现同样的目标？

钛中是否有类似以下代码的方法来替换视图？

```
var self=Ti.UI.currentWindow
var newView=Ti.UI.createImageView({image:'abc.png'})
self.replace(self.children[1],newView ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:05:30.150

**不幸的是，现在有`replace`方法。**

您需要删除整个视图并再次添加它，但如果您在同一级别上有多个视图，这可能会导致布局错误。然后，实现取决于设置的布局（`vertical`、`horizontal`等`composite`）。

例如，在`vertical`布局中删除一个项目并简单地添加一个新项目将删除您指定的项目，但在末尾附加新项目，因为您无法指定应按哪个顺序添加它。

如果你有一个`composite`布局，你可以指定绝对位置，但是添加一个新视图会导致`zIndex`这个视图更高，这样它就会隐藏以前在相同/相似位置添加的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:28:24.997

[好吧，您总是可以锁定窗口的方向](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-orientationModes)。但这并不是很好的做法（尤其是对于 iOS）。

`width`通常，如果您将视图的和定义`height`为百分比`Ti.UI.FILL`，或者如果您有`composite`布局，则可以很好地处理方向更改。检查您是否没有为视图提供绝对坐标，因为这可能[会导致布局问题。](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.View-property-layout)如果您有垂直或水平布局，您通常不必担心方向变化，除非您没有正确地将视图嵌套在主容器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:41:04.937

为什么不简单地更改图像链接？

```
var self = Ti.UI.currentWindow;
self.children[1].image = 'bcd.png'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T15:30:15.553

普拉萨德，

如果这只是为了确保图像在不同方向上看起来不错，您可以使用 Titanium 在 android/images 文件夹中提供的不同文件夹。您可以为每个方向和设备尺寸制作不同的图像。对于 IOS您可以像已经在做的那样仅更改方向更改的图像。

[https://wiki.appcelerator.org/display/guides/Using+density-specific+resources+on+Android](https://wiki.appcelerator.org/display/guides/Using+density-specific+resources+on+Android)

如果您担心布局，您可以做以下几件事：

1.以百分比形式给出所有高度或宽度值。这样，一旦方向自动改变，所有元素都会重新调整大小。

2.在每个窗口打开时检查默认方向是垂直还是水平，并相应地设置imageView的图像属性。

```
Ti.UI.orientation 
```

默认情况下，此属性将为您提供窗口的方向。此属性的值可以是这个

Ti.UI.肖像

Ti.UI.UPSIDE_PORTRAIT

Ti.UI.LANDSCAPE_LEFT

Ti.UI.LANDSCAPE_RIGHT

使用“if else”并相应地设置图像。

# java - 为什么我的 Linkedlist 的第一层不打印？

> ID：16162686
> 
> 赞同：0
> 
> 时间：2013-04-23T06:44:54.280
> 
> 标签：java

我试图通过链表显示两个对象之间的邻接关系。当我试图打印出邻接关系时，它会跳过第一行。这是打印出来的：

```
X

X

R   >>>   W

S   >>>   Y

T

W

R   >>>   Z 
```

它应该是：

```
Q   >>>   X
R   >>>   x
P   >>>   R   >>>   W
W   >>>   S   >>>   Y
S   >>>   T
T   >>>   W
Y   >>>   R   >>>   Z 
```

如您所见，仅打印出第二和第三级，而不是全部。

相关代码：

```
public static void main(String[] args) throws FileNotFoundException {

    FlightMap flights = new FlightMap();
    flights.loadFlightMap("cityFile.txt", "flightFile.txt");
    Scanner requestInStream = null;

    requestInStream = new Scanner(new File("requestFile.txt"));

    //DEBUGGING
    String[] str = new String[] {"Q", "X", "R", "P", "W", "S", "T", "Y", "Z"};
    String temp = null;
    for ( int x = 0; x < str.length; x++) {
        temp = str[x];
        City city = new City(temp);
        flights.displayAdjacentCities(city);
    } 
```

飞行地图类

```
//Read in the files from the main...
private int size = 0;
private City[] allCities;
private LinkedList<City>[] adjacents;

public FlightMap() {
}

@SuppressWarnings("unchecked")
public void loadFlightMap(String cityFileName, String flightFileName)
        throws FileNotFoundException {

    Scanner inStream = null;
    inStream = new Scanner(new File(cityFileName));
    while(inStream.hasNextLine()) {
        size++;
        inStream.nextLine();
    }
    inStream.close();
    allCities = new City[size];
    adjacents = (LinkedList<City>[]) new LinkedList[size];

    for(int x = 0; x < size; x++) {
        adjacents[x] = new LinkedList<City>();
    }

    Scanner inStream1 = null;
    inStream1 = new Scanner (new File(cityFileName));
    for(int x = 0; x <size; x++) {
        String input = inStream1.nextLine();
        allCities[x] = new City (input);
    }

    inStream1 = new Scanner (new File(flightFileName));
    String data;
    while (inStream1.hasNext()) {
        int flag = 0;
        data = inStream1.next();
        for (int i = 0; i < size && flag !=1; i++) {
            if(allCities[i].getName().equalsIgnoreCase(data)) {
                data = inStream1.next();
                for (int j = 0; j < size; j++) {
                    if (allCities[j].getName().equalsIgnoreCase(data)) {
                        adjacents[i].add(allCities[j]);
                        flag = 1;
                    }
                }
            }
        }
    }
    inStream1.close();
} 
```

显示邻接法：

```
public void displayAdjacentCities(City aCity) { 
    for(int x = 0; x < size; x++) {
        if (aCity.getName().equalsIgnoreCase(allCities[x].getName())) {
            Iterator<City> iter = adjacents[x].iterator();
            while(iter.hasNext()) {
                System.out.print(iter.next().getName());
                if(iter.hasNext()) {
                    System.out.print("   >>>   ");
                }
            }
            System.out.println("\n");
        }
    } 
```

所有对象都在 cityFile 中：（每个在单独的行上）

```
Q
X
R
P
W
S
T
Y
Z 
```

邻接在 flightFile 中（由两个字母之间的制表符分隔，每对在单独的行中：

```
Q   X
R   X
P   R
P   W
W   S
S   T
T   W
W   Y
Y   R
Y   Z 
```

所需的路径在 requestFile 中：

```
Q   X
P   X
P   T
P   Z
P   X
P   Q
T   P
A   S
R   X
T   X
Q   X 
```

我不确定我是否在问正确的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:06:52.620

示例答案看起来好像应该将一个城市视为与其相邻？尝试这个：

```
public void displayAdjacentCities(City aCity) { 
  for(int x = 0; x < size; x++) {
    if (aCity.getName().equalsIgnoreCase(allCities[x].getName())) {
       if (adjacents[x].size() == 0) continue;
       System.out.print(aCity.getName());
       for (City other : adjacents[x]) {
                System.out.print("   >>>   " + other.getName()); 
            }
            System.out.println();
        }
    }
} 
```

# google-analytics - 在 Adob e CQ5 中使用 Google Analytics 进行出站链接跟踪

> ID：16162687
> 
> 赞同：0
> 
> 时间：2013-04-23T06:44:59.213
> 
> 标签：google-analytics, adobe, aem, click-tracking

我的客户目前正在使用 Adob​​e CQ5。

每次我通过 CQ5 添加 Google Analytics 事件跟踪时，代码都会中断。（无论我选择 HTML 视图还是设计视图都没有关系。）

编码：

```
onClick="_gaq.push(['_trackEvent', 'CC tracking test', 'CC CAN button click', 'Clicked',, false]);">Find a local cc branch</a> 
```

只是想知道是否还有其他选项可以在 CQ5 中实现此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:09:46.703

你为什么不把它放在你的页面的页面组件中，在页脚中？这样它就会出现在所有页面上，并且在那里应该可以正常工作。这就是我在 CQ5 过去的项目中所做的。

# repository-pattern - 一个工作单元是否应该由多个 dbcontext 组成

> ID：16162689
> 
> 赞同：0
> 
> 时间：2013-04-23T06:45:06.740
> 
> 标签：repository-pattern, dbcontext, unit-of-work

一个工作单元实现包含多个 dbcontext 是一种好的做法还是常见的场景？如果是，如何管理提交和回滚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:44:31.290

你不应该在一个UoW中有同一个数据库的多个dbcontext，因为你会发现并发和数据不一致的问题，这就是UoW的意义，避免这种问题。

UoW 可以包含不同数据库的多个 dbcontext，但如果您需要涉及两个或更多 dbcontext 的原子任务，则需要一些分布式事务机制。

由于我不知道实施技术，我不能更具体。

# php - 使特定元素成为数组中的第一个

> ID：16162694
> 
> 赞同：1
> 
> 时间：2013-04-23T06:45:40.003
> 
> 标签：php

我有一个这样的数组

```
$arrList = Array ( 
     [0] => Array
        (
          [master] => Array
                (
                  [id] => 3
                  [name] => Test
                )
        )

     [1] => Array
        (
          [master] => Array
                (
                  [id] => 4
                  [name] => Sample
                )
        )
  ) 
```

现在，我知道 的值，我`id`怎样才能重新排列特定的值，`id`使其位于顶部..（即，无论`id`我在应该位于数组顶部的变量中的值是什么，如果我得到的值为`id`4 那么数组应该是

```
$arrList = Array ( 
         [0] => Array
            (
              [master] => Array
                    (
                      [id] => 4
                      [name] => Sample
                    )
            )

         [1] => Array
            (
              [master] => Array
                    (
                      [id] => 3
                      [name] => Test
                    )
            )
      ) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:32:33.977

```
function cmp($a, $b)
{
    if ($a['master']['id'] == $b['master']['id']) {
        return 0;
    }

    return ($a['master']['id'] > $b['master']['id']) ? -1 : 1;
}

$a = Array ( 
        0 => Array   (
          'master' => Array
                (
                  'id' => 3,
                  'name' => 'Test',
                )
        ),

     '1' => Array
        (
          'master' => Array
                (
                  'id' => 4,
                  'name' => 'Sample',
                )
        )
  );

usort($a, "cmp");

print_r($a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:42:30.663

试试这段代码

```
foreach($arrList as $Key => $array) {
    if($id == $array['master']['id']){ //check the value with all [master][id]
         $arr[] = $array; // setting up the respective array to another array
         $iKey = $Key; // getting the key value of that particular array
    }
}
if(isset($iKey) && $iKey != NULL){
    unset($arrList[$iKey]); // removing the key value from the main array
    array_splice($arrList, 0, 0, $arr);
    //using this function setting up again the array to the 0th index,
} 
```

对于任何其他索引值，在上述函数中作为第二个参数提及，假设如果您需要作为第三个索引，那么它应该是..

```
array_splice($arrList, 3, 0, $arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:54:53.453

您可以使用特殊的排序功能对数组进行排序。代码是：

```
usort($array, function($a,$b){ return $b['master']['id']==4; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:22:30.443

试试这个，我在这里创建了示例

[http://codepad.org/z4oI9KHk](http://codepad.org/z4oI9KHk)

# iphone - 具有自动填充选项的 Plist，例如 info plist

> ID：16162696
> 
> 赞同：2
> 
> 时间：2013-04-23T06:45:53.843
> 
> 标签：iphone, ios, xcode, ipad, plist

我正在开发一个 ios 库，我计划在其中从应用程序包中的 plist 读取一些数据。plist 必须只需要包含一组我需要处理的固定键。如何创建一个只允许一组固定键的 plist，如 info plist。

![带有键选择的示例信息 plist](https://i.stack.imgur.com/LPGts.png)

请参阅信息 plist 允许开发人员仅添加他们需要的一组固定密钥。如何使用此选项创建 plist。

谢谢， 纳文山

# c# - 从 C# 中的 twitter 帐户获取好友列表

> ID：16162710
> 
> 赞同：0
> 
> 时间：2013-04-23T06:46:57.870
> 
> 标签：c#, twitter

我想从 Twitter 帐户中获取所有朋友。我已经完成了以下代码：

```
 username = "username";
        password = "password";
        string url = "http://twitter.com/statuses/friends.xml";
        string user = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(username + ":" + password));
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        Friends frd;
        List<Friends> lf = new List<Friends>();

        request.Method = "POST";
        request.Credentials = new NetworkCredential(username, password);
        WebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string responseString = reader.ReadToEnd();
        reader.Close();
        XmlDocument xmld = new XmlDocument();
        xmld.LoadXml(responseString);
        XDocument document = XDocument.Parse(responseString);

        foreach (XmlNode xmln in xmld.SelectNodes("users/user"))
        {
            frd = new Friends();
            frd.id = Convert.ToInt32(xmln["id"].InnerText);
            frd.name = xmln["name"].InnerText;
            frd.screen_name = xmln["screen_name"].InnerText;
            lf.Add(frd);
        } 
```

但是，我得到空响应。我应该错过其中的一些东西吗？还是有其他更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:29:31.397

不确定这是否是问题的全部，但是：

```
request.Method = "POST"; 
```

如果您要检索，应该是 GET。

# php - 试图从thinkup获取sql表数据

> ID：16162714
> 
> 赞同：1
> 
> 时间：2013-04-23T06:47:01.927
> 
> 标签：php, mysql, thinkup

我正在使用 ThinkUp 应用程序（社交媒体测量工具），我在 ThinkUp 数据库中创建了一个包含一些数据的表，我正在尝试使用（class.insightMySQLDAO.php）中的简单查询来显示数据，我该如何解决这个问题询问？

```
public function getTsExternal(){
    $q = "SELECT * FROM #prefix#tsmentioned ";
    $q = $this->execute($q);
    var_dump($q);
} 
```

我得到的结果是

```
object(PDOStatement)#17 (1) {
  ["queryString"]=>
  string(29) "SELECT * FROM tu_tsmentioned "
}
NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:51:20.440

```
$q = "SELECT * FROM #prefix#tsmentioned ";
$ps = $this->execute($q);
$row = $this->getDataRowAsArray($ps);
 var_dump($row); 
```

# c++ - 如何减少使用 CodeLite mingw 4.7.1 生成的 exe 大小

> ID：16162716
> 
> 赞同：0
> 
> 时间：2013-04-23T06:47:11.817
> 
> 标签：c++, linker, makefile, gnu-make, codelite

我是 CodeLite 的新手

每次我按 F7 编译项目时，它都会产生一个巨大的 exe

```
#include <iostream>

int main(int argc, char *argv[]){
        return 0;
} 
```

短代码但 900KB

我已经切换到发布模式，问题仍然存在。

并且我自己在 CMD 中尝试过相同的命令行，g++ 只产生 49 KB

我猜codelite使用的makefile是关键？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:23:32.607

The size of the executable is not related to the Makefile, but because of the inclusion of iostream (removing it will reduce your exe to the minimum)

However you might want to add '-s' to the linker options from: project settings -> common settings -> linker

adding '-s' will reduce the executable by half to around ~400KB in release mode. You can also try and run 'strip' on the executable

Eran

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:24:52.033

将 -ffunction-sections 传递给每个编译，将 --gc-sections 传递给最终链接（或 -Wl,--gc-sections 传递给 gcc）以启用死代码的剥离。

# jquery - 这在 Jquery 中叫什么？

> ID：16162717
> 
> 赞同：-2
> 
> 时间：2013-04-23T06:47:17.093
> 
> 标签：jquery, function

我是 Jquery / Js 开发的新手。我在从 Internet 下载的示例 JS 文件中看到了下面的代码块。

```
(function($, undefined) {
...
})(window.jQuery); 
```

谁能解释一下这个代码块是什么？我的意思是请解释这个代码块。

在此先感谢， BalaGurusamy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:49:36.210

那是一个立即调用的函数表达式 (IIFE)。外括号将函数转换为表达式而不是声明，第二对实际上调用了它。

匿名函数接受 2 个参数`$`和`undefined`，并且您传入一个参数，即对 jQuery 对象的引用。因此，在匿名函数内部`$`将引用`jQuery`并且由于没有提供第二个参数`undefined`将包含该`undefined`值（这可能很重要，因为`undefined`可能已在脚本的其他地方被覆盖）。

# jquery - 编辑验证失败时 JqGrid 不突出显示错误

> ID：16162718
> 
> 赞同：1
> 
> 时间：2013-04-23T06:47:25.643
> 
> 标签：jquery, jqgrid

我使用带有一些编辑规则的内联编辑模式（例如，editrules:{number:true}）。

当我保存时，如果验证失败，错误消息框会正确显示，但错误字段未以红色突出显示（类 ui-state-error）。

默认情况下，jqgrid 不应该添加类“ui-state-error”吗？

```
grid.jqGrid({
    datatype: 'local',
    data: colD.rootVar,
    gridview: true,
    colModel : [
        {name: "Team", label:"team", index:"team", width:"150", align:"center", sortable:false},
        {name:"Employee", index:"employee", width:"150", align:"center", sortable:false},
        {name:"col_01", index:"1", width:"50", align:"center", sortable:false, editable:true, editrules:{required: true, number:true} },
        {name:"col_02", index:"2", width:"50", align:"center", sortable:false, editable:true } ],
    pager: jQuery('#pager'),
    rowNum: 20,
    rowList: [5, 10, 20, 50],
    height: "auto",
    viewrecords: true,
    caption: "Planning Management ITEC-PRD"
    });

    grid.jqGrid('navGrid',"#pager",{edit:false, add:false, del:false});
    grid.jqGrid('inlineNav',"#pager",{edit:true, add:false, del:false});
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:43:29.467

我认为您可以按照[旧答案中的](https://stackoverflow.com/a/6162086/315935)建议进行操作。如何显示旧代码[的修改演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithInlineEditing_.htm)也适用于当前版本的 jqGrid 4.4.5。

# php - 计算字符串中特定字符的数量

> ID：16162719
> 
> 赞同：8
> 
> 时间：2013-04-23T06:47:30.847
> 
> 标签：php, string

对不起，由于我的问题，我刚刚发现了一个新问题： [Get The Number of Sepecific String Inside String](https://stackoverflow.com/questions/16160282/get-the-number-of-sepecific-string-inside-string/16160305?noredirect=1#comment23094348_16160305)。

我一直在努力，如何找到字符串中特定字符的数量？情况是这样的。

```
function get_num_chars($char) {
    $string = '120201M, 121212M-1, 21121212M, 232323M-2, 32323K, 323232K-1'
} 
```

如果我通过`get_num_chars(M) would return 2` 如果我通过`get_num_chars(M-1) would return 1`

我试过了`count_chars()`，`substr_count()`但它不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T06:50:57.047

可以使用[substr_count()](https://www.php.net/manual/en/function.substr-count.php)。

我认为你没有正确地传递一个值。试试这样：

```
$string = '120201M, 121212M-1, 21121212M, 232323M-2, 32323K, 323232K-1';

echo substr_count($string, 'K-1'); //echo's 1

echo substr_count($string, 'K'); // echo's 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T07:14:04.230

使用正则表达式的可能解决方案：

```
function get_num_chars($char) {
    $string = '120201M, 121212M-1, 21121212M, 232323M-2, 32323K, 323232K-1';
    return preg_match_all('/'.$char.'(?=,|$)/', $string, $m);
}

echo get_num_chars('M');    // 2
echo get_num_chars('M-1');  // 1
echo get_num_chars('M-2');  // 1
echo get_num_chars('K');    // 1
echo get_num_chars('K-1');  // 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:57:59.473

尝试这个。这可能不可行，但它解决了您的问题。

```
function get_num_chars($char) {

    $string = '120201M, 121212M-1, 21121212M, 232323M-2, 32323K, 323232K-1';
    echo substr_count($string, $char);
}

get_num_chars('M,');
get_num_chars('M-1');
get_num_chars('k,'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:01:46.013

```
$k_count = substr_count($string, 'K') - substr_count($string, 'K-');
$k1_count = substr_count($string, 'K-1'); 
```

或者

`Counting K not followed by dash`如下：

```
$k_count = preg_match_all('/*K(?!-)/*', $string, $out); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T07:08:12.977

尝试这个：

```
 $string = '120201M, 121212M-1, 21121212M, 232323M-2, 32323K, 323232K-1';

 $wordCounts = array_count_values(str_word_count($string,1));

 echo $mCount = (isset($wordCounts['M-'])) ? $wordCounts['M'] : 0; 
```

但这是一件事。您可以只传递“M-”或“M”，而不是“M-1”。这是您想要的一些解决方法。因为 str_word_count 匹配正在使用的确切字数。

# iphone - 将@selector 传递给我的 UIbutton 但单击事件不响应

> ID：16162721
> 
> 赞同：0
> 
> 时间：2013-04-23T06:47:44.963
> 
> 标签：iphone, ios, uibutton

我的代码：</p>

```
 - (void)showWithStatus:(NSString *)status barColor:(UIColor*)barColor textColor:(UIColor*)textColor click:(SEL)click{
    if(!self.superview)
        [self.overlayWindow addSubview:self];
    [self.overlayWindow setHidden:NO];
    [self.topBar setHidden:NO];
    self.topBar.backgroundColor = barColor;
    NSString *labelText = status;
    CGRect labelRect = CGRectZero;
    CGFloat stringWidth = 0;
    CGFloat stringHeight = 0;
    if(labelText) {
        CGSize stringSize = [labelText sizeWithFont:self.stringLabel.font constrainedToSize:CGSizeMake(self.topBar.frame.size.width, self.topBar.frame.size.height)];
        stringWidth = stringSize.width;
        stringHeight = stringSize.height;

        labelRect = CGRectMake((self.topBar.frame.size.width / 2) - (stringWidth / 2), 0, stringWidth, stringHeight);
    }
    self.stringLabel.frame = labelRect;
    self.stringLabel.alpha = 0.0;
    self.stringLabel.hidden = NO;
    self.stringLabel.text = labelText;
    self.stringLabel.textColor = textColor;

    clickBn=[[UIButton alloc]initWithFrame:self.stringLabel.frame];
    clickBn.backgroundColor=[UIColor blueColor];
    [clickBn addTarget:self action:click forControlEvents:UIControlEventTouchUpInside];

    if(!clickBn.superview)
        [self.topBar addSubview:clickBn];

    [UIView animateWithDuration:0.4 animations:^{
        self.stringLabel.alpha = 1.0;
    }];
//    [self setNeedsDisplay];
} 
```

并调用此方法：

```
 - (IBAction)successButtonPressed:(id)sender {
[KGStatusBar showSuccessWithStatus:@"Successfully synced" click:@selector(clickBn)];
 }

 - (void)clickBn {
NSLog(@"sss");
 [KGStatusBar dismiss];
} 
```

NSLog(@"sss") 不显示。我想将一个方法传递给 customView 的 UIButton ，但是当我单击 UIbutton 时没有响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:20:06.967

`@interface`在头文件之前和之后的 .h 文件中创建控制中的委托。

```
@protocol YourControlDelegate <NSObject>

-(void) delegateMethod;

@end 
```

在`@interface`

```
@property (nonatomic,assign) id <YourControlDelegate> yourdelegate; 
```

在. `.m @synthesize`_`yourdelegate`

在按钮点击动作调用中`[self.yourdelegate delegateMethod]`；

在您的`ViewController`添加`YourControlDelegate`中，如下所示

```
@interface YourVC : UIViewController <YourControlDelegate> 
```

在`.m`实现`delegate`方法

```
-(void) delegateMethod
{
    //you code.
} 
```

在这里，当您单击按钮时，将调用`delegateMethod`in 。`viewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:56:14.650

这是您的 clickBn 方法，对吗？

```
- (void)clickBn {
NSLog(@"sss");
 [KGStatusBar dismiss];
}

now what you doing in action? action:click??
do like following 

clickBn=[[UIButton alloc]initWithFrame:self.stringLabel.frame];
    clickBn.backgroundColor=[UIColor blueColor];
    [clickBn addTarget:self action:@selector(clickBn)  forControlEvents:UIControlEventTouchUpInside];
 If you want to call method which is in another class then do like this 
first make object of that class

  ViewController *dvController = [ViewController alloc] init];
   after that [dvController methodName];
do this all in your clickBn method First clickBn method will be called and it will call that another class method which you wanted to call 
 NOTE: you need to import that class in header 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:00:12.067

action 应该是一个选择器方法。

`:`例如，如果要将按钮作为参数传递给方法用户

```
[button addTarget:self action:@selector(buttonClicked:) 
                                         forControlEvents:UIControlEventTouchUpInside];

-(void)buttonClicked:(UIButton *)sender
{
   //your code and you can also access the button properties using sender.
} 
```

它是首选。如果您不想使用 sender(button) 排除`:`

# f# - 我们可以有更多的通用类型来缩短 F# 中的代码吗？

> ID：16162722
> 
> 赞同：2
> 
> 时间：2013-04-23T06:47:51.593
> 
> 标签：f#, inline, primitive

我在阅读“Programming F# 3.0”时遇到了这段代码：

```
type BitCounter =

    static member CountBits (x : int16) =
        let mutable x' = x
        let mutable numBits = 0
        for i = 0 to 15 do
            numBits <- numBits + int (x' &&& 1s)
        x' <- x' >>> 1
        numBits

    static member CountBits (x : int) =
        let mutable x' = x
        let mutable numBits = 0
        for i = 0 to 31 do
            numBits <- numBits + int (x' &&& 1)
        x' <- x' >>> 1
        numBits

    static member CountBits (x : int64) =
        let mutable x' = x
        let mutable numBits = 0
        for i = 0 to 63 do
            numBits <- numBits + int (x' &&& 1L)
        x' <- x' >>> 1
        numBits 
```

我试图通过制作一个辅助功能来缩短这部分：

```
type BitCounter =

    static member CountBitsWithRangedMask x upBound typeConverter =
        seq { for i = 0 to upBound do yield 1 <<< i }
            |> Seq.map typeConverter
            |> Seq.map ((&&&) x)
            |> Seq.filter ((<>) (typeConverter 0))
            |> Seq.length

    static member CountBits (x : int16) =
        BitCounter.CountBitsWithRangedMask x 15 int16

    static member CountBits (x : int) =
        BitCounter.CountBitsWithRangedMask x 31 int

    static member CountBits (x : int64) =
        BitCounter.CountBitsWithRangedMask x 63 int64 
```

但是`static member CountBits (x : int)`导致了编译错误：

```
error FS0001: This expression was expected to have type
    int16
but here has type
    int 
```

所以我想知道是否可以`Integral a`在 Haskell`CountBitsWithRangedMask`的第一个参数上添加一些约束。或者有没有其他可以简化原始代码的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T08:15:57.920

您可以使用`LanguagPrimitives.GenericOne`并`LanguagPrimitives.GenericZero`结合`inline`来实现这一点。

```
let inline CountBitsWithRangedMask x upBound =
    seq { for i = LanguagePrimitives.GenericZero to upBound do yield LanguagePrimitives.GenericOne <<< i }
    |> Seq.map ((&&&) x)
    |> Seq.filter ((<>) (LanguagePrimitives.GenericZero))
    |> Seq.length

let test16 (x:System.Int16) = CountBitsWithRangedMask x 15
let test32 (x:System.Int32) = CountBitsWithRangedMask x 31
let test64 (x:System.Int64) = CountBitsWithRangedMask x 63 
```

使用它我们也不需要`typeConverter`参数，因为编译器会自动执行所有操作。

对于这类问题，这是一种相当通用的方法。

# ios - Facebook iOS 错误登录对话框未指定写入隐私

> ID：16162723
> 
> 赞同：1
> 
> 时间：2013-04-23T06:47:54.163
> 
> 标签：ios, facebook, facebook-ios-sdk, facebook-login

当用户在登录流程中时，是否有人解决了此错误消息？我试图在 DevCenter -> 权限中切换我的默认隐私设置。

我正在使用不推荐使用的方法来同时获得读取和正确的权限。我有其他应用程序成功使用此方法。

```
- (void)openSession
{
    [FBSession openActiveSessionWithPermissions:[[NSArray alloc] initWithObjects:@"email",@"publish_actions",@"user_birthday", nil] allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    [self sessionStateChanged:session state:status error:error];
}];
} 
```

![错误图像](https://i.stack.imgur.com/JTbCD.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T21:43:25.840

我已经在我们的开发者网站 ( [https://developers.facebook.com/bugs/568170979870794](https://developers.facebook.com/bugs/568170979870794) ) 上回复了您的错误报告。

如果您在 .plist 文件中输入 FacebookDisplayName，它将选择您进行读写权限拆分。这意味着您不能再一起请求读/写权限（使用我们已弃用的 openActiveSessionWithPermissions 调用）。这不是重大更改，而是设计使然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:20:55.660

在 facebook 的应用程序设置中将沙盒模式设置为 no。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:44:47.003

我可以通过从 *.plist 文件中删除新添加的 FacebookDisplayName 属性（从 FB SDK 3.5 开始）来解决此问题。

打开了一个错误@facebook：

[https://developers.facebook.com/bugs/568170979870794](https://developers.facebook.com/bugs/568170979870794)

# android - Android图像可绘制文件夹问题

> ID：16162725
> 
> 赞同：0
> 
> 时间：2013-04-23T06:47:57.827
> 
> 标签：android, android-layout

在我的 android 应用程序中，我在`drawable`文件夹和`drawable-hdpi`不同名称（svs.jpg 和 svs1.jpg）中都有相同的图像

首先，我使用了 svs.jpg （可绘制文件夹）

```
<ImageView 
    android:id="@+id/image1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/svs"
 /> 
```

在一个系统中它运行没有任何障碍，但它在另一个系统中显示错误（`Inflate exception error`在二进制 xml 文件中）。所以我将图像 svs1.jpg 用作`android:background="@drawable/svs1"`. 现在它正在工作..

如果我在第一个系统上使用 svs1.jpg，它会显示错误。我不明白这个问题。有人可以说为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:54:36.467

不同资源文件夹中的图像具有相同的名称，因此设备将选择要使用的图像。

如果他们没有，我想某些设备正在“drawable”中寻找图像名称，如果他们没有找到它就会崩溃，其他设备会在“device-hdpi”文件夹中查找，如果他们没有找到就会崩溃找到它。

有关[此处支持多屏](http://developer.android.com/guide/practices/screens_support.html)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:01:57.500

看来您真的误解了这些文件夹的作用。您的 android 将根据您运行它的设备的**屏幕尺寸**或**像素密度来选择文件夹**

如果您的设备具有中等像素密度和大屏幕。因此，它从具有给定限定符的 res 文件夹中选择其资源。

```
res/layout-large/my_layout.xml 
```

和图片来自

```
res/drawable-mdpi/my_icon.png 
```

您不能告诉您的设备从 hdpi 文件夹中获取图像，因为它没有高像素密度。

所以你给所有可绘制文件夹中的图像名称相同..你的设备默认情况下会决定从哪个文件夹中获取图像，你不必担心tat。

并确保正确的图像位于正确的文件夹中。

# c# - 我从 asmx webservice 获得了一个 XML 文件，如何将它绑定到我的 windows 窗体的 gridview 中？

> ID：16162730
> 
> 赞同：0
> 
> 时间：2013-04-23T06:48:19.493
> 
> 标签：c#, asmx

在我的解决方案中，我有两个项目作为 Web 服务和窗口应用程序。

1.  成功完成网络服务
2.  将 Web 引用添加到窗口应用程序

我的 Windows 窗体中有一个网格视图。如何在我的网格视图中显示来自 Web 服务的输出，它是 XML 文档的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:23:53.280

您可以使用以下代码

```
DataSet xyz = new DataSet();
xyz.ReadXml("c:\whatever.xml");
gridview.DataSource = xyz.Tables[0].DefaultView;
gridview.DataBind(); 
```

# c# - 已经是与此命令关联的打开的 DataReader，必须先关闭

> ID：16162732
> 
> 赞同：0
> 
> 时间：2013-04-23T06:48:21.407
> 
> 标签：c#

当我尝试执行代码时，它显示了上述错误。

```
try
{
    com.CommandText = "select * from Export";
    com.ExecuteReader();

    data_mode = "Export";
    com.CommandText = "Insert INTO [" + New_access_file + "]." + data_mode + " select * FROM ExportDATA";
    com.ExecuteNonQuery();
}
catch
{
    data_mode = "Export";
    com.CommandText = "SELECT * INTO [" + New_access_file + "]." + data_mode + " FROM ExportDATA";
    com.ExecuteReader();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:15:01.077

使用完 DataReader 对象后，您应该始终调用 Close 方法。

请注意，当 DataReader 打开时，Connection 由该 DataReader 独占使用。在关闭原始 DataReader 之前，您无法为 Connection 执行任何命令，包括创建另一个 DataReader。

使用此代码，

```
var reader = com.ExecuteReader();
//do whatever with reader

reader.Close(); 
```

**或者**

您可以使用`CommandBehavior.CloseConnection`获取更多信息[ExecuteReader(CommandBehavior.CloseConnection) 是否总是关闭连接？](https://stackoverflow.com/questions/10519273/will-executereadercommandbehavior-closeconnection-always-close-connection). 我们可以将它与 Command 对象的 ExecuteReader 方法一起使用，例如

```
var reader = com.ExecuteReader(CommandBehavior.CloseConnection); 
```

这将确保当我们调用 reader.Close() 时，关联的连接对象也将被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:51:30.443

您需要一个开放的连接：-

```
try
                {   
                    con.open();

                    com.CommandText = "select * from Export";
                    com.ExecuteReader();

                    data_mode = "Export";
                    com.CommandText = "Insert INTO [" + New_access_file + "]." + data_mode + " select * FROM ExportDATA";
                    com.ExecuteNonQuery();
                }
                catch
                {
                    data_mode = "Export";
                    com.CommandText = "SELECT * INTO [" + New_access_file + "]." + data_mode + " FROM ExportDATA";
                    com.ExecuteReader();
                }
                 Finally
                 {
                   con.close();
                 } 
```

# json - codeigniter 模型查询未正确发送 json 数据

> ID：16162735
> 
> 赞同：0
> 
> 时间：2013-04-23T06:48:31.960
> 
> 标签：json, codeigniter, model, encode

我有一个 codeigniter 模型函数，它查询数据库并将结果发送回控制器，编码为 json。

整个函数如下图所示：

```
 function get_skufamily_cube($q){

        $sql=("select min([Pieces]) as ProductCode from
(SELECT  
       [ProductCode]
      ,[Description]
      ,[Length]
    ,[Pieces]
      ,[Thickness]
      ,[Width]
    ,([width]*1000) w2
    ,([thickness]*1000) t2
    ,REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','') AS l2
    ,concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')) AS pc
    ,REPLACE([ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'') as grade
    ,CONCAT(([width]*1000),([thickness]*1000),REPLACE([ProductCode],concat(([width]*1000),([thickness]*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options

  FROM [hammerhead].[dbo].[ProductList]) as p
         where Options like '%$q%' ");
    $query=$this->db->query($sql);

    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['ProductCode']));
        echo  $row['ProductCode']; // to see database result and troubleshoot
      }
      $this->output->set_content_type('application/json')->set_output(json_encode($row_set));
    }

  } 
```

$q 已成功传递给查询，并且查询的输出`echo $row['ProductCode'];`与我需要的结果一致。在本例中为 108。数据库查询在单个字段中返回单个结果。

出于某种原因，这并没有正确地传回控制器。

控制器是：

```
 $this->load->model('Sales_model');
    if (isset($_POST['data'])){
        $q = strtolower($_POST['data']);
        $data = $this->Sales_model->get_skufamily_cube($q);
        $this->output->set_content_type('application/json')->set_output(json_encode($data));
    }
} 
```

在我的开发人员工具中，我可以看到服务器响应 `108NULL`。`108`成为我的回声并`NULL`成为 json 响应。如果我删除回声，这只是 NULL。 ![在此处输入图像描述](https://i.stack.imgur.com/Ae7SB.png)

Laslty，我需要用该值填充表格行中的输入。我对此的看法 jquery 语法是：

```
$.post('get_skufamily_cubes', {data:selectedObj.value},function(result) 
 { 
 $(this).find('input[id^="cubesperbundle"]').val(result); 
 }); 
```

目前没有填充任何内容。html 输入名称和 id 是：`cubesperbundle`但附加了行号，因此`'input[id^="cubesperbundle"]'`

任何援助将不胜感激。

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:03:23.197

我看到的错误是您没有向控制器返回任何内容。

模型

```
function get_skufamily_cube($q)
{
    $Query="select
              min(Pieces) as ProductCode
            from (SELECT
                    ProductCode,
                    Description,
                    Length,
                    Pieces,
                    Thickness,
                    Width,
                    (width*1000)    w2,
                    (thickness*1000)    t2,
                    REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','') AS l2,
                    concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')) AS pc,
                    REPLACE(ProductCode,concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'') as grade,
                    CONCAT((width*1000),(thickness*1000),REPLACE(ProductCode,concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'')) as options
                  FROM hammerhead.dbo.ProductList) as p
            where Options like '%$q%'";
    return  $this->db->query($Query)->row();
} 
```

控制器

```
function getJson(){
    $this->load->model('Sales_model');
    if (isset($_POST['data'])){
        $q = strtolower($_POST['data']);
        $viewData   =   $this->Sales_model->get_skufamily_cube($q);
        $data_json = json_encode($viewData);
        echo $data_json;
    }
} 
```

编辑：
更改模型函数中的返回指令。

```
$result = $this->db->query($Query)->row();
return $result->ProductCode; 
```

# android - 使用 html.fromHtml 在 android textview 上显示图像

> ID：16162741
> 
> 赞同：0
> 
> 时间：2013-04-23T06:48:46.847
> 
> 标签：android, html, textview

这是我的 xml 字符串内容：

```
<style>
  img {padding:0 10px 10px 0; width:99% !important;}
  p,div,ul,ol,em,a,span,u,strong,strike,h1,h2,h3,h4,h5,h6
  {font-family: verdana;font-size: 14px;color: #fff;}
  html,body{background:#414042;}
  a{ color:#3400f3;}p{width:100%;}
</style>

<p> 
    <img alt="Ajay Devgn" pimcore_disable_thumbnail="true" pimcore_id="6813" 
    pimcore_type="asset" src="http://dev2.mercuryminds.com/bolly/feb2013/
    bolly---ajay-devgn-on-a-satyagraha/kangna-and-kareena.jpg" style="width: 500px; 
    height: 370px; float: left;" />
</p> 
```

这里的图像显示在 android textview 上。

但是图像没有显示......我的代码有什么问题？？？如何在 textview 上显示图像...请给我解决方案...

```
String fullcontent = in.getStringExtra("Content");
      content = fullcontent.substring(1);       
      content = (TextView) findViewById(R.id.title1);
      content.setText(Html.fromHtml(full_content)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:03:14.123

```
public static Spanned fromHtml (String source) 
```

在 API 级别 1 中添加从提供的 HTML 字符串返回可显示的样式文本。HTML 中的任何标签都将显示为通用替换图像，然后您的程序可以通过它并用真实图像替换。

这使用 TagSoup 来处理真实的 HTML，包括在野外发现的所有损坏。

如此使用

```
public static Spanned fromHtml (String source, Html.ImageGetter imageGetter, Html.TagHandler tagHandler) 
```

从提供的 HTML 字符串返回可显示的样式文本。HTML 中的任何标签都将使用指定的 ImageGetter 来请求图像的表示（如果您不想要这个，请使用 null）和指定的 TagHandler 来处理未知标签（如果您不想要这个，请指定 null）。

这使用 TagSoup 来处理真实的 HTML，包括在野外发现的所有损坏。

有关更多详细信息，请查看此[答案](https://stackoverflow.com/a/7442725/1168654)；

# jquery - 使用 jquery 函数在 Lift 框架片段中显示 div

> ID：16162744
> 
> 赞同：4
> 
> 时间：2013-04-23T06:49:17.043
> 
> 标签：jquery, ajax, scala, lift

我正在尝试创建一个简单的电梯网络应用程序。因为我想在使用 ajax 调用单击同一页面中的按钮时显示和隐藏两个 div。到目前为止，我尝试了以下代码。

**在我看来**

```
 <div id="PGMainDiv" data-lift="ShowBookedTicket" style="width=400px;height=600px;border:2px solid #FF0000;border-radius:5px">
      <div id="sampleDiv" style="font-size:15px;color:#19552D;padding:10px 5px 10px 10px">
       This is a sample div which show and hide while ajax calling
      </div>
      <div style="padding-left:267px">
         <button id="PGOK" value="OK" style="width:70px">OK</button>
      </div> 

 </div>
 <div id="ticketDiv" style="display:none;border:2px solid #FF00FF">
    <p>This is a another sample div which show and hide while ajax calling</p>
 </div> 
```

在我的**ShowBookedTicket 片段中**

```
class ShowBookedTicket {

def testFunction(s: String): JsCmd = {                  
        JsCmds.Run("jQuery('#ticketDiv').show()")
        JsCmds.Run("jquery('#sampleDiv').hide()")
        //JsCmds.Function("testJsFunction",List("param"),SHtml.ajaxCall( () => JsRaw("""$('#ticketDiv').show()""")).cmd)._2 
}

  def render = "*" #> {

     "#PGOK [onClick]" #> SHtml.onEvent(testFunction)

   }
 } 
```

在这里，如果我只给出第一个显示代码 ( `JsCmds.Run("jQuery('#ticketDiv').show()")`) 的 div，它就可以正常工作。但如果我给出第二行，那里什么也没有发生。并且在注释行中也尝试过，但这显示了一些错误（`overloaded method value ajaxCall with alternatives: (jsCalcValue: net.liftweb.http.js.JsExp,jsContext: net.liftweb.http.JsContext,func: String => net.liftweb.http.js.JsCmd)net.liftweb.http.GUIDJsExp <and> (jsCalcValue: net.liftweb.http.js.JsExp,func: String => net.liftweb.http.js.JsCmd)net.liftweb.http.GUIDJsExp cannot be applied to (() => net.liftweb.http.js.JE.JsRaw)`在 Eclipse 中）。谁能给个答案。。

谢谢……！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:53:44.560

您忘记链接两个呼叫。您的函数仅将第二行作为 jsCmd 返回。尝试以下操作：

```
def testFunction(s: String): JsCmd = {                  
    JsCmds.Run("jQuery('#ticketDiv').show()") &
    JsCmds.Run("jquery('#sampleDiv').hide()")
} 
```

注意：如此[处](http://liftweb.net/api/25-M4/api/scala/#net.liftweb.http.js.JsCmds%24)所述，您还可以使用内置命令进行隐藏/显示：

```
def testFunction(s: String): JsCmd = {
    JsCmds.JsShowId("ticketDiv") &
    JsCmds.JsHideId("sampleDiv")
} 
```

# c# - .net 4.5 中的事件引发和阅读介绍

> ID：16162745
> 
> 赞同：2
> 
> 时间：2013-04-23T06:49:18.483
> 
> 标签：c#, .net, multithreading, events

我有与这篇 MSDN 杂志[文章](http://msdn.microsoft.com/en-us/magazine/jj883956.aspx)相关的问题。

> 阅读简介 正如我刚刚解释的那样，编译器有时会将多个阅读融合为一个。编译器还可以将单个读取拆分为多个读取。在 .NET Framework 4.5 中，读取引入远不如读取消除常见，并且仅在非常罕见的特定情况下发生。但是，它有时确实会发生。

```
public class ReadIntro {
  private Object _obj = new Object();
  void PrintObj() {
    Object obj = _obj;
    if (obj != null) {
      Console.WriteLine(obj.ToString());
    // May throw a NullReferenceException
    }
  }
  void Uninitialize() {
    _obj = null;
  }
} 
```

> 如果您检查 PrintObj 方法，看起来 obj 值在 obj.ToString 表达式中永远不会为空。但是，这行代码实际上可能会抛出 NullReferenceException。CLR JIT 可能编译 PrintObj 方法，就好像它是这样编写的：

```
void PrintObj() {
  if (_obj != null) {
    Console.WriteLine(_obj.ToString());
  }
} 
```

但这不是一种处理事件的模式吗？！

```
void RaiseEvent()
{
    var myEvent = MyEvent;
    if (myEvent != null)
    {
         myEvent(this, EventArgs.Empty);
    }
} 
```

我在这里错过了一些重要的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T10:26:49.093

这篇文章也让我感到困惑，我做了一些研究。我发现了两种思想流派。

## 1.有人说模式是安全的

因为 CLR 2.0 内存模型比 1.x 更严格并且禁止它。

> “不能引入读写”，MSDN 杂志（10 月 5 日），文章*了解 Low-Lock 技术在多线程应用程序中的影响*。
> 
> “.NET 内存模型禁止 [阅读介绍] 用于引用 GC 堆内存的普通变量”，Joe Duffy，《*Windows 上的并发编程*》一书，pp517-8。

[注意：Joe Duffy 基本上说了同样的话，但留下了在堆栈上阅读介绍的可能性，这不是共享的，因此是安全的]

我觉得那些“.NET 2.0 内存模型”的解释很奇怪。我已经阅读了 2012 ECMA CLI 规范以及 C# 标准，发现没有提及禁止阅读介绍的声明。他们不太可能削弱 2.0 和 4 之间的内存模型。（？？）

另一方面，我相信 JIT 团队知道这些模式并且不会破坏它们，至少在 x86 上......但是说这与说它在标准中是不同的。团队决定可能会在未来或在其他平台上发生变化。

**编辑**不要错过下面 Eric Lippert 的评论：“没有阅读介绍”是*Microsoft* CLI 实施的承诺。在 ECMA 标准中没有任何关于它的内容，当使用其他实现（例如 Mono）时，所有的赌注都没有了。**结束编辑**

## 2\. 有人说不安全

具体来说：Igor Ostrovsky 在您引用的文章中，以及 Stephen Toub 在此博客文章评论中的讨论：http: [//blogs.msdn.com/b/pfxteam/archive/2013/01/13/合作暂停异步方法.aspx](http://blogs.msdn.com/b/pfxteam/archive/2013/01/13/cooperatively-pausing-async-methods.aspx)。

基本上，他们说读取介绍或消除是一种常见的编译器优化，如果 C# 和 JIT 不改变单线程行为，它们都可以这样做。

[注意：Eric Lippert 说 C# 编译器目前没有进行此类优化。]

请注意，Igor 似乎意识到 JIT 相当保守，并在文章中明确指出您的示例代码不会**在 x86-x64 上的 .NET 4.5 中**中断。另一方面，他说它可能会在其他情况下中断，而没有精确说明它是更复杂的代码模式、未来或过去的 .net 版本还是其他平台。

## 解决方案

如果您想 100% 安全，解决方案是使用易失性读取。易失性读取和写入被 C# 标准定义为副作用，因此它们不能被引入或删除。

ECMA CLI 标准有一个类似的关于不删除易失性读写的明确声明。

## 关于线程安全事件的说明

正如许多人所指出的，线程安全不仅仅是事件引发代码。您的事件处理程序应该可以*在取消订阅后被*调用。

我同意 Hans Passant 的观点，最好的指导是“不要这样做”，但有时你需要这样做。在这些情况下，只需确保您的事件处理程序代码也是线程安全的。在这些情况下，您可能还需要考虑一种更简单的基于锁的同步方法。

# android - 如何多次创建快捷方式？

> ID：16162746
> 
> 赞同：1
> 
> 时间：2013-04-23T06:49:33.263
> 
> 标签：android, shortcut, homescreen

我已经编写了以下代码来在主屏幕中创建我的应用程序的快捷方式：

```
private void createShortcut() {

        Intent shortcutIntent = new Intent(this, ActActivation.class);
        shortcutIntent.setClassName("org.mabna.order",
                "org.mabna.order.ui.ActActivation");
        shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        Intent addIntent = new Intent();
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "test");
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
                Intent.ShortcutIconResource.fromContext(this, R.drawable.icon));
        addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
        this.sendBroadcast(addIntent);

    } 
```

它工作正常，但每次我运行我的程序并运行此代码时，我都会收到“快捷方式测试已创建”的消息，并且我的主屏幕上会添加一个新的快捷方式。打开我的应用程序 10 次后，我有 10 个快捷方式。

如何防止此消息框并创建多个快捷方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:07:28.237

创建`SharedPrefernce`并添加此行，您不需要任何其他卸载权限

```
addIntent.putExtra("duplicate", false); 
```

**更改后的代码**

```
 Intent shortcutIntent = new Intent(this, ActActivation.class);
    shortcutIntent.setClassName("org.mabna.order",
            "org.mabna.order.ui.ActActivation");
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    Intent addIntent = new Intent();
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "test");
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
            Intent.ShortcutIconResource.fromContext(this, R.drawable.icon));
    addIntent.putExtra("duplicate", false); // Just create once
    addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    this.sendBroadcast(addIntent); 
```

这将在 HomeScreen 上仅创建单个图标，如果用户清除`Cache`这将阻止应用程序在主屏幕上创建另一个图标。

**编辑：**代码在运行良好的 android 4.2(JellyBean) 中进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T06:13:01.313

不幸的是，在防止重复方面没有 API 帮助。也没有用于查看主屏幕上的内容的 API（至少在没有破解启动器数据的情况下不会）。您可以做的最好的事情是跟踪您是否已经创建了快捷方式。共享偏好最容易做到这一点。请参阅[存储选项指南](http://developer.android.com/guide/topics/data/data-storage.html)。

无论如何，最好走这条路。如果您总是创建当前不存在的快捷方式，您将很快疏远任何手动删除您的快捷方式的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T14:27:23.720

最好的方法是使用`SharedPreferences`：

```
private static final String SHORTCUT = "SHORTCUT";
//...
if (!preferences.readBool(SHORTCUT, false)) {
    Intent shortcutIntent = new Intent(getApplicationContext(),
                    SomeActivity.class);

    shortcutIntent.setAction(Intent.ACTION_MAIN);

    Intent addIntent = new Intent();
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
                    Intent.ShortcutIconResource.fromContext(getApplicationContext(),
                            R.drawable.app_icon));
    addIntent.putExtra("duplicate", false);

    addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    getApplicationContext().sendBroadcast(addIntent);

    SharedPreferences.Editor edit = preferences.edit();
    edit.putBoolean(SHORTCUT, true);
    edit.apply();
} 
```

* * *

但是，如果用户清除 App Data 并再次启动 App，**则会创建副本**。

# http - 如何在 RestEasy 中处理 AsynchronousResponse 对象的超时

> ID：16162753
> 
> 赞同：2
> 
> 时间：2013-04-23T06:49:58.610
> 
> 标签：http, asynchronous, timeout, jboss7.x, resteasy

我正在 JBoss AS 7.1.2 上使用 RestEasy 实现 jax-rs 服务，我想使用异步 HTTP 处理，如下所述：http: [//docs.jboss.org/resteasy/docs/1.0.0.GA/userguide /html/Asynchronous_HTTP_Request_Processing.html](http://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html/Asynchronous_HTTP_Request_Processing.html)

对于 thr AsynchronousResponse，我定义了 10 秒的超时。当此期限到期时，请求以 200 OK 和空正文响应。我想修改此行为，因此我需要收到有关超时事件的通知。

在我的解决方案中，我想在 NotificationManager 对象中处理超时事件，该对象暂时保留 AsycnhronousResponse。详情请看下面的代码。

到目前为止，我无法弄清楚如何做到这一点。有人对 RestEasy 异步 HTTP 处理有更多经验吗？

```
 @POST
    @Path("/blabla")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public void subscribeLongPolling (
                    final @Suspend(10000) AsynchronousResponse response, 
                    JAXBElement<LongPollingRequestParameters> rqParam,
                    @Context HttpServletRequest req) throws Exception {

        //do some stuff with req

        Thread t = new Thread("ThreadSubscribeTo:" + channelID)
          {

             @Override
             public void run() {

                        //hand over to Notification Manager to return notifications in case some exist
                        try {

                            NotificationManager nm  =  new NotificationManager();                        
                            nm.setAsyncResponseObject(response);
                            logger.info("Response object registered in NotificationManager");

                        }catch (Exception e){
                            e.printStackTrace();
                        }
                 }
              };
              t.start();
        logger.info("Releasing Thread");
    }

public class NotificationManager {

        private AsynchronousResponse response;

        private NotificationList nList;

        public synchronized void setAsyncResponseObject(AsynchronousResponse response) {

            this.response = response;   

            if (nList.getAny().size() > 0) {
                logger.info("Stored notification send to web client: " + nList.getAny().get(0).toString());
                sendNotification(nList.getAny().remove(0));

            }

        }

        public synchronized void sendNotification(Object message){

            if (response != null){
                logger.info("Response object found. Send notification immediately: " + message.toString());
                Response responseObject = Response.ok(message, MediaType.APPLICATION_XML).build();
                response.setResponse(responseObject);
                response = null;

            }else{

                logger.info("Response object not found notification will be stored");
                addNotification(message);

            }
        }
    } 
```

提前致谢，

亚历克斯

# php - 执行不工作

> ID：16162765
> 
> 赞同：0
> 
> 时间：2013-04-23T06:51:03.753
> 
> 标签：php, magento, magmi

我正在尝试使用脚本自动化 magmi

```
<?php
class Trainingsatyendra_Feedback_IndexController extends Mage_Core_Controller_Front_Action
{
        public function indexAction()
        {

    exec('localhost/practice/magmi/web/magmi_run.php?mode=create&pr
    ofile=default&engine=magmi_productimportengine:Magmi_ProductImportEngine&CSV:f
    ilename=catalog_product_20130422_073721.csv',$result);
        var_dump($result);
         if($result)
        {
        echo "shell successfully executed";
        }
        else
        echo "shell Not executed";

        } 
    }

    ?> 
```

上面的代码写在我的控制器文件中。当我将以下代码复制并粘贴到浏览器 url 中时，它可以在浏览器上给我输出

```
localhost/practice/magmi/web/magmi_run.php?mode=create&pr
ofile=default&engine=magmi_productimportengine:Magmi_ProductImportEngine&CSV:f
ilename=catalog_product_20130422_073721.csv 
```

但是，如果我尝试在我的控制器中使用 exec 或 shell_exec ，它就不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T17:57:52.977

我也看到了相同的响应，但经过几次尝试后，最终将文件夹权限更改为 apache:apache 运行服务 apache 的用户并且它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:03:42.087

根据您必须使用的[文档](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Import_Url_UI)`wget`，即

```
exec('wget http://localhost/practice/magmi/web/magmi_run.php?mode=create&profile=default&engine=magmi_productimportengine:Magmi_ProductImportEngine&CSV:filename=catalog_product_20130422_073721.csv'); 
```

或使用适当的`cli command`，即

```
exec('magmi [cli_command']); 
```

或者甚至更好的是，您使用[cURL](http://www.php.net/manual/en/book.curl.php)通过 HTTP(S) 获取所需的任何内容。

# c# - C# 条件语句

> ID：16162770
> 
> 赞同：-3
> 
> 时间：2013-04-23T06:51:18.803
> 
> 标签：c#

你们能指出这段代码有什么问题吗？

我想要的是，如果有人回答为地球，让你是对的，如果不是，你就是错的。

```
Console.WriteLine("What planet do we live on");

string name = Console.ReadLine();

if (name =earth)
{
    Console.WriteLine("Yes, you're right");
}
else
{
    Console.WriteLine("You're wrong");
}
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:53:27.467

请注意`^`以下代码中的符号：

```
Console.WriteLine("What planet do we live on");

string name = Console.ReadLine();

Console.WriteLine(name == "earth" ? "Yes, you're right" : "You are wrong");
                       ^^ ^     ^
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:52:34.163

你的条件不正确。它应该是

```
if (name == "earth"){ } 
```

还应该引用这些值以避免编译器错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:53:40.670

```
if (name == "earh")
{
    Console.WriteLine("Yes, you're right");
}
else
{
    Console.WriteLine("You're wrong");
} 
```

你`=`改用`==`.

你应该比较`"earth"`( `String`) 而不是earh

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:55:18.833

`==`是*相等比较运算符*，而在 C# 中`=`是*赋值。*因此，您必须`==`像其他人指出的那样使用：

```
if(planet == earth) {
} 
```

Using`=`将分配`earth`给`planet`并返回，`earth`而不是*比较*和返回 a `bool`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T06:55:40.130

```
if (name == "earth")
{ 
} 
```

当您检查条件时，== 应该在 if 中。

如果有单个 = 那么它只是分配值。

# c# - C# - 使用库错误

> ID：16162776
> 
> 赞同：0
> 
> 时间：2013-04-23T06:51:33.820
> 
> 标签：c#, dll

我有一个`.dll`文件位于我的项目所在的另一个文件夹中。我将此库的引用添加到我的项目中，然后当我尝试使用（导入）它时，`using QRlib;`我得到以下信息：`The type or namespace name 'QRlib' could not be found(are you missing a using directive or an assembly reference?)`

我得到了库文件，所以不是我实现了它，但我必须使用它（我很确定它没有问题）。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:16:28.273

在 Visual Studio 的解决方案资源管理器窗口中，展开这样的节点

```
project node=>"reference" node 
```

双击您添加的 dll 名称。这将打开对象浏览器窗口，您将在其中找到所有命名空间、类和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:03:23.957

查看反编译器中的库（例如 dotPeek）并检查命名空间是什么。也许您使用了错误的命名空间？

# java - 具有唯一字段的新对象 - Hibernate

> ID：16162777
> 
> 赞同：0
> 
> 时间：2013-04-23T06:51:35.973
> 
> 标签：java, sql-server, hibernate, sql-server-2012

例如我有那个类：

```
@Entity
@Table(name = "example")
public class Example{
@Id
@GeneratedValue
private Long id;
@Column(name = "example_name", unique=true)
String name;

public Example(){}
//getters and setters
}

//Hibernate logic
Example ex = new Example();
ex.setName("something"); 
```

如果我想再次保存名称为“某物”的对象，则会出错。如何在保存会话之前检查该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:58:48.267

使用相同的会话 - 在保存示例之前，对该域对象进行调用`findByName`（实施逻辑以检查是否存在具有该名称的示例），如果它不存在，则保存否则抛出该名称已被使用的异常。

# c# - C# 自定义控件 - 类层次结构和标记

> ID：16162778
> 
> 赞同：0
> 
> 时间：2013-04-23T06:51:36.883
> 
> 标签：c#, asp.net, oop

我正在尝试从头开始创建自定义网格控件。所以我为它创建了类库项目并开始

```
public class ServerControl1 : WebControl
{
} 
```

现在，我在我的项目中添加了这个引用。所以在我的 aspx 页面中，它显示了类似

```
<cc1:ServerControl1 runat="server" id="grid1" /> 
```

现在我想定义这个网格的列，也想让它像 asp gridview 一样熟悉

```
<asp:GridView ....>
    <Columns>
          <TemplateFields>
 ..... 
```

现在要做这样的层次结构GridView >> Columns >> TemplateFields，我应该实现什么类结构？

我对 OOPS 不太感兴趣，因此我们将不胜感激。我不想在我的类中继承 GridView 控件，因为我不会使用它，而且我不知道它会给我的控件带来什么负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:29:21.333

使用已发布的答案检查此链接。[使用嵌套标签创建自定义控件，如 GridView >> Columns >> Paging](https://stackoverflow.com/questions/6535380/create-custom-control-with-nested-tag-like-gridview-columns-paging)

基本上你需要的**不是**自定义控件，而是一个应该实现CompositeControl 的**复合控件****，IScriptControl**如果你需要 AJAX 支持，IScriptcontrol 是可选的。

然后您的所有属性都可以在标记中分配值。这是一个 MSDN 链接，也可以创建一个。

[http://msdn.microsoft.com/en-us/library/12yydcke.aspx](http://msdn.microsoft.com/en-us/library/12yydcke.aspx)

您还必须了解如何在 CompositeControl 中重写**CreateChildControls**方法以及如何创建您的控件 Hirearchy。

坦率地说，实际上有一点学习要做。

# php - 在发送通知邮件之前验证 php 注册

> ID：16162780
> 
> 赞同：0
> 
> 时间：2013-04-23T06:51:51.597
> 
> 标签：php, email

我正在构建一个 PHP 注册系统。如果有新用户注册到我的网站，它将向我发送一封通知电子邮件。但问题是，如果用户不输入任何内容，它也会向我发送电子邮件。我该如何克服这个问题？

这是验证部分。

```
 /*Validation Begins*/
if(empty($_POST) === false) {
        $required_fields = array('school_name', 'mailing_address', 'postcode', 'courier_address', 'courier_postcode', 'courier_postcode', 'phonenumber', 'faxnumber', 'email', 'website', 'principal_fullname', 'principal_phonenumber', 'principal_email');
        foreach($_POST as $key=>$value){
            if(empty($value) && in_array($key, $required_fields) === true){
                mysql_close();
                ?>
                <script type="text/javascript">
                alert("Fields marked with an asterisk are required");
                history.back();
                </script>
                <?php
            }
    } 
```

下面是插入函数和邮件函数。

```
function register_school($register_data){
$fields = '`' . implode('`, `', array_keys($register_data)) . '`';
$data = '\'' . implode('\', \'', $register_data) . '\'';

mysql_query("INSERT INTO `schools_info` ($fields) VALUES ($data)");

    ?>
    <script type='text/javascript'>
    alert("Registration Successful!"); window.location.href = '/registration-success/';
    </script>
    <?php
    $schoolname = $_POST['school_name'];
    $mailing_address  = $_POST['mailing_address'];
    $postcode = $_POST['postcode'];
    $courier_address = $_POST['courier_address'];
    $phonenumber = $_POST['courier_postcode'];
    $faxnumber = $_POST['faxnumber'];
    $email = $_POST['email'];
    $website = $_POST['website'];
    $principal_fullname = $_POST['principal_fullname'];
    $principal_phonenumber = $_POST['principal_phonenumber'];
    $principal_email = $_POST['principal_email'];

    $to = "example@hotmail.com";
    $subject = "New Registered School";
    $message = "School Name: $schoolname\r\nSchool Address: $mailing_address\r\nPostcode: $postcode\r\nCourier Address: $courier_address\r\nCourier Postcode: $courier_postcode\r\nPhone Number: $phonenumber\r\nFax Number: $faxnumber\r\nEmail: $email\r\nWebsite: $website\r\nPrincipal Name: $principal_fullname\r\nPrincipal Phone Number: $principal_phonenumber\r\nPrincipal Email: $principal_email";
    $from = "testing.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);

} 
```

注册学校

```
if(empty($_POST) === false){
$register_data = array(
    'school_name'           => $_POST['school_name'],
    'mailing_address'       => $_POST['mailing_address'],
    'postcode'              => $_POST['postcode'],
    'courier_address'       => $_POST['courier_address'],
    'courier_postcode'      => $_POST['courier_postcode'],
    'phonenumber'           => $_POST['phonenumber'],
    'faxnumber'             => $_POST['faxnumber'],
    'email'                 => $_POST['email'],
    'website'               => $_POST['website'],
    'principal_fullname'    => $_POST['principal_fullname'],
    'principal_phonenumber' => $_POST['principal_phonenumber'],
    'principal_email'       => $_POST['principal_email'],
    'CScoor'                => $_POST['CScoor'],
    'CS_email'              => $_POST['CS_email'],
    'CS_phone'              => $_POST['CS_phone'],
    'Engcoor'               => $_POST['Engcoor'],
    'Eng_email'             => $_POST['Eng_email'],
    'Eng_phone'             => $_POST['Eng_phone'],
    'Mcoor'                 => $_POST['Mcoor'],
    'M_email'               => $_POST['M_email'],
    'M_phone'               => $_POST['M_phone'],
    'Sccoor'                => $_POST['Sccoor'],
    'Sc_email'              => $_POST['Sc_email'],
    'Sc_phone'              => $_POST['Sc_phone']

);
register_school($register_data);

mysql_close(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:01:40.497

```
 if(empty($_POST) === false) {
            $required_fields = array('school_name', 'mailing_address', 'postcode', 'courier_address', 'courier_postcode', 'courier_postcode', 'phonenumber', 'faxnumber', 'email', 'website', 'principal_fullname', 'principal_phonenumber', 'principal_email');
            $flag = TRUE;
            foreach($_POST as $key=>$value){
                if(empty($value) && in_array($key, $required_fields) === true){
                    mysql_close();
                    $flag = FALSE;
                    ?>
                    <script type="text/javascript">
                    alert("Fields marked with an asterisk are required");
                    history.back();
                    </script>
                    <?php
                } // end second if
        } //end foreach
       if ($flag == TRUE){
         $register_data = array(.....); //all $_POST value assign here
         register_school($register_data);}
} //end first if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:37:12.727

部分前：

```
 $to = "example@hotmail.com";
    $subject = "New Registered School";
    $message = "School Name: $schoolname\r\nSchool Address: $mailing_address\r\nPostcode: $postcode\r\nCourier Address: $courier_address\r\nCourier Postcode: $courier_postcode\r\nPhone Number: $phonenumber\r\nFax Number: $faxnumber\r\nEmail: $email\r\nWebsite: $website\r\nPrincipal Name: $principal_fullname\r\nPrincipal Phone Number: $principal_phonenumber\r\nPrincipal Email: $principal_email";
    $from = "testing.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers); 
```

开始。检查每个变量是否为空：

// 编辑：抱歉没有看到你有一个关于值的数组。然后你可以把它变成这样：

```
$success = true;
foreach($register_data as $data) {
    if (empty($_POST[$data])) {
       $success = false;
        break;
    }
}

if ($success == true) {
    //then mail
} 
```

# jquery - Jquery DataTable UI 问题——何时调用 fnAdjustColumnSizing

> ID：16162782
> 
> 赞同：2
> 
> 时间：2013-04-23T06:51:54.040
> 
> 标签：jquery, datatables, jquery-datatables

目前正在研究 Jquery DataTable

类似这个问题[Jquery DataTable Horizo​​ntol Scroll](https://stackoverflow.com/questions/16084697/jquery-datatable-horizontol-scroll?noredirect=1#comment23075633_16084697)

我如何设法使用 fnAdjustColumnSizing() 更接近解决方案

我的 UI 搞砸了，因为我在页面加载时隐藏了 DataTable。

然后我发现你需要`fnAdjustColumnSizing`在 Datatable.net 链接中调用 resize

```
 $(window).on('resize', function () {
        oTable.fnAdjustColumnSizing();
    }); 
```

但现在我的问题是 UI 仅在我调整窗口大小而不是在页面加载时或在加载 DataTable 之后才修复

修复列大小或调用 resize 的替代方法是什么？

谢谢

# javascript - 从 Jar 存档中将 JavaScript 作为静态资源返回

> ID：16162787
> 
> 赞同：4
> 
> 时间：2013-04-23T06:52:04.290
> 
> 标签：javascript, spring-mvc, webresource

有没有办法返回位于 .jar 档案中的 JavaScript？目前我有以下结构：

```
webapp
   resources
        scripts
           SomeJavaScript.js
           ... 
```

此类 .js 文件的列表非常大。还有一个包含所有此类文件的 .jar 文件。

在 Spring 配置文件中，我有：

```
 <mvc:resources mapping="/resources/**" location="/resources/"/> 
```

通过我的调度程序 servlet 处理所有静态资源。但是，我希望它从 .jar 存档中读取 JavaScript 文件。最简单的方法是什么？

我认为为此目的编写自己的控制器并不是最好的选择。

PS：我找到了[以下解决方案](https://stackoverflow.com/questions/4732965/exposing-resources-from-jar-files-in-web-applications-tomcat7)：

我正在使用嵌入式 Tomcat 7，使用 Maven 插件启动它。这里[提到](https://blogs.oracle.com/alexismp/entry/web_inf_lib_jar_meta)资源文件需要在下面，`WEB-INF/lib/{\*.jar}/META-INF/resources`但往里看`spring-js-resources.jar`，实际位置是`WEB-INF/lib/{\*.jar}/META-INF/web-resources`. 生成的页面包含如下链接：

```
<script type="text/javascript" src="/SomeProjectName/dojo/dojo.js"></script> 
```

而且这个文件不可用。我能做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:16:14.480

您可以使用该标记通过向属性添加路径`mvc:resources`来公开类路径上的 .jar 文件的内容。`classpath:``locations`

我相信你的情况会是这样的

```
 <mvc:resources mapping="/resources/**" location="/resources/, classpath:/META-INF/web-resources/"/> 
```

[Spring MVC 文档](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-static-resources)中的更多信息。

# ios - iOS - 查看高分辨率图像

> ID：16162790
> 
> 赞同：0
> 
> 时间：2013-04-23T06:52:10.253
> 
> 标签：ios, memory, memory-management, uiimageview, uiimage

我想在 imageview 中显示高分辨率图像。这就是我所做的

1.  在后台准备 UIImage
2.  文件加载完毕，切换到主线程
3.  显示图像 [ 使用 UIImageView 的 setImage: ]

问题是第三步有滞后。它需要几秒钟并加载文件。如果它的图像很大，我会收到内存警告和崩溃。**那么有没有一种方法可以让我从上到下绘制图像**（就像浏览器一样）？我还需要保持图像的质量。

有没有办法可以实现我的要求。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:57:58.243

`UIImage`在实际请求之前不会解码其底层图像数据，当您将其分配给图像视图时，这将在主线程上发生。因此，尽管您尝试在后台线程中加载图像，但工作被延迟并且实际上发生在主线程上。

这个问题的变通方法非常棘手，通常涉及将图像写入新的图形上下文以强制解码，然后从中创建一个`CGImageRef`或`UIImage`。这一切都发生在后台线程上。当您将新图像发送到主线程时，所有解码都已经发生，您应该不会看到延迟。[这个问题有一些答案可以证明这种技术。](https://stackoverflow.com/questions/5266272/non-lazy-image-loading-in-ios)

使用 Apple 提供的标准 API（据我所知）无法从上到下绘制图像。您必须编写自己的流式图像解码器，这将是一项艰巨的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:01:28.960

> 如果它的图像很大，我会收到内存警告和崩溃。

似乎您正在尝试一次将图像加载并显示到内存中的设备的某些“硬”（内存相关）限制。

> 那么有没有一种方法可以让我从上到下绘制图像（就像浏览器一样）？

您应该尝试使用 CATiledLayer，它提供了一种绘制非常大的图像而不会导致内存命中的方法。

[在这里](http://www.cimgf.com/2011/03/01/subduing-catiledlayer/)您可以找到有关它的教程。

您还可以查看[PhotoScrollerNetwork](https://github.com/dhoerl/PhotoScrollerNetwork)项目：

> *   极快的平铺渲染 - 视觉上比 Apple 的代码快得多（在文件系统中使用 png 文件）
>     
>     
> *   您提供单个 jpeg 文件或 URL，此代码为您完成所有平铺，快速而轻松

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:58:57.160

您可以使用**SDWebImage**框架来帮助您：

1.异步图片下载器

2.自动图像缓存。

3.避免重复。

您可以从以下网址下载：[https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

关于内存警告，这不仅是由于您的应用程序，还因为在后台运行的所有应用程序有效地使用了内存，因此请尝试停止后台运行的应用程序。

# java - 使用袖珍 Sphinix 进行语音识别的准确性很差

> ID：16162794
> 
> 赞同：2
> 
> 时间：2013-04-23T06:52:18.303
> 
> 标签：java, android, speech-recognition, speech-to-text, cmusphinx

我已经从[http://ucla.jamesyxu.com/?p=118](http://ucla.jamesyxu.com/?p=118.But)运行了 pocketsphinix 演示示例。但是，我发现单词识别的准确性很差。我从 pocketsphinix8.0 ...\pocketsphinx\ 复制了声学模型model\hmm 和 ..\lm 文件夹到手机的 sdcard。它识别有限的几个单词而不是句子。我的问题如下

1）如何提高准确性？

2）如果是，是否需要更改声学模型和字典（在 hmm 和 lm 文件夹中），而不是如何更改模型和字典。是否需要遵循任何其他程序来添加模型和字典。我还从以下链接更改字典（美国英语 HUB4 语言模型 - 只需复制 lm 文件夹中的字典文件不会在 hmm 文件夹中更改）

[http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/](http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/)

3）我怎样才能将音频文件作为输入而不是录制的语音？

另外，我尝试将音频文件转换为输入。我正在阅读如下音频文件（此处，sphinix4 lib 转录演示文件“10001-90210-01803.wav”中使用的 .wav 文件为准确发音数字但无法识别单个单词并将其转换为不正确的文本）。

```
 int readAudioFile(){           
        this.done=true;
        AssetManager mngr = context.getAssets();            
        InputStream io = null;
        int current = 0;
        try {

          io= mngr.open("10001-90210-01803.wav");   

    //Create a DataInputStream to read the audio data from the saved file
            DataInputStream         dis = new DataInputStream(io);   
            int noOfByteToRead=io.available();
            int noOfShortToRead=noOfByteToRead/2;
            short[] music = new short[noOfShortToRead];
            int i = 0;                                                          //  Read the file into the "music" array
            try {
                while (dis.available() > 0)
                {
                    music[i] = dis.readShort();                     

                    i++;
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.i("123",""+Arrays.toString(music));
            this.q.add(music);
            try {
                dis.close();
            } catch (IOException e) {
                e.printStackTrace();
            }        

        } catch (IOException e) {           
            e.printStackTrace();
        } catch (Exception e1) {
            e1.printStackTrace();
        }               

        return current;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:10:46.193

1）。你得到了什么样的准确度？首先，您看到的单词错误百分比是多少，其次，您能给我们一些您所说的示例单词和给出的输出吗？正如 Praful 所说，声音文件抄本将非常有用。

此外，您是否尝试过运行默认应用程序并查看与它交谈是否会产生类似的不良结果？

2）。您可以按照以下步骤构建自己的字典：[http ://ucla.jamesyxu.com/?p=121](http://ucla.jamesyxu.com/?p=121)

我也有一些使用图书馆的笔记（我们使用它进行了几项研究，每个研究约 20 名受试者）：

*   根据经验，默认字典和库在识别单词和句子方面做得很好。带着美国口音，我们通常观察到“我正在上楼”这样的简单句子应该不会产生错误，而更复杂的句子可能会产生一些单词错误。
*   您通常**不能**期望名称或缩写是正确的
*   如果您的应用程序只查找某些短语，那么我建议仅基于这些短语构建字典和模型。这是因为您拥有的分类器被迫在其中一个短语中做出决定的短语越少，从而为您的用例提供更高的准确性。
*   对于涉及许多关键字的长句子，请考虑对您期望的句子进行距离计算并选择最接近的句子。
*   口音很重要

*我收到通知是因为 google 提醒我您的链接与我的域名匹配*

# c++ - 编写 MPI 程序：在具有两个进程的数组中求和

> ID：16162796
> 
> 赞同：-4
> 
> 时间：2013-04-23T06:52:22.743
> 
> 标签：c++, c, mpi

我想用 mpi.h 写一个程序 这个程序做 对数组中的数字求和

例如我有一个数组 a[10] 这个数字 1 2 3 4 5 6 7 8 9 10 我想要 sum=1+2+3+4+5+6+7+8+9+10= 55

这应该与处理？

怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:27:09.797

```
MPI_init(&argc,&argv);

int size;
int myrank;
int sum=0;
int chunksize =10/2; //This is arraysize divided by total number of processes
MPI_Comm_rank(MPI_Comm_world,&myrank);
MPI_Comm_size(MPI_Comm_world,&size)

int lower=myrank*chunksize;
int upper=lower+chunksize;
for(int i=lower;i<upper;i++)
{
sum=sum+a[lower];

}
if(myrank==0)
{
MPI_Send(....,sum,1) // see the exact syntax of this routine.I am doing is process 0 is sending its sum to process 1
}
else
{
MPI_recv(....,recvsum,0,..)

sum=sum+recvsum;
printf("The sum is %d",sum);
}

set the np parameter to 2 while compiling 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:16:33.423

阅读[这个](http://users.abo.fi/mats/PP2012/examples/MPI/send-standard.c)关于使用 MPI 发送和接收的示例。

```
int wpp = n/np;
for(i=wpp * me; i < wpp * (me+1); ++i){
   partialSum += a[i];
} 
```

让我==1 与我==0 一起发送到进程。

# android - Android 屏幕在方向更改时变为空白；onConfigurationChanged 被调用

> ID：16162798
> 
> 赞同：1
> 
> 时间：2013-04-23T06:52:25.557
> 
> 标签：android, android-activity

当我的活动（具有两个选项卡的选项卡活动）方向发生更改时，选项卡的内容，这是另一个具有项目列表视图（带复选框）的活动，变为空白。我`android:configChanges="screenSize|orientation"`在清单文件中使用过，因此我不希望在方向更改时清除（或重新创建）复选框。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:15:43.080

为了在 Android 中保存 View 的状态，您需要实现`onSaveInstanceState(Bundle outState)`和`onRestoreInstanceState(Bundle savedInstanceState)`方法。有关这些方法的更多信息，请参阅[Android 开发人员指南](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)。

`onSaveInstanceState(Bundle outState)`当活动因配置更改（方向更改）而被破坏时调用。您可以在此方法中将数据添加到包中，然后在活动重新启动时使用`onRestoreInstanceState(Bundle savedInstanceState)`.

例如：

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    // Read values from the "savedInstanceState" bundle and put them back into the corresponding textviews
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    // Save the values you need from your textviews into the outState object
} 
```

有关如何将数据保存到包中的更多详细信息，请参阅[Android 开发人员指南](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)。`onCreate(Bundle savedInstanceState)`这也解释了使用和恢复状态之间的区别`onRestoreInstanceState(Bundle savedInstanceState)`。

# database - JTable 中的 NullPointer 异常

> ID：16162800
> 
> 赞同：0
> 
> 时间：2013-04-23T06:52:30.450
> 
> 标签：database, nullpointerexception

我正在处理表格。在这种形式中，我使用名称从数据库中获取记录。我从其他类（即框架）中定义的文本字段收集数据。我将此字符串传递给 searchData 函数以从数据库中获取它。但是当我运行程序时，它给了我 NullPoingerException for columnNames[ ] 一个为 JTable 定义的字符串数组。类 panelShowData 的代码如下：

```
 package addPanel;

import java.sql.*;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class panelShowData extends JPanel
{

    Connection connection = null;
    Statement statement = null;
    ResultSet resultSet = null;

    String url = "jdbc:mysql://localhost:3306/records";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "";

    JScrollPane scrollPane;
    JTable table;
    DefaultTableModel tableModel;

    String nameSearch="";

    public panelShowData()
    {

         this.setLayout(null);
         setVisible(true);
         setBounds(0, 200, 500, 450);
    }

    public void searchData( String nameSearch)
    {

            try 
            {           
                Class.forName( driver ).newInstance(  );
                connection = DriverManager.getConnection( url, userName, password );

                statement = connection.createStatement( ResultSet.TYPE_SCROLL_SENSITIVE,
                                ResultSet.CONCUR_UPDATABLE );

                           resultSet = statement.executeQuery( "select * from registration where firstname ='"
                                + nameSearch
                                + "'or lastname ='"
                                + nameSearch + "'" );

                System.out.println( "Query executed" );
                System.out.println( "nameSearch="+nameSearch );

                String firstName;
                String lastName;
                int counter = 0;
                int id;

                JButton add=new JButton("ADD");

                    while ( resultSet.next(  ) )
                                    {                           
                        System.out.print( resultSet.getString( 2 ) + "\t" );
                        System.out.print( resultSet.getString( 4 ) + "\n" );

                        firstName = resultSet.getString( 2 );
                        lastName = resultSet.getString( 4 );
                        id = resultSet.getInt(1);

                        String[ ] columnName = { "Id","First Name", "Last Name","click" };
                        Object[ ] data = { id, ""+firstName, "" + lastName, add };

                        tableModel.setColumnIdentifiers( columnName );
                        tableModel.addRow( data );
                        tableModel.fireTableDataChanged();

                        counter++;
                    }

                table = new JTable( tableModel );
                table.setEnabled(false);
                scrollPane = new JScrollPane( table );
                scrollPane.setBounds( 10, 10, 350, 100 );
                scrollPane.revalidate();

                add( scrollPane );
                connection.close(  );   
            }
            catch (Exception e)
            {
                e.printStackTrace();
                JOptionPane.showMessageDialog(  null, "Record Not Found",
                                "Sorry", JOptionPane.ERROR_MESSAGE );
            }
    }
} 
```

调用方法是：

```
if ( ae.getSource( ) == buttonSearch )
    {

        addform.setEnabled( false );
        addform.setVisible( false );

        remove( addform );

        showData.revalidate( );
        showData.repaint( );
        add( showData );

        String stringNameSearch="";

        stringNameSearch = nameSearch.getText( );
        System.out.println( "Name is"+stringNameSearch );
        showData.searchData( stringNameSearch );            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:55:39.440

您没有初始化 field `tableModel`。因此这条线

```
tableModel.setColumnIdentifiers( columnName ); 
```

触发一个`NullPointerException`.

# java - 用Java制作客户端-服务器应用程序的试用版

> ID：16162802
> 
> 赞同：0
> 
> 时间：2013-04-23T06:52:32.430
> 
> 标签：java, spring, swing, rmi, trial

我需要知道如何制作使用 Spring RMI（服务器端）和 Java Swing（客户端）实现的客户端-服务器应用程序的试用版（例如 30 天试用版）。我正在考虑通过检查当前日期与首次登录日期来在客户端执行此操作。但它可能很容易被破解。以可靠的方式执行此操作的最佳选择是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:56:56.397

如果您有客户端配置，请添加几个带有客户端首次启动日期的新密钥。人们通常不会查看应用程序配置的到期日期。

并且，选择与许可无关的密钥，并尽可能加密您的值。

如果一个密钥被篡改，您可以使用另一个密钥检查它是否被篡改并阻止访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:59:48.553

更好更安全的解决方案是在服务器端实现它。

您可以在第一次运行时向客户端发出令牌请求，并跟踪服务器上的令牌。不过，这有一个缺点，即如果有人删除或重新安装，您永远不会知道。

您还可以发送带有一些识别特征的令牌请求，例如 MAC 地址。这样您就可以知道客户端是否正在发出重复请求。

更好的是，而不是令牌，跟踪 MAC 地址。

# jboss7.x - 如何在 Eclipse Juno 中安装 JBoss AS 7

> ID：16162805
> 
> 赞同：1
> 
> 时间：2013-04-23T06:52:41.183
> 
> 标签：jboss7.x, eclipse-juno

我正在使用 Eclipse Juno，我的应用程序在 JBoss 6 上运行。现在我们正在从 JBoss 6 迁移到 JBoss AS 7。我无法配置 JBoss 7，当我添加下载附加服务器适配器时，没有一个适配器是在向导中显示。我还尝试通过 Help->Install New Software 手动尝试并使用此链接 [http://download.jboss.org/jbosstools/updates/nightly/core/trunk/](http://download.jboss.org/jbosstools/updates/nightly/core/trunk/)但它说找不到一些 context.xml。

有什么办法，我可以将 JBoss 7 与 eclipse juno 版本一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:48:06.353

我已经添加`-Djava.net.preferIPv4Stack=true`到 eclipse.ini 中，它解决了这个问题。可能与某些代理设置有关。

# html - html5中的音频和视频记录器使用getusermedia()

> ID：16162806
> 
> 赞同：2
> 
> 时间：2013-04-23T06:52:41.590
> 
> 标签：html

我正在创建一个应用程序来录制音频和视频，但它只能在 Google chrome 或 canary 中工作。我想在 Internet Explorer 和 Mozilla Firefox 下工作。这是我的代码。我们可以在不使用获取用户媒体的情况下做到这一点吗？如果可以，请告诉我。

请参考此链接 [http://davidwalsh.name/demo/camera.php](http://davidwalsh.name/demo/camera.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T04:59:08.760

MediaStreamRecorder 是一个用于记录 getUserMedia() 流的 WebRTC API。它允许 Web 应用程序从实时音频/视频会话创建文件。

MediaStreamRecorder 当前未实现。您应该等待在所有浏览器中实现它。

```
 <video autoplay></video>

    <script language="javascript" type="text/javascript">
    function onVideoFail(e) {
        console.log('webcam fail!', e);
      };

    function hasGetUserMedia() {
      // Note: Opera is unprefixed.
      return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia || navigator.msGetUserMedia);
    }

    if (hasGetUserMedia()) {
      // Good to go!
    } else {
      alert('getUserMedia() is not supported in your browser');
    }

    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia  = navigator.getUserMedia || 
                             navigator.webkitGetUserMedia ||
                              navigator.mozGetUserMedia || 
                               navigator.msGetUserMedia;

    var video = document.querySelector('video');
    var streamRecorder;
    var webcamstream;

    if (navigator.getUserMedia) {
      navigator.getUserMedia({audio: true, video: true}, function(stream) {
        video.src = window.URL.createObjectURL(stream);
        webcamstream = stream;
    //  streamrecorder = webcamstream.record();
      }, onVideoFail);
    } else {
        alert ('failed');
    }

    function startRecording() {
        streamRecorder = webcamstream.record();
        setTimeout(stopRecording, 10000);
    }
    function stopRecording() {
        streamRecorder.getRecordedData(postVideoToServer);
    }
    function postVideoToServer(videoblob) {

        var data = {};
        data.video = videoblob;
        data.metadata = 'test metadata';
        data.action = "upload_video";
        jQuery.post("http://www.kongaraju.in/uploadvideo.php", data, onUploadSuccess);
    }
    function onUploadSuccess() {
        alert ('video uploaded');
    }

    </script>

    <div id="webcamcontrols">
        <button class="recordbutton" onclick="startRecording();">RECORD</button>
    </div> 
```

[http://www.w3.org/TR/mediastream-recording/](http://www.w3.org/TR/mediastream-recording/)

# r - 将近似结果保存在 R 之外

> ID：16162820
> 
> 赞同：0
> 
> 时间：2013-04-23T06:53:29.607
> 
> 标签：r, save, workflow

我需要对后验分布进行非常耗时的近似。因此，我希望将参数的样本保存在 R 之外以供将来分析。

我的样本采用矩阵和向量的形式（其中每个元素都是一次模拟的结果）。有没有办法将这些矩阵和向量保存到文件中？

相关地，您能否评论一下这些耗时近似的有效工作流程？我发现自己反复高亮和运行长代码——肯定有更好的方法来加载、运行然后保存分析吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:38:43.830

Ahn 已经为您提供了您的第一个答案。

```
saveRDS(obj, "obj.rds")
obj <- readRDS("obj.rds") 
```

这些命令为 R 中的序列化提供了基础。

正如 Roland 提到的，您还可以以相同的方式保存和加载整个工作区：

```
save.image("my_workspace.RData")
load("my_workspace.RData") 
```

关于工作流程。我强烈建议您习惯于打包您在 R 中所做的所有事情。采取额外的步骤并打包您的工作会显着提高效率。

当您创建一个包骨架时，通常会存储数据`/extdata/data/obj.rds`，然后在包加载后通过以下方式访问：

```
obj <- readRDS(paste(path.package('package_name'),"/data/obj.rds"))
# R < 3.0.0 it's .path.package, not path.package 
```

通常，我将所有分析存储为函数。因此，只需运行该函数即可获得所需的结果。

例如：

```
#' My Analysis Function
#' 
#' This function does x, y, and z. 
#' 
#' @param obj The name of the object...
#' @export your_analysis_fun

your_analysis_fun <- function(obj="name") {
 obj <- readRDS(paste(path.package('package_name'),"/data/",obj,".rds"))
 # the things you usually copy paste go here
 # ...
 return(results)
} 
```

记录您的代码也很有帮助，我在上面提供了一个简短的示例（Roxygen2）。如果您使用 RStudio，只需将 Ctrl + Shift + B 组合在一起即可构建并重新加载您的包，然后在您进行更改时再次运行您的函数。他们在使软件包的工作流范式变得有价值方面做得很好。也推荐使用 git。

我不能足够强调记录您的代码的重要性。如果您没有尽职尽责地编写文档，一年后回到复杂的分析就像用棒球棒打自己的脸。更不用说试图从别人停下来的地方接起。

# authentication - Weblogic 应用程序服务器上的 Active Directory 身份验证，错误原因未知

> ID：16162822
> 
> 赞同：2
> 
> 时间：2013-04-23T06:53:40.367
> 
> 标签：authentication, active-directory, ldap, weblogic

我们在尝试使用有效凭据对用户进行身份验证时在我们的 Weblogic 应用程序服务器（在生产环境中）遇到了身份验证错误（这些凭据在应用程序中是硬编码的，并且该用户基本上用于访问技术资源，例如网页服务）。多年来，该用户的身份验证是一个自动过程，凭证是硬编码的，永远不会改变。

该错误以前从未发生过，并且仅发生了一段时间。

这是来自我们的应用程序服务器日志（Weblogic）的错误（真实用户名已替换为XXX）

```
<Got AuthenticationException error while authenticating [family\XXX] to Active Directory. 
<javax.naming.AuthenticationException: 
[LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903A9, 
comment: AcceptSecurityContext error, data 548, v1db1]> > 
```

错误代码**49**是指**无效凭据**错误。

[**查看 LDAP 错误代码列表**](https://wiki.servicenow.com/index.php?title=LDAP_Error_Codes)

但如前所述，用户和密码是有效的。

而且我找不到有关提及的 Active Directory 错误的任何信息（此处为**data 548**）

通常，当出现 Invalid credentials 异常时，是由于用户输入了错误的密码，并且 log trace 如下所示，并出现**52e**错误

代码**52e**是指**无效的凭据**

```
<Got AuthenticationException error while authenticating [family\XXX] to Active Directory. 
<javax.naming.AuthenticationException:
[LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903A9, 
comment: AcceptSecurityContext error, data 52e, v1db1]> > 
```

错误代码**52e**还指 Active Directory 错误代码列表中的无效凭据，但此错误很常见并且可以理解（用户提供的凭据错误）

我更关心错误代码**548**，它似乎从未在搜索引擎结果中记录甚至提及...

[**查看 Active Directory 错误代码列表**](http://weblogic-wonders.com/weblogic/2010/11/08/common-ldap-server-issues/)

顺便说一句，我们的内部技术支持在系统日志中没有发现任何此类问题的痕迹。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:00:44.497

错误代码**548**（**0x548**，或**1352**十六进制到十进制转换后）似乎是指以下**Windows**错误代码：

**错误 1352：ERROR_INVALID_SERVER_STATE**

安全帐户管理器 (SAM) 或本地安全授权 (LSA) 服务器处于错误状态以执行安全操作。

[**Windows 错误 1352 - 0x548 的文档**](http://www.pc-library.com/errors/error-code/1352-0x548/)

根据以下参考，这应该是问题的原因（错误代码和描述似乎与 Active Directory 和 LDAP 错误代码匹配）

[**Windows 错误列表**](http://www.pc-library.com/errors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:33:28.773

由于您似乎使用域\用户格式作为绑定 DN，我想知道 548 错误（这对我来说也是新的，如果您找到它，我很想知道它的含义）是否与 SASL 样式有关绑定意味着。

您能否尝试使用正确的 DN 格式进行绑定，看看是否会有所不同？

# javascript - 没有服务器端编码的文件操作

> ID：16162829
> 
> 赞同：1
> 
> 时间：2013-04-23T06:53:54.057
> 
> 标签：javascript, jquery, file, file-upload

是否可以仅通过客户端编程来操作文件？我正在创建一个文本编辑器，它需要一个上传的文件，并且需要在编辑后保存到另一个位置。客户端编码可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:00:47.757

是的，你描述的一切都是可能的。您需要的是：`FileReader`用于读取文件的 API 和用于保存具有特定名称的`download`属性。`a`该解决方案不会跨浏览器，但可以在现代浏览器中使用。

*   **编辑1：**您不能像对文件系统具有完全访问权限的语言那样进行操作（例如，您不能通过文件的路径打开文件）。用户需要在您的编辑器页面中拖动文本文件或选择带有`<input type="file" />`.
*   **编辑2：**保存文件也是如此。`download`您可以在属性中为用户提供具有指定文件名的链接。当用户点击此链接时，文件将保存在他的下载文件夹中。

# c++ - Valgrind 在 ATI 上运行 opengl 程序时报告了很多错误——我应该担心吗？

> ID：16162833
> 
> 赞同：5
> 
> 时间：2013-04-23T06:54:19.410
> 
> 标签：c++, linux, opengl, valgrind, ati

我有一个非常复杂的 OpenGL 应用程序在带有 ATI 图形芯片的嵌入式设备上运行，运行 RT linux。应用程序的部分通过单元测试进行测试。它们都通过了，并且没有报告内存泄漏或无效访问。但是，该应用程序有一些怪癖，有些事情表现不佳。

今天我尝试使用 valgrind 运行这个应用程序，在初始化期间我看到一些无效的内存读/写，所有这些都与 ATI 驱动程序有关：

```
==14347== Invalid read of size 8
==14347==    at 0x67C3868: ??? (in /usr/lib/catalyst/libGL.so.1.2)
==14347==  Address 0x8f6b398 is 208 bytes inside a block of size 212 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0x6762701: ??? (in /usr/lib/catalyst/libGL.so.1.2)
==14347==    by 0x8F6B05F: ???
==14347== 
==14347== Syscall param ioctl(generic) points to uninitialised byte(s)
==14347==    at 0x8A57B9: ioctl (in /lib/libc-2.14.1.so)
==14347==    by 0x6A0E345: ukiCreateContext (in /usr/lib/catalyst/libatiuki.so.1.0)
==14347==    by 0xA9D4570: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xbeceacb4 is on thread 1's stack
==14347== 
==14347== Conditional jump or move depends on uninitialised value(s)
==14347==    at 0xAA46C42: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0xAA46285: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0xAA46484: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0xAA36F32: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAA7B4: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2000 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid read of size 4
==14347==    at 0xAAAA95D: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77d2000 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA8F3: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2000 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA8F7: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2010 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA8FC: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2020 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA901: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2030 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA91A: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2040 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA91F: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2050 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA924: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2060 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAA929: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb77c2070 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC2D1: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163000 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC584: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163010 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC588: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163020 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0DD: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163550 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0E3: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163554 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0E9: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb7163558 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0EF: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb716355c is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0C5: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70e9300 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0CB: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70e9304 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0D1: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70e9308 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0D7: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70e930c is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC558: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb870b78 is 3,160 bytes inside a block of size 3,164 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA835931: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC418: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb897c68 is 3,160 bytes inside a block of size 3,164 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACAE9: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1600 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACAF3: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1610 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACAFD: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1620 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACB07: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1630 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACB11: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1640 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC88F: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1800 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC893: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1810 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8A2: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1820 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8A7: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1830 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8B6: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1840 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8BB: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1850 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8D0: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1860 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC8D5: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1870 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0AD: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1c00 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0B3: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1c04 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0B9: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1c08 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0BF: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1c0c is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC558: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x4F: ???
==14347==  Address 0x8aa8cb8 is 0 bytes after a block of size 80 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x3F: ???
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC09B: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1400 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0A1: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1404 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 4
==14347==    at 0xAAAC0A7: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1408 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACADF: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1000 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC418: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x63010100: ???
==14347==  Address 0x89c6d58 is 0 bytes after a block of size 224 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC508: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x63010100: ???
==14347==  Address 0xbe44b08 is 0 bytes after a block of size 384 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAACAD5: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1100 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC698: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xbefdb08 is 3,240 bytes inside a block of size 3,244 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Syscall param ioctl(generic) points to uninitialised byte(s)
==14347==    at 0x8A57B9: ioctl (in /lib/libc-2.14.1.so)
==14347==    by 0xA9DCE45: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x8A1AA8F: ???
==14347==  Address 0xbecf8984 is on thread 1's stack
==14347== 
==14347== Syscall param ioctl(generic) points to uninitialised byte(s)
==14347==    at 0x8A57B9: ioctl (in /lib/libc-2.14.1.so)
==14347==    by 0xA9DD354: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xbecf89f0 is on thread 1's stack
==14347== 
==14347== Invalid read of size 8
==14347==    at 0xAAAC558: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x63010100: ???
==14347==  Address 0xc7c1288 is 0 bytes after a block of size 3,568 alloc'd
==14347==    at 0x400AE44: malloc (vg_replace_malloc.c:270)
==14347==    by 0xA9A33CE: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==    by 0x63010100: ???
==14347== 
==14347== Invalid write of size 4
==14347==    at 0x9BDC84A: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb70c1a00 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Conditional jump or move depends on uninitialised value(s)
==14347==    at 0x938F092: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Conditional jump or move depends on uninitialised value(s)
==14347==    at 0x93B9F10: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC764: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb6ec2010 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC768: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb6ec2020 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Conditional jump or move depends on uninitialised value(s)
==14347==    at 0x9F83794: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC4E4: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb6ec2210 is not stack'd, malloc'd or (recently) free'd
==14347== 
==14347== Invalid write of size 8
==14347==    at 0xAAAC4E8: ??? (in /usr/lib/dri/fglrx_dri.so)
==14347==  Address 0xb6ec2220 is not stack'd, malloc'd or (recently) free'd
==14347== 
```

我很清楚这些读/写是未定义的行为，并且 ATI 在 linux 上享有不良驱动程序的声誉。

问题是，我应该担心这些错误吗？我知道 valgrind 有时会报告错误的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-24T12:04:48.643

Valgrind 可能会产生误报，尤其是在读取时。这通常发生在将结构复制为块内存时，例如使用 memcopy，因为填充字节。如果读取在分配的块内，这通常是可以的。从释放的内存中读取不是。

但是，无效写入通常是一个问题。

在这种情况下，因为这是一个驱动程序，我怀疑这些与直接内存访问/内存映射 I/O 有关，因此“未堆栈、malloc 或（最近）释放”等等好的。

# mysql - 基于行数的复合查询解决方案

> ID：16162837
> 
> 赞同：1
> 
> 时间：2013-04-23T06:54:35.913
> 
> 标签：mysql

我有三张桌子

td_idea

```
|------------|-------------|
| idea_id    | idea_name   |
|------------|-------------| 
```

然后 td_idea_comment

```
|-----------|------------|----------
|comm_id    | idea_id    | user_id  |
|-----------|------------|----------| 
```

和 td_idea_like

```
|-----------|------------|----------
|comm_id    | idea_id    | user_id  |
|-----------|------------|----------| 
```

现在我需要使用一个查询，该查询将根据编号以升序对想法进行排序。在 td_idea_like 和否的投票。对 td_idea_comment 的评论。

三个表的示例如下

td_idea

```
|------------|-------------|
| idea_id    | idea_name   |
|------------|-------------|
| 1          | Pink Ruby   |
|------------|-------------|
| 2          | Black_ruby  |
|------------|-------------| 
```

td_idea_comment

```
|------------|-------------|---------------|
| comm_id    | idea_id     | user_id       |
|------------|-------------|---------------|
| 1          |     1       |     1         |
|------------|-------------|---------------|
| 2          |     2       |     1         |
|------------|-------------|---------------|
| 3          |     1       |     2         |
|------------|-------------|---------------|
| 4          |     1       |     3         |
|------------|-------------|---------------| 
```

td_idea_like

```
|------------|-------------|---------------|
| like_id    | idea_id     | user_id       |
|------------|-------------|---------------|
| 1          |     1       |     1         |
|------------|-------------|---------------|
| 2          |     2       |     1         |
|------------|-------------|---------------|
| 3          |     1       |     2         |
|------------|-------------|---------------|
| 4          |     1       |     3         |
|------------|-------------|---------------| 
```

我使用了这个查询

```
SELECT * FROM td_idea,td_idea_comment,tyd_idea_like

WHERE td_idea.idea_id=td_idea_comment.idea_id
AND td_idea.idea_id=td_idea_like.idea_id

Order BY (SELECT COUNT(*) AS tot_comment FROM td_idea,td_idea_comment
WHERE td_idea.idea_id=td_idea_comment.idea_id),
(SELECT COUNT(*) AS tot_like FROM td_idea,td_idea_like
WHERE td_idea.idea_id=td_idea_like.idea_id) 
```

但在任何情况下，如果 td_idea_comment 中没有基于特定想法的行或 td_idea_like 中没有基于特定想法的行，它返回零。

说：

*   想法 id 1 有 3 个赞 3 条评论
*   想法 id 2 有 1 个赞 2 条评论
*   想法 id 3 有 0 个赞 4 条评论

然后对于idea id 3，结果返回为0。

虽然我希望它像这样排序

```
idea id 1(since 3+3)
idea id 3(since 0+4)
idea id 2(since 1+2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:03:30.940

```
SELECT  a.idea_id,
        a.idea_name,
        COUNT(DISTINCT b.like_ID) totalLikes,
        COUNT(DISTINCT c.comm_ID) totalComment
FROM    td_idea a
        LEFT JOIN td_idea_like b
            ON a.idea_ID = b.idea_ID
        LEFT JOIN td_idea_comment c
            ON a.idea_ID = c.idea_ID
GROUP   BY a.idea_id, a.idea_name
ORDER   BY COUNT(DISTINCT b.like_ID) + COUNT(DISTINCT c.comm_ID) DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1e36d/13)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# c# - Dijkstra 的算法团队项目没有运行，因为我将其命名为 Dijkstra（项目名称）？

> ID：16162842
> 
> 赞同：1
> 
> 时间：2013-04-23T06:54:47.293
> 
> 标签：c#

正在使用 C# 开发一个团队项目，我将其称为 Dijkstra 算法，当我写完代码后，我使用 Visual Studio 2010 进行调试，我会不断收到如下错误：

！[https://lh5.googleusercontent.com/-M8DCWHZMhig/UXYtd_9z3OI/AAAAAAAAAJQ/njtUVLTHxq4/w497-h373/Error.png](https://lh5.googleusercontent.com/-M8DCWHZMhig/UXYtd_9z3OI/AAAAAAAAAJQ/njtUVLTHxq4/w497-h373/Error.png)

当我用相似的名字重新做这个项目时，这种情况越来越多。只有当我取出 Dijkstra 这个名字时，它才能正常运行和调试。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:56:53.967

这是因为撇号，而不是 Dijsktra。将其命名为 DijkstrasAlgorithm 或类似名称，您应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:57:28.953

可能是因为您使用符号：'

我建议在命名项目时仅使用 [AZ][az][0-9] 字符（尤其是没有空格），这将为您节省大量时间。

# powershell-3.0 - 寻找 64 位版本的 32 位等效的 WmiObject

> ID：16162844
> 
> 赞同：0
> 
> 时间：2013-04-23T06:54:53.253
> 
> 标签：powershell-3.0

我试图为“win32_computersystem”Get-WmiObject 及其属性找到 64 位版本的等价物？我一直在寻找但找不到它。任何建议，将不胜感激..

```
function GetStatus ($system = $_.name) {
        $userlogon = $null
        $userlogon= gwmi -Class win32_computersystem -ComputerName $system | select -ExpandProperty username -ErrorAction Stop
        } 
```

谢谢，

米奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:14:25.600

来自[http://msdn.microsoft.com/en-us/library/aa390789.aspx](http://msdn.microsoft.com/en-us/library/aa390789.aspx)：

```
Generally, provider writers do not include both 32-bit and 64-bit versions of a
provider in the same operating system. If no 64-bit provider exists, a 32-bit provider 
can continue to run through the facilities of WOW64 
```

然后您可以`win32_computersystem`在 x64 操作系统中使用。

[在这里](http://gallery.technet.microsoft.com/scriptcenter/6062bbfc-53bf-4f92-994d-08f18c8324c0)，您可以找到一个有用的脚本来从 x32 操作系统远程检索 x64 操作系统的原始（不是 wow64）注册表值。

# php - 在特定查询中对同一字段的结果集进行排序

> ID：16162847
> 
> 赞同：0
> 
> 时间：2013-04-23T06:55:09.083
> 
> 标签：php, mysql

我有一个看起来像的函数

```
function myFunction($team1, $team2) {
$query = "select team_name from myteam where team_id=$team1 or team_id=$team2";
} 
```

结果总是按较低的team_id排序，所以如果是

```
myFunction(12, 8); 
```

返回将是 team8 然后是 team12。我想做的是按该查询列表中排在第一位的团队对结果进行排序。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:59:11.130

```
function myFunction($team1, $team2) {
$query = "select team_name from myteam where team_id=$team1 or team_id=$team2 ORDER BY (team_id=$team1) DESC, team_id";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:25:48.073

```
SELECT team_name 
  FROM myteam 
 WHERE team_id IN ($team1,$team2)
 ORDER
    BY FIELD(team_id,$team1,$team2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:29:13.553

试试这个，

```
 function myFunction($team1, $team2) {
 $query = "select team_name from myteam where (team_id=$team1 OR team_id=$team2) ORDER BY team_id DESC";
 } 
```

# c# - 在 C# 中的多线程修改和访问中保持字段最新？

> ID：16162851
> 
> 赞同：0
> 
> 时间：2013-04-23T06:55:16.020
> 
> 标签：c#, multithreading

方法Stop 不能修改字段isRunning 在另一个线程中，为什么？

这是来自 MSDN 的示例，但该字段仅由一个线程修改。

[http://msdn.microsoft.com/en-us/library/x13ttww7(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/x13ttww7(v=vs.110).aspx)

以下是我的代码。

```
public class Worker
{
    private volatile bool isRunning;

    public void Run()
    {
        ThreadPool.QueueUserWorkItem(DoSomething);
    }

    public void Stop()
    {
        this.isRunning = false;
    }

    private void DoSomething(object state)
    {
        this.isRunning = true;
        while (this.isRunning)
        {
            Console.WriteLine("working...");
            Thread.Sleep(1000);
        }

        Console.WriteLine("stopped.");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:13:24.457

您应该将 this.isRunning 更改为仅 isRunning 这指的是内存中的当前线程，而该字段正在另一个线程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:14:06.490

它确实有效。如果你运行这段代码，你会发现它工作得很好：

```
Worker worker = new Worker();
worker.Run();
Thread.Sleep(1000);
worker.Stop(); 
```

问题是当你安排一个线程执行时，它需要一些时间来执行。在我的示例中跳过 Thread.Sleep(1000) 的情况下，您立即将 isRunning 字段设置为 false，然后在线程执行时将其设置为 true。这就是为什么它永远不会结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:22:00.070

将您的行`isRunning = true`移至 function `Run()`，如下所示：

公共类 Worker { 私有 volatile bool isRunning;

```
public void Run()
{
    this.isRunning = true;
    ThreadPool.QueueUserWorkItem(DoSomething);
}

public void Stop()
{
    this.isRunning = false;
}

private void DoSomething(object state)
{
    while (this.isRunning)
    {
        Console.WriteLine("working...");
        Thread.Sleep(1000);
    }

    Console.WriteLine("stopped.");
} 
```

}

当调用函数时，此更改将确保`isRunning`为真`DoSomething`。如果在and`Stop`之间被调用，线程实际上会立即停止。`Run``DoSomething`

# android - android min3d透视投影

> ID：16162856
> 
> 赞同：1
> 
> 时间：2013-04-23T06:55:38.790
> 
> 标签：android, graphics, min3d

我有一些使用 android 3admin 库的代码。我想要实现的是在触摸手指点上绘制我的 3dObject。基本功能已经完成，但我对哪个透视投影有疑问。我的 3dObject 被画到离中心很远/离得很近。这是我的代码：

```
 private float X = 0;
    private float Y = 0;
    private int width;
    private int height;

    private void calculateCoordinates(float x, float y)
    {

        Log.d("touch", "x: "+Float.toString(((x-width/2)/5*0.01f)) +" " +
                " y: "+Float.toString(y));
        objModel.position().x=((x-width/2)/5*0.01f);
        objModel.position().y=-((y-height/2)/5*0.01f);

    \\convert 2d toch point to Number3d 3dObject point. 5 is a objModel.position().z,
         \\0.01 is a constant. With setting scale at 0.09f and this constant at 0.03f i 
        \\achived desired effect, but why?

    }

    @Override
    public void initScene() {

        width= getResources().getDisplayMetrics().widthPixels;
        height = getResources().getDisplayMetrics().heightPixels;

        scene.lights().add(new Light());
        scene.lights().add(new Light());

        IParser parser = Parser.createParser(Parser.Type.OBJ, getResources(),
                "com.example.min3dtest:raw/face_cube_obj", true);
        parser.parse();

        scene.lightingEnabled(true);

        objModel = parser.getParsedObject();
        objModel.scale().x = objModel.scale().y = objModel.scale().z = 0.03f;
        objModel.colorMaterialEnabled(true);
        objModel.texturesEnabled(true);
        scene.addChild(objModel);

        Log.d(TAG, "camera z = "+Float.toString(scene.camera().position.z));

        this.glSurfaceView().setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                int a = event.getAction();

                switch (a) {
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_MOVE:{

                    X = event.getX();
                    Y = event.getY();
                    calculateCoordinates(X,Y);

                    Log.d("sdfs", "down");
                }
                    break;

                }

                return true;
            }
        });
    }

    @Override
    public void updateScene() {

        objModel.rotation().x++;
        objModel.rotation().y++;
        objModel.rotation().z++;

    }

} 
```

这在某种程度上取决于我认为的规模。但我无法弄清楚为什么并找到好的方程式。

# google-calendar-api - 谷歌日历 API。服务帐户。访问令牌已过期。无 RT 刷新 AT

> ID：16162874
> 
> 赞同：1
> 
> 时间：2013-04-23T06:56:51.857
> 
> 标签：google-calendar-api, google-oauth, google-api-php-client

我正在尝试使用服务帐户从我的 Google 日历中获取事件。我收到了访问令牌：

> {"access_token":"ya29.AHES6ZR9o2-cut-Gg","expires_in":3600,"created":1366631471}

现在此令牌已过期，当我尝试获取事件时，出现错误：

> OAuth 2.0 访问令牌已过期，并且刷新令牌不可用。对于自动批准的响应，不会返回刷新令牌。

我试图在 API 文档中找到获取新访问令牌的方法，但没有找到合适的方法。现在我有一个问题：我必须如何刷新我的访问令牌？

我用来访问日历的代码：

```
session_start();

require_once '../../src/Google_Client.php';
require_once '../../src/contrib/Google_CalendarService.php';

define('SERVICE_ACCOUNT_NAME', 'numbers-and-letters@developer.gserviceaccount.com');
define('CLIENT_ID', 'numbers-and-letters.apps.googleusercontent.com');

define('KEY_FILE', '../../key.p12');

$client = new Google_Client();
$client->setApplicationName("app name");

$client->setUseObjects(true);

$client->setClientID(CLIENT_ID);

$key = file_get_contents(KEY_FILE);

if (isset($_SESSION['token']))
{
 $client->setAccessToken($_SESSION['token']);
 $client->setaccessType('offline');
} 
else 
{
  $client->setAssertionCredentials(new Google_AssertionCredentials(
    SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/calendar.readonly'),
    $key
  ));
}

try
{
  $cal = new Google_CalendarService($client);
  $events = $cal->events->listEvents('numbers-and-letters@group.calendar.google.com');
print_r($events);
} catch (Exception $e) echo $e->getMessage();

if ($client->getAccessToken()) {
  $_SESSION['token'] = $client->getAccessToken();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:35:27.797

我解决了！要在没有刷新令牌的情况下刷新访问令牌，您需要调用 Google_Client 类的方法 revokeToken()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T05:28:59.170

刷新令牌的推荐方法是：

```
if ($client->isAccessTokenExpired())
{
    $client->getAuth()->refreshTokenWithAssertion();
} 
```

# java - Spring MVC：在耳朵内共享上下文

> ID：16162877
> 
> 赞同：13
> 
> 时间：2013-04-23T06:56:56.237
> 
> 标签：java, spring, spring-mvc

我有一个 ear 包，其中包含一个带有公共对象的 jar 和两个我想使用公共 jar 的 war webapp。我已经将配置设置为通过 ContextLoaderListener 和 webapp 上下文分别为 DispatcherServlet 使用应用程序范围的上下文。

我的演示应用程序的设置大致如下

*   `common.jar`包含*applicationContext.xml*和*beanRefContext.xml*，它们应该是应用程序（ear）范围的上下文。文件如下所示。*共享*命名空间是共享 bean 所在的位置。

**应用上下文**

```
<beans>
    <!-- namespace etc declarations omitted -->
    <context:annotation-config />
    <context:component-scan base-package="study.spring.multicontext.shared" />
</beans> 
```

**beanRefContext.xml**

```
<beans>
    <!-- namespace etc declarations omitted -->
<bean id="sharedContext" class="org.springframework.context.support.ClassPathXmlApplicationContext">
    <constructor-arg>
        <list>
            <value>classpath*:applicationContext.xml</value>
        </list>
    </constructor-arg>
</bean>
</beans> 
```

*   `webapp1`并且是 Spring MVC 应用程序与**web.xml**文件`webapp2`打包为单独的战争，如下所示

     **```
    <web-app>

    <context-param>
      <param-name>parentContextKey</param-name>
      <param-value>sharedContext</param-value>
    </context-param>
    <context-param>
      <param-name>locatorFactorySelector</param-name>
      <param-value>classpath:beanRefContext.xml</param-value>
    </context-param>
    <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath*:applicationContext.xml</param-value>
    </context-param>

    <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>dos</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

        <init-param>
          <param-name>contextConfigLocation</param-name>
          <param-value>/WEB-INF/dos-servlet.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dos</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
    ```** 

 **和**xx-servlet.xml**类似 webapp 特定的上下文。*web*命名空间是控制器所在的位置。

```
<beans>
    <!-- namespace etc declarations omitted -->

    <context:component-scan base-package="study.spring.multicontext.web"/>
    <mvc:annotation-driven />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">

      <property name="suffix" value=".jsp"/>
    </bean>

</beans> 
```

*   共享 bean 在 Controller 类中以正常方式使用 @Autowired

    ```
    @Autowired
    MySharedBean mySharedBean 
    ```

*   ear包包含wars和jar，结构类似

    ```
    ear
     |
     |--common.jar
     |   |--META-INF
     |   |--applicationContext.xml
     |   |--beanRefContext.xml
     |
     |--webapp1.war
     |   |--WEB-INF
     |       |--xx-servlet.xml
     |       |--web.xml
     |
     |--webapp2.war
     |   |--WEB-INF
     |       |--xx-servlet.xml
     |       |--web.xml 
    ```

* * *

问题是仍然会有两个 bean 实例。每个控制器/webapp 一个，因为在每场战争中只有一个控制器。我试图调整配置，但无论我做什么，我要么得到零个实例，要么得到两个实例。

我从内存转储中检查了 Eclipse MAT 的引用，实际上有 4 个实例，但我猜这两个是供 Spring 内部使用的。无论如何，从那里可以清楚地看到每个控制器都有自己的实例。

我已经阅读了许多博客文章、讨论论坛等，他们说这应该像这样简单。有些人建议使用 JNDI，但据我所知，没有它应该是可能的。

而且不可能结合战争并将罐子捆绑在里面。因为它可能适用于这个演示应用程序，所以我正在使用的真实案例不允许这样做。

非常感谢您对此事的任何帮助。提前致谢。

[2007 年 Spring 2.X 的 SpringSource 示例，](http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/)其功能相同但配置不同。如赏金描述中所述，有点过时并正在寻找基于 Spring 3.X 的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T19:58:48.537

就应用程序上下文层次结构而言，我认为从 Spring 2.x 到 3.x 没有任何变化。

据我所知，您的配置问题在于您正在加载-`applicationContext.xml`加载到.`sharedContext``context-param` `contextConfigLocation`

由于同一个文件被加载了两次，一次在父上下文中，一次在 Web 应用程序的根上下文中，因此会生成副本，以及子上下文，即。webapp，使用它创建的那些，而不是父级中存在的那些。

更改您的配置，这样您就不会两次重新加载相同的 beans xml，它应该可以正常工作。您可以使用`parentContextKey`并且`contextConfigLocation`两者都不加载相同的文件。

更新：除了上述之外，您还需要检查共享的 jar 是否对战争可见（在允许共享同一实例时可见。）。我尝试运行博客中的示例，但当我将其部署为 Java EE6 应用程序时，它对我不起作用，这是因为战争中 ear jar 可见性的规则从 Java EE5 更改为 EE6。当我在 Glass Fish 的兼容模式下运行示例时，一切都按预期工作。

因此，请检查您的 EAR / WAR 以查看您正在运行的 servlet 规范，并确保您的服务器正在相应地部署应用程序。

如果您必须升级到 Java EE 6，请确保您遵循最新的可见性规则[http://docs.oracle.com/cd/E19226-01/820-7688/gjjdt/index.html](http://docs.oracle.com/cd/E19226-01/820-7688/gjjdt/index.html)。检查战争文件以确保它们在配置`MANIFEST`中明确提到了所有耳罩。`Class-Path`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T10:50:39.667

我解决了。

问题出在课堂加载中，正如我在对@Akshay 的回答的评论中所怀疑的那样。

Maven 在每个 war 包中都包含 spring 库，因此它们被多次加载。要解决此问题，需要[生成瘦战争](http://maven.apache.org/plugins/maven-war-plugin/examples/skinny-wars.html)。

我认为 Akshay 关于他从 web.xml 中的上下文参数中删除的答案的注释`contextConfigLocation`也起到了关键作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T14:33:47.327

我们遇到了类似的问题。检查我们为实验创建的这个简单的 maven 示例（EAR 带有 2 个 WEB 模块和一个通过父 spring 上下文服务模块共享）： [EAR with shared spring context between wars](https://github.com/balabanmario/ear-with-spring-shared-context)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-26T14:05:56.210

虽然这个问题很老，但如果有人想知道为什么[记录的方法](https://spring.io/blog/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/)在 Spring Framework 5.0+ 中不起作用。在发布此答案时，Spring Framework 5.0+ 中对耳朵内共享上下文的支持目前已被破坏。[Spring Framework Issue-20805](https://github.com/spring-projects/spring-framework/issues/20805)上存在一个现有问题**

# ios - 自动释放池块

> ID：16162878
> 
> 赞同：0
> 
> 时间：2013-04-23T06:56:59.873
> 
> 标签：ios, memory-management, autorelease

我最近在阅读[Advanced Memory Management](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)文档时偶然发现了 Autorelease Pool Blocks。该文档指出：

> 您可以在循环内使用自动释放池块在下一次迭代之前处理这些对象。在循环中使用自动释放池块有助于减少应用程序的最大内存占用。[...] 在自动释放池块内发送自动释放消息的任何对象都会在块结束时释放。

在块内创建的没有自动释放调用的对象怎么办？我假设他们的保留计数也减少到 0。然后，我的问题是，无论哪种方式，在块内创建的对象将在块结束时获得释放调用时调用 autorelease 有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:32:37.977

可以通过发送一个`-release`或`-autorelease`消息来释放一个对象。

随着`-release`引用计数立即递减，这可能导致释放。

随着`-autorelease`递减的延迟，以使对象在其创建范围之外保持活动状态。例如，辅助方法`-createFoo`可以返回一个自动释放的对象，以便调用者可以使用返回的对象，而无需在从方法返回时立即释放它，也不必担心谁负责释放它。

使用 ARC，编译器会为您处理所有这些细节。您需要知道的是，有时使用`autorelease`.

这种“保持活动”行为对以下循环有影响：

```
- (void)foobar
{
    for (/* a long time */) {
        NSMutableString *s = [NSMutableString string];
        // ...
    }
} 
```

`+string`on 方法将`NSMutableString`返回一个自动释放的对象。这*不会*在循环迭代或方法结束时自动释放（嗯，ARC 可以通过查看调用堆栈进行一些巧妙的优化，但我们将忽略这一点）。这意味着当您在循环体内时，您将获得无限的内存增长。

请注意，如果我们使用了以下内容：

```
NSMutableString *s = [[NSMutableString alloc] init]; 
```

然后 ARC 将`release`在循环体的末尾插入一个调用，并且该字符串将立即被释放。

为了解决第一个示例的无限内存增长，您定义了一个显式自动释放池：

```
- (void)foobar
{
    for (/* a long time */) {
        @autoreleasepool {
            NSMutableString *s = [NSMutableString string];
            // ...
        }
    }
} 
```

现在，在循环的每次迭代之后，自动释放池都会被销毁，并且在池中自动释放的任何对象（包括我们的字符串）都将立即释放。

所以这一切都取决于您调用的方法类型以及它们是否返回自动释放的对象。

# android - 任务android示例错误

> ID：16162880
> 
> 赞同：0
> 
> 时间：2013-04-23T06:57:16.750
> 
> 标签：android

我正在下载 task-android-sample( [http://code.google.com/p/google-api-java-client/issues/detail?id=479](http://code.google.com/p/google-api-java-client/issues/detail?id=479) )。但是当我在我的安卓设备上运行这个例子时，我得到了错误

错误出现在此函数中

```
protected void doInBackground() throws IOException {
Log.d(Tag, "doInBackground");
List<String> result = new ArrayList<String>();
List<Task> tasks =
    client.tasks().list("@default").setFields("items/title").execute().getItems();
Log.d(Tag, "трассировка");
if (tasks != null) {
  for (Task task : tasks) {
    result.add(task.getTitle());
  }
} else {
  result.add("No tasks.");
}
activity.tasksList = result;

} 
```

描述客户端

```
final com.google.api.services.tasks.Tasks client;
client = activity.service; 
```

可能是什么问题？我是新手，请帮忙。

```
04-23 08:55:06.789: E/TasksSample(3778):   com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
04-23 08:55:06.789: E/TasksSample(3778): {
04-23 08:55:06.789: E/TasksSample(3778):   "code": 403,
04-23 08:55:06.789: E/TasksSample(3778):   "errors": [
04-23 08:55:06.789: E/TasksSample(3778):     {
04-23 08:55:06.789: E/TasksSample(3778):       "domain": "usageLimits",
04-23 08:55:06.789: E/TasksSample(3778):       "message": "Access Not Configured",
04-23 08:55:06.789: E/TasksSample(3778):       "reason": "accessNotConfigured"
04-23 08:55:06.789: E/TasksSample(3778):     }
04-23 08:55:06.789: E/TasksSample(3778):   ],
04-23 08:55:06.789: E/TasksSample(3778):   "message": "Access Not Configured" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:00:24.907

```
 public static final String KEY = null; 
```

确保您添加了 key 代替 null in`ClientCredentials.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:28:09.733

异步加载任务

```
package com.google.api.services.samples.tasks.android;

import com.google.api.services.tasks.model.Task;
import android.util.Log;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

class AsyncLoadTasks extends CommonAsyncTask {
  final String Tag="States";
  AsyncLoadTasks(TasksSample tasksSample) {
    super(tasksSample);
  }

  @Override
  protected void doInBackground() throws IOException {
    Log.d(Tag, "doInBackground");
    List<String> result = new ArrayList<String>();
    List<Task> tasks =
    client.tasks().list("@default").setFields("items/title").execute().getItems();
    Log.d(Tag, "трассировка");
    if (tasks != null) {
  for (Task task : tasks) {
    result.add(task.getTitle());
  }
} else {
  result.add("No tasks.");
}
activity.tasksList = result;

  }

  static void run(TasksSample tasksSample) {
    new AsyncLoadTasks(tasksSample).execute();
  }
} 
```

通用异步任务

```
package com.google.api.services.samples.tasks.android;

import     com.google.api.client.googleapis.extensions.android.gms.auth.GooglePlayServicesAvailabilityI    OException;
import     com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException;

import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import java.io.IOException;

abstract class CommonAsyncTask extends AsyncTask<Void, Void, Boolean> {
  final String Tag="States";
  final TasksSample activity;
  final com.google.api.services.tasks.Tasks client;
  private final View progressBar;

  CommonAsyncTask(TasksSample activity) {
    Log.d(Tag, "CommonAsyncTask");
    this.activity = activity;
    client = activity.service;
    progressBar = activity.findViewById(R.id.title_refresh_progress);
  }

  @Override
  protected void onPreExecute() {
    Log.d(Tag, "onPreExecute");
    super.onPreExecute();
    activity.numAsyncTasks++;
    progressBar.setVisibility(View.VISIBLE);
  }

  @Override
  protected final Boolean doInBackground(Void... ignored) {
    Log.d(Tag, "Boolean doInBackground");
    try {
      doInBackground();
      return true;
        } catch (final GooglePlayServicesAvailabilityIOException availabilityException)     {
      Log.d(Tag, "1");
      activity.showGooglePlayServicesAvailabilityErrorDialog(
      availabilityException.getConnectionStatusCode());
    } catch (UserRecoverableAuthIOException userRecoverableException) {
  Log.d(Tag, "2");
  activity.startActivityForResult(
      userRecoverableException.getIntent(), TasksSample.REQUEST_AUTHORIZATION);
    } catch (IOException e) {
  Log.d(Tag, "3");
  Utils.logAndShow(activity, TasksSample.TAG, e);
    }
    return false;
  }

  @Override
  protected final void onPostExecute(Boolean success) {
Log.d(Tag, "onPostExecute");
super.onPostExecute(success);
if (0 == --activity.numAsyncTasks) {
  progressBar.setVisibility(View.GONE);
}
if (success) {
  activity.refreshView();
    }
  }

  abstract protected void doInBackground() throws IOException;
} 
```

任务示例

```
package com.google.api.services.samples.tasks.android;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.tasks.TasksScopes;

import android.accounts.AccountManager;
import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

public final class TasksSample extends Activity {

  private static final Level LOGGING_LEVEL = Level.OFF;

  private static final String PREF_ACCOUNT_NAME = "accountName";

  static final String TAG = "TasksSample";

  static final int REQUEST_GOOGLE_PLAY_SERVICES = 0;

  static final int REQUEST_AUTHORIZATION = 1;

  static final int REQUEST_ACCOUNT_PICKER = 2;

  final HttpTransport transport = AndroidHttp.newCompatibleTransport();

  final JsonFactory jsonFactory = new GsonFactory();

  GoogleAccountCredential credential;

  List<String> tasksList;

  ArrayAdapter<String> adapter;

  com.google.api.services.tasks.Tasks service;

  int numAsyncTasks;

  private ListView listView;
  final String Tag="States";

  @Override
  public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
Log.d(Tag, "onCreate");
// enable logging
Logger.getLogger("com.google.api.client").setLevel(LOGGING_LEVEL);
// view and menu
setContentView(R.layout.calendarlist);
listView = (ListView) findViewById(R.id.list);
// Google Accounts
credential = GoogleAccountCredential.usingOAuth2(this, TasksScopes.TASKS);
SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
credential.setSelectedAccountName(settings.getString(PREF_ACCOUNT_NAME, null));
// Tasks client
service =
    new com.google.api.services.tasks.Tasks.Builder(transport, jsonFactory, credential)
        .setApplicationName("Google-TasksAndroidSample/1.0").build();
  }

  void showGooglePlayServicesAvailabilityErrorDialog(final int connectionStatusCode) {
runOnUiThread(new Runnable() {
  public void run() {
    Log.d(Tag, "run");
    Dialog dialog =
        GooglePlayServicesUtil.getErrorDialog(connectionStatusCode, TasksSample.this,
            REQUEST_GOOGLE_PLAY_SERVICES);
    dialog.show();
  }
    });
  }

  void refreshView() {
Log.d(Tag, "refreshView");
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, tasksList);
listView.setAdapter(adapter);
  }

  @Override
  protected void onResume() {
Log.d(Tag, "onResume");
super.onResume();
if (checkGooglePlayServicesAvailable()) {
  haveGooglePlayServices();
}
  }

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
Log.d(Tag, "onActivityResult");
super.onActivityResult(requestCode, resultCode, data);
switch (requestCode) {
  case REQUEST_GOOGLE_PLAY_SERVICES:
    if (resultCode == Activity.RESULT_OK) {
      haveGooglePlayServices();
    } else {
      checkGooglePlayServicesAvailable();
    }
    break;
  case REQUEST_AUTHORIZATION:
    if (resultCode == Activity.RESULT_OK) {
      AsyncLoadTasks.run(this);
    } else {
      chooseAccount();
    }
    break;
  case REQUEST_ACCOUNT_PICKER:
    if (resultCode == Activity.RESULT_OK && data != null && data.getExtras() != null) {
      String accountName = data.getExtras().getString(AccountManager.KEY_ACCOUNT_NAME);
      if (accountName != null) {
        credential.setSelectedAccountName(accountName);
        SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString(PREF_ACCOUNT_NAME, accountName);
        editor.commit();
        AsyncLoadTasks.run(this);
      }
    }
    break;
    }
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
Log.d(Tag, "onCreateOptionsMenu");
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.main_menu, menu);
return super.onCreateOptionsMenu(menu);
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
Log.d(Tag, "onOptionsItemSelected");
switch (item.getItemId()) {
  case R.id.menu_refresh:
    AsyncLoadTasks.run(this);
    break;
  case R.id.menu_accounts:
    chooseAccount();
    return true;
}
return super.onOptionsItemSelected(item);
  }

  private boolean checkGooglePlayServicesAvailable() {
Log.d(Tag, "checkGooglePlayServicesAvailable");
final int connectionStatusCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
if (GooglePlayServicesUtil.isUserRecoverableError(connectionStatusCode)) {
  showGooglePlayServicesAvailabilityErrorDialog(connectionStatusCode);
  return false;
}
return true;
  }

  private void haveGooglePlayServices() {
Log.d(Tag, "haveGooglePlayServices");
// check if there is already an account selected
if (credential.getSelectedAccountName() == null) {
  Log.d(Tag, "user to choose account");
  // ask user to choose account
  chooseAccount();
} else {
  Log.d(Tag, "load calendars");
  // load calendars
  AsyncLoadTasks.run(this);
}
  }

  private void chooseAccount() {
Log.d(Tag, "chooseAccount");
startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
  }

} 
```

实用程序

```
package com.google.api.services.samples.tasks.android;

import com.google.android.gms.auth.GoogleAuthException;
import com.google.api.client.googleapis.json.GoogleJsonError;
import com.google.api.client.googleapis.json.GoogleJsonResponseException;

import android.app.Activity;
import android.content.res.Resources;
import android.util.Log;
import android.widget.Toast;

public class Utils {

  public static void logAndShow(Activity activity, String tag, Throwable t) {
 //   Log.d(Tag, "onPostExecute");
Log.e(tag, "Error", t);
String message = t.getMessage();
if (t instanceof GoogleJsonResponseException) {
  GoogleJsonError details = ((GoogleJsonResponseException) t).getDetails();
  if (details != null) {
    message = details.getMessage();
  }
} else if (t.getCause() instanceof GoogleAuthException) {
  message = ((GoogleAuthException) t.getCause()).getMessage();
}
showError(activity, message);
  } 
```

/**

```
 public static void logAndShowError(Activity activity, String tag, String message) {
String errorMessage = getErrorMessage(activity, message);
Log.e(tag, errorMessage);
showErrorInternal(activity, errorMessage);
  }

  public static void showError(Activity activity, String message) {
String errorMessage = getErrorMessage(activity, message);
showErrorInternal(activity, errorMessage);
  }

  private static void showErrorInternal(final Activity activity, final String errorMessage) {
activity.runOnUiThread(new Runnable() {
  public void run() {
    Toast.makeText(activity, errorMessage, Toast.LENGTH_LONG).show();
  }
    });
  }

  private static String getErrorMessage(Activity activity, String message) {
Resources resources = activity.getResources();
if (message == null) {
  return resources.getString(R.string.error);
}
return resources.getString(R.string.error_format, message);
  }
} 
```

这是我的代码。我能解决什么问题？

# c# - WPF：绘制调整大小以适合其容器的规范化多边形

> ID：16162881
> 
> 赞同：2
> 
> 时间：2013-04-23T06:57:23.273
> 
> 标签：c#, wpf, resize, drawing

我正在尝试创建一个能够在屏幕上绘制多边形的用户控件。这些多边形的点都在 0,0 和 1,1 之间（标准化）。绘制时，多边形应该填充给它的空间。因此，值 1,1 将对应于容器中的宽度、高度。

我试过应用 renderTransforms，但这会导致线宽也被缩放。线宽应该相同（这是我要显示的矢量化多边形信息）。

谁能想到最好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:48:57.390

也许可以使用具有适当 StrokeThickness 的 Canvas 控件

```
<Viewbox Stretch="Fill">
  <Canvas Width="1.0" Height="1.0">
    <Polygon Points="0, 1 1, 0 1, 1 0, 0" Stroke="Black" StrokeThickness="0.02" Fill="Yellow"/>                
  </Canvas>
</Viewbox> 
```

# jquery - 重新加载后无法单击jquery ajax项目

> ID：16162886
> 
> 赞同：3
> 
> 时间：2013-04-23T06:57:42.250
> 
> 标签：jquery, ajax, django, reload

我正在使用 django

在身体块

```
<div id="tag_like">
    {% if liked %}
      <img id="unlike" title="unlike" src="{{ STATIC_URL }}pic/bad.png" />
    {% else %}
      <img id="like" title="like" src="{{ STATIC_URL }}pic/good.png" />
    {% endif %}
</div> 
```

在 on_ready 脚本块中：

```
$.ajaxSetup({
  data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
});
$('#like').click(function() {
   $.post("{% url 'likevideo' %}", {uid:{{ login_id }}, videoid:"{{ videoid }}"}, function(data,status){
      $('#tag_like').load(' #tag_like')
   });
});
$('#unlike').click(function() {
   $.post("{% url 'unlikevideo' %}", {uid:{{ login_id }}, videoid:"{{ videoid }}"}, function(data,status){
      $('#tag_like').load(' #tag_like')
   });
}); 
```

它在您第一次单击图像时工作正常。（转向另一张图像）但是当再次单击它时，不会发生 ajax 操作。我读

[使用 JQuery 和 AJAX 在 Django 中刷新 div](https://stackoverflow.com/questions/4217919/refresh-a-div-in-django-using-jquery-and-ajax)

[jqgrid在使用trigger（'reload'）进行ajax调用后没有重新加载](https://stackoverflow.com/questions/3754953/jqgrid-not-reloading-after-making-a-ajax-call-using-triggerreload)

[将 jQueryui 按钮添加到动态添加的内容](https://stackoverflow.com/questions/3028912/adding-jqueryui-buttons-to-dynamically-added-content)

但是还没有达成具体的解决方案......任何改变最小的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:01:10.217

使用`.on()`，因为您正在加载`DOM`到 ID 为 的 div `tag_like`。

```
$(document).on('click','#like',function(){
    //code here.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:05:29.407

试试这个进行事件绑定：

```
$('#tag_like').on("click", "#like", function() {
   $.post("{% url 'likevideo' %}", {uid:{{ login_id }}, videoid:"{{ videoid }}"}, function(data,status){
      $('#tag_like').load(' #tag_like')
   });
});
$('#tag_like').on("click", "#unlike", function() {
   $.post("{% url 'unlikevideo' %}", {uid:{{ login_id }}, videoid:"{{ videoid }}"}, function(data,status){
      $('#tag_like').load(' #tag_like')
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:01:32.827

这样做：

```
$('#tag_like').on("click", "#like", function() {
   $.post("{% url 'likevideo' %}", {uid:{{ login_id }}, videoid:"{{ videoid }}"}, function(data,status){
      $('#tag_like').load(' #tag_like')
   });
}); 
```

这种方法速度很快，因为它会阻止 jQuery 在您每次单击按钮时解析整个文档。

# database - 分解规则关系数据库

> ID：16162887
> 
> 赞同：1
> 
> 时间：2013-04-23T06:57:44.120
> 
> 标签：database, inference, decomposition

我有一个类型为 R={A,B,C,D,E,F} 的关系数据库，具有 F = {{AB-->C}; 等功能依赖关系。{A-->D}; {D-->AE}; {E-->F}}

但是，在推理规则的帮助下，我提出了 BD-->ABCEF 语句，我想知道分解规则是否允许从右侧消除 B？

分解规则说：

> 如果 X --> YZ 那么 X --> Y 和 X --> Z

基本上 BD --> ACEF 是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:49:31.797

是：AB->CDEF，BD->ACEF。

> 主键的两个候选键都是任意的吗？

正确的。选择主键没有正式的基础，而且主键在依赖理论中也没有任何意义。

# c# - 如何在我的函数中消除此错误消息？

> ID：16162890
> 
> 赞同：-1
> 
> 时间：2013-04-23T06:57:47.063
> 
> 标签：c#

我在一个类中有一个函数，但在“Withdraw”下收到一个错误，“并非所有代码路径都返回一个值”。我认为添加一个 void 可以解决问题，但似乎无法让它消失。知道如何修改我的代码吗？这是部分：

```
public virtual double Withdraw(double amount)
  {
     if (amount > balance)
     {
        MessageBox.Show("Debit amount exceeded account balance.", "Insufficient funds!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
     }
     else
        return balance - amount;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:59:13.653

由于您已声明您的函数返回 a `double`，因此无论采用哪个分支，它都需要执行该操作`if`。

您需要在返回后从 , 的`true`一侧返回一个值，例如：`if``MessageBox`

```
if (amount > balance)
{
    MessageBox.Show(...);
    return balance;
}
else ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:09:57.327

不是直接的答案，但我认为您的方法有多种用途，计算并向用户显示消息，您应该考虑使用这样的两种方法

```
public virtual double Withdraw(double amount)
{
    if (amount > balance)    
        throw new Exception("your message")        
    else
        return balance - amount;
} 
```

调用者的代码

```
try{
 Withraw(...)
}
catch{
 Your messageBox
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T06:59:04.370

你的 ode 在*任何*情况下都应该返回一些值，所以

```
public virtual double Withdraw(double amount)
  {
     if (amount > balance)
     {
        MessageBox.Show("Debit amount exceeded account balance.", "Insufficient funds!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        return SOME_NON_VALID_VALUE_FOR_YOUR_APP; //or raise an exception,
        // depends on architecture 
     }

     return balance - amount;       
  } 
```

考虑所提供代码的逻辑，如果`amount > balance`不正确，则返回计算。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T07:00:01.537

您下面的代码行不返回任何值是主要原因：

```
if (amount > balance)
 {
    MessageBox.Show("Debit amount exceeded account balance.", "Insufficient funds!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
 } 
```

您应该在 之后返回一个双精度值`MessageBox.Show`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T06:59:30.670

你需要在理想之后重新做一些`MessageBox.Show`事情`0`

```
 public virtual double Withdraw(double amount)
  {
     if (amount > balance)
     {
        MessageBox.Show("Debit amount exceeded account balance.", "Insufficient funds!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return 0;
     }
     else
        return balance - amount;
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T06:58:59.680

您的函数应该返回一个双精度值，但如果`amount>balance`它不会。

```
public virtual double Withdraw(double amount)
{
    if (amount > balance)
    {
        //your messagebox code    
        return double.NaN; // or whatever you think is correct in this case.
    }
    else
        return balance - amount;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T06:59:47.553

您正在`double`通过函数返回值。

但只在其他部分提到。

如果 , if(amount > balance) 条件为真，那么您也必须返回该值。

见下面的代码：

```
 public virtual double Withdraw(double amount)
      {
         if (amount > balance)
         {
            MessageBox.Show("Debit amount exceeded account balance.", "Insufficient funds!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
         }
         else
            return balance - amount;

         return 0;
      } 
```

# oracle - Oracle USING 子句最佳实践

> ID：16162897
> 
> 赞同：11
> 
> 时间：2013-04-23T06:58:22.330
> 
> 标签：oracle, join, using, natural-join

免责声明：我是开发人员，而不是 DBA。

我一直是 Oracle 中 USING 子句的忠实拥护者，因为我不小心偶然发现了它，并用它代替了老式的 ON 子句来连接事实表和维度表。对我来说，它创建了一个更简洁的 SQL 并生成了一个更简洁的结果集，没有不必要的重复列。

但是，昨天一位同事要求我将我所有的 USING 子句转换为 ON。我会和他核实一下，问他的理由是什么。他与数据库的工作比我更密切，所以我认为他有一些充分的理由。

我没有收到他的回复（我们在不同的时区工作），但我想知道是否有关于使用“使用”条款的任何指导方针或最佳实践？我用谷歌搜索了很多，但没有找到任何确定的东西。事实上，我什至在任何地方都没有进行过好的辩论。

有人可以对此有所了解吗？或者提供一个关于该主题的良好讨论的链接？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-23T07:51:12.223

您可能已经意识到这种区别，但是从[文档中](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#SQLRF55314)：

> **ON*条件***使用该`ON`子句指定连接条件。`WHERE`这样做可以让您指定与子句中的任何搜索或过滤条件分开的连接条件。
> 
> **USING ( *column* )**当您指定两个表中具有相同名称的列的等值连接时，该`USING column`子句指示要使用的列。仅当两个表中的连接列具有相同名称时，才能使用此子句。在此子句中，不要使用表名或表别名来限定列名。

所以这些是等价的：

```
select e.ename, d.dname
from emp e join dept d using (deptno);

select e.ename, d.dname
from emp e join dept d on d.deptno = e.deptno; 
```

在很大程度上，您使用的是样式问题，但是（至少）有两种情况您不能使用`using`：（a）当两个表中的列名不同时，以及（b）当你想使用加入列：

```
select e.ename, d.dname, d.deptno
from emp e join dept d using(deptno);

select e.ename, d.dname, d.deptno
                         *
ERROR at line 1:
ORA-25154: column part of USING clause cannot have qualifier 
```

您当然可以省略限定符 and `select ..., deptno`，只要您没有另一个表具有未使用它连接的同一列：

```
select e.ename, d.dname, deptno
from emp e join dept d using (deptno) join mytab m using (empno);

select e.ename, d.dname, deptno
                         *
ERROR at line 1:
ORA-00918: column ambiguously defined 
```

在这种情况下，您*只能*选择合格的`m.deptno`. （好吧，这是相当做作的......）。

我可以看到避免的主要原因`using`只是一致性。由于您有时无法使用它，因此偶尔切换到`on`这些情况可能会有点刺耳。但同样，这更多的是关于风格，而不是任何深层的技术原因。

也许您的同事只是在强加（或建议）编码标准，但只有他们知道。如果您被要求更改您编写的一些正在审核的新代码或旧代码，也不是很清楚。如果是后者，那么无论他们偏爱的原因是什么`on`，我认为您需要获得单独的理由来修改经过验证的代码，因为即使重新测试修改后的代码也存在引入新问题的风险——除了成本之外/努力参与返工和重新测试。

不过，有几件事让我对你的问题感到震惊。首先，您将`on`语法描述为“老式”，但我认为这不公平 - 两者都是有效的和最新的（我认为从 SQL:2011 开始，但需要引用！）。和这个：

> 生成更简洁的结果集，没有不必要的重复列。

...我认为建议您使用`select *`，否则您只需选择其中一个值，尽管限定符有几个额外的字符。对于临时查询和某些子查询以外的任何内容，使用`select *`通常被认为是不好的做法（例如[此处）。](https://stackoverflow.com/a/9227488/266304)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:51:50.057

[相关问题](https://stackoverflow.com/questions/10432107/difference-between-on-clause-and-using-clause-in-sql)。

似乎主要区别在于语法：列在`USING`连接中合并。

在所有情况下，这意味着您无法从特定表访问连接列的值，实际上某些 SQL 将无法编译，例如：

```
SQL> WITH t AS (SELECT 1 a, 2 b, 3 c FROM dual),
  2       v AS (SELECT 1 a, 2 b, 3 c FROM dual)
  3  SELECT t.* FROM t JOIN v USING (a);

SELECT t.* FROM t JOIN v USING (a)
         ^    
ORA-25154: column part of USING clause cannot have qualifier 
```

在外部联接中，这意味着您无法访问外部表值：

```
SQL> WITH t AS (SELECT 1 a, 2 b, 3 c FROM dual),
  2       v AS (SELECT NULL a, 2 b, 3 c FROM dual)
  3  SELECT * FROM t LEFT JOIN v USING (a)
  4   WHERE v.a IS NULL;

 WHERE v.a IS NULL
         ^
ORA-25154: column part of USING clause cannot have qualifier 
```

`USING`这意味着此反连接语法与该子句没有等价物：

```
SQL> WITH t AS (SELECT 1 a, 2 b, 3 c FROM dual),
  2       v AS (SELECT NULL a, 2 b, 3 c FROM dual)
  3  SELECT * FROM t LEFT JOIN v ON v.a = t.a
  4   WHERE v.a IS NULL;

         A          B          C A          B          C
---------- ---------- ---------- - ---------- ----------
         1          2          3 
```

**除此之外，一旦 SQL 有效**，我不知道有任何区别。

但是，由于这种语法似乎不太常用，如果存在仅影响`USING`子句的特定错误，我不会感到惊讶，尤其是在引入 ANSI SQL 的早期版本中。我在 MOS 上没有找到任何可以证实这一点的东西，部分原因是*USING*这个词在错误描述中无处不在。

如果不使用此功能的原因是由于错误，那么在我看来，举证责任在于您的同事：必须引用/记录错误，以便在修复错误后最终解除禁令（数据库升级...）。

如果原因是装饰性的或编码约定的一部分，那么它肯定也必须记录在案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T16:03:30.850

使用 USING 你也不能像这样进行连接： select a.id,aval,bval,cval from a left join b on a.id = b.id left join c on c.id = b.id;

即，仅在与 B 表中的一行匹配时才给出 C 中的列。

# perl - “状态”是否总是从后续行开始解析？

> ID：16162899
> 
> 赞同：0
> 
> 时间：2013-04-23T06:58:43.337
> 
> 标签：perl, excel, parsing, hash, spreadsheet

原帖太长：[Fetching zero cells in XLS file using Spreadsheet::ParseExcel](https://stackoverflow.com/questions/15907022/fetching-zero-cells-in-xls-file-using-spreadsheetparseexcel)

xls 的数据结构。文件如下所示：

```
 col1      col2    col3   col4   col5 
row1  School    1
row2  Dean      John
row3  No.stu.   55
row4  some irrelevant stuff 
row5  School2   2
row6  Dean      Tony 
row7  No. stu.  60 
row8  some irrelevant stuff
row9  School    3
row10 Dean      James
row11 No.stu.   56
row12 No. teacher 20
row13 School    4
row14 Dean      Tom
row15 No.stu.   79
row16 No. teacher 21
row17 course    
row18           math    2
row19           eng     4      
row20 teacher   name    age   gender   race 
row21           Jane    20    female   white  
row22 student   name    Lee 
row23           SAT     1434
row24           gender  male 
```

正如 imran 所建议的，我使用 Spreadsheet::ParseExcel 使用了以下结构；

```
 my %data;
    my $state = "";
    my $school = "";
    my $student = "";
    my ( $row_min, $row_max ) = $worksheet->row_range();
    my $row = $row_min;
    while ($row <= $row_max) {
        my $cell0 = $worksheet->get_cell( $row, 0 );
        my $cell1 = $worksheet->get_cell( $row, 1 );

        if (defined($cell0)) {
            my $key = $cell0->value();
            if ($key eq 'School') {
                $state = 'school';
                $school = $cell1->value();
            } elsif ($key eq 'course') {
                $state = 'course';
            } elsif ($key eq 'teacher') {
                $state = 'teacher';
            } elsif ($key eq 'student') {
                $state = 'student');
                $student = $worksheet->get_cell( $row, 2 )->value();
            } else {
                $data{$school}{$key} = $cell1->value();
            }
        } elsif ($state eq 'course') {
            # process columns for course
        } elsif ($state eq 'teacher') {
            # process columns for teacher
        } elsif ($state eq 'student') {
            # process columns for student
        }
        $row++;
    } 
```

效果很好。

但似乎在 each 中`state`，它从第二行开始解析。也就是说，如果我们将 course 声明为一个状态，它会从下一行开始处理，直到到达下一行`state`。但是，例如，如果每个学校的课程状态的数据结构略有不同，即`state`课程的键和值之一在同一行，

```
 School    1 
     course    math    
               eng
     ...
     School     2
     course    phy
     ...   
     School     3 
     course    chem 
               gym 
               music 
```

如果我坚持使用原始代码：

```
 } elsif ($key eq 'course') {
                $state = 'course';
                $course = $worksheet->get_cell( $row, 1 )->value();
    } 
```

相应的哈希表为：

```
} elsif ($state eq 'course') {
            my $key = $cell1->value();
            $data{$school}{$course}{$key} =$cell1->value();
} 
```

但是，它只能解析

```
 '1' => {
                   'math' => {
                               'eng' => 'eng'
                             },
       }
'3' => {
   'chem' => {
                               'gym' => 'gym',
                               'music' => 'music
                             },
      } 
```

并且没有解析`school2`.

问题是，如果这个模块有任何灵活性可以让我从我想要的任何地方解析？

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:14:50.477

我认为您需要下面的结构，而不是上面提到的结构：

```
'1' => {
               'course' => {
                           'math' => 'math'
                           'eng' => 'eng'
                         },
   }
'3' => {
               'course' => {
                           'chem' => 'chem'
                           'gym' => 'gym',
                           'music' => 'music
                         },
  } 
```

因此，您的哈希名称应以学校编号开头，里面当然有哈希，里面有所有课程的键值对。

这样，您以后也可以很容易地解析它。

**编辑：**

你可以把你的代码改成这样（我不知道你这样做的确切方式）：

```
 } elsif ($key eq 'course') {
            $state = 'course';
            $course = $state;
            $key = $worksheet->get_cell( $row, 1 )->value();
            $data{$school}{$course}{$key} = $key;
} 
```

像这样的东西应该可以工作，您可能需要根据您的要求进行一些更改。

# maven - 如何（务实地）知道正确的 maven artifact-id group-id 的 jar 名称

> ID：16162902
> 
> 赞同：0
> 
> 时间：2013-04-23T06:58:51.120
> 
> 标签：maven, pom.xml

您能否让我知道是否有任何可用的搜索服务，我可以在其中搜索 maven artifact-id, group-id 以获取实用的 jar。

这个想法是构建一个简单的工具（可能是从控制台运行的 jar），它扫描我的 lib 目录（对于所有 jar 名称）并为它们生成一个 pom 文件。

到目前为止，当我需要生成 pom xml 时，我通过在 mvnrepository.com/artifact/commons-collections/commons-collections/3.2.1 上搜索 artifact-id、group-id 来手动完成。

我只是在考虑任何在请求中使用 jar 名称（例如 commons-collections 3.2.1）并返回如下响应的服务：

```
 <dependency>
     <groupId>commons-collections</groupId>
     <artifactId>commons-collections</artifactId>
     <version>3.2.1</version>
</dependency> 
```

任何指向现有工具的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:10:04.137

您可以选择[Maven 中央搜索功能](http://search.maven.org/#search%7Cga%7C1%7Ccommons-collections)，这将产生一个工件列表。此外，Maven Central 的 Nexus 具有可用于此类目的的[REST API 。](http://search.maven.org/#api)

除了上述之外，您想到的这样一个工具将无法工作，因为它必须记住存在传递依赖关系，这只是为了解决不将 pom 文件作为依赖关系。

# r - 如何在R中的图例周围放置边框？

> ID：16162903
> 
> 赞同：0
> 
> 时间：2013-04-23T06:58:54.173
> 
> 标签：r, plot, border, legend

我正在使用 R 绘制图例，但我需要绘制黑色边框。

```
plot.new()
legend(x=0,y=.15, c(" legend1"), cex=1,pt.cex =1.4,col=c("green"),bty="n",fill="green", pch=c(15, 15, 15, 17),border="black")
legend(x=.75,y=.15, " legend", cex=1, pt.cex =1.4,bty="n",col=c("black"), pch=c(17), border="black") 
```

但在上面的代码中，没有按预期打印黑色边框，如下图所示。我怎样才能

![在此处输入图像描述](https://i.stack.imgur.com/4qGKM.png)

把边框（这里黑色边框覆盖绿色框）和图例如下所示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T07:06:58.460

当然是没有边界的！你用过`bty = "n"`

来自`?par`（在该页面上搜索“bty”）：

> bty：一个字符串，它决定了绘制在图上的框的类型。如果 bty 是“o”（默认值）、“l”、“7”、“c”、“u”或“]”之一，则生成的框类似于相应的大写字母。“n”值会抑制该框。

删除`bty`参数或指定与所需边框形状匹配的替代项。

* * *

根据问题编辑进行更新。

由于您想控制`pch`符号的填充颜色和边框，请尝试以下操作：

```
plot.new()
legend(x=0, y=.15, "legend1 ", cex=1, pt.cex=1.4, 
       bty="n", pch=22, col="black",
       pt.bg="green")
legend(x=.75,y=.15, "legend 2", cex=1, pt.cex =1.4, 
       bty="n", pch=24, col="red", pt.bg="white") 
```

关键是使用`pch`可以着色和填充不同颜色的值之一，即 21 到 35 范围内的值。

从`?pch`，我们的选择是：

> *   pch = 21：实心圆
> *   pch = 22：实心正方形
> *   pch = 23：实心菱形
> *   pch = 24：实心三角形向上
> *   pch = 25：实心三角形点向下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:22:36.823

```
plot.new()
 legend(x=0,y=.15, c(" legend1"), cex=1,pt.cex =1.4,col=c("green"),
         bty="o",fill="green", pch=c(15, 15, 15, 17) )
 legend(x=.75,y=.15, " legend", cex=1, pt.cex =1.4,
         bty="o",col=c("black"), pch=c(17), box.col="red") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:37:55.763

如何使用开放绘图符号。我认为这应该是您正在寻找的：

```
plot.new()
legend(x=0, y=.15, "legend1", 
       cex=1, pt.cex =1.4, bty="n", pch=22, pt.bg = "green")
legend(x=.75, y=.15, "legend2", 
       cex=1, pt.cex =1.4, bty="n", pch=24, pt.bg = "black") 
```

查看[这个简短的帮助页面](http://de.wikibooks.org/wiki/GNU_R%3a_plot)以获取更多`pch`示例。

# hibernate - Mysql 5.5，如何避免执行会话的varchar字段截断错误

> ID：16162909
> 
> 赞同：1
> 
> 时间：2013-04-23T06:59:01.973
> 
> 标签：hibernate, configuration, truncation, mysql-5.5

**Mysql 5.5，如何避免 varchar 字段截断错误，用于执行会话。**

我正在使用 java hibernate mysql 5.5

我正在寻找类似的东西：

```
set SESSION sqlMode="AUTO_TRUNCATE_FIELDS" 
```

而不是得到一个错误。

**是否可以以编程方式为当前正在执行的会话执行此操作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:28:49.870

同时我已经通过 java-connection.mysql 实现，如下所示：

```
userDAO.s.doWork(
        new Work() {
            @Override
            public void execute(Connection arg0) throws SQLException {
                DatabaseMetaData databaseMetaData = arg0.getMetaData();
                ResultSet rs=databaseMetaData.getColumns(null, null, "event", "%");
                while (rs.next()) {
                    if ("title".equals(rs.getString("COLUMN_NAME"))) {
                        titleColumSize=rs.getInt("COLUMN_SIZE");
                    }
                }
        }
        }
    ); 
```

然后：

```
if (title.length()>titleColumSize)
    title=title.substring(0, titleColumSize-7)+" [...]"; 
```

**如果有任何配置解决方案可用，我将不胜感激！！谢谢！**

# php - 插件被激活时如何调用/运行函数wordpress php？

> ID：16162915
> 
> 赞同：0
> 
> 时间：2013-04-23T06:59:14.393
> 
> 标签：php, wordpress

我的插件激活有三个功能要做..

功能 1 :-在 wordpress 数据库中创建自定义表。

```
function create_table(){
    //Get the table name with the WP database prefix
    global $wpdb;
    echo "create_table";
    $table_name = $wpdb->prefix . "custom";

    $installed_ver = get_option( "db_table_custom_version" );
     //Check if the table already exists and if the table is up to date, if not create it
    if($wpdb->get_var("SHOW TABLES LIKE '$table_name'") != $table_name
            ||  $installed_ver != $db_table_custom_version ) {
        $sql = "CREATE TABLE " . $table_name . " (
              id mediumint(9) NOT NULL AUTO_INCREMENT,
              date bigint(11) DEFAULT '0' NOT NULL,
              site tinytext NOT NULL,
              description text NOT NULL,
              max_depth mediumint(9) NOT NULL,
              time mediumint(9) NOT NULL,
              UNIQUE KEY id (id)
            );";

        require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
        dbDelta($sql);
        update_option( "db_table_custom_version", $db_table_custom_version );

}
    //Add database table versions to options
    add_option("db_table_custom_version", $db_table_custom_version );
} 
```

功能2：-从博客的帖子内容中获取所有图像。在此功能中，我尝试获取帖子内容的所有图像并将它们保存在会话变量“arrayImg”中

```
function get_all_post_images(){
    if(is_single() || is_page() || is_home() ){  
      global $post; 
      global $wpdb; 

  $query_images_args = array(
     'post_type' => 'attachment' , 'post_mime_type' =>'image','post_status' => 'published', 'posts_per_page' => -1,'numberposts' => 1
 );

 $query_images = new WP_Query( $query_images_args );
 $images = array();

         foreach ( $query_images->posts as $image) {      
         $images[]= wp_get_attachment_url( $image->ID );

                 }

             $abc=($images);
                 $count = count($images);
                 for ($i = 0; $i < $count; $i++)
 {               
      $final[]= $images[$i];  
 }

                 $_SESSION['arrayImg']=$abc;  
                 $noofpics=  count($image);
            }   
} 
```

功能 3 :- 获取会话中存储的所有图像并使用 curl 功能将其发送到服务器或远程 pc

```
global $ch;
function send_image(){
if( !session_id())
    session_start();

$abc = $_SESSION['arrayImg'];
global $ch;

$post_data = array('data' => serialize($abc));

$url="http://serverpath";

    $ch = curl_init();
    set_time_limit ( 1000 );
    curl_setopt($ch, CURLOPT_POST,$abc);
    curl_setopt($ch, CURLOPT_POSTFIELDS, ($post_data));
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

if(curl_exec($ch) === false) {
echo $ch;
  die("Curl failed: " . curl_error($ch));
} else {
  $output= curl_exec($ch);
}

$_SESSION['match_response']=$output;  
curl_close ($ch);
} 
```

我在我的插件页面中为 register_activation_hook 编写了一个代码，如下所示

```
 include_once dirname( __FILE__ ).'\database.php'; //Function 1 is in this file 
    include_once dirname( __FILE__ ).'\ajax.php';     //Function 3 is in this file 
register_activation_hook( __FILE__, array( 'YourAdditionalClass','on_activate_function') );
    register_activation_hook( __FILE__, array( $this, 'get_all_post_images' ) ); //function is in this file only

    register_activation_hook( __FILE__, array( 'YourAdditionalClass', 'send_image' ) );
    register_activation_hook( __FILE__,'create_table'); 
```

它不工作..插件激活的方法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:33:52.647

将您的包含更改为：

```
include_once('database.php');
include_once('ajax.php'); 
```

您可以创建一个在激活插件时运行的函数：

```
function run_at_activation(){
  create_table();
  get_all_post_images();
  send_image();
}
register_activation_hook( __FILE__, 'run_at_activation' ); 
```

# python - 使用 beautifulsoup 查找具有某种形式属性的所有标签

> ID：16162917
> 
> 赞同：1
> 
> 时间：2013-04-23T06:59:21.160
> 
> 标签：python, python-2.7, beautifulsoup

我需要找到所有内联注册了任何鼠标事件的标签，例如，它应该找到如下标签：

```
<div onmousedown="somefunc()"> Some text here </div> 
```

我可以使用 bs4 文档中给出的函数进行检查：

```
def reg_event(tag):
    return tag.has_key('onmousedown')
tags_with_mouse_event = soup.find_all(reg_event) 
```

但是检查多个需要很多 .has_key 与 or.. 有一些更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:29:46.477

您可以选择具有以下`on..`属性的所有标签：

```
soup.find_all(lambda tag: any(attr.startswith('on') for attr in tag.attrs.keys())) 
```

否则，`set`请确定您所追求的事件并执行以下操作：

```
events = {'onmousedown', 'onmouseup', 'onclick'} # etc...
soup.find_all(lambda tag: any(attr in events for attr in tag.attrs.keys())) 
```

# python - 反转列表中的元组

> ID：16162918
> 
> 赞同：1
> 
> 时间：2013-04-23T06:59:23.297
> 
> 标签：python, list

我有这个清单：

`[(3, 28), (25, 126), (25, 127), (26, 59)]`

我怎样才能把它变成这样：

`[(28, 3), (126, 25), (127, 25), (59, 26)]`

我只想反转元组中的内容

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:00:24.657

```
>>> lst = [(3, 28), (25, 126), (25, 127), (26, 59)]
>>> [i[::-1] for i in lst]
[(28, 3), (126, 25), (127, 25), (59, 26)] 
```

`[::-1]`使用[切片语法](https://stackoverflow.com/q/509211/1907098)来反转它之前的容器。请注意，这仅适用于支持切片语法的容器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T07:03:16.477

如果您知道元组的长度仅为 2：

```
[(b, a) for a, b in lst] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:00:30.843

使用步长为 -1 的切片

```
>>> [x[::-1] for x in [(3, 28), (25, 126), (25, 127), (26, 59)]]
[(28, 3), (126, 25), (127, 25), (59, 26)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:03:21.127

```
>>> L =  [(3, 28), (25, 126), (25, 127), (26, 59)]
>>> [(i[1], i[0]) for i in L] 
```

可能仅对两个元素**有用。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T07:05:19.577

有趣的选择

```
>>> L = [(3, 28), (25, 126), (25, 127), (26, 59)]
>>> zip(*zip(*L)[::-1])
[(28, 3), (126, 25), (127, 25), (59, 26)] 
```

或者对于一些邪恶的过早优化：

```
>>> from operator import itemgetter
>>> L = [(3, 28), (25, 126), (25, 127), (26, 59)]
>>> map(itemgetter(slice(None, None, -1)), L)
[(28, 3), (126, 25), (127, 25), (59, 26)] 
```

时间：

```
python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]" "[i[::-1] for i in L]"
1000000 loops, best of 3: 1.21 usec per loop   

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]" "zip(*zip(*L)[::-1])"
100000 loops, best of 3: 2.26 usec per loop   

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]; from operator import itemgetter;" "map(itemgetter(slice(None, None, -1)), L)"    
100000 loops, best of 3: 1.69 usec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100" "[i[::-1] for i in L]"
10000 loops, best of 3: 87.4 usec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100" "zip(*zip(*L)[::-1])"
10000 loops, best of 3: 67.1 usec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100;from operator import itemgetter;" "map(itemgetter(slice(None, None, -1)),
L)"
10000 loops, best of 3: 66.1 usec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100000" "[i[::-1] for i in L]"
10 loops, best of 3: 108 msec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100000" "zip(*zip(*L)[::-1])"
10 loops, best of 3: 109 msec per loop

python -m timeit -s "L = [(3, 28), (25, 126), (25, 127), (26, 59)
]*100000;from operator import itemgetter;" "map(itemgetter(slice(None, None, -1)
), L)"
10 loops, best of 3: 82.9 msec per loop 
```

# java - 将作用域 bean 自动装配/注入到控制器方法中

> ID：16162920
> 
> 赞同：4
> 
> 时间：2013-04-23T06:59:31.333
> 
> 标签：java, spring, spring-mvc, spring-3, autowired

春天 3.2。当我这样做时一切正常：

```
@Controller
public class MyController {
    @Inject
    Provider<MyBean> provider;

    @RequestMapping("/chart")
    public void getChart(HttpServletResponse resp) {
        provider.get();
    }
} 
```

但是当我将 MyBean 设置为 getChart 的参数时它不起作用：

```
@Controller
public class MyController {

    @RequestMapping("/chart")
    public void getChart(HttpServletResponse resp, MyBean myBean) {
        // No such method MyBean.<init>()
    }
} 
```

所以 Spring 尝试创建一个新的 myBean 实例，而不是使用已经绑定的实例。

配置：

```
@Configuration
public class Config {
    @Inject
    @Bean @Scope("request")
    public MyBean provideMyBean(MyOtherBean myOtherBean) {
         return myOtherBean.getMyBean();
    }
} 
```

如果我将控制器请求设置为范围，并将 @Inject/@Autowired 添加到`getChart()`. 然后它找不到 HttpServletResponse 实例 (NoSuchBeanDefinitionException)，尽管在请求范围内肯定有一个。

也许它只是没有在 Spring 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T04:32:21.470

通过创建自定义 HandlerMethodArgumentResolver 解决：

```
/**
 * Resolves beans defined in {@link Config},
 * because Spring doesn't want to do it implicitly.
 *
 * Makes possible to write something like
 * @RequestMapping(value="/chart", method=RequestMethod.GET)
 * getChart(HttpServletRequest req, MyBean myBean)
 *
 * and Spring will inject both arguments.
 */
public class MethodArgumentResolver implements HandlerMethodArgumentResolver, BeanFactoryAware {
    private final Set<Class> knownTypes = Config.getDeclaredTypes();

    private BeanFactory beanFactory;

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        this.beanFactory = beanFactory;
    }

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        Class<?> type = parameter.getParameterType();
        return knownTypes.contains(type);
    }

    @Override
    public Object resolveArgument(
            MethodParameter parameter,
            ModelAndViewContainer mavContainer,
            NativeWebRequest webRequest,
            WebDataBinderFactory binderFactory) throws Exception {
        Class<?> type = parameter.getParameterType();
        return beanFactory.getBean(type);
    }
} 
```

在配置中：

```
static Set<Class> getDeclaredTypes() {
    Set<Class> result = Sets.newHashSet();
    Method[] methods = Config.class.getDeclaredMethods();
    for (Method method : methods) {
        if (method.getAnnotation(Bean.class) != null) {
            result.add(method.getReturnType());
        }
    }
    return result;
} 
```

# xml - 访问静态变量返回空字符串

> ID：16162922
> 
> 赞同：0
> 
> 时间：2013-04-23T06:59:33.917
> 
> 标签：xml, actionscript-3, flash, load, static-members

Config.as 加载一个 XML 文件并将 XML 文件的内容存储在静态变量“xml”中。我试图在 Main.as 类中访问这个变量，但它返回一个空字符串。

我认为问题在于加载过程。我试图在 XML 文件实际加载之前访问该变量。有任何想法吗？

```
public static var xml:XML; // returns null
public static var xml:XML = new XML(); //returns ""

public class Config {

    public static var xml:XML = new XML();
    //public static var xml:XML;

    public function Config() {
        loadXML("config.xml");
    }

    private function loadXML(url:String):void{
        var loader:URLLoader = new URLLoader();
        loader.addEventListener(Event.COMPLETE, onCompleteXML);
        loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
        loader.load(new URLRequest(url));
    }

    private function onCompleteXML(e:Event):void{
        xml = new XML(e.target.data);
        trace("loaded");
    }

    private function onIOError(e:IOErrorEvent):void{
        trace("Load operation failed!" + e.text);
    }

    public static function getXML():XML{
        return Config.xml;
    }

public class Main extends MovieClip {
    public function Main () {
        new Config();

        trace(Config.xml);
        trace(Config.getXML());
    }
} 
```

编辑：

```
public class Main extends MovieClip
{
    public function Main ()
    {
        new Config();
    }

    public static function xmlHasLoaded():void
    {
        //now do something
        trace(Config.xml);
        newFunction();
    }

    public function newFunction():void{  //don't work
        trace("new function");        //public static function newFunction():void{} works
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:50:04.060

注意：要使所有 Config 变量保持私有，您需要创建 getter 和 setter 函数。

例如

在您的主要课程中：

```
public static var _instanceOfConfig:Config;

public class Main extends MovieClip {
public function Main () {
_instanceOfConfig = new Config();
}
} 
```

在您的 Config 类中：

```
private var xml:XML; 
```

//注意这不是一个静态函数，因为它需要访问 xml 类变量。

```
public function getXML():XML {
return xml;
}

public function setXML(newXML:XML):void {
xml = newXML;
} 
```

然后从您的其他课程中，您可以使用：

```
import Main;

trace(Main._instanceOfConfig.getXML().somenodename);

Main._instanceOfConfig.setXML(_thenewxml); 
```

**编辑。**这与声明静态函数有关。静态函数不能访问自身范围之外的变量或明显的方法。

尝试这个。

在您的主类中，添加：

```
public static var _instanceOfMain:Main; 
```

并在您的 Main 构造函数中

```
_instanceOfMain = this; 
```

并使此功能不是静态的。

```
public function xmlHasLoaded():void 
```

然后在您的 Config 类中：

更改 Main.xmlHasLoaded(); 到 Main._instanceOfMain.xmlHasLoaded();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:24:33.727

是的，您应该等待 xml 的加载完成，然后再尝试访问它。

```
public class Main extends MovieClip {
public function Main () {
new Config();
}
}

public function xmlHasLoaded():void {

//now do something
trace(Config.xml.somenodename);

}

public class Config {

public static var xml:XML;
private var loader:URLLoader;

public function Config() {
    loadXML("config.xml");
}

private function loadXML(url:String):void{
    loader = new URLLoader();
    loader.addEventListener(Event.COMPLETE, onCompleteXML);
    loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
    loader.load(new URLRequest(url));
}

private function onCompleteXML(e:Event):void{
    xml = new XML(e.target.data);
    trace("loaded"+xml);
    trace(xml.somenodename);

    loader.removeEventListener(Event.COMPLETE, onCompleteXML);
    loader.removeEventListener(IOErrorEvent.IO_ERROR, onIOError);
    loader = null;

    Main.xmlHasLoaded();

}

private function onIOError(e:IOErrorEvent):void{
    trace("Load operation failed!" + e.text);

    loader.removeEventListener(Event.COMPLETE, onCompleteXML);
    loader.removeEventListener(IOErrorEvent.IO_ERROR, onIOError);
    loader = null;
} 
```

# vb.net - 在运行时编译和调用代码

> ID：16162923
> 
> 赞同：0
> 
> 时间：2013-04-23T06:59:38.967
> 
> 标签：vb.net

前几天，我做了一个小项目：创建一个 IRC 机器人。目前，它可以工作（有一些我知道并正在努力修复的错误），但我想实现一个功能。外部模块。

基本上，我想要的是让最终用户能够编写自己的 Sub 并在消息到达时对其进行检查。

检查的每个 sub 都从以下内容开始：

```
Sub sampleSub(message As String) 
```

调用那段代码的是（另一个）子程序，它在消息到达时运行。简而言之，当消息到达时，会执行以下代码：

```
sampleSub(message) 
```

（其中 message = 要处理的传入消息）

有没有办法检查所有 .vb 文件的文件夹（例如 /modules），将所述文件编译为 .dll，然后将它们添加到上面要检查的子列表中？

（如果您不明白我对上述代码的含义，请参阅[https://github.com/xeon927/IRCBot/blob/master/main.vb](https://github.com/xeon927/IRCBot/blob/master/main.vb)第 213 和 337-348 行）

# javascript - 使用javascript单击时显示按钮类名

> ID：16162928
> 
> 赞同：1
> 
> 时间：2013-04-23T06:59:52.990
> 
> 标签：javascript, html, css

嗨，我有一个要求，我需要显示已使用单击的按钮的类名`java script`。有很多不同类名的按钮。有什么建议吗？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function myFunction()
{
var container = document.getElementById(id);
alert (container);
}
</script>
</head>
<body>

<button class="A" id="A" onclick="myFunction()">A</button>
<button class="B" id="B" onclick="myFunction()">B</button>
<button class="C" id="C" onclick="myFunction()">C</button>
<button class="D" id="D" onclick="myFunction()">D</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:01:43.220

您可以使用[dom 元素的](https://developer.mozilla.org/en-US/docs/DOM/element)[className](http://www.w3.org/TR/2000/WD-DOM-Level-2-HTML-20001113/html.html#ID-95362176) [属性](https://developer.mozilla.org/en-US/docs/DOM/element.className)来获取类名。

```
<button class="A" onclick="myFunction(this)">A</button>
<button class="B" onclick="myFunction(this)">B</button>
<button class="C" onclick="myFunction(this)">C</button>
<button class="D" onclick="myFunction(this)">D</button>

function myFunction(el) {
    alert (el.className);
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Fhh63/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:04:15.580

这就是你要找的吗？

```
 window.onclick = function(e) {
     console.log(e); // then e.srcElement.className has the class
 }​ 
```

[http://jsfiddle.net/M2Wvp/](http://jsfiddle.net/M2Wvp/)

[https://stackoverflow.com/a/3774720/1172872](https://stackoverflow.com/a/3774720/1172872)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:04:12.440

试试看

```
<button id="A" class="b" onclick="myFunction(this)">A</button> 
```

并访问类名

```
function myFunction(el)
{
    console.log(el.className);
} 
```

这是一个[演示小提琴](http://jsfiddle.net/Wfgdj/)

# c# - 检查本地计算机中的可用磁盘空间

> ID：16162930
> 
> 赞同：0
> 
> 时间：2013-04-23T06:59:54.573
> 
> 标签：c#

我想使用路径检查本地机器中的可用磁盘空间...这显示无效参数错误

```
 string pathroot = "C:\Program Files (x86)\Personal\movies "
    ManagementObject disk = new ManagementObject("win32_logicaldisk.deviceid=\"pathroot");
    disk.Get();
    string freespace = Convert.ToString(disk["FreeSpace"]);
    return freespace; 
```

谁能告诉我错误是什么？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:17:16.057

只需使用[`DriveInfo.TotalFreeSpace`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.totalfreespace.aspx)

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        DriveInfo[] allDrives = DriveInfo.GetDrives();

        foreach (DriveInfo d in allDrives)
        {
            Console.WriteLine("Drive {0}", d.Name);
            Console.WriteLine("  File type: {0}", d.DriveType);
            if (d.IsReady == true)
            {
                Console.WriteLine("  Volume label: {0}", d.VolumeLabel);
                Console.WriteLine("  File system: {0}", d.DriveFormat);
                Console.WriteLine(
                    "  Available space to current user:{0, 15} bytes", 
                    d.AvailableFreeSpace);

                Console.WriteLine(
                    "  Total available space:          {0, 15} bytes",
                    d.TotalFreeSpace);

                Console.WriteLine(
                    "  Total size of drive:            {0, 15} bytes ",
                    d.TotalSize);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:14:41.103

字符串：

```
"win32_logicaldisk.deviceid=\"pathroot" 
```

仅包含一个转义的双引号。我不是专家，但我希望它是：

```
"win32_logicaldisk.deviceid=\"pathroot\"" 
```

但是，您实际上仍然没有将 pathroot 的值包含到生成的 WMI 查询中。为此，您可以使用以下内容：

```
var query = string.Format("win32_logicaldisk.deviceid=\"{0}\"", pathroot);    
ManagementObject disk = new ManagementObject(query); 
```

我还没有测试过，但我认为这不起作用，因为“deviceid”需要一个“C：”形式的字符串，而不是完整路径。从完整路径中获取驱动器号，如下所示：

```
var driveLetter = System.IO.Path.GetPathRoot(pathroot);
var query = string.Format("win32_logicaldisk.deviceid=\"{0}\"", pathroot);    
ManagementObject disk = new ManagementObject(query); 
```

但是请注意，当您需要能够为 UNC（网络共享）路径查询驱动器空间时，此方法不起作用。

最后，带有路径的硬编码字符串不会被转义。例如，现在，\Program Files 中的 \P 被视为转义序列，而不是文字 \P。用 @ 标记字符串，使其变为：

```
string pathroot = @"C:\Program Files (x86)\Personal\movies" 
```

# c# - Gridview 内 Checkbox 的 RowCommand 事件的替代

> ID：16162934
> 
> 赞同：0
> 
> 时间：2013-04-23T07:00:01.880
> 
> 标签：c#, asp.net, gridview

我在复选框和文本框等控件中有一个gridview。对于 Checkbox，Gridview 的 RowCommand 事件中没有类似按钮的 CommandName 属性可供使用。每当复选框选中状态发生更改时，我需要在gridview之外启用一些按钮。有没有其他方法可以实现这一目标？

下面是我尝试过但按钮未启用的代码片段，

```
<asp:CheckBox ID="chkFee" runat="server" AutoPostBack="true" OnCheckedChanged="chkFee_Changed" />   

           protected void chkFee_Changed(object sender, EventArgs e)
            {
                BtnCalculate.Enabled = true;
                btnSubmit.Enabled = false;                
            } 
In Javascript is called before the this Checkedchanged event,
 function Calc(obj) {

            var BtnCalculate = document.getElementById("<%= BtnCalculate.ClientID %>");
               BtnCalculate.disabled = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:22:42.413

这是 .aspx 文件........

```
 <asp:CheckBox ID="chkBook" runat="server" 
    AutoPostBack="true" OnCheckedChanged="chkBook_Changed" /> 
```

这是cs文件…………

```
protected void chkAssignAll_CheckedChanged(object sender, EventArgs e)
            {

                GridViewRow gr = (GridViewRow) ((DataControlFieldCell) ((CheckBox) sender).Parent).Parent;
                CheckBox chk1 = (CheckBox) gr.FindControl("chkAssignSun");
                CheckBox chk2 = (CheckBox) gr.FindControl("chkAssignMon");

                chk1.Checked = ((CheckBox) sender).Checked;
                chk2.Checked = ((CheckBox)sender).Checked;                    
            } 
```

试试这个代码............

# string - 将一个字符串转换为另一个字符串的最低成本

> ID：16162936
> 
> 赞同：3
> 
> 时间：2013-04-23T07:00:11.710
> 
> 标签：string, algorithm

假设我们只想使用 3 种类型的操作将一个字符串 S1 转换为另一个字符串 S2：

```
-Insert(pos,char) (costs 8)
-Delete(pos) (costs 6)
-Replace(pos,char) (costs 8) 
```

找出将 S1 转换为 S2 的步骤序列，使得将 S1 转换为 S2 的成本最小。例如。'calculate' 到 'late' - 可能的操作是

```
Delete(0)
Delete(1)
Delete(2)
Delete(3)
Delete(4) 
```

上面的操作顺序花费 30。

我正在使用以下代码来执行此操作，但它没有给出正确的结果。使用的算法是 Levenshtein。

```
tuples=[]
ops=[]
s1=''
s2=''
def levenshtein(a,b):
    global s1,s2
    n, m = len(a), len(b)
    if n > m:
        a,b = b,a
        n,m = m,n
    s1,s2=a,b
    current = range(n+1)
    for i in range(0,len(current)):
        current[i]=current[i]*8
    tuples.append(current)
    for i in range(1,m+1):
        previous, current = current, [i*8]+[0]*n
        for j in range(1,n+1):
            add, delete = previous[j]+6, current[j-1]+8
            change = previous[j-1]
            if a[j-1] != b[i-1]:
                change=change+8
            current[j] = min(add, delete, change)
        tuples.append(current)
    return current[n]
print levenshtein('calculate','late') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:02:59.037

您可以使用[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:18:42.610

我会使用[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)来解决这个问题。使用一个二维数组`mem[n1][n2]`，其中`mem[i][j]`存储从 position 开始的第一个字符串的后缀转换为从 开始`i`的第二个字符串的后缀的最小成本`j`。

你的方法似乎很贪婪，而且我认为对于更大的例子来说它会非常慢。

# wpf - 当用户重新排序列时，我可以取回原始列顺序（单击按钮）吗？

> ID：16162939
> 
> 赞同：2
> 
> 时间：2013-04-23T07:00:15.853
> 
> 标签：wpf, wpfdatagrid

请看下面的代码。当我单击 Revert to org order 按钮时，应将列重新排序为原始数据网格顺序。有没有可能？请帮帮我...... //以下是我的代码

```
 <Window x:Class="GridTextBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        Title="MainWindow" Height="350" Width="525" WindowState="Maximized" Loaded="MainWindow_Loaded" Background="Gray">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width=".25*"/>

            <ColumnDefinition Width=".25*"/>
            <ColumnDefinition Width=".25*"/>
            <ColumnDefinition Width=".25*"/>
        </Grid.ColumnDefinitions>
        <DataGrid ColumnReordered="datagrid1_ColumnReordered"  GotFocus="datagrid1_GotFocus" LoadingRowDetails="datagrid1_LoadingRowDetails"  Grid.ColumnSpan="3" Background="Gray" Grid.Row="1" Height="auto" Name="datagrid1" AutoGenerateColumns="False" Width="440" VerticalAlignment="Center" SelectionChanged="datagrid1_SelectionChanged">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Empid">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Name="txtEmpid"   Text="{Binding Empid}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Empname">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Empname}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Empname}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Empaddress">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Empaddress}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="EmpCity">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding EmpCity}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Empstate">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding EmpState}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="EmpCountry">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding EmpCountry}"></TextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>           
            </DataGrid.Columns>

        </DataGrid>
        <Button Grid.Row="2" Grid.Column="2" Height="30" Content="Insert Employees" Click="Button_Click"></Button>
        <Button Grid.Row="2" Grid.Column="1" Height="30" Content="Revert to org order" Name="btn" Click="btn_Click"></Button>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:55:19.980

您可以在内存中保留一个小字典，并在单击按钮时使用每列的[DisplayIndex 属性来重置原始视图。](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.displayindex%28v=vs.95%29.aspx)

* * *

**编辑**：添加一个例子

XAML

```
<Grid>
   <Grid.RowDefinitions>
      <RowDefinition Height="281*" />
      <RowDefinition Height="30*" />
   </Grid.RowDefinitions>
   <DataGrid Name="datagrid1" ItemsSource="12345567" Loaded="datagrid1_Loaded">
      <DataGrid.Columns>
         <DataGridTextColumn Header="Col1" Binding="{Binding}" />
         <DataGridTextColumn Header="Col2" Binding="{Binding}" />
         <DataGridTextColumn Header="Col3" Binding="{Binding}" />
         <DataGridTextColumn Header="Col4" Binding="{Binding}" />
         <DataGridTextColumn Header="Col5" Binding="{Binding}" />
      </DataGrid.Columns>
   </DataGrid>
   <Button Grid.Row="1" Content="Reorder" Click="Button_Click"/>
</Grid> 
```

在你的代码后面：

```
private Dictionary<int, string> originalOrder;
private void datagrid1_Loaded(object sender, RoutedEventArgs e)
{
   if (originalOrder == null) originalOrder = new Dictionary<int, string>();
   //I will save the header content as a string, 
   //but you can save anything you want to identify each column
   datagrid1.Columns.ToList().ForEach(c => originalOrder.Add(c.DisplayIndex, c.Header.ToString()));
}

private void Button_Click(object sender, RoutedEventArgs e)
{
   originalOrder.ToList().ForEach(k =>
   {
    datagrid1.Columns.FirstOrDefault(c => c.Header.ToString() == k.Value).DisplayIndex = k.Key;
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:30:49.460

```
 //This is my code behind file for the above xaml
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Data.SqlClient;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;

    namespace GridTextBox
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    /// 

    //private Dictionary<int, string> orde=new Dictionary<int, string>() ;
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }

        protected void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            try
            {
                Employee emp = new Employee();
                DataTable dt = emp.GetEmployees();
                datagrid1.ItemsSource = dt.DefaultView;

         }
            catch (Exception ex)
            {

                throw ex;
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            InsertEmployees ie=new InsertEmployees();
            ie.Show();
        }

        private void datagrid1_GotFocus(object sender, RoutedEventArgs e)
        {

        }

        private void datagrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

        }

         private void datagrid1_LoadingRowDetails(object sender, DataGridRowDetailsEventArgs e)
        {

            var txtbox = GetTemplateChild("txtEmpid") as TextBox;
            txtbox.Text = "hiiiii";

        }

         private void datagrid1_ColumnReordered(object sender, DataGridColumnEventArgs e)
         {

         }

         //declare here your dictionary
         private Dictionary<int, string> originalOrder;

         private void datagrid1_Loaded(object sender, RoutedEventArgs e)
         {
           if (originalOrder == null) originalOrder = new Dictionary<int, string>();

           datagrid1.Columns.ToList().ForEach(c => originalOrder.Add(c.DisplayIndex, c.Header.ToString()));
         }

         private void btn_Click(object sender, RoutedEventArgs e)
         {

          originalOrder.ToList().ForEach(k => 
          {            
          datagrid1.Columns.FirstOrDefault(c => c.Header.ToString() == k.Value).DisplayIndex = k.Key;
          });
         }

    }
} 
```

# ios - 获取ios账户信息

> ID：16162940
> 
> 赞同：1
> 
> 时间：2013-04-23T07:00:19.963
> 
> 标签：ios, account, user-accounts

我正在尝试在我的 iOS 应用中获取帐户信息。例如，如果我在 Accounts 中保存了 google 帐户，我想在我的应用程序中获取有关它的信息。这是可能的，如果是的话。

马尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:12:51.253

如果您的意思是要从设备上已设置的电子邮件帐户中访问帐户信息，那么恐怕您不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:17:48.067

Deepesh 关于无法访问用户的帐户信息是正确的，但是[AddressBook](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/)、[AddressBookUI](http://developer.apple.com/library/ios/documentation/AddressBookUI/Reference/AddressBookUI_Framework/_index.html#//apple_ref/doc/uid/TP40007082)和[EventKit](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html) APIS 将允许您访问这些帐户提供的用户数据。

# visual-studio - 同一个 Visual Studio 2010 中的不同格式按钮

> ID：16162944
> 
> 赞同：0
> 
> 时间：2013-04-23T07:00:32.353
> 
> 标签：visual-studio

我在从同一张 DVD 安装的两台机器上安装了 Visual Studio 2010。

两个工作室中的“HTML 源代码编辑”面板都有一个格式化按钮，但这不是同一个按钮，尽管它的图标看起来很相似。

对于一个 Studio，它是一个“格式化整个文档。（Ctrl+K，Ctrl+D）”按钮，对于另一个 -“格式化当前选定的文本。（Ctrl+K，Ctrl+F）”。

如果在这两种情况下都没有安装第三方插件并且没有自定义按钮，怎么会出现这种差异？

可能有一些设置可以控制此按钮的行为吗？

我也记得两份 VS2005 和 VS2008 之间的差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:11:13.670

您使用的设置会影响默认视图、按​​钮和键绑定。

[视觉工作室设置](http://msdn.microsoft.com/en-gb/library/zbhkx167%28v=vs.80%29.aspx)：

> 首次启动 Visual Studio 时，您需要选择一个设置集合，其中包含旨在符合您的开发习惯的预定义设置。如果您升级到另一个版本的 Visual Studio，您还可以选择使用“我的以前的设置”选项应用其他版本的设置。

和：

> 设置是对 IDE 的自定义，例如窗口布局、编辑器默认设置和可用的对话框选项，您可以保存、导出、导入或重置以使 IDE 更易于使用。
> 
> 您的活动设置由两部分组成：您第一次启动 Visual Studio 时选择的已安装 .vssettings 文件中的预定义自定义以及您所做的任何后续 IDE 自定义。

# eclipse-rcp - 如何修复窗口大小 Eclipse RCP？

> ID：16162945
> 
> 赞同：1
> 
> 时间：2013-04-23T07:00:40.597
> 
> 标签：eclipse-rcp

我想设置通过 Eclipse RCP 创建的窗口的固定大小。如何实现？

```
parent.getShell();
body = form.getBody();
body.setBounds(500, 500, 350, 200); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:31:21.560

您可以在类的`preWindowOpen()`方法中设置应用程序窗口的大小`ApplicationWorkbenchWindowAdvisor`

```
public void preWindowOpen() {
    IWorkbenchWindowConfigurer configurer = getWindowConfigurer();
    configurer.setInitialSize(new Point(500, 350));
} 
```

# facebook - 检测帖子发布日期

> ID：16162951
> 
> 赞同：0
> 
> 时间：2013-04-23T07:00:53.633
> 
> 标签：facebook, facebook-graph-api

我想获得显示为墙上发布日期的实际日期。

Facebook 允许页面管理员操作帖子的发布日期。

问题是我无法从任何领域得到这个日期。

也许你知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:51:40.937

[我可以在http://developers.facebook.com/tools/explorer/?method=GET&path=6815841748%2Ffeed](http://developers.facebook.com/tools/explorer/?method=GET&path=6815841748%2Ffeed)上获得“created_time”和“updated_time”字段

![在此处输入图像描述](https://i.stack.imgur.com/IdNZo.png)

# php - 多维数组排序

> ID：16162954
> 
> 赞同：-1
> 
> 时间：2013-04-23T07:01:01.070
> 
> 标签：php, arrays, sorting

我得到了这个数组：

```
Array
(
    [0] => Array
        (
            [_complex] => 1
            [_attributes] => Array
                (
                    [id] => 453
                )

            [_data] => Array
                (
                    [id] => 453
                    [nid] => lastname
                 )
         )
   [1] => Array
        (
            [_complex] => 1
            [_attributes] => Array
                (
                    [id] => 455
                )

            [_data] => Array
                (
                    [id] => 455
                    [nid] => lastname
                 )
         ) 
```

如何排序`[_data][nid]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:08:39.000

```
 uasort(
      $array,
      function ($a,$b) {
           return strcmp($a['_data']['nid'],$b['_data']['nid']);
      }
 ); 
```

[php.net: uasort()](http://www.php.net/manual/en/function.uasort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:09:17.580

数组中的 ID 是否始终相同？那你为什么不把它转换成这样：

```
Array
(
    [0] => Array
        (
            [_complex] => 1
            [id] => 453
            [nid] => lastname
        )

    [1] => Array
        (
            [_complex] => 1
            [id] => 455
            [nid] => lastname
        )
) 
```

或者有什么理由不这样做？这将更容易分类并且处理起来更舒适。当你转换它时，你可以使用这个功能：

```
aasort($your_Array, "nid");

function aasort (&$array, $key) {
        $sorter=array();
        $ret=array();
        reset($array);

        foreach ($array as $ii => $va) {
            $sorter[$ii]=$va[$key];
        }
        asort($sorter);

        foreach ($sorter as $ii => $va) {
            $ret[$ii]=$array[$ii];
        }

        $array=$ret;
    } 
```

# javascript - dojo1.8：从函数更新 ComboSelect 的 searchAttr

> ID：16162956
> 
> 赞同：0
> 
> 时间：2013-04-23T07:01:08.640
> 
> 标签：javascript, dojo

您好我正在尝试从对象创建中执行功能。我不确定这是否是正确的方法。

我创建了选择组合框，但因为每个数据库都有不同的批处理字段，所以我创建了一个函数来选择正确的“批处理并稍后更新 searchAttr，以便可以填充选择”。

请多多指教。

```
function whichbatch(dbA)
    switch (dbA)
     {
    case 'testdata1970_05': 'batch';
    break;  
    case 'testdata1970_10': 'batch_no';
    break;
    case 'testdata2060_03': 'batch';
    break;
    case 'dbProdigy':'Batch';
    break;
    case 'dbProdigy_MK6N':'Batch'
    break;
}

var selBatch = new ComboBox 
(
    {id:'ID_selBatch',
    value:'',
    placeHolder:'Select...',
    style:{width:'200px'},
    },'node_selBatch'
);

on(selTest, 'change', function(valueCard)
{
    var selectedTest = this.get('displayedValue');
    var selBatch = registry.byId('ID_selBatch');
    selBatch.searchAttr:(whichbatch(registry.byId('ID_selPCBA').    
    console.debug('Connecting to gatherbatches.php ...');
    request.post('gatherbatches.php',
    {  data:{nameDB:registry.byId('ID_selPCBA').value, nameCard : valueCard},
            handleAs: "json"}).then
    (
function(response)
{
    var memoStore2 = new Memory({data:response});
    selBatch.set('store', memoStore2);
    selBatch.set('value','');
    console.debug('List of batches per Test is completed! Good OK! ');
},

function(error)
 {
    alert("Batch's Error:"+error);
    console.debug('Problem: Listing batches per Test in select Test is BAD!');
 });
selBatch.startup();
}); 
```

# jquery - 需要支持 Jquery 1.3.2 的 JQuery 颜色选择器

> ID：16162967
> 
> 赞同：0
> 
> 时间：2013-04-23T07:01:47.157
> 
> 标签：jquery, jquery-ui, jquery-plugins

我试图在谷歌上找到，但 1.3.2 不支持我需要支持 Jquery 1.3.2 的 Jquery 颜色选择器

如果有人可以提供支持 1.3.2 的颜色选择器

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:05:35.510

以下是一些颜色选择器：

*   [http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)
*   [http://bgrins.github.io/spectrum/](http://bgrins.github.io/spectrum/)
*   [http://wiki.jqueryui.com/w/page/12137750/ColorPicker](http://wiki.jqueryui.com/w/page/12137750/ColorPicker)
*   [http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/) **<这个看起来不错**
*   [http://www.digitalmagicpro.com/jPicker/](http://www.digitalmagicpro.com/jPicker/)

*编辑：*这是一个适用于 1.3.2 的颜色选择器：[http ://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)

# php - 多个提交按钮

> ID：16162972
> 
> 赞同：4
> 
> 时间：2013-04-23T07:02:09.930
> 
> 标签：php, button, submit

我在使用 HTML 和 PHP 中的多个提交按钮时遇到问题，我尝试为基于 Web 的计算器编写 GUI 代码。这真的很容易，但是php中的函数并不那么容易。所以我有这个带有 6 个提交按钮的简单 GUI：

```
<?php 
$output= isset($_POST['output']) ? $_POST['output'] : "";

function calc(){
//calculate...
}

?>
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<title>Calc</title>
<style type="text/css">
 .bwidth {
      width: 100%;
}
</style>
</head>
<body>
    <form action="calc.php">
        <h1>
            <u>MY Own Calculator</u>
        </h1>
        <table border="3px" type="box" cellspacing="5px" width="250px">
            <tr style="height: 24px;">
                <td colspan="3"><input type="text" name="<?php $ausgabe ?>"
                    value="0" style="width: 98%;" /></td>
            </tr>
            <tr>
                <td><input class="bwidth" type="submit" name="1" value="1" /></td>
                <td><input class="bwidth" type="submit" name="2" value="2" /></td>
                <td><input class="bwidth" type="submit" name="3" value="3" /></td>

            </tr>
            <tr>
                <td><input class="bwidth" type="submit" name="minus" value="-" /></td>
                <td><input class="bwidth" type="submit" name="plus" value="+" /></td>
                <td><input class="bwidth" type="submit" name="enter"
                    value="=" /></td>
            </tr>
        </table>
    </form>
</body> 
```

现在我如何区分这些提交按钮？甚至可以有多个提交按钮？我尝试将按钮按值分开......但它没有用。

并且 sb 知道如何将值添加到文本字段中的现有值？所以我可以按下按钮1，它会在文本字段中写1，当我按下按钮2时，它会添加数字2，所以它会是“12”？

感谢所有建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:07:28.720

**在你的 php**

```
if(isset($_POST['minus'])) {
  // selected minus
}

if(isset($_POST['plus'])) {
  // selected plus
}

if(isset($_POST['enter'])) {
  // selected enter
} 
```

当您单击一个按钮时，它将与您的帖子数据一起发送到服务器。您在 $_POST 数组中找到的所有发布数据。

如果您想查看 $_POST 数组中的内容，可以运行以下小代码：

```
<?php
   echo '<pre>' . print_r($_POST, true) . '</pre>';
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:09:55.427

您可以使用 JavaScript 执行此操作，首先您必须将您的更改`<form>`为：

```
<form id="form1" name="form1" method="post" action="calc.php"> 
```

然后 JavaScript 和按钮应该如下所示：

```
<script>
function submitForm(action)
{
    document.getElementById('form1').action = action;
    document.getElementById('form1').submit();
}
</script>

...

<input type="button" onclick="submitForm('page1.php')" value="submit 1" />
<input type="button" onclick="submitForm('page2.php')" value="submit 2" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T07:11:17.790

您可以尝试使用 验证设置了哪个按钮`isset($_GET['input_name'])`。

或者您可以命名不同的输入：

```
<form action="calc.php">
    <h1>
        <u>MY Own Calculator</u>
    </h1>
    <table border="3px" type="box" cellspacing="5px" width="250px">
        <tr style="height: 24px;">
            <td colspan="3"><input type="text" name="<?php $ausgabe ?>"
                value="0" style="width: 98%;" /></td>
        </tr>
        <tr>
            <td><input class="bwidth" type="submit" name="digit" value="1" /></td>
            <td><input class="bwidth" type="submit" name="digit" value="2" /></td>
            <td><input class="bwidth" type="submit" name="digit" value="3" /></td>

        </tr>
        <tr>
            <td><input class="bwidth" type="submit" name="operation" value="-" /></td>
            <td><input class="bwidth" type="submit" name="operation" value="+" /></td>
            <td><input class="bwidth" type="submit" name="operation" value="=" /></td>
        </tr>
    </table>
</form> 
```

在你的功能中：

```
function calc(){
    $op = isset($_GET['operation']) ? $_GET['operation'] : null;
    switch ($op) {
       case "+": .... ; break;
       case "-": .... ; break;
       case "=": .... ; break;
       default: "not supported";
    }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T07:15:42.333

也许您可以为所有提交按钮使用一个名称。

```
<input type="submit" name="operator" value="+" />
<input type="submit" name="operator" value="-" />
<input type="submit" name="operator" value="=" /> 
```

你可以在php中获取值

```
<?php
    $opr = $_GET['operator'];
    if($opr == "+") {
         //do something
    } else if($opr == "-") {
         //do something
    } else if($opr == "=") {
         //do something
    }
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-23T07:06:16.863

当您将表格提交给`calc.php`

内部`calc.php`检查收到了哪个表单元素。

```
if(isset($_REQUEST['minus']))
{
    // minus is clicked
}
else if(isset($_REQUEST['plus']))
{
    // plus is clicked
}
else if(isset($_REQUEST['enter']))
{
    // enter is clicked
} 
```

单击的按钮将与表单一起发送，而不是其他...

希望能帮助到你...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-23T07:11:31.853

是的，一个表单中可以有 n 个提交按钮。

在与提交按钮相同的行中指定操作页面。

```
<form action="actionpage.php">
<input type="submit" value="1">
<input type="submit" value="2" formaction="postPage.php">
</form> 
```

更新 - 如果在 IE 中出现问题

```
<form>
<input type="submit" value="1" onclick="document.formName.action='abc.php';">
<input type="submit" value="2" onclick="document.formName.action='xyz.php';">
</form> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T07:07:03.033

您可以使用 JavaScript 提交表单。单击按钮后，您调用 JS 函数，该函数通过推送操作设置一些隐藏元素，然后将表单提交到服务器。

# javascript - 嵌入列表作为字符串 javascript 的一部分

> ID：16162973
> 
> 赞同：0
> 
> 时间：2013-04-23T07:02:10.613
> 
> 标签：javascript, html

我在 javascript 中创建一个 html 元素，对于 onclick 属性，我必须发送一个列表作为参数。

```
var STOREID_LIST=["TEST","TEST"];

document.getElementById("check").innerHTML="<input type='checkbox' id='store_checkmain' onclick='check(["+STOREID_LIST+"],\"store_checkmain\");'/>"; 
```

在检查函数中，我正在获取 Html 对象元素的列表，而不是预期的列表。请

帮我解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:10:18.007

为什么不删除该`onClick`属性并在复选框上添加一个单击侦听器呢？

```
var STOREID_LIST = ["TEST", "TEST"];
document.getElementById("check").innerHTML="<input type='checkbox' id='store_checkmain' />"

document.getElementById("store_checkmain").addEventListener("click", function() {
  check(STOREID_LIST, "store_checkmain");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:11:56.437

使用 jQuery 或类似的东西会更优雅：

```
var myArray = ["test", "test"];

var input = $('<input></input>');
input.click(function() {
    check(myArray, "store_checkmain");
});

$('#check').append(input); 
```

但是，您也可以通过使用“普通” dom 操作来实现相同的目的。

# variables - 在 extjs 中如何在视图上显示变量？

> ID：16162974
> 
> 赞同：2
> 
> 时间：2013-04-23T07:02:15.893
> 
> 标签：variables, view, extjs4

我在 extjs4 工作。我正在研究天气模块。我在控制器代码的帮助下检索天气信息 -

```
getWeather : function() {
        var getdata=this.getipaddress();
        console.log(getdata);
        var city = "pune";
        var urllink="http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/" + city + ".json";
        console.log(urllink);
        Ext.require('Ext.data.JsonP', function() {
            Ext.data.JsonP.request({
                //url : "http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json",
                url:urllink,
                success : function(parsed_json) {
                    var location = parsed_json['location']['city'];
                    var temp_c = parsed_json['current_observation']['temperature_string'];
                    alert("Current temperature in " + location + " is: "
                            + temp_c);
                            return temp_c;

                var viewObj=Ext.create('Balaee.view.sn.user.weather');
                var viewObj.show();
                }
            });
        });
    }, 
```

现在我想在视图中显示这个 temp_c 变量的值和城市。我直接拥有这两个变量。我没有任何与之相关的商店。假设我的看法是-

```
Ext.define('Balaee.view.sn.user.weather',
{
        extend:'Ext.view.View',
        id:'weatherId',
        alias:'widget.weatherView',
        config:
        {
            tpl:'<tpl for=".">'+
                '<div id="main">'+
                '</br>'+                    
                '<b>City :- </b> {city} </br>'+
                '<b>Temp:- </b> {temp_c} </br>'+

                '</div>'+
                '</tpl>',
            itemSelector:'div.main',} 
```

}); 但上面的视图没有显示任何值。那么如何在视图中显示这些变量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:33:01.883

您可以使用 Ext.container.Container 渲染模板（如果您没有商店，则不需要 Ext.view.View）这是您案例的示例：

```
Ext.define('Balaee.view.sn.user.weather',{
   extends:'Ext.container.Container',
   alias:'widget.weatherView',
   tpl:Ext.create('Ext.XTemplate',
        '<div id="main"></br>',
          '<b>City :- </b> {city} </br>',
          '<b>Temp:- </b> {temp_c} </br>',
        '</div>')
}); 
```

然后 Ajax 响应可以像下面这样调用它：

```
var viewObj=Ext.create('Balaee.view.sn.user.weather',{
   renderTo:'IdOfYourRenderingArea' // Or it can be Ext.getBody()
});
viewObj.update({city:location, temp_c:temp_c}); 
```

如果你想用数据视图渲染，那么你需要存储和模型。

# iphone - 如何创建应用程序作为后台守护程序工作，没有越狱 iPhone 的前端

> ID：16162975
> 
> 赞同：0
> 
> 时间：2013-04-23T07:02:19.013
> 
> 标签：iphone, ios6, jailbreak

我需要使用 ios6 为越狱 iPhone 创建一个应用程序。问题是它应该始终像没有 GUI 的“服务”一样在后台工作。我已经看到了一些用于创建恶魔的教程（Chris Alvares 守护程序），但所有这些都是针对 ios4 的，并且使用工具链是否有任何更新的方法来激活它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:11:06.047

看看 Nate 对这个问题的回答：[在越狱设备上本地拉取通知](https://stackoverflow.com/questions/15025174/pull-notification-locally-on-jailbroken-device)

它对构建一个守护进程有很好的描述。

# .net - 录制高质量的声音？

> ID：16162976
> 
> 赞同：0
> 
> 时间：2013-04-23T07:02:19.913
> 
> 标签：.net, vb.net, audio, audio-recording

如何以良好的质量从我的电脑录制声音？（Microsoft Wav 文件 16 位 44 khz 或实时编码 mp3）。

如果我可以使用免费的文档库来录制音频，这对我来说不是问题，但我找不到任何内容。

我在 Google 上找到了**mciSendString**，但这就像从 90 年代的手机录制音频质量......：

```
mciSendString("open new Type waveaudio Alias recsound", "", 0, 0)
mciSendString("record recsound", "", 0, 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:20:10.807

I've used [http://www.portaudio.com/](http://www.portaudio.com/) and been happy with it. Plus, it's cross-platform and you can specify bit-depth, sample-rate, etc. when opening devices for recording. For exporting audio data to files, I like to use [http://www.mega-nerd.com/libsndfile/](http://www.mega-nerd.com/libsndfile/).

If you're strictly using Windows, however, you might just use the waveIn* functions (see here to get started: [http://msdn.microsoft.com/en-us/library/windows/desktop/dd743847(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743847(v=vs.85).aspx))

Note that theses solutions are not necessarily .NET specific, but utilize native code.

# javascript - Jquery在图像上获得零宽度

> ID：16162980
> 
> 赞同：0
> 
> 时间：2013-04-23T07:02:50.927
> 
> 标签：javascript, jquery

我在使用 jquery width(); 时遇到问题。

html标记：

```
<img height="300px" src="http://localhost/portfolio/wp-content/uploads/Alone.jpg" alt="Alone" title="Alone" /> 
```

查询：

```
var slide_width = 0;
    $("#barely_slide article img").each(function(){
        console.dir($(this).width());
    });
    console.dir(slide_width); 
```

看着`$(this)`我看到 clientWidth 返回正确的值，offsetWidth 也是如此，但这些没有等效的 jquery 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:05:09.000

用这个包装你的函数调用：

```
(function($) {

  $(document).ready(function() {
    //Here you can manupilate the dom. Images are not loaded yet.
  });

  $(window).load(function() {
    //Here you can check for image widths.
  });

})(jQuery); 
```

您可以使用以下方法检查客户端宽度：

```
$(window).width(); 
```

并为您的文档宽度：

```
$(document).width(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:05:12.553

获取图片加载后的宽度：

```
$("#barely_slide article").on('load', 'img', function(){
    console.dir($(this).width());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:08:26.260

我认为你应该确保你的图像是由浏览器加载的，你可以尝试执行以下操作：

```
 $(document).ready(function(){ 
     var slide_width = 0;
     $("#barely_slide article").find("img").each(function(){
          console.dir($(this).width());
     });
     console.dir(slide_width);
 }); 
```

# javascript - 从本地存储中的对象中删除数组

> ID：16162981
> 
> 赞同：0
> 
> 时间：2013-04-23T07:02:52.590
> 
> 标签：javascript, jquery, arrays, object

当我单击一个按钮时，我使用参数“id”加载函数“DeleteFromlocalStorage”。这是我的函数“DeleteFromlocalStorage”：

```
 function DeleteSessionFromLocalStorage(data)
    {
        var id_session = data;

        a = localStorage.getItem('session');

        alert(a);

    } 
```

我`alert(a);`给了我这个输出：

> {"21114":{"id":"21114","external_id":"","sessiongroupid":"1844","eventid":"5588","order":"0","name":" localStorage HTML5 Session","description":"localstorage","starttime":"2013-04-23 12:00:00","endtime":"2013-04-23 13:30:00","speaker" :"","location":"","mapid":"0","xpos":"0.000000","ypos":"0.000000","maptype":"plan","imageurl":"", "presentation":"","organizer":"0","twitter":"","allowAddToFavorites":"0","allowAddToAgenda":"0","votes":"0","url":"","venueid":"0"}, "21115:{"id":"21115","external_id":"","sessiongroupid":"1845" ,"eventid":"5588","order":"0","name":"tweede","description":"tweede","starttime":"2013-04-03 00:00:00", "endtime":"2013-04-04 00:00:00","speaker":"","location":"","mapid":"0","xpos":"0.000000","ypos" :"0.000000","maptype":"plan","imageurl":"","presentation":"","organizer":"0","twitter":"","allowAddToFavorites":"0","allowAddToAgenda":"0","votes":"0","url":"","venueid":"0"},"21118":{"id":"21118 ","external_id":"","sessiongroupid":"1848","eventid":"5588","order":"0","name":"javascript session","description":"关于 javascript 的会话","starttime":"2013-05-15 12:00:00","endtime":"2013-05-15 12:30:00","speaker":"","location":"waregem" ,"mapid":"0","xpos":"0.000000","ypos":"0.000000","maptype":"plan","imageurl":"","演示文稿":"","组织者":"0","twitter":"","allowAddToFavorites":"0","allowAddToAgenda":"0","votes":"0","url":" ","venueid":"0"}}

如您所见，我有一个 json 字符串。关键始终是 id。现在我想删除带有 id = 参数 id 的 json。

我将不得不获取对象并删除子对象并在我的 localStorage 中恢复对象。有人知道我该怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:41:55.963

```
for(obj in json) {       
            if(json[obj].id == id_session)
            {
                delete json[obj];

            }
        }

        localStorage.setItem('session', JSON.stringify(json)); 
```

获取对象，检查每个对象的每个 id 并删除 id = "id_session" 的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:10:50.870

您的代码示例对我来说就像一个 javascript 对象。在这种情况下，您可以使用“删除”关键字。这里很好的讨论：

[如何从 JavaScript 对象中删除属性？](https://stackoverflow.com/questions/208105/how-to-remove-a-property-from-a-javascript-object)

所以像

删除 ["21114"]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:07:39.260

我可能错了，但这是你想要做的：

任何一个`localStorage.removeItem(key);`

或者，如果在 localStorage JSON 项中存在某些内容，则执行以下操作：

```
 function DeleteSessionFromLocalStorage(data)
{
    var id_session = data;
    //Not sure but you might need to do JSON.parse(a) after to get it
    a = localStorage.getItem('session');

    delete a.data
    alert(a);

} 
```

# c# - RibbonDropDown 丢失物品

> ID：16162983
> 
> 赞同：4
> 
> 时间：2013-04-23T07:03:01.833
> 
> 标签：c#, outlook, outlook-addin, ribbon, office-2010

我正在将项目添加到**新电子邮件检查**器在运行时`RibbonDropDown`使用的项目。我在启动时添加项目并按需刷新列表（*当用户按下按钮时*）

 ***```
public void RefreshListNames()
{
    Logger.Log("Refresh Mail Lists");

    Globals.Ribbons.Ribbon1.rddListNames.Items.Clear();
    foreach (KeyValuePair<Guid, string> kvp in _dda.GetMarketingListNames())
    {
        Microsoft.Office.Tools.Ribbon.RibbonDropDownItem dd = 
            Globals.Factory.GetRibbonFactory().CreateRibbonDropDownItem();

        dd.Tag = kvp.Key;
        dd.Label = kvp.Value;

        Logger.Log("Adding " + dd.Label);

        Globals.Ribbons.Ribbon1.rddListNames.Items.Add(dd);

    }

    Globals.Ribbons.Ribbon1.rddListNames.ResumeLayout();
} 
```

**注：** `rddListNames`是一个`RibbonDropDown`

该方法在方法中被调用`ThisAddIn_Startup`并在启动时正确填充。但是，任何新的“邮件”窗口都会以空白下拉列表结束 - 没有项目。即使刷新列表也不会再次添加项目。

我添加了一些日志记录：它显示当按下“刷新按钮”时该方法正在运行：

```
23/04/2013 14:36:43 - Refresh Mail Lists 
23/04/2013 14:36:45 - Adding Marketing List - Dynamic 
23/04/2013 14:36:45 - Adding Marketing List - Bs 
23/04/2013 14:36:45 - Adding Marketing List - As 
```

为什么下拉菜单总是丢失物品？即使我明确地刷新它们，它们为什么不回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:28:48.327

如果对**Ribbon UI**进行控件修改，则需要通过或使**控件缓存**无效。这将触发功能区元素的重绘。[`IRibbonControl.Invalidate()`](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribbonui.invalidate%28v=office.14%29.aspx)[`IRibbonControl.InvalidateControl`](http://msdn.microsoft.com/en-us/library/office/aa433553%28v=office.12%29.aspx)

```
Globals.Ribbons.Ribbon1.Invalidate();
// or...
Globals.Ribbons.Ribbon1.InvalidateControl("ddMarketingList"); 
```***

# scala - 有什么方法可以正确键入在运行时使用 ASM 生成的 Scala 类？

> ID：16162991
> 
> 赞同：0
> 
> 时间：2013-04-23T07:03:23.403
> 
> 标签：scala, reflection, compiler-construction, type-conversion, metaprogramming

菜鸟在这里，我想扩展类，获取类文字，将其用作类型参数，或强制转换为它。

目前我可以实例化我的 ASM 生成的类并通过反射调用它的方法，但是该类的类型错误。

是的，编译器直到运行时才知道类，但是在这种情况下，*我*对类没有什么不知道的，但是我怎样才能说服编译器呢？

我已经有了解决方法，但我仍然很好奇这种“类型欺骗”会涉及什么（反射？AST 操作？破解类型检查器？）。

我用“Java”标签问了一个类似的问题，发布到“Scala”，希望 scala 编译器目前是一个更热门的话题。非常感谢您的意见，-朱利安

--下面需要类类型的例子--

没有字节码生成：

```
 class B {
      val hello = "Hello B!"
    }

    object HelloScala {
      def main(args: Array[String]): Unit = {
        val b = new B
        println(b.hello)
      }
    } 
```

使用字节码生成：

HelloScala.scala：

```
 object HelloScala {
      def main(args: Array[String]): Unit = {
        val b = DumpLoader.loadClass("B", BDump.dump())
        //println(b.hello) //error: Value hello is not a member of Class[?0]
        val b_ = b.getDeclaredConstructor().newInstance()
        //println(b_.hello) //error: Value hello is not a member of Any
      }

   } 
```

BDump.java 字节码生成代码：

```
 import java.util.*;
        import org.objectweb.asm.*;
        //import org.objectweb.asm.attrs.*;
        public class BDump implements Opcodes {

        public static byte[] dump () throws Exception {

        ClassWriter cw = new ClassWriter(0);
        FieldVisitor fv;
        MethodVisitor mv;
        AnnotationVisitor av0;

        cw.visit(V1_6, ACC_PUBLIC + ACC_SUPER, "B", null, "java/lang/Object", null);

        {
        av0 = cw.visitAnnotation("Lscala/reflect/ScalaSignature;", true);
        av0.visit("bytes", "\u0006\u0001y1A!\u0001\u0002\u0001\u000b\u0009\u0009!IC\u0001\u0004\u0003\u001daT-\u001c9usz\u001a\u0001a\u0005\u0002\u0001\rA\u0011qAC\u0007\u0002\u0011)\u0009\u0011\"A\u0003tG\u0006d\u0017-\u0003\u0002\u000c\u0011\u00091\u0011I\\=SK\u001aDQ!\u0004\u0001\u0005\u00029\u0009a\u0001P5oSRtD#A\u0008\u0011\u0005A\u0001Q\"\u0001\u0002\u0009\u000fI\u0001!\u0019!C\u0001'\u0005)\u0001.\u001a7m_V\u0009A\u0003\u0005\u0002\u001655\u0009aC\u0003\u0002\u00181\u0005!A.\u00198h\u0015\u0005I\u0012\u0001\u00026bm\u0006L!a\u0007\u000c\u0003\rM#(/\u001b8h\u0011\u0019i\u0002\u0001)A\u0005)\u00051\u0001.\u001a7m_\u0002\u0002");
        av0.visitEnd();
        }
        // ATTRIBUTE ScalaSig
        {
        fv = cw.visitField(ACC_PRIVATE + ACC_FINAL, "hello", "Ljava/lang/String;", null, null);
        fv.visitEnd();
        }
        {
        mv = cw.visitMethod(ACC_PUBLIC, "hello", "()Ljava/lang/String;", null, null);
        mv.visitCode();
        mv.visitVarInsn(ALOAD, 0);
        mv.visitFieldInsn(GETFIELD, "B", "hello", "Ljava/lang/String;");
        mv.visitInsn(ARETURN);
        mv.visitMaxs(1, 1);
        mv.visitEnd();
        }
        {
        mv = cw.visitMethod(ACC_PUBLIC, "<init>", "()V", null, null);
        mv.visitCode();
        mv.visitVarInsn(ALOAD, 0);
        mv.visitMethodInsn(INVOKESPECIAL, "java/lang/Object", "<init>", "()V");
        mv.visitVarInsn(ALOAD, 0);
        mv.visitLdcInsn("Hello B!");
        mv.visitFieldInsn(PUTFIELD, "B", "hello", "Ljava/lang/String;");
        mv.visitInsn(RETURN);
        mv.visitMaxs(2, 1);
        mv.visitEnd();
        }
        cw.visitEnd();

        return cw.toByteArray();
        }
        } 
```

# cakephp-2.0 - ACL 组件模型 CakePHP

> ID：16162993
> 
> 赞同：0
> 
> 时间：2013-04-23T07:03:27.557
> 
> 标签：cakephp-2.0, cakephp-acl

我想知道如何为 ACL 指定模型，因为我的模型是 Admin 并且我认为它试图访问用户模型，不知道为什么 =S

> AclNode::node() - 找不到由“Array ([Aro0.model] => User [Aro0.foreign_key] => 2)”标识的 Aro 节点

如果有人知道如何解决这个问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:12:49.390

按照他们写的顺序浏览这些网址。

**基础知识： http:** [//api.cakephp.org/2.3/class-AclComponent.html](http://api.cakephp.org/2.3/class-AclComponent.html)

**脚本： http:** [//net.tutsplus.com/tutorials/php/how-to-use-cakephps-access-control-lists/](http://net.tutsplus.com/tutorials/php/how-to-use-cakephps-access-control-lists/)

# prolog - Prolog 剪切行为对我来说没有意义

> ID：16162996
> 
> 赞同：2
> 
> 时间：2013-04-23T07:03:40.663
> 
> 标签：prolog, backtracking, backtrace, prolog-cut

关于特定剪辑，我遇到了非常奇怪的行为（对我来说）。据我了解，一旦执行通过切割，它就不能回溯到它上面。但这正是这段代码所做的。有人可以解释为什么会这样吗？

这是代码：

```
example([],[]).
example([X,Y,Z|Tail],[Z|NewTail]) :-
    X < Y,
    example(Tail,NewTail).
example([X,Y,Z|Tail],[X|NewTail]) :-
    Y < Z,  
    example(Tail,NewTail).
example([X,Y,Z|Tail],[Y|NewTail]) :-
    X < Z,  
    example(Tail,NewTail). 
```

现在没有削减，这个特定输入的输出如下：

```
example([1,3,2,4,5,6],L).
L = [2, 6] ;
L = [2, 4] ;
L = [2, 5] ;
L = [3, 6] ;
L = [3, 4] ;
L = [3, 5]. 
```

现在，如果我添加以下剪辑：

```
example([],[]).
example([X,Y,Z|Tail],[Z|NewTail]) :-
    X < Y,
    example(Tail,NewTail).
example([X,Y,Z|Tail],[X|NewTail]) :-
    Y < Z,
    !,                              <---- cut here
    example(Tail,NewTail).
example([X,Y,Z|Tail],[Y|NewTail]) :-
    X < Z,  
    example(Tail,NewTail). 
```

我希望它会回来

```
L = [2,6] ;
L - [2,4]. 
```

一旦它通过了第三条的删减，它就不能再回溯了。

相反，它返回：

```
L = [2, 6] ;
L = [2, 4] ;
L = [3, 6] ;
L = [3, 4] 
```

为什么会这样？它从字面上跳回剪辑并开始执行第 4 条，为什么？

为什么它执行第 4 条，如果我将切割移至第 2 条：

```
example([],[]).
example([X,Y,Z|Tail],[Z|NewTail]) :-
    X < Y,
    !,                              <---- cut here
    example(Tail,NewTail).
example([X,Y,Z|Tail],[X|NewTail]) :-
    Y < Z,      
    example(Tail,NewTail).
example([X,Y,Z|Tail],[Y|NewTail]) :-
    X < Z,  
    example(Tail,NewTail). 
```

它只产生：

```
L = [2, 6]. 
```

为什么削减在第 2 条中有效，但在第 3 条中无效？这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:16:51.017

最后一个代码片段中的剪切工作了两次，从而阻止了预期的替代方案：

```
?- leash(-all).
true.

?- trace.
true.

[trace]  ?- example([1,3,2,4,5,6],L).
   Call: (6) example([1, 3, 2, 4, 5, 6], _G6183)
   Call: (7) 1<3
   Exit: (7) 1<3
   Call: (7) example([4, 5, 6], _G6267)
   Call: (8) 4<5
   Exit: (8) 4<5
   Call: (8) example([], _G6270)
   Exit: (8) example([], [])
   Exit: (7) example([4, 5, 6], [6])
   Exit: (6) example([1, 3, 2, 4, 5, 6], [2, 6])
L = [2, 6]. 
```

# iphone - InAppSettingsKit 标签栏，不调用 settingsViewController

> ID：16162997
> 
> 赞同：0
> 
> 时间：2013-04-23T07:03:41.253
> 
> 标签：iphone, ios, uitabbar, inappsettingskit

对于 Iphone 应用程序，我尝试实现 InAppSettingsKit（标签栏版本）。我成功地将库示例集成到我的应用程序中，但没有调用“settingsViewController”方法。这是我的代码：

。H

```
#import "InAppSettingsKit/IASKAppSettingsViewController.h"

@interface Settings : IASKAppSettingsViewController

@end 
```

.m

```
#import "Settings.h"
#import <MessageUI/MessageUI.h>
#import "InAppSettingsKit/IASKSpecifier.h"
#import "InAppSettingsKit/IASKSettingsReader.h"
#import "CustomViewCell.h"

@interface Settings ()
- (void)settingDidChange:(NSNotification*)notification;

@end

@implementation Settings

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(settingDidChange:) name:kIASKAppSettingChanged object:nil];
    BOOL enabled = [[NSUserDefaults standardUserDefaults] boolForKey:@"AutoConnect"];
    self.hiddenKeys = enabled ? nil : [NSSet setWithObjects:@"AutoConnectLogin", @"AutoConnectPassword", nil];
    self.tableView = [[UITableView alloc] initWithFrame:self.view.frame style:UITableViewStyleGrouped];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark -
#pragma mark IASKAppSettingsViewControllerDelegate protocol
- (void)settingsViewControllerDidEnd:(IASKAppSettingsViewController*)sender {
    [self dismissModalViewControllerAnimated:YES];

    // your code here to reconfigure the app for changed settings
}

// optional delegate method for handling mail sending result
- (void)settingsViewController:(id<IASKViewController>)settingsViewController mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

    if ( error != nil ) {
        // handle error here
    }

    if ( result == MFMailComposeResultSent ) {
        // your code here to handle this result
    }
    else if ( result == MFMailComposeResultCancelled ) {
        // ...
    }
    else if ( result == MFMailComposeResultSaved ) {
        // ...
    }
    else if ( result == MFMailComposeResultFailed ) {
        // ...
    }
}
- (CGFloat)settingsViewController:(id<IASKViewController>)settingsViewController
                        tableView:(UITableView *)tableView
        heightForHeaderForSection:(NSInteger)section {
    NSString* key = [settingsViewController.settingsReader keyForSection:section];
    if ([key isEqualToString:@"IASKLogo"]) {
        return [UIImage imageNamed:@"imager.png"].size.height + 25;
    } else if ([key isEqualToString:@"IASKCustomHeaderStyle"]) {
        return 55.f;
    }
    return 0;
}

- (UIView *)settingsViewController:(id<IASKViewController>)settingsViewController
                         tableView:(UITableView *)tableView
           viewForHeaderForSection:(NSInteger)section {
    NSString* key = [settingsViewController.settingsReader keyForSection:section];
    if ([key isEqualToString:@"IASKLogo"]) {
        UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"iconr.png"]];
        imageView.contentMode = UIViewContentModeCenter;
        return imageView;
    } else if ([key isEqualToString:@"IASKCustomHeaderStyle"]) {
        UILabel* label = [[UILabel alloc] initWithFrame:CGRectZero];
        label.backgroundColor = [UIColor clearColor];
        label.textAlignment = UITextAlignmentCenter;
        label.textColor = [UIColor redColor];
        label.shadowColor = [UIColor whiteColor];
        label.shadowOffset = CGSizeMake(0, 1);
        label.numberOfLines = 0;
        label.font = [UIFont boldSystemFontOfSize:16.f];

        //figure out the title from settingsbundle
        label.text = [settingsViewController.settingsReader titleForSection:section];

        return label;
    }
    return nil;
}

- (CGFloat)tableView:(UITableView*)tableView heightForSpecifier:(IASKSpecifier*)specifier {
    if ([specifier.key isEqualToString:@"customCell"]) {
        return 44*3;
    }
    return 0;
}

- (UITableViewCell*)tableView:(UITableView*)tableView cellForSpecifier:(IASKSpecifier*)specifier {
    CustomViewCell *cell = (CustomViewCell*)[tableView dequeueReusableCellWithIdentifier:specifier.key];

    if (!cell) {
        cell = (CustomViewCell*)[[[NSBundle mainBundle] loadNibNamed:@"CustomViewCell"
                                                               owner:self
                                                             options:nil] objectAtIndex:0];
    }
    cell.textView.text= [[NSUserDefaults standardUserDefaults] objectForKey:specifier.key] != nil ?
    [[NSUserDefaults standardUserDefaults] objectForKey:specifier.key] : [specifier defaultStringValue];
    cell.textView.delegate = self;
    [cell setNeedsLayout];
    return cell;
}

#pragma mark kIASKAppSettingChanged notification
- (void)settingDidChange:(NSNotification*)notification {
    if ([notification.object isEqual:@"AutoConnect"]) {
        IASKAppSettingsViewController *activeController = self;
        BOOL enabled = (BOOL)[[notification.userInfo objectForKey:@"AutoConnect"] intValue];
        [activeController setHiddenKeys:enabled ? nil : [NSSet setWithObjects:@"AutoConnectLogin", @"AutoConnectPassword", nil] animated:YES];
    }
}

#pragma mark UITextViewDelegate (for CustomViewCell)
- (void)textViewDidChange:(UITextView *)textView {
    [[NSUserDefaults standardUserDefaults] setObject:textView.text forKey:@"customCell"];
    [[NSNotificationCenter defaultCenter] postNotificationName:kIASKAppSettingChanged object:@"customCell"];
}

#pragma mark -
- (void)settingsViewController:(IASKAppSettingsViewController*)sender buttonTappedForSpecifier:(IASKSpecifier*)specifier {
    if ([specifier.key isEqualToString:@"ButtonDemoAction1"]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Demo Action 1 called" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    } else if ([specifier.key isEqualToString:@"ButtonDemoAction2"]) {
        NSString *newTitle = [[[NSUserDefaults standardUserDefaults] objectForKey:specifier.key] isEqualToString:@"Logout"] ? @"Login" : @"Logout";
        [[NSUserDefaults standardUserDefaults] setObject:newTitle forKey:specifier.key];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:42:32.427

你设置`IASKSettingsDelegate`委托了吗？

就像是

```
self.settingsviewController.delegate = self; 
```

在你的`viewDidLoad`. 当然，您需要一个 IBOutlet 属性，`settingsViewController`因为它连接在您的 XIB 或 Storyboard 中。