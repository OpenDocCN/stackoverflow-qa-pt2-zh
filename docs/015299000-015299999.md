# StackOverflow 问答 15299000-15299999

# user-interface - LiveCode 否定“firstIndent” - 或其他实现效果的方式（“悬挂缩进”）？

> ID：15299002
> 
> 赞同：3
> 
> 时间：2013-03-08T16:41:58.963
> 
> 标签：user-interface, textfield, text-alignment, livecode

使用`firstIndent`字段上的属性，我可以使段落的开头相对于标准边距缩进，这样如果换行，继续从上一行的第一个字符的左侧开始。

但是如果我为 设置一个负值`firstIndent`，它就没有效果。

有没有办法实现该行从左侧开始的效果，但如果它换行，后续行将缩进到右侧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T23:06:09.010

你可以通过设置'leftindent'的值和'firstindent'的负值来做到这一点（注意你需要在设置leftindent时指定一个行号）

```
set the leftIndent of line 1 of field "A" to 200
set the firstIndent of field "A" to -50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:56:32.980

请注意，字段中行的“leftindent”属性仅在 LiveCode 5.5 版中引入，从 LC 5.5 开始，“firstIndent”属性现在可以应用于行以及整个字段：

```
set the firstIndent of line 2 of field "xyzzy" to -10 
```

# gradle - 是否可以设置超过 2 个级别的 gradle 项目？

> ID：15299004
> 
> 赞同：34
> 
> 时间：2013-03-08T16:42:01.417
> 
> 标签：gradle

我们已经使用 gradle 大约一年了，并且取得了一定的成功。许多功能仍然有点不透明，但我们正在实现。我不确定我是否要正确解决问题，所以我会继续问这个问题：

我看到的所有 gradle 示例都有一个根项目和一个级别的子项目。出于多种原因，我们希望整合我们的 git 项目。所有这些都是 gradle 项目，其中一些有 gradle 子项目。我们想要最终得到的本质上是一个多层次的 gradle 结构。我们不想更改所有这些项目的 gradle 设置，而是希望拥有一个管理所有项目和相应子项目的顶级 gradle。我的第一次尝试表明我无法拥有一个控制所有项目和子项目的 build.gradle。难道我做错了什么？我是否遵循和固有的破坏范式？

这是我想做的示例结构：

```
Top Project
  build.gradle
  Project
    build.gradle
    Sub Project
      build.gradle
      src
    Sub Project
      ...
  Project
    ... 
```

谢谢，我希望我没有错过文档中的一些明显解释。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T18:54:13.267

我只需将以下内容放在 TopProject/settings.gradle 中：

```
include 'Project1:SubProject1'
include 'Project1:SubProject2'
include 'Project2:SubProject1'
... 
```

您当前拥有的项目所需的唯一更改是从中删除 settings.gradle 文件，因为每个项目结构只能有一个 setting.gradle 文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-06T19:47:53.030

我有一个类似的问题。最简单的解决方案是通过在类似于 Erdi 的答案的 $root/settings.gradle 文件中添加项目来配置 gradle。但是，我设法自动添加了所有子项目。该逻辑将简单地遍历我的目录结构并找到包含它们的所有目录`build.gradle`并将它们添加为子项目。

这是如何做到的：

*   `settings.gradle`确保除了根目录之外没有任何其他内容
*   根 settings.gradle 文件的内容应该是：

```
fileTree('.') {
  include '**/build.gradle'
  exclude 'build.gradle' // Exclude the root build file.
}.collect { relativePath(it.parent).replace(File.separator, ':') }
 .each { include(it) } 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:25:26.947

这工作得很好：

```
ext{
  buildPrefix = "build"
  allProjects = ["P1", "P2"]
}

def createTasks(String prefix) {
  def newTasks = allProjects.each {
    def pName ->
      def tName = "$prefix$pName"
      tasks.add(name: tName, type: GradleBuild) {
        dir = pName
        tasks = [ prefix ]
      }
  }
}

createTasks(buildPrefix)

ext {
  buildTasks = tasks.findAll{ t -> t.name.startsWith(buildPrefix) }
}

task build(dependsOn: buildTasks) {} 
```

我可以添加我想在顶层公开的其他任务。

感谢您的指点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-15T15:32:33.313

Kotlin 版本的`settings.gradle.kts`

```
fileTree(".") {
    include("**/build.gradle")
    include("**/build.gradle.kts")
    exclude("buildSrc/**")
    exclude("build.gradle.kts")
}.map {
    relativePath(it.parent)
        .replace(File.separator, ":")
}.forEach {
    include(it)
} 
```

而不是像这样手动添加它（如`Intellij Idea`建议）：

```
include("modules:core")
findProject(":modules:core")?.name = "core" 
```

# javascript - 如何在 HTML5 中有效地绘制多条线形？

> ID：15299011
> 
> 赞同：1
> 
> 时间：2013-03-08T16:42:25.447
> 
> 标签：javascript, html, animation, html5-canvas

我一直在做一个爱好项目，它正在用 HTML5 重建旧的 DOS 游戏 Gotcha。绘图块的部分几乎已经完成（除了一些讨厌的错误），但我现在正在努力的事情是绘制游戏中的微调器。我已经上传了带有多个变形的微调器的屏幕截图。[http://www.mvdms.com/gotcha/spinner.png](http://www.mvdms.com/gotcha/spinner.png)。我的问题是：如何使用 canvas 对象在 HTML5 中重现如此高级的动画？

我到处搜索类似的动画，但我就是找不到。我当前的微调器代码非常简单：

初始化：

```
 APP.spinnerLines = new Array();

    for(i = 0; i< 12; i++)
    {
        var line = new Line(13,20);
        line.points.push(new Point(i*5,0));

        APP.spinnerLines.push(line);
    } 
```

更新：（每帧）

```
 for(i in APP.spinnerLines)
        {                       
            var lpX;
            var lpY;

            for(j in APP.spinnerLines[i].points)
            {
                lpX = APP.spinnerLines[i].points[j].x;
                lpY = APP.spinnerLines[i].points[j].y;

                context.moveTo(lpX, lpY);
                if(APP.spinnerLines[i].points[parseInt(j)+1] !== undefined)
                {
                    lpX = APP.spinnerLines[i].points[parseInt(j)+1].x;
                    lpY = APP.spinnerLines[i].points[parseInt(j)+1].y;

                    context.lineTo(lpX, lpY);
                }
            }
        } 
```

稍后在代码中还有一些碰撞检测，但我猜现在这与对象无关；）

那么，有没有人可以帮助我在 HTML5 中绘制这个形状？

我目前的项目状态可在[http://www.mvdms.com/gotcha](http://www.mvdms.com/gotcha)上查看（用箭头键移动）

提前致谢！

# mysql - 在哪里可以找到分步 MySQL 复制教程？

> ID：15299022
> 
> 赞同：-4
> 
> 时间：2013-03-08T16:42:52.727
> 
> 标签：mysql, replication, mysql-workbench, windows-server

我希望有一个主 MySQL 通过互联网更新一个从属。如果可能，想尝试使用 Workbench（或其他一些免费方法）。这两个盒子都是 Windows 2003 服务器，可以通过 Internet 互相看到。从站永远不需要更新主站。我不需要将此作为真正的故障转移集群。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:40:59.010

MySQL 手册将是一个很好的起点——甚至是谷歌？

MySQL 手册中有一个页面叫做 - [How to setup replication](http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T11:27:16.723

查看

> 高性能 MySQL，第 3 版

作者：施瓦茨男爵、彼得·扎伊采夫和瓦迪姆·特卡琴科

拥有你需要的一切。

# visual-studio-2010 - SP2010 和 SP2013 在单一操作系统中的同时开发环境

> ID：15299025
> 
> 赞同：0
> 
> 时间：2013-03-08T16:42:54.213
> 
> 标签：visual-studio-2010, visual-studio-2012, sharepoint-2010, virtual-machine, sharepoint-2013

我的笔记本电脑上有一个开发环境，如 win7，带有 std IIS、SharePoint 2010 Server、SQL 2008 R2 和 Visual Studio 2010。我已经并排安装了 Visual Studio 2012。但是 SharePoint 2013 呢？我想为 SP2010 和 SP2013 开发和测试，但我不想使用任何 VM（这只是为另一个完整的操作系统使用更多内存和更多 CPU 周期。我什至不喜欢 VM 的任何关于睡眠/休眠和启动问题的笔记本电脑上的方式）。有没有办法以“正常”的方式完成这一切？或者……实现这一目标的最佳方法是什么？您能否并排安装 SP2010 和 SP2013 以及如何为此设置调试器（有时是 SP2010，有时是 2013）或者您是否真的需要安装类似带有 SP2013 的 VM……然后使用调试器附加到它？这甚至可能吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:27:56.720

我确实在以下 URL 上发布了它：[SharePoint.StackExchange.com](https://sharepoint.stackexchange.com/questions/61552/simultaneous-development-environment-for-sp2010-and-sp2013-in-single-os)

你可以在那里阅读答案。

# sql-server-2008 - SSRS 2008 R2 - 计算矩阵动态范围内的前 5%、10%、20% 等

> ID：15299027
> 
> 赞同：2
> 
> 时间：2013-03-08T16:43:05.503
> 
> 标签：sql-server-2008, reporting-services, matrix, report, expression

我需要在 SSRS 2008 R2 的矩阵中计算动态范围内的前 5%、10%、20% 和底部 5%、10%、20%。

所以我的矩阵中有这样的数据：

```
 Week1    Week2   Week3   Week4
Time  09:00     27       405     2       18
      10:00     12       1      1008     1098
      11:00     1002     10      76      102 
```

因此，在这些价值观中，我需要计算出其中哪些属于前 10%、最低 10% 或其他。因此，如果我将上面显示的所有数字加在一起，我总共会得到 3761。各个值的范围介于最低数量 (1) 到最高数量 (1098) 之间。那么我如何计算出 % 'slot' 405 属于什么情况，以及当数字是动态的时如何让报告计算出来呢？然后我需要使用这个计算来突出显示具有一些条件格式的单元格......

任何帮助都感激不尽，并在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:16:25.483

我会使用 NTILE 函数在 SQL 查询中添加一个“Percentile”列。当心我在“社区添加”部分中描述的 NTILE 的陷阱：

[http://msdn.microsoft.com/en-us/library/ms175126.aspx](http://msdn.microsoft.com/en-us/library/ms175126.aspx)

# php - 新 PHP SDK 中的共享访问签名

> ID：15299028
> 
> 赞同：2
> 
> 时间：2013-03-08T16:43:10.657
> 
> 标签：php, azure

显然对它的支持不在新的 SDK 中

[新的 Azure PHP API - generateSharedAccessUrl](https://stackoverflow.com/questions/13392112/new-azure-php-api-generatesharedaccessurl)

如此处所见

设置它们的替代方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:08:01.637

我在 php sdk 中看不到任何 SAS 包装函数。

这是[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)，其中包含有关共享访问签名以及如何创建的所有详细信息。有了这个，您应该能够创建自己的简单 php 包装器来创建 SAS。

或者：如果需要，您可以创建自己的内部服务（在同一个 vm 上运行？），用 Java 或 .net 实现，为您生成 SAS。对于 Java，您可以在此处找到合适的类，并[在此处](https://github.com/WindowsAzure/azure-sdk-for-java/tree/master/microsoft-azure-api/src/main/java/com/microsoft/windowsazure/services/blob/client)[找到](http://msdn.microsoft.com/en-us/library/windowsazure/hh875756.aspx)用于在 Java 中生成 SAS 的 MSDN 文档。

# jquery - Jquery 循环遍历在运行时创建的元素

> ID：15299032
> 
> 赞同：5
> 
> 时间：2013-03-08T16:43:40.017
> 
> 标签：jquery, html, loops, foreach

我有一个传递给页面的列表，并且元素是在运行时创建的。我想遍历这些元素并为每个元素执行一些操作。下面是我的代码：对于从此列表中创建的每个人，我想对该人进行检查。有人可以帮我吗，我只检查一次：

jQuery：

```
$(document).ready(function() {

    $("#userId").each(function(i){
        if ($("#userId").val != '') {
            alert('not null' + i);
        }
    });                 
}); 
```

JSP：

```
<c:forEach items="${person}" var="person">

<input= type="text" id="userId" value="${person.userid}" />
    First name:- ${person.fName} , Last Name:- ${person.lName}
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T16:45:28.260

一个页面上不能有多个元素具有相同的`id`属性。尝试使用类。

尝试类似：

```
$(document).ready(function() {

   $(".userId").each(function(i){
       if ($(this).val() != '') {
           alert('not null' + i);
       }
   });
}); 
```

还有一点需要注意的是 .val 是一个方法，所以需要调用它来获取值。使用`.val()`而不是`.val`. 由于您现在拥有代码， $(selector).val 是一个函数，因此它永远不会是您正在测试它的空字符串。

此外，您的 JSP 应该类似于：

```
<c:forEach items="${person}" var="person">

<input= type="text" class="userId" value="${person.userid}" />
    First name:- ${person.fName} , Last Name:- ${person.lName}
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:46:41.727

您的循环将创建多个具有相同 ID 的元素，首先更改它。最好改用类名。

```
<c:forEach items="${person}" var="person">

    <input= type="text" class="user" id="userId-${person.userid}" value="${person.userid}" />
       <!--             ^ Use Class &  ^ Id to uniquely identify the user -->
       First name:- ${person.fName} , Last Name:- ${person.lName}
</c:forEach> 
```

接下来，您`.find()`甚至可以使用它来查找动态生成的元素。但我建议使用我的解决方案来使用该`class`属性。

```
$(".user").each(function(i) {
    if ($(this).val() != '') {
          alert('not null' + i);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:47:58.213

正如@Andbdrew 所说，使用类而不是id，因为它会在找到与id 匹配的第一个项目后停止寻找更多项目。

此外，您需要使用`this`而不是`$("#userId")`在我们的函数内部。

所以做这样的事情：

```
$(".userClass").each(function(i) {
    if ($(this).val() != '') {
        alert('not null' + i);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-23T14:15:43.423

为什么不使用 jQuery 的 TAG 进行选择。例如，具有您的用户列表的元素是一个 id 为 tblUsers 的表，那么您可以迭代运行时生成的 TR 或 TD，如下所示：

```
$("#tblUsers tr").each(function(i){
        alert('td' + i);
 }); 
```

此外，如果您在 tds 中有输入，则可以深入选择

```
$("tblUsers tr td input") 
```

# sql - SQL Server JOIN 语句

> ID：15299033
> 
> 赞同：1
> 
> 时间：2013-03-08T16:43:43.627
> 
> 标签：sql, sql-server, inner-join

我正在尝试从 SQL Server 数据库（使用 SQL Server Management Studio）中提取一些信息，如下所示：

```
SELECT DISTINCT( t1.accountid ), 
               t1.accountname, 
               t1.reseller, 
               (SELECT t1.reseller 
                FROM   dbname t1 
                       INNER JOIN dbname t2 
                               ON t1.reseller = t2.reseller 
                WHERE  t1.reseller IN ( 1 )) AS Reseller 
FROM   dbname t1, 
       dbname t2 
```

运行它会给我一个错误：

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

经过大量研究，我仍然很难过。帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:07:36.793

1.  您不能应用于`DISTINCT`单个列，我不确定这里是否需要它，除非您的表允许所有这些列中的重复值。
2.  我不知道你为什么要加入这些表两次，或者根本不使用子查询。
3.  我不知道你为什么要输出`t1.reseller`两次......即使你使用了一个 from`t1`和一个 from `t2`，因为它们在连接上匹配，所以每一行它们总是相同的！
4.  您有一个隐式连接*，并且*缺少 where 子句 - 这会导致笛卡尔积，这[正是我始终建议不要使用这种语法](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)的原因。也许这就是触发使用的原因`DISTINCT`？
5.  您似乎根本没有使用 t2 中的任何列。（双）自加入有什么意义？

似乎您只需要：

```
SELECT accountid, accountname, reseller
  FROM dbo.dbname
  WHERE reseller = 1; 
```

否则，请准确描述您的查询应该做什么（通过显示示例数据和所需结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:18:17.517

在子查询中添加 TOP 1 子句

如下

```
 (SELECT TOP 1 t1.reseller 
        FROM   dbname t1 
               INNER JOIN dbname t2 
                       ON t1.reseller = t2.reseller 
        WHERE  t1.reseller IN ( 1 )) AS Reseller) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T16:53:32.937

您收到的错误是因为此查询：

```
 (SELECT t1.reseller 
            FROM   dbname t1 
                   INNER JOIN dbname t2 
                           ON t1.reseller = t2.reseller 
            WHERE  t1.reseller IN ( 1 )) AS Reseller) 
```

返回多个值。

# css - 为什么溢出在这里不起作用？

> ID：15299034
> 
> 赞同：1
> 
> 时间：2013-03-08T16:43:46.437
> 
> 标签：css

这是我的CSS；我需要它的所有内容都有滚动或自动溢出。我不明白为什么它没有出现。

```
.holder{
    display: table;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    top: 2.5%;
    width: 90%;
    height: 95%;
    background-image:url("images\\tile2.png");
    background-repeat:repeat;
    overflow: scroll;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:48:51.040

删除`display: table;`，您将看到滚动条。

现场示例：http: [//jsbin.com/aloler/1/edit](http://jsbin.com/aloler/1/edit)

这是您`display: table;`删除的代码：http: [//jsbin.com/aloler/2/](http://jsbin.com/aloler/2/)

# bash - 使用 sloccount 和 grep 获取 = 符号后的 SLOC

> ID：15299036
> 
> 赞同：0
> 
> 时间：2013-03-08T16:43:51.803
> 
> 标签：bash, grep

我正在尝试自动化获取目录中文件列表的 sloccount 并将它们放入文本文件的过程。我需要为多个目录执行此操作。目的是“grep”在 = 符号之后找到的 sloc

```
Total Physical Source Lines of Code (SLOC)                = 6,392 
```

到目前为止，我有：

```
 #!/bin/bash

for file in dir/*; do echo $file;
sloc=`sloccount $file | grep $file`;
echo $file $sloc >> 'activesloc.txt';
done; 
```

或者从终端我得到输出，使用：

```
sloccount ponkout | grep "ponkout"

Creating filelist for ponkout
6392    ponkout      java=6392 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:50:14.910

您也许可以使用从线路`cut`获取：`6,392`

```
$ TEXT="Total Physical Source Lines of Code (SLOC)                = 6,392"
$ echo $TEXT | cut -d= -f2
 6,392 
```

`-d=`表示分隔符是`=`并且`-f2`您制作要打印的第二条记录。

这也`awk`使得它：

```
$ echo $TEXT | awk -F= '{print $2}'
 6,392 
```

# javascript - Javascript setIntervall 不起作用

> ID：15299063
> 
> 赞同：0
> 
> 时间：2013-03-08T16:44:48.730
> 
> 标签：javascript

我有一个简单的 html 文档，应该以 1000 的间隔再次加载 javascript

所以在文件的最后我补充说：

```
<script>
window.onload = function() {
 refreshTime(); }
</script> 
```

该函数在 js 文档中定义，如下所示：

```
function refreshTime() {

var a = new Date(); // Now
    var ahours = a.getHours();
    ........ 
```

并以：

```
 }
     refreshTime();
     setInterval(refreshTime, 1000); 
```

这样 refreshTime() 不在函数 refresh Time() 中，因为 } 如果你明白我的意思吗？

所以我的问题是这个间隔不起作用，我必须在Html文档中设置间隔吗？还是在别的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:59:50.897

我怀疑您在 refreshTime 中有一个错误导致失败。我运行了以下，它工作得很好：

```
function refreshTime() {
    console.log('Time refreshed!');
}
refreshTime();
setInterval(refreshTime, 1000); 
```

因此，问题不在于您如何从 setInterval 调用 refreshTime，而在于您未向我们展示的代码中的某些内容。

# c# - StringReader.ReadLine 清除给定的字符串，是否有机会不清除字符串？

> ID：15299067
> 
> 赞同：0
> 
> 时间：2013-03-08T16:45:08.850
> 
> 标签：c#, string, stringreader

当我使用 StringReader.ReadLine 从字符串数组中读取文本时，它会完美读取它，但它也会清除我的数组，

```
using (StringReader reader = new StringReader(filesGroupList[x]))
       {
          while ((filesGroupList[x] = reader.ReadLine()) != null)
             {
                ...
             }
        } 
```

现在，filesGroupList 是空的。所以如果我想再次从这个字符串中读取数据，它会给我空引用异常，所以我唯一的方法是在使用 ReadLine 之前创建这个数组的副本，但是有机会避免它吗？所以当 StringReaded 读完该行时，我的行仍然留在数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:43:13.870

鉴于您编写的代码，这是我看到的一个示例：

```
//going to set filesGroupList[x] to a string and then see what happens.
filesGroupList[x] = "First line of string.\nSecond line of string.\n";
//now we go into the using portion.
using (StringReader reader = new StringReader(filesGroupList[x]))
{
  //reader has access to the whole string.
  while ((filesGroupList[x] = reader.ReadLine()) != null)
  {
    //first time through, filesGroupList[x] is set to "First line of string."
    //second time through, filesGroupLIst[x] is set to "Second line of string."
    Console.WriteLine(filesGroupList[x]);
  }
  //third time through, ReadLine() returns null.
  //filesGroupList[x] is set to null.
  //Code breaks out of while loop.
  Console.WriteLine(filesGroupList[x]); //outputs an empty line.
}
//outside of using, filesGroupList[x] still null.
Console.WriteLine(filesGroupList[x]); //also outputs an empty line. 
```

现在，鉴于我建议使用 line 的其他答案，我们将保持所有内容相同，除了 line 部分。

```
//going to set filesGroupList[x] to a string and then see what happens.
filesGroupList[x] = "First line of string.\nSecond line of string.\n";
using (StringReader reader = new StringReader(filesGroupList[x]))
{
  //reader has access to the whole string.
  string line;
  while ((line = reader.ReadLine()) != null)
  {
    //first time through, line is set to "First line of string."
    //second time through, line is set to "Second line of string."
    Console.WriteLine(line);
  }
  //third time through, ReadLine() returns null.
  //line is set to null.
  //filesGroupList[x] is still set to "First line of string.\nSecond line of string.\n"
  Console.WriteLine(line); //outputs an empty line.
  Console.Write(filesGroupList[x]); //outputs whole string (on 2 lines).
}
Console.WriteLine(line); //won't compile. line doesn't exist.
Console.Write(filesGroupList[x]); //outputs whole string (on 2 lines). 
```

因此，我认为您不想读取`filesGroupList[x]`然后将其存储在`filesGroupList[x]`. 如果字符串 in`filesGroupList[x]`没有行尾字符，则只需将该字符串放回其中（然后`null`在下一次`while`循环中放入）。如果 in 中的字符串`filesGroupList[x]`确实有行尾字符，那么每次通过`while`循环时，您都会将部分字符串放回`filesGroupList[x]`，我认为这不是您的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:52:19.097

**编辑**

实际上，在 using 语句之后，字符串为空，这是预期的，因为：

> StringReader.Dispose：释放 TextReader 对象使用的所有资源。（继承自 TextReader。）

[MSDN 链接在这里](http://msdn.microsoft.com/en-us/library/system.io.stringreader.aspx)

问题是你*为什么*要这样做，你想做的似乎不合理。没有更多的上下文信息。

* * *

您的代码运行完美，或者您无法解释自己，或者您的问题完全不相关。

我自己试过：

```
static void Main(string[] args)
{
    string[] filesGroupList = new string[1];

    int x = 0;

    filesGroupList[x] = "String is here!";

    using (StringReader reader = new StringReader(filesGroupList[x]))
    {
        while ((filesGroupList[x] = reader.ReadLine()) != null)
        {
            Console.WriteLine("the string is here, I just checked");
            Console.WriteLine(filesGroupList[x]);
        }
    }
    Console.ReadLine();
} 
```

和输出：

> 字符串在这里，我刚刚检查过
> 
> 字符串在这里！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T18:06:54.867

我认为你的错误就在这里：

```
while ((filesGroupList[x] = reader.ReadLine()) != null) 
```

您正在更改`filesGroupList[x]`每次阅读和最后一次阅读的值，将其设置为`null`.

如果相反，你做了这样的事情：

```
string line;
while ((line = reader.ReadLine()) != null)
... 
```

然后一旦你在使用之外，你会发现`filesGroupList[x]`没有变化。

# sql-server-2008 - 在四舍五入到小数点后将前 10 名更改为等于 100

> ID：15299068
> 
> 赞同：1
> 
> 时间：2013-03-08T16:45:11.483
> 
> 标签：sql-server-2008, tsql, group-by, rollup

我正在为一些管理信息的报告构建前 10 名，该报告以以下脚本结尾：

```
IF @ReportType = 'SectorEQ'

BEGIN
/* Final Select with roll up for total per portfolio */
    SELECT 
            CONVERT(VARCHAR, ReportingDate, 103)    AS ReportingDate
        ,   PortfolioID                             AS FundCode
        ,   PortfolioNme                            AS FundName

        ,   CASE 
                WHEN GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) = 7 THEN 'Total'
                ELSE Sector
                END                                 AS Sector

        ,   CASE 
                WHEN GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) = 7 THEN 102
                ELSE [Rank]
            END                                     AS [Rank]

        ,   CAST(SUM([Weight]) AS DECIMAL(22,1))    AS Percentage

    FROM @FinalOutputEQ_CS

    GROUP BY    ReportingDate
            ,   PortfolioID
            ,   PortfolioNme
            ,   Sector
            ,   [Rank]
            ,   [Weight] WITH ROLLUP

    HAVING GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) IN (1,7)

    ORDER BY    ReportingDate
            ,   PortfolioID
            ,   [Rank] 
```

如您所见，百分比四舍五入到小数点后 1 位，这可能会导致舍入问题，因为到小数点后 1 位的百分比之和可能小于或大于 100，即 100.1 或 99.9。我需要做的是确保四舍五入到小数点后 1 位的百分比都等于 100.0。

我想做的是检查四舍五入百分比的总和是否等于 100.0，如果不是，则取前 1 名并减去其百分比的差值。

我对如何做到这一点有一些想法，但我想知道在不减慢进程的情况下确保快速有效地运行的最佳方法是什么？

编辑：示例表

```
ReportingDate   FundCode    FundName    Sector                   Rank   Percentage
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Consumer Discretionary      1   16.1
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Health Care                 2   13.8
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Information Technology      3   11.8
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Telecommunication Services  4   10.3
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Consumer Staples            5   10.1
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Industrials                 6   8.7
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Financials                  7   6.8
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Materials                   8   6.5
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Energy                      9   5.2
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Utilities                   10  0.7
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Cash and Bonds              101 10.1
28/02/2013  XXXXXXXX    XXXXXXXXXXXXXXX Total                       102 100.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:50:40.747

只是没有十进制类型可以排到第十位吗？

例如：

```
declare @decimal decimal (16,4) = 123456.7890;    ;

select cast(@decimal as decimal(16,0)) 
```

代替

```
select cast(@decimal as decimal(16,1)) 
```

另外，为什么你的值会变成 22 个值？（十进制类型中的第一个位置）如果您担心 proc 的效率，那么需要存储大量数据。我通常对第一个数字很吝啬，很少超过 16，除非有非常大的数据返回。

编辑舍入第十位：

```
declare @decimal decimal (16,1) = 123456.5;   -- you can change this as needed to see how it will change

-- if you want to do rounding then you need to determine if the tenth position is above or greater than five
-- you could do this in a function if you want.  You need to determine a return of 1 or 0 based on rounding
declare @logic int = case when right(@decimal,1) >= 5 then 1 else 0 end

-- find the integer value WITHOUT the decimal places and then add the logic variable
select left(@decimal, len(@decimal) - 2) + @logic as Rounded 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:29:39.873

我可以为此解决的唯一解决方案是创建下面的脚本，该脚本基本上总结了细节以给出总数。然后在我的 CTE 之后，我从前 1 名和总数中减去了这个：

```
IF @ReportType = 'SectorEQ'

BEGIN
    INSERT INTO @RoundingDifference
        SELECT
                PortfolioID
            ,   CAST(SUM([Weight])-100 AS DECIMAL(22,1)) AS [Weight]

        FROM @FinalOutputEQ_CS

        WHERE Sector <> 'Total'

        GROUP BY        
                ReportingDate
            ,   PortfolioID
            ,   PortfolioNme

END

IF @ReportType = 'SectorEQ'

BEGIN
;;WITH CTE AS
    (
/* Final Select with roll up for total per portfolio */
    SELECT 
            CONVERT(VARCHAR, ReportingDate, 103)    AS ReportingDate
        ,   PortfolioID                             AS FundCode
        ,   PortfolioNme                            AS FundName

        ,   CASE 
                WHEN GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) = 7 THEN 'Total'
                ELSE Sector
                END                                 AS Sector

        ,   CASE 
                WHEN GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) = 7 THEN 102
                ELSE [Rank]
            END                                     AS [Rank]

        ,   CAST(SUM([Weight]) AS DECIMAL(22,1))    AS Percentage

    FROM @FinalOutputEQ_CS

    GROUP BY    ReportingDate
            ,   PortfolioID
            ,   PortfolioNme
            ,   Sector
            ,   [Rank]
            ,   [Weight] WITH ROLLUP

    HAVING GROUPING_ID(ReportingDate, PortfolioID, PortfolioNme, Sector, [Rank], [Weight]) IN (1,7)
    )
    SELECT 
        ReportingDate
    ,   FundCode
    ,   FundName
    ,   Sector
    ,   [Rank]

    ,   CASE 
            WHEN [Rank]IN (1,102) THEN Percentage - RD.[Weight]
            ELSE Percentage
        END     AS Percentage

    FROM CTE AS CTE

        INNER JOIN @RoundingDifference AS RD
        ON RD.PortfolioID = CTE.FundCode

    ORDER BY    ReportingDate
            ,   FundCode
            ,   [Rank]

END 
```

# spring - 消息消费者实现

> ID：15299069
> 
> 赞同：0
> 
> 时间：2013-03-08T16:45:12.037
> 
> 标签：spring, jboss, jms, implementation, consumer

我猜消息的消费者应该一直在收听，或者应该批量设置以经常运行以检查和消费消息。

当我们做基本示例时，我们使用独立的 Java 程序，它会一直运行。我们如何使用 JBoss 之类的任何应用程序服务器在现实世界的 Web 应用程序中实现它们？可以说，我们使用 Spring MVC、Hibernate 和 JBoss。它通常是如何实现/设置的，以便它继续运行并使用消息？

（生产者可以是任何网页、按钮点击或类似的东西）

可能是非常基本的愚蠢问题。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:48:34.150

[这是一个关于如何使用 Spring 设置消息监听](http://www.springbyexample.org/examples/simple-spring-jms-listener-config.html)的不错的小教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:43:49.877

如果您的应用程序部署到 JBoss，您可能正在寻找 MDB 支持。如果您正在部署到 JBoss AS 7，您可能会对此感兴趣。

[http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/helloworld-mdb/](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/helloworld-mdb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:51:51.593

根据您的需要，您可以设置您的听众。
假设如果您要发布一些应该在发布后立即处理的消息，那么您的侦听器应该连续收听。
另一方面，如果不需要立即采取任何行动，那么最好单独运行一个独立的应用程序，从而减少服务器上的负载。
我希望你已经知道如何配置监听器，所以我不打算这样做。

# html - 使用 css 实现浮雕/倾斜/3d 边框效果

> ID：15299070
> 
> 赞同：1
> 
> 时间：2013-03-08T16:45:12.290
> 
> 标签：html, css

我试图弄清楚如何通过仅使用 css 来实现元素底部的以下边框，并使其尽可能跨浏览器友好

示例代码，带标准边框

```
<div class="object"></div>

.object {
    width: 200px;
    height: 45px;
    background-color: orange;
    margin: 20% auto 0 auto;

    border-bottom: 5px solid green; /*Needs to be changed to get effect*/
} 
```

![在此处输入图像描述](../Images/33bcaa96180089ec892b88d4a56d07f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:10:22.823

给你，一个使用一些伪元素和 CSS 边框魔法的例子。请注意，您必须知道父元素的背景颜色才能正常工作。根据您的要求，使用`:after`它应该[与 IE8+ 兼容](http://www.quirksmode.org/css/contents.html)并在旧浏览器中优雅地回退。

这是通过理解 CSS 方向边界在其方向上以 45° 切割来实现的，以便您能够以不同的方式设置不同的侧面（例如`border-right`切割`border-top`等`border-bottom`）。通过巧妙地使用边框属性和位置，您可以创建有角度的形状效果。

由于这个原因，创建*中央浮雕*3d 效果不需要任何其他元素，但要小心使用边框。

![中央3d浮雕](../Images/07557d2a5eddab038c0c9bc0008f9f6f.png)

`border-bottom`只需将 设置为 color 和`right`设置`left`为就可以达到这种效果`transparent`。

然而，因为你想要一个额外的剪辑，我们使用一个伪元素，给它一个三角形并将它重叠在父元素的边界上；这样我们就能得到你所需要的。

`[**Working example**](http://jsbin.com/isixoz/1)`

# mysql - 如何级联删除父表行

> ID：15299071
> 
> 赞同：2
> 
> 时间：2013-03-08T16:45:14.053
> 
> 标签：mysql, sql, foreign-keys, cascade

我试图想出从我的 sql 中的子表中删除行的最佳解决方案。

例如，我有两张表，一张称为 users，另一张称为 users_information。第二个表 users_information 使用名为 user_id 的外键，它实际上是“users”表中的“id”。

我想使用级联删除选项，每当我从“用户”表中删除一行时（通过使用“id” ofc），我想删除用户信息中的同一行，其中 id = user_id。

我很难弄清楚，试着寻找并发现[如何在 mysql 中删除级联？](https://stackoverflow.com/questions/511361/how-do-i-use-on-delete-cascade-in-mysql)

但这没有得到很好的解释，我相信这是我的目标解决方案。

这是我的表格结构，如果您发现我可能做错了/不是最好的方法，请告诉我。

```
CREATE TABLE `users_information` (
    `id` int(20) NOT NULL AUTO_INCREMENT,
    `user_id` int(11) NOT NULL,
    `first_name` varchar(15) NOT NULL,
    `last_name` varchar(15) NOT NULL,
    `country` varchar(30) NOT NULL,
    `profession` varchar(40) NOT NULL,
    `gender` varchar(6) NOT NULL,
    `birthday` datetime NOT NULL,
    `city` varchar(50) NOT NULL,
    PRIMARY KEY (`id`),
    KEY `user_id` (`user_id`)
    CONSTRAINT `myForeignKey` FOREIGN KEY (`user_id`)
    REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

    CREATE TABLE `users` (
    `id` int(20) NOT NULL AUTO_INCREMENT,
    `password` varchar(82) NOT NULL,
    `email` varchar(60) NOT NULL,
    `created` date NOT NULL,
    `user_type` int(2) NOT NULL,
    `active` smallint(2) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我忘了提：“users_information”的代码产生以下错误：

> * #1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 13 行的“CONSTRAINT `myForeignKey`FOREIGN KEY ( `user_id`) REFERENCES `users`( ) O”附近使用正确的语法`id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T08:56:36.177

在以下行后添加逗号

键`user_id`( `user_id`)

# javascript - 如何使用 ajax 切换菜单之类的东西

> ID：15299076
> 
> 赞同：0
> 
> 时间：2013-03-08T16:45:30.903
> 
> 标签：javascript, jquery, wordpress

我正在尝试使用 wordpress 制作一个网页（[http://gianlucapetronzi.com/marcella/](http://gianlucapetronzi.com/marcella/)），它使我可以在单击菜单链接时使用菜单而不刷新页面，但我有一些问题.

我尝试用这样的js来做到这一点：[单击菜单项内容以显示在同一页面的右侧div中而不刷新？](https://stackoverflow.com/questions/10613734/click-a-menu-item-content-to-be-displayed-in-the-right-side-div-in-the-same-page). 并使用 jquery.hide 和 jquery.show （更改 html 代码），但它不起作用。

真正的问题是，当我单击菜单内的链接时，它会自行关闭并重新打开，我认为是因为刷新。

问题可能是wordpress有3个不同的文件生成一个页面吗？header.php、index.php 或 mypage.php 和 footer.php。

我从这里下载我的菜单：[http](http://www.dynamicdrive.com/dynamicindex1/switchmenu.htm) ://www.dynamicdrive.com/dynamicindex1/switchmenu.htm 。

PS：如果您想尝试，请使用页面：Home,architettura,55inch/60mq 和 centro parrocchiale，因为这个问题我没有完成其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:58:58.017

在您使用的示例中，他们每次都重新加载页面。

但是，要使您的示例正常工作，您只需编写代码来获取要在页面上显示的内容（例如通过 get），然后将其写入特定的 div。您可以通过执行 jquery`.on click`处理程序而不是`A:link`

那里有一百万个不同的例子，这里只有一个： [http ://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp](http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp)

# asp.net - 诊断缓慢的 ASP.Net 网站启动

> ID：15299084
> 
> 赞同：4
> 
> 时间：2013-03-08T16:46:03.077
> 
> 标签：asp.net, performance

我们的 ASP.Net webforms 站点通常需要五分钟来启动并在 IISReset 或在 Visual Studio 中构建后呈现第一页。我们已经在 web.config 中使用了诸如[optimizeCompilations](http://blogs.msdn.com/b/davidebb/archive/2009/04/15/a-new-flag-to-optimize-asp-net-compilation-behavior.aspx)属性之类的东西，并且已经取得了一些进展，但想更多地了解为什么需要这么长时间以及确切的瓶颈在哪里。

有没有我们可以用来检测和分析 ASP.Net 网站启动期间发生的事情的工具？我们使用的是 IIS7，我们的网站是用 .Net 4.0 编译的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:35:18.730

在 web.config上的[Compilation 键](http://msdn.microsoft.com/en-us/library/s10awwz0(v=vs.100).aspx)`the batch compile`中找到了它花费太长时间的原因。

您可以更改一些批处理相关参数以将批处理编译限制为更少的页面/模块，从而使您的站点启动得更快一些。[架构和影响它的值](http://msdn.microsoft.com/en-us/library/s10awwz0(v=vs.100).aspx)：

```
<compilation 
   debug="[true|false]"
   batch="[true|false]"
   batchTimeout="number of seconds"
   maxBatchSize="maximim number of pages"
   maxBatchGeneratedFileSize="maximum combined size"
   numRecompilesBeforeAppRestart="number"
   optimizeCompilations="[true|false]" 
```

如果您想了解编译时发生了什么，您可以尝试使用 MS Windows SysInternals 的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)。您可以看到当时所有的文件读取和编译，以及正在打开/检查的内容等。

## 我在本地使用的示例（不在服务器上）

```
<compilation debug="true" batch="false" 
     optimizeCompilations="true" maxBatchGeneratedFileSize="800" maxBatchSize="100" > 
```

# windows - 检查目录中是否有文件，是否有调用另一个脚本

> ID：15299087
> 
> 赞同：0
> 
> 时间：2013-03-08T16:46:10.307
> 
> 标签：windows, batch-file

我正在尝试编写一个批处理脚本来检查目录中是否有任何文件，以及是否有调用另一个脚本。这是我所拥有的：

```
@echo off

for /f %%A in ('dir /b "..\data\partials\processing"^| find /v /c ""') do set cnt=%%A

if %cnt% gtr 0 
(
    call otherscript.bat
) 
```

每次我运行它时，我都会得到（以及我尝试过的一百万种排列）

“命令的语法不正确。”

但是当我在提示符 dir /b ..\data\partials\processing | 运行相同的命令时 find /v /c "" 它可以正常工作。

我比 Batch 更熟悉 Bash ......有人可以帮忙吗？

PS>请不要推荐powershell，它不是一个选项。我正在修改现有脚本。

```
@echo off
call %~dp0..\config\script\set_environment.bat
copy %ENDECA_PROJECT_DIR%\test_data\partial\* %ENDECA_PROJECT_DIR%\data\partials\incoming
for /F %%i in ('dir /b "..\data\partials\processing\*.txt"') do ( call call %~dp0runcommand.bat --skip-definition PartialUpdate 2>&1 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:57:06.083

尝试这个。我还没来得及检查，正要下班，和你的情况非常相似，只是做了一些小改动。

```
@echo off

for /F %%i in ('dir /b "c:\mydirectory\*.*"') do (
    call otherscript.bat
    goto :EOF
)

echo Folder is empty or does not exist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:45:03.187

事实上，您的`if`命令确实有不正确的语法。左括号应与`if`.

但是，如果您只计算文件以检查结果是否大于 0，则可以尝试不同的方法：

```
(DIR /B "*path*" | FINDSTR . 1>NUL) && (
  *command to run if the directory has files*
) || (
  *command to run if no file exists*
) 
```

如果前一个以零退出代码终止，则这`&&`会导致以下命令或命令块运行。类似`||`，但检查前一个命令或命令块是否以*非零*退出代码结束。

如果在输入流中没有找到任何内容，该`FINDSTR`命令将设置一个非零退出代码。由于搜索词很简单`.`，它代表*任何字符*，因此只有在导致空输出时才能设置非零退出代码`DIR`，这反过来意味着*`path`*没有任何文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:01:50.833

非空目录不会将 cnt 设置为文件名，因此如果 cnt 为空，则文件夹为空。

```
set cnt=
for  %%a in (..\data\partials\processing\*.*) do set cnt=%%a

if !%cnt%!==!! call otherscript.bat 
```

# php - 网站设备检测

> ID：15299088
> 
> 赞同：0
> 
> 时间：2013-03-08T16:46:11.907
> 
> 标签：php, web-deployment, device-detection

我觉得这个问题以前必须在这里回答过，但我在任何地方都找不到。

网站能否检测到用户正在使用什么*设备*进行浏览？例如，如果用户正在浏览网站以查找应用程序，它是否知道根据他们使用的设备显示指向**Google Play**或**Apple App Store的链接？**

我认为`$HTTP_USER_AGENT`这还不够，因为 iPad 用户可能正在使用[Chrome](http://www.google.com/intl/en/chrome/browser/mobile/ios.html)，而 Android 用户可能正在使用[Firefox](https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=en)等。

我可以使用 PHP，当然还有 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:27:10.440

The only way to detect the device or web browser it the User Agent String, Every web browser has to provide User Agent as per the HTTP 1.1 Protocol. The User Agent String can contain multiple product tokens. By convention, the product tokens are listed in order of their significance for identifying the application.

For browsers based on Mozilla, the user-agent string shall follow the format:

```
 MozillaProductToken (MozillaComment) GeckoProductToken *
    (VendorProductToken|VendorComment) 
```

Applications that embed the Gecko layout engine shall have user-agent strings that follow the format:

```
 ApplicationProductToken (ApplicationComment) GeckoProductToken *
    (VendorProductToken|VendorComment) 
```

Where:

```
 ProductToken     :      Mozilla/ MozillaVersion
 Version          :      Major . Minor
 Comment          :      ( Platform; Security; OS-or-CPU;
                                 Localization information; 
                                 GeckoVersion)*[; Optional Other Comments] )
 Platform         :      Windows, Linux, Mac etc.
 Security         :      N for no security; 
                         U for strong security; 
                         I for weak security
 OS-or-CPU        :      Windows Version/MacOS 
 GeckoVersion     :      String starting with "rv:" followed 
                         by the Gecko version
 GeckoProductToken:      Gecko/GeckoDate
 GeckoDate        :      Date in the format YYYYMMDD 
```

Examples

Mozilla Release

```
 Mozilla/5.001 (windows; U; NT4.0; en-US; rv:1.0) Gecko/25250101 
```

A branded release based on the same codebase as the browser above

```
 Mozilla/5.001 (Macintosh; N; PPC; ja; rv:1.0) Gecko/25250101 
       MegaCorpBrowser/1.0 (MegaCorp, Inc.) 
```

A re-branded release

```
 Mozilla/9.876 (X11; U; Linux 2.2.12-20 i686, en; rv:2.0) Gecko/
        25250101 Netscape/5.432b1 (C-MindSpring) 
```

A Gecko-based browser

```
 TinyBrowser/2.0 (TinyBrowser Comment; rv:1.9.1a2pre) Gecko/20201231 
```

# OPERA

User String Specifications:

```
 Opera/Version (OS-or-CPU; Encryption; Language) 
```

# Chrome

They uses WebKit as its rendering engine but uses a different JavaScript engine. For Chrome’s initial beta release, version 0.2, the user-agent string carries along all of the information from WebKit as well as an extra section for the Chrome version. The format is as follows:

```
 Mozilla/5.0 (Platform; Encryption; OS-or-CPU; Language) 
  AppleWebKit/AppleWebKitVersion (KHTML, like Gecko) Chrome/
  ChromeVersion Safari/SafariVersion

  Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, 
  like Gecko) Chrome/0.2.149.29 Safari/525.13 
```

# Konqueror

Konqueror, the browser bundled with the KDE Linux desktop environment, is based on the KHTML open-source rendering engine. Though available only on Linux, Konqueror has an active user base. For optimal compatibility, Konqueror opted to format its user-agent string after IE as follows:

```
 Mozilla/5.0 (compatible; Konqueror/3.5; SunOS) KHTML/3.5.0 (like Gecko) 
```

# WebKit

In 2003, Apple announced that it would release its own web browser, called Safari. The Safari rendering engine, called WebKit, began as a fork of the KHTML rendering engine used in the Linux-based Konqueror web browser. But how do you ensure that the browser isn’t locked out of popular sites? The answer is, put enough information into the user-agent string to convince web sites that the browser is compatible with another popular browser. This led to a user-agent string with the following format:

```
 Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en) AppleWebKit/
 124 (KHTML, like Gecko) Safari/125.1 
```

# Mobile and Tablet indicators

The platform part of the UA string indicates if Firefox is running on a phone-sized or tablet device. When Firefox runs on a device that has the phone form factor, there is a Mobile; token in the platform part of the UA string. For example:

```
 Mozilla/5.0 (Android; Mobile; rv:13.0) Gecko/13.0 Firefox/13.0

 Mozilla/5.0 (Android; Tablet; rv:13.0) Gecko/13.0 Firefox/13.0 
```

However, if you use UA sniffing to target content to a device form factor, please look for Mobi (to include Opera Mobile, which uses "Mobi") for the phone form factor and do not assume any correlation between "Android" and the device form factor.

Android

```
 Phone    :     Mozilla/5.0 (Android; Mobile; rv:13.0) Gecko/13.0 Firefox/13.0
 Tablet   :     Mozilla/5.0 (Android; Tablet; rv:13.0) Gecko/13.0 Firefox/13.0 
```

Firefox OS

```
 Phone    :     Mozilla/5.0 (Mobile; rv:15.0) Gecko/15.0 Firefox/15.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T16:08:39.780

您可以同时使用服务器端和客户端技术来智能猜测访问者正在使用哪个设备：

*   PHP 可以解析用户代理或在已知设备的数据库中查找它
*   Javascript 可以检测浏览器的许多 API 和功能，让您对设备功能有一个很好的了解。

虽然没有真正的保证（您基本上信任浏览器*选择*告诉您的任何信息），但这里有两个您可以了解用户设备的示例：

*   [http://www.thisdevice.info](http://www.thisdevice.info)
*   [http://www.browserleaks.com](http://wwww.browserleaks.com)

# perl - 未显示在多个哈希中使用的数组 ref 的元素

> ID：15299091
> 
> 赞同：1
> 
> 时间：2013-03-08T16:46:17.583
> 
> 标签：perl, hashref, arrayref

在下面的代码中，当打印数组的内容时，hashref2 的 key3 没有所需的值（我想要实现的是 hashref1 在 key3 中有一个带有 value1 的数组，而 hashref2 在 key3 中有一个带有 value2 的数组）。

在代码流中，我需要先填充 hashrefs，然后将数据推送到子数组。

您能否建议使用对子数组的引用是否是正确的方法？

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my @array;
my @subarray;

# Puash to array
my $hashref1 = {
  key1 => 'value1_1',
  key2 => 'value1_2',
  key3 => \@subarray
};
push (@array, $hashref1);

# push some data in subarray
push (@subarray, 'value1');

# clear subarray
splice(@subarray);

# Puash to array
my $hashref2 = {
  key1 => 'value2_1',
  key2 => 'value2_2',
  key3 => \@subarray
};
push (@array, $hashref2);

# push some data in subarray
push (@subarray, 'value2');

print  "hashref1:\n".Dumper($hashref1);
print  "hashref2:\n".Dumper($hashref2);

print  "array:\n".Dumper(@array); 
```

出去：

```
hashref1:
$VAR1 = {
          'key2' => 'value1_2',
          'key1' => 'value1_1',
          'key3' => [
                      'value2'
                    ]
        };
hashref2:
$VAR1 = {
          'key2' => 'value2_2',
          'key1' => 'value2_1',
          'key3' => [
                      'value2'
                    ]
        };
array:
$VAR1 = {
          'key2' => 'value1_2',
          'key1' => 'value1_1',
          'key3' => [
                      'value2'
                    ]
        };
$VAR2 = {
          'key2' => 'value2_2',
          'key1' => 'value2_1',
          'key3' => $VAR1->{'key3'}
        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T16:56:20.783

您在所有哈希引用中存储对*同一数组的引用。*这意味着如果您修改`@subarray`，所有引用它的散列似乎都会一致更改。

而是制作单独的浅拷贝，如

```
@subarray = ('value2');
my $hashref2 = {
  key1 => 'value2_1',
  key2 => 'value2_2',
  key3 =>  [ @subarray ],
};
push (@array, $hashref2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:55:17.357

我猜你只是不完全理解引用是如何工作的。你基本上是在推送对同一个数组的引用，所以难怪你有这个数组的完全相同的内容。

您需要做的是创建一个新的数组引用。这是正确的代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my @array;
my $subarray = [];

# Puash to array
my $hashref1 = {
  key1 => 'value1_1',
  key2 => 'value1_2',
  key3 => $subarray
};
push (@array, $hashref1);

# push some data in subarray
push ( @$subarray, 'value1' );

# create a new subarray
$subarray = [];

# Puash to array
my $hashref2 = {
  key1 => 'value2_1',
  key2 => 'value2_2',
  key3 => $subarray
};
push (@array, $hashref2);

# push some data in subarray
push ( @$subarray, 'value2' );

print  "hashref1:\n".Dumper($hashref1);
print  "hashref2:\n".Dumper($hashref2);

print  "array:\n".Dumper(@array); 
```

# c# - 如何模拟在 using() 块中实例化的对象

> ID：15299093
> 
> 赞同：3
> 
> 时间：2013-03-08T16:46:29.107
> 
> 标签：c#, entity-framework, unit-testing, mocking, using-statement

*从我经常阅读的实体框架*中读取/写入上下文时，建议尽可能缩短上下文的生命周期（每个工作单元一个上下文）。这样做很有意义，但是我应该如何为在每个方法中创建和处理此上下文的类编写单元测试？

让我们看一个简化的虚构示例代码片段：

```
public class Resource : IResource {
    public Item GetItem(string name) {
        using(var context = new DbContext()) {
            return context.Items.FirstOrDefault(item => item.Name == name);
        }
    }
} 
```

如果我想对资源进行单元测试，我想模拟 DbContext，所以它会为我返回一些假数据。

我通常的方法是使 DbContext 成为我的类的属性并像这样从外部注入它：

```
public class Resource : IResource {
    public DbContext Context { private get; set; }

    public Item GetItem(string name) {
        return this.Context.Items.FirstOrDefault(item => item.Name == name);
    }
} 
```

这样，注入上下文的实例化类负责生命周期，我可以省略使用*，*当然我可以注入一个模拟上下文。

现在考虑到，提供一个长期存在的上下文可能是一个坏主意，并且遵循*每个工作单元一个上下文的*原则，这个选项是不利的。

那么我有什么选择呢？一个想法是注入一个 ContextFactory，它可以像这样按需创建和处理上下文：

```
public class Resource : IResource {
    public DbContextFactory ContextFactory { private get; set; }

    public Item GetItem(string name) {
        using(var context = ContextFactory.CreateContext()) {
            return context.Items.FirstOrDefault(item => item.Name == name);
        }
    }
} 
```

这是有道理的还是我会进入一个完全错误的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:49:33.393

选项是使用方法注入：

```
 public Item GetItem(string name, DbContext context) {
        using(var context) {
            return context.Items.FirstOrDefault(item => item.Id == id);
        }
    } 
```

Seemann 在他[的 .Net 中的依赖注入](http://www.manning.com/seemann/)一书中也使用这种方法来注入依赖关系，这种依赖关系可以随着调用而改变。

但我会使用`ContextFactory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T07:43:22.040

我查看了 Mark Seemann 的书（由 Anton Sizikov 提到），他实际上也使用了工厂，称其为*临时一次性*的。它在某种程度上是一个*泄漏抽象*，因为工厂管理一次性依赖项的生命周期而不是 DI 容器。仍然比由于未处置的一次性用品或已处置的共享依赖项引起的异常而发生内存泄漏要好。

# javascript - jQuery tablesorter：仅在 ajax 更新 IE8 后过滤器和斑马小部件停止工作

> ID：15299094
> 
> 赞同：1
> 
> 时间：2013-03-08T16:46:34.873
> 
> 标签：javascript, jquery, html, tablesorter

我正在使用版本 jquery-1.7.2.min、TableSorter 2.7.12 min、tableSorter 2.4+ 小部件动态更新表 - 更新于 2013 年 2 月 24 日。

该代码在 IE9 和 Chrome 中运行良好，但在 IE8 中，过滤器和斑马小部件在 ajax 更新后停止工作，排序仍然有效。

```
<table class="tablesorter">
    <thead>
        <tr>
            <th style="width: 145px;">Orig_Time</th>
            <th style="width: 145px;">Corra_Time</th>
            <th style="width: 120px;">Site</th>
            <th style="width: 120px;">Area</th>
            <th>Reference</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

```
$(document).ready(function() {
 $("table").tablesorter({
    sortList: [[0, 1]],
    widthFixed: true,
    theme: 'green',
    widgets: ["filter", "stickyHeaders"],
    widgetOptions: {
        stickyHeaders: "tablesorter-stickyHeader",
        filter_cssFilter: "tablesorter-filter",
        filter_hideFilters: false,
        filter_functions: {
            3: {
                "Midlands+North": function(f) {
                    return f === "Midlands" | f === "North";
                },
                "Scotland+NI": function(f) {
                    return f === "Scotland" | f === "N.Ireland";
                },
                "South+East": function(f) {
                    return f === "South" | f === "East";
                },
                "Wales+West": function(f) {
                    return f === "Wales" | f === "West";
                },
                "Mid+Nor+Sco+NI": function(f) {
                    return f === "Midlands" | f === "North" | f === "Scotland" | f === "N.Ireland";
                },
                "Sou+Eas+Wal+Wes": function(f) {
                    return f === "South" | f === "East" | f === "Wales" | f === "West";
                }
            }
        }
    }
 });
});

function alarms() {
 $("table tbody").load("includes/alarmsResults.php", function() {
    $("table").trigger("update");
 });
}

window.setInterval(alarms, 10000); 
```

alarmsResults.php 只是运行一个 sql 查询并在`<tr><td>`标签中返回结果。

如果数据是静态的，但在更新过滤器和斑马停止工作后，IE8 可以正常使用插件。请问有什么想法吗？

我尝试过使用 tableSorter 2.1 小部件 - 更新于 2012 年 4 月 2 日和旧过滤器，它可以工作，但它没有自定义过滤器选项。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:11:32.973

我找到了问题，我！我已经添加了 sql 查询在最后一个`</tr> <small>$time</small>`. IE8 不喜欢它，因为它包含在没有`<tr><td>`标签的 tbody 中，IE9 和 chrome 只是忽略了它。

# encoding - python 2.x中商标符号的长度

> ID：15299096
> 
> 赞同：4
> 
> 时间：2013-03-08T16:46:37.810
> 
> 标签：encoding, python-2.7

为什么是

```
>>> len('™')
>>> 3 
```

在 python 2.x 中？

如何快速修复它以将其视为一个字符（如 Python 3.x？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:48:26.280

您的终端编码设置为 UTF8。您正在计算编码字符中的字节数：

```
>>> '™'
'\xe2\x84\xa2'
>>> len('™')
3 
```

使用 unicode 来计算字符而不是字节：

```
>>> u'™'
u'\u2122'
>>> len(u'™')
1 
```

或从终端编码解码*：*

```
>>> import sys
>>> '™'.decode(sys.stdin.encoding)
u'\u2122' 
```

在 Python 3 中，字符串是`unicode`值，而 Python 2`str`类型重命名为`byte`（您的输入与 Python 3 中的输入基本相同`b'™'`）。

你可能想阅读 Python 和 Unicode：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

# iphone - ios http直播黑屏

> ID：15299098
> 
> 赞同：2
> 
> 时间：2013-03-08T16:46:47.527
> 
> 标签：iphone, ios, ffmpeg, video-streaming, http-live-streaming

在我的 ios 应用程序中，我正在尝试使用 http 实时流播放视频。播放进行得很顺利，直到我决定使用洗涤器并跳到尚未缓冲的某个点。从那一刻起，音频继续播放，但视频变黑。

我已经使用以下命令转换了我的 .MP4 视频：

```
avconv -y -i video.mp4 -f mpegts -acodec libmp3lame -ar 48000 -ab 64k -s 640x480 -vcodec libx264 -b 64k -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 7 -trellis 0 -refs 0 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 64k -bufsize 64k -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 30 -qmax 51 -qdiff 4 -level 30 -aspect 640:480 -g 30 -async 2 sample_64.ts 
```

我使用多种比特率（64、150、240、440 和 640）进行了此操作，并创建了一个`.m3u8`包含不同流的。转换后，我使用 将`mediafilesegmenter`视频分割成每 10 秒的片段。

擦洗后，输出窗口中会出现以下内容：

```
2013-03-08 17:30:21.827 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Disabling autoplay for pause
2013-03-08 17:30:21.827 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Disabling autoplay
2013-03-08 17:30:21.977 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: _streamUnlikelyToKeepUp: 1 -> 0
2013-03-08 17:30:21.978 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-03-08 17:30:21.978 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: _streamRanDry: 0 -> 1
2013-03-08 17:30:21.980 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Took background task assertion (32) for playback stall
2013-03-08 17:30:21.981 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-03-08 17:30:22.634 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: _streamUnlikelyToKeepUp: 0 -> 0
2013-03-08 17:30:22.634 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: _streamRanDry: 0 -> 1
2013-03-08 17:30:22.667 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2013-03-08 17:30:22.769 Geschiedenis Trainer[88129:19a03] [MPAVController] Autoplay: Ending background task assertion (32) for playback stall 
```

我的视频播放器的代码：

```
self.streamPlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
[self.view addSubview:self.streamPlayer.view];
[self.streamPlayer setFullscreen:YES animated:YES]; 
```

跳到已缓冲的点时不会发生此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:08:42.537

The problem was in the conversion of my videos. I was using an outdated version of `avconv`/`ffmpeg`. I updated ffmpeg to the latest version (1.1) and that solved the problem.

After converting the video I used apple's `mediafilesegmenter` to split the video in 10 second segments. Before updating ffmpeg it generated an error: `segment does not contain sync frame` for each segment. After updating ffmpeg this error disappeared and so did the streaming problems.

# c# - 生成可以在白色字体上轻松读取的颜色的算法？

> ID：15299099
> 
> 赞同：3
> 
> 时间：2013-03-08T16:46:49.533
> 
> 标签：c#, asp.net, algorithm

给定 HSV 或 RGB，是否有一种算法可以为背景生成随机颜色，保证在纯白色字体上可读？

尽管我使用的是 C#，但它不一定是特定于语言的实现。

谢谢

我做了这个，但我相信它可以改进：

```
 public static System.Drawing.Color GenerateRandomLiteColor()
        {
            var rnd = new Random(DateTime.Now.Millisecond);
            double mul = 240.0;
            HSLColor c = new HSLColor(rnd.NextDouble() * mul,
                ((rnd.NextDouble() * 0.6) + 0.5) * mul, ((rnd.NextDouble() * 0.35) + 0.5) * mul);

            string s = c.ToRGBString();
            return c;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:24:10.393

对于 RGB，有一个计算颜色亮度的公式：

**0.299 * R + 0.587 * G + 0.114 * B**

如您所见，每种 R、G、B 颜色都有自己的亮度系数。要在白色背景上生成可读字体，请生成完全随机的颜色。然后检查它的亮度是否小于某个预定义的常数**C**。如果它超过**C**并且等于某个**D > C**，则将 R、G、B 值中的每一个乘以**C / D**以使亮度等于**C**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:53:26.507

使用 HSL，您可以说 L 低于某个值的任何东西都是可见的，它有足够的暗度来提供足够的对比度。但这将是一个主观价值。你可以让 H 和 S 随机。然后可以将 HSL 转换为 HSV 或 RGB。

L 不应该是随机的。或者它可能在您预定义的范围内以提供足够的对比度。即低于固定的Lmax。

# android - 选项卡更改后在选项卡视图中恢复数据

> ID：15299100
> 
> 赞同：1
> 
> 时间：2013-03-08T16:46:56.080
> 
> 标签：android, tabs, android-fragments

我有一个需要在两个选项卡之间切换的 Android 应用程序。我正在使用片段。问题是，当我在一个选项卡上的 editText 框中键入内容并切换到另一个选项卡时，原始选项卡会重置为默认值。

根据我在不同论坛上找到的答案，我正在保存状态：

```
@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the
    // container view.
    Fragment fragment = new TabsSectionFragment();
    //fragment.setRetainInstance(true);
    Bundle args = new Bundle();
    args.putInt(TabsSectionFragment.ARG_SECTION_NUMBER,
            tab.getPosition() + 1);
    fragment.setArguments(args);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.container, fragment).commit();
}

@Override
public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
} 
```

在 onCreateView 中，我正在加载几个布局：

```
public static class TabsSectionFragment extends Fragment {
    public static final String ARG_SECTION_NUMBER = "section_number";

    public TabsSectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        int selectedSection = getArguments().getInt(ARG_SECTION_NUMBER);
        switch (selectedSection)
        {
            case 1:
                // load the input layout XML
                LayoutInflater factory1 = LayoutInflater.from(getActivity());
                View myView1 = factory1.inflate(R.layout.tab1, null);
                return myView1;

            case 2:
                // load the summary layout XML
                LayoutInflater factory2 = LayoutInflater.from(getActivity());
                View myView2 = factory2.inflate(R.layout.tab2, null);
                return myView2;

            default:
                // Create a new TextView and set its text to the fragment's section
                // number argument value.
                TextView textView = new TextView(getActivity());
                textView.setGravity(Gravity.CENTER);
                textView.setText(Integer.toString(getArguments().getInt(
                        ARG_SECTION_NUMBER)));

                return textView;
        }
    }
} 
```

我应该如何使用 savedInstanceState 来恢复选项卡状态，这样我就不会丢失在切换选项卡之前输入的信息。

我还读到有些人建议隐藏和显示片段而不是保存/重新加载状态。有什么更好的选择。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:08:24.260

我会改变你的方法并使用 tabhost

```
 private TabHost tabhost;
 private View view1;
 private View view2;
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
     setContentView(R.layout.mainLayout);
   tabhost = (TabHost) findViewById(R.id.tabhostView);
     tabhost.setup();
     tabhost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);
     view1 = getLayoutInflater().inflate(R.layout.view1,    null);
     view2 = getLayoutInflater().inflate(R.layout.view2, null);
     setupTab(view1, "View1");
     setupTab(view2, "View2");
 //set tab
 tabhost.setCurrentTab(getIntent().getExtras().getInt(CURRENT_TAB));
 } 
```

然后创建 2 个方法来设置每个视图，例如：

```
 private void buildView1(View view) {
  <enter code here>
   view.invalidate
} 
```

# java - 如何从 Android 中的任何时区获取特定时间？

> ID：15299101
> 
> 赞同：2
> 
> 时间：2013-03-08T16:46:58.460
> 
> 标签：java, android, mobile

我已经设法使用 TimeZone 实用程序获取特定时区，现在我使用 .getDefault 作为示例。但是，我无法仅凭此获得该国的确切时间，所以我想知道如何实施？我必须使用日历吗？下面是我的代码。

```
 TimeZone tz = TimeZone.getDefault();
String TimeZoneName = tz.getDisplayName();
int TimeZoneOffset = tz.getRawOffset()/(60 * 60 * 1000);

t.setText("default time zone:" + 
        TimeZoneName + " : " +String.valueOf(TimeZoneOffset) + tz.getID() ); 
```

这带有默认时区：格林威治同时，gmt：0，欧洲/都柏林，我希望它最后显示确切的时间。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:49:13.427

Joda Time 有一个完整的列表`Canonical ID`，您可以从哪里获得 TimeZone，具体取决于`Canonical ID`.

因此，如果您想在此时获取纽约的当地时间，您可以执行以下操作

```
// get current moment in default time zone
    DateTime dt = new DateTime();
    // translate to New York local time
    DateTime dtNewYork = dt.withZone(DateTimeZone.forID("America/New_York")); 
```

# windows-7 - 工作表上的 Excel 2010 MS 日期选择器工作突然无法工作

> ID：15299109
> 
> 赞同：1
> 
> 时间：2013-03-08T16:47:24.813
> 
> 标签：windows-7, datepicker, excel-2010, 32-bit, ocx

我在 32 位 Windows 7 中运行 32 位 Excel 2010。一年多来，我一直在多个工作簿中使用“Microsoft Date and Time Picker Control 6.0 (SP6)”。昨天我打开了我正在进行编码的主模板工作簿，日期选择器**突然**完全停止运行。在工作表上控件所在的位置，反而显示了一些无意义符号的图像。
我尝试使用 regsvr32 注册 3 个不同版本的 Mscomct2.ocx，每次都重新启动我的系统。我尝试了 2 个版本的 SP6 ocx 和 1 个版本的 SP4 ocx。这并没有改变什么。注册的控件现在显示为 (SP6)，但在我的系统上仍然无法运行。
此外，当我尝试在工作表上手动插入这种类型的新控件时，我得到完全没用的“无法插入对象”。错误。
我最近安装了一个我认为可能导致问题的软件，它被 Cabinet Vision 称为“Solid Essential 8.0”。但是，如果这个软件覆盖了 ocx，我的覆盖和注册新版本的 ocx 不能解决问题吗？或者我是否还缺少其他东西才能使该控件正常运行？

我已经为此搜索了答案，并且对于我发现的每个帖子，我都尝试了该解决方案，但尚未修复。当建议不能解决问题时，他们通常建议使用完全不同的方法。我想要的是有人解释如何修复控件本身 - 不要告诉我使用不同的方法，如果没有人可以告诉我如何修复已经到位的控件，我会这样做。这些控件在我们办公室的所有其他系统上都可以正常工作 - 其他人都可以正常查看控件并可以按预期使用它们。这就是为什么我决心修复控制问题，而不是仅仅因为*我的*系统坏了就使用不同的方法。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:09:39.260

根据一些帖子，需要注册两个二进制文件：

```
@%systemroot%\system32\regsvr32 MSCOMCTL.OCX
@%systemroot%\system32\regsvr32 MSCOMCT2.OCX 
```

# mysql - Glassfish 中 BasicAuth 的 MySQL 表

> ID：15299110
> 
> 赞同：0
> 
> 时间：2013-03-08T16:47:26.830
> 
> 标签：mysql, rest, glassfish, basic-authentication

我正在使用 Jersey 在 NetBeans 7.3 中部署 RESTful Web 服务。我正在使用 Glassfish 3.1.2 和 MySQL 数据库中的数据。现在我想配置**Basic-Authentication**。

我首先遵循了一些教程，数据库中只有 3 个表，如下所示：http: [//jugojava.blogspot.pt/2011/02/jdbc-security-realm-with-glassfish-and.html](http://jugojava.blogspot.pt/2011/02/jdbc-security-realm-with-glassfish-and.html)

一切顺利。但现在，我想在我的数据库中应用它。表格必须遵循一定的规则，对吧？我正在尝试创建 2 个新表：**groups**和**login_groups**（就像在教程中一样，但我在教程中名为“users”的表是我的名为“ **login** ”的表，它已经存在）。但我无法在表 login_groups 和登录之间创建**外键。**我已经在 login_groups 和组之间创建了一个，我没有问题。

这是我的代码表：

表**登录**：

```
 CREATE TABLE `login` (
  `id` mediumint(8) NOT NULL AUTO_INCREMENT,
  `login` varchar(100) COLLATE utf8_bin NOT NULL,
  `password` varchar(32) COLLATE utf8_bin NOT NULL,
  `privileges` enum('system','installer','administrator') COLLATE utf8_bin NOT NULL,
  `secret_id` varchar(32) COLLATE utf8_bin NOT NULL,
  `User_id` mediumint(8) unsigned NOT NULL,
  `isLogged` bit(1) NOT NULL,
  `Language` enum('Portuguese','English') COLLATE utf8_bin NOT NULL,
  `deleted` bit(1) NOT NULL,

  PRIMARY KEY (`id`),
  UNIQUE KEY `secret_id_UNIQUE` (`secret_id`),
  KEY `fk_Login_User1` (`User_id`),
  CONSTRAINT `fk_Login_User1` FOREIGN KEY (`User_id`) REFERENCES `user` (`id`) 
  ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

表**组**：

```
 CREATE  TABLE IF NOT EXISTS `lul`.`groups` (
`group_id` MEDIUMINT(8) NOT NULL ,
`group_name` VARCHAR(45) NOT NULL ,
`group_desc` VARCHAR(45) NULL DEFAULT NULL ,

PRIMARY KEY (`group_id`) )
ENGINE = InnoDB DEFAULT CHARACTER SET = utf8 COLLATE = utf8_bin; 
```

表**login_groups**：

```
 CREATE  TABLE IF NOT EXISTS `lul`.`login_groups` (
  `login_id` MEDIUMINT(8) NOT NULL ,
  `group_id` MEDIUMINT(8) NOT NULL ,

  PRIMARY KEY (`login_id`, `group_id`) ,
  INDEX `fk_login` (`login_id` ASC) ,
  INDEX `fk_groups` (`group_id` ASC) ,
  CONSTRAINT `fk_login`
  FOREIGN KEY (`login_id` ) REFERENCES `lul`.`login` (`id` )
  ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_groups`
  FOREIGN KEY (`group_id` ) REFERENCES `lul`.`groups` (`group_id` )
  ON DELETE NO ACTION ON UPDATE NO ACTION)

ENGINE = InnoDB DEFAULT CHARACTER SET = utf8 COLLATE = utf8_bin 
```

当我尝试在表 login_groups 和 login 之间创建**外键时，MySQL 中给出的错误是：**

**在服务器错误中执行 SQL 脚本：错误 1005：无法创建表 'lul.login_groups' (errno: 150)**

请注意，我尝试单独创建外键，我可以创建第二个。

你知道我做错了什么吗？或者您知道另一种使用表进行基本身份验证的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:28:33.220

所以我通过我的 MySQL 副本运行了你的 SQL，我得到的唯一错误是在`CREATE TABLE login`脚本中；它不喜欢对表的`user`引用

```
CONSTRAINT `fk_Login_User1` FOREIGN KEY (`User_id`) REFERENCES `user` (`id`)
ON DELETE NO ACTION ON UPDATE NO ACTION 
```

我想你已经在别处定义了？

table 完全没有问题`login_groups`。您是否尝试使用数据更改现有表，其中该数据违反了任何所需的约束[在另一个表中引用的 id 未在该表中定义]？

# c# - 使用命令行或 C# 将应用程序安装到 ipad

> ID：15299111
> 
> 赞同：0
> 
> 时间：2013-03-08T16:47:28.420
> 
> 标签：c#, macos, ipad, scripting-bridge

我为我的 ipad 创建了一个尝试。我想将它安装到我的 ipad 中。是否有命令行代码可用于在 ipad 上安装和启动我的应用程序。或者可以通过C#来完成。是只能在 MAC 中实现，还是在 Windows 中也可以。

基本上，我正在尝试找到一种方法来自动化在 ipad 上安装和启动应用程序的过程。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:04:56.447

简短的回答是，您只能在 Mac 上进行 iOS 开发。

iOS 应用程序只能使用 Apple 的工具 XCode（仅适用于 Mac）创建。有一些工具可以让您进行某种程度的跨平台开发，例如[MonoTouch](http://xamarin.com/monotouch)和[PhoneGap](http://phonegap.com) ...但您仍然可以使用 XCode 创建可部署的应用程序“包”。

iOS 开发唯一支持的语言是 Objective-C。（Monotouch 可以让您使用 C# 进行开发……但您仍然需要将结果放到 Mac 上来构建应用程序。）

为了将应用程序加载到 iOS 设备上——除了通过应用程序商店——你需要注册 iOS 开发者计划（这将花费你至少 99 美元）。您通常还需要在您的 Apple 开发人员配置文件（在 Apple 开发人员网站和您的 XCode 副本中）中注册（“提供”）每个测试设备。

[TestFlight](http://www.testflightapp.com/)是一项免费服务，可帮助您将应用程序部署给 beta 测试人员（例如，它允许您通过电子邮件将更新发送给测试人员）。但这并*不能*消除对开发人员计划成员资格（或设备配置）的需求。

更多信息可在[Apple 开发者网站上](http://developer.apple.com)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:06:13.450

你可以使用[Xamarin.iOS](http://xamarin.com/monotouch)在 C# 中构建 iPad 应用程序。您可以在 Windows 计算机上编写代码，但最终构建和部署必须在带有 XCode 的 Mac 上完成。

如果您非常熟悉 C#，那可能是一种方法。无论如何，您必须使用 Mac 进行部署。

![Xamarin.iOS 插件示意图](../Images/f403cb808750b9c71ceaba0415bdce64.png)

# google-maps-api-3 - Google Maps V3 fitBounds 可见标记

> ID：15299113
> 
> 赞同：5
> 
> 时间：2013-03-08T16:47:31.150
> 
> 标签：google-maps-api-3

很难获得关于此的明确信息，但我想要实现的是可见标记上的 fitBounds 。

数组定义了标题、类别、纬度/经度和href。它将所有标记添加到地图中，但仅显示第一个类别。当您单击其他类别时，它也会显示这些类别。

我可以让 fitBounds 处理其他较小的示例，其中它只需要在初始负载时 fitBounds 但现在我想在每次显示/隐藏标记时都 fitBounds 。

任何建议表示赞赏。

```
function initialize() {
            var markers = new Array();
            var locations = [
                ['Ness Country Park', '', 'walking', 54.933402, -7.197418, "/local-activities/specific/ness-country-park"],
                ['Learmount Forest', '', 'walking', 54.862672, -7.085495, "/local-activities/specific/learmount-forest"],
                ['Muff Glen', 'Muff Glen Forest is nestled in a valley, just outside Eglinton. ', 'walking', 55.029472, -7.170124, "/local-activities/specific/muff-glen"],
                ['Banagher Forest', '', 'walking', 54.893855, -7.020693, "/local-activities/specific/banagher-forest"],
                ['Binevenagh Forest', '', 'walking', 55.083549, -6.901131, "/local-activities/specific/binevenagh-forest"],
                ['17th Century Walls', '', 'explore', 54.997666, -7.319770, "/local-activities/specific/17th-century-walls"],
                ['Apprentice Boys Memorial Hall', '', 'explore', 54.995339, -7.323890, "/local-activities/specific/apprentice-boys-memorial-hall"],
                ['The Bogside Artists', '', 'explore', 54.998466, -7.325177, "/local-activities/specific/the-bogside-artists"],
                ['Foyle Valley Railway Museum', '', 'explore', 54.991154, -7.321572, "/local-activities/specific/foyle-valley-railway-museum"],
                ['Gasyard Heritage Centre', '', 'explore', 54.989923, -7.333674, "/local-activities/specific/gasyard-heritage-centre"],
                ['The Guildhall', '', 'explore', 54.996053, -7.320800, "/local-activities/specific/the-guildhall"],
                ['Harbour Museum', '', 'explore', 54.998269, -7.319427, "/local-activities/specific/harbour-museum"],
                ['Museum of Free Derry', '', 'explore', 54.997099, -7.326121, "/local-activities/specific/museum-of-free-derry"],
                ['Riverwatch Aquarium and Visitor Centre', '', 'explore', 54.988950, -7.317538, "/local-activities/specific/riverwatch-aquarium-and-visitor-centre"],
                ['St Augustines Church', '', 'explore', 54.994736, -7.324040, "/local-activities/specific/st-augustines-church"],
                ['St Columbs Cathedral', '', 'explore', 54.994564, -7.322345, "/local-activities/specific/st-columbs-cathedral"],
                ['St Columbas Church Tower', '', 'explore', 55.010132, -7.330992, "/local-activities/specific/st-columbas-church-tower"],
                ['Tower Museum', '', 'explore', 54.997112, -7.320328, "/local-activities/specific/tower-museum"],
                ['Workhouse Museum', '', 'explore', 54.994995, -7.305071, "/local-activities/specific/workhouse-museum"],
                ['Hezlett House', '', 'explore', 55.161697, -6.787148, "/local-activities/specific/hezlett-house"],
                ['Mussenden Temple & Downhill Demense', '', 'explore', 55.166404, -6.819849, "/local-activities/specific/mussenden-temple-and-downhill-demense"],
                ['Springhill House', '', 'explore', 54.685615, -6.656857, "/local-activities/specific/springhill-house"],
                ['Fort Dunree', '', 'explore', 55.196691, -7.547607, "/local-activities/specific/fort-dunree"],
                ['Barron Top Fun Farm', '', 'explore', 54.856497, -7.335434, "/local-activities/specific/barron-top-fun-farm"],
                ['Ulster American Folk Park', '', 'explore', 54.587973, -7.377191, "/local-activities/specific/ulster-american-folk-park"],
                ['Wellbrook Beetling Mill', '', 'explore', 54.651366, -6.836071, "/local-activities/specific/wellbrook-beetling-mill"],
                ['Claudy Country Park', '', 'cycling', 54.911868, -7.151756, "/local-activities/specific/claudy-country-park"],
                ['Faughan Valley Cycle Route', '', 'cycling', 54.981797, -7.337022, "/local-activities/specific/faughan-valley-cycle-route"],
                ['Foyle Valley Cycle Route ', '', 'cycling', 55.001530, -7.321208, "/local-activities/specific/foyle-valley-cycle-route-"],
                ['Royal Portrush Golf Club', '', 'golfing', 55.199823, -6.634820, "/local-activities/specific/royal-portrush-golf-club"],
                ['Porstewart Golf Club', '', 'golfing', 55.172149, -6.724534, "/local-activities/specific/porstewart-golf-club"],
                ['Castlerock Golf Club ', '', 'golfing', 55.165945, -6.785645, "/local-activities/specific/castlerock-golf-club-"],
                ['Cregan Country Park', '', 'family', 54.999841, -7.343888, "/local-activities/specific/cregan-country-park"],
                ['Riverwatch Aquarium', '', 'family', 54.988852, -7.317495, "/local-activities/specific/riverwatch-aquarium"],
                ['Far & Wild Adventure Activities', '', 'family', 55.048369, -7.276855, "/local-activities/specific/far-and-wild-adventure-activities"],
                ['Brunswick Cinebowl', '', 'family', 55.013008, -7.324448, "/local-activities/specific/brunswick-cinebowl"],
                ['Campsie Karting', '', 'family', 55.036076, -7.196903, "/local-activities/specific/campsie-karting"],
                ['Barron Top Fun Farm', '', 'family', 54.856497, -7.335434, "/local-activities/specific/barron-top-fun-farm-1"],
                ['Ulster American Folk Park', '', 'family', 54.587973, -7.377191, "/local-activities/specific/ulster-american-folk-park-1"],
                ['Giants Causeway', '', 'family', 55.233317, -6.518154, "/local-activities/specific/giants-causeway"],
                ['Carick-a-Rede Rope Bridge', '', 'family', 55.237282, -6.351643, "/local-activities/specific/carick-a-rede-rope-bridge"],
                ['Mussenden Temple', '', 'family', 55.165410, -6.818218, "/local-activities/specific/mussenden-temple"]
            ];

            //Set up Google Map
            var map = new google.maps.Map(document.getElementById('map-canvas'), {
                zoom: 15,
                center: new google.maps.LatLng(55.013431, -7.314148),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            //InfoBox will be used so InfoWindow is not needed
            //var infowindow = new google.maps.InfoWindow();

            //Set shadow options
            var shadow = new google.maps.MarkerImage('images/marker-shadow.png',
                new google.maps.Size(77.0, 62.0),
                new google.maps.Point(0, 0),
                new google.maps.Point(22.0, 62.0)
            );
            var marker, i;

            for ( var i = 0; i < locations.length; i++ ) {
              console.log(locations[i][3], locations[i][4]);
            }

            for (i = 0; i < locations.length; i++) {  
                marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][3], locations[i][4]),
                map: map,
                shadow: shadow,
                icon: 'images/map_'+locations[i][2]+'_image.png'
            });

            markers.push(marker);

            //Create div for InfoBox content
            var boxText = document.createElement("div");

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function () {
                    //Style InfoBox content
                    boxText.style.cssText = "border: none 0; margin-top: 8px; background:#fff; padding: 8px;border:1px solid #877856;";
                    boxText.innerHTML = locations[i][0]+"<br />"+locations[i][2]+"<br />"+locations[i][1]+"<img src='images/tipbox.png' class='infobox-arrow' />";

                    //Remove close box bug fix
                    $(".infobox-close").remove();

                    //Set InfoBox options
                    var myOptions = {
                        content: boxText
                        ,disableAutoPan: false
                        ,maxWidth: 0
                        ,pixelOffset: new google.maps.Size(-140, -180)
                        ,zIndex: null
                        ,boxStyle: { 
                            opacity: 1
                            ,width: "280px"
                            }
                        ,closeBoxMargin: "12px 7px 0 0"
                        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                        ,infoBoxClearance: new google.maps.Size(1, 1)
                        ,isHidden: false
                        ,pane: "floatPane"
                        ,enableEventPropagation: false
                    };

                    //Move map to center on marker
                    map.setCenter(marker.getPosition());

                    //Attach info box to relevant marker
                    var ib = new InfoBox(myOptions);
                    ib.open(map, marker);

                    //Close InfoBox when map tiles are clicked
                    $("canvas").click(function () {
                        ib.close(map, marker);
                    });
                }
                })(marker, i));
            };

            //shows all markers of a particular category, and ensures the checkbox is checked
            function show(category) {
                for (var i=0; i<locations.length; i++) {
                    if (locations[i][2] == category) {
                        markers[i].setVisible(true);
                    }
                }
            }

            //hides all markers of a particular category, and ensures the checkbox is cleared
            function hide(category) {
                for (var i=0; i<locations.length; i++) {
                    if (locations[i][2] == category) {
                        markers[i].setVisible(false);
                    }
                }
            }

            //show or hide the categories initially
            show("walking");
            hide("golfing");
            hide("family");
            hide("explore");
            hide("cycling");

            //Show/Hide category markers
            $("#activities .checkbox").click(function(){
                var cat = $(this).attr("value");
                // If checked
                if ($(this).is(":checked"))
                {
                    show(cat);

                }
                else
                {
                    hide(cat);
                }
            });
        };

        //Execute function onload
        window.load = initialize(); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T17:02:52.267

好吧，您可以在您的`show`函数中对其进行编程，我为您创建了自己的小提琴，它演示了如何设置从 3 个标记的数组中可见的 2 个标记，并且仅为那些设置 fitBounds：

[小提琴示例](http://jsfiddle.net/22qte/113/)

由于代码现在可见，对于您的情况，您可以创建单独`fitBoundsToVisibleMarkers()`的方法以始终在方法`show()`之后运行`hide()`。例如：

```
function fitBoundsToVisibleMarkers() {

    var bounds = new google.maps.LatLngBounds();

    for (var i=0; i<markers.length; i++) {
        if(markers[i].getVisible()) {
            bounds.extend( markers[i].getPosition() );
        }
    }

    map.fitBounds(bounds);

} 
```

你的代码会这样做：

```
function show(category) {
    for (var i=0; i<locations.length; i++) {
        if (locations[i][2] == category) {
            markers[i].setVisible(true);
        }
    }

    // updating bounds in view
    fitBoundsToVisibleMarkers();
}

function hide(category) {
    for (var i=0; i<locations.length; i++) {
        if (locations[i][2] == category) {
            markers[i].setVisible(false);
        }
    }

    // updating bounds in view
    fitBoundsToVisibleMarkers();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:21:25.127

乍一看，您会认为您可以使用边界对象并跟踪可见的内容。但是由于您还隐藏了标记，并且您无法从边界中删除坐标，因此这是行不通的。

我认为最好的选择是显示/隐藏所需的标记，然后遍历所有标记并将它们添加到新的边界对象（如果可见）。然后对此进行限制。

```
function fitVisibleMarkers() {
    var bounds = new google.maps.LatLngBounds();
    for(var m in markers) {
        if (markers[m].getVisible()) {
            bounds.extend(markers[m].getPosition());
        }
    }
    map.fitBounds(bounds);
}

$("#activities .checkbox").click(function(){
    var cat = $(this).attr("value");
    if ($(this).is(":checked")) {
        show(cat);
    } else {
        hide(cat);
    }
    fitVisibleMarkers();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T16:09:43.007

`enter code here`if(markers[marker_id].getMap() != null ) { document.getElementById('markerlar').innerHTML += '
' +marker_id+''+markers[marker_id].position+''; //markers[marker_id].setMap(null); }

# php - 转换 csv php 上的未定义偏移量

> ID：15299116
> 
> 赞同：1
> 
> 时间：2013-03-08T16:47:33.163
> 
> 标签：php, csv

我在转换 csv 文件时遇到了一个小问题，

文件正在转换，但收到通知

注意：未定义的偏移量：2 英寸 注意：未定义的偏移量：4 英寸

我还需要按 $row[2] 分组这可能吗？

```
<?php

$tsvFile = new SplFileObject('file.csv');
$tsvFile->setFlags(SplFileObject::READ_CSV);
$tsvFile->setCsvControl("\t");

$file = fopen('file2.csv', 'w');
$header = array('col1', 'col2');
fputcsv($file, $header, ',', '"');

foreach ($tsvFile as $line => $row) {
    if($line > 0) {
        fputcsv($file, array($row[2], $row[4]), ',', '"');
    }
}
fclose($file);

?> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:56:42.620

如果某些行在分隔时有 4 个值（列），而其他行只有 1 个，该怎么办？您的代码假定有固定数量的 $row[] 元素。如果你这样做`isset($row[2])`并且它返回 false 那么你知道你不应该尝试访问它，这就是导致通知的原因。

至于为什么没有分配给该偏移量的值，我不能在没有看到 CSV 的情况下说。我发现逗号作为分隔符比制表符更有效——也许你也有:)

不完全确定我知道您所说的“分组依据”是什么意思。您可以轻松地在 foreach 中添加一个运行总计，或者使用其中一列作为维度在另一个数组中保留一个计数，每个维度的总数。

# redis - 来自 NodeJits 的可靠 redis 托管

> ID：15299121
> 
> 赞同：1
> 
> 时间：2013-03-08T16:47:58.217
> 
> 标签：redis, nodejitsu

我正在为 NodeJits 寻找可靠的 Redis 托管解决方案。

IrisCouch 作为 Redis 主机已被证明是不可靠的（尽管它对于 CouchDB 来说非常出色）。我正在寻找更好的选择。

一个考虑因素是 Nodejitsu 在 Joyent 上，因此为了减少延迟，最好将其托管在同一个数据中心。我看到[openredis.com](https://openredis.com/docs/regions)有 Joyent (us-east-1) 的选项。

有没有人在 openredis.com 或任何其他负担得起的 Redis 主机（例如 redis-cloud.com、redis4you.com 等）上使用 NodeJits 有过积极的体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:53:47.873

我过去曾通过 heroku 与[http://redistogo.com/](http://redistogo.com/)合作过，如果您想查看它们，我认为它们是一个可靠的选择。

# php - jQuery - AJAX 表单验证

> ID：15299126
> 
> 赞同：1
> 
> 时间：2013-03-08T16:48:09.807
> 
> 标签：php, jquery, ajax, forms, validation

我是 jQuery 新手，我尝试验证表单。如果标题已经在数据库中，我想用 ajax 和 php 搜索。我编写的以下代码有效，如果标题已经在数据库中，则返回 1，否则返回 0。在此之后，我想向标题文本字段添加一个类。最后，我搜索标题文本字段是否具有该类，如果为 true，则停止表单，否则提交。

即使 php 返回 1，我的脚本也会继续提交表单。我做错了什么？

```
// Process PHP file
$.ajax({
beforeSend: function()
{
    // Show loading
    $('#msg_search_load').removeAttr('style');
},
type: "GET",
url: "ajax_actions.php",
data: "action=search_category_add&title="+$("#category_title").val(),
dataType: "json",
cache: false,

success: function(html)
{
    console.log("Category already exists: "+html.category_found);

    if(html.category_found == 1) 
    {
        $('#msg_search_load').css({ 'display': 'none' });

        $('#msg_search_category').removeAttr('style');

        $("#category_title").addClass("already_exists");
    }
},

complete: function()
{
    // Hide loading
    $('#msg_search_load').css({ 'display': 'none' });
}

});

if($("#category_title").hasClass("already_exists")) { return false; } 
```

这是HTML表单

```
<form name="add_category" id="add_category" action="<?php echo $s_website_url; ?>/category_add.php" method="post">
<input type="hidden" name="action" value="add_category">

<table cellpadding="4" cellspacing="0">
<tr>
<td width="120">
<label for="category_title">Category title:</label>
</td>

<td>

<div class="content_msg" style="display: none;" id="msg_search_load"><img src="<?php echo $s_website_url; ?>/images/icons/loading.gif" class="content_msg_icon" alt="Warning"> Searching if category already exists.</div>

<div class="content_msg" style="display: none;" id="msg_search_category"><img src="<?php echo $s_website_url; ?>/images/icons/warning.png" class="content_msg_icon" alt="Warning"> Category already exists.</div>

<input type="text" name="category_title" id="category_title" class="form_textfield">

`<div class="content_count_chars" id="count_category_title"><span class="content_count_chars_green">100</span> characters remaining</div>
</td>
</tr>
</table>

<div align="center">

<!-- Fix Opera input focus bug -->
<input type="submit" value="Submit" style="display: none;" id="WorkaroundForOperaInputFocusBorderBug">
<!-- Fix Opera input focus bug -->

<input type="submit" value="Submit" class="form_submit">
</div>

</form> 
```

AJAX中使用的PHP代码：

```
// If category already exists
if(isset($_GET['action']) && $_GET['action'] == 'search_category_add')
{   
    $search_category = mysql_query("SELECT `id` FROM `categories` WHERE `title` = '".clear_tags($_GET['title'])."'",$db) or die(mysql_error());

    if(mysql_num_rows($search_category) != 0)
    {
        echo json_encode(array('category_found' => '1'));
    }
    else
    {
        echo json_encode(array('category_found' => '0'));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:43:29.783

我解决了这个问题。我不得不添加`async: false`到 AJAX 设置。

> AJAX 是异步的，这基本上意味着它不会阻止脚本的执行（这很好，因为您的网站在加载时不会冻结）。

工作代码现在看起来像这样：

```
$.ajax({
       url: "ajax_actions.php",
       type: "GET",
       data: { action: "search_category_add", title: $("#category_title").val() },
       dataType: "json",
       async: false,
       success: function(result)
       {
            // console.log("Category already exists: "+result.category_found);

            if(result.category_found == 1) 
            {
                // console.log("Category already exists: Inside if");

                $('#msg_search_category').removeAttr('style');

                validationErrors++;
            }
        }
});

if(validationErrors > 0) { return false; } 
```

# sql-server-2008 - 平面文件导入

> ID：15299129
> 
> 赞同：0
> 
> 时间：2013-03-08T16:48:22.873
> 
> 标签：sql-server-2008, ssis

我有 3M 记录 TXT 文件需要每天导入到 2008 SQL 表。当 SSIS 作业运行时，只需 9 小时即可完成导入。如果我手动使用导入和导出向导，那么导入只需 2-3 分钟。SSIS 脚本是否有问题，或者它是如何工作的？我已经重新创建了 SSIS 脚本 3 次，但仍然遇到同样的问题。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:22:02.950

根据 marceln 评论，将 ssis import wizrd 设置保存为 ssis 包。

见![在此处输入图像描述](../Images/c4672463ac68ffbfebd07cf752be1a3c.png)

在随附的屏幕截图中，您可以看到将设置保存为 ssis packa\ge 的复选框选项。

# android-widget - 在键锁之前创建可访问的应用程序

> ID：15299132
> 
> 赞同：0
> 
> 时间：2013-03-08T16:48:26.243
> 
> 标签：android-widget

是否可以在键锁之前创建一个可访问的应用程序？就像在【紧急呼叫】旁边按下了一个小图标并弹出应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:11:33.100

你不能在不修改 Android 操作系统的情况下添加这样的图标。但是，您可以添加锁定屏幕小部件。

锁屏小部件是在 Android 4.2 中添加的，请查看官方[google 文档](http://developer.android.com/about/versions/android-4.2.html#Lockscreen)。在 Android 4.0+ 上，支持从锁定屏幕控制媒体播放器，请[在此处](http://developer.android.com/about/versions/android-4.0.html#api)查找“远程控制客户端” 。

# c# - 远程检查/启动/停止服务

> ID：15299134
> 
> 赞同：1
> 
> 时间：2013-03-08T16:48:33.380
> 
> 标签：c#, service, remoting, restart

我正在尝试编写一个 Windows 窗体应用程序，它可以让我检查/启动/停止多个服务器上的服务。我有我的代码设置来检查本地机器上的服务，但我不知道如何检查远程机器：

```
 try
        {
            ServiceController machsmint = new ServiceController();
            machsmint.ServiceName = "MACHSMIntegration";

            if (machsmint.Status.ToString().ToLower() == "stopped")
            {
                label_machsmINTSTATUS.Text = "Service is not Running";
            }

            if (machsmint.Status.ToString().ToLower() == "running")
            {
                label_machsmINTSTATUS.Text = "Service is Running";
            }
        }
    catch
        {
            label_machsmINTSTATUS.Text = "Service is not Running";
        } 
```

我需要在哪里添加代码以连接到远程机器，或者我在这里完全错误的方向？如果这是一个愚蠢的问题，我很抱歉！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:56:11.597

`ServiceController`提供了一个[构造函数](http://msdn.microsoft.com/en-us/library/ssbk2tf3.aspx)，允许指定远程机器的名称。

# android - Eclipse 中的 Android：从 LogCat 复制/粘贴（仅限“文本”）

> ID：15299141
> 
> 赞同：17
> 
> 时间：2013-03-08T16:48:52.790
> 
> 标签：android, eclipse, logging

有没有办法从 Eclipse LogCat 复制/粘贴，并且只复制/粘贴记录的“文本”？

通常，当我从 LogCat 复制/粘贴时，它会复制所有内容，包括“级别”、“时间”、“应用程序”、“标签”和“文本”，而大多数时候，我真正想要的只是“文本”。

这是一个极端的烦恼，尤其是在复制/粘贴多行时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T07:11:53.750

您可以尝试以下步骤：

1.  右键单击要复制的部分
2.  单击此处查找类似消息，您将看到“按日志消息选项”。

选择您要复制的文本并粘贴到您想要的位置。（我在 Windows 中尝试过）。

# c# - 从不同的类绘制到 Windows 窗体中的图片框

> ID：15299145
> 
> 赞同：5
> 
> 时间：2013-03-08T16:49:02.787
> 
> 标签：c#, winforms

在我的代码中，我有`PictureBox`一张背景图片。我曾经在它上面画一个矩形

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    Pen p = new Pen(Color.Turquoise, 2);
    Rectangle r = new Rectangle(600, 300, 5, 5);
    e.Graphics.DrawRectangle(p, r);
    p.Dispose();
} 
```

现在，我知道我需要对这些矩形做很多事情并动态创建它们，我为它们创建了一个类，构造函数如下所示：

```
public MyRectangles(int x, int y)
{
    Pen p = new Pen(Color.Turquoise, 2);
    Rectangle r = new Rectangle(x, y, 5, 5);
    e.Graphics.DrawRectangle(p, r);
    p.Dispose();
} 
```

问题是，这里不存在`e`in 。`e.Graphics.DrawRectangle(p, r);`这是有道理的，我理解为什么，但是，我不知道用什么替换它，再次在同一个图片框上绘制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T16:53:30.203

尝试传递 Graphics 对象：

```
public MyRectangles(Graphics g, int x, int y)
{
    Pen p = new Pen(Color.Turquoise, 2);
    Rectangle r = new Rectangle(x, y, 5, 5);
    g.DrawRectangle(p, r);
    p.Dispose();
} 
```

# android - TextView#setMovementMethod(LinkMovementMethod.getInstance()) 正在破坏链接显示

> ID：15299147
> 
> 赞同：2
> 
> 时间：2013-03-08T16:49:08.593
> 
> 标签：android, html, textview, spannable, linkmovementmethod

我有一个由一些 HTML 制成的`TextView`填充。`Spannable`

这段代码：

```
textView.setText(Html.fromHtml(textContent, mImageGetter, null)); 
```

显示链接，但它们不可点击。这段代码：

```
text.setMovementMethod(LinkMovementMethod.getInstance());
textView.setText(Html.fromHtml(textContent, mImageGetter, null)); 
```

*不*显示链接。在`TextView`XML 中指定为

```
<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/another_textview"
    android:layout_marginTop="5dp"
    android:autoLink="web"
    android:textColorLink="@color/link_color_unpressed"
    android:textColor="#ffffff"
    android:textSize="18sp" /> 
```

为什么`LinkMovementMethod`，一种完全存在的`TextView`可点击链接的方法会阻止链接显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:52:26.127

罪魁祸首是自动链接方法：

```
<TextView
    ...
    android:autoLink="web"
    ...
    /> 
```

删除此行解决了问题。

# html - 将标头添加到引导程序

> ID：15299150
> 
> 赞同：8
> 
> 时间：2013-03-08T16:49:11.567
> 
> 标签：html, css, twitter-bootstrap, html5boilerplate

我对 Bootstrap 还很陌生，在导航栏上方放置标题时遇到了麻烦。我需要为当前网站设置一个高度至少为 70 px 的标题，同时我需要确保通过手机查看时响应性有效。我目前的代码是

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#index.html"><img src="img/navigationlogo.png" alt="Home"/></a>

          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active">
                <a href="#index.html"><img src="img/Home_Button.png" width="24" height="21" alt="Home"/></a>
              </li>
</ul>
          </div>
        </div>
      </div>
    </div> 
```

什么是我认为我可以做的是添加

```
<header></header> 
```

在导航栏上方并将我的徽标放在那里。

有人可以为我提供一个带有 css 的示例代码，说明我如何实现这一点吗？正如我听说的那样，要保持一些最小填充，以便通过移动设备看到响应式导航。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-27T18:30:11.570

添加一个标题标签并给它`"page-header"`类。这将为您的网站提供一个不错的小标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-06T21:35:22.950

如果您想知道 Bootstrap 的标准标题，您还应该知道如何添加子标题。

```
<div class="page-header">
  <h1>Your mother was a hamster 
      <small>and your father smelt of elderberries</small>
  </h1>
</div> 
```

结果：

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<div class="page-header">
  <h1>Your mother was a hamster
    <small>and your father smelt of elderberries</small>
  </h1>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  </p>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T01:10:14.070

您可以通过以下方式在导航栏上方放置 div 或 html5 标题块，假设您的图像宽度为 1000px：

```
<header>
<img src="http://placehold.it/1000x70"/> 
</header> 
```

您可以将导航栏放在上述代码之后。

你可以看到一个 jsfiddle [Demo](http://jsfiddle.net/shail/YKaBK/show)

# java - Eclipse 运行配置中的通配符扩展

> ID：15299154
> 
> 赞同：9
> 
> 时间：2013-03-08T16:49:22.817
> 
> 标签：java, eclipse, command-line, wildcard, glob

有没有办法让 Eclipse 在运行配置参数中扩展通配符？我的班级可以处理传递给`main(String[] args)`. 从普通的 shell（我系统上的 bash），很简单：

```
$java MyClass file*.txt 
```

这将运行我的类，工作目录中的所有文件都以命令行参数的形式提供`file`。`.txt`

我想在 eclipse 中也有同样的行为，但是当我进入`file*.txt`运行配置编辑器并运行程序时，通配符没有展开。唯一可识别的参数不是文件列表，而是文字 string `file*.txt`。

[这个线程](https://stackoverflow.com/questions/3861086/how-to-avoid-shell-expansion-when-running-java-app-in-eclipse)让我相信它是可能的或曾经是可能的（至少在 Windows 上 - 我正在运行 Mac OS X 10.6.8），但是那些人遇到了相反的问题，即即使这种行为不是通配符被扩展通缉。

在尝试解决这个问题时，我尝试使用不同的环境变量（即 ${string_prompt}，更改工作目录，查看 Eclipse 首选项和文档，并搜索相关短语但没有任何效果。任何建议或相关链接信息将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-02T17:07:00.740

这似乎是 Eclipse 中所需的行为。实际上，Windows 中的通配符扩展被认为是[一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=212264)。

相反，bash 中的期望行为是您所期望的，但 Java（以及您的程序）对此一无所知。

如果您希望您的程序更*智能*并扩展通配符，您可以使用[Apache Commons IO](http://commons.apache.org/proper/commons-io/)库[`WildcardFileFilter`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/filefilter/WildcardFileFilter.html)的一部分。

更好的是：您可以编写一个支持命令行扩展的 Eclipse 插件。如果你这样做，请分享！;)

# javascript - 将多个表单值动态设置到 JavaScript 对象中

> ID：15299161
> 
> 赞同：0
> 
> 时间：2013-03-08T16:49:44.353
> 
> 标签：javascript, jquery, html, json

我正在尝试稍微优化我的代码，并想知道这里是否有人可以帮我一把。

在我解释我的问题之前，让我为您提供我的 html 和 js/jquery 代码，供您欣赏！

HTML：

```
<tr>
<td>
    <input email="a@a.com" value="4560" type="checkbox" id="task_checked">
</td>
<td>a@a.com</td>
</tr>
<tr>
<td>
    <div>
        <span>E-Mail: </span><input id="4560" type="text" name="added_email" class="added_email">
        <span>Enter Book Name: </span><input id="4560" type="text" class="category"> 
    </div>
</td>
</tr>

<tr>
<td>
    <input email="b@b.com" value="6012" type="checkbox" id="task_checked">
</td>
<td>b@b.com</td>
</tr>
<tr>
<td>
    <div>
        <span>E-Mail: </span><input id="6012" type="text" name="added_email" class="added_email">
        <span>Enter Book Name: </span><input id="6012" type="text" class="category"> 
    </div>
</td>
</tr>

<tr>
<td>
    <input email="c@c.com" value="5604" type="checkbox" id="task_checked">
</td>
<td>c@c.com</td>
</tr>
<tr>
<td>
    <div>
        <span>E-Mail: </span><input id="5604" type="text" name="added_email" class="added_email">
        <span>Enter Book Name: </span><input id="5604" type="text" class="category"> 
    </div>
</td>
</tr> 
```

希望这没有吓到你！

这是我的jQuery。

```
var newTasksArr = {};
 $("#task_checked:checked").each(function() {
var email = $(this).attr("email");
var id = $(this).val();
newTasksArr[id] = email;
});

var AddedEmailsArr = [];

var inputs = $('input.added_email'), tmp;
$.each(inputs, function(i, obj) {
tmp = {
    'Task_ID': $(obj).attr('id'),
    'email': $(obj).val(),
    'category' : $(obj).siblings('.category').val(),
};

AddedEmailsArr.push(tmp);
}); 
```

如您所见，目前我有两个 Jquery 函数，我正试图将它们合二为一。

让我向你们展示输出的样子。

```
//output for var newTasksArr = {};
Object { 4560="a@a.com", 6012="b@b.com", 5604="c@c.com" }

//output for var AddedEmailsArr= {};
[ 
Object { Task_ID="4560",  email="f@f.com.com",  category="example1" }, 
Object { Task_ID="6012",  email="g@g.com.com", category="example2" }, 
Object { Task_ID="5604",  email="z@z.com", category="example2" }
] 
```

为了优化我的代码，我想摆脱这两个对象并变成一个对象。

下面是我想要的样子。

```
[ 
Object { Task_ID="4560",  email="f@f.com.com",  category="example1" }, 
Object { Task_ID="6012",  email="g@g.com.com", category="example2" }, 
Object { Task_ID="5604",  email="z@z.com", category="example2" }, 
Object { Task_ID="4560",  email="a@a.com" }, 
Object { Task_ID="6012",  email="b@b.com" },
Object { Task_ID="5604",  email="c@c.com" } 
] 
```

希望我的问题是有道理的，我真的很感谢你们对这个问题的任何帮助。请随时向我寻求任何澄清。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:58:07.030

我没有时间完全了解所有细节。但我认为你可能需要退后一步，重新考虑这种方法。ID 应该是唯一的，您可以考虑使用“数据”属性而不是创建自己的属性。看起来你的思维过程是正确的，但不是坚实的基础。

# jquery - jquery-ui sortable 出现错误 - PUT 501（未实现）

> ID：15299165
> 
> 赞同：10
> 
> 时间：2013-03-08T16:49:50.397
> 
> 标签：jquery, ruby-on-rails, apache, jquery-ui

我有一个带有 jquery-ui 可排序列表的 Rails 应用程序。当用户从一个列表拖到另一个列表时，wostatus_id 字段会更新。因此，它在 jquery Ajax 更新上失败了。

这在 localhost 和 Heroku 上运行良好。但是，我正在将该应用程序移至 Bitnami Virtual Server + Rails 实现。我不知道它是否相关，但我在新服务器上使用 node.js。

在这个新服务器上，我在浏览器控制台上收到此错误：

```
PUT http://ndeavor.ameipro.com/workorders/2 501 (Not Implemented) 
```

![在此处输入图像描述](../Images/eb459c949f4086ee1a3285befc2e319f.png)

这是咖啡脚本：

```
 $("#sort1, #sort2, #sort3, #sort4, #sort5, #sort6, #sort7").sortable
    connectWith: ".connectedSortable"
    cursor: "move"
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
    receive: (event, ui) ->
      str_id =  $(ui.item).attr('id')
      woid = str_id.split('_')[1]
      $.update "/workorders/" + woid,
        workorder:
        wostatus_id: $(this).data('wostatus-id') 
```

谢谢您的帮助！

更新1

当我使用 fullcalendar-rails 月视图将事件从一天拖到另一天时，我遇到了同样的错误。

UDPATE2

我发现了这个“Fixing 501 error code The client should specify an valid request type。即使在此之后，如果 Web 服务器响应不正确，那么只需升级 Web 服务器即可解决问题。”

我确定请求没问题 - 相同的代码已经在 localhost 和 Heroku 上运行了几个月。因此，它必须与我正在使用的新虚拟服务器有关。

新服务器是 Bitnami Rails 堆栈。它安装了 node.js。我正在运行 Apache、Passenger 和 PG。

我将如何升级服务器以解决问题？？？

更新3

此咖啡脚本得到相同的响应：

```
updateEvent = (the_event) ->
 $.update "/events/" + the_event.id,
   event:
     title: the_event.title,
     starts_at: "" + the_event.start,
     ends_at: "" + the_event.end,
     description: the_event.description 
```

更新4

Apache 可以停止使用 PUT 吗？也许 https.conf 中有一些设置？

更新5

相同的应用程序使用 Thin 运行良好！！！！所以，我将尝试使用 Nginx 和 Thin。

更新6

我无法让它工作。所以，我将尝试 Nginx 和 5 个瘦应用服务器。

更新7

我现在在 Nginx 和 5 个瘦服务器上运行 Rails 应用程序。我仍然收到 501 PUT - jquery 错误！！！！

如果我在端口 3000 上独立运行 Thin，它可以正常工作。

如果我在端口 80 上独立运行 Thin，我会收到相同的 JQUERY PUT 501 错误。

因此，我们使用端口 80 的服务器出了点问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T15:27:13.837

我花了将近 2 周的时间来解决这个问题。我试过 Apache+Passenger 和 Nginx+Thin。

最终，这些都不是原因。它与 Rails 应用程序设置无关。

这是一个正在停止 PUT 的 Pound 网络服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:58:29.040

检查 apache 配置中的 Limit 关键字。

很可能默认情况下你在某处有类似的东西：

```
<Limit PUT DELETE>
    order deny,allow
    deny from all
</Limit> 
```

这会阻止 Web 服务器接受任何 PUT 或 DELETE 请求，因此会出现 501（未实现）。

**更新：**

所以你发现的是：

```
<Limit GET POST OPTIONS>
    Order allow,deny
    Allow from all
</Limit>
<LimitExcept GET POST OPTIONS>
    Order deny,allow
    Deny from all
</LimitExcept> 
```

这意味着只有`GET`,`POST`并且`OPTIONS`查询被接受 ( `allow from all`) 并且不在此列表 ( `LimitExcept`) 中的任何内容都被拒绝 ( `Deny From All`)。

如果您需要 PUT 关键字，请将其添加到这两个设置（`Limit`和`LimitExcept`）中。

请注意，这些限制仅适用于`/home/*/public_html`目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T20:56:43.093

您是否尝试过在没有可排序的情况下合成请求？我有这种偷偷摸摸的怀疑，即 JUI 正在添加疯狂的临时元素，这些元素正在疯狂地格式化您的请求。

或者，每当某些东西在本地工作但不在服务器上时，我认为某些东西不应该是异步的。

不要在排序时发出请求，而是注销请求的参数。它们有意义吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:03:05.003

好吧，如果您的服务器 apache 使用 Virtualhost 配置得很好。在您的 Rails 应用程序中使用 gem install Passenger 和 Passenger-install-apache2-module。所以他会告诉你需要添加到文件 httpd.conf 中的内容。通常你得到的东西接近这个。

```
Listen *:80
NameVirtualHosts *:80

LoadModule passenger_module /somewhere/passenger-x.x.x/ext/apache2/mod_passenger.so

PassengerRuby /usr/bin/ruby
PassengerRoot /somewhere/passenger/x.x.x
PassengerMaxPoolSize 10

<VirtualHost *:80>
    ServerName www.foo.com
    DocumentRoot /webapps/foo/public
    RailsBaseURI /rails
</VirtualHost> 
```

但我建议你将 Nginx 与乘客一起使用。

我也看看这个：[501 Method Not Found error on a javascript file - 更改名称然后它可以工作 - 为什么？](https://stackoverflow.com/questions/10113406/501-method-not-found-error-on-a-javascript-file-change-name-and-it-then-works)

在这里您可以找到使用 Apache 部署 Rails 应用程序的教程：[Rails 3.1 应用程序部署教程](https://stackoverflow.com/questions/8114848/rails-3-1-application-deployment-tutorial)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T10:22:26.107

有同样的问题，按照其他人的建议查看 POUND 反向代理服务器配置并将 xHTTP 更改为 1 的值为我修复了它。

[http://manpages.ubuntu.com/manpages/xenial/man8/pound.8.html](http://manpages.ubuntu.com/manpages/xenial/man8/pound.8.html)[查看 ubuntu POUND 配置详情](http://manpages.ubuntu.com/manpages/xenial/man8/pound.8.html)

# php - 新的 PayPal 沙盒返回 400 错误的 IPN 验证请求

> ID：15299168
> 
> 赞同：1
> 
> 时间：2013-03-08T16:50:10.253
> 
> 标签：php, paypal-ipn, paypal-sandbox

称其为时机不好，但实际上我昨晚刚刚开始工作，就在 PayPal 推出其新的开发人员界面之前。我正在使用 PHP / cURL，并从 x.com 复制了这段代码：
[https ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

昨晚 10 点，它开始返回 400 个代码，但响应正文为空。以下是响应标头：

```
HTTP/1.1 400 Bad Request
Date: Fri, 08 Mar 2013 16:43:16 GMT
Server: Apache
X-Frame-Options: SAMEORIGIN
Set-Cookie: c9MWDuvPtT9GIMyPc3jwol1VSlO=%7cC8szeIKENkwUqfOEYTjk-zp16RPNDC2MvLBQq9QALLYk8LcDM9kDEELRUPR_lxii1ujHBm%7cAo_aiVmV13ssvg_VFFqLkSkrVuIkUVx3O9nb09-nmQbg21hzsBAPIAIUIW8XFO_wn3c6T0%7c; domain=.paypal.com; path=/; Secure; HttpOnly
Set-Cookie: cookie_check=yes; expires=Mon, 06-Mar-2023 16:43:16 GMT; domain=.paypal.com; path=/; Secure; HttpOnly
Set-Cookie: Apache=10.72.109.11.1362760996493186; path=/; expires=Sun, 01-Mar-43 16:43:16 GMT
Connection: close
Transfer-Encoding: chunked
Content-Type: text/plain; charset=ISO-8859-1 
```

我正在使用[IPN 模拟器](https://developer.paypal.com/webapps/developer/applications/ipn_simulator)进行测试。永远不要收到“已验证”或“无效”响应。只有一个空白的响应正文。还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:38:14.310

目前在我们升级开发者账号的时候，大家在沙盒环境中都会遇到这个错误。我们目前正在努力解决此问题，但是一旦解决，我一定会通过这篇文章更新您。

这是一个全新的环境，所以如果您遇到任何其他问题，请告诉我，以便我们尽快纠正。

# emacs - autopair.el 接管了我在 autocomplete.el 中使用的输入按钮

> ID：15299170
> 
> 赞同：0
> 
> 时间：2013-03-08T16:50:12.660
> 
> 标签：emacs, autocomplete

在编写代码时，我遇到了自动完成建议，当我按下回车键时，自动完成功能会根据建议完成我的话。但是自从我开始使用 autopair.el 以来，在相同的情况下，输入只是转到另一行。我必须使用标签。我彻底检查了 autopair.el 以查看是否可以更改某些内容并修复此问题，但超出了我的范围。

是否有人碰巧发现了同样的问题并提出了解决方案。

# html - 在 iframe 内时 accesskey 不起作用，除非单击 iframe

> ID：15299178
> 
> 赞同：0
> 
> 时间：2013-03-08T16:50:49.263
> 
> 标签：html, iframe, access-keys

你好，我的索引里面有一个。在里面我有 to some_html.html

但是，除非我单击第一个，否则按 alt +s 不会将我重定向到 some_html.html。为什么是这样？有没有解决办法？还是一种解决方法来自动专注于而不点击它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:50:49.263

添加`<input autofocus style="opacity:0;">`到存在该行的 iframe 的源文档中`<a href="some_html.html" accesskey="s">To some_html.html</a>`。

这有点作弊。我不确定是否有其他方法可以做到这一点，或者是否有适当的方法可以做到这一点，但它就像魅力一样。

上面给出的答案代码将创建一个自动聚焦的不可见输入框。为确保它不会阻止任何可点击的内容，您可以将其隐藏在带有`style="opacity:0; z-index:-100; position:absolute; left:0; top:0;"`. （将左侧和顶部更改为您想要的位置，这样它就不会干扰或在其后面的文本中留出空格）。

# android - 谷歌在 viewFlipper 中映射 v2 mapFragment

> ID：15299180
> 
> 赞同：0
> 
> 时间：2013-03-08T16:50:51.503
> 
> 标签：android, nullpointerexception, google-maps-android-api-2, viewswitcher, mapfragment

我正在尝试在视图翻转器内创建一个 mapFragment。我已经尝试了几种方法，但无法让它工作。到目前为止，我已经尝试过：

*   在视图翻转器的右侧声明片段并在那里访问它。这样做的问题是视图在切换到它之前不会加载，因此地图不存在，并且当我尝试访问它时它会创建一个空指针错误。
*   我的第二种方法是以编程方式声明地图片段，然后使用片段事务将其插入到 FrameLayout 容器中。
*   我尝试的第三件事是从外部文件加载片段并使用片段事务将其插入容器中。

所有这些都在方法中进行了尝试`onCreate`，导致它们抛出空指针异常的调用在`onResume`方法内部。如果有人以前经历过这种行为并且知道如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:36:42.330

As You are extended `FragmentActivity`，表明您正在尝试使用`Android Support package backport of fragments. However, your element refers to MapFragment, which is for the native`API Level 11` 版本的 Fragments。

用 SupportMapFragment 替换 MapFragment，这应该可以清除这个特定的崩溃

```
if that also doesnt solve Then you have a problem with your API key or something. Check LogCat for messages 
```

# javascript - 用于选择选定值的 ExtJS 4 Combobox 事件

> ID：15299182
> 
> 赞同：3
> 
> 时间：2013-03-08T16:50:57.400
> 
> 标签：javascript, combobox, extjs4

出于某种原因，我需要知道用户何时从组合框中选择了值，即使它已经被选中。“选择”事件仅在用户选择未选择的项目时起作用。我在组合框或选择器的文档中没有看到任何像“itemclick”这样的事件。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T19:14:01.727

`ComboBox`使用[BoundList](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.BoundList)表示下拉列表。`BoundList`触发[itemclick](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.BoundList-event-itemclick)事件。您可以使用`ComboBox`listConfig配置来设置监听[器：](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-listConfig)`BoundList`

```
Ext.create('Ext.form.ComboBox', {
    // ...
    listConfig: {
        listeners: {
            itemclick: function(list, record) {
                alert(record.get('name') + ' clicked');
            }
        }
    }
} 
```

查看[演示](http://jsfiddle.net/molecule/Gzp86/)。

# php - 如果未调用所需的方法，则 Mockery/Etsy PHPExtensions 不会失败测试

> ID：15299184
> 
> 赞同：1
> 
> 时间：2013-03-08T16:50:59.590
> 
> 标签：php, unit-testing, tdd, phpunit, mockery

我有下面的代码，我希望在运行时会失败，因为该类`DoesNothing`不使用模拟类或在其上调用任何必需的方法。

```
<?php
class DoesNothing
{

}

class DoesNothingTest extends YourMockeryTestCase
{
    /**
     * @test
     */
    public function somethingIsCalled()
    {
        $this->mock = Mockery::mock();

        $keys = array(
            '1234',
            'abcxyz',
            '*&(%&^$-*/~@:{}',
            ')*&GA^FAUIB(*',
            '',
            ' ',
        );

        foreach ($keys as $key) {
            $this->mock
                ->shouldReceive('remove')
                ->atLeast()->times(1)
                ->with($key);
        }
        $var = new DoesNothing($this->mock);
    }
} 
```

但是当我运行它时，它通过了。我希望它会说“未调用方法删除”等。

有什么问题？与 Mockery 如何与 PHPUnit 对话有关？

谢谢，马丁

编辑：我还应该提到我们正在使用[Etsy 的 PHPExtensions](https://github.com/etsy/phpunit-extensions/wiki/Mockery)将其集成到 PHPUnit

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:50:05.400

您的方法名称应以 开头`test`，否则 PHPUnit 不会将其确定为测试。

```
public function testSomethingIsCalled() 
```

**编辑**

您必须调用`Mockery::close()`您的拆卸方法才能执行期望。IE

```
/**
 * Tear down
 */
public function tearDown()
{
    \Mockery::close();
} 
```

# c++ - 在初始化列表中创建单例对象会导致访问冲突（仅限发布模式）

> ID：15299187
> 
> 赞同：2
> 
> 时间：2013-03-08T16:51:17.400
> 
> 标签：c++, singleton, release, access-violation

我确实看到了一个（对我来说）奇怪的访问冲突异常。我会尽量减少问题。我有一个 A 类和一个单例对象 sing_。代码看起来像这样：

```
class A {
    A();
    Sing& sing_;
}

A::A() : sing_(Sing::instance()){
    call a method that creates a local copy of Singleton Sing.
    ....
} 
```

Sing 类继承自 Singleton：

```
class Sing : public Singleton<Sing>{
    friend class Singleton<Sing>;
    ....
} 
```

Singleton 本身看起来是这样的（这是 QuantLib 库中的实现）

```
template <class T>
class Singleton : private boost::noncopyable {
  public:
    static T& instance();
  protected:
    Singleton() {}
};

template <class T>
T& Singleton<T>::instance() {
    static std::map<Integer, boost::shared_ptr<T> > instances_;
    #if defined(QL_ENABLE_SESSIONS)
    Integer id = sessionId();
    #else
    Integer id = 0;
    #endif
    boost::shared_ptr<T>& instance = instances_[id];
    if (!instance)
        instance = boost::shared_ptr<T>(new T);
    return *instance;
} 
```

我的项目代码嵌入在 Qt Gui 环境中。在调试模式下启动它不会引起任何麻烦。当我尝试以发布模式启动时，情况发生了可怕的变化。这是主要方法：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    GUI w;
    w.show();
    w.setup(argc, argv);

    return a.exec();
} 
```

最后，类 GUI 看起来像这样缩写：

```
class GUI : public QMainWindow
{
    Q_OBJECT

public:
    GUI(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~GUI();
private:
    boost::shared_ptr<A> a_; 
}; 
```

当我在发布模式下启动此代码时，会发生以下情况：

1.  调用了一个名为 ___tmainCRTstartup() 的方法。其中调用了方法_WinMain。

2.  在此方法*WinMain 中（甚至在调用 main 方法和创建 GUI 对象之前）调用 A 的构造函数。这意味着成员 sing*将被初始化。

3.  sing_ 在调用 Sing::instance() 期间被初始化。到目前为止一切看起来都很好。

4.  执行 A 的构造函数。其中创建了对单例对象 Sing 的本地引用。调用 Sing::instance() 会导致该行的访问冲突

    ```
     boost::shared_ptr<T>& instance = instances_[id]; 
    ```

当我查看那个地方的instances_[id] 时（在发布模式下调试），地图看起来已经完全被破坏了。这意味着地图中有一个元素。但关键不是 0，而是一个非常负的整数，而且值看起来很奇怪。

我完全不知道这里出了什么问题。

将 A 中的成员 sing_ 更改为静态成员可以解决问题：

```
class A {
    A();
    static Sing& sing_;
}

Sing& sing_ = Sing::instance();

A::A() {
    call a method that creates a local copy of Singleton Sing.
    ....
} 
```

这当然很好，但我真的想知道这两种实现之间的“大”区别是什么。为什么第一种方式以访问冲突结束？任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:57:49.527

我不确定问题的出路，但我可以提供一些帮助：

首先，在调试中运行的程序在发布中失败的最常见原因（反之亦然）：

1.  在调试中，所有内存通常（我知道的大多数调试器）都初始化为 0。因此安全 nullptr 检查可以避免错误。在释放内存没有初始化，所以你得到垃圾/随机值。

2.  定时。代码优化以及缺乏调试检查和设置（例如将所有内容设置为 0）使代码更快，因此线程之间存在不同的时序。

现在回到你的情况。您将变量视为“已销毁”的原因可能只是因为代码优化。
通常，如果您启用了代码优化，编译器可能会决定将一些变量放在硬件寄存器中，而不是按预期放置在堆栈中。
这可能会导致调试器误解某些局部变量。（最常见的 *this 指针存储在寄存器中）。

现在，地图中的 operator[] 不应引发异常。如果映射没有该键的值，则将创建它。

所以我能想到的唯一解释是地图本身已经损坏，所以当它试图遍历地图的节点时，它崩溃了。

这种类型的损坏通常是由 2 个线程同时尝试更改映射引起的。
在您的情况下这是可能的，因为在那个简单的单例实现中没有锁定保护。
可能是这种情况的另一个迹象是，当您将其设为静态时，问题就解决了。将变量设为静态会导致对象的启动发生得更早，这可能正是您解决线程竞争所需的时间。

# xcode - 默认 Xcode 4.5 字体

> ID：15299191
> 
> 赞同：8
> 
> 时间：2013-03-08T16:51:38.327
> 
> 标签：xcode, fonts, default

Xcode 4.5 中的默认字体和字号是多少？我问是因为我试图将 Eclipse 配置为使用与 Xcode 相同的语法着色和编辑器字体。

**编辑 03.08.2013**

供将来参考：我使用[Eclipse Color Themes](http://eclipsecolorthemes.org/?list=all&q=xcode)在 Eclipse 中自动设置语法着色属性，而不是手动配置单个颜色，这是在 Eclipse 中进行的一个乏味烦人（如果不痛苦）的过程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T16:55:32.063

字体：Menlo Regular - 11.0

语法着色：见图片

![在此处输入图像描述](../Images/6f9b2ed4f4153b8276a0aa7f5bce8070.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T16:53:14.107

默认的是`Menlo Regular - 11.0`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-11T22:31:23.650

我只是想指出现在 Xcode 8.2.1 中的默认值是`SF Mono Regular - 11.0`. 也许有人觉得它有帮助。

# html - Rails - 表格列宽受选择框影响

> ID：15299192
> 
> 赞同：0
> 
> 时间：2013-03-08T16:51:41.883
> 
> 标签：html, ruby-on-rails

我有一个似乎适应给定列中最长文本字符串的表。我在每一行都有选择标签，这些标签似乎弄乱了显示。表格中添加了一个额外的列，并且右侧的边框未显示。如果我缩小选择标签的大小，表格格式正确，但我希望表格符合下一列中最大选择标签和最大按钮的大小。谢谢。这是代码：

```
<table class="table table-bordered table-condensed">
<thead>
<tr>
    <th>Position</th>
    <th>Allocation</th>
    <th>Action</th>
</tr>
</thead>

<% position_map = @cabinet.cabinet_position_map %>
<% @cabinet.cabinet_type.usize.downto(1) do |i| %>
<tr>
    <td>Slot: <%= i %></td>
    <% if position_map[i].nil? %>
        <% cabinet_device_selection = @cabinet.devices_to_fit(position_map, i) %>
        <% @selection_list = [ "Power", "I/O", "Interface", "Unusable", "Other", "Missing", "Reserve" ] %>
        <% cabinet_device_selection.each do |device| %>
            <% @selection_list << device.name %>
        <% end %>
        <% if position_map[i].nil? %>
                <%= form_tag( {:controller => :cabinets, :action => :update_device_position, :position => i , :id => @cabinet.id } , { :method => 'get', :class => "form-search" }) do %>
                    <td>
                        <%= select_tag :position_name, options_for_select(@selection_list) %>
                    </td>
                    <td>
                        <%= hidden_field_tag 'position', i %>
                        <%= submit_tag "Add" , :class => "btn" %>
                    </td>
                <% end %>
        <% end %>               
    <% else %>
        <% position_map[i].each do |cabinet_item| %>
            <td>
                <%= cabinet_item.name %>&nbsp;
            </td>
            <td>
                <%= link_to "Remove", { :controller => :cabinets, :action => :remove_cabinet_position, :id => @cabinet.id, :position => i}, :class => "btn btn-danger" %>
            </td>
        <% end %>
    <% end %>   
</tr>
<% end %>
</table> 
```

这是输出的样子：

![格式错误的图像](../Images/9b8154e50fefd89cd9ea74a6c0879c9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:56:49.143

看来您正在使用 Bootstrap。

所以，要改变 select_tag 的宽度，你可以简单地做。

```
 <%= select_tag :position_name, options_for_select(@selection_list), :class => "span1" %> 
```

或者，如果您想设置自定义宽度，请在您的 CSS 中添加一个类。

```
 .option-small {
       width: 100px !important;
    } 
```

然后使用

```
 <%= select_tag :position_name, options_for_select(@selection_list), :class => "option-small" %> 
```

# android - 在 ListFragment 中时 EditText 视图未保持焦点

> ID：15299193
> 
> 赞同：0
> 
> 时间：2013-03-08T16:51:42.080
> 
> 标签：android, android-layout

当我点击 ListFragment 内的 EditText（请参阅“您的答案......”字段是下面的屏幕截图）时，它不会保持焦点，这使得它无法使用。一旦文本光标出现在 EditText 字段上，它就会迅速消失，并且 EditText 字段失去焦点。

我发现很少有相关的堆栈帖子，并且怀疑某些东西可能会从 EditText 中窃取焦点。[在此处](https://stackoverflow.com/a/12729351/647362)查看相关帖子。我也读过关于[强迫焦点](https://stackoverflow.com/questions/14788512/how-to-force-focus-to-edit-text)的帖子，但没有任何意义。

我可以以编程方式构建视图，但是使用标准 ListFragment 和 ArrayAdapter 代码要容易得多。该列表将随着用户输入而增长，并且使用 Android 提供的基础架构更易于管理。

请参阅下面的屏幕。屏幕右侧是一个 ListFragment，其中包含行的自定义布局。每行包含一个 EditText 和一个用于提交文本的 Button。

![屏幕帽](../Images/39b170d104c943f185f92979c4f05df4.png)

这是 ListFragment 的代码：

```
public class ItemDetailFragment extends ListFragment {
    /**
     * The fragment argument representing the item ID that this fragment
     * represents.
     */
    public static final String ARG_ITEM_ID = "item_id";
    private static final String STATE_ACTIVATED_POSITION = "activated_position";
    /**
     * The dummy content this fragment is presenting.
     */

    private static DetailArrayAdapter mAdapter;

    /**
     * Mandatory empty constructor for the fragment manager to instantiate the
     * fragment (e.g. upon screen orientation changes).
     */
    public ItemDetailFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<DetailData> items = new ArrayList<DetailData>();
        items.add(new DetailData("1"));
        mAdapter = new DetailArrayAdapter(getActivity(), R.layout.detail_layout, items);

        // TODO: replace with a real list adapter.
        setListAdapter(mAdapter);
    }

    class DetailArrayAdapter extends ArrayAdapter<DetailData> {
        Context context = null;
        int layoutResourceId;
        ArrayList<DetailData> data;

        public DetailArrayAdapter(Context context, int layoutResourceId, ArrayList<DetailData> data){
            super(context, layoutResourceId, data);
            this.context = context;
            this.layoutResourceId = layoutResourceId;
            this.data = data;
        }

        public View getView(int position, View convertView, ViewGroup parent){
            View row = convertView;

            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);    

            DetailData data = this.data.get(position);
            EditText text = (EditText) row.findViewById(R.id.answer);
            text.setText(data.detail_number + "You answer here ...");

            Button submit_button = (Button) row.findViewById(R.id.answer_submit);
            submit_button.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    int count = mAdapter.getCount();
                    int item_num = count + 1;
                    DetailData d = new DetailData(""+item_num);
                    mAdapter.add(d);
                }

            });

            return row;
        }
    }

    class DetailData {
        public String detail_number;

        public DetailData(String num){
            this.detail_number = num;
        }
    }
} 
```

这是自定义行的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <EditText 
        android:id="@+id/answer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Your answer here..."
        android:maxLines="1"
        android:singleLine="true"/>

    <Button
        android:id="@+id/answer_submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Go" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:08:05.900

在创建 EditText 对象后将以下行添加到 ItemDetailFragment.DetailArrayAdapter.getView() 可以解决问题：

```
text.requestFocus(); 
```

我不明白，但是在检索视图时拥有 EditText 请求焦点可以使屏幕上的 EditText（以及其他）成为焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T17:55:26.530

requestFocus() 仅适用于最后添加的edittext，如果listfragment上有多个editext，则不起作用

# android - 如何在 Android 上更改已打开 Spinner 的文本背景颜色

> ID：15299194
> 
> 赞同：2
> 
> 时间：2013-03-08T16:51:45.283
> 
> 标签：android, xml, text, styles, spinner

我在我的应用程序中设置了这种 XML 样式，但是当我打开 Spinner 时，我看不到文本。这是搜索信息的地方。我真的不知道我做错了什么。

这是 XML 样式：

```
<style name="Theme.Color" parent="android:Theme">
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:windowBackground">@drawable/fondo2</item>
</style> 
```

这是 Spinner 的 XML：

```
 <Spinner
            android:id="@+id/spAnswers"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/tvSecurity"
            android:entries="@array/box" /> 
```

当我打开 Spinner 时，会发生这种情况，我看不到文本（文本颜色为白色）。

只有当它打开或文本的背景发生变化时，我才需要将文本颜色设置为另一个微调器。

![在此处输入图像描述](../Images/cc36c7fca25fd7053574aface79bf49c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T16:55:33.573

在为您的 Spinner 创建适配器时，提供自定义布局而不是预定义的布局

创建名为 spinner_row.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
 android:id="@+id/cust_view"  
    android:layout_width="match_parent" 
    android:textColor="@color/black"
    android:textSize="12dp"
    android:layout_height="36dp" 
    android:gravity="left|center_vertical"/> 
```

在这里，您可以通过修改此文本视图来更改微调器中元素的颜色文本大小和宽度和高度

创建适配器时像这样使用它

```
 ArrayAdapter<String> adapter=new ArrayAdapter<String>(context, R.layout.spinner_row,yourlist); 
```

最后一项任务是例行公事

```
spinner.setAdapter(adapter); 
```

我希望这能帮到您。

# jquery - 下载带有 HTTP“授权”标头集的文件

> ID：15299196
> 
> 赞同：4
> 
> 时间：2013-03-08T16:51:52.337
> 
> 标签：jquery, ruby-on-rails, rest, download

我正在向我的 RESTful API（使用 Rails 制作）中的资源提供文件上传。当您`GET /resource/123/attachment`将具有相应 MIME 类型的文件发送到浏览器时。（可以是任何东西 .. 图像、PDF、文本文件等等）

如果有任何兴趣，可以这样做：

```
send_file(contract.attachment.path, :filename => contract.attachment.original_filename) 
```

但由于上传的文件是基于用户的和机密的，因此您需要`Authorization`使用令牌设置 HTTP 标头。

所以我考虑使用`jQuery.get`这样我就可以设置 HTTP 标头。但是我该如何处理来自服务器的响应呢？它应该表现得像您单击了一个普通链接（仅在请求之前设置了 HTTP 标头）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T08:33:31.090

如果您可以控制服务器输出并且图像不是太大，您可以使用 base64 图像并执行以下操作：

```
$.ajax({ 
  url : '/resource/123/attachment', 
  processData : false,
}).done(function(data){
  $("#YOUR_IMG_ID").attr("src", "data:image/png;base64,"+data);
}); 
```

另一种选择是您可以编写备用身份验证，以允许您在查询字符串中放入一些内容，例如 <img src="/resource/123/attachment?auth=xxxxx">。例如，您可以查看 oAuth 或其他东西来签署请求。

# decoding - ASN.1 八位组字符串

> ID：15299201
> 
> 赞同：7
> 
> 时间：2013-03-08T16:52:09.800
> 
> 标签：decoding, asn.1

我正在解码 ASN.1 格式的 X.509 证书。我解码成功，遍历结构，但有一点我不明白。

在某些情况下，我得到一个八位字节字符串，而我正在玩的这个网站 ( [http://lapo.it/asn1js/](http://lapo.it/asn1js/) ) 显示这些八位字节字符串实际上包含更多的 ASN.1 树。这个网站用（封装）注释了这样的八位字节字符串

我的问题是：在解析过程中我怎么知道一个八位字节字符串实际上封装了更多的东西？我是否只是尝试解析它，看看我是否得到标签和有效长度？如果不是，那么它是纯字节数据吗？如果是，那么它是一个有效的子树？

或者这是否意味着作为字节输出，然后消费者应该只在他知道它是来自某些键的编码数据时才尝试解析它？

以网站上已经加载的示例为例，然后点击“解码”。例如，我指的是偏移量 332，它是一个封装位字符串的八位字节字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T12:57:06.800

这就是 ASN.1 中的“扩展”的样子（[RFC 2459 §B.2](https://www.rfc-editor.org/rfc/rfc2459#appendix-B.2) — 我知道 RFC 是“过时的”，但在以后的版本中没有那个有用的附录）。

```
Extensions ::= SEQUENCE OF Extension

Extension ::= SEQUENCE {
extnId     OBJECT IDENTIFIER,
critical   BOOLEAN DEFAULT FALSE,
extnValue  OCTET STRING } 
```

每个扩展有效负载都封装在一个八位字节字符串中。扩展的 OID 告诉您在该八位字节字符串中会发生什么。在**keyUsage**的情况下，它是一个[BIT STRING](http://www.alvestrand.no/objectid/2.5.29.15.html) ( [§4.2.1.3](https://www.rfc-editor.org/rfc/rfc2459#section-4.2.1.3) )。

现在我对我自己关于**subjectAltName**的问题有了一个答案，它在[§4.2.1.7](https://www.rfc-editor.org/rfc/rfc2459#section-4.2.1.7)中。

对内容使用 OCTET STRING 的一个好处是，根据规范，未知（非关键）扩展可以被识别为这样，并且可以轻松地跳过（尽管我认为 DER 也让它变得微不足道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T20:20:34.017

告诉 ASN.1 工具处理该封装的方法是使用关键字“CONTAINING”。例如（这不是实际/正确的证书规范，但它应该给你一个想法）：

```
TstCert DEFINITIONS IMPLICIT TAGS ::=
BEGIN
   Sun ::= SEQUENCE {
       subjAltType OBJECT IDENTIFIER,
       name GenNames
   }

   GenNames ::= SEQUENCE SIZE (1..5) OF GenName

   GenName ::= CHOICE {
       otherName   [0] OtherName,
       rfc822Name  [1] UTF8String
   }

   OtherName ::= OCTET STRING (CONTAINING SEQUENCE {
       type-id OBJECT IDENTIFIER,
       value [0] EXPLICIT UTF8String
   } )
END 
```

# sharepoint - 添加多个项目时不会触发 ItemAdded 事件

> ID：15299203
> 
> 赞同：0
> 
> 时间：2013-03-08T16:52:13.233
> 
> 标签：sharepoint, event-receiver

我正在使用 WebPart 一次添加多个列表项。

而且我还有一个`EventReceiver`要处理`ItemAdded`此列表中的事件。问题是当 WebPart 添加项目时，只有第一个项目添加的项目被`EventReceiver`.

不知道为什么。有人可以帮我解释一下吗？谢谢。

我正在使用 SharePoint Online。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:14:42.743

Can You post some code of your event receiver? Maybe the reason is that there is some kind of error thrown. Since `ItemAdded` is run asynchronously, you won't get any visual notification of error (Except maybe some sandbox quota rising faster, since it's SharePoint Online.).

# javascript - 即使第一个 if 语句为真，为什么它会跳过并继续

> ID：15299206
> 
> 赞同：0
> 
> 时间：2013-03-08T16:52:21.703
> 
> 标签：javascript, if-statement, nested-loops

正如您可以立即看到的，这是一个带有一些 if 条件的 for 循环（这就是您所说的“if 条件”？？？）。我实际上有 2 个问题。

我正在开发 CodeAcademy，它要求我这样做：

```
Print out the numbers from 1 - 20.
The rules:
For numbers divisible by 3, print out "Fizz".
For numbers divisible by 5, print out "Buzz".
For numbers divisible by both 3 and 5, print out "FizzBuzz" in the console.
Otherwise, just print out the number.** 
```

这就是我到目前为止所做的，我认为它工作正常，而且总的来说是正确的，但 CodeAcademy 并没有说它是正确的。我想知道是否有人知道我的代码是否有问题，或者这是否只是执行他们要求的确切事情的另一种方式（请参阅上面的规则）。

也是第二个问题，这是我比较好奇的问题。如果我们现在以 15 为例。JavaScript 遇到 15 时是怎么想的。如果 15 能被 3 整除，剩下 0，不应该是 console.log("Fizz")，而不是一路下到几乎最后的底部代码和 console.log （“嘶嘶声”）；有人可以向我解释一下吗，pleeaassee :)

```
 for (var iterator = 1; iterator <= 20; iterator = iterator + 1) {
        if (iterator % 3 === 0) {
            console.log("Fizz");

        } else if (iterator % 5 === 0) {
            console.log("Buzz");

        } else if (iterator % 3 === 0) {
            if (iterator % 5 === 0) {
                console.log("FizzBuzz");
            }
        } else {
            console.log(iterator);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:59:42.993

我测试了你的代码，没有得到你描述的输出，15 成功打印了“FizzBu​​zz”。我得到 15 显示为“Fizz”的预期结果。它无法正常工作，因为它没有机会到达最终的 if 语句以打印出 15 的“FizzBu​​zz”。一个简单的解决方法是在数字可被 3 整除时检查是否可被 5 整除。

```
for (var iterator = 1; iterator <= 20; iterator = iterator + 1) {
    if (iterator % 3 === 0) {
        if (iterator % 5 === 0) {
            console.log("FizzBuzz"); //divisible by 3 and 5
        } else {
            console.log("Fizz"); //only divisible by 3
        }
    } else if (iterator % 5 === 0) {
        console.log("Buzz"); //only divisible by 5
    } else {
        console.log(iterator); //not divisible by 3 or 5
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T17:03:40.290

它可能会为您提供解决方案：只需重新排列代码：

```
for (var iterator = 1; iterator <= 20; iterator = iterator + 1) {

   if (iterator % 3 === 0) {
       if (iterator % 5 === 0) {
            console.log("FizzBuzz");
        }
    }else if (iterator % 3 === 0) {
        console.log("Fizz");

    } else if (iterator % 5 === 0) {
        console.log("Buzz");

    } else {
        console.log(iterator);
    }

} 
```

首先检查满足被 3 和 5 整除的条件。然后分别检查 3 和 5。

# .net - 如何在 .Net 和 PHP 系统之间完成基于 LDAP 的 SSO？

> ID：15299209
> 
> 赞同：0
> 
> 时间：2013-03-08T16:52:30.570
> 
> 标签：.net, ldap, sitecore, single-sign-on, lamp

我一直在使用 LAMP 系统，所以我对 MS 技术相对一无所知。我们有一个客户，其现有网站由名为 sitecore 的 .Net CMS 提供支持。他们想使用我们的产品之一，这是另一个由 LAMP 技术提供支持的网络系统。为简单起见，假设您输入 site.com，您将进入网站的 sitecore 部分，如果您输入 app.site.com，您将进入我们的 LAMP 应用程序。

我们的目标是整合这两个系统。因此，.Net 主网站将有“登录”表格，每当填写该表格时，用户都应在 .Net 系统和我们的 LAMP 系统中登录。我们显然可以完全控制我们的 LAMP 系统，我们可以在那里编写任何处理程序，但是我们对 .Net 系统没有太多控制权。我做了一些研究，LDAP 似乎是人们在这种情况下实施 SSO 的标准方式，但我仍在试图弄清楚它是如何工作的。我目前的理解是 LDAP 类似于一个外部数据库，一旦 .Net 系统配置为使用它（sitecore 确实提供了这种集成），登录表单中输入的登录+密码将针对 LDAP 进行验证。我不清楚的是，每当用户登录时，我们的 LAMP 系统将如何得到通知？所以我基本上很难理解这种集成的一般流程：用户访问 .Net 网站，输入登录+密码，获得身份验证，.Net 网站将其存储在 cookie/会话中（或在此类系统中用于这些目的的任何内容）然后我们的 LAMP 系统不知何故需要做同样的事情，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:15:43.140

系统基于什么并不重要。我认为您只需要很好地掌握单点登录的实际工作原理，然后您就会发现它可以与任何东西一起使用。

我将用非常基本的术语解释单点登录的工作原理。在此示例中，我们有以下站点：

*   站点 A = Sitecore 站点
*   站点-B = LAMP 站点

以下流程实现单点登录：

1.  用户访问站点 A 并登录
2.  站点 A 生成一个安全令牌（**（*）** - 见下文）并将其存储在数据库中（我们称之为 SQL）
3.  站点 A 设置一个 cookie，指示用户已登录
4.  Site-A 将用户重定向到 Site-B 并传递用户名、安全令牌和返回 URL（登录后要去的位置）
5.  Site-B 收到数据，获取用户名，自行生成令牌，并将其与传递的令牌进行比较
6.  如果令牌匹配，这意味着用户可以通过身份验证，Site-B 设置一个 cookie，表明用户已登录
7.  站点 B 重定向到返回 URL
8.  用户现在在站点 A 和站点 B 上都登录了

**(*)** -- 安全令牌可以使用用户名 + 盐（比如说，作为双方都知道的秘密字符串值）之类的东西生成，这两者的连接使用 MD5 加密。因此，假设用户名是“joe”，salt 是“supersecret”，串联是“joesupersecret”，结果是 MD5 哈希。

请注意，这只是它如何工作的一个非常基本的示例。实际上，此实现有许多变体，但都归结为相同的基础。

如您所见，无论您使用的是 .NET 还是 PHP 系统，它们是否通过 LDAP 或其他方式进行身份验证都无关紧要；每个系统都处理自己的身份验证方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:01:24.400

LDAP 只是很多东西的存储解决方案。您也可以在其中存储密码，并询问 LDAP 给定的密码对于给定的用户是否可以。因此，您可以使用 LDAP 进行身份验证。而且因为很多系统都可以使用一个 LDAP，所以您可以围绕 LDAP 构建“一个密码为所有人”的解决方案。

要按照您指定的方式使用真正的 SSO，还有一些工作要做，因为令牌的生成等远远超出了 LDAP 的范围。

有一个名为**KERBEROS**的 SSO 解决方案，它可以基于 LDAP 身份验证。它是 Microsoft 的 ActiveDirectory 或 Apple 的 OpenDirectory 等使用的解决方案。我相信 .Net 可以使用它，据我所知，有一些方法可以“kerberize” apaches httpd 以使用真正的 SSO。

有关更多信息，请查看[http://en.wikipedia.org/wiki/Kerberos_%28protocol%29](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)

# javascript - 编辑：为什么 typeof(0) 返回布尔值而不是数字

> ID：15299211
> 
> 赞同：-5
> 
> 时间：2013-03-08T16:52:34.403
> 
> 标签：javascript, typeof

原始问题：我对 JavaScript 转换有疑问。这是一个例子：

```
var obj = {
    x: 0,
    y: 1,
    z: 2
}

var b1 = typeof (obj.x),
    b2 = typeof (obj.y),
    b3 = typeof (obj.z); 
```

b1 是`"boolean"`，b2 是`"boolean"`，b3 是`"number"`。我需要将变量设置为 0，并且需要 JavaScript 将其解释为数字。我尝试过诸如 b1 = Number("0") 之类的转换，但它没有帮助:(

已编辑：对上面的 q 感到抱歉。这是真的。b1、b2 和 b3 都返回数字。这是我的实际问题。

```
var SomeClass = function () {}
SomeClass.prototype = {
    element: {},
    startAt: 0,
    length: 2,
    get: function (prop) {
        if (typeof (prop) === "undefined" || !(typeof (prop) === "string")) {
            return false;
        }
        if (!this[prop]) {
            return false;
        }
        return this[prop];
    }
}

var sc = new SomeClass();
alert(typeof (sc.get("startAt")) + "\n" + typeof (sc.get("length")) + "\n" + typeof (sc.get("element"))); 
```

我想将 startAt 设置为一个数字。真的对不起！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:14:41.997

> 我想将 startAt 设置为一个数字。

`SomeClass.prototype.startAt` **是**一个数字 ( `0`)。

如果属性为“falsey”，您的`get`函数会显式返回：`false`

```
if(!this[prop]){return false;} 
```

在 JavaScript 中，`0`、`""`、`false`、`undefined`和`null`都是“假的”，因此上述条件为真并导致`get`返回`false`。

如果您的目标是`false`在属性*不存在*时返回，您可以这样做：

```
if (!(prop in this)) { return false; } 
```

这将检查该属性是否存在于对象本身*或其*原型上，我怀疑这是您想要的。但是，如果您只想检查对象本身并忽略原型上的属性，那将是：

```
if (!this.hasOwnProperty(prop)) { return false; } 
```

将所有这些结合在一起，如果您的目标是`get`返回`false`对象没有的属性（无论是它自己的，还是通过它的原型），那么：

```
get : function(prop){
          if (typeof prop !== "string" || !(prop in this)) {
            return false;
          }
          return this[prop];
      } 
```

我在那里做了几件事：

1.  `typeof`是一个运算符，而不是一个函数，所以你不要在它的操作数周围使用括号（通常）

2.  因为`"undefined"`is ，所以在检查它是一个字符串`!== "string"`时不需要专门检查它。`prop`

3.  我曾经`!(prop in this)`查看对象（或其原型）是否具有该属性。

4.  我使用 . 将返回的两个条件组合`false`成一个`if`语句`||`。

# java - 什么是Tomcat ROOT应用程序，它有什么优势？

> ID：15299213
> 
> 赞同：-2
> 
> 时间：2013-03-08T16:52:41.860
> 
> 标签：java, tomcat, tomcat6

基本上是标题。我正在处理一个在`tomcathome/webapps`. 当以这个名称部署文件时，这对 webapp 和 tomcat 意味着什么，为什么有人会这样做（即有什么优势）？

如果这很重要，该项目正在使用 Java Servlets。

只是您可以`mydomain.com:8080/`直接访问该应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:56:20.050

它可以在访问`http://your-host.com/`而不是在访问`http://your-host.com/yourWebApp/`。

URL 更短的优势。

# php - 从 Expect 脚本捕获特定输出

> ID：15299218
> 
> 赞同：0
> 
> 时间：2013-03-08T16:52:56.287
> 
> 标签：php, telnet, expect, tasklist

我正在尝试确定应用程序 RA-POS 是否正在使用 Expect 的 Mac 在远程 Windows XP 上运行。我通过一个 PHP 页面发送它，希望在该页面上返回结果作为初始测试。不幸的是，当我将它们全部一起运行时，结果是命令行提示，而不是有关程序是否正在运行的实际信息。最终，我想创建一个条件，根据 RA-POS 是否正在运行，expect 返回值 1 或 0，然后继续执行另一个脚本或停止进程。

这是期待

```
#!/usr/bin/expect -d

set login "administrator"
set password "password"
set machineid [lindex $argv 0]
set portid [lindex $argv 1]
set cmdprompt "C:\Documents and Settings\Administrator>"
set output $expect_out(0,string)

spawn telnet -l administrator $machineid.noerrpole.com $portid
expect "password:"
send "$password\r"
expect "$cmdprompt"
send "tasklist /nh /FI \"IMAGENAME eq RA-POS.exe\"\r"
expect -re "(INFO:*)\r"
send_user "$expect_out(0,string)\n"
expect "$cmdprompt"
send "exit\r"
interact 
```

这是PHP

```
<?php
echo "<html>";
echo "<head>";
echo "<title>Turn off Windows Automatic Update</title>";
echo "</head>";
echo "<body>";
echo '<img src="NOERRlogofinal.jpg">';
echo "<br>";
echo "<br>";
echo "<pre>";

$portoffset = 1000 * $_POST["station"];
$port = 21023 + $portoffset;
$mall = $_POST["mall"];

$cmd = "/usr/bin/expect /home/dev/www/RAPOStest " . $_POST["mall"] . " " . $port;

echo "Running " . $cmd;

$retval = system($cmd);
echo "<br>";
echo "sss <br>";
echo "$retval";
echo "sss <br>";

echo "</pre>";

echo "<br>Your POS has been updated " . $_POST["mall"];
echo "<br>";
echo "<br>";
echo "</body>";
echo "</html>"; 
```

这是输出...

```
Running /usr/bin/expect /home/dev/www/RAPOStest NPCO-CP 22023spawn telnet -l administrator NPCO-CP.noerrpole.com 22023
Trying 166.161.172.106...

Connected to NPCO-CP.noerrpole.com.

Escape character is '^]'.

Welcome to Microsoft Telnet Service 

password: 

*===============================================================
Welcome to Microsoft Telnet Server.
*===============================================================
C:\Documents and Settings\Administrator>tasklist /nh /FI "IMAGENAME eq RA-POS.exe"
INFO: No tasks running with the specified criteria.

C:\Documents and Settings\Administrator>password:

sss 
C:\Documents and Settings\Administrator>password:sss 

Your POS has been updated NPCO-CP 
```

# dojo - Xpages 中的 dojo 错误

> ID：15299219
> 
> 赞同：0
> 
> 时间：2013-03-08T16:53:05.070
> 
> 标签：dojo, xpages, xpages-extlib

使用 Notes 8.5.3，UP1，我有一个很长的 XPage，它使用了很多 ExtLib 函数。我还使用 TinyMCE 和 jQuery 目录，如下所述：http: [//xomino.com/2012/08/26/jquery-in-xpages-14-toc-create-a-menu-to-scroll- to-a-form-section/](http://xomino.com/2012/08/26/jquery-in-xpages-14-toc-create-a-menu-to-scroll-to-a-form-section/)。当我创建一个新文档时，它可以正常工作并正确保存。但是，一旦它再次以编辑模式打开，我在 Firebug 中收到以下错误：

```
TypeError: node is null
    dojo.js, line 14.
Error parsing in _ContentSetter#Setter_view:id1:id9:callback:tabName_pane_6
    file "xsp/.ibmxspres/.mini/dojo/.en-us/@Fv&@EOb&@EOd&@EOf&@Ek&@Es&@Ie&@Ig.js", line 82
Error undefined running custom onLoad code:  This deferred has already been resolved.
    file "xsp/.ibmxspres/.mini/dojo/.en-us/@Fv&@EOb&@EOd&@EOf&@Ek&@Es&@Ie&@Ig.js", line 82 
```

基本上，这些错误完全阻止了任何 SSJS 被触发。关于如何调试这个的任何建议？

# java - 在Java中的文件扩展名之前添加一个字符

> ID：15299237
> 
> 赞同：-1
> 
> 时间：2013-03-08T16:53:59.127
> 
> 标签：java, file

我有一个名为“Hello.py”的文件，在以下目录中找到：

```
C:/Hello.py 
```

我的目标是将文件内容复制到另一个文件。我正在寻找一个正则表达式，它采用作为字符串的原始文件路径并在 .py 扩展名之前附加“1”。它应该如下所示：

```
C:/Hello1.py 
```

我的代码：

```
 public class Test {
    public static void main(String args[]){
     String filepath = "C:/Hello.py";
     String newpath = "C:/Hello1.py"; // I need a way to add that regex to it.
     File originalcopy =new File(newpath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:56:28.183

> // 我需要一种将正则表达式添加到其中的方法。

```
newfn=oldfn.replaceAll("(\\.[^.]*)$","1$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:56:35.623

替换`<extension>`为`1<extension>`：

`String newName = oldName.replaceAll("(\\.\\S+?$)","1$1");`

# sql - 在 SQL Select 中将列转换为字符串

> ID：15299241
> 
> 赞同：10
> 
> 时间：2013-03-08T16:54:14.753
> 
> 标签：sql, sql-server-2005

我希望将一列转换为字符串，其中该列是一个选择语句，然后与另一列连接。这就是我在使用 CONVERT 或 CAST 时出现困惑的地方。

例子：

```
 SELECT employeeID
    ,name
    ,location
    ,(SELECT COUNT(DISTINCT loginsFailed)
     FROM users
     WHERE (users.employeedID = userDetails.employeeID)
        AND (users.startdate = 01-01-2013) as LoginCountFailed
  ,(SELECT COUNT(DISTINCT logins)
   FROM users
   WHERE (users.employeedID = userDetails.employeeID)
       AND (users.startdate = 01-01-2013) as LoginCount
 FROM userDetails 
```

现在，此查询完美运行，因为它提供了正确的登录次数并且以整数形式失败。但是，我想将这些整数用作字符串，以便我可以一列。这需要作为字符串的一列是有原因的。

我想要只有 4 列，而不是 5。我想要的登录列是 loginCountFailed/LoginCount。例如：3/12。我需要它作为字符串，因为你不能除以 0，而且有时分母是 0。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T17:00:55.730

对于 MSSQL-2005 中的连接数字，您应该使用 CAST

```
CAST(loginsFailed AS VARCHAR(10)) + '/' + CAST(LoginCount AS VARCHAR(10)) 
```

loginsFailed 和 loginCount 上面其实是你的`select count distinct`片段

我希望这有效

```
CAST ((SELECT COUNT(DISTINCT loginsFailed) FROM users WHERE users.employeedID = userDetails.employeeID AND users.startdate = 01-01-2013) AS VARCHAR(10))
+ '/' +
CAST ((SELECT COUNT(DISTINCT logins) FROM users WHERE users.employeedID = userDetails.employeeID AND users.startdate = 01-01-2013) AS VARCHAR(10)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:56:35.780

```
DECLARE @i int
SET @i=98235

--Method 1 : Use CAST function
SELECT CAST(@i as varchar(10))

--Method 2 : Use CONVERT function
SELECT CONVERT(varchar(10),@i)

--Method 3 : Use STR function
SELECT LTRIM(STR(@i,10)) 
```

[来源](http://www.sqlservercurry.com/2010/09/convert-integer-to-string-in-sql-server.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:58:42.820

> 您可以使用`CAST`or执行以下操作`CONVERT`：

```
CONVERT(VARCHAR(20), YourIntColumn) 
```

> 或者

```
CAST(YourIntColumn AS VARCHAR(20)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T17:00:10.607

您**想要**做的是有一个 case 语句来处理除以零逻辑，而不是切换到数字数据的字符串。

```
SELECT employeeID
    ,name
    ,location
    ,(SELECT CASE WHEN COUNT(DISTINCT logins) = 0 then 0 ELSE
COUNT(DISTINCT loginsFailed) / COUNT(DISTINCT logins)
END
     FROM users
     WHERE (users.employeedID = userDetails.employeeID)
        AND (users.startdate = 01-01-2013) ) as LoginFailRatio
 FROM userDetails 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T17:05:56.527

我想你可以在这里创建一个外部查询：

```
SELECT u.employeeID, u.name, u.location,  
       CONVERT(varchar(10), u.LoginCountFailed) + '/' + CONVERT(varchar(10), u.LoginCount) "Ratio" 
    FROM
        (
         SELECT employeeID
            ,name
            ,location
            ,(SELECT COUNT(DISTINCT loginsFailed)
             FROM users
             WHERE (users.employeedID = userDetails.employeeID)
                AND (users.startdate = 01-01-2013) as LoginCountFailed
          ,(SELECT COUNT(DISTINCT logins)
           FROM users
           WHERE (users.employeedID = userDetails.employeeID)
               AND (users.startdate = 01-01-2013) as LoginCount
         FROM userDetails
        ) u 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T17:06:11.593

我认为这会成功

```
Select column1 + '/' + column2 from table1 
```

# jquery - rails 控制器操作未调用 js 函数 - 找不到原因

> ID：15299244
> 
> 赞同：2
> 
> 时间：2013-03-08T16:54:35.953
> 
> 标签：jquery, ruby-on-rails, routing

我正在尝试构建一个 home.js.erb 文件以匹配我的控制器操作 home.html.erb

我构建了它，并在 js 中进行了一个简单的警报调用，但它没有显示。当我复制/粘贴到我的另一个方法时，警报会起作用。

我希望 js 与我的家庭动作一起工作

流程是：登录（通过 Facebook）=> 回家。没有按钮调用“主页”操作，因为我使用 Facebook 登录，它在 FB 登录用户后通过 Javascript 上的重定向运行。

这是家庭行动：

```
def home
    respond_to do |format|
        format.html
        format.js
    end 

end 
```

这是 home.js.erb：

```
$(function(){
alert("Hello"); 
```

});

最后是控制器周围的路由，称为会话：

```
 resources :session 

   match '/signin', :to => "session#signin"
   match '/home', :to => "session#home"
   match '/logout', :to => "session#logout"
   match '/register', :to => "session#register" 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:59:30.127

如果我理解正确，您想在输入 home.html 时触发 home.js 警报，对吗？

如果是这种情况，您构建它的方式将不起作用，因为 home.js 和 home.html 不会同时呈现。即当用户登录时，控制器将调用home，格式为html。

我建议这样做：

将以下内容放在布局中的所有 javascript 调用下方。

```
<%= yield :javascripts -%> 
```

在 home.html.erb 中，添加到顶部：

```
<% content_for(:javascripts) do %>
  <script type='text/javascript'>
    <%= render :partial => 'session/home.js' %>
  </script>
<% end -%> 
```

注意：由于 home.js.erb 现在是部分文件，因此您必须重命名此文件：

```
_home.js.erb 
```

希望能帮助到你！

# youtube - YouTube：在我的频道中搜索标签 x 和 y

> ID：15299245
> 
> 赞同：2
> 
> 时间：2013-03-08T16:54:38.347
> 
> 标签：youtube, youtube-api, gdata

我希望在我的频道中搜索任何具有 tagX**和**tagY 的视频。根据[这个答案](https://stackoverflow.com/a/5988604/526495)，我尝试了以下网址：

[http://gdata.youtube.com/feeds/api/users/myusername/uploads/-/tagX/tagY?v=2](http://gdata.youtube.com/feeds/api/users/myusername/uploads/-/tagX/tagY?v=2)

但这只是对标签进行非常模糊的**OR搜索。**我怎样才能得到我想要的结果？

# ruby-on-rails - 无法弄清楚 Rails 路由助手的外观

> ID：15299248
> 
> 赞同：0
> 
> 时间：2013-03-08T16:54:51.343
> 
> 标签：ruby-on-rails, routes

我正在处理一项任务，其中包括向 Typo 添加功能。

`rake routes`显示：

```
admin_content    /admin/content                     {:controller=>"admin/content", :action=>"index"}
                 /admin/content(/:action(/:id))     {:action=>nil, :id=>nil, :controller=>"admin/content"} 
```

我需要创建一个与以下 RESTful 路由匹配的路由助手：`/admin/content/edit/:id`并且 url 的示例是`/admin/content/edit/1`

但我不知道该怎么做。我尝试了类似的东西，`admin_content_path(edit,some_article)`但没有奏效。（some_article 只是一个文章对象）

在`routes.rb`文件中：

```
# some other code

# Admin/XController
%w{advanced cache categories comments content profiles feedback general pages
 resources sidebar textfilters themes trackbacks users settings tags redirects seo post_types }.each do |i|
match "/admin/#{i}", :to => "admin/#{i}#index", :format => false
match "/admin/#{i}(/:action(/:id))", :to => "admin/#{i}", :action => nil, :id => nil, :format => false
end

#some other code 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:22:08.500

如果您使用的是 RESTful 路由，为什么不使用 Rails 默认路由？

所以你`routes.rb`看起来像

```
namespace :admin do
  resources :content
  resources :advanced
  resources :categories
  resources :comments
  ...
  <etc>
end 
```

这确实假设您的所有控制器都在文件夹中`admin`（但从您的评论来看，情况似乎如此。

如果你这样做，你可以使用标准的 route-helper: `edit_admin_content_path`。

如果您想手动完成，您应该尝试为您的路线添加一个名称。例如如下：

```
match "/admin/#{i}/:action(/:id)" => "admin/#{i}", :as => "admin_#{i}_with_action" 
```

然后你应该做类似的事情

```
admin_content_with_action(:action => 'edit', :id => whatevvvva) 
```

作为旁注：我真的不喜欢你的元编程`config/routes.rb`，如果你真的发现默认资源不合适，我建议改用方法（如解释[here](https://github.com/rails/rails/commit/0dd24728a088fcb4ae616bb5d62734aca5276b1b#commitcomment-1743800)）

所以例如在你的`config/routes.rb`你会写：

```
def add_my_resource(resource_name)
  match "/#{resource_name}", :to => "#{resource_name}#index", :format => false
  match "/#{resource_name}(/:action(/:id))", :to => "#{resource_name}", :as => 'admin_#{resource_name}_with_action", :action => nil, :id => nil, :format => false
end

namespace :admin do
  add_my_resource :content
  add_my_resource :advanced
  add_my_resource :categories
  ...
end 
```

哪个恕我直言*更具*可读性。

但我的建议是，除非你真的真的需要避免它，否则我会使用标准`resources`，因为你似乎没有添加任何特别的东西。

HTH。

# algorithm - 矩阵除以矩阵：巴特利特相关算法

> ID：15299249
> 
> 赞同：1
> 
> 时间：2013-03-08T16:54:57.990
> 
> 标签：algorithm, matrix-inverse

是否有包含反函数的库？

作为项目的一部分，我目前正在研究测向算法。我正在使用巴特利特相关性。在 Bartlett 相关中，我需要将分子（已经是 3 个矩阵乘法（包括 Hermitian 转置））除以分母，分母是矩阵及其 Hermitian 转置的乘积。

我意识到为了除法我使用逆。我只是想节省时间，并希望有一个包含逆的库。我只找到了用于查找逆的源代码的链接。这只是项目的一小部分，我希望能节省时间。我确实编写了其余的代码，但是还没有开始除法/逆运算。因此，我不会包含该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T14:39:27.833

我建议使用 BLAS 的实现，它们通常是非常通用的语言和平台，也用于构建 LAPACK。

# css - 您可以在加载时更改 css 类的优先级吗？

> ID：15299251
> 
> 赞同：3
> 
> 时间：2013-03-08T16:54:59.013
> 
> 标签：css, class, operator-precedence, tabletools

我正在使用 jQuery 数据表和 oTableTools aButtons。我正在这样做：

```
oTableTools: {
    aButtons: [
        {
            sExtends: 'text',
            sButtonText: 'Add +',
            fnClick: function ( nButton, oConfig, oFlash ) {/*stuff*/},
            sButtonClass: 'btn-success'
        }
    ]
}, 
```

我的问题是`a.DTTT_button`dataTable.tableTools.css:38 上的类覆盖了`.btn-success`bootstrap-combined.min.css:9 上的类，所以我的按钮是灰色而不是绿色。它们都是从外部源加载的，所以我无法编辑它们，并且更改它们的加载顺序不会影响任何东西，大概是因为 dataTable.tableTools.css 中的定义更具体，专门针对锚。

有没有办法强制在加载时`sButtonClass`优先`a.DTTT_button`，或者我将不得不在我的本地 css 文件中创建一个新类来复制我想要的样式并改为调用它？这对我来说感觉不太干净，所以如果我不是绝对必须这样做，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:12:30.567

除非您想按照您想要的顺序使用 JavaScript 删除并重新将系统表插入到 DOM 中，否则您无法更改 predence。这有点难看，但可以做到。

正确的方法是使用[CSS specificity](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)，但由于您无法编辑外部文件，因此操作 DOM 可能是唯一的方法。

这可能会有所帮助：

添加：[在正文中使用 javascript 将样式表添加到 Head](https://stackoverflow.com/questions/11833759/add-stylesheet-to-head-using-javascript-in-body)

删除：[如何从当前页面动态删除样式表](https://stackoverflow.com/questions/5033650/how-to-dynamically-remove-a-stylesheet-from-the-current-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:41:07.840

我认为在这种情况下给定参数的最干净的方法实际上是在类`a.sButtonClass`之后加载的“本地 css 文件”中创建一个选择器。`a.DTTT_button`特异性将匹配，但级联将获胜`a.sButtonClass`。我知道您说这“感觉不那么干净”，但是您无法操作两个 css 文件的限制使它成为最干净的解决方案之一。此外，如果您使用的是预处理器（例如基于 boostrap 的[LESS ），那么您可以通过将该类用作更具体选择器的 mixin 来使本地增强自动匹配 bootstrap 类。](http://www.lesscss.org/)

***但是，另一种方法***是根本不通过类应用这些样式，并将`sButtonClass`样式直接`style`锚元素的属性，因为这将覆盖`a.DTTT_button`正在执行的任何操作（假设`a.DTTT_button`没有`!important`标签）。

# excel - excel vba - 将.txt（制表符分隔）文件的文件夹导入下一个可用行

> ID：15299254
> 
> 赞同：0
> 
> 时间：2013-03-08T16:55:08.720
> 
> 标签：excel, vba

我一直在绞尽脑汁试图在 excel 中创建一个宏，它可以打开特定文件夹中的所有 .txt 文件并将它们导入下一个可用行。数据是制表符分隔的，第一个文件需要导入单元格B8，下一个文件B9，下一个B10等。

我大约有 80% 使用此代码，但它将所有数据导入一个单元格（B8），而不是制表符分隔成行（B8、C8、D8、E8 等）。

```
Sub Read_Text_Files()
Dim sPath As String, sLine As String
Dim oPath As Object, oFile As Object, oFSO As Object
Dim r As Long
'
'Files location
sPath = "C:\Test\"

'Text to Columns
Range("A1", Range("A" & Cells.Rows.Count).End(xlUp)).Select
Selection.TextToColumns DataType:=TabDelimited, TextQualifier:= _
        xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, Semicolon:=False, _
        Comma:=False, Space:=False, Other:=False
Application.ScreenUpdating = True

r = 8
Set oFSO = CreateObject( _
"Scripting.FileSystemObject")
Set oPath = oFSO.GetFolder(sPath)
Application.ScreenUpdating = False
For Each oFile In oPath.Files

If LCase(Right(oFile.Name, 4)) = ".txt" Then

Open oFile For Input As #1

Do While Not EOF(1) ' Loop until end of file.
Input #1, sLine ' Read data
Range("B" & r).Formula = sLine ' Write data line

r = r + 1
Loop
Close #1 ' Close file.
'
End If
Next oFile
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:02:59.920

我建议按照您在评论中提到的继续，使用 Workbooks.OpenText 打开每个文件，然后将打开的工作簿中的每一行复制到指定的工作表中。

```
Sub Read_Text_Files()
    Dim sPath As String
    Dim oPath, oFile, oFSO As Object
    Dim r, iRow As Long
    Dim wbImportFile As Workbook
    Dim wsDestination As Worksheet

    'Files location
    sPath = "C:\Test\"
    Set wsDestination = ThisWorkbook.Sheets("Sheet1")

    r = 8
    Set oFSO = CreateObject("Scripting.FileSystemObject")
    Set oPath = oFSO.GetFolder(sPath)
    Application.ScreenUpdating = False
    For Each oFile In oPath.Files
        If LCase(Right(oFile.Name, 4)) = ".txt" Then
            'open file to impor
            Workbooks.OpenText Filename:=oFile.Path, Origin:=65001, StartRow:=1, DataType:=xlDelimited, _
            TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, FieldInfo:=Array(1, 1), _
            TrailingMinusNumbers:=True
            Set wbImportFile = ActiveWorkbook
            For iRow = 1 To wbImportFile.Sheets(1).UsedRange.Rows.Count
                wbImportFile.Sheets(1).Rows(iRow).Copy wsDestination.Rows(r)
                r = r + 1
            Next iRow
            wbImportFile.Close False
            Set wbImportFile = Nothing
        End If
    Next oFile
End Sub 
```

# android - android xml样式文件中的错误

> ID：15299255
> 
> 赞同：-3
> 
> 时间：2013-03-08T16:55:09.623
> 
> 标签：android, android-layout

这是完整的 xml 文件，并且在此 xml 文件中的每个样式名称标记的开头都会发生错误

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/nav_bar</item>
    <item name="android:background">@drawable/nav_bar</item>
    <item name="android:cacheColorHint">@drawable/nav_bar</item>
</style>

<style name="Widget.Styled.TabView" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/tab_indicator_customize</item>
</style>

<style name="Widget.Styled.TabBar" parent="Widget.Sherlock.Light.ActionBar.TabBar">
    <item name="background">@color/space_menu</item>
    <item name="android:background">@color/space_menu</item>
    <item name="android:cacheColorHint">@color/space_menu</item>
</style>

<style name="Sherlock.__Widget.Holo.Spinner" parent="Widget">
    <item name="android:dropDownSelector">@drawable/abs__list_selector_holo_dark</item>
    <item name="android:popupBackground">@drawable/box_element</item>
    <item name="android:gravity">left|center_vertical</item>
    <item name="android:spinnerMode">dropdown</item>
    <item name="android:clickable">true</item>
    <item name="android:width">200dp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:03:38.770

您必须将`<style>`标签包装在`<resources>`标签中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/nav_bar</item>
    <item name="android:background">@drawable/nav_bar</item>
    <item name="android:cacheColorHint">@drawable/nav_bar</item>
</style>

<style name="Widget.Styled.TabView" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/tab_indicator_customize</item>
</style>

<style name="Widget.Styled.TabBar" parent="Widget.Sherlock.Light.ActionBar.TabBar">
    <item name="background">@color/space_menu</item>
    <item name="android:background">@color/space_menu</item>
    <item name="android:cacheColorHint">@color/space_menu</item>
</style>

<style name="Sherlock.__Widget.Holo.Spinner" parent="Widget">
    <item name="android:dropDownSelector">@drawable/abs__list_selector_holo_dark</item>
    <item name="android:popupBackground">@drawable/box_element</item>
    <item name="android:gravity">left|center_vertical</item>
    <item name="android:spinnerMode">dropdown</item>
    <item name="android:clickable">true</item>
    <item name="android:width">200dp</item>
</style>

</resources> 
```

# javascript - Internet Explorer onchange 出错

> ID：15299257
> 
> 赞同：0
> 
> 时间：2013-03-08T16:55:10.557
> 
> 标签：javascript, html, onchange

我有一个通过 onchange 方法调用 javascript 函数的输入文本。

```
var desc= document.getElementById('descricao').value;
var quantia_anterior= document.getElementById('quantia_hidden').value.trim();
var quantia=document.getElementById('quantia2').value.trim();
var n=desc.replace(quantia_anterior+" €",quantia);
document.getElementById('descricao').value = n; 
```

所以，它在谷歌浏览器中运行正常，但在 Internet Explorer 中不起作用。

# visual-studio-2010 - 1050x1680 分辨率导致 Visual Studio 2010 在与 TFS 交互时锁定

> ID：15299261
> 
> 赞同：1
> 
> 时间：2013-03-08T16:55:17.807
> 
> 标签：visual-studio-2010, tfs, screen-resolution

我刚刚在我的系统 (NEC E222W) 中添加了第三台显示器，我的 NVidia GeForce 9500 GT 卡能够旋转，从而获得 1050x1680 分辨率。但是，当使用此模式时，Visual Studio 2010 SP1 (10.0.40219.1 SP1Rel) 会一直锁定（占用 50% 的 CPU），直到我在与 TFS 交互时将其杀死。我可以在 VS 2010 中工作，直到我尝试使用 TFS 做任何事情。

我可以在我的其他两个显示器上打开 Visual Studio 而不会出现问题并检查内容等，但是当我将应用程序移动到我的 1050x1680 显示器并启动 TFS 对话框时，应用程序就会挂起。

有人有这个问题吗？我对 NVidia 驱动程序 (191.07) 非常了解，并且 Windows XP SP 3 与 Microsoft Update 一起使用。我在非管理员帐户下运行。

互联网没有帮助。我发现的唯一一件事是： [http ://social.msdn.microsoft.com/Forums/en/vseditor/thread/ce9134aa-b444-49e8-99f2-01b67404156a](http://social.msdn.microsoft.com/Forums/en/vseditor/thread/ce9134aa-b444-49e8-99f2-01b67404156a)

这：[使用 TFS 时 Visual Studio 2010 冻结](https://stackoverflow.com/questions/10842981/visual-studio-2010-freezes-when-using-tfs)是无关的。

我能够在 1050x1680 监视器上启动 VS 2010，工作，然后将现有实例转移到另一个监视器以与 TFS 接口（签入/签出），然后将应用程序成功转移回 1050x1680 监视器。我强烈怀疑 TFS 结帐对话框窗口有问题。

# javascript - 敲除js视图模型中的window.location不起作用

> ID：15299274
> 
> 赞同：0
> 
> 时间：2013-03-08T16:55:53.697
> 
> 标签：javascript, jquery, knockout.js

我有以下内容：

**HTML**

```
<div id="documentsList" data-bind="foreach: documents">
   <span class="ui-icon ui-icon-document" data-bind="click: $root.onViewDocumentClick"></span>
</div> 
```

**JAVASCRIPT**

```
documentViewModel = new function() {
   var self = this;
   self.documents = ko.observableArray([]); //Loaded elsewhere
   self.onViewDocumentClick = function(data) {
      var path = "/ViewDocument/0";
      var url = path.replace("/0","/" + data.Id.ToString());
      window.location = url;
   }
}

$(function() {
   $ko.applyBindings(documentViewModel,$("#documentsList")[0]);
  }); 
```

我的问题是，一旦加载了文档并单击图标，页面就会重新加载，但它表明页面实际上正在尝试重新加载 /ViewDocument/undefined ...这当然会引发错误，因为页面没有存在。

如果我进行以下更改以通过 jQuery 而不是 Knockout 处理单击事件，那么一切正常。

**HTML**

```
<span class="ui-icon ui-icon-document" data-bind="text: Id"></span> 
```

**JAVASCRIPT**

```
$("#documentsList").on("click","span.ui-icon-document",function() {
      var path = "/ViewDocument/0";
      var url = path.replace("/0","/" + $(this).text());
      window.location = url;
}); 
```

我错过了什么？

**编辑** 这是一个演示我的问题的小提琴：[小提琴示例](http://jsfiddle.net/LzFx6/2/) 如果您将 div 的名称更改为 documentList2，您将看到正确的行为。如果您将其保留为 documentList，您将看到错误。**请务必在更改 div 名称后运行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:22:28.410

您确定`Id`在您的文档对象中定义了吗？`/ViewDocument/undefined`似乎表明正在`data.Id.ToString()`解决`undefined`.

`Id`我在这里整理了一个小提琴，当我在文档对象中定义时，它似乎工作正常：

[http://jsfiddle.net/jtbowden/gf9QT/](http://jsfiddle.net/jtbowden/gf9QT/)

出于显而易见的原因，我注释掉了该`window.location`行，但我可以在调试控制台中清楚地看到它正在尝试访问正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:54:38.617

我不知道这是否是一个错字，但它是“toString()”而不是“ToString”

```
var url = path.replace("/0","/" + data.Id.ToString()); 
```

应该

```
var url = path.replace("/0","/" + data.Id.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:31:14.863

事实证明，我在 documentList 元素上还有另外两个点击绑定（与其他子元素相关联）。但是，这些是在 window.location 生效之前触发的。因此，当 window.location 能够执行时，url var 超出了范围。

# php - cakephp 从 DB 获取所有下拉选项

> ID：15299277
> 
> 赞同：1
> 
> 时间：2013-03-08T16:56:07.553
> 
> 标签：php, cakephp

我在单独的表格中有下拉和下拉选项。这很好，但现在我希望能够使用下拉代码检索所有选项。在这个页面上，我有所有的下拉菜单和项目。假设下拉代码是`dropdown1`.

我希望能够做到

```
$this->Form->input('dropdownitem_id', array('options' => $dropdown['dropdown1'])); 
```

有没有办法在没有助手的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:58:03.150

1）你为什么要“没有助手”做这件事？

2) 是的，使用普通的 PHP 东西 - 即，将 HTML 内容回显到页面的 foreach() 循环

只需查看帮助程序生成的内容，并使用 PHP 来模仿它。

```
<select name="whatever">
    <?php
    foreach($items as $item) {
        echo '<option value=" . $item['id'] . '">' . $item['name'] . '</option>';
    }
    ?>
</select> 
```

（类似的东西 - 我很快就写下了，但你应该明白）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:15:20.030

在控制器中，

```
$dropdownitems = $this->OtherModel->find('list');
$this->set(compact('dropdownitems')); 
```

在你看来

```
$this->Form->input('dropdownitem_id'); 
```

选择的选项将自动填充。

但我不明白，你所说的 helper 是什么意思？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:01:40.940

您应该使用可包含的行为。

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

然后您将查询顶级元素。

在你这样做之后。

你必须像 Dave 所说的那样运行一个 foreach 循环并格式化选项。

如果您需要有关可收容物品的帮助，请告诉我，它们是救生员和您的朋友！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T14:10:33.073

我创建了一个自定义助手来获得我想要的确切行为。

# cocoa - NSView 的子视图的顺序是否有保证？

> ID：15299290
> 
> 赞同：1
> 
> 时间：2013-03-08T16:56:42.777
> 
> 标签：cocoa, nsview, subview

使用时`[[NSView subviews] objectAtIndex:]`，我们能保证每次都选择相同的视图吗？

**背景：**我正在使用`IKScannerDeviceView`并想隐藏文件格式选择。我使用以下代码执行此操作：

```
NSView *parameterView = [[[[_scannerView subviews][0] subviews][1] subviews][0] subviews][0];

NSView *v1 = [parameterView subviews][37];
[v3 setHidden:YES];
NSView *v2 = [parameterView subviews][38];
[v4 setHidden:YES]; 
```

在测试中，这总是隐藏正确的视图，但我能保证总是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:03:29.770

如果您自己构建层次结构并在每次订单确定时都以相同的方式进行。

显然，无法保证您无法控制的未知视图层次结构的顺序。在视图层次结构的情况下，`IKScannerDeviceView`应将其视为私有的。

# c - C - fscanf 混合数字和静态文本

> ID：15299291
> 
> 赞同：5
> 
> 时间：2013-03-08T16:56:54.347
> 
> 标签：c, scanf

我正在尝试读取以这种一般方式格式化的文件：

```
Text Description: 12
Description2: 1
More descriptive things: 6 
```

我想将数字 12、1 和 6 读入变量。

我试过这样的代码：

```
fscanf(fptr, "Text Description:%d",&desc1);
fscanf(fptr, "Description2:%d",&desc2);
fscanf(fptr, "More descriptive things:%d",&desc3); 
```

但由于某种原因，只有第一个变量被填充。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:59:23.667

字符串格式开头加空格避免换行问题

```
fscanf(fptr, " Text Description:%d",&desc1);
fscanf(fptr, " Description2:%d",&desc2);
fscanf(fptr, " More descriptive things:%d",&desc3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:58:38.823

处理完 12 后，您就不会读取换行符，因此其他两个调用会发现它而不是字符串或整数，因此会失败。您可以在下一次`fscanf`调用中使用空格（它会占用您要匹配的字符串之前的所有空白字符）。或者，您可以通过调用来使用它`fgetc`，只要每行立即以换行符结束，例如

```
fscanf(fptr, "Text Description:%d",&desc1);
fgetc(fptr); // drop the next character
fscanf(fptr, "Description2:%d",&desc2); 
```

在整数之后删除所有流输入直到下一个 '\n' 可以通过循环来完成：

```
while (fgetc(fptr) != '\n')
   ; 
```

# microsoft-test-manager - 团队 Web 访问测试用例详细信息

> ID：15299292
> 
> 赞同：0
> 
> 时间：2013-03-08T16:56:55.037
> 
> 标签：microsoft-test-manager

我的一位用户注意到 TFS 2012 Team Web Access 有一些奇怪的地方。她使用测试管理器输入测试用例工作项。

其中一个步骤是多行的。
在 TM 上保存得很好。

![MTM](../Images/6d665531a09523a4d11426ed2066443e.png)

但是，每个人都可以在 Team Web Access 上看到 HTML 编码。 ![在此处输入图像描述](../Images/e6d32a31ff1d856f0cede2e3abb9f4bf.png)

是否有解决此问题的方法或者这是默认行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:51:13.517

This is the TFS 2010 web access. You should use the 2012 version and this won't be a problem any more.

# ruby - 如何使用以下描述中提到的符号？

> ID：15299294
> 
> 赞同：0
> 
> 时间：2013-03-08T16:57:01.757
> 
> 标签：ruby, ruby-1.9, irb

这些符号在哪里定义，它们的用途是什么？

```
:w2_end
:w2_beg
:w1_beg
:w1_end 
```

我`IRB`通过使用 line找到了我的那些`Symbol.all_symbols`。

我的`Ruby`版本和`IRB`版本是：

```
C:\>ruby -v
ruby 1.9.3p374 (2013-01-15) [i386-mingw32]

C:\>irb --version
irb 0.9.6(09/06/30) 
```

我在另一个版本中尝试了相同的方法`Ruby`，`IRB`如下所示：

```
C:\>irb --version
irb 0.9.6(09/06/30)

C:\>ruby -v
ruby 1.9.3p392 (2013-02-22) [i386-mingw32]

Arr = Symbol.all_symbols 
Arr.include?(:w2_end) #=> true
Arr.include?(:w2_beg) #=> true
Arr.include?(:w1_beg) #=> true
Arr.include?(:w1_end) #=> true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:30:04.143

这些符号没有出现在 Ruby 源代码中，也没有在我查找它们时定义：

```
$ rvm 1.9.3-p374 do irb
1.9.3p374 :003 > Symbol.all_symbols.map(&:to_s).grep(/^w\d/)
 => [] 
```

您是否已将 irb 配置为加载任何扩展程序？查看您的 .irbrc，如果有的话。

这些符号通常可以在 readline 库等地方找到。irb 使用 readline。也许 Windows 上的 readline 有一些特别之处（例如，它是用 Ruby 编码的）导致这些符号被定义。

# powershell - 将 GUI 文本框数据复制到文本文件

> ID：15299295
> 
> 赞同：0
> 
> 时间：2013-03-08T16:57:02.993
> 
> 标签：powershell

我知道这是一个简单的解决方案，但我无法弄清楚语法。我正在尝试从多行文本框中获取信息，并在单击按钮时将其放入文件中。这就是我目前所处的位置，因为我对我的去向有一个不完整的想法。问题是我想从 GUI 文本框中获取机器列表并将其放入文本文件中。

```
$button.add_button(
    Get-Content $AddButton.TEXT | Foreach-Object {" I want to pipe into a c:\temp\PROD\Machines.txt"}) 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:47:11.163

真的不确定我是否应该开始... ;)

*   我猜方法是`Add_Click`
*   如果`$AddButon`是您的 TextBox - 您可以直接访问属性而不是使用`Get-Content`cmdlet
*   我会用`Out-File`

代码：

```
$button.Add_Click({
    $AddButton.Text | Out-File c:\temp\PROD\Machines.txt
}) 
```

未测试。

# sql-server - LINQ (to Oracle) - Row_Number() Over Partition By

> ID：15299301
> 
> 赞同：2
> 
> 时间：2013-03-08T16:57:33.393
> 
> 标签：sql-server, linq, oracle, entity-framework

这可能是其他 Partition By + Rank 问题的重复，但我发现这些问题/答案中的大多数都过于特定于其特定的业务逻辑。我正在寻找的是以下类型查询的更通用的 LINQ 版本：

```
SELECT id,
       field1,
       field2,
       ROW_NUMBER() OVER (PARTITION BY id
                          ORDER BY field1 desc) ROWNUM
FROM someTable; 
```

我们对此做的一个非常常见的事情是把它包装成这样的东西：

```
SELECT id,
       field1,
       field2
FROM (SELECT id,
      field1,
      field2,
      ROW_NUMBER() OVER (PARTITION BY id
                         ORDER BY field1 desc) ROWNUM
      FROM someTable)
WHERE ROWNUM = 1; 
```

它返回包含每个 id 的 field1 中的最大值的行。将 order by 更改为 asc 当然会返回最低值或将等级更改为 2 将获得第二高/最低值等，等等。有没有办法编写一个可以在服务器端执行的 LINQ 查询，这给了我们相同的功能？理想情况下，性能与上述一样。

**编辑：** 我在网上搜索后尝试了许多不同的解决方案，它们最终都给了我同样的问题，因为生成的 SQL 包含一个`APPLY`.

*我试过几个例子：*

```
from p in db.someTable
group p by p.id into g
let mostRecent = g.OrderByDescending(o => o.field1).FirstOrDefault()
select new {
    g.Key,
    mostRecent
};

db.someTable
    .GroupBy(g => g.id, (a, b) => b.OrderByDescending(o => o.field1).Take(1))
    .SelectMany(m => m); 
```

这两者都导致使用`OUTER APPLY`Oracle 不支持的 SQL 代码（如果不相同的话）非常相似。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:02:46.687

您应该能够执行以下操作：

```
var results = someTable
                 .GroupBy(row => row.id)
                 .Select(group => group.OrderByDescending(r => r.id).First()); 
```

如果您想要第三高的值，您可以执行以下操作：

```
var results = someTable
                 .GroupBy(row => row.id)
                 .Select(group => group.OrderByDescending(r => r.id).Skip(2).FirstOrDefault())
                 .Where(r => r != null); // Remove the groups that don't have 3 items 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:05:14.777

另一种方法是使用一个子查询，该子查询分别获取`field1`每个`ID`.

```
SELECT  a.*
FROM    someTable a
        INNER JOIN
        (
            SELECT  id, max(field1) max_field
            FROM    sometable
            GROUP   BY id
        ) b     ON a.id = b.ID AND
                    a.field1 = b.max_field 
```

当转换为`LINQ`：

```
from a in someTable
join b in 
    (
        from o in someTable
        group o by new {o.ID} into g
        select new 
        {
          g.Key.ID,
          max_field = g.Max(p => p.field1)
        }
    ) on new {a.ID, a.field1} equals new {b.ID, field1 = b.max_field}
select a 
```

# cassandra - Cassandra nodetool 连接超时

> ID：15299302
> 
> 赞同：4
> 
> 时间：2013-03-08T16:57:33.860
> 
> 标签：cassandra, thrift

我试图使用 nodetool 检查我的集群的状态，但它无法连接。

我的 cassandra.yaml 配置了 listen_address 和 rpc_address 设置为服务器 IP（例如 10.10.10.266）。

我能够使用相同的 IP 通过 cqlsh 和 cassandra-cli 进行连接，但是当我连接到 nodetool 时它不起作用。

```
/bin$ nodetool -h 10.10.10.266 ring
Failed to connect to '10.10.10.266:7199': Connection has timed out 
```

我不认为我在服务器（Ubuntu）上启用了防火墙。我直接在有问题的服务器上运行它，所以无论如何我都不会认为这会是防火墙问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-09T19:15:14.127

您可能需要取消注释 cassandra-env.sh 中的以下参数：

```
-Djava.rmi.server.hostname=<public name> 
```

替换为您希望 jmx 接口侦听的接口的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T18:42:34.140

`nodetool`通过 JMX 接口连接。默认情况下，它在端口 7199 上侦听（其他工具默认使用 RPC 接口在端口 9160 上侦听）。检查文件中的 JMX 设置`cassandra-env.sh`。很可能 JMX 服务器正在侦听错误的接口（或者可能是环回接口）。

默认 JMX 配置部分（cassandra 版本 1.1.5）包含故障排除指南的链接：

```
# jmx: metrics and administration interface
# 
# add this if you're having trouble connecting:
# JVM_OPTS="$JVM_OPTS -Djava.rmi.server.hostname=<public name>"
# 
# see 
# https://blogs.oracle.com/jmxetc/entry/troubleshooting_connection_problems_in_jconsole
# for more on configuring JMX through firewalls, etc. (Short version:
# get it working with no firewall first.)
JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.port=$JMX_PORT" 
JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.ssl=false" 
JVM_OPTS="$JVM_OPTS -Dcom.sun.management.jmxremote.authenticate=false" 
JVM_OPTS="$JVM_OPTS $JVM_EXTRA_OPTS" 
```

还值得列出所有使用的网络接口，`ifconfig`并尝试在所有接口上远程登录端口 7199。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T17:04:46.323

我面临同样的超时问题。但是，我发现由于令牌问题，我的集群没有正确启动，并且出现“活动端点之间的主机 ID 冲突”。一旦我删除数据目录并重新启动集群，nodetool 就开始正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-02T14:38:08.527

我也看到了同样的问题，但结果是我的主机文件中有一些奇怪的东西阻止了 JMX 绑定到接口。

具体来说，主机文件有一个带有主机名的外部 IP 地址条目。我们的服务器有两个接口，一个是外部接口，一个用于内部网络。删除该主机条目就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-06T19:41:32.523

正如有人提到的，它连接到 JMX 端口。

您可以找到 JMX 端口：

*   在`/etc/cassandra/cassandra-env.sh`. 这不适用于基于 ccm 的本地集群或
*   （我的最爱）通过查看节点上运行的 Cassandra 节点进程的命令行。

我的案例是使用本地创建的集群，`ccm`因此我的所有节点都在具有不同 JMX 端口的同一主机上运行。

```
vagrant@triforce:~$ ps -eaf | grep cassandra | grepi -o " [^ ]*jmx.local.port[^ ]* "
 -Dcassandra.jmx.local.port=7100
 -Dcassandra.jmx.local.port=7300
 -Dcassandra.jmx.local.port=7200
vagrant@triforce:~$ 
```

这是因为我在 localhost 上运行了 3 个节点。

```
vagrant@triforce:~$ nodetool -p 7100 ring

Datacenter: datacenter1
==========
Address    Rack        Status State   Load            Owns                Token
                                                                          3074457345618258602
127.0.0.1  rack1       Up     Normal  64.65 MB        33.33%              -9223372036854775808
127.0.0.2  rack1       Up     Normal  65.26 MB        33.33%              -3074457345618258603
127.0.0.3  rack1       Up     Normal  65.92 MB        33.33%              3074457345618258602

vagrant@triforce:~$ 
```

# java - 检查数组是否对称

> ID：15299312
> 
> 赞同：2
> 
> 时间：2013-03-08T16:58:20.023
> 
> 标签：java, arrays, symmetric

```
public class symm
{

/* 
 * Returns true if array A is symmetric.
 * Returns false otherwise.
 * n is the number of elements A contains.
 *
 * The running time of your algorithm is O(  ).
 * You may add a brief explanation here if you wish.
 */

 public static boolean symmetric( int[] A, int n )
 {
 return symmHelper(A, n, 0);

 }

private static boolean symmHelper(int[] A, int n, int i) {
if(n==1)
    return true;
if((n==2) && (A[i] == A[n-1-i]))
    return true;
if((i == n-1-i) && (A[i] == A[n-1-i] ))
    return true;    

if(A[i] == A[n-1-i] && i < n/2 )
    return symmHelper(A, n, i+1);

return false;
}  

} 
```

测试用例：我通过了所有测试，除了最合适的，我每次运行它都没有，我认为问题是中间有两个 2。而且我不太确定代码，我认为它可以简化。运行时间是 o(log n) 吗？

5 8 2 2 8 5 是

10 7 50 16 20 16 50 7 10 是

5 8 5 是

1000 1000 是

6000 是

10 7 50 16 20 16 50 7 1000 无

10 7 50 16 20 16 50 700 10 无

10 7 50 16 20 16 5000 7 10 无

10 7 50 16 20 1600 50 7 10 无

10 7 50 16 1600 50 7 10 无

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:30:39.213

复杂的代码会导致更多的错误。因此，简化它。此外，寻找不平等而不是平等；检查一个错误比检查一切是否正确更容易。

```
// A = array, n = size of array, i = looking at now
private static boolean symmHelper(int[] A, int n, int i) {

    if (i > n/2)     // If we're more than halfway without returning false yet, we win
        return true;

    else if (A[i] != A[n-1-i])    // If these two don't match, we lose
        return false;

    else    // If neither of those are the case, try again
        return symmHelper(A, n, i+1);
} 
```

如果我没记错我的 O() 表示法，我认为这应该是 O(n+1)。您可以对此进行其他调整以删除 +1，但这会使代码整体运行速度变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:12:55.800

```
if(A[i] == A[n-1-i] && i < n/2 ) 
```

那条线就是问题所在。因为您使用的是偶数 > 2 的值，所以当它到达这一行时，它会跳过它，因为此时 i **=** n/2，而不是小于它。所以函数会跳过它并继续到`return false`. 把它改成这个，你应该没问题：

```
if(A[i] == A[n-1-i] && i <= n/2 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T07:37:05.253

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner input = new Scanner(System.in);

    int N;
    int i;
    boolean sym = true;

    N=input.nextInt();
    int [] numbers = new int [N];

    for (i=0; i<N; i++){
        numbers[i]= input.nextInt();
    }
    for(i=0;i<N;i++){
        if(numbers[i]!= numbers[N-1-i]){
        sym=false;}
    }

   if(sym==true){
       System.out.println("The array is a symetrical array");
   }
   else{
       System.out.println("The array is NOT a symetrical array");
   }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T17:13:55.477

这个检查没用：

```
if((i == n-1-i) && (A[i] == A[n-1-i] ))
    return true; 
```

当然，如果两个索引相同，则那里的值将匹配。

如果一分为二，您还需要将其拆分：

```
if(A[i] == A[n-1-i] && i < n/2 )
    return symmHelper(A, n, i+1); 
```

如果 . 则返回 true `i >= n/2`。

否则会发生什么，在 i > n/2 之后（这意味着你已经知道你的数组是对称的），你不会进入那个 if 并因此返回 false，这是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T08:06:44.063

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner input = new Scanner(System.in);

    int N;
    int i;

    N=input.nextInt();
    int [] numbers = new int [N];

    for (i=0; i<N; i++){
        numbers[i]= input.nextInt();
    }
    i=0;
    while (i<N/2&& numbers[i] == numbers [N-1-i]){i++;
    }

   if(i==N/2){
       System.out.println("The array is a symetrical array");
   }
   else{
       System.out.println("The array is NOT a symetrical array");
   }
        } 
```

# jquery - 从多个表中选择并显示在一个表中

> ID：15299313
> 
> 赞同：3
> 
> 时间：2013-03-08T16:58:37.620
> 
> 标签：jquery, mysql, listbox, options

我有两张桌子叫`order`和`order_items`

```
order_id--pupil_id --date_bought--total_price

1  ----1001---- 2013-03-07 23:35:49 - 1.00 
```

和

```
order_id-- product_name

1 ------ product1

1 ------ product2 
```

我想显示购买日期和总价。这将是某种加入声明，其中包含使用最新 order_id 购买的产品，可能在声明中由 desc 订购

我不确定如何将它拼凑在一起。关于如何实现这一目标的任何想法或线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:00:37.770

```
SELECT product_name, date_bought, total_price
FROM `order` o
JOIN `order_items` oi
ON o.order_id = oi.order_id
ORDER BY o.order_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:06:05.977

```
SELECT 
    od.date_bought, 
    od.total price, 
    group_concat(odi.product_name separator ', ') 
FROM order, order_items 
WHERE 
    order.order_id od = order_items.order_id odi 
GROUP BY odi.order_id
ORDER BY od.order_id DESC; 
```

# matlab - 比较图像matlab

> ID：15299315
> 
> 赞同：0
> 
> 时间：2013-03-08T16:58:41.293
> 
> 标签：matlab, image-processing, mathematical-morphology

好的，假设我有一个二进制图像，其中包含 1,2,A,B 或其他的像素表示。但现在让我们只考虑 1

```
0 0 0 0
0 1 1 0
0 1 1 0
0 1 1 0
0 1 1 0
0 0 0 0 
```

然后我有另一个包含 1 的标准表示的图像。

现在我不想比较这两个图像并确定我的第一张图像是否包含 1 的像素值。

我可以使用哪些算法？

请我不需要 matlab 函数的名称来进行图像比较，就像类似问题的答案一样。而不是我需要一些可用于解决此问题的算法的名称，以便我可以在 C# 中自己实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:11:51.350

你需要计算的是`distance`你的图像和基本事实之间的关系。这个距离可以用许多不同的方式来表示。谷歌搜索`similarity measures on binary data`。请参阅此处的[评论](http://www.iiisci.org/journal/CV%24/sci/pdfs/GS315JG.pdf)。

# javascript - 您如何在不使用 RequireJS 的情况下使用 Testacular 管理（Coffeescript）导入？

> ID：15299320
> 
> 赞同：2
> 
> 时间：2013-03-08T16:58:59.577
> 
> 标签：javascript, testing, coffeescript, karma-runner

我在所有事情上都使用 Coffeescript，并且在尝试将其包含`chai.js`在我的测试中时遇到了麻烦。

我`configs/testacular.conf.js`看起来像这样（注意相对`basePath`）：

```
basePath = '../';

// Install devDependencies with `npm install` first before attempting to run Testacular!
files = [
  MOCHA,
  MOCHA_ADAPTER,
  'assets/js/lib/**/*.js',
  'test/lib/angular/*.js',
  'test/unit/**/*.coffee',
  'assets/js/*.coffee',
  'node_modules/chai/chai.js'
];

autoWatch = true;

browsers = ['Chrome']; 
```

我列出`node_modules/chai/chai.js`而不是将其包含在我的源代码中，因为我希望通过`devDependencies`with安装 chai `npm install`。

我的测试存在`test/unit/coolSpec.coffee`并如下所示：

```
"use strict"

should = chai.should()

# Mocha/Chai specs for controllers go here
describe "OverviewCtrl", ->
  beforeEach ->
    ctrl = new OverviewCtrl()

  it "should do something awesome.", ->
    1.should.be.a 'string' 
```

但睾丸未能找到`chai`。

```
Uncaught ReferenceError: chai is not defined
    at /.../test/unit/coolSpec.coffee-compiled.js:5
Chrome 25.0 (Linux): Executed 0 of 0 ERROR (0.386 secs / 0 secs) 
```

如何在**不使用 RequireJS 的**情况下管理 Javascript 导入？

编辑：根据[此处的 testacular 文档](http://testacular.github.com/0.6.0/config/files.html)，在 files 数组中列出文件的效果正是`<script>`在测试时将标签插入浏览器的效果。这应该意味着所有符号都已导入。

但话又说回来，也许这就是问题所在：[http](http://chaijs.com/chai.js) ://chaijs.com/chai.js本身是为 RequireJS 编写的。我可能别无选择，只能使用它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:46:23.700

转到[chai 的主页](http://chaijs.com/)，然后选择下载 BROWSER 版本的 chai 脚本，而不是 NodeJS 的那个。

您可以在浏览器中用于测试的 chai 脚本的直接链接在这里：[http ://chaijs.com/chai.js](http://chaijs.com/chai.js)

# internet-explorer - X-Download-Options: noopen 等效项

> ID：15299325
> 
> 赞同：8
> 
> 时间：2013-03-08T16:59:17.473
> 
> 标签：internet-explorer, cross-browser, http-headers

HTTP 标头`X-Download-Options: noopen`通过删除“打开方式”选项来更改 Internet Explorer 下载对话框。（唯一剩下的选项变成：“另存为”和“取消”）

您知道是否有与此标头等效的跨浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T22:19:16.430

那是IE扩展，其他浏览器还没有采用它。

您可以做的最好的事情是`Content-Disposition:attachment`，但这不会隐藏 Open 选项。

# html - 如何在淘汰数据绑定中添加内联计算？

> ID：15299326
> 
> 赞同：1
> 
> 时间：2013-03-08T16:59:18.697
> 
> 标签：html, knockout.js

我怎样才能建立这样的超链接？

```
<a href="#/detail/3">View Detail</a> 
```

我可以做类似下面的事情吗？

```
<a data-bind="href: '#/detail/'+id">View Detail</a> 
```

我只是认为没有必要为`href`. 必须有一个简单的方法，一些内联标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:07:49.363

我只是通过尝试不同的事情来解决这个问题：

```
<a data-bind="attr: {href: '#/view/'+id()}">View Detail</a> 
```

它只是工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:10:28.673

你需要做这样的事情：

```
 <a data-bind="href: '#/detail/'+id()">View Detail</a> 
```

但是，为了更好地实践 MVVM 模式，我建议您创建一个 computedObservable

# postgresql - 我如何从 postgresql 中的 array_to_string 返回总和

> ID：15299327
> 
> 赞同：-2
> 
> 时间：2013-03-08T16:59:21.563
> 
> 标签：postgresql

我需要 array_to_string 函数的求和结果，该函数在数组中只有整数值。

```
SELECT
    state_name,
    "ST_CODE" ,
    dist_name ,
    "DIST_CODE",
    subdist_name,
    "SUBDIST_CODE",
    array_to_string(array_agg(distinct jan_sale::numeric), ',') as super
FROM village_details_new , aw
WHERE
    "ST_CODE"::integer=3
    AND village_details_new.aw_code::integer = aw.aw_code::integer
group by
    "SUBDIST_CODE",
    state_name,
    "ST_CODE" ,
    dist_name ,
    "DIST_CODE",
    subdist_name
order by "SUBDIST_CODE" 
```

我需要总和

```
sum(array_to_string(array_agg(distinct jan_sale::numeric), ',') as super) 
```

但它不起作用请帮助......

```
"Punjab";"03";"Gurdaspur";"0301";"Dhar Kalan";"0301001";"10.1620708"
"Punjab";"03";"Gurdaspur";"0301";"Pathankot";"0301002";"8.7883687"
"Punjab";"03";"Gurdaspur";"0301";"Gurdaspur";"0301003";"0"
"Punjab";"03";"Gurdaspur";"0301";"Batala";"0301004";"0"
"Punjab";"03";"Gurdaspur";"0301";"Dera Baba Nanak";"0301005";"5.6477731"
"Punjab";"03";"Kapurthala";"0302";"Bhulath";"0302001";"6.6241262"
"Punjab";"03";"Kapurthala";"0302";"Kapurthala";"0302002";"12.6775959"
"Punjab";"03";"Kapurthala";"0302";"Sultanpur Lodhi";"0302003";"3.1599889"
"Punjab";"03";"Kapurthala";"0302";"Phagwara";"0302004";"3.3310623,8.7898848"
"Punjab";"03";"Jalandhar";"0303";"Shahkot";"0303001";"14.2610899"
"Punjab";"03";"Jalandhar";"0303";"Nakodar";"0303002";"14.2610899" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:24:14.780

```
sum(distinct jan_sale)::numeric as super 
```

# linux - 如何在 Linux 中以 sublime text 2 构建 opencv c++ 程序

> ID：15299330
> 
> 赞同：1
> 
> 时间：2013-03-08T16:59:26.690
> 
> 标签：linux, sublimetext2, pkg-config

我正在尝试使用 sublime text 2 构建 opencv 源代码，但使用 pkg-config 链接 opencv 库似乎存在问题

我的**C++.sublime-build**

```
{
    "cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ -ggdb '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}' `pkg-config --cflags --libs opencv`"]
        }
    ]
} 
```

PS：当我尝试从终端编译我的程序时，编译成功。

```
g++ -ggdb source.cpp `pkg-config --cflags --libs opencv` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:52:51.613

我可能为时已晚，但我想你应该交换**`pkg-config --cflags --libs opencv`**和 **&& '${file_path}/${file_base_name}'**的位置，因为`pkg-config`部分用于编译，而 && '${file_path}/${file_base_name}'部分似乎是执行部分。

"cmd": ["bash", "-c", "g++ -ggdb '${file}' -o '${file_path}/${file_base_name}' `pkg-config --cflags --libs opencv`&& '${file_path}/${file_base_name}' " ]

如果您有兴趣，我在这里创建了自己的构建系统：http: [//subokita.com/2013/04/21/configuring-sublime-to-work-with-opencv-on-mac/](http://subokita.com/2013/04/21/configuring-sublime-to-work-with-opencv-on-mac/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T09:21:36.390

对我来说，实际上来自 sub_o 的命令并没有帮助，但他的输入让我更好地理解了它的工作方式。所以我想分享我的构建系统。我已经通过 Homebrew 安装了所有东西（opencv、pkg-config、...）。

```
{
    "cmd": ["bash", "-c", "g++ '$file' -o '$file_base_name' '-I/usr/local/include' `pkg-config --cflags --libs opencv`"],
    "selector": "source.c++",

    "windows":
    {
        "cmd": ["cl", "/Fo${file_path}", "/O2", "$file"]
    }
} 
```

# android - android logcat解释中的nullpointer异常

> ID：15299333
> 
> 赞同：-2
> 
> 时间：2013-03-08T16:59:35.140
> 
> 标签：android

我在我的应用程序中遇到这部分错误：

我有这个logcat：

```
03-09 00:25:49.213: D/AndroidRuntime(431): Shutting down VM
03-09 00:25:49.213: W/dalvikvm(431): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-09 00:25:49.253: E/AndroidRuntime(431): FATAL EXCEPTION: main
03-09 00:25:49.253: E/AndroidRuntime(431): java.lang.NullPointerException
03-09 00:25:49.253: E/AndroidRuntime(431):  at me.mojica.caloriewatch.Search$1.onItemClick(Search.java:231)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.widget.ListView.performItemClick(ListView.java:3513)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.os.Handler.handleCallback(Handler.java:587)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.os.Looper.loop(Looper.java:123)
03-09 00:25:49.253: E/AndroidRuntime(431):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-09 00:25:49.253: E/AndroidRuntime(431):  at java.lang.reflect.Method.invokeNative(Native Method)
03-09 00:25:49.253: E/AndroidRuntime(431):  at java.lang.reflect.Method.invoke(Method.java:507)
03-09 00:25:49.253: E/AndroidRuntime(431):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-09 00:25:49.253: E/AndroidRuntime(431):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-09 00:25:49.253: E/AndroidRuntime(431):  at dalvik.system.NativeStart.main(Native Method)
03-09 00:25:51.363: I/Process(431): Sending signal. PID: 431 SIG: 9
03-09 00:25:53.853: D/dalvikvm(441): GC_EXTERNAL_ALLOC freed 58K, 52% free 2603K/5379K, external 2000K/2137K, paused 105ms 
```

我唯一能理解的部分是：

```
03-09 00:25:49.253: E/AndroidRuntime(431):  at me.mojica.caloriewatch.Search$1.onItemClick(Search.java:231) 
```

在我的课上

```
 String data1 = food.getText().toString();
       String data2 = calories.getText().toString();
       mySQLiteAdapter1.insert1(data1, data2); <---------------- line number 231
       updateList(); 
```

在我的适配器中，我这样说

```
public long insert(String foodname, int i){
    ContentValues contentValues = new ContentValues();
    contentValues.put(KEY_FOODNAME, foodname);
    contentValues.put(KEY_CALORIES, i);
    return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);    

} 
```

我不知道错误的部分是否在我的课堂上我在字符串中声明了它然后在我的适配器中有 1 个 int 和 1 个字符串

更新：这是我班的代码：

```
package me.mojica.caloriewatch;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class Search extends Activity {

private SQLiteAdapter mySQLiteAdapter;
private FoodlogAdapter mySQLiteAdapter1;

int arlene=0;
int textlength=0;

ListView listContent1, transact;
EditText search, food, calories;
Button FSearch;
TextView result;

SimpleCursorAdapter cursorAdapter, cursorAdap;
Cursor cursor, Tcursor;
private String[] listview_array;
private ArrayList<String> array_sort= new ArrayList<String>();

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.search);
  setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

  listContent1  = (ListView)findViewById(R.id.lFoodlist1);
  //transact  = (ListView)findViewById(R.id.transact);
  search= (EditText) findViewById(R.id.eFsearch);
  food= (EditText) findViewById(R.id.editText1);
  calories= (EditText) findViewById(R.id.editText2);  
  FSearch=(Button) findViewById(R.id.bFsearch);
  result=(TextView)findViewById(R.id.textView3);

  /*
   *  Create/Open a SQLite database
   *  and fill with dummy content
   *  and close it
   */
  mySQLiteAdapter = new SQLiteAdapter(this);
  mySQLiteAdapter.openToWrite();
  mySQLiteAdapter.deleteAll();

  mySQLiteAdapter.insert("Adobong Baboy (1 bowl)", 339);
  mySQLiteAdapter.insert("Adobong Kangkong ( 1 bowl)", 84);
  mySQLiteAdapter.insert("Adobong Manok (1 bowl) ", 624);
  mySQLiteAdapter.insert("Adobong Pusit (1 bowl)", 121);
  mySQLiteAdapter.insert("Arroz Caldo (1 bowl)", 500);
  mySQLiteAdapter.insert("Chicken Afritada (1 bowl)", 323);
  mySQLiteAdapter.insert("Chicken Asado (1 bowl)", 205);
  mySQLiteAdapter.insert("Chicken Empanada (1 bowl)", 150);
  mySQLiteAdapter.insert("Chicken Tinola (1 bowl)", 267);
  mySQLiteAdapter.insert("Dinuguan (1 bowl)", 255);
  mySQLiteAdapter.insert("Fried Bangus (1 pc)", 162);
  mySQLiteAdapter.insert("Ginataang Kalabasa (1 bowl)", 225);
  mySQLiteAdapter.insert("Ginataang Langka (1 bowl)", 167);
  mySQLiteAdapter.insert("Ginataang Pinakbet (1 bowl)", 155);
  mySQLiteAdapter.insert("Igado (1 bowl)", 297);
  mySQLiteAdapter.insert("Kare Kare (1 bowl)", 129);
  mySQLiteAdapter.insert("Laing (1 bowl)", 202);
  mySQLiteAdapter.insert("Lechon Kawali (1 bowl)", 245);
  mySQLiteAdapter.insert("Pakbet (1 bowl)", 233);
  mySQLiteAdapter.insert("Paksiw na Isda (1 bowl)", 73);
  mySQLiteAdapter.insert("Paksiw na Pata (1 bowl)", 342);
  mySQLiteAdapter.insert("Pinakbet (1 bowl)", 110);
  mySQLiteAdapter.insert("Pork Afritada (1 bowl)", 402);
  mySQLiteAdapter.insert("Pork Asado (1 bowl)", 533);
  mySQLiteAdapter.insert("Pork Barbaque on Stick (1 stick)", 111);
  mySQLiteAdapter.insert("Pork Embutido (1 bowl)", 350);
  mySQLiteAdapter.insert("Pork Mechado (1 bowl)", 157);
  mySQLiteAdapter.insert("Pork Nilaga (1 bowl)", 181);
  mySQLiteAdapter.insert("Pork Pochero (1 bowl)", 798);
  mySQLiteAdapter.insert("Pork Sinigang (1 bowl)", 290);
  mySQLiteAdapter.insert("Relyenong Bangus (1 bowl)", 390);
  mySQLiteAdapter.insert("Salmon Sinigang (1 bowl)", 190);
  mySQLiteAdapter.insert("Sisig (1 bowl)", 293);
  mySQLiteAdapter.insert("Tilapia (1 pc)", 100);
  mySQLiteAdapter.insert("Tinolang Manok (1 bowl)", 843);
  mySQLiteAdapter.insert("Tortang Talong (1 pc)", 291);
  mySQLiteAdapter.insert("Balut (1 egg)", 188);
  mySQLiteAdapter.insert("Beefsteak (1 bowl)", 210);
  mySQLiteAdapter.insert("Bibingka", 100);
  mySQLiteAdapter.insert("Biko (1 slice)", 100);
  mySQLiteAdapter.insert("Buko Pie (1 slice)", 145);
  mySQLiteAdapter.insert("Cassava Cake (1 slice)", 100);
  mySQLiteAdapter.insert("Chicsilog (1 meal)", 284);
  mySQLiteAdapter.insert("Coorned Beef (1 meal)", 267);
  mySQLiteAdapter.insert("Danggit (1 pc)",98);
  mySQLiteAdapter.insert("Ice Cream", 157);
  mySQLiteAdapter.insert("Embotido", 187);
  mySQLiteAdapter.insert("Ensaymada", 410);
  mySQLiteAdapter.insert("Espasol", 50);
  mySQLiteAdapter.insert("Fishball (1 pc)", 9);
  mySQLiteAdapter.insert("Fruit Salad (1 bowl)", 211);
  mySQLiteAdapter.insert("Galapong (1 slice)", 100);
  mySQLiteAdapter.insert("Ginataan (1 bowl)", 167);
  mySQLiteAdapter.insert("Halaya", 70);
  mySQLiteAdapter.insert("Halo halo (1 cup)", 80);
  mySQLiteAdapter.insert("Hotdog (1 pc)", 183);
  mySQLiteAdapter.insert("Kutsinta", 100);
  mySQLiteAdapter.insert("Leche Flan", 228);
  mySQLiteAdapter.insert("Lomi", 222);
  mySQLiteAdapter.insert("Longganisa (1 pc)", 170);
  mySQLiteAdapter.insert("Lumpiang Shanghai (1 pc)", 169);
  mySQLiteAdapter.insert("Palabok", 305);
  mySQLiteAdapter.insert("Palitaw", 100);
  mySQLiteAdapter.insert("Pancit", 416);
  mySQLiteAdapter.insert("Pansit Palabok", 305);
  mySQLiteAdapter.insert("Pastillas (1 pc)", 76);
  mySQLiteAdapter.insert("Porksilog (1 meal)", 555);
  mySQLiteAdapter.insert("Pulvoron (1 pc)", 40);
  mySQLiteAdapter.insert("Puto (1 pc)", 112);
  mySQLiteAdapter.insert("Puto Bumbong (1 pc)", 50);
  mySQLiteAdapter.insert("Puto Pao (1 bun)", 120);
  mySQLiteAdapter.insert("Qwek qwek (1 pc)", 14);
  mySQLiteAdapter.insert("Saging na Saba", 122);
  mySQLiteAdapter.insert("Sapin sapin (1 slice)", 100);
  mySQLiteAdapter.insert("Scrambled Egg", 100);
  mySQLiteAdapter.insert("Sinangag (1 cup)", 300);
  mySQLiteAdapter.insert("Siopao", 240);
  mySQLiteAdapter.insert("Suman (1 pc )", 31);
  mySQLiteAdapter.insert("Taho (1 cup)", 180);
  mySQLiteAdapter.insert("Tapsilog (1 meal)", 364);
  mySQLiteAdapter.insert("Tikoy (1 slice)", 100);
  mySQLiteAdapter.insert("Tuyo (1 pc)", 57);
  mySQLiteAdapter.insert("Yema (1 pc)", 20);

  mySQLiteAdapter.insert("Apple", 80);
  mySQLiteAdapter.insert("Apricots", 17);
  mySQLiteAdapter.insert("Avocado", 30);
  mySQLiteAdapter.insert("Banana", 105);
  mySQLiteAdapter.insert("Blueberries", 82);
  mySQLiteAdapter.insert("Cherry", 4);
  mySQLiteAdapter.insert("Coconut", 159);
  mySQLiteAdapter.insert("Eggplant", 132);
  mySQLiteAdapter.insert("Grape Fruit", 62);
  mySQLiteAdapter.insert("Guava", 61);
  mySQLiteAdapter.insert("Kiwi Fruit", 25);
  mySQLiteAdapter.insert("Lemon", 24);
  mySQLiteAdapter.insert("Limes", 20);
  mySQLiteAdapter.insert("Lychee", 4);
  mySQLiteAdapter.insert("Mango", 107);
  mySQLiteAdapter.insert("Melon", 188);
  mySQLiteAdapter.insert("Orange", 62);
  mySQLiteAdapter.insert("Peach", 38);
  mySQLiteAdapter.insert("Pineapple (1 slice)", 42);
  mySQLiteAdapter.insert("Pomelo (per section)", 72);
  mySQLiteAdapter.insert("Rambutan", 7);
  mySQLiteAdapter.insert("Raspberries", 82);
  mySQLiteAdapter.insert("Strawberry", 8);
  mySQLiteAdapter.insert("Tomato", 15);
  mySQLiteAdapter.insert("Watermelon (per slice)", 46);

  mySQLiteAdapter.close();

  /*
   *  Open the same SQLite database
   *  and read all it's content.
   */
  mySQLiteAdapter = new SQLiteAdapter(this);
  mySQLiteAdapter.openToRead();

  Cursor cursor = mySQLiteAdapter.queueAll();
  startManagingCursor(cursor);

  String[] from = new String[]{SQLiteAdapter.KEY_FOODNAME,SQLiteAdapter.KEY_CALORIES};
  int[] to = new int[]{R.id.tv1, R.id.tv2};

  SimpleCursorAdapter cursorAdapter =
   new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

  listContent1.setAdapter(cursorAdapter);
  listContent1.setOnItemClickListener(listContentOnItemClickListener); 
  mySQLiteAdapter.close();
  }

  private ListView.OnItemClickListener listContentOnItemClickListener = new         ListView.OnItemClickListener(){
  public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
       Cursor cursor = (Cursor) parent.getItemAtPosition(position);

      String item_content1 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME));
      String item_content2 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CALORIES));
      arlene = arlene + Integer.parseInt(item_content2);
      String item = String.valueOf(" Food Name: " + item_content1 ) + "\n" +
              " Calories: " +  item_content2;

       Toast.makeText(Search.this, item, Toast.LENGTH_LONG).show();      

       food.setText(item_content1);
       calories.setText(String.valueOf(arlene));

       /*Intent myIntent = new Intent(Search.this, Foodlog.class);
       Bundle bundle = new Bundle();
       bundle.putString("SQLITEDATA1", food.getText().toString()); 
       bundle.putString("SQLITEDATA2", calories.getText().toString()); 
       myIntent.putExtras(bundle);
       startActivity(myIntent); */

       String data1 = food.getText().toString();
       String data2 = calories.getText().toString();
       mySQLiteAdapter1.insert1(data1, data2);
       updateList();

       //SavePreferences("food", food.getText().toString());
       SavePreferences("calories", calories.getText().toString());
       LoadPreferences();
  }}
  ;

protected void SavePreferences(String key, String value) {
// TODO Auto-generated method stub
SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putString(key, value);
editor.commit();
}

private void updateList() {
// TODO Auto-generated method stub
 Tcursor.requery();
}

protected void LoadPreferences() {
// TODO Auto-generated method stub
SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
String strSavedMem1 = sharedPreferences.getString("food", "");
String strSavedMem2 = sharedPreferences.getString("calories", "");

//food.setText(strSavedMem1);
calories.setText(strSavedMem2); 
}

  } 
```

至于我的适配器：

```
package me.mojica.caloriewatch;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.os.Bundle;
import android.util.Log;

public class SQLiteAdapter extends Search{

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.row);
}

public static final String APP_NAME = "AdvancedSearch";
public static final String MYDATABASE_NAME = "Food_DB";
public static final String MYDATABASE_TABLE = "Food_Table";
public static final int MYDATABASE_VERSION = 1;

public static final String KEY_ID = "_id";
public static final String KEY_FOODNAME = "FoodName";
public static final String KEY_CALORIES = "Calories";

//create table MY_DATABASE (ID integer primary key, Content text not null);

private static final String SCRIPT_CREATE_DATABASE =
        "create table " + MYDATABASE_TABLE + " ("
                + KEY_ID + " integer primary key autoincrement, "
                + KEY_FOODNAME + " text not null, " + 
                KEY_CALORIES + " integer);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){
    context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    return this;
}

public void close()
{
    sqLiteHelper.close();
}

public long insert(String foodname, int i){
    ContentValues contentValues = new ContentValues();
    contentValues.put(KEY_FOODNAME, foodname);
    contentValues.put(KEY_CALORIES, i);
    return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);    

}

public long insert1(String foodname, int i){
    ContentValues contentValues = new ContentValues();
    contentValues.put(KEY_FOODNAME, foodname);
    contentValues.put(KEY_CALORIES, i);
    return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);    

}

public int deleteAll(){
    return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public Cursor queueAll(){
    String[] columns = new String[]{KEY_ID, KEY_FOODNAME, KEY_CALORIES};
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
            null, null, null, null, null);

    return cursor;
}

 public void update_byID(int id, String v1, String v2){
      ContentValues values = new ContentValues();
      values.put(KEY_FOODNAME, v1);
      values.put(KEY_CALORIES, v2);
      sqLiteDatabase.update(MYDATABASE_TABLE, values, KEY_ID+"="+id, null);
     }

public class SQLiteHelper extends SQLiteOpenHelper {

    public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(SCRIPT_CREATE_DATABASE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

        }

public String[] qall(){
    Cursor cursor = null;
    String[] columns = new String[]{KEY_ID, KEY_FOODNAME, KEY_CALORIES};
    String[] listview_array = null;
    try{
         cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
                null, null, null, null, null);

        if(cursor!=null && cursor.getCount()>0 && cursor.moveToFirst()){
            listview_array=new String[cursor.getCount()];

            int foodName = cursor.getColumnIndex(KEY_FOODNAME );
            int keyColories = cursor.getColumnIndex(KEY_CALORIES );
            int l=0;
            boolean moveToNext = cursor.moveToFirst();
            do{
            listview_array[l]=cursor.getString(foodName) + "                              " +
                    cursor.getString(keyColories);
               l++;
            }while(cursor.moveToNext());
        }
    }catch(Exception e){
        Log.e(APP_NAME, "An error occurred while searching for "+search+": "+e.toString(), e);
    }finally{
        if(cursor!=null && !cursor.isClosed()){
            cursor.close();
        }
    }
    return listview_array;

}

public void open()
{
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
}

public void delete_byID(int item_id) {
    // TODO Auto-generated method stub
    sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_ID, null);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:01:44.393

NullPointerException 发生是因为 mySQLiteAdapter1 为空，而不是您传入的任何值。

从您发布的代码来看，mySQLiteAdapter1 似乎没有在任何地方初始化。我希望它被初始化为你的 onCreate() 的一部分。

# cassandra - 如何将设计与 Cassandra 一起使用

> ID：15299340
> 
> 赞同：2
> 
> 时间：2013-03-08T16:59:55.940
> 
> 标签：cassandra

我正在使用 Cassandra 作为数据库并想使用 Devise

Devise 是否支持 Cassandra 作为数据库？我环顾四周，但在 wiki 或其他任何地方都没有找到任何与 Devise-Cassandra 相关的信息。

是否有第三方插件支持它或其他用于身份验证的 gem？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:03:55.470

不，我从来没有听说过这样的事情。

实际上，我建议您将用户保留在更传统的数据库中，并仅将 cassandra 用于最密集的 I/O 数据。

Cassandra 不是为了替代其他数据库，也不是为了成为 ORM 的用户（实际上写在其官方网页上）

# ruby-on-rails - rails 7.days 到人类可读的字符串

> ID：15299344
> 
> 赞同：4
> 
> 时间：2013-03-08T17:00:10.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我知道这看起来微不足道，但可以说在 Ruby on Rails 中我有

```
document.expire_in = 7.days 
```

如何打印到期消息的人类可读版本？

```
"Document will expire in #{document.expire_in}"
=> Document will expire in 7 days 
```

也许可以与`I18n.t`或`I18n.l`

唯一可行的方法是

7.days.inspect => "7 天"

这是唯一的方法吗？？

我正在查看[ActiveSupport::Duration](http://api.rubyonrails.org/classes/ActiveSupport/Duration.html)并且没有看到答案

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:09:46.440

这不能回答您的具体问题，但在我看来，您最好设置它过期的日期时间，然后利用[distance_of_time_in_words](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)。

如果您总是简单地说 7 天，那么为什么不将其写为硬编码字符串呢？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:43:29.960

所以 Rails 中没有内置的解决方案。我决定和

```
7.days.inspect => "7 days" 
```

稍后，当项目将被翻译时，我将扩展`ActiveSupport::Duration`一些有意义的东西来翻译这些

但是我建议查看罗伯特对这个问题的评论。我同意在数据库中保存价值的解决方案，例如：“7 天”，然后做一些事情。像翻译单位值

```
document = Document.new
document.expire_in = "7 days"

document.translated_day 
```

在文档模型（或装饰器）中

```
class Document < ActiveRecord::Base
  #....

  def translated_day
    timeline = expire_in.split(' ')
    "#{timeline.first} #{I18n.t("timeline.${timeline.last}")}"
  end
  #..
end

#config/locales/svk.yml
svk:
  timeline:
    days: "dni" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-05T11:48:29.070

这是一个使用 i18n 解决方案的示例`ActiveSupport::Duration#parts`

```
duration.parts.map { |unit, n| I18n.t unit, count: n, scope: 'duration' }.to_sentence 
```

它可以与以下本地化一起使用：

```
en:
  duration:
    years:
      one: "%{count} year"
      other: "%{count} years"
    months:
      one: "%{count} month"
      other: "%{count} months"
    weeks:
      one: "%{count} week"
      other: "%{count} weeks"
    days:
      one: "%{count} day"
      other: "%{count} days"
    hours:
      one: "%{count} hour"
      other: "%{count} hours"
    minutes:
      one: "%{count} minute"
      other: "%{count} minutes"
    seconds:
      one: "%{count} second"
      other: "%{count} seconds" 
```

# php - 如何在 php 中从 mysql 数据库动态插入图像到 jquery 滑块中

> ID：15299349
> 
> 赞同：1
> 
> 时间：2013-03-08T17:00:23.550
> 
> 标签：php, jquery, html, mysql

我编写了一个页面，该页面以列表样式显示图像，并添加了一个 jquery 滑块。但是，我需要帮助的是 jquery 滑块将其识别为图像列表，以便滑块可以工作。任何帮助将非常感激。

下面是我的代码：

```
<div id="slideshow">
                    <ul class="slides">                 
                    <?php 
                        $target = "admin/photogallery/";
                        $getImages = mysql_query("SELECT * FROM photogallery");
                        if(!$getImages) die("Cannot execute query. " . mysql_error());

                        $target = "admin/photogallery/";
                        while($row = mysql_fetch_array($getImages)){
                        if (file_exists($target)) {
                            print '"<li><img src="http://localhost/crystalvirgins/admin/photogallery/'.$row_rsphotogallery['photo'].'" border="0" width="702" alt="'.$row_rsphotogallery['description'].'" /></li>"
                            <div class="clear_3"></div>';
                            $i++;
                        }
                    }?>
                    </ul>
                    <span class="arrow previous"></span>
                    <span class="arrow next"></span>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:32:42.667

试试这段代码

```
 <ul>
 <?php 
 $directory = "data/uploads/homegallery/";
 if (glob($directory . "*") != false)
 {
 $filecount = count(glob($directory . "*"));
 }
 else
 {
 } 
 $files_index = glob("data/uploads/"."home"."gallery/*.*");
 for ($i=0; $i<$filecount; $i++)
{
$num2 = $files_index[$i];
?>
<li><img src="<?php echo $num2;?>" width="650" height="276" alt="" /> <?</li>
}?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:14:55.867

请包括 jQuery 插件和正在使用的代码。还有生成的 HTML 源代码是什么样的。

# c# - C# 字符串拆分方法

> ID：15299352
> 
> 赞同：-1
> 
> 时间：2013-03-08T17:00:37.727
> 
> 标签：c#, string, methods, split

我正在学习一本书中的教程，并且有一小段我不明白的代码。代码如下：

```
// conv_ex.cs - Exercise 12.4
// This listing will cut the front of the string
// off when it finds a space, comma, or period.
// Letters and other characters will still cause
// bad data.
//-----------------------------------------------
using System;
using System.Text;

class myApp
{
    public static void Main()
    {
        string buff;
        int age;
        // The following sets up an array of characters used 
        // to find a break for the Split method. 
        char[] delim = new char[] { ' ', ',', '.' };
        // The following is an array of strings that will
        // be used to hold the split strings returned from
        // the split method.
        string[] nbuff = new string[4];

        Console.Write("Enter your age: ");

        buff = Console.ReadLine();

        // break string up if it is in multiple pieces.
        // Exception handling not added

        nbuff = buff.Split(delim,2); //<----- what is purpose of (delim,2) in this case?
        //nbuff = buff.Split(delim); // will give the same result
        //nbuff = buff.Split(delim,3); //will give the same result

        // Now convert....

        try
        {
            age = Convert.ToInt32(nbuff[0]);
            Console.WriteLine("age is:" + age);

            if (age < 21)
                Console.WriteLine("You are under 21.");
            else
                Console.Write("You are 21 or older.");
        }
        catch (ArgumentException e)
        {
            Console.WriteLine("No value was entered... (equal to null)");
        }
        catch (OverflowException e)
        {
            Console.WriteLine("You entered a number that is too big or too small.");
        }
        catch (FormatException e)
        {
            Console.WriteLine("You didn't enter a valid number.");
        }
        catch (Exception e)
        {
            Console.WriteLine("Something went wrong with the conversion.");
            throw (e);
        }
    }
} 
```

**我的问题是：**

**“ 2** ”的目的是什么`nbuff = buff.Split(delim,2);`？

无论如何，字符串都会分成两半，对吗？

即使没有“ **2** ”，例如`nbuff = buff.Split(delim);`结果也是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:06:13.123

它指定要返回的最大子字符串数。

**拆分（字符 []，Int32）**

`Returns a string array that contains the substrings in this instance that are delimited by elements of a specified Unicode character array. A parameter specifies the maximum number of substrings to return.`

[这里](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)`String.Split()`列出的方法有几个重载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:04:34.687

这是要返回的最大子字符串数。将其更改为`3`无效的原因是要返回的子字符串少于 3 个，因此，按照设计，它无论如何都会返回所有可用的子字符串。*例如，如果*有`5`可能返回的子字符串，那么只会`3`返回第一个。

[您可以在此处](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)阅读有关该`String.Split()`方法的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T17:05:48.737

2 表示要返回的最大字符串数。

有关完整信息，请参见[此处](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)。

该参数称为*count*。以下是相关文字：

> 如果本实例中 有多个*count子串，则在返回值的第一个**count -1个元素中返回第一个**count* -1个子串，在返回值的最后一个元素中返回本实例中剩余的字符。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T17:05:06.987

`2`in指定要返回的`buff.Split(delim,2)`最大子字符串数。例如，如果字符串有 4 个部分，由 中定义的字符分隔`delim`，那么您会注意到不同之处。如果使用`Split(delim,2)`，则只会返回 2 个子字符串。

您也可以在 MSDN 上阅读[此页面](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)。*

# java - 在运行时添加 AjaxBehavior 但未调用 AjaxBehaviorListener

> ID：15299354
> 
> 赞同：2
> 
> 时间：2013-03-08T17:00:42.570
> 
> 标签：java, ajax, jsf

我正在尝试`<h:inputText>`在运行时在组件中添加一些 ajax 行为。我花了一天时间弄清楚下一个代码出了什么问题，但没有成功。

调用该`initUIComponent`方法后，组件确实触发了ajax请求，也返回了正常的ajax响应。然而，AjaxBehaviorListener 永远不会被调用。我错过了什么？我使用 glassfish 3.1.2.2 和默认的 mojarra 实现。

```
public void initUIComponent(HtmlInputText c) {
    FacesContext fc = FacesContext.getCurrentInstance();

    AjaxBehavior ajaxBeh = (AjaxBehavior) fc.getApplication() .createBehavior(AjaxBehavior.BEHAVIOR_ID);
    ajaxBeh.setRender(Collections.singletonList("elId1"));
    ajaxBeh.setExecute(Collections.singletonList("@this"));
    ajaxBeh.addAjaxBehaviorListener(new AjaxBehaviorListener() {
        @Override
        public void processAjaxBehavior(AjaxBehaviorEvent e)
                throws AbortProcessingException {
            System.out.println("Something is happening!");

        }
    });
    c.addClientBehavior("keyup", ajaxBeh);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:12:09.867

最后，这似乎是一个 Mojarra 错误。该代码可与 MyFaces 顺利配合使用。[这](http://java.net/jira/browse/JAVASERVERFACES-2674)是相关的 Jira 问题 (JAVASERVERFACES-2674)。

# python - 在python中打印格式化字符串和函数调用

> ID：15299355
> 
> 赞同：0
> 
> 时间：2013-03-08T17:00:44.863
> 
> 标签：python, function, printing

我有一个函数，displayHand()，它看起来像这样：

```
def displayHand(hand):
    """
    Displays the letters currently in the hand.

    For example:
    >>> displayHand({'a':1, 'x':2, 'l':3, 'e':1})
    Should print out something like:
       a x x l l l e
    The order of the letters is unimportant.

    hand: dictionary (string -> int)
    """
    for letter in hand.keys():
        for j in range(hand[letter]):
             print letter,              # print all on the same line
    print                              # print an empty line 
```

它是为我提供的（来自 600x 类）。如上所述，它需要一个 string->ints 的字典并打印出“手”。

我遇到的麻烦是让它正确显示。当我尝试

```
print('Current Hand: ', displayHand(hand)) 
```

这就是我得到的：

```
a d d m o q y 
('Current Hand: ', None) 
```

由于这是由讲师提供的，因此我确信代码以这种方式编写是有原因的，并且有些东西我没有得到。

我想要得到的是这样的输出：

```
Current Hand: a d d m o q y 
```

我对这些东西完全陌生，所以我什至不知道要问什么问题。

我的评估：据我所知， displayHand() 没有返回任何东西，这就是把它搞砸的原因。但是我如何捕捉这个函数的打印输出并以我想要的方式呈现呢？我在想我应该尝试在一个字符串中捕获它并返回它，但假设

讲师正在尝试演示某些内容，我将如何在不更改 displayHand() 方法的情况下做到这一点？

如果我的评估不合格，会发生什么？

编辑：这个功能是班级给我的，我必须照样使用它。我知道将其更改为返回 str 会容易得多，但是如果不这样做，我怎么能完成正确的输出呢？

进一步编辑：我正在处理一个要求输出完全符合我所写的自动评分器。抱歉这么挑剔，我很感激答案，如果不是为了这个，我会使用它们。

最终编辑：感谢您的澄清——我将使用您的想法并在此函数中创建一个辅助函数来完成我需要它做的事情！

最终的最终编辑：我想通了！我所要做的就是，

```
print('Current Hand:'),
displayHand(hand) 
```

对于真正的最终编辑：

```
Hah! you got it too! thank you so much for the help, I appreciate it! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:02:31.270

您的函数已经打印，它不会返回任何内容。

不要试图“捕捉”打印的输出，只需更改函数以返回手，格式化为字符串：

```
def displayHand(hand):
    letters = []
    for letter, count in hand.iteritems():
        letters.extend([letter] * count)
    return ' '.join(letters) 
```

这使：

```
>>> hand = {'a': 1, 'q': 1, 'd': 2, 'y': 1, 'm': 1, 'o': 1}
>>> displayHand(hand)
'a q d d y m o'
>>> print 'Current Hand:', displayHand(hand)
Current Hand: a q d d y m o 
```

如果您不应该更改`displayHand()`函数，则在函数中使用相同的技巧，并且不要通过在 print 语句的末尾添加逗号来打印换行符：

```
print 'Current Hand:',
displayHand(hand) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:02:55.593

如果您必须使用提供的功能并且不得尝试修复它，则可以这样做：

```
print('Current Hand: ', end='')
displayHand(hand) 
```

我很困惑，你使用python 2还是3？

在python 2中：

```
print 'Current Hand" ',
displayHand(hand) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:04:40.047

首先，您的`displayHand`函数不返回任何内容，因此当您尝试打印其结果时，您会得到`None`. 您可能需要`print`从函数中删除这些语句并返回字符串。

其次，当您似乎正在使用 python 2 时，您尝试将`print`其用作 python 3 中可能的函数。如果是这种情况，您需要删除`print`语句参数周围的括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T18:27:38.857

如果您确实无法修改该函数，那么您可能希望在调用该函数之前将标准输出重定向到一个字符串，然后再将其设置为正常。

这篇文章解释了如何做到这一点：[我可以将 python 中的标准输出重定向到某种字符串缓冲区吗？](https://stackoverflow.com/questions/1218933/can-i-redirect-the-stdout-in-python-into-some-sort-of-string-buffer)

# mootools - MooTools 在 1.2.4.4 中构建哈希

> ID：15299359
> 
> 赞同：0
> 
> 时间：2013-03-08T17:00:52.313
> 
> 标签：mootools, mootools1.2, mootools-more

我们正在尝试将 MooTools 安装从 1.2.4 升级到 1.2.6。最初的开发人员包含了一个带有可选插件的“更多”文件，但由于它是压缩的，我们无法分辨该文件中包含什么。我宁愿不寻找和挑选代码。

我注意到压缩的更多文件在标头中有一个构建哈希（6f6057dc645fdb7547689183b2311063bd653ddf）。[位于此处](http://mootools.net/more)的 1.4 构建器将让您只需将该哈希附加到 url 并创建一个构建。似乎[1.2 版本](http://mootools.net/more125)不支持该功能。

有没有一种简单的方法可以从哈希或压缩文件中确定此 1.2 版本中包含哪些插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:52:24.787

AFAIK 无法直接从构建哈希中获取插件列表。但如果您有权访问 UNIX shell，请将以下 shell 脚本另存为`find_plugins.sh`：

```
#!/bin/sh

for PLUGIN in \
    More Lang Log Class.Refactor Class.Binds Class.Occlude Chain.Wait \
    Array.Extras Date Date.Extras Hash.Extras String.Extras \
    String.QueryString URI URI.Relative Element.Forms Elements.From \
    Element.Delegation Element.Measure Element.Pin Element.Position \
    Element.Shortcuts Form.Request Form.Request.Append Form.Validator \
    Form.Validator.Inline Form.Validator.Extras OverText Fx.Elements \
    Fx.Accordion Fx.Move Fx.Reveal Fx.Scroll Fx.Slide Fx.SmoothScroll \
    Fx.Sort Drag Drag.Move Slider Sortables Request.JSONP Request.Queue \
    Request.Periodical Assets Color Group Hash.Cookie IframeShim HtmlTable \
    HtmlTable.Zebra HtmlTable.Sort HtmlTable.Select Keyboard Keyboard.Extras \
    Mask Scroller Tips Spinner Date.English.US Form.Validator.English \
    Date.Catalan Date.Czech Date.Danish Date.Dutch Date.English.GB \
    Date.Estonian Date.German Date.German.CH Date.French Date.Italian \
    Date.Norwegian Date.Polish Date.Portuguese.BR Date.Russian Date.Spanish \
    Date.Swedish Date.Ukrainian Form.Validator.Arabic Form.Validator.Catalan \
    Form.Validator.Czech Form.Validator.Chinese Form.Validator.Dutch \
    Form.Validator.Estonian Form.Validator.German Form.Validator.German.CH \
    Form.Validator.French Form.Validator.Italian Form.Validator.Norwegian \
    Form.Validator.Polish Form.Validator.Portuguese \
    Form.Validator.Portuguese.BR Form.Validator.Russian \
    Form.Validator.Spanish Form.Validator.Swedish Form.Validator.Ukrainian
do
    grep -q -F $PLUGIN $1 && echo $PLUGIN
done 
```

然后像这样运行它，将 MooTools More 文件的文件名作为第一个参数传递：

```
sh find_plugins.sh mootools-more.js 
```

它将打印出在 JS 代码中找到的所有插件名称的列表。那应该让你开始。

# rally - Rally - 将父项目的迭代分配给导入的子项目

> ID：15299363
> 
> 赞同：1
> 
> 时间：2013-03-08T17:01:01.610
> 
> 标签：rally

搜索此关键字集的答案，但没有看到任何内容。我的 Rally 实施大师中有一个主项目，其中包含一些子项目：

## 原样：

1.  主项目 1（主迭代 1）
    1.  子项目 A（主迭代计划 1）
    2.  子项目 B（主迭代计划 1）
2.  主项目 2（主迭代计划 2）

现在请求将主项目 2 作为子项目移动到主项目 1 下，并要求 MP 2 使用主迭代计划 1 而不是主迭代计划 2。

## 成为：

1.  主项目 1（主迭代 1）
    1.  子项目 A（主迭代 1）
    2.  子项目 B（主迭代 1）
    3.  子项目 C -（主项目 2）（当前主迭代计划 2，希望共享主迭代计划 1）

我的问题：

1.  如何将子项目 C 的迭代从迭代 1 更改为迭代 2？
2.  更改迭代对子项目 C（前主项目 2）故事有什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:14:45.600

回答问题 1 - 您需要更新子项目 C 中的当前迭代，以匹配您已经在主项目 1 中创建的迭代的设置。这将确保所有数据正确汇总。展望未来，当您创建新的迭代时，您可以使用“在所有子项目中创建匹配的迭代”复选框来创建迭代一直到层次结构。

回答您的第二个问题 - 您当前安排的所有数据都将在那里，但是鉴于日期很可能已更改，对子项目 C 中的原始迭代进行更改可能会影响您的项目燃尽。我建议您按原样完成当前的迭代。当他们竞争时，您可以完全创建一个新的迭代，该迭代将被填充到整个项目层次结构中。

# jquery - 在有机标签上添加和编辑标签

> ID：15299372
> 
> 赞同：0
> 
> 时间：2013-03-08T17:01:37.333
> 
> 标签：jquery, tabs

我目前正在尝试使用有机标签（[http://css-tricks.com/organic-tabs/](http://css-tricks.com/organic-tabs/)）创建时间表，但在更改标签名称和添加标签时遇到困难。这是我在 CSS 中所做的更改：

```
#example-one li.nav-one a.current, ul.Monday li a:hover { background-color: #0575f4; color: white; }
#example-one li.nav-two a.current, ul.Tuesday li a:hover { background-color: #d30000; color: white; }
#example-one li.nav-three a.current, ul.jquerytuts li a:hover { background-color: #8d01b0; color: white; }
#example-one li.nav-four a.current, ul.thursday li a:hover { background-color: #FE4902; color: white; }
#example-one li.nav-five a.current, ul.friday li a:hover { background-color: #33CC33; color: white; }
#example-one li.nav-six a.current, ul.saturday li a:hover { background-color: #FF19FF; color: white; }
#example-one li.nav-seven a.current, ul.sunday li a:hover { background-color: #FFFF00; color: white; } 
```

这是我在 HTML 中所做的更改：

```
 <div id="example-one">

<ul class="nav">
            <li class="nav-one"><a href="#Monday" class="current">Monday</a></li>
            <li class="nav-one"><a href="#Tuesday">Tuesday</a></li>
            <li class="nav-one"><a href="#Wednesday">Wednesday</a></li>
            <li class="nav-one"><a href="#classics">Thursday</a></li>
            <li class="nav-one"><a href="#jquerytuts">Friday</a></li>
            <li class="nav-one"><a href="#jquerytuts">Saturday</a></li>
            <li class="nav-one last"><a href="#jquerytuts">Sunday</a></li>
</ul>

<div class="list-wrap">

    <ul id="Monday">
        <li><a href="#test">Some Stuff</a></li>
     </ul>

</div> <!-- END List Wrap --> 
```

Java 与提供的网站上的相同。如果我不将它们更改为“星期一”，那么它会起作用，但如果我更改它们，就像我想要的那样，悬停工作，只是不会更改为不同的列表。

有任何想法吗？我在想它可能是 Javascript，因为我不知道如何正确使用 Javascript...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T20:12:43.740

[这](http://jsfiddle.net/r6My9/3/)是一个关于 jsfiddle 的示例，底部有你的 CSS。

我已经更改标签名称（第一个）并添加标签（最后一个）。

```
<div id="example-one">

        <ul class="nav">
            <li class="nav-one"><a href="#featured" class="current">Rename Featured</a></li> <!-- rename -->
            <li class="nav-two"><a href="#core">Core</a></li>
            <li class="nav-three"><a href="#jquerytuts">jQuery</a></li>
            <li class="nav-four "><a href="#classics">Classics</a></li>
            <li class="nav-five last"><a href="#jquerytuts">Adding tab</a></li><!-- add -->
        </ul>
        [...] 
```

那是你想要的吗？

# c++ - 尝试使用 GetObject() 获取默认背景颜色；

> ID：15299377
> 
> 赞同：0
> 
> 时间：2013-03-08T17:01:44.703
> 
> 标签：c++, winapi, user-interface

我正在尝试`COLORREF`使用以下代码以格式获取默认的 Windows 系统背景颜色：

```
 LOGBRUSH lb;
 GetObject((HANDLE)(COLOR_BACKGROUND), sizeof(LOGBRUSH), &lb);
 BG_COLOR = lb.lbColor;
 char buff[250];
 sprintf(buff, "BG_COLOR: 0x%08X;", BG_COLOR);
 MessageBoxA(0, buff, "Alert!", MB_OK | MB_SYSTEMMODAL); 
```

但它在设置 Window 的类时返回**红色**`0x003E28F4`，如下所示：**`hbrBackground``(HBRUSH)COLOR_BACKGROUND`**

 **```
WndClass.hbrBackground = (HBRUSH)COLOR_BACKGROUND; 
```

窗口的背景颜色显示为**灰色**（在 WinXP 上），带有十六进制`0x00C8D0D4`（用 gimp 检查）。

据我所知，`0x003E28F4`和`0x00C8D0D4`不一样

这是什么原因造成的？如何获得 RGB/COLORREF 格式的默认背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:10:20.473

你不应该使用`GetSysColor(COLOR_BACKGROUND)`

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724371(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724371(v=vs.85).aspx)**

# ruby-on-rails - 我可以在我的 Rails 视图中使用 id 以外的东西和 link_to 吗？

> ID：15299378
> 
> 赞同：1
> 
> 时间：2013-03-08T17:01:45.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, link-to

在您的视图中创建链接的*rails 方法*是使用`link_to`. 传递一个对象将链接到该对象的`id`. 如何使用我的对象`match_id`而不是`id`with `link_to`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:19:13.600

您可以覆盖`to_param`模型中的方法以返回`match_id`to have的值，`link_to`并且其他 rails 助手在生成 url 时会自动使用该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:14:47.523

如果您只是使用`link_to(@object)`我不相信您可以指定默认对象 ID 以外的其他内容。但是，如果您将实际路径助手用于您想要的路线，您可以指定 id`object_path(@object.match_id)`

# c# - 迷失在验证设计中

> ID：15299386
> 
> 赞同：0
> 
> 时间：2013-03-08T17:01:56.893
> 
> 标签：c#, jquery

我需要一些想法...我有一个 SQL 表，其中包含错误代码和消息，我将根据代码列在 Web 应用程序中显示这些消息以进行验证。

如果通过使用服务器端进行检查，我可以通过匹配我输入的错误代码来加载符合条件的消息，并显示在菜单上。但是每次需要进行回发以显示错误代码和消息时，通过使用更新面板，我可以进行部分回发，但我仍然无法按照我的意愿设置样式。

如果我使用客户端脚本来检查。我可以根据需要设置样式，但我需要在每个页面加载时加载错误代码和消息，并将其 1 逐 1 切割，javascript 处理并基于代码，显示错误消息，我认为这不是一个好主意，有没有更好的想法来实现这一目标？由于我的知识有限，我有点卡住了，任何想法都会很棒，谢谢

# ios - 如何连接 TextView.text

> ID：15299387
> 
> 赞同：0
> 
> 时间：2013-03-08T17:01:59.923
> 
> 标签：ios, objective-c

我有两个 UITextViews：

```
self.itemsTextView.text;
self.priceTextView.text; 
```

我想像这样连接这两个：

> NSString *data = self.textView.text + self.itemsTextView.text;

我试过使用冒号，正如[这个线程所建议的那样](https://stackoverflow.com/questions/510269/how-do-i-concatenate-strings)，但它不起作用。

```
NSString *data = [self.textView.text : self.itemsTextView.text]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:03:03.587

对于连接，您有几个选项：

使用`stringWithFormat:`

```
NSString *dataString =[NSString stringWithFormat:@"%@%@",self.textView.text, self.itemsTextView.text]; 
```

使用`stringByAppendingString:`

NSMutableString 有`appendString:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:03:39.337

您可以使用

```
NSString * data = [NSString stringWithFormat:@"%@%@",self.textView.text,self.itemsTextView.text]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:09:22.683

有很多方法可以做到这一点。除了`stringWithFormat:`您可以做的其他答案的方法（其他字符串在哪里`a`）`b`：

```
NSString *c = [a stringByAppendingString:b]; 
```

或者

```
NSMutableString *c = [a mutableCopy];
[c appendString b]; 
```

# jquery - 使用 jQuery 在不同的 HTML 元素上触发方法

> ID：15299390
> 
> 赞同：0
> 
> 时间：2013-03-08T17:02:01.890
> 
> 标签：jquery, css, button, triggers, sprite

我正在编写一个 JavaScript 行为，它将自动创建一个 CSS 精灵按钮​​，不需要任何自定义 CSS。我的第一个问题是：以前做过吗？这似乎是一个显而易见的想法，但我没有找到任何东西，或者我在寻找错误的地方。

当用户按下按钮本身时，我可以让脚本工作。我没有做的是在用户单击另一个按钮时设置一个按钮的状态。（对于单选按钮，这很重要:)

我已经[上传了一个页面，显示了我到目前为止的进度](http://dev.lexogram.com/tests/trigger/)。

我使用... $(image).on("setFrame", this.setFrame); ...向图像添加 setFrame 方法，然后创建一个插件来触发该方法：

```
 (function($){
      /* A plugin to trigger a setFrame() method on a different
       * element than the one that was clicked.
       */
      $.fn.setImageFrame = function(frame) {        
        return this.each(function() {
          console.log(this);
          // Q. Nothing happens on the next line. Why not?
          $(this).trigger('setFrame', frame);
        });
      };
    })( jQuery ); 
```

对 .trigger() 的调用什么也不做。

对于加分，如何测试是否在图像上设置了 setFrame 方法？我见过不同的解决方案，但我测试过的都没有给我一个积极的结果。

编辑：问题是 setFrame 方法附加到 img 元素，并且调用 t trigger() 被发送到其父 div 元素。

# nginx - Nginx+phpFPM 重写规则不起作用

> ID：15299391
> 
> 赞同：1
> 
> 时间：2013-03-08T17:02:04.567
> 
> 标签：nginx, url-rewriting, php

我安装了 Nginx+phpFPM 的 FreeBSD 9.1 VPS。phpBB论坛的url重写规则的问题。试图插入一些配置但没有工作。原始 .htaccess：

```
# REMEBER YOU ONLY NEED TO STARD MOD REWRITE ONCE
RewriteEngine On
# Uncomment the statement below if you want to make use of
# HTTP authentication and it does not already work.
# This could be required if you are for example using PHP via Apache CGI.
# RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
# REWRITE BASE
RewriteBase /
# HERE IS A GOOD PLACE TO FORCE CANONICAL DOMAIN
# RewriteCond %{HTTP_HOST} !^localhost/forum$ [NC]
# RewriteRule ^(.*)$ http://localhost/forum/$1 [QSA,L,R=301]

# DO NOT GO FURTHER IF THE REQUESTED FILE / DIR DOES EXISTS
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule . - [L]
#####################################################
# PHPBB SEO REWRITE RULES ALL MODES
#####################################################
# AUTHOR : dcz www.phpbb-seo.com
# STARTED : 01/2006
#################################
# FORUMS PAGES
###############
# FORUM INDEX REWRITERULE WOULD STAND HERE IF USED. "forum" REQUIRES TO BE SET AS FORUM INDEX
# RewriteRule ^forum\.html$ /index.php [QSA,L,NC]
# FORUM ALL MODES
RewriteRule ^(forum|[a-z0-9_-]*-f)([0-9]+)(-([0-9]+))?\.html$ /viewforum.php?f=$2&start=$4 [QSA,L,NC]
# TOPIC WITH VIRTUAL FOLDER ALL MODES
RewriteRule ^(forum|[a-z0-9_-]*-f)([0-9]+)/(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?f=$2&t=$4&start=$6 [QSA,L,NC]
# TOPIC WITHOUT FORUM ID & DELIM ALL MODES
RewriteRule ^([a-z0-9_-]*)/?(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?forum_uri=$1&t=$3&start=$5 [QSA,L,NC]
# PHPBB FILES ALL MODES
RewriteRule ^resources/[a-z0-9_-]+/(thumb/)?([0-9]+)$ /download/file.php?id=$2&t=$1 [QSA,L,NC]
# PROFILES THROUGH USERNAME
RewriteRule ^member/([^/]+)/?$ /memberlist.php?mode=viewprofile&un=$1 [QSA,L,NC]
# USER MESSAGES THROUGH USERNAME
RewriteRule ^member/([^/]+)/(topics|posts)/?(page([0-9]+)\.html)?$ /search.php?author=$1&sr=$2&start=$4 [QSA,L,NC]
# GROUPS ALL MODES
RewriteRule ^(group|[a-z0-9_-]*-g)([0-9]+)(-([0-9]+))?\.html$ /memberlist.php?mode=group&g=$2&start=$4 [QSA,L,NC]
# POST
RewriteRule ^post([0-9]+)\.html$ /viewtopic.php?p=$1 [QSA,L,NC]
# ACTIVE TOPICS
RewriteRule ^active-topics(-([0-9]+))?\.html$ /search.php?search_id=active_topics&start=$2&sr=topics [QSA,L,NC]
# UNANSWERED TOPICS
RewriteRule ^unanswered(-([0-9]+))?\.html$ /search.php?search_id=unanswered&start=$2&sr=topics [QSA,L,NC]
# NEW POSTS
RewriteRule ^newposts(-([0-9]+))?\.html$ /search.php?search_id=newposts&start=$2&sr=topics [QSA,L,NC]
# UNREAD POSTS
RewriteRule ^unreadposts(-([0-9]+))?\.html$ /search.php?search_id=unreadposts&start=$2 [QSA,L,NC]
# THE TEAM
RewriteRule ^the-team\.html$ /memberlist.php?mode=leaders [QSA,L,NC]
# HERE IS A GOOD PLACE TO ADD OTHER PHPBB RELATED REWRITERULES

# FORUM WITHOUT ID & DELIM ALL MODES
# THESE FOUR LINES MUST BE LOCATED AT THE END OF YOUR HTACCESS TO WORK PROPERLY
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z0-9_-]+)(-([0-9]+))\.html$ /viewforum.php?forum_uri=$1&start=$3 [QSA,L,NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z0-9_-]+)\.html$ /viewforum.php?forum_uri=$1 [QSA,L,NC]
# FIX RELATIVE PATHS : FILES
RewriteRule ^.+/(style\.php|ucp\.php|mcp\.php|faq\.php|download/file.php)$ /$1 [QSA,L,NC,R=301]
# FIX RELATIVE PATHS : IMAGES
RewriteRule ^.+/(styles/.*|images/.*)/$ /$1 [QSA,L,NC,R=301]
# END PHPBB PAGES
##################################################### 
```

在 nginx 中创建的示例配置：

```
server {
        listen 80;
        server_name www.domain.com;
        rewrite ^ http://domain.com$request_uri?;
error_log /var/log/www/domain.com/nerror.log;
}
server {
        listen 80;
        server_name domain.com;
        server_name_in_redirect off;
        root /usr/local/www/domain.com;
        index index.php index.html index.htm;
        location ~* ^.+\.(ico|js|gif|jpg|jpeg|png|bmp)$ {
          expires 30d;
        }

         location / {
        try_files $uri $uri/ /index.php;
        rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)(-([0-9]+))?\.html$ /viewforum.php?f=$2&start=$4 last;
        rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)/(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?f=$2&t=$4&start=$6 last;
        rewrite ^/post([0-9]+)\.html$ /viewtopic.php?p=$1 last;
        rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)/(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?f=$2&t=$4&start=$6 last;
        rewrite ^/([a-z0-9_-]*)/?(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?forum_uri=$1&t=$3&start=$5 last;
        rewrite ^/resources/[a-z0-9_-]+/(thumb/)?([0-9]+)$ /download/file.php?id=$2&t=$1 last;
        rewrite ^/post([0-9]+)\.html$ /viewtopic.php?p=$1 last;
        rewrite ^/active-topics(-([0-9]+))?\.html$ /search.php?search_id=active_topics&start=$2&sr=topics last;
        rewrite ^/unanswered(-([0-9]+))?\.html$ /search.php?search_id=unanswered&start=$2&sr=topics last;
        rewrite ^/newposts(-([0-9]+))?\.html$ /search.php?search_id=newposts&start=$2&sr=topics last;
        rewrite ^/unreadposts(-([0-9]+))?\.html$ /search.php?search_id=unreadposts&start=$2 last;
        }
           location ~ /(config\.php|common\.php|cache|files|images/avatars/upload|includes|store) {
        deny all;
        return 403;
    }

        location ~ \.php$ {
                    # fastcgi_split_path_info ^(.+\.php)(.*)$;
                    fastcgi_pass   unix:/tmp/php-fpm.sock;
                fastcgi_param  DOCUMENT_ROOT    $document_root;
                fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_script_name;

  include fastcgi_params;
  fastcgi_param  QUERY_STRING     $query_string;
  fastcgi_param  REQUEST_METHOD   $request_method;
  fastcgi_param  CONTENT_TYPE     $content_type;
  fastcgi_param  CONTENT_LENGTH   $content_length;
  fastcgi_intercept_errors        on;
  fastcgi_ignore_client_abort     off;
  fastcgi_connect_timeout 60;
  fastcgi_send_timeout 180;
  fastcgi_read_timeout 180;
  fastcgi_buffer_size 128k;
  fastcgi_buffers 4 256k;
  fastcgi_busy_buffers_size 256k;
  fastcgi_temp_file_write_size 256k;

        }
        location ~ /\.ht {
            deny all;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:03:50.200

问题是您`try_files $uri $uri/ /index.php;`在所有重写规则之前使用。如果`try_files`成功，它将停在那里。

要解决此问题，您有几个选择。

1）按照以下格式将所有重写分解为位置块：

```
location ~* /(forum|[a-z0-9_-]*-f)([0-9]+)(-([0-9]+))?\.html$ {
    rewrite ^ /viewforum.php?f=$2&start=$4 last;
} 
```

或 2）`@rewrite`像这样添加一个块：

```
location / {
    try_files $uri @rewrite;
}

location @rewrite {
    rewrite ^/$ /index.php last;
    rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)(-([0-9]+))?\.html$ /viewforum.php?f=$2&start=$4 last;
    rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)/(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?f=$2&t=$4&start=$6 last;
    rewrite ^/post([0-9]+)\.html$ /viewtopic.php?p=$1 last;
    rewrite ^/(forum|[a-z0-9_-]*-f)([0-9]+)/(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?f=$2&t=$4&start=$6 last;
    rewrite ^/([a-z0-9_-]*)/?(topic|[a-z0-9_-]*-t)([0-9]+)(-([0-9]+))?\.html$ /viewtopic.php?forum_uri=$1&t=$3&start=$5 last;
    rewrite ^/resources/[a-z0-9_-]+/(thumb/)?([0-9]+)$ /download/file.php?id=$2&t=$1 last;
    rewrite ^/post([0-9]+)\.html$ /viewtopic.php?p=$1 last;
    rewrite ^/active-topics(-([0-9]+))?\.html$ /search.php?search_id=active_topics&start=$2&sr=topics last;
    rewrite ^/unanswered(-([0-9]+))?\.html$ /search.php?search_id=unanswered&start=$2&sr=topics last;
    rewrite ^/newposts(-([0-9]+))?\.html$ /search.php?search_id=newposts&start=$2&sr=topics last;
    rewrite ^/unreadposts(-([0-9]+))?\.html$ /search.php?search_id=unreadposts&start=$2 last;
} 
```

注意：我没有对此进行测试，因此它可能不是完美的或最好的，但您应该可以从这里对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T03:04:00.547

您需要编写 nginx conf 文件，以便它的行为类似于 apache htaccess 多视图。

对于 phpbb seo，您需要在 conf 文件的底部添加此位置声明：

```
#added the ability to do multiviews for subforums
    location ~ ^(.+)/$ {
    try_files $uri $1.html?$args;
} 
```

这应该允许您拥有搜索引擎优化的论坛链接。

希望这可以帮助您入门。

# ios - ponydebugger 安装时出错

> ID：15299392
> 
> 赞同：0
> 
> 时间：2013-03-08T17:02:14.817
> 
> 标签：ios, ponydebugger

命令后我收到一些错误消息：

```
 curl -sk https://cloud.github.com/downloads/square/PonyDebugger/bootstrap-ponyd.py | \
  python - --ponyd-symlink=/usr/local/bin/ponyd ~/Library/PonyDebugger 
```

这是我的终端告诉我，

```
Overwriting /Users/hokila/Library/PonyDebugger/lib/python2.7/orig-prefix.txt with new content
New python executable in /Users/hokila/Library/PonyDebugger/bin/python
Traceback (most recent call last):
  File "<stdin>", line 2462, in <module>
  File "<stdin>", line 944, in main
  File "<stdin>", line 1045, in create_environment
  File "<stdin>", line 1361, in install_python
  File "<stdin>", line 435, in copyfile
  File "<stdin>", line 412, in copyfileordir
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py", line 128, in copy2
    copyfile(src, dst)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py", line 83, in copyfile
    with open(dst, 'wb') as fdst:
IOError: [Errno 2] No such file or directory: '/Users/hokila/Library/PonyDebugger/.Python' 
```

似乎是python版本错误，所以我将我的python更新到2.7.3。然后我仍然遇到同样的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:40:26.003

这个问题也发生在我身上，我几乎绝望了。我重新安装了 Python 2.7.2，它运行良好。在使用 README_ponyd.rst 中的说明之前，我尝试手动解决此问题，并且我也部分成功：

> 开发安装``````````````````````
> 
> 如果您已经签出 PonyDebugger git repo，您​​可以手动设置 virtualenv 并将您的 ponyd 安装指向您现有的签出。为了演示，我们假设`$VENV`设置为您的预期安装路径并`$PONYDEBUGGER_PATH`设置为您的 PonyDebugger git checkout::
> 
> # 如果你还没有安装 virtualenv
> sudo easy_install virtualenv

虚拟环境“$VENV”

源“$VENV/bin/激活”

pip install -e "$PONYDEBUGGER_PATH"

> # 确保你的 shell 知道 ponyd 存在 hash -r
> 
> 要运行这个小马，您可以通过激活您的环境`source "$VENV/bin/activate"`并将`ponyd`其添加到您的路径中。您也可以直接调用它，`$VENV/bin/ponyd`而无需先激活。

您应该先安装[virtualenv](http://www.virtualenv.org/en/latest/)。您可以尝试将这两个步骤结合起来。希望能帮助到你...

# hibernate - org.hibernate.LazyInitializationException：无法初始化代理

> ID：15299396
> 
> 赞同：0
> 
> 时间：2013-03-08T17:02:22.807
> 
> 标签：hibernate, jsp, open-session-in-view

`org.hibernate.LazyInitializationException: could not initialize proxy - no Session`晚上好，当我尝试从会话中的 ibject 获取属性时，我有一个异常称为它上升，这是我从会话属性获取参数的 JSP stmts：

```
 <c:forEach items="${product_list}" var="car">
                <tr>
                    <td><INPUT type="checkbox" name="chk_group"
                        value="${car.carId}" /></td>
                    <td><c:out value="${car.carId}" /></td>
                    <td><c:out value="${car.model.modelName}" /></td>
                    <td><c:out value="${car.model.modelId}" /></td>
                    <td><c:out value="${car.carDesc}" /></td>
                    <td><c:out value="${car.quantity}" /></td>
                    <td><c:out value="${car.price}" /></td>
                    <td><c:out value="${car.enginCc}" /></td>
                    <td><c:out value="${car.trans}" /></td>
                    <td><c:out value="${car.noOfCylinder}" /></td>
                    <td><c:out value="${car.topSpeed}" /></td>
                    <td><c:out value="${car.fuelType}" /></td>
                    <td><c:out value="${car.fuelCapacity}" /></td>
                    <td><img src="pics/12234674066d64TK.jpg" class="Edit"
                        onclick="updateCar('product_table')"></td>

                </tr>
            </c:forEach>

<c:forEach items="${Search_Results}" var="search_result">

            <tr>
                <td><INPUT type="checkbox" name="chk_group"
                    value="${search_result.carId}" /></td>

                <td><c:out value="${search_result.carId}" /></td>
                <td><c:out value="${search_result.model.modelName}" /></td>
                <td><c:out value="${search_result.model.modelId}" /></td>
                <td><c:out value="${search_result.carDesc}" /></td>
                <td><c:out value="${search_result.quantity}" /></td>
                <td><c:out value="${search_result.price}" /></td>
                <td><c:out value="${search_result.enginCc}" /></td>
                <td><c:out value="${search_result.trans}" /></td>
                <td><c:out value="${search_result.noOfCylinder}" /></td>
                <td><c:out value="${search_result.topSpeed}" /></td>
                <td><c:out value="${search_result.fuelType}" /></td>
                <td><c:out value="${search_result.fuelCapacity}" /></td>
                <td><img src="pics/12234674066d64TK.jpg" class="Edit"
                    onclick="updateCar('Search_Table')"></td>

            </tr>
        </c:forEach> 
```

注意：只有当我在 JSP 中添加第二个 for 循环时才会引发这些异常，如果没有第二个 for 循环，一切都很清楚！请我想知道这些 foo 循环做了什么以及如何克服它

# c# - Windows 应用程序图形设计注意事项

> ID：15299400
> 
> 赞同：1
> 
> 时间：2013-03-08T17:02:41.397
> 
> 标签：c#, .net, wpf

我正在尝试在 C#/wpf 中编写一个类似于应用程序的绘图来生成管道和节点网络。需要的功能之一是在用户单击节点或将鼠标悬停在节点上时更改节点的颜色（2 种单独的突出显示颜色）。

目前，我的图形代码结构如下：

我有一个全局节点列表`Node.list`和一个循环遍历列表并读取每个节点的坐标并在该值处放置一个椭圆的绘制事件。（有一个嵌入式 Winform 面板用作绘图表面，因此不渲染绘制事件）单击不存在点的绘图表面已经添加了一个新节点`Node.list`，然后触发绘制事件。在它存在的地方单击它会弹出一个菜单，可以在其中调整坐标和其他属性。它还将`isHighlighted`bool 属性设置为 true，其中绘制事件的逻辑捕获并以不同颜色绘制点。这是绘画事件代码：

```
Node nodes = new Node();                                  
        for (int q = 0; q < Node.list.Count; q += 1)
        {
            nodes = Node.list[q];
            if(Node.list[q].redHL) //Clicked
            {
                g.FillEllipse(black, Convert.ToInt32(nodes.xCord) - 8, Convert.ToInt32(nodes.yCord) - 8, 19, 19);
                g.FillEllipse(red, Convert.ToInt32(nodes.xCord) - 6, Convert.ToInt32(nodes.yCord) - 6, 15, 15);
            }

            else //Regular Nodes
            {                    
                g.FillEllipse(black, Convert.ToInt32(nodes.xCord) - 8, Convert.ToInt32(nodes.yCord) - 8, 19, 19);
                g.FillEllipse(yellow, Convert.ToInt32(nodes.xCord) - 6, Convert.ToInt32(nodes.yCord) - 6, 15, 15);
            }
            if (Node.list[q].yellowHL) //Hovered
            {                    
                g.FillEllipse(black, Convert.ToInt32(nodes.xCord) - 8, Convert.ToInt32(nodes.yCord) - 8, 19, 19);
                g.FillEllipse(blue, Convert.ToInt32(nodes.xCord) - 6, Convert.ToInt32(nodes.yCord) - 6, 15, 15);

            }
        } 
```

这种方法非常有效，直到我尝试设置代码以便将鼠标悬停在某个点上时它会改变颜色。我尝试的第一件事是在鼠标移动事件中放置一个 if 语句，如下所示：

```
row = pointExists(e.X, e.Y);

if(row != -1)
   /* Highlight point */
   Node.list.Count[row].isHighlighted = true;
else
   /* unhighlight all points */
   for(u = 0; u > Node.list.Count; u += 1)
      Node.list[u].IsHighlighted = false; 
```

这行得通……但它会导致屏幕疯狂地闪烁，因为每次移动鼠标时都会触发绘制事件！

我试图设置一些逻辑，以便只有当鼠标第一次离开该区域时才会触发绘制事件，并且成功了......有点。我从上面提到了这个 franken-logic-statement：

```
 if (row != -1  )
            {
                if (Node.inRegion)
                {
                    Node.lastNode = row;                        
                    for (int u = 0; u < Node.list.Count; u += 1)
                        Node.list[u].yellowHL = false;
                    Node.list[row].yellowHL = true;
                    Node.inRegion = false;
                    Node.outRegion = true;                        
                    wfSurface.Invalidate();
                }
            }
            else
            {
                if (Node.outRegion)
                {                        
                    if (Node.lastNode != 0)
                        Node.list[Node.lastNode].yellowHL = false;
                    Node.inRegion = true;
                    Node.outRegion = false;
                    wfSurface.Invalidate();
                }                    
            } 
```

不完全简洁。

在我不得不开始投入更多逻辑之前，上述方法一直有效。当用户想要绘制一个节点时，我必须加入其他条件，例如“用户是否选择了链接的起点”，这些条件会改变什么颜色/何时突出显示节点。

有人对如何最好地解决这个问题有任何想法吗？我试过检查这个家伙的方法：

[http://www.codeproject.com/Articles/8494/DrawTools](http://www.codeproject.com/Articles/8494/DrawTools)

但在浏览了他的源代码 20 分钟后不久就放弃了（应用程序对我的理解来说太复杂了）。我想我可能完全错了......在上面的文章中，那个人提到使用命中测试来检查用户是否点击了绘制的图形。我只是查询了坐标列表，看看是否已经在那里绘制了一个节点，这有点像一个 hacky 解决方案......必须有一种更智能的方法来解决这个问题。

多谢你们，

猎人

# r - 在 R 中对日志文件的更改发生时采取行动

> ID：15299401
> 
> 赞同：0
> 
> 时间：2013-03-08T17:02:44.503
> 
> 标签：r, io

假设正在将一个日志文件写入磁盘，并且每隔一段时间附加一行额外的行（通过我无法控制的进程）。

我想知道一种让 R 程序“监视”日志文件并在将新行写入日志文件时处理新行的干净方法。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:13:19.103

您可以使用`file.info`获取文件的修改日期，只需每隔一段时间检查一次，并在修改日期更改时采取措施。跟踪已读取的行数将使您能够使用`scan`或`read.table`仅读取新行。

您也可以在程序读取日志文件后删除或移动它。我假设外部程序将创建一个新的日志文件。使用`file.exists`您可以检查文件是否已重新创建，并在需要时读取它。然后将新数据添加到现有数据中。

我会将日志文件移动到`archive`子文件夹并在创建日志文件时读取它们。

# java - 获取两个相交矩形的面积

> ID：15299408
> 
> 赞同：2
> 
> 时间：2013-03-08T17:03:06.430
> 
> 标签：java

我真的很困惑自己在这里......哪个实际上返回了两个矩形之间的交叉区域？请解释一下（数学让我感到沮丧）。任何帮助，将不胜感激。

**方法一：**

```
double newX = Math.max(this.x, rect2.x);
double newY = Math.max(this.y, rect2.y);
return new Rect(newX, newY, Math.min(this.x + this.width, rect2.x + rect2.width) - newX, Math.min(this.y
        + this.height, rect2.y + rect2.height)
        - newY); 
```

**方法二：**

```
double areaOfIntersection = Math.max(0, Math.max(rect1x2, rect2x2) - Math.min(rect1x1, rect2x1))
                        * Math.max(0, Math.max(rect1y2, rect2y2) - Math.min(rect1y1, rect2y1)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:17:29.787

您的代码几乎是正确的。您发布代码的方式令人困惑，因为它似乎`this`指的是一个矩形并`rect2`指的是第二个矩形。为什么不做一个`Rect#area()`方法而不是单独计算交叉区域呢？

```
class Rect {

    double x, y, width, height;

    ... members and stuff

    Rect intersection(Rect rect2) {
        double newX = Math.max(this.x, rect2.x);
        double newY = Math.max(this.y, rect2.y);

        double newWidth = Math.min(this.x + this.width, rect2.x + rect2.width) - newX;
        double newHeight = Math.min(this.y + this.height, rect2.y + rect2.height) - newY;

        if (newWidth <= 0d || newHeight <= 0d) return null;

        return new Rect(newX, newY, newWidth, newHeight);
    }

    double area() {
        return this.width * this.height;
    }

} 
```

然后你会做

```
Rect intersection = rect1.intersection(rect2);    
double areaOfIntersection = intersection == null ? 0 : intersection.area(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:21:37.627

继承人我会做什么：

将矩形分成 4 个点 - 并对它们进行排序：

您只需要比较每个矩形的对应点。每个都有： - 左上 - 右上 - 左下 - 右下

计算由交点创建的矩形左上点的 x,y 值：

首先通过获取最右边的点（最高x值）来计算左上角的x坐标，因为我们正在寻找左角

```
if rect_1_upper_left_x > rect_2_upper_left_x then
    intersect_upper_left_x = rect_1_upper_left_x
else
    intersect_upper_left_x = rect_2_upper_left_x
endif 
```

或更简单地说

```
intersect_upper_left_x = max( rect_1_upper_left_x , rect_2_upper_left_x ) 
```

要获取左上角的 y 坐标，请选择最低的 y 值（因为我们正在寻找上角）

```
intersect_upper_left_y = min( rect_1_upper_left_y , rect_2_upper_left_y ) 
```

请注意，您只需要对 2 个对角执行此操作；

例如：左上和右下

编辑：虽然，如果你的左上角低于你的右下角，它们不会相交。就像你的左上角比右下角更靠右一样......

# php - 将 JavaScript 与 PHP 结合起来？

> ID：15299409
> 
> 赞同：-3
> 
> 时间：2013-03-08T17:03:06.467
> 
> 标签：php, javascript, mysql

这就是我想要做的......当用户单击表单中的提交按钮（我正在使用运行良好的[jQuery 表单插件](http://malsup.com/jquery/form/)）时，这应该将 textarea 的内容保存在数据库中。JavaScript 警报应显示数据库中最后更新的 ID。但是由于某种原因，虽然数据正在保存，但 JavaScript 无法正常工作，不知道为什么。

HTML 表单 (index.html):

```
<form action="submit.php" method="post" id="myForm">
<input type="submit" name="submit" value="Submit"/>
<div id="edit-box">
<textarea id="editor" name="editor"><?php echo $content; ?></textarea>
</div>
</form> 
```

提交表格（submit.php）：

```
<?

// connect to the database
include('connect-db.php');

// get form data, making sure it is valid
$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = getRealIPAddress(); //$_SERVER['REMOTE_ADDR'];

// check to make sure both fields are entered
if ($content != '') {

// save the data to the database
mysql_query("INSERT source SET submit_date='$submit_date', ip='$ip_address', content='$content'");
or die(mysql_error());

$lastrow = mysql_query("SELECT MAX(id) FROM source");

echo '<script type="text/javascript"> alert("' . echo $lastrow . '");</script>';

}
?> 
```

另外，我每次都必须关闭连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:14:11.060

你为什么不使用'mysql_insert_id'来获取最后插入的id？

```
$lastrow = mysql_insert_id(); 
```

# javascript - 打开一个模式窗口并通过一个链接重定向到一个新页面

> ID：15299410
> 
> 赞同：0
> 
> 时间：2013-03-08T17:03:15.527
> 
> 标签：javascript, jquery, hyperlink, modal-dialog

我希望能够打开一个 jQuery UI 对话框并在单击单个链接时重定向到一个新页面。有没有办法做到这一点？

这是我的对话框处理程序：

```
$.fx.speeds._default = 1000;
    $(function() {
        $( "#dialogDiv" ).dialog({position:['middle',60],
            open: function(event, ui) {  
            jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="../images/x.png" /></span>');  
        },  
            dialogClass: 'ui-widget-shadow',
            modal: true,    
            autoOpen: false,
            width: '950px',
            close: function(ev, ui) {$(this).close();}
        });

        $( ".opener" ).click(function() {
            $( "#dialogDiv" ).dialog( "open" );
            return false;
        });
        $( ".btnDone" ).click(function(){
            $('.ui-dialog-content').dialog( "close" );
        })
    }); 
```

这是我目前正在使用的链接（它可以很好地打开模式窗口，但不会重定向到页面）：

```
<a href="newpage.html" class="button opener">View</a>
<div style="display:none;" id="dialogDiv" title="Your custom page">
</p>Here is your new custom dashboard</p>
<br />
<a href="#" class="btnDone button">OK</a>
</div> 
```

因此，当用户单击“查看”按钮时，他们将看到在后台加载的新页面以及在其顶部的模式对话框。如何调整我的代码以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:15:19.367

试试这个：- [http://jsfiddle.net/aidioo7/tURMc/1/](http://jsfiddle.net/adiioo7/tURMc/1/)

您可能可以使用 iframe 并显示弹出窗口，并且 iframe 将加载 href url。因此，弹出窗口将打开，所需页面将在 iframe 中打开。

HTML 更改：-

```
<iframe id="testiframe" height="400" width="400" border="0"></iframe> 
```

JS 更改：-

```
$(".opener").click(function () {
        $("#dialogDiv").dialog("open");
        $("#testiframe").attr("src",$(this).attr("href"));
        return false;
    }); 
```

# ruby - 如何使用 Nokogiri 提取属性和数据

> ID：15299415
> 
> 赞同：-5
> 
> 时间：2013-03-08T17:03:29.027
> 
> 标签：ruby, xpath, nokogiri

我有一个无法打开的大文件：

```
... more here

<my_element attr1='123'>
... a lot of text and elements here
</my_element>

<my_element attr1='33'>
... a lot of text and elements here
</my_element>

... more here 
```

我试过“[如何使用 Nokogiri::XML::Reader 解析大型 XML 文件？](https://stackoverflow.com/questions/6675128/how-do-i-use-nokogirixmlreader-to-parse-large-xml-files) ”：

```
#!/usr/bin/ruby
require "rubygems"
require "nokogiri"
require "debugger"
require "awesome_print"

file   = ARGV[0]
reader = Nokogiri::XML::Reader(File.open(file))
reader.each do |node|
  if node.name == "PATDOC"
    debugger
    break
  end
end 
```

但`node.attributes`返回`{}`。

如何从元素中提取属性和内部文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:47:36.283

通常我们使用 Nokogiri 读取整个文件并将其作为 DOM 处理。我将示例 XML 包装在另一个节点中，使其成为有效的 XML，并使用 CSS 访问器，因为它们更易于阅读：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<xml>
  <my_element attr1='123'> a lot of text and elements here </my_element>
  <my_element attr1='33'>  a lot of text and elements here </my_element>
</xml>
EOT

doc.search('my_element').map{ |n|
  [ n['attr1'], n.children.text ]
} 
```

看起来像：

```
[
    [0] [
        [0] "123",
        [1] " a lot of text and elements here "
    ],
    [1] [
        [0] "33",
        [1] "  a lot of text and elements here "
    ]
] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T17:09:58.317

好吧，您可以使用`awk`，但推荐的方法是 XML 解析器。反正：

```
awk 'BEGIN {FS="</*my_element[^>]+>"} {print $2, $3}' INPUTFILE 
```

注意：这不是完美的解决方案，因为它实际上取决于您的整个输入文件。它所做的是将您的字段分隔符设置为标签，并从文件中打印第二个和第三个“列”。您可能需要对其进行修改。

# c# - xml 根目录下的多个命名空间

> ID：15299418
> 
> 赞同：0
> 
> 时间：2013-03-08T17:03:37.277
> 
> 标签：c#, xml, namespaces

我无法生成 xml 根目录。我必须匹配这个结构，因为 xml 的元素始终使用前缀。

```
<ShipmentReceiptNotification
xmlns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02"
xmlns:dacc="urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03"
xmlns:dbpq="urn:rosettanet:specification:domain:Procurement:BookPriceQualifier:xsd:codelist:01.04"
xmlns:dccc="urn:rosettanet:specification:domain:Procurement:CreditCardClassification:xsd:codelist:01.03"
xmlns:dcrt="urn:rosettanet:specification:domain:Procurement:CustomerType:xsd:codelist:01.03"
..\..\XML\Interchange\ShipmentReceiptNotification_02_02.xsd"> 
```

如果我做类似的事情

```
XmlNode ShipmentReceiptNotification0Node = xmlDoc.CreateElement("ShipmentReceiptNotification", "xmlns=\"urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02\"xmlns:dacc=\"urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03\""); 
```

我明白了

> -ShipmentReceiptNotification xmlns="xmlns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02"xmlns:dacc=&
> 
> quot;urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03"">

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:27:16.440

The second argument of `CreateElement` accepts the URI of the namespace that the *element being created*, that is `ShipmentReceiptNotification`, belongs to. Not the whole bunch of `xmlns` attributes. This code:

```
XmlElement e = xmlDoc.CreateElement(
    "ShipmentReceiptNotification",
    "urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02"); 
```

Produces this XML:

```
<ShipmentReceiptNotification 
    xmlns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02" /> 
```

To produce what you want, you need to *add attributes* to the element. Like this:

```
XmlElement e = xmlDoc.CreateElement("ShipmentReceiptNotification");
e.SetAttribute("xmlns", "urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02");
e.SetAttribute("xmlns:dacc", "urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03"); 
```

Produces this XML:

```
<ShipmentReceiptNotification 
    xmlns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02" 
    xmlns:dacc="urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03" /> 
```

Note that this is the “manual” way. You should play with [`XmlNamespaceManager`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.aspx) to do it “right”. However, that may be a bit more complex task which need not be necessary for your scenario.

# plone - 委派 Plone 在内容上管理用户和本地角色

> ID：15299423
> 
> 赞同：3
> 
> 时间：2013-03-08T17:03:41.770
> 
> 标签：plone, roles

我们正在使用 Plone 4.2.2，我们希望将用户帐户/组的创建和管理内容的本地角色委托给我们的 1 级帮助台人员。我们最初考虑使用站点管理员角色，只需添加站点设置概述和站点设置用户和组权限。这允许他们创建用户和组，但他们无权访问共享选项卡来管理文件夹和文件对象的本地角色。

我在那里找不到太多帮助，这似乎是一个相当普遍的代表团。事实上，我很惊讶没有专门为此而设的角色。将经理角色赋予我们的第 1 层有点吓人。

任何建议将不胜感激。

我发现这个线程引用了管理用户，但没有引用内容上的本地角色
[如何创建一个唯一目的是管理用户的 Plone 4 组？](https://stackoverflow.com/questions/8245484/how-to-create-a-plone-4-group-whos-sole-purpose-is-to-manage-users)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:05:54.937

对共享选项卡的访问仅与权限有关。

您必须向您的用户授予“ `Sharing page: Delegate roles`”和名为“共享页面：委托*XXX*角色”的所有必需权限。

但老实说，我认为站点管理员角色已经拥有你需要的所有权力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:27:18.330

我要做的是，我不会使用普通的 Plone 用户管理器

*   用 Python 插件编写一个自定义的、简化的用户管理表单

*   表单通过只允许创建具有特定角色的特定类型的用户来进行完整性检查

*   表单还可以以编程方式委派在文件夹上设置本地角色（无需转到共享选项卡）

*   通过特殊的新权限公开此表单

*   将表格的权限授予一级支持人员

由于用例非常专业，因此编写自己的管理器表单可能比自定义现有的 Plone 逻辑更容易。

# javascript - 检查稍后将创建的对象的单击

> ID：15299425
> 
> 赞同：0
> 
> 时间：2013-03-08T17:03:57.370
> 
> 标签：javascript, jquery

好的，如果我有这样的 jQuery：

```
$(document).ready(function(){
    $('#btn1').click(function(){
        //Add stuff to table
        $('#items_table tr:last').after('<tr><td><input type="button" id="btn2" value="second button" /></td>/tr>');
    });
    //Created button above is triggered
    $('#btn2').click(function(){
        alert('btn 2 was clicked');
    });
}); 
```

当我点击“btn2”时什么都不会发生。我想那是因为 $(document).ready() 时它不存在？如果我将 btn2 的 js 发送到表格行中，它工作正常。像这样的东西：

```
$(document).ready(function(){
$('#btn1').click(function(){
    //Add stuff to table
    $('#items_table tr:last').after('<tr><td><input type="button" id="btn2" value="second button" /><script type="text/javascript ..... BLAH $(\'#btn\').click BLAH </script>;
    });
}); 
```

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:04:52.563

使用[on](http://api.jquery.com/on/)让表将事件委托给稍后可能出现的元素：

```
$('#items_table').on('click', '#btn2', function(){
    alert('btn 2 was clicked');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:08:06.393

[使用.on()](http://api.jquery.com/on/)将事件处理程序附加到父元素，并将选择器作为参数传递。这也适用于动态添加的元素......

```
 $('#items_table').on('click', '#btn2', function(){
    alert('btn 2 was clicked');
 }); 
```

# mysql - 在表中添加一列，其结果是该行的 2 个字段的串联结果

> ID：15299428
> 
> 赞同：0
> 
> 时间：2013-03-08T17:04:25.433
> 
> 标签：mysql, sql, database, concatenation

我在一些我认为必须非常简单的事情上遇到了一些麻烦。

我有一个包含以下内容的表格：

```
CREATE TABLE cities(  
 city_id INT PRIMARY KEY, 
 city_article TEXT,
 city_name  TEXT 
 ); 
```

因此，city_name 是一个简单的字段，例如名称为“PARIS”或“NEW YORK”。city_article 大部分是空的，除了一些城市（比如法国城市）需要在他们前面写一篇文章，比如 'LA ROCHELLE'，它在数据库中设置为 city_article = 'LA' city_name = 'ROCHELLE'

我想创建一个包含 city_article 和 city_name 连接的新列，用“-”分隔，并用相同的“-”替换每个空格。

因此，如果我们在 city_article = 'THE' city_name = 'NEW YORK' 中使用类似 'THE NEW YORK' 的内容

第三列是 city_concatenated = 'THE-NEW-YORK'

诀窍是，由于不是所有城市都有文章，我不希望像'PARIS'这样的城市在手术后变成'-PARIS'。

有没有这样的方法可以轻松做到这一点？

TL; DR：我如何创建一个新列，其中包含其他 2 个列的结果，其中一个可以为 NULL，另一个必须将每个空格替换为“-”，而不需要在不需要的地方放置“-”，因为没有第一个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:06:50.973

将第一个破折号放在`COALESCE`语句中：

```
SELECT COALESCE(city_article + '-','') + REPLACE(city_name, ' ', '-') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:47:23.477

我不确定您是否可以在 中有一个空字符串`City_article`，但我假设这可能会发生：

```
SELECT  CONCAT(CASE WHEN City_Article = '' OR City_Article IS NULL THEN '' ELSE CONCAT(City_Article, '-') END, REPLACE(city_name, ' ', '-'))
FROM    Cities; 
```

就将其添加为列而言，我不会。由于 MySQL 不允许计算列，我建议创建一个存储该列定义的视图。这确保了全名始终是最新的，并且如果文章或城市名称更新，则不需要更新额外的列：

```
CREATE VIEW Cities_Ext 
AS
SELECT  City_ID,
        City_Article,
        City_Name,
        CONCAT(CASE WHEN City_Article = '' OR City_Article IS NULL THEN '' ELSE CONCAT(City_Article, '-') END,REPLACE(city_name, ' ', '-')) AS FullName
FROM    Cities; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/3de4d/1)**

# wpf - 围绕拖动移动将鼠标状态更改为已释放的方法

> ID：15299440
> 
> 赞同：0
> 
> 时间：2013-03-08T17:04:58.283
> 
> 标签：wpf, preview

如果用户单击窗口内的任何位置然后在按下鼠标时拖动，我正在尝试使窗口可移动。相反，如果用户按下并释放鼠标，保持它的位置不变，我希望窗口内的任何内容都被点击。基本上，它是一个工具栏，可从其内部或之上的任何位置拖动。

问题是 DragMove() 将鼠标状态更改为已释放，我需要窗口内的任何内容在未拖动窗口时接收按下和释放。

```
private void currentWindow_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        double tempX = currentWindow.Left;
        double tempY = currentWindow.Top;
        this.DragMove();
        if (currentWindow.Left == tempX && currentWindow.Top == tempY)
        {
            // at this point e.ButtonState is Released but I need it to be Pressed!
            // some code here to press the button
        }
} 
```

# ruby - 需要帮助在 Sinatra 中组织我的文件和路由（将旧的 PHP 站点移动到 Sinatra）

> ID：15299447
> 
> 赞同：0
> 
> 时间：2013-03-08T17:05:27.427
> 
> 标签：ruby, sinatra, rack

下面是我如何在 PHP 中组织一个网站**clothing.com的示例：**

```
index.php
style/
  style.css
men/
  index.php
  style/
    style.css
women/
  index.php
  style/
    style.css 
```

您将如何在 Sinatra 中组织同一个站点？我很困惑，因为 Sinatra 似乎不太适用于“文件夹”结构，但你会在同一个文件中拥有路由：

```
get '/' do
  haml :index
end

get 'men' do
  haml :men
end

get 'women' do
  haml :women
end 
```

问题是使用此模型的所有内容都进入同一个“公共”文件夹。这是它应该组织的方式吗？

您将如何组织样式表文件，索引、男性、女性各不相同？他们也应该进入同一个“公共”文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:04:58.630

老实说，来自 PHP*是*很困难的。

您的网站有一些注意事项。你想保持你的旧网站结构吗？如果是，您将不得不在 Sinatra 中使用相同的路线：

```
get '/index.php' do
  haml :index
end

get '/men/index.php' do
  haml :men
end

get '/women/index.php' do
  haml :women
end 
```

然后，您还必须将样式文件放入适当的公共文件夹中：

```
/public
  /style
    style.css
  /men
    /style
      style.css
  /women
    /style
      style.css 
```

或者，如果您想保留旧样式路径，您可以从这些旧文件夹重定向到一个文件夹：

```
get '/men/stye/style.css' do
  redirect '/style/men_style.css'
end

fet '/women/style/style.css' do
  redirect '/style/men_style.css'
end 
```

如果您编写所有新的 haml 模板，您可以将它们直接放入`/public`文件夹中。

请记住，当您在 haml 模板中调用样式文件时`style.css`（无任何路径），Sinatra 将在`/public/style.css`检查路由之前首先查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:14:56.090

我一直在我的 sinatra 项目中使用以下模板： [Sinatra Github 项目模板](https://github.com/oren/sinatra-template/)

编辑：如果您查看路由文件夹，您会看到他使用 init.rb 文件来要求他的其他路由。

另外，我通常像这样组织我的 css：

```
public/
    css/
         main.css
         men.css
         women.css 
```

如果 css 文件夹中有太多 css 文件，我通常会这样做：

```
public/
    css/
        men/
            men.css
            more.css
            evenmore.css
        women/
            women.css 
```

# python - TypeError：格式字符串的参数不足

> ID：15299448
> 
> 赞同：0
> 
> 时间：2013-03-08T17:05:30.783
> 
> 标签：python

我有代码：

```
with open('D:\\Downloads\\Train_rev1.csv', 'rb') as csv_file:
    data = csv.reader(csv_file, delimiter=',')
    data.next()
    records = ",".join('({}, {})'.format(row[0], row[1]) for row in data)
print 'inserting records into {} ...'.format('train_rev1')
result = conn.execute("INSERT INTO train_rev1 (id, title) VALUES {}".format(records))
print 'Records inserted into {} {}'.format('train_rev1', 'successful' if result else 'unsuccessful') 
```

我得到了

```
> inserting records into train_rev1 ... Traceback (most recent call
> last):   File "I:\test\IceSugar\test.py", line 81, in <module>
>     insert_trainRev1Records(conn)   File "I:\test\IceSugar\test.py", line 54, in insert_trainRev1Records
>     result = conn.execute("INSERT INTO train_rev1 (id, title) VALUES {}".format(records))   File
> "C:\Python27\lib\site-packages\sqlalchemy-0.7.9-py2.7.egg\sqlalchemy\engine\base.py",
> line 1449, in execute
>     params)   File "C:\Python27\lib\site-packages\sqlalchemy-0.7.9-py2.7.egg\sqlalchemy\engine\base.py",
> line 1628, in _execute_text
>     statement, parameters   File "C:\Python27\lib\site-packages\sqlalchemy-0.7.9-py2.7.egg\sqlalchemy\engine\base.py",
> line 1691, in _execute_context
>     context)   File "C:\Python27\lib\site-packages\sqlalchemy-0.7.9-py2.7.egg\sqlalchemy\engine\default.py",
> line 331, in do_execute
>     cursor.execute(statement, parameters)   File "C:\Python27\lib\site-packages\mysql_python-1.2.4c1-py2.7-win32.egg\MySQLdb\cursors.py",
> line 183, in execute
>     query = query % db.literal(args) TypeError: not enough arguments for format string 
```

我不知道，怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:07:59.253

您的代码对我来说似乎很好：

```
>>> data = [[1,2],[3,4]]
>>> records = ",".join("({0}, {1})".format(row[0], row[1]) for row in data)
>>> records
'(1, 2),(3, 4)' 
```

假设当然`data`有我推断的格式。

所以我的猜测是你的`data`对象格式有问题，或者你没有发布实际代码。

# java - 从没有 ?ln=xxx 的 JS 访问 JSF 资源库

> ID：15299449
> 
> 赞同：0
> 
> 时间：2013-03-08T17:05:32.983
> 
> 标签：java, javascript, jsf-2

JSF 资源库有一篇很好的文章：JSF 资源库[是干什么用的，应该怎么用？](https://stackoverflow.com/questions/11988415)

我正在为现有的 JS 库实现一个简单的 JSF 包装器。这个库引用了一些图像并提供了一个函数*setImagePath*：

```
setImagePath("/test/javax.faces.resource/img/"); 
```

这是访问 JSF 资源库的第一步。显然我需要一个后缀

```
.jsf?ln=xxx 
```

访问资源库。不幸的是，JS 库没有提供*setImageSuffix*。如果我修改 JS 库并手动将此后缀添加到所有图像，它可以工作，但这不是一个理想的解决方案。

是否可以仅使用*setImagePath*`xxx`访问我的资源库？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:30:13.097

我有一个类似的问题。为此，您必须扩展您`ResourceHandler`的资源以映射您的资源。

幸运的是，这是在提出我的问题并添加到`OmniFaces`. 因此，您实际上没有必要再次这样做。

通过实现一个，`UnmappedResourceHandler`您将能够在没有附加后缀的情况下映射您的资源。

然后，您将能够以这种方式映射您的资源（图像）：

```
setImagePath("/test/img/"); 
```

### 链接

*   [未映射的资源处理程序](http://showcase.omnifaces.org/resourcehandlers/UnmappedResourceHandler)
*   [原始问题](https://stackoverflow.com/questions/14963756/prevent-suffix-from-being-added-to-resources-when-page-loads)

*感谢 BalusC 和 OmniFaces**

# mysql - MySQL 性能 - 500 万行

> ID：15299456
> 
> 赞同：1
> 
> 时间：2013-03-08T17:06:20.750
> 
> 标签：mysql, performance, indexing

我在**Mamp上有一个****本地**数据库，用于性能测试。我的问题表有大约**500 万**行。

 ****这是我遇到的问题的表：

```
 1  User_ID     int(11)                                     
 2  Skill_ID    int(11)                                         
 3  Matching    int(11)                                         
 4  Grade       int(11) 
```

索引是 User_ID 和 Skill_ID。

这是我使用的查询：

```
 SELECT User_ID,COUNT(Matching),SUM(Matching)
   FROM Matching
   WHERE Skill_ID = 3 OR Skill_ID 5 OR Skill_ID = 18 ............
   GROUP BY User_ID
   ORDER BY SUM(Matching) DESC 
```

我在我的测试站点上选择的技能越多，我的查询就越耗时。目前需要大约。第一个技能需要**1 秒，然后加注大约 1 秒。****每个选定技能 0.25 秒**。所以对于 5 项技能，我已经需要超过 2 秒的时间。

我已经在 MySQL 的 my.cnf 中创建了索引并尝试了许多不同的修改（增加 key_buffer_size，启用 query_cache，sort_buffer_size......）

WAMP 在我的 Mac Book AIR 2012、4GB RAM、1,8 GHz 双核 Intel Core i5 Prozessor 上运行。

该表是 MyISAM。我无法避免 ORDER BY 和 COUNT 和 SUM 函数，它们对于查询来说太重要了。

该表估计将增长到超过 5000 万个条目。

**编辑：** 这是 EXPLAIN 命令的结果

*   编号 1
*   选择类型简单
*   表匹配
*   输入所有
*   可能的键 NULL
*   键空
*   key_len 空
*   参考空
*   行 5285936
*   额外使用where；使用临时；使用文件排序

**我怎样才能提高我的数据库的性能？我只需要更好的硬件吗？提前致谢！**

**编辑：** 现在与分区相同的表

```
Create table Matching2 (User_ID int,Skill_ID int,Matching int,Note int)
Partition by Range (Skill_ID) (
Partition S0 VALUES LESS THAN (10),
Partition S1 VALUES LESS THAN (20),
Partition S2 VALUES LESS THAN (30),
Partition S3 VALUES LESS THAN (40),
Partition S4 VALUES LESS THAN (50),
Partition S5 VALUES LESS THAN (60),
Partition S6 VALUES LESS THAN (70),
Partition S7 VALUES LESS THAN (80)
); 
```

--> 没有显着的性能提升！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:27:40.217

实际上，您所能做的就是为查询添加覆盖索引，即您需要添加复合索引（Skill_Id，User_Id，Matching），并将您的WHERE条件更改为'Skill_Id IN（3,5,18）' .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:15:26.707

如果您认为在接下来的几个月中该数据将增长到 5000 万，并且您已完成索引优化，我会建议对该表进行分区。

您可以查看[http://dev.mysql.com/doc/refman/5.5/en/partitioning-overview.html](http://dev.mysql.com/doc/refman/5.5/en/partitioning-overview.html)

从链接引用

> 由于满足给定 WHERE 子句的数据只能存储在一个或多个分区上，因此可以大大优化某些查询，这会自动从搜索中排除任何剩余的分区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T03:32:48.213

有一个非常强大但不太为人所知的技巧。试试这个以确保使用 Skill_ID 索引：

```
SELECT User_ID,COUNT(Matching),SUM(Matching)
FROM Matching
inner join (           select 3 as sid
             union all select 5 as sid
             union all select 18 as sid
           ) skills
on skills.sid = Matching.Skill_ID
GROUP BY User_ID
ORDER BY SUM(Matching) DESC 
```****

# c++ - 为什么我不能使用 static_cast 将整数引用参数传递给 C++ 中的函数？

> ID：15299458
> 
> 赞同：9
> 
> 时间：2013-03-08T17:06:21.190
> 
> 标签：c++, pass-by-reference, static-cast

我在 C++ 程序中有一个枚举参数，我需要使用一个通过参数返回值的函数来获取该参数。我首先将其声明为 int，但在代码审查中被要求将其键入为枚举 (ControlSource)。我这样做了，但它破坏了 Get() 函数——我注意到 C 风格的转换为 int& 解决了这个问题，但是当我第一次尝试用 static_cast<> 修复它时，它没有编译。

为什么会这样，为什么当 eTimeSource 是 int 时根本不需要强制转换来通过引用传递整数？

```
//GetCuePropertyValue signature is (int cueId, int propertyId, int& value);

ControlSource eTimeSource = ControlSource::NoSource;

pPlayback->GetCuePropertyValue(programmerIds.cueId, DEF_PLAYBACKCUEPROPERTY_DELAY_SOURCE, static_cast<int&>(eTimeSource)); //This doesn't work.

pPlayback->GetCuePropertyValue(programmerIds.cueId, DEF_PLAYBACKCUEPROPERTY_DELAY_SOURCE, (int&)(eTimeSource)); //This does work.

int nTimeSource = 0;
pPlayback->GetCuePropertyValue(blah, blah, nTimeSource); //Works, but no (int&) needed... why? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T17:16:53.060

当您将变量转换为不同类型的值时，您将获得一个临时值，该值不能绑定到非常量引用：修改临时值没有任何意义。

如果您只需要*读取*该值，则常量引用应该没问题：

```
static_cast<int const &>(eTimeSource) 
```

但是您也可以只创建一个实际值，而不是引用：

```
static_cast<int>(eTimeSource) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T17:20:54.857

```
static_cast<int&>((eTimeSource))); //This doesn't work. 
```

对，它不起作用，因为`eTimeSource`is not an`int`所以你不能将 a 绑定`int&`到它。

```
(int&)((eTimeSource))); //This does work. 
```

错了，这也不起作用，它只是看起来。C 风格的转换对编译器说谎并说“只要让它成为这种类型，即使那是不合法的”。仅仅因为某些东西可以编译并不意味着它可以工作。

> 为什么什么时候`eTimeSource`根本`int`不需要强制转换来通过引用传递整数？

因为您可以将 an 绑定`int&`到 an`int`但不能绑定到不同的类型，并且`eTimeSource`是不同的类型。An`int&`是对 的引用`int`。如果你可以将它绑定到不同的类型，它就不会引用 an `int`，不是吗？

如果代码审阅者说要将变量更改为枚举类型，他们可能还意味着您要更改函数参数以获取`ControlSource&`

# sublimetext2 - 崇高的自定义构建命令，如何？

> ID：15299459
> 
> 赞同：1
> 
> 时间：2013-03-08T17:06:22.083
> 
> 标签：sublimetext2

我有一个程序，它使用他们调用`wmake`的代码来构建代码，非常方便。假设我有一个文件夹和一个 C++ 文件：`/path/to/file.C`，我所要做的就是转到`/path/to`文件夹，然后键入`wmake`命令并返回，一切都设置好了。

当我使用 sublimetext 时，我想打开这个`file.C`文件，然后 ctrl+B 来构建它，但是它不起作用。目前我定制了一个构建系统，如：

```
{
    "cmd": "wmake"
} 
```

错误显示为

```
[Errno 2] No such file or directory
[cmd:  wmake]
[dir:  /path/to/file.C]
[path: /home/meee/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/bin]
[Finished] 
```

任何人都知道如何在 sublimetext2 中自定义构建系统？我阅读了在线手册，但仍然没有任何线索。谢谢

## 我的目标

我想要做的就是获得与我在 shell 窗口中键入一个简单的相同的效果

```
wmake /path/to 
```

## 编辑-1

我试过了，它也不起作用，同样的错误。我不明白为什么“没有这样的文件”？

```
{
    "cmd": "wmake",

    "selector" : "source.C",

    "shell": false,

    "working_dir" : "$file_path",

    "variants":

    [
        {
        "name": "Run",
        "cmd": ["bash", "-c", "wmake '${file_path}'"]
        }
    ]
} 
```

## 编辑-2

我尝试使用 wmake 的完整路径，并且错误提示`environment variable $WM_OPTIONS not set`。所以在 shell 中，每次 ~/.bashrc 都会自动加载，并初始化所有的环境变量，但在 Sublime 中却不是这样！！！！！！！！！！！！！！！我应该怎么办？？？

```
{
    "cmd": "/fullpath/to/wmake",

    "selector" : "source.C",

    "shell": false,

    "working_dir" : "$file_path",

    "variants":

    [
        {
        "name": "Run",
        "cmd": ["bash", "-c", "/fullpath/to/wmake '${file_path}'"]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:13:11.830

您的构建命令不完整。查看我定制的 C 版本：

```
{

  "cmd" : ["/usr/local/gfortran/bin/gcc", "$file_name", "-o", "${file_base_name}", "-lgsl","-lgslcblas", "-lm" , "-Wall"],

  "selector" : "source.c",

  "shell":false,

  "working_dir" : "$file_path",

  "variants":

    [
       {
        "name": "Run",
        "cmd": ["bash", "-c", "/usr/local/gfortran/bin/gcc '${file}' -lgsl -lgslcblas -lm  -Wall -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"]
       }
    ]

} 
```

# .net - JW Player 无法在 .NET 平台上的 IE 8 中运行

> ID：15299463
> 
> 赞同：2
> 
> 时间：2013-03-08T17:06:35.230
> 
> 标签：.net, flash, internet-explorer-8, jwplayer

我们的公司网站 [http://www.lta.org.uk/](http://www.lta.org.uk/)有 JW 5.9 Player 。我们正在尝试更新代码以支持 IOS 和其他移动设备。我将非常感谢对我做错了什么的一些见解。我是一名具有 HTML/CSS 知识的设计师，对这些开发内容一无所知！再次感谢。

[当前位于http://www.lta.org.uk/](http://www.lta.org.uk/)的实时站点（在 ios 中不起作用）使用以下代码：

```
<div id="Flash"></div>
    <script type="text/javascript">
       var flashvars = {
            "file": "<%= this.File %>",
            "image": "<%= this.PreviewImage %>",
            "autostart": "<%= this.AutoStart%>",
            "skin": "<%= this.Skin%>",
            "dock": "true",
            "controlbar.position": "bottom",
            "stretching": "fill"
            <%if(!String.IsNullOrEmpty(PlaylistPath)){%> 
                 ,"playlist":           "right",
                 "playlist.thumbs": "false",
                 "playlistsize":        "172",
                 "playlistfile":        "<%=PlaylistPath%>"
            <%}else if(!System.String.IsNullOrEmpty(this.File) && this.File.Contains("yospace.com")){%>
                ,"provider": "video"
            <%}%>
       };
       var params = {
       "allowfullscreen": "<%=this.AllowFullScreen%>",
          "allowscriptaccess":  "always",
          "wmode":              "transparent"
       };
       var attributes = {
       "id": "<%=this.ClientID%>",
       "name": "<%=this.ClientID%>"
       };

       swfobject.embedSWF("/swf/LTA-player.swf", "<%=DivMediaPlayer.ClientID%>", "<%=Width%>", "<%=Height%>", "9", "false", flashvars, params, attributes);

    </script>
</div> 
```

我已经对其进行了更新，希望可以在 ios 中使用：

```
 <div id="Flash"></div>

    <script type="text/javascript" src="/javascript/jwplayer.js"></script>

    <script type="text/javascript">
    if(swfobject.hasFlashPlayerVersion("1"))
       {
           console.log('flash');
       var flashvars = {
            "file": "<%= this.File %>",
            "image": "<%= this.PreviewImage %>",
            "autostart": "<%= this.AutoStart%>",
            "skin": "<%= this.Skin%>",
            "dock": "true",
            "controlbar.position": "bottom",
            "stretching": "fill"
            <%if(!String.IsNullOrEmpty(PlaylistPath)){%> 
                 ,"playlist":           "right",
                 "playlist.thumbs": "false",
                 "playlistsize":        "172",
                 "playlistfile":        "<%=PlaylistPath%>"
            <%}else if(!System.String.IsNullOrEmpty(this.File) && this.File.Contains("yospace.com")){%>
                ,"provider": "video"
            <%}%>
       };
       var params = {
       "allowfullscreen": "<%=this.AllowFullScreen%>",
          "allowscriptaccess":  "always",
          "wmode":              "transparent"
       };
       var attributes = {
       "id": "<%=this.ClientID%>",
       "name": "<%=this.ClientID%>"
       };

       swfobject.embedSWF("/swf/LTA-player.swf", "<%=DivMediaPlayer.ClientID%>", "<%=Width%>", "<%=Height%>", "9", "false", flashvars, params, attributes);
        }
        else
        {

    jwplayer("<%=DivMediaPlayer.ClientID%>").setup({
                flashplayer: "/swf/lta-jwplayer.swf",
                file: "<%= this.File %>",
                image: "<%= this.PreviewImage %>",
                height: "<%=Height%>",
                controlbar: "bottom",
                width: "<%=Width%>",
                autostart: "<%= this.AutoStart%>",
                skin: "<%= this.Skin%>",
                id: "<%=this.ClientID%>",
                name: "<%=this.ClientID%>",
                dock: 'true',
                <%if(!String.IsNullOrEmpty(PlaylistPath)){%> 
                    playlist:           "right",
                    playlist.thumbs:    "false",
                    playlistsize:       "172",
                    playlistfile:       "<%=PlaylistPath%>"
                <%}else if(!System.String.IsNullOrEmpty(this.File) && this.File.Contains("yospace.com")){%>
                    provider: "video"
                <%}%>
            });
        }   

    </script>

</div> 
```

# web-services - 无法在我的网站上查看图像

> ID：15299464
> 
> 赞同：0
> 
> 时间：2013-03-08T17:06:40.960
> 
> 标签：web-services

抱歉标题含糊，但是：

我似乎无法查看可以在我的网站上的 fileZilla 上看到的图像。我尝试直接访问它们（例如 site.com/images/photo.jpg），但随后我从浏览器收到一条消息，说它不存在。从 cpanel 使用文件管理器时，它仍然列出/存在。

该网站在我的电脑上运行良好。我只是不明白：s

提前感谢您的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:11:19.243

您说该网站正在您的计算机上运行，

检查图像和路径的字母大小写（例如文件和路径名中的大写字母），基于 Linux 的网络托管区分大小写。windows 文件名不是。

# java - GWT - 将演示者的角色与活动分开

> ID：15299466
> 
> 赞同：6
> 
> 时间：2013-03-08T17:06:47.370
> 
> 标签：java, gwt, mvp, gwt-places, gwt-activities

从活动中剥离演示者的角色可以获得哪些优势？

为了剖析活动与演示者的关系，可以分离哪些角色/关注点？

为什么要将它们分成两个不同的关注点？

在什么情况下不统一它们才有意义？

举个例子，优点或缺点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T12:34:07.690

我可以看到将演示者与活动分开的两个主要原因：可重用性和可测试性。

**可重用性的真实用例：**我们有一个插图实体，具有摄影师、版权和拍摄日期等属性，可以链接到文档。的图例是关于文档和插图之间的关系。您可以在自己的屏幕上编辑插图和图例，但我们还希望可以从图例屏幕编辑插图。所以我们为插图屏幕做了一个演示者。插图活动是对演示者的一个非常薄的包装，图例活动有点复杂，但重用了演示者和视图。活动的责任是提供`RequestContext`s 并执行`fire()`（保存/取消按钮在另一个活动上，类似于 Google 群组上的操作）。

**可重用性的假设用例：**

*   对于不同的形式因素，您希望在同一屏幕上聚合事物或在各自的屏幕上将它们分开（例如主/详细信息），并且当您聚合它们时，拥有两个活动可能并不理想。在手机外形中使用精简活动允许您在平板电脑或台式机外形的单个活动中重用组件（演示者/视图）。
*   在不同平台上重用同一个presenter：你可以在一个Android应用和一个web应用（甚至可能是一个通过[java2objc](https://code.google.com/p/java2objc/)的iOS应用）上使用同一个presenter，视图可以是原生Android视图或基于GWT的视图，并且导航将由 Android 活动和/或片段与 GWT 活动和地点处理。

**关于可测试性**（这是理论上的），您可以在没有活动生命周期的麻烦（模拟视图）的情况下测试您的演示者，然后单独测试生命周期（它是否正确初始化和清理演示者，获取/缓存数据，等嘲笑主持人）。

**另请参阅**[https://code.google.com/p/google-web-toolkit/source/detail?r=10185](https://code.google.com/p/google-web-toolkit/source/detail?r=10185)的提交消息
Ray 的想法是让 MVP 成为小部件的实现细节，就像单元小部件使用内部演示者一样今天。从外面看，它们只是小部件，您可以按照自己的方式进行组合；他们在内部使用 MVP，因此您可以在不需要`GWTTestCase`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:54:54.137

首先，感谢您提出的两个问题，这促使我进行了有史以来最长的研究。:)

根据Thomos Broyer 的[说法](http://permalink.gmane.org/gmane.org.google.gwt/56372)。

**活动不能与小部件对话，演示者可以做到。**

两个主要关注领域：

1-将数据放入小部件：如何改进这种设计？

```
Server (RequestFactory) ---> Activity ---> WidgetPresenter ---> Widget 
```

在这里，`RequestFactory`将数据交给`Activity`，然后交给 ，然后`Presenter` 交给`widget`。

2- 将数据`widgets`从`server`

```
widget ---> WidgetPresenter ---> Activity ---> Server(RequestFactory) 
```

# solr - 如何将我的 Solr 搜索限制为任意一组 100,000 个文档？

> ID：15299475
> 
> 赞同：2
> 
> 时间：2013-03-08T17:07:07.653
> 
> 标签：solr

我有一个包含 11,000,000 个文档的索引。大多数文档都有一个名为“flrid”的唯一 ID，以及一个名为“solrid”的不同 ID，即 Solr 的 PK。对于某些搜索，我们需要能够将搜索限制为由 FLRID 值列表定义的文档子集。FLRID 值列表可以在每次搜索之间更改，并且很少将其称为“从不”任何两个搜索都将具有相同的 FLRID 集进行限制。

我们现在做的大致是：

```
q=title:dogs AND 
    (flrid:(123 125 139 .... 34823) OR 
     flrid:(34837 ... 59091) OR 
     ... OR 
     flrid:(101294813 ... 103049934)) 
```

这些 FQ 括号中的每一个都可以是 1,000 个 FLRID 串在一起。我们必须进行子分组以克服 Solr 对可以一起 ORed 的术语数量的限制。

这种方法的问题（除了它很笨重）是它似乎执行 O(N^2) 左右。对于 1,000 个 FLRID，搜索会在 50 毫秒左右返回。如果我们有 10,000 个 FLRID，它会在 400-500 毫秒内返回。如果有 100,000 个 FLRID，则时间会上升到大约 75000 毫秒。我们希望它在所有情况下最多为 1000-2000 毫秒，最多 100,000 个 FLRID。

我们怎样才能更好地做到这一点？

我们尝试或考虑过的事情：

*   尝试：使用 dismax 和最小匹配 mm:0 来模拟 OR 查询。没提升。
*   尝试：将 FLRID 放入 fq 而不是 q。没提升。
*   考虑：将给定搜索的所有 FLRID 转储到另一个核心并在它和主核心之间进行连接，但如果我们每秒进行五到十次搜索，Solr 似乎会因所有提交而死亡。FLRID 集在搜索之间是唯一的，因此不可能重用。
*   考虑：将 FLRID 转换为 SolrID，然后改为限制 SolrID，这样 Solr 就不必点击文档来转换 FLRID->SolrID 来进行匹配。

我们所希望的：

*   一种传递长组 ID 或 Solr 能够从应用程序的 Oracle 数据库中提取它们的有效方法。
*   让 Solr 将大 OR 作为一个集合操作而不是（我们假设是）一个简单的一次匹配。
*   一种创建传递给查询的匹配向量的方法，因为查询中的 fqs 字符串似乎是一种次优方法。

我搜索了 SO 和网络，发现有人问过这种情况几次，但除了我们现在正在做的事情之外，我没有看到任何答案。

*   [solr 在由键列表定义的子集中搜索](https://stackoverflow.com/questions/11938342/solr-search-within-subset-defined-by-list-of-keys)
*   [在数据子集内搜索 - Solr](https://stackoverflow.com/questions/9183898/searching-within-a-subset-of-data-solr)
*   [http://lucene.472066.n3.nabble.com/Filtered-search-for-subset-of-ids-td502245.html](http://lucene.472066.n3.nabble.com/Filtered-search-for-subset-of-ids-td502245.html)
*   [http://lucene.472066.n3.nabble.com/Search-within-a-subset-of-documents-td1680475.html](http://lucene.472066.n3.nabble.com/Search-within-a-subset-of-documents-td1680475.html)

# java - I/O 相对路径

> ID：15299477
> 
> 赞同：1
> 
> 时间：2013-03-08T17:07:14.733
> 
> 标签：java

我的程序中的相对路径有问题。我要使用的文件的绝对路径是：

```
C:\Users\User\Documents\Projects\Project1\src\files\test.txt 
```

现在，我不确定如何使它成为相对路径，我尝试过：

```
.\files\test.txt 
```

这向我抛出了一个错误，我不知道如何将它放到一个文件夹中并从 test.txt 文件中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:09:38.093

`.\files\test.txt`是正确的，当且仅当您从`src`目录运行程序并使用文件 IO 读取文件，而不是使用类加载器加载资源。

# javascript - 无法读取 null 的属性“长度”-使用 css 显示块（选择/onchange）

> ID：15299482
> 
> 赞同：2
> 
> 时间：2013-03-08T17:07:40.383
> 
> 标签：javascript, jquery, css, google-visualization

我正在使用 Google 图表，并且可以使用选择菜单查看图表：

```
<select id="form_frame1" name="frame1" onchange="getChart(this);">
   <option value="area_chart_google" >Area Chart</option>
   <option value="area_chart_2" selected="selected">Stacked Chart</option>
</select> 
```

我的 getChart 函数是：

```
function getChart(selection) {
 if (selection.value == "area_chart_2") {
    document.getElementById('area_chart_2').style.display = 'block';
    document.getElementById('area_chart_google').style.display = 'none';
}

 else {   
    document.getElementById('area_chart_2').style.display = 'none';
    document.getElementById('area_chart_google').style.display = 'block';
   }
} 
```

**使用 Display: 'block' by default (area_chart_google) 时工作​​正常**。问题是一旦我隐藏（无）图表（area_chart_google）然后我显示它（块）我得到这个错误：

```
In Firebug: google-visualization-errors-all-1 
In Chrome: Cannot read property 'length' of null
In Safari: 'null' is not an object 
```

这是我的 HTML（脚本在正文中，我在标题上使用 JSAPI）：

```
<div id="area_chart_google" class="area-chart"></div>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Header');
    data.addColumn('number', '');
    data.addColumn('number', '');
    data.addRows([
      ['Monday',300,43],
      ['Tuesday',250,545],
      ['Wednesday',122,78],
      ['Thursday',348,92],
      ['Friday',23,61],
      ['Saturday',39,93]
    ]);
    var options = {
      title: '',
      hAxis: {title: '',  titleTextStyle: {color: '#efed22'}},
      backgroundColor: '#efede9',
      legend: 'none'
    };
    var chart = new google.visualization.AreaChart(document.getElementById('area_chart_google'));
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:33:46.373

这对我有用：

```
function getChart(selection) {
  if (selection.value == "area_chart_2") {
  document.getElementById('area_chart_2').style.display = 'block';
  document.getElementById('area_chart_google').style.display = 'none';
}

else {   
  document.getElementById('area_chart_2').style.display = 'none';
  document.getElementById('area_chart_google').style.display = 'block';
  drawChart(); //call this function when using this Google Chart
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:13:16.777

在这里猜测，但它可能会发生，因为某些脚本动态尝试读取隐藏 div 的长度属性。

如this [answer](https://stackoverflow.com/a/133064/821054)中所述， display none 页面中没有空间。您可以尝试一些选项：

1.  `Use visibility: hidden`
2.  尝试隐藏`area_chart_2`and 的包装`area_chart_google`元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:15:41.857

您的问题被标记为 jQuery，所以这是一个 jQuery 解决方案：

```
function getChart(selection) {

   var $area_chart_2 = $("#area_chart_2"),
       $area_chart_google = $("#area_chart_google");

   if (selection.value === "area_chart_2") {
      $area_chart_2.show(); //You could also use $area_chart_2.css("display", "block");
      $area_chart_google.hide(); //Or use $area_chart_google.css("display", "none");
   } else {   
      $area_chart_2.hide();
      $area_chart_google.show();
   }
} 
```

# sql - 只为多个选择定义一次子选择查询

> ID：15299483
> 
> 赞同：0
> 
> 时间：2013-03-08T17:07:40.097
> 
> 标签：sql, sql-server

我正在编写一个选择查询，我必须在两个地方编写相同的子查询

```
select e.MasterAccNumber from (
select MasterAccNumber from ACE_AccsLevelTran where CAST(timstmp as DATE) = '02/06/2013' 
union all
select m.AccountNumber from ACE_InvLevelTran i left join ACE_InvLevelMaster m i.MasterInvNumber=m.InvoiceNo 
where CAST(i.timstmp as date) ='02/06/2013' ) as e where e.MasterAccNumber not in( 
select e.MasterAccNumber from e group by e.MasterAccNumber having COUNT( e.MasterAccNumber) > 1 ) 
```

在最后一个子查询中，解析器无法理解对象 e

```
select e.MasterAccNumber from e group by e.MasterAccNumber having COUNT( e.MasterAccNumber) > 1 
```

如何写这样我就不会多次定义“e”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:16:23.203

```
select MasterAccNumber from 
(
select MasterAccNumber from ACE_AccsLevelTran where CAST(timstmp as DATE) = '02/06/2013' 
union all
select m.AccountNumber from ACE_InvLevelTran i 
left join ACE_InvLevelMaster m i.MasterInvNumber=m.InvoiceNo 
where CAST(i.timstmp as date) ='02/06/2013' 
)  e
group by MasterAccNumber 
having COUNT( MasterAccNumber) < 2 
```

# php - 如何在 JWplayer Javascript 中使用 PHP 路径

> ID：15299489
> 
> 赞同：2
> 
> 时间：2013-03-08T17:07:59.250
> 
> 标签：php, javascript, jwplayer, path-variables

如何使用嵌入式 JWplayer Javascript 中的变量编写我的 php 路径？我是 php 新手，没有 Javascript 代码经验。我将不胜感激任何帮助。

```
**This absolute path works:**
 <script type="text/javascript">
 jwplayer("myElement").setup({
    file: "/uploads/example.mp4",
    height: 360,
    image:  "http://saradyso.com:8020/SuperContainer/RawData/MediaWeb/REG002133749/ADP100000033/Video1.mp4",
    width: 640
    });
 </script>

**This doesn't work:**
<script type="text/javascript">
 jwplayer("myElement").setup({
    file: "/uploads/example.mp4",
    height: 360,
    image:"http://'.$Domain.':'.$Port.'/'.$ContainerV.'/'.$FileName.'/'.$SubFolder.'.mp4'",
    width: 640
    });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:10:44.977

就这样

```
<?php $your_path = "some/path/to/to.image" ?>

 <script type="text/javascript">
 jwplayer("myElement").setup({
    file: "/uploads/example.mp4",
    height: 360,
    image: <?php ehco $your_path ?>,
    width: 640
    });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T16:57:05.413

像这样在 php 块中使用 echo 。

```
<script type="text/javascript">
 jwplayer("myElement").setup({
    file: "/uploads/example.mp4",
    height: 360,
    image:"http://<?php echo $Domain ?>:<?php echo $Port ?>/<?php echo $ContainerV ?>/<?php echo $SubFolder ?>/<?php echo $FileName ?>.mp4",
    width: 640
    });
 </script> 
```

# java - 如何在 GUI 中为私有变量应用 Getter/Setter 方法？

> ID：15299491
> 
> 赞同：0
> 
> 时间：2013-03-08T17:08:01.700
> 
> 标签：java, swing, jtextfield, setter, getter

该程序的目的是从另一个类访问私有变量 jtextfield。我创建了这个从 JTextField 获取用户输入的简单程序。我在一个类中有 getter 和 setter 方法，在另一个类中有按钮和字段。因此，当用户在文本字段中输入内容时，我想打印一些内容。但是当点击按钮时，程序不打印并给出错误：

错误：javax.swing.JTextField[,140,​​62,124x20,layout=javax.swing.plaf.basic.BasicTextUI

我是否正确初始化了 getter 和 setter 方法？

示例 1：

```
import javax.swing.*;

class Example1 {

private JTextField Name;

public Example1(){

 Name = null;

 }

public Example1(JTextField n){

 Name = n;

 } 

public void setName(JTextField Name) {
    this.Name = Name; 
}
public JTextField getName() {
    return Name;
} 
```

}

示例 2：

```
import javax.swing.*;
import java.awt.event.*;

 public class Example2
{

JFrame frame = new JFrame();
JPanel panel = new JPanel();

private JTextField Name = new JTextField();
private JButton Button = new JButton("Print");

public Example2(){

panel.setLayout(null);  

Name.setBounds(140, 62, 124, 20);
Button.setBounds(320, 62, 133, 20); 

panel.add(Name);  
panel.add(Button);  

frame.add(panel);
frame.setSize(470,310);
frame.setVisible(true);

Button.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {

add(Name);

}
});

}

public static void add(JTextField Name){

Example1 x = new Example1();
x.setName(Name);

JTextField a = x.getName();
System.out.println(a);

}

public static void main(String [] args){

    Example2 print = new Example2();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:16:07.477

您不想打印要访问文本字段保存的字符串的元素本身。这不是错误。它只是为 JTextField 调用 toString() 方法。

用于`textfield.getText()`访问文本字段的值。在示例 2 中，这将是：

```
public static void add(JTextField Name){
    Example1 x = new Example1();
    x.setName(Name);

    JTextField a = x.getName();
    System.out.println(a.getText());
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:23:26.503

您所看到的不是错误。这是打印没有`toString()`定义方法的对象的结果。

```
JTextField a = x.getName();
System.out.println(a); 
```

当您将一个对象传递给`System.out.println()`然后该对象`toString()`被调用。由于没有`toString()`JTextField，所以`Object.toString()`调用标准方法。

更好的方法是：

```
System.out.println(a.getText()); 
```

# google-maps - 如何在点击时识别谷歌地图标记？

> ID：15299495
> 
> 赞同：4
> 
> 时间：2013-03-08T17:08:08.610
> 
> 标签：google-maps, google-maps-api-3, cfml

我正在从开发人员 API v3 创建一个谷歌地图。它填充了从 ColdFusion 查询 MsSQL 数据库动态创建的标记。

```
 <cfloop query="One">
 <script>locations[<cfoutput>#One.userID#</cfoutput>
] = new google.maps.LatLng(<cfoutput>#One.latLng#</cfoutput>);
 </script>
 </cfloop> 
```

我需要一种在单击标记时识别标记的方法，以便我可以在地图下方的框中显示地址详细信息，并在单击页面下方的按钮时突出显示标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:34:38.643

通常，您通常会将自己的自定义属性分配给标记。就像是：

```
function markerClicked(e) {
    console.log('Marker ' + marker.myData + ' has been clicked');
}
var marker = new google.maps.Marker(...);
marker.myData = 1; //this could be arbitrary data or even another object
google.maps.event.addListener(marker, 'click', markerClicked); 
```

但是，将自定义数据添加到任何 Google Maps API 对象都有风险。谷歌的代码被混淆了，内部（未记录的）属性可以而且确实会改变。确保您的财产以不会与任何现有财产或未来财产冲突的方式命名。提示：选择长度超过 3 个字母的属性名称。

如果您要缩小/编译/压缩地图代码，那么还有[其他注意事项](https://code.google.com/p/gmaps-api-issues/issues/detail?id=3821)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-11T14:31:14.827

关于什么 ：

```
google.maps.event.addListener(marker, "click", function (e) {
    var clicked = this;
    //...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:13:34.640

这在文档中得到了非常彻底的记录/解释。

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

创建标记时，将 dom 侦听器添加到标记中，如下所示

```
 google.maps.event.addListener(marker, 'click', function() {
     infowindow.open(map,marker);
  }); 
```

# java - Joshua Bloch 所说的超语言是什么意思？

> ID：15299498
> 
> 赞同：9
> 
> 时间：2013-03-08T17:08:17.333
> 
> 标签：java, clone, effective-java

从这篇关于[*克隆与复制构造函数*](http://www.artima.com/intv/bloch13.html)[的 Artima 文章](http://www.artima.com/intv/bloch13.html)*：*

 *> Object 的 clone 方法非常棘手。它基于现场副本，并且是“语言外的”。它创建一个对象而不调用构造函数。不能保证它保留了构造函数建立的不变量。多年来，无论在 Sun 内部还是外部，都出现了很多错误，这是因为如果您只是在链上反复调用 super.clone 直到您克隆了一个对象，您就会得到该对象的浅表副本。

*Joshua Bloch*所说的外语是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T17:10:42.280

他的意思是“Java 范围之外”。

特别是在 Java 中，创建新对象的“正确”方法是使用该对象的构造函数。许多类编写者在他们的构造函数中依赖这个假设和代码逻辑——比如输入验证或你想在构造时保证的任何其他东西——这就是他所说的“构造函数建立的不变量”。但是克隆绕过了这个基本约束，并在不调用构造函数的情况下创建了一个内存副本——因此它是“额外的语言”。

从技术上讲，序列化也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:10:54.193

可能是因为它没有在 Java 中实现，但它在 Object 类中有一个本机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T18:36:50.010

语言外的对象创建机制（除了调用或链接构造函数之外的意思）是：

1.  克隆
2.  序列化
3.  反射
4.  字节码生成*

# solr - Solr 'join' 使用文本字段（来自另一个集合）

> ID：15299500
> 
> 赞同：3
> 
> 时间：2013-03-08T17:08:24.873
> 
> 标签：solr

对于一个快速的项目（不是家庭作业，我保证！），我有一个简单的 solr 安装，有两个核心，“人”和“工作”。每个都有一些结构化数据，还有一个文本字段。

我想使用 people.text 进行查询以查询到 jobs.text。

我找不到这样的例子，而且 SolrQuerySyntax 页面没有引用集合或核心。

没有使用真正的“加入”的字段。

可能吗？你能指点我一个例子/教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:17:03.733

Solr 连接可以跨内核执行。请参阅[此](https://stackoverflow.com/questions/12665797/is-solr-4-0-capable-of-using-join-for-multiple-core)StackOverflow 帖子以了解如何操作。

但除了那篇文章之外，还有一件事，[Solr-Wiki](http://wiki.apache.org/solr/Join)说：

> Solr 连接实际上并不是连接（在 SQL 术语中），而是一种内部查询方式。

考虑到您的情况，我假设两个核心（“人员”和“工作”）有一个共同的字段，您可以在该字段上执行“加入”操作。让我们称之为“id”。

通过 Solr Join，您将能够获得包含“人员”或“工作”字段的结果文档，但不能合并来自两个核心的字段。

因此，它实际上是一个

*   内部查询

> **从 people.id = jobs.id 的人员中选择 peopleField1、peopleField2**
> 
> 或者
> 
> **从 people.id = jobs.id 的人员中选择 jobField1、jobField2**

而不是一个

*   加入

> **从人员中选择peopleField1，peopleField2，jobField1，jobField2，加入其中people.id = jobs.id**

# .net - .NET 中的正则表达式组匹配

> ID：15299504
> 
> 赞同：1
> 
> 时间：2013-03-08T17:08:55.333
> 
> 标签：.net, regex

我有这个字符串：

```
of cabbages and kings and more kings 
```

我想根据这个标准进行匹配：

```
- Any instance of "king"
- Any instances of "cab" OR "goat"
- No instances of "bill" 
```

此正则表达式适用于 IsMatch()：

```
^(?=.*?(king))(?=.*?(cab|goat))(?=.*?(bill)) 
```

但它只返回 1 个长度为 0 的组。有没有办法让它返回匹配的组，以便我们可以在之后阅读匹配的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:23:29.350

因为您的模式只使用环视，它只会**检查**模式，但永远不会包含匹配的模式，**除了** *环视中的任何组*..

如果要捕获完整的字符串，请使用`Match`具有给定模式的方法

```
^(?=.*king)(?=.*(?:cab|goat))(?=.*bill).*$ 
```

如果匹配模式，这个正则表达式将匹配**组 0**中的完整字符串。

# android - 我想更改操作栏图标大小

> ID：15299508
> 
> 赞同：23
> 
> 时间：2013-03-08T17:09:15.043
> 
> 标签：android

我尝试使用此代码

```
<item
        android:id="@+id/male_button"
        android:layout_width="46dp"
        android:layout_height="56dp"
        android:layout_gravity="right"
        android:icon="@drawable/icon_male"
        android:showAsAction="always"
        android:title="i"/>
    <item
        android:id="@+id/female_button"
        android:layout_width="46dp"
        android:layout_height="56dp"
        android:layout_gravity="right"
        android:icon="@drawable/icon_female"
        android:showAsAction="always"
        android:title="i"/> 
```

我将 android:layout_width="46dp" 更改为 android:layout_width="30dp" 但我仍然具有所需图像的相同大小

![在此处输入图像描述](../Images/46872a240dda325d2230b40587e17cc1.png)

我现在有了这个

![在此处输入图像描述](../Images/2ef2a1790e22c893d40bfa2eb8b094d6.png)

如何将图标更改为第一张图片？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-18T18:31:17.273

要减少动作图标之间的空间，您需要在您的 styles.xml 中创建一个 actionButtonStyle 并将其引用为您的主题（例如：“AppTheme”）。

第一步（放两句）：

```
<style name="AppTheme" parent="Theme.AppCompat.Light">
  ...
  <item name="android:actionButtonStyle">@style/myActionButtonStyle</item>
  <item name="actionButtonStyle">@style/myActionButtonStyle</item>
  ...
</style> 
```

第二步（参数“android:width”是大秘密）：

```
<style name="myActionButtonStyle" parent="Widget.AppCompat.ActionButton">
    <item name="android:minWidth">30dp</item>
    <item name="android:maxWidth">48dp</item>
    <item name="android:width">38dp</item>
</style> 
```

好好享受

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-23T14:55:19.923

```
private String[] tabnames;
final int[] ICONS = new int[] {
        R.drawable.a,
        R.drawable.b,
        R.drawable.c,}
tabnames = getResources().getStringArray(R.array.tabnames); 
```

这些是此处以及可绘制名称和选项卡名称的 res/values/strings 中组成的数组

```
actionBar = getActionBar();
    for (int i=0; i < tabnames.length; i++)
    { 
```

每次我们得到一个标签名时，我们都会为它添加一个图标

```
 Drawable dr = getResources().getDrawable(ICONS[i]);
        Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
        Drawable d = new BitmapDrawable(getResources(), 
        Bitmap.createScaledBitmap(bitmap, 50, 50, true)); 
```

然后我们从数组中更改 get icon 并使其成为我们想要的任何大小的可绘制对象并将其添加到操作栏。

```
 actionBar.addTab(actionBar.newTab().setText(tabnames[i])
                             .setIcon(d)
                             .setTabListener(this));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T20:38:47.023

我已经通过将 png 文件移动到 drawable-xhdpi 文件夹来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-02T06:29:31.783

你可能会觉得我的解决方案有点奇怪。但它实际上对我有用，这就是我分享它的原因。

**无需更改样式属性，只需**使用一些编辑软件（如 Photoshop 或其他软件）增加图像的填充。

通过这样做，操作栏/工具栏图标大小会根据您的要求减小。

# java - 使用spring的jsp中不显示图像

> ID：15299516
> 
> 赞同：6
> 
> 时间：2013-03-08T17:09:51.920
> 
> 标签：java, jsp, url, maven, spring-mvc

我是 jsp 的新手，我基本上是想在我的 jsp 中显示图像

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
        <title>JSP-Page</title>
    </head>
    <body>
        <img src="images/top.jpg">
    </body>
</html> 
```

Spring-servlet xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- Enable annotation driven controllers, validation etc... -->
    <mvc:annotation-driven />
 <mvc:resources location="/images/" mapping="/images/**"/>

    <!-- Application controllers package -->
    <context:component-scan base-package="net.ignou.onlinetest.controller" />

    <bean id="viewoseesolver"
              class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
              destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url"
                          value="jdbc:mysql://localhost:3306/online_test" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="sessionFactory"
              class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.ignou.onlinetest.domain.Question</value>
                <value>net.ignou.onlinetest.domain.Student</value>
                <value>net.ignou.onlinetest.domain.Answer</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">none</prop>
            </props>
        </property>
    </bean>

    <bean id="multipartResolver"
              class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean>

    <bean id="questionDao" class="net.ignou.onlinetest.dao.daoImpl.QuestionDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <bean id="loginDao" class="net.ignou.onlinetest.dao.daoImpl.LoginDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="answerDao" class="net.ignou.onlinetest.dao.daoImpl.AnswerDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="service" class="net.ignou.onlinetest.service.serviceImpl.ServiceImpl">
        <property name="questionDao" ref="questionDao"/>
    </bean>

</beans> 
```

我的 web.xml

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Person Detail</display-name>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
<welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
   </web-app> 
```

我正在使用 maven。我的图像文件位于

online-test\src\main\webapp\images 我的jsp页面在

在线测试\src\main\webapp\web-inf\views

我也尝试替换src， `<img src="../../images/top.jpg">`但它没有用我也尝试将我的jsp和图像直接移动到webapp文件夹但没有用。有什么我做错了 spring 究竟如何处理 img 请求？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T17:17:21.900

您要做的是在您的 spring servlet-context xml 配置中添加这一行。

```
<mvc:resources mapping="/images/**" location="/images/" /> 
```

`mvc`xml 命名空间位于`xmlns:mvc="http://www.springframework.org/schema/mvc"`

该`resources`标签基本上告诉 Spring 通过从声明的位置提供命名文件来处理对声明映射的请求，而不是通过控制器堆栈。映射还可用于提供任何资源：css、js、pdf 等。

您不需要多个`<mvc:resources>`标签，只需要一个具有通用映射的标签，例如。/resources/**，以及以逗号分隔的位置列表，例如。/resources/css/、/resources/js/。

```
<mvc:resources mapping="/resources/**" location="/resources/images/, /resources/css/" /> 
```

该`<resources>`标签是在 spring 3.0.4 中引入的，因此您至少需要该版本的 Spring 和 xsd。您可以使用

```
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd` 
```

此外，正如 JB Nizet 所说，您应该将图像引用为

```
<img src="<c:url value='/images/top.jpg'/>"/> 
```

为相对路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T17:15:36.760

JSP 文件的位置与 URL 路径无关。重要的是您的浏览器显示的页面的位置，即浏览器地址栏中显示的页面地址。

因此，如果页面的地址是`/webapp/foo/bar/someAction.html`并且图像是 at `/webapp/images/top.jpg`，则路径应该是`/webapp/images/top.jpg`（绝对路径，更可取和更清晰）或`../../images/top.jpg`（相对路径，如果您移动文件或更改 URL，则更难重构）。

我的建议：始终使用绝对路径，并使用 JSTL 的 c:url 标签来避免硬编码 webapp 的上下文路径：

```
<img src="<c:url value='/images/top.jpg'/>"/> 
```

上述行将始终有效。

# javascript - 如何在 Javascript 中覆盖函数

> ID：15299519
> 
> 赞同：3
> 
> 时间：2013-03-08T17:10:02.483
> 
> 标签：javascript, jquery

我有以下脚本：

```
<script ... jquery-1.9.1.js"></script>
<script ... dataTables.js"></script>    
<script ... columnFilter.js"></script> 
```

columnFilter.js 中存在以下代码：

```
(function ($) {

   $.fn.columnFilter = function (options) {
       //some code...

       function _fnCreateCheckbox(oTable, aData) {
           //some code...
       }

   };

})(jQuery); 
```

我想做的是`function _fnCreateCheckbox(oTable, aData)`用我自己的代码覆盖。我对 javascript 相当陌生，所以会很感激一个例子。

我试过简单地抓取上面的代码并将其添加到它自己的`<script>`标签中，但这不起作用。它完全阻止了 columnFilter.js 的工作（我猜这是预期的）。不太确定还能尝试什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T17:12:20.390

```
function _fnCreateCheckbox(oTable, aData) { 
```

仅存在于创建它的范围内，因为它创建`(function ($) {`了一个函数范围。你必须在那里编辑它。您不能在函数之外覆盖它。

**编辑：在相关说明**

如果您对 JS 很狡猾，并且您只是有时试图让该函数执行其他操作，您可以将一些额外的变量传递给您的 columnFilter 插件/函数调用，并在该函数中处理它们以执行其他操作。我不知道什么是列过滤器，但让我们假装在这样的元素上调用它：

```
el.columnFilter({optionA: true, optionB: false}); 
```

如果您想根据您可以做的一些数据做其他事情，

```
el.columnFilter({optionA: true, optionB: false, extraOption: true}); 
```

然后在你的脚本中，取决于你的整个脚本做什么：

```
$.fn.columnFilter = function (options) {
   //some code...
   if(options.extraOption){
       function _fnCreateCheckbox(oTable, aData) {
           //some default code...
       }
   } else {
       function _fnCreateCheckbox(oTable, aData) {
           //my other code...
       }
   }
}; 
```

这是一个粗略的示例，但只是为了显示您的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:13:04.290

我想你`columnFilter.js`从一些外部来源导入文件。

一种选择是将`columnFilter.js`文件复制到项目目录，随意修改，然后**从项目目录中导入**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:15:11.920

您可以通过重新分配其原型来覆盖函数。但通常建议不要这样做。

```
var d = new Date();

alert(d.getFullYear()); // 2013

Date.prototype.getFullYear = function() { return "Full Year"; }

alert(d.getFullYear()); // "Full Year" 
```

[http://jsfiddle.net/js5YS/](http://jsfiddle.net/js5YS/)

# java - 如何按 _id 和另一列对 SQLite 数据进行排序

> ID：15299529
> 
> 赞同：0
> 
> 时间：2013-03-08T17:10:29.323
> 
> 标签：java, android, sqlite

我的游戏结果有这个数据库，我希望它按时间降序排序，但在左边我不想像图片中那样，我想从 1 到 20。怎么做？我将所有这些数据放在我的 xml 文件中的 TextView 中。

![截屏](../Images/7e7c4391b63d9d10c71e6caa878d010e.png)

这是我的数据库类：

```
public class OffDBHelper {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_SCORE = "score";

    private static final String DATABASE_NAME = "highscores";
    private static final String DATABASE_TABLE = "highscorestable";
    public static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " +
                    KEY_SCORE + " DOUBLE NOT NULL);"
                    );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);       
        }

    }

    public OffDBHelper(Context c){
        ourContext = c;
    }

    public OffDBHelper open() throws Exception{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }
    public void close(){
        ourHelper.close();
    }

    public long createEntry(String name, double score) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_SCORE, score);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getData() {
        String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_SCORE};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, "score DESC");
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iScore = c.getColumnIndex(KEY_SCORE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iScore) + "\n";
        }

        return result;

    }
} 
```

还有我的数据管理课：

```
TextView tv = (TextView) findViewById(R.id.tvSQLinfo);

        OffDBHelper info = new OffDBHelper(this);
        try {
            info.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
        String data = info.getData();
        info.close();
        tv.setText(data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:12:37.010

这就是你需要的

```
TableConstants.Reminders.COLUMN_ONE + " ASC, " + 
TableConstants.Reminders.COLUMN_ID + " DESC" 
```

在您的情况下，您需要修改

```
 Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, "_id ASC,  
    score DESC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:46:18.397

```
 public String getData() {
        String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_SCORE};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, KEY_ROWID +" ASC");// REPLACE WITH ASC AS WELL AS ALSO PUT DEASC FOR DSCEDING
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iScore = c.getColumnIndex(KEY_SCORE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iScore) + "\n";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T23:34:56.220

就我而言，这是查询功能错误：

```
Cursor c = db.query(SEARCH_TABLE_NAME, null, null, null, null, null, null, SEARCH_COUNT + " DESC"); 
```

安装：

```
Cursor c = db.query(SEARCH_TABLE_NAME, null, null, null, null, null, SEARCH_COUNT + " DESC"); 
```

1 arg 比我需要的多...

# c# - Visual Studio 创建属性而不是方法事件处理程序。为什么？

> ID：15299530
> 
> 赞同：1
> 
> 时间：2013-03-08T17:10:33.750
> 
> 标签：c#, visual-studio-2010, visual-studio-2012

我刚刚让 VS 为我生成了一个事件处理程序，它创建了一个属性而不是一个方法。我不明白。我刚刚在 VS 2012 中尝试了一个单独的测试，它按预期工作。

首先，这是我的测试，我认为它会起作用：

```
private static void EventTest()
{
    Geek skeet = new Geek();

    skeet.SomeEvent += skeet_SomeEvent;
} 
```

当我让 VS 为我生成处理程序时，它创建了这个。

```
static void skeet_SomeEvent(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

那讲得通。调用事件时将调用该方法。

现在，问题...我正在开发一个现有项目，在 VS 2010 中，当我做同样的事情时（让 VS 生成处理程序）：

```
private void SubscribeToPlcDataChangeEvents()
{
    _plc.PlcLoggerEventHandler += _plcLoggerEventHandler;
} 
```

它创建一个属性：

```
public EventHandler<PlcLoggerEventArgs> _plcLoggerEventHandler { get; set; } 
```

为什么？我不明白。我想在一个方法中处理事件。

**编辑 - 这是事件处理程序的声明方式：**

```
public event EventHandler<PlcLoggerEventArgs> PlcLoggerEventHandler; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:31:31.627

如果您点击`Tab`两次，您会注意到在事件处理程序的情况下它是“正确”生成的。

如果您在 Visual Studio 2010中使用“帮助绑定项目的选项”快捷方式`Alt`++ ，在这种情况下您的两个可能的操作是`Shift`：`F10`

*   在...中为“PlcLoggerEventHandler”生成属性存根
*   在...中为“PlcLoggerEventHandler”生成字段存根

因此，当您使用 this 时创建属性的事实似乎是设计使然，即使在事件处理程序的情况下它没有任何意义。

# php - 如何获取网站的所有 IP 地址？

> ID：15299531
> 
> 赞同：0
> 
> 时间：2013-03-08T17:10:34.800
> 
> 标签：php, networking, curl, hosting, monitoring

有没有办法让给定网站的所有 IP 地址？

CURL 能做到吗？可以在 PHP 中使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:16:06.800

使用[`dns_get_record`](http://php.net/manual/en/function.dns-get-record.php)，像这样：

```
$all_records = dns_get_record('example.com');
$ips = array();
foreach ($all_records as $r) {
    if ($r['type'] == 'A') {
        $ips[] = $r['ip'];
    }
    if ($r['type'] == 'AAAA') {
        $ips[] = $r['ipv6'];
    }
}
var_export($ips); 
```

[`gethostbynamel`](http://php.net/manual/en/function.gethostbynamel.php)如果您只对 IPv4 地址感兴趣，它还提供了一个简化的界面。

请注意，由于响应大小和地理偏好有限，您可能需要从多个位置多次询问此查询，以获取诸如 google.com 等常用域的所有（或大部分）地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:13:39.417

PHP为此提供了一个功能：[`gethostbynamel()`](http://www.php.net/manual/en/function.gethostbynamel.php)

该函数执行 DNS 查询并返回结果 IP

例子：

```
var_dump(gethostbynamel('google.com')); 
```

输出

```
array(6) {
  [0] =>
  string(14) "173.194.70.139"
  [1] =>
  string(14) "173.194.70.113"
  [2] =>
  string(14) "173.194.70.100"
  [3] =>
  string(14) "173.194.70.138"
  [4] =>
  string(14) "173.194.70.102"
  [5] =>
  string(14) "173.194.70.101"
} 
```

* * *

@MEznati 关于负载平衡：

负载均衡有多种方式。例如，谷歌使用基于 DNS 的负载平衡，这就是我以它为例的原因。如果正在使用某种形式的内部负载平衡 - 这意味着负载平衡器有 1 个外部 IP 并将请求重定向到内部服务器 - 您将无法获得这些内部（私有）IP（这是设计使然）。

# wcf - 附加到 WCF 进程，但断点不会被击中

> ID：15299539
> 
> 赞同：0
> 
> 时间：2013-03-08T17:10:46.563
> 
> 标签：wcf, debugging, iis, process

我已成功附加到 WCF 进程进行调试，但我的 VS2010 说断点所在的位置没有可执行代码。它说可能的原因是编译器优化或条件编译。

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:04:16.080

默认情况下，将项目设置为`Release`将优化代码，而`Debug`-mode 默认情况下未优化。然而，这可以通过`Optimize code`在属性页中将复选框设置为 true 来更改。右键单击项目并选择“属性”，然后转到“构建”选项卡，在“常规”部分下应该有选择/取消选择的选项`Optimize code`。

当您发布项目并希望使其“可调试”时，您还应该在服务器上包含 pdb 文件。当在 IIS 中为网站启用调试时，这将基本上支持调试 WCF 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:10:01.197

这发生在我身上很多次。在这里，您有很多事情要做：

*   重新编译你的代码。
*   仔细检查 IIS 配置（基本设置/物理路径）以确保它指向您的代码。
*   确保 *.pdb 文件在那里。
*   确保尽快将断点放在第一行。

# javascript - javascript重新加载

> ID：15299540
> 
> 赞同：-1
> 
> 时间：2013-03-08T17:10:52.087
> 
> 标签：javascript, greasemonkey

我正在使用一个经常令人讨厌地刷新其内容的网站。我怎么能防止使用javascript的greasemonkey firefox插件呢？

* * *

编辑：

*   我确实无法更改服务器的源代码。

*   我所说的网站确实是一个新闻网站。这是一个这样的例子： http: [//www.lemonde.fr/ameriques/article/2013/03/08/aux-etats-unis-le-cout-social-dramatique-des-coupes-budgetaires_1845220_3222.html](http://www.lemonde.fr/ameriques/article/2013/03/08/aux-etats-unis-le-cout-social-dramatique-des-coupes-budgetaires_1845220_3222.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:18:26.170

这可能有点野蛮，但是如果您可以访问源代码，请`location`在 javascript 中查找任何实例，然后使用`//`.

就像是

```
location.reload(); 
```

因此变成

```
//location.reload(); 
```

* * *

这不太可能，但刷新也可能在`HTML`. 所以要注意这个：

```
<meta http-equiv="refresh" content="30"> 
```

如果你*碰巧*`<!--`发现了，你可以删除该行，或者用和注释掉它`-->`

```
<!-- <meta http-equiv="refresh" content="30"> --> 
```

请注意，这可能会阻止页面更新并导致用户需要不时手动刷新才能查看新内容。

如果您希望页面在不重新加载页面的情况下刷新其内容，您*可以*找一位在 AJAX 方面经验丰富的开发人员将其转换为异步 web 应用程序，这样就无需刷新，但这是一个完整的“另一个讨论”。

* * *

希望这可以帮助

* * *

**编辑**

我浏览了该站点，在元素中，我发现了一个标签，它会导致每毫秒（或 900 秒？）`<meta>`刷新一次。`900`

在铬：

*   按 F12

*   转到最左侧的选项卡 ( `elements`)

*   按`Ctrl`+`F`

*   类型`refresh`

*   打`Enter`

*   右键单击突出显示的节点

*   点击`Delete Node`

这将在当前加载的页面副本的生命周期内停止页面刷新。如果您刷新或导航到网站上的另一个页面，您必须冲洗并重复，但至少它会阻止它刷新。

# ruby - Savon 2.1.0 基本身份验证不起作用

> ID：15299541
> 
> 赞同：4
> 
> 时间：2013-03-08T17:10:52.730
> 
> 标签：ruby, soap, wsdl, savon

我正在尝试访问具有以下特征的 SOAP 服务： 1\. WSDL 无需身份验证即可使用 2\. 该服务可通过带有 basic_auth 的 https 访问 3\. 根据 SOAP 服务，“授权”标头需要包含在每个要求

这是我构建soap客户端的代码：

```
@wsdl="https://example.com/table.do&WSDL"
@proxy="http://internal.proxy.com:8080"
@basic_auth=["user","pass"]
@headers={"Authorization" => "Basic"}
client = Savon.client do |globals|
  globals.wsdl @wsdl
  globals.proxy @proxy
  globals.basic_auth @basic_auth
  globals.headers @headers
end 
```

这是client.globals.inspect：

```
#<Savon::GlobalOptions:0x0000000382c7a8 @options={:encoding=>"UTF-8", 
:soap_version=>1, :namespaces=>{}, :logger=>#<Logger:0x0000000382c730 @progname=nil,
@level=0, @default_formatter=#<Logger::Formatter:0x0000000382c708 
@datetime_format=nil>, 
@formatter=nil, @logdev=#<Logger::LogDevice:0x0000000382c6b8 @shift_size=nil, 
@shift_age=nil, @filename=nil, @dev=#<IO:<STDOUT>>,
 @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000382c690 @mon_owner=nil, 
@mon_count=0, @mon_mutex=#<Mutex:0x0000000382c640>>>>, :log=>true, :filters=>[], 
:pretty_print_xml=>false, :raise_errors=>true, :strip_namespaces=>true, 
:convert_response_tags_to=>#<Proc:0x0000000382c5c8@/usr/local/rvm/gems/ruby-2.0.0-p0/gems/savon-2.1.0/lib/savon/options.rb:48 (lambda)>, 
:wsdl=>"https://example.com/table.do&WSDL", 
:proxy=>"http://internal.proxy.com:8080", 
:basic_auth=>["user", "pass"], 
:headers=>{"Authorization"=>"Basic"}}> 
```

当我打电话时：

```
client.call(:get, message: { sys_id: "67d2f77ed9377840c53fc6da9c094635" }) 
```

服务正在返回：

```
DEBUG -- : HTTPI GET request to xseaddev.service-now.com (net_http)
INFO -- : SOAP request: https://xseaddev.service-now.com/change_task_list.do?displayvalue=all&SOAP
INFO -- : SOAPAction: "http://www.service-now.com/change_task/get", Content-Type: text/xml;charset=UTF-8, Content-Length: 408
DEBUG -- : <?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="http://www.service-now.com" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ins0="http://www.service-now.com/change_task"><env:Body><ins0:get><tns:sysId>67d2f77ed9377840c53fc6da9c094635</tns:sysId></ins0:get></env:Body></env:Envelope>
DEBUG -- : HTTPI POST request to xseaddev.service-now.com (net_http)
INFO -- : SOAP response (status 401) 
```

我是否错误地构建了客户端？我没有看到在 GET 或 PoST 请求上发送任何身份验证标头。我需要添加/删除任何东西才能让它工作吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-06T13:33:28.863

我想你应该能够做到以下几点：

```
client = Savon.client(endpoint: ENDPOINT, namespace: NAMESPACE, basic_auth: ["user", "password"]) 
```

（或以块形式相同）。

在“身份验证”标题下查看此页面：http: [//savonrb.com/version2/globals.html](http://savonrb.com/version2/globals.html)

（我也在做同样的事情，但是使用了 WSDL）。

# powershell - 如何将二进制 Stream 对象写入 PowerShell 中的文件？

> ID：15299544
> 
> 赞同：1
> 
> 时间：2013-03-08T17:11:05.393
> 
> 标签：powershell

我想我已经尝试了所有错误的方法，并且那些不只是给出丑陋错误消息的少数编写了一个无法打开的乱码文件（您仍然可以在其中看到 JFIF，但 jpeg 魔术烟雾已经丢失）。

流本身是 $contactInfo.Get_Item("Photo")。我想我需要做这样的事情：

```
$br = new-object System.IO.BinaryReader $contactInfo.Get_Item("Photo") 
```

但过去，我不知道该怎么办。我试过谷歌搜索，但说实话，我什至不确定我在寻找什么。

Stream 对象的类型是 Microsoft.Lync.Model.UCStream。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:14:06.067

我无权访问这种特定类型（UCStream），但通常你会在 PowerShell 中这样写：

```
$br = new-object io.binaryreader $contactInfo.Get_Item("Photo")
$al = new-object collections.generic.list[byte]
while (($i = $br.Read()) != -1)
{
    $al.Add($i)
}

Set-Content photo.jpeg $al.ToArray() -enc byte 
```

# php - 在动作调用之间发送变量

> ID：15299545
> 
> 赞同：0
> 
> 时间：2013-03-08T17:11:07.513
> 
> 标签：php, wordpress

我有两个动作：

```
add_action('init', 'activate');
add_action('wp_footer', 'code'); 
```

`activate`需要设置 cookie 并在一个名为的变量中生成一些 html 代码`$html`

`code`然后只需将该代码`wp_footer`与其他 html 代码一起输出即可。我注意到即使首先调用了 init 并且变量应该用正确的代码填充，它`$html`也是空的。`code`调用`global $html`没有帮助，变量仍然是空的。如何更改它，以便在被调用且不为空`$html`时具有正确的内容？`code`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:53:19.850

全局定义变量 $html 对我有用，例如`global $html;`

# c++ - 运算符重载 = 和 []

> ID：15299546
> 
> 赞同：0
> 
> 时间：2013-03-08T17:11:08.783
> 
> 标签：c++, oop, syntax-error

现在，我必须写

```
st[1];
st = 5; 
```

我必须在我的代码中进行哪些更改才能执行此操作：

```
st[1] = 5; 
```

* * *

```
#include <iostream>
using namespace std;
class A
{
public:
  A(){this->z = 0;}
  void operator = (int t)  { this->x[this->z] = t+10; }
  int& operator [] (int t) { this->z=t; return this->x[t]; }
private:
  int x[2];
  int z;
};
void main()
{
  A st;
  st[0]=9;
  cout<<st[0]; 
  system("pause");
} 
```

**UPD：**现在我看到的是 9 而不是 19。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:14:02.033

内置运算符`=`需要一个*左值*作为其左手操作数。因此，为了编译此语句：

```
st[1] = 5; 
```

`operator []`您需要将from的返回类型更改`int`为`int&`：

```
 int& operator [] (int t) { return this->x[t]; }
//  ^^^^ 
```

您还可以提供一个重载，如果调用的对象是`const`，它将返回一个引用：`const``operator []``const`

```
 int const& operator [] (int t) const { return this->x[t]; }
//  ^^^^^^^^^^                     ^^^^^ 
```

# php - php pdostament 获取问题

> ID：15299549
> 
> 赞同：0
> 
> 时间：2013-03-08T17:11:13.243
> 
> 标签：php, pdo, pdostatement

我有一个数据库，它有两条记录用于测试目的......数据库列（user_id、用户名、密码和角色）......

我正在使用 PHP PDO 与数据库通信我创建了一个扩展 PDO 的类文件，如下所示

```
<?php
    require_once('constants.php');
    class PDOConfig extends PDO{

        private $real_escape_string;
        private $mageic_quote_active;

        public function __construct(){
            $dsn = DBENGINE .':dbname='. DBNAME.";host=".DBHOST; 
            parent::__construct($dsn, DBUSER, DBPW);
            $mageic_quote_active = get_magic_quotes_gpc();
            $real_escape_string = function_exists("mysql_real_escape_string");
        }

        public function escapeValue($value){
            //PHP >= 4.3.0 or greater
            if($this->real_escape_string){
                if($this->mageic_quote_active){
                    //if new version exists turn magic quotes off
                    $value = stripslashes($value);
                }
                $value = mysql_real_escape_string($value);
            }
            return $value;
        }

    }//end of class

    $connection = new PDOConfig();
    $database =& $connection; 
```

我在我的登录页面上使用这个文件，它有以下代码

```
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sign In</title>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/singin-form.css">

        <?php require_once('includes/PDOConfig-class.php'); ?>
        <?php //require_once('includes/utility-functions.php'); ?>
        <?php
            $errors = "";
            if(isset($_POST['submit'])){

                $username = trim($_POST['username']);
                $password = trim($_POST['password']);

                if(!empty($username) && !empty($password)){
                    $sql = "SELECT * FROM user WHERE user_name = '" . $database->escapeValue($username) . "'";
                    $prestmt = $database->prepare($sql);
                    $prestmt->execute();
                    $result = $prestmt->fetch($database::FETCH_ASSOC);
                    //print_r($result);
                    echo $result['role'];

                    echo "<br /> Query :  " . $sql;
                }
                //echo '<div class="alert alert-error">something wrong<button type="button" class="close" data-dismiss="alert">&times;</button></div>';
            }

        ?>

    </head>
    <body>

        <div class="container">

            <form class="form-signin" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">
                <h2>Please sign in</h2>
                <input type="text" name="username" class="input-block-level" placeholder="User Name" />
                <input type="password" name="password" class="input-block-level" placeholder="Password" />
                <button name="submit" class="btn btn-primary btn-large" type="submit">Login</button>
            </form>
        </div>

    </body>
</html> 
```

## 但是除了我打印的查询之外，我在页面上看不到任何内容...尽管数据库中有数据...

当我尝试使用“FETCH_OBJ”时，另一件事我得到以下错误

```
trying to get property of non-object in C:\wamp\www\testPHP\login.php on line 30 
```

产生上述错误的代码如下

```
if(!empty($username) && !empty($password)){
    $sql = "SELECT * FROM user WHERE user_name = '" . $database->escapeValue($username) . "'";
    $prestmt = $database->prepare($sql);
    $prestmt->execute();
    $result = $prestmt->fetch($database::FETCH_OBJ);
    echo $result->role;
} 
```

请帮忙，因为我从来没有使用过 PHP PDO，而且在 php 中不是很好......谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:19:27.530

[此链接](https://stackoverflow.com/tags/pdo/info)包含您需要的一切

*   以那里描述的方式连接到 db（使 PDO 通知您错误）
*   以那里描述的方式将变量分配给查询（以使您的查询安全且合理）
*   摆脱您的 PDOConfig，因为它完全没用。您只需要从那里构造函数，因此，您可以将构造函数代码本身放入 PDOConfig-class.php

然后运行你的代码，看看出了什么问题

# java - ConcurrentLinkedHashMap 已经集成到 Guava 中是什么意思？

> ID：15299554
> 
> 赞同：12
> 
> 时间：2013-03-08T17:11:27.063
> 
> 标签：java, caching, guava

[我们在一个项目中使用来自https://code.google.com/p/concurrentlinkedhashmap/](https://code.google.com/p/concurrentlinkedhashmap/)的ConcurrentLinkedHashMap ，我看到一个注释，它在 2010 年被集成到 Guava 的 MapMaker 和 CacheBuilder 中。信息非常简短：

*将算法技术集成到 MapMaker 中将在 Google Guava r08 中发布，并且很大程度上基于此版本。*

究竟是什么意思？

*   concurrentlinkedhashmap 项目似乎仍然处于活动状态。
*   引导 Guava 缓存包是否只是一次性集成？
*   自 2010 年以来，这两个项目是否独立发展？
*   如果是这样，今天它们之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-08T23:42:43.817

> What does it mean exactly?

Guava is the long term replacement and most of the time you should use it. The history is that ConcurrentLinkedHashMap figured out the algorithms, Guava subsumed it, and then focused on adding features.

> The concurrentlinkedhashmap project seems to be still active.

It has always been a weekend project, so active means that I have a scratch to itch or responded to a change request. It is also easier to experiment in CLHM than Guava, so I tended to prove out ideas there prior us porting them over. My involvement with Guava was as a 20%-er.

> Was it just a one time integration to bootstrap the Guava cache package?

Yes. We first overhauled MapMaker and then split out caching into a dedicated API. It is a one-way migration of ideas and improvements into Guava.

> Have the two projects evolved independently since 2010?

Both have stayed dedicated to their goals. The motivation behind ConcurrentLinkedHashMap was to figure out how to write a truly concurrent cache without taking shortcuts. The goal behind Guava is to provide a feature rich library with a beautiful API and solid implementation for broad usage.

> What are the main differences between them today?

Guava is packed with features and has a full time team at Google supporting it. Use it!

ConcurrentLinkedHashMap has higher absolute concurrency by decorating, instead of forking, ConcurrentHashMap. This allows it to be used with [ConcurrentHashMapV8](http://gee.cs.oswego.edu/cgi-bin/viewcvs.cgi/jsr166/src/jsr166e/ConcurrentHashMapV8.java), which is based on a new algorithm. CLHM does not relying on segment locks, which improves write performance and allows for maintaining a single LRU chain. I have an experimental branch with the LIRS policy that I hope to someday finish.

The long term hope is that Doug Lea will one day write a cache inspired by our work and teach us a few things in the process.

* * *

Update (3/15): [Caffeine](https://github.com/ben-manes/caffeine) is a Java 8 rewrite of Guava's cache. It tries to provide the best of ConcurrentLinkedHashMap and Guava, modernized with Java 8, and adopting the techniques that I've learned since those previous projects.

# excel - 转到列表框中的选定项目

> ID：15299559
> 
> 赞同：1
> 
> 时间：2013-03-08T17:11:39.273
> 
> 标签：excel, vba

我有一个列表框，其中填充了各种数据以及数据所在的行号，如下所示：

2012 年 3 月 31 日至 2012 年 4 月 15 日 [商品 A]，行：12009

在命令按钮上，我需要编写代码，单击该代码会将用户带到特定的行。列始终固定在第 2 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:28:01.657

如果在列表框中选择了某些内容，它将在冒号 (:) 之后找到值并选择该行号的第 2 列：

```
Private Sub CommandButton1_Click()
    Dim selectedItem As String
    If ListBox1.ListIndex <> -1 Then
        selectedItem = ListBox1.List(ListBox1.ListIndex)
        Cells(CInt(Mid(selectedItem, InStrRev(selectedItem, ":") + 1)), 2).Activate
    End If
End Sub 
```

# python - 浮雕比 - 帮助在“多边形 zm”中找到离流出点最远的点

> ID：15299560
> 
> 赞同：2
> 
> 时间：2013-03-08T17:11:40.617
> 
> 标签：python, python-2.7, geospatial, spyder

我在这里尝试做一些不同的事情..

首先，我在 shapefile 中有一组来自分水岭多边形“形状”字段的值。

```
Rarray = watershed.shape.getPart(0) 
```

我假设流出点将是具有最低 ZMin 的值。因此，ZMin 坐标将是流出点 (p1)。

我正在尝试做的是在多边形数组中找到离这个 x,y,z 流出点最远的点 (p2)。它应该是数组中的值之一

从那里，我试图计算 p1（流出）和 p2（最远）之间的距离，以便我可以使用该值使用此公式计算流域的浮雕率

```
ReliefRat = (max elevation - min elevation) / Length of longest axis 
```

到目前为止，我有这个...

```
Rarray = watershed.shape.getPart(0)
ReliefRat = (ZMax-ZMin)/(((p2.X-p1.X)**(2.0)) + ((p2.Y-p1.Y)**(2.0)))**(0.5) 
```

...其中 p1 是流出点。我只是不知道如何找到p2。

如果有人可以指导我完成此操作，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:33:50.513

似乎这`p1`应该是流出点，但你仍然必须以某种方式确定是什么`p2`，这是你的分水岭多边形中离`p1`.

要找到`p2`，我假设您知道作为分水岭多边形顶点的点。尝试列出它们，我将其称为`poly`. 您想在多边形边界上找到离流出点最远的点，`p1`：

```
import numpy as np
poly = np.array([(1.1,5.3),(1.5,2.3),(2.1,3.2),(4.3,4.4)]) # vertices of a polygon
p1 = np.array((1.2,3.5))     # outflow point
ds = map(norm,p1 - poly)     # list of distances between p1 and each vertex of polygon
d_max = max(ds)              # max of those distances
ReliefRat = (ZMax-ZMin)/d_max 
```

如果您已经知道，您可以很容易地找到和`p2`之间的距离。为了更好的可读性，我建议使用from 函数，或者自己编写：`p1``p2``norm``numpy`

```
from numpy import norm
ReliefRat = (ZMax-ZMin)/norm((p2.X-p1.X,p2.Y-p1.Y)) 
```

根据格式化方式`p1`和`p2`格式（例如，作为 numpy 数组），这可以写成：

```
ReliefRat = (ZMax-ZMin)/norm(p2 - p1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:29:06.463

如果`p1`确实是一个包含流出点的 x,y 值的对象`ZMin`，并且如果`p2`包含 x,y 的`ZMax`最远点，则表达式

```
(((p2.X-p1.X)**(2.0)) + ((p2.Y-p1.Y)**(2.0)))**(0.5) 
```

确实是两点之间的距离。这只是[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)的一个表达式，因为两点 p1 和 p2 之间的直线是底边为 p2.X-p1.X 且高度为 p2.Y-p1.Y 的直角三角形的斜边。请注意，请参阅“<a href="https://stackoverflow.com/questions/327002">哪个在 Python 中更快：x**.5 或 math.sqrt(x)？” 如果对计算平方根的几种方法感兴趣。

如果您尚未定义具有 X 和 Y 属性的点对象类，请单独询问或修改问题，同样如果您不知道如何在距其他点最远的多边形上找到点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:51:00.073

不确定我是否理解有关流域地形等的概念，但感觉这是关于寻找点之间的距离。
我发现为此目的使用复数很方便。Python 对它有默认支持。我了解您在 ax,y 坐标系中有一个点（最低点）和多个节点：

```
>>> # Lowest point:
... z0 = complex(5, 8)
>>> # A few nodes:
... z1 = complex(5, 10)
>>> z2 = complex(-2, 15)
>>> abs(z1 - z0)
2.0
>>> # Abs give a scalar so order is not important:
... abs(z0 - z1)
2.0
>>> abs(z2 - z0)
9.8994949366116654
>>> # The vector between lowest point z0 and node z2 was the longest axis 
```

通过执行 z0.real 和 z0.imag 您分别提取 x 和 y 值。 ![在此处输入图像描述](../Images/d7f9d02e4af54487705d4d1007ec7f4c.png)

如果像这样的很多节点都塞在一个列表中，那将是迭代和搜索最大差异的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:33:48.227

## 寻找 p2

如果您还有 z 坐标作为高程，则问题可能是几何问题。查找 3d 空间中两点之间的直线距离需要 z 分量。假设你有一些这样的帮助代码：

```
class P():
    """A point in 3d space."""
    def __init__(self, x = 0.0, y = 0.0, z = 0.0):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)

    def __str__(self):
        return str(self.x) + ', ' + str(self.y) + ', ' + str(self.z)

    def __repr__(self):
        return str(self.x) + ', ' + str(self.y) + ', ' + str(self.z)

def dist(p0, p1):
    """Return the straight distance in 3d space between point p0 and p1
    as an absolute value."""
    x0, y0, z0 = p0.x, p0.y, p0.z
    x1, y1, z1 = p1.x, p1.y, p1.z

    return ((x1 - x0)**2 + (y1 - y0)**2 + (z1 - z0)**2)**(1 / 2.0) 
```

然后我在空间中提出一些观点：

```
>>> p1 = P(5, 5, -3) # Outflow point
>>> p2 = P(40, -20, 45)
>>> p3 = P(-5, 30, 40)
>>> p4 = P(-2, 25, 22)
>>> arr = [p2, p3, p4] # An array (list) of 3d points.
>>> p2find = p1 # For the search.

>>> for point in arr:
...    if dist(p1, point) > dist(p1, p2find):
...       p2find = point
... 
>>> p2find
40.0, -20.0, 45.0
>>> p2
40.0, -20.0, 45.0 
```

所以应该找到最远的点p2。

# django - Django 从 URL 调度程序返回字符串

> ID：15299564
> 
> 赞同：6
> 
> 时间：2013-03-08T17:11:53.117
> 
> 标签：django

有没有办法从裸 django 项目返回“hello world”字符串（不创建应用程序和views.py）？

像这样的东西：

```
urlpatterns = patterns('',
    url(r'^$', plaint_text_module, 'Hello World!'),
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T17:14:37.203

您可以添加内联 lambda（或查看可调用对象）：

```
from django.http import HttpResponse

urlpatterns = patterns('',
    url(r'^$', lambda request: HttpResponse('Hello World!'), name='hello_world'),
) 
```

# arrays - SQL语句中的文字数组？

> ID：15299565
> 
> 赞同：0
> 
> 时间：2013-03-08T17:11:54.913
> 
> 标签：arrays, literals

我确信必须有一个非常简单的方法来做到这一点，但我不知道如何，并且搜索没有产生解决方案。这是我想做的，但这是非法的：

```
update test_table set q_name = {'SKELETAL','LEWIS','MECHANISM', ...}[q_type]; 
```

也就是说，`q_type`有一个整数值，我想填充`q_name`一个字符串值，该值取决于`q_type`. 我可以为 的每个值使用单独的 set 语句来完成`q_type`，但我宁愿通过一次调用来完成。任何想法如何在不进入 PL/SQL 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:14:42.770

我将处理的方式是使用 xml 数据类型并填充该 xml 变量，然后从中更新表。

这是关于[xml 数据类型的参考](http://docs.oracle.com/cd/A97630_01/appdev.920/a96616/arxml24.htm)

# php - PHPUnit & Selenium - 如何让驱动程序被测试使用？

> ID：15299570
> 
> 赞同：2
> 
> 时间：2013-03-08T17:12:16.903
> 
> 标签：php, selenium, phpunit, driver

我的一般测试设置如下所示：

```
class MySeleniumTest extends PHPUnit_Extensions_SeleniumTestCase{

    public static $browsers = array(
        array(
            'name'    => 'Mozilla - Firefox',
            'browser' => '*firefox',
            'host'    => 'localhost',
            'port'    => 4444,
            'timeout' => 30000,
        ),
        array(
            'name'    => 'Google - Chrome',
            'browser' => '*googlechrome',
            'host'    => 'localhost',
            'port'    => 4444,
            'timeout' => 30000,
        )
    );

    //etc
} 
```

从这里开始，一个单独的测试文件看起来像：

```
class MyTest extends MySeleniumTest{
    public function setUp(){
        parent::setUp();
        $this->setUser(1);
    }

    public function testPageTitle(){
        //Login and open the test page.
        $this->login(8);
        $this->open('/test/page');
        //Check the title.
        $this->assertTitle('Test Page');
    }
} 
```

从这里开始，当我`MyTest.php`使用 PHPUnit 运行时，PHPUnit 将自动运行`MyTest.php`. 此外，它在每个指定的浏览器上单独运行每个测试。我想要做的是从该测试用例中获取有关运行特定测试用例的驱动程序的信息。所以像：

```
public function testPageTitle(){
    //Login and open the test page.
    $this->login(8);
    $this->open('/test/page');
    //Check the title.
    $this->assertTitle('Test Page');

    $driver = $this->getDriver();
    print($driver['browser']); //or something.
} 
```

然而，这不起作用。并且`$this->getDrivers()`只是在测试中添加更多驱动程序，并且只假设由设置使用。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:16:08.720

即使`$this->drivers`是一个数组，它也总是只有一个元素。你可以[在这里查看](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/SeleniumTestCase.php)。因此 `$this->drivers[0]`包含有关当前正在运行的浏览器的信息，您可以使用它`$this->drivers[0]->getBrowser()`来输出浏览器名称。

例子：

```
require_once 'MySeleniumTest.php';

class MyTest extends MySeleniumTest{
    public function setUp(){
        parent::setUp();
        $this->setBrowserUrl('http://www.google.com/');
    }

    public function testPageTitle(){
        $this->open('http://google.com');

        echo "{$this->drivers[0]->getBrowser()}\n";
    }
} 
```

输出：

```
PHPUnit 3.7.18 by Sebastian Bergmann.

.*firefox
.*googlechrome

Time: 7 seconds, Memory: 3.50Mb

OK (2 tests, 0 assertions) 
```

# javascript - 加载外部网址时出现Phonegap错误？

> ID：15299575
> 
> 赞同：0
> 
> 时间：2013-03-08T17:12:31.443
> 
> 标签：javascript, html, ios, cordova

我正在尝试在我的 iOS phonegap 应用程序上加载一个外部 url。

我在我的***index.html***上使用它：

```
<!DOCTYPE html>
<html>
    <head>
        <title>window.open Example</title>

        <script src="cordova-2.1.0.js"></script>
        <script src="js/plugins/PushNotification.js"></script>
        <script type="text/javascript" charset="utf-8">

            // Wait for Cordova to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            //
            function onDeviceReady() {
                // external url
                var ref = window.open(encodeURI('http://apache.org'), '_blank', 'location=yes');
                // relative document
                ref = window.open('next.html', '_self');
            }

            </script>
    </head>
    <body>
    </body>
</html> 
```

但是我得到了错误：

```
Failed to load webpage with error: The requested URL was not found on this server. 
```

** 我确实将`OpenAllWhitelistURLsInWebView`cordoba.plist 中的设置为yes。

任何的想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:31:18.647

您的 www 文件夹中有 next.html 吗？您的代码正在尝试加载 apache.org 并且不等待它加载，它正在尝试加载 next.html。如果 www 文件夹中不存在 next.html，则会出现此错误。

# javascript - 被这个 Javascript 简写弄糊涂了

> ID：15299576
> 
> 赞同：0
> 
> 时间：2013-03-08T17:12:32.487
> 
> 标签：javascript, d3.js

我不明白这个速记是如何工作的：

```
nodes.forEach(function(o, i) {
    o.y += i & 1 ? k : -k;
    o.x += i & 2 ? k : -k;
}); 
```

我从未见过这样的简写增量运算符。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:19:49.887

表达式的`i & 1 ? k : -k`计算结果为`k`或`-k`取决于是否`i & 1`计算结果`true`。

运算符在`&`运算符之间执行按位“与”，因此第一个条件检查是否设置了最低有效位，第二个条件检查是否设置了第二个最低有效位。

代码与以下内容相同：

```
nodes.forEach(function(o, i) {
  if (i & 1) {
    o.y += k;
  } else {
    o.y -= k;
  }
  if (i & 2) {
    o.x += k;
  } else {
    o.x -= k;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:13:41.413

`1`是`0000...0001`

`2`是`0000...0010`

`i`可能将一组标志设置为 int 上的位。

`i & 1`只需测试最后一位是否设置并`i & 2`测试前一位是否已设置。请参阅[MDN 上的按位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。

您可以使用此系统在一个 javascript 编号中存储大约 52 个标志：

```
i = 0; // no flag
i |= 4; // sets a flag
i |= 1<<2; // sets the same flag but is more readable
var bool = i & 4; // truish if the flag is set 
```

所以你的代码这样做：

```
if i has flag 1 then o.y += k else o.y += -k
if i has flag 2 then o.x += k else o.x += -k 
```

# regex - unix 命令行中的复杂查找和替换

> ID：15299580
> 
> 赞同：0
> 
> 时间：2013-03-08T17:12:47.393
> 
> 标签：regex, perl, unix, command-line, command

我正在尝试通过 unix 命令行使用[find and replace in multiple files on command line 中](https://stackoverflow.com/questions/1895819/find-and-replace-in-multiple-files-on-command-line)提供的答案在所有文件中进行复杂的查找和替换，但我似乎无法正确转义我的查找和替换字符串。

我需要找到所有包含以下内容的行：

```
if ($session['test']>0){ 
```

并将其替换为

```
if ($session['test']>1){ 
```

我正在尝试的命令是：

```
find . -name '*.php' |xargs perl -pi -e 's/if\(\$session\[\'test\'\]\>0\){/if\(\$session\[\'test\'\]\>1\){/g' 
```

但这给了我另一个提示，要求我输入一个额外的`'`字符，因为该命令告诉我有一个缺少终止符的字符串。如果我把它放在`'`最后，我得到：

```
Unmatched ) in regex; marked by <-- HERE in m/if\(\$session\[\test']>0) <-- HERE {/ at -e line 1. 
```

我如何让这个替代品工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:16:01.217

只需使用双引号：

```
perl -pi -e "s/if\(\$session\[\'test\'\]\>0\){/if\(\$session\[\'test\'\]\>1\){/g" 
```

此外，您后面缺少一个空格，`if`并且需要使用三个反斜杠对美元符号进行转义：

```
perl -pi -e "s/if \(\\\$session\[\'test\'\]\>0\){/if \(\\\$session\[\'test\'\]\>1\){/g"
                 ^  ^^^                                ^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:27:59.893

使用双引号和双重转义`$`作品：

```
perl -pi -e "s/if \(\\\$session\['text'\]>0\){/if (\\\$session['text']>1){/" 
```

一个更短但更脏的解决方案，带有后视和前瞻断言：

```
perl -pi -e 's/(?<=if \(\$session\[.text.\]>)0(?=\){)/1/' 
```

# windows-phone-7 - Windows Phone 8 SDK Xde 模拟器运行速度非常慢并且崩溃

> ID：15299582
> 
> 赞同：4
> 
> 时间：2013-03-08T17:12:56.397
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-8-emulator

当您尝试运行模拟器时，它会加载，然后说 windows phone 操作系统正在启动，然后坐在那里大约 3-5 分钟并失败。我在 Lenovo N586 64 位上运行 Visual Studio Express 2012 for WP 我已升级到 windows 8 pro

让我把我试过的东西的清单列出来……这里都列出[了](http://igrali.com/2012/10/31/windows-phone-8-emulator-wasnt-able-to-create-the-virtual-machine/)

1.  是的，硬件支持 hyper-v 虚拟化 amd a6-4400m
2.  我很有能力，有一个程序可以用来测试这个。
3.  Hyper-v 已安装并运行良好
4.  运行 windows 8 pro 我不得不升级。
5.  我是 64 位的
6.  我没有运行任何其他虚拟化软件
7.  我已经运行 XDEcleanup.exe 并以管理员身份运行 VS2012 没有运气
8.  不，我没有在虚拟机上运行。
9.  只是为了好玩，我已经卸载了 sdk 并重新安装了它

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-03T15:23:06.660

对于您所描述的内容，看起来 VS 正在尝试创建虚拟交换机，但失败了。要解决此问题，请转到窗口左侧的 Hyper-V 的虚拟交换机管理器，并确保您拥有的每张网卡都有一个虚拟交换机，通常您必须有 3：1 用于无线，1 用于LAN 和 1 用于内部。如果您没有无线或 LAN，请创建它们。

# javascript - 使用 JavaScript 加载内容的 Flexslider

> ID：15299583
> 
> 赞同：0
> 
> 时间：2013-03-08T17:12:59.157
> 
> 标签：javascript, slider

我正在使用以下方式加载内容：

`jQuery('slides').html(slides);`

我正在使用这个滑块[http://flexslider.woothemes.com/](http://flexslider.woothemes.com/)。这是问题。将添加 HTML 结构中的幻灯片时如何加载此滑块？

当我使用直接链接进入我的网站时，一切正常 - 然后内容会自动加载。当我使用 jQuery 加载“子页面”时出现问题，然后滑块不起作用。

我试图添加：

```
 $('#carousel').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    itemWidth: 210,
    itemMargin: 5,
    asNavFor: '#slider'
  });

  $('#slider').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    sync: "#carousel"
  }); 
```

之后`jQuery('slides').html(slides);`，但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:11:43.063

`'slides'`不是标签名称，因此最后一部分不起作用。尝试使该选择器真正起作用，例如使用`$('#slides')`

# sql - 按代理和月份排名

> ID：15299586
> 
> 赞同：1
> 
> 时间：2013-03-08T17:13:06.170
> 
> 标签：sql, grouping, partitioning, ranking

我有一个表格，其中包含与以下类似的数据：

```
Agent | TCV | Parent AccountID | AccountID | Month
------+-----+------------------+-----------+--------
John  | 100 | ABC12345         | Sept13445 | 2
John  | 200 | ABC12345         | Sept345   | 2 
John  | 150 | CDE12345         | Sept546   | 2
John  | 200 | FTE1456          | Oct3467   | 2
John  | 100 | ABC12345         | Sept13445 | 3
John  | 200 | ABC12345         | Sept345   | 3 
John  | 150 | CDE12345         | Sept546   | 3
John  | 200 | FTE1456          | Oct3467   | 3 
```

我需要的是一种按代理显示分组排名的方法，然后是每个代理每个月的父 accounrDID。这个想法是，在导出中，将有一列用于代理、TCV、parentaccountDID 和月份。

因此，如果所有代理都有 10 个 parentaccountDID（但每个代理下可能有多个 accountDID），它将根据 parentAccountDID 的分组 TCV 对它们进行排名。因此，John 的 10 个 parentaccountDID 基于第 2 个月的分组 TCV 有 10 行数据，然后是第 3 个月基于分组 TCV 的 10 个 parentaccountDID 的 10 行数据，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:24:19.020

如果您有 Oracle SQL 数据库，请尝试以下查询，它可能会根据需要对您有所帮助：

```
select Agent ,TCV ,ParentAccountID,Month,count(1) from table group by  Agent ,TCV ,ParentAccountID,Month
order by 5 desc 
```

你也可以检查（谷歌）“密集排名”功能如下：

```
select Agent ,TCV ,ParentAccountID,Month,dense rank over(Agent ,TCV ,ParentAccountID,Month) from table group by  Agent ,TCV ,ParentAccountID,Month 
```

它对值进行排名并对结果进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:29:35.337

```
SELECT agent, tcv, parent_accnt_id, accnt_id, curr_month
     , ROW_NUMBER() OVER (PARTITION BY curr_month, parent_accnt_id ORDER BY curr_month) rnk 
 FROM your_table
/ 
```

使用您的数据，您将得到：

```
AGENT    TCV    PARENT_ACCNT_ID    ACCNT_ID    CURR_MONTH    RNK
------------------------------------------------------------------
John     100    ABC12345           Sept13445     2            1
John     200    ABC12345           Sept345       2            2
John     150    CDE12345           Sept546       2            1
John     200    FTE1456            Oct3467       2            1
John     100    ABC12345           Sept13445     3            1
John     200    ABC12345           Sept345       3            2
John     150    CDE12345           Sept546       3            1
John     200    FTE1456            Oct3467       3            1 
```

# jquery - 从代码块创建一个 jQuery 函数

> ID：15299587
> 
> 赞同：0
> 
> 时间：2013-03-08T17:13:09.990
> 
> 标签：jquery, function

我怎样才能把这段代码变成一个函数，我需要做的就是将它绑定到一个 div id，并为输入传递参数`name`和`id`参数？

```
 var startingNo = 3;
            var $node = "";
            for(varCount=0;varCount<=startingNo;varCount++){
                var displayCount = varCount+1;
                $node += '<p><input type="text" name="duties'+displayCount+'" id="duties'+displayCount+'"><span class="removeVar">Remove Variable</span></p>';
            }

            //add them to the DOM
            $('#duties').prepend($node);

            //remove a textfield
            $('#duties').on('click', '.removeVar', function(){
               $(this).parent().remove();
               varCount--;
            });

            //add a new node
            $('#addVar').on('click', function(){
            varCount++;
            $node = '<p><input type="text" name="duties'+varCount+'" id="duties'+varCount+'"><span class="removeVar">Remove Variable</span></p>';
            $(this).parent().before($node);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:25:00.020

你的意思是你想要一个 jQuery 原型函数，它的行为类似于`$('div').doSomething(name, id);`？在这种情况下，它是：

```
$.fn.doSomething = function (name, id) {...}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:17:55.147

我不知道我是否正确理解它，但它只是在标签创建和 jquery 选择器中连接：

```
function myFunction(name, id) {
    var startingNo = 3;
    var $node = "";
    for(varCount = 0; varCount <= startingNo; varCount++) {
        var displayCount = varCount + 1;
        $node + = '<p><input type="text" name="' + name + displayCount + '" id="' + id + displayCount + '"><span class="removeVar">Remove Variable</span></p>';
    }

    //add them to the DOM
    $('#' + id).prepend($node);

    //remove a textfield
    $('#' + id).on('click', '.removeVar', function(){
       $(this).parent().remove();
       varCount--;
    });

    //add a new node
    $('#addVar').on('click', function(){
        varCount++;
        $node = '<p><input type="text" name="' + name + varCount + '" id="' + id + varCount + '"><span class="removeVar">Remove Variable</span></p>';
        $(this).parent().before($node);
    });
} 
```

# backbone.js - 将视图绑定到backbone.js 中的集合

> ID：15299592
> 
> 赞同：3
> 
> 时间：2013-03-08T17:13:28.180
> 
> 标签：backbone.js, backbone-views, backbone-events, backbone.js-collections

我是半新的骨干。我正在尝试将集合绑定到视图，以便在将新模型添加到集合时更新视图。我认为当您使用模型执行此操作时，您可以绑定到模型的更改事件。但是你如何对集合做同样的事情呢？

```
App.Views.Hotels = Backbone.View.extend({

    tagName: 'ul',

    render: function() {
        this.collection.each(this.addOne, this);
        var floorplanView = new App.Views.Floorplans({collection:floorplanCollection});
        $('.floorplans').html(floorplanView.render().el);
        return this;
    },

    events: {'click': 'addfloorplan'},

    addOne: function(hotel) {
        var hotelView = new App.Views.Hotel ({model:hotel});
        this.$el.append(hotelView.render().el);
    },

    addfloorplan: function() {
        floorplanCollection.add({"name": "another floorplan"});
    }
});

App.Collections.Floorplans = Backbone.Collection.extend({
    model: App.Models.Floorplan,
    initialize: function () {
        this.bind( "add", function() {console.log("added");} );
    }
}); 
```

click 事件触发并添加到集合中。但是我如何让它更新视图呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:15:57.677

您可以收听集合的`add`事件，该事件**在将新项目添加到集合时触发**。在现代版本的 Backbone 中，该方法`listenTo`更适用于`bind`或`on`用于监听事件。（[阅读de文档了解更多信息](http://backbonejs.org/#Events-listenTo)）

例如，在您的情况下，这应该可以解决问题：

```
App.Views.Hotels = Backbone.View.extend({

  initialize: function() {
    this.listenTo(this.collection,'add', this.addOne);
  },
  //rest of code 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:10:39.157

这是我很久以前关注的一个很好的教程。

[Backbone.js 简介：第 3 部分 - 将集合绑定到视图](http://liquidmedia.org/blog/2011/02/backbone-js-part-3/)

它可以帮助您定义一个 DonutCollectionView，当给定一个甜甜圈集合时，它将为每个甜甜圈呈现一个 UpdatingDonutView。

# java - JFrame 中的 JLabel 中的 ImageIcon 只是拒绝任何重绘尝试

> ID：15299599
> 
> 赞同：0
> 
> 时间：2013-03-08T17:13:49.533
> 
> 标签：java, swing, jlabel, bufferedimage, imageicon

这个问题出在我的 Atari 2600 模拟器上，这让我难以置信。

我的代码在这个 pastebin 中：http: [//pastebin.com/2jS9NieD](http://pastebin.com/2jS9NieD)

本质上，我根本无法在 JFrame 中的 JLabel 中的 ImageIcon 中获取 BufferedImage 来刷新屏幕上的内容，这太荒谬了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T17:33:57.773

子类`JPanel`化并覆盖将`paint(Graphics)`绘制`BufferedImage`到`Graphics`对象上的方法。将面板添加到您的框架中，`repaint()`当您想要重绘它时，可以简单地调用面板。

# java - 将 XML 字符串导入 SQL Server 表的最佳方法是什么

> ID：15299601
> 
> 赞同：0
> 
> 时间：2013-03-08T17:13:54.043
> 
> 标签：java, xml

我正在使用名为 JPOS 的第三个产品，它有一个 XMLPackager，我可以从这个打包程序中获取一个字符串，其中包含 XML 格式的记录，例如：

```
<MACHINE><B000>STRING_VALUE</B000><B002>STRING_VALUE</B002><B003>STRING_VALUE</B003><B004>STRING_VALUE</B004><B007>STRING_VALUE</B007><B011>STRING_VALUE</B011><B012>STRING_VALUE</B012><B013>STRING_VALUE</B013><B015>STRING_VALUE</B015><B018>STRING_VALUE</B018><B028>STRING_VALUE</B028><B032>STRING_VALUE</B032><B035>STRING_VALUE</B035><B037>STRING_VALUE</B037><B039>STRING_VALUE</B039><B041>STRING_VALUE</B041><B043>STRING_VALUE</B043><B048>STRING_VALUE</B048><B049>STRING_VALUE</B049><B058>STRING_VALUE</B058><B061>STRING_VALUE</B061><B063>STRING_VALUE</B063><B127>STRING_VALUE</B127></MACHINE> 
```

我有一个 SQL 服务器表，其中包含列出的每个列。这并不重要，但我可能会通过特定的 STRING_VALUE 进行定义。我不确定在 Java 中解决此问题的最佳方法是什么。我的理解是 SQL Server 可以采用 XML 字符串（不是文档）并进行插入。最好解析每个值，然后放入一个填充每个值的列表中？这是我第一次使用 XML 文件，因此试图获得一些帮助/指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:35:37.367

抱歉，我的一位同事能够提供帮助并提供了快速答复。我将从我的 Java 代码中尝试它，它看起来应该很好用。不管怎么说，还是要谢谢你。

这是她创建的 SP，我可以通过它传入我的 XML 字符串和位值：

```
CREATE PROCEDURE [dbo].[sbssp_InsertArchivedMessages] 
```

(@doc varchar(max), @fromTo bit) 开始声明 @idoc int, @lastId int EXEC sp_xml_preparedocument @idoc OUTPUT, @doc

```
 INSERT INTO [dbo].[tblArchivedMessages]
  SELECT * FROM OPENXML(@idoc, '/MACHINE', 2) WITH [dbo].[tblArchivedMessages]

  SET @lastId = (SELECT IDENT_CURRENT('tblArchivedMessages'))

  UPDATE [dbo].[tblArchivedMessages] 
    SET FromToMach = @fromTo 
    WHERE ID = @lastId 
```

结束

问候。

# css - SASS/指南针样式检查器

> ID：15299605
> 
> 赞同：2
> 
> 时间：2013-03-08T17:14:07.490
> 
> 标签：css, styles, sass, compass-sass

在一家正在工作的公司中，我们正在尝试自动化构建过程和测试，除了 SASS/Compass 样式检查器之外，我们已经涵盖了所有内容。请注意，我不是在谈论检查语法错误，而是关于检查某种样式指南 - 缩进，间距行长度等。

我一直在寻找类似的软件一段时间，但我要么不擅长搜索，要么谷歌没有所有的答案。唯一的条件是它可以从 unix 命令行运行。

任何帮助或线索都非常受欢迎，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T00:00:05.830

我认为[SCSS-Lint 可以满足](https://github.com/brigade/scss-lint)您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:29:18.577

你真的需要控制输入的 scss 或 sass 文件，还是只控制输出？

如果您正在对 Compass 生成的样式表进行布局控制（换句话说 - 最终结果），并且如果您使用 ruby​​ 运行 compass，则可以从以下选项中选择 config.rb 文件中的“output_style”：-

```
:expanded or :nested or :compact or :compressed 
```

我主要使用 :compact 删除所有制表符、空格和换行符问题，同时保持文件易于阅读。

至于检查原始 scss 或 sass 文件的样式，除了 @steveax 评论的 EditorConfig 之外，我在旅行中没有看到任何东西。

我会对此发表评论，但还不够多:(希望这会有所帮助。

# php - MySQL用子字符串替换字段条目

> ID：15299611
> 
> 赞同：-1
> 
> 时间：2013-03-08T17:14:23.000
> 
> 标签：php, mysql, date, substring

我目前将日期存储在我的数据库中（以字符串格式），当前为 mm/dd/yyyy。

我需要将所有条目替换为 yyyy/mm/dd 以进行排序。

澄清一下，我是一名 PHP 开发人员，但我的原始 MySql 没有那么强大。我正在考虑通过使用子字符串重新安排日期来做到这一点。（我首先尝试使用 PHP，但处理这么多数据需要很长时间，大约 50 万行）。

我这样做对吗？如果是这样，我如何“循环”数据，为当前迭代分配我的 substr 变量？

注意：我确实在这里尝试了 str_to_date，但它最终使一半的字段无效。我不完全确定为什么。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:19:35.223

这是一个插入语句

```
 INSERT INTO yourtable (datefield) VALUES (str_to_date(date, '%Y/%m/%d')); 
```

这是一个更新

```
 UPDATE Table SET date=STR_TO_DATE('date','%Y/%m/%d') 
```

试试这个

```
 UPDATE Table SET date = DATE_FORMAT('date', %Y/%m/$d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:20:10.360

我相信如果您的列采用一致的 mm/dd/yyyy 格式，这将起作用

```
UPDATE mytable
SET date = CONCAT(right(date,4), '/', left(date,5)) 
```

# linux - Bash 'yes a' 和 'yes b'

> ID：15299613
> 
> 赞同：0
> 
> 时间：2013-03-08T17:14:26.360
> 
> 标签：linux, bash, random, stream, libc

```
bash: $: yes a
[some output] then press Ctrl+Z
      $: yes b
[some output] then press Ctrl+Z 
```

然后，执行 bg 两次并得到一些输出：

> abbbaaaabaaaabbabaaaa abaaabaabaa ... 一个 bbbbbbbb 等。

为什么a和b互换这么随意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:22:20.427

这不得不做[进程调度](http://oreilly.com/catalog/linuxkernel/chapter/ch10.html)，这是一个相当复杂的话题。

我对该主题的了解不足以准确解释为什么它是随机的，但可以说 Linux 内核正在决定每个进程获得多少 CPU 时间，并基于还有多少其他进程也在运行以及它们到底是什么正在做，它可以发生巨大的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:17:54.630

因为两个进程同时运行？这不是你所期望的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:06:40.357

顺便说一句， yes 通常不会在一行上给出一个字符串，所以我假设你的意思是你想要： a
b
a
b
a
b

我想不出比这更短的方法来使用标准的 unix 命令来做到这一点：

`awk 'BEGIN{while (1){print "a\nb"}}'`

# javascript - 如何在使用 window.open 时停留在当前页面

> ID：15299617
> 
> 赞同：13
> 
> 时间：2013-03-08T17:14:39.393
> 
> 标签：javascript, jquery

我正在发射`Window.open();`命令。在另一个选项卡中打开链接页面。我想要的是当我单击链接时，链接将在新窗口中打开，但应该在同一页面上。

那可能吗 ？

目前我正在使用这样的。

```
function AddToDatabase(url) {
            window.open(url, "_blank");
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T17:21:13.020

使用 _self 而不是 _blank。

```
window.open(url, "_self"); 
```

1.  _blank - URL 被加载到新窗口中。这是默认的
2.  _parent - URL 被加载到父框架中
3.  _self - URL 替换当前页面
4.  _top - URL 替换任何可能加载的框架集 name - 窗口的名称

了解更多详情。看到[这个链接](http://www.w3schools.com/jsref/met_win_open.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T17:34:57.447

您拥有的代码不应更改页面。你怎么叫`AddToDatabase()`？它来自`a href`标签吗？如果是这样，则默认操作是从链接发生的，您需要防止这种情况发生。

您可以将 href 属性设置为`javascript:void(0)`

```
<a href="javascript:void(0)" onclick="AddToDatabase('myUrl')">Add URL</a> 
```

或者你可以有 onclick 属性`return false`

```
<a href="#" onclick="AddToDatabase('myUrl'); return false;">Add URL</a> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-15T17:23:17.320

我知道这个问题太老了，但它完美地描述了我需要回答的问题，并且我能够想出一个不错的解决方案，所以我想我会在这里发布。这是一个有趣的解决方法。

本质上，您设置了一个超时来延迟将当前页面转发到新 url，然后在新选项卡中打开当前 url。所以：

```
function open_hidden_tab(new_url) {
    var thisTimeout= setTimeout(function() {
        window.location.href= new_url;
    }, 500);
    var newWindow= window.open(window.location.href);
    if(!newWindow) {
        clearTimeout(thisTimeout);
        alert('Please allow pop-ups on this site!');
    }
}
open_hidden_tab('https://google.com'); 
```

显然，您应该在您的站点上显示某种错误消息，而不是使用烦人的警报功能，但它适用于本示例的目的。

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-29T09:37:30.807

你可以用这个。

```
 <a href="terms.html" onclick="window.open(this.href, 'targetWindow', 'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=400,height=600');return false;" />Terms & Conditions</a> 
```

它对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T17:25:50.360

这是一个弹出窗口的示例：

```
var url = "example.com";
window.open(url, "s", "resizable=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, copyhistory=no").blur();
window.focus(); 
```

如果这就是你要找的东西，那就发疯吧。从 Web 开发的角​​度来看，这是非常不道德的，但可以做到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T17:28:45.197

```
<html>
<body>

<script>
myWindow=window.open('','','width=200,height=100')
myWindow.document.write("<p>This is 'myWindow'</p>")
myWindow.focus()
</script>

</body>
</html> 
```

**您应该确定窗口的宽度和高度。**

看看这个演示： http: [//jsfiddle.net/XyJW5/](http://jsfiddle.net/XyJW5/)但不要忘记允许在浏览器中弹出该网站

# google-plus - 如何使应用程序显示所有永久 google+ 环聊及其中的人？

> ID：15299624
> 
> 赞同：0
> 
> 时间：2013-03-08T17:15:09.497
> 
> 标签：google-plus

我对使用 Google+ api 完全陌生，并且快速入门指南有点令人困惑（我尝试了 ruby​​ 版本，因为我可能在那里最熟悉。看起来像这样：[https ://github.com/googleplus/gplus-quickstart -红宝石](https://github.com/googleplus/gplus-quickstart-ruby)）

而且我还查看了 google hangout apis - 但这些似乎更多地用于增强环聊（即，一旦你在环聊中，你会看到你构建的扩展等）。

我想做的是为我公司的每个人创建一个登录位置，并查看我创建的所有永久环聊的列表，并查看当前谁加入了该环聊（以及哪些环聊可用于会议）。

对于这个问题，我真的很抱歉，但感谢您对入门的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:52:43.853

目前没有官方提供的 API 可以告诉您当前可用的环聊。如果您有兴趣看到一个，您可能希望查看是否已在[https://code.google.com/p/google-plus-platform/issues/list](https://code.google.com/p/google-plus-platform/issues/list)上请求该功能，如果没有，请提出请求。

但是，您的问题似乎有一个假设，即我不完全确定是否有效。您所说的“永久聚会”是什么意思？通常，环聊是在临时基础上创建和销毁的（尽管有一些例外）。

其中一个例外是与日历事件相关的环聊（如您所述）。在这些情况下，您可以使用日历 API 获取事件资源并从中获取环聊 URL（请参阅[https://developers.google.com/google-apps/calendar/v3/reference/events](https://developers.google.com/google-apps/calendar/v3/reference/events)和相关页面API），但它仍然不会在任何给定时间报告谁在环聊中。

您可以处理您正在做的事情的一种方法是让您的网站有虚拟会议主题，当有人加入其中一个主题时，他们会运行一个应用程序，向您的网站报告他们所在的环聊的 URL。您的网站然后可以将此“房间信息”与网站上的主题相关联，以供其他人查看。此解决方案在[http://www.youtube.com/watch?v=Al4SbeVyLm4](http://www.youtube.com/watch?v=Al4SbeVyLm4)的视频中进行了概述。

# delphi - 如何让 Delphi tlistview 像资源管理器一样工作

> ID：15299627
> 
> 赞同：3
> 
> 时间：2013-03-08T17:15:12.640
> 
> 标签：delphi, windows-explorer, tlistview

Windows 资源管理器有一些我想在 Delphi TListView 的主题应用程序中复制的行为。

（如果我没有列表视图的主题，这很好用，但如果可能的话，我宁愿有主题）

在 Windows 资源管理器中，当我单击图标周围的空白区域时，我仍然可以制作一个拖动框，当我右键单击时，我得到的是容器的弹出菜单，而不是图标。

启用主题时，选择范围会扩大到列表中项目的整个边界框，而关闭主题时，它会缩小以适应列表项中文本的大小。

我需要做什么才能拥有主题：

![在此处输入图像描述](../Images/962d1e404a7ae65a896edb44f5a2dda4.png)

但是让他们像没有主题一样工作？

![在此处输入图像描述](../Images/acede86e7312ba4def546224a59f96a4.png)

并像 Windows 资源管理器一样工作（在选择突出显示的行的一部分时允许拖动）

![在此处输入图像描述](../Images/0fdacb95fafc1f040ccf400e621a354e.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T17:01:57.460

我建议您改用[VirtualTreeView](http://www.lischke-online.de/index.php/controls/virtual-treeview)。它是一个功能强大的组件，具有巨大的可能性，因此如果主题不可用，您可以做任何您想做的事情

# c# - 在 Visual Studio 2010 中，如何删除 XmlSerializer 以使用 DataContractSerializer？

> ID：15299628
> 
> 赞同：1
> 
> 时间：2013-03-08T17:15:15.427
> 
> 标签：c#, visual-studio-2010, wcf, datacontractserializer

我创建了一个 .NET 4.0 WCF Web 服务并将其放在我们的内部服务器上。

现在，我正在使用一个查询 Web 服务的简单项目对此进行测试。

但是，我发现我的所有属性名称都附加了**k_BackingField**字符串。

```
 [System.Runtime.Serialization.DataMemberAttribute(Name="<WoNumber>k__BackingField", IsRequired=true)]
    public string WoNumberk__BackingField {
        get {
            return this.WoNumberk__BackingFieldField;
        }
        set {
            if ((object.ReferenceEquals(this.WoNumberk__BackingFieldField, value) != true)) {
                this.WoNumberk__BackingFieldField = value;
                this.RaisePropertyChanged("WoNumberk__BackingField");
            }
        }
    } 
```

我对这个**k_BackingField**参数进行了搜索，发现这个链接是我最好的参考：

[如何命令序列化程序不要放 k__backingfield](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/990035a5-9dab-4d97-ac69-f8b4d914f489/)

显然，我以某种方式使用了[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)而不是[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)。

我似乎找不到的是如何“撤消” **XmlSerialization**并启用**DataContractSerializer**。

在我的项目中，我尝试在整个项目中搜索以下 XML 关键字，但它们似乎没有出现：

*   XmlSerializerFormat
*   System.Xml.序列化
*   XmlSerialzer

有谁知道如何删除**XmlSerialization**然后使用**DataContractSerializer**重新添加我的服务引用？

或者，是否需要修改我的 WCF 服务以公开我想要的序列化程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:15:28.083

问题不在于您使用了`XmlSerializer`- 问题在于您使用了一些`[Serializable]`在服务上使用属性声明的类，并在该类上使用了自动属性。

用序列化器使用的属性修饰的类型的语义`[Serializable]`是它的**字段**将被序列化（而不是它的属性）。使用自动属性，编译器将生成“支持字段”，当您为服务创建代理（添加服务引用）时，默认情况下会尝试创建与服务器中的合约等效的数据合约。

要解决这个问题，您有几个选择，通过更改*服务器端*代码：

*   不要使用`[Serializable]`，而是使用`[DataContract]`模型（这需要装饰你想要序列化的属性`[DataMember]`
*   保留`[Serializable]`，但不要使用属性，而是使用字段
*   （如果适用）使用 POCO 序列化（公共字段/属性将被序列化），不需要属性。

另一种选择是在服务器和客户端之间共享合同（即，不要使用添加服务引用，并将数据/服务合同从服务项目复制到客户端）。

# facebook - 移动设备选项的 Facebook 直接消息

> ID：15299631
> 
> 赞同：0
> 
> 时间：2013-03-08T17:15:24.170
> 
> 标签：facebook, facebook-graph-api

既然 Facebook 于 2013 年 2 月推出了新政策，除其他变化外，应用程序不能在朋友的墙上发布；移动设备不支持发送对话框。

我们必须使用移动设备在用户的朋友墙上发布哪些选项（根据用户已经通过应用程序进行身份验证的行为）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:01:21.683

*您可以使用提要对话框或通过添加display=touch*和 *to=FRIENDS_ID*将用户重定向到移动友好的 url并显示一个对话框。

```
To display a mobile-friendly Feed Dialog, redirect the user to the following URL:
http://www.facebook.com/dialog/feed?client_id=YOUR_APP_ID&redirect_uri=YOUR_URL&to=FRIENDS_ID&display=touch 
```

使用提要对话框和 javascript api

```
function postToFeed(kompis) {
    // calling the API ...
    var obj = {
      method: 'feed',
      redirect_uri: 'http://url.nu',
      link: 'http://www.url.se',
      picture: 'http://url/tfc.gif',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.',
      display:'touch',
      to:kompis
    };
    function callback(response) {
     if (response && response.post_id) {
     alert('Post was published.');
     document.getElementById('status').innerHTML = "Post ID: " + response['post_id'];
      } else {
      alert('Post was not published.');
      }
    }
    FB.ui(obj, callback);
  } 
```

ps：当我在 Firefox 中尝试时，我将我的用户代理设置为“iphone”，否则它将无法工作！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-06T14:15:45.177

打开 facebook 应用程序。首先打开您的帐户。打开您的个人资料。编辑您的号码。确定“通过短信获取通知”选项。保存选项。

# java - Jtable 行删除

> ID：15299633
> 
> 赞同：3
> 
> 时间：2013-03-08T17:15:29.943
> 
> 标签：java, swing, jtable

我在没有数据库的java中创建了一个库系统程序。（直接使用文件）。

我在删除 jtable 中的一行（也从文件中删除）时遇到了一个奇怪的问题。

有时，当我在表格中选择一行并单击删除按钮时，不止一行已被删除！

大多数时候它也能正常工作！！

我的代码：

```
public final class UserPage extends JFrame implements ActionListener {

    private AllUser userModel;
    private JTable uTable;
    JButton deleteUser;
    int selectedRow;

    public UserPage() {
        titleUserCount();
        userModel = new AllUser();
        uTable = new JTable(userModel);
        add(new JScrollPane(uTable), BorderLayout.CENTER);
        add(buttonPanels(), BorderLayout.PAGE_START);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(800, 600);
        this.setLocation(300, 60);
        this.setResizable(false);
    }   

    public final JPanel buttonPanels() {
        JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        deleteUser = new JButton("Delete User");

        deleteUser.addActionListener(this);
        buttonsPanel.add(deleteUser);

        return buttonsPanel;
    }   

    public void titleUserCount() {
        AllUser userCount = new AllUser();
        UserPage.this.setTitle("All User Information ,   Number Of user is : " + userCount.getRowCount());
    }   

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == deleteUser) {
            int selectedrow = uTable.getSelectedRow();
            if (selectedrow >= 0) {
                userModel.RemoveRow(selectedrow);
                titleUserCount();
            } else {
                JOptionPane.showMessageDialog(null, "No Row Selected");
            }   
        }   
    }   
} 
```

我的模型课：

```
public class AllUser extends AbstractTableModel {

    UserInformation uiS = new UserInformation();
    String[] col = {"ID", "Fname", "Lname", "Gender", "Date"};
    ArrayList<UserInformation> Udata = new ArrayList<UserInformation>();

    public AllUser() {
        BufferedReader br = null;
        try {
            FileReader fr = new FileReader("AllUserRecords.txt");
            br = new BufferedReader(fr);
            String line;
            while ((line = br.readLine()) != null) {
                if (line.trim().length() == 0) {
                    continue;
                }
                Udata.add(initializeUserInfos(line));
            }
        } catch (IOException e) {
        } finally {
            if (br != null) {
                try {
                    br.close();
                } catch (IOException ioe) {
                }
            }
        }
    }

    private UserInformation initializeUserInfos(String str) {
        UserInformation Uinit = new UserInformation();
        String[] CellArray = str.split("     ");
        Uinit.setID(CellArray[0]);
        Uinit.setFname(CellArray[1]);
        Uinit.setLname(CellArray[2]);
        Uinit.setGender(CellArray[3]);
        Uinit.setDate(CellArray[4]);
        return Uinit;
    }

    public void RemoveRow(int rowIndex) {
        if (RemoveUserFromFile(rowIndex)) {
            Udata.remove(rowIndex);
            fireTableRowsDeleted(rowIndex, rowIndex);
        } else {
            JOptionPane.showMessageDialog(null, "Unable to delete");
        }
    }

    public boolean RemoveUserFromFile(int index) {
        File Mf = new File("AllUserRecords.txt");
        File Tf = new File("Uoutput.txt");
        try {
            BufferedReader Ubr = new BufferedReader(new FileReader(Mf));
            PrintWriter Upw = new PrintWriter(new FileWriter(Tf));
            String line;
            while ((line = Ubr.readLine()) != null) {
                if (line.trim().length() == 0) {
                    continue;
                }
                if (!line.startsWith(String.valueOf(getValueAt(index, 0)))) {
                    Upw.println(line);
                }
            }
            Upw.close();
            Ubr.close();
            Mf.delete();
            Tf.renameTo(Mf);
            return true;
        } catch (FileNotFoundException e1) {
            return false;
        } catch (IOException ioe) {
            return false;
        }
    }

    @Override
    public String getColumnName(int colu) {
        return col[colu];
    }

    @Override
    public int getRowCount() {
        return Udata.size();
    }

    @Override
    public int getColumnCount() {
        return col.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        UserInformation uinfoS = Udata.get(rowIndex);
        Object value = null;
        switch (columnIndex) {
            case 0:
                value = uinfoS.getID();
                break;
            case 1:
                value = uinfoS.getFname();
                break;
            case 2:
                value = uinfoS.getLname();
                break;
            case 3:
                value = uinfoS.getGender();
                break;
            case 4:
                value = uinfoS.getDate();
                break;
            default:
                value = "...";
        }
        return value;
    }

    @Override
    public void setValueAt(Object value, int rowIndex, int columnIndex) {
        UserInformation userInfo = Udata.get(rowIndex);

        switch (columnIndex) {

            case 0:
                userInfo.setID((String) value);
                break;
            case 1:
                userInfo.setFname((String) value);
                break;
            case 2:
                userInfo.setLname((String) value);
                break;
            case 3:
                userInfo.setGender((String) value);
                break;
            case 4:
                userInfo.setDate((String) value);
                break;
        }
    }
} 
```

用户信息类：

```
public class UserInformation {

    private String Fname;
    private String Lname;
    private String ID;
    private String Gender;
    private String Date;

    public String getFname() {
        return Fname;
    }

    public void setFname(String fname) {
        this.Fname = fname;
    }

    public String getLname() {
        return Lname;
    }

    public void setLname(String lname) {
        this.Lname = lname;
    }

    public String getID() {
        return ID;
    }

    public void setID(String i_d) {
        this.ID = i_d;
    }

    public String getGender() {
        return Gender;
    }

    public void setGender(String gndr) {
        this.Gender = gndr;
    }

    public String getDate() {
        return Date;
    }

    public void setDate(String date) {
        this.Date = date;
    }

    @Override
    public String toString() {
        return ID + "     " + Fname + "     "
                + Lname + "     " + Gender + "     " + Date + "\n";
    }
} 
```

我的文本文件：

```
85     lo     ii     Female     2013/03/08
86     jkj     nmn     Female     2013/03/08
52     tyr     fgfg     Female     2013/03/08
7     dfdf     wew     Female     2013/03/08
47     zczc     asa     Female     2013/03/08
16     erw     www     Male     2013/03/08
83     gfg     dsd     Male     2013/03/08 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:31:45.517

我会在这里改变几件事：

*   在你的`RemoveRow`，只有`Udata.remove(rowIndex); fireTableRowsDeleted(rowIndex, rowIndex);`
*   `RemoveUserFromFile`用一种方法替换您的方法，该`saveToFile(File file)`方法将简单地迭代您`Udata`并将其写入给定的`file`

旁注：

*   遵循 Java 命名约定（变量和方法以小写字母开头！）。因此，您的代码更难阅读。
*   在您`titleUserCount()`中，您每次都在重新创建一个新的 TableModel，只是为了计算表中的条目。你可以简单地使用`userModel.getRowCount()`
*   没有必要扩展`JFrame`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T17:11:42.847

好吧，因为我没有你的所有代码，所以我正在使用一个虚拟程序来从`JTable`相应的文件中删除记录。观察类中`removeRow`定义的方法`MyTabeModel`。它还涵盖了`file`在`record`从`ArrayList`.

```
import javax.swing.table.*;
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.io.*;
public class TableFocus extends JFrame 
{
    MyTableModel model1;
    JTable table1;
    public void createAndShowGUI()
    {
        setTitle("JTables");
        Container c  = getContentPane();
        model1 = new MyTableModel();
        table1 = new JTable(model1);
        table1.setColumnSelectionAllowed(false);
        table1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        JScrollPane jsTable1 = new JScrollPane(table1);
        c.add(jsTable1);
        JButton button = new JButton("Delete");
        button.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                if (model1.getRowCount() > 0 && table1.getSelectedRow() != -1 )
                {
                    model1.deleteRow(table1.getSelectedRow());
                }
            }
        });
        add(button,BorderLayout.SOUTH);
        setSize(500,300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    private class MyTableModel extends AbstractTableModel
    {
        String columns[] ;
        ArrayList<ArrayList<String>> data;
        public MyTableModel()
        {
            columns = new String[] {"Roll No.","Name"};
            prepareData();
        }
        private void prepareData()
        {
            data = new ArrayList<ArrayList<String>>();
            data.add(new ArrayList<String>(){{add("1");add("Michael");}});
            data.add(new ArrayList<String>(){{add("2");add("Derake");}});
            data.add(new ArrayList<String>(){{add("3");add("Archie");}});
        }
        @Override
        public String getColumnName(int columnIndex)
        {
            return columns[columnIndex];
        }
        @Override
        public int getRowCount()
        {
            return data.size();
        }
        @Override 
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return data.get(row).get(col);
        }
        @Override
        public void setValueAt(Object aValue, int rowIndex, int colIndex)
        {
            data.get(rowIndex).set(colIndex,(String)aValue);
            fireTableCellUpdated(rowIndex,colIndex);
        }
        @Override
        public boolean isCellEditable(int row, int col)
        {
            return false;
        }
        public void deleteRow(int row)
        {
            ArrayList<String> temp = data.get(row);//backup of value in case of IOException while writing to file
            BufferedWriter bfr = null;
            try
            {
                data.remove(row);
                //Write here the logic for repopulating file with new records.
                bfr = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("records.temp")));
                StringBuffer sBuffer = new StringBuffer();
                for (ArrayList<String> list : data)
                {
                    StringBuffer buf = new StringBuffer();
                    for (String val : list )
                    {
                        buf.append(val+"\t");
                    }
                    buf.replace(buf.length() - 1, buf.length(),"\n");
                    sBuffer.append(buf.toString());
                }
                bfr.write(sBuffer.toString());
                bfr.flush();
                bfr.close();
                fireTableRowsDeleted(row,row);
            }
            catch (Exception ex)
            {
                data.add(row,temp);//Rollback the delete from ArrayList
                ex.printStackTrace();
            }
            finally
            {
                if (bfr != null)
                {
                    try
                    {
                        bfr.close();
                    }
                    catch (Exception ex){}
                }
            }

        }
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TableFocus ths = new TableFocus();
                ths.createAndShowGUI();
            }
        });
    }
} 
```

**更新**

> 有时，当我在表格中选择一行并单击删除按钮时，不止一行已被删除！

好吧，在浏览了您的代码之后，我了解了您删除多行的情况。**情况是：** *当您的文件中有不止一行以您`user ID`要删除的相同记录开头时。*
例如，假设您的文件中有这样的条目：

```
85     lo     ii     Female     2013/03/08
86     jkj     nmn     Female     2013/03/08
52     tyr     fgfg     Female     2013/03/08
86     jkj     pqr     Male      2013/03/08
7     dfdf     wew     Female     2013/03/08
47     zczc     asa     Female     2013/03/08
16     erw     www     Male     2013/03/08
83     gfg     dsd     Male     2013/03/08 
```

这里 userID`86`包含在两行（`row 2`和`row 4`）中。当您`4th`在您的行中选择行`JTable`以删除该特定记录时，它会从您的文件中删除行`2nd`。`4th`但是在`JTable`该`2nd`行中将继续显示，因为它`File`直到现在还没有用新的刷新。一旦你`JTable`用新文件刷新你的文件，它就会显示从那里删除的两行。
要知道它为什么会发生，请查看您的`RemoveUserFromFile(int index)`方法`while loop`，如下所示：

```
while ((line = Ubr.readLine()) != null) //Reads the file till the end.
{
  if (line.trim().length() == 0) {
    continue;
  }
  if (!line.startsWith(String.valueOf(getValueAt(index, 0)))) //If line starts with 86 don't write it to new `Uoutput.txt`. so all lines starting with 86 will be ignored.
  {
     Upw.println(line);//Lines starting with 86 is not written.
   }
 } 
```

我希望现在你明白为什么有时删除一条记录`JTable`会从你的`file`.
解决此问题的方法是通过以下方式更改您的方法（`RemoveRow`和`RemoveUserFromFile`）：（**使用此修改后的代码**）

```
public void RemoveRow(int rowIndex) {
    UserInformation temp = Udata.get(rowIndex);//Keep it as back up so that you could reconsolidate it to ArrayList in case RemoveUserFromFile return false
    Udata.remove(rowIndex);//remove the element from Udata on temporary basis.
    if (RemoveUserFromFile(rowIndex)) 
    {
          fireTableRowsDeleted(rowIndex, rowIndex);
    } 
    else 
    {
        Udata.add(rowIndex,temp);//re-insert temp in ArrayList as the file updation is failed.
        JOptionPane.showMessageDialog(null, "Unable to delete");
    }
}

public boolean RemoveUserFromFile(int index) 
{
    File Mf = new File("AllUserRecords.txt");
    File Tf = new File("Uoutput.txt");
    PrintWriter Upw = null;
    try 
    {
        Upw = new PrintWriter(new FileWriter(Tf));
        for (UserInformation uino : Udata )
        {
            Upw.print(uino.toString());//Don't use Upw.println because the toString() method of UserInformation class is already using \n in last.
        }
        Upw.close();
        Mf.delete();
        Tf.renameTo(Mf);
        return true;
    } catch (FileNotFoundException e1) {
        return false;
    } catch (IOException ioe) {
        return false;
    }
    finally 
    {
        if (Upw != null)
        {
            try
            {
                Upw.close();
            }
            catch (Exception ex){}
        }
    }
} 
```

我希望这现在解决了你的问题......

注意：作为旁注。我想建议您在编写代码时坚持使用 java 命名约定。例如：类名总是以大写字母开头。变量名总是以小写字母开头。并且常量（即最终变量）的所有字母都大写。还有很多其他的。看看oracle的[官方网站](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T11:18:08.260

本次测试：

```
if (!line.startsWith(String.valueOf(getValueAt(index, 0)))) { 
```

在您的`removeUserFromFile()`方法中是**非常危险**的，因为它是一个字符串测试，因此像 3 这样的 ID 将匹配 30、31、35、301 等（几乎任何以 3 开头的东西）。

要修复此特定测试，您可能希望将 ID 与整数进行比较。首先，从行中提取数字，例如：

```
Integer.parseInt(line.split("\\s")[0]); 
```

然后将该数字`getValueAt`与表中的数字进行比较。

值得注意的是，其他答案的整体设计更好；这只是针对特定问题。

# netty - 读取超时异常事件

> ID：15299634
> 
> 赞同：1
> 
> 时间：2013-03-08T17:15:34.213
> 
> 标签：netty

我使用的是 Netty IO 版本 3.6.3，并且有一个带有上游和下游处理程序的管道。实现的服务器读取消息、处理它并发送响应。包含一个 ReadTimeoutHandler 作为管道的第一个处理程序。如果处理超过超时，则会触发 ReadTimeoutException 事件。有时它会在响应写入通道之前触发。当 exceptionCaught() 方法响应 ReadTimeoutException 事件时，代码会使用超时异常调整响应并尝试将响应写入通道。但是通道是关闭的。看来 ReadTimeoutHandler 生成的 ReadTimeoutException 已经自动关闭了通道。我假设客户端已经检测到频道的关闭。Javadoc 没有描述这种行为。我希望能够写一个回复。我尝试在 exceptionCaught() 方法中重新连接通道，但失败了。

关于如何处理读取超时的任何建议或信息，您希望将响应发送回客户端？

# apache2 - 拒绝来自非默认主机的访问

> ID：15299638
> 
> 赞同：0
> 
> 时间：2013-03-08T17:15:43.713
> 
> 标签：apache2, virtual-hosts

我尝试在我的服务器上设置虚拟主机。我已经为我的默认域添加了虚拟主机：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName domain.com
    ServerAlias www.domain.com
    DocumentRoot /srv/www/domain.com
</VirtualHost>

<Directory /srv/www/domain.com>
    Options +FollowSymLinks -Indexes
    AllowOverride All
    order allow,deny
    allow from all
</Directory> 
```

现在 domain.com 和 www.domain.com 有文档根 /srv/www/domain.com

但是 www1.domain.com、www2.domain.com、...、*.domain.com 域也有文档根目录 /srv/www/domain.com。如何拒绝除 domain.com 和 www.domain.com 之外的所有域对服务器的访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:24:01.190

我只需要在虚拟主机之前添加：

```
ServerName localhost

<VirtualHost _default_:80>
    <Directory />
        deny from all
    </Directory>
</VirtualHost> 
```

# c# - 通过 id 获取列表项

> ID：15299640
> 
> 赞同：4
> 
> 时间：2013-03-08T17:15:49.613
> 
> 标签：c#, visual-studio-2010, list

我有一个清单：

```
List<string> theList = new List<string>; 
```

列表中有一些元素。现在我想通过索引获取一个项目。例如，我想获得元素编号 4。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T17:16:54.367

只需使用索引器

```
string item = theList[3]; 
```

请注意，C# 中的索引是基于 0 的。因此，如果您想要列表中的第 4 个元素，您需要使用索引 3。如果您想要第 5 个元素，您将使用索引 4。您的问题不清楚您的意图

索引器是 .Net 集合类型的常见功能。对于列表，它通常基于索引，对于地图，它基于键。相关类型的文档将告诉您哪些以及是否可用。索引器成员将作为名为的属性列出`Item`

> [http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx](http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T17:16:36.910

要获得第 4 项，您可以使用索引器：

```
string item = theList[3]; 
```

如果您更喜欢使用方法，则可以使用[`ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)or ( [`ElementAtOrDefault`](http://msdn.microsoft.com/en-us/library/bb494386.aspx))：

```
string item = theList.ElementAt(3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:18:15.583

使用索引器：

```
string the4th = theList[3]; 
```

请注意，如果列表只有 3 个或更少项，则会引发异常，因为索引始终从零开始。您可能想使用[`Enumerable.ElementAtOrDefault`](http://msdn.microsoft.com/en-us/library/bb494386.aspx)：

```
string the4th = theList.ElementAtOrDefault(3);
if(the4th != null)
{
    // ...
} 
```

`ElementAtOrDefault``index < list.Count`if和[`default(T)`](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)if返回指定索引处的元素`index >= theList.Count`。因此，对于引用类型（如`String`），它返回`null`，而对于值类型，则返回它们的默认值（例如 0 表示`int`）。

对于实现`IList<T>`（数组或列表）的集合类型，它使用索引器来获取元素，对于其他类型，它使用`foreach`循环和计数器变量。

因此，您还可以使用该`Count`属性来检查列表是否包含足够的索引项：

```
string the4th = null;
if(index < theList.Count)
{
    the4th = theList[index];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T17:16:57.363

您可以使用`Indexer` 来获取选中的项目`index`

```
string item = theList[3]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T17:17:41.160

这应该这样做，通过数组索引访问。

```
theList[3] 
```

它的 3 作为索引从 0 开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T17:17:37.113

使用[索引器语法](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)：

```
var fourthItem = theList[3]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-10T19:30:27.133

您可以使用索引器获取选定索引处的项目

```
 string item = theList[3]; 
```

或者，如果您想获取 id（如果从数据库访问）定义一个类，例如

```
 public class Person
    {
      public int PId;
      public string PName;

    } 
```

并访问如下

```
 List<Person> theList = new List<Person>();
    Person p1 = new Person();
    int id = theList[3].PId 
```

# php - Zend 身份验证，其中用户角色存储在单独的数据库表中

> ID：15299656
> 
> 赞同：0
> 
> 时间：2013-03-08T17:16:53.767
> 
> 标签：php, zend-framework, zend-db-table

我有一个存储用户 ID、用户名和密码的用户表和一个包含用户角色的角色表。为了链接这两个表，我有一个包含 userID 和 roleID 的表 (user_role)。如何使用 Zend Auth 对用户进行身份验证并使用 Zend Acl 控制用户访问。 [这是数据库设计](https://stackoverflow.com/questions/14687165/feedback-on-school-management-system-database-design)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:31:34.280

您可以创建一个 Zend_Auth 适配器，它适用于您的应用程序具有的任何结构。

这是一个 Auth 适配器的示例，它使用我的实体模型和映射器来提供凭据和用户数据以进行身份​​验证。

```
<?php

/**
 * Description of Auth_Adapter
 *
 */
class Auth_Adapter implements Zend_Auth_Adapter_Interface
{
    /**
     * The username
     *
     * @var string
     */
    protected $identity = null;
    /**
     * The password
     *
     * @var string
     */
    protected $credential = null;
    /**
     * Users database object
     *
     * @var Model_Mapper_Abstract
     */
    protected $usersMapper = null;

    /**
     * @param string $username
     * @param string $password
     * @param Model_Mapper_Abstract $userMapper
     */
    public function __construct($username, $password, Model_Mapper_Abstract $userMapper = null)
    {
        if (!is_null($userMapper)) {
            $this->setMapper($userMapper);
        } else {
            $this->usersMapper = new Application_Model_Mapper_User();
        }
        $this->setIdentity($username);
        $this->setCredential($password);
    }

    /**
     * @return \Zend_Auth_Result
     */
    public function authenticate()
    {
        // Fetch user information according to username
        $user = $this->getUserObject();

        if (is_null($user)) {
            return new Zend_Auth_Result(
                    Zend_Auth_Result::FAILURE_IDENTITY_NOT_FOUND,
                    $this->getIdentity(),
                    array('Invalid username')
            );
        }
        // check whether or not the hash matches using my own password class
        $check = Password::comparePassword($this->getCredential(), $user->password);
        if (!$check) {
            return new Zend_Auth_Result(
                    Zend_Auth_Result::FAILURE_CREDENTIAL_INVALID,
                    $this->getIdentity(),
                    array('Incorrect password')
            );
        }
        // Success!
        return new Zend_Auth_Result(
                Zend_Auth_Result::SUCCESS,
                $this->getIdentity(),
                array()
        );
    }

    /**
     * @param type $userName
     * @return \Auth_Adapter
     */
    public function setIdentity($userName)
    {
        $this->identity = $userName;
        return $this;
    }

    /**
     * @param type $password
     * @return \Auth_Adapter
     */
    public function setCredential($password)
    {
        $this->credential = $password;
        return $this;
    }

    /**
     * @param type $mapper
     * @return \Auth_Adapter
     */
    public function setMapper($mapper)
    {
        $this->usersMapper = $mapper;
        return $this;
    }

    /**
     * @return object
     */
    private function getUserObject()
    {
        return $this->getMapper()->findOneByColumn('name', $this->getIdentity());
    }

    /**
     * @return object
     */
    public function getUser()
    {
        $object = $this->getUserObject();
        $array = array(
            'id'   => $object->id,
            'name' => $object->name,
            'role' => $object->role
        );
        return (object) $array;
    }

    /**
     * @return string
     */
    public function getIdentity()
    {
        return $this->identity;
    }

    /**
     * @return string
     */
    public function getCredential()
    {
        return $this->credential;
    }

    /**
     * @return object Model_Mapper_Abstract
     */
    public function getMapper()
    {
        return $this->usersMapper;
    }
} 
```

您还可以扩展任何当前的适配器以提供您需要的功能。

祝你好运！

# java - Java 图形缓慢渲染的一种绘制方法。如何解决？

> ID：15299659
> 
> 赞同：0
> 
> 时间：2013-03-08T17:17:04.043
> 
> 标签：java

为什么下面的代码在相当于 x=+10 语句连续执行总和的圆圈之前画出很大的空间间隙？

```
class Panel extends JPanel {
    private int x=10;
    public void paintComponent( Graphics g ) {
        super.paintComponent( g );
        g.setColor( Color.MAGENTA );
        for (int i=1; i<=8; i++) {
            g.drawOval( x, 10, 50, 50 );
            x+=10;
        }
    }
}

public class Circles156 {
    public static void main(String[] args) {
    JFrame frame = new JFrame( "Drawing lines, rectangles and ovals" );
    frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    Panel Panel = new Panel();
    Panel.setBackground( Color.WHITE );
    frame.add( Panel ); // add panel to frame
    frame.setSize( 800, 300 ); // set frame size
    frame.setVisible( true ); // display frame
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:31:41.110

将 x 放入 paintComponent() 方法中。每次调用，x 都会将“初始值”增加 80。

# php - Codeigniter 会话类的问题

> ID：15299661
> 
> 赞同：1
> 
> 时间：2013-03-08T17:17:10.043
> 
> 标签：php, codeigniter, session

这是我的问题...我在 CI_Controller 的构造中添加了这些行

```
 $this->load->library("session");
    if($this->session->userdata("var")==FALSE)
    {
        $this->session->set_userdata("var", "value");   
    } 
```

当我在子类中使用 $this->session->userdata("var") 时，它没有值。我通过在 CI_CONtroller 的构造和子类的构造中显示 $this->session->userdata("var") 的值来测试它，它向我显示了父亲的价值，但没有孩子的价值。

还有一件事，在重新加载页面大约 3 或 4 次后。它工作得很好。

我将不胜感激您的回答。（我很抱歉我不会说英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:23:58.900

你应该做

```
$this->load->library("session");
    if(!$this->session->userdata("var"))
    {
        $this->session->set_userdata("var", "value");   
    } 
```

如果 isset 或不是会话数据， cause`userdata()`方法返回 false 和 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:37:30.903

你可以这样做

```
$this->load->library("session");

$var    =   $this->session->userdata("var");

if(!$var)
{
    $this->session->set_userdata("var", "value");   
} 
```

# c# - 过期日期对 MemoryCacheClient 有什么影响吗？

> ID：15299664
> 
> 赞同：4
> 
> 时间：2013-03-08T17:17:13.000
> 
> 标签：c#, servicestack

如果`XRedisClientManager`用于 ServiceStack 缓存，那么 redis 本身将能够强制执行生命周期。`MemoryCacheClient`如果使用它，这不会有任何影响，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:23:47.257

如果您已注册使用[ServiceStack 的 RedisClient](https://github.com/ServiceStack/ServiceStack.Redis/)作为[ICacheClient 缓存提供程序](https://github.com/ServiceStack/ServiceStack/wiki/Caching)，那么只有 Redis 客户端将用于所有缓存，并且任何包含**expiryDate**的 API 调用都会被转发到 Redis。

这不会`MemoryCacheClient`仅仅因为它没有被使用而产生影响，只有你在 IOC 中注册的那个才会被使用。尽管在使用 MemoryCacheClient 时，条目不会在幕后自动过期，而是在尝试访问过期条目时手动失效。

# meteor - 使用 Meteor 进行表单输入验证

> ID：15299671
> 
> 赞同：8
> 
> 时间：2013-03-08T17:17:34.430
> 
> 标签：meteor

Meteor 还没有内置的验证智能包。我应该考虑哪些验证库？其他人在用什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-07T15:19:14.480

我们决定将 simpleSchema 与 Collection2 和 autoform 一起使用进行验证。这是一个非常复杂的解决方案。我们使用这种方法节省了大量时间，而不是尝试手动滚动每个表单。

只需定义一个带有验证规则的方案（为数据类型和 isRequired 设置自动提供验证规则），然后使用 autoForm（一行代码）创建一个表单，您就可以免费获得所有这些

*   使用 bootstrap3 类的自动生成表单。
*   集合架构中所有键的适当 HTML5 字段。
*   一个提交按钮，用于收集输入的值并将它们插入您的集合中。
*   基于附加到您的集合的架构的表单验证。默认情况下，表单在用户提交时进行验证。如果有任何内容无效，则在用户修复问题时，会在 keyup（节流）上不断地重新验证表单。
*   显示在字段下的默认验证错误消息，可以自定义和翻译。

meteor-simple-schema 一个简单的、反应式的模式验证智能包，用于 Meteor。 [https://github.com/aldeed/meteor-simple-schema](https://github.com/aldeed/meteor-simple-schema)

meteor-collection2 Meteor 的一个智能包，它扩展了 Meteor.Collection 以提供对指定模式的支持，然后在插入和更新时根据该模式进行验证。还增加了对虚拟字段的支持。 [https://github.com/aldeed/meteor-collection2](https://github.com/aldeed/meteor-collection2)

meteor-autoform Meteor 的智能包，它添加了 UI 组件和帮助程序，以轻松创建具有自动插入和更新事件以及自动反应验证的基本表单。 [https://github.com/aldeed/meteor-autoform](https://github.com/aldeed/meteor-autoform)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T17:47:06.477

如果你想使用[陨石](http://oortcloud.github.com/meteorite/)，你可以搜索[大气包](https://atmosphere.meteor.com/)，看看流行什么。我目前正在使用[jqBootstrapValidation](https://github.com/ReactiveRaven/jqBootstrapValidation)。过去我使用过[validate.js](http://rickharrison.github.com/validate.js/)，但现在我更喜欢使用引导集成的东西。我听说[parsley.js](http://parsleyjs.org/)很受酷孩子的欢迎，尽管在撰写本文时还没有一个智能包 - 但这很容易[解决](https://stackoverflow.com/questions/14668993/how-do-i-use-momentjs-with-meteor)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-20T22:38:52.027

您已经拥有`Tracker`Meteor 的一部分，所以我将一个小教程和 JSfiddle 放在一起，介绍如何使用它来实现典型的表单验证场景。

[http://bit.ly/meteor-form-validation-video](http://bit.ly/meteor-form-validation-video)

[http://bit.ly/meteor-form-validation-fiddle](http://bit.ly/meteor-form-validation-fiddle)

# php - 表单标签内的贝宝表单重定向

> ID：15299676
> 
> 赞同：1
> 
> 时间：2013-03-08T17:17:47.900
> 
> 标签：php, paypal, paypal-ipn

我在这里学习贝宝集成...

[https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/formbasics](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/formbasics)

它说html表单应该有这一行

```
<FORM action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
```

我的问题是，因为我的表格是这样的......

```
<form id="BuyForm" name="BuyForm" method="post" action="purchase.php" enctype="multipart/form-data">
</form> 
```

如果我将 action="purchase.php" 更改为 paypal 提供的，我将失去我在此页面上仅“purchase.php”所做的所有验证和 php 编码。那它怎么能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:30:15.353

您可以使用“purchase.php”操作保留现有页面。一旦用户提交此表单并获得所需内容，您可以将用户重定向到重定向页面，在此页面上将有一个隐藏表单，其中包含操作“ [https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr) ”并隐藏包含您需要传递给贝宝的值的字段。您需要在屏幕上显示重定向消息并使用 javascript 提交此表单（还添加一个提交按钮，上面写着“如果您未重定向，请单击此处”）。

# c - C18：编译器会“知道”函数调用永远不会返回吗？

> ID：15299680
> 
> 赞同：0
> 
> 时间：2013-03-08T17:18:06.620
> 
> 标签：c, microcontroller, pic, mplab, c18

我正在使用 C18 在 PIC18 上构建 16 状态 FSM。我正在考虑将每个状态作为自己的函数，它会跳转到其他状态并被其他状态跳转。我很想在每个状态的末尾写一个“state##();”的分支案例来确定程序应该去哪里，但我认为这会很快死掉，因为编译器可能会期望这个回归，而不是永远的分支；我的微控制器上的堆栈会很快填满并最终溢出。

C18 是否足够聪明，知道我的函数调用永远不会返回并相应地用 GOTO/JMP 而不是 CALL/BRANCH 替换指令？我知道 GOTO 存在于 C 中（出于可读性原因，通常强烈建议不要这样做），但我想不出比这里更合适的理由来使用它。我知道我可以强制它使用 _asm _endasm 块转到，但如果没有必要，我会为自己省去麻烦。在 C 语言中说去一个函数并且永远不会回来的最好方法是什么？

自然，感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:53:45.493

您所说的似乎是某种递归设计，这是函数调用不断堆积的唯一方式。我认为您对状态机的工作方式没有正确的想法。试着看看这个 C 中 FSM 的一个很好的模板：

[C 状态机设计](https://stackoverflow.com/questions/1647631/c-state-machine-design)

如果您想发布一些示例代码或您正在考虑如何实现它，我们可以提供更多帮助。

# python - Python 2.6 xml.dom.ext 对象丢失？

> ID：15299683
> 
> 赞同：5
> 
> 时间：2013-03-08T17:18:12.697
> 
> 标签：python, xml, xml-parsing, python-2.6, pretty-print

我正在使用我在网上找到的脚本通过解析一些 XML 来转换一些文件。该脚本是在 Python 2.6 中构建的，它使用了一个模块，我相信通过我在网上阅读的内容，2.6 中没有该模块。我想知道是否有解决方法。我得到的错误是：

> 否 模块名称 EXT

在下面的脚本中，我认为它在导入时挂了`xml.dom.ext`，它似乎只在 PrettyPrint 的最后使用这个对象（参见最后一个 Try 语句）我想知道在 2.6 中是否有解决方法？我似乎找不到包含可以导入的 EXT 对象的模块。

脚本是：

```
from xml.dom.minidom import Document
import xml.dom.ext
import string
import os
import arcpy

#Read input parameters from GP dialog
output = arcpy.GetParameterAsText(0)

#Create an output qgs file
f = open(output, "w")

# Create the minidom
doc = Document()

# Create the <qgis> base element
qgis = doc.createElement("qgis")
qgis.setAttribute("projectname", " ")
qgis.setAttribute("version", "1.6.0-Capiapo")
doc.appendChild(qgis)

# Create the <title> element
title = doc.createElement("title")
qgis.appendChild(title)

# Assign current document
mxd = arcpy.mapping.MapDocument("CURRENT")

print 'Converting mxd........'

# Dataframe elements

df = arcpy.mapping.ListDataFrames(mxd)[0]
unit = doc.createTextNode(df.mapUnits)
xmin1 = doc.createTextNode(str(df.extent.XMin))
ymin1 = doc.createTextNode(str(df.extent.YMin))
xmax1 = doc.createTextNode(str(df.extent.XMax))
ymax1 = doc.createTextNode(str(df.extent.YMax))
# srsid = doc.createTextNode
srid1 = doc.createTextNode(str(df.spatialReference.factoryCode))
srid2 = doc.createTextNode(str(df.spatialReference.factoryCode))
epsg1 = doc.createTextNode(str(df.spatialReference.factoryCode))
epsg2 = doc.createTextNode(str(df.spatialReference.factoryCode))
description1 = doc.createTextNode(str(df.spatialReference.name))
description2 = doc.createTextNode(str(df.spatialReference.name))
ellipsoidacronym1 = doc.createTextNode(str(df.spatialReference.name))
ellipsoidacronym2 = doc.createTextNode(str(df.spatialReference.name))
geographicflag1 = doc.createTextNode("true")
geographicflag2 = doc.createTextNode("true")

authid2 = doc.createTextNode("EPSG:"+str(df.spatialReference.factoryCode))
authid3 = doc.createTextNode("EPSG:"+str(df.spatialReference.factoryCode))

# Layerlist elements
lyrlist = arcpy.mapping.ListLayers(df)
count1 = str(len(lyrlist))

# mapcanvas
def map_canvas():
    # Create the <mapcanvas> element
    mapcanvas = doc.createElement("mapcanvas")
    qgis.appendChild(mapcanvas)

    # Create the <units> element
    units = doc.createElement("units")
    units.appendChild(unit)
    mapcanvas.appendChild(units)

    # Create the <extent> element
    extent = doc.createElement("extent")
    mapcanvas.appendChild(extent)

    # Create the <xmin> element
    xmin = doc.createElement("xmin")
    xmin.appendChild(xmin1)
    extent.appendChild(xmin)

    # Create the <ymin> element
    ymin = doc.createElement("ymin")
    ymin.appendChild(ymin1)
    extent.appendChild(ymin)

    # Create the <xmax> element
    xmax = doc.createElement("xmax")
    xmax.appendChild(xmax1)
    extent.appendChild(xmax)

    # Create the <ymax> element
    ymax = doc.createElement("ymax")
    ymax.appendChild(ymax1)
    extent.appendChild(ymax)

    # Create the <projections> element
    projections = doc.createElement("projections")
    mapcanvas.appendChild(projections)

    # Create the <destinationsrs> element
    destinationsrs = doc.createElement("destinationsrs")
    mapcanvas.appendChild(destinationsrs)

    # Create the <spatialrefsys> element
    spatialrefsys = doc.createElement("spatialrefsys")
    destinationsrs.appendChild(spatialrefsys)

    # Create the <proj4> element
    proj4 = doc.createElement("proj4")
    spatialrefsys.appendChild(proj4)

    # Create the <srsid> element
    srsid = doc.createElement("srsid")
    spatialrefsys.appendChild(srsid)

    # Create the <srid> element
    srid = doc.createElement("srid")
    srid.appendChild(srid1)
    spatialrefsys.appendChild(srid)

    # Create the <authid> element
    authid = doc.createElement("authid")
    authid.appendChild(authid2)
    spatialrefsys.appendChild(authid)

    # Create the <description> element
    description = doc.createElement("description")
    description.appendChild(description1)
    spatialrefsys.appendChild(description)

    # Create the <projectionacronym> element
    projectionacronym = doc.createElement("projectionacronym")
    spatialrefsys.appendChild(projectionacronym)

    # Create the <ellipsoidacronym element
    ellipsoidacronym = doc.createElement("ellipsoidacronym")
    ellipsoidacronym.appendChild(ellipsoidacronym1)
    spatialrefsys.appendChild(ellipsoidacronym)

    # Create the <geographicflag> element
    geographicflag = doc.createElement("geographicflag")
    geographicflag.appendChild(geographicflag1)
    spatialrefsys.appendChild(geographicflag)

# Legend
def legend_func():

    # Create the <legend> element
    legend = doc.createElement("legend")
    qgis.appendChild(legend)

    for lyr in lyrlist:
        if(lyr.isGroupLayer == False):

            # Create the <legendlayer> element
            legendlayer = doc.createElement("legendlayer")
            legendlayer.setAttribute("open", "true")
            legendlayer.setAttribute("checked", "Qt::Checked")
            legendlayer.setAttribute("name",str(lyr.name))

            legend.appendChild(legendlayer)

            # Create the <filegroup> element
            filegroup = doc.createElement("filegroup")
            filegroup.setAttribute("open", "true")
            filegroup.setAttribute("hidden", "false")
            legendlayer.appendChild(filegroup)

            # Create the <legendlayerfile> element
            legendlayerfile = doc.createElement("legendlayerfile")
            legendlayerfile.setAttribute("isInOverview", "0")
            legendlayerfile.setAttribute("layerid", str(lyr.name)+str(20110427170816078))
            legendlayerfile.setAttribute("visible", "1")
            filegroup.appendChild(legendlayerfile)

# Project Layers
def project_layers():

    # Create the <projectlayers> element
    projectlayers = doc.createElement("projectlayers")
    projectlayers.setAttribute("layercount", count1)
    qgis.appendChild(projectlayers)

    for lyr in lyrlist:

        if(lyr.isGroupLayer == False and lyr.isRasterLayer == False):
            geometry1 = arcpy.Describe(lyr)
            geometry2 = str(geometry1.shapeType)
            ds = doc.createTextNode(str(lyr.dataSource))

            name1 = doc.createTextNode(str(lyr.name)+str(20110427170816078))
            name2 = doc.createTextNode(str(lyr.name))

           # Create the <maplayer> element
            maplayer = doc.createElement("maplayer")
            maplayer.setAttribute("minimumScale", "0")
            maplayer.setAttribute("maximumScale", "1e+08")
            maplayer.setAttribute("minLabelScale", "0")
            maplayer.setAttribute("maxLabelScale", "1e+08")
            maplayer.setAttribute("geometry", geometry2)
            if(lyr.isRasterLayer == True):
                maplayer.setAttribute("type", "raster")
            else:
                maplayer.setAttribute("type", "vector")
            maplayer.setAttribute("hasScaleBasedVisibilityFlag", "0")
            maplayer.setAttribute("scaleBasedLabelVisibilityFlag", "0")
            projectlayers.appendChild(maplayer)

            # Create the <id> element
            id = doc.createElement("id")
            id.appendChild(name1)
            maplayer.appendChild(id)

            # Create the <datasource> element
            datasource = doc.createElement("datasource")
            datasource.appendChild(ds)
            maplayer.appendChild(datasource)

            # Create the <layername> element
            layername = doc.createElement("layername")
            layername.appendChild(name2)
            maplayer.appendChild(layername)

            # Create the <srs> element
            srs = doc.createElement("srs")
            maplayer.appendChild(srs)

            # Create the <spatialrefsys> element
            spatialrefsys = doc.createElement("spatialrefsys")
            srs.appendChild(spatialrefsys)

            # Create the <proj4> element
            proj4 = doc.createElement("proj4")
            spatialrefsys.appendChild(proj4)

            # Create the <srsid> element
            srsid = doc.createElement("srsid")
            spatialrefsys.appendChild(srsid)

            # Create the <srid> element
            srid = doc.createElement("srid")
            srid.appendChild(srid2)
            spatialrefsys.appendChild(srid)

            # Create the <authid> element
            authid = doc.createElement("authid")
            authid.appendChild(authid3)
            spatialrefsys.appendChild(authid)

            # Create the <description> element
            description = doc.createElement("description")
            description.appendChild(description2)
            spatialrefsys.appendChild(description)

            # Create the <projectionacronym> element
            projectionacronym = doc.createElement("projectionacronym")
            spatialrefsys.appendChild(projectionacronym)

            # Create the <ellipsoidacronym element
            ellipsoidacronym = doc.createElement("ellipsoidacronym")
            ellipsoidacronym.appendChild(ellipsoidacronym2)
            spatialrefsys.appendChild(ellipsoidacronym)

            # Create the <geographicflag> element
            geographicflag = doc.createElement("geographicflag")
            geographicflag.appendChild(geographicflag2)
            spatialrefsys.appendChild(geographicflag)

            # Create the <transparencyLevelInt> element
            transparencyLevelInt = doc.createElement("transparencyLevelInt")
            transparency2 = doc.createTextNode("255")
            transparencyLevelInt.appendChild(transparency2)
            maplayer.appendChild(transparencyLevelInt)

            # Create the <customproperties> element
            customproperties = doc.createElement("customproperties")
            maplayer.appendChild(customproperties)

            # Create the <provider> element
            provider = doc.createElement("provider")
            provider.setAttribute("encoding", "System")
            ogr = doc.createTextNode("ogr")
            provider.appendChild(ogr)
            maplayer.appendChild(provider)

            # Create the <singlesymbol> element
            singlesymbol = doc.createElement("singlesymbol")
            maplayer.appendChild(singlesymbol)

            # Create the <symbol> element
            symbol = doc.createElement("symbol")
            singlesymbol.appendChild(symbol)

            # Create the <lowervalue> element
            lowervalue = doc.createElement("lowervalue")
            symbol.appendChild(lowervalue)

            # Create the <uppervalue> element
            uppervalue = doc.createElement("uppervalue")
            symbol.appendChild(uppervalue)

            # Create the <label> element
            label = doc.createElement("label")
            symbol.appendChild(label)

            # Create the <rotationclassificationfieldname> element
            rotationclassificationfieldname = doc.createElement("rotationclassificationfieldname")
            symbol.appendChild(rotationclassificationfieldname)

            # Create the <scaleclassificationfieldname> element
            scaleclassificationfieldname = doc.createElement("scaleclassificationfieldname")
            symbol.appendChild(scaleclassificationfieldname)

            # Create the <symbolfieldname> element
            symbolfieldname = doc.createElement("symbolfieldname")
            symbol.appendChild(symbolfieldname)

             # Create the <outlinecolor> element
            outlinecolor = doc.createElement("outlinecolor")
            outlinecolor.setAttribute("red", "88")
            outlinecolor.setAttribute("blue", "99")
            outlinecolor.setAttribute("green", "37")
            symbol.appendChild(outlinecolor)

             # Create the <outlinestyle> element
            outlinestyle = doc.createElement("outlinestyle")
            outline = doc.createTextNode("SolidLine")
            outlinestyle.appendChild(outline)
            symbol.appendChild(outlinestyle)

             # Create the <outlinewidth> element
            outlinewidth = doc.createElement("outlinewidth")
            width = doc.createTextNode("0.26")
            outlinewidth.appendChild(width)
            symbol.appendChild(outlinewidth)

             # Create the <fillcolor> element
            fillcolor = doc.createElement("fillcolor")
            fillcolor.setAttribute("red", "90")
            fillcolor.setAttribute("blue", "210")
            fillcolor.setAttribute("green", "229")
            symbol.appendChild(fillcolor)

             # Create the <fillpattern> element
            fillpattern = doc.createElement("fillpattern")
            fill = doc.createTextNode("SolidPattern")
            fillpattern.appendChild(fill)
            symbol.appendChild(fillpattern)

             # Create the <texturepath> element
            texturepath = doc.createElement("texturepath")
            texturepath.setAttribute("null", "1")
            symbol.appendChild(texturepath)

map_canvas()
legend_func()
project_layers()

#  Write to qgis file

try:
    xml.dom.ext.PrettyPrint(doc, f)
finally:
    f.close()

print 'Done' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:23:38.000

该`xml.dom.ext`模块从未添加到 Python 标准库中。

它只是[PyXML 发行版](http://pyxml.sourceforge.net/topics/)的一部分，但多年来没有看到任何更新，我怀疑它是否仍然适用于 Python 2.6。

相反，只需在文档上调用 minidom`.toprettyxml()`方法来漂亮地打印输出，然后将该数据写入文件：

```
f.write(doc.toprettyxml()) 
```

# sql - 如何在不损害数据库的情况下删除 -journal 文件？

> ID：15299685
> 
> 赞同：11
> 
> 时间：2013-03-08T17:18:15.490
> 
> 标签：sql, sqlite

我正在使用 SQLite 和在后台运行的 php 应用程序。我已经使用 (Ctrl-c) 阻止了该应用程序，我只是注意到我有 database.sqlite 和 database.sqlite-journal。

目前，如何在不损害数据库的情况下删除 -journal 文件？

谢谢！

PS SQLite 版本 3.7.9

**编辑：**

```
-rw-r--r--. 1 damiano damiano  51M  8 mar 18.15 test.sqlite2
-rw-r--r--. 1 damiano damiano 2,6K  8 mar 18.15 test.sqlite2-journal
[damiano@localhost backup]$ sqlite3 test.sqlite2
SQLite version 3.7.13 2012-06-11 02:05:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> 
[damiano@localhost backup]$ ls -lh
-rw-r--r--. 1 damiano damiano  51M  8 mar 18.15 test.sqlite2
-rw-r--r--. 1 damiano damiano 2,6K  8 mar 18.15 test.sqlite2-journal
[damiano@localhost backup]$ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T05:11:00.320

执行这个命令：

```
sqlite3 test.sqlite2 vacuum 
```

它将使您的数据库尽可能小，并在`-journal`文件中应用可能的未完成事务或回滚（并在进程中将其删除）。您实际上可以执行任何其他执行某些操作的事务（但仅连接/断开连接是不够的），但真空似乎是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:30:25.690

只需打开数据库（使用您的程序或使用`sqlite3`命令行工具）。SQLite 然后将回滚中断事务的更改，然后删除日志。

# java - 使用基类对象调用派生类方法

> ID：15299686
> 
> 赞同：5
> 
> 时间：2013-03-08T17:18:25.890
> 
> 标签：java

我有 6 个类，如下图所示。现在，定义`class A`了一个类对象`B`作为私有变量。类`A`方法也调用 B 类的许多方法，例如`B.method1()`. 现在，类`A_Base1`是从类派生的`A`，需要从派生类中调用方法`B_Base1`；例如`B1.method2()`。并且类的方法也`A_Base2`需要从类中调用方法`B_Base2`；例如`B2.method3()`。

现在在 AI 类中将变量定义为 -

`private B bObject`

现在在方法中`A_Base1`，我不能像这样调用方法，`bObject.method2()`因为它是基类对象。

我需要关于 -

是否可以使用基类对象调用派生类对象方法？或者我是否需要以其他好的方式重新设计这个场景？

![数字](../Images/b137bbc9f0c4ebfd6ac5ee4f8980452e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:22:53.827

你总是可以投。假设您的 A 类提供此方法：

```
protected B getBInstance() {
   return bObject;
} 
```

然后在 A_Base1 你可以做类似的事情：

```
((B_Base1)getBInstance()).method2(); 
```

然而，这是一个非常糟糕的设计。如果您的 A_Base1 类需要 B_Base1 的实例，则应在构造时直接将此类实例交给它：

```
public class A_Base1 extends A {
   private B_Base1 b1Object;
   public A_Base1(B_Base1 instance) {
      super(B_Base1); //works as a B for parent
      this.b1Ovject = instance;
   }
} 
```

然后你可以使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T17:28:57.990

仅当 Bx.methodX() 对不同的 Ax 执行相同的操作时，使用这种 imo 的继承才有意义。在这种情况下，您应该这样命名它们：

```
public class B {
  public void doWhatAMeans() {
    method1();
  }

public class B1 extends B {
  @Override
  public void doWhatAMeans() {
    method2();
  }

public class B2 extends B {
  @Override
  public void doWhatAMeans() {
    method3();
  } 
```

然后你只需要 A 调用 doWhatAMeans() 并且 A1 和 A2 只需要注入 Bx 的适当实例。

另一方面，如果 doWhatAMeans 没有意义，因为 methodX 做了不同的事情，对 Ax 意味着不同的事情，那么你需要重新考虑你的对象模型，可能并行结构 A,A1,A2 和 B,B1,B2 是错误的然后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:24:56.480

因为 A 是 A_Base1 的父级（我假设是扩展的），所以您可以将访问 B 的函数调用设为公共（或受保护），然后 A_Base1 或 A_Base2 可以使用 A 调用 B 时执行的相同函数。

# qt - Opencv ffmpeg：视频捕获（“Filename.avi”）在非开发机器上崩溃 - MAC 10.8.2

> ID：15299691
> 
> 赞同：3
> 
> 时间：2013-03-08T17:18:45.690
> 
> 标签：qt, opencv, deployment, ffmpeg, video-capture

我试图部署一个简单的 Qt Opencv 应用程序，以下是代码：

Qt：.pro 文件：

```
QT       += core gui
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets
TARGET = opencvVideoTest
TEMPLATE = app

SOURCES += main.cpp\
    mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

INCLUDEPATH = -I/usr/local/include

LIBS += -lm -lopencv_core -lopencv_highgui -lopencv_imgproc 
```

主窗口.cpp：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <opencv2/core/core.hpp>
#include <opencv/cv.h>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    cv::Mat img;

   cv::VideoCapture cap("BMWM5.avi");

   if(cap.isOpened()){

   for(;;){
       cap.read(img);
       cv::resize(img,img,cv::Size(604,480));
       cv::imshow("Opencv", img);
       cv::waitKey(33);
   }
   }
   else{

   }

}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

上面的代码片段在具有 Opencv 2.4.3、ffmpeg 1.1.2 和 Qt 5.0.1 的开发机器上运行良好。当我在使用 macdeployqt 和输出之前尝试部署、运行 otool 时会发生这种情况：

```
>   /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
 version 169.3.0)   /usr/local/opt/opencv/lib/libopencv_core.2.4.3.dylib
 (compatibility version 2.4.0, current version 2.4.3)
 >  /usr/local/opt/opencv/lib/libopencv_highgui.2.4.3.dylib
 (compatibility version 2.4.0, current version 2.4.3)
>   /usr/local/opt/opencv/lib/libopencv_imgproc.2.4.3.dylib
   (compatibility version 2.4.0, current version 2.4.3)
>   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtWidgets.framework/Versions/5/QtWidgets
  (compatibility version 5.0.0, current version 5.0.1)
>   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtGui.framework/Versions/5/QtGui
  (compatibility version 5.0.0, current version 5.0.1)
>   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtCore.framework/Versions/5/QtCore
  (compatibility version 5.0.0, current version 5.0.1)
>   /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
  (compatibility version 1.0.0, current version 1.0.0)
>   /System/Library/Frameworks/AGL.framework/Versions/A/AGL
  (compatibility version 1.0.0, current version 1.0.0)
>   /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current
  version 56.0.0) 
```

macdeployqt 输出后的 otool：

> ```
> /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
>     @executable_path/../Frameworks/libopencv_core.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
>   @executable_path/../Frameworks/libopencv_highgui.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
>   @executable_path/../Frameworks/libopencv_imgproc.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
>   @executable_path/../Frameworks/QtWidgets.framework/Versions/5/QtWidgets 
> ```
> 
> （兼容版本 5.0.0，当前版本 5.0.1）@executable_path/../Frameworks/QtGui.framework/Versions/5/QtGui（兼容版本 5.0.0，当前版本 5.0.1）@executable_path/../Frameworks /QtCore.framework/Versions/5/QtCore（兼容版本 5.0.0，当前版本 5.0.1） /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL（兼容版本 1.0.0，当前版本 1.0\. 0) /System/Library/Frameworks/AGL.framework/Versions/A/AGL（兼容版本1.0.0，当前版本1.0.0） /usr/lib/libstdc++.6.dylib（兼容版本7.0.0，当前版本56.0.0)

但是在部署它之后，当我尝试在用户的机器上运行应用程序时，它崩溃了，也没有报告错误，在 Windows 中曾经发生过完全相同的事情，但是当我将 opencv_ffmpeg.dll 复制到 exe 文件夹中时，它工作正常。我在这里尝试使用相同的逻辑并失败了，然后我将所有ffmpeg及其依赖项的每个lib文件手动添加到项目文件夹中，但仍然失败。还有其他解决方案吗，请帮忙？我是mac dpeloyment的新手。我错过或忽略了什么？

# python - 使用 Python Requests 库以 HTML 格式发送 Mailgun 内联图像

> ID：15299693
> 
> 赞同：9
> 
> 时间：2013-03-08T17:18:48.060
> 
> 标签：python, html, email, python-requests, mailgun

我无法确定如何使用 Mailgun api 从 Python 应用程序使用 requests 库发送多条内联消息。目前我有（使用 jinja2 作为模板和烧瓶作为 web 框架，托管在 Heroku 上）：

```
def EmailFunction(UserEmail):
    Sender = 'testing@test.co.uk'
    Subject = 'Hello World'
    Text = ''
    name = re.sub('@.*','',UserEmail)
    html = render_template('GenericEmail.html', name=name)
    images = []
    imageloc = os.path.join(dirname, 'static')
    images.append(open(os.path.join(imageloc,'img1.jpg')))
    images.append(open(os.path.join(imageloc,'img2.jpg')))
    send_mail(UserEmail,Sender,Subject,Text,html,images)
    return html

def send_mail(to_address, from_address, subject, plaintext, html, images):
    r = requests.\
        post("https://api.mailgun.net/v2/%s/messages" % app.config['MAILGUN_DOMAIN'],
            auth=("api", app.config['MAILGUN_KEY']),
             data={
                 "from": from_address,
                 "to": to_address,
                 "subject": subject,
                 "text": plaintext,
                 "html": html,
                 "inline": images
             }
         )
    return r 
```

所以电子邮件发送正常，但最后没有图像在电子邮件中。当我点击下载它们时，它们不显示。根据 mailgun api 在 HTML 中引用图像（当然是简化的！）；

```
<img src="cid:img1.jpg"/>
<img src="cid:img2.jpg"/>
etc ... 
```

显然我做错了什么，但是我尝试使用 requests.files 对象附加这些内容，它甚至没有发送电子邮件并且没有给出错误，所以我认为这根本不是正确的方法。

可悲的是，这方面的文档相当稀少。

让 HTML 直接指向服务器端图像会更好吗？然而，这并不理想，因为服务器端图像通常不会是静态的（有些会，有些不会）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T20:29:32.907

[此处](http://documentation.mailgun.net/user_manual.html?highlight=image#sending-inline-images)记录了发送内联图像。

在 HTML 中，您将像这样引用图像：

```
<html>Inline image here: <img src="cid:test.jpg"></html> 
```

然后，定义一个 Multidict，将文件发布到 API：

```
files=MultiDict([("inline", open("files/test.jpg"))]) 
```

披露，我为 Mailgun 工作。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-23T16:03:51.407

截至 2020 年，此处的实际文档：[https ://documentation.mailgun.com/en/latest/api-sending.html#examples](https://documentation.mailgun.com/en/latest/api-sending.html#examples)

我的例子：

```
response = requests.post(
    'https://api.mailgun.net/v3/' + YOUR_MAILGUN_DOMAIN_NAME + '/messages',
    auth=('api', YOUR_MAILGUN_API_KEY),
    files=[
        ('inline[0]', ('test1.png', open('path/filename1.png', mode='rb').read())),
        ('inline[1]', ('test2.png', open('path/filename2.png', mode='rb').read()))
    ],
    data={
        'from': 'YOUR_NAME <' + 'mailgun@' + YOUR_MAILGUN_DOMAIN_NAME + '>',
        'to': [adresat],
        'bcc': [bcc_adresat],
        'subject': 'email subject',
        'text': 'email simple text',
        'html': '''<html><body>
            <img src="cid:test1.png">
            <img src="cid:test2.png">
            </body></html>'''
    },
    timeout=5  # sec
) 
```

# android - 在android中画一个圆圈

> ID：15299694
> 
> 赞同：0
> 
> 时间：2013-03-08T17:18:52.040
> 
> 标签：android

我已经学习了一个星期的android。我正在编写一个简单的程序来画一个圆圈。但是当我运行它时，它告诉我程序已经停止。我一遍又一遍地阅读代码，但找不到错误。你能帮我么。

```
package org.example.viewwithlines;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    static public class GraphicsView extends View 
    {
        Paint p;
        public GraphicsView(Context context) {
        super(context);
        p=new Paint();
        p.setColor(Color.MAGENTA);
        }
        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawCircle(30, 40, 10, p);   
        }
        }
} 
```

这是xml文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <org.example.viewwithlines.MainActivity.GraphicsView
    android:id="@+id/graphics" android:layout_width="fill_parent" android:layout_height="fill_parent"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:28:10.490

很难说出它不起作用的确切原因。我至少看到两个原因。

1.  布局中的类名错误。由于`GraphicsView`是一个嵌套类，它应该是`org.example.viewwithlines.MainActivity$GraphicsView`

    ```
    <view
        class="org.example.viewwithlines.MainActivity$GraphicsView"
        android:id="@+id/graphics" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"/> 
    ```

2.  您必须提供一个将`Context`和`AttributeSet`作为参数的构造函数

    ```
    public GraphicsView(Context context, AttributeSet attrs) {
        super(context, attrs);
        p=new Paint();
        p.setColor(Color.MAGENTA);
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:05:37.487

你想做什么？

对于背景和一般用途，您可以简单地创建一个可绘制资源并将其设置为方形视图：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >
    <solid android:color="#FF0000"/>
</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:24:57.667

当你扩展一个视图时，你需要给它添加不同的构造函数，让它在不同的环境下工作。当您在 xml 中使用 View 时，它使用`AttributeSet`包含的构造函数。

尝试添加一个看起来像这样的：

```
 public GraphicsView(Context context, AttributeSet attribs) {
        super(context, attribs);
        p=new Paint();
        p.setColor(Color.MAGENTA);
    } 
```

另请参阅[这篇文章](https://stackoverflow.com/q/2884501/752320)以获取更详细的说明。

此外，您正在尝试在 xml 中引用内部类。当你这样做时，你必须使用 a`$`而不是 a `.`。这个问题是`$`xml 标签名称中的一个非法字符，所以你必须这样做：

```
<view class="org.example.viewwithlines.MainActivity$GraphicsView" 
    ...
    attribs here
    ... /> 
```

# android - 如何从 adView (google admob) 获取广告链接？

> ID：15299695
> 
> 赞同：0
> 
> 时间：2013-03-08T17:18:57.880
> 
> 标签：android, hyperlink, ads

我用AdMob在android应用上制作广告。当我点击adView时，它会打开与广告内容对应的网页。请问，我可以得到adView当前存在的广告的链接吗？

```
adView = new AdView (this, AdSize.BANNER, "a1513a0c84c8223");
adView.loadAd (new AdRequest ()); 
```

如何获取广告媒体的网页链接由当前请求处理。

# c++ - 结构指针数组的动态分配

> ID：15299698
> 
> 赞同：0
> 
> 时间：2013-03-08T17:19:01.323
> 
> 标签：c++, c

我正在尝试在另一个结构中动态分配结构数组这里是代码段

我没有收到任何语法错误，但是一旦我尝试输入 str1 就会出现分段错误

有人可以解释为什么会出现分段错误，以及在这种情况下动态分配内存中会发生什么

```
struct A {
   string str1;
   string str2;
}

struct B {
   int count;
   A* A_array;
}

void GetB (B** b)
{

 *b = (B*) malloc(1*sizeof(B));
 cout << "Enter count";
 cin >> (**b).count;
 (**b).A_array = (A*) malloc((**b).count*sizeof(A));
 cout << "Enter str1";
 cin >> (**b).A_array[0].str1;
 cout << "Enter str2";
 cin >> (**b).A_array[0].str2;

}

int main(){
   B* b;
   GetB(&b);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T17:25:17.167

您遇到崩溃的原因是因为`string str1;` `string str2;`没有正确构建。

而且它们构造不正确，因为`malloc`只分配内存而不调用构造函数。

这就是`new`C++ 中运算符的用途。

因此，正如评论中强调的那样：

1.  永远不要`malloc`用于分配非 POD 对象。
2.  更好的是，永远不要`malloc`在 c++ 中使用。
3.  更好的是，永远不要使用手动分配的数组，`std::vector`而是使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:16:40.700

扩展我的评论，这将等同于您当前使用一些更惯用的 C++ 的程序。我故意使结构尽可能接近您的原始结构，但当然还有其他问题需要考虑，例如您的类是否应该具有构造函数或私有成员。

```
struct A {
   string str1;
   string str2;
};

struct B {
   int count;
   vector<A> A_vec;
};

B GetB ()
{
   B myB;
   cout << "Enter count";
   cin >> myB.count;
   A a;
   cout << "Enter str1";
   cin >> a.str1;
   cout << "Enter str2";
   cin >> a.str2;
   myB.A_vec.push_back(a);
   return myB;
}

int main(){
   B b(GetB());
} 
```

# wpf - 将资源从一个 UserControl 解析到父 UserControl

> ID：15299705
> 
> 赞同：4
> 
> 时间：2013-03-08T17:19:35.497
> 
> 标签：wpf, user-controls, resources

我有一个用户控件 UserControl1，它在其资源中定义了一种样式。该用户控件包含一个引用该样式的 UserControl2 实例：

```
<UserControl x:Class="UserControl1">
    <UserControl.Resources>
        <Style x:Key="MyStyle" />
    </UserControl.Resources>

    <Grid>
        <UserControl2 />
    </Grid>
</UserControl>

<UserControl x:Class="UserControl2">
    <Grid Style="{StaticResource MyStyle}">
    </Grid>
</UserControl> 
```

但是，UserControl2 找不到该样式资源，即使它位于逻辑树中（在 UserControl1 的资源中）。如何让 UserControl2 找到 UserControl1 中的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:27:15.773

你可以这样做，但我建议使用 a`ResourceDictionary`代替。

无论如何，如果你想这样做，你可以用它`FindAncestor`来找到父母并从父母那里访问`Resource`你想要的`ResourceDictionary`

```
<UserControl x:Class="UserControl1">
    <UserControl.Resources>
        <Style x:Key="MyStyle" />
    </UserControl.Resources>

    <Grid>
        <UserControl2 />
    </Grid>
</UserControl>

<UserControl x:Class="UserControl2">
    <Grid Style="{Binding Resources[MyStyle], RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:UserControl1}}}">
    </Grid>
</UserControl> 
```

因为`Resource`是一个字典，您可以使用`key`就像后面的代码一样访问

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T13:00:27.140

我遇到了同样的问题，并且能够通过引用资源来解决它，`DynamicResource`而不是`StaticResource`：

```
<UserControl x:Class="UserControl2">
    <Grid Style="{DynamicResource MyStyle}">
    </Grid>
</UserControl> 
```

编译器仍然会给出无法解析资源的警告。

# c - C 程序 - 带函数的回文 - 几乎完全完成了一个小问题

> ID：15299708
> 
> 赞同：2
> 
> 时间：2013-03-08T17:19:55.997
> 
> 标签：c, loops, whitespace, palindrome, strcmp

有没有办法在比较两个字符串时删除空格。分配是创建一个不区分大小写并且必须忽略空格的回文。到目前为止我有

```
void cmpNoCase(char str1[], char str2[]){
   if(strcasecmp(str1, str2)==0){
      printf ("%s is a palindrome.\n", str2);
   } else { ("%s is NOT a palindrome.\n", str2);
}
return;
} 
```

在 main 里面我有这个 for 循环来反转用户输入的第一个字符串。

```
for (i=0, j= strlen(input2)-1; i < j; i++, j--){

   index=input2[i];
   input2[i]=input2[j];
   input2[j]=index;
} 
```

注意：我有另一个函数可以比较两个字符串是否区分大小写，但在比较字符串的索引（即输入的回文）时会考虑空格。我在函数及其 for 循环中的唯一区别是第一个函数的“strcmp”，第二个是“strcasecmp”以忽略区分大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:03:55.200

您可以尝试编写自己的比较函数。`while(i<strlen(yourstr){// your logic for comparing the string character by character}`更具体地喜欢，`while(i<strlen(yourstr)){char a=yourstr[i]; if(a=' ') {continue;}; // rest of your comparison code}` 否则你可以这样做：`while((a=yourstring[i])!='\n'){i++; if(a=' ') {continue;}`

# ios - 詹金斯，我怎样才能归档一个子目录（没有上面的整个树结构）？

> ID：15299709
> 
> 赞同：4
> 
> 时间：2013-03-08T17:20:03.223
> 
> 标签：ios, jenkins, ios-frameworks

我正在使用 Jenkins 每晚构建一个 iOS 静态框架。我关心的输出在这个目录中：

ios/build/Release-iphoneuniversal/MySpecialProject.framework

我想使用“存档工件”操作来存档“MySpecialProject.framework”，但是当我这样做时，它会创建一个包含整个前导目录结构的完整存档。文档说要看看 Ant 是如何做到这一点的。我对Ant不熟悉，所以在这里我很茫然。

这样做的主要目的是让“MySpecialProject.framework”作为工件提供给使用 Jenkins 构建的其他项目。所以，认为我可以使用“复制工件”插件来做到这一点。但是我无法真正克服它在这里创建完整目录结构的事情。我只是想让“MySpecialProject.framework”成为顶级工件。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:03:40.473

我通过输入“Execute Shell”命令解决了自己的问题：

```
mv ios/build/Release-iphoneuniversal/MySpecialProject.framework . 
```

然后在构建后操作“归档工件”中，我只能归档“MySpecialProject.framework/**”

这似乎工作得很好。由于 Jenkins 每次运行该作业时，它都会创建一个新的工作区，因此我不必担心“mv”的问题。工作正常。

# c++ - OpenGL 平面着色 - 奇怪的光照行为

> ID：15299710
> 
> 赞同：2
> 
> 时间：2013-03-08T17:20:05.020
> 
> 标签：c++, opengl, sfml, lighting

我的 OpenGL 光照有一点问题。

它可以很好地渲染模型（犹他茶壶），但我有一些奇怪的照明模式。模型应该是平坦的阴影，只有一个环境光照亮场景，但我最终会在茶壶上看到斑点光：

[![茶壶形象](../Images/d8182fb85c46e1b835dd05d09a838a6b.png)](https://i.imgur.com/TFYts3T.png)

这只是一个使用 SFML 在 C++ 中构建模型加载器的简单练习。

代码如下：

```
bool modelLoader(string fileName, vector<GLfloat>& vertices, vector<GLushort>& indices, vector<GLfloat>& normals)
{
    fstream object;
    string face;
    string dataLine;
    string lineChar;
    GLfloat point;
    GLfloat uvs;
    GLfloat storedNorm;
    GLushort ind;
    vector<GLfloat> storedNormals;
    vector<GLfloat> storedUVs;
    vector<GLfloat> localNormals , localVertices;
    vertices.clear();
    indices.clear();

    object.open(fileName);
    if(!object.is_open())
    {
        printf("Cannot open file: %f \n", fileName);
        return false;
    }
    while(object>>lineChar)
    {
            if(lineChar == "v" /*|| dataLine.find("vt ") == 0*/ || lineChar == "f" || lineChar == "vn")
            {
                if(lineChar == "v")
                {
                    //cout<<"v ";
                    for(int i=0;i<3;++i)
                    {
                        object >> point;
                        //cout << point << " ";
                        localVertices.push_back(point);
                    }
                    //cout<<endl;
                }
                else if(lineChar == "vn")
                {
                    //cout<<"vn";
                    for(int j=0;j<3;++j)
                    {
                        object >> point;
                        //cout<<point<<" ";
                        localNormals.push_back(point);
                    }
                    //cout<<endl;
                }
                else if(lineChar == "f")
                {
                    for(int k=0;k<3;++k)
                    {
                        getline(object, face, '/');
                        ind = atoi(face.c_str());
                        indices.push_back(ind-1);
                        object.ignore(2);
                        //getline(object, face, '/');
                        //uvs = atoi(face.c_str());
                        //storedUVs.push_back(uvs);
                        getline(object, face, ' ');
                        storedNorm = atoi(face.c_str());
                        storedNormals.push_back(storedNorm);
                    }
                }

            }
    }
    for (unsigned int i=0; i<indices.size(); ++i )
    {
        vertices.push_back(localVertices[indices[i]*3]);
        vertices.push_back(localVertices[indices[i]*3 + 1]);
        vertices.push_back(localVertices[indices[i]*3 + 2]);

        normals.push_back(localNormals[(unsigned int) storedNormals[i]*3]);
        normals.push_back(localNormals[(unsigned int) storedNormals[i]*3 + 1]);
        normals.push_back(localNormals[(unsigned int) storedNormals[i]*3 + 2]);
    }

    return true;
} 
```

主循环：

```
int main()
{
    // Create the main window
     sf::Window App(sf::VideoMode(SC_WIDTH, SC_HEIGHT, 32), "SFML OpenGL");

    // Create a clock for measuring time elapsed
    sf::Clock Clock;

    //output version of OpenGL to the console
     cout<<"OpenGL version: "<<glGetString(GL_VERSION)<<endl;

     // Create the vectors to hold the object data
     vector<GLfloat> vertices;
     vector<GLushort> indices;
     vector<GLfloat> normals;

     //Load model
     if(!modelLoader("teapot2.obj", vertices, indices, normals))
     {
         printf("Failed to load model. Make sure the .obj file has no errors.");
         system("pause");
         return 0;
     }

     //enable the use of vertex arrays
     glEnableClientState(GL_VERTEX_ARRAY);
     glEnableClientState(GL_NORMAL_ARRAY);

     // tell OpenGL where the vertices are with glVertexPointer()
     glVertexPointer(3, GL_FLOAT, 0, &vertices[0]);
     glNormalPointer(GL_FLOAT, 0, &normals[0]);

    //*************************************************************
    // Set color and depth clear value
    glClearDepth(1.f);
    glClearColor(0.f, 0.f, 0.f, 0.f);

    // Enable Z-buffer read and write

    glDepthMask(GL_TRUE);

    // Set up lighting for the scene
    GLfloat ambient[4] = {0.f,0.5f,0.5f, 1.f};
    glLightfv(GL_LIGHT0, GL_AMBIENT, ambient);

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHTING);  
    glEnable(GL_COLOR_MATERIAL);

    // Setup a perspective projection
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(90.f, 1.f, 1.f, 500.f);

    // Start game loop
    while (App.IsOpened())
    {
        // Process events
        sf::Event Event;
        while (App.GetEvent(Event))
        {
            // Close window : exit
            if (Event.Type == sf::Event::Closed)
                App.Close();

            // Escape key : exit
            if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::Escape))
                App.Close();

            // Resize event : adjust viewport
            if (Event.Type == sf::Event::Resized)
                glViewport(0, 0, Event.Size.Width, Event.Size.Height);
        }

        // Set the active window before using OpenGL commands
        // It's useless here because active window is always the same,
        // but don't forget it if you use multiple windows or controls
        App.SetActive();

        if((float)Clock.GetElapsedTime()>REFRESH_RATE){
            // Clear colour and depth buffer
            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

            // Apply some transformations
            glMatrixMode(GL_MODELVIEW);
            glLoadIdentity();

            glTranslatef(0.f, 0.f, -5.f);
            glRotatef(45.f, 1.f, 1.f, 1.f);

            glPushMatrix();
            //draw the triangles with glDrawArrays() and then with glDrawElements()
            glDrawArrays(GL_TRIANGLES, 0, vertices.size()/3);
            //glDrawElements(GL_TRIANGLES, vertices.size(), GL_UNSIGNED_SHORT, &indices[0]);
            //glDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_SHORT, &indices[0]);
            glPopMatrix();

            Clock.Reset();
        }

        // Finally, display rendered frame on screen
        App.Display();
    }
    //delete the vertex arrays using glDisableClientState()
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);

    return EXIT_SUCCESS;
} 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:49:00.087

OpenGL 灯光具有所有属性的默认值（例如`GL_AMBIENT`、`GL_DIFFUSE`等）。在 的情况下`GL_LIGHT0`，diffuse 属性未设置为零（这是您只需要获得环境照明所需的）。为了解决这个问题，你需要做

```
GLfloat  black[] = { 0.0f, 0.0f, 0.0f, 1.0f };
glLightfv( GL_LIGHT0, GL_DIFFUSE, black ); 
```

由于 IIRC，其余的光照属性已经为零，这应该为您提供仅环境光照，从而消除光照的方向性分量。此外，默认模式`glColorMaterial`是`GL_AMBIENT_AND_DIFFUSE`，它将环境和漫反射材质属性设置为传入的顶点颜色。您也可以考虑将其切换为仅环境 ( `glColorMaterial( GL_FRONT_AND_BACK, GL_AMBIENT );`)。

然而，我认为你的阴影奇怪的根本原因可能是由于非单位长度的法线。您可以`glEnable( GL_NORMALIZE );`在进行光照计算之前尝试添加。

# django - Microsoft Azure 将额外的查询字符串附加到带有查询字符串的 url

> ID：15299717
> 
> 赞同：3
> 
> 时间：2013-03-08T17:20:37.320
> 
> 标签：django, iis, azure, cgi, fastcgi

在将我正在开发的 Django 网站版本部署到 Microsoft 的 Azure 服务时，我添加了一个页面，该页面采用如下查询字符串

```
http://<my_site_name>.azurewebsites.net/security/user/?username=<some_username>&password=<some_password> 
```

但是，我收到了对此 URL 的 404 响应。所以我打开了 Django 的 Debug 标志，我返回的页面说：

```
Page not found (404)
Request Method:     GET
Request URL:    http://<my_site_name>.azurewebsites.net/security/user/?username=<some_username>&password=<some_password>?username=<some_username>&password=<some_password>

Using the `URLconf` defined in `<my_project_name>.urls`, Django tried these URL patterns, in this order:

^$
^security/ ^user/$
^account/
^admin/
^api/

The current URL, `security/user/?username=<some_username>&password=<some_password>`, didn't match any of these. 
```

所以它似乎将查询字符串附加到已经具有相同查询字符串的 url 的末尾。我的站点在我的本地计算机和内部网络上的 iis 服务器上运行，我在推送到 Azure 之前将其用于暂存。这些站点部署都没有这样做，因此这似乎是 Azure 特有的。

是否需要在 Azure 网站管理界面中设置一些内容，以防止它使用查询字符串修改 URL？关于在 Azure 中使用查询字符串，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:12:14.623

在与 wfastcgi.py 的提供者交谈时，他们告诉我可能是 wfastcgi.py 的问题导致了这个问题。当他们调查它时，他们给了我一个解决问题的方法。

[从http://pytools.codeplex.com/releases](http://pytools.codeplex.com/releases)下载最新的 wfastcgi.py 副本

在该文件中找到这部分代码：

```
if 'HTTP_X_ORIGINAL_URL' in record.params:
    # We've been re-written for shared FastCGI hosting, send the original URL as the PATH_INFO.
    record.params['PATH_INFO'] = record.params['HTTP_X_ORIGINAL_URL'] 
```

并在其正下方添加（仍然是 if 块的一部分）：

```
# PATH_INFO is not supposed to include the query parameters, so remove them
record.params['PATH_INFO'] = record.params['PATH_INFO'].split('?')[0] 
```

然后，将此修改后的文件上传/部署到 Azure 站点（使用 ftp 将其放在某个位置或将其添加到您的站点部署中。我正在部署它，以便如果我需要进一步修改它的版本并备份它。

在站点的 Azure 管理页面中，转到站点的配置页面并将处理程序映射更改为指向修改后的 wfastcgi.py 文件并保存配置。

即我的处理程序曾经是默认的 D:\python27\scripts\wfastcgi.py。由于我部署了修改后的文件，处理程序路径现在是：D:\home\site\wwwroot\wfastcgi.py

我还重新启动了该站点，但您可能不必这样做。

这个修改后的脚本现在应该从 PATH_INFO 中去除查询字符串，并且带有查询字符串的 url 应该可以工作。在我从 wfastcgi.py 开发人员那里得知 Python27 安装中的默认 wfastcgi.py 文件已被修复/替换之前，我将一直使用它。

# c# - 范围数据注释没有按预期工作，知道吗？

> ID：15299718
> 
> 赞同：1
> 
> 时间：2013-03-08T17:20:40.977
> 
> 标签：c#, asp.net-mvc, data-annotations

我假设验证检查将允许从 1 到 30 的任何输入值。但是，当我在此字段中输入 4 到 9 的值时，它会提示错误。有什么建议吗？请...

备注：我的项目基于“MVC4 Web Application + Razor View Engine + C# .net”。

```
using System.ComponentModel.DataAnnotations;

[Range(1, 30, ErrorMessageResourceType = typeof(Resources.ErrorMessage), ErrorMessageResourceName = "RangeErrorMsg")]
public int HowManyDays { get; set; } 
```

以下是我的 Razor 视图源

```
<div class="editor-label">
    @Resources.Booking.Duration
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.HowManyDays)
    @Html.ValidationMessageFor(model => model.HowManyDays)
</div> 
```

我无法上传我的屏幕转储，因为我需要至少 10 个声望才能这样做。奇怪的是，它仅显示 4 到 9 范围内的值的警报。顺便说一句，我安装了“DataAnnotationsExtensions.MVC3”NuGet 包。但是，我确实尝试在没有运气的情况下取消它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:52:08.123

你的第二个论点`EditorFor`没有任何意义。查看[EditorFor 帮助](http://msdn.microsoft.com/en-us/library/ee402949%28v=vs.108%29.aspx)或仅查看它在 SO（此站点）上的使用示例。这可能会破坏您的观点，并且您没有得到验证。首先，只需删除逗号和数字，看看是否有效，如果无效，请查看如何使用的示例`EditorFor`。

**编辑**

您的评论使我的回答完全无关紧要。您应该准确地说明您向公众展示的内容。无论如何，试着看看这个成功回答的问题是否能解决你的问题： [Range DataAnnotation Don't Seed to Be Working](https://stackoverflow.com/questions/3480140/range-dataannotation-doesnt-seem-to-be-working-in-net-3-5)

请让我知道这可不可以帮你。谢谢。

# php - SimpleXmlElement 无法获取项目

> ID：15299724
> 
> 赞同：1
> 
> 时间：2013-03-08T17:21:15.993
> 
> 标签：php, mysql, function, rss, simplexml

我做了一个这样的功能：

```
function getFeed($feed_url) {
    $content = file_get_contents($feed_url);
    $x = new SimpleXmlElement($content);
    echo "<h3>".$x->channel->title."</h3><div>";
    foreach ($x->channel->item as $entry) {

        $title = utf8_decode(stripslashes(mysql_real_escape_string($entry->title)));
        $link = utf8_decode(stripslashes(mysql_real_escape_string($entry->link)));
        $desc = utf8_decode(stripslashes(mysql_real_escape_string($entry->description)));
        $chkexist="SELECT * FROM articles WHERE title='$title' LIMIT 1";
        $i =1;

        $chkresult=mysql_query($chkexist);
        $countresult=mysql_num_rows($chkresult);
        if ($title=="") {
            echo "No article title, skipping ".$i++."<br>";
        }else{
            if ($countresult==1) {
            echo "The article: ".utf8_encode($title)." Exists. Passing.<br>";
            }else {
                $sql="INSERT INTO articles (title,link,description,date) VALUES ('$title','$link','$desc',NOW())";
                mysql_query($sql) or die("Failed to save articles");
                echo "The article: ".utf8_encode($title)." Is saved<br>";
            }
        }   
    }
echo "</div>";
} 
```

它可能并不完美，我对这个游戏很陌生，但是当我尝试给它例如这个提要时：[http](http://www.tek.no/feeds/general.xml) ://www.tek.no/feeds/general.xml它最终会保存但不是所​​有的项目和它最后给出一个错误：警告：mysql_num_rows() 期望参数 1 是资源，在第 29 行的 C:\xampp\htdocs\index.php 中给出的布尔值无法保存文章。

如您所见，我在本地工作。

如果我尝试另一个提要，例如：[http](http://www.dagbladet.no/rss/innenriks/) ://www.dagbladet.no/rss/innenriks/它会保存 4 个项目并在查询中仅提供自定义错误消息，而不是警告：mysql_num_rows() 需要参数..等。

知道我在这里做错了什么吗？有没有人有 xampp 或 wampp 来试用这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-19T13:43:12.070

实际上，$desc 没有被转义，我通过 mysql_real_escape_string(); 发送了变量。所以在我的查询中我这样做了： $sql="INSERT INTO article (title,link,description,pubdate,date) VALUES ('".mysql_real_escape_string($title)."','".mysql_real_escape_string($link)." ','"‌​.mysql_real_escape_string($desc)."','$pubdate',NOW())";

现在它起作用了。

# android - Android 回栈和内存回收

> ID：15299726
> 
> 赞同：3
> 
> 时间：2013-03-08T17:21:24.353
> 
> 标签：android, android-activity

我正在学习android应用程序开发。我正在阅读有关系统如何管理活动的信息。

通过阅读[本](http://developer.android.com/guide/components/tasks-and-back-stack.html#ActivityState)文档。这是混乱。

1.  我创建具有 3 个活动 A1、A2、A3 的应用程序 A（从主屏幕）[这是任务 A]
2.  我创建了具有 3 个活动 B1、B2、B3 [这是任务 B] 的应用程序 B（从主屏幕），其中 A1 和 B1 分别是应用程序 A 和 B 中的堆栈顶部。

根据文档系统，仅推送和弹出活动（没有**重新排序**，这对堆栈有意义）但是，它指出系统可以在没有足够内存可用的情况下回收内存。并且选择要删除系统的活动总是选择在后台的活动。所以说它的去除活动A3。但是 A3 在堆栈的底部。如何在不**重新排序**应用程序 A 的堆栈的情况下删除 A3？

我希望我的问题很清楚

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:31:40.910

从内存中删除活动时，后退堆栈不会更改。

但是，当用户点击后退按钮并返回到已回收的活动时，您没有专门保存在您的`onSaveInstanceState()`（并从`savedInstanceBundle`参数重新加载`onCreate()`）中的任何状态都将丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:44:37.657

正如您正确指出的那样，Android 系统不会**重新排序堆栈。**它遵循[流程生命周期](http://developer.android.com/guide/components/processes-and-threads.html)，其中包含活动的**流程被终止，而不是堆栈上的单个活动。**请记住，默认情况下，每个应用程序都是维护活动堆栈的单独进程。所以应用 A 和应用 B 的 Activity 堆栈将是独立的。

例如，任务 A 在后台运行 A1、A2 和 A3 活动。任务 A 是一个过程。当android需要回收内存时，它会终止包含所有活动A1、A2、A3的进程Task A。因此，此时任务 A 中哪个活动位于堆栈顶部并不重要。

# c - 平行示范计划

> ID：15299728
> 
> 赞同：5
> 
> 时间：2013-03-08T17:21:30.973
> 
> 标签：c, mpi, openmpi

我刚刚完成的一项任务要求我创建一组脚本，这些脚本可以将随机 Ubuntu 机器配置为 MPI 计算集群中的节点。这一切都已经完成，节点之间可以正常通信。但是，我现在想通过向它抛出一个并行程序来展示所述 MPI 集群的效率。我只是在寻找一种可以在可用进程（=节点）数量之间划分工作的直接蛮力计算：如果一个节点需要 10 秒来运行程序，4 个节点应该只需要大约 2.5 秒。

考虑到这一点，我寻找了一个用 C 编写的素数计算程序。对于任何纯粹主义者来说，该程序实际上并不是我作业的一部分，因为我正在学习的课程纯粹是系统管理。我只需要任何能表明我的集群正在运行的东西。我有一些编程经验，但很少使用 C 语言，也没有使用 MPI。我发现了[很多](http://people.sc.fsu.edu/~jburkardt/c_src/prime_mpi/prime_mpi.html)示例程序，但这些程序似乎都没有真正并行运行[。](https://computing.llnl.gov/tutorials/mpi/samples/C/mpi_prime.c)它们确实在我的节点之间分配了所有步骤，因此如果一个节点具有更快的处理器，则总时间将会减少，但添加额外的节点并不能加快计算速度。

难道我做错了什么？我发现的程序根本不是并行的吗？我需要为 MPI 学习 C 编程来编写自己的程序吗？是否有任何其他并行 MPI 程序可用于演示我的集群在工作中？

**编辑**

感谢下面的答案，我设法让几个 MPI 脚本正常工作，其中前 N 个自然数的总和（这不是很有用，因为它遇到数据类型限制）、素数的计数和生成以及Pi 的蒙特卡洛计算。有趣的是，只有素数程序才能通过多个节点/进程实现（有时是戏剧性的）性能提升。

导致我最初的脚本运行问题的大部分问题都相当模糊，显然是由于节点上的主机文件问题。使用参数运行 mpiexec`-disable-hostname-propagation`解决了这个问题，它可能以多种方式表现出来：MPI(R) 屏障错误、TCP 连接错误和其他一般连接失败。我相信集群中的所有节点可能有必要通过主机名相互了解，这对于在服务器节点上运行 DHCP/DNS 的经典 Beowulf 集群来说并不是一个真正的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T18:55:44.797

并行编程中通常的概念验证应用是简单的光线追踪。

话虽如此，我认为光线追踪并不是展示 OpenMPI 强大功能的好例子。我会把重点放在分散/聚集甚至更好的分散/减少上，因为那是 MPI 获得真正力量的地方:)

最基本的例子是计算前 N 个整数的总和。您需要有一个主线程，它适合值范围以汇总到一个数组中，并将这些范围分散到工作人员的数量上。

然后你需要做一个减少并根据显式公式检查你的结果，以获得免费的验证测试。

如果您正在寻找 MPI 的弱点，并行 grep 可能会起作用，其中 IO 是瓶颈。

* * *

**编辑**

您必须记住，MPI 基于无共享架构，其中节点使用消息进行通信，并且节点的数量是固定的。这两个因素为在其上运行的程序设置了一个非常严格的框架。长话短说，这种并行性非常适合数据并行应用程序，但不适用于任务并行应用程序，因为如果节点数量发生变化，您通常可以比任务更好地分发数据。

此外，MPI 没有隐式工作窃取的概念。如果一个节点完成工作，它只是等待其他节点完成。这意味着，您必须自己弄清楚最弱链接的处理方式。

MPI 在性能细节方面非常可定制，例如，MPI_SEND 有许多不同的变体。这为性能调整留下了很大的空间，这对于高性能计算很重要，MPI 是为此设计的，但主要是让“普通”程序员感到困惑，导致程序在并行运行时实际上变得更慢。也许你的例子很糟糕:)

关于放大/加速问题，嗯......

我建议您阅读阿姆达尔定律，您会发现仅通过添加更多节点来获得线性加速是不可能的 :)

我希望这有帮助。如果您仍有疑问，请随时发表评论:)

* * *

**编辑2**

也许与 MPI 完美结合的最佳缩放问题是 Pi 的经验估计。

在边长为 1 的正方形内成像半径为 1 的四分之一圆，然后您可以通过将随机点发射到正方形中来估计 Pi，并计算它们是否在四分之一圆内。

注意：这等于在 [0, 1] 中使用 x,y 生成元组 (x,y) 并测量其中有多少具有 x² + y² <= 1。

然后 Pi 大致等于

```
4 * Points in Circle / total Points 
```

在 MPI 中，您只需要收集所有线程生成的比率，开销很小，因此可以为您的集群提供完美的概念证明问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T09:46:37.213

与任何其他计算范例一样，在分布式内存编程中使用了某些完善的模式。一种这样的模式是“工作包”或“控制器/工人”（以前称为“主/从”，但现在这个名称被认为在政治上不正确）。它最适合您的情况，因为：

*   在适当的条件下，它与工人的数量成比例；
*   易于实施；
*   它具有内置的负载平衡。

基本前提非常简单。“控制器”进程有一个大表/作业队列，实际上执行一个大循环（可能是无限循环）。它侦听来自“工作”进程的消息并做出响应。在最简单的情况下，worker 只发送两种类型的消息：工作请求或计算结果。因此，控制器进程发送两种类型的消息：工作描述或终止请求。

这种模式的典型非平凡示例是为[Mandelbrot 集](http://en.wikipedia.org/wiki/Mandelbrot_set)着色。计算最终图像的每个像素完全独立于其他像素，因此即使在具有高延迟慢速网络连接（例如 GigE）的集群上也可以很好地扩展。在极端情况下，每个工作人员可以计算单个像素，但这会导致非常高的通信开销，因此最好将图像分割成小矩形。可以找到许多为 Mandelbrot 集着色的现成 MPI 代码。例如，[此代码](http://svn2.assembla.com/svn/parallelcomputing/pc3/MPI/mandelbrot/mandelbrot-ms.c)使用行分解，即单个作业项填充最终图像的一行。如果 MPI 进程的数量很大，则必须具有相当大的图像尺寸，否则负载将无法很好地平衡。

MPI 还具有允许以客户端/服务器方式生成额外进程或附加外部启动作业的机制。实现它们不是火箭科学，但仍然需要对高级 MPI 概念（如互通器）有一些了解，所以我暂时跳过。

# php - PHP 中的 JavaScript 谷歌分析

> ID：15299732
> 
> 赞同：0
> 
> 时间：2013-03-08T17:21:50.370
> 
> 标签：php, xml, google-analytics

我有一个文件，它有纯 PHP 代码，没有 HTML，代码生成一个 XML，我想要这个文件的谷歌分析，看看有多少请求。我怎样才能做到这一点？

例如，如果我这样做：

```
<?php

include ("analyticsTracking.php"); / / analyticsTracking contains the code from google
...

?> 
```

然后执行生成我的 XML 的代码不起作用，而不是打印它像普通 HTML 一样打印 XML，但没有我的标签。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:24:25.403

假设您提供的是 XML 文档，则无法在其中包含谷歌分析，因为它需要 Javascript/HTML。

如果 XML 是通过 XSLT 传递的，那么您可以在将 GA 代码转换为 HTML 时将其添加到页脚。

# mongodb - 在 mongodb 中查找一个偏好“Starts With”的文档

> ID：15299734
> 
> 赞同：2
> 
> 时间：2013-03-08T17:22:05.997
> 
> 标签：mongodb, mongoose, node-mongodb-native

我有一个名字的 mongo 数据库。

假设它看起来像这样：

```
{ "_id" : ObjectId("513a18c1f9e9b5c19fd80014"), "name" : "Mary Sue" }
{ "_id" : ObjectId("513a18d9f9e9b5c19fd80015"), "name" : "Tammy Sue" }
{ "_id" : ObjectId("513a18e4f9e9b5c19fd80016"), "name" : "Sueellen" }
{ "_id" : ObjectId("513a18eaf9e9b5c19fd80017"), "name" : "Ellen" }
{ "_id" : ObjectId("513a195af9e9b5c19fd80018"), "name" : "Sue" }
{ "_id" : ObjectId("513a1ccaf9e9b5c19fd80019"), "name" : "Eddie" } 
```

我希望能够对单个结果执行（不区分大小写）查询，该查询将优先考虑返回值，如下所示：
如果“name”*以*我的字符串开头，则返回第一个按字母顺序排列的“starts with”结果。
否则，如果 name*包含*我的字符串，则返回第一个字母结果。

示例：
搜索`/sue/i`应返回“Sue”。
搜索`/e/i`应返回“Eddie”。
搜索`/len/i`应返回“艾伦”。
搜索`/ue/i`应返回“Mary Sue”。

是否可以在不进行 2 次单独调用（一个 for `/^len/i`，然后`/len/i`如果我得到 0 个结果）或查找每个匹配项并自己解析结果的情况下执行此操作？

我碰巧在这里使用了 node.js 和 mongoose，但是一个通用的 mongo 答案也可以，所以我可以理解这些概念。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T08:24:16.540

这只是正确的正则表达式的问题。您可以在一个正则表达式中指定多个匹配项。值得一看[http://regex.learncodethehardway.org/book/](http://regex.learncodethehardway.org/book/)并深入了解正则表达式。或者从 www.mongodb.org 下载 2.4 并尝试新的文本索引选项

[http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)

# android - 为什么我的片段动画没有按预期播放？

> ID：15299735
> 
> 赞同：2
> 
> 时间：2013-03-08T17:22:10.103
> 
> 标签：android, android-fragments

我正在使用以下代码将片段添加到活动中。当用户单击按钮时，它会从底部滑入，当用户按下按钮时，它应该滑出到底部。为此，我实施`setCustomAnimation(int, out, popEnter, popExit)`. [根据 doc](http://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations%28int,%20int,%20int,%20int%29)，`popExit`动画是在按下时播放的。

幻灯片部分工作正常，但片段只是从屏幕上消失，而不是播放`popExit`动画。

下次用户按下按钮（`addFragment`被调用）显示片段时，滑出（`popExit`）动画将在滑入动画之前播放。**知道为什么吗？**

```
public void addFragment(Fragment){
    FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    fragmentTransaction.addToBackStack(f.getClass().getSimpleName());
    fragmentTransaction.setCustomAnimations(R.anim.slide_in_from_bottom, R.anim.slide_out_to_bottom,R.anim.slide_in_from_bottom, R.anim.slide_out_to_bottom);
    fragmentTransaction.add(R.id.fragment_container, f);
    fragmentTransaction.commit(); 
```

}

# java - 程序编译但不运行

> ID：15299736
> 
> 赞同：0
> 
> 时间：2013-03-08T17:22:10.307
> 
> 标签：java, if-statement, java.util.scanner

这是我必须完成的任务。

有人可以引导我朝着正确的方向前进吗？

程序可以编译，但无法正确运行。

错误是 InputMissmatch 异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:29:22.793

您收到的错误意味着您正在尝试将某种数据用作另一种数据，在您的情况下，您可能正在尝试将字符串用作浮点数。

在使用 Scanner 类中的任何**下一个**方法时，您应该首先确保有来自用户的适当输入。

为此，您需要使用**has**方法。

您的问题是您在使用 Scanner.nextFloat(); 之前没有检查输入是否正确。

你应该这样做：

```
if (hope.hasNextFloat())
{
    // Code to execute when you have a proper float, 
    // which you can retrieve with hope.nextFloat()
}
else
{ 
    // Code to execute when the user input is not a float
    // Here you should treat it properly, maybe asking for new input
} 
```

这应该足以为您指明正确的方向。

此外，请查看[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html) api 文档以获取更多详细信息。

**编辑**

此外，您要求用户输入字符（或字符串）：“A”、“B”等...，但您正在尝试将它们与浮点数进行比较。这是错误的，您应该将它们与字符串或字符进行比较，如下所示：

```
if (hope.hasNextString())
{
   if (hope.nextString().equals("A"))
   {
       // Code for option "A"
   }
   else if (hope.nextString().equals("B"))
   {
       // Code for option "B"
   }
   else ...
} 
```

你可以在那里使用一个开关，但你似乎对 java 还不是很熟悉，所以我将它留到另一个时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:37:48.883

您的问题是您在浮点字段中输入了一个字母。在您的程序中，您要求用户输入浮点数：

```
A = hope.nextFloat(); 
```

但是如果你输入字母“A”，你会得到一个异常，因为“A”不是一个浮点数，它是一个字符串。

解决您的问题的一种更简单的方法是，您只需读取用户从扫描仪输入的输入，而不是拥有所有选择字段，例如：

```
String choice = hope.next(); 
```

接下来在 if 语句中，检查字符串选择的值是否等于特定字母，例如

```
if (choice.equals("A")) {
        number4 = (number1 + number2 + number3);
        System.out.printf("Your results are:" + (number4));
    } 
```

你可以为你拥有的其他选择做同样的事情。

# iphone - 使用按钮更改页面 InXCode

> ID：15299741
> 
> 赞同：0
> 
> 时间：2013-03-08T17:22:36.050
> 
> 标签：iphone, xcode, uiviewcontroller

我正在为 iphone 制作一个带有多个页面的 xcode 应用程序。如何通过单击按钮切换到应用程序中的不同页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:07:22.440

正如 Aaron 所提到的，一种简单的方法是将视图控制器嵌入到导航控制器中。如果您正在使用情节提要，则在情节提要上选择您的视图控制器，然后单击菜单项编辑器 -> 嵌入 -> 导航控制器。为了尝试导航的工作方式，请通过 Control + 单击将登录视图控制器上的登录按钮中的 push segue 添加到另一个视图控制器（您要导航到的新“页面”将是情节提要上的另一个视图控制器） + 从按钮拖动到另一个视图控制器。

您还可以在没有 segue 的情况下以编程方式导航到另一个视图控制器。在单击登录按钮时调用的方法上，您可以像这样调用另一个视图控制器（新的“页面”）：

```
// Create a new view controller
UIViewController *myController = [[UIViewController alloc] init];
// If you have the view controller defined in the storyboard, and you have give it a Storyboard Id, let's say "MyViewController", you can get it like this:
// UIViewController *myController = [self.navigationController.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

// Push/Navigate to the new view controller
[self.navigationController pushNavigationController:myController animated:YES]; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:13:27.877

你可以使用这个：

```
UIViewController *viewControllerYouWant = [[UIViewController alloc] init];
[self presentViewController:viewControllerYouWant]; 
```

如果您触摸登录按钮，您将转到另一个视图。如果您在另一个视图上，请使用相同的代码，仅包括您要使用的视图控制器。

# html - CSS3 中的搜索框大小不合适

> ID：15299747
> 
> 赞同：0
> 
> 时间：2013-03-08T17:22:57.417
> 
> 标签：html, forms, css, webkit

我正在尝试根据此站点的代码制作一个漂亮的 CSS3 搜索框：http: [//speckyboy.com/2012/02/15/how-to-build-a-stylish-css3-search-box /](http://speckyboy.com/2012/02/15/how-to-build-a-stylish-css3-search-box/)

除了实际的搜索框（在 Safari 和 Chrome 中）之外，所有内容看起来都与该站点上的图片中的内容相同：

![盒子](../Images/296c4fc320d5690665d262313ceb1ab7.png)

有什么帮助让搜索框看起来像它应该的样子吗？

更新：这是代码（您也可以在上面的链接中获得）：

```
/* Form wrapper styling */
.form-wrapper {
    width: 450px;
    padding: 15px;
    margin: 150px auto 50px auto;
    background: #444;
    background: rgba(0,0,0,.2);
    border-radius: 10px;
    box-shadow: 0 1px 1px rgba(0,0,0,.4) inset, 0 1px 0 rgba(255,255,255,.2);
}

/* Form text input */

.form-wrapper input {
    width: 330px;
    height: 20px;
    padding: 10px 5px;
    float: left;    
    font: bold 15px 'lucida sans', 'trebuchet MS', 'Tahoma';
    border: 0;
    background: #eee;
    border-radius: 3px 0 0 3px;      
}

.form-wrapper input:focus {
    outline: 0;
    background: #fff;
    box-shadow: 0 0 2px rgba(0,0,0,.8) inset;
}

.form-wrapper input::-webkit-input-placeholder {
   color: #999;
   font-weight: normal;
   font-style: italic;
}

.form-wrapper input:-moz-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}

.form-wrapper input:-ms-input-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}    

/* Form submit button */
.form-wrapper button {
    overflow: visible;
    position: relative;
    float: right;
    border: 0;
    padding: 0;
    cursor: pointer;
    height: 40px;
    width: 110px;
    font: bold 15px/40px 'lucida sans', 'trebuchet MS', 'Tahoma';
    color: #fff;
    text-transform: uppercase;
    background: #d83c3c;
    border-radius: 0 3px 3px 0;      
    text-shadow: 0 -1px 0 rgba(0, 0 ,0, .3);
}   

.form-wrapper button:hover{     
    background: #e54040;
}   

.form-wrapper button:active,
.form-wrapper button:focus{   
    background: #c42f2f;
    outline: 0;   
}

.form-wrapper button:before { /* left arrow */
    content: '';
    position: absolute;
    border-width: 8px 8px 8px 0;
    border-style: solid solid solid none;
    border-color: transparent #d83c3c transparent;
    top: 12px;
    left: -6px;
}

.form-wrapper button:hover:before{
    border-right-color: #e54040;
}

.form-wrapper button:focus:before,
.form-wrapper button:active:before{
        border-right-color: #c42f2f;
}      

.form-wrapper button::-moz-focus-inner { /* remove extra button spacing for Mozilla Firefox */
    border: 0;
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:32:50.130

Box-sizing 是你的朋友：

```
.font-wrapper input {
  ...
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

# postgresql - Postgres 在一个查询中结合选择和插入

> ID：15299749
> 
> 赞同：0
> 
> 时间：2013-03-08T17:23:14.710
> 
> 标签：postgresql

原谅这个愚蠢的问题，似乎为时已晚。

如何将 PostgreSQL 中的这两个查询合并为一个。那个“NewUserAge”从查询二中插入到字段年龄中？

```
SELECT max(age+1) as NewUserAge 
  FROM mytable;

INSERT INTO 
    mytable (age,name) 
VALUES
    (11,'Bert'); 
```

谢谢你的帮助，

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:24:39.857

```
INSERT INTO mytable (age,name) 
SELECT  max(age) + 1, 'Bert'
FROM myTable 
```

# c# - 如何在 SQL Select 语句中仅比较日期（无时间戳）

> ID：15299755
> 
> 赞同：3
> 
> 时间：2013-03-08T17:23:39.593
> 
> 标签：c#, .net, sql, sql-server

我有一个 SQL SELECT 语句来根据当前日期从我的表中选择记录。我想要做的是比较没有时间戳的日期，因为时间不匹配。我只关心日期。

这是我所拥有的：

```
string SQL = @"SELECT Trans_Set_Id FROM EDI10002 " +
             @"WHERE (Tp_Id = '" + tpid + "' AND Rec_Date = '" + DateTime.Now.ToShortDateString() + @"')"; 
```

我遇到的问题是如何仅从“Rec_Date”字段中获取日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:26:46.997

如果您使用的是 sql server 2008 及更高版本，您可以这样做：

```
select cast( getdate() as date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:27:34.283

你用的是什么数据库？

查看 mssql 的 DATEPART 函数 [http://msdn.microsoft.com/en-us/library/ms174420.aspx](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T17:31:28.477

一个稍微老式的方法是：

```
string SQL = "SELECT Trans_Set_Id FROM EDI10002 WHERE (Tp_Id = '" + tpid + "' AND CONVERT(varchar(10),Rec_Date, 101) = CONVERT(varchar(10), " + DateTime.Now.ToShortDateString() + ", 101))"; 
```

您基本上是在转换为 MM/dd/YYYY，然后截断结尾。

编辑：使用 getdate()

```
string SQL = "SELECT Trans_Set_Id FROM EDI10002 WHERE (Tp_Id = '" + tpid + "' AND CONVERT(varchar(10),Rec_Date, 101) = CONVERT(varchar(10), getdate(), 101))"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T17:24:49.047

`TRUNC(Rec_Date)`如果您只关心日期部分并且想要删除时间部分，请尝试使用。就像是：

```
... "' AND TRUNC(Rec_Date) = '" + DateTime.Today... 
```

*（这在甲骨文工作......它可能只是甲骨文的事情......）*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T18:35:56.663

以下内容应适用于所有版本的 SQL Server，无论 的类型如何`Rec_Date`：

```
SELECT Trans_Set_Id 
FROM EDI10002 
WHERE Tp_Id = @tpid 
      AND (Rec_Date >= DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
           AND Rec_Date < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 1)) 
```

使用`DATEADD(day, DATEDIFF(...), ...)`获取特定日期的开始。这意味着如果您在 上定义了一个索引`Rec_Date`，它可以用于检索请求的行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T03:29:16.850

首先你想摆脱使用字符串连接构建动态 sql 语句的习惯，你想使用参数化查询。

其次，在您的示例中，您不需要从客户端提供日期，都可以在 sql 中完成。

```
string SQL = @"SELECT Trans_Set_Id FROM EDI10002 " +
   @"WHERE (Tp_Id = @tpid" + 
   @" AND convert(varchar(10, Rec_Date, 121) = CONVERT(varchar(10), getdate(), 121) )"; 
```

或者如果您使用的是 2008

```
string SQL = @"SELECT Trans_Set_Id FROM EDI10002 " +
   @"WHERE (Tp_Id = @tpid" + 
   @" AND cast(Rec_Date as date) = cast(getdate() as date) )"; 
```

将@tpid 作为参数添加到您的 sql 命令中，您就完成了。

# javascript - 使用链接的 jQuery 函数动态添加表单元素

> ID：15299756
> 
> 赞同：1
> 
> 时间：2013-03-08T17:23:39.537
> 
> 标签：javascript, asp.net-mvc-4, telerik-mvc

我有一个网站，用户可以在提交列表之前配置项目列表。每个项目由一行级联组合框表示（每个选择都会更新以下组合框中的可能值）。

用户可以根据需要添加任意数量的项目，对其进行配置，然后提交。

要执行添加操作，我有一个这样的 javascript 函数：

```
function newAction() {
    // Get value of index so we can form our ids
    var index = $("#ItemTable").find("#Item").length;

    //copy the table row
    var newItemRow = $("#Item:last-of-type").clone(true);

    // Update all of the ids
    var rowTextBefore = newItemRow.html();
    var rowText = rowTextBefore.replace("[" + index - 1 + "]", "[" + index + "]");
    newItemRow.html(rowText);

    // Append the row to the end of the table
    $("#ItemTable").append(newItemRow);
} 
```

这一切都很好。

但是为了启用级联组合框，每行都会生成一堆 jQuery 内容。它看起来像这样：

```
jQuery(document).ready(function(){
    jQuery('#Items[0]_Name').tComboBox({highlightFirst:false,     
        cascadeTo:'Items[0]_Accessories', data:[{...data here...]});
    jQuery('#Items[0]_Accessories').tComboBox({highlightFirst:false, 
    // etc.
} 
```

如何克隆这些东西以及文档元素，以便我动态添加的行也实现级联组合框？

# javascript - 如何获得触发的 MutationObserver 的堆栈跟踪？

> ID：15299759
> 
> 赞同：17
> 
> 时间：2013-03-08T17:23:47.780
> 
> 标签：javascript, mutation-observers

首先，这不是“如何创建突变观察者？” 发布，我已经看到了 API。

我想知道是否有人知道一种显示突变发生时间的“来源”的方法。这很可能是某种解决方法——我在 API 文档中看不到任何提及。

我试图找出一个元素在哪里被`display`设置`style`为`none`.

我的代码如下所示：

```
var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function (mutation) {
        if (mutation.attributeName === "style") {
            var extendedMutation = _.extend({}, mutation, {
                newValue: $(mutation.target).attr("style")
            });

            console.log(extendedMutation);
        }
      });
});

observer.observe(row.element[0], { attributes: true, attributeOldValue: true }); 
```

我有几个突变事件，它们看起来是这样的：

```
{
    addedNodes: NodeList[]

    attributeName: "style"

    attributeNamespace: null

    newValue: "display: none;"

    nextSibling: null

    oldValue: ""

    previousSibling: null

    removedNodes: NodeList[]

    target: li#d526d311-e6e0-4ef1-a3a1-f8686bbb468f.group

    type: "attributes"

} 
```

我只是想知道它来自 JS 源代码的哪个位置！有任何想法吗？

请注意，我尝试了 ctrl+f，但无济于事。

调试器/异常输出（也尝试了 Chrome 的 WebkitMutationObserver，结果相同）：

![http://i.imgur.com/jYeqCPX.png](../Images/2c5bc95045cd3674a3213760d4fde436.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-15T10:45:14.370

我知道这个线程已经很老了，但是现在 Chrome 有一个工具可以跟踪异步调用，我想提一下。

我认为 Chrome 调用堆栈 Async 选项可以实现异步调用的回溯。此选项可以在开发者工具 -> 调用堆栈选项卡中找到。通过打开 Async 选项并在 MutationObserver 回调函数上放置断点，我们将能够看到完整的调用堆栈。

希望能帮助到你。

# angularjs - AngularJS：在页面的两个不同的非嵌套部分共享同一个控制器的数据

> ID：15299768
> 
> 赞同：6
> 
> 时间：2013-03-08T17:24:24.333
> 
> 标签：angularjs

我想在页面的两个位置之间共享一个控制器的数据。例如：

```
<div ng-app="myApp">
    <div ng-controller="myController">
        <input type="text" ng-model="x" /> {{x}}
    </div>
</div>
<!-- these are in totally different places and I do not want, nor can't nest them -->
<div ng-app="myApp">
    <div ng-controller="myController">
        <input type="text" ng-model="x" /> {{x}}
    </div>
</div> 
```

当然，这个：

```
var myApp = angular.module('myApp', []);
myApp.controller('myController', function($scope) {
    $scope.x = 'test';
}); 
```

我该怎么做，无论我输入什么，第一个输入文本都会反映在第二个中？反之亦然？基本上相同的数据被传播到这两个部分，同时保持数据的单个副本。

JSFiddle在这里：http: [//jsfiddle.net/LETAd/](http://jsfiddle.net/LETAd/)

PS：我手动引导它，如果这有任何相关性。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:28:21.790

要在控制器之间共享数据，通常服务是您的最佳选择。将共享数据放入服务，并将服务注入控制器：

```
function myController($scope, MyService) { 
```

然后每个作用域/控制器实例将能够访问共享数据。

请注意，服务是单例的，因此您的共享数据只有一个实例。

这是一个[小提琴](http://jsfiddle.net/whnSs/)（不是我写的），展示了两个控制器如何共享数据。

另请参阅[AngularJS：如何在控制器之间传递变量？](https://stackoverflow.com/questions/12008908/pass-variables-between-controllers)和
[Angularjs：两种方式数据绑定和控制器重载](https://stackoverflow.com/questions/13840489/angularjs-two-way-data-bindings-and-controller-reload)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:10:11.233

理想情况下，您应该只在一个页面中运行一个应用程序。由于您还需要在控制器之间进行通信，因此您应该真正运行单个应用程序。可能在`body`或`html`。然后你可以创建一个主控制器来封装你的所有控制器。（控制器继承）。

这是它的样子：

```
<html ng-app="myApp">
  <head>...</head>
  <body ng-controller="MainCtrl">
    <div ng-controller="MyCtrl">
      <input type="text" ng-model="mainView.x" /> {{x}}
    </div>
    <div ng-controller="MyCtrl">
      <input type="text" ng-model="mainView.x" /> {{x}}
    </div> 
  </body> 
```

和 JS：

```
function MainCtrl($scope) {
  $scope.mainView = {};
}
function MyCtrl($scope) {

} 
```

我们在 MainController 上创建了一个 mainView 对象，并且由于 MyController 及其作用域原型继承自 MainController，我们可以实现它。
您应该注意一个警告，当您使用 时`ngModel`，几乎总是最好在某处有一个点（从 angularjs 的作者转述）。

由于 javascript 的原型继承：

```
// In MainCtrl
$scope.mainView.x = "hello";
$scope.myX = "hello";

// In MyCtrl
$scope.mainView.x
>> "hello"
$scope.myX
>> "hello"
$scope.mainView.x = "welcome";
$scope.myX = "welcome";

// In MainCtrl
$scope.mainView.x
>> "welcome"
$scope.myX
>> "hello" 
```

当您在 javascript 中请求对象中的属性时，它会查看其属性以查看是否有一个，如果没有，它会在原型链（父级）中向上，并在那里查找它，它会一直向上直到找到任何或位于原型链的末端。

因此，当我们设置 时`$scope.myX`，我们实际上并没有`myX`在父范围内更改，而是`myX`在当前范围内创建了一个名为的属性；因为原型中的层次结构。但是，当我们设置 $scope.mainView.x 时，我们首先*要求* `mainView` *然后*设置`x`，然后导致更改父范围中的值。

我知道这感觉与最初的问题无关，但是当一个人进入控制器和范围继承时，肯定会遭受这种痛苦。

# java - 调用具有除 void 以外的返回类型的函数作为 Java 中的单独语句

> ID：15299770
> 
> 赞同：3
> 
> 时间：2013-03-08T17:24:28.710
> 
> 标签：java

我注意到具有返回类型（如 double、int 等）的函数可以像 voids 一样被称为语句。像这样：

```
int foo() { return 5; }
....
foo(); 
```

这是什么意思？它是否真的只是执行函数然后丢弃返回值，因此目的是创建可以充当 void 和返回类型函数以供多用途使用的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:25:35.463

正确的。

Java 不强制您在调用函数时使用返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T17:25:48.410

是的，返回值根本没有被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:25:43.837

是的，返回值将被丢弃。

编译器不会强迫您使用该值。但也许你应该使用那个值。

# sqlite - 在 SQLite.cs 中找不到类型或命名空间“Sqlite”

> ID：15299779
> 
> 赞同：7
> 
> 时间：2013-03-08T17:24:57.723
> 
> 标签：sqlite, windows-phone-8

我有一个使用 SQLite 的 Windows Phone 8 应用程序。该应用程序具有许多数据库功能，并包含一个 sqlite 数据库文件，在运行该应用程序时，该文件会被复制到本地文件夹并进行访问。在我第一次切换到发布版本之前，所有这些都没有问题，但它不起作用。

我通过删除所有 NuGet 引用和 .dll 引用来“修复”此问题，并按照此处的步骤重新开始：[A Workaround to Use SQLite in a Windows Phone 8 Application](http://architects.dzone.com/articles/workaround-use-sqlite-windows)

我有一个令人沮丧的问题，在从调试切换到发布构建后，反之亦然，“Sqlite”再次不再被识别。

我收到以下错误：

```
The type or namespace name 'Sqlite' could not be found (are you missing a using directive or an assembly reference?) 
```

这些错误来自 SQLite.cs，特别是这些行：

```
using Sqlite3 = Sqlite.Sqlite3;
using Sqlite3DatabaseHandle = Sqlite.Database;
using Sqlite3Statement = Sqlite.Statement; 
```

这怎么可能？我在这里看到了一些类似的问题，但他们都只是说删除并重新添加引用，问题就莫名其妙地消失了。这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T11:48:50.573

按照[本文](http://social.technet.microsoft.com/wiki/contents/articles/18204.how-to-use-sqlite-with-a-windows-phone-8-application.aspx "文章")配置您的项目。这里也解释[了](https://stackoverflow.com/a/19453315/2654404 "话题")

> 其次，您需要访问 GITHUB 网站并 **[下载 SQLite-net-wp8 的代码](https://github.com/peterhuene/sqlite-net-wp8 "github")**。这是一个 c++ 项目，您需要访问 sqlite 数据库。

确保您设置了条件编译符号：USE_WP8_NATIVE_SQLITE 并且版本是 x86 或 ARM。

在 VS Professional 2013 上测试，发布版本（x86，ARM）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:18:24.597

去彻底的波纹管链接

[Windows Phone 7 通过 Sqlite Client for Windows Phone 进行本地数据库编程](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)

希望对你有帮助

# spring - org.apache.tiles.jsp.taglib.InsertAttributeTag 类的 TLD 为 SimpleTag 指定了无效的正文内容 (JSP)

> ID：15299789
> 
> 赞同：0
> 
> 时间：2013-03-08T17:25:29.660
> 
> 标签：spring, jsp, tld, apache-tiles

我使用 Java WEB 应用程序：maven+spring_mvc+jsp+Apache-Tiles+eclipse+tomcat。

Apllication良好的启动和Eclipse（tomcat插件，来自文件）的工作，但是当我构建war-file并部署他时，我得到了错误：

```
*org.apache.jasper.JasperException: /WEB-INF/pages/layouts/layout.jsp (line: 23, column: 3) The TLD for the class org.apache.tiles.jsp.taglib.InsertAttributeTag specifies an invalid body-content (JSP) for a SimpleTag.
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:149)
    org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:820)
    org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
    org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1795)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:217)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)* 
```

我的 layouts.jsp：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/unetProj/bootstrap/css/bootstrap.min.css" rel="stylesheet"
        media="screen">
</head>

<body>
    <script src="/unetProj/bootstrap/js/bootstrap.min.js"></script>

    <div id="form_container">
        <div id="header">
            <tiles:insertAttribute name="header" />
        </div>

        <tiles:insertAttribute name="body" />

        <div id="footer">
            <tiles:insertAttribute name="footer" />
        </div>
    </div>
</body>

</html> 
```

布局.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>

    <definition name="base.definition" template="/WEB-INF/pages/layouts/layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/WEB-INF/pages/layouts/header.jsp" />
        <put-attribute name="menu" value="/WEB-INF/pages/layouts/menu.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/WEB-INF/pages/layouts/footer.jsp" />
  </definition>

</tiles-definitions> 
```

mvc-dispather-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <context:component-scan base-package="controller">
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    </context:component-scan> 

     <!-- Tiles Configuration -->
    <beans:bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
        <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </beans:bean>

    <beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
        <beans:property name="definitions">
            <beans:list>
                <beans:value>/WEB-INF/pages/layouts/layouts.xml</beans:value>
                <!-- Scan views directory for Tiles configurations -->
                <beans:value>/WEB-INF/pages/**/views.xml</beans:value>
            </beans:list>
        </beans:property>
    </beans:bean>

</beans:beans> 
```

一个views.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN" "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>

    <definition extends="base.definition" name="entity/index">
        <put-attribute name="body" value="/WEB-INF/pages/entity/index.jsp" />
    </definition>

    <definition extends="base.definition" name="entity/addForm">
        <put-attribute name="body" value="/WEB-INF/pages/entity/addForm.jsp" />
    </definition>

    <definition extends="base.definition" name="entity/add">
        <put-attribute name="body" value="/WEB-INF/pages/entity/add.jsp" />
    </definition>

</tiles-definitions> 
```

# callback - 使用 Ajax、下拉列表和页面验证

> ID：15299791
> 
> 赞同：1
> 
> 时间：2013-03-08T17:25:32.333
> 
> 标签：callback, arguments, postback

使用 Ajax 我填写了 Country、State 和 city 下拉列表。土地变更状态已填写，状态变更城市已正确填写。然后，当我尝试保存页面时，我遇到了这个：`Invalid postback or callback argument`。搜索发现这是由于 ddl.selectedvalu 的变化与 asp.net 分配的初始值不同。现在我的问题是，我怎样才能让 asp.net 知道新的 ddl 值是有效的？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:39:25.850

在许多页面中建议使用 EnableEventValidation="false"，但我不喜欢使用它。有人说使用 Render 并添加价值来通知 .Net，如下所示：

```
 protected override void Render(System.Web.UI.HtmlTextWriter writer)
{

    ClientScript.RegisterForEventValidation("ddlLanguages ", "English");

    ClientScript.RegisterForEventValidation("ddlLanguages ", "Tamil");

    ClientScript.RegisterForEventValidation("ddlLanguages ", "Hindi");

    base.Render(writer);

} 
```

但是如何使用呢？放在哪里？为了更好地理解，我在这里放了一个示例代码，包括数据库脚本： [hesab20.com/DownLoad/Ajax.zip](http://hesab20.com/DownLoad/Ajax.zip) 在这个示例中 Javascript 用于填充下拉列表。但是当单击按钮被执行并发生回发时，就会发生错误。如果您有这方面的经验，请提供帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:26:34.753

请运行示例代码并更改下拉列表，自动填充另一个，这意味着列表项文本和值已完全更改。最后点击回帖按钮。您必须看到发生了错误：无效的回发或回调参数。事件验证 .... 并注意：EnableEventValidation="true" 谢谢

# ios - 如何在 UIButton 中找出 UIControlStateNomal 和 UIControlStateSeleted

> ID：15299793
> 
> 赞同：0
> 
> 时间：2013-03-08T17:25:36.273
> 
> 标签：ios, objective-c, macos

UIButton 的方法 - (void)setImage:(UIImage *)image forState:(UIControlState)state。

因为如果您没有为 Selected 状态设置图像，那么当按钮被选中时，Normal 图像也会出现。

我的意思是我想为正常状态设置图像，并且只选择标题（无图像）？

对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:27:11.490

You call `setImage:forState:` as many times as you need:

```
[someButton setImage:someNormalImage forState:UIControlStateNormal];
[someButton setImage:someSelectedImage forState:UIControlStateSelected]; 
```

**Update**: It appears you want a button that shows just an image for the normal state and just a title for the selected state. I don't know if the following will work but give it a try:

```
[someButton setImage:someNormalImage forState:UIControlStateNormal];
[someButton setImage:nil forState:UIControlStateSelected];
[someButton setTitle:@"Some Title" forState:UIControlStateSelected]; 
```

# jsp - 如何在 JSP/php 中使用服务器-客户端模型开发社区广播

> ID：15299794
> 
> 赞同：1
> 
> 时间：2013-03-08T17:25:36.803
> 
> 标签：jsp, networking, web-applications, client-server

我想使用 JSP/php 开发一个基于服务器客户端模型的 Web 应用程序，以便它支持音频文件的流式传输（仅限“.mp3”格式）。基本上，服务器将读取音频文件并将其广播给所有连接的客户端，他们将能够收听音频。应用程序应在 LAN 上运行。我知道有人问过类似的问题，但我不想要代码，如果有人可以建议一些我可以阅读的参考资料，或者请描述相同的高级实现，我将不胜感激。提前致谢。

# android - AsyncTask 如何在没有死锁的情况下等待另一个

> ID：15299795
> 
> 赞同：0
> 
> 时间：2013-03-08T17:25:39.067
> 
> 标签：android, multithreading, android-asynctask, notify

我正在尝试实现 2 个异步任务，其中一个应该等待另一个完成。

我为它做了一个测试用例，看起来像这样：

```
public class MainActivity extends Activity{

    public static boolean SYNCING = false;
    public static Object LOCK = new Object();

    public static void setSync(){
        Log.i(TAG, "setting Sync=true");
        synchronized (LOCK) {
            SYNCING = true;
        }
    }

    public static void waitForSync(){
        Log.i(TAG, "waiting for Sync");
        synchronized (LOCK) {
            try{
                while (SYNCING){
                    LOCK.wait();
                }
            } catch (InterruptedException ignore){}
        }
    }

    public static void setSyncFinish(){
        Log.i(TAG, "setSyncFinish to notify all");
        synchronized (LOCK) {
            SYNCING = false;
            LOCK.notifyAll();
        }
    }

    public class WaitingOnLoaderTask extends AsyncTask<Void, Void, Void>{

        @Override
        protected Void doInBackground(Void... params) {
            Log.i(TAG, "doInBackground of WaitingForLoaderTask");

            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {

            }

            waitForSync();
            Log.i(TAG, "finishedWaiting!");
            return null;
        }

    }

    public class LoaderTask extends AsyncTask<Void, Void, Void>{

        long mRuntime;
        int mTimes;

        public LoaderTask(long runtime, int times){
            mRuntime = runtime;
            mTimes = times;
        }

        @Override
        protected Void doInBackground(Void... params) {
            while(mTimes >= 0){
                Log.i(TAG, "sleeping for " + mTimes + " times for " + mRuntime + " milliseconds");
                mTimes--;
                try {
                    Thread.sleep(mRuntime);
                } catch (InterruptedException e) {
                    Log.e("MainActivity", "Interrupted", e);
                }
            }

            setSyncFinish();

            return null;
        }

    }
} 
```

但我无法`WaitingOnLoaderTask`正确等待。如果我在 onCreate 中运行它

```
new WaitingOnLoaderTask().execute((Void[])null);
new LoaderTask(1000, 5).execute((Void[])null); 
```

我得到这样的 logOutput（发生死锁）：

```
03-08 18:17:23.309: I/myUniqueLogTag(4432): setting Sync=true
03-08 18:17:23.317: I/myUniqueLogTag(4432): doInBackground of WaitingForLoaderTask
03-08 18:17:23.817: I/myUniqueLogTag(4432): waiting for Sync 
```

和上

```
new LoaderTask(1000, 5).execute((Void[])null);
new WaitingOnLoaderTask().execute((Void[])null); 
```

我得到这样的日志：

```
03-08 18:18:53.082: I/myUniqueLogTag(4621): sleeping for 5 times for 1000 milliseconds
03-08 18:18:54.082: I/myUniqueLogTag(4621): sleeping for 4 times for 1000 milliseconds
03-08 18:18:55.090: I/myUniqueLogTag(4621): sleeping for 3 times for 1000 milliseconds
03-08 18:18:56.082: I/myUniqueLogTag(4621): sleeping for 2 times for 1000 milliseconds
03-08 18:18:57.090: I/myUniqueLogTag(4621): sleeping for 1 times for 1000 milliseconds
03-08 18:18:58.106: I/myUniqueLogTag(4621): sleeping for 0 times for 1000 milliseconds
03-08 18:18:59.113: I/myUniqueLogTag(4621): doInBackground of WaitingForLoaderTask
03-08 18:18:59.113: I/myUniqueLogTag(4621): setSyncFinish to notify all
03-08 18:18:59.621: I/myUniqueLogTag(4621): waiting for Sync
03-08 18:18:59.621: I/myUniqueLogTag(4621): finishedWaiting! 
```

所以我想一个是阻止另一个运行。他们是否`doInBackground`实际上在同一个线程中计算它们，并`LOCK.wait()`阻止该线程进一步执行？

有没有办法修复它（并保持与 Android 2.2 兼容）？

注意：第二个 Time 基本上是我想要的，但在其他 Task 实现中，我不能确定`WaitingOnLoaderTask`只有在另一个完成时才执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:55:22.873

您最好的选择是使用 Geobits 建议。

您可以使用 onPostExecute() 函数调用下一个异步任务，以便执行它：

```
class WaitingOnLoaderTask extends AsyncTask<Void,Void,Void>
{
    protected void onPreExecute(Void)
    {
        super.onPreExecute();
    }

    protected void doInBackground(Void... params)
    {
        //Commands for first AsyncTask
    }

    protected void onPostExecute(Void)
    {
        //Call AsyncTask 2
    }
} 
```

这样，它将等到任务 1 完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:02:08.873

您的代码在 Android 3.2 及更低版本上按预期工作。在更高的 Android 版本上，AsyncTasks 不会并行执行，试试这个让它在 Android 4+ 上工作：

```
LoaderTask loaderTask = new LoaderTask(1000, 5);
WaitingOnLoaderTask waitingTask = new WaitingOnLoaderTask();
if (Build.VERSION.SDK_INT >= 14) {
    loaderTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
    waitingTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    loaderTask.execute();
    waitingTask.execute();
} 
```

注意：您应该标记您的 AsyncTasks`static`以避免在配置更改（例如旋转）时泄漏 Activity。

# mysql - MYSQL - 整数或短字符串？

> ID：15299796
> 
> 赞同：1
> 
> 时间：2013-03-08T17:25:42.530
> 
> 标签：mysql, sql

我将创建一个表，其行数在 1000-20000 之间，并且我的字段可能会重复很多...大约 60% 的行将具有此值，其中大约每 50- 100 有一个共同的价值。

我最近一直担心效率问题，我想知道是否最好将此字符串存储在每一行（它将在 8-20 个字符之间）或创建另一个表并将它们与其代表 ID 链接。 .所以在这个表中有~1-50行用整数替换大约300-5000个字符串？

这是一个好方法，还是根本没有必要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:46:16.040

是的，在大多数情况下这是一个好方法。它被称为标准化，主要有两个原因：

*   删除重复数据
*   避免重复实体

我无法从你的问题中看出你的情况是什么原因。

两者之间的区别在于，第一个重用恰好看起来相同的值，而第二个连接具有相同含义的值。实际的区别在于，如果一个值发生变化会发生什么，即，如果一个记录的值发生变化，值本身是否会发生变化，以便所有其他使用它的记录也会发生变化，或者该记录是否应该连接到一个新值，这样其他记录保持不变。

如果是第一个原因，那么您将节省数据库中的空间，但更新记录会更加复杂。如果是第二个原因，您不仅可以节省空间，还可以降低不一致的风险，因为值只存储在一个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:27:55.093

这是为字符串创建查找表的好方法。这样，您可以在整数值上构建更有效的索引。这不是绝对必要的，但作为一种好的做法，我会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:29:00.080

我建议使用`int`带有外键的查找表（就像您在第二个场景中描述的那样）。这将导致索引比索引 VARCHAR 小得多，因此所需的存储空间会更小。它也应该表现更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T17:38:31.630

Avitus 是对的，创建查找通常是一个好习惯。

考虑一下您将在其中使用此表的 JOINS。1000-20000 行需要 MySQL 处理的并不多。如果您没有，我不会为查找而烦恼，只需索引该列即可。

但是，一旦您开始与其他人（相同大小）加入表格，这就是性能损失的来源，您可以（很可能）通过引入查找来补偿。

# elasticsearch - ElasticSearch：将“not_analyzed”字段设置为“store”：“yes”的影响？

> ID：15299799
> 
> 赞同：35
> 
> 时间：2013-03-08T17:25:48.317
> 
> 标签：elasticsearch

假设我`not_analyzed`在映射中指定了一个字符串字段。如果我再添`"store":"yes"`加到映射中，ElasticSearch 会复制存储吗？我对`not_analyzed`字段的理解是，它们不是通过按原样索引的分析器运行的*，*但客户端能够与之匹配。因此，如果一个字段同时是`not_analyzed`and `store:yes`，这可能会导致 ElasticSearch 保留字符串的两个副本。

我的问题：

*   如果一个字符串字段同时存储为`not_analyzed`and `store:yes`，是否会有重复存储的字符串？

我希望这已经足够清楚了。谢谢！

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-10T09:18:39.420

您在 lucene 中混淆了索引字段和存储字段的概念，这是在弹性搜索之上构建的库。

当一个字段进入倒排索引时，它就会被索引，lucene 使用这种数据结构来提供其强大而快速的全文搜索功能。如果要搜索某个字段，则必须对其进行索引。当你索引一个字段时，你可以决定是要按原样索引它，还是要分析它，这意味着决定一个标记器应用到它，这将生成一个标记列表（单词）和一个标记列表可以修改生成的令牌（甚至添加或删除一些）的过滤器。索引字段的方式会影响您对其进行搜索的方式。如果您索引一个字段但不对其进行分析，并且其文本由多个单词组成，您将能够找到该文档仅搜索该确切的特定文本，包括空格。

当您希望能够检索字段时，它会被存储。假设 Lucene 也提供了某种存储，它与倒排索引本身没有任何关系。当你使用 lucene 搜索时，你会得到一个匹配的文档 ID 列表。然后，您可以从他们存储的字段中检索一些文本，这就是您在搜索结果中真正显示的内容。如果您不存储字段，您将永远无法从 lucene 中取回它（但这对于 elasticsearch 来说并非如此，我将在下面解释）。

您可以拥有只想搜索且从不显示的字段：已编入索引且未存储（默认在 lucene 中）。
您可以拥有要搜索和检索的字段：索引和存储。
您可以拥有不想搜索的字段，但您确实想检索以显示它们。

因此，这两个数据结构彼此不相关。如果你在 lucene 中同时索引和存储一个字段，它的内容将不会以相同的形式出现两次。存储字段按原样存储，就像您将它们发送到 lucene 一样，而索引字段可能会被分析并将成为倒排索引的一部分，这是另一回事。存储的字段用于检索特定文档（通过 lucene 文档 id），而索引字段用于搜索，在这样的结构中，从字面上反转文本，结果每个术语作为键，以及文档列表包含它的 ID（发布列表）。

不过，在弹性搜索方面，情况会发生一些变化。如果您未将字段配置为存储在映射中（默认为`store:no`），则默认情况下无论如何都可以检索它。[发生这种情况是因为 elasticsearch 总是将您发送给它的整个源文档（除非您禁用此功能）存储在一个名为_source](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)的特殊 lucene 字段中。

当您使用 elasticsearch 搜索时，默认情况下会返回整个源字段，但您也可以要求特定字段。在这种情况下，elasticsearch 会检查这些特定字段是否存储在 lucene 中。如果是，则从lucene中检索内容，否则将从lucene中`_source`检索存储的字段，解析为json（拉解析）并提取那些特定的字段。在第一种情况下，它可能会快一点，但不一定。如果您的源非常大并且您只想加载几个字段，将它们配置为存储在 lucene 中可能会使加载过程更快；另一方面，如果你`_source`不是那么大并且你想加载很多字段，那么最好只加载一个存储字段（`_source`)，这将导致单个磁盘查找，解析它等。在大多数情况下，使用该`_source`字段工作得很好。

回答你的问题：倒排索引和 lucene 存储是两个完全不同的东西。仅当您决定存储一个字段（在映射中）时，您最终在 lucene 中拥有相同数据的两个副本`store:yes`，因为 elasticsearch 将相同的内容保留在 json`_source`中，但这与您的事实没有任何关系'正在索引或分析该字段。

# javascript - 需要帮助验证单选按钮

> ID：15299802
> 
> 赞同：1
> 
> 时间：2013-03-08T17:25:56.677
> 
> 标签：javascript, forms, radio-button, validation

试图按时（一次）准备好我的最终项目，但在提交表单时我似乎无法让单选按钮组进行验证。我的其他一切都在工作，验证也是马马虎虎，但是，无线电组很固执。我尝试了不同的方法，例如删除变量并直接指向“group1”，但没有任何效果。任何帮助将不胜感激。

```
 <script type="text/javascript">
    function ValidateContactForm()
    {
    var name = document.ContactForm.Name;
    var email = document.ContactForm.Email;
    var phone = document.ContactForm.areaCode;
    var what = document.ContactForm.Subject;
    var comment = document.ContactForm.Comment;
    var btn = document.ContactForm.group1;

    if (name.value == "")
    {
        window.alert("Please enter your name.");
        name.focus();
        return false;
    }

    if (email.value == "")
    {
        window.alert("Please enter a valid e-mail address.");
        email.focus();
        return false;
    }
    if (email.value.indexOf("@", 0) < 0)
    {
        window.alert("Please enter a valid e-mail address.");
        email.focus();
        return false;
    }
    if (email.value.indexOf(".", 0) < 0)
    {
        window.alert("Please enter a valid e-mail address.");
        email.focus();
        return false;
    }

    if  (btn.value > 0) {
        window.alert("Please choose method of contact.");
        btn.focus();
        return false;
        }

    if (phone.value == "")
    {
        window.alert("Please enter your telephone number.");
        phone.focus();
        return false;
    }

    if (what.selectedIndex < 1)
    {
        alert("Please tell us how we can help you.");
        what.focus();
        return false;
    }

    if (comment.value == "")
    {
        window.alert("Please provide a detailed description or comment.");
        comment.focus();
    return false;
            }
    }
    function validateFixedLengthNumericField(numericField, len){

    if (len != numericField.value.length){
        numericField.focus();   
        alert('Field must contain exactly '+len+' numbers.');
    }
    }

    function validateNextField(numericField, len, nextField){

    if (len == numericField.value.length){
        nextField.focus();
    }
    }
    </script>

    <form method="post" onSubmit="return ValidateContactForm();" name="ContactForm">
  <div align="center">
      <table border="2">
    <tr>
      <td valign="top"><h3 align="left">Contact Information</h3>
    <p align="left">Name:<br /> <input type="text" size="65" name="Name"></p>
    <p align="left">E-mail Address:<br /><input type="text" size="65" name="Email"></p>
    <p align="left">Telephone:<br /> 
      <div class="Telephone" style="float:left;">
            (<input name="areaCode" id="areaCode"  type="text"  maxlength="3"
                onkeyup="validateNextField(this,3,phonePrefix);" 
                onblur="validateFixedLengthNumericField(this,3);"  
                style="font-size:11px; width:20px;"  title="Area Code" autocomplete="off">) 
            <input name="phonePrefix" id="phonePrefix" type="text" 
                onkeyup="validateNextField(this,3,phoneSuffix);" 
                onblur="validateFixedLengthNumericField(this,3);"  
                style="font-size:11px; width:20px;" maxlength="3"  title="Phone Prefix"  autocomplete="off">-
            <input name="phoneSuffix" id="phoneSuffix" type="text"  maxlength="4" 
                onkeyup="validateNextField(this,3,phoneExtension);" 
                onblur="validateFixedLengthNumericField(this,4);"  
                style="font-size:11px; width:25px;" title="Phone Suffix"  autocomplete="off"></p>
    </div>
      <p align="left">&nbsp;</p>
      <p align="left"><strong>Would you like to sign up for one of our mailings?</strong>  <br />
      </p>
    <div align="left">
      <input type="checkbox" name="option" value="newsletter" />
      Newsletters<br />
      <input type="checkbox" name="option" value="events" />
      Events<br />
      <input type="checkbox" name="option" value="grando" />
      Grand Openings<br />
      <input type="checkbox" name="option" value="coupon" />
      Coupons<br />
      <input type="checkbox" name="option" value="other" />
      Other</div>
    <p align="left"><strong>How do you perfer us to contact you</strong><br />
    </p>
    <div align="left">
      <input type="radio" name="group1" id="r1" value="1" />
      Phone
      <br />
    <input type="radio" name="group1" id="r2" value="2" />
    Email<br />
    <input type="radio" name="group1" id="r3" value="3" />
    Snail Mail
    </div>
    <p align="left">What can we help you with?
      <select type="text" value="" name="Subject">
            <option>  </option>
            <option>Customer Service</option>
            <option>Question</option>
            <option>Comment</option>
            <option>Complaint</option>
            <option>Other</option>
    </select></p>
    <p align="left">Comments:</p>
    <p align="center">
      <textarea cols="55" rows="10" name="Comment"></textarea>
    </p>
    <p align="center"><input type="submit" value="Send" name="submit"><input type="reset"      value="Reset" name="reset">    
      </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:03:57.517

在您的情况下，变量 btn 包含一组单选按钮。因此，您需要遍历它并找到检查了哪一个。就像是：

```
var somethingChecked = false;
for (i = 0; i < btn.length; i++) {
    if (btn[i].checked) {
        somethingChecked = true;
    }
}
if (!somethingChecked) {
    window.alert("Please choose method of contact.");
    return false;
} 
```

# performance - 如何用每个data.frame行数千次的vecorization替换for循环？

> ID：15299803
> 
> 赞同：4
> 
> 时间：2013-03-08T17:26:05.310
> 
> 标签：performance, r, for-loop, vectorization

关于 R 和 - 更重要的是 - 向量化，我仍然耳后很湿，我无法理解如何加速下面的代码。

for 循环通过对每个种子应用随机概率来计算具有不同种子产生植物密度的几个路段的种子数量。由于我的真实数据框有大约 200k 行并且种子数高达 300k/segment，因此在我当前的机器上使用下面的示例将需要几个小时。

```
#Example data.frame
df <- data.frame(Density=c(0,0,0,3,0,120,300,120,0,0))
#Example SeedRain vector
SeedRainDists <- c(7.72,-43.11,16.80,-9.04,1.22,0.70,16.48,75.06,42.64,-5.50)

#Calculating the number of seeds from plant densities
df$Seeds <- df$Density * 500

#Applying a probability of reaching the road for every seed
df$SeedsOnRoad <- apply(as.matrix(df$Seeds),1,function(x){
    SeedsOut <- 0
    if(x>0){
        #Summing up the number of seeds reaching a certain distance
        for(i in 1:x){
            SeedsOut <- SeedsOut +
                ifelse(sample(SeedRainDists,1,replace=T)>40,1,0)
        }
    }
    return(SeedsOut)
}) 
```

如果有人可以提示我如何用矢量化代替循环 - 或者首先如何更好地组织数据以提高性能 - 我将非常感激！

**编辑：**罗兰的回答表明我可能过度简化了这个问题。在 for 循环中，我从另一位作者记录的距离分布中提取随机值（这就是为什么我不能在这里提供数据的原因）。添加了一个示例向量，其中包含 SeedRain 距离的可能值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:41:18.310

这应该做同样的模拟：

```
df$SeedsOnRoad2 <- sapply(df$Seeds,function(x){
  rbinom(1,x,0.6)
})

#   Density  Seeds SeedsOnRoad SeedsOnRoad2
#1        0      0           0            0
#2        0      0           0            0
#3        0      0           0            0
#4        3   1500         892          877
#5        0      0           0            0
#6      120  60000       36048        36158
#7      300 150000       90031        89875
#8      120  60000       35985        35773
#9        0      0           0            0
#10       0      0           0            0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T18:22:40.480

一种选择是一次性为每行的`sample()`所有内容生成。`Seeds``df`

`set.seed(1)`在基于循环的代码之前使用我得到：

```
> df
   Density  Seeds SeedsOnRoad
1        0      0           0
2        0      0           0
3        0      0           0
4        3   1500         289
5        0      0           0
6      120  60000       12044
7      300 150000       29984
8      120  60000       12079
9        0      0           0
10       0      0           0 
```

如果我这样做，我会在很短的时间内得到相同的答案：

```
set.seed(1)
tmp <- sapply(df$Seeds, 
              function(x) sum(sample(SeedRainDists, x, replace = TRUE) > 40)))

> tmp
 [1]     0     0     0   289     0 12044 29984 12079     0     0 
```

为了比较：

```
df <- transform(df, GavSeedsOnRoad = tmp)
df

> df
   Density  Seeds SeedsOnRoad GavSeedsOnRoad
1        0      0           0              0
2        0      0           0              0
3        0      0           0              0
4        3   1500         289            289
5        0      0           0              0
6      120  60000       12044          12044
7      300 150000       29984          29984
8      120  60000       12079          12079
9        0      0           0              0
10       0      0           0              0 
```

这里需要注意的点是：

1.  如果函数是矢量化的，或者可以通过一次调用生成整个最终结果，请尽量避免在循环中重复调用函数。在这里，您`sample()` `Seeds`为 的每一行调用时间`df`，每个调用从 中返回一个样本`SeedRainDists`。在这里，我进行了一次`sample()`调用，询问样本大小`Seeds`，对于每一行`df`- 因此我调用了`sample`10 次，您的代码调用了 271500 次。
2.  即使您必须在循环中重复调用一个函数，也要从循环中删除任何可以在循环完成后对整个结果执行的矢量化操作。这里的一个例子是你的累积`SeedsOut`，它调用`+()`了很多次。

    最好将每个收集`SeedsOut`在一个向量中，然后在循环*外*`sum()`收集那个向量。例如

     *```
    SeedsOut <- numeric(length = x)
    for(i in seq_len(x)) {
      SeedsOut[i] <- ifelse(sample(SeedRainDists,1,replace=TRUE)>40,1,0)
    }
    sum(SeedOut) 
    ```* 
**   请注意，R 将逻辑视为数字`0`s 或`1`在任何数学函数中使用的 s。因此

    ```
    sum(ifelse(sample(SeedRainDists, 100, replace=TRUE)>40,1,0)) 
    ```

    和

    ```
    sum(sample(SeedRainDists, 100, replace=TRUE)>40) 
    ```

    如果使用相同的`set.seed()`.* 

 *可能有一种更高级的采样方式，需要更少的调用`sample()`（确实有，`sample(SeedRainDists, sum(Seeds), replace = TRUE) > 40`但是你需要注意为每一行选择该向量的正确元素`df`- 不难，只是有点麻烦），但是什么我显示可能足够高效？*

# file - 通过互联网发送文件的可靠方式

> ID：15299807
> 
> 赞同：4
> 
> 时间：2013-03-08T17:26:20.703
> 
> 标签：file, tcp, udp, ip, transfer

首先：我不确定这是问的正确地方，但我认为这个问题比超级用户或服务器故障更适合这里，因为这是从程序员的角度来看的问题：我认为更多的程序员可能有同样的问题（虽然我找不到这个特定的问题！）。

我想在我的程序中有一个功能，允许用户将文件发送给“朋友”。您可以通过用户名找到朋友：这一切都通过可以提供朋友 IP 地址的服务器进行。我想使用 tcp 连接来发送文件。然而，当一方（或双方）在 NAT 之后时，这变得很困难。解决这个问题的最佳方法是什么？我听说可以通过服务器发送东西，但我宁愿直接发送所有东西，以防止服务器开销。

我听说过一种叫做打孔的技术，但它的实现非常复杂，而且不是 100% 可靠的。我可以使用 UDP 并实施一些方案来提高可靠性，但这对我来说似乎有点复杂。我知道 Skype、bittorrent 和许多其他程序做类似的事情（但我不知道具体细节，他们使用哪种协议，如果他们使用打孔等）。

我稍微研究了一下 FTP，直到我意识到这只是一个使用 TCP 的协议，所以我应该使用 TCP 打孔来让它工作......无论如何，我希望有人能给我一些建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:40:59.087

如果您不想让数据通过服务器，我不知道除了[TCP 打孔](http://en.wikipedia.org/wiki/TCP_hole_punching)或先前选择的端口的简单[端口转发之外的其他方法。](http://en.wikipedia.org/wiki/Port_forwarding)

# c# - 如何在c#中将datagridview column1和column2添加到column3中

> ID：15299817
> 
> 赞同：0
> 
> 时间：2013-03-08T17:27:07.990
> 
> 标签：c#, datagridview, add

我正在尝试将 column1 值添加到 column2 并且必须插入 column2

我的代码是

事件是**CellLeave**

```
if (dgrVwEmp.Columns[dgrVwEmp.CurrentCell.ColumnIndex].Name == "ol")
 {
    int ol;
    int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                         .Cells["ol"].EditedFormattedValue.ToString(), out  ol);

    int leavs;
    int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                         .Cells["ttlLeaves"].Value.ToString(), out leavs);

    int dys;
    int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                         .Cells["ttlWrkng"].Value.ToString(), out dys);

    dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                         .Cells["ttlLeaves"].Value = (ol + leavs).ToString();
    dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                         .Cells["ttlWrkng"].Value = (dys - ol).ToString();

 } 
```

当我第一次尝试像这样添加时，值正在添加并插入到第三个字段，如果我回到同一个单元格，它会再次添加到已添加的字段中。我怎样才能正确添加它。这是因为我正在使用 Cell leave。是否有任何其他方式或其他事件可以正确执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:24:35.617

也许您可以引入一个保存旧值的变量，当事件被触发时，在`ttleaves`添加新值的同时从单元格中减去旧值。单元格应该发生相反的情况`ttlWrkng`：

```
private int oldValue = 0;

private void dgrVwEmp_CellLeave(object sender, DataGridViewCellEventArgs e)
{
   if (dgrVwEmp.Columns[dgrVwEmp.CurrentCell.ColumnIndex].Name == "ol")
   {
      int ol;
      int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                     .Cells["ol"].EditedFormattedValue.ToString(), out  ol);

      int leavs;
      int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                     .Cells["ttlLeaves"].Value.ToString(), out leavs);

      int dys;
      int.TryParse(dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                     .Cells["ttlWrkng"].Value.ToString(), out dys);

      dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                     .Cells["ttlLeaves"].Value = (ol + leavs - oldValue).ToString();
      dgrVwEmp.Rows[dgrVwEmp.CurrentCell.RowIndex]
                     .Cells["ttlWrkng"].Value = (dys - ol + oldValue).ToString();

      oldValue = ol;
   }

} 
```

# ios - Objective-c get position of an iboutlet

> ID：15299818
> 
> 赞同：0
> 
> 时间：2013-03-08T17:27:08.663
> 
> 标签：ios, objective-c, iboutlet

When I try

```
myLabel.frame.origin.x 
```

It's returning 0.000000. How can I get exact position of any iboutlet?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:30:01.377

视图的框架相对于其父视图（父视图）。要获取相对于屏幕的框架，请执行以下操作：

```
CGRect screenRect = [myLabel convertRect:self.bounds toView:nil]; 
```

要获取相对于其他视图的框架，请替换`nil`为其他视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:33:35.693

请确保...

1.  您在加载 NIB 后调用它（viewDidLoad、awakeFromNib、viewDidX）
2.  您已将视图连接到界面生成器中的 NIB。

有关从 NIB 中的视图连接到 IBOutlet 的详细信息，请参阅 iOS 开发人员库上的本指南... [配置视图指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iPhone101/Articles/05_ConfiguringView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:29:15.183

你在哪里做这个？必须在连接插座之前加载视图控制器的视图。awakeFromNib 是一个安全的地方。

# python - Tkinter窗口配置python错误“不归路”

> ID：15299822
> 
> 赞同：0
> 
> 时间：2013-03-08T17:27:14.260
> 
> 标签：python, window, themes, tkinter

好的，所以我有这个很长的程序。我的主题有问题。我所说的主题是指我构建的一个特定功能，用于在 Tkinter 中激活时更改背景和文本颜色。这是代码的缩短版本：

```
 global theme
 theme = 0
 windows = []
 buttons = []
 labels = []
messageboxes = [] 
```

# 代码...

```
 def flavor_0():
    global theme
    for w in windows:
        w.config(bg = 'black')
    for l in labels:
        l.config(bg = 'black', fg = 'white')
    for b in buttons:
        b.config(activebackground = "grey", activeforeground = "white", bg = 'black', fg = 'white')
    for i in listboxes:
        i.config(bg = 'black', fg = 'white', relief = "ridge") 
    theme = 0 
```

# 更多代码...（我在本节中定义了其他风格）

```
def set_theme():
    global theme
    global register
    if theme == 0:
        flavor_0()
    elif theme == 1:
        flavor_1()
    elif theme == 2:
        flavor_2()
    elif theme == 3:
        flavor_3()
    elif theme == 4:
        flavor_4() 
```

# 更多代码

```
 thememenu = Tkinter.Menu(menubar,tearoff = 0)
    thememenu.add_command(label="Plain",command = flavor_0)
    thememenu.add_command(label="Mint", command = flavor_1)
    thememenu.add_command(label="Strawberry", command = flavor_2)
    thememenu.add_command(label="Banana", command = flavor_3)
    thememenu.add_command(label="Peanut", command = flavor_4)
    menubar.add_cascade(label="Flavor", menu = thememenu)

    def windowinator():
        new = Tkinter.Tk()
        windows.append(new)
        set_theme()

    windowinator = Tkinter.Button(root,text="New Window", command = windowinator)
    windowinator.pack()
    buttons.append(windowinator) 
```

OK 终于搞定了。现在，当我运行它时，主题转换器可以工作。直到我使用“windowinator”。只要我之前打开的一个窗口没有关闭，就可以更改主题，没有任何问题。但是当我只关闭其中一个并尝试更改“主题”时：我得到一个普通的（无主题窗口）和这个尴尬的错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:\Users\Ahmet\Desktop\Fobby\FOBBY.py", line 70, in flavor_3
    w.config(bg = 'black')
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1202, in configure
    return self._configure('configure', cnf, kw)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1193, in _configure
    self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
TclError: invalid command name "." 
```

那么谁能告诉我到底出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:46:40.647

您应该只创建`Tk`该类的单个实例。看起来正在发生的事情是初始默认窗口（“。”）正在被破坏。Tkinter 并非设计为以这种方式使用。

如果您想要多个窗口，请创建`Toplevel`.

# excel - Excel 条件格式 - 在另一张工作表中仅显示其中的一部分

> ID：15299832
> 
> 赞同：0
> 
> 时间：2013-03-08T17:27:43.923
> 
> 标签：excel, conditional-formatting

在单元格 A1 中给出了日期时间。在单元格 B1 中，我给出了 Now()。在单元格 C1 中，时间差以 hh:mm:ss 格式计算。

前任：

A1（目标时间）

# 2013 年 8 月 3 日晚上 11:00:00

B1(当前时间)

# 2013 年 8 月 3 日晚上 9:00:00

C1(剩余时间)

# 02:00:00

我已经对单元格 C1 进行了条件格式设置，其中 100 行包含 hh:mm:ss 格式的值。这 100 个值具有多个条件格式。

随着时间的流逝，单元格 C1 的值正在减少，最终将到达 00:00:00

现在 CF 为 >10:00:00 的绿色，04:00:00 到 09:59:59 之间的琥珀色，00:00:01 到 03:59:59 之间的红色，<=00 的黑色： 00:00

因此，RED 单元格的数量不是固定的，因为随着时间的流逝，一些来自 RED 的单元格变成了 BLACK 单元格，而另一些则从 AMBER 进入了 RED 单元格。

我想要的是：

在 sheet2 中，我只需要红色的值，即在 00:00:01 到 03:59:59 之间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:09:48.993

如果红色单元格总是介于两者之间`00:00:01`，`03:59:59`那么您`Sheet2`只需查看值即可获得所需的值。

在 Sheet2 上，此公式将检索红色单元格：

```
=IF(AND(C1 > 1/86400,C1 < 14399/86400),C1,"") 
```

`86400`是一天中的秒数 (60*60/24)。`1`代表`00:00:01`和`14399`代表`03:59:59`。

因此，如果 Sheet1 上 C 列中的任何单元格介于两者之间`00:00:01`并`03:59:59`显示在 Sheet2 中，则将其留空。

这有帮助吗？

# javascript - 如何将自定义 javascript 库包含到谷歌网站？

> ID：15299834
> 
> 赞同：1
> 
> 时间：2013-03-08T17:27:50.783
> 
> 标签：javascript, jquery, google-sites

请帮助将自定义 javascript 库“jquery-EmbedPicasaGallery.js”包含到谷歌网站。我尝试了 3 种方法，但总是有错误：

```
 failed to load external url jquery-EmbedPicasaGallery.js 
```

我试过了：

# .

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://googledrive.com/host/0BziEumkvYpL6Ql9NRFhET2FXM1E/jquery-EmbedPicasaGallery.js"></script> 
```

# .

```
 <script type="text/javascript" src="https://docs.google.com/uc?id=0BziEumkvYpL6ZmlHZ2FWQ1NrVG8"></script> 
```

# .

```
 <script type="text/javascript" src="https://docs.google.com/uc?id=0BziEumkvYpL6ZmlHZ2FWQ1NrVG8&export=download"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:27:35.317

您是否尝试过下载脚本并从您自己的服务器上运行它？

您的站点是在服务器上还是在本地进行测试？

在本地尝试某些操作时通常会发生错误，因此请确保在服务器上运行，尤其是在涉及`php`、`ajax`、`canvas image data`、`http headers`和`cookies`等的情况下。

# asp.net-mvc - 如何将 DTO 转换为 View Model 然后再转换回来？

> ID：15299837
> 
> 赞同：2
> 
> 时间：2013-03-08T17:27:57.553
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, repository-pattern, asp.net-mvc-viewmodel

我也将 MVC 4 与存储库模式和单元测试一起使用。我有一个具有简单 CRUD 功能的典型控制器。我已将我的视图模型与我的 DTO 分开，我想知道在两者之间进行转换的最佳方法：

**楷模：**

我有`Admin.Models.Product`哪个是我的视图模型，`AdminAssembly.Models.Product`哪个是我的 DTO。

**控制器：**

```
 //repo that handles product operations
    AdminAssembly.Interfaces.IEntityRepository<AdminAssembly.Models.Product> db;
    //default constructor
    public ProductController() { db = new AdminAssembly.Repositories.EntityRepo<AdminAssembly.Models.Product>(new AdminAssembly.Models.EntitiesContext()); }
    //unit testing constructor
    public ProductController(AdminAssembly.Interfaces.IEntityRepository<AdminAssembly.Models.Product> context) { db = context; }

    //
    // POST: /Product/Create

    [HttpPost]
    public ActionResult Create(Admin.Models.Product product) {

        if (ModelState.IsValid) {
            //COMPILE-ERROR: how to convert to DTO?
            db.Add(product);
        }
        return View();

    }

    //
    // GET: /Product/Edit/5

    public ActionResult Edit(int id) {
        //COMPILE-ERROR: how to convert to view model?
        Admin.Models.Product product = db.GetAll().Where(p => p.ID == id);

        return View(product);
    } 
```

**如何在 2 之间转换？**

我是否在我的视图模型中引用我的 DTO 程序集并执行以下操作：（这不会破坏我的单元测试吗？）

```
//convert to AdminAssembly.Models.Product
db.Add(product.ToDTO());

//convert back to Admin.Models.Product via constructor
Admin.Models.Product product = Admin.Models.new Product(db.GetAll().Where(p => p.ID == id)); 
```

我需要某种对象转换黑匣子吗？

```
Converter.ToViewProduct(product); 
```

某种界面？

或者是其他东西？

**更新1：**

```
 public static class Product {
        public static Admin.Models.Product ToView(AdminAssembly.Models.Product dto) {
            Admin.Models.Product viewProduct = new Admin.Models.Product();
            //straight copy
            viewProduct.Property1 = dto.Property1;
            viewProduct.Property2 = dto.Property2;

            return viewProduct;
        }
        public static AdminAssembly.Models.Product ToDTO(Admin.Models.Product viewModel) {
            AdminAssembly.Models.Product dtoProduct = new AdminAssembly.Models.Product();
            //straight copy
            dtoProduct.Property1 = viewModel.Property1;
            dtoProduct.Property2 = viewModel.Property2;

            //perhaps a bit of wizza-majig
            dtoProduct.Property1 = viewModel.Property1 + viewModel.Property2;

            return dtoProduct;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:04:11.703

长手响应

```
[HttpPost]
public ActionResult Create(Admin.Models.Product product) 
{
  if (ModelState.IsValid)
  {
    //COMPILE-ERROR: how to convert to DTO?
    var dtoProduct = new AdminAssembly.Models.Product();
    dtoProduct.Property1 = product.Property1;
    dtoProduct.Property2 = product.Property2;
    //...and so on
    db.Add(dtoProduct);
  }
  return View();
} 
```

虽然这看起来冗长乏味（而且确实如此），但它最终必须在某个地方发生。

您可以在另一个类或扩展方法中隐藏此映射，或者您可以使用像 AutoMapper 这样的第三方，正如 Charlino 指出的那样。

附带说明一下，在两个不同的命名空间中拥有两个具有相同名称的类最终会让人感到困惑（如果不是你，那么对于下一个必须维护你的代码的人来说）。尽可能实现更友好和更具描述性的名称。例如，将所有视图模型放在一个名为 ViewModels 的文件夹中，而不是 Models 中。并使用 ViewModel 或 VM 附加所有视图模型。这也是一个很好的约定，imo，根据它们所针对的视图来命名您的视图模型，而不是它们将映射到的域模型，因为并非所有视图模型都会直接映射到域模型。有时，您会需要多个域模型的一部分，用于单个视图，这会破坏您的命名约定。

因此，在这种特殊情况下，我建议将视图模型版本更改`Admin.Models`为`Admin.ViewModels`然后重命名`Product`为 CreateViewModel。您的代码将更具可读性，并且不会在您的方法中到处都是名称空间。

所有这些都会导致一个看起来更像这样的方法：

```
[HttpPost]
public ActionResult Create(CreateViewModel viewModel) 
{
  if (ModelState.IsValid)
  {
    var product = new Product();
    product.Property1 = viewModel.Property1;
    product.Property2 = viewModel.Property2;
    //...and so on
    db.Add(product);
  }
  return View();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:29:14.887

查看一个名为[AutoMapper](https://github.com/AutoMapper/AutoMapper)的库。

从他们的维基：

> **什么是 AutoMapper？**
> AutoMapper 是一个简单的小库，旨在解决一个看似复杂的问题——摆脱将一个对象映射到另一个对象的代码。这种类型的代码写起来相当枯燥乏味，那么为什么不发明一个工具来为我们做呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T23:30:15.170

如果你不想使用 AutoMapper，你可以使用扩展，正如@Forty-Two 所建议的那样。如果要映射的事物数量不是很多，我会采用这种方法，因为那时 AutoMapper == YAGNI

```
public static class Extensions
{
    public static ViewModel ToViewModel(this Model )
    {
        var vm = new ViewModel()
        {
            //map
        };
        return vm;
    }
    public static Model ToModel(this ViewModel viewModel)
    {
        var model = new Model()
        {
            //map
        };
        return model;
    }
} 
```

类似于您在 UPDATE 中的代码，但使用扩展代替。

# ios - iOS：理解全局变量

> ID：15299842
> 
> 赞同：1
> 
> 时间：2013-03-08T17:28:07.567
> 
> 标签：ios, objective-c, xcode, variables, global-variables

在我的第一个`ViewController` `ViewControllerTest1`中，我有一个名为`counter`. `counter`应该在我的应用程序中不时增加。一切正常：

```
@implementation ViewControllerTest1{
int counter = 0;

-(void)viewDidLoad
{...}

-(void)method {...}
} 
```

`counter`现在，如果我声明另一个在我的第二个XCode 中调用的全局变量`ViewController` `ViewControllerTest2`会给我一个错误。

我知道我可以给它一个不同的名字，但为什么会这样呢？我可以确保只有处于`ViewController`活动状态的全局变量在我的记忆中吗？

或者我现在是否正在对全局变量做类似的事情`counter`？有更好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:31:34.480

如果您希望符号特定于文件，请`static`在声明时使用关键字。

您的声明应如下所示

```
static int counter = 0; 
```

在链接时（在编译所有文件之后），全局符号在同一个文件中混合，因此，如果两个共享相同的名称，则链接器会触发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:32:25.577

如果您在文件范围内定义变量（包括类定义内但在 ivar 区域或方法体之外的位置），则`extern`默认情况下它将具有链接，这需要唯一的符号名称。

将其设为`static`变量 ( `static int ...`) 即可解决问题，因为静态符号名称只需要在声明它们的文件中是唯一的。

如果您有意在此文件*之外*访问此变量，因此需要保持`extern`链接，则需要将另一个变量命名为其他名称以区分两者。

# c++ - 使用 C++ lambda 的未解决的外部

> ID：15299845
> 
> 赞同：2
> 
> 时间：2013-03-08T17:28:12.170
> 
> 标签：c++, templates, lambda

我收到以下代码片段未解决的外部编译错误。

```
acquire_gray(identity,  []{}); 
```

当我尝试使用时也会发生同样的事情`auto`

```
 auto acquire_callback = [](LPBITMAPINFOHEADER pbi, HANDLE hdib)
    {
            printf("Callback\n");
    };

   acquire_gray("",  acquire_callback ); 
```

但是当我传入 null 时，它会编译

```
acquire_gray(identity,  NULL); 
```

这是我的程序的结构

驱动程序.cpp

```
#include "bridge.h"

void TB_AcquireImagesStart(HANDLE hNamedPipe, const TB_Message request)
{
    acquire_gray("",  []{});
} 
```

桥接器

```
template<typename T>
void acquire_gray(const string_t& identity, T& callback); 
```

网桥.cpp

```
template<typename T>
void acquire_gray(const string_t& identity, T& callback)
{
   callback();
} 
```

所以我得到的两个例外是

```
Error   12  error LNK1120: 1 unresolved externals

Error   11  error LNK2019: unresolved external symbol "void __cdecl acquire_gray<class <lambda_e125ff607fe0339bba6077ce9c14d586> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class <lambda_e125ff607fe0339bba6077ce9c14d586> &)" (??$acquire_gray@V<lambda_e125ff607fe0339bba6077ce9c14d586>@@@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV<lambda_e125ff607fe0339bba6077ce9c14d586>@@@Z) referenced in function "void __cdecl TB_AcquireImagesStart(void *,class TB_Message)" (?TB_AcquireImagesStart@@YAXPAXVTB_Message@@@Z) 
```

所以我的问题是我的代码有什么问题，我该如何解决这个问题，以及为什么`auto`没有检测到我的 lambda 类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:32:13.853

您不能将模板定义放在 .cpp 中（当然可以，但只有在该编译单元中使用它们才有意义）。编译后，仅存在模板实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:32:31.233

这只是使用模板时的常见陷阱。您不能（或至少不应该）将模板分成头文件 (.hpp) 和源文件 (.cpp)。有关详细信息，请参见[此处](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)。

# angularjs - AngularJS - 等待多个资源查询完成

> ID：15299850
> 
> 赞同：106
> 
> 时间：2013-03-08T17:28:29.933
> 
> 标签：angularjs

我有一个用 ngResource 定义的工厂：

```
App.factory('Account', function($resource) {
    return $resource('url', {}, {
        query: { method: 'GET' }
    });
}); 
```

我正在多次调用此工厂上定义的查询方法。调用可以异步发生，但我需要等待两个调用完成才能继续：

```
App.controller('AccountsCtrl', function ($scope, Account) {
    $scope.loadAccounts = function () {
        var billingAccounts = Account.query({ type: 'billing' });
        var shippingAccounts = Account.query({ type: 'shipping' });

        // wait for both calls to complete before returning
    };
}); 
```

有没有办法使用 ngResource 定义的 AngularJS 工厂来做到这一点，类似于 jQuery 的 $.when().then() 功能？我不希望将 jQuery 添加到我当前的项目中。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-03-08T18:01:18.517

你会想要使用 Promise 和[$q.all()](http://docs.angularjs.org/api/ng.%24q)。

基本上，您可以使用它来包装您的所有 $resource 或 $http 调用，因为它们返回承诺。

```
function doQuery(type) {
   var d = $q.defer();
   var result = Account.query({ type: type }, function() {
        d.resolve(result);
   });
   return d.promise;
}

$q.all([
   doQuery('billing'),
   doQuery('shipping')
]).then(function(data) {
   var billingAccounts = data[0];
   var shippingAccounts = data[1];

   //TODO: something...
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-08-22T18:44:09.697

我认为更好的解决方案是：

```
$q.all([
   Account.query({ type: 'billing' }).$promise,
   Account.query({ type: 'shipping' }).$promise
]).then(function(data) {
   var billingAccounts = data[0];
   var shippingAccounts = data[1];

   //TODO: something...
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-12-09T14:54:32.867

Ben Lesh 的解决方案是最好的，但并不完整。如果你需要处理错误情况——是的，你需要——那么你必须使用`catch`promise API 上的方法，如下所示：

```
$q.all([
   doQuery('billing'),
   doQuery('shipping')
]).then(function(data) {
   var billingAccounts = data[0];
   var shippingAccounts = data[1];

   //TODO: something...

}).catch(function(data) {

   //TODO: handle the error conditions...

}).finally(function () {

  //TODO: do final clean up work, etc...

}); 
```

如果您没有定义`catch`并且所有的承诺都失败了，那么该`then`方法将永远不会执行，因此可能会使您的界面处于不良状态。

# asp.net-mvc-4 - 使用 ASP.NET MVC 使用 Kendo UI 设置网格

> ID：15299852
> 
> 赞同：0
> 
> 时间：2013-03-08T17:28:42.863
> 
> 标签：asp.net-mvc-4, grid, kendo-ui

我开始使用 HTML 进行开发，并尝试在 ASP.NET MVC 中使用 Kendo UI 框架。

我从这个教程开始：[Entity Framework 5.x – Database First Workflow](http://hectorea.com/blog/database-first-workflow/#) 有了这个，我能够创建一个网页，向我展示一个包含来自数据库的数据的表。

但现在我想用 Kendo UI 小部件（网格）来设置表格样式。为此，我观看了这个视频：[在 ASP.Net MVC 上使用 KendoUI 网格 - 教程 1](http://www.youtube.com/watch?v=IZvj00n26wE&list=PLA3F860848D268A5C&index=3)（直到 4:37 分钟）

到目前为止我所做的步骤：

*   下载 Kendo UI Complete for ASP.NET MVC 试用版
*   将下载的文件夹中的文件`kendo.default.min.css`和文件复制到我的 Visual Studio 项目中的文件夹中`kendo.common.min.css``Content`
*   将`kendo.all.min.js`文件从下载的文件夹复制到`Scripts`文件夹
*   `View`使用以下代码更改：

> ```
> @model IEnumerable<DatabaseFirst.Models.Artesano>
> 
> @{
>     ViewBag.Title = "Index";
> }
> 
> <link href="@Url.Content("~/Content/kendo.common.min.css")" rel="stylesheet" />
> <link href="@Url.Content("~/Content/kendo.default.min.css")" rel="stylesheet" />
> <script src="@Url.Content("~/Scripts/kendo.all.min.js")" type="text/javascript" ></script>
> 
> <script type="text/javascript">
>     $(function () {
>         $("#artesanos-grid").kendoGrid();
> 
>     });
> 
> </script>
> 
> <h2>Index</h2>
> 
> <p>
>     @Html.ActionLink("Create New", "Create")
> </p>
> <table id="artesanos-grid">
>     <thead>
>     <tr>
>         <th>
>             @Html.DisplayNameFor(model => model.RFC)
>         </th>
>         <th>
>             @Html.DisplayNameFor(model => model.RazonSocial)
>         </th>
>         <th>
>             @Html.DisplayNameFor(model => model.Telefonos)
>         </th>
>         <th>
>             @Html.DisplayNameFor(model => model.Fax)
>         </th>
>         <th>Actions</th>
>     </tr>
>     </thead>
>     <tbody>
> @foreach (var item in Model) {
>     <tr>
>         <td>
>             @Html.DisplayFor(modelItem => item.RFC)
>         </td>
>         <td>
>             @Html.DisplayFor(modelItem => item.RazonSocial)
>         </td>
>         <td>
>             @Html.DisplayFor(modelItem => item.Telefonos)
>         </td>
>         <td>
>             @Html.DisplayFor(modelItem => item.Fax)
>         </td>
>         <td>
>             @Html.ActionLink("Edit", "Edit", new { id=item.RFC }) |
>             @Html.ActionLink("Details", "Details", new { id=item.RFC }) |
>             @Html.ActionLink("Delete", "Delete", new { id=item.RFC })
>         </td>
>     </tr>
> }
>     </tbody>
> 
> </table> 
> ```

但是当我运行页面时，网格没有任何变化......我错过了什么？

PS：加载页面的源码为：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="/Content/site.css" rel="stylesheet"/>

    <script src="/Scripts/modernizr-2.6.2.js"></script>

</head>
<body>

<link href="/Content/kendo.common.min.css" rel="stylesheet" />
<link href="/Content/kendo.default.min.css" rel="stylesheet" />
<script src="/Scripts/kendo.all.min.js" type="text/javascript" ></script>

<script type="text/javascript">
    $(function () {
        $("#artesanos-grid").kendoGrid();

    });

</script>

<h2>Index</h2>

<p>
    <a href="/Artesano/Create">Create New</a>
</p>
<table id="artesanos-grid">
    <thead>
    <tr>
        <th>
            RFC
        </th>
        <th>
            RazonSocial
        </th>
        <th>
            Telefonos
        </th>
        <th>
            Fax
        </th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            325
        </td>
        <td>
            sdfwef
        </td>
        <td>
            wetfgvs
        </td>
        <td>
            sdfsdgs
        </td>
        <td>
            <a href="/Artesano/Edit/325">Edit</a> |
            <a href="/Artesano/Details/325">Details</a> |
            <a href="/Artesano/Delete/325">Delete</a>
        </td>
    </tr>
    <tr>
        <td>
            2
        </td>
        <td>
            weg
        </td>
        <td>
            asdgweg
        </td>
        <td>
            dsg
        </td>
        <td>
            <a href="/Artesano/Edit/2">Edit</a> |
            <a href="/Artesano/Details/2">Details</a> |
            <a href="/Artesano/Delete/2">Delete</a>
        </td>
    </tr>
    <tr>
        <td>
            235423
        </td>
        <td>
            sdga
        </td>
        <td>
            et
        </td>
        <td>
            wefwf
        </td>
        <td>
            <a href="/Artesano/Edit/235423">Edit</a> |
            <a href="/Artesano/Details/235423">Details</a> |
            <a href="/Artesano/Delete/235423">Delete</a>
        </td>
    </tr>
    <tr>
        <td>
            23
        </td>
        <td>
            wq
        </td>
        <td>
            sasdga
        </td>
        <td>
            aegweg
        </td>
        <td>
            <a href="/Artesano/Edit/23">Edit</a> |
            <a href="/Artesano/Details/23">Details</a> |
            <a href="/Artesano/Delete/23">Delete</a>
        </td>
    </tr>
    </tbody>

</table>

    <script src="/Scripts/jquery-1.8.2.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:11:25.623

我的问题出在`Views/Shared/_Layout.cshtml`：

该文件是这样生成的：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
</html> 
```

所以我改为：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
</head>
<body>
    @RenderBody()

    @RenderSection("scripts", required: false)
</body>
</html> 
```

（我把`@Scripts.Render("~/bundles/jquery")`在标题）

现在问题已经解决了。

# javascript - Jquery 克隆和更新按钮图标

> ID：15299854
> 
> 赞同：6
> 
> 时间：2013-03-08T17:28:46.007
> 
> 标签：javascript, jquery

我觉得我在这里忽略了一些非常简单的东西。我需要另一双眼睛。我在这方面花费的时间比我应该的要多得多。

看看这个小提琴 => [http://jsfiddle.net/R8SxU/](http://jsfiddle.net/R8SxU/)

为什么添加一年多后图标不更新？我希望顶部的始终是一个加号，象征着增加新的一年，而下面的其余的是一个减号来删除。它适用于第一个，但仅适用于第一个。我相信我有正确的选择器，因为每个按钮都正确激活了功能（控制台输出）。

## HTML

```
<div>
    <label for="year-0">Enter Year</label>
    <input id="year-0" type="number" title="Enter Year"/>
    <button id="addYear" title="Add Year">Year</button>
</div> 
```

## jQuery

```
$('#addYear')
    .button({icons: { primary: 'ui-icon-circle-plus' } })
    .on('click', function() { 
        var clone      = $('div').first().clone(true),
            peroid     = $('div').length;

        //update ID
        $(clone).find('label').prop('for','year-' + peroid);
        $(clone).find('input').prop('id','year-' + peroid);

        $('div:first button')
            .prop('id','')
            .attr('title','Remove Year')
            .addClass('removeYear');

        $(clone).insertBefore('div:first');
        $('.removeYear:first')
             .off('click')
             .button({ icons: { primary: 'ui-icon-circle-minus' } })  // Why Wont This Work
             .on('click', function() { console.log('remove function');  });

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T18:01:41.287

尝试以下操作：

```
$('#addYear').button({
    icons: {
        primary: 'ui-icon-circle-plus'
    }
}).on('click', function () {
    var clone = $(this).parent().clone(),
        peroid = $('div').length;

    clone.find('label').prop('for', 'year-' + peroid).end()
         .find('input').prop('id', 'year-' + peroid).end()
         .find('button').prop('id', 'id' + peroid).prop('title', 'Remove Year')
         .addClass('removeYear').find('span:first').addClass('ui-icon-circle-minus');

    clone.insertAfter('div:last');
});

$(document).on('click', 'div:not(":first") button', function () {
    $(this).closest('div').remove();
}); 
```

[http://jsfiddle.net/Y33GV/](http://jsfiddle.net/Y33GV/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T17:49:23.190

试试这个：- [http://jsfiddle.net/aidioo7/R8SxU/4/](http://jsfiddle.net/adiioo7/R8SxU/4/)

```
var clone = $('div').last().clone(true),
         peroid = $('div').length; 
```

代替

```
var clone=$('div').first().clone(true),
            peroid=$('div').length; 
```

# prolog - 斐波那契数生成问题

> ID：15299856
> 
> 赞同：1
> 
> 时间：2013-03-08T17:28:50.347
> 
> 标签：prolog, fibonacci

以下是我的第 N 个斐波那契数查找谓词，可以：

```
f(0,0).
f(1,1).
f(N,R):-P is N-1,Q is N-2,f(P,T1),f(Q,T2),R is T1+T2. 
```

我正在尝试使用以下谓词生成斐波那契数：

```
fgen(0,0).
fgen(1,1).
fgen(A,B):-fgen(X,Y),A is X+1,f(A,T),B is T. 
```

当我查询时`fgen(X,Y).`

表明：

```
?- fgen(X,Y).

X = 0
Y = 0 ;

X = 1
Y = 1 ;

X = 1
Y = 1 ;
ERROR: Out of local stack 
```

我使用了 trace 命令，结果如下：

```
?- trace,fgen(X,Y).
   Call: (9) fgen(_G281, _G282) ? creep
   Exit: (9) fgen(0, 0) ? creep

X = 0
Y = 0 ;
   Redo: (9) fgen(_G281, _G282) ? creep
   Exit: (9) fgen(1, 1) ? creep

X = 1
Y = 1 ;
   Redo: (9) fgen(_G281, _G282) ? creep
   Call: (10) fgen(_L178, _L189) ? creep
   Exit: (10) fgen(0, 0) ? creep
^  Call: (10) _G281 is 0+1 ? creep
^  Exit: (10) 1 is 0+1 ? creep
   Call: (10) f(1, _L179) ? creep
   Exit: (10) f(1, 1) ? creep
^  Call: (10) _G282 is 1 ? creep
^  Exit: (10) 1 is 1 ? creep
   Exit: (9) fgen(1, 1) ? creep

X = 1
Y = 1 ;
   Redo: (10) f(1, _L179) ? creep
^  Call: (11) _L207 is 1-1 ? creep
^  Exit: (11) 0 is 1-1 ? creep
^  Call: (11) _L208 is 1-2 ? creep
^  Exit: (11) -1 is 1-2 ? creep
   Call: (11) f(0, _L209) ? creep
   Exit: (11) f(0, 0) ? abort
% Execution Aborted 
```

我试图找到错误，但失败了。如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:28:20.130

对于初学者，

```
fgen(A,B) :- fgen(X, Y), A is X+1, f(A, T), B is T. 
```

是相同的

```
fgen(A,B) :- fgen(X, _), A is X+1, f(A, B). 
```

所以你有两个问题。一个是您正在生成然后丢弃 Y，单例警告应该提醒您注意这一点。应始终通过用 _ 替换变量来响应单例警告；如果看起来这会使您的代码变成废话，那么您的代码就是废话。:)

另一个问题是这`B is T`是不必要的（`is/2`在这里使用而不是`=/2`什么都没有，因为右侧没有算术）。

所以让我们试试这个：

```
fgen(A, B) :- fgen(X, A), B is X + A. 
```

这几乎可以工作：

```
?- fgen(X, Y).
X = Y, Y = 0 ;
X = Y, Y = 1 ;
X = Y, Y = 0 ;
X = 1,
Y = 2 ;
X = Y, Y = 0 ;
X = 2,
Y = 3 ;
X = Y, Y = 0 ;
X = 3,
Y = 5 ;
X = Y, Y = 0 ;
X = 5,
Y = 8 ;
X = Y, Y = 0 ;
X = 8,
Y = 13 ;
X = Y, Y = 0 ;
X = 13,
Y = 21 . 
```

所有那些无意义的零都应该告诉你，你根本不需要你的第一个基本情况。毕竟，添加零不会改变任何事情。如果您删除该基本情况，您将获得所需的行为：

```
?- fgen(X, Y).
X = Y, Y = 1 ;
X = 1,
Y = 2 ;
X = 2,
Y = 3 ;
X = 3,
Y = 5 ;
X = 5,
Y = 8 ;
X = 8,
Y = 13 ;
X = 13,
Y = 21 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:57:52.350

首先，你`f/2`的***不行***：

```
6 ?- f(10,X).

X = 55 ;
ERROR: (user://2:68):
        Out of local stack 
```

您的条款应**互斥**：

```
f(0,0).
f(1,1).
f(N,R):-N>1,
        P is N-1,Q is N-2,f(P,T1),f(Q,T2),R is T1+T2. 
```

如果没有`N>1`测试，在重新开始时，最深的目标`f(0,T2)`将与第三条规则重新匹配，单向进入负数，永远不会返回。现在，使用互斥子句，这种不匹配被阻止并且谓词变得确定：

```
8 ?- f(10,X).

X = 55 ;

No 
```

也许您尝试生成所有可能的值，但出现错误：

```
9 ?- f(A,B).

A = 0,    B = 0 ;    
A = 1,    B = 1 ;
ERROR: (user://5:147):
        Arguments are not sufficiently instantiated
^  Exception: (8) _G230>1 ? abort
% Execution Aborted 
```

因为第一个参数必须是完全实例化的数字，才能与`>`and一起使用`is`。

因此，您的第二个谓词`fgen(A,B)`. 有点不清楚，但从`f(A,T)`它打算`A`成为索引的调用来看，以及`B`它对应的斐波那契数，一个一个地生成答案序列`(0,0) , (1,1) , (2,1), (3,2) , (4,3), (5,5) , (6,8) , ...`。为了枚举索引，我们可以定义

```
% natural(0).
% natural(A):- natural(B), A is B+1.

natural(N):- znat(0,N).
znat(N,N).
znat(A,N):- B is A+1, znat(B,N). 
```

然后简单地

```
fgen(A,B):- natural(A), f(A,B). 
```

现在，

```
12 ?- fgen(A,B).

A = 0,    B = 0 ;    
A = 1,    B = 1 ;    
A = 2,    B = 1 ;    
A = 3,    B = 2 ;    
A = 4,    B = 3 ;    
A = 5,    B = 5 ;    
A = 6,    B = 8 
```

第一个（注释掉的）版本`natural/1`创建了一个线性长度的执行堆栈。第二个版本在恒定堆栈空间中运行。

当然，你`f/2`是双重递归的，所以它会比以往任何时候都更早地耗尽堆栈`natural`。

# c++ - 前向声明问题

> ID：15299857
> 
> 赞同：2
> 
> 时间：2013-03-08T17:28:55.637
> 
> 标签：c++, forward-declaration

我认为我的前向声明有问题。我认为一个是必要的，但我不确定。

基本上我有一个main.cpp：

```
//main.cpp
#include <iostream>
#include "CalculateForces.h"
#include "ParticleBox.h"

int main(void)
{
    //g++ main.cpp ParticleBox.cpp -lgsl -lgslcblas -lm -std=c++0x

    CalculateForces* calculate_forces= new CalculateForces();
    ParticleBox* particles_box = new ParticleBox(2000,100,100,100);

    delete calculate_forces;
    delete particles_box;

    return 0;

} 
```

CalculateForces.h 看起来像这样：

```
//CalculateForces.h
//We update the forces on each particle
class ParticleBox;
class CalculateForces
{
    public:
        CalculateForces(void);
        ~CalculateForces(void);
        int UpdateForces(ParticleBox* particlebox);
        int DiscretizeSpace(float cutoff_distance);
        int LJForce(int local_index, int remote_index, ParticleBox* particlebox);               

}; 
```

最后 ParticleBox.h 文件如下所示：

```
//ParticleBox.h
//This is the definition of the particlebox. We manage all the particles in this
//file

//This should be changed to a template so that we can run float and double calcs properly :D
struct Particle;

class ParticleBox
{
public:
    ParticleBox(int Num_Particles, float Box_length_x_, float Box_length_y_, float Box_length_z_);
    ~ParticleBox(void);
    int set_num_particles(int Num_Particles);
    int InitialiseUniverse(int temp,float mass);
    float Boltzmann(float temperature);
    int GenerateRandomUniquePositions(int number, float max, float min, float* rand_dim_positions);

private:
    //Array to hold particles. Each particle has its own struct
    Particle** particle_list_;

    int num_particles_;
    float box_length_x_;
    float box_length_y_;
    float box_length_z_;
    float* rand_x_positions_;
    float* rand_y_positions_;
    float* rand_z_positions_;
    float cutoff_distance_;
    float sigma_;
    float epsilon_;

};

int CalculateForces::DiscretizeSpace(float cutoff_distance, ParticleBox* particlebox)
{
    ......
    return 0;

} 
```

我在 Particle Struct 的 ParticleBox.h 中使用前向声明，并且可以将 Particle* 类型的指针添加到类中。这工作正常。

类 ParticleBox 的CalculateForces.h 中的转发会导致大量编译器错误（太多无法发布，但它们以与下面相同的方式开始）。省略它只会产生一些错误：

```
In file included from main.cpp:3:0:
CalculateForces.h:9:20: error: ‘ParticleBox’ has not been declared
CalculateForces.h:11:50: error: ‘ParticleBox’ has not been declared
In file included from CalculateForces.cpp:3:0:
CalculateForces.h:9:20: error: ‘ParticleBox’ has not been declared
CalculateForces.h:11:50: error: ‘ParticleBox’ has not been declared
CalculateForces.cpp:12:35: error: ‘int CalculateForces::UpdateForces’ is not a static member of ‘class CalculateForces’
CalculateForces.cpp:12:35: error: ‘ParticleBox’ was not declared in this scope
CalculateForces.cpp:12:48: error: ‘particlebox’ was not declared in this scope
CalculateForces.cpp:13:1: error: expected ‘,’ or ‘;’ before ‘{’ token 
```

当我尝试将该类型用作参数时，我认为我需要前向声明？我究竟做错了什么？

感谢和抱歉，很长的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:10:03.940

您的帖子非常令人困惑，因为您发布了省略前向声明时出现的错误，并且您的代码中显然有一些其他错误与您询问的错误混合在一起。

我假设通过前向声明，错误会发生变化，因为它们主要出现在实现文件中，对吧？在这种情况下，问题可能在于，只要您声明指向该类型的指针，前向声明就足够了，但是当您开始使用指针（取消引用它）时，这还不够。

如果是这种情况，则问题很可能是您忘记了`#include "ParticleBox.h"`（`CalculateForces.cpp`或其他一些实现文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:32:53.933

Rob 确定错误的根源在于我没有发布的一些代码。有一些错误，但最大的是在CalculateForces.cpp中我试图访问`int num_particles_;`它当然是ParticleBox的私有成员。

# html - 如何不显示 div 元素之外的链接？

> ID：15299858
> 
> 赞同：0
> 
> 时间：2013-03-08T17:28:55.190
> 
> 标签：html, css, overflow

HTML 代码：

```
<p>texts and a link: <a href="https://www.apple.com/aaaaaaaaaaaaaaaaaaaaaaaaa">https://www.apple.com/aaaaaaaaaaaaaaaaaaaaaaaaa</a> 
```

CSS 代码：

```
p {
    width: 100px;
    height: 600px;
    background: red;
} 
```

在此处查看代码演示：http: [//jsfiddle.net/9j4pT](http://jsfiddle.net/9j4pT)

从代码演示中，您可以看到链接显示在红色段落元素之外。我希望链接可以显示在红色段落元素内。有解决办法吗？HTML5 有解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:30:59.333

首先你要关闭你的 p 标签`</p>`

然后你想要自动换行：

```
p {
    width: 100px;
    height: 600px;
    background: red;
    word-wrap: break-word
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:36:14.803

您还可以将溢出设置为隐藏。

```
p {
    width: 100px;
    height: 600px;
    background: red;
    overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:36:36.050

取决于您要寻找的结果。

如果您希望**p 宽度**保持不变，请使用：

```
p {
   word-wrap: break-word;
} 
```

如果您希望**a 宽度**保持不变，请使用：

```
p {
   /*remove width: 100px;*/
   display: inline-block;
} 
```

# javascript - JavaScript 函数参数命名约定

> ID：15299860
> 
> 赞同：0
> 
> 时间：2013-03-08T17:28:59.923
> 
> 标签：javascript, parameter-passing, naming

对 JavaScript 函数使用公认的参数命名约定是否常见？例如：

```
function MyFunction(nParam1, tParam2, oParam3) {..} 
```

其中`nParam1`是数字，`tParam2`是文本，`oParam3`是对象

这样做是有道理的，但是我仍然看到很多代码不使用这种命名约定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T17:31:15.070

> 对 JavaScript 函数使用公认的参数命名约定是否常见？

我不知道您所说的“......接受的参数命名约定......”是什么意思（我已经在各种语言和环境中看到至少六种参数命名约定，没有一个被普遍“接受”）......

...但答案是否定的，JavaScript 中没有广泛使用的函数参数命名约定——除非您考虑只使用普通名称（例如，没有任何匈牙利式前缀等）约定。简单的名字是我看到的最常见的东西。具体来说，以小写字母开头的普通名称。一旦你超越了这一点，就会有更多的变化。`camelCase`是常见的，但也是如此`underscore_separated`。

就约定而言，我在野外看到的最接近的事情是：

1.  最初封顶的混合大小写，例如`Date`or `Foo`，几乎是为构造函数保留的。

2.  `ALL_CAPS`通常仅用于被视为常量的事物。

3.  其他所有内容似乎都以小写字母开头，并且是`camelCase`or `underscore_separated`。对此没有明确的共识，尽管我认为`camelCase`有优势，可能是因为 JavaScript 本身使用它（`toLowerCase`等）。

# php - 在应用程序中显示 FQL 查询的结果

> ID：15299862
> 
> 赞同：1
> 
> 时间：2013-03-08T17:29:01.940
> 
> 标签：php, facebook, facebook-fql

对 Facebook 开发来说真的很陌生。所以我正在运行这个查询”

从用户 WHERE uid = me() 中选择friend_count

我从 Graph API explorer 得到的响应是

```
{
  "data": [
    {
      "friend_count": 175
    }
  ]
} 
```

现在我希望这个结果显示在我正在开发的应用程序中，我运行以下代码

```
 $fc = $facebook->api(array(
    'method' => 'fql.query',
    'query' => 'SELECT friend_count FROM user WHERE uid = me()'
  )); 
```

现在我不知道如何显示数字......

此外，如果这有助于 print_r($fc) 给出以下结果

```
Array
(
    [0] => Array
        (
            [friend_count] => 175
        )

) 
```

感谢您的帮助，如果我没有正确发布问题，请原谅我仍在弄清楚如何使用这个很棒的网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:54:11.833

你得到了一个数组，在索引 0 处只有一个元素。这个元素也是一个数组，它包含一个带有`friend_count`键的值。

```
echo $fc[0]["friend_count"]; 
```

# php - 从多个表中选择并显示到表中

> ID：15299864
> 
> 赞同：1
> 
> 时间：2013-03-08T17:29:07.160
> 
> 标签：php, mysql, sql, select, join

我对这一切都很陌生。

`order`这是我原来的问题，我有两个表叫`order_items`

```
order_id--pupil_id --date_bought--total_price

1  ----1001---- 2013-03-07 23:35:49 - 1.00 
```

和

```
order_id-- product_name

1 ------ product1

1 ------ product2 
```

我想显示购买日期和总价。这将是某种加入声明，其中包含使用最新 order_id 购买的产品，该 order_id 将由学生 id 选择，可能在语句中按 desc 排序。

我不确定如何将它拼凑在一起。关于如何实现这一目标的任何想法或线索？

* * *

在史蒂夫钱伯斯让我做的那一刻，我得到了这个：

```
$query = mysql_query("SELECT *
FROM `order` o
JOIN `order_items` oi
ON o.order_id = oi.order_id
ORDER BY o.order_id DESC");

$query_assoc = mysql_fetch_array($query);

echo $query_assoc['product_name'];

echo $query_assoc['date_bought'];

echo $query_assoc['total_price']; 
```

这是一个测试，看看它是否有效，它确实显示了与学生 ID 关联的最后一个订单 ID 行，但是如何检索所有行并将它们放入表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:04:40.163

You're actually asking two questions here:

1.  I want to display date bought and total price ....
2.  how do i retrieve all rows and place them into a table

To get a collective price, you can either do it from the database by joining the tables together, you've already done that but to get a sum to make the total price you need to group the items together. You'll need a query like:

```
SELECT o.order_id, o.pupil_id, o.date_bought, SUM(o.total_price) AS total_price FROM order o
LEFT JOIN order_items oi
  ON oi.order_id = o.order_id
GROUP BY o.order_id 
```

If you want to put the list of results in a table you will need to loop though the result set you have and write that out within an HTML table.

# asp.net-mvc - MVC 4 自定义成员资格提供程序问题

> ID：15299865
> 
> 赞同：1
> 
> 时间：2013-03-08T17:29:08.223
> 
> 标签：asp.net-mvc, membership-provider

我正在开发我的第一个真正的 MVC 项目，我的任务是实现一个自定义成员资格提供程序。我之前在 asp.net 3.5 Web Forms 中实现过一个，所以如果可能的话，我会尝试重用其中的一些代码。我们的数据来自远程 Web 服务，因此我不会使用任何标准的会员数据库。基于对 Web 表单的一些研究和经验，我创建了我的课程：

```
public class wwdllMembershipProvider : MembershipProvider 
```

我将以下内容放在 web.config 中：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication>
  <membership defaultProvider="wwdllMembershipProvider" userIsOnlineTimeWindow="15">
      <providers>
          <add name="wwdllMembershipProvider" type="wwdllMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="false" writeExceptionsToEventLog="false" enablePasswordChange="true" />
      </providers>
  </membership> 
```

从那里我只是想看看我的会员提供程序中是否有任何被删除的代码被击中。但是当我点击应用程序中的登录链接时，我会收到以下错误：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例） 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

源错误：

```
Line 55:                     using (var context = new UsersContext())
Line 56:                     {
Line 57:                         if (!context.Database.Exists())
Line 58:                         {
Line 59:                             // Create the SimpleMembership database without Entity Framework migration schema

Source File: c:\Users\mburt\Documents\Visual Studio 2012\Projects\eSales\4300\Siriusware.eSales\Filters\InitializeSimpleMembershipAttribute.cs    Line: 57 
```

这让我感到困惑，因为我不认为 Simple Membership Provider 代码会因为 web.config 设置禁用它而执行。

有人可以向我指出我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:38:18.790

默认帐户控制器就是用那个属性装饰的。检查它是否仍然存在。

（下面是默认的 MVC4 项目代码。）

```
namespace MvcApplication2.Controllers
{
    [Authorize]
    [InitializeSimpleMembership]
    public class AccountController : Controller
    {
        [...]
    }
} 
```

# wkhtmltopdf - wkhtmltopdf中页面顶部的标题高度和定位标题

> ID：15299869
> 
> 赞同：14
> 
> 时间：2013-03-08T17:29:16.803
> 
> 标签：wkhtmltopdf

在我的应用程序中，允许用户定义自己的打印页眉和边距。对于标题，用户可以提供以下两个字段：

*   (a) 以毫米为单位的页面顶部边距（从页面顶部开始）
*   (b) 以毫米为单位的页眉边距（从页面顶部开始）

(a) 和 (b) 字段如下图所示： ![边距描述](../Images/44b1b7a1032e7eb4a099d57f9f55b7f4.png)

例如，如果用户提供 (a) 为 10 毫米和 (b) 为 100 毫米，则“标题区域”的高度将为 90 毫米。

现在标题中的内容需要在标题区域的顶部对齐。

有没有办法设置标题区域高度并在此标题区域内顶部对齐内容。

目前，我正在为**header-html**选项执行以下操作：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <style type="text/css">
        body 
        {
            border:0; 
            margin: 0;
            padding: 0;
            height: 90mm;  //in actual program, this is set dynamically in PHP
        }
    </style>

    <script type="text/javascript">
    function subst() 
    {
        //process the GET parameters and accordingly set the Header Region text info
    }  
    </script>
</head>

<body onload="subst()">
    <div>
        //text
    </div>
</body>  
</html> 
```

**margin-top**选项被设置为 100mm。

我尝试为*body CSS 设置**垂直对齐：顶部*，但这也不起作用。

 *我实现的最终输出似乎没有在顶部或中间垂直对齐标题区域内容。它位于 Header Region 中间的某个位置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T10:17:33.753

**编辑：仅当***wkh​​tmltopdf*安装在基于 Windows 的系统中时，似乎才需要此修复程序。

经过大量的试验和错误，我观察到以下逻辑似乎是可行的：

*   **html-head**的*body*元素需要设置为Header Region实际高度的1.33倍。（为什么？我不知道。这可能是由于某些 QT 或 wkhtmltopdf 渲染方式造成的，但它实际上适用于所有情况，与标题区域内容中的行无关）。
***   body 的直接（也是唯一的）子元素设置为 100% 高度并隐藏溢出的内容**

 ***因此， html-head*的更改代码（对于上面的示例）如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <style type="text/css">
        body 
        {
            border:0; 
            margin: 0;
            padding: 0;
            height: 120mm;
            /*
            In the actual program this height is calculated dynamically in PHP as
            ($headerMargin - $topMargin) * 1.33
            */
        }

        #master-div
        {
            overflow: hidden;
            height: 100%;
        }

    </style>

    <script type="text/javascript">
    function subst() 
    {
        //process the GET parameters and accordingly set the Header Region text info
    }  
    </script>
</head>

<body onload="subst()">
    <div id="master-div">
        //The actual content goes here
    </div>
</body>  
</html> 
```

我已经检查了至少 7 到 8 种不同的纸张尺寸（包括设置自定义*page-width*和*page-height*。还检查了不同的 Header Region 内容大小（范围从 1 行到 20 行）。

唯一的问题是，只有当页眉边距（b）/页脚边距小于或等于纸张高度的三分之一时，这种 1.33 倍页眉区域高度的逻辑似乎才有效。如果边距高度超过该值，则内容会随着边距高度的增加而被剪裁。但我猜通常不需要这么大的标题高度。***

# c - 使用 CV_MAT_ELEM 修改 CvMat* 像素

> ID：15299876
> 
> 赞同：1
> 
> 时间：2013-03-08T17:29:45.743
> 
> 标签：c, opencv

我正在尝试创建一个用于 Filter2D 函数的内核。该函数要求内核采用 CvMat 格式。

如何访问 CvMat 的元素？我有以下代码，它给出了编译器错误。

```
inline void plot(CvMat* mat, int x, int y, float c)
//plot the pixel at (x, y) with brightness c (where 0 ≤ c ≤ 1)
{
    CV_MAT_ELEM(mat,float,y,x) = MIN(c,1); //The error occurs at this line
} 
```

我收到以下错误：

> 错误 C2228：“.data”左侧必须有类/结构/联合错误 C2228：“.ptr”左侧必须有类/结构/联合错误 C2228：“.step”左侧必须有类/结构/联合

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:59:30.030

已解决：取消引用传递给宏的指针：

```
CV_MAT_ELEM(*mat,float,y,x) = MIN(c,1); 
```

# iphone - 香烟烟雾动画

> ID：15299877
> 
> 赞同：2
> 
> 时间：2013-03-08T17:29:49.233
> 
> 标签：iphone, ios, core-animation, particles

我想做一个香烟烟雾的动画，最好使用 UIKit（而不是 Cocos）。我之前和 CAEmitterLayer 合作过，在各种烟雾和雾气效果上都取得了不错的效果。问题是，香烟烟雾看起来与火灾产生的烟雾完全不同。使用粒子，我通常会得到这样的结果：

![在此处输入图像描述](../Images/50dd779f54ac822f5ce9633cc9c5e331.png)

但我所追求的更像是这样的：

![在此处输入图像描述](../Images/3f9f5a6864ceff0ad23acd7b2e9aaa82.png)

也许在这里使用粒子不是最好的方法？

# python - 如何使用 Python 装饰器检查函数参数？

> ID：15299878
> 
> 赞同：44
> 
> 时间：2013-03-08T17:29:50.167
> 
> 标签：python, python-decorators

我想在调用某些函数之前定义一些通用装饰器来检查参数。

就像是：

```
@checkArguments(types = ['int', 'float'])
def myFunction(thisVarIsAnInt, thisVarIsAFloat)
    ''' Here my code '''
    pass 
```

旁注：

1.  类型检查只是在这里展示一个例子
2.  我正在使用 Python 2.7，但 Python 3.0 也应该很有趣

编辑 2021：有趣的是，从长远来看，类型检查并没有使用[类型提示](https://docs.python.org/3/library/typing.html)和[mypy 反python](https://mypy.readthedocs.io/en/stable/)。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-08T17:49:24.377

来自[函数和方法的装饰器](http://www.python.org/dev/peps/pep-0318/)：

**蟒蛇2**

```
def accepts(*types):
    def check_accepts(f):
        assert len(types) == f.func_code.co_argcount
        def new_f(*args, **kwds):
            for (a, t) in zip(args, types):
                assert isinstance(a, t), \
                       "arg %r does not match %s" % (a,t)
            return f(*args, **kwds)
        new_f.func_name = f.func_name
        return new_f
    return check_accepts 
```

**蟒蛇 3**

在 Python 3`func_code`中已更改为`__code__`并`func_name`已更改为`__name__`.

```
def accepts(*types):
    def check_accepts(f):
        assert len(types) == f.__code__.co_argcount
        def new_f(*args, **kwds):
            for (a, t) in zip(args, types):
                assert isinstance(a, t), \
                       "arg %r does not match %s" % (a,t)
            return f(*args, **kwds)
        new_f.__name__ = f.__name__
        return new_f
    return check_accepts 
```

用法：

```
@accepts(int, (int,float))
def func(arg1, arg2):
    return arg1 * arg2

func(3, 2) # -> 6
func('3', 2) # -> AssertionError: arg '3' does not match <type 'int'> 
```

*`arg2`可以是`int`或者`float`*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-08T17:32:41.830

在 Python 3.3 上，您可以使用函数注释和检查：

```
import inspect

def validate(f):
    def wrapper(*args):
        fname = f.__name__
        fsig = inspect.signature(f)
        vars = ', '.join('{}={}'.format(*pair) for pair in zip(fsig.parameters, args))
        params={k:v for k,v in zip(fsig.parameters, args)}
        print('wrapped call to {}({})'.format(fname, params))
        for k, v in fsig.parameters.items():
            p=params[k]
            msg='call to {}({}): {} failed {})'.format(fname, vars, k, v.annotation.__name__)
            assert v.annotation(params[k]), msg
        ret = f(*args)
        print('  returning {} with annotation: "{}"'.format(ret, fsig.return_annotation))
        return ret
    return wrapper

@validate
def xXy(x: lambda _x: 10<_x<100, y: lambda _y: isinstance(_y,float)) -> ('x times y','in X and Y units'):
    return x*y

xy = xXy(10,3)
print(xy) 
```

如果存在验证错误，则打印：

```
AssertionError: call to xXy(x=12, y=3): y failed <lambda>) 
```

如果没有验证错误，则打印：

```
wrapped call to xXy({'y': 3.0, 'x': 12})
  returning 36.0 with annotation: "('x times y', 'in X and Y units')" 
```

您可以使用函数而不是 lambda 来获取断言失败中的名称。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-02-29T14:58:24.507

如您所知，仅根据其类型拒绝参数并不是pythonic。
Pythonic 方法是“先尝试处理它”
这就是为什么我宁愿做一个装饰器来转换参数

```
def enforce(*types):
    def decorator(f):
        def new_f(*args, **kwds):
            #we need to convert args into something mutable   
            newargs = []        
            for (a, t) in zip(args, types):
               newargs.append( t(a)) #feel free to have more elaborated convertion
            return f(*newargs, **kwds)
        return new_f
    return decorator 
```

这样，你的函数就会得到你期望的类型但是如果参数可以像浮点数一样嘎嘎作响，它就会被接受

```
@enforce(int, float)
def func(arg1, arg2):
    return arg1 * arg2

print (func(3, 2)) # -> 6.0
print (func('3', 2)) # -> 6.0
print (func('three', 2)) # -> ValueError: invalid literal for int() with base 10: 'three' 
```

我使用这个技巧（使用适当的转换方法）来处理[向量](http://holy-python.com/wordpress/la-librairie-vector2d-classe-vector2/)。
我编写的许多方法都期望 MyVector 类，因为它有很多功能；但有时你只想写

```
transpose ((2,4)) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-13T20:02:44.403

该包[`typeguard`](https://pypi.org/project/typeguard/)为此提供了一个装饰器，它从类型注释中读取类型信息，但它需要 Python >=3.5.2。我认为生成的代码非常好。

```
@typeguard.typechecked
def my_function(this_var_is_an_int: int, this_var_is_a_float: float)
    ''' Here my code '''
    pass 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T18:19:46.583

为了强制解析器的字符串参数在提供非字符串输入时会引发神秘错误，我编写了以下内容，试图避免分配和函数调用：

```
from functools import wraps

def argtype(**decls):
    """Decorator to check argument types.

    Usage:

    @argtype(name=str, text=str)
    def parse_rule(name, text): ...
    """

    def decorator(func):
        code = func.func_code
        fname = func.func_name
        names = code.co_varnames[:code.co_argcount]

        @wraps(func)
        def decorated(*args,**kwargs):
            for argname, argtype in decls.iteritems():
                try:
                    argval = args[names.index(argname)]
                except ValueError:
                    argval = kwargs.get(argname)
                if argval is None:
                    raise TypeError("%s(...): arg '%s' is null"
                                    % (fname, argname))
                if not isinstance(argval, argtype):
                    raise TypeError("%s(...): arg '%s': type is %s, must be %s"
                                    % (fname, argname, type(argval), argtype))
            return func(*args,**kwargs)
        return decorated

    return decorator 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-08T13:16:32.397

我有一个稍微改进的@jbouwmans 解决方案版本，使用python 装饰器模块，它使装饰器完全透明，不仅保留签名，还保留文档字符串，可能是使用装饰器的最优雅的方式

```
from decorator import decorator

def check_args(**decls):
    """Decorator to check argument types.

    Usage:

    @check_args(name=str, text=str)
    def parse_rule(name, text): ...
    """
    @decorator
    def wrapper(func, *args, **kwargs):
        code = func.func_code
        fname = func.func_name
        names = code.co_varnames[:code.co_argcount]
        for argname, argtype in decls.iteritems():
            try:
                argval = args[names.index(argname)]
            except IndexError:
                argval = kwargs.get(argname)
            if argval is None:
                raise TypeError("%s(...): arg '%s' is null"
                            % (fname, argname))
            if not isinstance(argval, argtype):
                raise TypeError("%s(...): arg '%s': type is %s, must be %s"
                            % (fname, argname, type(argval), argtype))
    return func(*args, **kwargs)
return wrapper 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-25T12:54:45.847

我认为这个问题的 Python 3.5 答案是[beartype](https://gist.github.com/leycec/3d48cc60e7d5fe8860b077acb067dc54)。如本文所述，它具有方便的功能[。](https://stackoverflow.com/a/39145690/4680402)您的代码将如下所示

```
from beartype import beartype
@beartype
def sprint(s: str) -> None:
   print(s) 
```

并导致

```
>>> sprint("s")
s
>>> sprint(3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 13, in func_beartyped
TypeError: sprint() parameter s=3 not of <class 'str'> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-21T18:46:15.540

所有这些帖子似乎都过时了 - pint 现在提供了内置的此功能。请参见[此处](http://pint.readthedocs.io/en/latest/wrapping.html#checking-dimensionality)。为后代复制这里：

> 检查维度当您希望将品脱量用作函数的输入时，品脱提供了一个包装器以确保单位的类型正确——或者更准确地说，它们与物理量的预期维度相匹配。
> 
> 与 wraps() 类似，您可以传递 None 来跳过检查某些参数，但不检查返回参数类型。
> 
> ```
> >>> mypp = ureg.check('[length]')(pendulum_period) 
> ```
> 
> 在装饰器格式中：
> 
> ```
> >>> @ureg.check('[length]')
> ... def pendulum_period(length):
> ...     return 2*math.pi*math.sqrt(length/G) 
> ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-03T05:16:10.057

您可以尝试使用[pydantic validation_decorator](https://pydantic-docs.helpmanual.io/usage/validation_decorator/)。从文档**pydantic**：

> 使用 python 类型注释的数据验证和设置管理。pydantic 在运行时强制执行类型提示，并在数据无效时提供用户友好的错误。在[基准测试](https://pydantic-docs.helpmanual.io/benchmarks/)中，pydantic 比所有其他经过测试的库都快。

```
from pydantic import validate_arguments, ValidationError

@validate_arguments
def repeat(s: str, count: int, *, separator: bytes = b'') -> bytes:
    b = s.encode()
    return separator.join(b for _ in range(count))

a = repeat('hello', 3)
print(a)
#> b'hellohellohello'

b = repeat('x', '4', separator=' ')
print(b)
#> b'x x x x'

try:
    c = repeat('hello', 'wrong')
except ValidationError as exc:
    print(exc)
    """
    1 validation error for Repeat
    count
      value is not a valid integer (type=type_error.integer)
    """ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-20T14:05:38.440

对我来说，上面共享的代码看起来很复杂。我为类型检查定义“通用装饰器”所做的工作：

我使用了 *args、**kwargs 功能，在使用函数/方法时几乎没有额外的工作，但易于管理。

***测试的适当示例定义***

```
argument_types = {
'name':str,
'count':int,
'value':float
} 
```

***装修定义***

```
//from functools import wraps

def azure_type(func):
    @wraps(func)
    def type_decorator(*args, **kwargs):
        for key, value in kwargs.items():
            if key in argument_types:
                if type(value) != argument_types[key]:
                    #enter code here
                    return 'Error Message or what ever you like to do'  
        return func(*args, **kwargs)
    return type_decorator 
```

***代码中的简单示例***

```
// all other definitions

@azure_type
def stt(name:str, value:float)->(int):
    #some calculation and creation of int output 
    count_output = #something int
    return count_output

// call the function:

stt(name='ati', value=32.90) #can test from that 
```

# sql - 如何计算 H2 数据库中已删除的行数？

> ID：15299882
> 
> 赞同：1
> 
> 时间：2013-03-08T17:30:03.877
> 
> 标签：sql, database, h2

我有一个简单的`DELETE FROM ... WHERE ...`语句，我想知道通过执行它删除了多少行。[我在H2 文档](http://www.h2database.com/html/grammar.html)中没有看到任何关于`NOCOUNT`或`ROWCOUNT`类似问题的建议。我可以`SELECT`在相同的条件下执行 a，但想知道是否有更好的方法。

# xna - 拖动游戏窗口时防止执行暂停

> ID：15299885
> 
> 赞同：3
> 
> 时间：2013-03-08T17:30:10.313
> 
> 标签：xna, window, drag

我有一个服务器和一个客户端。但是当我开始移动游戏窗口时，它会停止执行代码，直到窗口停止移动，导致连接超时，因为服务器或客户端停止响应一段时间。

我需要做什么才能使游戏始终运行代码，即使游戏窗口正在移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:34:38.773

这是 XNA 游戏的一个已知问题，有多种解决方法。

一种方法是移动一个假的窗口框架，这不是真正的游戏窗口。然后游戏窗口将适合假窗口的客户区域，只会暂停执行一小段时间。

不幸的是，其他方法可能涉及使用 windows 钩子，这就是我能说的。就个人而言，我推荐使用假窗口的方法。

# c# - XMS - 如何在网络中断后恢复到 WebSphere SIBus 的连接

> ID：15299890
> 
> 赞同：3
> 
> 时间：2013-03-08T17:30:36.897
> 
> 标签：c#, websphere-8

我正在连接到 JMS 队列。该队列由 WebSphere Application Server（版本 8.0.0.5）使用 SIBus 托管。

我有一个简单的程序来重现一些有问题的行为，它是用 C# 编写的，并使用 XMS（IBM 的 .NET API）连接到队列。**注意**：我从这里获得了 IBM.XMS dll：[MQC71: WebSphere MQ V7.1 Clients](http://www-01.ibm.com/support/docview.wss?uid=swg24031412 "MQC71：WebSphere MQ V7.1 客户端")

场景是这样的：

1.  运行程序（使用一个空队列，因此它等待阻塞的接收调用）
2.  断开网络（拔下以太网）
3.  几分钟后，Receive 调用引发异常
4.  程序尝试重新连接
5.  由于网络关闭而失败
6.  ...让它循环一下以验证此错误是否不断发生
7.  恢复网络（插入以太网）
8.  继续发生相同的错误（使用 WireShark 验证在 connectionFactory.CreateConnection() 调用期间没有发生网络流量）

**所以，问题是：**为什么 CreateConnection() 调用什么都不做（不发送任何数据包）但失败了？

```
using IBM.XMS;
using System;

namespace SimpleTest
{
    class Program
    {
        static void Main(string[] args)
        {
            while (true)
            {
                try
                {
                    string queueURI = "queue://your.details.GoHereDearReader";
                    string providerEndpoint = "1.2.3.4:1234";
                    string targetTransportChain = "InboundBasicMessaging";
                    string busName = "some_bus_name";

                    XMSFactoryFactory factoryFactory = XMSFactoryFactory.GetInstance(XMSC.CT_WPM);
                    IConnectionFactory connectionFactory = factoryFactory.CreateConnectionFactory();
                    connectionFactory.SetStringProperty(XMSC.WPM_PROVIDER_ENDPOINTS, providerEndpoint);
                    connectionFactory.SetStringProperty(XMSC.WPM_TARGET_TRANSPORT_CHAIN, targetTransportChain);
                    connectionFactory.SetStringProperty(XMSC.WPM_BUS_NAME, busName);

                    Log("Connecting...");
                    using (var connection = connectionFactory.CreateConnection())
                    {
                        using (var session = connection.CreateSession(false, AcknowledgeMode.AutoAcknowledge))
                        {
                            using (var destination = session.CreateQueue(queueURI))
                            {
                                destination.SetIntProperty(XMSC.DELIVERY_MODE, XMSC.DELIVERY_NOT_PERSISTENT);
                                connection.Start();

                                using (IMessageConsumer consumer =  session.CreateConsumer(destination))
                                {
                                    Log("Receiving...");
                                    IMessage recvMsg = consumer.Receive();
                                    Log("recvMsg:" + recvMsg);
                                }
                            }
                        }
                    }
                }
                catch (Exception e)
                {
                    Log(e.ToString());
                }
                Log("Sleeping some before consuming more...");
                System.Threading.Thread.Sleep(10 * 1000);
            }//while
        }//Main

        static void Log(string text)
        {
            Console.WriteLine(DateTime.UtcNow.ToString("HH:mm:ss.fff") + "--------------------------  " + text);
        }

    }
} 
```

还有一些输出：

```
16:38:19.483--------------------------  Connecting...
16:38:19.936--------------------------  Receiving...
16:43:31.952--------------------------  IBM.XMS.XMSException: EXCEPTION_RECEIVED_CWSIA0022
EXCEPTION_RECEIVED_CWSIA0022.explanation
EXCEPTION_RECEIVED_CWSIA0022.useraction
   at IBM.XMS.Impl.Connection.Dispose(Boolean disposing)
   at IBM.XMS.Impl.Connection.Dispose()
   at SimpleTest.Program.Main(String[] args) in c:\Users\Administrator\Documents\Visual Studio Projects\TestJMSDequeue\SimpleTest\Program.cs:line 43

Linked Exception : IBM.XMS.SIB.JFAP.JFapConversationClosedException: Exception of type 'IBM.XMS.SIB.JFAP.JFapConversationClosedException' was thrown.
   at IBM.XMS.SIB.JFAP.ConversationImpl.Send(IByteBuffer[] data, JFAPSegmentType segmentType, UInt16 requestNumber, IoPriority priority, Boolean pooledBufferHint, IReceiveListener recvListener, ISendListener sendListener, Object state)
   at IBM.XMS.SIB.JFAP.ConversationImpl.RequestReplyExchange(IByteBuffer[] data, JFAPSegmentType segmentType, UInt16 requestNumber, IoPriority priority, Boolean pooledBufferHint)
   at IBM.XMS.SIB.JFAP.ConversationImpl.RequestReplyExchange(IByteBuffer data, JFAPSegmentType segmentType, UInt16 requestNumber, IoPriority priority, Boolean pooledBufferHint)
   at IBM.XMS.SIB.Comms.Client.JFAPCommunicator.RequestReplyExchange(IByteBuffer data, JFAPSegmentType sendSegType, MessagePriority priority, Boolean canPoolOnReceive)
   at IBM.XMS.SIB.Comms.Client.ConnectionProxy.Close()
   at IBM.XMS.Impl.Connection.Dispose(Boolean disposing)
16:43:31.952--------------------------  Sleeping some before consuming more...
16:43:41.967--------------------------  Connecting...
Exception  : System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
FFDC to xmsffdc8416_2013.03.08T10.43.41.967444.txt
Exception  : IBM.XMS.Formats.MFP.MessageEncodeFailedException: Exception of type 'IBM.XMS.Formats.MFP.MessageEncodeFailedException' was thrown. ---> System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   --- End of inner exception stack trace ---
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   at IBM.XMS.Formats.MFP.SIB.TrmFirstContactMessageImpl.Encode(Object connection)
   at IBM.XMS.SIB.Trm.ClientBootstrapHandler.Connect(IClientConnection clientConnection)
FFDC to xmsffdc8416_2013.03.08T10.43.41.983044.txt
16:43:41.983--------------------------  IBM.XMS.XMSException: EXCEPTION_RECEIVED_CWSIA0241
EXCEPTION_RECEIVED_CWSIA0241.explanation
EXCEPTION_RECEIVED_CWSIA0241.useraction
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection()
   at SimpleTest.Program.Main(String[] args) in c:\Users\Administrator\Documents\Visual Studio Projects\TestJMSDequeue\SimpleTest\Program.cs:line 26

Linked Exception : IBM.XMS.Core.SIResourceException: CWSIT0006E: It is not possible to connect to bus your_bus_name_here because the following bootstrap servers could not be contacted  1.2.3.4:1234:BootstrapBasicMessaging and the following bootstrap servers returned an error condition . See previous messages for the reason for each bootstrap server failure.
The client cannot connect to the bus. This situation may be due to configuration problems, network problems or it may be that none of the required bootstrap servers or messaging engines are currently available.
Ensure that the network is working correctly and that the required bootstrap servers and messaging engines are available. ---> IBM.XMS.Core.SIConnectionLostException: Exception of type 'IBM.XMS.Core.SIConnectionLostException' was thrown.
   at IBM.XMS.SIB.Comms.Client.ClientSideConnection.Connect(ConnectionProperties cp, IClientComponentHandshake cch, SICoreConnectionProperties siProps)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   --- End of inner exception stack trace ---
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.CreateConnection(Credentials credentials, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactory.CreateConnection(String username, String password, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
16:43:41.983--------------------------  Sleeping some before consuming more...
16:43:51.998--------------------------  Connecting...
Exception  : System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
FFDC to xmsffdc8416_2013.03.08T10.43.51.998262.txt
Exception  : IBM.XMS.Formats.MFP.MessageEncodeFailedException: Exception of type 'IBM.XMS.Formats.MFP.MessageEncodeFailedException' was thrown. ---> System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   --- End of inner exception stack trace ---
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   at IBM.XMS.Formats.MFP.SIB.TrmFirstContactMessageImpl.Encode(Object connection)
   at IBM.XMS.SIB.Trm.ClientBootstrapHandler.Connect(IClientConnection clientConnection)
FFDC to xmsffdc8416_2013.03.08T10.43.51.998262.txt
16:43:51.998--------------------------  IBM.XMS.XMSException: EXCEPTION_RECEIVED_CWSIA0241
EXCEPTION_RECEIVED_CWSIA0241.explanation
EXCEPTION_RECEIVED_CWSIA0241.useraction
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection()
   at SimpleTest.Program.Main(String[] args) in c:\Users\Administrator\Documents\Visual Studio Projects\TestJMSDequeue\SimpleTest\Program.cs:line 26

Linked Exception : IBM.XMS.Core.SIResourceException: CWSIT0006E: It is not possible to connect to bus your_bus_name_here because the following bootstrap servers could not be contacted  1.2.3.4:1234:BootstrapBasicMessaging and the following bootstrap servers returned an error condition . See previous messages for the reason for each bootstrap server failure.
The client cannot connect to the bus. This situation may be due to configuration problems, network problems or it may be that none of the required bootstrap servers or messaging engines are currently available.
Ensure that the network is working correctly and that the required bootstrap servers and messaging engines are available. ---> IBM.XMS.Core.SIConnectionLostException: Exception of type 'IBM.XMS.Core.SIConnectionLostException' was thrown.
   at IBM.XMS.SIB.Comms.Client.ClientSideConnection.Connect(ConnectionProperties cp, IClientComponentHandshake cch, SICoreConnectionProperties siProps)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   --- End of inner exception stack trace ---
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.CreateConnection(Credentials credentials, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactory.CreateConnection(String username, String password, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
16:43:51.998--------------------------  Sleeping some before consuming more...
16:44:02.013--------------------------  Connecting...
Exception  : System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
FFDC to xmsffdc8416_2013.03.08T10.44.02.013479.txt
Exception  : IBM.XMS.Formats.MFP.MessageEncodeFailedException: Exception of type 'IBM.XMS.Formats.MFP.MessageEncodeFailedException' was thrown. ---> System.InvalidOperationException: UniqueLinkObject no seen on handshake.
   at IBM.XMS.Formats.MFP.SIB.SchemaManager.SendSchemas(ICommsConnection connection, JMFSchema[] schemas)
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   --- End of inner exception stack trace ---
   at IBM.XMS.Formats.MFP.SIB.JsMsgObject.Encode(Object connection)
   at IBM.XMS.Formats.MFP.SIB.TrmFirstContactMessageImpl.Encode(Object connection)
   at IBM.XMS.SIB.Trm.ClientBootstrapHandler.Connect(IClientConnection clientConnection)
FFDC to xmsffdc8416_2013.03.08T10.44.02.013479.txt
16:44:02.013--------------------------  IBM.XMS.XMSException: EXCEPTION_RECEIVED_CWSIA0241
EXCEPTION_RECEIVED_CWSIA0241.explanation
EXCEPTION_RECEIVED_CWSIA0241.useraction
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection()
   at SimpleTest.Program.Main(String[] args) in c:\Users\Administrator\Documents\Visual Studio Projects\TestJMSDequeue\SimpleTest\Program.cs:line 26

Linked Exception : IBM.XMS.Core.SIResourceException: CWSIT0006E: It is not possible to connect to bus your_bus_name_here because the following bootstrap servers could not be contacted  1.2.3.4:1234:BootstrapBasicMessaging and the following bootstrap servers returned an error condition . See previous messages for the reason for each bootstrap server failure.
The client cannot connect to the bus. This situation may be due to configuration problems, network problems or it may be that none of the required bootstrap servers or messaging engines are currently available.
Ensure that the network is working correctly and that the required bootstrap servers and messaging engines are available. ---> IBM.XMS.Core.SIConnectionLostException: Exception of type 'IBM.XMS.Core.SIConnectionLostException' was thrown.
   at IBM.XMS.SIB.Comms.Client.ClientSideConnection.Connect(ConnectionProperties cp, IClientComponentHandshake cch, SICoreConnectionProperties siProps)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   --- End of inner exception stack trace ---
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.Bootstrap(Credentials credentials, SICoreConnectionProperties connectionProperties, ClientAttachProperties cap)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactoryImpl.CreateConnection(Credentials credentials, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.SIB.Trm.TrmSICoreConnectionFactory.CreateConnection(String username, String password, SICoreConnectionProperties connectionProperties)
   at IBM.XMS.Impl.ConnectionFactory.CreateConnection(String userName, String password)
16:44:02.013--------------------------  Sleeping some before consuming more... 
```

请注意，在上面的输出中，我在“接收...”后不久拔掉了网络，并在 16:43:52 再次插入，但在那之后错误继续存在，直到我终止了程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:07:42.203

当网络再次可用时，它看起来像 ConnectionFactory 没有正确重置它的状态。

我已经在参考手册中搜索了工厂重置功能的任何提示 - 但没有找到。但是我会尝试这个：将`GetInstance(...)`和`createConnectionFactory()`移出循环以及`SetStringProperty()`线条。

如果那不起作用，我看不出您的客户为什么不起作用。您是否考虑过这是否是服务器的问题？您拔下哪条以太网电缆？连接到客户端或服务器的那个？如果是服务器，拔掉客户端电缆时会出现同样的问题吗？如果你重新启动程序，它会工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T10:55:56.977

我知道这是一个旧帖子，但也许它仍然会有所帮助。

创建 65.535 连接后，您会收到此错误。关闭连接/处置对象都没关系。

我看到以下解决方案：

1.) 您可以创建一次连接，然后将连接重用于队列上的所有操作，直到连接中断。然后你必须重新连接。（是的，这很糟糕并且违反了常见模式。我不建议这样做）

2.) 版本 8.0.0.6 有一个错误修复。*编辑：APAR #(IJ01244)* 我还不知道它什么时候会包含在未来的版本中。我想您可以联系 IBM 支持并参考此 PMR ID 来接收 IBM.XMS.SIB.dll 的更新版本

希望这可以帮助。

# .htaccess - .htaccess 子文件夹中的子域

> ID：15299892
> 
> 赞同：1
> 
> 时间：2013-03-08T17:30:37.857
> 
> 标签：.htaccess

我正在构建一个应用程序，我想将子域“x”映射到`example.com/_sub/x/`但前提是文件夹“_sub”中存在文件夹“x”。如果没有，我希望显示 example.com。以下方法有效，但前提是文件或文件夹也存在于文件夹 x 中。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^(.*).example.com [NC]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*)$ http://example.com/_sub/%1/$1 [L]
</IfModule> 
```

这是另一种看待它的方式。

```
doesNotExist.example.com -> example.com
test.example.com         -> test.example.com
example.com              -> example.com 
```

这是我更新的代码。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

#If the file and directory exists
RewriteCond %{HTTP_HOST} ^(.*).example.com [NC]
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/ -d
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/$1 -f
RewriteRule ^(.*)$ http://example.com/_sub/%1/$1 [P]

#If the directory exists but the file does not
RewriteCond %{HTTP_HOST} ^(.*).example.com [NC]
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/ -d
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/$1 !-f
RewriteRule ^(.*)$ http://example.com/_sub/%1/404.html [P]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:45:08.890

我最初遇到的问题是通过添加第二组规则将不存在的文件发送到本地 404 页面来解决的。一旦我弄清楚了这一点，我就发现除了没有尾随文件的链接之外，一切正常。我只是添加了`[OR]`语句和以下行来解决这个问题。希望这对我所在职位的其他人有所帮助。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

# If the file and directory exists
RewriteCond %{HTTP_HOST} ^(.*).example.com [NC]
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/ -d
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/$1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/$1 -d
RewriteRule ^(.*)$ http://example.com/_sub/%1/$1 [P]

# If the directory exists but the file does not
RewriteCond %{HTTP_HOST} ^(.*).example.com [NC]
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/ -d
RewriteCond %{DOCUMENT_ROOT}/_sub/%1/$1 !-f
RewriteRule ^(.*)$ http://example.com/_sub/%1/404.html [P]
</IfModule> 
```

# ruby - 从 Ruby 哈希中选择项目

> ID：15299893
> 
> 赞同：0
> 
> 时间：2013-03-08T17:30:49.237
> 
> 标签：ruby, hash

我在 Ruby 中有一个如下所示的哈希：

```
{"NameValues"=>[
    {"Name"=>"Field 1", "Values"=>["Data 1"]}, 
    {"Name"=>"Field 2", "Values"=>["Data 2"]}, 
    {"Name"=>"Field 3", "Values"=>["Data 3"]}, 
    {"Name"=>"Field 4", "Values"=>["Data 4"]}, 
    {"Name"=>"Field 5", "Values"=>["Data 5"]}
]} 
```

我想通过使用“Names”元素中的名称来选择“Values”元素的内容，例如，通过搜索“Field 3”等来定位“Data 3”字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:44:56.157

您可以使用[Enumerable#find](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-find)方法按名称查找哈希：

```
hash = {"NameValues"=>[
    {"Name"=>"Field 1", "Values"=>["Data 1"]}, 
    {"Name"=>"Field 2", "Values"=>["Data 2"]}, 
    {"Name"=>"Field 3", "Values"=>["Data 3"]}, 
    {"Name"=>"Field 4", "Values"=>["Data 4"]}, 
    {"Name"=>"Field 5", "Values"=>["Data 5"]}
]}

p hash['NameValues'].find{ |h| h['Name'] == 'Field 3'}['Values']
#=> ["Data 3"] 
```

`find`基本上遍历`NameValues`数组，直到找到匹配的元素。然后，您可以`Values`从返回的元素中获取 。

# ios - Ios 如何向我的 TabBarController 添加一个按钮，然后从中触发模态视图的呈现

> ID：15299896
> 
> 赞同：0
> 
> 时间：2013-03-08T17:31:05.427
> 
> 标签：ios, modalviewcontroller, ibaction, uiapplicationdelegate

我有一个基于 UITabBarController 的应用程序。我从应用程序委托实例化它并在标签栏控制器中添加一个自定义按钮。单击该按钮时，我想以模态方式呈现另一个视图，但我似乎不知道该怎么做。添加按钮我基本上是这样做的

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
[self.tabBarController.view addSubview:button];
[button addTarget:self action:@selector(showModalViewController:) forControlEvents:UIControlEventTouchUpInside]; 
```

而且在应用程序委托中我有一个方法

```
- (void) showModalViewController {
    DummyViewController *addController = [[DummyViewController alloc]
                                                initWithNibName:@"DummyViewController" bundle:nil];
    //addController.delegate = self;

    self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:0];

    // Create the navigation controller and present it modally.
    [self.tabBarController.selectedViewController presentModalViewController:addController animated:YES];

    // The navigation controller is now owned by the current view controller
} 
```

我不断收到无法识别的选择器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:42:46.293

您的选择器会查找名为的方法`showModalViewController:`，但您的实际方法名为`showModalViewController`。改变一个或另一个。

要么将选择器更改`@selector(showModalViewController)`为匹配现有方法，要么将方法更改为：

```
- (void)showModalViewController:(UIButton *)button { 
```

不要同时改变两者。

# java - JFreeChart - Java 堆空间问题

> ID：15299898
> 
> 赞同：0
> 
> 时间：2013-03-08T17:31:14.097
> 
> 标签：java, swing, jfreechart

我第一次使用 JFreeChart，我正在使用 TimeSeriesCollection() 创建 TimeSeriesChart。

我从数据库查询中得到的结果是 app。大约 1000 条记录。我正在使用*org.jfree.date.time.Minute.Minute(int min.....)*对象将其添加到 TimeSeries 对象。

我有一个 JFrame，我直接在其上添加 ChartPanel。用户将提供新的输入参数并使用新数据集重新加载图表数据。**所以我在每次重新加载**之前通过在方法中调用以下内容进行清理

```
 dataset.removeAllSeries();
            chart.removeLegend();
            chart.getRenderingHints().clear();
            cp.getChartRenderingInfo().setEntityCollection(null);
            cp.removeAll();
            cp.revalidate(); 
```

输出是完美的。但我注意到，在“在 Eclipse 中多次”运行程序后，我看到以下关于 Java 堆空间的错误消息。有时我还在任务管理器中看到，即使数据集非常小（100 条记录），程序也会占用 PC 内存。

```
Exception occurred during event dispatching:
java.lang.OutOfMemoryError: Java heap space
at sun.util.calendar.Gregorian.newCalendarDate(Gregorian.java:67)
at java.util.GregorianCalendar.<init>(GregorianCalendar.java:575)
at java.util.Calendar.createCalendar(Calendar.java:1012)
at java.util.Calendar.getInstance(Calendar.java:964)
at org.jfree.chart.axis.DateTickUnit.addToDate(DateTickUnit.java:238)
at org.jfree.chart.axis.DateAxis.refreshTicksHorizontal(DateAxis.java:1685)
at org.jfree.chart.axis.DateAxis.refreshTicks(DateAxis.java:1556)
at org.jfree.chart.axis.ValueAxis.reserveSpace(ValueAxis.java:809)
at org.jfree.chart.plot.XYPlot.calculateDomainAxisSpace(XYPlot.java:3119)
at org.jfree.chart.plot.XYPlot.calculateAxisSpace(XYPlot.java:3077)
at org.jfree.chart.plot.XYPlot.draw(XYPlot.java:3220)
at org.jfree.chart.JFreeChart.draw(JFreeChart.java:1237)
at org.jfree.chart.ChartPanel.paintComponent(ChartPanel.java:1677)
at javax.swing.JComponent.paint(JComponent.java:1029)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1491)
at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1422)
at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:294)
at javax.swing.RepaintManager.paint(RepaintManager.java:1225)
at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:786)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:714)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:694)
at javax.swing.RepaintManager.access$700(RepaintManager.java:41)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1636)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:646)
at java.awt.EventQueue.access$000(EventQueue.java:84)
at java.awt.EventQueue$1.run(EventQueue.java:607)
at java.awt.EventQueue$1.run(EventQueue.java:605)
at java.security.AccessController.doPrivileged(Native Method) 
```

我的申请如下：

我有一个 JFrame，在将 Chart 传递给它之后，我直接在其上添加 ChartPanel。

```
chart = ChartFactory.createTimeSeriesChart("Peak monitor", , "Time: Zoom in", "# of Requests Logged", createDataset(from,to), true, false, false);

            chartpanel = new ChartPanel(chart);

            FramePanel.this.add(cp);

            validate(); 
```

这里*createDataset(from, to)*是一个方法

```
 private TimeSeriesCollection createDataset(Date from, Date to) {
    dataset.addSeries(controller.getStuff(from, to));
    return dataset;
} 
```

*getStuff*在 SwingWorker 线程中调用（DIBkgd 方法）

```
 public TimeSeries getStuff(Date from, Date to) {
    s1 = new TimeSeries("Log Requests");

    final Date from1 = from;
    final Date to1 = to;

    progressDialog.setVisible(true);

    sw = new SwingWorker<Void, Integer>() {

        @Override
        protected Void doInBackground() throws Exception {

            if (db.getCon() == null) {
                db.connect();
            }
            Arrlst2.clear();
            Arrlst2= db.getDataDB(from1, to1);

            for (Qryobjects x : Arrlst2) {                  
              s1.add(new Minute(x.getMinute(), x.getHour(), x.getDay(), x.getMonth(), x.getYear()), x.getCount());
            }

            System.out.println("finished fetching data");
            return null;
        }

        @Override
        protected void done() {
            progressDialog.setVisible(false);
        }
    };
    sw.execute();
    return s1;

} 
```

在我的 Database 类中执行*getDataDB*：

```
 public List<Qryobjects> getDataDB(Date from, Date to) {

    PreparedStatement select;
    ResultSet rs;

    String selectSql = "Select Sum(Cnt) Cid, Hr, Min, Dat from (Select count(H.Request_Id) Cnt , To_Char(H.Timestamp,'HH24') HR, To_Char(H.Timestamp,'mm') MIN, To_Char(H.Timestamp,'MM-dd-yyyy') DAT From Status_History H Where H.Timestamp Between ? And ? Group By  H.Request_Id,  H.Timestamp Order By H.Timestamp Asc) Group By Hr, Min, Dat order by Dat asc";

    try {
        select = con.prepareStatement(selectSql);

        select.setDate(1, from);
        select.setDate(2, to);

        rs = select.executeQuery();

        System.setProperty("true", "true");

        while (rs.next()) {

            int cnt = rs.getInt("cid");

            int hour = Integer.parseInt(rs.getString("Hr"));
            int min = Integer.parseInt(rs.getString("Min"));
            int month = Integer.parseInt(rs.getString("dat").substring(0, 2));
             int day = Integer.parseInt(rs.getString("dat").substring(3, 5));
            int year = Integer.parseInt(rs.getString("dat").substring(6, 10));

             Arrlst1.add(new Qryobjects(cnt, hour, min, day, month,year));

        }
        rs.close();

    } catch (SQLException e) {
        e.printStackTrace();
    }

    return Arrlst1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:45:53.987

作为参考，我分析了两个长时间运行的时间序列[`DTSCTest`](https://stackoverflow.com/a/5048863/230513)和[`MemoryUsageDemo`](http://www.jfree.org/jfreechart/samples.html). 为了夸大规模，我使用了一个人为的小堆，如下图所示。在每种情况下，我都看到了周期性垃圾收集返回基线的典型锯齿模式，如下[所示](https://stackoverflow.com/a/5918785/230513)。相比之下，这个病态的[例子](https://stackoverflow.com/a/6310284/230513)显示了不可恢复资源消耗的内存长期上升。

```
$ java -Xms32m -Xmx80m -cp build/classes:dist/lib/* chart.DTSCTest
$ java -Xms32m -Xmx80m -jar jfreechart-1.0.14-demo.jar

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:13:23.207

我解决了我的问题。

我从@TrashGod 那里得到了使用 dispose() 的线索。但它并不直接为我工作。

我将图表面板直接添加到我的主 JFrame 容器中。就我而言，我想一遍又一遍地在同一个 JFrame 容器中创建图表。

我首先尝试清除数据集并在图表面板上调用 removeall()，但没有帮助。

然后我找到的解决方案是创建另一个 JFrame 并将图表面板添加到其中。当我关闭这个 JFrame 时，我再次清除数据集并在图表面板上调用 removeall() 并调用 dispose()。因此，每次我创建一个新图表时，都会创建此 JFrame 及其子组件，并在我退出此 JFrame 时将其完全释放。

因此，当创建图表时，会创建一个新的 JFrame，然后进行处理。

我还应该补充一点，在进行此更改后，我开始在 Java VisualVM 分析器中看到锯齿模式。我还使用了 Jprofiler，当我运行我的程序时，我很震惊地看到创建了超过 100,000 个对象。现在，我看到创建了 9000 个对象，并且它对于 JFree 包保持不变，并且根据我检索到的结果集，我的数据库包中的对象数量增加或减少。

我做的另一件事是让我的 SQL 进行解析并将其转换为数字。我想减少创建的对象数量，并减少我的程序对每个检索到的记录所做的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T15:06:29.980

你的解决方案很棒！:)) 多亏了你，我已经解决了我的堆溢出问题。但是，您的解决方案可能会更好。:)) 在将图形绘制到面板上之前，只需调用方法`panel.RemoveAll();` ，面板上之前的所有内容都会被处理掉。不需要其他 `JFrame` 实例......就我而言，解决方案是：

```
for(...)
{

    panel.RemoveAll();

    drawData(listOfData);

} 
```

祝你今天过得愉快！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T16:44:26.870

在 org.jfree.chart.axis.DateAxis.refreshTicksHorizo​​ntal 方法中，我添加了以下额外行以成功避免 OutOfmemoryError。原因是在某些情况下，变量tickDate没有增加，所以“while (tickDate.before(upperDate))”的循环变成了一个无限循环。

```
protected List refreshTicksHorizontal(Graphics2D g2,
            Rectangle2D dataArea, RectangleEdge edge) {

    List result = new java.util.ArrayList();

    Font tickLabelFont = getTickLabelFont();
    g2.setFont(tickLabelFont);

    if (isAutoTickUnitSelection()) {
        selectAutoTickUnit(g2, dataArea, edge);
    }

    DateTickUnit unit = getTickUnit();
    Date tickDate = calculateLowestVisibleTickValue(unit);
    Date upperDate = getMaximumDate();

    boolean hasRolled = false;
    Date previousTickDate=null;            //added 
    while (tickDate.before(upperDate)) {
        if(previousTickDate!=null && tickDate.getTime()<=previousTickDate.getTime()){  //added 
            tickDate=new Date(tickDate.getTime()+100L); //added 
        }  //added 
        previousTickDate=tickDate; //added 
        //System.out.println("tickDate="+tickDate+" upperDate="+upperDate);**  //add to see infinite loop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-29T16:14:20.317

请尝试从图表中删除工具提示和图例（在构造函数中将它们设为“假”）。它应该减少内存占用

# c++ - opencv highgui 错误

> ID：15299902
> 
> 赞同：0
> 
> 时间：2013-03-08T17:31:28.707
> 
> 标签：c++, opencv

我在我的 ubuntu 电脑中安装了库 opencv，我编写了一个从网络摄像头获取视频的程序，它可以工作。

昨天我安装了用于视频捕获“media_build”的驱动程序以从视频采集器中获取视频，但是相同的程序不起作用，而如果我在 VLC 上打开“video for linux 2”它可以工作。

这是错误：

> libv4l2: error set_fmt 给了我们与 try_fmt 不同的结果！HIGHGUI 错误：libv4l 无法转换为请求的 pixfmt
> HIGHGUI 错误：V4L：设备 /dev/video0：无法查询通道数
> 错误：捕获为 NULL

指令是：

> CvCapture* 捕获 = cvCaptureFromCAM( CV_CAP_ANY );

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:54:42.197

我认为你的程序崩溃了。如果是这样，您可以添加`if(capture!=NULL) {// your normal code here}else{// display some error message}`. 在这种情况下，程序不会崩溃。可能您的视频驱动程序没有提供 openCv 已知的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T02:51:17.513

也许你可以使用这个命令：

```
sudo chmod 666 /dev/video0 
```

# jquery - 在复选框上的 div 元素上加载 jsp

> ID：15299906
> 
> 赞同：0
> 
> 时间：2013-03-08T17:31:31.787
> 
> 标签：jquery, ajax, jsp, checkbox

如果任何复选框=选中如果未选中隐藏 div 元素，我需要在 div 元素上加载 jsp 页面。到目前为止，我已经尝试过这个，但它根本不起作用！帮助！

JS：

```
 $(document).ready(function(){
$.each($("input[type=checkbox]:checked"),function(){
    $("verification").load("/selectionPage");
}); 
```

JSP：

```
<td class="cb" bgcolor='<c:out value="${summary.color}"></c:out>'><input
                        type="checkbox" value="">
                    </td>
                </tr>
            </c:forEach>
    </tbody>
</table>
       </div>
     <div id="verification"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:41:55.477

也请阅读内联评论。

```
$(document).ready(function () {
    $("input[type=checkbox]").click(function () {

        //things you want to do when the checkbox is checked
        //like loading the jsp
        if ($(this).attr('checked') === 'checked') {

            //make sure the selector is correct. # for id, . for class etc.
            //also, /selectionPage or /selectionPage.jsp?
            //Basically, path resolver or hitting JSPs directly?
            $('#verification').load('/selectionPage.jsp', function () {
                console.log('done');
            });
        }

        //things you want to do when the checkbox is unchecked
        //like maybe clearing the div?
        else {
            $('#verification').html('');
        }
    });
} 
```

# java - Log4j2：如何指定要保留的最大副本数？

> ID：15299908
> 
> 赞同：1
> 
> 时间：2013-03-08T17:31:34.360
> 
> 标签：java, logging, configuration, log4j, log4j2

在我的项目中，我需要设置一个 Log4j2 配置来生成一个每天滚动的日志文件。另一个要求是只保留 2 天的日志文件。所以我必须限制要保存在系统中的文件总数。以下是我从研究中得到的，但它只限制每天的文件数量，而不是文件总数。我想知道是否有一种方便的方法来限制要保留的最大日志副本数？

```
<RollingFile name="DailyRollingFile" fileName="logs/audit.log"
append="false" immediateFlush="true" filePattern="logs/audit-%d{yyyy-MM-dd}-%i.log">
    <PatternLayout>
    <pattern>%d %p [%t] - %m%n</pattern>
</PatternLayout>
<Policies>
    <TimeBasedTriggeringPolicy />
</Policies>
<DefaultRolloverStrategy max="2" />
</RollingFile> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-28T20:55:46.933

同时，问题跟踪器中有一个功能请求：[https ://issues.apache.org/jira/browse/LOG4J2-435](https://issues.apache.org/jira/browse/LOG4J2-435)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T05:55:58.210

我可以建议您将此作为功能请求定向到 Apache Logging 邮件列表 ( [https://logging.apache.org/log4j/2.x/mail-lists.html](https://logging.apache.org/log4j/2.x/mail-lists.html) ) 或 Log4j-2.0 问题跟踪器 ( [https: //issues.apache.org/jira/browse/LOG4J2](https://issues.apache.org/jira/browse/LOG4J2)）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T08:32:11.173

文件的最大数量也限制在指定的数量

```
<DefaultRolloverStrategy max="2" /> 
```

在翻转时，将只保留指定数量的文件。旧文件将被翻转。即任何时间点的日志文件总数将是为字段 DefaultRolloverStrategy 指定的最大值。

从 Log4j 2.5 开始，可以配置自定义删除操作。按照此处的详细信息。 [https://logging.apache.org/log4j/2.x/manual/appenders.html#CustomDeleteOnRollover](https://logging.apache.org/log4j/2.x/manual/appenders.html#CustomDeleteOnRollover)

# sql-server-2008-r2 - 修剪 SQL Server 数据库中的值

> ID：15299909
> 
> 赞同：2
> 
> 时间：2013-03-08T17:31:36.590
> 
> 标签：sql-server-2008-r2

我有一个 SQL Server 2008 数据库。此数据库有一个表，其中包含一个名为“名称”的列，其数据未清理。例如，有像 'Hello' 这样的值，其中有不必要的空格。我想从“名称”列中的所有值中删除该空格。我的表如下所示：

```
MyTable
-------
ID (int)
Name varchar(50)
Description nvarchar(128) 
```

如何修剪 Name 列中的值以删除前导和尾随空格？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:32:08.720

使用[`LTRIM`](http://msdn.microsoft.com/en-us/library/ms177827%28v=sql.105%29.aspx)和[`RTRIM`](http://msdn.microsoft.com/en-us/library/ms178660%28v=sql.105%29.aspx)：

```
UPDATE dbo.MyTable SET Name = LTRIM(RTRIM(Name)); 
```

# bash - 为什么我刚设置这个 bash 变量时它是空的？

> ID：15299912
> 
> 赞同：0
> 
> 时间：2013-03-08T17:31:43.110
> 
> 标签：bash

```
$ sudo sh -c "FOO=bar echo Result:${FOO}"
Result: 
```

为什么不显示存储在 FOO 中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T17:33:07.710

因为 bash`${FOO}`在调用`sudo`. 所以`sh -c`实际看到的是：

```
FOO=bar echo Result: 
```

此外，即使你尝试过

```
FOO=bar echo Result:${FOO} 
```

它仍然不起作用¹。为了做到这一点，你可以这样做：

```
FOO=bar; echo Result:${FOO} 
```

既然已经解决了，让我们回到`sh -c`. 为防止 bash 解释您提供给的字符串`sh -c`，只需将其放入`'`而不是`"`：

```
sudo sh -c 'FOO=bar; echo Result:${FOO}' 
```

* * *

¹ [原因请参阅评论。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:11:55.213

这不起作用，因为变量`FOO`是为以下命令设置的`echo`，但是`${FOO}`被封闭的外壳替换。

如果你想让它工作，你必须`FOO`为封闭的shell设置变量并将`echo ...`单引号括起来

```
sudo FOO=bar sh -c 'echo Result:${FOO}' 
```

# string - 是否可以将字符串与一系列数字连接起来？

> ID：15299914
> 
> 赞同：2
> 
> 时间：2013-03-08T17:31:51.940
> 
> 标签：string, matlab, concatenation, matlab-uitable

我有一个字符串（例如'STA'），我想制作一个单元格数组，它将我的字符串与从 1 到 X 的数字串联起来。

我希望代码在下面执行类似于前循环的操作：

```
for i = 1:Num
    a = [{a}  {strcat('STA',num2str(i))}]
end 
```

我希望最终结果采用 {<1xNum cell>} 的形式

```
a = 'STA1' 'STA2' 'STA3' ... 
```

（我想将此设置为 ColumnFormat 数组中的 uitable）

```
ColumnFormat = {{a},...                 % 1
             'numeric',...              % 2
             'numeric'};                % 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:01:11.693

我不确定是否从 STA1 开始，但这应该会给您一个以 STA 开头的列表（我猜您可以从中删除第一个条目）。

```
N = 5;
[X{1:N+1}] = deal('STA');
a = genvarname(X);
a = a(2:end); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:44:42.403

您可以结合使用**NUM2STR**（将数字转换为字符串）、**CELLSTR**（将字符串转换为元胞数组）、**STRTRIM**（删除多余的空格）和**STRCAT**（与另一个字符串组合）函数。

您需要`(:)`确保数字向量是列。

```
x = 1:Num;
a = strcat( 'STA', strtrim( cellstr( num2str(x(:)) ) ) ); 
```

* * *

作为具有更多维度的矩阵的替代方案，我有这个辅助函数：

```
function c = num2cellstr(xx, varargin)
%Converts matrix of numeric data to cell array of strings

c = cellfun(@(x) num2str(x,varargin{:}), num2cell(xx), 'UniformOutput', false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:47:53.433

尝试这个：

```
N = 10;
a = cell(1,N);
for i = 1:N
    a(i) = {['STA',num2str(i)]};
end 
```

# wpf - WPF：使用哪个集合类

> ID：15299916
> 
> 赞同：1
> 
> 时间：2013-03-08T17:32:02.440
> 
> 标签：wpf, mvvm, binding, observablecollection, bindinglist

在花了一整天尝试不同的建议之后，我回到了第 1 点。我试图将我的视图（XAML 窗口）绑定到我的一个 ViewModel 属性，比如 SalesOrders。ViewModel 反过来与 Model（数据库顶部的 EF 模型）对话。我面临的问题是我应该用来公开我的 SalesOrders 属性的集合类型。

我尝试了以下类型，但没有一个能满足我的所有需求。

1.  `List<T>`
2.  `ObservableCollection<T>`
3.  `BindingList<T>`
4.  `CollectionViewSource`在上述之上

这是我需要我的收藏做的事情：

1.  该视图具有上一个/下一个按钮，因此该集合应提供某种货币管理器。
2.  视图中有一个保存按钮，我需要根据 SalesOrder 集合是否有任何更改来**立即启用/禁用该按钮。**由于`SalesOrder`已经是 EF 类型，它的所有字段都实现了`INotifyPropertyChanged`.

`CollectionViewSource`为我提供导航方法（上一个/下一个），但不监听 PropertyChanged 事件，因此修改视图中的数据不会打开保存按钮。`BindingList`可以监听 PropertyChanged 事件，但不提供导航方法。`ObservableCollection`缺乏这两个功能。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:42:03.623

根据 MSDN 关于 CollectionView[这里](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)：

> 在 WPF 应用程序中，所有集合都有一个关联的默认集合视图。绑定引擎不是直接使用集合，而是始终通过关联的视图访问集合。要获取默认视图，请使用 CollectionViewSource.GetDefaultView 方法。基于 CollectionView 的内部类是仅实现 IEnumerable 的集合的默认视图。ListCollectionView 是实现 IList 的集合的默认视图。BindingListCollectionView 是实现 IBindingListView 或 IBindingList 的集合的默认视图。

这意味着您可以将 BindingList 用于 SalesOrders 并将其绑定到视图中，然后要管理导航，您可以从 ViewModel 访问其自动创建的 CollectionView：

```
myCollectionView = (BindingListCollectionView)CollectionViewSource.GetDefaultView(this.SalesOrders); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:19:50.343

您为什么不使用`ObservableCollection<T>`然后订阅事件来启用或禁用您的保存按钮，如线程[MVVM ObservableCollection Bind TwoWay](https://stackoverflow.com/questions/9224917/mvvm-observablecollection-bind-twoway)`CollectionChanged`的答案中所述。

# symfony - SonataAdminBundle 中不存在函数“is_granted”

> ID：15299919
> 
> 赞同：5
> 
> 时间：2013-03-08T17:32:14.420
> 
> 标签：symfony, symfony-sonata

安装[Symfony2 cmf](http://symfony.com/doc/master/cmf/getting-started/installing-symfony-cmf.html)后，当我尝试查看管理/仪表板时，出现以下错误：

> SonataAdminBundle :: standard_layout.html.twig 第 95 行中不存在函数“is_granted”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T15:02:53.157

我也为此挣扎了很长时间。以下是解决方法：

将 SecurityBundle 添加到`app/AppKernel.php`

```
public function registerBundles()
{
    $bundles = array(
        // ...

        // support for the admin
        new Symfony\Bundle\SecurityBundle\SecurityBundle(),
    );
    // ...
} 
```

`security.yml`在您的文件夹中创建一个`app/config`，例如使用此演示内容：

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main:
            pattern: ^/
            anonymous: ~
            http_basic:

                realm: "Secured Demo Area"
    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

并将其加载到您的`app/config/config.yml`：

```
imports:
    - { resource: security.yml } 
```

这对我有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-16T10:57:16.060

就像对其他可能面临此问题的人的反馈一样：

acme 的解决方案有效。显然，必须按照中所述提供用户

[http://symfony.com/doc/master/cmf/tutorials/creating-cms-using-cmf-and-sonata.html](http://symfony.com/doc/master/cmf/tutorials/creating-cms-using-cmf-and-sonata.html)

# sql-server-2008 - SQL - 确定使用 Active Directory 组身份验证时运行查询的用户

> ID：15299920
> 
> 赞同：0
> 
> 时间：2013-03-08T17:32:15.640
> 
> 标签：sql-server-2008, active-directory

当前使用 Active Directory 组对用户进行身份验证。我想知道的是 A 组是否有 100 个用户。我如何知道哪些用户在当前时间专门登录。据我了解，SQL 将显示组信息而不是确切的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:58:03.257

T-SQL 函数 SUSER_SNAME() 将返回连接到 SQL Server 的用户的**域\登录名。**但这就是您可以开箱即用的“用户信息”的范围。

**编辑：**您可以使用`exec sp_who2`which 返回带有**domain\user**的结果集。

# java - Parse.com Android API 和 Android 对话框

> ID：15299921
> 
> 赞同：0
> 
> 时间：2013-03-08T17:32:17.690
> 
> 标签：java, android, parse-platform

我已将解析方法放在`onCreate`方法中。但我的问题是如何显示 Android Loading... 对话框？

```
Parse.initialize(this, "a", "b");
ParseQuery query = new ParseQuery("Category");
query.findInBackground(new FindCallback() {
    @Override
    public void done(List<ParseObject> catObjects, ParseException arg1) {
        Log.d("Catlength", String.valueOf(catObjects.size()));
        for(int i =0; i<catObjects.size(); i++){
            Log.d("lengthName"+String.valueOf(i), String.valueOf(catObjects.get(i).getInt("Id")));
            Category category = new Category();
            category.Name= catObjects.get(i).getString("CatName");
            category.id= catObjects.get(i).getInt("Id");
            categories.add(category);
        }

        if(categories.size()>0){
            setListAdapter(new CategoryArrayAdapter(CategoryListActivity.this, R.layout.row_category, categories));
        }
        else{
            Toast.makeText(CategoryListActivity.this, "Our servers are busy. Hit refresh..", 3000).show();
        }

    }
}); 
```

上面的代码一切正常，但我不知道如何显示对话框。

我`AsycTask`也无法使用 parse sdk 在后台调用它自己的线程，在`findInBackground`执行完成之前，`doInBackground`完成 Asyc 线程。这就是我在主线程中调用它的原因。

结果，我的 ArrayList 中总是没有结果。

有人可以启发我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:20:43.423

关于进度对话框，我处于同样的情况，尝试了一些技巧，最后只是声明了一个 ProgressDialog 类成员：

```
protected ProgressDialog proDialog; 
```

然后创建了两个方法：

```
protected void startLoading() {
    proDialog = new ProgressDialog(this);
    proDialog.setMessage("loading...");
    proDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    proDialog.setCancelable(false);
    proDialog.show();
}

protected void stopLoading() {
    proDialog.dismiss();
    proDialog = null;
} 
```

并在后台操作之前调用 startLoading() 并在我得到结果后在后台操作内部调用 stopLoading() 。

```
startLoading();
    ParseUser.logInInBackground(userName.getText().toString(), hashedPass, new LogInCallback() {
        public void done(ParseUser user, ParseException e) {
            if (user != null) {
                Log.d(Constants.TAG, "User Loged in.");
                ParseManager.sCurrentUser = user;
                stopLoading();
                finish();
            } else {
                stopLoading();
                invalidCreds();
            }
        }
    }); 
```

如果你想使用 AsyncTask 不要调用 findInBackground()，你可以使用 find()。[您可以在 api https://parse.com/docs/android/api/com/parse/ParseQuery.html#find()](https://parse.com/docs/android/api/com/parse/ParseQuery.html#find%28%29)中查看它

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:59:51.797

通过将 ProgressCallback 传递给 saveInBackground 和 getDataInBackground，使用 ParseFile 很容易获得上传和下载的进度。例如：

```
byte[] data = "Working at Parse is great!".getBytes();
ParseFile file = new ParseFile("resume.txt", data);

file.saveInBackground(new SaveCallback() {
  public void done(ParseException e) {
    // Handle success or failure here ...
  }
}, new ProgressCallback() {
  public void done(Integer percentDone) {
    // Update your progress spinner here. percentDone will be between 0 and 100.
  }
}); 
```

# java - JAVA - 访问不同子文件夹中的文件

> ID：15299924
> 
> 赞同：1
> 
> 时间：2013-03-08T17:32:30.690
> 
> 标签：java, file, directory, datagram

我正在对文件传输进行编程，但遇到了麻烦。在我当前的位置，我创建了一个名为“服务器文件夹”的文件夹，我将在其中包含客户端可以传输的文件（我将以相同的名称传输到工作区目录），但每次我尝试访问它时，它失败。

```
FILE_SERVER_PATH = "./ServerFolder/";

File fileToRead = new File(FILE_SERVER_PATH + fileName);
        fileToRead = fileToRead.getParentFile();

        if(fileToRead.exists()){
            FileInputStream readingBuffer = new FileInputStream(fileToRead); 
```

fileName 是接收到的 throw 数据报，并且名称是正确的。它总是在条件下失败 --> fileToRead.exists()

谁能给我一个小费？

谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:47:08.330

尝试使用文件夹路径作为绝对路径。

将有所帮助和工作......当前目录只有在您知道执行时所在的目录时才有效。

# c++ - 基本套接字服务器

> ID：15299926
> 
> 赞同：1
> 
> 时间：2013-03-08T17:32:35.527
> 
> 标签：c++, sockets, actionscript, server-side

所以我要做的是了解套接字是如何工作的，以及如何制作一个简单的服务器来在服务器和客户端应用程序之间进行通信

我尝试使用 AS3 和名为 Red Tamarin 的项目来完成此操作（在控制台上运行 AS3 代码，但目前并不重要）

我设法创建了一个基本服务器，它的功能基本上是这样的：

*   创建一个套接字并在其上激活这些：listen()、accept()。当它接受时，它还将从 accept() 接收到的新套接字添加到连接数组中。
*   一个根据连接数组的长度运行并在每个套接字上运行 receive() 的 for 循环（我没有在这些连接上调用 listen() / accept()，应该吗？）

我的 actionscript 3 应用程序成功连接到服务器，然后出于测试目的，我决定从客户端不间断地向服务器写入（），只是为了确保服务器确实在获取数据，这样我才能真正走得更远添加更多功能..

但是服务器似乎根本没有得到任何进一步的信息..它似乎只响应连接/断开连接，但并没有真正在它们之间监听任何其他信息..

我知道显示我的代码会更好，但是现在我想知道我是否正确地处理了这个问题，我在互联网上读到了它，看起来我是这样，但我来这里只是为了确保..

提前致谢！

编辑：我被要求提供我的一些代码，至少是最重要的部分

```
private var _connections:Array;
private var _socket:Socket;
private var _server:Client;
private var _running:Boolean;
private var _port:uint;
private var _address:String;

public function Server(address:String, port:uint)
{
    _connections = [];
    _address = address;
    _port = port;
    _running = false;
    _socket = new Socket();

}
public function start():void {
    _socket.bind(_port, _address);
    _socket.listen(128);
    _running = true;
    _server = new Client(_socket);
    _addClient(_server);
    _start();
}
private function _start():void {
    while (_running) {
        _loop();
    }
}
private function _addClient(client:Client):void {
    _connections.push(client);
}
public function _loop():void 
{
    var i:uint;
    var selected:Client;
    var newconn:Socket;
    for (i = 0; i < _connections.length; i++ ) {
        selected = _connections[i];
        if (selected.hasData()) {
            if (selected == _server) {

                //accept a new client connection
                newconn = _socket.accept();
                if (!newconn.valid){
                //Invalid.
                } 
                else {
                    //Add a new client
                    _addClient(new Client(newconn));
                }
            } else {
                //Read data from clients
                selected._socket.receive();
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:31:46.503

只是为了回答您的 listen()/accept() 问题，您只需要在服务器初始设置时调用一次 listen()。之后，您需要为要建立的每个新客户端连接执行 accept()（因为 accept() 将返回处理新客户端的套接字文件描述符）。

在客户端被接受（）之后，您将使用客户端的套接字文件描述符来接收（）或发送（）任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T17:40:22.137

看看这个例子 [https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/socketpolicyd/src/spitfire/SocketPolicyServer.as](https://code.google.com/p/spitfire-and-firedrop/source/browse/trunk/socketpolicyd/src/spitfire/SocketPolicyServer.as)

从我在代码中看到的主循环中，您只检查是否可以读取当前套接字，还需要检查是否可以写入当前套接字

还要注意每个人都有一个套接字句柄，服务器和客户端

我的猜测是您对包装 Socket 对象的 Server 和 Client 类感到有些困惑，请尝试仅使用 Socket 对象（如上例所示），当您了解这一点时，您可以走得更远，抽象/结构更大班级

# java - 我应该为每个公共方法编写单元测试吗？

> ID：15299933
> 
> 赞同：3
> 
> 时间：2013-03-08T17:33:05.303
> 
> 标签：java, unit-testing, language-agnostic, junit

我应该为每个公共方法编写单元测试吗？例如，我有一个 CRUD 服务，所以我有 `create, read, update, delete`方法。`delete`但是，当我向or方法写入测试时`update`，我会隐式测试`read`和`create`方法（例如，要`update`首先测试方法，我需要创建一个实体（`create`），然后检索它（`read`），然后`update`再次检索它以确保它已更改）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:36:12.843

`get`我会为and编写测试`create`，是的：

*   它可以更轻松地将您*有意*测试的行为与您*偶然*测试的行为区分开来
*   它可以更轻松地测试其他方法未涵盖的故障条件和其他场景
*   这意味着如果您将`delete`/的实现更改`update`为*不*使用`get`/ `create`，您仍在测试`get`/`create`

理想情况下，我会尝试（不要太挂断它）设置测试并在“较低”级别检查数据 - 例如执行直接内存数据库访问。这样你就真的在测试“如果我创建一个实体，数据库中的数据看起来像 {this}”（在获取时也是如此）。*就黑盒测试*而言，仅仅能够创建然后再次获得相同的结果就可以了，但我通常认为单元测试更像是白盒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:39:15.097

**我应该为每个公共方法编写单元测试吗？**是的

为每个公共方法编写一个测试用例是最好的事情。要测试**删除**操作，您应该先调用**创建测试**，然后调用**删除测试**方法。这样您的删除测试方法将是独立的，您可以测试所有可能的场景。

# php - php中的数组问题

> ID：15299937
> 
> 赞同：1
> 
> 时间：2013-03-08T17:33:13.837
> 
> 标签：php, arrays

我有一个像

```
Array
(
    [1] => Array
        (
            [A] => Name
            [B] => Email
            [C] => Phone
            [D] => Bank Name
            [E] => Cheque Number
            [F] => Cheque Date
            [G] => Amount
            [H] => Due On
        )

    [2] => Array
        (
            [A] => Sri
            [B] => srimanta123@gmail.com
            [C] => 312313131
            [D] => SBI
            [E] => 32324234
            [F] => 9/19/13 19:00
            [G] => 121
            [H] => 7/12/13 15:00
        )

) 
```

现在，我想将上面的数组转换为

```
Array
(

    [1] => Array
        (
            [A] => Sri
            [B] => srimanta123@gmail.com
            [C] => 312313131
            [D] => SBI
            [E] => 32324234
            [F] => 9/19/13 19:00
            [G] => 121
            [H] => 7/12/13 15:00
        )

) 
```

通过使用 php。

我正在尝试使用`array_shift()`. 但是通过array_shift，我没有得到确切的输出。通过使用它，我得到以下输出：

```
 Array
    (
        [A] => Name
        [B] => Email
        [C] => Phone
        [D] => Bank Name
        [E] => Cheque Number
        [F] => Cheque Date
        [G] => Amount
        [H] => Due On
    ) 
```

请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:40:56.890

试试这个：

```
$newArray = array_combine(array_values($array[0]), array_values($array[1])); 
```

如前所述，很难用格式来判断。如果您在格式化时遇到问题，请尝试`<pre>`在页面顶部添加`print_r`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:55:24.067

[`array_shift`](http://php.net/manual/en/function.array-shift.php)可以解决问题，但是您必须意识到它[`array_shift`](http://php.net/manual/en/function.array-shift.php)会修改原始数组并返回移位的元素。

所以结果将在您的原始数组中，而不是在返回值中。

顺便说一句，我个人会确保我在关联数组中获取数据，以便您的第一个子数组的值是第二个子数组中值的键。

# c# - 这些设置来自哪里？

> ID：15299941
> 
> 赞同：0
> 
> 时间：2013-03-08T17:33:27.817
> 
> 标签：c#, winforms, application-settings

我必须非常简单的代码：

```
 private void frmMain_Load(object sender, EventArgs e)
    {
        string[] EmployeeNames = Settings.Default.Employee_Names.Split(new char[] {';'}, StringSplitOptions.RemoveEmptyEntries);
        employee_NameComboBox.Items.AddRange(EmployeeNames);

    } 
```

和

```
 private void frmMain_FormClosing(object sender, FormClosingEventArgs e)
    {
        string Employee_Names = string.Empty;
        foreach (string Name in employee_NameComboBox.Items)
        {
            Employee_Names += Name + ";";
        }
        if (Employee_Names.Length > 1)
        {
            Settings.Default.Employee_Names = Employee_Names.Substring(0, Employee_Names.Length - 1);
            Settings.Default.Save();
        }

    } 
```

因此，为了测试我的代码，我在 VS Designer 中的 Settings.Settings 中添加了值“Foo;Bar”，但是当我运行代码时，什么都没有出现。所以我添加了这段代码：

```
 private void AddName()
    {
        if (!employee_NameComboBox.Items.Contains(employee_NameComboBox.Text))
        {
            employee_NameComboBox.Items.Add(employee_NameComboBox.Text);
        }
    } 
```

然后我在 employee_NameComboBox 的 Leave 事件中调用它：

```
 private void employee_NameComboBox_Leave(object sender, EventArgs e)
    {
        AddName();
    } 
```

为了测试这一点，我输入 employee_NameComboBox 并输入“Employee1”并离开 CB，然后再次输入并输入“Employee2”并立即离开，当我单击下拉列表时，我在 Items Collection 中有这些字符串。伟大的！

但是，当我关闭应用程序然后转到解决方案资源管理器中属性下的 settings.settings 时，值“Foo;Bar”仍然存在。

继续再次开始调试，当我单击下拉菜单时，值为“Employee1”和“Employee2”。反过来，我在 Windows 资源管理器中搜索解决方案目录以尝试找到新的设置文件，但我根本找不到任何带有“Employee1”或“Employee2”的文件，我在任何文件中看到的都是“Foo;Bar”。

怎么会这样？我正在保存到某个地方，但是在哪里！

另外为什么调试器不使用 settings.settings 或 App.Config 文件中的值？！？！？！

注意：我还尝试从 Visual Studios 中查找并搜索值 Employee1 的整个解决方案，但无济于事。

我的最终结果是我想发送一个带有可编辑组合框的应用程序，无需重新编译即可保存和编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:51:32.150

在运行时更改此类设置时，值将存储在以下目录中：

```
 C:\Documents and Settings\<username>\Local Settings\Application Data 
```

这就是应用程序下次去寻找它们的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:49:09.233

这些设置在每个构建上都会被您在 VS 中设置的任何内容覆盖。如果您想使用以前编译的设置（或者一旦部署到客户端计算机，更新后的以前版本），您必须使用 Settings.Upgrade()。这应该在每个运行时调用一次，最容易在构造函数中调用。请参阅其他 StackOverflow 问题。[C# .NET 应用程序设置和升级](https://stackoverflow.com/questions/3429558/c-sharp-net-application-settings-and-upgrading)

# java - 使用 SimpleModule 的 Jackson MixInAnnotation 不起作用

> ID：15299944
> 
> 赞同：2
> 
> 时间：2013-03-08T17:33:41.530
> 
> 标签：java, annotations, jackson, mixins

我正在使用 SimpleModule 将 MixIn 注册为序列化和反序列化。我无法使它工作。类如下所示。当我打印序列化的字符串时，我看到打印的大小和属性没有像我在 mixin 中指定的那样命名。它正在打印`{"w":5,"h":10,"size":50}`。因此，使用序列化程序和反序列化配置进行混合注册是不成功的。我究竟做错了什么。

混音类：

```
import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.annotate.JsonProperty;

    abstract class MixIn {
        MixIn(@JsonProperty("width") int w, @JsonProperty("height") int h) {
        }

        @JsonProperty("width")
        abstract int getW();

        @JsonProperty("height")
        abstract int getH();

        @JsonIgnore
        abstract int getSize();

    } 
```

矩形类：

```
 public final class Rectangle {
    final private int w, h;

    public Rectangle(int w, int h) {
        this.w = w;
        this.h = h;
    }

    public int getW() {
        return w;
    }

    public int getH() {
        return h;
    }

    public int getSize() {
        return w * h;
    }
} 
```

注册混音：

```
import org.codehaus.jackson.Version;
import org.codehaus.jackson.map.module.SimpleModule;

public class MyModule extends SimpleModule {
    public MyModule() {
        super("ModuleName", new Version(0, 0, 1, null));
    }

    @Override
    public void setupModule(SetupContext context) {
        context.setMixInAnnotations(Rectangle.class, MixIn.class);

        // and other set up, if any
    }
} 
```

测试类：

```
import java.io.IOException;

import org.codehaus.jackson.map.ObjectMapper;
import org.junit.Test;

public class DeserializationTest {

    @Test
    public void test() throws IOException {

        ObjectMapper objectMapper = new ObjectMapper();

        // objectMapper.getSerializationConfig().addMixInAnnotations(Rectangle.class, MixIn.class);
        // objectMapper.getDeserializationConfig().addMixInAnnotations(Rectangle.class, MixIn.class);

        String str = objectMapper.writeValueAsString(new Rectangle(5, 10));
        System.out.println(str);
        Rectangle r = objectMapper.readValue(str, Rectangle.class);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:26:14.817

请改用此方法：

```
ObjectMapper mapper = new ObjectMapper();
mapper.addMixInAnnotations(Rectangle.class, Mixin.class); 
```

[我在这里](https://stackoverflow.com/questions/15255427/custom-jackson-object-mapper/15297782#15297782)给出了类似的答案，提问者在评论中说模块示例（来自[这里](http://wiki.fasterxml.com/JacksonMixInAnnotations)）也不适用于他。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T17:37:22.533

我没有看到您在哪里注册了您的模块`MyModule`？除非你告诉它有一个模块可以使用，否则 Jackson 不会拿起它。您是否尝试过这样做：

`objectMapper.registerModule(new MyModule());`

在您的测试中（在您实例化 ObjectMapper 之后）？定义混入的模块对我来说效果很好。

当然，如果你只是注册几个 Mix-In 而没有做其他配置，使用该`addMixInAnnotations()`方法会容易得多。

# c# - 使用 Dapper dot net 映射域实体的私有属性

> ID：15299946
> 
> 赞同：10
> 
> 时间：2013-03-08T17:33:44.133
> 
> 标签：c#, orm, domain-driven-design, dapper, fluent-nhibernate-mapping

在我的大多数项目中，我使用 nHibernate + Fluent 映射，最近我开始使用 Dapper 看看是否可以将读取操作移至它。

我遵循 DDD 方法，因此我的域实体没有任何公共设置器。例如：

```
public class User
{
    private int _id;
    private string _name;
    private IList<Car> _carList;

    protected User(){} // Fluent Mapping

    public User(string id, string name)
    {
        // validation 
        // ...
        _id = id;
        _name = name;
    }

    public int Id{ get {return _id;} }
    public string Name { get {return _name;} }
    public IList<Car> CarList { get {return _carList;}}         
}

public class Car
{
    private int _id;
    private string _brand;

    protected Car(){} // Fluent Mapping

    public Car(string id, string brand)
    {
        // validation 
        // ...
        _id = id;
        _brand= brand;
    }

    public int Id{ get {return _id;} }
    public string Brand { get {return _brand;} }
} 
```

使用 Fluent nHibernate，我可以显示用于映射的成员：

```
Id(Reveal.Member<User>("_id")).Column("id");
Map(Reveal.Member<User>("_name")).Column("name"); 
```

**有没有办法用 Dapper 映射我的域实体？如果是这样，怎么做？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T22:08:42.140

一种选择是创建一组单独的持久性类来使用 Dapper；例如：用户记录和汽车记录。记录类将匹配数据库表并将被封装在持久性模块中。Dapper 查询将针对此类运行，然后您可以拥有一个单独的持久性工厂，它将组装域实体并将它们返回给客户端。

小例子：

```
 var carRecord = DbConnection.Query<CarRecord>("select * from cars where id = @id", new {id = 1});
        var carEntity = CarFactory.Build(carRecord); 
```

这创造了一个很好的分离并提供了灵活性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-04-11T21:13:05.163

对于具有私有设置器的**原始类型**`Dapper`属性，只要它们的名称与您从数据库/查询中获得的名称匹配，就可以自动映射它们。

假设您的`User`课程是*聚合根*

```
public class User : AggregateRoot
{
    public int Id { get; private set; }
    public string Name { get; private set; }

    ...
} 
```

并且您有`GetById`来自存储库的方法来重建*用户*

```
public class UserRepository : Repository<User>, IUserRepository
{
    private UserRepository(IDbConnection dbConnection) : base(dbConnection) {}

    ...

    public User GetById(int id)
    {
        const string sql = @"
            SELECT *
            FROM [User]
            WHERE ID = @userId;
        ";

        return base.DbConnection.QuerySingleOrDefault<User>(
            sql: sql,
            param: new { userId = id }
        );
    }
} 
```

只要*sql*返回**Id**和**Name**列，它们就会自动映射到您的*User*类匹配属性，即使它们具有私有 setter。又好又干净！

### 人际关系问题

当您需要加载一对多的对象时，一切都会变得棘手。

假设现在*User类有一个属于**User*的只读汽车列表，以及一些可用于添加/删除汽车的方法：

```
public class User : AggregateRoot
{
    public int Id { get; private set; }
    public string Name { get; private set; }

    private readonly IList<Car> _cars = new List<Car>();
    public IEnumerable<Car> Cars => _cars;

    public void PurchaseCar(Car car)
    {
        _cars.Add(car);

        AddEvent(new CarPurchasedByUser { ... });
    }

    public void SellCar(Car car)
    {
        _cars.Remove(car);

        AddEvent(new CarSoldByUser { ... });
    }
}

public class Car : Entity
{
    public int Id { get; private set; }
    public string Brand { get; private set; }
} 
```

现在在构造*User*类时如何加载汽车列表？

有些人建议只运行多个查询，然后在构造用户后通过调用`PurchaseCar`and`SellCar`方法（或类中可用的任何方法）来添加/删除汽车来构造汽车列表：

```
public User GetById(int id)
{
    const string sql = @"
        SELECT *
        FROM [User]
        WHERE ID = @userId;

        SELECT *
        FROM [Car]
        WHERE UserID = @userId;
    ";

    using (var multi = base.DbConnection.QueryMultiple(sql, new { userId = id })
    {
        var user = multi.Read<User>()
            .FirstOrDefault();

        if (user != null)
        {
            var cars = multi.Read<Car>();

            foreach (var car in cars)
            {
                user.PurchaseCar(car);
            }
        }

        return user;
    }
} 
```

但是，如果您正在练习，您真的**不能**`Domain-Driven Design`这样做，因为这些方法通常会触发其他事件，这些事件可能会被其他人订阅以触发其他命令。您只是试图初始化您的*User*对象。

### 用反射解决它

唯一对我有用的是使用`System.Reflection`！

```
public User GetById(int id)
{
    const string sql = @"
        SELECT *
        FROM [User]
        WHERE ID = @userId;

        SELECT *
        FROM [Car]
        WHERE UserID = @userId;
    ";

    using (var multi = base.DbConnection.QueryMultiple(sql, new { userId = id })
    {
        var user = multi.Read<User>()
            .FirstOrDefault();

        if (user != null)
        {
            var cars = multi.Read<Car>();

            // Load user car list using Reflection
            var privateCarListField = user.GetType()
                .GetField("_cars", BindingFlags.NonPublic | BindingFlags.Instance);

            privateCarListField.SetValue(car, cars);
        }

        return user;
    }
} 
```

# ruby-on-rails - 如何批量更新一组用户

> ID：15299954
> 
> 赞同：0
> 
> 时间：2013-03-08T17:34:10.193
> 
> 标签：ruby-on-rails, activerecord

如何使一组用户处于非活动状态

```
params[:user_ids] = [1,5, 6, 9]
User.update_all({:status => 'Inactive'}, {:id => params[:user_ids]}) 
```

这会将上述 4 个用户或所有用户的状态设置为非活动状态。我不确定我是否正确使用它，我的目的是更新上述 4 个用户的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:43:28.907

尝试这个：

```
User.where(:id => params[:user_ids]).update_all(:status => 'Inactive') if params[:user_ids].present? 
```

或者

```
User.where('id IN (?)', params[:user_ids]).update_all(:status => 'Inactive') if params[:user_ids].present? 
```

# c# - 无法取消选中服务器控制的复选框

> ID：15299956
> 
> 赞同：1
> 
> 时间：2013-03-08T17:34:11.143
> 
> 标签：c#, asp.net

所以我有一些由服务器创建的复选框。其中一些被检查，而另一些则没有。

我可以选中和取消选中（用鼠标）创建的所有我想要的未选中的复选框，但如果它是选中的，我不能单击它来取消选中它。

生成文本框的代码：

```
System.Web.UI.WebControls.CheckBox chk = new System.Web.UI.WebControls.CheckBox();
chk.ID = colName; 
chk.AutoPostBack = false;
if (val != null && val != "")
{
    chk.Checked = true;
}
ChecklistPanel.Controls.Add(chk); 
```

不过，这无关紧要，因为即使我在 .aspx 文件中添加了控件并设置了 checked="true"，它们的行为仍然相同。

如果有帮助，以下是 c# 决定呈现控件的方式：

```
<div id="uniform-MainContent_EmpMain_dv_access_to" class="checker">
    <span class="checked">
        <input id="MainContent_EmpMain_dv_access_to" class="checked" 
            type="checkbox" checked="checked" name="ctl00$ctl00$MainContent$EmpMain$dv_access_to" style="opacity: 0;">
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:51:41.263

我认为唯一的问题可能是您的复选框的 ID。
您创建的每个复选框都应该有唯一的 id。
您不能有多个具有相同 ID 的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:13:19.990

去掉 style="opacity: 0; 再试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T22:58:38.907

好吧，我猜有一些我不知道的隐藏的javascript，并且修复了它。

# javascript - Dreamweaver CS5.5 | 滑块 Div 隐藏 50%

> ID：15299959
> 
> 赞同：0
> 
> 时间：2013-03-08T17:34:30.597
> 
> 标签：javascript, jquery, slider, dreamweaver

我正在尝试让 Dreamweaver CS5.5 Mobile JQuery Pages 的内置滑块在滑块的值达到一个数字（在我的情况下为数字 50）或更大（50+）后工作。

这是我到目前为止的代码，我知道它并不完美，因为我对 JQuery 和 JavaScript 很陌生。

```
<body>
<div data-role="page" id="page4">
  <div data-role="fieldcontain">
    <label for="slider">Value:</label>
    <input type="range" name="slider" id="slider" value="0" min="0" max="100" />
  <div class="n" id="2">asdf</div>
  </div>

</div>
<script type="text/javascript">
    var val = $("#slider").slider("value");
    var box = $("#2")
    $(document).ready(function(){
        if(val > 50){
            $(2).hide()
                }
        });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:36:31.963

ID 不应以数字开头，而应以字母**az AZ开头**

由于@Archer 指向的选择器是字符串并放在引号中。

```
$('#idValue') 
```

# c# - 您可以从数据库或嵌入式资源中加载 aspx 文件吗？

> ID：15299965
> 
> 赞同：2
> 
> 时间：2013-03-08T17:34:43.360
> 
> 标签：c#, asp.net, webforms, reusability

我正在尝试发布可以被基本项目框架覆盖的页面，除了在 webforms 中删除路由引擎并编写处理程序之外，有没有办法做到这一点？

我正在使用最新版本的框架。我知道 MVC 可能是最常用的答案。我还不能使用 mvc。因此，在我建议在 mvc 中重写大量站点之前，我需要尝试将其放入 Webforms 中。

本质上，我想要 MvcContrib 中的 PortableAreas 之类的东西，用于 web 表单。

# c++ - 无法在 qt creator 中编译 QtSerialPort

> ID：15299966
> 
> 赞同：3
> 
> 时间：2013-03-08T17:34:45.107
> 
> 标签：c++, qt, qt5, qtserialport

我已经从 git 下载了 qtserialport 文件并尝试在 qt-creator 中编译它。起初我尝试了“构建”选项，但也尝试了“运行 qmake”。

两者都给我相同的结果

> :-1: 错误：运行失败：C:\Qt\Qt5.0.1\5.0.1\msvc2010\bin\syncqt.bat -module QtSerialPort -mkspecsdir C:\Qt\Qt5.0.1\5.0.1\msvc2010/ mkspecs -outdir C:/qtserialport-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Debug C:/qt-qtserialport

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T08:16:15.933

这应该在今天没有任何问题。我们已经修复了 QtSerialPort 构建系统中所有与窗口和 qmake 文件相关的问题。

请使用更高版本重试。

# sql - 就像带有通配符百分比的正确值

> ID：15299967
> 
> 赞同：1
> 
> 时间：2013-03-08T17:34:53.337
> 
> 标签：sql, sql-server, sql-like

我需要搜索国家/地区 ID，但遇到了一个问题，例如，让我们以国家“玻利维亚”为例。

Country 表有一个“CountryName”和“Alternative Names”

以“玻利维亚”为例。

```
IdCountry  Name                             Code  AlternateNames
---------- -------------------------------- ----- ---------------------------
29         Bolivia, Plurinational State Of  BO    Bolivia, Bolivien, Bolivie 
```

这是我创建的查询：

```
SELECT cou.CountryID 
FROM Doppler2011.dbo.Country cou 
WHERE (cou.AlternateNames IS NOT NULL AND 'Bolivia' like '%'+cou.AlternateNames+'%') 
        OR 'Bolivia' like cou.Name 
```

如您所见，我需要`cou.AlternateNames`在 like 的右侧将国家/地区的名称与一些替代名称相匹配，对于名称与 相同的国家/地区`cou.Name`，查询有效，但问题在于那些必须与 AlternateNames 匹配

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:39:30.667

你应该有像这样的另一个术语的通配符

```
SELECT cou.CountryID 
        FROM Doppler2011.dbo.Country cou 
        WHERE cou.AlternateName like '%Bolivia%' OR cou.Name like 'Bolivia' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:12:18.037

根据您的实际结构，这里有一些想法。

如果`AlternateName`在一个列值上存储为逗号分隔的列表，并且`Name`始终是列表的第一个值，`AlternateName`那么您可以使用[Ateski 的答案](https://stackoverflow.com/a/15300037/251174)

如果它不是列表中的第一项，那么您需要遵循@AaronBertrand 在他的评论中的建议：

```
SELECT cou.CountryID 
    FROM Doppler2011.dbo.Country cou 
    WHERE ',' + cou.AlternateName + ',' LIKE '%,Bolivia,%' 
      OR cou.Name ='Bolivia'; 
```

最后，如果你可以重新设计你的结构，以便你有一个可能的国家名称列表，你可以想出这样的东西：

[http://sqlfiddle.com/#!3/6d3c8/1](http://sqlfiddle.com/#!3/6d3c8/1)

只是另一种观点。Ateski 的解决方案是完全有效且良好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T17:42:15.327

你的where子句基本上是倒退的。你通常会说：

```
COLUMN_NAME like '%string_to_match%' 
```

# domain-driven-design - DDD - 如何实现工厂

> ID：15299970
> 
> 赞同：8
> 
> 时间：2013-03-08T17:34:57.923
> 
> 标签：domain-driven-design, factories

我想知道如何在领域驱动设计中实现工厂。（例子）

工厂的接口和实现应该放在哪里？我是否需要为工厂创建的域对象创建接口？我是否需要为存储库、服务等创建工厂？

我正在使用依赖注入容器如何将它们与工厂放在一起？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T17:45:01.627

工厂应该是简单的类，通常是静态的。它们也可以作为它们创建的实体或值对象的静态方法来实现。工厂应该直接创建域对象并且只创建域对象。此外，工厂不应与依赖注入绑定，因为域对象不应将依赖注入其中。

域对象不应该实现接口——这是一个不必要的抽象。

另一方面，服务和存储库实现确实有依赖关系，应该由 DI 容器创建。

# perl - 函数可以告诉它是从哪个模块调用的吗？

> ID：15299971
> 
> 赞同：4
> 
> 时间：2013-03-08T17:34:59.857
> 
> 标签：perl

```
package Bar;
use Foo;

sub bar { fooit "hello from bar"; }

package Foo;

sub fooit {
   # Somehow I want this function to know it was called
   # from the "Bar" module (in this case).
} 
```

优选地，这将在不显式传递包含调用模块名称的参数的情况下完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T17:37:24.463

内置[`caller`](http://search.cpan.org/perldoc?perlfunc#caller)函数可用于获取有关当前调用堆栈的信息。

```
 sub fooit {
     my ($pkg, $file, $line) = caller;
     print STDERR "fooit was called from the $pkg package, $file:$line\n";
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:38:37.430

[`caller`](http://perldoc.perl.org/functions/caller.html)在标量上下文中没有参数将返回调用者的命名空间。

```
my $caller = caller(); 
```

或者

```
print caller()."\n";       # '.' forces scalar context 
```

或者

```
print "".caller(), "\n";   # '.' forces scalar context 
```

[除非您尝试复制Carp](http://search.cpan.org/perldoc?Carp)的潜艇之一的行为，否则您很少需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T10:40:18.277

使用 builtin`caller`应该是最简单直接的方法，但[Devel::Backtrace](http://search.cpan.org/~pepe/Devel-Backtrace-0.12/lib/Devel/Backtrace.pm)也是一个值得一看的 CPAN 模块，它可以通过优雅的界面提供更多详细信息。

```
package Foo;
use Devel::Backtrace;

sub fooit {
    my $backtrace = Devel::Backtrace->new;

    print $backtrace->point(1)->package, "\n\n";
    print $backtrace; 
}

package Bar;

sub bar { 
    Foo::fooit('hello from bar'); 
}

package main;

Bar::bar(); 
```

输出：

```
Bar

Devel::Backtrace::new called from Foo (test.pl:5)
Foo::fooit called from Bar (test.pl:14)
Bar::bar called from main (test.pl:19) 
```

# google-app-engine - 何时从 Datastore 过渡到 NDB？

> ID：15299975
> 
> 赞同：1
> 
> 时间：2013-03-08T17:35:10.363
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, gql

据我所知，最好从 Datastore 迁移到 NDB。我最终会这样做，因为我希望我的网站将是性能密集型的。问题是什么时候。我的项目处于早期阶段。

从 NDB 本身开始会更好吗？NDB 是否也处理 Memcache。所以我不需要明确的 Memcache 层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:59:14.610

NDB 提供了一种自动缓存机制。请参阅[缓存](https://developers.google.com/appengine/docs/python/ndb/cache)：

> NDB 自动缓存它写入或读取的数据（除非应用程序将其配置为不缓存）。从缓存中读取比从数据存储中读取要快。
> 
> 可能自动缓存可以满足您的需求。如果您想了解更多信息或控制缓存行为的某些部分，本页的其余部分提供了更详细的信息。

正如文档所说，默认行为可能会满足您的需求，但如果不是这样，您可以对其进行调整。如果您使用 NDB，则不需要为数据存储添加自己的 memcache 层。

至于何时迁移，可能越早越好。您等待的时间越长，您必须重写的代码就越多，以利用您从 NDB 获得的免费赠品。对于新项目，我建议从 NDB 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:31:06.640

要添加到 Dan 的正确答案，请记住 ndb 和较旧的 db 只是 API，因此您可以无缝地开始切换到 ndb 而不必担心架构更改等。您是关于从数据存储切换到 NDB 的问题，但您没有切换来自数据存储，因为 NDB 仍然使用数据存储。说得通？

# android - Android 和 Openbsd 之间的 AES

> ID：15299980
> 
> 赞同：0
> 
> 时间：2013-03-08T17:35:20.373
> 
> 标签：android, aes, openbsd

我是使用 AES 加密的新手。我需要在 Android 上加密一个字符串并将其发送到 OpenBSD 进行解密。我可以使用 OpenSSl 和 Android 使用此代码在 Openbsd 上加密/解密，但是来自 Android 的加密字符串不等于 OpenBSD 中的解密字符串 谁能帮帮我。

...

```
public class StringCryptor 
{
    private static final String CIPHER_ALGORITHM = "AES";
    private static final String RANDOM_GENERATOR_ALGORITHM = "SHA1PRNG";
    private static final int RANDOM_KEY_SIZE = 128;
    // Private key already generated with generatekey()
    static String PKEY= "15577737BBD910E794A6B3C250678DAF";
    // Convert PKEY to byte[]
    static byte[] secretKey = toByte(PKEY);

    // Encrypts string and encode in Base64
    public static String encrypt( String password, String data ) throws Exception 
    {
         byte[] clear = data.getBytes();
         SecretKeySpec secretKeySpec = new SecretKeySpec(secretKey, CIPHER_ALGORITHM );
         Cipher cipher = Cipher.getInstance( CIPHER_ALGORITHM );
         cipher.init( Cipher.ENCRYPT_MODE, secretKeySpec );
         byte[] encrypted = cipher.doFinal( clear );
         String encryptedString = Base64.encodeToString( encrypted, Base64.DEFAULT );
         return encryptedString;
    }

    // Decrypts string encoded in Base64
    public static String decrypt( String password, String encryptedData ) throws Exception 
    {
         SecretKeySpec secretKeySpec = new SecretKeySpec( secretKey, CIPHER_ALGORITHM );
         Cipher cipher = Cipher.getInstance( CIPHER_ALGORITHM );
         cipher.init( Cipher.DECRYPT_MODE, secretKeySpec );
         byte[] encrypted = Base64.decode( encryptedData, Base64.DEFAULT );
         byte[] decrypted = cipher.doFinal( encrypted );
         return new String( decrypted );
    }

    // Convert String To Hexa
    public static String toHex(byte[] buf) { 
        if (buf == null)  
            return "";    
        StringBuffer result = new StringBuffer(2*buf.length);  
        for (int i = 0; i < buf.length; i++) {
           appendHex(result, buf[i]);       
        }        
       return result.toString();
    }
  // Convert hex To byte
  public static byte[] toByte(String hexString) { 
        int len = hexString.length()/2;      
        byte[] result = new byte[len];        
        for (int i = 0; i < len; i++)               
            result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();   
        return result;
  }

  private final static String HEX = "0123456789ABCDEF";
  private static void appendHex(StringBuffer sb, byte b) {
      sb.append(HEX.charAt((b>>4)&0x0f)).append(HEX.charAt(b&0x0f));
  }

//public static byte[] generateKey( byte[] seed ) throws Exception
    //{
    //KeyGenerator keyGenerator = KeyGenerator.getInstance( CIPHER_ALGORITHM );
        //SecureRandom secureRandom = SecureRandom.getInstance( RANDOM_GENERATOR_ALGORITHM );
        //secureRandom.setSeed( seed );
        //keyGenerator.init( RANDOM_KEY_SIZE, secureRandom );
        //SecretKey secretKey = keyGenerator.generateKey();
        //return secretKey.getEncoded();
    //}
} 
```

...

用android生成的加密字符串

```
 Bonjour >>>>>>> NkrWPLgiY0rt34iaNzhjOg== 
```

在 OpenBSD 中，我使用 android 中生成的私钥加密字符串

```
#openssl version
openSSl 0.9.8k 25 Mar 2009
#echo "Bonjour">test.txt
#openssl enc -aes1278 -a -in text.txt -K 15577737BBD910E794A6B3C250678DAF -iv 0
4UwyKgMGJ41xPwTph2qHXQ== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:29:54.187

我花时间测试你的代码，问题很简单。如果您这样做`echo "Bonjour" > test.txt`，“换行符”会自动添加到`Bonjour`.

So in Java you encrypt the string `"Bonjour"` but the `text.txt` file read by openssl contains the string `"Bonjour\n"`. You can change that by adding the `-n` flag to `echo`. Now openssl should print the same as Java:

```
$ echo -n "Bonjour" > test.txt
$ openssl enc -aes128 -a -in test.txt -K 15577737BBD910E794A6B3C250678DAF  -iv 0
NkrWPLgiY0rt34iaNzhjOg== 
```

Obviously my statement that the IV is randomly generated by Java is wrong.

# sql - 如何在 SSRS 中生成包含某些过滤条件的报告？

> ID：15299981
> 
> 赞同：-1
> 
> 时间：2013-03-08T17:35:20.643
> 
> 标签：sql, reporting-services, filter, report

我需要一份报告来确定哪个帐号与特定的汽车 VIN 匹配。该报告需要一些类似于 t-sql 中的“Like”的搜索或过滤条件。例如，如果某人查找以“231Z9”结尾的 VIN，那么他/她需要一些东西来过滤 VIN 列“VIN Like '%231Z9%'”，以查看是否有任何匹配项。它还需要按客户名字和客户姓氏进行过滤。最后，过滤器不应该嵌入到 sql 中，并且在应用时需要是“OR”而不是“AND”。任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:39:36.423

编写一个存储过程，它将为您返回报告的结果数据集。给stores 过程提供可以在SSRS 报告中查看并且可以嵌入到SQL 中的参数。

要为报告指定相同的参数，您可以使用 SSRS 中的报告参数选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:42:34.340

1.  为 VIN 创建一个文本变量

2.  为 FirstName 创建一个文本变量

3.  为 LastName 创建一个文本变量

4.  使用谓词设置数据集

    ```
    Select (things)
    from (object)
    Where VIN like '%' + @VIN + '%' or
         FirstName like '%' + @FirstName + '%' or
         LastName like '%' + @LastName + '%' 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:50:05.450

我假设“过滤器不应该嵌入到 SQL 中”你的意思是标准必须是参数化的，而不是硬编码的。存储过程对此有好处。

如果您创建检索所需数据的参数化存储过程，请在使用该存储过程作为源的新 SSRS 报告中设置 DataSet。将自动生成报告参数以对应存储过程参数。您可以编辑报告参数（用于用户友好的标签，以控制它们是可选的还是必需的等）

这是假设您的报告将通过网络访问。如果您的报告将成为客户端应用程序（而不是 Web 应用程序）的一部分，您实际上有更多可用选项。

# ios - 如何检测 ViewController 是否被激活？

> ID：15299982
> 
> 赞同：1
> 
> 时间：2013-03-08T17:35:24.747
> 
> 标签：ios, xcode, uiviewcontroller, activation, uitabcontroller

这是我使用 xcode 学习 ios 编程的第二天——所以这应该是一个简单的问题——只是我想不通。

我正在使用 StoryBoards 和带有 3 个选项卡项的 UITabViewController。在第二个选项卡上，每当用户选择该选项卡时，我都想启动相机。

如何检测到第二个视图已激活？在这种情况下是否会触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:51:27.847

您还可以使用 ViewController 的 viewDidLoad 方法。在这个方法中做任何你需要做的事情：

```
- (void)viewDidLoad
{
} 
```

# c# - 向 restfull 架构添加一些通知

> ID：15299983
> 
> 赞同：1
> 
> 时间：2013-03-08T17:35:26.740
> 
> 标签：c#, javascript, html

我正在使用 WebAPI（带填充的 Json 格式）开发一个完整的 Web 服务，它是关于玩基于棋盘的游戏，如井字游戏或国际象棋或连接四个......我真的希望它能够异步创建人工智能任何语言轻松。

该服务由 javascript (jquery) 使用，并使用 HTML5 中的画布绘制板。现在一切正常，除了我们必须手动刷新以了解对手是否已轮到他，或者互相发送短信、电子邮件以发送通知。

如何使多个 HTML5 客户端基于主题（此处为游戏 ID）推送通知？我听说过Web socket，它是正确的方向吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:40:40.680

不是一个确定的答案，但您可以在 javascript 中设置一个间隔，让客户端检查来自服务的更新。如果您想每 10 秒检查一次：

```
$(function() {
  timer = setInterval( function() {
      $.get(your_url, function(data) {
              // What your client should do with the data
      });
  }), 10000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T09:03:49.050

**简短回答**：是的，你可以，在这种情况下，WebSocket 是你的朋友。

**您首先需要一个处理 WebSocket 协议的服务器**，并且能够为所有侦听主题的侦听器广播通知。

最适合您的是**FastFlicker**：它已经带有一个易于使用的清晰界面的 javascript 对象。看 ：

*   [https://github.com/Paraintom/FastFlicker](https://github.com/Paraintom/FastFlicker)
*   [https://github.com/Paraintom/FastFlicker/blob/master/JavascriptInterface/FastFlickerChat.js](https://github.com/Paraintom/FastFlicker/blob/master/JavascriptInterface/FastFlickerChat.js)

它的工作原理如下：首先连接，然后发送的第一条消息是主题，然后广播所有下一条消息。您将收到广播给您的主题的所有消息，除了您自己的消息。

使用它的应用程序示例是 MikMak 本身：[http ://www.olivettom.com/games/](http://www.olivettom.com/games/)

对您而言，每次选择新游戏时，只需订阅 subject=gameId 并在玩家移动后发送类似“1”的消息。在收听传入的消息时，如果您收到“1”，只需进行休息呼叫以获得游戏的最后状态。

祝你好运！

# c# - 如何根据条件更改模型可编辑属性

> ID：15299985
> 
> 赞同：2
> 
> 时间：2013-03-08T17:35:32.323
> 
> 标签：c#, asp.net, asp.net-mvc, data-annotations

根据用户凭据，我将允许用户在 Razor 视图上编辑或不编辑字段。

所以我目前有一个模型，我可以为我禁止的属性执行此操作：

```
[Editable(allowEdit=false)]
public string FirstName {get;set;} 
```

但是当我添加属性时，无论用户是否有权编辑它，他们都无法这样做。我也无法更改 Razor View 中的字段，因为我们使用了一种非常不同的渲染模型属性的方式。

知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:01:10.440

您可能想要创建自定义验证属性并使用它，您可以在其中注入您的布尔值并检查并使其成为有条件的（在 C# 中）。

更好的选择是使用 Fluent Validation - 在这些情况下，当您需要条件验证时，它更容易使用。它还可以使您的模型保持清洁。

因此，如果您可以使用[Fluent 验证](http://fluentvalidation.codeplex.com/)，则只需定义您自己的属性并在您的代码中控制它，包括所有条件。示例和库链接在[这里](http://andrewtwest.com/2011/01/10/conditional-validation-with-data-annotations-in-asp-net-mvc/)

这是您的另一个选择 - 旨在简化您尝试实现的工作的完整库：http: [//foolproof.codeplex.com/](http://foolproof.codeplex.com/)

希望这可以帮助

# c# - C# 中的 ErrorProvider 和异常处理

> ID：15299986
> 
> 赞同：0
> 
> 时间：2013-03-08T17:35:37.043
> 
> 标签：c#, exception-handling, errorprovider

C#中的异常处理和errorProvider有什么区别？

我可以使用 ErrorProvider 之类的异常处理......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:38:28.603

[ErrorProvider](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)是一个 WinForms 用户界面控件，用于向用户呈现错误信息。[异常处理](http://msdn.microsoft.com/en-us/library/ms173160.aspx)是一种语言功能，用于设计代码以在运行时处理异常。

`ErrorProvider`可用于向用户提供有关已处理执行的详细信息。它们几乎完全不同，绝对不可互换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:41:29.460

ErrorProvider 是 System.Windows.Forms 的一部分，而异常处理由框架提供，异常最终派生自 System.Exception。WinForms 明确使用错误提供程序。你用它来告诉用户一个特定的 winforms 元素有一个与之相关的错误。请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)和[http://msdn.microsoft.com/en-us/library/ms173160.aspx](http://msdn.microsoft.com/en-us/library/ms173160.aspx)

# asp.net - 具有参数化的实体框架更新时间和日期列

> ID：15299987
> 
> 赞同：0
> 
> 时间：2013-03-08T17:35:40.893
> 
> 标签：asp.net, entity-framework

我已将所有代码从原始代码更改`ADO.NET` `SQLCommand`为`Entity Framework`，以便将来更容易更改我的代码。但是，我意识到它有很多缺点，`Entity Framework`它不像将原始`SQL`命令注入数据库那么简单。此外，我曾经`Reverse Engineering`生成过`Models & Mapping`for `MS Sql Server`。

目前，我正在尝试执行以下操作，但没有一列得到更新。

```
string sql = @"UPDATE [ProductDB] SET CreatedProduct_Time=getdate(), CreatedProduct_Date=getdate()" + " WHERE [Material_No] = @Material_No";

db.Database.ExecuteSqlCommand(sql, new SqlParameter("@Material_No", materialnotxt)); 
```

列没有得到更新。

我怀疑是否`Entity Framework`会帮助我维护我的代码以供将来使用，使用它而不是旧的是否值得头疼`raw SQL code`？到目前为止，存在许多限制，并且需要更高的学习曲线。

`context.Database.ExecuteSqlCommand`我在网上找到的一些令人困惑的部分和这个`MSDN` [http://msdn.microsoft.com/en-us/library/bb738684.aspx](http://msdn.microsoft.com/en-us/library/bb738684.aspx)有什么区别，代码看起来与我的方法完全不同。

**编辑**

我使用了一种不同的方法来插入`Date`和，`Time`同时插入来自`textbox`.

```
using (var db = new ROGContext())
        {

            ProductDB product = new ProductDB
            {
                Material_No = long.Parse(MaterialNo_txtbox.Text),
                Product_Line = ProductLineDropDownList1.SelectedItem.Text,
                Product_Description = Description_txtbox.Text,
                Size = Size_txtbox.Text,
                UOM = UOM_txtbox.Text,
                SupplierID = long.Parse(SupplierCountryListBox.SelectedItem.Value),
                CreatedProduct_Date = DateTime.Parse(System.DateTime.Now.ToShortDateString()), //in the SQL database I have set the datatype as date to get yyyy/mm/dd
                CreatedProduct_Time = DateTime.Now.TimeOfDay  //in the SQL database I have set the datatype as time(0) to get hh:mm:ss
            };

            long queryselect = (from materialno in db.ProductDBs
                               where materialno.Material_No == product.Material_No
                               select materialno.Material_No).SingleOrDefault();

            if (queryselect != long.Parse(materialnotxt))
            {
                Label1.Text = "Product successfully added in database";
                Label1.Visible = true;
                db.ProductDBs.Add(product);
                db.SaveChanges();             
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:25:59.627

您可以`Context.ExecuteStoreCommand`用于插入、更新和删除。

参见[Entity Framework 4.0 Recipes: A Problem-Solution Approach第 64 页](http://books.google.com/books?id=wB3ACQzTeRAC&pg=PA65&lpg=PA65&dq=ExecuteStoreCommand&source=bl&ots=flkXNxXYGB&sig=Dc-YFF4BKgzg3xMcNTH7hSmZOm8&hl=en&sa=X&ei=WTs6UbGOLbPg2wWot4GIAw&ved=0CDAQ6AEwADgK#v=onepage&q=ExecuteStoreCommand&f=false)

**回答您编辑的部分：**

1.  `ExecuteStoreQuery`选择
2.  `ExecuteStoreCommand`用于插入、更新和删除

[Entity Framework v4 – 提示和技巧](http://geekswithblogs.net/rgupta/archive/2010/06/23/entity-framework-v4-ndash-tips-and-tricks.aspx)

# opencv - 在opencv中创建复选框/按钮

> ID：15299990
> 
> 赞同：1
> 
> 时间：2013-03-08T17:36:10.217
> 
> 标签：opencv

> *在“void (Window::)(int, void*)”类型的 opencv 参数中创建按钮时的错误与“cv::ButtonCallback {aka void ( )(int, void* )}”不匹配

```
class Window{
    void ChecKBox(int state, void* val){
         // do nothing for now
         return;
    }
public:
    void createCheckbox(){
        cv::createButton(checkboxname, CheckBox, NULL, CV_CHECKBOX, 0);
    }
};

int main(){
    Window w;
    w.createCheckBox();
} 
```

我似乎无法找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:51:18.217

哦，你不能在这里传入一个类的成员函数。想一想，'this'指针从何而来？（就像您调用 w.CheckBox(1,NULL) 之类的类成员一样；这里没有“w”。）

highgui 界面有点受限。它只能调用自由函数或静态成员。

因此，如果您的回调函数不需要 Window 中的任何内容，请将其设为静态：

```
class Window {
     static void CheckBox(int state, void* val) { /*you can't use 'this' here!*/ return; }
public: 
     void createCheckBox() { cv::createButton(checkboxname, CheckBox, NULL, CV_CHECKBOX, 0); } 
};

int main() {
    Window w; 
    w.createCheckBox();
} 
```

# rvm - 如何摆脱 RVM 通知

> ID：15299994
> 
> 赞同：2
> 
> 时间：2013-03-08T17:36:18.617
> 
> 标签：rvm, rvmrc

当我遍历包含文件的文件夹时，有没有办法摆脱警告`.rvmrc`。

```
====================================================================================

= NOTICE                                                                           =

====================================================================================

= RVM has encountered a new or modified .rvmrc file in the current directory       =

= This is a shell script and therefore may contain any shell commands.             =

=                                                                                  =

= Examine the contents of this file carefully to be sure the contents are          =

= safe before trusting it! ( Choose v[iew] below to view the contents )            =

====================================================================================

Do you wish to trust this .rvmrc file? (/home/sam/myrailsapp/.rvmrc)

y[es], n[o], v[iew], c[ancel]> y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:44:57.633

[根据文档](https://rvm.io/workflow/rvmrc/)：

```
To turn off the project specific rvmrc functionality in your $HOME/.rvmrc set:
rvm_project_rvmrc=0 
```

我没有 RVM 实例来试用它，但我想这就是您正在寻找的。

我还建议使用[rbenv](https://github.com/sstephenson/rbenv)而不是 RVM，[原因如下](https://github.com/sstephenson/rbenv/wiki/Why-rbenv%3F)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T07:50:25.843

RVM 中现在存在一个[错误](https://github.com/wayneeseguin/rvm/issues/1673)`.rvmrc`，它一直在询问您是否信任。

解决方案很简单 -`.ruby-version`改用：

```
1.9.3 
```

或者

```
1.9.3@gemset 
```

Gemset 将自动为您创建。

`.ruby-version`仅用于 Ruby 版本切换。如果你在切换 Ruby 时需要一些脚本，你仍然需要`.rvmrc`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T13:22:31.293

从 .rvmrc 切换到 .ruby-version + .ruby-gemset

```
rvm rvmrc to .ruby-version 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-28T14:16:35.357

如果 RVM 已使用 sudo 安装，则必须以`cd`root 身份进入该目录。

如果您信任`.rvmrc`or `.ruby-env`作为 root，则通知不应返回。

# jquery-mobile - 调用 $.mobile.changePage 时如何禁用 ajax 导航系统？

> ID：15299996
> 
> 赞同：2
> 
> 时间：2013-03-08T17:36:30.877
> 
> 标签：jquery-mobile

我在 jquery mobile mobileinit 事件中禁用了 ajax。但是当我使用 $.mobile.changePage 加载页面时，它仍然使用 ajax 加载页面。

```
......
<script src="/Templates/js/jquery-1.8.0.js"></script>
<script>
$(document).on("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
});
</script>
<script src="/Templates/js/jquery.mobile-1.2.0.js"></script>
...... 
```

mobileinit 有效，就在我使用 $.mobile.changePage 时，它​​使用 ajax。我的意思是普通链接现在没有使用ajax，只是当我调用这个函数时，仍然使用ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T03:38:35.347

有同样的问题

```
$.mobile.changePage( url ); 
```

$.mobile.ajaxEnabled = false。

不得不改用这个。

```
window.location = url; 
```

# php - 使用 ajax 结果创建分页

> ID：15299999
> 
> 赞同：-1
> 
> 时间：2013-03-08T17:36:35.563
> 
> 标签：php, jquery, ajax, pagination

在我进行开发的所有时间里，我从未真正理解过的一件事是使用 AJAX 搜索结果创建“分页”的正确方法。

所以，我要返回 40 个结果，并且我希望能够一次将它们分页 10... 是否将它们吐在页面上，添加一些 css 类并隐藏/显示每组 10 个一次？

有人可以指出一些“从头开始”分页的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:40:57.950

显然，最简单的方法是使用预制脚本。我推荐[DataTables](http://www.datatables.net)，它将为您完成所有分页，或者如果您选择可以通过对 PHP 的单独 ajax 调用来完成。`<thead>`最简单的方法是，您可以使用, 调用输出一个有效的结果表，`$(element).datatables()`然后您就完成了。

如果您必须从头开始，则需要从数据库中返回一组结果，使用记录的开始和结束编号（或要返回的开始编号和行数）进行调用然后你会通过将不同的参数传递给服务器并接收回数据来构建改变视图的按钮或链接。Ajax 会更好，因此您不需要每次都重新加载页面。

`[CEIL][2]`是您确定导航页面的朋友。

如果您选择在不每次都访问数据库的情况下执行此操作（在 Datatables 中通过称为“流水线”的过程改进了一个概念），那么您将根据要显示的数量吐出信息 div，然后根据显示和隐藏它们您想进入的页面。它不适用于大型数据集（对 dom 来说太多，加载时间太长），而且写起来也不好看。