# StackOverflow 问答 15579000-15579999

# c# - xna 中的 NullReferenceException

> ID：15579000
> 
> 赞同：1
> 
> 时间：2013-03-22T20:06:02.880
> 
> 标签：c#, xna, nullreferenceexception

我正在尝试创建一个简单的游戏来测试碰撞检测，但它无法正常运行。它构建得很好，但是在运行它时出现此错误：“NullReferenceException：对象引用未设置为对象的实例”。

SpriteManager.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Project_3
{
    public class SpriteManager : Microsoft.Xna.Framework.DrawableGameComponent
    {
        private Game1 _Game1;
        //SpriteBatch for drawing
        SpriteBatch spriteBatch;

        //A sprite for the player and a list of automated sprites
        UserControlledSprite player;
        List<Sprite> spriteList = new List<Sprite>();

        public SpriteManager(Game1 game)
            : base(game)
        {
            // TODO: Construct any child components here
            _Game1 = game;
        }

        public override void Initialize()
        {
            // TODO: Add your initialization code here

            base.Initialize();
        }

        protected override void LoadContent()
        {

            spriteBatch = new SpriteBatch(Game.GraphicsDevice);

            //Load the player sprite
            player = new UserControlledSprite(
                Game.Content.Load<Texture2D>("Images/bill"),
                Vector2.Zero, 10, new Vector2(6, 6));

            //Load several different automated sprites into the list
            spriteList.Add(new AutomatedSprite(
                Game.Content.Load<Texture2D>("Images/kit"),
                new Vector2(150, 150), 10, Vector2.Zero));
            spriteList.Add(new AutomatedSprite(
                Game.Content.Load<Texture2D>("Images/kit"),
                new Vector2(300, 150), 10, Vector2.Zero));
            spriteList.Add(new AutomatedSprite(
                Game.Content.Load<Texture2D>("Images/beast"),
                new Vector2(150, 300), 10, Vector2.Zero));
            spriteList.Add(new AutomatedSprite(
                Game.Content.Load<Texture2D>("Images/beast"),
                new Vector2(600, 400), 10, Vector2.Zero));

            base.LoadContent();
        }

        public override void Update(GameTime gameTime)
        {
            // Update player
            player.Update(gameTime, Game.Window.ClientBounds);

            // Update all sprites
            foreach (Sprite s in spriteList)
            {
                s.Update(gameTime, Game.Window.ClientBounds);
            }

            base.Update(gameTime);
        }

        public override void Draw(GameTime gameTime)
        {
            spriteBatch.Begin(SpriteSortMode.FrontToBack, BlendState.AlphaBlend);

            // Draw the player
            player.Draw(gameTime, spriteBatch);

            // Draw all sprites
            foreach (Sprite s in spriteList)
                s.Draw(gameTime, spriteBatch);

            spriteBatch.End();
            base.Draw(gameTime);
        }
    }
} 
```

引发异常的行是`player.Update(gameTime, Game.Window.ClientBounds);`from `SpriteManager`。完整的异常消息是“Project 3.exe 中发生了类型为 'System.NullReferenceException' 的未处理异常。附加信息：对象引用未设置为对象的实例。”

用户控制精灵.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace Project_3
{
class UserControlledSprite : Sprite
{
    // Movement stuff
    MouseState prevMouseState;

    // Get direction of sprite based on player input and speed
    public override Vector2 direction
    {
        get
        {
            Vector2 inputDirection = Vector2.Zero;

            // If player pressed arrow keys, move the sprite
            if (Keyboard.GetState().IsKeyDown(Keys.Left))
                inputDirection.X -= 1;
            if (Keyboard.GetState().IsKeyDown(Keys.Right))
                inputDirection.X += 1;
            if (Keyboard.GetState().IsKeyDown(Keys.Up))
                inputDirection.Y -= 1;
            if (Keyboard.GetState().IsKeyDown(Keys.Down))
                inputDirection.Y += 1;

            // If player pressed the gamepad thumbstick, move the sprite
            GamePadState gamepadState = GamePad.GetState(PlayerIndex.One);
            if (gamepadState.ThumbSticks.Left.X != 0)
                inputDirection.X += gamepadState.ThumbSticks.Left.X;
            if (gamepadState.ThumbSticks.Left.Y != 0)
                inputDirection.Y -= gamepadState.ThumbSticks.Left.Y;

            return inputDirection * speed;
        }
    }

    public UserControlledSprite(Texture2D textureImage, Vector2 position, int collisionOffset, Vector2 speed)
    {
    }

    public override void Update(GameTime gameTime, Rectangle clientBounds)
    {
        // Move the sprite based on direction
        position += direction;

        // If player moved the mouse, move the sprite
        MouseState currMouseState = Mouse.GetState();
        if (currMouseState.X != prevMouseState.X ||
            currMouseState.Y != prevMouseState.Y)
        {
            position = new Vector2(currMouseState.X, currMouseState.Y);
        }
        prevMouseState = currMouseState;

        // If sprite is off the screen, move it back within the game window
        if (position.X < 0)
            position.X = 0;
        if (position.Y < 0)
            position.Y = 0;
        if (position.X > clientBounds.Width - 150)
            position.X = clientBounds.Width - 150;
        if (position.Y > clientBounds.Height - 150)
            position.Y = clientBounds.Height - 150;

        base.Update(gameTime, clientBounds);
    }
}
} 
```

我不确定为什么它不起作用。我尝试了很多不同的东西，但由于我是 xna 的新手，我可能会遗漏一些简单的东西。

任何帮助将不胜感激。

编辑：忘记添加 Sprite.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace Project_3
{
    abstract class Sprite
    {
    // Stuff needed to draw the sprite
    Texture2D textureImage;

    // Collision data
    int collisionOffset;

    // Movement data
    protected Vector2 speed;
    protected Vector2 position;

    // Abstract definition of direction property
    public abstract Vector2 direction
    {
        get;
    }

    public Sprite()
    {
    }

    public Sprite(Texture2D textureImage, Vector2 position, int collisionOffset, Vector2 speed)
    //: this(textureImage, position, collisionOffset, speed)
    {
    }

    public virtual void Update(GameTime gameTime, Rectangle clientBounds)
    {

    }

    public virtual void Draw(GameTime gameTime, SpriteBatch spriteBatch)
    {
        // Draw the sprite
        if (textureImage != null)
        {
            spriteBatch.Draw(textureImage, position, Color.White);
        }
    }

    // Gets the collision rect based on position, framesize and collision offset
    public Rectangle collisionRect
    {
        get
        {
            return new Rectangle(
                (int)position.X + collisionOffset,
                (int)position.Y + collisionOffset,
                150 - (collisionOffset * 2),
                150 - (collisionOffset * 2));
        }
    }

    public Game1 _Game1 { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T02:11:17.680

抱歉，我还不能发表评论。

当您创建播放器（UserControlledSprite）时，您似乎不会从“UserControlledSprite（...parameters...）”调用 Sprite 构造函数。

```
public UserControlledSprite(Texture2D textureImage, Vector2 position, int collisionOffset, Vector2 speed)
{
} 
```

可能需要：

```
public UserControlledSprite(Texture2D textureImage, Vector2 position, int collisionOffset, Vector2 speed) 
    : base(TextureImage, position, collisionOffset, speed)
{
} 
```

设置您传递的数据也很有用。所以你传入了textureImage、位置、碰撞偏移和速度。我看到您在 Sprite 类中有变量，但我没有看到您在使用构造函数创建它们时设置它们。除非，请告诉我是否是这种情况，传入与变量同名的参数会自动设置它吗？如果不是这种情况，那么请确保您将 sprite 类中的 position、collisionOffset、speed 和 textureImage 实际设置为它们实际传递的参数。我一直认为参数中的名称不能与类变量中的名称相同。

所以你必须这样做（如果上述情况属实）：

```
public UserControlledSprite(Texture2D _textureImage, Vector2 _position, int _collisionOffset, Vector2 _speed) 
    : base(_textureImage, _position, _collisionOffset, _speed)
{
    //Do this either here or in Sprite. 
    this.textureImage = _textureImage;
    this.position = _position;
    this.collisionOffset = _collisionOffset;
    this.speed = _speed.
} 
```

我认为上述（紧接在此之上）细节对于您当前的问题并不那么重要。我认为它与构造函数有更多关系，但我不确定。我这里没有VS，现在只想尝试帮助你。

无论如何，我希望这会有所帮助。对不起，如果可以的话，我会发表评论。可悲的是我还不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:29:50.573

您没有实例化`position`. 您将`position`变量传递给构造函数，`UserControlledSprite`但不要将其应用于类范围内的变量。您需要声明另一个变量来保存位置变量，该变量仅对构造函数方法可见。

这意味着`UserControlledSprite`对象第一次调用`Update`，那么`position += direction;`就会抛出`NullReferenceException`。老实说，我不知道你是如何没有得到编译时错误的，因为`position`在 的上下文中不会存在`Update`，除非你没有向我们展示整个代码。

# python - 用python获取firefox版本

> ID：15579004
> 
> 赞同：1
> 
> 时间：2013-03-22T20:06:26.337
> 
> 标签：python, firefox

我想知道如何在 linux 系统上获取已安装的 firefox-version 并在安装的版本早于 3.6 时打印一条消息。

我目前的解决方案是：

```
from subprocess import Popen, PIPE
import re

cmd = 'firefox --version'
p = Popen(['firefox','--version'], stdout=PIPE, stderr=PIPE)
stdout, stderr = p.communicate()

main_version_start = re.search("\d", stdout)

main_version_end = stdout.index(".",main_version_start.start()) 

main_version = stdout[main_version_start.start():main_version_end]

print main_version 
```

通过这种方法，我得到了第一个数字。点后的数字也可以这样做。现在我可以做类似的事情：

```
if main_version < 4:
    if sub_version < 6:
       print "Firefox version is too old" 
```

有没有更好的方法来获取已安装的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:19:01.147

试图正确地进行嵌套比较是很棘手的……而且是不必要的。只需这样做：

```
if (main_version, sub_version) < (3, 6):
    print "Firefox version is too old" 
```

此外，您将版本作为字符串获取。您几乎肯定想将它们转换为整数。虽然（在 2.x 中）`'2' < 3`确实如此，但`'4' < 3`. （而且，虽然您可以通过比较来解决该特定问题，`'3'`而不是`3`，但也确实如此`'11' < '3'`。）

同时，正如 jedwards 解释的那样，在使用正则表达式时，使用捕获组通常比使用开始值和结束值要简单得多。

当然，您可能需要一些错误处理。在完全没有 Firefox 的系统上，您的`Popen`调用将引发`OSError`.

作为旁注，前两个版本组件的标准术语是`major`and `minor`，而不是`main`and `sub`。

无论如何，将它们放在一起（使用 shantanoo 的简单`subprocess`调用）：

```
def firefox_36_or_later():
    try:
        output = subprocess.check_output(['firefox', '--version'])
    except Exception as e:
        print "Failed to run Firefox: {}".format(e)
        return False
    try:
        major, minor = map(int, re.search(r"(\d+).(\d+)", output).groups())
    except Exception as e:
        print "Failed to parse '{}' for version number: {}".format(output, e)
        return False
    if (major, minor) < (3, 6):
        print "Firefox version is too old"
        return False
    return True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:15:49.277

我想不出更好的方法来获取版本，但解析输出的更好方法可能是，而不是：

```
main_version_start = re.search("\d", stdout)

main_version_end = stdout.index(".",main_version_start.start()) 

main_version = stdout[main_version_start.start():main_version_end] 
```

就像是

```
(v1,v2,v3) = re.search("(\d+).(\d+).(\d+)", stdout).group(1,2,3) 
```

在我的无头系统上，我得到“Mozilla Firefox 15.0.1”，它被解析为

```
# v1: 15
# v2: 0
# v3: 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:22:08.863

您可以使用 check_output，而不是使用 popen 和 PIPE。

```
>>> import subprocess
>>> output = subprocess.check_output(['firefox', '--version']) 
```

解析 Mac 输出：

```
>>> tuple(map(int, output.split()[-1].split(b'.'))) > (4, 6)
True 
```

对于 Linux

```
>>> tuple(map(int, output.split()[2][:-1].split(b'.')))[:-1] > (4, 6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:09:15.650

这样，3.9 版将通过“sub_version < 6”。您应该检查版本是否大于:)

要获得安装版本，我没有看到任何更好的方法......也许检查[从命令行，如何知道在 windows/linux 中安装了哪个 Firefox 版本？](https://stackoverflow.com/questions/4644470/from-command-line-how-to-know-which-firefox-version-is-installed-in-windows-lin)

# c# - ASP.NET MVC 4：跳过子对象中的验证

> ID：15579006
> 
> 赞同：4
> 
> 时间：2013-03-22T20:06:31.200
> 
> 标签：c#, asp.net-mvc-4, model

首先，对不起我的英语。不是我的自然语言。

我有一个名为`Category`如下代码的类。请注意，在此代码中，我还有一个`Category`属性，我可以在其中引用父类别。它只是在类中声明的同一个类。就像《盗梦空间》。因此，这个父亲类别对象具有“声明他的类”的相同属性。

该属性`Name`是必需的。记住这个属性。

```
public class Category
{
    public int? Id{ get; set; }

    [DisplayName("Father Category")] //NOT REQUIRED
    public Category Father { get; set; }

    [DisplayName("Category")]
    [Required(ErrorMessage = "Name is required")] //REMEMBER THIS REQUIRED PROPERTY!!
    public string Name { get; set; }

    [DisplayName("Status")]
    public bool Status { get; set; }

    [DisplayName("Description")]
    public string Description { get; set; }
} 
```

那是我的课。

因此，在类别视图中，我可以执行以下操作：

注意：`CompleteEditorFor`和`CompleteDropDownListFor`是在每个字段中添加一些额外 html 的扩展方法，仅用于调整布局。

```
@using (Html.BeginForm(null, null, FormMethod.Post))
{

    @Html.CompleteEditorFor(x => x.Name)
    @Html.CompleteEditorFor(x => x.Description)
    @Html.CompleteEditorFor(x => x.Status)

    @Html.CompleteDropDownListFor(x => x.Father.Id, ViewData["Categories"], "Id", "Name", "Select...")

    @Html.SubmitButton()
} 
```

上面的代码运行得很好。

现在问题来了：

当我单击 Save 按钮时，它会生成一个`HttpPost`，这就是`Action`：

（下面的代码有一些修改过的消息字符串和扩展方法。）（`CategoriesBLL`是从数据库中获取类别的类。）

```
 [HttpPost]
    public ActionResult New(Category item)
    {
        ViewData.Add("Categories", CategoriesBLL.select());
        try
        {
            if (ModelState.IsValid)//PROBLEM IS HERE!!!!!!!!!
            {
                if (CategoryBLL.insert(item) != 0)
                {

                    ViewData.AddSuccess("Some Success Message");

                    return View(new Category());
                }
                else
                {
                    ModelState.AddError("Some error message");
                    return View(item);
                }
            }
            else
            {
                ModelState.AddError("Some SERIOUS error message");
                return View(item);
            }
        }
        catch (Exception ex)
        {
            ModelState.AddError("Some EVEN MORE SERIOUS message");
            return View(item);
        }

    } 
```

问题出在`if (ModelState.IsValid)`一线。

为什么？

因为我的`Category`班级有一个名为`Name`. 我不需要这个属性来做我正在做的事情，我只需要`Id`这个`Father`属性。我可以`Id`在视图的这一行中得到这个：

```
@Html.CompleteDropDownListFor(x => x.Father.Id, ViewData["Categories"], "Id", "Name", "Select...") 
```

那行得通。

但是该`Name`属性是`null`, 并且是必需的，但仅在我通知 Child 类时才必需。不是父亲类。

我什至不知道如何在 Google 或 StackOverflow 上搜索它...

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:11:48.897

您可能需要考虑在模型上创建类 IValidatableObject 接口而不是属性装饰器。如果你真的想使用一个属性装饰器，那么你可能需要一个自定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:26:01.907

您需要使用[View Models](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)。您的视图模型应该包含您在视图上需要的所有字段，减去父亲属性。然后在您的控制器中，您需要将视图模型映射到您的模型。[您可以使用Automapper](https://github.com/AutoMapper/AutoMapper)轻松完成此操作。（不过不推荐直接从视图映射到领域模型，后面会整理出来）

我知道，起初这可能看起来很麻烦，但请相信我。您的视图与您的域模型不同。接下来你会知道，你需要在你的视图中使用某种下拉菜单，以及你的域模型中没有的其他一些额外的复选框。此外，如果您使用视图模型，您的安全性将得到提高。如果有兴趣，我会给你一些关于这方面的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:21:13.360

```
public class Category : IValidatableObject
{
    public int? Id{ get; set; }

    [DisplayName("Father Category")] //NOT REQUIRED
    public Category Father { get; set; }

    [DisplayName("Category")]
    [Required(ErrorMessage = "Name is required")] //REMEMBER THIS REQUIRED PROPERTY!!
    public string Name { get; set; }

    [DisplayName("Status")]
    public bool Status { get; set; }

    [DisplayName("Description")]
    public string Description { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var results = new List<ValidationResult>();
        if (this.Enable)
        {
            Validator.TryValidateProperty(this.Name ,
                new ValidationContext(this, null, null) { MemberName = "Name" },
                results);
            Validator.TryValidateProperty(this.Status,
                new ValidationContext(this, null, null) { MemberName = "Status" },
                results);
        }
        return results;
    }
}

public void Validate()
{
        var toValidate = new Category()
        {
            Name = "Just a name",
            Status = true
        };

        bool validateAllProperties = false;

        var results = new List<ValidationResult>();

        bool isValid = Validator.TryValidateObject(
            toValidate,
            new ValidationContext(toValidate, null, null),
            results,
            validateAllProperties);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-05T20:00:29.027

```
ModelState.Remove("PropertyNameInModel"); 
```

或者

```
ModelState.Remove<ViewModel>(x => x.SomeProperty); 
```

# sql - 如果 where-clause-value 超过列长度，查询是否可移植？

> ID：15579009
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:06:51.827
> 
> 标签：sql

如果我有一个`acct_id CHAR(3)`和类似的查询

```
select * from some_table where acct_id like '12%3%'; 
```

大多数关系数据库会接受这个查询还是会因为我比较的值比列长而失败？

换句话说：**如果我的 where 子句超出列的限制，这个查询是否可以跨典型数据库（如 MySql、DB2 和 Oracle）移植？**

此外，对于`=`比较而不是，是否也是如此`LIKE`？

我在 DB2（x86 和大型机）上尝试了一个查询，它没有导致任何错误，但我不确定其他数据库。在提交之前，我查看了几个 SO 问题的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:11:24.350

可以在 CHAR(3) 列中找到的唯一匹配的值是`'123'`，但`%`运算符支持 0 次或更多次重复。没有理由拒绝测试。

事实上，您甚至可以进行比较`WHERE acct_id = '1234'`，一个复杂的优化器可能会意识到没有任何值会等于该值并将该术语视为错误。没有明显的理由将其作为“无效 SQL”而拒绝；这只是一个戏剧性优化的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:30:37.440

感谢[@MarcinJuraszek](https://stackoverflow.com/users/1163867/marcinjuraszek)在我现在了解[SQL Fiddle](http://sqlfiddle.com/)的评论中，它在我尝试过的每个数据库中都有效：

*   MySQL 5.5.30
*   甲骨文 11g R2
*   PostgreSQL 9.2.1
*   SQLite
*   微软 SQL 服务器 2012
*   微软 SQL 服务器 2008

另外，我在 DB2 Express-C 9.7.5 和 z/OS（大型机）9.1 上的 DB2 上进行了尝试，并且在两者中都有效。

# jquery-mobile - 静态标题中的 jQuery Mobile 面板

> ID：15579012
> 
> 赞同：3
> 
> 时间：2013-03-22T20:07:02.643
> 
> 标签：jquery-mobile

假设我在 JQM 面板中有一个相当复杂的菜单，我需要它可以从应用程序中的每个页面访问。实现它的一种方法是简单地将面板代码复制并粘贴到每个子页面。

[方法 1 - 残酷的方式](http://jsfiddle.net/FBkpt/)

这行得通。但是，它只适用于具有简单面板的小型应用程序。复制大量 Panel 代码并应用到所有其他页面可能会非常麻烦，并且当稍后将更多页面加载到 DOM 时肯定会遇到性能问题。

所以我试着用另一种方式来做——自己操纵面板。我点击了该`pagecreate`事件并将面板添加到加载的页面中。这样我就可以保持我的 DOM 干净并且始终处理一个面板。

[方法二——如意的方式](http://jsfiddle.net/FBkpt/1/)

但这没有用。`pageContainer.trigger('refresh')`在我强制将其从一页完全移动到另一页并调用or后，面板似乎未能重新初始化`pageContainer.trigger('create')`。

所以我最终这样做了 - 将 Panel html 保留在 js 变量中，然后将 panel html 预先添加到加载的页面中，而不删除前一页上的面板。这似乎有效。

[方法 3 - 妥协的方式](http://jsfiddle.net/FBkpt/2/)

虽然这种方法并不能真正解决 DOM 中只有一个 Panel 的问题，但至少我不必将它复制粘贴到每个页面中。

现在它可以工作了，但我对它并不满意。我在这里发布这个问题，希望有人能解释为什么方法 2 不起作用，这真的会让我很开心。

** 我的应用正在使用多页模板

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T06:58:28.983

我在面板中使用一个列表视图，每个页面都有一个唯一的 id。通过 onpagecreate 事件，我使用 javascript 中的数据填充列表视图。

查看我的博客以获取工作示例[http://teusink.blogspot.nl/2013/04/android-example-app-with-phonegap-and.html?m=1](http://teusink.blogspot.nl/2013/04/android-example-app-with-phonegap-and.html?m=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T03:19:00.940

我正在使用此代码

```
$(":jqmData(role='page')").bind("pagebeforeshow", function()  {  
       $.mobile.activePage.find('#panel_menu').load("share/menu.html",
           function(data) {
                $.mobile.activePage.trigger("pagecreate");  
           });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T07:44:33.210

相当晚了，但还有第三种方法

```
<div data-role="panel" id="mypanel">
    <!-- panel content goes here -->
</div>

<div data-role="page">
<!-- Blah blah blabh -->
</div> 
```

然后使用javascript对其进行初始化。$("#mypanel").panel();

# php - 需要 CodeIgniter 子文件夹中的类？

> ID：15579014
> 
> 赞同：0
> 
> 时间：2013-03-22T20:07:05.483
> 
> 标签：php, codeigniter

我有这个结构

```
controllers
- base.php
\ subfolder
  - home.php 
```

在`home.php`我想打电话

```
require("../base.php") 
```

但它给了我一条错误消息，说找不到文件。它在同一个文件夹上工作。

有没有办法让它在子文件夹上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:17:08.400

您可以尝试使用完整路径：

```
$origin = $_SERVER['DOCUMENT_ROOT'];
$home = $origin. "/controllers/home.php";
require($home); 
```

但我明白，从长远来看，这是一种痛苦，但它是一种解决方案。我以前从来没有遇到过这样的问题。

但也许这可能会有更多帮助？[PHP 包含文件。显示未找到错误文件](https://stackoverflow.com/questions/4482253/php-include-file-showing-error-file-not-found)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:13:58.487

尝试：

```
require("/<full dir path>/base.php"); 
```

另一个提示 - 有时在 Windows 中（如果您打算在 Linux 上部署则没有帮助）有时您必须使用双斜杠来转义 '\\'。

如果这不起作用，则可能是权限问题。

编辑：使用它来获取您的包含路径：

```
echo ini_get('include_path'); 
```

这将告诉您使用哪条路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:46:23.013

CodeIgniter is executed from within `index.php` script and paths of `require` function are resolved based on `index.php` path. For example if you would put `test.php` in CodeIgniter root folder and then you would call `require './test.php'` from your controller then the `test.php` would be included without a problem.

To answer the question we need php magic constant `__DIR__` which is always set to current script folder. The answer is:

```
require __DIR__."/../base.php"; 
```

called from within `home.php`.

Edit: And platform independent solution would be:

```
require __DIR__.DIRECTORY_SEPARATOR."..".DIRECTORY_SEPARATOR."base.php"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:44:54.830

在撰写本文时，接受的答案是正确的，因为`require`（和类似的功能）路径基于 index.php 的位置。然而，CodeIgniter 在 index.php 中定义了非常有用的常量，允许您创建应用程序各个部分的路径。

该`APPPATH`常量非常适合指向控制器/库/等。

```
require APPPATH . 'controllers/base.php'; 
```

更好的解决方案是以`application/core/MY_Controller.php`. `MY_Controller`然后，您可以在不需要任何文件的情况下扩展您的控制器。[查看 Phil 关于基本控制器的文章。](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)

# arrays - 移动二维数组 Verilog

> ID：15579020
> 
> 赞同：6
> 
> 时间：2013-03-22T20:07:51.720
> 
> 标签：arrays, verilog, concat, shift, fifo

我不知道以下代码不起作用，但它不会合成：

```
reg [7:0] FIFO [0:8];

always@(posedge clk) begin
    if(wr & !rd & !full) begin
       FIFO[0:8] <= {data_in, FIFO[1:8]};
    end
end 
```

我也尝试以其他方式索引 FIFO，但没有任何效果。在 Xilinx 论坛上找到了这个主题，但我无法弄清楚他想用这个来表达什么。链接在这里：

[http://forums.xilinx.com/t5/General-Technical-Discussion/2-dimensional-array-problem-in-Verilog/td-p/42368](http://forums.xilinx.com/t5/General-Technical-Discussion/2-dimensional-array-problem-in-Verilog/td-p/42368)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:56:57.553

您对打包和解包数组的工作方式有误解。我建议您阅读 IEEE1800-2012 第 7.4.1、7.4.2、7.4.4 和 7.4.5 节。从技术上讲，IEEE1800 适用于 SystemVerilog，它是 Verilog 的超集。对于具有静态大小的数组，两者是相同的，我发现 IEEE1800 比 IEEE1364 有更好的解释和示例。

如果您还没有 LRM 的副本，那么您可以在 ieee.org 网站上免费下载它： [IEEE Std 1800-2012](https://standards.ieee.org/findstds/standard/1800-2012.html)

对于提供的代码，您不能以这种方式分配解压缩数组中的每个元素。您有两个选择：使用 for 循环来分配数组的未压缩部分，或者使您的数组双压缩。

```
/* Using for-loop */
reg [7:0] FIFO [0:8];
integer i;
always@(posedge clk) begin
    if(wr & !rd & !full) begin
       for(i = 8; i > 0; i=i-1) begin
          FIFO[i] <= FIFO[i-1];
       end
       FIFO[0] <= data_in;
    end
end

/* Using double packed array */
reg [0:8] [7:0] FIFO; // NOTE: format and usage explained in IEEE1800-2012 7.4.5
always@(posedge clk) begin
    if(wr & !rd & !full) begin
       FIFO[0:8] <= {data_in,FIFO[0:7]};
    end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-21T22:01:59.490

以下也将起作用。无论 FIFO 是打包的未打包数组（reg [7:0] FIFO [0:8]）还是打包的打包数组（reg [7:0] [0:8] FIFO），它都有效。

```
reg [7:0] FIFO [0:8];

always@(posedge clk) begin
    if(wr & !rd & !full) begin
       FIFO[0] <= data_in;
       FIFO[1:8] <= FIFO[0:7];
    end
end 
```

# ruby - 编译 thrift 0.8.0 - ruby 支持失败

> ID：15579038
> 
> 赞同：2
> 
> 时间：2013-03-22T20:09:03.163
> 
> 标签：ruby, compilation, thrift

我正在尝试从 .tar.gz 源安装 thrift 0.8.0，但在编译 ruby​​ 支持时出现以下错误：

```
Making all in rb
make[3]: entering directory `/home/tomasz/Pobrane/thrift-0.8.0/lib/rb'
/usr/bin/rake 
(in /home/tomasz/Pobrane/thrift-0.8.0/lib/rb)
Invalid gemspec in [/var/lib/gems/1.8/specifications/org-ruby-0.7.1.gemspec]: invalid date format in specification: "2012-07-08 00:00:00.000000000Z"
rake aborted!
no such file to load -- spec/rake/spectask
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/Rakefile:23 
```

我不知道出了什么问题（不知道红宝石）。有没有人有想法

* * *

编辑：

更新 ruby​​ 后，出现以下错误：

```
make[4]: Wejście do katalogu `/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/ext'
gcc -shared -o thrift_native.so strlcpy.o compact_protocol.o thrift_native.o protocol.o struct.o binary_protocol_accelerated.o memory_buffer.o -L. -L/usr/lib -L. -Wl,-Bsymbolic-functions -rdynamic -Wl,-export-dynamic    -lruby1.8  -lpthread -lrt -ldl -lcrypt -lm   -lc
make[4]: Opuszczenie katalogu `/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/ext'
....................................................................................FFF........................................FFF......*......................................................................................................................................                                                   

Pending:

Thrift::Client should increment the sequence id when sending messages (it seems sequence ids are completely ignored right now)
./spec/client_spec.rb:56

1)
NoMethodError in 'Thrift::BinaryProtocolAccelerated should perform a complete rpc with no args or return'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:306:

2)
NoMethodError in 'Thrift::BinaryProtocolAccelerated should perform a complete rpc with a primitive return type'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:313:

3)
NoMethodError in 'Thrift::BinaryProtocolAccelerated should perform a complete rpc with a struct return type'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:320:

4)
NoMethodError in 'Thrift::BinaryProtocol should perform a complete rpc with no args or return'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:306:

5)
NoMethodError in 'Thrift::BinaryProtocol should perform a complete rpc with a primitive return type'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:313:

6)
NoMethodError in 'Thrift::BinaryProtocol should perform a complete rpc with a struct return type'
undefined method `close' for nil:NilClass                                                                                                                        
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:358:in `srv_test'
/home/tomasz/Pobrane/thrift-0.8.0/lib/rb/spec/binary_protocol_spec_shared.rb:320:

Finished in 3.040428 seconds

271 examples, 6 failures, 1 pending
rake aborted!
Command /usr/bin/ruby1.8 -I"lib"  "/usr/lib/ruby/gems/1.8/gems/rspec-1.3.2/bin/spec" "spec/base_protocol_spec.rb" "spec/base_transport_spec.rb" "spec/binary_protocol_accelerated_spec.rb" "spec/binary_protocol_spec.rb" "spec/client_spec.rb" "spec/compact_protocol_spec.rb" "spec/exception_spec.rb" "spec/http_client_spec.rb" "spec/mongrel_http_server_spec.rb" "spec/nonblocking_server_spec.rb" "spec/processor_spec.rb" "spec/serializer_spec.rb" "spec/server_socket_spec.rb" "spec/server_spec.rb" "spec/socket_spec.rb" "spec/struct_spec.rb" "spec/types_spec.rb" "spec/union_spec.rb" "spec/unix_socket_spec.rb" --color failed

Tasks: TOP => default => gem => spec => realspec
(See full trace by running task with --trace)
make[3]: *** [all-local] Błąd 1
make[3]: Opuszczenie katalogu `/home/tomasz/Pobrane/thrift-0.8.0/lib/rb'
make[2]: *** [all-recursive] Błąd 1
make[2]: Opuszczenie katalogu `/home/tomasz/Pobrane/thrift-0.8.0/lib'
make[1]: *** [all-recursive] Błąd 1
make[1]: Opuszczenie katalogu `/home/tomasz/Pobrane/thrift-0.8.0'
make: *** [all] Błąd 2
tomasz@tomasz-lenovo-ideapad-Y530:~/Pobrane/thrift-0.8.0$ 
tomasz@tomasz-lenovo-ideapad-Y530:~/Pobrane/thrift-0.8.0$ 
tomasz@tomasz-lenovo-ideapad-Y530:~/Pobrane/thrift-0.8.0$ sudo gem update --system
[sudo] password for tomasz: 
Latest version currently installed. Aborting. 
```

# java - Java 多图 与特罗夫

> ID：15579045
> 
> 赞同：4
> 
> 时间：2013-03-22T20:09:22.427
> 
> 标签：java, multimap, trove4j

我有一个相当大的谷歌`Multimap<String,String>`，正在寻找减少内存使用的方法。在所有示例中，我发现人们正在做类似的事情：

```
Multimaps.newSetMultimap(
TDecorators.wrap(new TIntObjectHashMap<Collection<Integer>>()),
new Supplier<Set<Integer>>() {
public Set<Integer> get() {
  return TDecorators.wrap(new TIntHashSet());
}
}); 
```

哪个适用于 a `Multimap <Integer,Integer>`，是否可以使用 Trove 包装 a `<String,String>`？

如果有人对未来感兴趣，我使用 [http://code.google.com/p/jdbm2/](http://code.google.com/p/jdbm2/) 将哈希映射写入文件系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T17:00:44.260

Guava 的 Multimap 由标准 JDK 集合支持，这些集合并未针对内存使用进行优化。例如，`ArrayListMultimap<K, V>`由 支持`HashMap<K, ArrayList<V>>`和`HashMultimap<K, V>`由 支持`HashMap<K, HashSet<V>>`。

[Eclipse Collections](http://www.eclipse.org/collections/)（前身为[GS Collections](https://github.com/goldmansachs/gs-collections)）拥有由其自己的容器类型支持的 Multimap，`UnifiedMap`并且`UnifiedSet`. `UnifiedMap`使用一半的内存`HashMap`和`UnifiedSet`使用四分之一的内存`HashSet`。您将看到的内存优势取决于您使用的是 a`FastListMultimap`还是 a `UnifiedSetMultimap`。

[此处](http://www.goldmansachs.com/gs-collections/presentations/GSC_Memory_Tests.pdf)提供了更详细的内存比较。

**注意：**我是 Eclipse Collections 的提交者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T20:38:11.567

您可以查看哈希映射的内存高效变体，例如这个：[https ://code.google.com/p/sparsehash/](https://code.google.com/p/sparsehash/)

如果您的值字符串足够长，则可以选择压缩。您还可以查看磁盘支持的解决方案，例如 Ehcache，具体取决于您的访问统计信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:27:48.320

Trove4j 不包含字符串到字符串的 hashmap。

见[http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/package-summary.html](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/package-summary.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T11:23:41.287

我使用的一种方法是使用`Map<String,Collection<String>>`值开始的位置，并在存储桶达到某个阈值（例如 32 个元素）时`ArrayList<String>`提升到该值。`HashSet<String>`

我发现这为小桶节省了大量内存。

# php - 通过经验获得等级

> ID：15579054
> 
> 赞同：1
> 
> 时间：2013-03-22T20:09:46.413
> 
> 标签：php, optimization, levels, exp

我有这个代码：

```
 function getLevels($cEXP) {  // $cEXP is current player experience

    $i = 1;
    while(!$n) {
    $NextLevelXP = pow($i,3) + 2 * $i;
        if($NextLevelXP > $cEXP) {
            $AllLevels = $i;
            break;
        }
    $i++;
    }
} 
```

我需要知道的只是优化可能性，或者通过`$NextLevelXP = pow($CurrentLevel,3) + 2 * $CurrentLevel;`方程式获得水平数量的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:15:08.830

您甚至可以对值进行二进制搜索以获得**O(logN)**算法而不是**O(N)**，但是由于**N**是我认为不会超过 1000 的级别数，因此无需使代码复杂化. 你可以做同样的事情，但代码更短：

```
function getLevels($cEXP) {
    for($i = 1; ($i * $i + 2) * $i <= $cEXP; $i++);
    return $i - 1;
} 
```

PS请注意，我摆脱了`pow`，尽量避免它继续只处理整数。

# c# - 图节点坐标评估

> ID：15579069
> 
> 赞同：9
> 
> 时间：2013-03-22T20:11:00.823
> 
> 标签：c#, c++, graph, graph-drawing

哪些 ( [https://stackoverflow.com/questions/492893/graph-drawing-c-library](https://stackoverflow.com/questions/492893/graph-drawing-c-library) ) 库可用于评估节点坐标？我的意思是我想通过单击它来添加或删除一些节点来绘制和操作图形，然后使用一些轻量级库评估坐标。

我所需要的只是可以在点文件和指定布局（[http://en.wikipedia.org/wiki/DOT_language](http://en.wikipedia.org/wiki/DOT_language)）上给我图形节点和 2D 点一致性的算法。

首选语言：C++、C#、Java

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T21:40:06.520

我制作了一个完整的 WPF MVVM 示例，其中包含支持拖放和许多有趣的视觉功能的“节点编辑器”。它看起来像这样：

![在此处输入图像描述](../Images/82bc1d5635dd21d8474a6e16b6ee0067.png)

[**GitHub 上的完整源代码**](https://github.com/High-Core/WPFSamples)

# javascript - 跟随链接时如何保留 URL 查询参数？

> ID：15579070
> 
> 赞同：17
> 
> 时间：2013-03-22T20:11:13.893
> 
> 标签：javascript, html

这是**login.html**的代码：

```
<ul>
  <li class="introduction">
    <a href="introduction.html">
      <span class="icon"></span>
      Introduction
    </a>
  </li>
  <li class="login active">
    <a href="#">
      <span class="login"></span>
      Login
    </a>
  </li>
</ul> 
```

外部链接将首先使用**我想要保留的一些查询参数**进入当前页面（登录） 。如果用户点击第一个链接`introduction`，就会加载 Introduction.html。但是，上一页（登录）的所有查询参数都丢失了。

无论如何我可以在保留查询参数的同时加载此页面吗？使用 HTML 或 Javascript。

非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T20:16:24.930

您感兴趣的 URL 部分称为[search](https://developer.mozilla.org/en-US/docs/DOM/window.location)。

您可以使用相同的参数链接到另一个页面

```
<a onclick="window.location='someotherpage'+window.location.search;">Login</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T20:17:10.940

通过标签上的`rel=""`属性（使用 jQuery）自动将您当前的参数附加到您认为值得的任何链接：`<a>`

```
<a href="introduction.html" rel="keep-params">Link</a> 
```

```
// all <a> tags containing a certain rel=""
$("a[rel~='keep-params']").click(function(e) {
    e.preventDefault();

    var params = window.location.search,
        dest = $(this).attr('href') + params;

    // in my experience, a short timeout has helped overcome browser bugs
    window.setTimeout(function() {
        window.location.href = dest;
    }, 100);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-26T13:17:18.673

修改所有`a`标签客户端以包含查询参数

```
[...document.querySelectorAll('a')].forEach(e=>{
//add window url params to to the href's params
  const url = new URL(e.href)
  for (let [k,v] of new URLSearchParams(window.location.search).entries()){
    url.searchParams.set(k,v)
  }
  e.href = url.toString();
}) 
```

注意：如果您`a`在此脚本运行后以编程方式添加新标签，它不会更新它，因此它不适用于 SPA 等

# wcf - 阻止 WCF 缓存/重用安全令牌 (SecurityContextToken)

> ID：15579072
> 
> 赞同：2
> 
> 时间：2013-03-22T20:11:14.543
> 
> 标签：wcf, wcf-security, ws-security

我正在使用带有以下 wsHttpBinding 的 WCF 消息级别安全性

```
 <security mode="Message">
    <message clientCredentialType="Windows" establishSecurityContext="false" />
  </security> 
```

*   每次调用服务都是一个单独的操作，不需要保留任何会话状态。

*   我遇到了负载均衡器的问题，因为 WCF 不断重复使用安全令牌，所以如果第一次调用转到 NodeA，它会创建一个可重复使用的安全令牌。如果将该令牌传递给 NodeB，则会触发***MessageSecurityException***

*   似乎微软对此的回答是使用粘性会话，这是我们探索过的，但在我们的设置中没有意义

有没有办法简单地强制 WCF 在每次调用时创建一个新的安全令牌？（在使用带有 Windows 凭据类型的消息级别安全性时？

**更新**

我在客户端/服务器上设置跟踪，我可以看到令牌被缓存了 24 小时。

```
<ServiceToken>
<SessionTokenType>System.ServiceModel.Security.Tokens.BufferedGenericXmlSecurityToken</SessionTokenType>
<ValidFrom>2013-03-23T21:21:32.569Z</ValidFrom>
<ValidTo>2013-03-24T07:21:32.569Z</ValidTo>
<InternalTokenReference>LocalIdKeyIdentifierClause(LocalId = 'uuid-291b4a38-af17-4832-bc7a-6fb65dcc3c3c-18', Owner = 'System.ServiceModel.Security.Tokens.SecurityContextSecurityToken')</InternalTokenReference> 
```

> IssuanceTokenProvider 使用了缓存的服务令牌。

我尝试使用以下方法禁用令牌兑现：

```
IssuedTokenClientCredential itcc = service.ClientCredentials.IssuedToken;
itcc.CacheIssuedTokens = false;
itcc.LocalIssuerAddress = new EndpointAddress("http://localhost:####/myservice");
itcc.LocalIssuerBinding = new WSHttpBinding("my_wsHttp_bindingConfig");
itcc.MaxIssuedTokenCachingTime = new TimeSpan(0,0,0); 
```

但是查看 wcf 跟踪，上面似乎根本不影响协商。

我仍然看到使用了缓存的令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:10:43.083

经过大量研究，并通过 WCF 跟踪，并与 Microsoft 联系，我找到了这个问题的根源。

1.  使用消息级别安全性时，WCF 发出基于**安全上下文令牌**的身份验证 (SCT)

2.  这种类型的身份验证仅依赖于粘性会话，无法绕过它。

3.  有一个设置应该禁用它建立安全上下文=假，但这不起作用。设置后，我可以在跟踪中看到 SCT 和以前一样被使用（我让微软的人确认我在这里没有做任何不寻常的事情）。此设置可能还有另一个依赖项，但一位高级 MS 工程师不知道为什么此设置也不起作用。

4.  这留下了一些选择

    一种。对 Kerberos 使用“一次性”调用 - 我没有对此进行探索，因为在我的场景中打开 kerberos 会更令人头疼

    湾。使用基于 NTLM 的身份验证的自定义绑定 - 我试过这个，但 SCT 仍在使用，所以它对我不起作用

    C。使用具有自定义令牌发行服务的联合安全性。这可以更好地控制令牌的发行方式，但有不必要的（在我的情况下）必须管理它的开销

    **d。使用带有 TransportCredentialOnly 安全模式的基本 http 绑定。**这很好，因为它停止了 SCT 协商，同时仍然通过了 Windows 凭据。

4.d 对我来说是最简单的，因为除了配置之外我不需要做很多更改。我放弃了 wshttpbinding 功能，但到目前为止还可以，因为此对话是在受信任的网络中进行的。

# iphone - PhoneGap：使用视口缩小网页

> ID：15579078
> 
> 赞同：7
> 
> 时间：2013-03-22T20:11:41.513
> 
> 标签：iphone, ios, cordova, mobile

我正在创建一个我们将要在工作中构建的应用程序的快速原型，以便我们可以对某些功能进行快速用户测试。

我的设计师以 640 像素的宽度创建了我的图像，以匹配 iPhone 5 的分辨率。所以为了让事情变得简单快捷，我使用了这个视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, user-scalable=no"> 
```

这在移动 Safari 中完美运行，但现在我已经将它包装在 PhoneGap 中，它的行为就像比例设置为 1。关于我需要做什么来解决这个问题有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T20:31:51.763

我找到了。项目的根目录中有一个“config.xml”。设置此行：

```
 <preference name="EnableViewportScale" value="true" /> 
```

就像我的片段在这里显示的那样“真实”，让应用程序像在线一样正确缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T09:42:59.653

刚刚测试，偏好不是完整的解决方案，请执行以下操作：

config.xml: 首选项名称="EnableViewportScale" 值="true" />

主要活动，在 loadurl 之后的设置中启用视口：

```
 super.loadUrl(Config.getStartUrl(),1);   
    WebSettings settings = appView.getSettings(); 
    settings.setUseWideViewPort(true); 
    settings.setLoadWithOverviewMode(true); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-03T10:02:31.617

我在上面看到了一个可能的错误。也许我的好人可以发表评论。

1）最初的提问者似乎想要扩大规模。行尾声明**"user-scalable=no"**。这可能导致没有缩放 - 缩放 100%。浏览器让您无论如何都可以扩展，对吧？所以Safari的结果是一条红鲱鱼。此外，初始和最大刻度是相同的。

```
<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, user-scalable=no"> 
```

2）根据 Sebastions 的回复，也许正确的值是**“50”**而不是“0.5”。

# oauth-2.0 - 无法在“每个文件”身份验证范围内共享 Google 云端硬盘中的文档

> ID：15579079
> 
> 赞同：1
> 
> 时间：2013-03-22T20:11:45.273
> 
> 标签：oauth-2.0, google-drive-api

我将我的应用程序的 Auth 范围限制为每个文件 ( [https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file) ) 以限制对应用程序创建或打开的文件的访问。这适用于我自己的应用程序创建的文件。当我与其他人共享此文件时，该文件可见并被识别为由我的应用程序制作，但我的应用程序无法打开：“找不到文件”。

如果我对完全访问范围（[https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)）执行相同操作，则可以打开共享文件。但是，文档中不建议使用此范围，也不应该需要此范围。

共享时这两个范围的行为差异与我预期的或我从文档中看到的不同。这是预期的错误或行为还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T17:02:46.587

如果我正确理解了您的问题，那么我认为此错误现在可能已修复。以下场景适用于我使用范围

```
https://www.googleapis.com/auth/drive.file 
```

1.  Account1：使用app创建file.app
2.  Account1 : 使用 google drive API 与 Account2 共享 file.app
3.  Account2：接收分享邮件，点击打开文件
4.  Account2 ：应用程序启动，下载 file.app 并上传更改
5.  Account1 ：重新打开 file.app 并且 Account1 的更改可见

希望有帮助。我不敢相信一个寻求成为世界文件系统的服务没有问题跟踪器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:02:17.977

你没有错过任何东西。
我已经检查了这个问题，这是 SDK 开发人员已知的错误。
我们将不得不等待修复。

同时，您可以使用完整的驱动器范围，或使用 drive.file 范围，但仅在修复错误时声明“共享”功能可用性。

# clojure - 引用clojure.core时出错//（除法）

> ID：15579084
> 
> 赞同：3
> 
> 时间：2013-03-22T20:12:09.253
> 
> 标签：clojure

在某些 clojure 代码中，我想使用别名命名空间来引用 clojure.core 中的除法函数“/”。这是因为我想为一些数学函数编写我的自定义实现，同时在内部仍然使用核心函数。

```
(ns mynamespace
  (:refer-clojure :exclude [ / ])
  (:require [clojure.core :as core])

(defn / [x y]
  (core// x y)) 
```

但是，这会导致错误：“无效令牌：核心//”

其他数学函数确实以这种方式工作（core/+ core/*）。

如何参考核心除法功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:52:41.987

```
user=> (defn / [& args] :arg-slash-ye-matey!)
WARNING: / already refers to: #'clojure.core// in namespace: user, 
being replaced by: #'user//
#'user//

user=> (/ 42 6)
:arg-slash-ye-matey!

user=>  ((ns-resolve 'clojure.core '/) 42 6)
7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:54:35.517

如果您在 clojure 1.5 中使用全名 clojure.core// 似乎可以工作

```
user> (defn / [& args] (apply clojure.core// args))                                                                                                                       
WARNING: / already refers to: #'clojure.core// in namespace: user, being replaced by: #'user//

user> (/ 2 4) 
1/2 
```

# vba - 如何制作一个在找到空白单元格时停止的子程序？

> ID：15579090
> 
> 赞同：0
> 
> 时间：2013-03-22T20:12:40.460
> 
> 标签：vba, excel, excel-2010

我在 Excell 2010 中处理数据库，发现许多重复的名称。我试图制作一个 VBA 脚本来解决这个问题，但它只是以无限循环结束。我希望它在碰到空白单元格时停止。这是我想出的代码

```
Sub excluirDuplicatas()

   Dim lngCont As Long
   Dim lngLinhas As Long
   Dim rngNom1 As Range
   Dim rngNom2 As Range

lngCont = 0
lngLinhas = Cells.SpecialCells(xlCellTypeLastCell).Row

While lngCont <= lngLinhas

Set rngNom1 = ActiveCell
Set rngNom2 = rngNom1.Offset(1, 0)

While rngNom1.Value = rngNom2.Value And rngNom2 <> lastRow

rngNom2.Select
rngNom2.EntireRow.Delete
Set rngNom2 = ActiveCell
Wend

Set rngNom1 = rngNom2
Set rngNom1 = ActiveCell

Set rngNom1 = rngNom2
rngNom1.Select

lngCont = lngCont + 1

Wend

End Sub 
```

我不知道怎么了，我的猜测是我所说的部分

`rngNom2 <> Cells.SpecialCells(xlCellTypeLastCell).Row`

请注意，我今天（3 月 22 日）开始了 VBA 编程。如果您可以的话，请不仅发布答案，还要快速解释一下，我将不胜感激。

PS：数据表有2000多行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:28:45.480

我建议使用 For 循环，这样您就可以避免使用`.Select`您可能想查看[此链接](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select)

因此，例如，您的代码将如下所示

```
For i = 1 To lastRow
    If Len(Trim(Sheets("Sheet1").Range("A" & i).Value)) = 0 Then Exit For

    '
    '~~> Rest of your code
    '
Next i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:22:43.283

我认为这个命令会对你有所帮助。替换`Range("a1")`为您要测试的任何范围。

`IsEmpty(Range("a1"))`

即`do while isempty(range("a1"))`……或`do while not isempty(range("a1"))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:40:51.830

好吧，我不是 100% 确定你在做什么，但这将是一个开始。

首先声明一个范围变量`rng`taht 包含您要检查的所有单元格。我设置此`rng`变量的方式**自动停止在列中的第一个空白单元格处**。

我们将使用计数器`r`从最后一个到第一个迭代这些单元格（删除时这是必要的）。

在此迭代期间，我们将使用变量`cl`作为单个单元格范围。

```
Sub excluirDuplicatas()

Dim rng as Range
Dim r as Integer 'row counter.
Dim cl As Range

lngCont = 0
lngLinhas = Cells.SpecialCells(xlCellTypeLastCell).Row

set rng = Range(ActiveCell.Address, Range(ActiveCell.Address).End(xlDown)) 

For r = rng.Rows.Count to 1 Step - 1 'Step backwards when deleting, otherwise you have infinite loop

    'This tests to see if the cell value is the same as the value below it.
     ' and deletes it if it is the same value.
    If cl.Value = cl.Offset(1,0).Value Then
        cl.EntireRow.Delete

    End If
Next 
```

结束子

# java - 使用自己的语言实现我的 TTS 项目

> ID：15579094
> 
> 赞同：2
> 
> 时间：2013-03-22T20:12:58.227
> 
> 标签：java, text-to-speech, freetts

我的 android 项目有问题。我想使用我自己的语言“孟加拉语/孟加拉语”来实现我的文本转语音软件。我需要知道我该如何完成这项任务？如果有一个非常有效的解决方案，请告诉我。

# ios - iOS：通过命令行在设备上部署和运行应用程序，无需越狱

> ID：15579097
> 
> 赞同：8
> 
> 时间：2013-03-22T20:13:07.500
> 
> 标签：ios, testing, deployment, build, automation

我正在寻找一种自动化 iOS 开发测试周期的方法，最流行的方法似乎是越狱，然后是 ssh。这包括两个步骤：

1.  使用命令行从 Mac/PC 将我的应用程序部署到设备。
2.  从 Mac/PC 命令行在设备上运行应用程序。

然而，自从 iOS6 和 iPhone5 以来，官方越狱一直很不稳定，这让我想找到一个不基于越狱的替代解决方案。

我看过水果带和[这篇文章](http://pervasivecode.blogspot.co.uk/2012/06/install-ios-app-ipa-file-without-xcode.html)。

但是，前者不再维护，后者似乎远非官方或稳定。所以我又来了，任何想法都值得赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T02:27:39.700

您可以在命令行上运行工具以在模拟器中启动您的应用程序（并运行您的自动化测试）。据我了解，这也适用于真实设备。

有关更多信息，请参阅此问题：

[在真实设备上通过命令行实现 UIAutomation](https://stackoverflow.com/questions/15286850/uiautomation-through-command-line-on-a-real-device)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T14:51:05.017

[PhoneGap 的ios-deploy](https://github.com/phonegap/ios-deploy)是水果链的一个分支，所以它可能是值得研究的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T16:12:39.380

比尔的链接回答了我问题的“构建和运行”部分。

我将回答部署部分：我发现的唯一工作方法是在 IPA 应用程序上使用 ruby​​ gem transporter_chief.rb：

```
./transporter_chief.rb my.ipa 
```

[http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/](http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/)

# r - 如何查看 R 源代码

> ID：15579100
> 
> 赞同：3
> 
> 时间：2013-03-22T20:13:20.813
> 
> 标签：r

我正在尝试查看源代码。例如对于 cook.distance()。这是我尝试过的

```
cooks.distance
function (model, ...) 
UseMethod("cooks.distance")
<bytecode: 0x3f25b5c>
<environment: namespace:stats> 
```

然后我尝试了：

```
 debug(cooks.distance) 
```

一无所获。然后我尝试了：

```
 methods(cooks.distance)
 [1] cooks.distance.glm* cooks.distance.lm* 

 Non-visible functions are asterisked 
```

然后我尝试了：

```
 lm:::cooks.distance.default
 Error in loadNamespace(name) : there is no package called ‘lm’ 
```

有人告诉我 lm 在 MASS 包中，所以我尝试了以下方法：

```
 MASS:::cooks.distance.default
 Error in get(name, envir = asNamespace(pkg), inherits = FALSE) : 
 object 'cooks.distance.default' not found 
```

如何查看源代码？我试图查看源代码但找不到函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:25:21.763

试试这个：

`getAnywhere(cooks.distance.glm)`

从这里：[http ://cran.r-project.org/doc/manuals/R-intro.html#Object-orientation](http://cran.r-project.org/doc/manuals/R-intro.html#Object-orientation)

# cakephp - 我应该在哪里存储由 CakePHP 中的 cron 创建的 csv 文件？

> ID：15579102
> 
> 赞同：0
> 
> 时间：2013-03-22T20:13:43.223
> 
> 标签：cakephp, cakephp-2.3

我正在运行一个每日 cron，它通过 Cakephp 控制台 shell 运行并生成一个最终将被解析的 CSV 文件。

我想要做的是将每天的 CSV 文件存储在一个公众无法访问的文件夹中。

有一个理想的位置吗？如果我希望它可以公开访问，我会将其粘贴在`webroot/files`.

对我来说最好只是在其中创建一些随机文件夹，`app`还是已经为此目的指定了其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:28:29.213

我不相信已经有任何指定的地方，但你把它放在 webroot 之外是对的。

如果是我，我可能会把它放进去`tmp/csvs/`或类似的东西。它已经是一个可写的目录，而且听起来你真的不需要将它存储很长时间，所以把它放在一个“临时”文件夹中似乎是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:30:33.253

你是对的，`APP/webroot/files/`只对应该公开访问的文件有好处。

如果您希望它们“低于”表面，请将它们存储在`APP/files/` 其中它们将无法直接访问，并且可以以更永久的方式存储。

如果它们会变成很多文件，那么按年份或其他一些子文件夹方案对它们进行分组也是有意义的：

```
APP/files/2013/
APP/files/2014/ 
```

等等。这样访问它们会更快，有大量文件。

# jquery - jQuery localScroll & scrollTo 根本不起作用

> ID：15579106
> 
> 赞同：0
> 
> 时间：2013-03-22T20:13:48.497
> 
> 标签：jquery, scroll

我之前都使用`scrollTo`过`localScroll`几次，但我根本不明白为什么这不起作用？

[http://jsfiddle.net/vP3Vk/](http://jsfiddle.net/vP3Vk/)

重要的 JS 位是：

```
$('#primary-nav').localScroll({
    duration:   250, 
    hash:       true
}); 
```

上面的一切都只是插件。

HTML 只是标准的`<a href="#some-id">...</a>`，`<h2 id="some-id">...</h2>`但里面有一堆文本和 WordPress 的 menu-div:itus。

如果您对调用进行评论，`localScroll`您会注意到页面滚动正常，因此 ID 没有问题。因为当我调用它时它会停止原生滚动，所以`localScroll`我可以假设它针对正确的元素 ( `#primary-nav`)。例如，如果我将其更改`#primary-navs`为 ，它什么也不做。当 #hash 在 iframe 之外运行时（如在 JSFiddle 上），它也会发生变化。

那么它为什么不滚动呢？我需要指定要滚动的内容吗？（文档说除非您另有说明，否则整个窗口都会滚动 - 这就是我想要的......）

谢谢

编辑：这发生在 Ubuntu 和 Windows 下的 Chrome 版本 25.0.1364.172 中。它在 Firefox 中运行良好（我刚刚注意到）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:04:44.043

显然，我使用的版本与我的 Chrome 版本或插件`scrollTo`不兼容。`localScroll`我下了一个版本，现在它可以工作了。

# ruby - 在 Rails 3 中添加一些自定义方法来延迟作业？

> ID：15579110
> 
> 赞同：4
> 
> 时间：2013-03-22T20:13:59.153
> 
> 标签：ruby, ruby-on-rails-3, class, model, delayed-job

我想在延迟作业模型中添加一些自定义方法。

我想要一些额外的东西，比如......

```
def status
  return "errored" unless self.last_error.blank?
  return "waiting" if self.locked_at.blank?
  return "running" unless self.locked_at.blank?
  return "blerg" if some.other.things...
end 
```

...关于延迟的工作课程。

我只是想知道如何以这种方式扩展它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:05:53.033

是类`Delayed::Job`吗？您可以在 ruby​​ 中通过几种方式向类添加方法，但可能最简单的方法是：

**`config/initializers/delayed_job.rb`**

```
class Delayed::Job
  def status
    return "errored" unless self.last_error.blank?
    return "waiting" if self.locked_at.blank?
    return "running" unless self.locked_at.blank?
    return "blerg" if some.other.things...
  end
end 
```

虽然这看起来像是覆盖了类，但实际上它只是在类已经加载的情况下添加了方法。

# javascript - 隐藏的表单字段值没有真正改变

> ID：15579114
> 
> 赞同：0
> 
> 时间：2013-03-22T20:14:36.557
> 
> 标签：javascript, jquery

在下面的代码中，为什么我在最终的 alert() 中获得了新值，但在表单提交时获得了旧值（以及使用 firebug 查看隐藏字段时）？

表单标签内的隐藏字段元素：

```
<input type="hidden" id="shipping_1" name="shipping_1" value="3.99"> 
```

选择Shipto下拉列表后，使用jQuery来更新字段值：

```
$('#ShipSelect').change(function(e) {
    var ss = $('#ShipSelect').val();
    if (ss=='International') {
        alert("International orders add $10 S&H");
        ship1 = ($('#shipping_1').val())*1 + 10;
        alert('Shipping_1 val is now: ' + ship1);
        $('#shipping_1').val(ship1);
        alert('Reading the field directly: ' + $('#shipping_1').val());
    }
}); 
```

警报显示 10 美元已添加到隐藏字段值。到目前为止，一切都很好。

但是，当使用 Firebug（或在 Chrome DevTools 模式下）查看 DOM*和/或*按下 BuyNow按钮时，该`shipping_1`字段为旧值（不足 10 美元）。

* * *

更新：我看到了[这篇有前途的帖子](http://drupal.org/node/1342858)，它准确地描述了我的问题，但解决方案不起作用。这是他们的建议：

```
document.form_name.field_name.value = your_value 
```

因此，我注释掉了这一行：

```
$('#shipping_1').val(ship1); 
```

并将其替换为：

```
document.paypal_cart.shipping_1.value = ship1; 
```

结果和我现在的没有什么不同。旧值仍被提交（使用 firebug 查看时可见）。我是否需要以某种方式使用 .on() 将更改的值“修复”到表单或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:24:01.317

[http://jsfiddle.net/PeT66/1/](http://jsfiddle.net/PeT66/1/)

它被简化了一点我认为你错过了右括号

```
$('#ShipSelect').change(function(e) {
    var ss = $('#ShipSelect').val();
    alert("International orders add $10 S&H");
    ship1 = ($('#shipping_1').val())*1 + 10;
    alert('Shipping_1 val is now: ' + ship1);
    $('#shipping_1').val(ship1);
    alert('Reading the field directly: ' + $('#shipping_1').val());
}); 
```

# ssh - Paramiko -- 在 OS X 上使用加密的私钥文件

> ID：15579117
> 
> 赞同：20
> 
> 时间：2013-03-22T20:14:53.477
> 
> 标签：ssh, osx-mountain-lion, paramiko, private-key

我正在尝试使用 Paramiko 从 Python 连接到 SSH 服务器。这是我到目前为止所尝试的：

```
>>> import paramiko
>>> import os
>>> privatekeyfile = os.path.expanduser('~/.ssh/id_rsa')
>>> mykey = paramiko.RSAKey.from_private_key_file(privatekeyfile)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/paramiko/pkey.py", line 198, in from_private_key_file
    key = cls(filename=filename, password=password)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/paramiko/rsakey.py", line 51, in __init__
    self._from_private_key_file(filename, password)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/paramiko/rsakey.py", line 163, in _from_private_key_file
    data = self._read_private_key_file('RSA', filename, password)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/paramiko/pkey.py", line 280, in _read_private_key_file
    data = self._read_private_key(tag, f, password)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/paramiko/pkey.py", line 323, in _read_private_key
    raise PasswordRequiredException('Private key file is encrypted')
paramiko.PasswordRequiredException: Private key file is encrypted 
```

如您所见，它失败了，因为我的私钥已加密。但是，密码存储在我的 OS X 登录钥匙串中，当我键入时`ssh host`它不会询问它（相反，它只询问一次，然后记住它直到下次重新启动）。有没有办法`paramiko`使用密码/从钥匙串中获取密码，就像这样`ssh`做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-18T20:06:20.927

以下方法似乎工作正常（在 OS X 上，通常设置加密私钥，其密码短语存储在钥匙串中，无需任何用户交互）：

```
import paramiko

ssh = paramiko.SSHClient()
ssh.load_system_host_keys()
ssh.connect(HOST, username=USER, look_for_keys=False)
...
ssh.close() 
```

这似乎`look_for_keys=False`不是绝对必要的。但是，如果您使用它，您将在身份验证失败的情况下获得更好的错误消息（“AuthenticationException”而不是“PasswordRequiredException”）。

* * *

如果您真的想直接使用私钥，您*可以*执行以下操作：

```
import os
import paramiko
import keyring

keyfile = os.path.expanduser('~/.ssh/id_rsa')
password = keyring.get_password('SSH', keyfile)
key = paramiko.RSAKey.from_private_key_file(keyfile, password=password) 
```

但是，根据我的测试，这*不是*必需的。上述`ssh.connect`以直接方式使用的解决方案就足够了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-24T10:10:48.037

`RSAKey.from_private_key_file()`继承自[`PKey()`](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html); 此方法的可选参数是密码。去引用：

> 如果私钥已加密且密码不是 None，则将使用给定的密码来解密密钥（否则将引发 PasswordRequiredException）。

由于您没有传递密码并且您的密钥已加密，因此将始终抛出此异常。解决这个问题只有一种方法，实际上是给方法一个密码。因此，您需要一种从 OSXKeychain 中获取密码的方法。

您可以使用跨平台[`Keyring`](https://pypi.python.org/pypi/keyring)模块来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T09:13:16.923

在 Paramiko 中使用加密的私钥是不可能的，因为[ssh-agent 不提供私钥](https://stackoverflow.com/a/2976729/952234)（没有内存转储）。

解决方案是使用`subprocess`并从中调用 ssh 命令（与任何常用命令一样）。我没有要求解密私钥（它使用 ssh 代理，您可以使用 找到它`ssh -vvv`）。

顺便说一句，我找不到使用`paramiko`. SSH 代理似乎更发达，更通用的工具。例如，[无法](https://adikrishnan.in/2018/10/25/agent-forwarding-with-paramiko)在 paramiko 中转发 SSH 代理，为此必须求助于子进程。另请注意2014 年的[此问题](https://github.com/paramiko/paramiko/issues/387)，“密钥处理非常糟糕”（打开）：

> SSHClient._auth 使用多退出策略并结合存储单个异常以在进程结束时引发。这通常意味着在身份验证时引发的异常对于无法进行身份验证的真正原因是完全不正确的。

此线程中链接了许多 paramiko 错误。它现在似乎正在积极开发，我希望`paramiko`能解决这个问题，但我的建议是：不要依赖一个单一的库，它可能无法满足您的需求。

是的，有可能为加密密钥提供密码，但这违背了这样做的目的。您要么自己输入密码（然后您不需要 ssh 的密钥），要么将密码存储在磁盘上（当然不在版本控制中），然后您不需要加密私钥（这个想法是如果有人得到你的硬盘，一个人不会得到你的纯文本私钥）。

# r - 从R中的文本中提取网站链接

> ID：15579119
> 
> 赞同：5
> 
> 时间：2013-03-22T20:14:59.047
> 
> 标签：r

我有多个文本，每个文本都可能包含对一个或多个 Web 链接的引用。例如：

```
 text1= "s@1212a as www.abcd.com asasa11". 
```

如何提取：

```
 "www.abcd.com" 
```

从R中的这个文本？换句话说，我希望提取以开头`www`和结尾的模式`.com`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T22:20:33.423

**regmatches**这种方法使用`regexpr`/`grepgexpr`和`regmatches`. 我扩展了测试数据以包含更多示例。

```
text1 <- c("s@1212a www.abcd.com www.cats.com", 
           "www.boo.com", 
           "asdf",
           "blargwww.test.comasdf")

# Regular expressions take some practice.
# check out ?regex or the wikipedia page on regular expressions
# for more info on creating them yourself.
pattern <- "www\\..*?\\.com"
# Get information about where the pattern matches text1
m <- gregexpr(pattern, text1)
# Extract the matches from text1
regmatches(text1, m) 
```

这使

```
> regmatches(text1, m) ##
[[1]]
[1] "www.abcd.com" "www.cats.com"

[[2]]
[1] "www.boo.com"

[[3]]
character(0)

[[4]]
[1] "www.test.com" 
```

请注意，它返回一个列表。如果我们想要一个向量，您可以`unlist`在结果上使用。这是因为我们使用`gregexpr`了这意味着我们的字符串中可能有多个匹配项。如果我们知道最多有一个匹配，我们可以`regexpr`使用

```
> m <- regexpr(pattern, text1)
> regmatches(text1, m)
[1] "www.abcd.com" "www.boo.com"  "www.test.com" 
```

但是请注意，这会将所有结果作为向量返回，并且仅从每个字符串返回一个结果（请注意 www.cats.com 不在结果中）。但总的来说，我认为这两种方法中的任何一种都比方法更可取，`gsub`因为如果没有找到结果，这种方法将返回整个输入。例如看一下：

```
> gsub(text1, pattern=".*(www\\..*?\\.com).*", replace="\\1")
[1] "www.abcd.com" "www.boo.com"  "asdf"         "www.test.com" 
```

即使在将模式修改为更健壮一点之后也是如此。我们仍然在结果中得到“asdf”，即使它显然与模式不匹配。

无耻愚蠢的自我推销：`regmatches`是在 R 2.14 中引入的，所以如果你坚持使用早期版本的 R，你可能会不走运。除非你能够[从我的 github repo](https://github.com/Dasonk/future2.14)安装 future2.14 包，它为 2.14 中引入的功能提供了一些支持到早期版本的 R。

**绑带**。与上述## 给出相同结果的另一种方法是：

```
library(gsubfn)
strapplyc(test1, pattern) 
```

**正则表达式**下面是一些关于如何破译正则表达式的解释：

```
pattern <- "www\\..*?\\.com" 
```

解释：

`www`匹配 www 部分

`\\.`我们需要使用转义实际的“点”字符，`\\`因为普通`.`表示正则表达式中的“任何字符”。

`.*?``.`代表任何字符，告诉`*`匹配0次或多次，`?`后面的`*`告诉它不要贪婪。否则，“asdf www.cats.com www.dogs.com asdf”将匹配所有“www.cats.com www.dogs.com”作为单个匹配项，而不是识别其中有两个匹配项。

`\\.`再一次，我们需要转义一个实际的点字符

`com`这部分匹配我们想要匹配的结尾 'com'

总而言之，它说：从 www 开始。然后匹配任何字符，直到到达第一个“.com”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T20:23:52.670

查看 gsub 函数：

```
x = "s@1212a as www.abcd.com asasa11"
gsub(x=x, pattern=".*(www.*com).*", replace="\\1") 
```

基本思想是将要保留的 txt 括在括号中，然后用它替换整行。gsub "\\1" 的替换参数指的是括号中的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T00:13:14.393

这里的解决方案很棒而且很基础。对于那些想要快速解决方案的人，您可以使用`qdap`'s `genXtract`。这个函数基本上需要一个左元素和一个右元素，它将提取两者之间的所有内容。通过设置`with = TRUE`它将包括这些元素：

```
text1 <- c("s@1212a www.abcd.com www.cats.com", 
    "www.boo.com", 
    "asdf",
    "http://www.talkstats.com/ and http://stackoverflow.com/",
    "blargwww.test.comasdf")

library(qdap)
genXtract(text1, "www.", ".com", with=TRUE)

## > genXtract(text1, "www.", ".com", with=TRUE)
## $`www.  :  .com1`
## [1] "www.abcd.com" "www.cats.com"
## 
## $`www.  :  .com2`
## [1] "www.boo.com"
## 
## $`www.  :  .com3`
## character(0)
## 
## $`www.  :  .com4`
## [1] "www.talkstats.com"
## 
## $`www.  :  .com5`
## [1] "www.test.com" 
```

PS，如果您查看该函数的代码，它是 Dason 解决方案的包装器。

# java - Java - 将多个整数返回到数组

> ID：15579123
> 
> 赞同：-4
> 
> 时间：2013-03-22T20:15:12.720
> 
> 标签：java, arrays, integer, return

我正在尝试通过 void 将多个整数返回到数组。像这样的东西：

```
public class abc {
    public static void main(String[] args) {

        int[] evenNumbers = { findEvenNumbers(0, 10); };

    }

    public static void findEvenNumbers(int min, int max) {

        for(int i = min; i <= max; i++) {

            if((i % 2) == 0) {

                return i;

            }

        }

    }

 } 
```

我知道这会产生很多错误，但是有没有办法可以将多个整数返回到数组中（有点像上面的程序）？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:18:12.863

我认为这可以解决问题：

```
import java.util.Arrays;

public class Abc {
    public static void main(String[] args) {

        int[] evenNumbers = findEvenNumbers(0, 10);
        // should really do something with the result:
        System.out.println(Arrays.toString(evenNumbers));
    }

    public static int[] findEvenNumbers(int min, int max) {
        int[] result = new int[max - min + 1];
        int n = 0;
        for(int i = min; i <= max; i++) {
            if((i % 2) == 0) {
                result[n++] = i;
            }
        }
        if (n < result.length) {
             result = Arrays.copyOf(result, n);
        }
       return result;
    }

} 
```

对原始代码的更改：

*   将类名更改为以大写开头（Java 编码约定；不影响行为）。
*   更改`findEvenNumbers`为返回一个`int[]`而不是`void`。
*   更改了初始化表达式，`evenNumbers`以考虑`findEvenNumbers`返回数组而不是`int`值。
*   更改正文以将偶数存储在数组中`results`并返回`results`（调整长度后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:20:36.830

注意：您不能从具有 void 返回类型的函数返回任何内容

```
 public static Integer[] findEvenNumbers(int min, int max) 
    {
       List<Integer> lists = new ArrayList<Integer>();

      for(int i = min; i <= max; i++) {

        if((i % 2) == 0) {

            lists.add(i);

        }         

    }
 return (Integer[])(lists.toArray());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:18:12.203

改变：

```
public static void findEvenNumbers(int min, int max) 
```

至

```
public static int[] findEvenNumbers(int min, int max) 
```

这意味着您打算从函数中返回某些内容（void 表示不会返回任何内容）。在这种情况下，将返回一个整数数组。

从这样的方法创建并返回一个数组：

```
int[] arr = new int[numberOfElements];
//put stuff in array like this:
arr[0] = 1;
arr[1] = 2;

return arr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:44:49.233

你可以试试这个：

```
 private static ArrayList <Integer> evenNumbers = new ArrayList<Integer>();

    public static void findEvenNumbers(int min, int max) {

        for(int i = min; i <= max; i++) {

            if((i % 2) == 0) {

                evenNumbers.add(i);
            }

        }
   }

   public static void main (String [] args){

       findEvenNumbers(0, 10);

       Iterator iterator = evenNumbers.iterator();

       while(iterator.hasNext()){

          System.out.println(iterator.next());
       }

   } 
```

我建议您创建可以制作所需内容的类，而不是将所有内容都放在拥有 main 方法的主类中:)

# html - 当形状部分透明时，如何在 Canvas 中从另一个形状（XOR）中切出一个形状？

> ID：15579126
> 
> 赞同：2
> 
> 时间：2013-03-22T20:15:20.650
> 
> 标签：html, canvas

通常要使用 Canvas 从另一个形状中切割出一个形状，我使用了 globalCompositeOperation 选项“xor”：

```
var c2 = document.getElementById('canvas').getContext('2d');
c2.globalCompositeOperation = "xor";
c2.fillRect(0, 0, 200, 200);
c2.fillRect(170, 0, 30, 30); // shape 2 is cut out from shape 1 
```

但是，当 fillStyle 的 alpha 值 < 1 或上下文的 globalAlpha < 1 时，“剪切”形状不再完全不可见。

具体来说，如果 alpha >0.5 且 <1，您会看到较轻的形状版本。如果 alpha 为 0.5，则根本看不到切口。如果 alpha <0.5，我们会得到相反的结果：应该被剪掉的形状实际上比第一个形状更暗。

这可以在[http://jsfiddle.net/N7aXY/2/](http://jsfiddle.net/N7aXY/2/)看到。

您可以尝试更改 alpha 值以查看不同的效果。

当背景形状的 alpha < 1 时，有什么方法可以完全切掉一个形状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:05:36.897

好的，这有点“骇人听闻”，但无论如何我们都走了：

1.  将合成设置为 XOR。
2.  通常从 shape1 绘制到“剪切”shape2。
3.  保存画布。
4.  将合成设置为正常（source-over）。
5.  将 globalAlpha 设置为您想要的级别。
6.  清除画布并重新绘制保存的图像。
7.  结果：globalAlpha 和 globalCompositing 和谐地工作！

这是代码和小提琴：http: [//jsfiddle.net/utttk/1/](http://jsfiddle.net/utttk/1/)

```
ctx.fillStyle="red";
ctx.globalCompositeOperation="xor";
ctx.fillRect(0,0,200,200);
ctx.fillRect(170,0,30,30);
var png=canvas.toDataURL();
ctx.globalCompositeOperation="source-over"; // "normal" compositing
ctx.globalAlpha=.2;
var image=new Image();
image.onload=function(){
   ctx.clearRect(0,0,canvas.width,canvas.height);
   ctx.drawImage(image,0,0);
}
image.src=png; 
```

# php - Symfony 2.2，Doctrine 2：复杂关系实体检索

> ID：15579132
> 
> 赞同：3
> 
> 时间：2013-03-22T20:16:00.317
> 
> 标签：php, symfony, doctrine-orm, entity

## 背景

我在一个投资组合网站上工作，这个网站相当简单，大部分作品都在画廊里。我有一组数据库表，它们都链接起来以不同的方式检索和过滤画廊，从顶部开始，如下所示：

`GalleryCategory`-> `Gallery`->`GalleryImage`

* * *

## 问题

我面临的问题仅在画廊类别页面上，我正在查看给定类别中的所有画廊，然后画廊中的画廊图像返回。

我的控制器目前看起来像这样：

```
public function galleryCategoryAction($categoryId)
{
    $em = $this->getDoctrine()->getManager();

    $category  = $em->getRepository('SeerUKDWrightGalleryBundle:GalleryCategory')->findById($categoryId);
    $galleries = $category->getGalleries();

    $galleryImages = [ ];
    foreach ($galleries as $i => $gallery)
    {
        $galleryImages[$gallery->getId()] = $em->getRepository('SeerUKDWrightGalleryBundle:GalleryImage')
            ->findOneByGalleryId($gallery->getId());
    }

    return $this->render('SeerUKDWrightGalleryBundle:Gallery:category.html.twig', array(
        'category'      => $category,
        'galleries'     => $galleries,
        'galleryImages' => $galleryImages
    ));
} 
```

现在，尽管这确实有效，但正是我想要的，我觉得它只是......错了！将画廊归入一个类别既好又干净：

```
$category  = $em->getRepository('SeerUKDWrightGalleryBundle:GalleryCategory')->findById($categoryId);
$galleries = $category->getGalleries(); 
```

但是，我看到获得每个画廊的第一张图像的唯一方法是遍历它们并检索每个实体。就像我说的，这似乎是错误的。

我所拥有的唯一改进这一点的其他建议是使用画廊实体中的实体管理器来获取实体内的图像，这当然会破坏 Doctrine 的用途。

* * *

## 结论

总之，我该如何做得更好？必须有一个地方可以做得更好，我只是 Symfony 的新手。查看文档没有帮助...

* * *

## 额外细节

我忘了说，仍然能够使用实体的能力是必要的，我对实体有一些稍后使用的方法。例如，在 GalleryImage 实体中，我有获取图像的系统路径和 Web 路径的方法。我仍然需要能够使用这些。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:49:49.350

你可以做很多事情；我将列出要点列表，以便您发现它们。

*   使用[ArrayCollection 对象](http://www.doctrine-project.org/api/common/2.3/class-Doctrine.Common.Collections.ArrayCollection.html)；真是太棒了（支持某些功能的回调）
*   使用[自定义存储库类](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)；它将帮助您组织代码（我喜欢将与实体相关的所有查询放在一个地方）。
*   当数据被延迟加载时，使用[查询构建器](http://symfony.com/doc/current/book/doctrine.html#querying-for-objects-with-dql)和[连接相关实体](http://symfony.com/doc/current/book/doctrine.html#joining-to-related-records)来避免额外的查询。（关于下面的更多信息）

延迟加载会产生额外的查询；如果您知道要提取关联实体的集合，则可能需要加入这些实体。

以下代码生成两个查询

```
$category  = $em->getRepository('SeerUKDWrightGalleryBundle:GalleryCategory')->findById($categoryId);
$galleries = $category->getGalleries(); 
```

如果您遵循文档，您应该执行以下操作（最好在实体的存储库类中）

```
$em = $this->getDoctrine()->getManager();

$query = $em->createQuery(
    'SELECT gc, g
     FROM SeerUKDWrightGalleryBundle:GalleryCategory gc
     LEFT JOIN gc.galleries g
     WHERE gc.id = :categoryId'
)->setParameter('categoryId', $categoryId);

$category = $query->getResult(); 
```

这只是一个查询。

如果您有很多画廊，比如说 100,000 个，您的服务器将很快耗尽内存，因此您可能需要分页或使用延迟加载和[额外的延迟加载选项](http://docs.doctrine-project.org/en/2.0.x/tutorials/extra-lazy-associations.html)。

如果您想进一步抽象代码，可以在存储库和控制器之间添加服务。

*   存储库将从数据库中获取数据
*   服务将调用存储库、获取数据并对其进行操作（如 Helper 类）。
*   控制器将调用服务并将数据注入模板层（除其他外）。

如果要获取每个图库的第一张图片，可以使用语句和语句创建`SELECT`查询。这样，您对所有画廊进行一次查询，而不是“x”查询（如果有 100,000 个画廊，则为 100,000 次查询）。`IN``GROUP BY`

# jquery - 如何在 div 内的 div 上单击鼠标左键

> ID：15579135
> 
> 赞同：0
> 
> 时间：2013-03-22T20:16:12.250
> 
> 标签：jquery, html, scroll

我有一个容器 div，它设置了宽度和高度，溢出设置为滚动。在那个 div 中是另一个我可以滚动的内容 div。我想添加将自动滚动到特定点（以像素为单位）的导航元素。我目前正在使用 Jquery 并没有得到任何地方。任何帮助都是极好的！

这是我的 HTML

```
<button class="scrollto"  style="position:fixed; top:100px;left:200px; width:150px;   height:50px; z-index:3;">purple_lamp</button>

<div id="container" >
  <div id="main_content">
    <img id="urban_chic" src="images/bg.jpg" />
    <img id="purple_lamp" src="images/purple_lamp.png" data-stellar-ratio="1.5"/>
    <img id="sofa" src="images/sofa.png" data-stellar-ratio="1.5"/>
    <img id="wall_clock" src="images/jacobs_wall_clock.png" data-stellar-ratio="1.5"/>
    <img id="yellow_shoe" src="images/yellow_shoe.png"  data-stellar-ratio="1.5" />
    <img id="intro" src="images/intro.jpg" />
  </div>
</div> 
```

这是我的 CSS

```
#container{
  height:768px;
  width:1024px;
  position:absolute;
  overflow:scroll;
}

#main_content{
  height:768px;
  width: 5454px;
  position:absolute;
} 
```

还有我的 JS

```
$('.scrollto').click(function() {
    $('#container').animate( { scrollRight: '+=500' }, 1000, 'easeOutQuad' );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:18:31.040

没有`scrollRight`方法，您仍然需要使用`scrollLeft`并反转值：

```
$('.scrollto').click(function() {
    $('#container').animate( { scrollLeft: '-=500' }, 1000, 'easeOutQuad' );
}); 
```

[**小提琴**](http://jsfiddle.net/TtXRZ/3/)

# .net - 自定义 Windows Phone 8 Emulator 启动状态

> ID：15579137
> 
> 赞同：1
> 
> 时间：2013-03-22T20:16:17.733
> 
> 标签：.net, windows-phone-8, windows-phone

在开发新的 Windows Phone 应用程序时，我们通常会在设备中安装自定义证书，以使用 Fiddler 启用 SSL 代理。

有没有办法自定义启动设备映像，以便我们可以从安装的证书开始，而不必每次模拟器启动时都安装证书？

我找到了 xde.exe 应用程序，您可以在其中指定要使用的设备映像和快照，但是从 Visual Studio 启动模拟器时，我找不到如何自定义启动参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:44:26.847

本文提到如何拍摄 Windows Phone 8 模拟器的快照，这将保存其状态...

[http://sviluppomobile.blogspot.ie/2013/01/saving-windows-phone-8-emulator-state.html](http://sviluppomobile.blogspot.ie/2013/01/saving-windows-phone-8-emulator-state.html)

（*需要明确的是，这不适用于 Windows Phone 7 模拟器*）

# python-3.x - 我应该使用 Nautilus GIR，如果是，文档在哪里？

> ID：15579138
> 
> 赞同：1
> 
> 时间：2013-03-22T20:16:19.610
> 
> 标签：python-3.x, gobject, file-browser, nautilus, gobject-introspection

我正在编写一个基于 Python3/GObject 的应用程序，它将使用许多类似文件浏览器的小部件。从头开始编写这些或将 GObject Introspection 与 Nautilus 一起使用是最好的选择，如果是这样，我在哪里可以找到或如何生成文档？

我能找到的所有 Nautilus API 文档都非常古老，实际上是 Nautilus-Extension API 或其他人代码中的片段。

**编辑：**似乎 Nautilus 的 GIR 绑定实际上是针对扩展 API 的，而像 Gtk 本身那样彻底的绑定并不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:01:42.423

我无法回答您是否应该使用 Nautilus 的问题……您可能想在[Nautilus 邮件列表](https://mail.gnome.org/mailman/listinfo/nautilus-list)或 IRC 频道（irc.gnome.org 上的#nautilus）上提问。

GObject Introspection 的文档正在进行中，但您可以使用它`g-ir-doc-tool`来生成 Mallard 文件，然后用于`yelp`查看它们（或`yelp-build`将它们转换为 HTML）。[在https://live.gnome.org/GObjectIntrospection/Doctools](https://live.gnome.org/GObjectIntrospection/Doctools)有一些关于该过程的文档

# jquery - jquery 使侧边栏动态填充（因此随着高度的增加），同时从顶部滚动定位然后从底部

> ID：15579144
> 
> 赞同：0
> 
> 时间：2013-03-22T20:16:37.493
> 
> 标签：jquery, css, scroll, positioning

滚动时，我有一个动态填充 ajax 的侧边栏（因此高度不断增加）。

当我希望它保持在顶部或底部时，我可以设置 css 和 jquery。

但是，如果我希望侧边栏在其高度小于窗口高度时保持在顶部，然后在其高度超过窗口高度时从底部定位它，那么技巧是什么？

非常感谢您的关注，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:21:23.697

`.height()`您可以使用jquery中的函数获取 div 高度。有关更多信息，请参阅[http://api.jquery.com/height/](http://api.jquery.com/height/)。

这样你可以使用：

```
if ($('#sidebar').height() > 400) {
    $('#sidebar').addClass('top');
} else {
    $('#sidebar').addClass('bottom');
} 
```

# algorithm - 程序分析入门

> ID：15579145
> 
> 赞同：0
> 
> 时间：2013-03-22T20:16:38.197
> 
> 标签：algorithm, compiler-construction, programming-languages, computer-science, semantics

我正在寻找有关开始进行程序分析的资源。

我在该主题上找到的唯一一本书是 Nielson & Nielson 的书。

除此之外，似乎只有“编译器”书籍，其中“程序分析”会是一章，或者类似的东西。

人们知道其他资源吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:11:56.660

“使用静态分析进行安全编程”可能很有用。

还有一个讲座系列，您可能会觉得有用 [http://santos.cis.ksu.edu/schmidt/Escuela03/home.html](http://santos.cis.ksu.edu/schmidt/Escuela03/home.html)

# c# - WCF - 我如何知道连接到我的计算机的主机名是什么

> ID：15579147
> 
> 赞同：1
> 
> 时间：2013-03-22T20:16:42.010
> 
> 标签：c#, wcf

我怎么知道连接到我的计算机的主机名是什么。

**例子：**

计算机 A 和计算机 B 成为主机，计算机 A 想连接计算机 B。

计算机 A IP：1.2.3.4 主机名：StavComputer **AddServiceEndpoint(typeof(InterfaceForService), BasicHttpBinding1, "StavComputer");

我的计算机 B 和计算机 A 连接到我，我想知道他的主机名是什么，在这种情况下是 StavComputer。

这可能吗？！如果计算机 A 没有主机名，因为他根本没有主机，我会得到什么？！我希望你明白！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:25:29.713

从 OperationContext 中提取远程端点名称/IP，并尝试通过 IP 解析主机名。

```
var prop = OperationContext.Current.IncomingMessageProperties;
var remp = (RemoteEndpointMessageProperty)prop[RemoteEndpointMessageProperty.Name];
var hostEntry = Dns.GetHostEntry(remp.Address);
string hostName = hostEntry.HostName; 
```

# html - div中的不透明度

> ID：15579148
> 
> 赞同：0
> 
> 时间：2013-03-22T20:16:43.720
> 
> 标签：html, css

我有下面的页面，其中列标题是固定的，表体是可滚动的。但是当我滚动数据时，我得到了如图 2 所示的结果。请建议如何摆脱这种情况。这是我的 div 的代码。该表位于下面的 div 内。

```
 <div style="overflow:auto; height:400px; position: absolute;"> 
```

滚动前 ![在此处输入图像描述](../Images/ca174619a44cc298c8fb7645e0320c37.png)

滚动后 ![在此处输入图像描述](../Images/398b7a1ec6c7a18d55f0e2b578edfeef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:30:38.823

您**必须**声明背景颜色，如下所示：

```
#element {
    background: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:30:56.697

请发布您的标记的 JsFiddle 或 Codepen。

该`bgcolor`属性已弃用。使用`background-color: #FFF`或`background: #FFF`代替。另外，请终止您的样式声明，`;`否则您将遇到奇怪的问题。也可能是您没有正确地将样式应用于该标题行，但是如果没有一些示例标记，很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:38:15.033

我注意到有两件奇怪的事情：

1）您使用 div 标签作为表头，我没有看到任何人这样做，也没有看到任何明显的原因。

2) 我听说 position: absolute 会在 IE 中引起一些奇怪的问题。[http://www.impressivewebs.com/absolute-position-css/](http://www.impressivewebs.com/absolute-position-css/)我不确定这是否是主要问题。

# c++ - 错误 LNK2019：多项目解决方案中未解析的外部符号

> ID：15579150
> 
> 赞同：0
> 
> 时间：2013-03-22T20:16:49.050
> 
> 标签：c++, c, visual-studio, linkage

我有一个包含多个项目的视觉工作室解决方案。其中之一，“MyProject”是一个静态库 (.lib)。该项目，在许多其他类中有两个类“A”和“B”。

啊：

```
#pragma once

class A
{
public:
    void foo();
}; 
```

A.cpp：

```
#include A.h

void A::foo(){
        //do something
} 
```

乙：

```
#pragma once

class B
{
public:
    void bar();
}; 
```

B.cpp：

```
#include B.h
#include A.h

void B::bar(){
        A a;
        a.foo();
} 
```

如果没有编译错误，我会收到链接错误：

> OtherProject.lib(B.obj) : 错误 LNK2019: 函数“public: void __thiscall B::bar( void)" (?bar@B@@QAEXXZ)

一切似乎都很好。我确实看到了A.cpp的编译过程。仅构建或链接项目“MyProject”就可以了。但是在尝试构建整个解决方案时，我遇到了错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:16:56.900

事实证明，还有另一个项目`OtherProject`包含 class`B`并使用它的 function `bar()`。我没有很好地阅读错误，也没有注意到链接错误发生在另一个项目中。我所要做的就是包含`A.cpp`在`OtherProject`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:41:36.310

此方法的实现在 A.cpp 中被注释掉：

```
void A::foo(){
        //do something
} 
```

或者`A.cpp`不包含在项目的构建中。在解决方案资源管理器中右键单击 A.cpp 并选择属性以查看它是否从构建中排除。在构建时，您是否看到：

```
1>Compiling...
1>A.cpp 
```

我将此代码输入到我的 Visual Studio 中，它运行良好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-22T07:00:28.667

另一种解决方案是您可以合并 .h 和 .cpp 文件。通过这种方式，您将获得解决方案。就我而言，我确实喜欢这样做并且效果很好

# c# - 使用语音识别将数字添加到标签

> ID：15579153
> 
> 赞同：0
> 
> 时间：2013-03-22T20:17:04.843
> 
> 标签：c#, string, numbers, label, speech-recognition

我在计数时遇到问题`ToString();`我试图让程序在每次用户说出其中一种动物的名字后添加一个数字，例如 1、2 然后 3，从而在计数显示（记分板）上添加一个数字，这将是显示在`lblCount`标签内供用户查看

目前我什么都有这个

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using SpeechLib;
using System.IO;
using System.Speech.Recognition;
using System.Globalization;

namespace SimpleSpeechRecognition
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private SpeechRecognitionEngine recognizer;

        private void Form1_Load(object sender, EventArgs e)
        {

            //speechListBox1.Enabled = true;
            panel1.Enabled = false;
            panel2.Enabled = false;

            pictureBox2.Image = Image.FromFile(@"C:\animals\" + "happy.jpg");
            lblTitle2.Text = "WELCOME";

            pictureBox1.Image = Image.FromFile(@"C:\animals\" + "zoo.jpg");
            lblTitle.Text = "WELCOME";

            speechListBox1.Items.Add("Dog");
            speechListBox1.Items.Add("Elephant");
            speechListBox1.Items.Add("Cat");
            speechListBox1.Items.Add("Bird");
            speechListBox1.Items.Add("Rabbit");

            recognizer = new SpeechRecognitionEngine(new CultureInfo("EN-US"));
            recognizer.SetInputToDefaultAudioDevice();

            Choices choices = new Choices("Dog", "Elephant", "Cat", "Bird", "Rabbit");
            GrammarBuilder m_GrammarBuilder = new GrammarBuilder(choices);
            Grammar m_Speech = new Grammar(m_GrammarBuilder);
            recognizer.LoadGrammar(m_Speech);

            recognizer.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(recognizer_SpeechRecognized);
            recognizer.RecognizeAsync(RecognizeMode.Multiple);
        }

        void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {
                //

            foreach (RecognizedWordUnit word in e.Result.Words)
            {
                int count = 0;
                count += 1;

                switch (word.Text)

                {
                    case "Dog":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "dog.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "DOG";
                        lblCount.Text = count.ToString();
                        break;
                    case "Elephant":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "elephant.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "ELEPHANT";
                        lblCount.Text = count.ToString();
                        break;
                    case "Cat":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "cat.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "CAT";
                        lblCount.Text = count.ToString();
                        break;
                    case "Bird":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "bird.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "BIRD";
                        lblCount.Text = count.ToString();
                        break;
                    case "Rabbit":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "rabbit.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "RABBIT";
                        lblCount.Text = count.ToString();
                        break;
                }
            }
        }

        private void SayPhrase(string PhraseToSay)
        {

            SpeechVoiceSpeakFlags SpFlags = new SpeechVoiceSpeakFlags();
            SpVoice Voice = new SpVoice();
            Voice.Speak(PhraseToSay, SpFlags);

        }

        private void speechListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            SayPhrase(speechListBox1.SelectedItems[0].ToString());
            pictureBox1.Refresh();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void radioButton1_CheckedChanged(object sender, EventArgs e)
        {
            panel1.Enabled = true;
            panel2.Enabled = false;
            speechListBox1.Enabled = true;
            pictureBox1.Enabled = true;
        }

        private void radioButton2_CheckedChanged(object sender, EventArgs e)
        {
            panel1.Enabled = false;
            panel2.Enabled = true;
            speechListBox1.Enabled = false;
            pictureBox1.Enabled = false;
        }
    }
} 
```

**这是我正在为这个标签工作的部分**

```
void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {

            foreach (RecognizedWordUnit word in e.Result.Words)
            {
                int count = 0;
                count += 1;

                switch (word.Text)

                {
                    case "Dog":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "dog.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "DOG";
                        lblCount.Text = count.ToString();
                        break;
                    case "Elephant":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "elephant.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "ELEPHANT";
                        lblCount.Text = count.ToString();
                        break;
                    case "Cat":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "cat.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "CAT";
                        lblCount.Text = count.ToString();
                        break;
                    case "Bird":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "bird.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "BIRD";
                        lblCount.Text = count.ToString();
                        break;
                    case "Rabbit":
                        pictureBox1.Image = Image.FromFile(@"C:\animals\" + "rabbit.jpg");
                        this.pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;
                        lblTitle.TextAlign = ContentAlignment.MiddleCenter;
                        lblTitle.Text = "RABBIT";
                        lblCount.Text = count.ToString();
                        break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:22:54.243

我不确定我是否完全理解您的问题，但我确实看到了一个相当明显的错误：

```
 foreach (RecognizedWordUnit word in e.Result.Words)
        {
            int count = 0;
            count += 1; 
```

每次循环都会将计数重置为 0，然后立即将其加 1，因此您的标签将始终显示为 1。

只需将初始化程序移出循环即可。

```
 int count = 0;
        foreach (RecognizedWordUnit word in e.Result.Words)
        {
            count += 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:23:41.227

如果您想显示程序生命周期内的总计数，则需要将计数变量移动为表单的成员。像这样：

```
public partial class Form1 : Form
{  
     private int count = 0;
     // ...
} 
```

然后将您的事件处理程序更改为：

```
void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {

        foreach (RecognizedWordUnit word in e.Result.Words)
        {
            count += 1; 
```

# java - JSch SFTP 文件下载

> ID：15579161
> 
> 赞同：1
> 
> 时间：2013-03-22T20:17:21.207
> 
> 标签：java, get, sftp, jsch

我正在尝试使用 JSch 将文件从 SFTP 服务器下载到我的本地计算机。无论文件大小如何，它只下载 16371 字节的数据并结束传输。它不会抛出任何异常。如果文件小于 16371 字节，则会成功传输，但对于任何较大的文件，传输都会导致文件损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:25:01.383

实际上我设法解决了这个问题。我更换了：

```
 SftpProgressMonitor monitor = new MySftpProgressMonitor();
    channelSftp.get(sourceFile, destFile, monitor); 
```

和：

```
 channelSftp.get(sourceFile, destFile); 
```

删除进度监视器后，传输成功。我猜这是Jsch内部的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:22:27.743

我在使用特殊的 sftp 服务器时遇到了同样的问题。我独特的解决方案是使用[LFTP](http://lftp.yar.ru/ "LFTP官方页面")，这是一个用于自动化 SFTP 任务的 linux 命令。如果您有 Linux 环境，它非常有用。

PHP 中的示例： $command = set net:timeout 30; 液晶显示器 $directorioDestino; cd /Usr/companies/cdrusr357901/CallCenterRecords/；mget {$prefijoArchivosAuris}*; 再见 lftp -u {$this->user},{$this->password} -e '$command' sftp://{$this->host}

# javascript - 使用（实验性）代码片段功能从 Google Chrome 控制台命令行运行代码片段？

> ID：15579164
> 
> 赞同：29
> 
> 时间：2013-03-22T20:17:32.270
> 
> 标签：javascript, google-chrome, google-chrome-devtools, javascript-debugger

参考：

[在谷歌浏览器中使用新的代码片段功能](https://stackoverflow.com/questions/10470711/chrome-developer-tools-what-is-snippets-support)

我在谷歌浏览器中使用代码片段，所以说我有一个片段文件。check_consistency.js

是否有一个 api 或一个全局对象，我们可以通过它直接从命令行运行代码片段，例如：

```
 window.runSnippet('check_consistency.js') 
```

或者直接调用代码片段中定义的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-07-07T00:25:06.700

## 工作流程提示 1

我还希望看到添加了此功能。同时，也许尝试打开`Sources`哪里（如您所知）您可以选择一个片段并右键单击它以运行它。您可能知道也可能不知道**您可以点击`Esc`此页面，以便在显示代码片段的同时显示控制台**：

![](../Images/7b61a101e24bf6963b733d4d95f2ad63.png)

## 工作流程提示 2

片段[文档](https://developer.chrome.com/devtools/docs/authoring-development-workflow#snippets)还提到

> 快速定位特定文件的能力对于开发人员的工作流程至关重要。DevTools 允许您使用以下快捷方式搜索所有脚本、样式表和片段文件：
> 
> `Ctrl + O (Windows, Linux)`
> `Cmd + O (Mac OSX)`
> 
> 无论您当前所在的面板如何，这都将起作用。

...和...

> 键盘快捷键也可用于轻松执行代码片段 - 只需选择您的代码片段然后使用 Ctrl/Cmd + Enter 来运行它。这复制了 Run (>) 按钮的行为 - 当前位于 Sources 控制台中，但在不久的将来将移入调试器控件。

## 这意味着在控制台中您可以按`Ctrl/Cmd+O`快速选择您的代码段，然后按`Cmd/Control+Enter`运行它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-16T20:38:23.553

当我在网站上多次运行片段时，我有一个解决方法。我将我的代码片段包装在一个函数中并将其分配给一个全局变量。

例如，

```
window.mySnippet = function (value) {
  console.log(value.toUpperCase());
}; 
```

当我运行这个片段时，我现在可以运行

```
mySnippet('hello world');  
-> "HELLO WORLD" 
```

您仍然必须运行一次代码段才能将其加载到内存中，但总比没有好。

# codeigniter - CodeIgniter 将电子邮件放入全局函数中

> ID：15579165
> 
> 赞同：3
> 
> 时间：2013-03-22T20:17:35.723
> 
> 标签：codeigniter, email

我可以使用 CodeIgniter 文档中的示例从控制器内发送电子邮件。我想知道如何将电子邮件代码放在全局函数页面上，这样我就可以通过一个简单的函数调用来访问它。

// 在控制器中

```
emailTest($to, $subject, $message); 
```

// 在全局函数页面上

```
function emailTest($to, $subject, $message) {

    $this->load->library('email');

    $this->email->from('my@example.com', 'My Name');
    $this->email->to($to); 
    $this->email->subject($subject);
    $this->email->message($message);    

    $this->email->send();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:31:23.430

您可以创建一个[助手](http://ellislab.com/codeigniter/user-guide/general/helpers.html)并在需要时将其加载。

```
$this->load->helper('email');
send_email($to, $subject, $message); 
```

* * *

编辑：由于您想使用内置的电子邮件功能，[图书馆](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)将是一个更好的选择：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Library {

    public function __construct()
    {
        $this->CI =& get_instance();
    }

    public function send_email($to, $subject, $msg)
    {
        $this->CI->load->library('email');

        $this->CI->email->from('my@example.com', 'My Name');
        $this->CI->email->to($to); 
        $this->CI->email->subject($subject);
        $this->CI->email->message($message);    

        $this->CI->email->send();
    }

} 
```

然后你可以这样称呼它：

```
$this->load->library('my_library');

$this->my_library->send_email('test@example.com', 'RE: test message','cool message'); 
```

# mysql - 如何以 phpmyadmin 用户身份查看 phpMyAdmin 中的所有数据库？

> ID：15579166
> 
> 赞同：2
> 
> 时间：2013-03-22T20:17:43.560
> 
> 标签：mysql, phpmyadmin

我一直在使用命令行成功地使用 MySQL，并创建了各种数据库（主要用于 CMS）。

我决定尝试使用`phpMyAdmin`我在一本关于 Joomla! 的书中提到的。

但是当我点击 Databases 时，我只看到 information_schema、phpMyAdmin 和 test。

我希望能够管理我所有的数据库（大概提供适当的凭据）。可能相关的事实是，如果我以用户身份登录 mysql`phpmyadmin`并显示数据库；查询，我只看到这三个数据库。

我是否需要某种涉及`show_db_priv`（授予`phpmyadmin`用户）的授权？如果是这样，那么这样做的确切语法是什么？当我为这个用户做一个表演授权时，我可以看到那`show_db_priv`不是其中之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T09:42:13.110

在 phpMyAdmin 中以 MySQL root 用户身份登录。如果尽管提供了正确的密码，您仍无法以 root 身份登录，请确保您在 phpMyAdmin 的 config.inc.php 中有此行​​并设置为 true。

```
$cfg['Servers'][$i]['AllowRoot'] =     true; 
```

如果您没有为 MySQL root 帐户分配密码，则默认密码为空。在这种情况下，请检查 phpMyAdmin 的 config.inc.php 中的 AllowNoPassword 是否设置为 true

```
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T16:28:31.150

不确定这个答案是否相关，因为我在单个站点机器上使用 phpMyAdmin 作为 WAMP 的一部分。尽管如此，它可能会帮助其他人遇到 phpMyAdmin 不显示现有数据库的问题。

在新机器上安装 WAMP（使用 phpMyAdmin 4.0.4）并使用我的 php 脚本创建一些数据库后，phpMyAdmin 只会显示 information_schema 和测试数据库。

当我从命令提示符运行 mysql 时，数据库就在那里，所以 wtf??

经过一些试验，我发现添加以下行可以解决问题：

> $cfg['Servers'][$i]['auth_type'] = 'config';

注意 config.inc.php 已经有了

> $cfg['Servers'][$i]['user'] = 'root';
> 
> $cfg['Servers'][$i]['AllowNoPassword'] = true;
> 
> $cfg['Servers'][$i]['AllowNoPasswordRoot'] = false;
> 
> $cfg['Servers'][$i]['password'] = 'mypwd';

*   注意： auth_type 参数在[http://wiki.phpmyadmin.net/pma/auth_types](http://wiki.phpmyadmin.net/pma/auth_types)中进行了讨论，但我没有看到任何关于未能显示用户创建的数据库的评论。

*   更多细节：如果没有 auth_type 行，SHOW GRANTS（来自 phpMyAdmin）会产生：

    > 授权使用*。*TO ''@'localhost' 由密码 '*CF74EB88D030BC86A14151B7CE22C8808A19AA4B' 识别

*   使用 auth_type 行，SHOW GRANTS 产生：

> 授予所有特权*。*TO 'root'@'localhost' 由密码 '*CF74EB88D030BC86A14151B7CE22C8808A19AA4B' 和授权选项识别
> 
> GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION

# asp.net - 具有 DropDownList 控制参数的 SqlDataSource 不读取值

> ID：15579167
> 
> 赞同：1
> 
> 时间：2013-03-22T20:17:44.187
> 
> 标签：asp.net, vb.net, data-binding, sqldatasource

我有一个绑定到 SqlDataSource 的下拉列表。

我有另一个绑定到不同 SqlDataSource 的下拉列表。

第二个 SqlDataSource 将第一个下拉列表作为控制参数。

我正在尝试这样做...

```
<asp:SqlDataSource ID="sqlDataSource2" runat="server"
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM Test WHERE Param = @param;"
    CancelSelectOnNullParameter="true">
    <SelectParameters>
        <asp:ControlParameter ControlID="dropDown1" Name="param"
            PropertyName="SelectedValue"
            ConvertEmptyStringToNull="true" />
    </SelectParameters>
</asp:SqlDataSource>

dropDown1.SelectedValue = "someValue"
dropDown2.DataBind() 
```

但我没有得到任何结果。但是，如果我将第二个 SqlDataSource 的控制参数设置为文本框，它就可以工作。例如，这有效：

```
<asp:ControlParameter ControlID="txt" Name="param"
    PropertyName="Text"
    ConvertEmptyStringToNull="true" />

txt.Text = "someValue"
dropDown2.DataBind() 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:21:06.050

我最终弄清楚了这一点。问题是下拉菜单试图绑定两次，就像这个问题中的[问题](https://stackoverflow.com/questions/2201777/sqldatasource-binds-data-twice)一样。

我使用了 Joel Etherton 的建议，现在效果很好。虽然我使用了隐藏控件而不是标签。

# c++ - 对类构造函数的未定义引用，包括 .cpp 文件修复

> ID：15579172
> 
> 赞同：30
> 
> 时间：2013-03-22T20:18:03.440
> 
> 标签：c++, debugging, netbeans, g++

我遇到的问题是，当我为我创建的类调用构造函数时，出现以下错误。

> main.cpp:20: 未定义引用`StaticObject::StaticObject(Graphics*, sf::String,
> sf::Vector2)'

这个问题可以“修复”，像这样在 main.cpp 中为 .cpp 文件添加一个包含。

```
...
#include "GameObjects/StaticObject.cpp"
... 
```

虽然这解决了问题，但这似乎是一个糟糕的解决方案，并且与我之前被告知的内容背道而驰。有没有其他方法可以解决这个问题？我正在使用带有 g++ 的 Netbeans 7.3 来编码/编译这个程序。下面是相关代码。

**主文件**

```
...

#include <SFML/Graphics.hpp>
#include "Graphics/Graphics.hpp"
#include "GameObjects/StaticObject.hpp"

int main(int argc, char** argv) {

    //SETUP
    Graphics graphics;

    background = new StaticObject(&graphics, "Data/Images/BackgroundPlaceholder.png",  sf::Vector2f(0,0));

... 
```

**主文件**

```
...

#include <SFML/Graphics.hpp>
#include "GameObjects/StaticObject.hpp"

...

// Objects
StaticObject *background;
... 
```

**静态对象.hpp**

```
#include <SFML/Graphics.hpp>
#include "../Graphics/Graphics.hpp"

class StaticObject{
public:
    StaticObject();
    StaticObject(Graphics *_graphics, sf::String texture_filename, sf::Vector2f _position);
    StaticObject(const StaticObject& orig);
    virtual ~StaticObject();
private:
    // The sprite stores the position
    sf::Sprite *sprite;
    sf::Texture *texture;
}; 
```

**静态对象.cpp**

```
#include "StaticObject.hpp"
#include <SFML/Graphics.hpp>
#include "../Graphics/Graphics.hpp"

StaticObject::StaticObject(){    
}

StaticObject::StaticObject(Graphics *_graphics, sf::String texture_filename, sf::Vector2f _position) {
    sprite = _graphics->AddSprite(texture_filename);
    sprite->setPosition(_position);
}

StaticObject::StaticObject(const StaticObject& orig) {
}

StaticObject::~StaticObject() {
} 
```

**如果我将以下行添加到 main.cpp，错误就会消失。**

```
#include "GameObject/StaticObject.cpp" 
```

谁能解释一下：

1.  为什么这可以解决问题？

2.  为什么 .cpp 没有通过包含 .hpp 文件来隐式包含？

3.  有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T20:26:45.330

该`undefined reference`错误表明链接器未找到函数/方法（即此处的构造函数）的定义。

```
StaticObject::StaticObject(Graphics*, sf::String,    sf::Vector2<float>) 
```

以及添加以下行的原因：

```
#include "GameObject/StaticObject.cpp" 
```

解决了这个问题，它是否将实现作为一部分引入，`main.cpp`而您的实际实现在`StaticObject.cpp`. 这是解决此问题的***错误方法。***

我没有太多使用 Netbeans，但应该有一个选项可以将所有 .cpp 文件添加到单个项目中，以便 Netbeans 负责将所有`.o`文件链接到单个可执行文件中。

如果`StaticObject.cpp`内置到它自己的库中（我非常怀疑这里是这种情况），那么您可能必须指定该库所在位置的路径，以便链接器可以找到实现。

这是构建程序时理想的情况：

```
Compile: StaticObject.cpp -> StaticObject.o
Compile: main.cpp -> main.o
Link: StaticObject.o, main.o -> main_program 
```

尽管在 gcc/g++ 中有一些方法可以跳过所有中间 .o 文件生成并直接生成`main_program`, 如果您在同一命令行中指定所有源文件（和任何库）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T20:26:22.413

链接器找不到 的定义`StaticObject`，这意味着您尚未编译和链接 StaticObject.cpp。每个 .cpp 文件都需要单独编译，编译器为每个文件生成的目标文件需要提供给链接器。

在 Main.cpp 中包含 StaticObject.cpp 的原因是您告诉预处理器将 StaticObject.cpp 的内容插入到您正在编译的 Main.cpp 中，因此定义成为 Main.cpp 编译输出的一部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T20:31:18.543

包含 cpp 文件会导致编译器将该代码构建为该文件的一部分（您不应该这样做），您需要做的是将 GameObject/StaticObject.cpp 文件编译为其自己的对象，并将 2 个对象链接在一起。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T20:27:54.917

我不太了解 netbeans，但可能 GameObject/StaticObject.cpp 不包含在要编译的源代码中。

这就是为什么如果您在 main.cpp 中手动包含它，他会找到源代码并且一切正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-05T00:28:31.697

我有同样的问题，但我的问题是因为我将 Eclipse CDT 与*Autotools project*一起使用。所以我只好手动添加新的`.h`和`.cpp`文件到对应的`Makefile.am`，然后做一个**project > reconfigure project**，rebuild，就这样了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-23T18:24:53.903

我在 Qt 中遇到了同样的问题，我忘记将类添加到 pro 文件中。显然，如果不将其添加到 pro 文件中，编译器将无法识别它。所以我添加了它，然后再次运行 qmake，这解决了问题。

基本上，您需要在源中添加文件。

# c# - RC4 加密与预期不符

> ID：15579177
> 
> 赞同：1
> 
> 时间：2013-03-22T20:18:13.940
> 
> 标签：c#, .net, algorithm, encryption, cryptography

我在使用银行的网络服务传递信用卡付款时遇到了一些问题。他们需要对出站数据进行 RC4 加密，他们希望这些数据采用十六进制格式。

这是他们给我使用的测试网站：[http ://www.fyneworks.com/encryption/rc4-encryption/index.asp](http://www.fyneworks.com/encryption/rc4-encryption/index.asp)

当我拿一张样本卡，并传入上面表格生成的值时，它们是正确的，并且这张卡被接受了。当我使用下面的 frankencode（从我在互联网上找到的片段拼凑而成）时，十六进制值不正确，并且每次都拒绝卡。在某些情况下，encName 完全关闭。在 encCCNum 和 encCVVTest 的情况下，它大约是正确的一半。在 encExpyMonth 和 encExpyYear 的情况下，它完全正确。

我确定问题出在我的算法中，甚至可能是十六进制转换，但我在密码学编程方面真的没有太多经验，所以我什至不知道从哪里开始调试。有人可以帮帮我吗？这是 C#.net 中的一个 Web 应用程序，顺便说一句。

```
 rc4encrypt rc4 = new rc4encrypt();
 rc4.Password = "B83E13EC";
 rc4.PlainText = sNameTest;
 encName = rc4.EnDeCrypt();
 rc4.Password = "B83E13EC";
 rc4.PlainText = sCCNumTest;
 encCCNum = rc4.EnDeCrypt();
 rc4.Password = "B83E13EC";
 rc4.PlainText = sExpyMonthTest;
 encExpyMonth = rc4.EnDeCrypt();
 rc4.Password = "B83E13EC";
 rc4.PlainText = sExpyYearTest;
 encExpyYear = rc4.EnDeCrypt();
 rc4.Password = "B83E13EC";
 rc4.PlainText = sCVVTest;
 encCVVTest = rc4.EnDeCrypt();

   public class rc4encrypt
    {
        protected int[] sbox = new int[256];
        protected int[] key = new int[256];

        protected string plaintext, password;

        public string PlainText
        {
            set { plaintext = value; }
            get { return plaintext; }
        }

        public string Password
        {
            set { password = value; }
            get { return password; }
        }

        private void RC4Initialize(string strPwd)
        {
            // Get the length of the password
            // Instead of Len(), we need to use the Length property
            // of the string
            int intLength = strPwd.Length;

            // Set up our for loop.  In C#, we need to change our syntax.

            // The first argument is the initializer.  Here we declare a
            // as an integer and set it equal to zero.

            // The second argument is expression that is used to test
            // for the loop termination.  Since our arrays have 256
            // elements and are always zero based, we need to loop as long
            // as a is less than or equal to 255.

            // The third argument is an iterator used to increment the
            // value of a by one each time through the loop.  Note that
            // we can use the ++ increment notation instead of a = a + 1
            for (int a = 0; a <= 255; a++)
            {
                // Since we don't have Mid()  in C#, we use the C#
                // equivalent of Mid(), String.Substring, to get a
                // single character from strPwd.  We declare a character
                // variable, ctmp, to hold this value.

                // A couple things to note.  First, the Mod keyword we
                // used in VB need to be replaced with the %
                // operator C# uses.  Next, since the return type of
                // String.Substring is a string, we need to convert it to
                // a char using String.ToCharArray() and specifying that
                // we want the first value in the array, [0].

                char ctmp = (strPwd.Substring((a % intLength),
                    1).ToCharArray()[0]);

                // We now have our character and need to get the ASCII
                // code for it.  C# doesn't have the  VB Asc(), but that
                // doesn't mean we can't use it.  In the beginning of our
                // code, we imported the Microsoft.VisualBasic namespace.
                // This allows us to use many of the native VB functions
                // in C#

                // Note that we need to use [] instead of () for our
                // array members.
                key[a] = Microsoft.VisualBasic.Strings.Asc(ctmp);
                sbox[a] = a;
            }

            // Declare an integer x and initialize it to zero.
            int x = 0;

            // Again, create a for loop like the one above.  Note that we
            // need to use a different variable since we've already
            // declared a above.
            for (int b = 0; b <= 255; b++)
            {
                x = (x + sbox[b] + key[b]) % 256;
                int tempSwap = sbox[b];
                sbox[b] = sbox[x];
                sbox[x] = tempSwap;
            }
        }

        public string EnDeCrypt()
        {
            int i = 0;
            int j = 0;
            string cipher = "";

            // Call our method to initialize the arrays used here.
            RC4Initialize(password);

            // Set up a for loop.  Again, we use the Length property
            // of our String instead of the Len() function

            for (int a = 1; a <= plaintext.Length; a++)
            {
                // Initialize an integer variable we will use in this loop
                int itmp = 0;

                // Like the RC4Initialize method, we need to use the %
                // in place of Mod
                i = (i + 1) % 256;
                j = (j + sbox[i]) % 256;
                itmp = sbox[i];
                sbox[i] = sbox[j];
                sbox[j] = itmp;

                int k = sbox[(sbox[i] + sbox[j]) % 256];

                // Again, since the return type of String.Substring is a
                // string, we need to convert it to a char using
                // String.ToCharArray() and specifying that we want the
                // first value, [0].

                char ctmp = plaintext.Substring(a - 1, 1).ToCharArray()
                    [0];

                // Use Asc() from the Microsoft.VisualBasic namespace
                itmp = Microsoft.VisualBasic.Strings.Asc(ctmp);

                // Here we need to use ^ operator that C# uses for Xor
                int cipherby = itmp ^ k;

                // Use Chr() from the Microsoft.VisualBasic namespace                
                cipher += Microsoft.VisualBasic.Strings.Chr(cipherby);
            }

            // Return the value of cipher as the return value of our
            // method

            //Convert to hexadecimal - added by BN
            string finalcipher = string.Empty;
            char[] values = cipher.ToCharArray();
            foreach (char letter in values)
            {
                // Get the integral value of the character. 
                int value = Convert.ToInt32(letter);
                // Convert the decimal value to a hexadecimal value in string form. 
                finalcipher += String.Format("{0:X}", value);

            }

            return finalcipher;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:31:26.283

不要扮演你自己的加密代码。它通常是错误的。[Bouncy castle](http://www.bouncycastle.org/csharp/)有一个支持 RC4 的 C# 实现。为什么不使用它？

# java - 屏幕上的 Java 字符串下推

> ID：15579178
> 
> 赞同：0
> 
> 时间：2013-03-22T20:18:14.107
> 
> 标签：java

我是stackoverflow的新手。不过，我对 Java 有这个问题，可能有一种简单的方法可以做到，但我不知道怎么做。

这是我的问题。我有我的游戏，在按下按钮 (X) 时，在游戏左上角的标题下方的屏幕上显示文本。这很好用，但可以说我有多个。如果我按 N （可能是第五个），它会在屏幕上随机显示。但是如果我按下了所有按钮，它看起来会很正常，因为所有按钮都会相互对齐。

这是我必须在游戏标题下写一行的代码。

```
 var8.drawStringWithShadow("Test", 2, 11, 0xFFFF); 
```

第一个参数是文本，第二个是x，第三个是y。

现在，我让它在按下另一个键时绘制另一个。

```
 var8.drawStringWithShadow("Test2", 2, 20, 0x008B); 
```

正如你所看到的，y 参数增加了 9，所以它会在另一个之下。

我想要做的是让 Y 始终相同（11），但是，如果文本已经存在，请将其向下推。

所以可以说我显示了“测试”。但是然后我按下按钮启用“Test2”，我希望它取代“Test”，但不覆盖它，当按下它时，如果“Test”或任何其他按钮被启用，它将增加“测试”的 y 或另一个 9。

我希望有一个简单的方法来做到这一点，如果有，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:22:35.680

为那里有多少个字符串做一个计数器，然后让 `y = counter*9 + 11`

# java - 适配器和列表视图在根活动中不显示任何内容

> ID：15579179
> 
> 赞同：0
> 
> 时间：2013-03-22T20:18:16.553
> 
> 标签：java, android, android-listview

我正在为Android创建一个“滑入”（facebook风格）菜单，这个菜单将使用onItemClickListener呈现为可点击的ListView。但是，当我为列表视图使用自定义适配器时，它什么也不显示。

运行它的活动是我的“根活动”，这意味着所有其他活动都扩展了它。如果我将相同的代码放在另一个活动中，它可以使用这个适配器来渲染列表视图。此外， .setOnItemClickListener 似乎在根活动中什么都不做。创建此视图时，有些东西没有像应有的那样设置，有什么想法吗？这是代码：

```
public class RootActivity extends Activity {
public static final String KEY_TITLE = "title";
public static final String KEY_ID = "id";

ActionBar actionBar;
ListView slideMenu;

ListMenuAdapter adapter;
ArrayList<HashMap<String, String>> menuOptions;
private String[] menuItems={"Budget","Charts","By category"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rootview);

    menuOptions = new ArrayList<HashMap<String, String>>();
    slideMenu = (ListView) findViewById(R.id.slideMenuList);
    slideMenu.setSaveEnabled(false);

    HashMap<String, String> map;
    for(int i = 0 ; i<menuItems.length ; i++ ) {
        map = new HashMap<String, String>();
        map.put(KEY_TITLE, menuItems[i]);
        map.put(KEY_ID, ""+i);
        menuOptions.add(map);
    }

    adapter = new ListMenuAdapter(this, menuOptions);
    slideMenu.setAdapter(adapter);

    Log.println(9, "slidemendeb2", ""+slideMenu.getAdapter().getCount());
    slideMenu.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Log.println(9, "Testitemclick", ""+arg0);
        }
    });
}} 
```

扩展 RootActivity 的另一个活动的示例：

```
public class SpentMain extends RootActivity {
public static final String KEY_TITLE = "title";
public static final String KEY_ID = "id";

ArrayList<Tag> tags;
ArrayList<Integer> tagInts = new ArrayList<Integer>();
TagDataSource tagDataSource;
Button costButton;
EditText sum;
Boolean removed = false;

ActionBar actionBar;

CheckBox checkBox;
ListView list;
ListCheckboxAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.rootview);
    costButton = (Button) findViewById(R.id.costadd);
    sum = (EditText) findViewById(R.id.editText1);

    ArrayList<HashMap<String, String>> tagsList = new ArrayList<HashMap<String, String>>();
    tagDataSource = new TagDataSource(this);
    tagDataSource.open();
    tags = tagDataSource.getAllTags();
    tagDataSource.close();
    HashMap<String, String> map;
    for(int i = 0 ; tags.size()>i ; i++ ) {
        map = new HashMap<String, String>();
        map.put(KEY_TITLE, tags.get(i).getTitle().toString());
        map.put(KEY_ID, tags.get(i).getId().toString());
        tagsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    adapter = new ListCheckboxAdapter(this, tagsList);
    list.setAdapter(adapter);

    // Row click event
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            for(int i = 0; tagInts.size()>i; i++) {
                if(tagInts.get(i)==position) {
                    tagInts.remove(i);
                    removed = true;
                }
            } 

            if(removed==false) {
                tagInts.add(position+1);
            }
            removed = false;

            for(int i=0; i<((ViewGroup)view).getChildCount(); ++i) {
                View nextChild = ((ViewGroup)view).getChildAt(i);
                if(nextChild.getClass()==android.widget.CheckBox.class) {
                    checkBox = (CheckBox) nextChild;
                    if(checkBox.isChecked()==true) {
                        checkBox.setChecked(false);
                    } else {
                        checkBox.setChecked(true);
                    }
                }
            }
        }
    });} 
```

正如我所说，如果我使用这个适配器在 SpentMain 中渲染它，它可以正常工作，但不能在 RootActivity 中。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:26:37.367

好的，所以我设法解决了这个问题，我所做的是将代码从 RootActivity 中的 onCreate 中移出并移到其 on 方法“buildSideMenu()”中。然后我在我的 SpentMain.class onCreate 方法中调用该方法，如下所示：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rootview);
    super.buildSideMenu();                                                     
} 
```

我注意到如果我在 setContentView(R.layout.rootview) 之前调用 super.buildSideMenu() 它将不起作用。所以问题是，由于 super.onCreate 是在 setContentView 之前运行的，所以在构建我的菜单时可能没有正确设置一些东西。希望这可以帮助别人！

# magento - 通过 Ajax 将自定义选项应用于产品

> ID：15579192
> 
> 赞同：0
> 
> 时间：2013-03-22T20:19:09.757
> 
> 标签：magento

有没有人成功通过 Ajax 将自定义选项应用于产品对象。IE。当我选择更改产品价格的自定义选项时，将触发 ajax 请求。

我在产品视图页面中有一个取决于产品价格的 ajax 块。由于 Magento 在将产品添加到购物车后应用自定义选项，因此我发现很难用我更新的产品价格呈现 ajax 块。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:25:22.720

试试这个模块，它很好的 ajax 购物车，它有你需要的东西，你可以轻松地自定义它 [https://github.com/hws47a/VF_AjaxCart](https://github.com/hws47a/VF_AjaxCart)

# javascript - 在 AnyTime 日期选择器中以编程方式设置时区偏移

> ID：15579193
> 
> 赞同：0
> 
> 时间：2013-03-22T20:19:22.127
> 
> 标签：javascript, anytime

我一直在使用 AnyTime 日期选择器：http://www.ama3.com/anytime/[我](http://www.ama3.com/anytime/)现在需要设置 TimeZone 并使用 javascript 更新 AnyTime 日期选择器。只有我似乎找不到这样做的选项，而且我不完全是 Javascript 英雄。

我想我已经把它缩小到`askOffset: function( event )`在线功能`1919`但不能完全弄清楚下一步该做什么。我不知道缩写变量的含义，我一直在随机尝试，但无法弄清楚。

我这样做的原因是因为我在屏幕上的其他地方有选择下拉菜单（看起来更漂亮），我还希望能够从 cookie 加载保存的时区。

我还发现了一些可能有用的文档：在 AnyTime 页面上`utcFormatOffsetImposed`。`utcParseOffsetAssumed`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:22:37.420

选择器会自动从输入字段中的值解析时区，因此如果要设置特定时区，只需使用使用相同时区的值初始化输入字段即可。

`utcFormatOffsetImposed`并且`utcParseOffetAssumed`可以用来强制特定的时区转换`AnyTime.Converter`，所以如果你想使用转换器来初始化字段，你可以这样做：

```
<input type="text" id="myField"/>
<script>
$(function(){
var myFormat = '%r %@';
var myConv = new AnyTime.Converter({format:myFormat});
myConv.utcFormatOffsetImposed( -330 );
$('#myField').
  AnyTime_picker({format:myFormat}).
  val( myConv.format(new Date()) );
});
</script> 
```

当然，将格式字符串替换为您想要的任何内容，只要它包含`%#`, `%+`, `%-`, `%;`,`%;`或`%@`用于时区信息。

# java - 使用扫描仪从文件中读取

> ID：15579196
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:19:30.733
> 
> 标签：java, java.util.scanner

我在读取文件时遇到了一些问题。我认为解释正在发生的事情的最好方法是向您展示代码。

```
 File x = new File("D:\\player.txt");
   try {
        e = new Scanner(x);
        while (e.hasNext()) {

             playername = e.next();
             playerlevel = e.next();
             playerstrenght = e.next();
             playerdefense = e.next();
             playersoul = e.next();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:21:24.207

每次调用`next()`时，您都需要确保它有要阅读的元素，换句话说，您需要调用`hasNext()`. 在这里，您只需调用`hasNext()`一次，然后多次调用 next()。如果它只有一个元素并且进入了while循环怎么办，但是对于其他`next()`调用你会得到错误

```
 File x = new File("D:\\player.txt");
try {
    e = new Scanner(x);
    while (e.hasNext()){

     playername = e.next();
     if(e.hasNext()){
     playerlevel = e.next();
     }

     if(e.hasNext()){
     playerstrenght = e.next();
      }
     if(e.hasNext()){
        playerdefense = e.next();
      }
      if(e.hasNext()){
        playersoul = e.next();
      }

} 
```

上面的代码只是为了告诉你你做错了什么。这是问题的非常粗略的解决方案。

# ruby-on-rails - 在 Rails 3.2 中查询日期范围不起作用

> ID：15579197
> 
> 赞同：0
> 
> 时间：2013-03-22T20:19:37.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个生成事件报告的报告页面。有一个日期选择器，用户可以输入一个日期范围（例如 3 月 1 日 - 3 月 20 日）并返回事件的 :start_at 在该范围内开始的所有事件。我最近从 Rails 3.0.11 升级到 Rails 3.2.13（我很小心地直接关注 RailsCasts 剧集，从 3.0 跳到 3.1，然后从 3.1 跳到 3.2）并注意到我的报告不再有效，但我没有做任何报告更改事件控制器或事件模型。我的代码如下所示：

**events_controller.rb**

```
def reports
  if !params[:report_start].blank? && !params[:report_end].blank?
    @events = current_user.events.report(params[:report_start], params[:report_end])
  else
    @events = current_user.events.where(params[:search]).order(sort_column + " " + sort_direction)
  end

  respond_to do |format|
    format.html do
      @events = @events.paginate(:per_page => 5, :page => params[:page]) 
    end
    format.xml  { render :xml => @events }
    format.pdf do
      pdf = ReportPdf.new(@events)
      send_data pdf.render, filename: "Event_Report.pdf",
                          type: "application/pdf"
    end
  end
end 
```

**事件.rb**

```
def self.report(report_start, report_end)
  where(:start_at => report_start.to_date..report_end.to_date)
end 
```

像这样的查询语法在升级过程中的某个地方是否发生了变化？

我确认 Rails 仍然以相同的格式保存日期，并且在其他任何地方都可以正常工作。Rails 控制台中的日期输出如下所示：

```
start_at: "2013-04-25 00:00:00" 
```

任何帮助将不胜感激，因为这让我发疯并且对我来说看起来是正确的。谢谢！

**编辑：**我在该主题上找到**[了这篇 Stack Overflow 帖子](https://stackoverflow.com/a/9962985/1609347)**，看起来回复说要按我的方式做，但什么也没发生。

单击生成报告后，URL 确实发生了变化，生成的 URL 如下所示：

```
http://localhost:3000/reports?utf8=%E2%9C%93&direction=&sort=&event%5Breport_start%5D=&event%5Breport_end%5D=&commit=Generate+Report 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:28:26.143

我知道我正在回答我自己的问题，但我想发布解决方案，以防其他人遇到这个问题，因为我能够让它工作。问题似乎是由于 Rails 处理时间不同。新代码如下：

[http://pastie.org/7107095](http://pastie.org/7107095)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:38:09.647

尝试这个：

```
def self.report(report_start, report_end)
  where('start_dt >= ? and end_dt <= ?',report_start,report_end)   
end 
```

# java - Android蓝牙基本代码

> ID：15579202
> 
> 赞同：-2
> 
> 时间：2013-03-22T20:20:02.967
> 
> 标签：java, android, mobile, bluetooth

我正在尝试编写一个与我的微处理器板交互的应用程序，并最终控制直升机的方向和运动（用于学校项目）。我以前从未编写过安卓应用程序，所以我从网站下载了这些东西并创建了基本应用程序，你可以在其中输入内容，按下按钮，它会返回你写的内容。这很有意义，对我有用。现在我需要让蓝牙正常工作，但说明不像开始的步骤那么清楚。有人可以向我提供使用蓝牙的基本应用程序的代码吗？我真的很想编译它，看看它是如何工作的，并通过代码更好地理解这些东西......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:28:19.223

看看 Android 开发 [http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)上的一个很好的示例应用程序

和

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/14768-android-bluetooth-bluetoothadmin-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/14768-android-bluetooth-bluetoothadmin-tutorial.html)

祝一切顺利

# apache - 如何访问安装在 Hyper-V 上的 Web 服务器

> ID：15579216
> 
> 赞同：4
> 
> 时间：2013-03-22T20:21:14.067
> 
> 标签：apache, ubuntu, hyper-v

我已经使用 Hyper V 在 Windows 8 上安装了 Ubuntu。还安装了 Apache 2，我有一个想法，即我将把它用作 Web 开发环境。我设置了一个外部开关，以便我的 ubuntu 安装可以访问互联网。到目前为止，一切都在顺利进行。我遇到的问题是我不知道如何从我的机器访问 Web 服务器。我可以获取 ubuntu 获取的 IP 地址并将其输入到我的浏览器中，然后我被告知“它有效！”。这一切都很好，但我在多个网络之间移动，我不应该每次都查找 IP 地址，这不利于安装多个站点。我只想能够输入类似的东西

```
"http://mytestserver/" 
```

进入我的浏览器来访问它。

任何有关如何正确设置的指示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:22:26.413

我一直在 VM 来宾中使用桥接网络取得最大成功，并且 definitley 建议您使用该选项。然后你可以做的和我所做的就是为服务器分配一个静态 IP 并分配主机名，如下所示。您必须知道可用的 IP 地址，或者如果您在网络内部，您可以使用 192.168.1.x。

最简单的方法是在 /etc/network/interfaces 中分配一个静态 IP，用您的网络的正确条目替换 0.0.0.0

```
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
 address 0.0.0.0.0
 netmask 0.0.0.0.0
 gateway 0.0.0.0.0
 broadcast 0.0.0.0.0
 dns-nameservers 0.0.0.0.0 0.0.0.0.0 
```

然后编辑您的 /etc/hosts 文件并添加该静态 IP 并添加主机名 mytestserver。您将已经拥有 localhost 条目，可能还有其他条目。只需确保将您在接口中分配的静态 IP 地址分配给 mytestserver。您可能还必须在您的机器主机文件中创建相同的条目，因为它没有 DNS 记录。

```
127.0.0.1   localhost
0.0.0.0 mytestserver 
```

# mysql - 在远程机器上加载数据文件

> ID：15579221
> 
> 赞同：22
> 
> 时间：2013-03-22T20:21:44.530
> 
> 标签：mysql, linux, unix

我将如何在远程数据库（不同的机器）上使用本地文件执行以下命令？

```
$MYSQL_PATH/mysql -u root -h remote.net files -e "
    LOAD DATA INFILE '$1'
    INTO TABLE $TABLE_NAME
    FIELDS TERMINATED BY ','
      (size, @d2, @d3, @d4, @d5, path) 
```

问题似乎是 INFILE at`/tmp/infile.txt`没有被远程识别。完成上述任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-22T20:33:04.927

`LOAD DATA INFILE`在运行 MySQL 服务器的机器上加载文件。

用于`LOAD DATA LOCAL INFILE`加载位于客户端计算机上的文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T20:51:45.157

执行此操作时不要忘记包括`--local-infile=1`：

```
$MYSQL_PATH/mysql -u root -h remote.net files --local-infile=1 -e "
    LOAD DATA LOCAL INFILE... 
```

# javascript - Ember 中的详细日志记录

> ID：15579222
> 
> 赞同：2
> 
> 时间：2013-03-22T20:21:45.793
> 
> 标签：javascript, debugging, logging, console, ember.js

我现在正试图绕过 Ember，但所有的魔法都让这变得困难。

我已经设置了`LOG_TRANSITIONS: true`，`Ember.LOG_BINDINGS = true;`这给了我一些到控制台的最小日志记录，但我真的需要更多。

当 Ember 自动创建控制器、视图和模板时，我特别难以看到发生了什么。

有没有办法记录框架的这一方面 - 查看 Ember 在哪里寻找模板/视图/控制器以及它何时自行创建。

例如，我设置了以下路线：

```
App.Router.map(function() {

  this.route("example_items", {path: "/"});

}); 
```

和：

```
App.ExampleItemsRoute = Ember.Route.extend({
  model: function() {
    return App.ExampleItem.find();
  }

}); 
```

Ember 呈现我的 ApplicationController 及其`application.handlebars`模板：

```
<header class="page-header">
  <h1>Application Template</h1>
</header>
{{outlet}} 
```

但无法呈现我的`example_items.handlebars`模板。我没有收到任何异常或警告，如果我检查 DOM，我可以看到 ember 已在其位置创建了一个通用视图。

绑定日志显示 Ember 已转换为`example_items`，但它似乎没有使用我的 ExampleItemsController、ExampleItemsView 或模板。

如果我没有收到错误或消息，我该如何调试这种情况？

编辑：

App.ExampleItems 视图：

```
App.ExampleItemsView = Ember.CollectionView.extend({
  templateName: 'example_items'
}); 
```

和 App.ExampleItemsController：

```
App.ExampleItemsController = Ember.ArrayController.extend({

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:19:28.373

这是您的问题：`CollectionView`不会使用您的模板。它将一个数组作为其`content`属性（通常设置为与控制器的绑定）并手动创建子视图。如果没有`content`集合，它将显示为空白视图。

如果你添加`classNames: ['my-view']`到你的视图定义，你应该看到它实例化和插入的视图实际上是你的视图类，只是空的。添加`contentBinding: 'controller'`，它也应该为数组中的每个项目呈现 itemViews。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T22:40:22.550

> 当 Ember 自动创建控制器、视图和模板时，我特别难以看到发生了什么。
> 
> 有没有办法记录框架的这一方面 - 查看 Ember 在哪里寻找模板/视图/控制器以及它何时自行创建。

是的。使用最新的 ember，您现在`LOG_ACTIVE_GENERATION`可以在 ember 为您生成某些内容时查看 console.log 输出。

另一个可能有用的新设置是`LOG_VIEW_LOOKUPS`

# email - 可以在电子邮件中安全使用的最大 url 长度是多少？

> ID：15579224
> 
> 赞同：5
> 
> 时间：2013-03-22T20:22:00.870
> 
> 标签：email, url, hyperlink, truncation

我的网站发送了一封电子邮件，其中包含一个链接。最近我们收到了很多错误，表明我们发送的电子邮件中的 URL 出现了乱码。不幸的是，我们没有任何日志表明他们试图访问的网址是什么。我已经排除了许多可能性（错误的数据、错误的 url 编码等）我唯一没有排除的是，我们的用户电子邮件客户端可能会截断 url。每个用户的 URL 略有不同，但通常 URL 的长度为 210 - 220 个字符。

我的问题：根据经验，可以在电子邮件客户端中安全发送的最大 url 长度是多少，以确保一致的行为？

**更新**

我知道有很多关于最大 URL 长度的问题，但我的问题是特定于电子邮件客户端中的超链接的，我似乎找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:40:03.967

**好风格推荐**[*网址长度<=推荐行长*]

URL 应该放在一行中，单个电子邮件行*应该*是 78 个字符（减去至少两个用于引用回复的字符）。

[https://www.rfc-editor.org/rfc/rfc5322.txt](https://www.rfc-editor.org/rfc/rfc5322.txt)

> 2.1.1。行长限制
> 
> 该规范对一行中的字符数有两个限制。每行字符必须不超过 998 个字符，并且应该不超过 78 个字符，不包括 CRLF

# python - 改进归并排序

> ID：15579226
> 
> 赞同：0
> 
> 时间：2013-03-22T20:22:01.673
> 
> 标签：python, algorithm

我正在练习合并排序，我很好奇我的第二个版本是否比第一个更好——这似乎是在内存需求方面，因为我从列表中弹出而不是仅仅移动索引

版本 1：

```
def mergesort(L):
    if len(L)<=1: return L
    pivot=len(L)/2
    left=mergesort(L[:pivot])
    right=mergesort(L[pivot:])
    i=j=0
    sortedArr=[]
    while i<len(left) and j<len(right):
        if left[i]<right[j]:
            sortedArr.append(left[i])
            i+=1
        else:
            sortedArr.append(right[j])
            j+=1
    return sortedArr + left[i:] + right[j:] 
```

版本 2

```
def mergesort(L):
    if len(L)<=1: return L
    pivot=len(L)/2
    left=mergesort(L[:pivot])
    right=mergesort(L[pivot:])
    sortedArr=[]
    while left!=[] and right!=[]:
        if left[0]<right[0]:
            sortedArr.append(left.pop(0))
        else:
            sortedArr.append(right.pop(0))
    return sortedArr + left + right 
```

如果不涉及并行化，是否有任何方法可以进一步改进版本 2，假设它优于版本 1？到目前为止，我将如何描述这两个版本的内存要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:12:34.403

为什么不使用集合中的双端队列？它会降低 popleft() 操作的成本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:42:08.367

对于 list `L`，`L[:n]`操作是Python 中的`O(n)`时间、`O(n)`空间（它创建一个包含`n`元素的新列表）。

给定`a`, `b`,`c`列表`a + b + c`是`O(n)`时间和空间，其中`n`是`len(a) + len(b) + len(c)`（它还创建了一个包含`n`元素的新列表）。

因此，每次调用都`mergesort()`需要[`T(n) = 2T(n/2) + O(n)`](http://www.wolframalpha.com/input/?i=T%28n%29+%3D+2T%28n%2F2%29+%2B+n)时间和空间，即`T(n) = O(n*log(n))`.

由于`left.pop(0)`这是`O(len(left))`操作，您的第二个版本具有更差的时间复杂度。第二个版本的内存要求与第一个版本渐近相同。

这是具有相同结构的`O(n*log(n))`时间、`O(n)`空间解决方案（使用 Python 3.3+ 语法）：

```
def mergesort(L):
    return list(merge_sort_gen(L, 0, len(L)))

def merge_sort_gen(L, start, n): # O(n*log(n)) time, O(n) space
    if n == 1:  # a list of one element is always sorted
        yield L[start]
    elif n > 1: # sort halves and merge them
        half = n // 2
        yield from merge(merge_sort_gen(L, start, half),
                         merge_sort_gen(L, start + half, n - half)) 
```

where`merge()`合并两个排序的迭代器。您可以使用[`heapq.merge()`](http://docs.python.org/2/library/heapq.html#heapq.merge)或：

```
from functools import partial

def merge(sorted_a, sorted_b, done=object()): # O(n) time, O(1) space
    next_a, next_b = partial(next, sorted_a, done), partial(next, sorted_b, done)

    a, b = next_a(), next_b()
    while a is not done and b is not done:
        if b < a:
            yield b
            b = next_b()
        else:
            yield a
            a = next_a()

    item, rest = (a, sorted_a) if b is done else (b, sorted_b)
    yield item #XXX at least one of sorted_a or sorted_b must be non-empty
    yield from rest 
```

您可以[在 Python Tutor 一步一步地遵循代码](http://pythontutor.com/visualize.html#code=from+functools+import+partial%0A%0Adef+merge_sort_gen(L,+start,+n)%3A+%23+O(n*log(n))+time,+O(n)+space%0A++++if+n+%3D%3D+1%3A++%23+a+list+of+one+element+is+always+sorted%0A++++++++yield+L%5Bstart%5D%0A++++elif+n+%3E+1%3A+%23+sort+halves+and+merge+them%0A++++++++half+%3D+n+//+2%0A++++++++yield+from+merge(merge_sort_gen(L,+start,+half),%0A+++++++++++++++++++++++++merge_sort_gen(L,+start+%2B+half,+n+-+half))%0A%0A%0Adef+merge(sorted_a,+sorted_b,+done%3Dobject())%3A+%23+O(n)+time,+O(1)+space%0A++++next_a,+next_b+%3D+partial(next,+sorted_a,+done),+partial(next,+sorted_b,+done)%0A%0A++++a,+b+%3D+next_a(),+next_b()%0A++++while+a+is+not+done+and+b+is+not+done%3A%0A++++++++if+b+%3C+a%3A%0A++++++++++++yield+b%0A++++++++++++b+%3D+next_b()%0A++++++++else%3A%0A++++++++++++yield+a%0A++++++++++++a+%3D+next_a()%0A+++%0A++++item,+rest+%3D+(a,+sorted_a)+if+b+is+done+else+(b,+sorted_b)%0A++++yield+item%0A++++yield+from+rest%0A%0A++++%0Ax+%3D+%5B3,+1,+2%5D%0Aprint(list(merge_sort_gen(x,+0,+len(x))))&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=3&curInstr=0)。

`yield from iterable`产生相同的项目（但内部细节不同）：

```
for item in iterable:
    yield item 
```

请参阅解释[的 Python`yield`关键字](https://stackoverflow.com/a/231855/4279)。

# ios - dequeueReusableCellWithIdentifier 然后不使用单元格？

> ID：15579228
> 
> 赞同：1
> 
> 时间：2013-03-22T20:22:10.533
> 
> 标签：ios, uitableview, memory-leaks, uikit

如果我打电话：

```
-[UITableView dequeueReusableCellWithIdentifier] 
```

然后我选择**不在**此方法中重用单元格

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

是否一定要引入泄漏？我的猜测是，`dealloced`一旦自动释放池耗尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T21:40:46.433

是的，这会导致泄漏。通过子类化经验尝试`UITableViewCell`：

```
static int instances = 0;
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        NSLog(@"Init! instances=%d", instances++);
    }
    return self;
}

-(void)dealloc {
    NSLog(@"Dealloc! instances=%d", --instances);
} 
```

如果你不使用从`dequeueReusableCellWithIdentifier`你那里回来的细胞，就会有泄漏。

这个问题有两种解决方案：

1.  `dequeueReusableCellWithIdentifier`使用你应该使用的结果或
2.  `nil`用作`reuseIdentifier`; _ 则不会引入泄漏。这是最好的解决方案，除非您的表有很多行，并且您不想处理重用的混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:00:25.947

是的，`dequeueReusableCellWithIdentifier`返回一个自动释放的对象，并且不会导致内存泄漏。

但是，如果您选择不重用单元格（无论出于何种原因），则无需先调用`dequeueReusableCellWithIdentifier`。

*更新：*您可以使用以下代码检查内部重用队列中存储了多少单元格：

```
NSDictionary *reuseDict = [self.tableView valueForKey:@"reusableTableCells"];
NSArray *reuseArray = [reuseDict objectForKey:CellIdentifier];
NSLog(@"%d", [reuseArray count]); 
```

我使用 Master-Detail Xcode 应用程序对此进行了测试，在该应用程序中我删除了对`dequeueReusableCellWithIdentifier`. 重用队列中的单元格数量增加到横向最多 17 个，纵向最多 23 个。这正是可见细胞的数量加一。所以这个数量确实是有限的，即使你从不重复使用单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-05T11:52:42.063

如果您不返回由`dequeueReusableCellWithIdentifier`in返回的 UITableViewCell，`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;`则它可能会造成泄漏，具体取决于您在做什么。当 table view 释放时，返回的单元格`dequeueReusableCellWithIdentifier`会自动释放，因为 table view 持有对该方法返回的每个单元格的引用。

例如，如果您像这样`dequeueReusableCellWithIdentifier`反复调用，您将遇到问题`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
    // calculate height
    // ...
} 
```

在上面的代码`dequeueReusableCellWithIdentifier`中，每次调用这个方法时都会返回新的单元格，所以当你滚动表格视图时内存使用会增加。但是，在稍后的某个时间点，这些分配的单元格`dequeueReusableCellWithIdentifier`将在重新释放表视图时自动释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T22:03:04.443

不，这不会导致泄漏，但也不一定是内存高效的。如果您希望自动为您处理所有这些单元重用杂务，请考虑使用诸如优秀的 Sensible TableView（免费）之类的框架。

# node.js - 用户被覆盖但仅在 Node.js/Mongoose/Passport/Connect-Mongo 应用程序中有时

> ID：15579233
> 
> 赞同：1
> 
> 时间：2013-03-22T20:22:29.020
> 
> 标签：node.js, mongoose, passport.js, mlab

我正在使用 Heroku/Mongolab（我已经用 MongoHQ 尝试过），标题显示了我的设置。这是我的 package.json：

```
"name": "metatf-web",
"version" : "0.0.3",
"dependencies": {
    "express": "*",
    "ejs": ">=0.4.2",
    "passport": "*",
    "passport-steam": "*",
    "validator": "*",
    "mongoose" : "*",
    "connect-mongo" : "latest",
    "mongodb" : "latest"
} 
```

基本上，当我创建一个新用户时，我的数据库会覆盖数据库中的一个用户，但只是有时。这是我的用户架构：

```
/**
 * Module dependencies
 */
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

/**
 * User Schema
 */
module.exports = function() {
  var Users = new Schema({
    steamid : { type: String }
    , regdate : { type: Date, default: Date.now }
    , avatar  : { type: String, default: "none" }
    , isadmin : { type: String, default: "no" }
  });
  mongoose.model("Users", Users);
}; 
```

这是我用来确定用户是否在数据库中的函数，如果不是，则为：

```
var checkIfUserAddToDbIfNot = function(req, res, next) {
  var steamID = req.user;
  require('./controllers/user_controller').get(steamID, function(err, doc) {
    console.log(doc);
    if (!doc) { // User not found
      require('./controllers/user_controller').create(steamID);
      console.log('User added');
    }
  });
  return next();
}; 
```

我的用户控制器（CRUD）：

```
/**
 * Module dependencies.
 */
 var mongoose = require('mongoose')
   , Users = mongoose.model("Users")
   , user = new Users();

// Create
exports.create = function (steamID) {
  if (steamID == 76561197991291041) { // Add me as an admin for when database resets.
    user.isadmin = 'yes';
  } else {
    user.isadmin = 'no';
  }
  user.steamid = steamID;
  user.save(function (err, callback) {
    if (err) throw err;
    console.log('User ' + user.steamid + ' added');
    console.log('Admin: ' + user.isadmin);
  });
};

// Read
exports.get = function (steamID, fn) {
  Users.findOne({ steamid: steamID }, function (err, doc) {
    if (err) return err;
    if (doc) {
      fn(null, doc);
    } else {
      fn(null, null); // User not found
    }
  });
}; 
```

这里是调用检查用户函数的地方：

```
app.get('/auth/steam/return',
  passport.authenticate('steam', { failureRedirect: '/' }), checkIfUserAddToDbIfNot, function (req, res) {
    res.redirect('/');
  }); 
```

最后是我的 connect-mongo 东西：

```
app.use(express.session({
  secret: 'dont be walmarting',
  store: new MongoStore(sess_conf.db),
  cookie: {
    maxAge: new Date(Date.now() + 1209600000), // DO NOT CHANGE
    expires: new Date(Date.now() + 1209600000) // DO NOT CHANGE
  },
  maxAge : new Date(Date.now() + 1209600000), // DO NOT CHANGE
  expires: new Date(Date.now() + 1209600000) // DO NOT CHANGE
})); 
```

这里的任何帮助将不胜感激，我一生都无法弄清楚为什么用户被覆盖。我曾尝试在站点中添加新用户之前清除 cookie，因为我认为这是 Connect-Mongo 会话，但这不起作用。感谢任何可以帮助我的人。

编辑：我正在下面初始化 Passport 会话：

```
// Initialize Passport!  Also use passport.session() middleware, to support
// persistent login sessions (recommended).
app.use(passport.initialize());
app.use(passport.session());
app.use(app.router);
// END APP CONFIG (annotated) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:59:45.450

我认为这是你的问题：

```
var mongoose = require('mongoose')
   , Users = mongoose.model("Users")
   , user = new Users(); // <-- this creates a module variable `user`, but only once                             
                         //     (the first time the file is require()'d)

// Create
exports.create = function (steamID) {

  // ...which is being re-used every time this function is called.
  // Instead, you need to create the new user here:
  var user = new Users;

  if (steamID == 76561197991291041) { // Add me as an admin for when database resets.
    user.isadmin = 'yes';
  } else {
    user.isadmin = 'no';
  }
  user.steamid = steamID;
  user.save(function (err, callback) {
    if (err) throw err;
    console.log('User ' + user.steamid + ' added');
    console.log('Admin: ' + user.isadmin);
  });
}; 
```

# ajax - GWT 包装超链接

> ID：15579234
> 
> 赞同：0
> 
> 时间：2013-03-22T20:22:30.340
> 
> 标签：ajax, gwt, anchor

GWT 类锚具有`Anchor.wrap()`允许我包装已经存在的 HTML 元素的方法。问题是 Anchor 没有跟踪 AJAX 历史，因此我使用的是 Hyperlink 类，但是这个没有 wrap() 方法。

`<a href>`因此，如果没有 wrap()，使用 gwt 使现有 html 成为超链接的最佳方法是什么？

请不要告诉我在锚点击中实现历史行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:15:50.137

超链接有一个以 Element 作为参数的构造函数。问题是这个构造函数是受保护的。一种解决方法是创建一个子类来访问受保护的构造函数，例如：

```
class MyHyperlink extends Hyperlink {
    public MyHyperlink(Element element) {
        super(element);
    }
} 
```

我实际上并没有尝试过，这只是一个想法。

# dll - SD.LLBLGen.Pro.DQE dll 丢失。我可以从哪里得到它？

> ID：15579236
> 
> 赞同：0
> 
> 时间：2013-03-22T20:22:40.220
> 
> 标签：dll, llblgenpro

我有一个使用“SD.LLBLGen.Pro.DQE.OracleMS.NET20”参考的项目。

我犯了一些错误，现在它不见了。

我收到构建错误：-

> 命名空间“SD.LLBLGen.Pro.DQE”中不存在类型或命名空间名称“Oracle”（您是否缺少程序集引用？）。

任何机构都可以帮助我，尝试谷歌搜索但没有卓有成效的结果？

抱歉，如果问题放在错误的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:09:18.600

如果您在本地安装了 LLBLGen，您应该在如下位置找到该文件：

`C:\Program Files (x86)\Solutions Design\LLBLGen Pro v3.1\Frameworks\LLBLGen Pro\RuntimeLibraries\Net2.0\SD.LLBLGen.Pro.DQE.OracleMS.NET20.dll`

您可以更正损坏引用的路径以指向此文件。或者，更好的是，将此文件复制到项目的源代码控制位置，以便其他团队成员无需完整安装 LLBLGen 即可编译项目。

如果您在本地没有此文件但有客户 ID，您可以在此处登录以下载安装程序： [https ://www.llblgen.com/pages/customerlogin.aspx](https://www.llblgen.com/pages/customerlogin.aspx)

我怀疑[试用版](https://www.llblgen.com/pages/trial.aspx)也带有这个文件，但没有尝试过这种方法。

# objective-c - 使用 AFHTTPClient 解析 JSON

> ID：15579237
> 
> 赞同：0
> 
> 时间：2013-03-22T20:22:41.563
> 
> 标签：objective-c, json, nsdictionary, objective-c-blocks, afnetworking

我正在使用 AFNetworking 库使用 AFHTTPClient 解析 json。我可以验证 json 是否在客户端块中被解析，并将该数据发送到我的 json 模型。但是，当我尝试从块外部访问 json 模型时，我没有得到任何数据。如何将解析的 json 数据传递给 json 模型，然后在应用程序的其他地方访问该模型数据？

AFHTTPClient 子类/单例：

```
#import <Foundation/Foundation.h>
#import "AFHTTPClient.h"

@interface JsonClient : AFHTTPClient

+ (JsonClient *)sharedClient;

@end

#import "JsonClient.h"
#import "AFJSONRequestOperation.h"

static NSString *const kJsonBaseURLString = @"https://alpha-api.app.net/";

@implementation JsonClient

+ (JsonClient *)sharedClient {
    static JsonClient *_sharedClient = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedClient = [[JsonClient alloc] initWithBaseURL:[NSURL URLWithString:kJsonBaseURLString]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];

    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];

    return self;
}

@end 
```

JSON模型数据：

```
#import <Foundation/Foundation.h>

@interface TheJson : NSObject

@property (nonatomic, copy) NSString *createdAt;
@property (nonatomic, copy) NSString *userText;

- (id)initWithDictionary:(NSDictionary *)dict;

@end

#import "TheJson.h"

@implementation TheJson

- (id)initWithDictionary:(NSDictionary *)dict {
    self = [super init];

    if (self) {
        self.createdAt = [dict objectForKey:@"created_at"];
        self.userText = [dict objectForKey:@"text"];
    }

    return self;
}

@end 
```

ViewController 更新用户界面：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end

#import "ViewController.h"
#import "JsonClient.h"
#import "TheJson.h"

@interface ViewController ()

@property (weak) IBOutlet UILabel *createdLabel;
@property (weak) IBOutlet UILabel *textLabel;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (IBAction)fetchJsonData:(id)sender {

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    [[JsonClient sharedClient] getPath:@"stream/0/posts/stream/global" parameters:nil
                               success:^(AFHTTPRequestOperation *operation, id JSON) {
                                   NSArray *postsFromResponse = [JSON valueForKeyPath:@"data"];
                                   NSDictionary *dictFromArray = postsFromResponse[0];

                                   TheJson *jsonObject = [[TheJson alloc] initWithDictionary:dictFromArray];
                                   NSLog(@"createdAt is %@", jsonObject.createdAt);
                                   NSLog(@"text from user is %@", jsonObject.userText);

                                   [self updateInterface];
                                   [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

                               } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                   NSLog(@"Error is %@", [error description]);
                               }
     ];
}

- (void)updateInterface {
    TheJson *thejson;
    [_createdLabel setText:thejson.createdAt];
    [_textLabel setText:thejson.userText];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:09:09.127

您还没有将新的 jsonObject 从块中传递出去，也没有将其存储在任何地方。一个短期的答案是声明`updateInterface`将 jsonObject 作为参数。

所以你`updateInterface`变成`updateInterface:`了这样的东西：

```
- (void)updateInterface:(TheJson*)thejson {
    [_createdLabel setText:thejson.createdAt];
    [_textLabel setText:thejson.userText];
} 
```

...然后在您的块中，您可以像这样调用此方法：

```
[self updateInterface:jsonObject]; 
```

从长远来看，如果您的应用程序包含许多此类对象和/或需要在任何时间段内保留它们，您可能需要考虑在下载它们时如何存储和组织这些对象。

# java - Max Heapify 算法结果

> ID：15579240
> 
> 赞同：9
> 
> 时间：2013-03-22T20:22:48.943
> 
> 标签：java, algorithm

我一直在玩算法介绍教科书中的一些算法，特别是我正在尝试让二进制堆 100% 正确工作。我有一种奇怪的感觉，我正在使用的示例不正确，我想知道是否有人可以帮助我指出正确的方向。

给定数组

```
int[ ] arr = { 1, 2, 3, 4, 7, 8, 9, 10, 14, 16 }; 
```

我从 MaxHeapify 得到的结果是

```
[ 16, 14, 9, 10, 7, 8, 3, 1, 4, 2 ] 
```

但是，在进行了几次 Google 搜索后，我发现使用这个精确数组作为示例的人期望结果是：

```
[ 16, 14, 10, 8, 7, 9, 3, 2, 4, 1 ] 
```

让我感到困惑的是，我的 MaxHeapify 方法给出的结果满足 Heap 属性，但它与预期的不同。下面是我在 Java 中的实现

```
public static void BuildMaxHeap( int[ ] arr )
{
    for( int i = (int)Math.floor( arr.length - 1 ); i >= 0; i-- )
        MaxHeapify( arr, i );
}
public static void MaxHeapify( int[ ] arr, int i )
{
    int left = 2 * i + 1;
    int right = 2 * i + 2;
    int largest = i;

    if( left < arr.length && arr[ left ] > arr[ largest ] )
        largest = left;
    if( right < arr.length && arr[ right ] > arr[ largest ] )
        largest = right;
    if( largest != i )
    {
        int temp = arr[ i ];
        arr[ i ] = arr[ largest ];
        arr[ largest ] = temp;
        MaxHeapify( arr, largest );
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T20:36:04.480

您显示的堆都是有效的。没什么好担心的。

有多种方法可以对子节点进行排序。

考虑左右交换的最简单情况：

```
 14         14
 10  9   vs  9  10
...  ...   ...  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T02:39:23.487

你的堆是有效的。它们是不同的，因为当您不应用这两种方法时，数组不一定是排序的。这就是 Heapsort 的用途。只有一个细节，在您的 BuildMaxHeap 中您可能想要更改

```
for( int i = (int)Math.floor( arr.length - 1 ); i >= 0; i-- ) 
```

至

```
for( int i = arr.length / 2; i >= 0; i-- ) 
```

我这么说的原因是因为你可以从最后一个有叶子的节点开始，因为叶子总是一个 max_heap。

# jquery - Jquery代码部分显示

> ID：15579241
> 
> 赞同：1
> 
> 时间：2013-03-22T20:22:49.830
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个部分，，`_user_review.html.erb`我刚刚创建了一个`_user_review.js.erb`来匹配它。因此，当视图加载时，会加载以下 JQuery 侦听器：

```
$(function(){
    $("#review_rating").on('change', function(){
        this.form.submit();
    });
}); 
```

现在，当部分加载时，我看到的只是这段代码而不是我的视图。我确定这是一个菜鸟错误，但是当涉及到 JQuery 时，这是我的专长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:49:38.503

要解决您的问题，只需重命名`_user_review_js.erb`为`user_review.js.erb`

并渲染`<%= render "my_controller/user_review" %>`

如果您只想加载 JavaScript，只需将代码放在`html.erb`

在`my_controller/_user_review.html.erb`

```
<script type="text/javascript">
  $(function(){
      $("#review_rating").on('change', function(){
          this.form.submit();
      });
  });
</script>
<!-- partial view here--> 
```

然后只是渲染它

```
<%= render "my_controller/user_review" %> 
```

# asp.net - 如果活动过多，则不会调用 AsyncCodeActivity Worfklow 中的 EndExecute

> ID：15579247
> 
> 赞同：1
> 
> 时间：2013-03-22T20:23:11.033
> 
> 标签：asp.net, workflow-foundation-4

我正在使用 Workflow 使用 ParallelForEach 运行并行 AsyncCodeActivities。当我这样做时，如果有大量活动（比如 1000 个异步活动），那么我在运行代码时会收到 System.OutOfMemory 异常。

当我通过调试我的代码对此进行更多研究时，我发现我的“EndExecute”方法没有被一系列异步代码活动调用，即使它已经完成了它的过程。因此，内存不断堆积而没有被释放，最后引发 System.OutOfMemory 异常。我试图将线程数减少到 8 个（我机器中的处理器数），但即便如此，我还是收到了异常。

请帮助我，我被这个问题困扰了一个多星期。我无法从其他任何地方找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:07:52.880

如果您使用的是 .NET 框架 4.0，我认为通过将 SetMaxThreads() 调用为较小的数字来限制最大线程池大小会有所帮助。您可以通过调用 GetMaxThread() 来获取默认的最大线程大小。

当前抛出 OutOfMemory 异常，因为运行时将继续分配线程池线程，直到内存可用。

您可能需要根据每个活动所需的内存调整此数字。

# entity-framework - 实体框架和实体状态

> ID：15579249
> 
> 赞同：1
> 
> 时间：2013-03-22T20:23:20.480
> 
> 标签：entity-framework

如果您从 Entity Framework 加载实体并将引用存储在某处。实体框架是否会跟踪对象直到它被处置？你可以随时保存对象的状态吗？（它如何跟踪它）我们谈论的是应用程序而不是 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:28:44.933

如果您加载一个实体，它将在 ObjectStateManager 中被跟踪，直到 ObjectContext 被释放。您可以加载是因为没有跟踪 - 您可以[`.AsNoTracking`](http://msdn.microsoft.com/en-us/library/gg679352%28v=vs.103%29.aspx)在查询中使用 DbContext（或更正确的 DbSet）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T03:18:59.937

如果您使用 .AsNoTracking，请不要忘记您的实体不在上下文中，并且只是一个对象，您无法持久保存或进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:26:49.047

只要您的数据库上下文存在，实体就会被跟踪。这是假设您没有手动分离它。

考虑（手绘/伪）：

```
MyEntity entity;

using (var context = new MyDbContext())
{
    entity = context.MyEntities.First();
}

entity.Property1 = "something"; // success
entity.LazyNavigationProperty.Property2 = "something"; // fail 
```

延迟加载将失败，因为您已经处理了上下文及其与它的连接。

考虑到：

```
var context = new MyDbContext())
MyEntity entity = context.MyEntities.First();

entity.Property1 = "something"; // success

// do loads of stuff

entity.LazyNavigationProperty.Property2 = "something"; // success

context.SaveChanges(); 
```

上下文仍然是打开的，因此实体将被跟踪并按需保留。

# wordpress - 基于标题（h1，h2 ..）的自动生成菜单？

> ID：15579251
> 
> 赞同：0
> 
> 时间：2013-03-22T20:23:24.927
> 
> 标签：wordpress

我使用 Wordpress 作为发布大块静态文本（作为页面...）的工具，我希望拥有基于 HTML 标题 h1、h2、h3 自动生成的目录...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:27:49.293

我不知道有什么插件可以完成这项工作，也许有。但是这样做的插件需要解析当前帖子（使用数据库/页面请求），仅获取标题（使用正则表达式之类的解析器）并将它们用作菜单（将结果写为 ul li 的 html 列表）。另一个添加是根据页面修订缓存结果，但这是您的选择。

# jquery-ui - jQuery UI 对话框只工作一次；第二次打开提交时导致ViewExpiredException

> ID：15579252
> 
> 赞同：0
> 
> 时间：2013-03-22T20:23:39.440
> 
> 标签：jquery-ui, jsf-2, richfaces

我在使用 JSF2 和 Richfaces 4 的 Java EE 应用程序中工作。我们决定使用模态窗口进行一些交互，我们选择了带有 h:form 的 Jquery UI Dialog，因为我们已经在这个项目中使用了 Jquery UI。

对话框正确打开，并提交表单，提交是使用 ah:commandButton 和 a4j:ajax 进行的。h:commandButton 保持隐藏状态，由对话框按钮触发。

一切看起来都很完美，但对话框/表单只工作一次。如果我在不刷新页面的情况下关闭并打开对话框，我会在提交表单时收到消息：

> javax.faces.application.ViewExpiredException: viewId:/frontend/inicial.xhtml - /frontend/inicial.xhtml 无法恢复

对话框的 JSF/HTML：

```
<h:panelGroup  id="dialog-nova-intercorrencia" styleClass="ui-dialog-content ui-widget-content">
    <h:form id="frm-dialog-nova-intercor" prependId="false">          
        <table>
            <tr>
                <td>Paciente</td>
                <td>
                    <h:selectOneMenu id="sel-intern-intercor" value="#{intercorrenciaController.novaIntercorrencia.internacao.internacaoID}"  styleClass="ui-widget-content ui-corner-all">
                        <f:selectItems value="#{internacaoController.listInternacoesSelectItem}" />
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td>Impacto</td>
                <td>
                    <h:selectOneMenu id="sel-impacto" value="#{intercorrenciaController.novaIntercorrencia.impacto.impactoID}"  styleClass="ui-widget-content ui-corner-all">
                        <f:selectItems value="#{intercorrenciaController.listaImpactosSelectItem}" />
                    </h:selectOneMenu>                        
                </td>
            </tr>
            <tr>
                <td>
                    Data e Hora
                </td>
                <td>
                    <h:inputText value="#{intercorrenciaController.dataIntercorrencia}" styleClass="ui-widget-content ui-corner-all" style="width: 130px" />
                    &#160;
                    <h:inputText value="#{intercorrenciaController.horaIntercorrencia}" styleClass="ui-widget-content ui-corner-all" style="width: 70px" />
                </td>
            </tr>
            <tr>
                <td>Resumo</td>
                <td><h:inputText value="#{intercorrenciaController.novaIntercorrencia.resumo}" size="25" styleClass="ui-widget-content ui-corner-all" /></td>
            </tr>
            <tr>
                <td colspan="2">
                    Comentarios
                    <br />
                    <h:inputTextarea cols="30" rows="3" value="#{intercorrenciaController.novaIntercorrencia.descricao}" />
                </td>
            </tr>                
        </table>
        <h:commandButton id="btt-add-nova-intercor" action="#{intercorrenciaController.cadastrarIntercorrencia}" style="display:none">
            <a4j:ajax execute="@form" render="@form frm-dialog-nova-intercor panel-lista-intercorrencias" />
        </h:commandButton>
    </h:form>
</h:panelGroup> 
```

创建 jQuery UI Dialog 的 JS：

```
 $("#dialog-nova-intercorrencia").dialog({
        position: {
            my: "top top", 
            at: "top top", 
            of: window
        },
        autoOpen: false,
        height: 350,
        width: 400,
        draggable: false,
        resizable: false,
        modal: true,
        buttons: {
            "Cadastrar": function() {
                $("#btt-add-nova-intercor").trigger("click");
            },
            "Cancelar": function() {
                $( this ).dialog( "close" );
                $(this).find("input").val("");
                $(this).find("textarea").val("");
                $(this).find("select").val(0);                                
            }
        },
        close: function() {
            $(this).find("input").val("");
            $(this).find("textarea").val("");
            $(this).find("select").val(0);
        }
    }); 
```

有谁知道我只能在拨号中执行表单一次而第二次收到消息“无法恢复视图”的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:18:09.097

问题是我在关闭对话框之前用来清除字段的 JS：

```
$(this).find("input").val(""); 
```

它在表单中将输入隐藏 javax.faces.ViewState 设置为 null。

```
<input type="hidden" name="javax.faces.ViewState" value="" /> 
```

# c++ - CTRL+Z 使程序在 C++ 中无限循环

> ID：15579257
> 
> 赞同：1
> 
> 时间：2013-03-22T20:23:59.853
> 
> 标签：c++, loops

好的，我这里有问题。我正在制作一个幻灯片益智游戏。玩家被问到他想要移动哪一块，直到谜题被解决。如果玩家之前想退出，输入`Q`或`q`按即可`enter`。该程序运行良好。但是我有一个问题：如果我插入`CTRL+Z`，程序会`loop`出乎意料地......

这是一段重要的代码：

```
 // analyzes user input
        if (piece_to_move_string == "q" ||
            piece_to_move_string == "Q")
        {
            cout << endl << "You chose to quit." << endl;
            pressanykey();
            break;
        }
        else
        {
            piece_to_move = atoi(piece_to_move_string.c_str());

            if (1 <= piece_to_move && piece_to_move <= pow(puzzle_size,puzzle_size))
            {
                game_board = move_piece (game_board, piece_to_move);
            }
            else
            {
                cout << "Not possible.";
            }
        } 
```

编辑：但仍然不起作用..

```
// analyzes user input
        if (piece_to_move_string == "q" ||
            piece_to_move_string == "Q")
        {
            cout << endl << "You chose to quit." << endl;
            pressanykey();
            break;
        }
        else if (cin.eof())
        {
            //do nothing
        }
        else
        {
            piece_to_move = atoi(piece_to_move_string.c_str());

            if (1 <= piece_to_move && piece_to_move <= pow(puzzle_size,puzzle_size))
            {
                game_board = move_piece (game_board, piece_to_move);
            }
            else
            {
                cout << "Not possible.";
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:25:56.987

`Ctrl+Z`表示“文件结尾”（假设您在 Windows 上），因此一旦用户点击它，您`cin`就处于不可读状态。检查`cin.eof()`：

```
if (cin.eof() || piece_to_move_string == "q" ||
                 piece_to_move_string == "Q")
{
    cout << endl << "You chose to quit." << endl;
} 
```

# python - 如何组合多个numpy掩码

> ID：15579260
> 
> 赞同：15
> 
> 时间：2013-03-22T20:24:18.163
> 
> 标签：python, numpy

```
m1 = [0,1,1,3]
m2 = [0,0,1,1]
data = [10,20,30,40] 
```

我想做这样的事情：

```
mask = (m1 == 1) & (m2 == 1)
data[mask] #should return 30 
```

请注意，此示例会导致错误

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T20:27:53.390

您正在使用 python 列表而不是 numpy 数组。试试这个：

```
import numpy as np

m1 = np.array([0,1,1,3])
m2 = np.array([0,0,1,1])

mask = (m1 == 1) & (m2 == 1)
data[mask]
# returns array([30]) 
```

在您的示例中，当`m1`是一个列表时，`m1 == 1`被评估为`False`（对于 相同`m2`），所以掩码是`False`和`data[False] = data[0] = 10`。

# tfs - 无法在 Microsoft 测试管理器中添加服务器

> ID：15579261
> 
> 赞同：0
> 
> 时间：2013-03-22T20:24:20.320
> 
> 标签：tfs, microsoft-test-manager

当我想连接到 Microsoft 测试管理器中的服务器时，我收到了以下错误消息：

无法连接到服务器“tfsserver:8282”。检查服务器名称是否正确以及您是否有权访问该服务器。

这是 Microsoft 测试管理器 2010。

我可以使用 Visual Studio 2010 和 Team Explorer 2012 在整个 Web 浏览器中访问该 url 中的 tfs 服务器。

TFS 服务器安装在 Windows Server 2008 R2
Standard 中 TFS 安装版本为：11.0.50727.1 (RTM)
配置的虚拟目录为：\tfs
配置的端口为：8282
服务帐户：NT AUTHORITY\Network 服务
身份验证：NTLSM
Notificacion url：http : //tfsserver:8282/tfs
服务器 url:http://localhost:8282/tfs
网页访问 url:http://tfsserver:8282/tfs
机器名:TFSSERVER

我的电脑和服务器都在 windows 域下。我的域用户包含在 TFS 的管理控制台用户中。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T04:24:12.073

这是您需要的兼容性问题

tfs 2010，测试经理2010，团队资源管理器2010

或者

tfs 2012，测试经理2012，团队资源管理器2012

第二种解决方案是从微软网站下载更新补丁以实现向上或向下兼容。

# php - 在 PHP 中的另一个函数中使用一个函数

> ID：15579262
> 
> 赞同：-3
> 
> 时间：2013-03-22T20:24:21.657
> 
> 标签：php, function

我在一个名为 website 的类中有两个函数。这两个函数是 checkStatus 和 killPage。

函数 killPage 是关于使用漂亮的简单样式而不是完整的单词文本。函数 checkStatus 应该在代码中使用 killPage ，但它不会让我使用它。

继承人的代码：

```
class website 
{
    function killPage($content)
    {
        die("

            <h1>" . Settings::WEBSITE_NAME ." encountered an error</h1>

            " . $content . "

            ");
    }

    function checkStatus(){
        if(Settings::STATUS == 'M')
        {

            $website->killPage('We are in maintence');
        }
        if(Settings::STATUS == 'O')
        {
        }
        if(Settings::STATUS == 'C')
        {
            $website->killPage('We are closed');
        }
    }
}

$website = new Website; 
```

我得到的错误：

> 未定义的变量：网站 && 调用非对象上的成员函数 killPage()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:26:32.163

`$this`指类的当前实例，而不是`$classname`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:26:51.757

更改`$website`为`$this`

```
class website 
{
    function killPage($content)
    {
        die("

            <h1>" . Settings::WEBSITE_NAME ." encountered an error</h1>

            " . $content . "

            ");
    }

    function checkStatus(){
        if(Settings::STATUS == 'M')
        {

            $this->killPage('We are in maintence');
        }
        if(Settings::STATUS == 'O')
        {
        }
        if(Settings::STATUS == 'C')
        {
            $this->killPage('We are closed');
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:26:26.030

问题在这里：

```
function checkStatus(){
    if(Settings::STATUS == 'M')
    {
        Settings::STATUS == 'M';
        $website->killPage('We are in maintence');
    } 
```

您正在取消引用`$website`尚未纳入范围的内容。

在这种情况下，`$website`是一个全局变量，你需要把它带入作用域：

```
function checkStatus() {
    global $website;

    if(Settings::STATUS == 'M') 
```

**编辑**或其他人指出，作为`checkStatus`成员函数，您应该使用`$this`.

# html - 让画布占据尽可能多的空间

> ID：15579263
> 
> 赞同：1
> 
> 时间：2013-03-22T20:24:29.913
> 
> 标签：html, mobile, canvas, firefox-os

我试图让我的 HTML5 Canvas 占据尽可能多的空间。我正在为使用画布的 Firefox OS 制作游戏，并使用 Firefox OS 模拟器进行测试。

“尽可能多的空间”是指整个屏幕，没有滚动条。

理想情况下，首选跨平台方式（也适用于 Android 和 iOS）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:03:55.873

您需要做一些事情，将画布位置设置为`absolute`，并确保在包含元素中没有设置填充或边距。

以下是我在所有画布演示中使用的内容

## CSS

```
body, html {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}
canvas {
    position:absolute;
} 
```

## JavaScript

```
var canvas = document.getElementById("canvas"),
    width = window.innerWidth,
    height = document.body.offsetHeight;

window.onresize = function () {
    height = canvas.height = document.body.offsetHeight;
    width = canvas.width = document.body.offsetWidth;
}; 
```

**[全屏演示](http://cdpn.io/Khqio)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T20:57:37.930

这应该可以解决问题：

```
$("canvas").width($("body").width());
$("canvas").height($("body").height());

window.onresize = function(){
  $("canvas").width($("body").width());
  $("canvas").height($("body").height());
}; 
```

用画布选择器替换画布。这需要 jQuery。

# maven - github和maven进行java协作

> ID：15579264
> 
> 赞同：0
> 
> 时间：2013-03-22T20:24:33.783
> 
> 标签：maven, version-control, github

新的 maven 和相对较新的 java...

我想和同学们一起在java中合作一个项目。我想用 maven 管理构建，用 github 进行软件配置。在阅读了一些关于它之后，我有以下印象：

将两者结合使用只需将 github 存储库指向我的本地 maven 项目文件夹即可。所有构建和依赖项都将在本地处理，并根据 github 的限制提交源代码更改。如果我希望 github 做一些配置以外的事情，例如将项目托管为 maven 存储库，情况会变得更加复杂。

我对情况的理解正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:39:52.210

最好只使用 github 来管理源代码。考虑安装一个专用的存储库管理器，如下所示之一来共享二进制文件：

*   [关系](http://www.sonatype.org/nexus/)
*   [工厂](http://www.jfrog.com/home/v_artifactory_opensource_overview)
*   [档案馆](http://archiva.apache.org/index.cgi)

存储库管理器对于缓存从[Maven Central](http://search.maven.org/)等 3rd 方存储库下载的工件也很有用。我发现它是我的 ALM 基础架构的重要组成部分。

## 更新

Sonatype 最近发布了一篇名为“[等等……你没有存储库管理器？](http://www.sonatype.com/people/2012/07/wait-you-dont-have-a-repository-manager/) ”的博客文章，它解释了为什么人们不会使用存储库管理器。

# python - 正则表达式检测“无效浮点数”

> ID：15579270
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:25:17.153
> 
> 标签：python, regex

我正在寻找一个正则表达式来检测无效的浮点数，因为它们不能有两个小数点。这是我所拥有的，但它不起作用：

```
REAL = re.compile("^\d+\.\d+$") 
```

*编辑：*我正在使用python。总的来说，我正在编写一个词法分析器来识别 C 语法的微型版本。2.3.4 被认为是无效的，但 13.4.5 不是。我想这与此有关。

* * *

抱歉，问题格式不正确。在阅读了一些评论后，我在代码的其他地方发现了错误。事实证明，`re.compile("0") and re.compile("1")`在我的代码中使用前面的代码会导致任何以 1/0 开头的序列被“拾取”为有效，不管序列的其余部分如何。只需添加即可`"0$" and "1$"`解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:33:56.430

一个更简单的方法是这样做：

```
floatStr = '12.3.4'
try:
    float(floatStr)
except ValueError:
    # do something
    pass 
```

换句话说：尝试解析字符串，如果解析失败，那是因为格式不是浮点数的格式。无需在这里乱用正则表达式（有效浮点数的格式可能有点难以正确） - 只需让标准转换函数为您完成繁重的工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:56:11.363

您的问题实际上根本不在此代码中。

正如一个快速测试所示，使用`REAL = re.compile("^\d+\.\d+$")`,`re.match('13.4.5')`返回`None`，就像`re.match('2.3.4')`.

问题一定是一些早期的代码`'13.4.5'`以某种方式匹配，导致它要么吃掉令牌的其余部分，要么吃掉足够多的东西以至于剩下的（例如，`'4.5'`）是一个有效的浮点数。没有看到你的代码，没有人能猜出问题到底是什么。

但是，事实证明，你有另一个`'1'`没有终止符匹配的正则表达式，所以无论你必须从正则表达式匹配构建词位的任何代码都接受所有`'13.4.5'`. 同样，没有看到你的代码，没有人能猜出为什么会发生这种情况……</p>

# python - 在 python 中使用 split() 和 join() 时保留空格

> ID：15579271
> 
> 赞同：32
> 
> 时间：2013-03-22T20:25:18.777
> 
> 标签：python, join, split

我有一个数据文件，其中包含如下列

```
BBP1   0.000000  -0.150000    2.033000  0.00 -0.150   1.77 
```

并且各个列由不同数量的空格分隔。

我的目标是读取这些行，对几行进行一些数学运算，例如将第 4 列乘以 .95，然后将它们写出到一个新文件中。新文件应该看起来像原来的文件，除了我修改的值。

我的方法是将行作为列表项阅读。然后我会`split()`在我感兴趣的那些行上使用，这会给我一个包含各个列值的子列表。然后我进行修改，`join()`将列放在一起并将列表中的行写入一个新的文本文件。

**问题是我有不同数量的空格**。我不知道如何以阅读它们的相同方式将它们介绍回来。我能想到的唯一方法是在拆分它们之前计算行中的字符，这将非常乏味。有人有更好的主意来解决这个问题吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-22T20:26:52.520

在这种情况下，您想`re.split()`与一个组一起使用：

```
re.split(r'(\s+)', line) 
```

将返回列*和*空格，以便您稍后可以在包含相同数量的空格的情况下重新加入该行。

例子：

```
>>> re.split(r'(\s+)', line)
['BBP1', '   ', '0.000000', '  ', '-0.150000', '    ', '2.033000', '  ', '0.00', ' ', '-0.150', '   ', '1.77'] 
```

您可能*确实*想从末尾删除换行符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-08T06:48:24.903

其他方法是：

```
s = 'BBP1   0.000000  -0.150000    2.033000  0.00 -0.150   1.77'
s.split(' ')
>>> ['BBP1', '', '', '0.000000', '', '-0.150000', '', '', '', '2.033000', '', '0.00', '-0.150', '', '', '1.77'] 
```

如果我们在 split 函数中指定空格字符参数，它会创建列表而不吃连续的空格字符。因此，在“加入”功能后，原始空格字符数会被恢复。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-20T01:59:27.887

对于在开头和/或结尾有空格的行，更健壮的模式是`(\S+)`在非空格字符处拆分：

```
import re

line1 = ' 4   426.2   orange\n'
line2 = '12    82.1   apple\n'

re_S = re.compile(r'(\S+)')
items1 = re_S.split(line1)
items2 = re_S.split(line2)
print(items1)  # [' ', '4', '   ', '426.2', '   ', 'orange', '\n']
print(items2)  # ['', '12', '    ', '82.1', '   ', 'apple', '\n'] 
```

这两行拆分后的项目数相同，很方便。第一项和最后一项*始终*是空白字符串。这些行可以使用带有零长度字符串的连接来重构：

```
print(repr(''.join(items1)))  # ' 4   426.2   orange\n'
print(repr(''.join(items2)))  # '12    82.1   apple\n' 
```

* * *

为了将示例与`(\s+)`此处其他答案中使用的类似模式（小写）进行对比，每行拆分为不同的结果长度和项目的位置：

```
re_s = re.compile(r'(\s+)')
print(re_s.split(line1))  # ['', ' ', '4', '    ', '20.0', '   ', 'orange', '\n', '']
print(re_s.split(line2))  # ['12', '    ', '82.1', '   ', 'apple', '\n', ''] 
```

如您所见，以一致的方式处理这会有点困难。

# entity-framework - 最好在服务器启动时加载所有实体

> ID：15579283
> 
> 赞同：0
> 
> 时间：2013-03-22T20:26:04.727
> 
> 标签：entity-framework

最好在服务器开始时将所有实体加载到内存中，使用它并在完成后（关闭服务器）？或者如果我们在服务器处理数据的服务器场景中，它足够快地获取实体，在任何操作期​​间动态修改它并将其保存回数据库。最佳做法是什么？

# c# - DateTime.ParseExact() 产生异常结果。谁能告诉我为什么？

> ID：15579290
> 
> 赞同：1
> 
> 时间：2013-03-22T20:26:35.670
> 
> 标签：c#, datetime

只是想知道是否有人能告诉我为什么在这行代码（如下）中，ParseExact 函数会突然返回一个看似随机的日期，而不是输入字符串中的实际日期？

```
 foreach (Car c in cars)
        {
            Car obj = new Car();
            obj.CarID = c.CarID;
            obj.Reg = c.Reg;
            obj.Make = c.Make;
            obj.Model = c.Model;
            obj.Mileage = c.Mileage;
            if(c.LastInspection != null && c.LastInspection != "N/A")
            {
                obj.LastInspectionDate = DateTime.ParseExact(c.LastInspection, "yyyy'/'mm'/'dd", null);
            }
            obj.StaffID = c.StaffID;
            obj.OfficeID = c.OfficeID;
            carsDate.Add(obj);
        }

        return carsDate; 
```

在我的一条记录中，'c.LastInspection' = "2013/06/08"，但由于某种原因，每次我使用上述代码解析所述字符串时，'obj.LastInspectionDate' 都会更改为 "Tuesday 08/01/2013 00:06:00”。现在日期和时间不会打扰我，因为我只是用它来存储日期，但是，很明显，这是错误的日期！多次浏览代码，我看不出我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:28:22.640

更改`mm`为`MM`您的格式字符串。

`mm`是：*分钟，从 00 到 59。*

`MM`是：*月份，从 01 到 12。*

检查MSDN 上的[自定义数据和时间格式字符串列表。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

因为您使用`mm` `06`的输入字符串被视为分钟。并且因为没有指定月份，`1`所以将其作为默认值。

# javascript - Ajax 方法不会触发控制器 Action 方法

> ID：15579291
> 
> 赞同：0
> 
> 时间：2013-03-22T20:26:36.390
> 
> 标签：javascript, jquery, asp.net-mvc-2

Javascript/Jquery：

```
 specialInsDialog.dialog('open');

            specialInsDialog.find('#buttonSave').live('click', function () {

                function addSpecialInstuction(spinstructionVal, isYesVal) {

                    $.ajax({
                        type: "POST",
                        url: "/Portal/AddSpecialInstuction",
                        dataType: 'json',
                        data: { providerKey: selProviderKey, ownerKey: selOwnerKey, petKey: selPetKey, instruction: spinstructionVal, isPermenant: isYesVal, invoiceId: selInvoiceId },
                        success: function (data) {
                            alert('sam');
                        }
                    });
                }

                var chkBox = document.getElementById('checkboxSpecialIns');

                if (chkBox.checked) {

                    var oTable = document.getElementById('table');
                    var rowLength = oTable.rows.length;

                    for (i = 1; i < rowLength; i++) {

                        var oCells = oTable.rows.item(i).cells;
                        var isYes = oCells[1].childNodes[0].checked;
                        var spinstruction = oCells[2].childNodes[0].value;

                        if (typeof (spinstruction) != 'undefined' && spinstruction != '') {

                            addSpecialInstuction(spinstruction, isYes);
                        }
                    }
                }
}); 
```

控制器 ：

```
 [HttpPost]
        public JsonResult AddSpecialInstuction(string providerKey, string ownerKey, string petKey, string instruction, bool isPermenant, string invoiceId)
        {
            char[] delimiter = {'+'};
            string[] petKeys = petKey.Split(delimiter);
            Pet pet = null;  

            foreach (var key in petKeys)
            {
                pet = BasicRepository.GetPet(ownerKey, key);
                if (pet.SpecialInstructions != null && pet.SpecialInstructions.Where(a => a.Instruction.Trim() == instruction.Trim()).Count() <= 0)
                {
                    pet.AddSpecialInstruction(new SpecialInstruction()
                                                  {
                                                      Instruction = instruction,
                                                      IsPermenant = isPermenant,
                                                      PetId = pet.Id,
                                                      InvoiceId = isPermenant ? Guid.Empty : Guid.Parse(invoiceId)
                                                  });
                    BasicRepository.Save();
                }        
            } 
            Confirm("Your Special Instruction has been added.");
            return Json(string.Empty, JsonRequestBehavior.AllowGet);
        } 
```

我`addSpecialInstuction`只有在使用 firebug 运行代码时才会触发上述类型的代码和方法。没有 firebug 控制器的 Action 方法不会触发。

注意：上面的 ajax 方法在 jquery UI 弹出窗口中

那为什么？

# javascript - 为什么萤火虫多次显示相同的脚本

> ID：15579292
> 
> 赞同：1
> 
> 时间：2013-03-22T20:26:39.447
> 
> 标签：javascript, caching, firebug

我有一些脚本在我的应用程序的所有 html 页面中都很常见。将此文件称为 commonfunctions.js。当您在应用程序中移动时，每个 html 页面都会加载它，并附加此 js 文件的最后修改日期（从服务器获取）。Firebug 每次都将文件添加到加载脚本列表以及 eval/seq/#（其中 # 是由于某种原因从 7 开始加载该文件的次数）。例如，如果我有 3 个页面，分别称为 one.html、two.html 和 three.html，每个页面都有这行代码：

```
 <script type="text/javascript" src="commonfunctions.js?mod=11/33/2012"></script> 
```

如果我从 one.html->two.html->one.html->three.html 开始，Firebug 会将加载的脚本列出为：

> commonfunctions.js?mod=11/33/2012
> commonfunctions.js?mod=11/33/2012/eval/seq/7
> commonfunctions.js?mod=11/33/2012/eval/seq/8
> commonfunctions.js?mod =11/33/2012/eval/seq/9

等等，当我访问这三个页面时。

为什么会发生这种情况，有没有办法阻止它？我读到如果由于 eval() 或事件属性而不知道 url，firebug 可能会创建自己的 url；但是，这些脚本是通过常规标签加载的。

我很担心，因为我不确定这是否意味着浏览器现在已经编译并正在执行或存储同一脚本的多个副本——在这两种情况下都非常浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:38:56.930

该脚本可能已通过 script 标签加载，但在 commonfunctions.js 中的某处`eval()`已进行了调用。或者三个，很明显。

# php - Preg_match_all 计数器？

> ID：15579301
> 
> 赞同：1
> 
> 时间：2013-03-22T20:27:07.120
> 
> 标签：php, preg-match-all

```
 <?
    echo "Begin Function=";

    echo "<br>";

    $text = "2lyve: this is: 8475978474957845 948594: jfhdhfkd: just the 2lyve:          beginning:";
    function getTrends($text)
    {
        $subject = $text;
        $pattern ='/(\w+:)/Ui';
        preg_match_all($pattern, $subject, $matches);

        foreach($matches[1] as $value)
        {

            print $value."<br>";

        }

    }

    getTrends($text);
    ?> 
```

结果将是：

```
Begin Function=

2lyve:

is:

948594:

jfhdhfkd:

2lyve:

beginning: 
```

如何计算每个结果返回的次数并对其进行排名？另外，如何将这些结果导入 sql 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:34:00.880

PHP 实际上为此目的有一个特定的功能。

[数组计数值](http://php.net/manual/en/function.array-count-values.php)

您的代码可以更改为

```
<?php
echo "Begin Function=";

echo "<br>";

$text = "2lyve: this is: 8475978474957845 948594: jfhdhfkd: just the 2lyve:          beginning:";
function getTrends($text)
{
    $subject = $text;
    $pattern ='/(\w+:)/Ui';
    preg_match_all($pattern, $subject, $matches);

    $findings = array_count_values($matches[1]);

    foreach($findings as $value=>$occ)
    {
        print $value."<br>";
    }

}

getTrends($text);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:29:41.993

在函数的开头声明一个数组`$map = array();`，然后代替

```
 print $value."<br>"; 
```

放

```
if(isset($map[$value])) {
    $map[$value]++;
} else {
    $map[$value] = 1;
} 
```

# css - Android 设备的媒体查询

> ID：15579304
> 
> 赞同：1
> 
> 时间：2013-03-22T20:27:25.903
> 
> 标签：css, media-queries

我的网站针对 OS 和 iOS 进行了优化，但是通过 browserstack.com 为 Android 测试它让我对在我的媒体查询中定位 Android 设备感到困惑。

这是适用于 iOS 设备的查询：

```
#using em based query after reading this article: http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/
@media only screen and (device-width: 20em) 
```

我尝试了各种不同的查询（包括基于 px 的查询），但只想要一个适用于所有/大多数手持式 android 设备的查询。你有这方面的运气吗？谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:51:56.303

如果您想使用媒体查询来定位 Android，我认为您可以通过查询 dpi 来伪造它。

```
@media screen and (min-resolution: 192dpi) { … } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:53:40.577

假设你的`1em = 16px`我会使用下面的媒体查询

```
@media only screen and (min-device-width: 20em) and (max-device-width: 30em) 
```

这将寻找`screen`宽度在`320px`和之间的任何设备`480px`，这对于移动设备来说是一个相当好的标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:39:31.677

媒体查询不能用于查找设备类型，您应该为此使用用户代理嗅探。[不过， CSS-Tricks](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)上有一个很好的媒体查询资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:45:40.877

请在[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries查看演示](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

似乎`device-width: 20em`会引起一些问题。所以看看这里。

# variables - 当其值为变量时，for loop skip= 无法正常工作

> ID：15579313
> 
> 赞同：-2
> 
> 时间：2013-03-22T20:27:53.840
> 
> 标签：variables, for-loop, batch-file, cmd, options

我正在尝试跳过行以便在此 findstr 命令下方的第二行中获取**var5 ：**

```
'findstr /x /v /c:"Ship sunk" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\!FileName5!.clg" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\!FileName5!.cfg"') 
```

重复一遍，我想从 findstr （上面）找到它的字符串的第二行中获取**var5 。**

所以我决定在 for 循环中为跳过创建一个变量。我称之为“ **skipnumber5** ”。但是，使用此变量会跳过我所说的行数，但不会重复循环。因此，如果我设置 skipnumber5=12，它的作用与“skip=12”不同。它正确地执行了第一个循环，但随后它一次又一次地重复第一个循环结果。使用 skip=12 确实可以在循环中正常工作，但是我需要更改跳过值才能在**var5**更改时获取它。

代码：设置 /a skipnumber5=0

```
:part5
set /a skipnumber5+=12
set /a maxlines5+=1
set /a linecount5=0

for /F "delims=" %%x in ('findstr /c:"Ship sunk" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\*.clg" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\Log_*.cfg"') do (
set /a linecount5+=1
set FileName5=
set FileName5=%%~nx
if !linecount5! GEQ %maxlines5% goto part5a 
)

:part5a
set /a maxlines5a+=1
set /a linecount5a=0
for /f "skip=%skipnumber5% tokens=2 delims==" %%E in ('findstr /x /v /c:"Ship sunk" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\!FileName5!.clg" "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_SCR2\!FileName5!.cfg"') do (
set /a linecount5a+=1
set var5=
set var5=!var5!%%E
set /a skipnumber5+=12
if !linecount5a! GEQ %maxlines5a% (goto part5b)
) 
```

在 for 循环选项中，带有变量**skipnumber5的行是：**

```
 for /f "skip=%skipnumber5% tokens=2 delims==" %%E in 
```

问题是带有变量**skipnumber5**的skip停留在同一个文件中，正在跳过。但是，如果您阅读代码，它应该更改为下一个**Filename5**，跳过。如果 skip=1 或任何整数，这就是它的工作原理。

那么为什么变量**skipnumber5**使skip= 以这种方式运行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:37:07.217

findstr 的一个示例，没有延迟扩展：

```
@echo off &setlocal
set "search=mysearch"
set "file=file.txt"

:: find first %search%
set "count="
for /f "tokens=1*delims=:" %%i in ('findstr /n "%search%" %file%') do if not defined count set /a count=%%i
echo pattern:  [%search%] found at line %count%
:: two lines down --> skip+1
set /a count+=1
set "variable="
set "found="
:: grab line+2
for /f "skip=%count%tokens=1*delims=:" %%i in ('findstr /n "^" %file%') do if not defined found set "found=%%i"&set "variable=%%j"
:: Note: you need %found% to find empty lines
echo variable: [%variable%] found at line %found%
endlocal 
```

对于您的问题：您不能使用 !variable! 或 for 循环变量作为`for parameter`代码块中的（delims、skip 等），在同一代码块中更改其值。

# filemaker - 将搜索结果的每条记录导出到单个文件？

> ID：15579315
> 
> 赞同：0
> 
> 时间：2013-03-22T20:28:01.830
> 
> 标签：filemaker

这在正常情况下似乎是一个如此简单的操作，但我似乎无法让 FileMaker 配合。

我想做的事情：1）循环遍历每个找到的记录，一次一个。2) 将此记录的内容导出为基于记录中的字段的文件名。

```
环形
    设置变量[$path; 值：Get(FilePath) & "/../somefolder" & MyTable1::my_field_1]
    导出记录 [无对话框；"$路径"; Unicode(UTF-8)]
结束循环

```

但是，此脚本会将每条记录附加到同一文件中。他们似乎没有提供“出口记录”（单数），所以我不确定如何做到这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:41:46.770

我能够找到解决方案：

```
找到所有
转到记录/请求/页面 [First]
环形
  忽略
  查找省略
  设置字段 ["HTML 文件名","External("DM-Export", KeyField & ".html")"]
  导出记录 [恢复]
  找到所有
  转到记录/请求/页面[在最后一个，下一个之后退出]
结束循环

```

按照第 7 步：http: [//help.filemaker.com/app/answers/detail/a_id/3438/kw/exporting%20found%20set](http://help.filemaker.com/app/answers/detail/a_id/3438/kw/exporting%20found%20set)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:19:29.847

FileMaker 的“导出记录”脚本步骤始终导出整个搜索结果。您必须遍历搜索结果，并在导出前一次隔离每条记录：

```
Go to Record/Request/Page [First]
Loop
   Set Variable[$path; Value:Get(FilePath) & "/../somefolder" & MyTable1::my_field_1]
   New Window
   Show All
   Omit Record
   Show Omitted
   Export Records [No dialog; "$path"; Unicode(UTF-8)]
   Close Window
   Go to Record/Request/Page [Exit After Last, Next]
End Loop 
```

# parsing - 从 CSV 中删除行

> ID：15579316
> 
> 赞同：2
> 
> 时间：2013-03-22T20:28:11.557
> 
> 标签：parsing, powershell, csv

我有一个带有多个标题的 csv 文档，例如：

```
"日期","RQ","PM","SME","活动","状态码"
“2/2/12”、“6886”、“D_WV”、“约翰·史密斯”、“最近”、“2004”
```

和一个文本文档，它只是一个状态代码列表，每行一个。

我试图弄清楚如何从 CSV 中删除包含文本文件中状态代码的所有行。

到目前为止，我已经尝试使用：

```
$m = gc textfile.txt
Select-String data.csv -Pattern $m -NotMatch 
```

但是，这给我留下了额外的数据，例如

```
data.csv:1"日期","RQ","PM","SME","Activity","状态码"
data.csv:2"2/2/12","6886","D_WV","John Smith","Recent","2004"
```

我也试过：

```
gc data.csv | ? { $_ -notlike $m } 
```

它使用正确的格式，但不想删除任何值。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:53:59.703

我建议采用不同的方法来避免误报：

```
$m = Get-Content textfile.txt
Import-Csv data.csv `
  | ? { $m -notcontains $_."Status code" } `
  | Export-Csv output.csv -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:34:26.030

来自 select-string 的那些 matchinfo 对象可能会令人困惑。这能满足您的需要吗？

```
$m = gc textfile.txt
select-string data.csv -pattern $m -notmatch |
select -expand line 
```

# mongodb - Mongodb 后台索引 - 一旦创建它们仍然是后台吗？

> ID：15579322
> 
> 赞同：28
> 
> 时间：2013-03-22T20:28:29.860
> 
> 标签：mongodb, indexing, mongodb-indexes

在 mongodb 中创建索引时，可以指定`background: true`flag，使索引创建是非阻塞的。这在生产中非常有用，因为您不希望在创建以前显然不需要的索引时锁定整个数据库（因为您没有它）。

阅读[文档](http://docs.mongodb.org/manual/core/indexes/)，似乎这个标志只决定了索引的创建方式，一旦完成，索引的行为就与普通索引完全一样。这就是我想要的——我不希望索引与文档不同步，因为它正在后台更新，尽管我可以想象一个数据库可以做到这一点。

我在这里问是因为该`getIndexes`命令显示索引`background`即使在创建后仍被标记为。这只是一个关于它是如何创建的提醒吗？还是`background`索引在创建后表现不同？也许复制有一些微妙之处？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-24T10:24:04.677

一旦创建，它们就像常规索引一样。他们坚持`getIndexes`只是作为一个提醒，类似于how `unique`，`sparse`等等。

但它也有其他含义。仅仅因为*前台*索引会阻止所有写入者，在这种情况下，您将无法执行`db.testCollection.getIndexes()`，直到所有索引都已创建。同时，当您创建*背景*索引时，您可以调用`db.testCollection.getIndexes()`并且您会看到，该索引似乎已经创建。

但在这种情况下，我们无法确定索引是否已经真正创建。在这种情况下，您需要调用[db.currentOp()](http://docs.mongodb.org/manual/reference/current-op/)如果您看到类似

```
{
  "inprog": [
    {
      "opid": 2001060,
      "active": true,
      "secs_running": 1,
      "op": "insert",
      "ns": "test.system.indexes",
      "insert": {
        "v": 1,
        "key": {
          "a": 1
        },
        "ns": "test.testCollection",
        "name": "a_1",
        "background": 1
      },
          ....
      "msg": "bg index build Background Index Build Progress: 368640/1000000 36%",
      "progress": {
        "done": 368640,
        "total": 1000000
      }
      ...
    }
  ]
} 
```

那么这意味着，后台索引的创建仍在进行中，您还可以看到有关该过程的一些信息。

例如，您可能会做一些粗略的计算：1000000 中的 368640 需要 1 秒（+1 秒作为可能的偏移量），因此一切都需要 3-6 秒（最终需要 4.8 秒）。

显然，如果您看不到正在进行的此类操作，则说明已经创建了索引。

*注意*`db.currentOp()`：如果您有许多并发操作，那么您可以为, fe指定搜索参数

```
db.currentOp({"insert.background":1}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-04T10:41:02.057

有多个索引选项 - 前景（默认）和背景。前台相对较快，它会阻止所有的作者和读者。我们仍然可以访问的其他数据库。这不应该在生产环境中完成。

后台索引创建有点慢，它们不会阻止读取器和写入器。使用`MongoDB`2.4 及更高版本，您甚至可以在同一个数据库上并行创建多个后台索引。

从`MongoDB`2.6 开始，在主服务器的后台创建索引将导致在辅助服务器的后台创建索引。当主节点完成构建其索引时，辅助节点将开始创建索引。

还有另一种在生产系统中非常有效地创建索引的方法。那就是在用于服务大多数查询的不同服务器上创建索引。比如说，在多个数据库服务器协同工作的副本集中，可以取出一个并将请求路由到可用的服务器。前台索引的创建可以在单独的服务器上完成。创建成功后，可以带回集群。

# ruby-on-rails - 使用 Capistrano 在 AWS EC2 上部署 Rails 应用程序

> ID：15579323
> 
> 赞同：0
> 
> 时间：2013-03-22T20:28:34.413
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, capistrano

我正在尝试在 AWS-EC2 实例上使用 Capistrano 部署 Rails 应用程序，默认用户 (Ubuntu) 在另一个用户的家中，但它给了我“权限被拒绝”错误。这是我的代码：

```
server "9.9.9.9", :web, :app, :db, primary: true

set :application, "some_app"
set :user, "ubuntu"
set :keep_releases, 3
set :location, "9.9.9.9"
ssh_options[:keys] = ["~/Keys/serverkey.pem"]
ssh_options[:forward_agent] = true
default_run_options[:pty] = true
set :use_sudo, false

task :hello do
  run "echo 'Hello World' > /home/other_user/i_was_here.txt"
end 
```

这是输出：

```
$ cap hello
  * 2013-03-22 14:11:29 executing `hello'
  * executing "echo 'Hello World' > /home/other_user/i_was_here.txt"
    servers: ["9.9.9.9"]
    [9.9.9.9] executing command
 ** [out :: 9.9.9.9] sh: cannot create /home/other_user/i_was_here.txt: Permission denied
    command finished in 798ms
failed: "sh -c 'echo '\\''Hello World'\\'' > /home/other_user/i_was_here.txt'" on 9.9.9.9 
```

有什么问题？目的是为另一个用户部署 Rails App，所以我有一些疑问：

1.  有没有办法直接与其他用户在 AWS-EC2 实例上部署 Rails 应用程序？
2.  如果 #1 的答案是“否”，那么使用默认用户 Ubuntu 为其他用户部署 Rails 应用程序的正确方法是什么？（因为将来其他用户尝试访问应用程序时不会出现权限问题）

在服务器中管理着许多用户，因为我们想为每个用户获取存储和带宽，所以我们这样做了，直到今天我们从 Capistrano 开始哈哈。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:52:11.670

通常是部署为应该运行/维护应用程序的用户。否则，您必须真正确保两个用户都没有弄乱权限。

这种情况的原因是您不想共享凭据吗？如果是这样，请考虑使用`.ssh/authorized_keys`为每个用户添加的特殊部署 ssh 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:20:10.280

从您的配置文件中删除`ssh_options[:forward_agent] = true`行，即使我遇到了同样的问题，我删除了这行并且它现在对我来说工作正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:01:15.603

谢谢大家的回答。我所做的就是按照这些步骤与特定用户连接 Capistrano。

[http://utkarshsengar.com/2011/01/manage-multiple-accounts-on-1-amazon-ec2-instance/](http://utkarshsengar.com/2011/01/manage-multiple-accounts-on-1-amazon-ec2-instance/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T00:13:48.363

ubuntu 用户没有权限访问 other_user 的主目录，除非使用了 sudo，或者你更改了 /home/other_user 的权限。

如果您想以 other_user 身份运行应用程序，最好的方法是将 capistrano 配置为以 other_user 身份部署。您需要将公共 ssh 密钥添加到 /home/other_user/.ssh/authorized_keys。如果您希望应用程序作为 ubuntu 运行，请部署到 /home/ubuntu。

# android - 如何在已安装的 .apk 上运行 monkeyrunner

> ID：15579328
> 
> 赞同：2
> 
> 时间：2013-03-22T20:28:45.453
> 
> 标签：android, monkeyrunner

我正在尝试在已通过 monkeyrunner 安装的应用程序上运行一些命令。我编辑了 d.android.com 上列出的示例代码，并将其更改为：

```
# Imports the monkeyrunner modules used by this program
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

# Connects to the current device, returning a MonkeyDevice object
device = MonkeyRunner.waitForConnection()

# Installs the Android package. Notice that this method returns a boolean, so you can test
# to see if the installation worked.
device.installPackage('myproject/bin/MyApplication.apk')

# sets a variable with the package's internal name
package = 'com.example.myTestApp'

# sets a variable with the name of an Activity in the package
# activity = 'com.example.android.myapplication.MainActivity'

# sets the name of the component to start
runComponent = package

# Runs the component
device.startActivity(component=runComponent)

# Presses the Menu button
device.press('KEYCODE_MENU', MonkeyDevice.DOWN_AND_UP)

# Takes a screenshot
result = device.takeSnapshot()

# Writes the screenshot to a file
result.writeToFile('myproject/shot1.png','png') 
```

如您所见，我将代码更改为（希望）打开`com.example.myTestApp`但它没有打开我的应用程序，但它似乎在当前应用程序上运行命令。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:37:54.537

您应该将 Activity 指定`runComponent`为

```
runComponent = package + "/" + activity 
```

要获取可启动活动的名称：

```
$ aapt dump badging <name>.apk | grep launchable-activity 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-10T15:47:19.397

我能够使用以下方法从 Play 商店中任何已安装的 apk 获取启动活动：

[从 adb 获取包的可启动活动名称](https://stackoverflow.com/questions/12698814/get-launchable-activity-name-of-package-from-adb)

```
adb shell pm list packages -f 
```

然后你可以使用 adb pull ：

```
adb pull <APK path from previous command> <toYourDesiredLocation> 
```

例如：（adb pull /system/app/MyAPK.apk C:\someLocation）

然后aapt获取你想要的信息（aapt当前位于~\sdk\build-tools\android-4.3）：

```
aapt dump badging <FromYourDesiredLocation\pulledfile.apk> 
```

然后寻找launchable-activity: name='SomeActivityName'

希望能帮助其他人寻找同样的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T11:13:25.990

首先检查您的应用程序是否已安装。

```
apk_path = device.shell('pm path com.xx.yy')
if apk_path.startswith('package:'):
    print "XXXYY already installed."
else:
    print "XXXYY app is not installed, installing APKs..."
    device.installPackage('D:/path to apk/yourapp.apk') 
```

参考[http://antoine-merle.com/introduction-to-the-monkey-runner-tool-2/](http://antoine-merle.com/introduction-to-the-monkey-runner-tool-2/)

# knockout.js - 使用 durandal 在我的标题中注入一些特定于当前视图的按钮

> ID：15579330
> 
> 赞同：1
> 
> 时间：2013-03-22T20:28:53.143
> 
> 标签：knockout.js, durandal, hottowel

**我使用Durandal 框架**开发了一个 ASP.NET MVC 解决方案。

在 shell 页面上，我有侧栏（其中包含我的主菜单）和标题栏。此标题栏包含特定于当前视图的按钮。

例如，如果我显示一个搜索视图，我需要在标题栏中“注入”特定按钮，如“搜索”或“重置”按钮。

另一个例子，如果我显示一个详细视图，我需要在标题栏中“注入”特定按钮，如“保存”或“取消”按钮。

**我的问题**：如何继续能够在我的标题栏中为当前视图“注入”一些 html 元素（按钮）？

也许我需要重构我的外壳以在其他地方编码我的标题栏？

以下是我的 shell 页面的摘录：

```
<div class="page secondary with-sidebar">
    <div id="header">
         ....
    </div> <!--header-->

    <div class="page-sidebar">
         ....
    </div>
    <div class="page-region">
        <div class="page-region-content">

            <div class="grid">   
                <div class="row">
                        <div class="container-fluid page-host">
                            <!--ko compose: { 
                                model: router.activeItem, //wiring the router
                                afterCompose: router.afterCompose, //wiring the router
                                transition:'fade', //use the 'fade' transition when switching views
                                cacheViews:true //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models)
                            }--><!--/ko-->
                        </div>
                </div>
            </div> <!--grid-->   
        </div> <!--page-region-content-->
    </div> <!--page-region-->
</div> <!--page secondary--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:44:16.793

这是您可以考虑的一种方法。

它假定您的每个模块都遵循一组约定。例如，可搜索模块将公开搜索功能，可保存模块将公开保存功能。

鉴于此，您可以像这样构建标题以包含按钮并根据需要隐藏/显示它们。

```
<div id="header">

    <!-- other header content -->

    <!-- injected header buttons -->

    <!-- will only be shown if the activeItem has a search function -->
    <button data-bind="visible: router.activeItem().search, 
                       click: router.activeItem().search">Search</button>

    <!-- will only be shown if the activeItem has a resetfunction -->
    <button data-bind="visible: router.activeItem().reset, 
                       click: router.activeItem().reset">Reset</button>

    <!-- will only be shown if the activeItem has a save function -->
    <button data-bind="visible: router.activeItem().save, 
                       click: router.activeItem().save">Save</button>

    <!-- will only be shown if the activeItem has a cancel function -->
    <button data-bind="visible: router.activeItem().cancel, 
                       click: router.activeItem().cancel">Cancel</button>
</div> 
```

如果您的模块公开了您提到的任何功能，那么按钮将相应地显示。

# ios - CMMotionManager 块中的 CABasicAnimation 性能问题

> ID：15579332
> 
> 赞同：0
> 
> 时间：2013-03-22T20:28:55.337
> 
> 标签：ios, objective-c, cocoa-touch, objective-c-blocks, cabasicanimation

我有一个 CMMotionManager 设置，其中 deviceMotionUpdateInterval 设置为 100 HZ，如下所示：

```
motionManager = [[CMMotionManager alloc] init];
motionManager.deviceMotionUpdateInterval = 1/100.0; 
```

我正在使用这样的块来从陀螺仪获取偏航值

```
    [motionManger startDeviceMotionUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:^(CMDeviceMotion *motion, NSError *error) { //get yaw values}];

```

我还有一个 CABasicAnimation 在同一个块中进行动画处理。我将每个动画的持续时间设置为 0.01 秒。动画是一个圆形进度条，表示设备旋转了多少度。这在 iPhone 5 上完美运行。但是在 iPhone 4 和 4S 等旧设备上，进度条填充与设备旋转的实际度数值之间存在显着延迟。基本上，如果手机快速旋转 180 度，进度条填充速度会慢得多，才能到达 180 度点。在 iPhone 5 上的相同场景中，进度条会瞬间处于 180 度点。

我的问题是，我能做些什么来提高性能，使动画像 iPhone 5 一样流畅且瞬间准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T06:51:33.563

[我刚刚在这里](https://stackoverflow.com/questions/17659352/cmmotionmanager-vs-uiaccelerometer-efficiency/17716398#17716398)回答了一个类似的问题。

简而言之，block 方法的开销很大，您需要以您选择的时间间隔手动轮询 CMMotionManager。CMMotionManager 类参考中的“运动数据的定期采样”中有详细说明。

# c# - 带有文本框控件的多线程

> ID：15579333
> 
> 赞同：0
> 
> 时间：2013-03-22T20:28:55.883
> 
> 标签：c#, multithreading

我是 C# 的初学者。而且我不明白为什么接下来的两个示例会给出不同的结果。我在[msdn](http://msdn.microsoft.com/ru-ru/library/ms171728.aspx)中使用 microsoft 示例。在第一个示例中，它在文本框中显示一个数字。在第二个示例中，它为每个线程显示从 0 到 1000 的所有数字。

第一个例子：

```
 delegate void SetTextCallback(object text);

    private void WriteString(object text)
    {

        if (this.textBox1.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(WriteString);
            this.BeginInvoke(d, new object[] { text });
        }
        else
        {
            for (int i = 0; i <= 1000; i++)
            {
                textBox1.Text = text.ToString();
            }

        }

    } 
```

第二个例子：

```
 private void MyApp_Load(object sender, EventArgs e)
    {
        System.Windows.Forms.Control.CheckForIllegalCrossThreadCalls = false;

    }

    private void WriteString(object text)
    {
        for (int i = 0; i <= 1000; i++)
        {
            textBox1.Text = text.ToString();
        }
    } 
```

以及调用这些示例的方法

```
 private void button1_Click(object sender, EventArgs e)
    {

        Thread th_1 = new Thread(WriteString);
        Thread th_2 = new Thread(WriteString);
        Thread th_3 = new Thread(WriteString);
        Thread th_4 = new Thread(WriteString);

        th_1.Priority = ThreadPriority.Highest; 
        th_2.Priority = ThreadPriority.BelowNormal; 
        th_3.Priority = ThreadPriority.Normal; 
        th_4.Priority = ThreadPriority.Lowest; 

        th_1.Start("1");
        th_2.Start("2");
        th_3.Start("3");
        th_4.Start("4");

        th_1.Join();
        th_2.Join();
        th_3.Join();
        th_4.Join();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:17:41.977

好吧，我在我的 VS 中进行了分析。我也是 C# 的新手。但我可以推断如下：

方案一：

Begin Invoke 是调用方法的异步方式。因此，它最后只显示一个结果。如果您在 VS 中缓慢地执行 F11 并观察，并不是每次都得到结果 4。但有时当您执行 F11 并在某些地方逐步进行时（我的意思是延迟），由于多线程，有时您也会得到 3。您应该记住，多线程永远不会一直以相同的方式运行，这意味着假设如果多线程中的应用程序或模块一次给您一个结果，两次和 10 次，您不能确定它是正确的或优化的代码。因为在客户端环境中，由于其自​​身的行为，它可能导致不同的结果，这些结果可能在调试时被忽视，甚至不会发生。我在一个不错的博客中读到它。

方案二：

由于它是多线程的，我可以看到不同线程的行为在不同的时间被调用，并且当它完成工作时，我看到文本框在几秒钟内快速更新，这是肉眼不可能注意到的，但最终结果，显示一个数字。您还检查了跨线程调用）当您使用 F11 进入每一行代码时，您会发现这种行为并很好地理解）并且您命令不要捕获它。这使得线程在第二种情况下一起工作。

这是我的推论，但我可以说，非常老套！我没有自信地声称这一点，而只是我的观察:)

让一些伟大的人加入他们的观点来帮助我们:)

干杯

# asp.net - ASP.NET 中的RequiredFieldValidator

> ID：15579334
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:29:03.497
> 
> 标签：asp.net, validation

asp.net 客户端验证或服务器端验证中的 requiredfieldvalidator 是什么？如果是客户端，是通过JavaScript实现的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:30:44.603

> asp.net 客户端验证或服务器端验证中的 requiredfieldvalidator 是什么？

两个都

> 如果是客户端，是通过JavaScript实现的吗？

是的

# c++ - 来自字符串的Qt QString - 奇怪的字母

> ID：15579336
> 
> 赞同：4
> 
> 时间：2013-03-22T20:29:17.993
> 
> 标签：c++, qt, qstring

每当我尝试将 a`std::string`转换为`QString`带有这个字母的 a （' **ß** '）时，它`QString`都会变成类似“ **Ã** ”或其他一些非常奇怪的字母。怎么了？我使用了这段代码，它没有引起任何错误或警告！

```
std::string content = "Heißes Teil.";
ui->txtFind_lang->setText(QString::fromStdString(content)); 
```

这个`std::string`角色没有问题。我什至把它写成一个文本文件没有问题。那么我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:33:38.353

您需要将编解码器设置为 UTF-8 ：

```
QTextCodec::setCodecForTr(QTextCodec::codecForName("UTF-8"));
QTextCodec::setCodecForCStrings(QTextCodec::codecForName("UTF-8"));
QTextCodec::setCodecForLocale(QTextCodec::codecForName("UTF-8")); 
```

默认情况下，Qt 使用有限的 Latin-1 编码。通过添加此代码，您将默认编码设置为 UTF-8，这允许您使用更多字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:12:44.313

虽然[antoyo](https://stackoverflow.com/users/389119/antoyo)的[答案](https://stackoverflow.com/q/15579336/147435)有效，但我不太清楚为什么。所以，我决定调查一下。

我的所有文档都以[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码，大多数网页也是如此。该`ß`字符的 UTF 代码点为[UTF+00DF](http://www.utf8-chartable.de/)。

由于 UTF-8 是一种可变长度编码，因此在二进制形式中，`ß`将被编码为`11000011 10011111`or `C3 9F`。因为默认情况下 Qt 依赖于[Latin1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)编码。它会读`ß`作两个不同的字符。第一个`C3`将映射到`Ã`，第二个`9F`不会映射到任何内容，因为 Latin1 无法识别 128-159（十进制）之间的字节。

这就是为什么在使用 Latin1 编码时`ß`出现的原因。`Ã`

* * *

旁注：您可能想复习一下 UTF-8 编码的工作原理，因为否则`ß`即使它的代码点`DF`小于`FF`并且应该只消耗一个字节，它也需要两个字节似乎有点不直观。

# php - MySql PHP 更新错误

> ID：15579338
> 
> 赞同：0
> 
> 时间：2013-03-22T20:29:22.660
> 
> 标签：php, mysql, insert-update

我已经把这段代码弄乱了几个小时，但无法弄清楚它为什么不起作用。这是一个通过 JQuery 传递的配置文件更新 php 页面，除了它实际上更新到表中之外，一切似乎都很好。这是我正在使用的代码：

```
session_start();
include("db-connect.php");//Contains $con

$get_user_sql = "SELECT * FROM members WHERE username = '$user_username'";
$get_user_res = mysqli_query($con, $get_user_sql);
while($user = mysqli_fetch_array($get_user_res)){
    $user_id = $user['id'];
}
$name = mysqli_real_escape_string($con, $_REQUEST["name"]);
$location = mysqli_real_escape_string($con, $_REQUEST["location"]);
$about = mysqli_real_escape_string($con, $_REQUEST["about"]);

$insert_member_sql = "UPDATE profile_members SET id = '$user_id', names = '$name', location = '$location', about = '$about' WHERE id = '$user_id'"; 
$insert_member_res = mysqli_query($con, $insert_member_sql) or die(mysqli_error($con));
if(mysqli_affected_rows($con)>0){
echo "1";
}else{
echo "0";
} 
```

我得到的所有返回值为 0，有人能发现任何潜在的错误吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:33:51.163

首先，使用

```
require("db-connect.php"); 
```

代替

```
include("db-connect.php"); 
```

现在，考虑使用准备好的语句，您的代码容易受到 sql 注入的影响。

考虑使用 PDO 代替 mysql 语法，从长远来看，我发现它更好用并且避免了很多无意义的问题，你可以这样做（你可以将它保存在 db-connect 文件中如果您愿意，甚至可以使数据库连接成为全局）：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
        return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

然后初始化变量：

```
$host = 'localhost';
$user = 'root';
$databaseName = 'databaseName';
$pass = ''; 
```

现在您可以通过以下方式访问您的数据库

```
$db = connectToDatabase($host, $databaseName, $user, $pass); 
```

现在，这是解决问题的方法（使用准备好的语句，避免 sql 注入）：

```
function userId($db, $user_username)
{
    $query = "SELECT * FROM members WHERE username = :username;";
    $statement = $db->prepare($query); // Prepare the query.
    $statement->execute(array(
        ':username' => $user_username
    ));
    $result = $statement->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
        return $result['user_id'];
    }
    return false
}

function updateProfile($db, $userId, $name, $location, $about)
{
    $query = "UPDATE profile_members SET name = :name, location = :location, about = :about WHERE id = :userId;";
    $statement = $db->prepare($query); // Prepare the query.
    $result = $statement->execute(array(
        ':userId' => $userId,
        ':name' => $name,
        ':location' => $location,
        ':about' => $about
    ));
    if($result)
    {
        return true;
    }
    return false
}

$userId = userId($db, $user_username); // Consider if it is not false.

$name = $_REQUEST["name"];
$location = $_REQUEST["location"];
$about = $_REQUEST["about"];

$updated = updateProfile($db, $userId, $name, $location, $about); 
```

不过，您应该检查查询，我对它们进行了一些修复，但不能 100% 确定它们是否有效。

您可以轻松地创建另一个插入到 tha 数据库中的函数，而不是更新它，或者将其保留在同一个函数中；如果您发现该条目存在，则插入它，否则更新它。

# sql - 捕获更新/插入视图的计算列

> ID：15579339
> 
> 赞同：0
> 
> 时间：2013-03-22T20:29:31.760
> 
> 标签：sql, sql-server, view, sql-server-2008-r2, calculated-columns

我正在使用 SQL Server 2005/2008 R2

我的 SQL 脚本是：

```
UPDATE MyView 
SET MyColumn = 'My new value' 
WHERE ID = 7 
```

错误信息：

> *消息 271，级别 16，状态 1，行 1
> 无法修改列“MyColumn”，因为它是计算列或者是 UNION 运算符的结果。*

我知道这`MyColumn`是来自基表的计算列（例如 when `FullName`is computed from `LastName + ', ' + FirstName`）

我的目标是捕获错误，以便脚本继续执行。

我尝试了以下脚本，但没有成功。未捕获错误：

```
BEGIN TRY
    UPDATE MyView 
    SET MyColumn = 'My new value' 
    WHERE ID = 7
END TRY 
BEGIN CATCH
    -- Error occurred while updating view. The script will keep running
END CATCH 
```

我检查了以下脚本试图解决问题，但没有运气：

脚本 1

```
SELECT is_computed 
FROM sys.columns c, sys.views v
WHERE c.object_id = v.object_id
AND v.name = 'MyView' 
```

前面的脚本为所有结果返回 0（这是不正确的，其中一列是计算列）

脚本 2：

```
SELECT * 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE table_name = 'MyView'` 
```

此外，我在返回的脚本中找不到任何与“计算列”或“联合结果”操作有关的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:40:07.593

首先，没有系统视图或表可以真正告诉您视图的哪一列是派生列或计算列。它几乎只能在运行时检测到，或者您可以使用 powershell 脚本或其他东西在 SQL 之外检测它。

如果您只想在异常发生后继续执行脚本，您可以使用 goto，但这不是一个好习惯。

```
 begin try
   select 1/0
end try
begin catch
   Print 'error occurred'
   goto MarkPoint
end catch
select * from sys.columns
MarkPoint: 
  select top 1 * from sys.tables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:44:56.753

并不是说它对您有帮助，但如果您正在运行 SQL Server 2012，您可以运行

```
sp_describe_first_result_set N'select * from View' 
```

它将提供正确的信息（即 is_updateable 设置为 0，is_computed_column 设置为 1）。

这是一个不完全 100% 可靠的查询，它将返回视图中的所有列，这些列实际上是基表中的计算列：

```
 SELECT c.name FROM sys.objects AS O
   INNER JOIN sys.sql_expression_dependencies SED ON SED.referenced_id=O.object_id
    INNER JOIN sys.objects O2 ON O2.object_id=SED.referencing_id
    INNER JOIN sys.columns c on c.object_id = o.object_id
    where
     QUOTENAME(O2.name) = 'MyView'
     and c.is_computed = 1 
```

它不是 100% 可靠的，因为 sql_expression_dependencies 表不能完全保持最新状态，并且不能完美地“读取”查询（并且它错过了函数调用中的函数调用等内容）但是对于标准的“view =表中的列”对象，它将正常工作。

# .net - 当 ControlTemplate 对象被禁用时，WPF 样式在模板中具有不同的颜色

> ID：15579343
> 
> 赞同：0
> 
> 时间：2013-03-22T20:30:04.480
> 
> 标签：.net, wpf, xaml

假设我有一个看起来像这样的风格：

```
<Style TargetType="{x:Type ScrollBar}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="Bg" Background="Grey">

                    <!-- Non-Relevant Stuff Here -->

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当滚动条被禁用时，我希望网格背景为红色。我可以这样做：

```
<Style TargetType="{x:Type ScrollBar}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="Bg" Background="Grey">

                    <!-- Non-Relevant Stuff Here -->

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="False">
          <Setter Property="Template">
            <Setter.Value>
               <ControlTemplate TargetType="{x:Type ScrollBar}">
                   <Grid x:Name="Bg" Background="Red">

                       <!-- Non-Relevant Stuff Here -->

                   </Grid>
               </ControlTemplate>
           </Setter.Value>
        </Trigger>
    </Style.Triggers>
</Style> 
```

但这重复了我的所有模板。因此，现在必须在两个地方进行任何更改。

如何获得此触发器以允许我仅更改模板中网格的背景？

（注意：为实际 ScrollBar 的 Background 属性添加 Setter 没有任何效果。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:18:21.193

您需要让您的模板从其他地方获取背景值，通常是控件上的一个属性。例如：

```
<Grid x:Name="Bg" Background="{TemplateBinding Background}"> 
```

然后您的样式触发器可以简单地更改`Background`属性：

```
<Setter Property="Background" Value="Gray"/> 
```

您可能还希望在您的样式中设置背景的默认值。所以你最终会得到这样的东西：

```
<Style TargetType="{x:Type ScrollBar}">
    <Setter Property="Background" Value="Gray"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="Bg" Background="{TemplateBinding Background}">

                    <!-- Non-Relevant Stuff Here -->

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Background" Value="Red"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:44:16.410

只需将其`Trigger`放入`ControlTemplate`而不是`Style`：

```
<Style TargetType="{x:Type ScrollBar}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="Bg" Background="Grey">

                    <!-- Non-Relevant Stuff Here -->

                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                      <Setter TargetName="Bg" Property="Template" Value="Red"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c# - OpenXML v2 很痛苦。为什么我不能创建项目符号列表？

> ID：15579346
> 
> 赞同：1
> 
> 时间：2013-03-22T20:30:27.467
> 
> 标签：c#, ms-word, openxml, office-2007

一个应该创建一个编号列表，另一个应该创建一个项目符号列表，如本网站所示

[http://sharepointweblog.blogspot.com/2009/07/open-xml-insert-bullets-and-numbering.html](http://sharepointweblog.blogspot.com/2009/07/open-xml-insert-bullets-and-numbering.html)

但两者都有编号..为什么？

另外.. 使用 openXML 以编程方式创建 word doc 似乎非常痛苦。. 是否有任何好的参考资料可以帮助解释创建基本 word doc？（一些文字，一些要点）..

```
Paragraph paraBullet1 = new Paragraph(
              new ParagraphProperties(
              new ParagraphStyleId() { Val = "ListParagraph" },
              new NumberingProperties(
                                      new NumberingLevelReference() { Val = 0 },
                                      new NumberingId() { Val = 1 })),
                                      new Run(new Text("List 1"))
                                      ) { RsidParagraphAddition = "005F3962", RsidParagraphProperties = "00330DA9", RsidRunAdditionDefault = "00330DA9" };

Paragraph paraTest2 = body.AppendChild(paraBullet1);

Paragraph paraBullet2 = new Paragraph(
             new ParagraphProperties(
             new ParagraphStyleId() { Val = "ListParagraph" },
             new NumberingProperties(
                                     new NumberingLevelReference() { Val = 0 },
                                     new NumberingId() { Val = 2 })),
                                     new Run(new Text("List 2"))
                                     ) { RsidParagraphAddition = "00031711", RsidParagraphProperties = "00031711", RsidRunAdditionDefault = "00031711" };

Paragraph paraTest2x = body.AppendChild(paraBullet2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-21T08:22:00.233

从这个问题中寻找大卫耶茨的答案。他成功了。他的解决方案虽然要求你拥有不止一颗子弹，但他的助手类有效。我有同样的问题。如果您没有正确设置 numbering.xml，编号列表似乎是默认值（将您的 .doc 重命名为 .zip 并查看 xmld）。

[http://stackoverflow.com/questions/1940911/openxml-2-sdk-word-document-create-bulleted-list-programmatically](http://stackoverflow.com/questions/1940911/openxml-2-sdk-word-document-create-bulleted-list-programmatically)

# ajax - MVC，PartialView 中的 C# WebGrid，使用 Ajax 删除行

> ID：15579350
> 
> 赞同：0
> 
> 时间：2013-03-22T20:30:41.003
> 
> 标签：ajax, asp.net-mvc

我有一个`WebGrid`和一个链接，用于在这样`PartialView`定义的内部删除行 -

```
@Html.ActionLink("Delete", "DeleteThis", "MyController", new { id = SelectedId }, null)
<div id="MyGrid">
@{
    var grid = new WebGrid(Model.ListOfStuff, canSort: true, ajaxUpdateContainerId: "MyGrid");   

    @grid.GetHtml()
}
</div> 
```

选择网格上的项目后，用户可以单击“删除”链接从数据库中删除该行。

我的问题是，我想让该调用成为**Ajax**调用*并*在删除后更新网格。我的排序以 Ajax 方式工作，但我不知道如何让“删除”与 Ajax 一起工作。我的控制器代码如下所示 -

```
 public ActionResult Index()
    {
        //CODE TO RETRIEVE THE MODEL

        return PartialView("Index", model);
    }

    public ActionResult DeleteThis(string id)
    {
        ////CODE TO DELETE RECORD

        return RedirectToAction("Index");  // I ALSO TRIED return PartialView("Index", model)         } 
```

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:45:36.877

侦听链接的单击事件并对执行删除功能的操作方法进行 ajax 调用。

确保您的`DeleteThis`方法用`HttpPost`属性装饰。删除应该始终是一个**HttpPost**操作。不是 GET 操作。

```
[HttpPost]
public ActionResult DeleteThis(string id)
{
  try
  {
  // to do : delete
   return Json(new { Status="Deleted"});
  }
  catch(Exception ex)
  {
    //log the error
   return Json(new { Status="Error"});
  } 
} 
```

从您的 Action 方法中，您将返回一个 JSON。在您的 post 方法的回调中，检查 Status 属性值以查看删除操作是否成功。

```
$(function(){

  $("#SelectedId").click(function(e){
    e.preventDefault();

    var selectedItemId=34; // you need to get this from the grid;

    $.post("@Url.Action("DeleteThis","Home")/"+selectedItemId,function(data){
         if(data.Status="Deleted")
         {
          //reload the page or just reload the partial view as needed
          window.location.href=window.location.href;
          // $("#GridContainer").load(@Url.Action("List","Users")");
         }
    });

  });

}); 
```

# c# - 使用控件中的动态图像为 WP8 创建动态磁贴会引发“NotSupportedException”

> ID：15579351
> 
> 赞同：4
> 
> 时间：2013-03-22T20:30:41.253
> 
> 标签：c#, windows-phone-8, isolatedstorage, live-tile, dynamic-image-generation

我正在使用以下代码获取自定义用户控件，从中制作位图，然后将其保存到隔离存储中，以用于 WP8 Live Tile。

```
public static void UpdateTile()
{
    var frontTile = new LiveTileRegular(); // Custom Control
    frontTile.Measure(new Size(173, 173));
    frontTile.Arrange(new Rect(0, 0, 173, 173));

    var bmp = new WriteableBitmap(173, 173);
    bmp.Render(frontTile, null);
    bmp.Invalidate();

    const string filename = "/LiveTiles/LiveTileRegular.jpg";

    using (var isf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (!isf.DirectoryExists("/LiveTiles"))
        {
            isf.CreateDirectory("/LiveTiles");
        }

        using (var stream = isf.OpenFile(filename, FileMode.OpenOrCreate))
        {
            bmp.SaveJpeg(stream, 173, 173, 0, 100);
        }

        Debug.WriteLine("Image Exists: " + (isf.FileExists(filename) ? "Yes" : "No")); // Displays "Yes"
    }

    ShellTile.ActiveTiles.First().Update(new FlipTileData
    {
        Title = "Title",
        BackgroundImage = new Uri("isostore:" + filename, UriKind.Absolute),
    }); // Throws a NotSupportedException
} 
```

使用非常非描述性的消息传递到方法上`NotSupportedException`。`ShellTile.ActiveTiles.First().Update()`

有什么我明显做错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T17:18:36.287

“TargetInnvocationException”异常实际上隐藏了我在`ShellTile.ActiveTiles.First().Update()`移出 UI 线程后发现的“NotSupportedException”异常的根本问题。

异常仍然没有描述问题是什么，但是在翻阅了不同的论坛和文档之后，我发现动态创建的图像的路径在与 Live Tiles 一起使用时非常重要。

如果您将隔离存储中的图像用于动态磁贴或外壳磁贴，则基本文件夹必须是

**/共享/外壳内容**

改变后

```
const string filename = "/LiveTiles/LiveTileRegular.jpg"; 
```

到

```
const string filename = "/Shared/ShellContent/LiveTileRegular.jpg"; 
```

一切正常。

我们 Windows Phone 开发人员能否获得更好的异常消息？！？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:48:47.357

我相信[ShellTile.ActiveTiles](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.shell.shelltile.activetiles%28v=vs.105%29.aspx) .First(orDefault) 是应用程序磁贴，而不是辅助固定磁贴。尝试使用 Skip(1) 从第二个图块开始调用 Update。

# c# - ASP.NET MVC 4：其他区域的默认路由

> ID：15579355
> 
> 赞同：1
> 
> 时间：2013-03-22T20:30:50.083
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在尝试将**~/**的默认路由设置为*Area* **OnlineUser**：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", 
                            area="OnlineUser", id = UrlParameter.Optional }
        );
    } 
```

但是，它错误表明转到站点的根“/”是一个例外，因为找不到控制器/操作。

我设置的区域错误吗？

我在该地区有一个主页和索引，可以通过它的路线很好地到达该地区：

```
 context.MapRoute(
            "OnlineUser_default",
            "OnlineUser/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        ); 
```

确切的错误是：

```
The view 'Index' or its master was not found or no view engine supports the 
searched locations. The following locations were searched: 
~/Views/Home/Index.aspx ~/Views/Home/Index.ascx 
~/Views/Shared/Index.aspx ~/Views/Shared/Index.ascx 
~/Views/Home/Index.cshtml ~/Views/Home/Index.vbhtml 
~/Views/Shared/Index.cshtml ~/Views/Shared/Index.vbhtml 
```

# javascript - 使用 Jquery 获取点击的项目属性

> ID：15579358
> 
> 赞同：0
> 
> 时间：2013-03-22T20:31:00.850
> 
> 标签：javascript, jquery, html

```
<aside class="widget">
<h6 class="widget-title">Play List</h6>

<div class="newsletter">
<div class="nwlwrap">

<article class="post-item">
    <div class="featured-image clearfix" > 
        <a href="http://vimeo.com/46163823" rel="prettyPhoto" class="link-thumbnails-video">    
        <img alt="" src="images/thumbs/video-1.jpg" class="thumbnails link-thumbnails-video">
        </a>

        <div class="image-caption">
            <span>Posted 2012/07/18&nbsp;</span>
        </div>
    </div>
    <div class="entry-content">
        <h3 class="entry-title"><a href="#">What is Kopatheme Layout Manager</a></h3>
        <p>Vivamus. Sagittis facilisis hymenaeos scelerisque ad scelerisque. Massa felis odio rhoncus ligula sollicitudin Magna. Laoreet. Vel tristique tellus nam quis curae</p>
    </div>
</article>

<div class="clear"></div>
<div class="kp-divider"></div>

</div>
</div>
</aside>

$(".widget").click(function(event){
         $(this).find('.featured-image clearfix img').attr('id');
         alert("hey");
    }); 
```

我有一个视频列表，当用户单击其中一个视频时，我希望单击的视频开始在视频播放器中播放。jquery 点击功能不起作用，请指导我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:33:29.977

```
<div class="featured-image clearfix" > 
```

那将是一个具有两个类的元素，您可以这样定位：

```
$(".widget").click(function(event){
     $(this).find('.featured-image.clearfix img').attr('id');
     alert("hey");
}); 
```

使用类之间的空格看起来像：

```
<div class="featured-image"><div class="clearfix"></div></div> 
```

现在，如果图像只有一个 ID，你会明白吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:53:08.183

@Desire 您的 JavaScript 代码未包含在脚本标记中。您没有包装它的事实让我想知道您的页面中是否包含 jQuery？此外，正如@adeneo 指出的那样，您的对象没有任何 ID。

因此，将您的脚本包装在脚本标签中，并确保您的对象具有 ID 或找到其他方法来识别它。此外，您无需编写：

```
$(this).find('.featured-image.clearfix img').attr('id'); 
```

给出*div*和 ID，它会容易得多，并且会处理得更快。

# bash - 如何为逻辑卷创建挂载点

> ID：15579359
> 
> 赞同：1
> 
> 时间：2013-03-22T20:31:08.157
> 
> 标签：bash, redhat, rhel6, mount-point

我有一个脚本，我想帮助我创建一个逻辑卷管理器，其分区如下所示：

```
# Partitioning scheme for 120 GB HD

# Partition clearing information
clearpart --all --initlabel
# Clear the Master Boot Record
zerombr
# Disk partitioning information
part /boot --fstype="ext4" --size=256
part swap --fstype="swap" --size=16384
part /PV --fstype="ext4" <96> size=1 --grow --encrypted --passphrase=password
volgroup sysvg /PV
logvol / --vgname=sysvg --size=5120 --name=root
logvol /tmp --vgname=sysvg --size=2048 --name=tmp
logvol /usr --vgname=sysvg --size=4096 --name=usr
logvol /home --vgname=sysvg --size=20480 --name=home
logvol /opt --vgname=sysvg --size=5120 --name=opt
logvol /var --vgname=sysvg --size=5120 --name=var
logvol /var/log --vgname=sysvg --size=10240 --name=log
logvol /var/log/audit --vgname=sysvg --size=5120 --name=audit 
```

每次我尝试将其合并到我的构建中时，我​​都会收到一条错误消息，指出它找不到安装点。如果我的挂载点在上面列出，我不确定为什么会这么说。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:34:03.163

这是什么发行版..？

我看到“用户输入代码她的 logvol /home”

意味着它对 linux 很敏感，您应该查看 /etc/fstab

# 编辑

尝试查看分开的命令[http://www.gnu.org/software/parted/manual/parted.html#Partitioning](http://www.gnu.org/software/parted/manual/parted.html#Partitioning) 和一些 grub-install mbr 或只是简单的 mbr 包

# sed - Cygwin sed：使用十六进制、八进制或十进制搜索/替换一个不可打印的字符

> ID：15579361
> 
> 赞同：1
> 
> 时间：2013-03-22T20:31:11.763
> 
> 标签：sed, cygwin, hex, ascii, octal

很抱歉这个简单的问题，但我已经失明了四天的学习和尝试，似乎无法找到正确的语法。

在 cygwin 上使用 sed，我试图用另一个不可打印的字符替换一个不可打印的 ASCII 字符。

这是我的源文件，使用大写文本 [在方括号内] 表示不可打印的 ascii 字符：

```
myfile.txt:

line one[LF]
line two[LF]
line three[LF]
[SUBSTITUTE][LF]
line four{LF]
line five[LF]
line six[LF]
.
.
. 
```

我想用 TAB 替换 LF。

由于 LF 是十六进制 0A 而制表符是十六进制 09，所以我基本上尝试过：

```
sed -i 's/\x0A/\x09/g' myfile.txt 
```

这不会改变文件中的任何内容。

当然，我尝试了不同的开关，例如 -b、-e 和 -r，有括号和没有括号，有和没有 /g，额外的反斜杠和没有反斜杠，八进制和十进制符号，一直到精灵符文，绝对没有成功。

我读了一些使用“回声”而不是文件作为来源的答案，他们只是让我感到困惑并且没有用。

其他示例使用“作弊”，例如实际单词 TAB，但它们阻止我学习使用数字的语法，因此我可以将其应用于其他不可打印的字符，而不仅仅是 TAB。

当我尝试“文件”命令时，我得到：

```
file myfile.txt
file.txt: data 
```

所以，我当然试过：

```
sed -i -t UTF-8 's/\x0A/\x09/g' myfile.txt 
```

但我的 sed 不支持该 -t 选项。

当我尝试这个时：

```
oc -c myfile.txt 
```

我正在搜索的 [LF] 字符显示为：

```
\n 
```

我也试过 \0D 作为我的搜索词，也没有运气。

如果有人想通过显示正确的语法向我提供线索，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:32:28.270

谢谢大家，我很感谢那些试图提供帮助的人。如果 StackOverflow 允许我，我会支持每一次提供帮助的尝试。

我正在回答我自己的问题，希望对其他人有所帮助。

我了解到 sed 不能处理 LF 并不完全正确。它*可以*处理它们，但只有在编写它们时。不是在阅读它们时。

所以，正如我所希望的那样，我不能完全用 sed 完成这项工作。我喜欢 sed 的就地开关，它看起来不像创建另一个文件那么混乱，因此对我的强迫症很有吸引力。

我的文件格式是：

```
Mary(LF)
Smith(LF)
(SUB)(LF)
John(LF)
Public(LF)
(SUB)(LF) 
```

我想要一个结果：

```
Mary(TAB)Smith(LF)
John(TAB)Public(LF) 
```

所以，我想把LF改成TAB，把LF-SUB-LF改成LF。

我首先使用 TR 将所有 LF 更改为 TAB，从而解决了我的问题。不能为此使用 sed。

```
# change LFs to TABs ... so grep can later treat entire file as one line
tr '\012' '\011' < comengo.extract.txt > comengo.extract.out
mv comengo.extract.out comengo.extract.txt 
```

这样，sed 现在可以将整个文件视为一行。sed 只喜欢逐行处理文件，所以我把整行都做得很好。

第二步是让 sed 加入，并进行我想要的更改。我的问题的要点是“我如何表示非打印 ascii 字符？”。

我之前的尝试失败了，因为我试图在 sed 搜索字符串中使用 \x12。现在替换了 LF，我使用了一个不间断的十六进制数字序列。

```
# changes (tab)(sub)(tab) to just (sub)
sed -i 's/\x09\x1A\x09/\x1A/g'   comengo.extract.tx 
```

然后我使用 sed 将 LFs 恢复到文件中，它可以写 LFs

```
# (sub) to (tab)(lf)
sed -i 's/\x1A/\x0A\x09/g'  comengo.extract.txt 
```

这就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:55:39.010

在 sed 中指定换行的可移植方式是使用转义返回：

```
sed -i 's/\
/<tab>/g' 
```

`<tab>`用文字制表符替换文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:37:11.030

怎么用`tr`？

```
tr '\012' '\011' < myfile.txt > tmp.out
mv tmp.out myfile.txt 
```

该`tr`命令是一个纯过滤器；它不（在标准版本中，无论如何）采用任何文件名参数或支持覆盖或......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T14:11:54.003

如果您正在使用`bash`或者`ksh`我建议您使用`$'...'`支持 C 样式反斜杠转义的 shell 语法。例如：

```
[BASH] # echo $'hello\nworld'
hello
world
[BASH] # echo $'hello\x0aworld'
hello
world
[BASH] # 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T08:38:00.780

事实上 sed 可以匹配 LF 字符，如果您在 --binary 之上使用 --null-data ：

`$ echo -e "Line1\r\nLine2\rLine3\nLine4\n\rLine5" | sed --null-data --binary -r -e "s/\x0d\x0a/\x0a/g" | od --format=x1a 0000000 4c 69 6e 65 31 0a 4c 69 6e 65 32 0d 4c 69 6e 65 L i n e 1 nl L i n e 2 cr L i n e 0000020 33 0a 4c 69 6e 65 34 0a 0d 4c 69 6e 65 35 0a 3 nl L i n e 4 nl cr L i n e 5 nl`

# javascript - 日期计算的奇怪错误

> ID：15579364
> 
> 赞同：3
> 
> 时间：2013-03-22T20:31:22.553
> 
> 标签：javascript, jquery, date, datetime

我必须计算两个日期之间经过了多少年。我的代码工作正常 - 除了非常具体的日期。

`dateEnd`下面的代码应该为和产生相同的年份差异`dateEnd1`，但是它们并不相等。如果我将年份从 2003 年更改为 2004 年，它将变得相等。如果我离开这一年，但从三月改为二月，它又会是平等的。

我想这与闰年有关，但我不知道为什么？特别是因为那段时间有 4 个闰年，但是仅相隔一天的日期会发生年份错误计算。

在这两种情况下，我预计年差为 12，但是在第一种情况下，我得到 13 的`dateEnd`变量

```
var dateStart = '2003,03,11';
var dateEnd = '2016,03,10';
var dateEnd1 = '2016,03,09';

var difference = (new Date(dateEnd)).getTime() - (new Date(dateStart)).getTime();
difference = (new Date(difference)).getFullYear() - 1970;
alert('Between ' + dateStart + ' and ' + dateEnd + ' elapsed ' + difference + ' years.');
difference = (new Date(dateEnd1)).getTime() - (new Date(dateStart)).getTime();
difference = (new Date(difference)).getFullYear() - 1970;
alert('Between ' + dateStart + ' and ' + dateEnd1 + ' elapsed ' + difference + ' years.'); 
```

这是[jsfiddle](http://jsfiddle.net/sgDAL/#run)上的代码。评论中的一个人设法在他的[jsfiddle](http://jsfiddle.net/ZFJgt/1/)上重现了这个问题！

这是我得到的变量值

```
dateStart time: 1047337200000
dateEnd time: 1457564400000
dateEnd1 time: 1457478000000
Time difference for the first case: 410227200000
Between 2003,03,11 and 2016,03,10 elapsed 13 years.
Time difference for the second case: 410140800000
Between 2003,03,11 and 2016,03,09 elapsed 12 years. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:03:47.620

这与语言环境无关。当我将日期更改为 2016 年的任何其他月份（1 月或 2 月除外）时，我也会得到 12 / 13 结果。所以原因是 2016 年是闰年，而 2003 年不是。

这证明了将日期差异计算为日期是不可靠的。为了计算年份的差异，您需要使用两个日期的年份部分。还要比较月份部分，如果结束月份在开始月份之前，则减去一年，如果开始月份和结束月份相同，则也比较月份中的日期。如果需要，您还可以包括小时、分钟、秒和毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T22:17:15.970

可以/不能重现的区别不是语言环境，而是时区。对我来说（在加利福尼亚州），上述值给出：

```
alert(new Date(410140800000)); // "Thu Dec 30 1982 16:00:00 GMT-0800 (Pacific Standard Time)"
alert(new Date(410227200000)); // "Fri Dec 31 1982 16:00:00 GMT-0800 (Pacific Standard Time)" 
```

如果我在格林威治标准时间或以东，第二个日期将是“1983 年 1 月 1 日星期六......”，给出不同的年数。闰年可能会进入它，因为闰年​​的数量会影响差异的天数。

我*认为*如果您使用 2005/2018 年，您会看到同样的情况，但正如 Arjan 指出的那样，它并不是那么简单，并且确实涉及闰年。

# regex - 匹配分隔列表中的最后一个元素？

> ID：15579366
> 
> 赞同：3
> 
> 时间：2013-03-22T20:31:25.017
> 
> 标签：regex, vim, vim-syntax-highlighting

我有一些用冒号分隔的数据，如下所示：

```
foo:bar:baz:qux 
```

我想使用正则表达式来匹配*最后一个*元素，在这种情况下，`qux`. 列表可以是任意长度，如果只有一个元素，则根本没有冒号。

我尝试过使用 vim 的零宽度匹配结构，但我似乎无法让它做我想做的事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:36:21.110

使用`$`锚点，这意味着正则表达式必须匹配到行尾。

```
/[a-zA-Z0-9]*$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:36:30.627

```
:\?[^:]\+$ 
```

这是可选的冒号，后跟一个或多个非冒号字符，然后是行尾。

# c++ - 通过 wifi direct 将 PC C++ 与 android 平板电脑连接

> ID：15579370
> 
> 赞同：1
> 
> 时间：2013-03-22T20:31:41.390
> 
> 标签：c++, android-wifi, wifi-direct

[我可以使用类似（ http://msdn.microsoft.com/en-us/library/windows/desktop/hh769062(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh769062(v=vs.85).aspx)）和android平板电脑通过wifi直接与PC建立套接字连接吗？（[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)）？

有人有这样的经历吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T20:35:52.670

是的，这绝对是可能的。由于每个 Android、Windows 和现代桌面操作系统（Linux、OS X 等）都有 C 标准库的实现（至少在某种程度上），因此您可以使用[套接字](http://en.wikipedia.org/wiki/Berkeley_sockets)建立从一个设备到另一个设备的 TCP 连接另一个。

# javascript - 原型输入类型=文件

> ID：15579374
> 
> 赞同：1
> 
> 时间：2013-03-22T20:31:54.883
> 
> 标签：javascript, dom, prototype

我想为原型添加一个[图像预览的方法。](https://developer.mozilla.org/en-US/docs/DOM/FileReader)`input type="file"`它的原型存在吗？像`HTMLInputFileElement`什么？我找到：

*   [w3c 参考](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-6043025)说只有`HTMLInputElement`对象......
*   ...但我相信必须存在一些更特殊的对象，因为[FileList](https://developer.mozilla.org/en-US/docs/DOM/FileList)属性特定于`input type="file"`

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:43:10.900

您只需对`HTMLInputElement`对象进行原型制作。不同类型的输入元素没有唯一的对象。它们都是`HTMLInputElement`具有指定其类型（文本/密码/文件）的属性的 s。这是一个示例：http: [//jsfiddle.net/wwE6h/](http://jsfiddle.net/wwE6h/)。

# java - 组件重复 onResume

> ID：15579375
> 
> 赞同：1
> 
> 时间：2013-03-22T20:31:57.003
> 
> 标签：java, android, onresume

我一直在寻找这一切，但不知道会发生什么......

当我回到以前的活动时，我的组件已正确初始化，但它们上面有一个新的......

我的意思是，在调试模式下，我遵循并执行 onResume 代码，编写文本并设置 onCLicklisteners，但是在好的组件之上显示一个空组件，不知道为什么

当然，当第一次创建应用程序时，它工作正常！

任何想法？

相关代码：组件

```
public class TopLayout extends RelativeLayout {

  public static final int BTN_LEFT = 0;
  public static final int BTN_RIGHT = 1;
  public static final int LBL_TITLE = 2;
  protected Button btnLeft;
  protected Button btnRight;
  protected TextView lblTitle;

  public TopLayout(Context _context, AttributeSet _attrs) {
    super(_context, _attrs);
  }

  public TopLayout(Context _context) {
    super(_context);
  }

  public TopLayout(Context _context, AttributeSet _attrs, int _defStyle) {
    super(_context, _attrs, _defStyle);
  }

  public void initialize(){
    String infService = Context.LAYOUT_INFLATER_SERVICE;
    LayoutInflater li = (LayoutInflater) getContext().getSystemService(infService);
    li.inflate(R.layout.top_layout, this, true);

    btnLeft = (Button)findViewById(R.id.btnLeft);
    btnRight = (Button)findViewById(R.id.btnRight);
    lblTitle = (TextView)findViewById(R.id.lblTitle);
  }

  public void setText(int _element, String _text){
    switch (_element) {
    case BTN_LEFT:
        btnLeft.setText(_text);
        break;
    case BTN_RIGHT:
        btnRight.setText(_text);
        break;
    case LBL_TITLE:
        lblTitle.setText(_text);
        break;
    default:
        throw new RuntimeException("Unknown element to set Text: " + _text);
    }
  }

  public void hideButton(int _element){
    switch (_element) {
    case BTN_LEFT:
        btnLeft.setVisibility(Button.GONE);
        break;
    case BTN_RIGHT:
        btnRight.setVisibility(Button.GONE);
        break;
    default:
        throw new RuntimeException("Unknown button to hide: " + _element);
    }
  }

  public void setClickAction(int _element, OnClickListener _listener){
    switch (_element) {
    case BTN_LEFT:
        btnLeft.setOnClickListener(_listener);
        break;
    case BTN_RIGHT:
        btnRight.setOnClickListener(_listener);
        break;
    case LBL_TITLE:
        lblTitle.setOnClickListener(_listener);
        break;
    default:
        throw new RuntimeException("Unknown button to activate: " + _element);
    }
  }
} 
```

我的活动的onResume：

```
topLyt = (TopLayout) findViewById(R.id.lytTop);
topLyt.initialize();
topLyt.setText(TopLayout.BTN_LEFT, res.getString(R.string.edit));
topLyt.setText(TopLayout.LBL_TITLE, res.getString(R.string.involved_people));
topLyt.setText(TopLayout.BTN_RIGHT, res.getString(R.string.add)); 
```

但问题是，它第一次工作时，第二次我得到了第一个上面的另一个未初始化的对象（它必须是另一个，因为调试时对象编号是相同的，如果我输入，我们可以看到前一个按钮的透明背景）

由于声誉原因无法发布图片，但请看这里：

[https://dl.dropbox.com/u/1668197/header.png](https://dl.dropbox.com/u/1668197/header.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:53:10.713

gpasci 是对的，你在膨胀`R.layout.top_layout`你的`initialize()`方法。所以在任何`onResume()`你都会为你的`TopLayout`对象添加一些东西。`onCreate`按照 gpasci 的建议调用此代码甚至更好，在您的构造函数中调用它。

```
 public TopLayout(Context _context, AttributeSet _attrs) {
    this(_context, _attrs, null);

  }

  public TopLayout(Context _context) {
    this(_context, null);
  }

  public TopLayout(Context _context, AttributeSet _attrs, int _defStyle) {
    super(_context, _attrs, _defStyle);
    initialize()
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:58:32.223

仅在视图构造函数中调用`inititialize()`自定义视图的方法，无需`onResume()`在活动的方法中调用它。

这是有关 Android 平台上自定义视图的[好读物。](http://www.vogella.com/articles/AndroidCustomViews/article.html)

# c# - BitmapSource.Create() 方法中 DPI 的相关性是什么？

> ID：15579376
> 
> 赞同：8
> 
> 时间：2013-03-22T20:31:57.800
> 
> 标签：c#, wpf, dpi, bitmapsource

[我阅读了有关DPI](http://en.wikipedia.org/wiki/Dots_per_inch)的 Wikipedia 文章，但它让我更加困惑……我在图像上没有任何 DPI 信息。[我应该在BitmapSource.Create()](http://msdn.microsoft.com/en-us/library/ms616045.aspx)中使用什么 DPI ，使用常量（96/72？）是否可以，如果我不打算打印图像真的很重要吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T23:08:23.330

DPI 不会以任何方式影响位图的像素。图像的 DPI 只是附加的元数据，它是一种度量，用于描述实际测量中每个像素应该有多大。

例如，您可以有两个图像，它们都代表一张 8.5" x 11" 的扫描纸。一个可能来自 600 dpi 的更高分辨率扫描仪，因此像素尺寸为 5100x6600，每英寸 600 点。同一张纸可以由分辨率较低的扫描仪以 300 DPI 扫描，因此分辨率仅为 2550x3300。

现在假设您想在屏幕上并排显示这两个图像以比较纸张。它们在屏幕上的大小应该相同。较大的图像很可能会按比例缩小，并且并非所有像素都可见。但是它们仍然存在，如果您放大图像，您会看到更精细的质量。放大较低分辨率的图像会导致质量显着降低。

DPI 用于允许您在屏幕上显示各种图像并让它们彼此保持适当的大小比例。这对于印刷也很重要。

作为一项规则，您应该坚持使用默认的 DPI 96，除非您有理由不这样做。

# linux - 将 time 命令的输出保存到日志文件

> ID：15579380
> 
> 赞同：2
> 
> 时间：2013-03-22T20:32:32.693
> 
> 标签：linux, shell, logging

我有一个脚本 hex.bat 有：

```
#!/bin/bash
HEX_ROOT=.
HEX_COLOURS=./data
HEX_PDB=.
HEX_MACROS=.
HEX_CACHE=./data

time ./hex6i.x64 -kill -nogui -ncpu 1 -ngpu 1 -e dock.mac -l job.log 
```

除时间外，所有输出都转到`job.log`。我想节省`jog.log`执行此脚本的时间。有没有人有任何线索？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:45:19.917

`time`将其输出写入标准错误，而不是标准输出，以便将报告放在不同的输出流中。例如，通常希望对正在将输出写入文件的程序进行计时，而不将时间输出放入日志中。

如果您确实希望时间输出进入日志，您有几个选择：

1.  使用`-o`和可能`-a`的选项`time`将输出写入`time`日志文件。您的`time`实现可能有也可能没有这些选项。

2.  重定向标准错误：`time .... 2>> job.log`或`2>&1`。前者写入同一个日志文件（通过追加）；后者将标准错误输出发送到标准输出的任何位置。请注意，两者都会影响运行的程序`time`以及它`time`本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:43:08.203

我得到了使用括号

```
#!/bin/bash
HEX_ROOT=.
HEX_COLOURS=./data
HEX_PDB=.
HEX_MACROS=.
HEX_CACHE=./data

(time ./hex6i.x64 -kill -nogui -ncpu 1 -ngpu 1 -e dock.mac -l job.log) &> job.log 
```

# sql - 检查订单仅适用于今天

> ID：15579381
> 
> 赞同：0
> 
> 时间：2013-03-22T20:32:42.427
> 
> 标签：sql, datetime, sql-server-2008-r2

我意识到这是一个相对基本的问题，但是日期时间总是把我搞砸，我想确保我做得正确（这个审计将被提升为老板）。使用 sql server 2008 r2。下面是我想要的一些 sudo 代码

我应该提到 transactionDate 目前是一个日期时间。这会改变事情吗？

```
DELCARE 
    @today datetime,
    @tomorrow datetime

SET @today = --CODE TO GET THE DATE FOR TODAY
SET @tomorrow = --CODE TO GET THE DATE FOR TOMORROW

SELECT *
FROM table
WHERE custID = '788'
    AND status = 'Cancelled'
    AND transactionDate --IS ONLY TODAY AND NOT TOMORROW OR ANY DAY AFTER 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:35:58.740

如果`transactionDate`是`DATETIME`，那么：

```
AND CONVERT(DATE, TransactionDate) = CONVERT(DATE, CURRENT_TIMESTAMP); 
```

如果`transactionDate`是`DATE`，那么：

```
AND transactionDate = CONVERT(DATE, CURRENT_TIMESTAMP); 
```

这两个仍将使用索引 on `transactionDate`，但这是一种特殊情况。通常第一种形式会破坏 sargability。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:36:42.830

如果您使用日期，那么您应该使用`date`数据类型。这是您的查询的一个版本：

```
SELECT *
FROM table
WHERE custID = '788'
    AND status = 'Cancelled'
    AND cast(transactionDate as date) = cast(getdate() as date) 
```

你也可以这样写：

```
select *
from table
where custId = '788' and status = 'Cancelled' and
      TransactionDate >= cast(getdate() as date) and
      TransactionDate < cast(getdate() + 1 as date) 
```

我认为演员表阻止了索引被使用，但亚伦在评论中启发了我。 [这](http://msmvps.com/blogs/robfarley/archive/2010/01/22/sargable-functions-in-sql-server.aspx)是对 SQL Server 中 sarability 的更广泛解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:51:34.103

正如其他人发布的那样，有几种方法可以做到这一点。

最好的方法是简单地设置

```
where transactionDate = @toDay 
```

如果 transactionDate 仅包含 DATE 部分（没有小时或分钟，所以在午夜），然后 @toDay 相同，仅用于 GETDATE() 或类似的，则此方法将起作用。

正如 ljh 所写，您也可以在当天执行 DATEDIFF，但这将是广泛的，因为它将在每一行上执行 DATEDIFF - 效率不高。

但是，您可以在日期之间检查，所以像这样。

```
WHERE transactionDate >= '2013-03-22' and transactionDate < '2013-03-23'
--Substitute the chars for variables 
```

这将为您提供在午夜和下一个午夜之间发生 transactionDate 的所有行。

编辑：我刚刚看到 Gordon 回答了同样的问题，并包括了关于索引可用的部分，我忘记添加了。

编辑：正如亚伦指出的那样，两者之间不是一件好事。自从我真正编写任何非临时 sql 以来已经有一段时间了，所以我倾向于忘记这样的东西:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:42:56.853

这可能会对您有所帮助，只需将 GETDATE() 替换为您的输入 DATE

```
 SELECT *
FROM table
WHERE custID = '788'
    AND status = 'Cancelled'
    AND DATEDIFF(DD,GETDATE(),transactionDate)=0 
```

# java - 使用我的可执行 jar 文件进行文件关联

> ID：15579383
> 
> 赞同：1
> 
> 时间：2013-03-22T20:32:51.687
> 
> 标签：java, executable-jar

我为我的文件分配了一个名为 *.XSCA 的扩展名。当用户使用我的可执行 jar 文件打开它时，我想读取这个文件的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:09:29.403

假设您在 Windows 下工作：

*   创建一个调用您的 jar 的批处理文件 (*.bat)（它应该类似于“java -jar yourJar.jar”）
*   右键单击您类型的文件，转到“属性”并将打开文件的程序更改为该批处理文件
*   让批处理文件将文件位置作为参数传递给您的 jar

您可以使用任何文本编辑器编写批处理文件。使用谷歌找出方法。它只是你的 jar 的一个包装器，你可以在 windows 中将它与你的文件扩展类型相关联。

编辑：

好的，一步一步来：

那是您的 Java 程序（使用 Eclipse 将其导出为可运行的 jar）：

```
public class ExtensionOpener {

    public static void main(String[] args) throws InterruptedException {

        System.out.println("args:");

        for(String arg: args) 
            System.out.println(arg);

        Thread.sleep(3000);
    }
} 
```

这就是批处理文件（只需将其保存为例如**your-starter.bat**）：

```
@echo run bat
java -jar C:\Users\Thomas\Desktop\FileOpener.jar -file -%1 
```

现在右键单击您的文件（*your.fileextension*）并转到属性并将其与批处理文件相关联。而已。

# javascript - 将方法应用于对象的解决方法，以便方法可以将“this”关键字作为对象访问

> ID：15579387
> 
> 赞同：0
> 
> 时间：2013-03-22T20:33:06.813
> 
> 标签：javascript, function, methods

对不起，但我不知道如何问这个问题......我将解释它。

我有这个代码：

```
function jclass_getVar() {
    return this.myvar;
}
function jclass() {
    this.myvar = "ok";
    this.funcAry = [];
}
jclass.prototype.getVar = jclass_getVar;

var obj = new jclass(); 
```

现在一切都很好。如果我访问`obj.getVar()`它会返回`ok`，但可以说我想动态地创建一个函数数组。这是我的代码：

```
function myMethod1() {
    return this.myvar;
}
function myMethod2() {
    return this.myvar;
}
obj.funcAry.push(myMethod1);
obj.funcAry.push(myMethod2); 
```

当我想调用函数时，我会这样做：

```
for (var i in obj.funcAry) {
    obj.tempmethod = obj.funcAry[i];
    obj.tempmethod();
}
obj.tempmethod = undefined; 
```

我不喜欢创建一个时间变量来调用方法......有没有任何“好”的方法来调用方法并且方法“this”是对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:33:06.813

好的，边提问边搜索，找到了回复。答案是`apply`方法：

代替：

```
obj.tempmethod = myMethod1;
obj.tempmethod();
obj.tempmethod = undefined; 
```

我必须：

```
myMethod1.apply(obj); 
```

# excel - 将单个记录从 csv 文件中提取到 excel 中

> ID：15579389
> 
> 赞同：0
> 
> 时间：2013-03-22T20:33:09.203
> 
> 标签：excel, csv, large-data

我有一个 2 gig csv 文件，我想一次读入一个 excel vba 宏处理一条记录，或者一次一个数据。我怎样才能？我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:37:44.127

您可以使用`Scripting.FileSystemObject`来做到这一点：

作为如何逐行读取文件的示例：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\FSO\ServerList.txt", 1)
    Do Until objFile.AtEndOfStream
       strLine = objFile.ReadLine
       ... You code here ...
    Loop
objFile.Close 
```

只要记住添加对`Microsoft Scripting Runtime`（FileSystemObject 所在的位置）的引用

[如何在 VBA 中使用 FileSystemObject？](https://stackoverflow.com/questions/3233203/how-do-i-use-filesystemobject-in-vba)

# android - 如何在 Android 上重新连接当前处于睡眠模式的 WiFi

> ID：15579404
> 
> 赞同：3
> 
> 时间：2013-03-22T20:34:01.033
> 
> 标签：android, wifi

我有一个 Android 应用程序，它每晚都会醒来并与我们的服务器同步一些数据。如果设备在一段时间不使用（或屏幕关闭）后将 WiFi 置于睡眠模式，我需要一种方法来唤醒 Wifi 并进行同步，然后让它返回睡眠模式。所以这是我发现的：

如果 Wifi 处于睡眠模式，我可以看到（通过 dumpsys）wifi 仍处于启用状态，但 runState 已停止。所以在我的代码中，我会做类似的事情

```
 WifiManager wManager = (WifiManager)mContext.getSystemService(Context.WIFI_SERVICE);
wManager.setWifiEnabled(true); 
    boolean connect = wManager.reconnect(); 
    Log.d(TAG, "connect " + connect); 
```

我不认为 setWifiEnabled(true) 是必要的，因为它在睡眠时仍处于启用状态。但我还是这样做了，没有任何坏处。但是reconnect总是返回false，意味着它无法重新连接wifi。当然，dumpsys 仍然显示 runState 已停止。

有人可以帮我解决这个问题吗？唤醒 Wifi 并获得有效连接的正确程序是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:11:57.253

通常，当设备处于睡眠模式时，真正唤醒它的唯一方法是获取唤醒锁......有几种类型的唤醒锁，你可以在[这里](http://developer.android.com/reference/android/os/PowerManager.html)阅读......

希望这可以帮助...

# php - CakePHP 1.3 包含未正确构建关联

> ID：15579406
> 
> 赞同：1
> 
> 时间：2013-03-22T20:34:04.807
> 
> 标签：php, cakephp, models, containable

这是我在这里的第一个问题。我在 cakephp 1.3 中遇到了可包含行为的问题。问题如下：我有一个具有以下关联的可交付模型：

```
class Deliverable extends AppModel {
  var $name = 'Deliverable';
  var $displayField = 'name';
  var $actsAs = array('Containable');

  var $belongsTo = array(
    'Asset' => array(
        'className' => 'Asset',
        'foreignKey' => 'asset_id',
        'dependent' => false
    ),
    'DelRouteName' => array(
        'className' => 'DelRouteName',
        'foreignKey' => 'del_route_name_id',
    ),
    'AccessGroup' => array(
        'className' => 'AccessGroup',
        'foreignKey' => false,
        'conditions' =>
            'Deliverable.role_id = AccessGroup.id'
    )
);

  var $hasOne = array(
    'Artifact' => array(
        'className' => 'Artifact',
        'foreignKey' => 'deliverable_id',
        'dependent' => true,
    )
);

  var $hasMany = array(
    'Delivery' => array(
        'className' => 'Delivery',
        'foreignKey' => 'deliverable_id',
        'dependent' => true,
        'order' => 'Delivery.gmt_created',
    )
); 
```

这是分页设置的配置：

```
$this->paginate['Deliverable'] = array_merge($this->paginate['Deliverable'], array(
        'limit' => $this->getSysPref('items_per_page', 20),
        'conditions' => array(
            'Deliverable.role_id' => $this->myRoleSetIds(),
            'Deliverable.asset_id' => $asset['Asset']['id'],
            'Delivery.gmt_created >' => $keep_time
        ),
        'order' => 'Deliverable.name',
        'contain' => array(
            'AccessGroup',
            'Delivery' => array(
                'conditions' => array(
                    'Delivery.gmt_created >' => $keep_time
                ),
                'limit' => 1,
                'order' => 'Delivery.gmt_created DESC'                      
            ),
            'DelRouteName'
        )
    ));
    $deliverables = $this->paginate('Deliverable'); 
```

如您所见，附加了可包含的行为、定义的关联以及包含的关联模型（在分页配置部分中）。

我遇到的这个问题是它能够成功查询包含的模型“AccessGroup”和“DelRouteName”，但它没有获取相关的“Delivery”数据。只有当我在父模型（Deliverable）上设置针对子模型（Delivery）的条件时，才会出现该错误，这是我之前做过的并且完全合法的。我收到此 SQL 错误，您可以看到表交付根本没有加入，但 access_groups 和 del_route_names 是。

这是 cake 构建的 SQL：

```
SELECT "Deliverable"."id" AS "Deliverable__id", "Deliverable"."name" AS 
"Deliverable__name", "Deliverable"."artifact_name" AS "Deliverable__artifact_name", 
"Deliverable"."type" AS "Deliverable__type", "Deliverable"."asset_id" AS 
"Deliverable__asset_id", "Deliverable"."del_route_name_id" AS 
"Deliverable__del_route_name_id", "Deliverable"."artifact_id" AS 
"Deliverable__artifact_id", "Deliverable"."status" AS "Deliverable__status", 
"Deliverable"."delivery_id" AS "Deliverable__delivery_id",                         
"Deliverable"."deliverable_id" 
AS "Deliverable__deliverable_id", "Deliverable"."gmt_created" AS 
"Deliverable__gmt_created", "Deliverable"."locked" AS "Deliverable__locked", 
"Deliverable"."frozen" AS "Deliverable__frozen", "Deliverable"."cloaked" AS 
"Deliverable__cloaked", "Deliverable"."role_id" AS "Deliverable__role_id", 
"DelRouteName"."id" AS "DelRouteName__id", "DelRouteName"."name" AS                     
"DelRouteName__name", 
"DelRouteName"."type" AS "DelRouteName__type", "AccessGroup"."id" AS "AccessGroup__id", 
"AccessGroup"."name" AS "AccessGroup__name", "AccessGroup"."dn" AS "AccessGroup__dn", 
"AccessGroup"."filters" AS "AccessGroup__filters", "AccessGroup"."paths" AS 
"AccessGroup__paths" FROM "deliverables" AS "Deliverable" LEFT JOIN "del_route_names" 
AS "DelRouteName" ON ("Deliverable"."del_route_name_id" = "DelRouteName"."id") LEFT     
JOIN "access_groups" AS "AccessGroup" ON ("Deliverable"."role_id" = "AccessGroup"."id")      
WHERE "Deliverable"."role_id" = ('0') AND "Deliverable"."asset_id" = '2' AND 
"Delivery"."gmt_created" > '1361391936'   ORDER BY "Deliverable"."name" ASC  LIMIT 50 
```

这给了我这个错误（使用postgresql）

```
Warning (2): pg_query() [http://php.net/function.pg-query]: Query failed: ERROR:  missing FROM-clause entry for table "Delivery" 
```

我在这里不知所措，所以任何帮助将不胜感激。如果您还需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:28:44.203

您不能根据主模型调整包含的模型。CakePHP 在执行`contain()`. 如果您需要添加跨模型的条件，则需要使用[JOINs](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:45:44.217

得益于 Dave 的帮助，更新后的代码现在可以运行。

```
$this->paginate['Deliverable'] = array_merge($this->paginate['Deliverable'], array(
            'limit' => $this->getSysPref('items_per_page', 20),
            'conditions' => array(
                'Deliverable.role_id' => $this->myRoleSetIds(),
                'Deliverable.asset_id' => $asset['Asset']['id'],
                'Delivery.gmt_created >' => $keep_time
            ),
            'joins' => array(
                array(
                    'table' => 'deliveries',
                    'alias' => 'Delivery',
                    'type' => 'LEFT',
                    'conditions' => array(
                        'Deliverable.id = Delivery.deliverable_id'
                    )
                )
            ),
            'order' => 'Deliverable.name',
            'contain' => array(
                'AccessGroup',
                'Delivery' => array(
                    'conditions' => array(
                        'Delivery.gmt_created >' => $keep_time
                    ),
                    'limit' => 1,
                    'order' => 'Delivery.gmt_created DESC'                      
                ),
                'DelRouteName'
            )
        )); 
```

# c# - 处理按钮外的点击事件

> ID：15579407
> 
> 赞同：4
> 
> 时间：2013-03-22T20:34:16.387
> 
> 标签：c#, wpf, mouseevent

我正在尝试通过重现 Apple AppStore 中的应用程序来练习 c#。

在应用程序中，有一个带有文本的矩形：`"Touch me"`。当您触摸它时，矩形会重新定位。

这样做几次后，文本变为“请勿触摸我”。在这种情况下，您必须触摸矩形之外。

一切都很顺利，直到你必须触摸矩形之外的地方。

这是我的事件处理程序：

```
 private void Canvas_MouseLeftButtonDown_1(object sender, MouseButtonEventArgs e)
    {
        if (click == 0)
        {
            if (rectangle1.IsMouseOver || textBlock1.IsMouseOver)
            {
               // reposition and stuff
                if (clicks == 10)
                {
                    // Change the value of the variable click to 1 
                    click = 1;
                    textBlock1.Text = "Do Not Click me";
                    Canvas.SetLeft(textBlock1, 200);
                }
            }
        }
        else
        {
            if (rectangle1.IsMouseOver || textBlock1.IsMouseOver)
            {
                // Game Over
                this.Close();
            } else
            {
                // reposition and stuff

                click = 0;
                textBlock1.Text = "Click me";
                Canvas.SetLeft(textBlock1, 225);
            }
        }
    } 
```

该程序可以完美运行，直到您必须在矩形外单击。

当您单击矩形时程序关闭，但是当您在矩形外部单击时，什么也没有发生。是否有任何事件处理程序可以完成我想要的任务？

这是我的xml

```
<Window x:Class="ClickMe.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="510" Width="525" ResizeMode="NoResize">
<Canvas Name="canvas" MouseLeftButtonDown="Canvas_MouseLeftButtonDown_1">
    <Rectangle Fill="#FFF4F4F5" Name="rectangle1" HorizontalAlignment="Left" Height="38" Stroke="Black" VerticalAlignment="Top" Width="509" Canvas.Left="0" Canvas.Top="63"/>
    <Label Name="label1" Content="0" Canvas.Left="57" Canvas.Top="446"/>
    <Label Content="Klicks:" Canvas.Left="10" Canvas.Top="446"/>
    <TextBlock Name="textBlock1" Canvas.Left="225" TextWrapping="Wrap" Text="Click Me" Canvas.Top="74" Margin="10,0,0,0"/>

</Canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:50:25.190

[`Canvas`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.canvas)是一个`UIElement`。这允许使用[`PointerPressed`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.pointerpressed)事件。

```
private void Target_PointerMoved(object sender, PointerRoutedEventArgs e)
{
    Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;

    if (ptr.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
    {

        Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);
        if (ptrPt.Properties.IsLeftButtonPressed)
        {
            //do yo thang
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:54:03.123

使用它而不是 `Canvas_MouseLeftButtonDown_1`事件：

```
protected override OnMouseDown(MouseButtonEventArgs e)
{
    if(e.Changed == MouseButton.Left)
      {
    // Your logic on mouse down will go here
      }
    base.OnMouseDown(e);
} 
```

有了这个，您可以单击画布上的任意位置并触发事件。我希望这有帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:58:35.463

你真的只需要设置画布的背景，因为它只在具有“渲染内容”的地方获得鼠标输入。背景甚至可以是透明的：

```
<Canvas Name="canvas" Background="Transparent"
        MouseLeftButtonDown="Canvas_MouseLeftButtonDown_1">
    ...
</Canvas> 
```

# php - 如何在 php soap 请求信封上发送 Null 参数？

> ID：15579412
> 
> 赞同：2
> 
> 时间：2013-03-22T20:34:54.120
> 
> 标签：php, soap, curl

我已经尝试了几天了，但没有任何成功

这是我的代码：

```
<?$requestPesquisaTarifas = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<PesquisaTarifas xmlns="http://volator.com.br">
  <parTarifaHeader>
    <Sessao>
      <SiglaCiaAerea>string</SiglaCiaAerea>
      <IDSessao>long</IDSessao>
      <Verificador>string</Verificador>
      <MsgRetorno>string</MsgRetorno>
    </Sessao>
    <SegmentoIda>
      <Etapa>
        <Etapa xsi:nil="true" />
        <Etapa xsi:nil="true" />
      </Etapa>
      <IdFretamentoRotaTrechosVenda>int</IdFretamentoRotaTrechosVenda>
      <NroVoo>string</NroVoo>
      <SiglaOrigem>string</SiglaOrigem>
      <SiglaDestino>string</SiglaDestino>
      <TotalPaxADT>int</TotalPaxADT>
      <TotalPaxCHD>int</TotalPaxCHD>
      <TotalPaxINF>int</TotalPaxINF>
      <NroLugaresLivres>int</NroLugaresLivres>
      <Classe>Economica or Executiva or PrimeiraClasse</Classe>
      <IdaVolta>boolean</IdaVolta>
      <SiglaTarifaria>string</SiglaTarifaria>
    </SegmentoIda>
    <SegmentoVolta>
      <Etapa>
        <Etapa xsi:nil="true" />
        <Etapa xsi:nil="true" />
      </Etapa>
      <IdFretamentoRotaTrechosVenda>int</IdFretamentoRotaTrechosVenda>
      <NroVoo>string</NroVoo>
      <SiglaOrigem>string</SiglaOrigem>
      <SiglaDestino>string</SiglaDestino>
      <TotalPaxADT>int</TotalPaxADT>
      <TotalPaxCHD>int</TotalPaxCHD>
      <TotalPaxINF>int</TotalPaxINF>
      <NroLugaresLivres>int</NroLugaresLivres>
      <Classe>Economica or Executiva or PrimeiraClasse</Classe>
      <IdaVolta>boolean</IdaVolta>
      <SiglaTarifaria>string</SiglaTarifaria>
    </SegmentoVolta>
    <QtdPassageirosADT>int</QtdPassageirosADT>
    <QtdPassageirosCHD>int</QtdPassageirosCHD>
    <QtdPassageirosINF>int</QtdPassageirosINF>
    <SiglaClasseTarifariaIda>string</SiglaClasseTarifariaIda>
  </parTarifaHeader>
</PesquisaTarifas>
</soap:Body>
</soap:Envelope>';

$cabecalhoPesquisaTarifas = array(
'POST /WSReservaweb.asmx HTTP/1.1',
'Host: webservice.oceanair.com.br',
'Content-Type: text/xml; charset=utf-8',
'Content-Length: '. strlen( $requestPesquisaTarifas ),
'SOAPAction: "http://volator.com.br/PesquisaTarifas"');

$curlPesquisaTarifas = curl_init(); // Iniciar o Curl

curl_setopt($curlPesquisaTarifas, CURLOPT_URL, $enderecoWsdlAvianca); // O Endereço que irá acessar 
curl_setopt($curlPesquisaTarifas, CURLOPT_RETURNTRANSFER, true); // Para Retornar o resultado
curl_setopt($curlPesquisaTarifas, CURLOPT_VERBOSE , false); // Modo Verbose, para exibir o processo na tela
curl_setopt($curlPesquisaTarifas, CURLOPT_HEADER , false ); // Se precisar de retorno dos cabeçalhos
curl_setopt($curlPesquisaTarifas, CURLOPT_TIMEOUT, 30); // Tempo máximo em segundos que deve esperar responder
curl_setopt($curlPesquisaTarifas, CURLOPT_HTTPHEADER, $cabecalhoPesquisaTarifas); // Cabecalho para ser enviado 
curl_setopt($curlPesquisaTarifas, CURLOPT_FOLLOWLOCATION, true); // Seguir redirecionamentos
curl_setopt($curlPesquisaTarifas, CURLOPT_POST, true); // Usar metodo post
curl_setopt($curlPesquisaTarifas, CURLOPT_POSTFIELDS, $requestPesquisaTarifas); // Dados para serem processados
curl_setopt($curlPesquisaTarifas, CURLOPT_SSL_VERIFYPEER, false); // Caso precise verificar certificado

$resultadoPesquisaTarifa = curl_exec($curlPesquisaTarifas);

include ("arrayPesquisaTarifas.php");

include ("insertPesquisaTarifas.php");

?> 
```

我错过了什么？每次执行代码时，我都会收到此错误：

```
soap:ClientServer was unable to read request. ---> There is an error in XML document (8, 36). ---> Input string was not in a correct format. 
```

我检查并重新检查了指定的行和列，在 xml 中看不到任何错误。任何帮助将不胜感激；提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-05T19:19:24.347

如我所见，您只是复制并粘贴了 SOAP 标头的定义，而没有输入正确的值。这样，将解释这些字段的 WebServer 无法理解您要获取的内容。您必须准确验证服务提供者如何解释数据。例如，在：

```
<Classe>Economica or Executiva or PrimeiraClasse</Classe> 
```

正确的输入是：

```
<Classe>Economica</Classe> 
```

如果您在使用 Web 服务时遇到困难，请尝试以下操作：

首先，您必须了解更多关于 WebServices、SOAP 和 REST 请求、WSDL 和 XML 的知识，快速浏览 www.w3schools.com 是一个好的开始。

然后，您需要向 Web 服务的提供者查询有关每个字段的含义以及字段值应如何传递的更多信息。

我还推荐 SoapUI 在开发这样的代码时测试您的 SOAP/REST 请求。这是一个免费程序，您可以下载并且易于管理。

# c++ - 双重或浮动比较

> ID：15579413
> 
> 赞同：-5
> 
> 时间：2013-03-22T20:34:58.157
> 
> 标签：c++, c, floating-point

我看过类似的帖子：

[浮动和双重比较最有效的方法是什么？](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)

[比较两个浮点数](https://stackoverflow.com/questions/5989191/compare-two-floats)

以及许多其他相关的帖子。

我在 d3js 库中看到，它使用以下比较：

```
 return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN; 
```

可以在 C/C++ 中使用它来比较`double`和`float`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:38:18.757

> 以下代码是否足够？

不。

> 如果不是，为什么？

因为它与`==`（至少对于非边缘情况）相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:37:43.863

这还不够，因为如果 a 或 b 为 NaN，则返回 true

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:24:57.993

这基本上是关于使用“几乎相等”可以以某种方式弥补对浮点计算不够了解以获得可靠结果的概念。“几乎相等”是一种先进的技术；它经常会咬你，因为它**不**具有传递性（即`a`“几乎等于”`b`和`b`“几乎等于”`c` 并不意味着`a`“几乎等于” `c`）。如果您是一名认真的程序员，请学习浮点工作原理的基础知识。没有人会惊讶这`(1/2)*2)`不是 1，但不知何故人们不理解它`(1.0/10.0)*10.0`也不是 1（除非你的系统有十进制浮点数），并且出于**完全相同**的原因。这是教育的失败，**学习它。（吐槽结束）**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:39:23.213

与容差进行比较的想法是，几乎完全相同的两个值可能希望被视为相同。如果你有`2.000000000000`and `2.000000000001`，它们应该相等还是不相等？如果它们应该是，那么您的代码将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T21:03:19.040

你真的需要阅读这份文件：

[https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf](https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf)

这是 Golberg 的论文 = 每个程序员都应该知道的关于浮点的知识。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T20:43:58.483

你的错误是，你读的[文章](https://stackoverflow.com/questions/5989191/compare-two-floats)有

```
 diff = A - B;
   return (diff < EPSILON) && (-diff > EPSILON); 
```

而且，你把`EPSILON = 0`它变成

```
if (!(a > b) && !(a < b)) 
```

你不应该假设`EPSILON`为`0`. 因为您应该考虑一个位错误是我们称之为浮点/双精度比较`EPSILON`。**

# ruby-on-rails-3 - 使用 has_secure_password 的 rails 3.2.1 显示消息“表 xxx 没有名为密码的列”

> ID：15579418
> 
> 赞同：0
> 
> 时间：2013-03-22T20:35:29.393
> 
> 标签：ruby-on-rails-3, unit-testing, activerecord

我是一个使用 Rails 的新手，我一直在尝试针对模型使用 has_secure_password 的控制器构建一些测试。跟随测试：

```
require 'test_helper'

class UsersControolerTest < ActionController::TestCase
  setup do
    @dados_user = {
      full_name: "Fulano",
      bio: "lorem ipsun lorum lorem ipsun lorum lorem ipsun lorum",
      location: "Brazil",
      email: "fulano@gmail.com",
      password: "123456",
      password_confirmation: "123456"
    }    
  end

  test "Cria usuário banco" do
    assert_difference('User.count') do
      post :create, user: @dados_user
    end
  end
end 
```

当我运行测试时，我收到以下错误消息：

ActiveRecord::StatementInvalid: SQLite3::SQLException: 表用户没有名为密码的列: INSERT INTO "users" ("full_name", "email", "password", "location", "bio", "created_at", "更新了"，"id") ...

该模型的代码是：

```
class User < ActiveRecord::Base
  has_many :rooms, :dependent => :destroy
  has_many :reviews, :dependent => :destroy

  scope :confirmed, where('confirmed_at IS NOT NULL')

  has_secure_password  
  attr_accessible :bio, :email, :full_name, :location, :password,
    :password_confirmation

  validates_presence_of :email, :full_name, :location
  validates_length_of :bio, :minimum => 30, :allow_blank => false
  validates_format_of :email, :with => /\A[^@]+@([^@\.]+\.)+[^@\.]+\z/
  validates_uniqueness_of :email

  before_create :generate_token

  def generate_token
    self.confirmation_token = SecureRandom.urlsafe_base64
  end

  def confirm!
    return if confirmed?

    self.confirmed_at = Time.current
    self.confirmation_token = ''
    save!
  end

  def confirmed?
    confirmed_at.present?
  end

  def self.authenticate(email, password)
    confirmed.find_by_email(email).try(:authenticate, password)
  end
end 
```

有人可以帮助我吗？提前致谢。

PS：按照迁移码

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :full_name
      t.string :email
      t.string :password
      t.string :location
      t.text :bio

      t.timestamps
    end

    add_index :users, :email, :unique => true
  end
end 
```

* * *

下面的迁移是关于使用 has_secure_password

```
class RenamePasswordOnUsers < ActiveRecord::Migration
  def up
    rename_column :users, :password, :password_digest
  end

  def down
  end
end 
```

* * *

```
class AddConfirmationFieldsToUsers < ActiveRecord::Migration
  def change
    add_column :users, :confirmed_at, :datetime
    add_column :users, :confirmation_token, :string
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:45:36.280

这一切都很好。但是，您还必须运行 rake:db:test:prepare。运行 rake:db:migrate 会设置您的开发数据库，​​但不会设置您的测试数据库。

所以，运行：

```
rake:db:test:prepare 
```

你应该会发现你不再得到那个错误。

# asana - 我可以通过 API 将故事添加到 Asana 项目吗？

> ID：15579421
> 
> 赞同：1
> 
> 时间：2013-03-22T20:36:00.487
> 
> 标签：asana

根据[https://asana.com/developers/api-reference/stories](https://asana.com/developers/api-reference/stories)上的文档，我应该能够为任务或项目创建故事。

```
POST /tasks/task-id/stories
POST /projects/project-id/stories 
```

但是，我没有运气将故事添加到项目中。错误消息非常简单，“无法评论此对象”。似乎也没有办法在 Web UI 中执行此操作。这是否仅仅意味着 API 文档不正确？

### 将故事添加到任务 - 作品

```
curl -u $ASANA_API_KEY: https://app.asana.com/api/1.0/tasks/4646321361313/stories -d "text=This is a comment"

--- RESPONSE ---
{"data":{"id":4646330012437,"created_at":"2013-03-22T20:23:45.645Z","source":"api","type":"comment","text":"This is a comment","created_by":{"id":1071358442997,"name":"Chris LoPresto"},"target":{"id":4646321361313,"name":"Here is a task"}}} 
```

### 将故事添加到项目 - 不起作用

```
curl -u $ASANA_API_KEY: https://app.asana.com/api/1.0/projects/4646342124006/stories -d "text=This is a comment"

--- RESPONSE ---
{"errors":[{"message":"target: Cannot comment on this object"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T21:45:41.840

我认为您发布此文档时文档是错误的，并且在此后的一年中已修复。

在 API 文档的*Stories*部分，它说：

> 故事是系统中的一种历史形式，因此它们是只读的。

它还谈到了故事目标属性：

> 目标 - 只读。与此故事相关联的对象。目前可能只是一个任务。

# r - lm 和 gls 的不同结果

> ID：15579422
> 
> 赞同：4
> 
> 时间：2013-03-22T20:36:01.380
> 
> 标签：r

我正在尝试在 R 中拟合线性时间序列模型。我的第一种方法是使用 lm：

```
> m1 = lm(logp~logg, data = data)
> summary(m1)

Call:
lm(formula = logp ~ logg, data = data)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.56209 -0.21766 -0.02728  0.20243  0.82112 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  2.14218    0.59651   3.591 0.000556 ***
logg        -0.57819    0.04931 -11.725  < 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Residual standard error: 0.2921 on 83 degrees of freedom
Multiple R-squared: 0.6236, Adjusted R-squared: 0.619 
F-statistic: 137.5 on 1 and 83 DF,  p-value: < 2.2e-16 
```

但是，我意识到残差是自相关的，我想对此进行补偿。所以我用 gls 代替：

```
> m2 = gls(logp~logg, data = data, correlation=corAR1(form=~1))
> summary(m2)

Generalized least squares fit by REML
  Model: logp ~ logg 
  Data: data 
       AIC       BIC  logLik
  -83.1498 -73.47444 45.5749

Correlation Structure: AR(1)
 Formula: ~1 
 Parameter estimate(s):
      Phi 
0.9313839 

Coefficients:
               Value Std.Error   t-value p-value
(Intercept)  4.82358 1.1435778  4.217972   1e-04
logg        -0.35891 0.0925918 -3.876257   2e-04

 Correlation: 
     (Intr)
logg 0.986 

Standardized residuals:
       Min         Q1        Med         Q3        Max 
-1.5206442 -0.7602385 -0.2905489  0.6310135  2.7341294 

Residual standard error: 0.3788309 
Degrees of freedom: 85 total; 83 residual 
```

我的理解是参数估计应该仍然相同，但 t 统计量应该不同，如此处[所示](http://www.r-bloggers.com/linear-regression-with-correlated-data/)。但是，我得到了非常不同的参数估计。这是为什么？我做错了什么，还是我误解了统计数据？

当我比较拟合值时`m1$fitted.values`，`m2$fitted`它们完全相同。这让我相信来自 gls 的参数估计应该以不同于来自 lm 的方式来解释，但是如何解释呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:55:57.243

看起来 AR(1) 已经吞噬了一些趋势 - 参数`phi`非常大。本质上，GLS 模型有一个额外的模型对应于 AR(1) 部分。因此你有

**回归**+ **AR(1)** + $\epsilon$

**回归**和**AR(1)**结合起来给出与拟合**回归**相同的拟合值，`lm()`但拟合只是分解不同，解释也不同。

GLS*估计*参数 $\phi$ 的值（`phi`在上面的输出中），这就是系数的其他估计发生变化的原因。相反，您可以通过 $\phi$的输入值`corAR1(value = myphi)`在哪里指定 $\phi$ 的值。`myphi`一种选择可能是拟合`lm()`模型，然后从该模型的残差中估计 $\phi$，然后将 $\phi$ 的估计值插入 GLS 模型并进行拟合。`summary()`这样你最终会得到一个包含自相关的 GLS 模型，因此标准错误等会在输出等中考虑到它。

综上所述，如此大的 AR(1) 很可能表明存在问题或这不是正确的模型。我一定会检查模型是否合适等。

# java - Java MergeSort - 内存不足错误：Java 堆空间

> ID：15579425
> 
> 赞同：1
> 
> 时间：2013-03-22T20:36:06.887
> 
> 标签：java, mergesort

我正在尝试在 Java 中进行排序练习。

我现在正在处理合并排序... Eclipse 正在输出`Out Of Memory Error: Java Heap space`，但我不确定如何调试它。

我觉得我的代码没问题 - 有什么想法吗？

```
import java.util.ArrayList;
import java.util.List;
public class Sorts {
    List<Integer> initialList;

    public Sorts() {
        initialList = new ArrayList<Integer>();
        initialList.add(2);
        initialList.add(5);
        initialList.add(9);
        initialList.add(3);
        initialList.add(6);

        System.out.print("List: [");
        for (int values : initialList) {
            System.out.print(values);
        }
        System.out.println("]");

        splitList(initialList);
    }

    public List<Integer> splitList(List<Integer> splitMe)   {
        List<Integer> left = new ArrayList<Integer>();
        List<Integer> right = new ArrayList<Integer>();

        if (splitMe.size() <= 1) {
            return splitMe;
        }

        int middle = splitMe.size()/2;
        int i = 0;
        for (int x: splitMe) {
            if (i < middle) {
                left.add(x);
            }
            else {
                right.add(x);
            }
            i++;
        }
        left = splitList(left);
        right = splitList(right);

        return mergeThem(left, right);
    }

    public List<Integer> mergeThem(List<Integer> left, List<Integer> right) {
        List<Integer> sortedList = new ArrayList<Integer>();
        int x = 0;
        while (left.size() > 0 || right.size() > 0) {
            if (left.size() > 0 && right.size() > 0) {
                if (left.get(x) > right.get(x)) 
                    sortedList.add(left.get(x));
                else 
                    sortedList.add(right.get(x));
            }
            else if (left.size() > 0) {
                sortedList.add(left.get(x));
            }
            else if (right.size() > 0) {
                sortedList.add(right.get(x));
            }
        }
        return sortedList;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:15:23.367

`mergeThem`使用 Java 元素提供该方法的可能实现：

```
public List<Integer> mergeThem(List<Integer> left, List<Integer> right) {
    //set the sorted list
    List<Integer> sortedList = new ArrayList<Integer>();
    //getting the iterators for both lists because List#get(x) can be O(N) on LinkedList
    Iterator<Integer> itLeft = left.iterator();
    Iterator<Integer> itRight = right.iterator();
    //getting flags in order to understand if the iterator moved
    boolean leftChange = true, rightChange = true;
    //getting the current element in each list
    Integer leftElement = null, rightElement = null;
    //while there are elements in both lists
    //this while loop will stop when one of the list will be fully read
    //so the elements in the other list (let's call it X) must be inserted
    while (itLeft.hasNext() && itRight.hasNext()) {
        //if left list element was added to sortedList, its iterator must advance one step
        if (leftChange) {
            leftElement = itLeft.next();
        }
        //if right list element was added to sortedList, its iterator must advance one step
        if (rightChange) {
            rightElement = itRight.next();
        }
        //cleaning the change flags
        leftChange = false;
        rightChange = false;
        //doing the comparison in order to know which element will be inserted in sortedList
        if (leftElement <= rightElement) {
            //if leftElement is added, activate its flag
            leftChange = true;
            sortedList.add(leftElement);
        } else {
            rightChange = true;
            sortedList.add(rightElement);
        }
    }
    //this is the hardest part to understand of this implementation
    //java.util.Iterator#next gives the current element and advance the iterator on one step
    //if you do itLeft.next then you lost an element of the list, that's why we have leftElement to keep the track of the current element of left list (similar for right list)
    if (leftChange && rightElement != null) {
        sortedList.add(rightElement);
    }
    if (rightChange && leftElement != null) {
        sortedList.add(leftElement);
    }
    //in the end, you should add the elements of the X list (see last while comments).
    while (itLeft.hasNext()) {
        sortedList.add(itLeft.next());
    }
    while (itRight.hasNext()) {
        sortedList.add(itRight.next());
    }
    return sortedList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:39:52.200

```
while (left.size() > 0 || right.size() > 0) { 
```

不会退出，因为您没有从左侧或右侧删除任何项目，因此您不断将项目添加到 sortedList 直到内存不足。您检查它们中的任何一个是否大于 0，但您永远不会删除任何项目，因此检查将永远不会返回 false，也就是无限循环。

# python - 在不同文件中拆分代码 - Python / App Engine

> ID：15579430
> 
> 赞同：2
> 
> 时间：2013-03-22T20:36:27.963
> 
> 标签：python, google-app-engine, optimization

我有多个类，所有内容都在一个 main.py 文件中，这变得非常混乱......

我是 Python 的新手，但是我现在已经上了几门课程，而且我的表现非常好，但是在任何课程中都没有关于如何做到这一点的参考......

我遇到的主要问题是我不明白拆分代码在 Python 中是如何工作的，以及我必须在每个文件中重新导入什么......所以我更喜欢一些文档，或者最好是关于这个的视频教程，而不是一个答案。

我会给你一些示例代码：

```
class MainHandler(webapp2.RequestHandler, usersHandler, postsHandler):
class usersHandler(DdHandler):
class DdHandler(): 
```

我想让每个类都在一个单独的文件中，有点像 Java 和 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:38:17.617

您正在寻找如何将代码划分为模块：[http ://docs.python.org/2/tutorial/modules.html](http://docs.python.org/2/tutorial/modules.html)

您可能并不总是希望每个类都有一个文件，而是需要对类进行逻辑分组。在您的情况下，您可能有一个名为 db.py 的文件，其中放置了 usersHandler 和 DbHandler

在你的主文件中，你会做类似的事情

```
import db

db_handler = db.DbHandler() 
```

还要记住，类名应该以大写开头，UsersHandler 而不是 usersHandler。[在http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)上查看更多约定

# linux - Linux zip 命令使用两个成功的数字密码生成存档文件

> ID：15579441
> 
> 赞同：1
> 
> 时间：2013-03-22T20:37:14.177
> 
> 标签：linux, zip

我使用这个命令成功地在 Linux 上对一个 zip 文件进行密码保护：

```
zip -P 9000 hash.zip hash.py 
```

我编写了一个程序来测试从 1 到 100000 的所有可能密码。问题是程序找到了两个成功的密码：

*   第一个是`9000`
*   第二个是`79095`

Linux zip 命令中是否存在安全漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:45:56.860

密码 79095 解压文件但创建不可用的文件，您不能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:21:28.077

原始 ZIP 加密是不安全的。您应该使用 InfoZIP 的/WinZIP 的 AES 加密。

# javascript - 确认窗口关闭

> ID：15579442
> 
> 赞同：1
> 
> 时间：2013-03-22T20:37:19.923
> 
> 标签：javascript, html, window

我正在创建一个可打印的 HTML 测验和测试工具，我想确认“您确定要关闭此窗口吗？” 当用户试图关闭窗口时。如果他们点击确定它会关闭，但如果他们点击取消它不会。

我需要这个在 IE 和 Chrome 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:43:51.963

```
window.onbeforeunload = function(e) {
    return 'some prompt text';
}; 
```

[工作示例](http://jsfiddle.net/q4pRK/)

# wordpress - Wordpress：将“今日帖子”的过滤器添加到 wp_query

> ID：15579449
> 
> 赞同：1
> 
> 时间：2013-03-22T20:38:05.990
> 
> 标签：wordpress, date, filter

我在这里运行此查询以在我的 wordpress 索引页面上打印出帖子：

query_posts( $query_string . '&order=ASC' . '&post.status=future,publish' );

它为我提供状态为发布或未来升序的帖子。现在我想添加一个过滤器，这个查询只显示今天的帖子。因此，在当前日期已发布的帖子。

你能帮我解决这个问题吗？我尝试了很多，但没有任何效果或改变任何东西，所以我希望你们有一些意见。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:59:44.800

也许是这样的：

```
$today = getdate();
$year=$today["year"];
$month=$today["mon"];
$day=$today["mday"];

query_posts( $query_string.'order=ASC' . '&post.status=future,publish'.'&year='.$year.'&monthnum='.$month.'&day='.$day ); 
```

# directory - DirectoryChooser - 多个目录

> ID：15579450
> 
> 赞同：4
> 
> 时间：2013-03-22T20:38:08.943
> 
> 标签：directory, javafx, filechooser

JavaFX - 是否可以使用 DirectoryChooser 一次选择多个目录？

或者有什么方法可以在没有 DirectoryChooser 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:44:09.527

没有 API 可以使用 JavaFX 2.2 [DirectoryChooser](http://docs.oracle.com/javafx/2/api/javafx/stage/DirectoryChooser.html)选择多个目录。

相关 JavaFX 问题跟踪器问题：

[RT-28443 目录选择器中没有用于选择多个目录的 api。](https://javafx-jira.kenai.com/browse/RT-28443)

# nginx - 将 nginx 中的子域 url 重写为后端服务器

> ID：15579453
> 
> 赞同：1
> 
> 时间：2013-03-22T20:38:16.990
> 
> 标签：nginx, url-rewriting, reverse-proxy

我在我的 django (gunicorn) 应用程序前面运行 nginx。我想打电话给：

**api.mydomain.com**

被重定向到：

**本地主机：8080/api**

我现在有了这个，但这显然不起作用：

```
server {
    listen     80;
    server_name  api.mydomain.com;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    location / {
        index  index.html index.htm;
        proxy_pass  http://localhost:8080/api;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:55:00.113

您可以将代理通行证与重写结合起来

```
server {
    listen     80;
    server_name  api.mydomain.com;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    location / {
       index  index.html index.htm;
       rewrite ^(.*)$ /api$1 break;
       proxy_pass   http://localhost:8080;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:52:06.713

像这样添加一个新的位置块

```
location ~ api.mydomain.com
{
    fastcgi_pass localhost:8080;
    fastcgi_param SCRIPT_FILENAME $document_root/Django script's folder's name/$fastcgi_script_name;
} 
```

# ruby-on-rails - 生成一个唯一但显然是随机的标识符，无需循环+重试

> ID：15579455
> 
> 赞同：3
> 
> 时间：2013-03-22T20:38:17.003
> 
> 标签：ruby-on-rails, ruby, algorithm

我正在尝试使用一种算法来为我的 rails 应用程序中的模型生成唯一的非顺序标记。

例如：

```
MyModel.create.token #=> '183685'
MyModel.create.token #=> '456873'
MyModel.create.token #=> '813870' 
```

我能想到的唯一方法是创建一个随机的东西，检查冲突，然后重试。对我来说，这似乎是一种很臭的代码，以某种力量的方式。

```
class MyModel < ActiveRecord::Base
  before_create :set_token

  def set_token
    existing_model_count = nil

    # Loop while we have a token that already belongs to an existing model.
    while existing_model_count.nil? || existing_model_count > 0
      random_token = TokenGenerator.random_token
      existing_model_count = MyModel.where(token: random_token).count
    end

    # Loop exited, meaning we found an unused token.
    self.token = random_token
  end
end 
```

有没有更好的方法来做到这一点，它不涉及`while`将迭代未知次数的循环？

* * *

*虽然这里的示例是 ruby​​，但这是一种适用于任何语言的通用算法问题，因此欢迎使用其他语言的解决方案。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:09:08.487

如果您的“令牌”是某个范围内的整数值，并且您事先知道令牌的数量，那么简单的 Bob Floyd 算法（在 Bentley 的“Programming Peals”或[此处](https://stackoverflow.com/questions/1608181/unique-random-numbers-in-an-integer-array-in-the-c-programming-language)描述）会生成一个唯一的随机数而无需重试。它使用额外的存储来“标记”已经使用的数字，但如果随机生成的数字已经被占用（即没有重复的试错迭代），它仍然巧妙地设法立即提出一个未使用的数字。

但是，该算法的一个问题是，即使它生成的数字通常不是有序的，但顺序仍然不是完全随机的。换句话说，即使该算法保证了它从范围中挑选的每个单独数字的均匀分布，它也不能保证结果序列在所有可能的结果序列中的均匀分布。

这对您来说是否重要 - 只有您可以决定。如果您生成的令牌数量与范围的长度相比较小，那么此算法将提供非常令人满意的结果。如果标记的数量接近范围的长度，则该算法将生成“几乎排序”的序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:33:58.867

一种方法是混淆数字。我在我的文章[Obfuscating Sequential Keys](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=839)中详细解释了这一点。代码示例是 C#，但应该不难翻译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:22:40.973

每隔几个小时运行一次 cronjob，使用未使用的标识符重新填充 Redis 集合。让它在后台运行，所以当你需要它时，只需将它从 Redis 集合中弹出即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T22:34:11.423

```
cipher = OpenSSL::Cipher::AES.new(128, :CBC).encrypt
cipher.update(MyModel.create.object_id.to_s(36)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T21:24:36.587

从序列中取出数字。实施 feistel 网络来打乱号码。我在这里找到了一个例子：[https ://gist.github.com/Xeoncross/3715367](https://gist.github.com/Xeoncross/3715367)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T21:57:35.393

您可以使用`SecureRandom.uuid`. 我认为它保证了唯一的随机 UUID 令牌。

# regex - 解析弹性搜索索引的文本并获取索引值

> ID：15579459
> 
> 赞同：0
> 
> 时间：2013-03-22T20:38:28.430
> 
> 标签：regex, perl, xml-parsing, elasticsearch

在下面的部分中，我需要为每个部分选择输出的第一个条目，这又是 ElasticSearch 索引的名称。

例如 nprod@n_docs、platform-api-stage、nprod@janeuk_classic、nprod@deista.com@1

所以我知道它们介于字符模式之间，例如

> { "

和一个

> ：{“设置”：{

那么我的脚本会是什么样子来获取这些值，以便我可以将它们放到另一个文件中？

我的输出看起来像：

```
{
  "nprod@n_docs" : {
    "settings" : {
      "index.analysis.analyzer.rwn_text_analyzer.char_filter" : "html_strip",
      "index.analysis.analyzer.rwn_text_analyzer.language" : "English",
      "index.translog.disable_flush" : "false",
      "index.version.created" : "190199",
      "index.number_of_replicas" : "1",
      "index.number_of_shards" : "5",
      "index.analysis.analyzer.rwn_text_analyzer.type" : "snowball",
      "index.translog.flush_threshold_size" : "60",
      "index.translog.flush_threshold_period" : "",
      "index.translog.flush_threshold_ops" : "500"
    }
  },
  "platform-api-stage" : {
    "settings" : {
      "index.analysis.analyzer.api_edgeNGram.type" : "custom",
      "index.analysis.analyzer.api_edgeNGram.filter.0" : "api_nGram",
      "index.analysis.filter.api_nGram.max_gram" : "50",
      "index.analysis.analyzer.api_edgeNGram.filter.1" : "lowercase",
      "index.analysis.analyzer.api_path.type" : "custom",
      "index.analysis.analyzer.api_path.tokenizer" : "path_hierarchy",
      "index.analysis.filter.api_nGram.min_gram" : "2",
      "index.analysis.filter.api_nGram.type" : "edgeNGram",
      "index.analysis.analyzer.api_edgeNGram.tokenizer" : "standard",
      "index.analysis.filter.api_nGram.side" : "front",
      "index.analysis.analyzer.api_path.filter.0" : "lowercase",
      "index.number_of_shards" : "5",
      "index.number_of_replicas" : "1",
      "index.version.created" : "200599"
    }
  },
  "nprod@janeuk_classic" : {
    "settings" : {
      "index.analysis.analyzer.n_text_analyzer.language" : "English",
      "index.translog.disable_flush" : "false",
      "index.version.created" : "190199",
      "index.number_of_replicas" : "1",
      "index.number_of_shards" : "5",
      "index.analysis.analyzer.n_text_analyzer.char_filter" : "html_strip",
      "index.analysis.analyzer.n_text_analyzer.type" : "snowball",
      "index.translog.flush_threshold_size" : "60",
      "index.translog.flush_threshold_period" : "",
      "index.translog.flush_threshold_ops" : "500"
    }
  },
  "nprod@delista.com@1" : {
    "settings" : {
      "index.analysis.analyzer.n_text_analyzer.language" : "English",
      "index.translog.disable_flush" : "false",
      "index.version.created" : "191199",
      "index.number_of_replicas" : "1",
      "index.number_of_shards" : "5",
      "index.analysis.analyzer.n_text_analyzer.char_filter" : "html_strip",
      "index.analysis.analyzer.n_text_analyzer.type" : "snowball",
      "index.translog.flush_threshold_size" : "60",
      "index.translog.flush_threshold_period" : "",
      "index.translog.flush_threshold_ops" : "500"
    }
  }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:49:45.813

那是JSON。读取数据并使用[JSON::XS](http://search.cpan.org/perldoc?JSON%3a%3aXS)对其进行解析。

```
use JSON::XS qw( decode_json );

my $file;
{ 
   open(my $fh, '<:raw', $qfn)
      or die("Can't open \"$qfn\": $!\n");
   local $/;
   $file = <$fh>;
}

my $data = decode_json($file); 
```

然后，只需遍历树以获取所需的信息。

```
my @index_names = keys(%$data); 
```

# javascript - 使用 JQUERY，当单击复选框时，全选

> ID：15579460
> 
> 赞同：0
> 
> 时间：2013-03-22T20:38:46.663
> 
> 标签：javascript, jquery, html

看下图。在其中，我有几个表，每个表中都有一个复选框，它作为 SelectAll 工作（它尚未实现，必须选择其余的复选框。

![在此处输入图像描述](../Images/9019e8255134732467f0d9503c6805c7.png)

这是包含我的剃刀视图的代码。

```
for (int i = 0; i < Model.Classes.Count; i++) {
<span>@Model.Classes[i].Name</span>
<table class="monitor-class-table">
    <tr>
        <th>
            @Html.CheckBox("selectAll-" + Model.Classes[0].ClassId)
        </th>
        <th>
            Online
        </th>
    </tr>

@for (int j = 0; j < Model.Classes[i].Students.Count; j++) {
    <tr>
        @Html.HiddenFor(model => ...)
        <td>
            @Html.CheckBoxFor(model => model.Classes[i].Students[j].Share)
        </td>
        <td>
            @Html.LabelFor(model => ...)
        </td>
    </tr>
}
</table> 
```

我不太清楚如何开始使用 JQUERY（我想是最好的选择）。选中和取消选中复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:18:22.567

例如，您可以这样做：

```
$('.select-all').change(function() {
    $('.check').prop('checked', this.checked);
}); 
```

这是基本的演示实现[http://jsfiddle.net/dfsq/YtMuh/](http://jsfiddle.net/dfsq/YtMuh/)

如果您手动检查所有行，您还可以`.select-all`自动检查该复选框（或者如果未选择至少一行，则取消选中）：http: [//jsfiddle.net/dfsq/YtMuh/2/](http://jsfiddle.net/dfsq/YtMuh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:42:03.787

我不熟悉 Razor 的渲染方式，所以这可能不是复制和粘贴，但这应该可以帮助您入门：

```
$('.selectAllCheckbox').on('change', function(ev) { 
    //assumes all of your "line item" checkboxes share a common class
    //this could easily be replaced with another selector "#mytable [type=checkbox]", etc
    $('.myLineItemCheckboxes').attr('checked', $(this).is(':checked'));
}); 
```

说了这么多，请阅读对您问题的评论....那里有一些很好的建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:46:12.677

您可以通过两种方式解决此问题。首先，您可以在这里查看此人的解决方案：http: [//briancray.com/posts/check-all-jquery-javascript](http://briancray.com/posts/check-all-jquery-javascript)

另一种方法是为每个复选框设置相同的类，如果选中“全部”框，则使用 jquery 将选中的属性设置为 true。

```
$('.allchecked').attr('checked', true); 
```

# python - 从python中输入的数字从特定数字开始倒数

> ID：15579461
> 
> 赞同：1
> 
> 时间：2013-03-22T20:38:47.133
> 
> 标签：python

基本上我希望 var2 使瓶子下降该数字，例如当我输入 10 然后 2 我希望瓶子在 2 秒内倒计时，如 10 8 6 4 2 0

```
var = raw_input(" Enter bottle number ")
var2 = raw_input(" Enter how many bottle taken down ")

bottle_number = int(var)
bottle_down = int(var2)

countdown = ""                             

while bottle_number > 0:                      

    print bottle_number, "bottles of beer on the wall,", bottle_number, "bottles of beer."
    print "Take one down and pass it around,", bottle_number - 1, "bottles of beer on the wall."
    print " "
    countdown = bottle_number - 1
    bottle_number = countdown

if bottle_number == 0:                        

    print """
    No more bottles of beer on the wall, no more bottles of beer.
    """ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:41:27.440

您需要做的就是减去`bottle_down`而不是`1`. 而已。

当然，您可能也想更改文本，所以它说`"Take", bottle_down, "down"`而不是`"Take one down"`，否则输出有点混乱。

同时……</p>

没有理由这样做：

```
countdown = bottle_number - bottle_down
bottle_number = countdown 
```

做就是了：

```
bottle_number = bottle_number - bottle_down 
```

或者：

```
bottle_number -= bottle_down 
```

并且没有理由`countdown = ""`在顶部进行初始化。您从不使用该值，那么为什么要存储它呢？

同时，与其计算`bottle_number - bottle_down`两次（一次在`print`语句中，然后再次为下一个循环存储），为什么不在`print`语句之前只计算一次呢？

最后，你得到了：

```
if bottle_number == 0: 
```

所以，如果你用`9`and运行它`2`，因为你最终会得到 -1 瓶而不是 0，最后这节经文不会被打印出来。那是你要的吗？（另外，当你降到 1 并拿 2 时，它会打印出这样的诗句：“拿 2 下来并传递它，-1 瓶啤酒在墙上。”但这听起来像是人们或在化学强化程度最低的数学新生——实际上可能会唱歌。）

# foursquare - 如何通过 API 创建会议场景而不是大道的所有者？

> ID：15579466
> 
> 赞同：0
> 
> 时间：2013-03-22T20:39:05.383
> 
> 标签：foursquare

有没有办法在会议场景中使用 FourSquare 而不是场地所有者？

我正在寻找一种方法来为多个地理位置的多个会议创建基于我们的会议日程表的各种签到以及自定义徽章、奖励和特价。

这可以通过 API 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:35:37.633

不幸的是，由于以下几个原因：

1.  An`event`是 Foursquare 中 a 的一个方面`venue`，因此在该模型下，只有场地所有者才能控制场地中的活动。

2.  此外，Foursquare 目前仅支持音乐和电影活动，实际上并没有让场地所有者通过 API 在场地创建活动。有关更多详细信息，请参见此处：[https ://developer.foursquare.com/docs/venues/events](https://developer.foursquare.com/docs/venues/events)

3.  只有场地的所有者可以添加奖励和特价。这些好处与场地相关，而不是与活动相关。

4.  只有品牌可以创建自定义徽章，这不能通过 API 完成（涉及手动审批流程）：[http ://business.foursquare.com/brands/](http://business.foursquare.com/brands/)

# node.js - 如何为 REST API 构建 Mongo 数据库

> ID：15579468
> 
> 赞同：2
> 
> 时间：2013-03-22T20:39:22.307
> 
> 标签：node.js, mongodb, rest, database, nosql

我正在用 Mongo 编写一个 REST API，并且对整个文档建模策略很感兴趣。这似乎是一个非常分裂的问题，人们说先去规范化，然后再规范化，反之亦然。

我有兴趣了解 REST api 的资源结构如何影响基于文档的数据库的结构。似乎使用 REST api 资源结构，对所有内容（即位置、租户、事务）进行单独的集合几乎是有意义的，尽管这似乎与 Mongo 的好处之一背道而驰。

我的问题是如何在 NoSQL（特别是 Mongo）文档数据库中对 REST api 的资源进行建模。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:00:58.540

答案是，有很多方法，具体取决于您要优化的内容。通常，您的文档模式的定义和集合的分离将取决于您对文档的特定用例是什么——您将如何使用您的数据？

要记住的一个重要概念是，集合之间的“连接”成本很高 - 基本上你从一个集合中获取一个外键并在另一个集合中进行另一个查找，这就是为什么反规范化通常有助于性能 - 如果它匹配你的用例。这就是 MongoDB 可能大放异彩的地方，尽管将来如果您的需求发生变化，您的文档结构可能需要发生巨大变化。

第二个关键考虑因素是 MongoDB 文档大小限制——我上次检查时大约为 16MB。以您的经典博客网站为例，其中包含博客文章集合。我们可以选择将评论存储为子文档，作为帖子文档中的数组。这样，您可以拥有一个用于 /posts/postID 的 REST API，将帖子文档返回给您，而无需在其他集合中执行任何“连接”或查找评论等操作。但是，如果您的帖子上有大量评论，那么您就会遇到问题，因此在这种情况下，您必须通过将评论分离到另一个集合中来规范您的数据。

因此，从数据库中检索的速度/易用性和文档存储的灵活性——如果您需要为将来更改文档的模式结构，是您在计划项目 API 时应该考虑的两个主要考虑因素。

问问自己，文档/集合 X 将如何使用？您什么时候需要从中检索数据？如果一个资源*租户*有一个“父资源”*位置*，并且访问位置是您真正需要租户的唯一时间，那么您无论如何都可以将租户的存储设计到位置架构中。但是，如果您需要能够自己查询租户，那么您可能希望将租户分成他们自己的集合。因此，没有正确或错误的方法来解决它，只需根据您计划如何使用数据来制定计划！

祝你好运！

# php - mod_rewrite 规则 500 内部服务器错误

> ID：15579472
> 
> 赞同：1
> 
> 时间：2013-03-22T20:39:34.823
> 
> 标签：php, apache, .htaccess, mod-rewrite

我想从扩展 URL 重定向到无扩展 URL。例如，/contact 应该读取 /contact.php 的内容。我使用以下规则来实现这一点：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L,QSA] 
```

有一个名为 test.php 的文件，其中有一个名为“id”的变量。我想将读取请求从 /test/1 重定向到 test.php?id=1

我使用以下方法来实现这一点：

```
RewriteRule ^test/([0-9]+)/?$            /test?id=$1 
```

出于某种原因，调用 test/1 文件会导致 500 内部服务器错误。如果我删除规则以隐藏 php 扩展，它会再次起作用

另外，如何强制对带有扩展名的 URL 进行永久重定向？例如，如果有人联系到 /contact.php 应该被重定向到 /contact

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:44:16.937

您可以使用以下代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# your existing rule (fixed)
RewriteRule ^test/([0-9]+)/?$ /test.php?id=$1 [L,NC,QSA]

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:46:42.963

这是在我的`htaccess` ...一定要`mod_rewrite`在Apache中打开...

```
RewriteEngine On
# Redirect .php requests to url without an extension
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://example.com/folder/$1 [R=301,L]
RewriteRule ^([^/.]+)$ $1.php [L]
# This will remove the trailing slash unless it's a directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://example.com/folder/$1 [R=301,L] 
```

# hibernate - JPA @OneToMany 持续存在，但 @ManyToOne 不存在

> ID：15579476
> 
> 赞同：1
> 
> 时间：2013-03-22T20:39:49.527
> 
> 标签：hibernate, jpa

我是 Hibernate/JPA 的新手，并且在理解所有这些注释的 JPA 持久性方面遇到了一些问题。我有 2 个简单的实体，两者之间存在 OneToMany/ManyToOne 关系，但我不明白两者之间的持久性是如何工作的。

这是我的实体和关系：

```
@Entity
@Table(name = "DEVICE_TABLE")
public class DeviceEntity implements Serializable {
...

@Id
private String serialNumber;

@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "deviceEntity")
private Set<AlertsEntity> alerts = new HashSet<AlertsEntity>(0);
...

@Entity
@Table(name = "ALERT_TABLE")
public class AlertsEntity implements Serializable {
...
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "serialNumber", nullable = false)
private DeviceEntity deviceEntity;
... 
```

以下是我尝试在其间使用我的 DAO 来使用它们的方法：

```
String serialNumber = "asdf";

DeviceEntity device = new DeviceEntity(serialNumber, new HashSet<AlertsEntity>());
deviceService.addDeviceEntity(device);

AlertsEntity alertEntity = new AlertsEntity(device, "Alert1");
device.getAlerts().add(alertEntity);

alertService.addAlertsEntity(new AlertsEntity(device, "Alert2"));

List<AlertsJson> alertsFromDeviceService = deviceService.getJsonableAlerts(serialNumber);
List<AlertsJson> alertsFromAlertService = alertService.getJsonableAlerts(device);

assertEquals(2, alertsFromAlertService.size()); //passes
assertEquals(2, alertsFromDeviceService.size()); //FAILS! 
```

现在这是我不明白的部分......我认为通过设置这两个关系，两个实体链接在一起，所以当我添加/删除一个时，另一个会更新。

但是当我通过 DeviceEntity 添加警报时，警报实体会更新，但是当我通过警报实体添加警报时，设备实体不会更新。这个对吗？我错过了什么吗？如果是这样，那么拥有警报实体和关系有什么意义？

**--更新：TL；DR --**

这是我的主要问题：当我更新一个实体并设置一个标记为@ManyToOne 的字段时，它是否会自动保留到与之链接的另一个表中？

所以在上面的例子中，如果我创建一个新的 AlertEntity 并设置 DeviceEntity 字段，当我说 DeviceEntity.getAlerts() 时，这个警报是否会在我的 DeviceEntity 中的 Set 中可用？

# java - 控制台窗口上的数字时钟

> ID：15579480
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:40:16.297
> 
> 标签：java, time, clock

嗨，我的时钟代码只是显示即时时间，但我怎样才能让它数字化，这将在控制台中更改秒、分和小时。

我只需要用于控制台的程序......而不是 Applet。

我的代码在这里：

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class DateFormatExample {
    public static void main(String[] args) {
        Date date = Calendar.getInstance().getTime();

        DateFormat formatter = new SimpleDateFormat("EEEE, dd MMMM yyyy, hh:mm:ss.SSS a");
        String today = formatter.format(date);      
        System.out.println("Today : " + today);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:13:38.517

你可以这样尝试：

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class DateFormatExample {
    public static void main(String[] args) {
        Thread th = new Thread(new Runnable()
        {
            public void run()
            {
                while(true)
                {
                    Date date = Calendar.getInstance().getTime();
                    DateFormat formatter = new SimpleDateFormat("EEEE, dd MMMM yyyy, hh:mm:ss.SSS a");
                    String today = formatter.format(date);      
                    System.out.print("Today : " + today+"\r");
                    try{
                    Thread.sleep(100);}catch(Exception ex){}
                }
            }
        });
        th.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:19:22.837

你可以尝试这样的事情：

```
 new Thread(new Runnable() {

        @Override
        public void run() {

            while (true){

                Calendar cal = new GregorianCalendar();
                int hour = cal.get(Calendar.HOUR);
                int minute = cal.get(Calendar.MINUTE);
                int seconds = cal.get(Calendar.SECOND);
                String realTime = Integer.toString(hour) + " : " + Integer.toString(minute) + " : " + Integer.toString(seconds);

                System.out.println(realTime);

                try {

                    Thread.sleep(1000);
                } catch (Exception ex) {
                    ex.getStackTrace;
                }
           }
        }
    }).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T10:16:07.073

简单的while循环就足够了：

```
public static void main(String[] args) {

        while (true) {
            Date date = Calendar.getInstance().getTime();
            DateFormat formatter = new SimpleDateFormat("EEEE, dd MMMM yyyy, hh:mm:ss.SSS a");
            String today = formatter.format(date);
            System.out.print("\rToday : " + today);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 
```

# java - selectOneMenu 转换器在更改事件中的方法之前调用

> ID：15579483
> 
> 赞同：0
> 
> 时间：2013-03-22T20:40:23.273
> 
> 标签：java, jsf, primefaces, converter

**编辑**

我会以不同的方式问这个问题，

这是我的代码

```
<p:remoteCommand name="setTab_#{ss.level}" action="#{planMediaControllerInternet.affecterLigneCalcul(ss)}"/>  
<p:selectOneMenu id="supportForRegieInternet" value="#{ss.supportInternet}"  converter="supportInternetConverter" onkeydown="setTab_#{ss.level}" onchange="setTab_#{ss.level}" >
                <f:selectItem itemLabel="-----"  />
                <f:selectItems value="#{planMediaControllerInternet.lstSupportForFournisseurItem()}" />
                <p:ajax event="valueChange" listener="#{planMediaControllerInternet.affecterLigneCalcul(ss)}" update="typePW,nbVisU,classAx,prestationForSupportInternet,supportForRegieInternet"/>
                                </p:selectOneMenu> 
```

***我希望在这段代码中，在转换器的方法 getAsObject 之前调用方法 effecterLigneCalcul，这可能吗？***

这是我的转换器

```
@FacesConverter(value="supportInternetConverter")
@RequestScoped
public class SupportInternetConverter implements Converter{
@Inject
RegieController regieController;
@Inject
SessionController sessionController;
@Inject
PlanMediaControllerInternet planMediaControllerInternet;

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {
PlanMediaInternetLigneCalcul pmilc = planMediaControllerInternet.getPlanMediaInternetLigneCalculSelected();
RegieInternet regieInternet = pmilc.getRegieInternet();
if (regieInternet != null) {
    for(SupportInternet r : regieInternet.getLstSupportInternet()) {
    if(r.getNameSupport().equals(value)){
        return r;
    }
    }
}
    return null;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    if(value != null){
    SupportInternet r = (SupportInternet)value;
    return r.getNameSupport();
    }
    return "";
} 
```

**编辑** 问题不是因为 NullPointerException

**编辑**

这是我的 effecterLigneCalcul 函数

```
public void affecterLigneCalcul (PlanMediaInternetLigneCalcul tmpPlanMediaInternetLigneCalcul) {
planMediaInternetLigneCalculSelected = tmpPlanMediaInternetLigneCalcul;
} 
```

# php - Wordpress get_template_part 不起作用 - 返回 404 页面而不是 loop-xxx.php

> ID：15579485
> 
> 赞同：1
> 
> 时间：2013-03-22T20:40:35.703
> 
> 标签：php, wordpress-theming, custom-post-type, wordpress

通常我会尽力通过在线搜索或无休止的实验来找到答案。这一次我真的绝望了。我已经阅读了许多相关问题，但没有一个可以解决我的问题。

我在许多其他主题中使用“get_template_part”并且效果很好。这一次我不知道有什么不同。

在我的主题中有一个注册的自定义帖子类型**事件**。事件中帖子的 url 看起来像*example.com/event/wine-tasting*。

问题是：*example.com/event/*返回 404 页面而不是排列所有事件帖子（loop-event.php）

这是我的archive.php：

```
<?php get_header(); ?>
<?php if ( have_posts() ) the_post();?>
<?php rewind_posts();?>
<?php $post_type = get_post_type();
    get_template_part( 'loop', $post_type );?>
<?php get_footer(); ?> 
```

这是我的循环事件.php：

```
<?php get_header(); ?>
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
    <div class="container">
        <?php the_title();?>
        <?php the_content();?>
    </div>
<?php endwhile; ?> 
```

这就是我注册自定义帖子类型“事件”的方式：

```
function yd_create_post_type_event() 
{
$labels = array(
    'name' => __( 'Events','yd'),
    'singular_name' => __( 'Event','yd' ),
    'add_new' => __('Add New','yd'),
    'add_new_item' => __('Add New Event','yd'),
    'edit_item' => __('Edit Event','yd'),
    'new_item' => __('New Event','yd'),
    'view_item' => __('View Event','yd'),
    'search_items' => __('Search Event','yd'),
    'not_found' =>  __('No event found','yd'),
    'not_found_in_trash' => __('No event found in Trash','yd'), 
    'parent_item_colon' => ''
  );

  $args = array(
    'labels' => $labels,
    'public' => true,
    'exclude_from_search' => false,
    'publicly_queryable' => true,
    'show_ui' => true, 
    'show_in_menu' => true,
    'show_in_admin_bar' => true,
    'query_var' => true,
    'capability_type' => 'post',
    'hierarchical' => false,
    'menu_position' => 5,
    'menu_icon' => 0,
    'supports' => array('title','editor','excerpt')

  ); 

 register_post_type('event',$args);
}

register_taxonomy(
    "event-category", 
    array("event"), 
    array(
        "hierarchical" => true, 
        "label" => __( "Event Categories",'yd' ), 
        "singular_label" => __( "Event Category",'yd' ), 
        "rewrite" => array('slug' => 'event')
    )
); 
```

我将衷心感谢您的帮助。我已经尝试了一切，我希望是我犯了一些愚蠢的错误。但到目前为止我无法解决。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:49:42.407

当您在 WordPress 中添加新的自定义帖子类型时，您需要刷新/刷新永久链接。请转至：`Settings > Permalinks`并单击**保存更改**按钮（执行此操作两次）。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:31:47.630

您需要刷新 WordPress 生成的重写规则。

创建如下函数：

```
function rewrite_flush() {
    flush_rewrite_rules();
} 
```

如果自定义帖子类型在您的模板中，请使用：

```
add_action( 'after_switch_theme', 'rewrite_flush' ); 
```

如果自定义帖子类型在您的插件中，请使用：

```
register_activation_hook( __FILE__, 'rewrite_flush' ); 
```

反过来是@Sunny Johal 的回答。

# antlr4 - ANTLR4：布尔表达式的解析器

> ID：15579486
> 
> 赞同：1
> 
> 时间：2013-03-22T20:40:36.780
> 
> 标签：antlr4

我正在尝试解析以下类型的布尔表达式 B1=p & A4=p | A6=p &(~A5=c)

我想要一棵可以用来评估上述表达式的树。所以我在 Antlr3 中用[Antlr parser for and/or logic 中的示例尝试了这个 - 如何在逻辑运算符之间获取表达式？](https://stackoverflow.com/questions/9509048/antlr-parser-for-and-or-logic-how-to-get-expressions-between-logic-operators)

它在 Antlr3 中工作。现在我想对 Antlr 4 做同样的事情。我想出了下面的语法并编译。但是我在编写 Java 代码时遇到了麻烦。

## Antlr4 语法的开始

```
grammar TestAntlr4;

options {
  output = AST;
}

tokens { AND, OR, NOT }

  AND : '&';
  OR  : '|';
  NOT : '~';

// parser/production rules start with a lower case letter
parse
  :  expression EOF!    // omit the EOF token
  ;

expression
  :  or
  ;

or
  :  and (OR^ and)*    // make `||` the root
  ;

and
  :  not (AND^ not)*      // make `&&` the root
  ;

not
  :  NOT^ atom    // make `~` the root
  |  atom
  ;

atom
  :  ID
  |  '('! expression ')'!    // omit both `(` and `)`
  ;

// lexer/terminal rules start with an upper case letter
ID
  :
    (
    'a'..'z'
    | 'A'..'Z'
    | '0'..'9' | ' '
    | ('+'|'-'|'*'|'/'|'_')
    | '='
  )+ 
  ; 
```

* * *

我已经编写了 Java 代码（下面的代码段）来获取表达式“B1=p & A4=p | A6=p &(~A5=c)”的树。我期待 & 与孩子 B1=p 和 |。孩子| 运算符将有子 A4=p 和 A6=p &(~A5=c)。等等。这是Java代码，但我一直在试图弄清楚如何获得树。我能够在 Antlr 3 中做到这一点。

## Java 代码

```
String src = "B1=p & A4=p | A6=p &(~A5=c)";
CharStream stream = (CharStream)(new ANTLRInputStream(src));
TestAntlr4Lexer lexer = new TestAntlr4Lexer(stream);
parser.setBuildParseTree(true);
ParserRuleContext tree = parser.parse();
tree.inspect(parser); 
if ( tree.children.size() > 0) {
    System.out.println(" **************");
    test.getChildren(tree, parser);
} 
```

get Children 方法如下。但这似乎并没有提取任何令牌。

```
public void getChildren(ParseTree tree, TestAntlr4Parser parser ) {
   for (int i=0; i<tree.getChildCount(); i++){
       System.out.println(" Child i= " + i);
       System.out.println(" expression = <" + tree.toStringTree(parser) + ">");
       if ( tree.getChild(i).getChildCount() != 0 ) {
           this.getChildren(tree.getChild(i), parser);
       }
   }
} 
```

有人可以帮我弄清楚如何用 Java 编写解析器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:50:46.430

ANTLR 4 中删除了该`output=AST`选项，以及您在语法中使用的`^`and运算符。`!`ANTLR 4 生成*解析树*而不是 AST，因此规则生成的树的根就是规则本身。例如，给定以下规则：

```
and : not (AND not)*; 
```

您最终将得到一`AndContext`棵树，其中分别包含和`NotContext`引用的`TerminalNode`子级。为了更容易使用树，将包含一个生成的方法，该方法返回由规则调用返回的上下文对象列表（返回类型）。它还包含一个生成的方法，该方法返回为每个匹配的令牌创建的实例列表。`not``AND``AndContext``not()``not``List<? extends NotContext>``AND``TerminalNode``AND`

# java - 简单的 OpenGL 着色器在 LibGDX 中出现错误（没有名称为diffuseTexture 的统一）

> ID：15579488
> 
> 赞同：0
> 
> 时间：2013-03-22T20:40:42.657
> 
> 标签：java, opengl, shader, libgdx

我不明白为什么在构建时将这个简单的着色器设置为导入的网格（.obj 网格）时出现错误，我得到的错误是：“着色器中没有名称为 'diffuseTexture' 的统一”

问题是，我现在不想使用纹理，出于学习目的，我想从有一个红色网格开始，然后从那里一步一步地......

这里还有一些代码：

```
ObjLoader loader = new ObjLoader();
model = loader.loadObj(Gdx.files.internal("model.obj"),true);

String vertexShader = "" +
"attribute vec4 Position;" +
"uniform mat4 u_projView;" +
"void main() {" +
"gl_Position = u_projView * Position;" +
"}";

String fragmentShader = "void main() {" +
"gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);" +
"}";

ShaderProgram shader = new ShaderProgram(vertexShader,fragmentShader);

model.render(shader); 
```

我得到的错误：

```
Exception in thread "LWJGL Application"
com.badlogic.gdx.utils.GdxRuntimeException:
java.lang.IllegalArgumentException: no uniform with name
'diffuseTexture' in shader  at
com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:113)
Caused by: java.lang.IllegalArgumentException: no uniform with name
'diffuseTexture' in shader  at
com.badlogic.gdx.graphics.glutils.ShaderProgram.fetchUniformLocation(ShaderProgram.java:283)
    at
com.badlogic.gdx.graphics.glutils.ShaderProgram.setUniformi(ShaderProgram.java:297)
    at
com.badlogic.gdx.graphics.g3d.materials.TextureAttribute.bind(TextureAttribute.java:80)
    at
com.badlogic.gdx.graphics.g3d.materials.Material.bind(Material.java:70)
    at
com.badlogic.gdx.graphics.g3d.model.still.StillModel.render(StillModel.java:57) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:05:53.997

仅查看 libGDX 的源代码，我可以假设您的**model.obj**在材质部分中分配了一个纹理。因此，GDX 创建具有纹理属性的材质并尝试设置它。

您可以尝试做的是：

*   使用没有纹理的 OBJ 模型
*   使用纹理属性调用 Material::removeAttribute()
*   将“sampler2DdiffuseTexture”字符串添加到您的着色器中，但一定要以某种方式使用它，否则，此属性将从您的着色器中删除。你可以这样做，例如：

    ```
    vec4 texval = texture2d(diffuseTexture, vec2(0,0));
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) + texval*0; 
    ```

# html - 如何将透明背景的png图像的可见部分作为链接？

> ID：15579490
> 
> 赞同：3
> 
> 时间：2013-03-22T20:40:46.797
> 
> 标签：html, css

我想在我的网站上使用具有透明背景的 .png 图像作为链接。

我试过这个html：

```
<a href="index.html">
    <img border="0" src="smiley.png" alt="smiley" width="150" height="150">
</a> 
```

这个CSS：

```
a
{
    text-decoration: none;
    color: inherit;
} 
```

但是，图像仍然可以在我的图像的透明背景上单击。

这是我想要得到的说明：

![样本](../Images/c52c4b06bb842695c58c0d3a3b7a8cce.png)

***注：此图片仅供参考。我 100% 确定我的图片具有透明背景。*

**当光标仅在笑脸（可见部分）上时，如何将我的图像用作链接？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:43:45.027

对于此特定图像，您可以使用带有圆圈的[图像映射作为活动区域。](http://www.w3schools.com/tags/tag_map.asp)

```
<map id="ImgMap0" name="ImgMap0">
    <area alt="" coords="30, 32, 30" href="http://www.link.com" shape="circle" />
</map>
<img src="http://placehold.it/64x64" alt="" usemap="#ImgMap0"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:03:28.990

使用 css 属性`border-radius: 50%;`来弯曲边（如果图像是圆形的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:49:32.913

试试这样，映射技术

```
<map name="imgmap">
<area shape="smiley" coords="x,y,radius" href="link.html" alt="img_alt">
</map> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:11:34.107

您也可以使用 css3。我发现这篇文章有[详细信息和一个很好的例子](http://www.metisonline.co.za/2012/08/responsive-css-circle-buttons/)

我没有“几乎”测试这个，但你可以试一试。

CSS

```
.circle {
    background: none repeat scroll 0 0 #CCCCCC;
    /* some cross-browser css missing for border-radius */
    border-radius: 100px 100px 100px 100px;
    color: #FFFFFF;
    display: block;
    float: left;
    font-size: 20px;
    height: 200px;
    line-height: 200px;
    margin-right: 30px;
    text-align: center;
    width: 200px;
}
.circle-border {
    background: none repeat scroll 0 0 #CCCCCC;
    border: 1px solid #999999;
    /* some cross-browser css missing for border-radius */
    border-radius: 100px 100px 100px 100px;
    color: #FFFFFF;
    display: block;
    float: left;
    font-size: 20px;
    height: 199px;
    line-height: 200px;
    margin-right: 30px;
    text-align: center;
    width: 199px;
} 
```

HTML

```
<a href="#" class="circle">BUTTON</a>
<hr style="clear:both;float:left;height:1px;width:100%;" />
<a href="#" class="circle-border">BUTTON</a> 
```

[在这里重新摆弄](http://jsfiddle.net/8jg8L/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-02T11:21:50.237

您不必使用图像映射。我用 2 `<div>`s 试了一下，效果很好。只需将笑脸和`<div>`带有属性`onclick="window.open('yoururl')"`的 a 放在 main`<div>`中。使两者都`<div>`圆且不可见。

HTML：

```
<div id="maindiv">
<img src="smiley.png" alt="" id="smiley"/>
<div id="LinkArea" onclick="window.open('https://google.com')"></div>
</div> 
```

CSS：

```
#maindiv {
height: 150px;
width: 150px;
background-color: rgba(0,0,0,0);
border-radius: 100%;
z-index: 2;
position: absolute;
top: 0;
left: 0;
}
#smiley {
height: 150px;
width: 150px;
z-index: 1;
}
#LinkArea {
height: 150px;
width: 150px;
background-color: rgba(0,0,0,0);
border-radius: 100%;
cursor: pointer;
z-index: 3;
position: absolute;
top: 0;
left: 0;
} 
```

# javascript - jquery clone() 没有克隆隐藏值来复制对象

> ID：15579493
> 
> 赞同：1
> 
> 时间：2013-03-22T20:41:00.097
> 
> 标签：javascript, jquery, html, dom

来自[这里的一个扩展问题](https://stackoverflow.com/questions/15561912/jquery-cannot-recognize-appended-cloned-elements-using-jquery-appendto)

该`clone`函数似乎能够复制每个元素，但不能复制`hidden inputs` 现在克隆后的一切看起来像这样：

```
<input id="_denominations[0].id.reference" class="removableHiddenOrder" type="hidden" name="denominations[0].id.reference" value="">
<input id="_denominations[0].denomination" class="removableHiddenDenom" type="hidden" name="denominations[0].denomination" value=""> 
```

这`value=""`是一个问题。它应该携带来自原始目标元素的值。我知道默认情况下 clone() 是 clone(false)，但是使用 clone(true) 并没有多大帮助。

# php - onbeforeunload 触发购物车放弃

> ID：15579496
> 
> 赞同：1
> 
> 时间：2013-03-22T20:41:41.190
> 
> 标签：php, onbeforeunload

'onbeforeunload' 事件是否 100% 一致、有效且值得用作购物车放弃活动的触发器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:46:11.800

Nothing is 100% reliable -- someone could just hit the power switch -- but it's good.

That being said, assume that it will fail sometimes. Use it more as a convenience for your customers than as a mission-critical piece of functionality.

# .htaccess - 使用 htaccess 重定向

> ID：15579500
> 
> 赞同：1
> 
> 时间：2013-03-22T20:42:06.333
> 
> 标签：.htaccess, mod-rewrite

这似乎是一项非常简单的任务，但是在阅读了太多教程后，我几个小时都无法完成。请帮忙..

我需要重定向

```
http://example.com/myfolder/myfile.php?type=1&add=20 
```

到这个地址：

```
http://example.com/newfolder/mytasks.xml 
```

我试过太多了。我最后一次试用是这样的：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^/myfolder/myfile.php?type=1&add=20$ /newfolder/mytasks.xml [R=301,NC,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:49:24.943

请改用此规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+myfolder/myfile\.php\?type=1&add=20 [NC]
RewriteRule ^ /newfolder/mytasks.xml [R=301,L] 
```

### 记住：

*   RewriteRule 匹配不以斜杠开头`/`
*   RewriteRule 不匹配查询字符串，它只匹配请求 URI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T10:16:33.880

如果您还希望`type=1&add=20`删除查询，这样的事情应该可以工作：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING}  type=1&add=20                 [NC]
RewriteCond %{REQUEST_URI}   !/newfolder/                  [NC]
RewriteRule ^myfolder/myfile\.php  /newfolder/mytasks.xml? [R=301,NC,L] 
```

重定向：

`http://example.com/myfolder/myfile.php?type=1&add=20`至

`http://example.com/newfolder/mytasks.xml`

对于静默映射，将 [R=301,NC,L] 替换为 [NC,L]

# android - Android Admob 没有足够的空间来展示广告

> ID：15579506
> 
> 赞同：1
> 
> 时间：2013-03-22T20:42:25.313
> 
> 标签：android, admob, android-linearlayout, space, android-xml

使用[admob网站提供的代码](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)

这是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background_img"
    android:orientation="vertical"
    android:id="@+id/atozlayout"
     >
<GridView 
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="55dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    
    android:horizontalSpacing="10dp"
   android:verticalSpacing="10dp"  

    >

</GridView>
</LinearLayout> 
```

但是 logcat 显示 E/Ads(4244): Not enough space to show ad！想要：<480, 75>，拥有：<800, 0>

似乎布局正在产生问题。请提出解决方法。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:46:44.553

Your grid is taking up all the space with **layout_height="fill_parent"**.

You can use **layout_weight="1"** and **layout_height="0dp"** to tell the grid to take up all the remaining space after other views are shown.

Also are you adding the AdView programmatically? You can place it in the xml below the GridView.

Ex:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background_img"
    android:orientation="vertical"
    android:id="@+id/atozlayout"
     >
<GridView 
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:columnWidth="55dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:horizontalSpacing="10dp"
   android:verticalSpacing="10dp">

</GridView>
<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     ads:adUnitId="MY_AD_UNIT_ID"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                     ads:loadAdOnCreate="true"/>

</LinearLayout> 
```

Make sure you replace adUnitId with your value.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:44:20.687

你的 gridView 是贪婪的。它吃掉了屏幕上的所有可用空间。解决方法是将顶层布局切换为Relative布局，并将 android:layout_above"@+id/adview" 添加到 GridView 和 android:layout_alignParentBottom=true 到广告视图。这将强制 gridview 在其下方为广告留出空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:45:06.440

根据您链接的页面上的 Android 选项卡，`<com.google.ads.AdView>`您的布局中需要一个视图，您的原始帖子中似乎缺少该视图。

# linux - 通过正则表达式过滤每行linux bash输出

> ID：15579507
> 
> 赞同：25
> 
> 时间：2013-03-22T20:42:29.417
> 
> 标签：linux, bash, unix

我想过滤任意输出的输出，例如`cat`或`objdump`只显示包含“模式”的行。

是否有单行 UNIX/Linux 命令来执行此操作？

例如`cat filepath | xargs grep 'pattern' -l`不适合我

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T20:43:56.590

```
cat file | grep pattern 
```

`grep pattern file`如果它是静态文件，您也可以使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-22T20:49:41.233

最好使用`grep -e`or `egrep`（这允许扩展正则表达式）。然后你可以用正则表达式做更强大的事情：

```
 cat my_phonebook | egrep "[0-9]{10}" 
```

显示文件中的所有 10 位电话号码。

如果您折腾 a `-o`，则仅返回数字（而不是行上的前后内容）。

# jquery-ui - ajax 部分视图重新加载后，JQuery 对话框不起作用

> ID：15579511
> 
> 赞同：0
> 
> 时间：2013-03-22T20:43:01.447
> 
> 标签：jquery-ui, jquery, razor, asp.net-mvc-4

我正在处理视图中的数据表。当用户单击数据名称时，会弹出一个对话框以允许他编辑数据。当他单击删除时，会出现一个对话框提示他确认，然后删除该行。当他选择创建新行时，会弹出一个对话框让他输入新信息。在所有 3 种情况下，动作完成后，PartialView "_Content" 都会重新加载内容`<div />`。

在整个页面加载后，这一切都在第一次正常工作。但是在 PartialView 重新加载之后（在其中一个操作之后），“编辑”对话框不再起作用，尽管其他 2 个可以。当然，我可以在每次操作后重新加载页面以重新加载所有内容，但这会更慢并且在 Ajax 世界中没有意义。如果我将编辑对话框的 JQueryUIHelper 放在局部视图中，它会再次工作，但第二次，表单会在页面上内联而不是在对话框中打开。我也直接使用 JQuery 和 JQueryUI 进行了尝试，并得到了同样的错误。我一直在研究这个并试验了好几天。

**2013 年 4 月 1 日更新：***我向`$.click()`链接类添加了一些回调。它们在页面进行部分刷新后不起作用。我猜发生的事情是，当内容重新加载时，脚本失去了与**内容** `<div>`中对象的“连接” 。

我通过 JQueryUIHelper 扩展使用 MVC4、Razor 和 JQueryUI。View 和 PartialView 的代码如下。

有什么想法吗？？

这是我的看法

```
@model IEnumerable<AttributeLookup>
@{
ViewBag.Title = "Attributes";
}
<h2>
Attributes</h2>
@if (ViewBag.Error != null)
{
<div class="message-error">@ViewBag.Error</div>
}
<div id="content">
   @Html.Partial("_Content", Model)
</div>

<div style="padding-top: 12px;">
@Ajax.ActionLink("New", "Create", new { }, new AjaxOptions {
    HttpMethod = "Get",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "createContent"
}, new { id = "createLink" })
</div>

@using (Html.JQueryUI().Begin(new Dialog()
.Title("Confirm Delete")
.AutoOpen(false)
.Modal(true)
.CloseOnEscape(true)
.ConfirmAjax(".deleteLink", "Yes", "No",
new AjaxSettings { Method = HttpVerbs.Post, Success = "content" })))
{
<div>
    Are you sure you want to delete this attribute?
</div>
}
@using (Html.JQueryUI().Begin(new Dialog()
.Title("Create Attribute")
.AutoOpen(false)
.Width(500)
.TriggerClick("#createLink")
.Modal(true)
.CloseOnEscape(true)
.Button("OK", "save")
.Button("Cancel", "closeDialog")))
{
<div id="createContent" />
}
@using (Html.JQueryUI().Begin(new Dialog(new {id = "editDialog"})
.Title("Edit Attribute")
.AutoOpen(false)
.Width(500)
.TriggerClick(".editLink")
.Modal(true)
.CloseOnEscape(true)
.Button("OK", "save")
.Button("Cancel", "closeDialog")))
{
<div id="editContent" />
}

@section Scripts {
   <script type="text/javascript">

  var success = function(data) {
     $(window.document.body).html(data);
  };

  var content = function(data) {
     $("#content").html(data);
  };

  var closeDialog = function() {
     $(this).dialog('close');
  };

      var saveCreate = function() {
         $("#createForm").submit();
         $(this).dialog('close');
      };

      var saveEdit = function() {
         $("#editForm").submit();
         $(this).dialog('close');
      };

      $(".editLink").click(function () { alert("edit clicked"); });
      $(".deleteLink").click(function () { alert("delete clicked"); });

   </script>
} 
```

这是部分视图

```
@model IEnumerable<AttributeLookup>
@if (ViewBag.Error != null)
{
<div class="message-error">@ViewBag.Error</div>
}
<table id="attribute">
<tbody>
    <tr>
    <th style="width: 250px;">
        @Html.DisplayNameFor(model => model.Name)
    </th>
    <th style="width: 50px;">
        @Html.DisplayNameFor(model => model.Units)
    </th>
    <th style="width: 30px;">
        Contrained
    </th>
    <th style="width: 400px;">
        @Html.DisplayNameFor(model => model.Description)
    </th>
    <th>
        &#160;
    </th>
    </tr>
    @{ int count = 0; }
    @foreach (var item in Model)
    {
    string type = count % 2 == 0 ? "normal" : "alt";
    <tr class="@type">
        <td>
        @Ajax.ActionLink(@Html.DisplayFor(modelItem => item.Name).ToHtmlString(), "Edit",
        new { id = item.AttributeLookupID }, new AjaxOptions
        {
            HttpMethod = "Get",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "editContent"
        }, new { @class = "editLink", title = "Edit attribute" })
        </td>
        <td>
        @Html.DisplayFor(modelItem => item.Units)
        </td>
        <td>
        @if (item.AttributeConstraints != null && item.AttributeConstraints.Any())
        {
            @Html.Raw("X")
        }
        </td>
        <td>
        @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
        @Html.ActionLink("Delete", "Delete", new { id = item.AttributeLookupID }, new { @class = "deleteLink" })
        </td>
    </tr>
        count++;
    }
</tbody>
</table> 
```

这是编辑表单的部分内容。创建表单类似：

```
@model AttributeLookup
@using (Ajax.BeginForm("Edit", "AttributeLookup", new AjaxOptions {
HttpMethod = "Post",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "content"
}, new {id = "editForm"}))
{
@Html.ValidationSummary(true)

<fieldset>
    <legend>AttributeLookup</legend>
    @Html.HiddenFor(model => model.AttributeLookupID)
    <div class="editor-label">
    @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name)
    </div>
    <div class="editor-label">
    @Html.LabelFor(model => model.Units)
    </div>
    <div class="editor-field">
    @Html.EditorFor(model => model.Units)
    @Html.ValidationMessageFor(model => model.Units)
    </div>
    <div class="editor-label">
    @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
    @Html.EditorFor(model => model.Description)
    @Html.ValidationMessageFor(model => model.Description)
    </div>
    <div class="editor-label">
    @Html.LabelFor(model => model.AttributeConstraints, "Constraint")
    </div>
    <div class="editor-field">
    @Html.DropDownList("ConstraintTypeID")
    @Html.DropDownList("SecondaryID")
    </div>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:03:14.687

我找到了解决方案。首先，我从 Helper 中删除了 TriggerClick：

```
@using (Html.JQueryUI().Begin(new Dialog(new {@id = "editDialog"})
    .Title("Edit Attribute")
    .AutoOpen(false)
    .Width(500)
    // deleted --> .TriggerClick(".editLink")
    .Modal(true)
    .CloseOnEscape(true)
    .Button("OK", "saveEdit")
    .Button("Cancel", "closeDialog")))
{
    <div id="editContent" />
} 
```

然后我明确地将它添加到我的`<scripts>`：

```
$("body").on('click', ".editLink", function () { $("#editDialog").dialog("open"); }); 
```

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:24:28.060

我想知道为什么它适用于其他两个，而不是编辑一个？我怀疑这与从 id 开始的错误有关。尝试去掉 id=editdialog。这可能是一个快速修复。如果这不起作用，请继续阅读。

#dialog 通常由于在 document.ready 或后台页面加载时发生的 jqueryUi 事情而隐藏。

我不确定它何时发生，但你想在重新加载发生后重复这些步骤。在文档末尾未重新加载的部分执行类似...

```
 <script>
   $("body").ajaxComplete( reHideDialog())

     function reHideDialog(){
            $("#dialog").css('display','none');
     }
 </script> 
```

当他们单击编辑链接时，jqueryui 应自动将#dialog css 显示设置为 display:absolute，因为它会在弹出窗口中呈现它。

# delphi - 如何检索 TcxDBLookupComboBox 选定值？

> ID：15579513
> 
> 赞同：1
> 
> 时间：2013-03-22T20:43:26.083
> 
> 标签：delphi, dataset, devexpress

我有一个 DevExpress TcxDBLookupComboBox v12.1.5：

DataBinding.Datafile -> 整数字段 DataBinding.DataSource -> dbisam 表

DropDownListStyle -> lsEditList

立即发布 -> 真

ListFieldIndex -> 1 ListFieldNames -> itemcode；项目名

项目代码是一个整数字段，我想将其检索到连接的数据集。但是我想按项目名称在下拉列表中搜索

这是有效的，由于 ListFieldINdex，但是当我在下拉列表中选择项目时，它会检索项目代码并在编辑框上显示项目名称。那不是我需要的。

我知道我可以使用组件的 OnValidate 事件更改 DisplayValue，但是我找不到如何从下拉列表中检索所选项目代码。使用连接的数据集字段始终返回 0。ImmediatePost 不会更改该字段上的任何内容。我正在使用 FieldByName 属性从数据集中检索字段。

如何让 itemcode 被选中以传递给 OnValidate 上的 DisplayValue？

有一个更好的方法吗？

更新：

我现在正在使用 SyncMode，通过它我可以轻松地从所选记录中获取 itemcode。

但是我无法使控件按我需要的方式工作：

*   直接输入项目代码以直接访问
*   打开项目名称搜索的查找
*   当我找到按 itemname 搜索并且查找列表关闭时显示 ItemCode

# css - 如何在另一个 div 中浮动 4 个 div

> ID：15579514
> 
> 赞同：0
> 
> 时间：2013-03-22T20:43:26.667
> 
> 标签：css, html

我试图并排浮动 4 个 div。它们在父 div width = 100% 中，每个子 div 是 width:25% 也没有边距或填充......它们没有正确显示！

这是代码...

```
<div id="bottomsections">
    <div id="1a">
            <h1>a</h1>

        <p>This is Photoshop's version of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit amet nibh vulputate cursus a sit amet mauris. Morbi accumsan ipsum velit. Nam nec tellus a odio tincidunt auctor a ornare odio. Sed non mauris vitae erat consequat</p>
    </div>
    <div id="1b">
            <h1>b</h1>  
        <p>This is Photoshop's version of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit amet nibh vulputate cursus a sit amet mauris. Morbi accumsan ipsum velit. Nam nec tellus a odio tincidunt auctor a ornare odio. Sed non mauris vitae erat consequat</p>
    </div>
    <div id="1c">
            <h1>c</h1>  
        <p>This is Photoshop's version of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit amet nibh vulputate cursus a sit amet mauris. Morbi accumsan ipsum velit. Nam nec tellus a odio tincidunt auctor a ornare odio. Sed non mauris vitae erat consequat</p>
    </div>
    <div id="1d">
            <h1>d</h1>  
        <p>This is Photoshop's version of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit amet nibh vulputate cursus a sit amet mauris. Morbi accumsan ipsum velit. Nam nec tellus a odio tincidunt auctor a ornare odio. Sed non mauris vitae erat consequat</p>
    </div> 
```

和CSS...

```
#bottomsections {
    width:100%;
}
#1a {
    width:25%;
    float:left;
    margin:0;
    padding:0;
}
#1b {
    width:25%;
    float:left;
    margin:0;
    padding:0;
}
#1c {
    width:25%;
    float:left;
    margin:0;
    padding:0;
}
#1d {
    width:25%;
    float:left;
    margin:0;
    padding:0;
} 
```

这是小提琴.. [http://jsfiddle.net/aM2UL/1/](http://jsfiddle.net/aM2UL/1/)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T20:46:47.663

Id can not start with a number:

```
/* change #1a to #a1 */
#a1 {
    width:25%;
    float:left;
    margin:0;
    padding:0;
} 
```

[http://jsfiddle.net/dfsq/aM2UL/3/](http://jsfiddle.net/dfsq/aM2UL/3/)

Refer this comprehensive answer about what characters are allowed: [https://stackoverflow.com/a/449000/949476](https://stackoverflow.com/a/449000/949476)

*Upd*: As pointed by Allendar in comments you should also clear your floats. You can insert one more element after your floated divs with `clear: both`. Personally I use `.clearfix` class as more semantic:

```
.clearfix:before,.clearfix:after{content:"";display:table}
.clearfix:after{clear:both} 
```

to be used as `<div id="bottomsections" class="clearfix">...</div>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T20:53:42.223

您当然**[可以使用数字来启动 ID](http://benfrain.com/when-and-where-you-can-use-numbers-in-id-and-class-names/)**，但您必须以不同的方式选择它们。

```
[id="1a"], [id="1b"], [id="1c"], [id="1d"] {
    width:25%;
    float:left;
    margin:0;
    padding:0;
} 
```

[http://jsfiddle.net/aM2UL/11/](http://jsfiddle.net/aM2UL/11/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T20:49:00.877

id's cannot start with numbers in any revision of HTML and/or CSS, also, all 4 of your styles are the same, so you would be better off using a class such as

```
div.inner {
    width:25%;
    float:left;
    margin:0;
    padding:0;
} 
```

and set `<div id="1d" class="inner">`

this will keep your code smaller and more manageable and mean less changes if and when you need to do anything else to the code later on.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T20:47:52.060

```
#bottomsections div{ float:left; width:25%} 
```

As others have said, numbers aren't valid beginnings to ids

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T20:51:56.560

ids 不能以数字开头，尝试更改为#a1 或其他内容。但是如果你想在你的主 div 的所有 div 中应用相同的属性，为什么不这样做呢？

```
#bottomsections div{ 
    width:25%;
    float:left;
    margin:0;
    padding:0;
} 
```

# javascript - 禁用复选框有效，但未在 onchange 上处理

> ID：15579524
> 
> 赞同：1
> 
> 时间：2013-03-22T20:44:13.123
> 
> 标签：javascript, jquery

当复选框被javascript函数设置为false时，**下一个函数**似乎不知道它已被设置为false，它只是忽略它。

HTML

```
<input type="checkbox" name="accs" id="50" class="arms"/>Arm 1: $50<br/>
<input type="checkbox" name="accs" id="60" class="arms"/>Arm 2: $60<br/>
<input type="checkbox" name="accs" id="70" class="neck"/>Neck 1: $70<br/>
<input type="checkbox" name="accs" id="80" class="neck"/>Neck 2: $80<br/>
<div id="total">$500</div> 
```

Javascript：此函数根据输入类禁用复选框

```
$('.arms, .neck').change(function(){
var myClass = $(this).attr('class'); 
$('.'+myClass).not(this).prop('checked', false); 
}); 
```

Javascript**下一个函数**：如果启用或禁用复选框，则处理操作的代码块

```
var input = document.getElementsByTagName("input");
var total = document.getElementById("total");
var prev;

for(i=0;i<input.length;i++){

input[i].onchange = function(){
if (this.type != 'text'){
  if(this.checked){

$("#total").fadeOut(300);
$("#total").fadeIn(300);

prev=parseFloat(total.innerHTML.replace(/[^0-9\,]+/g,"")) + parseFloat(this.id);
         total.innerHTML = "$" + prev.formatMoney(0, ',', '.');
    }else{
$("#total").fadeOut(300);
$("#total").fadeIn(300);

prev=parseFloat(total.innerHTML.replace(/[^0-9\,]+/g,"")) - parseFloat(this.id);
         total.innerHTML = "$" + prev.formatMoney(0, ',', '.');
     }
   }
  }
} 
```

单击所有复选框后，您意识到它不会回到原来的价格（500），而是继续加起来。

[小提琴](http://jsfiddle.net/kU6ac/1/)

我没有使用收音机的原因是因为表单必须为所有选项发送相同的“输入名称”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:45:10.003

我在这里设置了一个小提琴：http: [//jsfiddle.net/MarkSchultheiss/r6MXA/2/](http://jsfiddle.net/MarkSchultheiss/r6MXA/2/) 使用这个标记：

```
<input type="checkbox" name="accs" icost="50" class="arms" />Arm 1: $50
<br/>
<input type="checkbox" name="accs" icost="60" class="arms" />Arm 2: $60
<br/>
<input type="checkbox" name="accs" icost="70" class="neck" />Neck 1: $70
<br/>
<input type="checkbox" name="accs" icost="80" class="neck" />Neck 2: $80
<br/>
<div id="total">$500</div> 
```

这个代码：

```
var items = $('input.arms[type="checkbox"], input.neck[type="checkbox"]');
items.change(function () {
    var myClass = $(this).attr('class');
    $('.' + myClass).not(this).prop('checked', false);
    var total = $('#total');
    var totalcost = 0;
    total.fadeOut(300);
    items.filter(':checked').each(function (i) {
        var cost = $(this).attr('icost');
        totalcost = totalcost + parseFloat(cost);
    });
    total.text("$" + totalcost + ".00"); // fix your format here as needed
    total.fadeIn(300);
}); 
```

编辑：根据文本总区域中的当前值管理整个检查/取消检查循环。

```
var items = $('input.arms[type="checkbox"], input.neck[type="checkbox"]');
// get the initial total and store in a data for use later (resets as needed)
var total = $('#total');
total.data("currentvalue", parseFloat(total.text().replace(/[^0-9\,]+/g, "")));
items.change(function () {
    var currenttotal = total.data("currentvalue");
    var myClass = $(this).attr('class');
    var thisGroup = $('.' + myClass);
    var notme = $('.' + myClass + ':checked').not(this);
    var notmeCost = (notme.length ? notme.attr('icost') : ($(this).is(':checked') ? 0 : $(this).attr('icost')));

    notme.prop('checked', false);
    currenttotal = currenttotal - notmeCost;
    total.fadeOut(300);
    thisGroup.filter(':checked').each(function (i) {
        var cost = $(this).attr('icost');
        currenttotal = currenttotal + parseFloat(cost);
    });
    total.data("currentvalue", currenttotal);
    total.text("$" + currenttotal + ".00"); // fix your format here as needed
    total.fadeIn(300);
}); 
```

# javascript - 这个 switch 语句和 jQuery 有什么问题？

> ID：15579525
> 
> 赞同：1
> 
> 时间：2013-03-22T20:44:14.043
> 
> 标签：javascript, jquery, switch-statement

所以你可能会看到我想要做什么。而且我认为它也可以正常工作，但后来我注意到它只会一遍又一遍地加载相同的 5 个帖子。所以我尝试手动添加一个 switch 语句，但它只返回“Uncaught ReferenceError: Invalid left-hand side in assignment”，我用谷歌搜索了一下，发现了一点点。可能是我编辑了我正在使用开关的变量？但无论如何，我怎样才能做得更好，或者修复它？

```
 $("#loadmore").click(function(e){
         if ($(this).attr("varl") == "30"){
           alert("All posts loaded");
         }else{
        var createDiv = $("<div class='loading" + $(this).attr("varl") +"'></div>");
        createDiv.hide();
        $(createDiv).appendTo("#left").load("loadmore.php?last=" + $(this).attr("varl"));
        switch($("#loadmore").attr("varl")){
            case '5':
                $("#loadmore").attr("varl") = "10";
            break;
            case '10':
                $("#loadmore").attr("varl") = "15";
            break;
            case '15':
                $("#loadmore").attr("varl") = "20";
            break;
            case '20':
                $("#loadmore").attr("varl") = "25";
            break;
            case '25':
                $("#loadmore").attr("varl") = "30";
            break;
        }
        console.log($("#loadmore").attr("varl") + 5);
        $(createDiv).delay(500).slideDown(500);
        }
        e.preventDefault();
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T20:46:06.163

```
$("#loadmore").attr("varl") = "10"; 
```

应该

```
$("#loadmore").attr("varl","10"); 
```

[http://api.jquery.com/attr/#attr2](http://api.jquery.com/attr/#attr2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T20:49:15.270

```
var $element = $("#loadmore"),
    value = parseInt($element.attr("varl"),10); // always use a radix

switch ( value ) {
    case 5:
    case 10:
    case 15:
    case 20:
    case 25:
        $element.attr("varl", value + 5); // here's the problem
        break;
} 
```

# full-text-search - 在 OWL 本体集合上进行关键字搜索

> ID：15579528
> 
> 赞同：1
> 
> 时间：2013-03-22T20:44:20.577
> 
> 标签：full-text-search, ontology, owl, triplestore

我有一组 OWL 本体。每个本体都存储在三重存储数据库（例如 OWLIM、Stardog、AllegroGraph ）的数据集中。现在我需要开发一个应用程序，假设基于关键字搜索这些本体，即，给定一个关键字，应用程序应该返回包含该关键字的本体。

我检查了 OWLIM-SE 和 Stardag，它们只提供对一个数据集而不是整个数据库的全文搜索。我也考虑过 Solr(Lucene)。但在这种情况下，本体将被索引两次（一次由 Lucene 索引，另一次由三重存储数据库索引。）

这个问题还有其他解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:30:37.953

Stardog 的全文索引适用于整个数据库，并且[可以](http://stardog.com/docs/using/#search)使用 SPARQL 透明地完成，这将允许您在单个查询中轻松访问与您的搜索条件匹配的概念的其他属性。这将使您准确地得到您所描述的内容。

有关管理搜索索引和 Stardog 的一些信息，请查看[这些文档](http://stardog.com/docs/admin/#search)

# apache - 使用通配符通过 .htaccess 重定向

> ID：15579531
> 
> 赞同：3
> 
> 时间：2013-03-22T20:44:33.563
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, rewrite

如何在 .htaccess 文件中进行通配符重定向？

我尝试使用以下方法，但由于`*`某种原因不起作用。

`redirect 301 /threads/*.343/ http://myotherdomain.com/threads/*.343/`

我不能使用 mod_rewrite，因为我需要做 7000 个这样的重定向，显然，当我尝试其中的一半时，我的服务器抛出了 500 错误配置错误。

因此，编写 7000 行上述代码似乎不那么密集。

无论如何，请让我知道如何在那种代码中表达通配符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:59:52.710

使用 mod_alias，您可以[**`RedirectMatch`**](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirectmatch)改用：

```
RedirectMatch permanent ^/threads/[^/]+\.343/$ http://myotherdomain.com$0 
```

这匹配所有匹配 的 URL `/threads/*.343/`，`*`是除 之外的任何字符`/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:53:18.013

您不需要 7000 条单独的重写规则，只需使用[RewriteMap](https://httpd.apache.org/docs/current/rewrite/rewritemap.html)

1 - 首先在 2 列中创建一个包含所有 7000 个选定 ID 的文本文件，如下所示：

```
343 343
349 349
518 518 
```

2 - 然后像这样定义一个 RewriteMap `httpd.cond`：

```
RewriteMap idmap txt:/path/to/file/map.txt 
```

3 - 然后通过启用 mod_rewrite 和 .htaccess`httpd.conf`然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^threads/(.*)$ http://myotherdomain.com/threads/${idmap:$1} [L,NC,R=301] 
```

# python - 在服务器上短时间存储文件

> ID：15579545
> 
> 赞同：0
> 
> 时间：2013-03-22T20:45:32.803
> 
> 标签：python, webapp2, temporary-files

在服务器上命名和存储生成的文件的最佳方法是什么，这样如果用户在接下来的 5 分钟左右请求该文件，则返回它，否则返回错误代码？我正在使用 Python 和 Webapp2（尽管这适用于任何 WSGI 服务器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:32:25.160

我建议使用`UUID`在服务器上创建的客户端，当服务器存储它时，将错误（强制重试）发送回客户端。在大多数情况下，UUID 将是完全唯一的，不会与已存储的任何内容发生冲突。如果是这样，客户端可以选择一个新名称并重试。如果你想让这稍微好一点，请在重试之间等待一个随机的毫秒数，以减少重复冲突的可能性。

这就是我解决这个特定的、不安全的、短期存储问题的方法。

至于删除，我会让服务器负责每隔一段时间删除它们，基本上是检查是否有任何文件超过 5 分钟并删除它们。只要正在进行的下载使文件保持打开状态，它就不应中断。

如果您想让客户端处于控制之中，当客户端离线时，您将无法简单地强制删除，因此我建议按日期顺序保留文件列表并删除它们：

*   如果您希望运行很长时间，则根据需要在后台线程中
*   在启动时（这将需要将这些持久化到磁盘）
*   关机时（不需要持久化到磁盘）

但是，如果您崩溃或丢失持久性信息，所有这些机制都容易在服务器上留下不必要的文件，因此我仍然建议将删除作为服务器的责任。

# python - 如何使用标识而不是相等来测试元素是否在列表中？

> ID：15579546
> 
> 赞同：3
> 
> 时间：2013-03-22T20:45:33.580
> 
> 标签：python, python-3.x

在 Python 中，我可以测试一个元素是否在列表中，如下所示：

```
elem = 56
long_list = ["foo", "bar", asdf, 56, False]
print(elem in long_list) # "True" 
```

这相当于：

```
elem = 56
long_list = ["foo", "bar", asdf, 56, False]

result = False
for candidate in long_list:
    if elem == candidate:
        result = True
        break
print(result) # "True" 
```

注意`elem == candidate`，它测试**相等性**。

我想要做的是使用而不是测试**身份**`elem is candidate`。在 Python 中执行此操作的最简单方法是什么？

我试过谷歌，但不幸的是，“是”和“在”这两个词太常见了。我也试过

```
print(elem is in long_list) 
```

但这给了我一个语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:46:39.657

Use `any` with a [generator expression](http://docs.python.org/2/reference/expressions.html#generator-expressions):

```
any(elem is candidate for candidate in long_list) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:54:04.380

我可能误解了这个问题，但是如果一个对象没有实现`__eq__`，`in`并且`==`默认为身份比较，这就是你想要的。

```
class Foo:
    pass

a = Foo()
b = Foo()
c = Foo()

print (a in [a,b]) # True 
print (c in [a,b]) # False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:51:46.033

如果被比较的元素`__eq__`按照 实现`is`，您可以简单地使用`elem in long_list`它，它将自动为您调用。所以这应该适用于您的对象：

```
def __eq__(self, x):
    return self is x 
```

为简单起见，这里有一个小演示，它重载相等为`str.startswith`（第二个操作数的）而不是身份。

```
>>> class permissive(str):
        def __eq__(self, x):
            return self.startswith(x)

>>> mylist = map(permissive, [ "hip", "hop" ])
>>> "hi" in mylist
True 
```

当然，在其他上下文中比较对象是否相等时，您将获得相同的超严格行为。如果您的目标只是在列表中查找特定对象，也许您应该定义`__hash__`并将它们存储在字典中？

# mysql - MySQL 嵌套选择多列

> ID：15579549
> 
> 赞同：1
> 
> 时间：2013-03-22T20:45:48.033
> 
> 标签：mysql, subquery

我目前正在尝试检索最新帖子及其相关帖子（每个帖子的 x 号）。我手头有以下查询：

```
SELECT id, title, content
       (SELECT GROUP_CONCAT(title) FROM posts        -- Select title of related posts 
        WHERE id <> p.id AND id IN (                 
           SELECT p_id FROM tagsmap                  -- Select reletad post ids from tagsmap
           WHERE t_id IN (
              SELECT t_id FROM tagsmap               -- Select the tags of the current post 
              WHERE p_id = p.id) 
           ) ORDER BY id DESC LIMIT 0, 3) as related 
FROM posts as p ORDER BY id DESC LIMIT 5 
```

我的数据库结构很简单：一个帖子表。一个标签表。还有一个标签映射表，我将帖子与标签相关联。

这个查询工作正常（虽然我不知道它的性能，因为我的表中没有很多行——也许解释可以帮助我，但现在情况并非如此）。

**我真正需要的是检索相关帖子的 ID 及其标题。**

所以我想做`SELECT GROUP_CONCAT(title), GROUP_CONCAT(id)`，但我知道这会导致错误。那么在这种情况下，检索 id 和标题的最佳方法是什么？我不想重写整个子查询来检索 id。应该有另一种方式。

**编辑**

```
SELECT p1.id, p1.title, p1.content,
    group_concat(DISTINCT p2.id) as 'P IDs',
    group_concat(DISTINCT p2.title) as 'P titles'
FROM posts as p1
LEFT JOIN tagsmap as tm1 on tm1.p_id = p1.id
LEFT JOIN tagsmap as tm2 on tm2.t_id = tm1.t_id and tm1.p_id <> tm2.p_id
LEFT JOIN posts as p2 on p2.id = tm2.p_id
GROUP BY p1.id
ORDER BY p1.id desc limit 5; 
```

最后，这是我使用的查询。我删除了 Where 子句，因为它是不必要的，`LEFT JOIN`而是`JOIN`因为它会忽略没有标签的帖子。最后添加`DISTINCT`到 group_concat 因为它正在连接重复的行（例如，如果一个帖子有多个带有相关帖子的公共标签，则会导致重复的连接）。

上面的查询完美运行。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:08:58.550

像这样？

```
SELECT id, title, content
       (SELECT GROUP_CONCAT(concat(cast(id as varchar(10)), ':', title)) FROM posts        -- Select title of related posts 
        WHERE id <> p.id AND id IN (                 
           SELECT p_id FROM tagsmap                  -- Select reletad post ids from tagsmap
           WHERE t_id IN (
              SELECT t_id FROM tagsmap               -- Select the tags of the current post 
              WHERE post_id = p.id) 
           ) ORDER BY id DESC LIMIT 0, 3) as related 
FROM posts as p ORDER BY id DESC LIMIT 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:31:28.180

好的 - 这将起作用，并且它具有消除子查询的额外优势（当您获得大量记录时会减慢您的速度）：

```
SELECT p1.id, p1.title, p1.content,
    group_concat( p2.id) as 'P IDs',
    group_concat( p2.title) as 'P titles'
FROM posts as p1
JOIN tagsmap as tm1 on tm1.p_id = p1.id
JOIN tagsmap as tm2 on tm2.t_id = tm1.t_id and tm1.p_id <> tm2.p_id
JOIN posts as p2 on p2.id = tm2.p_id
WHERE p2.id <> p1.id
GROUP BY p1.id
ORDER BY p1.id desc limit 5; 
```

我们在这里所做的是从第一个版本的帖子中选择您想要的内容，通过他们的 post.id 将它们加入到 tagsmap，通过标签 id 对 tagsmap 进行自我加入以获取所有相关标签，然后加入回另一个帖子（p2）来获取那些相关标签指向的帖子。

使用 GROUP BY 丢弃所有加入的重复，你就在那里。

# php - If Then 语句错误 - 用户帐户类型

> ID：15579550
> 
> 赞同：0
> 
> 时间：2013-03-22T20:45:49.450
> 
> 标签：php

我正在尝试为我的三种用户帐户类型构建一个基本的标题下拉导航，但它们有不同的选项，具体取决于帐户类型。我的代码抛出错误。代码如下：

```
<div class="btn-group pull-right">
              <?php if ($this->logged_in):
              $is_a = ($this->logged_in_usertype == App_Model_Users::TYPE_A);
              $is_b = ($this->logged_in_usertype == App_Model_Users::TYPE_B);
              $is_c = ($this->logged_in_usertype == App_Model_Users::TYPE_C);
              ?>
              <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="icon-user"></i> <?php echo $this->logged_in_nickname;?>
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <?php if ($is_b):?>

                <li><a href="/profile/<?php echo $this->logged_in_slug;?>/one">Page Option One</a></li>
                <li class="divider"></li>
                <li><a href="/profile/<?php echo $this->logged_in_slug;?>/two">Page Option Two</a></li>
                <li class="divider"></li>
                <li><a href="/profile/<?php echo $this->logged_in_slug;?>/page/three">Page Option 3</a></li>
                <li class="divider"></li>
                <li><a href="/profile/<?php echo $this->logged_in_slug;?>/four">Page Option 4</a></li>
                <li class="divider"></li>

                  <?php if ($is_a):?>
                    <li><a href="/profile">Account-type 2 Profile</a></li>
                  <?php endif;?>

                <?php endif;?>
                <li><a href="/member">Account Settings</a></li>
                <li class="divider"></li>
                <li><a href="/logout" id="logout-link">Sign Out</a></li>
              </ul>
              <?php else:?>                
              <a class="btn" href="/login">
                <i class="icon-user"></i> Register / Login
              </a>
              <?php endif;?>
            </div> 
```

我认为我的问题是（if is_a）的第二个 if 语句......但我不确定 - 我对 php 很陌生。有人可以帮助我用正确的方法来构造这个 if 语句，尽可能少地改变代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:00:55.277

您可以在此处发布实际错误以进行检查。

你在第 32 行有一个语法错误

```
<?php else:?> 
```

第二个 if 在拳头 if 语句中

# php - PHP preg_match is not working properly

> ID：15579552
> 
> 赞同：0
> 
> 时间：2013-03-22T20:46:01.190
> 
> 标签：php, preg-match

My client ask me to add new a rule to the username to his website login. Therefore I've tried the following code.

```
 $userid = "12345678SM"; //format of the username
  $check="/^[0-9]+[S].[M]{10}$/i";
  $check2="/^[0-9]+[F].[M]{10}$/i";
    print($name);
  if(!preg_match($check,$userid) || !preg_match($check2,$userid)) {
    print('The user id is invalid');                    
  } 
```

However, even though I entered the correct format of the username it's printing the error. I've actually used this code sometimes ago and worked but here I don't understand why it's not working. Could anyone please help me out of this ?

FYI: Format of the username should be 7 digits and 2 selected alphabet characters eg: SM or FM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:53:27.027

`[M]{10}`表示需要 10 M。

正确的检查是：

```
$check="/^\d{7}[SF]M$/i";
if (!preg_match($check, $userid)) {
    print('The user id is invalid');                    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:55:32.630

“ `[M]{10}`”部分匹配“MMMMMMMMMM”。您描述的格式可以检查

```
^[0-9]{8}[S|F]M$ 
```

你还说

> $userid = "12345678SM"; （**8位数**）

但

> 用户名格式应为**7 位数字**和 2 个选定的字母字符

我的示例适用于 8。

# php - Heroku CSV 在 1 天后被擦除，所有数据都丢失了。

> ID：15579556
> 
> 赞同：1
> 
> 时间：2013-03-22T20:46:06.190
> 
> 标签：php, html, facebook, csv, heroku

我有一个 Facebook 应用程序，部署在 Heroku 上。当有人填写表格时，此应用程序会将一些用户数据收集到 CSV 中。但是，我对这个 CSV 有疑问。它每天都会被完全擦除（只剩下标题）。

我将提供我在其上操作 CSV 的 PHP 代码：

这是我实际操作 CSV 并向其写入数据的代码：

```
<?php
date_default_timezone_set('Europe/Bucharest');
$error = 0;
if($_GET["name"] == ""){
    $error = 2;
}
else if($_GET["email"] == ""){
    $error = 3;
}
else if(!filter_var($_GET["email"], FILTER_VALIDATE_EMAIL)){
    $error = 4;
}
if($error == 0){
$list = array($_GET["name"], $_GET["email"],date("d-m-Y H:i:s",time()));
$fp = fopen('users.csv', 'a');
fputcsv($fp, $list);
fclose($fp);
}
header( 'Location: index.php?signedrequest='.$_GET["signedrequest"].'&errors='.$error );

?> 
```

这是用于下载 CSV 的管理页面的代码：

```
<div id="admintab">
<p>
<iframe name="myframe_targ" style="display:none;"></iframe>
Download : <a href="users.csv" target="myframe_targ">users.csv</a>
</p>
</div> 
```

我提到这个应用程序托管在 Heroku 上，自周一以来我没有向它推送任何数据。我最后的日志显示最后一次推送是在星期一 13:21。但是，我只能从今天开始以 CSV 格式查看数据。我还检查了其他日子，还有其他意见。

你有什么想法，为什么会这样？Heroku 或我的 PHP 代码有问题吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:07:46.327

虽然您可以写入文件系统，但它会在缩放 dynos、重新启动 dynos、重新部署代码时丢失。Heroku 每天都会循环使用 Dynos，因此这将是您丢失的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:12:37.453

Heroku 通过在其网络中可能有数十或数百台服务器上同步您的代码来进行扩展。您不能依赖存储在单个实例上的临时数据在以后可用，因为处理请求的虚拟机可能每次都不同。[你可以在这里](http://www.heroku.com/how)阅读更多关于它是如何工作的。

Ideally, you should be using a storage mechanism built for long-term storage for this task. I've used [MongoHQ](http://www.mongohq.com/home) a bit, and it works pretty well (They do have a free tier). A key/value store, such as [Amazon SimpleDB](http://aws.amazon.com/simpledb/) might be a good fit as well.

# php - android-php-mysql: json + rmi

> ID：15579557
> 
> 赞同：1
> 
> 时间：2013-03-22T20:46:08.680
> 
> 标签：php, android, json, rmi

您好，我正在开发一个使用 json 与 phpscript 通信来操作 mysql 数据库的 android 应用程序。有一个类称为“用户函数”：登录注销、创建用户、删除用户等...我可以使用 rmi 将这个函数导出到服务器，这样我可以让我的应用程序更轻便吗？所以我会有这个架构： ![在此处输入图像描述](../Images/552ce306b563abf04cd762a878c44ffd.png)

这是个好主意还是坏主意？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:51:58.790

我的想法是，如果我想使用 RMI，我只需在服务器端有一个 java 应用程序来与 DB 交互，而不是引入另一个序列化过程（到 JSON）并在服务器上实现第二个 PHP API。

# python - 通过 Django 中的 3 列获得唯一性

> ID：15579560
> 
> 赞同：0
> 
> 时间：2013-03-22T20:46:15.727
> 
> 标签：python, django, django-models, django-forms

我想创建一个数据库模式，其中 ResourceA 只能在 DateX 和 HourY 预订一次。

所以行会像：

1.  资源 A/DateX/HourY
2.  资源 B/DateX/HourY
3.  资源A/日期/小时

但不是同一个三列元组。

如何使用 Django 模型做到这一点？

如何创建相应的表格？

我在文档中找不到我需要的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:54:17.447

使用[`unique_together`](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)元选项：

```
class Reservation(models.Model):
     resource = models.ForeignKey(Resource)
     date = models.DateField()
     hour = models.PositiveSmallIntegerField()

     class Meta:
         unique_together = ('resource', 'date', 'hour') 
```

# python - 读取bzip2文件时如何获取内部位置

> ID：15579561
> 
> 赞同：2
> 
> 时间：2013-03-22T20:46:22.770
> 
> 标签：python, bzip2

我有一个脚本来解压缩和解析包含在一堆非常大的 bzip2 压缩文件中的数据。由于这可能需要一段时间，我想有一些方法来监控进度。我知道我可以使用 获取文件大小`os.path.getsize()`，但会[`bz2.BZ2File.tell()`](http://docs.python.org/2/library/bz2.html#bz2.BZ2File.tell)返回未压缩数据中的位置。有什么方法可以获取未压缩文件中的当前位置，以便我可以监控进度？

如果有一个等效于 Java 的 python ，则可以加分[`ProgressMonitorInputStream`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ProgressMonitorInputStream.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:03:51.320

如果您只需要解析bziped文件中的数据，我认为应该可以避免在阅读之前解压缩文件。我没有在 bzip 上测试过它，而是在 gziped 文件上测试过。我希望这也适用于 bziped 文件。

参见例如： [如何有效地在 python 中编写 csv？](https://stackoverflow.com/questions/15464466/how-to-write-csv-in-python-efficiently/15466408#15466408).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:07:42.187

这是我想出的似乎可行的解决方案。

```
import bz2

class SimpleBZ2File(object):

    def __init__(self,path,readsize=1024):
        self.decomp = bz2.BZ2Decompressor()
        self.rawinput = open(path,'rb')
        self.eof = False
        self.readsize = readsize
        self.leftover = ''

    def tell(self):
        return self.rawinput.tell()

    def __iter__(self):
        while not self.eof:
            rawdata = self.rawinput.read(self.readsize)
            if rawdata == '':
                self.eof = True
            else:
                data = self.decomp.decompress(rawdata)
                if not data:
                    continue #we need to supply more raw to decompress
                newlines = list(data.splitlines(True))
                yield self.leftover + newlines[0]
                self.leftover = ''
                for l in newlines[1:-1]:
                    yield l
                if newlines[-1].endswith('\n'):
                    yield newlines[-1]
                else:
                    self.leftover = newlines[-1]
        if self.leftover:
            yield self.leftover
        self.rawinput.close() 
```

# git - Is there a Sublime Text 2 package for SCM badges, similar to Textmate's ProjectPlus?

> ID：15579565
> 
> 赞同：1
> 
> 时间：2013-03-22T20:46:36.817
> 
> 标签：git, sublimetext2, textmate, badge

I'm switching to Sublime Text 2 from Textmate. For the most part I'm finding it an improvement, but I really like having a visual indicator of file status as part of the filename in the gutter. Textmate supports this via ProjectPlus. Is there a similar package for Sublime Text?

# php - How can I add specific validation to an ExpressionEngine form?

> ID：15579569
> 
> 赞同：0
> 
> 时间：2013-03-22T20:46:41.147
> 
> 标签：php, javascript, forms, validation, expressionengine

Within an ExpressionEngine template page, made by other developers several years ago, we have this form:

```
 <div id="sidebar_loader" class="dnone">
                <div class="sb-bg">
                    <div class="sb-bg-bottom">
                        <h2 class="findloc">Find Location Nearest You</h2>
                        <span class="findloc-content">
                            To find your nearest Carriage Services location enter your <b>City 
                            and State</b> or your <b>ZIP code</b>.
                        </span>
                        <div class="hbar w280px"></div> 
                        <div class="searchContent">
                            <div class="searching">Now Searching for the closest locations to you.</div>
                            <div class="hbar w280px"></div>
                        </div>                      
                    </div>
                </div><!-- /sb-bg end -->               
            </div><!-- /sidebar_loader end -->
        <div id="sidebar">
            <div class="sb-bg">
                <div class="sb-bg-bottom">                      
                    <h2 class="findloc">Find Location Nearest You</h2>
                    <span class="findloc-content">
                        To find your nearest Carriage Services location enter your <b>City 
                        and State</b> or your <b>ZIP code</b>.
                    </span>
                    <div class="hbar w280px"></div>     
                    <div class="search_row">
                        <div class="search_caption">Zip Code</div>
                        <input type="text" id="address" class="textbox" name="address" value="{exp:mx_google_map:searched_zip}" />              
                    </div>  
                    <br class="clear">
                    <div class="search_row">
                        <div class="search_caption">Distance</div>
                        <div class="selCont">
                            <?php 
                                    $selected = "{exp:mx_google_map:searched_radius1}";
                                    if($selected == "")
                                    {
                                        $selected = "30";                               
                                    }
                            ?>

                            <select name="radius1" id="fradius">
                                <option value="10"  <?php if ( $selected == "10") echo "selected='selected'"; ?>>10 MILES</option>
                                <option value="15"  <?php if ( $selected == "15") echo "selected='selected'"; ?>>15 MILES</option>
                                <option value="20"  <?php if ( $selected == "20") echo "selected='selected'"; ?>>20 MILES</option>
                                <option value="25"  <?php if ( $selected == "25") echo "selected='selected'"; ?>>25 MILES</option>
                                <option value="31"  <?php if ( $selected == "31") echo "selected='selected'"; ?>>30 MILES</option>
                                <option value="50"  <?php if ( $selected == "50") echo "selected='selected'"; ?>>50 MILES</option>
                                <option value="100" <?php if ( $selected == "100") echo "selected='selected'"; ?>>100 MILES</option>
                            </select>
                        </div>
                    </div>
                    <div class="search_row" style="position:relative;">
                        <span style="position:absolute;top:-10px;left:120px;font-weight:bold;font-size:16px;color:#313131;#top:5px;">or</span>
                        <div class="hbar w280px"></div> 
                    </div>
                    <br class="clear">
                    <div class="search_row">
                        <div class="search_caption">City</div>
                        <input type="text" id="city" class="textbox" name="city" value="{exp:mx_google_map:searched_city}"/>                
                    </div>
                    <br class="clear">
                    <div class="search_row">
                        <div class="search_caption">State</div>
                        <div class="selCont state" id="Sstate">
                            <?php 
                                    $selectedState = "{exp:mx_google_map:searched_state}";                                      
                            ?>
                            <select id="state" name="state" >
                                <option value="AL" <?php if ( $selectedState == "AL") echo "selected='selected'"; ?>> Alabama</option>
                                <option value="AK" <?php if ( $selectedState == "AK") echo "selected='selected'"; ?>>Alaska</option>
                                <option value="AZ" <?php if ( $selectedState == "AZ") echo "selected='selected'"; ?>>Arizona</option>
                                <option value="AR" <?php if ( $selectedState == "AR") echo "selected='selected'"; ?>>Arkansas</option>
                                <option value="CA" <?php if ( $selectedState == "CA") echo "selected='selected'"; ?>>California</option>
                                <option value="CO" <?php if ( $selectedState == "CO") echo "selected='selected'"; ?>>Colorado</option>
                                <option value="CT" <?php if ( $selectedState == "CT") echo "selected='selected'"; ?>>Connecticut</option>
                                <option value="DE" <?php if ( $selectedState == "DE") echo "selected='selected'"; ?>>Delaware</option>
                                <option value="FL" <?php if ( $selectedState == "FL") echo "selected='selected'"; ?>>Florida</option>
                                <option value="GA" <?php if ( $selectedState == "GA") echo "selected='selected'"; ?>>Georgia</option>                                   
                                <option value="HI" <?php if ( $selectedState == "HI") echo "selected='selected'"; ?>>Hawaii</option>
                                <option value="ID" <?php if ( $selectedState == "ID") echo "selected='selected'"; ?>>Idaho</option>
                                <option value="IL" <?php if ( $selectedState == "IL") echo "selected='selected'"; ?>>Illinois</option>
                                <option value="IN" <?php if ( $selectedState == "IN") echo "selected='selected'"; ?>>Indiana</option>
                                <option value="IA" <?php if ( $selectedState == "IA") echo "selected='selected'"; ?>>Iowa</option>
                                <option value="KS" <?php if ( $selectedState == "KS") echo "selected='selected'"; ?>>Kansas</option>
                                <option value="KY" <?php if ( $selectedState == "KY") echo "selected='selected'"; ?>>Kentucky</option>
                                <option value="LA" <?php if ( $selectedState == "LA") echo "selected='selected'"; ?>>Louisiana</option>
                                <option value="ME" <?php if ( $selectedState == "ME") echo "selected='selected'"; ?>>Maine</option>
                                <option value="MD" <?php if ( $selectedState == "MD") echo "selected='selected'"; ?>>Maryland</option>
                                <option value="MA" <?php if ( $selectedState == "MA") echo "selected='selected'"; ?>>Massachusetts</option>
                                <option value="MI" <?php if ( $selectedState == "MI") echo "selected='selected'"; ?>>Michigan</option>
                                <option value="MN" <?php if ( $selectedState == "MN") echo "selected='selected'"; ?>>Minnesota</option>
                                <option value="MS" <?php if ( $selectedState == "MS") echo "selected='selected'"; ?>>Mississippi</option>
                                <option value="MO" <?php if ( $selectedState == "MO") echo "selected='selected'"; ?>>Missouri</option>
                                <option value="MT" <?php if ( $selectedState == "MT") echo "selected='selected'"; ?>>Montana</option>
                                <option value="NE" <?php if ( $selectedState == "NE") echo "selected='selected'"; ?>>Nebraska</option>
                                <option value="NV" <?php if ( $selectedState == "NV") echo "selected='selected'"; ?>>Nevada</option>
                                <option value="NH" <?php if ( $selectedState == "NH") echo "selected='selected'"; ?>>New Hampshire</option>
                                <option value="NJ" <?php if ( $selectedState == "NJ") echo "selected='selected'"; ?>>New Jersey</option>
                                <option value="NM" <?php if ( $selectedState == "NM") echo "selected='selected'"; ?>>New Mexico</option>
                                <option value="NY" <?php if ( $selectedState == "NY") echo "selected='selected'"; ?>>New York</option>
                                <option value="NC" <?php if ( $selectedState == "NC") echo "selected='selected'"; ?>>North Carolina</option>
                                <option value="ND" <?php if ( $selectedState == "ND") echo "selected='selected'"; ?>>North Dakota</option>
                                <option value="OH" <?php if ( $selectedState == "OH") echo "selected='selected'"; ?>>Ohio</option>
                                <option value="OK" <?php if ( $selectedState == "OK") echo "selected='selected'"; ?>>Oklahoma</option>
                                <option value="OR" <?php if ( $selectedState == "OR") echo "selected='selected'"; ?>>Oregon</option>
                                <option value="PA" <?php if ( $selectedState == "PA") echo "selected='selected'"; ?>>Pennsylvania</option>
                                <option value="RI" <?php if ( $selectedState == "RI") echo "selected='selected'"; ?>>Rhode Island</option>
                                <option value="SC" <?php if ( $selectedState == "SC") echo "selected='selected'"; ?>>South Carolina</option>
                                <option value="SD" <?php if ( $selectedState == "SD") echo "selected='selected'"; ?>>South Dakota</option>
                                <option value="TN" <?php if ( $selectedState == "TN") echo "selected='selected'"; ?>>Tennessee</option>
                                <option value="TX" <?php if ( $selectedState == "TX") echo "selected='selected'"; ?>>Texas</option>
                                <option value="UT" <?php if ( $selectedState == "UT") echo "selected='selected'"; ?>>Utah</option>
                                <option value="VT" <?php if ( $selectedState == "VT") echo "selected='selected'"; ?>>Vermont</option>
                                <option value="VA" <?php if ( $selectedState == "V A") echo "selected='selected'"; ?>>Virginia</option>
                                <option value="WA" <?php if ( $selectedState == "WA") echo "selected='selected'"; ?>>Washington</option>
                                <option value="WV" <?php if ( $selectedState == "WV") echo "selected='selected'"; ?>>West Virginia</option>
                                <option value="WI" <?php if ( $selectedState == "WI") echo "selected='selected'"; ?>>Wisconsin</option>
                                <option value="WY" <?php if ( $selectedState == "WY") echo "selected='selected'"; ?>>Wyoming</option>               
                            </select>
                        </div>
                    </div>                  
                    <div class="search_row">
                        <div class="search_caption">Distance</div>
                        <div class="selCont">
                            <?php 
                                    $selected = "{exp:mx_google_map:searched_radius2}";
                                    if($selected == "")
                                    {
                                        $selected = "30";                               
                                    }
                            ?>

                            <select name="radius2" id="radius">
                                <option value="10"  <?php if ( $selected == "10") echo "selected='selected'"; ?>>10 MILES</option>
                                <option value="15"  <?php if ( $selected == "15") echo "selected='selected'"; ?>>15 MILES</option>
                                <option value="20"  <?php if ( $selected == "20") echo "selected='selected'"; ?>>20 MILES</option>
                                <option value="25"  <?php if ( $selected == "25") echo "selected='selected'"; ?>>25 MILES</option>
                                <option value="31"  <?php if ( $selected == "31") echo "selected='selected'"; ?>>30 MILES</option>
                                <option value="50"  <?php if ( $selected == "50") echo "selected='selected'"; ?>>50 MILES</option>
                                <option value="100" <?php if ( $selected == "100") echo "selected='selected'"; ?>>100 MILES</option>
                            </select>
                        </div>
                    </div>
                    <br class="clear">
                    <?php 
                        $funeral = "{exp:mx_google_map:searchBy_Funeral}";
                        if( $funeral == "" )
                        {
                            $funeral = 0;
                        }

                        $cemetaries = "{exp:mx_google_map:searchBy_Cemetaries}";
                        if( $cemetaries == "" )
                        {
                            $cemetaries = 3;
                        }
                    ?>
                    <div class="hbar w280px"></div> 
                    <div class="search_row">                    
                        <span>Search For:</span>
                        <div id="funeral" class="check">Funeral Homes</div>
                        <div id="cemetaries" class="check">Cemeteries</div>
                        <input type="hidden" name="funeral" value="<?php echo $funeral; ?>"  id="fhidden">
                        <input type="hidden" name="cemetaries" value="<?php echo $cemetaries; ?>"  id="chidden">

                        <span><input type="image" src="/images/search.png" style="margin:20px 0 -20px 170px;" onclick="loader()"/></span>
                    </div>
                    <br class="clear">
                </div>
            </div><!-- /sb-bg end -->                       
        </div><!-- /sidebarend --> 
```

It needs to be modified so that it won't work if both the city and zip code fields are empty. At least one has to be filled. Not sure how to do this with ExpressionEngine. My javascript and PHP are not that good.

Can anyone advise on a good way to implement this validation?

# jquery - 选择单击元素的上一个文本字段

> ID：15579575
> 
> 赞同：0
> 
> 时间：2013-03-22T20:47:09.823
> 
> 标签：jquery, html

我有下表，一行，两列，一列我有一个文本字段，另一列有一个简单的按钮，我有文本字段“禁用”，我想启用它按下按钮.. .

```
 <table id="tabla_busqueda">  
 <tr>
     <td><input type="text" value="2"></td>   //This text field is disabled
     <td><button class="editar_campo">Click Me</button></td>
 </tr>
 </table 
```

我有以下内容：

```
 $('body').on('click', '#tabla_busqueda .editar_campo', function(){

    $(this).prev('input[type=text]').removeAttr('disabled');

}); 
```

但它不工作

任何想法为什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:48:43.027

元素包含在 中`td`，因此您需要进行更多遍历，并使用 prop() ：

```
$('body').on('click', '.editar_campo', function(){
    $(this).closest('td')
           .prev('td')
           .find('input[type="text"]')
           .prop('disabled', false);
}); 
```

# android - 如何在 ListView 中添加子项

> ID：15579577
> 
> 赞同：1
> 
> 时间：2013-03-22T20:47:18.447
> 
> 标签：android

我正在尝试在我的 ListView 中添加子项。我的 listView 应该与项目的电子邮件及其子项目的机构一起组织，但是使用以下代码我刚刚添加了项目，如何在其上添加我的子项目？我已经尝试了很多东西，但它不起作用。

```
 List<Login> listEmails = JsonUtil.getAllEmails(json);

        ArrayList<String> emails = new ArrayList<String>();

        ArrayList<String> institutions = new ArrayList<String>();

        for (Login loginObj : listEmails) {

            emails.add(loginObj.getEmailAndress());
        }

        for (Login loginObj : listEmails) {

            institutions.add(loginObj.getInstitution());
        }

        ArrayAdapter<String> adapter;

        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, emails);

        emailListView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:53:35.293

您需要一个带有两个文本视图的自定义适配器，并在其`getView()`方法中为每个文本视图设置适当的数据。

此外，现在您只将`emails`数组传递给您的适配器，您还需要一个不同的结构来包含`institutions`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:07:20.750

正确的做法是为每个项目创建一个 HashMap：看下面的代码：

```
List<Login> listEmails = JsonUtil.getAllEmails(json);

                ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>(listEmails.size());

                for (Login loginObj : listEmails) {

                    HashMap<String, String> item = new HashMap<String, String>();
                    item.put("email", loginObj.getEmailAndress());
                    item.put("institution", loginObj.getInstitution());

                    list.add(item);
                }

                String[] from = new String[] { "email", "institution" };

                int[] to = new int[] { android.R.id.text1, android.R.id.text2 };

                int nativeLayout = android.R.layout.two_line_list_item;

                emailListView.setAdapter(new SimpleAdapter(this, list, nativeLayout , from, to)); 
```

# performance - 如何在运行时决定是否在 matlab 中使用“for”或“parfor”循环，为什么它们之间的差异很小？

> ID：15579581
> 
> 赞同：0
> 
> 时间：2013-03-22T20:47:53.577
> 
> 标签：performance, matlab, parallel-processing, lambda

我正在尝试测试与matlab`parfor`相比的效果，我构建了简单的[函数来计算 π](http://math.fullerton.edu/mathews/n2003/montecarlopimod.html)：`for`

![在此处输入图像描述](../Images/58f6d9d6fc5a74bd33904ab02fcf7c5a.png)

这是具有以下功能的功能`parfor`：

```
function [calc_pi,epsilon] = calcPi(max)
format long;

in = 0;
tic
parfor k=1:max
    x = rand();
    y = rand();
    if sqrt(x^2 + y^2)<1
        in = in + 1;
    end
end

toc
calc_pi = 4*in/max; 
epsilon = abs(pi - calc_pi);
end 
```

我运行它`parfor`并得到这个输出：

```
>> [calc,err] = calcPi(1000000000)
Elapsed time is 92.2923 seconds.

calc =

   3.141638468000000

err =

     4.581441020690136e-05

>> 
```

使用我附带的 for 循环：

```
>> [calc,err] = calcPi(1000000000)
Elapsed time is 121.3432 seconds.

calc =

   3.141645132000000

err =

     5.247841020672439e-05 
```

我有两个问题：

1.  为什么两者都需要大约相同的时间？（与[此处](http://www.mathworks.com/videos/using-parfor-to-run-loops-in-parallel-68756.html)显示的不同）
2.  我想在函数中添加一个参数，指示是使用 for 还是 parfor ，而代码的变化最小：

    IE ：

    ```
    if (use_par):
        parfor k=1:10
    else
       for k=1:10
    end

    <--rest of code here--> 
    ```

    如何用最少的代码编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:16:07.517

的主要要求`parfor`是循环执行是独立的。在这里它们显然不是因为每次迭代都可以更新变量`in`。

好消息是你可以通过使用来解决这个问题`in(k)`。

* * *

例如，在不使用额外代码的情况下使用一个循环或另一个循环的一种方法是将您所做的所有事情放在一个函数或脚本中`doeverything.m`

然后写

```
if (use_par):
    parfor k=1:10
       doeverything
    end
else
   for k=1:10
       doeverything
   end
end 
```

# java - 扩展类的 Eclipse 错误

> ID：15579585
> 
> 赞同：1
> 
> 时间：2013-03-22T20:48:12.497
> 
> 标签：java, libgdx

我正在尝试从下面的一个创建和扩展类，但是我从 Eclipse 收到一条错误消息，上面写着“令牌“{”上的语法错误，{ 预计在这个令牌之后”

```
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.math.Vector2;

public class Ship {

protected int hull;
protected int shield;
protected Vector2 velocity;
protected int energy;
protected Texture shipTexture;
protected Vector2 position;

public Texture getShipTexture() {
    return shipTexture;
}
public void setShipTexture(Texture shipTexture) {
    this.shipTexture = shipTexture;
}

public Vector2 getPosition() {
    return position;
}
public void setPosition(Vector2 position) {
    this.position = position;
}
public int getHull() {
    return hull;
}
public void setHull(int hull) {
    this.hull = hull;
}
public int getShield() {
    return shield;
}
public void setShield(int shield) {
    this.shield = shield;
}
public Vector2 getVelocity() {
    return velocity;
}
public void setVelocity(Vector2 velocity) {
    this.velocity = velocity;
}
public int getEnergy() {
    return energy;
}
public void setEnergy(int energy) {
    this.energy = energy;
}

} 
```

对于第一个括号后的此类：

```
public class Frigate extends Ship {

this.hull = 10;
this.shield = 10;

} 
```

有没有更好的方法来设置具有相同变量和动作但具有不同值的“船”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:51:22.607

看起来您正在尝试为您的`Frigate`. 将该代码放在构造函数中。

```
public Frigate()
{
    this.hull = 10;
    this.shield = 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:13:22.627

我将创建一个接受两个值的构造函数 fir Ship：

```
protected Ship(int hull, int shield) {
    this.hull = hull;
    this.shield = shield;
} 
```

然后从子类调用它：

```
public class Frigate extends Ship {
    public Frigate {
        super(10, 10);
    } 
```

如果它只是一个“基”类，您也应该考虑使 Ship 抽象。

# node.js - how to pass in params in web-inspector when debugging node

> ID：15579587
> 
> 赞同：1
> 
> 时间：2013-03-22T20:48:16.073
> 
> 标签：node.js, web-inspector

for example: `http://localhost:8989/debug?port=5858` would work but `http://localhost:8989/snooges/hello/debug?port=5858` would close the connection.

The code I would like to debug:

```
var express = require('express'); var app = express();

app.get('/stooges/:name?', function(req, res, next) { var name = req.params.name;
    switch ( name ? name.toLowerCase() : '' ) { case 'larry':
    case 'curly': case 'moe':
    res.send(name + ' is my favorite stooge.'); break;
    default: next();
} });
app.get('/stooges/*?', function(req, res){ res.send('no stooges listed');
});
app.get('/?', function(req, res){ res.send('hello world');
});
var port = 8080;
app.listen(port);
console.log('Listening on port ' + port); 
```

# java - ImageIO.read preventing paintComponent from executing?

> ID：15579592
> 
> 赞同：0
> 
> 时间：2013-03-22T20:48:40.623
> 
> 标签：java, image, paintcomponent, javax.imageio

I am trying to a sprite image from a sprite mesh using BufferedImage and ImageIO. There is a separate class which handles the loading and storing of sprite images; this is where the problem seems to be. I load the sprite mesh into a BuffereImage using ImageIO, and for some reason this, intermittently, prevents paintComponent from being executed. When the program actually does load the program displays properly, however, the key listener stops working. I am using NetBeans 7.3 if that helps.

```
package breakout;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.Random;

public class GamePanel extends JPanel implements Runnable {
    private Paddle paddle;
    private Breakout boRef;
    private Circle ball;
    private Graphics2D g2d, bufferedGraphics;
    private BufferedImage buffer;
    private Images images;
    private final int WIDTH = Constants.WINDOW_WIDTH;
    private final int HEIGHT = Constants.WINDOW_HEIGHT;
    private ArrayList<Block> blockList;
    private int numBlocks, blockRows, blockCols, ballXInc, ballYInc, blockPadding;
    private int totalWidth, blockX, blockY;
    private Thread ballThread;
    private boolean started, gameOver;
    private String gameOverText;
    private Random rand;

    public GamePanel( Breakout ref ) {
        boRef = ref;
        images = new Images();  <-- Problem

        numBlocks = 12;
        blockRows = 4;
        blockCols = 3;
        blockList = new ArrayList<>();
        blockY = 100;
        blockPadding = 5;
        totalWidth = ( blockCols * Block.WIDTH ) + ( ( blockCols - 1 ) * blockPadding );
        blockX = ( WIDTH / 2 ) - ( totalWidth / 2 ) - 60;
        setupBlocks();

        rand = new Random();        
        gameOverText = "";
        started = false;
        gameOver = false;

        buffer = new BufferedImage( WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB );
        bufferedGraphics = buffer.createGraphics();
        bufferedGraphics.setBackground( Color.LIGHT_GRAY );

        ball = new Circle( 250, 593, 6 );
        ball.setColor( Color.BLUE );
        ballThread = new Thread( this );
        ballXInc = 1;
        ballYInc = -1;

        paddle = new Paddle( this, 200, 600, 100, 15, Color.WHITE, Color.BLACK );

        addKeyListener( new KeyHandler() );
        setLayout( new BorderLayout() );
        setFocusable( true );
        requestFocus();
        System.out.println(" END" );
    }

private void setupBlocks() {
    int xPos = Block.WIDTH + blockPadding, yPos = Block.HEIGHT + blockPadding;
    int xInc = 1, yInc = 1;

    for( int y = 0; y < blockRows; ++y, yInc++ ) {
        for( int x = 0; x < blockCols; ++x, xInc++ ) {
            blockList.add( new Block( xPos * xInc + blockX, yPos * yInc + blockY ) );
        }

        xInc = 1;
    }
}

    @Override public void paintComponent( Graphics g ) {
        super.paintComponent( g );
        g2d = (Graphics2D)g;

        bufferedGraphics.clearRect( 0, 0, WIDTH, HEIGHT );
       System.out.println( "HELLO" );

        //bufferedGraphics.drawImage( images.getImage(), 100, 100, images.getImage().getWidth(), images.getImage().getHeight(), null ); <-- DrawSprite

        if( !gameOver ) {
            for( Block b : blockList ) {
                b.draw( bufferedGraphics );
            }

            ball.draw( bufferedGraphics );
            paddle.draw( bufferedGraphics );
        } else { 
            bufferedGraphics.setFont( new Font( "Times New Roman", Font.BOLD, 48 ) );
            bufferedGraphics.drawString( gameOverText, WIDTH / 2 - 130, HEIGHT / 2); 
        }

        g2d.drawImage( buffer, 0, 0, WIDTH, HEIGHT, null );
    }

    private class KeyHandler extends KeyAdapter {
        @Override public void keyPressed( KeyEvent e ) {
            if( paddle.x - 10 > -10 && e.getKeyCode() == KeyEvent.VK_LEFT ) {
                paddle.x -= 10;

                if( !started ) {
                    ball.setX( ball.getX() - 10 );
                }
            } else if( paddle.x + paddle.width + 20 < WIDTH && e.getKeyCode() == KeyEvent.VK_RIGHT ) {
                paddle.x += 10;

                if( !started ) {
                    ball.setX( ball.getX() + 10 );
                }
            }

            if( e.getKeyCode() == KeyEvent.VK_SPACE ) {
                if( !started ) {
                    ballThread.start();
                    started = true;
                } else if( gameOver ) {
                    restart();
                }
            }

            repaint();
        }
    }
}

package breakout;

import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import java.io.File;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import java.awt.Rectangle;
import java.io.IOException;

public class Images {
    private BufferedImage texture, tex;
    private BufferedImage [] images;
    private String meshPath = "texture\\textures.png";
    private Raster imgRaster;
    private WritableRaster imgWritableRaster;

    public static final int TEX_WIDTH = 16;
    public static final int TEX_HEIGHT = 8;

    public Images() {
        images = new BufferedImage[1];

        try {
            texture = ImageIO.read( new File( meshPath ) ); <-- Seems to be the problem
        } catch( IOException e ) {
            System.out.println( e.getMessage() );
        }

        imgRaster = texture.getData( new Rectangle( TEX_WIDTH * 2, 0, TEX_WIDTH, TEX_HEIGHT ) );
        imgWritableRaster = imgRaster.createCompatibleWritableRaster();

        tex = new BufferedImage( texture.getColorModel(), imgWritableRaster, false, null );
        images[0] = tex;
    }

    public BufferedImage getImage() {
        return images[0];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:49:42.113

> 我使用 ImageIO 将精灵网格加载到 BuffereImage 中，出于某种原因，这会间歇性地阻止执行paintComponent。

这种性质的间歇性问题表明可能存在线程冲突。我建议您`ImageIO.read(...)`在后台线程中进行调用，例如可通过 SwingWorker 对象获得的线程。

或者，您可以在主线程上读入图像，然后仅在图像全部读入后才启动在 Swing 线程中排队的 GUI。这可能是我要做的。

```
public static void main(String[] args) {
  // read in images here in code that is *not* in a background thread

  SwingUtilities.invokeLater(new Runnable() {
    public void run() {
      // start GUI in here
    }
  });
} 
```

> 但是，当程序确实加载程序正确显示时，键侦听器停止工作。如果有帮助，我正在使用 NetBeans 7.3。

不要使用 KeyListener 而是使用 Key Bindings。这方面的教程非常好，如果你搜索这个网站，你会看到一些关于如何将它与动画一起使用的示例。有些例子实际上是我写的。例如：

*   [使用 KeyListener 控制 Pong](https://stackoverflow.com/a/12992048/522444)
*   [Java 动画 JLabel](https://stackoverflow.com/a/12545773/522444)

# python - 带时区的日期格式

> ID：15579599
> 
> 赞同：2
> 
> 时间：2013-03-22T20:48:56.170
> 
> 标签：python, date-formatting

如何在 python 中将日期格式化为如下所示`weekday:month:day(number):HH:MM:SS(military):EST/CST/PST:YYYY`：我熟悉 strftime()，但我不确定如何处理 HH:MM:SS 和 EST/CST/PST。

我如何尝试获取日期的示例：

```
Sun Mar 10 15:53:00 EST 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:10:42.193

用于`strftime`输出格式化的字符串表示：

```
print time.strftime("%a %b %d %H:%M:%S %Z %Y") 
```

可以在[此处找到格式代码列表](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:13:45.907

```
from time import gmtime, strftime
print strftime("%a %b %d %H:%M:%S %Z %Y", gmtime()) 
```

这将产生

> 2013 年 3 月 22 日星期五 21:10:56 东部标准时间

[除非您想使用pytz](http://pytz.sourceforge.net/)，否则您将不得不接受时区的长名称。我想值得注意的是[时区缩写不是唯一的](http://www.timeanddate.com/library/abbreviations/timezones/)。

# matlab - Matlab: Find area enclosed by points (x,y)

> ID：15579602
> 
> 赞同：2
> 
> 时间：2013-03-22T20:49:02.217
> 
> 标签：matlab, polygon, area, points

I've got 8 points that create the outline of an eight-sided polygon in two-dimensional space. I need to find the area enclosed be these points, but how do I do that using matlab?

The eight points (x,y) are contained in the 8x2 matrix B.

```
B = [ 260 455;
    1187 467;
    1325 605;
    1342 1533;
    1207 1675
    251 1690;
    107 1547;
    116 593]; 
```

The polygon is created by drawing straight lines from the point which is row 1 to row 2, then row 2 to row 3 and so on...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:15:14.210

您可以使用[`polyarea`](http://www.mathworks.com/help/matlab/ref/polyarea.html)：

```
ar = polyarea(B(:, 1), B(:, 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T14:36:27.003

For calculating area and even volume you can use [convhull](http://www.mathworks.com/help/matlab/ref/convhull.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:44:52.663

我会选择**梯形**：

```
Area = trapz(B(:,1),B(:,2)); 
```

# git - 我如何维护 git 中合并的“主题分支”历史？

> ID：15579607
> 
> 赞同：2
> 
> 时间：2013-03-22T20:49:27.893
> 
> 标签：git

我目前正在创建主题分支：

```
git checkout -b topic_branch
...do work...
git checkout master
git merge topic_branch 
```

但目前当我这样做时，我失去了我的“topic_branch”的历史记录，所有的提交都出现了。

如何让主题分支合并历史显示在我的合并中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:50:49.087

将`--no-ff`开关添加到您的`git merge`行中，您将始终创建一个合并提交，即使合并本来可以作为快进解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:19:57.690

结果中存在合并分支的历史记录，而不是作为“主要”（第一个）父级。在结果上运行 eg `gitk`，你会看到这一切。

# azure - Windows Azure 遇到日期格式问题

> ID：15579608
> 
> 赞同：6
> 
> 时间：2013-03-22T20:49:28.457
> 
> 标签：azure

我在 Windows azure 上部署网站时遇到了很多麻烦……例如，日期和货币格式。我的问题是：可以更改服务器的文化，还是我必须更改我的整个应用程序以适应天蓝色的位置设置？

在符合拉丁美洲标准的服务器上运行良好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T22:26:44.723

您可以将类似这样的内容添加到您的 web.config（在 system.web 部分）：

```
<globalization uiCulture="en" culture="en-GB" /> 
```

[您可以在CultureInfo 类](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)中找到适当的标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:09:20.720

我相信您需要更改应用程序中的文化设置。这是一个类似的线程 - [Azure 中的货币设置](https://stackoverflow.com/questions/13858120/currency-settings-in-azure)

# r - 奇怪的现象：在循环内创建的aov()对象中，不同的aov对象的数据帧是相同的

> ID：15579609
> 
> 赞同：0
> 
> 时间：2013-03-22T20:49:30.033
> 
> 标签：r, list, dataframe, anova

我`aov()`在一个循环中运行。每次迭代的输出都保存为一个列表项。我`model.frame()`以前检查每个`aov`对象的数据框时，它们都是相同的——实际上，它们基本上都是最后一次迭代的数据框。**更有趣的是，这似乎只发生在`aov`包含错误项的模型中。** 为了说明这一点，我使用 R 中的 ChickWeight 数据（见下文）

```
results<-list()
length(results2)<-4
counter<-1
for(i in unique(ChickWeight$Diet)){
results[[counter]] <- aov(weight~factor(Time) + Error(Chick),    
                              ChickWeight[ChickWeight$Diet==i,])
counter<-counter+1
}
head(model.frame(results[[1]]), 2)
#    weight factor(Time) Chick
#461     42            0    41
#462     51            2    41
head(model.frame(results[[2]]), 2)
#    weight factor(Time) Chick
#461     42            0    41
#462     51            2    41
head(model.frame(results[[3]]), 2)
#    weight factor(Time) Chick
#461     42            0    41
#462     51            2    41
head(model.frame(results[[4]]), 2)
#    weight factor(Time) Chick
#461     42            0    41
#462     51            2    41 
```

相反，当没有错误项时，这不会发生：

```
results2<-list()
length(results2)<-4
counter<-1
for(i in unique(ChickWeight$Diet)){
results2[[counter]] <- aov(weight~factor(Time),    
                               ChickWeight[ChickWeight$Diet==i,])
counter<-counter+1
}
head(model.frame(results2[[1]]), 2)
#  weight factor(Time)
#1     42            0
#2     51            2
head(model.frame(results2[[2]]), 2)
#    weight factor(Time)
#221     40            0
#222     50            2
head(model.frame(results2[[3]]), 2)
#    weight factor(Time)
#341     42            0
#342     53            2
head(model.frame(results2[[4]]), 2)
#    weight factor(Time)
#461     42            0
#462     51            2 
```

我想知道是否有人知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:19:27.647

据我了解，如果错误项是模型的一部分，则`model.frame.aovlist`通过评估拟合的调用属性来获取数据，即`- attr(*, "call")= language aov(formula = weight ~ factor(Time) + Error(Chick), data = ChickWeight[ChickWeight$Diet == i, ])`. 如您所见，调用取决于 的值`i`。此外，该`aovlist`对象保存环境名称以查找数据。在这种情况下，它是`R_GlobalEnv`.

看这个：

```
results<-list()
counter<-1
for(i in unique(ChickWeight$Diet)){
  results[[counter]] <- aov(weight~factor(Time) + Error(Chick),    
                            data=ChickWeight[ChickWeight$Diet==i,])
  counter<-counter+1
}

head(model.frame(results[[1]]), 2)
#     weight factor(Time) Chick
# 461     42            0    41
# 462     51            2    41

i <- 1
head(model.frame(results[[1]]), 2)
#   weight factor(Time) Chick
# 1     42            0     1
# 2     51            2     1 
```

如果您使用 split-apply-combine 方法，您可以避免该问题。这是一个使用示例`by`：

```
res <- by(ChickWeight,ChickWeight$Diet,FUN=function(DF) {
  aov(weight~factor(Time)+ Error(Chick) ,    
      data=DF)
})

head(model.frame(res[[1]]),2)
#  weight factor(Time) Chick
#1     42            0     1
#2     51            2     1 
```

使用这种方法，保存了查找数据的正确环境，即传递给的匿名函数的调用环境`by`。

# vim - 如何使用 system() 函数的第二个参数（输入）

> ID：15579613
> 
> 赞同：4
> 
> 时间：2013-03-22T20:49:40.233
> 
> 标签：vim, vim-plugin

vim`system`函数的文档说明了第二个参数：

> 当给出 {input} 时，这个字符串被写入一个文件并作为标准输入传递给命令。

我从中了解到的是，如果您的`system`电话看起来像这样：

```
call system('node something.js --file', 'here is some text') 
```

执行的命令如下所示：

```
node something.js --file some/temp/file 
```

并将`some/temp/file`文本`here is some text`作为其内容。为了测试这一点，我运行了 vim 命令（第二行是结果）：

```
:echo system('cat', 'here is some text')
here is some text 
```

好的，看起来不错。第二个测试：

```
:echo system('echo', 'here is some text')
<blank line> 
```

我没有得到一些临时文件的名称，而是得到了一个空行。`process.argv`此外，当我在我的 node.js 脚本中打印时，我只得到`['node', 'path/to/something.js', '--file']`.

`{input}`关于如何使用论点，我缺少什么？为什么它似乎适用于`cat`，但不适用于`echo`我自己的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:00:57.547

你错了；执行的命令**不是**

```
node something.js --file some/temp/file 
```

反而

```
echo "some/temp/file" | node something.js --file 
```

或更好

```
node something.js --file < some/temp/file 
```

如果您希望将文本作为参数传递，只需将其附加到`system()`（通过 正确转义`shellescape()`）的第一个参数。

# php - 如何阻止 100,000 多个单独的 IP 地址

> ID：15579620
> 
> 赞同：66
> 
> 时间：2013-03-22T20:49:54.703
> 
> 标签：php, apache, security, .htaccess

**介绍**

`IP address`您如何从您的 Web 应用程序/服务器中阻止大量数据。显然，这可以很容易地用`PHP`任何编程语言完成

```
$ipList = []; // array list or from database
if (in_array(getIP(), $ipList)) {
    // Log IP & Access information
    header("https://www.google.com.ng/search?q=fool"); // redirect
    exit(); // exit
} 
```

或使用`htaccess`

```
order allow,deny
deny from 123.45.6.7
deny from 012.34.5.
# .... the list continues
allow from all 
```

**问题**

*   `100k plus individual IPs`我试图阻止一个整体`subnets`
*   我试图避免用户在阻止此类 IP 之前访问 PHP
*   100000+ 超过 1.5MB，如果要一直加载信息，那就很多`htaccess`了
*   IP 数据库仍在增长......他们将需要动态添加更多价值
*   为 100000+设置禁令`iptables`是荒谬的（可能是错误的）

**愚蠢的想法**

```
order allow,deny
deny from database    <-------- Not sure if this is possible
allow from all 
```

**问题**

*   是否可以`htaccess`从数据库（Redis、Crunchbase、Mongo、MySQL 甚至 Sqlite）中获取列表...任何
*   是否有明显的解决方案来管理生产中的此类问题
*   我知道最好的解决方案是`Block the IPs at the firewall level`有什么方法可以实用地向防火墙添加/删除 IP

**最后**

我的方法可能完全错误......我想要的只是一个可见的解决方案，因为垃圾邮件发送者和僵尸网络正在上升......

请这与攻击无关，`DOS`它只是一个简单的......**`get lost response`**

**更新**

*   防火墙：**Cisco PIX 515UR**

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-22T22:19:46.480

您可以尝试将要阻止的 IP 地址列表保存在[文本文件](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)中或将其转换为[dbm 哈希文件](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbm)，然后使用 mod_rewrite 的`RewriteMap`. 您必须在服务器/虚拟主机配置中进行设置。**您不能在 htaccess 文件中初始化映射**。

```
RewriteEngine On
RewriteMap deny_ips txt:/path/to/deny_ips.txt

RewriteCond ${deny_ips:%{REMOTE_ADDR}|0} !=0
RewriteRule ^ - [L,F] 
```

**/path/to/deny_ips.txt**文件看起来像这样：

```
12.34.56.78 1
11.22.33.44 1
etc. 
```

本质上，您要拒绝的 IP 和一个空格，然后是“1”。此文本文件中的任何 IP 都会导致服务器返回*403 Forbidden*。为了加快速度，您可以使用`httxt2dbm`来生成 dbm 哈希，然后您可以这样定义映射：

```
RewriteMap deny_ips dbm:/path/to/deny_ips.dbm 
```

我不确定使用 mod_rewrite 和很多 IP 对性能有何影响，但是在 linux 下运行在 3Ghz i686 上的 apache 2.2 的快速基准测试，列表中的 5 个 IP 与 102418 之间的差异可以忽略不计。根据**ab**的输出，它们几乎相同。

* * *

解决具体问题：

> htaccess 是否可以从数据库（Redis、Crunchbase、Mongo、MySQL 甚至 Sqlite）中获取列表...任何

使用重写映射，您可以使用“ [prg](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#prg) ”映射类型为映射类型运行外部程序。然后，您可以编写 perl、php 等脚本来与数据库通信，以查找 IP 地址。另请注意“注意”下列出的警告。然后，您可以像使用任何其他地图 ( `RewriteCond ${deny_ips:%{REMOTE_ADDR}|0} !=0`) 一样使用此地图。这基本上会给所有请求造成瓶颈。不是与数据库对话的最佳解决方案。

但是在 apache 2.4 中，有一个[dbd/fastdbd](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbd)映射类型，它允许您通过[mod_dbd](http://httpd.apache.org/docs/current/mod/mod_dbd.html)创建查询。这是一个更好的选择，mod_dbd 模块管理与数据库的连接、池连接等。所以地图定义看起来像：

```
RewriteMap deny_ips "fastdbd:SELECT active FROM deny_ips WHERE source = %s" 
```

假设您有一个表“ **deny_ips** ”，其中包含 2 列“**源**”（IP 地址）和“**活动**”（1 表示活动，0 表示非活动）。

> 是否有明显的解决方案来管理生产中的此类问题

如果您将所有被阻止的 IP 存储在数据库中，则需要管理数据库表的内容。如果您使用 dbm 映射类型，我知道至少[perl 有一个](http://docstore.mik.ua/orelly/perl/perlnut/ch12_01.htm)用于管理 dbm 文件的 DBI，因此您可以使用它从拒绝列表中添加/删除 IP 条目。我以前从未使用过它，所以我不能说太多。管理一个平面文本文件会很棘手，特别是如果您打算删除条目，而不仅仅是附加到它。除了使用数据库和 apache 2.4 的 mod_dbd 之外，我认为这些解决方案中的任何一个都不是开箱即用或生产就绪的。这将需要定制工作。

> 我知道最好的解决方案是在防火墙级别阻止 IP 是否有任何方法可以务实地将 IP 添加/删除到防火墙

对于 IPtables，有一个标记为 Beta 的[perl 接口](http://sourceforge.net/projects/iptperl/)，但我以前从未使用过它。有[libiptc](http://libiptc.sourceforge.net/)但根据[netfilter 的常见问题解答](http://www.netfilter.org/documentation/FAQ/netfilter-faq-4.html#ss4.5)：

> **是否有用于添加/删除规则的 C/C++ API？**
> 
> 不幸的是，答案是：不。
> 
> 现在你可能会想'但是 libiptc 呢？'。正如邮件列表中多次指出的那样，libiptc*从来没有*打算用作公共接口。我们不保证一个稳定的接口，并计划在 linux 包过滤的下一个版本中将其删除。libiptc 太底层了，无论如何都无法合理使用。
> 
> 我们很清楚这种 API 根本就缺乏，我们正在努力改善这种情况。在此之前，建议使用 system() 或打开管道进入 iptables-restore 的标准输入。后者将为您提供更好的性能。

因此，如果没有 API 稳定性，我不知道 libiptc 解决方案的可行性。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-28T10:23:57.773

**另一个视角**

你好。您可以通过访问每个 8KB 长的两个数据块中的两个字节来检查地址是否被阻止。是的，我是认真的......请耐心等待，因为它需要一点时间来解释它。

**理论**

IP地址是一个地址，实际上是一个4字节的数字。

问题是，如果我们让它解决位位置怎么办？

答案：好吧，我们会有

```
 2^32 = 4 Giga Bits 
```

寻址空间，这将需要

```
 4Gb/8 = 512 Mega Bytes 
```

的分配。**哎哟!** 不过不用担心，我们不会阻止 ipverse 中的所有内容，512MB 有点夸张。

这可以为我们打开解决方案的道路。

**小人国案**

想象一个小人国世界，它只存在从 0 到 65535 的 IP 地址。所以地址就像 0.1 或 42.42 到 255.255。

现在这个世界之王想要封锁几个L-IP（小人国IP）地址。

首先，他构建了一个 256 * 256 位长的虚拟 2D 位图，占用：

```
 64 K Bits = 8 K Bytes. 
```

他决定封锁他讨厌的那个讨厌的“革命”网站，因为他是国王，例如地址是 56.28。

```
Address     = (56 * 256) + 28  = 14364.(bit position in whole map)
Byte in map = floor(14364 / 8) =  1795.
Bit position= 14364 % 8        =     4.(modulus) 
```

他打开地图文件，访问第 1795 个字节并设置第 4 位（通过 | 16），然后将其写回以将站点标记为被阻止。

当他的脚本看到 56.28 时，它会执行相同的计算并查看该位，如果已设置，则阻止该地址。

现在这个故事的寓意是什么？好吧，我们可以使用这种小人国结构。

**实践**

**真实案例**

我们可以通过“在需要时使用它”的方法将 Lilliputian 案例应用于现实世界，因为分配 512MB 文件不是一个好的选择。

想象一个名为 BLOCKS 的数据库表，其条目如下：

```
IpHead(key): unsigned 16 bit integer,
Map        : 8KB BLOB(fixed size),
EntryCount : unsigned 16 bit integer. 
```

另一个表只有一个条目，其结构如下，名为 BASE

```
Map        : 8KB BLOB(fixed size). 
```

现在假设您有一个传入地址 56.28.10.2

脚本访问 BASE 表并获取 Map。

它查找**高阶**IP 编号 56.28：

```
Address     = (56 * 256) + 28  = 14364.(bit position in whole map)
Byte in map = floor(14364 / 8) =  1795.
Bit position= 14364 % 8        =     4.(modulus) 
```

查看 Map 中的字节 1795 位 4。

如果未设置该位，则不需要进一步操作，这意味着 56.28.0.0 - 56.28.255.255 范围内没有阻止的 IP 地址。

如果设置了位，则脚本访问 BLOCKS 表。

高阶 IP 编号为 56.28，即 14364，因此脚本查询索引 IpHead = 14364 的 BLOCKS 表。获取记录。该记录应该存在，因为它是在 BASE 标记的。

脚本计算**低阶**IP 地址

```
Address     = (10 * 256) + 2   = 2562.(bit position in whole map)
Byte in map = floor(2562 / 8) =   320.
Bit position= 2562 % 8        =     2.(modulus) 
```

然后它通过查看字段 Map 的字节 320 的位 2 来检查地址是否被阻塞。

任务完成！

**Q1：**我们为什么要使用BASE，我们可以直接用14364查询BLOCKS。

**A1：**是的，我们可以，但是 BASE map 查找会比 BTREE 搜索任何数据库服务器更快。

**Q2：** BLOCKS 表中的 EntryCount 字段是干什么用的？

**A2：**是在同一记录的map字段中被阻塞的ip地址的数量。因此，如果我们解除阻塞 ip 并且 EntryCount 达到 0，那么 BLOCKS 记录就变得不必要了。它可以被擦除，并且 BASE map 上的相应位将被取消设置。

恕我直言，这种方法将闪电般快速。同样对于 blob 分配是每条记录 8K。由于 db 服务器将 blob 保存在单独的文件中，因此具有 4K、8K 或多个 4K 分页的文件系统会做出快速反应。

**如果被阻止的地址过于分散**

嗯，这是一个问题，这将使数据库 BLOCKS 表不必要地增长。

但对于这种情况，替代方法是使用 256*256*256 位立方体，它长 16777216 位，等于 2097152 字节 = 2MB。

对于我们之前的示例，更高的 IP 解析是：

```
(56 * 65536)+(28 * 256)+10 
```

所以 BASE 将变成一个 2MB 的文件，而不是一个 db 表记录，它将被打开（fopen 等）并且位将通过查找（如 fseek，**从不**读取整个文件内容，不必要）然后访问具有以下结构的 BLOCKS 表：

```
IpHead(key): unsigned 32 bit integer, (only 24 bit is used)
Map        : 32 unsigned 8 bit integers(char maybe),(256 bit fixed)
EntryCount : unsigned 8 bit integer. 
```

这里是bitplane-bitplane（8K 8K）版本块检查的php示例代码：

旁注：这个脚本可以通过消除几个调用等来进一步优化。但是这样写是为了让它易于理解。

```
<?
define('BLOCK_ON_ERROR', true); // WARNING if true errors block everyone

$shost = 'hosturl';
$suser = 'username';
$spass = 'password';
$sdbip = 'database';
$slink = null;

$slink = mysqli_connect($shost, $suser, $spass, $sdbip);
if (! $slink) {
    $blocked = BLOCK_ON_ERROR;
} else {
    $blocked = isBlocked();
    mysqli_close($slink); // clean, tidy...
}

if ($blocked) {
    // do what ever you want when blocked
} else {
    // do what ever you want when not blocked
}
exit(0);

function getUserIp() {
    $st = array(
            'HTTP_CLIENT_IP',
            'REMOTE_ADDR',
            'HTTP_X_FORWARDED_FOR'
    );
    foreach ( $st as $v )
        if (! empty($_SERVER[$v]))
            return ($_SERVER[$v]);
    return ("");
}

function ipToArray($ip) {
    $ip = explode('.', $ip);
    foreach ( $ip as $k => $v )
        $ip[$k] = intval($v);
    return ($ip);
}

function calculateBitPos($IpH, $IpL) {
    $BitAdr = ($IpH * 256) + $IpL;
    $BytAdr = floor($BitAdr / 8);
    $BitOfs = $BitAdr % 8;
    $BitMask = 1;
    $BitMask = $BitMask << $BitOfs;
    return (array(
            'bytePos' => $BytAdr,
            'bitMask' => $BitMask
    ));
}

function getBaseMap($link) {
    $q = 'SELECT * FROM BASE WHERE id = 0';
    $r = mysqli_query($link, $q);
    if (! $r)
        return (null);
    $m = mysqli_fetch_assoc($r);
    mysqli_free_result($r);
    return ($m['map']);
}

function getBlocksMap($link, $IpHead) {
    $q = "SELECT * FROM BLOCKS WHERE IpHead = $IpHead";
    $r = mysqli_query($link, $q);
    if (! $r)
        return (null);
    $m = mysqli_fetch_assoc($r);
    mysqli_free_result($r);
    return ($m['map']);
}

function isBlocked() {
    global $slink;
    $ip = getUserIp();
    if($ip == "")
        return (BLOCK_ON_ERROR);
    $ip = ipToArray($ip);

    // here you can embed preliminary checks like ip[0] = 10 exit(0)
    // for unblocking or blocking address range 10 or 192 or 127 etc....

    // Look at base table base record.
    // map is a php string, which in fact is a good byte array
    $map = getBaseMap($slink); 
    if (! $map)
        return (BLOCK_ON_ERROR);
    $p = calculateBitPos($ip[0], $ip[1]);
    $c = ord($map[$p['bytePos']]);
    if (($c & $p['bitMask']) == 0)
        return (false); // No address blocked

    // Look at blocks table related record
    $map = getBlocksMap($slink, $p[0]);
    if (! $map)
        return (BLOCK_ON_ERROR);
    $p = calculateBitPos($ip[2], $ip[3]);
    $c = ord($map[$p['bytePos']]);
    return (($c & $p['bitMask']) != 0);
}

?> 
```

我希望这有帮助。

如果您对详细信息有任何疑问，我将很乐意为您解答。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-26T05:42:46.727

使用 iptables 和 ipset 在流量到达 www 服务器之前阻止流量。

假设您的 Web 服务器位于同一台计算机上，则在 INPUT 链的过滤器表中捕获列入黑名单的 IP 流量。如果您在路由器上阻止 IP，您将需要 FORWARD 链。

首先创建ipset：

```
ipset create ip_blacklist hash:ip 
```

可以通过以下方式添加 IP：

```
ipset add ip_blacklist xxx.xxx.xxx.xxx 
```

将 ipset 匹配规则添加到您的 iptables（删除所有与 ipset 匹配的数据包）：

```
iptables --table filter --insert INPUT --match set --match-set ip_blacklist src -j DROP 
```

这将在 www 服务器之前停止列入黑名单的流量。

编辑：我有机会查找默认的最大大小，它是 65536，因此您需要调整它以支持 100000+ 个条目：

```
ipset create ip_blacklist hash:ip maxelem 120000 
```

您还可以调整哈希大小：

`ipset create ip_blacklist hash:ip maxelem 120000 hashsize 16384`（必须是 2 的幂）

我的经验是 ipset 查找对我的系统的影响可以忽略不计（约 45000 个条目）。网上有很多测试用例。集合的内存是一个限制因素。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-22T21:33:37.620

您需要使用外部防火墙而不是 PHP 来执行此操作。我推荐[pfSense](http://www.pfsense.org/)或[PF](http://www.thedeepsky.com/howto/newbie_pf_guide.php)。我以前用过它，它非常好用，非常直观，而且非常强大。这是最好的系统管理员的选择。我在 FreeBSD 上运行它，但它在 OpenBSD 上也很好用。我是一个 Linux 人，所以这样说我很痛苦，但*不要*试图在 Linux 上运行它。BSD 很简单，你可以很快搞清楚。

pfSense 的一个很棒的功能是能够使用脚本进行配置并将配置访问限制为单个网络接口（以便只有 LAN 上的东西可以配置它）。它还具有一些 ID10T 级别的功能，可防止您意外切断自己的访问权限。

您还应该知道，许多垃圾邮件发送者可以使用[Tor](http://www.torproject.org)之类的东西快速切换 IP 。要解决此问题，您应该在阻止列表中包含已知的出口节点地址（此列表可从各个地方获得）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-22T21:09:52.897

如果您想要一种通过代码添加/删除的方法，请查看[denyhosts](http://denyhosts.sourceforge.net/)。您可以通过代码维护 IP 列表或修补源以从您想要的任何位置读取。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-31T09:48:08.740

有一个名为 ipset 的带有 netfilter 的项目，因此您可以将 ip 添加或删除到列表中，您只需针对该列表创建规则

[http://ipset.netfilter.org/](http://ipset.netfilter.org/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-31T13:30:43.143

我知道
它的 php 方式。正如你在这个问题的开头提到的那样。

```
$ipList = []; // array list or from database
if (in_array(getIP(), $ipList)) {
    // Log IP & Access information
    header("https://www.google.com.ng/search?q=fool"); // redirect
    exit(); // exit
} 
```

我读了你写的东西。但请稍等。
你为什么要这样做。并不重要。但为什么在这种情况下。
我的意思是你为什么要避免访问 php 因为它的速度或仅仅因为它阻止并且因为它很难在所有页面中调用该函数？如果避免某些 ip 访问 php 的唯一原因是。避免主题查看内容。
所以我有一个想法，我建议你这样。
使用一个入口点。

我已经使用过这个解决方案。

首先使用一个简单的 htaccess，您将所有请求发送到一个称为入口点的页面。（如 index.php）
带有一个简单的重写规则，我将其提供给您。所以当用户请求

```
mysite.com/some/path/page.php or anything 
```

htaccess 将在不更改 url 的情况下执行以下内容。所以用户不会有任何感觉。

```
mysite.com/index.php?r=some/path/page.php 
```

所以每个请求都变成了一个具有不同 $_GET['r'] 参数的请求。所以对于每一个请求，我们都会执行 index.php。现在我们可以在 index.php 中做这样的事情

```
$ipList = []; // array list or from database
if (in_array(getIP(), $ipList)) {
    // Log IP & Access information
    header("https://www.google.com.ng/search?q=fool"); // redirect
    exit(); // exit
}
//if after this execute means the IP is not banned
//now we can include file that $_GET['r'] points to
include $_GET['r']; 
```

它是如此简单。它的真实是如此复杂。但主要思想是相同的。你怎么看？

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-22T20:58:33.937

如果您要阻止 IP，您确实应该在防火墙级别执行此操作（您不希望来自不受欢迎的 IP 地址的用户进入您的系统很远）。因此，我建议编写一个 bash 脚本来查询数据库并相应地修改您的防火墙配置文件（这假设您想要一个利用存储在您的 Web 数据库中的 IP 地址的解决方案——很可能有一个更好的地方来存储这些信息）。

编辑：如果您想在 PHP 级别将 IP 地址添加到黑名单中，正如@Populus 建议的那样，这里是关于如何在 PHP 中使用系统调用的手册：http: [//php.net/manual/en/function.system .php](http://php.net/manual/en/function.system.php)

如果您使用 iptables，则需要使用以下命令将 IP 地址添加到黑名单：[http ://www.cyberciti.biz/faq/linux-iptables-drop/](http://www.cyberciti.biz/faq/linux-iptables-drop/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-31T20:59:12.037

似乎我们大多数人都同意**在防火墙级别进行阻止**。

您可以有一个程序来侦听您的网站以阻止 ips 并生成脚本：

```
ip = getNextIpToBlock()
an = increment_unique_alphanum_generator()
script = generate_script(ip, an) 
```

脚本看起来像这样（其中 [an] 是一个字母数字值， [ip] 是您阻止的 ip）：

```
en [enter]
*password* [enter]
conf t [enter]
access-list [an] deny ip [ip] 0.0.0.0 any [enter]
access-group [an] in interface outside [enter] 
```

然后，您将此脚本加载到另一个程序，该程序对您的固件 CLI 执行远程 telnet 或 ssh 调用。

不要忘记注销，也许每 100 个 ips 复制一次运行配置以启动配置。

我不知道，但您现在可能想知道您的防火墙有哪些限制。

最好的，

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-31T19:54:40.790

恕我直言，可以从几个角度考虑这个问题

1.  您有一组非常庞大的唯一 IP 地址要阻止。您越早在服务器上阻止它们，您在它们上浪费的处理能力就越少。您可以通过 PHP 的适当系统调用在防火墙中添加/删除 IP。

考虑到上述选项，唯一相关的问题是：

*   *他们经常光顾吗？*                               => 如果是这样，那么解决方案 (1) 是您最好的选择。
*   您的防火墙可以有效地处理它吗？=> 如果没有，您可能需要考虑其他解决方案。

这`.htaccess`将是我的第二选择。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-26T20:10:46.000

对列表中的 IP 进行地理查找。我自己的经验表明，大多数恶意（即垃圾邮件）连接都来自中国。如果你发现自己也是这样，而且你没有特别需要为中国服务，看看你能不能在防火墙级别有效地封锁整个国家。

# php - 在 XAMPP for Windows 中的第 2 步安装中断

> ID：15579621
> 
> 赞同：1
> 
> 时间：2013-03-22T20:49:58.393
> 
> 标签：php, codeigniter, pyrocms

[http://content.screencast.com/users/innulled/folders/Snagit/media/8bb54c95-f131-4d55-a3e2-368c1f686a80/03.22.2013-16.16.08.png](http://content.screencast.com/users/inulled/folders/Snagit/media/8bb54c95-f131-4d55-a3e2-368c1f686a80/03.22.2013-16.16.08.png)

从上图可以看出，出了点问题。我在 Windows 7 下使用最新版本的 XAMPP。我在我的 win8 系统和两台计算机的 WAMPP 上都收到了同样的错误。有人知道我为什么会收到这个错误吗？

# c++ - 查找集合和映射键之间的 set_difference

> ID：15579623
> 
> 赞同：2
> 
> 时间：2013-03-22T20:50:05.720
> 
> 标签：c++, map, set, set-difference

我想问是否可以提供一个示例，说明如何使用 set_difference 找到地图的集合和键之间的差异

我知道另一个问题[std::set_difference 是否可以比较集合和映射键？](https://stackoverflow.com/questions/7758239/stdset-difference-is-it-possible-to-compare-set-and-map-keys)但它指向另一个没有明确例子的问题。我需要一个不使用 boost 库的解决方案

```
#include <algorithm>
#include <set>
#include <iterator>
// ...
std::set<int> s1, s2;
// Fill in s1 and s2 with values
std::set<int> result;
std::set_difference(s1.begin(), s1.end(), s2.begin(), s2.end(),
    std::inserter(result, result.end())); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T21:13:09.187

您可以使用自定义比较器来做到这一点。标准算法使用严格的弱排序。要测试两个元素是否相等，需要应用两次比较器。当两个元素相等`comp(first, second)`并`comp(second, first)`返回 false 时（`comp`比较器函数在哪里）。由于您要比较的元素具有不同的类型，因此一个比较器不会这样做 - 您需要两个重载：

```
struct cmp {
    bool operator()(int i, const std::pair<int, double>& p) const
    {
        return i < p.first;
    }

    bool operator()(const std::pair<int, double>& p, int i) const
    {
        return p.first < i;
    }

};

int main()
{

    std::set<int> s1 { 1, 2, 3, 4 };
    std::map<int, double> s2 { {1, 0}, {2,0}, {4,0} };

    std::set<int> result;

    std::set_difference(s1.begin(), s1.end(), s2.begin(), s2.end(),
        std::inserter(result, result.end()), cmp());

    std::cout << *result.begin(); // will print 3

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T19:23:12.943

@Superlokkus @jrok 我知道这篇文章晚了大约一年......仍然希望澄清这个问题。当比较运算符重载时，MS Visual Studio 会出现问题。问题是有两种组合没有被考虑在内：

```
struct cmp {
    bool operator()(const int& i, const std::pair<int, double>& p) const
    {
        return i < p.first;
    }
    bool operator()(const std::pair<int, double>& p, const int& i) const
    {
        return p.first < i;
    }
    bool operator()(const std::pair<int, double>& p1,
        const std::pair<int, double>& p2) const
    {
        return p1.first < p2.first;
    }
    bool operator()(const int& i1, const int& i2) const
    {
        return i1 < i2;
    }
}; 
```

通过插入最后两个运算符，我们插入了编译器获得差异所需的所有选项。事实上，我建议使用前两个运算符中介绍的`const int&`而不是简单的。`int`对于小情况，这无关紧要，但是当我们有非常大的对数组、整数数组，或者更糟糕的是，非常大的容器时，操作将受到内存限制，因为我们将有很多内存访问。通过使用它，我们传递参数的引用并且不需要复制参数，因此避免了复制操作并用另一组完全不必要的值填充缓存。

最后一点，我发现@jrok 提出的第一个解决方案在发布模式（MSVC 2013）下完美编译，而不是在调试中，这很奇怪。很高兴知道为什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T12:01:00.663

我自己对如何编写比较谓词的轻微偏好是：

```
class KeyLess
{
    public:

      template< typename KeyType >
      static KeyType getKey( const KeyType& k ) 
      {  
          return k;
      }

      template< typename KeyType, typename ValueType >
      static KeyType getKey( std::pair< const KeyType, ValueType > const& p ) 
      {         
          return p.first;
      }

      template< typename L, typename R >
      bool operator()( const L& l, const R& r ) const
      {
          return getKey( l ) < getKey( r );
      }
}; 
```

您现在可以在整个代码中使用它。

# coldfusion - 如何跟踪有多少请求与 cfcontent 服务文件相关联？

> ID：15579626
> 
> 赞同：5
> 
> 时间：2013-03-22T20:50:13.370
> 
> 标签：coldfusion, coldfusion-9

由于[APE 的 mod_xsendfile 不能与 CF9 的 jrun_iis6_wildcard.dll 一起使用](http://www.helicontech.com/community/mod_xsendfile_problems-8-1090.html)，我只能使用`<cfcontent>`. 现在的问题是，如果文件下载很大，或者连接速度很慢，会导致一个CF请求长时间的阻塞。如果没有强制实施硬限制的方法，理论上可以关闭 CF 服务器，因为所有请求都与服务文件相关联。

我尝试在下面进行额外的日志记录/逻辑，`<cfcontent file="">`但我注意到它们从未被访问和执行。

```
<cfcontent file="test.mp3">

<!--- won't reach here --->
<cfdump output="console" var="#now()# download done!"> 
```

可以做些什么来避免因处理过多的 cfcontent 请求而导致 CF 崩溃？

**更新**：好消息！[CF10 与 APE 的 mod_xsendfile 一起使用](http://www.helicontech.com/community/mod_xsendfile_problems-8-1090.html?p=3883#p3883)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T01:11:41.517

**解决方案 1**

考虑到由于无法控制的因素（“卡住”的线程、服务/服务器关闭等），您不太可能拥有 100% 的真实会计，您可以执行以下操作：

如果您只想跟踪总请求数，您可以使用在开始提供文件时增加的应用程序变量。然后，当内容完成后，您会减少计数。但是，您需要小心使用 cflock 以确保此更新不会导致任何问题。

如果您想将此记录到文件中，您可以执行相同的操作，但仍将其包装在 cflock 中，以确保您不会在请求同时读取/写入文件时遇到任何问题。

如果您使用 SQL，您可以创建一个表来表示文件，并为每次提取添加一条记录和适当的信息

*   文件名
*   完成为有点是/否字段默认为假
*   用户/客户信息
*   开始日期/时间默认为现在，
*   结束日期/时间默认为空，
*   “正在下载”状态
*   任何其他信息

使用返回的身份 cfcontent 文件，然后在完成后使用正确的日期/时间和状态“成功”更新具有指定 ID 的表并完成为是。

在 onerror 期间，您可以更新表以反映状态“错误 [相关错误详细信息]”并完成为 1。添加一个全面更新以更改为已完成 = 1 或清除未完成的记录不是一个坏主意可用（可能在应用程序启动期间或一段时间后）

这将允许您查询此表以获取当前待处理的请求总数（以及它们是什么等）

但是，这只解决了长时间运行的请求的问题。

**解决方案 2**

理想情况下，问题是安全地返回文件内容。根据文件的敏感程度（例如，首选私有但不是世界末日），您可以将它们“复制”到适当的 Web 可访问目录，但使用 UUID 作为名称。因此，假设它是 Secret1.pdf，您将使用 cfdirectory 创建一个目录，然后将文件复制到其中。给你这样的东西：

/files/xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxxxxxx/Secret1.pdf 然后执行重定向到该目录。

然后，您可以设置计划任务或网关或您喜欢的任何方法来清除超过设定小时数的目录。例如，删除目录 xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxxxxxx 以及 30 分钟后的所有文件。

# python - Django 下载文件错误“zip 文件无效”

> ID：15579629
> 
> 赞同：0
> 
> 时间：2013-03-22T20:50:20.477
> 
> 标签：python, django, file, web-applications

这是我下载文件的查看代码

```
def download_order(request,order_id):
      purchase=GigPurchase.objects.select_related().get(order_id=order_id)
      order=purchase.order  
      wrapper=FileWrapper(open(order.path,"rb")) 
      content=mimetypes.guess_type(order.path)[0]
      t=purchase.gig.title
      title=slugify(t)
      response=HttpResponse(wrapper,content_type=content)
      response['Content-Disposition']='attachment;filename=%s.zip'%(title)
      return response 
```

我有一个模型，它有一个名为“order”的文件字段。我在这里做错了什么，因为当我点击链接时。我得到了下载文件，但是当我尝试打开它时，我得到“压缩的 zip 文件夹无效”。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:35:55.347

您应该了解此代码仅从 发送文件`order.path`，您需要在代码中创建该文件。关于创建 zip 文件，您可以从 stdlib[`zipfile`](http://docs.python.org/2/library/zipfile)模块开始。

# php - 当员工登录到特定模块时，我正在使用（会话）变量来回显员工姓名

> ID：15579645
> 
> 赞同：0
> 
> 时间：2013-03-22T20:51:41.507
> 
> 标签：php, javascript, jquery, html

```
<div class='module_header'>Welcome <?php echo $data['employee'] = login::$name; ?></div> 
```

此外，我有一个包含各种员工姓名的选择框，当他们在选择框中选择不同的用户名时，我希望页面根据所选员工刷新并显示 sql 数据。我想我必须通过 jquery 来做到这一点......在这方面寻找一些方向。

我的 sql 查询正在返回我期望当前登录的人的查询：

```
<?php echo lookup_gen::query_results_table("select patient_code,invoiceno,ship_date,udef1,udef2,created_at,printed, b.employee from dbo.pml_delivery_ticket_q a
left outer join  event.dbo.emp b on a.created_by=b.id
where a.created_by='06y'
and cast(created_at as date) = '2013-03-20'")
                    ?> 
```

我对如何填充鼠标按下时交互的数据以及刷新页面上的 sql 数据感到困惑。希望这是有道理的。我还没有真正尝试太多……仍处于初始阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:04:20.337

你可以这样做：

在您的`<select>`标签中添加 `onchange="window.location.href = this.value"`

然后您将使用所有适当的用户填充`<option>`标签，他们的值将是他们的 DB id，然后您可以使用该`$_GET`方法查询该用户。

我还添加了一条`if`语句，该语句使登录的用户在下拉列表中显示为选中状态

```
<?php
(isset($_GET['userid'])) ? $loggedUser = $_GET['userid'] : $loggedUser = '';
?>

<select name="username" onchange="window.location.href = this.value">
    <?php
    echo '<option value="'.$_SERVER['PHP_SELF'].'" selected></option>';
        // Array of usernames ($v) and their database id's ($k)
        foreach ($users as $k => $v) {
            if ($k == $loggedUser) {
                echo'<option value="'.$_SERVER['PHP_SELF'].'?userid='.$k.'" selected>'.$v.'</option>';
            } else {
                echo'<option value="'.$_SERVER['PHP_SELF'].'?userid='.$k.'">'.$v.'</option>';
            }
        }
    ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:09:37.083

只需在selece html的onchange事件中发送选定的值：

```
<select id="users">
    <option value="1">1111</option>
    <option value="2">2222</option>
    <option value="3">3333</option>
    <option value="4">4444</option>
</select> 
```

js：

```
$('#users').on('change',function(){
   //get value of the select (suppose to be emp id)
   var value = this.options[this.selectedIndex].value;
   //send it to some page on get url (can be post,ajax etc...)
   location.href = 'mypage.php?id=' + value; 
}); 
```

# python - python dict to numpy structured array

> ID：15579649
> 
> 赞同：45
> 
> 时间：2013-03-22T20:51:49.720
> 
> 标签：python, numpy, arcpy

I have a dictionary that I need to convert to a NumPy structured array. I'm using the arcpy function [`NumPyArraytoTable`](http://resources.arcgis.com/en/help/main/10.1/index.html#//018w00000016000000), so a NumPy structured array is the only data format that will work.

Based on this thread: [Writing to numpy array from dictionary](https://stackoverflow.com/questions/10838982/writing-to-numpy-array-from-dictionary) and this thread: [How to convert Python dictionary object to numpy array](https://stackoverflow.com/questions/7471872/how-to-convert-python-dictionary-object-to-numpy-array)

I've tried this:

```
result = {0: 1.1181753789488595, 1: 0.5566080288678394, 2: 0.4718269778030734, 3: 0.48716683119447185, 4: 1.0, 5: 0.1395076201641266, 6: 0.20941558441558442}

names = ['id','data']
formats = ['f8','f8']
dtype = dict(names = names, formats=formats)
array=numpy.array([[key,val] for (key,val) in result.iteritems()],dtype) 
```

But I keep getting `expected a readable buffer object`

The method below works, but is stupid and obviously won't work for real data. I know there is a more graceful approach, I just can't figure it out.

```
totable = numpy.array([[key,val] for (key,val) in result.iteritems()])
array=numpy.array([(totable[0,0],totable[0,1]),(totable[1,0],totable[1,1])],dtype) 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-22T21:04:15.840

You could use `np.array(list(result.items()), dtype=dtype)`:

```
import numpy as np
result = {0: 1.1181753789488595, 1: 0.5566080288678394, 2: 0.4718269778030734, 3: 0.48716683119447185, 4: 1.0, 5: 0.1395076201641266, 6: 0.20941558441558442}

names = ['id','data']
formats = ['f8','f8']
dtype = dict(names = names, formats=formats)
array = np.array(list(result.items()), dtype=dtype)

print(repr(array)) 
```

yields

```
array([(0.0, 1.1181753789488595), (1.0, 0.5566080288678394),
       (2.0, 0.4718269778030734), (3.0, 0.48716683119447185), (4.0, 1.0),
       (5.0, 0.1395076201641266), (6.0, 0.20941558441558442)], 
      dtype=[('id', '<f8'), ('data', '<f8')]) 
```

* * *

If you don't want to create the intermediate list of tuples, `list(result.items())`, then you could instead use `np.fromiter`:

In Python2:

```
array = np.fromiter(result.iteritems(), dtype=dtype, count=len(result)) 
```

In Python3:

```
array = np.fromiter(result.items(), dtype=dtype, count=len(result)) 
```

* * *

**Why using the list `[key,val]` does not work:**

By the way, your attempt,

```
numpy.array([[key,val] for (key,val) in result.iteritems()],dtype) 
```

was very close to working. If you change the list `[key, val]` to the tuple `(key, val)`, then it would have worked. Of course,

```
numpy.array([(key,val) for (key,val) in result.iteritems()], dtype) 
```

is the same thing as

```
numpy.array(result.items(), dtype) 
```

in Python2, or

```
numpy.array(list(result.items()), dtype) 
```

in Python3.

* * *

`np.array` treats lists differently than tuples: [Robert Kern explains](http://mail.scipy.org/pipermail/numpy-discussion/2011-September/058390.html):

> As a rule, tuples are considered "scalar" records and lists are recursed upon. This rule helps numpy.array() figure out which sequences are records and which are other sequences to be recursed upon; i.e. which sequences create another dimension and which are the atomic elements.

Since `(0.0, 1.1181753789488595)` is considered one of those atomic elements, it should be a tuple, not a list.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-03T14:30:06.230

Even more simple if you accept using pandas :

```
import pandas
result = {0: 1.1181753789488595, 1: 0.5566080288678394, 2: 0.4718269778030734, 3: 0.48716683119447185, 4: 1.0, 5: 0.1395076201641266, 6: 0.20941558441558442}
df = pandas.DataFrame(result, index=[0])
print df 
```

gives :

```
 0         1         2         3  4         5         6
0  1.118175  0.556608  0.471827  0.487167  1  0.139508  0.209416 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-18T08:35:12.637

Let me propose an improved method when the values of the dictionnary are lists with the same lenght :

```
import numpy

def dctToNdarray (dd, szFormat = 'f8'):
    '''
    Convert a 'rectangular' dictionnary to numpy NdArray
    entry 
        dd : dictionnary (same len of list 
    retrun
        data : numpy NdArray 
    '''
    names = dd.keys()
    firstKey = dd.keys()[0]
    formats = [szFormat]*len(names)
    dtype = dict(names = names, formats=formats)
    values = [tuple(dd[k][0] for k in dd.keys())]
    data = numpy.array(values, dtype=dtype)
    for i in range(1,len(dd[firstKey])) :
        values = [tuple(dd[k][i] for k in dd.keys())]
        data_tmp = numpy.array(values, dtype=dtype)
        data = numpy.concatenate((data,data_tmp))
    return data

dd = {'a':[1,2.05,25.48],'b':[2,1.07,9],'c':[3,3.01,6.14]}
data = dctToNdarray(dd)
print data.dtype.names
print data 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-07T01:51:50.463

I would prefer storing keys and values on separate arrays. This i often more practical. Structures of arrays are perfect replacement to array of structures. As most of the time you have to process only a subset of your data (in this cases keys or values, operation only with only one of the two arrays would be more efficient than operating with half of the two arrays together.

But in case this way is not possible, I would suggest to use arrays sorted by column instead of by row. In this way you would have the same benefit as having two arrays, but packed only in one.

```
import numpy as np
result = {0: 1.1181753789488595, 1: 0.5566080288678394, 2: 0.4718269778030734, 3: 0.48716683119447185, 4: 1.0, 5: 0.1395076201641266, 6: 0.20941558441558442}

names = 0
values = 1
array = np.empty(shape=(2, len(result)), dtype=float)
array[names] = result.keys()
array[values] = result.values() 
```

But my favorite is this (simpler):

```
import numpy as np
result = {0: 1.1181753789488595, 1: 0.5566080288678394, 2: 0.4718269778030734, 3: 0.48716683119447185, 4: 1.0, 5: 0.1395076201641266, 6: 0.20941558441558442}

arrays = {'names': np.array(result.keys(), dtype=float),
          'values': np.array(result.values(), dtype=float)} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-17T13:57:46.103

Similarly to the approved answer. If you want to create an array from dictionary keys:

```
np.array( tuple(dict.keys()) ) 
```

If you want to create an array from dictionary values:

```
np.array( tuple(dict.values()) ) 
```

# sql - 需要 T-SQL 逻辑思想

> ID：15579650
> 
> 赞同：-3
> 
> 时间：2013-03-22T20:51:49.767
> 
> 标签：sql, sql-server, tsql

嘿，伙计们，这里非常需要您的专业知识.. 一位客户访问了一家银行，一位代理人帮助他办理了他的账户。同一位客户在同一天再次获得收益，另一位收银员帮助了他/她。所以有记录那两个或更多的vists.But只有一个应该被计算在内。这是我正在考虑这样做的方式，但它并没有帮助我解决它..你们认为..像往常一样，非常感谢您的意见...“显然我迷路了”..谢谢大家.... .

```
 SELECT  CD.MEMACT,
                 CD.DATETIME,--DATETIME
                 CD.AG_ID,
                 RANK() OVER (PARTITION BY 
                                   CD.MEMACT,
                                   CD.DATETIME,
                                   CD.AG_ID
                            ORDER BY CD.DATETIME)RANKED

             FROM MEM_ACT_TBL
             WHERE CD.MEMACT='1024518' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:04:29.470

```
Select * 
from
         (
         SELECT  CD.MEMACT,
             CD.DATETIME,--DATETIME
             CD.AG_ID,
             RANK() OVER (PARTITION BY 
                               CD.MEMACT
                        ORDER BY CD.DATETIME)RANKED

         FROM MEM_ACT_TBL
         )
WHERE RANKED = 1
      AND MEMACT='1024518' 
```

那应该让你获得第一条记录。`CD.DATETIME DESC`如果您想要最后一条记录，请将Order By 更改为

# r - Heston Simulation Monte Carlo：慢速 R 代码

> ID：15579655
> 
> 赞同：-6
> 
> 时间：2013-03-22T20:52:08.210
> 
> 标签：r, montecarlo

我需要模拟股票价格，遵循随机波动过程（赫斯顿模型）。我已经问过，如何加快我的循环，但在这种情况下，由于 V[i-1] 依赖性，我无法使用一些技巧。

基本上代码是：V 是股票的波动率，S 是股票价格。并且：a,b,c... 常数。

这是代码：

```
V[1] <- 0.04
S[1] <- 40
U <- matrix(NA, nrow=100000, ncol=200, byrow=TRUE)

### Function ###
Inv.Phi <- function(y){
              if (y <= p) {0} else {log(1-p)}
}

### Simulation ####
for(j in 1:100000){
  for(i in 2:200){
    m <- V[i-1] * c
    n <- V[i-1] * d
    phi <- n/m

    if(phi <= 1.5){ 
       Z <- rnorm(1)
       V[i] <- rnorm(1) * e
       K <- V[i-1] * f
    }else{ 
       p <- (phi-1) / (phi+1)
       u <- runif(1)
       V[i] <- Inv.Phi(u)
       K <- V[i-1] * g
    }
 S[i] <- S[i-1] * exp(K * V[i-1]) * exp(V[i] * rnorm(1))
 }
U[j,] = S
} 
```

任何加快这个过程的建议！我知道，我对 R 使用了很多不好的东西，但我想不出更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:49:23.413

如果您摆脱外部循环并立即构建矩阵的整个列，您可能会加快速度：

```
nsim <- 1e5
nt <- 200
U <- matrix(NA, nrow=nsim, ncol=200, byrow=TRUE)
V_last <- V <- rep(0.04, nsim)
U[,1] <- 40

Inv.phi <- function(y,p) ifelse (y <= p, 0, log(1-p))
for(i in 2:nt) {
    m <- V_last * c
    n <- V_last * d
    phi <- n/m ## ??? as currently stated this is just a constant d/c ??
               ## presumably there is a typo somewhere??
    bt <- (phi<=1.5) ## below-threshold
    V[bt] <- rnorm(length(bt)) * e
    V[!bt] <- Inv.phi(runif(length(!bt)), (phi[!bt]-1) / (phi[!bt]+1))
    K <- V_last*ifelse(bt,f,g)
    U[,i] <- U[,i-1] * exp(K * V_last) * exp(V * rnorm(nsim))
    V_last <- V
} 
```

我认为这可行，但无法测试，因为您没有给出可重复的示例...

# python - 如何向量化这个乘法？

> ID：15579657
> 
> 赞同：2
> 
> 时间：2013-03-22T20:52:48.947
> 
> 标签：python, numpy, vectorization

我有一个形状为 (ni*43*91)x67 的 X 矩阵和一个形状为 67x43x91 的 W 张量。变化

我需要通过用 W 的第一列点 X 的前 ni 行来得到一个 (ni*43*91) 向量 y 以获得 y 的第一个 ni 元素和 X 的第二个 ni 行与 W 的第二列得到y 的第二个 ni 元素，以此类推。当我用完 W 中的列时，我会转到下一个维度继续。

我有两个面具 dim2 和 dim3，它们的形状都是 (ni*43*91)，按顺序排列。现在这就是我正在做的（简化），而且速度很慢

```
for d3 in range(91):
  for d2 in range(43):
    mask = ((dim3 == d3) & (dim2 == d2))
    curr_X = X[mask, :]
    curr_W = W[:,d2,d3]
    curr_y = numpy.dot(curr_X,curr_W)
    y[mask] = curr_y 
```

如果没有 for 循环，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T15:19:49.560

从这个问题中很难理解期望的结果是什么，但*我认为*你所追求的结果可以很容易地获得，如下所示：

```
y = (X.T * W[:,dim2,dim3]).sum(axis=0) 
```

比较正确性和速度：

```
import numpy as np

# some test data, the sorting isn't really necessary
N1, N2, N3 = 67, 43, 91
ni_avg = 1.75
N = int(ni_avg * N2 * N3)

dim2 = np.random.randint(N2, size=N)
dim3 = np.sort(np.random.randint(N3, size=N))
for d3 in range(N3):
    dim2[dim3==d3].sort()

X = np.random.rand(N, N1)
W = np.random.rand(N1, N2, N3)

# original code
def original():
    y = np.empty(X.shape[0])
    for d2 in range(W.shape[1]):
        for d3 in range(W.shape[2]):
            mask = ((dim3 == d3) & (dim2 == d2))
            curr_X = X[mask, :]
            curr_W = W[:,d2,d3]
            curr_y = numpy.dot(curr_X,curr_W)
            y[mask] = curr_y
    return y

# comparison
%timeit original()
# 1 loops, best of 3: 672 ms per loop
%timeit (X.T * W[:,dim2,dim3]).sum(axis=0)
# 10 loops, best of 3: 31.8 ms per loop
np.allclose(original(), np.sum(X.T * W[:,dim2,dim3], axis=0))
# True 
```

更快一点仍然是使用

```
y = np.einsum('ij,ji->i', X, W[:,dim2,dim3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:41:43.023

我不完全理解你的`dim2`和`dim3`数组是什么，以及如何`mask`构造，但根据你的描述，你想要接近这个的东西：

```
ni = 10
a, b, c = 43, 91, 67
X = np.random.rand(ni*a*b, c)
W = np.random.rand(c, a, b)

X = X.reshape(ni, a*b, c)
W = W.reshape(c, a*b)

y = np.einsum('ijk, kj -> ij', X, W)
y = y.reshape(-1) 
```

如果您使用工作代码更新您的问题，即 and 的完整描述`dim2`，`dim3`我们可以对其进行微调以返回完全相同的内容（如果还没有的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:44:56.443

首先，不清楚你想做什么，因为你的代码不起作用。我只能*猜*你想这样做：

```
from numpy import *
from numpy.random import rand

ni=12
A=67
B=43
C=91

X = rand(ni*B*C,A) 
W = rand(A,B,C)

y = zeros((ni*B*C))

for k in xrange(len(y)):
    b = (k/ni)/C
    c = (k/ni) % C

    #print 'y[%i] = dot(X[%i,:],W[:,%i,%i])'%(k,k,b,c)

    y[k] = dot(X[k,:],W[:,b,c]) 
```

如果您只是设置`A,B,C,ni`一些较低的值并取消注释 - 行`print`，您将很快看到该算法的作用。

如果这是你想要的，那么你可以用这个单线更快地做到这一点：

```
y2 = sum(X * (W.reshape((A,B*C)).swapaxes(0,1).repeat(ni,axis=0)),axis=1) 
```

尽管有一些索引重新排列，但这里的关键技巧是使用`repeat`，因为在循环中索引`b,c`“冻结”了`ni`步骤，而`k`增长。

我现在有点着急，但是如果您需要进一步的解释，请发表评论。

# javascript - jQuery .on() 方法在 Chrome 中不起作用（但在 IE 和 FF 中起作用）

> ID：15579658
> 
> 赞同：4
> 
> 时间：2013-03-22T20:52:57.017
> 
> 标签：javascript, jquery, events, google-chrome, dom

我的 jQuery 代码在 IE 9 和 FF 19 中都可以正常执行，但在 Chrome 版本 25.0.1364.172 中似乎无法正常工作。使用 jQuery 1.7.1

我有 2 个下拉列表和一个按钮。在初始页面加载时，单击事件处理程序通过 jQuery 连接到 ddlists 和按钮中的选项元素。在 IE 和 FF 中，事件处理程序会为所有 3 个事件触发。效果很好。但是，在 Chrome 中，只有按钮事件处理程序被触发 - 而不是选择选项的单击事件处理程序。

```
 $(document).ready(function () {

    $('#ddlCategory').on('click', 'option', function (event) {

        // BREAKPOINT ON FIRST LINE IN THIS BLOCK NEVER HITS WHILE IN CHROME BUT DOES IN IE & FF
        if ($(event.target).val() == -1)
            return;
       more code...
    });

    $('#ddlSubCategory').on('click', 'option', function (event) {
        ResetSubCatOptionDisplay();
        var selectedId = $(event.target).val();           
        more code....
       // BREAKPOINT ON FIRST LINE IN THIS BLOCK NEVER HITS WHILE IN CHROME BUT DOES IN IE & FF
    });

    $('#btnAddSubCat').click(function (event) {
        ManageWarningDisplay(false, "");

        more code...
        // BREAKPOINT ALWAYS HITS ON FIRST LINE IN THIS BLOCK FOR ALL 3 BROWSERS
     });

    more code ..... 

}); 
```

我想也许 'on()' 函数在 Chrome 中不起作用，所以我也尝试使用以下语法，但同样的结果。似乎根本没有连接处理程序，因为断点不会像按钮的事件处理程序那样在 Chrome 开发工具中命中。

```
 $('#ddlCategory option').click(function (event) { ... 
```

考虑到 Chrome 可能不喜欢“选项”元素上的点击事件，我考虑尝试连接事件处理程序来选择元素本身，但即使用户点击向下箭头也会触发。

我使用事件的原因：我不想使用“onchange”事件，因为当用户单击选择中的唯一一个选项时它不会触发（如果在某些情况下只有一个，那么将会）。另外，对于 ddlSubCategory 控件，我将在运行时在客户端上动态删除和添加选项元素，因此我需要使用 $().on() 或 $().live() （不推荐使用后者）来委托到未来的选择。

有人对此有任何想法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:58:13.827

点击事件对选项无效。但是它在 select 上有效，所以这就是解决方法：

```
$("select#yourSelect").change(function(){
    process($(this).children(":selected").html());
}); 
```

# objective-c - 堆上Objective C中的2D原始数组

> ID：15579659
> 
> 赞同：1
> 
> 时间：2013-03-22T20:53:05.893
> 
> 标签：objective-c, arrays, multidimensional-array

我想要堆上的原始 2D 浮点数组。我可以使用 NSMutableArray 作为包装器，但为了性能，我只想使用原语。

一种在 Objective-C WITH 对象中执行此操作的方法：

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:DIM1];

for (int i = 0; i < DIM1; i++) {
    array[i] = [NSMutableArray arrayWithCapacity:DIM2];
} 
```

这就是我在 C 中所做的：

```
float **array = new float*[DIM1];
for(int i = 0; i < DIM; i++) {
    hotplate[i] = new float[DIM2];
} 
```

我将如何做到这一点是Objective-C？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:38:20.897

Objective-C 只是 C 之上的一组扩展。C 部分（如浮点数组）没有改变。你的问题是你在这里所说的“C”实际上是C++。这就是你在 C 中的做法：

```
float **array = malloc(DIM1 * sizeof(float*));
for(int i = 0; i < DIM1; i++) {
    hotplate[i] = malloc(DIM2 * sizeof(float));
} 
```

（当然，此时实际的浮点数组包含堆垃圾，因此您可能也想初始化它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:38:18.993

> 这就是我在 C 中所做的：`float **array = new float*[DIM1];`

不，那是 C++。这就是我在 C 中所做的：

```
float (*arr)[DIM1] = malloc(sizeof(*arr) * DIM2); 
```

突然间，你摆脱了所有丑陋的 for 循环，但你可以有很好的 2D 下标语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:33:17.080

你的两个维度都是恒定的（看起来）。你可以做这样的事情。

```
typedef float two_dim_array [DIM1][DIM2];

extern int
main (void)
{

  two_dim_array *array = (two_dim_array *) malloc (sizeof(two_dim_array));
  (*array)[0][0] = 1.0;
  (*array)[2][2] = 4.0;
  printf ("%f, %f", (*array)[0][0], (*array)[2][2]);
} 
```

# jquery - 从左侧而不是右侧剪切图片的宽度

> ID：15579660
> 
> 赞同：0
> 
> 时间：2013-03-22T20:53:06.963
> 
> 标签：jquery, html, css, web

我有这样的图片![在此处输入图像描述](../Images/908664c20ee1df5610a0c33a5893523e.png)

现在，我想实现一个进度条之类的东西，所以这张图片应该从一个非常短的开始，然后变得越来越长。

我现在将它作为背景图像放在 div 中。现在，如果我设置一个宽度（如 300），右侧的箭头将被切断。无论如何我可以这样做，所以只会切割左侧而不是右侧？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T20:55:38.287

您需要在 CSS 中指定背景图像的位置

**HTML**

```
<div class="progress-bar">
    <div class="progress-bar-image"></div>
</div> 
```

**CSS**

```
.progress-bar {width:100%; height:40px}
.progress-bar-image { background: url('http://i.stack.imgur.com/yWm8U.png') top right no-repeat; width:100px; height:30px;} 
```

见[jsfiddle](http://jsfiddle.net/cL84P/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:55:51.627

使用 css 背景位置：

```
.yourClassName
{ 
    background-image:url('your-image');
    background-repeat:no-repeat;
    background-attachment:fixed;
    background-position:right; 
} 
```

然后定期调整元素大小。

# java - Java/NetBeans：将 javadoc 上传到 FTP 服务器

> ID：15579663
> 
> 赞同：0
> 
> 时间：2013-03-22T20:53:14.200
> 
> 标签：java, netbeans, documentation, javadoc

每当我构建应用程序或运行 javadoc 时，NetBeans 是否支持自动上传最新文档？
你知道一个插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:56:35.123

[您可以使用FTP 任务](http://ant.apache.org/manual/Tasks/ftp.html)创建新的 ant 目标。如果您对 ant 不太了解，请查看[本教程](http://ant.apache.org/manual/tutorials.html)。

# asp.net-mvc - 有效避免 ASP.NET MVC 中的 ViewBag

> ID：15579673
> 
> 赞同：7
> 
> 时间：2013-03-22T20:53:53.327
> 
> 标签：asp.net-mvc, architecture, viewmodel, viewbag

您如何处理避免 ViewBag 的问题，因为它存在动态出错的风险，但也避免每次都必须填充新的 ViewModel 并将其传递回视图。例如，我不想更改以下内容以公开通常填充在 ViewBag 中的常见数据。

```
[HttpGet]
void Index() 
{ 
    return View(); 
} 
```

到

```
[HttpGet]
void Index() 
{
    var messages = new MessageCollection();
    messages.AddError("Uh oh!");

    return View(messages);
} 
```

我将在管道中的哪个位置添加一个像 ViewBag 这样的自定义且强类型的属性，但它会优雅地暴露在 Controller 和 View 中。当我不需要特定的 ViewModel 时，我宁愿这样做......

```
[HttpGet]
void Index()
{
    Messages.AddError("Uh oh!");

    return View();
} 
```

在视图方面，而不是 @((IMessageCollection)ViewBag.Messages).Errors id 而是具有类似 @Messages.Errors 的东西，它是强类型的并且随处可用。此外，我不想只是将它投射到我的 Razor 视图顶部的代码块中。

在 WebForms 中，我会做一些事情，比如把它作为一个基本页面，然后有一个用户控件，可以根据需要在页面上隐藏或显示。控制器与视图分离后，我不确定如何复制类似的行为。

这是可能的还是最好的设计方法是什么？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T20:58:42.327

Razor 视图相当简单。您与单个模型进行交互，该模型是强类型的。那么，任何你想在视图中强类型化的东西都需要在你的模型上。如果您的模型中有一些您不想要的东西或者是一次性的，那么`ViewBag`将作为所有非模型数据的通用包罗万象提供，这就是为什么它是动态的。强类型会限制它成为一个包罗万象的能力。

简短而简单：如果您想要强类型的消息添加到您的视图模型。否则，坚持`ViewBag`. 这些是你的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:22:12.167

我同意 Chris 的回答，我个人会将其放入 viewbag 中。

但只是为了扮演魔鬼的拥护者，从技术上讲，你可以改变规则......

**编辑：**现在想一想，您可能可以`HttpContext.Items`在下面替换为，`ViewBag`这样您在技术上仍然使用 ViewBag 进行存储，但只需添加一个包装器以赋予它温暖安全的强类型感觉。

例如，你可以有这样的东西：

```
namespace Your.Namespace
{
    public class MessageCollection : IMessageCollection
    {
        public IList<string> Errors { get; protected set; }
        protected MessageCollection()
        {
            //Initialization stuff here
            Errors = new List<string>();
        }

        private const string HttpContextKey = "__MessageCollection";
        public static MessageCollection Current
        {
            get
            {
                var httpContext = HttpContext.Current;
                if (httpContext == null) throw new InvalidOperationException("MessageCollection must be used in the context of a web application.");

                if (httpContext.Items[HttpContextKey] == null)
                {
                    httpContext.Items[HttpContextKey] = new MessageCollection();
                }

                return httpContext.Items[HttpContextKey] as MessageCollection;
            }
        }
    }
} 
```

然后像这样把它放在你的控制器中：

```
[HttpGet]
public ActionResult Index()
{
    MessageCollection.Current.AddError("Uh oh!");

    return View();
} 
```

或者你可以有一个带有快捷获取器的 BaseController ......例如

```
protected MessageCollection Messages { get { return MessageCollection.Current; } } 
```

然后在你的控制器中比从它继承

```
[HttpGet]
public ActionResult Index()
{
    Messages.AddError("Uh oh!");

    return View();
} 
```

要在您的视图中获取它，只需更改您的 web.config（您可能需要在几个地方执行此操作（即您的主 web.config、视图目录 web.config 和区域视图目录 web.config）

```
<system.web.webPages.razor>
  <!-- blah -->
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <!-- blah -->
      <add namespace="Your.Namespace" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

那么在你看来，你应该能够做到：

```
<div class="messages">
    @foreach (var error in MessageCollection.Current.Errors)
    {
        <span>@error</span>
    }
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T19:45:59.333

在 ASP.NET MVC 中，您可以随意使用`ViewBag`、、`ViewData`和`TempData`（有关更多信息，请参阅[此博客文章](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications "何时使用 ViewBag、ViewData、TempData")）。这`ViewBag`是`ViewData`字典的动态包装器。如果你这样做`ViewBag.Prop = "value"`，它相当于`ViewData["Prop"] = "value"`. 当您`Model`在视图中使用该属性时，您正在检索`ViewData.Model`. 寻找自己：

```
public abstract class WebViewPage<TModel> : WebViewPage
{
    private ViewDataDictionary<TModel> _viewData;
    public new AjaxHelper<TModel> Ajax { get; set; }
    public new HtmlHelper<TModel> Html { get; set; }
    public new TModel Model { get { return ViewData.Model; } }
} 
```

我们可以通过使用`ViewBag`或`ViewData`保留您的特殊属性来达到您的目的。第一步是`WebViewPage<TModel>`使用您想要的属性创建自定义派生：

```
public abstract class CustomWebViewPage<TModel> : WebViewPage<TModel>
{
    public IList<string> Messages 
    { 
        get { return ViewBag.Messages ?? (ViewBag.Messages = new List<string>()); }
    } 
} 
```

现在转到您的视图并将该行`@model YourModelClass`（第一行）替换为以下内容：

```
@inherits CustomWebViewPage<YourModelClass> 
```

您现在可以`Messages`在视图中使用该属性。

```
@String.Join(", ", Messages) 
```

要在您的控制器中使用它，您可能还想从`Controller`那里派生并添加该属性。

```
public abstract class CustomControllerBase : Controller
{
    public IList<string> Messages 
    {
        get
        {
            return ViewBag.Messages ?? (ViewBag.Messages = new List<string>());
        }
    } 
} 
```

现在，如果您从该控制器派生，则可以使用您的新属性。您放入列表中的任何内容也将在视图中提供给您。

```
public class ExampleController : CustomControllerBase
{
    public ActionResult Index()
    {
        Messages.Add("This is a message");
        return View();
    }
} 
```

我使用 ViewBag 是因为它使属性 getter 更短。`ViewData`如果您愿意，您可以使用 ( ) 做同样的事情`ViewData["Messages"]`。

这与实现方式并不完全相同，`Model`因为如果有人碰巧使用您正在保存的密钥，他们可能会意外覆盖您的属性，但如果您确保使用唯一的密钥，它就足够接近以在功能上等效。

如果您深入挖掘，您可能能够从中派生`ViewDataDictionary`并将您的属性放在那里，然后覆盖一些控制器和视图方法来使用它。那么您的属性将与 完全相同`Model`。但我会把它留给你——我认为这不值得。

# c# - SQLITE 中的外键失败

> ID：15579678
> 
> 赞同：0
> 
> 时间：2013-03-22T20:54:05.503
> 
> 标签：c#, sqlite

我正在尝试在三个表之间创建关系，但由于某种未指定的原因，它似乎失败了。当我创建一个一对一的关系时，它起作用了，多对一也起作用了，但是一个太多的关系失败了。简而言之，这是我的布局：

表 1 有两个字段，`name`一个是一些文本，`linkId`一个是非唯一整数。

表 3 有两个字段，`stat`一个是文本，`statId`一个是非唯一整数。

表 2 是链接表，它有两个字段`linkId`，`statId`它们都是唯一的，并且都引用了表 1 和表 3 中的相应值。

所以一些测试数据：

表格1：

```
name   linkId
"Test 1"   1
"Test 2"   1
"Test 3"   1
"Test 4"   1
"Test 5"   1 
```

表3：

```
stat linkId
"strength" 1
"intelligence" 1
"dexterity" 1 
```

表 2：

```
linkId statId
1         1 
```

为什么会失败？`1`表 2 中的s不应该引用`1`其他表中的 s 吗？请注意，如果我使表 1 字段`linkId`唯一，则它可以工作，但这不是我想要的工作方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:40:03.903

问题是 SQLITE 不支持引用表列不唯一的外键。我稍微改变了我的表格布局，它现在可以工作了。

# wcf - 基于现有 WSDL 和 XSD 创建 WCF 服务

> ID：15579680
> 
> 赞同：0
> 
> 时间：2013-03-22T20:54:15.993
> 
> 标签：wcf, wsdl, svcutil.exe

如果我使用 svcutil，我认为我无法生成服务器端代码，因为生成的所有接口都没有属性，`ServiceContract`所有模型类都没有属性。`DataContract``DataMember`

那么从现有 WSDL 创建 WCF 服务的最佳方式是什么？

# javascript - jQuery高度计

> ID：15579683
> 
> 赞同：1
> 
> 时间：2013-03-22T20:54:19.173
> 
> 标签：javascript, jquery

我想知道是否可以创建一种高度计/计数器显示，当您滚动时动态更改计数器。

例如，当您位于页面顶部时，它会显示 10 000，并且随着您向下滚动它会减小，直到您滚动到页面底部时它会变为 0。

它应该根据滚动工作，所以当你向上滚动时它会增加，向下滚动会减少，最大范围可以说是页面顶部的 10000 和底部的 0。

是否有一个简单的功能可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:01:45.677

我讨厌“gimme-codez”问题，但这实际上非常简单，一旦你弄清楚所有涉及的数学。关键函数是[`scrollTop()`](http://api.jquery.com/scrollTop)，它以像素为单位获取当前滚动位置，每次[`scroll`](http://api.jquery.com/scroll/)触发时您都会检索到该位置：

```
$(document).on('scroll',function(e) {
    var maxcount = 10000,
        scrollpos = $(document).scrollTop(),
        maxpos = $(document).height() - $(window).height(), // might be zero!
        counter = Math.round((maxpos-scrollpos)*(maxcount/maxpos)) || 0;
// (maxpos-scrollpos) counts backwards, while 
// (maxcount/maxpos) scales the result to a number
// between 0 and maxcount
    $('#counter').text(counter);
});

$(document).trigger('scroll'); // run at once 
```

[http://jsfiddle.net/mblase75/8MfzX/](http://jsfiddle.net/mblase75/8MfzX/)

如果页面太短而无法滚动，计数器将保持为零。如果您希望计数器`maxcount`在这种情况下，请这样说：

```
 maxpos = $(document).height()-$(window).height() || maxcount, 
```

[http://jsfiddle.net/mblase75/8MfzX/9/](http://jsfiddle.net/mblase75/8MfzX/9/)

# java - 休眠无休止的查询 - 球衣？

> ID：15579686
> 
> 赞同：0
> 
> 时间：2013-03-22T20:54:23.897
> 
> 标签：java, hibernate, netbeans

假设我有 2 个表（mysql）表 A：idA、姓名、电话

表 B：idB、data1、data2、idA

在表 B 中：idA 用作外键，它是通过 mysql 工作台配置的。

现在，我正在尝试将 Hibernate 与 jersy 一起使用（构建某种休息 API）

我正在使用 netbeans 作为我的 IDE。

最后如果得到：

1.  爪哇
2.  B.java
3.  一个.hbm.xml
4.  B.hbm.xml

B.hbm.xml

```
<many-to-one name="a" class="DataTypes.A"> 
    <column name="idA" length="45" not-null="true"  />
</many-to-one>
... 
```

在 B.java 中

```
public class B implements java.io.Serializable {

     private Integer idB;
     private A a;
     ...
} 
```

爪哇

```
public class User implements java.io.Serializable {

    private String idA;
    private String 
private Set<B> bs = new HashSet<B>(0);
     ....
} 
```

以及 A.hbm.xml 中的某些部分

```
<set name="bs" inverse="true">
    <key>
        <column name="idA" length="45" not-null="true" />
    </key>
    <one-to-many class="DataTypes.B" />
</set> 
```

主要问题是当我使用休眠来获取表A的所有条目时，结果是对所有A记录的休眠查询，并且对于每条记录，它在获得它的B（因为它的外键）之后寻找它的B（设置）它的外观再次对于它的A等等..

2个问题:)：这个递归有什么解决方案吗？还是我应该删掉这个循环引用？我的数据库模型可以吗？（外键）

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:04:58.200

您可以按如下方式配置您的 b.hbm.xml；

```
<many-to-one name="a" class="DataTypes.A" fetch="select"> 
    <column name="idA" length="45" not-null="true"  />
</many-to-one> 
```

和 a.hbm.xml；

```
<set name="bs" inverse="true" lazy="true" fetch="select">
    <key>
        <column name="idA" length="45" not-null="true" />
    </key>
    <one-to-many class="DataTypes.B" />
</set> 
```

它现在应该可以工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:04:25.907

您可以为这些关系指定延迟加载：http: [//docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-fetching-lazyproperties](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-fetching-lazyproperties)

# javascript - 快速按钮与消除 ios UIWebView 上的触摸延迟？

> ID：15579689
> 
> 赞同：1
> 
> 时间：2013-03-22T20:54:33.930
> 
> 标签：javascript, ios, uiwebview

我有一个适用于 ios 的 webapp。我想实现所谓的“快速点击按钮”，例如：

[http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone](http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone) [https://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)

但我从其他帖子中看到，在 ios5 中，我们可以访问属于 UIWebView 的 UIScrollView，以便我们可以消除点击延迟。我们可以通过以下方式做到这一点：

[UIwebView 链接延迟](https://stackoverflow.com/questions/6471188/uiwebview-links-delay)

```
[webView.scrollView setDelaysContentTouches:NO] 
```

这是现在推荐的方法吗？这似乎要简单得多，因为我只针对 ios。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T14:35:25.857

据我所知， setDelaysContentTouches 并没有消除 300 毫秒的延迟。至少，它没有在我的测试中。但是，链接到的 javascript 解决方案确实对我有用。

# mysql - Cakephp Mysql 查找非重复值

> ID：15579691
> 
> 赞同：0
> 
> 时间：2013-03-22T20:54:39.423
> 
> 标签：mysql, cakephp

我有下表名为`persons`. 我只需要找出唯一（非重复）的金额。

```
 id | amount
     1  | 20
     2  | 20
     3  | 30 
```

我试着做`$this -> Person -> find('all', array('fields' => 'DISTICT amount'));`

在输出中，我得到了 20、30 而不是只有 30。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:39:52.107

不是“完整”的答案，但这可能会对您有所帮助。在普通的 SQL 中，这应该是这样的；

```
SELECT amount, COUNT(*) FROM persons GROUP BY amount HAVING COUNT(*) = 1 
```

这应该返回所有“唯一”金额（请测试是否返回正确的信息）。

也许这对你有帮助，但是我不在我的电脑上尝试将其重写为 CakePHP`find()`

# php - PDO MySQL每次插入两次？

> ID：15579692
> 
> 赞同：1
> 
> 时间：2013-03-22T20:54:39.563
> 
> 标签：php, mysql, pdo

每次填写表格，系统都会向表格中插入两次数据？为什么会这样？

```
// This checks if variabes are not empty, and if username is less than 11 characters long.
if (!empty($username) && !empty($password) && !empty($message) && strlen($username) < 11) {

    // Shortcut for our ID generator function.
    $ID = generateID();

    // Now lets insert (register the account) these datas to our database.
    $insert = $connect->prepare(
    "INSERT INTO users ( 
        username, 
        password, 
        message, 
        `date`, 
        `time`, 
        id
    ) VALUES ( 
        :username, 
        :password, 
        :message, 
        CURDATE(), 
        CURTIME(), 
        :id 
    )");

    // Executing in array, because if we binded all these variables, it would look very bad.
    $insert->execute(array(
        ':username' => $username,       
        ':password' => $password, 
        ':message' => $message, 
        ':id' => $ID
    ));

    if (!$insert->execute()) {
        print_r($insert->errorInfo());
    }       
}
// Let's check if errors is not empty.
else if (!empty($errors)) 
{
    // Now let's use a loop to get all of the error messages set in the array.
    foreach ($errors as $error) {
        echo $error;
    }
} 
```

我对 PDO 很陌生，这是我第一次完成 PDO 连接、执行、查询。我没看出有什么问题吗？谢谢。

生成标识函数

```
 $nums = substr(hash('sha512', '123456789'), 0, 20);
    $ID = str_shuffle($nums);
    return $ID; 
```

处理错误函数

```
function handleErrors() {
    // Create new array to handle errors
    $errors = array();

    // Setting our errors

    // If username is empty, set error.
    if (empty($username)) {
        $errors[] = 'Username is empty';
    } 
    // If password is empty, set error.
    else if (empty($password)) 
    {
        $errors[] = 'Password is empty';
    } 
    // If username length is more than 11, set error.
    else if (strlen($username) > 11)
    {
        $errors[] = 'Your username is more than 11 characters long';
    }
} 
```

杂项：

```
<?php
require('inc/config.inc.php');
require('inc/session.inc.php');
include('inc/functions.inc.php');
?>

<html>
<h1>Recover</h1>
<br />

<form action="recover.php" method="POST">
    Your name: <input type="text" name="username"><br />
    Password for this recover: <input type="password" name="password"><br />
    Your Message: <input type="text" name="message"><br />
    <input type="submit" name="submit"><br />
</form>

<?php
    // Check if isset, also fixes the php notices error.
    if (isset($_POST['username']) && isset($_POST['password']) && isset($_POST['message'])) {
        // Created shortcuts for the POSTs we currently have.
        $username = $_POST['username'];
        $password = $_POST['password'];
        $message = $_POST['message'];
    }

    // Let's call our error handling function from functions.inc.php - before we doing the checking.

    handleErrors(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T21:04:48.363

您正在调用 insert->execute 两次：

```
$insert->execute(array(
    ':username' => $username,       
    ':password' => $password, 
    ':message' => $message, 
    ':id' => $ID
));

if (!$insert->execute()) {
    print_r($insert->errorInfo());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T21:04:45.483

你正在执行两次。

```
$insert->execute(array(... 
```

和

```
if (!$insert->execute()) { ... 
```

你想要的是

```
if( !$insert->execute(array(
    ':username' => $username,       
    ':password' => $password, 
    ':message' => $message, 
    ':id' => $ID)) ) {
        print_r($insert->errorInfo());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:13:04.673

你正在执行两次，

1) 使用 Try Catch 语句检查错误

2) 或者您可以填充数组，然后在 if (!$insert->execute()) { ..

3）您可以运行一次并检查数据库中的affected_rows，这将告诉您该命令是否已执行。

# css - 页面中的所有元素是否有 CSS 选择器？

> ID：15579695
> 
> 赞同：0
> 
> 时间：2013-03-22T20:54:51.090
> 
> 标签：css

我熟悉在 CSS 中用作通配符的星号。

我的问题是： **对于页面的绝对所有（我的意思是 html、body 以及每一个后代、直接或其他）元素是否有一个 CSS 选择器？**

我努力了：

```
*
{
    color: green; /*Used this just to test and see if it worked, but didn't*/
} 
```

这在 CSS 中可能吗？

请不要问我为什么要这样做，哈哈：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:00:36.640

`*`通用选择器会*选择*每个元素，包括根`<html>`元素及其所有后代。

您还可以将它们组合起来，就像`* *`选择根元素 ( ) 的*子*`<body>`元素及其所有后代并`* * *`设置下一代及其所有后代的样式一样。

或者你可以只设置一个 div 的孙子和下面的样式：`div * * {color: lemonchiffon;}`

[**例子**](http://jsfiddle.net/mRSWd/1/)

# couchdb - 如何获取在给定日期有效的所有 CouchDB 文档的列表？

> ID：15579697
> 
> 赞同：0
> 
> 时间：2013-03-22T20:55:01.940
> 
> 标签：couchdb

我有大量文件，每个文件的有效期为几天。范围可以从 1 周到 1 年。我希望能够获得在特定日期有效的所有文件。

我该怎么做？

例如说我有以下两个文件：

```
doc1 = {
  // 1 year ago to today
  start_at: "2012-03-22T00:00:00Z",
  end_at: "2013-03-22T00:00:00Z"
}

doc2 = {
  // 2 months ago to today
  start_at: "2012-01-22T00:00:00Z",
  end_at: "2013-03-22T00:00:00Z"
} 
```

还有一个地图功能：

```
(doc) ->
  emit([doc.start_at, doc.end_at], null) 
```

因此，对于 6 个月前的日期，我只会得到 doc1，而在 1 周前的日期，我会得到两份文件，而在明天的日期，我将不会收到任何文件。

请注意，实际解析需要精确到发出请求的第二个，并且有很多文档，因此为每个有效秒发出一个密钥的策略是不合适的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:14:58.623

您可以为您范围内的每一天调用 emit，然后您可以轻松地挑选出特定日期可用的文档。

```
function(doc) {
    var day = new Date(doc.start),
        end = new Date(doc.end).getTime();

    do {
        emit(day);
        day = new Date(day.getFullYear(), day.getMonth(), day.getDate() + 1);
    } while (day.getTime() <= end);
} 
```

即使您将有很多文档，如果您省略了发出的值部分（第二个参数），索引将尽可能小。

如果您需要更复杂，可以尝试[couchdb-lucene](https://github.com/rnewson/couchdb-lucene)。您可以将日期字段索引为日期对象，并在 1 个请求中使用多个字段执行范围查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:35:37.220

您可以将问题转化为位置的计算几何问题。对于二维平面中的文档，`[x,y]=[start_at,end_at]`在日期有效的文档是由( ) 和( )`date`包围的矩形中的点列表。`left=-infinity, right=date``start_at<date``bottom=date, top=infinity``end_at>date`

不幸的是，CouchDB 团队低估了计算几何的力量，并且不支持多维查询。有一个 GeoCouch 扩展，可以让您像这样简单地进行此类查询：

```
http://localhost:5984/places/_design/main/_spatial/points?bbox=0,0,180,90 
```

在发射空间值的视图上：

```
emit({ type: "Point", coordinates: [doc.start_at, doc.end_at] }, doc); 
```

问题是不同的数据类型。`[-180.0,180.0]/[-90.0,90.0]`您至少需要在范围内浮动`int`（UNIX 时间格式）。如果 GeoCouch 在更大的范围内为您工作，`180.0`并且为地理计算设计的浮点运算的精度足以满足精度为秒的日期，那么您的问题就解决了 :) 我敢肯定，只需很少的技巧和技巧，您就可以有效地解决这个问题地理软件。如果不是 GeoCouch，那么可能是 ElastiSearch（也支持多维查询），它很容易与带有 River 插件系统的 CouchDB 一起使用。

# java - 最佳路径 googleMaps

> ID：15579700
> 
> 赞同：0
> 
> 时间：2013-03-22T20:55:20.490
> 
> 标签：java, android, google-maps, google-maps-api-3

我需要创建一个应用程序来识别一个人的最佳路径。但它需要确定上坡和下坡的重要性。

如何获得这条路径的信息是直的？

这个应用程序适用于安卓。坦克！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:03:15.560

查看[高程 API](https://developers.google.com/maps/documentation/elevation/)

和[距离矩阵 API](https://developers.google.com/maps/documentation/distancematrix/)

距离 API 可能是您唯一需要的。

路线信息将由[Directions API获取](https://developers.google.com/maps/documentation/directions/)

3 之间的组合可能有点必要，但是一旦您将 HttpClient 设置到 google 服务器，您就可以创建后端 Web 服务调用来获取您在 android 手机上需要的信息。

# php - 将一个数组拆分为 N 个数组 - PHP

> ID：15579702
> 
> 赞同：26
> 
> 时间：2013-03-22T20:55:28.490
> 
> 标签：php, arrays, multidimensional-array, split

我有一个包含 18 个值的数组：

```
$array = array('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r'); 
```

我想将此数组拆分为 12 个不同的数组，因此它应如下所示：

```
array(
    0 => array('a', 'b'),
    1 => array('c', 'd'),
    2 => array('e', 'f'),
    3 => array('g', 'h'),
    4 => array('i', 'j'),
    5 => array('k', 'l'),
    6 => array('m'),
    7 => array('n'),
    8 => array('o'),
    9 => array('p'),
   10 => array('q'),
   11 => array('r')
) 
```

我的功能似乎不起作用

```
function array_split($array, $parts){
    return array_chunk($array, ceil(count($array) / $parts));
}

$result = array_split($array, 12); 
```

因为我得到 9 个不同的数组而不是 12 个。它会返回

```
array(
    0 => array('a', 'b'),
    1 => array('c', 'd'),
    2 => array('e', 'f'),
    3 => array('g', 'h'),
    4 => array('i', 'j'),
    5 => array('k', 'l'),
    6 => array('m', 'n'),
    7 => array('o', 'p'),
    8 => array('q', 'r')
) 
```

我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-02T18:44:00.287

这个简单的功能会为你工作：

**用法**

```
$array = range("a", "r"); // same as your array
print_r(alternate_chunck($array,12)); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
        )

    [1] => Array
        (
            [0] => c
            [1] => d
        )

    [2] => Array
        (
            [0] => e
            [1] => f
        )

    [3] => Array
        (
            [0] => g
            [1] => h
        )

    [4] => Array
        (
            [0] => i
            [1] => j
        )

    [5] => Array
        (
            [0] => k
            [1] => l
        )

    [6] => Array
        (
            [0] => m
        )

    [7] => Array
        (
            [0] => n
        )

    [8] => Array
        (
            [0] => o
        )

    [9] => Array
        (
            [0] => p
        )

    [10] => Array
        (
            [0] => q
        )

    [11] => Array
        (
            [0] => r
        )

) 
```

**更新**上面可能对大多数情况没有用......这是另一种类型的块

```
$array = range("a", "r"); // same as your array
print_r(fill_chunck($array, 5)); 
```

输出

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
            [2] => c
            [3] => d
        )

    [1] => Array
        (
            [0] => e
            [1] => f
            [2] => g
            [3] => h
        )

    [2] => Array
        (
            [0] => i
            [1] => j
            [2] => k
            [3] => l
        )

    [3] => Array
        (
            [0] => m
            [1] => n
            [2] => o
            [3] => p
        )

    [4] => Array
        (
            [0] => q
            [1] => r
        )

) 
```

这将确保该组在任何时候都不会超过 5 个元素，而另一个则没有限制

**使用的功能**

```
function alternate_chunck($array, $parts) {
    $t = 0;
    $result = array();
    $max = ceil(count($array) / $parts);
    foreach(array_chunk($array, $max) as $v) {
        if ($t < $parts) {
            $result[] = $v;
        } else {
            foreach($v as $d) {
                $result[] = array($d);
            }
        }
        $t += count($v);
    }
    return $result;
}

function fill_chunck($array, $parts) {
    $t = 0;
    $result = array_fill(0, $parts - 1, array());
    $max = ceil(count($array) / $parts);
    foreach($array as $v) {
        count($result[$t]) >= $max and $t ++;
        $result[$t][] = $v;
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-11-03T10:14:27.377

## 请允许我成为第一个提供基于数学的无环解决方案的人。

数学中的魔力在于确定元素的哪一部分属于第一组块，其中所有列都填充在每一行中，哪些元素属于第二组（如果该组甚至应该存在），除了最右边的所有列列已填满。

让我画出我在说什么。`>`标记两个分块数组之间的划分。

```
$size = 9;        -------------    $size = 9;        -------------
$maxRows = 4;   1 | A , B , C |    $maxRows = 3;     | A , B , C |
$columns = 3;   > |-----------|    $columns = 3;   1 | D , E , F |
$fullRows = 1;    | D , E |        $fullRows = 3;    | G , H , I |
                2 | F , G |                        > -------------
                  | H , I |                        2      n/a
                  ---------

$size = 18;        ---------    $size = 17;       -------------------------------------
$maxRows = 12;     | A , B |    $maxRows = 2;   1 | A , B , C , D , E , F , G , H , I |
$columns = 2;      | C , D |    $columns = 9;   > -------------------------------------
$fullRows = 6;     | E , F |    $fullRows = 1;  2 | J , K , L , M , N , O , P , Q |
                 1 | G , H |                      ---------------------------------
                   | I , J |
                   | K , L |
                 > ---------
                   | M |
                   | N |
                   | O |
                 2 | P |
                   | Q |
                   | R |
                   ----- 
```

代码：（[演示](https://3v4l.org/k9e6Y)）

```
function double_chunk($array, $maxRows) {
    $size = count($array);
    $columns = ceil($size / $maxRows);
    $lessOne = $columns - 1;
    $fullRows = $size - $lessOne * $maxRows;

    if ($fullRows == $maxRows) {
        return array_chunk($array, $fullRows);  // all columns have full rows, don't splice
    }
    return array_merge(
               array_chunk(
                   array_splice($array, 0, $columns * $fullRows),  // extract first set to chunk
                   $columns
               ),
               array_chunk($array, $lessOne)   // chunk the leftovers
           );
}
var_export(double_chunk(range('a', 'i'), 3)); 
```

* * *

如果您不介意迭代`array_splice()`调用，这会更简短，也许更容易理解（......也许不是）：

代码：（[演示](https://3v4l.org/80YaE)）

```
function custom_chunk($array, $maxRows) {
    $size = count($array);
    $columns = ceil($size / $maxRows);
    $lessOne = $columns - 1;
    $fullRows = $size - $lessOne * $maxRows;

    for ($i = 0; $i < $maxRows; ++$i) {
        $result[] = array_splice($array, 0, ($i < $fullRows ? $columns : $lessOne));
    }
    return $result;
}
var_export(custom_chunk(range('a', 'r'), 12)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-03T10:10:10.630

您可以使用`array_chunk`and`array_merge`来解决这个问题：

```
<?php 

$array = array('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r');
$chunked_arr = array_chunk($array,12);
$j = 0;
for($i = 0; $i < count($chunked_arr[0]); $i++){
    if(!($i % 2 == 0)){
        $first_combined[$j][$i % 2] = $chunked_arr[0][$i];
        $j++;
    } else {
    $first_combined[$j][$i % 2] = $chunked_arr[0][$i];
    }
}

$merged_array = array_merge($first_combined, $chunked_arr[1]); 

echo '<pre>';
print_r($merged_array);
 ?> 
```

你会得到这样的结果：

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
        )

    [1] => Array
        (
            [0] => c
            [1] => d
        )

    [2] => Array
        (
            [0] => e
            [1] => f
        )

    [3] => Array
        (
            [0] => g
            [1] => h
        )

    [4] => Array
        (
            [0] => i
            [1] => j
        )

    [5] => Array
        (
            [0] => k
            [1] => l
        )

    [6] => m
    [7] => n
    [8] => o
    [9] => p
    [10] => q
    [11] => r
) 
```

这正是你想要的。

[现场演示在这里>>](http://codepad.viper-7.com/pKy8Xe)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T21:08:41.857

`ceil(count($array) / $parts)`会给出 2，所以每个数组都被 2 个项目填满，直到你没有 2 个项目。因此最后一个有 1 个项目。当您在数组中有大量数据时，这将起作用，但当您有少量数据时就不行了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T21:08:50.767

您所描述的不是 array_chunk 的用途。您应该使用[array_slice()](http://www.php.net/manual/en/function.array-slice.php)并自己计算要作为新数组结束的数组部分。（并使用 for 循环遍历您的原始数组）

更新：

一些可以帮助你的计算：

```
minimum_fill = floor(array_length / nr_buckets)
bigger_buckets_amount = array_length - (minimum_fill / nr_buckets) 
```

填充桶的算法：遍历数组，用 填充第一`bigger_buckets_amount`数量的桶`(minimum_fill + 1)`，用 填充其余的桶`minimum_fill`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T22:14:35.927

编译它，看看它是否适合你：

```
<?php

$array = array('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm');

$sliceA = 0;
$sliceB = 2;

$final = array(array_slice($array, $sliceA, $sliceB));

for ($i=$sliceB; $i<sizeof($array); $i++)
{
    $final[$sliceB-1] = array($array[$i]);
    $sliceB++;
}

var_dump($final); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-05T11:30:52.247

```
<?php
$array = range('a','r');
$length = array(2=>6,1=>6); // 2=>6 means -- first six elements of new array will have 2 elements each and then, 1=>6 means -- next six elements of new array will have 1 element each
$target = array(); // or use []  in PHP 5.4
foreach($length as $i=>$times) {
    while($times>0){
        $target[] = array_splice($array, 0, $i);
        $times--;
    }
}
print_r($target);
?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-17T12:01:31.653

```
<?php
function slotify($array, $length)
{
    // Create a placeholder array and calculate the number of items
    // needed per slot (think card dealing LtoR).
    for(
        $slots = array_fill(0, $length, 0), $count=count($array), $i=0;
        $i<$count;
        $slots[$i % $length]++, $i++
    );

    // Now just take slices of the original array
    // depending on the calculated slot number and place in our slots
    foreach($slots as $k => $n) {
        $slots[$k] = array_splice($array, 0, $n);
    }

    return $slots;
}

var_export(slotify(['a','b','c','d','e','f'], 4)); 
```

输出：

```
array (
  0 => 
  array (
    0 => 'a',
    1 => 'b',
  ),
  1 => 
  array (
    0 => 'c',
    1 => 'd',
  ),
  2 => 
  array (
    0 => 'e',
  ),
  3 => 
  array (
    0 => 'f',
  ),
) 
```

`$slots`对于上面的示例，包含所需项目数量的中间数组如下所示：

```
array (
  0 => 2,
  1 => 2,
  2 => 1,
  3 => 1,
) 
```

如果您研究中间数组的不同组合。您需要计算出块大小变化的边界点。我的解决方案倾向于以下，这几乎是 mickmacusa 的最终解决方案。但这需要理解问题。

```
function slotify($array, $length)
{
    $count      = count($array);
    $chunk_size = ceil($count/$length);
    $boundary   = $count % $length;

    if($boundary === 0)
        $boundary = $length;

    for($i=0; $i<$length; $i++) {
        if($i === $boundary)
            $chunk_size--;
        $result[$i] = array_splice($array, 0, $chunk_size);
    }

    return $result;
} 
```

可以进行进一步的改进，切片可能比拼接更有效，如果您可以在整个阵列中均匀分布，您可以使用快捷方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-29T08:55:00.927

*这将为您做到！
在这里，我使用我的函数 smallify() 将一个包含 15 个元素的数组分解为 3 个数组，每个数组包含 5 个元素。*

```
<?php

$bigArray = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15);

echo ("<pre>");
print_r (smallify($bigArray, 3));
echo ("<pre/>");

function smallify($arr, $numberOfSlices){

  $sliceLength = sizeof($arr) /$numberOfSlices;
  for($i=1; $i<=$numberOfSlices; $i++){

       $arr1 = array_chunk($arr, $sliceLength*$i);
       return $arr1;
       unset($arr1);

   }

}
?> 
```

**结果**

```
Array
(
[0] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 3
        [3] => 4
        [4] => 5
    )

[1] => Array
    (
        [0] => 6
        [1] => 7
        [2] => 8
        [3] => 9
        [4] => 10
    )

[2] => Array
    (
        [0] => 11
        [1] => 12
        [2] => 13
        [3] => 14
        [4] => 15
    )

) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-05-05T19:33:50.620

我相信问题在于您在使用 array_chunk 时使用了 2 的大小。如果可能，这确保创建的每个新数组都包含两个项目。这会导致函数在您达到 10 时用完要放入新数组的变量。您可以在此处找到函数手册[http://php.net/manual/en/function.array-chunk。 php](http://php.net/manual/en/function.array-chunk.php) 希望这有帮助

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-12-01T09:43:18.240

您可以尝试使用以下简单功能吗？

$cols = array2cols($array,12);

```
function array2cols($array,$n){
    $groups = array();
    for($i=0;$i<$n;$i++){
        $groups[$i] = array();
    }
    $col = 0;
    foreach($array as $row){
        $groups[$col][] = $row;
        $col = ($col+1)%$n;
    }
    return $groups;
} 
```

# php - 我怎样才能做与“任何”相同的事情？在 Ruby 中在 PHP 中

> ID：15579706
> 
> 赞同：1
> 
> 时间：2013-03-22T20:55:51.607
> 
> 标签：php

在 Ruby 中，`any?`获取一个块并检查给定集合是否具有满足该块的值，如下所示：

```
[1, 2, 3].any? {|v| v > 2} # true 
```

有没有办法在 PHP 中做到这一点？我目前的想法是使用`array_reduce()`：

```
array_reduce(array(1, 2, 3), function($acc, $val) {
    return $acc || ($val > 2);
}, false); 
```

但它会迭代数组中的所有元素，所以我猜它不如“任何？” 在红宝石。一旦在 PHP 中找到预期值，如何返回布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:00:18.693

你对函数式编程太热衷了。PHP 不是函数式语言；至少这不是它的主要工作。

```
$array = array(1,2,3);
foreach ($array as $value) {
    if ($value > 2) return $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:00:26.320

```
function any(array $array, callable $test) {
    foreach ($array as $value) {
        if ($test($value)) {
            return true;
        }
    }
    return false;
} 
```

您可以改用简单的`array_filter`，但它每次都会迭代整个数组：

```
if (array_filter($array, function ($v) { return $v > 2; })) ... 
```

# c++ - C++ 在类中声明动态数组（无符号字符和结构）？

> ID：15579709
> 
> 赞同：0
> 
> 时间：2013-03-22T20:56:00.883
> 
> 标签：c++

在类中声明动态结构和无符号字符数组的正确方法是什么？

```
#define GENDER_MALE 0
#define GENDER_FEMALE 1

class c_House {
    public:
        c_House();

        c_House( unsigned int in_BedRoomCount,
                 short in_FloorCount,
                 const char* in_Address,
                 unsigned int in_PeopleCount ) :
                 BedRoomCount( in_BedRoomCount ),
                 FloorCount( in_FloorCount ),
                 Address( in_Address ),
                 PeopleCount( in_PeopleCount )
        {
            this->Array = new unsigned char[ in_BedRoomCount ];
            this->People = new PEOPLE[ in_PeopleCount ];
        };
        ~c_House() { delete[] this->Array; };
    // PROPERTIES
    private:
        struct PERSON {
            unsigned short Age;
            const char* Name;
            unsigned short Gender;
        };
        unsigned int BedRoomCount;
        short FloorCount;
        const char* Address;
        unsigned char* Array;
        unsigned int PeopleCount;
        PERSON *People;

    // ACTIONS
    private:
        void OpenGarage( bool in_Open );
        void Vacuum();
}; 
```

我应该如何声明一个动态数组（int 和 struct）？我知道这会很危险——想想深拷贝等等：

```
this->Array = new unsigned char[ in_BedRoomCount ];
this->People = new PEOPLE[ in_PeopleCount ]; 
```

这是删除 int 数组的正确方法吗？

```
~c_House() { delete[] this->Array; }; 
```

结构数组呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:58:18.003

正确的做法是用`std::string`代替动态数组，用动态`char`数组`std::vector<PERSON>`代替`PERSON`.

如果你在一个类中有动态和手动分配的数据，你必须确保你遵循[*三个规则*](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)，即实现一个复制构造函数、赋值操作符和析构函数来执行数据的“深度复制”。这是为了确保您的类的每个实例都拥有其动态分配的数据，并使复制和分配安全。在 C++11 中，这被推广到*五规则*。

一个不相关的问题：包含前导下划线或任何位置的双下划线的名称保留用于实现。所以你不应该给你的变量名称，例如`in__PeopleCount`.

# c# - 本地字符串变量的实例化会影响性能吗？

> ID：15579714
> 
> 赞同：3
> 
> 时间：2013-03-22T20:56:43.593
> 
> 标签：c#, string, performance, initialization, il

我有两种情况：

```
 static void CreateCopyOfString()
    {
        string s = "Hello";
        ProcessString(s);
    } 
```

和

```
 static void DoNotCreateCopyOfString()
    {
        ProcessString("Hello");
    } 
```

这两种情况的 IL 如下所示：

```
 .method private hidebysig static void  CreateCopyOfString() cil managed
    {
        // Code size       15 (0xf)
        .maxstack  1
        .locals init ([0] string s)
        IL_0000:  nop
        IL_0001:  ldstr      "Hello"
        IL_0006:  stloc.0
        IL_0007:  ldloc.0
        IL_0008:  call       void ConsoleApplication1.Program::ProcessString(string)
        IL_000d:  nop
        IL_000e:  ret
    } // end of method Program::CreateCopyOfString 
```

和

```
 .method private hidebysig static void  DoNotCreateCopyOfString() cil managed
    {
          // Code size       13 (0xd)
          .maxstack  8
          IL_0000:  nop
          IL_0001:  ldstr      "Hello"
          IL_0006:  call       void ConsoleApplication1.Program::ProcessString(string)
          IL_000b:  nop
          IL_000c:  ret
    } // end of method Program::DoNotCreateCopyOfString 
```

在第一种情况下，需要额外调用`string init`,`stloc.0`和`ldloc.0`。这是否意味着第一种情况会比第二种情况下的表现要弱，后者将字符串直接传递给方法而不是首先将其存储在局部变量中？

我看到了问题[是否初始化具有 null 的局部变量会影响性能？](https://stackoverflow.com/questions/4751535/does-initialization-of-local-variable-with-null-impacts-performance)但这似乎与我在这里需要知道的有点不同。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T20:58:56.897

一方面，您正在查看未优化的 IL - 因此所有“nop”。您*可能会*发现它在构建发布版本时会生成不同的代码。

即使使用未优化的版本，如果您在优化的 JIT 下运行，我希望它最终会得到相同的 JIT 代码。

即使有一个非优化的 JIT*确实*生成了每次调用它时做更多工作的代码，我也会惊讶地看到这对任何实际应用程序都有重大影响。

如从前：

*   在开始之前设定绩效目标，并根据它们进行*衡量*。
*   找出哪些决策在以后的性能方面将难以修复，并且比这样的决策更担心这些决策，这些决策可以在以后更改而不会影响其他地方。
*   编写最简单、最易读的代码。
*   *如果*这还不够好，请调查是否做出损害可读性的更改有助于性能足以保证痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:05:11.447

不，它不会影响性能。您可以通过验证为两者生成的机器代码是否相同来确认这一点。请注意，在优化的 JIT 中，ProcessString 可能是内联的。为避免这种情况，您可以添加`[MethodImpl(MethodImplOptions.NoInlining)]`. 编译优化（发布）构建。

1.  在 WinDbg 中打开可执行文件。根据您的 EXE 使用匹配的 32 位或 64 位版本。
2.  `sxe ld clrjit`加载 clrjit.dll 时键入以中断。键入`g`以继续直到休息。
3.  加载 SOS 与`.loadby sos clr`. 请注意，对于早期的 CLR 版本，您需要使用 mscorwks 而不是 clr。
4.  用 查找方法表的地址`!name2ee * <full class name>`。
5.  键入`!dumpmt -md <address of MethoTable>`以转储方法详细信息。注意此时 CreateCopyOfString 和 DoNotCreateCopyOfString 尚未 JITed。
6.  调用方法时键入`!bpmd <full class name>.CreateCopyOfString`和`!bpmd <full class name>.DoNotCreateCopyOfString`中断。键入`g`以继续。也可以`!bpmd -md <address of MethodDesc>`用来设置断点。
7.  命中断点时，键入`!u <address of MethodDesc>`以转储该方法的机器代码。

请注意，当我尝试这个时，只有一种方法是 JITed，大概是因为运行时确定这两种方法是相同的，而 JITing 另一个是不必要的。因此，我适当地注释掉了调用并重复获取机器代码。

实际的寄存器和地址会有所不同，但两种方法都会产生以下机器代码：

```
sub     rsp,28h
mov     rcx,121E3258h
mov     rcx,qword ptr [rcx]
call    000007fe`9852c038
nop
add     rsp,28h
ret 
```

因此，您可能会得出结论，由于正在执行相同的机器代码，因此任何一种方法的性能都是相同的。

# java - 如何将 currentMinute 和 currentHour 合并到一个文本字段中，以便以正常时间格式显示 [ex 9:30]

> ID：15579715
> 
> 赞同：0
> 
> 时间：2013-03-22T20:56:44.407
> 
> 标签：java, android, eclipse, sqlite, timepicker

我有一个应用程序，它将 TimePicker 中的 CurrentHour 和 CurrentMinute 存储在 sqlite 数据库中，然后将其显示在另一个活动 ViewCountry java

我想在 9:30 合并这两个字段并将它们一起显示 - 例如在

```
<TextView 
   android:id="@+id/codeText"
   style="@style/StyleText"/> 
```

view_country xml

```
add_country xml
=================

        <?xml version="1.0" encoding="utf-8"?>
        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" android:layout_weight="1">

        <LinearLayout android:id="@+id/linearLayout"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:orientation="vertical" 
          android:padding="5dp">

          <EditText android:id="@+id/nameEdit"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content" 
             android:imeOptions="actionNext" 
             android:hint="@string/name_hint"
             android:inputType="textPersonName|textCapWords"/>

          <EditText android:id="@+id/capEdit"
             android:layout_width="fill_parent" 
             android:layout_height="wrap_content" 
             android:imeOptions="actionNext" 
             android:hint="@string/cap_hint"
             android:inputType="textPersonName|textCapWords"/>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Data Limit"
            android:textColor="#ffffff"
            android:textAppearance="?android:textAppearanceMedium" />

        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:gravity="left"
                android:textColor="#ffffff"
                android:text="10MB" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:gravity="right"
                android:textColor="#ffffff"
                android:text="Unlimited Data" />
        </LinearLayout>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Bandwidth Limit"
            android:textColor="#ffffff"
            android:textAppearance="?android:textAppearanceMedium" />

        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:gravity="left"
                android:textColor="#ffffff"
                android:text="10kbs" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:textColor="#ffffff"
                android:gravity="right"
                android:text="Unlimited Bandwidth" />
        </LinearLayout>

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:textAppearanceSmall" />

         <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="WiFi Time Limit"
            android:textColor="#ffffff"
            android:textAppearance="?android:textAppearanceMedium" />

        <TimePicker
            android:id="@+id/timeEdit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:layout_weight="1.0" />

         <EditText
            android:id="@+id/codeEdit"
            android:inputType="textUri"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:lines="1"
            android:hint="@string/code_hint"
            android:imeOptions="actionNext" />

          <Button android:id="@+id/saveBtn" 
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginTop="15dp"
             android:layout_gravity="center_horizontal"
             android:text="@string/save_btn"/>
        </LinearLayout>
        </ScrollView>

**ADDEDITCOUNTRY** 
============================
 quite possible minute values from TimePicker here are messing things up

    import android.app.Activity;
    import android.app.AlertDialog;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.ViewGroup;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.FrameLayout;
    import android.widget.TimePicker;
    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.content.Context;

    public class AddEditCountry extends Activity {

         private long rowID; 
         private EditText nameEt;
         private EditText capEt;
         private EditText codeEt;
         private TimePicker timeEt;
         private TimePicker minEt;
         private String cHour;
         private String cMinute;
         private String normalTimeFormat;

           @Override
           public void onCreate(Bundle savedInstanceState) 
           {
              super.onCreate(savedInstanceState); 
              setContentView(R.layout.add_country);

              nameEt = (EditText) findViewById(R.id.nameEdit);
              capEt = (EditText) findViewById(R.id.capEdit);
              codeEt = (EditText) findViewById(R.id.codeEdit);
              timeEt = (TimePicker) findViewById(R.id.timeEdit);
              minEt = (TimePicker) findViewById(R.id.timeEdit);

              Bundle extras = getIntent().getExtras(); 

              if (extras != null)
              {
                 rowID = extras.getLong("row_id");
                 nameEt.setText(extras.getString("name"));  
                 capEt.setText(extras.getString("cap"));  
                 codeEt.setText(extras.getString("code"));  
                 timeEt.setCurrentHour(extras.getInt("time"));
                 minEt.setCurrentMinute(extras.getInt("min"));
              }

              Button saveButton =(Button) findViewById(R.id.saveBtn);
              saveButton.setOnClickListener(new OnClickListener() {

                  public void onClick(View v) 
                  {
                     if (nameEt.getText().length() != 0)
                     {
                        AsyncTask<Object, Object, Object> saveContactTask = 
                           new AsyncTask<Object, Object, Object>() 
                           {
                              @Override
                              protected Object doInBackground(Object... params) 
                              {
                                 saveContact();
                                 return null;
                              }

                              @Override
                              protected void onPostExecute(Object result) 
                              {
                                 finish();
                              }
                           }; 

                        saveContactTask.execute((Object[]) null); 
                     }

                     else
                     {
                        AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                        alert.setTitle(R.string.errorTitle); 
                        alert.setMessage(R.string.errorMessage);
                        alert.setPositiveButton(R.string.errorButton, null); 
                        alert.show();
                     }
                  } 
             });
           }

               private void saveContact() 
               {
                  DatabaseConnector dbConnector = new DatabaseConnector(this);

                  if (getIntent().getExtras() == null)
                  {
                      dbConnector.insertContact(nameEt.getText().toString(),
                              capEt.getText().toString(),
                              timeEt.getCurrentHour().toString(),
                              minEt.getCurrentMinute().toString(),
                              codeEt.getText().toString());
                  }
                  else
                  {
                      dbConnector.updateContact(rowID,
                              nameEt.getText().toString(),
                              capEt.getText().toString(),

                              String cHour = timeEt.getCurrentHour().toString(), /* Storing as String*/
                              String cMinute = minEt.getCurrentMinute().toString(), 
                              String normalTimeFormat = cHour + ":" + cMinute;

                              //Do whatever you want to do with normalTimeFormat

                              codeEt.getText().toString());
                        }
               }
    }

**DATABASECONNECTOR JAVA**
=========================

     import android.content.ContentValues;
     import android.content.Context;
     import android.database.Cursor;
     import android.database.SQLException;
     import android.database.sqlite.SQLiteDatabase;

       public class DatabaseConnector {

    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

       public void open() throws SQLException 
       {
          //open database in reading/writing mode
          database = dbOpenHelper.getWritableDatabase();
       } 

       public void close() 
       {
          if (database != null)
             database.close();
       }       

       public void insertContact(String name, String cap, String code, String time, String min) 
               {
                  ContentValues newCon = new ContentValues();
                  newCon.put("name", name);
                  newCon.put("cap", cap);
                  newCon.put("time", time);
                  newCon.put("min", min);
                  newCon.put("code", code);

                  open();
                  database.insert("country", null, newCon);
                  close();
               }

               public void updateContact(long id, String name, String cap,String code,  String time, String min) 
               {
                  ContentValues editCon = new ContentValues();
                  editCon.put("name", name);
                  editCon.put("cap", cap);
                  editCon.put("time", time);
                  editCon.put("min", min);
                  editCon.put("code", code);

                  open();
                  database.update("country", editCon, "_id=" + id, null);
                  close();
               }

               public Cursor getAllContacts() 
               {
                  return database.query("country", new String[] {"_id", "name"}, 
                     null, null, null, null, "name");
               }

               public Cursor getOneContact(long id) 
               {
                  return database.query("country", null, "_id=" + id, null, null, null, null);
               }

               public void deleteContact(long id) 
               {
                  open(); 
                  database.delete("country", "_id=" + id, null);
                  close();
               }
     }

**DATABASEOPENHELPER JAVA**
===============================
    import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;

    public class DatabaseOpenHelper extends SQLiteOpenHelper {

    public DatabaseOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code,  time, min);";                 
        db.execSQL(createQuery);        
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
     }

 LOGCAT:
==========

    03-22 14:35:00.174: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
    03-22 14:35:00.174: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:57
    03-22 14:35:00.184: E/(1320): Can't open file for reading
    03-22 14:35:00.184: E/(1320): Can't open file for reading
    03-22 14:35:00.225: D/memalloc(1320): ion: Mapped buffer base:0x5d12e000 size:614400 offset:0 fd:61
    03-22 14:35:02.087: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
    03-22 14:35:02.127: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
    03-22 14:35:02.127: D/memalloc(1320): ion: Mapped buffer base:0x5d4ce000 size:614400 offset:0 fd:64
    03-22 14:35:02.227: D/memalloc(1320): ion: Mapped buffer base:0x5d6f7000 size:614400 offset:0 fd:71
    03-22 14:35:02.247: D/memalloc(1320): ion: Unmapping buffer  base:0x5ca41000 size:614400
    03-22 14:35:02.247: D/memalloc(1320): ion: Unmapping buffer  base:0x5d12e000 size:614400
    03-22 14:35:02.917: D/memalloc(1320): ion: Mapped buffer base:0x5c929000 size:614400 offset:0 fd:56
    03-22 14:35:04.319: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
    03-22 14:35:04.509: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
    03-22 14:35:04.509: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:60
    03-22 14:35:04.599: D/memalloc(1320): ion: Mapped buffer base:0x5dc02000 size:614400 offset:0 fd:75
    03-22 14:35:04.619: D/memalloc(1320): ion: Mapped buffer base:0x5dca8000 size:614400 offset:0 fd:78
    03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5d4ce000 size:614400
    03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5d6f7000 size:614400
    03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5c929000 size:614400
    03-22 14:35:08.433: W/dalvikvm(1320): threadid=12: thread exiting with uncaught exception (group=0x410889d8)
    03-22 14:35:08.453: E/AndroidRuntime(1320): FATAL EXCEPTION: AsyncTask #2
    03-22 14:35:08.453: E/AndroidRuntime(1320): java.lang.RuntimeException: An error occured while executing doInBackground()
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.lang.Thread.run(Thread.java:856)
    03-22 14:35:08.453: E/AndroidRuntime(1320): Caused by: java.lang.Error: Unresolved compilation problems: 
    03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
    03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token "cHour", delete this token
    03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
    03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token "cMinute", delete this token
    03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error, insert ")" to complete MethodInvocation
    03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error, insert ";" to complete BlockStatements
    03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
    03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token ")", delete this token
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:122)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry.access$1(AddEditCountry.java:103)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry$1$1.doInBackground(AddEditCountry.java:76)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    03-22 14:35:08.453: E/AndroidRuntime(1320):     ... 5 more
    03-22 14:35:08.493: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
    03-22 14:35:08.563: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
    03-22 14:35:08.563: D/memalloc(1320): ion: Mapped buffer base:0x5d4bb000 size:614400 offset:0 fd:56
    03-22 14:35:08.573: D/memalloc(1320): ion: Mapped buffer base:0x5d8f7000 size:614400 offset:0 fd:64
    03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5ca41000 size:614400
    03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5dc02000 size:614400
    03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5dca8000 size:614400
    03-22 14:35:09.775: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:60

Additional Info:
============

It only force closes after you click the save button in add_country:

Button android:id="@+id/saveBtn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:03:18.823

[JodaTime](http://joda-time.sourceforge.net/)有一个可以用小时和分钟构造的 LocalTime 类[。](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html)它还有一个 toString 方法，可以为指定的模式生成字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:03:27.540

`Your code has lot of compilation errors`, 其中之一是

您的 Create table 语句是错误的

```
String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code,  time, min);"; 
```

您尚未指定`type`其他字段，即`name,cap,code, time and min`

像这样为它们指定类型

```
String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name text, cap text , code text ,  time text , min text );"; 
```

**第二**：

```
dbConnector.updateContact(rowID,
                              nameEt.getText().toString(),
                              capEt.getText().toString(),

                              String cHour = timeEt.getCurrentHour().toString(), /* Storing as String*/
                              String cMinute = minEt.getCurrentMinute().toString(), 
                              String normalTimeFormat = cHour + ":" + cMinute;

                              //Do whatever you want to do with normalTimeFormat

                              codeEt.getText().toString()); 
```

**这不是调用方法的方式**。您不能在方法参数内创建新字符串。应该是这样的

```
 dbConnector.updateContact(rowID, nameEt.getText().toString(),capEt.getText().toString(),timeEt.getCurrentHour().toString()+":"+minEt.getCurrentMinute().toString(), codeEt.getText().toString()); 
```

# php - 如何使用一些 {$variable} 编写更新查询示例

> ID：15579716
> 
> 赞同：-1
> 
> 时间：2013-03-22T20:56:48.723
> 
> 标签：php

如何使用一些`{$variable}`示例编写更新查询，例如：

```
$query="update subjects set values username='{$name}', hash_password='{$pass}' where id=1"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:10:17.680

创建 PDO 连接：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
   try
    {
        return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

像这样初始化它：

```
$host = 'localhost';
$user = 'root';
$databaseName = 'databaseName';
$pass = ''; 
```

并这样称呼它：

```
$db = connectToDatabase($host, $databaseName, $user, $pass); 
```

并使用这样的函数：

```
function update($db, $username, $password, $id)
{
    $query = "UPDATE subjects SET username = :username, hash_password = :password WHERE id = :id;";
    $statement = $db->prepare($query); // Prepare the query.
    $result = $statement->execute(array(
        ':username' => $username,
        ':password' => $password,
        ':id' => $id
    ));
    if($result)
    {
        return true;
    }
    return false
} 
```

现在最后，您可以执行以下操作：

```
$username = "john";
$password = "aefasdfasdfasrfe";
$id = 1;

$success = update($db, $username, $password, $id); 
```

您还可以通过这样做（准备语句，并将变量执行到语句中）来避免 sql 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:08:31.580

你不能`values`在那里使用，它应该是：

```
$query="update subjects set username='{$name}', hash_password='{$pass}' where id=1"; 
```

但我建议使用准备好的语句，而不是将变量直接转储到您的查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:10:04.507

如果您不想阅读上下文/数据库转义，这就是您避免此类问题的方法[`PDO`](http://php.net/PDO)，例如：

```
$pdo = new PDO('mysql:host=localhost;dbname=db', 'user', 'pw');

$pdo->prepare("update subjects set values username=?, hash_password=? where id=?")
    ->execute(array($user, $pass, 1)); 
```

也可以看看：

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
*   [http://bobby-tables.com/](http://bobby-tables.com/)

# joomla - 在前端编辑翻译的（joomfish）文章时，joomla 中出现“相同的文章别名”错误

> ID：15579717
> 
> 赞同：0
> 
> 时间：2013-03-22T20:56:49.523
> 
> 标签：joomla, alias, article, joomfish

joomla 2.5.8 版 joomfish 2.5.0 版

我创建了一篇文章并用 joomfish 翻译了它。我使用创建该文章的用户登录，并且正在尝试对其进行编辑。用英语（基本语言）我可以成功编辑它。在希腊语（翻译）中，当我尝试编辑文章时，出现错误“该类别中的另一篇文章具有相同的别名”。

即使我把翻译放在另一个类别中，我也可以编辑一次，新版本又被保存到原始文章的类别中！！！所以我不能再编辑它了...

我通常在论坛和谷歌中找不到任何东西......我是否必须切换到 core-joomla-multilingual-system 并卸载 joomfish？它允许在多篇文章中使用相同的别名吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T12:11:09.720

I had similar bug. This 'cause Joom!Fish 2.5 works another way then old versions. It keeps both articles (original and translated) in article manager, so articles anyway can't be stored with same aliases.

**What I did:** go to */libraries/joomfish/contentelement/contentelements/* You can see *.xml files stored here. Every of this files is corresponding for different elements. For example open content.xml and find this code:

```
 <treatment>
      <target>native</target>
      <tableclass>Content</tableclass>
      <publishedfield>state</publishedfield>
      <translationObjectModel file="joomfish.translatable.translationobject.content">TranslationObjectContent</translationObjectModel>
      <jformModel>ContentJForm</jformModel>
   </treatment> 
```

and remove this.

After you do this Joom!Fish stops duplicate contents, and you'll get many translations with same alias!

P.S.: You may need to remove duplicate articles in Article Manager.

# crystal-reports - 如何使用默认参数值从 Crystal Report 获取所有记录

> ID：15579723
> 
> 赞同：0
> 
> 时间：2013-03-22T20:57:18.663
> 
> 标签：crystal-reports

我有一个水晶报表，它有两个参数：`{?EmailVerifyStatus}`和`{?Company}`. 我想要它，以便当两个参数为空白时，报告会获取所有记录。这是我当前的代码：

```
 (if {?EmailVerifyStatus}='Y' THEN {PREH.udEmailVerify}='Y' 
     ELSE IF {?EmailVerifyStatus}='N' THEN {PREH.udEmailVerify}='N' 
     ELSE  1=1) 
    and

   (if {?Company} <> '0' then not (IF "," & ToText({PREH.PRCo},0,'') & "," IN "," & {?Company}  & "," THEN 0=1 ELSE 1=1) else 1=1 ) 
```

但是，它只返回具有“Y”值的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:42:37.483

您必须检查参数是否已使用`hasvalue()`函数设置值。然后你可以这样做：

```
(not(hasvalue({?EmailVerifyStatus})) or {PREH.udEmailVerify} = {?EmailVerifyStatus}) and
(not(hasvalue({?PRCo})) or {PREH.Co} = {?Company}) 
```

我不明白你的第二个条件......

# java - 给定角度和幅度的运动模糊卷积矩阵

> ID：15579729
> 
> 赞同：1
> 
> 时间：2013-03-22T20:57:55.267
> 
> 标签：java, image-processing, matrix, convolution, motion-blur

我有 Java 代码，它采用卷积矩阵（只是 2D `double[][]`）并将其应用于图像。我试图弄清楚如何创建一个矩阵，该矩阵将给出运动模糊，给定一个角度（以度为单位）和一个模糊幅度。

幅度 = 1 的模糊示例矩阵（中间像素在每个方向上模糊一个像素），45 度运动模糊为：

```
0      0    1/3
0     1/3    0
1/3    0     0 
```

幅度决定了矩阵的大小（大小 = 2*幅度 + 1），并且单行单元格在运动方向上是非零的。

我遇到的问题是在给定角度的情况下确定矩阵中哪些单元格非零所需的数学/代码。

伪（或实际）代码将非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:09:59.160

对于运动模糊，非零元素都显示在一条线上。这就是您的示例有效的原因。[1/n 1/n (ntimes)... 1/n] 会在水平方向模糊，而转置会在垂直方向模糊。对于任意角度，只需填写最接近所需角度的线的非零元素。

*编辑。*

例如，您可能会尝试最小化像素索引的某些函数以确定该像素是否应为非零。|(i - 3*j)| < 小数，将沿着斜率 3 的线找到像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-10T16:03:19.580

在 Matlab 和 Octave 中，有一个名为“fspecial”的内置函数用于创建卷积核。通过传递“运动”标志以及幅度和角度，它将输出一个构成内核（矩阵），您可以使用该内核将运动模糊应用于图像。[https://octave.sourceforge.io/image/function/fspecial.html](https://octave.sourceforge.io/image/function/fspecial.html)

不幸的是，在其他语言中似乎没有这样的功能，无论如何我都可以找到用于创建此内核的功能。我能想到的最好的方法是将角度和幅度转换为一条线的起点和终点 (x,y) 点。然后你可以使用 Xiaolin Wu 算法绘制一条灰度抗锯齿线[https://rosettacode.org/wiki/Xiaolin_Wu%27s_line_algorithm](https://rosettacode.org/wiki/Xiaolin_Wu%27s_line_algorithm)

您必须将所有元素除以元素之和，以确保在将内核与图像进行卷积之前对其进行规范化。

# android - Android/C++数据序列化

> ID：15579730
> 
> 赞同：1
> 
> 时间：2013-03-22T20:57:57.153
> 
> 标签：android, c++, serialization

在 c++ 服务器和 android 客户端之间交换数据/序列化结构的最佳方式或库是什么？性能是必不可少的。压缩是首选。现在我正在尝试使用[msgpack](http://msgpack.org/) ( [https://github.com/msgpack/msgpack-java](https://github.com/msgpack/msgpack-java) ) 实现数据包交换 - 对于 android 端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:10:57.807

Msgpack/protobuf 很适合这个任务。

但是 Msgpack 并不完全支持“可选”值或版本控制（它对您的应用程序可能很重要）。另一方面，我不确定所有 protobuf-RPC 实现是否相互兼容（每个平台/实现的 Msgpack-RPC 协议都是相同的）。

# c# - 泛型、协方差/逆变等

> ID：15579732
> 
> 赞同：1
> 
> 时间：2013-03-22T20:58:00.693
> 
> 标签：c#, java, oop, generics

所以我有一些 Java 代码，它们广泛使用编译得很好的泛型。我将它移植到 C#，如下所示：

```
interface IFoo1 { }
interface IFoo2 { }

interface IBar<T, K>
    where T : IFoo1
    where K : IFoo2 {
    List<T> GetFoo1s();
    void AddAFoo1(T foo1);

    List<K> GetFoo2s();
    void AddAFoo2(K foo2);
}

interface IBlip<T>
    where T : IBar<IFoo1, IFoo2> {
    T DoBlip(string input);
    void DoBlip2(T input);
}

interface IConverter<T, K>
    where T : IBar<IFoo1, IFoo2>
    where K : IBar<IFoo1, IFoo2> {
    K Convert(T input);
}

class FooA1 : IFoo1 { }
class FooB1 : IFoo1 { }

class FooA2 : IFoo2 { }
class FooB2 : IFoo2 { }

class BarA : IBar<FooA1, FooA2> {
    public List<FooA1> GetFoo1s() { return null;  }
    public void AddAFoo1(FooA1 foo1) { }
    public List<FooA2> GetFoo2s() { return null; }
    public void AddAFoo2(FooA2 foo2) { }
}

class BarB : IBar<FooB1, FooB2> {
    public List<FooB1> GetFoo1s() { return null; }
    public void AddAFoo1(FooB1 foo1) { }
    public List<FooB2> GetFoo2s() { return null; }
    public void AddAFoo2(FooB2 foo2) { }
}

class BlipA : IBlip<BarA> {
    public BarA DoBlip(string input) { return null; }
    public void DoBlip2(BarA input) { }
}

class BlipB : IBlip<BarB> {
    public BarB DoBlip(string input) { return null; }
    public void DoBlip2(BarB input) { }
}

class ConverterImplementation : IConverter<BarA, BarB> {
    public BarB Convert(BarA input) {
        return null;
    }
} 
```

当我编译它时，它抱怨说，例如，使用 ConverterImplementation，BarA 不能隐式转换为 IBar。我想这里有一些我从根本上想念的东西。有人可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:10:06.380

默认情况下，泛型类型参数既不是逆变的也不是协变的，但可以通过“in”和“out”关键字使其成为其中之一。

在 IBar<T, K> 的情况下，两个类型参数都用作输入和输出，因此不能将它们设为逆变或协变。如果将其重构为两个接口，一个是 T 仅用于输入，K 仅用于输出，一个是 T 仅用于输出，K 仅用于输入，那么您可以使每个类型参数基于协变或逆变关于它的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:14:42.337

`IBar`不是只读接口，因此您可能无法在 C# 中实现协变。您需要重构并提取一个只读接口，例如 ReadOnlyBar，并对该接口进行协变。（免责声明 - 不是 C# 专家）

另一方面，Java 的通配符可以将接口变为只读和变接口，所以`IBar<? extends Animal>`是只读的变的，`IBar<? extends Tiger>`是它的子类型。这很酷，直到您的代码中到处都是通配符。

# json - 使用 Jerkson 时维护 JSON 中前导和尾随引号的字符串

> ID：15579733
> 
> 赞同：5
> 
> 时间：2013-03-22T20:58:12.950
> 
> 标签：json, scala, playframework-2.0, jackson, jerkson

有问题的JSON：

```
{
"search_id": "",
"type": "Search.filter",
"query": "bar,club",
"params": {
    "search_id": "",
    "user_id": "",
    "client": "ios",
    "lat": 40.73199375351,
    "lon": -74.00080404533901,
    "radius": 20
} 
```

}

检索数据的代码：

```
val json = Json.parse(new String(body))
println((json \ "search_id") + " | " + (json \ "query"))
println(json) 
```

仅打印 json JsValue 按预期打印出整个 JSON。打印出第一项产生：“”| “酒吧、俱乐部”

为什么要维护 JSON 格式的引号？这不是字符串的一部分，它基本上是说引号内的内容是一个字符串。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T22:04:36.740

根据[文档](http://www.playframework.com/documentation/2.1.0/ScalaJson)，您应该调用`.as[sometype]`（不安全转换）或`asOpt[sometype]`（安全）。

```
println((json \ "search_id").as[String] + " | " + (json \ "query").as[String]) 
```

# php - PHP 查询连接以获取评论回复

> ID：15579738
> 
> 赞同：0
> 
> 时间：2013-03-22T20:58:32.470
> 
> 标签：php, mysql, join, comments

我知道还有其他类似的帖子，我一直在使用它们。我有三张桌子：

```
users_info
  user_id | user_name

blog_comments
  comment_id | comment

blog_reply
  user_id | comment_id | reply | reply_date 
```

我正在尝试加入表格以从 users_info 获取 user_name 并通过 blog_comments.comment_id 返回 blog_reply

我一直在使用： [评论和评论回复的mysql结构](https://stackoverflow.com/questions/1260878/mysql-structure-for-comments-and-comment-replies)

我被困在表连接上，非常感谢任何帮助。

```
 $get_replies = ("SELECT
                      blog_reply.user_id,
                      blog_reply.comment_id,
                      blog_reply.reply,
                      blog_reply.reply_date,
                      users_info.user_name AS user_name
                    FROM blog_reply
                    JOIN users_info ON blog_reply.user_id = users_info.user_id
                    LEFT JOIN blog_comments ON blog_reply.comment_id = blog_reply.comment_id
                    JOIN users_info ON blog_reply.user_id = users_info.user_id
                    WHERE blog_comments.comment_id = '{$comment_id}'
                    ORDER BY blog_reply.reply_date DESC");

    $reply = mysql_query($get_replies); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:06:48.300

几个 MySQL 的东西：

1.  如果您不需要该表，请不要加入它。您不需要 blog_comments 表中的任何数据，因此您不应将其包含在查询中。由于 blog_reply 表有 comment_id 你可以只使用那个表

2.  你不需要做 users_info.user_name AS user_name。那是多余的。

3.  您可以将 where 子句添加到联接中。

以下是我将如何编写 MySQL 语句：

```
SELECT
    blog_reply.user_id,
    blog_reply.comment_id,
    blog_reply.reply,
    blog_reply.reply_date,
    users_info.user_name
FROM 
    blog_reply
JOIN 
    users_info 
ON 
    blog_reply.user_id = users_info.user_id AND
    blog_reply.comment_id = '{$comment_id}'
ORDER BY 
    blog_reply.reply_date DESC 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:06:40.163

这应该有效：

```
FROM blog_reply
JOIN users_info ON blog_reply.user_id = users_info.user_id
JOIN blog_comments ON blog_reply.comment_id = blog_comments.comment_id
WHERE blog_comments.comment_id = '{$comment_id}' 
```

# bash - 在 xterm 中，我可以在不重置当前颜色的情况下关闭粗体或下划线吗？

> ID：15579739
> 
> 赞同：7
> 
> 时间：2013-03-22T20:58:33.657
> 
> 标签：bash, fonts, formatting, xterm, underline

我正在处理输入（来自但仅限于 ls -la --color 等来源）并在文本的某些部分下划线。我不会逐个字符地处理这些输入，而是使用大量正则表达式，这使得跟踪我正在影响的子字符串是已经着色还是粗体变得相当困难。如果我有一个红色的文本块，并且我想在其中的某些部分下划线，我可能会执行以下操作：

```
s/(123)/\033[4m\1\033[0m/g 
```

（我的表达式要复杂得多。实际上，匹配项是自己提取、处理的，然后进一步分解和分析。这不是通过更改我在这里给出的表达式可以完成的事情。）

上面的代码会将所有出现的 123 替换为 [UNDERLINE_START]123[FORMAT_RESET]。不幸的是，重置也会关闭文本的着色。如果我可以在我只想禁用下划线时关闭下划线，那会为我省去很多麻烦，但我很确定没有办法做到这一点。谁能告诉我我错了？

编辑：我可以通过询问来简化问题：如果我想关闭下划线，我可以在不影响当前文本颜色的情况下这样做吗，因为该颜色可能在我的脚本开始执行之前很久就设置好了，而我没有一种检测颜色是什么的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T23:34:33.590

似乎没有人记录它，但是在装饰器代码中添加 20 会关闭它们：

```
 echo -e "\\033[34;4m" underlined "\\033[24m" not underlined
  echo -e "\\033[34;1m" bold "\\033[2m" not bold
  echo -e "\\033[34;2m" dark "\\033[22m" not dark
  echo -e "\\033[34;7m" inverse "\\033[27m" not inverse 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-20T10:21:06.040

*而不是那些硬编码的转义序列，使用：*

```
tput smul # set underline
tput rmul # remove underline

tput smso # set bold on
tput rmso # remove bold

tput setaf 1 #red
tput setaf 2 #green

...
tput cup 0 0 # move to pos 0,0 
```

有关这些命令的完整说明，请参阅“man terminfo”和“man tput”。

*例子 ：*

```
function f_help
{
c_green=$(tput  setaf 2      2>/dev/null)
c_reset=$(tput  sgr0         2>/dev/null)
c_bold=$(tput smso           2>/dev/null)
echo "${c_bold}DESCRIPTION${c_reset} : ...."
}

echo "${c_green}GREEN ${c_underline} GREEN AND UNDERLINED${c_nounderline} GREEN AGAIN${c_reset} PLAIN BLACK TEXT" 
```

${c_underline} 转义序列不影响文本的颜色；它只会打开下划线。${c_nounderline} 只关闭下划线。

# excel - 带有动画的 X,Y 散点图

> ID：15579741
> 
> 赞同：3
> 
> 时间：2013-03-22T20:58:40.460
> 
> 标签：excel, dynamic, plot, animated, scatter

我正在寻找一种方法来绘制（X，Y）平面内的多个点，并让它们一次出现（然后消失）一个。我总共有大约 400 个 (x,y) 点，它们是从惯性测量单元收集的位置跟踪信息。

每个数据点间隔大约 4 毫秒（我可以更改此间隔以使其更长），所以如果可能的话，我想一次显示一个点，每个点显示 4 毫秒，直到出现下一个点。最终产品应显示对象在 5-6 秒采样时间内的移动路径。在我的 excel 文件中，我有两列（一列用于 X，一列用于 Y），长度为 400 个元素（400 行）。

我希望有一种方法可以一次绘制一行 X、Y 散点信息，并寻找一些代码，这些代码将在每一行中递增并绘制相应的散点图。我是一个半流利的程序员，但以前从未使用过 MS Visual Basic。到目前为止，我发现的所有 Excel 解决方案（与我的问题类似）都涉及在 Visual Basic 中为图形编写代码。如果有人可以帮助我编写代码，我想我也许可以让它工作......但是如果有另一个软件可以做到这一点（免费！我有学生预算！）那么我愿意尝试多种解决方案。

我已经找到了这段代码：

```
Sub Macro1()
   Charts.Add
    ActiveChart.ChartType = xlXYScatter
    ActiveChart.SetSourceData Source:=Sheets("Sheet1").Range("A3:B3"), PlotBy _
        :=xlColumns
    ActiveChart.Location Where:=xlLocationAsObject, Name:="Sheet1"
    With ActiveChart.Axes(xlCategory)
        .MinimumScale = -30
        .MaximumScale = 30
        .MinorUnit = 1
        .MajorUnit = 5
        .Crosses = xlAutomatic
        .ReversePlotOrder = False
        .ScaleType = xlLinear
        .DisplayUnit = xlNone
    End With
    With ActiveChart.Axes(xlValue)
        .MinimumScale = 0
        .MaximumScale = 2800
        .MinorUnit = 50
        .MajorUnit = 100
        .Crosses = xlAutomatic
        .ReversePlotOrder = False
        .ScaleType = xlLinear
        .DisplayUnit = xlNone
    End With
     For I = 3 To Worksheets(1).Range("A65536").End(xlUp).Row
    ActiveChart.SetSourceData Source:=Sheets("Sheet1").Range("A3:B" & I), PlotBy _
        :=xlColumns
    ActiveChart.Location Where:=xlLocationAsObject, Name:="Sheet1"
ST = Timer
    While Timer < ST + 1
    Wend
    Next I
End Sub 
```

但是，由于没有评论或文档，我很难仔细阅读它并将其分开。我觉得一旦我能够真正理解 Visual basic 的格式，我就可以修改程序以适应我的特定需求……但理解它是第一步。

再说一次，我的信息采用 3 列的格式：X 位移 - Y 位移 - 时间戳（以 mm 为单位的位置）（以 mm 为单位的位置）（秒，或迭代 #，以更容易的为准）

# node.js - 具有复杂类型的 Node.js SOAP 调用

> ID：15579743
> 
> 赞同：5
> 
> 时间：2013-03-22T20:58:52.407
> 
> 标签：node.js, soap, soap-client

我目前正在尝试使用**node-soap** ( [https://github.com/milewise/node-soap](https://github.com/milewise/node-soap) ) 来调用 Authorize.net 的 SOAP 服务器。但是，我似乎无法让我的客户端代码传递正确的参数。我知道该函数正在调用服务器，因为我收到了服务器错误响应。

当我检查 WSDL 时，我注意到服务器调用需要 ComplexType 参数。有没有办法创建我需要的 ComplexTypes 或者我可以只使用 Javascript 对象？这是我当前的代码：

```
 var soap = require('soap');

  var url = 'https://api.authorize.net/soap/v1/Service.asmx?WSDL';

  soap.createClient(url, function(err, client) {

  var args = {
      merchantAuthentication: {
        name: '285tUPuS',
        transactionKey: '58JKJ4T95uee75wd'
      }
  };

  client.Service.ServiceSoap12.GetTransactionDetails(args, 
      function(err, result) {

          if (err) {
            console.log(err);
          } else {
            console.log(result.GetTransactionDetailsResult[0].messages);
          }
      }); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T19:08:25.283

node-soap 模块在将事务发送到服务器之前将您的 JavaScript 对象转换为 XML。它将请求包装在 wsdl 概述的 xml 元素中。这是传递您提供的对象时 node-soap 可能产生的示例（重要的是要注意外部元素是由 node-soap 模块根据 wsdl 创建的）：

此示例将 wsdl 用于 Cyber​​Source API

```
<data:requestMessage xmlns:data="urn:schemas-cybersource-com:transaction-data-1.93" xmlns="urn:schemas-cybersource-com:transaction-data-1.93">

  <data:merchantAuthentication>
    <data:name>285tUPuS</data:name>
    <data:transactionKey>58JKJ4T95uee75wd</data:transactionKey>
  </data:merchantAuthentication>

</data:requestMessage> 
```

另外，我不确切知道 Authorize.net api 是如何工作的，但听起来您可能想在必要时使用用户名令牌身份验证进行检查：

```
client.setSecurity(new soap.WSSecurity('username’, ‘password’)); 
```

# c# - 如何获取 Web 服务对象？

> ID：15579744
> 
> 赞同：1
> 
> 时间：2013-03-22T20:58:53.127
> 
> 标签：c#, web-services

我正在使用 Web 服务在 C# 中实现一些代码，但我唯一的参考是他们用来加载测试的 Java 代码。

Java 通过调用 this 获取对象调用

```
lotService=(LotService) ic.lookup("mes-webservices/lotService/remote"); 
```

其中 IC 是 InitialContext 对象。

我需要在 C# 上做同样的调用，但我不知道怎么做。有没有像这个java方法一样的简单方法在C#中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:00:15.687

您可以通过将服务引用添加到 Web 服务来在 C# 中执行类似的操作。我假设您的 web 服务和消费客户端都在 .NET 中。

伪代码将是

```
LocationWebService objService = new LocationWebService(); // this is proxy class of web service created when you add web reference
string result = objService.GetLocationName(4); //call web method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:04:34.410

以下是步骤：

1.  在您的项目中添加服务引用
2.  创建 ServiceClient 实例
3.  通过使用上面创建的实例调用方法，它正在公开

这就对了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T21:17:28.877

首先右键单击您的项目并选择“添加服务引用”。

拥有它后，您需要创建服务客户端对象。无论您在上面命名服务引用，您的项目中都会有一个可用的新类型（我认为，命名的服务引用名称末尾附加了“Client”。示例：如果服务是 FooService，您将拥有一个称为 FooServiceClient 的客户端类型可用。）

要实例化，您需要一个绑定。您可以通过编程方式创建它：

```
var binding = new BasicHttpBinding()
            {
                CloseTimeout = new TimeSpan(0, 1, 0),
                OpenTimeout = new TimeSpan(0, 1, 0),
                ReceiveTimeout = new TimeSpan(0, 10, 0),
                SendTimeout = new TimeSpan(0, 1, 0),
                AllowCookies = false,
                BypassProxyOnLocal = false,
                HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
                MaxBufferSize = 65536,
                MaxBufferPoolSize = 524288,
                MaxReceivedMessageSize = 65536,
                MessageEncoding = WSMessageEncoding.Text,
                TextEncoding = Encoding.UTF8,
                TransferMode = TransferMode.Buffered,
                UseDefaultWebProxy = true
            };
            binding.ReaderQuotas.MaxDepth = 32;
            binding.ReaderQuotas.MaxStringContentLength = 8192;

if (isHttps)
    binding.Security = new BasicHttpSecurity() { Mode = BasicHttpSecurityMode.Transport }; 
```

然后你需要一个端点。像这样创建：

```
var endpoint = new EndpointAddress(serviceUri); 
```

然后只需实例化服务客户端：

```
var serviceClient = new FooServiceClient(binding, endpoint); 
```

您可以从服务客户端实例调用您的服务方法。

# eclipse - 在 Eclipse 项目的上下文菜单中没有获得指标视图的选项

> ID：15579746
> 
> 赞同：1
> 
> 时间：2013-03-22T20:59:06.940
> 
> 标签：eclipse, eclipse-plugin

我正在尝试在 Eclipse 中使用指标视图。我遵循了 [http://metrics2.sourceforge.net/](http://metrics2.sourceforge.net/)中指定的步骤， 但是在右键单击项目时，我没有得到指定的指标选项。

任何想法将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T10:06:02.803

当您右键单击项目时，请确保您在 Package Explorer 中。要查看包资源管理器，请选择窗口 -> 显示视图 -> 包资源管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T04:27:09.983

您是否启用了指标？要启用，请在 Package Explorer 中右键单击您的包，选择 Properties，选中 Metrics 部分中的复选框“Enable Metrics”。

# php - 使用 Ajax 和 Jquery 修改 Css 值，基于 Mysql 行

> ID：15579748
> 
> 赞同：0
> 
> 时间：2013-03-22T20:59:22.770
> 
> 标签：php, javascript, jquery, html, ajax

所以我一直在研究这个系统，当你在 Mysql 上的权限表中获得一个新数字时，它会自动更新一个场景选择页面。我有用于登录的 Php，以及用于在成员表的权限行中获取数字的 Php 工作正常。

我的问题在于 Jquery（我昨天开始使用它：p）我在连接到这个 php 文档的脚本的开头添加了一个 Jquery Ajax 连接：

**连接.php：**

```
<?php
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String

//this selects everything for the current user, ready to be used in the script below

$result = mysql_query("SELECT * FROM members WHERE username = '".$_SESSION['Username']."' LIMIT 1");

//this function will take the above query and create an array

 //with the array created above, I can create variables (left) with the outputted array (right)
 while($row = mysql_fetch_array($result)) { var_dump($row); $permission = $row['permission']; }

        echo '<u><b>Permision ID:</b></u> - - No:' .$permission  ; 
?> 
```

效果很好，我登录后去了那个公园，它完美地回忆了所有数据。我相信问题出在 JQuery 上。

**index.php - jQuery：**

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script> 
<script type="text/javascript">

 $.ajax({
   url:'connect.php',
   datatype:"application/json",
   type:'get',
   data: 'q='+permission, 
   success:function(data){
      count('#result').append(html); 
   },
   error:function(){
      // code for error
   }
 });

        if (['permission'] = '1') {
            $('#middle').load(function() {
      $('#Scene1').fadeIn('slow', function() {
        // Animation complete
      });
    });

    }
    //2,3,4,5,6 ommited

    });

    }

        if (['permission'] = '7') {
            $('#middle').load(function() {
      $('#Scene7').fadeIn('slow', function() {
        // Animation complete
      });
    });

    }

//-->
</script> 
```

该脚本应该将显示样式设置为继承，以便在数据库中的数字与场景的数字相同时可以看到它。

只是给你一些背景，这是我的场景。

**#场景1：**

```
 <div id="middle">

        <ul id="Scene1" style="display:none;">

<h2 id="unlocked">Act One</h2>
            <li id="navi3"><a href="#"><img src="Images/Scene-one-unlocked-unpressed.png" alt="Scene One completed" height="255px" width="340px"/></li></a>
    <img id="arrow"
    src="Images/Right-Arrow.png" 
    height="80px"
    width="120px"/>
            <li id="navilockedr"><img src="Images/Scene-two-locked.png" alt="Scene Two locked" height="255px" width="340px"/></li>
    <img id="banner"
    src="Images/crime-scene-banner.png" 
    height="5px"
    width="900px"/>
<h2 id="locked">Act Two</h2>
            <li id="navilockedl"><img src="Images/Scene-three-locked.png" alt="Scene three locked" height="255px" width="340px"/></li>
    <img id="arrow"
    src="Images/Right-Arrow.png" 
    height="80px"
    width="120px"/>
            <li id="navilockedr"><img src="Images/Scene-four-locked.png" alt="Scene four locked" height="255px" width="340px"/></li>
    <img id="banner"
    src="Images/crime-scene-banner.png" 
    height="5px"
    width="900px"/>
<h2 id="locked">Act Three</h2>
            <li id="navilockedl"><img src="Images/Scene-five-locked.png" alt="Scene five locked" height="255px" width="340px"/></li>
    <img id="arrow"
    src="Images/Right-Arrow.png" 
    height="80px"
    width="120px"/>
            <li id="navilockedr"><img src="Images/Scene-six-locked.png" alt="Scene six locked" height="255px" width="340px"/></li>

        </ul> 
```

我想知道是否有任何精通 JQuery 的人可以为我指明正确的方向，因为我不知道我的语法是否正确，或者我只是无法连接到“connect.php”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:16:02.607

```
// This part makes no sense. What you are doing is creating an array with 
// one entry 'permission', then assigning that new array the value of 7\. 
if (['permission'] = '7') 
{ 
    // This will always run because non-zero numbers are 'true'
}

// To illustrate this in a more verbose way...

// Create an array with one item, a string 'permission'
var x = new Array();
x.push( 'permission' );

// X is no longer an array, it is now a number
x = 7; 

if ( x ) 
{ 
    // This will always run because non-zero numbers are 'true'
} 
```

除此之外，您还需要将显示逻辑上移至 ajax 回调，或将其包装在由成功回调调用的函数中。

# delphi - 在 Delphi 中将 DLL 与 C++ 类函数一起使用

> ID：15579750
> 
> 赞同：1
> 
> 时间：2013-03-22T20:59:34.537
> 
> 标签：delphi, dll

问题：如何在 Delphi 中导入名为“IOOperation7::SaveAsWavFile”的 DLL 函数？

详情/说明：

我正在尝试编写代码（在 Delphi XE 中，也必须在 D2007 中工作）来导入由第三方 DLL 文件导出的函数。DLL 文档是 C++ 特定的。我对这种事情的经验有限。

一般的方法当然是这样的：

```
interface

function SaveAsWavFile (Handle: Cardinal; FileName: WideString): HResult; stdcall;

implementation

function SaveAsWavFile; external 'SOMELIBRARY.DLL'; 
```

我遇到的情况是DLL中的函数名嵌入了双冒号。使用 DLL Export Viewer (www.nirsoft.net/utils/dll_export_viewer.html)，导出的函数名称报告为“IOperation7::SaveAsWavFile”。

Delphi*名称*指令似乎可能有所帮助，但以下代码导致运行时错误“无法找到过程入口点 IOperation7::SaveAsWavFile...”

```
function SaveAsWavFile; external 'SOMELIBRARY.DLL' name 'IOperation7::SaveAsWavFile'; 
```

变体（单冒号、点）也不起作用。我还尝试了使用 DLL Export Viewer 报告的序号的 Delphi *index*指令，但无济于事。我没想到它会起作用，因为似乎每个序数都被多个函数使用。这让我产生了下一个怀疑。

我不确定 :: 字符的重要性，但我现在怀疑它们与DLL 中的*嵌入类有关。*所以，如果我的怀疑是正确的，我上面的问题也许更好地表述为“如何在 DLL 中包含的类中使用 Delphi 函数？”

**编辑：** 这是来自 .h 文件的实际参考。我意识到它与我上面发布的代码不太匹配 - 我试图让我发布的示例保持简单。

```
virtual /* [helpstring][id] */ HRESULT STDMETHODCALLTYPE FdSaveAsWavFile(
/* [in] */ ULONG handle,
/* [in] */ BSTR newFileName,
/* [in] */ ULONG newAudioFormat,
/* [in] */ ULONG failIfExists,
/* [in] */ IOLDMFileProgressNotification *progress) = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:28:43.943

如果这是一个由 DLL 导出的 C++ 类，那么您需要编写一个 C++ 包装 DLL 来将其转换为可供 Delphi 使用的东西。这是因为 C++ 类只能由 C++ 代码使用，就像 Delphi 类只能由 Delphi 代码使用一样。

如果这是一个接口，那么您可以直接使用 DLL。如果接口与 COM 兼容，那么您的状态可能会更好。您需要知道如何实例化对象。是COM吗？还是调用 DLL 导出的函数？

您将无法使用 PE 查看器来猜测这一点。您需要研究 DLL 的文档和头文件。这是二进制接口的真正规范。

* * *

关于您的更新，这看起来像是来自界面的方法。这就是接口方法的样子。但是，仍然没有足够的信息可以肯定地说。

# visual-studio-2010 - VS 2010 中的尾随断点？

> ID：15579755
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:00:01.480
> 
> 标签：visual-studio-2010, debugging

有谁知道是否有一种方法或插件可以让您在调试时创建一个尾随断点。例如，我想在某个类上设置一个断点，然后当我进入下一行时，我的断点会更新到该行。然后进入下一行，我的断点将更新到该行，等等......这在深入到类层次结构并能够在我停止的同一点再次开始调试时非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:06:49.680

只需在需要时切换断点，因为无论如何您都在单步执行代码。

我看不出这有多大价值，但 F9（用于切换断点）和 F10（用于跳到下一行）键是紧挨着的。

要调试，只需：

1.  在要命中的第一行代码上设置断点。
2.  当断点第一次命中时，使用 F9 删除断点（如果需要）。
3.  按 F10/F11 进入（或进入）下一行。

当您继续移动断点时，我看不到太多价值，除非您在层次结构中保留断点。

# visual-studio-2010 - 如何配置 Web 服务客户端端点 url？

> ID：15579767
> 
> 赞同：0
> 
> 时间：2013-03-22T21:00:48.603
> 
> 标签：visual-studio-2010, iis-7, wsdl, reverse-proxy, endpoint

我们有一种情况，我们的接口伙伴正在通过调用我们的 WSDL 来动态调用我们的 Web 服务，并通过使用 WSDL 中定义的端点来使用 Web 方法。

在这里，问题是 - 由于我们使用反向代理服务器，实际的 Web 服务托管在不同的内容服务器中，并且在代理服务器中配置了 URL 重写规则，以将请求重定向到真实的内容服务器。我们的接口合作伙伴通过使用给定的反向代理 URL 成功使用了我们的 WSDL，但是 WSDL 拥有真正的内容服务器 URL，而我们的接口合作伙伴无法访问它。

他们可以更改其代理类中的端点 URL，并通过反向代理 URL 使用 Web 服务；不幸的是，他们使用一些通用框架从收到的 WSDL 动态构建端点。所以我们的客户不能使用我们的网络服务。

有什么方法可以在 Web 服务中确定客户端的端点 url？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:59:04.207

在浏览器中打开 wsdl 文件。以 .wsdl 扩展名另存为本地系统。在客户端代码中给出本地文件的 url 而不是服务器地址，如下所示。

url = new URL("file:/C:/apps/Services.wsdl");

# java - jdb 打印捕获的异常消息

> ID：15579774
> 
> 赞同：4
> 
> 时间：2013-03-22T21:01:11.667
> 
> 标签：java, jdb

发生错误时，我的 java 代码中会抛出异常。然后我使用 jdb 运行代码，所以当异常发生时，我可以看到代码所处的状态并进行调试。对于我抛出的所有异常，我输入了一个有用的字符串消息。但是，当 jdb 捕获异常时，它不会将这个字符串连同它一起打印出来。如何打印此字符串？

我已经用谷歌搜索并搜索并阅读了文档，但我不知道如何。

如果我有测试课：

```
public class Test{
    public static void main(String[] args){
        throw new IllegalArgumentException("How do I view this string through jdb?");
    }
} 
```

并通过 jdb 运行它：

```
$ jdb Test
Initializing jdb ...
> run
run Test
Set uncaught java.lang.Throwable
Set deferred uncaught java.lang.Throwable
> 
VM Started: 
Exception occurred: java.lang.IllegalArgumentException (uncaught)"thread=main", Test.main(), line=3 bci=9

main[1] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T21:17:32.080

查看 JDB 的“catch”命令，例如“catch IllegalArgumentException”。根据 JDB[文档](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/jdb.html)，它会在抛出异常时导致调试器中断，以便您可以调查细节。 [这份](http://www.clear.rice.edu/comp212/00-spring/tutorials/07/index.html)关于调试的文档很好地解释了依赖“打印”语句的一些缺点，并且还引用了 JDB 的“捕获”功能。

# solr - 在solr中查询带有特殊字符的字段

> ID：15579776
> 
> 赞同：1
> 
> 时间：2013-03-22T21:01:16.847
> 
> 标签：solr, special-characters

我们为企业名称编制索引并对其进行搜索。我现在需要搜索或提取名称中包含 & 的企业名称列表。也类似这样的符号。

使用的查询：http:localhost:9080/solr/core1/select?q=busname:*\-*&wt=xml

Schema.xml：“字段名称=“总线名称”类型=“文本”索引=“真”存储=“真”多值=“假””

我认为只是给转义字符会给我预期的结果。

# perl - 如何在 perl 中创建哈希的哈希？

> ID：15579786
> 
> 赞同：0
> 
> 时间：2013-03-22T21:02:05.123
> 
> 标签：perl, hash

我对哈希比较陌生。我有个问题。我有一个文件，其中每个条目的格式为

```
187.231.45.47 - - www.xyz.com 200 10567 www.abc.com. 
```

该文件是一个日志文件，包含大约 20000 个条目。

接下来，我将条目拆分为空格并将其存储在一个数组中，比如说 arr。所以 arr[3] 是 www.xyz.com 而 arr[6] 是 www.abc.com

我想知道的是，对于 arr[3] 位置的每个元素，存在多少个不同的 arr[6] 以及相应 arr[3] 的 arr[6] 的计数是多少。

例如，如果日志文件是

```
187.231.45.47 - - www.xyz.com 200 10567 www.abc.com 
187.231.45.47 - - www.xyz.com 200 10567 www.ab.com 
187.231.45.47 - - www.xyz.com 200 10567 www.ab.com 
187.231.45.47 - - www.xyz.com 200 10567 www.c.com 
187.231.45.47 - - www.x.com 200 10567 www.abc.com 
```

那么我应该得到 www.xyz.com 的输出

```
www.abc.com =1
www.ab.com=2
www.c.com=1 
```

对于 www.x.com

```
www.abc.com=1 
```

等等。我真的需要帮助。希望有人可以为此提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:12:34.260

关键是做

```
++$counts{ $fields[3] }{ $fields[6] }; 
```

对于文件的每条记录。

要生成输出，只需在构建完成后使用一对嵌套的 for 循环来迭代哈希的键。

```
for my $foo (keys(%counts)) {
   for my $bar (keys(%{ $counts{$foo} })) {
      my $count = $counts{$foo}{$bar};
      ...
   }
} 
```

* * *

这是整个事情：

```
my %counts;
while (<>) {
   my @fields = split;
   ++$counts{ $fields[3] }{ $fields[6] };
}

for my $foo (keys(%counts)) {
   print("For $foo,\n");
   for my $bar (keys(%{ $counts{$foo} })) {
      my $count = $counts{$foo}{$bar};
      print("$bar=$count\n");
   }
   print("\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:12:10.577

创建这样一个 HoH 的最简单方法是通过其结构引用树，如果它们当前不存在，它会在路径中为您创建所有节点：

```
my $hohStruct;

$hohStruct->{'1'}->{'A'}->{'I'} = 5;
$hohStruct->{'1'}->{'A'}->{'II'} = 4;
$hohStruct->{'1'}->{'B'}->{'I'} = 2;
$hohStruct->{'2'}->{'A'}->{'I'} = 7; 
```

这样，当您将根 转换为`$hohStruct`哈希`%$hohStruct`（等等。您可以类似地循环和遍历结构。与文件系统目录树相同。如果您的树深度按照惯例是固定的并且您知道结构，则可以编写嵌套的 for(each) 循环来展平结构。`%$hohStruct->{'1'}``%$hohStruct->{'1'}->{'A'}``%$hohStruct->{'2'}`

因此，在您的情况下，我会将第二个域名 ( `www.abc.com`) 放在根目录下的第一个节点中，将 IP 放在第二级等。

# image - Outlook 在查看电子邮件时显示联系对话框

> ID：15579790
> 
> 赞同：1
> 
> 时间：2013-03-22T21:02:13.670
> 
> 标签：image, html-email, outlook-2010

尝试显示来自我们的图像服务器的图像时，Outlook 不断显示以下图像。

这是它尝试加载的图像的示例。

[http://ihfiles.com/products/5736_1_0_300_100_0.jpg](http://ihfiles.com/products/5736_1_0_300_100_0.jpg)

![在此处输入图像描述](../Images/c3bf7c27bddcb3a767b6576a61b055ae.png)

关于可能导致 Outlook 以极慢的方式联系我们的图像服务器的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:37:01.603

发现了问题。嵌入在电子邮件中的图像缺少“http:”，因此 gmail 等邮件服务可以发现图像，但不能发现 Outlook 或 iPhone Mail App 等邮件客户端。

所以 URL 是 //ihfiles.com/products/16184_2_0_100_100_0.jpg

不是 [http://ihfiles.com/products/16184_2_0_100_100_0.jpg](http://ihfiles.com/products/16184_2_0_100_100_0.jpg)

# php - $.post 和 mysql db 的问题

> ID：15579792
> 
> 赞同：1
> 
> 时间：2013-03-22T21:02:37.820
> 
> 标签：php, jquery, mysql

有人请帮忙！这可能是我犯的一个非常简单的错误，但我是 PHP 和 MySQL 的新手。我正在尝试根据用户的日期选择从数据库中检索信息。我正在使用我在 youtube 上找到的一些示例将输入发布到带有 jquery 的 php 页面，并在 html 页面上显示从 php 检索到的值。但是，它似乎只返回下面的 else if 语句。非常感谢您的帮助！

下面的HTML：

```
<div id="customDateRange">
    <h2>Welcome <?php echo $companyName ?></h2>
    <h3 style="color:#ff0000">This is currently under development</h3>
    <h4>Please specify the dates you would like to view below:</h4>
    <label for="dateStart">Start Date</label>
    <input class="datePick" id="dateStart" name="dateStart" type="text"/>
    <label for="dateEnd">End Date</label>
    <input class="datePick" ud="dateEnd" type="text"/>
    <input id="getDateRange" type="submit" value="Display Report" />
    <div id="fromDatabase"></div>
</div> 
```

下面的Javascript：

```
$('.datePick').datepicker({ minDate: new Date(2013, 3 - 1, 1), dateFormat: 'yy-mm-dd' });

$('input#getDateRange').on('click', function(){
    var startDate = $('input#dateStart').val();
    if ($.trim(startDate) != '') {
        $.post('../../includes/dateRangeDB.php', function(data, status){
            $('div#fromDatabase').text(data);
        });
    }
}); 
```

PHP 下面：

```
<?php 
if (isset($_POST['dateStart']) === true && empty($_post['dateStart']) === false) {
    $query = mysql_query("
        SELECT TotalCost FROM adwords_reporting WHERE CampaignID = 'CAMP020' AND Date IN ('" . mysql_real_escape_string(trim($_POST['dateStart'])) . "')
    ");

    echo "Total Cost: " . (mysql_num_rows($query) !== 0) ? mysql_result($query, 0, 'TotalCost') :  'Date Not Found';
}
else if (isset($_POST['dateStart']) === false) {
    echo "WTF MAN!";
}
else {
    echo "It seems there is an issue";
}
?> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:04:43.597

您需要实际发送日期：

```
$('input#getDateRange').on('click', function(){
    var startDate = $('input#dateStart').val();
    if ($.trim(startDate) != '') {
        $.post('../../includes/dateRangeDB.php', {dateStart: startDate}, function(data){
            $('div#fromDatabase').text(data);
        });
    }
}); 
```

能够访问它：

```
$_POST['dateStart'] 
```

# function - 如何摆脱脚本 this$.text(); 的感叹号

> ID：15579794
> 
> 赞同：0
> 
> 时间：2013-03-22T21:02:44.543
> 
> 标签：function, object, push, var

**示例** ：[-jsFiddle](http://jsfiddle.net/jfriend00/bYs4x/)

**这个脚本：**

```
var slides = [];           
$("ul .image").each(function() {
    var this$ = $(this);
    var obj = {};
    obj.image = this$.text();

    slides.push(obj);
});

document.body.innerHTML = JSON.stringify(slides); 
```

**用这个 html 制作：**

```
<ul>
    <li><span class="image">/images/image1.jpg</span></li>
    <li><span class="image">/images/image2.jpg</span></li>
</ul> 
```

**这个输出：**

```
[{"image":"/images/image1.jpg"},{"image":"/images/image2.jpg"}] 
```

***我怎样才能摆脱“图像”* **周围的感叹号：****在冒号之前的每个开头？****

 **谢谢你，琳达：）））

编辑：

预期的结果是这样的：

```
 [
      {image:"/images/image1.jpg"},
      {image:"/images/image2.jpg"}
     ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:32:46.177

试试这个：[jsfiddle](http://jsfiddle.net/XN6BQ/)

```
var slides = [];           
$("ul .image").each(function() {
    var this$ = $(this);
    var obj = {};
    obj.image = this$.text();
    obj.title = this$.nextAll(".title").text();
    obj.thumb = this$.nextAll(".thumb").text();
    slides.push(obj);
});

var str = JSON.stringify(slides);

document.body.innerHTML = str.replace(/"image"/g , "image"); 
```**

# python - WSGI - 属性没有“用户”错误

> ID：15579799
> 
> 赞同：0
> 
> 时间：2013-03-22T21:03:26.790
> 
> 标签：python, django, iis-7.5, wsgi

您好，我正在尝试在 windows iis 7.5 环境中运行一些 python/django。启动服务器 (localhost:8888) 后，我收到以下错误。只有访问 localhost:8888 后才会产生此错误。

```
 File "C:\Python27\lib\site-packages\django-1.5-py2.7.egg\django\core\handlers\
 base.py", line 224, in handle_uncaught_exception
   return callback(request, **param_dict)
  File "C:\Python27\lib\site-packages\django-1.5-py2.7.egg\django\utils\decorato
  rs.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
     File "C:\Python27\lib\site-packages\ecm-2.1.2-py2.7.egg\ecm\views\custom_handl
  ers.py", line 22, in server_error
      http.HttpResponseServerError(t.render(RequestContext(request)))
    File "C:\Python27\lib\site-packages\django-1.5-py2.7.egg\django\template\conte
   xt.py", line 179, in __init__
   self.update(processor(request))
    File "C:\Python27\lib\site-packages\ecm-2.1.2-py2.7.egg\ecm\views\context_proc
   essors.py", line 55, in menu
    if request.user.is_superuser or UrlPermission.user_has_access(request.user,
   menu['url']):
  AttributeError: 'WSGIRequest' object has no attribute 'user'
   <WSGIServer fileno=552 address=127.0.0.1:8888>: Failed to handle request:
    request = GET /favicon.ico HTTP/1.1 from ('127.0.0.1', 50325)
   application = <django.core.handlers.wsgi.WSGIHandler object at 0x022CDCB0> 
```

我环顾四周并尝试了许多建议的解决方案 - 我在 django 中的中间件看起来像这样。

```
 MIDDLEWARE_CLASSES = (

   'django.middleware.common.CommonMiddleware',
   'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
   'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
   # Uncomment the next line for simple clickjacking protection:
   # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
  ) 
```

这是引用 request.user 行的代码。

```
def menu(request):
"""
Adds the variable {{ user_menu }} to all the templates.

The menu is composed with items from each ECM app/plugin (see the menu.py files)
The items are dynamically displayed according to user accesses.
"""
user_menus = []
for menu in ECM_MENUS:
    if request.user.is_superuser or UrlPermission.user_has_access(request.user,        menu['url']):
        user_menus.append(menu)
data = {
    'menus': user_menus, 
    'path': str(request.get_full_path())
}
return {'user_menu': render_to_string('ecm/menu.html', data), 'request_path':        data['path']} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:03:33.843

我也有这个问题。在 settings.ini 中将 Debug 设置为 True。

# highslide - Highslide - 整个标题可拖动，带有多个扩展器

> ID：15579811
> 
> 赞同：0
> 
> 时间：2013-03-22T21:04:28.337
> 
> 标签：highslide

我之前问了一个关于 HighSlide 中可拖动标题的相关问题，我从 RoadRash 那里得到了答案。（非常感谢！）

但是，该解决方案似乎不允许使用 contentId，我认为我需要多个扩展器。

下面的代码有两个链接。他们都“工作”。第一个大致是我原来问题的解决方案，但它提出了一个新问题。第二种更像我最初使用的方法，它们大致相似。

我需要的应该具有两种方法的优点。我需要一个可以拖动文本的标题，我不想要调整大小的拇指，并且我需要能够为同一页面上的不同 html 扩展器引用多个 div。我相信 contentId 是必要的，但我可能是错的。

（要明白我的意思，请将代码粘贴到任何实现 HighSlide 的页面中，然后单击每个 Click me。）

非常感谢任何帮助。当答案有效时，我总是检查绿色检查，并且我总是赞成知识渊博的帮助尝试。

```
<!-- THIS WORKS, BUT DOES NOT ALLOW ME TO SPECIFY CONTENT FOR EACH LINK.  -->

<a href="javascript:;" onclick="
    hs.headingText = 'First header - entire top is draggable!';
    return hs.htmlExpand(this, {wrapperClassName: 'draggable-header', width: 550})" 
        title="Popup Title" 
        class="highslide">
    Click Me First!
</a>
<div class="highslide-maincontent">
    <h3>First Example</h3>
    This one can be dragged by the entire header area. (Good for me.)<br>
    However, it supplies a resizing thumb in the lower-right corner. (Bad for me.)<br>
    It does NOT use contentId. (Which is necessary for me because I have
    many expanders on the page.)                
</div>

<br>
<br>

<!-- THIS WORKS ALSO, BUT ONLY THE TEXT IS DRAGGABLE.  -->

<a href="javascript:;" onclick="
    hs.headingText = 'Second header - only text is draggable!';
    return hs.htmlExpand(this, {wrapperClassName: 'draggable-header', contentId: 'myContent', width: 550})" 
        title="Popup Title" 
        class="highslide">
    Click Me Second!
</a>
<div class="highslide-html-content" id="myContent">
        <div class="highslide-header">
        <ul>
            <li class="highslide-close">
                <a href="#" onclick="return hs.close(this)"></a>
            </li>
        </ul>
    </div>
    <div class="highslide-body">
    <h3>Second Example</h3>
    This one can ONLY be dragged by the text in the header area. (Bad for me.)<br>
    It does not supply a resizing thumb in the lower-right corner. (Good for me.)<br>
    It DOES use contentId.  (Necessary for me because I have
    many expanders on the page.)            
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:38:13.403

[您可以使用我在这里](https://stackoverflow.com/a/15565941/2021643)给您的解决方案（使用`highslide-maincontent`div）实现您想要的。

我们有一个预制的`wrapperClassName`用于删除带有调整大小图标的页脚，您可以将其添加到现有代码中，如下所示：`wrapperClassName: 'draggable-header no-footer'`

您可以在同一页面中使用任意数量的 highslide-maincontent 弹出窗口。只需确保将`highslide-maincontent`div 直接放置在结束锚标记之后`</a>`

现场演示：http: [//jsfiddle.net/roadrash/mXmLN/1/](http://jsfiddle.net/roadrash/mXmLN/1/)

# html - Tumblr 标题中心

> ID：15579813
> 
> 赞同：0
> 
> 时间：2013-03-22T21:04:32.653
> 
> 标签：html, tumblr

我想将我的 tumblr 博客标题居中，我的主题有点奇怪，所以他们只是将所有内容都推到了右边，但是当你缩小它时，它只是停留在左边，所以我将所有内容都居中，但我的标题仍然稍微向左。

我的博客是[http://lifes-good-but-homework-sucks.tumblr.com/](http://lifes-good-but-homework-sucks.tumblr.com/)（可以查看来源）

但我认为这是我需要编辑的部分

```
div#header{
z-index:555;
float:center;
background-color:transparent;
width: 920px;
height: auto;
margin-top: 30px;
margin-left: 0px;
padding: 30px;
float:center;
text-align: center;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:11:53.907

您的标题对于您的图像宽度来说太小了，因此图像向右延伸超出了它。虽然标题在技术上居中，但结果却不是内容（它向右溢出）。如果你去掉 header 元素的宽度，它会自动展开以包裹内容。

将图像正确包装在标题中后，请确保执行以下操作以使标题 div 居中：

```
margin-left: auto;
margin-right: auto; 
```

这会自动计算块元素并将其居中（与应用于块元素以将内联元素居中的文本对齐中心相反）

***现在***它应该正确居中。

# javascript - Durandal 激活函数内部的 .datepicker 调用不起作用

> ID：15579815
> 
> 赞同：10
> 
> 时间：2013-03-22T21:04:36.687
> 
> 标签：javascript, jquery, durandal

我在视图中撰写此内容，然后尝试在结果上调用 .datepicker() ，但没有任何反应。

**撰写容器**

```
<div>
<!--ko compose: { model:'viewmodels/schedule', view: 'views/schedule.html', activate:true} -->
<!--/ko-->
</div> 
```

**时间表.html**

```
<div class="schedule-editor">

</div> 
```

**和日程模块**

```
define([], function () {
    var vm = {
        activate: activate,
    };
    return vm;

    function activate() {
        $('.schedule-editor').datepicker();
        console.log("activated schedule module");
        return true;
    }
}); 
```

控制台记录“激活的计划模块”，但未创建日期选择器。如果我去 chrome 控制台并运行 jQuery 调用， `$('.schedule-editor').datepicker();`它会很好地调出日期选择器。

Durandal 文档声称激活函数是在 DOM 完全组合后调用的，所以我不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T23:10:38.277

就像 nemesv 提到的那样，您应该改用[viewAttached](http://durandaljs.com/documentation/Composition/)。

```
define([], function () {
    var vm = {
        viewAttached: viewAttached,
    };
    return vm;

    function viewAttached(view) {
        $(view).find('.schedule-editor').datepicker();
        console.log("activated schedule module");
        return true;
    }
}); 
```

在你的模型被数据绑定到新视图之前以及视图被添加到 dom 之前，激活发生在生命周期中。viewAttached 发生在视图数据绑定到模型并附加到 dom 之后。

# **编辑**

Durandal 2.0 已重命名`viewAttached`为`attached`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T19:07:40.910

还有另一种方法可以忠实于 knockout.js 和 durandal 所追求的声明性 UI 哲学。

它将允许您在 HTML 中声明日期选择器，如下所示：

```
<div class="schedule-editor" data-bind="
    jqueryui: { 
        widget: 'datepicker', 
        options: { 
            // you can set options here as per the jquery ui datepicker docs
        } 
    }">

</div> 
```

只需包含在此要点中找到的 jquery ui 小部件绑定：[https ://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets)

确保在加载 jquery、jquery ui 和敲除后包含上述 javascript。

# php - PHP向多个收件人发送电子邮件（不发送标题）

> ID：15579821
> 
> 赞同：0
> 
> 时间：2013-03-22T21:05:20.867
> 
> 标签：php, forms, email-headers

我有一个 index.html 和一个 contacto.php。

contacto.php 应该是为了将用户的信息发送给多个收件人，但它没有发送。

这是我的 index.html（忽略 javascript）

```
<form action="contacto.php" method="POST">

        <fieldset style="margin: 0px 0 0 0"; >
<br/><br/>  <br/><br/>  <br/><br/>  <br/><br/>

<input maxlength="255" name="Form testing" size="20" type="hidden" value="Form-name-here" /><br>    

 <input value="Nome" onfocus="if (this.value == 'Nome') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Nome';}" maxlength="255" name="name" size="20" type="text" /><br>

<input value="Telemóvel" onfocus="if (this.value == 'Telemóvel') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Telemóvel';}" id="phone" maxlength="40" name="phone" size="20" type="text" /><br>

<input onfocus="if (this.value == 'Email') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Email';}" value="Email" id="email" maxlength="80" name="email" size="20" type="text" /><br>

<input onfocus="if (this.value == 'Localidade') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Localidade';}" value="Localidade" maxlength="255" name="location" size="20" type="text" /><br> 
```

.

这是我的contacto.php：

```
<?php
 // Get Data
 $name = strip_tags($_POST['name']);
 $email = strip_tags($_POST['email']);
 $phone = strip_tags($_POST['phone']);
 $location = strip_tags($_POST['location']);

 $headers .="De: Form thingy <examplealpha@someemail.com>";
 $headers .="CC: Mail1 <example1@someemail.com>";
 $headers .=", Mail2 <example2@someemail.com>";

 header("Location: thankyou.html");  //Redirect to Thank You HTML page after email is sent

 // Send message
 mail( "example1@someemail.com", "Formulário Facebook Av. Grátis",
 "Name: $name\nEmail: $email\nPhone: $phone\nLocation: $location\n",
  $headers );
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:11:27.200

将标头位置重定向放在发送之后而不是之前

```
// Send message
mail( "example1@someemail.com", "Formulário Facebook Av. Grátis",
 "Name: $name\nEmail: $email\nPhone: $phone\nLocation: $location\n",
 $headers );

 header("Location: thankyou.html");  //Redirect to Thank You HTML page after email is sent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:18:54.030

**改变：**

```
$headers .="De: Form thingy <examplealpha@someemail.com>"; 
```

**到：**

```
$headers ="From: Form thingy <examplealpha@someemail.com>"; 
```

“De: 不是 PHP 手册的标准，请使用“From:....

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

[http://php.net/manual/fr/function.mail.php](http://php.net/manual/fr/function.mail.php)

**完整代码：**

```
<?php
// Get Data
$name = strip_tags($_POST['name']);
$email = strip_tags($_POST['email']);
$phone = strip_tags($_POST['phone']);
$location = strip_tags($_POST['location']);

$headers ="From: Form thingy <examplealpha@someemail.com>";
$headers .="CC: Mail1 <example1@someemail.com>";
$headers .=", Mail2 <example2@someemail.com>";

// Send message
mail( "example1@someemail.com", "Formulário Facebook Av. Grátis",
 "Name: $name\nEmail: $email\nPhone: $phone\nLocation: $location\n",
  $headers );

header("Location: thankyou.html");  //Redirect to Thank You HTML page after email is sent
?> 
```

# vim - 为 VIM 添加 GoLang 语法高亮

> ID：15579822
> 
> 赞同：62
> 
> 时间：2013-03-22T21:05:28.690
> 
> 标签：vim, go, vim-plugin, vim-syntax-highlighting

我正在尝试在 ubuntu 上向 VIM 添加 Go 语言语法突出显示，并在此处提供资源和方向[http://go-lang.cat-v.org/text-editors/vim/](http://go-lang.cat-v.org/text-editors/vim/)。

Go 附带一个`go.vim`包含 VIM 语法设置的文件，上面的页面提供了以下说明

**将 $GOROOT/misc/vim/syntax/go.vim 放入 ~/.vim/syntax/ 并将以下内容放入 ~/.vim/ftdetect/go.vim：**

```
au BufRead,BufNewFile *.go set filetype=go 
```

这或多或少与我在其他地方看到的自定义 vim 语法的过程相同（[Ubuntu 12.10 上的 Vim 7.3 在任何地方都没有 'ftplugin' 目录](https://stackoverflow.com/questions/12962233/vim-7-3-on-ubuntu-12-10-doesnt-have-ftplugin-directory-anywhere)和[https://github.com/jnwhiteh/vim-golang/blob /master/readme.txt](https://github.com/jnwhiteh/vim-golang/blob/master/readme.txt) )

所以我认为我在创建目录时做对了：
~/.vim
~/.vim/syntax
~/.vim/ftdetect

并按照上述说明添加

go.vim 到 ~/.vim/syntax/ 并在 ~/.vim/ftdetect/ 中创建一个文件 go.vim，其中包含

```
au BufRead,BufNewFile *.go set filetype=go 
```

然而语法高亮似乎没有发生。我需要做些什么来强制 VIM 查看这些新的设置文件吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-22T22:20:05.263

更新：

> [Go 1.4 发行说明](https://golang.org/doc/go1.4)
> 
> [杂记](https://golang.org/doc/go1.4#misc)
> 
> 标准存储库的顶级 misc 目录用于包含 Go 对编辑器和 IDE 的支持：插件、初始化脚本等。维护这些内容变得非常耗时，并且需要外部帮助，因为列出的许多编辑器并未被核心团队成员使用。它还要求我们决定哪个插件最适合给定的编辑器，即使对于我们不使用的编辑器也是如此。整个 Go 社区更适合管理这些信息。因此，在 Go 1.4 中，此支持已从存储库中删除。[取而代之的是，在wiki 页面](https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins)上有一个精选的、内容丰富的列表。

* * *

标准的 Go 发行版包括用于 Vim 的 Go 文件`go/misc/vim/`。该目录包含一个`readme.txt`包含安装说明的文件。

> [`readme.txt`](https://code.google.com/p/go/source/browse/misc/vim/readme.txt)
> 
> Go 的 Vim 插件 ( `http://golang.org`)
> 
> 要使用所有 Vim 插件，请将这些行添加到您的`$HOME/.vimrc`.
> 
> ```
> " Some Linux distributions set filetype in /etc/vimrc.
> " Clear filetype flags before changing runtimepath to force Vim to reload them.
> filetype off
> filetype plugin indent off
> set runtimepath+=$GOROOT/misc/vim
> filetype plugin indent on
> syntax on 
> ```
> 
> 如果您想选择更少的插件，请使用此文件其余部分中的说明。
> 
> <<..剪辑..>>

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-06-25T20:17:26.987

在 Debian 上，我想在 ubuntu 上是一样的，你只是：

```
sudo apt-get install vim-gocomplete gocode vim-syntax-go
vim-addon-manager install go-syntax
vim-addon-manager install gocode 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-22T22:08:26.983

您可以将这些行添加到您的`~/.vimrc`：

```
set rtp+=$GOROOT/misc/vim
filetype plugin indent on
syntax on 
```

**编辑**这假设`filetype plugin indent off`在这些行之前（即`.vimrc`文件的开头），如果不是，可能会导致问题。有关更安全的版本，请参阅下面的@peterSO 答案。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-04-06T17:18:58.653

要获得最佳语法突出显示，请尝试[https://github.com/fatih/vim-go](https://github.com/fatih/vim-go)

这是一个新项目，整合了许多 vim 插件并添加了许多功能。从自述文件：

*   改进的语法突出显示，例如函数、运算符、方法..
*   通过 gocode 支持自动完成
*   保存时更好的 gofmt，保持光标位置并且不会破坏您的撤消历史记录
*   使用 godef 转到符号/声明
*   通过 goimports 自动导入包
*   编译并构建你的包，用 go install 安装它
*   快速运行您当前的文件/文件
*   运行 go test 并在 quickfix 窗口中查看任何错误
*   用 golint 整理你的代码
*   通过 go vet 运行您的代码以捕获静态错误。
*   带有 oracle 的高级源分析工具
*   列出所有源文件和依赖项
*   使用 errcheck 检查未检查的错误。
*   集成和改进的片段。支持 ultisnips 或 neosnippet
*   将您当前的代码分享到 play.golang.org

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-01-25T16:30:06.633

2015 年 1 月 25 日

请参阅[https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins](https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins)，因为现在 Go repo 中的所有编辑器和 shell 支持都已删除（[https://codereview.appspot.com/105470043](https://codereview.appspot.com/105470043)）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-04T07:05:12.187

我没有找到有关为 CentOS 7 打开 vim 语法突出显示的说明。已经测试了随后的说明以在 CentOS 7.3.1611 上工作。首先，在您的主目录中创建以下目录：

```
$ mkdir ~/.vim/ftdetect/ 
```

然后，`go.vim`在上述目录中创建一个名为的文件，其内容为：

```
au BufRead,BufNewFile *.go set filetype=go 
```

下载 Go 的语法定义文件：[vim.go](https://www.vim.org/scripts/download_script.php?src_id=11735)。将其传输到正确的系统范围目录，以便多个用户可以共享：

```
$ sudo mv -i go.vim /usr/share/vim/vim74/syntax/ 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-02T22:23:17.407

出于我自己决定之外的任何原因，我们通过 Debian 软件包在我们的开发虚拟机上安装了 Golang。据我通过搜索得知，这种特殊的 vim 发行版并没有附带任何 vim 的好东西。无论如何，我决定走 vundle 路线，以便将好东西快速部署到所有这些开发虚拟机。如果您愿意，您可能可以将此方法用于 puppet 或其他东西，但我们没有这样做。无论如何，这就是我所做的：

第 1 步：安装 vundle： [https ://github.com/gmarik/vundle](https://github.com/gmarik/vundle)

第2步：将这一行放在你的.vimrc中（当然是从这里开始：[https](https://github.com/jnwhiteh/vim-golang) ://github.com/jnwhiteh/vim-golang ），然后从命令行运行vim，`vim +BundleInstall +qall`或者从vim中运行`:BundleInstall`

```
Bundle 'jnwhiteh/vim-golang' 
```

第 3 步：将我创建的这个小 bash 脚本保存为 govim.sh 或其他文件，`chmod +x govim.sh`然后像这样运行它`./govim.sh`

脚本如下：

```
#!/bin/bash
mkdir $HOME/.vim/ftdetect
mkdir $HOME/.vim/syntax
mkdir $HOME/.vim/autoload
mkdir $HOME/.vim/autoload/go
mkdir $HOME/.vim/ftplugin
mkdir $HOME/.vim/ftplugin/go
mkdir $HOME/.vim/indent
mkdir $HOME/.vim/compiler
mkdir $HOME/.vim/plugin
mkdir $HOME/.vim/plugin/godoc
ln -s $HOME/.vim/bundle/vim-golang/ftdetect/gofiletype.vim $HOME/.vim/ftdetect
ln -s $HOME/.vim/bundle/vim-golang/syntax/go.vim $HOME/.vim/syntax/
ln -s $HOME/.vim/bundle/vim-golang/autoload/go/complete.vim $HOME/.vim/autoload/go/
ln -s $HOME/.vim/bundle/vim-golang/ftplugin/go.vim $HOME/.vim/ftplugin/
ln -s $HOME/.vim/bundle/vim-golang/ftplugin/go/*.vim $HOME/.vim/ftplugin/go/
ln -s $HOME/.vim/bundle/vim-golang/indent/go.vim $HOME/.vim/indent/
ln -s $HOME/.vim/bundle/vim-golang/compiler/go.vim $HOME/.vim/compiler/
ln -s $HOME/.vim/bundle/vim-golang/plugin/godoc/godoc.vim $HOME/.vim/plugin/godoc/
ln -s $HOME/.vim/bundle/vim-golang/syntax/godoc.vim $HOME/.vim/syntax/ 
```

卡庆！你现在已经安装了所有的好东西，如果我错了，有人纠正我，但可能比官方 Golang 发行版附带的更多。我还没有尝试过，对此我不知道，但我认为如果你在这里使用 Vundle 和其他答案，runtimepath/rtp 会被破坏。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-12-24T15:30:29.993

它应该很容易 1, 2, 3 ：

1.  下载文件[vim.go](https://www.vim.org/scripts/download_script.php?src_id=11735)并将其放在`~/.vim/syntax`名称下（如果您还没有该目录，请`go.vim`创建该目录）。`syntax`

2.  如果您还没有该文件`~/.vim/ftdetect/go.vim`，请创建它（必要时创建文件夹）。

3.  在`.vim/ftdetect/go.vim`中，添加以下行：`au BufRead,BufNewFile *.go set filetype=go`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-16T14:36:52.443

这个[页面](http://go-lang.cat-v.org/text-editors/vim/)说：

```
Place $GOROOT/misc/vim/syntax/go.vim in ~/.vim/syntax/ 
and put the following in ~/.vim/ftdetect/go.vim:

au BufRead,BufNewFile *.go set filetype=go 
```

它对我有用，只是我一开始没有找到 /misc/vim/go.vim 目录。所以我从另一台安装了 go on /usr/local/go/... 的计算机上复制了文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-22T06:11:32.197

这就是在 MAC 中对我有用的

*   安装 vim-go - [https://github.com/fatih/vim-go](https://github.com/fatih/vim-go)
*   将 .vimrc 设置为以下

```
let g:tagbar_type_go = {
        \ 'ctagstype' : 'go',
        \ 'kinds'     : [
                \ 'p:package',
                \ 'i:imports:1',
                \ 'c:constants',
                \ 'v:variables',
                \ 't:types',
                \ 'n:interfaces',
                \ 'w:fields',
                \ 'e:embedded',
                \ 'm:methods',
                \ 'r:constructor',
                \ 'f:functions'
        \ ],
        \ 'sro' : '.',
        \ 'kind2scope' : {
                \ 't' : 'ctype',
                \ 'n' : 'ntype'
        \ },
        \ 'scope2kind' : {
                \ 'ctype' : 't',
                \ 'ntype' : 'n'
        \ },
        \ 'ctagsbin'  : 'gotags',
        \ 'ctagsargs' : '-sort -silent'
\ }

let g:go_highlight_structs = 1
let g:go_highlight_methods = 1
let g:go_highlight_functions = 1
let g:go_highlight_operators = 1
let g:go_highlight_build_constraints = 1
syntax on 
```

*   安装 gotags - 例如 brew install gotags
*   生成 ctags - 例如 gorags -R 。> ./标签
*   从新的 shell 打开 vim

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-22T21:23:05.797

原来上面的方向有点模棱两可。

`~/.vim/syntax/go.vim`应该有相同的内容`~/.vim/ftdetect/go.vim`

only`~/.vim/ftdetect/go.vim`必须附加`au BufRead,BufNewFile *.go set filetype=go`.

如果从字面上理解，说明会告诉您创建一个`~/.vim/ftdetect/go.vim`仅包含

```
 au BufRead,BufNewFile *.go set filetype=go 
```

我想这就是上下文知识应该发挥作用的地方。只是我以前从未这样做过，也没有这样的上下文。谢谢大家！

# vb.net - 一旦我尝试读取标准输出或错误，VB.Net 进程就会退出

> ID：15579825
> 
> 赞同：0
> 
> 时间：2013-03-22T21:05:40.787
> 
> 标签：vb.net, process, redirectstandardoutput

## 最初的问题

如果此问题已在其他地方提出并解决，我深表歉意；我搜索了这个网站，整个谷歌都没有任何运气。

我正在尝试编写一个简单的 VB.Net Windows 窗体应用程序，以允许用户使用非常简单的 GUI 运行 Windows 文件比较程序 (fc.exe)（“浏览”按钮选择文件，复选框选择修饰符，以及输出的文本框）。

问题是每当我尝试从进程中读取标准输出或错误时，它会立即停止，并且没有任何输出。我已经通过将“createnowindow”设置为 False 并且不重定向输出或错误来验证进程参数是否正确。

为了查看进程是否实际运行，我在 proc.start 之后放置了一个“while”循环：

```
Do While proc.HasExited = False
textbox.AppendText(i & vbNewLine)
i += 1
Loop 
```

如果进程正常运行，我会得到大约 80 或 90 的计数。如果我对标准输出或标准错误做任何事情，文本框只会显示初始值“0”。通过“任何东西”，我的意思是分配`proc.StandardOutput.ReadToEnd`给一个变量。如果我使用`proc.StandardOutput.Peek`，它会返回 a`-1`并且循环保持在 0。

我注意到，如果我只重定向输出*或*错误（但不是两者），并且我启用该进程以打开一个新窗口，则新窗口为空并立即退出（即使我没有尝试读取重定向的在我的代码中流），而如果两者都没有被重定向，它会显示几页结果，然后退出。我不知道这是否正常，或者文件比较可执行文件是否以某种方式混合了输出和错误流以生成其输出，或者类似的事情是否可能。

一般来说，我对编码非常陌生（我已经使用 VB.net 大约一个月了，这就是我的编程经验的程度），所以我知道我的故障排除和假设可能完全不符合实际，我感谢任何人可以提供的任何帮助。事实上，我完全陷入困境，而且我的经验不足使得寻找替代品变得困难（例如，我无法弄清楚如何正确处理异步输出）。作为参考，这是我目前的笨拙代码：

```
Dim cmdinput As String = """" & file1path & """" & " " & """" & file2path & """"
    Dim cmdmods As String = " "
    Dim i As Integer = 0
    Dim proc As New Process
    proc.StartInfo.CreateNoWindow = True
    proc.StartInfo.UseShellExecute = False
    proc.StartInfo.FileName = "C:\Windows\System32\fc.exe"
    proc.StartInfo.Arguments = cmdinput & cmdmods
    proc.StartInfo.RedirectStandardOutput = True
    proc.StartInfo.RedirectStandardError = True
    proc.Start()
    proc.StandardOutput.ReadToEnd()

    Do While proc.HasExited = False
        scanbox.AppendText(i & vbNewLine)

        i += 1
    Loop 
```

## 可能的解决方案

在 Hans Passant 指出我应该看到错误之后，如果没有其他问题，我就弄乱了我的代码并能够得到一个结果，尽管不是最优的。我没有直接运行 FC.exe，而是运行了 CMD.exe。我以前试过这个但没有运气，但那是因为 CMD.exe 不接受“fc”作为 process.startinfo.arguments。

我使用 proc.standardinput.writeline() 将“fc”传递给 cmd.exe。此时我能够读取 CMD.exe 的重定向输出。我仍然不知道为什么我不能直接读取 FC.exe，但同时这是一个很好的创可贴。如果其他人觉得需要将 GUI 添加到一个非常好的命令行可执行文件并遇到问题，这是我的代码：

```
Public Sub compare()
    Dim cmdinput As String = "fc " & """" & file1path & """" & " " & """" & file2path & """"
    Dim cmdmods As String = " "
    Dim proc As New Process
    proc.StartInfo.CreateNoWindow = True
    proc.StartInfo.UseShellExecute = False
    proc.StartInfo.FileName = "C:\Windows\System32\cmd.exe"
    proc.StartInfo.Arguments = cmdinput & cmdmods
    proc.StartInfo.RedirectStandardOutput = True
    proc.StartInfo.RedirectStandardError = True
    proc.StartInfo.RedirectStandardInput = True
    proc.Start()
    proc.StandardInput.WriteLine(cmdinput)
    proc.StandardInput.Close()
    scanbox.AppendText(proc.StandardOutput.ReadToEnd)
    proc.WaitForExit()
    proc.Close()
    proc.Dispose()
End Sub 
```

我非常感谢 Hans Passant 和 Dan Verdolino 耐心地为我漫无边际的问题提供建议。一个星期以来，我一直把头撞在墙上，试图拼凑出某种方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:05:30.293

## 解决方案

我没有直接运行 FC.exe，而是运行了 CMD.exe。我以前试过这个但没有运气，但那是因为 CMD.exe 不接受“fc (args)”作为 process.startinfo.arguments。

我使用 proc.standardinput.writeline() 将“fc (args)”传递给 cmd.exe。此时我能够读取 CMD.exe 的重定向输出。我仍然不知道为什么我不能直接读取 FC.exe 的输出或错误，但同时这是一个很好的创可贴。如果其他人觉得需要将 GUI 添加到一个非常好的命令行可执行文件并遇到问题，这是我的代码：

```
Public Sub compare()
    Dim cmdinput As String = "fc " & """" & file1path & """" & " " & """" & file2path & """"
    Dim cmdmods As String = " "
    Dim proc As New Process
    proc.StartInfo.CreateNoWindow = True
    proc.StartInfo.UseShellExecute = False
    proc.StartInfo.FileName = "C:\Windows\System32\cmd.exe"
    proc.StartInfo.Arguments = cmdinput & cmdmods
    proc.StartInfo.RedirectStandardOutput = True
    proc.StartInfo.RedirectStandardError = True
    proc.StartInfo.RedirectStandardInput = True
    proc.Start()
    proc.StandardInput.WriteLine(cmdinput)
    proc.StandardInput.Close()
    scanbox.AppendText(proc.StandardOutput.ReadToEnd)
    proc.WaitForExit()
    proc.Close()
    proc.Dispose()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T08:00:43.040

```
Private Delegate Sub InvokeWithString(ByVal text As String)
Public Sub StartFC()
    Private psi As ProcessStartInfo
    Private cmd As Process

Dim CMDINPUT As String = "fc " & """" & file1path & """" & " " & """" & file2path & """"
       Dim FileToHit As String = "c:\windows\system32\fc.exe "

 psi = New ProcessStartInfo(FileToHit)
        Dim systemencoding As System.Text.Encoding = _
            System.Text.Encoding.GetEncoding(Globalization.CultureInfo.CurrentUICulture.TextInfo.OEMCodePage)

        With psi
            .Arguments = CMDINPUT 
            .UseShellExecute = False   ' Required for redirection
            .RedirectStandardError = True
            .RedirectStandardOutput = True
            .RedirectStandardInput = True
            .CreateNoWindow = True
            .StandardOutputEncoding = systemencoding  
            .StandardErrorEncoding = systemencoding
        End With

        ' EnableraisingEvents is required for Exited event
        cmd = New Process With {.StartInfo = psi, .EnableRaisingEvents = True}
        AddHandler cmd.ErrorDataReceived, AddressOf Async_Data_Received
        AddHandler cmd.OutputDataReceived, AddressOf Async_Data_Received
        AddHandler cmd.Exited, AddressOf CMD_Exited
        cmd.Start()
        pID1 = cmd.Id
        cmd.BeginOutputReadLine()
        cmd.BeginErrorReadLine()
        Me.txtInputStringIn.Select() ' textbox where you can send more commands. 
End Sub
'This event fires when process exited
 Private Sub CMD_Exited(ByVal sender As Object, ByVal e As EventArgs)
        'Me.Close()
        MessageBox.Show("Process is exited.")
    End Sub
'This part calls when Output received 
    Private Sub Async_Data_Received(ByVal sender As Object, ByVal e As DataReceivedEventArgs)
        Me.Invoke(New InvokeWithString(AddressOf Sync_Output), e.Data)
    End Sub

    Private Sub Sync_Output(ByVal text As String)
'an output textbox will show the output of the command prompt.
        txtOutPut.AppendText(text & Environment.NewLine)
        txtOutPut.ScrollToCaret()
    End Sub 
```

# php - WordPress 插件页脚菜单错误

> ID：15579829
> 
> 赞同：0
> 
> 时间：2013-03-22T21:05:59.853
> 
> 标签：php, wordpress

我收到一个插件的开箱即用错误，我想知道是否有快速修复。

我已经用谷歌搜索了这个问题并检查了插件网站的创建者。没有帮助。

该插件需要：

```
<?php do_shortcode('[print_wp_footer]'); ?> 
```

为主题添加到 Footer.php。

WordPress然后给出一个错误：

```
Warning: Invalid argument supplied for foreach() in /.../wp-content/plugins/wp-footer-menu/main.php on line 192 
```

这是自己的行

```
foreach ($values as $attr=>$val) { 
```

这是带有箭头的“192”行的代码部分。

```
<?php

}

function wp_footer_menu_confirm_delete ($delete) {

$base_uri = wp_footer_menu_base_uri();

// Find out about this menu item.
$menu_items = get_option ( 'footer_menu_links' );
$item_to_delete = explode( ',', $menu_items[$delete] );
$item_title = $item_to_delete[0];
$item_address = $item_to_delete[1];

// Create form for user to confirm option.
echo '<h3>Confirm Delete</h3>';
echo '<p>Are you sure you want to delete this menu item?</p>';
echo '<p>Title: ' . $item_title . '</p>' ;
echo '<p>Address: ' . $item_address . '</p>';
echo '<form method="post" action="' . $base_uri . '">';
echo '<input type="hidden" name="delete_key" value="' . $delete . '" />';
echo wp_nonce_field( 'confirm_delete', 'delete' );
echo '<input type="submit" class="button-primary" value="Delete item" />';
echo '</form>';

}

function wp_footer_menu_process() {

if ( isset( $_GET[ 'delete' ] ) ) {
    $nonce = $_GET ['nonce'];
    if ( wp_verify_nonce( $nonce, 'footer_delete' ) ) {
        wp_footer_menu_confirm_delete ( $_GET[ 'delete' ] );
    }
    return 0;
} else if ( isset( $_POST[ 'delete_key' ] ) && check_admin_referer ( 'confirm_delete', 'delete' ) ) {

    $menu_items = get_option ( 'footer_menu_links' );
    $key = $_POST['delete_key'];
    unset ( $menu_items[$key] );
    update_option ( 'footer_menu_links', $menu_items );

}

if ( isset( $_POST[ 'link_title' ] ) && check_admin_referer( 'footer_menu', 'add' ) ) {

    $link_title = $_POST ['link_title'];
    $link_address = $_POST ['link_address'];
    $link_order = $_POST ['link_order'];
    $new_link = $link_title . ',' . $link_address . ',' . $link_order;

    $footer_links = get_option( 'footer_menu_links' );
    if ($footer_links == '') {
        $footer_links = array();
    }
    $new_links = array_push( $footer_links, $new_link );
    update_option ( 'footer_menu_links', $footer_links );
}

if ( isset( $_POST[ 'font-size' ] ) && check_admin_referer( 'footer_menu', 'save' ) ) {
    if (empty($_POST['auto-footer'])) {
        $_POST['auto-footer'] = 'no';
    }
    if (empty($_POST['auto-sticky'])) {
        $_POST['auto-sticky'] = 'no';
    }
    update_option('wp_footer_values', $_POST);
    echo '<div class="wp_footer_info" style="margin:0 auto;margin-top:5px;text-align:center;">Customizations Saved</div>';
}

return 1;

}

function wp_footer_print_menu() {
$menu = wp_footer_get_menu();
$values = get_option('wp_footer_values');
--192-->    foreach ($values as $attr=>$val) {
    $menu = str_replace('%' . $attr . '%', stripslashes($val), $menu);
}
echo $menu;
if ($values['auto-sticky'] == 'yes') {
    ?>
    <style type="text/css">
        .wp_footer_sticky {
            position:fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    <script type="text/javascript">
        jQuery(document).ready(function($) {
            $('#wp_footer_menu').addClass('wp_footer_sticky');
        });
    </script>
    <?php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:42:44.923

它似乎取决于以下代码的返回值：

```
$values = get_option('wp_footer_values'); 
```

根据 WordPress 代码，如果该选项不存在，则返回布尔值 FALSE。您需要验证该`$values`变量是否为空。检查以下代码。

```
function wp_footer_print_menu() {
$menu = wp_footer_get_menu();
$values = get_option('wp_footer_values');
if (!empty($values)) { // <-- verify it's not empty
  foreach ($values as $attr=>$val) {
    $menu = str_replace('%' . $attr . '%', stripslashes($val), $menu);
  }
  echo $menu;
  // [...}
} // <-- don't forget to close the if statement just after the end of the foreach statement 
```

希望有所帮助。

来源：[get_option()](http://codex.wordpress.org/Function_Reference/get_option)

# html - VBA 与网页上的单选按钮交互

> ID：15579830
> 
> 赞同：5
> 
> 时间：2013-03-22T21:06:01.210
> 
> 标签：html, excel, internet-explorer, vba, radio-button

编辑：几个月后，我再次尝试使用与第一次尝试相同的语法（在下面发布）。出于某种原因，它奏效了！也许我的语法以外的其他东西导致了无效......结束编辑

我已经在论坛上搜索了几个小时，试图找到解决这个问题的方法，但是我尝试过的所有方法都不起作用。

我正在使用 VBA 来自动化在 SurveyMonkey 上创建调查的过程。到目前为止，我已经能够：

*   登录我的帐户，
*   单击几个超链接以创建新的响应收集器，
*   命名收藏家，
*   转到收集器设置，
*   并且，选择四个单选按钮中的三个来更改收集器设置。

问题不在于我无法选择单选按钮；我的代码选择了前三个按钮就好了。令我困惑的是，第四个按钮并没有改变！我对每个按钮使用相同的过程，所以我无法弄清楚为什么最后一个按钮不会选择。

这是我的代码部分：

```
objIE.Document.getElementById("rdlResponseType_1").Click    'Allow multiple responses = Yes
objIE.Document.getElementById("rdlResponseEdit_1").Click    'Allow Responses to be Edited = Yes
objIE.Document.getElementById("rdlThankyou_1").Click        'Display a "Thank You" page? = Yes
objIE.Document.getElementById("rdlCompleteOpt_1").Click     'Survey Completion = Close Window 
```

这是单选按钮的 HTML：

```
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%;">
                        <tr id="CompleteOptDesc">
            <td style="">&nbsp;</td>
            <td>After the respondent leaves the survey:</td>
        </tr>

                        <tr id="CompleteOptItems">
            <td style="">&nbsp;</td>
            <td align="left" nowrap="nowrap" valign="top">
                                <table id="rdlCompleteOpt" class="Clean radioList" OnClick="radioToggle('rdlCompleteOpt', '0', 'panLink');" name="rdlCompleteOpt" border="0" style="white-space: nowrap">
                <tr>
                    <td><span style="white-space: nowrap"><input id="rdlCompleteOpt_0" type="radio" name="rdlCompleteOpt" value="0" checked="checked" /><label for="rdlCompleteOpt_0"><b>Redirect</b> to your own webpage.</label></span></td>
                </tr><tr>
                    <td><input id="rdlCompleteOpt_1" type="radio" name="rdlCompleteOpt" value="2" /><label for="rdlCompleteOpt_1"><b>Close Window</b></label></td>
                </tr>
            </table> 
```

这是收音机切换部分的代码：

```
<td width="65%" valign="top">
                                <div id="panLink" style="DISPLAY:inline">

                                    <div class="URLinfo">

                                            <b>Enter a URL</b> to jump to upon leaving the survey:<br />
                                            <div title="REQUIRED: Enter URL (255 character max)" style="padding:4px 0 2px 0;">
                                                <input name="txtWebLink" type="text" value="http://www.surveymonkey.com/" maxlength="255" size="40" id="txtWebLink" class="RQR opaque" />
                                            </div>
                                            <span class="tip">Example: <u>http://www.mysite.com/home.html</u></span>
                                    </div>

            </div>
                            </td> 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T17:51:50.640

有几件事需要考虑：

1.  你什么时候调用这个代码？OnNavigate 还是 DocumentComplete？可能该对象还不存在。您可以通过使用断点并为表达式添加监视来检查它是否存在

    ```
    objIE.Document.getElementById("rdlCompleteOpt_1") 
    ```

    使用 OnDocumentComplete 确保 HTML 组件存在

2.  您调用 click 函数的方式可能会导致问题。尝试这个

    ```
    Call objIE.Document.getElementById("rdlCompleteOpt_1").Click() 
    ```

    我怀疑它可能会产生很大的影响，但我喜欢验证一切。

3.  通过删除“层”来隔离问题的原因。您可以使用从 IE 开发工具 (F12) JavaScript 控制台调用的纯 JavaScript 来完成此操作吗？

    如果不是，那么问题在于您如何与页面元素进行交互。如果是，那么我们需要弄清楚 VBA 完整性是什么导致了问题。再次参见＃2，因为它可能是问题的原因。

    另外，如果您更改元素的 HTML 顺序，是否会出现问题？如果你这样称呼它呢？

    ```
    objIE.Document.getElementById("rdlCompleteOpt_1").Click     'Survey Completion = Close Window
    objIE.Document.getElementById("rdlResponseType_1").Click    'Allow multiple responses = Yes
    objIE.Document.getElementById("rdlResponseEdit_1").Click    'Allow Responses to be Edited = Yes
    objIE.Document.getElementById("rdlThankyou_1").Click        'Display a "Thank You" page? = Yes 
    ```

    那么它会起作用还是“最后一个”项目失败了？

4.  极不可能是原因，但 HTML 供应缺少关闭单元格、行和表格的代码。

    ```
     </tr>

        </table>
       <!-- missing -->
       </td>
      </tr>
    </table> 
    ```

5.  虽然不是您问题的具体答案，但我相信这可能符合您帖子的意图。既然您想管理一个surveymonkey 收集器，请在[此处查看SurveyMonkey API，](https://developer.surveymonkey.com/mashery/get_collector_list)因为使用API​​ 会给您带来很多好处。

    *   您不必依赖可能会在您的控制范围之外更改或更改的用户元素
    *   您可以使用受控和“约定”的界面来管理涵盖您的信息以应对未来的任何更改（假设它们不弃用并停止支持 API）

# c# - TestInitialize 和 TestCleanup 在 DataTestMethod 的每个 DataRow 之前和之后没有运行

> ID：15579833
> 
> 赞同：8
> 
> 时间：2013-03-22T21:06:12.587
> 
> 标签：c#, unit-testing, windows-phone-8, windows-phone, vs-unit-testing-framework

您可以在下面看到一些在 Window Phone 单元测试应用程序中使用 Mstest 编写的代码。
我有一个名为 TestMethod1 的普通 TestMethod*和一个名为**TestMethod2*的 DataTestMethod ，它具有三个 DataRows：

```
[TestClass]
public class UnitTest1
{
    [TestInitialize]
    public void Setup()
    {
        Debug.WriteLine("TestInitialize");
    }

    [TestMethod]
    public void TestMethod1()
    {
        Debug.WriteLine("TestMethod1");
    }

    [DataTestMethod]
    [DataRow("a")]
    [DataRow("b")]
    [DataRow("c")]
    public void TestMethod2(string param)
    {
        Debug.WriteLine("TestMethod2 param=" + param);
    }

    [TestCleanup]
    public void TearDown()
    {
        Debug.WriteLine("TestCleanup");
    }
} 
```

如果我在调试模式下运行测试（Visual Studio 中的 Ctrl+R、Ctrl+T），我会在输出面板中看到：

> **TestInitialize**
> TestMethod1
> **TestCleanup**
> **TestInitialize**
> TestMethod2 param=c
> TestMethod2 param=a
> TestMethod2 param=b
> **TestCleanup**

如您所见，TestInitialize 只执行了两次：一次在 TestMethod1 之前，一次在 TestMethod2 之前，参数为 c。
TestCleanup 也是如此，它在 TestMethod1 之后执行一次，在最后执行一次。

我希望在每次测试之前和之后执行 TestInitialize 和 TestCleanup，无论它是 TestMethod 还是 DataTestMethod。否则，一个测试的执行会影响下一个测试。

我希望它是这样的：

> **TestInitialize**
> TestMethod1
> **TestCleanup**
> **TestInitialize**
> TestMethod2 param=c
> **TestCleanup**
> **TestInitialize**
> TestMethod2 param=a
> **TestCleanup**
> **TestInitialize**
> TestMethod2 param=b
> **TestCleanup**

我没有发现其他人有同样的问题，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T20:46:34.467

我对此有点陌生，但我认为如果你`[DataTestMethod]`用`[TestMethod]`属性标记它，它应该为每个测试方法运行初始化和清理。

```
[TestMethod]
[DataTestMethod]
[DataRow("a")]
[DataRow("b")]
[DataRow("c")]
public void TestMethod2(string param)
{
    Debug.WriteLine("TestMethod2 param=" + param);
} 
```

**更新：** 微软说：[TestCleanupAttribute](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcleanupattribute.aspx) “将在标有TestMethodAttribute的方法之后运行......”

当我对此进行测试时，它确实有效。当您说它不起作用时，请提供更多详细信息。

如果您希望每个测试类只运行一次初始化程序，您可以使用属性 TestClass Attribute。[看到这个帖子。](https://stackoverflow.com/a/1873572/1280057)

```
// Use ClassInitialize to run code before running the first test in the class
[ClassInitialize()]
public static void MyClassInitialize(TestContext testContext) { }

// Use ClassCleanup to run code after all tests in a class have run
[ClassCleanup()]
public static void MyClassCleanup() { } 
```

# symfony - 在 Symfony 2 中使用表单生成器更新实体/数据库记录

> ID：15579836
> 
> 赞同：0
> 
> 时间：2013-03-22T21:06:18.193
> 
> 标签：symfony, symfony-2.1, symfony-forms

我从数据库中选择了一个实体/记录并将其传递给我的表单。表单加载正确，但是当我点击保存时，它会添加一条新记录而不是更新现有记录。

计划控制器.php

```
public function editPlanAction($id, Request $request)
{
    $em = $this->getDoctrine()->getManager();
    $plan = $em->getRepository('etrakOnlineOrderProcessingBundle:Plan')->find($id);

    if (!$plan && !$request->isMethod('POST')) {
        throw $this->createNotFoundException(
                'No plan found for id ' . $id
        );
    }

    $form = $this->createForm(new PlanType(), $plan);

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            $editPlan = $form->getData();
            $em->flush();
        }
    }

    return $this->render('etrakCustomerServiceBundle:Plan:edit.html.twig', array('form' => $form->createView()));
} 
```

路由.yml

```
 etrak_customer_service_plan_edit:
       pattern: /plan/edit/{id}
       defaults: { _controller: etrakCustomerServiceBundle:Plan:editPlan } 
```

计划类型.php

```
 namespace etrak\CustomerServiceBundle\Form\Type;

    use Symfony\Component\Form\AbstractType;
    use Symfony\Component\Form\FormBuilderInterface;
    use Symfony\Component\OptionsResolver\OptionsResolverInterface;

    class PlanType extends AbstractType
    {
        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setDefaults(array(
                'data_class' => 'etrak\OnlineOrderProcessingBundle\Entity\Plan',
                'cascade_validation' => true,
            ));
        }

        public function buildForm(FormBuilderInterface $builder, array $options)
        {
            $termsConditionsArray = array("NONE" => "No Contract", "1 Year Contract" => "1 Year Contract", "2 Year Contract" => "2 Year Contract");
            $billingFrequencyArray = array("1" => "Monthly", "6" => "6 Months", "12" => "Yearly");

            // Create the form
            $builder->add('name', 'text', array('label' => 'Plan Name: ', 'required' => false));
            $builder->add('description', 'text', array('label' => 'Plan Description: ', 'required' => false));
            $builder->add('termsConditions', 'choice', array('choices' => $termsConditionsArray, 'label' => 'Terms & Conditions', 'required' => false));
            $builder->add('amount', 'text', array('label' => 'Plan Price: ', 'required' => false));
            $builder->add('affinity', 'choice', array('choices' => array('0' => 'Yes', '1' => 'No'), 'label' => 'Affinity? ', 'expanded' => true, 'required' => false));
            $builder->add('deactivationFee', 'text', array('label' => "Deactivation Fee: ", 'required' => false));
            $builder->add('recurringInMonths', 'choice', array('choices' => $billingFrequencyArray, 'label' => 'Billing Frequency: ', 'required' => false));
            $builder->add('pricingTier', 'entity', array(
                'class' => 'etrakOnlineOrderProcessingBundle:pricingTier',
                'property' => 'name',
                'label' => "Select Pricing Tier: "
            ));
            $builder->add('activeStartDate', 'datetime', array('label' => "Effective Start Date: ", 'required' => false));
            $builder->add('activeEndDate', 'datetime', array('label' => "Effective End Date: ", 'required' => false));
        }

        public function getName()
        {
            return 'plan';
        }
    } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:12:04.060

问题是您没有发布计划对象的 ID。因此，当您执行 getData 时正在创建一个新的。将 id 添加为隐藏字段或将其添加到模板中的帖子 url。实际上，我认为隐藏字段不会起作用。可能只需要更新帖子网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:30:28.063

```
if ($form->isValid()) {
        $editPlan = $form->getData();
        $em->persist($editPlan);
        $em->flush();
} 
```

也许你忘记了*持久化*实体。

# ios - ios - xCode 目标包标识符摘要无法编辑

> ID：15579854
> 
> 赞同：0
> 
> 时间：2013-03-22T21:08:06.400
> 
> 标签：ios, xcode

我正在尝试存档一个项目，但我的包标识符不匹配。我试图在 xCode 的目标中编辑包标识符 - >摘要 我试图编辑包标识符，其结构如下：com.abc 和 com 是可编辑的，“xyz”不可编辑并变灰。

有谁知道为什么会发生这种情况以及我该如何解决？

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:09:32.830

您可以直接进入项目的 plist 并对其进行修改。

# mvvm - 更新 ViewModel 时如何防止 Kendo UI Grid 多次重新绑定

> ID：15579857
> 
> 赞同：8
> 
> 时间：2013-03-22T21:08:37.287
> 
> 标签：mvvm, kendo-ui, kendo-grid

当您使用 MVVM 绑定到 Kendo UI Grid 时，数据绑定将触发一次，一切都很好。如果您需要事后更新该数据，则每次更改任何视图模型（或子视图模型）上的一条数据时，整个网格都会重新绑定数据。因此，如果网格中有一些绑定到模板的单元格，并且您必须从某个外部 ajax 源更改视图模型上的 2 或 3 个属性，则 Databound 将为每个更改的模型触发 2 或 3 次，从而导致整个可视区域重新绑定。我们如何一次更新大量数据并且只触发一次数据绑定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T21:22:40.897

你究竟是如何重新绑定网格的？基本上，如果您像这样更改某些模型：

```
dataItem.set('SomeField','new value');
dataItem.set('someOtherField','other value'); 
```

这样，由于 MVVM，Grid 确实会被绑定两次。每次调用 set 时都会触发 change 事件。

但是，如果您像这样更新值：

```
dataItem.SomeField='new value';
dataItem.someOtherField= 'other value'; 
```

网格不会对更改做出反应，也不会重新绑定从模型中重新读取值，您可以强制网格通过**刷新**方法执行此操作。

```
$('#gridName').data().kendoGrid.refresh() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:08:37.287

我不确定是否有某种方法可以暂时告诉网格停止监听事件，然后在最后重新同步一次。如果有，请在这里给出答案！否则，我所做的是我没有为每个项目检查 .set() 。相反，我通过将数据直接设置为属性来更新所有行的数据。然后，当我到达要更新的最后一行时，我在需要更新的最后一个属性上调用了 .set() 。这将导致数据绑定仅触发一次，并且整个网格将使用所有已更改的数据进行自我刷新。如果你不这样做，那么页面上显示的行越多，处理时间就越长。（用户可能需要 20 多秒才能再次执行任何操作。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T17:35:52.983

看起来 dataBinding 事件是您可以防止重新绑定网格的地方。

[Telerik 在线文档](http://docs.telerik.com/kendo-ui/api/web/grid#events-dataBinding)

# android - 调用 GoogleAccountCredential.newChooseAccountIntent() 后未调用 onActivityResult

> ID：15579859
> 
> 赞同：2
> 
> 时间：2013-03-22T21:08:37.297
> 
> 标签：android, google-app-engine, cloud, endpoints

我一直在关注谷歌关于 App Engine 连接的 Android 项目的教程，但我一直卡在[这个页面上](https://developers.google.com/eclipse/docs/endpoints-addauth)。

特别是在第 8c 节中似乎有一个错误。如标题所述，以下代码中没有调用 onActivityResult 方法。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Start up RegisterActivity right away
    Intent intent = new Intent(this, RegisterActivity.class);
    startActivity(intent);

    credential = GoogleAccountCredential.usingAudience(this,"server:client_id:" + WEB_CLIENT_ID);
    startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
    System.out.println("onCreate finished");
    //new EndpointsTask().execute(getApplicationContext());
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case REQUEST_ACCOUNT_PICKER:
        if (data != null && data.getExtras() != null) {

            accountName = data.getExtras().getString(AccountManager.KEY_ACCOUNT_NAME);
            if (accountName != null) {
                credential.setSelectedAccountName(accountName);
                new EndpointsTask().execute(getApplicationContext());
            }
        }
        break;
    } 
```

一切都进展顺利，直到我注意到 AsyncTask 没有被执行，并且 GAE 控制台的数据存储区中没有任何内容。

有没有人知道这个问题，也许会指出我正确的方向？我已经在这里待了几个小时，我所能想到的就是其他活动没有设置“resultCode”有问题

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:44:48.950

您正在同时启动两个活动：`RegisterActivity`和 Google 帐户选择器活动。`RegisterActivity`以永远不会触发返回您的`onActivityResult()`函数的方式调用。

所以，你要做的第一件事就是改变这个：

```
startActivity(intent); 
```

对此：

```
startActivityForResult(intent, REQUEST_REGISTER); 
```

*您必须创建新请求`REQUEST_REGISTER`*。

这是因为`startActivity()`从不触发返回`onActivityResult()`。只有`startActivityForResult()`这样做。这正是 Android 的工作方式。

其次，我觉得这两个活动同时启动很奇怪。您必须非常仔细地研究为什么要这样做的逻辑。我强烈怀疑您*想*按顺序启动这两个活动。我不知道应该先去哪一个。

像你已经在做的那样开始第一个（但如果是，`onCreate()`请确保使用）。`startActivityForResult()``RegisterActivity`

`onActivityResult()`如果与第一个 Activity 的发送到`REQUEST_*` `requestCode`匹配，则启动第二个Activity。`requestCode``startActivityForResult()`

这可能会解决您的问题，让 Google 帐户选择器、注册和返回到您的活动都正常工作。

# android - 应用程序 - 无法放大视图

> ID：15579861
> 
> 赞同：0
> 
> 时间：2013-03-22T21:08:40.193
> 
> 标签：android, xml, layout, logcat

我只在由 android 工具创建的应用程序中编辑了 xml，应用程序无法启动并将我发送到透视图并弹出 ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) 行：2306

这是 Logcat：

```
03-22 20:47:09.865: E/ActivityThread(14977): Failed to inflate
03-22 20:47:09.865: E/ActivityThread(14977): android.view.InflateException: Binary XML file line #113: Error inflating class <unknown>
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-22 20:47:09.865: E/ActivityThread(14977):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-22 20:47:09.865: E/ActivityThread(14977):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:282)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.Activity.setContentView(Activity.java:1881)
03-22 20:47:09.865: E/ActivityThread(14977):    at com.timmo.tampmusicplayer.NowPlaying.onCreate(NowPlaying.java:12)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.Activity.performCreate(Activity.java:5104)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2260)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2356)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.ActivityThread.access$600(ActivityThread.java:150)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.os.Looper.loop(Looper.java:137)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.app.ActivityThread.main(ActivityThread.java:5195)
03-22 20:47:09.865: E/ActivityThread(14977):    at java.lang.reflect.Method.invokeNative(Native Method)
03-22 20:47:09.865: E/ActivityThread(14977):    at java.lang.reflect.Method.invoke(Method.java:511)
03-22 20:47:09.865: E/ActivityThread(14977):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-22 20:47:09.865: E/ActivityThread(14977):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-22 20:47:09.865: E/ActivityThread(14977):    at dalvik.system.NativeStart.main(Native Method)
03-22 20:47:09.865: E/ActivityThread(14977): Caused by: java.lang.reflect.InvocationTargetException
03-22 20:47:09.865: E/ActivityThread(14977):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-22 20:47:09.865: E/ActivityThread(14977):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-22 20:47:09.865: E/ActivityThread(14977):    ... 24 more
03-22 20:47:09.865: E/ActivityThread(14977): Caused by: java.lang.OutOfMemoryError
03-22 20:47:09.865: E/ActivityThread(14977):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.content.res.Resources.loadDrawable(Resources.java:1991)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.widget.ImageView.<init>(ImageView.java:120)
03-22 20:47:09.865: E/ActivityThread(14977):    at android.widget.ImageView.<init>(ImageView.java:110)
03-22 20:47:09.865: E/ActivityThread(14977):    ... 27 more 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#111111"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".NowPlaying" >

<RelativeLayout
    android:id="@+id/rlcontrols"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <Button
        android:id="@+id/bplay"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_below="@+id/tvalbum"
        android:layout_centerHorizontal="true"
        android:background="@drawable/play"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bprevious"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_below="@id/tvalbum"
        android:layout_marginRight="10dp"
        android:layout_toLeftOf="@id/bplay"
        android:background="@drawable/previous"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bnext"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_below="@id/tvalbum"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/bplay"
        android:background="@drawable/next"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/brepeat"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBottom="@id/bnext"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/bnext"
        android:background="@drawable/repeat"
        android:contentDescription="@+string/play" />

    <Button
        android:id="@+id/bshuffle"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBottom="@id/bprevious"
        android:layout_marginRight="10dp"
        android:layout_toLeftOf="@id/bprevious"
        android:background="@drawable/shuffle"
        android:contentDescription="@+string/play" />

    <SeekBar
        android:id="@+id/songProgressBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/bplay"
        android:layout_marginTop="10dp"
        android:progressDrawable="@drawable/progress"
        android:thumb="@drawable/seeker" />

    <TextView
        android:id="@+id/tvtime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/songProgressBar"
        android:gravity="right"
        android:text="@string/time"
        android:textSize="20sp" />
</RelativeLayout>

<TextView
    android:id="@+id/tvalbum"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/rlcontrols"
    android:gravity="center"
    android:text="@string/album"
    android:textSize="20sp" />

<TextView
    android:id="@+id/tvartist"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/tvalbum"
    android:gravity="center"
    android:text="@string/artist"
    android:textSize="20sp" />

<TextView
    android:id="@+id/tvtitle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/tvartist"
    android:gravity="center"
    android:text="@string/title"
    android:textSize="25sp" />

<ImageView
    android:id="@+id/ivalbumart"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/tvtitle"
    android:contentDescription="@+string/albumart"
    android:src="@drawable/albumart" />

</RelativeLayout> 
```

如果需要，清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.timmo.tampmusicplayer"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.timmo.tampmusicplayer.NowPlaying"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

上课只是因为：

```
public class NowPlaying extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nowplaying);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.now_playing, menu);
    return true;
}

} 
```

请有人向我解释我做错了什么，因为我不知道也不明白这一点`layoutinflater`，甚至不明白如何阅读 Logcat .. 感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:25:58.377

这是由于位图文件较大。如果您需要支持多个设备，我建议使用不同的可绘制文件夹：

*   可绘制的
*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xdpi

Android 基本上会根据设备选择查看哪个文件夹。这是一个很好的阅读：[Android Doc - 提供最佳资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

# java - 使用 HashSet 优于 HashMap 的优势

> ID：15579863
> 
> 赞同：0
> 
> 时间：2013-03-22T21:08:47.303
> 
> 标签：java, hashset

根据 JavaDoc API，HashSet 只是 HashMap 的包装器。因此，在 HashMap 上使用 HashSet 是否有任何性能优势。曾经？曾经？或者只是有一个适合其他情况的不同 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:19:20.450

不，没有“性能”优势；使用正确的 API 来解决正确的问题只会带来好处……这是相当可观的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:20:10.660

**并非真的没有性能优势，它们都用于不同的目的。**

关于 API 文档中的 Hashset

该类实现了由哈希表（实际上是 HashMap 实例）支持的 Set 接口。它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。此类允许空元素。

此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。迭代这个集合需要的时间与 HashSet 实例的大小（元素的数量）加上支持 HashMap 实例的“容量”（桶的数量）的总和成正比。因此，如果迭代性能很重要，那么不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

请注意，此实现不同步。如果多个线程同时访问一个哈希集，并且至少有一个线程修改了该集，则必须在外部进行同步。这通常是通过在一些自然封装集合的对象上同步来完成的。如果不存在这样的对象，则应使用 Collections.synchronizedSet 方法“包装”该集合。这最好在创建时完成，以防止对集合的意外不同步访问：

```
 Set s = Collections.synchronizedSet(new HashSet(...)); 
```

此类的迭代器方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间修改集合，除了通过迭代器自己的 remove 方法之外，迭代器会抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

检查此参考：[HashSet](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashSet.java)

# jquery - 如何在jquery中检查li是否包含具有特定类名的元素

> ID：15579866
> 
> 赞同：1
> 
> 时间：2013-03-22T21:08:55.360
> 
> 标签：jquery

我有以下结构，我想知道是否`.curent-menu-item`有一个孩子的班级`.sub-menu`

```
<li class="curent-menu-item">
   <a>text</a>
    <ul class="sub-menu">
       <li>item</li>
       <li>item</li>
    </ul>
</li>
<li>text</li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:10:10.897

```
if ( $('.curent-menu-item .sub-menu').length )
if ( $('.curent-menu-item').has('.sub-menu').length )
if ( $('.curent-menu-item').find('.sub-menu').length )
if ( $('.curent-menu-item').children('.sub-menu').length ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:10:25.320

```
var hasChild = $('.curent-menu-item').find('.sub-menu').length > 0 ? true : false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:14:56.793

就像是`if($('ul.sub-menu').children('ul').hasClass('sub-menu'))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:16:34.293

`$('li ul').hasClass('sub-menu')` `\\ returns true if has sub-menu`

# user-interface - Python 2.7 Tkinter 在按钮事件上更改标签文本

> ID：15579869
> 
> 赞同：1
> 
> 时间：2013-03-22T21:09:04.143
> 
> 标签：user-interface, button, python-2.7, tkinter

我对 Python（2.7）非常陌生，我正在学习 GUI 设计（Tkinter），并且在尝试通过单击按钮时从 Entry 对象实现简单的标签文本更改时不断遇到不同的语法/无**调用**方法/全局名称未定义错误。有人可以告诉我该操作的正确语法吗

```
from Tkinter import *
class Part3:

def __init__(self, parent):

    GUIFrame =Frame(parent,width= 300, height=200)
    GUIFrame.pack(expand = False, anchor = CENTER)
    entry = Entry(text="enter your choice")
    entry.place(x=65, y = 10)
    self.test = StringVar()
    self.test.set('''Hi, I'm a Label :)''')
    self.Label1 = Label(parent, textvariable = self.test)
    self.Label1.place(x = 85, y = 100)
    self.Button2 = Button(parent, text='edit',command=self.LabelChange)
    self.Button2.place(x= 80, y = 60)
    self.Button3 = Button(parent, text='exit', command= parent.quit)
    self.Button3.place(x= 160, y = 60)

def LabelChange(self):

    test = self.entry.get()
    self.Label1(test)

root = Tk()
MainFrame =Part3(root)
root.title('Input Test')
root.mainloop() 
```

在“编辑”（按钮 2）上单击的想法，Label1 的文本更改为条目文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:04:56.020

尝试：

```
self.entry = Entry(text="enter your choice")
...
test = self.entry.get()
self.test.set(test) 
```

我知道大多数教程都提供了使用文本变量的示例，但在大多数情况下您不需要它们。您可以在不使用 textvariable 的情况下获取和设置小部件中的值。文本变量主要用于对变量进行跟踪。变量跟踪是一种您很少需要的高级技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T22:36:04.087

```
from Tkinter import *
class Part3:

def __init__(self, parent):

    GUIFrame =Frame(parent,width= 300, height=200)
    GUIFrame.pack(expand = False, anchor = CENTER)
    self.entry = Entry(text="enter your choice")    # this needs to be in self
    self.entry.place(x=65, y = 10)
    self.test = StringVar()
    self.test.set('''Hi, I'm a Label :)''')
    self.Label1 = Label(parent, textvariable = self.test)
    self.Label1.place(x = 85, y = 100)
    self.Button2 = Button(parent, text='edit',command=self.LabelChange)
    self.Button2.place(x= 80, y = 60)
    self.Button3 = Button(parent, text='exit', command= parent.quit)
    self.Button3.place(x= 160, y = 60)

def LabelChange(self):
    self.test.set(self.entry.get())

root = Tk()
MainFrame =Part3(root)
root.title('Input Test')
root.mainloop()
root.destroy() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T16:16:47.307

使用可以使用 .after 命令。例如：

```
 Lbl = Label(text='Hi')
     def change():
         Lbl.after(3000, lambda: Lbl.config(text="hola")
         # Or you can use the one below to remove delay.
         Lbl.config(text='hola')
        return change
     Btn = Button(command=change ())
     Lbl.pack()
     Btn.pack() 
```

# python - AttributeError：“GqlQuery”对象没有属性“键”

> ID：15579873
> 
> 赞同：2
> 
> 时间：2013-03-22T21:09:16.847
> 
> 标签：python, google-app-engine, python-2.7, jinja2

如何检索和显示从 GQL 查询返回的多个结果的键？

**主文件**

```
class MainPage(webapp2.RequestHandler):
    def get(self):          

        author = "William Shakespeare"

        q = db.GqlQuery("SELECT * FROM Book " +
                        "WHERE author = :1 ", author)
        keys = q.Key

        template_values = { 
            'author': author,
            'key': key,         
        }       

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

* * *

**更新 1：**

当我使用

```
keys = q.key() 
```

我收到此错误：

> 文件“C:\programming_google_app_engine_repo\datastore\main.py”，第 17 行，在 get key = q.key() AttributeError: 'GqlQuery' object has no attribute 'key'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:37:05.337

您的代码存在不止一个问题。请退后一步，想想你想做什么，然后再浏览一下文档。

**问题 1**
a 的结果`GqlQuery`没有密钥。您需要使用`.get()`或`.fetch(1)`访问该`Book`对象。

```
q = db.GqlQuery("SELECT * FROM Book WHERE author = :1 ", author)
my_book = q.get() 
```

**问题 2**
要获得 a 的值，`method`您需要记住包含括号/括号。

```
my_book_key = my_book.key() # don't forget the parens/brackets

template_values = { 
    'author': author,
    'key': my_book_key,         
} 
```

# excel - VBA 无法显示数据透视表

> ID：15579876
> 
> 赞同：1
> 
> 时间：2013-03-22T21:09:32.253
> 
> 标签：excel, pivot-table, displayobject, vba

我正在尝试自动化报告。第一步是创建一个数据透视表，我认为正在创建数据透视表，但我无法在工作表上查看它。

```
 Sub CurrentPipelineView()
 Dim pt As PivotTable
 Dim ptcache As PivotCache
 Dim pf As PivotField
 Dim pi As PivotItem
 Dim ws As Worksheet
 Dim wspivot As Worksheet
 Dim datasheetname As String
 Dim totalrows As Integer
 Dim tottalcolumns As Integer

For Each ws In ThisWorkbook.Worksheets
  If ws.Name = "PivotTest1" Then
  ws.Delete
  End If
  Next

 'Setting sheet names
  SheetName = "Data" 'storing sheet name which will be default
  Set ws = Worksheets(SheetName)
  Sheets.Add.Name = "PivotTest1"
  Set wspivot = Worksheets("PivotTest1")
  wspivot.Select 'Activating worksheet

 'Delete any prior pivot tables
  On Error Resume Next
  For Each CurrentViewPt In wspivot.PivotTables
    CurrentViewPt.TableRange2.Clear
Next CurrentViewPt

 'Defining pivot table cache
  ws.Select
  totalcolumns = ws.Cells(1, Columns.Count).End(xlToLeft).Column
  totalrows = ws.Range("A:A").Cells.SpecialCells(xlCellTypeConstants).Count 'Counting           total rows
  Set PRange = ws.Range("A1").Offset(totalrows, totalcolumns)
  Set ptcache = ActiveWorkbook.PivotCaches.Create(xlDatabase, PRange)

  'Create pivot table
   wspivot.Select
   Set pt = ActiveSheet.PivotTables.Add(ptcache, Range("A3"), "PipelineView")

   End Sub 
```

我想要做的是从数据库生成的第一张表中获取数据并使用它来制作报告。

为了做出正确的支点，我想逐个字段地调试代码，以确保我添加了正确的字段。当我运行它时，我看不到工作表上的数据透视表，就像我在 excel 中手动执行它一样。

感谢和问候瓦伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:39:30.353

看起来问题是`PRange`对象 - 它只是设置到该字段的右下角单元格。尝试将其更改为：

```
Set PRange = Range(ws.Range("A1"), ws.Range("A1").Offset(totalrows, totalcolumns)) 
```

我还`ptcache.CreatePivotTable(...)`用来创建数据透视表：

```
Set pt = ptcache.CreatePivotTable(TableDestination:=wspivot.Range("A3"), TableName:="YourTableName") 
```

**编辑：**

使用它来设置 PRange：

```
Set prange = Range(ws.Range("A1"), ws.Range("A1").Offset(totalrows, totalcolumns - 1)) 
```

我的代码的问题是它添加了一个额外的列（它是空白的），这会引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:34:14.800

终于让代码工作了。使用 PivotTableWizard 而不是添加/创建数据透视缓存。

下面是我的代码。还找到了一个函数 .UsedRange 用于选择使用的范围

```
Public Sub CountingRows()

Dim ws As Worksheet
Dim SheetName As String 'data sheet name
Dim TotalRows As Integer 'counts total number of rows
Dim TotalColumns As Integer 'sets total number of columns
Dim Counter As Integer 'Counter to start the loop
Dim wsPivot As Worksheet
Dim CreatePt As PivotTable 'creates using pivot table wizard
Dim CurrentViewPt As PivotTable
Dim PRange As Range
Dim PTCache As PivotCache
Dim PF As PivotField

'Deleting sheet if it already exists
   For Each ws In ThisWorkbook.Worksheets
   If ws.Name = "PivotTest1" Then
     ws.Delete
    End If
    Next

'Setting sheet names
SheetName = "Sheet 1" 'storing sheet name which will be default
 Set ws = Worksheets(SheetName)
Sheets.Add.Name = "PivotTest1"
 Set wsPivot = Worksheets("PivotTest1")
wsPivot.Select 'Activating worksheet

 'Delete any prior pivot tables
On Error Resume Next
For Each CurrentViewPt In wsPivot.PivotTables
    CurrentViewPt.TableRange2.Clear
Next CurrentViewPt

'Defining pivot table cache
 ws.Select
TotalColumns = ws.Cells(1, Columns.Count).End(xlToLeft).Column 'Counting total columns
TotalRows = ws.Range("A:A").Cells.SpecialCells(xlCellTypeConstants).Count 'Counting total rows
Set PRange = ws.UsedRange 'found a new function to use do not need to use above fields, but keeping them just incase
'Set PRange = ws.Cells(1, 1).Resize(TotalRows, TotalColumns)<<<Not sure if it works>>>
wsPivot.Select
 Set PTCache = ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:=PRange)

'Create the Pivot Table
 Set CreatePt = wsPivot.PivotTableWizard(SourceType:=xlDatabase, SourceData:=PRange, TableDestination:=wsPivot.Range("B4"), TableName:="CurrentNBI")
 Set CurrentViewPt = wsPivot.PivotTables("CurrentNBI")

'**** Define the layout of the pivot table****
 With CurrentViewPt.PivotFields("NBI_CODE")
    .Orientation = xlRowField
    .Position = 1
  End With
   With CurrentViewPt.PivotFields("CREATION_DATE")
   .Orientation = xlRowField
   .Position = 2
   End With
   With CurrentViewPt.PivotFields("BUSINESS_AREA")
    .Orientation = xlRowField
   .Position = 3
   End With
 With CurrentViewPt.PivotFields("CASE_CLASSIFICATION")
   .Orientation = xlRowField
   .Position = 4
End With
With CurrentViewPt.PivotFields("BOOKING_CENTER")
   .Orientation = xlRowField
   .Position = 5
 End With
With CurrentViewPt.PivotFields("LOCATION")
   .Orientation = xlRowField
   .Position = 6
 End With
With CurrentViewPt.PivotFields("INITIATIVE_NAME")
   .Orientation = xlRowField
   .Position = 7
End With
With CurrentViewPt.PivotFields("BRIEF_DESCRIPTION")
   .Orientation = xlRowField
   .Position = 8
 End With
With CurrentViewPt.PivotFields("TARGET_ASSESSMENT_DATE")
   .Orientation = xlRowField
   .Position = 9
End With
With CurrentViewPt.PivotFields("ASSESSMENT_COMPLETION_DATE")
   .Orientation = xlRowField
   .Position = 10
 End With
 With CurrentViewPt.PivotFields("NBI_CODE")
    .Orientation = xlDataField
    .Position = 1
    .xlCount = True
 End With

 'Setting sub-totals to zero
  ActiveSheet.PivotTables("CurrentNBI").PivotFields("NBI_CODE").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
 ActiveSheet.PivotTables("CurrentNBI").PivotFields("CREATION_DATE").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
 ActiveSheet.PivotTables("CurrentNBI").PivotFields("BUSINESS_AREA").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
ActiveSheet.PivotTables("CurrentNBI").PivotFields("CASE_CLASSIFICATION").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
  ActiveSheet.PivotTables("CurrentNBI").PivotFields("BOOKING_CENTER").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
  ActiveSheet.PivotTables("CurrentNBI").PivotFields("LOCATION").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
  ActiveSheet.PivotTables("CurrentNBI").PivotFields("INITIATIVE_NAME").Subtotals = _
    Array(False, False, False, False, False, False, False, False, False, False, False, False)
 End Sub 
```

# c# - 如何在填充字典的组合框中获取 SelectedValue 的值

> ID：15579885
> 
> 赞同：8
> 
> 时间：2013-03-22T21:10:04.013
> 
> 标签：c#, dictionary, combobox

我们有这样的字典：

```
var dictionary = new Dictionary<int, int> { { 0, 100 }, { 1, 202 }, { 2, 309 }, }; 
```

等等很多值。像这样绑定到组合框的字典：

```
comboBox1.ItemsSource = dictionary;
comboBox1.DisplayMemberPath = "Value"; 
```

如果 comboBox.Text 仅适用于手动输入的值和此代码，我想知道如何获得此组合框的 selectedvalue：

```
string value = comboBox1.SelectedValue.ToString(); 
```

返回值如 [1, 202]，而我需要清除 int TValue "202"。我找不到类似的问题，所以我在那里问，希望答案对其他人有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T21:13:15.427

看起来你必须`SelectedValue`投入`KeyValuePair<int, int>`：

```
string value = ((KeyValuePair<int, int>)comboBox1.SelectedValue).Value.ToString(); 
```

但是，您应该在那里设置一个刹车点并检查`SelectedValue`真正的类型。

我认为这是`KeyValuePair<int, int>`因为您的源集合是`Dictionary<int, int>`并且因为输出字符串`SelectedValue.ToString()`是`[1, 202]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-23T14:40:46.980

如果指定 ValueMember，则可以避免强制转换操作。在数据源之前设置路径很重要，否则它将使用键值对的选定值触发更改的事件。

```
comboBox1.DisplayMemberPath = "Value";
comboBox1.SelectedValuePath= "Key";
comboBox1.ItemsSource = dictionary;
string value = comboBox1.SelectedValue.ToString(); 
```

# javascript - 使用 Meteor.methods 和 Meteor.call

> ID：15579891
> 
> 赞同：7
> 
> 时间：2013-03-22T21:10:20.943
> 
> 标签：javascript, meteor

我有以下服务器代码：

```
Meteor.startup(function () {
  Meteor.publish("AllMessages", function() {
    lists._ensureIndex( { location : "2d" } );
    return lists.find();
  });
});

Meteor.methods({
  getListsWithinBounds: function(bounds) {
    lists._ensureIndex( { location : "2d" } );
    return lists.find( { "location": { "$within": { "$box": [ [bounds.bottomLeftLng, bounds.bottomLeftLat] , [bounds.topRightLng, bounds.topRightLat] ] } } } );
  }
}); 
```

这个客户代码：

```
Meteor.startup(function () {
  map = L.map('map_canvas').locate({setView: true, maxZoom: 21});
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);
    bounds = {};    
    map.on('locationfound', function(e){ 
      bounds.bottomLeftLat = map.getBounds()._southWest.lat;
      bounds.bottomLeftLng = map.getBounds()._southWest.lng;
      bounds.topRightLat = map.getBounds()._northEast.lat;
      bounds.topRightLng = map.getBounds()._northEast.lng;
      console.log(bounds);
      Meteor.call("getListsWithinBounds", bounds, function(err, result) {
        console.log('call'+result); // should log a LocalCursor pointing to the relevant lists
      });
    });
}); 
```

我得到了我的服务器日志：

```
Internal exception while processing message { msg: 'method',
  method: 'getListsWithinBounds',
  params: 
   [ { bottomLeftLat: 50.05008477838258,
       bottomLeftLng: 0.384521484375,
       topRightLat: 51.63847621195153,
       topRightLng: 8.3221435546875 } ],
  id: '2' } undefined 
```

但我不明白为什么...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T13:51:41.893

您无法返回 Collection 游标 - 它无法转换为 EJSON 对象。将查询结果作为数组返回。

例如

```
return Lists.find(...).fetch(); 
```

# ruby-on-rails - Ruby on Rails：删除链接导致 nameError

> ID：15579895
> 
> 赞同：0
> 
> 时间：2013-03-22T21:10:40.553
> 
> 标签：ruby-on-rails, nameerror

我是 Rails 新手，我正在学习教程。我有相同的代码，但是当我在视图中包含“删除”链接时出现 NameError。

这是错误

```
NameError in Posts#index
undefined local variable or method `post' for #<#<Class:0x3a0c9b0>:0x3a0a220> 
```

这是代码

```
<h1>Blog Posts</h1>
<% @posts.each do |post| %>
<h3><%= link_to post.title,post %></h3>
<p><%= post.body %></p>
<hr>
<% end %>
<%= link_to "Delete", post, :confirm => "Are you sure you want to delete this post?", :method => :delete %> 
```

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:13:54.633

尝试这个。

```
 <h1>Blog Posts</h1>
    <% @posts.each do |post| %>
    <h3><%= link_to post.title,post %></h3>
    <p><%= post.body %></p>
    <hr>
   <%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure you want to delete this post?' } %>

    <% end %> 
```

编辑更多信息。您的删除链接需要在循环或块内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:15:03.820

将您的`link_to`代码更改为此：

```
<h3><%= link_to post.title, post_path(post) %></h3> 
```

还有这个：

```
<%= link_to "Delete", post_path(post), :confirm => "Are you sure you want to delete this post?", :method => :delete %> 
```

`link_to`需要一个 URL 作为第二个参数。

如果您遇到其他错误，请确保您的 : 中有下一行`config/routes.rb`：

```
resources :posts 
```

# excel - 为什么 cos(2^27) 失败？

> ID：15579897
> 
> 赞同：0
> 
> 时间：2013-03-22T21:10:43.883
> 
> 标签：excel

似乎excel知道如何计算`=cos(2^27-1)`但无法计算`=cos(2^27)`。那返回`#NUM!`。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:30:17.083

我不知道 Excel 在内部使用哪种算术，但在某些时候，如果数字很大，执行`mod 2*pi`操作后的错误太大而无法产生可靠的答案。大概他们选择了 2^27 作为他们的截止点。

![在此处输入图像描述](../Images/13d6d29f9fec5d82413a946417a95858.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:48:05.930

这是没有很好[记录](http://office.microsoft.com/en-us/access-help/sin-function-HA001228907.aspx?CTT=1 "记录在案")的行为。Sin Function 文档表明参数是 Double，并且文档中指定的限制表明 double 类型存储为 64 位数字，范围从 4.94E-324 到 1.797E308（对于正数）。

我怀疑 2^27 (134,217,728) 字节*恰好*是128 兆字节并非巧合，而且似乎某些三角函数（例如 COS、SIN 和 TAN）存在内部限制，但有趣的是，不适用于 TANH， ETC。）。这并不是说需要这么多的内存消耗——只是程序员的实现可能在内部对这些类型的输入有一些（可能是不必要的）限制。

要绕过这个愚蠢的限制，只需使用以下命令：

```
=COS(MOD(2^27, 2*PI())) 
```

这是有效的，因为其他操作不存在限制，并且在[Excel Specifications and Limits](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx "Excel 规格和限制")中无处可见。:-)

如果链接的文档提供了这些限制的描述，那将是一件好事，但不幸的是，事实并非如此。

# php - LIKE 运算符的 MySQL 注入

> ID：15579898
> 
> 赞同：4
> 
> 时间：2013-03-22T21:10:48.010
> 
> 标签：php, mysql, sql-injection

我在我的一个 php 文件中使用以下代码从数据库中获取数据：

```
$products = $this->db->get_rows('SELECT * from products WHERE shop_id='.$_SESSION['shop_id'].'AND tags,title,text LIKE \'%'.$_POST['search'].'%\''); 
```

有问题吗？我的意思是可以注入 LIKE 运算符？

***已编辑***

请提供以这种方式注入的示例

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T21:13:05.240

任何算子都可以在没有绑定的情况下注入。

```
$_POST['search'] = "1%'; DROP TABLE myTable LIKE '%"; 
```

将使

```
.... AND tags,title,text LIKE '%1%'; DROP TABLE myTable LIKE '%%' 
```

阅读[如何绑定参数](http://php.net/manual/en/pdostatement.bindparam.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:12:59.703

当然这可以注入，你需要清理你的输入。现在，您正在获取原始发布数据并将其插入到您的 SQL 语句中。

你应该通过某种数据清理来运行你的 POST 数据，比如 mysql_real_escape_string 之类的

或者至少准备好的陈述。让服务器端代码为您完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:28:42.980

永远不要使用这样的数据库查询，不要用变量构造字符串并将其用于数据库活动。

通过将变量插入到字符串中，构造一个稍后将准备和执行的字符串，使它们不像“命令”而是像“值”。

你可以这样做：

```
$query = "SELECT * from products WHERE shop_id = :shopId;"; // An example, you can finish the rest on your own. 
```

现在，您可以准备语句（我建议为此使用 PDO）。

```
 $statement = $db->prepare($query); // Prepare the query. 
```

现在您可以在准备好的查询中执行变量：

```
$statement->execute(array(
    ':shopId' => $_SESSION['shop_id']
)); 
```

如果您要插入或更新，那么您会想要这样做：

```
$success = $statement->execute(array(
    ':shopId' => $_SESSION['shop_id']
)); 
```

它将布尔值存储在 $success 中，或者如果您正在选择，您可以从结果中获取值：

```
$statement->execute(array(
    ':shopId' => $_SESSION['shop_id']
));
$result = $statement->fetch(PDO::FETCH_ASSOC);
if($result )
{
    // You can access $result['userId'] or other columns;
} 
```

请注意，您实际上应该将其设为一个函数，并将 $shopId 传递给函数，而不是会话本身，并检查会话是否实际存在。

我建议使用谷歌搜索如何使用 PDO，或查看我的一个示例：[How to write update query using some {$variable} with example](https://stackoverflow.com/questions/15579716/any-one-can-tell-me-how-to-write-update-query-using-some-variable-with-exampl/15579890#15579890)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T23:19:27.123

这真的很糟糕。将 var 拉入 SQL 语句而不清理或检查它们是获取 pwnd 的好方法。人们可以在代码中注入一些东西。另一种需要注意的注入方法，1=1 总是返回 true。

```
$products = $this->db->get_rows('SELECT * from products WHERE shop_id='.$_SESSION['shop_id'].'AND tags,title,text LIKE \'%'.$_POST['search'].'%\'');

//This example expects no result from the table initially so we would blind attack the DB to pull the admin record.
$_POST['search'] = "-1\'; union all select * from users limit 1;"; 
```

有人调用拉起数据库中的顶级帐户（如管理员）。

```
$user_id = $this->db->get_rows('SELECT * from users WHERE email="'.$_POST['email'].'" and password="'.$_POST['password'].'"');

//This always returns true so now I'm the admin again
$_POST['password'] = "x\' or 1=1 limit 1"; 
```

您还需要小心您在屏幕上打印的内容。

```
$user_id = $this->db->get_rows('SELECT * from users WHERE email="'.$_POST['email'].'" and password="'.$_POST['password'].'"'); 
```

您回显的消息“$_POST['email'] 不存在用户名”可以替换为其他内容。

```
$_POST['email']=";

$fp = fopen('index.php', 'w');
fwrite($fp, \"header('Location: http://badwebsite.com;');\"; 
fclose($fp);"; 
```

index.php 现在可以让人们访问完全不同的网站，其中存在受感染的页面或站点上的受感染页面。

如果您正在检查 ID，请执行以下操作：

```
if(preg_match('!^[0-9]$!',$_POST['id'])){
    $id = $_POST['id'];
} else {
  //flush
} 
```

或计算可能记录的数量......如果您只期待一个并且您获得了数据库中的所有记录，那么这是一次注入尝试。

```
 if(is_numeric($_POST['id'])){
    $id = $_POST['id'];
    $count = mysql_result(mysql_query("select count(*) from users where id='$id''),0);
 } 
```

# python - Python：如何使用正则表达式进行搜索+替换

> ID：15579899
> 
> 赞同：0
> 
> 时间：2013-03-22T21:10:53.057
> 
> 标签：python, regex

我正在编写一个 Python 脚本，我需要在其中进行一些搜索并替换一些类似 XML 的字符串。

假设我有一个`foo`包含一些 XML 格式的字符串`<bar>something</bar>`。我想改变`something`里面的`<bar>...</bar>`，比方说`<bar>something_else</bar>`。

我该怎么做呢？

抱歉，如果这是一个新手问题，但我对 Python 还是很陌生。我通读了 Python 正则表达式文档，但这只会让我更加困惑。（实际上我发现正则表达式在其他上下文/语言中也令人困惑，所以这不一定是 Python 的错 :)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:22:20.980

这是一个简单的示例，说明您将如何使用`lxml.etree`，让您沿着正确的道路开始（基于上面的评论）：

```
text = """<tag><innertag>text</innertag>more text</tag>"""
import lxml.etree
xml = lxml.etree.fromstring(text)
node = xml.find('innertag')
node.text = "new text"
lxml.etree.tostring(xml)
'<tag><innertag>new text</innertag>more text</tag>' 
```

请参阅[lxml](http://lxml.de/)文档。

# mysql - 更新查询 MySQL 上的重复键条目

> ID：15579906
> 
> 赞同：2
> 
> 时间：2013-03-22T21:12:07.373
> 
> 标签：mysql, duplicates

```
UPDATE Table1, Table2
SET Table1.Col1 = 1, Table1.Col2 = 2, Table2.Col1 = 3 
WHERE Table1.PKey = Table2.PKey AND Table1.PKey = 199 
```

导致重复的键输入

```
#1062 - Duplicate entry '199-1' for key 'PRIMARY' 
```

请帮助我一直在挠头。我希望这个查询是最佳且快速的，因为它在一个循环中使用，该循环遍历很多行并为每一行更新。不想拆分为 2 个查询，因为那将是每行 2 个单独的查询调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:19:35.907

您上面的查询应该有效 - 参考：

[https://stackoverflow.com/a/9417254/1073631](https://stackoverflow.com/a/9417254/1073631)

猜测您正在尝试使用同一个表的另一行中已经存在的值更新主键（唯一）列 - 因此出现重复条目​​错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:26:24.537

我认为您的 Table1 的主键在 PKey AND Col1 上，即

```
CREATE TABLE `Table1`
...
PRIMARY KEY (`PKey`,`Col1`) 
```

关于重复条目**“199-1”**的错误指向该方向。

# javascript - javascript查找字符串的一部分

> ID：15579912
> 
> 赞同：2
> 
> 时间：2013-03-22T21:12:26.047
> 
> 标签：javascript, string, parsing

我不太习惯 Javascript，所以我在处理字符串时遇到了麻烦......

如果我有类似 /folder1/folder2/folder3/ 的东西，我该如何解析它，所以我最终只得到当前文件夹，例如 "folder3" ？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:13:42.083

```
var folderName = str.match(/(folder\d+)\/$/)[1]; 
```

应该这样做。

正则表达式的解释：

```
(      -> Start of capture group. We want a capture group because we just want 
          the folder name without the trailing slash.           
folder -> Match the string "folder"
\d+    -> Match one or more digits
)      -> End of capture group. This lets us capture strings of the form 
          "folderN", where N is a number.              
\/     -> Escape forward slash. We have to escape this because / is used to 
          represent the start and end of a regex literal, in Javascript.              
$      -> Match the end of the string. 
```

我们选择数组的第二个元素（在索引 1 处）的原因是因为第一个元素包含匹配的完整字符串。这不是我们想要的；我们只想要捕获组。我们只捕获了一组，因此这是第二个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:21:27.257

好吧，只是因为它是一种选择（尽管不一定是理智的）：

```
var string = '/folder1/folder2/folder3/',
    last = string.replace(/\//g,' ').trim().split(/\s/).pop();
    console.log(last); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SsUjh/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:16:48.283

该字符串的格式有多稳定？使用尾部斜杠，您将需要倒数第二项

```
var parts = URL.split("/"); alert(parts[parts.length-2]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T21:17:45.643

您可以使用该`split`函数检索所有子路径：

```
var path = '/folder1/folder2/folder3/';
var paths = path.split('/');
var pathNeeded = paths[paths.length - 2]; 
```

[工作示例](http://jsfiddle.net/WmNCG/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T21:19:22.397

```
var str    = "/folder1/folder2/folder3/",
    folder = str.substring(0, str.length - 1).split('/').pop(); 
```

[**小提琴**](http://jsfiddle.net/9uQmU/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T21:19:50.213

该`split`函数使用提供的参数作为分隔符将您的字符串转换为数组。

所以：

```
var parts = "/folder1/folder2/folder3/".split("/"); 
```

将导致`parts`等于：

```
["", "folder1", "folder2", "folder3", ""] 
```

然后，您可以使用以下方式访问每个项目：

```
parts[0] // returns ''
parts[1] // returns 'folder1'
parts[2] // returns 'folder2' 
```

.. 等等。在此处阅读有关拆分的更多信息：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T21:20:20.403

您可以编写以下内容：

```
var myString = '/fold1/fold2/fold3';
var myArray = myString.split('/');
var last_element = myArray[myArray.length - 1]; 
```

查看文档[拆分](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

# java - Android 音频电平表

> ID：15579927
> 
> 赞同：1
> 
> 时间：2013-03-22T21:13:08.453
> 
> 标签：java, android, audio, stream

我有一个问题希望你能帮忙，我已经搜索过，但还没有运气。基本上我已经制作了一些 ios 应用程序和几个 android 但我仍在学习 java 和 android 等的基础知识但无法计算出具有左右声音栏的代码。有什么想法可以在哪里学习一些代码，并且它从屏幕左侧延伸到右侧，但适用于所有屏幕尺寸？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T16:45:40.247

签出[`Visualizer`](https://developer.android.com/reference/android/media/audiofx/Visualizer.html)班级。它应该为您提供显示电平表所需的内容。不幸的是，它仅在 API 9 及更高版本中可用，并且需要 RECORD_AUDIO 权限。

# c++ - C++ 我们如何让我们的应用程序在计算机启动时启动（当然，在用户登录之后）？

> ID：15579932
> 
> 赞同：4
> 
> 时间：2013-03-22T21:13:21.787
> 
> 标签：c++, windows-8, startup

我们如何让我们的应用程序在计算机启动时启动（当然，在用户登录之后）？不，我没有制造病毒。

注册表编辑听起来是个好主意吗？

我的操作系统是 Windows 8。

但是，我将尝试使我的应用程序可用于所有可能的 Window 操作系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:50:00.397

执行此操作的正确方法是将应用程序可执行文件的快捷方式添加到用户的启动文件夹。您不需要（也不应该）修改注册表。

高级用户已经知道如何手动执行此操作，但它也可能是您希望在安装程序和/或应用程序中的配置对话框中提供的选项。

要从 C++ 代码执行此操作，您需要做两件事：

1.  **检索当前用户的启动文件夹的位置。**

    这是通过调用[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188.aspx)函数并指定[`KNOWNFOLDERID`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378457.aspx)您感兴趣的文件夹来完成的。在这种情况下，就是`FOLDERID_Startup`.

    示例代码：

    ```
    std::wstring GetStartupFolderPath()
    {
        PWSTR pszPath;
        HRESULT hr = SHGetKnownFolderPath(&FOLDERID_Startup,
                                          0,     // no special options required
                                          NULL,  // no access token required
                                          &pszPath);
        if (SUCCEEDED(hr))
        {
            // The function succeeded, so copy the returned path to a
            // C++ string, free the memory allocated by the function,
            // and return the path string.
            std::wstring path(pszPath);
            CoTaskMemFree(static_cast<LPVOID>(pszPath));
            return path;
        }
        else
        {
            // The function failed, so handle the error.
            // ...
            // You might want to throw an exception, or just return an
            // empty string here.
            throw std::runtime_error("The SHGetKnownFolderPath function failed");
        }                            
    } 
    ```

    但是请注意，虽然`SHGetKnownFolderPath`是推荐使用的功能，但它仅受 Windows Vista 及更高版本支持。如果您需要支持旧版本的操作系统，则需要在可用的新版本上动态调用它，否则回退到调用该[`SHGetFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181.aspx)函数。这一个采用不同类型的标识符，即[CSIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494.aspx)值。你想要的是`CSIDL_STARTUP`.

2.  **创建应用程序可执行文件的快捷方式。**

    这是使用一组不同的 Shell API 函数完成的。我不会在这里编写示例代码，因为它已经在 MSDN 上得到了很好的解释：[Shell Links](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776891.aspx)

    现在您只需连接点：当您创建应用程序可执行文件的快捷方式时，将用户的 Startup 文件夹指定为其目标路径。

唯一需要注意的是实际上有多个启动文件夹。每个用户都有一个，这是我们在上面使用 检索到的那个`FOLDERID_Startup`。大约 99% 的时间，这就是你想要的。将应用程序的快捷方式放在那里将导致该用户登录时自动启动它。

However, there is also a *global* Startup folder that is shared by all users. This one is identified by `FOLDERID_CommonStartup` (or `CSIDL_COMMON_STARTUP`) and requires administrative privileges to add items to. That makes sense, of course, because whatever you put in there is going to launch automatically when *any* user logs on to the computer. Only administrators can affect global behavior like this. And chances are, your app doesn't need this anyway.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T21:16:07.230

### 开始菜单

最简单的解决方案是将`.lnk`文件`.bat`放入`Start Menu\On startup`文件夹中。这是最简单的，并且对用户来说不太偷偷摸摸。

### 注册表：

另一种解决方案是在注册表项中创建密钥：

```
[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run]   //All users
[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce]  //All users once 

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]  //Currend user
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunOnce] //Current user once 
```

这不是那么透明 - 所以对用户更具侵略性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:18:40.967

在 Windows 上，您可以将应用程序的快捷方式放在`Startup`文件夹中，也可以将其作为服务实现。

而“我没有制造病毒”确实让你听起来很内疚......也许它是一个键盘记录器？;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:16:03.010

有很多方法，但它们都取决于您的操作系统。对于 Windows，请查看控制面板中“管理工具”下的“任务计划程序”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T21:31:29.263

也许是这样的？请注意，此代码段不是我编写的。

```
#include <windows.h>

void Reg() {
    ::HKEY Handle_Key = 0;
    ::DWORD Dispoition = 0;

    ::RegOpenKeyEx( HKEY_LOCAL_MACHINE,
                    "Software\\Microsoft\\Windows\\CurrentVersion\\Run",
                    0,
                    KEY_ALL_ACCESS,
                    &Handle_Key );
    const unsigned char Path[ MAX_PATH ] = "C:\\Windows\\YourProgramName.exe";
    ::RegSetValueEx( Handle_Key, "My Directory", 0, 1, Path, sizeof( unsigned char ) );
}; 
```

你们有什么感想？

# delphi - 重建丢失的代码 (InArray) - 续

> ID：15579935
> 
> 赞同：-4
> 
> 时间：2013-03-22T21:13:24.830
> 
> 标签：delphi

我缺少其他开发人员处理的某些代码中的一个单元。

我已经能够破译一些，这里的专家帮助了我和其他人，

我需要一个名为 InArray 的布尔函数。

我知道它需要一个 TIntArray 和整数并返回整数是否存在于 TIntArray 中的布尔值

```
TIntArray = array of Integer;

function InArray (A: TIntArray; n: Integer): Boolean;
begin
 // result:=
end; 
```

我不确定其余部分是如何完成的。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:14:37.400

最有可能的是，该函数测试是否`n`属于该数组：

```
function InArray(A: TIntArray; n: Integer): boolean;
var
  i: integer;
begin
  result := false;
  for i := low(A) to high(A) do
    if A[i] = n then
      Exit(true);
end; 
```

如果您使用的是旧版本的 Delphi (<2009)，您必须这样做

```
function InArray(A: TIntArray; n: Integer): boolean;
var
  i: integer;
begin
  result := false;
  for i := low(A) to high(A) do
    if A[i] = n then
    begin
      result := true;
      break;
    end;
end; 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:17:13.920

像这样：

```
function InArray (A: TIntArray; n: Integer): Boolean; 
var
  i: Integer;
begin
  for i := 0 to high(A) do
    if A[i]=n then
    begin
      Result := True;
      exit;
    end;
  Result := False;
end; 
```

# ruby-on-rails - 保存 Web 表单时找不到控制器的 Rails 操作

> ID：15579937
> 
> 赞同：0
> 
> 时间：2013-03-22T21:13:31.610
> 
> 标签：ruby-on-rails

我一直在做一个 Rails 教程（在 lynda 上），我一直在研究一个简单的 cms。它有一个用于主题的控制器和模型，我可以使用 rails 控制台保存主题而不会出现问题。但是当我尝试使用网络表单创建一个新主题时，我收到了这个错误：`The action '#<ActiveRecord::Relation:0x2166e28>' could not be found for SubjectsController`. 主题模型有一个单一的关系 ( `has_many: pages`) 但这不应该影响这一点，因为网络表单没有保存任何外键。

new 和 create 的控制器方法如下所示：

```
def new
    @subject = Subject.new
end

def create
    #Instantiate a new object using form params
    @subject = Subject.new(params[:subject])

    #Save the object
    if @subject.save

        #If save succeds, redirect to list action
        redirect_to(action: list)
    else

        #If save fails, redisplay the form so user can fix problems
        render('new')
    end
end 
```

重要的一点：控制器成功保存了新主题。它只是产生这个错误而不是重定向

Web 表单的视图如下所示：

```
<html>
    <%=  link_to("<< Back to List", {action:'list'}, class: 'back-link')%>

    <div class="subject new">
        <h2>Create Subject</h2>

        <%= form_for(:subject, url: {action: 'create'}) do |f|%>

        <table summary="Subject form fields">
            <tr>
                <th>Name</th>
                <td><%= f.text_field(:name) %></td>
            </tr>
            <tr>
                <th>Position</th>
                <td><%= f.text_field(:position) %></td>
            </tr>
            <tr>
                <th>Visible</th>
                <td><%= f.text_field(:visible) %></td>
            </tr>
        </table>

        <div class="form-buttons">
            <%= submit_tag("Create Subject") %>
        </div>
        <% end %>
    </div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:25:21.873

您应该重定向到`:list`而不是`list`，或者更好

```
redirect_to(action: 'list') 
```

# c# - 同一页面上的两个自定义验证器与 onservervalidate ASP.Net C#

> ID：15579941
> 
> 赞同：0
> 
> 时间：2013-03-22T21:13:47.737
> 
> 标签：c#, asp.net, entity-framework, customvalidator

我目前有一个`TextBox`and ，他们每个人都在做`ListBox`某项活动来检查`MSSQL DB`. `OnServerValidate`然而，问题是只有最后一个`Custom Validator`有效，而第一个从未得到验证。

**见代码：**

```
&nbsp;Company Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:TextBox ID="CompanyNameTextBox" runat="server" 
        Height="25px" TabIndex="1" Width="285px"></asp:TextBox>
    <asp:CustomValidator ID="CompanyNameCustomValidator" runat="server" 
        ErrorMessage="Company name already exists" Display="None" ValidateEmptyText="true"
        ControlToValidate="CompanyNameTextBox" EnableClientScript="true"
        onservervalidate="CompanyNameCustomValidator_ServerValidate"></asp:CustomValidator>
    <asp:RequiredFieldValidator ID="CompanyNameRequiredFieldValidator" runat="server" 
        ControlToValidate="CompanyNameTextBox" Display="None"
        ErrorMessage="The company name field is required!" />        
    <ajaxToolkit:ValidatorCalloutExtender ID="CompanyNameRequiredFieldValidator_ValidatorCalloutExtender" 
        runat="server" Enabled="True" PopupPosition="Right" 
        TargetControlID="CompanyNameRequiredFieldValidator">
    </ajaxToolkit:ValidatorCalloutExtender>
    <ajaxToolkit:FilteredTextBoxExtender ID="CompanyNameTextBox_FilteredTextBoxExtender" 
        runat="server" Enabled="True" 
        Filtertype="UppercaseLetters, Lowercaseletters, Numbers, Custom" 
        TargetControlID="CompanyNameTextBox" ValidChars="- ">
    </ajaxToolkit:FilteredTextBoxExtender>  

&nbsp;Country:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:ListBox ID="CountryListBox" runat="server" 
        DataSourceID="CountryDataSource" DataTextField="CountryName" 
        DataValueField="CountryName" Width="285px" 
        SelectionMode="Multiple"></asp:ListBox>
    <asp:CustomValidator ID="CountryListBoxCustomValidator" 
        ControlToValidate="CountryListBox" runat="server" 
        ErrorMessage="Select at least one and maximum allowed is 6 countries" 
        Display="None" ValidateEmptyText="true" EnableClientScript="true"
        onservervalidate="CountryListBoxCustomValidator_ServerValidate" >
    </asp:CustomValidator>
    <ajaxToolkit:ValidatorCalloutExtender ID="CountryListBoxCustomValidator_ValidatorCalloutExtender" 
        runat="server" Enabled="True" TargetControlID="CountryListBoxCustomValidator" PopupPosition="Right">
    </ajaxToolkit:ValidatorCalloutExtender>
    <asp:RequiredFieldValidator ControlToValidate="CountryListbox" runat="server" ID="CountryListBoxRequiredFieldValidator" Display="None" ErrorMessage="The country field is required" />
    <ajaxToolkit:ValidatorCalloutExtender ID="CountryListBoxRequiredFieldValidator_ValidatorCalloutExtender" 
        runat="server" Enabled="True" TargetControlID="CountryListBoxRequiredFieldValidator" PopupPosition="Right">
    </ajaxToolkit:ValidatorCalloutExtender>
    <br />
    <ajaxToolkit:ListSearchExtender ID="CountryListBox_ListSearchExtender" runat="server" 
        Enabled="True" TargetControlID="CountryListBox">
    </ajaxToolkit:ListSearchExtender> 
```

**服务器端代码：**

```
protected void CompanyNameCustomValidator_ServerValidate(object source, ServerValidateEventArgs args)
    {
        args.IsValid = true;

        companynametxt = CompanyNameTextBox.Text;

        companynamequery = (from companylist in db.SupplierDBs
                            where companylist.Company == companynametxt
                            select companylist.Company).SingleOrDefault();
        // Add company to database if case is true
        if (companynametxt != companynamequery)
        {
            CountryListBoxCustomValidator_ServerValidate(source, args);
        }
        else
        {
            args.IsValid = false;
        }
    }

    protected void CountryListBoxCustomValidator_ServerValidate(object source, ServerValidateEventArgs args)
    {
        args.IsValid = CountryListBox.Items.Cast<ListItem>().Where(i => i.Selected).Count() <= 6;

        selectedItemsArray = CountryListBox.GetSelectedIndices(); //gets total selected number of items in listbox
        selectedItemNumber = CountryListBox.GetSelectedIndices().Length;

        if (args.IsValid == true)//selecteditem <= 6 && selecteditem != 0)
        {
            if (selectedItemNumber <= 6 && selectedItemNumber != 0)
            {                                
                switch (selectedItemNumber)
                    {
                        case 1:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();                               
                            break;

                        case 2:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();
                            countrytxttransfer2 = CountryListBox.Items[selectedItemsArray[1]].ToString();                                 
                            break;

                        case 3:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();
                            countrytxttransfer2 = CountryListBox.Items[selectedItemsArray[1]].ToString();
                            countrytxttransfer3 = CountryListBox.Items[selectedItemsArray[2]].ToString();                                
                            break;

                        case 4:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();
                            countrytxttransfer2 = CountryListBox.Items[selectedItemsArray[1]].ToString();
                            countrytxttransfer3 = CountryListBox.Items[selectedItemsArray[2]].ToString();
                            countrytxttransfer4 = CountryListBox.Items[selectedItemsArray[3]].ToString();                            
                            break;

                        case 5:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();
                            countrytxttransfer2 = CountryListBox.Items[selectedItemsArray[1]].ToString();
                            countrytxttransfer3 = CountryListBox.Items[selectedItemsArray[2]].ToString();
                            countrytxttransfer4 = CountryListBox.Items[selectedItemsArray[3]].ToString();
                            countrytxttransfer5 = CountryListBox.Items[selectedItemsArray[4]].ToString();
                            break;

                        case 6:
                            countrytxttransfer1 = CountryListBox.Items[selectedItemsArray[0]].ToString();
                            countrytxttransfer2 = CountryListBox.Items[selectedItemsArray[1]].ToString();
                            countrytxttransfer3 = CountryListBox.Items[selectedItemsArray[2]].ToString();
                            countrytxttransfer4 = CountryListBox.Items[selectedItemsArray[3]].ToString();
                            countrytxttransfer5 = CountryListBox.Items[selectedItemsArray[4]].ToString();
                            countrytxttransfer6 = CountryListBox.Items[selectedItemsArray[5]].ToString();
                            break;
                    }                                         
                InsertData(); //Inserts data into DB
            }                
        }
    } 
```

`CompanyNameTextBox`提交表单时显示以下错误，验证应该在位置上弹出一个，`ValidatorCalloutExtender`但`Right`它显示此错误。

`Violation of UNIQUE KEY constraint 'IX_Company'. Cannot insert duplicate key in object 'dbo.SupplierDB'. The duplicate key value is (IBM). The statement has been terminated.`此错误是正确的，但没有调用验证。

`CountryListBox`按预期工作。

# matlab - 在matlabs svmclassify中测量不确定性

> ID：15579945
> 
> 赞同：2
> 
> 时间：2013-03-22T21:14:10.993
> 
> 标签：matlab, svm, uncertainty

我正在做上下文对象识别，我需要先验才能进行观察。例如，这个空间被标记为“狗”，它被正确标记的概率是多少？你知道 matlabs svmclassify 是否有一个参数来返回这个级别的确定性与它的分类？

如果没有，matlabs svm 里面有以下结构：

```
SVM = 
      SupportVectors: [11x124 single]
               Alpha: [11x1 double]
                Bias: 0.0915
      KernelFunction: @linear_kernel
  KernelFunctionArgs: {}
          GroupNames: {11x1 cell}
SupportVectorIndices: [11x1 double]
           ScaleData: [1x1 struct]
       FigureHandles: [] 
```

你能想出任何方法来计算这些不确定性的良好度量吗？（使用哪个支持向量？）欢迎解释 SVM 中的不确定性的论文/文章。也欢迎对 matlabs SVM 进行更深入的解释。

如果你不能这样做，你能想到任何其他具有这种不确定性度量的 SVM 库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-03T09:49:38.077

萨拉姆，

提示：我建议您修改 svmclassify.m 函数以将 svmdecision.m 的 f 值传递给用户。这是对输出类的补充。

要访问 svmclassify.m，只需在 Matlab 命令行中键入以下内容：

```
 open svmclassify 
```

我发现 svmdecision.m ( [https://code.google.com/p/auc-recognition/source/browse/trunk/ALLMatlab/AucLib/DigitsOfflineNew/svmdecision.m?spec=svn260&r=260](https://code.google.com/p/auc-recognition/source/browse/trunk/ALLMatlab/AucLib/DigitsOfflineNew/svmdecision.m?spec=svn260&r=260) ) 可以通过 f 值; 因此，在 svmclassify.m 中调用 svmdecision.m 时，以下内容可能是替代品：

```
[classified, f] = svmdecision(sample,svmStruct); 
```

通过进一步将此 f 值传递给用户，可以使用已在 Matlab 中构建的二进制分类器设计多类实现，例如 one-vs-all。

f 值是您在比较与其输出类相关的不同输入时要寻找的值。

我希望这可以帮助您编写代码并理解它！虽然你现在可能已经解决了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-15T04:45:56.080

我知道这是很久以前发布的，但我认为作者正在寻找训练后的 SVM 输出中不确定性的度量，无论输出是估计的标签还是估计的概率，这都是点估计。一种衡量标准是相同输入 x 的输出方差。问题是常规 SVM 不是随机模型，例如概率/贝叶斯神经网络。给定相同的 x，SVM 的推理总是相同的。

我需要检查一下，但也许可以用随机正则化训练一个 SVM。也许是某种形式的随机边际最大化，在优化例程的步骤中，输入训练向量可能会经历小的随机扰动，或者可能会丢弃随机选择的特征。类似地，在测试期间，可以删除或修改不同的随机选择的特征，每次产生不同的点估计。然后，您可以采用估计的方差，产生不确定性的度量。

可以说，如果输入 x 呈现模型不熟悉的模式，则点估计将非常不稳定和可变。

一个简单的例子如下：想象一个 2d 玩具示例，其中两个类被很好地分开并占据了密集的特征值范围。虽然在该集合上训练的模型可以很好地泛化到落在训练数据中看到的值的分布/范围内的点，但考虑到远离两个类但在相同纬度的测试观察结果，它将非常不稳定，可以说，作为分离超平面。这样的观察对模型提出了挑战，因为一个支持向量的微小扰动可能导致分离超平面的微小旋转，不会显着改变训练或验证误差，但可能会改变远距离测试观察的估计很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T11:41:34.080

[LIBSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)也有一个 Matlab 接口，有一个选项`-b`可以使分类函数返回概率估计。它们似乎是按照 Platt (2000) 的一般方法计算的，即执行应用于决策值的一维逻辑回归。

普拉特，JC（2000 年）。SV 机器的概率。在 Smola，AJ 等人。(eds.)*大边距分类器的进展*。第 61-74 页。剑桥：麻省理工学院出版社。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:48:24.930

您是否提供数据并自己进行培训？如果是这样，最好的办法是将数据划分为训练集和测试集。Matlab 对此有一个称为 cvpartition 的函数。您可以使用测试数据上的分类结果来估计误报率和未命中率。对于二元分类任务，这两个数字将量化不确定性。对于具有多个假设的分类测试，最好的办法可能是将您的结果编译到混淆矩阵中。

*编辑。发现了一些我用过的旧代码可能会有所帮助*

```
P=cvpartition(Y,'holdout',0.20);

rbfsigma=1.41;

svmStruct=svmtrain(X(P.training,:),Y(P.training),'kernel_function','rbf','rbf_sigma',rbfsigma,'boxconstraint',0.7,'showplot','true');

C=svmclassify(svmStruct,X(P.test,:));

errRate=sum(Y(P.test)~=C)/P.TestSize
conMat=confusionmat(Y(P.test),C) 
```

# c# - SQL bigint hash 以匹配 c# int64 hash

> ID：15579946
> 
> 赞同：9
> 
> 时间：2013-03-22T21:14:12.650
> 
> 标签：c#, sql-server, hash, bigint, uint64

我正在尝试创建一个通用散列算法，将字符串散列为 64 位整数。

我能够正确地散列字符串：sql：

```
select  
    convert
    (
        varchar(64),
        HASHBYTES
        (
            'SHA1',
            'google.com'
        ),
        2
    ) 
```

返回`BAEA954B95731C68AE6E45BD1E252EB4560CDC45`

C＃

```
 System.Security.Cryptography.SHA1 c = System.Security.Cryptography.SHA1.Create();
    System.Text.StringBuilder sb = new StringBuilder();
    byte[] b = c.ComputeHash(Encoding.UTF8.GetBytes("google.com"));
    for (int i = 0; i < b.Length;i++ )
    {
        byte by = b[i];
        sb.Append(by.ToString("x2").ToUpper());
    }

    return sb.ToString(); 
```

重新运行`BAEA954B95731C68AE6E45BD1E252EB4560CDC45`

但是，当我转换为 bigint/long 时，值不匹配： sql:

```
select  
    convert
    (
        bigint,
        HASHBYTES
        (
            'SHA1',
            'google.com'
        )
    ) 
```

返回`2172193747348806725`

C＃：

```
 System.Security.Cryptography.SHA1 c = System.Security.Cryptography.SHA1.Create();
    byte[] b = c.ComputeHash(Encoding.UTF8.GetBytes("google.com"));
    return BitConverter.ToInt64(b, 0); 
```

返回`7501998164347841210`

关于如何让这些数字匹配的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T21:25:50.230

您的 SQL bigint 占用最后 8 个字节，而 c# 实现占用前 8 个字节（并反转它们，因为它运行在 little endian 上）。

在 C# 中取适当的数组范围并将其反转。那你应该没事。

做了一些编码：

```
System.Security.Cryptography.SHA1 c = System.Security.Cryptography.SHA1.Create();
byte[] b = c.ComputeHash(Encoding.UTF8.GetBytes("google.com"));
long value = BitConverter.ToInt64(b, 12);
value = IPAddress.HostToNetworkOrder(value);

Debug.WriteLine(value);
// writes 2172193747348806725 
```

# ruby-on-rails - 在rails中使用复合键连接表

> ID：15579947
> 
> 赞同：3
> 
> 时间：2013-03-22T21:14:14.503
> 
> 标签：ruby-on-rails, routes, composite-primary-key, jointable

让我们假设 User 和 Company 模型之间有一个通用连接表 FollowCompany，例如：

```
class FollowCompany < ActiveRecord::Base
  attr_accessible :user_id, :company_id

  belongs_to :user
  belongs_to :company

end 
```

它有一个复合主键 [user_id, company_id]。它没有 id 列，因为 follow_company 记录由 [used_id, company_id] 唯一标识

由于我希望能够将以下关系视为资源，因此我将其设为 RESTful：

路线.rb：

```
resources :follow_companies 
```

然而，这会导致一个问题：这些生成的路由假设一个我没有的 :id 键。我如何告诉 rails 我实际上使用的是复合键？

我可以想到四种解决方案，我想就哪一种最好提供一些意见：

1.  不要使 :follow_companies 成为资源。取而代之的是，将 URL 与两个关键模式匹配：例如：`match '/follow_companies/:user_id/:company_id/' => follow_companies#edit` 这很丑，因为它很冗长而不是 RESTful。

2.  覆盖 FollowCompany to_param 方法以包含两个模型 ID，例如

    ```
    def to_param
     "#{user_id},#{company_id}"
    end 
    ```

    然而，这很丑陋，因为它看起来像一个 hack 并且它有一些令人讨厌的副作用

3.  将主键列添加到 follow_company 表。然而，这很丑陋，因为它增加了冗余。follow_company 记录由 [company_id, user_id] 唯一标识。无需额外的密钥。

4.  下载复合键 gem 并将其与我的开发环境集成。然而，这很丑陋，因为它不是标准方式并且与其他 ruby​​ 代码不兼容。

所以，正如你所见，我想不出一个优雅的解决方案。这似乎是一种常见的情况，尽管我不能成为第一个遇到这种情况的人。几乎每个应用程序都使用（restful）连接表。处理此问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:12:34.087

数字 3 的优点是您的密钥将毫无意义。虽然不适用于您的情况，但如果某个键值由于某种原因需要更改，则使用复合键会导致该资源的 URL 发生更改。创建一个无意义的主键意味着即使数据发生变化，URL 也会保持不变。

这也往往是执行连接表的“Rails 方式”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:02:45.243

我对 ActiveRecord 没有那么自信，但为什么要使用组合键？当然，您所描述的是 many_to_many 连接。那么这行不通：

```
class User < ActiveRecord::Base
  has_many :follow_companies
  has_many :companies, through: :follow_companies
end

class FollowCompany < ActiveRecord::Base
  belongs_to :user
  belongs_to :company
end

class Company < ActiveRecord::Base
  has_many :follow_companies
end 
```

这意味着您可以像这样以嵌套路由的形式直接路由到公司：

```
resources :users do
  collection :follow_companies
end 
```

这会给你像'/users/1/follow_companies'这样的路线，在你的控制器中你可以这样做：

```
class UsersController < ApplicationController
  def follow_companies
    @user = User.find(params[:id])
    @companies = @user.companies
  end
end 
```

或类似的东西？

# cakephp - 表记录的复选框

> ID：15579948
> 
> 赞同：1
> 
> 时间：2013-03-22T21:14:15.150
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

我想让用户一次发布或取消发布一些文章。因此，在文章列表视图中，我想在每一行（文章）旁边放置一个复选框并将这些复选框发送到控制器。

我尝试`$this->Form->input('status')`在循环中的每一行之后使用，但它为每篇文章创建了相同的复选框。（输入名称和ID相同）

如何创建一组复选框或类似的东西？以及如何在控制器中检查它们？

**注意：**每篇文章都有一个`status`字段，即`tinyint`1 个字符的字段。（所以 Cake 可以理解它是一个复选框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:30:01.370

您需要为每个输入指定一个“索引”。

取而代之的是：

```
$this->Form->input('Article.status'); 
```

用这个：

```
$this->Form->input('Article.0.id');
$this->Form->input('Article.0.status');
$this->Form->input('Article.1.id');
$this->Form->input('Article.1.status');
// .... 
$this->Form->input('Article.xxx.id');
$this->Form->input('Article.xxx.status'); 
```

它的“索引”只是一个确保生成“唯一”输入的计数器。但是，重要的*是*每一行都包含该行的输入`id`；CakePHP 将需要它来确定它应该更新*哪个*记录的状态。

## 进一步阅读

可以在此处找到有关字段/输入命名的文档：

[FormHelper 字段命名约定](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#field-naming-conventions)

[CakePHP - 创建一个编辑同一模型的多行的表单](https://stackoverflow.com/questions/7391452/cakephp-create-a-form-which-edits-multiple-rows-of-the-same-model)

# c - 在 ubuntu 中使用 sigaction() 实现 Signal()

> ID：15579950
> 
> 赞同：0
> 
> 时间：2013-03-22T21:14:26.400
> 
> 标签：c, unix, network-programming, signals, handler

我正在编写一个客户端/服务器应用程序，其中客户端提供文件名，然后服务器将其发送给客户端，最后客户端将保存它。

所以我想让信号处理程序来处理父子之间的僵尸问题，所以这个信号代码：

```
Sigfunc *
signal(int signo, Sigfunc *func)
{
    struct sigaction    act, oact;

    act.sa_handler = func;
    sigemptyset(&act.sa_mask);
    act.sa_flags = 0;
    if (signo == SIGALRM) {
#ifdef    SA_INTERRUPT
        act.sa_flags |= SA_INTERRUPT;    /* SunOS 4.x */
#endif
    } else {
#ifdef    SA_RESTART
        act.sa_flags |= SA_RESTART;        /* SVR4, 44BSD */
#endif
    }
    if (sigaction(signo, &act, &oact) < 0)
        return(SIG_ERR);
    return(oact.sa_handler);
}
/* end signal */ 
```

文件名是`myHeader.h` ，编译文件时的错误是：

```
gcc -Wall -I/home/zmhnk/Desktop/ -o "myHeader" "myHeader.h" (in directory: /home/zmhnk/Desktop)
myHeader.h:281:1: error: unknown type name ‘Sigfunc’
myHeader.h:282:19: error: unknown type name ‘Sigfunc’
Compilation failed. 
```

那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:21:14.547

你需要声明`Sigfunc`，所以在你的头文件中放置这样的东西：

```
typedef void (*Sigfunc)(int sig_no); 
```

在你的头文件中。

由于已经有一个名为 的标准函数`signal`，因此您需要将函数命名为其他名称。

# powershell - 是否所有脚本用户都需要安装 Powershell？

> ID：15579951
> 
> 赞同：0
> 
> 时间：2013-03-22T21:14:29.067
> 
> 标签：powershell

希望使用 Powershell 编写一些脚本。问题是，脚本的所有用户是否都需要在他们的计算机上安装 Powershell 才能使脚本正确执行？Windows 7、XP 和 2k 等的行为是否不同？我知道 powershell 包含在 8 中，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:24:56.670

PowerShell 也包含在 Windows 7 中。PowerShell 可能包含在 XP 中不确定。我很确定 2k 没有 PowerShell。是的，如果您想运行 PowerShell 脚本，您需要安装 PowerShell。就像要运行 Python 脚本时需要安装 Python 一样。

我知道 Win 7 默认自带 PS 2.0 版。不确定在 XP 上。当前版本是 PS 3.0，它带有[Windows Management Framework (WMF) 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=34595)。

在 2012 年 12 月，Microsoft 将 WMF 3.0 作为更新部署，但几周后召回了它，因为[与其他东西存在一些兼容错误](http://blogs.msdn.com/b/powershell/archive/2012/12/20/windows-management-framework-3-0-compatibility-update.aspx)。

我正在使用 PS 3.0 并将我的所有计算机都更新到 PS 3.0。[PS 添加我想学的新东西。](http://technet.microsoft.com/en-us/library/hh857339.aspx)

# variables - 如何将单元格地址作为变量捕获并在 VB 代码中使用？

> ID：15579952
> 
> 赞同：-1
> 
> 时间：2013-03-22T21:14:29.963
> 
> 标签：variables, excel, cell, vba

需要一个代码片段；如果有好心的大师可以提供帮助，请。我需要在 XL VBA 中表达以下光标移动顺序。

在单元格 A1 中输入公式后（Col-A 为空），我需要将公式复制到 A1:AN 范围内的所有单元格中，其中 N 是表格的最后一行。

我录制了一个宏来执行以下操作（代码如下）：

1）输入公式（在单元格A1中）

2）复制公式

3) 向右走 B1

4) 转到 Col-B 中最后一个填充的单元格 [使用 Ctrl+Down]（找到最后一行的最简单方法）

5) 左转至 Col-A

6）选择从当前到A1的所有单元格

7）将公式粘贴到选择中

我需要帮助的部分是一种将步骤 5 中的单元格地址作为变量捕获的方法，以便我可以在具有可变行数的一系列文件上使用此宏。

这是录制的宏。在此示例中，表中的最后一行是 7952。

```
Sub test()
    ActiveCell.FormulaR1C1 = "=LEFT(RC[1],3)"
    ActiveCell.Select
    Selection.Copy
    ActiveCell.Offset(0, 1).Range("A1").Select
    Selection.End(xlDown).Select
    ActiveCell.Offset(0, -1).Range("A1").Select
    Range(Selection, Selection.End(xlUp)).Select
    ActiveCell.Offset(-7951, 0).Range("A1:A7951").Select
    ActiveCell.Activate
    ActiveSheet.Paste
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:26:21.470

我不确定你的结束单元格是否总是相同的，这意味着你可能想要“取消”对行进行硬编码，但你可以试试这个。

```
Sub test()
    Range(Cells(1, 1), Cells(7951, 1)) = "=LEFT(RC[1],3)"
End Sub 
```

如果您总是要根据 B 列中使用的行数将方程式放在 A 列中，您可以试试这个。

```
Sub test()
    ' dimension the variable type
    Dim lastRow As Long
    ' select cell "B1"
    Cells(1, 2).Select
    ' jump to the last consecutive row in column B
    Selection.End(xlDown).Select
    ' collect the row number into a variable
    lastRow = ActiveCell.Row
    ' paste the equation into the variable length range
    Range(Cells(1, 1), Cells(lastRow, 1)) = "=LEFT(RC[1],3)"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:44:22.643

请将以下代码复制到工作表中。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Application.EnableEvents = False
    Application.Calculation = xlCalculationManual

    If Target.Address = "$A$1" And Target.Count = 1 And Target.HasFormula Then

        Dim lastRow As Long
        lastRow = Range("A65000").End(xlUp).Row

        Dim rng As Range
        Set rng = Range("A2:A" & lastRow)

        '        Target.Copy
        '        rng.PasteSpecial xlPasteFormulas

        'OR
        '  rng.Formula = Target.Formula

       ' OR

        rng.FormulaR1C1 = Target.FormulaR1C1

    End If

    Application.EnableEvents = True
    Application.Calculation = xlCalculationAutomatic
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:32:44.417

感谢 Todd 和 user2063626，

我决定采用更简单的方法。我只需要获取最后一行来设置我的选择区域；在要写入的实际值中不使用最后一行的编号。要操作的文件是平面 ascii 导出文件；列布局是不变的，只有行数是可变的。

将公式写入 A1 后，我向下移动 B 列并一次测试一个单元格的值；如果为 TRUE，则将公式复制到左侧相邻单元格；如果为 FALSE，则结束进程。

```
Sub FillClientCodes()

    Range("A1").Select
    ActiveCell.FormulaR1C1 = "=LEFT(RC[1],3)"
    ActiveCell.Select
    Selection.Copy
    ActiveCell.Offset(0, 1).Select
    ActiveCell.Offset(1, 0).Select
CheckCell:
    ActiveCell.Activate
    If ActiveCell.Value <> 0 Then
        ActiveCell.Offset(0, -1).Select
        ActiveCell.Activate
        ActiveSheet.Paste
        ActiveCell.Offset(0, 1).Select
        ActiveCell.Offset(1, 0).Select
        GoTo CheckCell
    Else: GoTo EndOfData
    End If
EndOfData:

End Sub 
```

它并不优雅——它比单次选择和粘贴运行得慢——但它可以工作，并且可以处理我需要处理的所有文件。再次感谢。

# php - stripslashes 和 mysql_escape_string 不删除所有斜杠

> ID：15579955
> 
> 赞同：1
> 
> 时间：2013-03-22T21:14:41.927
> 
> 标签：php, javascript, mysql

我遇到了stripslashes的问题。我无法将我的 Javascript 代码转换为 json_decode，因为我相信斜线会侵入。

这是我所拥有的：

```
 $str = stripslashes ($_POST['setImage']); 
  $setImage = mysql_escape_string($str);
  if(json_decode($str) == NULL)
    {
        echo("not valid json!");

    }else{
        $imageUrls = json_decode($setImage);

    } 
```

从这里获取信息：

```
<img src="<?php echo $photo['picurl']; ?>" onclick='javascript: setCoverForSet(
                {"photo_id": "<?php echo $photo['photo_id']; ?>", 
                 "original": "<?php echo $photo['piclink']; ?>", 
                 "thumbnail": "<?php echo $photo['picurl']; ?>"});'/>

                <input type="text" value='{"photo_id": <?php echo $photo['photo_id']; ?>, "original": <?php echo $photo['piclink']; ?>, "thumbnail": <?php echo $photo['picurl']; ?>}' name="photos[]" /> 
```

这是我打印时输出的内容

```
{\"photo_id\": \"2\", \"original\": \"content/employees/1/1363556600bsmiles.jpg\", \"thumbnail\": \"content/employees/thumbs/1/thumb_1363556600bsmiles.jpg\"} 
```

引号必须在输入中，否则将无法正常工作。

谢谢你的帮助。

更新时间 7:58 EST 03/22

我最终将它发送到数据库中的一个表。

这是整个声明：

```
$str = stripslashes ($_POST['setImage']); 
  $setImage = mysql_escape_string($str);
  if(json_decode($str) == NULL)
    {
        echo("not valid json!");

    }else{
        $imageUrls = json_decode($setImage);

    }

  $photos = mysql_escape_string($_POST[photos]);
  $piclink = print $imageUrls->{'thumbnail'};
  $piclurl = print $imageUrls->{'original'};
  $title = mysql_escape_string($_POST[title]);
  $firstname = mysql_escape_string($_POST[firstname]);
  $lastname = mysql_escape_string($_POST[lastname]);
  $todaysdate = date("Y-m-d");

  mysql_query("UPDATE staff SET title = '".$title."', staff_firstname = '".$firstname."', 
                           staff_lastname = '".$lastname."', 
                           piclink = '".$piclink."', 
                           picurl = '".$picurl."', 
                           last_update = '".$todaysdate."' WHERE staff_id = $EID") or die(mysql_error()); 
```

我唯一能想到的是多余的斜杠干扰了 json_decode。我只放了 echo 语句，以便我可以看到帖子之后传递的内容。

我在执行 mysql_escape_string 时确实尝试了 stripslashes，如下所示：

```
$setImage = mysql_escape_string(stripslashes ($_POST['setImage'])); 
```

但给出了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:22:20.877

我想出了这一点，以防有人感兴趣。

我摆脱了 mysql_escape_string 并消除了斜线。尽管如此，仍然使用了条形斜线。

我还从解码区域删除了打印语句。现在一切正常，它将字符串转移到它应该在的数据库中。

这是新代码：

```
 $setImage = stripslashes ($_POST['setImage']); 

  if(json_decode($setImage) == NULL)
    {
        echo("not valid json!");

    }else{
        $imageUrls = json_decode($setImage);

    }

  $photos = mysql_escape_string($_POST[photos]);
  $piclink = $imageUrls->{'thumbnail'};

  $picurl = $imageUrls->{'original'};

  $title = mysql_escape_string($_POST[title]);
  $firstname = mysql_escape_string($_POST[firstname]);
  $lastname = mysql_escape_string($_POST[lastname]);
  $todaysdate = date("Y-m-d");

  mysql_query("UPDATE staff SET title = '".$title."', staff_firstname = '".$firstname."', 
                           staff_lastname = '".$lastname."', 
                           piclink = '".$piclink."', 
                           picurl = '".$picurl."', 
                           last_update = '".$todaysdate."' WHERE staff_id = $EID") or die(mysql_error());

     echo "<b><font color='#999999'> Staff edit succeeded</font></b><br />"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T21:18:22.073

简单地使用正则表达式并删除所有不需要的符号对您来说效率更高，

阅读[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# python - 如何在 Twisted 试用测试中访问源代码树？

> ID：15579958
> 
> 赞同：1
> 
> 时间：2013-03-22T21:14:48.007
> 
> 标签：python, twisted, trial

在我的试用测试用例中，我想从我的源代码树中运行脚本。试用会更改工作目录，因此简单的相对路径不起作用。在实践中，Trial 的临时目录位于源代码树中，但假设是这种情况似乎不是最理想的。即，我可以这样做：

```
def source_file(p):
    return os.path.join('..', p) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:24:20.913

如果您想在测试旁边找到一个文件并将其作为脚本运行，您可以这样做：

```
from twisted.python.modules import getModule
script = getModule(__name__).filePath.path
# ...
reactor.spawnProcess(..., script, ...) 
```

您也可以使用它来支持将代码存储在 zip 文件中，尽管使用 Python 调用它会变得有点困难。你考虑过只用`python -m`吗？

# tsql - 当@@ROWCOUNT = 0 时 TSQL 中断循环

> ID：15579963
> 
> 赞同：0
> 
> 时间：2013-03-22T21:15:05.027
> 
> 标签：tsql, sap-ase

我在 SPROC 中有插入语句（简化），如下所示

```
SET ROWCOUNT 100

WHILE(1=1)
BEGIN

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition
  -- EDIT: Realized forgot to include this following vital line that is causing issue
  SET @var = @var + @@ROWCOUNT    

  -- @@ROWCOUNT now takes on a value of 1, which will cause the following IF check to fail even when no lines are inserted

  IF(@@ROWCOUNT = 0)
  BEGIN
    BREAK
  END

END 
```

但问题是，在任何操作之后，即使没有更多行适合 my `some_condition`，`@@ROWCOUNT`也等于`1`，而不是`0`。

当返回 0 行与我的匹配时，如何打破该循环`some_condition`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T00:46:28.307

“set”语句创建的行数为 1。您应该立即将 @@ROWCOUNT 保存到 @rowCount 变量中，并稍后使用该变量。

```
declare @rowCount int

WHILE(1=1)
BEGIN

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition
  -- EDIT: Realized forgot to include this following vital line that is causing issue
  SET @rowCount = @@ROWCOUNT
  SET @var = @var + @rowCount    

  -- @@ROWCOUNT now takes on a value of 1, which will cause the following IF check to fail even when no lines are inserted

  IF(@rowCount = 0)
  BEGIN
    BREAK
  END

END 
```

此外，您可以通过最初将 @rowCount 设置为 -1 并将 WHILE 条件更改为 @rowCount <> 0 来简化。条件 BREAK 将不再需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:19:07.170

另一种解决方案。这将检查每次迭代以查看最后插入的记录的 ID 是否已更改。如果它没有更改，则表明该迭代没有添加任何记录。

```
SET ROWCOUNT 100
declare @id int;
WHILE(1=1)

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition

  IF(@id= @@identity)
  BEGIN
    BREAK
  END
  set @id = @@identity;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:31:22.567

试试这个解决方案：

**第一个解决方案**

`@@ROWCOUNT`在循环的条件下使用。

```
SET ROWCOUNT 100

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition  

WHILE(@@ROWCOUNT > 0)
BEGIN

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition  

END 
```

**第二个解决方案**

使用`goto`.

```
SET ROWCOUNT 100

WHILE(1=1)
BEGIN

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition

  IF(@@ROWCOUNT = 0)
  BEGIN
    goto label
  END

END

label1:
print 'After lopp' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:12:59.350

我认为您应该使用它`select`来获取`@@rowcount`变量。试试这个：

```
declare @number_of_rows int    

SET ROWCOUNT 100

WHILE(1=1)
BEGIN

  INSERT INTO table1
  SELECT *
  FROM table2
  WHERE some_condition

  SELECT @number_of_rows=@@ROWCOUNT

  IF (@number_of_rows = 0)
  BEGIN
     BREAK
  END
END 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-03-28T18:46:41.330

实现了类似于 Moho 的解决方案，但用于`SELECT`代替`SET`存储`@@ROWCOUNT`.

# ios - UIScrollView - 将视图移到前面，但在滚动指示器下方

> ID：15579969
> 
> 赞同：5
> 
> 时间：2013-03-22T21:15:46.873
> 
> 标签：ios, objective-c, uiscrollview

我正在使用从 UIScrollView 继承的自定义视图。我遇到的问题是添加一个 UILabel，它应该显示在“顶部”，在其他视图的前面。它有效，但不幸的是它也掩盖了滚动指示器。

![在此处输入图像描述](../Images/36c07d146d0c55450d864da88e98d9c2.png)

如您所见，滚动指示器被遮挡。我不想禁用滚动指示器。

我将视图直接添加到 UIScrollView：

```
UILabel *subsection = [[UILabel alloc] initWithFrame:CGRectMake(0, y * h, 
    [self totalContentWidth], [tableViewDelegate rowHeight])];
[subsection setText:subsectionName];
[subsection setTextAlignment:NSTextAlignmentCenter];

[subSectionRows setValue:subsection forKey:key];

[self addSubview:subsection]; 
```

然后把他们带到前面，

```
- (void) bringSubsectionsToFront {   
    for (UIView* row in [self.subSectionRows allValues]) {
        [self bringSubviewToFront:row];
    }
} 
```

这种行为让我很困惑。如果我查看`UIView.layer.zPosition`所有 UIScrollView 的子视图，它们都是一样的。

如果我调整`bringSubsectionsToFront`方法以将标签移动到包含网格线的视图前面，则行为是相同的。

查看一些行为有效的内部视图类，看起来好像它们被添加到滚动视图中：`[self insertSubview:cell atIndex:0];`

我在这里想念什么？

**解决方案：** verec 表示，如果我真的想的话，我可以找到这些酒吧。所以我在一个合适的点迭代了子视图列表，果然，它们就在那里。对象的顺序如下：

```
CustomCell
...
UIImageView
UIImageView
CustomBorderView
UILabel
UILabel 
```

假设这是 z 顺序，难怪我的标签总是在最前面。

解决方案变得简单；在 CustomCells 之后添加 UILabel。此解决方案仅有效，因为自定义表在索引 0 处添加了 CustomCells，我相信这会使滚动指示器出现在 CustomCells 之后。如果这个假设成立，我可以相对于 CustomCells 对其他视图重新排序，从而实现我想要的分层效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:24:53.883

最简单的是使用和中间的 UIView，称之为“contentView”，它的子视图是你想要引入的视图。

如果该 contentView 是 scrollView 内部的内容，则无论您将哪个 contentView 子项带到前面，它都将保持在滚动指示器的“下方”。

另一种方法是扫描滚动视图以查找滚动指示器（您会找到它们！），但这是一个兼容性风险，因为您永远不知道苹果是否/何时可能决定根据一些新的（更扁平的）删除/重塑/重新定位它们...) 设计范式...

# java - 在android中的资产管理器的帮助下写入现有文件

> ID：15579970
> 
> 赞同：0
> 
> 时间：2013-03-22T21:15:50.670
> 
> 标签：java, android, file-io, outputstream, asset-management

我正在使用下面的代码来读取我的文件，它工作正常，但现在我想向该文件添加新文本。请帮我

```
private void loadingDictionary() {
// TODO Auto-generated method stub
    AssetManager mgr;

    try{
        mgr = getAssets();
        InputStream is = mgr.open("dictinary.txt");
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        StringBuilder  stringBuilder = new StringBuilder();
        String ls = ",";
        while(( line = br.readLine() ) != null){
        stringBuilder.append( line );
        stringBuilder.append( ls );
    }
    dictinaryLines = stringBuilder.toString();
    dictLinesArray = dictinaryLines.split(ls);
    }
    catch(IOException e1){
    }

} 
```

我想将新文本附加到现有数据中。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:53:38.580

据我所知，您不能写入资产文件夹。您应该将数据从资产文件夹复制到应用程序的私有文件夹，甚至复制到外部存储，具体取决于您的数据的可信度。

请参阅[如何将文件写入 android 中的资产文件夹或原始文件夹？](https://stackoverflow.com/questions/3760626/how-to-write-files-to-assets-folder-or-raw-folder-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T18:00:18.270

你不能。如何附加一个由 res/values/strings.xml 调用的字符串。如果你正在做一个主题，我会建议在 res/values.strings.xml 中声明一个字符串，并附加它，然后使用你想要更改从 strngs.xml 读取的任何文本的任何应用程序。

# c# - Oracle TNS 协议适配器错误

> ID：15579973
> 
> 赞同：1
> 
> 时间：2013-03-22T21:16:02.140
> 
> 标签：c#, oracle11g, visual-studio-2010, tnsnames

我有一个远程 Oracle 11G 服务器，可以通过 SQL Plus 和 Visual Studio 的服务器资源管理器连接到该服务器。但是，当我在 C# 代码中使用相同的连接字符串时，我得到 ORA-12560: TNS:protocol adapter error。

我的连接字符串看起来像这样（已经在尝试完成的扩展版本）：

```
Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=172.18.99.99)(PORT=1521))    (CONNECT_DATA=(SERVICE_NAME=MYORADB)));User Id=myuserid;Password=MyPasswd; 
```

我最初尝试使用主机名而不是 IP 进行连接的结果是：

```
ORA-12545: Connect failed because target host or object does not exist 
```

使用IP，地址我得到协议适配器错误

```
ORA-12560: TNS:protocol adapter error
at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode,     OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)
at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, Object src)
at Oracle.DataAccess.Client.OracleConnection.Open()
at TestConnection.Form1.btnTest_Click(Object sender, EventArgs e) 
```

我正在使用 11g 客户端安装目录中的 Oracle.DataAccess 版本 2.112.1.0。

服务器资源管理器的连接方式与代码内部的连接方式有什么不同吗？

# java - 以编程方式模拟 Android 按钮单击

> ID：15579976
> 
> 赞同：4
> 
> 时间：2013-03-22T21:16:06.297
> 
> 标签：java, android

看过[这](https://stackoverflow.com/questions/4553374/how-to-simulate-a-button-click-through-code-in-android)条路，

```
View.performClick(); 
```

但它没有显示按钮的实际按下。[这个](https://stackoverflow.com/questions/6887674/android-button-programmatic-click)方法我也试过

```
btn.setPressed(true);
btn.invalidate(); 
```

但是，它只显示按钮被按下。我已将其缩小到此代码，它按下并释放，但不单击。我错过了什么吗？我怎样才能像用户点击一样进行完整的点击（monkeyrunner 目前不是一个选项）

```
btn = (Button) findViewById(R.id.btn_box);
    Handler handler = new Handler();
    Runnable r = new Runnable() {
        public void run() {
            btn.setPressed(true);
            btn.invalidate();
            Handler handler1 = new Handler();
            Runnable r1 = new Runnable() {
                public void run() {
                    btn.setPressed(false);
                    btn.invalidate();

                }
            };
            handler1.postDelayed(r1, 1000);

        }
    };
    handler.postDelayed(r, 1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:08:31.793

你的代码很好。只需在 `btn.performClick();`后面添加`invalidate();`

为了更好看，您可以减少`handler1`.

# compilation - 在一台机器上安装两个不同版本的软件

> ID：15579980
> 
> 赞同：0
> 
> 时间：2013-03-22T21:16:07.843
> 
> 标签：compilation, thrift

我想在一台机器上同时安装 thrift 0.8.0 和 0.9.0。我已成功下载 .tar.gz 档案`unpack`ed、`configure`d 和 run `make`。当我运行`make install`fr 0.9.0 时，二进制可执行文件`thrift`已复制到`/usr/local/bin/thrift`. 如果我想`make install`为 0.8.0，我想可能会有很大的混乱，因为系统会尝试覆盖一些文件，而不知道安装了以前的版本。如何在一台机器上安装已编译的两个版本的 thrift，例如通过`thrift-0.8.0`和访问它`thrift-0.9.0`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T23:19:13.800

该`configure`程序接受大量参数；其中之一是`--prefix=<dir>`。默认值为`--prefix=/usr/local`. 在您的情况下，使用不同的前缀编译每个版本。例如：

```
$ cd .../thrift.0.8.0/...
$ configure --prefix=/usr/local/thrift/0.8.0
$ make install 
```

进而

```
$ cd .../thrift.0.9.0/...
$ configure --prefix=/usr/local/thrift/0.9.0
$ make install 
```

然后，您修改您的 PATH（MANPATH 等）以使用 /usr/local/thrift/0.{8,9}.0/bin

# sql-server - 从 sql server 中的字符串中删除 '.png'

> ID：15579982
> 
> 赞同：1
> 
> 时间：2013-03-22T21:16:19.640
> 
> 标签：sql-server

基本上我在 SQL Server 中有一个具有图标图像名称的列

有点像

```
ICON
------------
Icon001
Icon002.png
Icon003.png
Icon004.png
Icon005
Icon006.png
Icon007.png 
```

我试图弄清楚如何编写一个脚本来`.png`从拥有它的脚本中删除所有

我试过了

```
Update [dbo].[screen].[icon] 
set ICON = ICON - '%.png%' 
where ICON LIKE '%.png%' 
```

但这不起作用。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:18:52.523

尝试

```
... set ICON=LEFT(icon, LEN(icon)-4 ) where ICON like '%.png' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:21:18.607

```
...SET ICON = REPLACE(ICON, '.png','') 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:19:32.593

也许像

```
UPDATE icon SET icon = LEFT(icon, CHARINDEX('.png', icon) - 1) WHERE icon LIKE '%.png%' 
```

[某事的演示](http://sqlfiddle.com/#!3/86f7f/2)

# c# - C#从cookie获取guid时出现对象引用错误，然后需要转换为字符串

> ID：15579986
> 
> 赞同：-2
> 
> 时间：2013-03-22T21:16:41.860
> 
> 标签：c#

我正在尝试提取存储为唯一标识符的 GUID，但我不断收到以下错误：对象引用未设置为对象的实例。这是代码。

```
 protected void btnGetGuid_Click(object sender, EventArgs e)
{
    System.Guid testGuid = new System.Guid(Server.UrlDecode(Page.Request.Cookies["userid"].Value));

    lblGuidReturn.Text = testGuid.ToString();
} 
```

意识到我对 C# 有点陌生，我已经编写了足够多的 Java 来理解应该发生的事情，但这让我很困惑。

获得 GUID 后，我需要将其存储为字符串，但我认为一旦我解决了这个问题，那部分就可以工作了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:21:57.170

由于 Guid 是一种值类型，因此将 guid 实例转换为字符串时不会出现对象引用错误。有几个地方可以抛出你提到的异常：

Server.UrlDecode(Page.Request.Cookies["userid"].Value)

Server 可以为 null，因为 UrlDecode 不是静态方法。（虽然这不太可能）

页面可能为空。请求可能为空；Cookies 集合可能为空。

很可能 cookie 集合不包含“userid”值，并返回 null。UrlDecode 无法引发 ObjectReference 错误，因为它会检查输入参数。

# c++ - 创建拖放事件c ++

> ID：15579990
> 
> 赞同：1
> 
> 时间：2013-03-22T21:16:58.563
> 
> 标签：c++, windows, winapi, visual-c++, c++builder

如何使用 c++ WIN API 在后台从我的程序向其他程序发送拖放文件。我的程序必须以编程方式执行此操作，无需用户操作，没有可见效果，背景平滑。我对拖放技术不是很熟悉，目前我明白我需要使用OLE拖放操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:54:02.113

您可以查看此代码链接

[http://blogs.msdn.com/b/oldnewthing/archive/2004/12/06/275659.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/12/06/275659.aspx)

然后要使用此代码，您可以在 Visual Studio 中使用 COM ActiveX，如下所示

// 声明 DropTarget 类的单个实例

```
CDropSource codrop;

BOOL CALLBACK 
DlgProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
   switch (message)
      { 
      case WM_INITDIALOG:
     // bind the drop target to the dialog
     codrop.SetHwnd(hwnd);
     RegisterDragDrop(hwnd, &codrop);
     return TRUE;
      case WM_COMMAND:
     if (LOWORD(wParam) == IDCANCEL)
        EndDialog(hwnd, IDCANCEL);
     return TRUE;
     case WM_LBUTTONDOWN:
       OnLButtonDown(hwnd, false,
               LOWORD(lParam), HIWORD(lParam), 0);
      break;
      case WM_DESTROY:
     // unbind the drop target from the dialog
     RevokeDragDrop(hwnd);
     return FALSE;
      }

   return FALSE;
} 
```

// Applet 的标准 WinMain

```
int WINAPI 
WinMain(HINSTANCE hinstance, HINSTANCE, LPSTR, int)
{
   OleInitialize(0);
   DialogBox(hinstance, MAKEINTRESOURCE(IDD_DIALOG1), 0, DlgProc);
   OleUninitialize();
   return 0;
} 
```

当然我没有测试代码它可能需要很多调整才能工作，但你明白了

我想你可以使用这个 shell API 来实现 wuty

[http://msdn.microsoft.com/en-us/library/bb762151(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb762151(v=vs.85).aspx)

# php - PHP PDO 类内存使用

> ID：15579991
> 
> 赞同：0
> 
> 时间：2013-03-22T21:17:06.437
> 
> 标签：php, memory-management, memory-leaks, pdo

我在这里度过了一段时间，我正在尝试在自己之后进行适当的清理 (;))，并显示我的类和方法正在使用多少内存。

因此，我遇到的问题是：

1.  好像清理后比上次内存检查使用的内存多（Pre-Return Memory））

这是课程、测试页面和结果（以及在线结果）

班级：

```
<?php

class o7thDB {

public $Type =          1;          // What type of database are we connecting to
public $Host =          '';         // The host server we are connecting to
public $Name =          '';         // The name of the database
public $User =          '';         // The user to login with
public $Pass =          '';         // The password to login with
public $Query =         '';         // The query to execute
public $Params =        array();    // An array of parameters to pass to the query for execution
public $ShouldCache =   false;      // Should the results be cached?
public $CacheKey =      '';         // What should we name the key for this cache?
public $Exceptions =    '';         // Returns a string representing the exception that occurred if any
/* Memory Usage Tests */
public $InitialMemory;
public $PreSelectMemory;
public $CreatePDOMemory;
public $PostSelectMemory;
public $PreReturnMemory;

protected $DBHandle;
protected $Cache;

protected function Connect(){
    $this->InitialMemory = memory_get_peak_usage();
    if(session_status() != PHP_SESSION_ACTIVE){
        session_start();
    }
    $dsn = array();
    switch ($this->Type) {
        case 1: // MS SQL 
            $dsn = array("mssql:host=$this->Host;dbname=$this->Name", $this->User, $this->Pass);
            break;
        case 2: // MS SQL Server
            $dsn = array("sqlsrv:server=$this->Host;database=$this->Name", $this->User, $this->Pass);
            break;
        case 3: // MS Access
            $dsn = array("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=$this->Name;Uid=$this->User");
            break;
        case 4: // Oracle
            $dsn = array("OCI:dbname=$this->Name;charset=UTF-8", $this->User, $this->Pass);
            break;
        case 5: // Informix
            $dsn = array("informix:DSN=$this->Name", $this->User, $this->Pass);
            break;
        case 6: // Firebird
            $dsn = array("firebird:dbname=$this->Host:$this->Name", $this->User, $this->Pass);
            break;
        case 7: // MySQL
            $dsn = array("mysql:host=$this->Host;dbname=$this->Name", $this->User, $this->Pass);
            break;
        case 8: // SQLLite
            $dsn = array("sqlite:$this->Host");
            break;
        default: // MySQL
            $dsn = array("mysql:host=$this->Host;dbname=$this->Name", $this->User, $this->Pass);
            break;
    }
    try{
        $this->DBHandle = new PDO($dsn[0], $dsn[1], $dsn[2]);
        $this->DBHandle->setAttribute(PDO::ATTR_PERSISTENT, true);
        $this->DBHandle->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $this->CreatePDOMemory = memory_get_peak_usage();
    } catch (PDOException $e) {
        $this->Exceptions = $e->getMessage();
    }
}

// Destroying Everything
public function __destruct(){
    unset($this->DBHandle, $this->Cache, $this->Type, $this->Host, $this->Name, $this->User, $this->Pass, 
            $this->Query, $this->Params, $this->ShouldCache, $this->CacheKey, $this->Exceptions);
}

// Executes a query against the database, returns boolean success
public function Execute(){

}

// Executes a select statement against the database, returns an associative array
public function Select(){
    $this->Connect();
    $this->PreSelectMemory = memory_get_peak_usage();
    $stmt = $this->DBHandle->prepare($this->Query);
    $stmt->execute($this->Params);
    $ret = $stmt->fetchAll(PDO::FETCH_ASSOC);
    $this->PostSelectMemory = memory_get_peak_usage();
    if($this->ShouldCache){         
        $cKey = $this->CacheKey . session_id();
        if(isset($this->Cache[$cKey])){
            $this->PreReturnMemory = memory_get_peak_usage();
            return $this->Cache[$cKey];
        }else{
            $this->PreReturnMemory = memory_get_peak_usage();
            $this->Cache[$cKey] = $ret;
            return $ret;
        }
    }else{
        $this->PreReturnMemory = memory_get_peak_usage();
        return $ret;
    }
    $stmt->closeCursor();
    unset($stmt, $ret); 
}

}
?> 
```

测试页：

```
<?php

    // Show All Errors
    error_reporting(E_ALL);
    ini_set('display_errors', '1');

    require_once($_SERVER['DOCUMENT_ROOT'] . '/Database/o7th.db.class.php');

    // Time the Execution
    $mtime = microtime(); 
    $mtime = explode(" ",$mtime); 
    $mtime = $mtime[1] + $mtime[0]; 
    $starttime = $mtime; 

    $db = new o7thDB();
    $db->Type = 7;
    $db->Host = 'localhost';
    $db->Name = 'mydb';
    $db->User = 'myun';
    $db->Pass = 'mypw'; 
    $db->Query = "Select * From `modx_session` Where `data` Like ? Or `id` Like ?";
    $db->ShouldCache = true;
    $db->CacheKey = 'a';
    $db->Params = array('%a%', '%Welcome%');
    $ret = $db->Select();   
    $rCt = count($ret);
    echo $rCt . ': Records Returned<br />'; 
    echo $db->Exceptions;
    unset($ret);

    echo $db->InitialMemory . ': Initial Memory<br />';
    echo $db->CreatePDOMemory . ': Create PDO Memory<br />';
    echo $db->PreSelectMemory . ': Pre-Select Memory<br />';
    echo $db->PostSelectMemory . ': Post-Select Memory<br />';
    echo $db->PreReturnMemory . ': Pre-Return Memory<br />';
    unset($db);

    echo memory_get_peak_usage() .': After all is said and done!<br />';

    echo '<hr />';

    $mtime = microtime(); 
    $mtime = explode(" ",$mtime); 
    $mtime = $mtime[1] + $mtime[0]; 
    $endtime = $mtime; 
    $totaltime = ($endtime - $starttime); 

    echo "This page was created in ".$totaltime." seconds"; 

?> 
```

测试页结果：

```
21168: Records Returned
288016: Initial Memory
288016: Create PDO Memory
288016: Pre-Select Memory
19209456: Post-Select Memory
19209552: Pre-Return Memory
19209768: After all is said and done!
This page was created in 0.066221952438354 seconds 
```

所以，我的问题是，为什么代码在清理之后会占用更多的内存？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T12:40:07.647

PHP 进程不会释放已释放的内存。通过释放 PHP 脚本中的内存，您只需使其可供同一进程使用。但是整个进程总是拥有它在运行时分配的所有内存。

这就是为什么在 PHP 中不需要自己清理的原因——无论如何，你不能在脚本运行时将它返回给系统，但整个运行时只需要几分之一秒——所以，没有必要打扰。

顺便说一句，你的班级看起来太错误了......想象中的一个。
坦率地说，它旨在解决想象中的问题，而不是真实的问题。就像连接到所有可能的数据库一样。同时它缺乏真正重要的东西。

基于会话的缓存机制看起来很糟糕。**它确实会用大量**无用的数据 污染你的记忆。

*   假设您的网站上有 10 个页面，每个页面都将保存所有其他页面的缓存数据。
*   假设一次将有 10 个用户浏览您的网站 - 因此，您将有 10 个相同数据的副本存储在 10 个不同的文件中。

由于所有这些大量**重复**的“缓存”**消耗了您过于关心的内存。**

结果，效果将相反 - 而不是加速您的网站，这个缓存实际上会使它变得缓慢和臃肿。

这就是为什么说：***“过早的优化是万恶之源”***

# node.js - Node.js+lame - 类型错误：字符串不是函数

> ID：15579992
> 
> 赞同：1
> 
> 时间：2013-03-22T21:17:06.857
> 
> 标签：node.js, lame

我想用 Node.js 读取一个 audi 文件，将其解码为 PCM 并将其编码为 MP3。我正在使用 node-lame 进行编码/解码，但不幸的是我收到以下错误：

```
/Users/Jon/streaming test/node_modules/lame/lib/encoder.js:191
  write(output);
  ^
TypeError: string is not a function
at cb (/Users/Jon/streaming test/node_modules/lame/lib/encoder.js:191:7) 
```

我的编码和解码代码：

```
var filename = './beautifullie.mp3';
var decoder = lame.Decoder();
var encoder = lame.Encoder({channels: 2, bitDepth: 16, sampleRate: 44100});

fs.createReadStream(filename).pipe(decoder);

decoder.on('format', function(format) {
  console.log('Decoding .. '+JSON.stringify(format));
  decoder.pipe(encoder);
});

encoder.on("data", function(data) {
  console.log('Sending..');
  //sendData(data);
}); 
```

您可以在此处找到引发错误的文件：[https ://github.com/TooTallNate/node-lame/blob/master/lib/encoder.js](https://github.com/TooTallNate/node-lame/blob/master/lib/encoder.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:40:50.890

这是一个对我有用的解决方法（在 Ubuntu 机器上运行 node.js 0.10.3）。也许有人知道为什么`require('stream').Transform`不能正常工作——_transform 函数中的 write 参数似乎是一个包含 'utf8' 的字符串。当谈到 javascript 和 node.js 时，我是一个完全的新手......

在decoder.js和encoder.js的开头有一个if语句

`if (!Transform) Transform = require('readable-stream/transform');`

删除 if 并像这样设置 Transform 变量：

`Transform = require('readable-stream/transform');`