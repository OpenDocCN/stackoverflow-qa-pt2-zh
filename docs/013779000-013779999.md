# StackOverflow 问答 13779000-13779999

# perl - 打开位于同一目录中的文件时出错

> ID：13779008
> 
> 赞同：4
> 
> 时间：2012-12-08T15:44:21.017
> 
> 标签：perl, file, directory

我刚开始学习 Perl，但在打开与我的程序位于同一目录中的文件时遇到了问题。

```
#!/usr/bin/perl -w

$proteinfilename = 'NM_021964fragment.pep';

open(PROTEINFILE, $proteinfilename) or die "Can't write to file '$proteinfilename' [$!]\n";

$protein = <PROTEINFILE>;

close(PROTEINFILE);

print "Essa é a sequência da proteína:\n";
print $protein, "\n";

exit; 
```

当我指定文件的目录时，从“NM_021964fragment.pep”更改为“/Users/me/Desktop/programa/NM_021964fragment.pep”，程序运行。但是，即使没有我指定目录，它也不能工作，因为程序和文件在同一个文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:18:48.887

如果您正在执行简单的文件读取，则可以使用`<>`菱形运算符为简单起见。

```
use strict;
use warnings;

my $protein = <>;
print "Essa é a sequência da proteína:\n";
print "$protein\n"; 
```

并像这样使用脚本：

```
perl script.pl NM_021964fragment.pep 
```

这将强制您使用正确的路径，假设您在运行脚本时使用选项卡自动完成。

以这种方式使用命令行参数有点不安全，因为可以通过不受保护的`open`命令执行任意代码。您可以使用该模块[`ARGV::readonly`](http://search.cpan.org/perldoc?ARGV%3a%3areadonly)来防止此类事情发生。或者干脆使用代码本身，比较简单：

```
for (@ARGV){
   s/^(\s+)/.\/$1/;    # leading whitespace preserved
   s/^/< /;            # force open for input
   $_.=qq/\0/;         # trailing whitespace preserved & pipes forbidden
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:56:57.293

相对路径是相对于当前工作目录的，而不是脚本的目录。当脚本起作用时，它们恰好是相同的。但正如您所发现的，情况并非总是如此。您可以使用以下内容来实现您描述的行为：

```
use Cwd         qw( realpath );
use Path::Class qw( file );

my $script_dir = file(realpath($0))->dir;
my $input_file = $script_dir->file('NM_021964fragment.pep'); 
```

# java - 插入排序代码错误

> ID：13779011
> 
> 赞同：0
> 
> 时间：2012-12-08T15:44:48.810
> 
> 标签：java, sorting

我正在尝试打印插入排序算法的步骤

我之前用 c++ 写过，效果很好，但是当我转换成 时`Java`，它给了我这个错误

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
at insertion.insertion_sort(insertionSort.java:45)
at insertionSort.main(insertionSort.java:8) 
```

这是我的代码：

```
 /* print the steps of insertion sort algorithm */

class insertionSort {

    public static void main(String[] args) {

        insertion obj = new insertion();
        obj.insertion_sort();

    } // end of main function

} // end of insertionSort class

class insertion {

    int A[] = { 5, 8, 9, 1, 0, 4, 7, 3, 6, 2 };
    final int ELEMENTS = 10;

    void printStep(int source, String destination) {
        System.out.print("move array[" + source + "]  -----> " + destination);
    }

    void printStep(int source, int destination) {
        System.out.print("move array[" + source + "]  -----> " + "array["
                + destination + "] ");
    }

    void printStep(String source, int destination) {
        System.out.print("move " + source + " -----> array[" + destination
                + "] ");
    }

    void insertion_sort() {

        int key, i;

        for (int j = 1; j < ELEMENTS; j++) {
            key = A[j];
            printStep(j, "key");
            System.out.println();
            i = j - 1;

            while (A[i] > key && i >= 0) {
                A[i + 1] = A[i];
                printStep(i + 1, i);
                System.out.println();
                i = i - 1;
            }

            A[i + 1] = key;
            printStep("key", i + 1);
            System.out.println();
            System.out.println("======================================");

        }

    } // end of insertion_sort ( )

} // end of insertion class 
```

请有人解释我的错在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:49:19.220

问题出在您的 while 验证中

```
while(A[i] > key && i >= 0) 
```

您必须先检查该`i`值`A[i]`

```
while(i >= 0 && A[i] > key) 
```

进一步说明：请注意，在此`while`循环中，您将扣除`i`变量的值。所以会有一段时间`i`小于 0，你在检查`A[-1]`之前检查`i >=0`。验证的顺序`while`和`if`句子很重要，Java 从左到右评估它们。

更多信息：

*   [Java中评估的布尔表达式顺序？](https://stackoverflow.com/q/2028653/1065197)

# python - 字典中的 Python 迭代

> ID：13779012
> 
> 赞同：-2
> 
> 时间：2012-12-08T15:44:51.843
> 
> 标签：python, dictionary, iteration

我坚持以下代码：

```
nonsense = 'faxoyk'
R = {CHR : 'afokyx'.index(CHR) for CHR in nonsense}
print R 
```

我是 python 新手，我对如何设置键和值感到困惑，对此过程的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:58:32.607

字典理解是列表理解之后出现的一个功能，在 python 中：
[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

`nonsense`是一个字符串。但它是一个序列对象，因此使用循环遍历它`for CHR in nonsense`意味着您循环遍历每个字符：

```
print [CHR for CHR in nonsense]
#['f', 'a', 'x', 'o', 'y', 'k'] 
```

循环的值部分本身看起来像这样：

```
['afokyx'.index(CHR) for CHR in nonsense]
[1, 0, 5, 2, 4, 3] 
```

当您执行字典理解时，在每个循环中，`CHR`都是字符串中的一个字符。您要求它将键设置为字符串，并将该键的值设置为字符串文字中`CHR`的索引`CHR``"afokyx"`

在 python2.7 之前（在引入 dict 理解之前）它在列表理解中看起来像这样：

```
print [(CHR, 'afokyx'.index(CHR)) for CHR in nonsense]
# [('f', 1), ('a', 0), ('x', 5), ('o', 2), ('y', 4), ('k', 3)]
R = dict((CHR, 'afokyx'.index(CHR)) for CHR in nonsense) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:02:06.783

> 如何在字典中设置键和值？

假设你有字典：

```
d = {} 
```

将值设置为您将执行的键：

```
d['key'] = 'value' 
```

要得到：

```
 d['key'] 
```

您可以像这样在初始化期间设置键和值解析：

```
 d = {'key':'value'} 
```

但是你已经处理了字典理解。这是一个有点高级的东西：

```
R = {CHR : 'faxoyk'.index(CHR) for CHR in nonsense} 
```

你可以这样理解这一行：

```
nonsense = 'faxoyk'
R = {}
for CHR in nonsense:
    R[CHR] = 'faxoyk'.index(CHR)

print R 
```

每个字符串都有方法`index()`。

`string.index()`返回此字符串中某个字母的索引。例如：字符串'faxoyk'中字母'x'的索引是2，字母'f'的索引是0等等。这是因为 Python 中可迭代对象的索引从 0 开始。

# python - PIL制作并保存由点列表创建的图像

> ID：13779013
> 
> 赞同：0
> 
> 时间：2012-12-08T15:44:52.263
> 
> 标签：python, image-processing, python-2.7

这是输入数据。它存储在名为 points 的 var 中：

```
[(0.4972565157750343, 0.0007919756779007122), (0.4977137631458619, 0.0007919756779007174), (0.49794238683127573, 0.0011879635168510763), (0.49817101051668955, 0.0007919756779007174), (0.49862825788751713, 0.0007919756779007122), (0.4983996342021033, 0.00039598783895035877), (0.49862825788751713, 0.0), (0.4990855052583448, 0.0), (0.4993141289437586, 0.00039598783895036414), (0.49954275262917236, 0.0), (0.5, 0.0)] 
```

这是我制作一张PNG图像并显示的源代码。

```
width = int(TOTALWIDTH)
height = int(TOTALWIDTH*0.32)
im=Image.new("RGB", (width, height))
draw = ImageDraw.Draw(im)
draw.polygon(points,"#993300",None)
im.resize((width, height),Image.ANTIALIAS)
im.save("test-k.png", "PNG")
im.show() 
```

我不知道这有什么问题，但我收到了这个错误：

```
ImageFile._save(im, _idat(fp, chunk), [("zip", (0,0)+im.size, 0, rawmode)])
File "/usr/local/lib/python2.7/site-packages/PIL/ImageFile.py", line 484, in _save
e.setimage(im.im, b)
SystemError: tile cannot extend outside image 
```

可以帮我 ？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:21:55.603

解决它：错误它与尺寸图像和 TOTALWIDTH 的链接有 1。但我发现它需要查看 Kock 曲线和图像区域的值。这对我来说是另一个问题。所以如果你有一些教程，请发给我。谢谢你。

# c# - 使用另一个页面的方法

> ID：13779016
> 
> 赞同：0
> 
> 时间：2012-12-08T15:45:02.093
> 
> 标签：c#, windows-phone-7

有什么方法可以访问其他页面上的方法吗？IE 使用 Mainpage 类中 SecondPage 类中的方法？或者有没有办法使方法全局化（即跨越所有页面的方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:11:22.020

刚刚找到解决问题的方法，把你想用的方法做成PUBLIC STATIC方法，然后如果你想在另一个页面上使用这些方法，就加go

```
 NamespaceName.PageName.MethodName( var Args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:31:57.053

> 您应该使用公共静态方法

这是一个不好的方法，你可以做一个服务类

# python - 在 Python 中创建列表对象

> ID：13779017
> 
> 赞同：0
> 
> 时间：2012-12-08T15:45:03.643
> 
> 标签：python

我有一个对象列表（这是一个游戏），我想让列表本身成为一个对象。

第一个对象是卡片：

```
class card (object):
    def __init__ (self,suit,value):
        self.suit = suit
        self.value = value

    def cardpointvalue(self):
    #not relevant, basically says if card is this return this value for it
    # there is also a __str__ function and a ___repr___ function, don't think
    # they are important 
```

这就是我的卡片对象，我也有一个手对象，这是我遇到问题的地方。

```
class hand (object):
    def __init__ (self,list_cards):
         self.list_cards = list_cards

    def hand_value (self):
        for i in list:
           handpointvalue += (i.cardpointvalue())
        return handpointvalue 
```

在我的 main() 中，这是我遇到麻烦的地方。

我有列表，我将卡片组中的每张卡片都变成卡片对象。然后我将它们传递到名为 list1 和 list2 的人手中（对于每个玩家，为简单起见，我将只处理 list1）。

一旦我将每个玩家的卡片传递到他们的列表中。我尝试将列表放入手对象，然后`handpointvalue`在它们上运行函数。

所以

```
for i in range(10):
    one_card = card_deck.pop(0) #each card is an object at this point
   list1.append(one_card)

print (list1) #just testing, get a list of each card object 
```

这是我遇到麻烦的地方。我尝试了多种方法，最新的是：

```
hand(list1)
print (list1.handpointvalue()) 
```

为什么这不起作用？如何将此对象列表变成对象本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:57:07.637

首先，永远不要使用内置关键字作为变量名（例如`list`）。其次，`hand.hand_value`有一个未定义的变量 ( `handpointvalue`) 并且不应该工作。第三，您甚至没有调用`hand.hand_value()`：

```
print (list1.handpointvalue()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:59:25.117

由于您没有发布任何有理由工作的回溯或代码，我敢打赌您的问题是 3 倍：1）您没有向我们提供名为 handpointvalue 的方法 2）您不是使用 self 获取对象属性，以及 3）您似乎不了解构造函数的工作原理。

鉴于描述，这就是我认为您正在尝试做的事情：

```
cards = [card_deck.pop(0) for i in range(10)]

class Hand(object):
    def __init__(self, cards):
        self.cards = cards
    def handpointvalue(self):
        return sum([c.cardpointvalue() for c in self.cards])

hand = Hand(cards)
v = hand.handpointvalue() 
# v will now be some number, assuming you've implemented cardpointvalue correctly 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T16:02:11.063

```
class hand (object):
    def __init__ (self,list_cards):
       self.list_cards = list_cards
       self.handpointvalue = ""

    def hand_value (self):
        for i in list:
            self.handpointvalue += (i.cardpointvalue())
        return self.handpointvalue 
```

问题是你应该用类手或其他方式初始化手点值

# android - 没有一对一调用 Asyn 任务的 onProgressUpdate 方法

> ID：13779019
> 
> 赞同：0
> 
> 时间：2012-12-08T15:45:20.987
> 
> 标签：android, android-asynctask

我正在使用 Asyn Task 在后台做一些工作，然后我正在使用 onProgressUpdate() 更新 UI。问题是它没有被一对一调用，这意味着如果我在执行之前自己调用它下一行代码，有时它会被调用并完成它的工作，但有时它会在一些延迟后完成它的工作。`I want to know that can we make it sure that the onProgressUpdate() must execute when we want it`或它取决于设备的 cpu 何时执行 onProgressUpdate()，立即或延迟一段时间。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:54:39.107

您必须手动从 doInBackground 中调用 publishProgress。

从 Android 文档，

doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。... 这一步也可以使用 publishProgress(Progress...) 来发布一个或多个单位的进度。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

参考[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:58:31.717

当您调用`onProgressUpdate()`时，实际上您是在向处理程序发布请求，以使代码在另一个线程中运行。

由 Android 操作系统决定何时是切换线程的最佳时机，然后您的代码才会运行。

您可以通过请求当前线程暂停以某种方式强制`Thread`切换。前任：

```
 Thread.sleep(1); 
```

但是，您不能确定下一个运行的线程将是 UI 线程，`onProgressUpdate()`将在哪里运行。

问候。

# html - html/templates - 用

> ID：13779027
> 
> 赞同：10
> 
> 时间：2012-12-08T15:45:56.763
> 
> 标签：html, templates, go

我正在加载一个包含换行符的文本文件，并将其传递给`html/templates`.

在加载的字符串中替换`\n`with `<br>`，它们被模板转义为 html`&lt;br&gt;`并显示在浏览器中，而不是导致换行。

如何在不切换到`text/templates`（没有 XSS 保护）的情况下更改此行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T21:59:35.850

看来您可以先在文本上运行 template.HTMLEscape() 以对其进行清理，然后执行 \n
替换您信任的替换，然后将其用作预转义和受信任的模板数据。

更新：扩展 Kocka 的示例，这就是我的想法：

```
package main

import (
    "html/template"
    "os"
    "strings"
)

const page = `<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <p>{{.}}</p>
  </body>
</html>`

const text = `first line
<script>dangerous</script>
last line`

func main() {
    t := template.Must(template.New("page").Parse(page))
    safe := template.HTMLEscapeString(text)
    safe = strings.Replace(safe, "\n", "<br>", -1)
    t.Execute(os.Stdout, template.HTML(safe)) // template.HTML encapsulates a known safe HTML document fragment.
} 
```

[http://play.golang.org/p/JiH0uD5Zh2](http://play.golang.org/p/JiH0uD5Zh2)

输出是

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <p>first line<br>&lt;script&gt;dangerous&lt;/script&gt;<br>last line</p>
  </body>
</html> 
```

在浏览器中呈现的文本是

```
first line
<script>dangerous</script>
last line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:29:06.483

不确定您要替换`\n`的位置，`<br>`但如果它正在运行，您可以转换字符串，`template.HTML`这样它就不会被转义。

见： http: [//golang.org/pkg/html/template/#HTML](http://golang.org/pkg/html/template/#HTML)

如果它在模板中，应该有一个可用的管道，`{{. | html}}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T09:51:25.983

你可以这样做：

```
package main

import (
    "html/template"
    "os"
)

const page = `<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <p>{{.}}</p>
  </body>
</html>`

func main() {
    t := template.Must(template.New("page").Parse(page))
    t.Execute(os.Stdout, template.HTML("<br>"))
} 
```

[试试看！](http://play.golang.org/p/wngIYuZuN2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-09T10:31:29.350

接受的答案可以很容易地转换为自定义模板函数：

```
func replaceNewline(s string) template.HTML {
    return template.HTML(strings.Replace(template.HTMLEscapeString(s), "\n", "<br>", -1))
} 
```

添加它[`func (*Template) Funcs`](https://golang.org/pkg/html/template/#Template.Funcs)

**例子**

```
package main

import (
    "html/template"
    "os"
    "strings"
)

const page = `<!DOCTYPE html>
<html>
  <body>
    <p>{{. | replaceNewline}}</p>
  </body>
</html>`

const text = `first line
<script>dangerous</script>
last line`

func main() {
    t := template.Must(template.New("page").Funcs(template.FuncMap{
        "replaceNewline": func(s string) template.HTML {
            return template.HTML(strings.Replace(template.HTMLEscapeString(s), "\n", "<br>", -1))
        },
    }).Parse(page))
    t.Execute(os.Stdout, text)
} 
```

**输出**

```
<!DOCTYPE html>
<html>
  <body>
    <p>first line<br>&lt;script&gt;dangerous&lt;/script&gt;<br>last line</p>
  </body>
</html> 
```

[去游乐场](https://play.golang.org/p/FZJfjYKWKNv)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T05:53:25.940

没有必要将整个模板作为不安全的模板传递（这是不好的做法）。

您应该将地图传递给您的模板，并且只明确地“不安全”您想要使用的元素，例如。

```
package main

import "bytes"
import "fmt"
import "html/template"
import "strings"

var input = `
  {{ define "LAYOUT" }}
    <html>
      <body>
        {{ template "CONTENT" . }}
      </body>
    </html>
  {{ end }}

  {{ define "CONTENT" }}
    Unsafe content: {{ .Unsafe }}
    Newlines converted to <br/> follow:
    {{ .Normal }}
  {{ end }}

  {{ template "LAYOUT" . }}
`

var other = `
  Hello
  World
  Again
`

var other2 = `
  <script>alert("Owned!");</script>
`

func main() {

    var t, err = template.New("sample").Parse(input)
    if err != nil {
        panic(err)
    }

    var fixed = strings.Replace(other, "\n", "\n<br/>", -1)
    var model = map[string]interface{}{
        "Normal": template.HTML(fixed),
        "Unsafe": other2,
    }

    var out bytes.Buffer
    t.Execute(&out, model) # <--- !! Notice the model is NOT an HTML type.

    var raw = out.String()
    fmt.Printf("%s", raw)
} 
```

产量：

> ```
> Unsafe content:    &lt;script&gt;alert(&#34;Owned!&#34;);&lt;/script&gt;
> 
> Newlines converted to <br/> follow:
>  <br/>  Hello 
>  <br/>  World 
>  <br/>  Again 
>  <br/>
> 
>   </body>
> </html> 
> ```

# javascript - 画布圆圈和线条

> ID：13779028
> 
> 赞同：0
> 
> 时间：2012-12-08T15:45:58.897
> 
> 标签：javascript, animation, canvas, mouseevent

[http://jsfiddle.net/cs5Sg/](http://jsfiddle.net/cs5Sg/)

如您所见，我正在尝试制作两个圆圈和一条线。当您单击第一个圆圈时，您可以修改线条位置。我有两个问题：

1.  如何删除第二行？（只有当我添加第二个圆圈时，第二行才会出现。）
2.  如何在`mouseup`事件发生后停止“动画”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T16:00:52.107

您只开始一条路径，因此两个圆圈之间的线，并且`start`在该语句中始终是正确的`if`- 您应该将它放在`mousemove`侦听器中，并且只附加一次。

这将创建一个弧：

```
context.arc(x,y,radius,0,2*Math.PI); 
```

然后，这会在同一条路径上创建一条弧线，因此从最后一个结束到这个开始会有一条线：

```
context.arc(x1,y1,radius,0,2*Math.PI); 
```

相反，只需将它们放在单独的路径中：

```
context.beginPath();
context.arc(x,y,radius,0,2*Math.PI);
context.stroke();

context.beginPath();
context.arc(x1,y1,radius,0,2*Math.PI);

context.moveTo(x,y);
context.lineTo(x1,y1);
context.stroke(); 
```

[这是更新的 jsFiddle。](http://jsfiddle.net/minitech/cs5Sg/6/)

# c# - 如何在 C# 中为给定字符串键入 Permutation

> ID：13779030
> 
> 赞同：-1
> 
> 时间：2012-12-08T15:46:05.860
> 
> 标签：c#, recursion, permutation, backtracking

> **可能重复：**
> [如何为给定字符串键入集合](https://stackoverflow.com/questions/13778947/how-to-type-sets-for-a-given-string)

我正在尝试键入字符串的排列，例如字符串“123”应该给我 123 132 213 231 321 312 我需要帮助来修复我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestAAD
{
class Program
{
    static int len = 0;
    static int lenPerm = 0;
    private static void Permutations(string str, string perm , int i)
    {
        if (i == len) Console.WriteLine(perm);
        for (int k = 0; k < len; k++)
        {
             lenPerm = perm.Length;
            for (int j = 0; j < lenPerm; j++)
            {
                if ((perm[j] == str[(len - 1) - k]) && (len-1-k>0))
                    k++;
            }
            if((len-1-k) >=0)
            Permutations(str, perm + str[(len - 1) - k], i++);
        }
    }
    static void Main(string[] args)
    {
        string st = "123";
        len = st.Length;
        Permutations(st, "",0);
    }
}
} 
```

如果有人可以帮助我，请谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:59:47.053

`Permutations``Permutations`在循环`len`时间再次调用。这第二次`Permutations`调用`Permutations`在循环`len`时间内再次调用。这无休止地一次又一次地发生，或者至少直到你得到堆栈溢出为止。

当您使用递归调用时，您必须始终确保递归在某处停止。

```
If (job not done) {
    make recursive call
} 
```

递归调用必须朝着完成工作迈出一步，否则它永远不会完成。

* * *

**UPDATE 1**（仅解决异常问题）

该方法难以阅读。`len-1-k`不要多次重复表达式，而是反转循环！`for (int k = str.Length - 1; k >= 0; k--)`并在内部循环中`k`减少。`k--`我也摆脱了`len`多余的变量。

在您的实施`len-1-k`中总是`>= 0`. 因此递归调用永远不会结束。因此我改变了减少的条件`k`。`k`即使已经是，它也会减少`0`。为了不让`str[k]`条件中的索引越界错误，`k >= 0`必须首先检查。

```
private static void Permutations(string str, string perm, int i)
{
    if (i == str.Length)
        Console.WriteLine(perm);
    for (int k = str.Length - 1; k >= 0; k--) {
        int lenPerm = perm.Length;
        for (int j = 0; j < lenPerm; j++) {
            if (k >= 0 && perm[j] == str[k])
                k--;
        }
        if (k >= 0)
            Permutations(str, perm + str[k], i++);
    }
}

public static void Start()
{
    string st = "123";
    Permutations(st, "", 0);
} 
```

这不再产生无限递归，但结果仍然不正确。我让你弄清楚如何进一步改进代码。

* * *

**更新 2**（创建正确的排列）

最后这是我的工作实现

```
public static class PermutationBuilder
{
    private static char[] _characters;
    private static List<string> _list;

    public static IEnumerable<string> GetPermutations(string characters)
    {
        _characters = characters.ToCharArray();
        _list = new List<string>();
        AddPermutations("", 0);
        return _list;
    }

    private static void AddPermutations(string permutation, int level)
    {
        if (level >= _characters.Length) {
            _list.Add(permutation);
        } else {
            for (int i = 0; i < _characters.Length; i++) {
                char ch = _characters[i];
                if (ch != ' ') {
                    _characters[i] = ' ';
                    AddPermutations(permutation + ch, level + 1);
                    _characters[i] = ch;
                }
            }
        }
    }
} 
```

请注意，我暂时用空格字符标记了已使用的字符。

你这样称呼它

```
foreach (string permutation in PermutationBuilder.GetPermutations("123")) {
    Console.WriteLine(permutation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:02:29.847

排列很容易做到。

```
public string[] FindPermutations(string word)
{
    if (word.Length == 2)
    {
        char[] c = word.ToCharArray();
        string s = new string(new[] { c[1], c[0] });
        return new[]
            {
                word,
                s
            };
    }

    List<string> result = new List<string>();

    string[] subsetPermutations = FindPermutations(word.Substring(1));
    char firstChar = word[0];
    foreach (string temp in subsetPermutations
                    .Select(s => firstChar.ToString(CultureInfo.InvariantCulture) + s))
    {
        result.Add(temp);
        char[] chars = temp.ToCharArray();
        for (int i = 0; i < temp.Length - 1; i++)
        {
            char t = chars[i];
            chars[i] = chars[i + 1];
            chars[i + 1] = t;
            string s2 = new string(chars);
            result.Add(s2);
        }
    }
    return result.ToArray();
} 
```

# c - 参考函数内的参考函数

> ID：13779033
> 
> 赞同：0
> 
> 时间：2012-12-08T15:46:40.020
> 
> 标签：c, function, reference

我想在c中通过引用在函数内传递一个函数。它们都使用相同的参数。这是代码

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
void AtoB(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void AtoC(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void BtoC(int *A, int *B, int *C, int n,int *h1,int *h2,int *h3 );
void function2(int *A, int *B, int *C, int n);

int main(){
int n;
int e;
int h3=1;
int h2=1;
int h1=0;
int min;
int *A;
int *B;
int *C;

printf("Give me the number of disks:");
scanf("%d",&n);
A = (int *) calloc(n,sizeof(int));
B = (int *) calloc(n,sizeof(int));
C = (int *) calloc(n,sizeof(int));
min=pow(2,n)-1;
for (e=0;e<n;e++){
  A[e]=e+1;
}

if (n%2==0){
 for (e=0;e<min/3;e++){
   AtoB(A,B,C,n,&h1,&h2,&h3);

 }

free(A);free(B);free(C);

 return 0;
}

int function1(int Z[],int n){
int j,i,k,a;
for (i=0;i<n;i++){
 k=n-Z[i];
  for (j=0;j<n;j++){
   if(k==j){
    for(a=0;a<2*Z[i]-1;a++){
    printf("%d",Z[i]);
    }
   }
   else if((j==n-1)&&(Z[i]==0)){
    printf("|");
   }
   else{
   printf(" ");
   }
   }
printf("\n");

 }for(i=0;i<2*n-1;i++){
 printf("-");
}
printf("\n\n");
return 0;
}
void function2(int A[],int B[],int C[],int n){

    printf("A\n");
    function1(A,n);
    printf("B\n");
    function1(B,n);
    printf("C\n");
    function1(C,n);
}

void AtoB(int A[],int B[],int C[],int n,int *h1,int  *h2,int *h3){
     if (B[n-1]==0){
     printf("A->B\n");
     B[n-1]=A[*h1];
     A[*h1]=0;
     *h1=*h1+1;
     function2(A,B,C,n);}
     else if (A[n-1]==0){
     printf("A->B\n");
     A[0]=B[n-*h2];
     B[n-*h2]=0;
     *h2=*h2-1;
     function2(A,B,C,n);

    }
AtoC(A,B,C,n,&h1,&h2,&h3);

}

void AtoC(int A[], int B[], int C[], int n,int *h1,int *h2,int *h3 ){

} 
```

程序必须在显示塔结构的同时解决河内塔。

我的问题是尝试从 AtoB 函数传递 AtoC 而我以相同的方式从主函数传递 AtoB 并且没有发生问题。为什么会这样？

我收到错误：从不兼容的指针类型传递“AtoC”的参数 5。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:49:15.017

您试图将指针传递给指针，而函数`AtoC`需要指针作为第 5 个参数。发送`h1`而不是`&h1`.

# asp.net-mvc-3 - ASP.Net MVC 尽可能长时间地保持会话活动

> ID：13779041
> 
> 赞同：1
> 
> 时间：2012-12-08T15:47:29.393
> 
> 标签：asp.net-mvc-3, session-timeout

我们有一个使用 MVC 3 构建的 ASP.Net Web 应用程序。我们在 web.config 中配置了会话超时（我们使用基于表单的身份验证） -

```
<forms loginUrl="~/Common/Login" path="/" protection="All" timeout="180" requireSSL="false" slidingExpiration="true" defaultUrl="~/Common/Login" cookieless="UseDeviceProfile" enableCrossAppRedirects="false" /> 
```

一切运行良好，但在我们上线后，员工开始像典型的 Windows 应用程序一样使用它。“登录”一次并保持 Web 应用程序页面打开直到它们工作，有时超过几个小时。该网络应用程序具有典型的回发页面以及基于 AJAX 的部分和文件上传。

最近对用户活动日志的一些调试和审查表明，这导致了一些意外的回发和服务器端处理。

您建议将会话保持多长时间？我们还将 imp 数据存储在服务器端会话对象上。定期页面刷新可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:13:38.047

表单身份验证票证有效性和 ASP.NET 会话有效性之间存在差异。那是两件完全不相关的事情。您在问题中显示的是表单身份验证票证有效期，您已将其设置为 180 分钟，并具有滑动到期时间。

> 您建议将会话保持多长时间？

ASP.NET 会话（如果您使用任何会话）和表单身份验证票证超时都应设置为相同的值。无论您是长时间保持会话活动还是定期对服务器执行 ping 以保持会话活动都将完全相同。因此，您最好将超时设置为足够高的值，而不是定期请求您的服务器。

话虽如此，如果您正在使用 ASP.NET Session，并且您正在存储此会话 InProc，您应该知道 Web 服务器可以随时决定回收您的应用程序。例如，如果达到某些 CPU/内存阈值，就会发生这种情况。发生这种情况时，如果您将会话存储在内存中，您将丢失所有信息，无论您设置了多长时间的超时值。在这种情况下，您应该考虑使用进程外的分布式会话存储。

# c# - 将 JSON 数组发布到 mvc 控制器

> ID：13779043
> 
> 赞同：18
> 
> 时间：2012-12-08T15:47:44.047
> 
> 标签：c#, asp.net-mvc, arrays, json, post

我正在尝试将 JSON 数组发布到 MVC 控制器。但无论我尝试什么，一切都是 0 或 null。

我有这个包含文本框的表。我需要所有这些文本框中的 ID 和值作为对象。

这是我的 Javascript：

```
$(document).ready(function () {

    $('#submitTest').click(function (e) {

        var $form = $('form');
        var trans = new Array();

        var parameters = {
            TransIDs: $("#TransID").val(),
            ItemIDs: $("#ItemID").val(),
            TypeIDs: $("#TypeID").val(),
        };
        trans.push(parameters);

        if ($form.valid()) {
            $.ajax(
                {
                    url: $form.attr('action'),
                    type: $form.attr('method'),
                    data: JSON.stringify(parameters),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        $('#result').text(result.redirectTo)
                        if (result.Success == true) {
                            return fase;
                        }
                        else {
                            $('#Error').html(result.Html);
                        }
                    },
                    error: function (request) { alert(request.statusText) }
                });
        }
        e.preventDefault();
        return false;
    });
}); 
```

这是我的视图代码：

```
<table>
        <tr>
            <th>trans</th>
            <th>Item</th>
            <th>Type</th>
        </tr>

        @foreach (var t in Model.Types.ToList())
        {
            {
            <tr>
                <td>                  
                    <input type="hidden" value="@t.TransID" id="TransID" />
                    <input type="hidden" value="@t.ItemID" id="ItemID" />
                    <input type="hidden" value="@t.TypeID" id="TypeID" />
                </td>
            </tr>
           }
        }
</table> 
```

这是我试图接收数据的控制器：

```
[HttpPost]
public ActionResult Update(CustomTypeModel ctm)
{

   return RedirectToAction("Index");
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-08T16:03:38.847

你的代码有很多问题。让我们从标记开始。您有一个表格，并且在该表格的每一行中，您都包含隐藏字段。除了您`id`对这些隐藏元素的属性进行了硬编码，这意味着您可能最终会在标记中使用多个具有相同 id 的元素，从而导致标记无效。

因此，让我们首先修复您的标记：

```
@foreach (var t in Model.Types.ToList())
{
    <tr>
        <td>                  
            <input type="hidden" value="@t.TransID" name="TransID" />
            <input type="hidden" value="@t.ItemID" name="ItemID" />
            <input type="hidden" value="@t.TypeID" name="TypeID" />
        </td>
    </tr>
} 
```

好的，现在您有了有效的标记。`submitTest`现在让我们继续讨论单击某个按钮时将触发的 javascript 事件。如果这是表单的提交按钮，我建议您订阅`.submit`表单的事件而不是`.click`其提交按钮的事件。这样做的原因是因为可以提交表单，例如，如果用户在焦点位于某个输入字段内时按下 Enter 键。在这种情况下，您的点击事件不会被触发。

所以：

```
$(document).ready(function () {
    $('form').submit(function () {
        // code to follow

        return false;
    });
}); 
```

好的，接下来是您需要获取表内隐藏元素的值并将它们放入 javascript 对象的部分，我们随后将对其进行 JSON 序列化并作为 AJAX 请求的一部分发送到服务器。

让我们继续：

```
var parameters = [];
// TODO: maybe you want to assign an unique id to your table element
$('table tr').each(function() {
    var td = $('td', this);
    parameters.push({
        transId: $('input[name="TransID"]', td).val(),
        itemId: $('input[name="ItemID"]', td).val(),
        typeId: $('input[name="TypeID"]', td).val()
    });
}); 
```

到目前为止，我们已经填写了参数，现在让我们将它们发送到服务器：

```
$.ajax({
    url: this.action,
    type: this.method,
    data: JSON.stringify(parameters),
    contentType: 'application/json; charset=utf-8',
    success: function (result) {
        // ...
    },
    error: function (request) { 
        // ...
    }
}); 
```

现在让我们转到服务器端。与往常一样，我们从定义视图模型开始：

```
public class MyViewModel
{
    public string TransID { get; set; }
    public string ItemID { get; set; }
    public string TypeID { get; set; }
} 
```

和一个控制器动作，它将收集这个模型：

```
[HttpPost]
public ActionResult Update(IList<MyViewModel> model)
{
    ...
} 
```

这是最终的客户端代码：

```
$(function() {
    $('form').submit(function () {
        if ($(this).valid()) {
            var parameters = [];
            // TODO: maybe you want to assign an unique id to your table element
            $('table tr').each(function() {
                var td = $('td', this);
                parameters.push({
                    transId: $('input[name="TransID"]', td).val(),
                    itemId: $('input[name="ItemID"]', td).val(),
                    typeId: $('input[name="TypeID"]', td).val()
                });
            });

            $.ajax({
                url: this.action,
                type: this.method,
                data: JSON.stringify(parameters),
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    // ...
                },
                error: function (request) { 
                    // ...
                }
            });
        }
        return false;
    });
}); 
```

显然，如果您的视图模型不同（您没有在问题中显示它），您可能需要调整代码以使其与您的结构相匹配，否则默认模型绑定器将无法反序列化 JSON。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-19T08:26:46.140

还有另一种更简单的方法：使用查询字符串发送数据。如果您有兴趣，您当前的方法是错误的，因为 JSON 数组数据类型`string`不是`CustomTypeModel`.

首先，删除`data`ajax 选项。我们不再需要那个了。

其次，更改您的控制器，如下所示：

```
[HttpPost]
public ActionResult Update(string json)
{
    // this line convert the json to a list of your type, exactly what you want.
    IList<CustomTypeModel> ctm = 
         new JavaScriptSerializer().Deserialize<IList<CustomTypeModel>>(json);

    return RedirectToAction("Index");
} 
```

注意 1：您的`CustomTypeModel`属性名称必须与您输入的 JSON 元素名称相同，这一点很重要。所以，你`CustomTypeModel`应该是这样的：

```
public class CustomTypeModel
{
    // int, or maybe string ... whatever you want.
    public int TransIDs { get; set; }
    public int ItemIDs { get; set; }
    public int TypeIDs { get; set; }
} 
```

注意 2：当您想通过查询字符串发送数据时，这种方法很有用。所以，你的网址可以是这样的：

```
url: '/controller/action?json=' + JSON.stringify(trans) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T16:41:10.153

我认为您在 MVC 世界中做事的方式有点错误。如果你有一个合适的模型来绑定你的数据——你最好使用从盒子里出来的助手，而不是使用“手工制作的”JavaScript。如果您需要异步调用，请查看 HtmlHelper 或 AjaxHelper。

`@Html.TextBoxFor()`并使用块内的符号将您的数据绑定到模型`@Html.BeginForm`这将大大简化您的代码并减少 javascript 的数量，这对于维护来说要好得多。

在服务器部分，您需要实现自定义模型绑定器并更改设置以通过模型绑定器处理当前控制器操作的请求。它会带你编写一些服务器端代码，但是静态类型的代码看起来更容易编码和测试或者我，它更适合你的应用程序需要，因为我更喜欢 JavaScript 做它应该做的事情 => 管理 UI，但不构建模型在服务器端正确解析。它更适合单一责任原则。

看这个[视频](http://www.youtube.com/watch?v=2AWVs7SzOXM)，这是一个简单的教程如何做到这一点

# objective-c - Objective-C 每月调用一次方法

> ID：13779044
> 
> 赞同：1
> 
> 时间：2012-12-08T15:47:53.913
> 
> 标签：objective-c, ios, ios5

我有一个方法需要用户在一个月内第一次运行应用程序（从后台启动或返回应用程序）时调用？做这个的最好方式是什么 ？（这是一个 iOs 应用程序）.​​..我猜它在委托中需要调用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:51:38.697

用于`NSUserDefaults`存储最后一次调用该方法的时间，并将其与当前日期进行比较，如果这是该月的第一次（或者如果没有存储值，即第一次）则调用。调用成功后，更新保存的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T15:51:13.127

最好的方法是保存调用该方法的日期和时间，然后每次在应用程序启动时检查当前日期并保存一个以查看它们是否相隔至少一个月。然后，您将保存当前日期并再次运行该方法（如果是）。您想在应用程序委托中执行此操作是正确的。在应用程序确实使用选项完成启动时，您可以在它第一次启动时执行以下操作：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"Last_run_method_date"]) {
    //get new date using [NSDate date] and compare with the date saved in
    //[defaults objectForKey:@"Last_run_method_date"]  If they are more than a month apart
    //[self methodToRun];
} else {
    [defaults setBbject:[NSDate date] forKey:@"Last_run_method_date"];
} 
```

在每月运行一次的方法中，您可能希望通过在方法内部执行此操作来刷新它运行的日期：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBbject:[NSDate date] forKey:@"Last_run_method_date"]; 
```

抱歉，如果代码不是 100% 正确，我正在电脑上打字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:11:51.600

我会为此安排一个本地通知！它就像 ios 的 cron ：D

采用`UILocalNotification`

# android - 第二个活动在屏幕更改方向后关闭。[单安卓]

> ID：13779050
> 
> 赞同：0
> 
> 时间：2012-12-08T15:48:31.633
> 
> 标签：android, android-activity, xamarin.android, screen-orientation, android-orientation

你好堆栈溢出，

## 问题

当我运行我的第一个（主要）android 活动并更改屏幕方向时，该应用程序正常工作，我可以继续更改方向，它仍然可以工作。

当我单击第一个活动上的按钮转到第二个活动时，屏幕发生变化，一切正常，我上下滚动（一切似乎都很好）

但是，当我现在（在第二个活动上）切换方向时，该活动关闭且没有日志错误并恢复到第一个活动。

所以我的问题是我如何保留切换屏幕方向的能力而不关闭我的第二个活动？不确定是什么原因造成的。我读过，每当您的屏幕方向发生变化时，它都必须销毁并重新创建活动。但是，如果它正在处理第一个活动，那么为什么它不能处理第二个活动呢？

这是第一个活动代码：

```
 [Activity(Label = "FishinTales: Main Menu", MainLauncher = true, Icon = "@drawable/icon")]
public class Activity_View_MainMenu : Activity
{
    #region Components
    private Model n_model;
    private GridView n_mainMenuGridView;
    #endregion

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        /*
            Load data using if statements. Load serializeable if no settings file.
            Or create new and test if it is accurately passing the custom class to another activity.
        */
        if (((MyApp) this.ApplicationContext).FishingData == null)
        {
            ((MyApp) this.ApplicationContext).LoadFishinTales();
            this.n_model = ((MyApp) this.ApplicationContext).FishingData;
        }
        else
        {
            this.n_model = ((MyApp) this.ApplicationContext).FishingData;
        }

        // Set our view from the "View_MainMenu" layout resource
        SetContentView(Resource.Layout.View_MainMenu);

        this.n_mainMenuGridView = FindViewById<GridView> (Resource.Id.xml_mainMenuGridView);
        this.n_mainMenuGridView.SetNumColumns(2);
        this.n_mainMenuGridView.Adapter = new MainMenuGridAdapter (this);

        this.n_mainMenuGridView.ItemClick += (o, e) => {
            if (e.Position == 0)
            {
                // Navigate to Fish Species
                Intent intent = new Intent(this, typeof(Activity_View_FishSpecies));
                this.StartActivityForResult(intent, RequestCodes.View_FishSpecies);
            }
            else if (e.Position == 1)
            {
                // Navigate to My Favorite Spots
                Toast.MakeText(this, "TODO: Navigate to My Favorite Sports", ToastLength.Long).Show();
                //Intent intent = new Intent(this, typeof(View_MyFavoriteSpots));
                //this.StartActivityForResult(intent, RequestCodes.View_MyFavoriteSpots);
            }
            else if (e.Position == 2)
            {
                // Navigate to My Season
                Toast.MakeText(this, "TODO: Navigate to My Season", ToastLength.Long).Show();
                //Intent intent = new Intent(this, typeof(View_MySeason));
                //this.StartActivityForResult(intent, RequestCodes.View_MySeason);
            }
            else if (e.Position == 3)
            {
                // Navigate to Inventory
                Toast.MakeText(this, "TODO: Navigate to Inventory", ToastLength.Long).Show();
                //Intent intent = new Intent(this, typeof(View_Inventory));
                //this.StartActivityForResult(intent, RequestCodes.View_Inventory);
            }
            else if (e.Position == 4)
            {
                // Navigate to Fishing News
                Toast.MakeText(this, "TODO: Navigate to Fishing News", ToastLength.Long).Show();
                //Intent intent = new Intent(this, typeof(View_FishingNews));
                //this.StartActivityForResult(intent, RequestCodes.View_FishingNews);
            }
            else if (e.Position == 5)
            {
                // Navigate to Settings
                Toast.MakeText(this, "TODO: Navigate to Settings", ToastLength.Long).Show();
                //Intent intent = new Intent(this, typeof(View_Settings));
                //this.StartActivityForResult(intent, RequestCodes.View_Settings);
            }
            else
            {
                // Invalid Response
                Toast.MakeText(this, "Invalid Menu Selection", ToastLength.Long).Show();
            }
        };
    }

    protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
    {
        // Possibly save data after activity result.?.
    }
} 
```

这是我的第一个活动的图像（可以毫无问题地改变方向）：

![第一个活动 - 主菜单](../Images/8610b258cfbe5c04fa4d1b2d9c44505c.png)

这是第二个活动代码：

```
 [Activity(Label = "FishinTales: Fish Species")]
public class Activity_View_FishSpecies : Activity
{
    #region Components
    private Model n_model;
    private ListView n_fishSpeciesListView;
    #endregion

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Get Application Global Model
        this.n_model = ((MyApp) this.ApplicationContext).FishingData;

        // Set our view from the "View_FishSpecies" layout resource
        SetContentView(Resource.Layout.View_FishSpecies);

        this.n_fishSpeciesListView = FindViewById<ListView> (Resource.Id.xml_fishSpeciesListView);
        this.n_fishSpeciesListView.Adapter = new FishSpeciesListAdapter (this.ApplicationContext, this.n_model.SpecieManager.Species);
    }
} 
```

这是我的第二个活动的图像（在我尝试通过倾斜手机将其设置为横向后关闭的活动）：

![第二项活动 - 鱼类物种清单](../Images/b95fa15fd932a510ffa48f5ecea3d3b0.png)

知道为什么会发生这种情况，甚至更好，对于这种情况有什么好的解决方法？请记住，我不希望屏幕保持某个方向。如果用户可以在两者之间切换而不关闭它们，我希望它。感谢您的阅读和您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:01:44.780

在 Mainfest xmll 中为您的第二个活动添加此内容

```
<activity android:name="com.package.SecondActivity" android:configChanges="keyboard|keyboardHidden|orientation" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:34:18.440

我尝试重现您的问题，对我来说，第二个活动没有关闭，而是在我倾斜手机时正确旋转。但是，当然，我没有你的布局和图像。所以看起来问题不在您发布的代码中，而是在其他地方。很可能你有空间问题（我在处理图像时也遇到了内存问题）。要检查这一点，请尝试注释掉适配器或加载图像的适配器中的代码。在我的情况下，我不得不调整图像以保持它们的小。此外，适配器的代码可能会有所帮助。希望这可以帮助。

# c++ - std::tie 的异常安全性如何？

> ID：13779051
> 
> 赞同：10
> 
> 时间：2012-12-08T15:49:10.280
> 
> 标签：c++, iterable-unpacking, exception-safety

`std::tie`返回一个引用元组，因此您可以执行以下操作：

```
int foo, bar, baz;
std::tie(foo, bar, baz) = std::make_tuple(1, 2, 3); 
```

这与`foo, bar, baz = (1, 2, 3)`Python 中的类似。

如果其中一项任务抛出，应该发生什么，如下例所示？

```
int foo = 1337;
struct Bar {
    Bar& operator=(Bar) { throw std::exception{}; }
} bar;
try {
    std::tie(foo, bar) = std::make_tuple(42, Bar{});
} catch (std::exception const&) {
    std::cout << foo << '\n';
} 
```

它会打印 1337 或 42，还是未指定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:25:27.477

标准谈到了元组赋值艺术**§20.4.2.2 [tuple.assign]**，唯一提到异常的是赋值不应该抛出，除非分配给 throws 的元素之一。

由于没有提及分配元素的顺序，因此*未指定*。

# symfony - Symfony：插入 ArrayCollection 项的新实体错误

> ID：13779052
> 
> 赞同：0
> 
> 时间：2012-12-08T15:49:12.457
> 
> 标签：symfony, doctrine-orm

我还不能在 Symfony2 中正确配置关联。对于一对多关系（许多家庭成员到一个客户），当前代码显示在下面。
当成员 foreach 循环被省略时，客户端按预期添加。目前的错误是：

> 通过关系“Mana\ClientBundle\Entity\Client#members”找到了一个新实体，该关系未配置为对实体进行级联持久化操作：Mana\ClientBundle\Entity\Member@00000000248e5b80000000004cc2e70f。要解决这个问题：要么在这个未知实体上显式调用 EntityManager#persist()，要么配置级联在映射中保持此关联，例如 @ManyToOne(..,cascade={"persist"})。如果您无法找出导致问题的实体，请执行“Mana\ClientBundle\Entity\Member#__toString()”以获取线索。

### 客户端实体片段

```
namespace Mana\ClientBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Mana\ClientBundle\Entity\Client
 *
 * @ORM\Table(name="client")
 * @ORM\Entity
 */
class Client
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
    * @ORM\OneToMany(targetEntity="Mana\ClientBundle\Entity\Member", mappedBy="client")
    */
    protected $members;

    public function __construct()
    {
        $this->members = new ArrayCollection();
    }

    public function setMembers(ArrayCollection $members)
    {
        $this->members = $members;
        return $this;
    }

    public function addMember(Member $member)
    {
        $this->members->add($member);
        return $this;
    }

    public function removeMember(Member $member)
    {
        $this->members->removeElement($member);
        return $this;
    }

    public function getMembers()
    {
        return $this->members;
    } 
```

### 家庭实体

```
namespace Mana\ClientBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Mana\ClientBundle\Entity\Member
 *
 * @ORM\Table(name="household")
 * @ORM\Entity
 */
class Member
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

     /**
     * @ORM\ManyToOne(targetEntity="Client", inversedBy="members")
     * @ORM\JoinColumn(name="clientId", referencedColumnName="id")
     *
     */
     protected $client;

//--- properties

    public function setClient(Client $client)
    {
        $this->client = $client;
        return $this;
    }

    public function getClient()
    {
        return $this->client;
    }

//  getters, setters 
```

### 控制器 createAction()：

```
 public function createAction(Request $request)
    {
        $client  = new Client();
        $form = $this->createForm(new ClientType(), $client);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($client);
            $em->flush();
            foreach ($client->getMembers() as $member)
            {
                $em->persist($member);
            }
            $em->flush();
            return $this->redirect($this->generateUrl('client_show', array('id' => $entity->getId())));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:41:10.340

“$members”包含什么？

您得到的错误是您基本上是在尝试在数据库中存储一些具有“client_id”的对象，但不是由您的对象设置。

如果 $members 包含的任何内容都有该列，则可能是您需要调用类似

```
$member->setClient($entity) 
```

在您尝试刷新（）它们之前。

此外，您知道，在实际调用 $em->flush() 之前不会抛出该错误，因为这是它尝试将某些内容插入数据库的唯一时间。它很可能在没有 for 循环的情况下工作，因为 $members 从未添加到客户端，因此它不会尝试持久化它们。

# 更新

您不应该直接分配客户端 ID。你的第一次关系更正确。

```
// In HouseHold
/**
 *@ORM\ManyToOne(targetEntity="Client")
 *@ORM\JoinColumn(name="clientId", referencedColumnName="id")
 */
protected $client;

public function getClient() { return $this->client; }
public function setClient(Client $client) { $this->client = $client; } 
```

比 $member->setClient($client) 代替 setClientId()。

就 Doctrine 而言，clientId 变量对它没有任何意义。它正在客户端上寻找 getClientId()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:48:34.210

要认识到的基本因素是，Doctrine 仅作用于对多对一关系的拥有方所做的更改，而拥有方是包含多对一子句的实体。因此，对于目前的情况，家庭是需要坚持的拥有方，而不是客户。所以控制器的关键变化是：

```
 $member->setClient($client);
    $em->persist($member); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T00:27:52.123

您可以使用

```
foreach ($client->getMembers() as $member)
        {
            $em->merge($member);
        } 
```

# xamarin.ios - DialogViewController 不触发 ViewDidDisappear

> ID：13779057
> 
> 赞同：0
> 
> 时间：2012-12-08T15:49:49.367
> 
> 标签：xamarin.ios, monotouch.dialog

我有一个如下的层次结构：

```
NavigationController 
```

*   Push first `ViewController`-`ViewDidDisappear`进入下一个视图时正确触发

*   `DialogViewController`具有列表的推送-`ViewDidDisappear`转到下一个时触发

*   每个列表都会打开一个新的`DialogViewController`-`ViewDidDisappear`从不文件

*   这个上有一些按钮可以打开另一个`DialogViewController`-`VidDidDisappear`从不触发

代码：

```
 public partial class CustomDialogController : DialogViewController {

    public CustomDialogController() : base (UITableViewStyle.Grouped, null, true) {
    }

    public override void ViewDidDisappear (bool animated)
    {
        base.ViewDidDisappear (animated);
        Console.WriteLine("Gone baby 2");
        // Never Fires
    }
  }

public partial class WorkoutsView : DialogViewController
{

    public override void ViewDidDisappear (bool animated)
    {
        base.ViewDidDisappear (animated);
        Console.WriteLine("Gone baby");
        // Here is where you can add your custom code for when the DialogViewController disappears
    }

    public WorkoutsView (MetaFitness.BL.MetaFitnessManager manager) : base (UITableViewStyle.Grouped, null, true)
    {
        this.Title ="Title";
        WorkoutViewModel WorkoutDetail = new WorkoutViewModel();
        //var bc = new BindingContext (this, WorkoutDetail, "Details");
        //detailView = new DialogViewController(bc.Root,true);
        List<Workout> workouts = manager.GetWorkouts ();

        var abc = new CustomDialogController();
        abc.Root = new RootElement("WorkoutsView");
        Root = abc.Root;
        Section section = new Section ("Workouts");
        foreach (var wo in workouts) {
            string name = string.Empty;

            CustomDialogController WorkoutController = new CustomDialogController();
            WorkoutController.Root = new RootElement(wo.Name);
            RootElement wSection = WorkoutController.Root;

            var s2 = new Section();
            var mvm2 = new MeasurementViewModel();
                            // the code for this is similar to CustomDialogController - never fires
            s2.Add(new MeasurementViewController(mvm2).Root);
            wSection.Add (s2);

            section.Add(wSection);  

        }
        Root.Add(section);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:55:48.250

那不是如何使用`UINavigationController`and `DialogViewController`。牢记基本概念`UIViewController`：一个控制器处理一屏内容（在 iPhone 上）。这意味着，您应该将控制器推入`UIViewController's`堆栈。这些控制器中的每一个都可以是`DialogViewControllers`. 这么说你已经可以看到`MeasurementViewModel`在一个部分中添加视图（根）`WorkoutsView`是对上述概念的破坏，因此，你违反了 Apple 的设计规则，结果：你的`View*()`方法不会被调用。

相反：在您的元素上添加一个回调，其中一个可以在导航控制器的堆栈上推送一个新控制器。

您应该能够在 MT.Dialog 的 Github 页面上找到所有必要的文档：[https](https://github.com/migueldeicaza/MonoTouch.Dialog) ://github.com/migueldeicaza/MonoTouch.Dialog或 Xamarin 博客：[http ://blog.xamarin.com/2012/02/10 /easy-create-ios-user-interfaces-with-monotouch-dialog/](http://blog.xamarin.com/2012/02/10/easily-create-ios-user-interfaces-with-monotouch-dialog/)

# java - Java gridbaglayout 网格定位问题

> ID：13779067
> 
> 赞同：0
> 
> 时间：2012-12-08T15:50:52.337
> 
> 标签：java, swing, gridbaglayout

我在使用 GridBagLayout 时遇到了一些问题。抱歉无法发布图片。这就是我想要的：

```
 0 1 2 3 4
0 1 1 1 1 2
1 1 1 1 1 2
2 1 1 1 1 2
3 1 1 1 1 4
4 3 3 3 3 4 
```

这就是我得到的

```
 0 1 2 3 4
0 1 1 1 1 2
1 1 1 1 1 2
2 1 1 1 1 2
3 1 1 1 1 2
4 3 3 3 3 4 
```

使用以下代码：

```
 JPanel mainPanel = new JPanel(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.gridheight = 4;
    gbc.gridwidth = 4;
    gbc.gridx = 0;
    gbc.gridy = 0;
    JPanel panelOne = new JPanel();
    //add some content
    mainPanel.add(panelOne, gbc);

    gbc.gridheight = 3;
    gbc.gridwidth = 1;
    gbc.gridx = 4;
    gbc.gridy = 0;
    JPanel panelTwo = new JPanel();
    //Add some content
    mainPanel.add(panelTwo, gbc);

    gbc.gridheight = 1;
    gbc.gridwidth = 4;
    gbc.gridx = 0;
    gbc.gridy = 4;
    JPanel panelThree = new JPanel();
    //Add some content
    mainPanel.add(panelThree, gbc);

    gbc.gridheight = 2;
    gbc.gridwidth = 1;
    gbc.gridx = 4;
    gbc.gridy = 3;
    JPanel panelFour = new JPanel();
    //Add some content
    mainPanel.add(panelFour, gbc);

    mainFrame.setContentPane(mainPanel); 
```

用不同的参数尝试了很多次，添加/删除了 weightx 和 weighty，但没有任何成功。

这是一个变体，只需复制和粘贴：

```
 package problem;

import java.awt.*;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.WindowConstants;

public class Problem {

    public static void main(String[] args) {
        createMainField();
    }

public static void setDamnedSize(Component component, Dimension size) {
    component.setMinimumSize(size);
    component.setMaximumSize(size);
    component.setPreferredSize(size);
    component.setSize(size);
}

public static JPanel createOneButton(String name) {
    JPanel returnPanel = new JPanel(new GridLayout(0, 1));
    JButton button = new JButton(name);
    returnPanel.add(button);
    return returnPanel;
}

public static JFrame createMainField() {
    JFrame mainFrame = new JFrame("Space Race:The Game");
    setDamnedSize(mainFrame, new Dimension(800, 800));
    mainFrame.setLocationRelativeTo(null);
    mainFrame.setExtendedState(Frame.MAXIMIZED_BOTH);

    JPanel mainPanel = new JPanel(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 4;
    gbc.weighty = 4;
    gbc.gridheight = 4;
    gbc.gridwidth = 4;
    gbc.gridx = 0;
    gbc.gridy = 0;
    JPanel panelOne = new JPanel(new GridLayout(1, 0));
    panelOne.setBackground(Color.DARK_GRAY);
    panelOne.add(createOneButton("One"));
    mainPanel.add(panelOne, gbc);

    gbc.weightx = 3;
    gbc.weighty = 1;
    gbc.gridheight = 1;
    gbc.gridwidth = 3;
    gbc.gridx = 4;
    gbc.gridy = 0;
    JPanel panelTwo = new JPanel(new GridLayout(0, 1));
    panelTwo.setBackground(Color.LIGHT_GRAY);
    panelTwo.add(createOneButton("Two"));
    mainPanel.add(panelTwo, gbc);

    gbc.weightx = 4;
    gbc.weighty = 1;
    gbc.gridheight = 1;
    gbc.gridwidth = 4;
    gbc.gridx = 0;
    gbc.gridy = 4;
    JPanel panelThree = new JPanel(new GridLayout(1, 0));
    panelThree.setBackground(Color.GRAY);
    panelThree.add(createOneButton("Three"));
    mainPanel.add(panelThree, gbc);

    gbc.weightx = 1;
    gbc.weighty = 2;
    gbc.gridheight = 2;
    gbc.gridwidth = 1;
    gbc.gridx = 4;
    gbc.gridy = 3;
    JPanel panelFour = new JPanel(new GridLayout(0, 1));
    panelFour.setBackground(Color.decode("#A0A0A0"));
    panelFour.add(createOneButton("Four"));
    mainPanel.add(panelFour, gbc);

    mainFrame.setContentPane(mainPanel);
    mainFrame.setVisible(true);
    return mainFrame;
} 
```

}

# .net - 如何开发应用程序以便其他人能够为其创建扩展/插件

> ID：13779072
> 
> 赞同：1
> 
> 时间：2012-12-08T15:51:48.187
> 
> 标签：.net, visual-studio-2010, plugins

我刚刚读完这个： http: [//msdn.microsoft.com/en-us/library/ms972962.aspx](http://msdn.microsoft.com/en-us/library/ms972962.aspx) 并搜索了很多，但我不明白如何开发一个“插件就绪”的应用程序"

如何开发一个将其信息/数据公开给插件的应用程序，以便插件可以操作所述数据。

例如。我为 Visual Studio 下载的插件，例如“regExp”，可以修改编辑器的数据（即源代码）。

如何开发这样的应用程序 - 它们是设计模式还是框架（`IPlugin`也许来自 .Net？）

感谢所有信息/帮助

艾登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:06:28.457

如果你“颠倒”你的想法，说它是插件暴露*了它的*属性和方法，它可能更容易理解。

在 .Net 中，您可以定义一个`Interface`来定义应该实现哪些方法和属性。接口本身并没有做太多的事情，只是定义了这些东西。

这使得主程序能够以 dll 的形式动态加载这个插件，并检查接口是否实现。如果它现在是主程序，那么使用调用调用什么方法，因为它们是由 dll/库公开的。在这个阶段，dll 本身对主程序一无所知。

然后，在您的插件中，您有一个方法可以采用参数从主程序（文本或其他任何内容）获取数据。因此，当主程序调用插件时，它会同时提供信息。数据可以是一个再次保存不同类型数据的类——这样一个插件可以访问主应用程序的数据，因为它被提供给它。

.Net 还提供了一个来自 .net 4+ 的名为 MEF（托管扩展框架）的插件系统。在此处查看更多信息：http:
[//msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)
[http://www.codeproject.com/Articles/167321/MEF-with-ASP-NET-Hello-世界](http://www.codeproject.com/Articles/167321/MEF-with-ASP-NET-Hello-World)

# java - 如何在加载时在 TextArea 中显示文本？

> ID：13779073
> 
> 赞同：-3
> 
> 时间：2012-12-08T15:51:52.253
> 
> 标签：java, swing, user-interface, textarea, awt

程序运行时，如何在文本区域内显示加载文本？目前，文本显示在 ActionPerformed 上，但我希望它在程序运行时显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:56:08.733

只需将初始值传递给构造函数

```
TextArea textArea = new TextArea("My default string"); 
```

对于`JTextArea`.

# android - 如何让 IDEA 12 识别 IDEA 11 项目中制作的字符串？

> ID：13779080
> 
> 赞同：1
> 
> 时间：2012-12-08T15:52:22.633
> 
> 标签：android, intellij-idea

> **可能重复：**
> [如何清除 IntelliJ 项目索引？](https://stackoverflow.com/questions/1727922/how-to-clear-the-intellij-project-index)

当我在 IDEA 12 中打开 IDEA 11 Android 项目时，所有字符串都显示为红色。

![](../Images/c56aaa1c772cf3178ded61ce666eb71c.png)

我**可以编译**和调试器报告没有错误，但我**不能跳转到声明**（Ctrl+B）。

这仅影响**字符串**，而样式并非如此（如您在图像上看到的那样）。

这是 IDEA 12 中的错误还是我必须强制进行某种刷新？我已经尝试删除 /gen 和 /out 和 /bin 目录，但没有帮助。

出现的错误是`Cannot resolve symbol`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:09:27.733

您可以尝试使缓存无效。为此，请单击**“**文件”菜单中的“使缓存无效”（见下图）。

请注意，这将使 IntelliJ 上相同版本的所有项目的缓存无效——因此下次打开时，IDEA 将重新索引它们（但这需要一些时间）。

![在此处输入图像描述](../Images/07d87e5b1748f5a1bf00c0851179f3f5.png)

# php - 如何在 php 中完成验证？

> ID：13779085
> 
> 赞同：1
> 
> 时间：2012-12-08T15:52:53.033
> 
> 标签：php, mysql, validation

我只需要完成此验证的帮助，我有 php 检查用户提交表单时是否有任何错误的地方：

```
$errors = array();

      if (!$getcourseid){
          $errors[] = "You must enter in Course's ID";
  }else if (!$getcoursename){
      $errors[] = "You must enter in Course's Name";
  }else if (!$getduration){
          $errors[] = "You must select Course's Duration";
      }     

      if(!$errors) {

     $insertsql = "
    INSERT INTO Course
        (CourseNo, CourseName, Duration)
      VALUES
        (?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }                                           

    $insert->bind_param("sss", $getcourseid, $getcoursename, $getduration);

    $insert->execute();

    if ($insert->errno) {
      // Handle query error here
    }

    $insert->close();

     // don't use $mysqli->prepare here
$query = "SELECT CourseNo FROM Course WHERE CourseNo = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$getcourseid);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbCourseId);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();  

          }

$form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td></td>
  <td id='errormsg'>$errormsg</td>
  </tr>
  <tr>
  <td>Course ID:</td>
  <td><input type='text' name='courseid' value='$getcourseid' /></td>
  </tr>
  <tr>
  <td>Course Name:</td>
  <td><input type='text' id='nameofcourse' name='coursename' value='$getcoursename' /></td>
  </tr>
  <tr>
  <td>Duration (Years):</td>
  <td>{$durationHTML}</td>
  </tr>
  <tr>
  <td></td>
  <td><input type='submit' value='Create Course' name='createbtn' /></td>
  </tr>
  </table>
  </form>";

  echo $form; 
```

我的问题是，如果没有错误并且数据库内容已成功完成，我想显示一条成功消息，或者如果表单已完成且没有错误但数据库内容无法完成，则显示一条错误消息。我还想向`$errormsg`变量显示所有消息？我能问一下怎么做吗？

以下是我想要实现的目标，但不确定它是否适用于上面的代码：

```
 if ($numrows == 1){

               $errormsg = "<span style='color: green'>Course " . $getcourseid .  " - "  . $getcoursename . " has been Created</span>";
               $getcourseid = "";
               $getcoursename = "";
               $getduration = "";

           }else{

               $errormsg = "An error has occured, Course has not been Created";

           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:58:49.097

逻辑是这样的，假设你有一系列错误，你可以这样做

```
if(empty($errormsg)) {
   //Go Ahead
} elseif(!empty($errormsg)) {
  //if(isset($errormsg['index'])) {
     echo 'Error'; 
  }
} 
```

详细说明

假设您有 3 个错误，例如

```
$errors[0] = 'Username is invalid';
$errors[1] = 'Password is invalid';
$errors[2] = 'Third error';

if(empty($errors)) {
   //Go Ahead
} else {
    if(isset($errors[0])) {
       echo $errors[0]; 
    } elseif (isset($errors[1])) {
       echo $errors[1];
    } elseif (isset($errors[1])) {
       echo $errors[1]; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:26:31.927

尝试使用 jQuery：

**在 test.php 中**

```
...
$data['status'] = 1; // Status of the operation (1: Ok, 0: Error)
$data['msg'] = $msg; // Error message or success
header('Content-Type: application/json');
echo json_encode($data); 
```

**在 test.js 中：**

```
$("#send").click(function () {
    $.post('test.php', $('#yourForm').serialize(), function(data){
        if(data.status == 1){
            $('#result').show().addClass('success').html(data.msg);
        }
        else{
            $('#result').show().addClass('error').html(data.msg);
        }
    }, "json");
    return false;
}); 
```

**在 test.html 中：**

```
<form method="post" id="yourForm">
...
<input id="send" type="button"/>
<span id="result"></span>
</form> 
```

**在 test.css 中：**

```
.success{
    color: blue;
}
.error{
    color: red;
} 
```

希望能有所帮助。

问候。

# antlr - 解析器规则中不能使用范围元素？

> ID：13779087
> 
> 赞同：5
> 
> 时间：2012-12-08T15:53:10.913
> 
> 标签：antlr

我有以下语法：

```
grammar tryout;

tryout :  my_cmd
        ;

my_cmd
    : 'start'   '0'..'9'+  Name_string
    ;

Digit
    : '0'..'9'
    ;

Name_string
    : ('A'..'Z' | 'a'..'z')  ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*
    ; 
```

如果我在 ANTLRworks 中看到图表，'0'..'9'+ 显示为空元素，因此 Java 代码编译失败，因为生成的代码具有“if ()”语句；如果我在命令行运行，编译也会失败。

解决方法是将 '0'..'9'+ 移动到词法分析器规则中。

```
grammar tryout;

tryout :  my_cmd
        ;

my_cmd
    : 'start'   Digit+  Name_string
    ;

Digit
    : '0'..'9'
    ;

Name_string
    : ('A'..'Z' | 'a'..'z')  ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*
    ; 
```

但我想知道这是否是一个错误。为什么范围元素不能在解析器规则中使用？这是在 ANTLR v3.4 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:39:03.013

在解析器规则中，`..`不像在词法分析器规则中那样用作字符的范围运算符。另请注意，即使您在解析器规则中定义了文字，ANTLR 也会为它们动态创建词法分析器规则，从而进行以下操作：

```
my_cmd
 : 'start' '0'..'9'+ Name_string
 ; 
```

相当于：

```
my_cmd
 : Start D0..D9+ Name_string
 ;

Start : 'start';
D0    : '0';
D9    : '9'; 
```

如果没记错的话，ANTLR v3 的早期版本支持解析器规则中的范围运算符，意思是：匹配 and 之间的任何标记`D0`，`D9`但这非常脆弱。`D0`在and之间添加一条规则`D9`会改变它的含义：

```
D0    : '0';
FOO   : 'foo';
D9    : '9'; 
```

解析器规则：

```
my_cmd
 : '0'..'9'+
 ; 
```

现在将匹配以下标记之一：`D0`,`FOO`或`D9`.

解析器规则中的这种`..`支持已从（至少）v3.3 及更高版本中删除。所以，不要使用`..`内部解析器规则。

# matlab - 在 MATLAB 中使用 portopt 函数时如何限制投资组合中的资产权重

> ID：13779102
> 
> 赞同：2
> 
> 时间：2012-12-08T15:56:00.977
> 
> 标签：matlab, optimization, portfolio

我正在尝试优化具有 10 个资产的投资组合，这些资产可以分为五个。假设资产一和二在第 1 组中。现在在我的优化中，我需要组资产的权重相等。例如，资产 1 和资产 2 在组 1 中。所以我需要资产 1 和资产 2 的权重在可能的优化投资组合中相等。如何将此约束包含在 portopt 函数中？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:10:23.547

在优化之前对它们进行分组。

例如，如果一个组`k`由 组成`x,y,z`，并且您希望它们具有相同的权重，则只需设置此权重。创建合成：`k = 1/3 * (x + y + z)`. 然后优化组，而不是资产。

# streaming - 将 RTMP 流转换为 MMS 流

> ID：13779103
> 
> 赞同：5
> 
> 时间：2012-12-08T15:56:06.123
> 
> 标签：streaming, rtmp, mms, live-streaming

我有实时 rtmp 流，我想将其作为 mms 流推送到 Windows 媒体服务。这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:35:25.603

不，根据**TechNet 论坛上的一位 MS 员工（** *Microsoft，MSFT*）最近提出的题为[**RTMP to MMS restreaming**](http://social.technet.microsoft.com/Forums/en-US/winservermedia/thread/44b94b9e-6ad9-4d6d-9e25-340c1de7a2fe)的问题，这是不可能的。**[](http://social.technet.microsoft.com/Forums/en-US/winservermedia/thread/44b94b9e-6ad9-4d6d-9e25-340c1de7a2fe)**

 ****通常，您会将**原始媒体文件**编码为您需要的流格式，并考虑使用专门满足此类服务要求的[***流媒体服务。***](https://www.google.com/search?q=streaming+service)

更多关于带有流媒体示例的***RTMP 协议的信息，请点击***[**此处**](http://wiki.multimedia.cx/index.php?title=RTMP)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:44:31.530

您可能可以使用 VLC 为您即时转码流。****

# php - 在PHP中将任何数字删除到字符串中

> ID：13779105
> 
> 赞同：2
> 
> 时间：2012-12-08T15:56:16.513
> 
> 标签：php, str-replace

我正在尝试使用此代码将数字删除到元素 id 中，因为在我的代码中我想删除包含 id="###" 的字符串：

```
for($cont = 0;$cont<3000;$cont++)
{
    $strcont = 'id="'.$cont.'"';
    $pro[0]=str_replace($strcont,'',$pro[0]);
} 
```

但我想我可以很容易地做到这一点，我不知道为什么。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:57:50.033

删除该循环并仅使用：

```
$pro[0] = preg_replace('#id="([0-9]+)"#i', '', $pro[0]); 
```

`i``id`如果属性不总是小写，修饰符可能很有用。

# html - 网站上的两个背景。面临两个问题

> ID：13779107
> 
> 赞同：1
> 
> 时间：2012-12-08T15:56:25.640
> 
> 标签：html, css, background, web

我想在我的网站上添加两个背景，但我在那里遇到了一些问题。

1.  问题第一个是一张照片，它应该可以滚动到照片的末尾并且不会重复。有时我的网页会比照片长。有没有办法定义网站的最大长度

2.  问题第二个背景是一个盒子，其中包含一些信息，可以在本网站底部看到：[Logofaves](http://www.logofaves.com/)

我希望这个盒子总是与内容保持一定的距离。即使我没有很多内容，盒子也应该再往上一点，而不是在照片的底部。

我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:12:29.160

这是基本的 CSS，如果你真的想要一个精确的答案，你应该链接示例代码。

尽管如此，

1.  对于第一点，您可以使用：body { background-repeat: no-repeat; } 或者如果你想修复一个 div 的高度（例如称为#content），只需这样做：#content { margin: 0; 高度：100%；溢出-y：自动；}
2.  我不确定是否理解第二点。为什么你不能用 position+margin 属性做你想做的事？

# javascript - jQuery多对多关系

> ID：13779110
> 
> 赞同：2
> 
> 时间：2012-12-08T15:56:43.967
> 
> 标签：javascript, jquery

你好我正在制作图片竞赛页面（有不同的规则）

我似乎无法解决这个“问题”

规则是：用户可以为 ONE 图片投票，但不能为他自己的图片投票。他可以取消他的投票，并投票给另一个人。

我有 PHP 来检查所有这些，它工作正常。

类型为 0 就是这种情况

```
function addVote(pictureID, competitionID, type){
$.post('vote.php', {pictureID:pictureID, competitionID:competitionID, vote:1}, function(data){
    if (data == 'success') {
    $("#comp_voteButton_"+pictureID).text('Remove vote');
    $("#comp_voteButton_"+pictureID).addClass("alreadyVoted");
    $("#comp_voteButton_"+pictureID).attr("onclick", "remVote(" + pictureID + ", " + competitionID + ")")
    if (type == 0){
    $('.button:not(.disabled, #comp_voteButton_'+pictureID+')').text('Only one vote permitted');
    $('.button:not(.disabled, #comp_voteButton_'+pictureID+')').removeClass('alreadyVoted');
            $('.button:not(.disabled)').addClass('.disabled, .red');

    getVote(pictureID, competitionID);
    }else {
        $().toastmessage('showErrorToast', "Error!");
    }
}); 
```

}

在同一个文件中：

```
function remVote(pictureID, competitionID){
$.post('vote.php', {pictureID:pictureID, competitionID:competitionID, vote:0}, function(data){
    if (data == 'success') {
    $("#comp_voteButton_"+pictureID).text('Vote picture');
    $("#comp_voteButton_"+pictureID).attr("onclick", "addVote(" + pictureID +","+competitionID+","+0+")")
    $("#comp_voteButton_"+pictureID).removeClass('alreadyVoted');
    getVote(pictureID, competitionID);
    }else {
        $().toastmessage('showErrorToast', "Error!");
    }
}); 
```

}

编辑：如果这样更容易，这是链接：

```
<a href="javascript:void(0);" class="button blue small" id="comp_voteButton_<?echo $row['ID']?>" onclick="addVote(<?echo $row['ID']?>, <?echo $id?>, <?echo $vote?>)">Vote</a> 
```

我想要什么：在 addVote 上，所有其他按钮都应该设置为 'onclick(remVote(ID, compID))' - 但我不能这样做，因为两个 ID 都没有输入到 addVote 函数中。

我希望你们能得到我的问题（也许这是不可能的，或者必须做出一个奇怪的解决方法） - 但也许有一种很好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:24:02.797

如果您在数据值属性或其他内容中包含图片的 ID 会更容易，但您可以在 addVote 函数中执行类似的操作。

```
$("[id*=comp_voteButton]").each(function (i) {
    $(this).click(function(){
        remVote(pictureID, competitionID);
        var id = this.id.substring(16);
        addVote(id, competitionID);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:17:33.030

好吧，我承认这是一个非常奇怪的问题。

但我做了其他事情（感谢您的时间）

我做了什么：在 addVote ...

```
$('.button:not(.disabled, #comp_voteButton_'+pictureID+')').hide(); 
```

然后它会隐藏所有其他按钮，因此用户不会认为他们可以为一张以上的图片投票。然后在 removeVote 部分再次显示所有按钮。

# python - Python网络编程项目源码

> ID：13779114
> 
> 赞同：1
> 
> 时间：2012-12-08T15:57:36.210
> 
> 标签：python, networking

我目前是一名学生，下学期我将参加 Python 网络编程课程。我需要提出一个网络项目，我将在它开始之前的学期中开展该项目。我想问是否有人知道我的主题的项目的任何好的来源。我可以包含与网络和安全相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:07:13.747

我认为这可能与 StackOverflow 无关；但是，您可以考虑实现一个简单的在线聊天室。

本主题的主要优点是它可能尽可能简单地演示核心概念在网络和安全中的应用。

你也可以做一些架构：

*   服务器后端：Django，还是其他 Python 框架？事件驱动的架构在这里合适吗？发布订阅？
*   客户端 UI/模型：从技术上讲，您应该仍然使用模型-视图-控制器模式，即使这里的模型只是服务器上模型的“代理”。
*   序列化媒体：JSON、YAML、YAML？
*   用户帐户/历史记录的 ORM

**这也是一个安全的项目，因为虽然它并没有过于雄心勃勃，但只要你有更多的时间**，你就可以继续为其添加功能；我相信您可以为聊天室想到许多可能的功能 =)

# java - Android开发：结合两个Java文件

> ID：13779118
> 
> 赞同：0
> 
> 时间：2012-12-08T15:57:54.930
> 
> 标签：java, android, dialog, spinner

我有两个不同的 java 文件，想知道是否有办法将它们组合在一起，以便两个代码都在一个文件中。

下面简单地创建一个对话框，当单击 no 时不执行任何操作，如果单击 yes，则移动到新活动：

```
package com.example.top_tech_deals;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AlertDialogActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.post);

    Button btnAlertTwoBtns = (Button) findViewById(R.id.btnAlertWithTwoBtns);

    /**
     * Showing Alert Dialog with Two Buttons one Positive Button with Label
     * "YES" one Negative Button with Label "NO"
     */
    btnAlertTwoBtns.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // Creating alert Dialog with two Buttons

            AlertDialog.Builder alertDialog = new AlertDialog.Builder(AlertDialogActivity.this);

            // Setting Dialog Title
            alertDialog.setTitle("Confirm Delete...");

            // Setting Dialog Message
            alertDialog.setMessage("Are you sure you want delete this?");

            // Setting Icon to Dialog
            alertDialog.setIcon(R.drawable.delete);

            // Setting Positive "Yes" Button
            alertDialog.setPositiveButton("YES",
                    new DialogInterface.OnClickListener() {
                        public void onClick (DialogInterface dialog,int which) {
                            // Write your code  here to execute after dialog

                            Intent k = new  Intent(AlertDialogActivity.this, Camera.class);
                             startActivity(k);

                            Toast.makeText (getApplicationContext(), "You clicked on YES", Toast.LENGTH_SHORT).show();
                        }
                    });
            // Setting Negative "NO" Button
            alertDialog.setNegativeButton("NO",
                    new DialogInterface.OnClickListener() {
                        public void onClick (DialogInterface dialog,    int which) {
                            // Write your code  here to execute after dialog
                            Toast.makeText (getApplicationContext(), "You clicked on NO", Toast.LENGTH_SHORT).show();
                            dialog.cancel();
                        }
                    });

            // Showing Alert Message
            alertDialog.show();

        }
    });

}
} 
```

第二个代码创建了一个下拉菜单，其中包含用户可以选择的项目：

```
package com.example.top_tech_deals;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;
import android.widget.AdapterView.OnItemSelectedListener;

public class AndroidSpinnerExampleActivity extends Activity implements OnItemSelectedListener{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.spinex);

    // Spinner element
    Spinner spinner = (Spinner) findViewById(R.id.spinner);

    // Spinner click listener
    spinner.setOnItemSelectedListener(this);

    // Spinner Drop down elements
    List<String> categories = new ArrayList<String>();
    categories.add("Automobile");
    categories.add("Business Services");
    categories.add("Computers");
    categories.add("Education");
    categories.add("Personal");
    categories.add("Travel");

    // Creating adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,  android.R.layout.simple_spinner_item, categories);

    // Drop down layout style - list view with radio button
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    // On selecting a spinner item
    String item = parent.getItemAtPosition(position).toString();

    // Showing selected spinner item
    Toast.makeText(parent.getContext(), "Selected: " + item, Toast.LENGTH_LONG).show ();

}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

} 
```

基本上我想要的是我的 xml 文件之一同时使用对话框和下拉菜单，但是因为我无法将这两个代码放入一个 java 文件中，所以我求助于创建两个不同的 xml 文件 post.xml 这是链接到 AlertDialogActivity 和 spinex.xml，后者链接到 AndroidSpinnerExampleActivity。我尝试将两个 java 文件链接到同一个 xml，但我发现只有一个 java 文件似乎可以做任何事情，所以我相信唯一的解决方案是将两个代码合并到一个 java 文件中，但我似乎总是出错当我尝试这个时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:09:18.447

每个公共类必须在一个单独的文件中，文件名与该类相同。但是，如果您将其中一门课程更改为不公开，那么可以。我认为最佳做法是保持文件原样。将类放在单独的文件中对将来的可维护性更好，这样您就可以轻松找到您的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:12:21.993

> 基本上我想要的是我的 xml 文件之一同时使用对话框和下拉菜单，但是因为我无法将这两个代码放入一个 java 文件中，所以我求助于创建两个不同的 xml 文件 post.xml 这是链接到 AlertDialogActivity 和 spinex.xml，后者链接到 AndroidSpinnerExampleActivity。

请按照以下步骤操作：

*   创建一个包含 a`Button`和 a的布局文件`Spinner`。
*   创建一个扩展`Activity`并实现`OnItemSelectedListener`接口的类
*   将之前创建的布局设置为上面 Activity 的内容视图
*   在`onCreate`您将拥有的方法中：

    ```
    setContentView(R.layout.combinedlayout); 
    // must be in the combinedlayout
    Button btnAlertTwoBtns = (Button) findViewById(R.id.btnAlertWithTwoBtns);
    btnAlertTwoBtns.setOnClickListener(new View.OnClickListener() {
       // the rest of the listener code from your first class.
    }
    // must be in the combinedlayout
    Spinner spinner = (Spinner) findViewById(R.id.spinner);

    // Spinner click listener
    spinner.setOnItemSelectedListener(this);

    // Spinner Drop down elements
    List<String> categories = new ArrayList<String>();
    categories.add("Automobile");
    categories.add("Business Services");
    categories.add("Computers");
    categories.add("Education");
    categories.add("Personal");
    categories.add("Travel");

    // Creating adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,  android.R.layout.simple_spinner_item, categories);

    // Drop down layout style - list view with radio button
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:20:24.003

我对你的问题有点困惑。你想组合这些活动，以便你有一个活动，同时打开对话框的按钮和屏幕上的微调器？如果是这样，你应该能够做到这一点。

只需制作一个包含按钮和微调器的 xml 文件：

```
<Button
    .... />

<Spinner
    .... /> 
```

然后，您可以只拥有一个引用微调器和按钮的 Activity，填充微调器并将 onItemSelectedListener 分配给微调器。您可以像以前一样处理按钮。

```
import android.widget.AdapterView.OnItemSelectedListener;

public class AndroidSpinnerAndButtonExampleActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_layout);

        // Spinner element
        Spinner spinner = (Spinner) findViewById(R.id.spinner);

        // Spinner Drop down elements
        List<String> categories = new ArrayList<String>();
        categories.add("Automobile");
        categories.add("Business Services");
        categories.add("Computers");
        categories.add("Education");
        categories.add("Personal");
        categories.add("Travel");

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,  android.R.layout.simple_spinner_item, categories);

        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner.setAdapter(dataAdapter);

        setSpinnerOnItemSelectedListener(spinner);

        Button btnAlertTwoBtns = (Button) findViewById(R.id.btnAlertWithTwoBtns);

        /**
         * Showing Alert Dialog with Two Buttons one Positive Button with Label
         * "YES" one Negative Button with Label "NO"
         */
        btnAlertTwoBtns.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {
                // Creating alert Dialog with two Buttons

                AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);

                // Setting Dialog Title
                alertDialog.setTitle("Confirm Delete...");

                // Setting Dialog Message
                alertDialog.setMessage("Are you sure you want delete this?");

                // Setting Icon to Dialog
                alertDialog.setIcon(R.drawable.delete);

                // Setting Positive "Yes" Button
                alertDialog.setPositiveButton("YES",
                    new DialogInterface.OnClickListener() {
                    public void onClick (DialogInterface dialog,int which) {
                    // Write your code  here to execute after dialog

                    Intent k = new  Intent(this, Camera.class);
                    startActivity(k);

                    Toast.makeText (getApplicationContext(), "You clicked on YES", Toast.LENGTH_SHORT).show();
                    }
                    });
                // Setting Negative "NO" Button
                alertDialog.setNegativeButton("NO",
                        new DialogInterface.OnClickListener() {
                        public void onClick (DialogInterface dialog,    int which) {
                        // Write your code  here to execute after dialog
                        Toast.makeText (getApplicationContext(), "You clicked on NO", Toast.LENGTH_SHORT).show();
                        dialog.cancel();
                        }
                        });

                // Showing Alert Message
                alertDialog.show();

                }
        });
    }

    public void setSpinnerOnItemSelectedListener(Spinner spinner){
        spinner.setOnItemSelectedListener(new OnItemSelectedListener(){
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                // On selecting a spinner item
                String item = parent.getItemAtPosition(position).toString();

                // Showing selected spinner item
                Toast.makeText(parent.getContext(), "Selected: " + item, Toast.LENGTH_LONG).show ();

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
    });
}

} 
```

# c# - 赋值 Windows Phone 7，记录操作

> ID：13779120
> 
> 赞同：0
> 
> 时间：2012-12-08T15:58:00.557
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在开发 WP7 + WCF 服务应用程序，我想提供简单的日志记录程序。在主页上，我有一个用于用户名、密码框和日志按钮的文本框。WP7 端的代码是：

```
 namespace WP7App
    {
      public partial class MainPage : PhoneApplicationPage
      {
         // Constructor
        public MainPage()
        {
        InitializeComponent();
         }
    private void Log(string username, string passwd)
    {
        Service1Client proxy = new Service1Client();
        proxy.LogInCompleted += new
        EventHandler<LogInCompletedEventArgs>(proxy_LogInCompleted);
        proxy.LogInAsync(username, passwd);
    }

    public void proxy_LogInCompleted(object sender, LogInCompletedEventArgs e)
    {
        bool prompt = e.Result; //#PROBLEM LINE(?)
    }
    public void LogInButton_Click(object sender, RoutedEventArgs e)
    {
        if (LoginBox.Text == null) { MessageBox.Show("Enter your login"); }
        if (PasswdBox.Password == null) { MessageBox.Show("Enter your password"); }
        string login = LoginBox.Text;
        string passwd = PasswdBox.Password;
        Log(login, passwd);     

    }

    }
   } 
```

我的问题是在#PROBLEM LINE(?) bool 提示中没有得到 e.Result 值。我在调试器中检查了它，当 e.Result 具有真值但提示始终保持假时。

# php - XSLTProcessor 的问题

> ID：13779123
> 
> 赞同：1
> 
> 时间：2012-12-08T15:58:07.577
> 
> 标签：php, xslt

我在 PHP 中编写了以下代码：

```
 # LOAD XML FILE
$logs = new DOMDocument(); 
$logs->load('dbml.xml');

# START XSLT
$xslt = new XSLTProcessor();
$XSL = new DOMDocument();
$XSL->load( 'dbml.xsl', LIBXML_NOCDATA);
$xslt->importStylesheet( $XSL );
#PRINT

$string = $xslt->transformToXML( $logs ); 
```

该代码完美运行，但是我的浏览器上出现了一些奇怪的警告。

```
Warning: XSLTProcessor::importStylesheet() [xsltprocessor.importstylesheet]: compilation error: file file:///C:/xampp/htdocs/PHP/Escola_Musica/dbml.xsl line 5 element stylesheet in C:\xampp\htdocs\PHP\Escola_Musica\teste.php on line 13

Warning: XSLTProcessor::importStylesheet() [xsltprocessor.importstylesheet]: xsl:version: only 1.0 features are supported in C:\xampp\htdocs\PHP\Escola_Musica\teste.php on line 13 
```

这里有没有人有同样的问题，并且能够解决它。我会很感激任何建议。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:06:02.697

看起来您正在尝试使用仅支持 1.0 的处理器加载 XSLT 2.0 样式表。

# matlab - 当你使用 NaN 作为 LIBSVM 的特征值时会发生什么？

> ID：13779128
> 
> 赞同：4
> 
> 时间：2012-12-08T15:58:45.150
> 
> 标签：matlab, nan, libsvm

我从 Matlab 计算的数据对于某些相关特征有很多 NaN。我的分类预测输出很糟糕，所以我想知道这是否与问题有关。LIBSVM 会接受 NaN 作为有效输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-30T03:54:22.700

您提到的输入格式如下。

> -1 1:NaN 2:0.52 3:0.5554

但是，这种输入格式是无效的，因为您只能在 LibSVM 输入中使用数值。

如果缺少某些值，则需要从输入中排除，例如：

> -1 2:0.52 3:0.5554

在这种情况下，缺失特征的特征值被视为零：

> -1 1:0 2:0.52 3:0.5554

# java - 图标图像“错误 java.lang.NullPointerException”

> ID：13779133
> 
> 赞同：0
> 
> 时间：2012-12-08T15:59:02.343
> 
> 标签：java, image, icons

好吧，我正在尝试设置我的图标图像，但我不断收到此错误....

代码：

```
public static void browser(){
        Image myicon = null;
        myicon.equals("images/icon.gif");
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (InstantiationException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (UnsupportedLookAndFeelException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        JFrame frame = new JFrame("Kloke - Become invisable.");
        frame.setSize(350, 100);
        frame.setResizable(false);
        frame.setIconImage(myicon); 
```

错误：

```
Exception in thread "main" java.lang.NullPointerException
        at web.browser(web.java:14)
        at Checkupdate.main(Checkupdate.java:102) 
```

PS。我是 java 新手，所以请随意对待我，就好像我不知道自己在做什么一样（PSS 第 14 行是我初始化“myicon”变量的地方。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:02:00.253

尝试在尚未实例化的对象上调用*任何*`NullPointerException`实例方法将导致. 你需要实例化`myicon`

```
Image myicon = ImageIO.read(new File("images/icon.gif")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:22:51.080

问题在这里`Image myicon = null; myicon.equals("images/icon.gif");` 您将 myicon 设置为 null 并进行比较，因此编译器抛出 NullPointerException

# javascript - 对象属性随分配变量的值动态变化

> ID：13779134
> 
> 赞同：3
> 
> 时间：2012-12-08T15:59:04.840
> 
> 标签：javascript, kineticjs, javascript-objects

这可能是一个非常基本的问题，因为我是新手。我正在从构造函数创建一个对象。我希望将对象的属性之一链接到变量。所以如果变量值改变，属性的值也应该改变。

示例：我正在研究 kineticjs 并正在从构造函数创建一个对象`Rect`。我希望属性的值`draggable`能够动态地更改为`optvar`每当`optvar`更改时的值。

```
Var optvar="true";

rect = new Kinetic.Rect({ 
    x: 22, 
    y: 7, 
    width: 0, 
    height: 0,
     fill: 'red', 
    stroke: 'black', 
    strokeWidth: 4, 
    draggable: optvar    
});

optvar="false"; // I want value if rect.draggable to be equal to false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:07:01.013

这不是一个基本问题。:-)

从[ES5](http://www.ecma-international.org/ecma-262/5.1/)开始，可以通过(and ) 使用*setter*和*getter*定义属性。ES5 的这一特性在现代浏览器中得到了相当广泛的支持，但较旧的浏览器（例如 IE8 和更早版本）没有。[`Object.defineProperty`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.6)`Object.defineProperties`

使用吸气剂，可以做到这一点：

```
var optvar=true;

rect = new Kinetic.Rect({ 
    x: 22, 
    y: 7, 
    width: 0, 
    height: 0,
     fill: 'red', 
    stroke: 'black', 
    strokeWidth: 4
});
Object.defineProperty(rect, "draggable", {
    enumerable: true,
    get:        function() {
        return optvar;
    }
}); 
```

这会在其上创建一个属性`rect`，检索时会返回 的当前值`optvar`。它之所以有效，是因为 getter 函数是对`optvar`变量的闭包（关于闭包的更多信息，请参见我的博客：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)。）

当然，这是否正常工作`Kinetic.Rect`将取决于如何`Kinetic.Rect`实现。

上面创建的属性是可枚举的[像其他人一样显示在`for..in`循环中]，但不可写。如果你希望它是可写的：

```
Object.defineProperty(rect, "draggable", {
    enumerable: true,
    get:        function() {
        return optvar;
    },
    writable:   true,
    set:        function(value) {
        optvar = value;
    }
}); 
```

根据您对问题的评论：

> 我有多个对象`rect`（都是动态创建的）。我希望所有对象的属性都链接到一个变量。

上面的机制可以用来做到这一点，因为当然，你可以为你的所有 rect 设置 getter：

```
var optvar = true;
var rect;
var rects = [];

while (rects.length < 10) {    
    rect = new Kinetic.Rect({ 
        x: 22, 
        y: 7, 
        width: 0, 
        height: 0,
        fill: 'red', 
        stroke: 'black', 
        strokeWidth: 4
    });
    Object.defineProperty(rect, "draggable", {
        enumerable: true,
        get:        getDraggable
    });

    rects.push(rect);
}
function getDraggable() {
    return optvar;
} 
```

现在，所有 10 个矩形都将是可拖动的，或者不是，基于`optvar`.

*（注意：我假设所有这些代码都在某个函数中，所以我们没有创建全局变量。）*

# mysql - Mysql如何创建聚集索引？

> ID：13779138
> 
> 赞同：14
> 
> 时间：2012-12-08T15:59:27.833
> 
> 标签：mysql, sql, clustered-index

我正在阅读有关聚集索引如何工作的所有内容，并认为它们对我的应用程序有益。我知道主键是自动聚集索引，但是如何将聚集索引添加到非主键列？

即用户帖子的数据存储。每个帖子都有一个ID，也有一个user-id，但是由于用户可以多次发帖，所以user-id不是主键。您将如何将聚集索引添加到用户 ID，这甚至是一个好主意吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-08T17:34:46.680

根据[Clustered and Secondary Indexes](http://dev.mysql.com/doc/refman/en/innodb-index-types.html)，每个表只能有一个聚集索引。

> 除聚集索引外的所有索引都称为二级索引。

如果一个表没有主索引但有另一个唯一索引，则将其用作聚集索引。

> 如果你没有为你的表定义 PRIMARY KEY，MySQL 会定位第一个唯一索引，其中所有键列都不是 NULL，InnoDB 将它用作聚集索引。

因此，我会得出结论，您自己不会添加聚集索引，但 MySQL 会选择表的主索引或第一个唯一索引作为聚集索引。

* * *

如果您尚未定义主索引或唯一索引，MySQL 会自行创建索引

> 如果 table 没有 PRIMARY KEY 或合适的 UNIQUE 索引，InnoDB 在内部生成一个名为 GEN_CLUST_INDEX 的隐藏聚集索引，该索引包含行 ID 值的合成列。这些行按 InnoDB 分配给此类表中的行的 ID 排序。行 ID 是一个 6 字节的字段，随着新行的插入而单调增加。因此，按行 ID 排序的行在物理上是按插入顺序排列的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-08T17:45:38.013

As @Olaf describes, InnoDB chooses which column or column combination will be the clustered index (the primary key, or the first unique index if there is not a primary key, or a hidden column if there is none of the two).

If you want to have a non-unique column as the clustered index, you could define the `post_id` as a unique key and make the combination of `user_id` and `post_id` the primary key which will be chosen as the clustered index:

```
CREATE TABLE Post
( post_id INT NOT NULL AUTO_INCREMENT
, user_id INT NOT NULL
--- other columns
, CONSTRAINT Post_PK
    PRIMARY KEY (user_id, post_id)     -- your clustered index
, CONSTRAINT post_id_UQ
    UNIQUE (post_id)             -- you still want uniqueness for the `post_id`
) ENGINE = InnoDB ; 
```

Whether this is a good idea or not depends on your application, the data volumes and the queries you have. In general the best properties of a clustered key are unique, narrow, static and ever-increasing. That's why auto-incrementing columns are best. Read about it in Kimberly L. Tripp's blog articles: [Ever-increasing clustering key - the Clustered Index Debate..........again!](http://www.sqlskills.com/blogs/kimberly/post/ever-increasing-clustering-key-the-clustered-index-debateagain!.aspx) and [The Clustered Index Debate Continues...](http://www.sqlskills.com/blogs/kimberly/post/the-clustered-index-debate-continues.aspx) (don't stop because they are for SQL-Server, the same issues apply 99% to InnoDB's clustered indexing)

A clustered key like the `(user_id, post_id)` has the first 3 properties but it is not ever-increasing. This will result in fragmentation of the CI and possibly slower insertions into the table.

It will however result in more efficient queries that have `WHERE user_id = ?` conditions or range conditions `WHERE user_id BETWEEN ? AND ?` or `GROUP BY user_id` groupings as the wanted data will be found in the clustered index in one place and in the required order.

I suggest you make tests to choose which is best in your case.

* * *

There is also a MySQL variant, TokuDB, that allows multiple clustered indexes in a table. Details in their article: **[Introducing Multiple Clustering Indexes](http://www.tokutek.com/2009/05/introducing_multiple_clustering_indexes/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-27T06:48:16.633

当您为 InnoDB 表定义**主键**时，MySQL 使用主键作为聚集索引。

如果您没有表的主键，MySQL 将搜索所有键列都不是 NULL的第一个**UNIQUE 索引，并将此 UNIQUE 索引用作聚集索引。**

如果 InnoDB 表没有主键或合适的 UNIQUE 索引，MySQL会在包含行 ID 值的合成列上内部生成一个名为**GEN_CLUST_INDEX的隐藏聚集索引。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-26T07:36:15.293

我建议你问错问题。

另一个问题是“我可以摆脱我的电流`PRIMARY KEY`，这样我就可以让另一个东西‘聚集’吗？” 通常一个`AUTO_INCREMENT`可以被消除或变成一个简单的`INDEX`。

更有可能的问题是“什么是最佳索引`SELECT ...`？”。其他人指出，对于基本的 MySQL，*第二个*聚集索引是不可能的，那么下一个选择是什么？我无法在不知道的情况下回答这个问题`SELECT`。然而，[我的 Index Cookbook](http://mysql.rjweb.org/doc.php/index_cookbook_mysql)回答了一大堆问题`SELECTs`。

# c# - 将 MemoryStream 写入响应对象

> ID：13779139
> 
> 赞同：41
> 
> 时间：2012-12-08T15:59:41.487
> 
> 标签：c#, asp.net, httpresponse

我正在使用以下代码流式传输 MemoryStream 对象中的 pptx，但是当我打开它时，我在 PowerPoint 中收到修复消息，将 MemoryStream 写入响应对象的正确方法是什么？

```
HttpResponse response = HttpContext.Current.Response;
response.Clear();
response.AppendHeader("Content-Type", "application/vnd.openxmlformats-officedocument.presentationml.presentation");
response.AppendHeader("Content-Disposition", string.Format("attachment;filename={0}.pptx;", getLegalFileName(CurrentPresentation.Presentation_NM)));                
response.BinaryWrite(masterPresentation.ToArray());
response.End(); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-07T23:58:39.747

我遇到了同样的问题，唯一有效的解决方案是：

```
Response.Clear();
Response.ContentType = "Application/msword";
Response.AddHeader("Content-Disposition", "attachment; filename=myfile.docx");
Response.BinaryWrite(myMemoryStream.ToArray());
// myMemoryStream.WriteTo(Response.OutputStream); //works too
Response.Flush();
Response.Close();
Response.End(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-13T19:41:06.847

例如，假设您可以获得 Stream、FileStream 或 MemoryStream，您可以这样做：

```
Stream file = [Some Code that Gets you a stream];
var filename = [The name of the file you want to user to download/see];

if (file != null && file.CanRead)
{
    context.Response.AddHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");
    context.Response.ContentType = "application/octet-stream";
    context.Response.ClearContent();
    file.CopyTo(context.Response.OutputStream);
} 
```

那是我的一些工作代码的复制和粘贴，因此内容类型可能不是您要查找的内容，但是将流写入响应是最后一行的技巧。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-08T16:18:05.360

与其在 MemoryStream 中创建 PowerPoint 演示文稿，不如将其直接写入`Response.OutputStream`. 这样您就不需要在服务器上浪费任何内存，因为组件将直接将输出流式传输到网络套接字流。因此，无需将 MemoryStream 传递给生成此演示文稿的函数，只需传递 Response.OutputStream。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-08T16:24:20.947

试试这个

```
Response.Clear();
Response.AppendHeader("Content-Type", "application/vnd.openxmlformats-officedocument.presentationml.presentation");
Response.AppendHeader("Content-Disposition", string.Format("attachment;filename={0}.pptx;", getLegalFileName(CurrentPresentation.Presentation_NM)));
Response.Flush();                
Response.BinaryWrite(masterPresentation.ToArray());
Response.End(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-20T09:35:20.550

首先我们需要写入我们的内存流，然后在内存流方法“WriteTo”的帮助下，我们可以写入页面的响应，如下面的代码所示。

```
 MemoryStream filecontent = null;
   filecontent =//CommonUtility.ExportToPdf(inputXMLtoXSLT);(This will be your MemeoryStream Content)
   Response.ContentType = "image/pdf";
   string headerValue = string.Format("attachment; filename={0}", formName.ToUpper() + ".pdf");
   Response.AppendHeader("Content-Disposition", headerValue);

   filecontent.WriteTo(Response.OutputStream);

   Response.End(); 
```

FormName 是给定的文件名，此代码将通过调用 PopUp 使生成的 PDF 文件可下载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-02T19:11:04.787

我尝试了 end、close、flush 和 System.Web.HttpContext.Current.ApplicationInstance.CompleteRequest() 的所有变体，但没有一个起作用。

然后我将内容长度添加到标题中： Response.AddHeader("Content-Length", asset.File_Size.ToString());

在此示例中，资产是一个具有称为 File_Size 的 Int32 的类

这对我有用，没有别的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-17T15:15:34.557

我的问题是我的流在下载之前没有设置为原点。

```
Response.Clear();
Response.ContentType = "Application/msword";
Response.AddHeader("Content-Disposition", "attachment; filename=myfile.docx");

//ADDED THIS LINE
myMemoryStream.Seek(0,SeekOrigin.Begin);

myMemoryStream.WriteTo(Response.OutputStream); 
Response.Flush();
Response.Close(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-24T08:54:24.947

我遇到过同样的问题。试试这个：复制到 MemoryStream -> 删除文件 -> 下载。

```
string absolutePath = "~/your path";
try {
    //copy to MemoryStream
    MemoryStream ms = new MemoryStream();
    using (FileStream fs = File.OpenRead(Server.MapPath(absolutePath))) 
    { 
        fs.CopyTo(ms); 
    }

    //Delete file
    if(File.Exists(Server.MapPath(absolutePath)))
       File.Delete(Server.MapPath(absolutePath))

    //Download file
    Response.Clear()
    Response.ContentType = "image/jpg";
    Response.AddHeader("Content-Disposition", "attachment;filename=\"" + absolutePath + "\"");
    Response.BinaryWrite(ms.ToArray())
}
catch {}

Response.End(); 
```

# .net - 应用程序在模拟器中工作，但在部署中给出“无法解决错误”

> ID：13779141
> 
> 赞同：2
> 
> 时间：2012-12-08T15:59:58.000
> 
> 标签：.net, ios, mono, xamarin.ios, monodevelop

因此，当我尝试构建以部署到物理设备时，我的 iPhone MonoTouch 应用程序会引发以下错误。

```
Error MT2002: Could not resolve: System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a (MT2002) (IcondySingleView) 
```

它在模拟器中完美运行。

对 system.configuration 的引用位于 dll 中。

我在编译期间也有这个警告，MYModel.dll 包含对 system.configuration 的依赖项。

```
Warning MT0011: MYModel.dll was built against a more recent runtime (NET_4_0) than MonoTouch supports. (MT0011) (IcondySingleView) 
```

为什么它会在模拟器中构建和运行，而不是在设备的部署中。我可以在某处进行相同的设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:13:20.217

> 无法解析：System.Configuration

MonoTouch 提供了一个基于 Silverlight (2.1) 配置文件的配置文件*以及许多附加功能*。此配置文件不**包括**-`System.Configuration`无论如何这对设备没有多大意义。

> 警告 MT0011：MYModel.dll 是针对更新的运行时 (NET_4_0) 构建的

此外，目前（计划于 2013 年春季）MonoTouch 不支持 .NET 4.0 配置文件。有些事情可能会奏效，但通常您会发现缺少的成员不允许您构建应用程序。

> 为什么它会在模拟器中构建和运行，而不是在设备的部署中。

为什么它*可以*在模拟器上工作？那是因为它使用**JIT**。即时编译意味着错误将在运行时发生（如果命中使用缺失类型/成员的代码路径）。

为什么设备*会*失败？那是因为 JIT 是不允许的，我们使用**AOT**编译器。这意味着所有内容都是**提前编译的，**因此缺少任何内容都会导致错误。

> 我可以在某处进行相同的设置吗？

是的，您需要根据 MonoTouch 随附的 SDK 程序集重新构建所有程序集。这将确保您的程序集中仅引用可用的类型/成员。反过来，这意味着一切都保证在构建/运行时可用。

# android - Java Eclipse android-XML 编辑器（图形显示）不工作

> ID：13779144
> 
> 赞同：3
> 
> 时间：2012-12-08T16:00:13.120
> 
> 标签：android, xml, eclipse

我正在 Java Eclipse 上为 Android 开发一些应用程序。至于现在一切正常，但今天突然布局图形显示停止工作，无论我尝试创建新布局还是尝试打开现有布局。它显示*无 XML 内容。请为您的文档添加根视图或布局。*错误。我试图跟随[android sdk main.out.xml 解析错误？](https://stackoverflow.com/questions/2393103/android-sdk-main-out-xml-parsing-error)*说明，但我在Eclipse -> Window -> Preferences -> Run/Debug -> Launching -> Lauch Configuration -> Filter checked launch configuration types*中没有*XSL*选项 。我也没有任何 .out.xml 文件。

 *这是我的 XML 和清单文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".FirstScreenActivity" />

</RelativeLayout>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="s.manipulator"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".FirstScreenActivity"
            android:label="@string/title_activity_first_screen" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="android.app.LauncherActivity" />
        </activity>
        <activity
            android:name=".MainMenuActivity"
            android:label="@string/title_activity_main_menu" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="s.manipulator.FirstScreenActivity" />
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T16:16:43.030

轻松修复：

右键单击布局文件 -> 打开方式 -> Android 布局编辑器

在 Eclipse 中，转到 Window -> Preferences -> General -> Editors -> File Associations 并选择 *.xml，然后在关联编辑器列表中的 Android Layout Editor 条目上按 Default。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:21:55.360

我最终要做的是`Legacy Android Xml Resources Editor`从 kumar_android 所指的同一个列表中选择并将其设置为默认值。当您单击添加按钮时，我必须从出现的列表中选择它。之后我重新启动了eclipse，一切都很好。*

# python - 如何使用 __getattr__ 访问调用参数和参数

> ID：13779146
> 
> 赞同：2
> 
> 时间：2012-12-08T16:00:28.203
> 
> 标签：python, arguments, callable, getattr

我有以下代码，其中大部分代码看起来很尴尬、令人困惑和/或间接，但其中大部分是为了演示我遇到问题的更大代码的部分。请仔细阅读

```
# The following part is just to demonstrate the behavior AND CANNOT BE CHANGED UNDER NO CIRCUMSTANCES
# Just define something so you can access something like derived.obj.foo(x)
class Basic(object):
    def foo(self, x=10):
        return x*x

class Derived(object):
    def info(self, x):
        return "Info of Derived: "+str(x) 
    def set(self, obj):
        self.obj = obj

# The following piece of code might be changed, but I would rather not
class DeviceProxy(object):
    def __init__(self):
        # just to set up something that somewhat behaves as the real code in question
        self.proxy = Derived()
        self.proxy.set(Basic())

    # crucial part: I want any attributes forwarded to the proxy object here, without knowing beforehand what the names will be
    def __getattr__(self, attr):
        return getattr(self.proxy, attr)

# ======================================
# This code is the only I want to change to get things work

# Original __getattr__ function
original = DeviceProxy.__getattr__

# wrapper for the __getattr__ function to log/print out any attribute/parameter/argument/...
def mygetattr(device, key):
    attr = original(device, key) 
    if callable(attr):
        def wrapper(*args, **kw):
            print('%r called with %r and %r' % (attr, args, kw))
            return attr(*args, **kw)
        return wrapper
    else:  
        print "not callable: ", attr
        return attr

DeviceProxy.__getattr__ = mygetattr

# make an instance of the DeviceProxy class and call the double-dotted function
dev = DeviceProxy()
print dev.info(1)
print dev.obj.foo(3) 
```

我想要的是捕获所有方法调用，`DeviceProxy`以便能够打印所有参数/参数等等。在给定的示例中，这在调用时效果很好`info(1)`，所有信息都被打印出来。但是当我调用双点函数`dev.obj.foo(3)`时，我只得到这不是可调用的消息。

如何修改上述代码，以便在第二种情况下获得我的信息？只能修改下面的代码`===`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T19:10:00.577

您只有一个`__getattr__`on`dev`并且您希望在此期间可以`__getattr__`访问。这是不可能的。属性访问不是作为一个整体访问的“点函数”。属性访问序列（点）一次评估一个，从左到右。在您访问时，无法知道您以后会访问。该方法只知道您正在访问*哪些*属性，而不知道您以后可以访问该结果的哪些属性。`foo``dev.obj.foo``dev.obj``foo``dev.__getattr__`*`dev`*

实现您想要的唯一方法是在`obj`. 你说你不能修改“Base”/“Derived”类，所以你不能那样做。理论上，您可以`DeviceProxy.__getattr__`不返回访问属性的实际值，而是将该对象包装在另一个代理中并返回该代理。但是，这可能会有点棘手，并使您的代码更难以理解和调试，因为您最终可能会将大量对象包装在瘦代理中。

# php - 将 foreach 结果排序为 2 列

> ID：13779151
> 
> 赞同：1
> 
> 时间：2012-12-08T16:00:53.723
> 
> 标签：php, css, arrays, foreach

我正在尝试将来自 foreach 的结果列表设置为两列，但是我不太确定如何在不放弃 PHP 的情况下进行操作。

目前，一切如下所示： ![当前布局](../Images/0cec4c19c24816ca94d9d29778559558.png)

我希望它看起来像这样： ![想要的布局](../Images/6d5238086439c474bdbd68c6eded4505.png)

目前，我的 foreach 和 CSS 看起来是这样的：

```
<p class="title">Reviews</p>
            <section id="reviews">
                <ul class="section_body">
                    <?php
                        foreach($reviews['reviews'] as $rv){
                            if ($rtmp++ < 10);
                            if ($rv['freshness'] == 'fresh') {
                               $image = "fresh";
                            }
                            else {
                                $image = "rotten";
                            }

                            echo '<img src="assets/images/' . $image . '.png" class="rating" title="Rotten" alt="Rotten" />';
                            echo '<li>' . $rv['quote'] . '</li>';
                        }
                    ?>
                </ul>
            </section> 
```

![当前的 CSS](../Images/8e79615a49f74957045c6872c3458a52.png)

提前感谢任何可以提供帮助的人！将非常感激地收到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:08:12.697

我通常使用 css 来完成这种任务，让浏览器处理这些事情

```
#reviews li
{
  float:left;
  width: 45%;
  ...
} 
```

将这两行添加到您的 css 并让浏览器负责安排。这个想法是让每个 li 占据容器的一半（50%）。我做了 45% 来处理额外的填充、边距和边框

此外，您的报价和图片应该在 li

```
 <li> <img src="..." />  <span>my quote here</span>  </li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:12:52.057

试试下面的代码

```
<section id="reviews">                
<?php
$i=0;
foreach($reviews['reviews'] as $rv)
{
    if($i++%2 == 0)
    {
        echo '<ul class="section_body">';
    }
    if ($rtmp++ < 10);
    if ($rv['freshness'] == 'fresh') {
       $image = "fresh";
    }
    else {
        $image = "rotten";
    }

    $img =  '<div><img src="assets/images/' . $image . '.png" class="rating" title="Rotten" alt="Rotten" /></div>';
    echo '<li>' .$img . $rv['quote'] . '</li>';

    if($i%2 == 0 || $i== count($reviews['reviews']))
    {
        echo '</ul>'
    }
}
?>
</section> 
```

您应该将图像和评论文本放在 li 元素中。

# iphone - 在 UICollectionView 中每行仅显示一项

> ID：13779152
> 
> 赞同：0
> 
> 时间：2012-12-08T16:00:56.960
> 
> 标签：iphone, ipad, ios6, uicollectionview

我没有代码，因为我不知道如何开始。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:10:50.840

从Apple的[WWDC 视频](https://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)`UICollectionViews`开始，您应该创建一个自定义`UICollectionViewFlowLayout`. 如前所述，您应该设置 CollectionView 的底部和顶部边缘插图，以便只有一个 Cell 可以插入其中，其余的将由 CollectionView 完成。

边缘插图可以用`UIEdgeInsetsMake(top, left, bottom, right)`

因此，在您的布局中，您可以`init`像这样自定义：

```
-(id)init
{
    self = [super init];
    if (self) {
        self.itemSize = CGSizeMake(100, 100);
        self.scrollDirection = UICollectionViewScrollDirectionHorizontal;

        CGRect bounds = [[UIScreen mainScreen] bounds];
        CGFloat spacing = bounds.size.height / 2 - self.itemSize.height / 2;
        self.sectionInset = UIEdgeInsetsMake(spacing, 0, spacing, 0);
    }
    return self;
} 
```

因此，实际上您将 CollectionView 的高度设置为 Screen 的高度减去单元格的高度，除了它是居中的。

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-30T15:54:40.523

如果想要一个项目为什么你不尝试 UItableView

```
UITableView *myTableView = [UITableView alloc] init]; 
```

代表

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# eclipse - Eclipse 无法连接到 Internet

> ID：13779153
> 
> 赞同：2
> 
> 时间：2012-12-08T16:01:18.240
> 
> 标签：eclipse, eclipse-cdt

我正在使用适用于 C/C++ 开发人员版本的 Eclipse IDE：Juno Service Release 1。

*   我没有使用代理。
*   我已禁用防病毒和防火墙。
*   在“网络连接”中，我将“Active Provider”放在“Direct”中。

Eclipse 仍然无法连接到互联网。

我错过了什么？

谢谢你的帮助。

# database - posts_per_page 是否会阻止对帖子表的完整扫描？

> ID：13779154
> 
> 赞同：0
> 
> 时间：2012-12-08T16:01:30.783
> 
> 标签：database, wordpress

我试图阻止对我们主页上包含 100K+ 记录的 wp_post 表进行完整扫描。我只想要没有分页的前 30 个。

如果我没有使用分页，并且使用 post_per_page 来限制查询，它是否仍然扫描整个表，然后返回前 30 行，还是从第 1 行到第 30 行然后停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:18:18.700

WordPress 循环在加载任何模板时执行，仅在定义的限制下扫描一次。此限制在*Settings > Reading*中定义。

然而，如果您使用`post_per_page`with`query_posts`那么它将重新执行查询。不建议用于大型网站。[请参阅：此处](http://codex.wordpress.org/Function_Reference/query_posts)的其他 SQL 查询部分。

# html - 响应式媒体查询不适用于 PC 上的浏览 器调整大小

> ID：13779158
> 
> 赞同：1
> 
> 时间：2012-12-08T16:01:47.913
> 
> 标签：html, css, responsive-design

我正在为我的网站进行响应式设计。

我为此制作了两个单独的 css 文件：

```
<link rel="stylesheet" type="text/css" media = "screen and (min-device-width: 500px) and (max-device-width: 1500px)" href="style.css" />
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 500px)" href="mobile.css" /> 
```

通过任何手机查看时，它都可以正常工作。但是当我在我的电脑上调整浏览器的大小时，样式表并没有改变。

我希望这两件事都发生。样式表在这两种情况下都应该改变——如果设备宽度改变或者浏览器窗口被调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:07:36.213

代替`min`/ `max-device-width`，使用`min`/ `max-width`。

```
<link rel="stylesheet" type="text/css" media = "screen and (min-width: 500px) and (max-width: 1500px)" href="style.css" />
<link rel="stylesheet" type="text/css" media="screen and (max-width: 500px)" href="mobile.css" /> 
```

现在样式表取决于视口的宽度，而不是设备的宽度。据推测，移动设备上视口的宽度与设备宽度相同，因此这会一石二鸟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:07:39.567

如果您想将所有 CSS 代码放在一个文件中：

```
@media (min-width: 501px)  {
  //put your desktop styles here
}

@media (max-width: 500px) {
  //put your phone design here
} 
```

# ios - iOS：持续的后台位置更新

> ID：13779162
> 
> 赞同：0
> 
> 时间：2012-12-08T16:02:16.833
> 
> 标签：ios

我需要开发一个需要在后台运行准确位置更新的应用程序。

我可以从 iOS App Programming Guide 中看到这一段：

> 为用户提供持续位置更新（即使在后台）的应用程序可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）来启用后台位置服务。在 UIBackgroundModes 键中包含此值不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据要传递时唤醒应用程序。因此，此键有效地让应用程序在后台运行，以便在位置更新发生时处理它们

但是，我不太明白后台发生了什么。应用程序是否保持与前台位置服务中确定的相同精度测量？如果是这样，它会在后台继续运行多长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:21:56.610

它确实一直在后台运行，直到由于缺乏资源而被 iOS 暂停。只要是在后台。一个简单的例子是您 NSLog 位置，然后稍后将 iPhone 连接到您的 XCode 并查看控制台。虽然不确定您可以执行多长时间的操作，但我很确定您可以进行一些基本的核心数据插入。

看看这个很酷的教程[http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)

这为您提供了一个可以玩的项目。

# iphone - 在 iOS 开发和调用文件备份中使用 LSO（本地共享对象）

> ID：13779163
> 
> 赞同：1
> 
> 时间：2012-12-08T16:02:22.093
> 
> 标签：iphone, ios, object, local, shared

我正在使用 Flash 为 iOS 开发一个应用程序，并且我使用以下代码创建了一个 LSO：

```
var so:SharedObject = SharedObject.getLocal("name");
so.data.user = enternamehere.text;
var result:String = so.flush(); 
```

我正在使用输入文本字段，以便用户可以输入他们的姓名。实例名称是“enternamehere”。

我希望能够调用从输入文本中存储的信息以出现在文件中的不同场景中。

因此，用户在场景 3 中输入他们的姓名，它会出现在场景 4 中，并且名称存储在本地。

有什么办法吗？

谢谢

# php - 找不到加载模型销售/订单 OpenCart

> ID：13779165
> 
> 赞同：0
> 
> 时间：2012-12-08T16:02:33.700
> 
> 标签：php, opencart

尝试访问 mysite.com/admin 时突然开始收到以下错误

互联网上没有解决方案，所以我恳请您帮助解决这个问题

> ```
> Notice: Error: Could not load model sale/order! in /home/hirdavatdeposu.com/httpdocs/system/engine/loader.php on line 48 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:49:33.267

从新副本重新上传文件（不确定它是什么，所以只需上传两者）

```
/catalog/model/sale/order.php
/admin/model/sale/order.php 
```

# javascript - 在幻灯片中的图像上添加渐变

> ID：13779168
> 
> 赞同：4
> 
> 时间：2012-12-08T16:02:58.847
> 
> 标签：javascript, jquery, html, css, slider

我正在尝试在幻灯片中的图像上添加渐变渐变，以便在查看某张图片时（我的幻灯片显示 3 张图片，一个中间，然后是第一张和上一张图片的一小部分），边上会有这个渐变，所以左边的前一张照片的左边会淡出，反之亦然。如果你得到我？类似于这里评论的内容：[如何在 CSS 中将渐变叠加应用于图像？](https://stackoverflow.com/questions/11991624/how-do-you-apply-a-fading-overlay-to-an-image-in-css)我有 2 `.png's`，一个向左消失，一个向右消失。我在哪里应用这些`HTML`& `.css`？你会在底部看到它们`.css`，但是它们没有正确应用，并且在 html 中没有相应的 div（需要？）。当您将鼠标悬停在下一张和上一张图像上时，它们也应该变亮一点（失去一些淡入淡出效果）。示例： http: [//www.deadmau5.com](http://www.deadmau5.com)

**HTML**

```
<div class="hero">
    <div class="hero-carousel">

        <article>
          <img src="images/deadmau5/slide1.jpg" />
        </article>

        <article>
          <img src="images/deadmau5/slide2.jpg" />
        </article>

        <article>
          <img src="images/deadmau5/slide3.jpg" />
        </article>

        <article>
          <img src="images/deadmau5/slide4.jpg" />
        </article>

    </div>
</div> 
```

**javascript**

```
<script>
    $(document).ready(function(){
        $('.hero-carousel').heroCarousel({
            easing: 'easeOutExpo',
            css3pieFix: true
        });
    });
</script> 
```

**CSS**

```
.hero {
    width: 1366px;
    height: 340px; position:absolute;top:270px;
    overflow: hidden;
    margin-bottom: 48px;
    margin: 0 auto;
    border-top:9px solid rgba(51, 51, 51, .15);
    border-bottom: 9px solid rgba(51, 51, 51, .15);
    padding: 0 0 12px 0;
}

.hero-carousel article {
    width: 970px;
    margin: 0 auto;
    height: 470px;
    display: block;
    float: left;
    position: relative;
}

.hero-carousel-container article {
    float: left;
}

.hero-carousel article img{
    border-style:solid;border-width:6px;color:#000; position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

.hero-carousel article .contents {
    position: relative;
    z-index: 2;
    top: 72px;
    left: 48px;
    list-style: none;
    color: #000;
    width: 556px;
    padding: 20px;

    background: rgba(255,255,255,0.8);
    -pie-background: rgba(255,255,255,0.8);

    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    border-radius: 20px;

    behavior: url(/assets/PIE.htc);
}

.hero-carousel-nav {
    width: 980px;
    position: absolute;
    bottom: 0;
    left: 50%;
    margin-left: -490px;
    z-index: 2;
}

.hero-carousel-nav li {
   position: absolute;
   bottom: 48px;
   right: 48px;
   list-style: none;
}

.hero-carousel-nav li.prev {
    left: -50px;
    right: auto;
    bottom: 100px;
}
.hero-carousel-nav li.next {
    right: -30px;
    left: auto;
    bottom: 100px;
}

.hero-carousel-nav li a {     
    background: none repeat scroll 0 0 #D21034; 
    color: #FFFFFF;
    display: block;
    float: left;
}

.hero-carousel-nav li.next a { 
    background: url('../images/deadmau5/large-arrow-right.png'),
                -5px -7px no-repeat;
    display: inline-block;
    width: 105px;        /*width of your img*/
    height: 105px;      /*height of your img*/
    font-size: 0px; 
    right: -15px;  /*this is better than 1px*/
    bottom: 100px;
    overflow:hidden;
    outline:none;
}

.hero-carousel-nav li.prev a { 
    background: url('../images/deadmau5/large-arrow-left.png'),
                -7px -7px no-repeat;
    display: inline-block;
    width: 105px;        /*width of your img*/
    height: 105px;      /*height of your img*/
    font-size: 0px;    /*this is better than 1px*/
    left: -50px;
    bottom: 100px;
    overflow:hidden;
    outline:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:29:32.770

有几种方法可以解决这个问题，但这是一个简单的示例，说明了该站点如何布置所有内容。

**CSS**

```
#container {
    position: relative;
    width: 504px;
    margin: 0 auto;
}

#slide-container {
    width: auto;
}

.article {
    display: inline-block;
}

.article img {
    width: 165px;
    height: auto;    
}

#overlay-left {
    position: absolute;
    width: 165px;
    height: 60px;
    top: 0;
    left: 0;
    background: url('http://www.deadmau5.com/wp-content/themes/deadmau5/images/slider-fade-left.png') no-repeat top left;
    z-index: 2;
}

#overlay-right {
    position: absolute;
    width: 165px;
    height: 60px;
    top: 0;
    right: 0;
    background: url('http://www.deadmau5.com/wp-content/themes/deadmau5/images/slider-fade-right.png') no-repeat top right;
    z-index: 2;
}

#overlay-left:hover, #overlay-right:hover {
    opacity: 0.8;
}
​ 
```

**HTML**

```
<div id="container">
    <div id="slide-container">
        <div class="article">
            <a href="">
                <img src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" />
            </a>
        </div>
        <div class="article">
            <a href="">
                <img src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" />
            </a>
        </div>
        <div class="article">
            <a href="">
                <img src="http://www.deadmau5.com/wp-content/uploads/2012/06/slide1.jpg" />
            </a>
        </div>
    </div>
    <div id="overlay-left"></div>
    <div id="overlay-right"></div>
</div> 
```

如果你想玩它，[这里是一个 JSFiddle。](http://jsfiddle.net/VC956/3/)

# c# - 使用 C# 构造 SOAP 信封 XML

> ID：13779171
> 
> 赞同：3
> 
> 时间：2012-12-08T16:03:38.077
> 
> 标签：c#, xml, soap

我到处搜索，我不知道在 C# 中构造这样的 XML 的最佳方法是什么。

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <SOAP-ENV:Envelope
SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
        <SOAP-ENV:Body>
            <ns5572:calculate_something xmlns:ns5572="http://tempuri.org">
                <Input_data>
                <code_user xsi:type="xsd:string">test_user</code_user>
                <password_broker xsi:type="xsd:string">test_password</password>
                <subuser_id xsi:type="xsd:string"></subuser_id>
                </Input_data>
            </ns5572:calculate_something>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

我的问题是这种结构是否有任何特殊的专用类。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:18:04.850

这不是一些随机的 XML。它看起来像一个 SOAP 请求。看看[这个](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapmessage.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T16:26:36.887

这是用于调用一些 SOAP Web 服务的 XML，要通过 C# 调用它，您可以将其作为服务引用添加到您的 C# 项目。

您需要指向服务的 WSDL（Web 服务定义语言文件）的链接，然后您可以将服务引用添加到您的项目中，并通过以下方式轻松调用其任何功能：

1-定义一个客户端来使用它来调用服务：

```
MyTestServiceSoapClient client = new MyTestServiceSoapClient(); 
```

2-以这种方式调用此客户端的某些方法：

```
client.calculate_something("test_user", "test_password", ""); 
```

或这个：

```
client.calculate_something(new Input_data() 
{ code_user  = "test_user", password_broker  = "test_password", subuser_id  = ""}
); 
```

[本文](http://msdn.microsoft.com/en-us/library/bb628652.aspx)将帮助您将服务引用添加到您的 C# 项目中。

要拦截请求和响应的 XML，请实现这两个类：

```
public class InspectorBehavior : IEndpointBehavior
{
    public string LastRequestXML { 
        get
        {
            return myMessageInspector.LastRequestXML;
        }
    }

    public string LastResponseXML { 
        get
        {
            return myMessageInspector.LastResponseXML;
        }
    }

    private MyMessageInspector myMessageInspector = new MyMessageInspector();
    public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {

    }

    public void Validate(ServiceEndpoint endpoint)
    {

    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
        clientRuntime.MessageInspectors.Add(myMessageInspector );
    }
}

public class MyMessageInspector : IClientMessageInspector
{
    public string LastRequestXML { get; private set; }
    public string LastResponseXML { get; private set; }
    public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {
        LastResponseXML = reply.ToString();
    }

    public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
    {
        LastRequestXML = request.ToString();
        return request;
    }
} 
```

然后，将调用代码更改为：

```
MyTestServiceSoapClient client = new MyTestServiceSoapClient();
var requestInterceptor = new InspectorBehavior();
client.Endpoint.Behaviors.Add(requestInterceptor );
client.calculate_something("test_user", "test_password", "");
string requestXML = requestInterceptor.LastRequestXML;
string responseXML = requestInterceptor.LastResponseXML;
// Now the xml you need is in "requestXML" variable 
```

# java - HashTable Collision 它在哪里使用 LinkedList 来存储具有相同键的多个值

> ID：13779172
> 
> 赞同：0
> 
> 时间：2012-12-08T16:03:51.833
> 
> 标签：java, hashtable

我读了很多次，在哈希表中，当发生冲突时，一个键具有多个值，它存储在链表中，然后它会进行 equals 调用以检查哪些键映射到所需的值，但我看到哈希表的代码它没有任何链表代码一个 put 方法或 get 方法。它使用 Entry[] 数组，我不明白这将如何用作链表。

```
for (Entry<K,V> e = tab[index] ; e != null ; e = e.next) {
        if ((e.hash == hash) && e.key.equals(key)) {
        V old = e.value;
        e.value = value;
        return old;
        }
    } 
```

请指导并消除我的疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:43:07.557

我认为 JVM 之间的实现可能不同，但据我了解，使用了链表（但不是必需的 java.util.LinkedList）。这就是我使用的 JVM 中的 HashTable 中“put”的实现方式：

```
public Object put(Object key, Object value) {
    // Make sure the value is not null
    if (value == null) throw new NullPointerException();

    // Makes sure the key is not already in the hashtable.
    HashtableEntry e;
    HashtableEntry tab[] = table;
    int hash = key.hashCode();
    int index = (hash & 0x7FFFFFFF) % tab.length;

    for (e = tab[index] ; e != null ; e = e.next) {
        if ((e.hash == hash) && e.key.equals(key)) {
        Object old = e.value;
        e.value = value;
        return old;
        }
    } 
```

此版本与您发布的版本之间存在一些差异，但我认为它们背后的逻辑是相同的。HashtableEntry 如下所示：

```
class HashtableEntry {
    int hash;
    Object key;
    Object value;
    HashtableEntry next;
(...) 
```

“HashtableEntry next”引用确实使 HashtableEntry 成为链表（链表是一种结构，其中每个元素都引用另一个相同类型的元素，除非它是列表中的最后一个元素）。我认为您正在寻找的是 java.util.LinkedList 但 HastTable 以自己的方式实现链表结构。

# java - 检查字符串中的字符

> ID：13779179
> 
> 赞同：0
> 
> 时间：2012-12-08T16:04:56.010
> 
> 标签：java, string, character

我有这个代码

```
if(!(lotNo.charAt(0) >= "0" && (lotNo.charAt(0) <= "7"))) {
    // if the first character is not within these boundaries
    return false;
}
return true; 
```

这种方法给我留下一个错误说`bad operator type`？虽然它应该检查字符串中的第一个字符是否在 0 到 7 之间。我在正确的行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:06:52.717

`Char`必须在`'0'`不内`"0"`。第二个是一个`String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:06:40.863

您正在与字符串而不是字符进行比较。尝试：

```
if (!(lotNo.charAt(0) >= '0' && (lotNo.charAt(0) <= '7'))) { // if the first character is not within these boundaries
    return false;
}
return true; 
```

`"0"`<-- 带一个字符的字符串，`'0'`
`'0'`<-- 字符，字符`'0'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:11:49.373

charAt(int index) 方法返回值类型为 char 。但是你正在将它与一个字符串进行比较，这就是你得到的原因`bad operator type`

# facebook - 如何告诉 Facebook 哪个 div 是“内容”？（用于链接摘要）

> ID：13779181
> 
> 赞同：0
> 
> 时间：2012-12-07T23:56:15.780
> 
> 标签：facebook, blogger

我在 blogger.com 上托管了一个小博客

我不明白为什么当人们喜欢或分享 Facebook 上的博客文章时，真正的内容*永远不会*被提取为摘要。

例如，对于[这篇文章](http://www.forexperimenti.it/2012/11/due-settimane-di-breakon.html)，摘要是我放在侧边栏上的小“关于我”，而在[另](http://www.forexperiments.com/2012/11/two-weeks-with-breakon.html)一篇文章中，摘要是第一条评论。

很奇怪，我能做什么？有一种方法，例如一个类，来指示主要内容 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:36:40.373

在 Blogger 上实现 opengraph 协议。它使用其标记语言标记帖子标题、描述、图像、作者等。[请参阅有关在 Blogger 上实施 ogp 的](http://www.bloggerhow.com/2012/07/implement-open-graph-in-blogger-blogs.html "在 Blogger 上实现 Opengraph 协议")本教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:30:17.230

您需要在您的博客中实现 Facebook 的 Open Graph 标签。

# c++ - C++ 对象集合

> ID：13779182
> 
> 赞同：3
> 
> 时间：2012-12-08T16:05:14.913
> 
> 标签：c++, object, collections

我正在自学 C++（使用 schaum 的 C++ 编程书），我在书中找不到任何解释如何创建对象集合的内容？例如，假设您有 a`class of books`和 a `class of stores`，并且您想在 store 类中创建书籍对象的集合，这将如何实现？我对数组感到困惑，你必须给出一个设定的大小，不是吗？那么，如果您还不知道所需的尺寸怎么办？我假设数组不是最好的使用......如果书/商店类示例是一个坏例子，也很抱歉。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:09:39.320

你似乎很快就赶上了。不，数组通常不是最好的使用方法。

标准库有许多集合类，如vector、deque、list、set、map等。从事物的声音来看，您可能需要vector或multimap。向量与数组非常相似，不同之处在于它在插入对象时会根据需要调整大小。地图使您能够根据字段查找内容，例如根据书名或作者查找书籍。

# windows - DirectX 11 SDK - 我在哪里可以下载它？

> ID：13779183
> 
> 赞同：12
> 
> 时间：2012-12-08T16:05:16.340
> 
> 标签：windows, visual-studio-2010, directx

我正在尝试在 Visual C++ 2010 express 上设置 DirectX。我没有安装 SDK，也不知道在哪里下载。我正在运行 Windows 7

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T15:26:13.750

DirectX SDK 现在已过时，所有 DX 内容现在都已合并到 Windows SDK 中，但如果您有 Visual Studio 2012 及更高版本，则它已经包含在内。 [http://msdn.microsoft.com/en-us/windows/hardware/hh852363](http://msdn.microsoft.com/en-us/windows/hardware/hh852363)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-08T16:29:44.070

我也在搜索 DirectX SDK 并发现：[DirectX SDK 在哪里？](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx)

# ruby - 在 Ruby 中 - 什么是编码？

> ID：13779185
> 
> 赞同：1
> 
> 时间：2012-12-08T16:05:30.623
> 
> 标签：ruby, character-encoding

我试图了解 Ruby 中的编码是什么——有很多关于编码的文章，例如[this one](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)和[this one](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)。然而，他们都没有解释新手可能遇到的基本问题——首先什么*是*编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:13:24.330

这里的字符编码的意思是描述计算机如何用二进制表示字符的系统。

在 UTF-8 编码中，字符`ä`表示为`1100 0011 1010 0100`，或`0xC3 0xA4`以十六进制表示。

在 Windows-1252 编码中，相同的字符表示为`1110 0100`或`0xE4`十六进制。

因此，假设您告诉计算机读取 Windows-1252 中的文件，但该文件实际上被编码为 UTF-8。该文件仅包含一个字符，例如`ä`. 由于该文件采用 UTF-8 格式，因此该文件实际上包含 bits `0xC3 0xA4`。现在因为您告诉（隐式或显式）计算机读取 Windows-1252 中的文件，所以您实际上会`Ã¤`看到`ä`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:12:10.727

编码是将某些字节序列转换为文本的一种方法。[ASCII](https://en.wikipedia.org/wiki/ASCII)是每个字符有一个字节的一种。[UTF-8](https://en.wikipedia.org/wiki/UTF-8)是另一种常见的，它使用可变数量的字节来编码更大的字符集。当然，[维基百科上的字符编码](https://en.wikipedia.org/wiki/Character_encoding)可能是一本有用的读物​​。

# c# - 如何在我的 BackgroundWorker 执行某些操作后正确隐藏按钮并显示它？

> ID：13779186
> 
> 赞同：2
> 
> 时间：2012-12-08T16:05:32.077
> 
> 标签：c#, winforms, backgroundworker

这是我迄今为止尝试过的：

1.  放入`button.Visible = false`我的表单的初始化程序并放入`button.Visible = true`我的 backgroundWorkers 的 DoWork 事件的末尾。
    这会导致程序在 BackgroundWorker 完成工作后冻结。
    我不明白为什么。

2.  放入`button.Visible = false`我的表单的初始化程序并`button.Visible = true`在我`backgroundWorker1.RunWorkerAsync()`调用之后放入。
    这不能正常工作，因为它在 BackgroundWorker 开始工作后立即显示按钮。
    我明白为什么会这样。

3.  将`button.Visible = false`and`doneEvent = new AutoResetEvent(false)`放入表单的初始化程序中，然后在我的调用之后放入`doneEvent.WaitOne()`and 。 这样，*除了*我在表单中的 ProgressBar 停止正常工作（在所有工作完成之前它不会显示进度）之外，一切正常。 我可能对为什么会发生这种情况有一个直观的想法，但我并不真正理解它，也不知道如何解决它。 `button.Visible = true``backgroundWorker1.RunWorkerAsync()`

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:14:46.530

当您的代码在 DoWork 事件中运行时，您不应在按钮上调用任何方法/属性，因为此代码与创建按钮的线程位于不同的线程中。[BackgroundWorkwer](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)
使用一组定义明确 的事件来处理您需要更新界面的情况，并且您应该将这些事件用于该任务。

例如，您可以将该属性设置`WorkerReportsProgress`为 true，订阅该事件`ProgressChanged`并`backgroundWorker1.ReportProgress(...);`在 DoWork 事件中调用以在您的后台工作进行时更新您的界面。

在您的情况下，您可能需要订阅该事件`RunWorkerCompleted`并在该事件中显示您的按钮

```
private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (!e.Cancelled && e.Error == null)
    {
        button.Visible = true; 
    }
} 
```

在 BackgroundWorker 的 MSDN 页面的链接中，有一个示例演示了如何在 DoWork 事件运行复杂任务时更新进度条。*

# ruby - Ruby 方法如何处理参数对象？

> ID：13779192
> 
> 赞同：0
> 
> 时间：2012-12-08T16:06:15.977
> 
> 标签：ruby

假设您在 java 中有一个带有此构造函数的 Date 类：

```
public Date(int year, int month, int day) 
```

在这个类中，你有一个方法返回`Date`必须调整的天数，使其等于给定的`Date`：

```
public int daysTo(Date other) 
```

如果你要在 Ruby 中重新创建这个类，你会如何处理这个`daysTo`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:37:50.767

```
class MyDate
  attr_reader :days

  def initialize(days_since_epoch)
    @days = days_since_epoch
  end

  def days_to(other)
    other.days - days
  end
end

date1 = MyDate.new 100
date2 = MyDate.new 150
date1.days_to(date2) #=> 50 
```

# css - 如何制作具有自动调整宽度的 twitter bootstrap 导航栏？

> ID：13779196
> 
> 赞同：2
> 
> 时间：2012-12-08T16:06:35.840
> 
> 标签：css, twitter-bootstrap

有没有办法让 twitter 引导导航栏的宽度与显示在上面的菜单项一样宽？我的导航栏默认只有 4 个项目，用户登录时只有 5 个，但是导航栏太宽了。我尝试过更改跨度，但这会打乱对齐方式，并且导航栏不再正确集中。有人可以帮忙吗？谢谢！

或者，如果有人可以帮助我将导航栏设置为固定宽度，但不会错位并保持中心化，我也会很感激。

这是我的导航栏代码：

```
 <div id="top" class="container">
        <div class="navbar">
            <div class="navbar-inner">
                <ul class="nav">
                    <li><a href="index.php">Home</a></li>
                    <li><a href="books.php">Used books exchange</a></li>
                    <li><a href="submit.php">Submit a listing</a></li>
                    <li><a href="account.php">My account</a></li>
                    <?php if (!empty($_SESSION["id"]))
            {
            print('<li><a href="logout.php">Log out</a></li>');
            } ?>
                </ul>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T19:28:41.610

如果我对您的理解正确，我认为这就是您要寻找的东西。：

```
.container {
    text-align: center;
}
.navbar {
    display: inline-block;
    margin-left: auto;
    margin-right: auto;
} 
```

它使导航栏仅与其内容一样宽，居中，并且在您调整其大小时做得相当好。这是它的一个 Jsfiddle：http: [//jsfiddle.net/hajpoj/9E7QX/](http://jsfiddle.net/hajpoj/9E7QX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:21:50.467

你可以给它一个margin-right；

```
.navbar {
  margin-right:200px; //whatever px you need
} 
```

# c++ - 用 C++ 创建一个程序来计算给定宽度和高度值的纵横比

> ID：13779199
> 
> 赞同：1
> 
> 时间：2012-12-08T16:06:47.770
> 
> 标签：c++

创建一个程序，计算计算机屏幕的纵横比，给定宽度
和高度（以像素为单位），使用以下语句： int width = 1280; 整数高度 = 1024；双面=宽度/高度；当你输出结果时，你会得到什么答案？它是否令人满意——如果不是，你如何修改代码而不添加更多变量？

```
#include<iostream>

using namespace std;

int main(){

int width = 1280;
int height = 1024;
double aspect = width / height;

cout << "aspect ration" << aspect << endl;

return 0;

} 
```

我试过这段代码，但它给了我价值“1”..我无法得到这个问题..他所说的满意是什么意思？以及如何在不添加任何变量的情况下修改代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T16:14:24.427

您正在进行整数除法，即如果宽度为 3，高度为 2，它将存储 1 而不是 1.5 in `aspect`。其中一个值应该是 double 以使其成为双重除法。以下应该工作：

```
#include<iostream>

using namespace std;

int main(){

    int width = 1280;
    int height = 1024;
    double aspect = (double)width / height;

    cout << "aspect ration" << aspect << endl;

    return 0;

} 
```

# iphone - UIScrollView 不可滚动

> ID：13779201
> 
> 赞同：0
> 
> 时间：2012-12-08T16:06:52.860
> 
> 标签：iphone, objective-c, ios, uiscrollview

我正在尝试使 UIScrollView 可滚动。据我所知，内容大小和框架大小之间的差异使视图可滚动以到达矩形的其他部分。所以我放置了不同的大小。
这是我在视图控制器中所做的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    scrollView= [[UIScrollView alloc]initWithFrame: CGRectMake(0, 0, 200, 200)];
    scrollView.contentSize= CGSizeMake(1000, 1000);
    scrollView.scrollEnabled=YES;
    scrollView.pagingEnabled=YES;
    scrollView.backgroundColor=[UIColor yellowColor];
    scrollView.alwaysBounceHorizontal=YES;
    scrollView.alwaysBounceVertical=YES;
    [self.view addSubview: scrollView];
} 
```

但是视图不可滚动，滚动条甚至没有视图。
有一些类似的问题，但没有人让我得到解决方案。
我的印象是，我在 viewDidLoad 方法中编写的所有内容都被忽略了，除了设置颜色。当然，该方法会被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:36:49.553

确保包括（在 中执行此操作`viewWillAppear`，因为在 中声明此有一些奇怪的问题`viewDidLoad`）

```
self.scrollView.delegate=self; 
```

并声明您的课程`UIScrollViewDelegate`在您的标题中某处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:13:32.680

在我看来，好像您正在尝试创建没有任何子视图的滚动视图？我猜它并不想拥有任意的 contentSize ，如果它真的没有任何东西可以显示的话。你到底想要达到什么目的？

[UIScrollView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:13:43.347

我发现视图在滚动，只是以与我对 Cocoa 的习惯不同的方式，所以我没有注意到它。

# jquery - 视差中的背景块在全尺寸时不起作用

> ID：13779204
> 
> 赞同：3
> 
> 时间：2012-12-08T16:07:16.850
> 
> 标签：jquery, html, css

我的视差有问题。当我尝试一些视差背景教程时，它在高分辨率下无法正常工作。所以我用`background-size: cover;`

然后背景占据了我屏幕的整个空间，但是当我以某种分辨率（如 4:3 分辨率）调整窗口大小时，每个背景之间都有巨大的空间。我不知道为什么。

我使用[本教程](http://lory-huz.fr/parralax/)来向您展示问题。尝试调整窗口大小，您将看到这些空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:17:26.800

解决方案是不要使用**`background-size: cover;`**您添加到**`CSS`**.

[**jsFiddle 演示**](http://jsfiddle.net/nCggg/embedded/result/)

如果需要，请解释为什么它在高分辨率下无法正常工作。

# linux - 在 Linux 中阻止 UART 串 行端口上的 I/O 写操作

> ID：13779205
> 
> 赞同：3
> 
> 时间：2012-12-08T16:07:33.843
> 
> 标签：linux, io, serial-port, uart

我正在尝试通过 RS-485 半双工串行线路与设备通信。当我向设备发送命令时，它会处理命令并在处理后立即回复。问题是我必须在发送命令后立即将我的 RS-485 芯片转为接收模式才能接收设备的回复。但是因为我的 UART 写功能是一个非阻塞 IO 操作，所以我无法知道什么时候将我的 RS-485 芯片变成接收模式。

如何对 UART 执行阻塞写入操作，除非所有字节都通过串行线路实际发送，否则该函数不会退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:13:00.850

你的硬件平台是什么？我之前通过配置硬件自动设置 RTS 信号解决了这个问题（atmel AT91SAM9260）。这是你最好的选择，除非你修改内核中的串行驱动程序（有时甚至不这样做你可以做到）

# php - 检查一个值是否只包含数字、正则表达式或不包含？

> ID：13779209
> 
> 赞同：6
> 
> 时间：2012-12-08T16:08:00.613
> 
> 标签：php, regex, validation

我有一个在我的代码中使用的函数。该函数期望传递的参数是一个正整数。由于 PHP 是松散类型的，因此数据类型并不重要。但重要的*是*它只包含数字。目前，我正在使用正则表达式在继续之前检查值。

**这是我的代码的*简化*版本：**

```
function do_something($company_id) {
    if (preg_match('/\D/', $company_id)) exit('Invalid parameter');
    //do several things that expect $company_id to be an integer
} 
```

我来自 Perl 背景，经常使用正则表达式。但是，我知道它们的用法是有争议的。

我考虑过使用`intval()`or`(int)`并**强制** `$company_id`为整数。但是，我最终可能会得到一些意想不到的值，我希望它*快速失败*。

**另一种选择是：**

```
if (!ctype_digit((string) $company_id)) exit('Invalid parameter'); 
```

这种情况是正则表达式的有效使用吗？一种方式优于另一种方式吗？如果是这样，为什么？有没有我没有考虑过的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T20:15:45.273

## 目标

最初的问题是关于验证未知数据类型的值并丢弃所有值，除了那些只包含**数字**的值。似乎只有两种方法可以达到这个预期的结果。

如果目标是*快速失败*，则需要检查无效值然后失败，而不是检查有效值并将所有代码包装在一个`if`块中。

## 问题中的选项 1

```
if (preg_match('/\D/', $company_id)) exit('Invalid parameter'); 
```

`regex`如果匹配非数字，则使用失败。缺点：正则表达式引擎有开销

## 问题中的选项 2

```
if (!ctype_digit((string) $company_id)) exit('Invalid parameter'); 
```

如果为 FALSE，则使用`ctype_digit`失败。缺点：必须将值转换为字符串，这是一个（小）额外步骤

您必须将值转换为字符串，因为`ctype_digit`需要一个字符串，而 PHP 不会为您将参数转换为字符串。如果你将一个整数传递给`ctype_digit`，你会得到意想不到的结果。

这是记录在案的行为。例如：

```
ctype_digit('42'); // true
ctype_digit(42); // false (ASCII 42 is the * character) 
```

## 选项 1 和 2 之间的区别

由于正则表达式引擎的开销，选项二可能是最好的选择。但是，担心这两个选项之间的差异可能属于过早优化类别。

**注意：**上述两个选项之间也存在功能差异。第一个选项将`NULL`空字符串视为有效值，第二个选项不考虑（从 PHP 5.1.0 开始）。这可能会使一种方法比另一种方法更受欢迎。要使`regex`选项功能与`ctype_digit`版本相同，请改用它。

```
if (!preg_match('/^\d+$/', $company_id)) exit('Invalid parameter'); 
```

**注意：**上面的'start of string'`^`和'end of string'`$`锚点`regex`非常重要。否则，`abc123def`将被视为有效。

## 其他选项

这里和其他问题中还提出了其他方法，这些方法**无法实现既定目标**，但我认为重要的是要提及它们并解释它们为什么不起作用，因为它可能对其他人有帮助。

*   `is_numeric`允许指数部分、浮点数和十六进制值

*   `is_int``'1'`如果被认为是有效的，则检查对验证没有用的数据类型而不是值。表单输入始终是一个字符串。如果您不确定值的来源，则无法确定数据类型。

*   `filter_var`with`FILTER_VALIDATE_INT`允许负整数和值，例如`1.0`. 无论数据类型如何，这似乎都是实际验证整数的最佳函数。*但是如果你只*想要数字就行不通了。**注意：**重要的是要检查`FALSE` **身份**，而不仅仅是真/假是否`0`被视为有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:46:49.610

`filter_var`+呢`FILTER_VALIDATE_INT`？

```
if (FALSE === ($id = filter_var($_GET['id'], FILTER_VALIDATE_INT))) {
    // $_GET['id'] does not look like a valid int
} else {
    // $id is a int because $_GET['id'] looks like a valid int
} 
```

此外，它还有 min_range/max_range 选项。

这个函数的基本思想或多或少等同于：

```
function validate_int($string) {
    if (!ctype_digit($string)) {
        return FALSE;
    } else {
        return intval($string);
    }
} 
```

此外，如果您期望一个整数，您可以使用`is_int`. 不幸的是，类型提示仅限于对象和数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:15:35.500

这两种方法都会将变量转换为字符串。`preg_match`不接受整数类型的主题，因此一旦传递给函数，它将被转换为字符串。`ctype_digit`在这种情况下绝对是最好的解决方案。

# c++ - 优化标志导致不正确的计算

> ID：13779212
> 
> 赞同：1
> 
> 时间：2012-12-08T16:08:30.950
> 
> 标签：c++, gcc, g++

我有一个奇怪的优化错误，所以我试图确定是哪个标志导致它。错误（不正确的计算）发生在`-O1`，但不是`-O0`。因此，我认为我可以使用所有`-f flags`这些`-O1 includes to narrow down the culprit`. 但是，当我尝试这样做（使用此列表[http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)）时，它又可以正常工作了！

任何人都可以解释这一点，或提供其他关于寻找什么的建议吗？我已经通过运行代码`valgrind`，它没有报告任何错误。

### 编辑

我发现计算是正确的`-O0`，不正确的`-O1`，但又是正确的`-O1 -ffloat-store`。任何关于寻找什么的想法都会导致它没有工作`-ffloat-store`？

### 编辑2

如果我使用正常的发布标志进行编译，则会出现计算错误。但是，如果我添加任何一个：

```
-ffloat-store 
```

或者

```
-mpc64 
```

到标志列表中，错误就消失了。

任何人都可以提出一种方法来追踪该标志产生影响的行，以便我可以更改它而不是要求每个使用代码的人都使用附加标志进行编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:35:46.097

从我的 GCC/C++ 时代开始，我记得的像这样的优化错误是，使用`-O0`未指定返回值的方法将返回该方法中该类型的最后一个值（可能是您想要返回的值对吗？）而使用对它的优化返回类型的默认值，而不是方法中类型的最后一个值（这可能只适用于值类型，我不记得了）。这意味着您将在调试标志打开的情况下开发很长时间，并且一切看起来都很好，然后在您优化时它将停止工作。

对我来说，不指定返回值是一个编译错误，但那是当时的 C++。

对此的解决方案是打开最强的警告集，然后将所有警告视为错误：这将突出显示此类内容。（如果您还没有这样做，那么您将承受巨大的痛苦！）

如果您已经有所有错误/警告，那么唯一的另一个选择是优化带有副作用的方法调用。这将更难追踪。

# php - 拖放后将值从一个 div 拖放到另一个 div 和 mysql 查询

> ID：13779218
> 
> 赞同：0
> 
> 时间：2012-12-08T16:09:20.723
> 
> 标签：php, mysql, ajax, drag-and-drop

这将是我第一次使用拖放功能。我必须为一所大学申请时间表，这需要从左侧的教师职责列表中拖动包含所有必需值并放入右侧的时间表槽中，然后弹出一个对话框询问房间号和然后在 php 和 mysql 级别执行各种检查，最后插入数据库。另外，不用说这必须是一个ajax解决方案。

我真的希望这是一个纯 javascript 解决方案，而不是像 jquery、原型等一些框架，因为我要与时间赛跑，而且我以前从未使用过任何框架，所以我现在不能抽出时间来学习其中的一个。但是，如果你们不能用纯 javascript 帮助我，我将不得不使用上述框架之一。

请尽快提供帮助。另外，请询问您是否需要更多说明我想要实现的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:48:54.503

第一个选项是：在核心 javascript 中，您可以使用 HTML5 拖放功能，但它在 safari 浏览器中特别有问题。

第二个选项是：http: [//jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

把下面的代码我会告诉你如何调用ajax。我仍然在这里为您提供帮助，直到您获得预期的输出

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Sortable - Connect lists</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

    <style>
    #left, #right { border:1px solid #000000;min-height:100px;min-width:100px;list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; }
    #left li, #right li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
    </style>
    <script>
    $(function() {
        $( "#left, #right" ).sortable({
            connectWith: ".connectedSortable",
            receive: function(event,ui){
                 console.log("old ui id = "+ui.sender.attr("id")+" new ul id = "+this.id+" li id "+$(ui.item).attr("id"));                   
                 if(ui.sender.attr("id") != this.id)
                 {  
                    //Your ajax call will come here

                            $.ajax({
                    type: "POST",
                    url: "logic.php", 
         // Write you //php mysql logic here you'll get all your data in logic.php file 
                  data: { left: ui.sender.attr("id"), right: this.id , responsibility:$(ui.item).attr("id") }
                }).done(function( msg ) {
                              alert( "Data Saved: " + msg );
                            });
                 }
             }

        }).disableSelection();
    });
    </script>
</head>
<body>

<ul id="left" class="connectedSortable">
    <li id="1" class="ui-state-default">Item 1</li>
    <li id="2"  class="ui-state-default">Item 2</li>
    <li id="3"  class="ui-state-default">Item 3</li>
    <li id="4"  class="ui-state-default">Item 4</li>
    <li id="5"  class="ui-state-default">Item 5</li>
</ul>

<ul id="right" class="connectedSortable">
    <li id="6" class="ui-state-highlight">Item 1</li>
    <li id="7"  class="ui-state-highlight">Item 2</li>
    <li id="8"  class="ui-state-highlight">Item 3</li>
    <li id="9"  class="ui-state-highlight">Item 4</li>
    <li id="10"  class="ui-state-highlight">Item 5</li>
</ul>

</body>
</html> 
```

# php - 首页加载缓慢 PHPBB 3.0.11

> ID：13779219
> 
> 赞同：0
> 
> 时间：2012-12-08T16:09:35.087
> 
> 标签：php, sql, performance, phpbb

我有一个运行 PHPBB 3.0.11（最新版本）的站点，但在第一页访问时，缓存为空，加载需要 4-5 秒。之后它会在几秒钟内加载！有任何想法吗？

论坛：[http ://takeahike.org.uk/forum](http://takeahike.org.uk/forum)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T02:07:25.107

我有一些关于如何使 phpbb 更快的信息，我的论坛加载速度是以前的两倍，所以我在这里发布这个并希望我的评论对你们中的一些读者有用.. 如果您的论坛加载更快，解决问题会更容易，从超过 30 秒的最大执行时间和更容易调试您的论坛中获得众所周知的白屏将更加困难.. 大多数情况下，这些错误来自**修改**确保所有 mods 和 phpBB 论坛脚本都是最新的..

首先，如果你的封禁列表中的项目很多或者成员数量很多，那么你的论坛就会崩溃并为你提供奇怪的错误和白屏，我相信这不是你希望看到的;)

如何解决和从哪里开始：

1.  确保在您的服务器上安装了最新稳定版本的 pecl memcache 并在您的 php.ini 中启用 使用 memcache.so 的正确路径并创建论坛备份
2.  打开 config.php 并编辑它，如下所示

    ```
    <?php
    // phpBB 3.0.x auto-generated configuration file
    // Do not change anything in this file!
    $dbms = 'mysqli'; // What kind of database do you use?
    $dbhost = 'localhost'; // Your host for most of us localhost will work just fine..
    $dbport = ''; // Only needed if a non-standard port is used...
    $dbname = 'YOUR-DATABASE-NAME';
    $dbuser = 'YOUR-USERNAME';
    $dbpasswd = 'YOUR-PASSWORD';
    $table_prefix = 'phpbb_';
    $acm_type = 'memcache'; // Standard is apc or file, change this to memcache but first you slould make sure it's installed and working corectly!!
    // Add the lines below and: DO NOT CHANGE ORDER!
    @define('PHPBB_ACM_MEMCACHE_HOST', 'localhost'); // Memcache server hostname
    @define('PHPBB_ACM_MEMCACHE_PORT', 11211); // Memcache server poort
    @define('PHPBB_ACM_MEMCACHE_COMPRESS', false); // Compress stored data true or false if used CPU usage will grow but bandwidth will be lower I use it on a 8core server..
    $load_extensions = 'memcache';

    @define('PHPBB_INSTALLED', true);
    // @define('DEBUG', true); // uncommend to debug, it will give you a lot of information -  do not remove if forum is working well
    // @define('DEBUG_EXTRA', true); // uncommend to debug, it will give you a lot of information - do not remove if forum is working well

    ?> 
    ```

3.  访问您的 phpbb 论坛并享受更高的速度

    **注 1：** $load_extensions = 'memcache'; 必须在**ACM_MEMCACHE**设置之后

    **注意 2：**我希望这对你们中的一些 phpBB 用户有用 - 在编辑 config.php 之前，请确保您**创建了**文件的备份并**确保 memcache 正在工作**并**在 php.ini 中启用**，使用 corect 路径memcache.so，找到正确的 memcache 路径并将 memcache.so的**完整路径**添加到**php.ini**文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:17:13.000

看起来延迟只是在一个文件中，即首页，而且只是第一次，所以这里没有缓存问题：

![http://dl.dropbox.com/u/19056348/StackOverflow/loadtimes.png](../Images/6dcbded6d53df0b9ac63fd7484685af3.png)

只是几个问题：

*   有没有什么时髦`.htaccess`的玩意儿？
*   您是否尝试过[`xdebug`](http://xdebug.org)分析应用程序的执行？
*   它是否会发生 - 使用相同的代码 - 只是在该服务器中，还是在 localhost 或其他主机中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:40:02.827

感谢各位大侠的帮助，我找到了问题所在。原来这是因为我有一个非常大的禁止 IP 列表，我猜 phpbb 在初始页面加载时加载这些并将它们存储在某个地方。

# javascript-events - 在卡布奇诺 Web 应用程序中锁定鼠标事件

> ID：13779222
> 
> 赞同：0
> 
> 时间：2012-12-08T16:09:54.387
> 
> 标签：javascript-events, cappuccino

在开发基于 cappuccino-framework 的 web 应用程序时，它只需要在 Chromium 浏览器环境中运行（〜今年春季发布的 chromium V.19），我遇到了以下问题：

我们希望应用程序在几秒钟内锁定或删除所有鼠标点击（同时应用程序执行一些后台计算）。

这个看似简单的任务似乎几乎是不可能的。我们在整个屏幕上实现了一个 Html 层，并尝试操纵它的 mouseup、mousedown 处理程序，例如：

> onmouseup="return false;"
> 
> onmousedown="返回假；"

但这没有显示任何结果。

还遍历实际卡布奇诺窗口视图的所有 CPControl 子视图并禁用它们

> [子视图 setEnabled:NO];

并没有真正帮助：

然后确实子视图被禁用（并且不能被点击，正是我们想要的）但是太晚了：尽管我们在启动后台任务之前禁用了它们，但禁用效果在后台任务完成后生效，因此不会防止用户在合理计算期间做出愚蠢的点击。

我也尝试实现类似的代码

> [CPRunLoop limitDateForMode:CPDefaultRunLoopMode];

在禁用 CPControls 之后和开始后台任务之前，但它也不起作用。

那么有没有人在 Javascript-/Html 或 Cappuccino 方面有想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:54:24.843

CPWindow 有一个方法： setIgnoresMouseEvents：只需在您的窗口上调用它。

# runtime - 为什么我的快速排序在 O(2^n) 处执行

> ID：13779223
> 
> 赞同：2
> 
> 时间：2012-12-08T16:09:57.527
> 
> 标签：runtime, analysis, quicksort

我必须通过每次将数组的大小增加 100 来对快速排序执行运行时分析。但是，当我使用 System.nanoTime 测量运行时间时，结果与我预期的不同（我的图表看起来更像 O(2^n)）。每当数组达到 800 左右时，时间就会增加。有人可以告诉我我的代码哪里出错了。

计数部分目前也有点无关紧要，因为我只想在每个数组大小处运行一次快速排序。

```
import java.util.Random;

public class Quickworking {

public static void main(String[] args) {
    Random rand = new Random();
    int count2;
    long total = 0;
    count2 = 1;
    int [] myArray = new int[1400];   

                //generates random array
    for (int i = 0; i < myArray.length; i++){
        myArray[i] = rand.nextInt(100) + 1;
        //System.out.print(myArray[i] + ", ");
    }

            //loop sort n amount of times
    for (int count = 0; count < count2; count++){

            //calls the sort method on myArray giving the arguments
        long start = System.nanoTime();
        sort( myArray, 0, myArray.length - 1 );
        long end = System.nanoTime();
        System.out.println(end - start );
        total += (end - start);
    }
    //long average = (long) total / (long) count2;

    //System.out.println(average);

    //prints the sorted array
    //for (int i = 0; i <myArray.length; i++){
    //  System.out.print(myArray[i] + ", ");
    //}

}

public static int sort(int myArray[], int left, int right){
    int i = left, j = right;
    int temp;
    int pivot = myArray[(left + right) / 2];
    //System.out.println("here are the pivot numbers " + pivot + ", ");

    if (i <= j){

        while (myArray[i] < pivot) //&& (i<right))  
            i++;
        while (myArray[j] > pivot) //&& (j>left))  
            j--;
        if (i <= j){
            temp = myArray[i];
            myArray[i] = myArray[j];
            myArray[j] = temp;
            i++;
            j--;

        }
    } 

    if (left < j) sort(myArray, left, j);
    if (i < right) sort(myArray, i, right);

    return i;

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:18:37.917

对已排序的数组进行排序时，快速排序的行为是 O(n^2)。在您的代码中第一次对数组进行排序后，您将对排序后的数组进行排序。这将为您提供快速排序的最坏情况。您每次都需要生成一个全新的随机数组来真正测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:22:47.923

QuickSort 在已经排序的数据上表现不佳。见这里： [http ://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)

您应该在 for 循环中随机化您的数组以获得更准确的结果。

# java - 为什么这个 Java 方法不返回所有 XML 元素？

> ID：13779229
> 
> 赞同：-1
> 
> 时间：2012-12-08T16:10:30.817
> 
> 标签：java, xml

我正在从 XML 文档中读取 DMX 值。该方法仅从我试图从中提取的元素中返回一个节点，但应该有 512。

这是方法：

```
public static void readXML(int cueNo){
        try {

            File fXmlFile = new File(MixWindow.Globals.fileLoc);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);
            doc.getDocumentElement().normalize();

            System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
            NodeList nList = doc.getElementsByTagName("Cue");
            System.out.println("-----------------------");

            for (int temp = 0; temp < nList.getLength(); temp++) {

               Node nNode = (Node) nList.item(temp);
               if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                  Element eElement = (Element) nNode;

                  System.out.println("Cue Name : " + getTagValue("Cue_Name", eElement));
                  System.out.println("Cue Number : " + getTagValue("Cue_Number", eElement));
                      //System.out.println("Nick Name : " + getTagValue("nickname", eElement));
                  //System.out.println("Salary : " + getTagValue("salary", eElement));

               }

            }
            NodeList nListII = doc.getElementsByTagName("DMX");
            //nListII = doc.getElementsByTagName("DMX");
            System.out.println("-----------------------");
            int length = nListII.getLength();
            System.out.println("DMX Length:  " + length);
            for (int tempII = 0; tempII < nListII.getLength(); tempII++) {

                   Node nNodeII = (Node) nListII.item(tempII);
                   if (nNodeII.getNodeType() == Node.ELEMENT_NODE) {

                      Element eElement = (Element) nNodeII;

                      System.out.println("DMX Chnl: " + getTagValue("DMX_Chnl", eElement));
                      System.out.println("DMX Val: " + getTagValue("DMX_Val", eElement));
                          //System.out.println("Nick Name : " + getTagValue("nickname", eElement));
                      //System.out.println("Salary : " + getTagValue("salary", eElement));

                   }

                }

          } catch (Exception e) {
            e.printStackTrace();
          }
    }
        private static String getTagValue(String sTag, Element eElement) {
            NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

            Node nValue = (Node) nlList.item(0);

            return nValue.getNodeValue();
        }
    } 
```

这是 XML 文件的一部分：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ShowFile>
<Cue>
<Cue_Name>stuff and junk</Cue_Name>
<Cue_Number>1</Cue_Number></Cue>
<DMX>
<DMX_Chnl>1</DMX_Chnl>
    <DMX_Val>0</DMX_Val>
<DMX_Chnl>2</DMX_Chnl>
    <DMX_Val>0</DMX_Val>
<DMX_Chnl>3</DMX_Chnl>
    <DMX_Val>0</DMX_Val>
<DMX_Chnl>4</DMX_Chnl>
        <DMX_Val>0</DMX_Val>
......
    <DMX_Chnl>512</DMX_Chnl>
        <DMX_Val>0</DMX_Val> 
```

System.out 创建了这个：

```
Cue Name : stuff and junk
Cue Number : 1
-----------------------
DMX Length:  1
DMX Chnl: 1
DMX Val : 0 
```

我究竟做错了什么？

缩短的 xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><ShowFile><Cue><Cue_Name>Stuff and Junk</Cue_Name><Cue_Number>1</Cue_Number></Cue><DMX><DMX_Chnl>1</DMX_Chnl><DMX_Val>0</DMX_Val><DMX_Cue>1</DMX_Cue><DMX_Chnl>2</DMX_Chnl><DMX_Val>0</DMX_Val><DMX_Cue>1</DMX_Cue><DMX_Chnl>3</DMX_Chnl><DMX_Val>0</DMX_Val><DMX_Cue>1</DMX_Cue><DMX_Chnl>4</DMX_Chnl></DMX></ShowFile> 
```

添加循环：

```
if (nNodeII.getNodeType() == Node.ELEMENT_NODE) {

                      Element eElement = (Element) nNodeII;

                      NodeList childNodes = nNodeII.getChildNodes();
                        String result = new String();
                        for (int i = 0; i < childNodes.getLength(); i++) {
                          Node node = childNodes.item(i);
                      String dcName = node.getNodeName();
                      String dcVal = node.getNodeValue();
                      System.out.println("DMX stuff:  " + dcName + " " + dcVal);
                                                }
                   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:43:56.070

Java 和 XML 解析器的行为正确。

但是**您希望文档具有与实际不同的结构**！所以你在错误的地方寻找节点，因此没有在那里找到节点。

只有**一个 DMX**元素。您想枚举*children*，而不是 DMX 元素。（即你想要有 DMX_Chnl 元素，并且这些元素*并不*都包含在单独的 DMX 节点中）

# php - 在 PHP 函数中返回 JS 的最佳方法是什么？

> ID：13779234
> 
> 赞同：0
> 
> 时间：2012-12-08T16:11:32.730
> 
> 标签：php, javascript

所以我有这个返回 html/js 的 PHP 函数。但我发现我使用的方法是错误的，效率不高。有没有更好的办法？

这只是代码的简化版本。

```
function doSomething() {
$speed = 1000;
$duration = 500;
$start = false; // this is a boolean and doesn't work below (not sure why)

$output = '<div class="container">something</div>' . "\r\n";
$output .= '<script type="text/javascript">' . "\r\n";
$output .= 'jQuery(document).ready(function() {' . "\r\n";
$output .= 'jQuery(".container.").cycle({' . "\r\n";
$output .= 'speed : ' . $speed . ',' . "\r\n";
$output .= 'duration : ' . $duration . ',' . "\r\n";
$output .= 'start : ' . $start . "\r\n"; // this doesn't work I think is because of it becoming a string instead of a boolean here.
$output .= '})' . "\r\n";
$output .= '})' . "\r\n";
$output .= '</script> . "\r\n";
return $output;
} 
```

所以你可以在上面看到一堆输出和一堆换行符，基本上很难维护和调试。此外，根据评论，START 变量不起作用。

一定有更好的方法。我想到了heredocs？但不确定...

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:21:55.380

我会使用以下内容：

```
function doSomething() {
     $speed = 1000;
     $duration = 500;
     $start = (int)false; // this is a boolean and doesn't work below (not sure why)
     $output = <<<END
       <div class="container">something</div>
       <script type="text/javascript">
         jQuery(document).ready(function() {
         jQuery(".container").cycle({
           speed : $speed ,
           duration : $duration,
           start : $start
          })
        })
       </script>
END;
return $output;
}

echo doSomething(); 
```

易于维护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:18:34.447

你可以这样做：

```
function doSomething() {        
    $cycleArguments = array(
        'speed'    => 1000,
        'duration' => 500,
        'start'    => false
    );

    $output = '<div class="container">something</div>' . "\r\n";
    $output .= '<script type="text/javascript">' . "\r\n";
    $output .= 'jQuery(document).ready(function() {' . "\r\n";
    $output .= 'jQuery(".container.").cycle(' . "\r\n";
    $output .= json_encode( $cycleArguments );
    $output .= ')' . "\r\n";
    $output .= '})' . "\r\n";
    $output .= '</script>' . "\r\n";
    return $output;
} 
```

并结合`json_encode()` *和*heredoc语法：

```
function doSomething() {        
    $cycleArguments = array(
        'speed'    => 1000,
        'duration' => 500,
        'start'    => false
    );

    $jsonCycleArguments = json_encode( $cycleArguments );

    $output = <<<OUTPUT
    <div class="container">something</div>
    <script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery(".container.").cycle( $jsonCycleArguments );
    });
    </script>
OUTPUT;
    return $output;
} 
```

另一个选择仍然是：

```
function doSomething() {        
    $cycleArguments = array(
        'speed'    => 1000,
        'duration' => 500,
        'start'    => false
    );

    $output = array(
        '<div class="container">something</div>',
        '<script type="text/javascript">',
        'jQuery(document).ready(function() {',
        '    jQuery(".container.").cycle(' . json_encode( $cycleArguments ) . ');',
        '});',
        '</script>'
    );

    return implode( "\r\n", $output );
} 
```

ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:18:00.403

您可以在单独的 HTML 文件中编写代码，从 php 对该文件进行 AJAX 调用，并根据需要在 AJAX 响应中获取 HTML 页面的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T16:52:33.993

这里有几个选项：

1）在你的页面顶部（或者如果你已经模块化了所有的 JS，并且在你调用任何东西之前，它都不会在页面底部触发），让 php 转储一个 JSON 编码的多维数组，包含您在该页面上需要的所有数据，都放入一个 var。

您的 JS（存储在静态文件中）将该 var 传递给 init 函数之一，并将对该数据进行操作。

2）从那里调用html页面的php脚本`src="script.php"`，将JS存储为单独的包含，作为HEREDOC或模板值。获取您的值，将它们插入模板并回显字符串。为此，您必须弄乱 MIME 类型才能使其正常工作。

3) 重写您的 apache 安装以重写名称，编写一个路由脚本来处理值抓取和模板，并根据请求的文件扩展名返回一个 mime 类型。

这对于大多数站点来说是一种过度杀伤，但对于希望所有 JS 都是外部的、希望 JS 文件包含动态数据并希望所有脚本标签具有常规外观`src`标签的大型站点很有用。

另一种方法是将 php 设置为将“.js”文件视为 php 文件（但随后您需要确定脚本中的类型，以设置 MIME 类型）。

# jquery - 为什么 IE 在仅使用阿拉伯语或波斯语等其他语言发送 ajax 请求时无法识别字符

> ID：13779235
> 
> 赞同：3
> 
> 时间：2012-12-08T16:11:42.243
> 
> 标签：jquery, ajax, internet-explorer, encoding

我使用 jquery ajax 发送一个用于搜索的字符串，它在 en lang 字母数字字符中有效，但在键入阿拉伯语或波斯语的情况下不起作用。

这仅在 IE 中发生，此脚本在 chrome 和 firefox 中完美运行！你可以在这里看到：[http ://webzzz.com](http://webzzz.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-18T07:20:17.950

我解决了：问题出在 ajax 脚本中

```
**// this not working with ie browser when using arabic letters** 
xmlhttp.open("GET","livesearch.php?q="+str,true);
xmlhttp.send();

***// this will work in ie browser even with arabic letter after insert uncode(url)***
var uri = "livesearch.php?q="+str ;
var res = encodeURI(uri);
xmlhttp.open("GET",res,true);
xmlhttp.send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:52:31.787

您需要检查服务器接收到的内容是否正确编码。看来 IE7,8,9 有问题。

我在使用“GET”方法发送 AJAX 请求时遇到了类似的问题。我通过使用[`encodeURI(URI)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)函数对请求的非 ASCII 参数进行编码来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:24:22.747

这是我在搜索框中输入文本后得到的：

![在此处输入图像描述](../Images/4c3a14f8910a2fac7748fa9686692f75.png)

不知道会发生什么，因为它是阿拉伯语。

# ios - 一段时间后从 NSMutableDictionary 中删除对象

> ID：13779240
> 
> 赞同：0
> 
> 时间：2012-12-08T16:12:20.323
> 
> 标签：ios, cocoa, selector, nstimer, nsmutabledictionary

我想在一段时间后从 NSMutableDictionary 中删除一些对象。

我有：

```
//first Method start
    PedObjectTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(fireTimer:) userInfo:PedMessage repeats:YES];
    [PedMessage setObject:PedObjectTimer forKey:@"Timer"];
    [PedObjects setObject:[PedMessage copy] forKey:[PedMessage objectForKey:@"ObjectID"]];
//first Method end

- (void) fireTimer:(NSTimer*)theTimer {

    NSLog(@"%@",PedObjects);
    [PedObjects removeObjectForKey:[[theTimer userInfo]objectForKey:@"ObjectID"]];
    NSLog(@"%@",PedObjects);

    [theTimer invalidate];
    theTimer = nil;
} 
```

一个问题是我无法将计时器对象复制到字典中......

如何在 fireTimer 方法中 2 秒后删除正确的？

有了这个我得到相同的结果，如果我有 2 个选择器，它不会删除我字典中的 2 个条目......

```
[PedObjects setObject:[PedMessage copy] forKey:[PedMessage objectForKey:@"ObjectID"]];
[self performSelector:@selector(delete:) withObject:[PedObjects objectForKey:[PedMessage objectForKey:@"ObjectID"]] afterDelay:2.0];

-(void)delete:(NSMutableDictionary*)dict
{
    NSLog(@"%@",[PedMessage objectForKey:@"ObjectID"]);
    NSLog(@"%@",PedObjects);
    [PedObjects removeObjectForKey:[dict objectForKey:@"ObjectID"]];
    NSLog(@"%@",PedObjects);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T16:18:01.613

你可以使用这样的东西：

你打电话而不是计时器

```
[self performSelector:@selector(delete:) withObject:yourDictionary afterDelay:2.0];

//delete implementation

-(void)delete:(NSMutableDictionary*)dict {
    [dict removeObjectForKey:@"yourKey"];
} 
```

# java - 什么是对 Java GC 友好的最佳循环图表示

> ID：13779243
> 
> 赞同：3
> 
> 时间：2012-12-08T16:12:44.367
> 
> 标签：java, garbage-collection

或者我可能会问较新的 GC 是否重要？

如果确实如此，那么是否希望通过查找表或使用弱引用（还有更多内存）来管理节点之间的链接，或者只是让所有节点相互指向就可以了。这是假设我有一个“处理”方法，其中节点或链接删除将所有对它的引用设置为空。

问题是如果 ram 中有一个大型数据库，如果它必须在图中评估很多长的随机循环，是否会对 GC 性能产生巨大影响？或不？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T16:46:50.250

垃圾收集的*标记和清除*方法对对象图的拓扑完全不敏感。一旦它到达一个已经被标记的对象，它就假定它的所有引用都被标记了，所以无论你如何设计你的结构都不会造成太大的伤害。

我的建议是让你的代码尽可能自然地适应问题，而对任何其他问题都非常松懈。当您遇到真正的性能/内存问题时，您才会停下来考虑优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:59:21.360

HotSpot VM 的垃圾收集器不使用引用计数。有**mark/sweep/compact**收集器或**复制收集器**，它们都从其根（所有活动线程的调用堆栈上的局部变量，静态字段等）。

基本上，只要一个对象不能从任何根**到达**，那么它就是**dead**，无论有多少其他死对象引用它。在这种情况下，dead 实际上并不意味着对象的内存已经被释放，它只是说对象将在下次运行期间被 GC 回收（删除）。

简单来说，图遍历过程中 GC 访问的对象都是*活着*的，其他的都是*死*的。

因此，每当您对图形结构的所有外部引用都清空时，无论它保留多少内部引用，整个图形结构都将被垃圾收集。

这是Bob Lee对**标记和扫描**算法的一个很好的解释：

[http://www.youtube.com/watch?v=KTC0g14ImPc#t=177s](http://www.youtube.com/watch?v=KTC0g14ImPc#t=177s) 及稍后在同一视频中： [http ://www.youtube.com/watch?v=KTC0g14ImPc#t=2917s](http://www.youtube.com/watch?v=KTC0g14ImPc#t=2917s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:17:21.713

如果 Java 的 GC 被循环引用破坏，那将是相当令人失望的。幸运的是，事实并非如此。不过，我不明白您问题的数据库部分。我认为，如果您能更具体地了解您实际尝试做的事情，那将会有很大帮助。

# c# - WPF TabControl 数据绑定行为

> ID：13779250
> 
> 赞同：0
> 
> 时间：2012-12-08T16:13:35.500
> 
> 标签：c#, wpf, data-binding, mvvm, prism

我有一个 TabControl，它被分配了一个区域（[PRISM](http://compositewpf.codeplex.com/) [区域](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions%28v=pandp.40%29.aspx)）。我正在使用他们的视图模型实例化视图（用户控件）并将这些视图添加到将导致创建选项卡项的区域，这是 TabControls 的默认区域行为。现在的问题是当用户切换到不同的选项卡时，就像以前的选项卡一样，它们已经失去了绑定并且验证错误模板消失了。
可能是什么问题呢 ？

# php - 从 PHP 到 Javascript

> ID：13779254
> 
> 赞同：0
> 
> 时间：2012-12-08T16:13:50.600
> 
> 标签：php, javascript, android, sqlite, pdo

我的 PHP webapp 上有以下代码，它使用 PHP 在本地的 Sqlite3 数据库文件中查找产品。我试图用Phonegap 将它转换为Android 应用程序，但遗憾的是Phonegap 不适用于PHP，所以我想我可以制作一个JavaScript 文件来替换PHP。

但是，我无法让它工作。如果我试图做的事情是不可能的，我想应该有一种方法可以在服务器上执行 PHP 文件并在应用程序上显示结果。

```
($_GET['busq']){
    $busq=$_GET['busq'];

    function ultlet($cadena) {
       $cant = strlen($cadena);
       $cant--;
       $let = substr($cadena, $cant);
       if ($let == "s") {
          $cadena = substr($cadena, 0, $cant);   
       } 
       return $cadena;
    }

    str_replace("-",$busq," ");
    $arreg=explode(" ",$busq);
    $cuent=count($arreg);

    for($a=0;$a<$cuent;$a++){
       $arreg[$a] = ultlet($arreg[$a]); 
    }
    $query="SELECT * from MyTable WHERE";

    for($i=0;$i<$cuent;$i++){
        if ($i>=1){
            $query=$query." AND ";
        }
        $query=$query." (col1 LIKE \"%$arreg[$i]%\"   OR col6 LIKE \"%$arreg[$i]%\") ";
    }

    $db = new PDO('sqlite:MyDatabase.sqlite');
    $result = $db->query($query);
    foreach ($result as $row) {
        if ($row['codigo_cat']!=null){
            $class = 'class="image"';
        }else{
            $class = 'class="row"';
        }
        echo '<div '.$class.' alt="'.$row['col4'].'">';
        echo 'Codigo: '.$row['col2']." / ".$row['col3']."<br>";
        echo 'Nombre: '.$row['col1']."<br>";
        echo '</div>';
    }
} 
```

还有另一个文件，它根据用户在搜索栏上的输入创建变量“busq”，用于显示产品及其价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:14:38.247

修改 PHP 脚本以将其内容输出为 xml 文件，并使用 javascript 的 XMLHttpRequest 函数创建对该文件的请求，并获取您需要的信息。

# android - 在 virtualbox 上使用 Android-x86

> ID：13779255
> 
> 赞同：2
> 
> 时间：2012-12-08T16:13:56.253
> 
> 标签：android, virtualbox, android-x86

我正在尝试在 Virtual box 上启动 Android，但每当我启动 VM 时，窗口仍然在检测 android-x86（有很多点）。

我认为问题在于 Virtualbox 无法识别硬盘，因为在会话信息中硬盘的数据读取为 0 B。有谁知道我怎样才能为 Android-x 检测到 VM 的硬盘

任何解决此问题的帮助将不胜感激。谢谢

# android - 如何在 Android 中写入 .txt 文件？

> ID：13779256
> 
> 赞同：14
> 
> 时间：2012-12-08T16:13:58.890
> 
> 标签：android, textview, outputstream

我有一个需要读取和写入文本文件的应用程序。我有它读，但我没有它写。这个想法是，当我单击屏幕上的保存按钮时，它会将已放入 textviews 的所有信息保存到一个数组中，并将数组的每个段写入文本文件。这是我的写作部分代码：

```
public class AddOrModify extends Activity {

    private Button Savebtn;
    private Button Cancelbtn;
    private EditText NameofRoute;
    private EditText Address1;
    private EditText City1;
    private EditText State1;
    private EditText Zip1;
    private EditText Address2;
    private EditText City2;
    private EditText State2;
    private EditText zip2;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.add_or_modify);

            Savebtn = (Button)findViewById(R.id.savebtn);
            Savebtn.setOnClickListener(new btnlistenersave());

            Cancelbtn = (Button)findViewById(R.id.cancelbtn);
            Cancelbtn.setOnClickListener(new btnlistenercancel());

        }

        private class btnlistenersave implements View.OnClickListener{
            public void onClick(View v) {

                NameofRoute = (EditText)findViewById(R.id.NameofRoute);
                Address1 = (EditText)findViewById(R.id.editAddress1);
                City1 = (EditText)findViewById(R.id.City1);
                State1= (EditText)findViewById(R.id.State1);
                Zip1 = (EditText)findViewById(R.id.Zip1);
                Address2= (EditText)findViewById(R.id.Address2);
                City2 = (EditText)findViewById(R.id.City2);
                State2 = (EditText)findViewById(R.id.State2);
                zip2 = (EditText)findViewById(R.id.Zip2);

                //String[] mySettings ={NameofRouteinput,Address1input,City1input, State1input,Zip1input,Address2input,City2input,State2input,Zip2input,";"};

               // if(mySettings != null){ 
                try{

                    String NameofRouteinput = NameofRoute.getText().toString();
                    String Address1input = Address1.getText().toString();
                    String City1input = City1.getText().toString();
                    String State1input=State1.getText().toString();
                    String Zip1input = Zip1.getText().toString();
                    String Address2input =Address2.getText().toString();
                    String City2input = City2.getText().toString();
                    String State2input = State2.getText().toString();
                    String Zip2input= zip2.getText().toString();
                    OutputStreamWriter out = new OutputStreamWriter(openFileOutput("myaddress.txt",0));

                    String[] mySettings ={NameofRouteinput,Address1input,City1input, State1input,Zip1input,Address2input,City2input,State2input,Zip2input,";"};

                    for(int i =0; i < mySettings.length; i++)
                    out.write(mySettings[i]);
                    out.close();
                }
                catch (java.io.IOException e){

                }

                Intent i = new Intent(AddOrModify.this, Frontpage.class);
                startActivity(i);

            }

        }

        private class btnlistenercancel implements View.OnClickListener{

            public void onClick(View v) {
                Intent i = new Intent(AddOrModify.this, Frontpage.class);
                startActivity(i);
            }

        }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-07T09:19:13.790

有了 mari 的解决方案，我得到了

```
 java.lang.IllegalArgumentException: contains a path separator 
```

然后我尝试了以下，它对我有用

```
 File root = new File(DIRECTORY_PATH);
  File gpxfile = new File(root, "samples.txt");
  FileWriter writer = new FileWriter(gpxfile);
  writer.append("First string is here to be written.");
  writer.flush();
  writer.close(); 
```

你可以循环它来写多行

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T16:29:22.607

您可以使用`FileOutputStream`代替`OutputStreamWriter`，如下所示：

```
File file = getFileStreamPath("test.txt");

if (!file.exists()) {
   file.createNewFile();
}

FileOutputStream writer = openFileOutput(file.getName(), Context.MODE_PRIVATE);

for (String string: data){
    writer.write(string.getBytes());
    writer.flush();
}

writer.close(); 
```

检查安卓[文档](http://developer.android.com/guide/topics/data/data-storage.html)。

# java - Java读入字节数组

> ID：13779259
> 
> 赞同：0
> 
> 时间：2012-12-08T16:14:33.493
> 
> 标签：java, bytearray, byte

我有一个由 1 和 0 组成的 .txt 文件，就像这样；

```
11111100000001010000000101110010
11111100000001100000000101110010
00000000101001100010000000100000 
```

我希望能够读取 8 个（1 和 0）并将每个“字节”放入一个字节数组中。所以一行是 4 个字节；

```
11111100 00000101 00000001 01110010 --> 4 bytes, line 1
11111100 00000110 00000001 01110010 --> 8 bytes, line 2
00000000 10100110 00100000 00100000 --> total 12 bytes, line 3
                ...
and so on. 
```

我相信我需要将数据存储在二进制文件中，但我不知道该怎么做。任何帮助是极大的赞赏。

编辑1：

我想将 8 个 1 和 0（11111100、00000101）放入一个字节并存储在一个字节数组中，因此 11111100 将是数组中的第一个字节，00000101 是第二个字节，依此类推。我希望这更清楚。

编辑2：

```
fileopen = new JFileChooser(System.getProperty("user.dir") + "/Example programs"); // open file from current directory
        filter = new FileNameExtensionFilter(".txt", "txt");
        fileopen.addChoosableFileFilter(filter);

        if (fileopen.showOpenDialog(null)== JFileChooser.APPROVE_OPTION) 
        {
            try
            {
                file = fileopen.getSelectedFile();

                //create FileInputStream object
                FileInputStream fin = new FileInputStream(file);

                byte[] fileContent = new byte[(int)file.length()];

                fin.read(fileContent);

                for(int i = 0; i < fileContent.length; i++)
                {
                    System.out.println("bit " + i + "= " + fileContent[i]);
                }

                //create string from byte array
                String strFileContent = new String(fileContent);
                System.out.println("File content : ");
                System.out.println(strFileContent);                      

            }
            catch(FileNotFoundException e){}
            catch(IOException e){}
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:46:14.417

这是一种方法，在代码中带有注释：

```
import java.lang.*;
import java.io.*;
import java.util.*;

public class Mkt {
  public static void main(String[] args) throws Exception {
    BufferedReader br = new BufferedReader(new FileReader("in.txt"));
    List<Byte> bytesList = new ArrayList<Byte>();

    // Read line by line
    for(String line = br.readLine(); line != null; line = br.readLine()) {
      // 4 byte representations per line
      for(int i = 0; i < 4; i++) {
        // Get each of the 4 bytes (i.e. 8 characters representing the byte)
        String part = line.substring(i * 8, (i + 1) * 8);
        // Parse that into the binary representation
        // Integer.parseInt is used as byte in Java is signed (-128 to 127)
        byte currByte = (byte)Integer.parseInt(part, 2);
        bytesList.add(currByte);
      }
    }

    Byte[] byteArray = bytesList.toArray(new Byte[]{});

    // Just print for test
    for(byte currByte: byteArray) {
      System.out.println(currByte);
    }
  }
} 
```

输入是从名为`in.txt`. 这是一个示例运行：

```
$ javac Mkt.java && java Mkt
-4
5
1
114
-4
6
1
114
0
-90
32
32 
```

希望这有助于您入门，您可以根据需要进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:27:28.400

使用 BufferedReader 读取 txt 文件。

```
BufferedReader in = new BufferedReader(...);
ArrayList<byte> bytes = new ArrayList<byte>();
ArrayList<char> buffer = new ArrayList<char>();
int c = 0;
while((c = in.read()) >= 0) {
    if(c == '1' || c == '0') buffer.add((char)c);
    if(buffer.size() == 8) {
        bytes.add(convertToByte(buffer));
        buffer.clear();
    }
} 
```

# javascript - 点击事件；如果和其他

> ID：13779263
> 
> 赞同：-2
> 
> 时间：2012-12-08T16:14:52.897
> 
> 标签：javascript, html

好的，所以我正在为登录类型的表单编写一个 javascript 代码，它将引导您进入一个新页面。这里是：

```
function submit1()
{
    var x=document.getElementById("username");
    var y=document.getElementById("password");
    if (x.value=="username" && y.value=="password")
    {
        window.location="Example.php";
    }
    else
    {
        window.alert=("The information you have submitted is incorrect and needs to be submitted again!");
    }
} 
```

当我点击提交按钮时，它会将我直接带到页面而不是检查它是否正确。请帮忙！提前谢谢你！***让您知道这不是永久登录页面！***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:16:57.377

执行此操作的简单方法是使用`button`输入：

```
<input type="button" value="Check" onclick = "submit1();" /> 
```

`submit`另一种方法是通过使处理程序返回来防止类型输入的这种默认行为`false`。您的 HTML 将如下所示：

```
<input type="submit" value="Check" onclick = "return submit1();" /> 
```

您的功能需要更改好（考虑到您希望它*不*重定向的事实）。我假设您想保留输入的数据，所以我不打算使用`window.location`重定向。相反，我将允许提交表单：

```
function submit1()
{
    var x=document.getElementById("username");
    var y=document.getElementById("password");
    if (x.value == "username" && y.value == "password") {
        window.alert=("The information you have submitted is incorrect and needs to be submitted again!");
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:21:38.240

```
<html>
<head>
<title>
Login page
</title>
</head>
<body>
<h1 style="font-family:Comic Sans Ms;text-align="center";font-size:20pt;
color:#00FF00;>
Simple Login Page
</h1>
<form name="login">
Username<input type="text" name="userid"/>
Password<input type="password" name="pswrd"/>
<input type="button" onclick="check(this.form)" value="Login"/>
<input type="reset" value="Cancel"/>
</form>
<script language="javascript">
function check(form)/*function to check userid & password*/
{
 /*the following code checkes whether the entered userid and password are matching*/
 if(form.userid.value == "myuserid" && form.pswrd.value == "mypswrd")
  {
     window.location="Example.php"; /*opens the target page while Id & password matches*/
  }
 else
 {
   alert("Error Password or Username")/*displays error message*/
  }
}
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:23:51.373

该事件需要取消默认事件并返回false。这将阻止表单提交。

但是，如果表单仍然提交，这应该不是问题，因为 JavaScript 不能被信任，因此您必须验证所有输入服务器端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T16:26:56.667

```
<form method="post" action="." id="myform">
 <!-- form contents --->
</form>    
<script type="text/javascript">
(function () {
    var f = document.getElementById('myform'), // get your form element
        x = document.getElementById('username'),
        y = document.getElementById('password'),
        handler;
    handler = function (e) {
        e.preventDefault(); // stop submit
        if (x.value=='username' && y.value=='password') {
            window.location = 'Example.php';
        } else {
            window.alert('The information...');
        }
    };
    // listen to submit event
    if ('addEventListener' in f) {
        f.addEventListener('submit', handler, false);
    } else { // handle also IE...
        f.attachEvent('submit', function () {
            handler(window.event);
        });
    }
}());
</script> 
```

**无论如何，看起来您正在尝试从 JS 检查登录名/密码，这不是最好的主意（任何人都可以查看源代码并阅读它）**

# android - Android XML Style/Theme版本兼容性，考虑Eclipse/lint开发安全

> ID：13779264
> 
> 赞同：0
> 
> 时间：2012-12-08T16:15:01.650
> 
> 标签：android, android-resources, android-compatibility, android-lint

似乎当今开发 Android 应用程序的最佳方法是在 project.properties 中定位 android-17，在清单中定位 minSdkVersion "whateversuitsyou" 和 targetSdkVersion 17。

在此配置中，标准 lint 检查将通知仅在“whateversuitsyou”以上的 API 版本中可用的任何 API 调用，并且可以使用反射等动态支持更新的功能（如果有）。

但是，在此设置中，至少无需进一步配置，XML 中的样式和主题属性可能不会放在适当的文件夹中，例如当“whateversuitsyou”小于 11 时引用默认资源文件夹中的“Holo”元素又名蜂巢。

如果应用程序遇到未知的 XML 样式属性，它们似乎不会崩溃。LogCat 将显示错误，例如“样式包含输入错误的键”。

不确定是否在应用启动时检查了整个样式；如果是这样，当然可以在每个 API 版本上运行一次应用程序以检查是否存在任何问题。然而，这并不是完全可取的。此外，样式和主题并不是唯一的版本特定资源。

有没有办法让 lint 针对文件夹 *-vXY 的 minSdkVersion 和 API 版本 XY 检查资源？有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:27:51.557

幸运的是，使用当前（更新的）配置，这已不再是问题，因为开发框架以应有的方式处理这种情况。

例子：

`project.properties`：

```
target=android-11 
```

`AndroidManifest.xml`：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" /> 
```

您现在可以*在任何地方*使用 API 8 XML 样式和主题属性，并在子文件夹中使用 API 11 XML 样式和主题属性`-v11`。

适用于 Eclipse Juno Service Release 1、Android SDK Tools 21.1 和 Android SDK Platform-tools 16.0.1。

# java - 尝试从服务帐户将文件 POST 到 Google Cloud Storage 时出现 403（禁止）

> ID：13779266
> 
> 赞同：2
> 
> 时间：2012-12-08T16:15:11.383
> 
> 标签：java, google-app-engine, http, rest, google-cloud-storage

我想知道是否有人可以告诉我服务帐户向存储桶请求发送 POST 对象的正确语法和格式？我正在使用[HttpComponents library 以](http://hc.apache.org/user-docs.html)编程方式尝试它。我设法从我的 GoogleCredential 中获取了一个令牌，但是每次我构建 POST 请求时，我都会得到：

> HTTP/1.1 403 禁止
> 
> `<?xml version='1.0' encoding='UTF-8'?><Error><Code>AccessDenied</Code><Message>Access denied.</Message><Details`> 存储桶名称`</Details></Error`>

描述请求方法的 Google[文档](http://developers.google.com/storage/docs/reference-methods)提到了使用 html 表单发布，但我希望这并不是完成工作的唯一方法。我知道 HttpComponents 可以使用[UrlEncodedFormEntity](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/entity/UrlEncodedFormEntity.html)显式创建表单数据，但它不支持多部分数据。这就是我使用 MultipartEntity 类的原因。我的代码如下：

```
MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );
String token = credential.getAccessToken();
entity.addPart("Authorization", new StringBody("OAuth " + token));
String date = formatDate(new Date());
entity.addPart("Date", new StringBody(date));
entity.addPart("Content-Type", new StringBody("multipart/form-data"));
entity.addPart("bucket", new StringBody(bucket));
entity.addPart("key", new StringBody("fileName"));
entity.addPart("success_action_redirect", new StringBody("/storage"));
File uploadFile = new File("pathToFile");
FileBody fileBody = new FileBody(uploadFile, "text/xml");
entity.addPart("file", fileBody);
httppost.setEntity(entity);
System.out.println("Posting URI = "+httppost.toString());
HttpResponse response = client.execute(httppost);
HttpEntity resp_entity = response.getEntity(); 
```

正如我所提到的，我能够获得一个实际的令牌，所以我很确定问题在于我是如何形成请求的，而不是没有得到正确的身份验证。

记住：

1.  这是由服务帐户执行的。
2.  这意味着它确实具有读/写访问权限

感谢您的阅读，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:00:35.387

鉴于您使用的是仅适用于 PUT 的 OAuth 访问令牌和仅适用于 POST 的表单字段，因此您似乎正在混淆`PUT`和方法。`POST`

上传对象的最简单方法是使用如下内容：

```
HttpPut put = new HttpPut("https://storage.googleapis.com/" + BUCKET + "/" + OBJECT);
put.addHeader("Authorization", "Bearer " + credential.getAccessToken());
put.setEntity(new StringEntity("object data"));
client.execute(put); 
```

也可以`PUT`创建一个签名的 HTML 表单，用户可以使用它来上传对象，但比仅使用 . 更复杂`POST`。您的表格需要一份[签署的政策文件](https://developers.google.com/storage/docs/reference-methods#policydocument)，类似于以下内容：

```
PolicyDocument = {"expiration": "2010-06-16T11:11:11Z",
 "conditions": [
   ["starts-with", "$key", "" ],
   {"acl": "bucket-owner-read" },
   {"bucket": "travel-maps"},
   {"success_action_redirect": "http://www.example.com/success_notification.html" },
   ["eq", "$Content-Type", "image/jpeg" ],
   ["content-length-range", 0, 1000000]
  ]
}
Policy = Base_64_Encoding_Of(PolicyDocument)
MessageDigest = Sha256_With_RSA(SecretKey, Policy)
Signature = Base64_Encoding_Of(MessageDigest) 
```

这会产生以下 HTML：

```
<form action="http://travel-maps.storage.googleapis.com" method="post" enctype="multipart/form-data">
<input type="text" name="key" value="">
<input type="hidden" name="bucket" value="travel-maps">
<input type="hidden" name="Content-Type" value="image/jpeg">
<input type="hidden" name="GoogleAccessId" value="1234567890123@developer.gserviceaccount.com">
<input type="hidden" name="acl" value="bucket-owner-read">
<input type="hidden" name="success_action_redirect" value="http://www.example.com/success_notification.html">
<input type="hidden" name="policy" value="ajUJTm9jAHADNmF0aW9uIjogIjIwMTAtMDYtMTZUMTSAMPLEE6MTE6MTFaIiwNCSAMPLEiAgWyJzdGFydSAMPLEAiaHR0cDovL3maWNhSAMPLEIiB9LASAMPLEWN0aW9uX3JlZGlyZW">
<input type="hidden" name="signature" value="BSAMPLEaASAMPLE6SAMPLE+SAMPPLEqSAMPLEPSAMPLE+SAMPLEgSAMPLEzCPlgWREeF7oPGowkeKk7J4WApzkzxERdOQmAdrvshKSzUHg8Jqp1lw9tbiJfE2ExdOOIoJVmGLoDeAGnfzCd4fTsWcLbal9sFpqXsQI8IQi1493mw=">

<input name="file" type="file">
<input type="submit" value="Upload">
</form> 
```

请注意策略和签名字段以及其他隐藏字段，它们与策略文档中指定的条件相匹配。具体来说`bucket == travel-maps`,`acl == bucket-owner-read`等。

# java - XML 的最后一个孩子抛出 NullPointerException

> ID：13779268
> 
> 赞同：0
> 
> 时间：2012-12-08T16:15:20.213
> 
> 标签：java, xml

这是我的问题，下面的代码可以从节点中删除所有子节点，但是，当剩下最后一个子节点时，它会抛出一个空指针。特别是我重点删除pose，如果我有10个，我可以删除9个，但是最后一个，会抛出nullpointer。

一个屏幕截图 ![在此处输入图像描述](../Images/63eb55e8476650bdc8e1c1074c1f3749.png) ![在此处输入图像描述](../Images/ecd0d392746c6722e9ff7862bb3693a3.png)

**这是我的代码：**

```
 for(int j = 0; j<dom.getElementsByTagName("animation_sequence").getLength(); j++)
 {
   NamedNodeMap attributes = dom.getElementsByTagName("pose").item(j).getAttributes();
   for (int a = 0; a < attributes.getLength(); a++) {
     Node theAttribute = attributes.item(a);
     if(PoseSelectionListener.imageIDOfSelectedPose.equalsIgnoreCase(
                         attributes.item(a).getNodeValue().toString()))
     {
       if(removed==false)
       {
         Node temp = dom.getElementsByTagName("pose").item(j);
         removed=true;

         try{
           temp.getParentNode().removeChild(temp);
         }
         catch(NullPointerException ex) {return;}
       }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:55:42.883

您正在计算“animation_sequence”元素，但随后使用索引来访问“pose”元素，因此如果“animation_sequence”的数量多于“pose”的数量，您一定会得到一些错误种类。

# jquery - jQuery http 摘要认证跨域

> ID：13779272
> 
> 赞同：1
> 
> 时间：2012-12-08T16:16:15.143
> 
> 标签：jquery, authentication, google-chrome-extension, digest-authentication

我正在开发一个加载外部 JS 的 Chrome 扩展，它指向一些 REST API。

这些 API 需要 HTTP（摘要）身份验证。如何执行跨域 jQuery http 摘要身份验证？

我不想将它实现到 chrome 扩展中，而是在外部加载的 JS 中实现（这样我就可以更新外部 js 来更新我的所有客户端）

# c++ - 在标准中，什么是“派生声明符类型”？

> ID：13779273
> 
> 赞同：20
> 
> 时间：2012-12-08T16:16:15.627
> 
> 标签：c++, c++11, standards

在 C++ (C++11) 标准的不同地方，声明是根据*derived-declarator-type-list*来描述的。我正在研究右值引用，在这种情况下使用这个术语是至关重要的（第 8.3.2 节）：

> 在声明**TD**中，其中**D**具有以下形式之一
>     & *attribute-specifier-seq [opt]* **D1**
>     && *attribute-specifier-seq* [opt] **D1并且声明****T D1**
> 中标识符的类型是“<em>derived-declarator-type-list **T**，”那么**D**的标识符的类型 是“<em>derived-declarator-type-list reference to **T**。”</p>

 ******不幸的是，标准中从未定义“*派生声明器类型”类别。*（我查看了“派生”一词的所有用法，此外，这可能[在此处](http://www.cpptalk.net/defect-report-derived-declarator-type-list-undefined-vt23643.html)和[此处](https://groups.google.com/d/topic/comp.std.c/gIEwLcEhCHE/discussion)得到证实。）

因为“ *derived-declarator-type-list* ”是斜体，我假设它指的是一个类别，而不是一个变量标签，例如**`T`**（因此，我不同意 Doug Gwyn 在我刚刚给出的第二个链接中的评估“我们可以已使用**`X`**而不是“*派生声明符类型列表*”）。

C++11 标准中对*derived-declarator-type*的定义是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-08T16:22:45.327

它是在那里被定义的。这是一种将之前`T`遇到的任何东西带到下一个类型的方式，类似于：

```
<some stuff> T
<some stuff> reference to T 
```

它只是`T`在类型中出现的任何内容`T D1`。

例如，如果您有声明`int& (*const * p)[30]`, `T`is `int`, `D`is`& (*const * p)[30]`和`D1`is `(*const * p)[30]`。的类型`T D1`是“指向 30 int 数组的 const 指针的指针”。因此，根据您引用的规则，类型`p`是“指向 const 的指针，指向 30 引用 int 的数组的指针”。

当然，此声明随后被 §3.4.2/5 禁止：

> 不应有对引用的引用，没有引用数组，也没有指向引用的指针。

我认为它是*派生*声明类型列表的非正式术语来自 C 标准对*派生类型*的定义（类似于 C++ 中的复合类型）：

> 可以从对象、函数和不完整类型构造任意数量的*派生类型*，如下所示：
> 
> *   数组*类型*[...]
> *   结构*类型*[...]
> *   联合*类型*[...]
> *   函数*类型*[...]
> *   指针*类型*[...]

* * *

回应评论：您似乎对类型和声明符感到困惑。例如，如果`int* p`是声明符，那么类型`p`是“指向 int 的指针”。类型表示为这些类似英语的句子。

**示例 1**：`int *(&p)[30]`

这是一个声明`T D`，其中（§8.3.1 指针）：

*   `T`->`int`
*   `D`->`*(&p)[3]`

`D`具有以下形式：

> `*` *属性说明符序列[选择]* *cv 限定符序列[选择]* `D1`

`D1`在哪里`(&p)[3]`。这意味着具有“对数组 3 的引用”类型`T D1`的形式（您可以递归地解决这个问题，下一步使用 §8.3.4 数组等）。之前的所有内容都是*derived-declarator-type-list*。所以我们可以推断在我们的原始声明中具有类型“对 3 指针数组的引用”。魔法！`int (&p)[3]``int``int`*`p``int`*

 ***示例 2**：`float (*(*(&e)[10])())[5]`

这是一个声明`T D`，其中（§8.3.4 数组）：

*   `T`->`float`
*   `D`->`(*(*(&e)[10])())[5]`

`D`形式为：

> `D1 [` *常量表达式[选择]* `]` *属性说明符序列[选择]*

`D1`在哪里`(*(*(&e)[10])())`。这意味着`T D1`的形式是`float (*(*(&e)[10])())`“引用 10 个指针的数组，指向 () 返回指向浮点的指针的函数”（您可以通过应用 §8.3/6 然后 §8.3.1 指针等来计算）。之前的所有`float`内容都是*derived-declarator-type-list*。所以我们可以推断`p`在我们的原始声明中具有类型“对 10 的数组的引用，指向 () 的函数的指针，返回指向 5 浮点数组的指针”。又是魔法！*******

# image - 在哪里更好地存储网站图片

> ID：13779283
> 
> 赞同：0
> 
> 时间：2012-12-08T16:17:26.743
> 
> 标签：image, seo

我计划在我的网站上放置很多图片，在哪里更好地存储网站图片，在网站中或在照片托管中，如果我将图像存储在照片托管中，google-images 会找到图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:47:58.007

如果 Google 的爬虫可以访问您的图像及其着陆页，那么从 SEO 的角度来看，您存储/托管图像的位置并不重要：Google 图片将能够将图像与其各自的着陆页相关联，而不管它们的地点。

但是，您需要注意一些问题，例如，仅页面上的图像不会发挥作用，您还需要一些与图像相关的文本。您可以在 SEO 入门指南中找到有关优化图像（例如目录结构）的更多提示。

[谷歌搜索引擎优化入门指南](http://www.google.com/webmasters/docs/search-engine-optimization-starter-guide.pdf)

# matlab - 为什么从“trapz”函数中出来的向量是 NAN？

> ID：13779285
> 
> 赞同：2
> 
> 时间：2012-12-08T16:17:31.980
> 
> 标签：matlab

我正在尝试计算向量 XRECW 的傅立叶逆变换。出于某种原因，我得到了一个 NAN 向量。请帮忙！！

```
t = -2:1/100:2;    
x = ((2/5)*sin(5*pi*t))./((1/25)-t.^2);    
w = -20*pi:0.01*pi:20*pi;    
Hw = (exp(j*pi.*(w./(10*pi)))./(sinc(w./(10*pi)))).*(heaviside(w+5*pi)-heaviside(w-5*pi));%low  pass filter     
xzohw = 0;    
for q=1:20:400
    xzohw = xzohw + x(q).*(2./w).*sin(0.1.*w).*exp(-j.*w*0.2*((q-1)/20)+0.5);%calculating fourier transform of xzoh    
end    
xzohw = abs(xzohw);     
xrecw = abs(xzohw.*Hw);%filtering the fourier transform  high frequencies    

xrect=0;
for q=1:401

    xrect(q) = (1/(2*pi)).*trapz(xrecw.*exp(j*w*t(q))); %inverse fourier transform
end
xrect = abs(xrect);
plot(t,xrect) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:35:08.017

这是对您“为什么”存在nan的问题的直接答案。如果您运行您的代码，Nan 来自第 7 行中除以零来计算 xzohw。注意`w`包含零：

```
>> find(w==0)
ans =
   2001 
```

您可以在第 7 行中看到您除以 的元素`w`与`(2./w)`因数。

快速修复（尽管不能保证您的代码会执行您想要的操作）是`w`通过使用避免零的步骤来避免包含 0。由于 pi 肯定不能被 100 整除，因此您可以尝试以 0.01 为增量执行步骤：

```
w = -20*pi:0.01:20*pi; 
```

使用它，您的代码会生成一个可能类似于您正在寻找的情节。为了做得更好，我们可能需要更多关于您正在尝试做什么或这些变量代表什么的详细信息。

希望这可以帮助！

# android - 进度对话框仅在作业完成时显示

> ID：13779290
> 
> 赞同：1
> 
> 时间：2012-12-08T16:18:01.940
> 
> 标签：android, progressdialog

我有一个我不明白的问题。我想在 Android 中显示一个简单的进度对话框。所以我创建了一个`AsyncTask`并在构造函数中创建了对话框。我使用`onPreExceution`对话`initialise`的`onPostExecute`方法和破坏对话的方法。所以到目前为止，这对我来说看起来完全正确。但是当我在我的 Nexus 7 上启动应用程序时，对话框不会出现，直到工作完成。所以它在工作结束时出现半秒......我做错了什么？

感谢您的帮助 ;）

```
public class ParseHTMLCodeNew extends AsyncTask<String, Void, String> {
    ProgressDialog dialog;

    public ParseHTMLCodeNew(Context context) {
        dialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {
        //einrichten des Wartedialogs
        dialog.setTitle("Bitte warten!");
        dialog.setMessage("Die Kommentare werden vom Server geladen.");
        dialog.show();
    }

    @Override
    protected String doInBackground(String params) {
        InputStream is = null;
        String data = "";
        try
        {
            URL url = new URL( params[0] ); 
            is = url.openStream(); 
            data = new Scanner(is).useDelimiter("//html//").next(); 
        } 
        catch ( Exception e ) { 
            e.printStackTrace(); 
        } 
        return data;
    }

    @Override
    protected void onPostExecute(String result) {       
        //Dialog beenden RSS Feed ist fertig  geparst
        if (dialog != null && dialog.isShowing()) {
            dialog.dismiss();
        }        
    }
} 
```

**更新**

这是我的新异步任务：

```
public class ParseHTMLCodeNew extends AsyncTask<String, String, String> {
ProgressDialog dialog;
private final OnCompleteTaskListener onCompleteTaskListener;

public interface OnCompleteTaskListener {
        void onComplete(String data);
}

public ParseHTMLCodeNew(Context context, OnCompleteTaskListener taskListener) {
    onCompleteTaskListener = taskListener;
    dialog = new ProgressDialog(context);
}

@Override
protected void onPreExecute() {

    //einrichten des Wartedialogs
    dialog.setTitle("Bitte warten!");
    dialog.setMessage("Die Kommentare werden vom Server geladen.");
    dialog.show();

}

@Override
protected String doInBackground(String... params) {
    InputStream is = null; 
    String data = "";
    try 
    { 
      URL url = new URL( params[0] ); 
      is = url.openStream(); 
      data = new Scanner(is).useDelimiter("//html//").next(); 
    } 
    catch ( Exception e ) { 
      e.printStackTrace(); 
    } 
    return data;
}

@Override
protected void onPostExecute(String result){

  onCompleteTaskListener.onComplete(result);

  //Dialog beenden RSS Feed ist fertig  geparst
  if (dialog != null && dialog.isShowing()) {
      dialog.dismiss();
  }

}
} 
```

我这样称呼它：

```
new ParseHTMLCodeNew(this,new OnCompleteTaskListener() {

        @Override
        public void onComplete(String data) {
            gData = data;

        }
    }).execute(url); 
```

正如我在您的帖子中评论的那样，`data`没有任何价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:03:05.653

我编写了一个从在线数据库获取数据并在 lisview 中填充数据的代码，这是我代码的一部分，希望对您有所帮助！

```
class LoadMyData extends AsyncTask<String, String, String> {
        //Before starting background thread Show Progress Dialog

        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(getParent());
            pDialog.setMessage("Loading. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        protected String doInBackground(String... args) {

                    //Your code here 

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting the data
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // In my case use my adapter to display the data in a listview 

                    adapter = new MyAdaper();
                    list.setAdapter(adapter);
                }
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:43:21.343

进度对话框应从 UI 线程显示

```
 runOnUiThread(new Runnable() {
            public void run() {
dialog.setTitle("Bitte warten!");
dialog.setMessage("Die Kommentare werden vom Server geladen.");
dialog.show();
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:17:44.367

如果您这样调用此代码：

```
String data = new ParseHTMLCodeNew(CommentActivity.this).execute(url).get(); 
```

然后你并没有真正看到你的对话，因为有一个阻塞的 UI。如果需要，方法 get() 等待计算完成，然后检索其结果。

这样调用：

```
new ParseHTMLCodeNew(CommentActivity.this).execute(url); 
```

并且工作的结果直接在 AsyncTask 中处理。

如果你需要将数据传输到主线程，你应该告诉他任务已经完成。Wat是简单的代码，我只是添加了**OnCompleteTaskListener接口**

```
public class ParseHTMLCodeNew extends AsyncTask<String, Void, String> {

    private final OnCompleteTaskListener onCompleteTaskListener;
    private ProgressDialog dialog;

    public interface OnCompleteTaskListener {
        void onComplete(String data);
    }

    public ParseHTMLCodeNew(Context context, OnCompleteTaskListener taskListener) {
        onCompleteTaskListener = taskListener;
        dialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {

        // einrichten des Wartedialogs
        dialog.setTitle("Bitte warten!");
        dialog.setMessage("Die Kommentare werden vom Server geladen.");
        dialog.show();

    }

    @Override
    protected String doInBackground(String... params) {
        StringBuilder sb = new StringBuilder();

        // your code here
        try {
            for (int i = 0; i < 100; i++) {
                Thread.sleep(100);
                sb.append(i);
            }

        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        return sb.toString();
    }

    @Override
    protected void onPostExecute(String result) {

        // Dialog beenden RSS Feed ist fertig geparst
        if (dialog != null && dialog.isShowing()) {
            dialog.dismiss();
        }

        onCompleteTaskListener.onComplete(result);
    }
} 
```

还有一个电话的例子

```
new ParseHTMLCodeNew(this,new OnCompleteTaskListener() {

            @Override
            public void onComplete(String data) {
                Toast.makeText(CommentActivity.this, data, Toast.LENGTH_LONG).show();

            }
        }).execute("your_url"); 
```

请注意，当您旋转手机时，此代码可能会产生错误。当 Activity 销毁但执行任务时： - 进度对话框将关闭并且不会再次打开 - 对话框或上下文的局部变量不正确。

如果长时间执行操作是否可以通过服务？

# asp.net-mvc-4 - ViewModel 还是 ViewBag？

> ID：13779294
> 
> 赞同：38
> 
> 时间：2012-12-08T16:18:11.033
> 
> 标签：asp.net-mvc-4, viewmodel, viewbag

我对 MVC4、EF5 和 ASP.Net 还很陌生，而且我似乎无法在任何地方找到一个好的答案。

基本上，一切都应该通过视图模型完成还是可以合并视图包？

假设我有一个填充下拉列表的方法，并且我正在使用视图模型来表示视图的输出。

我可以使用`Viewbag.DropDown = PopulateDropdown();`还是将它合并到 ViewModel 中，通过创建一个属性来保存`List<SelectListItem>`创建者`PopulateDropdown();`？

我知道 ViewBag 有多方便，但我还没有看到任何不使用它的充分理由？如果有人也可以为我提供更多见解，那就太好了。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-08T16:20:51.193

> 基本上，一切都应该通过视图模型完成还是可以合并视图包？

一切都应该在视图模型中完成。这就是视图模型。您为满足视图要求而专门定义的类。不要将 ViewBags 与 ViewModels 混合使用。信息从何而来的观点不再清晰。要么只使用视图模型（我推荐的方法），要么只使用 ViewBags。但是不要混用2。

因此，在您的特定示例中，您将在视图模型上有一个类型的属性，`IENumerable<SelectListItem>`并且在您的视图中，您将使用 Html.DropDownListFor 帮助器的强类型版本绑定到模型：

```
@Html.DropDownListFor(x => x.ProductId, Model.Products) 
```

显然，这些只是我的 2 美分。其他人会说混合 ViewModels 和 ViewBags 很好，我尊重他们的意见。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-05-18T10:30:06.080

**尽可能选择****ViewModel**而非ViewBag 。创建强类型视图。它使您的代码更清晰、更不易碎、更不易出错且易于维护。

 ****ViewBags**只是动态类型对象的字典，因此您会丢失：

*   编译时检查
*   自信地重构的能力（你失去了工具的支持）
*   IDE 支持 - 例如导航到所有用法的能力
*   智能感知

为了获得奖励积分，大量使用**ViewBag**也错过了使用[MVC 模式的重点](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

我的印象是 ViewBags 是为了解决 asp.net 中的一个边缘问题而创建的，人们使用它们而不是像最初在平台设计中那样创建视图模型，这不利于他们的工作。

* * *

*感谢[为什么不大量使用 ViewBag？](https://stackoverflow.com/questions/15567891/why-not-to-use-viewbag-heavily/15568190#15568190)***

# sencha-touch - 无法使用 sencha 2 启动基本应用程序。未加载库文件

> ID：13779303
> 
> 赞同：0
> 
> 时间：2012-12-08T16:19:15.430
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

![在此处输入图像描述](../Images/f85db40bbf0da6bd97b8a70662f0bd8f.png)我是 sencha 2 的新手。我想使用 sencha touch 运行一个基本应用程序，但无法加载该应用程序。

这是我所做的。

我已经从 miamicoder 下载了 notesApp，我正在尝试运行第一章。

我在屏幕截图中附加了文件夹结构。请查看以了解文件夹结构。

这是我的 index.html

```
<!DOCTYPE html>
<html>
<head>
    <title>My Notes</title>
    <link href="sencha-touch.css" rel="stylesheet" type="text/css" />
    <script src="sencha-touch-debug.js" type="text/javascript"></script>
    <script src="app.js" type="text/javascript"></script>
</head>
<body>

</body>
</html> 
```

我已经下载了 sencha sdk 2.1 并将 sencha-touch-debug.js 和 sencha-touch.css 放在文件夹的根目录中，并从 index.html 中引用，如下所述。我曾经在煎茶 1 中做同样的事情并且我取得了成功，但是如果我尝试对煎茶 2 做同样的事情，我会遇到错误。

我收到如下错误。

```
Failed to load resource file:///path/NotesApp-Book-Code-Ch1/src/event/Dispatcher.js?_dc=1354982532236
Failed to load resource file:///path/NotesApp-Book-Code-Ch1/src/event/publisher/Dom.js?_dc=1354982532238
Uncaught Error: [Ext.Loader] Failed loading 'file:///path/ebook-building-a-sencha-touch-2-app%20(1)/NotesApp-Book-Code-Ch1/src/event/Dispatcher.js', please verify that the file exists sencha-touch-debug.js:8324
Uncaught Error: [Ext.Loader] Failed loading 'file:///path/ebook-building-a-sencha-touch-2-app%20(1)/NotesApp-Book-Code-Ch1/src/event/publisher/Dom.js', please verify that the file exists 
```

是否需要使用senchatools并生成文件夹结构？简单地复制两个 lib 文件（sencha-touch-debug.js 和 sencha-touch.css）并从 index.html 引用它们不适用于 sencha 2？

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:01:19.563

我得到了答案。使用 Sencha touch 2 需要在项目文件夹中包含完整的 SDK，而不仅仅是像 sencha 1 这样的 2 个库文件。包含完整的框架将解决问题。

谢谢

# python - 如何解析 python ( pandas ) 中的分隔数据以创建 DataFrame？

> ID：13779308
> 
> 赞同：0
> 
> 时间：2012-12-08T16:19:39.760
> 
> 标签：python, pandas

我有一些以下格式的原始数据，其中记录分隔符是〜，元素分隔符是|。

```
date|o|h|l|c|e|f~07-12-2012 09:15|5934.0000|5945.5000|5934.0000|5938.6500|1749606|1749606~07-12-2012 09:16|5939.1000|5941.8000|5936.3500|5941.8000|1064557|2814163 
```

现在我想把这些数据解析成 pandas 数据框，但我猜 pandas 数据框理解的格式是 key-column 。所以基本上我可以使用 split('~') 将这些数据解析成三行

```
date|o|h|l|c|e|f
07-12-2012 09:15|5934.0000|5945.5000|5934.0000|5938.6500|1749606|1749606
07-12-2012 09:16|5939.1000|5941.8000|5936.3500|5941.8000|1064557|2814163 
```

但是是否有一个 api 可以使用它基于列拆分它，如下所示，或者在 pandas 中有一个 api，我可以直接使用它来提供我的数据

```
date - 07-12-2012 09:15,07-12-2012 09:16
o - 5934.0000,5939.1000 
h ..... etc
l
c
e
f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:21:22.873

我希望使这更简单`read_table`，即：

```
df = read_table(path, sep='|', lineterminator='~') 
```

留意下一个 pandas 版本：

[http://github.com/pydata/pandas/issues/2457](http://github.com/pydata/pandas/issues/2457)

编辑：这已完成并适用于 pandas 0.10

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:07:12.557

我不太确定这是否是您正在寻找的：

```
s = 'date|o|h|l|c|e|f~07-12-2012 09:15|5934.0000|5945.5000|5934.0000|5938.6500|1749606|1749606~07-12-2012 09:16|5939.1000|5941.8000|5936.3500|5941.8000|1064557|2814163'

rows = s.split ('~')
d = {}
keys = rows [0].split ('|')
for key in keys: d [key] = []
for row in rows [1:]:
    for idx, value in enumerate (row.split ('|') ):
        d [keys [idx] ].append (value)

print (d) 
```

# c++ - 使用初始化列表中较早初始化的成员初始化成员是否安全？

> ID：13779310
> 
> 赞同：2
> 
> 时间：2012-12-08T16:20:10.540
> 
> 标签：c++, constructor, initialization, undefined-behavior

以下代码是安全的还是会导致 C++03 中的未定义行为？

```
class Aries {
public:
    Aries() : Taurus("foo") , Leo(Taurus + "bar") {}

private:
    string Taurus;
    const string Leo;
}; 
```

这段代码显然是我实际问题的精简版。

**之前在类声明中`Taurus`有意声明了**Edit 。**`Leo`我知道初始化是按照类声明中的初始化顺序发生的（而不是初始化列表中的顺序。）**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:39:47.333

只是为了澄清我在评论中提到的替代方案：

```
class Aries {
public:
    friend Aries makeAries() {
        string Taurus = "foo"; // easier to do computations here:
        return Aries( Taurus, Taurus + "bar" );
    }

private:
    Aries( string const &inTaurus, string const &inLeo )
        : Taurus(inTaurus) , Leo(inLeo) {}

    string Taurus;
    const string Leo;
};
Aries makeAries(); // must declare a friend factory outside the class 
```

这不是一个通用的解决方案，也不是一个真正理想的习语，但仍然可以提供帮助并且相对干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:27:56.947

是的，您可以安全地使用在您正在初始化的成员之前初始化的成员。

注意初始化的顺序是类定义中的声明顺序。**

# php - 在 PHP 中绘制到浏览器的特定区域

> ID：13779313
> 
> 赞同：-2
> 
> 时间：2012-12-08T16:20:21.920
> 
> 标签：php

我一直在研究 PHP GD，但所有示例似乎都表明您需要将浏览器重定向到另一个页面。现在，我已经设法通过编写一个运行图片绘画代码的 php 文件来内联显示它。我现在需要做的是停止出现在屏幕顶部的所有随机文本。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:27:01.177

GD 生成图像。图像可以放在`<img>`标签中。`<img>`是 HTML。HTML 的样式是 CSS。因此 CSS 将允许您将图像放置在您想要的位置。

例子：

```
<img src="my_gd_image.php" style="position: fixed; left: 20px; bottom: 40px;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:29:38.313

PGP GD 将内容呈现为二进制数据，这些数据可能存储在文件中或作为 HTTP 响应返回。

这与浏览器本身无关：您只需`yourscriptname.php`使用适当的 HTTP 标头渲染图像，然后通过标记和 CSS 将其放置在 html 布局中：

```
<img src="yourscriptname.php?someParam=someValue" alt="Some alt text here."> 
```

# php - mod_rewrite 似乎弄乱了我的 ajax 后置脚本

> ID：13779315
> 
> 赞同：1
> 
> 时间：2012-12-08T16:20:33.653
> 
> 标签：php, jquery, ajax, apache, mod-rewrite

当我将 url 重写为更清晰的版本时，我在上一个问题中提到的 getLikes 脚本根本不起作用……那是 b/c 它是 Post 请求吗？其他一切正常，例如查找用户配置文件的获取部分。这是 mod_rewrite：

```
RewriteEngine on
RewriteRule ^profile/([^/\.]+)/?$ profile.php?p=$1 [L] 
```

这是ajax：它应该获取ID，然后发布到一个页面，该页面返回用户是否喜欢这个配置文件......它基本上是一个喜欢按钮

```
public function likesScript($p){?>
    <script>

    //display list of people who like this
    function getLikes(){
    $.ajax({
        type: "POST",
        url: "likelist.php",

        data: { p: "<?php echo $_GET['p']?>"}
    }).success(function(res) {

        $("#likedBy").html(res); 
        //console.log(res); 

        if($('li#<?PHP echo $_SESSION['userId']; ?>').length){
            $(".Like").hide();
            $(".UnLike").fadeIn();
        } else {  
            $(".UnLike").hide();
            $(".Like").fadeIn();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:59:35.860

更改`url: "likelist.php"`为`url: "/likelist.php"`。

使用绝对路径，URI 与域名后面的所有内容。

http_URL = "http:" "//" 主机 [ ":" 端口 ] [ **abs_path** [ "?" 询问 ]]

通过`/`在开头添加或 URI，它几乎等于您编写`http://example.com/`的 .

因为您已将 URL 重写为`profile/name`，所以它会查找`profile/name/likelist.php`明显不存在的 URL。

# xslt - 如何将适当的 xml 元素与 xmlstarlet 配对？

> ID：13779317
> 
> 赞同：2
> 
> 时间：2012-12-08T16:20:43.273
> 
> 标签：xslt, xpath

我有两组 XML 节点，我想找到具有相同“电话”子节点的元素。例如：

```
<set1>
  <node>
    <phone>111</phone>
    <name>John</name>
  </node>
  <node>
    <phone>444</phone>
    <name>Amy</name>
  </node>
  <node>
    <phone>777</phone>
    <name>Robin</name>
  </node>
</set1>

<set2>
  <node>
    <phone>111</phone>
    <city>Moscow</city>
  </node>
  <node>
    <phone>444</phone>
    <city>Prag</city>
  </node>
  <node>
    <phone>999</phone>
    <city>Rome</city>
  </node>
</set2> 
```

现在我想得到以下内容：

```
<result>
  <node>
    <phone>111</phone>
    <name>John</name>
    <city>Moscow</city>
  </node>
  <node>
    <phone>444</phone>
    <name>Amy</name>
    <city>Prag</city>
  </node>
  <node>
    <phone>777</phone>
    <name>Robin</name>
  </node>
  <node>
    <phone>999</phone>
    <city>Rome</city>
  </node>
</result> 
```

我是 xslt 的初学者，我设法合并两个 xml 并将它们放在一个 html 表中。但是这个配对比我高出一个层次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:43:03.383

使用钥匙

```
<xsl:key name="phone" match="node" use="phone"/> 
```

然后用[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)如下：

```
<xsl:template match="/">
  <result>
    <xsl:apply-templates select="//node[generate-id() = generate-id(key('phone', phone)[1])]"/>
  </result>
</xsl:template>

<xsl:template match="node">
  <xsl:copy>
    <xsl:copy-of select="phone"/>
    <xsl:copy-of select="key('phone', phone)/*[not(self::phone)]"/>
  </xsl:copy>
</xsl:template> 
```

为了可读性添加

```
<xsl:output indent="yes"/> 
```

# php - Fusionchart：某些字符串字符未显示在 Fusion 饼图中

> ID：13779318
> 
> 赞同：1
> 
> 时间：2012-12-08T16:20:47.083
> 
> 标签：php, mysql, database, phpmyadmin, fusioncharts

我正在将我的 MySQL 数据库数据解析为融合图表代码并绘制饼图......但不幸的是，有些字符没有显示......请帮助解决这个问题......这是我的代码：

```
<?php
include("FusionCharts/FusionCharts.php");
include("special_db_connect.php");
?>
<HTML>
<HEAD>
<TITLE>
Exam Result Analysis
</TITLE>
<?php
?>  
<script LANGUAGE="Javascript" SRC="FusionCharts/FusionCharts.js"></SCRIPT>
<style type="text/css">
<!--
body {
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
}
.text{
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
}
-->
</style>
</HEAD>
<BODY>

<CENTER>
<?php

// Connect to the DB
$link = connectToDB();
//Generate the chart element
$strXML = "<chart caption='Academic year 2010/2011 results' subCaption='By Grades' pieSliceDepth='30' showBorder='1' formatNumberScale='0' numberSuffix=' Students'>";

// Fetch all factory records
$strQuery = "SELECT grade, COUNT(*) 'No_Of_grades' FROM std_results WHERE course_code ='CSC113A' GROUP BY grade";
$result = mysql_query($strQuery) or die(mysql_error());

//Iterate through each factory
if ($result) {
while($ors = mysql_fetch_array($result)) {

//Generate <set label='..' value='..' /> 
$strXML .= "<set label='" . $ors['grade'] . "' value='" . $ors['No_Of_grades'] . "' />";

}
}

//Finally, close <chart> element
$strXML .= "</chart>";

//Create the chart - Pie 3D Chart with data from $strXML
echo renderChart("FusionCharts/Pie3D.swf", "", $strXML, "Results", 600, 300, false, false);
echo "</br></br>";  

mysql_close($link); 

?>
</CENTER>
</BODY>
</HTML> 
```

输出饼图

> ![在此处输入图像描述](../Images/d748a7fb8dcbbaf1cd23313c78ec26d4.png)

...这在我的代码之上

```
{$strQuery = "SELECT grade, COUNT(*) 'No_Of_grades' FROM std_results WHERE course_code ='CSC113A' GROUP BY grade";} 
```

: phpmyadmin 中这段代码的结果：

> ![在此处输入图像描述](../Images/aff71f3c21cdd920a59c0cfcb9b5ef9e.png)

实际上这个表值将解析为饼图..在这里你可以在等级列中看到 A+,C+ 值...问题是那些字符串没有显示在饼图中。{请访问上面的饼图图像}。实际上 A+ & C+ 显示没有 '+' 字符。{但 '-',C-,A- 字符显示}..这对我来说是个问题..我该如何解决这个问题...{提醒上面的代码运行良好..否唯一的问题是不显示“+”字符。}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:17:06.377

尝试使用 %2B 对符号 + 进行编码：

```
$strXML .= "<set label='" . str_replace('+', '%2B', $ors['grade']) . "' value='" . $ors['No_Of_grades'] . "' />"; 
```

# c++ - 只接受信件

> ID：13779321
> 
> 赞同：3
> 
> 时间：2012-12-08T16:21:10.970
> 
> 标签：c++, std

这应该只接受字母，但还不正确：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main()
{
    std::string line;
    double d;

    while (std::getline(std::cin, line))
    {
        std::stringstream ss(line);
        if (ss >> d == false && line != "") //false because can convert to double
        {
            std::cout << "its characters!" << std::endl;
            break;
        }
        std::cout << "Error!" << std::endl;
    }
    return 0; 
} 
```

这是输出：

```
567
Error!

Error!
678fgh
Error!
567fgh678
Error!
fhg687
its characters!
Press any key to continue . . . 
```

`fhg687`由于字符串中的数字，应该输出错误。

接受的输出应仅包含字母，例如`ghggjh`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T16:30:32.510

`std::all_of`使用适当的谓词在字符串上使用会好得多。在您的情况下，该谓词将是`std::isalpha`. （标题`<algorithm>`和`<cctype>`必需）

```
if (std::all_of(begin(line), end(line), std::isalpha))
{
    std::cout << "its characters!" << std::endl;
    break;
}
std::cout << "Error!" << std::endl; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T16:30:32.807

**更新：**显示更完整的解决方案。

最简单的方法可能是遍历输入中的每个字符并检查该字符是否[在 ascii 中的英文字母范围内](http://www.asciitable.com/)（上 + 下）：

```
char c;

while (std::getline(std::cin, line))
{
    // Iterate through the string one letter at a time.
    for (int i = 0; i < line.length(); i++) {

        c = line.at(i);         // Get a char from string

        // if it's NOT within these bounds, then it's not a character
        if (! ( ( c >= 'a' && c <= 'z' ) || ( c >= 'A' && c <= 'Z' ) ) ) {

             std::cout << "Error!" << std::endl;

             // you can probably just return here as soon as you
             // find a non-letter char, but it's up to you to
             // decide how you want to handle it exactly
             return 1;
        }
     }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T17:09:23.450

您还可以使用正则表达式，如果您需要更大的灵活性，这可能会派上用场。

对于这个问题，本杰明的回答是完美的，但作为参考，这就是正则表达式的使用方式（注意这`regex`也是 C++11 标准的一部分）：

```
boost::regex r("[a-zA-Z]+");  // At least one character in a-z or A-Z ranges
bool match = boost::regex_match(string, r);
if (match)
    std::cout << "it's characters!" << std::endl;
else
    std::cout << "Error!" << std::endl; 
```

如果`string`仅包含字母字符且至少包含一个字符（the `+`），`match`则为`true`。

要求：

*   随着**升压**:`<boost/regex.hpp>`和`-lboost_regex`.
*   使用**C++11** : `<regex>`.

# jquery - 在 $(document).ready 函数中打开时，jQuery UI 对话框位置不正确

> ID：13779322
> 
> 赞同：1
> 
> 时间：2012-12-08T16:21:35.427
> 
> 标签：jquery, position, modal-dialog, document-ready

我的 jQuery UI 模态对话框在从按钮单击事件显示时显示在中心屏幕，但是，如果我在 document.ready 期间打开它，在下面的 loginDialog() 方法中，它会显示在可滚动窗口的底部。

我怀疑这个问题与我在对话框打开调用之前在 document.ready 中加载许多图像有关。屏幕的可视部分被禁用，但对话框位于滚动窗口的底部。有趣的是，对话框位置选项

```
position: 'top', 
```

在 document.ready 期间似乎也不起作用。

```
$(document).ready(function () {

        serverGetMenu();
        getPhotos();

        $("#loginDialog").dialog({
            .............
        });

        if (isLoginRequest()) {
            loginDialog();
        }
    }); 
```

如何在 document.ready 期间或之后不久正确放置对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:27:10.237

问题已解决：原来我的 jquery-ui-1.9.2.custom.css 不正确。

我原来的 ThemeRoller 'build' 不包括 Dialog 小部件，所以我创建了一个新版本来包含 Dialog 小部件。然后，我只是用新的 jquery-ui-1.9.2.custom.js 替换了现有的 jquery-ui-1.9.2.custom.js，但我也没有更新 jquery-ui-1.9.2.custom.css 文件。

由于我缺乏使用 jQuery UI 的经验，我没有意识到，虽然我的 Dialog 工作正常，但它的样式与应有的样式有点偏离，我不得不添加一些样式来纠正小问题。正确的 jquery-ui-1.9.2.custom.css 也解决了我必须修复的样式“问题”。

我发现非常有趣的是，在我尝试在 document.ready 中显示我的 Dialog 之前，缺少的 Dialog 样式类并没有真正体现出那么大的“问题”。我从来不知道样式会导致如此奇怪的问题并且很难追踪。

# javascript - 成功后从 DOM 中删除模板的主干.js

> ID：13779329
> 
> 赞同：0
> 
> 时间：2012-12-08T16:21:59.577
> 
> 标签：javascript, dom, backbone.js

我正在编写一个简单的留言板应用程序来学习骨干。一切正常（很多使用这个没有意义）但是在我如何从 dom 中删除表单/html 方面有点卡住了。我已经包含了大部分代码，但您可以从底部向上看到大约 4 行，这部分代码不起作用。我将如何从 DOM 中删除它？

提前谢谢

```
var MbForm=Backbone.View.extend({
  events: {
  'click button.add-new-post': 'savePost'
  },

  el: $('#detail'),
  template:_.template($('#post-add-edit-tmpl').html()),
  render: function(){
    var compiled_template = this.template();
    this.$el.html(compiled_template);
    return this;
  },
  savePost: function(e){
    //var self=this;
    //console.log("I want you to say Hello!");
    data={
     header: $('#post_header').val(),
     detail: $('#post_detail').val(),
     forum_id: $('#forum_id').val(),
     post_id: $('#post_id').val(),
     parent_id: $('#parent_id').val()
    };

    this.model.save(data, {
      success: function(){
        alert('this saved');
        //$(this.el).html('this is what i want');
        this.$el.remove();//  <- this is the part that isn't working

       /* none of these worked - error Uncaught TypeError: Cannot call method 'unbind' of undefined 
        this.$el.unbind();
        this.$el.empty();

        this.el.unbind();
        this.el.empty();
       */

        //this.unbind();
        //self.append('this is appended');
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:37:55.177

Backbone 不会`success`以任何特定的方式调用回调`this`，它只是作为普通函数调用。因此，`this`在您的`success`回调内部将是`window`而不是您期望的视图。

任何常用的解决方案都可以：

1.  将所需的内容保存`this`在局部变量中：

    ```
    var _this = this;
    this.model.save(data, {
      success: function() {
        //...
        _this.remove(); 
    ```

2.  使用绑定函数：

    ```
    this.model.save(data, {
      success: _(function() {
        //...
        this.remove();
      }).bind(this) 
    ```

3.  使用命名绑定函数：

    ```
    initialize: function() {
        _.bindAll(this, 'save_success');
    }
    //...
    this.model.save(data, {
      success: this.save_success 
    ```

以及上述的通常变化。

另请注意，我切换到了，[`View#remove`](http://backbonejs.org/#View-remove)因为您显然是在尝试删除整个视图，这是通常的做法。

# jquery - checkAll 按属性不触发？

> ID：13779335
> 
> 赞同：1
> 
> 时间：2012-12-08T16:22:52.780
> 
> 标签：jquery

我很困惑为什么这不起作用并且无法调试

我有一组按属性值分组的复选框，并且在每个组的脚下都有一个 checkall 类，当我单击它时，我想将其他复选框切换到相同的状态

jQuery

```
$(function () {
    $('.checkall').click(function () {
        var myactivemonth=$(this).attr("data-mymonth");
        console.log(myactivemonth);
        var myactivebox="a_"+myactivemonth;
        $('checkbox[data_mymonth=myactivemonth]').attr('checked','checked');
}); 
```

html

```
<input id="alloInv" class="tip_trigger" type="checkbox" data-mymonth="a_October2012" title="13.94" value="2018441" name="alloInv">
<input id="alloInv" class="tip_trigger" type="checkbox" data-mymonth="a_October2012" title="10.94" value="201845" name="alloInv"> 
<input class="checkall" type="checkbox" data-mymonth="October2012"> 
```

它看起来一切正常，但方框没有打勾:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:28:09.977

你有一系列错误的事情

1.  `checkbox`应该`:checkbox`
2.  `data_mymonth`应该`data-mymonth`
3.  `myactivebox`需要动态传递
4.  从问题中的代码中，您错过了决赛`});`

还有一些改进

1.  您应该使用`.prop()`而不是`.attr()`元素的实际属性。`$(this).data('mymonth');`
2.  用于`.data()`从`data-`属性中检索值

所以

```
$(':checkbox[data-mymonth="' + myactivebox + '"]').prop('checked',true); 
```

[在http://jsfiddle.net/6Nv3N/](http://jsfiddle.net/6Nv3N/)工作演示

* * *

**更新**

我错过了你问题的***切换***部分

要处理切换复选框，您需要将`checked`属性设置为`.checkall`元素的属性。

`.prop()`方式（[演示](http://jsfiddle.net/6Nv3N/8/)）

```
$(':checkbox[data-mymonth="' + myactivebox + '"]').prop('checked', this.checked); 
```

* * *

`.attr()`方式_

```
$(':checkbox[data-mymonth="' + myactivebox + '"]').attr('checked', this.checked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:04:00.113

谢谢这样做，但我确定有一种更简洁的方法来切换复选框的状态？

```
$(function() {
    $('.checkall').click(function() {
        var myactivemonth = $(this).attr("data-mymonth");
        var mystate = $(this).attr("checked");

            if (mystate==undefined) {mystate=false;};

        console.log(myactivemonth);
        var myactivebox = "a_" + myactivemonth;
        $(':checkbox[data-mymonth="' + myactivebox + '"]').attr('checked',mystate);
    });
}); 
```

PS 更新了 jquery squiggle 知道这是一个有用的工具！

# xcode - 将 OS X 部署目标从 10.6 更改为 10.5 clang 错误

> ID：13779336
> 
> 赞同：0
> 
> 时间：2012-12-08T16:22:52.687
> 
> 标签：xcode, macos, cocoa, deployment, clang

我正在尝试更改我的 OS X 项目部署目标，但我不断收到此错误并且我的构建失败。

```
clang: error: -fobjc-arc is not supported on current deployment target
Command/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我不知道这意味着什么或我必须做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:24:52.580

这意味着您需要禁用 ARC 才能支持 MacOS 10.5。[与 ARC 一起使用的最旧的 MacOS 版本是 10.6](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

对于开发人员来说，关闭 ARC 可能非常困难，尤其是取决于项目的大小，因为这意味着您必须放入一堆全新的“ `retain`”和“ `release`”调用，这可能会导致大量对象。

# mysql - 在另一个 where 语句（子查询？）中使用一个 sql 查询的结果

> ID：13779338
> 
> 赞同：49
> 
> 时间：2012-12-08T16:23:07.913
> 
> 标签：mysql, sql, subquery

我看到很多类似的问题，但它们要么太复杂以至于我无法理解，要么它们似乎没有问同样的问题。

很简单：我有两列：用户 (dmid) 和下载 (dfid)。

1.  选择下载特定文件的所有用户：

    ```
    SELECT DISTINCT dmid FROM downloads_downloads where dfid = "7024" 
    ```

2.  使用上面的用户，找到他们下载的所有文件：

    ```
    SELECT dfid from downloads_downloads WHERE dmid = {user ids from #1 above} 
    ```

3.  对 dfid 结果进行计数和排序，这样我们就可以看到每个文件收到了多少下载：

    ```
    dfid    dl_count_field
    ----    --------------
    18       103
    3        77
    903      66 
    ```

**我试图回答。**

这似乎很接近，但 MySql 陷入困境并且即使在 30 秒后也没有响应——我最终重新启动了 Apache。而且我现在不知道如何构造计数和顺序而不会因为复杂的语句而出现语法错误——它甚至可能不是正确的语句。

```
SELECT dfid from downloads_downloads WHERE dmid IN (
    SELECT DISTINCT dmid FROM `downloads_downloads` where dfid = "7024") 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-08T16:29:28.897

```
SELECT dfid,count(*) 
from downloads_downloads 
WHERE dmid IN (
    SELECT dmid 
    FROM downloads_downloads 
    where dfid = "7024"
)
group by dfid 
```

或使用自加入

```
select t1.dfid,count(*)
from downloads_downloads t1
inner join downloads_downloads t2
on t1.dmid = t2.dmid
where t2.dfid = "7024" 
```

如果这需要太长时间，那么您可能需要发布一个解释计划（谷歌它！）

# android - 在添加控件之前获取窗口大小

> ID：13779340
> 
> 赞同：1
> 
> 时间：2012-12-08T16:23:11.857
> 
> 标签：android, android-layout, android-view

我有一个带有公共函数的自定义视图，该函数将控件添加为视图的子视图，我想从我的活动中调用它。问题是我需要知道函数中视图的大小才能放置控件。我无法覆盖 onMeasure 来获取度量，因为我的视图继承自另一个自定义视图，其中该函数是最终的。我尝试覆盖 measureChildren，但它被调用得太晚了（即使在放置视图的活动上 onResume 之后）。为了在活动调用视图中的函数之前获得大小，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:28:43.210

如果您想要以像素为单位的显示尺寸，您可以使用 getSize：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:45:43.803

一种可能性是在活动中测量您的视图，然后设置视图的属性以供其内部方法使用。

使用全局布局监听器对我来说一直很有效。它的优点是能够在布局更改时重新测量事物，例如，如果某些内容设置为 View.GONE 或添加/删除子视图。

```
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);

     // inflate your main layout here (use RelativeLayout or whatever your root ViewGroup type is
     LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 

     // set a global layout listener which will be called when the layout pass is completed and the view is drawn
     mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               // at this point, the UI is fully displayed
          }
     }
 );

 setContentView(mainLayout); 
```

[http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)

# iphone - 如何启动设备类型的特定视图

> ID：13779342
> 
> 赞同：0
> 
> 时间：2012-12-08T16:23:48.290
> 
> 标签：iphone, ios, ipad, view

我正在尝试在启动时启动 3 个视图中的 1 个。我要启动的视图取决于设备类型。这是我到目前为止所拥有的`AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_Portrait5" bundle:nil];
    }

    else if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 480.0) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_Portrait4" bundle:nil];
    }

    else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_PortraitPad" bundle:nil];
    }
} 
```

问题是，当我启动应用程序时，出现黑屏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:26:22.907

您没有在窗口上设置控制器，在方法结束时，添加：

```
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:43:02.853

有一种更简洁的方法来编写该代码（包括修复）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    NSString *nibName;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        nibName = @"ViewController_PortraitPad";
    } else {
        if ([UIScreen mainScreen].bounds.size.height == 480.0) {
            nibName = @"ViewController_Portrait4";
        } else {
            nibName = @"ViewController_Portrait5";
        }
    }

    self.viewController = [[ViewController alloc] initWithNibName:nibName bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible]; 
```

# css - 在绝对 div 内的图像上添加一些文本

> ID：13779355
> 
> 赞同：1
> 
> 时间：2012-12-08T16:25:27.340
> 
> 标签：css, position, css-position

我正在尝试在使用灯箱效果弹出的图像上放置一些 HTML 文本。为此，我使用 3 个框 - 带有灯箱效果的弹出 div address_box - 框内的 div 只是一个轮廓图像地址 - 我希望将此 div 强加在 address_box 图像上

**HTML：**

```
<div class="box">
    <div id="move_in_img"><img src="img/ready-to-move-in.gif" /></div>
    <div id="address_box"><img src="img/address-box.png" />
    <div id="address">The address text
</div>
</div> 
```

**CSS：**

```
.box
        {
            position:absolute;
            top:20%;
            left:12%;
            text-align:center;

            width:940px;
            height:321px;
            background:#F9E5B9;
            z-index:51;
            padding:10px;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            display:none;
        }

.box #move_in_img{
float:left;
margin-left:20px;
margin-top:50px;
}

#address_box{
position:relative;
}
#address{
position:absolute;
} 
```

“盒子”属性设置为给它一个灯箱效果，我不能将它从绝对更改为相对。我进行了很多搜索并尝试了定位和 z-index，但都失败了。文本仅显示在 address_box 下方。

我想要做的是实现灯箱效果，但不希望文本显示为图像。我采取了正确的方法还是有更好的方法？？

这是粘贴箱链接[http://jsbin.com/anehey/1/edit](http://jsbin.com/anehey/1/edit) 刚刚从网络中挑选了一个示例图像作为框架。我希望文本进入框架内..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:28:49.457

因为没有提供工作演示，所以没有得到你想要做的事情，通常当你想做这样的事情时，使用`position: relative;`容器 div 并使用`position: absolute; width: 100%;`&`bottom: 0;`用于强加的文本 div

HTML

```
<div class="container">
   <img src="#" />
   <div class="text"></div>
</div> 
```

CSS

```
.container {
   position: relative;
   /*Set Height Width Accordingly*/
}

.text {
   position: absolute;
   bottom: 0;
   height: /*Whatever*/;
   width: 100%;
} 
```

[**演示**](http://jsfiddle.net/3mLX5/1/)（与我的答案无关，但我修复了他的要求）

# android - Android 从 API < 17 的 Settings.Global 读取？

> ID：13779356
> 
> 赞同：0
> 
> 时间：2012-12-08T16:25:28.603
> 
> 标签：android, settings

根据下面的答案进行编辑，我将清单更改为：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" /> 
```

创建方法：

```
@TargetApi(17)
private static boolean isAirplaneModeOn17(Context context) {
   return Settings.Global.getInt(context.getContentResolver(), Settings.Global.AIRPLANE_MODE_ON, 0) == 1;
} 
```

但是，当我清理项目时，我仍然收到“Settings.Global 无法解析或不是字段”。想法？

* * *

我有一个应用程序，我使用以下代码读取飞行模式状态：

```
return Settings.System.getInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0) == 1; 
```

这适用于我所有的 GB 和 <= 4.1x 使用。

当然，在 API 17 Settings.Global 被引入并且这个位置已经改变。

```
return boolean airmode = Settings.Global.getInt(context.getContentResolver(), Settings.Global.AIRPLANE_MODE_ON, 0) != 1; 
```

除了在 API17 中获取飞行模式状态可能存在变通方法之外，真正的问题是如何编译一个同时支持从同一个项目中读取 Settings.System 和 Settings.Global 的项目？

当项目构建目标设置为 4.2 API 17 以外的任何内容时，我似乎无法让 Eclipse“忽略”“Settings.Global 无法解析或不是字段”。我知道代码适用于我的 4.2 用户，并具有如下指定设置：

```
private static boolean isAirplaneModeOn(Context context) {
    if (apiVersion < 17) {
       return Settings.System.getInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0) == 1;
    } else {
       return Settings.Global.getInt(context.getContentResolver(), Settings.Global.AIRPLANE_MODE_ON, 0) == 1;
    }
} 
```

我在清单中弄乱了 min 和 target API，它似乎没有任何影响，Eclipse 仍然不会编译我的项目。

FWIW，这里有一些相关的版本信息：

ADK 21.0.0.v201210310015-519525

Eclipse 版本：4.2.1 构建 ID：M20120914-1800

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:19:01.297

右键单击您的项目，单击属性，然后单击 Android，选中 Android 4.2，然后 Eclipse 将加载 4.2 所需的所有内容，并且所有内容都应该编译。

# objective-c - Interface Builder 加载错误的类

> ID：13779360
> 
> 赞同：2
> 
> 时间：2012-12-08T16:26:32.037
> 
> 标签：objective-c, xcode, macos, interface-builder, static-libraries

我创建了一个`NSTextView`名为`JWTextView`. 它是一个单独的 Xcode 项目的一部分。该项目有一个创建包含此类的静态库的目标。我现在将此子项目添加到`MainProject/Libraries/JWKit`（在 Finder 中）下的主项目中，并将其添加到 Xcode 中。我使我的主项目的目标取决于子项目的库目标，并且我将库链接到我的主目标中。我还添加`MainProject/Libraries/**`了库和标题搜索路径。

现在我试图在我的主项目中使用这个视图。`NSTextView`我在我的一个 xib 中添加了一个并将其类更改为`JWTextView`. 我的代码中也有一个`IBOutlet JWTextView`，并在用户交互时调用它的一些方法。`JWTextView.h`是进口的。一切都编译文件。

但是，一旦我在`JWTextView`子类中实现的这个文本视图上调用一个方法，应用程序就会崩溃并出现**无法识别的选择器**错误：

```
-[NSTextView myCustomMetod:]: unrecognized selector sent to instance 0x101901a80 
```

我检查了一下，它实际上是一个`NSTextView`实例，即使 ivar 也是一个实例，`JWTextView`我在 IB 中设置了类。

如果我只是将类添加到我的主项目中，它可以正常工作，但不能作为子项目和静态库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:41:10.407

编译器对其进行了优化，因为我没有在任何地方按名称引用该类（除了 ivar，这似乎没有帮助）。

添加`[JWTextView class];`以`applicationDidFinishLaunching:`解决问题。

# objective-c - 用于 netbsd 的 gnustep

> ID：13779367
> 
> 赞同：0
> 
> 时间：2012-12-08T16:26:58.243
> 
> 标签：objective-c, gnustep, netbsd

我想问一下 gnustep 的工具链是否适用于通常使用纯 C 的 netbsd 开发。我对 Obj-C 的好处感兴趣，只有基本的 API，比如 NSObject 的引用计数和动态的东西。

我的问题是双重的：

*   *gcc 的*Obj-C ABI 是否与gcc*的*C ABI 兼容？这样我就可以使用常规的 C 库
*   Obj-C 的运行时层是否适合嵌入 netbsd 目标？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:37:03.027

如果你对 AppKit 不感兴趣，你也可以看看[https://webkeks.org/objfw/](https://webkeks.org/objfw/)。运行时可能包含您想要验证它们是否真正适用于特定 CPU 类型的汇编位。像 libFoundation 这样的旧 Foundation 库也可以满足您的需求。如果你想使用 Objective-C++ 或 Objective-C 2.0 之类的东西，我建议使用 clang 而不是 gcc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:31:12.590

> gcc 的 Obj-C ABI 是否与 gcc 的 C ABI 兼容？这样我就可以使用常规的 C 库了吗？

乍一看，这与 ABI 无关。Objective-C 是 C 的**严格超集**，因此在**每个平台**上都可以将 C 代码与 Objective-C 代码一起使用。您甚至可以使用 Objective-C 运行时库从纯 C 代码调用 Objective-C 方法。

> Obj-C 的运行时层是否适合嵌入 netbsd 目标？

我不完全明白这里的问题是什么。您是在问是否可以将 GNUstep 移植到嵌入式平台？如果是这样，我会说是的，通常应该是可能的（在嵌入式系统的适当约束下），但在我看来，它对于嵌入式开发来说太重了。

# java - 如何使用 htmlunit 或 PanthomJS 滚动网页

> ID：13779369
> 
> 赞同：2
> 
> 时间：2012-12-08T16:27:07.463
> 
> 标签：java, html, dom, automation, htmlunit

我有一个网页，它只在**向下**滚动页面时**继续加载**内容。

 **所以我想要一种使用 HtmlUnit 或 PanthomJS 务实地向下滚动页面的方法。

1.  我可以模仿向下滚动动作（让我们考虑使用滚动元素）。或者
2.  我可以用 j 脚本模仿它吗？

如果可以，请解释方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T14:48:55.667

您可以将 InnerHeight 设置为较大的值。像这样：

```
webClient.getCurrentWindow().setInnerHeight(60000); 
```

webcontrol 将加载所有元素，因为 webcontrol 足够高。**

# java - 使用java在csv文件中创建饼图

> ID：13779370
> 
> 赞同：1
> 
> 时间：2012-12-08T16:27:21.877
> 
> 标签：java, sql

我创建了一个 csv 文件，

并将数据库中的数据显示到该文件中，

如何将饼图添加到该文件，

这是我制作的代码：

```
File file = new File("C:/Users/MY TOSHIBA/Desktop/chart.CSV");
Writer output =null;
output = new BufferedWriter(new FileWriter(file));

Connection con = DriverManager.getConnection("jdbc:oracle:thin:@ 127.0.0.1:1521:XE",         "","");
String sql="select * from mawarid";

Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(sql);
while(rs.next())
{
 String teller =rs.getString("name");
 String flag=rs.getString("flag");
output.write(teller+flag+"\n");

 }
output.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:29:23.083

通过使用[JFreeChart](http://www.jfree.org/jfreechart/)库，您可以创建图表。[请参阅此处](http://www.java2s.com/Code/Java/Chart/JFreeChartPieChartDemo1.htm)的示例代码。

# android - 无法通过代码从可绘制对象中获取图像

> ID：13779374
> 
> 赞同：2
> 
> 时间：2012-12-08T16:27:36.123
> 
> 标签：android

我有一个 Imageview，当用户单击它时，会打开一个对话框，并且假设在其中显示更大的图像。
我拥有的 Imageview 在布局中，代码是这样的： ImageView image_terrain = (ImageView)findViewById(R.id.imageView2); image_terrain.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {

            Intent intent = new Intent(getApplicationContext(), Universitymap.class);
            intent.putExtra("imageName", "sattelite");

            Dialog d = new Dialog(Universitymap.this);
            d.setContentView(R.layout.image_dialog);
            d.show();
        }
    }); 
```

我使用意图通过发送它的名称来发送点击的图片。

现在在 image_dialog 布局中，我有以下代码：

```
Intent intent = new Intent();
String fileName = intent.getExtras().getString("imageName");
loadImage(fileName); 
```

在 image_dialog 布局类中加载图像的函数是：

```
private void loadImage(String fileName){
    ImageView img = (ImageView)findViewById(R.id.img_Picture);
    int resID = getResources().getIdentifier(fileName, "drawable", "com.neema.smobile.Main");
    img.setImageResource(resID);
} 
```

一个词=它不起作用。如果有人帮忙，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:34:16.667

尝试这个

```
int imageResource = getResources().getIdentifier(fileName, null, getPackageName());

imageview = (ImageView)findViewById(R.id.img_Picture);
Drawable res = getResources().getDrawable(imageResource);
imageView.setImageDrawable(res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:39:25.707

为什么要通过 Intent 传递文件名？如果您在同一活动中创建对话框，则可以使用自定义构造函数创建自定义对话框并提供文件名。

我也认为这条线没有意义：

```
Intent intent = new Intent();
String fileName = intent.getExtras().getString("imageName"); 
```

由于您试图从新 Intent 中捕获字符串，而不是您发送的 Intent。

还是我误解了你的方式？

意图是启动活动而不是对话框:)

编辑：

```
class CustomDialog extends Dialog{
    private String fileName;
    public CustomDialog(String fileName){
        this.fileName = fileName;
        this.setContentView(R.layout.your_dialog_layout);

    }

   @Override
   public void onCreate(Bundle savedInstanceState){
       ImageView image = (ImageView) findById(R.id.image);
       image.setBackgroundResource(....//set your Image like mentioned from kumaand using your saved fileName
   } 
} 
```

应该管用。有关更多信息，您可以查看[http://about-android.blogspot.de/2010/02/create-custom-dialog.html](http://about-android.blogspot.de/2010/02/create-custom-dialog.html)

# javascript - Facebook 评论插件不会宽度 100%

> ID：13779375
> 
> 赞同：0
> 
> 时间：2012-12-08T16:27:45.560
> 
> 标签：javascript, html, css

这是我页面的链接： [http ://whiterootmedia.com/database/test/mobile8.html](http://whiterootmedia.com/database/test/mobile8.html)

评论插件在最小化时是几个像素宽，当在手机上查看时，我认为它的宽度为 500 像素（我认为）。

这是我现在使用的 css：

```
.fb-comments, .fb-comments iframe {width: 100% !important;}
.fb-comments span {width: 100% !important;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:35:33.850

### 它已经是 100%。应该是缓存问题！

尝试按`Ctrl`+ `F5`。

### 截屏

![](../Images/0a7508636d78022da0e27d6c988e9043.png)

* * *

你不应该同时给`border`//`margin`和`padding`100% `width`。取而代之的是，使用 wrapper`div`和`border`，并且在其中， the`iframe`具有 100%。问题已经解决了。并且不要用. `width`_`float``div``border`

# android - Android Robolectric 库类支持。如何从应用程序项目中加载库类 R 引用

> ID：13779380
> 
> 赞同：4
> 
> 时间：2012-12-08T16:28:15.980
> 
> 标签：android, unit-testing, reflection, classloader, robolectric

我正在尝试在 Robolectric（android 单元测试框架）中实现对库项目的支持。我有框架为库项目加载所有资源，并且已经测试过它可以正常工作。这个过程非常简单，从我在 project.properties 中读取的 RobolectricConfig 并在循环中查找 android.library.reference.x 值，并在每个项目中递归。

棘手的部分与在运行时从库项目代码库中解析 R 引用有关。例如，我们有一个带有 1 个库项目的应用程序，如下所示：

**com.example.app**依赖于库**com.example.lib**

这两个项目都有资源。在 com.example.app 项目下，我们有：

**gen/com.example.app.R**

**gen/com.example.lib.R**

com.example.app.R 是 com.example.lib.R 的超集，因为它包含 com.example.lib.R 的所有定义，然后是由于其自身资源而添加的定义。我原本以为它们是相同的，但我错了，它们实际上是不同的。然而，对于 R 的内部类（（R.string、R.color、R.attr 等），名称/值映射与应用程序项目中 com.example.app.R 中对应的值相同。库项目的 R 类尽管值与应用程序项目中的值不同。

作为简化，假设它们看起来像这样：

```
package com.example.app;

public final class R {
      public static final class string {
            public static final int a = 0x7f050001;
            public static final int a = 0x7f050002;
            public static final int c = 0x7f050003;

     }

}

//this file is in the application project
package com.example.lib;

public final class R {
     public static final class string {
            public static final int c = 0x7f050003;

     }
} 
```

然后，在库项目下有**gen/com.example.lib.R**：

```
//this file is in the library project
package com.example.lib;

public final class R {
     public static final class string {
            public static final int c = 0x7f040003;
     }
} 
```

所以发生的事情是库在 string.xml 中定义了**c**而项目没有。库值中 R.string.c 的值与应用程序的 R 值不同（应用程序中的 c = 0x7f050003 和库中的 c = 0x7f040003）。我知道库不了解应用程序，因此它自己的 R 类不可能生成相同的值，因此应用程序类必须重新映射其值。我想知道的是，我怎么可能在运行时使用应用程序项目中定义的 com.example.lib.R 值，而不是库的 com.example.lib.R 类中定义的值？

失败的是，当 Robolectric 测试运行器运行我的测试时，当它进入库项目代码库时，我会查找字符串**c**，如下所示：

```
 resources.getString(R.string.c); 
```

所以当我进行查找时得到的是 0x7f040003 而不是 0x7f050003。似乎大多数值都恰好比 0x10000 高，但这并不总是有效，所以我不能依赖它。

我不明白的是，如果我们有 2 个具有相同包名的类并且来自应用程序的类在类路径中首先出现（我在运行时通过打印出 System.getProperty("java.class.path" ) 在运行时)，为什么库项目仍然使用自己的**com.example.lib.R**定义而不是应用程序项目中的等效版本？它们都具有完全相同的规范名称。

我想类加载器中的某些内容说这个类（让我们调用它的 MyLibraryActivity）只知道它所依赖的 com.example.lib.R 类，并加载那个类。也许是安全经理或其他人做出这个决定？我真的不知道。但我希望我能以某种方式改变这种行为，以便库项目中的库项目资源查找可以解析为应用程序项目中的版本（毕竟，它位于类路径中）。也许有一种方法可以让我提前强制加载这个类，这样系统就不会尝试重新加载它？

我知道库项目和应用程序项目之间没有依赖关系，我绝对不想添加这种依赖关系，但是我希望运行时的值来自应用程序的 R 类而不是库 R 类.

任何人都知道为什么会发生这种情况，以及我是否有办法强制应用程序 R 类成为应用程序项目引用的类？

- 更新 -

经过一番思考，我认为问题在于 java 编译器内联了这些值，因为它们是最终的静态变量，因此无法解决类加载更改的问题。

我曾经的另一个想法是加载所有库项目的 R 类，并将变量映射到 R 类中的应用程序项目变量。每当调用 getValue 时，我都会以某种方式（在运行时）分析堆栈以确定调用者是谁以及哪个 R 类与该调用者相关联。从那里我可以确定应用程序项目中的关联 ID 是什么，并且查找将按预期工作。

有人知道这是否可能吗？我知道如何在运行时获取堆栈跟踪，并且可以输入一些逻辑来确定调用者是谁，但是确定哪个 R 类与该调用者相关联似乎很复杂、很慢，而且可能容易出错。

[-- 再次更新 -- 使用http://www.csg.is.titech.ac.jp/~chiba/javassist/](http://www.csg.is.titech.ac.jp/~chiba/javassist/)在运行时修改类文件，在适当的地方替换值怎么样！这将是惊人的，但可能非常困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:25:07.607

由于 Library 项目的资源始终包含在 Application 项目中，因此您始终可以为 Library 项目中的资源分配固定值。

那可以解决你的问题。您可以声明 public.xml 以分配固定值，以便将相同的值也导入到应用程序项目中。

根据您图书馆中资源的数量，这可能会很乏味。

您需要在 res/values 中创建 public.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <public type="string" name="c" id="0x7f050003" />
</resources> 
```

有关更多详细信息，请查看此[帖子](https://stackoverflow.com/a/9357813/1109425)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:52:30.860

Android 库项目不会自行运行，它总是通过引用依赖应用程序中的库并构建该应用程序来间接编译。

在库项目的gen文件夹中生成的R.java的唯一目的是完成库项目本身，这样IDE在看到`resources.getString(R.string.c);`库项目中的代码时不会弹出任何编译错误。库项目的 R.java 更像是一个临时文件，它永远不会被推送到应用程序项目的 apk 文件中。

将库项目视为两部分，纯 Java 源 (my-lib/src/) 和 Android 资源 (my-lib/res/)。当您在应用程序项目中引用库项目时，纯Java源被编译并最终成为my-lib/bin/my-lib.jar（注意这个所谓的临时jar中没有R.class文件） ，它确实将 my-lib.jar 添加为应用程序项目中的依赖项（在 Eclipse 包资源管理器中，签出`my-app -> Android Dependencies -> my-lib.jar`）。Android 资源会在 ADT 认为是时候进行全局合并和编译时，通常是在为运行/调试构建应用程序项目时。

编译打包到最终 apk 中的 R java 文件是应用程序项目的 gen 文件夹下的文件，在 apk 文件中，它们被注入到相应的包下，如下所示：

```
com/
  example/
    lib/
      R       <- com.example.lib.R.java
      ... ... <- package/class from my-lib.jar
    app/
      R       <- com.example.app.R.java
      ... ... <- package/class from application project 
```

库和应用程序项目之间产生的 R 值不一致不是问题，这由 SDK 设计保证。对于您的 Robolectric 拉取请求，请始终相应地使用应用程序项目中的 R 文件。

我提到的大部分信息都可以在[官方开发指南的图书馆项目和开发注意事项部分](http://developer.android.com/tools/projects/index.html#LibraryProjects)找到。

# java - java - JFileChooser - 打开/取消/退出按钮

> ID：13779381
> 
> 赞同：0
> 
> 时间：2012-12-08T16:28:18.667
> 
> 标签：java, swing

我制作了一个按钮，它将创建一个 JFileChooser，以便用户可以打开一个 .txt 文件，这是按钮的动作侦听器内的代码：

```
JFileChooser fc = new JFileChooser();
    //filter-show only .txt files
    FileNameExtensionFilter txtfilter = new FileNameExtensionFilter("txt files (*.txt)", "txt");

    //apply the filter to file chooser
    fc.setFileFilter(txtfilter);
    fc.setDialogTitle("Otvori txt file");
    //disable the ability to show files of all extensions
    fc.setAcceptAllFileFilterUsed(false);
    //create file chooser via jFrame
    fc.showOpenDialog(jFrame);
    //get selected file
    File selFile = fc.getSelectedFile();
    Path path = Paths.get(selFile.toString());
    asdf = selFile.toString();
    //display chosen file on jLabel5
    jLabel5.setText(path.getFileName().toString()); 
```

如果您在文件选择器中选择 .txt 文件，它工作得很好，但如果您只选择一个文件然后按取消并退出，它也可以工作。我认为这是因为 getSelectedFile() 但我想知道是否有办法确保用户选择一个文件并在文件选择器中按下打开作为获取文件的条件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T16:34:31.800

您应该检查返回值是否来自：

```
fc.showOpenDialog(jFrame) == JFileChooser.APPROVE_OPTION 
```

该返回值指示用户如何退出对话框。

请参阅[`JFileChooser.showOpenDialog(Component)`文档。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#showOpenDialog%28java.awt.Component%29)

# jquery - Jquery each，如何应用于元素而不是对象？

> ID：13779382
> 
> 赞同：1
> 
> 时间：2012-12-08T16:28:28.137
> 
> 标签：jquery

所以我需要像这样使用tiptip（一个tip插件）：

```
$('#my-element').tipTip('show'); 
```

在我的代码中，我有：

```
var cells = $('.' + all_cells);  //cells refers to all div's with class cells
cells.each(function() {
          $(this)
          .removeClass('my_links') //fine
          .append('<div class="temp"></div>')  //fine
          .tipTip({ edgeOffset: 10, delay: 0, fadeIn: 0 }); //fine
          .tipTip('show') //syntax error 
```

我猜这是因为单元格不是元素而是对象。

相似地，

```
 $('.' + all_cells)
 .attr('title', 'something'))
 .tipTip({ edgeOffset: 10, delay: 0, fadeIn: 100, fadeOut: 100, maxWidth: "300px" });
 .tipTip('show') //syntax error 
```

如何使用tipTip('show'); 请在这些循环中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:30:52.153

你有一个语法错误：

```
... ;
.tiptip(... 
```

删除`;`就在最后一行之前。

# javascript - 监听backbone.js中集合的更改事件时，如何判断哪个模型发生了更改

> ID：13779386
> 
> 赞同：3
> 
> 时间：2012-12-08T16:28:52.813
> 
> 标签：javascript, backbone.js

我在主干中创建了两个集合，我想将第一个集合绑定到来自第二个集合的模型更改事件。

```
 var ProjectUserList = Backbone.Collection.extend({

        model: app.projectUser,
        url: config.base + 'api/project/project_users'

    });

    //instantiate
    app.projectUserList = new ProjectUserList(); 
```

第二个集合与第一个绑定更改事件：

```
 var FileList = Backbone.Collection.extend({

        initialize: function () {
            app.projectUserList.on('change', this.updateShare);
        },

        updateShare: function () {
            console.log(this);
        }
    }); 
```

我如何知道集合中的哪个模型发生了变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:48:34.527

来自[精美手册](http://backbonejs.org/#FAQ-events)：

> **活动目录**
> 
> 这是 Backbone.js 可以触发的所有内置事件的列表。您还可以根据需要在模型和视图上自由触发自己的事件。
> 
> *   [...]
> *   **"change"** (model, options) — 当模型的属性发生变化时。

所以`"change"`事件处理程序的第一个参数将是最初触发事件的模型。

例如，给定一个像这样的简单设置：

```
var M = Backbone.Model.extend({});
var C = Backbone.Collection.extend({
    model: M
});
var c = new C([
    { id: 1, s: 'where' },
    { id: 2, s: 'is' },
    { id: 3, s: 'pancakes' },
    { id: 4, s: 'house' }
]);
c.on('change', function(model, options) { /*...*/ });
c.at(​​​​​​​​​​​​​​​​​3).set('s', 'house?');​​​​​​​​​​ 
```

处理程序的`model`参数`"change"`将是一个 wrapping `{ id: 4, ... }`。

演示：http: [//jsfiddle.net/ambiguous/aE2XE/](http://jsfiddle.net/ambiguous/aE2XE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:44:57.300

我应该看起来更努力一点。

上例中 updateShare 函数上下文中的对象“this”包含一个数组“models”，其中包含集合中的所有模型，但触发更改事件的对象具有“_changeing：true”属性。

但接受的答案是我一直在寻找但在文档中找不到的答案。

# r - 将两个向量相乘 - 我想要一个标量，但我得到一个向量？

> ID：13779389
> 
> 赞同：13
> 
> 时间：2012-12-08T16:29:21.120
> 
> 标签：r, vector

这是我的代码：

```
a <-c(1,2,3)
b <-t(a)
print(a*b) 
```

我希望结果为 14，因为列向量乘以具有合适尺寸的行向量应该是 skalar。

但是，我得到：

> 打印 (a*t(a))

```
 [,1] [,2] [,3]

[1,]    1    4    9 
```

因此，部分和而不是全部和。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-08T16:34:34.707

两个问题，错误的乘法顺序和错误的乘法函数。

```
> print(t(a)%*%a)
     [,1]
[1,]   14 
```

等效地：

```
> a=matrix(c(1,2,3),ncol=3)
> print (a %*% t(a))
     [,1]
[1,]   14 
```

这`a`是一个 1 行 3 列的矩阵。

见`?"%*%"`和`?"*"`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-08T17:41:13.527

如果您本质上想要的是产品的总和，那么您所需要的就是`sum(a*a)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-14T22:12:19.347

你可以简单地做到这一点，

```
> a <-c(1,2,3)
> b <-t(a)

> b %*% a 
```

在这里，`%*%`作为矩阵产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T14:36:18.940

只需这样做

```
a <-c(1,2,3)
> b<-t(a)
> b

> t(b) 
```

然后

> 总和(a*t(b)) [1] 14

# java - 在 JFrame Java 中闪烁

> ID：13779392
> 
> 赞同：1
> 
> 时间：2012-12-08T16:29:25.427
> 
> 标签：java, swing, concurrency, java-2d

大家好，我正在做一个线程来更新 JFrame 上的球，所以我重新绘制屏幕......然后绘制球更新其位置..然后再次绘制屏幕......绘制球和相同的循环......这是代码

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
   Thread t = new Thread()
   {
     public void run()
     {
         while(true)
         {
             repaint();
             b2.update(ob,2);
             b2.paint(ob.getGraphics());

             b2.setT(b2.getT() + 1);
             try {
                 Thread.sleep(50);
             } catch (InterruptedException ex) {
                 System.out.println("Error in Sleeping");
             }

         }
     }
   };

   t.start();
} 
```

但问题是我看不到球......屏幕的油漆总是覆盖球，球就像在Jframe下面一样......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T17:39:52.333

如果你想在 Swing 中使用动画，推荐使用的类是`javax.swing.Timer`. 此类允许您定期对 Event Dispatch Thread 执行操作。

*   [摇摆](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)[教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)_[`Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   在 SO 上发布的[动画示例](https://stackoverflow.com/q/9849950/1076463)（在 SO btw 上的 Swing wiki 中链接）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T20:26:54.413

**一些一般规则**

*   Swing 不是线程安全的，您应该只在 Event Dispatching Thread 的上下文中更新 UI 组件。
*   您无法控制绘制过程，重绘管理器可以。您可以通过调用 来请求更新，但在尝试更新显示时`repaint`切勿直接调用`update`and 。`paint`
*   `Graphics`绘制子系统使用的上下文是共享资源，不能保证在绘制周期之间是相同的，你永远不应该维护对它的引用。您也不应该依赖`JComponent#getGraphics`此方法的结果能够返回 null。

**示例解决方案**

您有多种选择，具体取决于您最终想要实现的目标。

你可以使用 a `SwingWorker`，但考虑到你要做的就是进入一个无限循环并且它更容易使用`SwingUtilities#invokeLater`然后实际使用该`publish`方法，这种方法实际上会更有效。

您也可以使用 a `Thread`，但最终会遇到与使用 a 相同的问题`SwingWorker`

对于您所呈现的，最简单的解决方案实际上是`javax.swing.Timer`

```
public class Blinky {

    public static void main(String[] args) {
        new Blinky();
    }

    public Blinky() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BlinkyPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    protected class BlinkyPane extends JPanel {

        private JLabel blinkyLabel;
        private boolean blink = false;

        public BlinkyPane() {
            setLayout(new GridBagLayout());
            blinkyLabel = new JLabel("I'm blinking here");
            blinkyLabel.setBackground(Color.RED);
            add(blinkyLabel);

            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    blink = !blink;
                    if (blink) {
                        blinkyLabel.setForeground(Color.YELLOW);
                    } else {
                        blinkyLabel.setForeground(Color.BLACK);
                    }
                    blinkyLabel.setOpaque(blink);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 100);
        }

    }

} 
```

您可以查看 Swing 中的[Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)和[并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:23:36.623

如果您在 EDT（事件调度线程）之外访问 GUI 组件，那么您可能会遇到奇怪的问题，相反，如果您在 EDT 中执行长时间运行的任务，那么您也会遇到问题。

查看[这篇](https://stackoverflow.com/questions/9507685/gui-threading-in-java-and-swingutilities)文章以获取更多信息`GUI Threading in Java`

# java - Java 崩溃与 play 框架

> ID：13779393
> 
> 赞同：2
> 
> 时间：2012-12-08T16:29:27.927
> 
> 标签：java, playframework, playframework-1.x

我正在将 Play Framework 用于项目，并且一旦我运行网站 Java 崩溃。

我试图解决这个问题，并发现当我摆脱一些 CRUD 类时，应用程序正在工作，但是当这些 CRUD 类在项目中时，应用程序崩溃了。

我查看了日志文件，发现 PSPermGen 的使用率为 99% 。所以我在命令行中添加了这些选项：

```
-XX:MaxPermSize=512M -XX:PermSize=256M -Xms1024M -Xmx4096M 
```

然后我看到 PSYoungGen 的使用率为 99% 。所以我增加了堆大小。

现在应用程序仍然崩溃，但我不知道为什么。

你能帮我找出问题吗？

这是崩溃日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006af328cf, pid=2440, tid=1796
#
# JRE version: 7.0_02-b13
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22.0-b10 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# V  [jvm.dll+0x3e28cf]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x000000000748c000):  JavaThread "C2 CompilerThread0" daemon [_thread_in_native, id=1796, stack(0x0000000008a70000,0x0000000008b70000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x0000000000000008

Registers:
RAX=0x0000000000000000, RBX=0x0000000008b6ce60, RCX=0x000000000b1a4720, RDX=0x0000000000000000
RSP=0x0000000008b6c010, RBP=0x0000000008b6c1c0, RSI=0x000000000c9e64f8, RDI=0x0000000000000000
R8 =0x000000000bf83bf0, R9 =0x0000000000002000, R10=0x0000000009b260d0, R11=0x0000000000000000
R12=0x000000000ac66560, R13=0x000000000a2f1c28, R14=0x0000000008b6c0e0, R15=0x0000000008b6c100
RIP=0x000000006af328cf, EFLAGS=0x0000000000010206

Top of Stack: (sp=0x0000000008b6c010)
0x0000000008b6c010:   0000000008b6ce60 000000000ac66560
0x0000000008b6c020:   000000000b4711b0 0000000000000000
0x0000000008b6c030:   000000000ac66560 0000000000000002
0x0000000008b6c040:   000000000a2f8b88 000000006af33389
0x0000000008b6c050:   0000000008b6c1c0 00000000000001a0
0x0000000008b6c060:   0000000008b6c148 0000000008b6c1c0
0x0000000008b6c070:   0000000000000020 000000000a261450
0x0000000008b6c080:   0000000000000000 000000000000c020
0x0000000008b6c090:   00000000091008b0 0000000008b6c1c0
0x0000000008b6c0a0:   0000000007477a10 0000000000000002
0x0000000008b6c0b0:   0000000008b6ce60 000000006af354f7
0x0000000008b6c0c0:   0000000008b6ce60 0000000000000001
0x0000000008b6c0d0:   0000000000000002 0000000008b6c148
0x0000000008b6c0e0:   0000000007477a10 0000000000000200
0x0000000008b6c0f0:   0000000009aebc10 00000000000001a1
0x0000000008b6c100:   000000006b0944f8 0000000007477a10 

Instructions: (pc=0x000000006af328cf)
0x000000006af328af:   48 3b f0 0f 84 87 01 00 00 44 8b 4b 28 0f 1f 40
0x000000006af328bf:   00 41 8b 53 28 4c 8b 83 e0 09 00 00 4d 8b 1c d0
0x000000006af328cf:   49 8b 43 08 48 39 38 75 2d 0f 1f 84 00 00 00 00
0x000000006af328df:   00 41 8b 43 28 41 3b c1 73 0c 8b c8 48 8b 43 30 

Register to memory mapping:

RAX=0x0000000000000000 is an unknown value
RBX=0x0000000008b6ce60 is pointing into the stack for thread: 0x000000000748c000
RCX=0x000000000b1a4720 is an unknown value
RDX=0x0000000000000000 is an unknown value
RSP=0x0000000008b6c010 is pointing into the stack for thread: 0x000000000748c000
RBP=0x0000000008b6c1c0 is pointing into the stack for thread: 0x000000000748c000
RSI=0x000000000c9e64f8 is an unknown value
RDI=0x0000000000000000 is an unknown value
R8 =0x000000000bf83bf0 is an unknown value
R9 =0x0000000000002000 is an unknown value
R10=0x0000000009b260d0 is an unknown value
R11=0x0000000000000000 is an unknown value
R12=0x000000000ac66560 is an unknown value
R13=0x000000000a2f1c28 is an unknown value
R14=0x0000000008b6c0e0 is pointing into the stack for thread: 0x000000000748c000
R15=0x0000000008b6c100 is pointing into the stack for thread: 0x000000000748c000

Stack: [0x0000000008a70000,0x0000000008b70000],  sp=0x0000000008b6c010,  free space=1008k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0x3e28cf]

Current CompileTask:
C2:   8440  433             jregex.Pretokenizer::next (1064 bytes)

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000000009196000 JavaThread "play-thread-1" [_thread_in_vm, id=4736, stack(0x000000000b020000,0x000000000b120000)]
  0x0000000009195800 JavaThread "New I/O  worker #1" [_thread_in_native, id=8988, stack(0x000000000ad20000,0x000000000ae20000)]
  0x0000000009195000 JavaThread "DestroyJavaVM" [_thread_blocked, id=7500, stack(0x0000000002690000,0x0000000002790000)]
  0x0000000009194000 JavaThread "New I/O server boss #1 ([id: 0x09981537, /0:0:0:0:0:0:0:0:9000])" [_thread_in_native, id=10084, stack(0x000000000ae60000,0x000000000af60000)]
  0x000000000749c800 JavaThread "Service Thread" daemon [_thread_blocked, id=10052, stack(0x0000000008de0000,0x0000000008ee0000)]
  0x0000000007491000 JavaThread "C2 CompilerThread1" daemon [_thread_in_native, id=5876, stack(0x0000000008c60000,0x0000000008d60000)]
=>0x000000000748c000 JavaThread "C2 CompilerThread0" daemon [_thread_in_native, id=1796, stack(0x0000000008a70000,0x0000000008b70000)]
  0x0000000007481800 JavaThread "JDWP Event Helper Thread" daemon [_thread_blocked, id=8056, stack(0x0000000007de0000,0x0000000007ee0000)]
  0x0000000007461800 JavaThread "JDWP Transport Listener: dt_socket" daemon [_thread_in_native, id=10236, stack(0x00000000088b0000,0x00000000089b0000)]
  0x000000000744a800 JavaThread "Attach Listener" daemon [_thread_blocked, id=7488, stack(0x0000000008430000,0x0000000008530000)]
  0x0000000007449800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=9784, stack(0x0000000008280000,0x0000000008380000)]
  0x00000000073c7000 JavaThread "Finalizer" daemon [_thread_blocked, id=9732, stack(0x0000000008110000,0x0000000008210000)]
  0x00000000073be800 JavaThread "Reference Handler" daemon [_thread_blocked, id=10176, stack(0x0000000008010000,0x0000000008110000)]

Other Threads:
  0x00000000073b3000 VMThread [stack: 0x0000000007f00000,0x0000000008000000] [id=5040]
  0x00000000074e1000 WatcherThread [stack: 0x0000000008ff0000,0x00000000090f0000] [id=9196]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 305856K, used 243524K [0x00000007aaab0000, 0x00000007c0000000, 0x0000000800000000)
  eden space 262208K, 92% used [0x00000007aaab0000,0x00000007b9881190,0x00000007baac0000)
  from space 43648K, 0% used [0x00000007bd560000,0x00000007bd560000,0x00000007c0000000)
  to   space 43648K, 0% used [0x00000007baac0000,0x00000007baac0000,0x00000007bd560000)
 PSOldGen        total 699072K, used 0K [0x0000000700000000, 0x000000072aab0000, 0x00000007aaab0000)
  object space 699072K, 0% used [0x0000000700000000,0x0000000700000000,0x000000072aab0000)
 PSPermGen       total 262144K, used 23512K [0x00000006e0000000, 0x00000006f0000000, 0x0000000700000000)
  object space 262144K, 8% used [0x00000006e0000000,0x00000006e16f62a0,0x00000006f0000000)

Code Cache  [0x0000000002790000, 0x0000000002ab0000, 0x0000000005790000)
 total_blobs=1005 nmethods=418 adapters=547 free_code_cache=46058Kb largest_free_block=47116160

Dynamic libraries:
0x000000013f8e0000 - 0x000000013f913000     D:\Program Files\Java\jdk1.7.0_02\bin\java.exe
0x0000000076cd0000 - 0x0000000076e79000     C:\Windows\SYSTEM32\ntdll.dll
0x00000000765f0000 - 0x000000007670f000     C:\Windows\system32\kernel32.dll
0x000007fefd280000 - 0x000007fefd2ec000     C:\Windows\system32\KERNELBASE.dll
0x000007fefdcf0000 - 0x000007fefddcb000     C:\Windows\system32\ADVAPI32.dll
0x000007fefda10000 - 0x000007fefdaaf000     C:\Windows\system32\msvcrt.dll
0x000007fefed80000 - 0x000007fefed9f000     C:\Windows\SYSTEM32\sechost.dll
0x000007fefdbc0000 - 0x000007fefdced000     C:\Windows\system32\RPCRT4.dll
0x0000000076bd0000 - 0x0000000076cca000     C:\Windows\system32\USER32.dll
0x000007fefdb50000 - 0x000007fefdbb7000     C:\Windows\system32\GDI32.dll
0x000007fefd7d0000 - 0x000007fefd7de000     C:\Windows\system32\LPK.dll
0x000007fefde80000 - 0x000007fefdf49000     C:\Windows\system32\USP10.dll
0x000007fefb8d0000 - 0x000007fefbac4000     C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_fa396087175ac9ac\COMCTL32.dll
0x000007fefd910000 - 0x000007fefd981000     C:\Windows\system32\SHLWAPI.dll
0x000007fefeda0000 - 0x000007fefedce000     C:\Windows\system32\IMM32.DLL
0x000007fefd7e0000 - 0x000007fefd8e9000     C:\Windows\system32\MSCTF.dll
0x000000006e340000 - 0x000000006e411000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\msvcr100.dll
0x000000006ab50000 - 0x000000006b22a000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\server\jvm.dll
0x000007fef9a90000 - 0x000007fef9a99000     C:\Windows\system32\WSOCK32.dll
0x000007fefddd0000 - 0x000007fefde1d000     C:\Windows\system32\WS2_32.dll
0x000007fefd500000 - 0x000007fefd508000     C:\Windows\system32\NSI.dll
0x000007fefa8f0000 - 0x000007fefa92b000     C:\Windows\system32\WINMM.dll
0x0000000076e90000 - 0x0000000076e97000     C:\Windows\system32\PSAPI.DLL
0x0000000073180000 - 0x000000007318f000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\verify.dll
0x000000006ead0000 - 0x000000006eaf8000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\java.dll
0x000000006cac0000 - 0x000000006caf5000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\jdwp.dll
0x000000006ca90000 - 0x000000006cab3000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\instrument.dll
0x0000000071000000 - 0x0000000071008000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\npt.dll
0x0000000073110000 - 0x0000000073125000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\zip.dll
0x0000000071010000 - 0x0000000071019000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\dt_socket.dll
0x000007fefc9a0000 - 0x000007fefc9f5000     C:\Windows\system32\mswsock.dll
0x000007fefc2f0000 - 0x000007fefc2f7000     C:\Windows\System32\wshtcpip.dll
0x0000000073080000 - 0x0000000073099000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\net.dll
0x000007fefc990000 - 0x000007fefc997000     C:\Windows\System32\wship6.dll
0x0000000070c40000 - 0x0000000070c51000     D:\Program Files\Java\jdk1.7.0_02\jre\bin\nio.dll
0x000007fefca00000 - 0x000007fefca17000     C:\Windows\system32\CRYPTSP.dll
0x000007fefc700000 - 0x000007fefc747000     C:\Windows\system32\rsaenh.dll
0x000007fefc430000 - 0x000007fefc44e000     C:\Windows\system32\USERENV.dll
0x000007fefd130000 - 0x000007fefd13f000     C:\Windows\system32\profapi.dll
0x000007fefd060000 - 0x000007fefd06f000     C:\Windows\system32\CRYPTBASE.dll

VM Arguments:
jvm_args: -javaagent:D:\Projects\foo\Lib\play-custom\framework/play-master-localbuild.jar -XX:MaxPermSize=512M -XX:PermSize=256M -Xms1024M -Xmx4096M -XX:-UseSplitVerifier -Dfile.encoding=utf-8 -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n -Dplay.debug=yes -Dapplication.path=D:\Projects\foo\Jeu -Dplay.id= 
java_command: play.server.Server 
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=D:\Program Files\Java\jdk1.7.0_02
CLASSPATH=.;C:\Program Files (x86)\Java\jre7\lib\ext\QTJava.zip
PATH=C:\Program Files (x86)\...........
USERNAME=Fabien
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 30 Stepping 5, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 , 64 bit Build 7601 Service Pack 1

CPU:total 8 (4 cores per cpu, 2 threads per core) family 6 model 30 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht

Memory: 4k page, physical 12513668k(7766556k free), swap 25025484k(19054484k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (22.0-b10) for windows-amd64 JRE (1.7.0_02-b13), built on Nov 17 2011 13:51:15 by "java_re" with unknown MS VC++:1600

time: Sat Dec 08 16:25:25 2012
elapsed time: 8 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:35:14.117

看来您遇到了 JVM 错误。我使用一些谷歌找到了以下内容：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7064302](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7064302)

解决方案：将 JVM 更新到当前版本。

# javascript - 在 iframe 中使用 onLoad 函数

> ID：13779397
> 
> 赞同：0
> 
> 时间：2012-12-08T16:29:39.403
> 
> 标签：javascript, xslt, iframe

我正在调整 w3shools [“客户端上的 XSLT”](http://www.w3schools.com/xsl/xsl_client.asp)教程以通过 JavaScript 运行 XSLT 转换，但我已对其进行了修改以显示结果，`div`而不是在网站上的标记中。这是他们的代码：

```
<body onload="displayResult()">
<div id="example" />
</body> 
```

这是我的：

```
<div class="Tables_Wrapper">
<iframe onload="displayResult()">
<div id="example" />
</iframe>
</div> 
```

我的页面不会呈现次要的`div`. 它创建`iframe`但它是空的。

我在这方面很陌生，并且在学习中——我不太了解 JavaScript，所以我只是完全按照 w3schools 网站上的内容复制它。当我将标签保持原样时，它工作得很好`body onload`，除了没有出现在我希望它出现在我的 HTML 页面上的位置之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:35:33.173

首先，创建一个新页面`Test.html`并将 div 放入其中。然后，像这样修改 iFrame：

```
<iframe onload="displayResult()" id="iframeId" src="Test.html">
</iframe>​ 
```

然后，像这样修改JS：

```
function displayResult() {
    xml = loadXMLDoc("cdcatalog.xml");
    xsl = loadXMLDoc("cdcatalog.xsl");

    var iframe = document.getElementById('iframeId');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    // code for IE
    if (window.ActiveXObject) {
        ex = xml.transformNode(xsl);
        innerDoc.getElementById("example").innerHTML = ex;
    }
    // code for Mozilla, Firefox, Opera, etc.
    else if (document.implementation && document.implementation.createDocument) {
        xsltProcessor = new XSLTProcessor();
        xsltProcessor.importStylesheet(xsl);
        resultDocument = xsltProcessor.transformToFragment(xml, document);
        innerDoc.getElementById("example").appendChild(resultDocument);
    }
}​ 
```

而已 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:39:47.670

jQuery 将支持 iframe 上的 onload 事件侦听器。

```
$(document).ready(function () {
    $('iframe').load(function () {
        process();
    });
    function process() {
        alert('iframe has now loaded!'); // substitute for the code you wish to run.
    }
}); 
```

但是，将 iframe 视为网页中的一个“洞”，您可以“看穿”外部内容。因此，除非 iframe 不受支持，否则 iframe 中的 HTML 代码将不会被呈现（在这种情况下，您可以给用户写一条消息，例如：对不起，您的浏览器不支持此内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T22:37:44.543

很抱歉，我只是不明白为什么 iframe 会出现在这里。如果您只是想将 XML 文件的内容显示到您选择的 div（或您选择的*几乎任何其他元素）中，您可以使用以下代码来实现。*我为书籍使用了一个非常简单的 XML 文件。

**HTML**

```
<div id="example"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

**jQuery**

```
<script type="text/javascript">
$(document).ready(function () {  
    $.get('test.xml', function (data) {
        $('#example').html('<h1>Good Books</h1>');
        $(data).find('book').each(function () {
            var $book = $(this);
            var title = $book.attr('title');
            var html = "<br />";
            $('#example').append(title + html);
        });             
    });  
 }); 
</script> 
```

**XML**

```
<?xml version="1.0" encoding="utf-8" ?>
<books>
    <book title="Hamlet">
        <description>
        info goes here.
        </description>
        </book>
        <book title="In Search of Lost Time">
        <description>
        info goes here.
        </description>
        </book>
        <book title="The Adventures of Huckleberry Finn">
        <description>
        info goes here.
        </description>
</book>
</books> 
```

除了 iframe 之外，上述内容几乎适用于任何东西。

# r - Emacs ESS 评估比正常 R 慢

> ID：13779399
> 
> 赞同：4
> 
> 时间：2012-12-08T16:29:48.240
> 
> 标签：r, emacs, ess

对你来说，ESS 的 R 模式是否也比普通的 R 慢？大多数情况下，文本会非常缓慢地发送到另一个缓冲区。

这是正常的还是我的设置有问题？

如建议：

```
sessionInfo()

R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] compiler_2.15.1 tools_2.15.1 
```

我的自定义`.el`文件`R`： http: [//pastebin.com/WrUxBAyG](http://pastebin.com/WrUxBAyG)

希望有人知道可能发生了什么。

编辑：我实际上尝试禁用所有这些 R 包，它们似乎不是问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T17:40:56.573

```
(setq ess-eval-visibly-p nil) 
```

解决了[这里提到的慢代码块的问题](https://stat.ethz.ch/pipermail/ess-help/2011-March/006734.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:34:20.370

取决于你在做什么。如果你正在执行一个长时间运行的命令，`C-c C-c`它可能会出现。

有时文本在处理完成之前不会被写入`R`缓冲区。

对于简单的命令，它不应该明显变慢。谷歌搜索会告诉你一堆其他人处理类似的问题。但如果没有更多信息，我们无法告诉您更多信息！

-- 已编辑，因此可以更改接受。

# php - 我想在 php 中使用 c# web 服务 (*.asmx) 和 jquery

> ID：13779401
> 
> 赞同：0
> 
> 时间：2012-12-08T16:30:07.893
> 
> 标签：php, jquery, service, web, asmx

我想通过 jQuery 在 php 中使用 c# web 服务 (*.asmx)。
我的网络服务是：
[http](http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit)
://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit ，我的 php 代码是：

```
 $.ajax({
      type: "POST",
      url: "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit",
      dataType: 'text/xml; charset=utf-8',
      success: function(data) {alert('ok')},
      error  : function(e) {alert('error')}
    }); 
```

但它不起作用。
我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:32:36.463

您违反了浏览器内置的[相同来源策略限制。](http://en.wikipedia.org/wiki/Same_origin_policy)您不能发送跨域 AJAX 请求。如果您希望它工作，ASMX Web 服务必须位于与托管此 javascript 代码的 PHP 页面相同的域中。在这个例子中，这将是`http://www.w3schools.com/`.

如果您尝试使用的服务位于远程域上，您可以在您的域上编写一个 PHP 脚本，该脚本将使用远程服务（通过发送适当的 HTTP 请求），然后向该 PHP 脚本发送 AJAX 请求，而不是直接发送试图调用不可能的远程服务。新的 PHP 脚本将充当您的域和托管 ASMX 服务的远程域之间的桥梁。

当然，如果远程服务支持[JSONP](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，您可以直接使用它。开箱即用的 ASMX 服务并非如此。联系服务的作者，看看他是否支持他们。

# android - 如何获取 SSLCertificateSocketFactory 实例？

> ID：13779404
> 
> 赞同：2
> 
> 时间：2012-12-08T16:30:20.437
> 
> 标签：android, sockets, ssl

查看[SSLCertificateSocketFactory](http://developer.android.com/reference/android/net/SSLCertificateSocketFactory.html)文档，我看不到如何使用该工厂来获取这样的实例。

[我的意思是不推荐](http://developer.android.com/reference/android/net/SSLCertificateSocketFactory.html#SSLCertificateSocketFactory%28int%29)使用构造函数。推荐的[`getDefault()`](http://developer.android.com/reference/android/net/SSLCertificateSocketFactory.html#getDefault%28int%29)只是返回一个`SocketFactory`或一个`SSLSocketFactory`...

但是没有返回**SSLCertificateSocketFactory**的方法。

我想在某些用例中可以使用 SSLSocketFactory - 但我对使用 SSLCertificateSocketFactory 功能感兴趣`setTrustManagers()`，例如，可选地使用服务器证书的指纹进行验证。

因此我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:08:25.310

诚然，我不确定 SSLCertificateSocketFactory 的用途是什么，因为正如您所提到的，工厂并不完全符合人们的期望。当然，您可以按自己的方式进行类型转换，但为什么要这样做。

选择 SSLContext.getInstance("TLS") - 或者，如果您只针对 API 9 及更高版本，则使用 getDefault() - 并使用 SSLContext.init() 来设置 TrustManager，就像其他人显然所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:40:41.140

请参阅 matheszabi 建议的链接

```
protected org.apache.http.conn.ssl.SSLSocketFactory createAdditionalCertsSSLSocketFactory() {
try {
    final KeyStore ks = KeyStore.getInstance("BKS");

    // the bks file we generated above
    final InputStream in = context.getResources().openRawResource( R.raw.mystore);  
    try {
        // don't forget to put the password used above in strings.xml/mystore_password
        ks.load(in, context.getString( R.string.mystore_password ).toCharArray());
    } finally {
        in.close();
    }

    return new AdditionalKeyStoresSSLSocketFactory(ks);

} catch( Exception e ) {
    throw new RuntimeException(e);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:33:57.333

不确定您想做什么，这对所有解决方案都没有好处。

一个信任每个人的解决方案，它在[这里](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)，你可以弄清楚你需要修改什么。

我希望它有帮助！

# silverlight - Silverlight CallMethodAction

> ID：13779405
> 
> 赞同：0
> 
> 时间：2012-12-08T16:30:26.830
> 
> 标签：silverlight

如何获得这个 CallMethodAction 方法 InitBlah？目前它不火。我怀疑它的签名是错误的：

```
<Grid x:Name="LayoutRoot">
    <Button x:Name="btnEnter" Content="Enter" HorizontalAlignment="Left" Height="48" Margin="96,88,0,0" VerticalAlignment="Top" Width="144">
        <interactivity:Interaction.Triggers>
            <interactivity:EventTrigger EventName="MouseEnter" SourceName="btnEnter">
                <interactions:ChangePropertyAction PropertyName="Visibility" Value="Visible" TargetName="TextBoxTest" />
                <interactions:CallMethodAction MethodName="InitBlah" TargetObject="{Binding}"/>
            </interactivity:EventTrigger>

            <interactivity:EventTrigger EventName="MouseLeave" SourceName="btnEnter">
                <interactions:ChangePropertyAction PropertyName="Visibility" Value="Collapsed" TargetName="TextBoxTest" />
            </interactivity:EventTrigger>
        </interactivity:Interaction.Triggers>
    </Button>

    <Grid>
        <TextBlock Name="TextBoxTest" Width="100" Height="100" Visibility="Collapsed">Hello</TextBlock> 
```

后面的代码：

```
 public void InitBlah(object sender, RoutedEventArgs e)
        {
            var x = 1;
        } 
```

ChangePropertyAction 工作正常：当我将鼠标悬停在按钮上时，会弹出文本框打招呼。

![在此处输入图像描述](../Images/3be813dd4c497aaed73ec3a489a6c15f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:49:24.360

您的方法的签名`InitBlah`应该与适当的事件相匹配。试试这个：

```
public void InitBlah(object sender, MouseEventArgs e)
{
    var x = 1;
} 
```

# asp.net-mvc - 控制器操作多次命中 - 在 Azure 模拟器中运行的 ASP.NET MVC 4 应用程序

> ID：13779410
> 
> 赞同：7
> 
> 时间：2012-12-08T16:30:38.720
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, visual-studio-debugging

这可能需要一些时间来解释，但我走了:)。

我创建了两个 Visual Studio 2012 项目：

1.  在 Visual Studio 的“*添加项目”*对话框中使用（Web -> ASP.NET MVC 4 Web 应用程序）模板的项目。我没有添加单元测试项目。
2.  使用 Azure 云服务模板（云 -> Windows Azure 云服务）的项目。我添加了一个角色，一个 ASP.NET MVC 4 Web 角色，并且再次没有添加单元测试项目。

我让这两个项目完全不受 Visual Studio 为我创建它们的方式所影响。

对于*每个*项目，然后我去上课并在每个和操作方法`HomeController`中设置一个断点（仅返回一个视图的无聊操作）。例如，我在方法中的唯一行设置了一个断点：`About``Contact`

```
public ActionResult About()
{
     return View();
} 
```

然后我开始调试第一个项目（非 Azure 项目）。一切都如预期 - 即当我使用浏览器在 About 和 Contact 页面之间导航时，各个操作方法中的断点将在每个请求上被命中一次。对我来说似乎很好。

然后我开始调试 Azure 项目。我遵循了在 About 和 Contact 页面之间导航的相同程序。这次我发现了有趣的非确定性行为。在某些请求中，action 方法中的断点会在页面呈现之前被多次（有时超过两次）命中。有时请求会挂起并且页面不会呈现（即使在等待几分钟后）。

我想知道为什么会发生这种情况，因为它会影响我们正在处理的另一个 Azure MVC 应用程序中更复杂的事情（例如，由于这个问题，应用程序可能会尝试在我的数据库用于一个请求）。

我在以下环境中：

*   视窗 8 专业版 (x64)
*   Visual Studio 2012 终极版
*   适用于 Visual Studio 2012 的 Windows Azure SDK
*   IIS 8 速成版
*   带有 Firebug 的 Firefox 浏览器（也确认了使用 IE 的行为）
*   SQL Server 2012（我猜不是很相关）

我注意到的唯一有趣的事情是，每当我调试 Azure 项目时，Visual Studio的“*输出”窗口中都会出现以下警告消息：*

> 将角色“My_Web_Role_Name”中的专用端口 80 重新映射到 81，以避免在模拟期间发生冲突。

也许这种重新映射与它有关。再一次，在做了之后，`netstat -ano`我看到 Azure Development Fabric 进程正在侦听端口 80，所以也许这就是它需要重新映射的原因......听起来很公平。

无论如何，我希望有人可能对导致这种行为的原因有所了解。以下是我尝试的一些额外要点和方法：

*   重置 IIS，重启 Azure Compute/Storage 模拟器，重启整个机器
*   剥离所有脚本的视图（即，如果页面上只有一个基本的 HTML 段落，行为仍然存在）
*   我试图找到相关的 IIS Express 日志文件，但似乎 Azure 项目不像其他项目那样通过 IIS Express 运行（对吗？）。
*   我监控了 Azure Compute Emulator 控制台……那里没什么有趣的。

所以......最后，一些问题：

*   其他人可以重现这种行为吗？
*   Azure 模拟器生成的其他日志是否可以帮助我？

我真的很感激在这里朝着正确的方向前进:)。

干杯!

**编辑**

这里有一些更多信息（我正在更新这个问题，因为我继续调试这个问题）：

`About`我决定在不调试的情况下运行该解决方案，并在 the和action 方法中放入了一些简单的调试消息`Contact`，例如：

```
public ActionResult About()
{
     System.IO.File.AppendAllText(@"c:\Logs\azure.log", DateTime.Now + ": Contact, thread " + System.Threading.Thread.CurrentThread.ManagedThreadId + "\r\n");
     return View();
} 
```

[我将Tail](http://tailforwin32.sourceforge.net/)附加到该文件，并启动了[Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)以查看 HTTP 上发生了什么。再次在两者`About`和`Contact`链接之间导航，我看到了以下输出：

从尾巴：

*   ...
*   2012 年 9 月 12 日下午 12:14:07：关于，线程 7
*   2012 年 9 月 12 日下午 12:14:08：联系，线程 7
*   2012 年 9 月 12 日下午 12:14:09：关于，线程 7
*   2012 年 9 月 12 日下午 12:14:10：联系，线程 7
*   2012 年 9 月 12 日下午 12:14:11：关于，线程 6
*   **2012 年 9 月 12 日下午 12:14:12：联系，线程 8**
*   **2012 年 9 月 12 日下午 12:14:31：联系，线程 7**
*   **2012 年 9 月 12 日下午 12:14:50：联系，线程 7**
*   2012 年 9 月 12 日下午 12:15:03：关于，线程 7
*   2012 年 9 月 12 日下午 12:15:05：联系，线程 8
*   **2012 年 9 月 12 日下午 12:15:23：关于，线程 6**
*   **2012 年 9 月 12 日下午 12:15:42：关于，线程 14**
*   **2012 年 9 月 12 日下午 12:16:01：关于，线程 6**
*   2012 年 9 月 12 日下午 12:16:31：联系，线程 7
*   2012 年 9 月 12 日下午 12:16:33：关于，线程 14
*   ...
*   2012 年 9 月 12 日下午 12:17:08：联系，线程 12
*   **2012 年 9 月 12 日下午 12:17:09：关于，线程 12**
*   **2012 年 9 月 12 日下午 12:17:28：关于，线程 5**
*   ...

来自 Fiddler 的相同请求（请注意，我也一直在玩弄我的角色端点设置，但无济于事）：

![显示 HTTP 流量的 Fiddler 屏幕截图](../Images/bfc492605c4073740f9a55dc6ed4d2e8.png)

所以......这里的带回家的信息是：

*   HTTP 流量看起来很正常（Fiddler 没有显示任何重复的请求）
*   有时，对于同一个请求，动作方法会被调用两次或三次，看起来是不确定的（即上面描述的原始问题）
*   有趣的是，在我的情况下，似乎**恰好**19 秒后发生另一个“命中”动作方法（即，当动作方法被多次命中时，命中之间的时间差是确定性的）
*   每当多次点击操作方法时，每次点击的线程 ID 通常都不同

我会继续深入挖掘......也许有人会根据这个更新的信息提供建议:)。

**编辑 2** 我决定在每种情况下都打印出进程 ID 以及 action 方法中的线程 ID。对于每个请求，进程 ID 都是对应于 IIS Express 工作进程的 ID。因此，似乎 IIS Express 工作进程有时会产生多个线程来处理请求，每个线程相隔 19 秒。

...而且我更深入... :)

**编辑 3**

我想我离问题越来越近了……我查看了 IIS Express 托盘，在启动应用程序后看到了以下内容（没有调试）：

![IIS Express 窗口显示在 Web 角色下运行的 IIS 应用程序](../Images/5886cfbab7eead07c147c0471565408a.png)

我决定直接使用这个 URL（而不是上面 Fiddler 中显示的 127.0.0.2:8888），问题似乎消失了。这现在开始变得有意义了……如果我直接通过端口 8889 调用 IIS 应用程序，那么一切都可以正常工作，就像它在原始非 Azure 项目中所做的那样。如果我通过端口 8888 调用 Web 角色（即特定于 Azure 的部分），有时它似乎会多次调用 IIS 应用程序。

所以我现在开始缩小对网络角色的关注。我会尝试看看是否可以找到一些相关的网络角色日志...

**编辑 4**

我确保在应用程序[上正确设置了诊断](http://msdn.microsoft.com/en-us/magazine/ff714589.aspx)并在调试模式下运行它。然后我转到 Azure Compute Emulator UI，右键单击我的 Web 角色实例，然后选择“打开本地存储”。这把我带到了资源管理器，在那里我能够找到一个子文件夹“temp\temp\RoleTemp\iisexpress”，其中有一个日志文件，其内容看起来像这样（请注意，我已将端点更改回端口 80 ，所以 IIS Express 应用程序现在回到端口 81）：

*   请求开始：“GET”127.0.0.1:81/Home/About
*   请求结束：127.0.0.1:81/Home/About，HTTP 状态为 200.0
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/About**
*   **请求结束：127.0.0.1:81/Home/About，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/About**
*   **请求结束：127.0.0.1:81/Home/About，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/About**
*   **请求结束：127.0.0.1:81/Home/About，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   **请求开始：“GET”127.0.0.1:81/Home/Contact**
*   **请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0**
*   请求开始：“GET”127.0.0.1:81/Home/About
*   请求结束：127.0.0.1:81/Home/About，HTTP 状态为 200.0
*   请求开始：“GET”127.0.0.1:81/Home/Contact
*   请求结束：127.0.0.1:81/Home/Contact，HTTP 状态为 200.0

同样，我只是在 About 和 Contact 页面之间切换，因此从日志中可以看到单个 Web 角色端点请求有时会导致 Web 角色多次调用 IIS 应用程序。现在搜索一些更高级别的网络角色日志，以找出它为什么这样做:)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:24:23.127

因此，根据我在原始帖子的各种编辑中所写的内容：

*   至少在我的机器上，DevFC.exe 进程（开发结构，Azure 计算模拟器）有时会从 IIS Express 生成多个对所请求资源的请求。也就是说，它会在模拟器端点上接受一个请求，有时会一个接一个地向底层 IIS Express 应用程序产生多个请求，即使它们都以 HTTP 状态代码 200 成功。这些产生的请求之间的时间差似乎保持不变，但除此之外，行为似乎是不确定的（即，并非对模拟器端点的每个请求都发生这种情况）。
*   为了调试它，我需要访问 Azure 计算模拟器的源代码，我猜我无法获得。

现在，我的理论（和希望）是这种行为在某种程度上特定于我的开发环境，并且不会在真正的 Azure 基础架构上重现。也就是说，我想出了一个解决方法......

我为 Firefox 创建了一个简单的代理文件，以将所有流向本地 Azure 模拟器端口的流量重定向到 IIS Express 应用程序端口。这解决了这个问题，但是我知道我现在基本上绕过了 Azure 模拟器，而且我猜我将来可能会遇到问题，因为我正在这样做（例如，如果我决定使用 AppFabric 缓存？ ）！

同时，我将继续使用此解决方法进行开发，并定期部署到我的 Azure 暂存环境进行测试。

无论如何，如果有人知道我如何解决基本问题，请告诉我！:)

编辑：我不再能够使用 Azure SDK 工具 2.2 版重现该问题。如果您仍然看到此行为，请尝试升级！

# php - 如何在通用 Symfony2 库中引用用户对象？

> ID：13779414
> 
> 赞同：1
> 
> 时间：2012-12-08T16:31:18.170
> 
> 标签：php, symfony, orm, doctrine, bundle

当创建一个不仅仅用于一个应用程序的包时，而是考虑到更通用的用途，比如说一个 ChatBundle，我总是遇到同样的问题，即如何使用在许多情况下当然需要的用户对象（比如在聊天）。

在仅在一个应用程序中使用的包中，我只需硬编码对我的主包的引用，如下所示：

```
<?php
namespace Acme\ChatBundle\Entity;

/**
 * @ORM\Entity
 */
class Message
{
    /**
     * @ORM\ManyToOne(targetEntity="Acme\ProjectBundle\User")
     */
    private $user;
... 
```

但在通用捆绑包中这是不可能的。是让开发者自己实现所有实体的唯一方法吗？有没有最佳实践？除了其他捆绑包的代码外，我找不到任何关于该主题的文档或博客文章（但它们中的大多数都非常复杂和抽象，很难掌握其中的主要问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:10:31.900

我认为这里最好的解决方案是使用[Doctrine 的 TargetEntityListener](http://tim.nagel.com.au/symfony2/doctrine2/using-doctrines-resolvetargetentitylistener/)

# objective-c - 如何在调用 NSFetchedResultsController 方法之前确保 UIManagedDocument 准备就绪？

> ID：13779415
> 
> 赞同：0
> 
> 时间：2012-12-08T16:31:21.123
> 
> 标签：objective-c, ios, nsfetchedresultscontroller, uimanageddocument

我完全坚持这个。我的基本问题是我的：

```
 - (NSFetchedResultsController *)fetchedResultsController 
```

方法在尝试读取我的核心核心实体时崩溃，因为 managedObjectContext / UIManagedDocument 为零。目前我认为这是因为我的 UIManagedDocument 没有打开/准备好。所以在过去的 3 个小时里，我一直在努力做到这一点，以便在文档打开之前不会触发我的委托方法。

这是我用来获取文档的代码：

```
 if (!self.document) {
    [[CATManagedDocumentHandler sharedDocumentHandler] performWithDocument:^(UIManagedDocument *document) {
        self.document = document;         
    }];
} 
```

这在我的应用程序的任何其他地方都可以正常工作，但对于我的 tableView 中的委托方法来说，打开过程似乎不够快。

到目前为止我看过的链接：

[http://omegadelta.net/2011/05/10/how-to-wait-for-ios-methods-with-completion-blocks-to-finish/](http://omegadelta.net/2011/05/10/how-to-wait-for-ios-methods-with-completion-blocks-to-finish/)

[执行代码块代替@selector](https://stackoverflow.com/questions/11318519/executing-code-block-in-place-of-selector?rq=1)

[关于 dispatch_queue_t 和 dispatch_sync 的调用](https://stackoverflow.com/questions/11305450/about-calling-of-dispatch-queue-t-and-dispatch-sync)

[Grand Central Dispatch (GCD) 与 performSelector - 需要更好的解释](https://stackoverflow.com/questions/5225130/grand-central-dispatch-gcd-vs-performselector-need-a-better-explanation)

[GCD 在主线程中执行任务](https://stackoverflow.com/questions/5662360/gcd-to-perform-task-in-main-thread?lq=1)

[iOS - 如何在线程（使用 GCD）结束它的工作时收到通知](https://stackoverflow.com/questions/7077589/ios-how-to-be-notified-when-a-thread-using-gcd-ends-its-job?rq=1)

我试过：阻塞主线程直到我得到 NSNotification（在 CATManagedDocumentHandler 中设置）&阻塞主线程直到我得到一个块回调。

这些都不起作用。我的应用程序只是冻结。我想错了吗？如何让委托方法等到我的文档打开/准备好？或者我应该采取不同的方法吗？

谢谢

卡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:03:39.297

好的，当您的应用程序第一次启动时，我建议检查 1\. 您的数据库是否存在（如果不存在，则分配初始化它）和 2\. 如果文档不存在（在磁盘上），是否已关闭或打开.

你可以这样做：

看起来您正在为您的数据库使用单例，因此当您的第一个视图控制器出现时，检查托管文档是否已被分配，因此在 ViewWillAppear 中：

```
if (!dataBase)
{
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Your DB Name"];
        self.dataBase=[[UIManagedDocument alloc]initWithFileUrl:url];
} 
```

所以现在如果数据库（UIManagedDocument）已经被分配，它仍然不意味着实际的数据库文件已经在磁盘上创建。您必须按如下方式检查它（您可以在数据库的设置器或 ViewDidLoad 中执行此操作，但不要在另一个线程中执行此操作，因为它不起作用）

所以你在这里检查3个案例：不存在

```
if (![[NSFileManager defaultManager]fileExistsAtPath:[yourManagedDocumentFromSingleton.fileUrl path])
{
   [[NSFileManager defaultManager]fileExistsAtPath:[yourManagedDocumentFromSingleton saveToUrl:[[NSFileManager defaultManager]fileExistsAtPath:[yourManagedDocumentFromSingleton.fileUrl forSaveOperation:UIDocumentSaveForCreating completionHandler: 
^(BOOL success){ now you can use your uidocument and its managed object context}];
    } 
```

如果文件确实存在但已关闭：

```
else if (yourManagedDocumentFromSingleton.documentState==UIDocumentStateClosed)
{
[yourManagedDocumentFromSingleton openWithCompletionHandler:
^(BOOL success) {use your document here}];
} 
```

最后，如果文档已经打开，只需使用它：

```
else if (yourManagedDocumentFromSingleton.documentState=UIDocumentStateNormal)
{
//do whatever with the document
} 
```

需要提到的一件重要事情是 UIDocument 不是线程安全的。所以它必须在创建它的同一个线程中使用和检查（这里大概是主线程）。否则它将无法正常工作。

我不知道您的视图控制器或单例的确切结构，但如果您按照这些步骤操作，它将起作用。

PS。还要确保一旦您的文档启动并运行并且您正在向其中添加或删除项目，请在每次操作后保存它，以便您的 NSFetchedResultsController 得到更新。CoreData 确实有自动保存功能，但我发现我必须手动保存才能正常工作。您可以使用（从以前的方法）保存：

```
forSaveOperation:UIDocumentSaveForOverwriting 
```

# php - Zend Framework 1.0 设置Apache/Host 需求后无法查看index.php？

> ID：13779416
> 
> 赞同：0
> 
> 时间：2012-12-08T16:31:47.550
> 
> 标签：php, apache, zend-framework, virtualhost

**更新**：Apache 错误日志中出现以下错误...

```
[Sat Dec 08 16:41:39 2012] [error] [client 127.0.0.1] 
PHP Fatal error:  require_once(): 
Failed opening required 'Zend/Application.php' 
(include_path='/Library/WebServer/Documents/quickstart/library:.:/php/includes:/Users/markmcdonnell/Dropbox/Library/PHP/ZendFramework-1.12.0/library') 
in /Library/WebServer/Documents/quickstart/public/index.php on line 18 
```

我使用的是 Mac OSX 10.8.2 (Mountain Lion)，但在设置和运行 Zend 框架时遇到了问题（只是基本的快速入门）。

我正在使用 Apache 2.2.22

我的本地主机文件可以从 /Library/WebServer/Documents 访问

我也正在运行 PHP 5.3.15。

我通过命令行（使用 zf.sh 文件）创建了一个名为“quickstart”的新项目（根据 Zend 网站上的部分推荐），该项目存储在此处：/Library/WebServer/Documents/quickstart

我遵循了 Zend 官方网站的说明以及有关安装 Zend 的在线书籍：http: [//www.survivethedeepend.com/zendframeworkbook/en/1.0/creating.a.local.domain.using.apache.virtual.hosts](http://www.survivethedeepend.com/zendframeworkbook/en/1.0/creating.a.local.domain.using.apache.virtual.hosts)

我的 php.ini ( `/private/etc/php.ini`) 文件已更新为包含`library`ZendFramework 目录中文件夹的路径...

```
include_path = ".:/php/includes:/Users/<home>/Dropbox/Library/PHP/ZendFramework-1.12.0/library" 
```

我已经更新`/etc/apache2/httpd.conf`，所以它包括...

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

# Ensure "localhost" is preserved unchanged pointed
# to the default document root for our system.
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /Library/WebServer/Documents
</VirtualHost>

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    ServerName quickstart.local
    DocumentRoot /Library/WebServer/Documents/quickstart/public

    SetEnv APPLICATION_ENV "development"

    <Directory /Library/WebServer/Documents/quickstart/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

...我也更新`/etc/hosts`了，所以它包括...

```
127.0.0.1   localhost
127.0.0.1   quickstart.local 
```

我正在使用`sudo apachectl graceful`（我也使用过`sudo apachectl restart`）重新启动 Apache

因此，如果我现在尝试访问，`http://localhost/`我会看到我的`/Library/WebServer/Documents`目录，我可以看到 PHP 仍在运行，没有任何问题。但是，如果我尝试访问，`http://quickstart.local/`我只会得到一个空页面？

任何人都可以建议问题可能是什么，我缺少什么以及我可以做些什么来显示初始的“欢迎”页面。

我确定我只是想念一个小人物，但这显然会导致基本页面无法显示的问题。

谢谢。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:13:34.580

可能是 Zend 文件和 Apache 进程之间的用户权限问题。

由于您可以使用 创建项目`zf.sh`，Zend 文件显然在那里。但是您通过 Apache 获得的失败表明 Zend 文件可能无法通过 Apache 进程（即运行 Apache 进程的用户）访问。

`$ chmod 0777 /Users/markmcdonnell/Dropbox/Library/PHP/ZendFramework-1.12.0/library`

去测试。

您可能会获得更少的扩展权限 -`0644`例如 - 但我承认我在这方面很糟糕。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:15:30.400

仅适用于可能遵循此方法的其他人。上面 Kamil 的回答会起作用，但会在 Apache 的安全配置之外打开一个安全漏洞。这很好，只要您知道它并且在 Apache 之上有另一层安全性。

解决问题的另一种方法是将 ZendFramework 放在根目录层次结构中的某个位置。像：DocumentRoot/Library/WebServer/Documents/ZendFramework-1.12.0/library 或 DocumentRoot/Library/WebServer/Documents/quickstart/public/ZendFramework-1.12.0/library Apache 服务器根目录中的任何路径。

# php - XLS（所有工作表）到 CSV 与 PHP

> ID：13779418
> 
> 赞同：0
> 
> 时间：2012-12-08T16:32:05.283
> 
> 标签：php, csv, xls

以下是我的 php 代码，它正在读取 .xls 文件并将其转换为 .csv。脚本工作得很好，但我面临的问题是它只适用于默认工作表。我一直在尝试做的是，应该修改以下脚本，使其从 .xls 文件中存在的所有工作表中读取数据，然后将输出保存到 data.csv。请让我知道我该怎么做。

谢谢，

我正在使用以下库：

[http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)

```
 require_once 'lib/reader.php';
    $excel = new Spreadsheet_Excel_Reader();
    $excel->setOutputEncoding('CP1251');
    $excel->read('Student.xls');
    $x=1;
    $sep = ",";
    ob_start();
    while($x<=$excel->sheets[0]['numRows']) {
     $y=1;
     $row="";
     while($y<=$excel->sheets[0]['numCols']) {
         $cell = isset($excel->sheets[0]['cells'][$x][$y]) ? $excel->sheets[0]['cells'][$x][$y] : '';
         $row.=($row=="")?"\"".$cell."\"":"".$sep."\"".$cell."\"";
         $y++;
     } 
     echo $row."\n"; 
     $x++;
    }
    $fp = fopen("data.csv",'a');
    fwrite($fp,ob_get_contents());
    fclose($fp);
    ob_end_clean();
echo "CSV file created successfully"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:38:19.280

您的代码使用 Excel 文件访问第一张工作表，`$excel->sheets[0]`因此您需要为每张工作表修改这些访问权限。像这样的东西：

```
$nbSheets = count($excel->sheets);
for($i = 0; $i < $nbSheets; $i++) {
    while($x<=$excel->sheets[$i]['numRows']) {
        $y=1;
        $row="";
        while($y<=$excel->sheets[$i]['numCols']) {
            $cell = isset($excel->sheets[$i]['cells'][$x][$y]) ? $excel->sheets[$i]['cells'][$x][$y] : '';
            $row.=($row=="")?"\"".$cell."\"":"".$sep."\"".$cell."\"";
            $y++;
        } 
        echo $row."\n"; 
        $x++;
    }
} 
```

# javascript - 获取要在 html5 画布上绘制的形状

> ID：13779419
> 
> 赞同：0
> 
> 时间：2012-12-08T16:32:22.560
> 
> 标签：javascript, html, canvas

我有一个函数，它基本上使用线条来绘制一个特定大小的伪圆并用颜色填充它。

但是，当我尝试调用我的方法时，它不会绘制，并且我在调试控制台（我使用的是 chrome）上没有发现任何错误，并且 jsfiddle 没有为我抛出任何错误。

这是代码：

```
function drawLineCircle (x, y, size, colour, scale, segments) {
    context.save();

    context.strokestyle = '#000000';
    context.fillStyle   = colour;
    context.lineWidth   = 3;

    context.beginPath();

    var anglePerSegment = Math.PI *2 / segments;

    for (var i = 0; i <= segments; i = i + 1){
        var angle  = anglePerSegment * i;
        var radius = size * scale;
        var a      = x + radius * cos (angle);
        var b      = y + radius * sin (angle);
        if (i == 0)
            context.moveTo (a, b);
        else
            context.lineTo (a, b);

    }

    context.stroke();
    context.fill();

    context.closePath();
    context.restore();
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:49:45.497

您的代码有几个问题：

1.  你没有定义`context`
2.  `cos`并且`sin`是`Math`

这是一个更正的示例：http: [//jsfiddle.net/REw7j/1/](http://jsfiddle.net/REw7j/1/)

```
function drawLineCircle (x, y, size, colour, scale, segments) {
    var canvas = document.getElementById('example');
    var context = canvas.getContext('2d');
    context.save();

    context.strokestyle = '#000000';
    context.fillStyle   = colour;
    context.lineWidth   = 3;

    context.beginPath();

    var anglePerSegment = Math.PI *2 / segments;

    for (var i = 0; i <= segments; i = i + 1){
        var angle  = anglePerSegment * i;
        var radius = size * scale;
        var a      = x + radius * Math.cos (angle);
        var b      = y + radius * Math.sin (angle);
        if (i == 0)
            context.moveTo (a, b);
        else
            context.lineTo (a, b);

    }

    context.stroke();
    context.fill();

    context.closePath();
    context.restore();
} 
```

# javascript - 加等于运算符每次增加值

> ID：13779421
> 
> 赞同：3
> 
> 时间：2012-12-08T16:32:37.663
> 
> 标签：javascript

我确信这很简单，但我似乎无法让它正常工作。这是我的代码：

```
var zero = 10;

function some(elem, num) {
    return elem += num;
}

console.log(some(zero, 10));
console.log(some(zero, 10));
console.log(some(zero, 10)); 
```

据我了解，我期望变量 in`zero`每次增加 10 .. 因此，它将是 10、20 和 30。相反，我一直得到 10。显然，这是不对的。

我的问题是，我如何`zero`每次将变量增加 10 并将该值保存回变量`zero`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T16:33:55.037

JavaScript 按值传递，因此修改传递的值不会对调用者的变量产生任何影响。您需要使用返回值：

```
var zero = 10;

function sum(elem, num) {
    return elem + num;
}

console.log(zero = sum(zero, 10));
console.log(zero = sum(zero, 10));
console.log(zero = sum(zero, 10)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:34:11.390

当你这样做

```
elem += num 
```

`elem`...在您的函数中，您正在递增传递给函数的参数所持有的值，*而不是*参数值来自的变量。`elem`参数和变量之间没有联系，在调用 时，`zero`的*值*被传递到函数中。`zero``some`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T16:59:38.473

像数字这样的原语是按值而不是按引用传递的。这意味着您增加局部`elem`变量，而不是`zero`那些。因此，您需要 - 在函数之外 -`zero`在每次调用函数后重新分配：

```
console.log(zero = some(zero, 10)); 
```

或者，使零成为对象的属性，传递对象。对象通过引用而不是值传递。因此，例如：

```
var zero = [10]

function some(elem, num) {
    return elem[0] += num;
}

console.log(some(zero, 10));
console.log(some(zero, 10));
console.log(some(zero, 10)); 
```

那是因为`zero`nows 不是原语，而是一个数组，而数组是对象，因此是通过引用传递的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T18:51:18.340

尝试这个：

```
sum = (function sum(num){
    var zero = 0;
    return function () {
        return zero += num;
    };

})(10);

console.log(sum());
console.log(sum());
console.log(sum()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T16:34:38.980

`zero = some(zero, 10)`

在 some() 中返回新值。因此，您必须在函数调用后将其分配为零。

# php - 数组将内容分配到新数组

> ID：13779424
> 
> 赞同：0
> 
> 时间：2012-12-08T16:32:50.420
> 
> 标签：php, arrays

我正在尝试将此数组的内容分配到一个新数组中，新数组键必须总共只包含**4 个计数**，其中`hit = 0`等于**1 个计数**，`hit = 1`等于**2 个计数**。

从分配给变量的数据库中获取原始数组`$ret`：

```
Array
(
    [0] => Array (
            [id] => 33, [hits] => 0
        )
    [1] => Array (
            [id] => 32, [hits] => 0
        )
    [2] => Array (
            [id] => 31, [hits] => 0
        )
    [3] => Array (
            [id] => 30, [hits] => 0
        )
    [4] => Array (
            [id] => 29, [hits] => 0
        )
    [5] => Array (
            [id] => 28, [hits] => 1
        )
    [6] => Array (
            [id] => 27, [hits] => 0
        )
    [7] => Array (
            [id] => 26, [hits] => 0
        )
    [8] => Array (
            [id] => 25, [hits] => 1
        )
    [9] => Array (
            [id] => 24, [hits] => 0
        )
    [10] => Array (
            [id] => 23, [hits] => 1
        )
    [11] => Array (
            [id] => 22, [hits] => 1
        )
    [12] => Array (
            [id] => 21, [hits] => 0
        )
    [13] => Array (
            [id] => 20, [hits] => 1
        )
    [14] => Array (
            [id] => 19, [hits] => 1
        )
    [15] => Array (
            [id] => 18, [hits] => 0
        )
    [16] => Array (
            [id] => 17, [hits] => 0
        )
    [17] => Array (
            [id] => 16, [hits] => 0
        )
    [18] => Array (
            [id] => 15, [hits] => 0
        )
    [19] => Array (
            [id] => 14, [hits] => 1
        )
    [20] => Array (
            [id] => 10, [hits] => 0
        )
    [21] => Array (
            [id] => 9, [hits] => 1
        )
    [22] => Array (
            [id] => 8, [hits] => 0
        )
    [23] => Array (
            [id] => 7, [hits] => 0
        )
    [24] => Array (
            [id] => 3, [hits] => 1
        )
) 
```

我构造了这段代码：

```
$new_arr = array();
$row = 0;
$ctr = 0;
foreach($ret as $ak1 => $av1) {
  if($ctr == 4) {
    $row++;
    $ctr = 0;
  }
  else {

  }
  if($av1['hits'] == 0) {
    $ctr++;
    $new_arr[$row][] = $av1;
  }
  else {
    $ctr+=2;
     $new_arr[$row][] = $av1;
  }
}
print_r($new_arr); 
```

前几个键`[0] [1] [2] [3]`似乎包含正确的结果，但不是从键开始`[4]`

```
Array
(
    [0] => Array
        (
            [0] => Array (
                    [id] => 33
                    [hits] => 0
                )
            [1] => Array (
                    [id] => 32
                    [hits] => 0
                )
            [2] => Array (
                    [id] => 31
                    [hits] => 0
                )
            [3] => Array (
                    [id] => 30
                    [hits] => 0
                )
        )
    [1] => Array
        (
            [0] => Array (
                    [id] => 29
                    [hits] => 0
                )
            [1] => Array (
                    [id] => 28
                    [hits] => 1
                )
            [2] => Array (
                    [id] => 27
                    [hits] => 0
                )
        )
    [2] => Array
        (
            [0] => Array (
                    [id] => 26
                    [hits] => 0
                )
            [1] => Array (
                    [id] => 25
                    [hits] => 1
                )
            [2] => Array (
                    [id] => 24
                    [hits] => 0
                )
        )
    [3] => Array
        (
            [0] => Array (
                    [id] => 23
                    [hits] => 1
                )
            [1] => Array (
                    [id] => 22
                    [hits] => 1
                )
        )
    [4] => Array
        (
            [0] => Array (
                    [id] => 21
                    [hits] => 0
                )
            [1] => Array (
                    [id] => 20
                    [hits] => 1
                )
            [2] => Array (
                    [id] => 19
                    [hits] => 1
                )
            [3] => Array (
                    [id] => 18
                    [hits] => 0
                )
            [4] => Array (
                    [id] => 17
                    [hits] => 0
                )
            [5] => Array (
                    [id] => 16
                    [hits] => 0
                )
            [6] => Array (
                    [id] => 15
                    [hits] => 0
                )
            [7] => Array (
                    [id] => 14
                    [hits] => 1
                )
            [8] => Array (
                    [id] => 10
                    [hits] => 0
                )
            [9] => Array (
                    [id] => 9
                    [hits] => 1
                )
            [10] => Array (
                    [id] => 8
                    [hits] => 0
                )
            [11] => Array (
                    [id] => 7
                    [hits] => 0
                )
            [12] => Array (
                    [id] => 3
                    [hits] => 1
                )
        )
) 
```

我感到很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:05:44.280

您遇到的问题是您需要能够跟踪每个未完成集合中的“计数”。这可以解决问题。更多细节在代码注释中。

如果您有任何问题，请在评论中提问，我将根据需要编辑此帖子！

**注意**：这假设命中将始终为 0 或 1（计数 1 或 2）。如果项目的命中> 1（计数> 2），则需要对其进行修改才能工作。

**编辑**：更新了代码和结果以解决@fishcracker 提出的问题。

```
$sets = array();
// Because it's possible to have more than one unfinished set
$not_full = array();
// Because we need to track each set's count until it's full
$set_template = array("count" => 0);
$set = $set_template;
$max = 4;
foreach($ret as $item) {
    $item_count = $item["hits"] + 1;

    // If we have a 1 count and there are sets to be topped off
    if($item_count == 1 && !empty($not_full)) {
        $top_off = array_shift($not_full);
        $top_off[] = $item;
        unset($top_off["count"]);
        $sets[] = $top_off;
        continue;
    }

    // If we're going to overflow, push this set to potentially be topped off later
    if($set["count"] + $item_count > $max) {
        $not_full[] = $set;
        $set = $set_template;
    }

    // Add the item to the current set
    $set[] = $item;
    $set["count"] += $item_count;

    // This set is full, 
    if($set["count"] == $max) {
        unset($set["count"]);
        $sets[] = $set;
        $set = $set_template;
    }
}

// If we left the loop with an unfinished set which we were actively working on
if(count($set > 1)) {
    unset($set["count"]);
    $sets[] = $set;
}

// Append any unfinished sets that were waiting to be full
foreach($not_full as $set) {
    unset($set["count"]);
    $sets[] = $set;
}

print_r($sets); 
```

结果：

```
Array
(
[0] => Array
    (
        [0] => Array
            (
                [id] => 33
                [hits] => 0
            )

        [1] => Array
            (
                [id] => 32
                [hits] => 0
            )

        [2] => Array
            (
                [id] => 31
                [hits] => 0
            )

        [3] => Array
            (
                [id] => 30
                [hits] => 0
            )

    )

[1] => Array
    (
        [0] => Array
            (
                [id] => 29
                [hits] => 0
            )

        [1] => Array
            (
                [id] => 28
                [hits] => 1
            )

        [2] => Array
            (
                [id] => 27
                [hits] => 0
            )

    )

[2] => Array
    (
        [0] => Array
            (
                [id] => 26
                [hits] => 0
            )

        [1] => Array
            (
                [id] => 25
                [hits] => 1
            )

        [2] => Array
            (
                [id] => 24
                [hits] => 0
            )

    )

[3] => Array
    (
        [0] => Array
            (
                [id] => 23
                [hits] => 1
            )

        [1] => Array
            (
                [id] => 22
                [hits] => 1
            )

    )

[4] => Array
    (
        [0] => Array
            (
                [id] => 21
                [hits] => 0
            )

        [1] => Array
            (
                [id] => 20
                [hits] => 1
            )

        [2] => Array
            (
                [id] => 18
                [hits] => 0
            )

    )

[5] => Array
    (
        [0] => Array
            (
                [id] => 19
                [hits] => 1
            )

        [1] => Array
            (
                [id] => 17
                [hits] => 0
            )

        [2] => Array
            (
                [id] => 16
                [hits] => 0
            )

    )

[6] => Array
    (
        [0] => Array
            (
                [id] => 15
                [hits] => 0
            )

        [1] => Array
            (
                [id] => 14
                [hits] => 1
            )

        [2] => Array
            (
                [id] => 10
                [hits] => 0
            )

    )

[7] => Array
    (
        [0] => Array
            (
                [id] => 9
                [hits] => 1
            )

        [1] => Array
            (
                [id] => 8
                [hits] => 0
            )

        [2] => Array
            (
                [id] => 7
                [hits] => 0
            )

    )

[8] => Array
    (
        [0] => Array
            (
                [id] => 3
                [hits] => 1
            )

    )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:16:42.973

似乎您正在与`$ctr`数字 4 匹配，这仅在`$ctr`比较时恰好等于 4 时才有效。由于`$ctr`每个循环可能会增加超过 1，因此它可能会超过 4。

尝试：

```
if ($ctr >= 4) 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:27:06.450

我想我明白你的意思，但不是 100%，这就是你想要的吗？

```
foreach($ret as $ak1 => $av1) {
    if($ctr >= 4){
         $row += 1;
         $ctr = 0;
    }
    if($ret[$ak1]['hits']){
        $ctr += 2;
    }
    else{
        $ctr += 1;
    }
    $new_arr[$row][$ret[$ak1]['id']] = $ret[$ak1]['hits'];
} 
```

为我工作

# cookies - quora 之类的网站如何在没有 cookie 的情况下跟踪用户？

> ID：13779428
> 
> 赞同：2
> 
> 时间：2012-12-08T16:33:12.337
> 
> 标签：cookies

如果您清除 cookie 并访问 quora.com，您会突然登录到 quora。quora是如何做到的？

你可以自己试试。网站现在可以检查访问者是否登录到 Facebook 并采取适当的行动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:58:58.660

Quora 主页实际上有多个 cookie 变量。请分析下面的脚本代码：

![QUORA 主页脚本分析](../Images/76f801d1ff49c98b889fcec705cb507f.png)

您会发现在初始脚本加载中实际上有三个对象类，它们将检查您是否登录到 Quora 或 Quora 的合作伙伴站点，您已指示您将允许关联登录作为 Quora 的代理登录。

![Quora 登录检查](../Images/9a35db675e2d3d3e37d994224eb08918.png)

Quora 还通过内部 Session_Table 维护会话数据，除非您特别“注销”，否则它将让您“登录”到 Quora 系统。

![Quora 会话管理](../Images/e097f70f3e0be51e4a0b1b303e4e8a28.png)

详细信息将 IP 地址与地理位置以及特定的浏览器详细信息一起记录下来，并在注销时通过 HTML 推送。

![在此处输入图像描述](../Images/964fb7b65cf4b97e561c97400d3ed9eb.png)

此功能与 Facebook 使用的功能/策略以及 Eric Sc​​hmidt 提到的 Google 几年前希望追求的“更多登录”功能没有什么不同；然而，除了 GMAIL 之外，谷歌还没有推出一款社交互动应用程序，可以让人们想要一次又一次地访问而无需重新登录。

# canvas - 用 css 样式覆盖的画布内联高度和宽度属性。这是一个错误吗？

> ID：13779429
> 
> 赞同：5
> 
> 时间：2012-12-08T16:33:22.483
> 
> 标签：canvas, html5-canvas, image-scaling

我最近[问了一个问题](https://stackoverflow.com/questions/13770118/html5-canvas-image-scaling-to-a-smaller-size-and-back-to-original)，关于如何在不裁剪的情况下将比我的画布更大的图像绘制到画布上，并在对其进行一些更改后将图像保存回其原始尺寸。我发现解决方案是将画布的内联`height`和`width`属性设置为大于图像，并使用 css`height`和`width`属性来设置画布的样式以适合您的布局。

例如，假设我的图像尺寸范围在 400 像素到 2000 像素之间。但我不希望画布那么大，也不希望图像也被裁剪（因为用`toDataURL`画布上的内容保存图像时就是保存的内容）。这是有效的：

```
//style
#mycanvas{
    width: 400px;
    height: 400px;
}

<canvas id="mycanvas" width="2000" height="2000" /> 
```

这很好用，我的图像效果很好。但是这种行为是否存在问题并且将来一定会被更改/修复？我打算将此解决方案用于手头的任务。

有什么指导吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T09:00:41.483

此行为通常用于控制画布的大小：

*   分辨率属性
*   用于拉伸/收缩的 CSS

请参阅[HTML5 中的画布宽度和高度](https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T08:25:23.237

*我知道自从提出这个问题以来已经有很长时间了，但我还有另一个可以使用的解决方案。*

您可以尝试使用 [canvasContext.drawImage()](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage)函数，在将图像绘制到画布中时调整图像大小。

句法：`void ctx.drawImage(image, dx, dy, dWidth, dHeight);`

*   dx 和 dy 是目标画布的 x 和 y 坐标
*   dWidth 和 dHeight 是在画布上绘制图像的尺寸。

（*如果您知道画布和图像的大小，您可以计算出这些值需要是什么*）

# jquery - jQuery 可以在除 IE 之外的所有应用程序中工作？（用户界面）

> ID：13779430
> 
> 赞同：3
> 
> 时间：2012-12-08T16:33:27.647
> 
> 标签：jquery, jquery-ui, internet-explorer, user-interface

我正在使用 jQuery 和 jQuery UI 来制作动画效果。

您可以在 jsfiddle 中看到它适用于任何其他浏览器栏任何版本的 IE，包括 10。现在我对 Javascript 有点陌生，所以我知道这个小提琴会有一些缺陷，但是，这里是：

[http://jsfiddle.net/BqqMD/2/](http://jsfiddle.net/BqqMD/2/)

为什么在IE中打开面板，但是将#closeBtn元素定位在左侧，然后单击它时，它没有关闭.panel类？

我完全感到困惑，但我知道我的代码在这里很乱，所以我希望能对如何解决这个问题有所了解。

这是JS代码：

```
var panel     = ".panel";
var menuBtn   = "#menuBtn";
var closeBtn  = "#closeBtn";
var panelTime = 1000;
var btnTime   = 300;
var animDir   = 'Right';

$(function 
    MenuOptions(){
        $(panel).hide();

            $(menuBtn).click(function(){
                $(menuBtn).hide('slide', {direction: animDir}, btnTime);
                $(panel).show('slide', {direction: animDir}, panelTime);        
                $(closeBtn).show('slide', {direction: animDir}, btnTime);
                });
        $(closeBtn).click(function(){
            $(this).hide('slide', {direction: animDir}, btnTime);
            $(panel).hide('slide', {direction: animDir}, panelTime);    
            $(menuBtn).show('slide', {direction: animDir}, btnTime);
     });

}); 
```

许多问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:36:25.477

你的小提琴在 IE9 中对我来说就像一个魅力。

你最好重置IE并再次运行。

# javascript - 通过 Thrift 从 Chrome 扩展程序保存到 Evernote 的二进制文件在 Unicode 转换后出现乱码

> ID：13779434
> 
> 赞同：3
> 
> 时间：2012-12-08T16:34:01.137
> 
> 标签：javascript, utf-8, google-chrome-extension, thrift, evernote

编辑：这个问题归结为 UTF-8 转换，请在此处讨论： [UTF-8：它应该保存那个字符串 = 编码（解码（字符串））吗？如果没有，如何实现？](https://stackoverflow.com/q/13786628/1887947)

我正在尝试使用非官方[的 Kanda 软件的 API](https://github.com/kandasoftware/evernote-sdk-javascript)从 Chrome 扩展程序将 PDF 文件保存到 Evernote 。本质上，它使用 Thrift 并提供根据 Evernote API 创建和发送数据结构的方法。为了测试，我使用了一个字节长度为 2898 的示例 PDF 文件。

当 CreateNote() 方法被调用时，数据最终会进入 SDK 的 thrift.js，在该文件中进行 UTF 编码并放入适当的数据结构中。这些函数称为：

```
 writeString:function(str) {
        var result = Array.prototype.map.call(this.encode(str).split(""), this.stringToHex); // <----- I tried to skip this encoding for the data body
        this.writeI32(result.length);
        for (var i = 0; i < result.length; i++) {
            this.ra.push(result[i]);
        }
    },
...
    encode:function(string) {
        string = string.replace(/\r\n/g, "\n");
        var utftext = "";
        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if ((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }
        }
        return utftext;
    },
...
    writeI32:function(i32) {
        var i32out = new Array();
        i32out[0] = 0xff & i32 >> 24;
        i32out[1] = 0xff & i32 >> 16;
        i32out[2] = 0xff & i32 >> 8;
        i32out[3] = 0xff & i32;

        var result = Array.prototype.map.call(i32out, this.byteToHex);
        for (var i = 0; i < 4; i++) {
            this.ra.push(result[i]);
        }

    }, 
```

我真的不明白 Thrift 在这个级别是如何工作的，以及为什么它需要对包括二进制附件正文在内的所有数据进行编码，但是正如你所看到的那样，它会产生 PDF 的数据（以及所有其他要传输的字符串数据）问题）是 UTF 编码的，所以 .length 现在是 3018 字节。这一切都通过 API 进行，文件显示在 Evernote 前端（见图），但它没有被解码回来，大小为 3018 字节，所以 PDF 是拙劣的。

[Evernote 前端的结果图片](http://www.evernote.com/shard/s138/sh/8324aaf4-6192-4796-8975-e415110dad04/a48067cc91f8ffc8b1a40b08192ae7e8)

我试图通过仅跳过对数据主体的 encode() 调用来强制解决方案，但这会导致文件以某种方式被丢弃。

**您能否告诉我问题出在我的误解、SDK 还是 Evernote 后端，以及如何解决？我为此失眠了。**

* * *

供参考：我通过 XMLHttpRequest 获取原始文件，如下所示：

```
function getLink(url, callback) {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', document.getElementById('url1').value, true);
  xhr.responseType = 'text';
  xhr.overrideMimeType('text/plain; charset=x-user-defined');

  xhr.onload = function(e) {
    if (this.status == 200) {
      // Note: .response instead of .responseText
      alert("String(this.response) " + String(this.response).length);
      alert("String(this.responseText) " + String(this.responseText).length);
      blob = String(this.response);
      AddNote1(url, blob, function(response) {
        document.getElementById('result').innerHTML += String(response).replace(/\n/g, "<br/>") + "<br/>";
        document.getElementById('result').innerHTML += blob.slice(1, 20);
        } );
      }
    };
  xhr.send();
  } 
```

结果数据看起来不错，string.length 为 2898。然后我继续按照示例中的说明添加注释。同样，这一切都检查得很好，并且字节字符串完好无损地进入了 CreateNote()，所以这再次仅供参考：

```
function AddNote1(Name, ContentFile, callback)
{
    var noteStore = get_NoteStore();
    var note = new Note();
    note.title = Name;
    var na = new NoteAttributes();
    //na.author = "someone";
    na.sourceURL = Name;
    na.source = "web.clip";
    note.attributes = na;

    var data = new Data();
    var resource = new Resource();
    binaryData = ContentFile;
    data.size = binaryData.length;
    alert(binaryData.length + '*' + ContentFile.length);
    data.bodyHash = raw_md5(binaryData);
    data.body = binaryData;
    resource.mime = "application/pdf";
    resource.data = data;
    var resAttributes = new ResourceAttributes();
    resAttributes.fileName = String(Name).replace(/^.*[\/\\]/g, '');
    resource.attributes = resAttributes;
    note.resources = Array(resource);
    //important to set correct content
    var content = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
        + "<!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\"><en-note>";
    content += String("Oi Wei").replace(/\n/g, "<br/>") + "<br/>";
    content += "<en-media type=\"application/pdf\" hash=\"" + md5(binaryData) + "\"/>";
    content += "</en-note>";
    note.content = content;
    //response is a created note
    //callback function process response
    var response = noteStore.createNote(Eventnote.Auth.get_auth_token(), note);
    if (callback !== undefined) {
      callback(response);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:33:34.863

> 有没有没有这个问题的 Javascript utf8_decode() 实现？

取自[这里](http://ecmanaut.blogspot.com.au/2006/07/encoding-decoding-utf8-in-javascript.html)：

```
function encode_utf8( s )
{
  return unescape( encodeURIComponent( s ) );
}

function decode_utf8( s )
{
  return decodeURIComponent( escape( s ) );
} 
```

# python - 更改已安装的软件包

> ID：13779439
> 
> 赞同：0
> 
> 时间：2012-12-08T16:34:23.927
> 
> 标签：python, python-2.7

我正在尝试改进用 python 编写的包。该软件包已安装在系统中。所有源文件也都存在。我想创建一个包源的副本，以便我可以对副本和测试进行所有更改，这样我就不会对已安装的包进行任何更改。每当文件尝试导入包时，我有没有办法告诉 python 选择我的代码副本而不是已安装的版本，以便我可以测试副本中的新代码？我是 python 方面的菜鸟，所以请详细说明解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:38:49.533

有多种方法可以做到这一点，但设置[虚拟](http://pypi.python.org/pypi/virtualenv)环境将允许你们两个有两个不同的环境，你可以在它们之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:05:16.857

如果您想更改代码；会更好；先下载其源代码；应用更改；修改`setup.py`文件或制作新文件；给它一个新名字... 我的意思是不要直接在安装的版本中更改；分开做……或者做任何你喜欢做的事，

但在做这一切之前； **研究其作者在原始来源中存在的许可协议；当您想将您的副本分发给其他人时，必须小心执行此操作**

# random - 多次“重置”伪随机数生成器种子？

> ID：13779441
> 
> 赞同：3
> 
> 时间：2012-12-08T16:34:30.277
> 
> 标签：random

今天，我的朋友有一个想法，使用生成的伪随机数多次设置伪随机数生成器的种子，以“使事情更随机化”。

C# 中的一个示例：

```
// Initiate one with a time-based seed
Random rand = new Random(milliseconds_since_unix_epoch());
// Then loop for a_number_of_times...
for (int i = 0; i < a_number_of_times; i++)
{
    // ... to initiate with the next random number generated
    rand = new Random(rand.Next());
}
// So is `rand` now really random?
assert(rand.Next() is really_random); 
```

但我认为这可能会增加将重复种子用于伪随机数生成器的机会。

这会

1.  让事情变得更加随机，
2.  使其循环使用一定数量的种子，或
3.  对随机性没有任何影响（即既不增加也不减少）？

有哪位伪随机数生成器方面的专家能给出一些详细的解释，以便我可以说服我的朋友吗？我很高兴看到答案解释了一些伪随机数生成器算法的更多细节。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:34:05.267

伪随机数有三个基本的使用级别。每个级别都包含它下面的级别。

1.  没有特定相关性保证的意外数字。此级别的生成器通常具有一些隐藏的相关性，这些相关性可能对您很重要，也可能不重要。
2.  具有已知非相关性的统计独立数。这些通常是数值模拟所必需的。
3.  无法猜测的加密安全数字。当存在安全问题时，这些总是需要的。

这些中的每一个都是确定性的。随机数生成器是一种具有某种内部状态的算法。应用该算法一次会产生一个新的内部状态和一个输出数。播种生成器意味着设置内部状态；种子接口并不总是允许设置所有可能的内部状态。作为一个好的经验法则，始终假设默认库 random() 例程仅在最弱的级别 1 上运行。

要回答您的具体问题，问题 (1) 中的算法不能增加随机性，而 (2) 可能会降低随机性。因此，对随机性的期望严格低于一开始就播种一次。原因来自**短迭代周期**的可能存在。函数的迭代循环`F`是一对整数`n`，`k`其中`F^(n) (k) = k`，其中指数是应用的次数`F`。例如，`F^(3) (x) = F(F(F(x)))`。如果迭代周期很短，则随机数将比其他情况更频繁地重复。在呈现的代码中，迭代功能是为生成器播种，然后获取第一个输出。

要回答一个您没有完全提出但与理解这一点相关的问题，使用毫秒计数器播种会使您的生成器无法通过第 3 级不可猜测性测试。这是因为可能的毫秒数在**密码学上很小**，这是一个已知需要进行详尽搜索的数字。在撰写本文时，应将 2^50 视为密码学上的小数。（对于任何一年的加密数据量大，请找有信誉的专家。）现在一个世纪的毫秒数大约是 2^(41.5)，所以不要为了安全目的而依赖这种形式的播种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:28:15.413

Your example won't increase the randomness because there is no increase in [entropy](http://en.wikipedia.org/wiki/Entropy_%28computing%29). It is simply derived from the execution time of the program.

Instead of using something based of the current time, computers maintain an entropy pool, and build it up with data that is statistically random (or at least, unguessable). For example, the timing delay between network packets, or key-strokes, or hard-drive read times.

You should tap into that entropy pool if you want good random numbers. These are known as **[Cryptographically secure pseudorandom number generators](http://en.wikipedia.org/wiki/Cryptographically_secure_pseudo-random_number_generator)**.

In C#, see the **[Cryptography.RandomNumberGenerator Class](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator.aspx)** for the right way to get a secure random number.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:48:06.543

这不会使事情变得更加“随机”。

我们的种子决定了 rand.next() 给我们的看起来随机但完全确定的数字序列。

您的代码不是让事情变得更加随机，而是定义了从初始种子到某个最终种子的映射，并且，给定相同的初始种子，您将始终得到相同的最终种子。

尝试使用这段代码，你会明白我的意思（另外，[这里是一个你可以在浏览器中运行的版本的链接](http://ideone.com/sK1xm7)）：

```
int my_seed = 100; // change my seed to whatever you want
Random rand = new Random(my_seed);
for (int i = 0; i < a_number_of_times; i++)
{
    rand = new Random(rand.Next());
}
// does this print the same number every run if we don't change the starting seed?
Console.WriteLine(rand.Next()); // yes, it does 
```

带有这个最终种子的 Random 对象就像任何其他 Random 对象一样。它只是花了你更多的时间而不是必要的时间来创建它。

# html - 当我使用服务器名称时 IE 忽略条件注释

> ID：13779451
> 
> 赞同：2
> 
> 时间：2012-12-08T16:35:40.607
> 
> 标签：html, internet-explorer-8

我有一个网页，其中包含以下代码：

```
<!--[if IE 8]>
Welcome to IE 8
<![endif]--> 
```

我登录到服务器，如果我通过 URL 访问 IE 8 中的页面，`http://localhost/login`我会看到该消息。但是，如果我使用 URL `http://myserver/login`（`myserver`我登录的服务器的 Windows 名称在哪里），则页面显示并正常运行，只是不显示消息。

如果我查看源代码，我会看到我期望的代码——评论显示在源代码中。（好的，我真的在尝试加载一个条件样式表，当我使用服务器名称时它没有被加载，但是这个简单的示例显示了相同的结果）。

任何想法如何退出这个新的 IE 奇异之地之旅？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T17:23:09.720

在页面设置中，您是否选中了“在兼容性视图中显示 Intranet 站点”？这一切都[在这篇博文中进行了解释](http://blogs.msdn.com/b/ie/archive/2009/06/17/compatibility-view-and-smart-defaults.aspx)。

# python - 在 mac os x 上安装了 twisted 但未导入

> ID：13779455
> 
> 赞同：0
> 
> 时间：2012-12-08T16:36:03.237
> 
> 标签：python, macos, installation, twisted

当我尝试使用 python 中的扭曲时，它无法加载。附加路径不在我的 sys.path 中。即使我将它添加到 sys.path 它也无法加载扭曲。有任何想法吗？

```
sudo find / -name twisted
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted

Python 2.6.6 (r266:84374, Aug 31 2010, 11:00:51) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from twisted.internet.protocol import Factory
Traceback (most recent call last):
  File "test.py", line 1, in <module>
    from twisted.internet.protocol import Factory
ImportError: No module named twisted.internet.protocol 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:46:48.130

您是否确保所有权限都已正确设置？如果您手动安装它，则可能是权限问题。检查文件的权限是否为 644，目录的权限为 755。

# c++ - TagLib 教程

> ID：13779456
> 
> 赞同：3
> 
> 时间：2012-12-08T16:36:04.923
> 
> 标签：c++, qt, taglib

是否有任何 TagLib 教程、操作方法、示例等用于带有 C++ (Qt) 的 Taglib？我只找到了[API 文档](http://taglib.github.com/)及其非常基本的示例。但很难找到更多的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:11:57.670

查看随库的源代码提供的示例。它们不是基于 Qt 的，但足以开始使用 Taglib 和 Qt 进行编程。

# php - 使用数据映射器模式

> ID：13779457
> 
> 赞同：1
> 
> 时间：2012-12-08T16:36:17.790
> 
> 标签：php, datamapper

如果我有一个用户和一个 UserMapper。我是在类外散列密码，在用户设置方法上设置散列密码，然后使用 UserMapper 保存用户，还是将散列方法实现到用户（数据持有者）类，然后使用 UserMapper 保存。或者最后，我会在 UserMapper 的 save() 方法中散列吗？实现数据映射器模式的正确方法是什么？

这是用户数据持有者：

```
class User implements UserInterface
{
    protected $id;

    public function __construct($row = null) {
    if (!is_null($row)) {
        $this->id = $row['id'];
    }
    }

    public function setId($id) {
    $this->id = $id;
    }

    public function getId() {
    return $this->id;
    } 
```

# c++ - c++流输入过程

> ID：13779462
> 
> 赞同：1
> 
> 时间：2012-12-08T16:37:31.690
> 
> 标签：c++, stream, pipe

我想将文本输出从一个程序转换为 Gui 输出，第一个程序每微秒产生一次行输出。如果我在 linux 中使用管道命令发送，第二个程序如何逐行接收并处理它？换句话说，我在 C++ 中有 main 函数，该参数是流且无限制的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:46:37.117

**程序1：**

```
#include <iostream>
int main()
{
    std::cout << "Program1 says Hello world!" << std::endl; // output to standard out using std::cout
} 
```

**程序2：**

```
#include <iostream>
#include <string>
int main()
{
    std::string line;
    while (std::getline(std::cin, line)) // Read from standard in line by line using std::cin and std::getline
    {
         std::cout << "Line received! Contents: " << line << std::endl;
    }
} 
```

现在，如果您运行`Program1`并输入`Program2`，您应该得到：

> `$ ./Program1 | ./Program2`
> `Line Recieved! Contents: Program1 says Hello world!`

请注意，`Program2`将继续从标准输入读取，直到`EOF`达到（或发生某些错误）。

对于您的情况，`Program1`是生成输出的东西，并且`Program2`是使用输出的 GUI 程序。请注意，为了使程序非阻塞，您可能希望在单独的线程上从标准输入读取。

至于您对“每微秒接收输入”的约束，这可能是不现实的……它会尽可能快地处理，但您不能依赖标准输入/输出来那么快，特别是如果您正在发送相当数量的数据。

# validation - 将 mootools 与 Windows 8 Metro JavaScript 应用程序一起使用

> ID：13779465
> 
> 赞同：1
> 
> 时间：2012-12-08T16:38:02.917
> 
> 标签：validation, windows-8, mootools, windows-store-apps

我在**Windows 8 Metro JavaScript App中使用****mootools-core-1.4.5.js**，当尝试**创建应用程序包时，在****验证**步骤中出现错误：

 ******```
mootools-core-1.4.5.js has JavaScript syntax or other problems. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:38:46.537

我找到了一个适合我的解决方案。
我使用**了 mootools-core-1.4.5-full-compat.js**并注释掉了这些行：

```
//Browser.exec = function(text){
//  if (!text) return text;
//  if (window.execScript){
//      window.execScript(text);
//  } else {
//      var script = document.createElement('script');
//      script.setAttribute('type', 'text/javascript');
//      script.text = text;
//      document.head.appendChild(script);
//      document.head.removeChild(script);
//  }
//  return text;
//};

//String.implement('stripScripts', function(exec){
//  var scripts = '';
//  var text = this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi, function(all, code){
//      scripts += code + '\n';
//      return '';
//  });
//  if (exec === true) Browser.exec(scripts);
//  else if (typeOf(exec) == 'function') exec(scripts, text);
//  return text;
//}); 
```******

# javascript - JQuery 事件只触发一次，即使它被多次触发

> ID：13779466
> 
> 赞同：2
> 
> 时间：2012-12-08T16:38:06.527
> 
> 标签：javascript, jquery

最初，“发票行”容器中的所有输入字段都被*禁用*，除了第一个。当用户在属于第一个“发票行”的任何字段中输入任何文本时，我希望启用第二个发票行输入。当用户将任何文本插入第二个发票行的任何输入字段时，我希望第三个发票行的输入字段启用。

我制定了一些应该工作来完成此任务的 jquery，它确实可以，但仅适用于第一个发票行。换句话说，一旦事件被触发一次，就再也不会被触发。如果是这样，我的问题将得到解决，因为我的代码似乎可以正常工作，但只有第一个 invoice-line 元素的“onChange”。

我一直在尝试解决这个问题很长一段时间，我将不胜感激任何帮助。

标记：

```
<?php for($i=0; $i < 20; $i++){
    echo '
    <div class="invoice-line">
        <div class="prod-id-cell"><input type="text" class="prod-id-input"></div>
        <div class="prod-name-cell">
            <input onKeyPress="search(this.value)" type="text" class="prod-name-input"/>
            <div class="smart-suggestions">
                    <!-- RESULT SUGGESTIONS WILL POPULATE HERE -->
            </div>
        </div>
        <div class="price-cell"><input class="price-input" type="text" /></div>
        <div class="unit-price-cell"><input class="unit-price-input" type="text" /></div>
        <div class="num-kits-cell"><input class="num-kits-input" type="text" /></div>
        <div class="amount-cell"><input class="amount-input" type="text" /></div>
    </div>';
}
?> 
```

查询：

```
//regulate what lines are enabled / disabled
$('.invoice-line div input').attr('disabled','disabled');
$('.invoice-line:first div input').removeAttr('disabled');

$('.invoice-line div input').change(function(){
    $(this).parent().parent('.invoice-line').next().find('input').removeAttr('disabled');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:52:21.497

有`parent()`一对多，针对`invoice-line`包装器，然后找到`next()` `invoice-line`，您可能正在寻找的实际上是下一个 div ，然后是包含输入等：

```
$('.invoice-line input').not(':first').prop('disabled',true)
                        .end().on('keyup', function() {
    $(this).closest('div').next().find('input').prop('disabled', false);
}); 
```

[**小提琴**](http://jsfiddle.net/JpvyX/8/) ​</p>

也将其更改为 keyup，以便不需要模糊事件来触发下一个输入的激活。

**编辑：**

根据评论，也许这就是你所追求的？

```
$('.invoice-line').not(':first').find('input').prop('disabled',true);

$('input', '.invoice-line').on('keyup', function() {
    $(this).closest('.invoice-line').next('.invoice-line').find('input').prop('disabled', false);
}); 
```

[**小提琴**](http://jsfiddle.net/JpvyX/9/)

**编辑：**

试试这个：

```
$('.invoice-line').not(':first').find('input').prop('disabled',true);

$(document).on('keyup', '.invoice-line input', function() {
    $(this).closest('.invoice-line').next('.invoice-line').find('input').prop('disabled', false);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:42:57.790

试试这个代码：

```
 // first all the inputs in the .invoice-line get disabled
$('.invoice-line input[type="text"]').attr("disabled","disabled");
         // then the first of all in this becomes enabled 
$('.invoice-line input[type="text"]:first').removeAttr('disabled');

         // then on change next input will be enabled for inputing the values
$('.invoice-line input[type="text"]').change(function(){
    $(this).parent().next().find('input').removeAttr('disabled').focus();
}); 
```

# java - 如何使用来自 android 应用程序的 5 个不同文本字段的数据发送 SMS 消息

> ID：13779467
> 
> 赞同：0
> 
> 时间：2012-12-08T16:38:08.033
> 
> 标签：java, android, sms

我已经成功地将一些代码组合在一起，将 SMS 发送到另一个包含两个字段`Phone No`和`Message Body`. 但是，我希望创建一个包含具有 5 个文本字段的表单的应用程序。

例如：

```
Field 1 : Time and Date
Field 2 : Pick Up
Field 3 : Destination
Field 4 : Name 
Field 5 : Car Type 
```

但是每次我尝试增加一个字符串并将其作为参数传递给函数时 - 它都会引发错误。我会错过什么？我的代码：

```
package com.example.taxiappnew;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.gsm.SmsManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

@SuppressWarnings("deprecation")
public class SmsMain extends Activity {

    Button btnSendSMS;
    EditText txtPhoneNo;
    EditText txtMessage;
    EditText txtPickup;
    String message1;

    /** Called when the activi|ty is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sms_main);        

        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
        txtMessage = (EditText) findViewById(R.id.txtMessage);
        txtPickup = (EditText) findViewById(R.id.txtPickup);

        btnSendSMS.setOnClickListener(new View.OnClickListener() 
        {

            public void onClick(View v) 
            {                
                String phoneNo = txtPhoneNo.getText().toString();
                String Pickup  = txtPickup.getText().toString();
                String message = txtMessage.getText().toString();  

                if (phoneNo.length()>0 && message.length()>0) 
                 if (Pickup.length()>0)
                  message1 = new StringBuilder().append("Pickup").append("message").toString();
                    sendSMS(phoneNo, message1);  

                    Toast.makeText(getBaseContext(), 
                        "Please enter both phone number and message.", 
                        Toast.LENGTH_SHORT).show();

            }
     }); 

    }

     //---sends an SMS message to another device---
    private void sendSMS(String phoneNumber, String message)
    {        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent + phoneNumber", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);       
    }    
} 
```

错误日志 ================================================= =====

```
12-08 17:11:33.870: E/SKIA(10331): FimgApiStretch:stretch failed
12-08 17:15:39.565: W/IInputConnectionWrapper(10331): showStatusIcon on inactive InputConnection
12-08 17:15:40.310: E/ActivityThread(10331): Activity com.example.taxiappnew.SmsMain has leaked IntentReceiver com.example.taxiappnew.SmsMain$3@41a43d88 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-08 17:15:40.310: E/ActivityThread(10331): android.app.IntentReceiverLeaked: Activity com.example.taxiappnew.SmsMain has leaked IntentReceiver com.example.taxiappnew.SmsMain$3@41a43d88 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1155)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1142)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1136)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:348)
12-08 17:15:40.310: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain.sendSMS(SmsMain.java:106)
12-08 17:15:40.310: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain.access$0(SmsMain.java:64)
12-08 17:15:40.310: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain$1.onClick(SmsMain.java:51)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.view.View.performClick(View.java:3644)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.view.View$PerformClick.run(View.java:14313)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.os.Handler.handleCallback(Handler.java:605)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.os.Looper.loop(Looper.java:137)
12-08 17:15:40.310: E/ActivityThread(10331):    at android.app.ActivityThread.main(ActivityThread.java:4517)
12-08 17:15:40.310: E/ActivityThread(10331):    at java.lang.reflect.Method.invokeNative(Native Method)
12-08 17:15:40.310: E/ActivityThread(10331):    at java.lang.reflect.Method.invoke(Method.java:511)
12-08 17:15:40.310: E/ActivityThread(10331):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
12-08 17:15:40.310: E/ActivityThread(10331):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
12-08 17:15:40.310: E/ActivityThread(10331):    at dalvik.system.NativeStart.main(Native Method)
12-08 17:15:40.320: E/ActivityThread(10331): Activity com.example.taxiappnew.SmsMain has leaked IntentReceiver com.example.taxiappnew.SmsMain$2@41a436e0 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-08 17:15:40.320: E/ActivityThread(10331): android.app.IntentReceiverLeaked: Activity com.example.taxiappnew.SmsMain has leaked IntentReceiver com.example.taxiappnew.SmsMain$2@41a436e0 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1155)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1142)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1136)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:348)
12-08 17:15:40.320: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain.sendSMS(SmsMain.java:76)
12-08 17:15:40.320: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain.access$0(SmsMain.java:64)
12-08 17:15:40.320: E/ActivityThread(10331):    at com.example.taxiappnew.SmsMain$1.onClick(SmsMain.java:51)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.view.View.performClick(View.java:3644)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.view.View$PerformClick.run(View.java:14313)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.os.Handler.handleCallback(Handler.java:605)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.os.Looper.loop(Looper.java:137)
12-08 17:15:40.320: E/ActivityThread(10331):    at android.app.ActivityThread.main(ActivityThread.java:4517)
12-08 17:15:40.320: E/ActivityThread(10331):    at java.lang.reflect.Method.invokeNative(Native Method)
12-08 17:15:40.320: E/ActivityThread(10331):    at java.lang.reflect.Method.invoke(Method.java:511)
12-08 17:15:40.320: E/ActivityThread(10331):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
12-08 17:15:40.320: E/ActivityThread(10331):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
12-08 17:15:40.320: E/ActivityThread(10331):    at dalvik.system.NativeStart.main(Native Method)
12-08 17:15:40.340: D/dalvikvm(10331): GC_CONCURRENT freed 254K, 4% free 13896K/14471K, paused 2ms+2ms
12-08 17:15:45.470: D/CLIPBOARD(11150): Hide Clipboard dialog at Starting input: finished by someone else... !
12-08 17:16:05.600: E/SKIA(11150): FimgApiStretch:stretch failed 
```

# asp.net-mvc-3 - 尝试将 int 序列转换为分隔字符串

> ID：13779472
> 
> 赞同：0
> 
> 时间：2012-12-08T16:38:32.063
> 
> 标签：asp.net-mvc-3

我一直在使用 DelimitedStringHelper 扩展将项目序列转换为带有`IEnumerable<T>`. 默认情况下，对序列中的每个项目调用 ToString() 以使用默认分隔符“，”来制定结果。

这具有以下效果：

```
public enum Days
{
    [Display(Name = "Monday")]
    Monday,
    //Left out other days for brevity
    [Display(Name = "Saturday")]
    Saturday
} 
```

并且，结合模型的其余部分：

```
[Mandatory(ErrorMessage = "Please select at least one day")]
[Display(Name = "What are the best days to contact you (select one or more days)?")]
[ContactClientDaySelector(BulkSelectionThreshold = 6)]
public List<string> ContactClientDayCheckBox { get; set; } 
```

连同`[ContactClientDaySelector] 的代码：

```
public class ContactClientDaySelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        return Selector.GetItemsFromEnum<ContactClientDay>();
    }
} 
```

通过在视图中调用，将显示一个带有“星期一，...，星期六”的复选框列表：

```
@Html.FullFieldEditor(m => m.QuotePartRecord.ContactClientDayCheckBox) 
```

*注意：`FullFieldEditor`是一个特殊的助手，它遍历`enum`并使用`BulkSelectionThreshold`将选择单选按钮列表、下拉列表、复选框列表或多选列表——在这种情况下，“6”将触发复选框列表的创建，因为我`enum`有一个收集 6 个项目（即天）。*

我的控制器只检查模型状态的有效性并传递到确认视图：

```
public ActionResult WrapUp(string backButton, string nextButton)
{
    if (backButton != null)
        return RedirectToAction("ExpenseInformation");
    else if ((nextButton != null) && ModelState.IsValid)
        return RedirectToAction("Confirm");
    else
        return View(quoteData);
}
public ActionResult Confirm(string backButton, string nextButton)
{
    if (backButton != null)
        return RedirectToAction("WrapUp");
    else if ((nextButton != null) && ModelState.IsValid)
    {
        var quoteConfirm = _quoteService.CreateQuote(quoteData.QuotePartRecord);
        return RedirectToAction("Submitted");
    }
    else
        return View(quoteData);
    } 
```

现在，为了发布用户选择的复选框，我在确认视图页面中使用了以下内容：

```
[ContactClientDaySelector]
[ReadOnly(true)]
public List<string> ContactClientDayCheckBoxPost
{
    get { return ContactClientDayCheckBox; }
} 
```

这与 DelimitedStringHelper 结合将显示选择。例如，如果用户同时选择了星期一和星期二，则帖子将显示“星期一，星期二”。

但是，我不得不稍微更改我的代码，并`int`专门用于复选框（长话短说：使用 NHibernate 会因为使用 而产生转换错误`List<string>`，这是解决该问题的一种方法）。

我不得不删除`enum`并用这个类替换它：

```
public class ContactClientDay
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后我修改了我的 Selector 类：

```
public class ContactClientDaySelectorAttribute : SelectorAttribute
{
    public ContactClientDaySelectorAttribute()
    {
        //For checkboxes, number must equal amount of items
        BulkSelectionThreshold = 6;
    }
    public override IEnumerable<SelectListItem> GetItems()
    {
        var contactClientDay = new List<ContactClientDay> 
        { 
            new ContactClientDay {Id = 1, Name = "Monday"},
            //Left out other days for brevity
            new ContactClientDay {Id = 6, Name = "Saturday"},

        };
        return contactClientDay.ToSelectList(m => m.Id, m => m.Name);
    }
} 
```

我将模型更改为：

```
public virtual int? ContactClientDayCheckBox { get; set; } 
```

我将我的帖子更改为：

```
[ReadOnly(true)]
public string ContactClientDayCheckBoxPost
{
    get { return QuotePartRecord.ContactClientDayCheckBox.ToString(); }
} 
```

如果我这样做`public int? ContactClientDayCheckBoxPost`，则确认页面上不会显示任何内容。

如果我改为使用`public string ContactClientDayCheckBoxPost`然后做`ContactClientDayCheckBox.ToString()`，它只会显示选择的第一个值的“名称”（仅“星期一”，而不是“星期一，星期二”）。

我无法弄清楚如何`int`在这种情况下以编程方式转换序列（可能带有扩展名）？有什么想法/例子吗？提前致谢。

作为参考，这是`DelimitedStringHelper`我正在使用的扩展：

```
public static class DelimitedStringHelper
{
    public static string DefaultDelimiter = ", ";

    /// <summary>
    /// Convert a sequence of items to a delimited string. By default, ToString() will be called on each item in the sequence to formulate the result. The default delimiter of ', ' will be used
    /// </summary>
    public static string ToDelimitedString<T>(this IEnumerable<T> source)
    {
        return source.ToDelimitedString(x => x.ToString(), DefaultDelimiter);
    }

    /// <summary>
    /// Convert a sequence of items to a delimited string. By default, ToString() will be called on each item in the sequence to formulate the result
    /// </summary>
    /// <param name="delimiter">The delimiter to separate each item with</param>
    public static string ToDelimitedString<T>(this IEnumerable<T> source, string delimiter)
    {
        return source.ToDelimitedString(x => x.ToString(), delimiter);
    }

    /// <summary>
    /// Convert a sequence of items to a delimited string. The default delimiter of ', ' will be used
    /// </summary>
    /// <param name="selector">A lambda expression to select a string property of <typeparamref name="T"/></param>
    public static string ToDelimitedString<T>(this IEnumerable<T> source, Func<T, string> selector)
    {
        return source.ToDelimitedString(selector, DefaultDelimiter);
    }

    /// <summary>
    /// Convert a sequence of items to a delimited string.
    /// </summary>
    /// <param name="selector">A lambda expression to select a string property of <typeparamref name="T"/></param>
    /// <param name="delimiter">The delimiter to separate each item with</param>
    public static string ToDelimitedString<T>(this IEnumerable<T> source, Func<T, string> selector, string delimiter)
    {
        if (source == null)
            return string.Empty;

        if (selector == null)
            throw new ArgumentNullException("selector", "Must provide a valid property selector");

        if (string.IsNullOrEmpty(delimiter))
            delimiter = DefaultDelimiter;

        return string.Join(delimiter, source.Select(selector).ToArray());
    }
} 
```

# mysql - 按日期划分日期时间

> ID：13779473
> 
> 赞同：1
> 
> 时间：2012-12-08T16:38:31.840
> 
> 标签：mysql, sql, datetime

我将我的新闻保存在数据库中，每个新闻都有一个字段以格式保存它的日期时间： `xxxx-xx-xx xx:xx:xx` 现在我想按日期检索新闻`xxxx-xx-xx`，例如`today`我必须在`where`我的 sql 代码中写入的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:41:33.137

使用`DATE`功能。例如

```
SELECT *
FROM tableName
WHERE DATE(columnName) = '2012-12-20' 
```

这将检索日期为 2012 年 12 月 20 日的所有记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:46:42.367

这很简单：

`SELECT * FROM tableName WHERE DATE( datetime_field ) = DATE( NOW( ) )`

> 请注意 DATE() 仅返回日期值，而 NOW() 返回当前日期时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:43:16.410

```
select * 
from TableName
where 
DATE_FORMAT(columnName,'%m-%d-%Y') = '01-01-2012' 
```

# ruby-on-rails - Rails：引导模式的问题（它不会关闭，背景不会变暗）

> ID：13779476
> 
> 赞同：0
> 
> 时间：2012-12-08T16:38:54.287
> 
> 标签：ruby-on-rails, ajax, twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap 的 Rails 网站上工作。

当用户点击一个链接时，网站会向控制器发送一个 ajax 调用，控制器会呈现一个部分（模态）。

.js 文件：

```
$ ->
    $('#play').click (e) ->
        e.preventDefault()
        $.post "/hype", (data) ->
            $("#hhh").html data //a dummy div to put the data (I dont use this) 
```

物品控制器：

```
def hype_modal
    @item = Item.where(:end => Time.zone.now .. '2040-12-28 08:08:00').order("launch ASC").limit(1).first #Item.find_by_rank(1)
    render "items/partial/_hypemodal"
  end 
```

部分（模态）（items/partial/_hypemodal.html.erb）

```
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="tr">
    <div class="modal-body"><%= raw @item.link %></div>
</div> 
```

该链接工作正常（我可以单击它，然后打开模式）。问题是如果我在模式之外单击它不会关闭（这是正常行为，所以它应该可以工作......）。另一个问题是背景不会变暗（变暗）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:42:05.333

尝试这个

```
<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="tr">
<div class="modal-body"><%= raw @item.link %></div> 
```

对于结束问题，您是否从控制台收到任何错误？

# c++ - C ++数组选择平方数并制作新向量

> ID：13779477
> 
> 赞同：1
> 
> 时间：2012-12-08T16:39:02.450
> 
> 标签：c++, arrays, cube

我必须从一个向量中查看以下哪个是平方数，然后制作另一个只有平方数的向量例如：（4,15,6,25,7,81）第二个将是（4,25,81 )

4,25,81 因为 2x2=4 5x5=25 和 9x9=81

我是这样开始的：

```
{

    int A[100],n,r,i;
    cout<<"Number of elements=";
    cin>>n;
    for(i=1;i<=n;i++)
    {
        cout<<"A["<<i<<"]=";
        cin>>A[i];
    }
    for(i=1;i<=n;i++)
        {
            r=sqrt(A[i]);
            if(r*r==A[i])

    }

return 0;

} 
```

但我不确定如何继续

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:06:00.797

有一个算法：

```
std::copy_if(inputs.begin(), inputs.end(), std::back_inserter(squares),
   [](int N) {int s=(int)sqrt(N); return s*s==N; }); 
```

您可能需要稍微详细说明一下，例如从 更改`int`为`unsigned`，或立即返回`false`负数（除非您想涉及复数，而不仅仅是整数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:02:45.153

由于您事先不知道用户将输入多少整数或其中有多少实际上是正方形，因此您可能应该使用动态数组分配（或者甚至更好，使用像 std::vector 这样的容器）。

```
int A[],n,r,i, numSquares = 0;
cout<<"Number of elements=";
cin>>n;

if(n>MAX_NUMBERS) {
  // error: user wants to enter too many integers
}

A = new[n];  // dynamically allocate array

for(i=0;i<n;i++)  // array indexing ranges from 0 to n-1
{
    cout<<"A["<<i<<"]=";
    cin>>A[i];
}
for(i=0;i<n;i++)
{
    r=sqrt(A[i]);
    if(r*r!=A[i]) {  // A[i] is not a square, "erase" it
      A[i] = INT_MAX;
    } else {
      ++numSquares;  // A[i] is a square, leave it alone
    }
}

// collect all squares not "erased" in a new array
int squares[] = new int[numSquares], j=0;
for(int i=0; i<n; i++)
  if(A[i]!=INT_MAX)
    squares[j++] = A[i];

delete [] A;
delete [] squares; 
```

# pthreads - 如何枚举当前进程中所有 pthread 的 pthread_t？

> ID：13779478
> 
> 赞同：6
> 
> 时间：2012-12-08T16:39:12.037
> 
> 标签：pthreads

我需要控制进程中所有 pthread 的 CPU 亲和性。一些 pthread 是由第三方库创建的。有没有办法枚举进程中所有现有 pthread 的 pthread_t 以便我可以在它们上调用 pthread_setaffinity_np() ？

# objective-c - NSArray 和 NSDictionary

> ID：13779480
> 
> 赞同：0
> 
> 时间：2012-12-08T16:39:36.670
> 
> 标签：objective-c, ios, nsarray, nsdictionary

我在 NSArray 中有 NSDictionaries，如下所示。

> 数组（字典（“用户”：1，“p1”：1），字典（“用户”：2，“p1”：3），字典（“用户”：1，“p1”：5），字典（“用户”：2，“p1”：7））

我想把这个数组变成字典，如下所示。

```
NSArray *u1 = [NSArray arrayWithObjects:@"1", @"5", nil];
NSArray *u2 = [NSArray arrayWithObjects:@"3", @"7", nil];
keys = [NSArray arrayWithObjects:@"u1", @"u2", nil];
points = [NSDictionary dictionaryWithObjectsAndKeys:u1, @"u1", u2, @"u2", nil]; 
```

我怎样才能做到这一点？我迷路了，你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:52:36.873

难道你不能只遍历你的原始数组，询问每个字典键“user”的对象是否为 1，如果是，将对象复制到索引 0 处的新数组中？或者，如果您的用户编号按计数顺序排列，甚至可能索引编号等于用户编号。然后重复 "user" = 2 等。然后制作一个字典，以便每个键/对象对由键数组 (keys[i]) 中的键和新数组 (objects[i]) 中的对象创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:42:59.737

你试过什么？

这是一些*直接*输入答案的代码，因此尚未经过测试：

您还没有为原始数组命名，因此我们假设它是：

```
NSArray *originalArray; 
```

我们需要一个可变字典来存储结果：

```
NSMutableDictionary *points = [NSMutableDictionary new]; 
```

现在我们需要处理原始数组中的每个元素，它是一个字典：

```
for(NSDictionary *item in originalArray)
{ 
```

`points`获取数组中匹配的当前条目`item`。您不为您的条目提供类型，因此我们将使用`id`：

```
 id currentUser = [item objectForKey:@"user"];
   NSMutableArray *currentValues = [points objectForKey:currentUser]; 
```

如果这是`currentUser`then `currentValues`will be的第一次出现`nil`，我们需要为该`p1`值创建一个数组并将其添加到`points`：

```
 if (currentValues == nil)
      [points addObject:[NSMutableArray arrayWithObject:[item objectForKey:@"p1"]
                                                 forKey:currentUser
                        ]
      ] 
```

否则，我们只需将`p1`值添加到数组中：

```
 else
      [currentValues setObject:[item objectForKey:@"p1"]]; 
```

关闭循环并获取密钥：

```
}

NSArray *keys = [points allKeys]; 
```

现在，如果您使用的是 Xcode 4.5，您可以使用现代语法来处理其中的一些：

```
NSMutableDictionary *points = [NSMutableDictionary new];
for(NSDictionary *item in originalArray)
{
   id currentUser = item[@"user"];
   NSMutableArray *currentValues = points[currentUser];
   if (currentValues == nil)
      points[currentUser] = [NSMutableArray arrayWithObject:item[@"p1"];
   else
      [currentValues addObject:item[@"p1"]];
}
NSArray *keys = [points allKeys]; 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:40:08.707

大量的方法。这是另一个：

```
NSArray *originalArray = @[
    @{@"user":@"u1", @"p1":@"1"},
    @{@"user":@"u2", @"p1":@"3"},
    @{@"user":@"u1", @"p1":@"5"},
    @{@"user":@"u2", @"p1":@"7"}
];

NSLog(@"originalArray = %@", originalArray);

NSMutableDictionary *results = [NSMutableDictionary dictionary];

for (NSDictionary *dictionary in originalArray) {
    NSString *user = dictionary[@"user"];
    NSString *p1   = dictionary[@"p1"];

    if (!results[user])
        results[user] = [NSMutableArray array];

    [results[user] addObject:p1];
}

NSLog(@"results = %@", results); 
```

这需要：

```
originalArray = (
        {
        p1 = 1;
        user = u1;
    },
        {
        p1 = 3;
        user = u2;
    },
        {
        p1 = 5;
        user = u1;
    },
        {
        p1 = 7;
        user = u2;
    }
) 
```

并给出

```
results = {
    u1 =     (
        1,
        5
    );
    u2 =     (
        3,
        7
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T17:31:41.263

另一种可能的解决方案（适用于任意数量的用户）：

```
NSArray *orig = @[
    @{@"user" : @"1", @"p1" : @"1"},
    @{@"user" : @"2", @"p1" : @"3"},
    @{@"user" : @"1", @"p1" : @"5"},
    @{@"user" : @"2", @"p1" : @"7"},
];

// Create set of all users (without duplicates)
NSSet *users = [NSSet setWithArray:[orig valueForKey:@"user"]];

NSMutableDictionary *points = [NSMutableDictionary dictionary];
for (NSString *user in users) {
    // newKey = "u" + username, e.g. "u1" or "u2":
    NSString *newKey = [@"u" stringByAppendingString:user];

    // newValue = array of "p1" values of the current user:
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"user == %@", user];
    NSArray *newValue = [[orig filteredArrayUsingPredicate:pred] valueForKey:@"p1"];

    // Add to dictionary:
    [points setObject:newValue forKey:newKey];
}
NSLog(@"%@", points); 
```

*输出：*

```
{
    u1 =     (
        1,
        5
    );
    u2 =     (
        3,
        7
    );
} 
```

并且可以通过以下方式获得密钥

```
NSArray *keys = [points allKeys]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T17:24:45.377

你可以这样做（代码未测试）

```
NSMutableArray *keys=[NSMutableArray new];
NSMutableArray *u1=[NSMutableArray new]; 
NSMutableArray *u2=[NSMutableArray new];
NSMutableDictionary  *points=[NSMutableDictionary new];

for (id dict in array){
    NSString *user=[dict objectForKey:@"user"];
    NSString *p1=[dict objectForKey:@"p1"];
    [keys addObject:[NSString stringWithFormat:@"%@",user]];
    if( [user isEqualToString:@"1"] ){
        [u1 addObject:user];
    }
    else{
        [u2 addObject:user];
    }
}

points=[NSDictionary dictionaryWithObjectsAndKeys:u1,@"u1",u2, @"u2", nil]; 
```

# android - 通过数据库+资产在列表视图中的图像

> ID：13779481
> 
> 赞同：0
> 
> 时间：2012-12-08T16:39:44.617
> 
> 标签：android, image, listview, assets

我有一个数据库，它有一个动物的名字，在另一列中有动物的声音。列表视图工作正常，现在我想用资产中的图像扩展它。为此，我已经阅读了有关如何获取资产数据并使用它的信息。我尝试过的一个例子对我来说效果很好。现在我想要扩展 BaseAdapter 类中的这个“资产”代码（至少我认为我想要这个）。不幸的是，我做错了什么，因为我不能在 BaseAdapter 中使用 getAssets()。

问题从 try-catch 块开始：“getAssets”没有被识别

我会以哪种方式解决这个问题？创建另一个类，该资产代码可以在扩展的“活动”中运行？还是有更好的方法通过列表视图中的数据库信息显示图像？

感谢您对我熟悉 Android / Java 的支持。

```
public View getView(int position, View convertView, ViewGroup parent) {
    // get view reference
    View view = convertView;
    // if null 
    if(view == null) {
        // inflate new layout
        view = mInflater.inflate(R.layout.layout_list_item, null);
        // create a holder
        ViewHolder holder = new ViewHolder();
        // find controls
        holder.txtName = (TextView)view.findViewById(R.id.txtName);
        holder.txtPicture = (ImageView)view.findViewById(R.id.txtPicture);
        // set data structure to view
        view.setTag(holder);
    }

    // get selected user info
    UserInfo userInfo = mListUserInfo.get(position);
    // if not null
    if(userInfo != null) {
        // query data structure
        ViewHolder holder = (ViewHolder)view.getTag();
        // set data to display
        holder.txtName.setText(userInfo.getName() + ", " + userInfo.getPicture() );

        try {
                        // get input stream
                        InputStream ips = getAssets().open( userInfo.getPicture() + ".jpg");
                        Log.d("Imageloading", "Reading: " + ips);
                        // load image as Drawable
                        Drawable d = Drawable.createFromStream(ips, null);
                        // set image to ImageView

                        holder.txtPicture.setImageDrawable( d );
                    }
                    catch(IOException ex) {
                        Log.e("Imageloading", "Could not load '" + ex.getMessage()+ "'!");
                    }
    }       

    // return view
    return view;
} 
```

我刚刚编辑了代码。为了解决 getAssets() 的事情，我做了以下事情：

> holder.txtPicture.setImageDrawable(getSomePicture(null, userInfo.getPicture() + ".jpg"));

```
public Drawable getSomePicture(Context myContext, String WhichPicture) throws IOException {
 // get input stream
    InputStream ips = myContext.getAssets().open( WhichPicture );
    Log.d("Imageloading", "Reading: " + ips);
    // load image as Drawable
    Drawable d = Drawable.createFromStream(ips, null);
return d;    
} 
```

这仍然不是解决方案，正在研究更多......找到[延迟加载的有趣来源](http://www.technotalkative.com/android-asynchronous-image-loading-in-listview/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:58:06.237

您将无法访问 getAssets() 方法，因为这是只有 Context（及其子类 Activity）拥有的方法。我在这里发现最简单的方法是使您的 BaseAdapter 子类成为要使用它的 Activity 的私有内部类。这样，您就可以访问 getAssets() 方法。

这可能看起来像这样：

```
public class YourExampleActivity extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_layout);

    }

    private class YourListAdapter extends BaseAdapter {
        @Override
       public View getView(int position, View convertView, ViewGroup parent) {
            // get view reference
            View view = convertView;
            // if null 
            if(view == null) {
                // inflate new layout
                view = mInflater.inflate(R.layout.layout_list_item, null);
                // create a holder
                ViewHolder holder = new ViewHolder();
                // find controls
                holder.txtName = (TextView)view.findViewById(R.id.txtName);
                holder.txtPicture = (ImageView)view.findViewById(R.id.txtPicture);
                // set data structure to view
                view.setTag(holder);
            }

            // get selected user info
            UserInfo userInfo = mListUserInfo.get(position);
            // if not null
            if(userInfo != null) {
                // query data structure
                ViewHolder holder = (ViewHolder)view.getTag();
                // set data to display
                holder.txtName.setText(userInfo.getName() + ", " + userInfo.getPicture() );

                try {
                    // get input stream
                    InputStream ips = getAssets().open( userInfo.getPicture() + ".jpg");
                    Log.d("Imageloading", "Reading: " + ips);
                    // load image as Drawable
                    Drawable d = Drawable.createFromStream(ips, null);
                    // set image to ImageView

                    holder.txtPicture.setImageDrawable( d );
                }
                catch(IOException ex) {
                    Log.e("Imageloading", "Could not load '" + ex.getMessage()+ "'!");
                }
            }       

            // return view
            return view;
        } 

       // Override other key methods of BaseAdapter here
    }    
} 
```

或者，您可以在实例化 BaseAdapter 子类时在构造函数中获取 Context 对象，并保留对调用 getAssets() 的对象的引用。如果您需要此示例，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:59:38.923

要在非活动类中调用 getAssets() 函数，您需要参考 Context。在您更新的代码中，您调用了函数“getSomePicture()”并将 null 传递给 myContext 参数。这意味着您的代码将失败，因为您的方法代码中有 myContext.getAssets() 。

尝试在您的 getView 方法中执行此操作：

```
Context context = getContext();

holder.txtPicture.setImageDrawable( getSomePicture(context, userInfo.getPicture() + ".jpg") ); 
```

# php - 如何检查发布了哪些表单数据？

> ID：13779482
> 
> 赞同：1
> 
> 时间：2012-12-08T16:39:45.617
> 
> 标签：php, curl

我想使用 PHP cURL 将一些数据（对帖子发表评论）发布到 asp.net 网站。但它总是失败。

不确定我是否错过了任何表单数据。

所以我想知道什么样的工具/软件可以检查哪些表单数据发布到网页？我想我可能错过了一些领域。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:43:25.950

您可以使用 Firefox 上的 firebug 或 Google Chrome 的 Chrome 开发者工具来执行此类操作。

对于铬：

1.  右键单击页面中的元素并选择“检查元素”
2.  进入网络面板
3.  提交您的表格
4.  第一行应该是调用服务器以提交您的数据。单击它以分析标头并检测已将哪些参数发布到服务器

StackOverflow 的示例：打开开发人员工具，进入网络，然后在右上角的框中输入搜索，您会看到第一行是“搜索”，方法是 GET。单击它，您会看到`q`带有您搜索的值的参数

编辑：很多表单都带有一个隐藏的输入字段，其中包含在服务器上生成的唯一代码，必须在提交时提供，我猜您在使用 curl 提交时缺少此信息。您可以在开发人员工具中检查表单元素，看看是否有隐藏字段。

# c++ - 如何在 B 类中定义 A 类的对象

> ID：13779486
> 
> 赞同：3
> 
> 时间：2012-12-08T16:40:30.233
> 
> 标签：c++, class, object

我是 C++ 编程的初学者，我对如何将一个对象的类传递给另一个类有一个（我认为是愚蠢的）疑问。假设我们有这两个类：

```
class A {...}
class B {...} 
```

我想使用从 A 到 B 的对象。例如：

```
class B {
    A ab;
    [methods prototypes that include the object ab]
    method_B (A ab); //for example

    ...
} 
```

问题是，我可以这样做吗？考虑面向对象编程有意义吗？

或者，我可以在 main() 中定义一个 A 的对象，然后我会从 B 调用一个包含 A 的对象作为参数的方法？

我的问题是关于如何在不“违反”面向对象编程规则的情况下将另一个类中的对象使用到另一个类中（功能独立！）。

感谢您的任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:24:42.573

你可以这样做。许多库和语言都这样做。从面向对象的角度来看，您需要设计 A 类，使其公开（公共）一个最小且有用的接口，但要使用其他类（例如 B 类）。

# c - 从字符串中读取一位整数

> ID：13779487
> 
> 赞同：0
> 
> 时间：2012-12-08T16:40:38.110
> 
> 标签：c

我想从这样的文件中读取整数：

```
9 5  1847
6    9 5
 87     
2   48  1
7 1 5 4 2
6  17   8
   95  
4 6    8 
5192  7 4 
```

例如 1、8、4、7 将被视为不同的数字。

我试过这样：

```
 #define MAXLINE 1024

 void readFile(FILE *file){
     char line [MAXLINE];
     int j;
     while(fgets(line,MAXLINE,file)!=NULL){
         for(j=0;j<9;j++){              
             int a = atoi(&line[j]);
             printf("%d \n",a);         
         }      
     }
 } 
```

但它仅将 1847 视为一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:51:37.060

```
enum { MAXLINE = 1024 };

void readFile(FILE *file)
{
    char line[MAXLINE];
    while (fgets(line, sizeof(line), file) != 0)
    {
        char *str = line;
        int j;
        int pos;
        while (sscanf(str, "%1d%n", &j, &pos) == 1)
        {
            printf("%d\n", j);
            str += pos;
        }
    }
} 
```

`%1d`格式部分读取单个数字（但也跳过空格）。在`%n`C89 中，报告扫描在字符串中的位置；它不计为转换（因此与 1 进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:50:21.240

C 中的字符串以 NULL 结尾。这意味着，如果您将指针指向期望字符串的函数，则从该内存位置到第一个 NULL 字节的所有内容都被视为字符串的一部分。

话虽如此，您需要分别对待每个角色。首先你需要检查这个字符是否真的是一个数字。正如 Jonathan Leffler 所建议的，C 标准保证 '0'..'9' 是字符集中的连续范围：

> ISO/IEC 9899:2011 §5.2.1 字符集：*在源和执行基本字符集中，上述十进制数字列表中 0 之后的每个字符的值应比前一个字符的值大 1。*

因此，以下是正确的解决方案：

```
for (j = 0; j < 9; j++) {
   char c = line[j];
   if ('0' <= c || c <= '9')
       printf("%d \n", c - '0');
} 
```

而不是`c - '0'`你也可以使用`atoi`，但是你需要再次将你的 char 变成一个字符串（这需要进入 if ）：

```
char[2] s = " "; // " " only serves as a placeholder.
s[0] = c;
int a = atoi(s); 
```

# java - 排序来自不同类的对象的arraylist

> ID：13779490
> 
> 赞同：2
> 
> 时间：2012-12-08T16:40:55.367
> 
> 标签：java

我在 RMI 工作，我有不同的服务器（类），我想将这些类中的对象存储在 arraylist 中，然后我想通过返回一些整数的共享方法对它们进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:45:38.467

假设这些对象的类型`Foo`没有实现`Comparable<Foo>`但确实有一个方法`public int getBar()`，你可以通过你自己[`Comparator<Foo>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)的[`Collections#sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)喜欢这样：

```
List<Foo> foos = /* whatever */;
Collections.sort(foos, new Comparator<Foo> () {
   @Override
   public int compare(Foo a, Foo b) {
       return Integer.compare(a.getBar(), b.getBar());
   } 
}); 
```

请注意，这[`Integer#compare(int, int)`只是从 Java 7 开始](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#compare%28int,%20int%29)。如果您使用的是旧版本，请改用此实现：

```
 public int compare(Foo a, Foo b) {
       int x = a.getBar();
       int y = b.getBar();

       return (x < y) ? -1 : ((x == y) ? 0 : 1);
   } 
```

这[正是`Integer#compare()`内部运作](http://www.docjar.com/html/api/java/lang/Integer.java.html#1011)的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:43:19.507

使用[Comparator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:45:48.817

假设共享方法`public Integer sharedMethod()`然后进行如下排序：

```
 List<SharedClass> list = new ArraList<SharedClass>();
    ....

    //Sorting here
    Collections.sort(list, new Comparator<SharedClass>(){
      @Override
      public int compare(SharedClass sc1, SharedClasssc2){
          return sc1.sharedMethod().compareTo(sc1.sharedMethod());
      }
     }); 
```

如果返回`int`，则使用`Integer.compare`方法（**Java7**），如下所示：

```
 //Sorting here
    Collections.sort(list, new Comparator<SharedClass>(){
      @Override
      public int compare(SharedClass sc1, SharedClasssc2){
          return Integer.compare(sc1.sharedMethod(), sc1.sharedMethod());
      }
     }); 
```

如果使用低于 7 的 Java 版本，则：

```
 //Sorting here
    Collections.sort(list, new Comparator<SharedClass>(){
      @Override
      public int compare(SharedClass sc1, SharedClasssc2){
          int value1 = sc1.sharedMethod();
          int value2 = sc1.sharedMethod();
          //return 1, if value1 is greater,-1 if smaller and 0 if equal to value2\. 
          return (value1  < value2) ? -1 : ((value1 > value2) ? 1 : 0);
      }
     }); 
```

# python - 为什么 Django AllAuth 中没有使用 Facebook 范围？

> ID：13779491
> 
> 赞同：0
> 
> 时间：2012-12-08T16:40:58.003
> 
> 标签：python, django, facebook

```
SOCIALACCOUNT_PROVIDERS = {
    'facebook': { 
        'SCOPE': ['email', 'publish_stream'],
        'METHOD': 'oauth2' ,
        'LOCALE_FUNC': lambda request: return 'zh_CN'
    } 
}

SOCIALACCOUNT_QUERY_EMAIL = ACCOUNT_EMAIL_REQUIRED 
```

我已经在 Django AllAuth 的本地设置中指定了授权范围，但是在形成登录 url 时没有使用这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:11:25.277

这是我的错，当您将 allauth 设置保存在 local_settings.py 中时，它从未真正用作主 django conf 错过了这一行：

```
from local_settings import * 
```

# java - 将矩形保持在 JFrame 内

> ID：13779500
> 
> 赞同：1
> 
> 时间：2012-12-08T16:42:22.293
> 
> 标签：java, swing, user-interface, jframe, paintcomponent

我知道我是个白痴，这就是为什么我无法弄清楚但我正在尝试使用paintComponent绘制一堆具有随机大小和位置的矩形。我试图确保所有这些都画在框架内。我可以使用以下代码（片段）来做到这一点，但我想知道是否有比我将数字硬编码到程序中更好的方法来做到这一点。有没有我应该看看的方法可能是我正在寻找的方法？

这是覆盖 paintComponent() 方法的内部类：

```
class DrawPanel extends JPanel {
    public void paintComponent(Graphics g) {
        int red = (int)(Math.random()*256);
        int blue = (int)(Math.random()*256);
        int green = (int)(Math.random()*256);

        g.setColor(new Color(red, blue, green));
        //The following 4 lines keep the rects within the frame
        //The frame is 500,500
        int ht = (int)(Math.random()*400);
        int wd = (int)(Math.random()*400);

        int x = (int)(Math.random()*100);
        int y = (int)(Math.random()*100);

        g.fillRect(x,y,ht,wd);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T16:51:06.763

> 我想知道是否有比我将数字硬编码到程序中更好的方法。

就在这里

*   调用`getSize()`封闭的 JPanel，即 DrawPanel，这样您就可以看到正在绘制的组件的实际边界。（编辑：或者`getWidth()`按照`getHeight()`卢卡斯的建议——1+ 对他的回答！）。
*   此外，您通常会希望`paintComponent(...)`在孩子的覆盖中调用超级的方法。
*   此外，您通常希望在其他地方进行随机化，例如在 DrawPanel 的构造函数中，以免每次重新调整 GUI 大小时都更改矩形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:53:29.323

`DrawPanel`您应该根据组件大小来确定坐标和大小。同样使用[Random.nextInt](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)代替`Math.random()`将更容易根据面板的当前大小保持在范围内：

```
Random random = new Random();
int ht = random.nextInt(getHeight());
int wd = random.nextInt(getWidth());

int x = random.nextInt(getWidth() - wd);
int y = random.nextInt(getHeight() - ht); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T16:51:39.493

有一种方法可以获取您正在使用的面板的长度和宽度。

```
getHeight();
getWidth(); 
```

这些将返回您正在使用的 JPanel 的当前大小，这意味着如果您调整窗口大小，它实际上仍会在其中绘制它们。

[http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getWidth](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getWidth) ()

# model-view-controller - Cakephp 数据不保存在多个模型关联中

> ID：13779501
> 
> 赞同：1
> 
> 时间：2012-12-08T16:42:44.030
> 
> 标签：model-view-controller, cakephp-2.1

我正在尝试将数据保存在多个模型关联中，但根本没有保存相同的数据。我已经正确设置了，即表单中的数据正常（调试显示全部）并且 find 也获取了数据，但无法理解问题出在哪里。我的代码如下：

**控制器：**

```
if($url == "expense_reports") { $this->set('tab_content','Invoice - Expense Reports'); $this->render('/job/invoice2'); 
        if($this->request->is('post'))
    {//debug($this->data);
 $this->Event->Invoice->Expense->save($this->data);                         }
} 
```

**模型（协会）：**

**事件**

```
public $belongsTo = array(
        'EventType' => array(
            'className' => 'AgencyCalendar.EventType',
            'foreignKey' => 'event_type_id'
        )
    );

    public $hasMany = array(
        'Invoice' => array(
            'className' => 'AgencyCalendar.Invoice',
            'foreignKey' => 'event_id',
            'dependent' => false
        )
    ); 
```

**发票**

```
public $belongsTo = array(
        'Event' => array(
            'className' => 'AgencyCalendar.Event',
            'foreignKey' => 'event_id'
        )
    );

public $hasMany = array(
        'Expense' => array(
            'className' => 'AgencyCalendar.Expense',
            'foreignKey' => 'invoice_id',
            'dependent' => false
        )
    ); 
```

**费用**

```
public $belongsTo = array(
        'Invoice' => array(
            'className' => 'AgencyCalendar.Invoice',
            'foreignKey' => 'invoice_id'
        )
    ); 
```

对于这个特定的操作，我也没有得到任何 sql 转储，以找出实际发生的情况。另外，如何保存从我的费用视图中生成的多行。我的费用视图是自定义 url，所以这可能是不显示 sql 转储的原因，还是根本不保存数据的原因？请让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:48:14.553

我相信您正在寻找的是 saveAll。（http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array）

```
$this->Event->saveAll($this->data); 
```

只要您具备以下条件，这将起作用： - 模型关系设置正确 - $this->data 中的正确数组属性

# javascript - 在新标签中打开 url 或尽可能重用现有的

> ID：13779508
> 
> 赞同：33
> 
> 时间：2012-12-08T16:43:08.547
> 
> 标签：javascript, html, tabs

现在我有一个链接

```
<a href="blabla" target="_blank">link</a> 
```

但是，这总是会打开一个新标签。我想要以下效果

1.  如果用户已经有一个具有相同 URL 的选项卡，请重复使用该选项卡，并尽可能刷新
2.  否则，打开一个新标签

如何使用 JavaScript 实现这一点？

如果只有一些特定于浏览器的方法也没关系，因此没有相应支持的浏览器的用户将“回退”到always-new-tab方式。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-08T17:31:03.107

您可以设置特定窗口的名称，以便打开重用选项卡。问题是，只要 href 相同，它就不会被重新加载。所以你不能轻易获得`refresh`零件。

因此，例如，您可以拥有：

```
<a href="blabla" target="blabla">link</a>
<a href="foo" target="bar">link</a> 
```

在 JS 中，您实际上可以使用`window.open`. 您也可以使用 url as `target`，这样您就不需要手动指定：

```
<a href="blabla" onclick="window.open(this.href, this.href); return false">link</a>
<a href="foo" onclick="window.open(this.href, this.href); return false">link</a> 
```

您也可以概括，并在文档中添加一个点击侦听器，以便以这种方式打开一些链接。就像是：

```
<div id="container">
    <a href="blabla">link</a>
    <a href="foo">link</a>
</div>

<script>
    document.getElementById("container").onclick = function(evt){
        if (evt.target.tagName === "A")
            window.open(evt.target.href, evt.target.href);

        return false;
    }
</script> 
```

如果页面在同一个域上，此时您可能也尝试对页面进行经验刷新。

# jquery - CSS 系统替代 Masonry

> ID：13779512
> 
> 赞同：4
> 
> 时间：2012-12-08T16:43:27.667
> 
> 标签：jquery, css, css-transitions, jquery-masonry

我记得一个 CSS 网格系统替代 Masonry (Vanilla) [http://masonry.desandro.com/](http://masonry.desandro.com/)。该站点是黑色背景并显示/排列彩色框（元素周期表元素）。它还有根据形状和大小（如圆形、方形等）的过滤框。它还使用硬件加速。我花了很多时间找到它，但没有运气。有人知道这个网站吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-17T19:50:41.350

我正在使用这个。它适用于 Bootstrap。基本上，我使用的是 WALL，而不是容器：

```
<style>
.wall {
    width: 100%;
    padding: 0 20px;
    -moz-column-gap: 20px;
    -webkit-column-gap: 20px;
    column-gap: 20px;
    -moz-column-count: 1;
    -webkit-column-count: 1;
    column-count: 1;
} 
.wall > .brick {
    display: inline-block;
    width: 100%;
}

@media screen and (min-width:860px) {
    .wall {-moz-column-count: 2; -webkit-column-count: 2; column-count: 2;}
}

@media screen and (min-width:1280px) {
    .wall {-moz-column-count: 3; -webkit-column-count: 3; column-count: 3;}
}

@media screen and (min-width:1700px) {
    .wall {-moz-column-count: 4; -webkit-column-count: 4; column-count: 4;}
}

</style> 
```

这是这样设计的，因此砖块必须至少为 400 像素。`min-width`如果您不喜欢 400 ，您可以进行数学运算并更改s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T02:21:55.120

我会尝试 Salvattore，它使用 CSS 进行配置和所有设计，甚至不需要接触 JavaScript。

[http://salvattore.com/](http://salvattore.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:07:02.193

为什么不只检查其对应物同位素的来源：http: [//isotope.metafizzy.co/index.html](http://isotope.metafizzy.co/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-04T15:10:28.700

如果有人觉得它有用，这是另一种选择：http: [//suprb.com/apps/nested/](http://suprb.com/apps/nested/)

# .htaccess - 尝试更改样式表 url

> ID：13779513
> 
> 赞同：1
> 
> 时间：2012-12-08T16:43:37.457
> 
> 标签：.htaccess

这是我当前的 .htaccess 文件：

```
RewriteEngine On

RewriteBase /application/

RewriteRule (.*)/css/(.*).css www/$1/css/$2.css

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) index.php?p=$1 
```

所以我的最终目标是拥有

```
http://localhost/application/guestbook/css/style.css 
```

转发给

```
/application/www/guestbook/css/style.css 
```

它几乎可以工作了，但是当我转储 $_GET 时，我可以看到他正在寻找的网址是

```
www/www/guestbook/css/style.css 
```

有人能告诉我为什么它有 2 次 www/ 吗？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:23:25.710

这是一种方法：

**更新**

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^.*/(\w+/\w+/\w+\.css)$
RewriteRule .* application/www/%1 [L] 
```

将重定向此：

`http://localhost/application/anything1/anything2/anything3.css` 至

`http://localhost/application/www/anything1/anything2/anything3.css`

# php - mysql在搜索中双重数据

> ID：13779514
> 
> 赞同：1
> 
> 时间：2012-12-08T16:43:41.167
> 
> 标签：php, mysql

谁能告诉我这有什么问题

`$paramcari`是需要搜索的值，它应该是 a.status 不是 0 而不是 2 但过滤器不起作用的数据，输出总是显示所有状态，无论是 0 、 0 还是 2 ...我错过了什么？

```
$sql="select a.*, b.*, d.*,  e.*, f.*, j.*, k.*, DATE_FORMAT(a.tgldaftar,'%d %b %Y %H:%i') as tgldaftar,
      DATE_FORMAT(a.tglkeluar,'%d %b %Y %H:%i') as tglkeluar , i.*
      from daftar a
      INNER JOIN  pasien  b ON a.noRM=b.noRM 
      INNER JOIN  ranjang d ON a.idranjang=d.idranjang 
      INNER JOIN  ruang e ON d.idruang=e.idruang 
      INNER JOIN  kelas  j ON e.idkelas=j.idkelas 
      INNER JOIN  instalasi  k ON e.idinstalasi=k.idinstalasi
      INNER JOIN (select idjenispasien , jenispasien  from jenispasien ) f ON a.idjenispasien=f.idjenispasien 
      INNER JOIN rujukan i ON a.idrujukan=i.idrujukan and a.status !=0 and a.status != 2";

if($paramcari != ""){
    $sql.=" and b.nama like '%$paramcari%'  ";
    $sql.=" or j.namakelas like '%$paramcari%'  ";
    $sql.=" or e.namaruang like '%$paramcari%'  ";
    $sql.=" or b.idRM like '%$paramcari%'  ";
    $sql.=" or i.namars like '%$paramcari%'  ";
    $sql.=" or a.nodaftar like '%$paramcari%'  ";
}   

$sql.="ORDER BY a.tgldaftar ASC limit  $start,15   "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:00:02.000

您的搜索条件`and a.status !=0 and a.status != 2`附加到最后一个内部连接条件。相反，它应该处于 where 条件。将最后一个连接更改为

```
INNER JOIN rujukan i ON a.idrujukan=i.idrujukan
where a.status !=0 and a.status != 2"; 
```

还要在搜索条件中添加大括号，因为`and`优先级高于`or`

```
if($paramcari != ""){
    $sql.=" and (b.nama like '%$paramcari%'  ";
    ...
    $sql.=" or a.nodaftar like '%$paramcari%') ";
} 
```

# .net - ORA-01008 参数在查询中使用了两次

> ID：13779515
> 
> 赞同：1
> 
> 时间：2012-12-08T16:43:50.373
> 
> 标签：.net, oracle11g, odp.net, ora-01008

当我尝试使用使用两次的参数执行查询时，我得到 ORA-01008“并非所有变量都绑定”。但是，如果我将带有此参数的代码放在查询的末尾 - 它工作正常。

重现错误的简单程序

```
internal static class Program {
    private static void Main() {
        //this query does not work
        ExecuteSql(@"select
        category1_.ID as ID0_,
        category1_.ValidUntil as ValidUntil0_ 
    from
        Invoice invoice0_,
        Category category1_ 
    where
        ( invoice0_.Foo<:p0 or invoice0_.Foo>:p0 ) 
        and category1_.ValidUntil=:p1");

        //this works
        ExecuteSql(@"select
        category1_.ID as ID0_,
        category1_.ValidUntil as ValidUntil0_ 
    from
        Invoice invoice0_,
        Category category1_ 
    where
        category1_.ValidUntil=:p1 
        and ( invoice0_.Foo<:p0 or invoice0_.Foo>:p0)");
    }

    private static void ExecuteSql(string commandText) {
        Console.WriteLine("------");
        try {
            var cs = "User ID=nhibernate;Password=nhibernate;Data Source=192.168.0.101:1521";
            using (var connection = new OracleConnection(cs))
            using (var cmd = connection.CreateCommand()) {
                cmd.BindByName = true; // I want to bind parameters by name
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = commandText;
                cmd.Parameters.Add(":p0", OracleDbType.Int32, 42, ParameterDirection.Input);
                cmd.Parameters.Add(":p1", OracleDbType.TimeStamp, DateTime.Now, ParameterDirection.Input);

                connection.Open();
                cmd.ExecuteReader();
            }
        }
        catch (Exception e) { Console.WriteLine(e); }
    }
} 
```

我正在使用完全托管的 ODP.NET

Db 是 Oracle XE 11g Release2

# windows - 有没有办法一次将内存映射文件加载到内存中

> ID：13779518
> 
> 赞同：0
> 
> 时间：2012-12-08T16:44:40.277
> 
> 标签：windows, winapi

我有一个大的二进制文件（大约 1 GB），我想按顺序处理。我正在使用内存映射文件来访问该文件。有没有办法告诉 Windows 尽快交换整个文件？目前，每次出现页面错误时，Windows 似乎只加载一个页面，这会导致处理速度非常慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:58:22.780

我真的很惊讶没有人提到[PrefetchVirtualMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/Hh780543%28v=vs.85%29.aspx)：

```
BOOL WINAPI PrefetchVirtualMemory(
  _In_  HANDLE hProcess,
  _In_  ULONG_PTR NumberOfEntries,
  _In_  PWIN32_MEMORY_RANGE_ENTRY VirtualAddresses,
  _In_  ULONG Flags
); 
```

以下是其他一些链接：

*   [http://msdn.microsoft.com/en-us/library/ms810613.aspx](http://msdn.microsoft.com/en-us/library/ms810613.aspx)

*   [Win32 内存映射文件与 CRT fopen/fread 的性能](https://stackoverflow.com/questions/3980035/performance-of-win32-memory-mapped-files-vs-crt-fopen-fread)

*   [http://duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files](http://duartes.org/gustavo/blog/post/page-cache-the-affair-between-memory-and-files)

就个人而言，我不知道这对您的应用程序是否是一个好主意。但可以肯定 - 试试看，看看它是否有帮助！

恕我直言 ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:01:24.263

当您希望强制将文件的一部分分页到内存中时，请`ReadFile`使用您用于创建文件映射的文件句柄进行调用。

# css - 将大小设置为 CodeMirror 编辑器？

> ID：13779519
> 
> 赞同：2
> 
> 时间：2012-12-08T16:44:42.590
> 
> 标签：css, jquery-mobile, codemirror, sizing

我正在使用 jQuery Mobile 和 CodeMirror 作为代码编辑器创建移动应用程序。我不是设计师，所以我通常不会弄乱 CSS。

这是我到目前为止所拥有的[![有效的 XHTML](../Images/9b60c11de17ff5e5d956f2443f6f0c37.png)](https://i.stack.imgur.com/uqlY2.png) 。

我希望将 CodeMirror 控件延伸到页脚。CSS height 属性在这里不起作用。

// 编辑

问题出在父 DIV 的高度上，抱歉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T23:55:28.343

我还不能写评论。你试过了吗`editor.setSize(width, height)`

# javascript - 缩小 Oauth 访问令牌的范围，可能吗？

> ID：13779522
> 
> 赞同：1
> 
> 时间：2012-12-08T16:45:01.630
> 
> 标签：javascript, oauth, authorization, gdata, access-token

我正在开发一个[开源 javascript 项目](https://bitbucket.org/ytkyaw/ydn-db)。它具有客户端数据库、Oauth Connect 登录和对跨域资源服务器（如（GData、谷歌云存储、通过代理的 AWS）的熊令牌基础访问）。主要关注消费者云数据（你知道，开发人员获得了免费的数据存储）。

主要目标是在不使用后端服务器的情况下为 Web 应用程序提供数据库。它是通过将 Oauth 2 刷新令牌保留在服务器中来实现的，向 Web 应用程序提供访问令牌，以便它可以直接从资源服务器填充其客户端数据库。更新回资源服务器可能需要哑代理服务器。

登录用户可以将他的数据分享给其他登录用户。服务器根据需要提供访问令牌。在这种情况下，我希望降级访问令牌。一般一旦新用户开始使用应用，服务器会请求离线多范围读写授权。目前，据我所知，刷新令牌可以生成精确范围的访问令牌。

是否可以从离线刷新令牌请求降级访问令牌？即使从读写降级为只读也是非常有用的。

# javascript - Javascript 运算符 && 替代选项（限制所需）

> ID：13779523
> 
> 赞同：-3
> 
> 时间：2012-12-08T16:45:05.597
> 
> 标签：javascript

我怎么能写以下没有`&&`？

```
if(a == 1 && b == 2) { ... } 
```

我可以为操作员创建一个函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T16:55:35.647

创建一个函数来封装您的操作：

```
function compare(a, b, value1, value2) {
    if(a === value1) {
        if(b === value2) {
            return true;
        }
    }
    return false;
} 
```

你可以像这样使用它：

```
if(compare(a, b, 1, 2)) {
    // Your action..
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T16:46:42.367

你可以这样做

```
if(a==1){
  if(b==2){
    JS function
  }
} 
```

两者的工作方式相同，但是`if(a==1 && b==2)`是完全相同的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:46:55.940

不知道你为什么要这样做，但你可以嵌套`if`语句：

```
if(a == 1){
    if(b == 2){
        ...
    }
} 
```

或者你可以使用按位运算符，如果你真的只需要考虑`2`和`1`

```
if(b >> a === 1){
    ...
} 
```

有很多方法可以做到这一点，但这实际上取决于您的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T17:12:56.130

您可以利用原型继承，并创建一个构造函数，其原型使用方法扩展。

```
function Comparer(a, b) {
    if (!(this instanceof Comparer))
        return new Comparer(a, b);

    this.assign(a, b);
    this.compare();
}

Comparer.prototype.result = false;
Comparer.prototype.compare = function() {
    this.result = this.a == this.b;
};
Comparer.prototype.assign = function(a, b) {
    this.a = a;
    this.b = b;
};
Comparer.prototype.and = function(a, b) {
    this.assign(a, b);
    if (this.result !== false) 
        this.compare();
    return this;
};
Comparer.prototype.or = function(a, b) {
    this.assign(a, b);
    if (this.result !== true) 
        this.compare();
    return this;
}; 
```

并像这样使用它：

```
var a = 1,
    b = 2;

if (Comparer(a, 1).and(b, 2).result) 
    console.log("pass");
else
    console.log("fail"); 
```

* * *

我们甚至可以扩展它以摆脱`if`声明。

```
Comparer.prototype.then = function(fn) {
    if (this.result === true)
        fn();
    return this;
};
Comparer.prototype.otherwise = function(fn) {
    if (this.result === false)
        fn();
    return this;
}; 
```

并像这样使用它：

```
var a = 1,
    b = 2;

Comparer(a, 1)
    .and(b, 2)
    .then(function() { console.log("pass"); })
    .otherwise(function() { console.log("fail"); }); 
```

* * *

或者像这样缩短：

```
var log = Function.bind.bind(console.log, console);

var a = 1,
    b = 2;

Comparer(a, 1)
    .and(b, 2)
    .then(log("pass"))
    .otherwise(log("fail")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T17:00:09.677

您的问题有点毫无意义，但您可以使用乘法运算符`*`而不是`&&`：

```
if(a==1 * b==2){
    //do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T16:50:23.317

如果你想将操作符实现`&&`为一个*函数*，它会变得很难看，因为你需要将条件作为闭包传递，无论何时你关心短路和副作用。

**示例**：

```
if(condition && changeTheWorld()) { ... }

// Cannot be translated into a function call of this nature:
if(land(condition, changeTheWorld()) { ... } 
```

相反，您需要创建一个闭包：

```
if(land(condition, function() {return changeTheWorld()}) {...} 
```

如您所见，它确实很麻烦且冗长，而没有任何优势。

如果你真的需要这个功能，这里有一个

## 用短路实现

`&&`如果您将不得评估的条件（在短路的情况下）作为函数而不是表达式传递，则此函数正确模拟了语义。

换句话说，函数按顺序遍历参数，如果一个是函数，它首先评估它，否则它只取它的值，如果是假的，它通过返回假而中止，否则，它继续下一个参数。

```
function land(){
    for(var i = 0; i < arguments.length; i++) {
        var operand = arguments[i];
        var value = (typeof operand === 'function') ? operand() : operand;
        if (!value) {
            return false;
        }
    }
    return true;
} 
```

**示例**：

```
function evaluateTo(result) {
    return function() {
            console.log("Evaluating " + result);
        return result;
    };
}

if(land(true, evaluateTo(1))) {
    console.log("All truthy");
}
// Outputs:
// Evaluating 1
// All truthy

if(land(evaluateTo(1), evaluateTo(0), evaluateTo(true))) {
    console.log("All truthy");
}
// Outputs:
// Evaluating 1
// Evaluating 0 
```

**强制性导弹示例**

```
function changeTheWorld() {
    console.log("Missiles away!");
    // Firing 3 missiles
    return nukeTheGlobe(3);
}

if(false && changeTheWorld() == 3) { ... }
// we survived, missiles not fired

if(naiveLand(maybe, changeTheWorld() == 3) { ... }
// Missiles away! no matter what value `maybe` has

if(land(false, function(){ return changeTheWorld() == 3; })) {...}
// we survived, missiles not fired 
```

# python - 在 Python 中的列表中查找子字符串

> ID：13779526
> 
> 赞同：135
> 
> 时间：2012-12-08T16:45:38.777
> 
> 标签：python, string, list

### 背景：

示例列表：`mylist = ['abc123', 'def456', 'ghi789']`

如果子字符串匹配，我想检索一个元素，例如`abc`

### 代码：

```
sub = 'abc'
print any(sub in mystring for mystring in mylist) 
```

上面打印`True`列表中的任何元素是否包含该模式。

我想打印与子字符串匹配的元素。因此，如果我正在检查`'abc'`，我只想`'abc123'`从列表中打印。

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-12-08T16:49:22.473

```
print [s for s in list if sub in s] 
```

如果您希望它们用换行符分隔：

```
print "\n".join(s for s in list if sub in s) 
```

完整示例，不区分大小写：

```
mylist = ['abc123', 'def456', 'ghi789', 'ABC987', 'aBc654']
sub = 'abc'

print "\n".join(s for s in mylist if sub.lower() in s.lower()) 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-05-12T17:33:44.150

所有答案都有效，但它们总是遍历整个列表。如果我理解你的问题，你只需要第一场比赛。因此，如果您找到了第一个匹配项，则不必考虑列表的其余部分：

```
mylist = ['abc123', 'def456', 'ghi789']
sub = 'abc'
next((s for s in mylist if sub in s), None) # returns 'abc123' 
```

如果匹配位于列表的末尾或非常小的列表，则没有什么区别，但请考虑以下示例：

```
import timeit

mylist = ['abc123'] + ['xyz123']*1000
sub = 'abc'

timeit.timeit('[s for s in mylist if sub in s]', setup='from __main__ import mylist, sub', number=100000)
# for me 7.949463844299316 with Python 2.7, 8.568840944994008 with Python 3.4
timeit.timeit('next((s for s in mylist if sub in s), None)', setup='from __main__ import mylist, sub', number=100000) 
# for me 0.12696599960327148 with Python 2.7, 0.09955992100003641 with Python 3.4 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-08T16:49:24.010

使用一个简单的`for`循环：

```
seq = ['abc123', 'def456', 'ghi789']
sub = 'abc'

for text in seq:
    if sub in text:
        print(text) 
```

产量

```
abc123 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-08T16:56:31.053

我只是使用一个简单的正则表达式，你可以做这样的事情

```
import re
old_list = ['abc123', 'def456', 'ghi789']
new_list = [x for x in old_list if re.search('abc', x)]
for item in new_list:
    print item 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-08T16:49:27.200

这将打印所有包含 sub 的元素：

```
for s in filter (lambda x: sub in x, list): print (s) 
```

# asp.net-mvc - 如何关闭 MVC 表单验证

> ID：13779529
> 
> 赞同：1
> 
> 时间：2012-12-08T16:45:50.120
> 
> 标签：asp.net-mvc, validation, razor

我有一个数据优先的设置，所以我的模型是由我的数据库中的实体框架生成的，并且没有默认的 [Required] 注释。我有一个包含三个字段的简单表格。一个 ID 和两个 VARCHAR / 基于文本的字段。

无论我尝试什么，我都无法让 CRUD 表单停止验证。我在 Web.config 中禁用，我将 [ValidateInput(false)] 添加到控制器中的 Create() 方法，但没有效果。我将@Html.ValidationSummary 设置为false，

这是基本观点：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(false)

<fieldset>
    <legend>CallType</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.CALLTYPE)
    </div>
    <div class="editor-field">
        @Html.TextBox("calltype", "", new { style = "width: 50px;" })
        @Html.ValidationMessageFor(model => model.CALLTYPE) 
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.DESCRIPTION)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DESCRIPTION)
        @Html.ValidationMessageFor(model => model.DESCRIPTION)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

模型（由框架生成）：

```
public partial class CALLTYPES2
{
    public int ID { get; set; }
    public string CALLTYPE { get; set; }
    public string DESCRIPTION { get; set; }
} 
```

即使我在每个字段中只插入一个字符，它仍然会显示：“值'x' 无效”（我保留验证消息，以便查看发生了什么。）

我应该做些什么？稍后我将如何验证这些字段 - 我可以将 [Required] 添加到模型生成的代码中吗？如果我从数据库中重新生成模型怎么办？

这与控制器中的模型状态有关吗？

```
[HttpPost]
    public ActionResult Create(CALLTYPES2 calltype)
    {
        if (ModelState.IsValid)
        {
            db.CALLTYPES2.Add(calltype);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(calltype);
} 
```

不知道我错过了什么，我读过的教程也没有说明什么。感谢您的回复，并为我的无知道歉。

**更新**

发现我的错误 - 方法 Create() 中的对象名称“calltype”与表单字段“calltype”的名称/ID 相同。我猜绑定器试图将字符串“calltype”绑定到对象“calltype”。将其重命名为：

```
public ActionResult Create(CALLTYPES2 ctype) 
```

现在它可以在编辑和创建窗口中使用。“ctype”与“calltype”不冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:50:56.437

您忘记`ID`在表单中包含该字段。您可以将其作为隐藏字段包含在内：

```
@Html.HiddenFor(model => model.ID) 
```

现在，当表单提交时，ID 属性的值将被发送到服务器，默认模型绑定器不应该抱怨。

# database - Laravel 一对多关系返回 null

> ID：13779530
> 
> 赞同：0
> 
> 时间：2012-12-08T16:45:52.677
> 
> 标签：database, null, relationship, one-to-many, laravel

所以这就是我设置的。我有两张桌子；`users`和`todos`。每个用户可以有多个“待办事项”。

表格如下所示：

用户： ![在此处输入图像描述](../Images/124f7f4699722b15c4e7abd2f5860ac4.png)

待办事项： ![在此处输入图像描述](../Images/79071cd213632919319cf5b3f8cdedad.png)

和模型：

```
class User extends Eloquent 
{
    public function todo() {
        $this->has_many('todo');
    }
} 
```

和...

```
class Todo extends Eloquent 
{
    public function user() {
        $this->belongs_to('user');
    }
} 
```

请注意，我已经在数据库中为用户附加了一个“待办事项”。因此，话虽如此，我是否应该无法执行以下操作：

```
$user = User::find(1)->todo; 
```

获取该用户的待办事项？我目前在`dd()`-ing 时得到 Null ：

```
array(1) {
  ["todo"]=>
  NULL
} 
```

那么，有什么想法吗？我尝试`belongs_to()`从 Todo 的模型中删除，因为它不应该是必需的，对吧？无论哪种方式都没有区别。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:50:41.053

您需要返回关系对象，例如

```
class User extends Eloquent 
{
    public function todos() {
        return $this->has_many('Todo');
    }
} 
```

另请注意，返回数组的关系（例如 has_many、has_many_and_belongs_to）通常被命名为复数形式，因此“todos”与“todo”相对。

# android - ArrayAdapter：您必须为 textview 提供资源 id

> ID：13779531
> 
> 赞同：9
> 
> 时间：2012-12-08T16:45:54.097
> 
> 标签：android, sqlite, listview, android-arrayadapter

我有一个应用程序，我想用 SQLite 数据库中的数据填充 ListView ......在这部分我有一个问题，与 arrayAdapter ......

这是我填充listView的方法代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);
    PetListView = (ListView)findViewById(R.id.list);

    MyDatabaseHelper db = new MyDatabaseHelper(this);
    String [] items = new String[100];

    List<Pet> pets = db.getAllPets();
    for (int i = 0; i < 10; i++) {
        items[i] = pets.get(i).getName();                   
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.activity_list_item, R.id.textView1list, items);
    PetListView.setAdapter(adapter);

} 
```

这是在我的数据库助手中实现的方法：

```
public List<Pet> getAllPets() {
    List<Pet> petList = new ArrayList<Pet>();
    String selectQuery = "SELECT * FROM " + TABLE_PETS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            Pet pet = new Pet();
            pet.setID(Integer.parseInt(cursor.getString(0)));
            pet.setName(cursor.getString(1));
            pet.setAge(cursor.getString(2));
            petList.add(pet);
        } while (cursor.moveToNext());
    }
    cursor.close();
    return petList;     
} 
```

为什么是文本视图？我只使用 ListView ...

你能告诉我任何其他方式如何通过 SQLite 中的数据（名称）填充 listView 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T16:50:53.237

利用

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
          android.R.layout.activity_list_item, android.R.id.text1, items); 
```

代替

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
            android.R.layout.activity_list_item, R.id.textView1list, items); 
```

`android.R.id.text1`如果您使用 ListView 的默认布局，则用作TextView `activity_list_item`id

# html - Æ Ø Å 不起作用（每 10 秒更新一次 div）

> ID：13779534
> 
> 赞同：0
> 
> 时间：2012-12-08T16:46:15.380
> 
> 标签：html, character-encoding

当我每 10 秒更新一次 div 的内容时，像 ÆØÅ 这样的特殊字符会变成问号。怎么了？这是我的代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
   $('#chat').load('#chat');
}, 10000); // refresh every 10000 milliseconds

</script>
<body>
<div id="chat">
<div class="melding">
        <form action="chat.php?login=<?php echo $bruker; ?>" method="post">
        <table>
        <tr>
            <td><input style="width: 420px;" type="text" name="melding"><input style="
border: 1px solid white;
    background: #333;
    color: white;"type="submit" name="send" value="Send"></td>
        </tr>
        </table>
        </form>
<div style="color: white;">
    <?php
    $print = "SELECT * FROM chat WHERE (fra='$user' AND til='$bruker') OR (fra='$bruker' AND til='$user') ORDER BY id DESC LIMIT 100";

    $resultat = mysql_query($print);

    while($row = mysql_fetch_array($resultat)){ 
echo "<span class='red'>". nl2br(strip_tags($row['fra'])) .":</span> ". nl2br(strip_tags($row['melding'])) ."<br>";
}
?>
</div>
</div> 
```

我的代码以 UTF-8 格式保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:48:49.237

将此元标记添加到页面：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

它告诉浏览器您提供的字符是用 UTF-8 编码的。确保页面的其他内容也以 UTF-8 编码。

# python - Gunicorn 和 Gevent 使 Heroku 上的 Flask 应用程序崩溃

> ID：13779535
> 
> 赞同：4
> 
> 时间：2012-12-08T16:46:24.973
> 
> 标签：python, heroku, flask, gevent, gunicorn

我在 Heroku 上升级了我的应用程序以使用 Flask 0.9 和新的 Gevent，从那以后一直无法让该应用程序在 Heroku 上运行。它`python web_app.py`在 Procfile 中运行得很好，但使用：

```
web: gunicorn web_app:app -w 3 -b 0.0.0.0:$PORT -k gevent --max-requests 250 
```

其中应用程序的入口点是一个恰当地命名为 web_app.py 的文件。

我把它简化为一个基本的“hello world”，但仍然是一个崩溃。我也尝试不使用 Gunicorn，只使用 Gevent 服务器运行它，如[Flask 文档的其他服务器部分所述，](http://flask.pocoo.org/docs/deploying/others/)但同样会立即崩溃。我在想要么我把我的环境搞砸了，要么我的 requirements.txt 很糟糕。

这是我的 requirements.txt 文件：

```
jinja2
werkzeug
flask
wtforms
gevent
gunicorn
psycopg2
sqlalchemy
itsdangerous
flask-seasurf
flask-login
flask-debugtoolbar
flask-sqlalchemy
flask-script
flask-uploads
flask-failsafe
requests
alembic
braintree
cloudinary 
```

任何帮助将不胜感激，因为它无法使用 Flask 中的默认服务器处理任何有意义的流量。我需要提供更多信息吗？

编辑：

这是错误

```
app/web.1:  2012-12-08 21:18:22 [7] [INFO] Booting worker with pid: 7
app/web.1:  2012-12-08 21:18:22 [7] [INFO] Worker exiting (pid: 7)
app/web.1:  2012-12-08 21:18:22 [6] [INFO] Worker exiting (pid: 6)
app/web.1:  2012-12-08 21:18:22 [5] [INFO] Worker exiting (pid: 5)
app/web.1:  Traceback (most recent call last):
app/web.1:  File "/app/.heroku/venv/bin/gunicorn", line 12, in <module>
app/web.1:  load_entry_point('gunicorn==0.14.6', 'console_scripts', 'gunicorn')()
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/app/wsgiapp.py", line 32, in run
app/web.1:  WSGIApplication("%prog [OPTIONS] APP_MODULE").run()
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/app/base.py", line 124, in run
app/web.1:  Arbiter(self).run()
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 185, in run
app/web.1:  self.halt(reason=inst.reason, exit_status=inst.exit_status)
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 280, in halt
app/web.1:  self.stop()
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 328, in stop
app/web.1:  self.reap_workers()
app/web.1:  File "/app/.heroku/venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 419, in reap_workers
app/web.1:  raise HaltServer(reason, self.WORKER_BOOT_ERROR)
app/web.1:  gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3> 
```

请注意，我已经取出了我错误留下的所有打印报表，这根本没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:00:34.560

我刚刚使用了[Heroku-fails-to-start-my-app-but-foreman-start-works](https://stackoverflow.com/questions/11893040/heroku-fails-to-start-my-app-but-foreman-start-works)问题的解决方案。如果人们想知道，我在这个方法调用中附上了 app create ：

```
@failsafe
def create_app():
  from routes import app
  return app 
```

并按照该答案中的说明构建了我的个人资料：

```
web: gunicorn legalkin_app:create_app\(\) -w 3 -b 0.0.0.0:$PORT -k gevent --max-requests 250 
```

旁注，我做了一些愚蠢的事情必须这样做，但我不知道它是什么。

# html - 有没有办法将 Github 中的任何图表嵌入 HTML 中？

> ID：13779536
> 
> 赞同：6
> 
> 时间：2012-12-08T16:46:30.673
> 
> 标签：html, github

有没有办法嵌入来自 Github 的任何图表（在[https://github.com/Vizzuality/CartoDB-SQL-API/graphs](https://github.com/Vizzuality/CartoDB-SQL-API/graphs)找到的 4 个图表中的任何一个）？例如，[这个](https://github.com/Vizzuality/CartoDB-SQL-API/graphs/code-frequency)显示代码行的变化。

由于页面的结构是一致的，我很确定我可以抓取它，但这充其量是有点厚脸皮。请注意，我想要图像本身 - 而不是整个页面 - 包含在 div 中：

```
<div class="graphs wheader"> 
```

[这个问题](https://stackoverflow.com/questions/3347652/is-there-an-impact-graph-tool-for-non-github-projects)是我为此找到的最接近的问题，但显然不适用于 Github。宁可不重新发明轮子！

PS：这不是我有兴趣嵌入的项目，只是那个有足够的数据可以显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:59:39.113

这些图表是通过 javascript (d3.js) 和 SVG 动态构建的。这使得它们相当难以提取。但是，您也许可以重新创建它们；检查给定页面上用于构建图表的 javascript 资源。

# java - 运行单元测试右键单击上下文项在 IntelliJ 12 中不可见

> ID：13779537
> 
> 赞同：12
> 
> 时间：2012-12-08T16:46:33.403
> 
> 标签：java, junit, intellij-idea

我下载了最新的 intellij 12 版本，现在我没有看到右键单击上下文菜单项来为当前文件运行我的单元测试。

现在那个选项在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-02T11:30:46.107

刚刚在一个 maven 项目中遇到了同样的问题 - 我忘记将测试类标记为 public，它立即解决了它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-18T16:40:10.327

对我有用的解决方案如下......

右键单击测试文件夹----->将目录标记为----->选择测试源

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-05T11:47:01.253

我在 IDEA 14.1.4 下也遇到了这个问题，但是 JUnit 插件打开了。经过一段时间比较我的旧**{HOME}/.IdeaIC14**文件夹和新创建的文件夹后，我发现问题出在 AntDebugger v1.2.0 插件上。卸载它有帮助。

因此，如果有人仍然对上下文菜单中的运行项有问题，可能是因为某些未开发的插件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-24T03:42:53.580

尝试添加junit插件。首选项 -> 插件 -> junit。[![添加junit插件](../Images/934f9290a699e62d90852ff3e1722986.png)](https://i.stack.imgur.com/pqVeH.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-09T13:49:53.857

由于某种原因，我的项目设置似乎没有被 IntelliJ 12 正确拾取，我不得不将 /test 文件夹重置为测试源，现在它工作正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-18T10:02:28.490

在我的情况下，测试源被正确标记。File -> Invalidate Caches -> Restart 为我做了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-24T13:34:10.343

就我而言，问题是由于 Node 插件而发生的；禁用它可以解决问题；重新启动 IntelliJ 后，我的运行选项又回来了。

我可以通过查看 IntelliJ 的日志来确定问题，当我右键单击测试类/方法名称时出现 NoSuchMethod 错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-05T09:22:03.887

为我解决的问题是将测试文件放在一个单独的目录中。此外，测试目录应该位于 src 目录之外。然后，我有右键单击菜单项将目录标记为测试。最后，我必须将测试方法和包含它的类都设为“public”，并且该方法必须是“public void”。

我不知道所有这些限制都记录在哪里。无论如何，我是 Java 和 JUnit 的新手。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-14T10:42:34.457

我在 mac 上重新安装了 IntelliJ，它又可以工作了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-14T17:07:19.880

我在 IDEA 14.1.4 中遇到了这个问题。不知何故，我的 JUnit 插件在 Settings --> Plugins 中被禁用了。我重新启用它并重新开始营业。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-25T20:07:01.707

这意味着 IntelliJ 无法将您的工作区配置为 python 工作区。它通常在检测到 python 脚本时显示一条消息，并提供一个自动配置选项，如“configure python”。当我打开 python 工作区时没有出现此消息，因此没有识别出任何测试。

在 Java 和 Python 单元测试之间同时工作时，我遇到了这个问题。缓存可能会阻止识别 ​​python 工作区中的单元测试。

我刚刚使用文件菜单（IntelliJ IDEA）中可用的选项重新启动了缓存，并且在缓存重新启动后打开我的 python 工作区后，它立即重新配置了 python。

# asp.net - Ajax HTMLEditor - 复制、粘贴按钮未出现在 Firefox 和 Chrome 中

> ID：13779538
> 
> 赞同：0
> 
> 时间：2012-12-08T16:46:33.013
> 
> 标签：asp.net, html-editor

我在我的应用程序中使用了 Ajax HTMLEditor。当通过 FF 和 Chrome 访问页面时，工具栏上的复制和粘贴按钮不可见，尽管在 IE9 和 IE8 中看起来一切都很好。

在 FF 和 Chrome 中，css 属性显示默认设置为“无”，但在 IE 中没有。我尝试将值 css 属性 - 显示更改为“块”，现在虽然按钮可见，但功能不起作用。

您也可以在以下链接中看到相同的问题

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx)

有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T15:08:41.740

Firefox 和 Safari 在带有“display:none;”的标签内创建 HTML 编辑器时存在问题。解决方案是在包含它的标签可见之前不创建 HTML 编辑器。

# android - 以编程方式启用和设置输入法

> ID：13779541
> 
> 赞同：2
> 
> 时间：2012-12-08T16:46:37.770
> 
> 标签：android, android-input-method

我正在为安卓开发蓝牙键盘驱动程序。我想通过单击切换按钮自动启用我的键盘输入法并进行设置。通过启用我的意思是![在此处输入图像描述](../Images/6f3f33f744b76299a82f5ce3e9a3b70c.png)

![在此处输入图像描述](../Images/ec143b18ea5edcfea063436d606785d0.png)

现在我想通过单击切换按钮以编程方式执行此操作，我想为用户绕过这些步骤并为他们提供执行这些步骤的切换按钮。

```
InputMethodManager m = (InputMethodManager) BluezIMESettings.this.getSystemService(INPUT_METHOD_SERVICE);
m.setInputMethod(token, id); 
```

现在我在哪里可以获得这个令牌和 ID？，我在 API 描述中搜索我得到了这个

**token** 在输入法启动时提供给它的识别标记，允许它对自己执行此操作。

**id** 要切换到的新输入法的唯一标识符。

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:41:11.910

您不能以编程方式设置输入法，您必须导航到设置，以便用户可以更改设置。Android 保护了此选项，因此没有英国媒体报道软件接管该设备。

与以编程方式启用 GPS 相同，这是不可能的！

还有[这个问题](https://stackoverflow.com/questions/6901097/change-input-method-of-android-device-programatically-android)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-18T09:18:52.067

您可以以编程方式设置输入法，但您必须使用平台密钥为您的应用程序签名才能编写安全设置 (android.permission.WRITE_SECURE_SETTINGS)，这将您的可能性限制在您自己的 Android 端口上。

如果您使用平台密钥签署您的应用程序，那么简单的答案——“不可能......”——实际上是不正确的。

# haskell - 主机名无法识别错误

> ID：13779549
> 
> 赞同：1
> 
> 时间：2012-12-08T16:47:03.783
> 
> 标签：haskell, deployment, yesod

我一直在尝试为我的 yesod 网站设置 keter，但我遇到了以下问题：

```
Welcome to Keter

The hostname you have provided, 127.0.0.1:3000, is not recognized. 
```

据我所知，它与`host`某些设置文件中的值有关。

所以，我的问题是，它是在 keter 的配置文件中，还是特定于应用程序？（我正在使用 yesod 框架），它到底应该设置为什么？

# 编辑：

感谢 snoyberg 指出 ip 错误（完全忽略了它），现在它已经改变了。

### 稍微更新一下问题

我检查了应用程序的错误日志文件，它说：

```
HsCMS: user error (SQLite3 returned ErrorCan'tOpen while attempting to perform open "HsCMS_production.sqlite3".) 
```

这似乎与权限有关。使用 sudo 启动 keter 时会发生这种情况（甚至尝试以 root 身份启动），但如果我进入 /opt/keter/temp 并`./dist/build/HsCMS/HsCMS`从那里开始，则不会发生这种情况。那么，这是 keter 的错误（我怀疑）还是我做错了什么？sudo 不应该足以授予 keter 权限吗？

# 更新/解决方案

感谢 snoyberg 帮助我将问题缩小到权限问题。就我而言，问题是我愚蠢地`setuid`在配置中设置了一个用户，因此它在文件夹中没有权限。我接受了 snoybergs 的回答，因为这是导致此解决方案的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:43:07.393

`127.0.01`不是有效的 IP 地址。也许你的意思是`127.0.0.1`？

问题是无法识别*虚拟主机名。*每个 Keter 应用程序都必须指定它所侦听的虚拟主机名。这是由`host`应用程序本身的属性给出的。如果您查看[README 示例](https://github.com/snoyberg/keter#bundles)，主机名将是`www.yesodweb.com`.

# php - 检查 Login.php - 空白页？

> ID：13779550
> 
> 赞同：-2
> 
> 时间：2012-12-08T16:47:33.680
> 
> 标签：php, login

我正在开发一个基本的登录系统。我使用了很多资源，很多地方的代码都是从其他在线登录系统中提取的。`loginpage.html`问题是，当我输入用户名和密码并将其重定向到这个文件时，我简单而优雅地得到一个完全空白的页面，BLANK PAGE。

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
include 'connectingshit.php'; 

//Basically naming a session and starting one
session_name('litLogin');

//The cookie is going to live for 2 weeks
session_set_cookie_params(2*7*24*60*60);

//Now we actually start the session
session_start();
ob_start();
if($_SESSION['id'] && !isset($_COOKIE['RemainLoggedIn']) && !$_SESSION['rememberMe'])
{
    // If you are logged in, but you don't have the cookie (browser restarts)
    // and you have not checked the rememberMe checkbox:
    $_SESSION = array();
    session_destroy();
    // Destroy the session
}

if(isset($_POST['submit'])) 
{
    //I hope I know what I am doing, this is supposed to hold our errors.
    $errors = array();

    if(!$_POST['username'] || !$_POST['password'])
        $errors[] = 'All the fields must be filled in buddyboy!';
    if(!count($errors)) 
    {
      //Assigning the input form shit to the variables/strings or wtf they are
      $tinkerbells_username = $_POST['username'];
      $tinkerbells_password = $_POST['password'];
      $_POST['rememberMe'] = (int)$_POST['rememberMe'];

      // We remove all dangerous characters (!!!!) WTF? Escaping them "WOW"...
      $tinkerbells_username = stripslashes($tinkerbells_username);
      $tinkerbells_password = stripslashes($tinkerbells_password);
      $tinkerbells_username = mysqli_real_escape_string($conn, $tinkerbells_username);
      $tinkerbells_password = mysqli_real_escape_string($conn, $tinkerbells_password);

      $row = mysqli_fetch_assoc('SELECT id, username, password FROM members WHERE username = "$niloquieroser_username" AND password = "$niloquieroser_password"');

      //Does basically the username exist when $row lookes for it in the database
      if(($row['username']) && ($niloquieroser_username == $tinkerbells_username && $niloquieroser_password == $tinkerbells_password))
      {
    //Now fortunately or unfortunatley if it did work and everything is fine
    //We can continue.....
    $_SESSION['username'] = $row['username'];
        $_SESSION['id'] = $row['id'];
    $_SESSION['rememberMe'] = $_POST['rememberMe'];

    //We store some data in the session
    setcookie('RemainLoggedIn',$_POST['rememberMe']);
    //cookie gets created
  }
  else $errors[]=("Wrongs username or/and password!");
    }
    header("Location: success.html");
    exit;
}
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:56:04.337

```
$row = mysqli_fetch_assoc('SELECT id, username, password FROM members WHERE username = "$niloquieroser_username" AND password = "$niloquieroser_password"'); 
```

MySQL 字符串应该是单引号；您调用`mysqli_fetch_assoc`的是字符串，而不是查询对象；您的变量不会被插值，因为 PHP 字符串使用单引号。并不是说您无论如何都应该对它们进行插值；使用准备好的语句。

另外，请散列你该死的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:20:30.553

首先，修复您的查询。如果不使用双引号定义字符串，则无法在字符串中嵌入 php 值：

```
$query = "SELECT id, username, password FROM members WHERE username = '$niloquieroser_username' AND password = '$niloquieroser_password'"; 
```

您想使用[mysqli_query()](http://php.net/manual/en/mysqli.query.php)来获取[mysqli_result](http://php.net/manual/en/class.mysqli-result.php)集。然后你可以像这样循环：

```
$result = mysqli_query($link, $query);
while($row = mysqli_fetch_assoc($result)) {
    //echo $row['username'];
    ...
} 
```

如果您设法使脚本正常工作，请注意，即使用户名/密码无效，您仍然会将它们重定向到`success.html`. 您应该将`header("Location: success.html");`其放入`if`仅检查结果集的行中，如果未找到该行，则回显错误消息。

# android - 如何在android中访问字符串数组位置？

> ID：13779562
> 
> 赞同：0
> 
> 时间：2012-12-08T16:48:47.853
> 
> 标签：android, exception

安卓 2.3.3

这是我的代码...

```
String[] expression = {""}; //globally declared as empty

somewhere in the code below, I am trying to assign a string to it.

expression[0] = "Hi";

I keep getting the following error...
12-08 22:12:19.063: E/AndroidRuntime(405): java.lang.ArrayIndexOutOfBoundsException 
```

有人可以帮我解决这个问题。我们可以像我一样直接访问索引 0 吗？

实际代码 :::

```
static int x = 0; // global declaration
String[] assembledArray = {""}; // global declaration

assembleArray(strSubString, expression.charAt(i)); //Passing string to the method

//Method Implementation
private void assembleArray(String strSubString, char charAt) {
        // TODO Auto-generated method stub

        assembledArray[x] = strSubString;
        assembledArray[x+1] = String.valueOf(charAt);
        x = x+2;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:00:47.557

问题不在`assembledArray[x]`；它在`assembledArray[x+1]`。

在第一次迭代时，`x+1 = 1`, 所以你不能访问数组的那部分。我建议使用动态数组，也就是`ArrayList`：

```
ArrayList<String> assembledArray = new ArrayList<String>(); // global declaration

assembleArray(strSubString, expression.charAt(i)); //Passing string to the method

//Method Implementation
private void assembleArray(String strSubString, char charAt) {
    assembledArray.add(strSubString);
    assembledArray.add(String.valueOf(charAt));
} 
```

这样，Java 负责调整大小，您无需跟踪`x`.

# java - Hibernate 一对一映射

> ID：13779570
> 
> 赞同：3
> 
> 时间：2012-12-08T16:49:54.840
> 
> 标签：java, hibernate, mapping, one-to-one

我在班级学生和班级点之间有一对一的休眠映射：

```
@Entity
@Table(name = "Users")
public class Student implements IUser {

    @Id
    @Column(name = "id")
    private int id;

    @Column(name = "name")
    private String name;

    @Column(name = "password")
    private String password;

    @OneToOne(fetch = FetchType.EAGER, mappedBy = "student")
    private Points points;

    @Column(name = "type")
    private int type = getType();
    //gets and sets...

@Entity
@Table(name = "Points")
public class Points {

    @GenericGenerator(name = "generator", strategy = "foreign", parameters = @Parameter(name = "property", value = "student"))
    @Id
    @GeneratedValue(generator = "generator")
    @Column(name = "id", unique = true, nullable = false)
    private int Id;

    @OneToOne
    @PrimaryKeyJoinColumn
    private Student student;
    //gets and sets 
```

然后我做：

```
Student student = new Student();
        student.setId(1);
        student.setName("Andrew");
        student.setPassword("Password");

        Points points = new Points();
        points.setPoints(0.99);

        student.setPoints(points);
        points.setStudent(student);

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        session.save(student);
        session.getTransaction().commit(); 
```

而hibernate将student保存在表中，但不保存对应的点。可以吗？我应该单独保存积分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:53:01.757

```
@OneToOne(fetch = FetchType.EAGER, mappedBy = "student", cascade=CascadeType.PERSIST)
private Points points; 
```

你能试试这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:53:49.670

默认情况下，Hibernate 中没有级联操作。您应该在一对一关系中指定 CascadeType。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T16:55:38.233

如果您想保存`Student`和`Points`您需要`CascadeType`在注释中使用，请参阅此处获取[文档](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/#entity-hibspec-cascade)

# asp.net-mvc - 我的视图模型没有使用 CSS

> ID：13779574
> 
> 赞同：0
> 
> 时间：2012-12-08T16:50:48.153
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在 Index.cshtml 文件中有这段代码：

```
 @{ViewBag.Title = "Home";}
<link href="Home.css" rel="stylesheet" type="text/css"/>
<img id="logo" src="~/Content/Images/Logo.png" /> 
```

该文件是我的 ASP.NET MVC4 应用程序中的一个视图。

当我运行 Web 应用程序时，我可以看到源代码在此周围添加了适当的 HTML，并且还添加了对“Content\Site.css”文件的引用。

但是，在运行应用程序时，似乎既没有使用 Site.css 文件，也没有使用我自己的 Home.css CSS 文件。首先，当我在运行应用程序时查看源代码时，我对 Site.css 所做的任何编辑都不会反映出来，这很奇怪。在运行项目并通过浏览器检查源代码之前，我已经保存了所有内容并构建了项目。

其次，似乎没有使用指向 Home.css 的 CSS 链接（与我的视图位于同一文件夹中）。HTML 编辑器对该文件没有问题，因此表明该路径有效 - 但是当我在浏览器的源代码编辑器中单击 Home.css 时，我收到 404 错误，表示该文件不存在。

知道我在这里做错了什么吗？

我在这里使用的实际图像正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:18:39.047

您还可以使用`@url.content()`辅助方法将您的相对路径转换为绝对路径。当您要实现具有多个区域的网站时，它非常有用，而且它也是在 MVC 中设置内容路径的常用样式，因此最好这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:53:49.667

> 似乎没有使用指向 Home.css 的 CSS 链接（与我的视图位于同一文件夹中）。

该`Views`文件夹被限制从客户端直接访问。所以你不应该在其中放置任何 CSS、javascript 或图像文件。它们应该位于您的`~/Content`文件夹（或可从客户端访问的其他文件夹）中。然后像这样引用它：

```
<link href="~/Content/Home.css" rel="stylesheet" type="text/css"/> 
```

就您的第一个问题`~/Content/Site.css`而言，样式表可能会被浏览器缓存。尝试清除缓存。如果您在发布模式下运行应用程序并启用了 Bundles，ASP.NET MVC 4 将自动发出一个缓存响应标头，以便将捆绑包中包含的静态资源缓存在浏览器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:55:35.253

css 属于头脑 - 我受不了 .net

它还不需要在标签末尾有结束的 /> - 它会把事情搞砸。XHTML 是正确的，但不是每个人都理解它。打开链接标签并尝试...

# java - Dalvikvm - 无法解析静态字段 [Noclassdeferror] - Android

> ID：13779581
> 
> 赞同：0
> 
> 时间：2012-12-08T16:51:06.083
> 
> 标签：java, android, eclipse

我目前正在尝试从另一个项目加载一个类，但它在运行时而不是编译时给了我这个错误：

```
VFY: unable to resolve static field 840 (Read) in Lshared/TestingMode;

Caused by: java.lang.NoClassDefFoundError: shared.TestingMode 
```

这是课程：

```
public enum TestingMode {
Read,
Write} 
```

我已经导入了项目并修复了 Java 构建路径，因此没有编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:57:36.163

而是创建枚举，创建一个公共类，它的成员在公共静态最终变量中，并从类名访问它。

请参阅此答案[https://stackoverflow.com/a/4822906/603233](https://stackoverflow.com/a/4822906/603233)

# c - 用户选择的数学函数

> ID：13779582
> 
> 赞同：1
> 
> 时间：2012-12-08T16:51:16.037
> 
> 标签：c, input, math.h

我正在编写一些应该使用用户选择的数学函数（来自 math.h）的代码。我有类似的东西

```
printf("If you want to use sin, press 's'\n"
       "If you want to use cosh, press 'c'\n");
do choice = getchar();
while (choice != 's' && choice != 'c'); 
```

如何存储用户选择的功能？我想将它放在某个变量中`fun`，然后通过编写在计算中使用它`fun(x)`，但不知道如何做到这一点。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:54:50.293

```
double (*proc)(double x) = NULL;
if (choice == 's') proc = sin;
else if (choice == 'c') proc = cosh;
// ...

double y = proc(x): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:09:11.530

你需要函数指针。函数指针就像指向您可以执行的代码的指针。因此，例如，您可以有一个函数指针，它接受所有接受一个 double 并返回一个的函数（例如 sin、cos、sqrt、tan、arctan 等）。在这些类型的菜单场景中，使用数组通常是最好的：

```
double (*funcs)(double)[] = {&sin, &cosh}
char choice;
printf("If you want to use sin, press '1'\n"
       "If you want to use cosh, press '2'\n");
do choice = getchar();
while (choice != '1' && choice != '2');
char choice2[2] = {choice, '\0'};
funcs[atoi(choice2)-1](operand); 
```

# java - Hibernate 搜索投影 - StaticAliasToBeanResultTransformer

> ID：13779586
> 
> 赞同：1
> 
> 时间：2012-12-08T16:52:04.223
> 
> 标签：java, hibernate, hibernate-search

使用[ResultTransformer](http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html/search-query.html#d0e5787)的 Hibernate Search 文档提供了以下示例：

```
org.hibernate.search.FullTextQuery query = 
    s.createFullTextQuery( luceneQuery, Book.class );
query.setProjection( "title", "mainAuthor.name" );
query.setResultTransformer( 
    new StaticAliasToBeanResultTransformer( 
        BookView.class, 
        "title", 
        "author" ) 
);
List<BookView> results = (List<BookView>) query.list();
for(BookView view : results) {
    log.info( "Book: " + view.getTitle() + ", " + view.getAuthor() );
} 
```

但是，`StaticAliasToBeanResultTransformer`该类在 Hibernate 核心 jar 中不存在。

有谁知道这是否应该是我还无法识别的不同类别？或者它是否存在于我没有包含的另一个 Hibernate 项目中？

我需要实现将索引字段映射到我的“BookView”bean 中的属性的想法，因为我的属性和字段的名称不同。我正在使用 Hibernate 4.1.8 和 Hibernate Search 4.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:50:56.880

Right, there is no such class. See also [https://forum.hibernate.org/viewtopic.php?f=9&t=1004608](https://forum.hibernate.org/viewtopic.php?f=9&t=1004608). Just write your own transformer by implementing *org.hibernate.transform.ResultTransformer*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T21:40:05.537

AFAIK 在 Hibernate 代码库中没有这样的类。我相信有一天它是样本的一部分，但从那以后就找不到了。

最简单的方法是编写自己的实现。

# facebook - 如何通过 ID 号识别 Facebook 应用开发者？

> ID：13779592
> 
> 赞同：0
> 
> 时间：2012-12-08T16:52:53.923
> 
> 标签：facebook, ownership, owner

我们去年创建了一个应用程序，并且仍在使用它。现在的问题是，办公室里的任何人都无法在访问 developer.facebook.com 时看到该应用程序。

问：谁是我们应用程序的“所有者”，ID 为 273488249346057

我们尝试了办公室的每个电子邮件地址都没有结果...没有选择，需要一些建议如何检索此信息，以便我们知道我们必须使用什么用户/电子邮件登录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:04:38.317

如果您有应用程序的密钥，您可以通过此图形 api 调用检索开发人员

[https://graph.facebook.com/APP_ID/roles?access_token=APP_ID|SECRET_KEY](https://graph.facebook.com/APP_ID/roles?access_token=APP_ID|SECRET_KEY)

您可以在此处找到特定应用程序的完整信息列表[https://developers.facebook.com/docs/reference/api/application/](https://developers.facebook.com/docs/reference/api/application/)

否则你不能得到开发者名单

# c# - 覆盖绘制方法 C#

> ID：13779597
> 
> 赞同：2
> 
> 时间：2012-12-08T16:53:02.163
> 
> 标签：c#, forms, paint

我有两个表格表格 1 和表格 2。

表格 2 继承自表格 1。在表格 1 中，我有一个用于特定面板的 on_Paint 方法，我正在其中绘制图像。由于 Form 2 是从 Form 1 继承的，因此在我运行程序之前面板显示为已绘制（关于 Form 2 的设计）。

问题是，现在我需要在表格 2 中绘制图像后在此图像上绘制一些东西。我怎样才能做到这一点？

这是一些使问题更清楚的代码。

// 这是Form 1 on_Paint 方法

```
private void grid_Paint(object sender, PaintEventArgs e)
{
    Image img = Image.FromFile(resourcesPath+ "grid.fw.png");

    gridGraphics = grid.CreateGraphics(); 
    gridGraphics.DrawImage(img, 0, 0, 650, 550);
} 
```

// 这是我想在绘制网格后调用的方法。它位于表格 1 中：

```
public void paintSprites(int row, int column, int value)
{
     int yLoc = 0;
     int xLoc = 0;
     Graphics g = grid.CreateGraphics();

     switch (row)
     {
         case 0: yLoc = 435; break;
         case 1: yLoc = 355; break;
         case 2: yLoc = 275; break;
         case 3: yLoc = 195; break;
         case 4: yLoc = 115; break;
         case 5: yLoc = 35; break;
     }

     switch (column)
     {
         case 0: xLoc = 35; break;
         case 1: xLoc = 120; break;
         case 2: xLoc = 205; break;
         case 3: xLoc = 290; break;
         case 4: xLoc = 375; break;
         case 5: xLoc = 460; break;
         case 6: xLoc = 545; break;
     }

     if (value == 1)
     {
         g.DrawImage(red, xLoc, yLoc, 65, 65);
     }
     else g.DrawImage(gold, xLoc, yLoc, 65, 65);
 } 
```

该方法位于Form 2中，调用上面的方法：

```
public void checkWhichToPaint()
{
    for (int i = 0; i < ROWS; i++)
    {
        for (int j = 0; j < COLUMNS; j++)
        {
            if (gridMap[i, j] != 0)
            {
                paintSprites(i, j, gridMap[i, j]);
            }
        }
    }
} 
```

在创建 Form 2 的新实例并显示它之后，我正在调用方法 checkWhichToPaint()：

```
Tournament tournament = new Tournament();
tournament.LoadGame();
tournament.Show();  
tournament.checkWhichToPaint(); 
```

我在哪里可以调用此方法，例如在调用 grid_Paint 后绘制它？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:51:13.253

这是任何可能需要它的人的答案！

在表格 1 中：

```
 protected virtual void grid_Paint(object sender, PaintEventArgs e)
    {
        Image img = Image.FromFile(resourcesPath+ "grid.fw.png");

        gridGraphics = grid.CreateGraphics();
        gridGraphics.DrawImage(img, 0, 0, 650, 550);
    } 
```

在表格 2 中：

```
 protected override void grid_Paint(object sender, PaintEventArgs e)
   {
       checkWhichToPaint();
       base.grid_Paint(null, null);
   } 
```

享受 ！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:13:58.473

在运行表单 2 代码之前，覆盖第二种形式中的绘制方法并调用基本绘制方法。

# java - EntityNotFoundException: Bean 已被删除 - 延迟加载失败

> ID：13779600
> 
> 赞同：4
> 
> 时间：2012-12-08T16:53:24.080
> 
> 标签：java, playframework, ebean, playframework-2.1

我正在使用 Play 迈出第一步！带有Java的框架（v2.1-rc1），现在我遇到了ebean的第一个问题。我有一个导航实体，它与自身具有多对一关系。一旦我尝试访问 parentNavigation 中的标题字段，我就会收到以下错误：

`[EntityNotFoundException: Bean has been deleted - lazy loading failed]`

正如我发现的那样，只有当数据库中不存在父导航时才会出现错误。在这种情况下，我不应该收到一个空的导航对象吗？

导航实体：

```
package models;

import javax.persistence.*;
import play.db.ebean.*;

@Entity
public class Navigation extends Model {

    @Id
    public Long id;

    @Column(name="c_title")
    public String title;

    @Column(name="id_parent")
    public Long parentId;

    @ManyToOne()
    @JoinColumn(name="id_parent")
    public Navigation parentNavigation;

    public static Finder<Long,Navigation> find = new Finder<Long,Navigation>(
        Long.class, Navigation.class
    );
} 
```

我在控制器中的操作：

```
public static Result index() {
    Navigation navigation = Navigation.find.byId(2L); // this one doesn't work, but the entry with ID 30 does
    return ok(views.html.app.index.render(navigation));
} 
```

而我的观点：

```
@(navigation: Navigation)

@main("Welcome to Play 2.0") {

    This navigation: @navigation.title <br>
    Parent: @navigation.parentNavigation.title 

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T18:14:57.357

如果我理解正确，您有一行，其`parent_id`列包含`2`（例如），但`2`表中没有 ID 行。

如果是这样，那么出现异常是正常的。通过将所有不存在的数据设置`parent_id`为 NULL 来清理数据，并向`parent_id`列添加外键约束，这样这种情况就不会再发生了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:10:05.223

一般来说，最好在尝试访问之前检查关系是否不为空：

```
This navigation: @navigation.title <br>
Parent: @if(navigation.parentNavigation != null){@navigation.parentNavigation.title} else {This nav has no parent} 
```

当然，`else`如果不需要，您可以跳过该子句

# php - 匹配目录的第一个字母

> ID：13779601
> 
> 赞同：0
> 
> 时间：2012-12-08T16:53:25.500
> 
> 标签：php, mysql

假设我有一张班级表。班级表里，有很多学生拿着他们的照片。在第一次注册中，我已经用图片注册了班级和学生。图片被放入类id_classname 之类的目录中。然后，我更改了班级名称。现在，我要添加学生的照片。现在，由于类名已更改，无法识别新图片。图片 url 将设置为 classid_class(new)name。如何匹配目录的第一个字母？这是我的更新代码：

```
 $classID= $_POST["classID"];
    $className= $_POST["className"];
    $p1 = $_FILES['p1']['name'];
    $p2 = $_FILES['p2']['name'];
    $p3 = $_FILES['p3']['name'];

    $direct = $_POST["className"];
    $direct = strtolower($direct);
    $direct = str_replace(' ', '_', $direct);

    $tfish = $classID."_".$direct;  //the directory variable will have new name 
    because it can't be fetched if the directory has been changed many times//

    $file = "slider_imagesClass/".$tfish."/";
    $url = "/".$tfish."/"; 
```

我怎样才能使变量匹配目录的第一个字母，因为 classID 不会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:02:02.560

PHP 将字符串视为字符数组。您可以使用以下方法访问第一个字符：

```
$direct[0]; 
```

# php - 正则表达式 + preg_match_all - 获取属性的值

> ID：13779605
> 
> 赞同：2
> 
> 时间：2012-12-08T16:53:39.277
> 
> 标签：php, regex, wordpress, preg-match-all

我正在尝试获取post 中第一个标签的`href`属性值，即**image**。 这是我到目前为止所拥有的： `<a>`

 **```
$pattern = "/<a.+href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\").*>/i";
$output = preg_match_all($pattern, $post->post_content, $matches);
$first_link = $matches[1][0]; 
```

但是，这**不起作用**。

我有一个代码来获取**一个**有效的标签的`src`值：`<img>`

 **```
$pattern = "/<img.+src=[\'"]([^\'"]+)[\'"].*>/i";
$output = preg_match_all($pattern, $post->post_content, $matches);
$first_img = $matches[1][0]; 
```

因为我不是正则表达式和 php 的专家，所以我不知道我做错了什么。

此外，我找不到任何体面、有条理的正则表达式指南，因此指向一个的链接也很有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:09:21.023

这不是您应该使用正则表达式解决的问题。如果你想解析 HTML，你需要的是一个 HTML 解析器，而 PHP 已经为你准备了一个非常棒的！

```
$html = <<<HTML
<a href="http://somesillyexample.com/some/silly/path/to/a/file.jpeg">
HTML;

$dom = new DomDocument;
$dom->loadHTML($html); // load HTML from a string
$elements = $dom->getElementsByTagName('a'); // get all elements with an 'a' tag in the DOM
foreach ($elements as $node) {
    /* If the element has an href attribute let's get it */
    if ($node->hasAttribute('href')) {
        echo $node->getAttribute('href') . "\n";
    }
}
/*
will output:

http://somesillyexample.com/some/silly/path/to/a/file.jpeg
*/ 
```

有关更多详细信息，请参阅[DOMDocument](http://php.net/dom)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T17:06:37.083

您应该为此使用 DOM 解析器。如果您可以使用 3rd 方库，请查看[这个](http://simplehtmldom.sourceforge.net)。它使您的任务变得异常简单：

```
$html = new simple_html_dom();
$html->load($post->post_content);

$anchor = $html->find('a', 0);
$first_link = $anchor->href; 
```

如果由于某种原因不能使用这个库，使用[PHP 的内置 DOM 模块](http://php.net/manual/en/book.dom.php)仍然是比正则表达式更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:15:51.080

只是关于您的正则表达式的一些注释：

```
 "/<a.+href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\").*>/i"
      ^ that's greedy, should be +?
      ^ that's any char, should be not-closing-tag character: [^>]

 "/<a.+href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\").*>/i"
            ^^^^^^ for readability use ['\"]

 "/<a.+href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\").*>/i"
                       ^ that's any char, you might wanted \.

 "/<a.+href=('|\")(.*?).(bmp|gif|jpeg|jpg|png)('|\").*>/i"
                    ^^ that's ungreedy (good!)       ^ see above (greedy any char) 
```

我现在无法测试它，因为我这里没有 PHP，但是纠正这些问题，也许你的问题已经解决了。还要检查切换默认“贪婪”的[模式修饰符。](http://php.net/manual/en/reference.pcre.pattern.modifiers.php) `/U`

然而，这个问题已经解决了很多次，所以你应该使用现有的解决方案（DOM 解析器）。例如，您不允许在 href 中使用引号（这对于 href 可能没问题，但稍后您将复制 + 粘贴您的正则表达式以解析另一个 html 属性，其中引号是有效字符）。****

# jquery - 插入列表元素

> ID：13779606
> 
> 赞同：2
> 
> 时间：2012-12-08T16:53:49.183
> 
> 标签：jquery

我有一个这样的列表元素：

```
<ul id="myList">
   <li>First</li>
   <li>Second</li>
   <li>Third</li> 
```

我想插入`<li>Ex</li>`before的一个元素`<li>Third>/li>`。到目前为止，我一直在尝试插入`<li>Ex</li>`的所有内容都是`<li>Second</li>`. 我使用了以下 jquery 方法：

insertAfter()、before()、after()、appendTo()……它们都做了同样的事情。这是它的样子：

```
<ul id="myList">
   <li>First</li>
   <li>Second
       <li>Ex</li>
   </li>
   <li>Third</li> 
```

但我想要这样：

```
<ul id="myList">
   <li>First</li>
   <li>Second</li>
   <li>Ex</li>
   <li>Third</li> 
```

对于如何解决这个问题，有任何的建议吗？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T16:58:13.220

你可以这样做

```
 $('<li>Ex</li>').insertAfter('li:eq(<give childnumber here>)') 
```

你想在`<li>Second</li>`使用后插入`eq(1)`

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/Fh4vG/)]]]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:07:20.837

```
​$('li', '#myList')​​​.filter(function() {
     return $.trim($(this).text()) == 'Third';
})​.before($('<li />', {text: 'EX'}))​​​ 
```

[**小提琴**](http://jsfiddle.net/JpvyX/10/)

或者如果索引始终相同：

```
$('li', '#myList').eq(2).before($('<li />', {text: 'EX'}))​​​; 
```

[**小提琴**](http://jsfiddle.net/JpvyX/13/)

# c# - MySQL 基础架构最佳实践

> ID：13779610
> 
> 赞同：1
> 
> 时间：2012-12-08T16:54:03.413
> 
> 标签：c#, mysql

所以，我现在正在编写一个相当复杂的 C# 应用程序，它使用 MySQL 作为数据库系统。我想知道，在整个程序中使用 MySQL 的最佳方式是什么？创建静态函数以便您可以在任何地方使用它？引用一个 SQLHandler 类，它完成了所有的通信吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:01:29.303

我会在一个可以充当数据访问层的接口中抽象出数据访问功能。然后有一个使用 MySQL 的实现。然后始终将接口传递给需要查询数据库的应用程序的其他层。通过这种方式，您可以在这些层之间获得弱耦合，并使这些层隔离的单元测试成为可能。

让我们举个例子。假设您有一个`Product`模型：

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

现在您可以定义一个存储库，它将抽象您需要使用此模型执行的操作：

```
public interface IProductRepository
{
    Product Get(int id);
} 
```

然后你可以使用 MySQL 来实现这个接口：

```
public class MySQLProductRepository: IProductRepository
{
    private readonly string _connectionString;
    public MySQLProductRepository(string connectionString)
    {
        _connectionString = connectionString;
    }

    public Product Get(int id)
    {
        using (var conn = new MySqlConnection(_connectionString))
        using (var cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = "SELECT name FROM products WHERE id = @id";
            cmd.Parameters.AddWithValue("@id", id);
            using (var reader = cmd.ExecuteReader())
            {
                if (!reader.Read())
                {
                    return null;
                }

                return new Product
                {
                    Id = id,
                    Name = reader.GetString(reader.GetOrdinal("name"))
                };
            }
        }
    }
} 
```

现在，需要与产品一起工作的应用程序的每一层都可以简单地使用`IProductRepository`as 构造函数参数并调用各种 CRUD 方法。

它仅在应用程序的[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)内部，您可以在其中连接依赖项并指定您将使用`MySQLProductRepository`. 理想情况下，此存储库的实例应该是单例。

您还可以查看流行的 ORMS，例如 NHibernate、Entity Framework、Dapper 等，以简化存储库中各种 CRUD 操作的实现并执行到域模型的映射。但是，即使您决定使用 ORM 框架，将关注点分成应用程序中的不同层仍然是一种很好的做法。如果您希望它们保持可维护性，这在设计复杂的应用程序时非常重要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T16:59:14.963

`MySQLHandler`如果您想始终保持 1 个连接处于活动状态，则一个好的做法是创建一个 Singelton 。

```
using System;

public class MySQLHandler
{
   private static MySQLHandler instance;

   private MySQLHandler() {}

   public static MySQLHandler Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new MySQLHandler();
         }
         return instance;
      }
   }
} 
```

如果您不关心连接数，您也可以创建一个静态`MySQLHelper`类。

# sql - SQL 中的瑞典语“personnummer”（个人身份号码）

> ID：13779613
> 
> 赞同：2
> 
> 时间：2012-12-08T16:54:19.467
> 
> 标签：sql, database, normalization

这是一个老问题的具体实例：如何在 SQL 数据库中存储“数字”（例如电话号码、IP 地址、社会保险号码）？

背景：在瑞典，个人身份证号（“personnummer”）非常普遍：您在与政府、银行、您的雇主等沟通时使用它们。在瑞典出生的人在出生时就被分配了它们。我的移民朋友们在获得个人号码并最终获得借记卡并开始寻找工作之前的几周内感叹黑暗。

我的组织需要存储我们成员的 personnummer。为此，我们有一个 SQL 数据库。**我应该如何存储数据？**

* * *

来自维基百科，关于[personnummer](http://en.wikipedia.org/wiki/Personal_identity_number_%28Sweden%29)的格式：

> 个人身份证号由 10 位数字和一个连字符组成。前六个对应于人的生日，格式为 YYMMDD。它们后跟一个连字符。100 岁以上的人用加号代替连字符。第七至第九是序列号。第九个奇数分配给男性，第九个偶数分配给女性。一些县当局，如斯德哥尔摩和一些银行，已经开始使用 12 位数字来允许 YYYYMMDD。这种格式也用于一些瑞典身份证[需要澄清]和瑞典欧洲健康保险卡，但不适用于国家签发的身份证件。
> 
> 第十位是校验和，是在 1967 年系统计算机化时引入的。

因此，对于今年出生的人来说，personnummer 可能是“120101-3842”。由于 Y2K，这通常也被格式化为“20120101-3842”，并且“用加号替换连字符”并不为人所知。

在数据库列中，我想我可以：

*   将其存储为`VARCHAR`，格式为“120101-3842”、“20120101-3842”或“201201013842”（通过获取 YYYYMMDD 格式中多余的连字符来减少字节）。
*   将完整存储`YYYYMMDDXXXX`为`INTEGER`，对于 32 位来说太大了，但在 64 位中没有问题。

在这种情况下，前导零不会有任何问题，并且使用 VARCHAR 几乎是两倍大小。与 IP 地址不同，将此数字存储为 INTEGER 不会使人更难阅读（即“127.0.0.1”与 相比`2130706433`）。

我很欣赏专栏的“严格性”，`INTEGER`但也觉得这可能会遇到看不见的问题。

编辑：我们确实需要使用校验和等来验证此输入，这需要对单个数字进行数学运算（乘法、求和等）。由于数字并不是真正的......呃......数量的一部分，而是十进制格式，因此将其视为 varchar 可能是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:17:09.007

我会将规范形式 201201013842 存储为 CHAR（而不是 VARCHAR）。

底线是您无法控制数字的语义（瑞典当局会这样做）。如果在某个时候他们决定在数字中添加非数字字符（就像旧格式中的数字一样），您将能够更好地应对这种变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:03:53.960

使用`VARCHAR`固定长度，因为它是最简单的方法。而且我认为您的组织不会存储所有 950 万居民的数量，因此节省空间是一个真正的设计目标？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:06:13.097

因此，据我了解，只有 2 位数年份的格式才需要连字符/加号。

如果我是你，我会在应用程序端转换为 4 位数年份格式（并去掉连字符）。然后将结果值存储为整数。正如您所说，这将节省空间，并允许您在数学上转换值（尽管我认为这可能与个人数字无关）。

我认为这里的关键是您应该选择一种**格式**，而不是尝试在数据库中管理两种不同的格式。这也将有助于实现应用程序的一致性。当涉及需要一种或另一种格式的外部应用程序时，您可以将转换放入传输代码中。

附带说明一下，创建一个触发器应该相当简单，该触发器会自动将 2 位数年份格式（只要您用数字替换连字符 / 加号）分配给 4 年格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-27T14:51:26.187

我们有同样的问题，我们目前将其`yyyyMMdd-xxxx`存储`yyyyMMdd`为`date`) 并添加一个约束以确保其唯一的数字。

# smalltalk - 检查对象是给定类的实例还是它的子类

> ID：13779614
> 
> 赞同：13
> 
> 时间：2012-12-08T16:54:25.503
> 
> 标签：smalltalk, pharo

在 Smalltalk 中是否有一种简单的方法可以做到这一点？我有 80% 的把握有某种方法，但在任何地方都找不到。

我知道我可以使用

```
(instance class = SomeClass) ifTrue: 
```

而且我知道我可以使用`superclass`等......但我希望有一些内置的东西:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-08T17:11:33.497

要测试 anObject 是否是 aClass 的实例：

```
(anObject isMemberOf: aClass) 
```

要测试它是 aClass 的实例还是其中一个子类：

```
(anObject isKindOf: aClass) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T17:13:17.520

你是对的，检查你使用的确切类（使用身份代替）：

> 实例类 == SomeClass ifTrue: []

有用的也是`isKindOf:`测试实例是否是给定类的类或子类：

> (实例 isKindOf: SomeClass) ifTrue: []

最好和最优雅的是在超类和对等类中编写一个测试方法，然后像这样使用它：

> 实例 isSomeClass ifTrue: []

# html - wordpress 主题找不到html来添加锚标签

> ID：13779618
> 
> 赞同：1
> 
> 时间：2012-12-08T16:54:54.423
> 
> 标签：html, wordpress, themes

我正在编辑 [Nimble Wordpress 主题] (http://www.elegantthemes.com/demo/?theme=Nimble)，并且我正在尝试编辑主页上的“了解更多”按钮，以便他们将用户到“关于”子页面上的特定部分。现在他们将用户带到 3 个单独的子页面，理想情况下，我希望他们将用户带到单个“关于”页面上的特定部分。我可以在 Wordpress 编辑器中访问“关于”页面的 HTML，但我不能找到主页的 html 以更改标签。该主题仅允许我通过电子面板进行非常小的更改。所有后端文件都是基于 .php 的，我只了解 HTML，而不了解 PHP。任何见解将不胜感激。谢谢！

** 谢谢你的提示！有没有办法修改 PHP 以便我可以指定 3 个单独的链接？每个小部件一个链接？**

```
<?php 
        if ( 'on' == et_get_option( 'nimble_display_services', 'on' ) ){
            $blurbs_number = apply_filters( 'et_blurbs_number', 3 );
            echo '<div id="services" class="clearfix">';
                for ( $i = 1; $i <= $blurbs_number; $i++ ){
                    $service_query = new WP_Query( apply_filters( 'et_service_query_args', 'page_id=' . get_pageId( html_entity_decode( et_get_option( 'nimble_home_page_' . $i ) ) ), $i ) );
                    while ( $service_query->have_posts() ) : $service_query->the_post();
                        global $more;
                        $more = 0;
                        $page_title = ( $blurb_custom_title = get_post_meta( get_the_ID(), 'Blurbtitle', true ) ) && '' != $blurb_custom_title ? $blurb_custom_title : apply_filters( 'the_title', get_the_title() );
                        $page_permalink = ( $blurb_custom_permalink = get_post_meta( get_the_ID(), 'Blurblink', true ) ) && '' != $blurb_custom_permalink ? $blurb_custom_permalink : get_permalink();

                        echo '<div class="service' . ( 1 == $i ? ' first' : '' ) . ( $blurbs_number == $i ? ' last' : '' ) . '">';
                            if ( ( $page_icon = get_post_meta( get_the_ID(), 'Icon', true ) ) && '' != $page_icon )
                                printf( '<img src="%1$s" alt="%2$s" class="et_page_icon" />', esc_url( $page_icon ), esc_attr( $page_title ) );

                            echo '<h3>' . $page_title . '</h3>';

                            if ( has_excerpt() ) the_excerpt();
                            else the_content( '' );

                            echo '<a href="' . esc_url( $page_permalink ) . '" class="learn-more">' . __( 'Learn More', 'Nimble' ) . '</a>';

                        echo '</div> <!-- end .service -->';
                    endwhile; 
                    wp_reset_postdata();
                }
            echo '</div> <!-- end #services -->';
        } 
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:52:35.857

在您的主题文件夹中找到 index.php（这是控制您的主页的 PHP 文件）。在stackoverflow上复制代码。我将告诉您在此页面中要更改的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:41:36.120

要编辑了解更多按钮链接 url，您必须调整以下代码行：

```
echo '<a href="' . esc_url( $page_permalink ) . '" class="learn-more">' . __( 'Learn More', 'Nimble' ) . '</a>'; 
```

和

```
echo '<a href="http://url-of-the-page-you-want-to-display" class="learn-more">' . __( 'Learn More', 'Nimble' ) . '</a>'; 
```

**PS：**上面的代码会将 中指定的相同 URL 复制`href=""`到所有三个小部件。

# java - Java RMI - 检查注册表是否存在

> ID：13779624
> 
> 赞同：2
> 
> 时间：2012-12-08T16:55:44.407
> 
> 标签：java, rmi, rmiregistry

我在使用 Java RMI 时遇到了一些麻烦。

我可以检查注册表是否存在吗？这行代码应该给我注册表。

```
LocateRegistry.getRegistry(ip, Registry.REGISTRY_PORT); 
```

但是，当我使用错误的 IP 地址或找不到注册表的 IP 地址调用它时，该方法就会卡住。

所以我的问题是，我可以在调用 getRegistry() 之前以某种方式检查某个 IP 地址是否有注册表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:13:12.667

不。无论如何，测试任何资源可用性的最佳方法是尝试使用它。在这种情况下，调用lookup() 并捕获异常。无论如何你都必须这样做，所以这样做两次是毫无意义的。

# android - 自定义对话框上的 Admob 广告

> ID：13779629
> 
> 赞同：2
> 
> 时间：2012-12-08T16:56:29.313
> 
> 标签：android, dialog, admob

我正在尝试在应用程序上实施 Admob 广告。我想要做的是在自定义对话框上投放横幅广告。我已经尝试了一切，但找不到解决方案。

我为对话框制作了一个自定义 xml。在xml上添加admob时，它不会运行。所以我尝试以编程方式进行。但仍然无法使其工作。

```
public void OnClickButton(View paramView)
  {
    int btn_id = paramView.getId();

       if (btn_id == R.id.hint_field)
       {
     //set up dialog
           if (hint != null && hint.length()>0) {
          final Dialog dialog = new Dialog(Activity.this);
          dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);

          //ad loading
          dialog.setContentView(R.layout.custom_dialog);
          RelativeLayout layout = (RelativeLayout)findViewById(R.id.dialog_l);
          layout.addView(ad);
          AdRequest r = new AdRequest();
          ad.loadAd(r);

          dialog.setTitle("Σχετικά με την λέξη :");
          dialog.setCancelable(true);

           //set up text
          TextView text = (TextView) dialog.findViewById(R.id.hint_text);
          text.setText(hint);

         //set up button
           Button button = (Button) dialog.findViewById(R.id.Button01);
           button.setOnClickListener(new OnClickListener() {
           public void onClick(View v) {
                   dialog.dismiss();
              }
          });

          // now that the dialog is set up, it's time to show it    
           dialog.show();
           dialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.ic_launcher);
     }
   } 
```

在按钮上单击我会显示一个自定义对话框。在我的 Activity 的 OnCreate 方法中，我制作了 adView

```
 AdView  ad = new AdView(this, AdSize.BANNER, "a15xxxxxxxxxxx"); 
```

我在以下位置得到 NullPointerException：layout.addView(ad);

有任何想法吗 ？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T19:22:41.910

问题解决了！我必须先给自定义对话框界面充气。下面的代码是工作代码！

```
 public void OnClickButton(View paramView)
  {
    int btn_id = paramView.getId();

       if (btn_id == R.id.hint_field)
       {
     //set up dialog
           if (hint != null && hint.length()>0) {
          final Dialog dialog = new Dialog(Activity.this, R.style.Theme_New);
          dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);
          dialog.setContentView(R.layout.custom_dialog);

          LayoutInflater inflater =(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          View main = inflater.inflate(R.layout.custom_dialog, null);
          dialog.setContentView(main);
          WindowManager.LayoutParams lp = new WindowManager.LayoutParams();

          LinearLayout linear = (LinearLayout)main.findViewById(R.id.ad_layout);

              ad = new AdView(this, AdSize.IAB_MRECT, "a15xxxxxxxx");

        AdRequest request = new AdRequest();
        Set<String> keywords = new HashSet<String>();
        keywords.add("game");
        request.setKeywords(keywords);

          linear.addView(ad);
          ad.loadAd(request);

          dialog.setTitle("Title :");
          dialog.setCancelable(true);

           //set up text
          TextView text = (TextView) dialog.findViewById(R.id.hint_text);
          text.setText(hint);

         //set up button
           Button button = (Button) dialog.findViewById(R.id.Button01);
           button.setOnClickListener(new OnClickListener() {
           public void onClick(View v) {
                   dialog.dismiss();
              }
          });

          // now that the dialog is set up, it's time to show it    
           lp.width = width;
           lp.height = WindowManager.LayoutParams.WRAP_CONTENT;
           dialog.show();
           dialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.ic_launcher);
           dialog.getWindow().setAttributes(lp);
           dialog.getWindow().getAttributes().width = LayoutParams.FILL_PARENT;
           dialog.getWindow().getAttributes().height = LayoutParams.WRAP_CONTENT;
     }
   }    
} 
```

# list - 从 Haskell 中的列表中获取随机样本而不替换的更好方法

> ID：13779630
> 
> 赞同：8
> 
> 时间：2012-12-08T16:56:29.733
> 
> 标签：list, haskell

我需要从更长的列表中随机抽取一个样本而不进行替换（每个元素在样本中只出现一次）。我正在使用下面的代码，但现在我想知道：

1.  是否有执行此操作的库函数？
2.  如何改进此代码？（我是 Haskell 初学者，所以即使有库函数也很有用）。

抽样的目的是能够将分析样本的结果推广到总体。

```
import System.Random

-- | Take a random sample without replacement of size size from a list.
takeRandomSample :: Int -> Int -> [a] -> [a]
takeRandomSample seed size xs
    | size < hi  = subset xs rs
    | otherwise = error "Sample size must be smaller than population."
    where
        rs = randomSample seed size lo hi
        lo = 0
        hi = length xs - 1

getOneRandomV g lo hi = randomR (lo, hi) g

rsHelper size lo hi g x acc
    | x `notElem` acc && length acc < size = rsHelper size lo hi new_g new_x (x:acc)
    | x `elem` acc && length acc < size = rsHelper size lo hi new_g new_x acc
    | otherwise = acc
    where (new_x, new_g) = getOneRandomV g lo hi

-- | Get a random sample without replacement of size size between lo and hi.
randomSample seed size lo hi = rsHelper size lo hi g x [] where
(x, g)  = getOneRandomV (mkStdGen seed) lo hi

subset l = map (l !!) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T21:39:59.313

这是 Daniel Fischer 在评论中建议的快速“粗略”实现，使用我首选的 PRNG（mwc-random）：

```
{-# LANGUAGE BangPatterns #-}

module Sample (sample) where

import Control.Monad.Primitive
import Data.Foldable (toList)
import qualified Data.Sequence as Seq
import System.Random.MWC

sample :: PrimMonad m => [a] -> Int -> Gen (PrimState m) -> m [a]
sample ys size = go 0 (l - 1) (Seq.fromList ys) where
    l = length ys
    go !n !i xs g | n >= size = return $! (toList . Seq.drop (l - size)) xs
                  | otherwise = do
                      j <- uniformR (0, i) g
                      let toI  = xs `Seq.index` j
                          toJ  = xs `Seq.index` i
                          next = (Seq.update i toI . Seq.update j toJ) xs
                      go (n + 1) (i - 1) next g
{-# INLINE sample #-} 
```

这几乎是对 R 的内部 C 版本的（简洁的）功能重写，`sample()`因为它被称为无需替换。

`sample`只是一个递归工作函数的包装器，该函数递增地打乱总体，直到达到所需的样本大小，只返回那么多打乱的元素。像这样编写函数可确保 GHC 可以内联它。

它易于使用：

```
*Main> create >>= sample [1..100] 10
[51,94,58,3,91,70,19,65,24,53] 
```

生产版本可能希望使用可变向量之类的东西，而不是`Data.Sequence`为了减少花费在 GC 上的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:27:29.173

我认为执行此操作的标准方法是使用前 N 个元素初始化一个固定大小的缓冲区，并且对于每个第 i 个元素，i >= N，执行以下操作：

1.  选择一个介于 0 和 i 之间的随机数 j。
2.  如果 j < N 则将缓冲区中的第 j 个元素替换为当前元素。

您可以通过归纳证明正确性：

如果您只有 N 个元素，这显然会生成一个随机样本（我假设顺序无关紧要）。现在假设直到第 i 个元素都是正确的。这意味着任何元素在缓冲区中的概率是 N/(i+1)（我从 0 开始计数）。

选取随机数后，第 i+1 个元素在缓冲区中的概率为 N/(i+2)（j 在 0 和 i+1 之间，其中 N 个元素最终在缓冲区中）。其他人呢？

```
P(k'th element is in the buffer after processing the i+1'th) =
P(k'th element was in the buffer before)*P(k'th element is not replaced) =
N/(i+1) * (1-1/(i+2)) =
N/(i+2) 
```

这是一些使用标准（慢速）System.Random 在样本大小空间中执行此操作的代码。

```
import Control.Monad (when)                                                                                                       
import Data.Array                                                                                                                 
import Data.Array.ST                                                                                                              
import System.Random (RandomGen, randomR)                                                                                         

sample :: RandomGen g => g -> Int -> [Int] -> [Int]                                                                               
sample g size xs =                                                                                                                
  if size < length xs                                                                                                             
  then error "sample size must be >= input length"                                                                                
  else elems $ runSTArray $ do                                                                                                    
    arr <- newListArray (0, size-1) pre                                                                                         
    loop arr g size post                                                                                                          
  where                                                                                                                           
    (pre, post) = splitAt size xs                                                                                                 
    loop arr g i [] = return arr                                                                                                  
    loop arr g i (x:xt) = do                                                                                                      
      let (j, g') = randomR (0, i) g                                                                                              
      when (j < size) $ writeArray arr j x                                                                                        
      loop arr g' (i+1) xt 
```

# html - Mozilla 布局和阴影不工作 CSS/HTML

> ID：13779633
> 
> 赞同：0
> 
> 时间：2012-12-08T16:56:38.750
> 
> 标签：html, css, internet-explorer, mozilla

很难发现这个页面的布局在 IE 和 Firefox 中都是错误的，完全（据我所知）中性代码。

在 IE 中，包含下一个的框对它来说太大了。

在 Mozilla 中它太小了。

当我使用该属性时，Mozilla 会显示框阴影：

```
box-shadow 
```

这很奇怪，我以为它使用了 -moz-box-shadow

以下是正在发生的事情：http: [//i.imgur.com/SvPAP.png](http://i.imgur.com/SvPAP.png)（Mozilla 盒子上的那条线来自 photoshop）。

以下是所有相关代码：

**HTML**：

```
<!DOCTYPE hmtl>

<html>

<head>

    <link rel="stylesheet" type="text/css" media="screen, projection" href="page.css"/>
    <link rel="stylesheet" type="text/css" media="screen, projection" href="text.css"/>
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Arvo' />
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=PT+Sans' />

<head>

<body>
    <div class="divCentre">
        <div class="divTitleCon">
            <p class="titleText">What Is This?</p>
        </div>
        <div class="divContentCon">
            <p class="contentText">

                TEXT

                <br /><br />

                TEXT

                <br /><br />

                TEXT

                <br /><br />

                <span class="footerText">

                    TEXT

                </span>

            </p>
        </div>
    </div>
</body>

</html> 
```

**CSS 页面：**

```
html, body
{
    margin: 0;
    padding: 0; 
}
body
{
    background-color: rgb(241, 250, 253);   
}
.divCentre
{
    position:absolute; 

    top: -25%;
    bottom: 0;
    left: 0; 
    right: 0;
    margin: auto;

    width: 380px;
    height: 230px;

    padding: 20px;

    overflow: hidden;

    border: 1px solid rgba(200, 200, 200, 1); /* BORDER */

    background-color: rgba(255, 255, 255, 1); /* BACKGROUND */

    color: rgb(100, 100, 100);

    -moz-box-shadow:
                0px 0px 5px rgba(130, 130, 130, 0.2), /* OUTER SHADOW */
          inset 0px 0px 5px rgba(0, 0, 0, 0.05); /* INNER SHADOW */ 
    -webkit-box-shadow:
                0px 0px 5px rgba(130, 130, 130, 0.2), /* OUTER SHADOW */
          inset 0px 0px 5px rgba(0, 0, 0, 0.05); /* INNER SHADOW */ 
}
.divTitleCon
{
    position: relative;

    width: 100%;
    height: 15%;
}
.divContentCon
{
    position: relative;

    margin-top: 20px;

    width: 100%;
    height: auto;
    max-height: 80%;

    word-wrap: break-word;

    overflow: hidden;
} 
```

**CSS 文本**：

```
p
{
    margin: 0;
    padding: 0; 
}

.titleText
{
    font: 32px Arvo;
    text-shadow: 0px 1px rgb(255,255,255);  
}

.contentText
{
    font: 14px PT Sans; 
    color: rgb(150, 150, 150);
    text-shadow: 0px 1px rgb(255,255,255);
}

.footerText
{
    color: rgb(200, 200, 200);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:15:59.710

似乎 Mozzila 和 Chrome 呈现文本完全不同（这里有问题的文本来自 Google 的字体 API，也许更本地的版本不会有这个问题。我会试验）。

无论如何，指定行高和使用通用字体很重要。

指定 just`line-height`将修复行之间的间距，间距为`<br /><br />`，但是，该行上的文本数量会有所不同。

Firefox 更倾向于将其压缩在一起，而 Google 将其呈现为“正确”，这是可以理解的。来自 Google API 的字体可能已针对 -webkit- 或其分支进行了优化。

无论哪种方式，这都很烦人，但却是必需的解决方法。

**TL;博士：**

通过更改修复：

```
font: 14px PT Sans; 
```

至

```
font: 14px Arial, Sans-Serif;
    line-height: 14px; 
```

# android - Maven 和 Android 向后兼容性 (android.os.StrictMode)

> ID：13779635
> 
> 赞同：3
> 
> 时间：2012-12-08T16:57:32.457
> 
> 标签：android, maven, android-strictmode, android-maven-plugin

我是 maven 新手，正在尝试用它设置一个 android 项目。我使用[maven-android-plugin](http://code.google.com/p/maven-android-plugin/)完成了基本设置，并且能够成功构建我的项目。我已将 min-sdk 版本添加到我的项目 pom 中

```
<dependency>
<groupId>com.google.android</groupId>
<artifactId>android</artifactId>
<version>2.2.1</version>
</dependency> 
```

我的目标 sdk 版本是 4.2，在 pom.xml 中也提到过。Maven 尝试针对这两个版本进行编译。当添加一些代码以仅使用特定的 android 版本运行时，问题就开始了。我添加的代码是（我正在重用[“有效显示位图”](http://developer.android.com/training/displaying-bitmaps/index.html) android培训文章中的这段代码）：

```
 public class Utils {
    private Utils() {};

    @TargetApi(11)
    public static void enableStrictMode() {
        if (Utils.hasGingerbread()) {
            StrictMode.ThreadPolicy.Builder threadPolicyBuilder =
                    new StrictMode.ThreadPolicy.Builder()
                            .detectAll()
                            .penaltyLog();
            StrictMode.VmPolicy.Builder vmPolicyBuilder =
                    new StrictMode.VmPolicy.Builder()
                            .detectAll()
                            .penaltyLog();

            if (Utils.hasHoneycomb()) {
                threadPolicyBuilder.penaltyFlashScreen();
                vmPolicyBuilder
                        .setClassInstanceLimit(ImageGridActivity.class, 1)
                        .setClassInstanceLimit(ImageDetailActivity.class, 1);
            }
            StrictMode.setThreadPolicy(threadPolicyBuilder.build());
            StrictMode.setVmPolicy(vmPolicyBuilder.build());
        }
    }

    public static boolean hasFroyo() {
        // Can use static final constants like FROYO, declared in later versions
        // of the OS since they are inlined at compile time. This is guaranteed behavior.
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO;
    }

    public static boolean hasGingerbread() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD;
    }

    public static boolean hasHoneycomb() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB;
    }

    public static boolean hasHoneycombMR1() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1;
    }

    public static boolean hasJellyBean() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN;
    }
} 
```

现在问题开始了。此代码即使在 android 2.2.1 上也运行良好，但 maven 构建失败并出现以下错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project laminar-app: Compilation failure: Compilation failure:
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[24,17] error: cannot find symbol
[ERROR] symbol:   class StrictMode
[ERROR] location: package android.os
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[35,35] error: package StrictMode.ThreadPolicy does not exist
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[36,47] error: package StrictMode.ThreadPolicy does not exist
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[39,31] error: package StrictMode.VmPolicy does not exist
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[40,43] error: package StrictMode.VmPolicy does not exist
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[55,12] error: cannot find symbol
[ERROR] symbol:   variable StrictMode
[ERROR] location: class Utils
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[56,12] error: cannot find symbol
[ERROR] symbol:   variable StrictMode
[ERROR] location: class Utils
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[61,59] error: cannot find symbol
[ERROR] symbol:   variable GINGERBREAD
[ERROR] location: class VERSION_CODES
[ERROR] /Users/shashant/Documents/workspace/Android/laminar-parent/laminar-app/src/main/com/laminar/utils/Utils.java:[65,59] error: cannot find symbol 
```

有几点我不明白。

1.  如果 maven 无法针对 android 2.2.1 lib 编译此代码，那么它在手机上运行时如何不会失败。（请注意，它甚至找不到 GINGERBREAD）。
2.  如何解决这个问题？对不起，我有限的 Maven 知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:51:41.273

您需要针对 Android 2.3 或更高版本编译应用程序才能获得`StrictMode`.

您必须在 IDE 中针对更高的操作系统版本编译应用程序。
在 Maven 配置中使用相同的版本。

# php - 如何使用 SplClassLoader

> ID：13779641
> 
> 赞同：1
> 
> 时间：2012-12-08T16:58:33.853
> 
> 标签：php, psr-0

我正在尝试了解和使用 PSR-0 Autoloader。但它不起作用。

我的文件夹结构：

核/

*   图书馆/
*   模型/

我在根目录下的 index.php

```
<?php
require_once 'Core/Library/SplClassLoader.php';

$loader = new SplClassLoader('Core', 'Core');
$loader->register();

use Model\Post; 
```

模型文件夹中的 Post.php。

```
<?php
namespace Model;

class Post implements PostInterface
{
// ... 
```

后接口

```
<?php
namespace Model;

interface PostInterface
{
//... 
```

我收到以下错误：

致命错误：在第 17 行的 C:\wamp\www\Test\index.php 中找不到类 'Model\Post'

```
Line 17: Init new Post; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T17:25:48.627

SplClassLoader 的工作方式如下：

```
$loader = new SplClassLoader('NamespaceName', 'path/To/Base/Directory'); 
```

您在`Core`这里注册命名空间，但您没有`Core\Model`命名空间，而只是`Model`

# prolog - 比较序言中的两个事实

> ID：13779642
> 
> 赞同：1
> 
> 时间：2012-12-08T16:58:37.867
> 
> 标签：prolog

我有这样的事实：

```
like(sara,'data base',3).
like(sara,'math',3).
like(sara,'physics',3).
like(sara,'law',3).
like(sara,'history',5).
like(sara,'science',1).
like(tom,'chemistry',3).
like(tom,'data base',2).
like(tom,'logic',3).
like(tom,'law',3).
like(tom,'history',3).
like(tom,'science',3).
:- dynamic same_like/3. 
```

我想比较事实以找到一个 sara 和 tom 都喜欢但水平不同的主题，所以我要做的是：

```
comp1 :-
    like(sara, NofC1, X),
    like(tom, NofC2, Y),
    NofC1 = NofC2,
    asserta( same_like(sara, NofC1, X) ),
    asserta( same_like(tom, NofC2, Y) ),
    same_like(sara, NC1, A),
    same_like(tom, NC2, B),
    NC1 = NC2,
    A =\= B, 
    write('sara and tom like the same subject " '),
    write(NC1),
    write(' " .But with different level, sara= '),
    write(A),
    write(' And tom = '),
    write(B),
    nl,
    fail. 
```

答案是正确的，但答案中有重复：

```
sara and tom like the same subject " data base " .But with different level, sara= 3 And tom = 2
sara and tom like the same subject " data base " .But with different level, sara= 3 And tom = 2
sara and tom like the same subject " history " .But with different level, sara= 5 And tom = 3
sara and tom like the same subject " data base " .But with different level, sara= 3 And tom = 2
sara and tom like the same subject " science " .But with different level, sara= 1 And tom = 3
sara and tom like the same subject " history " .But with different level, sara= 5 And tom = 3
sara and tom like the same subject " data base " .But with different level, sara= 3 And tom = 2
false 
```

.

问题是我怎样才能消除这种重复？？？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:33:50.190

你不应该在没有需要的情况下使用 asserta/1 。您的查询可能要简单得多

```
% define a reusable query
comp1(Argument, Person1, Level1, Person2, Level2) :-
    like(Person1, Argument, Level1),
    like(Person2, Argument, Level2),
    Person1 \= Person2, Level1 > Level2. 
```

**编辑**我改为`Level1 \= Level2`避免`Level1 > Level2`重复

```
% use the query and display facilities
comp1 :-
    forall(comp1(Argument, Person1, Level1, Person2, Level2),
          format('sara and tom like the same subject " ~s  " .But with different level, ~s=~d And ~s=~d~n', [Argument, Person1, Level1, Person2, Level2])). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:56:24.280

您可以在找到匹配项后尝试添加剪辑。例如在 nl 之后。

```
 ....
  nl,
  !,
  fail. 
```

这可以防止回溯超过这一点。如果这不适合您，您可以尝试一下切割的位置。

# java - 在Java中以相反的字母顺序对字符串数组进行排序

> ID：13779643
> 
> 赞同：6
> 
> 时间：2012-12-08T16:58:53.137
> 
> 标签：java

我的任务是将此代码转换为反向排序，但我终其一生都无法弄清楚如何去做。这些是我的排序、查找最大和交换方法。我有一种感觉，我在这里遗漏了一些明显的东西，任何帮助都会非常感激。

```
 public static void sort(String[] arr)
    {
        for (int pass = 1; pass < arr.length; pass++)
        {
            int largestPos = findLargest(arr, arr.length - pass);
            if (largestPos != arr.length - pass)
            {
                swap(arr, largestPos, arr.length - pass);
            }
        }
    }

    public static int findLargest(String[] arr, int num)
    {
        int largestPos = 0;
        for (int i = 1; i <= num; i++)
        {
            if (arr[i].compareToIgnoreCase(arr[largestPos]) > 0)
            {
                largestPos = i;
            }
        }
        return largestPos;
    }

    public static void swap(String[] arr, int first, int second)
    {
        String temp = arr[first];
        arr[first] = arr[second];
        arr[second] = temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T17:44:04.567

不要重新发明轮子——

```
String[] strs = {"a", "b", "d", "c", "e"};

Arrays.sort(strs, Collections.reverseOrder(String.CASE_INSENSITIVE_ORDER));

System.out.println(Arrays.toString(strs)); 
```

```
[e、d、c、b、a]

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T18:13:22.233

跟进 ARS 的回答：

如果允许使用 Arrays.Sort 方法，则可以使用自定义比较器...

```
Arrays.sort(stringArray, new Comparator<String>() {
            @Override
            public int compare(String t, String t1) {
                return -t.compareToIgnoreCase(t1); //reverse the comparison, while ignoring case
            }
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T17:03:28.530

你能把findLargest变成findSmallest吗，像这样：

```
public static void sort(String[] arr) {
    for (int pass = 1; pass < arr.length; pass++) {
        int largestPos = findSmallest(arr, arr.length - pass);
        if (largestPos != arr.length - pass) {
            swap(arr, largestPos, arr.length - pass);
        }
    }
}

public static int findSmallest(String[] arr, int num) {
    int largestPos = 0;
    for (int i = 1; i <= num; i++) {
        if (arr[i].compareToIgnoreCase(arr[largestPos]) < 0) {
            largestPos = i;
        }
    }
    return largestPos;
}

public static void swap(String[] arr, int first, int second) {
    String temp = arr[first];
    arr[first] = arr[second];
    arr[second] = temp;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T17:35:30.590

我认为这是您需要的（如果您不考虑收集框架）。

```
public static void main(String args[]) {

    String [] arr ={"abc","bac","cbc"};
            String temp="";

    for(int i=0;i<arr.length;i++){

        for(int j=i+1;j<arr.length;j++){

            if(arr[j].compareTo(arr[i]) > 0){

                temp = arr[i] ;
                arr[i] = arr[j];
                arr[j] = temp;
            }
        }

    }

    for(String val:arr){
        System.out.println(val);
    }

} 
```

输出是

```
cbc
bac
abc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T17:02:44.750

您可以使用`Arrays.sort(arr)`按字母顺序排序。

然后反转它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-08T17:22:35.897

```
public static void sort(String[] arr) {
     Arrays.sort(arr);
     for (int i=0; i<arr.length/2; i++) {
        swap(arr,i,arr.length-1-i);
     }
} 
```

如果你想试试这个。在您的版本中，您将最大的移动到数组的末尾，从而按字母顺序排列。

以防你坚持原来的方法，我对你的代码做了一些小的改动：

```
public static void sort(String[] arr)
{
    for (int pass = 1; pass < arr.length; pass++)
    {
        int largestPos = findLargest(arr, pass-1);
        if (largestPos != pass - 1)
        {
            swap(arr, largestPos, pass - 1);
        }
    }
}

public static int findLargest(String[] arr, int num)
{
    int largestPos = num;
    for (int i = num+1; i < arr.length; i++)
    {
         if (arr[i].compareToIgnoreCase(arr[largestPos]) > 0)
         {
            largestPos = i;
         }
    }
    return largestPos;
} 
```

不过，正如[Ian Roberts](https://stackoverflow.com/questions/13779643/sorting-an-array-of-strings-in-reverse-alphabetical-order-in-java/13779681#comment18947322_13779681)所建议的，最简单的就是`Arrays.sort(arr, Collections.reverseOrder());`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-12T18:00:22.883

所以，首先我们需要创建 String 数组，然后使用`Arrays.sort(String[]);`，然后使用`for`对数组进行反转排序。

```
import java.util.Arrays;

public class SortClass {
    public static void main(String[] args) {
        String[] arrayString = new String[5];
        arrayString[0] = "Cat";
        arrayString[1] = "Apple";
        arrayString[2] = "Dog";
        arrayString[3] = "Mouse";
        arrayString[4] = "kitchen";
        Arrays.sort(arrayString);
        String[] arrReverse = new String[arrayString.length];
        for (int i = arrayString.length - 1; i >= 0; i--) {
            arrReverse[arrayString.length - 1 - i] = arrayString[i];

        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-04T03:18:18.490

```
String arr[]= new String[];
String s;     //input string
int count=0;
for(int i=0;i<=s.length()-k;i++){
                arr[i]=s.substring(i,i+k);  //using substring method
                count++;
            }

           int i=0;
           int b=count;
         while(count>0){
              int j=0; 
            while(j<b){
                 if((arr[i].compareTo(arr[j])>0)){  
                    String temp= arr[i];
                    arr[i]=arr[j];
                    arr[j]=temp;
                  }
            j++;
            } 
            i++; 
            count--;
        }

 for(i=0;i<b;i++)
     System.out.println(arr[i]); 
```

# algorithm - a* 和 (a*)* 一样吗？

> ID：13779645
> 
> 赞同：3
> 
> 时间：2012-12-08T16:58:58.910
> 
> 标签：algorithm, regular-language

快速提问，如果`a`是正则表达式，那是真的`a* = (a*)*`吗？

是`(a*)*`有效的表达吗？如果是，那么任何人都可以解释为什么它与 相同`a*`？我很抱歉在这里问，但我无法通过谷歌找到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T17:02:12.810

**是**的，`a*=(a*)*` 都是一样的。两者都生成相同的语言，即字符串任何数字 a 包括`null`.

`L(a*) = {^, a, aa, aa...... } = L ((a*)*)`

是`(a*)*`有效的表达吗？

> 是的，这个表达式被称为`REGULAR-EXPRESSION`（我看到你错过了标签）。任何正则语言（RL）都可以用正则表达式（RE）来表示。表示 RL 的一种按字母顺序排列的方式。

为什么是一样的？

> `*` 表示重复任意次数（包括`0`次数）。
> 
> `a*` 表示0a、1a、2a或任意数量的a。
> 
> (a*)* 表示对集合中的所有字符串重复`a*`任意次数（包括 0 次）。

因为`L(a*)`意味着**所有字符串都包含使用**. 它的每个集合的超集由 a 的字符串组成。并且`L((a*)*)`是一样的。

# sql - 将 C# 中的数据插入 SQL Server 2008 R2

> ID：13779646
> 
> 赞同：2
> 
> 时间：2012-12-08T16:59:07.850
> 
> 标签：sql, sql-server-2008-r2

我在 C#的内存（`list<T>`和）中有近 70 亿行数据。`sortedlist<T,T>`我想将此数据插入到 SQL Server 中的表中。为此，我`SqlConnection`为每个集合定义不同的并将连接池设置为 False。

首先，我尝试使用连接模式 ( `ExecuteNonQuery`) 插入数据。即使我同时定义`Parallel.Invoke`并调用了不同集合的所有插入方法，它也太慢了，直到现在我都无法完成它（我无法区分顺序插入和并发插入之间的任何差异）。

另外，我尝试从`SqlDataTable`. 为了填充表格，我从集合中读取所有数据一次并将数据添加到`SqlDataTable`. 在这种情况下，我设置`SqlBatchSize=10000`和`SqlTimeOut=0`为`SqlBulkCopy`. 但是这个也很慢。

如何快速将大量数据插入 SQL Server？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:40:25.467

你已经发现了`SqlBulkCopy`，但你说它很慢。这可能是由于两个原因：

1.  您使用的批次太小。尝试使用您传递给的自定义 IDataReader 流式传输行`WriteToServer`（或仅使用更大的 DataTables）
2.  您的表具有非聚集索引。在导入前禁用它们并重新生成它们

但是，您不能比批量导入更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:26:37.187

寻找“批量插入”。该技术可用于各种 RDBMS。基本上，您创建一个（文本）文件，每条记录一行，并告诉服务器使用此文本文件。这是我能想到的最快的方法。我以这种方式在几秒钟内导入了 5000 万行。

# javascript - Spring MVC 映射多个同名动态表单元素

> ID：13779656
> 
> 赞同：6
> 
> 时间：2012-12-08T17:00:02.203
> 
> 标签：javascript, spring, jsp, spring-mvc

我有一个 Spring MVC 应用程序，我想知道如何成功地将 JSP 页面中具有相同名称的多个***动态***表单元素映射到我的对象类。例如：

在我的 locations.jsp 页面中，我有多个下拉框：

```
<form id="tabs-3-form">
    <input id="locations-1" name="location" />
    <input id="locations-2" name="location" />
    <input id="locations-3" name="location" />
    ... (more can be added or deleted dynamically by user)
</form> 
```

我正在使用 jQuery 将表单发布到我的控制器：

```
$("#tabs-3-form").submit(function() {
    $.ajax({
        type: 'POST',
        url: '/searchResults',
        data: $(this).serialize(),
        dataType: 'json',
        success: function(data) {
           ...
        }
    });
    return false;
}); 
```

我的 LocationsController.java 设置如下：

```
@RequestMapping(value = "/locationResults", method = RequestMethod.POST)
public @ResponseBody LocationsCollection locationsCollection
(
    @ModelAttribute(value = "location") Location location,
    BindingResult result
) 
{   
    LocationsCollection locationsCollection = new LocationsCollection();
    locationsCollection.addLocation(location);

    // Anything else to do here?

    return locationsCollection;
} 
```

`LocationsCollection.java`只包含一个`Location`对象列表。

我需要在输入字段的名称中添加括号吗？MVC 会像其他表单元素一样自动映射到列表吗？如果有人能提供一个例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:11:17.733

我可以通过以下示例使其工作： http://lifeinide.blogspot.com/2010/12/dynamic-forms-lazylist-and-transparent.html?showComment= [1355160197390#c6923871316812590644](http://lifeinide.blogspot.com/2010/12/dynamic-forms-lazylist-and-transparent.html?showComment=1355160197390#c6923871316812590644)

不过，我确实做了一次调整。对于表单名称，我使用：

```
<input name="locationList[0].locationName" /> 
```

而不是文章建议的内容：

```
<input name="myFormObject.elements[0].property" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T17:12:09.510

如果您对表单元素使用相同的名称，我认为您需要使用方括号。

```
<c:forEach items="${expenseForm.expenseDetails}" varStatus="i">
  <tr id="expenseDetail_${i.index}" class="lineItemsClass" lineNum="${i.index}">
    <td><form:input path="expenseDetails[${i.index}].description" cssStyle="width: 200px;" /> <label style="color: red;"><form:errors path="expenseDetails[${i.index}].description" /></label></td>
    <td><form:input path="expenseDetails[${i.index}].quantity" cssStyle="width: 60px;" readonly="true"/> <label style="color: red;"><form:errors path="expenseDetails[${i.index}].quantity" /></label></td>
    <td><form:input path="expenseDetails[${i.index}].unitPrice" cssStyle="width: 60px;" readonly="true"/> <label style="color: red;"><form:errors path="expenseDetails[${i.index}].unitPrice" /></label></td>
    <td><form:input path="expenseDetails[${i.index}].total" cssStyle="width: 60px;" /> <label style="color: red;"><form:errors path="expenseDetails[${i.index}].total" /></label></td>
  </tr>
</c:forEach> 
```

这里的expenseDetails 是modelAttribute 类中的列表。路径名称将用作 html 表单名称，并将基于索引。上面的代码段对我来说工作正常。

# html - 在透明图像后面使 html 输入元素可选择

> ID：13779659
> 
> 赞同：-9
> 
> 时间：2012-12-08T17:00:36.570
> 
> 标签：html, css

我希望透明图像后面的元素可以选择，请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:15:40.100

只需将 z-index 值更改为更大的值，例如“99”。它在页面上仍然具有完全相同的外观，但现在可以点击，并且可以接受用户输入。

或者，您不必对此类布局使用绝对定位，您可以只使用左边距和上边距定位输入并将其与它的容器元素（和相应的背景图像）对齐。

**HTML**

```
<header>
    <input id="input" type="text" name="text" />
</header> 
```

**CSS**

```
header {
     background:url('your_url') no-repeat;
     display:block;
     width:960px; /* for example... */
     height:200px; /* for example... */
}
#input {
    margin-left:100px; /* for example... */
    margin-top:80px; /* for example... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:06:03.710

只需从您设置为 -1 的输入元素中删除 z-index 即可。

# ruby-on-rails - 如何将 Octopress 集成到我的 Rails 应用程序中？

> ID：13779661
> 
> 赞同：4
> 
> 时间：2012-12-08T17:00:52.877
> 
> 标签：ruby-on-rails, ruby, octopress

我正在潜入 Web 开发，我使用 Ruby on Rails 3.1 构建了我的个人网站，我想在其中添加一个博客。Octopress 听起来真的很棒，而且它是用 Ruby 编写的，但是我在网上找不到一个讨论将 Octopress 集成到 Rails 应用程序中的资源。我知道这不是它的设计目的，但考虑到这两种技术的流行，我很惊讶没有关于它的讨论。我能找到的唯一资源是关于使用 Octopress 创建独立博客网站的讨论。如何将 Octopress 集成到我现有的 Rails 3.1 应用程序中？我可以将其设置为独立网站并将其集成为子域吗？其他建议？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T00:57:11.697

有点晚了，我知道。`config.ru`但是您可以在另一个 Rack 应用程序中安装任何 Rack 应用程序——简而言之，一个带有文件的应用程序。Rails 和 Octopress 都是 Rack，所以我认为没有任何理由不能这样做。如果您不愿意让自己的手有点脏（阅读：将 Sprockets 安装为单独的 Rack 应用程序），那么您将在他们两个之间共享资产时遇到一些挑战，但您不需要找到特定于 Octopress 的说明如果您不介意这两个应用程序相当孤立，请执行此操作。只需谷歌`mounting rack apps in rails`并阅读该文献。

我建议调查`foreman`一下你是否要这样做。

编辑：Rails 3 并没有将所有东西分解成一系列并行的 Rack 引擎，它们安装在一个 root`config.ru`中，看起来 Rails 3 可以在其路由中安装任何 Sinatra 应用程序，例如 Octopress。[查看更多信息。](http://library.edgecase.com/rails-routing-and-rack-endpoints).

# c# - 扩展基类属性

> ID：13779662
> 
> 赞同：1
> 
> 时间：2012-12-08T17:00:57.840
> 
> 标签：c#, oop

我需要你的帮助来扩展我的基类，这是我拥有的类似结构。

```
 public class ShowRoomA
    {
            public audi AudiModelA { get; set; }
            public benz benzModelA { get; set; }
    }   
    public class audi
    {
            public string Name { get; set; }
            public string AC { get; set; }
            public string PowerStearing { get; set; }
    }
    public class benz
    {
            public string Name { get; set; }
            public string AC { get; set; }
            public string AirBag { get; set; }
            public string MusicSystem { get; set; }
    }
//My Implementation class like this
    class Main()
    {
      private void UpdateDetails()
      {
        ShowRoomA ojbMahi = new ShowRoomA();
        GetDetails( ojbMahi ); // this works fine
      }
      private void GetDetails(ShowRoomA objShowRoom)
      {
         objShowRoom;
         objShowRoom.audi = new audi();
         objShowRoom.audi.Name = "AUDIMODEL94CD698";
         objShowRoom.audi.AC = "6 TON";
         objShowRoom.audi.PowerStearing = "Electric";

         objShowRoom.benz= new benz();
         objShowRoom.benz.Name = "BENZMODEL34LCX";
         objShowRoom.benz.AC = "8 TON";
         objShowRoom.benz.AirBag = "Two (1+1)";
         objShowRoom.benz.MusicSystem = "Poineer 3500W";
      } 
    }
// Till this cool.
// Now I got requirement for ShowRoomB with replacement of old audi and benz with new models and new other brand cars also added.
// I don't want to modify GetDetails() method. by reusing this method additional logic i want to apply to my new extended model.
// Here I struck in designing my new model of ShowRoomB (base of ShowRoomA) ... I have tried some thing like... but not sure.

    public class audiModelB:audi
    {
            public string JetEngine { get; set; }
    }
    public class benzModelB:benz
    {
            public string JetEngine { get; set; }
    }
    public class ShowRoomB
    {
            public audiModelB AudiModelB { get; set; }
            public benzModelB benzModelB { get; set; }
    } 

// My new code to Implementation class like this
    class Main()
    {
      private void UpdateDetails()
      {
        ShowRoomB ojbNahi = new ShowRoomB();
        GetDetails( ojbNahi ); // this is NOT working! I know this object does not contain base class directly, still some what i want fill my new model with old properties. Kindly suggest here 
      }
    } 
```

谁能给我解决方案如何实现我对基类“ShowroomA”的扩展要求

非常感谢您的时间和建议。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:05:44.013

问题在这里：

```
 private void GetDetails(ShowRoomA objShowRoom)
  {
     objShowRoom = new objShowRoom();  //<----- 
```

您没有使用传入的对象 - 相反，您正在创建一个新对象并使用它。只需删除

```
objShowRoom = new objShowRoom(); 
```

并修复此块：

```
 objShowRoom.benz= new benz();
     objShowRoom.audi.Name = "BENZMODEL34LCX";   //<--- should be objShowRoom.benz?
     objShowRoom.audi.AC = "8 TON";
     objShowRoom.audi.AirBag = "Two (1+1)";
     objShowRoom.audi.MusicSystem = "Poineer 3500W"; 
```

你应该没事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T17:11:27.310

我会为初学者创建一个 Car 类：

```
public class Car
{
    public string Name { get; set; }
    public string AC { get; set; }
    public string PowerStearing { get; set; }
    public string MusicSystem { get; set; }
}
public class Audi : Car
{
}
public class Benz : Car
{
} 
```

还有一个 ShowRoom 类，其中包含 Car 列表：

```
public class ShowRoomA
{
    public List<Car> Cars { get; set; }

    public virtual void GetDetails(ShowRoomA showRoom)
    {
        // Do your stuff
    }
} 
```

您也可以扩展它：

```
public class ShowRoomB : ShowRoomA
{
    public override void GetDetails(ShowRoomA showRoom)
    {
        // Do some other stuff
    }
} 
```

并这样使用：

```
class Main()
{
    private void UpdateDetails()
    {
        ShowRoom ojbMahi = new ShowRoom();

        Audi audi = new Audi() { Name = "AUDIMODEL94CD698", AC = "6 TON" };
        objMahi.Cars.Add(audi);

        Benz benz = new Benz() { Name = "BENZMODEL34LCX", AC = "8 TON" };
        objMahi.Cars.Add(benz);
    } 
} 
```

# c# - 访问 PDF 的脚本变量

> ID：13779663
> 
> 赞同：0
> 
> 时间：2012-12-08T17:01:05.967
> 
> 标签：c#, javascript, asp.net, pdf, itextsharp

有没有办法从外部代码访问 PDF 文件中存在的 Javascript 对象，我正在尝试访问作为 IFrame 嵌入到 Web 表单中的 PDF 文件中的 JS 变量，我想从网页表单 JS 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:35:03.633

如果 PDF 允许，这是可能的。我写了一本关于 PDF 的书，其中包含有关在 HTML 和 PDF 之间建立 Javascript 通信的部分。您可以在此处找到本节的文本：[http ://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/](http://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/)

请注意，这不适用于所有 OSS。PDF 需要访问其主机容器，并且您需要使用消息容器。

如果您的 PDF 没有`onMessage()`函数或消息处理程序，则无法建立任何通信。

# php - PHP：require_once 库 -> 无法打开流

> ID：13779667
> 
> 赞同：1
> 
> 时间：2012-12-08T17:01:23.280
> 
> 标签：php, class, require, require-once

我可能有点困惑，可能需要你的帮助。我在里面`inc/newsletter.php`，想要包含一个里面的库`lib/mailchimp-api-class`

我如何引用这个类文件？

我觉得应该是……</p>

`require_once '../lib/mailchimp-api-class/MCAPI.class.php';`

![在此处输入图像描述](../Images/8c36f42a44c190befe026823a14292a2.png)

但是，这不起作用……</p>

```
Warning: require_once(../lib/mailchimp-api-class/MCAPI.class.php) [function.require-
once]: failed to open stream: No such file or directory in /Users/myname/htdocs/wr/
wp-content/themes/mytheme/inc/newsletter.php on line 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:06:10.053

如果您在包含文件中，则当前目录不一定是所述包含文件的目录。不过，你总是可以绝对的：

```
require_once dirname(dirname(__FILE__)) . '/lib/mailchimp-api-class/MCAPI.class.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:06:45.373

我认为您正在使用 WordPress。这不起作用，因为相对路径来自起始文件。

**尝试：**

```
require_once dirname(__FILE__).'/../lib/mailchimp-api-class/MCAPI.class.php'; 
```

**在 PHP 5.3 或更新版本中：**

你可以使用`__DIR__`而不是`dirname(__FILE__)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:07:01.693

尝试使用绝对路径：

```
require_once $_SERVER['DOCUMENT_ROOT'] . '/wr/wp-content/themes/mytheme/lib/mailchimp-api-class/MCAPI.class.php'; 
```

# java - 处理 JPA 关系引起的循环引用的策略？

> ID：13779670
> 
> 赞同：4
> 
> 时间：2012-12-08T17:01:35.183
> 
> 标签：java, jpa, module, packaging

我正在尝试通过打包到单独 jar 中的功能将我的应用程序划分为模块，例如 feature-a.jar、feature-b.jar 等。

单个功能 jars，例如 feature-a.jar 应该包含一个功能的所有代码，包括 jpa 实体、业务逻辑、rest api、单元测试、集成测试......等。

我遇到的问题是 JPA 实体之间的双向关系导致 jar 文件之间的循环引用。例如，客户实体应该在 customer.jar 中，订单应该在 order.jar 中，但是客户引用订单和订单引用客户，这使得很难将它们拆分为单独的 jars/eclipse 项目。

**我看到的用于处理 JPA 实体中的循环依赖项的选项：**

*   选项1：将所有实体放入一个jar/一个项目中
*   选项 2：不要映射某些双向关系以避免跨项目的循环依赖。

**问题：**

*   您使用什么规则/原则来决定何时进行双向映射与不进行？
*   您是否能够按功能将 jpa 实体分解为他们自己的项目/jar，如果可以的话，您是如何避免循环依赖问题的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:45:59.770

您没有使用任何规则来决定`JPA`. 我也得测试一下。

在我的示例中，有一个实体必须`Category`双向。`OneToOne``parentCategory``OneToMany``childCategories`

我认为，`Circular Reference` 就像下面的数据结构。

```
CategoryID      Name    ParentID
001             AAA     002
002             BBB     003
003             CCC     004
004             DDD     001 
```

我想建议避免出现问题。

例子 ：

```
public void addNewCategory(Category category) {
    checkCircularity(Category category, category.getParent());
}

public static void checkCircularity(Category child, Cagegory parent) throws CircularReferenceException {
    if (superior != null) {
        if (sub.isEqual(superior) || sub.isEqual(parent.getParent())) {
            throw new CircularReferenceException("Circularity Referencing.........");
        } else if (finder.getSuper(superior) != null) {
            checkCircularity(child, parent.getParent());
        }
    }
} 
```

如果程序没有 throw `CircularReferenceException`，则该`Category`实例没有循环引用。

# android - 如何设置 Android Google Maps API v2 地图以显示全球地图？

> ID：13779672
> 
> 赞同：6
> 
> 时间：2012-12-08T17:01:49.383
> 
> 标签：android, api, google-maps, zooming

我正在开发一个在后台使用谷歌地图的安卓应用程序。当我启动应用程序时，我想显示一个洞词的地图。根据android google maps API v2：[https](https://developers.google.com/maps/documentation/android/views) ://developers.google.com/maps/documentation/android/views设置特定缩放值的方式是“CameraUpdateFactory.zoomTo(float)”和相同的api [https:// /developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#zoomTo(float](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#zoomTo(float) ) 告诉这个函数的最小参数是2。但是当我调用函数时：mMap .moveCamera(CameraUpdateFactory.zoomTo(2)); 世界地图的视口只比澳大利亚大一点……如何一次显示整个世界地图？

PS：对于这次体验，我使用的是 google 示例代码，更具体地说，是“MarkerDemoActivity.java”

在此先感谢，若昂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-05T08:35:53.417

我们可以使用以下代码在 android 中覆盖整个地图：

```
<com.google.android.gms.maps.MapView
            xmlns:map="http://schemas.android.com/apk/res-auto"               
            android:name="com.google.android.gms.maps.SupportMapFragment"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"         
            map:cameraZoom="1" //or 0
            map:liteMode="true"
             /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T20:18:46.093

我的猜测是缩放不能低于 2 或 3 是因为当显示区域大于 180 度时，VisibleRegion 的边界计算不正确：[http ://code.google.com/p/gmaps-api-问题/问题/详细信息？id=5285](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5285)。

如果此错误以正确的方式修复（即返回`LatLng`的 s 是正确的）而不是在这种情况下阻止缩放级别 2，那么 Google 地图开发人员可能很容易让我们显示整个地图。

您可能希望在此处发布功能请求以获得 0 级缩放支持。

# c - 跨线程拆分文本文件

> ID：13779678
> 
> 赞同：1
> 
> 时间：2012-12-08T17:02:31.530
> 
> 标签：c, file, pthreads, distributed

问题：我有几个文本文件（10），每行都有数字。我需要将它们拆分到我使用 pthread 库创建的一些线程中。创建的这些线程（工作线程）将找到发送给它们的最大素数（以及所有文本文件中的所有最大素数）。

我目前对解决方案的想法：我认为自己有两个数组，一个数组中的所有文本文件，另一个数组将包含一个二进制文件，我可以读取 1000 行并将指针发送到该二进制文件的索引在一个包含 id、文件指针和文件位置的结构中，让它通过它。

我在说的一点点：

```
pthread_create(&threads[index],NULL,workerThread,(void *)threadFields[index]);//Pass struct to each worker 
```

结构：

```
typedef struct threadFields{
  int *id, *position;
  FILE *Fin;
}tField; 
```

如果有人有任何见解或更好的解决方案，将不胜感激

编辑：好的，所以我找到了解决问题的方法，我相信它类似于 SaveTheRbtz 的建议。这是我实现的：我把文件合并到一个二进制文件中，并在循环中跟踪它（我必须考虑每个条目有多少字节，这是硬编码的）

```
struct threadFields *info = threadStruct;
  int index;
  int id = info->id;
  unsigned int currentNum = 0;
  int Seek = info->StartPos;
  unsigned int localLargestPrime = 0;
  char *buffer = malloc(50);
  int isPrime = 0;

    while(Seek<info->EndPos){
    for(index = 0; index < 1000; index++){//Loop 1000 times
    fseek(fileOut,Seek*sizeof(char)*20, SEEK_SET);
    fgets(buffer,20,fileOut);
    Seek++;
    currentNum = atoi(buffer);
    if(currentNum>localLargestPrime && currentNum > 0){
      isPrime = ChkPrim(currentNum);
      if( isPrime == 1)
        localLargestPrime = currentNum;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:10:18.910

你能做十个线程，每个线程处理一个指定为参数的文件。每个线程将读取自己的文件，检查该值是否大于它迄今为止记录的最大素数，如果是，则检查新数是否为素数。然后，当它完成时，它可以将素数返回给协调器线程。协调线程坐下来等待线程完成，从每个线程中收集最大的质数，并只保留最大的质数。您可能可以使用 0 作为标记值来指示“未找到素数（尚未）”。

> 假设我想要 11 个线程而不是 10 个；那我将如何分配工作量？

我会`pthread_exit()`立即执行第 11 个线程。如果你想为自己制造协调问题，你可以，但为什么要让生活变得比你必须做的更难。

如果您绝对必须有 11 个线程处理 10 个文件并分配工作，那么我想我最初可能会在一个队列中设置 10 个文件流。线程将等待条件“队列不为空”以获取文件流（互斥锁和条件等等）。当线程获取文件流时，它会从文件中读取一个数字并将流推回队列（信令队列不为空），然后处理该数字。在 EOF 上，线程将关闭文件而不将其推回队列中（因此线程必须检测“没有未读数据的文件流”）。这意味着每个线程将读取大约十分之一的数据，具体取决于素数计算实际读取的数字所需的时间。这比每个文件一个简单的线程解决方案要复杂得多，但它可以（或多或少地）扩展到任意数量的线程和文件。特别是，它可以用于让 7 个线程处理 10 个文件，以及让 17 个线程处理 10 个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:47:46.723

看起来像消息队列的工作：

1.  一组“供应商”线程，将数据分成块然后放入队列。在您的情况下，块可以用文件名或 (fd, offset, size) 元组表示。为简单起见，可以有一个这样的供应商。
2.  从输入队列中提取数据、处理数据并将结果放入另一个队列的“工作”线程数。出于性能原因，通常有很多工作人员，例如，如果您的任务是 CPU 密集型的，那么`sysconf(_SC_NPROCESSORS_ONLN)`应该是一个不错的选择。
3.  一个“聚合器”线程将结果队列“减少”为单个值。对于您的情况，这是一个简单的`max()`功能。

这是一个高度可扩展的解决方案，使您能够轻松地将许多不同类型的处理阶段组合成易于理解的管道。

# c# - 比较剪贴板类中的两个图像

> ID：13779679
> 
> 赞同：0
> 
> 时间：2012-12-08T17:02:37.000
> 
> 标签：c#, clipboard, clipboard-pictures

在 C# winform 应用程序中。我正在编写一个剪贴板日志管理器，它将文本记录到日志文件中，（每次按下 Ctrl+c/x 时，复制/剪切的文本都会附加到文件中）我也对图像做了同样的事情，也就是说，如果你按“prtScreen”，您拍摄的屏幕截图也会转到一个文件夹。

我通过使用计时器来做到这一点，在里面我有一些“看起来”像这样的东西：

```
if (Clipboard.ContainsImage())
{
  if (IsClipboardUpdated())
  {
    LogData();
    UpdateLastClipboardData();
  }
} 
```

其余方法如下所示：

```
public void UpdateLastClipboardData()
{
  // ... other updates
  LastClipboardImage = Clipboard.GetImage();
}
// This is how I determine if there's a new image in the clipboard...
public bool IsClipboardUpdated()
{
  return (LastClipboardImage != Clipboard.GetImage());
}
public void LogData()
{
  Clipboard.GetImage().Save(ImagesLogFolder + "\\Image" + now_hours + "_" + now_mins + "_" + now_secs + ".jpg");  
} 
```

问题是：在更新方法中，“LastClipboardImage != Clipboard.GetImage()”总是返回 true！

我什至在更新方法中做了以下事情：

```
Image img1 = Clipboard.GetImage();
Image img2 = Clipboard.GetImage();
Image img3 = img2;
bool b1 = img1 == img2; // this returned false. WHY??
bool b2 = img3 == img2; // this returned true. Makes sense. 
```

请帮忙，比较不起作用...为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:15:52.350

一个小测试。对同一张图片调用两次 GetImage 方法

```
void Main()
{
    Image bmp1 = Clipboard.GetImage();
    Image bmp2 = Clipboard.GetImage();

    if(bmp1 != null && bmp1 == bmp2)
        Console.WriteLine("True");
    else
        Console.WriteLine("False");
} 
```

它总是返回假。所以每次你调用 Clipboard.GetImage() 你都会得到一个不同的图像实例，因此你无法比较然后使用一个简单的`== operator`

您正在比较 Image 对象的两个不同实例，当然它们并不相同。

如果您真的想将图像与像素级别进行比较，则需要像这样更具侵入性（且性能要求更高的方法）

```
bool ImagesAreDifferent(Image img1, Image img2)
{
    Bitmap bmp1 = new Bitmap(img1);
    Bitmap bmp2 = new Bitmap(img2);

    bool different = false;
    if (bmp1.Width == bmp2.Width && bmp1.Height == bmp2.Height)
    {
        for (int i = 0; i < bmp1.Width; i++)
        {
            for (int j = 0; j < bmp1.Height; j++)
            {
                Color col1 = bmp1.GetPixel(i, j);
                Color col2 = bmp2.GetPixel(i, j);
                if (col1 != col2)
                {
                    i = bmp1.Width + 1;
                    different = true;
                    break;
                }
            }
        }
    }    
    return different;
} 
```

请注意这是如何可能的，因为 Color 结构定义了一个[Equality 运算符](http://msdn.microsoft.com/en-us/library/system.drawing.color.op_equality.aspx)来检查颜色 RGB 值在两种颜色之间是否相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:24:20.343

[`Image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)检查与 的相等性[`Object.equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)，它测试与引用类型的*引用*相等性，而不是语义相等性。这就是为什么`img2 == img3`是，因为您之前已将' 引用`true`复制到. 但是，对于和，您调用which 构造了一个新的图像对象。`img2``img3``img1``img2`[`Clipboard.GetImage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.clipboard.getimage.aspx)

如果您真的想测试两个图像对象是否包含相同的数据，您将需要编写自己的方法 - 如果您不想子类化，可能是扩展方法`Image`。

```
public static class ImageExtensions
{
    public static bool MyEquals(this Image x, Image y)
    {
        // compute and return your definition of equality here
    }
} 
```

请注意，`==`操作员不会自动调用此方法，您必须使用 . 检查是否相等`Image.MyEquals`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:38:59.843

我认为您可以更改程序逻辑来克服这个问题，而不是比较图像。如何捕获添加到剪贴板的新项目的事件并写入日志？

您可以从以下链接尝试代码示例代码

[http://www.codeproject.com/Tips/467361/Using-Clipboard-Csharp-4-0-Wrapper-inside](http://www.codeproject.com/Tips/467361/Using-Clipboard-Csharp-4-0-Wrapper-inside)

```
// Use the "ClipboardManager" to manage in a more comprehensive the clipboard
// I assume that "this" is a Form
ClipboardManager manager = new ClipboardManager(this);
// Use "All" to handle all kinds of objects from the clipboard
// otherwise use "Files", "Image" or "Text"
manager.Type = ClipboardManager.CheckType.All;
// Use events to manage the objects in the clipboard
manager.OnNewFilesFound += (sender, eventArg) => 
{
    foreach (String item in eventArg)
    {
        Console.WriteLine("New file found in clipboard : {0}", item);
    }
};
manager.OnNewImageFound += (sender, eventArg) =>
{
    Console.WriteLine("New image found in clipboard -> Width: {0} , Height: {1}", 
                      eventArg.Width, eventArg.Height);
};
manager.OnNewTextFound += (sender, eventArg) =>
{
    Console.WriteLine("New text found in clipboard : {0}", eventArg);
};
// Use the method "StartChecking" to start capturing objects in the clipboard
manager.StartChecking();
// Close the capturing
manager.Dispose(); 
```

# javascript - 移动 Safari 选择 onclick 事件

> ID：13779687
> 
> 赞同：2
> 
> 时间：2012-12-08T17:03:27.267
> 
> 标签：javascript, onclick, mobile-safari

`onclick=""`我的页面有带有事件的选择标签：

```
<select onclick="OnChange()"> 
```

它仅适用于移动 Safari 的第二次点击 - 其他浏览器工作正常。

如何`onclick`使用移动 Safari 获得第一个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:11:50.347

为什么不直接使用`onChange`属性。它更适合你想要的。此外，使用`onClick`不会影响对字段的选项卡式访问...

# javascript - 设置视图矩阵

> ID：13779689
> 
> 赞同：1
> 
> 时间：2012-12-08T17:03:36.890
> 
> 标签：javascript, webgl, three.js

我正在尝试使用 Three.js 将我的 C# XNA 项目转换为 WebGL。

到目前为止，一切进展顺利，但我目前正在研究我的相机。使用 XNA，您可以轻松地将视图矩阵发送到着色器。

我确定我只是没有看到我应该在文档中看到的内容。

我的 CameraManager 类有一个 MouseMoved 事件处理程序。

```
CameraManager.prototype.MouseMoved = function( changeVector ) {    
    var q1 = new THREE.Quaternion();
    q1.setFromAxisAngle(this.left, (( Math.PI / 4 ) / 200) * changeVector.y);
    var q2 = new THREE.Quaternion();
    q2.setFromAxisAngle(this.left, (( -Math.PI / 4 ) / 200) * changeVector.x);
    var q = new THREE.Quaternion();
    q.multiply(q1, q2);

    q.multiplyVector3(this.direction);
    q.multiplyVector3(this.left);
} 
```

CameraManager 也有一个更新 View 矩阵的 update 方法。

```
CameraManager.prototype.CreateLookAt = function() {
    var target = this.position.clone();
    target.addSelf(this.direction);
    this.view = THREE.Matrix4.CreateLookAt(this.position, target, this.up);    
}

THREE.Matrix4.CreateLookAt = function(cameraPosition, cameraTarget, upVector) {
    var zAxis = new THREE.Vector3();
    zAxis.sub(cameraPosition, cameraTarget);    
    zAxis.normalize();

    var xAxis = new THREE.Vector3();
    xAxis.cross(upVector, zAxis);
    xAxis.normalize();

    var yAxis = new THREE.Vector3();
    yAxis.cross(zAxis, xAxis);

    return new THREE.Matrix4(
         xAxis.x,           yAxis.x,           zAxis.x,          0,
         xAxis.y,           yAxis.y,           zAxis.y,          0,
         xAxis.z,           yAxis.z,           zAxis.z,          0,
        -xAxis.dot(cameraPosition),  -yAxis.dot(cameraPosition),  -zAxis.dot(cameraPosition),  l
    ); 
} 
```

只是想知道如何为相机设置视图矩阵。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:16:41.177

为什么不像这样分开设置矩阵属性：

```
var m = getYourNewMatrix();
camera.position = m.decompose()[ 0 ];
camera.rotation = m.decompose()[ 1 ];
camera.updateMatrix(); 
```

# javascript - 在 KnockoutJS 中为 jQuery 插件创建自定义绑定

> ID：13779700
> 
> 赞同：1
> 
> 时间：2012-12-08T17:04:34.667
> 
> 标签：javascript, knockout.js

我正在尝试使用[raty](http://www.wbotelhos.com/raty/ "率") jQuery 插件在 KnockoutJS 中创建自定义绑定来为电影评分。比率插件的正常实现看起来像这样......

```
$('.raty').raty();
<div class="raty" data-rating="3"></div> 
```

那会给你这样的东西......

```
<div class="raty" data-rating="3" style="cursor: pointer; width: 100px;">
    <img src="/raty/img/star-on.png" alt="1" title="bad">
    <img src="/raty/img/star-on.png" alt="2" title="poor">
    <img src="/raty/img/star-on.png" alt="3" title="regular">
    <img src="/raty/img/star-off.png" alt="4" title="good">
    <img src="/raty/img/star-off.png" alt="5" title="gorgeous">
    <input type="hidden" name="score" value="3">
</div> 
```

我有一部`observableArray`电影，收藏中的每部电影都有`UserMovies.Rating`. `UserMovies.Rating`当用户更新星级然后更新电影中的值时，我正在努力想出一种方法来处理 bindingHandler `observableArray`。

这是我对实现和 bindingHandler 的尝试......

```
<div class="raty" data-bind="raty: UserMovies[0].Rating, ratyOptions: { cancel: true, half: true, size: 24 }"></div>

ko.bindingHandlers.raty = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var options = allBindingsAccessor().ratyOptions || {};
        var value = ko.utils.unwrapObservable(valueAccessor());
        // the line below throws Syntax error: Invalid label
        ko.bindingHandlers.attr.update(element, { 'data-rating': value }); 
        $(element).raty(options);

        // how to fire upate function when user changes star ratings?
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        valueAccessor($(element).raty('score'));
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:40:36.667

这段代码非常适合我：

```
ko.bindingHandlers.raty = {
   init: function (element, valueAccessor, allBindingsAccessor) {
      var options = allBindingsAccessor().ratyOptions || {};
      var value = ko.utils.unwrapObservable(valueAccessor());

      $(element).raty(options);
      $(element).raty("score", value);

      ko.utils.registerEventHandler(element, "click", function () {
          var observable = valueAccessor();
          observable($(element).raty("score"));
      });
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:19:26.583

不知道你打算用这条线做什么，但你可以替换这条线：

```
ko.bindingHandlers.attr.update(element, { 'data-rating': value }); 
```

只需：

```
$(element).data("rating",value); 
```

对于更新，是否会`raty`公开评级更改的事件？如果是这样，您可以将其绑定到您的`init`. 否则，您可以尝试绑定`click`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:21:07.267

```
ko.bindingHandlers.raty = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var options = allBindingsAccessor().ratyOptions || {};
        var value = ko.utils.unwrapObservable(valueAccessor());
        // the line below throws Syntax error: Invalid label
        $(element).data("rating",value);
        $(element).raty(options);

        $(element).delegate('click', 'img', function() {
            valueAccessor($(element).raty('score'));
        });
    }
}; 
```

# iphone - 运行硒测试时如何在iphone模拟器中显示页面顶部

> ID：13779701
> 
> 赞同：0
> 
> 时间：2012-12-08T17:05:02.803
> 
> 标签：iphone, selenium, safari, simulator

当我在 iPhone 模拟器上针对 Web 应用程序（基于 jQuery Mobile 构建）运行 Selenium 测试（使用 Selenium iWebDriver xcode 项目）时，页面顶部总是被切断（第一张图片）。当我在 Safari 中正常加载应用程序（第二张图片）时，一切看起来都很好。有没有办法让 Selenium 案例始终显示在页面顶部。我试过 window.scrollTo(0,1)，但这并没有什么不同。事实上，当我拖动向上滚动时，我看到了页面的顶部，但是一旦我释放页面的顶部就会弹回原来的隐藏位置（第一张图片）。

**使用 Selenium iWebDriver 在模拟器中加载：**

![使用硒加载](../Images/4954c380f0126c1bd5483a4a591bfff8.png)

**在 Safari 中正常加载：**

![正常加载](../Images/a52fac2d411d6c6ea179dcf273374f45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:06:22.100

弄清楚了。

当模拟器的设备设置为“iPhone 视网膜 4 英寸”时 ，Selenium iWebDriver xcode[项目中的 UIWebView 专门针对模拟器调整大小。](http://selenium.googlecode.com/svn)

因此，当模拟器的设备设置为“iPhone”或“iPhone 视网膜 3.5 英寸”时，我基于原始 Selenium 'iphone' xcode 项目创建了一个新项目，并修改了 UIWebView 的尺寸以适应模拟器。

太糟糕了，我需要为每种类型的显示器创建一个单独的项目。也许有更好的方法（程序化）来解决这个问题，但我对 iOS 开发不够熟悉，不知道那可能是什么。

# java - Android HttpClient cookie

> ID：13779702
> 
> 赞同：1
> 
> 时间：2012-12-08T17:05:11.263
> 
> 标签：java, android, cookies, httpclient, cookiestore

我正在尝试为网站制作应用程序。登录工作正常，但是当我现在尝试发送 GET 请求时，不会发送会话 ID cookie。带有 CookieStorage 的 HttpContext 设置如下：

```
public static final HttpContext LOCALCONTEXT = new BasicHttpContext();
LOCALCONTEXT.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

比那是登录：

```
HttpResponse response = httpclient.execute(httppost, LOCALCONTEXT); 
```

这就是 GET 请求：

```
HttpResponse response = httpclient.execute(httpGet, LoginActivity.LOCALCONTEXT);. 
```

和

```
Log.d(LoginActivity.NAME, "Cookie1:= " + LoginActivity.LOCALCONTEXT.getAttribute(ClientContext.COOKIE_STORE).toString()); 
```

我在 GET 请求之前和之后记录了保存的 cookie。他们是正确的。但是我嗅到了模拟器的流量并且没有发送cookie。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:57:55.057

解决了。问题是我登录到页面“http://WWW.arenakampf.de”并将 GET 发送到“http://arenakampf.de”：/

# java - 用一个额外的参数扩展一个类

> ID：13779705
> 
> 赞同：1
> 
> 时间：2012-12-08T17:05:41.300
> 
> 标签：java, class, constructor, extends

我有一个简单的问题。我有一门课，我用它来在 2 年内分割一个字符串：

```
public class Period {

    int firstYear;
    int secondYear;

    Period () {

    }

    Period(String periode) {

        String [] periodeSplit = periode.split("-");
        this.firstYear = Integer.parseInt(periodeSplit[0]);
        this.secondYear = Integer.parseInt(periodeSplit[1]);
    }

    public String toString() {

        return  "Firstyear: " + this.firstYear + "\n" + "Secondyear: " + this.secondYear;
    }
} 
```

我现在想扩展这个类，不是将数据分成 2 个不同的整数，而是分成 3 个不同的整数。因此，除了 2 个已经存在的整数变量之外，我还想要一个额外的。这样做最简单的方法是什么？

感谢您的帮助！

亲切的问候，

基普特斯克里迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:14:59.857

扩展类时，首先将其拆分为两个变量，一个与当前代码不同，然后是当前代码将处理的一个。

然后只需调用`super(periode)`

子类将有权访问父变量，因为您将它们设为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:16:39.397

我不会延伸到只是增加一个新的一年。

为什么不让整个事情足够通用，以便它支持您需要的任何拆分。

```
public class Period {

    String [] periodeSplit;

    Period(String periode) {

        periodeSplit = periode.split("-");

    }

    public String toString() {

       //TODO : Iterate and print.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:18:30.067

我认为创建更通用的类会更好（而且很容易），它能够处理你传递给它的任何年数：

```
public class Period {

    int[] years;

    Period() {

    }

    Period(String periode) {

        String[] periodeSplit = periode.split("-");
        years = new int[periodeSplit.length];
        for (int i = 0; i < periodeSplit.length; i++) {
            years[i] = Integer.parseInt(periodeSplit[i]);
        }
    }

    public String toString() {
        String result = "";
        for (int i = 0; i < years.length; i++) {
            result += "Year " + i + ":" + years[i] + "\n";
        }
        return result;
    }
} 
```

如果原始类确实需要扩展，则可以这样做：

```
class ExtendedPeriod extends Period {
    int thirdPart;

    ExtendedPeriod(String periode) {
        String[] periodeSplit = periode.split("-");
        this.firstYear = Integer.parseInt(periodeSplit[0]);
        this.secondYear = Integer.parseInt(periodeSplit[1]);
        this.thirdPart = Integer.parseInt(periodeSplit[1]);
    }

    public String toString() {
        return "Day: " + this.firstYear + "\n" + "Month: " + this.secondYear
                + "\nYear: " + this.thirdPart;
    }
} 
```

我建议将变量名称“firstYear”和“secondYear”更改为不同的名称，例如“firstPart”、“secondPart”，因为对于extendedPeriod，它们不再是年份（我将它们留在我的代码中，因此它可以与你的代码一起编译，但称为新的 int 'thirdPart'）。我不认为这是继承的最佳用途，但如果这是需要的话。我还想像这样重用 Period 中的 toString ：

```
public String toString2() {
        return super.toString() + "\nThird part: " + this.thirdPart;
    } 
```

但要让它有意义，您必须在 Period 中更改 toString 方法，而不是调用值“年”。

# regex - 如何使用 find 实用程序匹配文件 *.R 和 *Rd？

> ID：13779709
> 
> 赞同：11
> 
> 时间：2012-12-08T17:05:56.537
> 
> 标签：regex, find

我想查找以 、 或 . 结尾的`.c`所有`.R`文件`.Rd`。我试过

```
find . -iname "*.[cR]" -print 
```

`.c`它给出了所有以or结尾的文件`.R`。我怎样才能另外获取`.Rd`文件？我知道`[]`只匹配一个字符，但我无法调整它以提供`.Rd`文件（尝试使用`|`或选项`-regex`等）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T17:07:43.373

给你=）

```
find -name "*.c" -o -name "*.R" -o -name "*.Rd" 
```

如果它只是您正在寻找的 3 种扩展类型，我建议您远离正则表达式，而只使用`-o`（如“或”）运算符来组成您的搜索。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T17:18:41.597

一个合适的用途`-regex`是：

```
find -regex '.*\.\(R\|Rd\|c\)' 
```

如果你想使用正则表达式，你需要记住这些适用于整个路径，而不仅仅是文件名：

```
 -regex pattern
          File  name  matches regular expression pattern.  This is a match
          on the whole path, not a search.  For example, to match  a  file
          named `./fubar3', you can use the regular expression `.*bar.' or
          `.*b.*3', but not `f.*r3'.  The regular  expressions  understood
          by  find  are by default Emacs Regular Expressions, but this can
          be changed with the -regextype option. 
```

我同意 sampson-chen 的回答，正则表达式可能不是这里的最佳选择。

# sql - 日期时间的Sqlite更新日

> ID：13779710
> 
> 赞同：2
> 
> 时间：2012-12-08T17:05:59.970
> 
> 标签：sql, database, sqlite

我正在尝试使用以下方法仅更新我的 sqlite 数据库上日期时间字段上的日期组件：

```
UPDATE recur SET start_date = date('%d', '05') 
```

我已经阅读了文档，但似乎无法弄清楚如何做到这一点，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:39:33.503

[在线文档](http://www.sqlite.org/lang_datefunc.html)中有很好的示例。您没有`date`正确调用该函数。你需要类似的东西：

```
select date('now', 'start of month', '+4 days'); 
```

我不确定您需要从哪个日期开始，所以我使用`'now'`了 ，但是您可以传入一个日期字段（例如，来自您的数据库）或一个有效的日期字符串（例如“2012-12-05”，至少在我的系统上）。

## 编辑

例如

```
select date('2012-12-08', 'start of month', '+4 days'); 
```

将返回：

```
2012-12-05 
```

请记住，有时当您从字符串开始时，使用字符串函数进行此类操作会更容易。但是，使用 date 函数将验证您是否从格式良好的日期开始。

## 编辑 2

如果您在弄清楚`UPDATE`语法方面也有困难，请将它们放在一起，您会得到：

```
UPDATE recur SET start_date = date(d, 'start of month', '+4 days')
WHERE d = date('2012-12-08'); 
```

我不确定该`WHERE`子句到底需要什么，因此请确保在运行之前选择正确的记录。

# android - Android SQL Server 连接错误

> ID：13779715
> 
> 赞同：1
> 
> 时间：2012-12-08T17:06:09.417
> 
> 标签：android, eclipse, sql-server-2000

我正在尝试连接到另一台可访问的服务器上的数据库，实际上我可以通过 ODBC 连接使用 Microsoft Access 连接和查看数据。但是我不能使用非常简单的 java 代码来做到这一点，你可以在下面看到。

无论如何，我下载了 SQLServer JDBC Microsoft 3.0 并安装在 C:\Program Files\Microsoft SQL Server JDBC Driver 3.0\sqljdbc_3.0\esn 中。之后，我还从 Eclipse 添加到项目类路径中，打开项目 --> 项目 --> 属性 --> Java Buid Path --> 库 --> 添加外部罐子 --> 选择 jar 文件“sqljdbc4 " 的相同路径 (C:\Program Files\Microsoft SQL Server JDBC Driver 3.0\sqljdbc_3.0\esn)。

但是，当我在 Class.forName ... Skip to} catch .. 行中放入 Dbugger 时，似乎有问题，并且连接“con”始终为空。

12-14 19:47:38.054: E/MyActivity(13682): java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver 12-14 19:47:38.054: E/MyActivity(13682): 在 java。 lang.Class.classForName(Native Method) 12-14 19:47:38.054: E/MyActivity(13682): at java.lang.Class.forName(Class.java:217) 12-14 19:47:38.054: E /MyActivity(13682): at java.lang.Class.forName(Class.java:172) 12-14 19:47:38.054: E/MyActivity(13682): at com.example.conectar.ConexionSQL.main(ConexionSQL. java:26) 12-14 19:47:38.054: E/MyActivity(13682): at com.example.conectar.MainActivity.onCreate(MainActivity.java:23) 12-14 19:47:38.054: E/MyActivity( 13682): 在 android.app.Activity.performCreate(Activity.java:5008) 12-14 19:47:38.054: E/MyActivity(13682): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 12 -14 19：47：38.054：E/MyActivity(13682): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 12-14 19:47:38.054: E/MyActivity(13682): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java :2084) 12-14 19:47:38.054: E/MyActivity(13682): 在 android.app.ActivityThread.access$600(ActivityThread.java:130)

此外，我在用户和系统的 Windows 7 32 位中添加了环境变量。CLASSPATH=.;C:\Program Files\Microsoft SQL Server JDBC Driver 3.0\sqljdbc_3.0\esn\sqljdbc4.jar

拜托，你能帮帮我吗？

提前致谢。

```
package com.jose.sqlserver;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import java.sql.*;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Connection con = null;

    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl = "jdbc:sqlserver://192.168.1.24:1433;" +
                   "databaseName=MisDatos;user=sa;password=1234;";
        con = DriverManager.getConnection(connectionUrl);
        PreparedStatement ps1=con.prepareStatement("select top 5 * from Usuarios");
        ResultSet rs1=ps1.executeQuery();
        while (rs1.next()) {

        }

    }
    catch (Exception e){}
} 
```

# c++ - 是否应弃用 std::list ？

> ID：13779719
> 
> 赞同：11
> 
> 时间：2012-12-08T17:06:36.360
> 
> 标签：c++, performance, vector, containers, doubly-linked-list

根据 Bjarne Stroustrup在他的[Going Native 2012 主题演讲中的](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style)[幻灯片](http://ecn.channel9.msdn.com/events/GoingNative12/GN12Cpp11Style.pdf)，a 中的插入和删除在现代硬件上非常低效：`std::list`

![向量与列表](../Images/b6ed1776612ee26f731f76c647995cf9.png)

> 矢量节拍列表海量用于插入和删除

如果这确实是真的，还剩下什么用例`std::list`？那不应该弃用吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-08T17:11:27.147

向量和列表解决不同的问题。List 保证迭代器在您插入和删除其他元素时永远不会失效。Vector 不做这样的保证。

它不仅仅与性能有关。所以答案是否定的。不应弃用列表。

**编辑**除此之外，C++ 的设计目的不仅仅是在“现代硬件”上工作。它旨在用于比这更广泛的硬件。我是金融行业的程序员，我使用 C++，但其他领域，如嵌入式设备、可编程控制器、心肺机和无数其他领域也同样重要。C++ 语言的设计不应*仅仅*考虑某些领域的需求和某些类别的硬件的性能。仅仅因为*我*可能不使用列表并不意味着它应该从语言中被弃用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T17:24:44.307

向量是否优于列表还取决于元素的类型。例如，对于`int`元素，向量确实非常快，因为大多数数据都适合 CPU 缓存，并且 SIMD 指令可用于数据复制。所以向量的 O(n) 复杂度没有太大影响。

但是对于较大的数据类型，复制不会转换为流操作，而是必须从各处获取数据呢？此外，没有大型 CPU 缓存并且可能还缺少 SIMD 指令的硬件呢？C++ 不仅用于现代台式机和工作站机器。弃用 std::list 是不可能的。

Stroustrup 在该演示文稿中所说的是，在您为数据选择 std::list 之前，您应该确保它是适合*您特定情况*的正确选择。换句话说，基准和配置文件。它绝对不是说你应该总是选择 std::vector。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T17:09:38.570

不，尤其是不基于一个特定的图表。在某些情况下，列表会比向量表现更好。见：[http ://www.baptiste-wicht.com/2012/12/cpp-benchmark-vector-list-deque/](http://www.baptiste-wicht.com/2012/12/cpp-benchmark-vector-list-deque/)

正如其他人所提到的，这忽略了非性能差异。

Bjarne 在那次谈话中的观点不是你不应该使用列表。正是人们对 list 的性能做出了太多的假设，结果往往证明是错误的。他只是在证明向量应该始终是您的默认首选容器类型的立场，除非您确实发现需要列表的性能或其他语义特征。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-09T14:18:59.093

`std::list`是一个双端队列，它有`push_front()`和`pop_front()`。它仍然具有这样的利基角色，尽管它可能不是双端队列的最佳选择。

链表与树数据结构有关。两者都包含链接。如果我们弃用`std::list`，那么基于树的容器呢？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-08T17:15:42.077

当然不是。std::list 是一种不同的数据结构。比较不同的数据结构可以很好地说明其属性、优点或缺点。但每种数据结构都有其优势。

# sql-server - MVC 应用程序的 SQL 运行总和

> ID：13779729
> 
> 赞同：0
> 
> 时间：2012-12-08T17:08:18.760
> 
> 标签：sql-server, asp.net-mvc, linq, sql-server-2008, tsql

我需要一种更快的方法来计算和显示运行总和。

这是一个 MVC Telerik 网格，它查询一个使用子查询生成运行总和的视图。查询需要 73 秒才能完成，这是不可接受的。（每次用户点击“刷新预测表”，重新填充网格需要 73 秒。）

查询如下所示：

```
SELECT outside.EffectiveDate
[omitted for clarity]
       ,(
              SELECT SUM(b.Amount)
              FROM vCI_UNIONALL inside
              WHERE inside.EffectiveDate <= outside.EffectiveDate
              ) AS RunningBalance
[omitted for clarity]
FROM vCI_UNIONALL outside 
```

某些项目上的“EffectiveDate”可以一直更改......可以添加新项目等。我当然需要一些可以即时计算运行总和的东西（当点击刷新按钮时）。存储过程或其他视图...？请指教。

**解决方案：（**众多之一，这个比子查询快几个数量级）

*创建一个包含视图中除`RunningTotal`col*之外的所有列的新表。创建一个存储过程，首先截断表，然后`INSERT INTO`使用`SELECT`所有列截断表，而不使用运行总和列。

使用更新局部变量方法：

```
DECLARE @Amount DECIMAL(18,4)
SET @Amount = 0
UPDATE TABLE_YOU_JUST_CREATED SET RunningTotal = @Amount, @Amount = @Amount + ISNULL(Amount,0) 
```

创建一个任务代理，它将每天运行一次存储过程。将`TABLE_YOU_JUST_CREATED`用于所有报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:10:43.347

看看这篇文章 [Calculate a Running Total in SQL Server](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver/13744550)

如果你有 SQL Server Denali，你可以使用新的窗口函数。

在 SQL Server 2008 R2 中，我建议您使用递归公用表表达式。CTE 中的小问题是，对于快速查询，您必须有没有间隙的标识列（1、2、3，...），如果您没有这样的列，则必须创建一个临时或变量表，其中包含列并将您的数据移到那里。

CTE 方法将是这样的

```
declare @Temp_Numbers (RowNum int, Amount <your type>, EffectiveDate datetime)

insert into @Temp_Numbers (RowNum, Amount, EffectiveDate)
select row_number() over (order by EffectiveDate), Amount, EffectiveDate
from vCI_UNIONALL

-- you can also use identity
-- declare @Temp_Numbers (RowNum int identity(1, 1), Amount <your type>, EffectiveDate datetime)
-- insert into @Temp_Numbers (Amount, EffectiveDate)
-- select Amount, EffectiveDate
-- from vCI_UNIONALL
-- order by EffectiveDate

;with 
CTE_RunningTotal
as
(
    select T.RowNum, T.EffectiveDate, T.Amount as Total_Amount
    from @Temp_Numbers as T
    where T.RowNum = 1
    union all
    select T.RowNum, T.EffectiveDate, T.Amount + C.Total_Amount as Total_Amount
    from CTE_RunningTotal as C
        inner join @Temp_Numbers as T on T.RowNum = C.RowNum + 1
)
select C.RowNum, C.EffectiveDate, C.Total_Amount
from CTE_RunningTotal as C
option (maxrecursion 0) 
```

重复值可能存在一些问题`EffectiveDate`，这取决于您希望如何使用它们 - 您希望它们任意排序还是希望它们具有相等的数量？

# java - Joda Time DateTimeFormatter 处理 CST

> ID：13779732
> 
> 赞同：0
> 
> 时间：2012-12-08T17:08:39.070
> 
> 标签：java, parsing, timezone, jodatime

我正在尝试使用 Joda Time 解析我收到的以下格式的一些日期字符串

```
Sat, 08 Dec 2012 00:00:00 CST 
```

查看文档，由于时区名称不明确， [DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html "日期时间格式")不会处理此解析。鉴于我无法控制收到的数据字符串，将其解析为 DateTime 对象的最佳/最简单方法是什么？

编辑：我知道这是中央时区（北美），而不是 CST 也可能引用的其他可能时区之一。

# java - 从线程启动一个活动

> ID：13779742
> 
> 赞同：0
> 
> 时间：2012-12-08T17:09:23.767
> 
> 标签：java, android, multithreading

我有一个生成pdf文件的类。该类由 Activity 扩展，即具有 onCreate、onPause（等等）方法。

在生成 pdf 文件时，它需要一些时间来生成，所以我需要显示一个进度条来通知用户文件正在生成。

一切正常，希望当我单击生成按钮时进度条冻结几秒钟（根据 Logcat：生成文件时进度条冻结）。

所以我的问题是，我不知道如何在文件生成时使进度条无法停止。

下面是我的代码：

```
Log.i(TAG, "PDF generation: " + position);

final ProgressDialog dialog = new ProgressDialog(this);
dialog.setCancelable(true);
dialog.setIndeterminate(true);
dialog.setMessage("Generating...");
dialog.show();

new Thread(new Runnable() {

    @Override
    public void run() {

        startActivity(new Intent(getApplicationContext(),
            PdfGenerator.class));

        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                dialog.hide();
            }
        });

    }

}).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:10:46.993

使用 runOnUiThread 将代码更改为从 Thread 启动 Activity：

```
///... your code here..

    new Thread(new Runnable() {

        @Override
        public void run() {

            Your_Current_Activity.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {

                dialog.cancel();

                // START ACTIVITY HERE
               Your_Current_Activity.this.startActivity(new 
                        Intent(Your_Current_Activity.this,
                                       PdfGenerator.class));

                }
            });

        }

    }).start(); 
```

# php - preg_replace 解析错误：函数中的语法错误

> ID：13779743
> 
> 赞同：0
> 
> 时间：2012-12-08T17:09:26.840
> 
> 标签：php, preg-replace

我正在尝试将 GeSHi 语法荧光笔集成到我的博客中。

我的代码中出现语法错误。我对 PHP 代码不是很好，因此寻求帮助来纠正语法。

**我的代码是：**

```
private function _renderCode($string)
{
    return preg_replace('/<listing (.*?)>(.*?)</listing>/es',
                '$this->highlightString('\2', '\1')', 
                $string);
} 
```

**错误消息是：**

```
Parse error: syntax error, unexpected '\' (T_NS_SEPARATOR) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:10:46.873

尝试`'$this->highlightString(\'\\2\', \'\\1\')',`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:10:46.297

查看语法高亮：

```
'$this->highlightString('\2', '\1')' 
```

您需要转义单引号字符串中的单引号。

```
'$this->highlightString(\'\2\', \'\1\')' 
```

（顺便说一下，首选形式是`'$this->highlightString(\'$2\', \'$1\')'`。）

# asp.net-mvc - 在 MVC 项目中创建区域

> ID：13779745
> 
> 赞同：5
> 
> 时间：2012-12-08T17:09:32.013
> 
> 标签：asp.net-mvc, asp.net-mvc-4, area

在 MVC4 Web 应用程序中，创建区域的最佳方法是什么？它可以是自动化的还是创建控制器、视图文件夹等的手动过程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T17:12:40.437

在解决方案资源管理器中右键单击 ASP.NET MVC 项目，然后`Add Area...`在上下文菜单中选择。然后输入区域的名称并继续：

![在此处输入图像描述](../Images/a6bd9b908c67a0efa617361810afd593.png)

# python - 如何设置 QComboBox 的默认项

> ID：13779752
> 
> 赞同：11
> 
> 时间：2012-12-08T17:10:43.323
> 
> 标签：python, pyqt4, indexing, qcombobox

在我的函数中，我有空值的字典：

```
self.items = {
'Maya Executable': '',
'Render': '',
'Mayapy Interpreter': '',
'imgcvt': '',
'IMConvert': '',
} 
```

我应该如何将“Maya Executable”（即第 0 个键）设置为 QComboBox 加载时要选择的默认项？

我试过：

```
self.appExeCB=QtGui.QComboBox()
self.appExeCB.setCurrentIndex(0)
self.appExeCB.addItems(self.items.keys()) 
```

但这并没有设置默认值:-(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T18:55:35.607

Python 字典没有排序。self.items.keys()[0] 每次可能返回不同的结果。要解决您的问题，您应该首先添加项目，然后将“Maya Executable”的索引从 self.items.keys() 传递给 self.appExeCB.setCurrentIndex：

```
self.appExeCB=QtGui.QComboBox()
self.appExeCB.addItems(self.items.keys())
self.appExeCB.setCurrentIndex(self.items.keys().index('Maya Executable')) 
```

请注意，这不会按照您在 self.items 中声明的顺序将项目放入 QComboBox 中，因为如前所述，Python 字典没有排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T18:54:29.383

您的代码有几处问题。

首先，字典没有固定的顺序，所以键不一定会按照它们插入的顺序结束：

```
>>> items = {
...     'Maya Executable': '',
...     'Render': '',
...     'Mayapy Interpreter': '',
...     'imgcvt': '',
...     'IMConvert': '',
...     }
>>> items.keys()
['Mayapy Interpreter', 'IMConvert', 'imgcvt', 'Render', 'Maya Executable'] 
```

所以“Maya Executable”不是键列表中的第一项。

其次，您尝试在添加项目*之前*设置当前索引，而您应该在之后设置它。实际上，组合框将默认显示第一项，即“Mayapy Interpreter”。

**编辑**：

如果您使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)，您的示例代码应该按预期工作：

```
from collections import OrderedDict
...
self.items = OrderedDict([
    ('Maya Executable', ''),
    ('Render', ''),
    ('Mayapy Interpreter', ''),
    ('imgcvt', ''),
    ('IMConvert', ''),
    ])
self.appExeCB.addItems(self.items.keys()) 
```

（注意：OrderedDict 需要 Python >= 2.7）

# vim - 如何为 Vim 卸载/删除带有病原体的插件

> ID：13779756
> 
> 赞同：18
> 
> 时间：2012-12-08T17:10:54.377
> 
> 标签：vim, pathogen

如何卸载我用病原体安装的插件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-08T17:10:54.377

找到您的捆绑文件夹，该文件夹应位于：

Linux/Mac： `~/.vim/bundle`

视窗XP：`C:\Documents and Settings\(UserName)\vimfiles\bundle`

Windows 7的： `C:\Users\(UserName)\vimfiles\bundle`

删除要删除的插件的文件夹。

注意：如果您为病原体选择了不同的目录来安装插件，请找到该文件夹​​并相应地删除插件文件夹。

重启 Vim

提示：在 Vim 中键入`:echo $HOME`以查看您的 Vim 主目录

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-26T12:00:49.750

Pathogen 将插件安装为 git 子模块。因此卸载插件就是删除一个 git 子模块。以 'vim-rvm' 作为示例插件。

```
git submodule deinit bundle/vim-rvm
git rm bundle/vim-rvm
git rm --cached bundle/vim-rvm
rm -rf .git/modules/bundle/vim-rvm 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-08T17:24:51.997

与安装它的操作相反。

# spring - Spring 3.1.2 依赖未解决

> ID：13779762
> 
> 赞同：0
> 
> 时间：2012-12-08T17:11:19.230
> 
> 标签：spring, maven

我无法将我的 spring 框架版本从 3.0.1 更新到 3.1.3。

这是我在通过 mvn 安装时遇到的错误。

```
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.core/3.1.3.RELEASE/org.springframework.core-3.1.3.RELEASE.pom
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.core/3.1.3.RELEASE/org.springframework.core-3.1.3.RELEASE.pom
    [警告] org.springframework:org.springframework.core:jar:3.1.3.RELEASE 的 POM 丢失，没有可用的依赖信息
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-tx/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-tx/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-tx/maven-metadata.xml（2 KB，3.5 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-tx/maven-metadata.xml（2 KB，1.0 KB/秒）
    下载：http://repo1.maven.org/maven2/org/springframework/spring-context/maven-metadata.xml
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-context/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-context/maven-metadata.xml（2 KB，5.9 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-context/maven-metadata.xml（3 KB，3.6 KB/秒）
    下载：http://repo1.maven.org/maven2/org/springframework/spring-beans/maven-metadata.xml
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-beans/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-beans/maven-metadata.xml（2 KB，7.8 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-beans/maven-metadata.xml（2 KB，2.2 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-core/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-core/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-core/maven-metadata.xml（2 KB，4.7 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-core/maven-metadata.xml（3 KB，2.8 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-expression/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-expression/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-expression/maven-metadata.xml（759 B，4.4 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-expression/maven-metadata.xml（831 B，1.2 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-beans/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-beans/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-beans/maven-metadata.xml（2 KB，8.0 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-beans/maven-metadata.xml（2 KB，2.2 KB/秒）
    下载：http://repo1.maven.org/maven2/org/springframework/spring-tx/maven-metadata.xml
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-tx/maven-metadata.xml
    下载：http://repo1.maven.org/maven2/org/springframework/spring-tx/maven-metadata.xml（2 KB，4.6 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/spring-tx/maven-metadata.xml（2 KB，1.7 KB/秒）
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.beans/3.1.3.RELEASE/org.springframework.beans-3.1.3.RELEASE.pom
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.beans/3.1.3.RELEASE/org.springframework.beans-3.1.3.RELEASE.pom
    [警告] org.springframework:org.springframework.beans:jar:3.1.3.RELEASE 的 POM 丢失，没有可用的依赖信息
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.context/3.1.3.RELEASE/org.springframework.context-3.1.3.RELEASE.pom
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.context/3.1.3.RELEASE/org.springframework.context-3.1.3.RELEASE.pom
    [警告] org.springframework:org.springframework.context:jar:3.1.3.RELEASE 的 POM 丢失，没有可用的依赖信息
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.core/3.1.3.RELEASE/org.springframework.core-3.1.3.RELEASE.jar
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.beans/3.1.3.RELEASE/org.springframework.beans-3.1.3.RELEASE.jar
    下载：http://repo.springsource.org/libs-release/org/springframework/org.springframework.context/3.1.3.RELEASE/org.springframework.context-3.1.3.RELEASE.jar
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.core/3.1.3.RELEASE/org.springframework.core-3.1.3.RELEASE.jar
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.beans/3.1.3.RELEASE/org.springframework.beans-3.1.3.RELEASE.jar
    下载：http://repo1.maven.org/maven2/org/springframework/org.springframework.context/3.1.3.RELEASE/org.springframework.context-3.1.3.RELEASE.jar
    [信息] --------------------------------------------- -------------------------
    [信息] 构建失败
    [信息] --------------------------------------------- -------------------------
    [INFO] 总时间：16.128s
    [INFO] 完成时间：2012 年 12 月 8 日星期六 22:16:08 GMT+05:30
    [INFO] 最终内存：4M/81M
    [信息] --------------------------------------------- -------------------------
    [错误] 无法在项目公共资源上执行目标：无法解析项目 HFC:commons:jar:1.0 的依赖项：无法解析以下工件：org.springframework:org.springframework.core:jar:3.1.3.RELEASE , org.springframework:org.springframework.beans:jar:3.1.3.RELEASE, org.springframework:org.springframework.context:jar:3.1.3.RELEASE: 找不到工件 org.springframework:org.springframework.core :jar:3.1.3.RELEASE 在 repository.springframework.maven.release (http://repo.springsource.org/libs-release) -> [帮助 1]

```

我的 pom.xml 是[这样的](https://gist.github.com/4241054)

我在这里想念什么。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:31:41.640

看起来您使用了错误的 artifactId。

你应该使用：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency> 
```

见[这里](http://search.maven.org/#artifactdetails%7Corg.springframework%7Cspring-core%7C3.1.3.RELEASE%7Cjar)。

# android - Android：图像上的用户输入

> ID：13779765
> 
> 赞同：1
> 
> 时间：2012-12-08T17:11:24.510
> 
> 标签：android

我正在尝试在所选图像上添加用户输入。到目前为止，我能够选择图像，然后模拟器的键盘出现，但文本没有添加到图像上。以下是代码。有人可以帮我弄清楚吗？谢谢！

```
public class FullImageActivity extends Activity implements OnClickListener {
private EditText textArea;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

    // get intent data
    Intent i = getIntent();

    // Selected image id

    int position = i.getExtras().getInt("id");      
    ImageAdapter imageAdapter = new ImageAdapter(this);     
    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);        
    imageView.setImageResource(imageAdapter.mThumbIds[position]);
    textArea = (EditText)findViewById(R.id.ascii_text);

}

@Override
public void onClick(View arg0) {
    textArea.setText("");
    textArea.getText();
} } 
```

full_image.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >  

<ImageView android:id="@+id/full_image_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

<EditText
    android:id="@+id/ascii_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:gravity="center|left"
    android:hint=""
    android:inputType="textMultiLine"
    android:lines="10"
    android:maxLines="10"
    android:minLines="10"
    android:singleLine="false"
    android:textColor="#ffffff"
    android:typeface="monospace" /> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:22:50.480

试试这个方法

```
private BitmapDrawable writeTextOnDrawable(int drawableId, String text) {

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId)
            .copy(Bitmap.Config.ARGB_8888, true);

    Typeface tf = Typeface.create("Helvetica", Typeface.BOLD);

    Paint paint = new Paint();
    paint.setStyle(Style.FILL);
    paint.setColor(Color.WHITE);
    paint.setTypeface(tf);
    paint.setTextAlign(Align.CENTER);
    paint.setTextSize(convertToPixels(mContext, 11));

    Rect textRect = new Rect();
    paint.getTextBounds(text, 0, text.length(), textRect);

    Canvas canvas = new Canvas(bm);

    //If the text is bigger than the canvas , reduce the font size
    if(textRect.width() >= (canvas.getWidth() - 4))     //the padding on either sides is considered as 4, so as to appropriately fit in the text
        paint.setTextSize(convertToPixels(mContext, 7));        //Scaling needs to be used for different dpi's

    //Calculate the positions
    int xPos = (canvas.getWidth() / 2) - 2;     //-2 is for regulating the x position offset

    //"- ((paint.descent() + paint.ascent()) / 2)" is the distance from the baseline to the center.
    int yPos = (int) ((canvas.getHeight() / 2) - ((paint.descent() + paint.ascent()) / 2)) ;  

    canvas.drawText(text, xPos, yPos, paint);

    return new BitmapDrawable(getResources(), bm);
}

public static int convertToPixels(Context context, int nDP)
{
    final float conversionScale = context.getResources().getDisplayMetrics().density;

    return (int) ((nDP * conversionScale) + 0.5f) ;

} 
```

由@Arun George 推荐

希望这是你需要的

# css - 使文本的 div 只能与其容器一样宽

> ID：13779772
> 
> 赞同：0
> 
> 时间：2012-12-08T17:11:54.207
> 
> 标签：css

**HTML**

```
<div class="cont">
<div class="size" id="size1"></div>
<div class="text">Here is some textHere is some text Here is some text</div>
</div>

<div class="cont">
<div class="size" id="size2"></div>
<div class="text">Here is some textHere is some text Here is some text</div>
</div>​ 
```

**CSS**

```
.size {
    background-color: red;
    height: 100px;
    width: 100px;
}
#size2 {
    width: 200px;
}
.cont {
    padding: 10px;
    float: left;
}​ 
```

我需要`div.cont`'s widths 是它们所包含的宽度`div.size`（在我的实际示例`div.size`中是一个图像，它的 with 在每个实例中都会有所不同）。

这不会发生，因为`div.text`它占用的空间比它的容器多，我该如何阻止它并使文本换行？

[JS小提琴](http://jsfiddle.net/BKRsT/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:28:26.903

删除了所有以前的东西（在进行了一些挖掘之后）发现与工作解决方案完全相同的副本。

我的回答也不正确（因为操作员随后指定必须允许图像是可变的）

答案可以[在这个 jsfiddle 上找到，](http://jsfiddle.net/glee/qs8GJ/)并且是[css 的完全副本 - 缩小父 div 以适应一个孩子的宽度并限制另一个孩子的宽度](https://stackoverflow.com/questions/12747045/css-shrink-a-parent-div-to-fit-one-childs-width-and-constrain-the-width-of-th?rq=1)

//html

```
<div id="container">
    <div id="child1"><img src="//www.google.com/logos/2012/Teachers_Day_Alt-2012-hp.jpg" width="300" height="116"></div>
    <div id="child2">Lorem ipsum dolor sit amet.</div>
</div>
<br/>
<a id="longtext" href="#">lengthen/shorten text</a> 
```

//css

```
#container{border:1px solid #f00;display:inline-block;margin:10px; display: table;}
#child1{border:1px solid #0f0;margin:10px; display: table-row; width: 1px;}
#child2{border:1px solid #00f;margin:10px; display: table-cell; width: 1px;}
img {border:1px solid #000;} 
```

基本上它使用 display:table-* 工作（好好阅读）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:21:52.110

'.size{ 浮动：左；}'

让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:58:38.150

扩展保罗沙利文的方法，

在你的 CSS 中：

```
.size {
  ...

    display:block; /*assuming its an image - making sure its block level*/

  ...
}

.cont {
  ...

    position:relative; /*add this to parent container if comming from cms*/

  ...
}

.text {
  ...

    position:absolute;
    top:100%; /*just to make sure content doesnt overlaps image*/

  ...
} 
```

只是为让内容与图像一样宽（加上填充）提供了一个加分点

希望能帮助到你，

小提琴：http: [//jsfiddle.net/BKRsT/3/](http://jsfiddle.net/BKRsT/3/)

# parsing - Jfif/jpeg 解析，流之间的字节

> ID：13779775
> 
> 赞同：2
> 
> 时间：2012-12-08T17:12:02.670
> 
> 标签：parsing, jpeg, file-format

我正在解析 Jpeg/JFIF 文件，我注意到在 SOI (0xFF D8) 之后，我解析了以 0xFFXX（其中 XX 是十六进制数）开头的不同“流”，直到找到 EOI (0XFFD9)。现在不同块的结构是：

```
APP0 marker     2 Bytes   
Length          2 Bytes 
```

现在，当我解析一个块时，我会解析直到达到长度字段的 2 字节中写入的长度。在那之后，我想我会立即找到另一个标记，然后是下一个块的长度。根据我的解析器并非总是如此，块之间可能存在数据。我无法找出该数据是什么，以及它是否与图像相关。您是否有任何提示这可能是什么以及如何解释这些字节？

我迷路了，如果有人能指出我正确的方向，我会很高兴。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:52:25.517

我最近也注意到了这一点。在我的情况下，它是一个 APP2 块，它是不包含块长度的 ICC 配置文件。

事实上，据我所知，块的长度不必是前 2 个字节（尽管通常是）。

在 JFIF 中，数据部分中的所有 0xFF 字节都替换为 0xFF 0x00，因此只需计算长度即可。我只是读到另一个标题，但是我注意到有时（再次在 ICC 配置文件中）有些字节序列没有意义，例如 0xFF 0x6D，所以我可能仍然遗漏了一些东西。

# mysql - 按年段间隔对行进行分组

> ID：13779777
> 
> 赞同：4
> 
> 时间：2012-12-08T17:12:12.507
> 
> 标签：mysql, group-by

我有一个表（tbl_people），在这个表中我有一个日期时间字段，我想分组并计算 10 年为一组的记录......结果应该是这样的：
| 计数 | 年份 |
| 1000 | 1980-1989 |
| 250 | 1990-1999 |

我可以编写多个查询来做到这一点，但这意味着我必须为每个范围编写不同的查询。有没有办法从最少的年份（10 年的间隔）动态递增并计算间隔内的记录数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T17:50:13.793

首先计算每一行的十年

```
select floor(year(`year`) / 10) * 10 as decade
from tbl_people 
```

然后使用这个中间结果来计算[SQL Fiddle](http://www.sqlfiddle.com/#!2/ee2b3/3/0)

```
select count(*), decade, decade + 9
from (select floor(year(`year`) / 10) * 10 as decade
      from tbl_people) t
group by decade 
```

或者这个[SQL Fiddle](http://www.sqlfiddle.com/#!2/ee2b3/5/1)，如果你想在一列中显示十年

```
select count(*) as count, concat(decade, '-', decade + 9) as year
from (select floor(year(`year`) / 10) * 10 as decade
      from tbl_people) t
group by decade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:17:35.677

这应该可以工作 - [SQL Fiddle](http://www.sqlfiddle.com/#!2/ee2b3/10)（感谢 Olaf Dietsche 向我展示了这个美妙的网站存在）：

```
SELECT
    COUNT(`year`) as `count`,
    CONCAT(
        FLOOR(YEAR(`year`) / 10) * 10, 
        '-', 
        (CEIL(YEAR(`year`) / 10) * 10) - 1
    ) as `year`
FROM
    `tbl_people`
GROUP BY
    CONCAT(
        FLOOR(YEAR(`year`) / 10) * 10,
        '-', 
        (CEIL(YEAR(`year`) / 10) * 10) - 1
    ) 
```

如果数字是 1992 年，`FLOOR(1992 / 10)`将给出`199`，而次与`10`将给出`1990`。`CEIL(1992 / 10)`=`200`和 times `10`=的`2000`相同之处，减号`1`，`1999`所以`year`应该是`1990-1999`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:18:40.743

这会有所帮助。

```
 select CONCAT(FLOOR(YEAR(from_unixtime(TIMESTAMP))/10)*10,'-',(FLOOR(YEAR(from_unixtime(TIMESTAMP))/10)*10)+9) as year , count(ID) from 
    TABLE group by FLOOR(YEAR(from_unixtime(TIMESTAMP))/10)*10; 
```

# oracle - 选择和更新授予权限 oracle

> ID：13779783
> 
> 赞同：0
> 
> 时间：2012-12-08T17:12:38.457
> 
> 标签：oracle, select, grant

我正在尝试使用 where 子句授予用户更新特定列的权限。根据我所学到的，为了使用 where once 必须具有 SELECT 权限进行更新。这就是我所拥有的，我知道语法是错误的，所以你能告诉我正确的语法或在哪里可以找到它吗？

```
grant  select, update on
fullname, address where empid>5 to updateruser; 
```

然后我在 myemployee 上尝试了这个 grant select, update (empid, fullname) 到 updateruser where empid>105;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:00:29.110

这是不可能的。虽然你可以在你的桌子上创建一个视图：

```
create view table_view as select fullname, address from base_table where empid > 5; 
```

然后授予对此视图的访问权限：

```
grant select, update on table_view to updateuser; 
```

这应该可以工作，因为这样简单的视图可以在 oracle 中更新。

# html - 如何使用 CSS 将图像添加到锚标签？

> ID：13779787
> 
> 赞同：25
> 
> 时间：2012-12-08T17:12:57.913
> 
> 标签：html, css

我想在菜单栏上显示带有链接的图像。我的代码如下：

```
 <a href="#" class="login" title="Login"></a> 
```

css中的登录类如下：

```
 .login{background: url(../img/user.png) no-repeat 6px center;} 
```

但是，我无法在浏览器中查看图像。如果我尝试过

```
 <a href="#" class="login" title="Login">Login</a> 
```

然后图像出现在背景中。但我只想使用图像而不是文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-08T17:15:51.487

您必须在`a`标签上设置尺寸，并将其设置为`display: block;`.

```
.login {
  background: url(../img/user.png) no-repeat 6px center;
  width: 100px;
  height: 100px;
  display: block;
} 
```

当然，用正确的尺寸替换尺寸。

或者，您可以将图像直接放入`a`标签中，如下所示：

`<a href="#" class="login" title="Login"><img src="../img/user.png" /></a>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T17:15:55.930

您可以使用以下内容：

```
<a href="#" class="login" title="Login"><img src="../img/user.png" /></a> 
```

编辑：我忘了提到这意味着你必须从你的 CSS 中删除背景图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T01:51:14.883

使用以下代码：

```
<a href="#" class="navbar-brand" title="Home"><img src= {require('../img/image_namer.svg')} /></a>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T09:31:20.583

# 05 2021

## 搜索引擎优化

添加带有 href 元素的图像时要记住的事情。如果可能，请尝试使用`img`内部`href`元素。这对seo有好处。如果图像无法加载，它将显示`alt`文本。

> 每当链接图像时，Google 都会使用图像的 alt 属性中包含的文本作为锚文本。- 莫兹

来源：[https ://moz.com/learn/seo/anchor-text](https://moz.com/learn/seo/anchor-text)

当您`img`使用`href`元素包装时，请始终包含`alt`文本。
这将作为`href`元素的锚文本。

```
<a href="#" class="login" title="Login">
    <img src="../img/user.png" alt="User profile"/>
</a> 
```

# css - 如何用骨架制作 100% 高度的柱子？

> ID：13779788
> 
> 赞同：6
> 
> 时间：2012-12-08T17:13:00.317
> 
> 标签：css, skeleton-css-boilerplate

我想要 2 列高度为 100%，而不使用`<table>`和使用骨架 css 中的响应列。

```
html, body {
    height: 100%;
}
.container {
    min-height: 100%;
}
.column, .columns {
    min-height: 100%;
}

<div class="container">
    <div class="ten columns alpha">
               bla bla bla
    </div>
    <div class="six columns omega">
        bla bla bla
    </div>
</div> 
```

容器看起来是 100% 的高度，但不是列。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T09:24:06.160

试试这个 CSS：

```
.container {
    min-height: 100%;
    float: left;
    width: 100%;
} 
```

# qt - 监控互联网连接状态

> ID：13779789
> 
> 赞同：3
> 
> 时间：2012-12-08T17:13:11.653
> 
> 标签：qt

如何在 qt 中监控互联网连接状态？我的意思是我希望能够将图标更改为活动/非活动取决于是否存在互联网连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:36:43.610

如果您使用的是 QML，则 Qt Mobility 包中有[NetworkInfo QML 元素](http://doc.qt.digia.com/qtmobility/qml-networkinfo.html)。此外，其中包含一个示例，如何检查是否存在 WLAN 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T07:35:51.693

我使用此代码检查互联网状态。

```
bool ConnectivityManager::isOnline()
{
    bool retVal = false;
    QNetworkAccessManager nam;
    QNetworkRequest req(QUrl("http://www.google.com"));
    QNetworkReply* reply = nam.get(req);
    QEventLoop loop;
    QTimer timeoutTimer;

    connect(&timeoutTimer, SIGNAL(timeout()), &loop, SLOT(quit()));
    connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));

    timeoutTimer.setSingleShot(true);
    timeoutTimer.start(3000);

    loop.exec();

    if (reply->bytesAvailable())
    {
        retVal = true;
    }

    return retVal;
} 
```

# ajax - getJSON 成功函数超出范围

> ID：13779794
> 
> 赞同：0
> 
> 时间：2012-12-08T17:13:35.320
> 
> 标签：ajax, jquery, getjson

我刚刚开始使用 jquery 编写 AJAX 函数。我在这里打电话`myfunction()`。check.php 在哪里返回`{"count":1}`或`{"count":0}`myfunction 总是返回`retval=false`。但是因为`{"count":1}`它应该返回true。我不知道我错在哪里。下面是我正在使用的代码。

```
function myfunction(){
var retval=false;
if($('#tag').val() != ''){
    var query=$( "#tag" ).val();
    $.getJSON("check.php",{
        q: query
    },function(data){
        if(data.count==0){
            $('#formerrormsg').html('Error msg');
        }
        else{
            retval=true;
        }
    });
}
return retval;
} 
```

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:21:01.297

那是因为，`$.getJSON(..)`是**异步**的。以下是 jQuery 文档关于您传递的第三个参数 ( `function(data){...}`) 的说明：

> *success(data, textStatus, jqXHR)*：请求成功时执行的**回调函数。**

设置`retval`为 true 的函数在 AJAX 调用成功时执行；不是当你打电话时`myfunction()`

有两种方法可以解决这个问题：

*   使您的 AJAX 调用同步；在收到响应之前，该函数不会返回。（不是一个好主意，UI 可能会冻结）
*   修改您的代码——异步方式。通常，从定义为第三个参数的“成功函数”中调用函数（理想情况下取决于返回值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:20:18.953

这是一个 AJAX（异步）请求，因此`return retval;`在 AJAX 成功函数执行之前返回，因此总是返回 false。您需要更改实现以在返回和使用之前等待该请求`retval`。

# python - 自动页面更新应用引擎

> ID：13779797
> 
> 赞同：0
> 
> 时间：2012-12-08T17:13:46.807
> 
> 标签：python, google-app-engine, webpage

我有一个使用 Python appengine 的应用程序，有一个更新用户状态的服务，如果管理员打开了一个页面，我需要它来实时更新。我知道 appengine 有 CRON 和任务队列，处理这个问题的正确方法是什么？我应该在触发 jscript 的模型中设置更新标志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:23:13.993

[Channel API](https://developers.google.com/appengine/docs/python/channel/overview)可用于向客户端发送实时（ish）数据，而无需客户端轮询服务器。

# mysql - MySQL - 无数据 - 功能

> ID：13779799
> 
> 赞同：1
> 
> 时间：2012-12-08T17:14:28.010
> 
> 标签：mysql, function, return

我在 MySQL 中不断收到此警告，但不知道为什么。下面提供的功能。

```
Warning | 1329 | No data - zero rows fetched, selected, or processed 
```

功能：

```
CREATE FUNCTION CONTACT_INFO_EXISTS(
    hp VARCHAR(64),
    wp VARCHAR(32),
    mp VARCHAR(32),
    f VARCHAR(32),
    pe VARCHAR(64),
    se VARCHAR(64),
    c TIMESTAMP
)
RETURNS VARCHAR(36)
READS SQL DATA
BEGIN
    DECLARE c_id CHAR(36);

    SET c_id = NULL;

    SELECT contact_infouuid INTO c_id FROM contact_info
        WHERE (home_phone = hp OR hp IS NULL)
            AND (work_phone = wp OR wp IS NULL)
            AND (mobile_phone = mp OR mp IS NULL)
            AND (fax = f OR f IS NULL)
            AND (primary_email = pe OR pe IS NULL)
            AND (secondary_email = se OR se IS NULL)
            AND (last_updated = c OR c IS NULL)
        LIMIT 1;

    RETURN IF(c_id IS NOT NULL, c_id, '0');
END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:14:32.067

尝试这个：

```
CREATE FUNCTION CONTACT_INFO_EXISTS(
    hp VARCHAR(64),
    wp VARCHAR(32),
    mp VARCHAR(32),
    f VARCHAR(32),
    pe VARCHAR(64),
    se VARCHAR(64),
    c TIMESTAMP
)
RETURNS VARCHAR(36)
READS SQL DATA
BEGIN
    DECLARE c_id CHAR(36);

    SET c_id = NULL;

     IF EXISTS (SELECT * FROM contact_info
                  WHERE (home_phone = hp OR hp IS NULL)
                        AND (work_phone = wp OR wp IS NULL)
                        AND (mobile_phone = mp OR mp IS NULL)
                        AND (fax = f OR f IS NULL)
                        AND (primary_email = pe OR pe IS NULL)
                        AND (secondary_email = se OR se IS NULL)
                        AND (last_updated = c OR c IS NULL)) THEN 
         SELECT contact_infouuid INTO c_id FROM contact_info
              WHERE (home_phone = hp OR hp IS NULL)
                    AND (work_phone = wp OR wp IS NULL)
                    AND (mobile_phone = mp OR mp IS NULL)
                    AND (fax = f OR f IS NULL)
                    AND (primary_email = pe OR pe IS NULL)
                    AND (secondary_email = se OR se IS NULL)
                    AND (last_updated = c OR c IS NULL)
              LIMIT 1;
     END IF;
    RETURN IF(c_id IS NOT NULL, c_id, '0');
END$$ 
```

# python - 如何找到我的 Python Tic Tac Toe 游戏的获胜者？

> ID：13779805
> 
> 赞同：1
> 
> 时间：2012-12-08T17:15:04.903
> 
> 标签：python, graphics, python-2.7, tic-tac-toe

到目前为止，我有一个程序，其中 2 个玩家可以依次单击以放置 X 和 O。我不确定如何让程序识别获胜者/平局。如果你们可以帮助我制作一个以任何方式在屏幕上显示获胜/平局的功能，我会永远爱你们。谢谢。

```
from graphics import *

import sys

def player_o(win, center):
'''
Parameters:
- win: the window
'''
    outline_width = 5
    circle = Circle(center, boxsize/2)
    circle.setOutline('red')
    circle.setWidth(outline_width)
    circle.draw(win)

def player_x(win, p1x, p1y):
'''
Parameters:
- win: the window
'''
for i in range(2):
    deltaX = (-1) ** i * (boxsize / 2)
    deltaY = (boxsize / 2)
    line = Line(Point(p1x - deltaX, p1y - deltaY),
             Point(p1x + deltaX, p1y + deltaY))
    line.setFill('red')
    line.setWidth(5)
    line.draw(win)

def game():

global win
global boxsize

    try:
        winsize = int(input("How large would you like the window? (Between 100 and 3000): "))
        if winsize < 100 or winsize > 3000:
            print("Invalid window size")
            quit()

    squares = int(input("How many squares per row? (Between 3 and 10):"))
    boxsize = winsize/ squares
    if squares < 3 or squares > winsize / 10:
        print("Invalid number")
        quit()
    except ValueError:
        sys.exit("Not a valid number")

    win = GraphWin("Tic Tac Toe", winsize, winsize)

    for i in range(squares - 1):
        hline = Line(Point(0, (winsize/squares) * (i + 1)), Point(winsize,  (winsize/squares) * (i + 1)))
        hline.draw(win)
        vline = Line(Point((winsize/squares) * (i + 1), 0), Point((winsize/squares) * (i + 1), winsize))
        vline.draw(win)

for i in range((squares ** 2) // 2):

    print("X, click a square.")
    p1mouse = win.getMouse()
    p1x = p1mouse.getX()
    p1y = p1mouse.getY()
    player_x(win, p1x, p1y)

    print("O, click a square.")
    p2mouse = win.getMouse()
    p2x = p2mouse.getX()
    p2y = p2mouse.getY()
    player_o(win, Point(p2x, p2y))

if squares % 2 == 1:
    print("X, click a square.")
    p1mouse = win.getMouse()
    p1x = p1mouse.getX()
    ply = p1mouse.getY()
    player_x(win, p1x, p1y)

game() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T17:20:24.103

保持数据和数据表示分离。这就是如何。现在你只是在画东西，而不是你应该生成一些比赛场地的表示（例如，盒子的列表和它们的状态，例如，由 p1 选中，由 p2 选中或未选中），然后在需要时使用它来绘制。优势应该立即显而易见 - 如果您知道游戏的状态，确定是否有赢家（以及获胜者是谁）是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:45:00.887

After 3 turns (minimum turns to win) check your 2d array if there is a token next to the last played by adding/substracting one, if found repeat same operation to array indices else break out.

If 2nd control structure is reached break and announce winner.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T21:36:52.907

游戏中的每一步都应该使用二维数组或字典（值是列表）。然后，您可以检查每种获胜方式。这样，您还可以检查移动是否有效——棋盘上的位置是否被占据。

我还建议使用数字或坐标系来指示运动。

董事会看起来像这样：

```
1 2 3
4 5 6
7 8 9 
```

数字是板上对应的位置。

例如：

在初始化中：

```
moves = 0
positions = {'1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9':0}
# '1' - '9' are the spots on the board.
# 0 means the spot is empty, 'X' means the spot is taken by 'X', 'O' means the spot is taken by 'O'. You can use any other naming system, but this is simple. 
```

在运动代码中：

```
while 1 == 1: # just a loop until the input is valid. See the 'break' statement below
   new_move = input("X, enter what space to move to: ")
   if positions[new_move] == 0: # if that board spot is empty
      moves += 1 #moves = moves + 1
      positions[new_move] == 'X' # board spot is now occupied by 'X'
      # code to show the piece on the board
      if moves >= 5: # least possible moves to win is 5
         win_check(positions)
      break 
```

或者，您可以将移动用作函数，并让它递归调用自身，直到输入有效：

```
def move_X():
   new_move = input("X, enter what space to move to: ")
   if positions[new_move] == 0: # if that board spot is empty
      moves += 1 #moves = moves + 1
      positions[new_move] == 'X' # board spot is now occupied by 'X'
      # code to show the piece on the board
      if moves >= 5: # least possible moves to win is 5
         win_check(positions)
      move_O() # this should be defined similarly to 'move_X' except that it would correlate to 'O'.
   else:
      move_X() 
```

中奖检查方法：

```
def win_check(positions):
   if positions['1'] == 'X' and positions['2'] == 'X' and positions['3'] == 'X':
      return "Winner: X"
   elif # similar things, checking all of the other ways to win. 
```

您需要 1 个`if`语句（开始时）和 15 个`elif`语句，因为每个玩家有 8 种获胜方式，因此必须进行 16 次检查。

# c++ - RAII 如何与指针一起使用？

> ID：13779819
> 
> 赞同：0
> 
> 时间：2012-12-08T17:16:16.510
> 
> 标签：c++, raii

如果有课：

```
class classA {
public:
    int z = 5;
}; 
```

我理解 RAII 是我写的时候，`classA Aobject`但是如果我想声明一个全局指针我该怎么办？

```
classA *Aobject;
int main()
{
    Aobject = new classA; //not RAII

    cout << Aobject->z << endl;

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:18:19.760

我假设您的意思是您想要声明一个对象，但您不想立即初始化它，可能是因为您还没有正确构造它所需的所有参数。那是对的吗？使用智能指针。

```
#include <memory>
#include <iostream>

std::unique_ptr<classA> Aobject;
int main()
{
    Aobject.reset(new classA);

    cout << Aobject->z << endl;

    return 1;
} 
```

# ruby-on-rails-3 - 将竞赛 ID 传递到 URL 以在索引中搜索

> ID：13779823
> 
> 赞同：0
> 
> 时间：2012-12-08T17:16:39.217
> 
> 标签：ruby-on-rails-3, url

我有两个模型，竞赛和提交。**提交**bel​​ongs_to 比赛和**比赛**has_many 提交。

在提交的索引操作中，我进行了搜索：

```
def index
   contest_id = params[:contest_id]
   @contest = Contest.find(contest_id)
   if params[:search].blank?
      @submissions = Submission.paginate(:per_page => 10, :page => params[:page])
   else
      @submissions = Submission.search(params[:search]).paginate(:per_page => 10, :page => params[:page])
   end
      @search = params[:search] 
end 
```

我认为传递它的正确方法是通过提交>索引视图中的搜索表单：

```
<div class ="span12 row">
    <%= form_tag submissions_path, :method => 'get', :class => "form-search pull-right" do %>
    <%= text_field_tag :search, params[:search], :class => 'input-xlarge', :placeholder => 'Search by member, title or description' %>
    <%= submit_tag "Search", :title => nil, :class => 'btn btn-primary' %>
<% end %>
</div> 
```

我已经能够使用这个来接近：

```
<%= hidden_field :contest_id, @contest.id %> 
```

在表单中，但它在 url 中返回：

```
http://localhost:3000/submissions?utf8=%E2%9C%93&search=test&contest_id%5B%5D=&commit=Search 
```

还有一个错误：

```
Couldn't find Contest with id= 
```

我也试过这个：

```
<%= hidden_field(:contest_id, :value => @contest.id ) %> 
```

但它返回类似的 url 和错误。

现在，我被困住了。如果您有任何想法，请告诉我。

[编辑 - 添加 html]

搜索前：

```
<div class ="span12 row">
    <form accept-charset="UTF-8" action="/submissions" class="form-search pull-right" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
       <input class="input-xlarge" id="search" name="search" placeholder="Search by member, title or description" type="text" />
       <input id="contest_id_5" name="contest_id[5]" type="hidden" />
       <input class="btn btn-primary" name="commit" type="submit" value="Search" />
    </form>
</div> 
```

以下是其他链接提交的内容：

从提交显示页面：

```
<%= link_to 'Browse All Submissions', submissions_path(:contest_id => @contest.id), :class => 'btn btn-mini pull-right' %>` 
```

并从比赛节目页面：

```
<%= link_to 'Browse All Submissions', submissions_path(:contest_id => @contest.id), :class => 'btn btn-mini pull-right' %> 
```

这两个都传递了 url “contest_id=5”，这是控制器需要找到一个比赛。我在搜索中遇到的问题是找到正确的语法来让 match_id=5 出现，而​​不会被笨拙的庞然大物搞砸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:26:31.770

结果证明这是一个简单的解决方案。在搜索表单中插入 hidden_​​field_tag：

```
<%= hidden_field_tag 'contest_id', @contest.id %> 
```

这会将正确的值传递给参数：

```
 http://localhost:3000/submissions?utf8=%E2%9C%93&search=new&contest_id=5&commit=Search 
```

# c# - CalcPay 方法无法正常工作

> ID：13779827
> 
> 赞同：0
> 
> 时间：2012-12-08T17:17:02.317
> 
> 标签：c#, methods

我的 CalcPay 方法没有正确计算加班时间，任何人都可以看到任何会导致这种情况的明显问题吗？

```
 private const double FED_TAX = 0.2;
    private const int FULL_TIME = 40;
    private const double OVER_TIME = 1.5;
    private const double STATE_TAX = 0.075;

    public double CalcPay()
    {

        double pay = hoursWorked * hourlyWage;
        double overTimeHors = hoursWorked - FULL_TIME;

        if (overTimeHours > 0)
        {
            pay = overTimeHors * (hourlyWage * OVER_TIME);
        }
        double tax1 = pay * FED_TAX;
        double tax2 = pay * STATE_TAX;
        return ((pay - tax1) - tax2);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:21:49.353

您需要将加班费添加到主工资中，而不是替换它：

```
if (overTime > 0)
{
    pay += overTime * (hourlyWage * OVER_TIME);
     // ^ increment
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:34:15.103

问题是您重新定义了可变工资，这意味着您的计算是基于加班费...

# c# - 事件“点击”后如何获取列表框项目的属性

> ID：13779828
> 
> 赞同：0
> 
> 时间：2012-12-08T17:17:03.570
> 
> 标签：c#, wpf, windows-phone-7

我有一个自定义列表框。一些集合的项目具有字段“名称”、“文本”、“图像”和“网址”。其他可能有其他字段（使用模板选择器）。因此，如果项目具有“名称”、“文本”、“网址”和“图像”字段 - 它在列表框中显示为 2 个文本块和 1 个图像。当我点击图像时 - 程序必须打开新窗口，打开 webBrowser 并转到项目属性“url”中的 URL。我了解如何将信息从一个页面传输到另一个页面，但我不明白如何从项目中获取“url”。我试过

```
 private void Video_Tap(object sender, GestureEventArgs e) // event when tap on the image
    {
        New tmp = ((sender as ListBox).SelectedItem as New); // New - is the type of collection's item
        string vid = tmp.Video.url; // Video has fields "image" and "url"

        string destination = string.Format("/Video_Page.xaml?uri={0}", vid );
        NavigationService.Navigate(new Uri(destination, UriKind.Relative));
    } 
```

但发件人有一个图像类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:48:21.267

您可以调用[`Parent`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.parent.aspx)Image sender 以获取其容器（或多次调用，具体取决于您的 xaml 的结构），然后查看容器[`Children`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)以找到您要查找的文本框。例如，也许您想做这样的事情（`Tag`在 xaml 中设置包含您的 url 的文本框的属性）。

```
var grid = (Grid) ((Image) sender).Parent;
foreach (var child in grid.Children)
{
    if (child is TextBox && ((TextBox) child).Tag == "URL")
    {
        return (Textbox) child;
    }
} 
```

或者，如果您只是想要一个对 ListBox 的始终可用的引用，只需`x:Name = "_MyListbox"`在 xaml 中设置它，它将成为该类的一个字段。

作为最后一个选项，我认为绑定到 可能对您来说更容易`ListBox.SelectedItem`，因此您始终拥有一些包含当前选定`New`项目的属性。

# sql - 从过程中返回游标

> ID：13779833
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:17:14.597
> 
> 标签：sql, oracle

我正在尝试从将显示表格内容的过程中返回光标`invoice`。包和过程已成功创建，但是当我运行该行时 -`Exec CursorPckg.CursorTest_Proc();`我收到以下错误`component 'CURSORTEST_PROC' must be declared`任何想法？我正在运行 SQL*PLUS

```
CREATE or REPLACE PACKAGE CursorPckg
IS
  TYPE salary_type IS REF CURSOR RETURN Invoice%ROWTYPE;
END CursorPckg;

CREATE OR REPLACE PACKAGE BODY CursorPckg AS
  PROCEDURE CursorTest_Proc (c1 OUT CursorPckg.salary_type) 
  IS
  BEGIN
    OPEN c1 FOR 
    SELECT * FROM Invoice;
  END CursorTest_Proc;
END CursorPckg; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:51:52.880

您需要在包声明中添加过程声明，以便可以从包外部访问它。像这样：

```
CREATE or REPLACE PACKAGE CursorPckg
IS
TYPE salary_type IS REF CURSOR RETURN Invoice%ROWTYPE;
PROCEDURE CursorTest_Proc (c1 OUT CursorPckg.salary_type);
END CursorPckg; 
```

**编辑：**

回答您的评论。如果不提供 type 参数，您将无法执行此过程`CursorPckg.salary_type`。

# iphone - UITableView 中的自定义布局

> ID：13779834
> 
> 赞同：0
> 
> 时间：2012-12-08T17:17:19.490
> 
> 标签：iphone, ios, uitableview

我正在编写一个 iPhone 应用程序，其中使用了一个 UITableView，它有几个部分；每个部分都有一个标题，然后是这样的行：

![在此处输入图像描述](../Images/c3e840818946d7fbe4ef6647744c1354.png)

通过使用自定义 UITableViewCell 对象，我可以正确地做行样式，但我该如何做标题？如你看到的：

1.  标题的文本以两条线为中心，每边一条
2.  标题颜色不同
3.  每个部分的角也是圆角的

我如何以编程方式或使用情节提要来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:19:47.983

`- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`

此方法作为 UITableViewDelegate 的一部分实现，旨在允许您为 UITableViews 中的标题创建自定义视图。您可以从该方法返回任何 UIView，无论是您要在 Interface Builder 中创建的还是在代码中创建的。

# c# - AddOrUpdate 无法按预期工作并产生重复项

> ID：13779836
> 
> 赞同：19
> 
> 时间：2012-12-08T17:17:40.240
> 
> 标签：c#, entity-framework, entity-framework-5, upsert

我正在使用基于代码优先 DBContext 的 EF5 设置。

在`DbMigrationsConfiguration.Seed`我试图用默认的虚拟数据填充数据库。为了完成这个任务，我使用`DbSet.AddOrUpdate`方法。

最简单的代码来说明我的目标：

```
j = 0;

var cities = new[]
    {
        "Berlin",
        "Vienna",
        "London",
        "Bristol",
        "Rome",
        "Stockholm",
        "Oslo",
        "Helsinki",
        "Amsterdam",
        "Dublin"
    };
var cityObjects = new City[cities.Length];

foreach (string c in cities)
{
    int id = r.NextDouble() > 0.5 ? 0 : 1;
    var city = new City
        {
            Id = j,
            Name = c,
            Slug = c.ToLowerInvariant(),
            Region = regions[id],
            RegionId = regions[id].Id,
            Reviewed = true
        };
    context.CitySet.AddOrUpdate(cc => cc.Id, city);
    cityObjects[j] = city;
    j++;
} 
```

我尝试使用/省略`Id`字段以及使用`Id`/`Slug`属性作为更新选择器。

`Update-Database`运行时，`Id`字段被忽略，值由 SQL Server 自动生成，DB 填充重复项；`Slug`选择器允许重复，并且在随后的运行中会产生异常 ( `Sequence contains more than one element`)。

方法是否`AddOrUpdate`打算以这种方式工作？我应该手动执行 upsert 吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-08T22:15:59.073

首先（还没有答案），`AddOrUpdate`可以使用新对象数组调用，因此您只需创建一个类型数组`City[]`并调用`context.CitySet.AddOrUpdate(cc => cc.Id, cityArray);`一次。

（已编辑）

其次，`AddOrUpdate`使用标识符表达式 ( `cc => cc.Id`) 查找与`Id`数组中的城市相同的城市。这些城市将被更新。数组中的其他城市将被插入，但它们的`Id`值将由数据库生成，因为`Id`它是一个标识列。它不能由插入语句设置。（除非您将身份插入设置为打开）。因此，当使用`AddOrUpdate`带有标识列的表时，您应该找到另一种识别记录的方法，因为现有记录的 Id 值是不可预测的。

在您的情况下，您用作`Slug`的标识符`AddOrUpdate`，它应该是唯一的（根据您的评论）。我不清楚为什么不使用匹配`Slug`的 s 更新现有记录。

我设置了一个小测试：添加或更新具有 Id (iedntity) 和唯一名称的实体：

```
var n = new Product { ProductID = 999, ProductName = "Prod1", UnitPrice = 1.25 };
Products.AddOrUpdate(p => p.ProductName, n);
SaveChanges(); 
```

当“Prod1”尚不存在时，将其插入（忽略 Id 999）。
如果它是并且`UnitPrice`不同，它会被更新。

查看发出的查询，我看到 EF 正在按名称查找唯一记录：

```
SELECT TOP (2) 
[Extent1].[ProductID] AS [ProductID], 
[Extent1].[ProductName] AS [ProductName], 
[Extent1].[UnitPrice] AS [UnitPrice]
FROM [dbo].[Products] AS [Extent1]
WHERE N'Prod1' = [Extent1].[ProductName] 
```

然后下一个（当找到匹配并且`UnitPrice`不同时）

```
update [dbo].[Products]
set [UnitPrice] = 1.26
where ([ProductID] = 15) 
```

这表明 EF 找到了一条记录，现在使用关键字段进行更新。

我希望看到这个例子能对你的情况有所了解。也许您也应该监视 sql 语句，看看是否有任何意外发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T05:23:52.287

```
var paidOutType = new List<PaidOutType>
                {
                    new PaidOutType { PaidOutTypeID = 1, Code = "001", Description = "PAID OUT 1", PType = "1", Amount = 0, IsSalesSummery = true,DayFrom=1,DayTo=31 },
                    new PaidOutType { PaidOutTypeID = 2, Code = "002", Description = "PAID OUT 2", PType = "1", Amount = 0, IsSalesSummery = true,DayFrom=1,DayTo=31 },
                    new PaidOutType { PaidOutTypeID = 3, Code = "002", Description = "PAID OUT 3", PType = "1", Amount = 0, IsSalesSummery = true,DayFrom=1,DayTo=31 },
                };
                paidOutType.ForEach(u => smartPOSContext.PaidOutType.AddOrUpdate(u));
                smartPOSContext.SaveChanges(); 
```

# django - 我可以使用默认查询集创建自定义 django 模型选择字段吗

> ID：13779839
> 
> 赞同：1
> 
> 时间：2012-12-08T17:18:29.023
> 
> 标签：django, django-forms, django-models

我有一个带有 follow_by 字段的订单模型：

```
class order(models.Model):
   followed_by = models.ForeignKey(User, limit_choices_to={'groups__name': "Managers"}) 
```

我有几个这样的模型和这些模型的表格。默认情况下，表单显示一个 modelchoicefield 列出作为经理的用户。这可以。但是显示效果不好：它给出了用户名，我想要名字+姓氏。这会很好地工作：[更改 Django ModelChoiceField 以显示用户的全名而不是用户名](https://stackoverflow.com/questions/3167824/change-django-modelchoicefield-to-show-users-full-names-rather-than-usernames)

除了现在我必须声明查询集以将用户限制为经理。我可以使用上述方法，以便自定义模型选择字段默认为我过滤的查询集。所以从一个表格中我可以说：

```
followed_by = ManagerUserModelChoiceField() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:45:48.440

Can you define the queryset on your `ModelChoiceField` child class?

```
class UserModelChoiceField(ModelChoiceField):
    # Query that returns set of valid choices
    queryset = User.objects.filter(group__name='Managers')
    def label_from_instance(self, obj):
        return obj.get_full_name() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:48:20.483

尝试将查询集作为参数传递给`ManagerUserModelChoiceField`类。

```
followed_by = ModelChoiceField(queryset = User.objects.filter(groups__name="Managers") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:15:24.907

在我对@Enrico 发表评论后，我想到了这个想法：我在我的自定义字段上覆盖了“init”类，如下所示：

```
class UserModelChoiceField(forms.ModelChoiceField):
    def __init__(self, *args, **kwargs):
        super(UserModelChoiceField, self).__init__(queryset=User.objects.filter(groups__name="Managers"), *args, **kwargs) 
```

我以前在 python 中看到过这样的事情，但我是 python 新手，所以我不确定这是否是一件坏事，或者我是否应该以某种方式让它变得更好？我会很感激一些反馈。话虽如此，它似乎工作正常。

# java - 通过反射创建对象时如何覆盖 Java 中的方法？

> ID：13779845
> 
> 赞同：14
> 
> 时间：2012-12-08T17:18:44.123
> 
> 标签：java, reflection, overriding

在*Java*中，是否可以覆盖您使用创建的类中的方法`reflection`？例如，假设我有以下课程：

```
public class MyObject
{
    public String foo, bar;

    public MyObject(String foo)
    {
        this.foo = foo;
        this.bar = foo + "bar";
    }

    public void setBar(String bar)
    {
        this.bar = bar;
    }
} 
```

在一个类中，我想直接创建它并覆盖它的`setBar`方法，如下所示：

```
MyObject obj = new MyObject("something")
{
    @Override
    public void setBar(String bar)
    {
        this.bar = this.foo;
    }
}; 
```

有没有办法使用反射以同样的方式覆盖方法？也许是这样的？：

```
Class<?> _class = Class.forName("com.example.MyObject");
Constructor<?> _constructor = _class.getConstructor(new Class<?>[]{String.class});
Method m = _class.getMethod("setBar", new Class<?>[]{String.class});
Object obj = _constructor.newInstance("Foo String")
{
    m = new Method(new Class<?>[]{String.class})
    {
        System.out.println("Foobar");
    }
}; 
```

如果没有，是否有其他方法可以做到这一点，或者外部库可以提供帮助？我正在寻找将侦听器添加到 setter 方法以更改绑定值的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T19:48:06.063

不，以您的示例方式不可能。

在您的示例中，Java 编译器将创建两个单独的类：

```
MyObject.class
MyObject$1.class 
```

后者是具有覆盖方法的那个。在这种情况下，它是一个*匿名内部类*（参见[Java 教程文档](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)）

但是还有更复杂的解决方案涉及字节码编织库。cglib、asm、javassist 等库为您提供了在运行时动态创建新类并加载它们的工具。

Javassist 有一个关于如何[在运行时向类添加方法](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/tutorial/tutorial2.html#add)的教程。应该可以对其进行调整以添加/覆盖该方法，如下所示：

```
CtClass origClazz = ClassPool.getDefault().get("org.example.MyObject");
CtClass subClass = ClassPool.getDefault().makeClass(cls.getName() + "New", origClazz);
CtMethod m = CtNewMethod.make(
             "public void setBar(String bar) { this.bar = bar; }",
             subClass );
subClass .addMethod(m);
Class clazz = cc.toClass(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:25:32.503

如果您要返回一个接口类型的对象，您可以使用[`Proxy.newProxyInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html?is-external=true#newProxyInstance%28java.lang.ClassLoader,%20java.lang.Class%5B%5D,%20java.lang.reflect.InvocationHandler%29)该接口的实例来动态地将方法调用发送到一个[`InvocationHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html)对象，您可以编写该对象来执行您想要的任何自定义行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:31:11.720

不，您要求的是运行时编译之类的东西。虽然并非不可能，但它肯定不是反射 API 提供的东西。

# c# - 搜索 ListView，然后用结果更新 ListView

> ID：13779851
> 
> 赞同：1
> 
> 时间：2012-12-08T17:19:06.480
> 
> 标签：c#, listview, search

我在搜索我拥有的列表视图时遇到了一些麻烦。基本上我正在制作一个音乐播放器，其中所有元数据都添加到列表视图中。然后我希望能够进行搜索，它将在所有不同的列中搜索用户想要的内容。

所以基本上下面是我的列表视图及其数据的示例。如果您在示例中输入“Cr”并单击“确定”，则列表应更新，以便仅显示标题为“Cryin”和“Crazy”的行。但是，当您随后删除搜索栏使其空白时，所有列表项都应重新出现。

显示我的列表的图片链接：http: [//i.stack.imgur.com/NQ8NI.jpg](http://i.stack.imgur.com/NQ8NI.jpg)

基本上，伪代码将类似于以下内容：

```
string searchTerm

check each row to see if it contains the searchTerm

If a row does contain the searchTerm do nothing

else remove it from the list 
```

# hibernate - 检索 Hibernate 执行的 SQL 查询

> ID：13779852
> 
> 赞同：0
> 
> 时间：2012-12-08T17:19:18.087
> 
> 标签：hibernate, jpa, playframework, playframework-1.x

我正在使用 Play Framework，我想检索 Hibernate 执行的查询。

我知道 application.conf (jpa.debugSQL=true) 中有一个设置可以在控制台中显示查询，但我想做的是从代码中检索这些查询以自己为用户显示它们（比如网站中的管理界面查看每个页面请求的查询）。

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T22:27:48.807

如果您熟悉 log4j（或任何其他类似的日志框架），它应该很容易实现。

您可以编写一个自定义附加程序，该附加程序将被配置为从`org.hibernate.SQL`（这是提供 SQL 输出的包）接收所有事件。该附加程序会将所有事件放入[某个 FIFO 缓冲区](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)中。这将允许您将最后`n`的日志条目保存在内存中。

其余的，我猜，就像在你的 webapp 中显示缓冲区内容一样简单。

编辑：事情可能是什么样子的例子：

log4j 配置：

```
<appender name="backend-appender" class="your.package.BackendAppender">
   <param name="bufferSize" value="200"/>
   <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="[%t]: %m - %c - %d %x%n"/>
   </layout>
</appender> 
```

Java代码：

```
public class BackendAppender extends AppenderSkeleton {
   private Collection<LoggingEvent> buffer;
   private int bufferSize = 10;
   private Layout layout;

   @Override
   protected void append(LoggingEvent event) {
       buffer.add(event);
   }

   public void close() {
   }

   public boolean requiresLayout() {
      return false;
   }

   @Override
   public void activateOptions() {
       if (buffer == null) {
          buffer = new CircularFifoBuffer<>(bufferSize);
       }
       layout = getLayout();
   }

   public List<String> getHibernateLog() {
      List<String> list = new ArrayList<>();
      for (LoggingEvent event : buffer) {
          if (event == null) {
              continue;
          }
          list.add(layout.format(event));
          // check event.getThrowableInformation() -- it signals this was an exception rather than typical log line and you need to handle this differently

      }
   } 
```

# c# - 如何在 Silverlight 中运行查询并从查询结果中提取信息（x 和 y 值）？

> ID：13779854
> 
> 赞同：0
> 
> 时间：2012-12-08T17:19:18.087
> 
> 标签：c#, sql, silverlight

我有一个 Silverlight 应用程序，它只是在图表上绘制点。它绘制的点来自 sql 查询。

silverlight 程序必须自行运行查询并提取相关数据。

我如何实现这种功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:02:52.053

您没有说每秒/分钟需要绘制多少次数据？是否只是绘制一次。如果是这样，那么当您的应用程序首次加载时编写一个异步调用并让调用查询 sql 并在回调中返回结果..

如果程序需要以设定的时间间隔返回数据，那么您将需要一个调度程序计时器或类似的东西..

好的像这样..

```
public class MyClass : INotifyPropertyChanged
{
    public MyClass()
    {
        DispatcherTimer timer = new DispatcherTimer();
        timer.Tick += OnTimerTick;
        timer.Interval = TimeSpan.FromSeconds(300);
    }

private void OnTimerTick(object sender, EventArgs e)
    {
        var result = await UpdateGraphPoints();
        MyGraphPoints = this.PopulateTheGraph(result);
    }

    private async Task<List<MyGraphPoint>> UpdateGraphPoints()
    {
        var oper = await YourDatabaseQueryMethod();
        return oper;
    }

    private ObservableCollection<MyGraphPoint> PopulateTheGraph(object result)
    {

    }

    private ObservableCollection<MyGraphPoint> myGraphPoints;

    public ObservableCollection<MyGraphPoint> MyGraphPoints
    {
        get { return this.myGraphPoints; }
        set
        {
            myGraphPoints = value;
            OnPropertyChanged("MyGraphPoints");
        }
    }

private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

}

```
public class MyGraphPoint : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private int xValue;

    public int XValue
    {
        get { return xValue; }
        set
        {
            this.xValue = value;
            this.OnPropertyChanged("XValue");
        }
    }

    private int yValue;

    public int YValue
    {
        get { return yValue; }
        set
        {
            this.yValue = value;
            this.OnPropertyChanged("YValue");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后在您的 xaml 中 - 将 MyGraphPoints 可观察集合绑定到您的图形控件。

# hibernate - Hibernate：如何更新不同的 ID

> ID：13779855
> 
> 赞同：0
> 
> 时间：2012-12-08T17:19:23.827
> 
> 标签：hibernate, entity

**问题：**如何在 Hibernate 中指出 [ref] 是真正的主键，但是在更新记录时我希望它在 [objectID] 上应用 .update 或 .saveOrUpdate。

**上下文：**我有一个场景，我正在将信息从 web 服务同步到表中。在导入对象时，我会保留对象的唯一引用，这使我能够再次运行脚本并更新本地保存的对象信息。

示例：由三个字段组成的简单表。

[ref] [objectID] [objectTitle]

[ref] = 主键。新记录插入的增量。用于内部查找和关系关联。

[objectID] = 对象本身的唯一标识符。

[objectTitle] = 与 objectID 相关的信息。这可能会在更新时发生变化。

我对如何在 Hibernate 中进行设置有点困惑。看来我**必须**将 [ref] 设置为 @Id，以便使用生成器自动递增。问题是我希望使用 [objectID] 更新信息，而不是 [ref]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:33:14.827

嗯，这很简单。

首先加载具有给定 objectID 的实体：

```
MyEntity m = 
    (MyEntity) session.createQuery("select m from MyEntity m where m.objectID = :objectID")
                      .setParameter("objectID", theObjectID)
                      .uniqueResult(); 
```

然后使用从 Web 服务获得的新标题更新此实体：

```
m.setObjectTitle(theObjectTitle); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T09:15:45.323

这是否可以更新表中的“id”列？.hbm 文件中的“id”如下所示：

```
<id name="id" type="int" column="id">
<generator class="increment"/>
</id> 
```

# php - PHP 代码从 JS 获取空字符串

> ID：13779857
> 
> 赞同：0
> 
> 时间：2012-12-08T17:19:33.053
> 
> 标签：php, javascript, jquery, ajax

我无法将字符串从 JS 代码获取到 PHP 代码

这是代码，当我在文本输入中输入时初始化：

```
$('#user').keypress(function(e) {
    if(e.which == 13) {

  var val = $(this).val();

$.ajax({
    type: 'POST',
    url: 'index.php',
    data: ({'latt':val
            })
        });

<?php

$val = $_POST['latt'];

echo "alert('$val')";

?>

    }
}); 
```

其中 #user 是此文本输入的 id

当我运行代码时，我看到什么都没有显示的警报

在我确切知道 JS val 不为空之前

先感谢您

PS我的页面是index.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:22:05.587

PHP 代码在页面发送到浏览器*之前运行。*`$_POST['latt']`当您导航到页面时，该 PHP 块将简单地回显 的值。您需要在成功回调中访问来自服务器的响应：

```
$('#user').keypress(function(e) {
    if (e.which == 13) {

        var val = $(this).val();

        $.ajax({
            type: 'POST',
            url: 'index.php',
            data: {
                'latt': val
            },
            success: function(data) {
                alert(data.responseText);
            }

        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:47:54.623

显然，在第一个页面加载时，它会给您空白警报，因为事件尚未发生，因此没有通过 ajax 发送任何值，并且回显部分在页面执行中没有任何条件。

但是当实际事件发生时，它将返回整个 index.php 页面作为响应，因此它们不可能再次发生实际警报。因此，我建议您将 javascript 和 php 部分分开，以便客户端-服务器请求-响应完美地发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:23:08.407

您将对象包装在括号中（请参见该`data: ()`行）。删除括号，您的代码应该可以运行：

```
$.ajax({
    type: 'POST',
    url: 'index.php',
    data: { 'latt': val }
}); 
```

# android - Android - 重绘后的监听器 invalidate()

> ID：13779860
> 
> 赞同：3
> 
> 时间：2012-12-08T17:19:48.033
> 
> 标签：android, android-view

在我要求视图无效后，我希望在视图完成重绘后收到通知。正如在[这个答案](https://stackoverflow.com/a/5073130/72746)中所说，该`invalidate()`方法不会`onDraw()`立即调用 View 的 UI，而是在主线程空闲后执行的消息队列中安排重绘。

我想显示一个进度对话框，进行一些 UI 修改，然后在正确绘制视图时关闭对话框。有什么技巧可以让我知道何时绘制视图？也许通过子类化视图，覆盖`onDraw()`方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T17:27:07.317

我想你自己回答了你的问题。为什么不：

```
public class DrawListenerView extends View{
    private Callback callback;
    public DrawListenerView(Callback callback){
        this.callback = callback;
    }

    @Override
    protected void onDraw (Canvas canvas){
        super.onDraw(canvas);

        //add your method here you want to call
        //Or use a Callback-pattern 
        callback.finish();
    } 
}

public interface Callback(){
    public void finish();
} 
```

如果您查看源代码：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/view/View.java#View.invalidate%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/view/View.java#View.invalidate%28%29)

上面的评论说

> 使整个视图无效。如果视图是可见的，onDraw(android.graphics.Canvas) 将在未来的某个时候被调用。这必须从 UI 线程调用。要从 > 非 UI 线程调用，请调用 postInvalidate()。

试试看 ：）

编辑：可能你想使用回调来处理这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T17:36:46.540

你会觉得尝试这样做很奇怪，因为你做错了。;)

您正在谈论要等待关闭对话框，直到完成绘制。这意味着您有一个足够长的绘图操作，您想要等待它。

在 onDraw 中绘制框架应该*很快。*如果您想达到 60fps 并拥有流畅的 UI，那么您每帧有 16 毫秒的时间来进行任何类型的输入处理和绘图。绘图*永远不会*花费足够长的时间，以至于您希望在完成时显示进度对话框。（除此之外，由于部分 UI 无效而导致的绘制会阻塞您的 UI 线程，并且您的进度对话框在完成之前不会说明任何进度。）

如果您需要进行一些复杂的离屏渲染以便稍后显示，您应该在 AsyncTask 或 UI 线程之外的类似操作中进行，而不是在视图的实际 onDraw 方法中进行。一旦你得到完成的回调，你可以快速绘制你刚刚创建的预渲染图像并关闭你的进度对话框。

# javascript - 重定向到 url 的 Javascript 关键字输入框

> ID：13779861
> 
> 赞同：0
> 
> 时间：2012-12-08T17:19:49.070
> 
> 标签：javascript, url, keyword, inputbox

我有一个使用 javascript 编码等的网站。我想制作一个输入框，当您输入某个关键字时，它会将您重定向到某个 url。假设我在输入框中输入“Cow”，cow 是关键字。然后它会将我重定向到某个设置的 url。但是假设我在框中输入“duck”，duck 也是一个关键字，它会将我发送到不同的设置 url。这可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:25:47.660

你可以做这样的事情

```
var keywords = [
   {
       word: "cow",
       url: "my_cow_url"
   },
   {
       word: "duck",
       url: "my_duck_url"
   }
];
var txtbox = document.getElementById("myTextBoxId");
txtbox.addEventListener("keypress",function(){
    for (var i=0;i<keywords.length;i++){
       if (keywords[i].word === txtbox.value){
           window.location.href = keywords[i].url;
           return;
       }
    }
}); 
```

# c# - 比较列表中对象的属性

> ID：13779862
> 
> 赞同：2
> 
> 时间：2012-12-08T17:20:18.003
> 
> 标签：c#

我需要同步在线数据库和本地数据库的约会。到目前为止，这是我的代码：

```
 List<Appointment> onlineAppointments = new List<Appointment>();
        List<Appointment> localAppointments = new List<Appointment>();
        Appointment appointment01 = new Appointment(new DateTime(2012, 12, 24, 17, 30, 00), new DateTime(2012, 12, 24, 17, 45, 00), name, 123, "comment", 0, "test", 123, 1, DateTime.Now);
        Appointment appointment02 = new Appointment(new DateTime(2012, 12, 24, 17, 30, 00), new DateTime(2012, 12, 24, 17, 45, 00), name, 123, "comment", 0, "test", 123, 1, DateTime.Now);

        onlineAppointments.Add(appointment01);
        localAppointments.Add(appointment02); 
```

因为我只想比较对象的一些属性，所以我创建了一个 IEqualityComparer：

```
public class AppointmentEqualityComparer<T> : IEqualityComparer<T> where T : Appointment
{
    #region IEqualityComparer<T> Members

    public bool Equals(T x, T y)
    {
        return (x == null && y == null) || ((x != null && y != null) &&
        (x.getAppointmentStart() == y.getAppointmentStart() &&
        x.getAppointmentEnd() == y.getAppointmentEnd())
        );
    }

    /// </exception>
    public int GetHashCode(T obj)
    {
        if (obj == null)
        {
            throw new ArgumentNullException("obj");
        }

        return obj.GetHashCode();
    }

    #endregion
} 
```

不幸的是，这不起作用：

```
var comparer = new AppointmentEqualityComparer<Appointment>();    
IEnumerable<Appointment> diffOnlineOffline = onlineAppointments.Except(localAppointments, comparer); 
```

含义 diffOnlineOffline 不为空，但应该是因为两个列表都包含相同的约会。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:57:05.090

您的`GetHashCode`方法应该使用用于相等的属性。目前，您想要认为相等的对象可能不会具有相同的哈希码。

你可以使用这样的东西：

```
public int GetHashCode(T obj)
{
    return 41 * (41 * (41 * (41 + obj.getAppointmentStart().GetHashCode())) 
    + obj.getAppointmentEnd().GetHashCode());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:52:30.410

我怀疑问题出在`getAppointmentStart`and`getAppointmentEnd`方法上。这是您的代码的简洁版本，具有相同的相等比较器，但使用按预期工作的属性：

```
public class Appointment
{
    private int Id { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }

    public Appointment( int id, DateTime start, DateTime end )
    {
        Start = start;
        End = end;
        Id = id;
    }
}

public class AppointmentEqualityComparer<T> : IEqualityComparer<T> where T : Appointment
{
    #region IEqualityComparer<T> Members

    public bool Equals( T x, T y )
    {
        return ( x == null && y == null )
                || ( ( x != null && y != null ) && ( x.Start == y.Start && x.End == y.End ) );
    }

    public int GetHashCode( T obj )
    {
        if( obj == null )
        {
            throw new ArgumentNullException( "obj" );
        }

        return obj.GetHashCode();
    }

    #endregion
} 
```

和实施：

```
var onlineAppointments = new List<Appointment>();
var localAppointments = new List<Appointment>();
var appointment01 = new Appointment( 1, new DateTime( 2012, 12, 24, 17, 30, 00 ),
                                        new DateTime( 2012, 12, 24, 17, 45, 00 ) );
var appointment02 = new Appointment( 2, new DateTime( 2012, 12, 24, 17, 30, 00 ),
                                        new DateTime( 2012, 12, 24, 17, 45, 00 ) );

onlineAppointments.Add( appointment01 );
localAppointments.Add( appointment02 );

var comparer = new AppointmentEqualityComparer<Appointment>();
var diffOnlineOffline = onlineAppointments.Except( localAppointments, comparer ).ToList(); 
```

where`diffOnlineOffline`只显示第一次约会。这导致得出的结论是， `getAppointmentStart`and`getAppointmentEnd`方法返回的值不是构造函数中使用的实际日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:53:11.080

您需要在 Appointment 类中实现 IEqualityComparer

# c - 在构造的字符串上使用 execvp 的问题

> ID：13779872
> 
> 赞同：2
> 
> 时间：2012-12-08T17:21:25.760
> 
> 标签：c, string, execvp

我正在尝试编写一个 shell，它的部分构造是从用户输入的字符串（缓冲区）执行代码。但是，当我尝试使用其他输入（ae.echo a）执行字符串时，它总是会搞砸并返回-1。我不知道为什么。以下是相关部分：

```
char * buffer = calloc(100, sizeof(char));
...
fgets(buffer, 100, stdin);
buffer[strlen(buffer) - 1] = 0; // necessary because of a newline inserted by fgets
...
cmd = strsep(&buffer, " ");
char * str = malloc(50 * sizeof(char));
strcat(str, "./");
strcat(str, cmd);
strcat(str, ".out");
...
i = execvp(str, (char * *) buffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:30:12.063

论据`buffer`是错误的。的第二个参数`execvp`是一个指针数组。使用此转换，您隐藏了编译器警告，但它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:30:19.177

我可以在这里看到几个潜在的问题。

首先，您正在分配空间`malloc`（意味着内容未初始化），但立即`strcat`用于写入它。除非（通过任何改变）第一个字符是 a `'\0'`，否则会给你留下一个以垃圾开头的字符串，然后是你试图放在那里的数据。它还会（很容易）导致写入超出缓冲区的末尾，从而产生未定义的行为。

如果由我决定，我想我会使用`sprintf`而不是`strcat`. 至少您所展示的内容可以：`sprintf(str, "./%43s.out", cmd);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:32:03.637

两个问题：

1.  您正在将未初始化的字符串传递给第一个 strcat。
2.  execvp 需要一个字符串数组，而不是带有空分隔字段的单个字符串。

# iphone - 使用 mvvmcross 在 ViewDidLoad 中的插座为空

> ID：13779881
> 
> 赞同：1
> 
> 时间：2012-12-08T17:22:55.477
> 
> 标签：iphone, xamarin.ios, monotouch.dialog, mvvmcross

在我的 view.designer.cs 中，我的网点是由 xcode 生成的。

开始调试时，在添加绑定时，我的属性上有一个空引用异常，在下面的代码中 this.SampleText 为空。

```
public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            this.AddBindings(
                new Dictionary<object, string>()
                {
                    { this.SampleText, "{'Text':{'Path':'VMText'}}"}
                });     
        } 
```

我在应用程序的输出中注意到以下错误：“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”

我错过了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T03:21:49.650

我知道这有点老了，但我只是遇到了同样的问题。

当我在调用 ViewDidLoad 时尝试访问它们时，我的 View.designer.cs 文件中的插座属性为空。

原来我在 Visual Studio 中的 xib 文件不再设置为 InterfaceDefinition 的构建操作。

希望这可以帮助其他偶然发现此问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T22:49:29.693

听起来您的 iOS 设置可能存在更普遍的问题——xcode 和 MonoTouch 之间的 XIB 文件同步可能存在一些问题。

在您尝试添加 MvvmCross 绑定之前，请查看 MonoTouch 层 - 如果 MonoTouch 层中的 this.SampleText 为空，那么您需要先解决该问题，然后才能添加 MvvmCross 绑定代码。

MonoTouch 软调试器是帮助调试的绝佳工具——使用模拟器的调试周期非常快——因此这通常有助于解决这些问题。

* * *

从您对这个问题的部分回答来看，听起来您确实试图在基于对话框的 UI 中使用 XIB——这可能行不通——我认为 MonoTouch.Dialog 总是基于一个表——所以它并不期待XIB（至少，这是我的经验！）

* * *

至于“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”，这听起来更像是您的 AppDelegate.cs 中的一个普遍问题。或者，它可能是演示者的问题。您使用的是哪个演示者？

该错误消息本身在 StackOverflow 上有很多点击 - 例如[，应用程序应该在应用程序启动结束时有一个根视图控制器](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati)- 但我不确定其中哪一个适合您的情况。

* * *

> 我必须承认 iOS 和 MVVMCross 对我来说一切都不清楚

对于来自 C# 背景的编码人员，我认为这并不奇怪——我认为从 Windows 上的 VS 到 Mac 上的 MonoDevelop（带有一点 xcode）是一个不平凡的飞跃。从 WP 切换到 iOS 开发比从 WP 切换到 Droid 需要更多时间——这种情况与你是否使用 MvvmCross 无关——如果你在做 MT 开发，你就是在做本机代码，所以你确实需要一些时间稍微了解iOS（根据我的经验/意见！）。

在大多数情况下，我亲自编写了数万行代码，撰写了数百篇博客文章和 stackoverflow 答案，并在 mvvmcross 上进行了十次会议。我已经在五个不同的操作系统上完成了这项工作，其中四个是我在编写代码时学到的，所有这些都是我与平台和工具错误和特性作斗争的。

我将继续尽可能多地发布 - 并继续“免费”运营

我也鼓励每个用户也发布和博客来介绍他们的体验。我希望通过这种方式产生和分享知识。对于正在阅读本文、使用 mvvmcross 并学习有关跨平台编码的任何人（无论好坏），请考虑分享这些知识。为了获得灵感，请查看用户撰写的一些演示文稿和博客文章 - 我尝试在[http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html](http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html)上列出它们。谢谢 ：）

* * *

另外，在提问时，请您指出您正在使用哪个版本的 mvvmcross 以及您的代码基于哪个示例 - master 和 vNext 之间存在差异，并且随着时间的推移已经修复 - 所以发布此信息将帮助我尝试理解和/或复制您看到的错误。

谢谢 ：）

# python - 使用Python按子字符串对字符串列表进行排序

> ID：13779886
> 
> 赞同：3
> 
> 时间：2012-12-08T17:23:12.180
> 
> 标签：python, string, list, sorting, substring

我有一个字符串列表，每个字符串都是格式几乎完全相同的电子邮件。每封电子邮件中都有很多信息，但最重要的信息是设施名称和事件日期。

我希望能够获取该电子邮件列表，并创建一个新列表，其中电子邮件根据“location_substring”分组在一起，然后再次为“incident_date_substring”排序，以便来自一个位置的所有电子邮件按时间顺序在列表中组合在一起。

设施子字符串通常可以在每封电子邮件的主题行中找到。事件日期可以在电子邮件中以“事件日期：”开头的一行中找到。

关于我将如何做这件事的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:27:34.370

编写一个函数，从每封电子邮件中返回您关心的两条信息：

```
def email_sort_key(email):
    """Find two pieces of info in the email, and return them as a tuple."""
    # ...search, search...
    return "location", "incident_date" 
```

然后，将该函数用作排序的键：

```
emails.sort(key=email_sort_key) 
```

排序键函数应用于所有值，并根据键函数返回的值对值重新排序。在这种情况下，key 函数返回一个元组。元组按字典顺序排列：找到第一个不相等的元素，然后在比较不相等的元素时比较元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:27:09.477

您的解决方案可能如下所示：

```
def getLocation (mail): pass
    #magic happens here

def getDate (mail): pass
    #here be dragons

emails = [...] #original list

#Group mails by location
d = {}
for mail in emails:
    loc = getLocation (mail)
    if loc not in d: d [loc] = []
    d [loc].append (mail)

#Sort mails inside each group by date
for k, v in d.items ():
    d [k] = sorted (v, key = getDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:19:03.377

这是你可以做的事情：

```
from collections import defaultdict
from datetime import datetime
import re

mails = ['list', 'of', 'emails']

mails2 = defaultdict(list)

for mail in mails:
    loc = re.search(r'Subject:.*?for\s(.+?)\n', mail).group(1)
    mails2[loc].append(mail)

for m in mails2.values():
    m.sort(key=lambda x:datetime.strptime(re.search(r'Date of Incident:\s(.+?)\n',
                                                    x).group(1), '%m/%d/%Y')) 
```

请注意，对于正则表达式不匹配的情况，这绝对没有错误处理。

# spotify - Spotify Web API 调用引发 502 Bad Gateway 错误

> ID：13779888
> 
> 赞同：3
> 
> 时间：2012-12-08T17:23:13.860
> 
> 标签：spotify, gateway

我正在使用 Spotify Web API 构建一个 Web 应用程序。这些电话非常直接，我不明白是我做错了什么，还是 Spotify 服务有问题。

我实现了查找调用（工作正常），然后在单击其中一个结果旁边的按钮时将轨道 ID 添加到我的数据库中。然后我进行 ajax 调用以在“播放按钮”iframe 中显示该曲目。我现在没有显示我的播放列表，而是经常收到 502 Bad Gateway 错误。（此错误也出现在应该显示示例的 Spotify 网站上。）

这是我造成的吗？我的浏览器/系统原因？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:52:56.637

> （此错误也出现在应该显示示例的 Spotify 网站上。）

这表明问题出在 Spotify 一方，假设您为播放按钮提供了一个有效的 Spotify URI。坚持一会儿，它应该会自行解决。

# java - 如何在循环中增加数组的大小

> ID：13779892
> 
> 赞同：0
> 
> 时间：2012-12-08T17:23:32.810
> 
> 标签：java, arrays, loops, increment

我有这个冒泡排序代码，我正在执行运行时分析以记录对数组进行排序所需的时间。我想知道是否有任何方法可以使用循环增加数组的大小？因为目前我手动将其增加 100，并且我需要达到 5000 的数组大小。

```
public class BubbleSortworking{
public static void main (String[] args) {
    Random rand = new Random();
    int myArray[] = new int[100];  //How to increment this using a loop
    int count, count2;
    count2 = 2;   //amount of times to run the loop

    //repeats the bubble sort, while also producing new arrays each time
    for (count = 0; count < count2; count++){
        for (int i = 0; i < myArray.length; i++){

            myArray[i] = rand.nextInt(100) + 1;  //produce numbers between 1 - ?
            //System.out.print(myArray[i] + ", ");   //displays unsorted array
        }

        bubble(myArray);

        // uncomment below 2 lines to prove each new sorted array cycle is unique 
        //for (int i = 0; i < myArray.length; i++)
        //  System.out.print(myArray[i] + ", ");
    }
}

public static void bubble(int myArray[]){
    int temp;
    long start = System.nanoTime();
    //System.out.println("start " + start);

    //for (count = 0; count < count2; count++){
    for (int i=0; i < myArray.length - 1; i++) {
        for(int j=myArray.length - 1; j > i; j--) {
            if (myArray[j] < myArray[j-1]){
                temp = myArray[j];
                myArray[j] = myArray[j-1];
                myArray[j-1] = temp;
            }
        }
    }

    long end = System.nanoTime();
    System.out.println(end - start);
    //System.out.println("elapsed time " + (end - start));

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:34:09.737

不，一旦创建，您就无法更改数组的大小。您要么必须分配比您认为需要的更大的空间，要么接受必须重新分配它的开销以增加大小。当它发生时，您必须分配一个新数据并将数据从旧数据复制到新数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:04:11.657

您要么需要使用 ArrayList，它会为您执行此操作，但会产生额外的开销。

或者，您可以在开始之前将数组分配为大小 5000，并记录您迄今为止在变量中使用了多少个元素（而不是依赖于 array.length）

或者，您可以通过创建一个更大的新数组并将所有元素复制到其中（System.arrayCopy(..)）以及放入新数组来调整数组的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:31:52.283

这可能会帮助你

```
int[] intA = new int[100];
int sizeToIncrement = 100;
for(int i=0;i<5000;i++) {
   if(i== intA.length ) {
      intA = Arrays.copyOf(intA, intA.length + sizeToIncrement);
   }
   intA[i] = i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T18:06:41.620

rizon 的答案是正确的，您无法更改数组的大小。顺便说一句，你在哪里重新创建数组，我也看不到你在哪里处理 5000 个元素。如果您担心处理时间，则不希望重新创建/调整数组大小，因为那样效率非常低。你会想要一个不同的解决方案。

# android - SupportMapFragment 未在 android 中显示地图

> ID：13779895
> 
> 赞同：3
> 
> 时间：2012-12-08T17:23:45.937
> 
> 标签：android, map, supportmapfragment

我正在尝试对 android 2.3 的新 MapFragment 支持

我的程序运行良好..没有错误。

但是我看不到地图。我只能看到 + 和 - 符号，但看不到地图图块。

[这是快照](http://imgur.com/Qk1gL)

以下是我的代码

**主要活动**

```
package com.plotter;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

public FragmentManager fManager ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity_layout);

    fManager = getSupportFragmentManager();

    loadMapFragment();
}

private void loadMapFragment() {
    PlotterFragment plotterFragment = new PlotterFragment();
    FragmentTransaction ft = fManager.beginTransaction();
    ft.replace(R.id.fragmentsFrameLayout, plotterFragment);
    ft.addToBackStack(null);
    ft.commit();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main_activity_layout, menu);
    return true;
}

} 
```

**片段类**

```
package com.plotter;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.SupportMapFragment;

public class PlotterFragment extends SupportMapFragment {

private LayoutInflater layoutInflater;
private View view;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle) {
    super.onCreateView(inflater, container, bundle);

    View v = inflater.inflate(R.layout.plotter_fragment_layout, container,
            false);
    layoutInflater = inflater;
    view = v;

    return v;

}

} 
```

**片段类布局**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.plotter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" />

<permission
      android:name="com.plotter.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
<uses-permission android:name="com.plotter.permission.MAPS_RECEIVE"/>

<uses-permission android:name = "android.permission.INTERNET"/>
<uses-permission android:name = "android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name = "android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name = "android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.plotter.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyDr9JzCACZq0TonQ1ONreDtRwe_5Cu-z6A"/>
</application>

</manifest> 
```

**主要活动布局**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".MainActivity" >

<FrameLayout android:id = "@+id/fragmentsFrameLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true">

</FrameLayout>

</RelativeLayout> 
```

# python - Django 自定义表单渲染

> ID：13779897
> 
> 赞同：0
> 
> 时间：2012-12-08T17:23:51.507
> 
> 标签：python, django, forms

当我将 { form } 放在某个模板中时，它会呈现：

```
 <tr><th></th><td><input type="text" name="login" maxlength="10" /></td></tr>
<tr><th></th><td><input type="text" name="email" /></td></tr>
<tr><th></th><td><input type="text" name="password" maxlength="10" /></td></tr> 
```

但是如果我不需要 tr,th,td,p 标签怎么办？这就是我要的。

```
<input type="text" name="login" placeholder="Имя пользователя"/>
<input type="email" name="email" placeholder="E-mail"/>
<input type="password" name="password" placeholder="Пароль"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:25:56.547

您当前看到的是 form.as_table 的输出，它为您提供呈现为 tr 元素的表单，您可以插入一组标签。您需要查看django 文档中的[自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)，以使它们完全按照您的要求执行。该链接通过示例引导您完成。

要获取输入小部件，请遍历表单并仅插入字段本身：

```
 <form action="" method="get">
     {% for field in form %}
        {{ field }}
     {% endfor %}
 </form> 
```

# iphone - NSDictionary 展平层次结构

> ID：13779899
> 
> 赞同：0
> 
> 时间：2012-12-08T17:24:01.217
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个像这样的 NSDictionary 对象：

```
dictionary: {
    data =     {
        "access_token" = "xxx";
        "expires_in" = 00;
        "refresh_token" = "yyy";
        "token_type" = bearer;
    };
} 
```

如何展平它以便删除“数据”对象？有没有快速的方法来做到这一点？所以输出应该是这样的：

```
dictionary: {

        "access_token" = "xxx";
        "expires_in" = 00;
        "refresh_token" = "yyy";
        "token_type" = bearer;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:28:31.037

```
NSDictionary *dataDict = [mainDict  objectForKey:@"data"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:45:05.707

您的示例中的平面字典：

```
//grab data
NSDictionary *data = [yourDict objectForKey:@"data"];
assert(data != nil);
NSDictionary *flatDict = data; //OR data.copy // OR [NSDictionary dictionaryWithDictionary:data]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:09:52.667

它看起来不像“数据”是一个 NSDictionary。尝试

```
id what = [dict objectForKey : @"data"];
NSLog(@"%@", [what class]); 
```

它说什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T11:15:07.023

使用递归函数，这种方法的唯一问题是如果嵌套字典中的键碰巧相同，它将替换旧数据

```
- (NSDictionary *)flattedDictionary{
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
  for (NSString *key in self.allKeys) {
    id object = [self objectForKey:key];
    if (![object isKindOfClass:[NSDictionary class]] && !isNull(object)) {
        [dict setObject:object
                 forKey:key];
    } else if ([object isKindOfClass:[NSDictionary class]]){
        [dict addEntriesFromDictionary:[object flattedDictionary]];
    }
}
  return [NSDictionary dictionaryWithDictionary:dict];
} 
```

# java - Facelet 模板呈现两个 HTML 标签

> ID：13779902
> 
> 赞同：2
> 
> 时间：2012-12-08T17:24:23.317
> 
> 标签：java, jsf, facelets

我正在创建我的第一个 facelets/JSF 应用程序。在我的第一页中，我添加了一个 facelet 模板：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"> 
<f:view>
  <h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
  </h:head>
  <body>
    <ui:insert name='top'>
      <ui:include src="/templates/template_a.xhtml"></ui:include>
</ui:insert>
  </body>
</f:view>
</html> 
```

这是我的模板页面：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
  </h:head>
  <body>
    <ui:composition template="/inwert_a.xhtml">
      <ui:define name="top">
      <h2>naglowek</h2>
    </ui:define>
  </ui:composition>
</body> 
</html> 
```

但是当我在我的网络浏览器中查看页面源时，我看到了这个：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
  </head>
  <body>
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>Insert title here</title>
      </head>
      <body>
        <h2>naglowek</h2>
      </body>
    </html>
  </body>
</html> 
```

为什么 JSF 在我使用时会两次创建正文和其他 HTML 标记`<ui:composition>`？

* * *

更新后我的代码看起来主页面：

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"> 

 <h:head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
  <title>Insert title here</title> 
 </h:head> 
 <h:body>   
    <f:subview id="a">
        <ui:insert name="top">
           <ui:include src="aaa.xhtml" ></ui:include> 
        </ui:insert>
     </f:subview>
 </h:body> 
 </html> 
```

模板内容：

```
<ui:composition 
 xmlns:ui="http://java.sun.com/jsf/facelets" 
 xmlns:h="http://java.sun.com/jsf/html"
 template="/mainpage.xhtml"
> 
  <ui:define name="top">
       <h2> aaaaaaaaa </h2>
  </ui:define>  

 </ui:composition> 
```

这是源视图：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  
 /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

 <head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
<title>Insert title here</title></head>
 <body>

 <?xml version="1.0" encoding="ISO-8859-1" ?>     
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org
 /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
<title>Insert title here</title>

</head>
 <body>
    <h2>aaaaaaaaa</h2>
 </body> 
</html>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T11:43:32.777

你基本上使用了错误的方式模板。您基本上是在“以相反的方式”使用它们，而不是应该如何完成。您称为“我的模板页面”的页面应在浏览器中通过其 URL 打开，而不是您称为“facelet 模板”的页面。以后最好防止这种错误的方法是将您指定的页面存储在`<ui:composition template>`（和`<ui:include src>`）`/WEB-INF`文件夹内，这样它们就永远不会被意外（或被黑客）直接打开。

这是一个适合您的案例的启动示例：

`/WEB-INF/templates/template.xhtml`：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title><ui:insert name="title">Default title</ui:insert></title>
    </h:head>
    <h:body>
        <ui:insert name="top">
            <ui:include src="/WEB-INF/templates/top.xhtml">
        </ui:insert>
    </h:body>
</html> 
```

`/WEB-INF/templates/top.xhtml`：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <p>Some default content for top</p>
</ui:composition> 
```

`/page.xhtml`

```
<ui:composition template="/WEB-INF/templates/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="title">
        New page title here
    </ui:define>

    <ui:define name="top">
        <h2>naglowek</h2>
    </ui:define>
</ui:composition> 
```

现在，您应该在浏览器中导航到`/page.xhtml`（而不是模板文件）。

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)
*   [我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not)

# codeigniter - CodeIgniter 和 jQuery Mobile 1.2

> ID：13779903
> 
> 赞同：1
> 
> 时间：2012-12-08T17:24:24.697
> 
> 标签：codeigniter, jquery-mobile

我有一个要转换的 CodeIgniter Web 应用程序（更新：我正在尝试覆盖 JQM UI）[到 jQuery Mobile 应用程序]。我在设置链接到我的 CodeIgniter 控制器的选项卡时遇到问题。

这是我的“header.php”视图中的代码 - 在`<div data-role="page"></div>`. 这是由一个主控制器调用的，它工作正常。现在，问题是：我正在尝试设置我的 jQuery Mobile 导航栏选项卡来调用一个名为收件箱的新控制器。

```
<div data-role="footer" data-position="fixed">
  <div data-role="navbar">
    <ul>
      <li>
          <a href='<?php echo base_url()."inbox"?>' data-ajax="false">Inbox</a>
      </li>
    </ul>
  </div>
</div> 
```

如果没有 jQuery Mobile，链接可以正常工作并触发收件箱 CodeIgniter 控制器，但是在我的 header.php 视图中启用 JQM 后，当我单击收件箱选项卡时，我会得到一个“404 Not Found”页面。

更新 - html 头中的这个 jQuery 代码：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="<?php echo base_url(); ?>assets/all-mobile.css" type="text/css" media="screen"/>

<link rel="icon" href="<?php echo base_url(); ?>assets/images/logo.png" />
<link rel="apple-touch-icon-precomposed" href="<?php echo base_url(); ?>assets/images/logo.png" />

<meta name="apple-mobile-web-app-capable" content="yes" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

更新 2：如果我在 t.js 中插入此代码以删除自动 ajax 链接：

```
$(document).bind("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
}); 
```

我的新头 html 代码现在是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="<?php echo base_url(); ?>assets/js/t.js"></script>

<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

**... jQuery Mobile 确实加载了，但“收件箱”链接仍会通过 CI**生成 404 页面。

更新3：我确定这是本地的问题。当我将 CI 代码和新的 jQuery Mobile 脚本上传到我的 Web 服务器时，链接到我的 inbox.php 控制器的选项卡**实际上**可以工作！有谁知道为什么它不能在我使用 MAMP 的本地机器上运行？现在，我似乎无法使用此配置在本地进行开发和测试。有解决办法吗？

查看 jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html 上的 allowCrossDomainPages 我添加了 $.mobile.allowCrossDomainPages = true; 到 jQuery 初始化，但它没有帮助运行 MAMP 的 localhost 服务器提供 inbox.php 控制器 - 仍然是 404。

**更新 4：问题已解决**。原来隐藏文件 .htaccess 中存在问题。要重写 URI，它包含一个“RewriteBase /myapp-mobile/”；当我将它移到 htdocs 下的新文件夹时，这个目录变得不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:29:37.240

[根据文档：](http://jquerymobile.com/demos/1.0a4.1/#docs/api/globalconfig.html)

> **使用 jQuery Mobile 的自动初始化**- 与其他 jQuery 项目（如 jQuery 和 jQuery UI）不同，**jQuery Mobile 在加载时自动应用许多标记增强功能** （远在 document.ready 事件触发之前）。

和...

> **ajaxEnabled (boolean, default: true):** jQuery Mobile将尽可能**通过 Ajax 自动处理链接点击和表单提交。**如果为 false，url 哈希监听也将被禁用，并且 url 将作为常规 http 请求加载。

看起来它将所有链接都视为 ajax 请求，除非您`false`在`mobileinit`函数中专门设置了该选项，而您还没有。

使用下面的这个函数来强制 jQuery mobile 将所有链接视为正常`http`请求。

```
$(document).bind('mobileinit', function(){
    $.mobile.ajaxEnabled = false;
    // other options to enable on intialization
}); 
```

# objective-c - “AClass”可能不会响应“FunctionA”（目标 C）

> ID：13779905
> 
> 赞同：-2
> 
> 时间：2012-12-08T17:24:30.993
> 
> 标签：objective-c, inheritance

关于继承，我这里有两个类：女性，人类的子类和人类，它可以运行但显示问题。

这里有两个问题：

> main.m:29:10：“人类”可能不会响应“setSexy：”
> 
> main.m:30:10：“人类”可能不会响应“isSexy”

主文件

```
#import <Foundation/Foundation.h>
#import "female.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        human *sexyGirl = [[female alloc] init];

        [sexyGirl setName:@"SexyGirl"];
        [sexyGirl setGender:0];
        [sexyGirl setSexy:1];
        [sexyGirl isSexy];

    }
    return 0;
} 
```

女性.h

```
#import "human.h"

@interface female : human {
    BOOL sexy;
}

@property BOOL sexy;

-(void)isSexy;

@end 
```

人类.h

```
#import <Foundation/Foundation.h>

@interface human : NSObject {
    NSInteger *hp;
    NSString *name;
    BOOL gender;
}

@property (assign, nonatomic) NSInteger *hp;
@property (assign, nonatomic) NSString *name;
@property (assign, nonatomic) BOOL gender;

-(void) walk;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:40:44.593

当你这样做时：`human *sexyGirl = [[female alloc] init];` 你**把**女性推向人类。女性拥有的所有额外信息（额外方法）仍然存在但**不再可见**

从那时起，您只能使用人类所拥有的东西，或者您**再次降低**变量。 `[(female*)sexyGirl setSexy:1];` `[(female*)sexyGirl isSexy]`

或者永远不要贬低它并一直将其声明为女性*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:29:54.010

没有方法名`isSexy`并且`setSexy`在`human`类中

你应该改变这个 `human *sexyGirl = [[female alloc] init];`

对此 `female *sexyGirl = [[female alloc] init];`

# php - 从嵌入代码中获取 Viddler 视频的唯一 ID (regex/parse_url)

> ID：13779915
> 
> 赞同：0
> 
> 时间：2012-12-08T17:25:20.570
> 
> 标签：php, pattern-matching

不工作。我想我已经看得太久了，我对这个问题视而不见：

```
<?php
$str = $_POST['data'];
$pattern = '#(www\.|https?:\/\/){?}[a-zA-Z0-9]{2,254}\.[a-zA-Z0-9]{2,4}(\S*)#i';
   if (preg_match_all($pattern, $str, $matches, PREG_PATTERN_ORDER)) {
    $uri = "($matches[1])";
   }
$path = parse_url($uri, PHP_URL_PATH);
$output = substr(strrchr($path, '/'), 1);
?> 
```

示例嵌入代码 - 我需要 URL 的 a695c468 部分 - 它的长度可能会改变：

`<iframe id="viddler-a695c468" src="//www.viddler.com/embed/a695c468/?f=1&offset=0&autoplay=0&secret=91361932&disablebranding=0&view_secret=91361932" width="545" height="349" frameborder="0" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:29:23.423

为什么要从 URL 解析它？iframe id 会更快。 `preg_match_all('/"viddler-(\w+)"/', $str, $matches, PREG_PATTERN_ORDER);`

更新：试试这个 `preg_match_all('/www\.viddler\.com\/embed\/(\w+)\//', $str, $matches, PREG_PATTERN_ORDER);`

# android - Basics ---> Checking strings using if else to set value of an int, possible wrong use of onResume

> ID：13779916
> 
> 赞同：0
> 
> 时间：2012-12-08T17:25:29.073
> 
> 标签：android, string, if-statement, int

So I'm still working on my first little app here, new to Android and Java, so I'm stuck on a basic little problem here. Answers to my first questions were really helpful, so after researching and not coming up with anything, I thought I'd ask for some more help!

The idea is that on another screen the user makes a choice A, B, C, or D, and that choices is passed as a string through the intent. OnResume checks if the choice is not null and sets an integer that corresponds to that string. Later when the user pushes another button, some if else logic checks that int and performs and action based on which was chosen. The problem is that the App crashed at onResume.

I learned that I have to use equals(string) to compare string reference, but maybe the problem is that I am trying to compare a string in reference to a literal string? Any help would be greatly appreciated. Thanks!

```
 protected void onResume() {
    super.onResume();

    // Get the message from the intent
    Intent intent = getIntent();
    String choice = intent
            .getStringExtra(ExtensionSetupSlector.TORQUE_SETUP);

    // Create the text view
    TextView displayChoice = (TextView) findViewById(R.id.displayChoice);
    if (!choice.equals("")){
    displayChoice.setText(choice);

    if (choice.equals("A")) {
        myChoice = 1;
    }
    if (choice.equals("B")) {
        myChoice = 2;
    }
    if (choice.equals("C")) {
        myChoice = 3;
    }
    if (choice.equals("D")) {
        myChoice = 4;
    }

}
} 
```

myChoice is declare right after ...extends Activity{ Also I'm not quite sure If this should really be in onResume, but it was working before I started try to set myChoice in the onResume (when I was just displaying the choice). Thanks again!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:57:40.223

Change `if (!choice.equals(""))` to check for **null** instead. Otherwise your app attempts to access an empty reference and crashes.

# android - 掌握 doInBackground(String... params)

> ID：13779918
> 
> 赞同：0
> 
> 时间：2012-12-08T17:25:33.300
> 
> 标签：android, handler, background-thread

在某种程度上，我确实了解处理程序，但我不确定如何处理参数以及如何让代码等到后台完成工作。我希望 UI 能够正常工作，并且我想在后台进行汇率计算。

我有以下内容：

我打电话`new getOnlineExchangeRate().execute(""); //Get Exchange Rate in BG`

之后我想要一个结果=amount*exchangerate，但代码不等待结果。有人能告诉我计算是如何等到我们有汇率的吗？我是否必须发送一些参数，看起来如何？

```
.
.
.
.
.
public double getYahooExchangeRate(String ER){

        double exchangerate=0;

    try {

        s = getJson("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(%22"+ER+"%22)&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=");                       
        //s = getJson("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(%22"+val[from]+val[to]+"%22)&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=");                      

        JSONObject jObj;
        jObj = new JSONObject(s);
        String exResult = jObj.getJSONObject("query").getJSONObject("results").getJSONObject("rate").getString("Rate");

        exchangerate=Double.parseDouble(exResult);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        }
        catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        }                                   
    return exchangerate;

}       

public String getJson(String url)throws ClientProtocolException, IOException {

StringBuilder build = new StringBuilder();
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);
HttpResponse response = client.execute(httpGet);
HttpEntity entity = response.getEntity();
InputStream content = entity.getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(content));
String con;
while ((con = reader.readLine()) != null) {
    build.append(con);
}
return build.toString();
}

public class getOnlineExchangeRate extends AsyncTask<String, Void, String> {

      @Override

      protected void onPostExecute(String result) {

        // execution of result of Long time consuming operation
          ALS.Toast(myContext.getString(R.string.exchangeratesupdated), true);

      }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
         // perform long running operation operation

         getYahooExchangeRate(USDEUR);
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:50:49.020

我认为您的问题出在这一行：

```
@Override
protected String doInBackground(String... params) {
    getYahooExchangeRate(USDEUR);
    return null; 
```

你想返回 getYahooExchangeRate 的结果而不是 null :) 所以改变这个，返回值应该是双精度的。所以把它改成：

```
@Override
protected Double doInBackground(String... params){
    return getYahooExchangeRate(USDEUR);
} 
```

您还必须更改类标题：

```
public class getOnlineExchangeRate extends AsyncTask<String, Void, Double> {

AsyncTask<Params, Progress, Result> 
```

通用部分告诉 AsyncTask 处理了哪些信息类型。第一个是params的`doInBackground(Params... )` 类型第二个是progress-Information的类型最后一个解释了返回的类型`doInBackground()`，所以它改变了method-header

```
protected Result doInBackground(Params... params){ }; 
```

to protected double doInBackground(Params... params){};

为了带回结果，我将使用 Observer oder Callback-Pattern。

编辑：将双精度更改为双精度，因为原语不能用于泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:57:34.480

> 代码不等待结果。有人能告诉我计算是如何等到我们有汇率的吗？我是否必须发送一些参数，看起来如何？

您*可以*使用[`AsyncTask#get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)强制代码等待，但这会阻塞主线程，直到 AsyncTask 完成，这违背了使用异步任务的目的。

最好将您的 Activity 设计为在没有汇率的情况下继续进行，就像我的邮件应用程序加载允许我在获取新邮件时撰写邮件和阅读旧邮件一样。当异步数据加载时，您可以使用新信息更新您的 UI。（我相信这就是你想要做的。）

* * *

要添加到 user1885518 代码，您应该使用 AsyncTask 作为 Activity 中的子类，如下所示：

```
public class MainActivity extends Activity {
    private class getOnlineExchangeRate extends AsyncTask<Void, Void, Double> {
        @Override
        protected Double doInBackground(Void... params) {
            return getYahooExchangeRate(params[0]);
        }

        @Override
        protected void onPostExecute(Double rate) {
            // Do something with rate
        }       
    }

    ...
} 
```

一旦您知道您想要哪种汇率，请致电：

```
new getOnlineExchangeRate().execute(USDEUR); //Get Exchange Rate in BG 
```

现在，当您从网上获得费率时，代码会`onPostExecute()`以您想要的费率调用。在里面，`onPostExceute()`你可以在你的活动中调用任何你想要的方法来计算`result=amount*exchangerate`和显示`result`任何合适的地方。

# jquery - 全局变量 - jquery

> ID：13779919
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:25:42.613
> 
> 标签：jquery, callback, global-variables

每个人。我有以下示例脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    var url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
    $.getJSON(url + "?callback=?", null, function(tweets) {
        for(i in tweets) {
            tweet = tweets[i];
            $("#tweet-list").append(tweet.text + "<hr />");
        }
    });
});
</script> 
```

现在我想在单击时刷新从 url 获取的数据。我添加了一个全局变量“内容”并尝试：

```
<script type="text/javascript">
$(document).ready(function() {
$("body").click(function(){ 
    var content="";
    var url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
    $.getJSON(url + "?callback=?", null, function(tweets) {
        for(i in tweets) {
            tweet = tweets[i];
            content+=tweet.text + "<hr />";
        }
    });
    $("#tweet-list").html(content); 
});
});
</script> 
```

但它什么也没显示，然后我想可能是因为 '$("#tweet-list").html(content);' 在 'content+=tweet.text + " 之前执行

* * *

"'，所以我尝试在（）之后添加一个回调函数：

```
<script type="text/javascript">
$(document).ready(function() {
$("body").click(function(){ 
    var content="";
    var url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
    $.getJSON(url + "?callback=?", null, function(tweets,after) {
        for(i in tweets) {
            tweet = tweets[i];
            content+=tweet.text + "<hr />";
        }
    after(content){$("#tweet-list").html(content);}; 
    });

});
});
</script> 
```

仍然无法正常工作（什么也没显示），有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:29:20.643

Ajax 是异步的，因此您必须等待响应和一些数据返回，然后才能对其进行任何操作。当你尝试使用ajax函数**之后**的内容时，它还没有完成，并且没有内容。当有实际内容要附加并且 ajax 调用完成时，您必须在回调中执行此操作：

```
$(document).ready(function() {
    $("body").click(function(){ 
        var content="",
            url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
        $.getJSON(url + "?callback=?", null, function(tweets,after) {
            for(key in tweets) {
                if (tweets.hasOwnProperty(key)) {
                    content+=tweets[key].text + "<hr />";
                }
            }
            $("#tweet-list").html(content); 
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:31:43.917

AJAX 请求完成后，您需要更改 HTML：

```
$.getJSON(url + "?callback=?", null, function(tweets) {
    var content = "";
    for(i in tweets) {
        var tweet = tweets[i];
        content += tweet.text + "<hr />";  
    }
    $("#tweet-list").html(content);
}); 
```

另外，这里不需要全局变量，所以使用`var`关键字。

# android - 如何检测服务中的抖动

> ID：13779924
> 
> 赞同：0
> 
> 时间：2012-12-08T17:26:04.683
> 
> 标签：android, shake

我有 Preferences Activity，它在偏好更改时启动服务。在服务中，我想检测摇晃动作。我在下面的这段代码，当我在活动中使用它时工作正常，但是当我想在服务中使用它时，它就无法工作，这就是我在服务中使用抖动检测器代码的方式，我的代码有什么问题？

```
public class back extends Service {
SensorManager mSensorManager;
ShakeEventListener mSensorListener;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();

}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    Toast.makeText(back.this, "Service Started", Toast.LENGTH_LONG).show();

     mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mSensorListener = new ShakeEventListener();   

        mSensorListener.setOnShakeListener(new ShakeEventListener.OnShakeListener() {

          public void onShake() {
            Toast.makeText(back.this, "Shake!", Toast.LENGTH_SHORT).show();
          }
        });

}

protected void onResume() {
    mSensorManager.registerListener(mSensorListener,
        mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
        SensorManager.SENSOR_DELAY_UI);
  }

  protected void onPause() {
    mSensorManager.unregisterListener(mSensorListener);

  }

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

} 
```

我得到了“Service Started” Toast，这意味着服务已启动，但在我摇动设备后，我没有看到“Shake！” 吐司。我应该怎么办。谢谢是提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:59:47.787

1.  服务没有 onResume 和 onPause [http://developer.android.com/guide/components/services.html#Lifecycle](http://developer.android.com/guide/components/services.html#Lifecycle)

2.  显示Toast from service也可能有问题，要验证代码使用LOG或者show toast这样

    new Handler().post(new Runnable() { public void run() { Toast.makeText(getApplicationContext(), "msg", Toast.LENGTH_LONG).show(); }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T22:47:54.610

在 Resume 和 onPause 上删除。它不是服务的一部分。将其替换为 OnStartCommand() 请查看代码。

```
 public int onStartCommand(Intent intent, int flags, int startId){

   mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
   mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
   mSensorManager.registerListener(mShakeDetector, mAccelerometer,    SensorManager.SENSOR_DELAY_UI,new Handler());

   return START_STICKY;
   } 
```

这应该够了吧 ：）

# mongodb - 具有共享文件夹的流星的理想虚拟机设置

> ID：13779926
> 
> 赞同：1
> 
> 时间：2012-12-08T17:26:13.253
> 
> 标签：mongodb, meteor, virtualbox

### 情况

你好，我运行没有流星包的arch Linux，并且在virtualbox中运行了一个Ubuntu服务器来进行Web开发。我通过数据库挂载了一个共享文件夹。这意味着我可以在活动环境中编码。但是，像许多其他人一样，我在启动 mongodb 时遇到问题，特别是退出代码 100。

追踪问题：

*   我创建了 /data/DB 目录
*   授予我的用户访问权限
*   自己运行 mongod 没有问题

我仍然有这个问题。

### 问题

与流星一起安装的mongodb的配置文件在哪里，所以我可以移动它，我是否需要为“mongodb”用户创建权限？

### 问题

在上述设置中运行流星开发环境的理想虚拟机是什么？必须首先创建数据目录告诉我 Ubuntu 服务器并不理想。一些额外的文档可以用来回答出现在流星网站上的第二个问题会很漂亮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:15:36.633

MongoDB 在 vi​​rtualbox 共享文件夹上无法正常工作。默认情况下，meteor 在您的项目目录中创建一个 mongo 数据库，但是您可以使用`MONGO_URL`环境变量覆盖此行为。如果您设置此变量，meteor 将不会尝试启动 mongo，而是直接连接到您指定的 mongo 端点。这允许你设置你喜欢的 mongo（例如使用 Ubuntu mongodb 包），数据不在共享文件夹中。

# static-libraries - 我应该在我的静态库中包含 stdafx.h 吗？我的图书馆应该是什么格式？

> ID：13779928
> 
> 赞同：1
> 
> 时间：2012-12-08T17:26:32.837
> 
> 标签：static-libraries, precompiled-headers, stdafx.h

我正在创建一个静态库。我已经浏览了 win32 应用程序，静态库，没有预编译头文件。该文件是 .cpp 我假设我可以将其导出到实际的 .lib 文件，还是从一开始就假设为 .lib？

此外，我不断收到无法打开的源文件 stdafx.h，该文件已包含在我的主静态库 .cpp 文件中。告诉我，我应该这样做吗？

谢谢

# post - 向 YUI POST CONNECTION 添加更多输入

> ID：13779930
> 
> 赞同：0
> 
> 时间：2012-12-08T17:26:39.650
> 
> 标签：post, connection, yui

有人能帮助我吗。如何向 YUI POST CONNECTION 添加 1 个输入以下是教程：http: [//developer.yahoo.com/yui/examples/connection/post.html](http://developer.yahoo.com/yui/examples/connection/post.html) 默认示例表单是：`<form><input type="button" value="Send a POST Request" onClick="makeRequest();"></form>`

我怎样才能再添加一个这样的输入：

```
<form>
<input type="text" name="username">
<input type="button" value="Send a POST Request" onClick="makeRequest();">
</form> 
```

我也想发送用户名输入请求。谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:42:11.020

您引用的示例手动构建 POST 请求正文。虽然您当然可以这样做，但您可能会发现使用连接管理器的[setForm](http://developer.yahoo.com/yui/docs/YAHOO.util.Connect.html#method_setForm)方法更容易（[此处为示例](http://developer.yahoo.com/yui/connection/#forms)）。它将包括所有表单字段并为您处理 URL 编码。

# php - 当php及其库不断升级时如何维护旧版本

> ID：13779936
> 
> 赞同：1
> 
> 时间：2012-12-08T17:27:25.150
> 
> 标签：php, xampp

我一直在使用 xampp 包中包含的 sqlite 2。

之后我安装了具有 sqlite3 的最新 xampp 包。

现在，当我运行我的代码时，我得到了错误，发现捆绑包中没有 sqlite 2。

像这样的事情发生在 php 及其所有相关库中，例如 split 函数其他。

如果是本地系统没问题，我们无论如何都会更新它，但是在共享主机中，当他们升级到新的 php 版本时，现有网页会出现错误。

我们如何知道 php 将删除某些函数并用其他新函数替换它，而不是保留相同的名称但具有升级的功能？

当他们升级或更改服务器中当前现有功能的版本时，会发生什么情况是网站中断。您可以在整个页面上看到错误。许多页面无法正常工作。如果不注意，seo 评级会下降。用户不会信任该网站。这也发生在我使用了一段时间的 wordpress 和 mediawiki 上，当他们最近升级 php 时，模块没有加载，而是出现了致命错误。这很讨厌。

在这种情况下，在特定的时间间隔内不断升级你的代码会很忙（每当 php 升级它们的功能时）

据我所知，这是无穷无尽的。

服务器端和本地主机中的解决方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:55:59.987

这确实是个问题。唯一的解决方案是：

1.  在针对它们编写代码之前，请仔细考虑您的依赖关系。
2.  留在球上。

在您决定使用任何一种特定的技术依赖之前，请研究它是否会被弃用或不建议在未来使用。PHP 人很擅长在手册中指出这些内容，因此阅读 php.net 上的相关页面通常就足够了。

PHP 开发人员对他们的弃用过程非常满意，他们的大多数 API 的弃用过程都非常缓慢。

尽管如此，你还是需要保持在球上。关注不常见的官方公告，了解正在发生的变化以及您需要注意的地方。每个主要 PHP 版本的更改日志通常都值得研究。

如果您在系统上运行的代码经常在您不做的情况下更改，那么您还需要注意主机的公告。如果他们没有提前宣布重大变化，请寻找其他主机。

构建您的错误处理程序，以便您通过电子邮件收到有关严重错误的通知。您可能需要包含一个脚本来检查主要依赖项的可用性并在它们丢失时通知您。

如果您有关键代码，则不应在无法为您提供对平台足够控制的共享主机上运行它。运行您自己的服务器并小心升级 PHP。旧版本会在一段时间内收到维护更新是有原因的。

通常你有一个系统管理员来管理部署的代码和服务器，你应该与这个人沟通你对服务器的要求，如果服务器发生一些重大变化，那个人应该与你交谈。如果你就是那个人，就像现在许多 sys-dev-ops 一样，你需要把这作为你工作的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:47:38.490

好问题。我说你多虑了。PHP 团队非常关心向下兼容性。我使用 PHP 已有 10 多年了，这段时间网络发生了很大变化，PHP 也是如此。更改正在经历一个非常长的弃用过程，并且在它们实际发生之前很久就宣布了。即便如此，在我记得的情况下，仍然可以使用新版本进行弃用的方式。

这一切都适用于 PHP 本身提供的 PHP 核心和扩展。

在 SQLlite 的情况下，我不记得那里的交易是什么，从未真正使用过它。

在较新的 PHP 5 版本之一中，他们在日志级别中引入了不推荐使用的位。如果您将日志级别切换到， `E_ALL`或者`-1`如果您使用任何已弃用的功能，您将获得一行记录，因此您可以及早做出反应。

[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

此外，还发布了折旧列表和向后不兼容的更改，例如

[http://php.net/manual/en/migration54.incompatible.php](http://php.net/manual/en/migration54.incompatible.php)

很多年前，这里宣布的所有更改都被视为不好的做法，因此现在没有人应该更改代码。

我希望这不再杀死你:)祝你好运

# sql - 计算不同行的数量

> ID：13779937
> 
> 赞同：1
> 
> 时间：2012-12-08T17:27:27.583
> 
> 标签：sql, sql-server-2008

我有一个如下所示的 SQL 查询：

```
SELECT DISTINCT UserId, PoliticianId
FROM Votes
WHERE UserId= 1010 
```

结果如下所示：

```
UserId | PoliticianId
1010     3
1010     10
1010     35 
```

有没有办法获取此查询返回的行数？
我试过 COUNT(*) 但它没有用，可能是因为我做错了查询。
我知道我可以检索所有行并在服务器上对它们进行计数，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:31:54.883

所有这些行都相同`UserId`但不同`PoliticianId`，因此您可以使用`COUNT(DISTINCT column)`：

```
SELECT COUNT(DISTINCT PoliticianId) AS result
FROM Votes
WHERE UserId = 1010 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:28:36.943

您可以使用`count(*) over ()`来显示返回的行数。这似乎是在应用之前应用`distinct`的，因此您必须移动`distinct`到子查询才能`count(*) over ()`在`distinct`应用之后。

```
SELECT  UserId
,       PoliticianId
,       count(*) over ()
FROM    (
        select  distinct UserId
        ,       PoliticianId
        from    Votes
        where   UserId= 1010
        ) as SubQueryAlias 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:39:39.197

我想这会对你有所帮助。

```
 select count(UserId) from (select UserId from Votes where UserId = 1010 group by UserId
, PoliticianId) result; 
```

# c++ - 有条件地从两个类中的任何一个继承

> ID：13779938
> 
> 赞同：1
> 
> 时间：2012-12-08T17:27:35.990
> 
> 标签：c++, inheritance, c++03

> **可能重复：**
> [在编译时动态生成结构](https://stackoverflow.com/questions/11376149/generating-structures-dynamically-at-compile-time)

我现在面临一种情况，我希望派生类继承自任一条件`Base1`或`Base2`取决于条件（在 C++03 中）。这意味着，我想实现类似的东西：

```
// pseudo-C++ code
class Derived : public
    if(condition) Base1    // inherit from Base1, if condition is true
    else Base2             // else inherit from Base2
{ /* */ }; 
```

这可能不是一个好的设计，但现实世界并不完美。

我在这里搜索了答案，但我不想使用预处理器指令[Problems with ifdef based inheritance in C++](https://stackoverflow.com/questions/7646820/problems-with-ifdef-based-inheritance-in-c)。

我还能如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:27:35.990

我想出了使用模板和部分专业化的解决方案。下面的代码可以解决问题：

```
// provide both the required types as template parameters
template<bool condition, typename FirstType, typename SecondType>
class License {};

// then do a partial specialization to choose either of two types 
template<typename FirstType, typename SecondType>
class License<true, FirstType, SecondType> {
public:    typedef FirstType TYPE;     // chosen when condition is true
};

template<typename FirstType, typename SecondType>
class License<false, FirstType, SecondType> {
public:    typedef SecondType TYPE;    // chosen when condition is false
};

class Standard {
public:    string getLicense() { return "Standard"; }
};

class Premium {
public:    string getLicense() { return "Premium"; }
};

const bool standard = true;
const bool premium = false;

// now choose the required base type in the first template parameter
class User1 : public License<standard, Standard, Premium>::TYPE {};
class User2 : public License<premium, Standard, Premium>::TYPE {};

int main() {
    User1 u1;
    cout << u1.getLicense() << endl;   // calls Standard::getLicense();
    User2 u2;
    cout << u2.getLicense() << endl;   // calls Premium::getLicense();
} 
```

语法看起来不干净，但结果比使用预处理器指令更干净。

# android - 通过更改 Spinner 上的 selectedItem 更改 TextView 值

> ID：13779952
> 
> 赞同：1
> 
> 时间：2012-12-08T17:29:23.377
> 
> 标签：android, spinner, textview

我完全不知所措，试图根据相邻 Spinner 中选择的内容更改 TextView 的值。

```
public class SpinnerSelectItemListener implements OnItemSelectedListener {
private Context context;

public SpinnerSelectItemListener(Context c){
    this.context = c;
}

public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    View view = null;
    TextView textView = null;

    LayoutInflater inflater = LayoutInflater.from(context);
    parent.getItemAtPosition(position);
    view = new View(context);
    view = inflater.inflate(R.layout.common_app_header, null);

    textView = (TextView)view.findViewById(R.id.customer_name_value);
    textView.setText("John");
}
public void onNothingSelected(AdapterView<?> parent) {
    // TODO Auto-generated method stub

}
} 
```

当我运行这是调试模式时，一切都按预期发生，但是当一切都完成后，即使调试器显示新值，模拟器上的 textView 的值也不会改变。肯定有一些非常愚蠢的东西我错过了。请帮忙。

编辑：情况就像我从微调器中选择了员工的 ID 号，并且根据选择，显示员工姓名的 TextView 会发生变化。我要修改的 TextView 在微调器之外。

EDIT2：当我内联定义侦听器时，这运行良好，即我写了类似的东西

```
modelspinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
            TextView textView = null;

            textView = (TextView)findViewById(R.id.customer_segment_value);
            textView.setText("Commercial");

            textView = (TextView)findViewById(R.id.TIV_value);
            textView.setText(R.string.app1_name);
        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

有人可以解释我之前编写的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:51:09.290

见这里 [http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

修改此方法：

```
 public void onItemSelected(AdapterView<?> parent, View view, 
                int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
    } 
```

至

```
public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        String value = (String) parent.getItemAtPosition(pos)
        textView = (TextView)view.findViewById(R.id.customer_name_value);
        textView.setText(value );
} 
```

但我建议你搬家

```
textView = (TextView)view.findViewById(R.id.customer_name_value); 
```

到 Activity 的 onCreate 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:54:00.310

我有一个类似的问题。在进入 onItemSelected 之前，我通过获取 textview 来修复它。就我而言，微调器是对话框的一部分。在 onCreateDialog 内部，我获取了 textview。

```
protected Dialog onCreateDialog(int id) {

    final AlertDialog.Builder builder = new AlertDialog.Builder(context);

    switch (id) {

    case DIALOG_ADD:

        builder.setTitle("Create New Action");
        final View textEntryView = getLayoutInflater().inflate(
                R.layout.addactionrow, null);

        builder.setView(textEntryView);         

        workingAmount = (TextView) textEntryView
                .findViewById(R.id.WorkingActionamount); 
```

然后在 OnItemSelected 中，我只使用了 textview 并且事情开始按预期工作。spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() { public void onItemSelected(AdapterView parent, View view, int pos, long id) {

```
 spinnerSelectedAssetID = id;

            //Get the amount currently held here.....
            long x = pfdata.getActionCurrentTotalForAssetByID(spinnerSelectedAssetID);
            Log.d("X+", "X="+x);

            workingAmount.setText(Long.toString(x));
            workingAmount.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T13:08:44.813

试试这个代码。主要的关键是“bResult.setText(spinner1csr.getString(spinner1csr.getColumnIndex(DatabaseHandler.KEY_ID1)));”

```
public class MainActivity extends AppCompatActivity {
  Spinner s1, s2, s3;
  TextView tex, tex1, bResult;
  Cursor spinner1csr, spinner2csr, spinner3csr, spinner4csr, search;
  SimpleCursorAdapter sca, sca2, sca3, sca4, sca6;
  long spinner1_selected = 0;
  @Override
  protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      s1 = (Spinner) findViewById(R.id.spinner1);
      s2 = (Spinner) findViewById(R.id.spinner2);
      s3 = (Spinner) findViewById(R.id.spinner5);
      final TextView bResult = (TextView)
      findViewById(R.id.barcodeResult);
      dbhndlr = new DatabaseHandler(this);
      // Get Cursors for Spinners
      spinner1csr = dbhndlr.getAllLabelsAsCursor();
      //Setup Adapter for Spinner 1
      sca = new SimpleCursorAdapter(this,
        android.R.layout.simple_list_item_1, spinner1csr,
        new String[] {
          DatabaseHandler.KEY_ID
        },
        new int[] {
          android.R.id.text1
        },
        0
      );
      s1.setAdapter(sca);
      s1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView << ? > parent, View view, int position, long id) {
          //  bResult.setText(s1.getSelectedItem().toString());
          spinner1_selected = id;

        }
        @Override
        public void onNothingSelected(AdapterView << ? > parent) {}
      });
      spinner4csr = dbhndlr.getByRowid(spinner1_selected);
      sca4 = new SimpleCursorAdapter(this,
        android.R.layout.simple_list_item_1,
        spinner4csr,
        new String[] {
          DatabaseHandler.KEY_ID1
        },

        new int[] {
          android.R.id.text1
        },

        0

      );
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T11:13:34.097

试试这个代码：

```
public class MainActivity extends Activity {

String[] text1 = { "SUNDAY", "MONDAY", "TUESDAY",
        "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY" };
int[] val1 = { 0, 1, 2, 3, 4, 5, 6};

Spinner  spinner1;
TextView  textView1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textView1 = (TextView)findViewById(R.id.text1);
    spinner1 = (Spinner)findViewById(R.id.spinner1);
    ArrayAdapter<String> adapter1 =
            new ArrayAdapter<String>(MainActivity.this,
                    android.R.layout.simple_spinner_item, text1);
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(adapter1);
    spinner1.setOnItemSelectedListener(onItemSelectedListener1);
}

OnItemSelectedListener onItemSelectedListener1 =
        new OnItemSelectedListener(){

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                                       int position, long id) {
                String s1 = String.valueOf(val1[position]);
                textView1.setText(s1);
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {}

        };
} 
```

**XML 代码**

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

# java - 如何将 XML 转换为 MessageElement[] Java

> ID：13779957
> 
> 赞同：1
> 
> 时间：2012-12-08T17:29:55.700
> 
> 标签：java, xml, web-services

嗨，我正在与一个接受 MessageElement[] 的 web 服务进行集成，他们提供的示例输入以 XML 格式给出。好吧，我真的很困惑如何将 XML 转换为 MessageElement []。

示例 XML 是：

```
'<DEBITS hasChanges="inserted" xmlns="">' .
'<DEBIT_ID>-1</DEBIT_ID>' .
'<EFFECTIVE_DATE>'.$FeeDate.'</EFFECTIVE_DATE>' .
'<DEBIT_AMOUNT>'. $Fee.'</DEBIT_AMOUNT>' .
'<MEMO><![CDATA['.$DEBIT_TYPE.']]></MEMO>' .
'<ACCOUNT_ID>'.$GCSAccountId .'</ACCOUNT_ID>' .
'<DEBIT_TYPE>'.$DEBIT_TYPE.'</DEBIT_TYPE>' .
'<DAY_OF_MONTH>'.$Feeday.'</DAY_OF_MONTH>' .
'<ACTIVE_FLAG>Y</ACTIVE_FLAG>' .
'<OCCURS_NUM>1</OCCURS_NUM>' .
'<CREATION_DATE></CREATION_DATE>' .
'<MODIFIED_DATE></MODIFIED_DATE>' .
'<MODIFIED_BY></MODIFIED_BY>' .
'<DEBIT_AUTHORIZED></DEBIT_AUTHORIZED>' .
'<DEBIT_AUTHORIZED_BY></DEBIT_AUTHORIZED_BY>' .
'<REMAINING_OCCURRENCES>0</REMAINING_OCCURRENCES></DEBITS>'; 
```

只是为了添加更多上下文，使用轴生成的 Web 服务代理类具有接受 MessageElement[] 的签名

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T13:55:08.767

好吧，在浏览了很多文件之后。我想我想出了如何处理转换。这是转换xml的方法

```
public static MessageElement[] convertXMLStringtoMessageElement(String xmlString) throws SAXException, IOException, ParserConfigurationException{
        MessageElement[] m = new MessageElement[1];
        Document XMLDoc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader(xmlString)));
        Element element = XMLDoc.getDocumentElement();
        m[0] = new MessageElement(element);
        return m;
    } 
```

# c# - ArgumentOutOfRangeException 未处理 C# 堆栈

> ID：13779962
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:30:32.237
> 
> 标签：c#, string, stack, arguments, substring

我在 String fromIndexString = topStiva.Substring(topStivaLength + 1, topStiva.Length); . 我表明 topStiva.Length 超出或范围。

代码如下：

字符串actiuneRezultata（字符串topStiva，字符串cuvIntr）{

```
 int index = -1;

        String primulCharCuvIntr = cuvIntr.Substring(0, 1);

        if (primulCharCuvIntr.Equals("+") == true)
            primulCharCuvIntr = "\\" + primulCharCuvIntr;

        else
            if (primulCharCuvIntr.Equals("*") == true)
                primulCharCuvIntr = "\\" + primulCharCuvIntr;

        else
            if (primulCharCuvIntr.Equals("*") == true)
                primulCharCuvIntr = "\\" + primulCharCuvIntr;

        else
            if (primulCharCuvIntr.Equals("*") == true)
                primulCharCuvIntr = "\\" + primulCharCuvIntr;

        else
            if (primulCharCuvIntr.Equals("*") == true)
                primulCharCuvIntr = "\\" + primulCharCuvIntr;

        for (int i = 0; i < ta.Length; i++) {

            if (ta[i].CompareTo(primulCharCuvIntr) == 0) {

                index = i;
                break;
            }
        }

        int topStivaLength = topStiva.Length - 1;

        while (topStiva[topStivaLength] >= '0' && topStiva[topStivaLength] <= 9)
            topStivaLength--;

        String fromIndexString = topStiva.Substring(topStivaLength + 1, topStiva.Length);
        int fromIndex = int.Parse(fromIndexString);

        if (index < 0)
            return "Nu face parte din gramatica!";
        else
            return tabela[fromIndex][index];

    } 
```

topStiva 的值是从调用 actiuneRezultata(stivaAPD.Peek().ToString(), another_value) 中获取的

我在 stivaAPD 中看到我在推送一些值后感到很高兴。那么为什么超出范围呢？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:33:22.997

如果 topStivaLength 为 -1，这`(topStiva[topStivaLength]`将导致异常。

如果 topStivaLength 为 0 且 topStiva 为空字符串，这`(topStiva[topStivaLength]`将导致异常。

下次准确指出您在哪一行得到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:34:43.060

The second argument to [`String.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx) is the length of the desired substring. You seem to be calling it as if it were instead the (exclusive) end index of the substring. Try calling the following so that your length is equal to the distance to the end index of the string.

```
topStiva.Substring(topStivaLength+1, topStiva.Length - (topStivaLength+1)); 
```

# c - 无法通过邮槽发送 wchar_t 数组

> ID：13779965
> 
> 赞同：1
> 
> 时间：2012-12-08T17:30:49.253
> 
> 标签：c, winapi, client-server, mailslot

我无法发送大于`420`字节的数据块。例如，如果我尝试发送`421 bytes`，我无法使用`ReadFile`. 如果我检查 maislot 信息`GetMailslotInfo( handleRead, 0, &msgSize, 0, 0 );`then`msgSize`将永远是`-1`.

所以这对我永远不起作用：

```
err = WriteFile( handleWrite, wcharArrayToSend, 421, &numBytesWritten, NULL ); 
```

有谁知道这种行为的原因？这是正常行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T18:00:39.140

根据[MSDN 关于邮槽的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365130(v=vs.85).aspx)：

> 邮槽消息中的数据可以是任何形式，但在计算机之间发送时不能大于 424 字节。
> 
> 要在计算机之间发送大于 424 字节的消息，请改用[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590(v=vs.85).aspx)或[Windows 套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740673(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:52:43.627

我不确定你做错了什么，但邮槽绝对可以处理大于 421 字节的消息。这是一些测试代码（成功运行）：

服务器：

```
#include <windows.h>
#include <stdio.h>

int main() {    
    HANDLE mailslot = CreateMailslot("\\\\.\\mailslot\\myslot", 
        0, 
        MAILSLOT_WAIT_FOREVER, 
        NULL);
    if (mailslot == INVALID_HANDLE_VALUE) {
        fprintf(stderr, "Unable to create mailslot.");
        return 1;
    }

    char buffer[2048];
    OVERLAPPED ovlp = {0};

    ovlp.hEvent = CreateEvent(NULL, false, false, NULL);   
    if (ovlp.hEvent == NULL) {
        fprintf(stderr, "Unable to create Event.");
        return 2;
    }

    DWORD read;

    do { 
        ReadFile(mailslot, buffer, sizeof(buffer), &read, &ovlp);
        buffer[read] = 0;
        WaitForSingleObject(ovlp.hEvent, INFINITE);
        printf("%s\n", buffer);
    } while (strcmp(buffer, "exit"));    
    return 0;
} 
```

客户：

```
#include <windows.h>
#include <stdio.h>

int main() {    
    HANDLE mailslot = CreateFile("\\\\.\\mailslot\\myslot", 
        GENERIC_WRITE, 
        FILE_SHARE_READ | FILE_SHARE_WRITE, 
        NULL, 
        OPEN_ALWAYS, 
        0, 
        NULL);

    if (INVALID_HANDLE_VALUE == mailslot) {
        fprintf(stderr, "Unable to open mailslot.\n");
        return 1;
    }
    char buffer[2048];
    DWORD written;

    for (int i=0; i<1024; i++)
        buffer[i] = 'A' + (i%26);
    buffer[1023] = '\0';
    size_t len = strlen(buffer);

    WriteFile(mailslot, buffer, len, &written, NULL);    
    WriteFile(mailslot, "exit", 4, &written, NULL);
    return 0;
} 
```

结果：

```
E:\C\source>mailslot
ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZAB
CDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCD
EFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEF
GHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGH
IJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJ
KLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKL
MNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMN
OPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOP
QRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQR
STUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRST
UVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUV
WXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWX
YZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHI
exit 
```

# python - 获取 unicode 输入，需要它是一个字符串

> ID：13779972
> 
> 赞同：0
> 
> 时间：2012-12-08T17:31:50.670
> 
> 标签：python, python-2.7

所以我今天终于开始写我的第一个程序，除了一件事，一切都很顺利。

在下面的代码中，我让用户传入目录的路径。我原以为这是一个字符串，但在收到错误后我设法找到了源。问题？，我得到了 unicode，当它用于获取目录中的文件列表时，这似乎会导致错误。

```
print "Hello Welcome to my little Porgram"
print "I need a little information to rename the files"
usd=getuserin("What is the file path to the files that you wish to rename?")
print "Thank you for chosing a directory path"
print "The directory path you chose was:" + " " + usd
mainname=getuserin("What is the name of the TVshow/Anime/Other thing? ")
print "Okay so its called" + " " + mainname
print "Okay I'll start renaming right away"
renamefiles(usd, mainname) 
```

第三行是返回 Unicode 的那一行，基本上它所做的就是通过 raw_input() 获取输入。输入的目录如下：

```
def renamefiles(directory, Mainname) :
    os.chdir(directory)
    files=os.listdir
    for elem in files: 
```

现在我可能只是误解了错误的含义，因为这基本上是我第一次编程任何东西，但我发现了正确的错误。

```
TypeError: 'builtin_function_or_method' object is not iterable 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:45:22.403

I've no idea why you think this has anything to do with Unicode or strings. The error message is quite clear: you're trying to iterate through an actual function object, rather than the result of a function. This is because you haven't actually *called* `os.listdir`: you've just set `files` to the function itself. To call a function, always use parentheses:

```
files = os.listdir() 
```

In future, please also include any traceback you get. That is vital for debugging.

# ajax - 使用 ajax fileupload 和 codeignitert 在服务器上保存 blob

> ID：13779978
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:16.180
> 
> 标签：ajax, codeigniter, file-upload, blob

所以在我的项目中，用户可以录制自己，然后我从我正在使用的记录器插件中获取一个 blob 文件。我试图通过codeigniter中的fileupload ajax调用将该blob上传到服务器，但我不知道如何让它工作。

这是我的javascript代码：（

```
recorder.exportWAV(function(blob) {
     console.log(blob);
        $.ajaxFileUpload({
                url :  "../ajax/saverecording/", 
                secureuri      :false,
                fileElementId  :"geenidee",
                dataType : blob.type,
                data: blob.data,
                success: function(data, status) {
                    if(data.status != 'error')
                        alert("hoera!");
                    alert(data.msg);
                }
            });
        }); 
```

这是我在 ajax.php 控制器中的保存记录功能

```
public function saverecording()
{
    $status = "";
    $msg = "";
    $file_element_name = 'komaan';
    if ($status != "error")
    {
          $config['upload_path'] = '../../upload/audio/recordings/';
          $config['allowed_types'] = 'wav';
          $this->load->library('upload', $config);
          if (!$this->upload->do_upload($file_element_name))
          {
             $status = 'error';
             $msg = $this->upload->display_errors('', '');
             echo 'alert("this is not working!");';
          }
          else
          {
             $data = $this->upload->data();
          }
          @unlink($_FILES[$file_element_name]);
       }
} 
```

$this->upload->do_upload($file_element_name) 返回 false 但为什么我不知道。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:36:16.150

您不能修改文件输入，但可以使用 ajax 上传：

```
recorder.exportWAV(function(blob) {
    $.ajax( "something.php", {
        data: blob,
        processData: false,
        contentType: false,
        method: "POST",
        success: function() {

        }
    });
}); 
```

# json - kendoui json填充数据网格

> ID：13779979
> 
> 赞同：-1
> 
> 时间：2012-12-08T17:32:23.183
> 
> 标签：json, datagrid, kendo-ui

这工作正常，填充网格：

```
 $("#grid").kendoGrid({
    dataSource: {
      data: [
        {'id': 1, 'name': 2, 'author': 3},
        {'id': 1, 'name': 2, 'author': 3},
        {'id': 1, 'name': 2, 'author': 3},
      ] ,
    }, 
```

但是当我从 getJSON 加载列表时：

```
 $.getJSON('/api/notes/', function(data) {
      dataSource = data.rows;
  }); 
```

指向数组`data`没有`dataSource`显示:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:18:17.127

如果收到的数据在 中`data.rows`，你应该这样做：

```
$("#grid").data("kendoGrid").dataSource.data = data.rows; 
```

但是，为什么不使用[`transport.read`](http://docs.kendoui.com/api/framework/datasource#transportread-objectstringfunction)for`grid.dataSource`加载数据而不是使用`getJSON`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:24:18.417

您应该使用数据源的**[数据](http://docs.kendoui.com/api/framework/datasource#data)**方法。

例如

```
$.getJSON('/api/notes/', function(data) {
  dataSource.data(data.rows); 
```

});

# c - 用随机数填充数组

> ID：13779980
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:25.570
> 
> 标签：c, arrays, function, pointers

目前我正在尝试用随机值填充大小为*num的数组。*为此，我需要创建两个函数：

1：编写一个函数 (*createdata)，分配一个包含*num* double 值的动态数组，将这些值初始化为 0.0。

2：编写一个*不同*的函数（gendata），该函数将使用 rand() 函数生成的随机值填充一个双精度值数组。

这是我尝试编写函数的操作方式**（在 main() 之外）**：

```
double *createdata(int num)
  {
         int i = 0;

         double *ptr;

         ptr = (double *)malloc(sizeof(double)*num);     

         if(ptr != NULL)
         {
           for(i = 0; i < num; i++)
           {
                 ptr[i] = 0.0;       
           }
         } 
  }  

double gendata(int num)
  {

         createdata(num); 

         int j = 0;

         for(j = 0; j < num; j++)
           {
                 ptr[j] = rand();       
           }               
  } 
```

但是，我知道上面肯定有问题。

**我想要的是，一旦我在 main 中调用了这两个函数，我将生成一个大小为*num*的数组，其中填充了随机数。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:38:39.420

您必须将分配的指针传递给`gendata`函数，因为它的当前形式`ptr`是未知的。这甚至可以编译吗？

例子：

```
double *createdata(int num)
{
    int i = 0;
    double *ptr;

    ptr = (double *)malloc(sizeof(double)*num);

    if(ptr != NULL)
    {
        for(i = 0; i < num; i++)
        {
            ptr[i] = 0.0;
        }
    }
    return ptr;
} 
```

和：

```
double gendata(int num)
{
    double *ptr = createdata(num);
    int j = 0;

    if(ptr != NULL)
    {
        for(j = 0; j < num; j++)
        {
            ptr[j] = rand();
        }
    }
} 
```

`NULL` **另请注意，**我正在检查从`malloc`.

其他人可能会在这里说的其他提示：

*   [不要投射`malloc`](https://stackoverflow.com/a/605858/260411).
*   `free`完全使用后不要忘记指针。
*   你没有在你的 function 中返回任何东西`gendata`，但你将它声明为`double`. `void`如果您不打算返回任何东西，请改用。

但无论如何，您可能都需要从中返回指针，以便稍后在其他函数中使用它，例如`main`.

**编辑：**所以，这将是这样的，例如：

```
double *gendata(int num)
{
    double *ptr = createdata(num);
    int j = 0;

    if(ptr != NULL)
    {
        for(j = 0; j < num; j++)
        {
            ptr[j] = rand();
        }
    }
    return ptr;
} 
```

在你的`main`：

```
int main(void)
{
    double *data;
    data = gendata(100);
    printf("%g\n", data[5]);

    // When you're done, call free
    free(data);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:36:06.860

您需要返回在 createdata() 函数中分配的数组，否则您不能在 gendata() 或其他任何地方使用它。

我也不确定为什么 gendata() 被声明为返回双精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:41:09.253

好吧，我不太熟悉 malloc 的工作原理，虽然它看起来可以正常工作，所以我无法评估，但我能在这里看到的唯一问题是：

你没有返回`ptr`你的`createdata`函数。因此，当您尝试`ptr`在`gendata`函数中访问时，范围内没有`ptr`数组。那会给你一个错误。此外，`gendata`函数甚至不返回任何内容。

看看这段代码，这应该可以工作：

```
double *createdata(int num)
{
     int i = 0;

     double *ptr;

     ptr = (double *)malloc(sizeof(double)*num);     

     if(ptr != NULL)
     {
       for(i = 0; i < num; i++)
       {
             ptr[i] = 0.0;       
       }
     } 
     return ptr; // return the pointer
  }  

double *gendata(int num) // you forgot the '*' here
{

     double *ptr = createdata(num); 

     int j = 0;

     for(j = 0; j < num; j++)
       {
             ptr[j] = rand();       
       }     
     return ptr; // i added this so you obviously return the pointer 
  } 
```

我相信这会起作用，这是一个使用它的例子：

```
int main()
{
    int c;
    double *data = gendata(8);
    for(c = 0; c < 8; c++)
    {
        printf("%f\n", data[c]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T17:44:01.133

在 createdata() 中，您忘记了在最后实际返回指向新分配数组的指针：

```
return ptr; 
```

此外，您的 gendata() 函数需要在已经存在的数组上工作，而不是生成自己的数组。您应该将其添加为参数。此外，它不需要返回任何东西。所以：

```
void gendata(double ptr[], int num)
{
    int j = 0;
    if (ptr != NULL) {
        for(j = 0; j < num; j++) {
            ptr[j] = rand();
        }
    }
} 
```

但是，您可以简化上述内容并降低嵌套级别：

```
void gendata(double ptr[], int num)
{
    int j = 0;
    if (ptr == NULL)
        return;

    for(j = 0; j < num; j++) {
        ptr[j] = rand();
    }
} 
```

请注意，`double ptr[]`实际上与 的含义相同`double* ptr`，但`[]`语法更清楚地表明，函数需要的是指向双精度数组的指针，而不是指向单个. 的指针`double`。

所以现在为了创建一个数组然后随机化它，你会这样做：

```
double* array = createdata(N); // Create an array of N doubles.
gendata(array, N); // Randomize it. 
```

# opencv - 用于训练机器学习算法的矩阵中未处理的异常

> ID：13779981
> 
> 赞同：3
> 
> 时间：2012-12-08T17:32:27.460
> 
> 标签：opencv, machine-learning, computer-vision, cluster-computing, sift

我正在尝试使用 opencv 实现词袋方法。制作字典后，我使用`NormalBayesClassifier`来训练和预测系统。

我已经`trainme`根据文档准备了矩阵，就像每行中的每个样本一样。但问题是它在这一行给出了一个未处理的异常：`classifier.train(trainme, labels);`

我正在使用的完整代码如下：

```
int _tmain(int argc, _TCHAR* argv[])
{
initModule_nonfree();

Ptr<FeatureDetector> features = FeatureDetector::create("SIFT");
Ptr<DescriptorExtractor> descriptor = DescriptorExtractor::create("SIFT");
Ptr<DescriptorMatcher> matcher = DescriptorMatcher::create("FlannBased");

//defining terms for bowkmeans trainer
TermCriteria tc(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS, 10, 0.001);
int dictionarySize = 100;
int retries = 1;
int flags = KMEANS_PP_CENTERS;
BOWKMeansTrainer bowTrainer(dictionarySize, tc, retries, flags);

BOWImgDescriptorExtractor bowDE(descriptor, matcher);

//**creating dictionary**//

Mat features1, features2;
Mat img = imread("c:\\1.jpg", 0);
Mat img2 = imread("c:\\2.jpg", 0);
vector<KeyPoint> keypoints, keypoints2;
features->detect(img, keypoints);
features->detect(img2,keypoints2);
descriptor->compute(img, keypoints, features1);
descriptor->compute(img2, keypoints2, features2);
bowTrainer.add(features1);
bowTrainer.add(features2);

Mat dictionary = bowTrainer.cluster();
bowDE.setVocabulary(dictionary);

//**dictionary made**//

//**now training the classifier**//

Mat trainme(0, dictionarySize, CV_32FC1); 
Mat labels(0, 1, CV_32FC1); //1d matrix with 32fc1 is requirement of normalbayesclassifier class

Mat bowDescriptor, bowDescriptor2;
bowDE.compute(img, keypoints, bowDescriptor);
trainme.push_back(bowDescriptor);
float label = 1.0;
labels.push_back(label);
bowDE.compute(img2, keypoints2, bowDescriptor2);
trainme.push_back(bowDescriptor2);
labels.push_back(label);

NormalBayesClassifier classifier;
classifier.train(trainme, labels);

//**classifier trained**//

//**now trying to predict using the same trained classifier, it should return 1.0**//

Mat tryme(0, dictionarySize, CV_32FC1);
Mat tryDescriptor;
Mat img3 = imread("2.jpg", 0);
vector<KeyPoint> keypoints3;
features->detect(img3, keypoints3);
bowDE.compute(img3, keypoints3, tryDescriptor);
tryme.push_back(tryDescriptor);

cout<<classifier.predict(tryme);
waitKey(0);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:36:30.163

我设法弄明白了，问题出在这里：`float label = 1.0;`因为所有正在训练的图像不能有相同的标签。系统必须能够区分给定的图像，因此最好将图像按组排列并为组赋予浮点值。

# php - 每个封闭的 div 之后都会出现编码行。（仅在 DOM 检查器中）

> ID：13779982
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:26.833
> 
> 标签：php, javascript, jquery, html, mysql

在处理我的“项目”时，我遇到了一些非常奇怪的烦人结果。为了遍历 MySQL 结果，我使用了一个 while 循环。在 while 循环中回显的行之一现在在每个关闭的 div 之后不断出现。这仅在 firebug 或其他 DOM 检查器中可见，而在源代码中不可见。我不知道是什么导致它，所以任何帮助表示赞赏。在下面，我包含了所有涉及的代码。

谢谢，

山姆

顺便提一句。这仍处于早期开发阶段，因此请考虑到这一点。

代码：

萤火虫：

```
<div class="contentainer_wrapper">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="wrapper">
<div class="sidebar_navigation gradient">
<ul class="navigation">
<li id="nav1" class="active tip-right" style="height: auto;" data-original-title="Dashboard">
<li id="nav2" class="tip-right" style="height: auto;" data-original-title="Forms">
<li id="nav3" class="tip-right" style="height: auto;" data-original-title="UI Elements">
<li id="nav4" class="tip-right" style="height: auto;" data-original-title="Typography">
<li id="nav5" class="tip-right" style="height: auto;" data-original-title="Tables">
<li id="nav6" class="tip-right" style="height: auto;" data-original-title="Gallery">
<li id="nav7" class="tip-right" style="height: auto;" data-original-title="Grid">
<li id="nav8" class="tip-right" style="height: auto;" data-original-title="Charts">
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</ul>
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')">
<div id="canvas" class="content_wrapper">This page was loaded succesfully :D</div>
<div id="loading_modal" class="modal hide fade">
</a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')"> </a>
</div>
<a class="i_charts" onclick="load_page('nav8', 'test.html')">
</body>
</html> 
```

php文件：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="author" content="Sam Kool">
<title>Admin panel</title>
<link rel="stylesheet" href="../css/bootstrap.css"/>
<link rel="stylesheet" href="../css/bootstrap-responsive.css"/>
<link rel="stylesheet" href="../css/style.css"/>
<!--[if IE 8]><link href="css/ie8.css" rel="stylesheet"><![endif]--><!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body onLoad="prepare()">
<?php  
session_start();
if(!isset($_SESSION['name'])){
    header('Location: http://localhost/CMS/Admin/');
}   
include ('../config.php');

?>
<div class="highligts_content">
  <div class="container-fluid">
    <div class="stats">
      <div class="row-fluid">
        <div class="span12">
          <div class="statistics">
            <ul class="quickstats">
            <?php  
            $conn = mysql_connect($config['db_host'], $config['db_user'], $config['db_pass']);
            $conn = mysql_select_db($config['db_db']);
            $mysql['sql'] = " SELECT *
                        FROM admin_layout
                        WHERE enabled = '1' and type = 'quickstats'
                        ";
            $mysql['query'] = mysql_query($mysql['sql']);
            while($row = mysql_fetch_array($mysql['query'])){
                echo '<li> <a href="#"> <img src="../img/icons/'.$row["image"].'" alt=""> <span>'.$row["title"].'</span> </a> </li>';
            }
            mysql_close();
            ?>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="contentainer_wrapper">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12">
        <div class="wrapper">
          <div class="sidebar_navigation gradient">
            <ul class="navigation">
              <?php
              $i = 1;
              $conn = mysql_connect($config['db_host'], $config['db_user'], $config['db_pass']);
              $conn = mysql_select_db($config['db_db']);
              $mysql['sql'] = " SELECT *
                          FROM admin_components
                          WHERE enabled = '1'
                          ";
              $mysql['query'] = mysql_query($mysql['sql']);
              while($row = mysql_fetch_assoc($mysql['query'])){
                  echo '<li id="nav'.$i.'" class="tip-right" data-original-title="'.$row["title"].'" style="height: auto;">';
                  echo '<a class="'.$row["icon"].'" onClick="load_page(\'nav'.$i.'\', \''.$row["url"].'\')">'; 
                  echo '<span class="tab_label" style="visibility: visible;">'.$row["title"].'</span>';
                  echo '<span class="tab_info" style="visibility: visible;">'.$row["description"].'</span></li>'; 
                  $i ++;

              }
              mysql_close();
              ?>
            </ul>
          </div>
        </div>
        <div class="content_wrapper" id="canvas"> 
        </div>
        <div class="modal hide fade" id="loading_modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Loading....</h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script> 
function load_page(id, component){
    if($('#'+id).attr('class') == 'active tip-right'){
        alert('nope');
        return; 
    }
    $('.navigation li').each(function(i){
        var myClass = $(this).attr("class");
        if(myClass == 'active tip-right'){
            $(this).attr('class', 'tip-right');
        }
        });
        $('#'+id).attr('class', 'active tip-right');
        $('#loading_modal').modal('show');
        setTimeout(function(){
        $('#canvas').load('/SCMS/admin/components/'+component, function(){
            $('#loading_modal').modal('hide');
        });
        },1000);
}
function prepare(){
    $('#nav1').attr('class', 'active tip-right');
    $('#canvas').load('/SCMS/admin/components/dashboard.php');
    $('#loading_screen').modal({
    keyboard: false,
    hide: true
    })  
}
</script> 
<script type="text/javascript" src="../js/jquery.min.js"></script> 
<script type="text/javascript" src="../js/bootstrap.js"></script>
<script type="text/javascript" src="../js/jquery.dataTables.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:42:16.340

DOM 检查器几乎总是正确的，您的 HTML 源代码是错误的。当这样的事情发生时，通常表明您忘记关闭标签，或者您以错误的顺序关闭它们。

在回显 html 时，这是一个非常容易犯的错误，因为您通常没有缩进或 IDE 颜色编码来帮助您。

在您的第二个 while 循环中，您似乎打开了一个`a`标签并且没有回显结束标签。

```
echo '<li id="nav'.$i.'" class="tip-right" data-original-title="'.$row["title"].'" style="height: auto;">';
//OPENED AN A TAG HERE
echo '<a class="'.$row["icon"].'" onClick="load_page(\'nav'.$i.'\', \''.$row["url"].'\')">'; 
echo '<span class="tab_label" style="visibility: visible;">'.$row["title"].'</span>';
echo '<span class="tab_info" style="visibility: visible;">'.$row["description"].'</span></li>'; 
//OOPS, ENDED LI WITHOUT ENDING A 
```

# c# - 为代码设置 ASP.NET 结构

> ID：13779983
> 
> 赞同：1
> 
> 时间：2012-12-08T17:32:31.653
> 
> 标签：c#, asp.net, oop

在开发 Web 应用程序时，我一直使用 C# MVC3 进行编码。但现在我想了解更多关于仅使用 ASP.NET 开发网站的知识。

但现在我想知道我的代码会有什么好的设置。对我来说，类似 MVC 的模式似乎是一个不错的选择。但显然 ASP.NET 没有任何路由器和控制器类。所以我猜人们在使用 ASP.NET 时有不同的方式来设置他们的代码。

因此，我正在寻找有关如何开始使用此功能的更多信息。所以不是真正的 ASP.NET 基础知识，而是专注于良好代码设置的东西。

关于此的任何好的教程/信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:58:35.487

过去，在构建 ASP.NET 应用程序时，我发现[Model View Presenter](http://msdn.microsoft.com/en-us/magazine/cc188690.aspx)设计模式在将所有代码隐藏提取到表示层（与 Web 程序集无关的独立类库）方面非常有用。

这使我可以对所有演示者和逻辑进行单元测试，并将 ASP.NET 视为`IViews`.

在这种方法中，我通常会：

*   UI（Web 应用程序项目）
*   UI Common、控件等类库
*   演示类库
    *   Presenter 通常包含业务逻辑，它们不依赖于 ASP.NET
*   演示支持类库
*   数据模型类库（EF、NHibernate 等）

根据应用程序的不同，您可能需要在表示和数据模型之间建立一个单独的业务层，并从 Presenter 中获取逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T23:08:52.060

基础 - “MVC”、“Web 表单”、“网站项目”、“Web 应用程序项目”都是**ASP.Net**。您可以随意混合/匹配 - 例如，我可以有一个包含 webform1.aspx 的 Web API 项目。您可以在同一个应用程序中拥有 vbhtml/cshtml (razor) 文件和 aspx 文件 (webforms)。我可以在 MVC 应用程序中拥有 Web 表单、通用处理程序等……等等。他们都在“下” ASP.Net。

其他答案为您提供了可用于 ASP.Net Web 应用程序/站点的结构——您会注意到它是“分层的”——也就是“业务层”、“数据层”等，它们也适用于 MVC。如果您超越了术语，我认为这都是关于“关注点分离”（又名“分层”、可重用、可单元测试等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T18:44:23.767

实际上，如果您有足够大的网站，解决方案应该包括以下项目：

1.  网络应用程序本身
2.  业务逻辑层
3.  数据访问层
4.  实体（如果您使用实体框架）
5.  也许是网络控制项目

它可以或多或少取决于您的站点。对于简单的站点，您只能拥有只有几个 aspx 页面的 Web 应用程序。

不确定它是否回答了你的问题。

# android - Android 中专辑封面的有效位图缩放

> ID：13779984
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:32.403
> 
> 标签：android, android-layout, image-processing, bitmap

我刚刚在我的 Android 应用程序中添加了对专辑封面的支持，我遇到了一个问题，即在布局中显示专辑封面会导致应用程序内存激增，并且最终会终止播放服务以释放内存。我相信问题是我将提取的专辑封面添加到布局中而不压缩它。这导致必须将大图像缓存在内存中。我用来制作位图的代码是：

```
byte [] blob = mCursor.getBlob(mCursor.getColumnIndexOrThrow(Media.MediaColumns.PICTURE));

if (blob != null) {
    return BitmapFactory.decodeByteArray(blob, 0, blob.length);
} 
```

是否可以统一缩放/压缩这些位图以减少它们的内存占用。另外，有没有办法直接使用字节数组（而不是输入流）进行压缩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:56:31.757

试试这个

```
Options opt = new Options();
        opt.inSampleSize = 2;
        if (blob != null) {
        return  BitmapFactory.decodeByteArray(blob, 0, length, opt)
          } 
```

**有关此的更多信息**

```
public int inSampleSize
Added in API level 1 
```

如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。样本大小是对应于解码位图中的单个像素的任一维度中的像素数。例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。任何 <= 1 的值都被视为 1。注意：解码器将尝试满足此请求，但生成的位图可能具有与所请求的尺寸不同的尺寸。此外，2 的幂通常更快/更容易让解码器兑现。

# c++ - 确保 .DLL / .so 的安全性

> ID：13779985
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:53.153
> 
> 标签：c++, windows, security, shared-libraries

我有一个共享库 mylib.so 在运行时加载。我需要确保它加载到正确的 mylib.so/mylib.dll 中。是否有确保加载正确的共享库的跨平台（Win/Mac/Linux）方法。

我正在考虑对 .dll 进行校验和，但我不确定如何检索在运行时加载的实际 .dll。（这都是在 C++ 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:56:32.310

对于仅限 Windows 的解决方案，请查看

```
HMODULE h = GetModuleHandle( "mylib" );
char name[ 300 ];
DWORD rc = GetModuleFileName( h, name, sizeof(name) ); 
```

我并不是说这有助于或阻碍实际的安全性。

# python - 使用 Pywin32 中的 win32evtlog 在 Python 中出现不寻常的 event.EventID 数字，例如 -2147481364

> ID：13779987
> 
> 赞同：0
> 
> 时间：2012-12-08T17:32:59.050
> 
> 标签：python, event-log, pywin32, event-id

我编写了一个 python(3.2) 脚本来禁止 Windows 2008 服务器上事件日志中某些事件的 ips，我试图测试它是否会正确禁止 ips 来自 sql 暴力强制尝试。不幸的是，到目前为止它还没有到达代码的那部分，因为它正在寻找的事件 ID 从未出现（尽管它应该在日志文件中）。

```
def run_script_application_log():
    eventIds = [18456] #look for these events to process for possible ip bans 18456 = failed login
    server = 'localhost' # name of the target computer to get event logs from
    logtype = 'Application' # 'Application' or 'Security' etc...
    hand = win32evtlog.OpenEventLog(server,logtype)
    ipsToBan = look_for_ips_to_ban(hand,flags,eventIds)

def look_for_ips_to_ban(hand, flag, eventIds):
    ...some code....
    events=1
    while events:
        events=win32evtlog.ReadEventLog(hand,flag,0)
        for event in events:
            the_time=event.TimeGenerated.Format()
            seconds=date2sec(the_time)
            #if seconds < begin_sec - time_in_seconds: break
            if event.EventID in eventIds: 
```

我插入了一个简单的打印语句来查看 event.EventID 发生了什么，它获得的数字至少可以说是奇怪的。事件日志上升到 33090，但返回的绝大多数 ID 与这些类似：1073750020 1073754112 -1073741823 -2147481364

我不知道发生了什么。它适用于安全日志，但应用程序日志似乎不行。

我查看了一些数据，除了 eventID 之外，所有数据似乎都正确报告。

例如，日志中的这条记录是正确的，只是它显示事件 ID 为 1073742726 而不是 18456。

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
<System>
<Provider Name="MSSQLSERVER" /> 
<EventID Qualifiers="49152">18456</EventID> 
<Level>0</Level> 
<Task>4</Task> 
<Keywords>0x90000000000000</Keywords> 
<TimeCreated SystemTime="2012-12-08T18:01:32.000000000Z" /> 
<EventRecordID>4532</EventRecordID> 
<Channel>Application</Channel> 
<Computer>windowsmachine</Computer> 
<Security /> 
</System>
<EventData>
<Data>username</Data> 
<Data>Reason: Password did not match that for the login provided.</Data> 
<Data>[CLIENT: <local machine>]</Data
<Binary>184800000E0000000A000000570049004E004D00430041005000460058000000070000006D00610073007400650072000000</Binary> 
</EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:45:54.320

如果您检查它是二进制的，那么该功能可以正常工作，它只是添加了您不需要的 1 位（或更多，并没有真正检查它）。尝试像这样通过“AND”来回答：

答案=event.EventID & 0x1FFFFFFF

# jquery - 切换按钮旁边的文本

> ID：13779988
> 
> 赞同：0
> 
> 时间：2012-12-08T17:33:07.350
> 
> 标签：jquery, button, text

我有一个表格，其中每个单元格都有一个按钮，代码如下：

```
<span class = "button"><input id="button" type="button"> 
```

我想在它的右侧显示一些文本，当单击按钮时会切换。所以它会从

[] 文本

[] 其他文字

无需重新加载页面，也不会切换其他单元格中的文本。我将如何使用 jQuery（或其他东西，如果有更好的方法）来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:37:18.327

```
<span class="button">
    <span class="text">Text</span>
    <input id="button" type="button" />
</span> 
```

JS：

```
$('.button input[type="button"]').on('click', function() {
    $(this).prev('.text').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:07:59.297

我想你是这样的：

> **[http://jsbin.com/azepex/1/edit](http://jsbin.com/azepex/1/edit)**

我遵循了html的这种结构：

```
<span class = "button">
    <input id="button" type="button" value='toggle text' >
    <span>text.</span>
</span> 
```

这是js：

```
$(function(){
  $('.button input[type="button"]').toggle(function(){
    $(this).next('span').text('Other text.');
  }, function(){
    $(this).next('span').text('text.');
  }); 
}); 
```

只需查看上面的 jsbin 链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:15:59.977

HTML

```
<span class="button">
    <input id="button" type="button" value="save">
    <span id="show-text">Text</span>
</span>​ 
```

JS

```
$("#button").toggle(function() {
    $("#show-text").text("Other Text").stop();
}, function() {
    $("#show-text").text("Text").stop();
});​ 
```

# mysql - 将对象存储在 memcached 中并仍然从数据库中加载它们

> ID：13779989
> 
> 赞同：0
> 
> 时间：2012-12-08T17:33:11.140
> 
> 标签：mysql, object, memcached, kohana

我对 memcached 有疑问。

我有以下代码：

```
/**
* Load the char object
* @param char_id id char
* @return $char object
*/

function get_info( $char_id )
{
    $cache = Cache::instance(); 
    $cachetag = Kohana::config( 'medeur.environment' ) . '-charinfo_' . $char_id . '_obj' ;
    kohana::log('debug', "-> Getting $cachetag from CACHE..." ); 

    $char = $cache -> get( $cachetag );

    if ( is_null( $char ) )
    {
        kohana::log('debug', "-> Getting $cachetag from DB."); 
        $char = ORM::factory('character', $char_id );

        if ( !$char -> loaded )
            $char = null;

        $cache -> set( $cachetag, $char, 3600 );

    }

    return $char;

} 
```

我在日志文件中看到对象 $char 是从缓存中获取的：

```
2012-12-08 18:24:07 +01:00 --- debug: -> Getting test-global_adminmessage from CACHE...
2012-12-08 18:24:07 +01:00 --- debug: -> Getting test-charinfo_1_obj from CACHE... 
```

但是，我一直在分析器表中看到我仍在使用数据库：

```
SELECT `characters`.* FROM (`characters`) WHERE `characters`.`id` = 1 ORDER BY `characters`.`id` ASC LIMIT 0, 1 
```

为什么？在这种情况下，memcached 就没用了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:38:07.127

您的*“Getting nnnn from CACHE...”*日志语句将始终显示，无论您是否实际从缓存中检索任何内容。考虑将它移到`else`大块之后的语句中`if`。

```
if(is_null($char)){
    ....
}
else {
    kohana::log('debug', "-> Got $cachetag from CACHE..." );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:36:35.610

我和Kohana的人核实过。Kohana 2.x ORM 类不可缓存。它可以在框架版本 3.x 上缓存

# android - 如何在android应用程序中获取当前位置？

> ID：13779993
> 
> 赞同：1
> 
> 时间：2012-12-08T17:33:43.670
> 
> 标签：android, gps, location, locationmanager, android-location

首先，我为重复道歉，我知道有人问过这个问题，我试图跟进现有的答案，但它不起作用。因此，如果您可以查看我的代码并说出错误或缺失的内容，那将对我有很大帮助。

这是活动，它仅使用日志（无 GUI）。

```
import android.app.Activity;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity implements LocationListener {

    private LocationManager lManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        if (lManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER))
            lManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                    0, 0, this);
        else
            Log.i("Test", "network provider unavailable");

        Location lastKnownLocation =
                lManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

        if (lastKnownLocation != null) {
            Log.i("Test", lastKnownLocation.getLatitude() + ", "
                    + lastKnownLocation.getLongitude());
            lManager.removeUpdates(this);
        } else
            Log.i("Test", "null");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onLocationChanged(Location location) {
        Log.i("Test", "location changed: " + location.getLatitude() + ", "
                + location.getLongitude());
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

当我尝试运行该应用程序时，一切似乎都正常，但纬度和经度不会显示在日志上。我正在使用具有网络位置的真实设备进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:26:57.750

我无法获得位置的原因是蜂窝公司没有提供该信息（NETWORK_PROVIDER 使用蜂窝天线三角测量来确定位置。蜂窝公司可以提供或拒绝您提供此信息）。

# xml-parsing - ARM平台的xml解析器

> ID：13779994
> 
> 赞同：0
> 
> 时间：2012-12-08T17:33:46.883
> 
> 标签：xml-parsing, arm

我正在为 ARM 平台（我正在使用 Beaglebone）寻找好的和快速的 xml 解析器。我花了一些时间在谷歌搜索，并得到了以下解析器库。
1.libxml2 [2.ezxml](http://git.gnome.org/libxml2)
3.minixml [_](http://ezxml.sourceforge.net/)
_ [_](http://www.minixml.org/)

您能否为 ARM 平台推荐一个好的解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:22:55.100

这些都是可移植的解析器——该平台实际上并没有增加任何额外的考虑因素：内存使用、性能以及您是否需要功能齐全的解析器和 DOM 或使用 SAX 的更轻量级的东西。

我不希望结果与在 x86 上使用这些库时的结果有很大不同。

libxml2 功能齐全。如果执行繁重的 XPATH、模式验证或 XSLT，您可能会想要这个。它几乎肯定会包含在任何 Linux 发行版中。

# php - ajax函数总是返回false后在php中创建file.txt

> ID：13779996
> 
> 赞同：0
> 
> 时间：2012-12-08T17:33:59.207
> 
> 标签：php, ajax, file, fopen

我想创建新的 .txt 文件，但由于此代码始终返回 false，因此不会执行 ajax 成功函数。

所有代码是：

```
<?php

$nome = $_POST["nome"];
$datanasc = $_POST["datanasc"];
$genero = $_POST["genero"];
$nat = $_POST["nat"];
$morada = $_POST["morada"];
$mail = $_POST["mail"];
$existe = false;
$myFile = "Users.txt";
$myFile1 = "Current_User.txt";

$fh = fopen($myFile, "r")or die("can't open file");
while (($line_of_text = fgets($fh))) {
$Data = explode(';', $line_of_text);
    if($nome == $Data[0] && $datanasc == $Data[1] && $genero == $Data[2] && $nat == $Data[3] && $morada == $Data[4] && $mail == $Data[5]){
        $existe = true;
        break;
    }
}

fclose($fh);
if($existe == true){
$arrayToJs["existe"] = $existe;

}

    else{
        $arrayToJs["existe"] = $existe;

        $fh = fopen($myFile, "a")or die("can't open file");
        $stringData = $nome.";".$datanasc.";".$genero.";".$nat.";".$morada.";".$mail.";"."\n";
        //print_r($stringData);
        fwrite($fh, $stringData);
        fclose($fh);

        $fh1 = fopen($myFile1, "w")or die("can't open file");
        fwrite($fh1, $stringData);
        fclose($fh1); 
```

代码中存在问题，原因是返回 false 并且未执行 ajax 成功函数。. .

```
 if((!file_exists($nome.'_Favoritos.txt')) && (!file_exists($nome.'_Cesto.txt'))) {
                $ffav = $nome.'_Favoritos.txt';
                $handle = fopen($ffav, 'w') or die('Cannot open file:  '); 
                fclose($ffav);

                $fcart = $nome.'_Cesto.txt';
                $handle = fopen($fcart, 'w') or die('Cannot open file:  '); 
                fclose($fcart);
        } 
```

* * *

```
 }

echo json_encode($arrayToJs);
?> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:02:58.700

使用您使用 fclose 创建的文件指针 ($handle)：

```
if((!file_exists($nome.'_Favoritos.txt')) && (!file_exists($nome.'_Cesto.txt'))) {
    $ffav = $nome.'_Favoritos.txt';
    $handle = fopen($ffav, 'w') or die('Cannot open file:  '); 
    fclose($handle);

    $fcart = $nome.'_Cesto.txt';
    $handle = fopen($fcart, 'w') or die('Cannot open file:  '); 
    fclose($handle);
} 
```

否则，当这些文件不存在时，您的文件将始终返回 PHP 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:40:13.077

您的 AJAX 成功函数是否被调用与 PHP 代码的“返回值”无关。

假设您使用的是 jQuery 或其他 JavaScript 框架之一，它与 HTTP 响应代码有关。据推测，您可能遇到了导致浏览器返回 500 响应的 PHP 错误。这将使您最终进入错误处理程序而不是成功处理程序。

您是否尝试过使用 Chrome 中的网络检查器（或 Firebug 中的 Net 标签）来调查实际的 HTTP 响应？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T17:43:36.210

此代码不返回任何值，请在创建文件后将值（真/假）传递给 ajax 响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T17:44:32.083

如果您将相对路径传递给 file_exists，它将返回 false，除非该路径恰好相对于当前 PHP 目录。

# ios - iOS Coreplot 实时数据

> ID：13779999
> 
> 赞同：1
> 
> 时间：2012-12-08T17:34:20.563
> 
> 标签：ios, core-plot, scatter-plot

我需要用实时数据动态更新散点图。数据是取决于时间（X 轴）的速度（Y 轴）。一旦有了新的速度数据，我就会将数据添加到数据源数组中，然后调用`[graph reloadData]`以更新图形。这很好，但是如何自动使图形在 x 轴上*滚动*以使新数据始终显示在屏幕上？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:52:04.653

找到的解决方案：需要更新这个属性`((CPTXYPlotSpace *)graph.defaultPlotSpace).xRange`