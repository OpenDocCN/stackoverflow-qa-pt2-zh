# StackOverflow 问答 12507000-12507999

# gcc - 是否有针对 Linux 内核的 GCC 特定黑客列表？

> ID：12507008
> 
> 赞同：0
> 
> 时间：2012-09-20T06:18:30.273
> 
> 标签：gcc, linux-kernel, compiler-optimization

似乎有许多针对 Linux 内核的 GCC 特定的 hack（指令/优化）。我只是想知道，是否有官方的综合清单？有人在研究或研究它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:54:42.963

另外，请参阅 IBM DveloperWorks 文章《Linux 内核中的 GCC hacks》：http: [//www.ibm.com/developerworks/linux/library/l-gcc-hacks/](http://www.ibm.com/developerworks/linux/library/l-gcc-hacks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:40:18.120

见`include/linux/compiler-gcc*.h`一开始。

# android - 支付网关重定向如何在 android 中工作？

> ID：12507012
> 
> 赞同：2
> 
> 时间：2012-09-20T06:19:19.900
> 
> 标签：android, iphone, payment-gateway, payment, payment-processing

我在我们的网站中集成了一个支付网关，用户被重定向到我们的支付网关，其中包含商家和支付信息，并且在成功/失败的交易后用户被重定向回我们的网站。

现在我们想在我们的 android 应用程序中使用该支付网关。那么如何确保支付网关重定向与在 Web 浏览器中的工作方式相同？我们可以将用户重定向到 android 的浏览器进行付款，但是如何将响应重定向回 android 应用程序而不是浏览器。这可能吗？

我们正在使用 tpsl-india.in 支付网关。

如果这不可能，请指导我采用其他更好的替代方式。稍后我会希望这也能在 iPhone 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:50:04.303

您最好的选择是让重定向发生在[WebView](http://developer.android.com/reference/android/webkit/WebView.html)内，这样您就可以[监听 URL 更改](https://stackoverflow.com/questions/2219556/how-do-i-listen-for-something-in-webview-android)，并且当用户点击重定向 URL 时，您可以在应用程序中执行您需要执行的任何操作。

无论您使用哪种支付处理器，这都应该有效。通过[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)组件，同样的策略也适用于 iPhone。

# image-processing - 泊松混合 rgb 超出范围

> ID：12507013
> 
> 赞同：1
> 
> 时间：2012-09-20T06:19:23.333
> 
> 标签：image-processing

我正在尝试使用泊松混合技术混合两个图像。我已经编写了程序并分别求解了每个 r、g、b 通道的线性方程组。求解方程 rgb 值超出范围后，每个值都大于 255。如果我将每个值限制为 255，则生成的图像变为白色，因为现在所有三个通道都是 255。我的问题是求解泊松方程后 rgb 值可以大于 255 吗？在这种情况下，我怎样才能获得正确的混合图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T11:37:29.657

我认为您需要更改颜色值的比例。根据大多数在线站点中给出的公式（方程组），他们认为颜色值在 0 到 1 范围内。将您的 0 - 255 比例转换为 0 - 1 之间的浮点值并查看。

# java - 在 Servlet/JSP 中加载属性文件

> ID：12507016
> 
> 赞同：6
> 
> 时间：2012-09-20T06:19:40.867
> 
> 标签：java, jsp, servlets, properties

`jar`我从我创建了一个`Java project`并想在`JSP Servlet Project`. 我正在尝试加载一个属性文件，比如说我`JSP Servlet Project`保存的sample.properties`WEB/properties/sample.properties`应该由`jar`.Im 中的一个类读取。我使用下面的代码写在一个 jar 类中来访问它。

```
Properties prop=new Properties();
prop.load(/WEB-INF/properties/sample.properties); 
```

但每次我得到`fileNotFound exception`.
请建议我解决方案。

这是结构

```
WEB-INF
      |
       lib
          |
           myproject.jar
                       |
                        myclass (This class needs to read sample.properties)
      |
       properties
                 |sample.properties 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T02:13:48.520

该`/WEB-INF`文件夹**不是**类路径的一部分。因此，这里任何不经思考的建议[`ClassLoader#getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)都将**永远不会**奏效。只有将属性文件放置在`/WEB-INF/classes`其中确实是类路径的一部分时，它才会起作用（在像 Eclipse 这样的 IDE 中，只需将其放置在 Java 源文件夹根目录中就足够了）。

如果属性文件确实存在于您想要保留的位置，那么您应该将其作为 Web 内容资源获取[`ServletContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)。

假设你在 a 里面`HttpServlet`，应该这样做：

```
properties.load(getServletContext().getResourceAsStream("/WEB-INF/properties/sample.properties")); 
```

*（`getServletContext()`继承自servlet超类，不需要自己实现；所以代码原样）*

但是，如果该类本身根本不是 a `HttpServlet`，那么您确实需要将属性文件移动到类路径中。

### 也可以看看：

*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application/2161583#2161583)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T06:22:00.667

尝试将 sample.properties 放在`src`文件夹下，然后

```
Properties prop = new Properties();
prop.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("myprop.properties")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T06:27:11.013

将您的属性文件移动到`WEB-INF/classes`. 然后加载如下：

`prop.load(getClass().getResourceAsStream("sample.properties"));`

你也可以把它放到子目录下`classes`。在这种情况下，相应地更改调用`getResourceAsStream()`。

为了在多类加载器系统中更安全，您可以`Thread.getContextClassLoader().getResourceAsStream()`改用它。

要使属性文件到达`classes`您的 war 文件的文件夹，您必须将其放在`resources`项目中的文件夹下（如果您使用的是 maven），或者`src`如果您不使用类似 maven 的目录结构，则只需放在文件夹下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T06:23:38.910

试试这个，

```
 InputStream inStream = Thread.currentThread().getContextClassLoader()
                     .getResourceAsStream("/WEB-INF/properties/sample.properties"); 
```

然后，将其加载（InputStream）到一个 Properties 对象中：

```
Properties props = new Properties();
props.load(inStream); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T06:50:37.863

如果您尝试从 jsp/servlet 加载属性，它可能不起作用。编写一个实用程序类来读取属性和包以及 jar 文件。将属性文件复制到与实用程序相同的包中。

```
 Class Utility{
    Properties properties=null;
    public void load() throws IOException{
        properties.load(getClass().getResourceAsStream("sample.properties"));
    }
    public Object get(String key) throws IOException{
        if (properties==null){
            load();
        }
        return properties.get(key); 
    }
  } 
```

现在使用 servlet 中的这个实用程序类来读取属性值。也许您可以将类定义为单例以便更好地练习

干杯萨西什

# python - 建议“作者识别”的步骤？

> ID：12507019
> 
> 赞同：0
> 
> 时间：2012-09-20T06:19:49.883
> 
> 标签：python, nltk, corpus

我有一个项目，我想确定给定文本的作者，博客如何为特定作者创建训练数据和语料库？

请建议一些链接以及相同的算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:21:28.323

有许多方法可以完成作者身份识别的任务。由于您似乎是 NLP 的新手，因此我建议您从基本的词袋向量方法开始：

1.  想出一组作为特征的词。
2.  获取每个文档并将其转换为每个特征词的计数向量。
3.  通过余弦相似度对向量进行聚类。
4.  最终在同一个集群中的文档很可能是由同一作者编写的。

现在有一个重要的问题使得作者身份识别的聚类不同于普通的文档聚类：在普通的文档聚类中，我们试图忽略“停用词”，诸如“the”、“be”、“that”等高频词，而只是专注于“内容词”。但在作者身份识别中，事实证明，这些停用词是使个人写作独一无二的东西！所以向量实际上应该根据作者在写作中使用这些功能词的方式进行聚类。

下一步，尝试使用更好的功能，例如单词二元组，因为这些功能可以更好地了解作者写作风格的独特方面。

有关该领域的广阔视野和人们尝试过的技术，请查看[Google 学者](http://scholar.google.com/scholar?q=authorship+identification)的说法。您可能应该寻找提供该领域概述的调查文章或其他论文，以便您可以很好地了解人们尝试了什么以及取得了成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:36:47.033

你可以使用神经网络。[例如，这里](http://home.southernct.edu/~pasqualonia1/sonnet/report.html)有一篇文章试图确定莎士比亚、弗莱彻和马洛作品的作者。它还包括一些 python 脚本（和 C 中的神经网络实现）。还有一些数据文件可以让您了解如何编写训练数据。

但如前所述，目前您的问题仍然过于宽泛。希望这个例子能让你开始，这样你就可以回来问更具体的问题。

# java - c3p0的最佳配置

> ID：12507021
> 
> 赞同：39
> 
> 时间：2012-09-20T06:20:05.727
> 
> 标签：java, hibernate, jpa-2.0, connection-pooling, c3p0

我正在努力解决面临 c3p0 配置的问题。[我上周发布了一个问题](https://stackoverflow.com/questions/12446266/c3p0-configurations-where-and-how)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-21T13:21:37.350

这是我正在使用的配置，可将资源保持在最低限度。当然，您需要定制您的应用程序以使用它需要的资源......

*参考*：[http ://www.mchange.com/projects/c3p0/index.html](http://www.mchange.com/projects/c3p0/index.html)

*   `testConnectionOnCheckin`当连接返回到池时验证连接。`testConnectionOnCheckOut`，虽然可以确保在使用前进行活动连接，但这样做成本太高。
*   `idleConnectionTestPeriod`设置连接在测试之前保持空闲的时间限制。如果没有 preferredTestQuery，默认值为`DatabaseMetaData.getTables()`- 与数据库无关，虽然调用成本相对较高，但对于相对较小的数据库来说可能没问题。如果您对性能有疑虑，请使用特定于您的数据库的查询（即`preferredTestQuery="SELECT 1"`）
*   `maxIdleTimeExcessConnections``minPoolSize`将在活动高峰后将connectionCount 恢复到。

下面的配置将 poolsize 设置在 3-20 之间。空闲连接每 5 分钟重新测试一次以保持它们处于活动状态。因为`idleConnectionTestPeriod`，这只会保持最小连接数。如果在 4 分钟标记处有超过 3 个连接，它会终止这些连接，将资源释放回最低限度。

使用`maxIdleTimeExcessConnections`和`idleConnectionTestPeriod`否定需要`maxIdleTime`

```
<Context docBase="myapp" path="/myapp" reloadable="true">
    <Resource description="My DB Datasource" name="jdbc/mydb"
        auth="Container" factory="org.apache.naming.factory.BeanFactory"
        type="com.mchange.v2.c3p0.ComboPooledDataSource" 
        user="myuser" password="******"
        minPoolSize="3"
        maxPoolSize="20"
        acquireIncrement="1" 
        driverClass="com.mysql.jdbc.Driver" 
        jdbcUrl="jdbc:mysql://localhost:3306/mydb"
        testConnectionOnCheckin="true" 
        idleConnectionTestPeriod="300"
        maxIdleTimeExcessConnections="240"
    />
</Context> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:04:20.203

最佳配置是设置 JPA 以使用容器环境获取 DataSource。

这允许容器提供连接池，而不是将其直接配置到您的 JPA 项目中。

您没有指出您正在使用哪个容器环境。我几乎总是将 c3p0 与独立应用程序一起使用，例如 Java SE 桌面或服务器应用程序。我也将它与 Spring 框架一起使用。

当使用诸如 Servlet (Tomcat/Jetty) 或应用程序服务器（如 Glashfish 或 JBoss AS）之类的容器时，它们已经提供了通常不是 c3p0 但提供等效功能的 DataSource 连接池实现。

我从未尝试在 JPA 项目中配置连接池，因为这意味着编辑配置以针对它需要运行的每个环境对其进行自定义。这是一个令人头疼的问题，因此最好为 JPA 部分提供 DataSource 以在引导期间使用。

# javascript - why the code doesn't alert Worky-worky?

> ID：12507023
> 
> 赞同：0
> 
> 时间：2012-09-20T06:20:18.963
> 
> 标签：javascript

```
var a = function() {
  function someSetup(){
    var setup = 'done';
  }
  function actualWork() {
    alert('Worky-worky');
  }
  someSetup();
  return actualWork;
}(); 
```

why the above code doesn't alert Worky-worky?it shows undefined.thank you

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T06:22:08.087

Because you only return the function, not call it.

Perform `a();` after this code execution, this will call the function that's returned by anonymous self-executing function, thus `actualWork`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:22:27.557

you are trying to return a function that has no return type (actualWork()).

It doesn't do the alert() because you didn't call the function properly.

`actualWork()`

`return actualWork;` is actually returning a variable, but because you didn't assign anything to that variable you're getting undefined back.

should do the trick.

# ios - CoreData 保存问题

> ID：12507026
> 
> 赞同：3
> 
> 时间：2012-09-20T06:20:21.827
> 
> 标签：ios, ipad, core-data, nsfetchedresultscontroller, uimanageddocument

我的整个应用程序（包含两个实体）中有一个托管文档，用户可以从两个不同的视图控制器更新它。每个视图控制器都有自己的 NSFetchedResultsController 属性来传递更改：一个视图控制器中的 UICollectionView 和另一个中的 UITableView。根视图控制器中的 UICollectionView 显示团队，而 segued 视图控制器中的 UITableView 显示该团队中的玩家。

当我在第一个视图控制器中时，我可以添加一个团队的实例，它可以正常工作，因为它将它们保存到文档中，然后将它们添加到 UICollectionView。当我在第二个视图控制器中时，我将 Player 插入 CoreData 并调用：

```
[document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting     completionHandler:nil]; 
```

这会正确调用 NSFetchedResultsControllerDelegate 方法：-(void)controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:

在这个委托方法中，我调用：

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

但是，在表视图上调用此行插入方法会导致以下 Core Data 错误：

“CoreData：错误：严重的应用程序错误。在核心数据更改处理期间捕获了异常。这通常是 NSManagedObjectContextObjectsDidChangeNotification 观察者中的一个错误。 *** -[__NSPlaceholderArray initWithObjects:count:]：尝试从对象 [0] 插入 nil 对象用户信息（空）"

我的 fetchedResultsController 肯定是 NSManagedObjectContextObjectsDidChangeNotification 的观察者，但是这个错误发生在托管对象上下文的任何更改之前。所以我基本上无法确定托管对象上下文在哪一点得到 null userInfo。

（发生的另一件事是我的 NSFetchedResultsController 来自具有 UICollectionView 的根视图控制器，在下一个具有 UITableView 的视图控制器中的 NSFetchedResultsController 触发它自己之前触发其委托方法。我认为这是正确的功能，因为 Team 和 Player 都在 CoreData 中获得更新）。

关于 UITableView 行插入为何导致此错误的任何想法，或者我的单个托管文档如何可能存在可能导致此错误的不一致？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T11:02:44.853

在`NSFetchedResultsChangeInsert`事件的情况下，`indexPath`is`nil`和**`newIndexPath`**是插入对象的目​​标路径。因此你必须打电话

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                      withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

对于更新事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:21:03.280

NSManagedContext 只能使用'save:error:' 保存 - 你为什么要如图所示进行'文档保存'？

# wordpress - Wordpress - 只允许添加一个文本小部件

> ID：12507028
> 
> 赞同：1
> 
> 时间：2012-09-20T06:20:31.523
> 
> 标签：wordpress

我正在尝试为 Wordpress 创建一个自定义主题并设法创建一个工作小部件区域。但是为了这个主题的目的，我想只允许使用一个“Text-Widget”。我将如何限制这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:18:51.167

请具体说明您想问什么。Wordpress 不限制您可以使用尽可能多的文本小部件的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:37:28.923

您能否提供网址，以便我们为您提供解决方案？如果您可以为您的博客提供网址，我将更新下面的代码以与您的主题兼容。

WordPress 不允许您限制小部件的数量，但您可以使用 javascript 隐藏下一个侧边栏项目。

```
$('.sidebar li:gt(0)').hide(); 
```

第二个列表项以后将被隐藏。

是的，这有点作弊。SEO 明智的下一个小部件仍然可见。

# php - 如何创建“你在这里”导航

> ID：12507032
> 
> 赞同：2
> 
> 时间：2012-09-20T06:20:51.583
> 
> 标签：php, javascript, navigation

我需要在我的网站上添加“你在这里”导航链接。例如：

```
Home->Automobiles->cars 
```

我可以假设的唯一方法是网页中的硬编码链接。如果需要，我有很多文件。有没有简单的方法或替代方法来克服这个问题？感谢您的建议。谢谢。

注意：我在我的网站中使用 mod Rewrite，如下例所示：

```
RewriteRule ^Automobiles/([^/]*)/([^/]*)/([^/]*)/([^/]*)\.html$ /Automobiles/info.php?make=$1&model=$2&ad_id=$3&name=$4 [L] 
```

链接是这样的：

```
http://www.abc.com/Automobiles/Nissan/Sunny/1/Car_for_sale.html 
```

我需要导航是这样的：

```
Home->Automobiles->Car_for_sale 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:27:34.920

优秀的教程在这里：

[使用 PHP 在您的网站上显示面包屑](http://papermashup.com/how-to-display-breadcrumbs-on-your-site-using-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:25:29.303

我认为您正在寻找“面包屑”。你有几个例子： [这里](https://stackoverflow.com/questions/2594211/php-simple-dynamic-breadcrumb)和[这里](http://papermashup.com/how-to-display-breadcrumbs-on-your-site-using-php/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:59:12.220

Here is the PHP code that should generate your "Breadcrums". I assumed that you have the value of `$_REQUEST['name']` in all of your URL Structure.

```
// your Breadcrums!
$b = '';

// you need to have this array in order to link each 'alias' to its own 'ID'
$cat['auto'] = 1;
$cat['realestate'] = 2;
// etc.

// home page is always available, right?
// Output: Home
$b .= '<a href="/">Home</a>';

// if we have main category already passed on the URI
// current category
$c_cat = strtok($_SERVER['REQUEST_URI'], '/');

if (!empty($c_cat) AND !empty($cat[$c_cat]))
    // Output: Home -> Auto
    $b .= ' -> <a href="/?id=' . $cat[$c_cat] . '">' . ucfirst($c_cat) . '</a>';

// if we have 'ad name'
if (!empty($_REQUEST['name'])
    // Output: Home -> Auto -> Mustang GT500
    // should not be linked, huh?
    $b .= ' -> ' . $_REQUEST['name'];

// end
echo $b; 
```

# datagrid - INFRAGISTICS 打印预览渲染中的性能问题

> ID：12507034
> 
> 赞同：0
> 
> 时间：2012-09-20T06:20:59.993
> 
> 标签：datagrid, reporting, infragistics, xamdatagrid, print-preview

我正在使用**Infragistics.Windows.Reporting**命名空间的报表类对象生成打印预览，

但问题是在处理大量数据时，应用程序通常会变得反应迟钝并卡住，而预览生成也需要几分钟，这是不需要的，我在这里附上我的示例应用程序，请提出任何好的解决方法或解决方案

[下载示例项目](http://www.4shared.com/zip/mgybq0zN/DataGridPrinting.html)

# c - 数组中的字符串切片打印两个字符？

> ID：12507035
> 
> 赞同：1
> 
> 时间：2012-09-20T06:21:07.733
> 
> 标签：c, arrays

下面的 C 程序打印 16 个单词字符串的第一个和最后一个字符：

```
#include<stdio.h>
#include<string.h>

void main()
{
    char first, last;
    char *str = "abcdefghijklmnop";
    first = str[0];
    last = str[15];
    printf("%s", &first);
    printf("%s", &last);
} 
```

我正在寻找的输出是 a 和 p。但是，当我运行这段代码时，我得到了输出：

```
apa 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:24:13.500

您缺少对指针的理解。当您将字符分配给`first`and`last`时，这些字符实际上将被复制到`first`and `last`。由于`first`和`last`是不同的变量，它们的地址与`char *str`指针无关。此外，`printf("%s", &first);`（与 last 相同）调用未定义的行为，因为 printf 需要一个以 0 结尾的字符串，但您只传递一个字符，之后没有零终止符。

您可以做的是使用指针：

```
char *first = str + 0;
char *last = str + 15;
printf("%s %s", first, last); 
```

这将打印`abcdefghijklmnop p`

或仅打印两个字符：

```
char first = str[0];
char last = str[15];
printf("%c %c", first, last); 
```

这将打印`a p`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:23:23.220

下面的行将带来正确的结果

```
printf("%c", first );
printf("%c", last ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:24:19.863

您的变量`first`和`last`是实际的字符值，而不是字符串/指针。您需要改用 %c 。尝试：

```
#include<stdio.h>
#include<string.h>

void main()
{
    char first, last;
    char *str = "abcdefghijklmnop";
    first = str[0];
    last = str[15];
    printf("%c", first);
    printf("%c", last);
} 
```

`%s`期望得到一个指向字符值数组的指针，并一直读取直到它到达一个 NULL字符`\0`。

你可以在这里阅读更多关于这个[http://pw1.netcom.com/~tjensen/ptr/ch3x.htm](http://pw1.netcom.com/~tjensen/ptr/ch3x.htm)和这里[http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted -输出](http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output)。

我发现下面的 C++ 页面有一个更好的图表来可视化指针[http://cplusplus.com/doc/tutorial/pointers/](http://cplusplus.com/doc/tutorial/pointers/)。

# linux - Eclipse 可以使用 powerpc-linux-gcc 吗？

> ID：12507037
> 
> 赞同：0
> 
> 时间：2012-09-20T06:21:24.403
> 
> 标签：linux, eclipse, embedded, powerpc

我在一个单独的目标上编写了一个嵌入式 Linux。为此，我使用 Eclipse 作为编辑器和 powerpc-linux-gcc。

这有点不舒服。

是否可以在 Eclipse 中使用 powerpc-linux-gcc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:35:39.560

是的，但您想安装（通过帮助 -> 安装新软件 -> 从所有可用来源 -> 移动和设备开发）C/C++ 交叉编译器支持和可能的 C/C++ GDB 硬件调试。

当您开始新项目时，选择 C ​​或 C++ 项目，然后选择 Executable，然后选择“空项目”（或其他项目），然后确保在右侧列表框中选择“Cross gcc”。按下一步按钮，直到显示带有交叉编译器前缀和路径的页面。在那里您需要输入前缀（在您的情况下为 powerpc-linux-），您还可以选择编译器的目录（如果您尚未将其添加到路径中）。

当您以这种方式设置项目时，将使用选定的工具链进行构建。您还可以设置“GDB 硬件调试”会话来远程调试您的应用程序。

# erlang - 在 Erlang 中将字符串转换为整数列表

> ID：12507041
> 
> 赞同：2
> 
> 时间：2012-09-20T06:21:42.520
> 
> 标签：erlang

我正在尝试将字符串转换为整数列表。

```
 String = "08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08". 
```

但

```
 lists:map(fun(X) -> string:to_integer(X) end, string:tokens(String, " ")). 
```

只是给我...

```
 [{8,[]}, {2,[]}, {22,[]}, {97,[]}, ... , {91,[]}, {8,[]}] 
```

有人可以告诉我一个好的/好的方法是什么吗？

```
 [8,2,22,97...91,8] 
```

（或者我需要一个辅助函数吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T06:29:59.513

这有效：

```
String = "08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08".
lists:map(fun(X) -> {Int, _} = string:to_integer(X), 
                    Int end, 
          string:tokens(String, " ")).

> [8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8] 
```

看，`string:to_integer`返回的不是一个整数，而是一个元组：

```
to_integer(String) -> {Int,Rest} | {error,Reason} 
```

...所以你必须从这个元组中提取第一个元素才能得到实际的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:44:13.173

此外，您可以使用列表生成器语法：

`[begin {Int,_}=string:to_integer(Token), Int end|| Token<-string:tokens(String," ")].`

从外壳：

```
1> String = "08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08".
"08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08"
2> 
2> [begin {Int,_}=string:to_integer(Token), Int end|| Token<-string:tokens(String," ")].
[8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T22:58:26.977

[list_to_integer(X)|| X<-string:tokens(String," ")]。

# android - Andengine LiveWallpaper 中的空指针异常

> ID：12507042
> 
> 赞同：3
> 
> 时间：2012-09-20T06:21:48.807
> 
> 标签：android, nullpointerexception, andengine, live-wallpaper

我正在使用 Andengine 动态壁纸扩展制作动态壁纸。问题是当我尝试在 OnCreateScene 方法中附加一个精灵（背景图像）时，我得到一个空指针异常。有人可以帮我弄这个吗？

以下是我的代码：-

```
@Override
public EngineOptions onCreateEngineOptions() {

    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    EngineOptions engineOptions = new EngineOptions(false, ScreenOrientation.PORTRAIT_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
    return engineOptions;

}

@Override
public void onCreateResources(
        OnCreateResourcesCallback rsrCallback)
        throws Exception {

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/"); 
    background = new BitmapTextureAtlas(this.getTextureManager(), 480, 320);
    backTR = BitmapTextureAtlasTextureRegionFactory.createFromAsset(background,this.getAssets(), "background_small.png", 0, 0);
    background.load();

    rsrCallback.onCreateResourcesFinished();
}

@Override
public void onCreateScene(OnCreateSceneCallback sceneCallback)
        throws Exception {
    // creating main scene
    mMainScene = new Scene();
    IBackground myBack = new  Background(0.0f, 0.0f, 0.0f);
    mMainScene.setBackground(myBack);

    final Sprite bkground = new Sprite(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT, backTR, getVertexBufferObjectManager());
    mMainScene.getLastChild().attachChild(bkground);

    sceneCallback.onCreateSceneFinished(mMainScene);  
} 
```

在 mMainScene.getLastChild().attachChild(bkground) 线上，我得到一个空指针。堆栈跟踪已附加。

![错误堆栈跟踪](../Images/bf0349233f183777bd40712c56d30f20.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:48:27.847

我找到了向壁纸添加精灵背景的替代解决方案。

使用 SpriteBackground 类：-

```
mMainScene.setBackground(new SpriteBackground(new Sprite(0, 0, backTR, this.getVertexBufferObjectManager()))); 
```

这解决了我之前得到的空指针。

# c# - C# 错误（监控接收/发送的字节）[编辑]

> ID：12507049
> 
> 赞同：-6
> 
> 时间：2012-09-20T06:22:19.213
> 
> 标签：c#

我想监控 RFID 阅读器发送和接收的字节数。但是这个东西不编译。:( 它说它缺少'}'，但是如果我放一个，则无法识别 transportLogFile（在函数 SerialListener 上）。这有什么问题？

版权所有 (c) 2009 ThingMagic, Inc.

```
 using System; // system namespace reserved for items associated with .NET Framework class library
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Data;
using System.Threading;
using ThingMagic;

namespace Read_v5
{
    class Program
    {
        private TextWriter transportLogFile;
        static void Main(string[] args)
        {
            TextWriter transportLogFile;
            StreamWriter writer = new StreamWriter("log.txt");
            writer.AutoFlush = true;
            transportLogFile = writer;
            using (Reader rdr = Reader.Create("tmr:///com29"))
            {
                if (rdr is SerialReader)
                    rdr.Transport += TimestampListener;

                SimpleReadPlan readplan = new SimpleReadPlan();
                rdr.Connect(); //establish connection
                rdr.ParamSet("/reader/region/id", Reader.Region.OPEN); //region set in OPEN
                rdr.ParamSet("/reader/read/plan", readplan);
                int[] antennas = (int[])rdr.ParamGet("/reader/antenna/connectedPortList");
                rdr.ParamSet("/reader/tagop/antenna", 1);
                rdr.ParamSet("/reader/tagop/protocol", TagProtocol.GEN2);
                //   Console.WriteLine(rdr.ParamGet("/reader/tagop/antenna"));
                //   Console.WriteLine(rdr.ParamGet("/reader/tagop/protocol"));
                //  Console.WriteLine(" " + rdr.ParamGet("/reader/antenna/portList"));
                //   rdr.ParamSet("/reader/antenna/txRxMap", new int[][]{new int[]{1,1,1}});
                readplan.Antennas = new int[] { 1 };
                //    Console.WriteLine(" " + rdr.ParamGet("/reader/antenna/portList").ToString());
                readplan.Protocol = TagProtocol.GEN2;
                //      Console.WriteLine(rdr.ParamGet("/reader/antenna/portList"));
                rdr.ParamSet("/reader/read/asyncOffTime", 100);
                rdr.ParamSet("/reader/read/asyncOnTime", 500);
                rdr.StartReading();
                //     Console.WriteLine("FIN");
                //     int y = 0;
                while (rdr.Equals(rdr))
                {

                    //  Console.WriteLine("\r\n<Do this\r\n");
                    rdr.TagRead += delegate(Object sender, TagReadDataEventArgs e)
                    {
                        Console.WriteLine("EPC: " + e.TagReadData.EpcString);
                        Console.WriteLine("RSSI: " + e.TagReadData.Rssi.ToString());
                        Console.WriteLine("Phase: " + e.TagReadData.Phase.ToString());
                    };
                    Thread.Sleep(200);

                }
                rdr.StopReading();
                rdr.Destroy();
                transportLogFile.Close();
            }
        }
        private void TimestampListener(Object sender, TransportListenerEventArgs e)
        {
         //   TextWriter transportLogFile = null;
            transportLogFile.Write(String.Format("{0} {1}",
                DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff tt"),
                e.Tx ? "Sending" : "Received"));
            for (int i = 0; i < e.Data.Length; i++)
            {
                if ((i & 15) == 0)
                {
                    transportLogFile.WriteLine();
                    transportLogFile.Write("  ");
                }
                transportLogFile.Write("  " + e.Data[i].ToString("X2"));
            }
            transportLogFile.WriteLine();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:26:28.910

`}`在文件末尾再放一个。从我可以看到命名空间永远不会关闭。

编辑：变量有问题。您可以通过执行以下操作在方法中访问它来解决此问题。

```
class Program 
{ 
    //Declare the variable here:
    private static TextWriter transportLogFile;

    public static void Main(string[] args) 
    {
       //TextWriter transportLogFile = null; 
       transportLogFile = writer;          
    }
    private static void MyMethod()
    {
       //Access transportLogFile here.
    }
} 
```

# css - 溢出的 div

> ID：12507053
> 
> 赞同：0
> 
> 时间：2012-09-20T06:22:28.963
> 
> 标签：css, coverflow

我似乎无法弄清楚这一点。

我有以下代码：

```
<div id="wrapper">
    <div class="schedule">//blah</div>
    <div class="schedule">//blah</div>
    <div class="schedule">//blah</div>
    <div class="schedule">//blah</div>
    //
</div> 
```

我想要固定宽度的 div #wrapper。我希望每个 .schedule 也具有固定宽度。然后我想要，我的 div 太多了，我可以在那个页面内左右滚动。

我不能这样做！！无论我尝试什么，当我添加更多 .schedule 时，它​​们都会弹出到页面底部，并开始填充下一行！

干杯口沙

编辑：谢谢。所有结果都有效。除了我需要能够使用 float: left; 或者让所有 div 互相存货的东西！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:28:13.250

可以使用以下 CSS 来完成：

```
#wrapper {
    overflow-x: auto;
    white-space: nowrap;  
    max-width: 300px;
    border: 1px solid red;
}
#wrapper .schedule {
    display: inline-block;     
    padding: 5px;        
} 
```

我整理了一个基本的[JSFiddle 演示](http://jsfiddle.net/faceleg/xsgXs/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:28:34.967

***[现场演示](http://tinkerbin.com/JkBLCZO9)***

嗨，现在习惯了这个 css

```
#wrapper{
min-width:200px;
  background:red;
  font-size:0;
  white-space:nowrap;

}
.schedule{
height:100px;
  font-size:12px;
  width:100px;
  background:green;
  margin:1px;
  display:inline-block;
  vertical-align:top;
} 
```

***[演示](http://tinkerbin.com/JkBLCZO9)***

现在根据您的布局更改为宽度或高度............

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:28:36.430

我怀疑你想要的是浮动的 schedule-divs 以在同一高度上对齐。

尝试将此添加到您的CSS：

```
 #wrapper{overflow:auto;}

.schedule{float:left;} 
```

抱歉，如果我误解了您的规格，但我认为这就是您真正想要的。

# c - OpenGL中的洛伦兹吸引子

> ID：12507054
> 
> 赞同：1
> 
> 时间：2012-09-20T06:22:31.000
> 
> 标签：c, opengl

我正在尝试使用 OpenGL 在 3D 空间中对 Lorenz 吸引子进行建模。我在显示函数中编写了以下代码：

```
void display()
{
    //  Clear the image
    glClear(GL_COLOR_BUFFER_BIT);
    //  Reset previous transforms
    glLoadIdentity();
    //  Set view angle
    glRotated(ph,1,0,0);
    glRotated(th,0,1,0);

    glColor3f(1,1,0);
    glPointSize(1);

    float x = 0.1, y = 0.1, z = 0.1;
    glBegin(GL_POINTS);

    int i;    
    for (i = 0; i < initialIterations; i++) {    
        // compute a new point using the strange attractor equations
        float xnew = sigma*(y-x);
        float ynew = x*(r-z) - y;
        float znew = x*y - b*z;

        // save the new point
        x = x+xnew*dt;
        y = y+ynew*dt;
        z = z+znew*dt;        

        glVertex4f(x,y,z,i);
    }

    glEnd();

    //  Draw axes in white
    glColor3f(1,1,1);
    glBegin(GL_LINES);
    glVertex3d(0,0,0);
    glVertex3d(1,0,0);
    glVertex3d(0,0,0);
    glVertex3d(0,1,0);
    glVertex3d(0,0,0);
    glVertex3d(0,0,1);
    glEnd();
    //  Label axes
    glRasterPos3d(1,0,0);
    Print("X");
    glRasterPos3d(0,1,0);
    Print("Y");
    glRasterPos3d(0,0,1);
    Print("Z");
    //  Display parameters
    glWindowPos2i(5,5);
    Print("View Angle=%d,%d  %s",th,ph,text[mode]);
    //  Flush and swap
    glFlush();
    glutSwapBuffers();
} 
```

但是，我无法获得正确的吸引子。我相信我的`x`, `y`,等式`z`是正确的。我只是不确定如何以正确的方式显示它以获得正确的吸引子。谢谢你的帮助。以下是我的程序目前正在推出的内容：

![在此处输入图像描述](../Images/d70e5045d496a5534b8f7baedd0a615d.png)你好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:07:56.320

好的，所以我遇到了这个问题，您想做一些事情，首先，当您去绘制点时，`glVertex4f()`您想要将其更改为**glVertex3f**或将您的 w 值更改为 1。使用**glVertex3f**它会将 w 设置为默认为 1。w 值改变了点的缩放比例，所以你最终会得到一些疯狂的数字，i 大约为 50000。

其次，在修复该问题后，您会发现这些值超出了您的可视范围，因此您需要将其按比例缩小。我会在你画点的时候这样做，所以在你的情况下我会使用`glVertex3f(x*.05,y*.05,z*.05)`. 如果 .05 太大或太小，请调整它以满足您的需要。

最后确保您的 dt 值是 0.001，并且 x、y 和 z 的起点应该在 1 左右。

然后理想情况下，您希望将所有这些点放在一个数组中，然后读取该数组以绘制您的点，而不是每次调用 display.xml 时都进行计算。所以在别处进行计算，然后将点发送到显示。希望这有帮助。

# c# - 上传文件到 FTP 服务器

> ID：12507057
> 
> 赞同：1
> 
> 时间：2012-09-20T06:22:40.970
> 
> 标签：c#, c#-4.0, ftp, c#-3.0, sftp

我试图将文件 ulploade 到和 ftp 服务器，但是当我运行该方法时，它只上传 2 个文件然后停止。它停在这条线上

```
Stream uploadStream = reqFTP.GetRequestStream(); 
```

当我前两次到达这条线时，程序检查我的证书然后继续，但第三次它停止并且永远不会继续检查我的证书。

这是完整的代码：

```
public void UploadLocalFiles(string folderName)
        {
            try
            {

                string localPath = @"\\localFolder\" + folderName;
                string[] files = Directory.GetFiles(localPath);
                string path;            

                foreach (string filepath in files)
                {
                    string fileName = Path.GetFileName(filepath);
                    reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://serverIP/inbox/"+fileName));
                    reqFTP.UsePassive = true;
                    reqFTP.UseBinary = true;
                    reqFTP.Credentials = new NetworkCredential("username", "password");
                    reqFTP.EnableSsl = true;
                    ServicePointManager.ServerCertificateValidationCallback = Certificate;
                    reqFTP.Method = WebRequestMethods.Ftp.UploadFile;

                    FileInfo fileInfo = new FileInfo(localPath +@"\"+ fileName);
                    FileStream fileStream = fileInfo.OpenRead();

                    int bufferLength = 2048;
                    byte[] buffer = new byte[bufferLength];

                    Stream uploadStream = reqFTP.GetRequestStream();
                    int contentLength = fileStream.Read(buffer, 0, bufferLength);

                    while (contentLength != 0)
                    {
                        uploadStream.Write(buffer, 0, bufferLength);
                        contentLength = fileStream.Read(buffer, 0, bufferLength);
                    }
                }

            }
            catch (Exception e)
            {
                Console.WriteLine("Error in GetLocalFileList method!!!!!" + e.Message);
            }

        } 
```

正如我所说，当我到达 uloadStream 代码时，它会检查我的证书，这是我的证书方法

```
 public bool Certificate(Object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors errors)
        {
            { return cert.Issuer == "myCertificate"; }
        } 
```

有没有办法只连接一次ftp服务器，做一次证书并保持会话？因为每次我想上传或下载文件时，我都会连接并验证每个文件的证书..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:08:44.430

只需在应用程序的入口点添加这一行：

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:00:45.433

您可能达到了[ServicePoint.ConnectionLimit 属性](http://msdn.microsoft.com/en-us/library/system.net.servicepoint.connectionlimit.aspx)的默认连接限制，即`2`. [`FtpWebRequest`](http://msdn.microsoft.com/en-us/library/8exfzxft.aspx)有一个[`ServicePoint`](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.servicepoint.aspx)可以调整的属性。`uploadStream`上传完成后，您需要立即关闭。

# c++ - 使用 SFINAE 计算不同元素的大小

> ID：12507058
> 
> 赞同：2
> 
> 时间：2012-09-20T06:22:45.093
> 
> 标签：c++, templates, metaprogramming, sfinae

### 介绍

我刚刚开始阅读和研究 SFINAE。为了提高我的理解力，我开始自己尝试一些事情。

所以我一直想知道一个有用但简单的方法来使用 SFINAE 强大的技巧，我最终想到了一组函数来计算给定类型占用多少字节；只要我们处理简单的类型，解决方案就很简单：

```
template <typename T> size_t SizeOf(const T &t)
{
    return sizeof(T);
}; 
```

这种幼稚的近似值将得到任何东西的大小：1 代表`char`，可能 4 代表`int`，希望 4 代表`char[4]`以及任何用于`class PrettyAwesome`或`struct AmazingStuff`包括填充字节的东西。但是，这种类型管理的动态内存呢？

所以我会检查给定的类型是否是指针类型，那么总大小将是指针的大小加上指向内存的大小（如果有的话）。

```
template <typename T> size_t SizeOf(const T &*t)
{
    size_t Result = sizeof(t);

    if (t)
    {
        Result += sizeof(T);
    }

    return Result;
}; 
```

是的，在这一点上似乎根本不需要 SFINAE，但是，让我们考虑一下容器。`SizeOf`a 容器必须是其每个`sizeof(container_type)`元素的大小之和的总和，这就是 SFINAE 进入的地方：

```
template <typename T> size_t SizeOf(const T &t)
{
    size_t Result = sizeof(t);

    for (T::const_iterator i = t.begin(); i != t.end(); ++i)
    {
        Result += SizeOf(*i);
    }

    return Result;
}; 
```

在上面的代码中，检测 tye`T`类型是否`const_iterator`需要 a ，并且容器是一个映射，也需要对 pair 的特化。

### 问题

最后，问题从这里开始：**我尝试了什么，遇到了什么问题？**

```
#include <type_traits>
#include <string>
#include <map>
#include <iostream>
#include <vector>

// Iterable class detector
template <typename T> class is_iterable
{
    template <typename U> static char has_iterator(typename U::const_iterator *);
    template <typename U> static long has_iterator(...);

    public:
    enum
    {
        value = (sizeof(has_iterator<T>(0)) == sizeof(char))
    };
};

// Pair class detector
template <typename T> class is_pair
{
    template <typename U> static char has_first(typename U::first_type *);
    template <typename U> static long has_first(...);
    template <typename U> static char has_second(typename U::second_type *);
    template <typename U> static long has_second(...);

    public:
    enum
    {
        value = (sizeof(has_first<T>(0)) == sizeof(char)) && (sizeof(has_second<T>(0)) == sizeof(char))
    };
};

// Pointer specialization.
template <typename T> typename std::enable_if<std::is_pointer<T>::value, size_t>::type SizeOf(const T &aValue)
{
    size_t Result = sizeof(aValue);

    if (aValue)
    {
        Result += sizeof(T);
    }

    return Result;
}

// Iterable class specialization.
template <typename T> typename std::enable_if<is_iterable<T>::value, size_t>::type SizeOf(const T &aValue)
{
    size_t Result = sizeof(aValue);

    for (T::const_iterator I = aValue.begin(); I != aValue.end(); ++I)
    {
        Result += SizeOf(*I);
    }

    return Result;
}

// Pair specialization.
template <typename T> typename std::enable_if<is_pair<T>::value, size_t>::type SizeOf(const T &aValue)
{
    return SizeOf(aValue.first) + SizeOf(aValue.second);
}

// Array specialization.
template <typename T> typename std::enable_if<std::is_array<T>::value, size_t>::type SizeOf(const T &aValue)
{
    size_t Result = sizeof(aValue);

    for (T *I = std::begin(aValue); I != std::end(aValue); ++I)
    {
        SizeOf(*I);
    }

    return Result;
}

// Other types.
template <typename T> typename std::enable_if<std::is_pod<T>::value, size_t>::type SizeOf(const T &aValue)
{
    return sizeof(aValue);
}

int main(int argc, char **argv)
{
    int Int;
    int *IntPtr = &Int;
    int twoints[2] = {0, 0};
    int *twointpointers[2] = {IntPtr};
    std::string SO("StackOverflow");
    std::wstring WSO(L"StackOverflow");
    std::map<std::string, char> m;
    std::vector<float> vf;

    m[SO] = 'a';

    std::cout << "1: " << SizeOf(Int) << '\n';
    // std::cout << "2: " << SizeOf(IntPtr) << '\n';
    // std::cout << "3: " << SizeOf(twoints) << '\n';
    // std::cout << "4: " << SizeOf(twointpointers) << '\n';
    std::cout << "5: " << SizeOf(SO) << '\n';
    std::cout << "6: " << SizeOf(WSO) << '\n';
    std::cout << "7: " << SizeOf(m) << '\n';
    std::cout << "8: " << SizeOf(vf) << '\n';

    return 0;
} 
```

上面的代码产生这个输出：

```
1: 4
5: 45
6: 58
7: 66
8: 20 
```

1.  如果我取消注释带有 2、3 和 4 输出的行，编译器会显示“*模糊调用*”错误。我真的以为输出 2 将使用`is_pointer`专业化，而输出 3 和 4 将使用`is_array`专业化。好吧，我错了，但我不知道**为什么**。

2.  我对获取容器总大小的方式不满意，我认为迭代所有项目并`SizeOf`为每个项目调用是一个不错的选择，但不是所有容器，`std::basic_string`这样做`sizeof(container) + sizeof(container::value_type) * container.size()`会更快，但我无法意识到**如何专攻`basic_string`**。

3.  谈到*检测类*（比如检测可迭代和配对的类），在一些关于 SFINAE 的[博客文章](http://debugfailure.wordpress.com/2009/10/06/understanding-sfinae/)和网络示例中，我看到这是创建 a`true_type`和`false_type` `typedef`s 的常见做法，通常定义为`char`and `char[2]`; 但我发现有些作者使用`char`and `long`as`true_type`和`false_type`. **任何人都知道哪一个是最佳实践或*最标准*的一个**？

请注意，我不是在寻找诸如*为什么不尝试“此库”或“此工具”之*类的答案，我的目标是练习和理解 SFINAE，欢迎提供任何线索和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:35:11.637

关于问题 #3，我认为在 C++11 中，使用它[`decltype`](http://en.cppreference.com/w/cpp/language/decltype)而不是`sizeof`获取诸如and之类的[整数常量](http://en.cppreference.com/w/cpp/types/integral_constant)要干净得多（也更清楚） 。`std::true_type``std::false_type`

例如，您的`is_iterable`：

```
#include <type_traits> // std::true_type, std::false_type

// Iterable class detector
template <typename T> class is_iterable {
  template <typename U> static std::true_type test(typename U::const_iterator *);
  template <typename U> static std::false_type test(...);

public:
   // Using decltype in separate typedef because of gcc 4.6 bug:
   // http://gcc.gnu.org/bugzilla/show_bug.cgi?id=6709
   typedef decltype(test<T>(0)) result_type;
   static const bool value = result_type::value;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:50:36.697

1.您应该阅读 C++11 中的 POD 概念。POD 类型元素的数组或指向 POD 类型元素的指针是 POD 类型 [http://en.cppreference.com/w/cpp/concept/PODType](http://en.cppreference.com/w/cpp/concept/PODType)

例如以下代码将编译良好[http://liveworkspace.org/code/81627f5acb546c1fb73a69c45f7cf8ec](http://liveworkspace.org/code/81627f5acb546c1fb73a69c45f7cf8ec)

2.这样的事情可以帮助你

```
template<typename T>
struct is_string
{
   enum
   {
      value = false
   };
};

template<typename Char, typename Traits, typename Alloc>
struct is_string<std::basic_string<Char, Traits, Alloc>>
{
   enum
   {
      value = true
   };
}; 
```

功能

```
// Iterable class specialization.
template <typename T> typename std::enable_if<is_iterable<T>::value && !is_string<T>::value, size_t>::type SizeOf(const T &aValue)
{
    size_t Result = sizeof(aValue);

    for (typename T::const_iterator I = aValue.begin(); I != aValue.end(); ++I)
    {
        Result += SizeOf(*I);
    }

    return Result;
}

template <typename T> typename std::enable_if<is_string<T>::value, size_t>::type SizeOf(const T& aValue)
{
   return sizeof(aValue) + sizeof(typename T::value_type) * aValue.length();
} 
```

3.标准中没有信息，`sizeof(long)`不应该等于`sizeof(char)`，但`sizeof(char)`不能等于`sizeof(char[2])`，所以，我认为第二种变体更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:43:06.230

1.  您对指针等的“专业化”实际上不是专业化。它们是超载的。

2.  编译器首先执行重载决议，然后才检查特化。形式上没有“模棱两可的专业化”之类的东西。您的案例 2,3 和 4 在重载解决方案中已经失败，正是因为您没有专长。

3.  重载解决方案仅取决于参数类型。您的重载仅在返回类型上有所不同。当然，某些重载可能会被禁用，但您需要禁用除一个之外的*所有*重载。目前，POD 阵列支持您的 POD 和阵列重载。

4.  对于容器，更好的解决方案可能是使用`Container.size()`.

5.  `char[2]`是首选，因为`sizeof(long)`根据标准可以为 1。

一个没有问的问题，无论如何我都会回答，是“我应该如何编写数组重载”？诀窍是对数组的引用：

```
template<typename T, unsigned N> 
constexpr size_t SizeOf(const T (&aValue)[N])
{
  // return N * sizeof(T); If you want to do the work yourself
  return sizeof(aValue); // But why bother?
} 
```

# ios - 在应用程序之间共享信息

> ID：12507069
> 
> 赞同：0
> 
> 时间：2012-09-20T06:24:12.997
> 
> 标签：ios

有两种应用。他们如何共享信息？我们可以为他们使用一个通用的数据库吗？也许我们可以将参数从一个应用程序传递到另一个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:32:08.473

您不能直接共享任何资源；每个应用程序都在自己的“沙箱”中，无法访问任何其他应用程序的资源。

但是，您可以通过多种方式在应用程序之间来回发送数据。

1.  如果您希望所有内容都保留在设备上，那么您可以`application:openURL:sourceApplication:annotation:`在两个应用程序中实现并为两者提供自定义 URL 处理程序。用户将在应用程序相互启动时体验设备在应用程序之间的切换。

2.  如果您愿意使用服务器和互联网连接，那么两个应用程序可以读取和写入相同的服务器资源。当每个应用程序启动或变为活动状态时，它可以检查服务器上的更新信息。

# java - 通过Java类声明一个OUT参数

> ID：12507072
> 
> 赞同：0
> 
> 时间：2012-09-20T06:24:25.310
> 
> 标签：java, oracle, spring, stored-procedures

我在 oracle 中创建了一个用户类型

```
create or replace type my_array_list 
is
table of 
varchar2(100); 
```

现在我编写了一个具有如下输出参数的程序：

```
 type my_list_rec IS record
   (
      best_friends my_array_list,
      good_friends my_array_list
   );

   type my_list_array is table of my_list_rec;

  procedure friends_diff_prc(my_name in varchar2,
                                     my_friend_list_o   out my_list_array ,
                                     rc_o                  out number); 
```

现在我通过我正在扩展的 JAVA 类调用这个过程`StoredProcedure`。

```
// Declare output parameter
 declareParameter(new SqlOutParameter(
                PropertiesReader
                        .getPropertyValue(FRIENDSConstants.GET_FRIEND_LIST_OUT),
                OracleTypes.ARRAY,"MYDB.MY_ARRAY_LIST")); 
```

但是当我调用 proc 时，我得到了

```
org.springframework.jdbc.BadSqlGrammarException: 
```

我是否正确声明了 OUT 参数？以及如何解析该输出参数的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:56:40.797

你的例子非常令人困惑。您有目的地命名了两种非常不同但名称非常相似的类型：

*   `my_array_list`是一种`SQL`类型：VARCHAR2 的嵌套表
*   `my_list_array`是一个`PL/SQL`类型：一个记录表`my_array_list`

PL/SQL 和 SQL 类型在物理上非常不同。例如，[PL/SQL 类型不能直接通过`jdbc`](https://stackoverflow.com/questions/1399750/java-passing-array-in-oracle-stored-procedure).

此外，这两种类型在逻辑上非常不同：我无法想象将第一种类型映射到第二种类型。第二种类型是第一种类型的对象的集合，你永远无法交换这两种类型。

我建议如下：

1.  不要命名与令人困惑的相似名称非常不同的类型。
2.  使用围绕 PL/SQL 过程的 SQL 对象创建一个包装过程，以便能够从 jdbc 调用它。
3.  有关使用 SQL 表作为 OUT 参数调用过程的示例，请参见此 SO：[使用 JDBC 从存储过程中获取 Oracle 表类型](https://stackoverflow.com/questions/6410452/fetch-oracle-table-type-from-stored-procedure-using-jdbc)。

# java - while 循环 - 偶数之和及其平均值

> ID：12507075
> 
> 赞同：0
> 
> 时间：2012-09-20T06:25:01.830
> 
> 标签：java

[http://pastebin.com/w8KntkE6#](http://pastebin.com/w8KntkE6#)

```
package javaapplication9;

import java.text.DecimalFormat;
import java.util.Scanner;

public class JavaApplication9 {
    public static void main(String[] args) {
        // TODO code application logic here
        {
            int sum = 0, num, count = 0;
            double average;

            Scanner scan = new Scanner(System.in);

            System.out.print("Enter an integer (0 to quit): ");
            num = scan.nextInt();

            while (num >= 0) // sentinel num of 0 to terminate loop
            {
                if (num % 2 == 0) {
                    count++;
                    sum += num;
                    System.out.println("The sum so far is " + sum);

                    System.out.print("Enter an integer (0 to quit): ");
                    num = scan.nextInt();
                } else if (num % 2 != 0) {
                    continue;
                }

                System.out.println();

                if (count == 0) {
                    System.out.println("No nums were entered.");
                } else {
                    average = (double)sum / count;

                    DecimalFormat fmt = new DecimalFormat("0.###");
                    System.out.println("The average is " + fmt.format(average));
                }
            }

        }
    }
} 
```

代码执行并将偶数相加。但是，当输入奇数时，它会返回错误或中断。我希望它忽略任何奇数。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:31:54.273

我错过了什么，或者`nextInt()`当你有一个奇数时你错过了什么？既然在 if 即使你有`num = scan.nextInt();`。当 num 是奇数时，你不会。改变

```
else if (num % 2 != 0){
    continue;
} 
```

至

```
else if (num % 2 !=0){
    num = scan.nextInt();
    continue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:28:46.787

你`continue`在奇数上循环而不修改`num`- 看起来它应该无限循环给我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:42:37.650

在 continue 语句之前添加以下代码。我希望它能正常工作。

```
System.out.print("Enter an integer (0 to quit): ");
            num = scan.nextInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T06:56:52.333

尝试这个。我不太确定你什么时候想打印平均值，如果你想在最后打印它，你可以将它移出 while 循环。

```
public static void main(String[] args) {
    // TODO code application logic here
    {
        int sum = 0, num, count = 0;
        double average;

        Scanner scan = new Scanner(System.in);

        System.out.print("Enter an integer (0 to quit): ");

        while ((num = scan.nextInt())> 0) // sentinel num of 0 to terminate loop
        {
            if (num % 2 == 0){
                count++;

                sum += num;
                System.out.println("The sum so far is " + sum);
                if (count == 0) {
                    System.out.println("No nums were entered.");
                } else {
                    average = (double) sum / count;

                    DecimalFormat fmt = new DecimalFormat("0.###");
                    System.out.println("The average is " + fmt.format(average));
                }
            }

            System.out.print("Enter an integer (0 to quit): ");

        }
        System.out.println("end");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T06:36:57.453

改成：

```
package javaapplication9;

import java.text.DecimalFormat;
import java.util.Scanner;

public class JavaApplication9 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    {
        int sum = 0, num, count = 0;
        double average;

        Scanner scan = new Scanner(System.in);

        System.out.print("Enter an integer (0 to quit): ");
        num = scan.nextInt();

        while (num >= 0) // sentinel num of 0 to terminate loop
        {
            if (num % 2 == 0)
            {
                count++;

                sum += num;
                System.out.println("The sum so far is " + sum);

                System.out.print("Enter an integer (0 to quit): ");
                num = scan.nextInt();            

               if (count == 0) {
                 System.out.println("No nums were entered.");
               } else {
                 average = (double) sum / count;
                 DecimalFormat fmt = new DecimalFormat("0.###");
                 System.out.println("The average is " + fmt.format(average));
               }
          }              
          num = scan.nextInt();               
      }
} 
```

# linux - 处理演讲者笔记的 Linux PDF 阅读器

> ID：12507081
> 
> 赞同：2
> 
> 时间：2012-09-20T06:25:25.497
> 
> 标签：linux, pdf, ubuntu, presentation

我尝试了几个版本（adobe、evince 和 foxit），但似乎没有人处理 pdf 演示文稿中的演讲者笔记。

编辑：例如 Google drive 演示文稿或 microsoft office powerpoint 允许插入显示在单独窗口中的演讲者笔记，例如，当主要演示文稿显示在 datashow 屏幕中时，可以将其拖到笔记本电脑屏幕上，两者都绑定到彼此之间，当一个人在大屏幕上切换到一张新幻灯片时，其对应的笔记就会显示在笔记本电脑的屏幕上。

# javascript - asp：按钮单击事件不会触发

> ID：12507087
> 
> 赞同：1
> 
> 时间：2012-09-20T06:25:38.197
> 
> 标签：javascript, asp.net, button, onclick

我目前正在开发的这个网站有问题。我试图在外部 js 文件中的一系列代码之后触发按钮的 Click 事件。请在下面查看我的代码：

.ASPX：

```
<script type="text/javascript">
    var btn = $("#<%=btnRefresh.ClientID%>");
</script>

...

<asp:Button ID="btnRefresh" name="btnRefresh" runat="server" Visible="false" Text="btnRefresh" onclick="btnRefresh_Click" />

<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <asp:GridView ID="myGrd" runat="server">...</GridView>
    <Triggers>
       <asp:AsyncPostBackTrigger ControlID="btnRefresh" EventName="Click" />
    </Triggers>
<asp:UpdatePanel> 
```

.ASPX.CS：

```
protected void btnRefresh_Click(object sender, EventArgs e)
{
    myGrd.DataSource = null;
    myGrd.DataSource = GetData();
    myGrd.DataBind();
} 
```

.JS：

```
function Refresh() {
    if (btn) {
        btn.click();
    }
    else {
        alert('false');
    }
} 
```

基本上，我想要实现的是：

1.  能够在页面上实现我的添加、编辑、删除。（现在运行）
2.  调用外部 JS 文件中的方法以显示添加、编辑、删除的弹出框。
3.  成功后，调用该`Refresh()`方法并仅刷新 gridview。
4.  `Refresh()`方法使用`btnRefresh_Click`来自 .aspx.cs 页面的事件。

我只是为此目的使用了该按钮，因为我不知道我还有什么其他选择。

现在我的问题是这个。我的代码能够`btn`从 .aspx 页面声明我的变量。当它在外部 .js 文件中执行时，我的`btn`变量如下所示：

![在此处输入图像描述](../Images/74418112ca22713e75ae77498009a517.png)

编译器通过`btn.click()`应该`btnRefresh_Click`从代码隐藏触发事件的行。然而，它并没有火起来。

我在这里错过了什么吗？请帮我。我已经被困在这里好几个小时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:05:27.863

您是否尝试过在需要时和文档完全加载后找到 btn 对象，而不是在文档完全加载之前获取它？

改变：

```
<script type="text/javascript">
    var btn = $("#<%=btnRefresh.ClientID%>");
</script> 
```

到

```
<script type="text/javascript">
    var btnid = "#<%=btnRefresh.ClientID%>";
</script> 
```

和你的js：

```
 function Refresh() {
     var btn  = $(btnid);
        if (btn) {
            btn.click();
        }
        else {
            alert('false');
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:41:17.207

您正在设置按钮`Visible="false"`

```
<asp:Button ID="btnRefresh" name="btnRefresh" runat="server" Visible="false" 
```

设置它**不会**在屏幕上呈现按钮。它会从标记中完全删除元素。所以不能附加任何事件。而不是这个尝试设置`s**tyle="display:none"`..这样做会在屏幕上呈现按钮但不会显示它..事件也将附加到元素..

更新 ::: 尝试在 Document.Ready 函数中访问您的 btn。这确保您在 DOM 中可用时添加按钮**

```
<script type="text/javascript">
   $(function() {
       var btn = $("#<%=btnRefresh.ClientID%>");
    });
</script> 
```

如果可能的话，你能提供整个标记和所需的代码。你在哪里调用刷新函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:48:09.610

我会选择最简单的事情 - 问题不是使按钮不可见，而是有一个不可见的按钮，可以从 javascript 中单击，并让按钮调用它的事件处理程序。我有与 OP 相同的技巧：通过设置它的 style=display:none; 使按钮永久不可见。以这种方式，按钮存在于客户端页面上，我的 JS 单击它，然后服务器上的按钮事件处理程序在回发时被调用。在我设置之前，这在 Firefox 中无法正常工作`UseSubmitBehavior=False`。现在它可以在 IE 和 FF 中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T06:59:17.447

我想您在客户端 onclick 看到的不是您在服务器端 OnClick 声明的那个。

客户端的 onclick 等于服务器端的 OnClientClick。

更新：

您仍然可以使用 btn.click() 调用服务器端点击函数；（与您使用的相同），但要实现这一点，您必须首先将控件的 Visible 属性设置为 true。当您不将其设置为 true 时，控件甚至不会呈现给客户端，并且不会为其维护任何状态。

如果您不想最初显示按钮，而不是设置 Visible = "False" 您可以编写 Style="visibility:hidden";

因此，按钮的 aspx 标记应如下所示

```
<asp:Button ID="btnRefresh" name="btnRefresh" runat="server" Style="visibility:hidden" Text="btnRefresh" onclick="btnRefresh_Click" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T07:08:41.240

**将AsynPostBackTrigger**更改为**PostBackTrigger**这应该可以工作

```
 <asp:Button ID="btnRefresh" name="btnRefresh" runat="server" Visible="false"    Text="btnRefresh" onclick="btnRefresh_Click" />

<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
<asp:GridView ID="myGrd" runat="server">...</GridView>
<Triggers>
   <asp:PostBackTrigger ControlID="btnRefresh" EventName="Click" />
</Triggers> 
```

# javascript - 创建动态选项卡并从 url 加载数据不起作用

> ID：12507089
> 
> 赞同：3
> 
> 时间：2012-09-20T06:25:57.223
> 
> 标签：javascript, extjs

我创建了动态选项卡，但无法从 url 加载数据。

```
Ext.onReady(function() {

    var tabs = new Ext.TabPanel({
        region:'center',
        activeTab:0,
        margins: '5 5 5 0',

        resizeTabs:true, 
        minTabWidth: 115,
        items:[{ 
            title: 'Dashboard',
            contentEl: 'simple-form',
            closable:true
        }]

    });

    var viewport = new Ext.Viewport({
        layout:'border', 
        defaults: {
            collapsible: false,
            split: true
        },
        items: [{    
            title:'PSL Admin',
            region: 'north',
            contentEl: 'north', 
            margins: '5 5 5 5',
            split:false 
        },{
            title:'Navigation',
            collapsible: true, 
            region:'west',
            contentEl: 'west', 
            margins: '5 0 5 5',
            cmargins: '5 5 5 5',
            width: 175,
            minSize: 100,
            maxSize: 250 
        },

        tabs 
        ]

    });

    function addTab(){
       tabs.add({
        title: 'Bar',
        closable: true,
        plain: true,
        loader: {
            autoLoad:true,
            url :'test.html'
        }

        });

    }

    Ext.get('add').on('click', function(){
        addTab();
    });

}); 
```

每当我单击仅调用上述函数的按钮时，我都可以看到选项卡，但未加载内容。

谁能帮忙我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:39:42.453

> 假设您使用的是最新版本的 ExtJS 4.1

这是一个工作片段：

```
var tabs = Ext.create('Ext.tab.Panel', {
    width: 400,
    height: 400,
    renderTo: document.body,
    items: [{
        title: 'Foo'
    }]
});

tabs.add({
    title: 'Bar',
    closable: true,
    plain: true,
    loader: {
        autoLoad:true,
        url :'http://docs.sencha.com/ext-js/4-1/source/ComponentLoader.html#Ext-ComponentLoader'
    }

}); 
```

请注意，**无需**调用`show()`选项卡。这适用于 Windows 或其他浮动组件

我看不出您的代码不应该工作的任何原因。您可以通过将其放置在[ExtJS API 的示例窗口之一中来尝试自己剪断它](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel)

***更新***

我删除了一些部分并再次成功测试了此代码。只是猜测；您提供的网址无效。尝试使用绝对路径作为 url 只是为了测试目的，看看它是否有效。方法。

```
var tabs = new Ext.TabPanel({
    region:'center',
    activeTab:0,
    margins: '5 5 5 0',
    renderTo: Ext.getBody(),
    resizeTabs:true, 
    minTabWidth: 115,
    items:[{ 
        title: 'Dashboard',
        //contentEl: 'simple-form',
        closable:true
    }]

});

var addTab = function(){
   tabs.add({
    title: 'Bar',
    closable: true,
    plain: true,
    loader: {
        autoLoad:true,
        url :'http://docs.sencha.com/ext-js/4-1/source/ComponentLoader.html#Ext-ComponentLoade'
    }

    });

}

addTab(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:58:37.070

如果您在 url 中引用的那个 HTML 文件中使用任何 javascripts 代码，那么您必须在 loader 中使用 scripts: true 配置。我假设您使用的是 extjs4.1 及更高版本来发布此答案。

我们的代码必须是这样的，

```
 var tabs = new Ext.TabPanel({
    region:'center',
    activeTab:0,
    margins: '5 5 5 0',
    renderTo: Ext.getBody(),
    resizeTabs:true, 
    minTabWidth: 115,
    items:[{ 
      title: 'Dashboard',
     //contentEl: 'simple-form',
     closable:true
    }]

   });

   var addTab = function(){
   tabs.add({
    title: 'Bar',
   closable: true,
   plain: true,
   loader: {
    autoLoad:true,
      url :'http://docs.sencha.com/ext-js/4-1/source/ComponentLoader.html#Ext-   ComponentLoade',
      scripts: true,
    }

   });

  }

   addTab(); 
```

# php - 使用 PHP 更改存储在字符串中的输入值

> ID：12507092
> 
> 赞同：1
> 
> 时间：2012-09-20T06:26:22.127
> 
> 标签：php, preg-replace, str-replace

我有一个表单，允许用户将 HTML 表单的代码粘贴到 textarea 中。然后我将他们粘贴的表单存储在一个字符串中。

在我将该表单回显到我的页面模板之前，我想更改提交按钮的值。

目前我正在使用 jQuery 来执行此操作，但我想先在服务器端执行此操作。

这是我的 jQuery 代码：

```
 $("input[type='submit']").attr("value","my new value"); 
```

如何使用 PHP 在字符串中搜索该值并在打印表单之前将其切换出来？

更新：为了澄清，我正在尝试搜索一个字符串：

```
<input type="submit" value="old value" /> 
```

并将其替换为

```
<input type="submit" value="new value" /> 
```

字符串内部有一个完整的形式，如下所示：

```
$string = '<form>
<input type="text" value="any">
<input type="submit" value="old value">
</form>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:36:25.530

你可以这样做`DOMDocument`：

```
$dom = new DOMDocument;
$dom->loadHTML($form);
$xpath = new DOMXPath($dom);
$input = $xpath->query('//form/input[@type="submit"]')->item(0)->attributes;

foreach($input as $item){
    if($item->name == 'value'){
        $item->value = 'New Value';
    }
}

echo $dom->saveHTML(); 
```

# java - 在 vmware vfabric tc 服务器中部署 maven/spring 应用程序的异常

> ID：12507098
> 
> 赞同：3
> 
> 时间：2012-09-20T06:27:08.520
> 
> 标签：java, spring, maven-plugin, sts-springsourcetoolsuite, tcserver

[我和这里](https://stackoverflow.com/questions/6210757/java-lang-classnotfoundexception-org-springframework-web-context-contextloaderl)有同样的问题。我尝试按照第一个答案中的建议在部署程序集中添加 Maven 依赖项，但随后出现了更多错误。它不知道图书馆。

这是一些日志（许多类都会发生同样的异常）：

```
ADVERTENCIA: No puedo cargar la clase [javax.interceptor.AroundInvoke] para revisar contra la anotación  @HandlesTypes de uno o más ServletContentInitializers. 
java.lang.ClassNotFoundException: javax.interceptor.AroundInvoke
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:558)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:468)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:389)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:334)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
20-sep-2012 8:16:03 org.apache.catalina.startup.ContextConfig checkHandlesTypes
ADVERTENCIA: No puedo cargar la clase [javax.interceptor.ExcludeClassInterceptors] para revisar contra la anotación  @HandlesTypes de uno o más ServletContentInitializers. 
java.lang.ClassNotFoundException: javax.interceptor.ExcludeClassInterceptors
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:558)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:468)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:389)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:334)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
20-sep-2012 8:16:03 org.apache.catalina.startup.ContextConfig checkHandlesTypes 
```

我将 STS 与 VMWare vFabric tc Server 一起使用，但我尝试过使用 tomcat，结果是一样的。我真的不知道该怎么办......另外，一些曾经正确部署的应用程序也会发生这种情况。我曾在同事的 STS 中尝试过同一个项目，它可以工作。我比较了两种配置，但没有发现差异。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:47:41.360

在对比了我同事的 STS 和我的每个配置项后，我们发现我必须安装“Maven Integration for WTP”。我通过添加软件站点[http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)然后从那里下载软件来做到这一点。请注意，此包依赖于连接器“m2e connector for mavenarchiver pom properties”，该连接器可以在 Window > Preferences > Maven > Discovery > Open Catalog 中找到，因此必须先安装此连接器，否则会抛出错误尝试安装“用于 WTP 的 Maven 集成”。

# java - Java程序读取文本文件

> ID：12507101
> 
> 赞同：1
> 
> 时间：2012-09-20T06:27:28.083
> 
> 标签：java

我有一个文本文件

```
vinoth   5001   chennai    programmer
ramesh   7755   madurai    tester
suresh   7452   namakal    designer
salim    4652   salem      programmer 
```

我想找到他们的名称，但想将他们的其他详细信息保存在一个数组中。我怎样才能做到这一点？有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:33:07.320

*   逐行读取文件
*   调用`String.split`将不同的信息拆分成一个数组
*   您可以将这些信息存储在一个`Map`其键是用户名`vinoth`和值是您刚刚收到的数组中`String.split`
*   最好将这些信息存储在一个对象中，该对象代表具有您想要的属性的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:30:06.103

*   用于`String.substring(start, end)`获取行的相关部分。
*   调用`trim()`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:34:13.293

使用缓冲读取器读取每一行，然后执行以下操作：

```
HashMap<String, String> values = new HashMap<String, String>;

// read the line here
String line = ...;
String strings[] = line.split(" ");
String designation = strings[3];
values.put(strings[0], strings[1], strings[2]); 
```

# c# - C# Linq List 比较和更新列表

> ID：12507103
> 
> 赞同：3
> 
> 时间：2012-09-20T06:27:35.713
> 
> 标签：c#, linq

我有 2 个包含不同类型的列表。一个是a `string[]`，另一个是a `List<SelectListItem>`。

`SelectListItem`（它在mvc中）：

```
public string Text {get;set;}
public string Value {get;set;}
public bool Selected {get;set;} 
```

我`string[]`的只是包含一些文本值。

我想要做的是，获取 中的任何内容`string[]`，然后设置`"Selected = true"`任何`Value`匹配项和`"Selected = false"`不匹配项。

所以可以说我`string[]`的是：

```
Test1
Test2
Test3 
```

我`List<SelectListItem>`的是：

```
new SelectListItem { Text = "Testing", Value = "Test1", Selected = false },
new SelectListItem { Text = "Testing", Value = "Test4", Selected = true } 
```

在上面`List<SelectListItem>`，我有一场比赛。所以我想做的是为该特定条目设置 Selected = true ，以便我最终得到：

```
new SelectListItem { Text = "Testing", Value = "Test1", Selected = true },
new SelectListItem { Text = "Testing", Value = "Test4", Selected = false } 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:31:06.510

```
foreach(var i in selectListItemList)
    i.Selected = stringArray.Contains(i.Value); 
```

或使用`List.ForEach`：

```
selectListItemList.ForEach(i => i.Selected = stringArray.Contains(i.Value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:31:46.820

怎么样

```
list.ForEach(x => x.Selected = stringarray.Contains(x.Value)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:33:46.097

```
var items = SelectListItems.Where(p=>stringArray.Contains(p));;
foreach(var item in items)
    item.Selected=true; 
```

# python - Argparse 无法识别且处理不正确

> ID：12507104
> 
> 赞同：3
> 
> 时间：2012-09-20T06:27:37.267
> 
> 标签：python, argparse

我在使用 argparse 时遇到了一些问题。我想有一组可以在命令行上定义的名称，这将影响程序的行为。我尝试了以下代码段：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("allon", action='store_true', default = False,
                    help="Toggles all output pins to ON.")
parser.add_argument("alloff",action='store_true',
                    help="Toggles all output pins to OFF.")
parser.add_argument("cont", action='store_true',
                    help="Toggles all output pins continously on and off.")
args = parser.parse_args()

if args.allon:
   do_allon()
elif args.alloff:
    do_alloff()
.... 
```

但代码的行为超出了预期。我不想对这些选项使用'--'，因为我想调用我的代码`git status`（没有前导'--'）。

首先，如果我在没有参数的情况下调用代码，所有参数都设置为 True，而如果没有给出，我希望它们设置为 False。预期的行为如下：调用时

```
python code.py 
```

我想要`allon, alloff`并被`cont`设置为`False`, 而当调用为

```
python code.py alloff 
```

我想要`allon`并`cont`成为`False`而被`alloff`设置为`True`。

其次，当我打电话给例如`python code.py allon`我得到

```
code.py: error: unrecognized arguments: allon 
```

我根本不明白。我知道如何使用 optparse，但是非常感谢您对 argparse 的帮助以使上述代码段正常工作。

谢谢亚历克斯

PS if 循环只是教育性的，实际上并没有以这种方式实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T07:33:51.903

当您看到像`git status`,`git commit`等命令模式时，我们正在谈论[子命令](http://docs.python.org/library/argparse.html#sub-commands)。要创建子命令， argparse 允许您使用*sub-parsers*，它们本质上就像主解析器（采用命令行开关等）。

像这样定义它们：

```
import argparse
parser = argparse.ArgumentParser()
subparsers = parser.add_subparsers(help='sub-command help')

allon_parser = subparsers.add_parser('allon',
    help='Toggles all output pins to ON.')
allon_parser.set_defaults(func=do_allon)

alloff_parser = subparsers.add_parser('alloff',
    help="Toggles all output pins to OFF.")
alloff_parser.set_defaults(func=do_alloff)

cont_parser = subparsers.add_parser('cont',
    help="Toggles all output pins continously on and off.")
cont_parser.set_defaults(func=do_cont)

args = parser.parse_args()
# Call the associated `func` function
args.func() 
```

我已将一个函数与每个子解析器 ( `set_defaults(func=...)`) 相关联，因此该`args`结构将具有`func`指向已定义函数之一的属性。我们只需要调用它。

输出`--help`：

```
usage: PROG [-h] {cont,alloff,allon} ...

positional arguments:
  {cont,alloff,allon}  sub-command help
    allon              Toggles all output pins to ON.
    alloff             Toggles all output pins to OFF.
    cont               Toggles all output pins continously on and off.

optional arguments:
  -h, --help           show this help message and exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:46:17.427

选项通常使用`-`短参数（1 个字符）的前导或`--`长参数的前导来指定。

因此，你应该给你的可选参数两个前导破折号：

```
import argparse
parser = argparse.ArgumentParser()
# Note that `default=False` is unnecessary since it's implied by `store_true`.
parser.add_argument("--allon", action='store_true',
                    help="Toggles all output pins to ON.")
parser.add_argument("--alloff",action='store_true',
                    help="Toggles all output pins to OFF.")
parser.add_argument("--cont", action='store_true',
                    help="Toggles all output pins continously on and off.")
args = parser.parse_args()

if args.allon:
    do_allon()
elif args.alloff:
    do_alloff()
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:00:52.360

如果你想让你的函数的第一个参数是强制性的，并限制可用的选择，这样做：

```
import argparse
parser = argparse.ArgumentParser()

parser.add_argument("action", action="store", choices=['allon', 'alloff', 'cont'])

args = parser.parse_args()

if args.action == 'allon':
    print 'allon'
elif args.action == 'alloff':
    print 'alloff' 
```

示例用法：

```
$ python req_argparse.py allon
allon
$ python req_argparse.py alloff
alloff
$ python req_argparse.py nope
usage: req_argparse.py [-h] {allon,alloff,cont}
req_argparse.py: error: argument action: invalid choice: 'nope' (choose from 'allon', 'alloff', 'cont') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T06:45:31.047

When options in `argparse`are optional flags, they should start with `--`like so:

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--allon", action='store_true', default = False,
                    help="Toggles all output pins to ON.")
parser.add_argument("--alloff",action='store_true',
                    help="Toggles all output pins to OFF.")
parser.add_argument("--cont", action='store_true',
                    help="Toggles all output pins continously on and off.")
args = parser.parse_args() 
```

如果我们再添加代码：

```
print args.allon, args.alloff, args.cont 
```

我们可以证明您的程序将具有所需的行为：

```
$ python test.py
False False False
$ python test.py --allon
True False False
$ python test.py --alloff
False True False
$ python test.py --cont
False False True
$ python test.py --allon --alloff --cont
True True True 
```

ETA：如果您想要一个与 git 的`status`, `add`,`commit`等等效的子命令，那么可选标志将不是实现它的正确方法。您应该改用[argparse 的`add_subparsers`功能](http://docs.python.org/dev/library/argparse.html#sub-commands)。

# c# - 从 XML 文件中读取数据？

> ID：12507107
> 
> 赞同：0
> 
> 时间：2012-09-20T06:27:58.533
> 
> 标签：c#, xml

您好我在读取 XML 文件的节点时遇到问题？我在 XML 中找不到子节点。此代码找不到节点。如果我改变：

```
XmlNodeList dataNodes = xmlDoc.SelectNodes("//Properties"); 
```

到

```
XmlNodeList dataNodes = xmlDoc.SelectNodes("//NewDataSet"); 
```

然后我得到两个节点返回我得到属性和请求数据，但我想要属性子节点。

有人可以告诉我为什么我看不到属性的子节点，请帮我找到它们。

* * *

这是我的 C# 代码。

```
if (File.Exists("C://Users//Shaun//Documents//Visual Studio 2010//Projects//LightStoneTestService//LightStoneTestService//FileTest//Testdo.xml")) //In bin and Debug
    {
    XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.Load("C://Users//Shaun//Documents//Visual Studio 2010//Projects//LightStoneTestService//LightStoneTestService//FileTest//Testdo.xml");

    XmlNodeList dataNodes = xmlDoc.SelectNodes("//Properties");

    foreach (XmlNode node in dataNodes)
      {
        int Count = 0;
        int Max = node.ChildNodes.Count;
        foreach (XmlNode childNode in node.ChildNodes) //For each child node in FieldData
         {
           if (ArrayProperties[Count].LightStoneTag == childNode.Name)
          {
            ArrayProperties[Count].Value = node.SelectSingleNode(ArrayProperties[Count].LightStoneTag).InnerText;
          }
           Count = Count + 1;
         }
      } 
```

* * *

这是我正在尝试读取属性中的所有节点的 XML 文件：

```
 <NewDataSet>
  <RequestData xmlns="RequestData">
    <Req_ID>fe0bc7ab-1dc9-4526-bd29-b522ff13e162</Req_ID>
  </RequestData>
  <Properties xmlns="Properties">
    <sr_id>19374149</sr_id>
    <prop_id>9841107</prop_id>
    <DEED_ID>21</DEED_ID>
    <PROPTYPE_ID>2</PROPTYPE_ID>
    <SS_ID>2315</SS_ID>
    <NAD_ID>3048001</NAD_ID>
    <property_type>SS</property_type>
    <PROVINCE>GA</PROVINCE>
    <MUNICNAME>CITY OF JOHANNESBURG</MUNICNAME>
    <DEEDTOWN>ALLENS NEK</DEEDTOWN>
    <SECTIONAL_TITLE>SS GREENHILLS</SECTIONAL_TITLE>
    <UNIT>15</UNIT>
    <ERF>627</ERF>
    <PORTION>0</PORTION>
    <BUYER_NAME>FOURIE MARION ROBB</BUYER_NAME>
    <FIRSTNAME>MARION</FIRSTNAME>
    <MIDDLENAME>ROBB</MIDDLENAME>
    <SURNAME>FOURIE</SURNAME>
    <PERSON_TYPE_ID>PP</PERSON_TYPE_ID>
    <BUYER_IDCK>7402110182087</BUYER_IDCK>
    <MUNIC_ID>74</MUNIC_ID>
    <PROV_ID>8</PROV_ID>
    <STREET_NUMBER>973</STREET_NUMBER>
    <STREET_NAME>MAIN</STREET_NAME>
    <STREET_TYPE>ROAD          </STREET_TYPE>
    <PO_CODE>1709</PO_CODE>
    <User_ID>2443598d-948b-4322-bd91-d39f57bec1b6</User_ID>
    <SS_Number>29</SS_Number>
    <SS_UnitNoFrom>1</SS_UnitNoFrom>
    <SS_UnitTo>26</SS_UnitTo>
    <Size>65</Size>
    <X>27.919578</X>
    <Y>-26.125565</Y>
    <SUBURB>ALLENS NEK</SUBURB>
    <Registrar>J</Registrar>
    <Title_Deed_No>ST28776/2004</Title_Deed_No>
    <Reg_Date>20040519</Reg_Date>
    <TownShip>ALLENS NEK</TownShip>
    <Purchase_Price>236500</Purchase_Price>
    <Purchase_Date>20031020</Purchase_Date>
    <Bond_Number>SB37369/2006</Bond_Number>
    <Township_alt>ALLEN'S NEK EXT 32</Township_alt>
    <RE>false</RE>
  </Properties>
</NewDataSet> 
```

* * *

**新零件**

我在提取内部文本时遇到问题，我的代码在上面的 foreach 中，我的应用程序不断中断：

```
ArrayProperties[Count].Value = node.SelectSingleNode(ArrayProperties[Count].LightStoneTag).InnerText; 
```

有人可以告诉我如何从 XML 文件中提取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:59:43.613

这是示例代码

加载文件的代码

```
private const string XML_FILE_NAME = "sample.xml";
public static XmlDocument LoadSampleXML()
    {
        XmlDocument oXmlDocument = null;
        try
        {

            oXmlDocument= new XmlDocument();
            oXmlDocument.Load(XML_FILE_NAME);
            return oXmlDocument;
        }
        catch (Exception ex)
        {
            return oXmlDocument;
        }
    } 
```

以下代码可用于获取子节点

```
 private const string XML_NODE_PROP = "Properties";
 XmlDocument oXmlDocument = null;
 oXmlDocument = LoadSampleXML();
 XmlNodeList oXMlNodeList = oXmlDocument.GetElementsByTagName(XML_NODE_PROP);

 foreach (XmlNode oXmlNodeItem in oXMlNodeList)
            {
               // DoSomething
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:41:52.937

我身边没有什么大的 XML 知识，但由于`Properties`它是 的子节点`NewDataSet`，我猜你首先必须得到`Properties`节点，然后你可能会得到你想要的节点。

# android - 如何在 MuPDF 中实现卷曲效果？

> ID：12507108
> 
> 赞同：1
> 
> 时间：2012-09-20T06:28:00.537
> 
> 标签：android

我正在研究 mupdf 以实现 curl 页面效果。现在我的 mupdf 运行良好，但我想在页面上实现 curl 效果，所以任何朋友都知道我该如何使用 mupdf 做到这一点？

提前致谢。:)

# compiler-construction - 在 sun studio 12 上编译，在 sun studio 10 上运行

> ID：12507109
> 
> 赞同：0
> 
> 时间：2012-09-20T06:28:03.277
> 
> 标签：compiler-construction, sun, sunstudio

我需要编译和链接一个程序，以便某人在具有 Sun Studio 10 的 Solaris 10 Sparc 64 位机器上运行。

我有一台装有 Solaris 10 Sparc 64 位的机器，但我只能在 Oracle 网站上找到 Sun Studio 11 和 12 以供下载。看来，由于年代久远，Sun Studio 10 无法下载。

我的问题是，有没有办法使用 Studio 12（带有一组标志设置）编译程序，以便它可以与 Sun Studio 10 无缝运行？

谢谢你的指导

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:25:16.597

如果您使用 Studio 的一个版本（如 11 或 12.x）构建程序，则不能期望链接到早期 Studio 版本的库。你没有说你正在使用什么编程语言，但这个问题在 Fortran 和 C++ 中最常见。

例如，除非您采取措施避免该问题（见下文），否则使用 STLport 或 Interval 库的 C++ 程序将尝试在运行时链接到与编译器一起安装的共享库。如果程序是使用 Studio 11 或 12.x 构建的，则与 Studio 10 库的链接将无法正常工作。

但是，如果程序仅链接到 /usr/lib 中的默认运行时库，那么在目标系统上是否安装了 Studio 或安装了哪个版本都无关紧要。*您可以通过在您构建它的系统*上的程序上运行“ldd”来了解是否是这种情况：

```
% ldd myprog 
```

输出将显示程序使用的所有共享库，以及它们的来源。如果编译器安装区域中没有库，则没有问题。

唯一的另一个问题是 Solaris 兼容性。如果您在 Solaris 版本 N 上构建程序，您可以期望在 Solaris N+1 或更高版本上运行该程序，但不能在 Solaris N-1 或更早版本上运行。原因是 Solaris 保留了旧接口，但添加了新接口。程序可能依赖于旧 Solaris 版本中不存在的 Solaris 接口。特别是对于 Solaris 10，后来的更新引入了早期更新中没有的新特性和接口。例如，如果您在更新 10 上构建程序，它可能无法在原始 Solaris 10 上运行。

此外，如果构建系统已使用更高版本的 C++ 运行时库（包 SUNWlibC）修补，则目标系统应具有相同或更高版本的修补程序。您可以通过运行命令找出补丁版本

```
% showrev -p | grep SUNWlibC 
```

回到我最初对 Studio 附带的库的讨论，这篇论文

[http://www.oracle.com/technetwork/articles/servers-storage-dev/linkinglibraries-396782.html](http://www.oracle.com/technetwork/articles/servers-storage-dev/linkinglibraries-396782.html)

描述了构建分发程序的最佳实践，以便它们不依赖于编译器安装。

Steve Clamage Oracle C++ 编译器团队

# android - 传递一个 Activity 并修改它的视图

> ID：12507112
> 
> 赞同：0
> 
> 时间：2012-09-20T06:28:24.713
> 
> 标签：android, oop

我有一个活动类 A，它有几个 TextViews 作为其成员变量。A 类具有三个 TextView 的 getter 方法。我可以将 A 的引用传递给 B 类并修改三个 TextView 吗？这是良好的编程习惯吗？

编辑：代码 -

A级

```
public class A extends Activity {

    private TextView tv1;
    private TextView tv2;
    private TextView tv3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // initialize tv1, tv2, tv3 here

        // Pass a referce of A to B.
        new B(this);
    }

    public TextView getTv1() {
        return tv1;
    }

    public TextView getTv2() {
        return tv2;
    }

    public TextView getTv3() {
        return tv3;
    }
} 
```

B类 -

```
public class B {
    public B(A a){
        a.getTv1().setText("Is");
        a.getTv2().setText("this");
        a.getTv3().setText("correct?");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:50:28.887

你可以，你只需要确保你对你做的任何事情都是`Views`在主线程上做的。从您可能使用的其他线程中`runOnUiThread`。

您也可以使用`Handler`. `Handler`您在 an 中定义 a`Activity`并将消息从您想要的任何地方发布到该处理程序。然后将在主线程上处理它们。

它可能仅在您的活动可见并且另一个类正在运行某个线程时才有意义，因此您的视图在可见时会得到更新。否则，如果 Activity 不可见，您可以将视图设置为`onResume`或`onStart`

在这种情况下，仍然使用 a 来避免过多的依赖`Handler`似乎没问题。

**编辑**：在您发布的代码中，您为什么需要`B`？

# c++ - 堆栈分配的向量如何在 C++ 中展开？

> ID：12507114
> 
> 赞同：4
> 
> 时间：2012-09-20T06:28:27.837
> 
> 标签：c++, memory, memory-management, callstack

如果我像这样声明一个向量：

```
int main() {
    vector<string> names;
    int something_else_on_the_stack = 0;
    names.add("John");
    names.add("Annie");
} 
```

您实际上如何能够将元素“添加”到名称向量中？如果名称是堆栈分配的，“something_else_on_the_stack”不应该在堆栈上紧随其后吗？那么如何将名称添加到已分配的向量中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T06:31:24.270

在内部，a`vector<string>`很可能包括一个`string*`指向实际数据的指针和可能另外两个`size_t`指示占用和保留内存的成员。其余的都将在堆上。因此，`sizeof(vector<string>)`是固定的，堆栈上的分配不会改变。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T06:30:41.993

`std::vector`internaly 维护一个指向堆分配空间的指针，该指针根据需要调整大小。堆栈上的足迹不会改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T06:34:41.953

a 在堆栈上占用的大小`vector<string>`是固定的，通常等于 3 个指针的大小（这是特定于实现的）。指针指向存储的开始、向量容量和向量大小。这些指针指向向量根据需要分配的空闲存储内存（或堆，如果你想调用它）来保存你添加到向量中的对象。

# android - 在 Android 上测试代码覆盖率的替代方案是什么？

> ID：12507119
> 
> 赞同：8
> 
> 时间：2012-09-20T06:28:40.567
> 
> 标签：android, testing, code-coverage, cobertura, emma

我知道 Android 的 Ant 工具带有内置的 Emma 代码覆盖率，但 Emma 的报告看起来越来越过时，无法轻松集成到其他覆盖率报告甚至 Sonar 中，主要是因为 Emma 缺乏详细的 XML 报告格式。我想要实现的是

*   单元测试的代码覆盖率（基于 Robolectric，已经用 Cobertura 完成）
*   集成测试的代码覆盖率（基于 Robotium/模拟器，目前与 Emma 单独完成）
*   理想情况下合并代码覆盖率结果（恕我直言，只有 Cobertura 才有可能，并且每次测试执行都需要原始 *.ser 文件）
*   发布到声纳（目前只完成单元测试覆盖，据我所知，声纳只了解一种覆盖格式）

我有其他选择吗？

**编辑：** [sonar-devel 上的这篇文章](http://comments.gmane.org/gmane.comp.java.sonar.devel/10411)可能总结了 Android 代码覆盖支持的当前状态以及 Sonar 支持。*叹*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T01:32:29.080

我已经推送了一个 github 存储库，其中包含与您在问题中提到的相同配置：

*   标准 android 测试 + emma 代码覆盖率
*   robolectric + cobertura 代码覆盖率（顺便说一句，我认为 cobertura 与 robolectric 不兼容）

并将它们包含在声纳中。一次只有一个，但配置仍然是一个有趣的基础。

[https://github.com/stephanenicolas/Quality-Tools-for-Android](https://github.com/stephanenicolas/Quality-Tools-for-Android)

我和一位同事打算以与您非常相似的心态来解决这个问题。我们希望更好地集成不同的测试技术，以便 Android 项目和报告也可以在声纳中工作。

如果您想加入我们的工作，我们很乐意为您提供回购的权利并开始与您合作。

斯蒂芬妮

- 更新

自 2013 年 3 月以来，我们还提出了统一配置，以使用 Jacoco 离线仪器进行 robolectric 和标准 junit 测试，并在 Sonar 中同时显示结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:06:02.627

您可以使用 robolectric 框架。它将允许您在 Java VM 上运行 JUnit 测试，而不是使用在 Dalvik VM 上运行的 Android Junit 测试。这将允许您使用任何标准覆盖工具（EclEmma、CodeCover、Cobertura 等）。它易于配置并且运行稳定（你不能从 Clover 工具中说出来）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:21:23.320

**免责声明：我是 Atlassian**

是的。还有一种替代方法 - 您可以使用 Atlassian Clover 工具。[https://confluence.atlassian.com/display/CLOVER/Clover-for-Android](https://confluence.atlassian.com/display/CLOVER/Clover-for-Android)提供了 Clover-for-Android 的 alpha 版本

您写道，您希望实现以下目标：

*   *单元测试的代码覆盖率*- 是的，Clover 支持“Run as > Android JUnit Test”以及“Run as > JUnit Test” - 即无需启动模拟器（但后者需要稍有不同的设置，如 Clover-for 中所述-安卓手册）
*   *集成测试的代码覆盖率*- 如上所述，“Run as > Android JUnit Test”
*   *理想情况下合并代码覆盖率结果*——是的，您可以合并来自多个测试运行的代码覆盖率结果；更重要的是，您甚至**可以在模拟器或设备中运行您的应用程序并执行手动测试**（原文如此！）
*   *发布到 Sonar* - 有一个[Clover Sonar 插件](http://docs.codehaus.org/display/SONAR/Clover+Plugin)可用，但是我没有用 Clover-for-Android 测试它；可能您必须在 Eclipse 中运行测试，然后导出 XML 或 HTML 报告（Clover 的 Coverage Explorer 视图中的按钮）并将这些文件推送到 Sonar 构建

# jquery - .scrollTop() 在一个 div

> ID：12507120
> 
> 赞同：1
> 
> 时间：2012-09-20T06:28:41.837
> 
> 标签：jquery, html

当返回到 div 的页面时，我想滚动到 div 中的某个位置。因此，当我单击列表中的某个项目时，该项目的 id 为例如 223。返回页面时，scrollTop 必须转到与之前单击相同的位置。

我将项目的 ID 保存在 cookie 中。

这是我的代码：

```
$(function () {
    var id = $.cookie('LastPositionCookie');
    var rowPos = $("#" + id).position();

    if (rowPos != null) {
        $('#tableBodyRes').scrollTop(rowPos.top);
    }
    else {
        alert(id + " " + rowPos + " error.");
    }
}); 
```

滚动工作正常，但它从页面顶部滚动，而不是从 div (tableBodyRes) 滚动。我怎样才能解决这个问题？

**编辑：添加了一张带有信息的图片**

![在此处输入图像描述](../Images/30ad6b57d0b79431fae909e9e4d0ad09.png)

在这里，您可以在左侧看到我的 div 溢出。右边是我的浏览器的正常溢出。当我再次返回此页面时，我需要转到绿色项目。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:52:05.820

要将页面滚动到元素的顶部，

```
// Swap ...
$('#tableBodyRes').scrollTop(rowPos.top);

// With ...
$('body').scrollTop(rowPos.top); 
```

**编辑**

为了将来参考，手头的问题是将内部元素滚动到相对于父元素（parent has `overflow:hidden;`）的位置，而不是相对于文档本身。

我们想出的解决方案是获取内部元素的顶部位置，然后减去父元素的顶部位置。

相关的 jQuery

```
var rowPos = $("#336").position();
var divPos = $("#tableBodyRes").position();

var newTop = rowPos.top - divPos.top;

$('#tableBodyRes').scrollTop(newTop); 
```

HTML

```
<div id="tableBodyRes" class="tableBodyDiv clearfix">
    <table id="tableReservations">
        <tr id="335"><td>335</td></tr>
        <tr id="336"><td>336</td></tr>
        <tr id="337"><td>337</td></tr>
    </table>
</div> 
```

[和一个很好的衡量标准的 jsFiddle。](http://jsfiddle.net/yxPQC/2/)

# java - 如何在java中将字节数组保存到二进制文件中

> ID：12507122
> 
> 赞同：0
> 
> 时间：2012-09-20T06:29:04.467
> 
> 标签：java

如何在java中将字节数组保存到二进制文件中。我尝试使用文件编写器缓冲输出流但没有结果。数据保存在二进制文件中，当用记事本打开文件时，看起来好像已经创建了二进制文件，但用写字板打开时会出现实际数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:32:54.683

您可以通过这种方式保存字节数组：

```
 FileOutputStream fos = new FileOutputStream(strFilePath);
  String strContent = "Content";

  /*
   * To write byte array to a file, use
   * void write(byte[] bArray) method of Java FileOutputStream class.
   *
   * This method writes given byte array to a file.
   */

   fos.write(strContent.getBytes());

  /*
   * Close FileOutputStream using,
   * void close() method of Java FileOutputStream class.
   *
   */

   fos.close(); 
```

它将使用您的字节数组创建一个文件

# android - 如何检测Android应用程序中的卸载系统对话框

> ID：12507128
> 
> 赞同：1
> 
> 时间：2012-09-20T06:29:44.430
> 
> 标签：android, android-intent

如何检测另一个android应用程序中应用程序的卸载系统对话框及其取消按钮单击？是否有任何系统意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:43:24.027

`ACTION_PACKAGE_REMOVED`当现有应用程序包已从设备中删除时广播。有关更多详细信息，请访问[此链接](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)

# c# - 复制实体集合

> ID：12507132
> 
> 赞同：0
> 
> 时间：2012-09-20T06:30:06.427
> 
> 标签：c#, entity-framework

我正在尝试使用以下方法将用户角色列表从一个用户复制到另一个用户：

```
public bool CopyUsersRoles(Guid copyFromUserId, Guid copyToUserId)
{
    //Delete existing roles for user
    var rolesToDelete = context.UserApplicationRoles.Where(x => x.UserID == copyToUserId);

    foreach (var u in rolesToDelete)
    {
        context.UserApplicationRoles.DeleteObject(u);
    }    

    var rolesToAdd = context.UserApplicationRoles.Where(x => x.UserID == copyFromUserId)
                                  .ToList();                             

    for(int i = 0; i < rolesToAdd.Count; i++)
    {
        rolesToAdd[i].UserID = copyToUserId;                           
    }    

    foreach (var u in rolesToAdd)
    {
        context.UserApplicationRoles.AddObject(u);
    }    

    context.SaveChanges();    
} 
```

分配新的时出现以下异常`UserId`：

> 属性“UserID”是对象的关键信息的一部分，不能修改。在 System.Data.Objects.EntityEntry.VerifyEntityValueIsEditable（StateManagerTypeMetadata 类型元数据，Int32 序数，字符串成员名称）

我原以为 ToList() 会阻止这种情况......

实现这一目标的正确方法是什么？

**编辑 - 课程详情：**

![在此处输入图像描述](../Images/994bef9fe8248740ec6218262661069e.png)

我看到遗留表上没有设置 PK。我假设手动将 PK 设置为 UserApplicationRoleId 将解决此问题。

用户 ID 看起来像这样：

```
 [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Guid UserID
    {
        get
        {
            return _UserID;
        }
        set
        {
            if (_UserID != value)
            {
                OnUserIDChanging(value);
                ReportPropertyChanging("UserID");
                _UserID = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("UserID");
                OnUserIDChanged();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:18:21.003

这就是问题：

```
 var rolesToAdd = context.UserApplicationRoles
  .Where(x => x.UserID == copyFromUserId)                             
  .ToList();  

   ....

  foreach (var u in rolesToAdd)
  {
    context.UserApplicationRoles.AddObject(u);
  } 
```

您正在引用 DB/EF 中已经存在的对象。您必须克隆这些并将克隆添加到 EF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:49:47.967

最终让它以一种非常讨厌的方式工作（旧版数据库没有自动递增的 PK :(

```
 var copyToUser = this.GetUser(copyToUserId);
            List<UserApplicationRole> userApplicationRoles = new List<UserApplicationRole>();
            int startingId = Convert.ToInt32(isignonContext.UserApplicationRoles.OrderByDescending(u => u.UserApplicationRoleId).FirstOrDefault().UserApplicationRoleId) + 1;

            foreach (var u in userApplicationRolesToAdd)
            {
                UserApplicationRole userApplicationRole = new UserApplicationRole
                {
                    UserApplicationRoleId = startingId,
                    UserID = copyToUser.UserId,
                    UserGroupId = copyToUser.ParentId.Value,
                    ApplicationRoleId = u.ApplicationRoleId,
                    ExpiryDate = u.ExpiryDate,
                    IsEnabled = u.IsEnabled
                };

                userApplicationRoles.Add(userApplicationRole);
                startingId++;
            } 
```

# ios - 在 iOS 应用程序的一个视图中使用 Unity3D

> ID：12507133
> 
> 赞同：8
> 
> 时间：2012-09-20T06:30:07.283
> 
> 标签：ios, unity3d

我有一个使用 Cocoa 本地构建的 iOS 应用程序。现在，我想给它添加一个 Unity3D 模拟。是否可以在本机屏幕上单击按钮调用 Unity 模拟/屏幕？或者我是否已经将我的整个原生 iOS 应用程序作为插件写入 Unity 屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T13:52:59.347

我更愿意将此作为评论发布，但我没有这样做的声誉（还）。

我在这里为这个线程做出了广泛的贡献：

[http://forum.unity3d.com/threads/191971-Unity-AppController-subclassing](http://forum.unity3d.com/threads/191971-Unity-AppController-subclassing)

我已经能够成功地将 Unity 视图集成到原生 iOS 项目中，无论是通过编程方式、通过 XIB 还是通过 StoryBoard。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-26T17:29:58.817

因为问题是“有可能吗？” 答案是“是”。至于怎么做：

[http://www.markuszancolo.at/2014/05/integrating-unity-into-a-native-ios-app](http://www.markuszancolo.at/2014/05/integrating-unity-into-a-native-ios-app)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-09T02:53:06.653

是的，这是可能的。

Blurst 的人[制作](http://technology.blurst.com/a-cocoa-based-frontend-for-unity-iphone-applications/)了一些游戏，使用 Cocoa 作为前端和 Unity 到 3D 的东西。看看下面的链接，关于它们的信息非常好：

*   [一个基于 Cocoa 的 Unity iPhone 应用程序前端](http://technology.blurst.com/a-cocoa-based-frontend-for-unity-iphone-applications/)
*   [构建 iOS Unity + UIView / UIViewController / Interface Builder App](http://alexanderwong.me/post/29949258838/building-a-ios-unity-uiview-uiviewcontroller)
*   [iPhone Native UI 和 Unity 3 Pro 的实验](http://clevermartian.com/blog/?p=59)
*   [Unity Iphone App 嵌入objectiveC 应用程序](http://forum.unity3d.com/threads/50953-Unity-Iphone-App-Embebed-in-objectiveC-app)

来源：[https ://stackoverflow.com/a/13175771/2496464](https://stackoverflow.com/a/13175771/2496464)

# tabs - 外系统 - 标签问题

> ID：12507134
> 
> 赞同：0
> 
> 时间：2012-09-20T06:30:21.297
> 
> 标签：tabs, outsystems

我正在使用 Outsystems 开发应用程序，其中我使用的是“RichWidgets\Tabs_ClientSide”。我需要从一个页面导航到另一个页面，其中另一个页面有多个选项卡。目前，默认情况下我被重定向到第一个选项卡。

是否有一些属性或功能，以便我可以在运行时将控件导航到特定的选项卡（网络块）？

谢谢 ！

我已经实施了以下给出的答案。我有一个链接。当我单击该链接时，它被重定向到目标 A。我有一个输入参数，它是一个布尔参数。我通过'true'作为它的值。作为网络屏幕的目标 A 有一个网络块 B。在那个特定的网络块上，对于 InitialActiveTab 属性，我检查了输入参数是 True 还是 False。确实，我将 WebblockC.Id 作为值传递。

但是，在网络块下方的浏览器上，它显示此错误。

RichWidgets\Tabs_ClientSide 的使用无效：初始选项卡必须定义了“标题”扩展属性。

我已经根据系统的需要设置了 OnTabActivation 属性，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:13:06.313

该行为可以通过以下方式完成：

*   向具有选项卡的网页屏幕添加一个可选输入参数，以指定当用户登陆页面时要选择哪个选项卡
*   将该参数提供给`InitialactiveTab`*Tabs_ClientSide* Web 块的输入
*   在您希望使用初始不同选项卡打开目标的所有链接中，通过使用要激活的选项卡的标题填充您创建的可选输入参数来指定要打开的选项卡

# c# - servicestack.razor 中的身份验证

> ID：12507136
> 
> 赞同：1
> 
> 时间：2012-09-20T06:30:34.573
> 
> 标签：c#, authentication, razor, servicestack

我尝试使用`ServiceStack.Razor`. 但是遇到了如何处理服务和页面中的身份验证的问题。

处理服务中的未经授权的访问非常容易，因为我们可以设置身份验证属性。我使用 credentialsAuthProvider 进行了配置身份验证，并使用查询字符串对成功进行了身份验证，`/auth?username=&password`并成功访问了受保护的服务。

但是如何处理对服务的未经授权的访问。目前它返回 401 未经授权的访问。因此，当用户访问该页面时，它只显示空白页面.. 我尝试设置 customhttphandler 以进行未经授权的访问以重定向到登录页面但不成功

```
SetConfig(new EndpointHostConfig {
    DebugMode = true,
    CustomHttpHandlers = {
      { HttpStatusCode.NotFound, new RazorHandler("/notfound") },
      { HttpStatusCode.Unauthorized, new RazorHandler("/login") },
    }
}); 
```

`Servicestack.razor`允许创建像 Asp.Net WebPages 这样的 Razor 页面，但没有示例如何处理页面中的授权，如使用`Request.IsAuthenticated`. 我试过了，但是 throw 方法不存在错误。

以及如何注销或销毁身份验证会话

更新：我正在使用`ServiceStack.Razor`SelfHosting

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:13:07.613

在 ServiceStack Self Host 场景中，我能够访问 Razor 视图中的会话，如下所示：

```
@{
    var user = Request.GetSession();
}

Authenticated: @user.IsAuthenticated 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T02:15:24.283

必须回答我自己..因为没有人来回答，这将是其他人的参考..

具有 Authorize 属性的服务现在重定向到[登录页面](https://stackoverflow.com/questions/12640653/servicestack-razor-authentication?rq=1)，而不是现在返回黑页。请更新最新的 servicestack 版本。

在尝试了许多可能在razor页面上处理身份验证后，可以通过访问razor页面中的缓存来实现。

```
@{
    var user = Cache.Get<AuthUserSession>(SessionKey);
}

@if (user != null && user.IsAuthenticated) {
    <h1>User @user.DisplayName is Logged</h1>
} 
```

但有限制，这只能在 Asp.Net WebHost 中工作。我仍然在寻找让它在 Self Host 中工作的方法。

注销过程可以通过创建注销服务来实现，其中删除会话并重定向到登录页面。

```
 [Route("logout")]
public class Logout { }

public class UserService : Service
{
    public object Any (Logout r)
    {
        this.RemoveSession();
        return this.Redirect("/login");
    }
} 
```

我会尝试用它制作示例项目并尽快发布

# java - 我的“如果”声明没有做我期望做的事情

> ID：12507138
> 
> 赞同：0
> 
> 时间：2012-09-20T06:30:54.850
> 
> 标签：java, if-statement

我试图让用户输入用户输入字母，然后依赖字母'IF'语句选择要显示的字段。

如果我输入 'p' 和 'P' 或 'F' 或 'f' 我现在的 'for' 语句仍然不理解我的输入并将我扔到 'else' 语句。

但为什么不呢？

```
 Scanner scanner = new Scanner(System.in);

        System.out.print("Employee's Last Name: ");
        inputName = scanner.next();
        System.out.print("Employment Status (F or P): ");
        inputStatus = scanner.next();

        if (inputStatus == "F" || inputStatus == "f")
        {
            // some code
        }
        else if(inputStatus == "P" || inputStatus == "p")
        {
            // some code
        }
        else
        {
            System.out.println("I don't understand...");
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T06:32:54.760

> 始终使用 equals 进行字符串比较。& equalsIgnoreCase 用于大小写无关的比较
> 
> 此外，如果其中一个参数是固定字符串，则应该使用它来进行比较，就像您的情况一样`F`，以避免不必要的空检查。

```
"F".equalsIgnoreCase(inputStatus) 
```

您的代码应如下所示。

```
 System.out.print("Employee's Last Name: ");
    String inputName = null;
    String inputStatus = null;
    if (scanner.hasNext())
        inputName = scanner.next();
    System.out.print("Employment Status (F or P): ");
    if (scanner.hasNext())
        inputStatus = scanner.next();

    if ("F".equalsIgnoreCase(inputStatus)) {
        // some code
    } else if ("P".equalsIgnoreCase(inputStatus)) {
        // some code
    } else {
        System.out.println("I don't understand...");
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T06:34:17.187

您应该使用 equalsIgnoreCase() 方法。

```
if (inputStatus.equalsIgnoreCase("f"))
            {
                // some code
                System.out.println(inputStatus);
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:32:51.853

您应该使用字符串`equals()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T06:33:54.130

您不能使用`==`运算符比较字符串。此运算符比较引用。改用`equals()`方法：

`if ("F".equals(inputStatus) || "f".equals(inputStatus))`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T06:35:04.227

如果“==”不能比较`Strings`，这基本上是比较两个值的内存地址，永远不会匹配。

你应该使用类似...

```
if (inputStatus.equalsIgnoreCase("f")) 
{
    // Do something...
} 
```

反而

# php - 当用户在支付网关页面上时，在浏览器关闭时更新数据库

> ID：12507140
> 
> 赞同：1
> 
> 时间：2012-09-20T06:31:06.790
> 
> 标签：php, mysql

我面临的问题是，当用户被重定向到支付网关并且他/她点击后退按钮并返回站点或退出浏览器时，仍然会创建订单，理想情况下应该取消。我想在创建订单时解雇观察者，如果订单在大约 15 分钟后未处于处理状态（比如超时），我想取消订单。但不确定当用户在支付网关页面点击后退按钮或退出浏览器时如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:36:04.037

您已在数据库中放置了一个标志（即已完成）。开始新事务时，将标志设置为 false。如果交易成功，则将标志值更改为 true。对于不成功的交易，等到超时并删除它已完成标志为假的订单。

# c++ - C++ 应用程序在一段时间后占用 100% 的 CPU 周期

> ID：12507150
> 
> 赞同：-3
> 
> 时间：2012-09-20T06:31:39.013
> 
> 标签：c++, cpu, cpu-usage

在我的应用程序中，我使用了 OOP 的特性，如类、继承等。在一段时间后，我还没有在应用程序中使用任何线程，它需要 100% 的 CPU 周期。谁能帮我找出可能的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:47:23.573

最可能的原因是无限循环（正如 Jogojapan 已经提到的）。找出它的最佳方法是使用调试器并查看代码在开始使用高 CPU 时卡在哪里）..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:01:04.640

除非您正在运行一些需要大量时间来完成非常复杂的“事情”的功能，否则它很可能是由某种没有暂停的循环引起的。寻找类似`do {...} while (!exit);`修复它的东西，您需要调用一个为操作系统产生时间的函数，并对该函数进行 API 调用，该`sleep(x)`函数有效地暂停您的程序“x”毫秒。如果您使用的是 Windows，这可以通过`#include <windows.h>`然后放在`sleep(10);`循环末尾来完成。“10”是任意的；但请注意，较小的值往往是随机的，如果您有很多图形（对于 30 fps），小于 33 的任何值都可以，而 100 左右对于主要涉及单击或菜单的事件驱动的事物来说是好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:59:51.810

首先，100%的CPU使用率当然不一定是问题。如果进程执行大量计算，而不是例如 IO，则 100% 的 CPU 使用率可能是完全健康的，并且实际上是理想的。

但是，如果您确实觉得它正在使用 CPU 周期，虽然它不应该，这里有一些通用的策略来处理它：

1.  首先编写不太可能导致此类问题的代码。使用单元测试（对输入范围有很好的覆盖），并避免退出条件过于复杂的循环。（对于简单或标准的情况，使用内置算法如`std::for_each`等`std::generate`也有助于避免无限循环。）

2.  使用日志消息，即使在几天后，您也可以通过检查日志来跟踪程序正在执行的操作。如果您担心大量日志消息会增加计算负担，您可以实现它们，以便有运行时甚至编​​译时选项来打开或关闭它们或选择详细程度。有各种日志框架可以提供帮助（甚至有一个[SO question 列出了它们](https://stackoverflow.com/questions/696321/best-logging-framework-for-native-c)，尽管它已关闭并且可能会被删除）。

3.  如果上述方法没有帮助，并且您遇到了与您的帖子中描述的情况类似的情况，请使用调试器来确定您的进程陷入的代码部分。您可以在调试器中运行该程序几天或几周，如果必要的。当它达到 100% CPU 使用率时，中断并检查调用堆栈以查看进程在哪里。无限循环（或类似现象）可能发生在相对较高的级别上，因此您可能需要在堆栈中上下走动以了解循环发生的位置。您也可以继续该过程并在稍后再次中断。

# android - ICS 中 DOM XML 解析中的问题（在 GingerBread 中运行良好）

> ID：12507151
> 
> 赞同：1
> 
> 时间：2012-09-20T06:31:43.790
> 
> 标签：android, xml-parsing, domparser

我陷入了一些奇怪的问题，我无法弄清楚我做错了什么。我有一个正在显示 UserInfo 的屏幕。为此，当我触发 web 服务并解析该数据并显示它时，我正在获取 XML，这在 2.3.3 中运行良好，但在 ICS 中无法解析。

这是我解析数据的方法::

**XML** ::

```
<?xml version="1.0"?>
<root>
 <displayname>AAAA</displayname>
 <gender>male</gender>
 <city>AAAA</city>
 <state>AAAA</state>
 <country>AAA</country>
 <image>http://www.example.com/documentSetting/test.jpg</image>
</root> 
```

**我的异步任务**::

```
private class GetUserInfoTask extends AsyncTask<String, Integer, Document> 
{
    Document document = null;

    GetUserInfoTask()
    {
        webAPIRequest = new WebAPIRequest();
    }

    @Override
    protected Document doInBackground(String... urls) 
    {
        document = webAPIRequest.performGet(urls[0]);

        return document;
    }

    protected void onPostExecute(Document result) 
    {
        try
        {
            if(result!=null)
            {
                Element node = (Element)result.getElementsByTagName("root").item(0);

                if(node!=null)
                {
                    websiteList = node.getElementsByTagName("root");
                    check = websiteList.getLength();

                    if(check!=0)
                    {
                        arrUserInfoList=null;
                        if(arrUserInfoList==null)
                        {
                            arrUserInfoList = new ArrayList<UserProfile>();
                        }

                        for(int j=0;j<websiteList.getLength();j++)

                        {                               
                            Element checkNode=(Element)websiteList.item(j);
                            UserProfile user=new UserProfile(); 

                            msg.display_name = getValueFromNode(checkNode,"displayname");
                            msg.gender = getValueFromNode(checkNode,"gender");
                            user.city = getValueFromNode(checkNode,"city");
                            user.state = getValueFromNode(checkNode,"state");
                            user.country = getValueFromNode(checkNode,"country");
                            user.image = getValueFromNode(checkNode,"image");

                            arrUserInfoList.add(user);
                        }

                        txt_user_name_top.setText(arrUserInfoList.get(0).displayname);
                        txt_user_gender.setText(arrUserInfoList.get(0).gender);
                        txt_user_status.setText(arrUserInfoList.get(0).status);
                        txt_user_country.setText(arrUserInfoList.get(0).country);
                        txt_user_country.setText(arrUserInfoList.get(0).city);

                    }

                }
                new LoadingFriendImagesTask().execute();
            }
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }
 } 
```

**我的 PerformGet 方法**::

```
public Document performGet(String url) 
{
    Log.d("webAPIRequest url = ", url);
    Document doc = null;
    try 
    {
        DefaultHttpClient client = new DefaultHttpClient();

        URI uri = new URI(url);
        HttpGet method = new HttpGet(uri);
        HttpResponse res = client.execute(method);
        InputStream data = res.getEntity().getContent();
        String s =  convertStreamToString(data);
        ByteArrayInputStream str=new ByteArrayInputStream(s.getBytes());
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        doc = db.parse(str);

    }
    catch (ClientProtocolException e) 
    {
         e.printStackTrace();
    }   
    catch (IOException e) 
    {
        e.printStackTrace();
    }
    catch (URISyntaxException e)
    {
        e.printStackTrace();
    } 
    catch (ParserConfigurationException e) 
    {
        e.printStackTrace();
    } 
    catch (SAXException e) 
    {
        e.printStackTrace();
    }

    return doc;
} 
```

您的宝贵建议和帮助将不胜感激......在此先感谢...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:14:20.213

我已经像这样解决了我的问题。

我已经替换了这段代码......

```
else
{
node = (Element)result.getElementsByTagName("root").item(0);

if(node!=null)
{
    websiteList = node.getElementsByTagName("root");
    check = websiteList.getLength();

    if(check!=0)
    {
        if(arrUserInfoList==null)
        {
            arrUserInfoList = new ArrayList<UserProfile>();
        }

        for(int j=0;j<websiteList.getLength();j++)
        {                           
        }
    }
}
} 
```

有了这个 ：：

```
else
{
websiteList = (NodeList)document.getElementsByTagName("root");
check = websiteList.getLength();

if(check!=0)
{
    if(arrUserInfoList==null)
    {
        arrUserInfoList = new ArrayList<UserProfile>();
    }

    for(int j=0;j<websiteList.getLength();j++)
    {
    }
}
} 
```

这对我来说就像一个魅力.. :)

# iphone - iPhone应用程序中的JSON数据解析

> ID：12507154
> 
> 赞同：0
> 
> 时间：2012-09-20T06:31:49.083
> 
> 标签：iphone, objective-c, json

我正在解析 iphone 应用程序中的 json 数据。但它没有正确解析它。

我正在使用以下代码：

```
- (void)getSurveyList {     
       user_id=user_id;        
       NSLog(@"This is uerid %@",user_id);
       NSArray *tempArray =[[DataManager staticVersion] startParsing:@"http://myser-solutions.com/app/surveyList.php?user_id=user_id"];

       for (int i = 0; i<[tempArray count]; i++) {            
          id *item = [tempArray objectAtIndex:i];    
          NSDictionary *dict = (NSDictionary *) item;        
          ObjectData *theObject =[[ObjectData alloc] init];
          [theObject setUser_id:[dict objectForKey:@"user_Id"]];
          [theObject setSurvey_Id:[dict objectForKey:@"survey_Id"]];
          [theObject setSurvey_Name:[dict objectForKey:@"survey_Name"]];
          [theObject setTotal_Question:[dict objectForKey:@"total_Question"]];  
          [theObject setAdministrator_Email:[dict objectForKey:@"administrator_Email"]];
          [theObject setStart_Date:[dict objectForKey:@"start_Date"]];
          [theObject setEnd_Date:[dict objectForKey:@"end_Date"]];      
          [theObject setStatus:[dict objectForKey:@"status"]];    
          [theObject setAdministrator_Email:[dict objectForKey:@"user_Password"]];    
          [surveyList addObject:theObject];    
          [theObject release];
          theObject=nil;            
          int count =[surveyList count];
          NSLog(@"Total is %d",count);               
      }
} 
```

在我调试代码时它不会进入循环。我不知道为什么。

JSON响应

ali40[{"user_Id":"ali40","survey_Id":"1","survey_Name":"Veritas 调查","total_Questions":"20","administrator_Email":"engr.jamshedali@hotmail.com", "start_Date":"20-9-2012","end_Date":"1-10-2012","status":"Active","user_Password":"jackson12"},{"user_Id":"ali40", "survey_Id":"2","survey_Name":"Celeritas 调查","total_Questions":"20","administrator_Email":"jani_06sw@yahoo.com","start_Date":"10-11-2012"," end_Date":"12-12-2012","status":"Active","user_Password":"jackson12"}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:36:00.103

如果它没有进入循环，则`tempArray`必须为空。请再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:59:32.727

解析可能不正确。临时数组返回 nil。检查解析这是一个很好的[教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)和[这里](https://stackoverflow.com/questions/9083160/iphone-up-to-date-sbjson-tutorials)的 SBJSON 三件事要检查

*   输入 - 正确获取
*   它是有效的 JSON 响应吗
*   正确解析

# java - JPA 开始交易瓶颈

> ID：12507156
> 
> 赞同：0
> 
> 时间：2012-09-20T06:31:56.050
> 
> 标签：java, hibernate, jpa

我正在处理大量实体并使用休眠将其保存到数据库中。我发现如果表中的大量数据长达一分钟，开始事务会花费很多时间（从 Web 服务获取数据时，整个同步过程需要 20 小时接近 3 小时）。
有什么办法可以改进这种方法的持久性逻辑吗？

```
final EntityManager em = emf.createEntityManager();
try {
    final MfBranch branch = <get data from web service>
    em.getTransaction().begin(); // bottleneck
    em.merge(branch);
    em.getTransaction().commit();
} finally {
    DisposableUtils.closeQuietly(em);
} 
```

我认为看到合并或事务提交操作很耗时是合理的，但为什么事务开始很耗时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:00:34.283

在[ObjectDB](http://www.objectdb.com/java/jpa/persistence/store#Batch_Store_)中，将针对您在 JPA 中持久保存大数据的性能问题提供参考。

# java - 如何不断提示用户输入新词

> ID：12507159
> 
> 赞同：1
> 
> 时间：2012-09-20T06:32:10.260
> 
> 标签：java, arrays, loops

到目前为止，我已经运行了这个程序，但我在这部分有库存：程序应该不断提示用户输入一个新单词，直到用户输入一个表示有效二进制数的单词。我知道我想使用一个循环，但我不知道把它放在哪里。

```
package programming_assignment_1;

import java.util.Scanner;

public class Programming_Assignment_1 {

    public static void main(String[] args) {
        // TODO code application logic here
        Scanner sc = new Scanner(System.in);
        System.out.print("Please imput a binary number : ");
        String binary;
        binary = sc.next();
        boolean isBinary = true;

        char[] values = binary.toCharArray();
        for(int i=0; i<values.length; i++)
        {
                if( (values[i] != '0') && (values[i] != '1') )
                {
                isBinary = false;
                break;
                }
        }
        if(!isBinary)
        {
        System.out.println("this is not a binary number");
        }
        else
        {
            for(int i=0; i<1; i++)
            {
                 String consecutive1s = "111";
               if (binary.indexOf(consecutive1s) != -1)
            {
                System.out.println("accepted");
            }
            else
            {
              System.out.println("rejected");  
            }
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:36:10.900

将您的代码置于`do...while(..)`循环之下。就像是 ：

```
do {
  //read number
  //process number
  // if num valid or operation is finished break the loop using break
} while (condtion); 
```

我会使用您的代码提供解决方案，但您似乎是新手，需要学习 Java 的基本知识。所以我给你只是提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:39:45.740

```
...
public static void main(String[] args) {
    // TODO code application logic here
    boolean accepted = false;
    while(!accepted) {
       Scanner sc = new Scanner(System.in);
       ...

       if(!isBinary) {
           System.out.println("this is not a binary number");
       } else {
           accepted = true;
           ...

       }
       ...

    } // while
} // main 
```

此外，我不确定您的“for”循环 - 它不会向您的程序添加任何内容，因为它只执行一次......

# c# - 从 Linq 获取列名到 Sql 实体

> ID：12507162
> 
> 赞同：0
> 
> 时间：2012-09-20T06:32:20.230
> 
> 标签：c#, linq-to-sql

我是 linq to sql 的新手。想知道我是否可以获得列的名称。像 First_Name、Last_name 而不是 'Peter'、'Parker'。

我的代码是这样的：

```
using (DataContext context = new DataContext(ConnectionString))
{
    var results = (from person in context.Persons
                   select person);

     foreach (Person person in results.ToList<Persons>())
     {
            //Here I need the Column name of the person.FirstName
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:24:26.873

```
var column = typeof(Person).GetProperty("FirstName")
    .GetCustomAttribute(typeof(ColumnAttribute, false)
        as ColumnAttribute;

var name = column.Name; 
```

见[ColumnAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.aspx) ;

# javascript - Css 无法在 IE、Firefox、Opera 中加载，并且在 Chrome 和 Safari 上运行良好

> ID：12507164
> 
> 赞同：2
> 
> 时间：2012-09-20T06:32:28.200
> 
> 标签：javascript, css

在我的网站[http://www.mazishi.com/index.php/component/obituary/detail/11.html#tabs-2](http://www.mazishi.com/index.php/component/obituary/detail/11.html#tabs-2) Css 在 Chrome 和 Safari 中加载正常...我不知道出了什么问题IE、FireFox 和 Opera。

我检查了[Firefox、Opera 和 IE 中未加载的 ref 链接 CSS - Chrome 和 Safari 工作得很好](https://stackoverflow.com/questions/10846868/css-not-loading-in-firefox-opera-and-ie-chrome-and-safari-works-just-fine...but)，但没有工作。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:44:17.297

您的 CSS 文件加载正常，但看起来您的 CSS 代码中有一些错误，例如未闭合的字符串，

`[12:07:25.080] Found unclosed string '"}.hasTip{cursor:pointer}.add{cursor:pointer}.comment_status{cursor:pointer}..fb_iframe_widget{display:block}.comment_trash{cursor:pointer}.asset_icon{clear:both}.asset_icon'. Expected declaration but found '"}.hasTip{cursor:pointer}.add{cursor:pointer}.comment_status{cursor:pointer}..fb_iframe_widget{display:block}.comment_trash{cursor:pointer}.asset_icon{clear:both}.asset_icon'. Skipped to next declaration. @ http://www.mazishi.com/cache/helix_assets/cf9b9e5033a9adee8f2ffb8a7841259a.css:440`

您可以使用 w3validator 检查您的 CSS 错误，[http: //jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.mazishi.com%2Fcache%2Fhelix_assets%2Fcf9b9e5033a9adee8f2ffb8a7841259a.css&profile=css3&usermedium=all&warning =1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.mazishi.com%2Fcache%2Fhelix_assets%2Fcf9b9e5033a9adee8f2ffb8a7841259a.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)

修复错误，它将解决您的问题。

# arrays - matlab：查找两个矩阵共同值的索引

> ID：12507167
> 
> 赞同：2
> 
> 时间：2012-09-20T06:32:51.673
> 
> 标签：arrays, matlab, find, compare, indices

我有一个简单的问题。

假设我们有两个数组：

```
data = [1 1 2 2 2 2 3 3 3 4 4 4 4 4 5 5 5 5 6 6 6];
A = [1 3 6]; 
```

我希望数据中的值索引等于 A 中的任何值。

即答案将是：1、2、7、8、9、19、20、21

如何在不使用 for 循环并一一扫描 A 中的每个值的情况下做到这一点..？谢谢！艺术。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T06:36:56.437

这将完全做到这一点：

```
inds = find(ismember(data, A)) 
```

该函数`ismember`将找到其中的所有`data`元素`A`。的第二个输出`ismember`也可能有用：

```
>> [~, b] = ismember(data, A))
ans = 
    1 1 0 0 0 0 2 2 2 0 0 0 0 0 0 0 0 0 3 3 3 
```

其中`1`,`2`并`3`引用索引入`A`.

# php - Windows 上 PHP 编译中的 MMAP 支持

> ID：12507168
> 
> 赞同：2
> 
> 时间：2012-09-20T06:32:53.753
> 
> 标签：php, compilation, apc, mmap

我已经按照 php.net 网站上的说明在 Windows 上成功编译了 PHP 5.4.7。当我检查 phpinfo() 中的 APC 信息时，它说 MMAP 支持已禁用。尝试在 php 的配置命令上使用 --enable-mmap 并显示“未知选项”。

经过大量搜索后，看起来 MMAP 是与 apache 相关的功能。根据编译说明，我的依赖项文件夹中填充了所需的 apache 头文件和库（还有 --enable-apache2handler 和过滤器都可以工作并生成 dll）。

我还查看了 apache 标头内部，它有“#define HAS_MMAP 1”，所以这应该不是问题。

所以问题仍然存在：当我在 Windows 上编译它时，如何在 php 上启用 mmap 支持？

# sockets - 如何判断哪些用户连接到共享 tmux 套接字？

> ID：12507171
> 
> 赞同：15
> 
> 时间：2012-09-20T06:33:01.510
> 
> 标签：sockets, tmux

我创建了一个共享套接字供 tmux 使用。

```
tmux -S /tmp/pair 
```

然后我有第二个用户连接到套接字。

```
tmux -S /tmp/pair attach 
```

我如何从创建套接字的第一个会话中判断出第二个用户已连接？

我猜这将是来自`lsof`命令的东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T16:52:24.200

您可以使用该`list-clients`命令。它本身显示所有连接到服务器的客户端。如果您使用该选项指定会话`-t`，它会显示附加到指定会话的客户端。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-19T09:13:31.683

就像另一位用户在评论中所说的那样，`<prefix> D`将列出所有会话，但请记住，按 Enter 将分离该客户端（这可能是您想要的，也可能不是您想要的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-28T21:56:38.363

给出的答案（Ctrl-b D 或 Ctrl-b : list-clients RET）将为您提供具有（虚拟）tty 终端和窗口大小的客户端列表，但不会告诉您相关的用户名。在 tmux 会话之外，您还可以使用“tmux -S /tmp/pair list-clients”

列出已连接的实际用户的一种方法是在命名套接字上运行 lsof，即：“lsof /tmp/pair”

或者，您可以使用“谁”命令查看与虚拟终端关联的用户列表。如果您只是区分自己的连接，则可以使用别名来过滤：“who | awk '{print $2,$NF}' |grep -v '(:[0-9]'”

这是一个快速的 Perl 脚本，它将 tmux 和 'who' 输出放在一起。对于共享套接字的使用，将套接字文件作为唯一参数传递，即：“tmux_ls.pl /tmp/shared”：

```
my $sock="";
$sock = "-S ".$ARGV[0] if $ARGV[0];

my $clients = `tmux $sock list-clients`;

# Use open to loop like a file
open my $fh, '<', \$clients or die $!;

printf("%-10.10s\t%-10.10s\t%-10.10s\t%-16.16s\t%s\n", "Session", "TTY", "Username", "Timestamp", "Origin");
while(<$fh>) {
    my @cols = split(' ');
    my ($tty) = $cols[0] =~ /^\/dev\/(pts\/\d+)/;
    my $session = $cols[1];
    my $who = `who | grep $tty`;
    my @whoc = split(' ',$who);

    printf("%-10.10s\t%-10.10s\t%-10.10s\t%-16.16s\t%s\n", $session,$tty,$whoc[0], "$whoc[2] $whoc[3]", $whoc[4]);
} 
```

# windows-installer - 如何解决 windows 安装程序错误安装程序被中断错误

> ID：12507173
> 
> 赞同：2
> 
> 时间：2012-09-20T06:33:25.643
> 
> 标签：windows-installer, installshield, orca

我已经创建了 Windows 应用程序并为此项目创建了一个安装文件。如果我运行 .msi 文件，它正在工作并且安装很好。但是，当我设置 orca 设置并运行应用程序时，我得到了安装错误屏幕。

**错误：**

```
 The installer was interrupted before <MyApp> could be installed.
  You need to restart the installer to try again. 
```

我在网上搜索这个错误，但我没有得到解决，所以最后我在这个网站上发布了这个错误。请帮助我如何解决这个错误。

**注意：** 如果我运行任何 msi 包文件（这是创建的 orca 文件）仅在我的系统中不运行。没有 orca 设置它安装正确..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-22T18:24:21.940

安装 IIS6 兼容性工具为我解决了这个问题。

（注：这是2017年，我在Visual Studio 2015中构建了一个“hello world”wen应用，添加了一个Web部署项目，转移到另一台机器上，出现这个错误——安装2002年写的软件变成了2008 年过时修复了问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:38:30.017

您的问题是 RunSQLList 自定义操作失败。我敢打赌，您的机器上存在一些与 SQL 相关的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T17:23:15.520

你应该做的第一件事是，安装日志，

*   打开提升的 cmd

*   msiexec /i /l*vx setup.log

然后在日志中查找错误代码，通常在停止安装程序的致命错误之前有一行错误代码，根据我的经验，我发现了以下几行：

> 操作 WEBCA_SetTARGETSITE 返回实际错误代码**1603**
> 
> 关闭 MSIHANDLE(11)
> 
> WEBCA_SetTARGETSITE。返回值 3。
> 
> 执行操作：FatalErrorForm。

最后用谷歌搜索该错误代码，在我的情况下，需要在服务器上添加 ISS 6 兼容性角色。添加它后，msi 安装没有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T12:39:12.223

我的修复：

当我以普通用户身份启动 Total Commander，然后启动 MSI 时，它会出错。

当我以管理员身份启动 Total Commander，然后启动 MSI 时，它不会出错。

# asp.net - SelectedDate 不适用于日历对象

> ID：12507174
> 
> 赞同：3
> 
> 时间：2012-09-20T06:33:32.320
> 
> 标签：asp.net

我试图在 ASP.NET 上为 Calendar 对象设置一个新日期，但没有任何改变。这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    if (Page.IsPostBack)
    {
        cld_birth.SelectedDate = new DateTime(2003, 1, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T06:40:57.560

尝试设置`VisibleDate`：

```
if (Page.IsPostBack)
{
    cld_birth.SelectedDate = new DateTime(2003, 1, 1);
    cld_birth.VisibleDate = new DateTime(2003, 1, 1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T09:40:48.030

如果日期包含非午夜时间，则会出现另一个问题，即所选日期未突出显示（即 SelectedDayStyle 被忽略）。你会期望第一个选项没问题。不，不幸的是

```
 Dim oDt As New Date()
            oDt = Now                
            Dim oDtYesterday As New Date
            oDtYesterday = DateAdd(DateInterval.Day, -1, oDt)

            'oDtYesterday is all fine, but does not highlight
            'calDateFrom.SelectedDate = oDtYesterday 

            Dim sDateYesterday As String
            sDateYesterday = Format(oDtYesterday, "dd MMM yyyy")

            Dim oDtY As New Date
            oDtY = CDate(sDateYesterday & " 12:00:00 AM")

            calDateFrom.SelectedDate = oDtY 
            calDateFrom.VisibleDate = calDateFrom.SelectedDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:41:40.263

您必须`SelectedDayStyle`在您的控件中定义。

```
<asp:Calendar ID="cld_birth" runat="server">
   <SelectedDayStyle Font-Size="X-Large" />
</asp:Calendar> 
```

并使用：

```
if (!Page.IsPostBack)
{
  cld_birth.SelectedDate = new DateTime(2003, 1, 1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T06:36:50.680

如果要设置第一次加载页面的时间，则使用**[IsPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)**来确定是第一次加载页面还是回发页面。

```
if (!Page.IsPostBack)
    {
        cld_birth.SelectedDate = new DateTime(2003, 1, 1);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-01T04:01:03.347

按照@Martin-Brennan 的建议做，但代码可能需要放在 Page_PreRender 事件处理程序中。

```
 protected void Page_PreRender(object sender, EventArgs e)
  {
    if (Page.IsPostBack)
    {
      cld_birth.SelectedDate = new DateTime(2003, 1, 1);
      cld_birth.VisibleDate = new DateTime(2003, 1, 1);
    }
  } 
```

# objective-c - 将带有循环的图像添加到 NSArray 以进行动画处理

> ID：12507175
> 
> 赞同：1
> 
> 时间：2012-09-20T06:33:41.370
> 
> 标签：objective-c, xcode

我有 200 多张图像，我希望通过循环将它们添加到 NSArray，我该如何打开它：

```
NSArray *imgArray = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"Ski_Seq0000.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0001.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0002.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0003.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0004.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0005.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0006.jpg"],
                     [UIImage imageNamed:@"Ski_Seq0007.jpg"],nil]; 
```

循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T06:44:55.370

```
 NSMutableArray* imgArray = [[NSMutableArray alloc] arrayWithCapacity:200];

 for(int i = 0; i <= 200; i++)
 {
     UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"Ski_Seq%04d.jpg",i]];
     [imgArray addObject:image];
 } 
```

但是您应该注意内存要求，具体取决于图像的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T06:43:08.130

像这样使用`NSMutableArray`：

```
NSMutableArray *tempArray = [[NSMutableArray alloc] init];
for (int x = 0; x < 200; x++) {
    [tempArray addObject:[NSString stringWithFormat:@"Ski_Seq%04d.jpg",x]];
}

NSArray *imgArray = [NSArray arrayWithArray:tempArray];
[tempArray release];//If you are not using ARC. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T06:43:19.520

做这个：

```
NSMutableArray *ArrImgs = [[NSMutableArray alloc] init];
for(int i=0; i<=199;i++)
{
  NSString *strImg = [NSString stringithFormat:@"Ski_Seq%04d.jpg",i];
  [ArrImgs  addObject:[UIImage imageNamed:strImg]];

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T07:00:41.503

你真的有必要将图像保存在数组中吗？仅将图像的名称存储在数组中怎么样？

```
NSMutableArray* imagesName = [[NSMutableArray alloc] arrayWithCapacity:200];
for(int i = 0; i <= 200; i++){
    [imagesName addObject:[NSString stringWithFormat:@"Ski_Seq%04d",i]];
} 
```

获取图像：

```
for(int i = 0; i <= [imagesName count]; i++){
   UIImage *image = [UIImage imageNamed:[imagesName objectAtIndex:i]];
} 
```

如果您确实需要将图像存储到数组中，可以在此处参考其他答案:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T06:52:04.237

```
 NSMutableArray *te=[[NSMutableArray alloc]init];

    for (int i=0; i<200; i++)
    {

        [te addObject: [UIImage imageNamed: [NSString stringWithFormat:@"Ski_Seq%04d.jpg",i]]];
    }

    NSArray *imgArray=[[NSArray alloc]initWithArray:[ te mutableCopy]];

    NSLog(@"the array::%@",imgArray); 
```

尝试这个...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-20T07:14:38.073

```
 you try this code:

    @interface AnimationViewController : UIViewController
     {

         NSMutableArray *arrayImages;

          UIImageView *infoImage;

          NSTimer *timer;

            int i;

           NSTimeInterval timeInterval;

           NSDate *start;

       }

  -(void)animationStart
   {

   if (i==200) {

  [timer invalidate];
   timer=nil;        
   return;

   }

   NSLog(@"%d",i);

 infoImage.image=[UIImage imageNamed:[arrayImages objectAtIndex:i]];

  i++;
  }

      -(void)viewWillAppear:(BOOL)animated
       {
          [super viewWillAppear:animated];

        NSDate *start1 = [NSDate date];

       timeInterval = [start1 timeIntervalSince1970];

  timer=[NSTimer scheduledTimerWithTimeInterval:0.06 target:self selector:@selector(animationStart) userInfo:nil repeats:YES];

     NSLog(@"time---");

       }

    - (void)viewDidLoad
    {
     [super viewDidLoad];

    infoImage=[[UIImageView alloc]init];
    infoImage.frame=CGRectMake(0, 0, 320, 460);
    infoImage.backgroundColor=[UIColor clearColor];
    infoImage.image=[UIImage imageNamed:@"guideAmbi.png"];
    [self.view addSubview:infoImage];

    i=0;

   infoImage=[[UIImageView alloc]init];
   infoImage.frame=CGRectMake(0, 0, 320, 460);
   infoImage.backgroundColor=[UIColor clearColor];
   infoImage.image=[UIImage imageNamed:@"Info1.png"];
    [self.view addSubview:infoImage];

   arrayImages=[[NSMutableArray alloc]initWithCapacity:200];

    for (int is=1; is<=300; is++) 
    {
    NSString *str=[NSString stringWithFormat:@"Info%i.png",is];
    [arrayImages addObject:str];

     } 
```

# iphone - 如何在 iOS 6 中更新 MKMapview？

> ID：12507182
> 
> 赞同：2
> 
> 时间：2012-09-20T06:34:09.790
> 
> 标签：iphone, mkmapview, ios6

你能告诉我，要在`iOS 6`. 我已经开发了基于地图的应用程序。`iOS 5`它显示效果很好，但是`iOS 5`在我的应用程序中没有显示地图引脚更新后。我如何在 iOS 6 中克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:10:49.463

我的应用程序也有类似的问题。在 iOS 5 下，我在 viewDidLoad 中创建了一个 MKMapView，但我懒得设置地图视图的委托。有时我在设置地图视图的委托之前向地图视图添加注释。这一切都很好，**前提**是委托是在 viewWillAppear （或更早）内设置的。

在 iOS 6 中，这不再有效。在向地图视图添加注释之前，您必须设置委托。

假设：在 iOS 5.x 中，MapKit 在内部缓存注释，并在委托建立后将这些注释传递给地图视图。在 iOS 6 中，无论出于何种原因，这种复杂程度已被移除。无赖... :-(

希望这会有所帮助，戴夫

# java - 将android模拟器指向本地域

> ID：12507190
> 
> 赞同：1
> 
> 时间：2012-09-20T06:35:34.357
> 
> 标签：java, android, tomcat, localhost, dotcms

我提前道歉，我不确定这个问题属于哪个类别，如果你知道，请告诉我，我会更新标签。

我有一个非常令人费解的问题。我有一个 android 应用程序，我想用它来对 dotCMS 内容管理系统进行 REST API 调用。
现在一个示例 REST 调用是
http:// **localhost** /api/content/render/false...
但由于某些奇怪的原因，这个 REST 调用失败了。
http:// **127.0.0.1** /api/content/render/false...
在我看来，CMS 绑定到**localhost**，但不是**127.0.0.1**。我假设 10.0.2.2 重定向到 127.0.0.1 因此我的 android 应用程序无法工作。有没有办法强制android模拟器调用**localhost**而不是127.0.0.1。
或者，有没有办法将我的 Web 应用程序绑定到 127.0.0.1，它与一个 tomcat 服务器捆绑在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:15:44.397

抱歉，我的 Android 应用程序似乎无法访问互联网。该应用程序现在可以使用。

# c# - 实现自定义通用列表/队列/堆栈组合的有效方法

> ID：12507191
> 
> 赞同：2
> 
> 时间：2012-09-20T06:35:36.487
> 
> 标签：c#, .net, list, stack, queue

我发现不止一种情况，泛型集合需要在某个时间点被视为一个列表，而在另一个时间点被视为一个堆栈或队列。对于我目前正在开发的应用程序，使用三个单独的对象是没有意义的。

我能想到的最简单的解决方案是在标准 List 上实现 Queue/Dequeue/Push/Pop/Peek 函数。此外（不包括在下面的代码中），接口约束应用于 T 允许类维护每个列表、队列和堆栈的位置/序数索引。

```
public class List<T>:
    System.Collections.Generic.List<T>
{
    private object SyncRoot = new object();

    public void Enqueue (T item)
    {
        lock (this.SyncRoot)
        {
            this.Add(item);
        }
    }

    public T Dequeue ()
    {
        T item = default(T);

        lock (this.SyncRoot)
        {
            if (this.Count > 0)
            {
                item = this [0];
                this.RemoveAt(0);
            }
        }

        return (item);
    }

    public void Push (T item)
    {
        lock (this.SyncRoot)
        {
            this.Add(item);
        }
    }

    public T Pop ()
    {
        T item = default(T);

        lock (this.SyncRoot)
        {
            if (this.Count > 0)
            {
                item = this [this.Count - 1];
                this.RemoveAt(this.Count - 1);
            }
        }

        return (item);
    }

    public T PeekQueue ()
    {
        T item = default(T);

        lock (this.SyncRoot)
        {
            if (this.Count > 0)
            {
                item = this [0];
            }
        }

        return (item);
    }

    public T PeekStack ()
    {
        T item = default(T);

        lock (this.SyncRoot)
        {
            if (this.Count > 0)
            {
                item = this [this.Count - 1];
            }
        }

        return (item);
    }
} 
```

*   由于这是一个粗略的即时实现，我不确定要注意哪些极端情况，因此我会欣赏指向任何现有此类实现的指针或链接。
*   其次，我对非常大的列表的性能持怀疑态度。从 List 继承的决定是否比对大型列表使用说 LinkedList 更好。就我而言，添加/删除项目比枚举列表具有更高的优先级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:45:45.353

以下是如何使用扩展方法完成类似行为... [http://weblogs.asp.net/bsimser/archive/2011/01/13/generic-pop-and-push-for-list-lt-t-gt .aspx](http://weblogs.asp.net/bsimser/archive/2011/01/13/generic-pop-and-push-for-list-lt-t-gt.aspx)

> 通用流行和推送列表
> 
> 这是我用来扩展通用 List 类以具有与 Stack 类相似的功能的小片段。
> 
> Stack 类很棒，但它存在于 System.Object 下的自己的世界中。有一个可以做同样事情的列表不是很好吗？这是代码：

```
public static class ExtensionMethods    
{ 
    public static T Pop<T>(this List<T> theList)    
    {              
        var local = theList[theList.Count - 1];    
        theList.RemoveAt(theList.Count - 1);    
        return local;   
     }

     public static void Push<T>(this List<T> theList, T item)   
     {   
        theList.Add(item);   
     }   
} 
```

> 这是一个简单的扩展，但我发现它很有用，希望你也会！享受。

也是扩展方法的链接 [http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:07:27.647

我猜你必须使用数组作为内部数据存储，它是如何在.NET List 和其他泛型中实现的。例如，由于对内部数组中所有元素的无用处理，而不是开始索引移动，代码的出队效率低下。可以在 ILSpy 中的 C# 反编译中看到：

```
// System.Collections.Generic.List<T>
/// <summary>Removes the element at the specified index of the <see cref="T:System.Collections.Generic.List`1" />.</summary>
/// <param name="index">The zero-based index of the element to remove.</param>
/// <exception cref="T:System.ArgumentOutOfRangeException">
///   <paramref name="index" /> is less than 0.-or-<paramref name="index" /> is equal to or greater than <see cref="P:System.Collections.Generic.List`1.Count" />.</exception>
public void RemoveAt(int index)
{
    if (index >= this._size)
    {
        ThrowHelper.ThrowArgumentOutOfRangeException();
    }
    this._size--;
    if (index < this._size)
    {
        Array.Copy(this._items, index + 1, this._items, index, this._size - index);
    }
    this._items[this._size] = default(T);
    this._version++;
} 
```

其他功能也可以稍微改进一下。

此外，我注意到 .NET Stack 泛型实现比 List 泛型实现运行缓慢。我认为这是因为在提取时将默认值分配给堆栈的最后一个元素，这与 List 不同：

```
// System.Collections.Generic.Stack<T>
/// <summary>Removes and returns the object at the top of the <see cref="T:System.Collections.Generic.Stack`1" />.</summary>
/// <returns>The object removed from the top of the <see cref="T:System.Collections.Generic.Stack`1" />.</returns>
/// <exception cref="T:System.InvalidOperationException">The <see cref="T:System.Collections.Generic.Stack`1" /> is empty.</exception>
public T Pop()
{
    if (this._size == 0)
    {
        ThrowHelper.ThrowInvalidOperationException(ExceptionResource.InvalidOperation_EmptyStack);
    }
    this._version++;
    T result = this._array[--this._size];
    this._array[this._size] = default(T);
    return result;
} 
```

# multithreading - CoreAnimation 警告删除了未提交 CATransaction 的线程

> ID：12507193
> 
> 赞同：37
> 
> 时间：2012-09-20T06:35:46.017
> 
> 标签：multithreading, core-animation, nsoperation, catransaction

我遇到以下警告的问题：

CoreAnimation：警告，删除了未提交 CATransaction 的线程；在环境中设置 CA_DEBUG_TRANSACTIONS=1 以记录回溯。

我正在使用一个 NSOperation 对象来执行一些计算，一旦完成，它就会向 AppDelegate 发送一条消息，然后隐藏一个进度条并取消隐藏一些按钮。如果我将消息注释回 AppDelegate，警告就会消失，但进度条显然仍然可见且具有动画效果。

我正在使用 xCode 4.4.1 和 OSX 10.8.1，但是，当我在 OSX 10.7.4 上使用相同版本的 xCode 编译和运行代码时，我没有收到警告并且代码按预期运行。

设置 CA_DEBUG_TRANSACTIONS=1 环境变量显示回溯来自 AppDelegate 中的 NSControl setEnabled 消息。

答案可能是盯着我的脸，但也许我喝了太多咖啡！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-26T22:05:53.043

为了与标准 Cocoa 范例保持一致，这里推荐的解决方案是在主线程上执行核心动画工作，使用 GCD 轻松完成：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.delegate redrawSomething];
}); 
```

一般来说，在他们不期望的上下文中调用对象是一种糟糕的形式，所以一个好的经验法则是在向外部模块传递消息时*总是*调度到主线程。

如果从主线程以外的任何上下文调用某些框架（例如 Core Location），它们会发出日志消息。其他人会发出神秘的消息，例如您在此处使用 Core Animation 的示例。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-25T15:36:51.363

你的怀疑是对的。如果 NSOperation 在 CoreAnimation 执行完成之前完成，那么你会收到一个很好的警告：

*CoreAnimation：警告，删除了未提交 CATransaction 的线程；在环境中设置 CA_DEBUG_TRANSACTIONS=1 以记录回溯。*

这也可能发生在某些情况下，当在队列上调度的块触发 CoreAnimation 的某些工作并在 CoreAnimation 完成之前返回。

我使用的解决方案很简单：在请求 CoreAnimation 工作的块或 NSOperation 上，我在退出之前检查工作是否确实已完成。

给你一个概念验证的例子，这是一个在调度队列上调度的块。为了避免警告，我们在退出前检查 CoreAnimation 是否完成。

```
^{

   // 1\. Creating a completion indicator

   BOOL __block animationHasCompleted = NO;

   // 2\. Requesting core animation do do some work. Using animator for instance.

   [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
      [[object animator] perform-a-nice-animation];
   } completionHandler:^{
      animationHasCompleted = YES;
   }];

   // 3\. Doing other stuff…

   …

   // 4\. Waiting for core animation to complete before exiting

   while (animationHasCompleted == NO)
   {
       usleep(10000);
   }

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-05T01:19:17.920

如 Numist 所述，确保任何 UI 绘制发生在主线程上的另一种方法是使用该方法`performSelectorOnMainThread:withObject:waitUntilDone:`或替代`performSelectorOnMainThread:withObject:waitUntilDone:modes:`

```
- (void) someMethod
{
    [...]

    // Perform all drawing/UI updates on the main thread.
    [self performSelectorOnMainThread:@selector(myCustomDrawing:)
                           withObject:myCustomData
                        waitUntilDone:YES];

    [...]
}

- (void) myCustomDrawing:(id)myCustomData
{
    // Perform any drawing/UI updates here.
} 
```

有关区别的相关帖子`dispatch_async()`，`performSelectorOnMainThread:withObjects:waitUntilDone:`请参阅[主队列上的 performSelectorOnMainThread 和 dispatch_async 之间的区别是什么？](https://stackoverflow.com/questions/9335434/whats-the-difference-between-performselectoronmainthread-and-dispatch-async-on-m)

# android - 如何在android中显示pdf文件和编辑内容

> ID：12507194
> 
> 赞同：8
> 
> 时间：2012-09-20T06:35:47.380
> 
> 标签：android, pdf-viewer

我想从本地打开 PDF 文件，然后显示 PDF 内容，然后如果用户复制任何文本，那么我想获取复制的文本。所以请向我建议与此问题相关的任何 API 或解决方案，而具有挑战性的任务是复制文本并获得我想要的。我也使用了此代码，但它通过使用 adobe reader 之类的内部应用程序打开了 PDF，所以我不知道 adobe reader 允许我访问复制文本。

```
File file = new File(Environment.getExternalStorageDirectory() + "/test.pdf");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file),"application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T06:41:00.227

考虑到它的易用性，[PDFBox将是您的最佳选择。](http://pdfbox.apache.org/)您可以查看[示例](http://pdfbox.apache.org/userguide/text_extraction.html)并立即开始..

**编辑：**正如@Adinia 指出的那样，PDFBox 不适用于Android。原因是 PDFBox 即使对于非 ui 相关的任务也使用 AWT 和 Swing，而 Android 不支持这些。

您可以[试试 PDFjet](http://pdfjet.com/os/edition.html)，这里有一些[示例](http://pdfjet.com/java/by-example.html)可以帮助您入门。

**编辑 2：** **[PDFBox-Android](https://github.com/Birdbrain2/PdfBox-Android)**（顾名思义）现在可用于 Android，因为@Theo 很乐意告知。

# jquery - 使用简单的正则表达式包装内容

> ID：12507199
> 
> 赞同：0
> 
> 时间：2012-09-20T06:36:19.437
> 
> 标签：jquery, regex, text

我正在尝试使用正则表达式将一些内容包装在一个名为“.info”的类中

```
 <div id="content">
content content content content content

INFO Information content information content ENDINFO
</div>​ 
```

这是我的开始。

```
 $(document)ready(function(){
var content = $('#content').html();
var regex = /INFO.*ENDINFO/gi;
var info = content.match(regex);

$('.INFO').html(info);
});​ 
```

预期结果：

```
 <div id="content">
content content content content content

<div class="info"> Information content information content </div>
</div>​ 
```

什么可以替代正则表达式？我不熟悉`.find`属性，但这行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:45:57.037

将正则表达式更改为：

```
var regex = /INFO(.*)ENDINFO/gi;
$('.INFO').html(info[1]); 
```

它被称为捕获类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:47:25.790

如果你仍然想用正则表达式来做，试试这个：

```
$('#content').html(content.replace(/info(.*)endinfo/gi, 
   '<span class="info">$1</span>')); 
```

# python - 如何完全遍历未知深度的复杂字典？

> ID：12507206
> 
> 赞同：75
> 
> 时间：2012-09-20T06:36:47.943
> 
> 标签：python, json, dictionary, python-2.7

导入 from`JSON`可以获得非常复杂和嵌套的结构。例如：

```
{u'body': [{u'declarations': [{u'id': {u'name': u'i',
                                       u'type': u'Identifier'},
                               u'init': {u'type': u'Literal', u'value': 2},
                               u'type': u'VariableDeclarator'}],
            u'kind': u'var',
            u'type': u'VariableDeclaration'},
           {u'declarations': [{u'id': {u'name': u'j',
                                       u'type': u'Identifier'},
                               u'init': {u'type': u'Literal', u'value': 4},
                               u'type': u'VariableDeclarator'}],
            u'kind': u'var',
            u'type': u'VariableDeclaration'},
           {u'declarations': [{u'id': {u'name': u'answer',
                                       u'type': u'Identifier'},
                               u'init': {u'left': {u'name': u'i',
                                                   u'type': u'Identifier'},
                                         u'operator': u'*',
                                         u'right': {u'name': u'j',
                                                    u'type': u'Identifier'},
                                         u'type': u'BinaryExpression'},
                               u'type': u'VariableDeclarator'}],
            u'kind': u'var',
            u'type': u'VariableDeclaration'}],
 u'type': u'Program'} 
```

行走上述复杂结构的推荐方法是什么？

除了一些列表之外，大部分是字典，结构可以变得更加重叠，所以我需要一个通用的解决方案。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-20T07:04:40.437

您可以使用递归生成器将字典转换为平面列表。

```
def dict_generator(indict, pre=None):
    pre = pre[:] if pre else []
    if isinstance(indict, dict):
        for key, value in indict.items():
            if isinstance(value, dict):
                for d in dict_generator(value, pre + [key]):
                    yield d
            elif isinstance(value, list) or isinstance(value, tuple):
                for v in value:
                    for d in dict_generator(v, pre + [key]):
                        yield d
            else:
                yield pre + [key, value]
    else:
        yield pre + [indict] 
```

它返回

```
[u'body', u'kind', u'var']
[u'init', u'declarations', u'body', u'type', u'Literal']
[u'init', u'declarations', u'body', u'value', 2]
[u'declarations', u'body', u'type', u'VariableDeclarator']
[u'id', u'declarations', u'body', u'type', u'Identifier']
[u'id', u'declarations', u'body', u'name', u'i']
[u'body', u'type', u'VariableDeclaration']
[u'body', u'kind', u'var']
[u'init', u'declarations', u'body', u'type', u'Literal']
[u'init', u'declarations', u'body', u'value', 4]
[u'declarations', u'body', u'type', u'VariableDeclarator']
[u'id', u'declarations', u'body', u'type', u'Identifier']
[u'id', u'declarations', u'body', u'name', u'j']
[u'body', u'type', u'VariableDeclaration']
[u'body', u'kind', u'var']
[u'init', u'declarations', u'body', u'operator', u'*']
[u'right', u'init', u'declarations', u'body', u'type', u'Identifier']
[u'right', u'init', u'declarations', u'body', u'name', u'j']
[u'init', u'declarations', u'body', u'type', u'BinaryExpression']
[u'left', u'init', u'declarations', u'body', u'type', u'Identifier']
[u'left', u'init', u'declarations', u'body', u'name', u'i']
[u'declarations', u'body', u'type', u'VariableDeclarator']
[u'id', u'declarations', u'body', u'type', u'Identifier']
[u'id', u'declarations', u'body', u'name', u'answer']
[u'body', u'type', u'VariableDeclaration']
[u'type', u'Program'] 
```

**更新**：修复了注释中提到的从`[key] + pre`到的键列表。`pre + [key]`

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-20T06:58:40.767

如果您只需要遍历字典，我建议使用递归`walk`函数，该函数接受字典，然后递归遍历其元素。像这样的东西：

```
def walk(node):
    for key, item in node.items():
        if item is a collection:
            walk(item)
        else:
            It is a leaf, do your thing 
```

如果您还想搜索元素，或查询多个通过特定条件的元素，请查看[jsonpath](http://goessner.net/articles/JsonPath/)模块。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-23T09:12:38.670

`json`您可以根据任务从标准库模块扩展编码器和解码器，而不是编写自己的解析器。

我推荐这个，特别是如果您需要将属于自定义类的对象编码到 json 中。如果您必须执行一些也可以在 json 的字符串表示上完成的操作，请考虑迭代 JSONEncoder().iterencode

对于这两个参考是[http://docs.python.org/2/library/json.html#encoders-and-decoders](http://docs.python.org/2/library/json.html#encoders-and-decoders)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-20T07:53:10.367

如果您知道数据的含义，您可能希望创建一个`parse`函数来将嵌套容器转换为自定义类型的对象树。然后，您将使用这些自定义对象的方法来执行您需要对数据执行的任何操作。

对于您的示例数据结构，您可以创建`Program`、`VariableDeclaration`、`VariableDeclarator`、和类`Identifier`，然后在解析器中使用类似这样的内容：`Literal``BinaryExpression`

```
def parse(d):
    t = d[u"type"]

    if t == u"Program":
        body = [parse(block) for block in d[u"body"]]
        return Program(body)

    else if t == u"VariableDeclaration":
        kind = d[u"kind"]
        declarations = [parse(declaration) for declaration in d[u"declarations"]]
        return VariableDeclaration(kind, declarations)

    else if t == u"VariableDeclarator":
        id = parse(d[u"id"])
        init = parse(d[u"init"])
        return VariableDeclarator(id, init)

    else if t == u"Identifier":
        return Identifier(d[u"name"])

    else if t == u"Literal":
        return Literal(d[u"value"])

    else if t == u"BinaryExpression":
        operator = d[u"operator"]
        left = parse(d[u"left"])
        right = parse(d[u"right"])
        return BinaryExpression(operator, left, right)

    else:
        raise ValueError("Invalid data structure.") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-10T00:49:06.120

也许可以帮助：

```
def walk(d):
    global path
      for k,v in d.items():
          if isinstance(v, str) or isinstance(v, int) or isinstance(v, float):
            path.append(k)
            print "{}={}".format(".".join(path), v)
            path.pop()
          elif v is None:
            path.append(k)
            ## do something special
            path.pop()
          elif isinstance(v, dict):
            path.append(k)
            walk(v)
            path.pop()
          else:
            print "###Type {} not recognized: {}.{}={}".format(type(v), ".".join(path),k, v)

mydict = {'Other': {'Stuff': {'Here': {'Key': 'Value'}}}, 'root1': {'address': {'country': 'Brazil', 'city': 'Sao', 'x': 'Pinheiros'}, 'surname': 'Fabiano', 'name': 'Silos', 'height': 1.9}, 'root2': {'address': {'country': 'Brazil', 'detail': {'neighbourhood': 'Central'}, 'city': 'Recife'}, 'surname': 'My', 'name': 'Friend', 'height': 1.78}}

path = []
walk(mydict) 
```

将产生如下输出：

```
Other.Stuff.Here.Key=Value 
root1.height=1.9 
root1.surname=Fabiano 
root1.name=Silos 
root1.address.country=Brazil 
root1.address.x=Pinheiros 
root1.address.city=Sao 
root2.height=1.78 
root2.surname=My 
root2.name=Friend 
root2.address.country=Brazil 
root2.address.detail.neighbourhood=Central 
root2.address.city=Recife 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-12-05T01:39:49.257

如果接受的答案对您有用，但您还想要一个完整的、有序的路径，其中包含嵌套数组的数字索引，那么这种轻微的变化将起作用：

```
def dict_generator(indict, pre=None):
    pre = pre[:] if pre else []
    if isinstance(indict, dict):
        for key, value in indict.items():
            if isinstance(value, dict):
                for d in dict_generator(value,  pre + [key]):
                    yield d
            elif isinstance(value, list) or isinstance(value, tuple):
                for k,v in enumerate(value):
                    for d in dict_generator(v, pre + [key] + [k]):
                        yield d
            else:
                yield pre + [key, value]
    else:
        yield indict 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-02T03:49:32.527

对上述解决方案的一些补充（处理 json 包括列表）

```
#!/usr/bin/env python

import json

def walk(d):
   global path
   for k,v in d.items():
      if isinstance(v, str) or isinstance(v, int) or isinstance(v, float):
         path.append(k)
         print("{}={}".format(".".join(path), v)) 
         path.pop()
      elif v is None:
         path.append(k)
         # do something special
         path.pop()
      elif isinstance(v, list):
         path.append(k)
         for v_int in v:
            walk(v_int)
         path.pop()
      elif isinstance(v, dict):
         path.append(k)
         walk(v)
         path.pop()
      else:
         print("###Type {} not recognized: {}.{}={}".format(type(v), ".".join(path),k, v))

with open('abc.json') as f:
   myjson = json.load(f)

path = []
walk(myjson) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-23T07:20:16.313

我更灵活的版本如下：

```
def walktree(tree, at=lambda node: not isinstance(node, dict), prefix=(), 
                flattennode=lambda node:isinstance(node, (list, tuple, set))):
    """
    Traverse a tree, and return a iterator of the paths from the root nodes to the leaf nodes.
    tree: like '{'a':{'b':1,'c':2}}'
    at: a bool function or a int indicates levels num to go down. walktree(tree, at=1) equivalent to tree.items()
    flattennode: a bool function to decide whether to iterate at node value
    """
    if isinstance(at, int):
        isleaf_ = at == 0
        isleaf = lambda v: isleaf_
        at = at - 1
    else:
        isleaf = at
    if isleaf(tree):
        if not flattennode(tree):
            yield (*prefix, tree)
        else:
            for v in tree:
                yield from walktree(v, at, prefix, flattennode=flattennode)
    else:
        for k,v in tree.items():
            yield from walktree(v, at, (*prefix, k), flattennode=flattennode) 
```

用法：

```
> list(walktree({'a':{'b':[0,1],'c':2}, 'd':3}))
[('a', 'b', 0), ('a', 'b', 1), ('a', 'c', 2), ('d', 3)]
> list(walktree({'a':{'b':[0,1],'c':2}, 'd':3}, flattennode=lambda e:False))
[('a', 'b', [0, 1]), ('a', 'c', 2), ('d', 3)]
> list(walktree({'a':{'b':[0,1],'c':2}, 'd':3}, at=1))
[('a', {'b': [0, 1], 'c': 2}), ('d', 3)]
> list(walktree({'a':{'b':[0,{1:9,9:1}],'c':2}, 'd':3}))
[('a', 'b', 0), ('a', 'b', 1, 9), ('a', 'b', 9, 1), ('a', 'c', 2), ('d', 3)]
> list(walktree([1,2,3,[4,5]]))
[(1,), (2,), (3,), (4,), (5,)] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-26T22:12:27.830

要遍历/映射整个 JSON 结构，可以使用以下代码：

```
def walk(node, key):
    if type(node) is dict:
        return {k: walk(v, k) for k, v in node.items()}
    elif type(node) is list:
        return [walk(x, key) for x in node]
    else:
        return YourFunction(node, key)

def YourFunction(node, key):
    if key == "yourTargetField":   # for example, you want to modify yourTargetField
        return "Modified Value"
    return node # return existing value 
```

这将遍历您的整个 json 结构并通过您的函数运行每个叶子（端点键值对）。Yourfunction 返回修改后的值。整个 walk 函数将按顺序为您提供一个新的、已处理的对象。

# javascript - 在淘汰赛中，使用 attr{.....} 和不使用有什么区别？

> ID：12507208
> 
> 赞同：2
> 
> 时间：2012-09-20T06:36:50.370
> 
> 标签：javascript, knockout.js

我阅读了文档[http://knockoutjs.com/documentation/attr-binding.html](http://knockoutjs.com/documentation/attr-binding.html)但不明白为什么

```
 <img data-bind="attr: {src: imgname}"/> 
```

有效，但

```
 <img data-bind="src: imgname"/> 
```

才不是...

* * *

这个`attr`绑定到底有什么作用，有什么特别之处`src`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:45:48.563

为什么要`"src: imgname"`工作？

Knockout 中只有几个用于控制文本外观的内置绑定，如下所示：

*   可见的
*   文本
*   html
*   css
*   风格
*   **属性**

如您所见`src`，不在列表中。所有内置的或多或少都是不言自明的，但是当您想在没有内置支持的情况下绑定到其他一些属性时，例如`src`您需要使用通用`attr`语法。

如[文档](http://knockoutjs.com/documentation/attr-binding.html)中所述：

> **attr 绑定提供了一种通用方法来**为关联的 DOM 元素设置任何属性的值。这很有用，例如，当您需要根据视图模型中的值设置元素的标题属性、**img 标记的 src**或链接的 href 时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:41:28.400

data-bind html5 属性中的 'attr' 是 Knoclout.JS 预定义的绑定，相反，第二个示例中的 'src' 不是。

# java - 有没有一种简单的方法可以将 JSP 与 RESTeasy 一起使用？

> ID：12507209
> 
> 赞同：0
> 
> 时间：2012-09-20T06:36:53.810
> 
> 标签：java, jsp, resteasy

**我开发了一个使用RESTeasy**框架来传递 xml 和 json 的 RESTful 服务。现在我想在该服务之上开发一个小型 Web 前端，但我无法在不集成 Spring 或其他类似框架的情况下直接在该框架中使用 JSP 文件。

是否有一种简单的方法可以直接在 RESTeasy 中使用**JSP 文件**（例如呈现 jsp 并将生成的 HTML 传送到 Web 浏览器）？

也许你知道一个我还找不到的教程（到目前为止我能找到的每个教程都是关于 json/xml 或字符串的？

# jquery - 从 $.post 中的 url 输出的格式错误的文本

> ID：12507213
> 
> 赞同：3
> 
> 时间：2012-09-20T06:36:59.453
> 
> 标签：jquery, ajax, .post

这些是我的调用参数

```
$.post('checklogin_is.php', data, handleAjaxResponse, 'text'); 
```

回调函数是：

```
function handleAjaxResponse(data) {
   if($.trim(data)=='yes') 
      {
         //some more code 
      }
    else 
      {
         if($.trim(data)=='no')
            {
               //some code      
            }
         else
            {
               //some code
            }
          }         
        } 
```

如您所见， checklogin_is.php 应该回显“是”或“否”。但是，我得到的不是那个，而是“是”或“否”，开头有一个额外的空格，因此我无法获得要由 if 语句评估的数据。

我正在使用`$.trim(data)`作为一种解决方法，但我想知道为什么我会得到这个额外的空白，以及是否有任何其他方法可以解决这个问题。提前致谢

php代码：

```
<?php session_start();

require_once('D:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\is-c.php');

$un = htmlspecialchars($_POST['usnm'],ENT_QUOTES);
$unp = $_POST['usnmp'];

$query_lg = "SELECT * FROM incm_s WHERE s_un='".$un."'";

$user_row = $isdb->get_row( $query_lg, ARRAY_A);

if($user_row['s_id'] > 0)
{
    if(strcmp($user_row['s_pd'],$unp)==0)
    {
        $_SESSION['un_is']=$user_row['s_un']; 
        $_SESSION['utype_is']=$user_row['s_type'];
        echo 'yes';
    }
    else
        echo 'no'; 
}
else
    echo 'no'; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:52:07.157

Make sure there is no whitespace in the file before `<?php session_start();`; this would not only be echoed, but will also [break your session](http://php.net/manual/en/function.session-start.php#108901).

Another thing to try is checking to see if any included files (e.g. "is-c.php") have whitespace outside of any PHP tags. Note that you can leave off any closing PHP tags at the end of files to make sure there are no newline characters being echoed.

# jndi - 如何进行独立于服务器的 JNDI 查找？

> ID：12507215
> 
> 赞同：0
> 
> 时间：2012-09-20T06:37:03.920
> 
> 标签：jndi

我们必须重用一段有一些 jdbc 调用的代码。现有代码在我们无法修改的 jar 中。他们正在为类似这样的数据库连接进行 JNDI 查找

```
InitialContext context = new InitialContext();
DataSource dataSource = (DataSource) context.lookup("java:jdbc/testDB"); 
```

这在 JBoss 中工作正常，但我们试图在 Tomcat 服务器中使用相同的，但它失败了。经过一番谷歌搜索后，我发现对于 tomcat 我需要做这样的事情。

```
InitialContext context = new InitialContext();
DataSource dataSource = (DataSource) context.lookup("java/comp/env/:jdbc/testDB"); 
```

我无法将代码修改为仅用于 tomcat 的 java/comp/env。是否有一种独立于服务器的方式（通过一些配置文件）来解决这个问题，以便我可以在不修改代码的情况下找到资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:01:15.200

那个“特定的代码”是 - 什么？如果是`EJB, Servlet, JSP`.. 您可以执行注入：

```
@Resource(mappedName = "jdbc/testDB")
DataSource dataSource; 
```

# ios5 - 如何检测用户在 iPad 蓝牙键盘上的点击

> ID：12507218
> 
> 赞同：1
> 
> 时间：2012-09-20T06:37:27.987
> 
> 标签：ios5, bluetooth, uitextfield, uitextview, keyboard-events

我使用蓝牙键盘连接到 iPad 中的应用程序。我用它在 UITextView 或 UITextField 上打字。现在我需要检测用户是否从该蓝牙键盘上点击 Command + Z 按钮。是否有任何通知事件可以检测到这一点？我已阅读此[NSEvent addGlobalMonitorForEventsMatchingMask: Hotkey Intercepting](https://stackoverflow.com/questions/12379961/nsevent-addglobalmonitorforeventsmatchingmask-hotkey-intercepting) it use `NSEvent`，但我认为我不能在 iPad 应用程序中使用它。有人可以指出我必须做什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:16:15.140

很好的问题 - 我在最近的项目中遇到了这个巨大的问题。当您使用蓝牙键盘和内置键盘时，有两种方法会做出不同的响应 - uikeyboardwillshownotification 和 uikeybaordwillhidenotification。在这些方法中保留一些 nslog 并查看响应。另一种方法是在您的文本字段开始编辑时查看键盘的框架大小 - textfielddidbeginediting - 尝试查看键盘的框架 - 蓝牙的高度为零 - 使用它可以解决您的问题

# log4j - 是否可以将格式修饰符用于组合的两个转换字符？

> ID：12507220
> 
> 赞同：4
> 
> 时间：2012-09-20T06:37:37.567
> 
> 标签：log4j

我知道如何使用 log4j 输出类名和方法名，这两个字段可以分别对齐和填充，例如这种模式：

```
[%d{ISO8601}] %-5p %-10C{1}:%-10M %m%n 
```

产生类似的东西：

```
[2012-09-20 08:25:12,111] WARN  Class     :method     Logtext1 which should align
[2012-09-20 08:25:12,111] WARN  ClassTwo  :methodName Logtext2 which should align 
```

这将对齐记录的文本（在大多数情况下），但类名和方法名的间距很难看。

所以我想输出的是这样的：

```
[2012-09-20 08:25:12,111] WARN  Class:method          Logtext1 which should align
[2012-09-20 08:25:12,111] WARN  ClassTwo:methodName   Logtext2 which should align 
```

这可能仅使用配置吗？

你能建议另一种输出方法名和类名的方法，保持记录的消息文本对齐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:52:52.777

似乎仅使用配置是不可能的。下一个更简单的解决方案似乎是自定义 PatternLayout，然后可以在 log4j.ini 中使用字符“b”：

log4j.appender.filelog.layout= your.full.namespace.BPatternLayout log4j.appender.filelog.layout.ConversionPattern=[%d{ISO8601}] %-5p %-30b %m%n

希望它也对其他人有所帮助。

BPatternLayout.java：

```
import org.apache.log4j.PatternLayout;
import org.apache.log4j.helpers.PatternParser;

public class BPatternLayout extends PatternLayout
{
    @Override
    protected PatternParser createPatternParser(String pattern)
    {
        return new BPatternParser(pattern);
    }
} 
```

BPatternParser.java：

```
import org.apache.log4j.helpers.FormattingInfo;
import org.apache.log4j.helpers.PatternConverter;
import org.apache.log4j.helpers.PatternParser;
import org.apache.log4j.spi.LocationInfo;
import org.apache.log4j.spi.LoggingEvent;

public class BPatternParser extends PatternParser
{
    public BPatternParser(String pattern)
    {
        super(pattern);
    }

    @Override
    protected void finalizeConverter(char c)
    {
        switch (c)
        {
        case 'b':
            currentLiteral.setLength(0);
            addConverter(new BPatternConverter(formattingInfo));
            break;
        default:
            super.finalizeConverter(c);
        }   
    }

    private class BPatternConverter extends PatternConverter
    {
        BPatternConverter(FormattingInfo formattingInfo)
        {
            super(formattingInfo);
        }

        @Override
        protected String convert(LoggingEvent evt)
        {
            LocationInfo locationInfo = evt.getLocationInformation();
            return getPartialClassName(locationInfo, 1) + ":" + locationInfo.getMethodName();
        }

        /**
         * Code from org.apache.log4j.helpers.PatternParser.NamedPatternConverter
         */
        private String getPartialClassName(LocationInfo loc, int precision)
        {
            String n = loc.getClassName();
            if (precision <= 0) {
                return n;
            }

            int len = n.length();

            // We substract 1 from 'len' when assigning to 'end' to avoid out of
            // bounds exception in return r.substring(end+1, len). This can happen if
            // precision is 1 and the category name ends with a dot.
            int end = len - 1;
            for (int i = precision; i > 0; i--)
            {
                end = n.lastIndexOf('.', end - 1);
                if (end == -1)
                    return n;
            }
            return n.substring(end + 1, len);
        }
    }
} 
```

# ruby-on-rails - 如何在 Rails 应用程序中调试 resque 作业

> ID：12507221
> 
> 赞同：11
> 
> 时间：2012-09-20T06:37:48.217
> 
> 标签：ruby-on-rails, ruby, resque

如何在 Rails 应用程序中调试 resque 作业？我只想在 self.perform 函数的日志文件中写一些信息。我写了这个

> system("echo sos >> /home/maruf/Desktop/log.txt")

在 self.perform() 中。但是什么也没发生。什么是正确的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T06:40:13.167

为什么不使用该`Logger`设施？

```
log = Logger.new 'log/resque.log'
log.debug "foo bar" 
```

然后`tail -f`你新生成的登录`"#{Rails.root}/log/resque.log'`。**请记住重新启动您的 resque 工作人员，因为他们缓存代码并且不会像您的开发环境的其他部分一样接收更改！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T00:03:27.750

`Rails.logger`应该可以正常工作：

```
Rails.logger.debug('foo bar') 
```

# c# - 将逗号分隔的文件另存为 txt，得到奇怪的字符

> ID：12507222
> 
> 赞同：3
> 
> 时间：2012-09-20T06:37:48.783
> 
> 标签：c#, asp.net, export-to-excel

我正在从 SQL 数据库中检索数据并将其保存为“.txt”作为逗号分隔的文件，使用 Web 应用程序作为开发环境。我唯一的问题是在第一列的开头它添加了一些垃圾字符。

前任。¼¤日期、时间

尝试使用`Encoding.ASCII`和新`UTF8Encoding(false)`的但解决了这个错误。

但是其余的数据是完美的。下面的代码是用于保存数据的代码。

```
 System.IO.StringWriter sWriter;
        System.Text.StringBuilder sb = new System.Text.StringBuilder();

        sWriter = new System.IO.StringWriter(sb);
        string Str;

        for (int k = 0; k < (grdGridView.Columns.Count); k++)
        {
            if (k == (grdGridView.Columns.Count) - 1)
                sWriter.Write(grdGridView.HeaderRow.Cells[k].Text);
            else
                sWriter.Write(grdGridView.HeaderRow.Cells[k].Text + ","); 
        }

        sWriter.WriteLine("");

        for (int i = 0; i < (grdGridView.Rows.Count); i++)
        {

            for (int j = 0; j < (grdGridView.Columns.Count); j++)
            {

                Str = (grdGridView.Rows[i].Cells[j].Text.ToString());

                if (Str == "&nbsp;")
                    Str = "";

                if (j != (grdGridView.Columns.Count) - 1)
                { Str = (Str + ","); }

                sWriter.Write(Str);
            }
            sWriter.WriteLine();
        }
        sWriter.Close();

        // Download File Directly to Web Server
        //string HtmlInfo = sWriter.ToString().Trim();
        string HtmlInfo = sWriter.ToString();
        string DocFileName = fileName1 + ".txt";
        string FilePathName = Server.MapPath("~/Download");
        FilePathName = FilePathName + "\\" + DocFileName;
        File.Delete(FilePathName);
        FileStream Fs = new FileStream(FilePathName, FileMode.Create);
        BinaryWriter BWriter = new BinaryWriter(Fs, Encoding.GetEncoding("UTF-8"));
        BWriter.Write(HtmlInfo);
        BWriter.Close();
        Fs.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:41:20.583

前导字符是 unicode [Byte Order Mark](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)。

您可以使用`new UTF8Encoding(false)`而不是禁用 BOM 的输出`Encoding.GetEncoding("UTF-8")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:59:45.430

```
 string HtmlInfo = sWriter.ToString();
 ....
 BinaryWriter BWriter = ...
 BWriter.Write(HtmlInfo); 
```

在这里使用 BinaryWriter 没有什么意义。您看到的字符是由 BinaryWriter 附加到字符串[的长度前缀。](http://msdn.microsoft.com/en-us/library/yzxa6408%28v=vs.100%29.aspx)

请改用 TextWriter，或将 sWriter 的内容作为`byte[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:40:38.447

尝试 Encoding.ASCII 而不是 .GetEncoding("UTF-8")

# google-bigquery - 所有 bq 工作的摘要

> ID：12507224
> 
> 赞同：5
> 
> 时间：2012-09-20T06:38:05.273
> 
> 标签：google-bigquery

有没有办法在给定的时间范围内使用 bq 命令行工具列出所有作业 ID？我需要做的是遍历所有Id并查找是否有任何错误。

我使用 Web 界面来了解作业 ID，然后使用以下命令：

```
bq show -j --format=prettyjson job_id 
```

后来我会手动复制粘贴输出的“错误”部分。这需要花费大量时间来报告给定日期的作业摘要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:18:02.167

当然，您可以通过运行以下命令列出您有权访问的项目的最后 1,000 个作业：

```
bq  ls -j --max_results=1000 project_number 
```

如果您有超过 1,000 个作业，您还可以编写一个 Python 脚本，通过分页浏览 1,000 个批次的结果来列出*所有作业- 如下所示：*

```
import httplib2
import pprint
import sys

from apiclient.discovery import build
from apiclient.errors import HttpError

from oauth2client.client import AccessTokenRefreshError
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.client import flow_from_clientsecrets
from oauth2client.file import Storage
from oauth2client.tools import run

# Enter your Google Developer Project number
PROJECT_NUMBER = 'XXXXXXXXXXXX'

FLOW = flow_from_clientsecrets('client_secrets.json',
                               scope='https://www.googleapis.com/auth/bigquery')

def main():

  storage = Storage('bigquery_credentials.dat')
  credentials = storage.get()

  if credentials is None or credentials.invalid:
    credentials = run(FLOW, storage)

  http = httplib2.Http()
  http = credentials.authorize(http)

  bigquery_service = build('bigquery', 'v2', http=http)
  jobs = bigquery_service.jobs()

  page_token=None
  count=0

  while True:
    response = list_jobs_page(jobs, page_token)
    if response['jobs'] is not None:
      for job in response['jobs']:
        count += 1
        print '%d. %s\t%s\t%s' % (count,
                                  job['jobReference']['jobId'],
                                  job['state'],
                                  job['errorResult']['reason'] if job.get('errorResult') else '')
    if response.get('nextPageToken'):
      page_token = response['nextPageToken']
    else:
      break

def list_jobs_page(jobs, page_token=None):
  try:
    jobs_list = jobs.list(projectId=PROJECT_NUMBER,
                          projection='minimal',
                          allUsers=True,
                          maxResults=1000,
                          pageToken=page_token).execute()

    return jobs_list

  except HttpError as err:
    print 'Error:', pprint.pprint(err.content)

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:52:15.310

以下 shell 脚本接近我需要报告的内容。

```
#!/bin/sh
bq ls  -j `bq show | grep ^Project | awk '{print $2}'` | grep "`date +'%d %b'`" | awk '{print $1}' > tosave.txt

for myjob in `cat tosave.txt`
do
bq ls  -j `bq show | grep ^Project | awk '{print $2}'` | grep $myjob

bq show --format=prettyjson -j $myjob | grep -C2 "message" | head

done 
```

# vb.net - 如何在 VB.Net 的面板中获取滚动条？

> ID：12507228
> 
> 赞同：8
> 
> 时间：2012-09-20T06:38:52.407
> 
> 标签：vb.net, scrollbar, panel

我正在 VB.Net 中开发一个 Windows 应用程序。在这种情况下，有一个表格，在那个表格中有一个面板，在面板内有一个富文本框。

所以我的要求是在面板中获得一个滚动条。因此，当用户在面板上滚动时，富文本框可以像 MS Office 功能一样相应地滚动。

谁能给我一个想法怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T11:41:28.403

`Panel.AutoScroll = True`只要面板中的任何控件超出其边界，设置和滚动条就会自动出现。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T06:42:01.427

对于richtextbox，将.Dock 属性设置为FILL，将.WordWrap 属性设置为FALSE。

还将 Panel 的 .Dock 属性设置为 FILL。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-02T15:51:26.557

为了使用面板自动滚动属性，我这样做：

```
panel.AutoScroll = true
panel.VerticalScroll.Visible = False or panel.HorizontalScroll.Visible = False 
```

为了知道 scroolbars 的尺寸，请使用

```
SystemInformation.HorizontalScrollBarHeight
SystemInformation.VerticalScrollBarWidth 
```

因此，您可以在显示滚动条时更改面板的尺寸。

# r - 如何使用 testthat 包使测试失败？

> ID：12507229
> 
> 赞同：0
> 
> 时间：2012-09-20T06:38:59.673
> 
> 标签：r, unit-testing, testthat

我有一个测试，如果不满足先决条件（例如，丢失文件或其他东西），我想让它失败。

只是为了澄清，这是我想做的一个例子：

```
test_that("...", {
    if ( ... precondition to execute the test is not met... ) {
        expect_true(FALSE) # Make it fail without going further
    }

    expect_that( ... real test here ...)
}) 
```

**现在我的问题是：在***testthat*包中是否有类似`fail()`的期望，或者我必须一直写？*`expect_true(FALSE)`*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:53:18.867

暂时没有`fail`功能`testthat`。我想你想要类似的东西

```
fail <- function(message = "Failure has been forced.", info = NULL, label = NULL)
{
  expect_that(
    NULL,
    function(message)
    {
      expectation(FALSE, message) 
    },
    info,
    label
  )
} 
```

用法是，例如，

```
test_that("!!!", fail()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:04:34.837

失败不是一种选择...

尝试使用`stop`：

```
test_that("testingsomething", {
  if(file.exists("foo.txt")){
      stop("foo.txt already exists")
   }
  foo = writeFreshVersion("foo.txt")
  expect_true(file.exists("foo.txt"))
}
) 
```*

# c# - 通过 C# 启用 OCR 的 pdf

> ID：12507231
> 
> 赞同：1
> 
> 时间：2012-09-20T06:39:28.840
> 
> 标签：c#, pdf, acrobat

我正在使用 acrobat sdk 将图像 pdf 转换为可搜索的文本 pdf，任何人都可以帮助我，我被卡住了，我需要检查文件是否已经是 OCR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:51:11.090

您可以尝试使用此示例将[OCR](http://www.codeproject.com/Articles/41709/How-To-Use-Office-2007-OCR-Using-C)应用于 pdf 文档中的图像

# nio - 循环字节通道

> ID：12507233
> 
> 赞同：0
> 
> 时间：2012-09-20T06:39:55.630
> 
> 标签：nio, java-io

在阅读旧的**InputStream**时，我使用了以下代码（我从来不习惯）：

```
 int read = 0;
    InputStream is = ....;

    while((i = is.read() != -1){

        ....
    } 
```

现在我正在尝试使用 NIO从**InputStream读取 10MB ：**

```
 protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        System.out.println("In Controller.doPost(...)");

        ByteBuffer chunk = ByteBuffer.allocateDirect(1000000);

        /* Source channel */
        int numRead = 0;
        ReadableByteChannel rbc = Channels.newChannel(request.getInputStream());

        /* Destination channel */
        File destFile = new File(
                "D:\\SegyDest.sgy");
        FileOutputStream destFileFos = new FileOutputStream(destFile);
        FileChannel destFileChannel = destFileFos.getChannel();

        /* Read-Write code */
        while (numRead >= 0) {
            chunk.rewind();
            numRead = rbc.read(chunk);

            System.out.println("numRead = " + numRead);

            chunk.rewind();
            destFileChannel.write(chunk);
        }

        /* clean-up */
        rbc.close();
        destFileChannel.close();
        destFileFos.close();

        request.setAttribute("ops", "File Upload");
        request.getRequestDispatcher("/jsp/Result.jsp").forward(request,
                response);
    } 
```

我的问题是**/* 如何遍历源通道来读取所有字节？*/**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:51:30.407

或者以超过 1 个字节的块执行 IO，API 如下所示：

```
byte[] bA = new byte[4096];
int i;
InputStream is = ....;
OutputStream os = ....;

while((i = is.read(bA) != -1){
    os.write(bA, 0, i);
} 
```

我看过你的另一个问题，我的评论仍然有效。NIO 不是您正在寻找的解决方案。您有一台低端机器，其 RAM 限制作为代理。

你能做的最好的事情就是让你的 Servlet 创建一个新线程，让这个线程使用 NIO 套接字/HTTP 库创建并设置一个传出连接。这个新的（和额外的）线程正在等待 3 件事中的任何一件发生，它推动任何 API 尝试在这 3 个领域取得进展。

这3件事是：

*   尝试向远程服务器写入数据（如果内存中有缓冲数据要发送）
*   等待主 Servlet 线程指示共享缓冲区中有新数据。或者达到了流的结束。
*   等待主 Servlet 线程指示额外的线程需要关闭（这是错误恢复和清理）。

您可能需要 doPost() 方法在额外线程上调用的 drainWithTimeout(long millis) 函数，以便给它一定的时间将最终数据推送到远程服务器。如果 Servlet 从 InputStream 观察到 End-of-Stream，则会调用此方法。

在 doPost() 方法返回之前，您必须确保您的额外线程 100% 可靠地获得。所以控制它的启动/关闭很重要，尤其是在 InputStream 因为发送客户端断开或空闲时间太长而出错的情况下。

然后两个线程（doPost() 中的普通 Servlet 线程和您创建的新线程）将设置并共享一些任意内存缓冲区，可能共享 16Mb 或更多。

如果由于客户端/并发用户和 2Gb RAM 的限制而无法拥有 16Mb 缓冲区，那么您真的应该坚持使用此答案顶部的示例代码，因为网络和 O/S 内核已经缓冲了一些 Mb数据的。

使用两个线程的要点是您无法解决接收数据的 Servlet API 是阻塞 I/O API 的问题，如果您正在编写符合 Servlet 规范/标准的应用程序，则无法更改该问题。如果您知道您的特定 Servlet 容器具有某个功能，那么这超出了此答案的范围。

这两个线程允许主 Servlet doPost 线程处于控制之中，并且仍然为 InputStream 使用阻塞 I/O API。

将一个线程和一个阻塞 InputStream 与一个非阻塞 OutputStream 一起使用是没有意义的，您仍然会遇到在 in.read() API 调用被阻塞时无法为输出流提供服务的问题（等待更多数据或 End-流）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:59:58.617

NIO通道之间拷贝的正确方法如下：

```
while (in.read(buffer) > 0 || buffer.position() > 0)
{
  buffer.flip();
  out.write(buffer);
  buffer.compact();
} 
```

请注意，这会自动处理 EOS、部分读取和部分写入。

# c++ - 如何使用 MFC 处理单独的窗口？

> ID：12507235
> 
> 赞同：0
> 
> 时间：2012-09-20T06:40:01.983
> 
> 标签：c++, mfc

我是 MFC 的新手。谁能告诉我如何使用 MFC 处理单独的窗口。我的任务是截取不同窗口的屏幕截图并显示它。通过使用`CWnd::GetDesktopWindow`我将把手柄用于桌面。如果我想处理其他窗口，我怎么能得到它。现在，如果我想显示我捕获的桌面，我得到了桌面的句柄。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:10:26.037

这取决于您想要获得什么类型的窗口。要检索某些具有指定类名或标题的窗口，请使用 API FindWindow(...) 和 class&caption 作为输入；要获取桌面或某个顶级窗口下的所有子窗口，您可以在递归函数中使用 EnumWindows(...) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:04:42.013

为了获得桌面上所有窗口的句柄，您需要函数[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)。

您为它提供了一个回调函数，它会使用它找到的每个窗口的句柄来调用它。

`CWnd*`要从 中获取 MFC `HWND`，您可以执行以下操作：

```
CWnd *const window = CWnd::FromHandle(hWnd); 
```

# php - 如何在同一个 PHP 页面中显示输出

> ID：12507238
> 
> 赞同：0
> 
> 时间：2012-09-20T06:40:09.610
> 
> 标签：php, html

我已经编写了一个代码，现在我想在同一个 php 页面中查看用户选择的单选按钮的输出？

我该怎么做？这是我的代码

```
<html>
<div>
<form>
<input type='submit'  name='radiotest' value='1crn' /> </div>  
<input type='submit'  name='radiotest' value='1FFZ' /> </div>  
</form>
</div>
<div>
<head>
<script src="jmol/Jmol.js"></script> 
</head>
<script>
jmolInitialize("jmol");
</script>
<script>
jmolSetAppletColor("gray");
jmolApplet(450, "load <?php echo "/jmol/".$_REQUEST['radiotest'].".pdb"; ?>; select      all; cartoon on; wireframe off; spacefill off; color chain; ");
</script> 
</div>
</html> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:47:51.003

这不应该使用 PHP 来完成（javascript 会是一个更好的选择），但要回答这个问题：

制作表单，使其具有操作和方法属性。动作将是当前页面（如果是同一页面，则无需指定此属性），方法将是 GET 或 POST。

像这样的东西：

```
<form action="" method="GET"> 
```

现在，当您单击按钮时，表单被提交并且页面重新加载，但 URL 不同：

```
http://site.com/page.php?radiotest=1crn 
```

您现在可以检查是否`$_GET['radiotest']`使用`isset()`函数设置了。如果已设置，请执行您想要执行的任何操作。

`isset($_GET['radiotest'])`- 告诉你是否`radiotest=something`在 URL 中

`$_GET['radiotest']``radiotest=something`- 为您提供URL中“某物”的值。

因为 PHP 是一种服务器端语言，所以所有代码都在服务器上执行。当页面被发送到浏览器时，它已经执行并且无法进行进一步的计算。如果您必须有一个 PHP 解决方案，则必须将请求发送到服务器，必须重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:09:51.920

这是在同一页面中显示输出的一种方式...

```
<html>
<head>
</head>
<body>
<form name='test' method='GET' action="">
<input type='radio'  name='radiotest' value='1crn' />1crn
<input type='radio'  name='radiotest' value='1FFZ' />1FFz
<input type='submit' value='submit' name='submit' />
</form>

<?php 
if(isset($_GET("submit")))
{
    echo $_GET["radiotest"];
}
?>

</body>
</html> 
```

# javascript - 如何使用 Javascript 检查值长度？

> ID：12507244
> 
> 赞同：3
> 
> 时间：2012-09-20T06:40:46.013
> 
> 标签：javascript

大家好，我想问一下如何从文本框中检查值的长度？

这是我的代码：

```
@*<script>
    function validateForm() {
        var x = document.forms["frm"]["txtCardNumber"].value;
        if (x == null || x == "" ) {
            alert("First name must be filled out");
            return false;
        }
    }
</script>*@ 
```

当我运行我的脚本时，我收到了警报消息，但我正在尝试添加控制 texbox 输入长度的属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T06:41:49.440

您可以使用`x.length`来获取字符串的长度：

```
if (x.length < 5) {
    alert('please enter at least 5 characters');
    return false;
} 
```

另外，我建议您使用该[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)方法而不是`document.forms["frm"]["txtCardNumber"]`.

因此，如果您有一个输入字段：

```
<input type="text" id="txtCardNumber" name="txtCardNumber" /> 
```

您可以从 id 中检索其值：

```
var x = document.getElementById['txtCardNumber'].value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:45:51.513

更好的脚本是：

```
<input type="text" name="txtCardNumber" id="txtCardNumber" /> 
```

在脚本中：

```
if (document.getElementById(txtCardNumber).value.length < 5) {
    alert('please enter at least 5 characters');
    return false;
} 
```

# jquery - 使用 Cakephp 2.x 上传超过 100MB 文件时的视频文件进度条

> ID：12507245
> 
> 赞同：4
> 
> 时间：2012-09-20T06:40:46.967
> 
> 标签：jquery, cakephp

使用 Cakephp 2.x 和 Jquery（不使用 Ajax）上传超过 100MB 的视频文件时的视频文件进度条。

我已经尝试过有关堆栈溢出的现有答案，但我没有找到任何没有 ajax 的解决方案。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:06:32.373

`uploadify`如果您使用 jQuery，为什么不使用？它使用闪存套接字将文件上传到服务器，同时从磁盘读取，它提供有关文件进度的实时反馈。

[http://www.uploadify.com/](http://www.uploadify.com/)

# ruby-on-rails - ruby 记录器文件行为

> ID：12507255
> 
> 赞同：2
> 
> 时间：2012-09-20T06:41:40.500
> 
> 标签：ruby-on-rails, ruby

当我使用这个脚本时，它工作正常

```
require 'logger'

class Logging < Logger
    log = Logger.new "sam.txt"
    log.warn "samarth"
end 
```

并且日志文件的输出以这种方式出现

```
# Logfile created on Thu Sep 20 12:01:26 +0530 2012 by /
W, [2012-09-20T12:01:44.402915 #7553]  WARN -- : asasa 
```

现在我想创建一个继承记录器的类，我在其他所有脚本中都使用该脚本，但它会产生一些不同的输出

```
require 'date'
require 'logger'

class Logging < Logger

    def initialize 
      @date = Time.now.strftime("20%y-%m-%d").to_s
      @time = Time.now.strftime("%X")
      @file_name = @date+"_"+@time+ " log.txt"
      @file_name_path = '/cmf/samnew/build/Logs/'+@file_name
    end

    def createfile
      $log1 = Logger.new(@file_name_path)
      return $log1 
    end

end 
```

我在下面的脚本中实现这个脚本

```
require '/cmf/samnew/build/Controller/logging'

class Controller

    #Generating log file

    log = Logging.new
    log1 =  log.createfile
    log1.warn "samarth global"

end 
```

和输出就像

```
# Logfile created on Thu Sep 20 12:03:20 +0530 2012 by /
samarth global 
```

那么这段代码有什么问题或者我应该怎么做才能创建像上面这样的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:46:24.613

您加载的其中一个 gem 可能会弄乱全局格式字符串。

试试这个来定义你想要的格式

```
def createfile 
  $log1 = Logger.new(@file_name_path) 
  $log1.formatter = proc do |severity, datetime, progname, msg| 
    "#{severity[0]}, [#{datetime} \##{$$}] #{severity} --> #{msg} \n"
  end
  $log1  
end 
```

# ruby-on-rails - 运行循环时无法使用 ruby on rails 中的标签选择单选按钮？

> ID：12507257
> 
> 赞同：2
> 
> 时间：2012-09-20T06:41:47.480
> 
> 标签：ruby-on-rails, loops, radio-button, label

这是我在**RAILS中为****RADIO BUTTON编写的代码**

 **```
<% @Days = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'] %>
<% @Days.each do |day| %>
<%= f.radio_button :due_day, day, :checked => @group.due_day.eql?(day) %> 
<%= f.label :due_day, day %>
<% end %> 
```

在 HTML 我**得到**

```
<input checked="checked" id="group_due_day_monday" name="group[due_day]" type="radio" value="Monday" /> 
<label for="group_due_day">Monday</label>
.....
.....
<input id="group_due_day_sunday" name="group[due_day]" type="radio" value="Sunday" /> 
<label for="group_due_day">Sunday</label> 
```

但我希望它**像**

```
<input checked="checked" id="group_due_day_monday" name="group[due_day]" type="radio" value="Monday" /> 
<label for="group_due_day_monday">Monday</label>
.....
.....
<input id="group_due_day_sunday" name="group[due_day]" type="radio" value="Sunday" /> 
<label for="group_due_day_sunday">Sunday</label> 
```

这样，如果单击标签，**RADIO BUTTON**就会被选中。这可以使用

```
<%= f.radio_button :due_day, day, :checked => @group.due_day.eql?(day) %> 
<%= f.label :due_day_monday, day %> 
```

但这不是一个好的做法，如果我有一组**用户**说**@users**。我不知道**数组**的**长度**以及**用户名**？

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:20:13.133

[FormHelper`label`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-label)为这种情况精确地接受了一个`:value`选项：

```
<% @Days.each do |day| %>
<%= f.radio_button :due_day, day, :checked => @group.due_day.eql?(day) %> 
<%= f.label :due_day, day, :value => day %>
<% end %> 
```******

# windows - 如何找到我的 Windows Phone 7.5 的纬度和经度

> ID：12507261
> 
> 赞同：0
> 
> 时间：2012-09-20T06:41:55.053
> 
> 标签：windows, windows-phone-7

我可以访问我的手机地理位置吗？

我的手机会告诉我现在的纬度和经度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:47:15.183

最好的解决方案是，使用 Bing Maps API INTEGRATION，api 将根据位置返回坐标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:53:11.240

是的你可以。看到这个[帖子。](http://blogs.msdn.com/b/dragoman/archive/2010/09/21/wp7-code-using-the-geolocation-api.aspx)

使用`System.Device.Location;`命名空间。

再发一[帖。](http://albrecht-schmidt.blogspot.com/2011/03/wp7-tutorial-part-3-using-location.html)

# entity-framework - 如何按非列字段排序？

> ID：12507264
> 
> 赞同：3
> 
> 时间：2012-09-20T06:42:03.383
> 
> 标签：entity-framework, entity-sql

我正在尝试创建一个实体 SQL，它是两个子查询的联合。

```
(SELECT VALUE DISTINCT ROW(e.ColumnA, e.ColumnB, 1 AS Rank) FROM Context.Entity AS E WHERE ...)
UNION ALL 
(SELECT VALUE DISTINCT ROW(e.ColumnA, e.ColumnB, 2 AS Rank) FROM Context.Entity AS E WHERE ...)
ORDER BY *??*  LIMIT 50 
```

我努力了：

```
ORDER BY Rank 
```

和

```
ORDER BY e.Rank 
```

但我不断得到：

```
System.Data.EntitySqlException: The query syntax is not valid. Near keyword 'ORDER' 
```

**编辑**：

这是实体框架。在 C# 中，使用以下命令执行查询：

```
var esql = "...";
ObjectParameter parameter0 = new ObjectParameter("p0", value1);
ObjectParameter parameter1 = new ObjectParameter("p1", value2);
ObjectQuery<DbDataRecord> query = context.CreateQuery<DbDataRecord>(esql, parameter0, parameter1);
var queryResults = query.Execute(MergeOption.NoTracking); 
```

我的应用程序中只有一小部分需要使用 Entity SQL。一般来说，主要用例是当我需要做的时候：“WHERE Column LIKE 'A % value % with % multiple % wildcards'”。

我不认为这是 Rank 列的问题。我确实认为这就是我试图将 order by 应用于由 union all 连接的两个不同的 esql 语句的方式。有人可以建议：

1.  如何将 ORDER BY 应用于这种 UNION/UNION ALL 语句
2.  如何按非实体列表达式排序。

谢谢。

# php - SMTP 服务器响应：550 apache php 邮件服务器

> ID：12507270
> 
> 赞同：0
> 
> 时间：2012-09-20T06:43:02.087
> 
> 标签：php, apache, email

我收到此错误消息

> 警告：mail() [function.mail]: SMTP 服务器响应：550-请在您的邮件客户端中打开 SMTP 身份验证，或在发送邮件之前登录 550-IMAP/POP3 服务器。(sgs5.aws.lan) 550-[212.199.198.158]:7165 未经身份验证不允许通过此服务器 550 进行中继。在第 32 行的 C:\Program Files\Zend\Apache2\htdocs\PPC-Advert-System\Results\DebuggerFinalResultDB.php 中。

该代码在我的电脑上工作，但是当我把它放到另一台电脑上时它没有..我不知道配置中的问题在哪里..这是我设置 php.ini 要做的事情：

```
 ini_set("SMTP","mail.me.com" );
ini_set("smtp_port","25" );
ini_set("auth_username","username" );
ini_set("auth_password","pass" ); 
```

然后我使用这个功能：

```
 private function send_an_email($to,$file="",$message="") {
    $subject = 'PCC-Advert-System';
    $message =  $message."<br/><br/><br/>Time Finished Scaning:<br/><br/><br/> ".date('l jS \of F Y h:i:s A')."\r\n Ratio: \r\n".$this->ratio." \r\nFile Path:<br/> <a href='http://212.199.198.158/PPC-Advert-System/FileStorage/$file'>http://212.199.198.158/PPC-Advert-System/FileStorage/$file</a><br/><br/><br/><a href='".$this->debug_file."'>$this->debug_file </a> ";//.$this->file;
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers.= 'From: scriptspc@bso.com' . "\r\n" .
            'Reply-To: scriptspc@bso.com' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();
    mail($to, $subject, $message, $headers);
    echo "<br/><br/><h1>Email has been sent</h1>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:08:36.170

如果你想使用自定义 SMTP，你应该使用[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)之类的东西，很难使用`mail()`and发送电子邮件`SMTP`。

然后您可以定义应该使用什么 SMTP。

# google-maps - 如何获得谷歌静态地图的边界？

> ID：12507274
> 
> 赞同：17
> 
> 时间：2012-09-20T06:43:19.420
> 
> 标签：google-maps, map, latitude-longitude, bounds

如何获取已返回的谷歌静态地图的度数范围，例如，对于以下请求

```
http://maps.googleapis.com/maps/api/staticmap?center=0.0,0.0&zoom=10&size=640x640&sensor=false 
```

据我所知，完整的地球地图是 256x256 图像。这意味着 n 个垂直像素包含 x 度，但 n 个水平像素包含 2x 度。正确的？

正如谷歌[所说，](https://developers.google.com/maps/documentation/staticmaps/) 中心定义了地图的中心，与地图的所有边缘等距。据我了解，像素等距（或度数？）。每个后续的缩放级别都会使水平和垂直维度的精度翻倍。因此，我可以为每个缩放值找到地图经度的增量值：

```
dLongitude = (HorizontalMapSizeInPixels / 256 ) * ( 360 / pow(2, zoom) ); 
```

纬度的相同计算：

```
dLatitude = (VerticalMapSizeInPixels / 256 ) * ( 180 / pow(2, zoom) ); 
```

VerticalMapSizeInPixels 和 Horizo​​ntalMapSizeInPixels 是 URL 中地图大小的参数。

计算经度的增量值很好，但对于纬度，它是错误的。我找不到纬度的增量值，存在一些*增量*错误。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-20T11:38:44.477

> 据我所知，完整的地球地图是 256x256 图像。

是的。

> 这意味着 n 个垂直像素包含 x 度，但 n 个水平像素包含 2x 度。正确的？

不会。一个像素将代表不同的纬度，具体取决于纬度。赤道上的一个像素比两极附近的一个像素代表的纬度要小。

地图的角落将取决于中心、缩放级别和地图大小，您需要使用墨卡托投影来计算它们。如果您不想加载完整的 API，这里有一个 MercatorProjection 对象：

```
var MERCATOR_RANGE = 256;

function bound(value, opt_min, opt_max) {
  if (opt_min != null) value = Math.max(value, opt_min);
  if (opt_max != null) value = Math.min(value, opt_max);
  return value;
}

function degreesToRadians(deg) {
  return deg * (Math.PI / 180);
}

function radiansToDegrees(rad) {
  return rad / (Math.PI / 180);
}

function MercatorProjection() {
  this.pixelOrigin_ = new google.maps.Point( MERCATOR_RANGE / 2, MERCATOR_RANGE / 2);
  this.pixelsPerLonDegree_ = MERCATOR_RANGE / 360;
  this.pixelsPerLonRadian_ = MERCATOR_RANGE / (2 * Math.PI);
};

MercatorProjection.prototype.fromLatLngToPoint = function(latLng, opt_point) {
  var me = this;

  var point = opt_point || new google.maps.Point(0, 0);

  var origin = me.pixelOrigin_;
  point.x = origin.x + latLng.lng() * me.pixelsPerLonDegree_;
  // NOTE(appleton): Truncating to 0.9999 effectively limits latitude to
  // 89.189\.  This is about a third of a tile past the edge of the world tile.
  var siny = bound(Math.sin(degreesToRadians(latLng.lat())), -0.9999, 0.9999);
  point.y = origin.y + 0.5 * Math.log((1 + siny) / (1 - siny)) * -me.pixelsPerLonRadian_;
  return point;
};

MercatorProjection.prototype.fromPointToLatLng = function(point) {
  var me = this;

  var origin = me.pixelOrigin_;
  var lng = (point.x - origin.x) / me.pixelsPerLonDegree_;
  var latRadians = (point.y - origin.y) / -me.pixelsPerLonRadian_;
  var lat = radiansToDegrees(2 * Math.atan(Math.exp(latRadians)) - Math.PI / 2);
  return new google.maps.LatLng(lat, lng);
};

//pixelCoordinate = worldCoordinate * Math.pow(2,zoomLevel) 
```

您可以将其保存到单独的文件中，例如“MercatorProjection.js”，然后将其包含在您的应用程序中。

```
<script src="MercatorProjection.js"></script> 
```

加载上述文件后，以下函数计算给定尺寸和给定缩放的地图的 SW 和 NE 角。

```
function getCorners(center,zoom,mapWidth,mapHeight){
    var scale = Math.pow(2,zoom);
    var centerPx = proj.fromLatLngToPoint(center);
    var SWPoint = {x: (centerPx.x -(mapWidth/2)/ scale) , y: (centerPx.y + (mapHeight/2)/ scale)};
    var SWLatLon = proj.fromPointToLatLng(SWPoint);
    alert('SW: ' + SWLatLon);
    var NEPoint = {x: (centerPx.x +(mapWidth/2)/ scale) , y: (centerPx.y - (mapHeight/2)/ scale)};
    var NELatLon = proj.fromPointToLatLng(NEPoint);
    alert(' NE: '+ NELatLon);
} 
```

你会这样称呼它：

```
var proj = new MercatorProjection();
var G = google.maps;
var centerPoint = new G.LatLng(49.141404, -121.960988);
var zoom = 10;
getCorners(centerPoint,zoom,640,640); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-14T14:49:20.133

感谢马塞洛的回答。这很有帮助。如果有人感兴趣，这里是代码的 Python 版本（PHP 代码的粗略翻译，可能不像 Python 那样）：

```
from __future__ import division
import math
MERCATOR_RANGE = 256

def  bound(value, opt_min, opt_max):
  if (opt_min != None): 
    value = max(value, opt_min)
  if (opt_max != None): 
    value = min(value, opt_max)
  return value

def  degreesToRadians(deg) :
  return deg * (math.pi / 180)

def  radiansToDegrees(rad) :
  return rad / (math.pi / 180)

class G_Point :
    def __init__(self,x=0, y=0):
        self.x = x
        self.y = y

class G_LatLng :
    def __init__(self,lt, ln):
        self.lat = lt
        self.lng = ln

class MercatorProjection :

    def __init__(self) :
      self.pixelOrigin_ =  G_Point( MERCATOR_RANGE / 2, MERCATOR_RANGE / 2)
      self.pixelsPerLonDegree_ = MERCATOR_RANGE / 360
      self.pixelsPerLonRadian_ = MERCATOR_RANGE / (2 * math.pi)

    def fromLatLngToPoint(self, latLng, opt_point=None) :
      point = opt_point if opt_point is not None else G_Point(0,0)
      origin = self.pixelOrigin_
      point.x = origin.x + latLng.lng * self.pixelsPerLonDegree_
      # NOTE(appleton): Truncating to 0.9999 effectively limits latitude to
      # 89.189\.  This is about a third of a tile past the edge of the world tile.
      siny = bound(math.sin(degreesToRadians(latLng.lat)), -0.9999, 0.9999)
      point.y = origin.y + 0.5 * math.log((1 + siny) / (1 - siny)) * -     self.pixelsPerLonRadian_
      return point

def fromPointToLatLng(self,point) :
      origin = self.pixelOrigin_
      lng = (point.x - origin.x) / self.pixelsPerLonDegree_
      latRadians = (point.y - origin.y) / -self.pixelsPerLonRadian_
      lat = radiansToDegrees(2 * math.atan(math.exp(latRadians)) - math.pi / 2)
      return G_LatLng(lat, lng)

#pixelCoordinate = worldCoordinate * pow(2,zoomLevel)

def getCorners(center, zoom, mapWidth, mapHeight):
    scale = 2**zoom
    proj = MercatorProjection()
    centerPx = proj.fromLatLngToPoint(center)
    SWPoint = G_Point(centerPx.x-(mapWidth/2)/scale, centerPx.y+(mapHeight/2)/scale)
    SWLatLon = proj.fromPointToLatLng(SWPoint)
    NEPoint = G_Point(centerPx.x+(mapWidth/2)/scale, centerPx.y-(mapHeight/2)/scale)
    NELatLon = proj.fromPointToLatLng(NEPoint)
    return {
        'N' : NELatLon.lat,
        'E' : NELatLon.lng,
        'S' : SWLatLon.lat,
        'W' : SWLatLon.lng,
    } 
```

用法 ：

```
>>> import MercatorProjection
>>> centerLat = 49.141404
>>> centerLon = -121.960988
>>> zoom = 10
>>> mapWidth = 640
>>> mapHeight = 640
>>> centerPoint = MercatorProjection.G_LatLng(centerLat, centerLon)
>>> corners = MercatorProjection.getCorners(centerPoint, zoom, mapWidth, mapHeight)
>>> corners
{'E': -65.710988,
'N': 74.11120692972199,
'S': 0.333879313530149,
'W': -178.210988}
>>> mapURL = "http://maps.googleapis.com/maps/api/staticmap?center=%f,%f&zoom=%d&size=%dx%d&scale=2&maptype=roadmap&sensor=false"%(centerLat,centerLon,zoom,mapWidth,mapHeight)
>>> mapURL
http://maps.googleapis.com/maps/api/staticmap?center=49.141404,-121.960988&zoom=10&size=640x640&scale=2&maptype=roadmap&sensor=false' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-31T17:01:50.237

这是Marcelo在PHP中的代码的逐行翻译，可能可以稍微清理一下。效果很好！感谢 Marcelo 付出了艰辛的努力。

```
define("MERCATOR_RANGE", 256);

function degreesToRadians($deg) {
  return $deg * (M_PI / 180);
}

function radiansToDegrees($rad) {
  return $rad / (M_PI / 180);
}

function bound($value, $opt_min, $opt_max) {
  if ($opt_min != null) $value = max($value, $opt_min);
  if ($opt_max != null) $value = min($value, $opt_max);
  return $value;
}

class G_Point {
    public $x,$y;
    function G_Point($x=0, $y=0){
        $this->x = $x;
        $this->y = $y;
    }
}

class G_LatLng {
    public $lat,$lng;
    function G_LatLng($lt, $ln){
        $this->lat = $lt;
        $this->lng = $ln;
    }
}

class MercatorProjection {

    private $pixelOrigin_, $pixelsPerLonDegree_, $pixelsPerLonRadian_;

    function MercatorProjection() {
      $this->pixelOrigin_ = new G_Point( MERCATOR_RANGE / 2, MERCATOR_RANGE / 2);
      $this->pixelsPerLonDegree_ = MERCATOR_RANGE / 360;
      $this->pixelsPerLonRadian_ = MERCATOR_RANGE / (2 * M_PI);
    }

    public function fromLatLngToPoint($latLng, $opt_point=null) {
      $me = $this;

      $point = $opt_point ? $opt_point : new G_Point(0,0);

      $origin = $me->pixelOrigin_;
      $point->x = $origin->x + $latLng->lng * $me->pixelsPerLonDegree_;
      // NOTE(appleton): Truncating to 0.9999 effectively limits latitude to
      // 89.189\.  This is about a third of a tile past the edge of the world tile.
      $siny = bound(sin(degreesToRadians($latLng->lat)), -0.9999, 0.9999);
      $point->y = $origin->y + 0.5 * log((1 + $siny) / (1 - $siny)) * -$me->pixelsPerLonRadian_;
      return $point;
    }

    public function fromPointToLatLng($point) {
      $me = $this;

      $origin = $me->pixelOrigin_;
      $lng = ($point->x - $origin->x) / $me->pixelsPerLonDegree_;
      $latRadians = ($point->y - $origin->y) / -$me->pixelsPerLonRadian_;
      $lat = radiansToDegrees(2 * atan(exp($latRadians)) - M_PI / 2);
      return new G_LatLng($lat, $lng);
    }

    //pixelCoordinate = worldCoordinate * pow(2,zoomLevel)
}

function getCorners($center, $zoom, $mapWidth, $mapHeight){
    $scale = pow(2, $zoom);
    $proj = new MercatorProjection();
    $centerPx = $proj->fromLatLngToPoint($center);
    $SWPoint = new G_Point($centerPx->x-($mapWidth/2)/$scale, $centerPx->y+($mapHeight/2)/$scale);
    $SWLatLon = $proj->fromPointToLatLng($SWPoint);
    $NEPoint = new G_Point($centerPx->x+($mapWidth/2)/$scale, $centerPx->y-($mapHeight/2)/$scale);
    $NELatLon = $proj->fromPointToLatLng($NEPoint);
    return array(
        'N' => $NELatLon->lat,
        'E' => $NELatLon->lng,
        'S' => $SWLatLon->lat,
        'W' => $SWLatLon->lng,
    );
} 
```

用法：

```
$centerLat = 49.141404;
$centerLon = -121.960988;
$zoom = 10;
$mapWidth = 640;
$mapHeight = 640;
$centerPoint = new G_LatLng($centerLat, $centerLon);
$corners = getCorners($centerPoint, $zoom, $mapWidth, $mapHeight);
$mapURL = "http://maps.googleapis.com/maps/api/staticmap?center={$centerLat},{$centerLon}&zoom={$zoom}&size={$mapWidth}x{$mapHeight}&scale=2&maptype=roadmap&sensor=false"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-06T14:21:11.290

**简单的 Python 版本**

在类似的问题上花费了很长时间并使用此线程寻求帮助，这里是 Marcelo（和 Jmague）代码的简化 Python 版本：

```
import math
import requests

def latLngToPoint(mapWidth, mapHeight, lat, lng):

    x = (lng + 180) * (mapWidth/360)
    y = ((1 - math.log(math.tan(lat * math.pi / 180) + 1 / math.cos(lat * math.pi / 180)) / math.pi) / 2) * mapHeight

    return(x, y)

def pointToLatLng(mapWidth, mapHeight, x, y):

    lng = x / mapWidth * 360 - 180

    n = math.pi - 2 * math.pi * y / mapHeight
    lat = (180 / math.pi * math. atan(0.5 * (math.exp(n) - math.exp(-n))))

    return(lat, lng)

def getImageBounds(mapWidth, mapHeight, xScale, yScale, lat, lng):

    centreX, centreY = latLngToPoint(mapWidth, mapHeight, lat, lng)

    southWestX = centreX - (mapWidth/2)/ xScale
    southWestY = centreY + (mapHeight/2)/ yScale
    SWlat, SWlng = pointToLatLng(mapWidth, mapHeight, southWestX, southWestY)

    northEastX = centreX + (mapWidth/2)/ xScale
    northEastY = centreY - (mapHeight/2)/ yScale
    NElat, NElng = pointToLatLng(mapWidth, mapHeight, northEastX, northEastY)

    return[SWlat, SWlng, NElat, NElng]

lat = 37.806716
lng = -122.477702
zoom = 16
picHeight = 640 #Resulting image height in pixels (x2 if scale parameter is set to 2)
picWidth = 640

mapHeight = 256 #Original map size - specific to Google Maps
mapWidth = 256

xScale = math.pow(2, zoom) / (picWidth/mapWidth)
yScale = math.pow(2, zoom) / (picHeight/mapWidth)

corners = getImageBounds(mapWidth, mapHeight, xScale, yScale, lat, lng) 
```

在这里，我使用 x 和 y 来表示像素值，并将 lat lng 表示为纬度和经度。lat、lng、zoom、picHeight 和 picWidth 都可以更改为您的特定用例。更改比例/地图类型等不会影响此计算。

我使用此代码平铺静态地图图像，没有间隙/重叠。如果您想查看更多使用中的内容/它在这个意义上是如何工作的，我的[GitHub](https://github.com/hulleylm/google_maps_tiler)上有更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-30T17:32:15.113

对于大缩放因子（> = 8），可以忽略 y 轴上地图比例的不均匀性，有更简单的方法，我们只需对像素/（纬度度数）进行 accout 1/cos(latitude) 校正） 解析度。对于 0 纬度的 x 和 y，zoom=0 的初始分辨率为每 360 度 256 个像素。

```
def get_static_map_bounds(lat, lng, zoom, sx, sy):
    # lat, lng - center
    # sx, sy - map size in pixels

    # 256 pixels - initial map size for zoom factor 0
    sz = 256 * 2 ** zoom

    #resolution in degrees per pixel
    res_lat = cos(lat * pi / 180.) * 360\. / sz
    res_lng = 360./sz

    d_lat = res_lat * sy / 2
    d_lng = res_lng * sx / 2

    return ((lat-d_lat, lng-d_lng), (lat+d_lat, lng+d_lng)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-11T14:17:02.703

这是对 Delphi/Pascal 的翻译，并进行了一些优化，以对应更严格的 Pascal 语言和内存管理。

```
unit Mercator.Google.Maps;

interface

uses System.Math;

type TG_Point = class(TObject)
    private
        Fx: integer;
        Fy: integer;
    public
        property x: integer read Fx write Fx;
        property y: integer read Fy write Fy;

        constructor Create(Ax: integer = 0; Ay: integer = 0);
end;

type TG_LatLng = class(TObject)
    private
        FLat: double;
        FLng: double;
    public
        property Lat: double read FLat write FLat;
        property Lng: double read FLng write FLng;

        constructor Create(ALat: double; ALng: double);
end;

type TMercatorProjection = class(TObject)
    private
        pixelOrigin_: TG_Point;
        pixelsPerLonDegree_, pixelsPerLonRadian_: double;

        function degreesToRadians(deg: double): double;
        function radiansToDegrees(rad: double): double;
        function bound(value: double; opt_min: double; opt_max: double): double;
    public
        constructor Create;
        procedure fromLatLngToPoint(latLng: TG_LatLng; var point: TG_Point);
        procedure fromPointToLatLng(point: TG_point; var latLng: TG_LatLng);
        procedure getCorners(center: TG_LatLng; zoom: integer; mapWidth: integer; mapHeight: integer;
                             var NELatLon: TG_LatLng; var SWLatLon: TG_LatLng);
end;

implementation

const MERCATOR_RANGE = 256;

constructor TG_Point.Create(Ax: Integer = 0; Ay: Integer = 0);
begin
     inherited Create;
     Fx := Ax;
     Fy := Ay
end;

// **************

constructor TG_LatLng.Create(ALat: double; ALng: double);
begin
     inherited Create;
     FLat := ALat;
     FLng := ALng
end;

// **************

constructor TMercatorProjection.Create;
begin
    inherited Create;

    pixelOrigin_ := TG_Point.Create( Round(MERCATOR_RANGE / 2), Round(MERCATOR_RANGE / 2));
    pixelsPerLonDegree_ := MERCATOR_RANGE / 360;
    pixelsPerLonRadian_ := MERCATOR_RANGE / (2 * PI);
end;

// Translate degrees to radians
function TMercatorProjection.degreesToRadians(deg: double): double;
begin
  Result := deg * (PI / 180);
end;

// Translate radians to degrees
function TMercatorProjection.radiansToDegrees(rad: double): double;
begin
  Result := rad / (PI / 180);
end;

// keep value insid defined bounds
function TMercatorProjection.bound(value: double; opt_min: double; opt_max: double): double;
begin
  if Value < opt_min then Result := opt_min
  else if Value > opt_max then Result := opt_max
  else Result := Value;
end;

procedure TMercatorProjection.fromLatLngToPoint(latLng: TG_LatLng; var point: TG_Point);
var
    siny: double;
begin
   if Assigned(point) then
   begin
      point.x := Round(pixelOrigin_.x + latLng.lng * pixelsPerLonDegree_);
      // NOTE(appleton): Truncating to 0.9999 effectively limits latitude to
      // 89.189\.  This is about a third of a tile past the edge of the world tile.
      siny := bound(sin(degreesToRadians(latLng.lat)), -0.9999, 0.9999);
      point.y := Round(pixelOrigin_.y + 0.5 * ln((1 + siny) / (1 - siny)) * -pixelsPerLonRadian_);
   end;
end;

procedure TMercatorProjection.fromPointToLatLng(point: TG_point; var latLng: TG_LatLng);
var
    latRadians: double;
begin
    if Assigned(latLng) then
    begin
      latLng.lng := (point.x - pixelOrigin_.x) / pixelsPerLonDegree_;
      latRadians := (point.y - pixelOrigin_.y) / -pixelsPerLonRadian_;
      latLng.lat := radiansToDegrees(2 * arctan(exp(latRadians)) - PI / 2);
    end;
end;

//pixelCoordinate = worldCoordinate * pow(2,zoomLevel)

procedure TMercatorProjection.getCorners(center: TG_LatLng; zoom: integer; mapWidth: integer; mapHeight: integer;
                     var NELatLon: TG_LatLng; var SWLatLon: TG_LatLng);
var
    scale: double;
    centerPx, SWPoint, NEPoint: TG_Point;
begin
    scale := power(2, zoom);

    centerPx := TG_Point.Create(0, 0);
    try
        fromLatLngToPoint(center, centerPx);
        SWPoint := TG_Point.Create(Round(centerPx.x-(mapWidth/2)/scale), Round(centerPx.y+(mapHeight/2)/scale));
        NEPoint := TG_Point.Create(Round(centerPx.x+(mapWidth/2)/scale), Round(centerPx.y-(mapHeight/2)/scale));
        try
            fromPointToLatLng(SWPoint, SWLatLon);
            fromPointToLatLng(NEPoint, NELatLon);
        finally
            SWPoint.Free;
            NEPoint.Free;
        end;
    finally
        centerPx.Free;
    end;
end;

end. 
```

使用示例：

```
 with TMercatorProjection.Create do
            try
                CLatLon := TG_LatLng.Create(Latitude, Longitude);
                SWLatLon := TG_LatLng.Create(0,0);
                NELatLon := TG_LatLng.Create(0,0);
                try
                    getCorners(CLatLon, Zoom,
                                MapWidth, MapHeight,
                                SWLatLon, NELatLon);
                finally
                    ShowMessage('SWLat='+FloatToStr(SWLatLon.Lat)+' | SWLon='+FloatToStr(SWLatLon.Lng));
                    ShowMessage('NELat='+FloatToStr(NELatLon.Lat)+' | NELon='+FloatToStr(NELatLon.Lng));

                    SWLatLon.Free;
                    NELatLon.Free;
                    CLatLon.Free;
                end;
            finally
                Free;
            end; 
```

# windows - 如何在 openssl 中修复“无法写入‘随机状态’”

> ID：12507277
> 
> 赞同：80
> 
> 时间：2012-09-20T06:43:28.550
> 
> 标签：windows, openssl

使用此命令生成私钥时

```
genrsa -out my-prvkey.pem 1024 
```

它抛出如下错误

> 将“屏幕”加载到随机状态 - 完成生成 RSA 私钥，1024 位长模数 ................... .........+++++++ ...................+++++++ ++ 无法写入“随机状态”e 为 65537 (0*10001)

这在创建公共证书时会出现任何问题。我在 Windows 中运行这个命令。任何人都可以帮我修复吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-09-20T23:41:35.457

最快的解决方案是：将环境变量**RANDFILE**设置为可以写入“随机状态”文件的路径（当然检查文件访问权限），例如。在您的命令提示符下：

```
set RANDFILE=C:\MyDir\.rnd
openssl genrsa -out my-prvkey.pem 1024 
```

更多解释：Windows 上的 OpenSSL 尝试按以下顺序保存“随机状态”文件：

1.  取自**RANDFILE**环境变量的路径
2.  如果设置了**HOME**环境变量，则：**${HOME}\.rnd**
3.  **C:\.rnd**

我很确定在您的情况下，它最终会尝试将其保存在*C:\.rnd*中（并且由于缺乏足够的访问权限而失败）。不幸的是，OpenSSL 不会打印实际尝试在任何错误消息中使用的路径。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-11T00:44:43.107

也可能是您需要以管理员身份运行控制台。`ctrl+shift`在 Windows 7 上，在启动控制台窗口时按住。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-01-10T08:55:03.853

只需在命令行中输入这一行：

```
set RANDFILE=.rnd 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-08T10:45:46.450

或者这个在windows powershell

```
$env:RANDFILE=".rnd" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-16T09:49:27.350

我没有找到 .rnd 文件的位置，所以我以管理员身份运行了 cmd，它就像一个魅力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-16T05:27:49.670

*   [从https://code.google.com/archive/p/openssl-for-windows/downloads](https://code.google.com/archive/p/openssl-for-windows/downloads)下载适用于 windows 的 openssl

*   将环境变量设置为路径变量 path="C:\your_folder\openssl-0.9.8k_X64\bin"

*   在 bin 的同一路径上运行以下命令 [![在此处输入图像描述](../Images/e36c7cce8527f062edd2ced377dec477.png)](https://i.stack.imgur.com/EDFtC.png)

# python - 令人困惑的类型错误

> ID：12507278
> 
> 赞同：3
> 
> 时间：2012-09-20T06:43:46.330
> 
> 标签：python, tkinter, self, typeerror

我有一个小的 Python 程序，它应该通过运行适当的方法对按下向上按钮做出反应。但不是这样做，而是给我一个令人困惑的错误......

```
from tkinter import *
class App:
    def __init__(self, master):
        self.left = 0
        self.right = 0
        widget = Label(master, text='Hello bind world')
        widget.config(bg='red')            
        widget.config(height=5, width=20)                  
        widget.pack(expand=YES, fill=BOTH)
        widget.bind('<Up>',self.incSpeed)   
        widget.focus()
    def incSpeed(self):
        print("Test")

root = Tk() 
app = App(root)
root.mainloop() 
```

错误是：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python3.2/tkinter/__init__.py", line 1402, in __call__
    return self.func(*args)
TypeError: incSpeed() takes exactly 1 positional argument (2 given) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T06:46:30.703

该`incSpeed`方法应该有一个额外的参数；你的只需要`self`，但它也传递了一个[事件参数](http://docs.python.org/library/tkinter.html#bindings-and-events)。

更新您的函数签名以接受它：

```
def incSpeed(self, event):
    print("Test") 
```

# python - 确定Django中的空模板变量

> ID：12507281
> 
> 赞同：14
> 
> 时间：2012-09-20T06:44:12.773
> 
> 标签：python, django, mongodb, django-templates, pymongo

在模板中使用时，我无法确定变量是否为空。我已经遍历了整个集合，并且在每个集合中我都在寻找一个 variable `narrative_text`。

我测试了空变量

```
{% ifnotequal narratives.narrative_text '' %} 
```

我注意到控件进入了这个块，但是当

```
{{  narratives.narrative_text }} 
```

遇到。

那么，如何精确检查变量是否为空？

我阅读[了文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#invalid-template-variables)，发现无效/空模板变量被替换为`''`.

医生说

> 模板系统插入设置的值`TEMPLATE_STRING_IF_INVALID`。

我们是否必须明确地将其输入`settings.py`？我试过这样做，但我仍然无法让它工作。

```
c=Context({ 
    "narratives_list":all_narratives,
    "patient_name":care_seeker_name
}) 
```

`all_narratives`由 pymongo 数据库调用返回。

```
{%  for narratives in narratives_list  %}
<tr>
<td class = "date_col">
    7 Aug, 2012
</td>
{%  ifnotequal narratives.narrative_text '' %}
<td>
<div class = "narrative">
    ( text narrative )
<b> 
    {{ narratives.about }}
</b>
<br><br>
{{ narratives.narrative_text }}
</div>  
</td>   
{%  else %}
<td>
<div class="scans">
<div class="gallery">
<b> {{ narratives.about }}</b>
<br><br>
<a href="https://udhc1-nodejstest.rhcloud.com/my_image/{{ narratives.file_id }}">
<img src="https://udhc1-nodejstest.rhcloud.com/my_image/{{ narratives.file_id }}" width="72" height="72" alt="" />
</a>
</div>
</div>
</td>
{%  endifnotequal %} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-06-25T21:24:37.443

通过长度管道并针对该值进行测试。

```
{% if narratives.narrative_text|length > 0 %}
    {{ narratives.narrative_text }}
{% else %}
    None
{% endif %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T06:55:37.357

只是使用`{% if narratives.narrative_text %}`，我想。它将使用 Python 的隐式 false，它适用于空字符串、空数组、空字典、、`None`等。`False``0`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-06T12:51:57.157

刚刚通过我自己的代码使用 django 2.1.3 和 python 3.5 和 3.7 确认以下工作：

```
{% if narratives.narrative_text %}
    # do something
    {{ narratives.narrative_text }}
{% else %}
    # do something else
    None  # displays "None" 
{% endif %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T07:13:35.677

您可以编写[自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)，`is_empty`以进行检查。`false`如果变量为空且`true`值存在则返回。

```
{% if narratives.narrative_text|is_empty %}
    # dosomthing 
{% else %}
    # dosomthing 
{% endif %} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-30T13:20:33.063

我认为最好和明显的解决方案是使用 Django 模板语言：

```
{% if objects is not None %}
    {% for obj in objects %}
        {{obj}}   // Do your stuff here
    {% empty %}
        No results.    // No results case
    {% endfor %}
{% endif %} 
```

如果未设置变量`objects`，则不会打印任何内容。

我也有类似的困难。希望能帮助到你。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-20T07:59:59.680

我使用[了 jijnja](http://jinja.pocoo.org/)，它非常相似且更简单，我认为如果你这样做的话它会起作用

```
{% if not narratives.narrative_text %}
  // do something 
{% else %}
 // do something else  with or without {{ narratives.narrative_text }}
{% endif %} 
```

它使用 python 隐式`True/False,None,`等来完成这项工作。用最简单的术语来说，在里面使用 python 变量`{{ }}`和条件等`{% %}`

# windows-phone-7 - 光标焦点在 Windows Phone 文本字段上不闪烁

> ID：12507285
> 
> 赞同：0
> 
> 时间：2012-09-20T06:44:29.100
> 
> 标签：windows-phone-7

我开发了一个 Windows Phone 应用程序，其中有一个接受用户名和密码的登录屏幕以及一个提交按钮。

一旦用户输入用户名和密码并提交，用户将看到一个主页，其中有一个退出按钮。

当用户点击退出按钮时，从主页，用户将被重定向到登录页面。

现在在登录页面中，光标焦点在文本字段中，但光标没有闪烁。我的意思是当我点击用户名文本框时，键盘会出现，我可以输入文本。但是光标没有闪烁。

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:06:48.077

如果您需要点击文本框以显示键盘，则表示焦点不在文本框上。

使用 textbox1.Focus() 强制将焦点放在文本框上，键盘会自动出现。

将 textbox1 替换为您的文本框的名称

# sql - 从存储过程中的字符串参数构建动态 T-SQL 查询

> ID：12507287
> 
> 赞同：1
> 
> 时间：2012-09-20T06:44:32.990
> 
> 标签：sql, sql-server, arrays, tsql

假设我有一个包含 varchar 字段的表：

```
CREATE TABLE [MyTable] (
    [MyId]    varchar(3)    NOT NULL,
    .....
) 
```

[ **MyId]**列包含连续的字母数字值，如 A1、A2...A99、B1、B2..B99、C1 等（最多 Z99）。

我想做的是从**MyId**字段与某些特定前缀匹配的表中提取行......例如，我想从 A、C、P 和 X 系列中获取行。

我想用一个 sproc 来实现这一点，它将根据参数中提供的前缀字母动态构造查询。

我在想这样的事情...

```
CREATE PROCEDURE [dbo].[uspFilterMyTable]
  @prefixArray varchar(max)
AS
  ... -- split individual characters from @prefixArray into an array

  SELECT * FROM [MyTable] 
  WHERE 
    [MyId] LIKE ....
    OR
    [MyId] LIKE ....  -- iterate all characters from @prefixArray 
```

我认为存储过程的主要部分将类似于以下伪代码：

```
DECLARE @sql nvarchar(max)
-- iterate through all the characters
SET @sql = 'SELECT * FROM [MyTable] WHERE [MyId] LIKE ' + @charInTheArray + '%'
SET @sql = @sql + ' OR [MyId] LIKE ' + @nextCharInArray + '%'

EXEC (@sql) 
```

上面的过程会这样调用：

```
EXEC uspFilterMyTable("A,C,P,X") 
```

...或者可能像这样（如果它使拆分字母更容易）：

```
EXEC uspFilterMyTable("ACPX") 
```

有任何想法吗？指针？

* * *

**更新：**好的，这就是我想出的（从 Chhatrapati Sharma 借来的 [Split] 函数）：

```
-- [MyTable] contains these rows: 'A7', 'A87', 'B16', 'C51', 'H99', 'X12'

-- the "input" parameter
DECLARE @prefixArray NVARCHAR(100)= 'H,A,C'

-- split the string into SQL wild-card patterns
DECLARE charCursor CURSOR FOR
    select items + N'%' from dbo.Split(@prefixArray, ',')

OPEN charCursor;
DECLARE @pattern CHAR(2)

-- create temp table if necessary
IF NOT EXISTS(SELECT * FROM TEMPDB.SYS.TABLES WHERE NAME LIKE '#tmpTable%')
    CREATE TABLE #tmpTable ([Id] VARCHAR(3) NOT NULL)

-- purge old data
DELETE FROM #tmpTable

FETCH NEXT FROM charCursor into @pattern
WHILE @@FETCH_STATUS = 0
BEGIN
      --SELECT * INTO #tmpTable FROM [MyTable] WHERE [MyId] LIKE @pattern   
      Insert Into #tmpTable Select * FROM [MyTable] WHERE [MyId] LIKE @pattern  
    FETCH NEXT FROM charCursor into @pattern
END

CLOSE charCursor;
DEALLOCATE charCursor;

-- return the values
SELECT * FROM #tmpTable 
```

我知道这很难看，但它确实有效……有什么技巧可以即兴编写代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:53:41.873

首先你应该创建下面的函数，然后在这样的查询中使用它

```
SELECT * FROM [MyTable] WHERE  [MyId] in (select items from dbo.split(@prefixArray,','))

CREATE FUNCTION [dbo].[Split](@String varchar(8000), @Delimiter char(1))         
returns @temptable TABLE (items varchar(8000))         
as         
begin         
    declare @idx int         
    declare @slice varchar(8000)         

    select @idx = 1         
    if len(@String)<1 or @String is null  return         

    while @idx!= 0         
     begin         
      set @idx = charindex(@Delimiter,@String)         
      if @idx!=0         
      set @slice = left(@String,@idx - 1)         
     else         
      set @slice = @String         

      if(len(@slice)>0)    
       insert into @temptable(Items) values(@slice)         

       set @String = right(@String,len(@String) - @idx)         
       if len(@String) = 0 break         
       end     
    return         
    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:03:47.103

在这里，您有一个基于 XML 的快速拆分方法：

```
DECLARE @str NVARCHAR(100)= 'A1,B3,C4,B12,K19', @separator VARCHAR(1)= ','
DECLARE @SplitedList  TABLE (code NVARCHAR(30))

DECLARE @XMLList XML
SET @XMLList=CAST('<i>'+REPLACE(@str, @separator,'</i><i>')+'</i>' AS XML)

INSERT INTO @SplitedList
SELECT x.i.value('(./text())[1]','varchar(100)')
FROM @XMLList.nodes('i') x(i)

SELECT * FROM @SplitedList 
```

结果将是一个包含拆分值的表：

```
code
A1
B3
C4
B12
K19 
```

从这里您可以继续并在您的过程中使用此表，并按照您的建议加入原始表`LIKE`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T06:59:31.510

我会建议您使用表值参数来调用您的存储过程。我猜你是从.net 调用它的。但是我认为 EF 将无法处理它，尽管您可能会检查它。如果没有，我认为最好的方法是首先将字符串解析为临时表或表值，然后再加入。

使用 TVP：

```
CREATE PROCEDURE [dbo].[uspFilterMyTable]
  @prefixArray tvp_idlist readonly
as
  select 
   t.* 
  from MyTable t
  join @prefixArray pa on pa.id = t.myid 
```

使用拆分功能（您可以选择，您可以在网上找到很多示例）

```
CREATE PROCEDURE [dbo].[uspFilterMyTable]
  @prefixArray varchar(max)
as

  create @prefixArray tvp_idlist
  insert into @prefixArray (id)
  select id from dbo.myCustomSplit(@prefixArray,',')

  select 
   t.* 
  from MyTable t
  join @prefixArray pa on pa.id = t.myid 
```

对于这两种情况，@prefixArray 是一个表变量是 Id = varchar(3)

作为一个编辑，经过一番挖掘，似乎通过一些工作，EF 可以很好地与 TVP 配合使用。检查这个：[实体框架存储过程表值参数](https://stackoverflow.com/questions/8157345/entity-framework-stored-procedure-table-value-parameter)。所以最好的办法是直接发送一个表到你的存储过程，然后发送一个字符串来解析。

# c - 这段 C 代码有什么漏洞？（整数...）

> ID：12507293
> 
> 赞同：0
> 
> 时间：2012-09-20T06:45:36.253
> 
> 标签：c, linux, exploit, secure-coding

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>

#define MAX 3
#define ARG "cat .passwd"
integer main( integer argc, char ** argv )
{
char * names[] = {"strlen", "atoi", "printf", "puts"};
void (*reachable_functions[])( char * ) = {strlen, atoi, printf, puts};
void (*unreachable_functions[])( char * ) = {system};
integer i, index = 0;

for( i=1; i<argc; i++ )
{
    index += strlen(argv[i]);
}

if( index <= MAX )
{
    (reachable_functions[MAX-1])( "Calling ");
    (reachable_functions[MAX-1])( names[index] );
    (reachable_functions[MAX-1])( ".\n" );
    (reachable_functions[index])( ARG );
}
else
{
    (reachable_functions[MAX])( "Out of bounds !\n" );
}

return 0;
} 
```

我可以得到分段错误，但无法调用无法访问的函数！？！我知道 Integer 有问题，但我无法利用它.... :( 有没有办法调用它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:04:25.007

如果您传递足够长度的足够参数，则长度之和可能会溢出（如果整数类型为 32 位，则不确定 shell 实际上是否可以处理此类参数，但应该适用于 16 位整数）。

有符号整数的溢出（我想`integer`应该是`int`）是未定义的行为，因此在这种情况下会发生什么取决于编译器和平台（可能还有月相），但总和可能会环绕为负数。在这种情况下，根据编译器排列数组的方式，调用

```
(reachable_functions[index])( ARG ); 
```

实际上可以调用“无法访问”的功能。这是更多未定义的行为，用负索引索引数组，但它是一个可能的漏洞。

为了防止这种利用（只要未定义的行为允许），可以`index`在比较中强制转换为无符号类型，

```
if( (unsigned int)index <= MAX ) 
```

在所有合理的实现中，其中 的宽度`unsigned int`等于 的`int`，这保证了`index`确实是非负的（再次警告，在发生未定义的行为之后，标准不再保证程序的行为），因为那时负数被转换为大于 的数字`INT_MAX`。

如果一个人是偏执狂，也可以在索引操作中进行强制转换。

# java - SSH连接到休眠中的mysql服务器

> ID：12507294
> 
> 赞同：1
> 
> 时间：2012-09-20T06:45:37.427
> 
> 标签：java, hibernate, ssh

我在 MySql 5 服务器中有数据库，但它需要 ssh 连接。我想使用 hibernate 但我不知道如何配置 hibernate.cfg.xml 文件以连接到 ssh 服务器。当然，我试图在谷歌中找到答案，但我没有找到任何东西。我也尝试过使用腻子，但这也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:00:04.073

我希望您可以使用[Jsch](http://www.jcraft.com/jsch/)进行 ssh hibernate，有关 Jsch 的示例请[点击这里](http://www.jcraft.com/jsch/examples/)

这是 它可以帮助您解决休眠中的 SSH的[链接。](https://stackoverflow.com/questions/12317077/getting-data-through-an-ssh-tunnel-using-hibernate)

# visual-studio-2012 - 关闭解决方案时 Visual Studio 2012 挂起

> ID：12507303
> 
> 赞同：8
> 
> 时间：2012-09-20T06:46:24.523
> 
> 标签：visual-studio-2012, freeze

使用 Visual Studio Ult 2012 v. 11.0.50727.1。

当我关闭解决方案或 Visual Studio 时，程序在几分钟内没有响应。

我已经尝试过[http://connect.microsoft.com/VisualStudio/feedback/details/748339/vs2012rc-hangs-on-close](http://connect.microsoft.com/VisualStudio/feedback/details/748339/vs2012rc-hangs-on-close)中提出的解决方案 （开启自动恢复和安装修补程序[http://support.microsoft。 com/kb/2493869](http://support.microsoft.com/kb/2493869) )

Visual Studio 2010 安装在 2012 旁边。这里我们看不出问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:35:16.590

此特定问题是由 Visual Studio 项目引用（映射）网络驱动器上的 dll 引起的。文件服务器运行 Windows Server 2008，客户端（运行 VS）运行 Windows 7。因此在两者之间使用 SMB 2.0。SMB 是用于网络文件传输的协议。

在客户端上禁用 SMB 2.0 并恢复为 SMB 1.0 可解决此问题。 [http://www.petri.co.il/how-to-disable-smb-2-on-windows-vista-or-server-2008.htm](http://www.petri.co.il/how-to-disable-smb-2-on-windows-vista-or-server-2008.htm)

# android - 我无法移动地图视图上的缩放控制按钮

> ID：12507306
> 
> 赞同：-1
> 
> 时间：2012-09-20T06:46:34.090
> 
> 标签：android, zooming, android-mapview

我想将它移动到地图视图的顶部。我该如何改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:48:56.097

```
zoomView = (LinearLayout) mapView.getZoomControls();

zoomView.setLayoutParams(new ViewGroup.LayoutParams

(ViewGroup.LayoutParams.WRAP_CONTENT,

 ViewGroup.LayoutParams.WRAP_CONTENT)); 

zoomView.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
mapView.addView(zoomView); 
```

# ios - 有什么办法可以在iOS中使用flurry删除应用程序多少次？

> ID：12507311
> 
> 赞同：0
> 
> 时间：2012-09-20T06:46:48.497
> 
> 标签：ios, flurry

我在我的 iOS 应用程序中使用 Flurry。当用户使用删除应用程序时，我正在尝试记录事件。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:16:10.993

您可以为用户在应用程序中执行的任何操作记录事件。如果用户已经退出您的应用程序，则无法跟踪删除。（免责声明：我在 Flurry 的支持团队工作）

# pex-and-moles - 使用痣为存根类创建实例调用实际的类构造函数

> ID：12507312
> 
> 赞同：1
> 
> 时间：2012-09-20T06:46:59.713
> 
> 标签：pex-and-moles

我是 Microsoft Moles 的新手。我试图为 Moles 生成的存根类创建实例，当我调试它时，它调用我不需要的actaul 类构造函数。如何在 Moles 中实现这一点。下面提供了一个示例代码以便更好地理解

```
public class BaseClass
{
    public BaseClass()
    {
        MarkNew();
    }

    protected void MarkNew()
    {
        this.State = ObjectState.New;
        MarkChild();
    }

    protected virtual void MarkChild()
    {
    }

    public ObjectState State { get; private set; }
}

public class DerivedClass : BaseClass
{
    public DerivedClass() : base()
    {
    }

    public string FileName { get; set; }
    public string Value { get; set; }
}

[PexMethod]
[HostType("Moles")]
public void ReadContentTest(string content)
{
    // Arrange.
    SDerivedClass derivedObject = new SDerivedClass();
    derivedObject.FileName = "test.txt";
    var fs = new SIFileSystem();
    fs.ReadAllTextString = delegate(string fileName)
    {
        PexAssert.AreEqual(derivedObject.FileName, fileName);
        return content;
    };

    // Act.
    var test = new TestReaderWithStubs(fs);
    test.ReadContent(derivedObject);

    // Assert.
    PexAssert.IsTrue(content == derivedObject.Value);
} 
```

提前致谢 问候西瓦

# jquery - .click() 在 Firefox 中有效，但在 chrome 中无效

> ID：12507313
> 
> 赞同：1
> 
> 时间：2012-09-20T06:47:10.390
> 
> 标签：jquery

我使用这个问题的答案中建议的解决方案

[如何将 twitter 引导选项卡作为表单向导？](https://stackoverflow.com/questions/11426872/how-to-make-twitter-bootstrap-tab-as-form-wizard)

因为我需要相同的功能并且它在 Firefox 中运行良好，但在 chrome 中我得到：

`Uncaught TypeError: Object.../localhost:..../#otherIncome1 has no method 'click'`

我知道`.click()`chrome 不支持 on 元素（或者我错了吗？）。我发现了相关的问题，但似乎没有任何效果。

我试过了： `"$('#n.1').click()"`或`"$('#n.1').trigger('click')"`

我没有收到任何错误，但仍然无法正常工作。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:45:10.200

似乎我找到了一个适用于 chrome 和 firefox 的解决方案。我在这个问题的第一个答案中使用了代码： [如何使用 JavaScript 模拟鼠标点击？](https://stackoverflow.com/questions/6157929/how-to-simulate-mouse-click-using-javascript)

结合：

```
 $("#b1n").click(function ()
   {
    simulate(document.getElementById("n.2"), "click");
   });
 $("#b2n").click(function ()
   {
    simulate(document.getElementById("n.3"), "click");
   }); 
```

...对于所有按钮，并以这种方式更改按钮：从此：

```
<button onclick="document.getElementById('n.2').click()">next</button> 
```

对此：

```
 <button id='b2n'>next</button> 
```

就这样！

# java - java 为什么切换器不工作？

> ID：12507314
> 
> 赞同：0
> 
> 时间：2012-09-20T06:47:16.210
> 
> 标签：java, switch-statement

该程序会做`text = invoertextbox.getText();`，`invoertextbox.setText("");`但它不想打开切换器或默认值。有人建议吗？它也不显示消息框。

```
import java.awt.event.*;
import javax.swing.JTextField;
import javax.swing.*;
import java.awt.*;
import java.io.*;
import java.awt.Toolkit;
import java.util.Timer;
import java.util.TimerTask;

public class Paneel extends JPanel {

    private static final long serialVersionUID = 1L;
    String text;
    String AccountName = "default";
    String autosavecheck = "";
    int level = 0;
    String iss;
    JLabel monsterlabel, progresslabel, commandslabel, label1;
    JProgressBar monsterbar, progressbar;
    JButton sendknop, clearknop, creditsknop, saveknop, loadknop, restartknop,
            disableautosaveknop;
    JTextField commandstextbox, naamtextbox, invoertextbox, dialoogtextbox;
    JOptionPane resetdialog;
    Toolkit toolkit;
    Timer timer;

    public Paneel() {

        setLayout(null);

        dialoogtextbox = new JTextField(12);
        dialoogtextbox.setFont(new Font("sansserif", Font.BOLD, 12));
        dialoogtextbox.setBounds(12, 12, 838, 207);
        dialoogtextbox.list();
        invoertextbox = new JTextField(12);
        invoertextbox.setBounds(12, 330, 982, 20);
        commandstextbox = new JTextField(12);
        commandstextbox.setBounds(856, 28, 138, 191);
        naamtextbox = new JTextField(12);
        naamtextbox.setBounds(772, 263, 220, 20);
        sendknop = new JButton("Send");
        sendknop.setBounds(12, 260, 75, 23);
        sendknop.addActionListener(new sendknopHandler());

        add(dialoogtextbox);
        add(invoertextbox);
        add(commandstextbox);
        add(naamtextbox);
        add(sendknop);

        class sendknopHandler implements ActionListener {
            public void actionPerformed(ActionEvent e) {
                doen();
            }
        }

    private void doen() {
        text = invoertextbox.getText();
        invoertextbox.setText("");
        // Spellingcheck

        switch (level) {
            case 0:
                if (text == "start") {
                    messagebox("test");
                    level = 1;
                    AccountName = naamtextbox.getText();
                    dialoogtextbox.setText(dialoogtextbox.getText() + "\n"
                            + " you are " + AccountName);
                    dialoogtextbox.setText(dialoogtextbox.getText()
                            + "\n"
                            + " you found you're self in a basement with furniture and a door.");
                    commandstextbox.setText("open door");
                    commandstextbox.setText(commandstextbox.getText() + "\n"
                            + "check table");
                }
                break;
            default:
                dialoogtextbox.setText("niks");
                break;
            // Hall key Gebruiken
        }
        progressbar.setValue(level);
    }

    private void messagebox(String string) {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T06:47:57.910

代替

```
text == "start" 
```

和

```
"start".equals(text) 
```

* * *

**看**

*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:50:40.960

它不是开关它的`if (text == "start")`

> 始终使用 equals 进行字符串比较。& equalsIgnoreCase 用于大小写无关的比较
> 
> 此外，如果其中一个参数是固定字符串，则应该使用它来进行比较，就像在您的情况 F 中那样避免不必要的空检查。

```
"start".equalsIgnoreCase(text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:53:45.077

正如 Jigar Joshi 所说，或者您可以切换到允许使用创建字符串基础切换器的 Java 7

```
String name = getName();
switch (name)
  {
    case "anna": break;
    case "sara": break;
    default:
  } 
```

但这仅在 Java 7 中，否则您必须使用 IF ELSE 语句。

# apache - 我可以使用 htaccess 将一个域隐形重定向到另一个域上的子域吗？

> ID：12507318
> 
> 赞同：1
> 
> 时间：2012-09-20T06:47:34.453
> 
> 标签：apache, .htaccess, redirect, rewrite, subdomain

我一直在努力研究这个问题，看看这是否可能。任何帮助，将不胜感激。

我有两个域。我们称它们为 foo.com 和 bar.com。我只有一个网络服务器，所以现在，它们指向同一个地方。

我在 bar.foo.com 上设置了一个单独的站点。

我希望所有对 bar.com 的访问都转到 bar.foo.com，但仍然在浏览器的地址栏中显示“bar.com”。

这是我的 htaccess 中的内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^bar.com$ [NC]
RewriteRule ^(.*)$ http://foo.bar.com/$1 [R=301,L] 
```

这成功地重定向了它，但是，您最终会在地址栏中看到“foo.bar.com”。

使用 htaccess，我可以让这个重定向“隐形”发生，这样如果用户输入“bar.com”，他们仍然会在浏览器中看到“bar.com”吗？

我无权访问服务器上的 apache 配置文件，因此我仅限于可以放入 htaccess 文件的内容。

任何帮助或建议将不胜感激。

谢谢！

# javascript - 匹配单词中的字符

> ID：12507319
> 
> 赞同：0
> 
> 时间：2012-09-20T06:47:45.430
> 
> 标签：javascript, regex

我正在尝试找到一个正则表达式来查找一组单词中某些字符序列的出现..

假设我有一组单词

```
["Microsoft Windows", "International Superstar", "algorithm" , "stegration stunt"] 
```

我正在尝试查找出现字符“ `in`”的单词..所以它应该返回单词`"Microsoft Windows", "International Superstar"`

我试过`var match = /(in)/i.exec("Microsoft Windows")` 了，它可以解决问题..“in”序列只是一个例子..它可以是任何字符集..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:50:27.503

你可以使用这个正则表达式

```
/".*in.*"/gi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:56:01.103

你可以试试这个

首先定义你的正则表达式，

```
var testRegex = 'in'; 
```

然后创建你的正则表达式对象

```
var myRegex = new RegExp(testRegex,"g"); 
```

然后继续像任何普通的正则表达式一样使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:18:35.200

***注意：*** *它区分大小写。*

```
<script>

var arr = ["Microsoft Windows", "International Superstar", "algorithm" , "stegration stunt"];
var i;
var res = [];
for (i=0;i<arr.length;i++) {

    if(arr[i].indexOf('in') > -1){
        res.push(arr[i]);
    }
}
alert(res);
</script> 
```

# android - 我如何使用 Jquery mobile 实现 MVC 架构

> ID：12507321
> 
> 赞同：4
> 
> 时间：2012-09-20T06:48:02.437
> 
> 标签：android, html, jquery-ui, jquery-mobile

我正在使用 php 服务器端开发 jquery 移动应用程序。我想知道有没有办法在 jquery mobile 中拆分视图、控制器和模型。
因为在一个文件中编写视图和控制器会弄乱文件。
我如何在[jquery mobile](http://jquerymobile.com/)中实现 MVC 架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:14:44.297

你的控制器或模型中不应该有任何 jQuery 移动代码。

我不确定“我想知道是否有任何方法可以在 jquery mobile 中拆分视图控制器和模型”是什么意思——这都是 PHP，jQuery mobile 应该只存在于您的视图中。

只需创建一个常规的 MVC 设置并在视图中使用 jQuery 移动设备。

我在 Rails 网站上使用了 jQuery mobile，并为每个页面创建了一个 .mobile 和一个 .tablet 视图。jQuery mobile 只影响外观，它纯粹是一个视图。

编辑：还有一些 Rails 工作可以触发“是否移动”，但由于您使用的是 php，因此不值得深入研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:31:58.047

看看[淘汰赛](http://knockoutjs.com/)。它不是 MVC 而是 MVVC 框架，但是它将为您提供与您正在寻找的逻辑的分离。这是将它与 JQM 一起使用的[示例](http://operationmobile.com/quick-tip-for-using-knockout-js-and-jquery-mobile-list-dividers/)和[jsFiddle 原型](http://jsfiddle.net/ycQwH/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T02:29:45.533

很容易将它与[CakePHP](http://cakephp.org)集成。我已经使用了一点，它既简单又直观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T19:59:10.183

您不应该将模型、视图和控制器全部组合到您的 javascript 层中（除非您使用 Knockout.js 之类的东西，在这种情况下您甚至不需要 PHP）

如果您正在使用服务器端编程，那么 Javascript 它只是您视图的增强器。

只需使用任何 PHP MVC 框架并根据浏览器（移动或桌面）显示不同的视图。然后使用 jquery mobile 渲染一个移动友好的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T07:20:36.640

经过我所有的搜索，我发现骨干 js 将解决我认为的问题。[骨干.js](https://github.com/thomasdavis/backbonetutorials) [2](https://github.com/ccoenraets/backbone-jquerymobile)

主干 javascript 提供视图、模型和集合，以使用 jquery mobile 实现 MVC 架构。但尚未搜索的是它与谷歌地图的兼容性，如驾驶视图和地图方向。

请讨论你的想法。

# mysql - 红宝石mysql连接错误

> ID：12507323
> 
> 赞同：2
> 
> 时间：2012-09-20T06:48:14.073
> 
> 标签：mysql, ruby-on-rails, ruby

我正在使用 MySQL 和 ruby​​ 1.8.6。我想连接到 MySQL，因此我正在使用活动记录 gem。我的代码是

```
def initialize

    @db_adapter  = "mysql2"
    @db_host     = "localhost"
    @db_database = "database_name"
    @db_user     = "root"
    @db_password = "root123"
    con = nil

end

def database_connection
           con = ActiveRecord::Base.establish_connection(  
              :adapter  => $db_adapter,  
              :host     => $db_host,  
              :database => $db_database,
              :user     => $db_user,
              :password => $db_password  
           )

           return con
end 
```

但是当我试图连接时，它给了我这个错误

```
/usr/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:76:in `establish_connection': Please install the  adapter: `gem install activerecord--adapter` (no such file to load -- active_record/connection_adapters/_adapter) (RuntimeError)
    from /cmf/samnew/build/Controller/databaseConnection.rb:32:in `database_connection'
    from controller.rb:23 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:26:17.937

该错误显示`activerecord--adapter`未安装 gem。您可以使用以下命令安装 gem

```
gem install activerecord--adapter. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:22:47.273

尝试

```
con = ActiveRecord::Base.establish_connection(  

        :adapter  => @db_adapter,  

        :host     => @db_host,  

        :database => @db_database,

        :user     => @db_user,

        :password => @db_password  

) 
```

# javascript - 使用 execCommand 插入后如何获取图像元素？

> ID：12507328
> 
> 赞同：8
> 
> 时间：2012-09-20T06:48:30.370
> 
> 标签：javascript, html, contenteditable, execcommand, insert-image

使用 execCommand 插入图像后，有什么方法可以获取图像元素？例如

```
e.execCommand('insertimage',0,'ronaldo.png') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-03T03:46:35.607

不要使用`insertimage`，使用普通的 old`insertHTML`并为您插入的元素提供一个 ID，以便您以后可以引用它。IE，

```
function insertHTML(img) {
  var id = "rand" + Math.random();
  var doc = document.getElementById("editor");
  doc = doc.document ? doc.document : doc.contentWindow.document;
  img = "<img src='" + img + "' id=" + id + ">";

  if(document.all) {
    var range = doc.selection.createRange();
    range.pasteHTML(img);
    range.collapse(false);
    range.select();
  } else {
    doc.execCommand("insertHTML", false, img);
  }
  return doc.getElementById(id);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-27T22:27:36.083

您可以使用浏览器在插入图像之后立即放置插入符号并从那里返回的事实。以下需要 DOM 范围和选择支持，这排除了 IE <= 8，但如果这很重要，那么您可以使用我自己的[Rangy 之](https://code.google.com/p/rangy/)类的库来填补这一空白。

演示：http: [//jsfiddle.net/xJkuj/](http://jsfiddle.net/xJkuj/)

代码：

```
function previousNode(node) {
    var previous = node.previousSibling;
    if (previous) {
        node = previous;
        while (node.hasChildNodes()) {
            node = node.lastChild;
        }
        return node;
    }
    var parent = node.parentNode;
    if (parent && parent.nodeType.hasChildNodes()) {
        return parent;
    }
    return null;
}

document.execCommand("InsertImage", false, "http://placekitten.com/200/300");

// Get the current selection
var sel = window.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var node = range.startContainer;
    if (node.hasChildNodes() && range.startOffset > 0) {
        node = node.childNodes[range.startOffset - 1];
    }

    // Walk backwards through the DOM until we find an image
    while (node) {
        if (node.nodeType == 1 && node.tagName.toLowerCase()  == "img") {
            alert("Found inserted image with src " + node.src);
            break;
        }
        node = previousNode(node);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-23T17:23:47.563

这是我的方式：

```
e.execCommand('insertimage', 0, URI) // image's URI
image=$('img[src="'+URI+'"]').not('.handled').addClass('.handled');

//.not('.handled').addClass('.handled') is needed if there are many images with the same URI 
```

# php - 使用 XSD 进行 PHP SimpleXMLElement 验证

> ID：12507331
> 
> 赞同：5
> 
> 时间：2012-09-20T06:48:42.437
> 
> 标签：php, xml, validation, xsd

是否可以使用存储在字符串中的 XSD shema 验证 SimpleXMLElement？

我通过 CURL 得到这个 xml：

```
<production_feedback>
        <production_number>DA1100208</production_number>
    <production_status>DONE</production_status>
</production_feedback> 
```

在我这边，我是这样理解的：

```
if ( $_SERVER['REQUEST_METHOD'] === 'POST' ){

    $post_text = file_get_contents('php://input');

    $xml = new SimpleXMLElement($post_text);

    error_log(print_r($xml , true));
    } 
```

这是在我的`error_log()`：

```
SimpleXMLElement Object\n(\n    [production_number] => DA1100208\n    [production_status] => PRODUCTION_IN_PROGRESS\n)\n 
```

所以我可以使用 Xpath 访问数据。这很好用。我想用 XSD 验证它。是否有可能，或者是否有任何其他方式 2 使用 XSD 字符串验证 XML 字符串？

这是我存储在变量中的 XSD 顺便说一句：

```
$production_XSD ='<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="production_feedback">
    <xs:complexType>
      <xs:sequence>
        <xs:element type="xs:string" name="production_number"/>
        <xs:element type="xs:string" name="production_status"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T06:59:11.783

SimpleXMLElement 类不支持（只要 php.net 上的文档是最新的）。

[DOMDocument](http://php.net/manual/en/class.domdocument.php)使用DOMDocument::schemaValidateSource 方法提供您正在寻找的功能。

- - 原来的

但是，[XMLReader](http://ch2.php.net/manual/en/book.xmlreader.php)类具有 setSchema 方法，可用于针对 XSD**文件**进行验证（这不完全是您要查找的内容，但这是我在不依赖任何外部库的情况下发现的内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T06:42:50.190

我最近需要针对 XSD 文件验证包含 XML 字符串的 var，因此如果其他人正在寻找此解决方案，请参见下文：

```
// $xml_feed is a string containing your XML content
// validate xml string with xsd file
$doc = new DOMDocument();
$doc->loadXML($xml_feed); // load xml
$is_valid_xml = $doc->schemaValidate('XSDs/FeedFile.xsd'); // path to xsd file

if (!$is_valid_xml){
    echo '<b>Invalid XML:</b> validation failed<br>';
}else{
    echo '<b>Valid XML:</b> validation passed<br>';
} 
```

如果您还将 XSD 存储在字符串中，请将“XSDs/FeedFile.xsd”替换为包含您的 XSD 的 var。希望有人觉得这有帮助！

# linux - 无法使用 makefile 编译 - 未定义对 `boost::re_detail 的引用

> ID：12507333
> 
> 赞同：0
> 
> 时间：2012-09-20T06:48:50.500
> 
> 标签：linux, boost, reference, undefined, linux-mint

我得到了一项改善某些代码运行时间的任务。唯一的问题是，我什至无法编译它以首先在我的机器上运行它。每次我尝试时，它都会在编译过程中停止说：

> “对`boost::re_detail::put_mem_block(void*)'的未定义引用collect2：ld返回1退出状态make：*** [cpu]错误1”

这是makefile的样子：

```
SHELL = /bin/bash

OBJECTS = main.o atom.o molecule.o charges.o pdb.o asa.o amino.o chain.o addition.o string_operation.o pdb_peptide.o protein_chain.o residue_atom.o chain_residue.o residue_contact.o atom_grid.o circles.o atom_space_calculations.o

OBJDIR = obj

VPATH = src:src/ext:$(OBJDIR)

CFLAGS = -O3 -Wall -lm -lboost_regex -L/usr/local/boost/lib

HDIRS = src,src/ext,src/qt_redistributable, usr/lib, usr/local/lib, usr/local/lib/include/boost, /usr/local/lib/lib/
IOPTS = $(addprefix -I, $(HDIRS))

cpu : $(addprefix $(OBJDIR)/, $(OBJECTS) $(CPUOBJS))
    g++ $(CFLAGS) -o mcpu $^ 

$(OBJDIR)/%.o : %.cpp
    g++ $(CFLAGS) $(IOPTS) -c $< -o $@

clean : 
    rm obj/*.o $(PROG) 
```

我正在使用 Linux Mint x64，并且我已经尝试了我搜索的所有内容。在 usr/local/lib 中安装了整个 boost 库（没有明显的原因，因为它没有帮助），尝试编辑 LD PATH（我对 Linux 非常陌生，我不知道这是否正确）和很多东西，但这件事似乎没有通过。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:07:00.300

当您链接您的程序时，您的 makefile 会出现一个问题。正如您在g++ 的[这些](https://stackoverflow.com/questions/45135/linker-order-gcc) [问题](https://stackoverflow.com/questions/9417169/why-does-the-library-linker-flag-sometimes-have-to-go-at-the-end-using-gcc)中看到的那样，链接时参数的顺序非常重要。您需要将库放在目标文件之后。一种简单的解决方法是将链接器标志 ( `LDFLAGS`) 与编译器标志 ( ) 分开，`CFLAGS`然后将（您的目标文件）放在链接命令中。`LDFLAGS``$^`

```
CFLAGS = -O3 -Wall 

LDFLAGS = -L/usr/local/boost/lib -lm -lboost_regex  

cpu : $(addprefix $(OBJDIR)/, $(OBJECTS) $(CPUOBJS))
        g++ $(CFLAGS) -o mcpu $^ $(LDFLAGS)

$(OBJDIR)/%.o : %.cpp
        g++ $(CFLAGS) $(IOPTS) -c $< -o $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-05T16:08:44.257

[从内置规则目录中](//gnu.org/software/make/manual/html_node/Catalogue-of-Rules)可以看出：

> 链接单个目标文件
> 
> `n`通过 C 编译器`n.o`运行链接器（通常称为 ）自动生成。`ld`使用的精确配方是：
> 
> ```
> $(CC) $(LDFLAGS) n.o $(LOADLIBES) $(LDLIBS) 
> ```

和[隐式规则使用的变量](//gnu.org/software/make/manual/html_node/Implicit-Variables)：

> LDFLAGS
> 
> Extra flags to give to compilers when they are supposed to invoke the linker, `ld`, such as `-L`. Libraries (`-lfoo`) should be added to the LDLIBS variable instead.

So in this case `-lboost_regex` should be set or added to LDLIBS, not LDFLAGS.

# sql-server - 如何增加 SQL Server 中的 blob 大小

> ID：12507338
> 
> 赞同：-1
> 
> 时间：2012-09-20T06:48:57.973
> 
> 标签：sql-server, size, blob

因为我使用 Delphi 上传图像和 SQL Server 数据库来存储图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:19:39.963

使用`VARBINARY(MAX)` [字段类型](http://www.developer.com/net/asp/article.php/3761486/Working-with-Binary-Large-Objects-BLOBs-Using-SQL-Server-and-ADONET.htm) ，它可以达到 2GB 大小（MSSQL 2005 和更高版本）。

# jquery - jQuery多个变量不在同一页面上工作

> ID：12507340
> 
> 赞同：2
> 
> 时间：2012-09-20T06:49:00.393
> 
> 标签：jquery

我`$ var`在我的代码中使用 jQuery，但我有一些外部 js 文件`$jx`用作 jQuery Var。现在我的代码不起作用，我越来越`$`不是一个函数。我删除了所有外部 js 文件然后它正在工作。我寻找解决方案。许多人说“您可以使用自己的 var 作为 jQuery/$ 来代替 like `var $jx = jQuery.noConflict();`。但是当我在我的页面中调用这一行时，我`$ var`的被删除并显示“$ 不是函数”错误。我做了一个简单的代码解释这个问题

请阅读并测试我的以下代码。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
//var $=jQuery.noConflict();
var $jx = jQuery.noConflict(); // this $jx var will be used in another plugins or codes

function test()
{
$("#test").hide();
}
</script>

</head>

<body>
<input type="button" value="Click Me to hide box" onclick="test()" />
<div id="test" style="border:1px solid #0033FF; background:#999900; height:100px; width:200px; color:#FFFFFF; font-size:20px;">I will be hidden</div>
</body> 
```

运行上面的代码，点击按钮，什么都不会发生。将发生错误。现在只需删除此行即可`var $jx = jQuery.noConflict();`。我没有在这里使用 $jx ，而是为其他外部脚本使用它。那么如何`$jx`在同一页面中同时使用 $ 和？我的错误是什么？

我的工作在项目进行到一半时就停止了。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:53:32.827

[改写成这样](http://api.jquery.com/jQuery.noConflict/)

```
<script type="text/javascript">

$.noConflict();

function test()
{
  jQuery("#test").hide();
}
</script> 
```

这意味着`$`您不必`jquery`在代码中使用任何地方`$`，而是需要使用。

或者

```
<script type="text/javascript">
var jx = $.noConflict();    

function test()
{
  jx("#test").hide();
}
</script> 
```

现在这意味着`$`您不必`j`在代码中使用任何地方`$`，而是需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:53:48.187

尝试`var jx = jQuery.noConflict();`代替`var $jx = jQuery.noConflict();`

后来`jx("#test").hide();`代替`$("#test").hide();`.

另见文档：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:51:12.167

你可以使用：

```
var $jx = jQuery.noConflict();
$jx(document).ready(function($){

function test()
{
    $("#test").hide();
 }
}); 
```

正如您已将 $ 重新定义为 jQuery 的句柄

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T20:14:23.043

我用

```
var jquery = $;
jquery("#test").hide(); 
```

# php - 使用 jQuery getJSON 淘汰 JS

> ID：12507341
> 
> 赞同：0
> 
> 时间：2012-09-20T06:49:08.347
> 
> 标签：php, jquery, ajax, knockout.js

我很困惑为什么当我将元素添加到可观察数组时我的 UI 没有更新。我意识到我没有对我的 AJAX getJSON 调用数据做任何事情，但是当我向其中添加元素时，淘汰赛不应该更新我的可观察数组吗？它显示“test1”很好但不是“test2”。没有 PHP 或 JS 错误，它根本不会更新 UI。

HTML：

```
<div class="allScheduleWrap" data-bind="foreach: schedules">
    <div class="schedule">
        <div class="downTime" data-bind="text:downTime"></div>
    </div>
</div> 
```

JS：

```
$(document).ready(function() {
    var AllSchedules = [];
    AllSchedules.push({downTime: "test1"});

    function SchedulesViewModel() {
        var self = this;
        self.schedules = ko.observableArray(AllSchedules);
    }

    ko.applyBindings(new SchedulesViewModel());

    $.getJSON("GetSchedules.php", function(data) {          
        AllSchedules.push({downTime: "test2"}); //does NOT update the UI

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:17:12.920

您应该将数据推送到可观察数组（shedules）而不是 AllSchedules 变量。用这个替换你的代码应该使它工作：

```
var model = new SchedulesViewModel()
ko.applyBindings(model);

$.getJSON("GetSchedules.php", function(data) {          
    model.schedules.push({downTime: "test2"}); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:56:37.170

因为 AllSchedules 数组不是 observable 数组，所以改为 observableArray

# cocoa - 如何获取自定义单元格类（NSTextFieldCell 的子类）中单元格的 objectValue？

> ID：12507342
> 
> 赞同：0
> 
> 时间：2012-09-20T06:49:16.250
> 
> 标签：cocoa

我有一个基于单元格结构的自定义 NSOutlineView。我已经为大纲视图挂钩了一个自定义单元格。对于大纲视图中的每一行，我已经为大纲视图中的每一行挂钩了一个自定义数据模型对象。我已经使用以下方法连接了节点对象：

*   `(NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item`
*   `(id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item`
*   `(id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)theColumn byItem:(id)item`

现在我需要在我的自定义单元类的`drawInteriorWithFrame::`方法中访问数据模型对象，以便相应地绘制它。

我尝试`[self objectValue]`在自定义单元类中使用，但它没有返回我传递给它的对象`ObjectValue`。

我的方法有什么问题吗？或者有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:56:15.840

我不知道单元格的 objectValue 发生了什么。但处理此问题的一种方法是将属性或成员变量添加到 Cell 子类以保存对模型对象的引用。然后你可以在 drawInteriorWithFrame: 中使用它。如果您不使用 ARC，请务必将 dealloc 中的引用设为 nil。

# php - 用于替换 XML 标记的正则表达式

> ID：12507348
> 
> 赞同：0
> 
> 时间：2012-09-20T06:49:55.383
> 
> 标签：php, xml, regex, parsing

我正在尝试从 xml 替换标签。我已经通过 curl 在变量中存储了一个 xml 结果。并试图制作一个file.xml。当它

```
 <Topics>
  <Topic code="Balances" count="26" pagesize="100" />
  </Topics> 
```

使用此功能，它不会返回任何匹配项。为什么？

```
 function get_tag( $tag, $xml ) {
    $tag = preg_quote($tag);

     preg_match_all('{<'.$tag.'[^>]*>(.*?)</'.$tag.'>}',
               $xml,
               $matches,
               PREG_PATTERN_ORDER);

  return $matches[1];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:57:48.300

您的示例是解析文档的一个非常糟糕且缓慢的实现。建议您应该查看`DOMDocument`对象并尝试实现它。

根据您的示例的基本用法：

```
$dom = new DOMDocument();
$dom->loadXML("<xml ... />"); // Current document

$replace = $dom->getElementsByTagName($tag);

foreach ($replace as $node)
{
    $xml = $dom->createDocumentFragment();
    $xml->loadXML("<xml ... />"); // XML to replace original with

    $dom->replaceChild($xml, $node); // XML is your new node
}

$dom->normalize(); // Saves the changes
echo $dom->saveXML(); // Output 
```

编辑; 对不起 - 现在更好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:57:37.317

这是你想要的：

```
<?php

$xml = '
<tag1>
    <tag2>
        x
    </tag2>
    <tag3>
    </tag3>
    <tag2>
        y
    </tag2>
</tag1>
';

function get_tag($tag, $xml){
    $tag = preg_quote($tag);

    preg_match_all('/<'.$tag.'.*?>(.*?)<\/'.$tag.'>/s', $xml, $matches, PREG_PATTERN_ORDER);

    return $matches[1];
}

print_r(get_tag('tag2', $xml));

?> 
```

输出：

```
Array
(
    [0] => 
        x

    [1] => 
        y

) 
```

# google-analytics - 跟踪选择复选框等操作

> ID：12507349
> 
> 赞同：0
> 
> 时间：2012-09-20T06:49:59.963
> 
> 标签：google-analytics, adobe, adobe-analytics

我的网站上有一些复选框选择页面上的哪些数据被过滤但页面名称保持不变。我想为选择任何复选框的访问者捕获数据。你能告诉我怎么做吗？

目前，每当用户选择任何复选框时，我都有不同的页面名称。但是通过这样做，该页面的页面查看数据变得无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:30:01.607

对于 Omniture 跟踪，这是很有可能的，但您需要添加一些 javascript。您需要为复选框添加一个 onClick 事件，并让它向 Adob​​e 提交一个自定义链接事件。他们为它提供了一个功能：

```
s.tl(this, 'o', 'Checkbox X Clicked'); 
```

在此调用之前，如果您希望其他跟踪与此事件相关联，您可以设置 props/evars。但是，它不算作页面浏览量。

Omniture 实施指南在这里：

[http://microsite.omniture.com/t2/help/en_US/sc/implement/oms_sc_implement.pdf](http://microsite.omniture.com/t2/help/en_US/sc/implement/oms_sc_implement.pdf) ...搜索 s.tl() 函数。它会解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:46:58.633

据推测，您的页面具有执行过滤的 JavaScript。

每次用户进行选择时，您都需要添加到此 JavaScript 以向服务器发送 AJAX 请求。服务器将需要跟踪数据库或文件中的请求。之后，您可以分析结果。

在 JavaScript 中发送 AJAX 请求的方法有很多种。基础知识在这里：[http](http://www.w3schools.com/ajax/default.asp) ://www.w3schools.com/ajax/default.asp但也有 3rd 方库可用。

不幸的是，据我所知，“google-analytics”在这里无能为力。

祝你好运，DC

# php - 域名或网络服务不工作

> ID：12507351
> 
> 赞同：1
> 
> 时间：2012-09-20T06:50:25.743
> 
> 标签：php, web-services, dns

我为糟糕的格式道歉。我被困在关于域名或网络服务的一点上。

当我们在本地服务器上调用 Web 服务时，它正在工作，但是当我们从某个远程位置调用该服务时，它给出“404 未找到错误”。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:07:52.757

我同意 Night2，这听起来只能是 VirtualHost 的情况。

简而言之，如果您可以使用来自另一台机器的域名 ping 服务器，那么 dns-wise 就可以了，因为名称可以正确解析。获得 404 意味着您正在访问您的网络服务器 - apache 或您正在使用的任何东西，因为这是一个 HTTP 错误，听起来不像是端口问题。如果它在本地工作并且您在另一台机器上使用相同的名称，则不是 ServerAlias 问题。

[您可以从此处](http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost)获取设置 VirtualHost（在 apache 中）的语法。

简而言之，这意味着您拥有如下所示的东西：

```
<VirtualHost 10.1.2.3:80> 
```

IP 表示 VirtualHost 正在侦听的 IP 和端口。如果您在那里只有一个内部 IP，那么您只能在内部访问它，并且您必须使用 *:80 或指定适用的 IP，以便 apache 将跟踪将请求路由到哪个 VirtualHost。

# mysql - 使用 concat 的 MySQL 嵌套 case 过程

> ID：12507355
> 
> 赞同：0
> 
> 时间：2012-09-20T06:50:32.553
> 
> 标签：mysql, nested, case, procedure, concat

我正在做一个嵌套案例。但是，我在这条线附近遇到错误：

```
else 
        select concat('The month parameter ', p_month, ' is invalid; cannot proceed.'); 
```

这实际上是最内部情况的 else 情况。p_month 是一个 IN 参数，也是一个整数。这可能是错误吗？

任何想法都会有所帮助。谢谢你。

* * *

我现在玩得更多了。所以我决定在外面的街区上选择。但是，我现在知道内部块中的 Select 语句有错误。我该如何解决？谢谢。整个代码：

```
Create procedure ExamFeesMonth(in p_cl_id int, in p_month int)
begin
    declare count_cl_id int;
    declare num_exam int;
    declare count_exam int;
    declare v_msg varchar(200);

    -- check if p_cl_id is in vt_clients
    select count(*) into count_cl_id from vt_clients where cl_id = p_cl_id; 

    -- count the number of exams that has happened in p_month of previous year 
    select count(*) into num_exam 
    from vt_clients cl 
        join vt_headers h on cl.cl_id = h.cl_id
        join vt_details d on h.ex_id = d.ex_id
    where cl.cl_id = p_cl_id
        and month(ex_date) = p_month
        and year(ex_date) = (year(current_date())-1)
    ;

    select 
    -- first case block starts
    case
    -- client valid 
    when count_cl_id = 1 then

        -- second case block starts
        case 
        -- p_month valid
        when p_month in (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12) then

            -- third case block starts
            case 
            -- existing exams
            when count_exam >= 1 then
                select concat( 'Client ', p_cl_id, ' has ', count(h.ex_id),  
                                ' exam(s) with total fees of ', sum(ex_fee), 
                                ' in ', year(current_date())-1, '-', p_month)
                from vt_clients cl 
                    join vt_exam_headers h on cl.an_id = h.an_id
                    join vt_exam_details d on h.ex_id = d.ex_id
                where cl_id = p_cl_id 
                    and year(ex_date) = (year(current_date())-1)
                    and month(ex_date) = p_month
                ;
            -- no exams
            when count_exam = 0 then 
             concat( 'No exams for client ',  p_cl_id, ' in 2011-' , p_month, '.');

            -- third case block ends
            end 

        -- p_month invalid      
        else 
             concat('The month parameter ', p_month, ' is invalid; cannot proceed.');           

        -- second case block ends
        end 

    -- client invalid
    when count_cl_id = 0 then
    concat('We have no client with id ', p_cl_id, '; cannot proceed.') ;

    -- first case block ends
    end case;

end;
# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:07:44.253

我认为嵌套 CASE 中 END 语句中的问题。你应该使用`END CASE`. [案例...结束案例](http://dev.mysql.com/doc/refman/5.0/en/case.html)

```
 -- third case block ends
        end case;  --  <-------------here

    -- p_month invalid      
    else 
         concat('The month parameter ', p_month, ' is invalid; cannot proceed.');           

    -- second case block ends
    end case; --  <-------------and here 
```

# mysql - 无法启动 MySQL！在启动 XAMPP 时

> ID：12507358
> 
> 赞同：12
> 
> 时间：2012-09-20T06:50:38.803
> 
> 标签：mysql, sql, database, xampp

我是 Ubuntu 新手，我在 Ubuntu 10.04 中安装了 XAMPP。当我启动 XAMPP 时，它说 MySQL 无法启动。

这是我的终端输出：

```
$ sudo /opt/lampp/lampp start
Starting XAMPP for Linux 1.8.0...
XAMPP: Starting Apache with SSL (and PHP5)...
XAMPP: Starting MySQL...
XAMPP: Couldn't start MySQL!
XAMPP: Starting ProFTPD...
XAMPP for Linux started. 
```

然后当我转到 时`http://localhost`，我卡在 XAMPP 闪屏上，如果我选择语言，什么也不会发生。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-22T06:05:36.137

这对我来说是一种魅力。[我使用 Ubuntu 12.04 和 Xampp]

```
sudo chmod 755 /opt/lampp/etc/my.cnf

sudo chmod -R 777 /opt/lampp/var/mysql

sudo chown -hR root:root /opt/lampp 
```

& 现在开始你的 Xampp

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-07T02:24:37.643

可能只是`/opt/lampp`没有正确的权限。在重新安装所有内容之前，请尝试运行以下命令，它对我有用：

```
sudo /opt/lampp/lampp stop
sudo chmod 755 /opt/lampp/etc/my.cnf
sudo chmod -R 777 /opt/lampp/var/mysql
sudo chown -hR root:root /opt/lampp
sudo /opt/lampp/lampp start 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T19:29:46.900

只需用命令和命令去掉MySQL未启动的版本即可`rm -rf /opt/lampp` ：

```
tar xvfz xampp-linux-1.8.1.tar.gz -C /opt 
```

替换`xampp-linux-1.8.1.tar.gz`为您的文件名。重新启动您的lampp后，它会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:02:10.940

您可能没有完全删除旧的 Lampp 实例。请删除它并重新安装lampp。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-24T02:26:05.143

这可能是正确的`permissions`问题。一些解决方案会指导您将其设置**`777`**为不推荐的设置。尝试将其设置为安装时的原始权限。（特别是在您从 tar 恢复而不保留权限之后）

```
sudo /opt/lampp/lampp stop

sudo chown nobody.root /opt/lampp/var/mysql/cdcol /opt/lampp/var/mysql/mysql        /opt/lampp/var/mysql/phpmyadmin -R

sudo chown nobody.nogroup /opt/lampp/var/mysql/yourdbname -R

sudo /opt/lampp/lampp start 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-17T07:46:44.347

即使我有同样的问题。在继续查找根本原因之前，请务必检查错误日志。有时可能是文件系统空间问题。就我而言，它是“/”文件系统已满。清除一些空间后，我能够毫无问题地启动服务。

谢谢，毗湿奴

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-08T07:26:08.830

XAMPP 在我这边成功启动，但仍然卡在 spalsh 屏幕上。它通过授予 lang.tmp 文件的权限来解决

```
sudo chmod 777 /opt/lampp/htdocs/xampp/lang.tmp 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-30T09:37:45.153

您以前的 MySQL 安装可能会阻止您的 MySQL 从 xampp 捆绑包中获取。我也有同样的问题。只需卸载以前的 MySQL。打开终端（Ctrl ALT T）并粘贴以下代码：

第一站 XAMPP：

```
sudo /opt/lampp/lampp stop 
```

卸载 MySQL：

```
sudo apt-get purge mysql-server mysql-client mysql-common mysql-server-core-5.5 mysql-client-core-5.5
sudo rm -rf /etc/mysql /var/lib/mysql
sudo apt-get autoremove
sudo apt-get autoclean 
```

启动 XAMPP：

```
sudo /opt/lampp/lampp start 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-09-21T04:27:14.250

我找到了答案。首先完全卸载lampp，然后重新安装。在卸载之前，使用以下命令停止lampp：

```
/opt/lampp/lampp stop 
```

然后使用命令卸载/删除它

```
rm -rf /opt/lampp 
```

然后重新安装它。

# algorithm - 算法 - 匹配学生考试中心

> ID：12507361
> 
> 赞同：2
> 
> 时间：2012-09-20T06:50:46.103
> 
> 标签：algorithm

我遇到了将学生分组到最近的考试中心的问题。以下是条件/约束：

1.  有X个学生和Y个考试中心。每个中心将容纳不同数量的学生。
2.  考点总数的最大容量可以大于学生人数，但不能更小。
3.  一个学生可以到多个考试中心的最短距离。
4.  考试将在所有考试中心同时举行。

例如，有11500名学生和15个考试中心。5 个中心（1 至 5 个）可容纳 1500 名学生，3 个可容纳 600 名学生（6 至 8 名），另外 7 个（9 至 15 名）可容纳 350 名学生。

我开发了以下内容：

1.  每个考试中心的学生位置（注册地址）的数据库表。像下面的东西

    ```
    Student ID  Dist-Ex1  Dist-Ex2 ... Dist-Ex14  Dist-Ex15
    1            10         70            20         50
    2            25         43            5          105
    ...
    11499        35         12             35         55
    11500        5          23              5         5 
    ```

2.  我可以为每个学生添加一列存储最近的考试中心，并创建如下表：

    ```
    Ex centers           Nearest for no. of students
    1                     2000
    2                      500
    ...
    14                     150
    15                     500 
    ```

但我不知道如何进一步进行。我相信这是某种算法问题。如果有人能给我一些想法，我将不胜感激。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:20:21.073

我知道您正在寻找**最佳解决方案**- （所有学生都被分配到离他们最近的考试中心）。为此，我们将问题简化为**[最大流量问题](http://en.wikipedia.org/wiki/Maximum_flow_problem)**

将问题简化为二分¹图`G=(V,E)`，这样`V = {students} U {examination centers} U {S,T}`（所有学生、所有考试中心和两个额外的顶点 S 和 T）。
`E = CLOSESTS U {S} X {examination centers} U {students} X {T}`（S 连接到所有中心，所有学生都连接到 T，以及 CLOSETS - 我们现在将讨论）。
在哪里`CLOSESTS = { (exam,stud) | exam is the closest examination center to the student sutd}`

我们还需要一个权重函数`f:E->N`，使得：

```
f(u,v) = capcity if u=S, v=examination center
f(u,v) = 1 if u is examination center and v is student
f(u,v) = 1 if u is student and v is T 
```

生成的图表应类似于此示例：

![在此处输入图像描述](../Images/b90674195cd7a088c1460a6066709eb3.png) 现在，运行一个最大流量算法，比如[edmonds-karp](http://en.wikipedia.org/wiki/Edmonds-Karp_algorithm)。如果“进入”的最大流量 T 是#num_studets，则存在一个最优解，并由算法²实现的流量网络表示。max-flow 算法会在不突破容量限制的情况下，找出每条边放多少流量，相当于如何将一个学生分配到一个中心。

**证明：**

*   如果有 #students 的最大流量，则使用所有边 (student,T)，并且所有学生都有一个传入流量，因此被分配。另外，每个考点最多`capcity`分配一个学生，这个解决方案是有效的。
*   如果最大流量小于#students，那么有一个学生没有从考试中心获得流量，因此没有被分配，并且没有最优解。

* * *

(1) 不完全是二分图，因为我们添加了 S 和 T，没有它 - 它是。
(2)根据[积分流定理](http://en.wikipedia.org/wiki/Maximum_flow_problem#Integral_flow_theorem)，并且由于所有权重都是整数 - 存在积分解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:08:09.563

我建议您在这里查看遗传算法。

以学生群体和他们的作业为例，您的适应度函数可以为重叠较少的学生提供更大的价值。

我在大学期间以这种方式实现了学生/调度问题，效果非常好。

所以我相信遗传算法是一种方法

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T20:19:00.637

（我知道这是 2 年前问过的，但也许它会对某人有所帮助）

可以使用匈牙利算法 ( [https://en.wikipedia.org/wiki/Hungarian_algorithm](https://en.wikipedia.org/wiki/Hungarian_algorithm) ) 创建一个二分图，如下所示：

*   左边的节点代表**学生**
*   右侧节点代表15 个中心的**席位**
*   **将每个学生的边缘**插入每个座位，重量 = 到中心的距离
*   然后计算最小权重匹配

问题：您的矩阵大小为 11500²。

解决方案：可以使用以下算法在不将中心“扩展”到其座位的情况下对问题进行建模（我不会详细说明）：

[https://en.wikipedia.org/wiki/Minimum-cost_flow_problem](https://en.wikipedia.org/wiki/Minimum-cost_flow_problem)

# javascript - 将所有内容移动到不同标签下的特定 div 之后

> ID：12507369
> 
> 赞同：0
> 
> 时间：2012-09-20T06:51:12.810
> 
> 标签：javascript, jquery, html

我想将 div （再次位于 div 下）之后的所有文本（html 内容）移动到另一个标签。例如，如果我有一个如下所示的页面，我想将 div2 之后的所有内容移动到正文：

```
<body>
    <div id=div1>
      <div id=div2></div>
      <div id=div3></div>
      <script>blah</script>
      and much more
    </div>
</body> 
```

到

```
<body>
   <div id=div1>
      <div id=div2></div>
    </div>
    <div id=div3></div>
    <script>blah</script>
    and much more
 </body> 
```

我怎样才能做到这一点？使用

```
$('#div').appendTo('body'); 
```

只移动那个div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:09:46.520

您可以使用 jQuery 来实现这一点。

```
 var elems = $("#div2").nextAll();
    $('body').append(elems ); 
```

[jsfiddle](http://jsfiddle.net/2rJPW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:43:20.000

根据我的尝试，上面的响应是不正确的，因为它不会移动文本节点。试试这个，希望它是你正在寻找的：

```
​var $div = $("#div2"​), $con = $div.parent().contents();
$con.slice($con.index($div)+1).appendTo("body");
​ 
```

[jsfiddle](http://jsfiddle.net/5V6sC/1/)

# migration - 迁移期间的 POSKeyError

> ID：12507371
> 
> 赞同：2
> 
> 时间：2012-09-20T06:51:22.233
> 
> 标签：migration, plone

从 plone 3.3.2 迁移到 plone 4.2.1 失败并出现 PosKeyError。我已经尝试了这篇文章[http://plonechix.blogspot.com/2009/12/definitive-guide-to-poskeyerror.html](http://plonechix.blogspot.com/2009/12/definitive-guide-to-poskeyerror.html)中的食谱。我已经运行了 error_finder 片段，但它没有给我任何异常。我也尝试在调试器中使用对象`app.mysite._p_jar[p64(oid)]`- 也没有成功，它失败并出现同样的错误。

如何删除损坏的对象或至少获取有关对象的更多信息（例如其类名或位置）？

完整追溯：

```
POSKeyError('\x00\x00\x00\x00\x00\x0ey=',)
(Also, the following error occurred while attempting to render the standard error message, please see the event log for full details:
An operation previously failed, with traceback: 
File "/Users/makmak/Plone/buildout-cache/eggs/Zope2-2.13.16-py2.7.egg/ZServer/PubCore/ZServerPublisher.py", line 31, in __init__
  response=b) 
File "/Users/makmak/Plone/buildout-cache/eggs/Zope2-2.13.16-py2.7.egg/ZPublisher/Publish.py", line 443, in publish_module
  environ, debug, request, response)
File "/Users/makmak/Plone/buildout-cache/eggs/Zope2-2.13.16-py2.7.egg/ZPublisher/Publish.py", line 237, in publish_module_standard
  response = publish(request, module_name, after_list, debug=debug)
File "/Users/makmak/Plone/buildout-cache/eggs/Zope2-2.13.16-py2.7.egg/ZPublisher/Publish.py", line 134, in publish
  transactions_manager.commit()
File "/Users/makmak/Plone/buildout-cache/eggs/Zope2-2.13.16-py2.7.egg/Zope2/App/startup.py", line 301, in commit
  transaction.commit()
File "/Users/makmak/Plone/buildout-cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_manager.py", line 89, in commit
  return self.get().commit()
File "/Users/makmak/Plone/buildout-cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 336, in commit
  t, v, tb = self._saveAndGetCommitishError()
File "/Users/makmak/Plone/buildout-cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 329, in commit
  self._commitResources()
File "/Users/makmak/Plone/buildout-cache/eggs/transaction-1.1.1-py2.7.egg/transaction/_transaction.py", line 443, in _commitResources
  rm.commit(self)
File "/Users/makmak/Plone/buildout-cache/eggs/ZODB3-3.10.5-py2.7-macosx-10.4-x86_64.egg/ZODB/Connection.py", line 572, in commit
  oid, serial, transaction)
File "/Users/makmak/Plone/buildout-cache/eggs/ZODB3-3.10.5-py2.7-macosx-10.4-x86_64.egg/ZODB/BaseStorage.py", line 416, in checkCurrentSerialInTransaction
  committed_tid = self.getTid(oid)
File "/Users/makmak/Plone/buildout-cache/eggs/ZODB3-3.10.5-py2.7-macosx-10.4-x86_64.egg/ZODB/FileStorage/FileStorage.py", line 770, in getTid
  with self._lock:
File "/Users/makmak/Plone/buildout-cache/eggs/ZODB3-3.10.5-py2.7-macosx-10.4-x86_64.egg/ZODB/FileStorage/FileStorage.py", line 403, in _lookup_pos
  raise POSKeyError(oid)
POSKeyError: 0x0e793d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:49:24.867

You can use the fsrefs.py to find the bad object.

A very short article on using it is: [http://nathanvangheem.com/news/fixing-broken-zodb-object-references](http://nathanvangheem.com/news/fixing-broken-zodb-object-references)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:00:14.997

我相信这[与我刚刚遇到的问题相同](http://rpatterson.net/blog/poskeyerror-during-commit)，如果回滚保存点（包括将对象添加到目录）会发生这种情况。我认为这是 ZODB 中的一个错误，但您可以通过解决回滚保存点的任何问题来解决它，在这种情况下，就是将文件和图像迁移到 blob。因此，如果您解决了使这些文件或图像无法成功迁移到 BLOB（或只是删除它们）的问题，那么它应该会成功。

# python - 维基百科 | 错误：无法检索请求的 URL

> ID：12507375
> 
> 赞同：0
> 
> 时间：2012-09-20T06:51:43.620
> 
> 标签：python, django, urllib2, wikipedia

我正在尝试从维基百科获取页面。我已经在我的请求中添加了一个“用户代理”标头。但是，当我使用 urllib2.urlopen 打开页面时，我得到以下页面：错误：无法检索请求的 URL

# 错误

## 所请求的网址无法检索

尝试检索 URL 时遇到以下错误：

*   **拒绝访问。**

    访问控制配置会阻止您的请求此时被允许。如果您认为这不正确，请联系您的服务提供商。

这是我用来打开页面的代码：

```
def get_site(request_user_link,request):                                                    # request_user_link is request for url entered by user
                                                                                            # request is request generated by current page - used to get HTTP_USER_AGENT
                                                                                            # tag for WIKIPEDIA and other sites
    request_user_link.add_header('User-Agent',str(request.META['HTTP_USER_AGENT']))
    try:
        response = urllib2.urlopen(request_user_link)
    except urllib2.HTTPError, err:
        logger.error('HTTPError = ' +str(err.code))
        response=None
    except urllib2.URLError, err:
        logger.error('HTTPError = ' +str(err.reason))
        response=None
    except httplib.HTTPException, err:
        logger.error('HTTPException')
        response=None
    except Exception:
        import traceback
        logger.error('generic exception' + traceback.format_exec())
        response=None
    return response 
```

我将来自当前用户对象的 HTTP_USER_AGENT 的值作为我发送到维基百科的请求的“User-Agent”标头传递。如果我需要在此请求中添加任何其他标头，请告诉我。否则，请告知替代解决方案。

**编辑：请注意，在添加“用户代理”标题后，我昨天能够成功获取该页面。今天，我似乎收到了这个错误页面。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:01:13.093

我写了一个从维基百科读取的脚本，这是一个简化版本。

```
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')] #wikipedia needs this    
resource = opener.open(URL)
data = resource.read()
resource.close()
#data is your website. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:11:32.710

如果违反他们的[爬取规则](http://en.wikipedia.org/robots.txt)，维基百科是不会很宽容的。当您第一次使用标准 urllib2 用户代理公开您的 IP 时，您在日志中被标记了。当日志被“处理”时，您的 IP 被禁止。这应该可以通过为另一个 IP 运行脚本来轻松测试。请小心，因为众所周知，维基百科也会阻止 IP 范围。

IP 禁令通常是暂时的，但如果您有多项违规行为，它*可能会*变成永久性的。

维基百科在已知的代理服务器上也有自动禁令。我怀疑他们是他们自己解析匿名代理网站（如[proxy-list.org）](http://proxy-list.org/en/index.php)和商业代理网站（如[hidemyass.com](http://www.hidemyass.com/proxy-list/)）的 IP。

维基百科这样做当然是为了保护内容免受破坏和垃圾邮件。请尊重规则。

如果可能的话，我建议在您自己的服务器上使用维基百科的[本地副本](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)。您可以将此副本违反您的 harts 内容。

# javascript - 如何处理ajax响应中的内部服务器错误

> ID：12507378
> 
> 赞同：3
> 
> 时间：2012-09-20T06:51:52.570
> 
> 标签：javascript, jquery

当我在 JavaScript（使用 JQuery）中发送 Ajax 请求时，它有时会引发我无法捕获的内部服务器错误。错误显示在浏览器中。我什至尝试将 ajax 调用包装在 try-catch 块中。如何处理 Ajax 错误？

**编辑** 这里是我的代码：

```
$.post('/multi/getGameStatus', function(data) {
    if(data && data.game) {
        settings.game = data.game;
        setStartRacePopupUI.call(this, data);
        // remove all racers
        removePlayers.call();
        for(var i=0;i<settings.game.players.length;i++) {
            var player = settings.game.players[i];
            var isme = (player.id == settings.playerId);
            addPlayer.call(this, player, isme, i);
        }

        if (settings.game.gameStatus == "OPEN") {
            setTimeout(refreshPlayers, refreshPlayersInterval, nextStatus);
        } else if(settings.game.gameStatus == "IN_GAME") {
            counterToGameStart = data.sts;
            gameFllow(nextStatus);
        }
    }
}); 
```

即使我使用错误处理程序，我仍然会在页面上收到 JS 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:33:22.783

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> ...为了方便和与 $.ajax() 使用的回调名称保持一致，jqXHR 还提供了 .error()、.success() 和 .complete() 方法。
> 
> jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中被弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.ajax( "example.php" )
    .done(function() { alert("success"); })
    .fail(function() { alert("error"); }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T13:38:29.567

```
$.ajax({
  url:"myurl",
  data: {json:"data"},
  success: function(){//on success},
  error: function(){//called on error}
}); 
```

根据[ajax api docs](http://api.jquery.com/jQuery.ajax/)的错误回调：（如有疑问，请参阅 api docs）

> 错误（jqXHR，textStatus，errorThrown）函数
> 
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

# css - zf2 制作每个模块的个性化导航并添加样式

> ID：12507382
> 
> 赞同：0
> 
> 时间：2012-09-20T06:52:07.980
> 
> 标签：css, navigation, zend-framework2

[zf2 设置导航栏](https://stackoverflow.com/questions/11551736/zf2-way-to-set-up-a-navigation-bar)的方法 有一个示例可以为所有站点进行导航，但是我如何为每个模块个人执行此操作并为其添加 css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:55:43.153

答案在部分导航中！

# java - 如果您已经知道树结构怎么办？有没有复合模式的替代品？

> ID：12507385
> 
> 赞同：1
> 
> 时间：2012-09-20T06:52:24.683
> 
> 标签：java, design-patterns, architecture

我正在处理具有树状结构的 API（不是 OO 之类的东西）。树中的每个节点都有一个特定的处理程序，您需要在创建它的子节点时指定该处理程序。

这个想法是围绕树的对象创建一个包装类，以使其更容易集成到未来的项目中。

问题是如何做到这一点？如果您事先已经知道树结构，那么复合模式将无法很好地工作。有没有其他选择？您将如何围绕大量但固定数量的树对象设计包装类？

它只是将所有子节点作为父类中的字段列出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:48:38.380

从[树](http://2.bp.blogspot.com/-4k3Gz-6_V-I/Tb53lXbtuAI/AAAAAAAAAHg/VzGK8sys78g/s1600/800px-Tree-data-structure.svg.png)的外观来看，它是平衡的，因此您可以使用二分搜索快速找到此特定项目所需的最后一个节点。

我假设它们处于某种链表结构中，因此您构建了一个获取父节点的承包商（显然，所有连接到所需的点，因为它应该递归地从源爬到父节点的树）。

它有点类似于[表达式树](http://penguin.ewu.edu/cscd300/Topic/ExpressionTree/index.html)。

# android - Android 阿拉伯语/波斯语字体

> ID：12507387
> 
> 赞同：1
> 
> 时间：2012-09-20T06:52:29.613
> 
> 标签：android, android-layout, android-fonts

我正在开发一个使用阿拉伯语字体的 Android aap。我已经使用**“tahoma.ttf”**成功地显示了阿拉伯语文本， 但**问题是这些阿拉伯语字体看起来并不酷。** 所以我想改变那个字体样式。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T06:35:15.503

如果要使用外部字体，请执行以下操作：

1.  第一步是选择您要使用的字体。
2.  `fonts`在您的资产目录中创建一个文件夹并将您的字体复制到那里。
3.  要访问您的自定义字体，请使用`Typeface`Android SDK 中的类来创建 Android 可以使用的字体，然后设置任何需要适当使用您的自定义字体的显示元素。

不幸的是，您不能再为此使用布局 XML，因为 XML 不知道您可能作为应用程序资产隐藏的任何字体。您可以在代码中这样做：

```
Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/BPreplay.otf");
TextView tv = (TextView) findViewById(R.id.CustomFontText);
tv.setTypeface(tf); 
```

**注意**：Android 似乎并不喜欢所有的 TrueType 字体。因此，如果您尝试使用其他字体并且它似乎不起作用，则可能是该字体与 Android 不兼容，无论出于何种原因。

您可以在这些页面中查看更多详细信息：
[Fun with Fonts](http://www.androidguys.com/2008/08/18/fun-with-fonts/)
[Musings of the Bare Bones Coder/使用自定义字体](http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/)

# regex - 正则表达式 - 从给定字符串中提取子字符串

> ID：12507388
> 
> 赞同：10
> 
> 时间：2012-09-20T06:52:29.647
> 
> 标签：regex, xpath, substring

我这里有一个字符串，`This is a string: AAA123456789`.

所以这里的想法是`AAA123456789`使用正则表达式提取字符串。

我将它与 X-Path 结合起来。

注意：如果有这个帖子，请引导我。

我认为，按道理，我应该`substring(myNode, [^AAA\d+{9}])`，

我不太确定正则表达式部分。

这个想法是在遇到“AAA”并且只有数字但只有9个后续数字时提取字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T12:49:59.407

**纯 XPath 解决方案**：

```
substring-after('This is a string: AAA123456789', ': ') 
```

**产生**：

```
AAA123456789 
```

**XPath 2.0 解决方案**：

```
tokenize('This is a string: AAA123456789 but not an double',
              ' '
              )[starts-with(., 'AAA')] 
```

或者：

```
tokenize('This is a string: AAA123456789 but not an double',
              ' '
              )[matches(., 'AAA\d+')] 
```

或者：

```
replace('This is a string: AAA123456789 but not an double',
              '^.*(A+\d+).*$',
              '$1'
              ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T09:08:27.443

好的，在这里参考了很棒的人的答案和评论后，我用我选择的这个解决方案总结了我的发现。开始，

`concat("AAA", substring(substring-after(., "AAA"), 1, 9))`.

所以我首先，以“AAA”作为第一个参数的字符串之后的子字符串，长度为 1 到 9 ......任何更多，被忽略。然后由于我使用 AAA 作为参考，因此不会出现，因此将 AAA 连接到值的前面。所以这意味着我将在 AAA 之后获得第一个 9 位，然后在前面连接 AAA，因为它是静态数据。

无论有什么其他贡献，这将允许数据正确。

但我喜欢@Dimitre 的正则表达式。替换部分。如果没有空间作为参数，则标记化不是这样。用正则表达式替换，这也很棒。谢谢。

也感谢你们在那里...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:44:04.803

首先，我很确定你不是想拥有`[^ ... ]`. 这定义了一个“负字符类”，*即*您当前的正则表达式说，“给我*一个不是*以下之一的*单个字符*： ”。很明显，您可能的意思是，. 现在，根据[这个方便的网站](http://www.regular-expressions.info/xpath.html)，XPath 确实支持捕获组以及反向引用，所以请选择：*`A0123456789{}``"AAA(\d{9})"`*

 *```
"AAA(\d{9})" 
```

并提取`$1`第一个捕获组，或者：

```
"(?<=AAA)\d{9}" 
```

并取整场比赛 ( `$0`)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T08:02:52.010

你可以试试这个：

> A{3}(\d{9})*

# php - 使用 CURL 和 php 在远程站点中保持会话活动

> ID：12507394
> 
> 赞同：0
> 
> 时间：2012-09-20T06:53:07.707
> 
> 标签：php, curl

我的代码正在使用 CURL 登录到远程站点。但它并没有让会话在那里保持活跃。就我而言，我正在使用以下代码登录该站点。

```
 $username=$options['session[login]']; 
        $password=$decryptedPassword; 
        $cookie = tempnam("/tmp", "cookies");  

        $postdata = "session[login]=".$username."&session[password]=".$password; 

        $ch = curl_init(); 
        curl_setopt ($ch, CURLOPT_URL, $url); 
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
        curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
        curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
        curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
        curl_setopt ($ch, CURLOPT_REFERER, $url); 

        curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
        curl_setopt ($ch, CURLOPT_POST, 1); 
        $result = curl_exec ($ch); 
        $result = str_replace("href=\"","href=\"$onappurl\\",$result);
        $result = str_replace("href=\"$onappurl\\","href=\"$onappurl",$result);
        echo $result;
        curl_close($ch); 
```

现在结果在弹出窗口中回显，并显示登录界面。但是，如果我单击该站点的任何链接，我会丢失会话并将其重定向到登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:57:53.777

我认为这是因为您的服务器正在发送请求，而远程站点正在为您的服务器创建会话，而不是为您创建会话。因此，如果您单击重定向到该远程站点的链接，并且您在那里没有活动会话，则会提示您登录。

# calendar - 跟踪在 MSCRM 中花费的时间

> ID：12507395
> 
> 赞同：0
> 
> 时间：2012-09-20T06:53:12.887
> 
> 标签：calendar, dynamics-crm, auditing

我的要求是我需要能够跟踪每个销售人员的活动时间。还有一个报告，管理员可以运行该报告来查看每个用户在电话/销售/机会等上花费的时间。

我应该使用什么来跟踪用户使用特定活动的时间？

我想我可以使用审计来做到这一点。

你有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:39:53.210

用户审计在这里不会有太大帮助，对于初学者来说，它只每隔几个小时报告一次，其次你不能为审计表编写报告。

我建议向您要跟踪时间的实体添加一个持续时间字段 - 活动已经有一个字段。然后用户只需要手动填充它。

或者，如果您想自动化，您可以使用表单 JavaScript，例如：

1.  新字段：数字、持续时间
2.  表单加载时：捕获开始时间
3.  在表单保存时：捕获结束时间
4.  在表单保存时：找出两者之间的差异，然后添加到持续时间字段

但是，您必须为要跟踪的每个实体执行此操作。它也不能保证准确，例如，如果用户一次打开几条记录，或者去吃午饭，或者只是不立即保存记录，则可以记录比实际发生的时间长得多的持续时间。

# git - git merge 使用 vs2012 diff 工具

> ID：12507396
> 
> 赞同：5
> 
> 时间：2012-09-20T06:53:17.917
> 
> 标签：git, visual-studio-2012, merge, diff, tortoisegit

是否可以将 Visual Studio 2012 中的 diff 工具与 git 一起使用？使用“devenv /diff fileA fileB”我可以调出两个文件之间的差异，但是我怎样才能添加第三个（基本文件），并排有 3 个视图。

我目前使用 TortoiseGit 和 BeyondCompare。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T20:21:50.160

Git 可以配置为使用任何通用的差异工具，而不仅仅是它知道的开箱即用的工具。要调用通用差异工具，请通过键入将`diff.tool`配置变量设置为自定义差异工具别名，例如“vs2012”，并通过键入为该差异工具别名`git config --global diff.tool vs2012`创建相应的变量。请注意，我在“diff”选项中使用破折号而不是斜杠来解决 MSYS 路径修改问题，幸运的是 devenv 也接受破折号作为命令行选项。现在您应该可以通过键入来调用 VS2012 差异工具了。`cmd``git config --global difftool.vs2012.cmd <path_to_devenv> -diff "$LOCAL" "$REMOTE"``git difftool`

对于合并，我想我不得不让你失望，`devenv /diff`只接受两个文件。

# html - webkit和firefox浏览器中密码文本框的字体大小不同

> ID：12507403
> 
> 赞同：1
> 
> 时间：2012-09-20T06:54:06.430
> 
> 标签：html, webkit, cross-browser, passwords, font-size

我正在使用密码输入文本框从用户那里获取密码，并且输入密码时出现的点的字体大小在 webkit 浏览器和 firefox（和 IE）中是不同的。

我使用 1.2em 的相对字体大小（它应该是 12px，请参阅我附加的代码）作为输入标签，这个 12px 在 IE 和 firefox 中运行良好，但在 webkit 浏览器 safari 和 chrome 中运行良好。

提前感谢您的帮助。

HTML 代码

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>TEST</title>
    <meta name="Description" content="" />
    <meta name="Keywords" content="" />
    <meta name="robots" content="" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <!--START: Adding of javaScript library -->
    <script type="text/javascript" src="script/jquery.min.js"></script>

    <!--END:   Adding of javaScript library-->
    <!--START: Adding of javaScript library need internet Connection-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!--END: Adding of javaScript library need internet Connection-->
    <style>
    body{font-size:62.5%}
    div{font-size:100%}
    input.inputClass{font-size:1.2em;}

    </style>
</head>
<body>
    <div id="Container"><INPUT id=password class=inputClass title=Password  value="" size=39 type=password name=password /></div>
</body>
</html> 
```

# objective-c - Objective-C：当应用程序被杀死时保存图像

> ID：12507406
> 
> 赞同：0
> 
> 时间：2012-09-20T06:54:29.697
> 
> 标签：objective-c, ios, uiimageview, uiimage, uiimagepickercontroller

我正在开发我的学校项目，我选择构建一个使用相机的应用程序。我已经设法使用它并将其附加到`UIImageView`中，但是当应用程序被杀死时，我很难使该图像永久化。

我的意思是，当我杀死应用程序并再次打开它时，我希望图像保留在我附加它的视图上，因为在我当前的项目中，当我杀死应用程序时，当我再次打开应用程序时图像也消失了。

这是我的代码：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    insertPhoto1.contentMode=UIViewContentModeCenter;
    [insertPhoto1 setImage:image];
    [self dismissModalViewControllerAnimated:YES];
} 
```

这对于 Tap：

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
            {
                [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
            }
            else
            {
                [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
            }
            [imagePicker setDelegate:self];
            [self presentModalViewController:imagePicker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:01:33.290

您可以像这样从磁盘保存和检索图像：

保存图像：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    NSData* imageData = UIImageJPEGRepresentation(image, 1.0);
    NSString* imagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"/photo1.png"];
    [imageData writeToFile:imagePath atomically:YES];

    insertPhoto1.contentMode = UIViewContentModeCenter;
    [insertPhoto1 setImage:image];
    [self dismissModalViewControllerAnimated:YES];
} 
```

在 UIViewController viewWillAppear 中检索图像：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    NSString* imagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"/photo1.png"];
    UIImage* imageFromFileSystem = [UIImage imageWithContentsOfFile:imagePath];

    UIImageView imageView = [[UIImageView alloc] initWithImage:imageFromFileSystem];
    [self.view addSubView:imageView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:07:31.247

一种选择是在应用程序被终止时将照片保存在 NSUserDefaults 中。保存图像：

```
UIImage* image = [UIImage imageNamed:@"example_image.png"];
NSData* imageData = UIImageJPEGRepresentation(image, 1.0);
NSString* imagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"/saved_example_image.png"];
[imageData writeToFile:imagePath atomically:YES]; 
```

然后您可以在您的应用再次启动时调用该图像。检索图像：

```
NSString* imagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"/saved_example_image.png"];
UIImage* imageFromFileSystem = [UIImage imageWithContentsOfFile:imagePath]; 
```

# objective-c - iCloud 使用 sqlite 数据库与应用程序同步 - IOS

> ID：12507411
> 
> 赞同：6
> 
> 时间：2012-09-20T06:54:46.217
> 
> 标签：objective-c, ios, sqlite, icloud

我正在构建通用应用程序。在我的应用程序中，我使用的是 sq-lite 数据库。我想将我的本地数据与 iCloud 同步，这样在 iPhone 中安装应用程序的任何其他用户都可以将数据同步到他的手机/Ipad。

我在许多发现 iCloud 与代码数据同步的地方进行了与此相关的搜索，但我使用的是 sq-lite。

是他们执行此操作的任何方式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:47:43.297

你最好的选择是实现 Core Data 以便能够与 iCloud 同步。根据我的研究，如果不使用 Core Data，就没有便捷的方式将 SQLite 数据库与 iCloud 同步。使用它获得的优势不仅仅是访问数据。实施 Core Data 可以帮助您更有效地处理数据，因为它为对象关系映射提供了一个成熟的框架。它确实有一些限制，例如模式更改如何使现有存储无法访问。但是，它在支持对象持久性等领域也很出色。总的来说，它只能帮助您使用它，尤其是在与 iCloud 同步方面。

有多种方法可以开始将数据库转换为 Core Data。一种方法是在拥有模型后手动修改 Core Data 生成的 SQLite 数据库。您可以通过 Xcode 中的 Organizer 查看 /AppData/Documents 中生成的数据库来确定要更改的内容。从那里可以很简单地将 SQLite 数据复制到新数据库。虽然 Apple 不推荐这种方法，因为它们可能会更改 Core Data 模式，但它可以提供一种轻松迁移现有数据集的方法。另一种方法是编写代码在应用程序内的数据存储之间进行转换。如果您愿意，您甚至可以同时维护 SQLite 和 Core Data 这两个实现。

# php - 运行 SQL 后，AJAX/jQuery 在警报框上返回对象对象

> ID：12507412
> 
> 赞同：2
> 
> 时间：2012-09-20T06:54:49.043
> 
> 标签：php, mysql, html, jquery

有人可以帮忙吗？这是我的 jQuery。场景是这样的，我有一个表格，其中每个按钮都有一个按钮`<td>`。如果单击该按钮，将出现一个模态窗口，上面有一个确认按钮，是或否。如果用户单击是 ( `#confirm_cancel`)，这将保存在数据库中，然后显示一个警告框，告诉用户更新成功。问题是这样的，它正确执行了我的 SQL 并保存到数据库中，但我在错误函数上收到一个警告框，上面写着`[object object]`.

这是我的PHP：

```
<?php
include("php/openDB.php"); 

echo '<table border="2" id="tableGuestList">';
echo '<tr>';
    echo '<td>Guest ID</td>';
    echo '<td>Room No:</td>';
    echo '<td>First Name</td>';
    echo '<td>Last Name</td>';
    echo '<td>Checkin</td> ';
    echo '<td>checkout</td>';
    echo '<td>Status</td>';
    echo '</tr>';

    $result = mysql_query("SELECT gi.guest_id, gi.fname, gi.lname, bk.checkin, bk.checkout, bk.transacstatus, bk.reserved_id "
    ."FROM tbl_guestinfo gi, tbl_bookings bk "
    ."where gi.guest_id = bk.guest_id "
    ."AND bk.transacstatus = 'booked'");

    while ($rows = mysql_fetch_array($result, MYSQL_NUM)) {
        $guest_id = $rows[0];

        $fname = $rows[1];
        $lname = $rows[2];
        $checkin = $rows[3];
        $checkout = $rows[4];
        $transacstatus = $rows[5];
        $reservedid = $rows[6];

        echo '<tr id="'.$rows[0].'" class="bookedClass">';
        echo '<td>'.$guest_id.'</td>';
        echo '<td> room number kaara</td>';
        echo '<td> '.$fname.'</td>';
        echo '<td>'.$lname.'</td>';
        echo '<td> '.$checkin.'</td>';
        echo '<td>'.$checkout.'</td>';
        echo '<td> '.$transacstatus.'</td>';

        echo '<td style="display:none"> '.$reservedid.'</td>';

        echo '<td> <input type = "submit" value = "Cancel Booking" name ="cancel_booking" /></td>';

        echo '<td> <input type = "submit" value = "Check in" name ="check_in" /></td>';

        //echo '<td> <input type = "submit" value = "Check Out" name ="Check_Out" /></td>';
        echo '</tr>';
    }

    mysql_free_result($result);

    echo '</table>';

    include("php/closeDB.php");
?> 
```

这是我的jQuery

```
 $(document).ready(function(){
    var selGuest;
    $('#tableGuestList .bookedClass').click(function(){
        selGuest = $(this).find("td").eq(7).text();
        selGuest = parseInt(selGuest)
        $('#confirmDialog').fadeIn('slow');
    });

    $('#confirm_cancel').click(function() {
        var canceldata_json = {
            'selGuest': selGuest,
        };
        $.ajax({
            type: "POST",
            data: canceldata_json,
            url: "./php/cancelBooking.php",
            success: function(msg) {
                alert("guest information updated")
                $('#confirmDialog').fadeOut('slow');
            },
            error: function(msg){
                alert(msg)
            }
        });
    });

    $('#cancel_cancel').click(function() {
        $('#confirmDialog').fadeOut('slow');
    });
}); 
```

这是我的 PHP 代码被 AJAX 调用

```
<?php

// get data
$selGuest = $_POST["selGuest"];

include("openDB.php");

$insertintoCanceled = "insert into tbl_canceled "
        ."reserved_id, `guest_id`,`checkin`, `checkout`, `type_id`, `numAdults`, `numChildren`, `transacstatus`, `amountDue`"
        ."("
        ."SELECT * FROM `tbl_bookings` where `reserved_id` =" .$selGuest
        .")";
if(!mysql_query($insertintoCanceled, $con))//if it fails
{
    die('Error: ' . mysql_error() . "\n");//show the mysql error
}
include("closeDB.php");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:08:52.283

这可能是由`alert(msg)`. `msg`可能是一个对象，而您想要的实际数据是它的属性值之一。尝试在错误函数中的 Chrome 开发工具或 Firebug 中设置断点并检查`msg`包含的值。它可能就像使用一样简单 `alert(msg.d)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:10:57.260

您的“error:function(msg)”回调函数没有使用正确的参数。

我会建议：

```
error: function(jqXHR, textStatus, errorThrown)
{
    console.log(jqXHR, textStatus, errorThrown); //Check with Chrome or FF to see all these objects and decide what you want to display
    alert('Error! '+textStatus);
} 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

此外，检查您的 PHP 错误日志，看看它是否符合您的预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:16:36.913

假设您只想要“上传成功”消息。

我认为最好将 dataType 用作 JSON（服务器以 JSON 格式响应）。在你的 AJAX 中试试这个：

```
$.ajax({
    type: "POST",
    data: canceldata_json,
    dataType:'json',
    url: "./php/cancelBooking.php",
    success: function(msg) {
        alert(msg)
        $('#confirmDialog').fadeOut('slow');
    },
    error:function(msg){
        alert(msg)
    }
}); 
```

和你的 php 函数

```
<?php

// get data
$selGuest = $_POST["selGuest"];

include("openDB.php");

$insertintoCanceled = "insert into tbl_canceled "
    ."reserved_id, `guest_id`,`checkin`, `checkout`, `type_id`, `numAdults`,        `numChildren`, `transacstatus`, `amountDue`"
."("
."SELECT * FROM `tbl_bookings` where `reserved_id` =" .$selGuest
.")";
if(!mysql_query($insertintoCanceled, $con))//if it fails
{
echo json_encode(array('msg'=>'Error')) //error msg goes here
die('Error: ' . mysql_error() . "\n");//show the mysql error

}
echo json_encode(array('msg'=>'Successfully updated')) //success msg goes here
include("closeDB.php");
?> 
```

# ruby-on-rails - Ruby on Rails：这是在 Ruby on Rails 中构建代码的正确方法吗？这太慢了

> ID：12507418
> 
> 赞同：2
> 
> 时间：2012-09-20T06:55:20.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 RoR 不是很熟悉，但我的同事已经为我们的一个应用程序编写了这段代码，我觉得这对于一个简单的任务来说太不优化了，而且查询太多。

我们有 3 张桌子。艺术家、专辑和歌曲。艺术家可以有多个专辑。专辑可以有多首歌曲。我们正在尝试根据歌曲表中的字段 Popularity_total 输出前 10 首歌曲。然后还有其他表格可以捕获喜欢等。

```
def top
     # a list of 10 most played songs in the past week
     @toplistsongs =  Song.select(INDEX_COLUMNS).order("popularity_total,created_at     DESC").limit(10)
     @toplistsongs.each do |song|
      song['urls'] = song.get_song_urls
      song['artist'] = song.get_song_artist
      song['genre'] = song.tag_list
      song['hearts'] = song.likers(User).count
      song['like_status'] = ( current_user!=nil ? current_user.likes?(song) : false )
      song['impressions'] = song.impressionist_count
      song['albums'] = song.get_song_album
    end

    @w = {'top' => 
             {  
                'song' => @toplistsongs
             }
        }
     respond_with(@w)
end 
```

循环内的每次 fetch 都会导致对 db 的命中。我有一种感觉，每首歌曲的循环中都会发生太多查询，而理想情况下，它们都可以使用对所有歌曲的单个查询来完成。任何人都可以建议这是处理事情的标准 Rails 方式还是这完全是糟糕的代码？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:19:05.690

您可以使用[ActiveRecord 包含](http://guides.rubyonrails.org/active_record_querying.html)方法来减少数据库查询计数。例如：

```
 @toplistsongs =  Song.select(INDEX_COLUMNS).order("popularity_total,created_at     DESC").limit(10).includes(:tags, { :songs => :artists }, :urls, :likers) 
```

这将为整个 top 方法产生 5 个查询，并且不依赖于您要呈现的歌曲数量。换句话说，查询的数量是**恒定**的。

您必须使用 ActiveRecord 关联才能使其工作。我可以看到您正在使用`get_song_artist`我认为它不是由协会制定的方法。

要在[ActiveRecord 关联中](http://guides.rubyonrails.org/association_basics.html)建立关系，您必须使用 has_many、has_one 和 belongs_to 运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:18:43.387

*这只是一个快速回复。如果您对任何特别的事情有任何困惑，请告诉我。*

您的模型定义应该是这样的

```
class Artist<AR::Base
    has_many :albums
end

class Album<AR::Base
    belongs_to :artist
    has_many :songs
end

class Song<AR::Base
    belongs_to :album
end 
```

你的查找线应该是这样的

```
@toplistsongs = Song.order("popularity_total, created_at").limit(10).includes(:tags, { :songs => :artists }, :urls, :likers) 
```

应该根据您的`popularity_total`领域返回前 10 首歌曲。

*感谢 Erez Rabih 的包含部分*

现在

*   a`song.album`应该返回`Album`.`Song`
*   a`song.album.artist`应该返回`Artist`.`Song`

您可以通过预先加载来加载这些关系。按照[链接](http://railscasts.com/episodes/22-eager-loading)。

`tags`假设您与和有关系`urls`。

# jquery - jQuery改变背景

> ID：12507423
> 
> 赞同：-1
> 
> 时间：2012-09-20T06:55:55.140
> 
> 标签：jquery, background

```
 $(function() {

   //Indicate here the version of your forum.
   var version = "phpbb2";

   if(version.toLowerCase() == "phpbb2"){   
      $(".postdetails img[title='Premium']").closest('.postdetails').parent('td').next('td').addClass("fa_postbody_xy");
      $(".postdetails img[title='Junior']").closest('.postdetails').parent('td').next('td').addClass("fa_postbody_xx");
   }else if(version.toLowerCase() == "phpbb3"){   
      $(".postprofile img[title='Male']").closest('.postprofile').prev('.postbody').addClass("fa_postbody_xy");
      $(".postprofile img[title='Female']").closest('.postprofile').prev('.postbody').addClass("fa_postbody_xx");   
   }else if(version.toLowerCase() == "punbb"){   
      $(".user-info img[title='Male']").closest('.postmain').addClass("fa_postbody_xy");
      $(".user-info img[title='Female']").closest('.postmain').addClass("fa_postbody_xx");   
   }else if(version.toLowerCase() == "invision"){         
      $(".postprofile img[title='Male']").closest('.post-container').addClass("fa_postbody_xy");
      $(".postprofile img[title='Female']").closest('.post-container').addClass("fa_postbody_xx");
   }
}); 
```

那是我正在使用的代码。现在我想做的是让它而不是 .postdetails img[ id 喜欢去这个 ul 类 .profile_field_list li[text="premium"]

这可能吗？

```
<ul class="profile_field_list">
<li>Premium Member</li>
</ul> 
```

这就是我想找到的 html，然后按照代码中的说明进行操作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:29:22.777

尝试这个：

```
var title = $("ul#profile_field_list li:first").attr("id"); 
```

将您的标记修改为

```
<ul class="profile_field_list">
<li id="Premium Member">Premium Member</li>
</ul> 
```

# apache-flex - 通过命令行将 CSS 文件编译为 SWF 时出错

> ID：12507427
> 
> 赞同：0
> 
> 时间：2012-09-20T06:56:21.333
> 
> 标签：apache-flex, flex4.5

我通过命令行编译我的 CSS 文件然后我得到了类似的错误

```
C:\Users\Raykor\Desktop\css>mxmlc myCss.css
'mxmlc' is not recognized as an internal or external command,
operable program or batch file. 
```

谁能帮我通过命令行编译CSS文件。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:47:24.017

在环境变量中添加“mxmlc.exe”路径。

# java - Java 中是否有 DateTimeFormatInfo.MonthDayPattern 属性的类似物？

> ID：12507431
> 
> 赞同：3
> 
> 时间：2012-09-20T06:56:43.017
> 
> 标签：java, date-format, simpledateformat

我正在寻找类似于Java中的[MonthDayPattern的东西。](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthdaypattern%28v=vs.90%29)

我尝试过 DateFormatSimbols、SimpleDateFormat、DateFormat 等。

.Net 为每个语言环境返回一个特定的 MonthDayPattern。

如果我是对的，.Net 为文化“en-NZ”返回“dd MMMM”，为“en-US”返回“MMMM dd”，我不明白该模式构建的规则。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:16:57.563

我不知道这是否有用，但您可能会发现 Joda Time 本身很有用，以下方法可能会帮助您：

[Joda Time 的“风格模式”方法](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html#patternForStyle%28java.lang.String,%20java.util.Locale%29 "风格模式 - Joda Time")

Joda Time 比默认的 Java 日期和时间库要好得多。Calendar 和 Date 尤其令人讨厌，JodaTime 中的 DateTime 和类似的东西使用起来要简单得多。

# c# - DateTime.ParseExact 给出错误：字符串未被识别为有效的日期时间

> ID：12507438
> 
> 赞同：1
> 
> 时间：2012-09-20T06:57:39.910
> 
> 标签：c#, datetime, tryparse

我想解析 DateTime，这里是我的代码：

```
var datastring =p1.ItemArray[2].ToString();
var format = "dd.MM.yyyy";
var date = DateTime.ParseExact(datastring,format,CultureInfo.InvariantCulture); 
```

p1 -​​ 是`DataRow`，在`p1.ItemArray[2]`我有 DateTime 的值

在手表`p1.ItemArray[2]`有这个值：`"09/03/2012 00:00:00"`他的类型是`DateTime`

解析后抛出错误：**字符串未被识别为有效的日期时间。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:59:12.860

您可以在格式中包含时间，因为您尝试解析的字符串似乎包含时间：

```
var format = "dd/MM/yyyy hh:mm:ss"; 
```

此外，我建议您使用[TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)方法，因为它提供了更好的防御性编程模式，而不是抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T06:59:26.560

恕我直言，您应该使用

```
var datastring = p1.ItemArray[2].ToString();
var format = "dd/MM/yyyy HH:mm:ss";
var date = DateTime.ParseExact(datastring, format, CultureInfo.InvariantCulture); 
```

您`ParseExact`必须提供字符串中包含的确切日期格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:00:56.553

改变这个：

```
var format = "dd.MM.yyyy"; 
```

有了这个：

```
var format = "dd/MM/yyyy HH:mm:ss"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:02:51.550

因为 parseExact 将期望收到您指定的相同格式，即“dd.MM.yyyy”。你可以试试：

```
var format = "dd.MM.yyyy";
var datastring =p1.ItemArray[2].ToString(format); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:55:43.527

很可能是由于您的服务器语言环境和 UI 语言环境之间的差异

一种更简单的方法是在 web.config 中指定全球化细节

像

```
<configuration>
   <system.web>
      <globalization culture="en-GB"/>
   </system.web>
</configuration> 
```

或者更详细

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB" /> 
```

但请确保这不会与您的应用程序发生冲突

# jakarta-ee - glassfish - 与 mysql 的连接崩溃

> ID：12507442
> 
> 赞同：4
> 
> 时间：2012-09-20T06:57:51.193
> 
> 标签：jakarta-ee, eclipselink, glassfish-3

我有一个 JSF 2.0 应用程序部署在带有 JDK 7 的 glassfish 3.1.7 上。它与 MySQL 数据库一起使用。对于数据库操作，我使用 NetBeans 生成的实体和 JPA 控制器类。我将它用于使用 PostgreSQL 的其他应用程序 - 没问题。

我的应用程序在上午 8 点到下午 4 点之间经常被使用。一切都很完美。但是，第二天当有人试图使用我的应用程序（可以说从 db 读取数据）时，我的应用程序崩溃了。

我尝试在不同的机器上安装 MySQL 并将连接池重新配置到新数据库，但一切都是一样的。我还尝试将 TcpKeepAlive=true 属性添加到连接池，但没有成功。

请帮我。我完全不知道该怎么办。试图做一些谷歌工作，但也没有成功。

以下是日志：

```
|2012-09-20T08:09:41.213+0200|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.application|_ThreadID=115;_ThreadName=Thread-2;|Error Rendering View[/system/index.xhtml]
javax.el.ELException: /system/index.xhtml @96,131 value="#{indexBean.documentNr}": javax.persistence.PersistenceException: Exception [EclipseLink-4019] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Error while obtaining information about the database. Refer to the nested exception for more details.
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:67)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:79)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:50)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:185)
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:108)
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

原因：javax.persistence.PersistenceException：异常 [EclipseLink-4019] (Eclipse Persistence Services - 2.3.2.v20111125-r10461)：org.eclipse.persistence.exceptions.DatabaseException 异常描述：获取有关数据库的信息时出错。有关更多详细信息，请参阅嵌套异常。

```
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
at org.eclipse.persistence.internal.jpa.CacheImpl.evictAll(CacheImpl.java:177)
at jpa.DokumentJpaController.getEntityManager(DokumentJpaController.java:35)
at jpa.DokumentJpaController.findAndSortAllDocuments(DokumentJpaController.java:264)
at web.IndexBean.generateDocumentNr(IndexBean.java:650)
at web.IndexBean.getDocumentNr(IndexBean.java:240)
at web.IndexBean$Proxy$_$$_WeldClientProxy.getDocumentNr(IndexBean$Proxy$_$$_WeldClientProxy.java)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
... 59 more 
```

原因：异常 [EclipseLink-4019] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException 异常描述：获取有关数据库的信息时出错。有关更多详细信息，请参阅嵌套异常。

```
at org.eclipse.persistence.exceptions.DatabaseException.errorRetrieveDbMetadataThroughJDBCConnection(DatabaseException.java:361)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:602)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
... 78 more 
```

原因：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：连接关闭后不允许操作。在 sun.reflect.GeneratedConstructorAccessor454.newInstance（未知来源）

```
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1013)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
at com.mysql.jdbc.ConnectionImpl.throwConnectionClosedException(ConnectionImpl.java:1205)
at com.mysql.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:1197)
at com.mysql.jdbc.ConnectionImpl.getMetaData(ConnectionImpl.java:3061)
at com.mysql.jdbc.ConnectionImpl.getMetaData(ConnectionImpl.java:3056)
at com.sun.gjc.spi.base.ConnectionHolder.getMetaData(ConnectionHolder.java:345)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.getMetaData(ConnectionWrapper40.java:114)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:589)
... 80 more 
```

引起：com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障

从服务器成功接收到的最后一个数据包是 30 886 849 毫秒前。最后一个成功发送到服务器的数据包是 0 毫秒前。

```
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3102)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2991)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3532)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)
at com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40.executeQuery(PreparedStatementWrapper40.java:642)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:931)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:607)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)
at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2611)
at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2570)
at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
at jpa.DokumentJpaController.findAndSortAllDocuments(DokumentJpaController.java:267)
... 74 more 
```

原因：java.net.SocketException：软件导致连接中止：recv 失败

```
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2549)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)
... 106 more 
```

提前致谢。 **编辑：**我忘了提：首先，MySQL 站在其他一些机器上。现在它正在安装 glassfish 的本地 mashine 上工作。每天早上同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:20:36.450

看起来连接超时或关闭，但无法判断是因为数据库配置设置、网络防火墙还是服务器连接池设置。

[http://docs.oracle.com/cd/E26576_01/doc.312/e24936/tuning-glassfish.htm#abehq](http://docs.oracle.com/cd/E26576_01/doc.312/e24936/tuning-glassfish.htm#abehq)提供了有关在 glassfish 服务器中调整连接池设置的信息。具体来说，您可能想尝试更改空闲超时值，以便关闭池中的连接然后重新获取。这将防止 db/network 将它们超时并让它们继续坐在服务器的池中，尽管它们不可用。

如果此问题仅存在于 mysql，您将需要检查 MySQL 文档以获取可能导致连接在一段时间内空闲时关闭的设置。在 stackoverflow 上有一些帖子可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:38:21.080

如果它是一个网络应用程序，请尝试在不同的浏览器上运行它并检查您的输出。我在 Opera 而不是 chrome 上遇到了同样的问题，即它看起来像是与安全问题相关的设置。

对不起我的英语不好

# ios - 我可以在不使用服务器的情况下为 Passbook 生成通行证吗？

> ID：12507445
> 
> 赞同：0
> 
> 时间：2012-09-20T06:57:59.893
> 
> 标签：ios, ios6, passbook

根据 Passbook Programming Guide，我需要一台服务器来为 Passbook 创建 Pass。有没有办法在不涉及服务器的情况下在 iOS 设备中本地为 Passbook 生成 .pkpass？如果有办法做到这一点，苹果是否允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:17:14.407

最简洁的答案是不。不允许，您将失去 Passbook 系统的大部分功能。

还有许多安全问题，例如需要将证书嵌入应用程序并将其分发给所有人（因此任何人都可以在未经您许可的情况下生成通行证）。

任何通行证都需要由权威机构在计算机上颁发，而不是在设备本身上颁发。

您实际上可以在未连接到 Internet 的计算机上生成通行证，但该通行证将被孤立并且无法更新。

# java - 在集群环境中跨 JSP 应用程序共享 HashMap

> ID：12507446
> 
> 赞同：3
> 
> 时间：2012-09-20T06:58:02.080
> 
> 标签：java, oracle, jsp, servlets, weblogic-10.x

我们的应用程序是基于 JSP/JSF 的应用程序，可在 Weblogic 10（在生产环境中集群）上运行。我们有一个场景，其中（登录的）用户获取了一个基于时间戳的对象锁。获取锁后，每 60 秒运行一次代码以更新/使锁无效。目前，锁的详细信息保存在数据库中。这意味着，每 60 秒更新一次锁，就会触发一次更新查询。

我们正试图在应用层移动这个逻辑，这样我们可以避免访问数据库。为此，之前写入数据库的数据现在保存在 HashMap 中。但是，HashMap 存储在 ServletContext 对象中。为了为新用户获取锁，从 ServletContext 对象获取 HashMap，然后对其进行任何操作。

但是，刚刚发现 ServletContext 对象不会跨集群复制。因此，如果我有一个 HashMap 更改为 node-1，当用户 1 获取对象 1 的锁定并且用户 2 登录时，尝试获取对象 1 的锁定但请求命中节点 2，我想，逻辑会失败，对吧？因为 node-2 不会有更新的 HashMap。

有什么想法/建议吗？请帮忙。

谢谢你，A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:21:20.043

是的，我们为我们的一个项目做了类似的事情，在 weblogic 服务器上的所有集群节点之间共享 ServletContext

检查下面的 weblogic 参数

**coherence-servletcontext-clustered**

true 或 false 表示 ServletContext 的属性是否将被聚集。如果为 true，则所有可序列化的 ServletContext 属性值将在所有集群节点之间共享。

如果未指定，则默认为 false，主要是因为 Servlet 规范表明 ServletContext 属性是 JVM 的本地属性，不应该是集群的。

有关更多详细信息，请参阅[http://docs.oracle.com/cd/E13924_01/coh.340/e14408/appparams.htm](http://docs.oracle.com/cd/E13924_01/coh.340/e14408/appparams.htm)

# objective-c - 仅使用一个 .h 文件为 iOS 5 创建静态库

> ID：12507447
> 
> 赞同：0
> 
> 时间：2012-09-20T06:58:05.320
> 
> 标签：objective-c, ios5, static-libraries

我创建了包含许多 .h 文件的静态库。我想创建一个只包含一个 .h 文件的库，其中包含所有其他 .h 文件。但是当我尝试创建这样的库时，它给了我“.h files not found”错误。

有人知道如何创建这样的库吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:46:43.330

创建一个 .m（或 .mm）文件，包含您的 .h 文件，然后编译 .m 文件而不是 .h 文件。

顺便说一句，为什么要从 .h 文件构建库？.h 文件不应包含任何实现。例外是 C++ 模板和内联函数，那么如果不实例化模板就不会构建任何东西

# c# - 使用 WiX 进行 InstallInitialize 后的 C# 自定义操作

> ID：12507450
> 
> 赞同：1
> 
> 时间：2012-09-20T06:58:22.080
> 
> 标签：c#, wix, custom-action

我创建了一个简单的 C# 自定义操作。

```
[CustomAction]
public static ActionResult MySimpleAction(Session session)
{
    MessageBox.Show("It works!");
    return ActionResult.Success;
}

<Binary Id="myAction" 
        SourceFile="MyApp.CA.dll"/>

<CustomAction Id="myActionId" 
              BinaryKey="myAction" 
              DllEntry="MySimpleAction" 
              Execute="deferred" 
              Return="check" />

<InstallExecuteSequence>
      <Custom Action="myActionId" 
              After="InstallInitialize">CHECKBOXCOPYPROP=1</Custom>
</InstallExecuteSequence> 
```

运行安装时出现错误 2762。

当我跑

```
<InstallExecuteSequence>
    <Custom Action="myActionId" 
            Before="InstallFinalize">CHECKBOXCOPYPROP=1</Custom>
</InstallExecuteSequence> 
```

我没有得到错误。为什么我在 InstallInitialize 之后无法运行？它是如何运行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:07:20.343

在[InstallIntialize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369535%28v=vs.85%29.aspx)之后和[InstallFinalize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369505%28v=vs.85%29.aspx)之前都应该工作。查看您使用[Orca](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557%28v=vs.85%29.aspx)构建的 MSI并查看[InstallExecuteSequence](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369500%28v=vs.85%29.aspx)。按列*Sequence*对其进行排序。它看起来被正确安排了吗？日志文件也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:54:30.537

你必须写：

```
<CustomAction Id="myActionId" BinaryKey="myAction" DllEntry="MySimpleAction" Execute="immediate" Return="check" /> 
```

用`Execute="deferred"`它是行不通的。

除此之外，在 CusomAction.config 中必须这样写：

```
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0" />
        <supportedRuntime version="v2.0.50727"/>
    </startup>
</configuration> 
```

# excel-2007 - 在 Excel 或其他应用程序中嵌套/分层折叠和展开

> ID：12507451
> 
> 赞同：4
> 
> 时间：2012-09-20T06:58:35.757
> 
> 标签：excel-2007

我想在 Excel 中分层折叠/展开，或者如果不在 Excel 中，则在任何其他应用程序中。例如我有：

```
 ABC
   -abcd
   -abc1
   -abc2
      -a1
      -a2
        -MM2
        -NN2
      -a3
    -abc3 
```

当我想看到的是：

```
+ABC _further if I expand ABC- I should get_
ABC
 -abcd
 -abc1
 +abc2 _likewise_. 
```

我在 MS-EXCEL 中尝试了 data Group 和 Ungroup，但没有成功，在网上也没有找到满意的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T01:20:50.587

我又试了一次，虽然我仍然不确定这是你想要的。**未选中总计下方的数据、大纲、摘要行**，选择包含-MM2和 -NN2 的行和组，选择包含 -a1、-a2​​、-a3 和组的行，选择包含 -abcd、-abc1、-abc2 的行和 -abc3 和组。

![SO12612763 示例](../Images/bd977845b39c9b8c6eae329af6da3c28.png)

结果应如右上方和左起第一、第二和第三级。

# java - 何时使用速度？

> ID：12507452
> 
> 赞同：2
> 
> 时间：2012-09-20T06:58:38.683
> 
> 标签：java, jsp, web-applications, velocity

我最近阅读了关于`Velocity`. [我也在这里](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#what_is_velocity)阅读了教程。
但我不明白使用 . 有什么好处`Velocity`。据我所知，我们可以使用 JSP 标签做同样的事情。
那么什么时候有人会`Velocity`在他的项目中引入并获得什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:10:56.263

您可以在需要模板时使用它。例如，您的应用程序可能会向客户发送文本电子邮件，并且必须像这样自定义电子邮件：

> 亲爱的 $customerName
> 
> 我们向您宣布明天 $tomorrowDate 以下帐户：
> 
> ```
>  #foreach ($accounts in $account) 
> ```

使用 Velocity，您可以创建一些电子邮件模板，然后为每个客户定制其内容。您不必将它用作 JSP 的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:44:15.923

Velocity 是一个**模板引擎**，JSP 是（一种）**脚本引擎**。差异非常大，尽管乍一看它们似乎做同样的事情，并且您可以滥用 Velocity 将其真正变成脚本引擎。恕我直言，两个主要区别是：

*   Velocity 更安全：默认情况下，它只允许您仅调用您专门放在上下文中的对象的公共方法；JSP 让您几乎可以执行任何 Java 代码
*   Velocity 更容易理解：语法简单，语法元素很少；JSP 在其 scriptlet 标记中具有完整的 Java 语法，以及 <% wrappers %>

所以，在所有情况下，没有一个明显优于另一个，你必须自己决定什么时候应该使用它们，是的，它们可以在同一个项目中组合用于不同的目的。

恕我直言，Velocity 在以下情况下效果最佳：

*   在上下文中传递一些变量的模板的简单插值，例如电子邮件模板
*   我认为 Velocity 是实现 MVC 架构中非常干净的*View部分的更好选择，因为在 JSP 中，在 JSP 页面中混合一些代码（* *Controller* ）更诱人，最后你混合了视图和JSP 页面中的控制器。
    *   另一个优点是它的语法可以被非开发人员理解，因此界面设计人员和开发人员都可以在同一个文件上工作
*   它作为一个安全的脚本引擎运行良好，您可以使用它来运行用户生成的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:26:22.753

假设您要创建一个动态文件，例如一个 HTML 文件。您可以在代码中编写文件并添加标签，例如

```
<body>
"<div>User:" + users.getUserName() + "</div>"
</body> 
```

或者您可以使用 Velocity 创建模板文件

```
<body>
<div>User: #user.getUserName()</div>
</body> 
```

这样做的好处是您将文件与代码分开，即您可以在以后修改它而无需重新编译代码。

# mysql - MySQL 返回列名和计数

> ID：12507454
> 
> 赞同：-2
> 
> 时间：2012-09-20T06:58:45.263
> 
> 标签：mysql

这是我的表格示例：

```
Column1 | Column2 | Column3
================================
Data1   | 2Data  | 3Data
Data1   | 2data2 | 3data2
Data1   | 2data3 | 3data3
Data1   | 2data4 | 3data4
Data2   | 2data5 | 3data5
Data2   | 2data6 | 3data6
Data2   | 2data7 | 3data7 
```

* * *

我想要的结果是，

```
Column1 | Count
===============
Data1   | 4
Data2   | 3 
```

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:00:28.673

```
SELECT Column1, COUNT(*)
FROM your_table
GROUP BY Column1 
```

# objective-c - 许多功能已被弃用 - iOs 6

> ID：12507455
> 
> 赞同：33
> 
> 时间：2012-09-20T06:58:52.067
> 
> 标签：objective-c, ios, deprecated, ios6

我有一些自 iOs 6 以来已弃用的功能。也许这对刚刚更新到 iOs 6 的其他人有所帮助。

```
 [self presentModalViewController:pNewController animated:YES];
 presentModalViewController:animated is deprecated since iOs 6

 Autosynthesized property 'String' will use synthesized instance variable '_String', not existing instance variable 'String'

Autosynthesized property 'phonenumber' will use synthesized instance variable '_phonenumber', not existing instance variable 'phonenumber'

 Deprecated: Group Table View Background Color is deprecated in iOS 6.0. 
```

任何人都可以帮助我如何修复它，这样我的项目中就不会有任何弃用的功能。

提前致谢

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-09-20T14:11:23.443

```
[self presentModalViewController:pNewController animated:YES]; 
```

可以替换为

```
[self presentViewController:pNewController animated:YES completion:nil]; 
```

这一变化的背景可以在 WWDC 2012 视频会话 #236 中看到，这是 iOS 上视图控制器的演变。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T10:07:07.570

单击已弃用的方法。在右栏中，`Quick Help inspector`您可以看到 Apple 文档中的快速帮助。
还建议使用更新或替代方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:53:01.093

试试这个，

以“源代码”模式打开 .storyboard 文件或 .xib 文件。

查找并删除此行：

```
<color key="backgroundColor" cocoaTouchSystemColor="groupTableViewBackgroundColor"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T13:32:31.120

我可以帮你解决最后一个问题：这意味着 ios6 不再支持颜色 GroupTableViewBackgroundColor。您可能在某处的 xib 文件中使用了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T05:09:46.357

像这样使用

```
[self presentViewController:object animated:YES completion:NULL];

[object dismissViewControllerAnimated:YES completion:NULL]; 
```

# c++ - 为什么 2^80 字节的内存分配不会失败？

> ID：12507456
> 
> 赞同：16
> 
> 时间：2012-09-20T06:59:06.123
> 
> 标签：c++, memory-management

以下代码不会引发异常并打印“成功”。为什么 ？

```
#include <iostream>

int main() 
{
    size_t size = size_t(1024)*1024*1024*1024*1024*1024*1024*1024;
    char* data = new char[size];

    if (data == NULL)
        std::cout << "fail" << std::endl;
    else
        std::cout << "success" << std::endl;

    return 0;
} 
```

*   编译器：g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
*   操作系统：Ubuntu 12.04
*   内存：8 GB

如果这是它的工作方式，我如何检查我是否有足够的内存？

[**编辑：**使我的愚蠢代码更正确，现在如果我删除两个，它至少会在 x64 上失败`*1024`]

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T07:16:49.837

我的编译器可以回答这个问题：

```
$ g++ --version
g++ (GCC) 4.7.1 20120721 (prerelease)
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ g++ -Wall -Wextra -pedantic q12507456.c++
q12507456.c++: In function 'int main()':
q12507456.c++:5:42: warning: integer overflow in expression [-Woverflow]
$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T07:01:29.707

这很可能是因为您请求的数字太大而无法存储在整数中，并且您在这里遇到溢出，并且分配的内存实际上远低于您的想象。

这里 2^80 = 1208925819614629174706176 根据[http://en.wikipedia.org/wiki/Yobibyte](http://en.wikipedia.org/wiki/Yobibyte)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T07:02:21.177

```
1024*1024*1024*1024*1024*1024*1024*1024 
```

计算时会导致整数溢出 - 也就是说，它将取模 2^32（或 2^64，取决于您的系统），这是可以分配的零字节。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T07:23:39.173

请注意，在 linux 上`malloc`（最终支持`new`）可能会[过度](http://www.win.tue.nl/~aeb/linux/lk/lk-9.html)使用：

> 从 2.1.27 开始，有一个 sysctl`VM_OVERCOMMIT_MEMORY`和 proc 文件 /proc/sys/vm/overcommit_memory ，其值为 1：做 overcommit，0（默认）：不做。

`malloc`将成功并保留 VA，但不会使用页面备份它。当一个页面被访问时，它可能会也可能不会成功提交它。[OOM Killer](http://linux-mm.org/OOM_Killer)可能会运行。如果一切都失败了，您将获得一个 GPF 访问权限。

这种行为是疯狂的（理智的人在这个阵营）还是聪明的（疯狂的人在那个阵营），意见分歧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T07:20:50.917

也许您知道以下内容，但我将说明它只是为了澄清。没有从字面上抛出异常，代码正在通过 if 语句进行测试。无论您在测试中使用什么术语和方法，都需要注意更相关的观察结果。您的系统拥有整数的最大值，C++ 将在编译期间通过检查并采取相应的方式将其考虑在内。再一次，你可能也已经知道了。我的猜测是，该值要么回到 0，然后达到过量，要么在指针开始指向它之前存在的值保持不变（很可能）。在这种情况下，指针不会是`NULL`. 尝试给予`NULL`声明后，然后分配内存并查看天气是否通过您的 if 语句。

# mysql - 加入 2 个 Select 语句并将第 2 个语句限制为第一个语句的结果

> ID：12507460
> 
> 赞同：0
> 
> 时间：2012-09-20T06:59:16.123
> 
> 标签：mysql, sql, database, join

我正在尝试将前 100 个结果从一个内部选择加入到第二个。

我的例子有点做作，但我有一个电子邮件地址表，其中许多被标记为脏地址，还有一个我将电子邮件和姓名映射到的观察表（它们都包含此表中的主键）。我希望结果是每个电子邮件地址的不同名称的数量。

```
SELECT ea.email, tmp.uniques FROM 
  (SELECT email FROM emails WHERE dirty = 1 LIMIT 100) ea
  INNER JOIN 
  (SELECT email, COUNT(DISTINCT(name)) as uniques FROM nameEmailObservations GROUP BY email ) tmp 
  ON (tmp.email = ea.email); 
```

该查询似乎有效，但需要很长时间。知道为什么或我能做什么吗？我怀疑这是因为第二个查询的结果不限于第一个查询。第二个查询本身确实需要很长时间，因为`nameEmailObservations`它很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:04:51.360

一定：

```
SELECT 
    e.email,
    COUNT(DISTINCT neo.name)
FROM 
    emails e
INNER JOIN
    nameEmailObservations neo
ON
    e.email = neo.email
WHERE
   e.dirty = 1
GROUP BY
    e.email
LIMIT 100 
```

是你想做的吗？

如果`LIMIT`是导致问题的原因（即仅在查询结束时应用），那么：

```
SELECT 
    email,
    COUNT(DISTINCT name)
FROM 
    nameEmailObservations
WHERE
    email IN
    (SELECT email FROM emails WHERE dirty = 1 LIMIT 100)
GROUP BY
    email 
```

# ios - 4英寸屏幕iPhone4的屏幕高度

> ID：12507462
> 
> 赞同：1
> 
> 时间：2012-09-20T06:59:20.913
> 
> 标签：ios, iphone-5, mainscreen

我想更新使用 iOS5 SDK 创建的应用程序以适应 iPhone5 的 4 英寸屏幕。我用 iPhone5 模拟器模拟它。下面的代码告诉我们屏幕高度仍然是480.00而不是548。我应该怎么做才能让我的应用程序更高但没有iPhone5的4英寸屏幕底部的黑色间隙？任何帮助表示赞赏:)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    float screenHeight = [UIScreen mainScreen].bounds.size.height;
    NSLog(@"screenHeight :%f",screenHeight);
} 
```

日志：

```
2012-09-20 14:47:36.554 FF[61898:c07] screenHeight :480.000000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:10:42.387

Apple 对此的记录很差，但似乎您必须提供 4 英寸的启动图像才能让 iOS 知道您是为利用高屏幕而构建的。只有这样你才能使用全屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:08:03.877

> > iPhone 和 iPad 的屏幕尺寸是。
> > 
> > iPhone：纵向：320x460 横向：480x300
> > 
> > iPad：纵向：768x1004 横向：1024x748

# c# - 字典 有空条目

> ID：12507464
> 
> 赞同：-1
> 
> 时间：2012-09-20T06:59:27.977
> 
> 标签：c#, .net

我是 Windows 手机的新手。

我将四个值存储在`Dictionary<string, object>`. 当我检查条目时完成后，它会显示 7 个条目，其中三个是空键和值。

代码：

```
 Dictionary<string, string> obj = new Dictionary<string, string>();
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        obj.Add("K2", "V2");
        obj.Add("K3", "V3");
        obj.Add("K4", "V4");
        obj.Add("K5", "V5");
    } 
```

有什么帮助吗？

**我用完字典的代码：**

```
 private void GetLoginCallback(IAsyncResult asynchronousResult)
        {
            try
            {
                Dictionary<string,object> Parameters = new Dictionary<string,object>();

                /**httprequest for making asynchronous call**/
                HttpWebRequest httpRequest = (HttpWebRequest)asynchronousResult.AsyncState;
                /**response from the httprequest**/
                HttpWebResponse httpresponse = (HttpWebResponse)httpRequest.EndGetResponse(asynchronousResult);
                /**Reading the response as stream**/
                Stream streamResponse = httpresponse.GetResponseStream();
                using(StreamReader streamRead = new StreamReader(streamResponse))
                {
                    var response = streamRead.ReadToEnd();
                    //Deployment.Current.Dispatcher.BeginInvoke(new Action(() =>
                    //{
                    if (response != null && httpresponse.StatusCode == HttpStatusCode.OK)
                    {
                        WebHeaderCollection headers = httpresponse.Headers;
                        /**getting Session_ID **/
                        string session_cookie = headers[DisplayMessage.Set_Cookie];
                        string sessionCookie = headers[DisplayMessage.Set_Cookie];
                        string[] values = sessionCookie.Split(DisplayMessage.Split_SemiCollen);
                        string[] jID = values[0].Split(DisplayMessage.Split_EqualTo);
                        jsessionId = jID[1];

                        /**storing Authentication parameters in dictionary**/
                            Parameters.Add("Username", "test4");
                            Parameters.Add("Password", "*****");
                            Parameters.Add("JSessionID", "FGBfdhhfuhuhhbh_Path");
                            Parameters.Add("SessionCookie","FGBfdhhfuhuhhbh_Path;dpk");

                        //}));
                    };
                }
            }
            catch(Exception ex)
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:37:18.120

如果您的意思是在调试器中，字典显示 4 个您所期望的项目和 3 个空项目，那是因为这就是数据在内部存储的方式。`Dictionary`被实现为一个[哈希表](http://en.wikipedia.org/wiki/Hash_table)。在哈希表中包含空项是个好主意，有两个原因：

1.  使用哈希表，总是有可能发生冲突（映射到同一个“桶”的两个键）。如果您将哈希表的一部分保留为空，则平均而言只会发生少量冲突（假设给定项目的哈希函数良好）。

2.  对于一次增长一个项目的集合，最好分配比您现在需要的更多的内存，这样您就不必每次添加新项目时都复制整个集合。其他集合也有这种行为，例如`List<T>`.

但是您实际上不必担心这一点，因为当您从代码中访问字典时，您不会看到那些空项。

# c# - 表达式树，如何切换返回的数据类型（string、int、float）

> ID：12507465
> 
> 赞同：1
> 
> 时间：2012-09-20T06:59:29.897
> 
> 标签：c#, types, expression-trees

我正在重写具有脚本支持的现有模板解决方案以作为表达式树运行，而不是在每次执行时都解释 AST，并且逻辑必须与现有脚本一起使用。

我现在想要实现的是创建一个解决方案来测试真实性。

前任。为 null 或空的字符串被视为 false，因为 0 和绝对值低于 0.0001 的任何十进制值。“true”和“false”就是他们所说的，不区分大小写，字符串“null”为false。

唯一有效的输入类型是 float、int、string 和 bool。

任何可以用于要编译的表达式树的解决方案都是有效的，我已经有一个现有的方法来测试一个对象，但找不到任何好的例子来调用外部方法。

每个示例要么适用于常量值，要么不接受任何参数。

**更新**

我正在使用“Expression.ABC”方法构建树，但在资助一种方法来切换表达式树的结果类型（字符串、整数、浮点数）时遇到问题。

当前语法将所有内容存储为字符串并根据操作解析为 int 和 float，如果失败则返回默认值。

它构建为故障安全并且始终成功生成结果，即使在模板中提供了错误的语法。

**更新**

示例（不是 100 % 准确，而是举例说明当前的解释器）

```
string Evaluate(Expr e) {
    switch(Expr.Type) {
        case "istrue":
            ExprValue value = Evaluate(Expr.Child);
            switch(value.Type) {
                case "String":
                    if(String.IsNullOrWhiteSpace(value.ToString()) || value.ToString().ToLower() == "false" || value.ToString().ToLower() == "null" || value.ToInt() == 0) return false;

                case "Int":
                    return value.ToInt() != 0;
                case "Float":
            }
    }
} 
```

**更新 **更改标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:10:24.113

调用现有表达式树的表达式树与调用静态方法是完全不同的场景。`Expression.Call`两者都是可能的 - 这是（调用方法）和`Expression.Invoke`（调用表达式树）之间的区别。*请注意，在某些*情况下，最好通过`ExpressionVisitor`.

`switch`更狡猾 - 有`Expression.Switch`，但 c# 编译器不支持这些表达式，因此您必须通过这些`Expression`方法完全手动创建这些表达式。

如果您添加一个特定（但可能无效）的示例来说明您正在尝试做什么，我可以对其进行编辑以针对您的场景进行充实，但目前它非常模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:52:07.233

解决方案是改变设计。

我的问题是我试图在错误的时间，在运行时进行演员表，但表达式树无法很好地处理它。

我完全重新设计了解析器，使其具有强类型的方法和变量以及显式强制转换，事实证明这更容易转换为表达式树。

# jquery - Jquery 仅在 IE 中按 F5 后加载

> ID：12507469
> 
> 赞同：1
> 
> 时间：2012-09-20T06:59:35.233
> 
> 标签：jquery, asp.net-mvc, jquery-plugins

我正在使用 Jcrop jQuery 在 MVC3 应用程序中裁剪图像。

以下是我的 JavaScript 函数：

```
 jQuery(function ($) {
    $('#imgLab').Jcrop(
        {
            onChange: showCoords,
            onSelect: coordsSelected,
            onRelease: clearCoords
        }
        );
}); 
```

图像 ID 为“imgLab”。

```
<img id="imgLab" src="@ViewBag.ObjLabTypeMaster.TopologyImagePath" alt="Lab" width="500" height="450" /> 
```

图像 src 路径来自数据库。

现在这在 FF、Safari 和 Chrome 中运行良好。在 IE 中，它仅在我按 F5 后才有效。谁能告诉我代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:03:30.973

您可以尝试在脚本标签中添加“延迟”：

```
<script defer>
    // Your code
</script> 
```

或者，您可以尝试等到 DOM 准备好：

```
$(document).ready(function(){

    $('#imgLab').Jcrop({
        onChange: showCoords,
        onSelect: coordsSelected,
        onRelease: clearCoords
    });

}); 
```

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:04:45.610

必须为 IE设置**AllowSelect:true**

```
jQuery(function ($) {

        $('#imgLab').Jcrop(
        {
            allowSelect: true,
            //onChange: showCoords,
            //                onSelect: coordsSelected,
            onRelease: clearCoords,
            onDblClick: opendetails
        }, function () {
            Jcrop_Api = this;
        });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T07:11:59.027

我不知道，但是您可以尝试一下，如果效果不好，为什么不忽略 IE 并说该页面在 IE 中不可用或所有功能都不可用，或者您可以自动重新加载页面如果此人正在使用 IE，则自动

```
<script>
        $(document).ready(function() {
            $('#imgLab').Jcrop(function() {
                onChange: showCoords,
                onSelect: coordsSelected,
                onRelease: clearCoords
            });
        });
</script> 
```

并使用以下代码自动重新加载页面，

```
<meta http-equiv="refresh" content="30" />
<!-- content being the secounds before reload --> 
```

我相信您可以使用一些 PHP 代码添加或不添加它。

# css - Prime faces Data table (V 3.4) Sort Column without Using 图标

> ID：12507470
> 
> 赞同：1
> 
> 时间：2012-09-20T06:59:37.200
> 
> 标签：css, jsf-2, datatable, primefaces

我在我的应用程序中使用 primefaces 数据表，根据业务用户的请求，他们希望通过单击列标题而不是“<>”排序图标进行排序，但仍然可以看到“/\”或“/”图标在排序期间。如何自定义 primefaces css 属性？我试图修改这个 css 属性，但无法得到正确的结果。

```
 .ui-icon {
width: 16px;
height: 16px;
background-image:none ;
display: block;
text-indent: -99999px;
overflow: hidden;
background-repeat:repeat;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:18:49.470

把它放在你的 CSS 文件中

```
#yourTableId th .ui-sortable-column-icon{
    display : none;
} 
```

或者，将其放在您的 JS 文件中

```
jQuery('#yourTableId th .ui-sortable-column-icon').css({"display":"none"}); 
```

# sql - SQL Server 2005 中的自动增量

> ID：12507472
> 
> 赞同：2
> 
> 时间：2012-09-20T06:59:44.923
> 
> 标签：sql, sql-server-2005

如何在 Sql Server 2005 中将自动递增属性添加到表的主键？我有 ProductID 作为主键。每次添加记录时，我想将其值增加 1。创建表时我没有使用 IDENTITY 关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:09:39.930

在 SO 或其他地方有很多关于此的帖子。你要找的正是这个

[`how to set auto increment after creating a table without any data loss?`](https://stackoverflow.com/questions/6084572/how-to-set-auto-increment-after-creating-a-table-without-any-data-loss/6086661#6086661)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:20:49.980

谢谢大家 。我找到了另一种在没有 sql 命令的情况下添加 IDENTITY 属性的方法。

在 SQL Server 管理控制台中，转到对象资源管理器->选择您的数据库->选择您的表->右键单击必须指定标识属性的列->选择修改选项。在列 Poperties 窗口中，滚动到 Identity Specification。将 IsIdentity 的值更改为 Yes 并指定种子和增量值并保存。

# c# - 当输入为 Null 时，处理解析为浮点数

> ID：12507476
> 
> 赞同：5
> 
> 时间：2012-09-20T07:00:01.050
> 
> 标签：c#

我想解析一个要浮动的字符串。当字符串为空时，它将传递 0（作为浮点值）。

我正在做这样的解析：

```
aeVehicle.MSRP = float.Parse((drInvetory["MSRP"] ?? "0").ToString()); 
```

这给出了错误：

```
ERROR MESSAGE : Input string was not in a correct format.
ERROR SOURCE :    at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseSingle(String value, NumberStyles options, NumberFormatInfo numfmt)
   at System.Single.Parse(String s, NumberStyles style, NumberFormatInfo info)
   at System.Single.Parse(String s) 
```

请提出处理这种情况的最佳方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T07:02:24.493

如果`drInvetory["MSRP"]`来自 a `DataRow`，则与 相比，null 合并运算符将不会计算为 true `DBNull`，因此浮点解析将失败。您可以比较`DBNull.Value`，或使用`float.TryParse()`。

**从原始代码**

```
aeVehicle.MSRP = float.Parse(drInvetory["MSRP"] == DBNull.Value ? "0" : drInvetory["MSRP"].ToString()); 
```

就个人而言，我会检查`DBNull`然后转换为浮点数（或取消框到确切的类型，然后转换）。这节省了相对昂贵的字符串解析。

**更好的**

```
aeVehicle.MSRP = drInvetory["MSRP"] == DBNull.Value ? default( float ) : 
(float)drInvetory["MSRP"]; 
```

SQL-CLR 类型映射： http: [//msdn.microsoft.com/en-us/library/bb386947.aspx](http://msdn.microsoft.com/en-us/library/bb386947.aspx)
另请参阅：[.NET 中十进制、浮点和双精度的区别？](https://stackoverflow.com/questions/618535/what-is-the-difference-between-decimal-float-and-double-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:01:55.823

```
float f = 0f;
string s = (drInvetory["MSRP"] ?? "0").ToString();
if (s != null) {
    f = float.Parse(s, ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:04:22.733

你应该使用 TryParse ：

```
 float num = 0;
    float.TryParse(s, out num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:06:03.650

它可能是由字符串中的意外逗号引起的。尝试先扔掉逗号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T07:07:53.700

```
float result = 0;
float.TryParse(drInvetory["MSRP"], out result);
aeVehicle.MSRP = result; 
```

这样，如果解析失败，那么它将始终回退到 0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T17:46:54.897

另一个简单的替代方案是：

```
aeVehicle.MSRP = float.Parse("0" + drInvetory["MSRP"].ToString()); 
```

它仅适用于正数。否则使用最方便的 Microsoft.VisualBasic.Val 函数。

# android - 横幅底部Android

> ID：12507480
> 
> 赞同：3
> 
> 时间：2012-09-20T07:00:07.213
> 
> 标签：android, android-relativelayout

如何在屏幕底部设置横幅？
我尝试使用RelativeLayout，它保持在底部，但在屏幕之外。

这是我的简单代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_home"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background" 
   android:orientation="vertical">

       <LinearLayout 
            android:id="@+id/layout_body"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/background2" 
            android:orientation="vertical">

          ......
       </LinearLayout>
       <RelativeLayout
            android:id="@+id/layout_banner"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
         ....
       </RelativeLayout>
</LinearLayout> 
```

**更新**

我已经设置了 android:layout_alignParentBottom="true" 但没有改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:23:45.103

使用下面的 XML 代码在底部显示横幅。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_home"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background">

       <LinearLayout 
            android:id="@+id/layout_body"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/background2" 
            android:orientation="vertical" 
            android:layout_above="@+id/layout_banner">

          ......
       </LinearLayout>
       <RelativeLayout
            android:id="@+id/layout_banner"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentBottom="true">
         ....
       </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:08:54.473

这是因为`LinearLayout`with id`layout_body`已经占据了整个屏幕。因此，`RelativeLayout`带有 id`layout_banner`的人无处可去，只能在屏幕底部之外。

相反，您可以尝试以下方法：

1.  更改`RelativeLayout`为`LinearLayout`
2.  更改`layout_body`and到`layout_banner`_`layout_height``warp_content`
3.  添加`layout_weight="1"`到`layout_body`

这应该归档您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:03:36.867

将您的横幅放入`RelativeLayout`并使用`android:layout_alignParentBottom="true"`
检查解决方案：[https ://stackoverflow.com/a/5380447/1434631](https://stackoverflow.com/a/5380447/1434631)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:04:37.323

如果要将视图保持在线性布局中，可以添加一个空视图，该视图使用以下属性填充空白`android:layout_weight="1"`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_home"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background" 
   android:orientation="vertical">

   <LinearLayout 
        android:id="@+id/layout_body"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/login" 
        android:orientation="vertical">

      ......
   </LinearLayout>
   <View
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />
   <AnyLayout (you choose)
        android:id="@+id/layout_banner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
     ....
   </AnyLayout>
</LinearLayout> 
```

或者您可以在 RelativeLayout 中设置整体

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_home"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background">

   <LinearLayout 
        android:id="@+id/layout_body"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/login" 
        android:orientation="vertical">

      ......
   </LinearLayout>
   <AnyLayout (you choose)
        android:id="@+id/layout_banner"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
     ....
   </AnyLayout>
</RelativeLayout> 
```

# wiki - 如何禁用 Confluence wiki 页面的页面历史记录

> ID：12507482
> 
> 赞同：4
> 
> 时间：2012-09-20T07:00:17.100
> 
> 标签：wiki, confluence

我的 confluence wiki 中有一个页面，该页面是通过脚本自动生成的，并通过其 API 推送到 confluence 中。因此我不需要这个页面的历史，因为页面版本的数量会很快增加。

有没有办法在 Confluence 中关闭历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T00:27:29.723

没有办法关闭它。我不知道您是要附加到页面还是在每次运行脚本时完全重新创建，但如果是后者，您可以删除旧页面，然后每次创建一个新页面。

页面历史记录对您来说是否存在特定问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T13:07:11.510

我也有同样的问题。由于此功能不可用，我正在使用一种解决方法：

我删除了所有以前的页面版本，但每个 API 调用都使用[https://bobswift.atlassian.net/wiki/display/CSOAP/Documentation#Documentation-removePageVersions](https://bobswift.atlassian.net/wiki/display/CSOAP/Documentation#Documentation-removePageVersions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:35:54.440

我不知道如何禁用单个页面的备份，但您至少可以选择是否保留整个站点的备份。

要禁用整个站点的备份历史记录，请转到站点管理，然后单击“管理”部分下方的 [计划作业]。

从那里您可以禁用备份过程。

抱歉，我无法提供更多帮助，这是我所知道的最接近您的问题的解决方案。

# orientation - 仅从加速度计获取垂直分量

> ID：12507485
> 
> 赞同：2
> 
> 时间：2012-09-20T07:00:35.653
> 
> 标签：orientation, accelerometer, magnetometer

假设我们在飞机上有一个 3 轴加速度计。无论飞机如何定向，我总是需要知道加速度的垂直分量（朝向地球）是什么。我知道如果我加入额外的陀螺仪传感器，我可以做到这一点。但是假设我们没有它——是否有可能通过其他方式仅获得垂直加速度？也许使用额外的磁力计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:50:37.107

我**不会**推荐它用于飞机，我说这是一个丑陋的黑客，但你可以用加速度计做一些事情。

加速度计读数是方向的直接测量，**假设**身体在地球参考系中的加速度可以忽略不计*并且*身体没有快速旋转。基本上这就是您所要求的，这为您提供了加速度的垂直分量（也称为重力）。

由于假设，这不太有用。

磁力计无济于事，它只会帮助您找到北方的位置，但不会消除对上述假设的需要。

在某些应用中，加速度计和磁力计的读数加在一起就足够了，无需陀螺仪。当身体是静止的并且任务是测量它的方向时就是这种情况。我已经实现了这样一个应用程序并且工作得非常好。

# zend-framework2 - Zend 框架 2 添加新控制器

> ID：12507492
> 
> 赞同：6
> 
> 时间：2012-09-20T07:00:53.110
> 
> 标签：zend-framework2

为了在 Module 中添加新的控制器并通过 URL 调用它，我们需要在哪些文件中进行更改。

有没有一种方法可以添加一个新的控制器文件并通过 url 调用它而不更改任何其他配置文件。

因为每次在控制器文件中添加或编辑时对配置文件进行更改将非常繁琐。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T12:14:44.350

我正在对丹尼尔所说的“确保你有一条满足你的目的的匹配路线......”做一点澄清。出于我的目的，我试图容纳到模块/应用程序/src/应用程序/控制器/索引控制器.php和模块/应用程序/src/应用程序/控制器/配置文件控制器.php的路由，但是我努力解决我的配置文件控制器的任何问题。ZF2 是否可以在单个模块中容纳多个控制器也不清楚。我想肯定是必须的，而且确实如此！鉴于上述两个控制器，这就是我在 module/Application/config/module.config.php 中制作“路由器”数组的方式。

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
        'application' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/application',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),

        'profile' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/profile',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Profile',
                    'action'        => 'index',
                ),
            ),
        ),
    ),
), 
```

这也是成功后我的“控制器”可调用对象在 modules.config.php 中的样子。

```
'controllers' => array(
    'invokables' => array(
        'Application\Controller\Index' => 'Application\Controller\IndexController',
        'Application\Controller\Profile' => 'Application\Controller\ProfileController'
    ),
), 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T07:23:51.357

要创建一个新的控制器，您至少需要

*   创建控制器类
*   确保您有一条满足您的目的的匹配路线（您可以采用现有的路线，也可以为特殊目的创建一条新路线）
*   在模块`controllers.invokables`的`module.config.php`.

没有办法绕过这三个简单的步骤。我不明白为什么`module.config.php`在添加控制器时调整它应该是一个问题——这就是配置文件的用途。包括打开，保存和关闭，这大约需要。10-15 秒。您不会创建数百个控制器，是吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-27T04:02:23.877

来自 Zend Framework 2 参考

> 我们通知应用程序我们希望在应用程序中拥有的控制器。这是为了防止有人请求 ServiceManager 知道的任何服务以试图破坏应用程序。调度程序使用一个特殊的作用域容器，它只会拉取专门注册到它的控制器，作为可调用类或通过工厂。

源代码：http : [//framework.zend.com/manual/2.0/en/modules/zend.mvc.quick-start.html#create-a-route](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.quick-start.html#create-a-route)

> 添加控制器与路由无关，只是因为开发人员希望能够在 URL 中指定控制器。这是一个安全问题，因为我们将控制器视为服务。
> 
> 这是一项努力（a）明确哪些控制器可用，以及（b）默认情况下是安全的。

正如 Matthew Weier O'Phinney 所说。

# mysql - mysql中自动增量的主键选择和意外行为

> ID：12507495
> 
> 赞同：0
> 
> 时间：2012-09-20T07:01:00.687
> 
> 标签：mysql, database, primary-key, auto-increment

嗨，我正在制作一个活动管理网站。来自世界各地的用户（每个用户都有一个唯一的登录 ID）可以添加事件。事件存储在临时表中，并在管理员批准后转移到事件表中。

我需要为 event_id 选择一个非常有效的键。代理键将是最佳选择。目前我正在使用自动增量。

1）自动增量是否考虑表中存在的最后一个最大主键或添加的最后一个键。

问题）临时表中存在事件 id 41、42、43。管理员批准 event_id 43 并离开临时表。临时表中最大的键现在是 42。

添加的下一个事件在临时表中再次分配 id 43。为什么会这样？

我想用别的东西作为主键。我应该怎么办 ？？时间戳+用户ID是一个不错的选择。这将导致一个非常长的主键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:23:52.413

自动增量值来自计数​​器，因此通常您不会获得两次值。此外，每张桌子都有自己的柜台。

不过，InnoDB 存储引擎有一个问题：计数器在服务器启动时重置为列的最大值，因此如果在删除和插入之间重新启动 MySQL，您可能会再次获得 43。如果您使用 MyISAM 存储引擎，则不会发生这种情况，因为计数器存储在磁盘上。

为了可扩展性，有些人建议使用 UUID，因为它们使您能够在多个服务器之间划分数据库，而不必担心在某处意外重用主键。然而，UUID 密钥需要更多的 CPU 和存储空间。

# variables - mod_rewrite：2个相同的条件可以正常工作

> ID：12507502
> 
> 赞同：1
> 
> 时间：2012-09-20T07:01:24.570
> 
> 标签：variables, mod-rewrite, conditional-statements

今天是个好日子！

有可能像这样重写mod吗？

```
RewriteRule ^([A-Za-z-0-9-]+)/([A-Za-z0-9-]+)/?$    $1.php?param1=$2 [L] 
```

这与

```
RewriteRule ^([A-Za-z-0-9-]+)/([A-Za-z0-9-/]+)/?$   $1.php?param=$2 [L] 
```

我已经在同一个 htaccess 中尝试了这两个，但系统只读取第一个。我想要做的是我可以使用同时显示两个参数

```
<?php
echo $_GET[param1];
echo $_GET[param];
?> 
```

提前感谢和更多的力量！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:41:35.900

你可以像这样得到两者：

```
RewriteRule ^([A-Za-z-0-9-]+)/([A-Za-z0-9-]+)/?$    $1/$2?param1=$2
RewriteRule ^([A-Za-z-0-9-]+)/([A-Za-z0-9-/]+)/?$   $1.php?param=$2 [L,QSA] 
```

另一件事是您的第二条规则中的第二个分组与斜杠不匹配，因为`([A-Za-z0-9-/]+)`它是贪婪的，并且会吞噬斜杠。您可以通过添加以下内容使其变得不贪婪`?`：`([A-Za-z0-9-/]+?)`

# ios4 - 将应用内购买内容（杂志）扩展到 iPhone 中的每月自动更新订阅类型

> ID：12507512
> 
> 赞同：0
> 
> 时间：2012-09-20T07:02:05.820
> 
> 标签：ios4, in-app-purchase, in-app-billing, subscription, urbanairship.com

很抱歉关于 iTunes 订阅和 IAP 的第 100 万个问题，我们确实有解决方案，但这似乎与我所经历的不同，包括 UrbanAirShip。

我已经在我的应用程序中成功地很好地实现了 IAP 功能，并且使用 Urban-Airship 可以很好地工作。

这些链接确实帮助我在应用程序中学习和实施支付功能，即使这对未来的新学习者也有帮助：

1.  [http://www.alexcurylo.com/blog/2010/02/26/in-app-purchasing/](http://www.alexcurylo.com/blog/2010/02/26/in-app-purchasing/)
2.  [https://docs.urbanairship.com/display/DOCS/Home](https://docs.urbanairship.com/display/DOCS/Home)
3.  [http://urbanairship.com/resources/](http://urbanairship.com/resources/)

基本上我希望在我的应用程序中实现自动更新类型的订阅，我想确保我做对了。这是我想出的要采取的步骤列表：

*   创建了没有任何通配符的 AppID。
*   在编码端实现了应用内购买和订阅的架构。
*   在 iTunesConect 上创建了一个新应用程序，并添加了具有消耗性和非消耗性类型的应用内内容。
*   在 Urban-Airship 创建了一个新应用程序，并添加了
    具有消耗性、非消耗性和订阅的应用内内容，注意 ProductID 应与 iTunes 产品匹配。
*   使用在 iTunesConnect 帐户中创建的测试用户进行测试。

**这是我要实施的情况：**

最终用户可以购买非消耗性类型的单期杂志。现在，我如何以每月套餐的形式提供该杂志的订阅功能。类似于应用程序：http: [//itunes.apple.com/我们/app/time-magazine/id369021520?mt=8](http://itunes.apple.com/us/app/time-magazine/id369021520?mt=8)

1.  3个月订阅
2.  6个月订阅
3.  12 个月订阅
4.  24 个月订阅
5.  36 个月订阅

现在，一般来说，我可以将应用内购买项目附加到订阅中，或者我可以以任何方式重复使用同一杂志进行订阅。我需要在哪里配置所有这些设置，只需要照顾 UrbanAirShip。

我愿意听听您认为实施这种情况的最佳方法，其中一本杂志可以作为应用内以及每月包的自动续订订阅。

最后一件事，是否可以订阅 24 和 36 个月，因为无论如何我都没有找到可以将订阅设置为 24 和 36 个月的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:27:05.317

我只能解决我有经验的部分担忧。我在实施 UrbanAirship 方面没有太多经验。

Apple 管理自动更新订阅 (ARS)。这意味着他们负责向客户收费并计算到期日期。此外，在初次订阅购买后，用户必须通过 iTunes Store 应用程序或“设置”应用程序而不是您的应用程序来管理他们的 ARS。Apple 只为 ARS 提供特定的持续时间。所以，不，我很确定你不能在不向苹果公司请愿的情况下进行 24 或 36 个月的订阅。

让我试着澄清你关于非消耗品与 ARS 的问题。您希望用户能够购买 6 个月（或其他）的订阅并获得您的“杂志”的每一期，对吗？但是您也希望允许**没有**订阅的人购买单个问题，对吗？（使用非消耗品）现在，您是说，如果他们购买单个问题**并且**他们也有订阅，您希望它以某种方式将他们的订阅延长一周或一个月？

如果是这样的话，简短的回答是否定的。这并非不可能，但会很复杂，这就是原因。Apple 会为您计算 ARS 的续订/到期日期。并且在每个周期结束时，他们会自动向用户收取下一个周期的费用。如果用户的帐户设置为在 6 月 1 日续订，但您在向用户显示之前添加了一个月，即使您告诉用户他们的帐户在 7 月 1 日续订，Apple 仍会在 6 月 1 日向他们的帐户收费. 当用户收到续订电子邮件或用户在 iTunes 应用程序中检查其订阅状态时，它会变得混乱。Apple 不允许您随意为某人的自动续订订阅添加时间。

现在，如果您要使用非续订订阅，您将拥有更多控制权。但也有一些缺点，例如：

*   用户必须在每个周期结束时手动更新。
*   作为开发人员，您必须通过实现某种用户/密码系统（在 ARS 中，这基本上是`restoreCompletedTransactions`在

# facebook - 对象调试器和 502 错误

> ID：12507516
> 
> 赞同：1
> 
> 时间：2012-09-20T07:02:20.860
> 
> 标签：facebook, debugging, sharing

我想知道为什么我不能在 facebook 上分享我的网站页面。当我的意思是“不能”时，我应该说“不能像其他所有人一样”。当我在 FB 上分享一些东西时，我总是有这个丑陋的链接，没有图像，没有从我的网站提取的描述。我试图找到答案，但我没有找到任何有用的东西。所以我使用了对象调试器，看看发生了什么......

这里[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fpierre-nizet.fr%2Fblog](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fpierre-nizet.fr%2Fblog)

这个调试器告诉我有一个 502 错误......等等......这个网站确实存在并且是完全 fonctionnal（如果你不相信我： http: [//pierre-nizet.fr/blog](http://pierre-nizet.fr/blog)）。所以我的问题是：WTF？这是怎么回事？我想了解问题所在并解决此问题...

请你帮助我好吗 ？

非常感谢你。

# javascript - d3 - 创建树状图 - 子分支深度的影响

> ID：12507522
> 
> 赞同：1
> 
> 时间：2012-09-20T07:02:51.750
> 
> 标签：javascript, json, d3.js, data-visualization, dendrogram

我想创建一个树状图，如本[例所示](http://bl.ocks.org/d/2429963/)。虽然我的源代码（[小提琴](http://jsfiddle.net/nTK8K/)）几乎完全相同，但[输出](http://jsfiddle.net/nTK8K/embedded/result/)不是最优的。

我确实改变了方向（如此处[所述](https://stackoverflow.com/questions/11480191/how-do-i-tell-d3-to-make-the-dendrogram-vertical-top-down-instead-of-left-to-r)）并且我没有通过 json xhr 加载 json，而是在服务器上创建它并将其写入文档（保存一个 json xhr 调用）。

最后我不明白为什么它没有正确呈现。我有以下问题：

1.  如何影响节点的 x 和 y 位置？
2.  是否可以设置节点级别之间的距离？现在呈现的图表在每个级别之间具有非常宽的距离，例如在 0、1、1.1 等级别之间。
3.  为什么应该在同一级别的节点没有在同一级别渲染？例如，在我的小提琴中，节点**2 - 我的第二个 wp没有与节点****1 - 我的第一个 wp**放在同一级别？

我有一种感觉，因为它与我的 json 有关，但对我来说它看起来是正确的。

添加更多节点变得更加混乱：

[来源](http://jsfiddle.net/sWGgP/)和[结果](http://jsfiddle.net/sWGgP/embedded/result/)

将不胜感激任何帮助。

编辑：

多一点见解：

我发现为了使来自同一级别的子节点在同一级别上呈现，它们的子分支必须具有相同的深度。看到这个小提琴（[源](http://jsfiddle.net/7Pq5y/1/)，[结果](http://jsfiddle.net/7Pq5y/1/embedded/result/)）相同的深度，看到这个小提琴（[源](http://jsfiddle.net/rJrNP/)，[结果](http://jsfiddle.net/rJrNP/embedded/result/)）不同的深度，结果，子“优化”被渲染得更深一层。我本来希望子“优化”与“集群”和“图形”呈现在同一级别。

有什么办法可以解决这种行为？

# unit-testing - PHPUnit - 调用计数何时将方法计为“执行”/“调用”？

> ID：12507523
> 
> 赞同：1
> 
> 时间：2012-09-20T07:02:54.633
> 
> 标签：unit-testing, phpunit, invocation

我的 PHPUnit 测试有问题。我有这样的方法：

```
public function bla() 
{
    $this->blub();
} 
```

$_testObject 是 Foo 的一个模拟实例，如下所示：

```
public function setUp()
{
    $this->_testObject = $this->getMockBuilder('Foo')
                              ->setMethods(array('blub'))
                              ->getMock();
} 
```

我的测试方法是这样的：

```
/**
 * @test
 * @covers Foo::bla
 */
public function shouldCallBlubOnce() 
{
    $this->_testObject->expects($this->once())
                      ->method('blub');

    //forgot this one :D
    $this->_testObject->bla();
} 
```

该测试的结果提供：

```
PHPUnit_Framework_ExpectationFailedException : 
Expectation failed for method name is equal to <string:blub> when invoked 1 time(s).
Method was expected to be called 1 times, actually called 0 times. 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:15:54.853

以下测试使用 PHPUnit 3.6.12 在我的系统上通过。

```
class Foo {
    function bla() {
        $this->blub();
    }

    function blub() {
        echo 'blub';
    }
}

class FooTest extends PHPUnit_Framework_TestCase {
    function setUp() {
        $this->_testObject = $this->getMockBuilder('Foo')
                                  ->setMethods(array('blub'))
                                  ->getMock();
    }

    /**
     * @test
     * @covers Foo::bla
     */
    public function shouldCallBlubOnce() 
    {
        $this->_testObject->expects($this->once())
                          ->method('blub');
        $this->_testObject->bla();
    }
} 
```

运行测试会产生以下结果：

```
PHPUnit 3.6.12 by Sebastian Bergmann.

.

Time: 0 seconds, Memory: 12.50Mb

OK (1 test, 1 assertion) 
```

# java - 使用随机访问重新读取文件

> ID：12507525
> 
> 赞同：1
> 
> 时间：2012-09-20T07:03:21.560
> 
> 标签：java, file, random-access

我想通过在文件到达 EOF 时向文件添加数据来重新读取文件。但是添加数据后的第二次读取不起作用。

这是我的代码

```
 File f = new File("sample.csv");
       byte[] bb= new byte[(int)f.length()];
      RandomAccessFile raf = new RandomAccessFile (f, "r");
      int bytesread=0;
      bytesread = raf.read(bb, 0,(int)f.length());
              //bytesread =302 or something

      raf.seek(f.length());
      Thread.sleep(4000);
      bytesread = raf.read(bb,0,2); 
    //bytesread = -1 instead of 2  
      raf.close(); 
```

我正在做的是最初我正在读取文件的内容，在第一次读取时说我的 bytesread = 302 或其他内容。现在寻找指向 EOF 的指针并将一些数据添加到我的文件中并再次读取它，但不是所需的结果 bytesread =2，而是将 bytesread 作为-1。谁能告诉我我的程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:17:09.670

对于大多数流，一旦您读取了文件的结尾，就无法再次读取（RandomAccessFIle 可能不同，但我怀疑不是）

我要做的只是读取文件末尾，但不包括文件末尾，这适用于其他流。

例如

```
int positionToRead = ...
int length = f.length();
// only read the bytes which are there.
int bytesRead = f.read(bb, 0, length - positionToRead); 
```

这应该反复工作。

# html - 固定位置的身体背景未在 iPhone 上显示

> ID：12507538
> 
> 赞同：0
> 
> 时间：2012-09-20T07:04:19.430
> 
> 标签：html, css

> **可能重复：**
> [修复了 iPhone Safari 上的背景](https://stackoverflow.com/questions/3010176/fixed-background-on-iphone-safari)

这很奇怪。背景确实会出现在桌面和 Android 手机上，但不会出现在 iPhone 上。

**HTML：**

```
<body class="customer-account-login"> 
```

**CSS：**

```
.customer-account-login {
    background: url(../images/join-bg.jpg) no-repeat center center fixed;
    position: fixed;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -10;
    list-style: none;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:11:02.483

1) 总是建议在 iPhone 中使用 PNG

2）检查图像名称，区分大小写

3）尝试在PX中给出宽度和高度，然后检查

让我知道是否仍然无法工作

# c# - 我如何动态地初始化数组字符串

> ID：12507545
> 
> 赞同：2
> 
> 时间：2012-09-20T07:04:38.537
> 
> 标签：c#, string, dynamic

我是 C# 新手，我想动态初始化数组字符串，我该如何实现呢？即首先我初始化...

```
string[] filepaths;

    public void btnGetFiles_Click(object sender, EventArgs e)
    {

       try
       {

            filepaths[] = Directory.GetFiles(@txtGetFile.Text,"*.txt");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

其中`filepaths[]`没有获取目录文件。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:08:09.563

这是错误的：

```
filepaths[] = Directory.GetFiles(@txtGetFile.Text,"*.txt"); 
```

从控件名称中删除括号和（可选）@ 符号：

```
filepaths = Directory.GetFiles(txtGetFile.Text,"*.txt"); 
```

`filepaths`是你的变量名，所以你用它来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:09:11.503

不要使用`[]`，它们仅在您声明数组时才需要。

```
filepaths = Directory.GetFiles(txtGetFile.Text,"*.txt"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:10:07.733

您不能在文件**路径**变量上使用数组括号，括号仅用于声明类型的@声明，例如：

```
Type[] yourVarName; 
```

# mysql - MySQL 按日期和优先级排序

> ID：12507549
> 
> 赞同：1
> 
> 时间：2012-09-20T07:04:54.447
> 
> 标签：mysql, sql-order-by

我有一个网页，其中一个表格中包含新闻数据。

在许多情况下，我使用以下 SQL：

```
SELECT * FROM table ORDER BY insertDate DESC 
```

订购。

```
ID|priority|insertDate
1 |NULL    |2012-09-16
2 |NULL    |2012-09-17
3 |NULL    |2012-09-18
5 |NULL    |2012-09-19
5 |NULL    |2012-09-20
4 |1       |2010-05-10 - this is way back in the future 
```

但用户想要优先考虑 1 个新闻。如果我使用

```
 SELECT * FROM table ORDER BY priority ASC ,insertDate DESC 
```

它不能正常工作，我必须如何使用 ORDER 来获得结果

```
ID|priority|insertDate
4 |1       |2010-05-10
1 |NULL    |2012-09-16
2 |NULL    |2012-09-17
3 |NULL    |2012-09-18
5 |NULL    |2012-09-19
5 |NULL    |2012-09-20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:09:57.817

[使用 coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)将有效值设置为 Null 优先级行：

```
SELECT * 
FROM table 
ORDER BY 
   coalesce(priority,0) ASC ,
   insertDate DESC 
```

**已编辑**

重新阅读您的问题，我发现正确的顺序是 DESC 而不是 ASC：

```
 coalesce(priority,0) DESC , 
```

另外，请注意@yshavit 评论。为了提高性能，您可以将查询拆分为两个选择第一个非空值。

请记住，当您创建这个新字段时，您[可以为其设置一个默认值](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)，这将避免`coalesce`和`union`：

```
data_type [NOT NULL | NULL] [DEFAULT default_value] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:14:26.160

```
SELECT * 
FROM table 
ORDER BY 
   if(priority IS NULL,'0',priority) ASC ,
   insertDate DESC; 
```

# c# - XML 架构问题

> ID：12507551
> 
> 赞同：1
> 
> 时间：2012-09-20T07:05:17.957
> 
> 标签：c#, xml, xsd

所以我正在尝试构建一个 Web 服务来验证来自 Schema 的 XML。我的问题如下：当我使用这个 XML 时：

```
<?xml version="1.0" encoding="utf-8"?>
<!--Creat la data 5/13/2007 2:15:00 PM-->
<ListaCase xmlns="ListHNS-schema">
<Casa strada="florilor">
 <nr>Sgt. Pepper's Lonely Hearts</nr>
<cod>The Beatles</cod>
<oras>Teora</oras>
<tara>1967</tara>
 </Casa>
 <Casa strada="teilor">
<nr>Dark Side Of The Moon</nr>
<cod>Pink Floyd</cod>
<oras>Corint</oras>
<tara>1973</tara> 
```

针对此架构：

```
<?xml version="1.0" encoding="utf-16"?>
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified"      version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:element name="ListaCase">
 <xsd:complexType>
  <xsd:sequence>
    <xsd:element name="Casa">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="nr" type="xsd:string" />
          <xsd:element name="cod" type="xsd:string" />
          <xsd:element name="oras" type="xsd:string" />
          <xsd:element name="tara" type="xsd:int" />
        </xsd:sequence>
        <xsd:attribute name="strada" type="xsd:string" />
      </xsd:complexType>
    </xsd:element>
   </xsd:sequence>
  </xsd:complexType>
  </xsd:element>
 </xsd:schema> 
```

我的 Visual Studio 说他找不到架构。但是当我使用另一个模式和另一个 XML 时，一切正常。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:11:49.760

可能是因为不同的 XML 字符编码？首先是UTF8，其次是UTF16。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:20:02.787

我改变了你的架构：

```
<?xml version="1.0" encoding="utf-16"?>
<xsd:schema 
attributeFormDefault="unqualified" 
elementFormDefault="qualified"      
version="1.0" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:element name="ListaCase">
 <xsd:complexType>
  <xsd:sequence>
    <xsd:element name="Casa" maxOccurs="unbounded">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="nr" type="xsd:string" />
          <xsd:element name="cod" type="xsd:string" />
          <xsd:element name="oras" type="xsd:string" />
          <xsd:element name="tara" type="xsd:int" />
        </xsd:sequence>
        <xsd:attribute name="strada" type="xsd:string" />
      </xsd:complexType>
    </xsd:element>
   </xsd:sequence>
  </xsd:complexType>
  </xsd:element>
 </xsd:schema> 
```

请注意 `maxOccurs="unbounded"`属性

```
<xsd:element name="Casa"> 
```

# ios - ios元素拖动方向

> ID：12507552
> 
> 赞同：1
> 
> 时间：2012-09-20T07:05:18.130
> 
> 标签：ios, button, drag

如何找到被拖动元素的方向？我希望 uibutton 可以向左或向右拖动。我可以移动对象，但我想识别元素被拖动的方向。

这是我的代码

```
#import "SelectAnswerUIVIewController.h"

@implementation SelectAnswerUIVIewController

@synthesize cardViewOne;
@synthesize cardViewTwo;
@synthesize cardViewThree;
@synthesize cardViewFour;
@synthesize cardViewFive;

@synthesize buttonCardOne;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

// --------------------------  image animation methods ----------------------- //
// rotate image view
- (void)rotateImage:(UIButton *)image duration:(NSTimeInterval)duration 
              curve:(int)curve degrees:(CGFloat)degrees
{
    // Setup the animation
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = 
    CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];
}

- (IBAction)rotateImageLeft:(id)sender;
{
    NSLog(@"DRAG LEFT CALLED");
    [self rotateImage:buttonCardOne duration:3.0 
                curve:UIViewAnimationCurveEaseIn degrees:180];

    [self rotateImage:buttonCardOne duration:3.0 
                curve:UIViewAnimationCurveEaseIn degrees:-180];

}

- (IBAction)rotateImageRight:(id)sender;
{
    NSLog(@"DRAG RIGHT CALLED");
    [self rotateImage:buttonCardOne duration:3.0 
                curve:UIViewAnimationCurveEaseIn degrees:-180];

}

@end 
```

# r - R：在 addtable2plot{plotrix} 中抑制表格网格

> ID：12507554
> 
> 赞同：2
> 
> 时间：2012-09-20T07:05:28.417
> 
> 标签：r

我`addtable2plot()`在`plotrix`包装中使用。一个特殊的问题是我无法摆脱表格网格。和`hlines`选项`vlines`没有任何区别。我究竟做错了什么？

```
testdf<-data.frame(Before=c(10,7,5),During=c(8,6,2),After=c(5,3,4))
rownames(testdf)<-c("Red","Green","Blue")
barp(testdf,main="Test addtable2plot",ylab="Value",
     names.arg=colnames(testdf),col=2:4)
# show most of the options
addtable2plot(2,8,testdf,bty="n",display.rownames=TRUE, hlines=FALSE, vlines=FALSE,title="The table") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:05:15.037

调试代码，基本问题是`rect`为每个单元格调用...有效地创建一个网格，无论水平和垂直线段是否被绘制

我解决了这个（有点）如下：

*   `addtable2plotx <- fix(addtable2plot)`（打开编辑器）
*   在文件的第 64 行`if (hlines && vlines)`之前添加`rect(...`

`addtable2plotx`使用而不是重新制作你的情节`addtable2plot`。（那里似乎仍然有一些虚假的线条，但矩形消失了。）

您可以尝试就此联系包维护人员，以确定这是否是一个错误，或者我们是否误读了文档中的`hlines`和`vlines`参数的意图（在这种情况下，可能需要对文档进行调整）

# database - 数据库表约束查询

> ID：12507555
> 
> 赞同：-1
> 
> 时间：2012-09-20T07:05:28.863
> 
> 标签：database

关系表可以有与另一个表相关的约束吗？如果是，请同时提供一个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:03:23.883

是的，想想外键约束。外键约束与另一个表相关。例如，考虑下表

1.  地址（Addressid (PK)、AddressLine1、City、State_cd (FK)）
2.  状态（State_cd（PK），State_name）

这里要注意，Address 表中的 State_cd 与另一个表（State）相关。

希望这很清楚

# node.js - 节点博客、截屏视频和观看资源

> ID：12507560
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:06.633
> 
> 标签：node.js

我一直在开发 node.js + express.js 网络应用程序，但我一直遇到的问题是项目或博客放弃。我意识到节点仍然相对较新，并且可能正在经历一些成长的痛苦。

有哪些仍然活跃的节点资源可用于学习如何使用它构建 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:28:32.593

这些你可以试试

[http://net.tutsplus.com/tutorials/javascript-ajax/node-js-for-beginners/?search_index=4](http://net.tutsplus.com/tutorials/javascript-ajax/node-js-for-beginners/?search_index=4)

[http://www.nodebeginner.org/](http://www.nodebeginner.org/)

[http://coding.smashingmagazine.com/2011/09/16/useful-node-js-tools-tutorials-and-resources/](http://coding.smashingmagazine.com/2011/09/16/useful-node-js-tools-tutorials-and-resources/)

[http://dailyjs.com/2010/11/01/node-tutorial/](http://dailyjs.com/2010/11/01/node-tutorial/)

[http://camp.nodejs.org/videos/](http://camp.nodejs.org/videos/)

[http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/](http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/)

[http://javascriptplayground.com/blog/2012/04/beginning-node-js-express-tutorial](http://javascriptplayground.com/blog/2012/04/beginning-node-js-express-tutorial)

这些是我学习节点的书签。他们很有帮助。但是，当然，node 变化很大，当您可能阅读或观看其中一些内容时，已经有了一个新版本的 node。请务必注意 git 页面节点，并密切注意更改。

# jdeveloper - 如何使用 JDeveloper 创建 .ear 文件

> ID：12507561
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:06.943
> 
> 标签：jdeveloper

我是 Jdeveloper 的新手。我正在使用 JDeveloper 10g。我创建了一个项目 abc.jws，其中有五个 .jpr 文件夹（DTO.jpr、persistence.jpr、service.jpr、util.jpr、ViewController.jpr）。我想为整个项目创建 .ear 文件，以便可以直接放入生产环境中。当我右键单击 abc.jws 并选择 New 时，部署配置文件下的 EAR 选项始终处于禁用状态。如果有人可以帮助我，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-31T05:14:29.327

转到应用程序 -> 部署并部署为 EAR 文件。而已。在弹出的 EAR 文件的位置将在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T07:54:46.430

尝试这个：

1.  对于每个项目，您都需要一个 jar，因此右键单击它们并选择“新建”
2.  选择“部署配置文件”->“JAR 文件”
3.  在您的主项目（在 jDev 中）右键单击并选择新建
4.  在“General”->“Deployment Profiles”文件夹中选择“WAR File”（我知道你想要一个 EAR 文件...）
5.  现在您应该在“资源”文件夹中有一个部署描述符，如果它没有自动打开，请双击它
6.  为 EAR 文件和 WAR 文件命名，指定上下文根名称等
7.  在“Profile Dependencies”中检查其他项目的部署配置文件（所以当你制作 EAR 文件时它会重新创建 JAR 文件）
8.  右键单击部署描述符（“file.deploy”）并选择“部署到 EAR 文件”

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T13:42:44.007

右键单击您`Application -->Deploy-->FileName.ear`的`.ear`文件将在指定位置创建

```
C:\JDeveloper\mywork\ADFApplication\deploy\FileName.ear 
```

# php - 如何在 mysql 中创建树形菜单使用数据？

> ID：12507563
> 
> 赞同：2
> 
> 时间：2012-09-20T07:06:19.330
> 
> 标签：php, mysql, html, menu

我想在 MYSQL 中使用 php 和数据创建动态菜单树。

我在mysql中有表`field`：

```
CREATE TABLE IF NOT EXISTS sys_menu (
  menu_code varchar(16) COLLATE utf8_unicode_ci NOT NULL,
  menu_name varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  menu_link varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (menu_name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO sys_menu (menu_code, menu_name, menu_link) VALUES
('01', 'setting', NULL),
('01.01', 'admin', NULL),
('01.01.01', 'add', 'add.php'),
('01.01.02', 'edit', 'edit.php'); 
```

最终，HTML 应该像下面的代码。

```
 <ul>
    <li><a href="">Setting</a>
      <ul>
      <li><a href="">Admin</a>
          <ul>
            <li><a href="add.php">Add</a></li>
            <li><a href="edit.php">Edit</a></li>
          </ul>
      </li>
      </ul>
    </li>
    </ul> 
```

谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:18:21.873

另一种解决方案，应该能够处理各种大小的列表级别。

```
$listData[]=array('menu_code' => '01','menu_name' => 'setting', 'menu_link' => null);
$listData[]=array('menu_code' => '01.01','menu_name' =>  'admin', 'menu_link' => null);
$listData[]=array('menu_code' => '01.01.01','menu_name' =>  'add', 'menu_link'   =>'add.php');
$listData[]=array('menu_code' => '01.01.02','menu_name' =>  'edit', 'menu_link' => 'edit.php');
$listData[]=array('menu_code' => '02','menu_name' =>  'people', 'menu_link' => null);
$listData[]=array('menu_code' => '02.01','menu_name' =>  'people_edit', 'menu_link' => 'edit.php');
$listData[]=array('menu_code' => '02','menu_name' => 'people', 'menu_link' => null); 
```

现在的功能

```
function createListMenu($listData){
    $str ='<ul>';
    $lastListLevel=0;
    $firstRow=true;

    foreach($listData as $row){
        $currentListLevel=count(explode('.',$row['menu_code'])) -1 ; // minus one to correct level to Level 0
        $differenceLevel=$currentListLevel-$lastListLevel;

        // deal with the link
        $hrefValue = is_null($row['menu_link']) ? '' : $row['menu_link'];
        $rootLevel=false;

        if($differenceLevel==0){        // stay on the same list level
            if($firstRow){
                $firstRow=false;
            }else{
                $str .='</li>';
            }
            $str .='<li>';
        }elseif($differenceLevel>0){    // go deeper in list level
            for($j=0;$j<$differenceLevel;$j++){
                $str .='<ul><li>';
            }
        }elseif($differenceLevel<0){    // go higher in list level
            for($j=$differenceLevel;$j<=0;$j++){
               if($j==0){  // root level reached
                   $rootLevel=true;
                   $str .='</li>';
               }else{
                   $str .='</li></ul>';
               }
            }
            $str .= ($rootLevel) ? '<li>' : '<ul>';
        }
        $str.='<a href="'.$hrefValue.'">'.$row['menu_name'].'</a>';
        $lastListLevel=$currentListLevel;
    }

    // set end list tags
    for($j=$lastListLevel;$j>=0;$j--){
        $str .='</li></ul>';
    }
    return $str;
}

echo createListMenu($listData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:48:31.693

数据库设计完全错误，这样做会有很多问题。

相反，您可以更改为`parent`类似的设计：

```
CREATE TABLE IF NOT EXISTS `sys_menu` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `menu_name` varchar(64) NOT NULL,
  `menu_link` varchar(255) NOT NULL,
  `parent` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

INSERT INTO `sys_menu` (`id`, `menu_name`, `menu_link`, `parent`) VALUES
(1, 'setting', NULL, 0),
(2, 'admin', NULL, 1),
(3, 'add', 'add.php', 2),
(4, 'edit', 'edit.php', 2); 
```

然后你可以制作这样的菜单：

```
$db = new PDO('mysql:host=localhost;dbname=testdb', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

function checkChilds($rows, $id) {
    foreach ($rows as $row) {
        if ($row['parent'] == $id) {
            return true;
        }
    }
    return false;
}
function createMenu($rows, $parent=0){  
    $result = "<ul>";
    foreach ($rows as $row){
        if ($row['parent'] == $parent){
            if($row['menu_link']){
                $result .= "<li><a href='".$row['menu_link']."' />".$row['menu_name']."</a>\n";
            } else {
                $result .= "<li>".$row['menu_name']."\n";
            }
            if (checkChilds($rows, $row['id'])){
                $result.= createMenu($rows,$row['id']);
            }
            $result .= "</li>\n";
        }
    }
    $result .= "</ul>\n";

    return $result;
}

$stmt = $db->query("SELECT * FROM `sys_menu`");
$menu = $stmt->fetchAll(PDO::FETCH_ASSOC);

echo createMenu($menu); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:58:16.303

```
<?php
    $connection=mysql_connect(DB_Server,DB_User,User_Pass);
            $db=mysql_select_db(DB_Name);
    $sql="select * from sys_menu order by menu_code";
    $res=mysql_query($sql) or die(mysql_error());
    echo '<ul>';
    while($row=mysql_fetch_array($res))
        {
            $cur=$row['menu_code'];
            if (strlen($cur)==2)
            {
                echo '<li><a href="">'.$row['menu_name'].'</a><li>';

                $res2=mysql_query($sql) or die(mysql_error());
                echo '<ul>';
                $mainpar=$cur;
                while($row=mysql_fetch_array($res2))
                    {
                        $cur=$row['menu_code'];
                        if ((strlen($cur)==5)&&(substr($cur,0,2)==$mainpar))
                        {
                            echo '<li><a href="">'.$row['menu_name'].'</a><li>';
                            $res3=mysql_query($sql) or die(mysql_error());
                            echo '<ul>';
                            $secpar=$cur;
                            while($row=mysql_fetch_array($res3))
                                {
                                    $cur=$row['menu_code'];
                                    if ((strlen($cur)==8)&&(substr($cur,0,5)==$secpar))
                                    {
                                        echo '<li><a href="'.$row['menu_link'].'">'.$row['menu_name'].'</a><li>';
                                    }   
                                 }
                                 echo '</ul>';
                        }
                    }
                    echo '</ul>';
            }
        }
        echo '</ul>';
?> 
```

# fancybox - Fancybox 以编程方式打开两次 2.06

> ID：12507564
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:22.607
> 
> 标签：fancybox

我正在尝试以编程方式打开fancybox。不是通过链接。一旦用户单击addform，我手动创建表单并在fancybox中显示表单。sout 变量包含表单 html。 `$.fancybox({ openEffect : "none", closeEffect : "none", autoDimensions : false, width : 620, height : "auto", content : sOut });`

然后调用这个 `$.fancybox.close();`

我现在的问题是当我单击同一个按钮时，fancybox 不再出现。如果你这样做了，请告诉我。如何正确关闭fancybox，以便我可以重新打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T17:35:21.303

可能，您必须在 fancybox 代码中删除以下命令：

```
'hideOnContentClick': true 
```

# javascript - 编辑器，以协助在 Angular 应用程序中导航

> ID：12507565
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:26.350
> 
> 标签：javascript, angularjs

我目前使用 Visual Studio 作为我的开发环境，并希望能够以更好的方式浏览我的 Angular 代码。

例如，能够在 ng-controller 上按 ctrl-click 以自动将我带到已定义的控制器会很棒 - 就像您可以在 C# 中执行的“转到定义”之类的东西。如有必要，我不反对使用其他编辑器。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:55:53.580

目前，据我所知，我们在市场上获得的最佳支持是 ng-attributes 的代码完成。

约翰·林德奎斯特（John Lindquist）曾经提到过，对 ctrl-clicking 的支持最终会出现，但我想这需要一段时间才能实现。在那之前，这是我们拥有的最好的。

如果您在 Visual Studio 中没有类似的支持，我建议您尝试带有[angularjs 插件](http://plugins.intellij.net/plugin?pr=idea&pluginId=6971)的 Intellij IDE 。

# c - C popen fwrite 缓冲区问题

> ID：12507567
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:32.923
> 
> 标签：c, imagemagick, mingw, stdin, popen

我使用我的 C 程序将二进制数据流式传输到 ImageMagick：

```
inbuf = popen(string, "wb");
setbuf(inbuf, NULL);                  /// !!! ///
fwrite(buffer, frame, 1, inbuf);
pclose(inbuf); 
```

而且 ImageMagick 并不总是在 windows (mingw) 上接收所有数据。如果没有 setbuf 命令（禁用缓冲），它接收的数据会更少，并且 Linux (gcc) 上也会出现问题。

当我将相同的缓冲区转储到文件时，一切正常，所有数据都写入磁盘，我什至不必禁用缓冲：

```
outbuf = fopen("temp\\tune.gray", "wb");
fwrite(buffer, frame, 1, outbuf);
fclose(outbuf); 
```

我发现当我发送奇数字节时会出现问题:) 当我发送偶数时一切正常。我尝试不以批量模式写入数据，而是将缓冲区拆分为更小的部分，甚至尝试逐字节发送数据 - 它没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:46:07.860

fwrite 返回成功写入的字节总数。您可以编写一个循环来测试实际写入了多少字节，然后继续进行下一个写入操作（从成功写入的位置开始），直到成功写入整个缓冲区。

# objective-c - 在.m和.m中声明变量但在目标c中声明变量有什么区别

> ID：12507568
> 
> 赞同：3
> 
> 时间：2012-09-20T07:06:40.047
> 
> 标签：objective-c, ios, ios5, objective-c-category

> **可能重复：**
> [在 ObjC 实现文件中声明的实例变量](https://stackoverflow.com/questions/6785765/instance-variables-declared-in-objc-implementation-file)

我想知道以下两个代码片段之间在可见性方面的差异，即在哪里和谁可以访问/查看变量名称以及所有其他差异（除了一个是类别）。

### 1：

```
// in implementation file SchoolTableViewController.m
@interface SchoolTableViewController()
{
NSString* name;
}

@end

@implementation SchoolTableViewController
...
@end 
```

### 2：

```
// in implementation file SchoolTableViewController.m
@implementation SchoolTableViewController
{
NSString* name;
}
...
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:25:21.193

我认为变量的第二种情况具有@protected 范围，而在第一种情况下，它的可见性仅限于 .m 文件

# php - PHP 中的 Oauth 2.0 实现

> ID：12507569
> 
> 赞同：2
> 
> 时间：2012-09-20T07:06:40.427
> 
> 标签：php, xampp, oauth-2.0

我正在尝试向客户和用户公开我们的 API，并且我希望仅在他们使用 Oauth 2.0 从我们的数据库授权自己的情况下才允许他们访问它。我打算用核心 PHP 编写它。我已经做了足够的研究以在网上找到它。我在 PHP 部分下的[http://oauth.net/code](http://oauth.net/code)上看到了一些代码，但仍然无法在运行状态下设置它。有人可以告诉我在 windows xampp 机器或任何我可以直接部署它的库上设置它的确切过程。

# unit-testing - 如何按类别筛选 Visual Studio 2012 中的单元测试？

> ID：12507570
> 
> 赞同：9
> 
> 时间：2012-09-20T07:06:40.467
> 
> 标签：unit-testing, visual-studio-2012

我已经切换到使用 VS 2012 并且对于大多数部分来说它很棒。问题是我找不到如何按类别过滤单元测试？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-03T16:26:29.370

假设您已经像这样使用了 TestCategoryAttribute：

```
[TestMethod, TestCategory("MyTestCategory")]
public void MyTest() {} 
```

在“测试资源管理器”窗口中，要包含特定类别，请在过滤器文本框中输入： `Trait:"MyTestCategory"`
要删除特定类别的测试，请在过滤器文本框中输入：
`-Trait:"MyTestCategory"`

您可以过滤掉或包含多个类别。这允许您在测试资源管理器窗口中过滤掉集成测试和自动化 UI 测试，以便您可以更有效地使用“构建后运行测试”。

See here for more: [http://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Searching_and_filtering_the_test_list](http://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Searching_and_filtering_the_test_list)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T22:30:24.430

在最新的 Visual Studio 2012 CTP 中添加了此功能。测试资源管理器现在可以选择按特征（类别）对测试进行分组并按特征（类别）进行筛选 [https://msdn.microsoft.com/en-us/library/hh270865.aspx](https://msdn.microsoft.com/en-us/library/hh270865.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T20:43:37.807

我也一直在寻找这个功能，据我所知，你不能按类别过滤。我尝试使用搜索过滤器*Category:"categoryName"*，但这不起作用。看来您可以从命令行（http://msdn.microsoft.com/en-us/library/dd286683.aspx）按测试类别运行，并且您可以定义在构建中运行哪些类别（http:// msdn.microsoft.com/en-us/library/dd286595.aspx），但从 IDE 看来不可能。

我希望试用 Visual Studio 2012 的默认测试工具，但由于我对测试类别的依赖，唯一的选择似乎是第 3 方商业工具，例如 JetBrains dotCover。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T20:32:27.410

在 2012 年附带的新 Test Exlorer 中，您可以按“测试结果”、“文件名”等对测试进行分组，但在 RTM 构建组/按“TestCategory”搜索时，测试资源管理器中不存在。但是，命令行和 TeamBuild 中有一个过滤器，基于 VS2012 中的 TestCategory（在 VS 2012 RC 中使用 TestCaseFilter 运行选择性单元测试）。

从 VS Team 的一名成员那里，他们了解了这个缺失功能​​的重要性。它在积压中，应该可以在未来的构建/更新中使用。

# apache-flex - 调用其他竞争函数时引用空对象

> ID：12507572
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:50.383
> 
> 标签：apache-flex

我在组件 A 中创建了以下函数（即 productDetailComp）

```
 public  function  createProductDetailItem(productdetail:Productdetail):void{

            productdetailService.createProductdetail(productdetail);
            productdetailService.commit();

        } 
```

在组件 B 中，我通过调用该函数

var productdetail:Productdetail = new Productdetail();

productDetailComp.createProductDetailItem(productdetail);

但是，为什么在调用 createProductDetailItem() 函数时会弹出以下错误？需要为函数或组件productDetailComp创建实例？

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 productDetailComp/onEdit()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\productDetailComp.mxml:80] 在 productDetailComp/__button2_click()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\ src\productDetailComp.mxml:250]

# c# - 需要与 Web 服务器相关的帮助

> ID：12507575
> 
> 赞同：0
> 
> 时间：2012-09-20T07:06:54.167
> 
> 标签：c#, asp.net, webserver

我已经在我的开发机器上安装了 OS Windows7 Home Basic。开发 ASP.NET Web 应用程序后，我需要进行部署。我开始在我的机器上安装 IIS，但发现在 Win7 Home Basic 中，没有 iis 管理器。在网上搜索后，我找到了 Cassine Web Server(CWS)。我安装了 CWS，它作为 Web 服务器运行良好。

我有个问题。CWS 是否优于 IIS？CWS 是否作为 IIS 保护？CWS 可以用作目标机器上的 Web 服务器吗？

如果有人用过 CWS，请告诉我你的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:09:30.600

CWS 只是一个开发 Web 服务器。它没有用作生产 Web 服务器的目的。

# jquery - 使用 jquery 提交表单时将值从文本字段复制到输入 type=hidden

> ID：12507576
> 
> 赞同：2
> 
> 时间：2012-09-20T07:06:59.087
> 
> 标签：jquery, asp.net-mvc-3, form-submit

我在 asp .net mvc3 工作。我有一个带有文本框和按钮的表单。在将文本框中的值传递给控制器​​之前，我需要对其进行加密。所以我尝试加密文本框值，将其存储在隐藏字段中并将隐藏字段值传递给控制器​​。我在 .submit() 中使用了以下 jquery 代码，但是当我在控制器收到隐藏字段的值时，它显示的是默认值而不是新值。

```
 $('#myform').submit(function () {
       var hash = "hashed value";
    $("#myhiddenfiled").val(hash);
    alert($('#myhiddenfiled').val());
      return false;
  }); 
```

Alertbox 显示新分配的值，但在控制器中的操作中接收到的值以旧值显示。submit() 有什么替代方法吗？

注意::在我的情况下，页面是通过按 Enter 按钮提交的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:53:55.557

确保您的#myhiddenfiled 隐藏输入（而不是可见输入）的名称与模型的相应属性相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:49:32.010

更改事件是一个很好的方法

前任 ：

```
$('#TEXT_INPUT_ID').on('change',function(e){
    var $t = $(this);
    $t.closest('form').find('#hiddenFieldId').val( encrypt($t.val()) );
})
// if any action has to be done on submit except for altering the form input values ... 
.closest('form').on('submit',function(e){
    // flash message
    // ...
})
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:20:18.303

根据您的哈希复杂性，您可以将函数绑定到`change`用户输入数据的字段的事件，在哈希字段上设置此值，然后提交表单。

我一直喜欢自己处理提交，因为我可以在提交之前做各种有趣的事情，然后仍然调用提交。

更新：Dimitri 评论说我误解了这个问题，所以我删除了这些。此外，Dimitri 在提交时处理事情是正确的。

# backbone.js - 如何将所有模板放在不同的 HTML 文件中，如“AppTmpl.html”，以及如何在主干中访问这些模板？

> ID：12507578
> 
> 赞同：3
> 
> 时间：2012-09-20T07:07:03.667
> 
> 标签：backbone.js, underscore.js

如果在 index.html 文件中声明了我的应用程序模板，它们就可以工作。但是，我想将所有模板保存在不同的 html 文件中，例如 -AppTmpl.html

```
<!-- SidebarView Template -->
<script id="sideBarTmpl" type="text/template">
   <div class="inner_div"><img src="images/com_logo.png"></div>
   <div class="inner_div"><img src="images/adv_index.png"></div>
</script> 

<!-- HeaderView Template -->
<script id="folderDivTmpl" type="text/template">
   <div id="div_<%= menu_sequence %>"></div>
</script> 
```

我正在使用下划线模板。但问题是这些模板不能通过下划线访问。比如，this.template = _.template($("#headerTmpl").html(), this.model.toJSON());

所以我需要做的就是在 index.html 或其他东西中包含“AppTmpl.html”文件。有什么解决办法吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:26:54.783

我将[requireJS](http://requirejs.org/)与[文本插件一起使用](https://github.com/requirejs/text)

然后，您可以根据需要使用 requireJS 加载它：

```
require(['text!templates/AppTmpl.html'],function(AppTemplate){

     this.template = _.template(AppTemplate);

}); 
```

# matlab - 求解一个参数，使曲线下面积等于 1

> ID：12507579
> 
> 赞同：0
> 
> 时间：2012-09-20T07:07:25.297
> 
> 标签：matlab, integration, numerical, solver

我刚刚发现我可以使用`trapz`Matlab 中的函数来找到给定向量的曲线下面积。我想要做的是规范化这个向量中的值，使得曲线下的面积等于`1`。假设这`x`是一个单一的比例因子，例如：

```
Area_Under_curve(x * V) = 1 
```

我怎样才能找到 x？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:10:13.347

我认为

```
x = 1/trapz(V) 
```

会这样做:)

# iphone - 在 iOS 上，要找到结束滑动位置，我们需要使用 UIPanGestureRecognizer，那为什么不使用 touchesEnded 呢？

> ID：12507581
> 
> 赞同：0
> 
> 时间：2012-09-20T07:07:27.207
> 
> 标签：iphone, ios, uikit, uigesturerecognizer

据说 Swipe Gesture`UISwipeGestureRecognizer`不能告诉滑动的结束位置（这有点奇怪），我们需要使用它`UIPanGestureRecognizer`来代替，如这个问题中所述：[UISwipeGestureRecognizer Swipe length](https://stackoverflow.com/questions/4828833/uiswipegesturerecognizer-swipe-length)

但是用那个方法，如果用`touchesBegan`and`touchesEnded`代替是不是也一样？有没有理由或优势来`UIPanGestureRecognizer`代替使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:13:23.363

您可以使用任何一种...取决于您的选择。这实际上取决于您的要求以及您真正想做的事情。如果你想使用`UITouch`你可以继续。

同样在您提供的链接中，还有最后一个答案“您只能以标准方式进行操作：记住 touchBegin 的触摸点并比较 touchEnd 的点。”

所以触摸是一种较长的方法，而使用手势会使您的代码看起来更少。

# facebook - Facebook 创建新应用程序错误 - “不应包含协议信息。”

> ID：12507582
> 
> 赞同：6
> 
> 时间：2012-09-20T07:07:29.617
> 
> 标签：facebook

我正在尝试更新/创建我的应用程序的“应用程序域”，但它不断抛出此错误：

> 错误
> 
> 应用程序域：[http](http://www.example.com) ://www.example.com不应包含协议信息。

而我 100% 确定我的网站没有任何 OpenGraph 元标记。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T07:45:18.237

卸下`http://`零件

仅尝试`www.example.com`或仅尝试`example.com`。

它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:53:21.447

只需删除`http://`我有同样的问题，最初我曾经输入[http://www.example.com](http://www.example.com)和 facebook 导致错误。但是当我通过删除它只使用[www.example.com](http://www.example.com)`http://`时。

此外，如果您没有使用类似的安全服务器`https://`，您还需要在移动本机中勾选沙箱和指定网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T16:02:36.197

您好，您可能混淆了字段`protocol name`和`site url`.
就像这样：
`site url`字段应该有`http://`
和`protocol information`字段不应该有`http://`

问候，穆特鲁。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T05:12:36.997

我最近经历了 Facebook 应用程序的创建，即使我也遇到了这个问题。

但是我成功了，如果我没有把“应用程序域：”域值放在“基本信息”下。

因此，您无需输入“App Domain”值，而是只需根据您的要求填写低于要求的值

1.  使用 Facebook 登录的网站 [强制]
2.  脸书上的应用
3.  页面选项卡

# android - ViewPager ListViews 似乎更新了彼此的适配器

> ID：12507585
> 
> 赞同：0
> 
> 时间：2012-09-20T07:07:32.720
> 
> 标签：android, listview, android-viewpager, fragment, android-arrayadapter

新的安卓开发者在这里。现在一直在与同样的问题作斗争，是时候寻求帮助了。我有一个在 FragmentActivity 中扩展 FragmentPagerAdapter 的应用程序（利用 android.support.app.v4 库），前 2 页包含列表片段（不是 ListFragments，请注意，我将 ListViews 放在上面的常规片段）。基本上，我的应用程序将一些数据从服务发送到自定义 ArrayAdapter。诀窍是，第一页和第二页上的 ListView 是基于相同的数据；最终，将有一些不同的渲染和商业逻辑应用于每个，但现在我只是试图让两个列表都出现。出于本测试的目的，每个列表都应该以相同的数据开始，并且列表中的每个项目都有一个按钮；单击按钮应该使该行从当前片段的列表中消失，但不会从另一个列表中消失。这是我的代码：

```
public class CustomBillAdapterTest extends ArrayAdapter<MasterBill> {

Context context;
private ArrayList<MasterBill> billRows;
int resourceID;
private static LayoutInflater inflater = null;
public FragmentActivity fragment;

public ImageLoader imageLoader;
AppService as;

public CustomBillAdapterTest(FragmentActivity fragment, int resourceID, ArrayList<MasterBill> billRows) {
    super(fragment, resourceID, billRows);
    this.context = fragment;
    this.billRows = billRows;
    this.fragment = fragment;
    this.resourceID = resourceID;

    try {       
        as = (AppService) fragment.getApplicationContext();         
        imageLoader = new ImageLoader(fragment.getApplication());   
    } catch (Exception e) {
        e.printStackTrace();
    }

}

public int getCount() {
    return billRows.size();
}

public long getItemId(int position) {
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    MasterBill master = getItem(position);

    View vi = convertView;
    if (convertView == null) {
        inflater = (LayoutInflater) this.fragment.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vi = inflater.inflate(resourceID, null);
    }

    TextView itemText = (TextView) vi.findViewById(R.id.itemText);
    TextView price = (TextView) vi.findViewById(R.id.price);
    ImageView itemIcon = (ImageView) vi.findViewById(R.id.itemIcon);
    Button button = (Button) vi.findViewById(R.id.button1);

    itemText.setText(master.item_text);
    price.setText(master.price);
    imageLoader.DisplayImage(master.icon, itemIcon);

    Log.d("position", Integer.toString(position));

    button.setTag(position);
    button.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) {
            Toast.makeText(fragment, "test2", Toast.LENGTH_SHORT).show();
            billRows.remove(position);
            notifyDataSetChanged();
        }
    }); 
    return vi;
} 
```

然后是 Fragment 中的代码，回到主活动类中：

```
public static class MyBillFragment extends Fragment {

    private ListView list;
    private static CustomBillAdapterTest adapter;

    public MyBillFragment newInstance() {
        MyBillFragment myBill = new MyBillFragment();
        return myBill;
    }   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }       

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.mybill_frag, container, false);

    }   

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        list = (ListView) this.getActivity().findViewById(R.id.list);
        adapter = new CustomBillAdapterTest(this.getActivity(), R.layout.mybill_frag_listitem, myBill);
        list.setAdapter(adapter);

    }

} 
```

然后还有另一个重复的类，就像那个一样，除了不同的名称，它将一个不同的（但最初是重复的）ArrayList 传递给适配器。

这是问题所在：当我启动它时，两个列表页面都正确显示，但是当我单击一个页面中列表项的按钮时，一个项目从另一页的列表中消失。而且不是同一个项目——总是另一页的最后一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:55:07.217

这就是我认为你正在做的事情：

```
ArrayList<MasterBill> listOne = someFunctionThatReturnsAList();

ArrayList<MasterBill> listTwo = listOne; 
```

如果这是您正在做的事情，那么您正在创建两个指向同一个列表的变量，这将产生您面临的问题。

正确的方法是使用复制构造函数：

```
ArrayList<MasterBill> listTwo = new ArrayList<MasterBill>(listOne); 
```

# c# - 为什么要使用 MVVM？

> ID：12507586
> 
> 赞同：1
> 
> 时间：2012-09-20T07:07:39.897
> 
> 标签：c#, .net, wpf, mvvm

> **可能重复：**
> [为什么要使用 MVVM？](https://stackoverflow.com/questions/2653096/why-use-mvvm)

我正在尝试在我的 WPF 项目中实现 MVVM，但是自从我开始后，我发现很难完成所需的任务。

我将 Caliburn Micro 用于 MVVM，我发现很难从 ViewModel 调用其他其他 ViewModel 属性，并且也无法处理控件的事件，例如 textBox 的 GotFocus。

MVVM 真的比 CodeBehind 好，我没有使用 MVVM 进行测试。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:11:57.223

MVVM 简化了自动化测试，并通过关注点分离帮助您保持代码整洁。

如果您不进行自动化测试，则主要是第二个原因（还有其他次要优势，但这是 IMO 的主要优势）。如果您在使用纯 MVVM 时遇到困难，您可能需要考虑使用混合方法：尽可能多地保留在视图模型中，但如果它使您的代码更具可读性，请不要害怕使用后面的代码。

不要忘记：MVVM 是一个工具，而不是一个目标！它应该让你的生活更轻松，而不是更难。如果为了避免单行 GotFocus 处理程序而必须在两层间接层上编写 50 行样板代码，那么您可能做得过火了。

# c# - 在mvc中上传前如何获取图片源的路径？

> ID：12507588
> 
> 赞同：0
> 
> 时间：2012-09-20T07:07:51.750
> 
> 标签：c#, asp.net-mvc, image

我想从上传图片的地方获取图片的路径...

例如：我的图像在 E:drive 和图像文件夹中，我想在上传图像之前获取该路径

我的控制器代码如下

```
 public ActionResult UploadImage(UploadImageModel model)
    {

        if (ModelState.IsValid)
        {

            Bitmap original = null;
            var name = "newimagefile";
            var errorField = string.Empty;

            if (model.IsUrl)
            {
                errorField = "Url";
                name = GetUrlFileName(model.Url);
                original = GetImageFromUrl(model.Url);
            }
            else if (model.IsFlickr)
            {
                errorField = "Flickr";
                name = GetUrlFileName(model.Flickr);
                original = GetImageFromUrl(model.Flickr);
            }
            else if (model.File != null) 
            {

                errorField = "File";
                name = Path.GetFileNameWithoutExtension(model.File.FileName);
                original = Bitmap.FromStream(model.File.InputStream) as Bitmap;
            }

            if (original != null)
            {
                var img = CreateImage(original, model.X, model.Y, model.Width, model.Height);

                var fn = Server.MapPath("~/Content/img/" + name + ".png");
                img.Save(fn, System.Drawing.Imaging.ImageFormat.Png);

                return RedirectToAction("Index");
            }
            else 
                ModelState.AddModelError(errorField, "Your upload did not seem valid. Please try again using only correct images!");
        }

        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:52:23.110

it is not possible . it is a security threat if the browser sends the full path from client side.

# javascript - 如何在 ajax 调用的参数中发送地图

> ID：12507591
> 
> 赞同：0
> 
> 时间：2012-09-20T07:07:58.510
> 
> 标签：javascript, ajax, extjs

我已经在这样的 java 脚本中构建了一个地图，现在我想在 ajax 请求的参数中发送这个地图，并且应该在服务器端解构它

```
 var map = new Object(); 
    for ( var i = 0; i < arr.length; i++) {
    var dat = arr[i];
    if (dat != null && dat.length > 0){
    var mystr = trim(dat);
    map[mystr] = Ext.getCmp(mystr).getValue();
    }
    }

Ext.Ajax.request({
url : 'Redirector?id=updateClientTeam',
params: {
//Should be able to send my map object here
},

success : function(pResponse) {
}
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:19:37.347

使用 JSON.stringify(map) 转换为 json 以进行 http 传输

# html - 全宽画廊，中间有一张图片

> ID：12507598
> 
> 赞同：0
> 
> 时间：2012-09-20T07:08:15.263
> 
> 标签：html, css

我必须创建一个“无限”宽度的画廊，每张幻灯片都很`940px`宽，网站中心很简单`width:940px;margin: 0 auto 0;`我如何强制**当前**图像正好位于网站的中心？

这是我的尝试：

1

```
 #gallery {
    white-space: nowrap;
    text-align: center;
  } 
```

2

```
 #gallery {
    width: 100%;
    text-align: left;
  } 
```

请注意，我可以用 javascript 解决这个布局问题，我正在寻找一个 **纯**css 的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:56:15.517

这可能会有所帮助——下面的 CSS 将在中心/中间（水平和垂直）放置一个 div，而不是像 align:center 那样水平居中。

[http://jsfiddle.net/fSNJR/](http://jsfiddle.net/fSNJR/)

```
#centerdiv { 
position:absolute; 
top:50%; 
left:50%; 
width:940px; 
height:300px; 
margin-top:-150px; /* Half your height */
margin-left:-470px; /* Half your width */
background:#333; } 
```

# c# - C# Backgroundworker 继续运行 DoWork

> ID：12507602
> 
> 赞同：0
> 
> 时间：2012-09-20T07:08:36.090
> 
> 标签：c#

下面是我的编码：

```
 Form2 msgForm;
    private void button3_Click_1(object sender, EventArgs e)
    {

        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = true;
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

        msgForm = new Form2();

        try
        {
            bw.RunWorkerAsync();

            msgForm.ShowDialog();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        // Coding that transmit protocol and will last around 2 minutes.
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        msgForm.Close();
    } 
```

每次单击按钮以传输持续约 2 分钟的协议时，我都会使用后台工作程序方法。在传输过程中，From2 将显示“请稍候”。

但是我在使用这种编码时遇到了一些问题。问题是，当我第一次单击按钮时，它会传输一次协议。之后我再次单击，这是第二次，它传输了两次协议。之后我再次点击，这是第三次，它传输协议3次......等等。每次单击按钮时，传输协议的次数都会增加。

每次我单击按钮时，它不是只会运行一次 void bw_DoWork 中的编码吗？

我的编码有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T07:13:47.783

每次单击时，您都会附加一个*额外的处理程序，然后它会**与您之前添加的所有内容一起*运行，并保持在原处（因为对象仍然存在，您正在重新使用它）。

要解决此问题，您需要：

*   将后台工作者的声明移到方法中（所以每次都是新的，只有一个`DoWork`处理程序

像这样：

```
private void button3_Click_1(object sender, EventArgs e)
{
    BackgroundWorker bw = new BackgroundWorker();
    // rest of your code
} 
```

*   在类的构造函数中移动`.DoWork += ...`附加处理程序的

这主要取决于您是否在其他地方使用该工人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:15:28.813

看起来每次点击都会有一个新的工作人员开始。为避免这种行为，请在再次启动之前检查工作人员是否正忙。

```
try
{
    if (!bw.IsBusy)
        bw.RunWorkerAsync();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

并且您可以在后台工作人员执行其工作时禁用该按钮，`button3.Enabled = false;`然后在该方法中重新启用它`bw_RunWorkerCompleted`，让用户了解他必须等待并且在该过程完成之前不能再次单击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:18:12.097

首先确保您的列表/收藏在传输代码之前是清晰的。然后在你的源代码中使用 BreakPoint 并记住你的 BackgroundWorker 不能运行两次或更多次，因为你使用了 ShowDialog。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:47:29.507

检查工人是否忙：

```
 if (!bw.IsBusy)         
    bw.RunWorkerAsync(); 
```

在执行过程时，我还将禁用该按钮并将文本更改为例如“正在运行”。

使用 bw_RunWorkerCompleted 方法事件调用，然后重新启用按钮并更改文本。此方法与 UI 在同一线程上运行，因此不存在跨线程问题。

在您的设计中，为什么要显示“请稍候”通知的另一种形式？我建议在异步进程开始之前更新现有表单上的标签（因此不是跨线程 UI 问题），或者如果您需要在之后更新，则可以使用以下内容：

```
lblNotify.Invoke(new Action(() => lblNotify.Text = @"Please wait")); 
```

然后，上面将允许您在主线程上运行您的请求。

# java - 嵌套 Java 内部类

> ID：12507603
> 
> 赞同：4
> 
> 时间：2012-09-20T07:08:35.740
> 
> 标签：java, class, nested

如果 C 类嵌套在 B 类中，而 B 类又嵌套在 A 类中，我该如何实例化它？

```
class A {
    class B {
        class C {
            ..............
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:29:30.590

要实例化`C`，您需要一个 的封闭实例`B`，而后者又需要一个 的封闭实例`A`。

```
A someA = new A();
B someB = a.new B();
C someC = b.new C(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:35:24.223

像这样的事情应该这样做

```
A.B.C c = new A().new B().new C(); 
```

如果需要，您可以连接 new() 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:47:47.530

你可以像这样实例化。

```
A a = new A();
A.B b = a.new B();
A.B.C c = b.new C(); 
```

这有效..

```
public class InnerClassTest1 {
    public static void main(String[] args) {
        A a = new A();
        A.B b = a.new B();
        A.B.C c = b.new C();
        c.setValue(100);
        System.out.println("Innermost value " + c.getValue());
    }
}
class A {
    class B {
        class C {
            int value;

            public int getValue() {
                return value;
            }

            public void setValue(int value) {
                this.value = value;
            }

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:52:07.280

如果类在功能上不依赖于嵌套，即`class C`不引用或的方法和/或字段，`class B`那么`class A`您可以将内部类设为静态。

```
class A {
    static class B {
        static class C {
            ...
        }
    }
} 
```

然后，您可以从任何您喜欢的地方创建它们：

```
A.B.C c = new A.B.C (); 
```

# android - 明显存在时无法实例化应用程序

> ID：12507607
> 
> 赞同：0
> 
> 时间：2012-09-20T07:08:44.277
> 
> 标签：android

自从我开始开发应用程序以来，我没有收到任何“无法实例化应用程序”异常，但是，在启动之后，已经有相当多的错误报告说明了这个异常。

我的应用程序使用从 Application 继承的自定义 MyApplication 类，清单的记录看起来像`.application.MyApplication`我仍然无法在 2.3 和 4.0 上重现相同的异常。你能建议那里可能发生什么吗？

**UPD**

![在此处输入图像描述](../Images/b22aa924d12ea5873507c305ad8dd0e4.png)

谢谢。

# objective-c - Coredata 预取不起作用

> ID：12507613
> 
> 赞同：1
> 
> 时间：2012-09-20T07:09:02.243
> 
> 标签：objective-c, core-data, xcode4.2

我在 coredata 有很多实体，当我想保存一个新数据时，我已经在 coreData 中预取了所有数据，但是当我想保存它时，应用程序仍然调用 coredata.. 我可以让它在内存中调用吗？因为coredata已经预取了..

然后，我有一个有关系的实体，但是当我 NSLog 那个 obj 时，关系是错误的，我怎样才能将它设为 nil 或默认为空数组？

例如，一个企业可能有多个 URL。

有时 URL 的数量为 0

根据发送的数据，这就是 bizs 的样子

```
2012-09-20 13:53:48.118 BadgerNew[2396:4303] <0x3ae2f0 GrabClass.m:(494)> BusinessToSave: <Business: 0x3e8700> (entity: Business; id: 0x37c430 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Business/p42> ; data: {
Aliases = "<relationship fault: 0xe84f510 'Aliases'>";
Bookmark = 0;
Building = "0x37c430 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Business/p42>";
City = "0x319fc0 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/City/p3>";
Distance = "324.6795047800711";
DistanceGrouping = "0x396960 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/DistanceGrouping/p1>";
Districts = "<relationship fault: 0xe850ec0 'Districts'>";
Email = nil;
ID = "bakmi-gm__-6.19_106.78";
Images = "<relationship fault: 0xe851210 'Images'>";
InBuildingAddress = nil;
LatitudeLongitude = "0x316600 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/LatitudeLongitude/p73>";
Like = 0;
OpeningHour = nil;
PeopleCount = 0;
Phones =     (
    "0xe84cfd0 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Phone/p12>"
);
Price = 0;
Promotions = "<relationship fault: 0xe851330 'Promotions'>";
Rating = "0x319540 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Rating/p49>";
RatingGroup = "0x319530 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/RatingGroup/p67>";
Reviews = "<relationship fault: 0xe851250 'Reviews'>";
Street = "Jl.Arjuna Utara No.66";
Tags =     (
    "0x303440 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Tag/p43>",
    "0x303480 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Tag/p44>"
);
Tenants =     (
    "0x37c430 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/Business/p42>"
);
TimeStamp = nil;
Title = "Bakmi Gm";
URLs =     (
    "0xe845980 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/URL/p39>",
    "0xe845990 <x-coredata://1D7BC079-CFF6-417B-8976-0A0BA03D4908/URL/p52>"
);
Website = nil;
Zip = nil;
checkIn = nil;
pinAndLineNumber = 3;
prominent = "36.5";
timeLike = nil;
updated = 1;
})
2012-09-20 13:53:48.180 BadgerNew[2396:4303] <0x3ae2f0 GrabClass.m:(495)> dict: {
    Aliases = "<null>";
    BizMenus = "<null>";
    Brochures = "<null>";
    Building = "<null>";
    BuildingID = "<null>";
    Checkin = "<null>";
    City = Jakarta;
    CountViews = "<null>";
    Country = Indonesia;
    CurrentlyWorkedURL = "<null>";
    DistanceFromGoogleAddress = "<null>";
    Districts = "<null>";
    Email = "<null>";
    ID = "bakmi-gm__-6.19_106.78";
    InBuildingAddress = "<null>";
    Latitude = "-6.1878996765078";
    Longitude = "106.77542964793";
    LongitudeLatitudeFromGoogle = "<null>";
    Note = "<null>";
    PeopleCount = 6;
    Phones =     (
        "+62(21)5655008"
    );
    Price = "<null>";
    Prominent = "36.5";
    Promotions = "<null>";
    "Rating Star" = 0;
    "Rating Weight" = 0;
    Reviews = "<null>";
    SomethingWrong = "<null>";
    Street = "Jl.Arjuna Utara No.66";
    StreetAdditional = "<null>";
    Tags =     (
        "Fast Food",
        "Restaurant Chinese"
    );
    Title = "Bakmi Gm";
    URLs =     (
        "http://www.urbanesia.com/profile/bakmi-gm-8/",
        "https://foursquare.com/v/bakmi-gm/4d6b93257b7d8eec1dc584d0"
    );
    Website = "<null>";
    ZIP = "<null>";
    imageUrls = "<null>";
    indexWords =     (
        fast,
        food,
        restaurant,
        chinese,
        bakmi,
        gm
    );
    openingHour = "<null>";
} 
```

不仅如此，即使我已经将数据预取到内存中调用请求给我这个：

```
2012-09-20 13:59:00.135 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZBOOKMARK, t0.ZDISTANCE, t0.ZEMAIL, t0.ZID, t0.ZINBUILDINGADDRESS, t0.ZLIKE, t0.ZPEOPLECOUNT, t0.ZPRICE, t0.ZSTREET, t0.ZTIMESTAMP, t0.ZTITLE, t0.ZWEBSITE, t0.ZZIP, t0.ZCHECKIN, t0.ZPINANDLINENUMBER, t0.ZPROMINENT, t0.ZTIMELIKE, t0.ZUPDATED, t0.ZBUILDING, t0.ZCITY, t0.ZDISTANCEGROUPING, t0.ZLATITUDELONGITUDE, t0.ZOPENINGHOUR, t0.ZRATING, t0.ZRATINGGROUP FROM ZBUSINESS t0 WHERE  t0.ZID = ? 
2012-09-20 13:59:00.143 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0087s
2012-09-20 13:59:00.149 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZLATITUDE, t0.ZLONGITUDE, t0.ZBUSINESS, t0.ZPLACECACHE FROM ZLATITUDELONGITUDE t0 WHERE  t0.ZBUSINESS IN  (?)  
2012-09-20 13:59:00.154 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0048s
2012-09-20 13:59:00.158 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0085s for 1 rows.
2012-09-20 13:59:00.161 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'LatitudeLongitude'.  Got 1 rows.
2012-09-20 13:59:00.166 BadgerNew[2410:4403] CoreData: sql: SELECT t0.Z_PK, t1.Z_3BUSINESS FROM Z_1BUSINESS t1 JOIN ZALIAS t0 ON t0.Z_PK = t1.Z_1ALIASES WHERE t1.Z_3BUSINESS IN ( 42 )  ORDER BY t1.Z_3BUSINESS ASC
2012-09-20 13:59:00.171 BadgerNew[2410:4403] CoreData: annotation: sql execution time: 0.0046s
2012-09-20 13:59:00.174 BadgerNew[2410:4403] CoreData: annotation: Prefetching from join table for many-to-many relationship "Aliases" from database.  Got 0 rows
2012-09-20 13:59:00.179 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZID, t0.ZIMAGETYPE, t0.ZURL, t0.ZBUSINESS FROM ZIMAGE t0 WHERE  t0.ZBUSINESS IN  (?)  ORDER BY t0.ZBUSINESS
2012-09-20 13:59:00.184 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0049s
2012-09-20 13:59:00.187 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0083s for 0 rows.
2012-09-20 13:59:00.190 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Images'.  Got 0 rows.
2012-09-20 13:59:00.195 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZBOOKMARK, t0.ZDISTANCE, t0.ZEMAIL, t0.ZID, t0.ZINBUILDINGADDRESS, t0.ZLIKE, t0.ZPEOPLECOUNT, t0.ZPRICE, t0.ZSTREET, t0.ZTIMESTAMP, t0.ZTITLE, t0.ZWEBSITE, t0.ZZIP, t0.ZCHECKIN, t0.ZPINANDLINENUMBER, t0.ZPROMINENT, t0.ZTIMELIKE, t0.ZUPDATED, t0.ZBUILDING, t0.ZCITY, t0.ZDISTANCEGROUPING, t0.ZLATITUDELONGITUDE, t0.ZOPENINGHOUR, t0.ZRATING, t0.ZRATINGGROUP FROM ZBUSINESS t0 WHERE  t0.Z_PK IN  (?)  
2012-09-20 13:59:00.201 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0060s
2012-09-20 13:59:00.205 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0096s for 1 rows.
2012-09-20 13:59:00.208 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Building'.  Got 1 rows.
2012-09-20 13:59:00.212 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZNAME, t0.ZCOUNTRY FROM ZCITY t0 WHERE  t0.Z_PK IN  (?)  
2012-09-20 13:59:00.217 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0046s
2012-09-20 13:59:00.220 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0082s for 1 rows.
2012-09-20 13:59:00.223 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'City'.  Got 1 rows.
2012-09-20 13:59:00.228 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDESCRIPTION, t0.ZFROMDATE, t0.ZID, t0.ZTITLE, t0.ZTODATE, t0.ZBUSINESS FROM ZPROMOTION t0 WHERE  t0.ZBUSINESS IN  (?)  ORDER BY t0.ZBUSINESS
2012-09-20 13:59:00.233 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0051s
2012-09-20 13:59:00.237 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0091s for 0 rows.
2012-09-20 13:59:00.241 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Promotions'.  Got 0 rows.
2012-09-20 13:59:00.246 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDESCRIPTION FROM ZRATINGGROUP t0 WHERE  t0.Z_PK IN  (?)  
2012-09-20 13:59:00.252 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0051s
2012-09-20 13:59:00.256 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0092s for 1 rows.
2012-09-20 13:59:00.259 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'RatingGroup'.  Got 1 rows.
2012-09-20 13:59:00.265 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDATE, t0.ZDESCRIPTION, t0.ZID, t0.ZRATING, t0.ZTITLE, t0.ZURL, t0.ZUSERNAME, t0.ZWEBSITE, t0.ZBUSINESS FROM ZREVIEW t0 WHERE  t0.ZBUSINESS IN  (?)  ORDER BY t0.ZBUSINESS
2012-09-20 13:59:00.271 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0060s
2012-09-20 13:59:00.275 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0101s for 0 rows.
2012-09-20 13:59:00.278 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Reviews'.  Got 0 rows.
2012-09-20 13:59:00.284 BadgerNew[2410:4403] CoreData: sql: SELECT t0.Z_PK, t1.Z_3BUSINESS2 FROM Z_3DISTRICTS t1 JOIN ZDISTRICT t0 ON t0.Z_PK = t1.Z_8DISTRICTS WHERE t1.Z_3BUSINESS2 IN ( 42 )  ORDER BY t1.Z_3BUSINESS2 ASC
2012-09-20 13:59:00.290 BadgerNew[2410:4403] CoreData: annotation: sql execution time: 0.0055s
2012-09-20 13:59:00.294 BadgerNew[2410:4403] CoreData: annotation: Prefetching from join table for many-to-many relationship "Districts" from database.  Got 0 rows
2012-09-20 13:59:00.388 BadgerNew[2410:4403] CoreData: sql: SELECT t0.Z_PK, t1.Z_3BUSINESS1 FROM Z_3TAGS t1 JOIN ZTAG t0 ON t0.Z_PK = t1.Z_20TAGS WHERE t1.Z_3BUSINESS1 IN ( 42 )  ORDER BY t1.Z_3BUSINESS1 ASC
2012-09-20 13:59:00.394 BadgerNew[2410:4403] CoreData: annotation: sql execution time: 0.0065s
2012-09-20 13:59:00.551 BadgerNew[2410:707] Reachability Flag Status:-R -----l- networkStatusForFlags
2012-09-20 13:59:00.398 BadgerNew[2410:4403] CoreData: annotation: Prefetching from join table for many-to-many relationship "Tags" from database.  Got 2 rows
2012-09-20 13:59:00.565 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZNAME FROM ZTAG t0 WHERE  t0.Z_PK IN  (?,?)  
2012-09-20 13:59:00.570 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0047s
2012-09-20 13:59:00.572 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0065s for 2 rows.
2012-09-20 13:59:00.739 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Tags'.  Got 2 rows.
2012-09-20 13:59:00.744 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDESCRIPTION, t0.ZID FROM ZDISTANCEGROUPING t0 WHERE  t0.Z_PK IN  (?)  
2012-09-20 13:59:00.753 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0092s
2012-09-20 13:59:00.758 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0142s for 1 rows.
2012-09-20 13:59:00.761 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'DistanceGrouping'.  Got 1 rows.
2012-09-20 13:59:00.766 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZNAME, t0.ZBUSINESS FROM ZURL t0 WHERE  t0.ZBUSINESS IN  (?)  ORDER BY t0.ZBUSINESS
2012-09-20 13:59:00.774 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0073s
2012-09-20 13:59:00.800 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0337s for 2 rows.
2012-09-20 13:59:00.804 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'URLs'.  Got 2 rows.
2012-09-20 13:59:00.809 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZSTRINGDESCRIPTION, t0.ZBUSINESS FROM ZOPENINGHOUR t0 WHERE  t0.ZBUSINESS IN  (?)  
2012-09-20 13:59:00.814 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0048s
2012-09-20 13:59:00.817 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0082s for 0 rows.
2012-09-20 13:59:00.832 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'OpeningHour'.  Got 0 rows.
2012-09-20 13:59:00.837 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZBOOKMARK, t0.ZDISTANCE, t0.ZEMAIL, t0.ZID, t0.ZINBUILDINGADDRESS, t0.ZLIKE, t0.ZPEOPLECOUNT, t0.ZPRICE, t0.ZSTREET, t0.ZTIMESTAMP, t0.ZTITLE, t0.ZWEBSITE, t0.ZZIP, t0.ZCHECKIN, t0.ZPINANDLINENUMBER, t0.ZPROMINENT, t0.ZTIMELIKE, t0.ZUPDATED, t0.ZBUILDING, t0.ZCITY, t0.ZDISTANCEGROUPING, t0.ZLATITUDELONGITUDE, t0.ZOPENINGHOUR, t0.ZRATING, t0.ZRATINGGROUP FROM ZBUSINESS t0 WHERE  t0.ZBUILDING IN  (?)  ORDER BY t0.ZBUILDING
2012-09-20 13:59:00.845 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0075s
2012-09-20 13:59:00.849 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0116s for 1 rows.
2012-09-20 13:59:00.852 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Tenants'.  Got 1 rows.
2012-09-20 13:59:00.857 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZSTARS, t0.ZWEIGHT, t0.ZBUSINESS FROM ZRATING t0 WHERE  t0.ZBUSINESS IN  (?)  
2012-09-20 13:59:00.927 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0692s
2012-09-20 13:59:00.931 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0737s for 1 rows.
2012-09-20 13:59:00.934 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Rating'.  Got 1 rows.
2012-09-20 13:59:00.939 BadgerNew[2410:4403] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZID, t0.ZTHEPHONE, t0.ZBUSINESS FROM ZPHONE t0 WHERE  t0.ZBUSINESS IN  (?)  ORDER BY t0.ZBUSINESS
2012-09-20 13:59:00.945 BadgerNew[2410:4403] CoreData: annotation: sql connection fetch time: 0.0052s
2012-09-20 13:59:00.949 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.0099s for 1 rows.
2012-09-20 13:59:00.953 BadgerNew[2410:4403] CoreData: annotation: Prefetching with key 'Phones'.  Got 1 rows.
2012-09-20 13:59:00.960 BadgerNew[2410:4403] CoreData: annotation: total fetch execution time: 0.8252s for 1 rows. 
```

此外，如果我使用附加参数 -com.apple.CoreData.SQLDebug 1 运行程序

Coredata 仍然会偶尔执行一次，这违背了预取的全部目的

# android - Android Loader 不会在屏幕旋转时触发回调

> ID：12507617
> 
> 赞同：14
> 
> 时间：2012-09-20T07:09:15.243
> 
> 标签：android, android-loadermanager, android-loader

我正在使用一个`AsyncTaskLoader`. 我有一个已经实现的活动`LoaderCallbacks`（支持库）。

我已调试断点并放入日志，加载程序提供结果，但是第二次`onLoadFinished`未触发回调。奇怪的是 - 当我再次旋转时它起作用了，当我回到它时，我开始的任何方向都会得到回调。

在我的活动中`onResume`：

```
LoaderManager lm = getSupportLoaderManager();
Loader loader = lm.initLoader(0, null, new LoaderManager.LoaderCallbacks<String>() {

        @Override
        public Loader<String> onCreateLoader(int i, Bundle bundle) {
            Loader<String> loader = new TestLoader(MainActivity.this);
            return loader;
        }

        @Override
        public void onLoadFinished(Loader<String> stringLoader, String s) {
            Log.d(Application.TAG, "OnLoadFinished " + s);
            doStuff(s);
        }

        @Override
        public void onLoaderReset(Loader<String> stringLoader) {
            // NOP
        }
    }); 
```

在我的装载机中：

```
public class TestLoader extends AsyncTaskLoader<String> {
    private String mData;

    public TestLoader(Context context) {
        super(context);
    }

    // This get's called after a loader is initialized or a loader 
    // that is alive still is reset
    @Override
    public void onStartLoading() {
        if (mData != null) { // Have our data loaded, just deliver it!
            deliverResult(mData);
        }
        if (takeContentChanged() || mData == null) {
            forceLoad();
        }
    }

    // This is called when an Activity or Fragment requests a loader 
    // to be reset because they want new data
    @Override
    public void onReset() {
        mData = null;
        // Ensure that the old task is cancelled if it was running
        // We do NOT have to call forceLoad here because onStartLoading 
        // will get called after this
        cancelLoad();
    }

    // Here we just want to store our own data we got and reset our boolean
    @Override
    public void deliverResult(String data) {
        Log.d(Application.TAG, "deliverResult " + data);
        mData = data;
        super.deliverResult(mData);
    }

    @Override
    public String loadInBackground() {
       // returns content from a content provider ... 
    }
} 
```

对此真的感到困惑，我是Android新手，所以也许这对其他人来说很明显:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-24T09:08:24.917

如果它是一个或如果它是一个，你至少必须简单地调用`getSupportLoaderManager()`/ `getLoaderManager()`。实际可以在其他地方。否则加载器将处于停止状态，即使完成加载也不会传递结果。我怀疑这是因为加载器管理器不会将旧加载器重新附加到新加载器，除非在 new中进行上述调用。`onCreate()``Activity``onActivityCreated()``Fragment``initLoader()``Activity``Activity``onCreate()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:38:40.350

你有

```
Loader loader = lm.initLoader(...) 
```

你应该有

```
Loader loader = new LoaderManager.LoaderCallbacks(...) {...} 
```

在你的`onResume()`

```
this.getLoaderManager().restartLoader(0, null, this.loader); 
```

请参阅[加载程序文档](http://developer.android.com/guide/components/loaders.html)。

# sql-server - 不同数据库上的实体框架

> ID：12507618
> 
> 赞同：0
> 
> 时间：2012-09-20T07:09:20.870
> 
> 标签：sql-server, entity-framework, database-design, database-migration

我有一个使用实体框架的项目。我们用实体框架映射一个 mssql 数据库。现在我们要将 mssql db 更改为 oracle db。但我不想在实体框架中更改我的 db 模型。两个 db 是相同的表列等。唯一的区别是它们的技术（mssql 和 oracle）和一些列数据类型。在 mssql 中，我们在 oracle 中使用 bigint 而不是 number。是否可以在实体框架上使用具有相同表的不同数据库的相同模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:59:45.793

带有 EF 的提供程序模型允许支持各种数据库。我相信这包括甲骨文，但我个人从未使用过它。

我可以告诉你，在数据库提供者之间切换时，连接字符串通常是唯一需要的更改。我认为您必须在数据库中更改任何内容的唯一一次是如果提供程序不支持您正在使用的特定操作。

# eclipse-plugin - AnnotationModel 中的竞争条件？Reconciler 中丢失的错误注释

> ID：12507620
> 
> 赞同：4
> 
> 时间：2012-09-20T07:09:29.047
> 
> 标签：eclipse-plugin, jface

我有一个 Eclipse 自定义编辑器，并且我实现了“在您键入时报告错误”，但是我的错误曲线（使用 JFace 注释）不时显示或在它们应该被删除后徘徊。

我正在使用`MonoReconciler`我的`IReconcilingStrategy`. 在此`reconcile`步骤中，我调用`annotationModel.replaceAnnotations`以删除旧错误并添加新错误。大多数时候这工作正常。时不时会丢失更新，我注意到以下内容：

*   左侧标尺上的红色印记消失，但红色下划线保留
*   在我输入的下一个字符上，下划线消失

我在调试器中验证了注释是正确计算的。下划线在输入字符后立即消失，而*不是*在协调器延迟 500 毫秒后消失。它看起来像丢失的 UI 更新/重绘。

某处必须存在竞争条件（协调器在自己的线程中运行）。我究竟做错了什么？我找不到有关此用例的任何文档。

编辑：要重现，请检查[scala-worksheet](http://github.com/scala-ide/scala-worksheet)并创建一个新的。类型

```
 object Test {
   val m = Map( 't' -> 1 )
 } 
```

现在编辑箭头：删除`>`. 下划线不见了。键入一个空格，它会返回。添加回来，下划线仍然存在，直到您键入另一个空格。

我通过拜访下属来*解决*它，但在我看来这应该没有必要。我想了解使用编辑器注释的正确方法是什么。`invalidateTextPresentation``SourceViewer`

PS。[在此截屏视频](http://www.youtube.com/watch?v=BYPpQhi-o9o&feature=youtu.be)中也可以看到丢失的更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:44:48.543

很难从远处判断，通常在 eclipse 中，任何影响 ui 的更改都应该在 ui 线程上执行（并且 eclipse 不会总是对此发出警告）。通常，您使用 Display.getDefault().asyncExec(...) 在 ui 线程上执行某些操作，但您可能已经知道这一点。可能会发生 2 个排队的更改导致竞争。

（我已经为我工作的公司 Sigasi 实施了几次语义突出显示、错误突出显示等。如果你能指出你的实施，我可能会找出问题所在。）

# authentication - 如何在 jive 论坛中提供自定义身份验证？

> ID：12507623
> 
> 赞同：0
> 
> 时间：2012-09-20T07:09:37.153
> 
> 标签：authentication, forum

我正在使用 jive 5.0 论坛。我有自己的用户表，其中包含用户 ID 和密码。我如何使用它为 jive 提供身份验证？密码使用 sha-1 散列技术加密。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:27:40.707

我自己找到了答案。有几个类，例如 CustomAuthFactory CustomAuthToken CustomUser CustomUserManager ，在 Jive 论坛的文档中进行了解释。

# java - 什么可以使 Eclipse 调试器跳过“while”内容以打破内部开关的“默认”？

> ID：12507633
> 
> 赞同：1
> 
> 时间：2012-09-20T07:10:17.037
> 
> 标签：java, eclipse, debugging, while-loop, switch-statement

在一个java项目中，我有以下代码：

```
public static <return> method(<parameters>){
1   <any method call>
2   while( <conditions> ){
3       <any method call>
4       switch(<enum or integer>){
5       case 0:
6       <any method call>
7           break;
8       case 1:
9       <any method call>
10          break;
11      case 3:
12      <any method call>
13          break;
14      default:
15      <any method call>
16          break;
17      }
18   <any method call>
19   }
  } 
```

用调试器单步跳过的时候，我第一次进入while，就从2跳到16。

我一直在尝试用剥离的代码复制它，但没有成功，并找出导致这种奇怪行为的部分，但直到现在，才发现另一个奇怪的事情：

当我在 1 处声明一个虚拟变量并在 18 处修改它（在 3 处不起作用）时，行为是预期的（在 2 之后输入第 3 行）

编辑：

附加的[java文件](https://docs.google.com/open?id=0B8_EhCA0YWHCNUd1OHQtM1UyNnc)和 [解密的代码](https://docs.google.com/open?id=0B8_EhCA0YWHCYWxnRmFUODFBOHc)

# snmp - 如何从 MIB 文件中获取 OID？

> ID：12507634
> 
> 赞同：14
> 
> 时间：2012-09-20T07:10:16.397
> 
> 标签：snmp, net-snmp, mib

我想从经理拥有的 MIB 文件中读取所有对象。

我开发了一种工具来从启用了 SNMP 的代理中获取一些数据。我想通过显示经理的 MIB 文件中的所有 OID 来增强该工具。

我正在使用 NET-SNMP 库。

我看到了以下内容：

```
/usr/local/share/snmp/mibs/ 
```

文件夹，它包含许多 MIB 文件，但我怎样才能形成它拥有的 OID 列表？

我浏览了 MIB 并查看了结构，但是如何获取 MIB 文件中提到的每个对象的 OID？

我想按如下方式列出所有 OID：

1.  `SNMPv2-MIB::sysDescr.0 = .1.3.6.1.2.1.1.1.0`
2.  `SNMPv2-MIB::sysObjectID.0 = .1.3.6.1.2.1.1.2.0` ... ETC

我想扫描所有 MIB 文件并从文件中找到所有 OID。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T10:24:41.447

使用库中的`snmptranslate`-command `net-snmp`。尝试使用以下参数：

```
-M "directory containing your MIB file"
-m ALL
-Pu
-Tso 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-14T13:32:31.870

在遇到一些问题后，我设法使用以下命令生成了 OID。

```
snmptranslate -Pu -Tz -M ~/.snmp/mibs:/usr/share/snmp/mibs:/usr/share/snmp/mibs/iana:/usr/share/snmp/mibs/ietf:/usr/share/mibs/site:/usr/share/snmp/mibs:/usr/share/mibs/iana:/usr/share/mibs/ietf:/usr/share/mibs/netsnmp:`pwd` -m module_name_NOT_file_name > module_name.oid 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T13:05:44.957

要从正在运行的服务器中提取`OID`s，`SNMP`您可能希望`snmpwalk`使用该`-Ci`选项使用该工具。该工具附带`Net-SNMP`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T23:08:05.113

其他两个 SO QA 展示了如何在不走运行系统的情况下做到这一点：

*   “[解析 MIB 文件并从中提取陷阱相关信息的 net-snmp 示例代码](https://stackoverflow.com/questions/7330168/net-snmp-sample-code-to-parse-mib-file-and-extract-trap-related-information-from)”：[答案](https://stackoverflow.com/a/7412790/362754)显示了基于 Net-SNMP 库顶部的 C 解析器的顶级框架。

*   " [Get oid's type (syntax) from MIB using Net-SNMP API](https://stackoverflow.com/questions/4786682/get-oids-type-syntax-from-mib-using-net-snmp-api) ": 这是处理 OID 的特定函数。

这只是起点。从那里开始有很多编码。

更新：另一个不错的工具是封装在 SNMP::MIB::Compiler 中的 perl SNMP 编译器。使用 perl 中的脚本，您可以将所有 MIB 元素/组件拉入内部数据结构，您可以从那里选择任何信息，方法是查看结构树或转储树并对转储进行后解析。

# ruby-on-rails-3 - 如何自定义将带有图像的分页链接

> ID：12507639
> 
> 赞同：0
> 
> 时间：2012-09-20T07:10:30.743
> 
> 标签：ruby-on-rails-3, will-paginate

我想自定义将分页链接到虚线图像而不是数字 1、2、3。我尝试自定义分页类的 css，但没有成功。粘贴在链接格式下方。

（现有）上一个 1 2 3 下一个

（需要执行）。. . **.** . . .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:00:19.663

我知道这个问题很老，但也许你仍然想要一个答案。这可能是一个很好的起点。使用以下内容创建一个帮助程序，例如 app/helpers/will_paginate_helper.rb：

```
module WillPaginateHelper
  class DottedLinkRenderer < WillPaginate::ActionView::LinkRenderer
    protected
    def link(text, target, attributes = {})
      if target.is_a? Fixnum
        attributes[:rel] = rel_value(target)
        target = url(target)
      end
      attributes[:href] = target
      tag(:a, ".", attributes)
    end
  end

  def dotted_will_paginate(collection, options = {})
    will_paginate(collection, options.merge(:renderer => WillPaginateHelper::DottedLinkRenderer))
  end
end 
```

然后在您看来使用：

```
<%= dotted_will_paginate @posts %> 
```

这基本上是基于[原始链接渲染](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/view_helpers/link_renderer.rb)器的自定义链接渲染器。

# macos - 用于 Vim 的 Command-t 插件直接忽略用户文件夹中的文件夹

> ID：12507641
> 
> 赞同：1
> 
> 时间：2012-09-20T07:10:32.100
> 
> 标签：macos, vim, plugins, macvim

我刚刚在 MacVim、OS X Lion 上安装了 Command-t。它可以工作，但由于某种原因，它不会列出用户文件夹上的任何文件夹，除了 OS X Lion 的默认值。我已经尝试过：CommandTflush，重新启动 MacVim 并重新安装插件。

# java - 使用扫描仪时忽略连字符

> ID：12507642
> 
> 赞同：1
> 
> 时间：2012-09-20T07:10:38.090
> 
> 标签：java, java.util.scanner

使用扫描仪时有什么简单的方法可以忽略连字符吗？我有一个程序可以让您购买一个区域（2D 阵列），所以如果用户想购买区域 3-6，我希望扫描仪将数字放在连字符之前的行中，然后将数字放在列中。有什么简单的方法可以做到这一点？

```
String[][] buyer = new String[10][15];
int row;
int column; 
System.out.print("Specify which area you want to buy: ");
row = scan.nextInt();
column = scan.nextInt();

String name;
System.out.print("Name of the buyer: ");
name = scan.nextLine();
buyer[row][colum] = name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:15:38.273

如果您的输入始终采用这种格式（num1-num2），那么您可以使用：

```
String area = scan.next();
StringTokenizer st = new StringTokenizer(area);
st.split("-");
int row = Integer.parse(st.nextToken());
int col = Integer.parse(st.nextToken()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:18:45.117

就我个人而言，我会将它作为字符串读取，然后您可以使用`String.split()`将其拆分为两个值，然后您可以将其解析为整数。不过可能还有其他选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:21:56.843

扫描仪有坏的一面，也有好的一面，坏的一面是如果你不知道下一个字符是什么，这不起作用。

您可以使用[`Scanner.hasNextInt()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28%29)，如果不是这样，则读取 char for char to`hasNextInt`是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:23:37.907

我认为您可以使用[Scanner.skip](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#skip%28java.lang.String%29)

```
row = scan.nextInt();
scan.skip("-");
column = scan.nextInt(); 
```

# jquery - Struts2 - datepicker 客户端验证两次返回相同的错误消息

> ID：12507644
> 
> 赞同：1
> 
> 时间：2012-09-20T07:10:43.480
> 
> 标签：jquery, validation, struts2, datepicker

我使用带有 datepicker 的 struts2 表单：

```
<s:form action="%{#parameters.myAction}" namespace="/" method="post" name="myForm" enctype="multipart/form-data" focusElement="dealTitleId" validate="true">
...
<sj:datepicker name="dealDisplayEnd" required="true" key="dealDisplayEnd-label" displayFormat="dd-mm-yy" readonly="true" minDate="0"/> 
```

请注意`validate="true"`启用客户端验证的选项（我需要它以防止在发生某些错误时丢失有关文件上传的其他一些信息）。

然后还为它创建了 XML：

```
<field name="dealDisplayEnd">
        <field-validator type="required">
             <message key="error.dealDisplayEnd.empty"/>
        </field-validator>
  </field> 
```

一切正常，除了错误重复两次：

![错误显示两次](../Images/dfaa9a033e5260f5291f7cd53b08df0e.png)

查看网页源代码，我看到验证脚本生成了两次：

```
 // field name: dealDisplayEnd
        // validator name: required
        if (form.elements['dealDisplayEnd']) {
            field = form.elements['dealDisplayEnd'];
            var error = "Deal display end date must be provided!";
            if (field.value == "") {
                addError(field, error);
                errors = true;

            }
        }
        // field name: dealDisplayEnd
        // validator name: required
        if (form.elements['dealDisplayEnd']) {
            field = form.elements['dealDisplayEnd'];
            var error = "Deal display end date must be provided!";
            if (field.value == "") {
                addError(field, error);
                errors = true;

            }
        } 
```

这是struts2的错误吗？还是我做错了什么？是因为我正在使用 datepicker 和客户端验证吗？我正在使用 struts2-core-2.3.4.jar 和 struts2-jquery-plugin-3.3.3.jar。有没有一种简单的方法可以修补（我找不到生成它的地方）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:17:17.153

是的，你是对的，这似乎是来自`struts2-jquery-plugin`. 这里有一些参考：

[参考文献 1](http://code.google.com/p/struts2-jquery/issues/detail?id=626)
[参考文献 2](https://stackoverflow.com/questions/11744773/html-form-being-submitted-twice-via-submit-click-trigger)

作者的建议`struts2-jquery-plugin`：

`In this case you should not set validate="true". Implement you own validation handling in an own onBeforeTopic. How it works can you see in the struts2 jquery sources.`

我猜你正在使用，如果你不使用该属性，`<sj:submit/>`你可以尝试使用，它可能会解决你的问题。有更多的方法可以解决这个问题，你自己试试吧，如果你不能完成，请告诉我们。`<s:submit/>``targets`

# android - 如何在marker-qualcomm SDK上显示AR动画？

> ID：12507648
> 
> 赞同：0
> 
> 时间：2012-09-20T07:11:01.913
> 
> 标签：android, image-processing, opengl-es, augmented-reality

我正在尝试用于 AR 和 Marker 技术的 Qualcomm SDK (vuforia)。我下载了示例标记识别 (ImageTargets) 应用程序，并能够通过我的自定义标记和 AR 图像创建一个示例应用程序来替换标记。

现在我想在相机面对标记时显示动画（swf 或 gif 或任何其他格式），而不是 2D 或 3D 图像。例如，当标记说美元钞票被聚焦时，我应该能够显示动画（目前我显示 2D 或 3d 图像）。我无法在文档或 qualcomm 上引用此内容的教程中找到任何参考，因此任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:36:45.467

最终使用 Unity。Unity 为高通和动画提供了良好的支持，因此是实现 AR 动画的最佳解决方案

# sqlite - SQLite全文虚拟表正常可用？

> ID：12507649
> 
> 赞同：12
> 
> 时间：2012-09-20T07:11:03.137
> 
> 标签：sqlite, full-text-search, fts3

即使在阅读了很多关于 SQLite 全文索引的内容之后，出现了一个我在任何地方都没有看到答案的问题：

我已经有一个要使用全文索引搜索的表。我只会创建一个额外的虚拟表`USING FTS3`，或者`USING FTS4`然后将`INSERT`我的数据放入其中。

那么这是否总共使用了双存储？我可以像使用普通表一样使用这样的虚拟表，从而防止两次存储数据吗？

（我在 Android 上使用 SQLite，但这个问题可能适用于任何 SQLite 兼容平台上的使用。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-26T13:20:19.620

尽管您确实找到了一些细节，但我将尝试提供详细的答案：

**1\. 那这样一共使用双存储吗？**

是的，它确实。此外，它可能会使用更多的事件空间。例如，对于广为人知的*Enron E-Mail Dataset 和 FTS3* [示例](http://www.borelly.net/cb/docs/sqlite-3.7.2/fts3.html)，只需感受一下不同之处：

![在此处输入图像描述](../Images/e5d48cc4330bbecadc108f0f13175363.png)

> *   FTS3 表在磁盘上消耗大约 2006 MB，而普通表仅消耗 1453 MB
>     
>     
> *   The FTS3 table took just under 31 minutes to populate, versus 25 for the ordinary table

Which makes the situation a bit unpleasant, but still full-text search worth it.

**2\. Can I use such a virtual table just like a normal table?**

The short answer no, you can't. Virtual table is just a some kind of a *View* with several limitations. You've noticed several already.

Generally saying you should not use any feature which is seems to be unnatural for a *View*. Just a bare minimum required to let your application fully utilize the power of full-text search. So there will be no surprises later, with newer version of the module.

There is no magic behind this solution, it is just a trade-off between performance, required disk space and functionality.

**Final conclusion**

I would highly recommend to use FTS4, because it is faster and the only drawback is additional storage space needed.

Anyway, you have to carefully design virtual table taking into account a supplementary and highly specialized nature of such solution. In the other words, do not try to replace your initial table with the virtual one. Use both with a great care.

**Update** I would recommend to look through the following article: [iOS full-text search with Core Data and SQLite](http://blog.lunatech.com/2013/01/24/ios-core-data-sqlite-full-text-search). Several interesting moments:

> *   The virtual table is created in the same SQLite database in wich the Core Data content resides. **To keep this table as light as possible only object properties relevant to the search query are inserted.**
> *   SQLite 实现提供了 Core Data 所没有的东西：全文搜索。**除此之外，它的执行速度**比类似的 Core Data 查询快了近 10%，效率至少提高了 660%（内存）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T07:11:03.137

我刚刚发现了[虚拟表的主要区别，](http://www.sqlite.org/vtab.html)它似乎取决于您的使用情况，单个表是否足以满足您的需求。

> *   不能在虚拟表上创建触发器。
>     
>     
> *   不能在虚拟表上创建额外的索引。（虚拟表可以有索引，但必须内置到虚拟表实现中。不能使用 CREATE INDEX 语句单独添加索引。）
>     
>     
> *   不能对虚拟表运行 ALTER TABLE ... ADD COLUMN 命令。

因此，如果您需要在表上创建另一个索引，则需要使用两个表。

# c# - c# .net foreach 集合中的接口

> ID：12507651
> 
> 赞同：-2
> 
> 时间：2012-09-20T07:11:12.143
> 
> 标签：c#, .net

如果您有一个实现各种接口的对象集合，并且您`foreach`对该集合执行特定接口（只有集合的某些成员实现）会发生什么？是否可以跳过不实现该接口的成员？

```
interface IFoo {}
interface IBar {}

class Foo : IFoo {}
class Baz : IFoo, IBar {} 
```

...

```
var foos = new List<IFoo> ();

foos.Add(new Foo());
foos.Add(new Baz());

foreach (IBar bar in foos)
{
    // What happens now?
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T07:12:46.340

```
foreach (IBar bar in foo)
{
    // What happens now?
} 
```

> // 现在会发生什么？

现在什么都没有发生，因为您已经`InvalidCastException`在第一排获得了...

**为什么？**

`foreach`语句被翻译成类似的东西：

```
foreach (object f in foo)
{
    IBar bar = (IBar) f;

    ...
} 
```

其中有一个隐式转换，`foreach statement`
允许您编写如下愚蠢的东西而不会出现编译时错误：

```
var foo  = new List<string>{ "111", "222","333"};
foreach (IBar bar in foo) // InvalidCastException at runtime.
{
    ...
} 
```

您可以按照@Erno 的建议使用 LINQ 来仅获取实现`IBar`接口的对象：

```
foreach(IBar bar in foo.OfType<IBar>()) 
```

这就像：

```
foo.Where(f => f is IBar) 
```

# c++ - 警告 RC4011：标识符被截断为

> ID：12507656
> 
> 赞同：1
> 
> 时间：2012-09-20T07:11:52.270
> 
> 标签：c++, visual-studio-2010, resources, visual-studio-2012

我在编译 RC 文件时遇到问题。在 VS 2005 中绝对没问题，但是当我转到 VS 2012 时，麻烦就开始了。

**这就是我在 RC 文件中的内容：**

```
#include <windows.h"  
#include AGPRODVERPATH 
```

**这就是我在 .props 文件中的内容：**

```
<ResourceCompile>  
<AdditionalOptions> -DAGPRODVERPATH="\"..\\..\\..\\..\\VisualStudioBuildProducts\\CodeAndFlags\\$(Platform)\\AGDriverControlPanel_$(Configuration)_prodver.h\""
</AdditionalOptions>  
</ResourceCompile> 
```

**这就是我得到的错误：**

*   Resources\Win\AGDriverControlPanel.rc(3)：警告 RC4011：标识符被截断为“AGDriverControlPanel_Debug_prodverRapifamily.h”

*   Resources\Win\AGDriverControlPanel.rc(3): 错误 RC2006: #include 需要一个文件名，找到'...'

*   D:\p4client\ProAudio\dev_vs12\ProAudio\VisualStudioBuildProducts\AGDriverControlPanel\Win32\Debug\RCa59288(62)：致命错误 RC1116：RC 在预处理器错误后终止

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:25:23.263

**问题解决了。**

<AdditionalOptions> -DAGPRODVERPATH="\"..\..\..\..\VisualStudioBuildProducts\CodeAndFlags\$(Platform)\AGDriverControlPanel_$(Configuration)_prodver.h\""
</AdditionalOptions>

**现在是一个绝对的定义。相反，应该有：**

<PreprocessorDefinitions> AGPRODVERPATH="\"..\..\..\..\VisualStudioBuildProducts\CodeAndFlags\$(Platform)\AGDriverControlPanel_$(Configuration)_prodver.h\""
</PreprocessorDefinitions>

# python - Thrift 异步响应与错误的服务方法交叉

> ID：12507659
> 
> 赞同：1
> 
> 时间：2012-09-20T07:12:04.173
> 
> 标签：python, thrift

在 TThreadedServer 模式下使用 Thrift 服务器时遇到了奇怪的问题。我的测试客户端对服务器进行并行调用（100 次调用）。说我的旧货服务中的两种方法是`load_account()` 和`getRequestQueueCoun()`。这些方法具有异步调用`send_load_account and recv_load_account()`。`send_getRequestQueueCoun()`和`recv_getRequestQueueCoun()`。

我面临的问题是`send_getRequestQueueCoun()`呼叫的响应被捕获在`recv_load_account()`.

我在以下行中找到了响应

```
def recv_load_account(self, ):
(fname, mtype, rseqid) = self._iprot.readMessageBegin()  # here fname is the other method. 
```

服务器初始化代码 -

```
handler =   SyncServiceHandler(settings.SERVER_NAME,settings.SERVER_LISTEN_IP,settings.SERVER_LISTEN_PORT,isDispatcher)
transport = TSocket.TServerSocket(settings.SERVER_LISTEN_IP, settings.SERVER_LISTEN_PORT)
processor = SyncService.Processor(handler)
tfactory = TTransport.TBufferedTransportFactory()
pfactory = TBinaryProtocol.TBinaryProtocolFactory()
server = TServer.TThreadedServer(processor, transport, tfactory, pfactory) 
```

**我在不同端口上的 localhost 中运行两个节俭实例。**

我在**Python 2.7 中使用 Thrift。**

我尽力快速起草我的问题。如果还不清楚，请告诉我是否可以详细说明。

提前致谢。帕纳克

# java - java Eclipse中的内存不足异常

> ID：12507662
> 
> 赞同：1
> 
> 时间：2012-09-20T07:12:16.113
> 
> 标签：java, exception, heap-memory

我正在我的 java Eclipse 中尝试编译器。我得到了错误：

```
Exception occurred during event dispatching:
java.lang.OutOfMemoryError: Java heap space
at java.awt.image.DataBufferInt.<init>(Unknown Source) 
```

如何解决这个问题？

编译器从 414 个文件中最多编译 185 个文件，然后获取异常。内存1024M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:21:39.910

`Run configuration`在 Eclipse 中单击。选择您的**应用程序**或**服务器**选项卡（您希望拥有更多内存大小）。

在`Argument`选项卡中，写入`-Xmx<memory size>`. *内存大小*是您要设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:27:17.310

像这样设置您的**虚拟内存参数** -Xms128M -Xmx1024M -XX:MaxPermSize=128M

# selenium - 如何使用 Selenium Java Webdriver 搜索/查找所有结果

> ID：12507663
> 
> 赞同：0
> 
> 时间：2012-09-20T07:12:22.410
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

亲爱的 Selenium Webdriver 专家，

我是这个框架的新手，需要一些关于如何从销售物业列表网站定位/查找所有搜索结果的建议。下面是一个工作代码，它使用 Selenium Webdriver 成功找到了所有属性，但我不知道如何使用 findElements(by...) 来获取该网站返回的每个结果：

```
 WebDriver driver = new FirefoxDriver();

    driver.get("http://www.domain.com.au/?mode=buy");

    // Enter the query string "3000"        
    WebElement query = driver.findElement(By.xpath(".//*[@id='ctl00_SearchMoreCriteria_Radar_searchToBuy']"));        
    query.sendKeys("3000");        

    WebElement searchButton = driver.findElement(By.xpath(".//*[@id='ctl00_SearchMoreCriteria_Radar_Search']")); 
    searchButton.click();  

    // Sleep until the div we want is visible or 5 seconds is over        
    long end = System.currentTimeMillis() + 5000; 
```

有人可以就这个查询提供一些建议吗？我还想在定位/查找所有返回的结果之前包含一个暂停机制？

非常感谢，

杰克

* * *

非常感谢 Santoshsarma 的回复，但我正在努力将您的建议应用到以下返回的 Web 查询页面输出片段中：

```
 <h3>
        <a id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_hypAddress" href="/Property/For-Sale/Penthouse/VIC/Melbourne/?adid=2009775619">602/73 Flinders Lane, Melbourne</a></h3>
     <dl class="cN-featDetails">
        <dt class="proptype">Property type</dt>
        <dd id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_ddPropertyType" class="propertytype type-house" title="Property type: House">House</dd>
        <dt class="bedrooms">Bedrooms</dt>
        <dd id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_ddBedrooms" class="bedrooms" title="Bedrooms">3</dd>
        <dt class="bathrooms">Bathrooms</dt>
        <dd id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_ddBathrooms" class="bathrooms" title="Bathrooms">4</dd>
        <dt class="carspaces">Car spaces</dt>
        <dd id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_ddCarSpaces" class="carspaces" title="Car spaces">2</dd>
    </dl>
</div>
<div class="main-wrap">
    <ul class="photo cfix">
        <li>
            <a id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_hypMainThumb" tabindex="-1" class="contain" href="/Property/For-Sale/Penthouse/VIC/Melbourne/?adid=2009775619"><img id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_imgMainThumb" title="602/73 Flinders Lane, Melbourne" src="http://images.domain.com.au/img/2012625/18127/2009775619_1_PM.JPG?mod=120925-150000" alt="Main photo of 602/73 Flinders Lane, Melbourne - More Details" style="border-width:0px;" /></a>
        </li>

        <li class="last">
            <a id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_hypSecondThumb" tabindex="-1" class="contain" href="/Property/For-Sale/Penthouse/VIC/Melbourne/?adid=2009775619"><img id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_imgSecondThumb" title="602/73 Flinders Lane, Melbourne" src="http://images.domain.com.au/img/2012625/18127/2009775619_2_PM.JPG?mod=120913-125823" alt="Photo of 602/73 Flinders Lane, Melbourne - More Details" style="border-width:0px;" /></a>
        </li>
    </ul> 
```

> 列出 AllSearchResults=driver.findElements(By.id("ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_hypAddress"));

ctl01 中有一个索引需要循环获取所有搜索结果，根据其他类似威胁，搜索结果会很慢。有没有更好的方法在 WebElement 上使用 findElement() 来搜索它的孩子，但我不知道在哪里找到根。您是否能够确认这种方法是否有效？也许可以从以下 URL 查询结果页面确定结果列表的根：http: [//www.domain.com.au/Search/buy/Property/Types/公寓单元公寓/复式/独立屋/新公寓楼花/新住宅设计/新房子土地/阁楼/半独立/工作室/露台/联排别墅/别墅/州/VIC/区域/内城/地区/墨尔本地区/郊区/墨尔本/?bedrooms=1&bathrooms=1&carspaces=1&from=450000&searchterm=3000&pois=PriSchl|1|2|2000](http://www.domain.com.au/Search/buy/Property/Types/Apartment-Unit-Flat/Duplex/House/New-Apartments-Off-the-Plan/New-Home-Designs/New-House-Land/Penthouse/Semi-Detached/Studio/Terrace/Townhouse/Villa/State/VIC/Area/Inner-City/Region/Melbourne-Region/Suburb/Melbourne/?bedrooms=1&bathrooms=1&carspaces=1&from=450000&searchterm=3000&pois=PriSchl|1|2|2000)

非常感谢您对我在这方面缺乏经验的耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:41:07.350

**findElements 方法将返回具有相同定位器的 WebElements 列表。**

```
> List<WebElement> AllSearchResults=driver.findElements(By.id("value")); 
```

循环运行上述列表以获取每个单独的搜索结果。

```
 for(WebElement eachResult:AllSearchResults)
   {
           eachResult.click(); 
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:01:23.683

如果仍然无法解决，请尝试以下方法查找`h3`链接

```
(new WebDriverWait(driver, 10)).until(ExpectedConditions
   .visibilityOfElementLocated(
   By.id("ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_hypAddress"))); 
```

此代码等待给定元素 10 秒，然后引发 TimeOutException。

问候， 克里斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T07:50:28.273

也许我们可以借助使用 ID 属性的自定义 xpath 来解决它。

代码如下：

```
List AllSearchResults=driver.findElements(By.xpath("//*[contains(@id='SrchResLst_rptResult')]")); 
```

或像这样：

```
List AllSearchResults=driver.findElements(By.xpath("//*[contains(@id='ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl01_EliteListingTemplate_')]")); 
```

这里我们使用 * 因为一些搜索结果包含标签`<a>`和`<dd>`

xpath 搜索包含“SrchResLst_rptResult”字符串作为 ID 属性值的所有元素。

# image - 使用 base64 编码的图像寻找简单的 http 响应

> ID：12507664
> 
> 赞同：0
> 
> 时间：2012-09-20T07:12:24.500
> 
> 标签：image, http, base64

我在玩 basic4android 并尝试创建一个简单的网络服务器。一切都很好，但不知何故我没有设法将图像作为二进制文件发送。我发现了问题，现在一切正常，但与此同时我很绝望，并认为我可以发送一个二进制文件作为用 base64 编码的文本。我仍然忙于这个想法，但找不到正确的信息，有效的 http 响应如何与 base64 编码的图像看起来像。

我想它应该看起来像这样：

```
HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Length: lengthofthefollowingdata

dataofimagecodedinbase64 
```

有人可以发布一个适当的工作示例吗？

标准浏览器是否接受以 base64 编码的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:20:51.183

HTTP 响应中没有 base64 编码。将其定义为新的传输编码或内容编码是*可能的（但没用）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:20:58.250

让我们以 $base64string 变量为例，通过这种方式加载它和图像文件：

```
$base64string = base64_encode(file_get_contents("image.jpg")); 
```

首先你要做的是通过这个 php 代码设置内容类型：

```
header("Content-Type: image/jpeg") //if your data is format jpeg 
```

如果您的数据存储为 base64，那么您必须通过以下代码对其进行解码：

```
$decoded_data = base64_decode($base64string); 
```

那么您所要做的就是通过回显写入解码数据。

```
echo $decoded_data; 
```

可选：如果您想在 HTML 或 CSS 中插入图像，您不必解码 base64 字符串...例如：

HTML IMG 标签：

```
<img src="data:image/jpeg;base64,<?php echo $base64string; ?>" alt="image" /> 
```

CSS 内联背景属性：

```
style="background: url('data:image/jpeg;base64,<?php echo $base64string; ?>';" 
```

# android - 3小时后Android设置通知

> ID：12507665
> 
> 赞同：1
> 
> 时间：2012-09-20T07:12:24.413
> 
> 标签：android, time, notifications, alarm

我正在做一个提醒应用程序。如果用户单击警报按钮，警报应设置为接下来的 3 小时，并在 3 小时完成后在状态栏中显示通知。

我想我必须使用警报管理器来执行此操作，但我不知道如何将 3 小时添加到当前系统时间并为该时间设置通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:20:05.993

跟着它

```
AlarmManager am = (AlarmManager) sContext.getSystemService(Context.ALARM_SERVICE);
    am.set(AlarmManager.RTC, System.currentTimeMillis() + 3*60*60*1000, sAlertSender); 
```

# javascript - svg 拖动整个目标 instead of mouse-handlers? I have an external svg that I embed via an tag. I then use javascript to insert mouse handlers to -s in order to "rotate" them with the mouse. (Just like knobs on a stereo.) Now, eve 问问题 问问题 2012-09-20T07:12:47.223 105 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an external svg that I embed via an tag. I then use javascript to insert mouse handlers to -s in order to "rotate" them with the mouse. (Just like knobs on a stereo.) Now, every once in a while, this doesn't work. Firefox then doesn't show the drag-cursor which I told it to show but instead the crossed-out-circle cursor. Also, it doesn't rotate meaning that the javascript is not run. This happens roughly every third time - other times it works great. To me, it looks like firefox tries to drag the whole svg-object instead of handing the mouse-events over to the javascript and let that do it's magic. Does that sound familiar to anybody? What could I do? Cheers! Okay, short time after, although I had searched the web, I found the answer myself. This works just like Dragging/selecting inside SVG in Firefox. Let me quote from there: This behaviour is described in the following bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=525591 You can fix this by calling preventDefault() on the event. This really needs to go in an FAQ somewhere. I have nothing to add :-) javascriptfirefoxsvg 4 1 回答 1 This answer is useful 1 好的，不久之后，虽然我搜索了网络，但我自己找到了答案。 这就像在 Firefox 中的 SVG 中拖动/选择一样。 让我从那里引用： 以下错误报告中描述了此行为：https ://bugzilla.mozilla.org/show_bug.cgi?id= 525591 您可以通过在事件上调用 preventDefault() 来修复此问题。这确实需要在某个地方的常见问题解答中进行。 我没有什么要补充的:-) 于 2012-09-20T07:22:11.667 回答 Related 1 javascript - 在页面上的每个 updatepanels 部分回发事件之后调用一个函数 1 loops - 在倒数计时器中使用核心数据实体 1 ios - textField 输入字符串转换为 UINT32 1 java - Android SlidingMenu nullpointer on toggle 1 python-3.x - tkinter 消息框链接到笔记本页面 2 c++ - 用于在 C++ 中计算平均值的数组指针 1 clr - VarChar 到 NVarChar 并返回 3 xml - 在 inno Setup 中使用 DOM 将节点添加到 xml - 奇怪的问题 6 c# - 如何在 C# 中以编程方式将一堆控件居中 2 php - 一个带有 jQ uery、PHP 和 Smarty 的投票系统 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12507668
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, firefox, svg

I have an external svg that I embed via an tag. I then use javascript to insert mouse handlers to -s in order to "rotate" them with the mouse. (Just like knobs on a stereo.)

Now, every once in a while, this doesn't work. Firefox then doesn't show the drag-cursor which I told it to show but instead the crossed-out-circle cursor. Also, it doesn't rotate meaning that the javascript is not run. This happens roughly every third time - other times it works great.

To me, it looks like firefox tries to drag the whole svg-object instead of handing the mouse-events over to the javascript and let that do it's magic.

Does that sound familiar to anybody? What could I do?

Cheers!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:22:11.667

好的，不久之后，虽然我搜索了网络，但我自己找到了答案。

这就像[在 Firefox 中的 SVG 中拖动/选择](https://stackoverflow.com/questions/6259622/dragging-selecting-inside-svg-in-firefox)一样。

让我从那里引用：

> 以下错误报告中描述了此行为：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=525591) ://bugzilla.mozilla.org/show_bug.cgi?id= 525591 您可以通过在事件上调用 preventDefault() 来修复此问题。这确实需要在某个地方的常见问题解答中进行。

我没有什么要补充的:-)

# crystal-reports - 从水晶报告中删除页眉广告页脚

> ID：12507670
> 
> 赞同：1
> 
> 时间：2012-09-20T07:13:03.270
> 
> 标签：crystal-reports

我必须像这样从我的应用程序中打印一份报告：

```
section1(reportheader)
section2(pageheader)
section3(detailes)
     some data
....
...
....
section4(report footer)
section5(page footer) 
```

在设计区域，我将第 1 节和第 2 节之间的距离设置为零，将第 2 节和第 3 节以及第 4 节和第 5 节之间的距离也设置为零，但是当我尝试打印时，我从页眉和页脚和我的打印中得到了 2.2 厘米的间隙和 2.2 厘米的间隙搞砸了，如何从我的页面中删除这些空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:18:56.067

在设计视图中右键单击您需要的部分并选择“抑制”。因此，您压制的部分将不会在您的报告中可见。

试试这个并返回你的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:06:46.970

我做了这一切，我的页眉和页脚部分变成灰色，但没有发生任何事情，更多信息：我的页面大小是 h:42,30 V:55，它没有边距。我检查了 noprinter .... 我选择了我的打印机型号 Epson LQ 2190 ESC/P2 我的报告是一个原始表格，在每一行它有五个块，每个块都有一些信息，我的纸张大小是五个这个块的行，仍然，现在在我的页眉报告中我有 2.2 厘米的空白区域，在打印 4 行之后，我在页脚有 2.2 厘米，在第 4 行和第 5 行之间我有 4.4 厘米的可用空间

# delphi - 终止线程并断开 in dy 客户端

> ID：12507677
> 
> 赞同：1
> 
> 时间：2012-09-20T07:13:36.407
> 
> 标签：delphi, indy10

在 Delphi 中，我有一个线程客户端，用于侦听线程中的响应。线程声明如下：

```
TMyThread = class(TThread)
  private
    FClient: TIdTCPClient;
    FStringResponse: string;
  protected
    procedure Execute; override;
    procedure DoSynch;
  public
    constructor Create(AClient: TIdTCPClient);
  end; 
```

我使用以下方式连接：

```
 if not IdTCPClient1.Connected then
  begin
    // // Set the Host
    IdTCPClient1.Host := Edit1.Text;
    // // Set the port
    IdTCPClient1.Port := 65535;
    // // Connect
    IdTCPClient1.Connect;
    try
      MyThread := TMyThread.Create(IdTCPClient1);
    except
      IdTCPClient1.Disconnect;
      raise;
    end;
  end; 
```

我尝试使用以下方式断开连接：

```
if MyThread <> nil then
  begin
    MyThread.Terminate;
    // MyThread.WaitFor;
    MyThread.Free;
    MyThread := nil;
    IdTCPClient1.Disconnect;
end; 
```

但是这个断开连接代码会引发异常。终止此线程并断开客户端的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:18:39.220

尝试颠倒关闭操作的顺序 - 在释放线程之前断开客户端，而不是相反。这样，线程内的任何阻塞套接字操作都会立即中止，从而允许线程对终止做出反应：

```
if MyThread <> nil then
  MyThread.Terminate; 
try
  IdTCPClient1.Disconnect; 
finally
  if MyThread <> nil then
  begin
    MyThread.WaitFor; 
    MyThread.Free; 
    MyThread := nil; 
  end;
end; 
```

如果您仍然收到来自 的异常`Disconnect()`，请确保线程没有断开客户端的连接，仅从客户端读取/写入，并在需要时将其包装`Disconnect()`在自己的`try/except`块中。

# c++ - 为什么以下 C++ 程序打印字符串的 ascii 值而不是字符？

> ID：12507686
> 
> 赞同：4
> 
> 时间：2012-09-20T07:14:27.900
> 
> 标签：c++, string, printing

该程序应该存储标准输入流中给出的每个单词并计算它们的出现次数。结果应该在之后按顺序打印，然后是它们的计数。据我所知，该程序以其他方式工作，但字符串被打印为字符的 ASCII 值而不是字符本身。怎么了？

```
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <cctype>
#include <algorithm>

std::string get_word();

int main()
{
    std::vector<std::string> words;
    std::string word;

    while (std::cin.good()) {
        word = get_word();

        if (word.size() > 0)
            words.push_back(word);
    }

    std::sort(words.begin(), words.end());

    unsigned n, i = 0;

    while (i < words.size()) {
        word = words[i];
        n = 1;

        while (++i < words.size() and words[i] == word)
            ++n;

        std::cout << word << ' ' << n << std::endl;
    }
}

std::string get_word()
{
    while (std::cin.good() and !std::isalpha(std::cin.peek()))
        std::cin.get();

    std::stringstream builder;

    while (std::cin.good() and std::isalpha(std::cin.peek()))
        builder << std::cin.get();

    return builder.str();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T07:19:37.113

`std::istream::get()`不返回`char`但是`std::ios::int_type`（对于可以保存 EOF 和 EOF 的所有值的某些整数类型的 typedef `char_type`），这就是您在 stringstream 中插入的内容。您应该将结果转换为`char`.

[std::basic_istream::get](http://en.cppreference.com/w/cpp/io/basic_istream/get)

# arrays - Perl 中的数组赋值

> ID：12507687
> 
> 赞同：3
> 
> 时间：2012-09-20T07:14:35.927
> 
> 标签：arrays, perl

和有什么区别

```
myArr1 => \@existingarray 
```

和

```
myArr2 => [
              @existingarray
          ] 
```

我将 分配给`@existingarray`哈希图中的元素。

我的意思是内部到底发生了什么。是不是对于第一个，它指向同一个数组，而对于第二个数组，它创建一个新数组，其中的元素`@existingarray`

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T07:29:01.713

是的，第一个引用，第二个复制然后引用。

`[ ... ]`是匿名数组构造函数，并将里面的列表变成一个arrayref。

所以`@a = 1, 2, 3`，

```
[ @a ] 
```

是相同的

```
[ 1, 2, 3 ] 
```

（数组被展平为列表）或

```
do {
  my @b = @a;
  \@b;
} 
```

实际上，元素被复制了。

还，

```
my ($ref1, $ref2) = (\@a, [@a]);
print "$ref1 and $ref2 are " . ($ref1 eq $ref2 ? "equal" : "not equal") . "\n"; 
```

会确认它们是*不*一样的。如果我们这样做

```
$ref1->[0] = 'a';
$ref2->[0] = 'b'; 
```

那么`$a[0]`将等于`a`而*不是* `b`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T07:29:41.560

您可以使用

```
perl -e 'my @a=(1); my $ra=\@a; my $rca=[@a]; $ra->[0]=2; print @a, @{$ra}, @{$rca};'
221 
```

看看您对 [@existingarray] 创建对 @existingarray 副本的引用的假设是正确的（这`myArray*`不是 Perl）。

WRT amon 将我的`perl -e "..."`（在 bash 下失败）修改为`perl -e '...'`（在 cmd.exe 下失败）：使用适用于您的 shell 的引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T07:28:11.167

方括号引用了一个新数组，其中包含分配时@existingarray 中的内容的副本。

# css - 组合框的选项标签中的字体标签不起作用

> ID：12507691
> 
> 赞同：0
> 
> 时间：2012-09-20T07:14:42.387
> 
> 标签：css, html

我正在设计一个下拉组合框来显示产品的价格列表。为此，我在 css 中嵌入了卢比字体。

这是代码：

```
<select class="comboboxstyle" name="sports" id="sports">
  <option class="optionstyle" value="subscribe">Subscribe</option>
  <option class="optionstyle" value="monthly">Monthly <span style="font-family:Rupee">`</span>30</option>
  <option class="optionstyle" value="weekly" >Weekly<span style="font-family:Rupee">`</span>20</option>
  <option class="optionstyle" value="daily">Daily<span style="font-family:Rupee">`</span>10</option>
</select> 
```

但是，浏览器不支持选项标签中的字体标签，而如果它不在选项标签中，它就可以正常工作。我不能在整个事情中应用卢比字体，因为只有卢比符号显示而其他文本消失。

任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:20:21.190

您不能在内部使用 HTML 标记`<option>`，您的解决方法是使用`<option>`自身的样式，如下例所示：

```
<select>
    <option style="font-weight: bold;">Text Text 1</option>
    <option style="font-family: Rupee;">Text Text 2</option>
    <option style="color: #FF0000;">Text Text 3</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:58:51.453

使用正确编码（Unicode 编码）的字体，或找到卢比符号的替代品（名称、缩写、国际货币代码、另一个公认的符号，或任何适合上下文和受众的符号）。

我想您的意思是印度卢比符号 (U+20B9)，而不是较旧的、更广泛支持的通用卢比符号。新符号已在几种正确编码的字体中实现，请参阅 [http://www.fileformat.info/info/unicode/char/20b9/fontsupport.htm](http://www.fileformat.info/info/unicode/char/20b9/fontsupport.htm) 但请注意，该信息适用于相当新的字体版本 - 例如，现代 Arial 包含它，但旧版本的 Arial（在定义符号之前创建）显然不会。

但是您可以考虑使用合适的免费字体，例如 DejaVu Sans，作为可下载字体，通过`@font-face`. 这意味着您的`select`菜单的字体与页面的其余部分不同，但这应该不是什么大问题。人们已经习惯了这样的事情，即使在默认情况下，许多浏览器也会在那里使用一种特殊的字体。

设置整个元素的字体失败的原因是使用的卢比字体是周围的 8 位字体之一，试图以一种快速而肮脏的方式实现一些新的（或其他特殊的）符号。这个技巧是基于一个古老的想法（现在大部分被放弃了，除了在这样的情况下）通过改变字体来改变角色的身份。也就是说，通过使用“b”字形代替“a”的字体将“a”转换为“b”。这些技巧通常以一种或另一种方式回击。

# jquery - 在 ASP.Net 树视图上拖放

> ID：12507695
> 
> 赞同：0
> 
> 时间：2012-09-20T07:15:09.367
> 
> 标签：jquery, asp.net

我正在尝试在 ASP.Net 树视图上实现拖放功能。在我的树视图中，文件和文件夹正在显示。

我希望用户从他的计算机中选择一个文件并将其拖放到 ASP.Net 树上，然后文件将上传到服务器上。

这在 ASP.Net 树视图中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:51:00.287

你可以试试witj`JsTree`

链接： http: [//www.jstree.com/](http://www.jstree.com/)

# android - Android 4.1 上的 KeyChain.getPrivateKey(Context,String)？

> ID：12507697
> 
> 赞同：2
> 
> 时间：2012-09-20T07:15:20.543
> 
> 标签：android, security, keychain, private-key, android-4.2-jelly-bean

我读到 Android 4.1 上的方法 KeyChain.getPrivateKey(Context,String) 存在问题，尽管在旧版本上它可以工作。有人有解决方案如何在 JellyBean 上获取私钥吗？

看到这个[Using Android 4.1 Keychain](https://stackoverflow.com/questions/11261774/using-android-4-1-keychain)，但不知何故无法处理我的情况。

不能在 4.1 上运行的代码，但在旧版本上运行良好。

```
PrivateKey pk;
try {
    pk = KeyChain.getPrivateKey(context,string);
    byte[] pkByte = pk.getEncoded();
    pkBase64 = new String(Base64.encode(pkByte, Base64.NO_WRAP));
} 
```

编辑：发现如果我在添加它时不更改证书别名（默认十六进制-十六进制-十六进制），那么getPrivateKey返回null，但是当我将别名更改为例如aaa方法时返回一些东西，但仍然不是正确的私钥. （例如，返回的私钥为 primeP =null primeQ =null。在 Android 4.0.4 上，primeP 和 primeQ 不是空值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:28:19.350

你不能假设 a`PrivateKey`可以被编码。如果 a`PrivateKey`返回`null`for `getEncoded()`，那么它只是不支持编码。请参阅[Key.getEncoded() 的文档](http://developer.android.com/reference/java/security/Key.html#getEncoded%28%29)。

在 JellyBean 中，通过返回的私钥`KeyChain`永远不会在进程中。对它们执行的任何操作实际上都是在另一个进程中完成的，因为实际的关键问题可能存储在某种硬件安全模块中。您仍然可以[`java.security.Signature`](http://developer.android.com/reference/java/security/Signature.html)使用此密钥调用 API。

# sql-server-2008 - 如果我删除 ORDER BY CLAUSE，则会出现“转换失败 .. 将 varchar 值转换为 int”

> ID：12507701
> 
> 赞同：0
> 
> 时间：2012-09-20T07:15:46.407
> 
> 标签：sql-server-2008, debugging

几天以来遇到一个奇怪的问题，这使我无法运行任何查询。

```
SELECT Empid as EmployeeId, EmpName,
CustomerName as 'Distributor Name', Customer.RSCode, markedFor as 'Date Marked For',
CASE WHEN Present = 0 THEN 'ABSENT' ELSE 'PRESENT' END AS Attendance, Reason
FROM EmployeeAttendance_Backup ea, Customer, Employee e, EmployeeMaster em
WHERE 
ea.DistID = cast(Customer.RSCode as int)
AND e.EmployeeMasterID=em.Id
AND ea.Empid = em.EmployeeID
--ORDER BY markedFor 
```

如果我运行上面的查询，我会得到 ~160k - 190k 记录，然后它会因错误而终止：

> 将 varchar 值“Present 500004862”转换为数据类型 int 时转换失败。

我什至没有选择引发此错误的字段。

如果我启用该`ORDER BY`子句，我不会得到任何记录，并且这个错误：

> 将 varchar 值“Hirannaiah K R”转换为数据类型 int 时转换失败。

EmployeeAttendance_Backup 表有接近 20 万条记录。这会导致任何问题吗？我不知道如何寻找解决方案。我尝试查看该特定员工的考勤表，以检查是否有一些记录被错误地保存，但事实并非如此。对这个特定员工的 Employee 和 EmployeeMaster 做了同样的事情。

我从哪里开始寻找问题？

# io-redirection - strace tmux 输出重定向到文件

> ID：12507702
> 
> 赞同：11
> 
> 时间：2012-09-20T07:15:49.147
> 
> 标签：io-redirection, strace

我想检查 tmux 在启动时会触及哪些文件（而不仅仅是 tmux 运行时打开的文件列表）。Strace tmux 似乎是最好的选择。

尝试将输出重定向到文件时`strace tmux > /tmp/blah`。文件为空。

为什么会这样？如何将跟踪重定向到文件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T08:08:51.620

哦，我明白了。Strace 不打印到标准输出。它打印到标准错误。

`strace tmux 2> /tmp/blah`作品。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-27T08:21:52.017

您还可以使用`-o`将`strace`跟踪输出写入文件而不是`stderr`.

`strace -o /tmp/blah tmux`

# windows-8 - Visual Studio 2012 System.Exception 错误

> ID：12507703
> 
> 赞同：2
> 
> 时间：2012-09-20T07:15:57.330
> 
> 标签：windows-8, visual-studio-2012

我刚开始为**Windows 8 商店**开发。即使我打开一个示例项目并开始调试它也会显示此错误。

`System.Exception`未知模块中发生类型未处理的异常。Windows 应用商店应用程序的激活`'a9c71d52-8ba1-460a-aa8f-df5ea89f1efa_qpttb2q7b6s4m!App'`失败并出现错误**应用程序未启动**。该程序`'[2520] App8.exe: Managed (v4.0.30319)' has exited with code -532462766 (0xe0434352)`。

我试图删除引用并添加它们，但它们没有发生。请帮我解决这个奇怪的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:42:26.150

经过大量搜索，无法得到答案。我重新安装了 Windows 8 并使用了新版本的 VisualStudio，现在一切都在节奏中。

# c# - ComboBox：根据条件设置boxitem的文本

> ID：12507704
> 
> 赞同：0
> 
> 时间：2012-09-20T07:16:07.167
> 
> 标签：c#, wpf, xaml, datatemplate, multibinding

我有`ComboBox`一个`DataTemplate`分配给它。`DataTemplate`看起来像这样：

```
<Style x:Key="ComboBox_EntityCreation_GroupSelect_Style" TargetType="{x:Type ComboBox}">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0}    {1} Members">
                            <Binding Path="Name"/>
                            <Binding Path="MemberCount"/>
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想实现“成员”替换为“成员”如果`MemberCount == 1`。所以我需要 XAML 中的 if-else 子句。

有没有办法在 XAML 中实现这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:35:23.623

不，您不能仅在 xaml 中执行此操作。您可以使用[MultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.converter%28v=vs.100%29.aspx)。

```
<Window.Resources>
    <c:MemberConverter x:Key="myMemberConverter"/>
...
</Window.Resources>

...
<TextBlock.Text>
    <MultiBinding Converter="{StaticResource myMemberConverter}">
        <Binding Path="Name"/> 
        <Binding Path="MemberCount"/> 
    </MultiBinding>
</TextBlock.Text> 
```

```
public class NameConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if((values[1] as int) == 1)
        {
           return (values[0].ToString()) + "\t" + values[1].ToString() + "Member";
        }
        return (values[0].ToString()) + "\t" + values[1].ToString() + "Members";            
    }

    /* ... */   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:54:55.043

我会用

```
<MultiBinding StringFormat="{}{0}    {1} Member{2}">
    <Binding Path="Name"/>
    <Binding Path="MemberCount"/>
    <Binding Path="MemberPluralS"/>
</MultiBinding> 
```

在您的 ViewModel 中有一个附加属性

```
public string MemberPluralS
{
   get { return MemberCount != 1 ? "s" : string.Empty; }
} 
```

**编辑**

这是一个 XAML 解决方案（可能不是最好的）

```
<TextBlock>
   <TextBlock.Style>
      <Style TargetType="TextBlock">
         <Setter Property="Text">
            <Setter.Value>
               <MultiBinding StringFormat="{}{0}    {1} Members">
                  <Binding Path="Name"/>
                  <Binding Path="MemberCount"/>
               </MultiBinding>                           
            </Setter.Value>
         </Setter>
         <Style.Triggers>
            <DataTrigger Binding="{Binding MemberCount}" Value="1">
               <Setter Property="Text" Value="{Binding Name, StringFormat='{}{0}    1 Member'}" />
            </DataTrigger>
         </Style.Triggers>
      </Style>
   </TextBlock.Style>
</TextBlock> 
```

# c++ - 没有 std::atomics 的无锁散列是否保证在 C++11 中是线程安全的？

> ID：12507705
> 
> 赞同：4
> 
> 时间：2012-09-20T07:16:07.480
> 
> 标签：c++, multithreading, c++11, atomic, lockless

考虑以下对多线程搜索算法的无锁哈希表的尝试（受[本文](http://www.cis.uab.edu/hyatt/hashing.html)启发）

```
struct Data
{
    uint64_t key;
    uint64_t value;
};

struct HashEntry
{
    uint64_t key_xor_value;
    uint64_t value;
};

void insert_data(Data const& e, HashEntry* h, std::size_t tableOffset)
{
    h[tableOffset].key_xor_value = e.key ^ e.value;
    h[tableOffset].value = e.value;
}

bool data_is_present(Data const& e, HashEntry const* h, std::size_t tableOffset)
{
    auto const tmp_key_xor_value = h[tableOFfset].key_xor_value;
    auto const tmp_value = h[tableOffset].value;

    return e.key == (tmp_key_xor_value ^ tmp_value);
} 
```

这个想法是`HashEntry`结构存储结构的两个 64 位字的异或组合`Data`。如果两个线程对结构的两个 64 位字进行了交错读取/写入`HashEntry`，则想法是读取线程可以通过再次 XOR-ing 并与原始`key`. 因此，可能会因哈希条目损坏而降低效率，但在解码后的检索密钥与原始密钥匹配的情况下仍能保证正确性。

该论文提到它基于以下假设：

> 对于本讨论的其余部分，假设 64 位内存读/写操作是原子操作，即整个 64 位值在一个周期内读/写。

我的问题是：上面没有明确使用的代码是否`std::atomic<uint64_t>`保证在 C++11 中是线程安全的？或者单独的 64 位字是否会被同时读/写损坏？即使在 64 位平台上？这与旧的 C++98 标准有何不同？

来自标准的报价将不胜感激。

**更新**：根据[Hans Boehm 关于“良性”数据竞争](https://www.usenix.org/legacy/event/hotpar11/tech/final_files/Boehm.pdf)的这篇令人惊叹的论文，一个简单的被咬的方法是让编译器取消 XOR`insert_data()` 并`data_is_present()`始终返回`true`，例如，如果它找到一个本地代码片段，例如

```
insert_data(e, h, t);
if (data_is_present(e, h, t)) // optimized to true as if in single-threaded code
   read_and_process(e, h, t); // data race if other thread has written 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:29:34.713

C++11 规范几乎将一个线程读取或写入另一个线程正在写入的内存位置的任何尝试定义为未定义的行为（没有使用原子或互斥锁来防止一个线程的读/写，而另一个线程正在写作）。

个别编译器可能会使其安全，但 C++11 规范本身并不提供覆盖。同时读取从来都不是问题；它在一个线程中写入，同时在另一个线程中读取/写入。

> 这与旧的 C++98 标准有何不同？

C++98/03 标准没有提供关于线程的*任何内容。*就 C++98/03 内存模型而言，[线程不是可能发生的事情](https://stackoverflow.com/a/6319356/734069)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:21:35.533

我认为它不太依赖于编译器，而是依赖于你正在使用的 CPU（它的指令集）。我不认为这个假设是非常便携的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:46:50.113

代码完全被破坏了。如果编译器的分析表明整体效果是相同的，那么编译器就有很大的自由来重新排序指令。`insert_data`例如，不能保证`key_xor_value`会在 之前更新，`value`更新是否在写回缓存之前在临时寄存器上完成，更不用说这些缓存更新时 - 无论它们在机器代码语言和 CPU 指令中的“顺序”如何执行管道 - 将从更新核心或核心（如果上下文切换的中间功能）私有缓存中刷新，以对其他线程可见。编译器甚至可以使用 32 位寄存器分步进行更新，具体取决于 CPU，是编译 32 位还是 64 位，编译选项等。

原子操作往往需要诸如 CAS（比较和交换）样式指令或`volatile`内存屏障指令之类的东西，它们在内核的缓存之间同步数据并强制执行一些排序。

# mvvm - MVVM 和 VS2010 - 有没有办法指定 tabcontrol 而不在代码隐藏中添加代码

> ID：12507706
> 
> 赞同：1
> 
> 时间：2012-09-20T07:16:08.773
> 
> 标签：mvvm

我需要放置 Tabcontrol 并且需要坚持 MVVM 模式。但是，如果不在代码隐藏中编写代码，我就无法做到这一点。截至目前，我有一个默认选项卡，后续选项卡内容是动态的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:30:11.480

为此，我将为您的选项卡控件创建一个主视图模型，然后对于动态选项卡，我会将它们放在一个 ObservableCollection 中，并在您的主视图模型中声明。

您需要将该集合绑定到该 TabControl 的 ItemSouce。

这样您就可以从集合中动态添加/删除它们。

# android - 在 ListView 中的每个名称下方重复的 TextView 标题和 Button

> ID：12507707
> 
> 赞同：0
> 
> 时间：2012-09-20T07:16:09.327
> 
> 标签：android, android-layout, listview, button, textview

我有一个应用程序，它是从 Android 手机的联系人列表中检索到的联系人姓名列表。
我试图添加TextView，它就像ListView上方的标题和TextView下方的Button。TextView 和 Button 在列表中的每个名称下方重复出现。看起来像这样

![带有标题和按钮的名称的 ListView](../Images/61702bc214b77fa67111d4628cfbc8b8.png)

不仅如此，文本视图在列表上方，按钮也在列表下方。这很奇怪。我不确定如何使列表上方的 TextView 和按钮仅位于列表下方。

哦，是的，请看一下我的 java 和 xml 布局代码，谢谢
——contacts_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/light_goldenrod"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
        android:id="@+id/textInform"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Choose a Friend to Create an Event"
        android:textColor="@color/dark_purple"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:stackFromBottom="false"
        android:transcriptMode="normal" />

   <TextView
        android:textColor="@color/dark_purple"
        android:id="@+id/contactName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

   <Button
       android:id="@+id/btnMain"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="@drawable/yellow_btn"
       style="@style/ButtonText"
       android:text="Main Menu" />

</LinearLayout> 
```

联系人列表.java

```
public class ContactsList extends ListActivity
{
    TextView contactName;
    ListView list;

    final Context context = this;   
    Cursor cursor;
    BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.contacts_list);

        list = (ListView) findViewById(android.R.id.list);

        Uri allContacts = Uri.parse("content://contacts/people");

        Cursor c = managedQuery(allContacts, null, null, null, null);

        String[] columns = new String[] {ContactsContract.Contacts.DISPLAY_NAME};
        int[] views = new int[]  {R.id.contactName};

        startManagingCursor(c);

        SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
        this.setListAdapter(friendsAdapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        buddyDB.open();
        long name_id;
        super.onListItemClick(l, v, position, id);

           Cursor cursor = null;

           cursor = (Cursor) l.getItemAtPosition(position);
           Intent intent = new Intent(ContactsList.this, Create_Events.class);
           intent.putExtra("name", cursor.getString(cursor.getColumnIndex(buddyDB.KEY_NAME)));
           startActivity(intent);

        Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        c.moveToPosition(position);

        TextView contactName = (TextView) v.findViewById(R.id.contactName);
        String NameValue = contactName.getText().toString();        
        name_id = buddyDB.insertNames(NameValue);

        buddyDB.close();    
    } 
} 
```

请帮我解决一下这个。
提供的任何帮助将不胜感激。谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:27:15.087

如下创建一个布局文件并将其命名为contacts_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/light_goldenrod"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
   <TextView
        android:textColor="@color/dark_purple"
        android:id="@+id/contactName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

更改以下内容：

```
SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views); 
```

至：

```
SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, R.layout.contacts_item, c, columns, views); 
```

# c# - 可空日期异常处理 - 有没有更好的方法

> ID：12507716
> 
> 赞同：0
> 
> 时间：2012-09-20T07:17:03.140
> 
> 标签：c#, .net, datetime, error-handling

在尝试处理无效或空日期输入时，我遇到了 Nullable 日期的挑战

对于普通`DateTime`变量，我可以这样做

```
DateTime d = new DateTime.Now; //You can also use DateTime.MinValue. You cannot assign null here, WHY? 
DateTime.TryParse(ctrlDate.Text, out d); 
```

对于可为空的日期时间

```
DateTime? nd = null;
DateTime.TryParse(ctrlDate.Text, out nd); //this doesn't work. it expects DateTime not DateTime? 
```

> **对于日期时间？**
> 
> System.DateTime.TryParse(string, out System.DateTime) 的最佳重载方法匹配有一些无效参数

所以我不得不把它改成

```
DateTime? nd = null;
DateTime d = DateTime.Now;
if(DateTime.TryParse(ctrlDate.Text, out d))
   nd = d; 
```

我必须为可空日期创建一个额外的`DateTime`变量来实现这一点。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:19:56.097

您不需要为作为`out`参数传递给方法的变量分配任何内容，只需：

```
DateTime d;
if (DateTime.TryParse(ctrlDate.Text, out d))
{
    // the date was successfully parsed => use it here
}
else
{
    // tell the user to enter a valid date
} 
```

至于您为什么不能写的第一个问题`DateTime d = null;`，那是因为 DateTime 是值类型，而不是引用类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:19:28.013

> 日期时间 d = 新的日期时间。现在；//这里不能赋值null，为什么？

因为它是一个**值类型**，它是一个结构，所以您不能将 null 分配给结构/值类型。

对于 DateTime.TryParse

如果要使用，`DateTime.TryParse`则必须创建一个额外的类型变量，`DateTime`然后根据需要将其值分配给 Nullable DateTime。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T07:35:19.123

您确实需要创建额外的`DateTime`变量，没有更好的方法。

虽然您当然可以将其封装在您自己的解析方法中：

```
bool MyDateTimeTryParse(string text, out DateTime? result)
{
    result = null;

    // We allow an empty string for null (could also use IsNullOrWhitespace)
    if (String.IsNullOrEmpty(text)) return true;

    DateTime d;
    if (!DateTime.TryParse(text, out d)) return false;
    result = d;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:22:38.233

为什么不使用

```
DateTime.MinValue 
```

而不是可为空的类型？

# iphone - 如何相对于另一个标签定位标签

> ID：12507719
> 
> 赞同：1
> 
> 时间：2012-09-20T07:17:19.467
> 
> 标签：iphone, uitableview

我有一个`UITableView`自定义单元格。`UILabels`在每个单元格内，我有两个**消息**和**类型**。消息标签的大小不同，类型标签应位于消息标签下方。由于消息标签的大小是不同的。如何定位类型标签的 y 坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:27:21.457

```
typeLabel.frame = CGRectMake(CGRectGetMinX(messagelabel.frame),
                             CGRectGetMaxY(messagelabel.frame)+space,
                             w, h) 
```

我发现这更具可读性；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:24:01.913

试试这个，如果您已经为类型标签设置了框架并且想要相同的高度宽度和 x 位置

```
CGRect frame=type_label.frame;
frame.origin.y=messagelabel.frame.origin.y + messagelabel.frame.size.height + some_gap_if_you_want;
type_label.frame=frame; 
```

或者如果你没有设置框架试试这个

```
type_label.frame=CGRectMake(x,messagelabel.frame.origin.y + messagelabel.frame.size.height + some_gap_if_you_want,width,height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:22:00.260

```
#define MARGIN 5
typeLabel.frame = CGRectMake(x, messagelabel.frame.size.height + messageLabel.frame.origin.y + MARGIN ,
                             w , h); 
```

# python - 用 Python 调用我自己的 R 例程

> ID：12507721
> 
> 赞同：0
> 
> 时间：2012-09-20T07:17:31.363
> 
> 标签：python, r, rpy2

我想从 python 调用一个用 R 编码的复杂算法。

查看 RPY2 包文档，我了解到我可以使用 robjects 包调用许多标准 R 函数。

我想知道这是否可以扩展到我自己的 R 例程。我应该打包我的 R 东西还是可以按原样使用我的代码？有没有办法让它可以访问？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:49:44.780

您不必制作 R 包。Rpy2 可以将字符串评估为 R 代码。还有一个方便的系统可以[使用 R 代码评估字符串并将其包装，就好像它是一个包一样](http://rpy.sourceforge.net/rpy2/doc-2.3/html/robjects_rpackages.html#importing-arbitrary-r-code-as-a-package)。

# android - 应用内计费和订阅支持的国家/地区

> ID：12507722
> 
> 赞同：1
> 
> 时间：2012-09-20T07:17:33.600
> 
> 标签：android, in-app-billing

我目前在印度。我想将应用内和订阅计费集成到我的应用中。国内可以吗？？

印度是否支持 Google 市场计费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:22:20.813

我认为它在印度不受支持。以下是支持付费申请的国家/地区列表。

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

# windows-phone-7 - 访问消息收件箱并阅读 Windows Phone 7 中的内容

> ID：12507725
> 
> 赞同：0
> 
> 时间：2012-09-20T07:17:43.290
> 
> 标签：windows-phone-7

我正在尝试为 Windows Phone 7.5/8 编写程序。我的概念是，appa 应该自动读取传入的 SMS，提取数据并将重要的事情通知给用户。可能吗？就像，它应该从您的银行读取包含总余额的消息，并在总金额低于特定限制时通知您。在 Windows Phone 中是否可行或可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:31:27.617

不能。目前无法在公共 Windows Phone SDK 中拦截传入的 SMS 或读取过去的消息。

# casting - 如何在windbg上显示具有指定类型的变量

> ID：12507727
> 
> 赞同：4
> 
> 时间：2012-09-20T07:17:50.640
> 
> 标签：casting, windbg

我正在使用 windbg 调试我的应用程序，但我找不到用于转储具有指定类型的变量值的命令。

例如，有一个变量，比如说 A，它的类型是 int。现在我想用 uint 类型转储变量 A。

怎么做 ？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T08:01:57.203

dt 是你的朋友

```
0:000> dt i
Local var @ 0x18f2cc Type int
0n-2
0:000> dt (uint) 0x18f2cc 
CrashTestD!UINT
0xfffffffe 
```

如果你想要十进制输出，设置 Number Base 10

```
0:000> n 10
base is 10
0:000> dt (uint) 0x18f2cc 
CrashTestD!UINT
0n4294967294 
```

仍然想知道，使用：

```
0:000> .formats 0xfffffffe
Evaluate expression:
  Hex:     fffffffe
  Decimal: -2
  Octal:   37777777776
  Binary:  11111111 11111111 11111111 11111110
  Chars:   ....
  Time:    unavailable
  Float:   low -1.#QNAN high 0
  Double:  2.122e-314 
```

更多[这里：](http://analyze-v.com/?p=814)

# google-apps-script - google drive：新的聊天式评论

> ID：12507728
> 
> 赞同：1
> 
> 时间：2012-09-20T07:18:01.200
> 
> 标签：google-apps-script

是否有 API 可以在 Google Drive（Google Docs）中添加/编辑/控制新的聊天风格的花哨评论？

我想从运行脚本的用户自动向给定单元格添加新评论。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:23:58.383

还没有。范围上的 getComment(s) 和 setComment(s) 方法处理现在称为 Notes 的内容，而不是 Comments。希望 Google 尽快为新评论添加方法。

# c# - 从字符串颜色生成颜色对象

> ID：12507732
> 
> 赞同：0
> 
> 时间：2012-09-20T07:18:18.203
> 
> 标签：c#

我想将 RGB 字符串转换为十六进制颜色代码。例如 ：

```
 string rgb = rgb(0, 0, 255); 
```

从上面的RGB我想得到：

```
 string hex = #0000FF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:25:34.230

使用内置的[ColorTranslator.ToHtml](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.tohtml%28v=vs.80%29.aspx)

```
string hex = ColorTranslator.ToHtml(myColor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:25:17.707

简直就是这样

```
string hex = "#" + rgb.R.ToString("X2") + rgb.G.ToString("X2") + rgb.B.ToString("X2"); 
```

# objective-c - Objective-c 中的花括号

> ID：12507738
> 
> 赞同：0
> 
> 时间：2012-09-20T07:18:50.370
> 
> 标签：objective-c, ios, c, curly-braces

**注意：**我的问题是在检查[此](https://stackoverflow.com/questions/9704083/unnecessary-curly-braces-in-c)内容及其答案后得出的。

在一些更大的方法中，有些代码你只想在一段时间内存活。一个例子：

1）我有一个设置我的 UI 的大方法：`UILabel's`大小、颜色、定位、`UIView's`手势识别器等。知道了以上内容，做这样的事情是否有意义：

```
- (void)setUI
{
    //setting other UI elements
    {
        // Add the Swipe Gesture to the swipeUpView
        UISwipeGestureRecognizer *swipeGestureUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(animeViewWithSwipeGesture)];

        swipeGestureUp.direction = UISwipeGestureRecognizerDirectionUp;
        [_swipeUpView addGestureRecognizer:swipeGestureUp];
    }

    // setting other UI elements
} 
```

*   基于上面的例子，这是降低应用程序内存占用的有效方法吗？
*   有关系`@autoreleasepool{}`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:07:07.610

这只是简单的 C 语法。正如其他人提到的那样，您使用它来打开一个新范围。这意味着（这是 C 功能）您可以再次为堆栈变量使用相同的名称，因为它们在不同的范围内。此外，您在该范围内声明的变量将无法被外部范围访问。

与内存占用无关，仅与代码组织有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:35:08.747

> 基于上面的例子，这是降低应用程序内存占用的有效方法吗？

不，他们甚至没有关系。它们也不相关`@autoreleasepool`- 花括号的这种用法是打开新范围的普通 C 方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:29:48.010

花括号所做的只是定义一个新的作用域，因此您可以定义与其他外部作用域变量同名的新变量。

@autoreleasepool{} 块与此类似，但也在开始时声明了一个自动释放池并在结束时将其排空，因此从内存占用的角度来看可能会更好，因为在其中声明的所有自动释放对象都会在退出时被释放那个范围。

# css - css print - 大表 - 最后一行被拆分为某些页面

> ID：12507747
> 
> 赞同：2
> 
> 时间：2012-09-20T07:19:16.770
> 
> 标签：css, printing, internet-explorer-7, page-break

我正在使用以下 css 在打印时显示大量表格数据。

```
#toolbar.fixed + .content{
  overflow: visible;
  position: static;
  bottom: 0em;
}

table { page-break-after:auto }
  tr    { page-break-inside:avoid; page-break-after:auto }
  td    { page-break-inside:avoid; page-break-after:auto }
  thead { display:table-header-group }
  tfoot { display:table-footer-group } 
```

我使用的浏览器是 IE 7。我面临的问题是某些页面最后一行的数据在当前页面和下一页之间被分割。我试图弄清楚我上面的 css 是否有问题，或者我是否需要引入额外的 css 以防止最后一行数据（仅在某些页面上）停止在两页之间拆分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:28:48.673

`page-break-inside`许多主流浏览器仍然不支持：http: [//www.w3schools.com/cssref/pr_print_pagebi.asp](http://www.w3schools.com/cssref/pr_print_pagebi.asp)

另请注意，定位对象内不允许分页符。

使用`page-break-before: auto;`And`page-break-after: auto;`可能会解决此问题，但您可以[将此页面](http://www.westciv.com/style_master/academy/css_tutorial/advanced/printing.html)用作创建所需样式的指南，而无需使用`page-break-inside`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T14:18:42.327

使用下面的代码.....`function printControl(){

```
 var table = document.getElementById("DataList1");
    var count = table.rows.length;
    for (var i = 0; i < count; i++) {
        if ((i % 4 == 0)&&(i!=0)) {
            table.rows[i].style.cssText = "page-break-after:always";
        }
    }
}` 
```

# c# - 调用 BitmapDecoder.CreateAsync(stream) 时 WinRT 应用程序挂起

> ID：12507749
> 
> 赞同：2
> 
> 时间：2012-09-20T07:19:23.303
> 
> 标签：c#, windows-runtime, winrt-async

我有以下方法，我传递了一个加载了 JPEG 数据的 InMemoryRandomAccessStream：

```
private async Task<byte[]> GetDataAsync(IRandomAccessStream stream)
{
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(stream);

    BitmapFrame frame = await decoder.GetFrameAsync(0);

    BitmapTransform transform = new BitmapTransform()
    {
        ScaledWidth = decoder.PixelWidth,
        ScaledHeight = decoder.PixelHeight
    };

    PixelDataProvider pixelData = await frame.GetPixelDataAsync(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight, transform, ExifOrientationMode.IgnoreExifOrientation, ColorManagementMode.DoNotColorManage);

    return pixelData.DetachPixelData();
} 
```

此方法一直挂起，除非我在第一行设置断点并跨过每一行。我尝试使用不同的 JPEG 图像，修改“GetPixelDataAsync”的参数并在行之间临时插入“await Task.Delay(...)”，但没有任何帮助。该应用程序执行许多其他耗时的异步操作，并且除了这部分之外工作正常。目前尚不清楚为什么设置断点（除了它会产生一些时间延迟）使其工作。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:38:04.093

我猜在野外，但我遇到了同样的[问题](https://stackoverflow.com/questions/12235085/winrt-loading-static-data-with-getfilefromapplicationuriasync)。

我认为您从同步上下文中调用此异步方法，例如：

```
private void ButtonClick(...) 
{
  var bytes = GetDataAsync(...);
} 
```

这将导致您的应用程序在导致死锁的 UI 线程中运行。要么使调用方法也异步，这将起作用，要么使用 ConfigureAwait(false)：

```
private async Task<byte[]> GetDataAsync(IRandomAccessStream stream)
{
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(stream).AsTask().ConfigureAwait(false);

    BitmapFrame frame = await decoder.GetFrameAsync(0).AsTask().ConfigureAwait(false);

    BitmapTransform transform = new BitmapTransform()
    {
        ScaledWidth = decoder.PixelWidth,
        ScaledHeight = decoder.PixelHeight
    };

    PixelDataProvider pixelData = await frame.GetPixelDataAsync(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight, transform, ExifOrientationMode.IgnoreExifOrientation, ColorManagementMode.DoNotColorManage).AsTask().ConfigureAwait(false);

    return pixelData.DetachPixelData();
} 
```

也许在这里看看这个关于使用 async/await 和获取死锁的非常好的[解释](http://nitoprograms.blogspot.de/2012/07/dont-block-on-async-code.html)。

# javascript - 如何在 javascript 中调用 Id？

> ID：12507759
> 
> 赞同：0
> 
> 时间：2012-09-20T07:20:00.417
> 
> 标签：javascript, asp.net-mvc-3, html

我制作了一个 javascript 函数来生成一个弹出窗口，但弹出窗口依赖于另一个表单上的 id，所以我想知道这可以完成。这是我到目前为止所做的：

```
$('.popupWindow').click(function () {
  var model = { NameId: $('#NameId').val()}
  myWindow = window.open('/Company/Edit/0?NameId=' + model, '',     
    'scrollbars=yes,width=500,height=500')
  myWindow.focus()
}); 
```

这已经创建了一个弹出窗口，但是它获取的 Id 返回 object Object，因此弹出屏幕的 url 变得`~/Company/Edit/0?NameId=[object Object]`如此明显，它返回一个错误。我在这里做错了什么？

顺便说一句，我正在使用 MVC 3。而且我还在使用 ActionLink (razr) 作为视图。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:22:23.747

您创建了一个带有属性的模型`NameId`，所以不要使用模型，而是使用这个：

```
model.NameId 
```

在您的示例中，它将如下所示：

```
myWindow = window.open('/Company/Edit/0?NameId=' + model.NameId, '',   'scrollbars=yes,width=500,height=500') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:23:20.370

尝试使用而不是

```
NameId: $('#NameId').val() 
```

这

```
NameId: $('#NameId').attr('id'); 
```

# objective-c - 如何将 iOS 4（非 ARC）项目转换为 iOS 5（使用 ARC）

> ID：12507762
> 
> 赞同：0
> 
> 时间：2012-09-20T07:20:04.540
> 
> 标签：objective-c, ios5, xcode4.4

> **可能重复：**
> [如何使用 ARC 启用自动更改代码](https://stackoverflow.com/questions/7874727/how-to-automatically-change-code-with-arc-enable)

我是 iOS 开发的新手。我在 iOS 4（非 ARC）中创建了一个项目。我想在 iOS 5（使用 ARC）中转换这个项目。

他们在 Xcode 中是否有任何选项可以直接在 iOS 5 中转换我的项目（使用 ARC）？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:22:26.710

编辑 -> 重构 -> 转换为 Objective-C ARC

# django - 从非安全页面发布到安全页面时，django csrf 失败

> ID：12507773
> 
> 赞同：0
> 
> 时间：2012-09-20T07:20:53.590
> 
> 标签：django, django-csrf

我在所有静态页面中都有登录表单。我在我的项目中启用了 csrf 中间件。现在，当用户从 http 静态页面提交表单时，我收到错误消息，

```
csrf verification failed 
```

有没有办法确保跨站点验证，即使从非安全页面发布到安全页面？

我既不想添加 scrf 豁免装饰器，也不想将页面更改为 https。

这是我的模板：

```
 <form action='{{login_url}}' method = 'post'>
            {% csrf_token %}

            <div class="searchbox login">
 <input autocomplete="off" id="id_fakeusername" type="text" name="fakeusername"    maxlength="100" value='Email' style="color: #727272" onfocus="$('#id_fakeusername').hide();$('#id_username').show();        

$('#id_username').focus();"  />

<input autocomplete="off" type='text' id="id_username" type="text" name="username"  maxlength="100" style="display: none" value='' onblur="if ($('#id_username').attr('value') == '') {$('#id_username').hide();$('#id_fakeusername').show();}"  />
        </div>
        <div class="searchbox login">
            <input autocomplete="off" id="id_fakepassword" type="text" name="fakepassword"  maxlength="50" style="color: #727272" value='Password' onfocus="$('#id_fakepassword').hide(); $('#id_password').show();  $('#id_password').focus();"  />

<input autocomplete="off" type='password' id="id_password" name="password" type="text"  style="display: none" value='' onblur="if ($('#id_password').attr('value') == '') {$('#id_password').hide();$('#id_fakepassword').show();}"  />
        </div>
            {% block nativewin %}
        <div class="loginbut"><input type="submit" border="0" title="Login" value="Login" /></div>
    {% endblock nativewin %}
    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:44:42.563

来自 CsrfViewMiddleware 代码 [1]：

```
 # Suppose user visits http://example.com/
            # An active network attacker (man-in-the-middle, MITM) sends a
            # POST form that targets https://example.com/detonate-bomb/ and
            # submits it via JavaScript.
            #
            # The attacker will need to provide a CSRF cookie and token, but
            # that's no problem for a MITM and the session-independent
            # nonce we're using. So the MITM can circumvent the CSRF
            # protection. This is true for any HTTP connection, but anyone
            # using HTTPS expects better! For this reason, for
            # https://example.com/ we need additional protection that treats
            # http://example.com/ as completely untrusted. Under HTTPS,
            # Barth et al. found that the Referer header is missing for
            # same-domain requests in only about 0.2% of cases or less, so
            # we can use strict Referer checking. 
```

所以我认为你的问题的答案是“不”，使用内置保护！

[1] [https://github.com/django/django/blob/master/django/middleware/csrf.py#L118](https://github.com/django/django/blob/master/django/middleware/csrf.py#L118)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:25:55.553

你`{{ csrf_token }}`在你的[模板](https://docs.djangoproject.com/en/dev/topics/forms/#displaying-a-form-using-a-template)中包含了吗？

```
<form action="/contact/" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

`RequestContext`您是否在 render_to_response 中包含了一个？

```
from django.template import RequestContext
from django.shortcuts import render_to_response

return render_to_response('contact.html', {'form': form},
                   context_instance=RequestContext(request)) 
```

如果它仍然不起作用，请按照[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)中描述的步骤进行操作。

# c# - 如何在自定义错误页面上获取错误代码

> ID：12507774
> 
> 赞同：-1
> 
> 时间：2012-09-20T07:20:54.043
> 
> 标签：c#, asp.net, web

我的 asp.net 网站有一个常见的自定义错误页面，因为它很常见，它显示在每个错误上发生的错误。

注意：解决方案必须基于会话，我当然不希望任何用户显示在任何其他用户的系统上发生的错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T07:36:26.207

您使用 IIS 还是 Apache？

**对于 Apache** 配置 Apache 以提供定制的错误页面非常容易；httpd.conf 文件中有一段专门用于此。每个错误只需要一个指令即可实现。如果您打开 conf 文件并向右滚动到几乎第二部分的最底部，您将看到需要编辑的部分。默认情况下，这些指令被注释掉，但您需要做的就是取消注释每个指令，然后更改路径以指向您自己的错误页面。

错误文档 404 /errordocs/404error.html

**对于 IIS** IIS 6：编辑网站或虚拟目录，然后是用户定义的错误。在那里您可以编辑所有错误文件并更改为用户定义的 asp.net 文件。

IIS 7：详细错误消息请参阅：http: [//blogs.msdn.com/b/rakkimk/archive/2007/05/25/iis7-how-to-enable-the-detailed-error-messages-for-the-网站浏览时来自客户端browsers.aspx](http://blogs.msdn.com/b/rakkimk/archive/2007/05/25/iis7-how-to-enable-the-detailed-error-messages-for-the-website-while-browsed-from-for-the-client-browsers.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T07:30:23.837

我的建议是扩展 UI.Page 类并将该类用于所有页面。

在该类中（我知道 vb 不是 c#，但原理相同且易于转换）使用以下代码：

```
Public Class _PageBase
    Inherits System.Web.UI.Page

#Region "Page Functions"

    Private Sub Page_Error(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Error
        Session("error_StackTrace") = Server.GetLastError.StackTrace.ToString
        Session("error_Message") = Server.GetLastError.Message.ToString
        Session("error_Page") = Request.Url.ToString
        Session("error_Source") = Server.GetLastError.Source.ToString

        Server.ClearError()

        Response.Redirect("~/errors/Error.aspx")
    End Sub

#End Region

End Class 
```

这将在使用该基类的所有页面上触发，并传递最后一个“服务器”错误（这将是用户导致的错误），将所有详细信息存储在会话中并将其传递到您的错误页面。然后你就可以随心所欲了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T07:42:34.770

不知道你想做什么。您必须捕获页面内发生的代码错误，并在该页面上显示消息 - 留在页面上 - 如果可能，请让用户有机会更正它。如果您的错误超出了您的尝试/捕获并失控，请记录并修复它。

您可以向用户显示的唯一错误是“未找到页面”。

你可以得到最后一个错误`Exception LastOneError = Server.GetLastError();`

在那里您可以阅读有关错误的更多信息：[如何在我的 ASP.NET 应用程序中创建一个“通用错误”页面，以便它处理在提供该页面本身时触发的错误？](https://stackoverflow.com/questions/10751363/how-do-i-make-a-generic-error-page-in-my-asp-net-application-so-that-it-handle/10751939#10751939)

以及[如何判断我的 global.asax 捕获的错误是否显示在用户的屏幕上](https://stackoverflow.com/questions/10934145/how-to-tell-if-an-error-captured-by-my-global-asax-was-displayed-on-the-screen-o)

# c# - 如何使用 C# 代码而不是 XAML 启用窗口镶边？

> ID：12507782
> 
> 赞同：3
> 
> 时间：2012-09-20T07:21:50.123
> 
> 标签：c#, wpf, xaml, window-chrome

所以我使用[WPFShell](http://archive.msdn.microsoft.com/WPFShell)将 chrome 应用到自定义窗口。我从[这篇文章](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)中了解到，为了使用它，我必须引用[Microsoft.Windows.Shell 库](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=WPFShell&DownloadId=11220)并使用以下 XAML 代码：

```
<shell:WindowChrome.WindowChrome>
    <shell:WindowChrome
    ResizeBorderThickness="6"
    CaptionHeight="43"
    CornerRadius="25,25,10,10"
    GlassFrameThickness="0">
    </shell:WindowChrome>
</shell:WindowChrome.WindowChrome> 
```

**我的问题是，如何使用 C# 代码而不是 XAML 启用 chrome？**（即如何在代码隐藏中应用 chrome？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T07:29:58.283

啊，愚蠢的我。很容易：

```
WindowChrome.SetWindowChrome(this, new WindowChrome()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-29T04:48:30.380

我知道这是一个较老的问题，但我注意到我无法`WindowChrome.GetWindowChrome()`在 .NET 4.5 中工作。我不确定这是否与`System.Windows.Shell`包含在`PresentationFramework`程序集中有关。但是由于它不断返回`null`，因此无法更新 chrome。

所以我的解决方案是添加一个“名称”，`WindowChrome`使其可以在代码隐藏中访问。

XAML：

```
<Window x:Class="SomeProject.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
    mc:Ignorable="d"Title="Some Window" WindowStyle="None" ResizeMode="CanResize" 
    AllowsTransparency="True">

    <WindowChrome.WindowChrome>
        <WindowChrome x:Name="chrome" ResizeBorderThickness="6" CaptionHeight="0"
                      GlassFrameThickness="0" CornerRadius="0" UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

</window> 
```

代码背后：

```
using System;
using System.Window;    

namespace SomeProject
{
    public partial class MainWindow: Window
    {
        public MainWindow()
        {
            //Get Existing 'WindowChrome' Properties.
            var captionHeight = chrome.CaptionHeight;

            //Set Existing 'WindowChrome' Properties.
            chrome.GlassFrameThickness = new Thickness(2d);

            //Assign a New 'WindowChrome'.
            chrome = new System.Windows.Shell.WindowChrome();
        }
    }
} 
```

我希望这对需要它的人有所帮助。

# ios - Facebook SSO IOS 不返回应用

> ID：12507783
> 
> 赞同：4
> 
> 时间：2012-09-20T07:21:53.400
> 
> 标签：ios, facebook

我们在应用程序中使用 Facebook SSO。单击 Facebook 登录应用程序转到 Facebook 应用程序，显示登录。但是登录后它不会返回到应用程序。但是，如果用户已经登录 Facebook 应用程序，则单击登录按钮会切换到 Facebook 应用程序并显示权限对话框。单击允许它返回到应用程序。这是默认行为吗？或者我的代码或我们的 Facebook 应用设置有什么问题吗？提前致谢。

```
SHAppDelegate *appDelegate = [SHAppDelegate application];
NSArray * permissions = [[NSArray alloc]initWithObjects:FACEBBOK_PERMISSION, nil];
  if (!appDelegate.session.isOpen) {
    appDelegate.session = [[[FBSession alloc] initWithPermissions:permissions] autorelease];
    if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
        [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                         FBSessionState status, 
                                                         NSError *error) {
            [self updateView];
        }];
    }
}
if (appDelegate.session.isOpen) {
    [appDelegate.session closeAndClearTokenInformation];
} else
{
    if (appDelegate.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        appDelegate.session = [[FBSession alloc] init];
    }

    // if the session isn't open, let's open it now and present the login UX to the user
    [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                     FBSessionState status, 
                                                     NSError *error) {
        // and here we make sure to update our UX according to the new session state
        [self updateView];
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:01:58.357

我有同样的问题。这不是 .plist 的麻烦 - 没有 URLSchemes(with fbXXXXX) facebook 应用程序和 safari 永远不会返回给您的应用程序。在这种情况下，Faccebook 应用程序仅在用户未登录时才返回。Safari 可以正确处理这种情况。如果用户取消权限确认，Facebook 应用程序不会返回控制权。在其他情况下，没关系。

# mysql - 在 MySQL 中进行排序时查询花费了太多时间

> ID：12507789
> 
> 赞同：0
> 
> 时间：2012-09-20T07:22:05.720
> 
> 标签：mysql, performance

查询： select field1 as Word,count(*) as Count from TestAdd1214190 group by field1 order by count desc

在 field1 列上创建的 Btree 索引

表中数据 50 lac

引擎：内存

解释类型：简单

使用索引；使用临时；使用文件排序

请建议我如何快速进行此查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:32:11.120

正如`Count(*)`MySql 优化的那样，您使用的列可能存在性能差异。你可以试试我们`Count([index field name])`。

有关此问题的更多信息，请参阅：[http ://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/。](http://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/)

# redis - 如何在redis中保存twitter状态对象？

> ID：12507790
> 
> 赞同：0
> 
> 时间：2012-09-20T07:22:05.230
> 
> 标签：redis

所以，我正在考虑使用 redis 来保存 twitter 状态对象。我刚开始使用redis，所以这是我的基本疑问：

当我使用 tweepy 时，我得到了状态对象。我想将这些状态对象存储在 redis 中。我正在使用 redis-py 并会使用 append 命令来执行此操作，但我希望所有状态对象都是唯一的。因此，这可能是一个相当愚蠢的问题，但我应该将它存储为值还是键。如果我将状态对象存储为值，那么我如何知道唯一值？redis 命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:34:37.073

twitter 中的每个状态都有一个唯一的 id。为什么不把它当作钥匙呢？

```
redis.set(statusid, status) 
```

# c# - 将内存流中的 CSV 文件读入 DataReader

> ID：12507791
> 
> 赞同：1
> 
> 时间：2012-09-20T07:22:06.830
> 
> 标签：c#, csv, oledb, memorystream, datareader

我有一个 CSV 文件存储在数据库中（二进制格式）。有没有办法将它加载到内存中，然后使用 a`DataReader`来读取它的内容？或者我真的必须将它保存到文件系统，然后使用`OleDb`. 我已经完成了后者，它工作得非常好。我只是想知道是否可以避免保存到文件系统。

有什么想法吗？

# apache-flex - 将值从 Google Maps Javascript API v3 传递到 Flex 应用程序

> ID：12507800
> 
> 赞同：1
> 
> 时间：2012-09-20T07:22:38.513
> 
> 标签：apache-flex, google-maps-api-3

我将我们的 Flash 版 Google 地图应用程序（版本 2）转换为 3.0 版，它是一个 Javascript API。现在我遇到了如何将地图 HTML 页面中的值传递给 flex 应用程序的问题。

具体来说，我想做的是将地图中的坐标（纬度/经度值集）传递给 flex 应用程序，以便 flex 应用程序可以将这些值保存在数据库中。有没有办法做到这一点？

注意：我使用“flex-iframe-1.4.6.swc”来显示谷歌地图。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:05:59.800

来自[flex-iframe 常见问题解答](https://github.com/flex-users/flex-iframe/wiki/FAQ)：

> **Flex 和 javascript 之间的通信**
> 
> 即从页面回调到 Flex 应用程序并从 Flex 应用程序调用到 javascript。我实现这一点的方式是使用 FABridge。请参阅 IFrameBridgeTest 演示。所以这是可能的，但并不简单。

# linux - 得到一个 bash 的 cwd

> ID：12507803
> 
> 赞同：0
> 
> 时间：2012-09-20T07:22:51.623
> 
> 标签：linux, bash

如果我在 Ubuntu 中打开 2 个终端，通过`ps u`我可以看到 2`bash`的`pid`.

我的问题来自一个终端，我怎么知道另一个终端`bash`的*cwd*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:25:20.563

你可以检查

```
/proc/<pid>/cwd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:56:12.113

该`pwdx`命令打印每个给定进程 ID 的当前工作目录。

来自 Solaris 的示例（相信 Ubuntu 也有该命令）：-

```
$ cd /tmp
$ pwdx $$
22281:  /tmp 
```

# c# - Json解析C#

> ID：12507806
> 
> 赞同：4
> 
> 时间：2012-09-20T07:23:12.383
> 
> 标签：c#, json, windows-phone-7, parsing, exception

我有一个像这样的Json

```
{ "nodes" : [{"id" : "36018","title" : "Fotarı","date" : "20.09.2012 00:45", "short_description" : "Dünrina, rr!","bigimage_width" : "468","bigimage" : "https://qew","croppedimage" : "https://qwe.jpg"},{"id" : "36009","title" : "ey","date" : "20.09.2012 00:03", "short_description" : "İntız!","bigimage_width" : "220","bigimage" : "https://312.jpg","croppedimage" : "https://41172.jpg"},{"id" : "35915","title" : "ai!","date" : "20.09.2012 00:02", "short_description" : "Ssdi...","bigimage_width" : "220","bigimage" : "https://qwe.qwe" : "https://asd.asd"},... 
```

所以我做了这个

```
JObject j = JObject.Parse(x); // x is downloaded JSon code
JArray sonuc = (JArray)j["nodes"]; 
```

但现在我有

```
[{"id":"1","name":"news"},{"id":"2","name":"hardware"},{"id":"3","name":"software"},{"id":"4","name":"\internet"},{"id":"6","name":"tv!"},{"id":"7","name":"texts"},{"id":"8","name":"update"},... 
```

那么我应该如何处理我的代码才能使其正常工作？

```
JObject j = JObject.Parse(x); // gives JsonReaderException exception here
JArray sonuc = (JArray)j[""]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:26:20.907

如果您在 JSON 中有一个数组（注意左括号`[`和右括号），您可以使用[JArray.Parse](http://james.newtonking.com/projects/json/help/index.html?topic=html/M_Newtonsoft_Json_Linq_JArray_Parse.htm)静态方法`]`直接解析它：

```
JArray sonuc = JArray.Parse(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:50:52.110

你有很多方法来解析你的 json，例如，你可以使用`dynamic`

```
dynamic obj1 = JsonConvert.DeserializeObject(json);
foreach (var node in obj1.nodes)
{
    Console.WriteLine("{0} {1}", node.id, node.title);
} 
```

或 linq

```
var obj2 = (JObject)JsonConvert.DeserializeObject(json);
var nodes= obj2["nodes"].Children()
            .Select(node => new
            {
                Id= (string)node["id"],
                Title = (string)node["title"]
            })
            .ToList(); 
```

# javascript - struts2 属性值作为 javascript 函数的参数

> ID：12507817
> 
> 赞同：2
> 
> 时间：2012-09-20T07:23:55.270
> 
> 标签：javascript, struts2

我在jsp页面中有一个。

我想将此值作为 java 脚本函数调用的参数传递

我的jsp apge代码是：

```
 <input type="submit" onclick="play(<s:property value="vname"/>)"> 
```

我的java脚本函数代码：

```
 function play(n)
    {
        alert(n);

    } 
```

请帮我解决这个问题；

看待

罗希特·卡恰迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:38:56.850

您必须用引号包裹 struts 标签：

```
<input type="submit" onclick="play('<s:property value="vname"/>')"> 
```

否则 "vname" 的值将被解释为 JavaScript 变量，而不是字符串！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T12:48:06.423

使用 struts2 标签：

```
<s:submit onclick="javascript:play('%{vname}')" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:41:37.310

同意daveoncode，除此之外在你的js中，直接获取就好

```
var varName = document.forms[0].name/id.value; 
```

或者您还有另一种选择来编写内联 js 并传递元素的值。但这是一个不好的做法。

# solrj - SOLR Java APi - 添加多个条件

> ID：12507818
> 
> 赞同：0
> 
> 时间：2012-09-20T07:23:59.883
> 
> 标签：solrj

我正在使用 Solr API 来索引记录和搜索功能。我正在使用以下代码进行搜索

```
ModifiableSolrParams params = new ModifiableSolrParams();
params.set("q", "country_id:("+id+")"); 
```

我想再添加一个参数，例如`state_id`，我想做逻辑 AND/OR 操作，并根据结果检索记录。我通过谷歌搜索，但找不到组合条件的方法。是否可以通过 SOLR api？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T11:50:14.883

您可以按照以下方式进行查询.....

String qr="cstm_text:"+"虔诚的";

SolrQuery qry = 新 SolrQuery(qr);

qry.setIncludeScore(true);

qry.setShowDebugInfo(true);

qry.setRows(1);

qry.setFacet(true);

ModifiableSolrParams 参数 = new ModifiableSolrParams();

params.set("qt", "/spell");

params.set("拼写检查", "on");

params.set(MoreLikeThisParams.MLT,true);

qry.add(参数);

# c# - 如何向 nopcommerce 添加新页面？

> ID：12507820
> 
> 赞同：1
> 
> 时间：2012-09-20T07:24:07.530
> 
> 标签：c#, asp.net-mvc, nopcommerce

我正在使用 nopcommerce 开源。

所以我想添加一个新的部分。它有不同的表、不同的页面和不同的逻辑。

所以我不知道该怎么做。

我想为租用物品添加新零件。所以它有不同的表，必须输入用户信息。它也是不同的页面并转到另一个新表。而且我还必须添加另一个条款和条件页面。

如果有人有任何想法或您是否知道有关如何逐步进行操作的链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:40:25.153

我建议写一个插件。您可以在以下帖子中了解如何执行此操作。 [https://docs.nopcommerce.com/developer/plugins/index.html](https://docs.nopcommerce.com/developer/plugins/index.html)

这意味着您可以将您的逻辑与核心 nopCommerce 逻辑分开，因此将来能够毫无问题地更新 nopCommerce 解决方案。

只要您将所有视图设置为具有嵌入式资源的构建操作，添加新页面就不会有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:12:38.437

如果您想使用 nopcommerce 基本功能，只需添加新控制器，然后从 BaseNopController 继承它，然后在 NOP.Core、NOP.Domain 和 NOP.Service 中的类，然后在 DependencyRegistrar.cs 中注册您的存储库和服务，或者您可以通过注册来做到这一点nopcommerec 的新区域。

# php - .net 中是否有 EOPAGE 的等价物？

> ID：12507822
> 
> 赞同：-1
> 
> 时间：2012-09-20T07:24:16.300
> 
> 标签：php, .net

只是想知道是否有任何.net 等效于 PHP 的 EOPAGE？为了清楚我的问题，这里有一个 EOPAGE 在 php 中的典型用法示例：

```
echo EOPAGE >>>
<div class="someclass" id="someid">EOPAGE rocks!</div>
<div>...
EOPAGE; 
```

基本上，我希望循环遍历一个数组并格式化输出，而不必在.net 中转义和拼凑子字符串。

提前谢谢！

PS：我知道类似的 .net 控件，例如中继器，它们与模板和数据源的实现几乎服务于相同的最终目标，但我只是想要一些适用于非页面上下文的简单无忧选项，例如使用响应处理程序的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:43:11.463

如果你想用 C# 写一个带有换行符的字符串，你可以使用`@`：

```
string s=@"ahsj skksjjsnnslskk
jjjjdjjasd
adsadassa
asdasdsad
asdsgdgdsg"; 
```

使用 tis 语法，您仍然可以在字符串中写入双引号，只需复制符号：`""`来表示`"`.

# jquery - 防止 ASP.NET MVC 捆绑加载多次

> ID：12507825
> 
> 赞同：7
> 
> 时间：2012-09-20T07:24:27.130
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

如果捆绑包已经加载，是否有内置的跟踪方法？我有几个编辑视图，例如需要 jquery 和 jquery.Validate 等库。我不需要在主布局页面上引用。由于一个页面可能包含几个不同的条件库......理想情况下，我希望@scripts.Render 知道我是否已经引用了一个库并阻止它重新加载。

干杯蒂姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T17:12:08.797

我认为[Hao Kung](https://stackoverflow.com/a/12572460/712526)和[user108](https://stackoverflow.com/a/12508004/712526)都有你的答案。

Hao Kung 正在解决系统知道您已经在页面上包含捆绑包并避免添加重复项的能力。这类似于[WordPress 的 enqueue script/style](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)所做的。MVC 还没有这个。您必须自己构建它。

user108 正在为您的问题提供可能的解决方案。他/她说在您的布局中您可以创建一个可选的“脚本”部分。然后，在需要 jquery 验证代码的视图中，您可以将其包含在布局的“脚本”部分中。这将完成您正在寻找的大部分内容。唯一不起作用的地方是，如果您在同一页面上有多个视图部分，都需要 jquery 验证代码。

你可以很容易地自己实现一个解决方案。这是[一个可以帮助您入门的 SO 帖子](https://stackoverflow.com/questions/7081009/how-to-use-razor-section-multiple-times-in-a-view-partialview-merge-without)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T20:32:03.643

听起来您要求的更像是资产管理，您可以在其中多次注册脚本，并拥有一个 API 来自动删除重复数据并呈现适当的列表。这在我们的待办事项列表中，但它目前还不是 API 的一部分。

如果这是你想要的，你可以在我们的 codeplex 网站上投票： [这个问题](http://aspnetoptimization.codeplex.com/workitem/26)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T16:47:46.037

试试这个：

```
 public static MvcHtmlString RequireClientScript(this HtmlHelper helper, string scriptPath)
    {
        var scripts = helper.ViewContext.HttpContext.Items["client-script-list"] as Dictionary<string, string> ?? new Dictionary<string, string>();

        if (!scripts.ContainsKey(scriptPath))
        {
            var sb = new StringBuilder();

            var scriptTag = new TagBuilder("script");

            scriptTag.Attributes.Add("type", "text/javascript");
            scriptTag.Attributes.Add("src", scriptPath);

            sb.AppendLine(scriptTag.ToString());

            scripts.Add(scriptPath, scriptPath);

            helper.ViewContext.HttpContext.Items["client-script-list"] = scripts;

            return new MvcHtmlString(sb.ToString());
        }

        return MvcHtmlString.Empty;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T07:37:26.897

如果您使用部分视图，则需要**参考脚本库**

在页面顶部只添加所需的脚本添加喜欢

```
@Scripts.Render("~/bundles/jquery") 
```

然后body标签底部添加

```
@RenderSection("scripts", required: false) 
```

任何其他页面扩展**脚本**部分，如

```
@section scripts{
    <script src="/Scripts/jquery.validation.js" type="text/javascript"></script>
} 
```

# android - 如何使用 mime 类型 video/raw 的字节数组创建位图

> ID：12507826
> 
> 赞同：1
> 
> 时间：2012-09-20T07:24:26.577
> 
> 标签：android, video

我使用 MediaCodec API 来解码 mp4 文件。现在我得到了具有 mime 类型的 video/raw 的字节数组，我怎样才能创建字节数组来创建`Bitmap`或任何其他对象，以显示在`Activity`? 这是所有的代码。

```
private Resources mResources;
private Button m_playBtn;
private ImageView imageView = null;
private MyAudioTrack audioTrack = null;

private File f = null;
private FileOutputStream fos = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    mResources = this.getResources();
    m_playBtn = (Button) findViewById(R.id.playBtn);
    m_playBtn.setOnClickListener(this);
    imageView = (ImageView) findViewById(R.id.imageView);
    imageView.setImageResource(R.drawable.eee);
    audioTrack = new MyAudioTrack(44100, AudioFormat.CHANNEL_CONFIGURATION_STEREO,AudioFormat.ENCODING_PCM_16BIT);
    audioTrack.init();
    f = new File("/sdcard/rawdata");
    try {
        fos = new FileOutputStream(f);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

/*
 * the local file at res/raw R.raw.admiral R.raw.ttt R.raw.ww The h264 file
 * can't decode by MediaCodec . Mp3 or Mp4 can get decode byte[] from
 * MediaCodec
 */
@Override
public void onClick(View v) {
    try {
        decode(R.raw.testmp4, 0.0f);
        //decode("http://192.168.2.14/img/video.mjpeg");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

/**
 * @param testinput
 *            the file to decode
 * @param master
 *            the "golden master" to compared against
 * @param maxerror
 *            the maximum allowed root mean squared error
 * @throws IOException
 */
@SuppressLint("ParserError")
private void decode(int testinput, float maxerror) throws IOException {

    AssetFileDescriptor testFd = mResources.openRawResourceFd(testinput);

    MediaExtractor extractor;
    MediaCodec codec;
    ByteBuffer[] codecInputBuffers;
    ByteBuffer[] codecOutputBuffers;

    extractor = new MediaExtractor();
    //      extractor.setDataSource("http://zhangmenshiting2.baidu.com/data2/music/10547672/10547672.mp3?xcode=bcab1e9a9ffffae03c350b4e1ff22833&mid=0.09955182129452");
    extractor.setDataSource(testFd.getFileDescriptor(),
            testFd.getStartOffset(), testFd.getLength());
    System.out.println("wrong number of tracks:" + 1 + ":"
            + (extractor.getTrackCount()));
    MediaFormat format = extractor.getTrackFormat(0);
    String mime = format.getString(MediaFormat.KEY_MIME);
    System.out.println("mime type=====>" + mime);
    System.out.println("not an audio file:" + (mime.startsWith("audio/")));
    codec = MediaCodec.createDecoderByType(mime);
    codec.configure(format, null /* surface */, null /* crypto */, 0 /* flags */);
    codec.start();
    codecInputBuffers = codec.getInputBuffers();
    codecOutputBuffers = codec.getOutputBuffers();

    extractor.selectTrack(0);

    // start decoding
    int numBytesDecoded = 0;
    int maxdelta = 0;
    // long totalErrorSquared = 0;
    final long kTimeOutUs = 5000;
    MediaCodec.BufferInfo info = new MediaCodec.BufferInfo();
    boolean sawInputEOS = false;
    boolean sawOutputEOS = false;
    while (!sawOutputEOS) {
        if (!sawInputEOS) {
            int inputBufIndex = codec.dequeueInputBuffer(kTimeOutUs);

            if (inputBufIndex >= 0) {
                ByteBuffer dstBuf = codecInputBuffers[inputBufIndex];

                int sampleSize = extractor
                        .readSampleData(dstBuf, 0 /* offset */);

                long presentationTimeUs = 0;

                if (sampleSize < 0) {
                    System.out.println("saw input EOS.");
                    sawInputEOS = true;
                    sampleSize = 0;
                } else {
                    presentationTimeUs = extractor.getSampleTime();
                }

                codec.queueInputBuffer(inputBufIndex, 0 /* offset */,
                        sampleSize, presentationTimeUs,
                        sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM
                                : 0);

                if (!sawInputEOS) {
                    extractor.advance();
                }
            }
        }

        int res = codec.dequeueOutputBuffer(info, kTimeOutUs);
        /**
         * from here can get the decode data
         */
        if (res >= 0) {
            MediaFormat ff = codec.getOutputFormat();// decode format
            System.out.println("Format:" + ff);
            //System.out.println("format information detail" + ff.getInteger("channel-count"));
            int outputBufIndex = res;
            ByteBuffer buf = codecOutputBuffers[outputBufIndex];
            final byte[] chunk = new byte[info.size];// decode data
            System.out.println("chunk.size" + chunk.length);
            buf.get(chunk);
            buf.clear();

            if(chunk.length > 0){
                fos.write(chunk);

            numBytesDecoded += info.size;

            codec.releaseOutputBuffer(outputBufIndex, false /* render */);

            if ((info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
                System.out.println("saw output EOS.");
                sawOutputEOS = true;
            }
        } else if (res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
            codecOutputBuffers = codec.getOutputBuffers();
            System.out.println("output buffers have changed.");
        } else if (res == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
            MediaFormat oformat = codec.getOutputFormat();
            System.out.println("output format has changed to :" + oformat);
        }
    }
    System.out.println("geshu:" + maxdelta);
    fos.flush();
    codec.stop();
    codec.release();
    testFd.close();

} 
```

你可以看到这样的输出格式：

格式：{height=240, what=1869968451, color-format=19, slice-height=240,crop-left=0, width=320,crop-bottom=239,crop-top=0, mime=video/raw , 步幅=320, 裁剪右=319}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:37:00.290

You have to show it on surface. Add to layout VideoView. Then use surface holder to obtain surface object. After that pass the object to method of codec configuration and put true in method releaseInOutputBuffer. Thus you video will be rendered on activity.

# sparql - SPARQL 查询：使用 VALUES 内联数据或 UNION 与大数据存储

> ID：12507831
> 
> 赞同：4
> 
> 时间：2012-09-20T07:24:47.053
> 
> 标签：sparql, union, rdf, blazegraph

我有一个看起来有点像的数据集：

```
<item1> <isLocated> <someAddress>
<item2> <isLocated> <someAddress>
<item3> <isLocated> <someOtherAddress> 
```

我希望能够使用 SPARQL 来回答这个问题：

“我会在 someAddress 或 someOtherAddress 找到哪些项目？”

我可以使用这样的 UNION：

```
SELECT ?item
{
    { ?item <isLocated> <someAddress> }
    UNION { ?item <isLocated> <someOtherAddress }
} 
```

但我认为当我开始谈论 100 或 1000 个地址时，这将变得相当混乱。

我认为 VALUES 内联数据可能比一堆 UNION 查询更合适。我尝试编写以下查询，但我的 RDF 存储/引擎（大数据）似乎卡住了它：

```
SELECT ?item
{
    ?item <isLocated> ?loc .
}
VALUES (?loc) { (<someAddress>) (<someOtherAddress>) } 
```

（基于[http://www.w3.org/TR/sparql11-query/#inline-data](http://www.w3.org/TR/sparql11-query/#inline-data)）

我从 bigdata 得到的错误是：第 5 行第 7 列的词法错误。遇到：“”（32），之后：“VALUES”

我是否正确地形成了这个查询？使用 UNION 或 VALUES 更合适吗？

似乎无论我如何格式化这个查询（基于上面链接中的 w3 示例），我都会得到类似的词法错误。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:52:29.677

猜测一下，我会说 Bigdata 还不支持该`VALUES`子句。这是最新的 SPARQL 工作草案（几周前发布）中引入的全新功能，因此很自然有几个工具还不支持它。

您可以尝试`BINDINGS`改用（这与以前的工作草案中的功能大致相同，已被替换）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T07:51:14.787

你把语法弄混了一点。要么使用：

```
VALUES ?loc { <someAddress> <someOtherAddress> } 
```

这是单个变量的特殊形式，或者：

```
VALUES (?loc) { ( <someAddress> ) ( <someOtherAddress> ) } 
```

一般形式。

你也可以试试[`IN`](http://www.w3.org/TR/sparql11-query/#func-in)

```
FILTER (?loc IN ( val1, val2, ...)) 
```

# java - 打印 XML 格式错误

> ID：12507832
> 
> 赞同：0
> 
> 时间：2012-09-20T07:24:50.983
> 
> 标签：java

```
"<?xml version=\"1.0\"?>"
                + "<methodResponse>"
                + "<fault>"
                + "<value>"
                + "<struct>"
                + "<member>"
                + "<name>faultCode</name>"
                + "<value>"
                + "<int>"
                + "-1"
                + "</int>"
                + "</value>"
                + "</member>"
                + "<member>"
                + "<name>faultString</name>"
                + "<value>"
                + "<string>"
                + "The element type value must be terminated by the matching end-tag </value>"
                + "</string>" + "</value>" + "</member>" + "</struct>"
                + "</value>" + "</fault>" + "</methodResponse>"; 
```

在这里，当我尝试添加文本元素类型值必须由匹配的结束标记终止时，它会抛出空指针异常。我该如何处理。我希望以下部分抛出错误。问题在于“结束标签”。我该如何处理。

```
+ "<string>"
                    + "The element type value must be terminated by the matching end-tag </value>"
                    + "</string>" + 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:30:39.343

*您应该通过自己不*创建 XML来处理这个问题- 您应该使用 XML API。

您通过尝试将其包含`</value>`为文本的一部分而不对其进行转义来创建无效的 XML。应该是`&lt;/value>`- 但不是手动修复此问题，您应该在创建 XML 时使用 XML API。

（`>` *可以*转义到`&gt;`，但不必如此。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:30:42.447

你需要逃避文字......

```
"The element type value must be terminated by the matching end-tag &lt;/value&gt;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:49:48.230

尝试在您的 XML 字符串中使用 CDATA；[XML CDATA](http://www.quackit.com/xml/tutorial/xml_cdata.cfm)和[Stackoverflow](https://stackoverflow.com/questions/4429385/why-xml-tag-data-inside-this-cdata)

# linq - 相关实体的Linq查询

> ID：12507834
> 
> 赞同：1
> 
> 时间：2012-09-20T07:25:06.343
> 
> 标签：linq

这可能是一个非常基本的问题，但我没有太多使用 Linq，所以需要帮助。我想根据相关记录计数检索记录列表。

例如：

我有一个与“角色”实体具有 1:N 关系的联系实体。我想选择有

1.  没有相关角色
2.  只有 1 个相关角色

我如何使用 Linq 编写这个

```
from contact in context.ContactSet
where <contact.Roles has no records> -- ?? 
select contact; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:27:08.777

## 描述

您可以使用`Count()`or`Any()`方法

> **Count()** - 返回序列中元素的数量。
> 
> **Any()** - 确定序列的任何元素是否满足条件。

## 样本

### 数数（）

**查询语法**

```
from contact in context.ContactSet
where contact.Roles.Count() == 0
select contact; 
```

**方法语法**

```
context.ContactSet.Where(c=> c.Roles.Count() != 0)); 
```

### 任何（）

**查询语法**

```
from contact in context.ContactSet
where !contact.Roles.Any()
select contact; 
```

**方法语法**

```
context.ContactSet.Where(c=> !c.Roles.Any()); 
```

## 方法和查询语法之间的性能没有差异，两者都将编译成相同的。

## 更多信息

*   [MSDN - Enumerable.Count 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)
*   [MSDN - Enumerable.Any 方法](http://msdn.microsoft.com/en-us/library/bb534972.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:27:09.250

选择没有角色的联系人：

```
from contact in context.ContactSet
where !contact.Roles.Any()
select contact; 
```

或者简单地说：

```
context.ContactSet.Where(c=> !c.Roles.Any()); 
```

选择分配了 n 个角色的联系人：

```
from contact in context.ContactSet
where contact.Roles.Count()==n
select contact; 
```

或者简单地说：

```
context.ContactSet.Where(c=> c.Roles.Count()==n)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:27:44.163

以下将选择`Roles`集合中恰好有 0 或 1 个项目的所有联系人。根据收集的类型和数据访问技术，`Count`财产可以通过一种方法，例如`Count()`。(`Count`也有重载，所以你可以有条件地计算项目，例如`.Count(x => x.SomeProperty && !x.SomeOtherProperty)`

```
from contact in context.ContactSet
where contact.Roles.Count <= 1
select contact; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:27:54.340

您可以使用检查`Count() <= 1`

林克风格：

```
from contact in context.ContactSet
where contact.Roles.Count() <= 1
select contact; 
```

方法风格：

```
context.ContactSet.Where(c => c.Roles.Count() <= 1); 
```

# java - 如何使用 StringTokenizer 进行选择查询？

> ID：12507835
> 
> 赞同：0
> 
> 时间：2012-09-20T07:25:12.827
> 
> 标签：java, spring-mvc, stringtokenizer

我正在尝试使用从视图（JSP）到控制器的最终用户的选定字段进行查询，但我不知道如何。

例如，我有这个参数来自视图（JSP）

```
IDUSER,>,2,OR,USERNAME,=,'KURT' 
```

所以，我想要这样的东西，

```
SELECT IDUSER, USERNAME FROM TABLE_NAME WHERE IDUSER > 2 OR USERNAME = 'KURT' 
```

但我有下一个结果

```
SELECT null FROM TABLE_NAME WHERE IDUSER > 2 OR USERNAME = 'KURT' 
```

我正在用`StringTokenizer`类解析字符串，其中查询是：`String query = request.getParameter("data");`而数据是`IDUSER,>,2,OR,USERNAME,=,'KURT'`。

```
StringTokenizer field = new StringTokenizer(query, ",");
nFields = field.countTokens();
System.out.println("nFields: " + nFields);
String[] fields = new String[nFields];
for(int i = 0; i < fields.length; i++) {
    while(field.hasMoreTokens()) {
         fields[i] = field.nextToken();
    }
    System.out.println("fields[i]: " + fields[i]);
    myQuery = "SELECT " + fields[i] + " FROM "+tableName+ " WHERE ";
    System.out.println("myQuery 1: " + myQuery);
}
StringTokenizer token= new StringTokenizer(query, "|,");
while(token.hasMoreTokens()) {
     myQuery = myQuery + token.nextToken() + " ";
}
System.out.println("QUERY RESOLVED: " + myQuery); 
```

**请帮我**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:39:02.290

这是对查询进行细微调整后的解决方案（重新定义分隔符）

```
public static void main(String[] args) {
        // Redefine the separators as single , separators is difficult to process
        //You would need to define possible operators like this (#OR# , #AND# ) ,surrounded by special characters to identify.
        String query ="IDUSER_>_2#OR#USERNAME_=_'KURT'";
        String tableName="TESTTABLE";
        String operator=null;
        //you can choose operator conditionally
        if(query.contains("#OR#")) operator="#OR#";
//      if(query.contains("#AND#")) operator="#AND#";
        //Used split instead of Tokenizer.
        String cols[]= query.split(operator);
        String myQuery = "SELECT ";
        String select="";
        for(String col:cols){
            if(!select.isEmpty()){
                select+=" , ";
            }
            // Only the first element is retrieved (for select)
            select+=col.split("_")[0];
        }
        myQuery+=select+" FROM "+tableName+ " WHERE ";
        // Removes all special charecters (like,  # and _ with white space)
        String subQuery = query.replaceAll("#", " ");
        subQuery=subQuery.replaceAll("_", "");
        myQuery+=subQuery;
        System.out.println("QUERY RESOLVED: " + myQuery);

    } 
```

> 注意： ',' 替换为 '_' 并且操作符被 '#' 包围

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:45:23.457

我认为问题在于您的 while 循环中的这一行：

```
myQuery = "SELECT " + fields[i] + " FROM "+tableName+ " WHERE "; 
```

`myQuery`这将在 while 循环执行时不断改变 的值。

也许您需要将其替换为：

```
myQuery = "SELECT " + fields[0] + " FROM "+tableName+ " WHERE ";
break; 
```

我假设您的选择标准是您认为参数中的第一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:45:33.647

不知道`IDPERFIL`从哪里来。另外，我不喜欢这样：

```
while(field.hasMoreTokens()) {
     fields[i] = field.nextToken();
} 
```

这会将标记器迭代到最后，并在最后一个元素处停止。我敢肯定你不想要这个。解决这个问题，告诉 IDPERFIL 来自哪里，然后，也许，你会自己理解答案。否则，我会尽力提供进一步的帮助。

# android - android文本视图在eclipse中给出运行时错误

> ID：12507840
> 
> 赞同：0
> 
> 时间：2012-09-20T07:25:28.270
> 
> 标签：android

在下面的代码中，我在 Eclipse 中遇到运行时错误。为什么编译时不显示此错误？

```
public class AndroidUIActivity extends Activity implements OnClickListener {
    private static final int PROGRESS = 0x1;
    private ProgressBar mProgress;
    private int mProgressStatus = 0;
    private int maxtime=0;
    private Handler mHandler = new Handler();
    int fileSize=0;
    private MediaPlayer mp3player;
    private TextView txt_Currenttime;
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        txt_Currenttime.setText(12); /* line with error */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:33:16.597

首先识别Textview id

```
Text view txt_Currenttime = (TextView)findViewById(R.id.textviewid); 
```

然后设置值

```
txt_Currenttime.setText(String.valueOf(12)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:27:49.780

你应该有类似的东西：

```
txt_Currenttime = (TextView)findViewById(R.id.textviewid);
txt_Currenttime.setText(String.valueOf(12)); 
```

在设置文本之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:36:40.110

在 java`private TextView txt_Currenttime`中意味着您只有一个引用，因此您需要`new`在使用之前构建一个对象（带有 a ）`txt_Currenttime`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:29:17.063

运行时错误即将到来，因为您将整数值设置为 textview 的文本，但 textview 不采用整数值，请在代码行下方更改

`txt_Currenttime.setText(12);`

至

`txt_Currenttime.setText(String.valueOf(12));`或者`txt_Currenttime.setText("12");`

并在之后添加以下行`setContentView(R.layout.main);`

```
txt_Currenttime = (TextView)findViewById(R.id.mTxtView1); 
```

它会解决你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T07:30:25.677

```
txt_Currenttime.setText(12); 
```

在这一行？需要使用 String 设置 textView

```
txt_Currenttime.setText("12"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T07:32:23.347

您应该首先找到该文本视图的 ID，然后您才能对该文本视图应用任何操作。您没有初始化文本视图，但您正在使用它，所以首先使用下面的代码然后设置文本。并且您必须将文本设置在双引号中。

```
txt_Currenttime = (TextView)findViewById(R.id.textviewid);
txt_Currenttime.setText("12"); 
```

# c# - 带有自定义类的 wpf 树视图

> ID：12507841
> 
> 赞同：0
> 
> 时间：2012-09-20T07:25:31.120
> 
> 标签：c#, wpf, treeview

我想像这样在 Treeview 中显示数据：(*1)

```
 - There are 2 tickets 
   -- Opening problem category with ID 5685
   -- Closing problem category with ID 5687
 - There are 3 projects
   -- WPF project with ID 1234
   -- C# project with ID 12345
   -- ASP.NET project with ID 12 
```

`Tickets`,`Projects`类继承自`EntityBase`类

```
public class EntityBase
    {
        public int EntityID { get; set; }
        public static EntityCollection entityCollection { get; set; }
        public EntityBase() 
        {
            entityCollection = new EntityCollection();
        }
    } 
```

EntityCollection 有私有`List<EntityBase>`数据。

为了制作项目或票证的父节点，我创建了`TreeViewParentNode`类

```
 public class TreeViewParentNode
        {
            public string ParentName { get; set; }
            public List<EntityBase> ParentItems;
            public int ParentCount;
            public TreeViewParentNode(string ParentName) 
            {
                ParentCount = 0;
                this.ParentName = ParentName;
                ParentItems = new List<EntityBase>();
            }
 } 
```

我创建了一个集合来在`Treeview` `ObservableCollection<TreeViewParentNode>` 窗口的构造函数中显示数据：

```
 public ReminderExtendedWindow()
        {
            InitializeComponent();
            this.ResizeMode = ResizeMode.NoResize;
            List<TreeViewParentNode> Nodes = new List<TreeViewParentNode>();
            foreach (EntityBase EntityItem in EntityBase.entityCollection)
            {
               TreeViewParentNode findnode = Nodes.Find(
                   delegate(TreeViewParentNode node) 
                   { 
                       return node.ParentName == EntityItem.GetType().Name; 
                   }
                   );
               if (findnode == null)
               {
                   TreeViewParentNode NewParentNode = new TreeViewParentNode(EntityItem.GetType().Name);
                   NewParentNode.ParentItems.Add(EntityItem);
                   NewParentNode.ParentCount++;
                   Nodes.Add(NewParentNode);
               }
               else
               {
                   findnode.ParentItems.Add(EntityItem);
                   findnode.ParentCount++;
               }
            }
            Coll = new ObservableCollection<TreeViewParentNode>(Nodes);
            DataContext = this;

        } 
```

树视图**XAML**代码

```
<TreeView Height="500" Width="375" Background="Transparent" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,50,0,0" 
               BorderThickness="0,0,0,0" x:Name="EntityTree" ItemsSource="{Binding Coll}"> 
```

我应该怎么做才能显示上面（* 1）中显示的数据？

# asp.net - 比较 vb.net 中的两个 PDF 文件？

> ID：12507845
> 
> 赞同：-3
> 
> 时间：2012-09-20T07:25:42.957
> 
> 标签：asp.net, .net, vb.net, c#-4.0

我正在处理 vb.net 中的 pdf 文件。我想比较两个 pdf 文件。是否有任何用于此目的的 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:29:00.577

您可以使用 ABCpdf 对 PDF 做很多事情。它工作得很好。

但是，比较 PDF 存在一个固有的问题，因为它们的结构并不总是很好。但是，例如，如果您的 PDF 有表单域，您可以很容易地将表单域值与[ABCpdf](http://www.websupergoo.com/)进行比较。

这是一篇文章，展示了如何使用 ABCpdf 从 PDF 中获取文本： [https ://stackoverflow.com/a/10998043/392362](https://stackoverflow.com/a/10998043/392362)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:28:48.640

如果您想比较精确匹配，您可以简单地计算和比较它们的[SHA1 校验和](https://stackoverflow.com/questions/1993903/how-do-i-do-a-sha1-file-checksum-in-c)。

# php - 显示一个选项卡的一部分 mysql 在另一个选项卡中不存在

> ID：12507846
> 
> 赞同：1
> 
> 时间：2012-09-20T07:25:49.690
> 
> 标签：php, mysql

我有两个分别命名为 liste_pieces 和 client_pieces 的选项卡。

第一个包含大约 1000 个元素的列表。第二个包含第一个的一些元素。

实际上，我正在做一个查询以用第一个选项卡填充第二个选项卡。

我还想显示第一个中不在第二个中的所有元素。

我以为我可以联合起来，因为联合只会显示两个选项卡中的元素。

实际上这不是我想要的。

我暂时完成了该查询

```
 <table id="box-table-a" width="100%">
    <tr>
        <th scope="col" width="50%">LISTE DES PI&Egrave;CES</th>
        <th scope="col" width="50%">AJOUT ?</th>
    </tr>

<?php $sql="SELECT * FROM `liste_pieces`";
$result=mysql_query($sql) or die;$i=0;
while($data=mysql_fetch_assoc($result))

{?>
<tr>
    <td><?php echo $data['libelle'] ; ?></td>
    <td style="text-align:center" align="center">
  <p align="center">  <input type="hidden" name="piece[<?php echo $i ; ?>]" value="0" /><input type="checkbox" class="checkbox" value="1" name="piece[<?php echo ++$i ; ?>]" id="piece[<?php echo ++$i ; ?>]" /></p></td>

</tr>
<?php } ?> 
```

但这向我显示了第一个选项卡中的所有元素。我真的不知道如何删除第二个选项卡中存在的元素。

我在 liste_pices 上的列 ID 与第二个选项卡中的相同，只是它称为 id_piece。

我有点失落。

我不知道如何处理。

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:34:53.803

此查询应该为您解决问题。是的，按照您的要求，这是一个连接查询：

```
select
    a.col1,
    a.col2,
    b.col1 // etc
from
    liste_pieces a
        join client_pieces b
            on a.id=b.id_peice
where b.id_piece is null 
```

这是我的数据库中的一个示例：

```
mysql> select id, brand from cars;
+----+-------+
| id | brand |
+----+-------+
|  1 |     2 |
|  2 |     1 |
|  3 |     3 |
|  4 |     4 |
|  5 |     2 |
|  6 |     5 |
|  7 |     1 |
|  8 |     2 |
|  9 |     2 |
| 10 |     5 |
| 11 |     2 |
+----+-------+
11 rows in set (0.00 sec)

mysql> select id, brand from brands;
+----+--------+
| id | brand  |
+----+--------+
|  1 | Ford   |
|  2 | Toyota |
|  3 | Nissan |
|  4 | Smart  |
|  5 | BMW    |
|  6 | Holden |
+----+--------+
6 rows in set (0.00 sec)

select
    a.brand
from
    brands a
        left join cars b
            on a.id=b.brand
where
    b.brand is null

+--------+
| brand  |
+--------+
| Holden |
+--------+
1 row in set (0.00 sec) 
```

另外：我刚刚写了一个非常长的问题和答案，涵盖了这种确切[的问题](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)，我希望这将有助于阐明连接如何在表上工作以及如何从数据库中的多个表中获取信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:32:15.823

使用这样的查询

`"select * from liste_pieces where column_name not IN (select column_name from client_pieces)"`

和

`"select * from client_pieces where column_name not IN (select column_name from liste_pieces )"`

这将解决您的问题，`column_name`应该存在于具有相同数据类型的两个表中。

# java - 在 POST 之前获取重定向的 URL

> ID：12507849
> 
> 赞同：0
> 
> 时间：2012-09-20T07:26:03.830
> 
> 标签：java, post, streaming, httpurlconnection

我有一个对 URL 进行 POST 的代码。该代码使用`setFixedLengthStreamingMode`，因为它提前知道 POST 的长度。我遇到的情况是，在某些情况下，URL 可能会被重定向到其他内容，并且启用了流模式；它无法遵循重定向。有没有办法在实际发布数据之前进行检查以查看 URL 是否被重定向？还是我想错了方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:16:18.730

一般来说，不，没有。在正常的 Web 用例中，尽管在从提交表单完成 POST 请求之后，您应该始终按照最佳实践获得重定向，但这远不能保证。例如，如果数据相似，它可以做一个请求，如果它是别的东西，它就不做。它总是会因错误而失败。

对于一些有限的用例，可能会始终遵循一些逻辑，但那是逐案处理的事情。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29)：

> 启用输出流时，无法自动处理身份验证和重定向。如果需要身份验证或重定向，则在读取响应时将抛出 HttpRetryException。可以查询此异常以获取错误的详细信息。

因此，虽然不会自动处理重定向，并且即使您无法真正事先检查重定向，但您可以做的是捕获异常并根据该异常自行执行步骤。

# java - mvc 中的冲突：调度程序 servlet 配置中的注释驱动

> ID：12507854
> 
> 赞同：2
> 
> 时间：2012-09-20T07:26:27.893
> 
> 标签：java, spring-mvc, ant, websocket, atmosphere

我试图将大气 websockets maven 项目集成到 spring ant 项目中。但是在配置时，似乎在 bean 实例化中引发了一些冲突。

这是我的调度员-servlet

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
        </list>
    </property>
</bean>

<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <beans:bean class="com.project.AtmosphereArgumentResolver" />
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

这是显示的错误：

> 请求处理失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [org.atmosphere.cpr.AtmosphereResource]：指定的类是一个接口

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-20T08:03:41.387

确切地！`org.atmosphere.cpr.AtmosphereResource`是一个接口所以例外。Spring 正在尝试实例化 bean `org.atmosphere.cpr.AtmosphereResource`，它应该是一个类，但它是一个接口。你不能实例化接口。您需要提供`org.atmosphere.cpr.AtmosphereResource`的实现类。

# lotus-notes - Lotus Notes：从数据库中清理日志文件不会影响数据库大小和文档计数。

> ID：12507855
> 
> 赞同：1
> 
> 时间：2012-09-20T07:26:39.217
> 
> 标签：lotus-notes, lotus-domino, lotus

从数据库中清理日志文件仍然不会影响文档计数和数据库大小。请帮忙。我正在使用 Lotus Notes 6.5 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:29:35.863

清理日志后尝试使用“compact”（压缩数据库）..

[http://www-12.lotus.com/ldd/doc/domino_notes/rnext/help6_admin.nsf/b3266a3c17f9bb7085256b870069c0a9/4bc933e0fb0898bd85256c1d0039d413?OpenDocument](http://www-12.lotus.com/ldd/doc/domino_notes/rnext/help6_admin.nsf/b3266a3c17f9bb7085256b870069c0a9/4bc933e0fb0898bd85256c1d0039d413?OpenDocument)

“当从数据库中删除文档和附件时，Domino 会尝试重用未使用的空间，而不是立即减小文件大小。有时 Domino 将无法重用空间，或者由于碎片，无法重用空间有效，直到您压缩数据库。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:06:00.057

如果文档计数没有下降，可能是您启用了软删除。有关详细信息，请参见[此处](http://www-01.ibm.com/support/docview.wss?uid=swg21091152)。

# sql - sql查询的条件更新

> ID：12507867
> 
> 赞同：0
> 
> 时间：2012-09-20T07:27:16.403
> 
> 标签：sql, sql-server

在我的代码中，我根据日期编写了一个更新查询。这意味着，我创建了一个工资单应用程序，在那个月里，他们想将月假加为两个。如果是新加入者，将两者分开。这是我通过代码完成的过程。现在他们想改变模型，即如果新的加入者加入日期已经大于15天，则应该增加1天的假期。请帮助我做到这一点。这是我使用之前的代码：

```
UPDATE tbl_emploeedetails
SET    elbal = elbal - 2
WHERE  employeestatus = 'L'
       AND ( Month(doj) = Month(Getdate()) - 1
             AND Year(doj) = Year(Getdate())
             AND Day(doj) > 25 )
        OR ( Month(doj) = Month(Getdate())
             AND Year(doj) = Year(Getdate()) ) 
```

这是月假添加查询：

```
update tbl_emploeedetails 
    set elbal = elbal + 2 where employeestatus = 'L' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:10:18.527

你可以使用这样的东西

```
UPDATE YourTable
SET UpdateColumn =
(CASE
     WHEN <Condition1> THEN <Expression1> 
     WHEN <Condition2> THEN <Expression2> 
     ELSE <Expression3> 
END) 
```

例子：

```
UPDATE YourTable
SET UpdateColumn =
(CASE
     WHEN A>B THEN D * 2
     WHEN A>C THEN D * 3
     ELSE D * 4
END) 
```

# php - 根据选中的框或按钮将表单发送到不同的电子邮件

> ID：12507873
> 
> 赞同：0
> 
> 时间：2012-09-20T07:27:28.613
> 
> 标签：php, forms, email, dreamweaver

我有一个简单的表格，需要根据客户检查位置的内容发送到 2 个电子邮件地址中的 1 个。我将 Dreamweaver 与 FormToEmail.php 文件一起使用。我为每个位置制作了一个 php 文件，并在该 php 文件中使用正确的电子邮件。

如何根据按钮/复选框指定要使用的 php 文件？

```
<form action="petprofile.php" method="post">
<table border="0" style="background:#1e1e1e" cellspacing="5">
<tr align="left">
<td><span class="style20" onfocus="MM_validateForm('Pet Profile First Name','','R',
'PetProfile Last Name','','R','Pet Profile Address','','R','Pet Profile
City','','R','Pet Profile State','','R','Pet Profile Zip','','R','Pet Profile
Email','','R','Emergency Contact','','R','Emergency Contact Phone','','R');return
document.MM_returnValue">*required</span></td>
<td><span class="style19">Customer Information</span></td>
<td>Which location would you like to have your evaluation performed?</td>
<td><label>
<input name="radio" type="radio" id="Eval CH" value="Eval CH" checked="checked" />   
Capital Hill (420 E Denny)<br />
<input name="radio" type="radio" id="Eval ELL" value="Eval ELL" />
Elliott (1405 Elliott Ave) </label></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:42:57.910

我在这里看到的最简单的方法是在单击某个输入时简单地更改表单操作，例如：

```
<form name="some_form" action="petprofile.php" method="post"> 
```

为方便起见，在表单中添加名称，然后执行以下操作：

```
<input name="radio" type="radio" id="Eval CH" value="Eval CH" onclick="javascript:document.some_name.action='fileA.php';" checked="checked" />
<input name="radio" type="radio" id="Eval ELL" value="Eval ELL" onclick="javascript:document.some_name.action='fileB.php';" /> 
```

PS：虽然，很可能你最好在你的 PHP 中做这样的事情：

```
$radio = isset($_POST['radio']) ? $_POST['radio'] : 'default';

switch ($radio) {
    case 'Eval CH':
        // Do something for Eval CH radio being checked
        break;
    case 'Eval ELL':
        // Do something for Eval ELL radio being checked
        break;
} 
```

这样，您就不会依赖于实际上必须启用他们的 javascript 的人。即使在大多数情况下这不是问题，我只是认为将所有事情都考虑在内是一个好习惯。

# r - 在ggplot2中获取像素位置

> ID：12507874
> 
> 赞同：0
> 
> 时间：2012-09-20T07:27:31.200
> 
> 标签：r, ggplot2

我正在尝试为 ggplot2 生成的 PNG 生成 html 图像映射。例如：

```
d <- data.frame(x=0:3, y=c(2,1,5,3), s=c('foo','bar','hello','world'))
p <- ggplot(d, aes(x,y)) + geom_point()
ggsave('img.png', p, width=4, height=4, unit='in', dpi=100) 
```

在此示例中，第一个点 (0,2) 大致位于像素 (65,258) 处，半径约为 6 像素，因此我希望我的 R 脚本生成的地图如下所示：

```
<img src="img.png" usemap="#mymap" />
<map name="mymap">
  <area shape="circle" coords="65,258,6" href="foo.htm" alt="Foo" />
  ...
</map> 
```

获取像素坐标的最佳方法是什么？正如在回答其他问题时提到的，ggplot2 使用与基本图形不同的坐标系（网格），因此 grconvertX/Y 不起作用。

# menu - Opera下拉菜单悬停问题

> ID：12507880
> 
> 赞同：2
> 
> 时间：2012-09-20T07:28:09.093
> 
> 标签：menu, hover, opera

我刚刚为我的网站创建了一个下拉列表。它在所有其他浏览器中都可以正常工作，除了新版本的 12.02 Opera。

网站网址：[http ://www.sktechnologyworld.com/demo/anything/](http://www.sktechnologyworld.com/demo/anything/)

在这里，当您将鼠标悬停在“类别”上时，它会显示该类别的下拉列表，然后当您将鼠标悬停在类别上时，它会显示该类别的子类别。此时，该特定类别的顶部仍然存在背景线，并且在所有子类别中都是相同的。但是，当我通过按 ctrl+shift+I 在歌剧中打开龙飞时，它工作正常，但如果龙飞没有打开，那就很奇怪了。

它很奇怪，以前没有遇到过这种问题。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:12:16.413

这确实是 Opera 中的一个错误。由于这只是一个外观问题，对功能没有太大影响，我建议您只需[向 Opera Software 报告一个错误，](https://bugs.opera.com/wizard/)然后在修复之前忘记它 :-)

根本原因是 Opera 未能正确绘制 A 元素的 padding-top 的背景颜色。它主要由#CategoriesBar .nav 上的 padding-top:9px 指令触发。然而，试图解决它意味着在你的 CSS 中添加 hack，这使得它更难理解和维护——甚至更有可能在未来的浏览器中崩溃。因此，报告错误而不是尝试解决它是您前进的最佳方式。

这是一个简化的演示，您可以在报告错误时参考：http: [//jsfiddle.net/sNHbB/](http://jsfiddle.net/sNHbB/)

请让我知道错误参考编号，我会为您提供帮助。

# twitter-bootstrap - 如何在我的项目中包含 ember-bootstrap

> ID：12507887
> 
> 赞同：1
> 
> 时间：2012-09-20T07:28:33.650
> 
> 标签：twitter-bootstrap, ember.js

这是 github 链接[https://github.com/emberjs-addons/ember-bootstrap](https://github.com/emberjs-addons/ember-bootstrap)

我认为没有可用的宝石...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:31:59.873

[从https://github.com/emberjs-addons/ember-bootstrap/downloads](https://github.com/emberjs-addons/ember-bootstrap/downloads)下载最新版本

将其添加到资产并在 Ember 之后加载

# android - 自动完成延迟

> ID：12507888
> 
> 赞同：4
> 
> 时间：2012-09-20T07:28:36.770
> 
> 标签：android, autocomplete

我的应用程序中有一个自动完成功能。如果我开始输入字母自动完成没有时间需要很多时间来处理 JSON 文件。我使用 addTextChangedListener 并且因为这个输入字母不是那么顺利。我想在 JSON 中的搜索数据之前设置一个超时。

```
Object mObj[] = { dep, arr };
        for (int mI = 0; mI < mObj.length; mI++) {
            ((AutoCompleteTextView) mObj[mI])
                    .addTextChangedListener(new TextWatcher() {

                        public void onTextChanged(final CharSequence s,
                                int start, int before, int count) {
                            setListViewAuto(s, mass);
                        }

                        public void beforeTextChanged(CharSequence s,
                                int start, int count, int after) {
                            // TODO Auto-generated method stub
                        }

                        public void afterTextChanged(Editable s) {
                            // TODO Auto-generated method stub
                        }
                    });
        } 
```

**UPD：** 我这样做：

```
final Object mObj[] = { dep, arr };
        for (int mI = 0; mI < mObj.length; mI++) {
            ((AutoCompleteTextView) mObj[mI])
                    .addTextChangedListener(new TextWatcher() {

                        private Handler autoHandler = new Handler() {
                            @Override
                            public void handleMessage(Message msg) {
                                if (msg.what == MESSAGE_TEXT_CHANGED) {
                                    String enteredText = (String) msg.obj;
                                    setListViewAuto(enteredText);
                                }
                            }
                        };

                        public  void onTextChanged(final CharSequence s,
                                int start, int before, int count) {
                            massListAuto = new ArrayList<String>(Arrays
                                    .asList(mass));
                            String enteredText = s.toString();
                            autoHandler.removeMessages(MESSAGE_TEXT_CHANGED);
                            final Message msg = Message.obtain(autoHandler,
                                    MESSAGE_TEXT_CHANGED, enteredText);
                            autoHandler.sendMessageDelayed(msg,
                                    AUTOCOMPLETE_DELAY);
                        }

                        public void beforeTextChanged(CharSequence s,
                                int start, int count, int after) {
                            // TODO Auto-generated method stub
                        }

                        public void afterTextChanged(Editable s) {
                            // TODO Auto-generated method stub
                        }
                    });
        } 
```

但我收到消息：这个 Handler 类应该是静态的，否则可能会发生泄漏

# android - 为什么我的机器人测试用例在启动活动后没有立即启动？

> ID：12507892
> 
> 赞同：0
> 
> 时间：2012-09-20T07:28:52.017
> 
> 标签：android, robotium, instrumentation

我已经为我的应用程序构建了一个 Robotium 测试用例。一切都很好，除了我需要手动与我的应用程序交互以使测试开始运行。这意味着我需要去应用程序中的另一个活动，然后测试用例将开始。出于某种原因，我的测试没有在启动时开始。

```
public class TestApk extends ActivityInstrumentationTestCase2{
private static final String TARGET_PACKAGE_ID= "com.bizzabo.client";
private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME="com.bizzabo.client.ui.activities.BzLauncher";
private static Class launcherActivityClass;
static{
    try
    {
        launcherActivityClass=Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    } catch (ClassNotFoundException e){
        throw new RuntimeException(e);
    }}
public TestApk()throws ClassNotFoundException{
    super( launcherActivityClass);
}
private Solo solo;
@Override
protected void setUp() throws Exception
{
    solo = new Solo(getInstrumentation(),getActivity());

}

public void testInformationMenu() {
    final int INFORMATION_VIEW_NO = 11;

    solo.getCurrentActivity();
    solo.sleep(1000);
    solo.goBack();
    solo.sleep(1000);
    ArrayList<View> viewList = solo.getCurrentViews();
    solo.clickOnView(viewList.get(INFORMATION_VIEW_NO));
    solo.sleep(1000);
    solo.clickOnText("Add Event");
    solo.sleep(1000);
    solo.goBack();
    solo.clickOnView(viewList.get(INFORMATION_VIEW_NO));
    solo.clickOnText("Invite Your Friends");
    solo.sleep(1000);
    solo.goBack();
    solo.clickOnView(viewList.get(10));
    solo.sleep(1000);
    solo.enterText(0, "testbot");
    solo.sendKey(Solo.ENTER);
    solo.sleep(5000);
    solo.clickOnImage(2);
    solo.sleep(1000);
    solo.clickOnText("Join");
    solo.goBack();
    solo.clickOnText("Community");
    solo.sleep(1000);
    solo.clickOnText("Join");
    solo.goBack();
    solo.clickOnText("HERE NOW");
    solo.sleep(1000);
    solo.clickOnText("Check-In");
    solo.sleep(1000);
    solo.goBack();
    solo.clickOnText("Opportunities");
    solo.clickOnText("Messages");
    solo.clickOnText("Offers");
    solo.sleep(1000);
    solo.clickOnText("Event");
    solo.goBack();
    solo.sleep(1000);
    solo.clickOnText("Information");
    solo.clickOnText("Join");
    solo.goBack();
    solo.clickOnText("+ Invite");
    solo.goBack();
    solo.clickOnText("Buzz");
    solo.goBack();
    solo.goBack();
    solo.drag(400, 400, 400, 300, 1);
    solo.sleep(1000);
}

public void tearDown() throws Exception {
    solo.finishOpenedActivities();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:39:10.610

我相信它应该像调用你的超类一样简单：

```
public void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(),getActivity());
} 
```

和

```
public void tearDown() throws Exception {
    solo.finishOpenedActivities();
    super.tearDown();
} 
```

这应该有助于设置所有内容，并且您的测试将正常运行，假设您的类名当然是正确的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:37:20.797

在这一行中，您编写将开始测试的活动：

```
LAUNCHER_ACTIVITY_FULL_CLASSNAME="com.bizzabo.client.ui.activities.BzLauncher"; 
```

检查您需要开始的正确活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:06:57.070

我的申请中有同样的问题。在我的活动中，我有一个显示 gif 动画的自定义视图（webview）。如果我从活动中删除此视图，则测试会在启动时开始。但是，如果存在该视图，则在我手动切换到下一个活动之前不要进行测试。

# android - 如何在android中重复闹钟工作日

> ID：12507901
> 
> 赞同：7
> 
> 时间：2012-09-20T07:29:39.390
> 
> 标签：android, alarmmanager, android-alarms

我只想在周一到周五报警。我的代码在这里

```
if (chk_weekday.isChecked()) {

                    int day = calNow.get(Calendar.DAY_OF_WEEK);
                    if (day == 2 || day == 3 || day == 4 || day == 5
                            || day == 6) {

                        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                                calSet.getTimeInMillis(), 1 * 60 * 60 * 1000,
                                pendingIntent);

                    } 
```

有一个想法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T11:14:51.927

请尝试此代码。在我的应用程序中成功运行

```
if (chk_monday.isChecked()) {
                        forday(2);
                    } else if (chk_tuesday.isChecked()) {
                        forday(3);
                    } else if (chk_wednesday.isChecked()) {
                        forday(4);
                    } else if (chk_thursday.isChecked()) {
                        forday(5);
                    } else if (chk_friday.isChecked()) {
                        forday(6);
                    } else if (chk_sat.isChecked()) {
                        forday(7);
                    } else if (chk_sunday.isChecked()) {
                        forday(1);
                    }

public void forday(int week) {

        calSet.set(Calendar.DAY_OF_WEEK, week);
        calSet.set(Calendar.HOUR_OF_DAY, hour);
        calSet.set(Calendar.MINUTE, minuts);
        calSet.set(Calendar.SECOND, 0);
        calSet.set(Calendar.MILLISECOND, 0);

        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                calSet.getTimeInMillis(), 1 * 60 * 60 * 1000, pendingIntent);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T08:03:28.247

根据您的问题，我相信您希望除周六、周日外每天都进行某些活动。因此，您的代码是正确的，但您声明它的方式错误，请进行如下更改并尝试

在 OnCreate() 方法中声明警报

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(), 1 * 60 * 60 * 1000,  pendingIntent); 
```

现在您的闹钟设置为每天重复，除周六、周日外，您需要每天执行操作

```
 if (chkMonday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkTuesday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkWednesday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkThrusday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkFriday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkSaturday.isChecked()) 
  {
      activityToPerform();
  }

  if (chkSunday.isChecked()) 
  {
      activityToPerform();
  }

  private void activityToPerform()
  {
    // your action code
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T07:43:11.793

一种方法是在广播中收到警报通知时，然后检查第二天是否是星期六，然后将警报设置为星期一，否则只需添加 1 天即可。

为此，您每次都需要设置新的闹钟。

# javascript - 如何有条件地在javascript中的对象内创建成员？

> ID：12507904
> 
> 赞同：2
> 
> 时间：2012-09-20T07:29:51.817
> 
> 标签：javascript, node.js, express

我在 stackoverflow 和谷歌中寻找这样的解决方案，但这就是我的想法

```
 a = {
  b: (conditionB? 5 : undefined),
  c: (conditionC? 5 : undefined),
  d: (conditionD? 5 : undefined),
  e: (conditionE? 5 : undefined),
  f: (conditionF? 5 : undefined),
  g: (conditionG? 5 : undefined),
 }; 
```

但我不明白这一点......它在nodejs中不起作用我想创建一个对象a，里面有很多对象但是如果这些对象是客户端发送的形式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:38:08.887

也许你想要的可以使用数组索引符号来完成？

```
a= {};
if(bla) a.b = "go"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:43:05.337

试试这个：

```
var a = {};
if(conditionB) {
   a['b'] = 5;
} 
```

或者

```
if(conditionB) {
   a.b = 5;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:49:59.210

这可以通过两种方式实现。

您可以为每个条件属性使用 if 语句，如下所示：

```
 var a = {};
    if(conditionb){
      a.b = 5;
    } 
```

或者，如果您不想为每个属性创建一个 if 语句，那么您可以使用问题中提供的符号分配属性，然后在循环中删除不必要的：

```
 a = {
      b: (conditionB? 5 : undefined),
      c: (conditionC? 5 : undefined),
      d: (conditionD? 5 : undefined),
      e: (conditionE? 5 : undefined),
      f: (conditionF? 5 : undefined),
      g: (conditionG? 5 : undefined),
    };
    for(var i in a){
      if(a[i] === undefined){
        delete a[i];
      }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:49:13.660

你可以试试这个，

```
var dog = d;

var myObject = {};
myObject['a']=(1<2)? 1 : 2;
myObject['b']=(1<2)? 1 : 2;
myObject['c']=(1<2)? 1 : 2;
myObject[dog]=(1<2)? 1 : 2; 
```

以防万一您动态创建属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T12:47:20.143

你可以用 ES2018 做到这一点：

```
a = {
  ...(conditionB? { b : 5} : {}),
  ...(conditionC? { c : 5} : {}),
}; 
```

# c - STM32F103x_XL FLASH bank 2 保持 BUSY

> ID：12507905
> 
> 赞同：0
> 
> 时间：2012-09-20T07:29:53.103
> 
> 标签：c, gcc, embedded, stm32, flash-memory

我正在使用带有 STM32F10x_StdPeriph 库的 STM32F103ZG。我开始使用 Keil ARM-MDK 开发该项目，但现在转移到了 GCC。到目前为止，切换过程非常顺利。我使用FLASH的最后一页作为配置页来存储产品的具体参数。这个页面显然位于 bank 2。在某些情况下，这些配置参数需要在运行时更新，但是现在我已经转移到 GCC，当我尝试写入时，第二个 memory bank 进入忙碌状态然后它一直很忙，直到我重新启动电源。擦除工作正常，但写入失败。我确实解锁了所有 FLASH 并确保所有时钟都已初始化以访问 FLASH。几个论坛上的其他一些帖子表明我的链接器文件存在问题，但我使用的所有示例都没有区别。

如果有人能告诉我我做错了什么，我将不胜感激。

谢谢，

H

```
_Min_Heap_Size = 0x800;      /* required amount of heap  */
_Min_Stack_Size = 0x800; /* required amount of stack */

MEMORY
{
 FLASH (rx)      : ORIGIN = 0x08000000, LENGTH = 0x10000
 FLASH_CFG (rx)  : ORIGIN = 0x080FF800, LENGTH = 0x80
 RAM   (rwx)     : ORIGIN = 0x20000000, LENGTH = 0x18000
}

SECTIONS
{
.text :
{
  _stext = .;          /* Provide the name for the start of this section */

    CREATE_OBJECT_SYMBOLS
    KEEP(*(.vectors))

    *(.text)
  *(.text.*)

. = ALIGN(4);        /* Align the start of the rodata part */
    *(.rodata)
  *(.rodata.*)
*(.glue_7)
  *(.glue_7t)

    . = ALIGN(4);        /* Align the end of the section */
} > FLASH
  _etext = .;             /* Provide the name for the end of this section */

.data : AT (_etext)
{
    . = ALIGN(4);        /* Align the start of the section */
    _sdata = .;          /* Provide the name for the start of this section */

          *(.data)
          *(.data.*)

    . = ALIGN(4);        /* Align the start of the fastrun part */
    *(.fastrun)
            *(.fastrun.*)

          . = ALIGN(4);        /* Align the end of the section */
} > RAM
    _edata = .;             /* Provide the name for the end of this section */

.bss :
{
    . = ALIGN(4);        /* Align the start of the section */
    _sbss = .;           /* Provide the name for the start of this section */

    *(.bss)
            *(.bss.*)

    . = ALIGN(4);        /* Align the end of the section */
} > RAM
_ebss = .;              /* Provide the name for the end of this section */

   ._user_heap_stack :
   {
     . = ALIGN(4);
     . = . + _Min_Heap_Size;
     . = . + _Min_Stack_Size;
     . = ALIGN(4);
   } >RAM

  _estack = ORIGIN(RAM) + LENGTH(RAM);

   .static_cfg :
   {
       . = ALIGN(4);        
     *(.static_cfg)
       *(.static_cfg.*)

       . = ALIGN(4);       
   } > FLASH_CFG
    _estatic_cfg = .;            

_end = .;
   PROVIDE (end = .);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:36:13.680

好吧，我设法解决了我的问题。当我转到 GCC 时，我显然必须重新编译 STM32F10x 外设库，并将优化设置保留为 -O3。这最初是不允许的，因为需要更改 __STREXH 和 __STREXL 核心函数才能构建所选优化。我在论坛上找到了以下解决方案：

改变 __ASM volatile ("strexh %0, %2, [%1]" : "=r" (result) : "r" (addr), "r" (value) ); 到 __ASM volatile ("strexh %0, %2, [%1]" : "=&r" (result) : "r" (addr), "r" (value) );

与此解决方案相关的一些评论指出此解决方案不会导致任何错误。

当我使用原始代码并将优化设置为 -O0 时，一切正常。片上 FLASH 接口的访问是 16 位的，因此如果你搞砸了上面提到的功能，所有的 16 位写访问都会搞砸。

由于我现阶段不需要优化，所以我将保持没有它。

任何有关如何正确更新这些函数以用于优化的建议将不胜感激。

享受，

H

# nlog - NLog 代码行日志记录

> ID：12507907
> 
> 赞同：0
> 
> 时间：2012-09-20T07:30:07.137
> 
> 标签：nlog

我正在使用 NLog 将错误消息记录到 csv 中：

```
<target name="csv" xsi:type="File" 
                fileName="${basedir}/Logs/log.csv"
                archiveFileName="${basedir}/Logs/Archives/log.{#####}.csv"
                archiveAboveSize="10240"
                archiveNumbering="Sequence"
                concurrentWrites="true"
                keepFileOpen="false">
            <layout xsi:type="CSVLayout" delimiter="Comma" withHeader="false">
              <column name="time" layout="${longdate}" />
              <column name="message" layout="${message}" />
              <column name="logger" layout="${logger}"/>
              <column name="level" layout="${level}"/>
            </layout>
        </target> 
```

如何添加一列来跟踪代码行号？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:40:26.600

尝试添加[${callsite}](https://github.com/nlog/nlog/wiki/Callsite-Layout-Renderer)布局渲染器。

```
<column name="source" layout="${callsite:fileName=true}" /> 
```

# grails - 圣杯 在

> ID：12507918
> 
> 赞同：1
> 
> 时间：2012-09-20T07:30:46.597
> 
> 标签：grails, select, gsp

我`<g:select>`在一个`.gsp`文件中有这个。但与任何普通的 's 不同，如果满足某个条件，`<g:select>`这个将具有该属性。`disabled=""`

按照代码：

```
<g:select name="test" 
          from="${["foo1","foo2"]}" 
          <g:if test="${true}">disabled=""</g:if> /> 
```

它返回一个错误：`Grails tag [g:select] was not closed`

但是当我把它改成这样时：

```
<g:select name="test" 
          from="${["mu1","mu2","mu3"]}" 
          ${ if(true) { println "disabled=\"\"" } }/> 
```

它返回了这个错误：`Attribute value must be quoted.`

两条错误消息都在异常下，`org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException`

问题是我们如何才能做到这一点？不使用自定义 TagLib 是否有可能的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:19:30.320

GSP 表单字段标签被`disabled`视为布尔属性，因此您可以说

```
<g:select .... disabled="${true}" /> 
```

通常，您应该能够在通常的 Groovy-truth 规则下使用任何表达式，但我相信它为字符串“true”和“false”提供了一种特殊情况（后者通常`true`在 Groovy-truth 规则下被视为非空字符串）。如果有疑问，您可以随时说

```
disabled="${(someExpression) as boolean}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:58:37.943

不需要使用println，试试这个

```
<g:select .... ${(conditional)?"disabled":""} ... /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:40:12.933

```
 <g:select disabled="${true}"... 
```

很好，但是当您提交并且它是必填字段时，将不会提交该值，因此请使用此 jQuery 代码在按下提交按钮时启用该字段

```
 $(function() {

        $('form').on('submit', function() {
            $(this).find(':disabled').removeAttr('disabled');
        });

    }); 
```

# php - 如何在codeigniter中获取原始图像名称

> ID：12507919
> 
> 赞同：0
> 
> 时间：2012-09-20T07:30:48.747
> 
> 标签：php, codeigniter, image-uploading

在 codeigniter 中，我想将图像上传到 URL：

[http://example.com/uploads/temp/](http://example.com/uploads/temp/)

当我提交表单时，我想获取原始图像名称，上传成功时图像可能会这样命名：

[http://example.com/uploads/temp/iphone5_2012_09_20_02_02_03.png](http://example.com/uploads/temp/iphone5_2012_09_20_02_02_03.png)

图像名称结构：

[original_name] *[year]* [month] *[day]* [hour] *[minute]* [second]

那么如何在codeigniter中上传之前获取原始图像名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:37:03.357

您可以使用以下命令检索文件名：

```
$img_name = $_FILES['your_name_in_the_form']['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:51:14.860

您可以调用上传库方法数据

```
$data = $this->upload->data() 
```

这将返回文件名

```
echo $data['filename']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:53:01.310

`$img_name = $_FILES['file_upload_field_name']['name'];`

# uilabel - 按钮增加字体大小/按钮减少Xcode中的字体大小

> ID：12507920
> 
> 赞同：0
> 
> 时间：2012-09-20T07:31:02.510
> 
> 标签：uilabel, xcode4.3, font-size

如何向我的应用程序添加两个按钮来增加/减少从数据库加载到标签的文本的字体大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:31:21.923

解决方案是使用带有以下代码的 UIStepper：

```
- (IBAction)ChangeFontSize:(id)sender {
    [labelText setFont:[UIFont systemFontOfSize:[fontStep value]]];
} 
```

# c# - 使用backgroundworker时跨线程操作无效

> ID：12507922
> 
> 赞同：3
> 
> 时间：2012-09-20T07:31:15.037
> 
> 标签：c#

下面是我的编码：

```
 Form2 msgForm;
    private void button3_Click_1(object sender, EventArgs e)
    {

        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = true;
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        //bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

        msgForm = new Form2();

        try
        {
            bw.RunWorkerAsync();

            msgForm.ShowDialog();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        if (comboBox15.Text == "")
        {
            //MessageBox.Show("Please select Printer ID.", "Status", MessageBoxButtons.OK, MessageBoxIcon.Error);
            //return;
        }
        // Coding that transmit protocol and will last around 2 minutes.
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        msgForm.Close();
    } 
```

当我运行此后台工作程序编码时，出现一个错误，指出“跨线程操作无效：控件'comboBox15'从创建它的线程以外的线程访问。”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:41:56.110

您可以使用[调用](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)：

```
// InvokeRequired required compares the thread ID of the
// calling thread to the thread ID of the creating thread.
// If these threads are different, it returns true.
if (this.comboBox15.InvokeRequired)
{
    this.Invoke((MethodInvoker) delegate {if (comboBox15.Text == ""){// What you want to do}});
}
else
{
    if (comboBox15.Text == "")
    {
    }
} 
```

另请阅读以下内容：http:
[//msdn.microsoft.com/en-us/library/ms171728 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx)
[http://msdn.microsoft.com/en-us/library/aa288468(v =vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)
[Invoke 调用中的匿名方法](https://stackoverflow.com/questions/253138/anonymous-method-in-invoke-call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:34:20.297

您不能来自非 UI 线程的 UI 元素。理想情况下，在后台工作人员启动之前提供相关信息，例如

```
string text = combo15.Text;
bw.DoWork += (sender, args) => TransmitStuff(combo15.Text, args);

...

void TransmitStuff(string printerId, DoWorkEventArgs e)
{
    ...
} 
```

如果您可以使用 .NET 4.5 和 C# 5，您可以使用异步方法来使这一切变得更容易……但我意识到这不太可能成为您的选择。

编辑：虽然您*可以*使用`Invoke`，但最终会变得非常混乱-并且您的状态可能不一致。我通常认为在开始长时间运行的操作之前计算出所需的*所有*状态，验证所有状态，然后将其交给操作会更整洁。如果您需要在操作期间更新 UI，您可以使用`BackgroundWorker`进度工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:01:03.000

在BackgroundWorker 中，当我们调用任何用户控制它的问题时。请在 Window Form Load 事件中使用此属性：

```
 CheckForIllegalCrossThreadCalls = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:38:24.597

您可以通过传递如下值来绕过它。

```
private void Dowork()
{
    backgroundWorker1.RunWorkerAsync(comboBox1.Text);
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    String selected = (String)e.Argument;
    if (String.IsNullOrEmpty(selected)) return;
    //do stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T07:34:04.443

您只能从主线程访问 gui 控件。

移动

> 如果 (comboBox15.Text == "")

部分到 button3_click

# c# - C# 在弹出窗口中显示进度条

> ID：12507923
> 
> 赞同：1
> 
> 时间：2012-09-20T07:31:19.657
> 
> 标签：c#, .net, winforms

我需要在弹出窗口中有一个进度条，而我的主线程正在进行一些繁重的计算。我使用的是 Oracle API，所有繁重的工作都是调用这个 API 的 1 个函数完成的，所以我不能使用 backgroudworker 更新，因为我没有 API 的代码。我尝试使用 ProgressBar 和 Timer 创建一个新表单，但 timer_Click 事件从未被触发！！（？？？）

任何的想法？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T07:34:43.713

> 而我的主线程正在做一些繁重的计算。

错误的。永远不要在 Windows 应用程序的主线程中进行任何繁重的计算，否则您的用户只会讨厌您。

如果您的 API 没有提供报告进度的方法，那么您可以做的最好的事情是在计算过程中显示一些旋转动画，因为您将无法知道已完成工作的确切百分比。因此，将计算放在[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)中，在运行计算之前显示一些旋转动画（这本身应该在[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)事件中完成）并在工作完成后隐藏动画（[RunWorkerCompletedEvent](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)）。

ProgressBar 有一个`Style`属性，您可以设置它`Marquee`来模拟无限的进程。

# google-maps-api-3 - 如何仅删除路线中的 A 和 B 标记，但不删除航路点标记

> ID：12507925
> 
> 赞同：0
> 
> 时间：2012-09-20T07:31:27.383
> 
> 标签：google-maps-api-3, google-maps-markers

我在用着

```
setOptions( { suppressMarkers: true } ); 
```

删除路线中的标记。

但它会删除该路线中的所有标记。我希望在该路线中查看航路点标记。那么我怎样才能从路线中只删除“A”和“B”标记？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:30:20.900

用于`suppressMarkers: true`抑制所有标记，然后添加回航点标记。这是一个重新创建所有内容的示例：

[http://www.geocodezip.com/v3_GoogleEx_directions-waypointsE.html](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsE.html)

# java - 在java中的组合框上添加项目运行时

> ID：12507926
> 
> 赞同：0
> 
> 时间：2012-09-20T07:31:45.577
> 
> 标签：java, swing, user-controls, awt, jcombobox

我在*Swing中创建了一个**组合框*，我想在另一个函数中添加项目。但问题是调用该函数后项目不显示：

 *```
public void addItems()
{
    combo.addItem("");
    // i want to add items here when this function is being called
    // but those items are not displaying after calling this function
    // i m calling this function on button click
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:36:30.790

在这个[SSCCE](http://sscce.org)中为我工作：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox {

    private int count = 0;

    protected void initUI() {
        final JFrame frame = new JFrame(TestComboBox.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JComboBox comboBox = new JComboBox(new Object[] { "Something", "Stuff", "Beep" });
        JButton add = new JButton("Add item");
        add.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                comboBox.addItem("Item-" + count++);
            }
        });
        frame.add(comboBox);
        frame.add(add, BorderLayout.SOUTH);
        frame.pack();
        frame.setBounds(50, 50, 300, frame.getHeight());
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestComboBox().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:37:03.597

如果您的组合框有`MutableComboBoxModel`，您可以执行以下操作

```
MutableComboBoxModel model = (MutableComboBoxModel)combo.getModel();
model.addElement( elementToAdd ); 
```

这相当于调用`JComboBox#addItem`（见下文的实现）：

```
public void addItem(Object anObject) {
    checkMutableComboBoxModel();
    ((MutableComboBoxModel)dataModel).addElement(anObject);
} 
```

但是我认为如果你想在模型端进行更改，而不是通过视图（除了为用户提供在视图中编辑的能力），直接修改模型是一个最佳实践

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-20T07:37:27.193

你需要调用：

```
repaint();
validate(); 
```*

# python - 是否可以在字节数组上获得代理？

> ID：12507927
> 
> 赞同：0
> 
> 时间：2012-09-20T07:31:50.847
> 
> 标签：python, bytearray

我想分配一个大的字节数组，但也将它分成许多较小的类似字节数组的对象。当较小的对象被修改时，它们应该修改底层的字节数组。

我尝试了以下两种策略。

```
from pprint import pprint as pp
b = bytearray(10)
c = b[5:]
c = bytearray(1 for d in c)
pp(c)
pp(b) 
```

和

```
from pprint import pprint as pp
b = bytearray(10)
c = b[5:]
for i in range(len(c)):
  c[i] = 1
pp(c)
pp(b) 
```

他们都输出

```
bytearray(b'\x01\x01\x01\x01\x01')
bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00') 
```

我的目标是有一段类似的代码，它输出

```
bytearray(b'\x01\x01\x01\x01\x01')
bytearray(b'\x00\x00\x00\x00\x00\x01\x01\x01\x01\x01') 
```

即当`c`被更新时，`b`也在适当的位置被更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:39:14.217

[memoryview](http://docs.python.org/library/stdtypes.html#memoryview)接近你想要的

```
>>> b = bytearray(10)
>>> c = memoryview(b)[5:]
>>> c[:] = bytearray(1 for d in c)
>>> b
bytearray(b'\x00\x00\x00\x00\x00\x01\x01\x01\x01\x01') 
```

你必须使用`c.tobytes()`或传递`c`给 bytearray 才能看到它的内容

```
>>> c.tobytes()
'\x01\x01\x01\x01\x01'
>>> bytearray(c)
bytearray(b'\x01\x01\x01\x01\x01') 
```

# math - 是否有一种算法方法可以找到给定单纯形噪声维度的比例因子？

> ID：12507929
> 
> 赞同：1
> 
> 时间：2012-09-20T07:32:05.247
> 
> 标签：math, noise, perlin-noise, procedural-generation, simplex-noise

这是单纯形噪声算法的 C# 中的一种[实现](https://gist.github.com/1759876)

您会注意到每个噪声函数（2d、3d 和 4d）都会缩放角点贡献以适应 -1 到 1 的范围（这是返回语句中的幻数），这是合理的。据我所知，这些都是通过实验得出的。

问题是我想将其模板化为任意数量的维度，而这个因素似乎是这样做的一个障碍，所以我想找到一种获得该比例因子的算法方法。我对算法不够熟悉，无法了解影响比例的因素，但如果我不得不猜测，我认为顶部的排列表是一个主要的排列表。

有没有人对此有任何想法，也许只是说它不可行？

# c# - 如何将实例方法作为委托传递

> ID：12507935
> 
> 赞同：0
> 
> 时间：2012-09-20T07:32:19.327
> 
> 标签：c#, linq, entity-framework, lambda

我有这种与*EF一起使用的方法*

```
RetryGetWithExpression<city, List<city>>(u => u.Take(10).ToList());

public static TValue RetryGetWithExpression<T, TValue>(
        Func<ObjectSet<T>, TValue> func)
    where T : class
{
    var entitySet = entitiesContext.CreateObjectSet<T>();
    return func(entitySet);
} 
```

上面的代码适用于 EF 生成的表实体。我想要做的是更改代码以使其与存储过程一起使用。

这是*执行 SP*的代码：

```
Entities G = new Entities();
ObjectResult<retrieveMedia_Result> F = G.retrieveMedia(1); 
```

当我尝试将 RetryGetWithExpression 转换为接受 SP 时，我得到一个问题，retrieveMedia 是实例方法，我不能将它作为 u.retrieveMedia(1) 传递

```
RetryGetWithExpression<Entities, ObjectResult<retrieveMedia_Result>>(
    u => u.retrieveMedia(1));

public static TValue RetryGetWithExpression<T, TValue>(
        Func<ObjectSet<T>, TValue> func)
    where T : class
{

} 
```

如何更改上述代码以使其与 SP 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:51:36.540

尝试

```
RetryGetWithExpression<ObjectResult<retrieveMedia_Result>>(u => u.retrieveMedia(1));

public static TValue RetryGetWithExpression<TValue>(Func<Entities, TValue> func)
{
    return func(entitiesContext);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:00:32.777

有点像，

```
public static TValue RetryGetWithExpression<TParam, TValue>(
        Func<TParam, TValue> func,
        TParam parameter)
{
    return func(parameter);
} 
```

你会这样称呼，

```
Entities g = new Entities();
ObjectResult<retrieveMedia_Result> f = 
    RetryGetWithExpression<int?, ObjectResult<retrieveMedia_Result>>(
        g.retrieveMedia,
        1); 
```

但是，这似乎毫无意义，因为您要做的就是传递一个函数委托并调用它。

# c++ - 多线程和互斥锁

> ID：12507937
> 
> 赞同：0
> 
> 时间：2012-09-20T07:32:24.693
> 
> 标签：c++, linux, multithreading, pthreads

我对 Linux 编程很陌生，所以请耐心等待。我有 2 种执行不同操作的线程类型，所以我希望每个线程都有自己的互斥锁。这是我正在使用的代码，它好吗？如果不是为什么？

```
static pthread_mutex_t cs_mutex = PTHREAD_MUTEX_INITIALIZER;
static pthread_mutex_t cs_mutex2 = PTHREAD_MUTEX_INITALIZER;

void * Thread1(void * lp)
{
    int * sock = (int*)lp;
    char buffer[2024];

    int bytecount = recv(*sock, buffer, 2048, 0);
    while (0 == 0)
    {
        if ((bytecount ==0) || (bytecount == -1))
        {
        pthread_mutex_lock(&cs_mutex);

                  //Some uninteresting operations witch plays with set 1 of global variables;
        pthread_mutex_unlock(&cs_mutex);
        }
    }
}

void * Thread2(void * lp)
{   
    while (0 == 0)
    {
        pthread_mutex_lock(&cs_mutex2);
            //Some uninteresting operations witch plays with some global variables;
        pthread_mutex_unlock(&cs_mutex2);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:48:32.250

通常，互斥锁与线程无关。它确保仅由单个线程访问关键区域。所以如果你有一些共享区域，比如多个线程处理同一个数组，那么你必须确保这个区域的独占访问。这意味着，您不需要为每个线程使用互斥锁。您需要一个用于关键区域的互斥锁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T08:06:59.027

如果您只有一个司机，那么拥有两辆车没有任何优势。您的`Thread2`代码只有在持有`cs_mutex2`. 因此，让多个线程运行该代码是没有意义的。一次只有一个线程可以持有互斥锁，而另一个线程不能做任何有用的工作。

所以你要做的就是偶尔不持有互斥锁的线程会尝试运行并且必须等待另一个。有时，确实持有互斥锁的线程会尝试释放并重新获取它并被另一个线程抢占。

这是完全没有意义的线程使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T08:18:07.390

我在这里看到三个问题。有一个问题是你的无限循环，另一个是关于你拥有多个线程的意图，还有一个未来的可维护性“陷阱”潜伏着。

第一的

```
int bytecount = recv(*sock, buffer, 2048, 0);
while (0 == 0) 
```

是对的吗？您从套接字中读取了一些内容，然后在没有关闭套接字的情况下启动了无限循环？我只能假设您在循环中进行了更多阅读，但在这种情况下，您在持有互斥锁的同时等待外部事件。一般来说，这是一种限制并发性的糟糕模式。一种可能的模式是让一个线程读取数据，然后将读取的数据传递给执行处理的其他线程。

接下来，您有两组不同的资源，每组都受自己的互斥锁保护。然后，您打算为每个资源设置一组线程。但是每个线程都有模式

```
 take mutex
       lots of processing
   release mutex
       tiny window (a few machine instructions)
   take mutex again
        lots of processing
   release mutex
        next tiny window 
```

两个线程几乎没有机会并行工作。我质疑您是否需要每个资源的多个线程。

最后还有一个潜在的维护问题。我只是指出这一点以供将来参考，我认为您现在不需要做任何事情。您有两个函数，供两个线程使用，但最终它们只是任何人都可以调用的函数。如果以后的维护导致这些函数（或重构的函数子集），那么您可以获得两个线程

```
 take mutex 1
    take mutex 2 
```

和另外一个

```
 take mutex 2
    take mutex 1 
```

宾果游戏：僵局。

这不是一个容易避免的问题，但至少可以通过仔细的命名选择和重构来帮助维护者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T07:35:37.180

我认为您的代码是正确的，但请注意两点：

1.  这不是异常安全的。如果抛出异常，`Some uninteresting operations`那么您的互斥锁将永远不会被解锁 -> 死锁

2.  您还可以考虑使用 std::mutex 或 boost::mutex 代替原始互斥锁。对于互斥锁，最好使用 boost::mutex::scoped_lock （或现代编译器的 std:: 模拟）

    ```
    void test()
    {
        // not synch code here
        {
            boost::mutex::scoped_lock lock(mutex_);
            // synchronized code here
        }
    } 
    ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T07:37:27.080

如果您有 2 个*不同*的数据集和 2 个*不同*的线程在这些数据集上工作——您为什么需要互斥锁？通常，当您处理一些*共享*数据并且您不希望两个线程同时处理它时使用互斥锁，因此您使用互斥锁锁定它，做一些事情，解锁。

# sql - 在 SQL 中使用十进制值计算日期

> ID：12507943
> 
> 赞同：1
> 
> 时间：2012-09-20T07:33:01.463
> 
> 标签：sql, datetime, decimal

我在 SQL 数据库中有以下字段：

```
@EstimatedRequiredTimeHours DECIMAL(18,2) = NULL, 
@ScheduledStartDate SMALLDATETIME = NULL,
@ScheduledEndDate  SMALLDATETIME = NULL 
```

我需要`@ScheduledEndDate`通过将 加到`@EstimatedRequiredTimeHours`来计算`@ScheduledStartDate`。

我不完全确定如何做到这一点，`DATEADD()`看起来并不完全符合我的要求，而且我的 SQL 也不是最新的。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:41:19.827

Dateadd 接受整数作为第二个参数，因此分数被截断，为了包含它们，只需乘以 60*60 并添加秒。

```
set @ScheduledEndDate = dateadd(ss, @EstimatedRequiredTimeHours * 3600, @ScheduledStartDate) 
```

# iphone - 如何在 iPhone 中设置 UIImageView 动画？

> ID：12507944
> 
> 赞同：1
> 
> 时间：2012-09-20T07:33:09.437
> 
> 标签：iphone, animation, uiimageview, endpoint

现在我在 iPhone 应用程序中工作，使用 UIImageView 创建动画并且它工作正常，然后我尝试调用一种方法，当动画一旦完成，然后按钮显示在屏幕上，但该按钮首先显示然后动画开始，我想一旦动画完成然后按钮显示在屏幕上，如何解决这个问题？请帮我

提前致谢

我试过这个供你参考：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        NSArray * imageArray  = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"cardopen.png"], 
                                         [UIImage imageNamed:@"middlecard.png"],
                                         [UIImage imageNamed:@"thirdcard.png"], 
                                         [UIImage imageNamed:@"a.png"],

                                         [UIImage imageNamed:@"cardopen1.png"],
                                         [UIImage imageNamed:@"middlecard2.png"],
                                         [UIImage imageNamed:@"thirdcard1.png"], 
                                         [UIImage imageNamed:@"2.png"],

                                         nil];

         UIImageView * cardsImage = [[UIImageView alloc] initWithFrame:CGRectMake(10, 0, 400, 300)];
            cardsImage.animationImages = imageArray;
            cardsImage.animationDuration = 8.0;
            cardsImage.animationRepeatCount=1; // one time looping only
            [self.view addSubview:cardsImage];
            [cardsImage startAnimating];  

             [self method1]; // To Call a method1 to show UIButton (Once the animation is completed, then to call a method1)

    }

    -(void)method1
    {
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btn.frame=CGRectMake(10, 40, 50, 50);
        [self.view addSubview:btn];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:41:13.653

（为什么没有人理解异步方法的概念？这*很难*吗？）

```
[cardsImage startAnimating]; 
```

立即返回，而不是在动画完成后返回。您必须设置显式超时：

```
NSTimer *tm = [NSTimer scheduledTimerWithTimeInteral:imageView.animationDuration * imageView.animationCount // assuming animationCount is not 0
    target:self
    selector:@selector(method1)
    repeats:NO
    userInfo:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:45:07.367

采用
`[self performSelector:@selector(method1) withObject:nil afterDelay:8.0];`

代替`[self method1];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:42:46.520

这是因为您将所有代码放入`ViewDidLoad`. 将处理整个方法。另外，您将**动画持续时间**设置为 0.8，这是一个缓慢的动画。因此，按钮会正常显示，并且动画会随之继续，甚至更多。所以你实际上需要做的是使用`NSTimer`或使用这里提供给你的答案:)

# c - 如何在套接字编程c中从telnet客户端读取服务器上的参数

> ID：12507946
> 
> 赞同：0
> 
> 时间：2012-09-20T07:33:12.547
> 
> 标签：c, sockets, telnet

这是场景：

我在 Linux 中使用 telnet 实用程序连接到服务器。建立连接后，客户端应输入参数，服务器应读取该参数。

这是服务器代码：

```
int main(void)
{
int new_fd;
char *string;
// Establish the connection

if (send(new_fd, "Enter Command: ", 15, 0) == -1)
            perror("send");  

// Here I want to accept the argument from the server
return 0;
} 
```

当我使用 telnet 进入服务器时：`telnet servername portnumber` 客户端接收：`Enter Command:`我想在其前面输入参数。例如`Enter Command: Hey There!`

我要做的就是`Hey There!`将其读取存储在`string`服务器上并打印出来。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:39:30.453

要通过套接字接收任何内容，您需要调用`recv`并检查，只要返回值大于 0，您就可以将传入数据写入您希望的任何位置。

```
 ssize_t recv(int sockfd, void *buf, size_t len, int flags); 
```

> 这些调用返回接收到的字节数，如果发生错误，则返回 -1。当对端执行了有序关闭时，返回值将为 0。

[从这里](http://linux.die.net/man/2/recv)

# c# - 处理 Datarow DBNull 的最佳方法

> ID：12507948
> 
> 赞同：16
> 
> 时间：2012-09-20T07:33:34.313
> 
> 标签：c#, database

> **可能重复：**
> [检查数据表中是否包含空值的最佳方法](https://stackoverflow.com/questions/4604414/best-way-to-check-if-a-data-table-has-a-null-value-in-it)

我想知道检查 DBNull 以获取 DataTable - DataRow 值的方法应该是什么。

# 前任

我有一个 DataRow 从数据库中获取信息的行类型，例如：

varchar、money、Int 等。

我应该用什么（简单而甜蜜）的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T07:38:10.023

尝试：

```
foreach(DataRow row in table.Rows)
{
    object value = row["ColumnName"];
    if (value == DBNull.Value)
    {

    }
    else
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T07:37:20.650

尝试这个

对于 varchar

```
string val = dr["name"].ToString(); 
```

对于整数

```
int? val = dr["status"] == DBNull.Value ? (int?) null : Convert.ToInt32(dr["status"]); 
```

执行与替换相应类型相同的`Money, Decimal`操作`int``.Net`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:38:45.947

您可以使用这样的扩展方法；

```
public static T GetValue<T>(this OracleDataReader reader, string fieldName)
{
    T result = default(T);
    int index = reader.GetOrdinal(fieldName);

    if (reader.IsDBNull(index))
    {
        return default(T);
    }

    if (typeof(T) == typeof(string))
    {
        result = (T)Convert.ChangeType(reader.GetString(index), typeof(T));
    }

    if (typeof(T) == typeof(int))
    {
        result = (T)Convert.ChangeType(reader.GetInt32(index), typeof(T));
    }

    if (typeof(T) == typeof(DateTime))
    {
        result = (T)Convert.ChangeType(reader.GetDateTime(index), typeof(T));
    }

    if (typeof(T) == typeof(byte[]))
    {
        OracleLob blob = reader.GetOracleLob(index);
        result = (T)Convert.ChangeType(blob.Value, typeof(T));
    }

    return result;
} 
```

你可以像这样使用`string title = reader.GetValue<string>("title")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:41:45.827

CLR 和 SQL 类型有[明确定义的映射](http://msdn.microsoft.com/en-us/library/bb386947.aspx)，所以问题实际上是如何高效准确地映射这些类型。从长远来看，最简单的方法可能是使用自动映射过程，将类的属性映射到`DataRow`. 您可以自己编写或在线查找许多示例/产品（任何 ORM 都将其作为核心功能）。

假设您仍想进行手动分配，您需要确定您希望如何处理来自数据库的空值。您想将它们分配给相应的可为空类型吗？你想用`default(T)`吗？你想使用另一个值吗（默认值可能是 null 的不良替代品）？例如，0 度的温度是完全有效的，但是`default(float) == 0`. 如果您使用`default(T)`，您可能无法区分零和数据库中为空的值之间的区别。

定义好分配策略后，将代码放入可重用的形式（扩展方法、辅助类等）。如果可能的话，最好取消装箱到确切的类型，因为这将是最快的。之后，拆箱输入，然后投射。之后，使用`Convert`该类。

# javascript - 使用 slideUp 和 slideDown 切换 jQueryUI 选项卡

> ID：12507949
> 
> 赞同：0
> 
> 时间：2012-09-20T07:33:35.630
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-selectors

我使用 jQueryUI 作为我的 js 库。
HTML

```
<ul>

        <li><a href="#fragment-1"><span>One</span></a></li>
        <li><a href="#fragment-2"><span>Two</span></a></li>
        <li><a href="#fragment-3"><span>Three</span></a></li>
    </ul>
    <div id="fragment-1" style="height:1000px;">    </div>
    <div id="fragment-2" style="height:800px;"></div>
    <div id="fragment-3" style="height:1200px;"></div> 
```

jQuery

```
 <script>
  $(document).ready(function() {
    $("#container").tabs(
    {
        fx: {opacity: 'toggle' }
    }
    );
  });
  </script> 
```

由于我的标签（div）具有不同的高度，我想在切换标签时添加上滑和下滑效果。所以高度差异不会显示太多。

Tab1(1000px) -> Tab12(800px) -> Tab3(1200px)

高度应该像上面一样变化。我不想滑动或向下滑动整个 div（标签）。Tab1（1000 像素）-> Tab1（800 像素）。从 Tab1 切换到 Tab2 时 200px 应该是 slideUP。从 Tab2 切换到 Tab3 时 400px 应该是向下滑动的。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:13:14.883

您可以在 dom 准备好时缓存所有选项卡的高度，创建一个名为“currentHeight”之类的全局变量（如果您最初没有显示任何选项卡，则默认为 0，否则它应该是初始选项卡的高度），然后在锚标签的点击事件上，可以抓取相应标签的高度，减去当前高度。如果结果是肯定的，请向下滑动到那个不同的位置。如果为负数，则向上滑动到结果的绝对值。那么当然，您必须更新 currentHeight 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:18:25.850

我还没有机会对此进行正确测试，但您应该能够从中得到一个想法。将 currentHeight 设置为全局变量，然后在页面加载时将 currentHeight 变量设置为默认或当前可见 div 的高度。

任何锚标记的 Onclick 都会运行一个函数来获取单击的 div 的高度，然后使用 currentHeight 变量检查差异。然后从新 div 的高度中减去这个差异，并动画到这个新高度。在此示例中，在设置动画（更改其高度）之前将 currentHeight 全局变量设置为新的 div 高度很重要，否则下次单击选项卡时，计算将不起作用。

```
var currentHeight = 0;

$(document).ready(function(){
  currentHeight = $('#fragment-1').height(); 
});

$(document).ready(function(){
  $('a[href*="#fragment"]').click(function(){

       var divID = $(this).attr('href');
       var heightDiff = $(divID).height() - currentHeight;
       var newHeight = $(divID).height() - heightDiff;
       currentHeight = $(divID).height();
       $(divID).animate( { height:newHeight } );
  });
}); 
```

# php - 网站在手机上引起警报

> ID：12507953
> 
> 赞同：0
> 
> 时间：2012-09-20T07:34:04.773
> 
> 标签：php, android, iphone

我正在构建一个要在计算机上浏览的 php 网页，该网页具有一些电子邮件发送和日历功能。

我想试试，在从计算机浏览器发送电子邮件或创建日历事件时，是否可以触发警报，例如 iPhone 和 Androld 系统中的声音和振动？

如果没有，那么我可能需要做一些应用程序。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:37:51.383

我会为安卓手机做这样的事情：

```
function sendMessageToPhone($authCode, $deviceRegistrationId, $msgType, $messageText, $infoType, $messageInfo) {

$headers = array('Authorization: GoogleLogin auth=' . $authCode);
$data = array(
    'registration_id' => $deviceRegistrationId,
    'collapse_key' => $msgType,
    'data.message' => $messageText,
    'data.type'    => $infoType,
    'data.data'    => $messageInfo
);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
if ($headers)
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

$response = curl_exec($ch);

curl_close($ch);

return $response; 
```

}

# forms - Symfony2 选择形式拆分为树枝

> ID：12507957
> 
> 赞同：3
> 
> 时间：2012-09-20T07:34:27.267
> 
> 标签：forms, symfony, twig, symfony-forms

好的，所以我有一个带有 2 个选项的选择表

```
$builder->add('type', 'choice', array(
    'label' => 'User type',
    'choices' => array('1' => 'Customer', '2' => 'Supplier'),
    'expanded' => true,
    'multiple' => false,
    'required' => false,
)); 
```

我想使用 twig 拆分视图中的选项以获得如下内容：

```
{{ form_widget(form.type/choice_1/) }}
some html stuf
{{ form_widget(form.type/choice_2/) }} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T07:43:58.353

您需要将模板添加到表单中。这是文档： [http ://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

这里有多个示例： [https ://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/views/Form/fields.html.twig](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/views/Form/fields.html.twig)

该字段适合您：

```
{% block choice_widget_expanded %}
{% spaceless %}
<div {{ block('widget_container_attributes') }}>
{% for child in form %}
    <label class="{{ (multiple ? 'checkbox' : 'radio') ~ (widget_type ? ' ' ~ widget_type : '') ~ (inline is defined and inline ? ' inline' : '') }}">
        {{ form_widget(child, {'attr': {'class': attr.widget_class|default('')}}) }}
        {{ child.vars.label|trans({}, translation_domain) }}
    </label>
{% endfor %}
</div>
{% endspaceless %}
{% endblock choice_widget_expanded %} 
```

你可以做任何你想做的事，只要离开：`{{ form_widget(child, {'attr': {'class': attr.widget_class|default('')}}) }}`独自一人:)

1.  您需要创建文件`YourBundle/Resources/Form/fields.html.twig`
2.  粘贴上面的代码。
3.  将主题添加到表单：`{% form_theme form 'AcmeDemoBundle:Form:fields.html.twig' %}`
4.  并准备好摇滚！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-09T11:29:41.330

定义的字段数：

```
{{ form_widget(form.type.0) }}{{ form_label(form.type.0) }}
    some html stuf
{{ form_widget(form.type.1) }}{{ form_label(form.type.0) }} 
```

可变数量的字段：

```
{% for i in 0..form.type|length-1 %}
    {{ form_widget(form.type[i]) }}
    {{ form_label(form.type[i]) }}
{% endfor %} 
```

当我们选择不按顺序的 id 时：

例如

```
$typeChoice = [
    "choice 1" => 2,
    "choice 2" => 5
]

{% for type in form.type %}
    {{ form_label(type) }}
    {{ form_widget(type) }}
{% endfor %} 
```

# http - 对 favicon.ico 的 http 请求的最小正确答案是什么

> ID：12507959
> 
> 赞同：8
> 
> 时间：2012-09-20T07:34:36.127
> 
> 标签：http, webserver, favicon

我正在开发一个非常简单的 Web 服务器。

到目前为止，我还没有找到如何从 chrome 禁用对 favicon.ico 的烦人请求。

所以我在想对这样的请求最短/最快的答案是什么。确定对 favicon.ico 的请求后断开连接是否可以。或者这是否被认为是不礼貌的行为，应该避免？

或者，我会发送一条 404 消息。我是否还需要发送文本，或者我是否必须至少发送信息“内容长度：0”或者我什至可以离开这个？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T07:43:47.703

根据[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-6)，最短的有效响应是

```
HTTP/1.0 404 <CRLF>
<CRLF> 
```

和行终止符之间应该有一个空格`404`，实际上将状态代码与状态原因消息（在这种情况下是一个空字符串）分开。这可能不是严格要求的，但我怀疑保存单个字节是否值得与 RFC 稍有偏差。

# ruby-on-rails - Google Oauth2 api - Omniauth Rails

> ID：12507964
> 
> 赞同：0
> 
> 时间：2012-09-20T07:34:52.290
> 
> 标签：ruby-on-rails, google-api, oauth-2.0, omniauth

目前，我正在使用omniauth gems 的典型设置完美地恢复omniauth 信息。

我将 access_token 作为字符串检索，并将其存储到与主用户模型关联的授权模型中。

所以，解决我的问题。

我需要访问calenders api，在文档中我看到很多这样的引用......

```
https://www.googleapis.com/calendar/v3//users/me/calendarList/calendarId 
```

这看起来相当直观。我想与我检索到的访问令牌一起访问它。类似这样的东西...

```
https://www.googleapis.com/calendar/v3//users/me/calendarList/calendarId?access_token=blah 
```

这样我就可以直接将其加载到 Backbone 模型中，并且更加精简。但是，我在文档中看不到任何内容，当我尝试实现时，它始终向我抛出 404 的“未找到”（这很烦人且难以描述。我更喜欢它抛出 422 但我想这是一个讨论用于其他地方。）

文档中是否有任何内容提供了如何使用令牌访问信息的示例实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:32:18.067

我做了更多研究，发现了已发布的 google ruby​​ 客户端 gem。基本上，我们必须将令牌输入到 Google::Client 实例中并抽出一个对象，该对象具有可在其上使用的已定义方法集。

我创建了一个特例控制器来处理此逻辑以呈现合适的 api。

待办事项：稍后会详细介绍。目前我很累。

# android - managedQuery android方法的sql where子句

> ID：12507971
> 
> 赞同：0
> 
> 时间：2012-09-20T07:35:14.753
> 
> 标签：android, database, image, where-clause

我正在尝试将参数写入 android 中的 managedQuery 方法并且在 WHERE 子句中遇到问题，这是我写的；

```
Cursor imageCursor;

// lots of other junk

String[] proj = {MediaStore.Images.Media.TITLE};

imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj, MediaStore.Images.Media.DATA = filename, proj, null ); 
```

“文件名”是一个`string`保存图像路径的变量，例如`/mnt/sdcard/pic05.png`

我希望它返回一个游标，该游标包含与 pic05.png 图像相同的记录，并且返回的游标将包含该特定图片的 TITLE 列信息。我是如何弄乱 sql WHERE CLAUSE 的？我认为我的语法一定是在 where 子句上写的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:44:21.670

在文件名周围添加“”。试试这个

```
 Cursor imageCursor;

     // lots of other junk

       String[] proj = {MediaStore.Images.Media.TITLE};
    String selection = MediaStore.Images.Media.DATA + "='" + filename +"'";

     imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj, selection, null, null ); 
```

# java - 人们多久发布一次关于某个主题的推文？

> ID：12507975
> 
> 赞同：1
> 
> 时间：2012-09-20T07:35:23.747
> 
> 标签：java, datetime, twitter4j

在我的程序中，我从 twitter 获取特定查询的推文。我想计算人们关于这个话题的推文频率。到目前为止，我所做的是；

1.  我得到了两条推文的日期并发现了不同之处
2.  总结这些差异并将其划分为推文数量。

但是，有一个问题是推文的数量可能是奇数，所以每次我都无法获得两条推文，这种情况可能会给我错误的答案。

那么我可以为这个问题做些什么呢？还是有更好的方法来查找人们发推文的频率？

我正在使用 twitter4j。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:38:31.697

目前，您有一种复杂的方法来找到平均平均值；）

您的算法可以简化为“获取第一条和最后一条推文之间的日期差，然后除以推文数量”。

# xml - 匹配 xslt 的子字符串模板

> ID：12507976
> 
> 赞同：2
> 
> 时间：2012-09-20T07:35:28.397
> 
> 标签：xml, templates, xslt, xslt-2.0

我现在挣扎了一段时间。我刚开始使用 xslt，我的工作正常。尽可能使用模板，我尽量避免使用 for 循环。

我的问题是：我有许多名称相似的节点，唯一的区别是从 1 到（当前）5 的后缀数字。这些都应该转换为没有数字的节点。所以基本上，这就是我所拥有的：

```
<title1>some title</title1>
<some_other_nodes>....</some_other_nodes>
<title2>some title2</title2>
.
.
.
<title5>....</title5> 
```

这就是我想要的：

```
<title>some title</title>
.
.
.
<title>some title2</title>
.
.
.
<title>....</title> 
```

是否可以使用模板进行子字符串匹配（仅匹配标题部分）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:51:20.240

对于 titleN 形式的元素，其中 N 是某个数字，请使用匹配条件，例如 ...

*（更正：）*

```
<xsl:template match="*[starts-with(name(),'title')]
                      [number(substring(name(),6))=number(substring(name(),6))]">
  etc... 
```

不太笼统，但又快又脏，如果你想明确地从title1到title5，你可能还会考虑......

```
<xsl:template match="title1|title2|title3|title4|title5"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:43:08.833

**这是一个*真正*的XSLT 2.0 解决方案，它甚至涵盖了最复杂的情​​况，其他答案未涵盖**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[matches(name(), '^title.*?\d+$')]">
  <xsl:element name="{replace(name(), '^(title.*?)\d+$', '$1')}">
    <xsl:copy-of select="namespace::*"/>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<t>
    <title1>some title</title1>
    <some_other_nodes>....</some_other_nodes>
    <title2>some title2</title2> . . . 
    <title5>....</title5>
    <titleX253>Complex title</titleX253>
</t> 
```

**产生了想要的正确结果**：

```
<t>
      <title>some title</title>
      <some_other_nodes>....</some_other_nodes>
      <title>some title2</title> . . . 
    <title>....</title>
      <titleX>Complex title</titleX>
</t> 
```

**请注意元素**：

`<titleX253>Complex title</titleX253>`

**它应该转换为**：

`<titleX>Complex title</titleX>`

**这不是 Sean Durkin 的答案**！

# php - 类似 Facebook 的通知系统

> ID：12507982
> 
> 赞同：0
> 
> 时间：2012-09-20T07:35:51.527
> 
> 标签：php, mysql, database-design, notifications

我想创建一个类似于 facebook 的通知系统，并考虑实现该系统的结构。

我有两个表：`notification`（id，uid，query，date）和`notification_unread`（id，nid，uid，date）。

我很难通过以下方式使用它：如果我在某处发表评论，我会添加：my uid, $_SERVER['QUERY_STRING'], NOW() to `notification`.

我`notification_unread`想插入尚未阅读的帖子数据。在这种情况下`nid`应参考通知 id。只有当可能有另一个新帖子时，才会在此表中插入数据。每次用户看到某些内容时，我都会从该表中删除特定条目。

好吧，但是我真的不知道，如果我的这种方法（包括数据库设计）在某种程度上是“错误”或“太复杂”的方式，我无法弄清楚这一点，因为我不能想一个合乎逻辑的方式何时和如何将数据插入到`notification_unread`. 例如，我不想在发完新帖子后通知自己我发了新帖子。但我想我仍然需要向表中插入数据？

所以，问题是我正在尝试根据需要插入尽可能多的数据并实现这一点最有效。

我希望你能关注我，并非常感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:58:23.653

乍一看，它可能看起来非常简单和干净的解决方案，但后来却失败了。正如 podiluska 指出的那样，最好有一个检查字段。

您可以轻松地显示未读的内容，但是一旦用户检查了它会发生什么？您必须将它移到读取表中，这将增加您的磁盘 I/O，这是任何系统中最慢的过程。您可以简单地查询最近 5 个通知或其他内容。

您可能希望创建一个存档表以将旧通知移动到存档表。重要的是维护该通知表，因为所有更新都将在这里。它变得越大，性能就会受到越多的影响。它的影响很长，但您可能想现在而不是以后考虑解决方案。

# r - 根据上方/下方的数据添加和填写行

> ID：12507986
> 
> 赞同：1
> 
> 时间：2012-09-20T07:36:18.860
> 
> 标签：r

我有一个如下所示的数据集：

```
Date<-c("2009-05-1 10:00:00","2009-05-1 10:05:00","2009-05-1 10:10:00",
"2009-05-1 10:15:00","2009-05-1 10:20:00","2009-05-1 10:25:00")

Dates<-strptime(Date, "%Y-%m-%d %H:%M:%S")

DF<-data.frame(Dates,X=1:6, Y=1:6)

DF
                Dates X Y
1 2009-05-01 10:00:00 1 1
2 2009-05-01 10:05:00 2 2
3 2009-05-01 10:10:00 3 3
4 2009-05-01 10:15:00 4 4
5 2009-05-01 10:20:00 5 5
6 2009-05-01 10:25:00 6 6 
```

照原样，时间戳是每 5 分钟一次。但是我需要每分钟都有一个数据集，所以我希望首先添加丢失的分钟数据，然后估计`X`和`Y`列数据。该`X`列是上面数据的简单填充，并且`Y`是上面/下面数据的平均值。

结果希望如下所示：

```
 Dates X  Y
2009-05-01 10:00:00 1  1
2009-05-01 10:01:00 1  1.5
2009-05-01 10:02:00 1  1.5
2009-05-01 10:03:00 1  1.5
2009-05-01 10:04:00 1  1.5
2009-05-01 10:05:00 2  2
2009-05-01 10:06:00 2  2.5
2009-05-01 10:07:00 2  2.5
2009-05-01 10:08:00 2  2.5
2009-05-01 10:09:00 2  2.5
2009-05-01 10:10:00 3 3
2009-05-01 10:11:00 3 3.5
2009-05-01 10:12:00 3 3.5
2009-05-01 10:13:00 3 3.5
2009-05-01 10:14:00 3 3.5
2009-05-01 10:15:00 4 4
2009-05-01 10:16:00 4 4.5
2009-05-01 10:17:00 4 4.5
2009-05-01 10:18:00 4 4.5
2009-05-01 10:19:00 4 4.5
2009-05-01 10:20:00 5 5
2009-05-01 10:21:00 5 5.5
2009-05-01 10:22:00 5 5.5
2009-05-01 10:23:00 5 5.5
2009-05-01 10:24:00 5 5.5
2009-05-01 10:25:00 6 6 
```

任何关于如何进行此操作的想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:34:01.990

这是一种方法：

```
Date <- c("2009-05-1 10:00:00","2009-05-1 10:05:00","2009-05-1 10:10:00","2009-05-1 10:15:00","2009-05-1 10:20:00","2009-05-1 10:25:00")

Dates <- strptime(Date, "%Y-%m-%d %H:%M:%S")

DF <- data.frame(Dates,X=1:6, Y=1:6)
DF2 <- merge(DF,data.frame(Dates=DF$Dates - 5 * 60, YNext=DF$Y),by='Dates',all.x=T,all.y=F)
DF3 <- merge(DF2,data.frame(Dates=seq(from=min(DF2$Dates),to=max(DF2$Dates),by='1 min')),by='Dates',all=TRUE)

tmpFun <- function(d){
  d$X <- na.omit(d$X)[1]
  d$Y <- ifelse(is.na(d$Y),(na.omit(d$Y)[1] + na.omit(d$YNext)[1]) / 2,d$Y)
  return(d)
}

DF4 <- do.call(rbind,by(DF3,INDICES=(as.POSIXlt(DF3$Dates)$min %/% 5),FUN=tmpFun))

# "beautify" the data.frame (set the row names, and remove the YNext column)
row.names(DF4) <- 1:nrow(DF4)
DF4$YNext <- NULL 
```

结果：

```
> DF4
                 Dates X   Y
1  2009-05-01 10:00:00 1 1.0
2  2009-05-01 10:01:00 1 1.5
3  2009-05-01 10:02:00 1 1.5
4  2009-05-01 10:03:00 1 1.5
5  2009-05-01 10:04:00 1 1.5
6  2009-05-01 10:05:00 2 2.0
7  2009-05-01 10:06:00 2 2.5
8  2009-05-01 10:07:00 2 2.5
9  2009-05-01 10:08:00 2 2.5
10 2009-05-01 10:09:00 2 2.5
11 2009-05-01 10:10:00 3 3.0
12 2009-05-01 10:11:00 3 3.5
13 2009-05-01 10:12:00 3 3.5
14 2009-05-01 10:13:00 3 3.5
15 2009-05-01 10:14:00 3 3.5
16 2009-05-01 10:15:00 4 4.0
17 2009-05-01 10:16:00 4 4.5
18 2009-05-01 10:17:00 4 4.5
19 2009-05-01 10:18:00 4 4.5
20 2009-05-01 10:19:00 4 4.5
21 2009-05-01 10:20:00 5 5.0
22 2009-05-01 10:21:00 5 5.5
23 2009-05-01 10:22:00 5 5.5
24 2009-05-01 10:23:00 5 5.5
25 2009-05-01 10:24:00 5 5.5
26 2009-05-01 10:25:00 6 6.0 
```

# python - 两个发行版可以提供相同的包吗？

> ID：12507988
> 
> 赞同：3
> 
> 时间：2012-09-20T07:36:23.437
> 
> 标签：python

我是[名为 "rewind" 的 PyPi 包（或发行版，等等）](http://pypi.python.org/pypi/rewind)的作者。它附带一个（根）包，名为`rewind`.

目前，该`rewind`包包含服务器和客户端代码。但是，我正在考虑将代码拆分为两个单独的 PyPi 包。一个送货，一个`rewind.server`包裹，另一个送货`rewind.client`。

我的问题是，**两个单独的 PyPi 包可以提供相同的（根）包`rewind`吗？**

到目前为止我所做的测试似乎告诉我这是不可能的。我的测试创建了两个附加到 PYTHONPATH 的文件夹。这两个文件夹都包含 Python 包“mytestpackage”。第一个“mytestpackage”包含模块“a”，第二个包含模块“b”。我只能导入模块“a”或“b”。不是都。

如果可能的话，我很想听听 Pythonistas 同伴的意见。或者，这是当前 Python 包实现的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:39:38.613

`rewind/__init__.py`是的，他们可以，但是您需要在每个包的文件中放置一段特殊的代码，以将其声明为命名空间：

```
__import__('pkg_resources').declare_namespace(__name__) 
```

并且您需要在每个包的`setup.py`元数据中声明命名空间：

```
setup(
    # ...
    namespace_packages  = ["rewind"]
) 
```

所有这一切都需要您使用`setuptools`，它不适用于单纯的 distutils 发行版。

请[参阅](http://pythonhosted.org/setuptools/setuptools.html#namespace-packages)`setuptools`. _

注意：较旧的包使用了更详细的命名空间声明代码：

```
from pkgutil import extend_path
__path__ = extend_path(__path__, __name__) 
```

该`declare_namespace()`功能现在更简洁地处理相同的工作。

# lua - 如何在 Lua 中填充嵌套表？

> ID：12507991
> 
> 赞同：2
> 
> 时间：2012-09-20T07:36:29.263
> 
> 标签：lua

这一定很容易，但我找不到解决方案：我有一个文本文件，其中包含这种形式的数据：

```
| 1 | 1 | A | X |
|   | 2 | A | Z |
|   |   | B | Y | 
```

我想用 Lua 处理这些数据，所以我需要将它放在这样的结构化（嵌套）表中（我希望缩进正确）：

```
t = {
    ['1'] =
    {  
        ['1'] = 
        {
            {
                { ['A'] = 'X' },
            },
        },
        ['2'] = 
        {
            {
                { ['A'] = 'Z' },
                { ['B'] = 'Y' },
            },
        },
    },
} 
```

但我不知道如何从 A 到 B。结构已经存在，但我怎样才能将它读入 Lua？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:03:12.540

这肯定会为您完成任务。

```
tTable = {}
OldIDX, OldIDX2, bSwitched, bSwitched2 = 0, 0, false, false

for str in io.lines("txt.txt") do
    local _, _, iDx, iDex, sIdx, sVal = str:find( "^%| ([%d|%s]?) %| ([%d|%s]?) %| (%S?) %| (%S?) %|$" )
    if not tonumber(iDx) then iDx, bSwitched = OldIDX, true end
    if not tonumber(iDex) then iDex, bSwitched2 = OldIDX2, true end
    OldIDX, OldIDX2 = iDx, iDex
    if not bSwitched then
        tTable[iDx] = {}
    end
    if not bSwitched2 then
        tTable[iDx][iDex] = {}
    end
    bSwitched, bSwitched2 = false, false
    tTable[iDx][iDex][sIdx] = sVal
end 
```

# 笔记

您可以在代码中更改的唯一内容是文件名。:)

# 编辑

好像我错了，你确实需要一些改变。也做了他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:52:35.790

假设您可以在一行中读取并获取`|`'s 之间的各个项目，算法将是这样的（伪代码，我将使用 col(n) 来指示当前第 n 列中的字符线）：

```
1\. store current indices for columns 1 and 2 (local vars)
2\. read line (if no more lines, go to 7.)
3\. if col(1) not empty - set the currentCol1 index to col(1)
    a. if t[currentCol1] == nil, t[currentCol1] = {}
4\. if col(2) not empty - set the currentCol2 index to col(2)
    a. if t[currentCol1][currentCol2] == nil, t[currentCol1][currentCol2] = {}
5\. set t[currentCol1][currentCol2][col(3)] = col(4)
6\. go to step 2.
7\. return t 
```

我希望这主要是不言自明的。除了第 2 步之外，从伪代码到 lua 应该没有问题（而且我们不知道您如何获取这些数据来帮助您完成第 2 步）。如果您不确定能够执行的操作，我建议您从[这个 lua-users 教程](http://lua-users.org/wiki/TablesTutorial)中查看“作为数组的表格”和“作为字典的表格” 。

作为旁注 - 您的示例似乎将 A=X,A=Z,B=Y 双重嵌套在两个表中。我怀疑不是：

```
['2'] = 
    {
        {
            { ['A'] = 'Z' },
            { ['B'] = 'Y' },
        },
    }, 
```

你的意思是：

```
['2'] = 
    {
        { ['A'] = 'Z' },
        { ['B'] = 'Y' },
    }, 
```

所以这就是伪代码应该给你的。

# iphone - IOS - 通过 ARC 循环创建新对象实例

> ID：12507995
> 
> 赞同：0
> 
> 时间：2012-09-20T07:36:42.197
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, instance

基本上，我的问题是我试图通过循环创建 3 个 UIView 实例。我正在使用 ARC，我真的不知道我想做的事情是否可行。这是我目前拥有的代码：

```
NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"RoomView"
                                                  owner:self
                                                options:nil];
NSMutableArray *roomViews = [[NSMutableArray alloc] initWithCapacity:[gtb.rooms count]];

for (i = 0; i < [gtb.rooms count]; i++)
{
    RoomView *rcv = [[RoomView alloc] init];
    NSDictionary *room = [gtb.rooms objectAtIndex:i];
    rcv = [nibViews objectAtIndex:0];
    NSLog(@"Start rcv = %@", rcv);
    rcv.roomNumber.text = [NSString stringWithFormat:@"Chambre %d", i + 1];
    rcv.roomType.text = [room objectForKey:@"roomType"];
    [rcv setFrame:CGRectMake(0, sizeOfContent, rcv.frame.size.width, rcv.frame.size.height)];
    sizeOfContent += rcv.frame.size.height;
    [roomViews addObject:rcv];
    NSLog(@"End rcv = %@", rcv);
}

for (i = 0; i < [gtb.rooms count]; i++)
    NSLog(@"Room #%i : %@", i, [roomViews objectAtIndex:i]); 
```

这是我在日志中的内容：

```
2012-09-20 10:15:00.287 AppName[2792:707] Start rcv = <RoomView: 0x148570; frame = (0 0; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.289 AppName[2792:707] End rcv = <RoomView: 0x148570; frame = (0 420; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.312 AppName[2792:707] Start rcv = <RoomView: 0x148570; frame = (0 420; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.314 AppName[2792:707] End rcv = <RoomView: 0x148570; frame = (0 527; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.316 AppName[2792:707] Start rcv = <RoomView: 0x148570; frame = (0 527; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.317 AppName[2792:707] End rcv = <RoomView: 0x148570; frame = (0 634; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.319 AppName[2792:707] Room #0 : <RoomView: 0x148570; frame = (0 634; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.323 AppName[2792:707] Room #1 : <RoomView: 0x148570; frame = (0 634; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>>
2012-09-20 10:15:00.325 AppName[2792:707] Room #2 : <RoomView: 0x148570; frame = (0 634; 320 107); autoresize = W+H; layer = <CALayer: 0x148510>> 
```

我知道如果我没有使用 ARC，我应该`[rcv autoRelease]`在循环末尾放置类似的东西，但是使用 ARC，我不能。

有什么解决方案可以解决它，还是我必须为此文件禁用 ARC？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:54:43.840

使用 ARC，自动释放正在为您调用。你不必担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:29:29.270

您需要替换此行：

```
rcv = [nibViews objectAtIndex:0]; 
```

有了这个：

```
rcv = [[nibViews objectAtIndex:0] copy]; 
```

因为如果不是，您只是在访问同一个视图对象，而不是从它复制的新对象（未复制强引用）。

另一方面，ARC在这件事上没有影响。如果没有 ARC，你也会遇到同样的问题。使用 ARC，您只是不编写发布/自动发布等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:59:13.423

根据内存管理规则，您只需要释放您分配初始化或复制的对象。在这里，您没有同时使用 RoomView *rcv。因此，即使您的代码是`not ARC enabled`您也不需要发布或自动发布它。

# c# - 如何将 COM 对象作为 IntPtr 传递给 P/Invoke 方法？

> ID：12507998
> 
> 赞同：3
> 
> 时间：2012-09-20T07:36:56.767
> 
> 标签：c#, .net, pinvoke, outlook-addin, mapi

目前正在使用 Add-in Express 开发 Outlook 加载项，我必须恢复为一些纯 MAPI 函数来读取 MAPI 属性。

将这个 P/Invoke 包装器添加到[`HrGetOneProp`函数](http://msdn.microsoft.com/en-us/library/office/cc842245.aspx)中：

```
[DllImport(@"MAPI32.DLL")]
static extern int HrGetOneProp(IntPtr pmp, uint ulPropTag, out IntPtr ppProp); 
```

我正在尝试将类型的 Outlook 附件对象[`IMAPIProp`](http://msdn.microsoft.com/en-us/library/office/cc815525.aspx)作为第一个参数传递给函数。

我目前失败的是如何将该对象“转换”为一个`IntPtr`，以便我可以将它作为第一个参数传递给函数。我试过使用[`Marshal.StructureToPtr`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.structuretoptr)，但显然这失败了一个例外，因为我*没有*传递一个结构，而只是一个对非托管 COM 对象的引用。

**所以我的问题是：**

如何`HrGetOneProp`通过传递 COM 对象成功调用方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:50:27.073

您想使用[Marshal.GetIUnknownForObject 方法](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getiunknownforobject.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:51:54.550

我相信任何一个或 `Marshal.GetComInterfaceForObject`应该工作`Marshal.GetIUnknownForObject``Marshal.GetIDispatchForObject`