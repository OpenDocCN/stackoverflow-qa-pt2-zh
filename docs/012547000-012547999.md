# StackOverflow 问答 12547000-12547999

# ios - NSUnderlyingError = "错误的 URL"

> ID：12547001
> 
> 赞同：1
> 
> 时间：2012-09-22T19:26:12.130
> 
> 标签：ios, xcode, nsurlconnection

我正在尝试使用以下方法从 Google 返回 JSON：

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com.br/maps/api/directions/json?origin=%@&destination=%@&sensor=false", pointOrigem, pointDestino];
    NSURL *url = [NSURL URLWithString:urlString]; 
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [NSURLConnection connectionWithRequest:request delegate:self];

    NSLog(@"%@", urlString); 
```

如您所见，我已经记录了 url 以确保一切正常。这里是：

[http://maps.google.com.br/maps/api/directions/json?origin=rua+cabral+983+Porto+Alegre+RS&destination=travessa+ouvidor+128+Porto+Alegre+RS&sensor=false](http://maps.google.com.br/maps/api/directions/json?origin=rua+cabral+983+Porto+Alegre+RS&destination=travessa+ouvidor+128+Porto+Alegre+RS&sensor=false)

有人知道我的代码有什么问题吗？谢谢你的帮助！

# django - 带有 SQL Cloud 的 App Engine 上的 Django 1.4

> ID：12547003
> 
> 赞同：0
> 
> 时间：2012-09-22T19:26:33.803
> 
> 标签：django, google-app-engine, djangoappengine

有人成功使用 Django 1.4 和 Google App Engine 吗？我已经完成了我要上传到 App Engine 上的项目，我意识到目前最新支持的版本是 1.3，GAE SDK 是 1.3。任何想法我现在应该做什么？降级到 1.3 是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:49:50.107

您可以在项目中包含 1.4 'django' 文件夹，就像一个库一样。我不确定这是否被认为是一种好的做法，但这就是我正在做的事情，而且效果很好。

# c# - 有没有一种简单的方法可以在 C# 中重构参数？

> ID：12547005
> 
> 赞同：0
> 
> 时间：2012-09-22T19:26:51.273
> 
> 标签：c#, refactoring, visual-studio-2012

我有 34 种不同的方法，它们采用 ViewModel 类的 1 个参数，但它们中的每一个只使用类上的两个或三个属性。我想我宁愿将这些属性传递给这些方法，而不是整个对象。这是一种轻松重构的方法吗？我试图只选择我的函数中的所有文本并执行 Refactor > Extract Method 希望它足够聪明，可以看到只使用了对象的 2 个属性并将参数列表设为这 2 个属性，但它只是想再次获取整个对象。

也许我需要解释我在做什么......

我正在尝试编写一个将为 wiki 页面生成文本的应用程序。根据输入到 UI 中的值，它会生成模板的文本和使用该模板的文本，或者如果不需要模板，它只会为页面生成文本。它有 17 个不同的部分，因此有 17 个函数在组合时会创建模板页面的文本，如果不需要模板，则有 17 个函数可以组合成实际页面。我这样做是为了一次测试较小的部分，而不是测试一个大型函数的整个输出。

所以目前所有 34 种方法都采用 1 个参数，即从 UI 构建的整个对象。对我来说这已经没有意义了。生成整个页面的 1 部分的函数永远不需要知道在不同部分中使用的数据，如果有人确实尝试在那里使用它，那么我知道出了点问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T19:32:04.543

有没有理由不通过对象？对象通过引用传递，效率很高，另外，如果您的实现需要更多属性，修改函数比维护函数声明并跟踪所有调用者更容易。我倾向于不理它。

但是要回答您的具体问题，我不知道在 Visual Studio 中重构它的方法。这也是为什么如果它有效，我会倾向于不理会它的另一部分原因。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:30:08.967

也许 Resharper 可以帮助您，因为它提供了许多[不同的重构功能](http://www.jetbrains.com/resharper/features/code_refactoring.html)。您可以尝试下载试用版，试用期为 30 天。不幸的是，目前没有开放的 EAP 程序，因为他们正在发布 v7。

# macos - 将密钥代码转换为密钥等效字符串

> ID：12547007
> 
> 赞同：6
> 
> 时间：2012-09-22T19:27:01.580
> 
> 标签：macos, cocoa, keyboard-shortcuts

如何将关键代码转换为`kVK_ANSI_1`可以传递给的字符串`setKeyEquivalent`（所以对于`kVK_ANSI_1`，我会得到`@"1"`）？为什么有两种方法可以指定键呢？只有一种表示形式会更有意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T22:20:00.547

我最终使用了[此处](https://stackoverflow.com/a/1971027/363078)找到的以下功能。

```
/* Returns string representation of key, if it is printable.
 * Ownership follows the Create Rule; that is, it is the caller's
 * responsibility to release the returned object. */
CFStringRef createStringForKey(CGKeyCode keyCode)
{
    TISInputSourceRef currentKeyboard = TISCopyCurrentKeyboardInputSource();
    CFDataRef layoutData =
        TISGetInputSourceProperty(currentKeyboard,
                                  kTISPropertyUnicodeKeyLayoutData);
    const UCKeyboardLayout *keyboardLayout =
        (const UCKeyboardLayout *)CFDataGetBytePtr(layoutData);

    UInt32 keysDown = 0;
    UniChar chars[4];
    UniCharCount realLength;

    UCKeyTranslate(keyboardLayout,
                   keyCode,
                   kUCKeyActionDisplay,
                   0,
                   LMGetKbdType(),
                   kUCKeyTranslateNoDeadKeysBit,
                   &keysDown,
                   sizeof(chars) / sizeof(chars[0]),
                   &realLength,
                   chars);
    CFRelease(currentKeyboard);    

    return CFStringCreateWithCharacters(kCFAllocatorDefault, chars, 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:39:38.767

UCKeyTranslate 可能是你在[https://developer.apple.com/library/mac/#documentation/Carbon/Reference/Unicode_Utilities_Ref/Reference/reference.html之后的样子](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/Unicode_Utilities_Ref/Reference/reference.html)

# java - 标识符与关键字

> ID：12547009
> 
> 赞同：7
> 
> 时间：2012-09-22T19:27:17.493
> 
> 标签：java, assertions, scjp

我在 OCJP for Java6 的书中读到了带有断言的部分。我到达了它概述了如果将“assert”一词用作关键字或标识符时编译器如何反应的部分。

a`Keyword`和 an 和有什么不一样`identifier`？谁能给我一个简单的解释以及两者的一个或多个示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T19:34:12.157

术语“关键字”和“标识符”不是 Java 特定的。

关键字是[Java 关键字列表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)中的保留字，为编译器提供指令。由于关键字是保留的，程序员不能将它们用于变量或方法名称。

例子：

```
final
class
this
synchronized 
```

标识符是变量、方法、类、包和接口的名称。它们必须由字母、数字、下划线 _ 和美元符号 $ 组成。标识符只能以字母、下划线或美元符号开头。

例子：

```
int index;
String name; 
```

`index`并且`name`是这里的有效标识符。`int`是一个关键字。

关键字不能用作标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T19:33:55.407

标识符是变量的名称。例如在

```
int a = 3; 
```

`a`将标识符。另一方面，关键字是保留的（即您不能用关键字命名变量），即在语言中具有特定含义的预定义词。例如在

```
if (a == 3)
    System.out.println("Hello World"); 
```

`if`是一个关键字。它具有特定的功能，不能用作变量名。此外，用于声明原始类型的词也都是关键字，例如`int`, `char`,`long`等。您可以[在此处查看](http://en.wikipedia.org/wiki/List_of_Java_keywords)`boolean`Java 关键字的完整列表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T19:31:13.020

关键字是保留字，例如`new,static,public,if,else,..`

标识符可以是任何变量的名称。

```
int age = 26; 
```

`"age"`这里是一个标识符，while`int`是一个保留字。

以下示例无法编译：

```
String static = "hello";
int public = 4; 
```

你不能这样做，因为`"static"`和`"public"`是`keywords`，在这种情况下被用作`identifiers`，这是不允许的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T19:30:28.187

我假设一个标识符是你自己的（函数名，变量名，...）；关键字是“class”或“assert”或“while”——语言定义的标识符，换句话说

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-31T17:14:35.777

以下页面包含与 1Z0-803 OCA 认证相关的 Java 标识符和关键字列表。 [Java 标识符关键字](http://www.j2eeonline.com/java2-programmers-certification/module2/identifiers-keywords.jsp)

# .htaccess - 将域主目录更改为子目录

> ID：12547011
> 
> 赞同：0
> 
> 时间：2012-09-22T19:28:12.967
> 
> 标签：.htaccess

我想将主机上主域的主目录移动到一个子目录，以便所有其他域、子域不会与主域上网站的文件夹混合。

关于如何在主机上组织文件夹的示例：

主域的当前位置：public_html/index.php

主域的新位置：public_html/old_main/index.php

访问主域时更改后的 url 应该是相同的。

我找到了这些条件，但它们弄乱了我所有的其他域。我想要重定向的那个工作得很好。我不知道如何排除其他人。

```
Options -Indexes
RewriteEngine on
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} !^www\.mysite\.com$ [NC]
RewriteRule .* http://www.mysite.com/   [L,R=301]
RewriteRule ^$ drupal/index.php [L]
RewriteCond %{DOCUMENT_ROOT}/drupal%{REQUEST_URI} -f
RewriteRule .* drupal/$0 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* drupal/index.php?q=$0 [QSA] 
```

谢谢，塞巴斯蒂安

# jquery - 选择选项背景颜色不会改变，直到专注于

> ID：12547013
> 
> 赞同：0
> 
> 时间：2012-09-22T19:28:18.400
> 
> 标签：jquery, css

好的，

这让我发疯了。我正在尝试在多选框中更改我的 SELECTED 选项的背景颜色。

我试过用 CSS 和 Jquery 来改变它，它确实有效，但只有当你专注于盒子时背景颜色才会改变。不知何故，SELECTED 属性用#d4d4d4 灰色覆盖了背景颜色。

这是一个例子

[http://jsfiddle.net/e6XLs/](http://jsfiddle.net/e6XLs/)

# jquery - jquery中的变量函数

> ID：12547016
> 
> 赞同：0
> 
> 时间：2012-09-22T19:28:44.043
> 
> 标签：jquery

我不太擅长 jquery。是否有可能放置一个变量运算符来使函数工作？因为在不同的页面上使用了不同版本的 jQuery。

**.on**功能出现在 1.7 中，但有些网站运行的版本较低，因此我需要使用.click**功能**。我想避免每个版本的重复代码。

例如 ：

```
$('#mySelector')(var <= 3.4) ? ".click(function()" : ".on('click', function()");

{
    $( "#dialog p span" ).remove(); 
    $( "#dialog p" ).append('<span>'+ isEncHTML(html_output) 
}); 
```

谢谢大家的帮助。

为了更清楚：

这适用于 1.7（包括按钮 - 选项：

```
$('.delete_league, .print_league').on('click', function() 
{
        $( "#dialog p" ).append('<span>'+wpslm_v_script_vars.delete_league+'</span>');
            $( "#dialog" ).dialog({ 
                modal: true, 
                buttons: 
                [{
                    text: "OK",
                    click: function() 
                    { 
                        $( "#dialog p span" ).remove();
                        $(this).dialog("close"); 
                    }
                }] 
            });
}); 
```

这适用于 1.6。如果我保留按钮选项，则会引发错误。

```
 $('.delete_league, .print_league').click(function() 
{
    // Just in case there is an old message hanging around
    $( "#dialog p span" ).remove(); 
    $( "#dialog p" ).append('<span>'+ isEncHTML(wpslm_v_script_vars.delete_league) +'</span>');
    $( "#dialog" ).dialog({ 
        modal: true
    });
}); 
```

所以，我想制作选择器行（和按钮选项）变量，以便我可以对两者使用相同的代码。意思是，如果我看到我运行的是比 1.7 更旧的版本，我会使用不带按钮的 .click，否则我会使用带有按钮选项的 .on。我希望现在这不会太混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:53:42.843

不是检查 jquery 版本，而是检查函数是否存在

```
if($.fn.on) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:44:23.763

> 我想避免每个版本的重复代码。

如果您想编写与 jQuery 2 版本兼容的代码，但又不想重复代码，那么您最好只针对您的代码支持的最低版本编写代码。

例如，如果最低为 1.6，则`bind`用于附加事件，`delegate`如果您需要将事件附加到动态生成的元素。
*（`click`无论如何在 1.6 中调用 bind 所以你不妨使用`bind`）*

就我个人而言，我认为编写一个方法来支持多个版本是一个坏主意，并且在某些情况下会难以维护并且难以调试。

但是，如果您针对特定版本的 jQuery 编写 2 个单独的代码文件，则可以只包含一个或另一个，具体取决于应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:31:17.747

只需`.click`在这两种情况下使用。`click`在 jQuery 1.7 中有效

或者你可以做这样的事情

```
var setClick = function (selector,handler) {
      return $.fn.on ?
              function () {
                  $(selector).on('click',handler)
              } 
              : function () {
                   $(selector).click(handler);
              }
} 
```

你可以像这样使用它

```
setClick("#mySelector",function () {
    $( "#dialog p span" ).remove(); 
    $( "#dialog p" ).append('<span>'+ isEncHTML(html_output) 
}); 
```

或者你可以将它添加到 jQuery 对象

```
$.fn.setClick = function (handler) {
      return this.on ?
              function () {
                  this.on('click',handler)
              } 
              : function () {
                   this.click(handler);
              }
} 
```

然后像下面这样调用它

```
$("#mySelector").setClick(function () {
    $( "#dialog p span" ).remove(); 
    $( "#dialog p" ).append('<span>'+ isEncHTML(html_output) 
}); 
```

但是在所有情况下，您最终都一事无成，因为上述所有内容都可以通过首先使用 .click 轻松完成

# android - 为平板电脑扩展 Android 应用程序

> ID：12547019
> 
> 赞同：1
> 
> 时间：2012-09-22T19:28:56.580
> 
> 标签：android, scaling, tablet, android-4.0-ice-cream-sandwich

我目前有一个使用 android 4.0 创建的 android 应用程序。我最初为手机屏幕尺寸开发了它，但我决定在我的现实生活平板电脑上试用它。问题是（你们中的大多数人可能已经知道）所有的文本视图和按钮仍然很小，因为它是为手机准备的。我正在和我的一位教授交谈，她提到了进入 xml 清单的一行代码，它将自动为我扩展所有内容。搜索我发现似乎最容易实现的唯一东西是：

```
<supports-screens android:largeScreens="true" /> 
```

当我在此代码中添加时，它没有看到有什么不同。为了以防万一，我什至尝试了 xlragescreens。

我做错了什么还是真的有一种简单的方法可以让我的应用程序轻松扩展，还是我必须制作平板电脑版本？

还有一些可能有帮助的要点： 平板电脑是：nexus 7（运行 4.1） 我确实将 targetSdkVersion 设置为 15（在网上查看，我看到您需要将其设置为 11 以上以进行缩放）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:57:13.140

创建一个 /res/layout-large 文件夹并将 XML 文件命名为与 /res/layout 中已使用的文件相同的名称。然后在平板电脑等大屏幕上加载时将使用此布局。此外，最好的做法是使用UI 元素并调整其大小，而不是使用`match_parent`or来定义它们。 `wrap_content``px``dp`

有关为所有显示器创建 UI 的更多信息，请访问此处：

[http://developer.android.com/guide/practices/tablets-and-handsets.html](http://developer.android.com/guide/practices/tablets-and-handsets.html)

# c# - 在 WebPart 中呈现 TextBox（服务器控件）并从编辑器部分管理服务器控件（文本、可见性等）

> ID：12547020
> 
> 赞同：2
> 
> 时间：2012-09-22T19:29:14.043
> 
> 标签：c#, asp.net, sharepoint, web-parts

我最初的目标是实现以下目标 1\. 在自定义编辑器 webpart 中呈现动态 TextBox 2\. 从编辑器部分管理 TextBox 的文本（、可见性、高度、宽度等）。3.我们可以考虑Sharepoint webpart或者asp.net webpart框架

我尝试了以下方式（使用 asp.net webpart 框架）但无法实现初始目标。

```
//CustomWebPart.cs
 private string _text;
 [WebBrowsable(false)]
 [Personalizable(PersonalizationScope.Shared)]
 public string Text
 {
    get { return _text; }
    set { _text = value; }
 }
 protected override void CreateChildControls()
 {
    TextBox txt = new TextBox();
    txt.Text = Text;
    Controls.Add(txt);
 }

//CustomEditor.cs
 private TextBox txtExample;
 protected override void OnInit(EventArgs e)
 {
    base.OnInit(e);
    txtExample= new TextBox();
 }
 protected override void CreateChildControls()
 {
    Controls.Add(txtExample);
 }
 public override bool ApplyChanges()
 {
     EnsureChildControls();
     CustomWebPart part = WebPartToEdit as CustomWebPart;
     if (part != null)
     {
          part.SqlQuery = txtExample.Text;
     }
 }
 public override void SyncChanges()
 {
    EnsureChildControls();
    CustomWebPart part = WebPartToEdit as CustomWebPart;
    if (part != null)
    {
        txtExample.Text = part.SqlQuery;           
    }
 } 
```

问题非常清楚和正常：
一旦我单击 OK 或 Apply 按钮系统从编辑器 webpart 更改文本后，首先触发 CustomWebpart.cs 的 CreateChildControls() 事件，然后触发 ApplyChanges() 甚至在触发 CustomEditor.cs 的 CreateChildControls() 之前，作为结果 webpart 的文本框无法按时更新。

那么，我们如何在 webpart 中呈现 asp.net 服务器端控件并从编辑器部分管理（更改文本、可见性、宽度、高度等）。?

有什么想法吗？

# mysql - 从跨两列的mysql表中删除重复数据

> ID：12547025
> 
> 赞同：2
> 
> 时间：2012-09-22T19:29:40.377
> 
> 标签：mysql, duplicate-removal

我有一个 MySQL 表，它看起来像：
（unique_id，uid_data1，uid_data2，sorting_data1，sorting_data2）

该表用于工具中，直到现在才支持双向关系，因此该表包含的数据看起来像（根据上面的行的字段顺序）：
(1, 1212, 2034, 1, 1)
(2, 2034, 1212, 1, 1)
(3, 4567, 9876, 1, 0)
(4, 9876, 4567, 0, 1)

该表还包含“单向”关系，即
(5, 5566, 8899, 1, 9)
=> (?, 8899, 5566, 9, 1) 不存在行

由于该工具现在支持双向/对称关系，我想从 mysql 表中删除重复数据 - 但是我在找到合适的查询来执行此操作时遇到了一些麻烦。
在上面的示例中，我想删除 uid 为 2 和 4 的行（因为它们的数据已经存储在第 1 行和第 3 行中。

首先，我尝试设置一个 SELECT-Statement 来查看哪些条目将被删除。
我想到了一个 JOIN-Query

```
SELECT x.uid, x.uid_link1, x.uid_link2, y.uid_link1 as 'uid_link2', y.uid_link2 as 'uid_link1'
FROM tx_sdfilmbase_hilfstab x
INNER JOIN tx_sdfilmbase_hilfstab y ON x.uid_link1=y.uid_link2 AND x.uid_link2=y.uid_link1
WHERE ???
ORDER BY x.uid_link1, x.uid_link2 
```

但是我被困在我必须告诉 MySQL 只选择记录的“一半”的地步。
关于如何做到这一点的任何建议？

PS 在表中手动删除每条记录不是一种选择，因为该表包含数千行；-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:55:21.283

```
Select t.* from MyTable t
inner join MyTable tt
On t.uid_data1 = tt.uid_data2 and t.uid_data2 = tt.uid_data1 and t.unique_ID > tt.unique_ID 
```

应该找到该对的“第二”部分（您的示例中的记录 2 和 4）

如果我做对了

```
Delete t from MyTable t
inner join MyTable tt
On t.uid_data1 = tt.uid_data2 and t.uid_data2 = tt.uid_data1 and t.unique_ID > tt.unique_ID 
```

应该做的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:44:39.223

所以，这一行将是

> uid_link1=1,uid_link2=9

和另一个

> uid_link1=9 和 uid_link2=1

对？

关于什么

> .. 哪里 x.uid_link1 < y.uid_link1 ...

但这不会删除带有 uid_link1=uid_link2 的重复项

编辑：或者你可以使用 ... WHERE x.unique_id < y.unique_id

# php - runkit 针对 php 5.3.8 编译错误？

> ID：12547038
> 
> 赞同：0
> 
> 时间：2012-09-22T19:31:09.093
> 
> 标签：php, pecl, runkit

它给了我一个针对 5.3.8 的编译错误。我运行 phpize，然后配置，然后制作：

```
/bin/sh /root/runkit/runkit-0.9/libtool --mode=compile cc -I. -I/root/runkit/runkit-0.9 -DPHP_ATOM_INC -I/root/runkit/runkit-0.9/include -I/root/runkit/runkit-0.9/main -I/root/runkit/runkit-0.9 -I/usr /include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include /php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /root/runkit/runkit-0.9/runkit.c -o runkit.lo
mkdir .libs
 抄送-I。-I/root/runkit/runkit-0.9 -DPHP_ATOM_INC -I/root/runkit/runkit-0.9/include -I/root/runkit/runkit-0.9/main -I/root/runkit/runkit-0.9 -I/usr /include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include /php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /root/runkit/runkit-0.9/runkit.c -fPIC -DPIC -o .libs/runkit.o
/root/runkit/runkit-0.9/runkit.c：在函数“zif_runkit_zval_inspect”中：
/root/runkit/runkit-0.9/runkit.c:61：错误：“zval”没有名为“refcount”的成员
/root/runkit/runkit-0.9/runkit.c:62：错误：“zval”没有名为“is_ref”的成员
/root/runkit/runkit-0.9/runkit.c：在函数“zm_deactivate_runkit”中：
/root/runkit/runkit-0.9/runkit.c:360：警告：从不兼容的指针类型传递“zend_hash_apply”的参数 2
/root/runkit/runkit-0.9/runkit.c:370：警告：从不兼容的指针类型传递“zend_hash_apply”的参数 2
/root/runkit/runkit-0.9/runkit.c:378：警告：从不兼容的指针类型传递“zend_hash_apply_with_arguments”的参数 2
制作：*** [runkit.lo] 费勒 1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:24:24.657

官方的 runkit 扩展现在托管在[http://github.com/zenovich/runkit](http://github.com/zenovich/runkit) 当前的 master 分支完全支持从 4.4 到 5.3 和 5.4 的所有当代 PHP 版本。

# python - 安装 django 项目，数据库问题

> ID：12547040
> 
> 赞同：1
> 
> 时间：2012-09-22T19:31:11.870
> 
> 标签：python, django

我正在安装阳光基金会的胸肉，我对 python 非常陌生，对 django 更是陌生。所以我在 github 上下载了这个项目：[https](https://github.com/sunlightlabs/brisket) ://github.com/sunlightlabs/brisket 。

因此，当我运行 ./manage.py run server 命令时，我收到一条错误消息。但是我对python和django一无所知。

所以现在这是错误消息，我应该安装一个包吗？
有人可以帮忙吗？

```
 Unhandled exception in thread started by <bound method Command.inner_run of <django.core.management.commands.runserver.Command object at 0x976b84c>>
    Traceback (most recent call last):
      File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 219, in execute
    self.validate()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 36, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 146, in get_app_errors
    self._populate()
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 76, in load_app
    app_module = import_module(app_name)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
ImportError: No module named brisket.influence 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:34:55.390

您没有安装 mysql for python。有多种方法可以做到这一点，但最常见的是：

```
pip install MySQL-python 
```

或者

```
easy_install MySQL-python 
```

# javascript - 将值传递给nodejs中的回调

> ID：12547042
> 
> 赞同：0
> 
> 时间：2012-09-22T19:31:14.293
> 
> 标签：javascript, node.js, asynchronous

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

```
for (i = 0; i < 100; i++) {
    setTimeout(function() {
        console.log(i);
    }, 500)
} 
```

在上面的代码中，它只会打印 100。我知道原因。但是我如何将当前的 i 值发送到回调中`setTimeout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:33:38.107

在循环中使用匿名函数来创建闭包：

```
for (i = 0; i < 100; i++) {

  (function(i){

    window.setTimeout(function() {
      console.log(i);
    }, 500)

  })(i);

} 
```

当您在调用时将值传递给函数时，该值将被复制，并且函数的每个实例都将拥有自己的副本，当循环计数器更改时不会更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:32:53.980

[setTimeout 接受传递给回调的参数](http://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg)：

```
for (i=0;i<100;i++){
    setTimeout(function(i){
        console.log(i);
    },500, i)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:33:16.337

这有效：

```
for (var i = 0; i < 100; i++) {
    (function(i) {
        setTimeout(function() {
            console.log(i);
        }, 500);
    })(i);
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T19:33:50.783

```
for (i = 0; i < 100; i++) {
    setTimeout((function(i) {
        return function(){
            console.log(i);
        }
    })(i), 500)
} 
```

# iphone - iPhone 5、iOS 6 模拟器上的无响应屏幕

> ID：12547047
> 
> 赞同：1
> 
> 时间：2012-09-22T19:31:37.070
> 
> 标签：iphone, ios, xcode, screen, retina-display

我在我的应用程序中添加了一个 Default-568h@2x.png，它在 Retina 4 英寸模拟器上看起来不错。然而，屏幕底部有大约 170 像素区域，对轻敲和/或触摸没有反应。你有同样的问题吗？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T20:25:59.420

假设您使用的是 MainWindow.nib，请单击根 VC 并选择“启动时全屏”。

或者，在`-applicationDidFinishLaunching:withOptions:` `window.frame = [UIScreen mainScreen].bounds`（或`window.frame = window.screen.bounds`）中。如果您有很多不想碰的笔尖（例如，如果您本地化为 10 种语言），这可能会更可取。

# vb.net - 自定义按钮单击事件触发两次

> ID：12547051
> 
> 赞同：0
> 
> 时间：2012-09-22T19:32:05.450
> 
> 标签：vb.net, button

```
 Public Class MyNewButton
      Inherits Button

    Private _NewTag as string
    Public Property NewTag() As String

     Get
                Return _NewTag 
            End Get
            Set(ByVal value As Integer)
                _NewTag = value
            End Set

    End Property

End Class 
```

现在，编译此代码并获取新按钮并使用它，如下所示：

```
Dim NewBtn as MyNewButton

    NewBtn.Text="New Button"
    NewBtn.NewTag="Here New tag string" ' This is the custom property
    Addhandler NewBtn.Click Addressof Btn_Click() 

 Private Sub Btn_Click()

        msgbox("New Button")
     End Sub 
```

问题是当我单击该按钮时，方法 Btn_Click() 执行了两次并且对此的解决方案?????? NB。我正在使用 vb.net windows 应用程序而不是 web 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:59:20.803

首先，您的代码无法运行。`value as integer`错了，一定是`as String`财产之类的。已更正，我无法重现您的问题。我不认为它可能源自您给出的那些代码部分。

除此之外，属性现在可能是单行的， http: [//msdn.microsoft.com/en-us/library/dd293589%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd293589%28v=vs.100%29.aspx)

# solr - 如何将 solr 与现有的 Web 应用程序一起使用

> ID：12547065
> 
> 赞同：1
> 
> 时间：2012-09-22T19:33:55.883
> 
> 标签：solr

有没有办法将 solr 嵌入到我现有的 Web 应用程序中，它需要索引从我的应用程序传入的数据？我需要在应用程序中使用搜索。

有没有办法在不单独托管的情况下使用 solr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:37:41.733

您可以将 Solrj 与[EmbeddedSolrServer](http://wiki.apache.org/solr/Solrj#EmbeddedSolrServer)实现一起使用。

# android - 如何在 Android 中制作 VideoView？

> ID：12547069
> 
> 赞同：1
> 
> 时间：2012-09-22T19:34:18.673
> 
> 标签：android

我想为App制作一个Opening Video，已经解决了，但是如何制作一个videoview来做呢？如何设置 java 类和 xml 布局？

这是我的基本代码

```
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
     }
} 
```

# python - Python：os.path.isdir /isfile /exists 不起作用，当它们应该返回 True 时返回 False

> ID：12547070
> 
> 赞同：2
> 
> 时间：2012-09-22T19:34:45.787
> 
> 标签：python

所以，这是我的小程序。它应该打印给定目录中的所有文件+每个子目录中的所有文件。

```
import os

def listFiles(directory):
    dirList = os.listdir(directory)
    printList = []
    for i in dirList:
        i = os.path.join(directory,i)
      #  print(i)
        if os.path.isdir(i):
            printList[len(dirList):] = listFiles(i)
        else:
            printList.append(i)
    return printList

directory = 'C:\Python32\Lib'
listFiles(directory)
a = listFiles(directory)

for i in a:
    print(i) 
```

有什么问题： os.path.isdir(i) 无法正常工作 - 例如，如果我尝试

```
os.path.isfile('C:\Python32\Lib\concurrent\futures\process.py')
os.path.exists('C:\Python32\Lib\concurrent\futures\process.py')
os.path.isdir('C:\Python32\Lib\concurrent\futures') 
```

我总是得到 False 而不是 True （它适用于某些子目录）。如果我取消注释 print(i) 它会打印所有内容，但它也会打印目录 - 我只想打印文件。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:38:10.920

您`printList[len(dirList):] = listFiles(i)`将在每个循环中覆盖值。

例如，如果您在其中的所有条目`dirList`都是目录，那么您最终会在`printList`遍历每个子目录时从中删除条目：

```
>>> printList = []
>>> len_dirlist = 2  # make up a size
>>> printList[len_dirlist:] = ['foo', 'bar', 'baz'] # subdir 1 read
>>> printList
['foo', 'bar', 'baz']
>>> printList[len_dirlist:] = ['spam', 'ham', 'eggs'] # subdir 2 read
>>> printList
['foo', 'bar', 'spam', 'ham', 'eggs']  # Wait, where did 'baz' go? 
```

`.extend()`在将项目添加到列表末尾时，您希望使用它。

请注意，在 Windows 上，您不必使用反斜杠作为路径分隔符，最好使用正斜杠，因为它们在 Python 字符串中没有特殊含义：

```
'C:/Python32/Lib/concurrent/futures/process.py' 
```

或者，使用`r''` *原始*字符串文字来消除反斜杠被解释为字符转义的机会：

```
r'C:\Python32\Lib\concurrent\futures\process.py' 
```

# machine-learning - 用于矢量数据（而不是二进制）的受限玻尔兹曼机的替代方案

> ID：12547074
> 
> 赞同：1
> 
> 时间：2012-09-22T19:35:03.887
> 
> 标签：machine-learning, artificial-intelligence, decision-tree, rbm

我有一个非常大的语料库，每个元素都包含大量高维数据。元素不断被添加到语料库中。潜在地，每次交互只需要考虑语料库的一部分。元素被标记，可能带有多个标签和与这些标签的强度相关的权重。据我了解，数据并不稀疏。

输入数据是一组介于 -1...1 范围内的参数，介于大约 (10-1000) 个输入之间。这可能有点灵活，具体取决于最合适的机器学习方法。

我的目标是高端智能手机设备。理想情况下，处理可以在同一设备上完成，但我愿意将其传输到适度的服务器。

对于这种情况，什么是合适的机器学习方法？

我一直在阅读有关随机福雷斯特决策树、受限博尔兹曼机、深度学习博尔兹曼机等的信息，但我真的可以使用经验丰富的人的建议来指导我采用一些可以很好地提供条件的研究方法。

如果我的描述看起来有问题，请让我知道，因为我仍在掌握这些想法，并且可能从根本上误解了某些方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:30:43.993

尝试使用最简单的 k 近邻算法。您可以使用曼哈顿距离函数来获得快速距离函数。然后，您可以根据最近的点进行加权平均或多数类。

这也类似于内核回归。我建议使用诸如 kd 树之类的数据结构来有效地存储您的点。

# c++ - 有什么方法可以匹配 C++11 中的返回值？

> ID：12547076
> 
> 赞同：5
> 
> 时间：2012-09-22T19:35:24.517
> 
> 标签：c++, templates, c++11

我正在尝试提供一个调用提供的 lambda 的函数，我想知道如果该函数具有 return type ，是否可以让它返回一个默认值`void`。

这是我到目前为止所拥有的，一个返回 lambda 的返回值的函数，但如果 lambda 是`void`，那么它返回 20。

```
#include <functional>
#include <iostream>

template <typename H>
auto f(H&& h) -> decltype(h(), void())
{
    return h();
}

template <typename H>
auto f(H&& h) -> decltype(h(), int())
{
    h();
    return 20;
}

int main()
{
    int r = f([](){ std::cout << "test1" << std::endl; return 10; }); // error here
    std::cout << "r: " << r << std::endl;
    r = f([](){ std::cout << "test2" << std::endl; });
    std::cout << "r: " << r << std::endl;

    return 0;
} 
```

这会产生错误，

```
test.cpp:20:68: error: call of overloaded ‘f(main()::<lambda()>)’ is ambiguous 
```

很明显，这只是由于 C++ 无法使用基于返回类型的多态性。但是，我想知道是否有任何好的 C++11 技巧，例如更好地使用`decltype`或一些模板魔术，这可能会使这成为可能？我之所以问，是因为据我所知，这里没有真正的歧义。编译器正在推断`void`返回类型，然后说是否匹配`int`or的`void`版本是模棱两可的`f`，这有点愚蠢。

这样做的一个原因是，如果函数`f`需要一个返回值，但用户提供了一个不包含`return`语句的 lambda，编译器会推断出一个`void`类型，然后会出错。因为在实际场景中，我很清楚当用户不想提供一个合理的默认返回值时，我想知道是否有可能让编译器允许用户忽略经常不必要的`return`语句方便。

谢谢。我应该提到我正在使用 GCC 4.6.3。

*答*：根据 Xeo 的 using 建议`enable_if`，我提出了以下建议，似乎可行：

```
template <typename H>
auto f(H&& h) -> typename std::enable_if<std::is_same<decltype(h()), void>::value, int>::type
{
    h();
    return 20;
}

template <typename H>
auto f(H&& h) -> typename std::enable_if<std::is_same<decltype(h()), int>::value, int>::type
{
    return h();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:45:57.680

您可以使用 std::enable_if。

您的返回类型将是`std::enable_if<!std::is_same<decltype(h()), void>::value, decltype(h())>:type`第一个和`std::enable_if<std::is_same<decltype(h()), void>::value, int>::type`第二个。这应该让你的代码工作。我还没有测试它，所以我不确定它是否完全有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:17:57.050

给我一个为什么编译器应该能够根据您在函数中执行的操作来推断为什么要选择哪个重载的原因？在 C++ 中，仅当每个参数都可与参数匹配时，才关注重载解析。函数的返回类型和内容与*what-so-ever*无关。

[正如 STL 所说](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-Cpp-3-of-n#c634790677481084163)：

> TLDR：模板是贪婪的！除非您完全确定会发生什么，否则不要超载它们。

而作为参数的通用引用 ( `template<class T> void f(T&&);`) 是你能得到的最贪婪的。

您可以像@JKor 用 SFINAE 说的那样解决它，但简化了：

```
#include <type_traits>

template<class F>
auto f(F f)
  -> decltype(true? f() : void())
{
  f();
}

template <class F>
auto f(F f) -> decltype(int(f()))
{
  f();
  return 42;
}

int main(){
  f([]{});
} 
```

请注意，GCC 4.7 有一个错误，`decltype(int(void_returning_function()))`不会导致函数 SFINAE 退出。Clang 3.1 正确地使

```
f([]{}); 
```

工作，以及

```
f([]{ return 42; }); 
```

# php - Instagram 如何使用 Amazon S3？

> ID：12547077
> 
> 赞同：5
> 
> 时间：2012-09-22T19:35:41.323
> 
> 标签：php, file-upload, amazon-s3, amazon-web-services, instagram

在将文件上传到 Amazon S3 时，我需要对 Instagram 的工程有所了解。我刚开始使用 S3，我认为 Instagram 是一个很好的模型，因为他们每天上传数千张图片。我的应用有点类似。用户上传图片，可以删除自己的图片，所有图片都是公开的。

在我的项目中，我正在创建具有文件夹前缀的对象来组织每个用户的上传。例如`username/filename`

我的对象 URL 如下所示：

```
https://s3.amazonaws.com/my_bucket/username/28c3d2c6ec098bd077d6b9cb5f13869d.jpg 
```

但Instagram：

```
http://distilleryimage7.s3.amazonaws.com/f4947c1004ca11e2a0c81231380ff428_7.jpg 
```

我猜这`distilleryimage7`是存储桶的名称。我不确定这种类型的 URL 有什么优势。我还猜测 Instagram 不使用存储桶“文件”并将所有图像存储在一个存储桶中。

请分享 S3 中的任何最佳实践。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:55:32.630

此 URL 实际上是 S3 默认支持的 URL。对于美国和大多数存储桶，您可以执行特殊的 DNS 解析，它允许您使用：

```
http://my_bucket.my_domain.com 
```

对您自己的记录进行一些更改或：

```
http://my_bucket.s3.amazonaws.com 
```

如果您不想更改任何 A 记录（小入门：[http](http://docs.amazonwebservices.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs) ://docs.amazonwebservices.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs ）。

这种类型的 url 的优点当然是对某些资产使用子域以加快浏览器加载速度的普遍想法。

当然，这是一个修复。Facebook、Twitter 和 Youtube 等其他网站使用的一种方法是使用完全不同的域来处理此类内容。这很有帮助，因为它是专门为这些资产设计的剥离域（这些域上也不应该存在 cookie）。

因此，这实际上并不是 S3 的*最佳*实践，而是更多一般的 Web 开发，涵盖了如何在生产环境中编程和布局站点的更广泛的观点。

是的，Instagram 会将所有文件存放在一个巨大的单个存储桶中，这很可能是最明智的做法，然后当您变大时，您将复制部分存储桶并根据需求将它们拆分到区域和子区域或 ping 它们像 Vimeo 一样到云端。

## 编辑

在进一步阅读之后，我也意识到 Instagram 并没有将所有东西都放在一个桶里。真的有点奇怪，特别是因为一个桶必须在整个 S3 中被唯一命名，包括其他人的账户。因此，除非尚未使用该存储桶名称，否则他们可能不会直接使用用户名。

不过，这样做有很大的好处。就像每个用户的复制和每个用户的云端一样，但也有缺点：

*   当显示许多用户图像时，会出现很多单独的 http 请求，这完全是 S3 域，但我不确定 SEO 和浏览器允许有多少子域来利用它（我认为 IE6 中有 6 个）。

*   备份和复制可能会更难，因为您需要为每个用户而不是单个存储桶执行操作。

*   将存储桶移动到 cdn 等可能会出现问题，因为您必须再次为每个用户执行此操作。

*   我想我记得在 S3 中看到了存储桶的最大限制，所以我不确定这将如何有效地扩展 tbh。

# c# - 一对五和泛型：“关联引用未映射的类”

> ID：12547084
> 
> 赞同：2
> 
> 时间：2012-09-22T19:36:56.067
> 
> 标签：c#, nhibernate, nhibernate-mapping

**TL;DR 版本：**下面的代码在构建 SessionFactory 时给了我一个“*关联引用未映射的类*”异常。应该在代码中更改什么来修复它？

* * *

尽管 Ayende @ Rahien 不建议在[2007 年的这篇文章](http://ayende.com/blog/2951/nhibernate-and-generic-entities)中使用泛型类的映射，但我仍然尝试了一下。我使用了他提到的方法。首先*是*工作的位：

```
<class name="Review`1[Person]" table="Review">
  <id name="Id" column="ReviewId"><generator class="native" /></id>
  <property name="Rating" />
  <many-to-one name="Subject" column="PersonId" class="Person" />
</class> 
```

对应的泛型类如下所示：

```
public class Review<T> : BaseEntity where T : IReviewable
{
    public virtual int Rating { get; set; }
    public virtual T Subject { get; set; }
} 
```

这是有效的，我可以加载这些`Review`实体并在我的 MVC 视图中显示它们没有问题。好的部分是`Subject`当我在控制器和视图中使用它时，我将拥有正确的类型。

* * *

但是，当尝试在我的 Person 类上映射一组 Review 项目时，事情开始崩溃。这是我目前正在使用的映射：

```
<class name="Person">
  <!-- abbreviated -->
  <bag name="Reviews" table="Review">
    <key column="PersonId"/>
    <one-to-many class="Review`1[Person]" />
    <!-- Also tried these:
    <one-to-many class="table="Review"> 
    ... plus a few variations with fully qualified names ...
    -->
  </bag>
</class> 
```

有了这个（缩写）类：

```
public class Person : BaseEntity, IReviewable
{
    /* Abbreviated */
    public virtual IList<Review<Person>> Reviews { get; set; }
} 
```

这在构建 SessionFactory 时以异常结束：

> **关联引用未映射的类**： ....在此处插入一对多.class ....

所以问题是：这里有什么问题？这甚至可能吗？我应该放弃映射通用实体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:43:08.763

代码映射为我生成了这个：

```
<class name="NHTest.Review`1[[NHTest.Person, NHTest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]" table="Review">
  ...
  <many-to-one name="Subject" column="..." />
</class>
<class name="Person">
  ...
  <bag name="Reviews">
    <key column="..." />
    <one-to-many class="NHTest.Review`1[[NHTest.Person, NHTest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]" />
  </bag>
</class> 
```

因此，请尝试使用完全限定的名称。

# java - 根据某些属性对 ArrayList 进行排序

> ID：12547085
> 
> 赞同：0
> 
> 时间：2012-09-22T19:37:03.073
> 
> 标签：java, jsp

我正在根据客户端提供的 HTML 在 UI 上显示数据，我在这里受到了打击。这就是我需要在 UI 上显示数据的方式

1.  风格
2.  色板颜色
3.  尺寸1
4.  大小2

我按以下顺序获取数据

1.  风格
2.  尺寸2
3.  色板颜色
4.  尺寸1

可能数据可以以其他顺序出现，但我需要以第一个块中显示的方式显示数据，我无法更改返回数据的方式，因为该 API 不在我的控制之下，所以我留下了一个选择来排序基于我的优先级列表的数据并将其发送到 UI，以便我可以显示它。

使用以下代码

```
Collections.sort(string,Collections.reverseOrder()); 
```

它按以下顺序对数据进行排序

1.  风格
2.  色板颜色
3.  尺寸2
4.  尺寸1

所以它按照它应该做的方式做，就像 size2 在 size1 之前一样。我不确定我应该写什么类型的比较器，或者我应该在我的自定义比较器中检查这个 size1 和 size2 字符串，并将其余数据保持原样被排序？或者有什么方法可以创建我的排序列表，以便我可以使用它对列表进行排序

**开斋节**

我更感兴趣以人类的方式对 size1 和 size2 进行排序的方式，比如 size1 应该稍后会出现 size2 。

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:50:53.060

只需创建自己的比较器并在那里设置自己的自定义规则。

java 不可能有所有比较字符串的可能规则，因为它们的数量是无限的。

# iphone - 从 iPhone 获取 kmls 到 pc

> ID：12547087
> 
> 赞同：0
> 
> 时间：2012-09-22T19:37:04.137
> 
> 标签：iphone

我编写了一个生成 kml 文件的应用程序，如何将它们从 iphone 上移到 pc 上？

我是一名安卓开发人员，所以当我将手机插入电脑时，它没有作为闪存驱动器加载，这让我有点震惊。

由于某种原因，我无法让它与 iTunes 同步？

这是我还是更广泛的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T20:44:30.310

我通过在应用程序 plist 中添加“应用程序与 iTunes 同步”值 YES 解决了这个问题。

这意味着当用户将手机插入计算机时，他们可以访问应用程序生成的所有文件

# facebook - 如何自定义 Facebook 的 sharer.php

> ID：12547088
> 
> 赞同：73
> 
> 时间：2012-09-22T19:37:37.287
> 
> 标签：facebook

[http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.google.com](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.google.com)

如何自定义文本和图像。看起来 Facebook 取消了文档。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-22T19:56:45.667

您所说的是 Facebook 在您共享链接时提取的预览图像和文本。Facebook 使用[开放图形协议](https://developers.facebook.com/docs/opengraph/tutorial/)来获取这些数据。

本质上，您所要做的就是将这些`og:meta`标签放在您要共享的 URL 上 -

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description"
      content="A group of U.S. Marines, under command of
               a renegade general, take over Alcatraz and
               threaten San Francisco Bay with biological
               weapons."/> 
```

如您所见，既有图像属性又有描述。当您更改页面`og:meta`标签时，您可以使用[Facebook 调试器](https://developers.facebook.com/tools/debug)测试这些更改。它会告诉您是否犯了任何错误（以及如何修复它们！）

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-10-09T11:25:57.610

更新：

## 这个答案已经过时了。

就像@jack-marchetti 在他的评论中所说的那样，以及带有链接的@devantoine：[https ://developers.facebook.com/x/bugs/357750474364812/](https://developers.facebook.com/x/bugs/357750474364812/)

Facebook 改变了 sharer.php 的工作方式，因为 Ibrahim Faour 回复了 Facebook 提交的错误。

> 共享者将不再接受自定义参数，Facebook 将从 url OG 元标记中提取在预览中显示的信息，就像它在 facebook 上显示为帖子一样。

* * *

试试这个（在这个例子中通过 Javascript）：

`'http://www.facebook.com/sharer.php?s=100&p[title]='+encodeURIComponent('this is a title') + '&p[summary]=' + encodeURIComponent('description here') + '&p[url]=' + encodeURIComponent('http://www.nufc.com') + '&p[images][0]=' + encodeURIComponent('http://www.somedomain.com/image.jpg')`

我在没有图像部分的情况下快速尝试了这个，sharer.php 窗口出现了预填充，所以它看起来像一个解决方案。

我通过这篇 SO 文章找到了这个：

[想要来自 Flash 应用程序的 Facebook 共享链接中的自定义标题/图像/描述](https://stackoverflow.com/questions/2400947/want-custom-title-image-description-in-facebook-share-link-from-a-flash-app)

这个链接包含在 Lelis718 的回答中：

[http://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/](http://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/)

所以这个答案归功于 Lelis718。

[编辑 2013 年 5 月 3 日] - 似乎我在这里的原始 URL 不再适用于我，而在查询字符串中也不包括“s = 100” - 不知道为什么但已相应更新

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-02-03T21:48:29.680

# 以下答案似乎不再有效，Facebook 不再接受 Feed Dialog 链接上的参数

您可以通过 URL 使用 Feed Dialog 来模拟 Sharer.php 的行为，但它有点复杂。您需要一个 Facebook 应用程序设置，其中包含您计划共享的 URL 的基本 URL 配置。然后您可以执行以下操作：

1）创建一个链接，如：

```
 http://www.facebook.com/dialog/feed?app_id=[FACEBOOK_APP_ID]' +
        '&link=[FULLY_QUALIFIED_LINK_TO_SHARE_CONTENT]' +
        '&picture=[LINK_TO_IMAGE]' +
        '&name=' + encodeURIComponent('[CONTENT_TITLE]') +
        '&caption=' + encodeURIComponent('[CONTENT_CAPTION]) +
        '&description=' + encodeURIComponent('[CONTENT_DESCRIPTION]') +
        '&redirect_uri=' + FBVars.baseURL + '[URL_TO_REDIRECT_TO_AFTER_SHARE]' +
        '&display=popup'; 
```

（显然将 [CONTENT] 替换为适当的内容。此处的文档：[https](https://developers.facebook.com/docs/reference/dialogs/feed) ://developers.facebook.com/docs/reference/dialogs/feed ）

2) 单击共享链接，使用 JavaScript 在弹出窗口中打开该链接

3）我喜欢创建文件（即popupclose.html）以在用户完成共享后将其重定向回，该文件将包含`<script>window.close();</script>`关闭弹出窗口

使用 Feed Dialog（除了设置）的唯一缺点是，如果您也管理 Pages，则无法选择通过 Page 共享，只有普通用户帐户可以共享。它会给你一些非常神秘的错误消息，其中大部分与你的 Facebook 应用程序的设置或你分享的内容或 URL 的问题有关。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-01-13T07:49:42.383

Sharer.php 不再允许您自定义。您共享的页面将被抓取以获取 OG 标签，并且该数据将被共享。

要正确自定义，请使用`FB.UI`JS-SDK 附带的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-24T20:44:18.800

Facebook sharer.php 用于分享帖子的参数。

```
<a href="javascript: void(0);"
   data-layout="button"
   onclick="window.open('https://www.facebook.com/sharer.php?u=MyPageUrl&summary=MySummary&title=MyTitle&description=MyDescription&picture=MyYmageUrl', 'ventanacompartir', 'toolbar=0, status=0, width=650, height=450');"> Share </a> 
```

不要使用空格，使用`&nbsp`.

# objective-c - 两个日期之间经过的天数

> ID：12547090
> 
> 赞同：0
> 
> 时间：2012-09-22T19:37:40.560
> 
> 标签：objective-c, nsdate, days, elapsed

我正在阅读一本关于 Objective-C 的书，我正在做一个练习，以向 NSDate 类添加一个名为 elapsedDays 的类别，该类别返回两个日期之间经过的天数。这是我的尝试：

```
-(unsigned long) elapsedDays: (NSDate *) theDate{

return ([self timeIntervalSinceDate:theDate]/3600)/24;

} 
```

这是我正在测试我的代码的程序的主要部分：

```
NSDate *now = [NSDate date];

NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow:-(3600*24)];

NSLog(@"%@",now);
NSLog(@"%@",yesterday);

NSLog(@"%lu",([now elapsedDays:yesterday])); 
```

问题是我的结果一直为零：

```
2012-09-22 19:28:24 +0000
2012-09-21 19:28:24 +0000
0 
```

我发现除法`[self timeIntervalSinceDate:theDate]/3600` 是给 23.99972222222222。这很奇怪，因为它应该给我们 24，因为两个日期之间的差异只有一天，即 24 小时。我想了解为什么这段代码在两个日期之间给了我错误的秒数。

我用四舍五入的除法结果纠正了这一点，但仍然想了解哪里出了问题。

```
return round ([self timeIntervalSinceDate:theDate] / 3600) / 24; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:49:01.723

`NSDate *now = [NSDate date];`

`NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow:-(3600*24)];`

以上两条语句将依次执行。因此，您在 24 小时内获得 1 秒的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:08:52.193

不要自己计算日期；让[NSCalendar](https://developer.apple.com/documentation/foundation/nscalendar)为您完成。请参阅`-components:fromDate:toDate:options:`其他有用的方法。

了解浮点运算的固有局限性也很有帮助。例如，请参阅[每个计算机科学家应该了解的关于浮点运算的知识](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:25:58.780

我认为 Yashavant 的回答可能是正确的。记录的字符串可能看起来相等，但基础日期对象可能会相差几毫秒。昨天尝试这样做，看看它是否解决了您的问题：

```
NSDate *yesterday = [NSDate dateWithTimeInterval:-86400 sinceDate:now]; 
```

# javascript - 使用 JavaScript 从包含在文本框中的数据更新内联 SVG

> ID：12547092
> 
> 赞同：1
> 
> 时间：2012-09-22T19:38:00.543
> 
> 标签：javascript, html, svg

在一个 HTML 页面中，我有三个块：两个文本框和一个内联 SVG，比如说，包含一个圆圈。然后我想在一个文本框中输入圆半径，在另一个文本框中输入圆位置（逗号分隔的 xy 坐标），然后自动（在具有有效输入的 keyup 事件上）重绘圆）。

当然，我的实际目标不是画一个圆圈，而是弄清楚我应该如何在 HTML 文件中组合 HTML + SVG + Javascript 以便事情开始发生，并且我可以建立在最低限度的工作基础上。

jQuery 也将受到欢迎，但不是必需的。

我在谷歌和这里（SO）上搜索了一下，但我找不到任何例子，但我相信这对于初学者来说相对简单。

作为底线，我实际上打算做的是在 SVG 元素内绘制一系列表示沿路线距离的水平线（在文本区域内以“名称；距离”给出，以及第二个文本区域的对角线代表自行车比赛的平均速度（横轴是骑行时间）。但这是我开始后的作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:34:07.087

我不建议使用逗号分隔的输入，您需要进行大量验证才能使其正确。因此，让我们将三个不同文本输入中的属性分开......

```
<div>
  <label for="center_x">Center X</label>
  <input type="text" data-attr="cx" id="center_x" value="200" class="attr_change" />
</div>

<div>
  <label for="center_y">Center Y</label>
  <input type="text" data-attr="cy" id="center_y" value="200" class="attr_change" />
</div>

<div>
  <label for="center_y">Radius</label>
  <input type="text" data-attr="r" id="radius" value="100" class="attr_change" />
</div>

<svg xmnls="http://www.w3.org/2000/svg">
    <circle fill="#c00" cx="200" cy="200" r="100" id="change_this" />
</svg> 
```

jQuery 代码很简单：

```
$('.attr_change').on('keyup', function(){
  var attr = $(this).attr("data-attr");
  var value = parseInt($(this).val(), 10);
  if ($.isNumeric(value)) {
    $("#change_this").attr(attr, value);
  }
})​ 
```

[http://jsfiddle.net/hzn6q/](http://jsfiddle.net/hzn6q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:52:48.783

这是一组 HTML SVG 映射工具和示例。美丽的分析图表是最近添加的... [http://www.irunmywebsite.com/raphael/rapdevex.php?q=Charting](http://www.irunmywebsite.com/raphael/rapdevex.php?q=Charting)

# python - 如何在python中找到编码相同氨基酸的密码子？

> ID：12547095
> 
> 赞同：0
> 
> 时间：2012-09-22T19:38:20.620
> 
> 标签：python, dictionary, bioinformatics

我有一个包含所有密码子和氨基酸的 txt 文件，如下所示：

```
CTT L
ATG M
ACA T
ACG T
ATC I
AAC N
ATA I
AGG R
CCT P
ACT T
AGC S
AAG K
AGA R
CAT H
AAT N
ATT I
CTG L
CTA L
CTC L
CAC H
AAA K
CCG P
AGT S
CCA P
CAA Q
CCC P
TAT Y
GGT G
TGT C
CGA R
CAG Q
TCT S
GAT D
CGG R
TTT F
TGC C
GGG G
TAG *
GGA G
TAA *
GGC G
TAC Y
TTC F
TCG S
TTA L
TTG L
TCC S
ACC T
TCA S
GCA A
GTA V
GCC A
GTC V
GCG A
GTG V
GAG E
GTT V
GCT A
TGA *
GAC D
CGT R
TGG W
GAA E
CGC R 
```

我如何检索这些信息并以这样的方式进行输出，以便为每个氨基酸显示其对应的密码子。喜欢：

```
F [TTT, TTC]
L [TTA, TTG, CTT, CTC, CTA, CTG] 
```

……

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:48:13.893

主要编辑：结果 DICT 的值必须是集合，而不是列表！

如果这是在名为 的字符串`codons`中，那么您可以：

```
result = {}

for c in codons.strip().split('\n'):
    codon, amino = c.split()
    result.setdefault(amino, set()).add(codon)

for r in result:
    print r, result[r] 
```

编辑：如果您已经在字典中有数据，只需跳过“解析”并直接使用`dict.iteritems()`，这是字典项目（键值对）的迭代器：

```
result = {}

for codon, amino in codonsdict.iteritems():
    result.setdefault(amino, set()).add(codon)

for r in result:
    print r, result[r] 
```

使用`setdefault(key, default)`很重要，因为您必须在第一次出现键时创建空键值默认对。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T01:00:20.370

我会给你你要找的字典。但在未来，让我们知道这是否是家庭作业。

```
codon_table = {
    'A': ('GCT', 'GCC', 'GCA', 'GCG'),
    'C': ('TGT', 'TGC'),
    'D': ('GAT', 'GAC'),
    'E': ('GAA', 'GAG'),
    'F': ('TTT', 'TTC'),
    'G': ('GGT', 'GGC', 'GGA', 'GGG'),
    'I': ('ATT', 'ATC', 'ATA'),
    'H': ('CAT', 'CAC'),
    'K': ('AAA', 'AAG'),
    'L': ('TTA', 'TTG', 'CTT', 'CTC', 'CTA', 'CTG'),
    'M': ('ATG',),
    'N': ('AAT', 'AAC'),
    'P': ('CCT', 'CCC', 'CCA', 'CCG'),
    'Q': ('CAA', 'CAG'),
    'R': ('CGT', 'CGC', 'CGA', 'CGG', 'AGA', 'AGG'),
    'S': ('TCT', 'TCC', 'TCA', 'TCG', 'AGT', 'AGC'),
    'T': ('ACT', 'ACC', 'ACA', 'ACG'),
    'V': ('GTT', 'GTC', 'GTA', 'GTG'),
    'W': ('TGG',),
    'Y': ('TAT', 'TAC'),
    '*': ('TAA', 'TAG', 'TGA'),
} 
```

# python - Django项目控制台管理+Eclipse中的编码

> ID：12547097
> 
> 赞同：0
> 
> 时间：2012-09-22T19:38:35.070
> 
> 标签：python, django, eclipse, pydev

我正在尝试以对我来说最舒适的方式在 Django 中建立我的第一个项目。

我真的很喜欢使用控制台来做这样的事情：

*   管理一些项目的设置（例如在运行之前）
*   版本控制
*   从模板创建项目

我知道我在 Django 中可以做这样的事情：

django-admin startproject、manage.py runserver 甚至更多

但是对于编码，我更喜欢使用 Eclipse 而不是控制台（ vim :P ）。

所以我想将已经创建的项目导入 Eclipse。

导入项目选项无法将我的项目文件夹识别为有效的导入文件夹（可能是因为它没有像 .eclipse_project 这样的文件）。

我可以这样做 New->Project-> 选择我的项目文件夹作为我要开始的内容。

这实际上可行，但令我烦恼的是，我什至无法向该项目添加一个 PyDev 模块，因为没有源文件夹，即使我有一个文件夹，其中包含名为 __init__.py 的模块。执行此操作后的项目结构如下：

```
mysite
   manage.py
   /mysite                  <- considered by PyDev not as source folder
        __init__.py
        urls.py
        settings.py
        wsgi.py 
```

我可以在项目的根文件夹中创建源文件夹，然后将 mysite/mysite 的内容移动到其中，但是：

*   我不会破坏 Django 项目的结构吗？
*   我不想每次创建 django 项目时都这样做？
*   是否可以选择将该 /mysite 文件夹的类型更改为源文件夹？

难道我做错了什么？

我还尝试了使用以下方法创建 Django 项目的选项：

新建-> Django 项目-> 我得到相同的结构，要么没有源文件夹

顺便提一句。推荐的 django 项目的结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:21:24.553

我使用 Eclipse 作为我的 Django 编码环境，您不需要源文件夹。只需使用 Django 提供的文件夹结构即可。**init** .py 向 python 显示该文件夹实际上是一个 python 模块。

该命令`django-admin.py startproject myproject`将默认创建一个新目录“myproject”（=让我们称之为项目工作区文件夹），其中包含一个 manage.py 和一个项目包文件夹（也称为“myproject”，包含一个 settings.py 和其他文件） .

您可以根据需要重命名项目工作区文件夹，它不会更改任何内容。不要重命名项目包（除非您知道自己在做什么），因为 settings.py 正在引用此文件夹，或者确切地说，正在引用此模块。

创建文件夹结构后，转到 Eclipse 并创建一个新项目，选择项目工作区文件夹，就可以了。

这是一个非常轻量级的设置，您不能以这种方式从 Eclipse 运行任何 django 命令。尽管如此，我还是建议使用终端/控制台来运行 Django 命令，因为它非常方便。

为了让 Eclipse 能够从一个文件跳转到另一个文件，在方法或类似方法上使用命令“cmd + mouseclick”，您必须将项目工作区文件夹包含`system PYTHONPATH`在 Eclipse 中。只需转到 E`clipse - Preferences - PyDev - Interpreter Python`并通过按钮添加您的文件夹`New Folder`。请看下面的截图：

![在此处输入图像描述](../Images/fe44764d15283e6e12bab19aee70f732.png)

我还可以推荐 Eclipse 的 Django[文本编辑器插件](http://eclipse.kacprzak.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:57:02.623

如果 Eclipse 中没有源文件夹（例如在导入现有项目之后），您可以右键单击您的项目，选择属性，选择 PyDev - PYTHONPATH，然后添加源文件夹。例如，在您的情况下，它将是 mysite 文件夹。

之后就可以使用 PyDev 选项（PyDev Module，PyDev Package）选项。

# c# - 将多个组框组合成一个可搜索的变量

> ID：12547100
> 
> 赞同：0
> 
> 时间：2012-09-22T19:39:24.490
> 
> 标签：c#

我正在用 C# 制作一个 Windows 窗体应用程序。

我的一个表单包含 5 个组框，每个组框内包含 6 个复选框。我需要计算所有选中的复选框。

目前我已将其编码如下：

`int NumOfRacks1 = groupBoxPace.Controls.OfType<CheckBox>() .Count(cb => cb.Checked);`

但是，我必须重复上述 5 次，然后将所有变量加在一起以获得答案。我确信有一种更聪明的方法可以减少代码。

我尝试将其中三个组合如下：

`var allRacks = groupBoxSamsung.Controls.OfType<CheckBox>().Concat(groupBoxPace.Controls.OfType<CheckBox>().Concat(groupBox780.Controls.OfType<CheckBox>()));`

但这并没有按预期工作。

有谁知道实现这一目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:50:59.970

> 我需要计算所有选中的复选框。

不工作，因为你不计数。试试这个。

```
var items = (groupBox1.Controls.OfType<CheckBox>()
    .Concat(groupBox2.Controls.OfType<CheckBox>()))
    .Where(ch => ch.Checked == true).Count(); 
```

你有你的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:59:18.967

我在 StackOverflow [**How to get all childControls of a type on a form**](https://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-winform-of-a-specific-type-button-textbox)上找到了一个问题，并将其扩展为**计算选中的元素**。

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = (from c in GetAll(this, typeof(CheckBox))
                    where (c as CheckBox).Checked
                    select c).Count().ToString();                    
}
// credits go to @PsychoCoder for this part
public IEnumerable<Control> GetAll(Control control, Type type)
{
    var controls = control.Controls.Cast<Control>();
    return controls.SelectMany(ctrl => GetAll(ctrl, type))
                                .Concat(controls)
                                .Where(c => c.GetType() == type);
} 
```

一般来说，我认为这个片段应该可以解决问题，您*不必连接所有 groupBoxes*！

**编辑**

适合**计算表单上所有选中的复选框**，无论复选框是否为子控件。

```
Type type = typeof(CheckBox);
var controls = this.Controls.Cast<Control>();
label1.Text = controls.SelectMany(ctrl => GetAll(ctrl))
                            .Concat(controls)
                            .Where(c => c.GetType() == type && (c as CheckBox).Checked)
                            .Count().ToString(); 
```

# c# - 如何修复：在闭包 resharper 警告中访问 foreach 变量？

> ID：12547104
> 
> 赞同：26
> 
> 时间：2012-09-22T19:40:08.033
> 
> 标签：c#, resharper

我收到了这个 ReSharper 警告：**Access to foreach variable in closure。使用不同版本的编译器编译时可能会有不同的行为**。

这就是我正在做的事情：

```
@foreach(var item in Model)
{
    // Warning underlines "item".
    <div>@Html.DisplayBooleanFor(modelItem => item.BooleanField)</div>
} 
```

我的扩展如下：

```
public static MvcHtmlString DisplayBooleanFor<TModel, TValue>(
    this HtmlHelper<TModel> helper, 
    Expression<Func<TModel, TValue>> expression)
{
    bool value;

    try
    {
        var compiled = expression.Compile()(helper.ViewData.Model);
        value = Convert.ToBoolean(compiled);
    }
    catch (Exception)
    {
        value = false;
    }

    return MvcHtmlString.Create(value ? "Yes" : "No");
} 
```

请注意，这按预期工作，但我怎样才能避免这个警告？
我将不胜感激提供的任何帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-22T19:45:55.337

块范围的变量应该解决警告。

```
@foreach(var item in Model)
{
    var myItem = item;
    <div>@Html.DisplayBooleanFor(modelItem => myItem.BooleanField)</div>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T16:00:07.383

另一种选择是将`JetBrains.Annotations.InstantHandleAttribute`属性应用于`DisplayBooleanFor`方法。

# c# - 如何有效地将公共初始值分配给 C# 中的大型数组？

> ID：12547105
> 
> 赞同：2
> 
> 时间：2012-09-22T19:40:09.460
> 
> 标签：c#, arrays, multidimensional-array, initialization

如何有效地将公共初始值分配给大型数组？例如，如果我有一个 100 x 100 x 100 整数数组，其中所有初始值都应该为零。

在matlab中我会简单地写：

```
array = zeros(100,100,100); 
```

如果没有 C# 中的循环，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:35:44.497

只是为了争论（我个人认为这不是一种好的编程风格），但它可以在 C# 中一行完成，技术上没有循环但使用 LINQ

```
int[,,] cube = new int[A, B, C];
Enumerable.Range(0, A*B*C).Select(i => cube[i/(B*C), i%(B*C)/C, i%C] = 1).Count(); 
```

这里的 Count() 只需要使序列被枚举，它的结果被忽略。这是为了实现 MATLAB 的 one() 函数。要实现 zeros()，可以使用以下命令：

```
Array.Clear(cube, 0, A*B*C); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:46:02.597

```
public void SetAllValues(int[,,] data, int value) {
    for (int x = 0; x < data.GetLength(0); x++) {
        for (int y = 0; y < data.GetLength(1); y++) {
            for (int z = 0; z < data.GetLength(2); z++) {
                data[x, y, z] = value;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T19:55:56.747

您可以`Enumerable.Repeat`像这样使用它：

```
int[] zeros1Dim = Enumerable.Repeat(0, 100).ToArray();
int[][] zeros2Dim = Enumerable.Repeat(zeros1Dim, 100).ToArray();
int[][][] array = Enumerable.Repeat(zeros2Dim, 100).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T01:24:48.643

我不知道在 C# 中初始化数组的惯用、非循环方式，根据这里的答案，其他人似乎也不知道。不安全的内存复制可能需要更少的代码行，尽管它确实混淆了您正在做的事情的含义：它强调机制（将此值移动到此内存地址）而不是语义（使整个多维数组等于相同的值。）

鉴于此，我的建议是咬紧牙关，使用一个循环，然后*用一个命名愉快的方法将其抽象出来*：

```
public static T[,,] FillArrayWithValue<T>(this T[,,] array, T value)
{
    // Loops go here
} 
```

将其粘贴在某个静态实用程序类中，然后您的调用站点变为：

```
int[,,] myArray = new int[4, 5, 6];
myArray.FillArrayWithValue(value); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-22T20:47:03.570

在 C 编程领域，通常使用诸如[memcpy](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)或[CopyMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366535%28v=vs.85%29.aspx)之类的 OS 函数来有效地将内存从一个地方移动到另一个地方。这比使用循环要好得多，因为操作系统将使用专用硬件 ( [DMA](http://en.wikipedia.org/wiki/Direct_memory_access) ) 来执行操作。

我不确定这是否对您的简单案例有用，但如果您愿意，可以从某些 DLL 导入这些函数。

```
[DllImport("kernel32.dll")]
static extern void CopyMemory(IntPtr destination, IntPtr source, uint length);

static void Main(string[] args)
{
    byte[] a = new byte[10]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    byte[] b = new byte[10];

    IntPtr pa = Marshal.UnsafeAddrOfPinnedArrayElement(a, 0);
    IntPtr pb = Marshal.UnsafeAddrOfPinnedArrayElement(b, 0);

    CopyMemory(pb, pa, 10);
} 
```

[CopyMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366535%28v=vs.85%29.aspx)函数仅适用于连续的内存块，因此请注意如何调用它。

**重要编辑：**

如果您查看下面的注释，您会注意到上面显示的这段代码远非“可用”，因为它可能会在您不知道的情况下破坏您的应用程序内存。更好的方法是使用[Buffer.BlockCopy 方法](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)，正如codesparkle 所建议的那样，它可能在内部做同样的事情，但以安全的方式：

```
byte[] a = new byte[10]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
byte[] b = new byte[10];
Buffer.BlockCopy(a, 0, b, 0, 10); 
```

# objective-c - Objective-C int 转换为 UTF-8

> ID：12547107
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:40:18.577
> 
> 标签：objective-c, ios, ios5, utf-8

我想将此 int num: 转换`53392`为 cyrillic letter `A`。我用这个：`NSString *string = [NSString stringWithFormat:@"%c", 53392];`但这现在可以正常工作并返回给我奇怪的符号。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:56:33.967

首先，使用`%C`格式（大写字母C）。其次，西里尔字母 A 的代码是 0x0410，而不是您的号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:46:35.680

创建包含 unicode 字符的 NSString 的正确方法是使用 stringWithUTF8String 和 \u#### 转义序列，如下所示：

```
NSString *aString = [NSString stringWithUTF8String:"To be continued\u2026"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:22:33.943

您拥有的整数 53392 是将两个字节 0xD0 和 0x90 打包成一个整数，它们是 Unicode 0x410（十进制 1040）西里尔大写字母 A 的 UTF-8 编码。

有多种方法可以进行转换，这里有两种。

如果您知道 UTF-8 序列（如果需要，您可以从整数中提取），您可以`NSString`使用如下序列将其转换为：

```
char buf[2];
buf[0] = 0xD0;
buf[1] = 0x90;
NSString *cyrillicA = [[NSString alloc] initWithBytes:buf length:2 encoding:NSUTF8StringEncoding]; 
```

如果您知道 UTF-16 值，则可以使用 %C 格式：

```
NSString *cyrillicA = [NSString stringWithFormat:@"%C", 0x410]; 
```

# regex - htaccess 使用 RewriteCond 和 RewriteRule 重定向 - 使用正则表达式的复杂 url

> ID：12547111
> 
> 赞同：0
> 
> 时间：2012-09-22T19:40:48.717
> 
> 标签：regex, .htaccess, mod-rewrite, redirect, rewrite

我需要使用 htaccess 创建一个 301 重定向。

例子 ：

取这个网址（旧）：domain/page.html?pid=21&cid=730:pagetitle

重定向到（新）： http: [//www.domain.co.uk/page/section/pagetitle](http://www.domain.co.uk/page/section/pagetitle)

我试过这个，但不工作:(

```
##([0-9]+)?
RewriteCond %{QUERY_STRING} pid=21&cid=[0-9]{1,5}:(.*)
RewriteRule ^/page.html http://www.domain.co.uk/page/section/%1? [NC,R=301] 
```

pagetitle 和 cid 是动态的，并且会随着时间的推移而改变。

理想情况下，我想采用旧 url 并将所有内容从 pagetitle (domain/page.html?pid=2&cid=730:pagetitle) 中剥离出来，然后将其用作我的重定向 url 的查询字符串....

谢谢

更新：

更多示例：

从：

[http://www.domain.co.uk/page.html?pid=1&cid=25:helloworld](http://www.domain.co.uk/page.html?pid=1&cid=25:helloworld)

[http://www.domain.co.uk/page.html?pid=1&cid=34:hellonew-world](http://www.domain.co.uk/page.html?pid=1&cid=34:hellonew-world)

[http://www.domain.co.uk/page.html?pid=1&cid=21:1pagetitle](http://www.domain.co.uk/page.html?pid=1&cid=21:1pagetitle)

至：

[http://www.domain.co.uk/page/section/helloworld](http://www.domain.co.uk/page/section/helloworld)

[http://www.domain.co.uk/page/section/hellonew-world](http://www.domain.co.uk/page/section/hellonew-world)

[http://www.domain.co.uk/page/section/1pagetitle](http://www.domain.co.uk/page/section/1pagetitle)

注意：section = pid 1

使用 Omega 或我的重写规则的结果目前给出了 404 页。

我只需要查询字符串的最后一部分 - cid（页面标题），pid 不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:41:33.960

保留查询字符串参数，而不是`[NC,R=301]`使用`[NC,R=301,QSA]`

```
RewriteCond %{QUERY_STRING} cid=[0-9]{1,5}:(.*)
RewriteRule ^/?page\.html$ http://www.domain.co.uk/page/section/%1 [NC,R=301,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T14:09:11.320

我认为使用 {1,5} 可能是您的版本中的问题。该语法可能不可用。

但是这个版本应该可以正常工作：

```
RewriteCond  %{QUERY_STRING}  ^pid=21&cid=[0-9]+:(.*)$
RewriteRule  ^page\.html      http://www.domain.co.uk/page/section/%1 [NC,R=301,L] 
```

# php - curl - 从链接发布请求发送文件

> ID：12547112
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:40:53.747
> 
> 标签：php, curl

是否可以在 curl 发布请求中发送文件链接而不是内容？

```
$file_to_upload = array('file_contents'=>'@'.$file_name_with_full_path);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $file_to_upload);
$result=curl_exec ($ch);
curl_close ($ch);
echo $result; 
```

我可以放一个链接而不是 $file_name_with_full_path 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:14:01.527

您可以为此使用临时文件。示例： http: [//php.net/manual/en/function.tmpfile.php#69419](http://php.net/manual/en/function.tmpfile.php#69419)

# php - 脚本运行了多长时间？

> ID：12547113
> 
> 赞同：0
> 
> 时间：2012-09-22T19:40:57.210
> 
> 标签：php

如何检查我的`exec()`脚本运行了多长时间？输出将是这样的：

`1 Day(s) 2 hours 23 minutes 12 seconds`

我不希望它像这样输出超过 60 秒

`1 Day(s) 2 hours 23 minutes 118 seconds`

我的代码：

```
$start = time();
$s = time() - $start;
$m = floor($s / 60);
$h = floor($m / 60);
$msg = "script running for approx: Seconds - $s | Minutes - $m | Hours - $h";
echo $msg; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:46:40.673

将秒部分除以 60`/`将得到确切的分钟数，然后将秒数部分除以`%`您将得到剩余的秒数，小于 60。

**编辑**

即使您的分钟数也可能有问题。也改变它

```
$start = time();
$s = time() - $start;
$m = floor($s / 60);
$h = floor($m / 60);

$mins = ($m %  60);
$seconds =  ($s % 60);

$msg = "script running for approx: Seconds - $seconds  | Minutes - $mins | Hours - $h";
echo $msg; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T22:35:31.347

如果使用 PHP 5.4，这将给出在 PHP 中花费的确切时间

```
$runtime = round(microtime(TRUE) - $_SERVER['REQUEST_TIME_FLOAT'], 6);
echo "Script running for $runtime seconds"; 
```

# php - 获取字符串的特定子集

> ID：12547114
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:41:14.870
> 
> 标签：php

我收到以下回复：

> 矽。USC01019181 j2log-aGoWZbUSKJWNYALQQEXG-detail 这是我的回应。矽。RVC000827503 硅。

怎么可能得到“Si”。部分响应并忽略其余/重复，请记住响应句可以是“Si.”以外的其他内容。我的正则表达式很差，所以我不知道如何从这个开始。请注意，上面的回复是按原样发布的，带有换行符（没有）等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:04:11.473

你可以试试

```
$text = array();
$text[] = 'Si. USC01019181 j2log-aGoWZbUSKJWNYALQQEXG-detail This is my response. ';
$text[] = "Cotton eye joe. USC01019181 j2log-vBaIUwYSOJRZTAPCQISG-detail";

foreach ( $text as $msg ) {
    echo strstr($msg, '.', true) , "\n";
} 
```

输出

```
Si
Cotton eye joe 
```

# mongodb - Symfony 和 DoctrineMongoDB：动态连接

> ID：12547115
> 
> 赞同：1
> 
> 时间：2012-09-22T19:41:23.623
> 
> 标签：mongodb, symfony, symfony-2.1

我一直在寻找我的问题几天...

背景：我使用 Symfony，我有客户，每个客户都有自己的数据库。我有一个主数据库，其中包含所有客户的所有登录信息，在登录过程之后，将用户路由到他自己的数据......

该项目使用 MongoDB 存储数据。我能够连接到 mongodb，存储和检索数据......

所以这是我的问题：如何使用 symfony 和 MongoDB 动态设置与客户端数据库的连接？因为当然，在用户登录之前我不会知道要连接的数据库......

# c++ - 在 C++ 中，我们如何在不使用友元函数的情况下通过对象调用私有函数？

> ID：12547118
> 
> 赞同：5
> 
> 时间：2012-09-22T19:41:47.903
> 
> 标签：c++, oop, polymorphism, dynamic-binding

我遇到了用 C++ 编写的这段代码：

```
#include<iostream>
using namespace std;

class Base {
public:
    virtual int fun(int i) { cout << "Base::fun(int i) called"; }
};

class Derived: public Base {
private:
    int fun(int x)   { cout << "Derived::fun(int x) called"; }
};

int main()
{
    Base *ptr = new Derived;
    ptr->fun(10);
    return 0;
} 
```

**输出：**

```
 Derived::fun(int x) called 
```

在以下情况下：

```
#include<iostream>
using namespace std;

class Base {
public:
    virtual int fun(int i) { }
};

class Derived: public Base {
private:
    int fun(int x)   {  }
};
int main()
{
    Derived d;
    d.fun(1);
    return 0;
} 
```

**输出**：

`Compiler Error.`

谁能解释为什么会这样？在第一种情况下，通过对象调用私有函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:46:00.517

因为在第一种情况下，您使用的`Base`是 public 的声明，并且调用是后期绑定到`Derived`实现的。请注意，在继承中更改访问说明符是危险的，几乎总是可以避免的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T19:47:16.180

多态性发生在第一种情况下。它会导致动态或后期绑定。正如第二个答案中提到的，它有时会变得非常危险。

您不能直接从类定义外部访问类的私有接口。如果您想在第二个实例中访问私有函数而不使用友元函数，正如您的问题标题所暗示的那样，请在您的类中创建另一个公共函数。使用该函数调用此私有函数。像这样。

```
 int call_fun (int i) ; 
```

`fun()`从里面调用。

```
int call_fun (int i)
{
  return fun (i) ;  //something of this sort, not too good
} 
```

像这样仅用于调用另一个函数的函数称为`wrapper functions`.

制作`friends`也不总是可取的。这违反了信息隐藏的原则。

# ruby-on-rails - 什么是渲染数据组的rails方式

> ID：12547119
> 
> 赞同：0
> 
> 时间：2012-09-22T19:42:05.667
> 
> 标签：ruby-on-rails, activerecord

我的模型可以描述如下：

`One Forum has many Threads. One Thread has many Comments.`

数据没有非规范化；ie Threads 的 FK 只通向 Forum，Comments 的 FK 只通向 Thread。

选择特定线程然后在按它们所属线程分组的模板中呈现评论的“Rails 方式”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:52:32.097

在此处阅读[Active Record 关联](http://guides.rubyonrails.org/association_basics.html)。

为您的论坛<>主题和主题<>评论定义`has_many`和关系`belongs_to`

那么使用 rails 接口查询对您来说将非常容易。参考[这里](http://guides.rubyonrails.org/active_record_querying.html)

选择特定线程的commnets（按它分组）

```
Comment.where('thread_id in ?',[specific_thread_ids_to_search]).order('thread_ids') 
```

# drop-down-menu - 根据选择的下拉选项提交按钮链接，在新选项卡中打开

> ID：12547120
> 
> 赞同：0
> 
> 时间：2012-09-22T19:42:08.223
> 
> 标签：drop-down-menu, hyperlink, submit

我正在使用我在这里找到的脚本解决方案，@clops (clops) 根据下拉列表中选择的项目设置表单中提交按钮的 onclick 值。脚本中的所有内容都可以正常工作，但是我想在单击按钮时在新选项卡中打开新窗口。在选择列表中的一个选项之前，禁用提交按钮也会很好。任何反馈都会有所帮助。谢谢。当前脚本和 HTML 如下：

```
 <script>
                function goToNewPage() {
                    if(document.getElementById('target').value){
                        window.location.href = document.getElementById('target').value;
                    }
                }
                </script>
                <form name="dropdown">
                    <select name="selected" id="target" accesskey="E">
                    <option selected>Select...</option>
                    <option value="http://www.google.com/">Google</option>
                    <option value="http://www.search.com/">Search.com</option>
                    <option value="http://www.dogpile.com/">Dogpile</option>
                    </select>
                    <input type="button" value="Go" onclick="goToNewPage(document.dropdown.selected)">
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:43:50.770

作者无法选择在新选项卡而不是新窗口中打开。您可以在新窗口中打开它，如下所示

```
window.open(url,'_blank'); 
```

URL 是您的目标表单的下拉列表

要禁用提交按钮，直到选择列表中的一个选项，请检查此[链接](https://stackoverflow.com/questions/4597093/enable-disable-input-based-on-selection-jquery)

# jquery - 将表单从一个 div 移动到另一个

> ID：12547123
> 
> 赞同：2
> 
> 时间：2012-09-22T19:42:32.767
> 
> 标签：jquery

我正在尝试使用 jQuery 将表单从一个 div 移动到另一个 onclick。看起来很简单，但似乎不起作用......这就是我所拥有的。

```
$(".btn").click(function() {
    $("#div2").append("#frm");
$("#div1").remove();
});

<div id="div1">
    <form id="frm"><input class="web" type="text"><span class="btn">go</form>
</div>

<div id="div2">
    content
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T19:46:10.380

`$("#div2").append("#frm")`**将字符串** 附加`"#frm"`到`div2`，**而不是**其为 的表单元素`id`本身`frm`。`$("#frm")`改为追加以添加表单元素：

```
$("#div2").append($("#frm")); 
```

**[演示](http://jsfiddle.net/XJBqU/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:47:35.290

基本上你需要把 div 的 1 的 html 内容移动到 div 的 2。

表单是 div 的 1 的 html 内容，所以在我的示例中，您可以看到当用户单击按钮时，我将 div 的 1 contnet（表单）附加到 div 的 2

编码

```
$(document).ready(function() {

$(".btn").click(function() {
    $("#div2").append($("#div1").html());
$("#div1").remove();
}); 
```

});

[演示](http://jsfiddle.net/rjJbp/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T19:52:12.683

jQuery[`.append()`](http://api.jquery.com/append/)方法不将选择器字符串作为其参数之一，因此现在您没有正确定位表单；一种选择是使用[`.appendTo()`](http://api.jquery.com/appendTo/)which接受选择器字符串，或者您可以简单地用第二个 jQuery 对象包装字符串*。*

```
$(".btn").click(function() {
    $("#frm").appendTo("#div2");
    $("#div1").remove();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T19:48:19.487

试试这个

```
$(".btn").click(function() {
  $("#div2").append($('#frm').html());
  $("#div1").remove();
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T19:51:45.400

[`.append()`](http://api.jquery.com/append/)不接受选择器，因此您的选择器被解释为内容，创建一个 jQuery 对象选择`#frm`并将其传递给`.append()`

```
$("#div2").append($("#frm")); 
```

您的跨度也缺少结束标签

[演示](http://jsfiddle.net/A3DEX/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-21T12:10:12.347

div 1中form的jquery命令没有传给div 2的form，为什么？新表格未按原件提交。

```
$(document).ready(function() {
   $(".btn").click(function() {
     $("#div2").append($("#div1").html());
     $("#div1").remove();
   });
}); 
```

伙计们，我得到了这个：

```
$(document).ready(function() {
   $(".btn").click(function() {
    var master = $('#div1 > ').append();
    ('#div2').html(master);
     $("#div1").remove();
   });
}); 
```

# python - 在python中的两个QListWidgets之间切换项目

> ID：12547124
> 
> 赞同：1
> 
> 时间：2012-09-22T19:42:36.070
> 
> 标签：python, qt4, pyqt

我目前正在用 Python 设计一个 QT-gui，我希望允许用户在两​​个 QListWidgets 之间切换 QListWidgetItems。允许多选 (CTRL)，并通过两个控制按钮进行切换。

在 QT4-Designer 中，列表看起来像[这样](http://uploadpic.net/2EI2.png)

因此，如果用户从左侧列表中选择例如两个项目并单击“>”按钮，则必须将项目添加到右侧列表中，然后从左侧列表中删除。

我当前触发的按钮事件如下所示：

```
def switchR( self ):
    itemlistSel = self.list_left.selectedItems()
    for item in itemlistSel:
        self.list_right.addItem( item )
        self.list_left.removeItemWidget( item ) 
```

但是什么都没有发生？有人有快速解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:34:30.513

该`removeItemWidget()`方法并不完全符合您的预期（请参阅[文档](http://www.pyside.org/docs/pyside/PySide/QtGui/QListWidget.html#PySide.QtGui.PySide.QtGui.QListWidget.removeItemWidget)）。使用`takeItem()`,`addItem()`代替`row()`：

```
def switch(self):
    items = self.left.selectedItems()
    for item in items:
        n = self.left.row(item)    # get the index/row of the item
        i = self.left.takeItem(n)  # pop
        self.right.addItem(i)      # add to right QListWidget 
```

# java - 注释绑定时间（Java 中何时绑定注释）

> ID：12547125
> 
> 赞同：1
> 
> 时间：2012-09-22T19:42:43.067
> 
> 标签：java, annotations, jvm, java-compiler-api

我正在编写代码，其中数据库我的表名必须根据我是在我的开发环境还是生产环境中进行更改。由于我使用的是 Dynomo DB 的高级 API，因此表名被定义为注释。因此，例如以下代码是否可行，以及控制其行为的规则是什么：

```
static String postfix = "_test"; // (could be set to say _prod, _dev, etc.)

@DynamoDBTable(tableName="sometable" + postfix)
class MyTable {
  ...
  ... 
```

这导致的一系列问题是：

1.  Java Bound 中的注解是什么时候绑定的？编译时间还是运行时间？
2.  可以在执行中途更改绑定吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:31:40.810

Java 中的注解必须具有在编译时可解析的值。注释中不能有任何运行时信息，因为它是类定义本身的一部分。如果需要运行时信息，则必须由在运行时查找注释的任何人解决。

至于留存，有3种留存形式：

1.  Source - 编译器使用注解（通常用于提示和/或源代码生成）。示例包括@Override 和@SuppressWarnings，并在所有注释处理器都有机会看到它们后被丢弃。.class 文件中没有记录任何内容。

2.  类 - 注释保存为 .class 文件本身的一部分，可用于可以解析类字节 [] 数据（javassist 等）的工具，但不是加载的实际 java 类对象的一部分.

3.  运行时 - 注释从编译时一直到运行时都可用，作为 java 类对象的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:46:39.410

这取决于注释的定义方式。“保留”定义它是编译时还是运行时。

使用java反射你可能会这样 setAccessible(true); 并在运行时设置注释

# php - 告诉lessphp编译css和更少的文件而不是更少？

> ID：12547126
> 
> 赞同：1
> 
> 时间：2012-09-22T19:42:46.010
> 
> 标签：php, less

Leafos 很棒的 php 类 [http://leafo.net/lessphp/](http://leafo.net/lessphp/) 帮助我们将所有 less 文件编译成 1 个 css 文件并在我们的 web/模板头中调用它。

现在这是一个很棒的工具，但我遇到的一个问题是；我以前所有的 joomla 工作都使用了以下 css 文件夹文件结构

```
-css
--style.css
--post.css
--comments.css
--color.css 
```

比在模板头中我只调用 style.css 并且在我使用的那个文件中

```
@import url("post.css"); 
@import url("comments.css"); 
@import url("color.css"); 
```

现在 Joomla 3.1 在核心中包含了 leafos 类和 bootsrap，它们将在模板文件夹中放置一个默认的 less 文件夹，您应该在其中放置所有要编译的 less 文件。

为了让我将模板转换为使用 less 和引导程序，我必须将所有这些 css 文件扩展名转换为 less 并将它们移动到 less 文件夹，我试图保留的是与 pre joomla 3.0 模板的向后兼容性并制作双文件有点没有意义。

有没有什么方法可以让lessphp从css文件夹编译已经存在的.css文件而不是我制作双文件结构？

就像是

```
$less->checkedCompile("css/style.css", "css/style.css"); 
```

反而

```
$less->checkedCompile("less/style.less", "css/style.css"); 
```

我试过了

将 style.less 放在 less 文件夹中并放在最上面做

```
@import "../../../media/jui/less/hero-unit.less";
.. all other boostrap depending less files.. 

@import url("../css/post.css"); 
```

但生成的文件正在编译所有引导文件，只包括 post.css @import 而不是编译它

希望我没有让你感到困惑。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T05:05:33.580

如果您使用的是 lessc 0.4.0 版，请尝试评论以下行

// 如果以 css 结尾，则不导入

if (substr_compare($url, '.css', -4, 4) === 0) 返回 false；

# python - Python Exchange ActiveSync 库

> ID：12547131
> 
> 赞同：6
> 
> 时间：2012-09-22T19:43:07.193
> 
> 标签：python, linux, exchange-server, hotmail, activesync

有人熟悉 Python 的 Exchange ActiveSync 库或开源客户端吗？我已经进行了初步搜索，但几乎没有成功。我看过一些 C# 的例子，但我想在我尝试移植任何东西之前我会在这里问一下。

以防你好奇。这将是现有的基于 linux 的 IMAP/POP3 客户端的扩展。在游戏后期迁移到 Windows / C# 并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-01T14:55:00.033

在 Debian 9 上：

```
apt-get install mercurial python-twisted
hg clone https://bitbucket.org/drspringfield/py-eas-client
cd py-eas-client
python setup.py install
python imap_to_eas_proxy.py --domain example.org --server mail.example.org --device_id myID.example.net 
```

然后通过不安全的 IMAP 连接到`localhost:3143`并正常登录。（对于我试图连接的 Exchange 服务器，这只是 throw `Activesync error Connection lost`，但它可能在其他 Exchange 服务器上和/或当 py-eas-client 得到改进时工作。）

# objective-c - 无法将字符串复制到粘贴板

> ID：12547134
> 
> 赞同：0
> 
> 时间：2012-09-22T19:43:25.647
> 
> 标签：objective-c, macos, cocoa

我有一个名为 text 的字符串，在主菜单 xib 文件中，我将复制菜单项与通过观察者调用的操作链接起来。我用断点验证了这个方法实际上被调用了，但问题是字符串不是真的复制到粘贴板：

```
- (void) copy: (NSNotification*) notification
{
    if([[self window]isKeyWindow])
    {
        // It always enters in this block
        NSPasteboard* pb=[NSPasteboard generalPasteboard];
        NSPasteboardItem* item=[[NSPasteboardItem alloc]init];
        [pb clearContents];
        [item setData: [NSKeyedArchiver archivedDataWithRootObject: text] forType: NSPasteboardTypeString];
        [pb writeObjects: [NSArray arrayWithObject: item]];
    }
} 
```

进入块后，它会清除粘贴板的所有内容。但如果我尝试将复制的内容粘贴到文本编辑中，它不会粘贴任何内容（空字符串），但字符串的长度不为零。
我还尝试检查 writeObjects 的返回值，它返回 YES。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:23:05.950

您可以简单地使用：

```
[pb setString:text forType:NSPasteboardTypeString]; 
```

或者，您可能想使用`setString:forType`on `NSPasteboardItem`。

# ruby-on-rails - 嵌套表单：如何获得“this”？

> ID：12547136
> 
> 赞同：0
> 
> 时间：2012-09-22T19:43:55.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

我使用嵌套形式，并希望在其中获得某种“this”：

视图如下所示：

```
 <div class="field">
        <%= f.label :user_id %><br />
        <%= f.number_field :user_id %>
      </div>
      <% f.fields_for :assignments do |builder| %>
        <%= builder.label :count %>
        <%= builder.text_field :count %>
        <%= @a.fetch(this.id) %>
      <% end %> 
```

@a 是一个带有作业标题的数组。那么我怎样才能访问当前的作业呢？还是此代码仅显示一个作业的表单？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:52:09.393

通过`#object`应用于您的构建器：

```
builder.object.id 
```

# ssh - 如何在这些终端命令上使用石英而不是 x11？

> ID：12547137
> 
> 赞同：1
> 
> 时间：2012-09-22T19:43:57.787
> 
> 标签：ssh, terminal, x11, quartz-graphics

我正在尝试使用 x11 连接到远程 Linux 服务器。升级的时候发现Mountain Lion不再支持x11，所以安装了Quartz。但是，我的终端命令不再起作用。这里有两个不再适合我的重要终端命令。

我进行了 Google 搜索并在 Stack Overflow 上查看了其他地方，但没有找到我要查找的内容。也就是说，我希望有一些新的命令可以与 Quartz 一起使用，来代替我一直在使用的标准 x11 短语。在我的机器上安装 Quartz 后，我尝试了这些，但没有成功。当 10.8 刚刚发布时，我刚刚在 10.7 上自学了这些 x11 命令。这里有一些例子。

1.

```
ssh -X username@serverlocation.com 
```

2.

```
./configure -- this/is/an/example/directory --enable--gdb --with-x -with-x11 --with-term --with-nogui 
```

如果有人能告诉我如何在 Mountain Lion 上使用 Quartz，我将不胜感激。否则，我将不得不在装有 Windows 和 putty 的 Mac 上运行 VM，或者尝试弄清楚如何在我的 Ubuntu 机器上使用 x11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:50:26.830

安装 XQuartz 后您是否已登出/登入？XQuartz 只是 X11 的一个发行版，并且与之前包含在 OS X 中的内容完全兼容。

# java - 当图片较大时，内部带有 JPanel 的 JScrollPane 不显示滚动条

> ID：12547140
> 
> 赞同：2
> 
> 时间：2012-09-22T19:44:27.967
> 
> 标签：java, swing, jpanel, jscrollpane, absolutelayout

我正在制作一个实用程序来为我的游戏在地图中定义立足点，并且我正在 JScrollPane 内的 JPanel 内显示地图的预览。当地图大于 JScrollPane 时，我希望能够滚动。我该怎么做？

这是一张图片

[![z](../Images/c9317080a750762cfded4f2ea377f9dd.png)](https://i.stack.imgur.com/qjkrM.jpg)

[更大的版本](http://screensnapr.com/e/gKkYSw.png)

地图的图像适合滚动窗格，但图像实际上更大，所以我们看不到整个地图。

一些代码：

将图像保存在 scrollPane 内的 JPanel 类

```
public class MapDisplay extends JPanel {

public MapDisplay() {
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponents(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(new Color(0xDFDFDF));
    g2d.fillRect(0, 0, 2000, 2000);
    if (mapinfo != null) {
    if (mapinfo.img != null) {
        g2d.drawImage(mapinfo.img, 0, 0, null);
    }
    }
    repaint();
}
} 
```

scrollPane 的声明

```
final JScrollPane scrollPane_1 = new JScrollPane(mapDisplay);

scrollPane_1.setBounds(10, 11, 989, 553);
getContentPane().add(scrollPane_1);
add(scrollPane_1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:44:43.837

`MapDisplay`必须“告诉”它`JScrollPane`想要多大。`getPreferredSize`您可以通过实现 的方法来做到这一点`MapDisplay`。

```
public Dimension getPreferredSize() {
    return new Dimension(widthOfMap, heightOfMap);
} 
```

此外，不要*从*`repaint()`方法内部调用`paintComponent()`，因为这会导致无限循环。

# android - ndk-build 找不到 jni 目录下的文件

> ID：12547143
> 
> 赞同：2
> 
> 时间：2012-09-22T19:44:51.127
> 
> 标签：android, android-ndk, makefile

我有一个非常简单的测试项目。基本上是 jni 下的一个原生 c 文件（jni 位于项目的根目录下，与 'src' 'res' 等在同一目录中）。make 文件基本上是最简单的：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := native
LOCAL_SRC_FILES := native.c
include $(BUILD_SHARED_LIBRARY) 
```

错误信息是：make: *** No rule to make target`'/native.c'。需要... 显然 ndk-build 试图在根目录下查找文件。如果我将文件复制到根目录“/”，或者如果我在 make 文件中指定了“native.c”的完整路径，那么一切正常。

我还尝试通过 $(warning, '$(LOCAL_PATH)') 输出 $LOCAL_PATH 并发现没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:47:55.293

使用以下内容创建 Android.mk：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := native
LOCAL_SRC_FILES := native.c
include $(BUILD_SHARED_LIBRARY) 
```

放入`native.c`您的 Android.mk 所在的同一文件夹中。

跑`ndk-build`

您将获得如下输出：

```
D:\12314\jni>ndk-build
"Compile thumb : native <= native.c
SharedLibrary  : libnative.so
Install        : libnative.so => libs/armeabi/libnative.so 
```

# algorithm - DPLL 算法是如何工作的？

> ID：12547160
> 
> 赞同：9
> 
> 时间：2012-09-22T19:46:52.053
> 
> 标签：algorithm, logic, artificial-intelligence

我无法理解用于检查命题逻辑中句子可满足性的 DPLL 算法。 [http://books.google.co.in/books?id=4fyShrIFXg4C&pg=PA250&lpg=PA250&dq=DPLL+算法+from+artificial+intelligence+A+modern+approach&source=bl&ots=oOoZsT8KFd&sig=pdmyUsQZZWw76guWY9eFJKyNsH0&hl&1=EvFerrXe&ei 0CD0Q6AEwAw#v=onepage&q&f=false](http://books.google.co.in/books?id=4fyShrIFXg4C&pg=PA250&lpg=PA250&dq=DPLL+algorithm+from+artificial+intelligence+A+modern+approach&source=bl&ots=oOoZsT8KFd&sig=pdmyUsQZZWw76guWY9eFJKyNsH0&hl=en&sa=X&ei=vBFeUOf1EMLrrQeanoG4DQ&ved=0CD0Q6AEwAw#v=onepage&q&f=false)
![在此处输入图像描述](../Images/e337e0a62596288bec0f9318bfd4121a.png)

该算法取自《人工智能一种现代方法》一书。我发现它与那些许多函数递归真的很混淆。特别是，该`EXTEND()`函数做了什么，递归调用背后的目的是`DPLL()`什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-22T20:59:58.893

[DPLL](http://en.wikipedia.org/wiki/DPLL_algorithm)本质上是一种**回溯算法**，这是递归调用背后的主要思想。

该算法在尝试分配时构建解决方案，您有一个部分解决方案，随着您的继续，它可能会被证明成功或不成功。该算法的天才之处在于如何构建部分解决方案。

首先，让我们定义什么是**单元子句**：

单元子句是一个子句，它恰好具有一个仍未分配的文字，而其他（已分配的）文字 - 都被分配为 false。
此子句的重要性在于，如果当前赋值有效 - 您可以确定未赋值文字中变量的值是什么 - 因为文字必须为真。

例如：如果我们有一个公式：

```
(x1 \/ x2 \/ x3) /\ (~x1 \/ ~x4 \/ x5) /\ ( ~x1 \/ x4) 
```

我们已经分配了：

```
x1=true, x4=true 
```

然后`(~x1 \/ ~x4 \/ x5)`是一个单元子句，因为您必须`x5=true`在当前部分赋值中进行赋值才能满足该子句。

**该算法的基本思想是：**

1.  “猜”一个变量
2.  查找从上次分配创建的所有单元子句并分配所需的值
3.  迭代重试第2步，直到没有变化（找到传递闭包）
4.  如果当前赋值不能为所有子句产生 true - 从递归折叠并重试不同的赋值
5.  如果可以 - “猜测”另一个变量（递归调用并返回 1）

**终止：**

1.  无处可去“回到”并改变“猜测”（无解）
2.  所有子句都满足（有解决方案，算法找到了）

您还可以查看[这些讲座幻灯片](http://homepage.cs.uiowa.edu/%7Etinelli/classes/196/Fall09/notes/dpll.pdf)以获取更多信息和示例。

**使用示例和重要性：**
DPLL 尽管已有 50 年历史，但仍然是大多数 SAT 求解器的基础。
SAT 求解器对于解决难题非常有用，例如软件验证中的一个示例 - 您将模型表示为一组公式，以及您想要验证的条件 - 并在其上调用 SAT 求解器。虽然指数最坏情况 - 平均情况足够快并且在行业中广泛使用（主要用于验证硬件组件）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T21:12:49.237

我会注意到 DPLL 中使用的技术是复杂性理论证明中使用的一种常用技术，您可以在其中*猜测*对事物的部分分配，然后尝试*填写*其余部分。有关 DPLL 为何以这种方式工作的更多参考资料或灵感，您可以尝试阅读一些围绕 SAT 的复杂性理论材料（在任何关于复杂性理论的优秀教科书中）。

使用“现成”的 DPLL 实际上会导致一个非常糟糕的解决方案，并且您可以使用一些关键技巧来做得更好！除了 Amit 的回答，我将提供一些实用的参考资料来理解 DPLL 是如何工作的：

*   如果我们有一个包含许多变量的公式`{x1,...,xn}`，您会发现 DPLL 算法将更快地终止（在公式可满足的情况下*）* ，具体取决于您选择*的变量。*您还会发现*正确*选择（显然）更有帮助。
*   有多种技术可以帮助您做到这一点，称为变量选择启发式。
*   还需要对公式的表示进行许多优化，以便您可以*快速*传播决策和饱和子句，特别是“两个观察文字”技术。
*   *SAT真正的*突破是基于*从句学习*。每当您“卡住”时，您都会创建一个新子句以添加到您的数据库中，这将阻止您搜索空间的“无用”区域。关于包含学习从句的最佳策略有很多研究：应该包含哪些，何时包含？
*   [MiniSat](http://minisat.se/)是一款逼真且高度优化的 SAT 求解器。我发现[原始 MiniSat 论文](http://minisat.se/downloads/MiniSat.pdf)在弄清楚如何进行真正优化的 SAT 求解方面确实让我大开眼界。这真的是一本很棒的读物，如果您有兴趣了解更多关于可靠 SAT 求解器的实施的信息，强烈推荐。

因此，从理论上讲，SAT 的核心是一个非常重要的问题（第一个通过 Karp 进行 NP 完全约简，任何复杂性书籍都会介绍的有趣而乏味的构造技术），但在模型检查和软件验证方面也有非常*实际的应用。*如果您对如何快速解决 NP 完全问题的经典示例感兴趣，请查看工业级 SAT 求解器的实现，这很有趣！

# regex - 用于匹配合法标识符名称的正则表达式

> ID：12547161
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:46:53.753
> 
> 标签：regex, jflex

我是这个正则表达式的新手。我正在尝试编写一个正则表达式来匹配遵循这些规则的标识符：

它必须以字母开头，并且只能包含字母、数字和下划线。标识符还必须以字母结尾，并且不能有两个连续的下划线。

我试图为此提出正则表达式，但我没有取得太大的成功。我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:11:52.603

使用正则表达式模式

```
\b[a-zA-Z](?:[a-zA-Z\d]|(?<!_)_(?!_))*[a-zA-Z]\b 
```

如果您还想添加最小和最大长度（例如最小 6 和最大 12），请使用

```
\b(?=\w{6,12}\b)[a-zA-Z](?:[a-zA-Z\d]|(?<!_)_(?!_))*[a-zA-Z]\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:13:30.553

**这是我可以做的样本**

```
public static void main(String[] args) {
    System.out.println(test("a"));
    System.out.println(test("a_a"));
    System.out.println(test("a2_f"));
    System.out.println(test("a_2f"));
    System.out.println(test("a2_fasd"));
    System.out.println(test("dsads_dsadsa"));
    System.out.println(test("d_sads_dsads_a"));
    System.out.println(test("a2_3241_4324_2f"));
    //fails
    System.out.println(test("2_3241_4324_2f"));
    System.out.println(test("a2_3241__4324_2f"));
    System.out.println(test("_dsads_dsadsa"));
    System.out.println(test("dsads_dsadsa_"));
}

//validation
public static boolean test(String name) {
    String regEx = "^[a-zA-Z](_?[a-zA-Z0-9]+)*_?[a-zA-Z]$||^[a-zA-Z]([a-zA-Z0-9]+_?)*[a-zA-Z]$||^[a-zA-Z]_[a-zA-Z]$||^[a-zA-Z]$";
    return Pattern.matches(regEx, name);
}

------------------------
Printed results
true
true
true
true
true
true
true
true
false
false
false
false 
```

# c# - 从 SQL Server 返回一个整数值

> ID：12547166
> 
> 赞同：3
> 
> 时间：2012-09-22T19:47:50.003
> 
> 标签：c#, sql, .net, sql-server

我有一个 SQL 查询如下：

```
SqlConnection conn = new SqlConnection(connectionString);

conn.Open();

SqlCommand cmd = new SqlCommand("SELECT id FROM Pages WHERE pageName=about",conn);
//cmd.Parameters.Add("@pageName","hakkinda");

SqlDataReader reader = cmd.ExecuteReader();

flID = reader.GetInt16(0);

reader.Close();
conn.Close(); 
```

我收到一条错误消息：

`Invalid attempt to read when no data is present.`

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:52:32.480

我注意到几个潜在的问题：

在尝试从中读取数据之前，您需要调用 reader.Read()。当人们期望多行时，这通常在循环中完成。

```
while (reader.Read()) {
    flID = reader.GetInt16(0);
} 
```

如果“about”是文字而不是另一个列名，那么在您的 SQL 中，您可能需要在其周围加上单引号：

```
"SELECT id FROM Pages WHERE pageName='about'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:51:53.520

您的查询返回 0 个结果。这是因为 SQL 字符串中的参数值缺少引号。它应该如下所示（注意单词'about'周围的单引号）：

```
SqlCommand cmd = new SqlCommand("SELECT id FROM Pages WHERE pageName='about'",conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:55:55.433

您必须调用`DataReader.Read`以获取结果：

```
SqlDataReader reader = cmd.ExecuteReader();
reader.Read(); 
```

`DataReader.Read`返回一个布尔值，所以如果你有超过 1 个结果，你可以这样做：

```
while (reader.Read()) {
  // read data here
} 
```

您的选择语句应该是：

```
"SELECT id FROM Pages WHERE pageName='about'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:12:45.390

如果您希望只返回单个值，则可以使用**.ExecuteScalar()**

```
flID = int.Parse(query.ExecuteScalar().ToString()); 
```

此外，对 pageName 值使用单引号。

```
SqlCommand cmd = new SqlCommand("SELECT id FROM Pages WHERE pageName='about';",conn); 
```

# actionscript-3 - 将带过滤器的 BitmapImage 转换为 BitmapData

> ID：12547171
> 
> 赞同：0
> 
> 时间：2012-09-22T19:48:13.043
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个 BitmapImage 并对其应用了 ShaderFilter：

```
 var bm:BitmapImage = new BitmapImage();
            bm.source = resizedBitmapData;
            bm.filters = [filter]; 
```

我尝试将 bitmapImage 复制到更大的图像中作为叠加层：

```
 bm.addEventListener(FlexEvent.READY, function (event:*):void {
                var bmd:BitmapData = bm.bitmapData;
                backgroundBitmap.bitmapData.copyPixels(bmd, 
                    new Rectangle(0, 0, bmd.width, bmd.height),
                    location);          
            }); 
```

它有效，但“bmd”包含的是应用过滤器之前的原始图像。我想要的是在应用过滤器后获取生成的图像。这可能吗？

我正在尝试 ImageSnapshot.captureBitmapData() 但 BitmapImage 似乎不是 IBitmapDrawable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:07:07.710

我会尝试将它添加到精灵中，然后如果您的方式不起作用，则渲染精灵......

就像是

```
 var helper:Sprite = new Sprite();
 helper.addChild(bm);
 var bmd:BitmapData = new BitmapData(bm.width,bm.height);
 bmd.draw(helper);
 backgroundBitmap.bitmapData.copyPixels(helper, 
       new Rectangle(0, 0, helper.width, helper.height),location); 
```

你有没有检查过过滤器是否适用并且正在渲染想要的结果？;)

# css - IE 中忽略的 CSS 样式

> ID：12547174
> 
> 赞同：-2
> 
> 时间：2012-09-22T19:48:46.210
> 
> 标签：css, internet-explorer

我在 IE 中对这个网站有疑问：http: [//www.coachjoelleinc.com/](http://www.coachjoelleinc.com/)

在所有其他浏览器中，右上角的 JS 旋转器为我提供了正确样式的青色按钮。在 IE 9 中，按钮变为黑色和白色。有任何想法吗？我很想知道我是否可以在未来的项目中为此做一些计划。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:56:19.397

这是因为您使用 Mozilla 前缀添加渐变，IE 无法理解：

```
-moz-linear-gradient(#6BA4B4, #26687B); 
```

因此，IE 将依赖`background-color:black;`同样为相同 CSS 类（.wt-rotator .thumbnails li、.wt-rotator .play-btn、.wt-rotator .prev-btn、.wt-rotator .next -btn)

尝试设置它（如此[处](https://stackoverflow.com/questions/4961651/does-ie9-support-css-linear-gradients)所述）：

```
.wt-rotator .thumbnails li, .wt-rotator .play-btn, .wt-rotator .prev-btn, .wt-rotator .next-btn {
   background: -moz-linear-gradient(#6BA4B4, #26687B);
   background: -webkit-linear-gradient(#6BA4B4, #26687B);
   background: -o-linear-gradient(#6BA4B4, #26687B);
   background: -ms-linear-gradient(#6BA4B4, #26687B);
   background: linear-gradient(#6BA4B4, #26687B);
   filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#6BA4B4', endColorstr='#26687B');
} 
```

# android - 有没有办法在 Android 的根布局之上绘制一些东西？

> ID：12547178
> 
> 赞同：0
> 
> 时间：2012-09-22T19:50:43.137
> 
> 标签：android, android-layout

有没有办法在我的应用程序顶部绘制一些东西**而不扩展或重新排列已经存在的布局**？

也许有一个我不知道[Window的技巧](http://developer.android.com/reference/android/view/Window.html)

可以把它想象成三星的 Galaxy Note Pen 绘图，它允许您在现有应用程序之上绘图

我不知道底层布局。我也不想扭曲它。

我知道可能没有，所以如果您不确定，请不要回答说没有。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T20:01:11.893

看起来您需要使用 Canvas 和/或 Drawables。看这里：

[http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

# javascript - 了解 JavaScript 运行时

> ID：12547187
> 
> 赞同：1
> 
> 时间：2012-09-22T19:52:00.563
> 
> 标签：javascript, dom

考虑关注 JavaScript 对象

```
var planet = {
    id: 1001,
    Name: "Mars",
    faction: {
        factionId: 2,
        notification: function () {
            document.write("Mars notified");
        }
    },
    cities: [
        { locationId: 15, name: "Gladius" },
        { city: "MyPlanet", geo: "universal" }
    ]
} 
```

尝试`planet.cities`在 Chrome 调试器窗口中阅读时，我看到了这些附加项目。

![在此处输入图像描述](../Images/961d32263d7b308995f0feea2f60114c.png)

这些是 JavaScript 运行时引擎的一部分吗？不同的浏览器对它们的处理方式不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:54:45.777

每个 JavaScript 都有一个原型对象，它继承自（[EcmaScript §4.2.1](http://ecma-international.org/ecma-262/5.1/#sec-4.2.1)）。这通常被称为“内部`[[prototype]]`属性”（[EcmaScript §8.6.2](http://ecma-international.org/ecma-262/5.1/#sec-8.6.2)）。FF 和 Chrome 将其公开，因为非标准（且已弃用）[`__proto__`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)是特定于实现的。

您看到的这些附加属性位于`Object.prototype`（[EcmaScript §15.2.4](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4)，[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object#Object_instances)）上，所有普通对象（以及您的对象文字）都从这些属性继承。同样，双下划线属性是特定于实现的，现在已被属性描述符弃用（参见[`Object.defineProperty`MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object#Object_instances)）。

# extjs4 - 访问边框布局的不同区域

> ID：12547190
> 
> 赞同：3
> 
> 时间：2012-09-22T19:52:25.057
> 
> 标签：extjs4, extjs4.1

在 Sencha 的边界布局 API 中，它说：

> ExtJS 4.0+ 中没有 BorderLayout.Region 类

我在各种博客上找到的访问中心面板是这样的：

```
var viewPort = Ext.ComponentQuery.query('viewport')[0];
var centerR = viewPort.layout.centerRegion; 
```

再次查看文档，我看到这`centerRegion`是一个私有函数（为什么？），我不想依赖这些函数来进行未来的验证。此外，没有`westRegion`,`northRegion`等...

如何获得这些物品？
我当然可以获得区域内的项目：各种面板等，但我希望完全控制包含我的边框布局的视口。这就是我现在正在做的事情：

```
 var viewPort = Ext.ComponentQuery.query('viewport')[0];
    var view = Ext.widget('my-new-tab-panel');

    viewPort.layout.centerRegion.removeAll();
    viewPort.layout.centerRegion.add(view); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:11:43.270

通常，我为必须使用的每个容器设置一个 id。因此，我的中心区域将有一个 id，我将使用*Ext.getCmp()*函数获取它。

否则，要访问视口项目，您可以执行以下操作：

```
var viewPort = Ext.ComponentQuery.query('viewport')[0];
var view = Ext.widget('my-new-tab-panel');

viewPort.items.items[0].removeAll();
viewPort.items.items[0].add(view); 
```

如果您将中心区域定义为视口的第一项，那么上面的代码就可以了，但是如果您将其定义为第三或第四项，那么您必须根据您的区域的位置（视口.items[3] 或 viewPort.items[4] 等）。

另一种方法是使用查询选择器：

```
var cr = viewPort.down('panel[region=center]');
cr.removeAll();
cr.add(view); 
```

但是，按照这种方式，您必须查询精确的 xtype（在本例中为面板）。

**无论如何，我认为最好的方法是为每个区域使用一个 id。**

# javascript - 使用 jQuery 在树 (SVG) 中间插入 (g) 节点

> ID：12547194
> 
> 赞同：2
> 
> 时间：2012-09-22T19:52:52.217
> 
> 标签：javascript, jquery, dom, svg, dom-manipulation

在树中间插入节点的最推荐/最有效的方法是什么。

如何转置这个

```
<svg id="root" ... >
  <g id="child1">...</g>
  <text id="child2">...</text>
  <rect id="child3">...</rect>
  ...
</svg> 
```

对此

```
<svg id="root" ... >
  <g id="parent">
    <g id="child1">...</g>
    <text id="child2">...</text>
    <rect id="child3">...</rect>
    ...
  </g>
</svg> 
```

[@jsFiddle](http://jsfiddle.net/jugal/mxc2x/)

我试过了

```
var $parent = $("g").attr("id","parent");
var $root = $("#root");
$root.contents().each(function(){
   $child=$(this);
   $child.remove();
   $parent.append($child);
});
$root.append($parent); 
```

我也试过在[这个](https://stackoverflow.com/questions/2596833/how-to-move-child-element-from-one-parent-to-another-using-jquery#answer-8727167)答案中使用 moveTo 方法

```
(function($){
    $.fn.moveTo = function(selector){
        return this.each(function(){
            var cl = $(this).clone();
            $(cl).appendTo(selector);
            $(this).remove();
        });
    };
})(jQuery);

$root.contents().each(function() {
    $(this).moveTo($parent);
}); 
```

所有这些方法都适用于简单的场景，但是当树真的很大时，浏览器就会挂起，是否有更有效的方法来执行此操作？
我正在寻找 jQuery 或纯 javascript 解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:55:50.473

我建议：

```
$('#root > div').wrapAll('<div id="parent" />'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZZ5ey/)。

参考：

*   [`wrapAll()`](http://api.jquery.com/wrapAll/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:54:18.930

这只会对 DOM 添加一个，所以这会很快：

```
$('#root').html('<div id=parent>'+$('#root').html()+'</div>'); 
```

# c++ - 如何以优雅的方式将 C++ 代码转换为 C

> ID：12547195
> 
> 赞同：1
> 
> 时间：2012-09-22T19:53:03.410
> 
> 标签：c++, c, header

> **可能重复：**
> [代码从 C++ 转换为 C](https://stackoverflow.com/questions/737257/code-convert-from-c-to-c)
> [将 C++ 类转换为 C 结构（及更高版本）](https://stackoverflow.com/questions/5872915/converting-a-c-class-to-a-c-struct-and-beyond)

我曾经是一名 C++ 程序员，但现在我需要用 C 编写程序。例如用 C++

```
Main.cpp
=====================
int main
{
  ns::Sum sum(1, 2);
}

Sum.h
=====================
namespace ns
{
  class Sum
  {
    public:
    Sum(int a, int b);
    private:
    void AddThemUp();
    int a;
    int b;
  }
}

Sum.cpp
======================
namespace ns
{
  Sum::Sum(int a, int b)
  {
    this->a = a;
    this->b = b;
    AddThemUp();
  }

  void Sum::AddThemUp()
  {
     a + b;//stupid for returning nothing, just for instance
  }
} 
```

那是在 C++ 中我不知道如何把上面放在 C 中。因为那里没有类。如果我在头文件中声明数据成员 a & b，它们将成为全局变量。我不喜欢全局变量。C中有命名空间吗？谁能帮忙？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:29:28.877

这是从 C++ 到 C 的简单转换。此方法允许堆栈对象，就像您如何使用 ns::Sum 一样。请注意，您还应该有一个释放函数来清理结构分配的任何内存。

```
// Main.c
// =====================

// Construction
ns_Sum sum;
ns_SumInitWithAAndB(&sum, 1, 2);

// Sum.h
// =====================

// All member variables are contained within a struct
typedef struct ns_Sum_
{
    int a;
    int b;
} ns_Sum;

// Public Methods
void ns_SumInitWithAAndB(ns_Sum *sum, int a, int b);

// Sum.c
// ======================

// Private Methods can be declared as static functions within the .c file
static void ns_SumAddThemUp(ns_Sum *sum);

void ns_SumInitWithAAndB(ns_Sum *sum, int a, int b)
{
    sum->a = a;
    sum->b = b;
    ns_SumAddThemUp(sum);
}

void ns_SumAddThemUp(ns_Sum *sum)
{
    a + b; //stupid for returning nothing, just for instance
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:58:16.010

不，那是 C 语言的限制之一，你没有`namespace`在语言中内置单独的 s。这通常是通过为名称添加前缀来完成的。至于全局变量，您可以使用`extern`存储说明符来声明但不定义它们。

标题：

```
#pragma once

extern int ns_foo; 
```

资源：

```
#include "header.h"

int ns_foo = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:32:24.413

使用 C++ 在 C++ 中为您提供的某些功能的传统方法与大量手动工作有关：

*   您可以为`struct`s 和函数使用前缀，而不是使用命名空间，例如`struct ns_Sum`和`void ns_Sum_AddThemUp()`.
*   C 没有成员函数。因此，与其在对象上调用函数，不如将对象作为第一个参数传递，例如`void ns_Sum_SumThemUp(ns_Sum* object)`.
*   制作成员的方式`private`是只`struct`在header中声明，在source中定义。这与合适的创建和销毁功能一起使用：

那就是 C 头文件中的声明可能看起来像这样：

```
typedef struct ns_Sum ns_Sum;
ns_Sum* ns_Sum_Create();
void    ns_Sum_Destroy(ns_Sum*);
void    ns_Sum_AddThemUp(ns_Sum const*); 
```

对于使用这样的映射的简单结构，效果很好。实现多态调度或处理模板的道德等价物成为了*一些身体部分*的皇家痛苦。我个人对在 C 中使用 C++ 的看法是使用 C++，但我意识到这种偏好并没有与每个人共享......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:50:20.080

其他人已经指出如何使用名称前缀来模拟命名空间。

但是您的问题似乎还有另一个误解。只有`static`数据成员转换为 C 中的“全局”变量。其他“正常”数据成员对于`struct`.

`public` `static`成员*是*全局变量，因此您不能指望这会更好地工作 int C。`private` `static`成员可以替换为仅在定义函数`static`的文件中声明的变量。`.c`唯一的限制是这些对于`inline`函数是不可见的，就像它们对于`inline`C++ 中的成员函数一样。

可能应该添加的另一件事是，当你在做这样的项目时，你可以尝试开始用 C 来思考。现代 C 有一些 C++ 中不存在的工具，C 和 C++ 的交集是一种相当受限制的语言。这些工具是，例如：

*   可以用空函数体替换构造函数的指定初始化程序
*   在表达式中提供临时变量的复合文字
*   *pointers* to VLA (variable length arrays) that can provide you with convenient interfaces for vector and matrix functions

# java - 比较整数对象

> ID：12547201
> 
> 赞同：31
> 
> 时间：2012-09-22T19:53:46.017
> 
> 标签：java, oop, object

我有以下代码：

```
public class Test {

    public static void main(String[] args) {

        Integer alpha = new Integer(1);
        Integer foo = new Integer(1);

        if(alpha == foo) {
            System.out.println("1\. true");
        }

        if(alpha.equals(foo)) {
            System.out.println("2\. true");
        }

    } 

} 
```

输出如下：

```
2\. true 
```

但是，更改`Integer object`to的类型`int`会产生不同的输出，例如：

```
public class Test {

    public static void main(String[] args) {

        Integer alpha = new Integer(1);
        int foo = 1;

        if(alpha == foo) {
            System.out.println("1\. true");
        }

        if(alpha.equals(foo)) {
            System.out.println("2\. true");
        }

    } 

} 
```

新输出：

```
1\. true
2\. true 
```

怎么会这样？为什么第一个示例代码不输出`1\. true`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-22T20:06:04.297

对于引用类型，`==`检查引用是否相等，即它们是否指向同一个对象。

对于原始类型，`==`检查值是否相等。

`java.lang.Integer`是引用类型。`int`是原始类型。

编辑：如果一个操作数是原始类型，而另一个是拆箱到合适原始类型的引用类型，`==`则将比较值，而不是引用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T20:05:56.233

整数对象是对象。这听起来合乎逻辑，但却是问题的答案。对象是在 Java 中使用`new`关键字创建的，然后存储在内存中。比较时，您比较对象的内存位置，而不是对象的值/属性。

使用该`.equals()`方法，您实际上是比较对象的值/属性，而不是它们在内存中的位置：

`new Integer(1) == new Integer(1)`返回 `false`，而`new Integer(1).equals(new Integer(1))`返回`true`。

* * *

`int`s 是 java 的原始类型。当您创建一个 int 时，所引用的只是值。当您比较 Java 中的任何原始类型时，比较的只是值，而不是内存位置。这就是为什么`5 == 5`总是返回 true。

当您将`Integer`对象与原始类型进行比较时，如果可能，该对象将被强制转换为原始类型。使用 an`Integer`和 an`int`这是可能的，因此将它们进行比较。这就是`Integer(1).equals(1)`返回 true 的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T20:11:54.413

您将使用什么`new Integer(1)`来创建新对象，它每次都会创建一个完全不同的对象，即使它具有相同的值。'==' 检查对象是否相同，而不是数据值。在您的情况下，您可以按如下方式检查该值：

```
if(alpha.intValue() == foo.intValue()) {
 // 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T20:07:01.490

Integer == int 这里应用了自动装箱（所以 Integer 在比较之前转换为 int ）所以真的..但是 Integer == Integer 这里的对象比较所以引用不同所以假..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T20:07:30.660

第一个示例：在对象之间使用 == 运算符检查引用是否相等，并且由于您正在比较两个不同的对象，因此它们不相等。

第二个示例：当在包装类型（Integer、Long 等）和数字类型（int、long 等）之间使用 == 时，包装类型被取消装箱，并且在两个原始数字类型之间进行相等性检查（即在**int**和**int**之间）。拆箱是二进制数字提升的一部分，在此处阅读更多信息：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)

# image - HSI和YCbCr的区别与肤色有关

> ID：12547203
> 
> 赞同：2
> 
> 时间：2012-09-22T19:53:52.020
> 
> 标签：image, matlab, image-processing, colors, rgb

我正在用 c# 进行人脸检测项目，我想通过使用肤色分割来找到皮肤区域，为此我必须提取皮肤区域，现在我可以使用 HSI 和 YCbCr ，它们之间的确切区别是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:08:55.453

两者`HSI`都`YCbCr`基于将亮度分量与颜色分量分开的想法。

`I` in `HSI`（大致）相当于`Y`in `YCbCr`。 `H`和`S` in `HSI`（大致）是`Cb`, `Cr`in的极坐标表示`YCbCr`。对于*确切的*差异检查公式。

`HSI`由于肤色位于特定`H`范围内，因此在极坐标 ( ) 中工作可能更方便一些。

# asp.net-mvc - 基于 Knockout 的应用程序框架

> ID：12547204
> 
> 赞同：4
> 
> 时间：2012-09-22T19:54:02.293
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-validation

我一直在使用淘汰赛来开发我们应用程序的前端。它具有令人印象深刻的安静特性，并为我们简化了许多复杂的数据绑定场景。但是，它没有提供任何有助于代码结构的指导或结构。是否有任何基于 Knockout 构建的应用程序框架并提供构建模块化的大型 JavaScript 应用程序。例如，在 Backbone 的情况下，有许多应用程序框架构建在它之上（Marionette、Chaplin、Vertebrae、LayoutManager 等...）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T02:36:27.123

我们已经构建[了 BoilerplateJS](http://boilerplatejs.org/)。它不完全是一个框架，但它是大型 JavaScript 项目的参考架构。它可以与 knockoutjs 一起使用，并且有几个[示例](http://boilerplatejs.org/samples/productsuite/index.html#)可用。

它提供了有关如何：

1.  将代码结构化为模块
2.  如何管理你的依赖是（这里使用RequireJS）
3.  客户端路由
4.  单元测试 .. 以及构建大型 JavaScript 应用程序时应考虑的其他几个方面。

# python - 使用python登录网站

> ID：12547205
> 
> 赞同：2
> 
> 时间：2012-09-22T19:54:09.313
> 
> 标签：python, authentication, cookies, login

我正在尝试使用 python 脚本登录 Wikipedia，但是尽管按照[此处](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)的说明进行操作，我还是无法使其正常工作。

```
import urllib
import urllib2
import cookielib

username = 'myname'
password = 'mypassword'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
opener.addheaders = [("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6")]
login_data = urllib.urlencode({'wpName' : username, 'wpPassword' : password})
opener.open('http://en.wikipedia.org/w/index.php?title=Special:UserLogin', login_data)
resp = opener.open('http://en.wikipedia.org/wiki/Special:Watchlist') 
```

我得到的只是“你没有登录”页面。我尝试使用具有相同否定结果的脚本登录另一个站点。我怀疑它要么与 cookie 有关，要么我在这里遗漏了一些非常简单的东西。但我就是找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:51:14.570

如果您检查发送到登录 URL 的原始请求（借助[Charles Proxy](http://www.charlesproxy.com)等工具），您会看到它实际上发送了 4 个参数：`wpName`、`wpPassword`和。前 3 个是静态的，您可以随时填写它们，但第 4 个需要从登录页面的 HTML 中解析。除了其他 3 个值之外，您还需要将解析的这个值发布到登录 URL 以便能够登录。`wpLoginAttempt``wpLoginToken`

[`Requests`](http://docs.python-requests.org/en/latest/index.html)这是使用and的工作代码[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)：

```
import requests
from bs4 import BeautifulSoup as bs

def get_login_token(raw_resp):
    soup = bs(raw_resp.text, 'lxml')
    token = [n.get('value', '') for n in soup.find_all('input')
             if n.get('name', '') == 'wpLoginToken']
    return token[0]

payload = {
    'wpName': 'my_username',
    'wpPassword': 'my_password',
    'wpLoginAttempt': 'Log in',
    #'wpLoginToken': '',
    }

with requests.session() as s:
    resp = s.get('http://en.wikipedia.org/w/index.php?title=Special:UserLogin')
    payload['wpLoginToken'] = get_login_token(resp)

    response_post = s.post('http://en.wikipedia.org/w/index.php?title=Special:UserLogin&action=submitlogin&type=login',
                           data=payload)
    response = s.get('http://en.wikipedia.org/wiki/Special:Watchlist') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-03T22:27:19.540

添加这两行

```
r = bs(response.content)
print r.get_text() 
```

我应该能够理解我是否已登录，对吧？我一直看到“请登录以查看或编辑您的监视列表中的项目”。但我使用的是上面给出的干净代码，以及我的登录名和密码。

错误在哪里？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-14T15:51:57.193

维基百科现在强制使用 HTTPS 并需要其他参数，并且 wpLoginAttempt 变成了 wploginattempt，这里是 KZ 初始答案的更新版本：

```
import requests
from bs4 import BeautifulSoup as bs

def get_login_token(raw_resp):
    soup = bs(raw_resp.text, 'lxml')
    token = [n.get('value', '') for n in soup.find_all('input')
             if n.get('name', '') == 'wpLoginToken']
    return token[0]

payload = {
    'wpName': 'my_username',
    'wpPassword': 'my_password',
    'wploginattempt': 'Log in',
    'wpEditToken': "+\\",
    'title': "Special:UserLogin",
    'authAction': "login",
    'force': "",
    'wpForceHttps': "1",
    'wpFromhttp': "1",
    #'wpLoginToken': '',
    }

with requests.session() as s:
    resp = s.get('https://en.wikipedia.org/w/index.php?title=Special:UserLogin')
    payload['wpLoginToken'] = get_login_token(resp)

    response_post = s.post('https://en.wikipedia.org/w/index.php?title=Special:UserLogin&action=submitlogin&type=login',
                           data=payload)
    response = s.get('https://en.wikipedia.org/wiki/Special:Watchlist') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:14:29.717

您需要在`Content-Type: application/x-www-form-urlencoded`POST 请求中添加标头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-02T23:37:18.527

我还添加了以下几行，发现自己没有登录。

```
page = response.text.encode('utf8')

if page.find('Not logged in'):
    print 'You are not logged in.  :('
else:
    print 'YOU ARE LOGGED IN!  :)' 
```

# python - Flask 框架：MVC 模式

> ID：12547206
> 
> 赞同：20
> 
> 时间：2012-09-22T19:54:15.307
> 
> 标签：python, design-patterns, model-view-controller, flask

Flask 框架是否自然支持 MVC 模式？我应该将应用程序的哪些部分视为模型，将什么视为视图以及将什么视为控制器？

通常（根据我的经验）Flask 应用程序如下所示：

```
main_dir--|
          |
         app1--|
          |    |
          |  __init__.py
          |  api.py
          |  models.py
          |
         static--|
          |      |
          |    all the static stuff
          |
         app.py # with blueprints registering 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-22T20:05:24.237

Flask 实际上并不是一个 MVC 框架。它是一个简约的框架，在构建应用程序时给了你很大的自由度，但是 MVC 模式非常适合 Flask 提供的功能，至少在今天在 Web 应用程序的上下文中理解 MVC 模式的方式上（纯粹主义者可能会反对）。

本质上，您编写方法并将它们映射到特定路线，例如：

```
@app.route("/")
def hello():
    return "Hello World!" 
```

如您所见，那里没有视图或模型。然而，它也是建立在 Jinja2 模板库之上的，所以在一个真实的应用程序中，你的方法（它作为一个控制器）看起来像：

```
@app.route("/")
def hello():
    return render_template('index.html', username="John Doe") 
```

在这里，您使用`index.html`模板来呈现页面。这就是你现在的看法。

Flask 没有规定任何型号。你可以使用任何你想要的东西——从复杂的对象模型（通常使用像 SQLAlchemy 这样的 ORM）到满足你需要的最简单的东西。

你有它：MVC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-07T19:40:13.593

从 MVC 的角度来看 Flask，我认为 Flask 为我们提供了实现自己的模型或视图的灵活性。但是对于 Controller 我们需要依赖 Flask 框架本身。

```
1\.    @app.route("/")
2\.    def hello():
2.1       # Code for your model here
2.2       # model code
3\.        return render_template('index.html', username="John Doe") 
```

在上面的代码中 -

1.  第 1 行 - （由）控制器调用：是 Flask 控制器调用的内容，
2.  第 2 行 - 模型：这是我们为定义模型编写自己的实现的地方，
3.  第 3 行 - 视图：我们可以将视图编码为 index.html，使用 {{ }} 和 {% %} 编码，模型数据以 Dict 或用户对象的形式传递给视图。例如用户名="Xxx"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T07:10:42.897

另外，看看[这个](https://github.com/yusufocaliskan/python-flask-mvc)。它是一个基于烧瓶的小型 MVC 结构项目，并且运行良好。

# java - 自定义小部件未显示在我的 eclipse 4 应用程序中

> ID：12547209
> 
> 赞同：1
> 
> 时间：2012-09-22T19:54:34.727
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

我正在尝试使用[Opal](http://code.google.com/a/eclipselabs.org/p/opal/)提供的小部件。
我正在执行以下操作：

```
@PostConstruct  
public void createControls(Composite parent){  
   System.out.println("PROP3");  

   parent.setLayout(new GridLayout(1, false));        
   Composite propertyContainer = new Composite(parent, SWT.NONE);  
   propertyContainer.setLayout(new GridLayout(1, false));  

   GridData gd = new GridData(GridData.FILL, GridData.FILL, true, true);  
   propertyContainer.setLayoutData(gd);  

   propertyTable = new PropertyTable(propertyContainer, SWT.NONE);  
   propertyTable.showButtons();  
   propertyTable.viewAsCategories();  

   propertyTable.addProperty(new PTProperty("id", "Identifier", "Description for identifier", "My id")).setCategory("General");  

   propertyTable.addProperty(new PTProperty("text", "Description", "Description for the description field", "blahblah...")).setCategory("General");         

}  

@Focus  
private boolean setFocus(){  
   return true;  
} 
```

该代码与 a 相关联`Part`，它运行并且与其他小部件没有问题，但`PropertyTable`不显示。
创建的代码`PropertyTable`来自他们的[教程](http://code.google.com/a/eclipselabs.org/p/opal/source/browse/src/test/java/org/mihalis/opal/propertyTable/PropertyTableSnippet.java)。
我在这里搞砸了什么并且`PropertyTable`没有显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:09:21.870

您（通常）需要在带有`GridLayout`. `TabFolder`s 使用他们自己的布局，不需要任何布局数据。

# iphone - Xcode IOS 高级链接 UITableView

> ID：12547210
> 
> 赞同：0
> 
> 时间：2012-09-22T19:54:36.473
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我在 Xcode 中开发了一个选项卡式应用程序。我遇到了一个并发症。

我对自己的进步感到满意，但是在 Pic 2 或 Scene 2 或 SelectedCellViewController.m 中，我不想看到下面的 Pic1 或 Scene1 中的所有表格单元格。我只想查看一个表格单元格和相关表格单元格以链接到图片 3 或场景 3。

您可以在图片 1 或场景 1 中选择一个表格单元格，然后您可以看到您选择的颜色的图片，我将在图片下方包含一些信息。现在您可以在图 2 或场景 2 中看到图片下方有多个表格单元格。我只想显示相关表格单元格，以便您看到更大的版本，我已经编写了功能，但我很困惑如何摆脱图 2 或场景 2 中的其余单元格。

我不确定如何做到这一点，任何帮助将不胜感激。

**SelectcellViewController.h**

```
@interface SelectedCellViewController : UIViewController {
NSString *labelText;
UIImage *banner;
IBOutlet UILabel *label;
IBOutlet UIImageView *imageView;
IBOutlet UITableView *sampleViewDecors;
UINavigationController *navigationController;
NSArray *sitesArray;
NSArray *bannerImages;
}

@property (nonatomic, copy) NSString *labelText;
@property (nonatomic, retain) UIImage *banner;
@property (nonatomic, retain) UITableView *sampleViewDecors;
@property (nonatomic, retain) NSArray *sitesArray;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
@property (nonatomic, retain) NSArray *bannerImages;

@end 
```

**viewControllerToShow.m**

```
#import "SelectedCellViewController.h"
#import "DetailViewController.h"

@interface SelectedCellViewController ()

@end

@implementation SelectedCellViewController

@synthesize labelText;
@synthesize banner;
@synthesize sampleViewDecors;
@synthesize sitesArray;
@synthesize bannerImages;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
}
return self;
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad {

[super viewDidLoad];
[label setText:self.labelText];
[imageView setImage:self.banner];

// Load up the sitesArray with a dummy array : sites
NSArray *sites = [[NSArray alloc] initWithObjects:@"Click here for a bigger view", @"b", @"c", @"d", @"e", @"f", @"g", @"h", nil];
self.sitesArray = sites;
//[sites release];

/* Create the dummy banner images array and fill the main bannerImages array */

// Create the UIImage's from the images folder
UIImage *app = [UIImage imageNamed:@"french.png"];
UIImage *creat = [UIImage imageNamed:@"Creattica.jpg"];
UIImage *free = [UIImage imageNamed:@"Freelance.jpg"];
UIImage *net = [UIImage imageNamed:@"Netsetter.jpg"];
UIImage *rock = [UIImage imageNamed:@"Rockable.jpg"];
UIImage *tuts = [UIImage imageNamed:@"Tutsplus.jpg"];
UIImage *work = [UIImage imageNamed:@"Workawesome.jpg"];

/* Create the dummy array and fill with the UIImages. */
NSArray *banners = [[NSArray alloc] initWithObjects:app, creat, free, net, rock, tuts, work, nil];

// Set the main images array equal to the dummy array
self.bannerImages = banners;

[super viewDidLoad];
}

#pragma mark - Table View datasource methods

// Required Methods

// Return the number of rows in a section
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
return [sitesArray count];
}

// Returns cell to render for each row
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

// Configure cell

NSUInteger row = [indexPath row];

// Sets the text for the cell
cell.textLabel.text = [sitesArray objectAtIndex:row];

// Sets the imageview for the cell
//cell.imageView.image = [imagesArray objectAtIndex:row];

// Sets the accessory for the cell
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

// Sets the detailtext for the cell (subtitle)
//cell.detailTextLabel.text = [NSString stringWithFormat:@"This is row: %i", row + 1];

return cell;
}

// Optional

// Returns the number of section in a table view
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

#pragma mark -
#pragma mark Table View delegate methods

// Return the height for each cell
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return 78;
}

// Sets the title for header in the tableview
//-(NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
//  return @"Decors";
//}

// Sets the title for footer
//-(NSString *) tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section {
//  return @"Decors";
//}

// Sets the indentation for rows
-(NSInteger) tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath {
return 0;
}

// Method that gets called from the "Done" button (From the @selector in the line - [viewControllerToShow.navigationItem setRightBarButtonItem:[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissView)] autorelease]];)
- (void)dismissView {
[self dismissViewControllerAnimated:YES completion:NULL];
}

// This method is run when the user taps the row in the tableview
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
[tableView deselectRowAtIndexPath:indexPath animated:YES];

DetailViewController *detailviewControllerToShow = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
//[viewControllerToShow setLabelText:[NSString stringWithFormat:@"You selected cell: %d - %@", indexPath.row, [sitesArray objectAtIndex:indexPath.row]]];
detailviewControllerToShow.banner = [bannerImages objectAtIndex:indexPath.row];

[detailviewControllerToShow setModalPresentationStyle:UIModalPresentationFormSheet];
[detailviewControllerToShow setModalTransitionStyle:UIModalTransitionStylePartialCurl];
[detailviewControllerToShow.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissView)]];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:detailviewControllerToShow];
detailviewControllerToShow = nil;

[self presentViewController:navController animated:YES completion:NULL];
navController = nil;

//  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Tapped row!"
//                                            message:[NSString stringWithFormat:@"You tapped: %@", [sitesArray objectAtIndex:indexPath.row]]
//                                            delegate:nil
//                                            cancelButtonTitle:@"Yes, I did!"
//                                            otherButtonTitles:nil];
//  [alert show];
//  [alert release];

self.labelText = nil;
self.banner = nil;
//[label release];
// [imageView release];
[super viewDidUnload];

}

- (void)viewDidUnload {

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

![在此处输入图像描述](../Images/f17121f54ba2fce2c4a82d4740c761b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:39:58.697

您的 tableView 的行数与`sitesArray`. 如果只有一个值，或者如果你改变`numberOfRowsInSection`了，你会得到一个只有一行的表格。

```
// Return the number of rows in a section
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
    return 1;
} 
```

# python - Python搭建网站

> ID：12547215
> 
> 赞同：0
> 
> 时间：2012-09-22T19:55:16.323
> 
> 标签：python, django, r, rpy2

我昨天刚刚使用 Django 教程建立了一个网站，我对 Python 也知之甚少。这可能是一个完全的菜鸟问题，但任何回应都值得赞赏。

我打算使用 Python + Django 构建一个网页，该网页将在后端访问数据库。完成此操作后，我想与实验室中的其他用户共享此网站。他们的系统上没有安装 Python 或 Django。那么我如何与他们共享这个网站（内网访问）？我不可能在他们所有的系统上安装 Python + Django。如果我不能使用 Python + Django，我是否可以使用其他一些脚本语言/软件来创建一个由我的代码控制对后端数据库的访问的网站？

另外，我想从这个网站运行一些 R 代码。有人对我如何做到这一点有任何想法吗？我尝试下载 rpy/rpy2/PypeR，因为我有一个 64 位系统，所有这些安装都失败了。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:40:34.080

127.0.0.1 是环回。如果您连接到网络，则必须有一张具有另一个 IP 的卡。如果您使用的是 linux 类型`ip addr`或`ifconfig`，则使用 Windows 类型`ipconfig`来获取您的 IP 地址（我现在是 192.168.0.192）。我在这里假设您使用的是 Django 开发服务器。而是从以下内容开始：

```
python manage.py runserver 
```

尝试：

```
python manage.py runserver 0.0.0.0:8000 
```

0.0.0.0 告诉服务器监听端口 8000 中所有可用的卡并服务于 Django 网页。如果您的防火墙允许访问端口 8000，则 Intranet 中的其他用户应该能够看到 Django 站点将浏览器指向您的 ip（比如 192.168.0.192:8000）。当然，除了浏览器之外，无需在他们的计算机上安装任何东西。

当您打算在 Intranet 中运行该站点时，您可以通过 subprocess.Popen() 在您的计算机中简单地运行任何程序（包括 R），但 Django 不是异步的，客户端必须等待程序结束才能看到任何程序输出。我为一个最多 5 人使用的简单应用程序做了这个，并且成功了。要异步运行任务，您必须使用[django-celery](http://celeryproject.org/)。

# erlang - Erlang 拆分元组

> ID：12547223
> 
> 赞同：0
> 
> 时间：2012-09-22T19:56:05.317
> 
> 标签：erlang, tuples

我想在字典上调用 map 并获取它们的值列表。Erlang 没有内置到 dict 模块中，所以这就是我解决这个问题的方法：

```
Fn = fun(Tuple) ->
  [Key, Value] = Tuple,
  string:join([Key, Value], "=")
end,
lists:map(Fn, dict:to_list(Dict)). 
```

问题是 Key 和 Value 会被多次分配。如何“拆分”`dict:to_list`匿名函数调用内部返回的键/值元组`string:join`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:19:09.310

由于您有一个带有列表作为值的元组列表，因此您可能看起来像这样：

> [字符串：加入（[K，V]，“=”）|| {K, 值} <- dict:to_list(Your_dictionary), V <- 值]。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T00:32:40.163

我不确定我是否遵循您在这里的要求。“键和值被多次分配”是什么意思？

当您说要映射字典并返回值列表时，您是指“键值”意义上的值吗？在这种情况下，您可以这样做：

```
Values = [V || {_,V} <- dict:to_list(Dict)]. 
```

这只会为您提供字典的键值性质的“价值”方面的列表。

你也可以通过做类似的事情来获得一个键列表。

```
Keys = [K || {K,_} <- dict:to_list(Dict)]. 
```

如果您只想将 Key 和 Values 列表分开，您可以使用 lists:unzip/1。

```
{Keys, Values} = lists:unzip(dict:to_list(Dict)). 
```

然后`Keys`将是所有键的列表，并且`Values`将是所有值的列表。

`Key`或者您是否关心为您的字典的每个成员分配和`Value`都被分配（如在变量分配中）的事实？如果是这样，不要。这些分配很快，只是指针，而不是内存副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:09:14.657

以前从未处理过 dict 模块的相对新手，但这似乎对我有用：

```
dict:fold(fun(Key, Value, Accum) ->
                  [Value | Accum] end, [], D). 
```

例子：

```
init() ->
    Dict = dict:new(),
    Dict2 = dict:append(key, value, Dict),
    Dict3 = dict:append(key2, value2, Dict2),
    dict:append(key3, value3, Dict3).

grab_values(D) ->
    dict:fold(fun(Key, Value, Accum) ->
                      [Value | Accum] end, [], D). 
```

调用：

```
4> D = dictfold:init().
{dict,3,16,16,8,80,48,
      {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
      {{[],[],
        [[key2,value2]],
        [[key3,value3]],
        [],[],[],[],[],
        [[key,value]],
        [],[],[],[],[],[]}}}
5> dictfold:grab_values(D).
[[value2],[value3],[value]] 
```

# objective-c - ios 6 UILocalNotification

> ID：12547224
> 
> 赞同：1
> 
> 时间：2012-09-22T19:56:13.797
> 
> 标签：objective-c, ios, xcode

我已经为 iOS 6 实现了 UILocalNotification，但每次启动通知时，它都会显示为横幅。有没有办法可以将它默认为警报（如以前的 iOS 4）？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:32:50.547

这是您无法以编程方式设置的设置。所有使用通知的应用程序在“设置”应用程序中都有一个设置，您可以从警报、横幅或无中进行选择。

所以最重要的是，由用户来选择通知的类型。

# c++ - 指针映射中的 nullptr 的默认值是否定义了行为？

> ID：12547234
> 
> 赞同：6
> 
> 时间：2012-09-22T19:57:21.827
> 
> 标签：c++, c++11, big-o, time-complexity

下面的代码似乎总是遵循真正的分支。

```
#include <map>
#include <iostream>

class TestClass {
  // implementation 
}

int main() {
  std::map<int, TestClass*> TestMap;
  if (TestMap[203] == nullptr) {
    std::cout << "true";
  } else {
    std::cout << "false";
  }
  return 0;
} 
```

它是为指向的未初始化指针定义的行为`nullptr`，还是我的编译器的工件？

如果没有，如何确保以下代码的可移植性？目前，我正在使用类似的逻辑来为 a 返回正确的单例实例`log file`：

```
#include <string>
#include <map>    

class Log {
  public:
    static Log* get_instance(std::string path);
  protected:
    Log(std::string path) : path(path), log(path) {};
    std::string path;
    std::ostream log;
  private:
    static std::map<std::string, Log*> instances;
};

std::map<std::string, Log*> Log::instances = std::map<std::string, Log*>();

Log* Log::get_instance(std::string path) {
  if (instances[path] == nullptr) {
    instances[path] = new Log(path);
  }
  return instances[path];
} 
```

一种解决方案是[使用与此类似的方法，](https://stackoverflow.com/a/2333816/1691346)其中您使用特殊功能在检查时提供默认值`map`。但是，我的理解是，这会导致查找的复杂性`O(n)`变为`O(1)`. 在我的场景中这不是什么大问题（只有少数日志），但更好的解决方案是强制类型指针默认`Log*`引用`nullptr`，从而使查找检查`O(1)`和可移植性相同时间。这可能吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T20:03:01.497

映射总是对其成员进行值初始化（当然，在它们没有被复制初始化的情况下），并且内置类型的值初始化意味着零初始化，因此它确实是定义的行为。`operator[]`对于在调用之前不存在的元素访问时生成的新键的值部分尤其如此。

但是请注意，未初始化的指针*不一定*是空指针；事实上，仅仅读取它的值已经调用了未定义的行为（并且在某些情况下可能会在某些平台上出现分段错误）。关键是地图中的指针*不是*未初始化的。所以如果你写例如

```
void foo()
{
  TestClass* p;
  // ...
} 
```

`p`不会*被*初始化为`nullptr`.

但是请注意，您可能想要检查是否存在，以避免累积不必要的条目。您将使用`find`成员函数检查是否存在：

```
map<int, TestClass*>::iterator it = TestMap.find(203);
if (it == map.end())
{
  // there's no such element in the map
}
else
{
  TestClass* p = it->second;
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:03:56.860

是的，这是定义的行为。如果当您通过 访问某个元素时该元素尚未在地图中`operator[]`，则会默认构造该元素。

# scala - Scala forall 示例？

> ID：12547235
> 
> 赞同：51
> 
> 时间：2012-09-22T19:57:25.107
> 
> 标签：scala

我尝试了谷歌搜索，但找不到一个像样的`forall`例子。它有什么作用？为什么它需要一个布尔函数？

请给我一个参考（Scaladoc除外）。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-22T20:00:09.193

该`forall`方法采用一个`p`返回布尔值的函数。的语义`forall`说：如果集合中`true`的每一个都为真，则返回。`x``p(x)`

所以：

```
List(1,2,3).forall(x => x < 3) 
```

意思是：`true`如果1、2、3小于3，`false`否则。在这种情况下，它将评估为，`false`因为并非所有元素都小于 3：3 不小于 3。

如果集合*中至少有一个*元素为真，则有一个类似的方法`exists`返回。`true`*`x``p(x)`*

 *所以：

```
List(1,2,3).exists(x => x < 3) 
```

表示：`true`如果1、2、3*中至少有一个*`false`小于3，否则。在这种情况下，它将评估为，`true`因为某些元素小于 3：例如 1 小于 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T02:52:03.097

一个快速示例，说明如何使用`Scala`脚本使用此功能。

创建一个`myScript.scala`文件

```
println(args.forall(p => (p.equals("a")))) 
```

并调用它

```
scala myScript.scala a a a  // true
scala myScript.scala a b c  // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-17T12:04:55.347

Scala`forall`也是一个很好的工具，可以执行一些操作，例如应用逻辑**和****早期存在**的布尔值列表：

```
val evalResults: List[Boolean] = List(evaluateFunc1(), evaluateFunc2(), evaluateFunc3(), evaluateFunc4(), evaluateFunc5())

evalResults.forall(result => result == true) 
```*

# mysql - 我应该从表中重新计算大量数据，还是应该将其保存在我的数据库中？

> ID：12547236
> 
> 赞同：2
> 
> 时间：2012-09-22T19:57:29.567
> 
> 标签：mysql, sql, database, database-design, database-normalization

我的问题比具体更笼统，但我正在使用一个例子来转移这个想法。

我有一个论坛，在每次回放中，我都会展示用户拥有的消息数量。

假设在某些页面中有 15 个不同的用户，每个用户有超过 20,000 条消息，我应该通过计算用户拥有的消息表中的条目数来重新计算消息的数量，还是在用户表中创建一个列会更好包含此数据，并在每次回复时更新该列？

我知道它违反了数据库规范化规则，但每次都计算它似乎是一种很大的浪费。

如果重要的话，我正在使用 mySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:07:18.370

一般不会，但在某些特定情况下，可以。

您应该避免在数据库中有冗余数据。但是，有时您必须做出权衡才能获得不错的性能。

我实际上已经完成了您示例中的操作。它对性能很有用，但很难保持消息计数正确。你迟早会得到一些不一致的值，所以你需要一个计划来定期检查这些值并重新计算它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:13:41.647

您正在谈论[非规范化](http://en.wikipedia.org/wiki/Denormalization)。[引用维基百科](http://en.wikipedia.org/wiki/Denormalization)：

> 非规范化是尝试通过添加冗余数据或通过分组数据来优化数据库读取性能的过程。

将非规范化数据保存在“普通”代码中并不是一个简单的问题。记住比：

*   **您可以使用触发器**保留冗余数据。
*   如果您的架构包含**[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)**，则更容易保留冗余数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:26:27.303

您还可以在非规范化中进行一半：有一个包含每个用户每月数据的表格，由每月工作填充，并通过计算自每月 1 日以来的 msg + 每月数据总和来即时计算消息数量。或者，如果您不需要每月数据，您仍然可以在整个月份动态计算 + 更新 EOM 数字的每月流程。这样可以避免触发...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T22:36:34.110

我很惊讶没有人提到具体化的观点。当出于性能原因维护数据聚合时，这些对象非常有用，而不会违反我们实际数据的规范化。 [了解更多](http://www.fromdual.com/mysql-materialized-views)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:05:10.710

您是否尝试过对计算行数的结果进行基准测试？我建议您只是在视图中进行计算。通过您提出的非规范化，您只是将自己暴露在数据损坏的风险中。然后，帖子计数列将以与帖子数量的实际情况无关的任意值结束。

# google-apps-script - Google Url 获取服务突然开始失败

> ID：12547239
> 
> 赞同：1
> 
> 时间：2012-09-22T19:58:07.753
> 
> 标签：google-apps-script, google-drive-api, google-docs, urlfetch

我一直在附加到 docs 电子表格的脚本中使用 google code Url fetch 服务，它已经工作了一年多。但突然，在将文档迁移到谷歌驱动器后，服务开始失败。

这是格式：

```
var url='xyz.com?command=xxx'
var response = UrlFetchApp.fetch(url); 
```

失败报告一直说......“意外错误”，而代码 4 一年多没有改变。

请问我应该怎么做才能把事情整理好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:31:43.930

欢呼！

我知道了！

谷歌是问题所在。

我一直在使用以 API 服务器 IP 开头的 url，它运行良好。现在，获取服务停止使用 IP 地址获取。当我尝试使用域名代替 IP 地址时，它又可以正常工作了。

阿罕杜里拉！

但是，如果这里有人认识 google 人员并可以告知他们这个异常情况，那就太好了。这个问题大约在我从旧的“DOCS”迁移到“DRIVE”服务的同时开始出现。

谢谢大家，祝你有美好的一天。

# opengl - 使用 glUniform 指针变体后更改变量是否安全？

> ID：12547241
> 
> 赞同：5
> 
> 时间：2012-09-22T19:58:34.233
> 
> 标签：opengl

我想知道 glUniformXXv 是否会阻塞，直到指针引用的数据被复制到 GPU。换句话说，如果 GPU 很忙，这段代码会导致问题吗？

```
int i=5;
glUniform1iv(location,1,&i);
i = 6; 
```

如果 GPU 忙，这会导致 glUniform1fv 发送 6 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T20:08:12.270

除了以单词“Pointer”结尾的 OpenGL 函数外，*每个*接受指针的 OpenGL 函数都会在返回之前读取/写入该指针。因此，事实发生后对内存的更改将不会被看到。

# javascript - 如何在 jQuery modal 中创建 cookie？

> ID：12547243
> 
> 赞同：0
> 
> 时间：2012-09-22T19:59:07.243
> 
> 标签：javascript, jquery, ajax, cookies, modal-dialog

我尝试使用 jquery modal 和 cookie 创建一个页面。模态运行良好，但我在其中设置 cookie 时遇到问题。我想实现以下目标：

*   在主页加载时，显示模态框（弹出）
*   单击关闭按钮时弹出关闭，当用户返回页面时，模式框不会显示。
*   弹出窗口将在 7 天后再次显示。

请指教！

```
 // Close modal when click on close button 
    $close.click(function(e){
    e.preventDefault();
    method.close();
    });

       return method;
    }());

        // querying the document
        $(document).ready(function(){

        if (document.cookie.indexOf('$close.click=true') == -1){
            var sevenDays = 1000*60*60*24*7;
            var expires = new Date((new Date()).valueOf() + sevenDays);
            document.cookie = "$close.click=true;expires=" +  expires.toUTCString();
            };

            // Append data via Ajax
            $.get('url', function(data){
                modal.open({content: data});
            });

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:03:53.950

当我应该使用 cookie 时，我使用这个插件 [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

您可以使用以下模型结构

```
var modal = (function(){
        var 
        method = {},
        $overlay,
        $modal,
        $content,
        $close;

        // Center the modal in the viewport
        method.setPosition = function () {
            // Set Postion
        };

        // Open the modal, reveal overlay 
        method.open = function (settings) {
            if($.cookie('NameOfCookie'))
            {
                // We dont need show popup
                return
            }else{
                // Open Modal               
                $.cookie('NameOfCookie', 'created', { expires: 7 });
                method.GenerateModalPopup();
                method.setPosition()
            }
        };

        // Close the modal and overlay, then unbind the resize event when modal is closed
        method.close = function () { 
            // Close Modal
        };

        method.GenerateModalPopup=function(){
            // Generate the HTML and add it to the document

        };

        // Open popup window
        method.open();

   return method;
}()); 
```

# php - 在 MySQL 表中存储 PHP 变量

> ID：12547247
> 
> 赞同：0
> 
> 时间：2012-09-22T19:59:17.913
> 
> 标签：php, sql, mysqli

我想在 MYSQL 表中存储两个变量

```
--COL NAME 'details' [TEXT] --
    `$var1 = 'blah, blah'`<br>
    `$var2 = 'blah, blah, blah'` 
```

我通过 ID 获取行。

```
#MYSQLI QUERY OMITTED
$display_details  =  $row['details']; 
```

在我的 HTML 中

```
<?php echo $display_details ?>

um dolor sit amet, consectetur adipiscing elit. Donec  `<?php echo $var1 ?>` aliquam nisl. Nullam pharetra augue sed erat lobortis lobortis. Quisque eget n

sum dolor sit ame elit. Donec  `<?php echo $var2 ?>` aliquam nisl. Nullam pharetra augue sed erat lobortis lobortis. Quisque eget n 
```

错误是未定义的变量。

--澄清-- 我想将我的变量存储在一个表中并将它们回显到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:16:30.183

我认为你最好的选择是将所有你想要的变量保存到一个数组中，序列化数组，并将结果存储为`TEXT`.

然后在检索时，您可以运行`unserialize`（并取回数组）和`extract`它们。

```
$text = serialize(compact($var1, $var2));
// Save $text into 'details' column of database

// ...

// Another script, some times later, recovers that row and does:

extract(unserialize($row['details']));
// Now $var1 and $var2 are populated again. 
```

# asp.net-mvc-4 - MVC4 + MvcContrib + 共享布局？

> ID：12547250
> 
> 赞同：0
> 
> 时间：2012-09-22T19:59:34.873
> 
> 标签：asp.net-mvc-4, portable-areas

我在单独的程序集中有一个可移植区域，并希望通过调用主程序集中的共享 _Layout.cshtml 中的 RenderBody() 来填充其视图。但我得到的结果是 View 本身的内容，好像 _Layout.cshtml 甚至没有呈现。此外，视图中定义的任何区域（在便携式区域中）都没有被渲染——这实际上是预期的，因为 _Layout.cshtml 似乎完全被忽略了。

那么我做错了什么还是我误解了便携式区域的设计方式？我真的希望使用此功能将视图和区域移动到可移植区域，同时在主 Web 应用程序中保持“母版页”功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:05:46.637

显然，可移植区域必须定义它们希望被包裹的布局。这解决了问题，添加到便携式区域的视图中：

@{ 布局 = "~/Views/Shared/_Layout.cshtml"; }

我偶然发现这对我有帮助，尽管是间接的：

[http://mvccontrib.codeplex.com/workitem/7126](http://mvccontrib.codeplex.com/workitem/7126)

# html - css 'frame-like' 导航菜单的布局在窗口调整大小时中断

> ID：12547255
> 
> 赞同：0
> 
> 时间：2012-09-22T20:00:16.947
> 
> 标签：html, css

如果您单击此处：[http](http://www.ideagasms.net/index2) ://www.ideagasms.net/index2 ，您会看到导航菜单围绕横幅图像，就像一个框架。它是使用三个 div 以这种方式组合在一起的，其中两个是 css 旋转 90 度，绝对位置。当然，一旦您调整窗口大小，导航菜单就会中断。

必须有更好的方法来构建类似框架的菜单。一些建议或示例，我只需要有关如何构建这样的东西的想法。也许一个 jquery 解决方案或其他东西可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:02:36.623

`position: relative;`用（但没有任何属性）标记它们的父元素`top/left/bottom/right`，这样旋转的导航元素将定位在它们的父元素而不是窗口中。

但是，我认为您的导航概念很新颖，但从可用性的角度来看很糟糕（并且在视觉上也没有吸引力），因为人们无法轻松阅读旋转的英文文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:08:58.407

您可以将`#nav-left`和`#nav-right`位置更改为绝对，然后将它们居中`left: 50%`（就像您对 所做的那样），并使用边距更正它们的位置，`#headerwrapper`例如`margin: 0 auto 20px 122px`.`#nav-right`

# c# - finalize 中的 OpenGL PInvoke 调用导致访问冲突

> ID：12547257
> 
> 赞同：0
> 
> 时间：2012-09-22T20:00:30.807
> 
> 标签：c#, opengl, pinvoke

考虑以下代码：

```
using System.Runtime.InteropServices;

namespace GLTest
{
  class Program
  {
    [DllImport("opengl32.dll")]
    protected static extern uint glGetError();

    ~Program()
    {
      GLCall();
    }

    public void GLCall()
    {
      glGetError();
    }

    static void Main(string[] args)
    {
      var p = new Program();
      p.GLCall();
    }
  }
} 
```

当从 ~Program 启动 GLCall 时，它会导致 AccessViolationException。有什么线索吗？操作系统：Win7 Pro 64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:26:52.870

如果不创建任何 OpenGL 渲染上下文，就无法调用 OpenGL 函数。代码中有未定义的行为。

最佳做法是：

1.  创建一个 WindowsForm 应用程序。
2.  创建一个 OpenGL 渲染上下文。
3.  调用渲染或其他操作所需的 OpenGL 函数。

# jsf-2 - JSF2：将对象从列表（dataGrid）传递到命令按钮的操作方法

> ID：12547259
> 
> 赞同：2
> 
> 时间：2012-09-22T20:00:33.443
> 
> 标签：jsf-2

如何将对象传递给命令按钮的操作方法？我使用作为复合组件基础的数据表。复合组件应该提供交换添加到数据表行中的按钮的可能性。我以为我可以通过方面实现这一点，但是我在将对象从数据表列表传递到操作方法时遇到问题，既不是直接通过 EL 也不是通过属性操作侦听器。

看法：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:customer="http://java.sun.com/jsf/composite/components/customer">

<ui:composition template="/WEB-INF/templates/template.xhtml">

  <ui:define name="content">

    <h:form id="customerList">

      <customer:list list="#{customerControllerBean.list}">
        <f:facet name="rowButton">
          <h:commandButton value="#{msg.deleteButtonLabel}"
        action="#{customerControllerBean.delete(customer)}" />

          <h:commandButton value="#{msg.deleteButtonLabel}" action="#{customerControllerBean.deleteCustomer}">
        <f:setPropertyActionListener target="#{customerControllerBean.customer}" value="#{customer}"/>
          </h:commandButton>

          <h:button outcome="customerdetail.jsf?id=#{customer.id}"
        value="#{msg.editButtonLabel}" />
        </f:facet>
      </customer:list>

    </h:form>

  </ui:define>

</ui:composition>

</html> 
```

使用以下复合组件`customer:list`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
  <composite:attribute name="list" />
  <composite:facet name="rowButton" />
</composite:interface>

<composite:implementation>

  <p:dataTable id="customer" var="customer" value="#{cc.attrs.list}">
    ...
    <p:column>
      <composite:renderFacet name="rowButton" />
    </p:column>
  </p:dataTable>

</composite:implementation>
</html> 
```

支持bean：

```
@Named
@ConversationScoped
public class CustomerControllerBean implements Serializable {

    private static final long serialVersionUID = 6168621124401208753L;

    List<Customer> allCustomers = null;
    private Customer customer;

    // setters and getters ...

@PostConstruct
public void loadAllCustomers() {
    // load customers
}

public List<Customer> getList() {
    return allCustomers;
}

    public String delete(Customer customer) {
        // delete customer...
        return "deleted";
    }

    public String deleteCustomer() {
        // delete customer...
        return "deleted";
    } 
```

在这种情况下不能将对象传递给方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:51:52.107

由于您使用的是 Primefaces，您可以利用其数据表功能（如属性和事件）来设置模型。

***使用 Primefaces 的 DataTable 功能***

在您的控制器中，您可以指定模型和要对其执行的操作，在这种情况下，我使用 EJB 作为示例。

```
@ManagedBean
@ViewScoped
public class CustomerBean 
{
    private Customer model;

    @EJB
    private CustomerService cs;

    public void rowSelected()
    {
        // log or do stuff
    }

    public void delete()
    {
        cs.delete(model);
    }

    // getters & setters
} 
```

然后您在数据表中指定`selectionMode`和`selection`属性，并将`selection`其映射到您的模型。

```
<p:dataTable id="dtModel" var="row" value="#{bean.list}" selectionMode="single" selection="#{bean.model}">
    <p:ajax event="rowSelect" process="@this" listener="#{bean.rowSelected}" update=":content" />
</p:datatable> 
```

在这种情况下，我在标签中使用了一个侦听器，`p:ajax`但这只是一个示例，如果您希望在选择模型后对其进行某些操作，它可能很有用，但不需要设置您的模型。您的模型将使用 bean 的 setter 方法进行设置。

***将行作为参数传递***

在您的控制器中，您指定接收模型作为参数的方法。

```
@ManagedBean
@ViewScoped
public class CustomerBean 
{
    @EJB
    private CustomerService cs;

    public void delete(Customer candidate)
    {
        cs.delete(candidate);
    }

    // getters & setters
} 
```

在您的数据表中，您使用`row`属性中指定的对象`var`。

```
<p:dataTable id="dtModel" var="row" value="#{bean.list}">
    <p:column headerText="name">
        <h:outputText value="#{row.name}" />
    </p:column>
    <p:column headerText="delete">
        <p:commandButton value="delete" actionListener="#{bean.delete(row)}" />
    </p:column> 
</p:datatable> 
```

我更喜欢使用第一个示例，因为它允许您通过选择一行然后对其执行各种操作来设置模型，例如删除、编辑或查看其详细信息。您可以通过检查是否选择模型等来启用或禁用 UI 上的按钮...

***暗示***

您可以使用简单的 Facelets 模板来创建简单的 taglib，而不是复合组件。它们通常工作正常，唯一的缺点是您无法强制使用这些组件的接口。

您还可以查看 PrimeFaces[展示](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionSingle.jsf;jsessionid=fsaf9eivs74n1vopg189hl5f5)，其中有很多有用的示例。

我希望它有所帮助。

# editor - 在 TextMate 2 中选择一个单词的其他出现

> ID：12547267
> 
> 赞同：8
> 
> 时间：2012-09-22T20:02:19.267
> 
> 标签：editor, textmate, sublimetext2

如何在 TextMate 2 中选择单词的其他出现次数？我通过按 Ctrl+D（Windows、Linux）或 Cmd+D（macOS）在 Sublime Text 2/3 中执行此操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T00:11:01.153

## 更新的答案

如下所示，⌃W（选择单词）是当前版本中的快捷方式。

## 上一个答案

取自 r9302 的发行说明：

* * *

添加两个新的操作方法：

```
findNextAndModifySelection:
findPreviousAndModifySelection: 
```

这些查找查找剪贴板上的内容的下一个/上一个出现并选择它，但保留现有的选择。例如，可以将其添加到 Keybindings.dict：

```
"@d" = ( "copySelectionToFindPboard:", "findNextAndModifySelection:" ); 
```

在即将到来的构建中，此绑定可能是默认绑定，但绑定到 ⌃W（选择单词）并作用于 dyn.selection（因此仅当已选择单词时）。

* * *

您可以在以下位置了解有关键绑定文件的更多信息：

*   [http://www.hcs.harvard.edu/~jrus/site/cocoa-text.html](http://www.hcs.harvard.edu/~jrus/site/cocoa-text.html)
*   [http://blog.macromates.com/2006/multi-stroke-key-bindings/](http://blog.macromates.com/2006/multi-stroke-key-bindings/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:50:27.823

[这里](https://github.com/tbates/textmate.tmbundle/tree/master/Macros)有两个宏可以做你想做的事。

它们`^-W`与`shift-^-W`dyn.selection上下文相关*联。*

这允许`^-W`像往常一样选择当前单词，但是一旦存在选择，它将扩展选择（使用 TM2 生成多个选择的漂亮能力）。

我想艾伦很快就会默认添加类似或更好的东西，但在那之前，这是一个很棒的功能！

# php - PHP 将数据字符串格式化为 MySQL 日期格式

> ID：12547271
> 
> 赞同：0
> 
> 时间：2012-09-22T20:03:25.477
> 
> 标签：php, date

我有从 GUI 获得的这个字符串：09/22/2012 (mm/dd/yyyy)。

我想将其格式化为：

```
date("Y-m-d");  //(the MySQL DATE format ) 
```

这样做的正确 PHP 日期函数参数应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:32:04.887

您还可以执行以下操作来获取 MySQL 日期格式。

```
echo date('Y-m-d', strtotime('09/22/2012'));
// Output: 2012-09-22 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:13:55.640

你可以试试

```
$date = DateTime::createFromFormat("m/d/Y", "09/22/2012");
echo $date->format("Y-m-d"); 
```

输出

```
2012-09-22 
```

# unix - 打印在 Unix shell scipt 中具有/与第一个字段重复的所有行

> ID：12547276
> 
> 赞同：-1
> 
> 时间：2012-09-22T20:04:08.143
> 
> 标签：unix, printing, duplicates, field

我有一个分号分隔的数据列表：

```
TR=P561;dir=o;day=sa;TI=16:30;stn=south station;Line=worcester 
```

我需要获取此文件并仅打印出多次出现 TR 值的行。我想第一次出现并列出所有重复项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:28:13.413

如果您愿意对文件进行 2 次传递：

```
awk '!/TR=/ { next }         # Ignore lines that do not set TR
    {t=$0; sub( ".*TR=", "", t ); sub( ";.*", "", t ) } # Get TR value
    FNR == NR { a[t] +=1 }   # Count the number of times this value of TR seen
    FNR != NR && a[t] > 1    # print those lines whose TR value is seen more than once
' input-file input-file 
```

这使用了一个常见的 awk 习惯用法，即检查 FNR 以查看我们正在使用的文件。通过将输入文件作为参数传递两次，它成为一种在第一次运行时运行一个命令，在第二次运行时运行不同命令的方式。

# java - Java定序器使用所有内存？（7kb MIDI 文件）

> ID：12547277
> 
> 赞同：0
> 
> 时间：2012-09-22T20:04:07.910
> 
> 标签：java, memory, audio, sequence, midi

好的，我正在编写一个基本游戏并决定使用 MIDI 声音，因为它们与 MP3 相比很小。我还决定使用它，因为 Java 托管它自己的 API，而不必使用第三方包含。

但是，当我运行一个通常约为 7000 字节的 MIDI 文件时，我的应用程序可用内存被耗尽，以至于它经常会暂停/中断甚至抛​​出异常。

我的实现是；

```
private class Track {

    private Sequencer sequencer;
    private Sequence sequence;
    private int id;
    private boolean loop;

    public Track(final int id, final byte[] buffer, final boolean loop) throws IOException, InvalidMidiDataException, MidiUnavailableException
    {
        this.id = id;
        this.sequence = MidiSystem.getSequence(new ByteArrayInputStream(buffer));
        this.sequencer = MidiSystem.getSequencer();
        this.loop = loop;
    }

    public synchronized boolean destroy()
    {
        this.id = -1;
        this.sequencer = null;
        this.sequence = null;
        this.loop = false;
        return this.sequencer == null;
    }

    public synchronized boolean play() throws InvalidMidiDataException, MidiUnavailableException
    {
        return play(loop);
    }

    public synchronized boolean play(boolean loop) throws InvalidMidiDataException, MidiUnavailableException
    {
        if(sequencer != null && sequencer.isRunning())
            sequencer.stop();
        sequencer.open();
        sequencer.setSequence(sequence);
        sequencer.setLoopCount(Integer.MAX_VALUE);
        sequencer.start();
        return sequencer.isRunning();
    }

    public synchronized boolean stop()
    {
        if(sequencer != null && sequencer.isRunning())
            sequencer.stop();
        return sequencer != null && !sequencer.isRunning();
    }

    public synchronized boolean playing()
    {
        return sequencer != null && sequencer.isRunning();
    }

} 
```

目前，我从应用程序中删除了所有与图形渲染相关的内容，以检查那里没有泄漏，但这导致了问题。

对于一个 7000 字节的文件，它实际上就使用了超过 70MB 的 Ram，这可能吗？

要检查有多少可用内存，我只是在绘画；

```
graphics.drawString("Free: " + Runtime.getRuntime().freeMemory(), 10, 35); 
```

感谢您的帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:51:33.860

在查看它之后，我发现在停止同步器后需要“关闭”方法来停止使用内存。

# ios - 如何检查 .a 库？

> ID：12547279
> 
> 赞同：9
> 
> 时间：2012-09-22T20:04:23.917
> 
> 标签：ios, xcode

我得到了一个文档很差的 .a 库。有没有办法检查公共类型、方法和属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T20:11:36.487

有几种选择——我更喜欢的是 otool；

从其手册页中获取可能的选项：

> -o 显示 Objective-C 运行时系统使用的 __OBJC 段的内容。

例子：

> otool -o libRaptureXML_universal.a

```
[...]
    contents of (__DATA,__objc_classlist) section
    00006fe0 0x65d4
               isa 0x65e8
        superclass 0x0
             cache 0x0
            vtable 0x0
              data 0x6fb8 (struct class_ro_t *)
                        flags 0x0
                instanceStart 4
                 instanceSize 12
                   ivarLayout 0x0
                         name 0x6b84 RXMLElement
                  baseMethods 0x6e08 (struct method_list_t *)
               entsize 12
                 count 27
                  name 0x66bb initFromXMLString:encoding:
                 types 0x6b90 @16@0:4@8I12
                   imp 0x1
                  name 0x66e3 initFromXMLFile:
                 types 0x6b9d @12@0:4@8
                   imp 0xd5
                  name 0x66f4 initFromXMLFile:fileExtension:
                 types 0x6ba7 @16@0:4@8@12
                   imp 0x209
                  name 0x6713 initFromURL:
                 types 0x6b9d @12@0:4@8
                   imp 0x335
                  name 0x6720 initFromXMLData:
                 types 0x6b9d @12@0:4@8
                   imp 0x411
                  name 0x6731 initFromXMLNode:
    [...] 
```

# php - 显示空表单字段的消息？

> ID：12547281
> 
> 赞同：0
> 
> 时间：2012-09-22T20:04:26.923
> 
> 标签：php

我正在尝试在我的网站上获取 optin 表单以不发送空字段。

我还在表单字段中预定义了文本（例如“在此处输入您的姓名”），单击时会消失。我也不希望表单发送预定义的文本数据。

用 PHP 解决这个问题的最佳方法是什么？

HTML：

```
<div class="form">
<h2>Get An Appointment: <font size="3"><font color="#6E5769">Fill in the form below now, and I'll call you to setup your next dental appointment...</font></font></h2>
<p id="feedback"><?php echo $feedback; ?></p>
<form action="contact.php" method="post"/>
<p class="name">
<input type="text" name="name" id="name" style="text-align:center;" onClick="this.value='';" value="Enter your name"/> 
```

PHP：

```
<?php

$to = 'test@mywebsite.com'; $subject = 'New Patient';

$name = $_POST['name']; $phone = $_POST['phone'];

$body = <<<EMAIL

Hi, my name is $name, and phone number is $phone.

EMAIL;

$header = 'From: test@mywebsite.com';

if($_POST){ if($name != '' && $phone != ''){ mail($to, $subject, $body, $header); }else{ $feedback = 'Fill out all the fields'; } } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:28:50.877

收集`POST`数组中的所有信息，然后使用删除空值`array_filter`

添加了示例[http://codepad.org/ZtR6Eh93](http://codepad.org/ZtR6Eh93)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:23:56.677

您可以通过检查服务器端来防止这种情况：

```
if($_POST){ if($name != '' && $phone != '' && $name!='Enter your name' && $email!='Enter your email'){ mail($to, $subject, $body, $header); }else{ $feedback = 'Fill out all the fields'; } } ?> 
```

但我建议您将错误处理改进为如下所示：

```
if ($_POST) {
    $err = array();
    if ($name == '' || $name == 'Enter your name') $err[] = 'Name is required';
    if ($email == '' || $email == 'Enter your email') $err[] = 'Email is required';
    if (empty($err)) {
        mail($to, $subject, $body, $header);
    } else {
        $feedback = 'Fill out all fields. Errors: '.implode(', ',$err);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:24:23.027

将 onsubmit 处理程序添加到您的表单，为您不希望发送的所有输入设置`disabled`属性`true`

**更新：**

这并没有放松在应用程序的 PHP 端检查所有输入参数的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:28:31.957

我建议您在 $_POST 变量上使用 empty()，最好在所需的表单字段上使用（不仅仅是 $_POST）。例如：

```
if(!empty($_POST['name'])) {
  // Name field was posted
} 
```

这与 isset 不同，因为如果字段类似于 "" 或 NULL，isset 将返回 true。而 !empty 只接受非空/非空值。因此，为什么在这种情况下空函数是更好的选择。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T20:11:28.097

继承人试试这个：

```
<?php
$to = 'test@mywebsite.com';
$subject = 'New Patient';

$header = 'From: test@mywebsite.com';

$feedback = null;

if($_SERVER['REQUEST_METHOD'] == 'POST'){
    $name = (!empty($_POST['name'])?$_POST['name']:null);
    $phone = (!empty($_POST['phone'])?$_POST['phone']:null);

    $body = <<<EMAIL
Hi, my name is $name, and phone number is $phone.
EMAIL;

    if($name !== null && $phone !== null){
        mail($to, $subject, $body, $header);
        $feedback = 'Message Sent';
    }else{
        $feedback = 'Fill out all the fields';
    }
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T20:14:31.590

首先，您应该使用 JavaScript在**客户端进行验证。**

```
<? 

$name = $phone = $status= '';

if(isset($_POST['submit'])){

    $name = (!empty($_POST['name'])?$_POST['name']:null);
    $phone = (!empty($_POST['phone'])?$_POST['phone']:null);

    if($name !== null && $phone !== null){
       mail($to, $subject, $body, $header);
       $name = $phone = '';
       $status = 'Message Sent';
    }
    else
       $status= 'Fill out all the fields';

}      

<? if(!empty($status)): ?><p class="error"><?=$status?></p><? endif; ?>

<input type="text" name="name" value="<?=$name?>"/>
<input type="text" name="phone" value="<?=$phone?>"/>
<input type="submit" name="submit" value="send"/> 
```

# json - JSON更新不起作用

> ID：12547282
> 
> 赞同：0
> 
> 时间：2012-09-22T20:04:58.433
> 
> 标签：json, scala, solr

我尝试使用处理程序将其插入鞋底`update/json`：

```
[{"id":"abc","text":"you have been served"}] 
```

但是 Solr 给了我这个难以解决的问题。我正在使用 Scala + Dispatch HTTP，这对我来说是新的。我对 Solr 有点经验，但此错误消息无济于事。这个消息到底是什么？

我正在使用最新版本 3.6，使用 start.jar（用于测试）并禁用延迟加载`update/json`。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 404 NOT_FOUND</title>
</head>
<body>
<h2>HTTP ERROR: 404</h2>
<p>Problem accessing /update/json. Reason:
<pre>    NOT_FOUND</pre></p>
<hr /><i><small>Powered by Jetty://</small></i>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:37:13.240

代替

```
localhost:8983/solr/update... 
```

我很不小心

```
localhost:8983/update... 
```

我的错。

# andengine - 我怎样才能消除身体的弹性？（和引擎）

> ID：12547286
> 
> 赞同：1
> 
> 时间：2012-09-22T20:05:24.260
> 
> 标签：andengine, elasticity

我角色的身体一直在弹跳。

```
body = PhysicsFactory.createCircleBody(mPhysicsWorld, this, BodyType.DynamicBody, PhysicsFactory.createFixtureDef(1, 1, 1));
mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(this, body, true, true)); 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:38:37.673

替换为：`PhysicsFactory.createFixtureDef(1, 0, 0)`，使弹性为 0。

# java - ExecSQL() 需要定义

> ID：12547291
> 
> 赞同：1
> 
> 时间：2012-09-22T20:06:20.337
> 
> 标签：java, android

我的`execSQL()`命令出错了。Eclipse 说我需要在我的`DBHelper`类中定义它。我该怎么做呢？我是使用 SQL 数据库的新手，它是命令。

这是我的课程代码；

```
package com.example.gymbuddy;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;

public class Benchmark extends Activity {

DBHelper db = new DBHelper(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_benchmark);

}

public void onStart() {
    super.onStart();

    findViewById(R.id.button5).setOnClickListener(new handleButton5());

}

class handleButton5 implements OnClickListener {
    public void onClick(View v) {

        EditText editText1 = (EditText)findViewById(R.id.editText1);
        String sWeight = editText1.getText().toString();
        final double dWeight = Double.parseDouble(sWeight);

        EditText editText2 = (EditText)findViewById(R.id.editText2);
        String sPush = editText2.getText().toString();
        final double dPush = Double.parseDouble(sPush);

        EditText editText3 = (EditText)findViewById(R.id.editText3);
        String sSit = editText3.getText().toString();
        final double dSit = Double.parseDouble(sSit);

        EditText editText4 = (EditText)findViewById(R.id.editText4);
        String sPull = editText4.getText().toString();
        final double dPull = Double.parseDouble(sPull);

        double dBench = (((Math.floor(dWeight*.0664))*10)-10)+dPush;
        double dFlies = (Math.floor(((Math.floor(dBench*.6)/10)*10)));
        double dLats = ((Math.floor(dWeight*.05))*10)+dPull;
        double dCurls = ((Math.ceil(((dWeight*dPull)*.025)/10))*10);
        if(dCurls<20){
            dCurls = 20;
        }
        double dClose = ((Math.floor(dBench*.065))*10);
        double dRaise = 15;
        double dDcurls = Math.floor(dCurls*.4);
        double dDraise = 10;
        double dLegExt = dWeight*.5;
        double dPress = dWeight-20;
        double dSquat = (Math.floor((Math.floor(dWeight/10))*.6))*10;
        double dTricepExt = dDcurls+10;
        double dTricepKick = dDcurls;
        double dCalf = (Math.floor(dWeight*.035))*10;
        double dDead = (Math.floor(dWeight*.13))*10;

        int iBench = (int)dBench;
        int iFlies = (int)dFlies;
        int iLats = (int)dLats;
        int iCurls = (int)dCurls;
        int iClose = (int)dClose;
        int iRaise = (int)dRaise;
        int iDcurls = (int)dDcurls;
        int iDraise = (int)dDraise;
        int iLegExt = (int)dLegExt;
        int iPress = (int)dPress;
        int iSquat = (int)dSquat;
        int iTricepExt = (int)dTricepExt;
        int iTricepKick = (int)dTricepKick;
        int iCalf = (int)dCalf;
        int iDead = (int)dDead;
        int iSit = (int)dSit;

        db.execSQL("INSERT INTO BenchmarkData (COL_VAL)" +
                "VALUES (iBench)");

        TextView TextView1 = (TextView)findViewById(R.id.textView1);
        TextView1.setText(String.valueOf("Bench Press "+ iBench +" lbs"));

        TextView TextView2 = (TextView)findViewById(R.id.textView2);
        TextView2.setText(String.valueOf("Bar Curls "+ iCurls +" lbs"));

        TextView TextView3 = (TextView)findViewById(R.id.textView3);
        TextView3.setText(String.valueOf("Close Grip "+ iClose +" lbs"));

        TextView TextView4 = (TextView)findViewById(R.id.textView4);
        TextView4.setText(String.valueOf("Deltoid Raise "+ iRaise +" lbs"));

        TextView TextView5 = (TextView)findViewById(R.id.textView5);
        TextView5.setText(String.valueOf("Dumbbell Curls "+ iDcurls +" lbs"));

        TextView TextView6 = (TextView)findViewById(R.id.textView6);
        TextView6.setText(String.valueOf("Dumbbell Raise "+ iDraise +" lbs"));

        TextView TextView7 = (TextView)findViewById(R.id.textView7);
        TextView7.setText(String.valueOf("Lat Pull Down "+ iLats +" lbs"));

        TextView TextView8 = (TextView)findViewById(R.id.textView8);
        TextView8.setText(String.valueOf("Leg Extension "+ iLegExt +" lbs"));

        TextView TextView9 = (TextView)findViewById(R.id.textView9);
        TextView9.setText(String.valueOf("Leg Press "+ iPress +" lbs"));

        TextView TextView10 = (TextView)findViewById(R.id.textView10);
        TextView10.setText(String.valueOf("Pec Flies "+ iFlies +" lbs"));

        TextView TextView11 = (TextView)findViewById(R.id.textView11);
        TextView11.setText(String.valueOf("Squats "+ iSquat +" lbs"));

        TextView TextView12 = (TextView)findViewById(R.id.textView12);
        TextView12.setText(String.valueOf("Tricep Extension "+ iTricepExt +" lbs"));

        TextView TextView13 = (TextView)findViewById(R.id.textView13);
        TextView13.setText(String.valueOf("Tricep Kickbacks "+ iTricepKick +" lbs"));

        TextView TextView14 = (TextView)findViewById(R.id.textView14);
        TextView14.setText(String.valueOf("Calf Raises "+ iCalf +" lbs"));

        TextView TextView15 = (TextView)findViewById(R.id.textView15);
        TextView15.setText(String.valueOf("Dead Lift "+ iDead +" lbs"));

        TextView TextView16 = (TextView)findViewById(R.id.textView16);
        TextView16.setText(String.valueOf("Sit Ups "+ iSit));

        }
    }

} 
```

这是我的 DBHelper 课程；

```
package com.example.gymbuddy;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHelper extends SQLiteOpenHelper{

//Declaring Database and Table
protected final static String MY_DATABASE_NAME = "GymBuddy.db";
protected static final int iVersion = 1;

//Defining Table
protected static final String BenchmarkData = "dataBenchmark";
protected static final String KEY_ID = "id";
protected static final String COL_VAL = "value";

//To refer to the Database
public SQLiteDatabase db;

public DBHelper(Context context) {
    super(context, MY_DATABASE_NAME, null, iVersion);
    this.db = this.getWritableDatabase();   
}

public void onCreate(SQLiteDatabase db) {
    String CREATE_QUERY = "CREATE TABLE " + BenchmarkData + "("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
            + COL_VAL + " TEXT NOT NULL, " + ");";
    db.execSQL(CREATE_QUERY);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:28:11.777

您的第一个困惑点是您的`BenchMark` `Activity`...

```
DBHelper db = new DBHelper(this); 
```

用作实例`db`的名称`DBHelper`不是一个好主意 - 通常`db`应该直接用于数据库对象而不是数据库助手。给它一个更具代表性的名称，这样您就不会将助手与数据库混淆。

您的问题的实际原因是这一行（在`Activity`）...

```
db.execSQL("INSERT INTO BenchmarkData (COL_VAL)" +
        "VALUES (iBench)"); 
```

因为`db`是`DBHelper`(which extends `SQLiteOpenHelper`) 的一个实例并且`execSQL(...)`是`SQLiteDatabase`.

**编辑：**一个可行的快速修复方法是重命名`DBHelper`，然后获取数据库实例，然后调用`execSQL(...)`. 例子...

```
// Rename db to dbh (for example) to avoid confusion
DBHelper dbh = new DBHelper(this);
...
dbh.getWritableDatabase().execSQL(...); 
```

# ajax - 如果 ios6 safari 正在缓存 ajax 调用，它会缓存密码吗？安全风险？

> ID：12547292
> 
> 赞同：0
> 
> 时间：2012-09-22T20:06:35.170
> 
> 标签：ajax, caching, safari, ios6

继线程 [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-ios6-safari-caching-ajax-results)

如果 io6 safari 正在缓存非唯一 ajax 调用的结果，那么它也必须缓存调用本身。那么这是否意味着它在登录情况下缓存用户名和密码，从而构成安全风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:08:42.360

简短版本：如果您通过网络以明文形式发送用户名和密码，那么您已经打开了一个巨大的安全漏洞。

长版本：浏览器将基于 URI 进行缓存，因此如果您将用户/密码作为 GET 变量发送，那么是的，它会缓存，是的，这是一个安全风险。但是，即使浏览器没有缓存这个，你仍然做错了什么。第三方只需查看 HTTP 标头即可了解用户/密码是什么。

如果您将此作为 POST 发送，则很难找到用户名/密码。浏览器不会缓存请求，因为 URL 始终相同。但是，仍然可以读取请求的内容并找到用户/通行证。

为了最安全，请使用 HTTPS 并通过 POST 传递值。整个 HTTP 请求都被加密，包括标头。但是，浏览器仍会缓存 URL，因此使用 GET 变量仍然不是一个好主意。

jQuery 文档中关于将 POST 与 ajax 结合使用的示例：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

# mysql - MySQL REGEXP 匹配两个空格或什么都不匹配

> ID：12547293
> 
> 赞同：0
> 
> 时间：2012-09-22T20:06:37.103
> 
> 标签：mysql, regex

```
Stringy: 5/5
Stringy : 3 / 5
3 / 5  Stringy 
```

我正在尝试匹配字符串上的两个前导空格，或者如果找不到则忽略它。我试过了：

```
SELECT *
FROM testtable
WHERE `file` REGEXP '(  )Stringy(: | : )' 
```

虽然这不会返回任何行

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:13:40.280

您需要转义在正则表达式模式中具有特殊含义的字符，例如括号`(`、`)`.

带有两个前导空格的示例：

```
SELECT "  Stringy: 3/5" REGEXP '[ ]{2}Stringy(: | : )';
## 1
SELECT "  Stringy : 3 / 5" REGEXP '[ ]{2}Stringy(: | : )';
## 1 
```

最多两个前导空格：

```
SELECT "Stringy : 3 / 5" REGEXP '[ ]{0,2}Stringy(: | : )';
## 1 
```

另见

*   [关于正则表达式的 MYSQL 文档](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)
*   [转义 SQL REGEXP 的特殊字符](http://davidchambersdesign.com/escape-special-characters-for-sql-regexp/)

# c# - 打印高质量的winform？

> ID：12547294
> 
> 赞同：1
> 
> 时间：2012-09-22T20:06:40.483
> 
> 标签：c#, visual-studio-2010, printing

我是编写代码的新手，但正在学习 C# 并正在为我的商店制作一个小账单制作程序。我需要打印表格，这是我的账单。通过在互联网上搜索，我找到了这段代码：

```
printForm1.Print(this, PrintForm.PrintOption.ClientAreaOnly); 
```

我的账单表格有两张图片和一张`gridviewbox`。此代码可以打印账单，但 .xps 文件的质量很差 - 甚至文本打印不清晰。

如何提高表格的打印质量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:20:24.357

是的，除非你的手臂真的很长，否则这看起来不太好。问题是打印机的像素分辨率比显示器高得多。一台体面的打印机具有 600 dpi（每英寸点数）的分辨率。默认情况下，显示器为 96 dpi，尽管在坚持了几十年后终于有所改善。

因此，要以您的方式打印表单，您有两个不愉快的选择。您可以打印表格，使屏幕上的一个像素相当于纸上的一个像素。这为您提供了原始形式的非常清晰的图像，但它大约是一张邮票的大小。或者您将表格打印在纸上和屏幕上一样大，您现在看到的情况。这会将显示器上的单个像素变成纸上的 6 x 6 斑点。结果看起来很粗糙，尤其是文本看起来很糟糕。

一个解决方案是在屏幕上绘制 6 倍大的表格并打印出来。但是那不起作用，您不能使表单大于屏幕。唯一真正的解决方案是在打印机上画 6 倍大。这需要 PrintDocument 类。还有一堆代码在它的 PrintPage 事件处理程序中进行绘图。您无法哄骗控件为您执行此操作，因此这是一项繁重的工作。

或者使用报告生成器。它们的存在就是为了解决这个问题。谷歌“.net 报告生成器”开始购物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T21:30:21.320

以下是向打印机渲染大图像的基本示例：

```
Bitmap bitmapToPrint;
    public void printImage()
    {
        bitmapToPrint = new Bitmap(3400,4400);
        Font font = new Font(FontFamily.GenericSansSerif, 120, FontStyle.Regular);
        string alphabet = "abcdefghijklmnopqrstuvwxyz";
        Graphics graphics = Graphics.FromImage(bitmapToPrint);
        graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
        graphics.DrawString(alphabet, font, System.Drawing.Brushes.Black, 0, 0);
        graphics.DrawString(alphabet, font, System.Drawing.Brushes.Black, 0, 1000);
        graphics.DrawString(alphabet, font, System.Drawing.Brushes.Black, 0, 2000);
        graphics.DrawString(alphabet, font, System.Drawing.Brushes.Black, 0, 3000);

        PrintDocument pd = new PrintDocument();
        pd.PrinterSettings.PrinterName = "Microsoft XPS Document Writer";
        pd.PrinterSettings.PrintToFile = true;
        pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
        pd.Print();
    }
    void pd_PrintPage(object sender, PrintPageEventArgs e)
    {
        e.Graphics.DrawImage(bitmapToPrint, new RectangleF(0.0f, 0.0f, 850.0f, 1100.0f));
    } 
```

# c# - 在 Windows 8 应用程序中从生成的缓冲区播放声音

> ID：12547297
> 
> 赞同：6
> 
> 时间：2012-09-22T20:07:02.707
> 
> 标签：c#, directx, windows-runtime, winrt-xaml, sharpdx

我正在将一些 C# Windows Phone 7 应用程序移植到 Windows 8。

手机应用程序使用 XNA [SoundEffect](http://msdn.microsoft.com/en-us/library/dd282429.aspx)从缓冲区播放任意声音。在最简单的情况下，我只需创建所需持续时间和频率的正弦波。持续时间和频率都可能有很大差异，所以我不想依赖 MediaElements（除非有办法改变基本文件的频率，但这只会帮助我生成单一频率）。

**WinRT 中的 XNA SoundEffectInstance 等价物是什么？**

我假设我需要为此使用 DirectX，但我不确定如何从其他 C#/XAML 应用程序中解决这个问题。我看过[SharpDX](http://sharpdx.org/)，但它似乎没有我认为我需要使用的 DirectSound、SecondaryBuffer、SecondaryBuffer 类。

我在上面做了一些假设。可能是我正在寻找错误的类，或者有一种完全独立的方法可以从 Windows 8 应用程序生成任意声音。

* * *

我找到[了一个使用 SharpDX 中的 XAudio2 通过 AudioBuffer 播放 wav 文件的示例](http://sharpdx.org/forum/7-documentation/39-audio-samples#65)。这似乎很有希望，我只需要用我生成的音频缓冲区替换本机文件流。

> PM> 安装包SharpDX
> 
> PM> Install-Package SharpDX.XAudio2

```
 public void PlaySound()
    {
        XAudio2 xaudio;
        MasteringVoice masteringVoice;

        xaudio = new XAudio2();
        masteringVoice = new MasteringVoice(xaudio);

        var nativefilestream = new NativeFileStream(
            @"Assets\SpeechOn.wav",
            NativeFileMode.Open,
            NativeFileAccess.Read,
            NativeFileShare.Read);

        var soundstream = new SoundStream(nativefilestream);

        var waveFormat = soundstream.Format;
        var buffer = new AudioBuffer
        {
            Stream = soundstream.ToDataStream(),
            AudioBytes = (int)soundstream.Length,
            Flags = BufferFlags.EndOfStream
        };

        var sourceVoice = new SourceVoice(xaudio, waveFormat, true);

        // There is also support for shifting the frequency.
        sourceVoice.SetFrequencyRatio(0.5f);

        sourceVoice.SubmitSourceBuffer(buffer, soundstream.DecodedPacketsInfo);

        sourceVoice.Start();
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T22:34:58.233

在 Win8RT 中生成动态声音的唯一方法是使用 XAudio2，因此您应该能够使用 SharpDX.XAudio2 来实现。

而不是使用 NativeFileStream，只需实例化一个 DataStream 直接提供您的托管缓冲区（或者您可以使用非托管缓冲区或让 DataStream 为您实例化一个）。代码将是这样的：

```
// Initialization phase, keep this buffer during the life of your application
// Allocate 10s at 44.1Khz of stereo 16bit signals
var myBufferOfSamples = new short[44100 * 10 * 2];

// Create a DataStream with pinned managed buffer
var dataStream = DataStream.Create(myBufferOfSamples, true, true);

var buffer = new AudioBuffer
        {
            Stream = dataStream,
            AudioBytes = (int)dataStream.Length,
            Flags = BufferFlags.EndOfStream
        };

//...
// Fill myBufferOfSamples
//...

// PCM 44.1Khz stereo 16 bit format
var waveFormat = new WaveFormat();

XAudio2 xaudio = new XAudio2();
MasteringVoice masteringVoice = new MasteringVoice(xaudio);
var sourceVoice = new SourceVoice(xaudio, waveFormat, true);

// Submit the buffer
sourceVoice.SubmitSourceBuffer(buffer, null);

// Start playing
sourceVoice.Start(); 
```

用正弦波填充缓冲区的示例方法：

```
 private void FillBuffer(short[] buffer, int sampleRate, double frequency)
    {
        double totalTime = 0;

        for (int i = 0; i < buffer.Length - 1; i += 2)
        {
            double time = (double)totalTime / (double)sampleRate;
            short currentSample = (short)(Math.Sin(2 * Math.PI * frequency * time) * (double)short.MaxValue);

            buffer[i] = currentSample; //(short)(currentSample & 0xFF);
            buffer[i + 1] = currentSample; //(short)(currentSample >> 8);

            totalTime += 2;
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:21:22.893

您还可以使用 WASAPI 在 WinRT 中播放动态生成的声音缓冲区。（xaudio2 不是唯一的解决方案）。

我在这里用 VB 编写了示例代码（C# 基本相同）： http: [//www.codeproject.com/Articles/460145/Recording-and-playing-PCM-audio-on-Windows-8-VB](http://www.codeproject.com/Articles/460145/Recording-and-playing-PCM-audio-on-Windows-8-VB)

我相信 NAudio 的家伙正计划将我的示例代码翻译+合并到 NAudio 中，以获得支持 Win8 的版本，这样会更容易使用。

# proxy - 查尔斯（或替代） - 将请求重新路由到另一个 URL

> ID：12547303
> 
> 赞同：0
> 
> 时间：2012-09-22T20:07:31.247
> 
> 标签：proxy, charles-proxy

我正在使用 Charles 拦截一些流量，我非常想要的是，如果我能让 Charles 接受请求，而不是让它继续以愉快的方式到达原始目标 URL，让它发送所有信息到另一个 URL。

所以在查尔斯我会有一条规则说如果 URL 匹配 xyz.com/abc?example=[wildcard] 那么它会将该请求重新路由到 abc.com/whatever

我对查尔斯很陌生。我发现了如何进行 Map Remote，但我只想在满足特定规则时进行映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:03:47.163

在 Map Remote Settings 的 Edit Mapping 对话框中，添加 Path 和 Query 规范。在您的情况下，请尝试：

```
Path: /abc
Query: ?example= 
```

# android - 为列表视图添加“断路器”

> ID：12547306
> 
> 赞同：0
> 
> 时间：2012-09-22T20:07:43.827
> 
> 标签：android

我想将某些单元格与其他单元格分开，例如按日期。是否可以？像这样的东西：

```
cell content1
cell content2
breaker 
cell content1
cell content2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:09:25.163

看看这个：

[http://code.google.com/p/android-amazing-listview/](http://code.google.com/p/android-amazing-listview/)

如果您想完全自己完成，可以使用以下方法将列表的适配器设置为与多个视图一起使用：

获取项目视图类型（整数）

getViewTypeCount()

在这里阅读更多：http: [//developer.android.com/reference/android/widget/Adapter.html](http://developer.android.com/reference/android/widget/Adapter.html)

# php - .htaccess 对其他文件的所有请求

> ID：12547308
> 
> 赞同：0
> 
> 时间：2012-09-22T20:07:58.267
> 
> 标签：php, apache, .htaccess, rewrite

目前我有以下 .htaccess 文件

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ public/index.php/$1 [L]
</IfModule> 
```

哪个工作得非常完美。

[它将诸如http://domain.com/something/](http://domain.com/something/)之类的URL重新写入 public/index.php 文件，就像一个魅力，除非它是一个文件，就像它应该的那样。

但是[http://domain.com](http://domain.com)（没有附加任何路径）（根目录中没有 index.php，所以它现在给出 404）没有被重写，我怎样才能改变这个 .htaccess 所以它重写这个网址也是？

索引文件位于 public/index.php 我希望它通过使用 .htaccess 加载该文件

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:25:22.673

我相信要重写根目录，您可以简单地按照以下方式进行操作：

```
RewriteRule ^$ location/of/root/file [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:02:28.453

你可以试试：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ public/index.php 
```

RewriteBase 应该在规则模式前面加上一个斜杠，强制它匹配根路径。

未经测试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:16:49.270

你那里的东西是受WordPress启发的？这是一个坏主意，因为它告诉 Apache 在重定向之前始终检查路径是文件还是目录。

我有这样的东西

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^.*/(css|images|javascript)(.*) [NC]
RewriteCond %{REQUEST_URI} !\.(swf|ico|php|xml)$ [NC]
RewriteCond %{REQUEST_URI} !robots.txt
RewriteRule (.*) index.php?page=$1&%{QUERY_STRING} [PT] 
```

第一个条件限制此重定向在特定文件夹中工作。秒为特定的扩展。你可以猜到第三个做了什么:)

# mysql - mysql 5.5 utf-8 排序规则 utf8_unicode_ci, pymysql

> ID：12547309
> 
> 赞同：0
> 
> 时间：2012-09-22T20:07:59.807
> 
> 标签：mysql, utf-8, pymysql

我在 os x 上遇到了 mysql 5.5 的问题。我正在开发一个多语言项目并使用 MyISAM 表。默认字符集是 utf-8 和默认排序规则 utf8_unicode_ci。

意大利语和德语很好，但西班牙语不是。我正在使用 python 来操作数据，pymysql 驱动程序带有 utf-8 的字符集选项和 unicode true。

几乎所有特定的西班牙语字母都是一团糟。

从 python 外壳：

```
>>>r
>>>['Blas P\xc3\xa9rez Gonz\xc3\xa1lez, 4']
>>>print[0]
>>>Blas Pérez González, 4
after saving it to database and fetching it again:
>>>r
>>>(u'Blas P\xc3\xa9rez Gonz\xc3\xa1lez, 4')
>>>print r[0]
>>>Blas PÃ©rez GonzÃ¡lez, 4 
```

我真的很困惑，它显然似乎是同一个 unicode 字符串！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:36:50.517

更好地使用 java 风格的 unicode 转义，比如

```
u'\\u0e4f\\u032f\\u0361\\u0e4f'.decode('unicode-escape') 
```

见[类似问题](https://stackoverflow.com/questions/2828284/conversion-of-strings-like-uxxxx-in-python)。

这可确保您在字符串中有 unicode。

然后是实际问题：在 mysql 中尝试`describe the_table`。仍然在[列定义](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)中可以设置字符集。试试看你的桌子是否还好。

* * *

***用于测试：***存储`u'Blas P\\u00e9rez Gonz\\u00e1lez'.decode('unicode-escape')`在数据库中。然后你就知道存储了正确的 unicode 字符串。如果数据库有正确的 db/table/field 定义，那么只有检索而不是存储可能有问题。

# android - 将文本选择更改为 rtl 而不是默认的 ltr

> ID：12547314
> 
> 赞同：4
> 
> 时间：2012-09-22T20:08:23.310
> 
> 标签：android, webview

我正在使用`WebView`安卓系统。如您所知，当我们要选择`WebView`包含两行或多行的文本时，它会从**`left to right`**如何强制`WebView`选择文本中选择文本**`right to left`**？

示例（粗体双引号是选择开始，下一个是选择结束）

Stack Overflow 是一个免费的编程问答**`"`**网站。免费提问，免费回答问题，免费阅读，免费索引**`"`**，用普通的旧 HTML 构建，主页上没有虚假的 rot13 文本，没有骗人的谷歌伪装策略，没有销售人员，没有 JavaScript 窗口掉在前面的答案要求 12.95 美元离开。如果您想收集业力并赢得宝贵的天赋，您可以注册，该天赋会出现在您的名字旁边，否则，它只是免费的。而且速度很快。非常非常快。

我想选择文本为：

`Stack Overflow is a programming Q & A, built with plain old HTML, no`

但默认选择文本如下：

`site that's free. Free to ask questions, free to answer questions, free to read, free to index`

有人可以帮我这样做吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:48:02.057

根据我的理解，选择方向应该封装在 webview 中（开发人员无法访问），而是由正在查看的 HTML 的内容决定。使用该`<bdo dir="rtl">`标签，我可以让 JellyBean 浏览器根据需要进行选择，但 Ice Cream Sandwich 仍然选择从左到右。对选择方向的支持可能是最近添加的。

# javascript - 自定义启动画面不显示

> ID：12547319
> 
> 赞同：0
> 
> 时间：2012-09-22T20:08:46.497
> 
> 标签：javascript, html, silverlight, silverlight-4.0, splash-screen

我有带有自定义闪屏的 Silverlight 应用程序。飞溅的代码被内联到 HTML 页面。当我在本地机器上测试它时，一切正常。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >

<head>
    <title>COST_web</title>
    <style type="text/css">
    html, body {
        height: 100%;
        overflow: auto;
    }
    body {
        padding: 0;
        margin: 0;
    }
    #silverlightControlHost {
        height: 100%;
        text-align:center;
    }
    </style>

    <!-- Define XAML content. -->
<script type="text/xaml" id="xamlContent"><?xml version="1.0"?>
<Grid x:Name="LayoutRoot"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      d:DesignHeight="514"
      d:DesignWidth="560">
    <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="Auto" />
  </Grid.RowDefinitions>
    <Grid Grid.Row="1"
        Margin="0,0,0,50">

    <Rectangle Height="5"
               Margin="0,10"
               HorizontalAlignment="Stretch">
      <Rectangle.Fill>
        <LinearGradientBrush EndPoint="0.5,1"
                             StartPoint="0.5,0">
          <GradientStop Color="#FFBBD2E8"
                        Offset="0" />
        </LinearGradientBrush>
      </Rectangle.Fill>
    </Rectangle>

    <Rectangle Height="8"
               HorizontalAlignment="Stretch">
      <Rectangle.Fill>
        <LinearGradientBrush EndPoint="0.5,1"
                             StartPoint="0.5,0">
          <GradientStop Color="#FF6BAAE8"
                        Offset="0" />
          <GradientStop Color="#FF216AB1"
                        Offset="1" />
        </LinearGradientBrush>
      </Rectangle.Fill>
      <Rectangle.RenderTransform>
        <TransformGroup>
          <ScaleTransform ScaleX="1"
                          ScaleY="1"
                          x:Name="scaleTransform" />
          <SkewTransform AngleX="0"
                         AngleY="0" />
          <RotateTransform Angle="0" />
          <TranslateTransform X="0"
                              Y="0"
                              x:Name="translateTransform" />
        </TransformGroup>
      </Rectangle.RenderTransform>
    </Rectangle>

  </Grid>
    <TextBlock x:Name="textBlock1" TextWrapping="Wrap" FontSize="60" FontFamily="Comic Sans MS" Foreground="#FFFF8200" Text="Web od COST project is Loading..." Opacity="1" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="69,126,69,62" Width="422"></TextBlock>
    <Grid.Background>
        <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
            <GradientStop Color="#CC32D833" Offset="0.093" />
            <GradientStop Color="#FFF8F83D" Offset="0.703" />
        </LinearGradientBrush>
    </Grid.Background>
</Grid>
</script>

<!-- Define JS content. -->
<script type="text/javascript">
 function onSourceDownloadProgressChanged(sender, eventArgs)
 {
     sender.findName("textBlock1").Opacity = eventArgs.progress.toString();
    sender.findName("scaleTransform").ScaleX = eventArgs.progress;
 }
  </script>

 <!--   <script type="text/javascript" src="splashscreen.js"></script>-->
    <script type="text/javascript" src="Silverlight.js"></script>
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }

            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server" style="height:100%">
    <div id="silverlightControlHost">
        <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
          <param name="source" value="ClientBin/COST_web.xap"/>
          <param name="onError" value="onSilverlightError" />
          <param name="background" value="white" />
          <param name="minRuntimeVersion" value="4.0.50826.0" />
          <param name="autoUpgrade" value="true" />
          <!--<param name="splashscreensource" value="SplashScreen.xaml">-->
          <param name="splashscreensource" value="#xamlContent">
          <param name="onSourceDownloadProgressChanged" value="onSourceDownloadProgressChanged">

          <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50826.0" style="text-decoration:none">
              <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
          </a>
        </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div>
    </form>
</body>
</html> 
```

当我发布它并加载到 Web 服务器时出现问题。当我想访问服务器（IIS 7）上的页面时，没有启动画面 - 在加载应用程序之前只有白页。

有谁知道，为什么会这样 - 在本地一切正常，但在部署到服务器后，没有自定义启动画面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:00:07.697

我认为如果您将 SplashScreen.xaml 手册复制到服务器并像这样设置“splashscreensource”参数，这是可行的

```
<param name="splashscreensource" value="SplashScreen.xaml"> 
```

# gwt - 如何修改 Image 对象的位置？

> ID：12547320
> 
> 赞同：1
> 
> 时间：2012-09-22T20:08:47.737
> 
> 标签：gwt

在 GWT 中，如何设置 Image 对象添加到 Panel 后的位置？似乎没有设置图像顶部和左侧位置的方法。我们是否必须从面板中删除图像并使用所需的 left 和 top 值再次添加它？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:38:37.740

如果你设置绝对位置，你可以

```
int top = myPanel.getAbsoluteTop();
int left = myPanel.getAbsoluteLeft();
myImage.getElement().getStyle().setTop(top + 100, Unit.PX);
myImage.getElement().getStyle().setLeft(left + 100, Unit.PX); 
```

或者，您可以在图像上设置“位置：相对”样式。然后你可以在图像上设置“top”和“left”，它会相对于它的父元素定位自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:33:18.480

从您提出问题的方式来看，我假设您正在尝试使用 GWT，就像使用 Java 中的 Swing 或 SWT 一样。这不是 GWT 的使用方式，并且在大多数情况下会导致非常糟糕的代码和非常糟糕的项目。

GWT 不是隐藏浏览器。所以如果你想改变一个元素的位置，你主要是用 CSS 来做的。

只需将两个 css 类添加到您的项目中

```
.before{
  position: relative;
  top: 0px;
  left: 0px;
}

.after{
  position: relative;
  top: 100px;
  left: 100px;
} 
```

首先给你的形象第一类：

```
image.addStyleName("before"); 
```

然后：

```
image.addStyleName("after"); 
```

如果你真的需要动态地做这个（一些计算的大小）你可以设置元素的样式属性：

```
image.getElement().getStyle().setLeft(value, Unit.PX); 
image.getElement().getStyle().setTop(value, Unit.PX); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:19:45.680

我所做的只是：

```
absolutePanel.setWidgetPosition(myImage, newXvalue, newYvalue); 
```

假设“myImage”是absolutePanel 的孩子。

# iphone - 在 iOS 6 上嵌入 youtube 视频和自动播放不起作用

> ID：12547324
> 
> 赞同：5
> 
> 时间：2012-09-22T20:09:18.293
> 
> 标签：iphone, video, youtube, ios6

我正在尝试嵌入 youtube 视频并在我的应用程序中自动播放。该代码无法在 iOS6 上运行，但它可以在较旧的 iOS 5 上完美运行。

我这样做：

```
-(IBAction)playVideo:(id)sender {

myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
myWebView.delegate = self;
[myWebView setAllowsInlineMediaPlayback:YES];
myWebView.mediaPlaybackRequiresUserAction=NO;

[myWebView loadHTMLString:[NSString stringWithFormat:@"<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"300\" height=\"300\"></embed>", @"http://www.youtube.com/watch?v=TbsXUJITa40"] baseURL:nil];

}

- (UIButton *)findButtonInView:(UIView *)view {
UIButton *button = nil;

if ([view isMemberOfClass:[UIButton class]]) {
    return (UIButton *)view;
}

if (view.subviews && [view.subviews count] > 0) {
    for (UIView *subview in view.subviews) {
        button = [self findButtonInView:subview];
        if (button) return button;
    }
}
return button;
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {

UIButton *b = [self findButtonInView:webView];
[b sendActionsForControlEvents:UIControlEventTouchUpInside];
} 
```

所以 - 当 webview 被加载时，它会自动找到 uibutton 并且视频开始。我不明白，为什么在 iOS 6 中这种方法不再起作用。它加载了视频，但什么也没有出现...

任何人都可以帮助我吗？我要疯了，试图解决它...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:26:51.463

我希望现在给出答案还为时不晚，但这在 iOS 中根本不可能。就像苹果在其文档中所说的那样：[https ://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html)

> 为了防止用户自费通过蜂窝网络进行未经请求的下载，嵌入式媒体无法在 iOS 上的 Safari 中自动播放——用户始终会启动播放。一旦开始播放，iPhone 或 iPod touch 上会自动提供控制器，但对于 iPad，您必须设置控件属性或使用 JavaScript 提供控制器。

请注意，上面链接的文档一般适用于 Safari，而不是特定于 iOS。对我来说，这在第一次阅读时令人困惑，直到我注意到这一点。

所以不幸的是，目前这不适用于iOS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T23:52:02.160

您需要使用 JS 命令。[这个链接](https://developers.google.com/youtube/iframe_api_reference#Example_Video_Player_Constructors)应该有帮助。

# iphone - 表格视图单元格的高度动态变化

> ID：12547328
> 
> 赞同：-4
> 
> 时间：2012-09-22T20:09:49.883
> 
> 标签：iphone, ios, xcode

如果 tableview 中的 textview 然后告诉我 editForRowAtIndexPath 方法的代码## Heading ## * *UITableViewCell 中的 UITextView：动态更新单元格高度*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:53:42.313

要动态更改单元格高度，您可以使用此函数，并添加 @protocol UITableViewDelegate

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 90;
} 
```

# c# - 在 Windows 8 中执行自动更改连接的显示器

> ID：12547329
> 
> 赞同：7
> 
> 时间：2012-09-22T20:10:02.760
> 
> 标签：c#, batch-file, windows-8, hardware, nvidia

**精简版**

如何自动更改多个显示设置？NVIDIA，3 台显示器（2 台 DVI 和 1 台 HDMI），GPU 仅支持 2 台有源显示器。

* * *

**长版**

所以我有一个`NVIDIA GeForce GTX 560 Ti`可以同时运行两个显示器。它有两个**DVI**连接和一个**HDMI**。我经常更换使用我的两台台式机显示器，并使用**HDMI**仅连接一台台式机显示器和我的电视。

我想使用批处理脚本或其他程序自动执行更改，而不是使用 Windows 控制面板（控制面板\所有控制面板项\显示\屏幕分辨率）或 NVIDIA 控制面板。

我找到了一些关于使用 " `rundll32.exe`, `NvCpl.dll`, `dtcfg`...." 等的文档。这根本不起作用。我在 NVIDIA PDF 文档中使用的任何参数都没有任何反应。有没有人有一个有效的例子？我也在 Windows 7 上试过这个。

我曾尝试使用**WMI**查看监视器是否存在，但它只显示两个活动监视器。它不显示第三个非活动监视器。

我已经尝试过`EnumDisplayDevices`User32.dll **，**但这只会返回两个活动监视器。

我怎样才能得到这个工作？

我想让它在 C# 中工作，所以我也可以用它来改变音频设备:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:11:14.033

虽然这可能不符合您的要求，但我在使用笔记本电脑为多台显示器供电时确实遇到了这个问题，最终我使用了[UltraMon](http://www.realtimesoft.com/ultramon/tour/display_profiles.asp)中的显示配置文件功能。我从未编写过[脚本](http://www.realtimesoft.com/ultramon/tour/scripting.asp)或使用过[他们的 SDK](http://www.realtimesoft.com/ultramon/developers.asp)，但我知道他们确实支持自动化和 SDK 访问。

注意：我与 UltraMon 没有任何关系，我只是使用了他们的产品，发现它可以满足我的需求。

# php - 未设置 ajax 调用后发布未设置（使用 jQuery）

> ID：12547331
> 
> 赞同：0
> 
> 时间：2012-09-22T20:10:08.353
> 
> 标签：php, jquery, ajax, post

我有这个 AJAX 调用：

```
$.ajax({
    url: '../php/functions/area_id_to_table_name.php',
    type: 'POST',
    dataType: 'json',
    scriptCharset: "utf-8",
    data: { areaOfWorkId: userAreaOfWorkArray }
}).always(nextStep);

function nextStep(a, textStatus, b) {
    if (textStatus === 'success') {
        // success
        alert(a);
    } else {
        // failure
        alert('Failed: ' + b);
    }
} 
```

和这个 PHP 代码（URL）：

```
<?php
require_once 'connection.php';
$link = conenct('localhost', 'root', '', 'w_db');

mysql_query( "SET NAMES utf8" );
mysql_query( "SET CHARACTER SET utf8" );
mysql_set_charset('utf8', $link);

Class AreaInfo{
    public $areaName;
    public $areaId;
    public $areaTableName;
}
print_r($_POST['areaOfWorkId']);
$areaOfWorkArray = $_POST['areaOfWorkId'];

$areaInfoArray = Array();
foreach ($areaOfWorkArray as $key){
    $key = mysql_real_escape_string($key);
    if ($key == 0) continue;
    $tmpObj = new AreaInfo();
    $tmpObj->areaId = $key;
    $query = mysql_query("SELECT areaOfWork, tableName FROM area_of_work WHERE id = '$key'");
    $query = mysql_fetch_assoc($query);
    $tmpObj->areaName = $query['areaOfWork'];
    $tmpObj->areaTableName = $query['tableName'];
    array_push($areaInfoArray, $tmpObj);    
}

print_r($areaInfoArray);
echo json_encode($areaInfoArray);
?> 
```

我收到此错误的警报：

> 失败：SyntaxError：JSON.parse：意外字符

在 Chrome 开发人员工具上，似乎一切正常。当我打开 PHP 页面时，我看到以下几行：

> 注意：未定义索引：第 15 行 C:\xampp\htdocs\job-skills\php\functions\area_id_to_table_name.php 中的 areaOfWorkId
> 
> 注意：未定义索引：第 16 行 C:\xampp\htdocs\job-skills\php\functions\area_id_to_table_name.php 中的 areaOfWorkId
> 
> 警告：第 19 行 C:\xampp\htdocs\job-skills\php\functions\area_id_to_table_name.php 中为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:12:01.153

当你调用时`print_r`，你在响应中放入了垃圾（我的意思不是 JSON）。浏览器无法将其解释为 JSON。

# iphone - 如何制作 iPhone 应用程序并排除 iPhone 5？

> ID：12547337
> 
> 赞同：3
> 
> 时间：2012-09-22T20:10:53.417
> 
> 标签：iphone, ios, screen, iphone-5

我正在查看 iPhone 5 规格，发现屏幕分辨率为 640x1132 左右，这会破坏我的一些手册+故事板界面布局。**我正在徘徊如何制作一个应用程序，以便它可以在 iPhone 5 上以 640x960 屏幕（带有黑条）显示，或者完全将我的应用程序从销售到 iPhone 5 中排除**，因为我不想担心界面损坏。这对现有应用程序可行吗？

谢谢您的意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T20:14:31.337

`Default-568h@2x.png`除非您在应用程序中包含图像，否则它将无法以完整的 iPhone 5 分辨率运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T20:30:32.587

在 2012 年 9 月 12 日的 Apple 主题演讲中，他们表示应用商店中的所有当前应用程序都可以在 iPhone 5 上运行，使用顶部和底部的黑色信箱没有问题。

删除信箱的方法是提供`Default-568h@2x.png`图像，就像提到的黄昏。如果它不存在，设备将运行应用程序将以 640x960 运行。

# c++ - 为什么我收到错误'A ' 不是 'S 的可访问基础 ' 对于基类的基类？

> ID：12547340
> 
> 赞同：20
> 
> 时间：2012-09-22T20:11:20.140
> 
> 标签：c++, templates, c++11

我试图`A<F>::f()`从类中调用类函数`S`，但是当我实例化一个`S`对象（`S<int>s`）并调用它的`f`成员函数（`s.f()`）时出现以下错误：

> source.cpp：在“ `int S<F>::f() [with F = int]`”的实例化中：
> source.cpp:30:21：从这里需要
> source.cpp:22:25：错误：“ `A<int>`”不是“”的可访问`S<int>`基础

请注意，当我`return A<F>::f();`在类的声明中`S`替换为`return C<A, F>::f();`. 但我想知道为什么我不能以其他方式做到这一点......

```
#include <iostream>

template <typename T> class A {
   public:
      int f();
};

template <typename T> int A<T>::f() {
   return sizeof(T);
}

template <template <typename> class E, typename D> class C : E<D> {
   public:
      int f() {
         return E<D>::f();
      }
};

template <typename F> class S : C<A, F> {
   public:
      int f() {
         return A<F>::f();
      }
};

int main() {

   S<int>s;

   std::cout << s.f();

} 
```

任何帮助表示赞赏，如果您需要进一步澄清，请随时发表评论。

**更新**

由于这个问题已经解决，我想我应该发布实际工作的代码：

```
#include <iostream>

template <typename T> class A {
   public:
      int f();
};

template <typename T> int A<T>::f() {
   return sizeof(T);
}

template <template <typename> class E, typename D> class C : public E<D> {
   public:
      int f() {
         return E<D>::f();
      }
};

class S : public C<A, int> {};

int main() {

   S s;

   std::cout << s.f(); // 4

} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-22T20:17:01.837

```
template <typename F> class S : C<A, F> 
                               ^ 
```

您没有指定`public`继承，因此它默认为`private`，从而使基类无法访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T20:15:34.270

我认为这只是使用`public`类继承的问题。尝试：

```
template <template<class> class E, typename D> class C : public E<D> {
   public:
      int f() {
         return E<D>::f();
      }
};

template <typename F> class S : public C<A, F> {
   public:
      int f() {
         return A<F>::f();
      }
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T20:17:25.697

当您尝试调用您`A`的版本时，`f()`请使用该符号`A<F>::f()`。如果`A<F>`有一个`static`成员函数`f()`，这个函数确实会被调用。但是，`A<F>`只有一个非`static`成员函数`f()`，即调用被隐式转换为`this->A<F>::f()`。但是，`S<F>`没有 a`A<F>`作为可访问的基础（它是 的`private`基础`C<A, F>`）。从它的外观你想委托给`C<A, F>`s 版本`f()`：

```
C<A, F>::f(); 
```

这应该可以工作，因为`C<A, F>`它是可访问的基础，或者通过将其设为or`S<int>`来使`E<D>`基础`C`可访问。`public``protected`

# css - 引导排版

> ID：12547344
> 
> 赞同：0
> 
> 时间：2012-09-22T20:11:30.093
> 
> 标签：css, twitter-bootstrap, typography

默认情况下，Bootstrap 具有`@baseFontSize: 14px`和`@baseLineHeight: 20px`. 我打算使用 12px 作为我的`@baseFontSize`. 我应该将@baseLineHeight 减少到 17px 以进行正确的排版和输入渲染吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:40:11.137

排版对于行高没有固定的规则。选择行高时应注意字体系列、行长、有无变音符号、下标和上标等。

Twitter Bootstrap 在相对较少的情况下默认使用 Helvetica Neue 或 Helvetica，否则使用 Arial。对于这样的字体，相对较大的行高，如 20px 用于 4px 字体（大约是字体大小的 1.429 倍）大多是可以的。在狭窄的列中，它可能有点过分。将 17px 用于 12px 意味着几乎相同的比例（大约是字体大小的 1.417 倍）。

当然，再多的行高调整也无法解决 12px 字体大小对很多人来说难以辨认的问题。

# mysql - MySQL LIMIT 不拆分组

> ID：12547350
> 
> 赞同：0
> 
> 时间：2012-09-22T20:11:58.977
> 
> 标签：mysql

我有一个奇怪的问题。我的应用程序、**地区**和**学校**中有 2 个表。学校有一个列，它位于哪个区域。

我想做一个 SELECT 语句来将这些表与 LIMIT 连接在一起。但是 LIMIT 不能拆分一组 REGION-SCHOOLS。

**例子**

地区

```
ID  name of region
1   Moravia
2   Czech 
```

学校

```
ID  region   school
1      1     VSB
2      1     SPS Kratochvilova
3      1     T.G. Masaryka
4      2     ZS Praha
5      2     CVUT 
```

现在，当我使用 JOIN 将这些表连接在一起时，我得到了

```
region   school
Moravia  VSB
Moravia  SPS Kratochvilova
Moravia  T.G. Masaryka
Czech    ZS Praha
Czech    CVUT 
```

但是当我使用 LIMIT 4 进行分页时，我在第一页上有部分区域捷克，在第二页上有下一部分。

是否有一些解决方案如何使用 LIMIT 不拆分这些组？

就我而言，一个地区最多有 5 所学校，有时可能有 6 所，但很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:25:00.217

编辑：这应该可以解决问题：

```
select schools.name, 
    regions.name
from schools
join (
        select id, name 
        from regions 
        order by regions.name
        limit 0,2) as regions
    on regions.id = schools.region 
```

# url - 同一个域中具有相同标题和/或元描述的两个页面

> ID：12547352
> 
> 赞同：0
> 
> 时间：2012-09-22T20:12:15.283
> 
> 标签：url, seo

使用具有相同标题和/或元描述的两个页面对谷歌排名有任何惩罚吗？如果是这样，罚款是多少？

两个页面都在同一个域中。一页 URL 是`example.com/abcd`，另一页 URL 是`example.com/uvwxyz`。两个页面的 H1 标头相同，并且都具有相同的元描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:44:02.670

我不认为谷歌会*惩罚*这个。

想想 YouTube（归 Google 所有）：`title`元素的内容遵循以下模式：`[user-contributed video title] - YouTube`. -由用户提供的视频描述组成`meta`。`description`

现在，可能有成千上万的视频具有相同的标题（“我可爱的猫”），其中一些甚至可能有相同的描述（“看看我可爱的猫”）。

但是，如果一个网站由**许多**（或什至只有）具有相同`title`和`meta`-的页面组成`description`，它会赌掉获得更好排名的可能性。但是当所有这些页面真的有不同的内容时，它就不会受到*惩罚*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:29:24.790

标题、元描述是搜索引擎用来识别页面主题并在搜索结果中排名的信号之一。标题的权重在搜索排名中很高，标题/描述与 URL 一起显示在搜索结果中。

*   正如您所提到的，两个页面的内容是不同的，而不是通过重复的标题/描述，您失去了一些针对不同关键字进行搜索排名的机会。
*   具有相同的标题/描述使用户和搜索引擎都难以识别和区分它们。
*   即使没有负面影响，但您正在失去有助于提高搜索排名的重要信号（标题）。

> 一些关于标题的参考阅读：[http ://www.searchenabler.com/blog/title-tag-optimization-tips-for-seo/](http://www.searchenabler.com/blog/title-tag-optimization-tips-for-seo/)
> 
> & 重复内容：[http ://www.searchenabler.com/blog/learn-seo-duplicate-content/](http://www.searchenabler.com/blog/learn-seo-duplicate-content/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T02:06:49.160

本身没有惩罚，只是不是最佳实践。为什么会有重复的元信息？每一页的信息都一样吗？有必要吗？

# json - Node+Mongo Native：使用排序生成请求

> ID：12547355
> 
> 赞同：0
> 
> 时间：2012-09-22T20:12:52.120
> 
> 标签：json, node.js, mongodb, sorting, request

我正在为 MongoDB 创建分步请求。一切正常，但 Mongo 无法识别排序选项。我做错了什么？

```
var request = {}
    request['show'] = 1;
    request['category'] = category;
    switch (sort) {
        case "new_first":
            request['sort'] = "[['time_added', -1]]";
            break;
        case "old_first":
            request['sort'] = "[['time_added', 1]]";
            break;
    }
collection.find(request, function(err, posts) {
.... 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:53:04.940

找到了解决方案：

```
sort_query = JSON.parse('{"sort":[["time_added",-1]]}') 
```

有效！

# php - 使用 xpath 和 DOMDocument 检索元素

> ID：12547356
> 
> 赞同：9
> 
> 时间：2012-09-22T20:13:21.163
> 
> 标签：php, xpath, domdocument

我在下面的 html 代码中有一个广告列表。我需要的是一个 PHP 循环来获取每个广告的以下元素：

1.  广告 URL（`<a>`标签的 href 属性）
2.  广告图片 URL（`<img>`标签的 src 属性）
3.  广告标题（`<div class="title">`标签的 html 内容）

```
<div class="ads">
    <a href="http://path/to/ad/1">
        <div class="ad">
            <div class="image">
                <div class="wrapper">
                    <img src="http://path/to/ad/1/image.jpg">
                </div>
            </div>
            <div class="detail">
                <div class="title">Ad #1</div>
            </div>
        </div>
    </a>
    <a href="http://path/to/ad/2">
        <div class="ad">
            <div class="image">
                <div class="wrapper">
                    <img src="http://path/to/ad/2/image.jpg">
                </div>
            </div>
            <div class="detail">
                <div class="title">Ad #2</div>
            </div>
        </div>
    </a>
</div> 
```

我设法使用下面的 PHP 代码获取广告 URL。

```
$d = new DOMDocument();
$d->loadHTML($ads); // the variable $ads contains the HTML code above
$xpath = new DOMXPath($d);
$ls_ads = $xpath->query('//a');

foreach ($ls_ads as $ad) {
    $ad_url = $ad->getAttribute('href');
    print("AD URL : $ad_url");
} 
```

但我没有设法获得其他 2 个元素（图像 url 和标题）。任何的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T06:34:55.787

对于其他元素，您只需执行相同操作：

```
foreach ($ls_ads as $ad) {
    $ad_url = $ad->getAttribute('href');
    print("AD URL : $ad_url");
    $ad_Doc = new DOMDocument();
    $ad_Doc->documentElement->appendChild($ad_Doc->importNode($ad));
    $xpath = new DOMXPath($ad_Doc);
    $img_src = $xpath->query("//img[@src]");
    $title = $xpath->query("//div[@class='title']");
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T12:27:49.560

我设法用这段代码得到了我需要的东西（基于 Khue Vu 的代码）：

```
$d = new DOMDocument();
$d->loadHTML($ads); // the variable $ads contains the HTML code above
$xpath = new DOMXPath($d);
$ls_ads = $xpath->query('//a');

foreach ($ls_ads as $ad) {
    // get ad url
    $ad_url = $ad->getAttribute('href');

    // set current ad object as new DOMDocument object so we can parse it
    $ad_Doc = new DOMDocument();
    $cloned = $ad->cloneNode(TRUE);
    $ad_Doc->appendChild($ad_Doc->importNode($cloned, True));
    $xpath = new DOMXPath($ad_Doc);

    // get ad title
    $ad_title_tag = $xpath->query("//div[@class='title']");
    $ad_title = trim($ad_title_tag->item(0)->nodeValue);

    // get ad image
    $ad_image_tag = $xpath->query("//img/@src");
    $ad_image = $ad_image_tag->item(0)->nodeValue;
} 
```

# homebrew - 我如何用自制啤酒指向一个较旧的小桶？

> ID：12547363
> 
> 赞同：1
> 
> 时间：2012-09-22T20:14:05.523
> 
> 标签：homebrew

我有以下内容：

```
kamil:~/Sites/sc-1.9.3@sc: (develop)$ brew info mongo
mongodb: stable 2.2.0-x86_64
http://www.mongodb.org/
/usr/local/Cellar/mongodb/2.0.1-x86_64 (18 files, 120M)
/usr/local/Cellar/mongodb/2.2.0-x86_64 (20 files, 170M) * 
```

我想再次运行 2.0.1，但一切都指向最新版本：

```
 kamilski81:~/Sites:ruby-1.9.3:$ ll /usr/local/bin/mongod
    kamilski81  wheel  41 Sep 22 13:55 /usr/local/bin/mongod -> ../Cellar/mongodb/2.2.0-x86_64/bin/mongod 
```

有没有一种雄辩的方式来指向旧版本的 mongo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:21:50.757

使用`brew switch`：

```
$ brew switch mongo 2.0.1 
```

# android - 如何以编程方式删除单选按钮项目

> ID：12547364
> 
> 赞同：5
> 
> 时间：2012-09-22T20:14:23.813
> 
> 标签：android, button, dynamic, radio

在 xml 布局中，我有 RadioGroup、Button1、Button2。当用户单击 button1 时，会在 RadioGroup 中以编程方式创建几个单选按钮（单选按钮的总数可能不同（pocet = 要创建的单选按钮的数量）。

```
 final RadioButton[] rb = new RadioButton[pocet];        
    RadioGroup rg = (RadioGroup) findViewById(R.id.MyRadioGroup);

    radiobuttonCount++;
    for(int i=0; i<pocet; i++){
        rb[i]  = new RadioButton(this);
        rb[i].setText("Radio Button " + radiobuttonCount);
        rb[i].setId(radiobuttonCount+i);            
        rb[i].setBackgroundResource(R.drawable.button_green);            
        rg.addView(rb[i]);            
    } 
```

我尝试做的是：当用户从 RadioGroup 中选择 xy 项目时，我会将选定的值传递给 textview 并删除所有单选按钮。

出于删除目的，我使用：

```
 public void onCheckedChanged(RadioGroup rGroup, int checkedId)
        {
            RadioButton checkedRadioButton = (RadioButton)rGroup.findViewById(checkedId);
            boolean isChecked = checkedRadioButton.isChecked();
            if (isChecked)
            {
                RadioGroup rg = (RadioGroup)    findViewById(R.id.MyRadioGroup);                                        

                for (int i=0; i< rg.getChildCount(); i++){
                    rg.removeViewAt(i);
                }
            } 
```

问题是这有时效果很好，但有时第一个单选按钮仍未删除。

PS稍后我想添加button2，它将为radiogroup提供不同的项目和不同的单选按钮数量。这就是为什么我需要在用户进行选择后删除所有单选按钮。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-15T18:28:23.560

它真的很简单，你只需这样做：

```
rg.removeAllViews(); 
```

因为我使用了 for 循环，但它没有删除所有 RadioButtons。玩得开心 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T20:25:21.403

我的第一个猜测是这部分代码不好：

```
 for (int i=0; i< rg.getChildCount(); i++){
        rg.removeViewAt(i);
    } 
```

您不能在同时移除孩子的同时越过一个视图的孩子（rg.getChildCount() 将在运行期间更改）

# html - 在左侧对齐表格不适用于 CSS，但适用于 HTML

> ID：12547368
> 
> 赞同：1
> 
> 时间：2012-09-22T20:14:42.870
> 
> 标签：html, css

当我想将表格的内联样式更改为 CSS 中定义的样式时，我遇到了一个奇怪的问题。我的目标是将此表与页面左侧对齐。

正确地向左对齐： HTML：

```
<table class="box-table" style="margin-left: 0px">
<tr>
     <td>table content</td>
</tr>
</table> 
```

CSS：

```
table.box-table
{
    width: auto;
    text-align: left;
} 
```

不向左对齐（与页面中心对齐） HTML：

```
<table class="box-table">
<tr>
     <td>table content</td>
</tr>
</table> 
```

CSS：

```
table.box-table
{
    width: auto;
    text-align: left;
    margin-left: 0px;
} 
```

我所做的唯一更改是将 margin-left 属性从 HTML 移动到 CSS 代码。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:53:05.330

问题是这个类在我的 CSS 中被声明了 2 次，关于 margin-left 属性的值有冲突。

# vim - 如何在 Vim 中使用相同的文本一次又一次地有效地粘贴多行？

> ID：12547369
> 
> 赞同：10
> 
> 时间：2012-09-22T20:15:12.003
> 
> 标签：vim

## 客观的

拉出一行并用它来覆盖它后面的一些行。

## 假设

在这种情况下，最好*手动*选择要应用替换的行。换句话说，*不需要*自动查找和替换。

## 比喻

将此过程视为从一行文本创建一个“标记”并遍历项目列表（每个项目是“标记”行之后的一行文本）并决定是否应使用该行的内容覆盖该行“邮票”与否（在前一种情况下，当然用“邮票”代替该行）。

触发用戳记内容替换光标下的行的最后一步应该尽可能简单；最好像按 **`.`**（*重复上次更改*）或 **`@@`**（*执行宏寄存器的内容 `@`*）一样简单。

## 问题

当然，简单的工作流程如下。

1.  将光标定位在要复制的行上（使用移动命令）。
2.  进入逐行可视模式（通过`V` 命令）。
3.  复制选定的文本（使用`y` 命令）。
4.  手动将光标定位到要替换的行上（使用移动命令）。
5.  再次进入可视模式以选择要替换的文本（使用`V` 命令）。
6.  粘贴在选择上（使用`p` 命令）。

但是，当必须多次更换时，这种方法不起作用。具体来说，替换步骤 6 中的文本会覆盖（未命名的）寄存器，该寄存器包含最初复制并打算用作“标记”的行。

## 我试过的

我曾尝试使用`"_y`拉动或删除到`_` 寄存器中，以避免丢失邮票的内容，但我正在寻找最终可以快速舒适地键入的东西，因为我手动浏览列表并在我的位置应用替换觉得合适。

### 我不想*使用*的东西

如果可以的话，我宁愿*不*为此使用宏或“重映射”。

## 说明性示例文件

请参阅下面的示例起始文件，然后是所需的最终阶段，以获得进一步的清晰度。

### 样本文件，起始条件

在这个阶段，我选择`blueberry`并使其成为我的“印章”。

```
blueberry

apple
banana
coconut
apple
banana
coconut
apple
banana
coconut 
```

### 示例文件，所需的最终状态

在列表中移动之后，我应用了一些替换，在一些行上“加盖”，使它们与“印记”`blueberry`行相同。

```
blueberry

apple
banana
blueberry
apple
banana
coconut
apple
banana
blueberry 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:31:27.983

为了使您的工作流程按预期工作，您需要从以前的 yank register 粘贴`"0`，而不是从默认 register 粘贴。

因此，使用`Vy`（或`yy`，相同）像以前一样拉出第一行，然后将光标放在要替换的行上，然后执行

```
V"0p 
```

这会将当前行替换为先前被拉出的文本，但不会覆盖被拉出的文本。我希望我理解正确！

**编辑 1：使用宏重复**

我很惊讶这个操作使用 是不可重复的`.`，但这大概是由于使用了可视模式。要使用宏重复操作，请执行以下操作：

```
qqV"0pq 
```

然后可以按`@q`或重复宏`@@`。

**编辑2：重复使用`.`**

`.`这是通过不使用视觉模式使其可重复使用的尝试。拉动*印章*线并移动光标后，执行以下操作：

```
"_S<c-r>0<delete> 
```

它使用插入模式`<c-r>`命令插入寄存器的内容`0`。请注意，这`<delete>`是必要的，因为戳记行包含回车符。如果没有（即使用`y$`而不是猛拉`yy`）`<delete>`可以省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:48:11.320

一个非常简单的解决方案：只需将此脚本放在您的 .vimrc 中，然后通过键入 ,,（两个逗号）来关闭删除键的“缓冲区覆盖”副作用行为以进入“无副作用”模式。

在这种模式下，您的工作流程现在与您描述的完全一样：拉出您喜欢的任何内容，然后自由重复地选择、粘贴和删除——您的缓冲区始终保持不变。如果您希望恢复 vim 的正常缓冲区更改行为，然后再次键入 ,。

该脚本是这里接受的答案：

[删除时vim切换缓冲区覆盖行为](https://stackoverflow.com/questions/12625722/vim-toggling-buffer-overwrite-behavior-when-deleting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:22:16.317

如果没有至少一点点“重新映射”，我认为你不会达到你的目标。

我已经使用这个“很长时间”了：

```
vnoremap <leader>p "_dP 
```

`p`并且`P`仍然像往常一样工作，`,p`当我想稍后重复相同的粘贴时，我只是简单地点击了一个视觉选择。您还可以映射单个功能键以使整个操作更快。

另外，你知道`c`换人的标志吗？

```
:%s/coconut/blueberry/c 
```

将要求您确认每场比赛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T09:24:56.810

这里的许多答案概述了一般键或命令。我已经将它们变成了我的[ReplaceWithRegister 插件](http://www.vim.org/scripts/script.php?script_id=2703)，它还可以处理许多极端情况，并允许通过`.`命令快速重复。我也经常使用您描述的*创建标记和替换*技术，并且发现我的脚本不可或缺。如果您不喜欢它，插件页面还包含指向替代插件的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T05:57:12.860

可以借助 Ex 命令来实现上述工作流程。

对于单个替换，拉出“stamp”行（使用`yy`、`Vy`、 `:y`或其他方式），然后重复使用 `:put`and`:delete`命令的组合：

```
:pu|-d_ 
```

与任何其他 Ex 命令一样，可以使用 `@:`快捷方式轻松重复此命令（请参阅 参考资料`:help @:`） — 除非同时发出另一个 Ex 命令（在这种情况下，将重复该命令）。

当然，您也可以将上述 Ex 命令记录为宏并以这种方式调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T00:24:29.773

从要复制的行开头的光标开始：

1.  `y$`拉整行（不包括换行符）。
2.  `j`并`k`前进到要替换的下一行（根据需要重复）
3.  用您抽出的文本替换该行
    *   `C<c-r>0<esc>0` *（第一次）*
    *   `.` *（随后的时间）*
4.  如果有更多行需要替换，请转到 2。

在每一步之后，光标将保持在第 0 列。

# matlab - 从矩阵列中减去相应的向量值

> ID：12547373
> 
> 赞同：4
> 
> 时间：2012-09-22T20:15:52.070
> 
> 标签：matlab, matrix, octave

我有一个矩阵'x'和一个行向量'v'；行向量中的元素数与矩阵中的列数相同。是否有任何预定义的功能来执行以下操作？

```
for c = 1 : columns(x)
    for r = 1 : rows(x)
        x(r, c) -= v(c);
    end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T20:21:55.567

```
bsxfun(@minus,x,v) 
```

这是一个八度的演示：

```
octave>  x = [1 2 3;2 3 4]
x =

   1   2   3
   2   3   4

octave> v = [2 0 1]
v =

   2   0   1

octave> 
octave> z=bsxfun(@minus,x,v)
z =

  -1   2   2
   0   3   3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T21:01:27.880

或者，您可以复制您的向量并直接从矩阵中减去它

```
z = x-repmat(v, size(x, 1), 1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T07:07:26.823

如果您使用的是 Octave 3.6.0 或更高版本，则不必使用，`bsxfun`因为 Octave 执行自动[广播](http://www.gnu.org/software/octave/doc/interpreter/Broadcasting.html#Broadcasting)（请注意，这与实际使用相同`bsxfun`，只是更直观）。例如：

```
octave>  x = [1 2 3; 2 3 4]
x =

   1   2   3
   2   3   4

octave> v = [2 0 1]
v =

   2   0   1

octave> z = x - v
z =

  -1   2   2
   0   3   3 
```

# java - 多线程与 ThreadPoolExecutor

> ID：12547381
> 
> 赞同：11
> 
> 时间：2012-09-22T20:17:08.913
> 
> 标签：java, multithreading, java.util.concurrent, threadpoolexecutor

我在我编写的许多应用程序中都使用了多线程。在阅读更多内容时，我遇到了`ThreadPoolExecutors`. 我无法区分这两种情况。

我仍然理解的是，当我有一个任务我想将一个任务分成多个小任务以利用 CPU 并更快地完成工作时，我应该使用多线程。`ThreadPoolExecutor`当我有一组任务并且每个任务可以相互独立运行时使用。

如果我错了，请纠正我。谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-22T20:29:01.620

A`ThreadPoolExecutor`只是一个高级 API，它使您能够在多个线程中运行任务，而不必处理低级 Thread API。因此，区分多线程和 ThreadPoolExecutor 并没有真正的意义。

s有很多种风格`ThreadPoolExecutor`，但大多数都允许多个线程并行运行。通常，您会使用[Executor Service](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html)并使用`Executors`工厂。

例如，a`ExecutorService executor = Executors.newFixedThreadPool(10);`将在 10 个线程中运行您提交的任务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T21:19:22.423

`ThreadPoolExecutor`是进行多线程的一种方式。它通常在您使用

1.  有不需要协调的独立操作（虽然没有什么能阻止你协调，但你必须小心）
2.  希望限制一次执行多少个操作的容量，并且（可选）如果池当前在所有线程中工作，则希望在执行时对操作进行排队。

Java 7 有另一个称为 a 的内置类`ForkJoinPool`，通常用于 Map-Reduce 类型的操作。例如，可以想象使用 ForkJoinPool 实现合并排序，方法是在每个分叉点将数组拆分为 1/2，等待结果，然后将结果合并在一起。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-22T21:17:40.747

线程池（执行器）是多线程的一种形式，特别是单生产者 - 多消费者模式的实现，其中一个线程重复地将工作放入队列中以供一组工作线程执行。它是使用常规线程实现的，并带来了几个好处：

*   线程匿名——你不需要明确控制哪个线程做什么；只需启动任务，它们将由池处理。
*   它封装了一个工作队列和线程团队——无需费心实现你自己的线程安全队列和循环线程。
*   负载平衡 - 由于工作人员在完成之前的任务时会接受新任务，因此只要有足够多的可用任务，工作就会均匀分布。
*   线程回收 - 只需在开始时创建一个池并继续为其提供任务。无需在每次需要完成工作时都继续启动和终止线程。

鉴于上述情况，池确实适用于通常相互独立且通常短暂的任务（长时间的 I/O 操作只会占用池中无法执行其他任务的线程）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T20:28:21.293

ThreadPoolExecutor 是多线程的一种形式，使用比直接使用线程更简单的 API，在线程中确实可以提交任务。但是，任务可以提交其他任务，因此它们不必是独立的。至于将任务划分为子任务，你可能会想到 JDK7 中新的 fork/join API。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-29T03:37:16.473

来自[ThreadPoolExecutor的源代码文档](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/ThreadPoolExecutor.java/?v=source)

```
/*
 * <p>Thread pools address two different problems: they usually
 * provide improved performance when executing large numbers of
 * asynchronous tasks, due to reduced per-task invocation overhead,
 * and they provide a means of bounding and managing the resources,
 * including threads, consumed when executing a collection of tasks.
 * Each {@code ThreadPoolExecutor} also maintains some basic
 * statistics, such as the number of completed tasks.
 *
 * <p>To be useful across a wide range of contexts, this class
 * provides many adjustable parameters and extensibility
 * hooks. However, programmers are urged to use the more convenient
 * {@link Executors} factory methods {@link
 * Executors#newCachedThreadPool} (unbounded thread pool, with
 * automatic thread reclamation), {@link Executors#newFixedThreadPool}
 * (fixed size thread pool) and {@link
 * Executors#newSingleThreadExecutor} (single background thread), that
 * preconfigure settings for the most common usage
 * scenarios.
 */
```

`ThreadPoolExecutor`是实现并发的一种方式。实现并发的方法有很多：

[Executors](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html)框架提供了不同的 API。下面列出了一些重要的 API。

```
static ExecutorService  newFixedThreadPool(int nThreads) 
```

> 创建一个线程池，该线程池重用在共享无界队列上运行的固定数量的线程。

```
static ExecutorService  newCachedThreadPool() 
```

> 创建一个线程池，根据需要创建新线程，但在可用时将重用以前构造的线程。

```
static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) 
```

> 创建一个线程池，可以安排命令在给定延迟后运行，或定期执行。

```
static ExecutorService  newWorkStealingPool() 
```

> 创建一个工作窃取线程池，使用所有可用处理器作为其目标并行度级别。

看看下面的 SE 问题：

[java Fork/Join 池、ExecutorService 和 CountDownLatch](https://stackoverflow.com/questions/31582548/java-fork-join-pool-executorservice-and-countdownlatch/33602810#33602810)

[如何正确使用 Java Executor？](https://stackoverflow.com/questions/33596079/how-to-properly-use-java-executor/33596230#33596230)

# iphone - 在不访问源服务器的情况下实现 Apple 推送通知

> ID：12547389
> 
> 赞同：0
> 
> 时间：2012-09-22T20:18:34.423
> 
> 标签：iphone, ios, twitter, push-notification, apple-push-notifications

我想在我的应用程序中实现一些来自 Twitter 的推送通知。我可以使用 Sreaming API 连接到 Twitter 的用户相关事件流。我是否需要 Twitter API 和 iPhone 应用程序之间的“中间人”服务器才能向应用程序推送通知？也许我可以使用 Parse.com Cloud Code 或类似的东西来做到这一点？

这个问题可能不仅对 Twitter API 有用，而且对开发人员无权访问的任何服务器都有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:21:44.067

要推送通知，您通常需要自己的服务器，该服务器已配置为在发生某些事件时发送通知。如果您使用 Parse 作为应用程序的后端，则可以利用它们的后端来实现[推送通知](https://www.parse.com/tutorials/ios-push-notifications)或使用[UrbanAirship 之类的服务](http://urbanairship.com/products/push-notifications/)

对于 Twitter API，无论哪种情况，您都需要实现一些中间人，以便为您的用户从 Twitter 获取数据并解析它以查看是否发生了某些事件，然后直接使用您自己的自定义逻辑发送通知到 Apple 的服务器或使用 Parse 或 UrbanAirship（或其他一些服务）

# windows-runtime - WinRT TemplatedControl 上的 RX 油门

> ID：12547398
> 
> 赞同：0
> 
> 时间：2012-09-22T20:19:59.023
> 
> 标签：windows-runtime, system.reactive, winrt-xaml, winrt-async

我的模板控件中的线程同步存在一些问题（尝试执行自动完成控件）

在我的控制范围内，我有以下代码：

```
protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        var searchTextBox = GetTemplateChild("SearchTextBox") as TextBox;
        if (searchTextBox != null)
        {
            var searchDelegate = SearchAsync;

            Observable.FromEventPattern(searchTextBox, "TextChanged")
                .Select(keyup => searchTextBox.Text)
                .Where(TextIsLongEnough)
                .Throttle(TimeSpan.FromMilliseconds(500))
                .Do(ShowProgressBar)
                .SelectMany(searchDelegate)
                .ObserveOn(Dispatcher)
                .Subscribe(async results => await RunOnDispatcher(() =>
                                                                      {
                                                                          IsInProgress = false;
                                                                          SearchResults.Clear();
                                                                          foreach (var result in results)
                                                                          {
                                                                              SearchResults.Add(result);
                                                                          }
                                                                      }));
        }
    } 
```

它抱怨在我的 ShowProgressBar 方法中，我试图访问由另一个线程编组的代码。

如果我注释掉 Throttle 和 ObserveOn(Dispatcher) 它工作得很好，但它不会像我想要的那样限制我的服务调用。

如果我只注释掉 Throttle 部分，什么都不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:38:24.057

[每个依赖对象都要求仅在 Dispatcher 线程上对](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.dispatcher%28v=vs.95%29.aspx)依赖属性进行任何更改。`Throttle`正在使用不同的调度程序，因此在后续组合器中对 UI 进行任何更改都会`Do`导致访问异常。

您可以通过以下方式解决此问题：

1.  在对 Dispatcher 产生副作用的任何操作之前添加[ObserveOnDispatcher 。](http://msdn.microsoft.com/en-us/library/hh211843%28v=vs.103%29.aspx)可以选择在管道中使用另一个调度程序。
2.  使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/hh199416.aspx)通过调度程序执行副作用。例如， `.Do(() => Dispatcher.Invoke(new Action(ShowProgressBar)))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:37:55.950

Asti 的想法是正确的，但更好的方法是`IScheduler`向 Throttle 提供参数：

```
// NB: Too lazy to look up real name 
.Throttle(TimeSpan.FromMilliseconds(500), CoreDispatcherScheduler.Instance) 
```

这将在 UI 线程（包括您的 ShowProgressBar）上进行下面的操作，直到 SelectMany。

# android - 以编程方式设置 Google 手机帐户

> ID：12547405
> 
> 赞同：1
> 
> 时间：2012-09-22T20:21:05.437
> 
> 标签：android, accountmanager, google-account

我有兴趣在电话上以编程方式添加和设置具有给定用户名和密码的硬编码 Google 帐户，而无需任何用户干预。

我试过使用

```
AccountsManager.addAccountExplicitly(newAccount("xxxxxx@gmail.com","com.google",password,null) 
```

它适用于`accountsType`除**com.google** `accountsType`抛出“uid 与验证器 ID 不匹配”异常之外的所有情况。

我已经按照这个特定线程中给出的所有建议来修复错误但没有用，**com.google**帐户类型的错误仍然存​​在

[SecurityException: caller uid XXXX is different than the authenticationator's uid](https://stackoverflow.com/questions/3774282/securityexception-caller-uid-xxxx-is-different-than-the-authenticators-uid)

我尝试的另一种替代方法是使用`samplesyncadapter`代码，它工作得很好，身份验证部分在`NetworkUtilities`文件中完成，我认为需要将其更改为 Google 帐户`clientlogin`

无论如何，这可以直接执行而无需用户干预验证码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:47:10.393

好的几个月后，我设法解决了这个问题。可能对某人有帮助。

该解决方案不是通用的，而是针对模拟器/设备 LCD 特性和丑陋的。

我使用 MonkeyRunner 在指定屏幕坐标处发出触摸、按下和按键事件，以到达 Home->Apps->Settings->Accounts and Sync->Add Account->Google->Next->Sign In 等等

有关 MonkeyRunner 的更多详细信息，请参见此处

[http://developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

# solr - MongoDB 河 VS RabbitMQ 河 VS 后台作业（resque）

> ID：12547408
> 
> 赞同：1
> 
> 时间：2012-09-22T20:21:21.847
> 
> 标签：solr, indexing, elasticsearch, resque

我想将我的 Rails 项目从 Solr 切换到 Elastic Search（只是为了好玩），但我不确定索引文档的最佳方法。现在我正在使用 Resque（后台工作）来完成这项任务，但我一直在挖掘 Elastic Search 上的“河流”，它们看起来很有希望。

任何对此主题有经验的人都可以给我一些提示吗？性能结果？可扩展性？

提前致谢

PS：虽然目前只是为了好玩，但我想从 Solr 迁移到 Elastic Search 一个更大的生产项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:24:06.917

从您的问题中很难理解您的情况/担忧。使用弹性搜索，您可以将数据推入，或者使用河流来拉取数据。

当您推送数据时，您可以控制馈送器的操作方式、处理文档的方式、整个管道的外观（收集数据 > 语言分析 > 等 > 索引）。使用河流可能是一种方便的方法，可以快速将一些数据从某个来源（CouchDB、RDBMS）拉入弹性搜索，或者持续拉取数据，例如。来自 RabbitMQ 流。

由于您正在考虑在 Rails 项目的上下文中使用弹性搜索，因此您可能会在某个时候尝试使用[Tire gem。](https://github.com/karmi/tire)假设您使用的是与 ActiveModel 兼容的 ORM（用于 SQL 或 NoSQL 数据库），导入非常简单：

```
$ rake environment tire:import CLASS=MyClass 
```

有关更多信息，请参阅[轮胎](https://github.com/karmi/tire)文档和[相关的 Railscast 插曲](http://railscasts.com/episodes/306-elasticsearch-part-1)。

# amazon-ec2 - 如何在 Linux Ubuntu 机器中搜索文件或目录

> ID：12547409
> 
> 赞同：0
> 
> 时间：2012-09-22T20:21:25.153
> 
> 标签：amazon-ec2

我创建了一个 EC2 实例（Ubuntu 64 位）并将一个来自公开可用快照的卷附加到该实例。我成功安装了卷。我应该能够使用教程中解释的以下步骤从这个附加卷运行脚本：

```
Log in to your virtual machine. 
mkdir /space 
mount /dev/sdf1 /space 
cd /space 
./setup-script 
```

问题是，当我尝试时： ./setup-script 我收到以下消息： -bash: ./setup-script: No such file or directory

问题是什么 ？如何在整机中搜索 ./setup-script ？我对linux系统不是很熟悉。请帮忙。

有关该问题的更多详细信息：查看我以前的帖子： [安装驱动器时出错](https://stackoverflow.com/questions/12544502/error-when-mounting-drive)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:22:58.463

```
# Is it a script or an executable ?
file /space/setup-script
# Show us it is readable and marked executable
ls -l /space/setup-script
# Mark it executable
chmod a+x /space/setup-script
# Then try running it again?  If you know it is shell script you can:
bash /space/setup-script 
```

如果仍然无法正常工作，那么我们将了解它为什么无法执行。

```
grep space /proc/mounts 
```

它有选项`noexec`吗？

现在尝试`mount -o remount,exec /space`再次尝试您的说明。

注意：所有命令都假定您是“root”用户，或者您可以“sudo”每个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:34:17.357

您可能安装了错误的设备。我刚刚回忆了一个技巧，您可以使用它在 Linux 中查找 EBS 卷的设备名称，因为它通常与 AWS 控制台中报告的设备名称不同。首先在 Linux 中卸载设备，然后使用 AWS 控制台将其与实例分离，这样我们就回到了原始状态。现在在 Linux 中运行这个命令：

```
cat /proc/partitions 
```

该命令将显示当前附加的卷。下一步是使用 AWS 控制台将卷附加到实例，然后在 Linux 中再次运行相同的命令。您应该会看到额外的一行出现。此行将告诉您要安装的设备的名称。例如，我在我的 Ubuntu 实例中得到这个输出：

```
major minor  #blocks  name

 202        1    8388608 xvda1
 202       80    8388608 xvdf 
```

在我附加卷之前第一行已经存在，所以我知道这是我的根卷。第二行是出现的那一行，所以在这种情况下，要挂载的设备是`/dev/xvdf`.

# floating-point - 如何将 601.0 转换为 IEEE-754 单精度

> ID：12547413
> 
> 赞同：0
> 
> 时间：2012-09-22T20:21:40.643
> 
> 标签：floating-point, ieee-754

我试图了解如何从十进制转换为 IEEE-754 单精度二进制表示。

我编了一个随机数，恰好是 601.00

我尽力弄清楚，这就是我得到的：

步骤 01：我将 601 除以 9（因为 2^9 是 2 被我的数整除的最大幂）所以我得到 66.7778

步骤 02：我有指数 9 + 127 = 136，即二进制 10001000。步骤 03：符号为 0

现在的表示是：（缺少尾数）0 10001000

但是二进制中 66.7778 的尾数表示是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:47:20.320

第 1 步应该是：将 601 除以 2^9，而不是除以 9。

要获得尾数，请从除法的结果中减去 1，然后将其乘以 2^23。用二进制表示乘积的整数部分。您可以（并且应该）折叠这两个步骤，以便最终乘以 (601 - 2^9) * 2^14。

# html - 将固定横幅添加到浮动页面

> ID：12547417
> 
> 赞同：0
> 
> 时间：2012-09-22T20:21:54.803
> 
> 标签：html, css, height

我是 html 和 css 的新手，我正在尝试设计一个网站，在每个页面上都有一个固定的横幅和侧边菜单，然后是一个中心框架式环境中的内容。目前我的一切都是流体形式，如下所示：

```
<body>

<div id="banner">
<?php
include('banner.html');
?>
</div>

<div id="sidemenu">
<?php
include('sidemenu.html')
?>
</div>

<div id="content">
<?php
include ('content.html')    
?>
</div>

</body> 
```

作为我的样式 css 代码的一部分，我有：

```
#banner
{
background-color:#6a2b93;
color:#FFDB00;
text-align:right; 
font-family:"Times New Roman", Times, serif;
width:100%;
height:10%;
position:fixed;
}

#sidemenu
{
background-color:#6B2B93;
color:#FFDB00;
text-align:left;
font-family:"Times New Roman", Times, serif;
padding-left:2%;
padding-right:1%;
padding-bottom:5px;
height:90%;
width:20%;
position:fixed;
top:10%;
float:left; 
overflow: auto;
}

#content
{
background-color:#FFFFFF;
color:#000000;
text-align:justify;
font-family:="Times New Roman", Times, serif;
margin-right:20px;
margin-left:23%;
padding-right:2.5%;
padding-left:2.5%;
padding-bottom:5px;
height:90%;
width:72%;
position:fixed;
top:10%;
float:left;
overflow:auto;
} 
```

理想情况下，我希望横幅的高度为 3em，但我似乎找不到这样做的方法，同时在侧边菜单和内容上保留自动溢出选项。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:38:13.807

我不确定您为什么要`position:fixed`在所有元素上使用，这对于除页眉或页脚之外的其他元素很少是一个好的解决方案，因为它们在调整大小时不会随窗口一起移动，而是保持固定（显然）在它们的位置在窗口中。但是，如果您希望#banner 为 3em 高，那么 #sidemenu 和 #content 也需要具有`top:3em`，以免与横幅重叠。查看[更新的小提琴](http://jsfiddle.net/henrikandersson/7fcsX/)

**更新：**这可能是您在结构方面想要的（插入您自己的测量值），使用固定的标题和全高左/右下方 - [Fiddle](http://jsfiddle.net/henrikandersson/9u53w/)。

**更新2：**好的，让我们再试一次，这是你想要的吗？固定的标题和侧边栏以及溢出时滚动的内容部分。您将不得不更改为自己的测量值 - [Fiddle](http://jsfiddle.net/henrikandersson/9u53w/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:41:47.637

```
#banner
{
background-color:#6a2b93;
color:#FFDB00;
text-align:right; 
font-family:"Times New Roman", Times, serif;
width:100%;
min-height:100px;
height:100px;
}

#sidemenu
{
background-color:#6B2B93;
color:#FFDB00;
text-align:left;
font-family:"Times New Roman", Times, serif;
padding-left:2%;
padding-right:1%;
padding-bottom:5px;
min-height:100px;
height:90%;
width:200px;
position:fixed;
top:100px;
float:left; 
overflow: auto;
}

#content
{
background-color:#FFFFFF;
color:#000000;
text-align:justify;
font-family:="Times New Roman", Times, serif;
margin-right:20px;
margin-left:23%;
padding-right:2.5%;
padding-left:2.5%;
padding-bottom:5px;
height:90%;
width:72%;
top:10%;
float:left;
overflow:auto;​}​ 
```

# scala - scala：将错误添加到错误列表的惯用和功能方式

> ID：12547419
> 
> 赞同：3
> 
> 时间：2012-09-22T20:22:13.533
> 
> 标签：scala, functional-programming

我有以下验证方法：

```
def validate(wine: Wine): List[Error] = {

  var errors = List[Error]()

  if (Validate.isEmptyWord(wine.name)) {
    errors ::= ValidationError("name", "Name not specified")
  } else {
    if (isDuplicate(wine, "name")) {
      errors ::= ValidationError("name", "There already exists a wine with the name '%s'".format(wine.name))
    }
  }

  if (Validate.isEmptyWord(wine.grapes)) {
    errors ::= ValidationError("grapes", "Grapes not specified")
  }

  if (Validate.isEmptyWord(wine.country)) {
    errors ::= ValidationError("country", "Country not specified")
  }

  // more stuff like this and finnally
  errors.reverse
} 
```

你明白了

您将如何修改它以避免 var List[Error] 并使其更具功能性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T21:29:11.613

[Scalaz](http://code.google.com/p/scalaz/)提供了一个`Validation`类，可以很容易地用函数式方法解决这类问题。`Validation`在[此 Stack Overflow 答案](https://stackoverflow.com/a/12309023/334519)中有一个更详细的示例说明如何使用，但我也会在这里给出一个草图，以展示它在您的情况下如何工作。我将假设以下设置：

```
case class Wine(name: String, grapes: String, country: String)
case class ValidationError(name: String, msg: String) 
```

现在我们可以编写几个验证方法（注意我使用的是 Scalaz 7）：

```
import scalaz._, Scalaz._

def checkNonempty(v: String, name: String, msg: String) =
  if (v.nonEmpty) v.successNel else ValidationError(name, msg).failNel

def checkDuplicate(v: String, name: String, msg: String) =
  if (true) v.successNel else ValidationError(name, msg).failNel 
```

当然，您应该将自己的重复检查添加到最后一行。然后我们可以将它们包装在一起：

```
def createWine(name: String, grape: String, country: String) = (
  checkNonempty(name, "name", "Name not specified").flatMap(_ =>
    checkDuplicate(name, "name",
      "There already exists a wine with the name '%s'".format(name)
    )
  ) |@|
  checkNonempty(grape, "grape", "Grape not specified") |@|
  checkNonempty(country, "country", "Country not specified")
)(Wine.apply) 
```

现在如果我们写这样的东西：

```
val result: ValidationNEL[ValidationError, Wine] = createWine(
  "Whatever Estates", "Whatever Grape", "U.S."
) 
```

我们将获得一个成功值：

```
Success(Wine(Whatever Estates,Whatever Grape,U.S.)) 
```

但是如果我们给它无效的输入：

```
val result: ValidationNEL[ValidationError, Wine] = createWine(
  "", "Some Grape", ""
) 
```

我们将获得累积错误的列表：

```
Failure(
  NonEmptyList(
    ValidationError(name,Name not specified),
    ValidationError(country,Country not specified)
  )
) 
```

当然，您也可以使用自己的验证逻辑，但是如果您正在做很多此类事情，那么使用像 Scalaz 这样的库可能是值得的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T20:47:45.467

编写您的`isX`方法以返回 a`Option[Error]`而不是 a `Boolean`，然后

```
List(
  Validate.isEmptyWord(wine.name, "name", "Name not specified").
  orElse( Validate.isDuplicate(wine.name, "name", "There already exists...") ),
  Validate.isEmptyWord(wine.grapes, "grapes", "Grapes not specified"),
  ...
).flatten 
```

你会有你的错误。此外，您还可以删除许多其他重复项（例如，如果始终是`"x", "X not specified"`，您可以只提供`"x"`并让其余部分由 填充`isEmptyWord`）。

# c++ - 显示最大和最小数字时出错

> ID：12547420
> 
> 赞同：0
> 
> 时间：2012-09-22T20:22:19.393
> 
> 标签：c++, math, pearson

我试图为 How to Program 中的练习 2.19 编写一个程序，但遇到了一些困难。

该程序应该让用户输入三个整数，然后显示这些整数的`sum`、`average`和`product`。

我遇到的唯一问题是显示最大和最小。当我运行程序并输入三个整数`(8, 9, and 10)`时，输出为`Smallest is 8` `AND` `Smallest is 9`.

我希望你能告诉我为什么。

```
#include <iostream>
using namespace std;

int main ()
{   int x, y, z, sum, ave, prod;

    cout << "Input three different integers ";
    cin >> x >> y >> z;

    sum = x + y + z;
    cout << "\nThe sum is " << sum;

    ave = (x + y + z) / 3;
    cout << "\nThe average is " << ave;

    prod = x * y * z;
    cout << "\nThe product is " << prod;

    if (x < y, x < z)
      {cout << "\nSmallest is " << x;}

    if (y < x, y < z)
      {cout << "\nSmallest is " << y;}

    if (z < x, z < y)
      {cout << "\nSmallest is " << z;}

    if (x > y, x > z)
      {cout << "\nLargest is " << x << endl;}

    if (y > x, y > z)
      {cout << "\nLargest is " << y << endl;}

    if (z > x, z > y)
      {cout << "\nLargest is " << z << endl;}

    return 0;
} 
```

PS我这样做是为了学习，这不是家庭作业。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T20:25:29.363

你需要重写这个 if 条件

```
if (x < y, x < z) 
```

成为

```
if (x < y && x < z) 
```

如果你有条件，对所有剩余的都做同样的事情。

编辑：所有用逗号分隔的表达式都将被评估，所以如果你有类似的东西， `x = 5, y = 6;`它将评估它们并将 x 设置为 5 和 y 设置为 6 但这 `z = (x=5, y=6);`将导致 z 设置为 6，就像 y 一样，因为 y=6 是逗号分隔项列表中的最后一项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T20:43:00.913

```
int main() {

  std::cout << "Enter three numbers: ";

  int sum = 0;
  double avg = 0.;
  int product = 0;
  int smallest = std::numeric_limits<int>::max();
  int largest = std::numeric_limits<int>::min(); // the initializers here might not be correct, but the gist is in place...

  for (int i = 0; i < 3; ++i) {
    int val = 0;
    std::cin >> val;

    sum += val;
    avg += val;
    product *= val;

    if (val < smallest) smallest = val;
    if (val > largest) largest = val;
  }
  avg /= 3.; // This can also be done in the for loop, I just forget how.

  std::cout << "Sum: " << sum;
  // etc...  The calculations are all done.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:25:40.683

将逗号替换为 && 用于 AND 运算符，这意味着两个条件都必须为真，或者 || 这是一个 OR 运算符，如果您希望满足任何或两个条件。

来自 C++ 文档：

```
The comma operator (,) is used to separate two or more expressions that are included    
where only one expression is expected. When the set of expressions has to be evaluated 
for a value, only the rightmost expression is considered. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T20:26:12.137

用于`&&`代替`,`您的 if 条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T20:31:14.870

而不是逗号，你想要 && 即

```
if (x < y , x < z)
  {cout << "\nSmallest is " << x;} 
```

应该

```
if (x < y && x < z)
  {cout << "\nSmallest is " << x;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T20:37:14.320

现在您意识到这`&&`是 AND 并且您应该使用此运算符而不是逗号，`,`。但是您知道您也可以使用 they 关键字`and`代替其等效符号吗？：

```
if ( x < y and x < z ) {

} 
```

# jquery - 如何在单击页面上的任意位置时显示/隐藏（切换）DIV

> ID：12547425
> 
> 赞同：1
> 
> 时间：2012-09-22T20:23:38.663
> 
> 标签：jquery, html, toggle

我正在制作一个投资组合网站，图片在背景中是全屏的，我使用 z-index 放置一个透明的 div，上面有文本。我想通过单击页面上的任意位置来切换具有字体可见性的 DIV。如果可能的话，让它具有淡入淡出功能。

我还是 jQuery 的新手，所以任何帮助都会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:30:17.970

也许是这样的？

```
// dom ready
$(function(){

    // body click
    $("body").click(function(){

        // element to toggle
        var $el = $(".your-element");

        // toggle div
        if ($el.is(":visible")) {
            // fade out
            $el.fadeOut(200);
        } else {
            // fade in
            $el.fadeIn(200);                
        }

    });
}); 
```

使用的 jQuery 方法： [.ready( )](http://api.jquery.com/ready/) [.click () .is(](http://api.jquery.com/click/) [)](http://api.jquery.com/is/) [.fadeIn()](http://api.jquery.com/fadeIn/) [.fadeOut()](http://api.jquery.com/fadeOut/)

# xhtml - 我的 schema.org 面包屑设置是否正确？

> ID：12547427
> 
> 赞同：2
> 
> 时间：2012-09-22T20:24:03.553
> 
> 标签：xhtml, breadcrumbs, schema.org

我不知道我是否正确设置了面包屑，我所有的页面都有这样的面包屑：

```
<body itemscope="itemscope" itemtype="http://schema.org/WebPage">

<div class="breadcrumb">
<a title="MY Site Title" rel="home" itemprop="breadcrumb" href="http://www.mysite.com/">MY Site Title</a>
<span class="navigation-pipe">»</span>
<a title="Category Name" itemprop="breadcrumb" href="http://www.mysite.com/CategoryName">Category Name</a>
<span class="navigation-pipe">»</span>Product Page
</div> 
```

如果它是一个产品页面，我将它添加到面包屑之后的正文中。

```
<div itemscope itemtype="http://schema.org/Product">

With Product info HERE

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:40:17.627

你应该尝试添加

```
 itemprop="breadcrumb" 
```

到包含 div，而不是链接本身。 [如这里正确答案所示](https://stackoverflow.com/questions/10371410/adding-microdata-or-schema-org-for-breadcrumb-seo-in-drupal-7)。

您还可以使用 Google 自己的[结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwww.google.com&html=)来测试它能够提取哪些数据。

他们还有一个[故障排除部分](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1093493)，描述了常见的陷阱。

最后，如果所有其他方法都失败了[，您可以手动询问他们，](http://support.google.com/webmasters/bin/request.py?&contact_type=rich_snippets_feedback)尽管他们不承诺单独回复。

# java - 无法创建 Firefox 将接受的我自己的测试证书颁发机构

> ID：12547428
> 
> 赞同：0
> 
> 时间：2012-09-22T20:24:23.867
> 
> 标签：java, tomcat, x509, certificate

我正在按照[这些步骤](http://www.tc.umn.edu/%7Ebrams006/selfsign.html)创建基本 CA 和已由 CA 签名的服务器证书。我将 CA 证书导入到 JDK 中的 cacerts 中，并创建了一个包含服务器证书的单一条目 JKS 密钥库。我在 Firefox 中收到此错误：

> 无法与对等方安全通信：没有通用加密算法。
> 
> （错误代码：ssl_error_no_cypher_overlap）

# php - 附加 Amazon SES 服务的自定义电子邮件标头

> ID：12547433
> 
> 赞同：2
> 
> 时间：2012-09-22T20:25:36.723
> 
> 标签：php, email-headers, amazon-ses

我正在使用 Amazon SES 发送电子邮件，我想在它发送给用户之前附加一个自定义标头，因为我正在制作代理电子邮件系统，用于回复我网站上的线程，因此保留 ID跟踪通过电子邮件发布到哪个线程。

我看不到如何从 Amazon SES 的文档中附加自定义标头，除了[这个页面](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/Headers.html)解释了他们接受哪些标头但没有说明如何绑定它，我正在使用这个为 PHP 制作的[SES 包装器。](http://sourceforge.net/projects/php-aws-ses/)

我希望能够注入一个以`X-Thread-ID`数字命名的标头，我该怎么做呢？

* * *

编辑：对于杰克的回答，我无法正确发送电子邮件，它一直给我这个错误：

```
CFSimpleXML Object
(
    [Type] => Sender
    [Code] => InvalidParameterValue
    [Message] => Missing final '@domain'
) 
```

我的标题是这样的

```
To: myemail@hotmail.co.uk <YES>
From: developer@mysite.com <MySite>
X-Thread-ID: 429038 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T04:08:10.603

我不确定您对当前包装器的依恋程度，但我只使用 Amazon SDK for PHP 附带的一个，它可以从 Amazon 本身下载。

```
$ses = new AmazonSES(AWS_ACCESS_KEY, AWS_ACCESS_SECRET);

$headers = join("\r\n", array(
    "To: $recipient",
    "X-Thread-ID: 123test",
));
$body = "<html><body> ... </body></html>";

$res = $ses->send_raw_email(array(
    'Data' => chunk_split(base64_encode("$headers\r\n\r\n$body"))
), array());

// check API result
if (!$res->isOK()) {
    throw new Exception(print_r($res->body->Error, true));
}
// inspect message id
$messageId = (string)$res->body->SendRawEmailResult->MessageId 
```

**编辑**

此电子邮件标题：

```
To: myemail@hotmail.co.uk <YES> 
```

应该是（反转）：

```
To: YES <myemail@hotmail.co.uk> 
```

带空格的名称应使用双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T08:15:23.997

快进到 2017 年，现在的答案是（根据亚马逊）：

（参考：[通过以编程方式访问 Amazon SES SMTP 接口发送电子邮件](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-using-smtp-programmatically.html)）

```
<?php

// Modify the path in the require statement below to refer to the 
// location of your Composer autoload.php file.
require 'path_to_sdk_inclusion';

// Instantiate a new PHPMailer 
$mail = new PHPMailer;

// Tell PHPMailer to use SMTP
$mail->isSMTP();

// Replace sender@example.com with your "From" address. 
// This address must be verified with Amazon SES.
$mail->setFrom('sender@example.com', 'Sender Name');

// Replace recipient@example.com with a "To" address. If your account 
// is still in the sandbox, this address must be verified.
// Also note that you can include several addAddress() lines to send
// email to multiple recipients.
$mail->addAddress('recipient@example.com', 'Recipient Name');

// Replace smtp_username with your Amazon SES SMTP user name.
$mail->Username = 'smtp_username';

// Replace smtp_password with your Amazon SES SMTP password.
$mail->Password = 'smtp_password';

// Specify a configuration set. If you do not want to use a configuration
// set, comment or remove the next line.
$mail->addCustomHeader('X-SES-CONFIGURATION-SET', 'ConfigSet');

// If you're using Amazon SES in a region other than US West (Oregon), 
// replace email-smtp.us-west-2.amazonaws.com with the Amazon SES SMTP  
// endpoint in the appropriate region.
$mail->Host = 'email-smtp.us-west-2.amazonaws.com';

// The port you will connect to on the Amazon SES SMTP endpoint.
$mail->Port = 465;

// The subject line of the email
$mail->Subject = 'Amazon SES test (SMTP interface accessed using PHP)';

// The HTML-formatted body of the email
$mail->Body = '<h1>Email Test</h1>
    <p>This email was sent through the 
    <a href="https://aws.amazon.com/ses">Amazon SES</a> SMTP
    interface using the <a href="https://github.com/PHPMailer/PHPMailer">
    PHPMailer</a> class.</p>';

// Tells PHPMailer to use SMTP authentication
$mail->SMTPAuth = true;

// Enable SSL encryption
$mail->SMTPSecure = 'ssl';

// Tells PHPMailer to send HTML-formatted email
$mail->isHTML(true);

// The alternative email body; this is only displayed when a recipient
// opens the email in a non-HTML email client. The \r\n represents a 
// line break.
$mail->AltBody = "Email Test\r\nThis email was sent through the 
    Amazon SES SMTP interface using the PHPMailer class.";

if(!$mail->send()) {
    echo "Email not sent. " , $mail->ErrorInfo , PHP_EOL;
} else {
    echo "Email sent!" , PHP_EOL;
}
?> 
```

# javascript - 对 JSLint 报告的语法错误感到困惑

> ID：12547439
> 
> 赞同：0
> 
> 时间：2012-09-22T20:26:19.703
> 
> 标签：javascript, jquery, html, string-formatting, jslint

所以我正在处理[这个问题](http://jsfiddle.net/ruFrp/12/)，当我在代码上运行 jslint 时出现错误......任何人都可以为此提供修复程序吗？我只是不知道该怎么办。要查看错误消息，请点击我的链接并单击“JSLint”。

编辑：如果有人好奇，[这就是它的工作原理。](http://jsfiddle.net/ruFrp/15/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:31:19.083

你需要`\`在你`{`的`}`正则表达式模式中加上一个。这被称为`escaping`. [http://jsfiddle.net/ruFrp/13/](http://jsfiddle.net/ruFrp/13/)

# javascript - 将鼠标悬停在标签上后显示图像

> ID：12547441
> 
> 赞同：-1
> 
> 时间：2012-09-22T20:26:37.613
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T20:50:44.973

我认为最好的办法是使用 a`data-[type]`并将其与 ID、类或其他数据类型进行比较。你也可以通过课程来做到这一点。

这是一个[小提琴](http://jsfiddle.net/BramVanroy/7Wp9z/54/)。这是jQuery代码：

```
$("div#links > a").hover(
    function() {
        var ID = $(this).data("content");
        $("div#images").children("img#" + ID).fadeIn("slow");
    },
    function() {
        var ID = $(this).data("content");
        $("div#images").children("img#" + ID).stop(true).hide();
    }
);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:31:25.963

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:31:26.673

> ```
> $('a').hover(
>    function(){
>       $('img').show();
>    }, 
>    function(){
>       $('img').hide();
>    } 
> ); 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:35:25.260

如果需要将 img 更改为 A 标签，则只能使用 css

```
.img{
    background: #222 url(/images/alert-overlay.png);
}
.img_hover{
    background: #222 url(/images/alert-overlay-hover.png);
} 
```

用jQuery

```
$('a.orange').hover(
    function() {

        $(this).removeClass('img').addClass('img_hover');
    },
    function() {
        $(this).removeClass('img_hover').addClass('img');
    }
); 
```

或仅使用 jquery

```
 $('a.orange').hover(
        function() {
            $(this).css('background-image', 'url(' + imageUrlHover + ')');
        },
        function() {
            $(this).css('background-image','url(' + imageUrl + ')');
        }
    ); 
```

# regex - 使用正则表达式进行慢速文件解析

> ID：12547446
> 
> 赞同：1
> 
> 时间：2012-09-22T20:26:59.803
> 
> 标签：regex, performance, haskell

刚刚尝试从 pythonto haskell 重写琐碎的文件解析器，但发现它非常慢（在同一台机器上慢了大约 15 倍）。使用 ghc -O2 编译的代码。

目标是计算正则表达式匹配的行数。示例文本文件很大（几个 GiB）。

这是代码：

```
import Text.Regex.Posix
import qualified Data.ByteString as BS
import qualified Data.ByteString.Char8 as BC

filename = "sample.dat"

mcount' :: String -> [BS.ByteString] -> Int
mcount' sample file = foldr (\e acc -> if e =~ sample then acc+1 else acc) 0 file

main = do
    fcnt <- fmap BC.lines $ BS.readFile filename
    print $ mcount' "myregex" fcnt 
```

我怎样才能（显着）提高性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T23:51:19.800

最重要的似乎是从 切换`foldr`到`foldl'`。还有六种其他有用的优化，但这应该已经有了显着的改进。作为一般经验法则：

*   `foldr`当您要折叠的函数短路或使用受保护的递归时使用。
*   `foldl'`否则使用。
*   根本不要使用`foldl`。

# mongodb - Spring-data MongoDB地理查询

> ID：12547447
> 
> 赞同：4
> 
> 时间：2012-09-22T20:27:09.890
> 
> 标签：mongodb, geolocation, spring-data

我正在使用 spring-data 与 mongodb 进行通信，我正在寻找一种执行地理查询的方法，该方法将通过数据库中的给定地理点检索附近的配置文件，我对查询的要求是：

1) 距离限制
2) 返回的配置文件数量限制
3) 根据配置文件文档中的时间字段进行额外搜索
4) 从检索到的文档中包含/排除字段的能力

起初我使用**mongoTemplate.geoNear**方法...

```
 Query criteria = new Query(Criteria.where("time").gte("some_date")); 
   criteria.fields().exclude("friends");
    NearQuery query = NearQuery.near(point).maxDistance(maxDistance)
            .num(limit).query(criteria);
    GeoResults<Profile> result = mongoTemplate
            .geoNear(query, Profile.class);<br/> 
```

但后来我意识到 mongo 不支持在 geoNear 查询中包含/排除字段。
所以我在考虑**Near**查询，似乎在 spring-data 中执行这种“复杂”查询的唯一方法是使用**@Query**注释，有没有办法在那种查询中支持上述要求 2,3 ? 还有其他方法吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-21T13:59:10.280

你的问题实际上包含了你需要的所有答案。您只需使用 query.addCriteria 将它们放在一起。

1：使用带半径的圆
2\. 使用 Query.limit(count)
3\. 使用 Query.where("date").gte()
4\. 使用字段来投影结果

**干得好**

```
 Point point = new Point(6.12343, 3.121211);
    Distance distance = new Distance(100, Metrics.KILOMETERS);
    Circle circle = new Circle(point, distance);
    Integer resultLimit = 20; //Limit to 20 records
    Criteria geoCriteria = Criteria.where("position").withinSphere(circle);
    Criteria timeCriteria = Criteria.where("time").gte(new Date());
    Query query = Query.query(geoCriteria);
    query.addCriteria(timeCriteria);
    query.fields().exclude("friends");
    mongoTemplate.find(query, Profile.class); 
```

# arrays - 如何在 perl 中用现有数组声明数组？

> ID：12547449
> 
> 赞同：3
> 
> 时间：2012-09-22T20:28:00.497
> 
> 标签：arrays, perl, dereference

所以说我创建了一组这样的数组：

```
my (@device, @mount, @type, @options, @dump, @pass) = (); 
```

后来我想创建一个包含这些数组的数组。我该怎么做？我尝试使用：

```
my @columns = (@device, @mount, @type, @options, @dump, @pass); 
```

和

```
my @columns = ([@device], [@mount], [@type], [@options], [@dump], [@pass]); 
```

问题似乎是@columns 仍然是空的。我觉得我犯了一个非常简单的语法错误。我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T20:32:21.933

1.  使用时，只需将给定数组中的所有值分配给 array `@columns`。

    ```
    my @columns = (@device, @mount, @type, @options, @dump, @pass); 
    ```

2.  在这里，您只是通过引用说出所有数组，如果您使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)，您可以看到数组的结构`@columns`。

    ```
    use Data::Dumper;

    my @columns = ([@device], [@mount], [@type], [@options], [@dump], [@pass]);
    print Dumper(\@columns); 
    ```

您可以使用数组引用来做到这一点。阅读本教程：[perlreftut - Mark 关于参考的简短教程](http://perldoc.perl.org/perlreftut.html)

```
my @columns = (\@device, \@mount, \@type, \@options, \@dump, \@pass); 
```

然后使用解引用：

```
my @new_device = @{ $columns[0] }; 
```

# c# - 从用户设置恢复顶部和左侧后检测错位的表单

> ID：12547454
> 
> 赞同：1
> 
> 时间：2012-09-22T20:28:16.457
> 
> 标签：c#, winforms

我正在存储每个窗口的最后一个位置。

下次用户打开窗口时，将恢复上次的位置。

如果用户改变他的屏幕（从双屏到一个屏幕）或只是到一个更小的分辨率，窗体无处可见......

我怎样才能检测到这个？我不喜欢存储用户设置，这取决于他的环境。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:45:16.070

使用[System.Windows.Forms.Screen.PrimaryScreen](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.primaryscreen.aspx)`Bounds`中的属性查看屏幕的边界，将其与表单的位置/大小进行比较，并在需要的地方进行补偿。

要获取其他屏幕的边界，请使用该`Screen.AllScreens`属性上的`PrimaryScreen`属性来访问`Screen`表示多个屏幕的其他对象。

例如，这可能就像检查`Location`您要更改为的 是否在可用屏幕上一样简单：

```
foreach (var screen in Screen.AllScreens)
{
    if (screen.Bounds.Contains(this.Location))
    {
        return; // on a screen, so don't update location
    }
}
// not found on a screen, so assume screen was removed and move to the primary screen
this.Location = Screen.PrimaryScreen.Bounds.Location; 
```

当然，您可以通过决定哪个屏幕比其他任何屏幕包含更多的表单（基于`Bounds`）来使这变得更复杂，并以这种方式做出决定；但是，如果没有更多关于您想要什么的详细信息，我无法提出具体建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T13:49:59.443

让我们从头开始，你想要两个设置来存储窗口的状态。我们称它们为 Location（类型 Point，默认 = 0,0）和 Size（类型 Size，默认 = 0, 0）。您希望在调整窗口大小时保存它们，避免在窗口最小化时存储状态：

```
 protected override void OnResizeEnd(EventArgs e) {
        if (this.WindowState != FormWindowState.Minimized) {
            Properties.Settings.Default.Location = this.Location;
            Properties.Settings.Default.Size = this.Size;
            Properties.Settings.Default.Save();
        }
        base.OnResizeEnd(e);
    } 
```

恢复表单的 OnLoad 方法中的状态。您需要使用 Screen.FromPoint() 来查找屏幕边界。添加额外的代码以确保窗口不会变得太大并在屏幕消失时正确定位：

```
 protected override void OnLoad(EventArgs e) {
        if (Properties.Settings.Default.Size != Size.Empty) {
            Screen scr = Screen.FromPoint(Properties.Settings.Default.Location);
            int width = Math.Min(Properties.Settings.Default.Size.Width, scr.WorkingArea.Width);
            int height = Math.Min(Properties.Settings.Default.Size.Height, scr.WorkingArea.Height);
            this.Size = new Size(width, height);
            if (scr.WorkingArea.Contains(Properties.Settings.Default.Location))
                this.Location = Properties.Settings.Default.Location;
            else this.Location = new Point(scr.Bounds.Left + (scr.Bounds.Width - width) / 2, 
                                           scr.Bounds.Top + (scr.Bounds.Height - height) / 2);
        }
        base.OnLoad(e);
    } 
```

# c# - WebClient 上传带有变量的文件

> ID：12547457
> 
> 赞同：0
> 
> 时间：2012-09-22T20:28:31.983
> 
> 标签：c#, webclient

我正在使用下面的代码将文件上传到远程 php 页面。我想发布一个额外的变量来验证上传文件的系统的身份。有没有办法向 WebClient UploadFile 添加标头，以允许接收脚本访问已发布的变量？

```
WebClient webClient = new WebClient();
webClient.UploadFileAsync(new Uri(HTTP_VERSIONCTRL_URL), fileloc);
webClient.UploadProgressChanged += OnProgress; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:39:16.537

你可以像这样添加一个标题

```
webClient.Headers.Add("OurSecurityHeader", "encryptedvalue"); 
```

在 php 方面，您可以使用它来读取标题：

[如何在 PHP 中读取任何请求标头](https://stackoverflow.com/questions/541430/how-do-i-read-any-request-header-in-php)

# ruby-on-rails - heimdallr 如果未设置范围：删除

> ID：12547461
> 
> 赞同：0
> 
> 时间：2012-09-22T20:29:14.367
> 
> 标签：ruby-on-rails

我为我的模型使用了 heimdallr，并在视图中使用了一种`destroyable?`方法，但我仅将 destoy 范围用于所有者或管理员，并且当用户未登录`destroyable?`方法时会引发运行时错误`The :delete scope does not exist`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:37:03.997

您是否尝试过在模型上创建`:delete`范围或方法并将其设置为不返回记录的内容？

看起来这段代码是失败的地方：

[https://github.com/roundlake/heimdallr/blob/master/lib/heimdallr/proxy/record.rb](https://github.com/roundlake/heimdallr/blob/master/lib/heimdallr/proxy/record.rb)

```
def destroyable?
  scope = @restrictions.request_scope(:delete)
  record_in_scope? scope
end 
```

因此，如果您的范围没有返回任何记录，那么理论上它应该可以正常工作。

```
scope :delete, where(YourModel.arel_table[:id].lt(0)) 
```

# asp.net - Azure Web 角色 - 长时间运行的请求（负载均衡器超时？）

> ID：12547463
> 
> 赞同：5
> 
> 时间：2012-09-22T20:29:28.860
> 
> 标签：asp.net, asp.net-mvc-3, azure, azure-web-roles

我们的前端 MVC3 Web 应用程序正在使用 AsyncController，因为我们的每个实例都在为数百个长时间运行的 IO 绑定进程提供服务。

由于 Azure 将在某个预定时间间隔后终止“非活动”http 会话（这似乎因您阅读的网站而异），我们如何保持连接有效？

我们的客户必须保持联系，我们的流程将运行 30 秒到 5 分钟或更长时间。我们如何保持客户端连接/活动？我最初想在 Async 方法上设置一个超时，然后用几个字节的输出来访问 Response 对象，有点像将响应分块，然后返回并等待更多。但是，我认为这行不通，因为 MVC3 正在处理 IIS 线程与异步响应的连接，该响应当时已经呈现了一个视图。

我们如何在 AsyncController 上运行一个非常长的进程，但不让客户端被 Azure 负载均衡器断开？向调用者发送立即响应，并要求调用者轮询或检查另一个资源 URL 是不可接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:53:23.367

Azure 负载均衡器空闲超时为 4 分钟。您可以尝试在客户端配置 TCP keep-alive 少于 4 分钟，这应该保持连接处于活动状态吗？

另一方面，长时间保持每个客户端的连接打开是相当昂贵的。这将限制每台服务器可以处理的客户端数量。另外，我认为如果 IIS 认为它需要连接来服务其他请求，它可能仍然决定关闭连接而不管保持活动状态。

# css - 重新利用 CSS 类选择器

> ID：12547464
> 
> 赞同：2
> 
> 时间：2012-09-21T14:16:28.263
> 
> 标签：css, css-selectors

我不知道这种技术叫什么，我只见过它使用过。这是一种使用 CSS 重新利用相同选择器的方法。

例如，如果我创建

```
 h1  { 
      font-size:18px; 
      color:#FFFFFF; 
      font-family:Arial, Helvetica;margin:0;
      padding:0;
}

h2  { 
          font-size:18px; color:#000000; 
          font-family:Arial, Helvetica; 
          font-weight:normal;margin:0;
          padding:0;
} 
```

我可以用类似的东西重新调整 h 选择器的用途

```
.whatever h1 {
    color: #000; 
    font: 2.0em arial, sans-serif; 
    background-color: #fff3ea; 
    margin: 50px 0px 0px 50px; 
}

.whatever h2 {
    color: #000; 
    font: 1.7em bold arial, sans-serif; 
    background-color: #fff3ea; 
    margin: 25px 0px 25px 75px;
} 
```

如果`h1`和`h2`出现在一个`div`被调用的东西中，那么它们将假定这些属性。您可以使用 ID 标签和类标签来做到这一点，但我一辈子都不记得这是如何做到的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:08:48.863

这称为*[特异性](https://developer.mozilla.org/en-US/docs/CSS/Specificity)*。

这是 CSS 的一个关键特性，这意味着更*具体*的选择器 ( `.whatever h1`) 中的属性将覆盖不太具体的选择器 ( ) 中的属性`h1`。它允许您为页面上的大多数元素（例如所有`h1`元素）设置一般样式，然后使用更具体的选择器更改这些元素的一小部分的属性，例如，仅标识`h1`另一个元素中的元素谁的班级是`whatever`：

### HTML

```
<h1>I'm green with envy</h1>

<h1>And so am I</h1>

<div class="whatever">
    <h1>Because I'm rather special</h1>
</div> 
```

### CSS

```
h1{
    color: green;
}

.whatever h1{
    color: blue;
} 
```

### 结果

![更具体的选择器的结果](../Images/7d6d409de01485ed24e266a88b774bee.png)

CSS 选择器的`.whatever h1`意思是“`h1`在另一个元素中的任何元素，具有*任何*类”。你也可以给`h1`元素一个自己的类来达到同样的效果；`h1`您只需稍微不同地编写 CSS 以反映您所定位的元素现在具有自己的类的事实：

### HTML

```
<h1 class="whatever">I'm special</h1> 
```

### CSS

```
h1.whatever{
    color: blue;
} 
```

始终尝试为您的类和 ID 提供有意义的名称，以引用元素在页面中的角色，而不是其颜色或其他属性。即使用“.introduction”而不是“.bigredtext”或“.whatever”要好得多。这样，如果您将介绍文本的颜色更改为亮蓝色，则不必在 CSS 和 HTML 中重命名该类，并且 HTML 中的所有内容也会更好地阅读。（这就是人们在提到“语义”和“语义命名约定”时所谈论的内容。）

## 如何确定特异性（要记住的简单规则）

用户代理（Web 浏览器）使用一个公式来计算每个选择器的具体程度以及哪个应该优先于另一个。用非常简单的术语来说，从不太具体到更具体：

*   只有元素名称的选择器（例如`h1`）是最不具体的
*   带有 a`.class`的选择器比没有类的选择器更具体
*   带有 a的选择`#id`器比带有 a 的选择器更具体`.class`
*   样式表中较低的选择器优先于早期相同的选择器

这些是关于特异性值得学习的四个主要规则，它们将涵盖大多数简单的用例。这两个附加规则与特异性无关，但也值得了解：

*   例如，内联样式`<h1 style="color: blue">`将优先于在外部样式表或内部`<style>`标记中单独声明的外部规则。您可能不应该使用内联样式，但值得知道这一点以防万一您遇到它们。
*   选择器中使用`!important`标志“胜过”所有内容且不能被否决的属性。同样，您可能不应该选择使用`!important`标志，但有时您可能会被迫这样做。

## 如何*真正*确定特异性（如何精确计算）

当然，当您开始将类、ID 和元素链接在一起时，它会比上面的要复杂一些（但不会复杂得多），这就是为什么学习如何精确计算特异性而不是仅仅依靠直觉会很有帮助的原因，因为当您的样式表变得更大更复杂时，它将为您节省大量时间。

如果您想了解更多信息，Smashing Magazine 有一篇题为[“CSS Specificity and Inheritance”](http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/)的文章值得一看。他们参考了 Andy Clarke 著名的[《星球大战图表》](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)，如果您熟悉《星球大战》，这可能是一种更简单的可视化特异性的方法，但如果您不熟悉，它可能只会让事情变得更加混乱！（点击下面的图片在安迪的网站上阅读更多内容。）

[![安迪克拉克的星球大战图表](../Images/46d3ddd32cd8b7da1e342de50248c426.png)](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:01:44.627

您面临覆盖选择器的问题。

例子：

```
<div class="one">
     <div id="two">
          <h1> This is H1 text </h1>
     </div>
</div> 
```

因此您已通过以下方式将 H1 设置为 FFF - 白色：

```
h1 {
   color:#fff;
} 
```

现在我们首先覆盖（使用 ID ）：

```
div#two h1 {
   color:#888;
} 
```

第三，注意你不必放置当前元素，你可以为给定类的每个元素设置它：

```
.one div#two h1 {
   color:#000;
} 
```

所以最后我们有黑色的文字颜色。

原始的是设置“全局”样式。嵌套的是为给定元素提供 exac 样式。

您也可以使用链接类/id 选择器，因为`<div id="one" class="two three four">`您可以使用`div#one.two.three.four`- 不带空格来选择它

# redis - REDIS 中的管道集操作

> ID：12547467
> 
> 赞同：2
> 
> 时间：2012-09-22T20:29:57.703
> 
> 标签：redis, set, pipe, multiset

是否可以使用管道计算 redis 中的多集操作，即说

(a union b union c) intersect (d union c) SUNION abc SINTER dc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T00:09:49.050

不，因为在管道中，只有在发送了整个命令集后才能获得结果（请参阅[文档](http://redis.io/topics/pipelining)），因此您可能猜到了您需要分别获取示例中每个嵌套操作的结果。

然而，使用 redis 2.6 中内置的脚本功能和一些 lua 可以实现非常相似的东西，听起来这可能适合您的账单：

```
EVAL "return redis.call('sinter', redis.call('sunion', 'a', redis.call('sunion', 'b', 'c')), redis.call('sunion', 'd', 'c'))" 
```

上面的代码是一个简化并且未经测试，但它应该让您大致了解什么是可能的。[有关此处](http://redis.io/commands/eval)文档的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:10:54.167

不，但您可以使用转换 (MULTI)

```
MULTI
SUNIONSTORE abc a b c
SUNIONSTORE cd c d
SINTERSTORE i abc cd 
SMEMBERS i
DEL abc cd i
EXEC 
```

ps 但似乎你不需要使用**c**因为它的所有成员都会放在**i中**

# jquery - 带有许多控件的 BootStrap 在移动设备上停止

> ID：12547468
> 
> 赞同：0
> 
> 时间：2012-09-22T20:30:15.320
> 
> 标签：jquery, mobile, jquery-mobile, twitter-bootstrap, mobile-safari

我正在尝试优化一个页面，该页面也使用 Twitter-BootStrap 为移动设备提供服务。该页面有超过一千个`<button>`元素。它还具有 jQuery，它将每个按钮绑定到 On click。

问题：在移动 Iphone Safari 上滚动页面不流畅，并且经常停止。

这个问题有什么可能的解决方案吗？

# javascript - iTunes Search API 不想给我它的数据

> ID：12547480
> 
> 赞同：1
> 
> 时间：2012-09-22T20:32:13.157
> 
> 标签：javascript, xmlhttprequest, itunes

我在使用 iTunes 搜索 API 时遇到了一些麻烦。[当我通过 URL（即http://itunes.apple.com/search?term=Reeder&country=fr&entity=software](http://itunes.apple.com/search?term=Reeder&country=fr&entity=software) ）直接访问数据时，我可以看到数据，但是当我通过简单脚本尝试时，数据不会加载。

```
var xhr = new XMLHttpRequest();

xhr.open('GET', 'http://itunes.apple.com/search?term=Reeder&country=fr&entity=software');
xhr.send();

xhr.addEventListener('readystatechange', function () {
    if (xhr.readyState === xhr.DONE && xhr.status === 200) {
        alert(xhr.responseText);
    }
}, false); 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:18:20.263

正如其他人所说，您的请求违反了同源政策。

不久前我遇到了这个问题，并使用 YQL 创建了 JSONP 回调（将数据包装在 javascript 函数中）。换句话说，脚本标签不受同源策略的约束

YQL： http: [//developer.yahoo.com/yql/](http://developer.yahoo.com/yql/) JSONP：[http](http://en.wikipedia.org/wiki/JSONP) ://en.wikipedia.org/wiki/JSONP （我假设你知道 JSON）

**你可以自己学习细节**（如何使用JSONP），所以我只是给你一个例子。

您的 YQL 查询将是`select * from json where url='http://itunes.apple.com/search?term=Reeder&country=fr&entity=software'`. 如果将类型更改为 JSON（在控制台中），则可以为 JSONP 指定回调。控制台： http: [//developer.yahoo.com/yql/console](http://developer.yahoo.com/yql/console) [链接](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20json%20where%20url%3D%27http%3A%2F%2Fitunes.apple.com%2Fsearch%3Fterm%3DReeder%26country%3Dfr%26entity%3Dsoftware%27&format=json&diagnostics=true&callback=mycallback)

您创建一个脚本标记并将上面的链接/url 设置为源。如您所见，JSON 数据是用函数名包装的。您应该已经定义了回调函数，它将在加载 YQL/JSON 源时调用。然后该回调函数处理 JSON 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:13:48.943

这是您浏览器的一项安全功能……您无法使用 AJAX 访问存储在其他域下的内容。谷歌的“跨域 AJAX 请求”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:14:27.413

您的请求违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

简而言之，您不能对不同的域进行 ajax 调用。您可以使用带有服务器端语言（如 php、java、nodejs 或其他）的 http 请求来完成此操作。

# c# - 如何确保只有在用户登录时才能下载文件？（无表单认证）

> ID：12547485
> 
> 赞同：0
> 
> 时间：2012-09-22T20:32:57.953
> 
> 标签：c#, asp.net, asp.net-mvc

我有一些文件可供登录用户下载，如果没有人登录，这些文件将不可用。

我检查用户是否通过一个会话打开或关闭，例如 Session["User"]

我没有使用表单身份验证。

任何提示都是有效的，即使您认为这不是最终解决方案，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:43:14.997

我会使用响应/流而不是指向实际文件的链接来提供。[这里](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)描述的东西。根据登录的用户，您可以将其添加到页面中，也可以不添加。

# java - 为什么我们不能在 Java 的 main 方法中实现方法？

> ID：12547488
> 
> 赞同：-4
> 
> 时间：2012-09-22T20:33:17.713
> 
> 标签：java

为什么这不起作用？

```
public class AddArray
{
    public static void main(String[] args) 
    {

        int[] x = {1,2,3};
        int[] y = {1,2,3};

        dd(x,y);

        public static void add(int[]a, int[]b)
        {
            int[] sum = new int[a.length];
            for (int i=0; i<a.length; i++)
                sum[i] = a[i] + b[i];
            for (int i=0; i<a.length; i++)
                System.out.println(sum[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T20:34:25.443

您不能在 Java 中的另一个方法中定义一个方法。特别是，您不能在方法中定义`main`方法。

在你的情况下，你可以写：

```
public class AddArray {

    public static void main(String[] args) {

        int[] x = {1,2,3};
        int[] y = {1,2,3};

        add (x,y);
    }

    private static void add (int[] a, int[] b) {
        int[] sum = new int[a.length];
        for (int i = 0; i < a.length; i++)
            sum[i] = a[i] + b[i];
        for (int i = 0; i < a.length; i++)
            System.out.println(sum[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T20:51:29.193

好吧，Java 不支持嵌套函数。但问题是你为什么需要那个？如果你真的有需要嵌套方法的情况，那么你可以使用`local class`.

它看起来像这样： -

```
public class Outer {
    public void methodA() {
         int someVar = 5;

         class LocalClass {
              public void methodB() {
                   /* This can satisfy your need of nested method */
              }
         }

         // You cannot do this instantiation before the declaration of class
         // This is due to sequential execution of your method..

         LocalClass lclassOb = new LocalClass();
         lclassOb.methodB();
    }
} 
```

但是，您必须注意，您的本地类仅在其定义的范围内可见。它不能有修饰符：`private`、、`public`或`static`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T20:35:16.877

方法不能在 Java 的其他方法中定义。为了编译你的`add`方法，必须从`main`方法中提取出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T20:35:28.287

因为 Java 语言规范不允许这样做。

方法直接属于一个类，不能嵌套。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T20:36:01.663

在java中，您必须将方法分开。：/ 对不起

# objective-c - 在 iOS 6.0 的 Xcode 4.5 中我没有要求的日志消息

> ID：12547490
> 
> 赞同：65
> 
> 时间：2012-09-22T20:33:28.563
> 
> 标签：objective-c, xcode, ios6

因为我将 Xcode 更新到 4.5 版并开始为 iOS 6 构建这样的日志消息，所以不断出现：

```
ADDRESPONSE - ADDING TO MEMORY ONLY 
```

我从来没有要求过（至少不是有意识的）。

我需要做什么来阻止这些消息？它们的起源是什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-25T07:15:09.150

我遇到了同样的问题，消息是从 CFNetwork 框架发出的，这发生在设备和 iOS 模拟器上。具体在 CFNetwork 上运行的字符串显示：

地址 - 不添加到磁盘或内存：%@ 地址 - 仅添加到内存：%@

我的猜测是它是由 CFCachedURLResponse 方法发出的。

更新 - 经过进一步调查，我的问题是由以下原因引起的：

```
NSURLCache *cache = [[NSURLCache alloc] initWithMemoryCapacity: memoryCapacity diskCapacity: discCapacity diskPath:[SDURLCache defaultCachePath]];
[NSURCache setSharedCache:cache]; 
```

其中 memoryCapacity == 0。将其设置为某个实际值（例如 10MB）会停止发出消息，并且似乎可以从缓存中检索对象，正如我所期望的那样。

不幸的是，根据你的观点，NSURLRequest 等行为随着 iOS 5 的变化而改变。NSURLRequestCachePolicy 现在被执行，这意味着你需要检查你的应用程序运行在哪个 iOS 版本上，并相应地调整你的缓存行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T04:33:03.810

我和你有同样的问题。我不知道，但我确实通过在`viewDidLoad`方法中使用以下形式来修复它。

```
-(void) viewDidLoad
{
  // First write my code of UI Creation.
  // Then I call 

  [super viewDidLoad]; //add [super viewDidLoad] AFTER implementation, not before.
} 
```

这对我来说很好，希望这也对你有用。

# symfony - 在 symfony 框架上集成 EWZRecaptchaBundle

> ID：12547491
> 
> 赞同：0
> 
> 时间：2012-09-22T20:33:34.913
> 
> 标签：symfony, symfony-2.0

我尝试将它集成`EWZRecaptchaBundle`到我的网站（基于 symfony 框架），但这个异常阻止了我完成我的工作。我不知道问题所在。

```
Fatal error: Declaration of EWZ\Bundle\RecaptchaBundle\Form\Type\RecaptchaType::
buildView() must be compatible with that of Symfony\Component\Form\FormTypeInterface::
buildView() in /opt/lampp/htdocs/AgencePublicite/vendor/excelwebzone/recaptcha-bundle/EWZ/Bundle/RecaptchaBundle/Form/Type/RecaptchaType.php on line 147 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:46:33.287

如果你使用的是 2.0 版本的 symfony，你不应该得到 master 版本，而是 2.0 标记的版本。然而，我没有费心使用一个包进行recaptcha，但是这个包看起来非常完整，因为它甚至支持自定义模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:59:16.323

对我来说，主版本在这一点上与 symfony 2.1.0 一起工作。但是recaptcha没有验证，我得到了一个“这个表格不应该包含额外的字段”，就像[这里提到的那样](https://stackoverflow.com/questions/14263184/symfony2-ewzrecaptchabundle-extra-fields)

# ruby - 运行 dependency.rb:247:in `to_specs': 找不到捆绑器

> ID：12547494
> 
> 赞同：8
> 
> 时间：2012-09-22T20:34:25.933
> 
> 标签：ruby, gem, bundler

当我运行 bundle 时出现以下错误

```
~/rails_apps/redmine]# bundle
/usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [RedCloth-4.2.9, ZenTest-4.8.2, actionmailer-2.3.14, actionpack-2.3.14, activerecord-2.3.14, activeresource-2.3.14, activesupport-2.3.14, cgi_multipart_eof_fix-2.5.0, daemons-1.1.5, eventmachine-0.12.10, fastercsv-1.5.5, fastthread-1.0.7, ferret-0.11.8.4, gchartrb-0.8, gem_plugin-0.2.3, icalendar-1.2.0, json-1.7.5, mongrel-1.1.5, rack-1.1.3, rails-2.3.14, rake-0.9.2.2, rmagick-2.13.1, rubygems-update-1.8.15, sqlite3-1.3.5, test-spec-0.10.0, tzinfo-0.3.33] (Gem::LoadError)
    from /usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:1208:in `gem'
    from /home/jmg810/ruby/gems/bin/bundle:18 
```

这是我的本地宝石列表，您会注意到这些宝石与本地宝石的完整列表不匹配

```
*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord-jdbc-adapter (1.2.2)
activerecord-jdbcmysql-adapter (1.2.2)
activesupport (3.2.8)
bouncy-castle-java (1.5.0146.1)
builder (3.0.3)
bundler (1.2.1)
coderay (1.0.7)
edavis10-object_daddy (0.4.3)
erubis (2.7.0)
fastercsv (1.5.5)
hike (1.2.1)
i18n (0.6.1, 0.4.2)
jdbc-mysql (5.1.13)
journey (1.0.4)
jruby-openssl (0.7.7)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
mysql (2.8.1)
mysql2 (0.3.11)
net-ldap (0.3.1)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-test (0.6.1)
rake (0.9.2.2)
rmagick (2.13.1)
ruby-openid (2.2.0, 2.1.8)
sprockets (2.1.3)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

这是我的宝石环境

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.15
  - RUBY VERSION: 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/jmg810/ruby/gems
  - RUBY EXECUTABLE: /usr/bin/ruby
  - EXECUTABLE DIRECTORY: /home/jmg810/ruby/gems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/jmg810/ruby/gems
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gempath" => []
     - "gem" => "--remote --gen-rdoc --run-tests"
     - "gemhome" => "/home/jmg810/ruby/gems"
     - "rdoc" => "--inline-source --line-numbers"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我认为问题在于它没有在我当地的宝石中寻找

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T02:29:24.823

在我的`bash_profile`我有`$PATH:~/ruby/bin`，而不是我需要`~/ruby/bin:$PATH`。它正在使用 gem in`/usr/bin`而不是`~/ruby/bin`.

# ruby-on-rails - Ruby on Rails - 在字符串中转换 Twitter @提及、#hashtags 和 URL

> ID：12547496
> 
> 赞同：2
> 
> 时间：2012-09-22T20:34:44.683
> 
> 标签：ruby-on-rails, twitter

假设我有一个字符串，其中包含从 Twitter 抓取的文本，如下所示：

```
myString = "I like using @twitter, because I learn so many new things! [line break]
Read my blog: http://www.myblog.com #procrastination" 
```

然后在视图中显示推文。但是，在此之前，我想转换字符串，以便在我看来：

1.  @twitter 链接到[http://www.twitter.com/twitter](http://www.twitter.com/twitter)
2.  URL 变成链接（其中 URL 仍然是链接文本）
3.  #procrastination 变成[https://twitter.com/i/#!/search/?q=%23procrastination](https://twitter.com/i/#!/search/?q=%23procrastination)，其中#procrastination 是链接文字

我敢肯定那里一定有一颗宝石可以让我这样做，但我找不到。我遇到了[twitter-text-rb](https://github.com/twitter/twitter-text-rb)但我不太清楚如何将其应用于上述内容。我已经使用正则表达式和其他一些方法在 PHP 中完成了它，但它有点乱！

提前感谢任何解决方案！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T20:43:36.353

[twitter-text](https://rubygems.org/gems/twitter-text) gem 为您提供了几乎所有的工作。手动安装它（`gem install twitter-text`如果需要，请使用 sudo）或将其添加到您的 Gemfile（`gem 'twitter-text'`），如果您正在使用 bundler 并执行`bundle install`.

然后在类的顶部包含 Twitter 自动链接库（`require 'twitter-text'`和），并使用输入字符串作为参数调用该方法，它将为您提供自动链接版本`include Twitter::Autolink``auto_link(inputString)`

完整代码：

```
require 'twitter-text'
include Twitter::Autolink

myString = "I like using @twitter, because I learn so many new things! [line break] 
Read my blog: http://www.myblog.com #procrastination"

linkedString = auto_link(myString) 
```

如果你输出linkedString的内容，你会得到以下输出：

```
I like using @<a class="tweet-url username" href="https://twitter.com/twitter" rel="nofollow">twitter</a>, because I learn so many new things! [line break] 
Read my blog: <a href="http://www.myblog.com" rel="nofollow">http://www.myblog.com</a> <a class="tweet-url hashtag" href="https://twitter.com/#!/search?q=%23procrastination" rel="nofollow" title="#procrastination">#procrastination</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:42:13.637

使用[jQuery Tweet Linkify](https://github.com/terenceponce/jquery.tweet-linkify)

一个小型 jQuery 插件，可将 @mention 文本转换为指向实际 Twitter 个人资料的超链接，将 #hashtag 文本转换为真正的主题标签搜索，以及将超链接文本转换为实际超链接

# macos - 具有自定义频率和持续时间的蜂鸣声

> ID：12547499
> 
> 赞同：3
> 
> 时间：2012-09-22T20:35:18.953
> 
> 标签：macos, cocoa, audio, monomac

我想在我的 Mac Os X 中播放哔声并指定持续时间和频率。在 Windows 上，可以使用[Beep 功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277%28v=vs.85%29.aspx)（.Net 中的[Console.Beep ）来完成。](http://msdn.microsoft.com/en-us/library/4fe3hdb1.aspx)Mac有什么等价的吗？我知道 NSBeep 但它不带任何参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T22:16:20.200

在 Mac 上，系统警报声音是用户选择的采样（预录）声音。它通常听起来不像哔哔声——它可能是喇叭声、砰砰声、喇叭声或其他不能作为固定形状、频率和幅度的简单恒定波形的声音。它甚至可以是用户声音的录音，或者是电视节目、电影、游戏或歌曲的剪辑。

它也不必只是一个声音。可访问性选项之一是在播放警报声时闪烁屏幕；这会在您播放警报声音（或自定义警报声音）时自动发生，但不会在您通过常规声音播放 API（如 NSSound）播放声音时发生。

因此，没有简单的方法可以播放具有指定和恒定形状、频率和幅度的自定义哔声。任何这样的蜂鸣声都会与用户选择的警报声音不同，并且用户可能根本察觉不到。

要在 Mac 上播放警报声，请使用`NSBeep`或稍微复杂一点的`AudioServicesPlayAlertSound`. 后者允许您使用自定义声音，但即使这些声音也必须预先录制，或者至少由您的应用程序预先使用更多的 Core Audio 代码生成，而不是值得编写。

我建议使用`NSBeep`. 这是尊重用户选择的一行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:30:48.710

PortAudio 在这里有跨平台的 C 代码：[https ://subversion.assembla.com/svn/portaudio/portaudio/trunk/examples/paex_sine.c](https://subversion.assembla.com/svn/portaudio/portaudio/trunk/examples/paex_sine.c)

该特定样本在左右扬声器上产生音调，但没有显示频率是如何计算的。为此，您可以使用此代码中的公式：[Java 中是否有一个库可以不断发出特定频率？](https://stackoverflow.com/questions/11331485/is-there-an-library-in-java-for-emitting-a-certain-frequency-constantly)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-16T15:13:31.757

我需要一个类似的应用程序功能。我最终编写了一个小型的、可重用的类来为我处理这个问题。

[来源在 GitHub](https://github.com/picciano/iOS-Tone-Generator "GitHub链接")

一个可重用的类，用于生成具有指定频率和幅度的简单正弦波形音频。可以连续播放或指定持续时间。

界面相当简单，如下所示：

```
@interface TGSineWaveToneGenerator : NSObject
{
    AudioComponentInstance toneUnit;

@public
    double frequency;
    double amplitude;
    double sampleRate;
    double theta;
}

- (id)initWithFrequency:(double)hertz amplitude:(double)volume;
- (void)playForDuration:(float)time;
- (void)play;
- (void)stop;

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-14T03:06:03.647

这是使用较新的 AVAudioEngine/AVAudioNode API 和 Swift 执行此操作的方法：

```
import AVFoundation
import Accelerate

// Specify the audio format we're going to use
let sampleRateHz = 44100
let numChannels = 1
let pcmFormat = AVAudioFormat(standardFormatWithSampleRate: Double(sampleRateHz), channels: UInt32(numChannels))

let noteFrequencyHz = 440
let noteDuration: NSTimeInterval = 1

// Create a buffer for the audio data
let numSamples = UInt32(noteDuration * Double(sampleRateHz))
let buffer = AVAudioPCMBuffer(PCMFormat: pcmFormat, frameCapacity: numSamples)
buffer.frameLength = numSamples  // the buffer will be completely full

// The "standard format" is deinterleaved float, so we can assume the stride is 1.
assert(buffer.stride == 1)
for channelBuffer in UnsafeBufferPointer(start: buffer.floatChannelData, count: numChannels) {
    // Generate a sine wave with the specified frequency and duration
    var length = Int32(numSamples)
    var dc: Float = 0
    var multiplier: Float = 2*Float(M_PI)*Float(noteFrequencyHz)/Float(sampleRateHz)
    vDSP_vramp(&dc, &multiplier, channelBuffer, buffer.stride, UInt(numSamples))
    vvsinf(channelBuffer, channelBuffer, &length)
}

// Hook up a player and play the buffer, then exit
let engine = AVAudioEngine()
let player = AVAudioPlayerNode()
engine.attachNode(player)
engine.connect(player, to: engine.mainMixerNode, format: pcmFormat)
try! engine.start()
player.scheduleBuffer(buffer, completionHandler: { exit(1) })
player.play()

NSRunLoop.mainRunLoop().run()  // Keep running in a playground 
```

# eclipse - 如何在 Eclipse 中监控 JBoss 端口

> ID：12547501
> 
> 赞同：0
> 
> 时间：2012-09-22T20:35:21.650
> 
> 标签：eclipse, jboss7.x

如何使用 Eclipse 监控 JBoss http 端口？当我打开监视器属性并尝试在 JBoss 服务器上添加一个端口时，没有列出任何端口。Glassfish 例如在那里显示两个端口，管理服务器端口 (4848) 和服务器端口 (8080)。

JBoss AS 7.1.1，Eclipse 朱诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:56:26.110

如果我理解正确，这就是你想要的。**Jboss AS7 也一样**

![Eclipse 服务器属性](../Images/3f17bf68fcfa4362e17d8a0f98632d87.png)

添加服务器时，双击它。请参阅右上角的端口将显示。如果要添加未列出的端口，请右键单击服务器，选择`Monitoring`，然后选择“ `Properties`”，然后从那里添加端口。

![在此处输入图像描述](../Images/eb1a982a7d9c9ebcdb331c73c25a8407.png)

# c++ - c++ unique_ptr 参数传递

> ID：12547502
> 
> 赞同：13
> 
> 时间：2012-09-22T20:35:23.560
> 
> 标签：c++, c++11, unique-ptr, rvalue-reference

假设我有以下代码：

```
class B { /* */ };

class A {
    vector<B*> vb;
public:
    void add(B* b) { vb.push_back(b); }
};

int main() {

    A a;
    B* b(new B());
    a.add(b);
} 
```

假设在这种情况下，所有原始指针`B*`都可以通过`unique_ptr<B>`.

令人惊讶的是，我无法找到如何使用`unique_ptr`. 经过几次尝试，我想出了以下代码，它可以编译：

```
class A {
    vector<unique_ptr<B>> vb;
public:
    void add(unique_ptr<B> b) { vb.push_back(move(b)); }
};

int main() {

    A a;
    unique_ptr<B> b(new B());
    a.add(move(b));
} 
```

所以我的简单问题是：这是做到这一点的方法吗？特别是，这是`move(b)`唯一的方法吗？（我在考虑右值引用，但我不完全理解它们。）

如果您有一个链接，`unique_ptr`其中包含我无法找到的移动语义的完整解释等，请不要犹豫，分享它。

编辑根据[http://thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)，我的代码似乎没问题。

实际上， std::move 只是语法糖。对于 X 类的对象 x，`move(x)`与：

```
static_cast <X&&>(x) 
```

需要这 2 个移动函数，因为强制转换为右值引用：

1.  防止函数“add”按值传递
2.  使用`push_back`B 的默认移动构造函数

显然，如果我将“添加”函数更改为通过引用（普通左值引用）传递，`std::move`我不需要第二个。`main()`

不过，我想确认一下这一切……

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T12:23:24.733

是的，应该这样做。您明确地将所有权从 转移`main`到`A`。这与您之前的代码基本相同，除了它更明确且更可靠。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-22T14:16:36.407

我有点惊讶，这里没有非常清楚和明确地回答这个问题，也没有在我容易偶然发现的任何地方回答。虽然我对这些东西很陌生，但我认为可以说以下内容。

这种情况是一个调用函数，它构建一个`unique_ptr<T>`值（可能通过将调用的结果强制转换`new`为就像这里发生的那样进入a `vector`）。为了表明调用者已经获得了所有权，并准备放弃它，传递一个`unique_ptr<T>`值是适当的。据我所知，传递这样一个值的三种合理模式。

1.  按值传递，如`add(unique_ptr<B> b)`问题中所示。
2.  通过非`const`左值引用传递，如`add(unique_ptr<B>& b)`
3.  通过右值引用传递，如`add(unique_ptr<B>&& b)`

通过`const`左值引用传递是不合理的，因为它不允许被调用的函数获得所有权（并且`const`右值引用会比这更愚蠢；我什至不确定它是否被允许）。

就有效代码而言，选项 1 和 3 几乎是等价的：它们强制调用者写入一个右值作为调用的参数，可能通过在调用中包装一个变量`std::move`（如果参数已经是一个右值，即未命名）就像从 的结果中进行的强制转换一样`new`，这不是必需的）。*然而，在选项 2 中，不允许*传递右值（可能来自`std::move`），并且必须使用命名变量调用函数（当传递来自 的强制转换时，必须先分配给变量）。*`unique_ptr<T>``new`*

 *当`std::move`确实使用时，`unique_ptr<T>`在调用者中保存该值的变量在概念上被取消引用（转换为右值，分别转换为右值引用），并且此时放弃所有权。在选项 1 中，取消引用是真实的，并且值被移动到传递给被调用函数的临时值（如果调用函数将检查调用者中的变量，它会发现它已经持有一个空指针）。所有权已经转移，调用者不可能决定不接受它（对参数不做任何事情会导致指向的值在函数退出时被销毁；`release`在参数上调用方法会阻止这种情况，但只会导致内存泄漏）。令人惊讶的是，选项 2\. 和 3\. 在*语义上*在函数调用期间等效，尽管它们对调用者需要不同的语法。如果被调用函数将参数传递给另一个采用右值的函数（例如`push_back`方法），则`std::move`必须在两种情况下都插入，这将在该点转移所有权。如果被调用函数忘记对参数做任何事情，那么调用者会发现自己仍然拥有该对象（如果为它持有一个名称）（如选项 2 中的强制要求）；尽管如此，在案例 3 中，由于函数原型要求调用者同意释放所有权（通过调用`std::move`或提供临时）。总而言之，这些方法可以

1.  强制调用者放弃所有权，并确保实际声明它。
2.  强制调用者*拥有*所有权，并准备（通过提供非`const`引用）放弃它；然而，这不是明确的（不需要`std::move`甚至不允许调用），也不能保证所有权。我认为这种方法的意图相当不清楚，除非明确表示是否获得所有权由被调用函数自行决定（可以想象一些用途，但调用者需要注意）
3.  强制调用者明确表示放弃所有权，如 1 所示。（但所有权的实际转移延迟到函数调用时刻之后）。

选项 3 的意图相当明确；如果实际拥有所有权，这对我来说是最好的解决方案。它比 1 稍微高效一点，因为没有指针值被移动到临时对象（调用`std::move`实际上只是强制转换并且没有任何成本）；如果指针在实际移动其内容之前通过几个中间函数传递，这可能特别相关。

这是一些可以试验的代码。

```
class B
{
  unsigned long val;
public:
  B(const unsigned long& x) : val(x)
  { std::cout << "storing " << x << std::endl;}
  ~B() { std::cout << "dropping " << val << std::endl;}
};

typedef std::unique_ptr<B> B_ptr;

class A {
  std::vector<B_ptr> vb;
public:
  void add(B_ptr&& b)
  { vb.push_back(std::move(b)); } // or even better use emplace_back
};

void f() {
    A a;
    B_ptr b(new B(123)),c;
    a.add(std::move(b));
    std::cout << "---" <<std::endl;
    a.add(B_ptr(new B(4567))); // unnamed argument does not need std::move
} 
```

如所写，输出为

```
storing 123
---
storing 4567
dropping 123
dropping 4567 
```

请注意，值按存储在向量中的顺序销毁。尝试更改方法的原型`add`（必要时调整其他代码以使其编译），以及它是否实际上传递了它的参数`b`。可以获得输出线的几种排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T14:22:21.140

> 所以我的简单问题是：这是这样做的方法吗？特别是，这是“move(b)”的唯一方法吗？（我在考虑右值引用，但我并不完全理解它......）
> 
> 如果你有一个完整解释移动语义的链接，unique_ptr...我找不到，不要犹豫。

[无耻插件](https://stackoverflow.com/questions/3106110/)，搜索标题“移入会员”。它准确地描述了您的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T05:23:35.330

从 C++14 开始，您的代码`main`可以简化一点：

```
a.add( make_unique<B>() ); 
```

您可以将`B`' 的构造函数的参数放在内括号内。

* * *

您还可以考虑一个拥有原始指针所有权的类成员函数：

```
void take(B *ptr) { vb.emplace_back(ptr); } 
```

相应的代码`main`是：

```
a.take( new B() ); 
```

* * *

另一种选择是使用*完美转发*来添加向量成员：

```
template<typename... Args>
void emplace(Args&&... args)
{ 
    vb.emplace_back( std::make_unique<B>(std::forward<Args>(args)...) );
} 
```

和main中的代码：

```
a.emplace(); 
```

和以前一样，您可以将构造函数参数`B`放在括号内。

[链接到工作示例](http://goo.gl/oDwZjz)*

# wordpress - htaccess rewrite_rule 导致循环；wordpress 内部服务器错误

> ID：12547510
> 
> 赞同：1
> 
> 时间：2012-09-22T20:36:23.340
> 
> 标签：wordpress, .htaccess, loops, rewrite, internal

几天前，我们的网站受到了几个确定的引荐网站的攻击。错误日志每天都会充满大约 1Gb 的失败请求，并且在 wordpress 安装中存在大量内部服务器错误。

为了避免这种情况，我编写了以下 htaccess 重写规则来阻止来自特定引用者的流量。到目前为止，他们提供了帮助，该页面提高了它的可用性。但是，尽管错误日志现在已填充：[Sat Sep 22 13:14:29 2012] [error] [client 188.32.141.123] 由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用'LogLevel debug'来获得回溯。，参考：[http ://www.aztecmebel.ru/index.php?productID=1883&picture_id=3919](http://www.aztecmebel.ru/index.php?productID=1883&picture_id=3919) 我假设重写规则 [F] 通过将引用者发送到再次被重写的失败页面来导致循环......知道如何停止吗？例如，如果已经应用了一次规则，就不再这样做了吗？我想避免 eerrorlog 被进一步填满......并且不必要的循环会占用 CPU......

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L]

RewriteCond %{HTTP_REFERER} aztecmebel\.ru [NC,OR]
RewriteCond %{HTTP_REFERER} www\.aztecmebel\.ru [NC,OR]
RewriteCond %{HTTP_REFERER} thanglongflc\.edu\.vn [NC,OR]
RewriteCond %{HTTP_REFERER} www\.thanglongflc\.edu\.vn [NC,OR]
RewriteCond %{HTTP_REFERER} gornji-rahic\.net [NC,OR]
RewriteCond %{HTTP_REFERER} www\.gornji-rahic\.net [NC,OR]
RewriteCond %{HTTP_REFERER} ams\.co\.th [NC,OR]
RewriteCond %{HTTP_REFERER} www\.ams\.co\.th [NC,OR]
RewriteCond %{HTTP_REFERER} yuanzhixing\.com [NC,OR]
RewriteCond %{HTTP_REFERER} www\.yuanzhixing\.com [NC,OR]
RewriteCond %{HTTP_REFERER} forumdownload\.net [NC,OR]
RewriteCond %{HTTP_REFERER} www\.forumdownload\.net [NC,OR]
RewriteCond %{HTTP_REFERER} ybcz\.cn [NC,OR]
RewriteCond %{HTTP_REFERER} www\.ybcz\.cn
RewriteRule .* - [F] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:44:08.493

> 我假设重写规则 [F] 通过将引用者发送到再次被重写的失败页面来导致循环......知道如何停止吗？

这可能是导致它的原因，特别是如果您有自定义错误文档。发生循环的原因是因为您将重定向状态检查为`200`，但`F`标志使状态成为`403`。尝试更改第一条规则以匹配 403：

```
RewriteCond %{ENV:REDIRECT_STATUS} 403
RewriteRule .* - [L] 
```

# mongodb - MongoDB中的确保索引

> ID：12547526
> 
> 赞同：3
> 
> 时间：2012-09-22T20:38:38.677
> 
> 标签：mongodb

一些问题：

1.  如果我在一个已经被索引的字段上确保索引，它会重新索引还是简单地说“是”，我已经索引了？
2.  如果某些开发人员的机器上尚不存在该集合，mongo 会启动索引吗？
3.  我是否需要再次确保索引或调用它一次就够了？
4.  索引何时“安全”？一定需要一些时间......在那段时间里我的数据库被锁定了吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T20:59:43.877

1.  冗余调用`ensureIndex`是无操作的。
2.  如果调用中引用的集合`ensureIndex`不存在，它将被创建。
3.  一次就够了。
4.  除非您指定该[`background: true`](http://www.mongodb.org/display/DOCS/Indexes#Indexes-background:true)选项，否则创建索引会阻止其他数据库操作。

**MongoDB 3.0 更新**

`ensureIndex`在 v3.0 中已弃用，现在是 的别名[`createIndex`](https://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#db-collection-createindex)，因此`createIndex`应改为使用。行为保持不变。

# asp.net-mvc - 在 ASP.Net MVC 3 项目的布局页面中实现表单的最佳方法

> ID：12547529
> 
> 赞同：2
> 
> 时间：2012-09-22T20:39:03.877
> 
> 标签：asp.net-mvc

我的网站在每个页面都基于的布局页面中有一个登录框。单击登录按钮时，无论成功或失败，都会将用户转到单击登录按钮的同一页面。登录表单发布到 Account.Login 操作方法。但是，如何在此操作方法结束时返回正确的视图？我还想在登录框旁边显示错误信息，即：在登录失败的情况下错误的用户名/密码。

设计和实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:46:32.373

只需在成功登录时进行重定向。

```
return RedirectToAction("Index", "Home"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:47:03.593

```
[HttpPost]
public ActionResult Login(LoginModel model)
{
    if(ModelState.IsValid)
    {
       //TODO : Log user in

       return View("ValidModelView");  
    }

    // If login model is not valid
    return View("InvalidModelView"); 
} 
```

一种方法可能是这样。但是，我不确定它是否是最好的。

# ruby-on-rails - 嵌套表单显示错误

> ID：12547543
> 
> 赞同：0
> 
> 时间：2012-09-22T20:41:40.240
> 
> 标签：ruby-on-rails, nested-forms, has-many

我有以下新幼儿园的申报表

```
<%= form_for @kindergarten, :html => {:multipart => true}  do |f|%>

            <%= render 'shared/error_messages', object: f.object %>
        </br>   
            <%= f.fields_for :photos do |p| %>
                <%= p.label 'upload photo'%>
                <%= p.file_field :image %>
            <% end %>
        </br>
            <%= render 'about_company', f: f%>
        </br>
            <%= render 'contact', f: f %>
            <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
        <%end%> 
```

这背后的逻辑是1个幼儿园可以有多张照片。

以下是模型声明：

幼儿园

```
has_many :photos, limit: 7, dependent: :destroy   
accepts_nested_attributes_for :photos 
```

照片

```
 attr_accessible :image, :logo, :kindergarten_id
  belongs_to :kindergarten
  mount_uploader :image, ImageUploader

  validates :kindergarten_id, presence: true
  validates :image, presence: true 
```

幼儿园控制器的外观如下：

```
 def new
    @kindergarten = Kindergarten.new
    @kindergarden.photos.build
  end 
```

现在，当@kindergarten new 生成时，我收到以下错误：

```
undefined method 'photos' for nil:NilClass

Application Trace | Framework Trace | Full Trace
app/controllers/kindergartens_controller.rb:5:in `new' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:12:12.797

你写`@kindergarden.photos.build`的不是`@kindergarten.photos.build`. 我希望错字不在实际代码中。也试试`@kindergarten=Kindergarten.create`。如果你调用 new 只是创建一个未保存的记录，然后应该调用 save 方法。这可能是 NilClass 错误的原因。

# c++ - 当我使用模板时，编译器无法将函数的返回类型从 double 转换为 int

> ID：12547546
> 
> 赞同：0
> 
> 时间：2012-09-22T20:42:06.527
> 
> 标签：c++, templates, casting

这段代码给出了关于从 double 转换为 int 的警告。

```
template <class T>
int f(T x)
{
    return x;    
}

int main()
{
    cout << f(3.5);
    return 0;
} 
```

但是，当我不使用模板时，如下所示，它可以从 double 转换为 int 并打印 3。

```
int f(float x)
{
    return x;    
}

int main()
{
    cout << f(3.5);
    return 0;    
} 
```

虽然它可以编译非模板样本，但无法编译模板样本。我想知道为什么使用模板时编译器无法进行转换。

为什么我使用模板时编译器不能将函数的返回类型从 double 转换为 int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:47:02.297

它可以，但它也可能怀疑你犯了一个错误。警告就是这样 - 告诉您*可能*存在问题。

您可以通过添加强制转换来告诉编译器转换是故意的

```
return static_cast<int>(x); 
```

# hibernate - 更新后休眠的 java.text.ParseException 问题

> ID：12547547
> 
> 赞同：0
> 
> 时间：2012-09-22T20:42:07.853
> 
> 标签：hibernate, date-formatting

我有一个动作类，我在其中使用 simpledateformat 进行日期格式转换，我的问题是 java.text.ParseException，当我在对类对象成功更新后选择要在我的 getjson 响应中使用它的列表时引发 java.text.ParseException（日期字段除外) 使用休眠。当我还使用休眠更新班级中的日期字段时，什么也没有发生。

这是我使用的代码：

```
Date d;
  String newformat = "dd/MM/yyyy";
  String oldformat= "yyyy-MM-dd";
  SimpleDateFormat sdf;
this.mapjourferiejson=new LinkedHashMap<Integer,List<String>>();
  List<String> infostring=new  ArrayList<String>();
//function doing the hql request
  List<JourFerie> listjourferiejson=jourferieservice.findAll();
try
  {
  for(JourFerie jourferie:listjourferiejson)
  {
     sdf= new SimpleDateFormat(oldformat);
     System.out.println("la date est : "+jourferie.getDate());
     d = sdf.parse(jourferie.getDate().toString());
     sdf.applyPattern(newformat);
     infostring.add(sdf.format(d));
     infostring.add(jourferie.getNombrejours().toString());
     infostring.add(jourferie.getOccasion()); 
     this.mapjourferiejson.put(jourferie.getJourferieId(), infostring);
     //je vide le set pour un autre reutilisation
     infostring=new  ArrayList<String>();
  }  
  }catch(ParseException e)
  {
    e.printStackTrace();
    System.out.println("erreur dans le parsing");

  } 
```

这是我所有解析日期的日志：日期：2012-01-01 日期：2012-01-01 日期：2012-01-02 日期：2012-01-02 日期：2012-01-03日期：2012 年 1 月 11 日星期三 00:00:00 WAT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:22:47.257

我开始回答以提出一些观点（尝试自己做一些）。

```
d = sdf.parse(jourferie.getDate().toString());
// is doing type conversion like Date => String => Date
// why ? why not d = jourferie.getDate(); ? 
```

但 getDate() 是一种 Java 方法，字符串格式使用 Java VM 语言环境。此格式与 SQL 中的 MySQL 格式无关。

# signalr - 确定客户端重新连接到服务器

> ID：12547548
> 
> 赞同：0
> 
> 时间：2012-09-22T20:42:34.497
> 
> 标签：signalr, signalr-hub

我在服务器上使用客户端断开事件来确定客户端何时与服务器断开连接。但我需要知道客户端何时重新连接。我可以这样做吗？我在移动设备上的 WebView 中运行 SignalR，我假设信号丢失会导致 SignalR 断开连接在服务器上触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:44:21.083

尝试让您的 Hub 实现 IConnected 接口，更多信息请[点击此处](https://github.com/SignalR/SignalR/wiki/Hubs)。

这为您提供了这些方法：

```
Task Disconnect()
Task Connect()
Task Reconnect(IEnumerable<string> groups) 
```

# php - PHP cURL 快速检查网站是否存在

> ID：12547550
> 
> 赞同：1
> 
> 时间：2012-09-22T20:42:50.417
> 
> 标签：php

> **可能重复：**
> [cURL 多同时请求（域检查）](https://stackoverflow.com/questions/12515740/curl-mult-simultaneous-requests-domain-check)

我正在尝试检查网站是否存在。（如果它响应就足够了）问题是我的域数组是 20,000，我正试图尽可能加快这个过程。

我做了一些研究，发现这个页面详细介绍了同时的 cURL 请求 - > [http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/](http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/)

我还发现这个页面似乎是检查域网页是否启动的好方法-> [http://www.wrichards.com/blog/2009/05/php-check-if-a-url-exists-with -卷曲/](http://www.wrichards.com/blog/2009/05/php-check-if-a-url-exists-with-curl/)

关于如何快速检查 20,000 个域以查看它们是否已启动的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:44:27.093

```
$http = curl_init($url);
$result = curl_exec($http);
$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
curl_close($http);
if($http_status == 200) // good here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:52:58.250

看看[RollingCurl](https://github.com/LionsAd/rolling-curl)

它允许您执行多个 curl 请求。这是一个例子：

```
 require 'curl/RollingCurl.php';
    require 'curl/RollingCurlGroup.php';

    $rc = new RollingCurl('handle_response');
            $rc->window_size = 2;

            foreach($domain_array as $domain => $value)
            {

                 $request = new RollingCurlRequest($value);

                // echo $temp . "\n";

                    $rc->add($request);

            }

            $rc->execute();

    function handle_response($response, $info)
    {

            if($info['http_code'] === 200)
            {
                // site exists handle response data
            }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:01:31.603

我认为，如果您真的想加快进程并节省大量带宽（我让您计划定期检查可用性），那么您应该使用套接字，而不是 curl。您可以一次打开多个套接字并安排每个套接字的“异步”处理。那么你需要发送的不是“GET $sitename/ HTTP/1.0\r\n\r\n”请求，而是“HEAD $sitename/ HTTP/1.0\r\n\r\n”。它将返回与 GET 请求返回的状态代码相同的状态代码，但没有响应正文。您只需要解析第一行响应即可获得答案，因此您只需使用良好的响应代码对其进行 regex_match 即可。作为一项额外的优化，最终您的代码将了解哪些站点位于相同的 IP 上，因此您可以缓存名称映射并按 IP 对列表进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:49:21.150

您可以使用多个 curl 请求，但您可能希望一次将它们限制为 10 个左右。您必须在单独的数据库中跟踪作业以处理队列：[PHP 中的线程](https://stackoverflow.com/questions/2585656/threads-in-php)

# php - PHP 试图将段落拆分成句子。保留标点符号

> ID：12547560
> 
> 赞同：2
> 
> 时间：2012-09-22T20:43:51.797
> 
> 标签：php, regex

基本上我正在接受一个充满各种标点符号的段落，例如！? . ; " 并将它们拆分成句子。我面临的问题是想出一种方法，将它们拆分成完整的标点符号的句子，同时考虑对话中的引用

例如以下段落：

> 一天早上，当格里高尔·萨姆萨从噩梦中醒来时，他发现自己在床上变成了一只可怕的害虫。“发生了什么！？” 他问自己。“我不知道。” 萨姆沙说，“也许这是个噩梦。” 他躺在盔甲般的背上，稍微抬起头，就能看到他棕色的腹部，略呈拱形，被拱形分成僵硬的部分。

需要像这样分开

```
[0] One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin. 

[1] "What has happened!?" he asked himself.

[2] "I... don't know." said Samsa, "Maybe this is a bad dream." 
```

等等。

目前我只是在使用爆炸

```
$sentences = explode(".", $sourceWork); 
```

并且仅按句点将其拆分并在末尾附加一个。我知道这与我想要的相去甚远，但我不太确定从哪里开始处理这个问题。如果有人至少能指出我在哪里寻找想法的正确方向，那将是惊人的。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:03:14.173

这是我所拥有的：

```
<?php

/**
 * @param string $str                          String to split
 * @param string $end_of_sentence_characters   Characters which represent the end of the sentence. Should be a string with no spaces (".,!?")
 *
 * @return array
 */
function split_sentences($str, $end_of_sentence_characters) {
    $inside_quotes = false;
    $buffer = "";
    $result = array();
    for ($i = 0; $i < strlen($str); $i++) {
        $buffer .= $str[$i];
        if ($str[$i] === '"') {
            $inside_quotes = !$inside_quotes;
        }
        if (!$inside_quotes) {
            if (preg_match("/[$end_of_sentence_characters]/", $str[$i])) {
                $result[] = $buffer;
                $buffer = "";
            }
        }
    }
    return $result;
}

$str = <<<STR
One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin. "What has happened!?" he asked himself. "I... don't know." said Samsa, "Maybe this is a bad dream." He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.
STR;

var_dump(split_sentences($str, ".")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:48:29.077

```
preg_split('/[.?!]/',$sourceWork); 
```

这是非常简单的正则表达式，但我认为你的任务是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:57:40.047

您需要手动检查您的字符串并进行爆炸。跟踪引用计数，如果是奇数不要中断，这是一个简单的想法：

```
 <?
//$str = 'AAA. BBB. "CCC." DDD. EEE. "FFF. GGG. HHH".';
$str = 'One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin. "What has happened!?" he asked himself. "I... don\'t know." said Samsa, "Maybe this is a bad dream." He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections.';
$last_dot=0;
$quotation=0;
$explode_list = Array();
for($i=0;$i < strlen($str);$i++)
{
    $char = substr($str,$i,1);//get the currect character
    if($char == '"') $quotation++;//track quotation
    if($quotation%2==1) continue;//nothing to do so go back

    if($char == '.')
    {
        echo "char is $char $last_dot<br/>";
         $explode_list[]=(substr($str,$last_dot,$i+1-$last_dot));
         $last_dot = $i+1;
    }
}

echo "testing:<pre>";
print_r($explode_list);; 
```

# jquery-mobile - JQuery Mobile 版本 1.1.1 - Listview 子 LI 内的页面

> ID：12547561
> 
> 赞同：0
> 
> 时间：2012-09-22T20:43:53.440
> 
> 标签：jquery-mobile

我在将页面添加到列表视图子列表 (li) 时遇到问题。

我正在做这样的事情：

```
<ul data-role="listview">
      <li><a href="#">Click me</a>
            <ul>
               <li data-role="page">
                     <div data-role="header" data-position="fixed">
              <h1>Page Title</h1>
           </div>

           <div data-role="content">
              <p>Page content goes here.</p> 
           </div>

           <div data-role="footer" data-position="fixed">
               <h4>Page Footer</h4>
           </div>
         </li>
        </ul>
       </li>
         </ul> 
```

有没有更好的方法来做到这一点，因为我有一些问题......

*   *   固定的页眉和页脚在 IOS 6 (iphone 3GS) 上不起作用
*   *   填充和边距需要设置为 0。

这是最好的方法吗？

通常一个列表将包含一个带有链接的子列表，但我想子列表以包含页面详细信息（信息页面）。

更新：尝试此操作，但链接未链接到已生成的页面：

```
$.each(data.id, function(index, value){

output += <li>\
<a href="#mypage">\
<h3 class="h3_title">link title</h3>\
</a>\
</li>\
<div id="mypage" data-role="page">\
<div data-role="header" data-position="fixed">\
<h1>Page Title sub</h1>\
</div>\
<div data-role="content">\
one<br/>\
</div>\
<div data-role="footer" data-position="fixed">\
<h4>Page Footer</h4>\
</div>\
</div>';

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:55:35.843

您可以将页面添加为 ul 标记之外的单独 div 并使 li 成为它的链接。例如：

```
<div id="your-current-page" data-role="page">
  <ul data-role="listview">
  .
  .
  .
    <li><a href="#your-second-page">Click me</a>
  .
  .
  .
  </ul>
</div>
<div id="your-second-page" data-role="page">
  You can put here whatever you'd like
</div> 
```

# uitableview - 有没有办法改变 UICollectionViews 的动画速度？

> ID：12547562
> 
> 赞同：6
> 
> 时间：2012-09-22T20:43:59.530
> 
> 标签：uitableview, ios6, uicollectionview

我说的是`insertItemsAtIndexPaths`or之类的东西`moveItemAtIndexPath:toIndexPath:`。我曾尝试将其包装在动画块中，但这不起作用。动画似乎停留在 0.25 或 0.3 秒，但我想放慢速度。除了自己实现这个不值得麻烦的运动之外，有谁知道这是否可以通过公共 API 实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T15:53:11.133

绝对地！但是你不能使用`UIView`动画块正确地做到这一点。您需要深入研究核心动画。

集合视图有助于将动画添加到`CALayer`支持每个`UICollectionViewCell`. 但是，如果您实现自己的布局（或子类化现有布局），您可以在`finalizeCollectionViewUpdates`方法中对这些动画进行所有必要的修改。

从`UICollectionViewLayout`类文档中：

> 集合视图调用此方法作为之前的最后一步，以动画任何更改到位。

以下是如何用您自己的替换默认位置动画的示例：

```
- (void)finalizeCollectionViewUpdates
{
    for (UICollectionViewCell *cell in [self.collectionView visibleCells])
    {
        CAAnimation *positionAnimation = [cell.layer animationForKey:@"position"];
        if (positionAnimation)
        {
            [cell.layer removeAnimationForKey:@"position"];

            CALayer *presentationLayer = cell.layer.presentationLayer;
            CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
            [animation setFromValue:[NSValue valueWithCGPoint:presentationLayer.position]];
            [animation setToValue:[NSValue valueWithCGPoint:cell.layer.position]];
            [animation setDuration:0.4];

            [cell.layer addAnimation:animation forKey:@"position"];
        }
    }
} 
```

查看与动画相关的方法`CALayer`，了解如何深入了解图层上当前正在运行的动画。

使用这种方法，您甚至可以发挥创意并使用`CAKeyframeAnimation`或您能想到的任何其他方式添加过冲/反弹效果。您还可以做一些事情，例如选择性地禁用某些动画（如大小）并保留其他动画（如位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T11:35:11.680

从这里复制过来：[https ://stackoverflow.com/a/18392148/1751266](https://stackoverflow.com/a/18392148/1751266)

您可以使用 CALayer 更改任何动画速度。所以对于 UICollectionView 这看起来像下面这样：

```
[self.collectionView.viewForBaselineLayout.layer setSpeed:0.1f]; 
```

你可以改回原来的速度：

```
[self.collectionView.viewForBaselineLayout.layer setSpeed:1.0f]; 
```

为此，您可能需要导入 QuartzCore：

```
#import <QuartzCore/QuartzCore.h> 
```

请记住，它会影响同一层上的任何其他动画，包括动画 UIImageView 等，因此它们可能需要补偿。

# java - 逐个字母比较两个字符串

> ID：12547564
> 
> 赞同：2
> 
> 时间：2012-09-22T20:44:02.110
> 
> 标签：java, char

好吧，我有两个字符串要逐个比较和检查它们是否匹配，如果命中“-”，我需要按顺序计算有多少“-”并将它们放在一个组中，就好像它们只是一个字符一样数一数这组'-'中有多少个T和C。输出应该是2.1T和2.2C，另一个是5.2C。

```
 String dna1 = "TC---CA--";  
    String dna2 = "TCTCCCACC";
    char[] dnaChar = dna1.toCharArray(), dna2Char = dna2.toCharArray();
    int cont = 0;
    int letters = 0;

    for (int i = 0; i < dnaChar.length; i++) {
        if (dnaChar[i] != dna2Char[i]) {
            int mut = i + 1;

            if (dna1.charAt(i) == '-') {

                cont++;
                mut -= cont;
                if (dna2.charAt(i) == 'C') {
                    letters++;
                }

                System.out.println(mut + "." + letters + dna2.charAt(i));
            } else {
                letters = 0;
                cont = 0;
                mut += 1;
                System.out.println("" + dna1.charAt(i) + " " + mut + " " + dna2.charAt(i));
            }
        }
    } 
```

输出 2.0T 2.1C 2.2C 4.3C 4.4C 而我想要的 2.1T 2.2C 5.2C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:05:37.337

您期望的输出永远不会从您的上述代码中获得。因为在您的 if 构造中，每次您在第一个字符串中遇到“-”时都会执行..因此您将有 5 个输出，而不是 3..

其次，为了得到你需要的东西，你必须在这里做一些额外的工作。

*   首先，当您在第一个字符串中遇到“-”时，您需要将第二个字符串中的相应字符存储到某个变量中。因为您需要它来检查连续字符。
*   其次，每次得到一个'-'，检查当前字符是否与前一个'-'匹配的最后一个字符。如果相同，则将计数增加 1，
*   如果不一样，只需打印您想要的内容..并将您的计数重置为 0
*   一旦你在你的第一个字符串中遇到不是'-'的字符，打印当前字符和计数值，并重置它们..

您可以尝试根据我提到的步骤进行编码..

*PS: - 对于任何代码问题，你应该首先在纸上写下你应该遵循的步骤来解决它。然后逐步将其转换为代码。将更容易理解问题并解决它。

# extjs - Ext JS 4 - 垂直 ButtonGroup DOM 异常

> ID：12547566
> 
> 赞同：1
> 
> 时间：2012-09-22T20:44:14.653
> 
> 标签：extjs, extjs4, extjs4.1, buttongroup

在尝试**使用单列垂直**按钮组时遇到这样的异常：

**未捕获的错误：INDEX_SIZE_ERR：DOM 异常 1 [ext-all-dev.js:88026]**

```
var btn1 = Ext.create('Ext.button.Button', {
    text: 'BTN 1',
    iconCls: 'icon-database-go-32'
});

var btn2 = Ext.create('Ext.button.Button', {
    text: 'BTN 2',
    iconCls: 'icon-data-table-32'
});

var actions = Ext.create('Ext.container.ButtonGroup', {
    columns: 1,
    defaults: {
        scale: 'large',
        iconAlign: 'top',
        rowspan: 3
    },
    title: 'Actions',
    items: [btn1, btn2]
});

this.dockedItems = [{
    xtype: 'toolbar',
    dock: 'left',
    items: [actions]    
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:50:14.627

好吧，行跨度杀死了它。这是一个经过测试的有效示例

```
var actions = Ext.create('Ext.container.ButtonGroup', {
    columns: 1,
    title: 'Actions',
    items: [
    {
        text: 'BTN 2',
        iconCls: 'icon-data-table-32',
        scale: 'large',
        iconAlign: 'top'
    }, {
        text: 'BTN 1',
        iconCls: 'icon-database-go-32',
        scale: 'large',
        iconAlign: 'top'
    }]
}); 
```

这是**[JSFiddle](http://jsfiddle.net/BZC44/)**

# windows-phone-7 - 可以为 PhoneApplicationPage 设置一个视觉状态吗？

> ID：12547567
> 
> 赞同：2
> 
> 时间：2012-09-22T20:44:24.593
> 
> 标签：windows-phone-7, visualstatemanager

我有一个关于PhoneApplicationPage 的可视化状态管理的问题。基本上，可以使用 VisualStateManager 方法来设置页面本身的状态吗？最后，它继承了Control类，所以这个东西应该是适用的。

我问是因为我尝试过但失败了。这是我的代码：

```
<phone:PhoneApplicationPage 
x:Class="Encountered.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="Common">
        <VisualState x:Name="State1">
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="button" Storyboard.TargetProperty="(UIElement.Opacity)" To="1" Duration="0"/>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="State2">
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="button" Storyboard.TargetProperty="(UIElement.Opacity)" To="0" Duration="0"/>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups>

<StackPanel Orientation="Vertical">
    <HyperlinkButton x:Name="button" NavigateUri="/Views/EditPage.xaml" Content="Go"/>
    <Button Click="Button_Click">state</Button>
</StackPanel>

</phone:PhoneApplicationPage> 
```

在代码隐藏中：

```
public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            VisualStateManager.GoToState(this, "State1", true);
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            VisualStateManager.GoToState(this, "State2", true);
        }
    } 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:40:51.480

VisualStateManager 使您能够指定**控件**何时进入特定状态。

因此，只需将所有内容包装在一个网格中：

```
<Grid>
    <VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="Common">
        <VisualState x:Name="State1">
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="button" Storyboard.TargetProperty="(UIElement.Opacity)" To="1" />
            </Storyboard>
        </VisualState>
        <VisualState x:Name="State2">
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="button" Storyboard.TargetProperty="(UIElement.Opacity)" To="0" />
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups>

<StackPanel Orientation="Vertical">
    <HyperlinkButton x:Name="button" NavigateUri="/Views/EditPage.xaml" Content="Go" />
    <Button Click="Button_Click" >state</Button>
</StackPanel>
</Grid> 
```

# objective-c - iOS 6 上出现导航栏和表格视图之间的黑条

> ID：12547570
> 
> 赞同：1
> 
> 时间：2012-09-22T20:44:33.607
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, ios6

自从我开始使用iOS 6以来，我似乎遇到了一个问题，在使用iOS 5时没有出现。起初我以为这可能只是一个模拟器错误，但自从我今天在我的iPhone 5上测试它后，我可以看到这不仅仅是在模拟器中。

我正在以编程方式创建所有内容——我似乎更喜欢这样做（我认为这是因为我的 HTML/CSS 背景！）——但我对 Objective-C 还是相当陌生，我找不到完整的例子关于如何以编程方式设置导航控制器/表格视图，所以我从我能找到的大量信息中将它们放在一起，因此，我可能会做一些根本错误的事情。但是，它在 iOS 5 上运行良好（并且仍然运行良好）。

问题是我在导航栏和表格视图之间有一个黑条，但奇怪的是，如果我推送一个视图并返回到原来的视图，该条就会消失，直到我完全重新启动后才会重新出现应用程序。

下图是启动时的应用程序 (1)，当我在 (2) 中推送一个视图时，以及在我返回它 (3) 后的初始视图： ![](../Images/ddd74563e4f66fca7cd86d0082171448.png)

这就是我的代码：

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    RootViewController *rootController = [[RootViewController alloc] init];
    self.window.rootViewController = rootController;

    self.navigationController = [[UINavigationController alloc] initWithRootViewController:rootController];
    [self.window addSubview:navigationController.view];

    [self.window makeKeyAndVisible];

    NSLog(@"Window frame: %@", NSStringFromCGRect(self.window.frame));

    return YES;
} 
```

**根视图控制器.m**

```
- (void)loadView
{
    self.title = @"Title";

    self.tableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds] style:UITableViewStylePlain];
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.view = self.tableView;

    NSLog(@"tableView frame: %@", NSStringFromCGRect(self.tableView.frame));

    UIBarButtonItem *newViewButton = [[UIBarButtonItem alloc] initWithTitle:@"New View"
                                                                  style:UIBarButtonItemStylePlain
                                                                 target:self
                                                                 action:@selector(newViewButtonTapped:)];
    [self.navigationItem setRightBarButtonItem:newViewButton animated:NO];
} 
```

我添加了 NSLogs 以查看它们是否显示了任何可能对我有帮助的内容。输出是：

```
tableView frame: {{0, 0}, {320, 480}}
Window frame: {{0, 0}, {320, 480}} 
```

谁能给我任何关于我做错了什么的想法？似乎有类似/相同的问题（[黑色栏上方的导航栏](https://stackoverflow.com/questions/7205800/black-bar-overtop-navigation-bar#comment16846965_7209250)-在评论中），但我还没有找到答案。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:05:18.970

您将 RootViewController 添加到窗口两次，一次是通过设置 UIWindow.rootViewController （在内部执行`[window addSubview:rootViewController.view]`），另一次是通过将其添加为导航控制器的子视图。

你应该这样做：

```
RootViewController *rootController = [[RootViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:rootController];
self.window.rootViewController = navigationController; 
```

根据经验，除非您*知道*自己确实想要，否则永远不要将视图直接添加到窗口中。

# php - 如何正确发布 Open Graph 操作？

> ID：12547571
> 
> 赞同：0
> 
> 时间：2012-09-22T20:44:38.040
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试将我的 Open Graph 操作发布到墙上。所有的元标记都设置好了，但我不知道，我应该在这个命令中添加哪个参数：

```
$facebook->api('/me/APP_URL_NAME:action_name','POST', array('image'=>$meta_shoe_image)); 
```

返回：

```
Fatal error: Uncaught Exception: The action you're trying to publish is invalid because it does not specify any reference objects. At least one of the following properties must be specified: OBJECT_NAME. thrown in _FB_LIBRARY_ 
```

当我尝试

```
$facebook->api('/me/APP_URL_NAME:action_name','POST', array('OBJECT_NAME'=>'http://apps.facebook.com/APP_URL_NAME:action_name', 'image'=>$meta_shoe_image)); 
```

返回

```
Fatal error: Uncaught OAuthException: (#3502) Object at URL http://apps.facebook.com/APP_URL_NAME/ has og:type of 'website'. The property 'shoe' requires an object of og:type 'APP_URL_NAME:OBJECT_NAME'. thrown in _PATH_TO_FB_LIBRARY_ 
```

我在做什么还是错的？我在哪里可以得到，应该是`'OBJECT_NAME'=>'_HERE_'`什么？

**编辑：**另外，当我尝试获取当前 URL 地址并将其推送到 Facebook 函数时：

```
function curPageURL() {
 $pageURL = 'http://';
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
$facebook->api('/me/APP_URL_NAME:action_name','post', array('OBJECT_NAME' => curPageURL(), 'image' => $meta_shoe_image)); 
```

我明白了

```
Fatal error: Uncaught Exception: Could not retrieve data from URL. thrown in _FB_FILE_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:56:19.703

> 致命错误：未捕获的 OAuthException：(#3502) URL [http://apps.facebook.com/APP_URL_NAME/](http://apps.facebook.com/APP_URL_NAME/)处的对象具有 og:type of 'website'。属性 'shoe' 需要 og:type 'APP_URL_NAME:OBJECT_NAME' 的对象。扔进 _PATH_TO_FB_LIBRARY_

这听起来像是您尝试在 Facebook 上使用您的应用程序的画布页面 URL 作为您尝试在其上发布操作的 Open Graph 对象。

你不能这样做——它必须是一个“独立的”网页，并且它必须在元标记中设置它的 og:type 为 'APP_URL_NAME:OBJECT_NAME'。

# c# - 在单独的线程上运行服务器

> ID：12547574
> 
> 赞同：1
> 
> 时间：2012-09-22T20:44:46.730
> 
> 标签：c#, multithreading, c#-4.0, activex

我有一个程序可以从串行设备中检索数据，然后将其放入服务器中，该服务器可由可以处理此协议的某些程序访问。此服务器是一个第三方程序，采用活动 x 控件的形式。

硬件设备需要一个 Thread.Sleep，这是不幸的。监视服务器的程序有时会在线程休眠期间查询服务器。这会导致它认为服务器出现故障。

我的下一个想法是将服务器放在一个单独的线程上，一个专门用于服务器任务的线程。在 UI 线程中，我运行以下代码：

```
 Thread workerThread = new Thread(DoServerWork);
        workerThread.SetApartmentState(ApartmentState.STA);
        workerThread.Start(); 
```

在代表中，我有

```
 public void DoServerWork()
    {
        rtu = new AxASMBSLVLib.AxASMBSLV();
        rtu.CreateControl();
        rtu.BeginInit();
        rtu.OpenPort();

        while (true)
        {

        }
    } 
```

问题是服务器开始工作，然后在大约 5 秒内变得无响应。我最初的想法是线程正在退出，但是 while(true) 应该防止这种情况发生。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:02:43.373

由于您在单线程单元 (STA) 中运行它，因此一旦该线程遇到空的无限循环，就不会再发生任何事情了。无限循环通常不是一个好主意。您可能应该使用计时器在其 OnElapsed 事件处理程序中定期执行服务器工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:27:03.230

> 它是来自第三方公司的 modbus TCP/IP 从站。第一个选项是将其从工具箱“拖放”到 GUI，使其位于 UI 线程上。

由于 ActiveX 需要 STA ：完全正确。

> 我必须在 UI 线程上调用 Thread.Sleep，

that should never be necessary, here lies your real problem. Never block/sleep he main thread.

Your question should be about how to avoid the Sleep().

# networking - VLSM 计算

> ID：12547576
> 
> 赞同：-1
> 
> 时间：2012-09-22T20:45:35.010
> 
> 标签：networking, cisco

```
Network - 193.197.74.0 /24 
```

有6个路由器：A，B，C，D，E，F

```
router A - DMZ - 12 
router B - 60hosts
router C  - 20hosts
router D - 10 hosts
router E - 25hosts
router F - 50hosts 
```

这些路由器以环形拓扑连接

在我计算 VLSM 之前，下面给出了一个条件。

1.  禁止子网零和最后一个子网（1 位子网）“据我了解，这意味着不应使用第一个可能的子网地址和最后一个可能的子网地址。”

2.最低和最高子网IP用于正常的串行路由器间连接“据我所知，应该为路由器A - 路由器B之间的连接提供网络地址 - 所以没有。” *那是对的吗？*

3 - 最大的子网应该在可能的地址中间“在 cisco netacad 中，我读到应该首先采用可能的最高地址，这样我可以计算子网掩码以及第一个和最后一个可能的主机”

4 - 尺寸较小的匹配子网是使用 DMZ - 网络“这是否意味着，我必须选择最低的子网 - （尽可能少的主机）并为 DMZ 选择它”

我不需要解决这个问题，但我只是为了正确理解这个问题，这样我就可以解决它。

上面提到了我的理解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:02:20.960

1) 现在默认情况下，在 cisco 路由器中没有启用子网零，这意味着您可以使用第一个子网进行分配。2）cisco 具有最长可能匹配的行为，这意味着如果您有两个网络要到达相同的目的地 10.1.1.0/27 和 10.1.1.0/30，那么第二个网络将进入路由表，因为 cisco 开始从 LSB 计算网络地址，在这种情况下是 32 然后 31 然后 /30 它命中并转到路由表。

相应地计划并注意 LONGEST POSSIBLE MATCH 优先于路由协议值的 AD 值。

# html - 当我放大时，边框在 Chrome 中消失

> ID：12547580
> 
> 赞同：47
> 
> 时间：2012-09-22T20:46:07.750
> 
> 标签：html, css, border, zooming

我有这个非常简单的形式：http: [//jsfiddle.net/TKb6M/91/](http://jsfiddle.net/TKb6M/91/)。有时，当我使用 Chrome 放大或缩小时，输入边框会消失。例如，当我放大到 90% 时，我得到：

![在此处输入图像描述](../Images/b8cd86586d089c1508250a34362877f2.png)

当然，您的里程可能会有所不同。

如果您想知道这些`<span>`标签，我按照[如何使输入元素占据所有剩余水平空间？](https://stackoverflow.com/questions/7189608/how-do-i-make-an-input-element-occupy-all-remaining-horizontal-space/7190310#7190310).

我的 CSS 有问题还是 Chrome 错误？它似乎在 Firefox 上运行良好。我能做些什么来避免这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2018-06-18T15:08:10.037

我很确定 Luís Pureza 已经解决了他的问题，但我找到了一个非常简单的方法来解决它，只改变这个：

如果您有这样的表格边框：

```
INPUT,TEXTAREA {
border-top: 1px solid #aaa
} 
```

把它改成这个：

```
INPUT,TEXTAREA {
border-top: thin solid #aaa
} 
```

我通过这个链接找到了这个解决方案：[https ://productforums.google.com/forum/#!topic/chrome/r1neUxqo5Gc](https://productforums.google.com/forum/#!topic/chrome/r1neUxqo5Gc)

我希望它有帮助

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-09T16:43:16.123

您正在强制 Chrome 进行亚像素计算，这通常会有奇怪的行为。

如果将输入的高度更改为 30 像素，则 90% 的缩放可以正常工作（因为这是 27 像素），但 75% 的缩放则不行（因为这是 22.50 像素）。

您也可以通过将边框设置为 3px 的宽度来避免这种情况。在这种情况下，您会看到不同地方的边框宽度不同。

无论如何，最好的解决方案是在输入周围留出更多空间，以便边界可以清晰地绘制，即使它位于亚像素位置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-31T12:26:29.000

我知道我在游戏中迟到了，但稍微捏造一下并将边框宽度设置为 1.5px 似乎每次都能做到这一点。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-13T13:07:36.680

`div`我在使用带边框的无边框包装时遇到了同样的问题，`input`这里所有的好答案都对我没有帮助。

最后，添加：

```
overflow: auto; 
```

对`div`元素（有问题的边框）起到了作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-22T20:50:56.620

这是因为您设置了固定高度，并且在缩放输入时变得大于该高度，使边框消失。使用 line-height 和 padding 来获得所需的高度 - 请参阅[更新的 Fiddle](http://jsfiddle.net/henrikandersson/kBmvA/)

**更新：**忽略我所说的，这是因为你正在设置`overflow:hidden`你的跨度，删除它应该可以解决问题。可能会导致需要更改输入的宽度。

附带说明；你正在让你的 span 成为一个块元素，它很好并且可以工作，但它看起来有点糟糕。如果可能，请尝试使用块元素，例如 a 而不是将内联元素更改为块。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-17T08:31:54.567

我在 2018 年遇到了类似的 chrome 问题——输入和文本区域缺少顶部边框。解决方法是在 css 中简单地指定顶部边框

```
INPUT,TEXTAREA {
border-top: 1px solid #aaa
} 
```

我无法解释为什么需要这样做，而且它只是在某些地方失去了边界，但至少这是一个快速的解决方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-20T10:53:39.963

如果溢出：隐藏是必要的，请提及溢出：隐藏仅适用于您面临宽度问题的浏览器。在其他浏览器中，metion display: flex 使宽度自动正确，并且在放大/缩小时边框不会消失。

例如：在我的情况下，宽度仅对 IE 不正确，所以我提到：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
.spanStyles {
display: block;
overflow: hidden;
}
} 
```

放大/缩小问题发生在 Firefox 和 chrome 中，所以我提到

```
.spanStyles {
 display : flex;
} 
```

这解决了我在所有浏览器中的问题。

# scala - 使用 Scala/Play 中的 Solr

> ID：12547581
> 
> 赞同：5
> 
> 时间：2012-09-22T20:46:07.977
> 
> 标签：scala, solr, playframework

如何在 Scala/Play 中使用 Solr？具体如何添加/更新文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:46:07.977

**更新：请参阅我的更新答案**参考[https://stackoverflow.com/a/17315047/604511](https://stackoverflow.com/a/17315047/604511)

* * *

这是我使用 Play 的 JSON 库和 Dispatch HTTP 客户端编写的代码。它并不完美，但它应该可以帮助您入门。

```
package controllers

import play.api._
import play.api.mvc._
import play.api.libs.json.Json
import play.api.libs.json.Json.toJson
import dispatch._

object Application extends Controller {

    def index = Action {
        val addDocument = Json.toJson(
        Map(
            "add" -> 
                Seq(
                //a document
                Map(
                "id"      -> toJson("123"),
                "subject" -> toJson("you have been served")
                )
            )
        ))
        val toSend  = Json.stringify( addDocument)
        val params  = Map( "commit" -> "true", "wt" -> "json")
        val headers = Map( "Content-type" -> "application/json")

        val solr = host( "127.0.0.1", 8983)
        val req  = solr / "solr" / "update" / "json" <<?
            params <:< headers << toSend

        val response = Http(req)()
        Ok( toSend + response.getResponseBody)
    //Redirect(routes.Application.tasks)
    }

    def tasks = TODO
    def newTask = TODO
    def deleteTask(id: Long) = TODO

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:06:02.013

您可能会考虑使用 SolrJ Java Lib，它使用二进制协议与 Solr 服务器通信，它比使用 XML 方式执行得更好。

将文档添加到索引是这样做的：

[http://wiki.apache.org/solr/Solrj#Adding_Data_to_Solr](http://wiki.apache.org/solr/Solrj#Adding_Data_to_Solr)

希望有帮助

保罗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:38:58.120

Not directly related to updating documents, but a nice query DSL for Solr in Scala build by foursquare is described in their engineering blog article: [http://engineering.foursquare.com/2011/08/29/slashem-a-rogue-like-type-safe-scala-dsl-for-querying-solr/](http://engineering.foursquare.com/2011/08/29/slashem-a-rogue-like-type-safe-scala-dsl-for-querying-solr/)

# titanium - 如何使用钛工作室在 android 中播放直播直播

> ID：12547584
> 
> 赞同：0
> 
> 时间：2012-09-22T20:46:34.890
> 
> 标签：titanium, titanium-mobile, shoutcast

嗨，我正在尝试使用以下方式播放广播流：

```
var urlStreaming1 = "http://shoutcasturl:8026";

streamer = Ti.Media.createAudioPlayer({
        url : urlStreaming[e.source.id],
        preload : true,
        allowBackground : true
    }); 
```

但我使用最新的钛工作室版本加上 android api 4.0 没有声音

```
Application type: mobile Titanium SDK: Titanium SDK version: 2.1.2 (08/24/12 14:46 ed7f777)

Platform & version: Android 4.1 google api

Device: Android emulator

Host Operating System: OSX 10.8.2 mountain lion

Titanium Studio: Titanium Studio, build: 2.1.2.201208301612 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:21:37.433

尝试这个 ：

```
var streamer = Ti.Media.createAudioPlayer({ url: 'http://shoutcasturl:8026;', });
streamer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:02:08.020

试试，这个代码嵌入到你的代码中，这工作正常。首先，您创建 AudioPlayer 路径，然后您可以播放和停止。

```
var sound = Ti.Media.createAudioPlayer({url:'http://202.6.74.107:8060/triplej.mp3'});

var stopSound = Titanium.UI.createButton({
    title:'Stop Sound',
    top:160,
    width:250,
    height:40
});
stopSound.addEventListener('click', function()
{
    sound.stop();
});

var startSound = Titanium.UI.createButton({
    title:'Play sound',
    top:110,
    width:250,
    height:40
});
startSound.addEventListener('click', function()
{
    Ti.API.info('playing sound with mode ' + modeArray[count].desc + ' count ' + count);
    sound.play();
}); 
```

干杯.....！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T07:33:00.143

我已经将一个应用程序与 Titanium 放在一起，使用以下内容流式传输 AAC 广播：

**对于 iOS**

使用 videoPlayer 而不是 audioPlayer：

```
var streamer = Ti.Media.createVideoPlayer({
            url : 'http://198.144.148.12:8000/'
        });
        streamer.play(); 
```

**安卓版**

audioPlayer 或 videoPlayer 根本不支持 AAC，所以我开发了以下模块：

[https://marketplace.appcelerator.com/apps/5728](https://marketplace.appcelerator.com/apps/5728)

# c - 如何动态增加数组大小

> ID：12547591
> 
> 赞同：-1
> 
> 时间：2012-09-22T20:47:32.273
> 
> 标签：c, arrays

我正在尝试读取一个包含我的代码坐标值的文件。

我的问题是，如何使数组大小足够大以包含将来添加到文件中的内容？

以下是我的代码；当我将数组的大小设置为 905 时，我的循环将继续，直到空间被填满。这是为什么？

`FILE.txt`：

```
S (60,70)(200,200)
S (30,40)(100,200)
S (10,20)(80,10)
S (60,400)(700,200)
S (160,70)(240,20)
S (160,70)(240,20)
S (160,70)(240,20) 
```

我的代码：

```
#include <stdio.h>
int a;
int b;
int c;
int d;
int data[905][4];
int main ( int argc, char *argv[] )
{
    if ( argc != 2 ) /* argc should be 2 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        FILE *file = fopen( argv[1], "r" );

        /* fopen returns 0, the NULL pointer, on failure */
        if ( file == 0 )
        {
            printf( "Could not open file\n" );
        }
        else 
        {
            int j=0;int count=1
            for (j=0; j < count; j++) 
            {    
                fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d);

                printf("%d,%d,%d,%d\n",a, b, c, d);
                count++
            }             

            fclose( file );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:01:44.627

和

```
int j=0;int count=1
for (j=0; j < count; j++) 
{

     fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d);

     printf("%d,%d,%d,%d\n",a, b, c, d);
     count++
} 
```

你有一个循环保持`count`比`j`直到`count++`溢出大一并且给你未定义的行为。编译器很可能会忽略循环控制并使其成为无限循环，因为它可能会假设没有发生未定义的行为。

因此，循环尝试从文件中读取值而没有结束，或者至少在很长一段时间内。当到达文件末尾时，`fscanf`不会读取任何值，但由于您不检查其返回值，因此不会停止循环。为避免这种情况，您可以执行类似的操作

```
if (fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d) < 4) {
    break;
} 
```

这样循环在到达文件末尾时结束，或者发生一些输入错误。

关于

> 如何使数组大小足够大以包含将来添加到文件中的内容？

然后，您不应使用具有静态定义维度的数组，而应使用分配空间`malloc`

```
int (*data)[4] = malloc(num_rows * sizeof *data); 
```

当你需要更多时，

```
int (*temp)[4] = realloc(data, new_num_rows * sizeof *data);
if (temp == NULL) {
    // reallocation failed, handle it or exit
} else {
    data = temp;
} 
```

`realloc`更大的内存块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:03:22.980

为此，您将需要使用`malloc`和`realloc`函数`<stdlib.h>`。基本思路是先分配一定的空间，等发现不够大的时候再放大数组。

如果您使用结构数组而不是数组数组，这将使生活更轻松：

```
struct segment { int x0, y0, x1, y1; }; 
```

然后你做这样的事情：

```
size_t nsegs = 0, segs_allocated = 10;
struct segment *segs = malloc(segs_allocated * sizeof(struct segment));
if (!segs) abort();

while (getline(&line, &linesz, stdin) >= 0)
{
    if (!parse_line(&segs[nsegs], line)) continue;
    nsegs++;
    if (nsegs == segs_allocated)
    {
        segs_allocated *= 2;
        segs = realloc(segs, segs_allocated * sizeof(struct segment));
        if (!segs) abort();
     }
} 
```

强制性切线评论：忘记你听说过的`fscanf`。这比它的价值要麻烦得多。读取整行`getline`（如果没有，实现起来并不难），使用手动编码的解析器从行中提取单独的数字字符串，然后使用 、 或适当的将它们转换为`strtol`机器`strtoul`整数`strtod`。

# javascript - 将backbonejs用作付费服务站点是不是一个坏主意？

> ID：12547595
> 
> 赞同：0
> 
> 时间：2012-09-22T20:48:00.487
> 
> 标签：javascript, ruby, backbone.js, sinatra

我正在开发一个软件即服务站点，我们将主要使用主干，但我注意到应用程序的大部分逻辑都位于主干上。虽然我们主要将 ruby​​ 用作会话控制器和连接数据库的桥梁，但它似乎是。所以我们的网站很容易被复制。（只是复制js文件的问题......）

我知道这可能是一个愚蠢的问题，但是，无论如何我可以避免这种情况，还是会有这样的客户端繁重的应用程序对这种类型的应用程序不利？

目前我不确定如何保护此站点结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:56:36.763

当然它可以被复制，这是你用 JavaScript 承担的风险。你的标记和 CSS 也有同样的问题，但我想说你很少看到有人偷它。您的服务可能不仅仅是您的代码（您的设计、您的副本、您的业务模型、您的客户支持）。即使他们确实复制了您的代码，您也可能能够提供比他们更好的服务，因为您致力于您的产品，而他们显然不是。

另一种看待整个事物的方式是将其视为 Web 开发之美。您可以自由地打开任何网页的代码并从中学习。

如果你仍然想“保护”你的代码，你最好的办法可能是使用[UglifyJS](https://github.com/mishoo/UglifyJS)或类似的东西来最小化和混淆你的代码。当然，“小偷”可以使用漂亮的方法来获取缩进等，但代码仍然是晦涩难懂的，几乎无法维护。因此，从长远来看，窃取它可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:57:31.800

保护您的 javascript 库很困难，因为您让您的客户下载它们。保护它们的最佳方法是在将它们部署到生产环境之前对它们运行混淆和缩小工具。

# database - 如何使用代数查询语言找到最小值

> ID：12547599
> 
> 赞同：0
> 
> 时间：2012-09-22T20:49:11.637
> 
> 标签：database, algebraic-data-types

我需要找到这张桌子上卖的最便宜的本田思域

```
Sell(DName, Make, ModelNum, Price) 
```

还有其他表，但我假设没有其他制造商将他们的品牌命名为 Civic。

因此，我正在寻找 Make Civic 的最低价格。但我究竟如何找到最低价格？我会知道是否有固定价格 ( `SELECT the make WHEN price < "x amount"`)，但我要如何在表中找到最低价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:51:19.887

从 Sell 中选择 min(price)，其中 DName='Civic'

# java - “无法从 \FooBar\libs\android-support-v4.jar 读取 jar 文件内容”？

> ID：12547604
> 
> 赞同：1
> 
> 时间：2012-09-22T20:49:58.420
> 
> 标签：java, android, eclipse

我添加了 API 级别 4 及以上的支持库，如下链接所示：http: [//developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

我的代码*正在*运行。但是突然之间，它开始显示以下错误：

`"Could not read jar file contents from \FooBar\libs\android-support-v4.jar"`

可能是什么原因？

编辑：它也显示以下错误：

`"Unable to update index for central|http://repo1.maven.org/maven2`"

还有一些这样的警告->

`"While loading class "com.android.ide.eclipse.adt.internal.resources.manager.GlobalProjectMonitor$IResourceEventListener", thread "Thread[main,6,main]" timed out waiting (5003ms) for thread "Thread[org.eclipse.jdt.internal.ui.text.JavaReconciler,1,main]" to finish starting bundle "com.android.ide.eclipse.adt_20.0.3.v201208082019-427395 [351]". To avoid deadlock, thread "Thread[main,6,main]" is proceeding but "com.android.ide.eclipse.adt.internal.resources.manager.GlobalProjectMonitor$IResourceEventListener" may not be fully initialized."`

更新：我以为我修复了它，但问题不断出现。

# eclipse - org.client.andorid.MyLocationListener.onLocationChanged 的 错误 java.lang.NullPointerException（MyLocationListener.java:29）

> ID：12547605
> 
> 赞同：0
> 
> 时间：2012-09-22T20:50:00.380
> 
> 标签：eclipse, android-emulator, location

我在获取位置时遇到了这个错误。我在应用程序启动时通过模拟器控制手动发送坐标但仍然出现此错误我的代码是

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

//for getting location
        lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        ll = new MyLocationListener(etTextOut);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0 , 0, ll);
} 
```

我的位置类是

```
public class MyLocationListener implements LocationListener {

EditText etTextOut;

public MyLocationListener(EditText etTextOut) {
    // TODO Auto-generated constructor stub
    this.etTextOut = etTextOut;
}

//public TextView tv;
@Override
public void onLocationChanged(Location loc) {
    // TODO Auto-generated method stub

    loc.getLongitude();
            loc.getLatitude();

    String msg = "Latitude:" + loc.getLatitude() + "\nLongitude:" + loc.getLongitude();

     etTextOut.setText(msg);

} 
```

我想在主类的edittext中设置我的坐标并通过套接字将其发送到PC

# delphi - Firemonkey livebindings 自定义网格列

> ID：12547610
> 
> 赞同：1
> 
> 时间：2012-09-22T20:50:47.350
> 
> 标签：delphi, firemonkey, livebindings, delphi-xe3

我正在尝试将一些自定义列添加到 TGrid，例如将包含 TCalendarEdit 的列并将其实时绑定到 DB。
我想出了两种方法来实现这样的事情。

1.  将 CalendarEdit 放在所有行中。
    **问题是**：我可以创建自定义 TCalendarEdit 列， 可以将其放入 Grid 中， 但随后我将它绑定到数据集 ，它会下降到默认字符串列视图！
    `TDateColumn = class(TColumn)
    protected
    function CreateCellControl: TStyledControl; override;
    end;
    function TDateColumn.CreateCellControl: TStyledControl;
    begin
    Result := TDateCell.Create(grid);
    Result.Parent := grid;
    end;`

    `procedure TForm1.FormCreate(Sender: TObject);
    var
    cec: TDateColumn;
    begin
    cec:=TDateColumn.Create(grid1);
    grid1.AddObject(cec);
    end;`
    `LinkGridToDataSource1.Columns.Items[LinkGridToDataSource1.Columns.Count-1].MemberName:='date';`

2.  在网格单元格上绘制一个控件，然后单击并销毁它，然后单击网格上的任何其他位置（并将其数据写入网格）。
    **问题是**：如何获取单元格 OnClick 的坐标和大小？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:19:42.450

我只有**第一**部分的解决方案。由于原始源代码中奇怪的 ColumnCreate 实现，这有点棘手。

**什么原因？**

查看单元`Fmx.Bind.Grid`（Win32 上的路径`%programfiles%\Embarcadero\RAD Studio\10.0\source\databinding\components`）和方法（从第 500 行开始）

```
function TLinkGridToDataSourceControlManager.CreateColumn( 
  const ADescription : TCreateColumnDescription; AGrid : TCustomGrid ) : TColumn; 
```

列是相对于`ADescription.ColumnStyle`或如果为空而创建的`ADescription.MemberType`。但它不是基于注册的类，它是**硬编码**的。

这很奇怪，因为 ColumnStyleName 是从没有前导的 ColumnClass 构建的`T`（例如 Class `TStringColumn`=> ColumnStyle `StringColumn`）。

为什么 Emba 不直接根据 ColumnStyle 搜索已注册的 Classes？

```
FindClass( 'T' + ADescription.ColumnStyle ) 
```

如果是这样，您可以注册自己的 ColumnClasses `TMyColumn`，将 ColumnStyle 属性设置为`MyColumn`，一切都会好起来的。您无法在 PropertyEditor 中看到此 ColumnStyle，除非您将此 ColumnClass 作为包安装（不，这不会起作用，因为 PropertyEditor 也是**硬编码**的），但谁在乎它可以在 OI 中设置。

**让我们变得灵活**

要解决此问题，您必须手动执行一些步骤

1.  复制`Fmx.Bind.Grid.pas`到新路径（项目确实或有效的 Delphi 搜索/库路径）
2.  将其重命名为`Fmx.Bind.GridAdv.pas`
3.  现在您必须在此副本中替换`Fmx.Bind.Grid`为at 行`Fmx.Bind.GridAdv`

    9、10、455 号线

4.  为了获得内部的灵活性，请替换它（从第 500 行开始）

    ```
    function TLinkGridToDataSourceControlManager.CreateColumn(
      const ADescription: TCreateColumnDescription; AGrid: TCustomGrid): TColumn;
    begin
      Result := nil;
      if ADescription.ColumnStyle <> '' then 
    ```

    有了这个

    ```
    function TLinkGridToDataSourceControlManager.CreateColumn( 
      const ADescription : TCreateColumnDescription; AGrid : TCustomGrid ) : TColumn;
     // ** MOD START **
     type
       TColumnClass = class of TColumn;
     var
       LColumnClass : TColumnClass;
     // ** MOD END **
     begin
       Result := nil;
       if ADescription.ColumnStyle <> '' then
     // ** MOD START **
         begin
           LColumnClass := TColumnClass( FindClass( 'T' + ADescription.ColumnStyle ) );
           if LColumnClass <> nil
           then
             begin
               Result := LColumnClass.Create( FCustomGrid );
             end else 
     // ** MOD END ** 
    ```

    下面的一些行我们必须关闭`begin`

    ```
    // ** MOD START **
        end;

    // ** MOD END **

      if Result = nil then
        case ADescription.MemberType of 
    ```

5.  保存文件

**自定义列**

作为示例，我将使用一个简单的`TNumberColumn`衍生自`TStringColumn`. 请记住，您必须注册自定义列类。

```
unit FMX.Grid.Columns;

interface

uses
  FMX.Grid, FMX.Types, FMX.Menus;

type
  TNumberColumn = class( TStringColumn )
  protected
    function CreateCellControl : TStyledControl; override;
  end;

implementation

{ TNumberColumn }

function TNumberColumn.CreateCellControl : TStyledControl;
begin
  Result                            := inherited;
  ( Result as TTextCell ).TextAlign := TTextAlign.taTrailing;
end;

initialization

RegisterFmxClasses( [TNumberColumn] );

end. 
```

**如何使用？**

只需像往常一样创建表单并使用网格为某些列创建绑定。

要让我们的补丁运行，您必须注意使用顺序。修补的单元必须在原始单元之后。

```
unit Main_ViewU;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Rtti, System.Classes,
  System.Variants, FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Grid,
  FMX.Layouts, Data.Bind.GenData, Data.Bind.EngExt, FMX.Bind.DBEngExt,

  FMX.Bind.Grid, // <-- original unit
  FMX.Bind.GridAdv, // <-- patched unit

  FMX.Grid.Columns, // CustomColumns unit

  System.Bindings.Outputs, FMX.Bind.Editors,
  Data.Bind.Components, Data.Bind.Grid, Data.Bind.ObjectScope;

type
  TForm1 = class( TForm )
    Grid1 : TGrid;
    DataGeneratorAdapter1 : TDataGeneratorAdapter;
    AdapterBindSource1 : TAdapterBindSource;
    BindingsList1 : TBindingsList;
    LinkGridToDataSource1 : TLinkGridToDataSource;
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1 : TForm1;

implementation

{$R *.fmx}

end. 
```

最后一步，只需将某些列设置为`ColumnStyle`并`NumberColumn`运行程序以查看这些列是否正确对齐。

[**除了 Fmx.Bind.GridAdv.pas 之外的**完整示例项目源](https://www.dropbox.com/s/newawcowvjt5i03/FmxGridCustomColumn.zip)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:49:44.983

我不知道您的单元格或列的代码是什么，但我希望在下面看到类似的内容。

您可以在单元格中的 MouseDown 中做任何您想做的事情。如果您希望在列中处理它，请创建一个事件并在 CreateCellControl 中设置它：

```
type TDateCell = class(TCalendarEdit)
  protected
    procedure MouseDown(Button: TMouseButton;Shift: TShiftState;X, Y: Single);override;
  end;

type TDateColumn = class(TColumn)
  protected
    function CreateCellControl: TStyleControl;override;
  end;

procedure TDateCell.MouseDown(Button: TMouseButton;Shift: TShiftState;X, Y: Single)
begin
  inherited;
  //Custom stuff here with X,Y
end;

function TDateColumn.CreateCellControl: TStyledControl;
begin
  Result := TDateCell.Create;
  Result.Parent := Self;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T08:41:22.013

Livebindings 控制网格列和单元格的创建，因此对列和 bindmanager 和其他 livebinding 组件进行子类化可能既不实用也不优雅。使用你所拥有的。

您可以访问网格 OnPainting 事件中的单元格

```
Somecell := TTextCell(Grid1.Columns[Col].Children[Row]); 
```

您可能希望将 TextCell 设置为 Visible := False 并在同一位置创建您的 TCalendarEdit（所有者是表单，父项是列）。使用 TextCell.Text 将日期写入 CalendarEdit。**

# javascript - 通过 ajax 更新到单独的 DIV

> ID：12547613
> 
> 赞同：0
> 
> 时间：2012-09-22T20:51:10.557
> 
> 标签：javascript, jquery, html, ajax

我的页面上有 2 个元素，我试图通过 ajax 重新加载 - 但是我似乎只能更新一个。下面是我的代码，

```
$('#messages_send').live('click', function() {
    $.ajax({
        url: base_url + 'ajax/send_message',
        data: {
            username: $('#messages_username').val(),
            message: $('#messages_message').val(),
            saveid: $('#messages_savedid').val(),
        },
        success: function(data) {
            sending_message();

            var x = jQuery.parseJSON(data);

            if(x) {
                if(x.gp_id==80)
                {
                        $('#spn_ucredit').load(base_url + 'ajax/userdata/credits');
                        $('#overlay_credits').load(base_url + 'ajax/userdata/credits');
                }
            }
            //$('#spn_ucredit').html($('#ncd_id').val());
            //tmp_cost = $('#spn_ucredit').html()-$('#ncd_id').val();
            //$('#ncd_id').val($('#ncd_id').val()-tmp_cost);
            //alert(data);
            setTimeout(message_sent, 2000);
            setTimeout(remove_modal_box, 3000);
            setTimeout(message_revert, 3500);
            $("#saved_messages").load(base_url + 'messages #saved_messages > form');
           $("#messages_content").load(base_url + 'messages #messages_content > form');
        }
    });

    return false;
}); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:16:12.310

西科，

您可以做很多事情来调试/改进代码，其中主要是减少 HTTP 请求的数量。使用`$.get()`而不是`.load()`，应该可以每次使用两次 HTTP 响应。

像这样的东西：

```
$(document).on('click', '#messages_send', function() {
    sending_message();
    $.ajax({
        url: base_url + 'ajax/send_message',
        data: {
            username: $('#messages_username').val(),
            message: $('#messages_message').val(),
            saveid: $('#messages_savedid').val(),
        },
        dataType: 'json',
        success: function(data) {
            var creditsPromise, messagesPromise;//vars that allow .when() later.
            if(data.gp_id == 80) {
                creditsPromise = $.get(base_url + 'ajax/userdata/credits', function(data) {
                    $('spn_ucredit').html(data);
                    $('#overlay_credits').html(data);
                });
            }
            else {
                creditsPromise = (new $.Deferred()).resolve().promise();
            }
            messagesPromise = $.get(base_url + 'messages', function(data) {
                var $data = $(data);
                $("#saved_messages").empty().append($data.find('#saved_messages > form'));
                $("#messages_content").empty().append($data.find('#messages_content > form'));
            });

            $.when(creditsPromise, messagesPromise).done(function() {//fires when both $.get()s have successfully responded
                message_sent();
                setTimeout(remove_modal_box, 1000);
                setTimeout(message_revert, 1500);
            });
        }
    });
    return false;
}); 
```

这将 HTTP 请求的数量从五个减少到三个。

您可以进一步将 HTTP 请求的数量减少到一个，但您需要编写一个服务器端脚本来执行当前由`...ajax/send_message`、`...ajax/userdata/credits`和执行的所有操作，并对`...messages`复合响应进行 json 编码。

然后，客户端代码可以简化为如下所示：

```
$(document).on('click', '#messages_send', function() {
    sending_message();
    $.ajax({
        url: base_url + 'ajax/send_message',
        data: $("#messages form").serialize(),//assumed
        dataType: 'json',
        success: function(data) {
            if(data.gp_id == 80) {
                $('#spn_ucredit').html(data.credits);
                $('#overlay_credits').html(data.credits);
            }
            $("#saved_messages").html(data.saved_messages);
            $("#messages_content").html(data.messages_content);
            message_sent();
            setTimeout(remove_modal_box, 1000);
            setTimeout(message_revert, 1500);
        }
    });
    return false;
}); 
```

# google-app-engine - TypeError：“TransactionOptions”对象不可调用

> ID：12547615
> 
> 赞同：0
> 
> 时间：2012-09-22T20:51:21.197
> 
> 标签：google-app-engine, transactions, google-cloud-datastore

```
 'TransactionOptions' object is not callable
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/.../0-1.361943419475938372/cron.py", line 26, in get
    db.run_in_transaction(xg_on, transactional_task)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2433, in RunInTransaction
    return RunInTransactionOptions(None, function, *args, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2571, in RunInTransactionOptions
    ok, result = _DoOneTry(new_connection, function, args, kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 2593, in _DoOneTry
    result = function(*args, **kwargs)
TypeError: 'TransactionOptions' object is not callable 
```

我在 cron.py 中的代码如下所示：

```
def transactional_task():
    doStuff()
xg_on = db.create_transaction_options(xg=True)
db.run_in_transaction(xg_on, transactional_task) 
```

直接从这里的文档中提取

知道为什么应用引擎认为无法创建 TransactionOptions 吗？我的数据存储是高复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:16:07.940

哪些文档？db.run_in_transaction() 采用函数的第一个参数。我认为您的意思是调用 run_in_transaction_options() ，它确实将 TransactionOptions 对象作为其第一个参数。

# objective-c - 与 iOS 6.0 原生 Facebook 集成共享：“通过我的应用名称发布”？

> ID：12547616
> 
> 赞同：44
> 
> 时间：2012-09-22T20:51:27.123
> 
> 标签：objective-c, ios, xcode, facebook, ios6

我刚刚通过 ios 6 将 facebook 集成到我的应用程序中，但是在我的墙上发帖时遇到了问题。它只是说**“通过 ios 应用程序发布”**。我想让它说**“通过应用名称发布”**。我已经在 facebook 上创建了一个应用程序标识，并且我有他们分配的应用程序编号，但我不确定如何将它与 facebook 集成集成。

下面是我的代码。如果有人可以提供帮助，将不胜感激。谢谢！

```
{
NSString *message;
message= [[NSString alloc] initWithFormat:@"I've earned %@ points", [self retrieveScore]];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [controller setInitialText:message];
    [controller addURL:[NSURL URLWithString:@"http://mysite"]];
    [self presentViewController:controller animated:YES completion:Nil];
    [message release];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        NSString *output= nil;
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                output= @"Action Cancelled";
                NSLog (@"cancelled");
                break;
            case SLComposeViewControllerResultDone:
                output= @"Post Succesfull";
                NSLog (@"success");
                break;
            default:
                break;
        }
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
        [alert release];
        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;
      } 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-26T15:28:09.440

## **更新 - 可以做到**

因此[，iOS 版 Digg](https://itunes.apple.com/us/app/digg/id362872995?ls=1&mt=8)应用程序能够在不使用 Accounts 框架获取用户权限的情况下分享到 Facebook……他们使用`UIActivityViewController`并将帖子显示为“通过 Digg”，我联系了 Digg 的某个人，他们告诉我这是一本手册在此过程中，您必须在 Apple App Store 中发布您的 iOS 应用程序，并在 Facebook App Store 中接受和发布您的 Facebook 应用程序。然后Facebook可以通过这种方式手动处理两者的链接。

这样做的明显缺点是，这`UIActivityViewController`意味着您可以在不与 Facebook 集成的情况下从您的应用程序共享，不需要 Facebook 应用程序......但是要获得“通过您的应用程序名称”，您需要一个 Facebook 将批准的 Facebook 应用程序他们自己的应用商店，一旦一切就绪，您需要联系开发者关系以将其全部链接起来。

请注意，我的其余答案（我之前的答案）是正确的，解决方案是 Facebook 可以为您执行的手动过程，您的 iOS 代码不应该受到影响。

* * *

## 以前的答案和解决方法

您想要的本机 Facebook 集成实际上是作曲家视图控制器。这是通过使用`SLComposeViewController`带有服务类型的类来获得的`SLServiceTypeFacebook`。

此类仅提供单向通信，并且如您所见，您是通过点击“发布”按钮确认任何墙贴的人。此视图控制器归 iOS 系统所有，而不是您的应用程序。通过与这个 compose view controller 交互，你实际上绕过了你的应用程序。

用户喜欢这样做，因为它为他们提供了安全性。

除非您的应用程序仅通过更深入的双向 Facebook 集成来运行，否则您应该使用`SLComposeViewController`（更深入的集成意味着您的应用程序需要您的朋友列表或现有的墙贴、相册等......）。

为了让来自您的应用程序的帖子以“通过 xxxx”而不是“通过 iOS”出现在 Facebook 上，您需要通过`SLRequest`类与 Facebook 进行交互。为此，您还必须与`Account.framework`除了`Social.framework`.

它在设置方面类似于之前使用（并且仍然可以使用）的以前的 Facebook iOS SDK，您获得对设备帐户商店的引用，您请求 Facebook 帐户并发送您的 Facebook 应用程序 ID 和一系列权限.

如果获得批准，您就可以通过`SLRequest`该类与 Facebook Graph API 进行交互。通过在这个庄园的墙上张贴，您将拥有所需的“通过 xxx”。

要使用它，请查看[SLRequest 的文档](https://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Service_Type_Constants)。

请注意，在这种情况下，您有责任创建自己的撰写视图。

您当然可以从本机 UI 中激发自己的灵感，也可以查看 iPhoto 的 iOS 应用程序，尝试使用该应用程序分享到 Facebook，您会注意到它请求与您的 Facebook 帐户交互的权限（使用时不会发生的事情`SLComposeViewController`），然后呈现了与`SLComposeViewController`Facebook 帖子撰写非常接近的内容。

但如果你仔细观察，你会发现它并不一样。这也适用于 Twitter 及其原生应用程序与原生集成。他们有自己的撰写视图，值得注意的是他们使用原生 iOS 集成（Apple 框架）。我们知道这一点，因为转到设置 > 隐私 > Twitter，您可以看到 Twitter 应用程序是使用设备上的 Twitter 帐户的授权应用程序。

Facebook 也是如此。

如果您没有获得许可，那么您将无法发布为您的应用程序 - 也就是“通过 myApp”。

很抱歉让你失望了，我也一直在寻找一种方法来整合一个`ACAccount`，`SLComposeViewController`但也找不到方法。真可惜……因为本机 UI 很可爱。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T18:21:23.860

我最终使用了带有新 Facebook SDK 3.1 的自定义 Facebook 框架。 [Facebook 撰写视图](https://github.com/docchang/FacebookComposeView)

原文在这里：[facebook compose view](http://www.developers-life.com/facebook-compose-view.html)。我刚刚修复了一些小警告并使用新的 FB SDK 3.1 进行了更新。

用法：

```
DEFacebookComposeViewControllerCompletionHandler __block completionHandler = ^(DEFacebookComposeViewControllerResult result) {
    [self dismissViewControllerAnimated:YES completion:nil];
    switch (result) {
        case DEFacebookComposeViewControllerResultCancelled:
            NSLog(@"Facebook Result: Cancelled");
            break;
        case DEFacebookComposeViewControllerResultDone:
            NSLog(@"Facebook Result: Sent");
            break;
    }
};
DEFacebookComposeViewController * compose = [[DEFacebookComposeViewController alloc] init];
[compose setInitialText:self.shareText];
[compose addImage:self.shareImage];
[compose addURL:self.shareURL];
[compose setCompletionHandler:completionHandler];
[self presentViewController:compose animated:YES completion:^{}]; 
```

设置：

1.  打开项目并进行干净的构建。
2.  进入文件夹`$PROJECT_FOLDER\build\Debug-iphonesimulator`并将`FBComposeView.framework`&`FBComposeView.bundle`拖到您的项目中。

注意：请务必使用`Debug-iphonesimulator`. 它是胖二进制文件。 ![在此处输入图像描述](../Images/b5bbcc2a241a5b7b535f06936bde3741.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T15:37:34.183

我们通过 iOS 5 Twitter 集成解决了类似的问题，结果是：

> 当使用开发版本或通过模拟器发布到 Twitter 时，它几乎总是在 Twitter 上显示为“通过 iOS”。一旦您的应用程序获得批准并从 AppStore 构建发布，它应该显示为“iOS 上的 YourAppName”发布的内容，并带有指向应用程序应用商店页面的链接。

[原始来源（ShareKit 问题讨论）](https://github.com/ShareKit/ShareKit/issues/177)

我想苹果对 Facebook 和其他社交服务也是如此。

编辑：不幸的是，这只适用于 Twitter.framework。我认为最好的解释和答案是上面丹尼尔的解释和答案。也许是时候关注它了，让苹果知道，我们想要什么。

如何在 Facebook 中使用 SLRequest 的示例在[这个 SO question](https://stackoverflow.com/questions/12757449/how-to-integrate-facebook-in-ios-6-using-slrequest)

EDIT2：提交了一个雷达错误 ID# 12980058。希望他们听...

# c++ - 如何在用户空间中使用 bitops.h

> ID：12547621
> 
> 赞同：1
> 
> 时间：2012-09-22T20:52:21.323
> 
> 标签：c++, c, linux-kernel, bit

我有这个程序，我需要使用 bitops.h 文件中的 test_and_set_bit 函数进行一些位操作。如何`#include<linux/bitops.h>`在我的文件中包含此`C`文件。即使我可以在内核源代码中找到它，它似乎也没有找到它。

是不是因为不允许包含在用户空间程序中。建议？

我正在使用`#include<linux/bitops.h>`然后使用`gcc myfile.c`.

它没有显示 bitops.h 文件的此类文件或目录。我可以在内核目录下找到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:16:36.383

小心`bitops.h`。它可以从明确定义的来源产生未定义的行为。

例如，对于[C/C++ 语言（参见第 5.8 节）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf)，移位不能为负数，不能等于单词的长度，也不能超过单词的长度。这意味着 32 位值只能移动 [0,31]（含）。

在上面的例子中，除了 [0,31] 之外的任何东西都是“未定义的”。我相信编译器可以自由地为未定义的代码做它想做的事情，包括删除有问题的代码、调用`abort()`或到处乱扔垃圾。

许多程序滥用轮换和轮换。测试/检查的一个好方法是使用 John Regehr 和 Peng Li 的[Integer Overflow Checker (IOC)](http://embed.cs.utah.edu/ioc/)。使用功能 ( ) 构建 Clang 很容易`-fcatch-undefined-ansic-behavior`，因此可以使用工具来检查这些东西。

话虽如此，下面是来自 3.8 内核的代码`<linux\bitops.h>`（2013 年 2 月 19 日下载）。如果程序员发送`0`(legal) 的移位大小，`<linux\bitops.h>`将由于`(word << (32 - shift))`(et al) 而创建非法代码。

当我在内核邮件列表中指出它时，我被告知“内核不会尝试完全符合标准”。内核的部分问题似乎是 Torvalds 和他的[“GCC 是垃圾”](http://linux.derkeiler.com/Mailing-Lists/Kernel/2006-11/msg08325.html)的态度——他太笨了，不能正确地做事并使用静态分析等工具，他的一些开发人员也有同样的傲慢。

```
/**
 * rol64 - rotate a 64-bit value left
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u64 rol64(__u64 word, unsigned int shift)
{
    return (word << shift) | (word >> (64 - shift));
}

/**
 * ror64 - rotate a 64-bit value right
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u64 ror64(__u64 word, unsigned int shift)
{
    return (word >> shift) | (word << (64 - shift));
}

/**
 * rol32 - rotate a 32-bit value left
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u32 rol32(__u32 word, unsigned int shift)
{
    return (word << shift) | (word >> (32 - shift));
}

/**
 * ror32 - rotate a 32-bit value right
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u32 ror32(__u32 word, unsigned int shift)
{
    return (word >> shift) | (word << (32 - shift));
}

/**
 * rol16 - rotate a 16-bit value left
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u16 rol16(__u16 word, unsigned int shift)
{
    return (word << shift) | (word >> (16 - shift));
}

/**
 * ror16 - rotate a 16-bit value right
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u16 ror16(__u16 word, unsigned int shift)
{
    return (word >> shift) | (word << (16 - shift));
}

/**
 * rol8 - rotate an 8-bit value left
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u8 rol8(__u8 word, unsigned int shift)
{
    return (word << shift) | (word >> (8 - shift));
}

/**
 * ror8 - rotate an 8-bit value right
 * @word: value to rotate
 * @shift: bits to roll
 */
static inline __u8 ror8(__u8 word, unsigned int shift)
{
    return (word >> shift) | (word << (8 - shift));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:07:52.903

建议你`#include<linux/bitops.h>`改成`#include <asm/bitops.h>`.

如果问题仍然存在，您必须使用`gcc myfile.cpp -I"your linux directory"`来判断`gcc`您的内核文件在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-21T13:33:46.660

我尝试使用搜索路径包含来自**/usr/src/linux-headers-$(uname -r)**（在内核构建期间安装）的各种内核头文件，但都需要一个或多个其他内核头文件。`-I kernel_header_path`看起来**./include/linux/bitops.h**是所有特定于架构的位操作的建议包含文件。

所以，我同意@nos：使用内核代码进行用户空间位旋转并不容易。但是，**arch/../include/asm/bitops.h**中的特定于拱门的汇编程序可以为用户空间位操作提升。

OTOH，与编写一个小的通用位操作包含文件来实现相同的结果相比，开发工作可能不值得。

# c - 在 C 中重置 char 缓冲区

> ID：12547622
> 
> 赞同：0
> 
> 时间：2012-09-22T20:52:23.100
> 
> 标签：c, memory-management, struct

我正在做家庭作业，我需要基本上创建一个字符缓冲区。我需要创建的功能之一称为“b_reset”。它的目的是重新初始化给定的缓冲区，使其指向 char 缓冲区中的第一个位置。这是必要的，因为稍后，当一个新的字符被添加到缓冲区时，它需要被添加到缓冲区的第一个位置。

*这是我到目前为止的代码：*

**结构：**

```
typedef struct BufferDescriptor {
    char * ca_head ;
    int capacity ;
    char inc_factor;
    int addc_offset ;
    int mark_offset ;
    char r_flag;
    char mode;
} Buffer ; 
```

**编码：**

```
int b_reset ( Buffer *pB )
{
    Buffer *temp = NULL;
    int i = 0;
    int j = 1;

    if (pB == NULL)
    {
    return R_FAIL_1;
    }
    else
    {
        temp = (Buffer*)malloc(sizeof(Buffer*));
        if (temp == NULL)
        {
            return R_FAIL_1;
        }
        temp->ca_head = (char*)malloc(pB->capacity);
        if (!temp->ca_head)
        {
            temp = NULL;
            return R_FAIL_1;
        }

        for(i = 0;i < ca_getsize(pB);++i)
        {
            temp->ca_head[j] = pB->ca_head[i];
            j++; 
        }

        pB->ca_head = temp->ca_head;

        //free(temp->ca_head);
        //free(temp);

        return 0;
    }
} 
```

我在这段代码中的目标是创建一个临时缓冲区，它基本上会根据实际给定的缓冲区将所有内容转移 1 次。这将使第一个位置为空，因此可以添加另一个字符。

我遇到的问题是原始缓冲区在我重置后似乎没有返回正确的值。

例如，当我这样做时：

```
temp->ca_head[0] = 'a';
temp->ca_head[1] = 'b';
temp->ca_head[2] = 'c';
temp->ca_head[3] = 'd';
temp->ca_head[4] = 'e';

b_reset(temp); //this will return the size as 0, when it's actually 5

//temp->ca_head[0] = 'i'; //if this is executed, it returns the size as 6 
                          //and prints out the right values, but if it's not, 
                          //it will not print out anything

printf("%d", ca_getsize(temp));
for(i = 0;i < ca_getsize(temp);++i)
{
    printf("%c", temp->ca_head[i]);
} 
```

我知道这里出了点问题，但我不太确定是什么。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:40:17.983

此代码基于您的后续评论：

> 好吧，我不是要调整缓冲区的大小，我只想在第一个位置创建一个空白空间，所以基本上将所有内容都向右移动了 1 次。假设缓冲区中有足够的空间来处理这个过程。

我认为除了最初的之外，您不需要做任何 malloc() 。您可以将所有内容循环上移：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>

#define R_FAIL_1 1

#define BUFFER_SIZE 10

typedef struct BufferDescriptor {
    char * ca_head ;
    int capacity ;
    char inc_factor;
    int addc_offset ;
    int mark_offset ;
    char r_flag;
    char mode;
} Buffer ;

void allocate_buffer(Buffer *pB, int size)
{
   pB->ca_head = malloc(size);
   assert(pB->ca_head);
   pB->capacity = size;
}

int ca_getsize( Buffer *pB)
{
   return pB->capacity;
}

int b_reset ( Buffer *pB )
{
   int i = 0;

   if (pB == NULL)
   {
      return R_FAIL_1;
   }
   else
   {
      if ( ca_getsize(pB) <= 0 || pB->ca_head == NULL ) 
         return R_FAIL_1;
   }
   // shift data up by 1 byte
   for( i = ca_getsize(pB) - 1 ; i > 0;i-- )
   {
      pB->ca_head[i] = pB->ca_head[i-1];
   }
   pB->ca_head[0] = '\0';
   return 0;
}

void print_buffer(Buffer *pB)
{
   printf("capacity: %d \n", ca_getsize(pB));
   for (int i = 0;i < ca_getsize(pB);++i)
   {
      printf("buffer(%d): [%d] ",i, pB->ca_head[i]);
   }
   printf("\n");
}

int main(void)
{
   Buffer a_buffer;
   allocate_buffer(&a_buffer,BUFFER_SIZE);
   strcpy(a_buffer.ca_head,"abcdefgh");
   print_buffer(&a_buffer);
   int ret = b_reset(&a_buffer);
   assert(ret == 0);
   print_buffer(&a_buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:57:09.327

```
 temp = (Buffer*)malloc(sizeof(Buffer*)); 
```

您需要分配足够的空间来保存 a `Buffer`，但您只分配足够的空间来保存指向缓冲区的指针。这应该是：

```
 temp = (Buffer*)malloc(sizeof(Buffer)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:14:11.483

你不正确地管理你的记忆。实际上，您只需要处理 ca_head 成员的内存（如果我对您的作业问题的解释是正确的），您正在为新的 Buffer 结构分配内存。

每次调用 b_reset 时，都会为该结构分配不会被释放的内存。如果您没有正确处理您的记忆，您将遇到与您在问题中报告的结果一样的意外结果。

我建议你对函数 realloc 进行研究，并在你的 b_reset 函数中正确使用它。

祝你的家庭作业好运。

# ios - 无法将 MacOS 框架与 CMake 链接

> ID：12547624
> 
> 赞同：8
> 
> 时间：2012-09-22T20:52:33.537
> 
> 标签：ios, frameworks, linker, cmake

我正在尝试使用cmake构建一个子项目（它**不是**xcode项目，甚至不是iphone的应用程序，结果是跨平台控制台可执行文件，其中#includes一些从C++抽象类继承的，用objective-c++编写的）

我正在使用本指南链接 mac os 框架：[http ://www.vtk.org/Wiki/CMake:HowToUseExistingOSXFrameworks](http://www.vtk.org/Wiki/CMake:HowToUseExistingOSXFrameworks)

这个宏：

```
macro(ADD_FRAMEWORK fwname appname)
find_library(FRAMEWORK_${fwname}
    NAMES ${fwname}
    PATHS ${CMAKE_OSX_SYSROOT}/System/Library
    PATH_SUFFIXES Frameworks
    NO_DEFAULT_PATH)
if( ${FRAMEWORK_${fwname}} STREQUAL FRAMEWORK_${fwname}-NOTFOUND)
    MESSAGE(ERROR ": Framework ${fwname} not found")
else()
    TARGET_LINK_LIBRARIES(${appname} ${FRAMEWORK_${fwname}})
    MESSAGE(STATUS "Framework ${fwname} found at ${FRAMEWORK_${fwname}}")
endif()
endmacro(ADD_FRAMEWORK) 
```

这是 CMakeLists.txt 中的重要部分

```
project(myprojectname)
........
add_executable(mytarget src/mytarget.cpp)

add_framework(CoreMedia mytarget)
add_framework(CoreVideo mytarget)
add_framework(AVFoundation mytarget)
add_framework(Foundation mytarget)
........ 
```

这就是我在尝试构建时所拥有的：

```
WARNING: Target "mytarget" requests linking to directory "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/CoreMedia.framework".  Targets may link only to libraries.  CMake is dropping the item.
WARNING: Target "mytarget" requests linking to directory "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/CoreVideo.framework".  Targets may link only to libraries.  CMake is dropping the item.
WARNING: Target "mytarget" requests linking to directory "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/AVFoundation.framework".  Targets may link only to libraries.  CMake is dropping the item.
WARNING: Target "mytarget" requests linking to directory "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/Frameworks/Foundation.framework".  Targets may link only to libraries.  CMake is dropping the item. 
```

它实际上找到了所有这些框架，但无法链接，这会产生很多链接器错误。我很确定这就是原因，因为我使用 XCode 制作了一个 testproj，并且在我链接所有需要的框架之前它具有相同的错误。

当我只是使用

```
FIND_LIBRARY(COREMEDIA_LIB CoreMedia)
... 
```

然后`COREMEDIA_LIB`设置为`NOTFOUND`- 发生了什么事？：/

我用谷歌搜索了很多，但什么也没有:(在那里感觉很迷茫。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-24T16:47:21.173

明白了：你必须链接的**不是**`frameworkname.framework`文件夹`TARGET_LINK_LIBRARIES`，而是`fwname.framework/fwname`文件！现在它就是这样工作的。

修改后的宏是这样的：

```
macro(ADD_FRAMEWORK fwname appname)
    find_library(FRAMEWORK_${fwname}
    NAMES ${fwname}
    PATHS ${CMAKE_OSX_SYSROOT}/System/Library
    PATH_SUFFIXES Frameworks
    NO_DEFAULT_PATH)
    if( ${FRAMEWORK_${fwname}} STREQUAL FRAMEWORK_${fwname}-NOTFOUND)
        MESSAGE(ERROR ": Framework ${fwname} not found")
    else()
        TARGET_LINK_LIBRARIES(${appname} "${FRAMEWORK_${fwname}}/${fwname}")
        MESSAGE(STATUS "Framework ${fwname} found at ${FRAMEWORK_${fwname}}")
    endif()
endmacro(ADD_FRAMEWORK) 
```

希望它对某人有用...

# java - 在我最小化或调整 JFrame 大小之前，JMenu 不会出现

> ID：12547625
> 
> 赞同：4
> 
> 时间：2012-09-22T20:52:45.197
> 
> 标签：java, swing, minimize, jmenu, jmenubar

我有一个带有 a 的 GUI `JMenuBar`，问题是有时 a`JMenu`在我调整大小或最小化`JFrame`. 有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T20:22:29.583

我遇到了同样的问题，我通过`JFrame`在菜单的代码之后设置可见来解决它。因此，您首先创建一个`JFrame`，然后添加`JMenuBar`最后：（`frame.setVisible(true);`我的框架只是称为“框架”，将“框架”替换为框架的名称）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:19:59.020

另一个不如@Marko 的解决方案漂亮的是`frame.revalidate()`在-call 之后`frame.setJMenuBar()`调用。

# elasticsearch - 使用 elastica 根据位置对结果进行排序

> ID：12547626
> 
> 赞同：0
> 
> 时间：2012-09-22T20:52:46.297
> 
> 标签：elasticsearch, elastica

我正在尝试使用 elastica 来学习 ElasticSearch 以进行连接并查找难以获取的信息以了解如何查询它。

所以基本上我想做的是，我已经将数据插入到弹性搜索中，添加了地理坐标，现在我需要做的是能够运行一个查询，该查询将对我得到的最接近的结果进行排序。

我想找到我所在州的所有商店，然后按照离我当前位置最近的一家为它们排序。

所以给定一个名为“state”的字段和一个名为“point”的字段，这是一个使用 elastica 保存 long/Lat 的数组，查询会是什么？

感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:30:27.817

首先，您需要将您的位置字段映射为类型[（](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html)[`geo_point`](http://www.elasticsearch.org/guide/reference/mapping/geo-point-type.html)这*需要在插入任何数据之前完成*）

```
{
    "stores" : {
        "properties" : {
            "point" : {
                "type" : "geo_point"
            }
        }
    }
} 
```

之后，您可以简单地按以下方式对搜索进行排序[`_geo_distance`](http://www.elasticsearch.org/guide/reference/api/search/sort.html)

```
{
    "sort" : [
        {
            "_geo_distance" : {
                "stores.point" : [-70, 40], // <- reference starting position
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "match_all" : {}
    }
} 
```

对于 Elastica，请查看他们关于[映射](http://ruflin.github.com/Elastica/#section-mapping)和[查询构建](http://ruflin.github.com/Elastica/#section-query)的文档，并阅读单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T06:43:09.843

对于那些想要按距离排序的人，这个精简的片段详细说明了如何使用自定义分数：

```
 $q = new BoolQuery();

    $subQ = new MultiMatchQuery();
    $subQ->setQuery('find me')->setFields(array('foo', 'bar'));
    $q->addShould($subQ);

    $cs = new CustomScore();

    $cs->setScript('-doc["location"].distanceInKm(lat,lon)');
    $cs->addParams(array(
        'lat' => -33.882583,
        'lon' => 151.209737
    ));

    $cs->setQuery($q); 
```

希望能帮助到你。

# mysql - 合并和添加相似的结果

> ID：12547628
> 
> 赞同：1
> 
> 时间：2012-09-22T20:52:53.987
> 
> 标签：mysql

当检索到多个类似记录时，我已经搜索了所有内容，我需要将 1 个字段加在一起。我的查询和结果如下。

这是我的查询：

```
SELECT m.id as 'id', m.name as 'Merchant Name', c.numStamps as 'Num Stampts on Card', COUNT(c.numStamps) as '# Users with this # Stampts'
FROM Merchants m, Cards c, Stores s
WHERE c.store_id = s.id
AND s.merchant_id = m.id
and c.redeemed = 0
and c.Numstamps>8
and c.datelaststamp > '2011-07-16 07:00:00'
group by m.id, c.numStamps
order by m.name, c.numStamps 
```

这些是结果：

```
id Merchant Name Stampts UserStampts

391 360 Gourmet Burritos 9 3
391 360 Gourmet Burritos 10 6 
```

我需要结合`id`和`Merchant Name`。`Stampts`没关系，但我需要加在一起`UserStampts`。所以我需要回报是：

```
391 360 Gourmet Burritos 10 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:26:46.287

修改查询的一种简单方法是将其转换为嵌套查询：

```
SELECT id, Merchant, SUM(Stampts) AS Stampts, SUM(UserStampts) AS UserStampts
FROM ( ... your old query goes here ... ) AS oldquery
GROUP BY id, Merchant; 
```

这将对两列求和（独立）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:00:17.070

You need to group by the name as well:

```
group by m.id, m.name, c.numStamps 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:02:00.667

尝试这个

```
SELECT m.id as 'id', m.name as 'Merchant Name', c.numStamps as 'Num Stampts
on Card', COUNT(c.numStamps) as '# Users with this # Stampts'

FROM Merchants m, Cards c, Stores s

WHERE c.store_id = s.id

AND s.merchant_id = m.id

and c.redeemed = 0

and c.Numstamps>8

and c.datelaststamp > '2011-07-16 07:00:00'

group by m.id

order by m.name, c.numStamps 
```

# java - 使用 java（android 应用程序）从 wordpress 类别帖子中提取（不使用 wp 模板）

> ID：12547630
> 
> 赞同：0
> 
> 时间：2012-09-22T20:53:01.020
> 
> 标签：java, android, wordpress

我的情况 - 我想为一个使用 java 的 android 应用程序编写一个功能，以提取wordpress 网站特定类别中最新帖子的`the_title()`和字段。`the_content()`我不使用 wordpress 主题 - 我只是在我的网站的 html 中使用 php 插入来将各种 wordpress 项目放置在页面的不同位置。

我还没有尝试过使用 xml 或 rss，但在我看来，在这个过程中增加了额外的步骤来做一些我想做的简单而简短的事情。

使用java，我不能调用具有php插入的特定html文件，该文件从wordpress数据库中提取我想要的项目-html提取所有wordpress数据项，而java只是从html中提取字符串并显示在我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:04:16.147

`the_title()`并且`the_content()`是 PHP 函数，因此您不能从 Java 本身调用它们。您可以编写一个以 JSON 形式返回这些值的 Web 服务，然后您可以在您的 Android 应用程序中使用它。

```
// define hook for ajax functions
function core_add_ajax_hook() {
    // don't run on admin
    if ( !is_admin() ){
        do_action( 'wp_ajax_' . $_REQUEST['action'] );
    }
}
add_action( 'init', 'core_add_ajax_hook' );

// function to return latest title and content as JSON
function latest_post() {
    // array for values
    $json = array();

    // get values for JSON array
    if (have_posts()) : the_post();
        // put values into JSON array
        $json['the_title'] = get_the_title();
        $json['the_content'] = get_the_content();
    endif;

    // encode to JSON and return
    echo htmlentities(json_encode($json), ENT_NOQUOTES, 'UTF-8');
}
// hook function on request for action=latest_post
add_action('wp_ajax_latest_post', 'latest_post'); 
```

然后，您可以通过以下方式获取此信息：

[http://yoursite.com/wp-load.php?action=latest_post](http://yoursite.com/wp-load.php?action=latest_post)

# c# - Can't read keyboard input

> ID：12547638
> 
> 赞同：0
> 
> 时间：2012-09-22T20:56:08.793
> 
> 标签：c#, xna

```
KeyboardState kbstate = Keyboard.GetState();
Keys[] pressed = kbstate.GetPressedKeys(); 
```

`Enter``Esc``Backspace``Alt``Ctrl``Win``Numlock``Home``Ins` and possibly more worked fine but when I press any letter, number, or arrows, it won't read it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:38:10.333

I have only ever seen keyboard input handled like so:

```
KeyboardState kbState = Keyboard.GetState();

if (kbState.IsKeyDown(Keys.A))
{
    // 'A' key is down
} 
```

If you wanted key pressed (i.e. the button was *just* pressed) you would use the following method:

```
public bool IsNewKeyPress(Keys key)
{
    return (kbState.IsKeyDown(key) &&
         oldKbState.IsKeyUp(key));
}

// And in the update method...
public void Update(GameTime gameTime)
{
    oldKbState = kbState;
    kbState = Keyboard.GetState();

    if (IsNewKeyPress(Keys.A))
    {
        // A was *just* pressed
    }

    // ...
} 
```

# asp.net-mvc - 如何避免在我的 cshtml 标签中添加 @using？

> ID：12547641
> 
> 赞同：11
> 
> 时间：2012-09-22T20:56:31.117
> 
> 标签：asp.net-mvc

我正在使用 Razor 学习 ASP.NET MVC。我注意到有时某些 cshtml 文件已经导入了一些命名空间（例如 NopCommerce，我正在使用它来学习）

```
@model ProductListModel
@using Telerik.Web.Mvc.UI 
```

或者

```
@{
    Layout = "~/Views/Shared/_ColumnsOne.cshtml";

    Html.AppendScriptParts(@Url.Content("~/Scripts/jquery.fileupload.js"));
    Html.AppendScriptParts(@Url.Content("~/Scripts/jquery.lightbox-0.5.min.js"));
    Html.AppendCssFileParts(@Url.Content("~/Content/Style/jquery.fileupload-ui.css"));
    Html.AppendCssFileParts(@Url.Content("~/Content/Style/jquery.lightbox-0.5.css"));
} 
```

（Html.AppendScriptsParts 在 nop.Web.Framework.UI 中声明）如果我制作自己的 cshtml 文件，我需要添加“使用”行或引用如下：

```
@using System.Linq;
@using Nop.Web.Framework.UI

@model Nop.Admin.Models.Proposal.ProposalListModel 
```

我是否缺少任何技巧来引用这些项目？为什么前两个示例更简单并且不需要显式引用？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-22T21:04:51.883

在此处添加您的命名空间`...\Views\Web.config`：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="Your.Namespace" />  
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

# objective-c - UIActionSheet 标题比较失败

> ID：12547644
> 
> 赞同：2
> 
> 时间：2012-09-22T20:56:46.840
> 
> 标签：objective-c, nsstring, ios6, uiactionsheet

我只遇到了 iOS 6 的问题。
这段代码适用于所有其他版本。
我没有收到任何警告。

代码只是不符合`if`条件。即使 NSLog 将 buttonTitle 的值正确显示为“选择目标”，
它也无法`present.title`与字符串进行比较。`Select Goal`

```
- (void)actionSheet:(UIActionSheet *)presentSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

    NSString *buttonTitle=[presentSheet buttonTitleAtIndex:buttonIndex];
    NSLog(@"button title  is %@", buttonTitle);

    actionSheet.delegate =self;
    if (presentSheet.title == @"Select Goal") {
        self.goalsTextField.text =buttonTitle;
        [self.goalsTextField resignFirstResponder];

    }

    if (presentSheet.title ==@"Select Level") {
        self.levelTextField.text =buttonTitle;
        [self.levelTextField resignFirstResponder];

    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:37:45.340

不要使用 进行字符串比较，请`==`使用`isEqualToString:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:27:31.507

我不确定为什么比较失败，但我可以让你感兴趣[`UIActionSheet+Blocks`](https://github.com/jivadevoe/UIAlertView-Blocks)吗？我一直考虑`UIAlertView`并`UIActionSheet`拥有一个非常糟糕的回调 API，因为它对代码更改非常脆弱，并且对于按钮的运行时参数检查有点混乱。

`UIAlertView+Blocks`并将`UIActionSheet+Blocks`为您提供一个基于块的 API，您可以在其中更轻松地动态确定向用户呈现哪些选项，但更重要的是，在用户做出选择时执行块应该发生的事情。对于开发人员而言，此 API 的脆弱性和易错性无限降低。它还使得当您在视图控制器中有多个警报和操作表时，您不必进行任何条件编码。在周围，这是纯粹的胜利。我非常困惑为什么 Apple 没有在 UIKit 中创建基于块的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:03:32.373

您不能使用比较字符串值`==`，您正在尝试比较 NSString**对象**并通过编写一个语句，就像`presentSheet.title == @"Select Goal"`**您正在比较对象指针** *（即内存位置，这并不总是相同。实际上可能几乎从来没有。）*，而**不是**您认为要比较**的字符串值。**

要比较字符串值，有 NSString 方法，您需要的是：

```
if([presentSheet.title isEqualToString:@"Select Goal"]) 
```

那应该这样做。

# python - Pyramid.security：从具有 unauthenticated_userid(request) 的数据库中获取用户信息真的安全吗？

> ID：12547646
> 
> 赞同：6
> 
> 时间：2012-09-22T20:57:21.080
> 
> 标签：python, authentication, security, pyramid

我正在尝试使用 Pyramid 文档的“[使“用户对象”可用作请求属性](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/user_object.html)“示例来制作用户数据的可访问缓存。

他们使用此代码将用户对象返回给 set_request_property：

```
from pyramid.security import unauthenticated_userid

def get_user(request):
    # the below line is just an example, use your own method of
    # accessing a database connection here (this could even be another
    # request property such as request.db, implemented using this same
    # pattern).
    dbconn = request.registry.settings['dbconn']
    userid = unauthenticated_userid(request)
    if userid is not None:
        # this should return None if the user doesn't exist
        # in the database
        return dbconn['users'].query({'id':userid}) 
```

我不明白他们为什么使用 unauthenticated_userid(request) 从数据库中查找用户信息……这不是不安全吗？这意味着用户可能没有登录，那么为什么要使用该 ID 从数据库中获取私人信息？

不应该

```
 userid = authenticated_userid(request) 
```

而是用来确保用户已登录？使用 unauthenticated_userid(request) 有什么好处？请帮助我了解这里发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:09:07.780

`unauthenticated_userid`通话是更便宜的通话；*它从请求中查找用户 ID，而无需再次*执行整个身份验证过程。

这里的关键概念*又*是这个词。您应该只在已授权的视图中使用该方法。换句话说，当您到达使用`unauthenticated_userid`您的代码时，您*已经*验证了用户，并且特别不想为这个特定的调用再次这样做。

针对后端持久存储对用户进行身份验证可能会很昂贵，尤其是在此类存储不支持缓存的情况下。API 方法是一种优化，`unauthenticated_userid`其中请求基本上是您的`userid`缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-24T14:34:10.460

这是一个迟到的回复，但它被链接为 Pyramid 的一些用户的混淆来源。

这里接受的答案不是`unauthenticated_userid`用于`request.user`. 它与性能无关。

使用它的原因`unauthenticated_userid`是因为它可以更轻松地在应用程序之间重用身份验证策略，只需进行较小的修改。您的应用程序需要一个“事实来源”来确定是否允许将用户视为已通过身份验证，并且通常策略的内部逻辑不足以做出此决定。一个有效的 cookie 很好，但您通常希望在信任它之前与您的后端进行验证。太好了，那么我们把这个逻辑放在哪里呢？那么`unauthenticated_userid`没有意义，因为它是策略的可重用部分，专门专注于解析请求标头。你可以把它放进去，`authenticated_userid`但这种方法不是你在应用程序中通常关心的方法。您通常`request.user`在您的应用程序中使用（您可能很少关心`request.authenticated_userid`直接），最后`request.user`是功能的超集——它提供了一个完整的用户对象，而不仅仅是一个 id。在大多数情况下，在不验证整个对象的情况下验证 id 是很愚蠢的。我们只能有一个“真相来源”，因此配方声明它是`request.user`。groupfinder（因此`authenticated_userid`）现在可以依赖`request.user`并相信它从那里返回的内容已通过后端正确验证。也已经被具体化，因此自然会`request.user`加快后续调用。`request.authenticated_userid`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:36:37.013

看起来 Martijn Pieters 是对的。

我的微基准测试（在我的项目中，我使用 Redis 作为用户和其他一切的数据库）：

```
print ('start test')
t1 = time()
authenticated_userid(self.request)
print ('authenticated: ' + str(time()-t1))
t1 = time()
unauthenticated_userid(self.request)
print ('unauthenticated: ' + str(time()-t1))
print ('test_stop') 
```

结果：

```
start test
REDIS AUTH! # <-- actually this is query to groups finder in Redis
authenticated: 0.00032901763916
unauthenticated: 7.31945037842e-05
test_stop 
```

它经过了几次测试，结果是不变的 :) 你认为我应该在 Pyramid 文档中添加 Martijn 对那篇文章的回答以使事情更“清晰”吗？:)

# c++ - C++ 音频混合

> ID：12547650
> 
> 赞同：2
> 
> 时间：2012-09-22T20:57:50.123
> 
> 标签：c++, c, audio

我希望能够将多个音轨合并到一个文件中，但不知道该怎么做。我需要能够执行以下操作：

*   我需要同时播放多首曲目，并且需要在不同的点改变每首曲目的音量，

*   我需要一些曲目在不同的时间开始，

*   我需要能够将结果写入文件。

如果有人有有用的建议，我不确定要使用哪个库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:10:08.840

没有人回答这个问题，所以我会发布我最终做了什么。我首先尝试使用 libffmpeg，但它太令人困惑而无法开始工作。因此，我使用了 LGPL 下可用的[libsndfile 。](http://www.mega-nerd.com/libsndfile/)这非常简单，但这意味着没有什么乱七八糟的东西可以玩弄。唯一的问题是它不能使用 MP3 格式，所以我只需以编程方式调用 ffmpeg.exe 并将 MP3 文件转换为 FLAC 并加载它们。它并不完美，但它会做到。

# java - Android中的套接字未连接错误

> ID：12547651
> 
> 赞同：0
> 
> 时间：2012-09-22T20:57:51.867
> 
> 标签：java, android, sockets

以下方法返回错误`socket is not connected`。我正在尝试通过 android 模拟器中的 localhost 连接到我的电脑。

```
public class Service {
private static final String SOAP_ACTION = "http://tempuri.org/buscaProdutos";
private static final String METHOD_NAME = "buscaProdutos";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL =  "http://10.0.2.2:1727/Service1.asmx"; //localhost

public String GetRespostas(int valor) { //metod return string

    HttpParams httpParameters = new BasicHttpParams();

    HttpConnectionParams.setConnectionTimeout(httpParameters, 19000);

    int timeoutSocket = 9000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); //conect 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    try { 

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result=(SoapObject)envelope.getResponse();

        return  result.getProperty(valor).toString();

    } catch (Exception e) {// e = "socket is not connected

        Log.d("erro", e.getMessage());
        return e.getMessage();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:59:44.353

关闭防火墙或将访问权限设置为“1727”

# jquery - jquery“语法错误：意外的标记 y”

> ID：12547653
> 
> 赞同：1
> 
> 时间：2012-09-22T20:58:08.050
> 
> 标签：jquery

这可能是一个微不足道的问题，但过去几天我一直在寻找没有解决方案。我正在像这样进行ajax调用：

```
 $.ajax({
    type: 'GET',
    url: "results",
    dataType: 'json',
})
.fail( function (jqXHR, textStatus, errorThrown){
    alert(errorThrown);
    })
    .done(function(data){   
        $.each(data.myitems, function(index, item){
          // do stuff here  
        });
    }); 
```

我的 json 看起来像这样：

```
{
"thisvariable":1,
"anothervariable":2,
    "myitems":[
        {"name":"Matt",
        "birthday":"1978-02-23 00:00:00"},
        {"name":"Carol\y",
        "birthday":"1967-05-05 00:00:00"},
        {"name":"Bob",
        "birthday":"1984-02-03 00:00:00"}
        ]
} 
```

当我拨打这个电话时，我得到“SyntaxError：Unexpected token y”。它不喜欢 Carol\y 中的反斜杠。此数据来自 mysql 数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T21:01:11.567

无论在服务器端创建 JSON，都应该正确转义反斜杠：`Carol\\y`.

如果您无法控制 JSON 的创建方式，也许您可​​以在它返回客户端之前拦截它并替换出现的`'\'`with 。`'\\'`

# javascript - 使用 jquery css() 在 Firefox 中获取错误的 css 属性值

> ID：12547654
> 
> 赞同：0
> 
> 时间：2012-09-22T20:58:53.010
> 
> 标签：javascript, jquery, firefox

使用 html：

```
<a class="jslider-pointer" href="#" style="left: 50%;"></a> 
```

我使用 jquery api css() 来获取 left 属性的值：

```
$('.jslider-pointer').first().css('left') 
```

它在 chrome 中运行良好，返回 50%。但它在 Firefox 中不起作用。它在 Firefox 中返回 150px。

有谁知道它为什么会发生，我怎样才能在 Firefox（一种跨不同浏览器工作的方法）中获得正确的价值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:00:47.560

返回 px 值

```
$('.jslider-pointer').offset().left 
```

其他方式你可以自己计算

```
parseInt($('.jslider-pointer').css('left')) / $('.jslider-pointer').parent().width() * 100; 
```

有一个很好的插件可以解决跨浏览器问题 [jQuery 维度](http://archive.plugins.jquery.com/project/dimensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:39:54.900

根据this other post [Retrieving percent CSS values (in firefox)](https://stackoverflow.com/questions/8387419/retrieving-percentage-css-values-in-firefox)这是一个已知的错误。基于该帖子答案中的小提琴，我制作了一个 jQuery 插件，它应该可以解决您的问题：

```
(function($) {
    $.fn.cssFix = function(property) {
        var el = this[0], value;

        if (el.currentStyle)
            value = el.currentStyle[property];
        else if (window.getComputedStyle)
            value = document.defaultView.getComputedStyle(el,null).getPropertyValue(property);

        return value;
    }
})(jQuery); 
```

用法：

```
$('.jslider-pointer').first().cssFix('left'); 
```

这是一个使用这个插件并在 Chrome 和 Firefox 上工作的[小提琴](http://jsfiddle.net/S9jBY/3/)，并返回在 css 规则中定义的值：要么`%`或`px`。

**编辑：**在 Internet Explorer 中测试，它也可以在那里工作

# actionscript-3 - 在 Flex 中返回只读的 ui 组件

> ID：12547659
> 
> 赞同：0
> 
> 时间：2012-09-22T20:59:26.767
> 
> 标签：actionscript-3, apache-flex, flex-spark

在 Flex 中，我想创建一些变量来保存整个应用程序中使用的 ui 组件字典。理想情况下，Application 组件中应该有一个函数会返回组件的 id：

```
public function getComponent4Id(id:String):UIComponent {} 
```

然后我将使用以下行访问组件：

```
var myComponent:UIComponent = FlexGlobals.topLevelApplication.getComponent4Id("someId"); 
```

现在，唯一的问题是：我希望返回的组件是只读的。*从应用程序的每个角落读取myComponent*
的 一些属性非常方便，但我不希望我的开发人员滥用它并更改*myComponent*。

 **是否可以返回*myComponent*的副本？或者是否有可能以某种方式使其只读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:38:35.190

在您描述的情况下，无法检索只读组件。

您可以通过实现不带 set 方法的 get 方法来创建只读变量。像这样的东西：

```
public var get myValue():UIComponent{
 return UIComponent;
} 
```

这将允许您从组件中检索 UIComponent 实例 myValue；但你将无法设置它。

但是，这不会阻止人们更改返回的 UIComponent 的属性，除非这些属性也以只读方式实现。

我要补充一点，已经有一个方法[getChildByName()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildByName%28%29)按名称检索子组件。如果您有父级实例，则可以使用它来访问子级。

说了这么多，我不确定我是否完全理解您希望实现的目标；有了这个功能。**

# css - 只有一个媒体查询有效

> ID：12547661
> 
> 赞同：1
> 
> 时间：2012-09-22T20:59:35.937
> 
> 标签：css, media-queries

对媒体查询和响应式设计来说是全新的，我在第一关就掉了下来。

我有以下内容：

```
@media only screen and (max-width: 100px) {
    #wrap {
            background: #F00;
    }   
}

@media only screen and (max-width: 500px) {
    #wrap {
            background: #224466;
    }           
} 
```

只有 max-width: 500px 起作用，因为当我将屏幕缩小时，它会变为第一种颜色，但当我将其进一步缩小到 100px 以下时，不会发生任何其他事情。

我哪里失败了？

谢谢

**解决方案：**

对于其他有同样问题的人，这里是 Sean Vieira 提供的答案。

级联仍然适用于活动媒体查询，因此交换它们可以解决问题）我还按照 Roy Stanfield 的建议将其从 100px 增加，因为桌面浏览器可能不会那么小。

```
@media only screen and (max-width: 800px) {
    #wrap {
            background: #224466;
    }     
    .entry-title {
        font-size: 2em; 
    }
}

@media only screen and (max-width: 400px) {
    #wrap {
            background: #F00;
    }   
    .entry-title {
        font-size: 1em; 
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T21:06:46.423

级联仍然适用于活动媒体查询（如果我理解正确的话）。*如果您在没有*媒体查询的情况下查看您所写的内容，问题会变得更加明显：

```
#wrap {
        background: #F00;
}

#wrap {
        background: #224466;
} 
```

切换顺序*应该可以*解决问题：

```
@media only screen and (max-width: 500px) {
    #wrap {
            background: #224466;
    }           
}

@media only screen and (max-width: 100px) {
    #wrap {
            background: #F00;
    }   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:03:51.747

如果您使用的是普通桌面浏览器，您可能无法将其设置为小于 100 像素。尝试将测试宽度增加到更大的尺寸，例如 500 像素和 1000 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:06:35.800

这是因为 CSS 中媒体查询的顺序。要么更改订单，要么尝试放过`!important`使用这个[http://jsfiddle.net/fidrizers/8Pmuw/](http://jsfiddle.net/fidrizers/8Pmuw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:16:46.067

尝试`min-width`在您的查询之一中使用，因此它变为：

```
@media only screen and (max-width: 100px) {
    #wrap {
            background: #F00;
    }   
}

@media only screen and (min-width: 101px) and (max-width: 500px) {
    #wrap {
            background: #224466;
    }           
} 
```

# delphi - 击键设备跟踪 (Delphi)

> ID：12547666
> 
> 赞同：3
> 
> 时间：2012-09-22T21:00:11.977
> 
> 标签：delphi, keyboard, trace, keystroke

> **可能重复：**
> [如何区分 Delphi 中的多个键盘？](https://stackoverflow.com/questions/3060512/how-to-distinguish-multiple-keyboards-in-delphi)

如果我在同一台计算机上连接了两个键盘，是否可以跟踪击键来自哪个键盘，如果是，我该如何在 delphi 中做到这一点？

# google-app-engine - GAE 数据存储与 MongoDB（按价格）

> ID：12547668
> 
> 赞同：3
> 
> 时间：2012-09-22T21:00:24.877
> 
> 标签：google-app-engine, mongodb, heroku, google-cloud-datastore, mlab

我需要一个 NoSql 数据库来写入连续的日志数据。大约。每秒 100 次写入。单个数据包含 3 列且小于 1kb。必须每天只读取一次，然后我可以删除所有日常数据。但我无法决定哪个是最便宜的解决方案；Google App Engine 和 Datastore 还是 Heroku 和 Mongolab？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T07:28:43.677

我可以给你 GAE 的费用：

获取[计费文档](https://developers.google.com/appengine/docs/billing)并假设您将有大约 2.58 亿次操作（每天 86400 秒 * 100 个请求/秒），这将花费您

```
Writing: 258M record * ($0.2 / 100k) = $516 for writing unindexed data

Reading: 258M records * ($0.07 / 100k ops) = $180 for reading once a month

Deleting 258M rec * ($0.2 / 100k) = $516 for deleting unindexed data 
```

存储：每天 1kb 的 860 万个实体 = 每天 8.6GB = 240 GB / 月 = 平均 120 GB

```
Storage cost: 120 GB * 0.12$/GB = $15 / month 
```

因此，您每月在 GAE 上的总操作约为每月 1300 美元。请注意，使用结构化数据库编写非结构化数据并不是最优的，它会反映在价格上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T13:12:40.640

对于 App Engine，建议您使用 memcache 进行此类操作，并且 memcache 不会产生数据库费用。使用 python 2.7 和 ndb，会自动使用 memcache，每秒最多可以写入 1 次数据库。

按当前计费：

读/写每天 6 美分。

每天不到 1 美元的存储空间

# xml - 属性名称重复时，所有子元素中的所有属性的 XSL-T

> ID：12547676
> 
> 赞同：1
> 
> 时间：2012-09-22T21:01:50.160
> 
> 标签：xml, xslt, duplicates

我有一个 XSL-T，它循环遍历 XML 的所有子元素，并将这些属性推送到单个输出元素中。但是，这些子元素中存在重复的属性（多个子元素中的相同属性），并且 XSL 只为每个元素提供一个结果（仅在族中该属性中的一个值）。我也不相信它正在寻找孩子的所有孩子，并将它们正确地推入结果属性集中。

我尝试过使用单个动态 XSL-T，也尝试过使用 N# XSL 模板，每个模板都专门针对单个子元素，然后将子元素的名称硬编码到输出属性中——第二种方法只是给出第一个模板的结果，所以没有解决我的问题。如果我的第二种方法可以固定工作，那很好。如果有办法以动态方式以编程方式执行此操作（第一个选项），那么真的很酷！XSL 很强大，所以希望它可以做到这一点，你们都可以提供帮助！

下面是一个形状像我的 XML 文档的示例：

```
<JSON offset="0" total_rows="1337" millis="987">
<rows Attribute1="" Attribute2="" oid="0000001">
<Name Attribute1="FirstName" Attribute2="LastName">
<_id oid="1337"/>
</Name>
<Occupation oid="12345"/>
</rows>
</JSON> 
```

请注意，父元素和子元素之间存在重复的属性。我只能使用我的动态代码或硬编码方法获得一组这些属性。另外，我不确定这两种方法是否成功地尝试获取行的孩子的孩子——因为它们不起作用，我无法确认这一点。

我的两种 XSL 方法：

动态（只为重复的属性返回一个值）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="JSON">
<DATAPARENT>
<xsl:apply-templates/>
</DATAPARENT>
</xsl:template>
<xsl:template match="//rows">

        <xsl:element name="DataRow">
        <xsl:for-each select="*">                   

                    <xsl:for-each select="@*">  

                    <xsl:attribute name="{name()}">  

                        <xsl:value-of select="." />  

                    </xsl:attribute>

                    </xsl:for-each> 

        </xsl:for-each>
        </xsl:element>
        <xsl:text>&#10;</xsl:text>

</xsl:template>
</xsl:stylesheet> 
```

硬编码（不太灵活，这很好，但除了第一组带有 rows_{name()} 的结果外，什么也没给我）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="JSON">
<DATAPARENT>
<xsl:apply-templates/>
</DATAPARENT>
</xsl:template>

<xsl:template match="/rows">

        <xsl:element name="DataRow">            

                    <xsl:for-each select="@*">  

                    <xsl:attribute name="rows_{name()}">  

                        <xsl:value-of select="." />  

                    </xsl:attribute>

                    </xsl:for-each> 

        </xsl:element>  

</xsl:template>

<xsl:template match="//Name">

        <xsl:element name="DataRow">            

                    <xsl:for-each select="@*">  

                    <xsl:attribute name="Name_{name()}">  

                        <xsl:value-of select="." />  

                    </xsl:attribute>

                    </xsl:for-each> 

        </xsl:element>  

</xsl:template>

<xsl:template match="//Occupation">

        <xsl:element name="DataRow">            

                    <xsl:for-each select="@*">  

                    <xsl:attribute name="Occupation_{name()}">  

                        <xsl:value-of select="." />  

                    </xsl:attribute>

                    </xsl:for-each> 

        </xsl:element>  

</xsl:template>

</xsl:stylesheet> 
```

感谢大家提供的建议和见解。在建议只进行元素属性循环的基本方法之前，请查看我已经提供的 XSL；我已经在使用它们，这是我尚未解决的重复属性问题。谢谢！！

**编辑：所需的输出将是：

```
<DATAPARENT>
<DataRow rows_Attribute1="" rows_Attribute2="" rows_oid="0000001" Name_Attribute1="FirstName" Name_Attribute2="LastName" Name__id_oid="1337" Occupation_oid="12345" />
<DataRow rows_Attribute1="1" rows_Attribute2="2" rows_oid="0000002" Name_Attribute1="FirstName" Name_Attribute2="LastName" Name__id_oid="1254" Occupation_oid="99231" />
</DATAPARENT>** 
```

我知道我不能在 XML 中有重复的命名属性，但我不知道如何以编程方式使用引用源中元素的唯一组合创建属性名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:14:30.773

第一：在您的第一个示例中，您将所有子元素的所有属性写`rows`为一个`DataRow`元素上的属性，具有相同的名称。您只能获得一个具有任何给定名称的属性（即使在子项中出现多个具有该名称的属性），因为 XML 只允许一个元素具有一个具有任何给定名称的属性。如果样式表要生成 XML 输出，您的输出`DataRows`元素可以有一个`oid`属性，但不能有两个。

如果您希望子树中的每个属性-值对都有一个名称-值对，请将它们写为 的子级`DataRow`，而不是属性。

然后：您没有从`rows`（或其后代）的孙辈那里获得任何属性，因为您`xsl:for-each`迭代的是孩子，而不是后代。您可以将 for-each 重写为应用模板，可能使用一种模式（这将使其易于递归，并且某些 XSLT 程序员会发现它更惯用），或者您可以更改`select="*"`为`"select="descendant::*"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:33:39.827

哟还没有显示你想要的输出，但在我看来，好像你正在尝试创建一个具有多个同名属性的元素。这在 XML 中是不允许的，因此 XSLT 不允许这样做。

如果您尝试将两个具有相同名称的属性添加到同一个元素，XSLT 将采用最后添加的属性；XQuery 报告错误。

# javascript - JavaScript 将元素另存为图像或 Extjs 4.x 另存为图像

> ID：12547679
> 
> 赞同：2
> 
> 时间：2012-09-22T21:02:26.007
> 
> 标签：javascript, image, extjs, save

我想知道是否有办法将 Extjs 面板的内容保存为图像？我确实用打印做到了这一点，但现在我想将其保存为图像而不是打印出来。

或者只是一种在javascript中将元素保存为图像的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:57:42.007

是的，有**[HTML2Canvas 项目](http://html2canvas.hertzen.com/)**

有关更多信息，请阅读**[此线程](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)**。

# python - Python 3：读取一行时的 EOF（Sublime Text 2 很生气）

> ID：12547683
> 
> 赞同：36
> 
> 时间：2012-09-22T21:02:53.813
> 
> 标签：python, python-3.x, sublimetext2, eof

```
while True:
    reply = input('Enter text')
    if reply == 'stop': break
    print(reply.upper()) 
```

结果是：

> ```
> Enter text:Traceback (most recent call last):
>   File "C:\PythonProjects\5.py", line 2, in <module>
>     reply = input('Enter text:')
> EOFError: EOF when reading a line
> [Finished in 0.2s with exit code 1] 
> ```

它只在 Sublime Text 2 中。我试过 IDLE，试过命令行，一切都很完美。Subleme 为什么要冲我大喊大叫？

顺便说一句，也许你也可以解释一下我在这种情况下 EOF 可能意味着什么。当然，我已经阅读了文档，如果从输入中读取 EOF，则会引发相应的错误。我想模拟这种情况。输入仅与键盘有关吗？如果是，我应该输入什么组合键来获得 EOF？

先感谢您。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-14T18:49:33.210

我有同样的问题。Sublime Text 默认控制台的问题是它不支持输入。

为了解决这个问题，你必须安装一个名为 SublimeREPL 的包。SublimeREPL 提供了一个接受输入的 Python 解释器。

有[一篇文章](http://www.bestpythonide.com/python-input-eoferror-in-sublime-text-2.html)详细解释了解决方案。

[SublimeREPL 的 GitHub 页面](https://github.com/wuub/SublimeREPL)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-23T04:19:11.690

`help(input)`显示了产生 EOF 的键盘快捷键，即 Unix: `Ctrl-D`、 Windows: `Ctrl-Z+Return`:

> 输入（[提示]）-> 字符串
> 
> 从标准输入中读取字符串。尾随换行符被剥离。如果用户点击 EOF（Unix：Ctl-D，Windows：Ctl-Z+Return），则引发 EOFError。在 Unix 上，如果启用，则使用 GNU readline。如果给出提示字符串，则在读取之前打印不带尾随换行符。

您可以使用空文件重现它：

```
$ touch empty
$ python3 -c "input()" < empty
Traceback (most recent call last):
  File "<string>", line 1, in <module>
EOFError: EOF when reading a line 
```

您可以使用`/dev/null`or `nul`(Windows) 作为空文件进行读取。`os.devnull`显示您的操作系统使用的名称：

```
$ python3 -c "import os; print(os.devnull)"
/dev/null 
```

注意：`input()`愉快地接受来自文件/管道的输入。您不需要`stdin`连接到终端：

```
$ echo abc | python3 -c "print(input()[::-1])"
cba 
```

`EOFError`在您的代码中处理：

```
try:
    reply = input('Enter text')
except EOFError:
    break 
```

或者将您的编辑器配置为在运行脚本时提供非空输入，例如，如果允许，则使用自定义命令行：`python3 "%f" < input_file`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-23T01:15:41.230

EOF 是一种特殊的带外信号，表示输入结束。它不是一个字符（尽管在旧的 DOS 时代，0x1B 的行为类似于 EOF），而是来自操作系统的输入已经结束的信号。

`Ctrl+Z`在 Windows 上，您可以通过在命令提示符下按“输入”EOF 。这会向终端发出信号以关闭输入流，从而向正在运行的程序提供 EOF。请注意，在其他操作系统或终端仿真器上，EOF 通常使用`Ctrl+D`.

至于您对 Sublime Text 2 的问题，`stdin`在 Sublime 中运行程序时似乎没有连接到终端，因此程序开始连接到一个空文件（可能是`nul`或`/dev/null`）。另请参阅[Python 3.1 和 Sublime Text 2 错误](https://stackoverflow.com/questions/9142290/python-3-1-and-sublime-text-2-error)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-21T21:24:37.727

目前看来，唯一的解决方案仍然是安装 SublimeREPL。

为了扩展 Raghav 的答案，每次你想运行带有输入的脚本时都必须进入 Tools->SublimeREPL->Python->Run 命令可能会很烦人，所以我设计了一个可能很方便的快速键绑定：

要启用它，请转到 Preferences->Key Bindings - User，然后将其复制到那里：

```
[
    {"keys":["ctrl+r"] , 
    "caption": "SublimeREPL: Python - RUN current file",
    "command": "run_existing_window_command", 
    "args":
        {
            "id": "repl_python_run",
            "file": "config/Python/Main.sublime-menu"
        }
    },
] 
```

自然，您只需更改“keys”参数即可将快捷方式更改为您想要的任何内容。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-10-03T10:13:55.567

```
try:
    value = raw_input()
    do_stuff(value) # next line was found 
except (EOFError):
   break #end of file reached 
```

在处理来自管道输入的输入流的末尾时，这似乎是 raw_input 的正确用法。[参考这篇文章][1]

# .net - 个人身份信息 (PII)、跟踪和消息记录

> ID：12547687
> 
> 赞同：4
> 
> 时间：2012-09-22T21:03:50.933
> 
> 标签：.net, wcf, security, logging, serialization

[MSDN 讨论了如何在跟踪期间意外记录信用卡信息](http://msdn.microsoft.com/en-us/library/ms730318%28v=vs.100%29.aspx)。但是同一篇文章解释说，“已知”的个人身份信息没有被记录。

我想知道的是，是否有办法将 DataContract 的成员“标记”为 PII，以利用 .net 内置功能从跟踪和日志中过滤掉 PII？我认为答案是否定的，因为我怀疑文章引用的用户名和密码是身份验证步骤的一部分，而不是身份验证之后的数据合同的一部分。

即便如此，是否有任何内置的 .net 属性我可以用它来注释数据协定或可序列化的类成员，这意味着“嘿，这是一个安全敏感属性，当心！”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T00:25:11.570

我得到了下面的博客，解释了如何将 [PII] 属性添加到数据合同

[http://blogs.msdn.com/b/martijnh/archive/2008/08/18/suppressing-personal-identifiable-information-pii-in-wcf-log-files.aspx](http://blogs.msdn.com/b/martijnh/archive/2008/08/18/suppressing-personal-identifiable-information-pii-in-wcf-log-files.aspx)

# zend-framework2 - Zend Framework 2.0 翻译验证器

> ID：12547689
> 
> 赞同：0
> 
> 时间：2012-09-22T21:03:55.443
> 
> 标签：zend-framework2, zend-validate, zend-translate

我正在尝试翻译验证器中的错误，但我有问题..

```
$translator = new Zend\I18n\Translator\Translator();
$translator->addTranslationFile(
    'phpArray',
    'resources/languages/en.php',
    'default',
    'en_US'
);
Zend\Validator\AbstractValidator::setDefaultTranslator($translator); 
```

不起作用，我收到错误

`Fatal error: Class 'Locale' not found in DIR\vendor\zendframework\zendframework\library\Zend\I18n\Translator\Translator.php on line 228`

228行是：

```
$this->locale = Locale::getDefault(); 
```

当我将其设置为：

```
$this->locale = 'pl_PL'; 
```

错误消失但验证器未翻译..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:05:52.747

您需要安装 intl PHP 扩展。

```
sudo apt-get install php5-intl (for linux) 
```

安装后重启你的php。

# php - PHP Mail() 在远程服务器上不起作用

> ID：12547692
> 
> 赞同：0
> 
> 时间：2012-09-22T21:04:19.403
> 
> 标签：php, exchange-server

我正在开发一个应用程序，并且一直在测试 PHP 中的 mail() 函数。以下在我的本地机器上工作得很好，可以向我自己发送电子邮件，但是一旦我尝试将它从测试环境发送到我的本地机器，它就会默默地失败。

我仍会收到“已发送邮件”消息，但未发送任何消息。我在 php.ini 文件中打开了邮件日志记录，但在我刷新页面后似乎也没有填充。

同样，.php 文件和 php.ini 文件在两种环境中都是相同的。测试环境开放了25端口，我们使用的是Microsoft Exchange服务器。

```
<?php
    $to = "user@example.com";
    $subject = "Test mail";
    $message = "Hello! This is a simple email message.";
    $from = "user@example.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
    echo "Mail Sent.";
?> 
```

php.ini 文件的 SMTP 区域：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = exhange.server.org
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = user@example.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:11:56.903

首先，即使邮件失败，也会回显“邮件已发送”。将显示。php 函数 mail() 将在成功时返回 true，在失败时返回 false。将其放入 if 中，您可以检查邮件是否已发送：

```
if(mail($to,$subject,$message,$headers)) echo "Mail Sent."; 
```

应该努力检查电子邮件是否已发送。

关于你的问题，它不起作用，我不太确定，我可能错了，但根据我的经验，有些服务器希望每个标题行后面都有 \r\n 。

```
$headers = "From:" . $from . "\r\n"; 
```

但正如已经说过的，我可能错了，并且与此处的示例有关，使用一个标题行时没有必要 - [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

我在测试邮件功能时，并没有在邮件功能中放入任何头信息，只是`$to`, `$subject`, `$message`. 你可以试一试。我真的很讨厌自己使用 php 邮件功能，我总是使用 PHP 邮件程序类。

抱歉，如果我无法回答您的真正问题，即无法发送电子邮件。我希望你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:52:07.030

有时您的托管服务提供商会阻止传出 SMTP 身份验证。请与您的托管服务提供商确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:51:09.643

在您的 PHP 发行版中检查 PEAR 和 Mail.php。在 cmd 行上，“php -i”来查找您的资源。我相信 PEAR 和 Mail.php 对于 5.2 以上的发行版来说是相当普遍的。我在 Mac 和 Linux 服务器上，更喜欢 PEAR 邮件而不是 PHP 邮件功能。Windows 应该是类似的。这是使用 PEAR Mail 发送多封电子邮件的示例。

```
 /** PEAR::MAIL
 * PEAR::Mail only opens one mail socket for multiple emails sent
 */
 require_once('/opt/local/lib/php/Mail.php');

 $body = $_POST['message'];
  //using sendmail on backend
 $params['sendmail_path'] = '/usr/sbin/sendmail';

 //using factory method
 $mail_object =& Mail::factory('sendmail',$params);

 //loop through selected users to send
 for ($i=0;$i<count($recipients);$i++){
 if (!empty($recipients[$i]['email'])&&($recipients[$i]['alt_email'])){
 //concatinate email and alt_email
 $address = $recipients[$i]['email'].",".$recipients[$i]['alt_email'];
 }
 else {
 //only one user address
 $address = $recipients[$i]['email'];    
 }

//send the mail instance    
$mail_object->send($address,$headers,$body); 
if (PEAR::isError($mail_object)) {print($mail_object->getMessage());}
} //close the for loop 
```

# windows-8 - SettingFlyout 的垂直滚动条

> ID：12547696
> 
> 赞同：0
> 
> 时间：2012-09-22T21:05:19.870
> 
> 标签：windows-8, microsoft-metro

我有很大的内容需要放在 SettingFlyout 中。问题是 SettingFlyout 太小了。如何为其添加垂直滚动条？

更新：Javascript Metro 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:11:08.190

该场景的 UX 建议是将设置分解为多个弹出窗口。你真的不应该把那么多设置放在一个窗口中。

如果必须这样做，则将内容包装在`ScrollViewer`XAML 或`<div class="ms-scrollview" style="style="height: 100%; width: 300px; overflow-x: hidden; overflow-y: visible;">`HTML 中。

# backbone.js - 骨干网：同步后的cid？

> ID：12547697
> 
> 赞同：0
> 
> 时间：2012-09-22T21:05:24.257
> 
> 标签：backbone.js

我正在使用以下代码测试 Backbone 的 Localstorage。保存模型后，它应该创建一个 id 和一个可在 Model.cid 中访问的 cid。它在控制台中记录 id（见下文），但不是 cid。这是一个重现问题的小提琴[http://jsfiddle.net/mjmitche/haE9K/2/](http://jsfiddle.net/mjmitche/haE9K/2/)

谁能看到我做错了什么？

```
// Model Creation with defaults
var Todo = Backbone.Model.extend({

  localStorage: new Backbone.LocalStorage("todos"), 
  defaults: {
       title:'new todo...',
       description:'missing...',
       done:false
  }
});

var myTodo = new Todo({}); 

console.log("Before save id:"+myTodo.get('id')); // Unique Id from Server
console.log("Before save cid:"+myTodo.cid); // Client side id
myTodo.save(); 

console.log(myTodo.get('title'));
console.log("After save id:"+myTodo.get('id'));
console.log("After save cid:"+myTodo.cid); 
```

控制台结果

```
Before save id:undefined app.js:16
Before save cid:c0 app.js:17
new todo... app.js:20
After save id:99bc7f4c-8837-39f4-91e9-90760d8ee8cd app.js:21
After save cid:c0 app.js:22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:13:46.680

cid 是在创建模型时创建的，然后永远不会更改。请参阅文档：

> 模型的一个特殊属性，cid 或客户端 id 是第一次创建模型时自动分配给所有模型的唯一标识符

让我们看一下Backbone.Model的构造函数：

```
 var Model = Backbone.Model = function(attributes, options) {
    .
    .
    .
    this.cid = _.uniqueId('c');
    .
    .
    .
  }; 
```

如您所见，cid 是使用下划线 uniqueId 方法创建的。

# php - SQL将2列分成多行，然后将它们全部加起来

> ID：12547700
> 
> 赞同：1
> 
> 时间：2012-09-22T21:05:56.960
> 
> 标签：php, mysql

我有一个 MySQL 数据库，其中有一堆列，但重要的两个是“power”和“td”（时差）列。

我需要在每一行中将“power”除以“td”，然后在设定的时间段内将所有行相加。

我知道`WHERE year(time) = year(getdate()) AND month(time) = month(getdate()) AND day(time) = day(getdate()) ORDER BY (time) DESC`只选择适用于今天的行的部分。

如何将每一行的“power”列除以“td”列，然后在 PHP 中将所有这些行加在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:08:46.787

可能是这样的？

```
Select SUM(power/td) from sometable where time = GetDate() order by time DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:08:49.177

```
select sum(power/td)
from mytable
WHERE year(time) = year(getdate()) 
AND month(time) = month(getdate()) 
AND day(time) = day(getdate()) 
```

您不需要 ，`ORDER BY`因为您正在聚合行。

# javascript - 三.JS，改变一个子3D对象的世界位置

> ID：12547701
> 
> 赞同：8
> 
> 时间：2012-09-22T21:06:31.417
> 
> 标签：javascript, graphics, webgl, three.js

所以基本上我有一个组 Object3D 的子 object3D，而子对象的 [x,y,z] 坐标相对于父对象的对象空间显示，我想更改子对象在 3D 空间内的位置. 所以首先我得到子对象相对于世界空间的位置。

```
var wrld_pos = childobject.matrixWorld.multiplyVector3(new THREE.Vector3); 
```

这将返回孩子在世界空间中的位置的三元素向量。现在我想自己定位。所以我创建了一个三元素向量。

```
var new_pos = THREE.Vector3();
new_pos.x = 1;
new_pos.y = 2;
new_pos.z = 3;

childobject.matrixWorld.setPosition(new_pos); 
```

提供 setPosition 的函数定义，它本质上将对象世界矩阵的最后三个元素设置为作为参数传递的向量的值，从而改变对象在世界空间中的位置。为了确保矩阵在这些更改后更新，我调用了以下函数。

```
childobject.matrixWorldNeedsUpdate = true;
childobject.updateMatrixWorld(); 
```

现在在检查对象的新世界矩阵时，我注意到 setPosition 函数什么也没做，什么都没有。

为什么？如果需要真实的代码示例，我会提供。但是上面应该非常准确地代表了我使用的应用程序域和语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T21:42:27.067

编辑：答案已更新。

* * *

您想要更改子对象的世界位置。

假设场景没有应用变换，一种方法是使用以下模式：

```
scene.attach( child ); // detach from parent and add to scene

child.position.set( x, y, z );

parent.attach( child ); // reattach to original parent 
```

该`Object3D.attach( child )`方法添加子对象，同时保持子对象的世界变换。

三.js r.132

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T10:42:53.483

这个[答案](https://stackoverflow.com/a/24458457/7751910)可能对案件有所帮助。从父级移除子级，更改正常位置，然后再次附加。

# jsf - 导航规则未触发

> ID：12547703
> 
> 赞同：1
> 
> 时间：2012-09-22T21:06:41.257
> 
> 标签：jsf, navigation, primefaces

我有一个如下所示的导航规则：

```
<navigation-rule>
    <display-name>forgotPwd</display-name>
    <from-view-id>/login/forgotpwd.jsf</from-view-id>
    <navigation-case>
        <from-outcome>pass</from-outcome>
        <to-view-id>/login/pwdresetcomplete.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>fail</from-outcome>
        <to-view-id>/login/forgotpwd.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

所以我这样做是为了触发导航规则：

*   导航`/login/forgotpwd.jsf?uuid=fed8b3f7-ed33-4941-8306-3d2afbb8d1d0`

此页面具有以下形式：

```
<h:form id="resetForm">
<!-- Omitting the login fields --> 
    <h:commandButton type="submit" id="resetPassword" value="Save" styleClass="btn small" action="#{registration.resetPassword}" >
        <f:param name="uuid" value="#{facesContext.externalContext.requestParameterMap.uuid}" />
    </h:commandButton>
</h:form> 
```

（将 uuid 作为查询字符串参数传递，并将调用 registration.resetPassword 函数。）

这是registration.resetPassword java代码：

（为简洁起见省略了细节）

```
public String resetPassword() {
  // If good
  return "pass";
  // If bad
  return "fail"
} 
```

问题：当它返回“通过”时，导航规则没有触发。它回到 /login/forgotpwd.jsf 而不是 /login/pwdresetcomplete.jsf

这是因为它附加了 UUID 参数吗？为什么我的导航没有触发？

是否有一些我可以触发的 log4j 日志记录来查看为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:03:51.690

```
<from-view-id>/login/forgotpwd.jsf</from-view-id> 
```

`from-view-id`必须是视图 ID，而不是虚拟 URL 。因此，它不应包含`.jsf`扩展名。

```
<from-view-id>/login/forgotpwd.xhtml</from-view-id> 
```

* * *

顺便说一句，请求参数在视图中可用`#{param}`。与 相比，这节省了一些字符`#{facesContext.externalContext.requestParameterMap}`。

```
<f:param name="uuid" value="#{param.uuid}" /> 
```

另请参阅[EL 中的隐式对象](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ImplicitELObjects)。另一个顺便说一句，您使用的是哪个 JSF 版本并不完全清楚，但自从 JSF 2.0（我猜您已经在使用 Facelets 时使用它）以来，您不再需要导航案例 XML 地狱了。您可以`to-view-id`直接从操作方法返回（相对和/或无扩展）。

```
public String resetPassword() {
  // If good
  return "pwdresetcomplete";
  // If bad
  return "forgotpwd"
} 
```

这样你就可以摆脱整个`<navigation-rule>`. 另请参见[隐式导航](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ImplicitNavigation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:19:15.390

我添加了这两个规则......现在它可以工作了。不确定是哪一个做的，但使用 from-action 让它更快乐。

```
<navigation-rule>
        <display-name>forgotPwd</display-name>
        <from-view-id>/login/forgotpwd.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{registration.resetPassword}</from-action>
            <from-outcome>pass</from-outcome>
            <to-view-id>/login/pwdresetcomplete.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{registration.resetPassword}</from-action>
            <from-outcome>fail</from-outcome>
            <to-view-id>/login/forgotpwd.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <display-name>forgotPwd</display-name>
        <from-view-id>/login/forgotpwd.jsf</from-view-id>
        <navigation-case>
            <from-action>#{registration.resetPassword}</from-action>
            <from-outcome>pass</from-outcome>
            <to-view-id>/login/pwdresetcomplete.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{registration.resetPassword}</from-action>
            <from-outcome>fail</from-outcome>
            <to-view-id>/login/forgotpwd.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule> 
```

# matlab - 在matlab中绘制时间与频率

> ID：12547704
> 
> 赞同：3
> 
> 时间：2012-09-22T21:06:44.607
> 
> 标签：matlab, graph, spectrum

我正在尝试找到一种方法来创建显示音频波及其时频数据（x 轴上的时间，y 轴上的波能量和频率数据）的图表。我有这段代码可以在两个单独的图上执行此操作：

```
[audio, fs] = wavread('audio.wav');

subplot(211)
spectrogram(audio,256,200,256,fs,'yaxis')

subplot(212)
wavEnergy=audio(:,1);
time=(1/fs)*length(wavEnergy);
t=linspace(0,time,length(wavEnergy));
plot(t,wavEnergy); 
```

现在我需要两件事的帮助。

首先，我如何获得以秒为单位的频谱图时间？现在它以 0-340 的 x 范围（标记为“时间”）绘制图形，我知道剪辑大约有 40 秒长（另一个图正确显示了这一点）。

其次，我如何将它们绘制在一起？我知道我可以从频谱图中得到一个矩阵，但是我从那个矩阵中得到哪个数组以及如何将它的时间范围转换为秒？

编辑：

第一个问题解决了，但是图表仍然在做一些奇怪的事情——它们都输出了大约 40 秒的数据，但是图表的范围和数据的偏移量不同。频谱图从 0 秒到 40 秒，但前 0.5 秒没有数据，波形图从 0 秒到 45 秒，最后 5 秒没有数据。如何使范围和偏移量相同？

编辑2：

我只需要`axis tight;`在两个子图上使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T13:47:54.643

在同一时间基准上对齐这两个图取决于确定数据的采样频率。根据您传递给频谱图的参数，采样频率为 1000 Hz。根据您对 的定义`time = (1/8000)*length(wavEnergy)`，采样频率为 8000 Hz。这些并不一致。要从您的 wav 文件中获取音频采样频率，您可以使用`[audio, fs] = wavread('audio.wav')`.

# xcode - 无法更改应用程序的可执行权限

> ID：12547706
> 
> 赞同：167
> 
> 时间：2012-09-22T21:07:01.540
> 
> 标签：xcode, ios6, xcode4.5

刚刚更新到 iOS 6 sdk 和最新的 Xcode 并在尝试构建到我的 3gs 时得到这个。我在有效架构下添加了 armv6？

“无法更改应用程序的可执行权限”

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2012-09-24T04:59:21.833

我可以通过删除我之前使用相同的捆绑标识符上传的应用程序来解决它（xcode 对 chmod 感到困惑）。尝试从 xCode Organizer（您的设备名称 -> 控制台）检查日志，您应该从该日志中获取信息。祝你好运！

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-10-01T06:45:36.547

伙计们，我解决了这个问题 - 因为我已经在手机上安装了使用相同捆绑标识符的相同应用程序。- 您需要做的是删除 iPhone 上所有使用相同捆绑标识符名称的应用程序。- 你可以的！！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-08T16:56:14.707

您可能有不同的目标名称。您可以从头开始应用程序，但您需要相同的目标名称和相同的包标识符。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-10-31T07:30:16.670

删除已经安装在 iphone/ipad 上的具有相同捆绑标识符的应用程序。iphone/ipad 会与具有相同捆绑标识符的应用程序混淆。所以更改更改当前应用程序的捆绑标识符或删除已安装的应用程序。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-01T09:02:40.350

当您从 Xcode 启动应用程序并且您在手机中安装了具有相同 bundle-id 但名称不同的 appstore 版本时，可能会发生这种情况。在我的情况下，我在 appstore 中使用 App_Beta 是 App。如果两个版本的产品名称不同，您将无法测试从旧版本升级到新版本。解决使名称匹配。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-23T14:06:47.437

我进入管理器并选择了我的测试设备下的应用程序。即使我删除了设备本身上的应用程序，它仍然出现在我的应用程序列表中。我在那里删除了它，这为我解决了这个问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-22T18:00:35.943

我遇到了同样的问题，但我需要将当前安装的应用程序保留在设备中以进行调试。我的解决方案是使用相同的：

1.  目标名称
2.  捆绑标识符
3.  产品名称

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-19T06:47:41.070

您需要使用相同的捆绑标识符删除所有应用程序。我做了同样的事情，但我的 iPod 上仍然存在同样的错误，我清理了 ( `cmd`++ `shift`)`k`构建并重新启动了 iPod，我能够在 iPod 上运行该应用程序。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-26T16:31:26.240

您只需删除设备上已安装的具有相同标识符的应用程序。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-30T22:29:04.890

我遇到了这个错误，为我解决的是构建设置下的产品名称。我已将其更改为其他内容，并开始出现此错误。我把它改回来，它修好了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-06-11T14:31:59.977

只需删除该应用程序的所有先前版本。由于捆绑标识符的不匹配/混淆，它会发生。我删除了所有具有相似标识符的现有应用程序并且能够安装。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-11T17:55:27.663

您需要确保您的设备未设置为具有相同 Bundle ID 的两个应用程序。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-29T04:02:04.377

我只需拔下 USB 电缆并在几秒钟后重新插入即可解决此错误消息。YMMV！

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-07-31T15:37:07.373

当我尝试复制和粘贴一个 xcode 项目来构建另一个应用程序时，我遇到了这个错误。我必须做的是将包标识符名称更改为与我以前的应用程序不同的名称。

![在此处输入图像描述](../Images/14cb1141d5cc1112c90a6e4900f7781a.png)

* * *

## 回答 #15

> 赞同：-8
> 
> 时间：2012-12-07T23:34:31.913

> 无法更改应用程序的可执行权限

***原因***：我在文件系统中有名为`29x29.png`,`58x58.png`,`72x72.png`等的图标。我有软链接 ( [) 以及iPad 和 iPhone 上每个 App Icons](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)`ln -s`所需的名称。例如，是指向真实文件的链接。`Icon-Small.png``29x29.png`

我这样做是因为我的程序运行在不同的平台上，从手机到台式机。Android、Apple 和 Microsoft 都有类似的要求。所以“一组图标”和“不同操作系统的不同链接”对我来说最有意义。

***修复***：不要使用链接。苹果没有告诉你。他们的*“无法更改应用程序的可执行权限”*的错误消息是无用的。

* * *

查看所有不同的答案（和原因），看起来很多事情都可能导致它。

# android - Android：NFC 标签技术 -> 是否应该检查，如果是，如何检查？

> ID：12547708
> 
> 赞同：1
> 
> 时间：2012-09-22T21:07:11.777
> 
> 标签：android, tags, nfc

我的应用程序能够写入 NFC 标签。

```
 ndef.writeNdefMessage(message); 
```

我应该在写入之前检查支持的 NFC 标签技术，还是 Android 会自行处理这个问题并引发错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:09:44.960

Android 将为您处理。所以通常你不需要检查它。

您可能想打电话`ndef.isWritable()`来检查是否可以编写并能够向用户提供更好的反馈。

# python - python a=[[],]*10

> ID：12547710
> 
> 赞同：0
> 
> 时间：2012-09-22T21:07:22.337
> 
> 标签：python, list, append

> **可能重复：**
> [Python 列表混淆](https://stackoverflow.com/questions/5957341/python-list-confusion)

当我编写一个简单的 python 脚本时，我定义了一个新列表，如下所示：

```
A=[[],]*10 
```

我想做的只是初始化一个长度为 10 的列表，每个元素都是一个空列表。

当我做类似的事情时：

```
A[0].append(["abc",]) 
```

我只想将它附加`["abc",]`到`A[0]`，结果是 A 中的每个元素都附加了`["abc",]`

我知道这可能是由于我的初始化 ( `A=[[],]*10`)。我只是想知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:09:00.080

你的表达`A=[[]]*10`相当于：

```
a = []
A = [a]*10 
```

这意味着 A 包含对同一个列表的 10 个引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:11:43.553

您正在创建一个包含 10 个对同一空列表的引用的列表。

您应该改用列表推导：

```
A = [[] for _ in range(10)] 
```

在列表推导中，您为循环中的每次迭代创建一个新列表。如果你使用的是 python 2，你应该使用`xrange`而不是`range`（尽管只有 10 个元素不会有太大的区别）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:10:01.257

所有空列表都是对同一对象的引用。

# ios - CommonCrypto 不是为 arch armv7 iOS 构建的

> ID：12547711
> 
> 赞同：9
> 
> 时间：2012-09-22T21:07:26.343
> 
> 标签：ios, xcode, armv7

我最近刚刚升级到新的 XCode。升级后，我的一些应用程序将无法构建。我收到此错误：

```
ld: cannot link directly with /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/system/libcommonCrypto.dylib.  Link against the umbrella framework 'System.framework' instead. for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经尝试了一切——清理、重新导入、更改架构......

请帮忙

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-06T09:39:41.617

在我尝试了上述两种方法后，我以不同的方式解决了这个问题，但都不适合我。

问题是，当我从主界面（主要构建设置......等）添加库时，我最初正在搜索`crypto`然后两个库返回`libcorecrypto.dylib`，`liblibcommonCrypto.dylib`如果你注意到，两者都以灰色存在，不像通常您通常添加的黄色库。添加这些会导致编译器返回报告（缺少一些其他库，例如 libz，或者您使用的功能越多将需要的另一个库。

如果您注意到上述两个库通常位于`JavaScriptCore.framework`库下（即黄色库），因此，通过删除上述两个并添加`JavaScriptCore.framework`，问题得到解决，并`build successful`显示

还要提一下，基于其中作为捆绑包存在的 gray-libs `JavaScriptCore.framework`，libcrypto 和另一个在`/Library/.../system/path`上面提到的情况下将不存在，即您没有从系统中删除它们，它们只是不存在。

同样，解决方案是：

**从您的主要 XCODE 项目设置中，不要添加：* *dd

```
libcorecrypto.dylib 
liblibcommonCrypto.dylib 
```

**相反，添加：**

```
JavaScriptCore.framework 
```

**在您的 .m （代码）中，只需通过以下方式正常获取它们：**

```
#include <CommonCrypto/CommonDigest.h> (or any of your other libs as needed in code)... 
```

它应该可以正常工作。

我希望这有帮助。

亲切的问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:49:27.663

我刚刚解决了这个问题：

事实证明，libcommonCrypto.dylib 错误是一个红鲱鱼。

按照上面的建议删除 libcommonCrypto.dylib 后，我得到了 9 个新错误。乍一看，我以为它们是加密错误，但实际上不是；对我来说，它实际上可以追溯到 zLib 没有被包括在内，它是在整体实现的更深部分中“导入”的（其中加密是其中的一部分）。

对我来说，它可以追溯到 ASIDataDecompressor.h, #import < zlib.h>

我通过包含缺少的 libz.dylib 框架来修复它；最终，我不必明确包含 libcommonCrypto.dylib。

因此，请务必在切换 libcommonCrypto 后仔细检查错误，并确保没有丢失某些其他库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T10:41:22.523

[更好的解决方案](https://stackoverflow.com/questions/16490304/link-against-the-umbrella-framework)，正如它所说的删除 libcommonCrypto.dylib，并通过添加 SystemConfiguration.framework 来替换。它对我有用，可能对某人有用。我收到链接器错误，说*gettingLink 是针对伞形框架“System.framework”*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T13:42:42.870

我有同样的错误，

`ld: in '/usr/lib/system/libcommonCrypto.dylib', missing required architecture arm64 in file /usr/lib/system/libcommonCrypto.dylib (2 slices) for architecture arm64 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

我通过检查我的 $PATH 解决了这个问题。**这是一个丢失的文件**。

使用`find / -type f -name libcommonCrypto.dylib`

将我的库与我朋友的 mac 系统进行比较，它表明我的计算机上不存在此文件：

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/system/libcommonCrypto.dylib`

Xcode 使用 $PATH 后备，`/usr/lib/system/libcommonCrypto.dylib`但它不是很好的构建（i386 而不是 arm 的东西）。

我复制了我朋友的版本，搬进来`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/system/`，然后我能够再次构建我的项目。

这里有一个恶性问题，因为这个库有很多相同的文件，具体取决于您的架构，并且其中大多数不打算用于 ios 构建。但是，当在专用目录上找不到文件时，$PATH env var 将回退到 /usr/lib。

Xcode 回退，`/usr/lib/system/libcommonCrypto.dylib`但这绝对不是正确的库，因为它不是为 ios 构建的，而是为我的 mac 构建的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T17:48:11.500

我正在使用 cocoapods 进行图书馆管理。其中一个库（您可以在工作区中进行简单搜索）包含对 CommonCrypto.framework 的引用，该引用在其项目设置的框架列表中为红色。

在我的情况下，我必须删除对 CommonCrypto.framework 的依赖，但是这个解决方案只持续到你的 pod 的另一个更新。

顺便说一句，我想知道一个命令来列出 Podfile 中库之间的依赖关系图。

# windows-8 - 强制 Windows 8 使用 UMTS

> ID：12547715
> 
> 赞同：2
> 
> 时间：2012-09-22T21:08:17.593
> 
> 标签：windows-8, virtual-machine, lan, broadband, umts

我的情况：

我正在笔记本电脑上运行（评估）Windows 8 (RTM)。我连接到无法访问互联网的 LAN (DEV-LAN)。我正在运行一个通过桥接模式连接到 DEV-LAN 的虚拟机（VMware Workstation）。此虚拟机无法访问 Internet。

之前，在 Windows 7 中，我可以通过 UMTS 将主机连接到互联网，而虚拟机仍然连接到 DEV-LAN。因此，我可以在主机上的互联网上进行研究（MSDN、Google、Stackoverflow）的同时继续在虚拟机中工作。

当我现在将 Windows 8 主机连接到移动宽带时，运行时行为没有任何变化。整个网络通信仍在 DEV-LAN 上运行。Windows 8 在网络边栏中告诉我移动宽带已连接，但它不使用它。当我移除 DEV-LAN 的网络插头时，将使用宽带连接。但很明显，我不能在我的虚拟机上工作，这取决于 DEV-LAN。

问题：

Windows 8 中是否有任何开关可以用来告诉系统在 LAN 上使用宽带（如果可用）？

非常感谢！

托尔斯滕

* * *

编辑 pst 的评论：给出以下指标

```
IPv4-Routentabelle
==================================================== ==========================
主动路线：
     Netzwerkziel Netzwerkmaske Gateway Schnittstelle Metrik
          0.0.0.0 0.0.0.0 192.168.23.1 192.168.23.12 25
          0.0.0.0 0.0.0.0 77.24.97.50 77.24.97.49 296

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:42:39.577

它终于起作用了 :-) 我将 LAN-Adapter 的指标设置为 999，一切都如我所愿。

将 UMTS 适配器更改为*较低*的指标均不成功。即使我将指标设置为 1 或 5 或 10，netstat /rn 也会告诉我指标 > 50。

所以当我不能降低一个指标时，我必须提高另一个指标；-)

该指标可以很容易地更改如下：

1.  系统设置
2.  网络和互联网
3.  网络连接
4.  以太网 -> 上下文菜单 -> 属性
5.  选择 Internet 协议 (v4) -> 属性
6.  先进的
7.  自动公制关闭并手动设置为 999

# javascript - 如何用 JavaScript 画一个简单的尺子？

> ID：12547716
> 
> 赞同：2
> 
> 时间：2012-09-22T21:08:29.340
> 
> 标签：javascript, android, html, cordova, canvas

我从 PhoneGap 开始，我正在尝试一个简单的应用程序，一个 Ruler。我是 JavaScript 的初学者，我的大部分移动工作都是在原生 Android 代码中完成的，但我对此很头疼，我不知道出了什么问题。

由于屏幕尺寸不同，我的想法是计算一毫米（pixelsInMm）中有多少像素得到屏幕的高度，并使用 HTML5 画布每 N 个像素画一条线。

我的 HTML 的主体很简单，一个画布填满了整个屏幕

```
 <body onload="init();" id="stage" class="theme">     
  <canvas id="myCanvas" style="width: 100%;height: 100%;"></canvas>
  </body> 
```

我已经想出了如何获得设备每英寸像素的密度（dpi），并且使用简单的数学我们可以得到一厘米内有多少像素

```
var mmInInch = 25.399999999972568;
function getPixelsPerMillimeter(dpi){
    return dpi/mmInInch;        
} 
```

我的js文件的其余部分也很简单

```
var heightInPixels;
var heightDensity; 
```

获取以每英寸像素为单位的高度密度

```
function getDeviceResolution(){
    heightDensity = window.MyConnectorClass.getYdpi();
    heightInPixels = window.outerHeight;
    console.log("Y density = " + heightDensity);
    console.log("Y pixels = " + heightInPixels);
    return heightDensity;
} 
```

在给定的画布和 y 坐标中绘制一条水平线

```
function drawOnCanvas(ctx2d,y){
    console.log("Drawing on :" + y)     
    ctx2d.moveTo(0,y);
    ctx2d.lineTo(20,y);
    ctx2d.stroke();
} 
```

我的主循环，在每个 ppm 处绘制一条水平线。

```
function drawRuler(){
    console.log("append Ruler")         
    var YDpi = getDeviceResolution();
    var ppm = getPixelsPerMillimeter(YDpi);
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.lineWidth = 1;
    for(var i=0; i<90; i++){         
      var topPos = (5+ i*ppm);
      console.log("topPos" + topPos);
      drawOnCanvas(ctx,topPos);     
    };
} 
```

但是，正如您在下图中看到的那样，我得到的不是预期的标尺，而是非常间隔的线条，与我预期的 1 毫米相差甚远。为什么？它绘制的线条也有不同的大小，而且它们的宽度绝对不是 1 像素。

![在此处输入图像描述](../Images/5355a549409bb2c588c050e66af15f71.png)

这是显示计算正确的logcat，我在一个高度为800px、屏幕高度为93mm的galaxy S2中测试它，所以每8.6像素我就有1mm。

```
09-22 \n:16.530: D/test(12353): ppm:8.602150744349842
09-22 \n:16.530: D/test(12353): mmSize:93.0
09-22 \n:16.530: D/test(12353): Pos0: 5.0px
09-22 \n:16.530: D/test(12353): Pos1: 13.602150744349842px
09-22 \n:16.530: D/test(12353): Pos2: 22.204301488699684px
09-22 \n:16.530: D/test(12353): Pos3: 30.806452233049527px
09-22 \n:16.530: D/test(12353): Pos4: 39.40860297739937px
09-22 \n:16.530: D/test(12353): Pos5: 48.01075372174921px
09-22 \n:16.530: D/test(12353): Pos6: 56.61290446609905px
09-22 \n:16.535: D/test(12353): Pos7: 65.2150552104489px
09-22 \n:16.535: D/test(12353): Pos8: 73.81720595479874px
09-22 \n:16.535: D/test(12353): Pos9: 82.41935669914858px
09-22 \n:16.535: D/test(12353): Pos10: 91.02150744349842px
09-22 \n:16.535: D/test(12353): Pos11: 99.62365818784826px
09-22 \n:16.535: D/test(12353): Pos12: 108.2258089321981px
09-22 \n:16.535: D/test(12353): Pos13: 116.82795967654795px
09-22 \n:16.535: D/test(12353): Pos14: 125.43011042089779px
09-22 \n:16.535: D/test(12353): Pos15: 134.03226116524763px
09-22 \n:16.540: D/test(12353): Pos16: 142.63441190959747px
09-22 \n:16.540: D/test(12353): Pos17: 151.23656265394732px
09-22 \n:16.540: D/test(12353): Pos18: 159.83871339829716px
09-22 \n:16.540: D/test(12353): Pos19: 168.440864142647px
09-22 \n:16.540: D/test(12353): Pos20: 177.04301488699684px
09-22 \n:16.540: D/test(12353): Pos21: 185.64516563134669px
09-22 \n:16.540: D/test(12353): Pos22: 194.24731637569653px
09-22 \n:16.540: D/test(12353): Pos23: 202.84946712004637px
09-22 \n:16.540: D/test(12353): Pos24: 211.4516178643962px
09-22 \n:16.540: D/test(12353): Pos25: 220.05376860874605px
09-22 \n:16.540: D/test(12353): Pos26: 228.6559193530959px
09-22 \n:16.540: D/test(12353): Pos27: 237.25807009744574px
09-22 \n:16.540: D/test(12353): Pos28: 245.86022084179558px
09-22 \n:16.540: D/test(12353): Pos29: 254.46237158614542px
09-22 \n:16.540: D/test(12353): Pos30: 263.06452233049527px
09-22 \n:16.540: D/test(12353): Pos31: 271.6666730748451px
09-22 \n:16.540: D/test(12353): Pos32: 280.26882381919495px
09-22 \n:16.540: D/test(12353): Pos33: 288.8709745635448px
09-22 \n:16.540: D/test(12353): Pos34: 297.47312530789463px
09-22 \n:16.540: D/test(12353): Pos35: 306.0752760522445px
09-22 \n:16.540: D/test(12353): Pos36: 314.6774267965943px
09-22 \n:16.540: D/test(12353): Pos37: 323.27957754094416px
09-22 \n:16.540: D/test(12353): Pos38: 331.881728285294px
09-22 \n:16.540: D/test(12353): Pos39: 340.48387902964384px
09-22 \n:16.540: D/test(12353): Pos40: 349.0860297739937px
09-22 \n:16.540: D/test(12353): Pos41: 357.68818051834353px
09-22 \n:16.540: D/test(12353): Pos42: 366.29033126269337px
09-22 \n:16.540: D/test(12353): Pos43: 374.8924820070432px
09-22 \n:16.540: D/test(12353): Pos44: 383.49463275139306px
09-22 \n:16.540: D/test(12353): Pos45: 392.0967834957429px
09-22 \n:16.545: D/test(12353): Pos46: 400.69893424009274px
09-22 \n:16.545: D/test(12353): Pos47: 409.3010849844426px
09-22 \n:16.545: D/test(12353): Pos48: 417.9032357287924px
09-22 \n:16.545: D/test(12353): Pos49: 426.50538647314227px
09-22 \n:16.545: D/test(12353): Pos50: 435.1075372174921px
09-22 \n:16.545: D/test(12353): Pos51: 443.70968796184195px
09-22 \n:16.545: D/test(12353): Pos52: 452.3118387061918px
09-22 \n:16.545: D/test(12353): Pos53: 460.91398945054164px
09-22 \n:16.545: D/test(12353): Pos54: 469.5161401948915px
09-22 \n:16.545: D/test(12353): Pos55: 478.1182909392413px
09-22 \n:16.545: D/test(12353): Pos56: 486.72044168359116px
09-22 \n:16.545: D/test(12353): Pos57: 495.322592427941px
09-22 \n:16.545: D/test(12353): Pos58: 503.92474317229085px
09-22 \n:16.545: D/test(12353): Pos59: 512.5268939166407px
09-22 \n:16.545: D/test(12353): Pos60: 521.1290446609905px
09-22 \n:16.545: D/test(12353): Pos61: 529.7311954053404px
09-22 \n:16.545: D/test(12353): Pos62: 538.3333461496902px
09-22 \n:16.545: D/test(12353): Pos63: 546.93549689404px
09-22 \n:16.545: D/test(12353): Pos64: 555.5376476383899px
09-22 \n:16.545: D/test(12353): Pos65: 564.1397983827397px
09-22 \n:16.545: D/test(12353): Pos66: 572.7419491270896px
09-22 \n:16.545: D/test(12353): Pos67: 581.3440998714394px
09-22 \n:16.545: D/test(12353): Pos68: 589.9462506157893px
09-22 \n:16.545: D/test(12353): Pos69: 598.5484013601391px
09-22 \n:16.545: D/test(12353): Pos70: 607.150552104489px
09-22 \n:16.545: D/test(12353): Pos71: 615.7527028488388px
09-22 \n:16.545: D/test(12353): Pos72: 624.3548535931886px
09-22 \n:16.545: D/test(12353): Pos73: 632.9570043375385px
09-22 \n:16.545: D/test(12353): Pos74: 641.5591550818883px
09-22 \n:16.545: D/test(12353): Pos75: 650.1613058262382px
09-22 \n:16.545: D/test(12353): Pos76: 658.763456570588px
09-22 \n:16.545: D/test(12353): Pos77: 667.3656073149378px
09-22 \n:16.545: D/test(12353): Pos78: 675.9677580592877px
09-22 \n:16.545: D/test(12353): Pos79: 684.5699088036375px
09-22 \n:16.545: D/test(12353): Pos80: 693.1720595479874px
09-22 \n:16.545: D/test(12353): Pos81: 701.7742102923372px
09-22 \n:16.545: D/test(12353): Pos82: 710.3763610366871px
09-22 \n:16.550: D/test(12353): Pos83: 718.9785117810369px
09-22 \n:16.550: D/test(12353): Pos84: 727.5806625253867px
09-22 \n:16.550: D/test(12353): Pos85: 736.1828132697366px
09-22 \n:16.550: D/test(12353): Pos86: 744.7849640140864px
09-22 \n:16.550: D/test(12353): Pos87: 753.3871147584363px
09-22 \n:16.550: D/test(12353): Pos88: 761.9892655027861px
09-22 \n:16.550: D/test(12353): Pos89: 770.591416247136px
09-22 \n:16.550: D/test(12353): Pos90: 779.1935669914858px
09-22 \n:16.550: D/test(12353): Pos91: 787.7957177358356px
09-22 \n:16.550: D/test(12353): Pos92: 796.3978684801855px 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:48:15.210

几个问题正在发生。

看看[http://diveintohtml5.info/canvas.html](http://diveintohtml5.info/canvas.html) - 它讨论了如何避免模糊线（起始线为 0.5 像素）并讨论画布大小（不要通过 css 进行）。

作为一个例子看看这里：http: [//jsfiddle.net/QdBd7/2/](http://jsfiddle.net/QdBd7/2/)

变化：

这修复了奇数线宽：

```
drawOnCanvas(Math.floor(topPos)+.5) 
```

添加了缺少的开始路径：

```
ctx.beginPath(); 
```

更改以在加载时设置画布大小：

```
function resizeCanvas(){
   c.width = document.body.clientWidth - 5, // 5 is from jsfiddle frame
   c.height = document.body.clientHeight - 5;
} 
```

即使有了这些变化，您仍然会注意到细微的变化，我不想指出这一点：[http ://en.wikipedia.org/wiki/Floating_point#Accuracy_problems](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)

但是我没有任何解决方案（因为 ppm 最终可能会达到一些奇怪的 y 值，例如 75.812315 - 它会偏离 0.3 像素......）当你画得更多时，你可以以某种方式调整变化，但它得到了随着浮点错误开始出现，更加棘手。

希望这能让你开始。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-29T13:06:39.897

```
var cmm=15
var countCm=0
var c = document.getElementById("myCanvas");
var ctx= c.getContext("2d");
ctx.lineWidth = 1;
ctx.fillRect(0,0,30,250);
function drawOnCanvas(y){
    ctx.beginPath();    
    ctx.moveTo(0,y);
    ctx.lineTo(cmm,y);
    ctx.stroke();
}
function drawRuler(){
    var ppm = 8.602150744349842,
        count = Math.floor(c.height / ppm);

    for(var i=0; i<count; i++){  
        if(countCm==4){cmm=15;countCm=0}else{cmm=4;countCm++}
      var topPos = (5 + i*ppm);
      drawOnCanvas(Math.floor(topPos)+.5);     
    };

}
function resizeCanvas(){
   c.width = document.body.clientWidth - 5,
   c.height = document.body.clientHeight - 5;
}

resizeCanvas();
drawRuler(); 
```

# jquery - 抓取特定 div 中的所有标签并显示它们

> ID：12547724
> 
> 赞同：0
> 
> 时间：2012-09-22T21:09:07.390
> 
> 标签：jquery, html, image, attr

所以我的投资组合网站有一个小问题（你可以在[这里](http://www.taylorswyter.com/testing)看到）

当您单击作品集时，顶部会打开以显示详细信息（标题、年份、角色、描述）以及照片。我已经能够让每个项目替换所有文本数据，但我似乎无法将图像加载到缩略图中。

我已经能够在网站上的所有图像中获得我正在寻找的最后一张图像，但没有显示每个项目的每张照片。

**这是我正在使用的 HTML：**

```
<section id="details">
    <div class="pagewrapper">
        <section id="main-img">
            <article id="big-img">
                <img src="" alt="big-img" />
            </article>

            <article class="small-img-container">
                <a href="#"><img src="#" alt="smallimg" class="small-img" /></a>
            </article>
        </section>

        <section id="description">
            <h3></h3>
            <h4></h4>
            <h5></h5>
            <p></p>
        </section>
    </div>

    <div class="clear"></div>

    </section>

    <section id="portfolio">
        <div class="pagewrapper">
            <h2 class="sectionTitle">Portfolio</h2>

            <div class="thumb">
                <a class="small" href="#" title="David Lockwood Music" data-year="2010" data-role="Sole Wordpress Developer" data-description="David Lockwood is a musician and an educator based in New Hampshire who came to me needing a website for his musical career. I fully developed his site using Wordpress as a CMS, creating a custom template based on the design by Jeremiah Louf. Jeremiah and I worked together on the website's UX design."><img src="images_original/davidcover.png" alt="thumb" />

                    <div class="hide">                      
                        <a href="images/davidlockwood/homepage.png" ></a>
                        <a href="images/davidlockwood/blog.png"></a>
                        <a href="images/davidlockwood/shows.png"></a>
                        <a href="images/davidlockwood/bio.png"></a>
                        <a href="images/davidlockwood/photos.png"></a>

                    </div>

                    <h3>David Lockwood Music</h3>
                    <div class="clear"></div>
                </a>
            </div><!--thumb--> 
```

**这是jQuery：**

```
$(document).ready(function(){

    var proj = {};

    $('.thumb a').click(function() {
        $('#details').slideDown(1000);

        $('.hide a').each(function() {
            proj.img = $(this).attr("href");
            $('.small-img-container img').attr('src',proj.img);

        });

        alert("the image is " + proj.img);//is it getting the image URLS?
        proj.title = $(this).attr("title");
        proj.year = $(this).attr("data-year");
        proj.role = $(this).attr("data-role");
        proj.description = $(this).attr("data-description");

        $('#description h3').text(proj.title);
        $('#description h4').text(proj.year);
        $('#description h5').text(proj.role);
        $('#description p').text(proj.description);

    });

}); 
```

任何人都知道我如何仅获取特定项目的图像，将它们全部显示为缩略图，然后使这些缩略图可单击以查看更大的图像？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:31:31.490

```
$('.hide a').each(function() {
    proj.img = $(this).attr("href");
    $('.small-img-container img').attr('src',proj.img);

}); 
```

`proj.img`将始终获得最后一张图像的值，因为您正在遍历所有`a`标签

如果我理解正确，这就是你需要的：

```
$('.thumb a').click(function() {

    var imageSrc = $(this).find('img[alt="thumb"]').attr('src');

    $('#big-img > img').attr({ src: imageSrc });

    var $thumbs = $(this).next('div.hide').find('img');

    $.each($thumbs, function(i, img){

        var $thumb = $(img)
            .click(function(){
                 $('#big-img > img').attr({ src: $(img).attr('src') });
             })
             .appendTo('#small-img-container');            

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:13:06.303

所以，我重写了所有内容，但我认为这会更容易。

使用数据属性并从那里构建所有内容。我的解决方案要求您使用点击后完整显示的缩小图像（通过 CSS）。

[小提琴](http://jsfiddle.net/BramVanroy/7Wp9z/1/)。

jQuery：

```
$("div#links > a").click(function(e) {
    var ID = $(this).data("content");
    var price = $(this).data("price");
    var descr = $(this).data("description");
    var rating = $(this).data("rating");

    $("div#images > img").hide();
    $("span#price, span#description, span#rating").text("").hide();

    $("div#images").children("img#" + ID).fadeToggle("slow");
    $("div#text span#price").text(price);
    $("div#text span#description").text(descr);
    $("div#text span#rating").text(rating);
    $("span#price, span#description, span#rating").fadeIn("fast");
    $("div#text").fadeIn("fast");

    e.preventDefault();
});

$("div#images > img").click(function() {
    $(this).toggleClass("active");
    var marginL = -$(this).width() / 2;
    $("div#images > img.active").css("margin-left", marginL);
    $("div#images > img:not(.active)").css("margin-left", "0px");

    if ($("div#overlay").is(":hidden")) {
        $("div#overlay").fadeIn("fast");
    }
    else {
        $("div#overlay").fadeOut("fast");
    }
});​ 
```

# iphone - 如果我添加一个子视图控制器，并用它来呈现另一个视图控制器，整个根视图会被替换吗？

> ID：12547727
> 
> 赞同：2
> 
> 时间：2012-09-22T21:09:26.447
> 
> 标签：iphone, ios, ios5, uiviewcontroller, uikit

在 iOS 5 上，如果我添加一个子视图控制器`addChildViewController`并添加它的视图，比如说，在 (0, 100) 并覆盖整个底部屏幕，然后在这个新的子视图控制器中，呈现另一个使用`presentViewController`翻转动画的视图控制器，我以为只有子视图会翻转并呈现一个新视图，但结果是整个视图（除了状态栏之外的整个屏幕）都被翻转了？

我认为他们以“独立的方式”工作？也就是如果一个子视图控制器呈现另一个视图控制器，替换的是子视图控制器的视图，而不是根视图？

（因此，如果呈现的视图控制器的视图具有黄色背景，现在除了状态栏之外的整个屏幕都具有黄色，而不仅仅是从 (0,100) 开始并覆盖底部屏幕的子视图控制器的视图）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T22:24:02.500

设置`childViewController.definesPresentationContext = YES`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:20:52.760

如果您只想翻转子视图控制器，则需要将控制器的视图添加到根视图控制器的视图层次结构中（呸！说快 2 倍！），然后使用`UIView`动画为它们设置动画。

```
[UIView transitionFromView:controllerB.view
                    toView:controllerC.view
                  duration:0.33
                   options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionTransitionFlipFromLeft
                completion:^(BOOL finished) {
                    // whatever completion code you need
                }]; 
```

# css - 在 Less CSS 中跨文件定义变量

> ID：12547731
> 
> 赞同：1
> 
> 时间：2012-09-22T21:09:58.327
> 
> 标签：css, twitter-bootstrap, less

我正在尝试使用 Bootstrap CSS 创建具有多种配色方案的 CSS 主题。每个配色方案都构建为`boostrap.less`文件的修改版本：`bootstrap-red.less`、`bootstrap-green.less`等。

每个 Bootstrap 版本所做的是导入所有默认的 Bootstrap 文件，然后是适当的调色板，然后是主题的核心结构。例如`bootstrap-red.less`：

```
@import "reset.less";
@import "variables.less";
@import "mixins.less";

/* and so on... until */

// Custom code
@import "elements.less";
@import "_mytheme-color-scheme-red.less";
@import "_mytheme-core.less"; 
```

在`_mytheme-color-scheme-red.less`中，我定义变量，例如：

```
@bannerBackground: #59a449; 
```

但是，编译时`bootstrap-red.less`我得到：

```
NameError: variable @bannerBackground is undefined in /.../css/less/_mytheme-core.less 
```

为什么会这样？我原以为它会起作用，因为`variables.less`文件中的变量以相同的方式定义，并且可以在后续文件中使用。

我查看了类似的问题并尝试了不同的方法，但无济于事：

*   `@import``"_mytheme-color-scheme-red.less"`在文件中输入-不可行`_mytheme-core.less`；此外，Bootstrap 并没有这样做，但它仍然有效。
*   在没有 BOM 的情况下以 UTF-8 编码文件 - 不起作用，结果相同。

在我看来，该文件`_mytheme-color-scheme-red.less`根本没有被处理。就好像 Less 编译器只是跳过它并直奔`_mytheme-core.less`如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:02:09.650

固定的。问题毕竟是编码：LESS 编译器跳过了所有错误编码的文件。显然，即使您告诉 Sublime Text 也无法在没有 BOM 的情况下正确保存为 UTF-8；我的文件都是 ANSI 或 UTF-8*和*BOM。为了将它们转换为纯 UTF-8，我不得不求助于 Notepad++。我现在觉得很傻。

来源：[即使导入了“variables.less”，变量名称错误“未定义”](https://stackoverflow.com/questions/9146708/less-css-variable-name-error-is-undefined-even-though-variables-less-impo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T20:33:45.193

我在编译 Bootstrap 2 时遇到了与 LessCss 2.x 类似的错误，降级到 LessCss 1.7.5 为我解决了这个问题。

# ios - iOS6 中的 UISearchDisplayController：消息发送到已释放的“_UISearchBarShadowView”

> ID：12547733
> 
> 赞同：1
> 
> 时间：2012-09-22T21:10:09.980
> 
> 标签：ios, ios6, uisearchdisplaycontroller

Edit2：注释掉了很多东西，现在它可以工作了！现在把东西放回去，直到它再次破裂。

自从像 iOS 3 一样，我就没有碰过这个应用程序，当我尝试在 UISearchDisplayController 中搜索时，突然间我在 iOS 6 中收到“发送到已释放实例的消息”“_UISearchBarShadowView”。这是一个旧应用程序，所以它不使用 ARC。

还有人看到这个吗？不知道该怎么做。

运行 NSZombiesEnabled 我得到：

```
[_UISearchBarShadowView frame]: message sent to deallocated instance 0x950ef70
(gdb) bt
#0  0x0280ca97 in ___forwarding___ ()
#1  0x0284977e in __forwarding_prep_1___ ()
#2  0x00c40421 in -[UISearchResultsTableView setContentOffset:] ()
#3  0x009d2ae6 in -[UIScrollView(Static) _adjustContentOffsetIfNecessary] ()
#4  0x009b58c2 in -[UIScrollView setContentSize:] ()
#5  0x009fbe3f in -[UITableView(_UITableViewPrivate) _updateContentSize] ()
#6  0x00a09fc4 in -[UITableView noteNumberOfRowsChanged] ()
#7  0x00a0992c in -[UITableView reloadData] ()
#8  0x00c4504c in -[UISearchDisplayController searchBar:textDidChange:] ()
#9  0x00b94d85 in -[UISearchBar(UISearchBarStatic) _searchFieldEditingChanged] ()
#10 0x025b4705 in -[NSObject performSelector:withObject:withObject:] ()
#11 0x00961873 in -[UIApplication sendAction:fromSender:toTarget:forEvent:] ()
#12 0x00a232ce in -[UIControl(Deprecated) sendAction:toTarget:forEvent:] ()
#13 0x00a22960 in -[UIControl(Internal) _sendActionsForEventMask:withEvent:] ()
#14 0x00a2f78c in -[UITextField fieldEditorDidChange:] ()
#15 0x00a39bf6 in -[UIFieldEditor webViewDidChange:] ()
#16 0x00642dc9 in __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 ()
#17 0x028770c5 in ___CFXNotificationPost_block_invoke_0 ()
#18 0x027d1efa in _CFXNotificationPost ()
#19 0x00577482 in -[NSNotificationCenter postNotificationName:object:userInfo:] ()
#20 0x06e7109e in WebThreadPostNotification ()
#21 0x05fc026a in WebEditorClient::respondToChangedContents ()
#22 0x063fb78c in WebCore::Editor::respondToChangedContents ()
#23 0x063fe588 in WebCore::Editor::appliedEditing ()
#24 0x06e4bd12 in WebCore::TypingCommand::typingAddedToOpenCommand ()
#25 0x06e4be4a in WebCore::TypingCommand::insertTextRunWithoutNewlines ()
#26 0x06e4c5c0 in WebCore::TypingCommandLineOperation::operator() ()
#27 0x06e4c3b8 in WebCore::forEachLineInString<WebCore::TypingCommandLineOperation> ()
#28 0x06e4ab02 in WebCore::TypingCommand::insertText ()
#29 0x063f8ac6 in WebCore::Editor::insertTextWithoutSendingTextEvent ()
#30 0x063f7d56 in WebCore::Editor::handleTextEvent ()
#31 0x0642b320 in WebCore::EventHandler::defaultTextInputEventHandler ()
#32 0x06a85afd in WebCore::Node::defaultEventHandler ()
#33 0x06421e66 in WebCore::EventDispatcher::dispatchEvent ()
#34 0x064230aa in WebCore::EventDispatchMediator::dispatchEvent ()
#35 0x0642101e in WebCore::EventDispatcher::dispatchEvent ()
#36 0x06a841aa in WebCore::Node::dispatchEvent ()
#37 0x0643b491 in WebCore::EventTarget::dispatchEvent ()
#38 0x0642b0ca in WebCore::EventHandler::handleTextInputEvent ()
#39 0x063ff03e in WebCore::Editor::insertText ()
#40 0x05ffc7fb in -[WebHTMLView(WebNSTextInputSupport) insertText:] ()
#41 0x025b46b0 in -[NSObject performSelector:withObject:] ()
#42 0x06e66ed0 in -[WAKResponder tryToPerform:with:] ()
#43 0x0603b384 in -[WebView(WebViewEditingActions) _performResponderOperation:with:] ()
#44 0x0603d4df in -[WebView(WebViewEditingActions) insertText:] ()
#45 0x00b1f254 in -[UIWebDocumentView insertText:] ()
#46 0x00ae204f in -[UIKeyboardImpl insertText:] ()
#47 0x00ae33b8 in -[UIKeyboardImpl addInputString:fromVariantKey:] ()
#48 0x00ae1f5e in -[UIKeyboardImpl handleStringInput:fromVariantKey:] ()
#49 0x00aec12d in -[UIKeyboardImpl handleKeyEvent:] ()
#50 0x0096f43b in -[UIApplication _handleKeyEvent:] ()
#51 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#52 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#53 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#54 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#55 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#56 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#57 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#58 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#59 0x00a6ce05 in -[UIResponder(Internal) _handleKeyEvent:] ()
#60 0x0096f495 in -[UIApplication handleKeyEvent:] ()
#61 0x0096ee66 in -[UIApplication handleEvent:withNewEvent:] ()
#62 0x0096f24b in -[UIApplication sendEvent:] ()
#63 0x00960cf8 in _UIApplicationHandleEvent ()
#64 0x034afdf9 in _PurpleEventCallback ()
#65 0x034afad0 in PurpleEventCallback ()
#66 0x02792bf5 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#67 0x02792962 in __CFRunLoopDoSource1 ()
#68 0x027c3bb6 in __CFRunLoopRun ()
#69 0x027c2f44 in CFRunLoopRunSpecific ()
#70 0x027c2e1b in CFRunLoopRunInMode ()
#71 0x034ae7e3 in GSEventRunModal ()
#72 0x034ae668 in GSEventRun ()
#73 0x0095e65c in UIApplicationMain ()
#74 0x00002fad in main (argc=1, argv=0xbffff39c) at /Users/mlin/repos/Apps/B-Rhymes/main.m:14 
```

编辑：我取出了搜索的异步以获得完整的堆栈跟踪。奇怪的是有所有这些“WebCore”的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:55:03.707

弄清楚了。这当然是我自己该死的错，但我已经忘记了，因为我已经好几年没看过代码了。我在搞乱内部视图，以调整搜索结果的外观。谢谢您的帮助！

# css - 为空单元格赋予不同的背景颜色

> ID：12547736
> 
> 赞同：3
> 
> 时间：2012-09-22T21:10:44.083
> 
> 标签：css, css-tables

我在互联网上环顾四周，找不到为 html/CSS 中的空单元格赋予不同背景颜色的解决方案。

在开发节日制作系统时，我想通过给制作者（系统用户）一个警告颜色来提醒制作者（系统用户）注意复杂表格中丢失的数据。

我当然知道背景和空单元格属性，但似乎没有组合，因为空单元格属性只有隐藏、显示和固有。但我想在某个地方有一些解决方案......

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T21:15:37.170

您可以使用 CSS3[`:empty`伪类](http://www.w3.org/TR/css3-selectors/#empty-pseudo)来定位空元素并设置它们的样式。或者使用一点JS。

编辑：小提琴[http://jsfiddle.net/rHkMX/](http://jsfiddle.net/rHkMX/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T21:18:45.267

使用：空

要了解如何使用 jQuery 更改 css 背景，请查看此 jsfiddle：http: [//jsfiddle.net/5sVAt/1/](http://jsfiddle.net/5sVAt/1/)

否则，只做 CSS 版本

```
td:empty{
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:20:03.343

您可以使用 :empty 伪类，但我不太确定浏览器的兼容性（因为这是 css3）。但是您可以使用 javascript 来检查 td 的内容。

使用 Jquery 的示例：

```
<script type="text/javascript">
$(document).ready(function() {
    $("td").each(function() {
        if ($(this).html() == "") $(this).css("background", "black");
    });
});
</script> 
```

这将为单元格 html 为空的每个 td 添加黑色背景。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-22T21:18:10.030

您可以为单元格分配一个类`empty`，然后将`empty`类的背景颜色设置为您想要的颜色。

# ruby-on-rails - Ruby 版本混乱

> ID：12547737
> 
> 赞同：0
> 
> 时间：2012-09-22T21:10:48.590
> 
> 标签：ruby-on-rails, ruby, version, conflict

在安装 Ruby 和 RoR 方面需要一些帮助

我最初在上周末（2012 年 9 月 15 日）安装了所有东西，包括 Ruby、RoR 和 RubyMine。我刚刚在我的 win 7 64 位机器上打开了一个命令提示符并运行：

```
$ rails --version 
```

令我惊讶的是，它返回了 2.3.14，因为我期望看到 3.2.8

然后我跑了：

```
$ gem install rails 
```

哪个输出：

```
Successfully installed rails-3.2.8
1 gem installed
Installing ri documentation for rails-3.2.8...
Installing RDoc documentation for rails-3.2.8... 
```

然后`rails --version`再次运行仍然输出 2.3.14

我有点困惑为什么新安装（按照这里的说明 [http://rubyonrails.org/download](http://rubyonrails.org/download)）似乎安装了一个非常旧的版本。

如何安装最新版本？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:26:23.847

听起来你已经安装了两个版本。运行“gem uninstall rails”，它将列出版本并询问您要删除哪个版本。然后选择旧的删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:19:27.587

我现在已经走得更远了。我跑了：

```
F:\>gem cleanup rails
Cleaning up installed gems... Attempting to uninstall rails-2.3.14

You have requested to uninstall the gem:
    rails-2.3.14
restful_authentication-1.1.6 depends on [rails (~> 2.3.4)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn]  y
Executables and scripts will remain installed.
Successfully uninstalled rails-2.3.14
Clean Up Complete

F:\>gem uninstall restful_authentication
Successfully uninstalled restful_authentication-1.1.6

F:\>gem install rails
Successfully installed rails-3.2.8
1 gem installed
Installing ri documentation for rails-3.2.8...
Installing RDoc documentation for rails-3.2.8...

F:\>rails -v
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems.rb:317:in `bin_path': can't find ge
m rails ([">= 0"]) with executable rails (Gem::GemNotFoundException)
        from C:/Ruby193/bin/rails:23:in `<main>' 
```

所以现在它告诉我它已成功安装 rails 但现在当我查询它的版本时出错。

# php - Yii 框架 $model->save() 仅适用于一个模型

> ID：12547738
> 
> 赞同：0
> 
> 时间：2012-09-22T21:10:51.223
> 
> 标签：php, database, frameworks, model, yii

我尝试在我的数据库中获取用户的 Facebook 信息。我在 UserIdentity 中来控制用户的身份验证，我创建了这个方法。

```
<?php
public function insertFbUser()
{
    $user = new User();
        $user->fbId = $this->username['id'];
        $user->username = $this->username['username'];
        $user->email = $this->username['email'];
        $user->password = $this->password;

    $profile = new Profile();
        $profile->first_name = $this->username['first_name'];
        $profile->last_name = $this->username['last_name'];
        $profile->birthday = strtotime($this->username['birthday']);
        $profile->sex = $this->username['gender'];
        $profile->fb_updated_time = strtotime($this->username['updated_time']);
        $profile->fb_verified = $this->username['verified'];
        $profile->fb_educationJson = json_encode($this->username['education']);
        $profile->fb_workJson = json_encode($this->username['work']);

    var_dump($user->save());
    var_dump($profile->save());
} 
```

var_dump() 给我看这个

```
boolean true
boolean false 
```

这两个模型都是使用 GII 模块创建的。我尝试一次只放置一个 prile 属性，但它也不起作用......

有我的数据库： http: [//pastebin.com/u5CNKj9M](http://pastebin.com/u5CNKj9M)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:15:50.523

`print_r($profile->getErrors())`;

（更新）**保存后获取用户ID：**

```
$user->save();
$user_id = $user->id 
```

# ruby - 如何在 ruby 中处理文件而不将其移动到内存中？

> ID：12547741
> 
> 赞同：2
> 
> 时间：2012-09-22T21:11:19.823
> 
> 标签：ruby, file, filesystems

我需要处理一个不适合内存的大文件，或者即使它适合，我也不需要它全部在内存中，因为我只需要查找和修改它的某个部分。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T03:32:26.170

这是一个调整大型文件中间而不将任何文件读入内存的示例。但是，如果您只想阅读一点内容，请参阅[IO.sysread。](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-sysread)

```
TestFile = '/tmp/test'
system "cp /usr/share/dict/words #{TestFile}; chmod +w #{TestFile}"

File.open TestFile, 'r+' do |io|
  io.sysseek 1000000
  io.syswrite 'EASTER EGG!!!'
end
system "grep EASTER.EGG #{TestFile}" 
```

sysread 和 syswrite 在以下几种情况下很有用：

*   您正在不同的地方执行单个 I/O 操作或各种 I/O 操作（缓冲无济于事）
*   您正在执行大型 I/O 操作（缓冲会稍慢）
*   您的程序很复杂或通常只是面向块的，并且正在做自己的缓冲

# python - AttributeErrors 和缺少的方法

> ID：12547743
> 
> 赞同：0
> 
> 时间：2012-09-22T21:11:51.130
> 
> 标签：python, python-2.7

我是 python 编程语言的新手，在做一些相当简单的事情（显然不是）时遇到了问题。这是代码：

```
# Get the list of available network interfaces
listNIC = os.system("ifconfig -s | awk '{print $1}'")
listNIC.split('\r?\n')

# Get the name of the wireless network card with iwconfig
wlanNIC = ''
i = 0
while i < len(listNIC) :
    if listNIC[i].match('eth[0-9]{1}') :
        wlanNIC = listNIC[i]
        break
    i += 1 
```

第一个错误出现在第 3 行，因为某些奇怪的原因 listNIC 是 int 类型。错误是：

```
Traceback (most recent call last):
  File "Kol.py", line 9, in <module>
    listNIC.split('\r?\n')
AttributeError: 'int' object has no attribute 'split' 
```

我通过更改解决了它：

```
listNIC = os.system("ifconfig -s | awk '{print $1}'") 
```

进入

```
listNIC = str(os.system("ifconfig -s | awk '{print $1}'")) 
```

但现在我遇到了一个更奇怪的问题。我收到一条错误消息，指出字符串没有属性匹配。这是错误：

```
Traceback (most recent call last):
  File "Kol.py", line 15, in <module>
    if listNIC[i].match('eth[0-9]{1}') :
AttributeError: 'str' object has no attribute 'match' 
```

所以我的问题如下：

*   如何解决 AttributeErrors 以及它们来自哪里？

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T21:14:33.133

`os.system`返回命令的退出代码，而不是其输出。你把这个数字变成一个字符串，但这不会做你想做的事。它也已被弃用。您可能想查看该`subprocess`模块。

```
output = subprocess.check_output('command', shell=True) 
```

此外，您需要使用模块进行匹配`re`。检查其文档以获取精确的语法，但它应该类似于`re.match(your_pattern, yourstring)`.

最后，虽然您的版本没有错，但更常见的是循环遍历下面示例中的列表。当您保存变量并调用`len`. 它也被认为更pythonic。

```
for nic in listNIC:
    if re.match(pattern, nic):
        wlanNIC = nic
        break 
```

# javascript - 如何确定垃圾收集器正在收集哪些对象？

> ID：12547748
> 
> 赞同：15
> 
> 时间：2012-09-22T21:12:48.850
> 
> 标签：javascript, google-chrome, garbage-collection

我有大量的垃圾收集暂停。在尝试解决问题之前，我想查明对这个集合负有最大责任的对象。我已经查看了 Chrome 上的堆快照，但是（如果我错了，请纠正我）我似乎找不到任何关于正在收集什么的指标，只有什么占用了最多的内存。有没有办法凭经验回答这个问题，还是我仅限于有根据的猜测？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-21T17:49:29.373

在 chrome 配置文件中，需要两个堆快照，一个在执行您要检查的操作之前，另一个在之后。

现在单击第二个快照。

在底部栏上，您将看到带有“摘要”选项的选择框。将其更改为“比较”。

然后在它旁边的选择框中选择要比较的快照（它应该自动选择快照1）。

作为结果，您将获得包含所需数据的表格，即。“新”和“已删除”对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-27T07:08:25.370

对于较新的 Chrome 版本，有一个新工具可以方便地完成此类任务：

“记录堆分配”分析类型。常规的“Heap SnapShot”比较工具（如 Rafał Łużyński 的回答中所述）无法为您提供此类信息，因为每次拍摄堆快照时，都会执行一次 GC 运行，因此 GC 对象永远不会成为快照的一部分。但是，使用“记录堆分配”工具会不断记录所有分配（这就是为什么在记录时它可能会大大减慢您的应用程序的速度）。如果您遇到频繁的 GC 运行，此工具可以帮助您识别代码中分配大量内存的位置。结合 Heap SnapShot 比较，您将看到大多数时候在两个快照之间分配的内存比您从比较中看到的要多得多。

不幸的是，该工具的当前版本不会向您显示分配*发生*的位置，但它会向您显示*已*分配的内容以及在分配时它是如何保留的。但是，从数据（可能还有构造函数）中，您将能够识别您的对象，从而识别它们被分配的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T21:31:57.223

如果您试图在几个可能的罪魁祸首之间进行选择，您可以修改对象定义以将自己附加到全局范围（如文档下的列表或其他内容）。然后这将阻止它们被收集。这可能会使程序更快（它们没有被回收）或更慢（因为它们每次都被标记和扫描检查）。因此，如果您看到性能发生变化，您可能已经发现了问题所在。

一种替代方法是查看每种类型创建了多少对象（在构造函数中设置一个计数器）。如果它们被大量收集，它们也会被频繁地创建。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-27T10:47:29.043

看看[https://developers.google.com/chrome-developer-tools/docs/heap-profiling](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)

特别是遏制视图

> 包含视图本质上是应用程序对象结构的“鸟瞰图”。它允许您查看函数闭包内部，观察共同构成 JavaScript 对象的 VM 内部对象，并在非常低的级别了解您的应用程序使用了多少内存。
> 
> 该视图提供了几个入口点：
> 
> DOMWindow 对象——这些对象被认为是 JavaScript 代码的“全局”对象；**GC 根——VM 的垃圾收集器使用的实际 GC 根**；原生对象——被“推送”到 JavaScript 虚拟机中以实现自动化的浏览器对象，例如 DOM 节点、CSS 规则（有关详细信息，请参阅下一节。）以下是 Containment 视图的示例：

![在此处输入图像描述](../Images/691937eaf91b49e194924b03d32f14c8.png)

# .net - CSS3 输入，如 iPad Facebook 应用程序

> ID：12547750
> 
> 赞同：0
> 
> 时间：2012-09-22T21:13:18.670
> 
> 标签：.net, css

我目前正在尝试使用与 iPad 版 Facebook 应用程序的登录屏幕上显示的*完全相同的*输入框创建登录页面，但是，我没有运气。我正在尝试使用 CSS3 来做到这一点。我附上了一张图片以供参考 - 非常感谢任何可能提供帮助的人！

![iPad Facebook 应用程序](../Images/85fd80548549d2ada7fd1a0c100ec3f2.png)

我感谢任何回复 - 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:33:45.947

查看背景发光的径向渐变[http://www.impressivewebs.com/css3-radial-gradient-syntax/](http://www.impressivewebs.com/css3-radial-gradient-syntax/)

圆形边缘可能是边界半径属性。[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)

将其居中：[http ://tutorialzine.com/2010/03/centering-div-vertically-and-horizo​​ntally/](http://tutorialzine.com/2010/03/centering-div-vertically-and-horizontally/)

摆脱文本输入边框：[如何删除文本/输入框周围的边框（轮廓）？（铬合金）](https://stackoverflow.com/questions/3397113/how-to-remove-border-around-text-input-boxes-chrome)

输入框的占位符文本：http: [//www.paciellogroup.com/blog/2011/02/html5-accessibility-chops-the-placeholder-attribute/](http://www.paciellogroup.com/blog/2011/02/html5-accessibility-chops-the-placeholder-attribute/)

希望这些tuts有所帮助

# vb.net - VB 从进程中检索文件目录路径

> ID：12547761
> 
> 赞同：1
> 
> 时间：2012-09-22T21:14:19.513
> 
> 标签：vb.net

我已经使用 VBA 几年了，但我正在切换到 VB 以利用更强大的编码实践。

我有以下 VB 代码将 Excel 工作簿附加到打开的实例：

```
Dim FullFilePath as String = "C:\Temp"
Dim WrkBk = as Excel.Workbook
WrkBk = System.Runtime.InteropServices.Marshal.BindToMoniker(FullFilePath) 
```

这似乎需要工作簿的目录路径。

我有以下代码来循环遍历 Excel 进程。

```
FileName = "ABCD.xlsm"

For Each P As Process In System.Diagnostics.Process.GetProcessesByName("EXCEL")
    With P
        If .MainWindowTitle.ToLower.Contains(FileName.ToLower) Then

            'don't know the code to get the directory where the p process is located

            WrkBk = System.Runtime.InteropServices.Marshal.BindToMoniker(FilePath)

            Exit For
        End If
    End With
Next 
```

对于我的应用程序，ABCD.xlsm 的路径并不总是相同的。我为获取进程目录而搜索的所有内容都返回 EXCEL.EXE 路径或返回 vb 项目工作目录的路径。我真的需要它返回类似的内容：“C:\Temp\Tools\ABCD.xlsm”，这样我就可以将 WrkBk 附加到进程中。

有任何想法吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:48:46.320

```
Dim xl As Excel.Application
xl = GetObject(, "Excel.Application")
For Each wb As Excel.Workbook In xl.Workbooks
  MsgBox(wb.FullName)
Next wb
xl = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:30:37.707

我终于找到了。

视窗 API....

```
Private Delegate Function EnumWindowsProc(ByVal hwnd As IntPtr, ByVal lParam As IntPtr) As Boolean
Private Declare Function EnumChildWindows Lib "user32.dll" (ByVal hWndParent As IntPtr, ByVal lpEnumFunc As EnumWindowsProc, ByVal lParam As IntPtr) As Boolean
Private Declare Function GetClassName Lib "user32.dll" Alias "GetClassNameA" (ByVal hwnd As IntPtr, ByVal lpClassName As String, ByVal nMaxCount As Int32) As Int32
Private Const MAX_TITLE As Int32 = 256
Private Const S_OK As Int32 = &H0

Private Function GetClassName(ByVal hwnd As IntPtr) As String
    Dim name As New String(" "c, MAX_TITLE)
    Dim len = GetClassName(hwnd, name, MAX_TITLE)
    If len = 0 Then Return Nothing
    Return name.Remove(len)
End Function

Private Declare Function AccessibleObjectFromWindow Lib "OLEACC.dll" (ByVal hwnd As IntPtr, ByVal dwId As Int32, ByVal riid As Byte(), ByRef ppvObject As IntPtr) As Integer
Private Const OBJID_NATIVEOM As Int32 = &HFFFFFFF0
Private IID_IDispatch As New Guid("{00020400-0000-0000-C000-000000000046}") 
```

功能...

```
Function EnumCWindows(ByVal hwnd As IntPtr, ByVal lParam As IntPtr) As Boolean
    Dim name = GetClassName(hwnd)
    If name = "EXCEL7" OrElse name = "EXCEL10" Then
        Dim ptr As IntPtr
        If AccessibleObjectFromWindow(hwnd, OBJID_NATIVEOM, IID_IDispatch.ToByteArray(), ptr) = S_OK Then
            Dim win = CType(Marshal.GetObjectForIUnknown(ptr), Excel.Window)
            Dim sheet = CType(win.ActiveSheet, Excel.Worksheet)
            Dim book = CType(sheet.Parent, Excel.Workbook)
            If book.FullName.ToLower.Contains("wpp tools") Then
                FoundTheFile = True
                WPPFilePath = book.FullName
                Exit Function
            End If
        End If
    End If
    Return True
End Function 
```

然后在你的代码中......

```
For Each p In Process.GetProcesses
    If p.ProcessName = "EXCEL" Then
        EnumChildWindows(p.MainWindowHandle, AddressOf EnumCWindows, IntPtr.Zero)
        If FoundTheFile = True Then Exit For
    End If
Next
If FoundTheFile = False Then
    MsgBox("Targeted file was not found.", MsgBoxStyle.OkOnly, "File Find Error")
    End
End If 
```

我希望这可以帮助其他人，因为我已经搜索了一周！

# c# - 视图（.cshtml）文件中的编译错误

> ID：12547767
> 
> 赞同：1
> 
> 时间：2012-09-22T21:14:33.003
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我想你知道 mvcmusicstore.codeplex.com 上的在线 MvcMusicStore 应用程序教程。我正在使用 MVC3 在 MS SQl Server 2008 专业版而不是精简版下开发这个项目。我使用**Link to Sql**类作为模型类。它像往常一样工作。但是，视图文件 Browse.cshtml 中的代码

```
@model MvcMusicStore.Models.Genre
@{
ViewBag.Title = "Browse";
}
<h2>Genre : @Model.Name</h2>
<ul>
@foreach(var album in @Model.Albums)
{ 
<li>@album.Title</li>
}
</ul> 
```

生成编译错误消息，

Browse.cshtml(7,2)：错误 CS1579：foreach 语句无法对“System.Data.Linq.EntitySet `1<MvcMusicStore.Models.Album>' because 'System.Data.Linq.EntitySet`1”类型的变量进行操作，不包含“GetEnumerator”的公共定义

所以，你能给我一个解决办法来摆脱它。谢谢你。此外，**流派类**

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Genres")]
public partial class Genre : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

    private int _GenreId;

    private string _Name;

    private string _Description;

    private EntitySet<Album> _Albums;
    ... 
```

**专辑类，**

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Albums")]
public partial class Album : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

    private int _AlbumId;

    private int _GenreId;

    private int _ArtistId;

    private string _Title;

    private decimal _Price;

    private string _AlbumArtUrl;

    private EntitySet<Cart> _Carts;

    private EntitySet<OrderDetail> _OrderDetails;

    private EntityRef<Artist> _Artist;

    private EntityRef<Genre> _Genre;
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:56:40.430

是的，我得到了解决方案。缺少程序集引用。我刚刚在 web.config 文件中添加了一个程序集引用。IE，

```
<add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/> 
```

就是这样。

# php - 按数值对 PHP 数组进行排序

> ID：12547769
> 
> 赞同：7
> 
> 时间：2012-09-22T21:14:39.877
> 
> 标签：php, arrays, sorting

我想对以下名称进行排序

```
Array ( [Jessie] => 2 [Sarah] => 3 [Simon] => 2 [John] => 2 [Kevin] => 1 [Canvasser] => 8 [canvasser] => 11 ) 
```

基于它们对应的值

我通过以下函数打印了名称

```
// get canvasser individual names and count houses canvassed
    foreach ($canvassers as $key => $value) {
        // Add to the current group count if it exists
        if ( isset( $canvasser_counts[$value] ) ) {
            $canvasser_counts[$value]++;
        }
        // or initialize to 1 if it doesn't exist
        else {
            $canvasser_counts[$value] = 1;
        }
    }
    print_r($canvasser_counts); 
```

其中 $canvassers 简单地保存了所有名称，例如。

```
$canvassers = array('Jessie', 'Simon', 'Jessie') 
```

任何帮助将不胜感激，我在这方面花了很长时间，但无法直截了当地对数组进行正确排序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T21:17:52.417

您想使用`asort()`- [http://php.net/manual/en/function.asort.php](http://php.net/manual/en/function.asort.php) - 以升序对值进行排序，或者`arsort()`- [http://php.net/manual/en/function.arsort.php](http://php.net/manual/en/function.arsort.php) - 按降序排序。

鉴于此 PHP：

```
$vals = array("Jessie" => 2, "Sara" => 3, "Simon" => 2, "John" => 2, "Kevin" => 1, "Canvasser" => 8, "canvasser" => 11 );
print_r($vals); // current order
asort($vals); // sort array
print_r($vals); // new order 
```

您将获得以下输出：

```
Array
(
    [Jessie] => 2
    [Sara] => 3
    [Simon] => 2
    [John] => 2
    [Kevin] => 1
    [Canvasser] => 8
    [canvasser] => 11
)
Array
(
    [Kevin] => 1
    [Jessie] => 2
    [John] => 2
    [Simon] => 2
    [Sara] => 3
    [Canvasser] => 8
    [canvasser] => 11
) 
```

# mysql - 简单的 MySQL 查询

> ID：12547774
> 
> 赞同：0
> 
> 时间：2012-09-22T21:16:19.777
> 
> 标签：mysql, join

我有三张桌子。

```
CLIENTS
JOBS
INVOICES 
```

我需要查看 INVOICES 表中某个日期之间按天分组的每一行，显示相关的 JOBID 以及连接的客户端（按名称）。发票仅通过 JOB ID 连接到客户端。

这有意义吗？

```
SELECT
    j.ID As JobID,
    CONCAT(c.FIRSTNAME, ' ', c.LASTNAME) As ClientName,
    c.ID As ClientID
    i.DATE
    i.LENSES
    i.FRAMES
    i.TAXABLEGOODS
    i.DISCOUNT
    i.PAYMENT
    i.PAYMENTTYPE
    i.PREVIOUSBALANCE
FROM
    JOBS j,
    CLIENTS c,
    INVOICES i,
WHERE
    i.JOBID = j.ID
    j.CLIENTID = c.ID
GROUP BY DATE 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:22:47.953

如何使用：

```
WHERE your_date between first_date AND last_date GROUP BY YEAR(your_date), MONTH(your_date), DAY(your_date); 
```

# apache-camel - Camel：如何同步竞争的 imap 消费者

> ID：12547776
> 
> 赞同：1
> 
> 时间：2012-09-22T21:16:27.253
> 
> 标签：apache-camel

我希望使用 apache-camel 来轮询 imap 收件箱，但我想知道此设置在集群中的行为方式。我会在集群的每个节点上部署 apache camel，每个节点都会轮询收件箱。

如何避免让许多消费者收到相同的消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:17:54.223

我决定走简单的路，不安装额外的组件。我使用集群石英作业来触发收件箱的轮询。轮询器然后将检索命令放在 Hazelcast 分布式队列上，该队列由集群中的消息检索组件数组接收。

安装，Jms，James，除了骆驼闻到我，就是为了解决这个任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:50:21.277

不是很容易，因为 imap 并不是这类任务的真正协议。

诀窍仍然是让一个消费者进行轮询，而不是很多。如果您有许多节点以实现高可用性，您可以使用 JMS 做一些技巧来触发 IMAP 轮询。

例如，您可以使用 jms 触发消息来启动轮询并让集群的所有成员监听该轮询。保持 concurrentConsumer 为 1 和异步。在 Camel 中禁用了 JMS。您可以依靠消息组或[ActiveMQ 独占消费者](http://activemq.apache.org/exclusive-consumer.html)来确保只有一个节点获得触发消息（当处于活动状态时，另一个节点将接管）。生成轮询消息可能很棘手，但可以像每个骆驼节点的计时器路由一样简单地完成。调一下频率就好了。

此设置将避免 IMAP 中的竞争条件，同时不进行负载平衡，至少确保故障转移安全。继续进行并发轮询可能就足够了，几乎没有问题。但是，如果不只允许一位消费者，我认为您不会 100% 安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T07:04:43.967

在集群环境中，您可以考虑使用一种方法来选择一个活动的 Camel 路由，该路由执行 imap 轮询。然后在节点出现故障时进行故障转移逻辑。

在 Camel 中，您可以查看可应用于路由的路由策略。 [http://camel.apache.org/routepolicy](http://camel.apache.org/routepolicy)

zookeeper 组件有一个策略用于选举集群中的领导者，并且只允许一个路由处于活动状态。这需要您使用 zookeeper。 [http://camel.apache.org/zookeeper](http://camel.apache.org/zookeeper)

# c# - 混合 Web 表单和 mvc4 应用程序中的授权

> ID：12547778
> 
> 赞同：1
> 
> 时间：2012-09-22T21:16:53.423
> 
> 标签：c#, asp.net, asp.net-mvc, authorization, asp.net-mvc-4

我有一个项目已经使用 ASP.NET Web 表单很长时间了，安全方案让我们拒绝根 web.config 中的所有用户，并允许基于 web.config 的站点特定区域中的用户某些文件夹像这样：

```
<!-- Root Web.config -->
<authorization>
    <deny users="*" />
</authorization>

<!-- ~/Admin Web.config -->
<authorization>
    <allow roles="AdminRole" />
    <deny users="*"/>
</authorization> 
```

我正在将 MVC4 添加到该项目中，我最初的理解是授权是通过如下属性控制的：

```
[Authorize(Roles="OtherSectionRole")]
public class OtherSectionController : Controller
{ ... } 
```

这似乎不起作用，即使我使用`Roles="*"`. 只有当我删除根 web.config 时，我`deny *`才能点击控制器操作。我错过了什么吗？我宁愿不删除根级别的包罗万象的授权以使 MVC 工作正常。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:22:05.837

不久前我们不得不做一些类似的事情，但我们最终把它搞砸了。我的意思是，我们将遗留的 asp.net 站点作为 mvc 应用程序的子应用程序，而不是相反。在 mvc 应用程序中，我们将登录页面的配置（我们使用这些站点的成员资格）设置为旧站点中的页面，然后我们保留旧站点的 web.config 原样。

# ios - 如何自动加载子视图进行测试？

> ID：12547779
> 
> 赞同：0
> 
> 时间：2012-09-22T21:17:15.880
> 
> 标签：ios, testing, automation

我正在编写一个 iOS 应用程序，该应用程序在`UINavigation`堆栈深度大约 4 次的视图上存在问题。`UIViewController`每次我想运行这个东西时，不得不通过模拟器反复敲击敲击以深入了解我需要的东西，这变得很痛苦。

有没有办法自动化这个？

我尝试立即`[self tableView:self.tableView didSelectIndex...`手动调用，但是由于数据尚未加载到表中，因此崩溃了...

我更喜欢快速而没有大量开销的东西 - 否则实施解决方案将花费更多时间而不是通过不点击屏幕 4 次来节省......

感谢你们提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:06:29.667

我一直这样做 - 在 appDelegate 中，我只是添加了一些包含在 #ifdef 中的代码，它只是使子视图成为导航控制器的初始视图。一旦你让子视图工作，你可以关闭 ifdef。使用该技术将为您节省大量时间 - 事实上，我现在正在使用它为商店中的应用程序添加功能。

# django - 如何通过 pip 将 django-articles 应用程序实施到新项目中？

> ID：12547783
> 
> 赞同：0
> 
> 时间：2012-09-22T21:17:54.443
> 
> 标签：django, pip, cheeseshop

我正在尝试从 cheeseshop 安装以下 django 应用程序：

[https://bitbucket.org/codekoala/django-articles/overview](https://bitbucket.org/codekoala/django-articles/overview)

这是我使用 Django 的第一天，我不确定如何将应用程序的文件夹填充到我的项目中。

到目前为止，我已经将应用程序 pip 安装到了我的 virtualenv 中。这通过打开 python shell 并且在我运行“导入文章”时没有错误得到验证

我编辑了 settings.py 文件并将其添加到已安装应用程序列表中。我相信这没问题，因为我可以运行 runserver 而不会出现任何“找不到模块”错误。

syncdb 也运行良好。

我从这里去哪里？

即，我希望网站中有一个名为“新闻”的部分使用此应用程序。我还没有配置路由或其他应用程序，只是一个带有 psycopg2 的干净 Django。

**编辑：**启用默认管理站点，我可以在那里管理文章，但仍然不确定当我没有为它们创建应用程序文件夹时这些将如何显示在站点上。尝试启动应用程序文章时，我被警告它与现有模块的名称冲突..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:07:28.187

您只需在自己的 urls.py 中包含文章 url。既然你在新闻下说你想要它，这会很好：

```
urlpatterns = patterns('',
    (r'^news/', include('articles.urls'),
) 
```

请注意，[文章应用程序的自述文件](https://bitbucket.org/codekoala/django-articles/overview)暗示您需要创建自己的基本模板以供其继承。只需在项目下的目录中创建一个`base.html`文件`templates`，给它一个基本的 HTML 结构，然后放入`{% block content %}{% endblock %}`相关位置（对于自述文件中提到的其他块也是如此）。

无论如何，您可能应该学习 Django 教程，以准确了解 URL 和模板的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:42:53.613

无需创建名为文章的新应用程序。由于您可以通过 python 控制台导入文章，因此您已成功安装它。您可以在文件夹 site-packages 的 virtualenv 文件夹中找到它：

```
/path_to_your_virtualenv/.virtualenvs/<virtualenvname>/lib/<pythonversion>/site-packages 
```

您可以使用这个通过 pip 安装的应用程序，因为它是一个位于您的项目文件夹中的应用程序。

# excel - 在 Powershell 中使用参数分配文件夹位置

> ID：12547793
> 
> 赞同：0
> 
> 时间：2012-09-22T21:18:45.437
> 
> 标签：excel, function, powershell, parameters, arguments

我是 powershell 新手，我需要一些帮助。下面是我编写的用于在文件夹中查找 excel 文件的脚本。excel 工作表中的文件将与同一台机器上另一个文件夹的内容进行比较。位置是：“C:\MKS_DEV\”，生成的匹配文件将被压缩并放在脚本中所示的另一个位置。这些脚本将由不同机器上的其他人使用，因此两个文件夹的位置在不同机器上可能不同。

我想为两个文件夹的位置编写一个参数或使用参数，这样我就不必一直指定位置，我必须运行脚本并且无法弄清楚如何实现它。

脚本完美运行，但我只需要将参数/参数合并到其中。任何帮助将不胜感激。

谢谢。

这是代码：

```
# Creating an object for the Excel COM addin
$ExcelObject = New-Object -ComObject Excel.Application

# Opening the Workbook
$ExcelWorkbook = $ExcelObject.Workbooks.Open("C:\Eric_Source\Test.xls")

# Opening the Worksheet by using the index (1 for the first worksheet)
$ExcelWorksheet = $ExcelWorkbook.Worksheets.Item(1)

# The folder where the files will be copied/The folder which will be zipped
# later
$a = Get-Date

$targetfolder = "C:\"+$a.Day+$a.Month+$a.Year+$a.Hour+$a.Minute+$a.Second

# Check if the folder already exists. Command Test-Path $targetfolder returns
# true or false.
if(Test-Path $targetfolder)
{
    # delete the folder if it already exists. The following command deletes a
    # particular directory
    Remove-Item $targetfolder -Force -Recurse -ErrorAction SilentlyContinue
}

# The following command is used to create a particular directory
New-Item -ItemType directory -Path $targetfolder

# Declaration of variables, COlumn value = 6 for Column F
$row = 1
$col = 6 

# Read a value from the worksheet with the following command
$filename = $ExcelWorksheet.Cells.Item($row,$col).Value2
$filename

# change the folder value below to specify the folder where the powershell
# needs to search for the filename that it reads from excel file.

$folder = "C:\MKS_DEV\"
$null = "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:06:42.153

您有多种方法来参数化您的脚本。

第一个对我们来说是 $args[n] [automatic variable] [1](http://technet.microsoft.com/EN-US/library/dd347675.aspx)。如果您的脚本被调用`MyScript.PS1`，您可以使用以下命令调用它：

```
MyScript.PS1 "C:\Eric_Source\Test.xls" 
```

然后在你的脚本中使用`$args[0]`第一个参数。

另一种方法是在脚本开头使用保留字 Param：

```
Param ($MyParam1, $MyParam2) 
```

当您调用您的脚本`$MyParam1`时，将包含第一个参数，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T08:23:23.813

您可以将其创建为函数并加载它。

```
Function Folder-Deletion ($ExcelWorkbook,$targetfolder) {

$ExcelObject = New-Object -ComObject Excel.Application
$ExcelOpen = $ExcelObject.Workbooks.Open($ExcelWorkbook)
$ExcelWorksheet = $ExcelOpen.Worksheets.Item(1)
$a = Get-Date

if(Test-Path $targetfolder)
{
    Remove-Item $targetfolder -Force -Recurse -ErrorAction SilentlyContinue
}

New-Item -ItemType directory -Path $targetfolder

$row = 1
$col = 6 

$filename = $ExcelWorksheet.Cells.Item($row,$col).Value2
$filename
} 
```

然后对电子表格和文件夹运行该函数，如下所示：

```
Folder-Deletion C:\Eric_Source\Test.xls C:\MKS_DEV 
```

或者您可以创建一个包含以下内容的 PowerShell 脚本文件（例如 FolderDeletion.ps1）：

```
param($ExcelWorkbook,$targetfolder)

$ExcelObject = New-Object -ComObject Excel.Application
$ExcelOpen = $ExcelObject.Workbooks.Open($ExcelWorkbook)
$ExcelWorksheet = $ExcelOpen.Worksheets.Item(1)
$a = Get-Date

if(Test-Path $targetfolder)
{
    Remove-Item $targetfolder -Force -Recurse -ErrorAction SilentlyContinue
}

New-Item -ItemType directory -Path $targetfolder

$row = 1
$col = 6 

$filename = $ExcelWorksheet.Cells.Item($row,$col).Value2
$filename 
```

然后对电子表格和文件夹运行脚本，如下所示：

```
FolderDeletion.ps1 C:\Eric_Source\Test.xls C:\MKS_DEV 
```

# c++ - 获取应用程序的内存使用情况时出错

> ID：12547794
> 
> 赞同：-1
> 
> 时间：2012-09-22T21:18:48.650
> 
> 标签：c++, syntax, struct, compiler-errors

我正在尝试使用这段代码来获取我的应用程序的内存使用情况。但是，当我尝试编译时出现以下错误：

`error: expected constructor, destructor, or type conversion before '(' token`

这是我的代码：

```
#include "sys/types.h
#include "sys/sysinfo.h

using namespace std;
struct sysinfo memInfo;
sysinfo (& memInfo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:28:35.203

除非您遗漏了代码的重要部分，否则您似乎试图`sysinfo(&meminfo)`在命名空间范围内调用。但是，您不能在命名空间范围内有函数调用语句。尝试将代码移动到函数中，例如：

```
int main() {
    struct sysinfo meminfo;
    sysinfo(&meminfo);
    // ...
} 
```

# ruby-on-rails - Evernote API 二进制错误 - Ruby on Rails - OAuth

> ID：12547796
> 
> 赞同：1
> 
> 时间：2012-09-22T21:19:14.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oauth, evernote

我正在尝试使用 Evernote Ruby 示例[https://github.com/evernote/evernote-sdk-ruby](https://github.com/evernote/evernote-sdk-ruby)，它使用 Sinatra 并将其集成到 Rails 中。

在拉回回调中的笔记本列表之前，我一切正常。

```
notebooks = noteStore.listNotebooks(access_token.token)
result = Array.new
notebooks.each do |notebook| 
  result << notebook.name
end
@notebooks = result 
```

它收到了这个错误：（这根本没有帮助）

```
RuntimeError in CallbacksController#callback

--- !binary |-
U1NMX2Nvbm5lY3QgcmV0dXJuZWQ9MSBlcnJubz0wIHN0YXRlPVNTTHYzIHJl
YWQgc2VydmVyIGNlcnRpZmljYXRlIEI6IGNlcnRpZmljYXRlIHZlcmlmeSBm
YWlsZWQ= 
```

Sinatra 应用程序正常工作。所以我的猜测是一些文件没有被加载来解析这个。但我已经尝试了一切。

我将在这里发布完整的控制器：http: [//paste.codebasehq.com/pastes/7frtcdhyncwb0emznj](http://paste.codebasehq.com/pastes/7frtcdhyncwb0emznj)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:47:35.770

我猜`to_yml`你的错误信息不可读，例如：

```
--- !binary |-
U1NMX2Nvbm5lY3QgcmV0dXJuZWQ9MSBlcnJubz0wIHN0YXRlPVNTTHYzIHJl
YWQgc2VydmVyIGNlcnRpZmljYXRlIEI6IGNlcnRpZmljYXRlIHZlcmlmeSBm
YWlsZWQ= 
```

你可以用 代替`to_yml`吗`inspect`？您的消息似乎只是以二进制形式输出，如果以文本形式输出，您可以从消息中找出错误的原因。

相关文章： [Thor & YAML 输出为二进制？](https://stackoverflow.com/questions/9550330/thor-yaml-outputting-as-binary)

# javascript - 填写联系表格后，如何将用户返回到他们来自的页面？

> ID：12547799
> 
> 赞同：0
> 
> 时间：2012-09-22T21:19:34.710
> 
> 标签：javascript, asp.net, html, vb.net

我在 VB/asp.net 4 中有一个网站，客户可能在“联系工程师”的页面上，它会将您带到联系表格。填完表格后，上面写着：

*您的留言已发送。感谢您联系 USS Vision。USS Vision 的工程团队成员将尽快回复您。*

我想添加一个超链接，上面写着“返回您来自的页面”并让他们单击它并返回该页面。这是可能的，如果是这样，我将如何去做？感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:22:51.540

也许[`document.referrer`](http://www.w3schools.com/jsref/prop_doc_referrer.asp)或[`window.history`](http://www.w3schools.com/jsref/obj_history.asp)可以帮助你。

**更新：**

根据对此答案的评论，我还建议在用户到来时检索[HttpRequest.UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx) 并将其保存在 Session 中，然后在您需要的任何地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:13:25.877

除非有一些令人信服的理由让他们离开他们所在的页面，否则通过在模式窗口中打开联系表单来处理它可能是最简单的——也是更好的用户体验；用户填写表格，提交，收到确认，然后关闭模态框，不用担心，不用大惊小怪。

# android - 无法在 Android EditText 中的小数点后输入零

> ID：12547801
> 
> 赞同：1
> 
> 时间：2012-09-22T21:19:56.083
> 
> 标签：android, android-layout, android-edittext

我有一个Android EditText，当用户输入数字时，它会编辑数字并使用十进制格式添加千位分隔符，但是当输入浮点数时，我不会在小数点后添加零。所以我不能输入 1.000000008 因为零不会继续，但其他数字会。是否有任何 java DecimalFormat 模式允许用户在小数点后输入零？这是我的 EditText 的代码。

```
am = new TextWatcher(){
                 public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                 }
                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                     if (s.toString().contains(String.valueOf(df.getDecimalFormatSymbols().getDecimalSeparator())))
                        {
                            hasFractionalPart = true;
                        } else {
                            hasFractionalPart = false;
                        }
                 }
                public void afterTextChanged(Editable s) {
                    amount.removeTextChangedListener(this);
                    amount2.setText(s.toString());
                try {
                    int inilen, endlen;
                    inilen = amount.getText().length();

                    String v = s.toString().replace(String.valueOf(df.getDecimalFormatSymbols().getGroupingSeparator()), "");
                    Number n = df.parse(v);
                    value = Double.parseDouble(v);
                    int cp = amount.getSelectionStart();
                    if (hasFractionalPart) {
                        amount.setText(df.format(n));
                    } else {
                        amount.setText(dfnd.format(n));
                    }
                    endlen = amount.getText().length();
                    int sel = (cp + (endlen - inilen));
                    if (sel > 0 && sel <= amount.getText().length()) {
                        amount.setSelection(sel);
                    } else {
                        // place cursor at the end?
                        amount.setSelection(amount.getText().length() - 1);
                    }
                } catch (NumberFormatException nfe) {
                    // do nothing?
                } catch (ParseException e) {
                    // do nothing?
                }
               amount.addTextChangedListener(this);

               }
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:05:18.040

**改写**

**首先，**当出现十进制符号时，让我们计算格式化程序将修剪掉多少个零。（如果我们在小数点后发现一个非零字符，我们将重置我们的计数。例如`1.00200`只有两个尾随零。）在`onTextChanged()`：

```
int index = s.toString().indexOf(String.valueOf(df.getDecimalFormatSymbols().getDecimalSeparator()));
trailingZeroCount = 0;
if (index > -1)
{
    for (index++; index < s.length(); index++) {
        if (s.charAt(index) == '0')
            trailingZeroCount++;
        else {
            trailingZeroCount = 0;
        }
    }

    hasFractionalPart = true;
} else {
    hasFractionalPart = false;
} 
```

**接下来，**将适当数量的零附加到格式化的字符串。在`afterTextChanged()`：

```
if (hasFractionalPart) {
    StringBuilder trailingZeros = new StringBuilder();
    while (trailingZeroCount-- > 0)
        trailingZeros.append('0');
    amount.setText(df.format(n) + trailingZeros.toString());
} else {
    amount.setText(dfnd.format(n));
} 
```

注意：您还没有发布您使用的格式，所以我不得不做出一些假设，但这很容易适应。

# xslt - 使用 document() XSLT 从外部 XML 访问节点

> ID：12547804
> 
> 赞同：2
> 
> 时间：2012-09-22T21:20:10.727
> 
> 标签：xslt, svg, saxon

我正在尝试遍历 SVG 目录以访问其中的一些元数据。但是，当我尝试在每个节点中获取特定节点的值时，我可以很好地迭代，我似乎失败了。

使用 SaxonHE 9.4 (Java) 进行转换。

这里的例子看起来很简单：

```
<xsl:value-of select="document('geneva.xml')/ph:photo/ph:title"/> 
```

[http://www.ibm.com/developerworks/xml/library/x-tipcombxslt/](http://www.ibm.com/developerworks/xml/library/x-tipcombxslt/)

然而我有我的 XSLT（相关部分；没有迭代 atm 只是一个获取外部节点值的测试）：

```
<div>
<p><xsl:value-of select="document('images/test.svg')"/></p>
</div> 
```

但这一切给我的是：

```
<div><p>Mine
circle:hover {fill-opacity:0.9;}
</p></div> 
```

我试过`document('images/test.svg')/svg/title`了，但这没有给我任何回报

*测试.svg*

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" 
          "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg">
<title>Mine</title>
<style type="text/css">
circle:hover {fill-opacity:0.9;}
</style>
<g style="fill-opacity:0.7;">
<circle cx="6.5cm" cy="2cm" r="100" style="fill:red; stroke:black; stroke-width:0.1cm" transform="translate(0,50)" />
<circle cx="6.5cm" cy="2cm" r="100" style="fill:blue; stroke:black; stroke-width:0.1cm" transform="translate(70,150)" />
<circle cx="6.5cm" cy="2cm" r="100" style="fill:green; stroke:black; stroke-width:0.1cm" transform="translate(-70,150)"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:47:00.773

SVG 元素绑定到 SVG 命名空间。它被设置为没有命名空间前缀：

```
<svg xmlns="http://www.w3.org/2000/svg"> 
```

因此，您需要在 XSLT 中使用命名空间前缀声明该命名空间，并使用该命名空间前缀来处理 XPath 中的 SVG 元素：

```
document('images/test.svg')/svg:svg/svg:title 
```

# sql - SQL Service Broker：收集数据——插件场景分析

> ID：12547810
> 
> 赞同：3
> 
> 时间：2012-09-22T21:21:17.517
> 
> 标签：sql, sql-server, service-broker

（**2012/12/06 的第 2 次更新**——新协议，略有不同的观点）

问题是下面的解决方案对您来说是否合理，或者是否有任何我没有注意到的缺陷（对 SQL Server Service Broker 来说很新）......

我想继续分析[SQL Service Broker 中提出的问题：从分布式源收集数据](https://stackoverflow.com/q/12446912/1346705)。我想关注从卫星 SQL 服务器收集数据时使用的协议问题。SQL Server Service Broker 的使用是必须的——它还受其他未在此处介绍的原因所决定。因此，请不要提出完全替代的解决方案。

我想重点关注应该做什么以及如何自然地使用服务代理（最好的方法）来解决确切的问题。总体目标[已在上述问题中提出](https://stackoverflow.com/q/12446912/1346705)。先上图：

![来自生产线的传感器数据被收集到集中表中。](../Images/36eb95ab0a591a3f6e529549f06f22b8.png) 现在要考虑更多细节...

**需要插件架构**

卫星机器与真实的物理生产线有关。可能会发生某些机器被添加到技术流程中，某些机器可以消失，某些机器可以被替换的情况，因为它将使用相同的生产线标识，但是它在物理上是不同的——即它的 SQL 服务器是不同的实例。

中央服务器在从卫星获得第一条消息之前对卫星一无所知。没有卫星服务器的集中数据库。不知道系统中要包含什么和多少卫星 SQL 服务器。它总是在卫星站点上决定。

任何与收集数据相关的活动都应由卫星机器生成的事件启动。

**重要提示：**目标是不断传输所有新创建的数据（来自传感器），并发现和修复丢失 - 独立于可能导致它们的任何原因。

给你一个具体的例子：

1.  由第 3 行（黄色）标识的机器最近被添加到环境中。其 SQL Server Express 启动并开始收集传感器数据（第三方解决方案，特殊结构的专用表）。该机器尚未连接到中央服务器。

2.  唯一的配置是可靠分配的生产线的固定标识（此处为 3），以及连接到中央 SQL 服务器的所有必要细节。但是中央 SQL 服务器不知道这些信息。中央刚刚准备好接受来自任何新源的数据，但不知道何时。（它已经[使用 Remus Rusanu](https://stackoverflow.com/a/11704632/1346705)对 SQL Service Broker 问题的回答建议的方法在一台机器上进行了测试[——一个中央 SQL 和更多卫星 SQL……</a>。）](https://stackoverflow.com/q/11692754/1346705)

[*   稍后，该 SQL 软件将部署在机器 3 上。它开始与中央对话。卫星部分并不笨，但它自己的活动是每当将新记录插入传感器数据表时发送传感器数据（参见上面的第 1 点）。根据记录，计算UTC时间（根据专有格式），将一条记录中的多个传感器数据转换为相同数量的规范化记录（格式化为一条XML消息），然后发送到中央SQL服务器。

    *   中央由带有从卫星机器发送的传感器数据的消息激活。Service Broker 队列会屏蔽物理连接的失败。

    *   在合理的时间间隔（这里是一小时）之后，中央服务器检查是否应该处理到目前为止收集的数据。有一个工作单元需要一些生产时间，数据应该被处理并添加到该单元的文档中。仅当单元完成时才应进行处理。

    *   中央还检查它是否拥有该单元的所有数据。由于传感器采样是以已知的定期间隔（这里大约 1 分钟）进行的，因此中央可以检查是否有一些**丢失**。当卫星没有通过 SSB 连接到中央时，还有一个初始“退出”时间间隔。该机制应从任何情况中恢复。也可能发生故障的传感器或未收集数据的情况。在中心检测到的丢失实际上可能意味着中心询问：*“在这段时间间隔内，我没有来自您的数据。如果它们存在，请给我一些数据，或者告诉我它们不存在。”*

    *   卫星应该只发送采样时间之间可以发送的数据量。从辍学中恢复可能相当缓慢。在中央服务器处理数据的延迟并不重要。但是，中央应该知道数据何时准备好（或在检测到的时间间隔内不存在）。](https://stackoverflow.com/q/11692754/1346705) 

 [**一些图片，更多解决方案细节**

![卫星和中央服务器之间的通信时间图。](../Images/b37798cdd7d997c0dd517fa9d78cc407.png)](https://stackoverflow.com/q/11692754/1346705) 

[我选择了](https://stackoverflow.com/q/11692754/1346705)[Remus Rusanu 的“回收对话”](http://rusanu.com/2007/05/03/recycling-conversations/)作为卫星与中央通信的基本框架。它定义了`EndOfStream`消息类型以表示应该丢弃对话句柄并使用新的句柄。生命周期受上面提到的 Service Broker 计时器生成的一小时间隔的限制。

该消息在中央服务器处（错误地）用于激活数据处理。大约在同一时间，中央检查辍学。中央将时间保持在已检查的辍学以下。通过这种方式，它知道准备好处理哪些数据。

你认为这个场景合理吗？你能看出它有什么问题吗？

（我将改进问题以反映您的建议。）

感谢您的时间和经验，祝您有美好的一天。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:50:48.113

1.  所有数据都应存储在表中。在卫星端，您应该为要存储的最后处理的行创建一个表。当来自 Central 的新请求到达时，新的数据包将根据最后处理的记录值发送回 Central。注意：我建议根据您的数据限制要发送的行数，以免创建非常大的数据包。

2.  当 Central 处理完所有行时，应将适当的消息发送到 Satellite。它还应包含有关发生的数据导入错误的信息。

3.  您可以在注册数据库活动时（使用中央/卫星数据库上的 DML/DDL 触发器）或在计划内（使用中央代理作业）启动 Service Broker 对话。

# java - 将整数拆分为数字数组

> ID：12547815
> 
> 赞同：0
> 
> 时间：2012-09-22T21:22:06.470
> 
> 标签：java

我需要输入一个整数，将数字分开，然后最后用它们进行计算。我认为最好的方法是使用数组。如何获取 int 并将其数字放入数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:42:56.657

尝试这个：

```
int value = 234567;
String[] digits = Integer.toString(value).split("");
System.out.println(Arrays.toString(digits)); 
```

结果：

```
[, 2, 3, 4, 5, 6, 7] 
```

考虑到第一个 (0) 位置是空的。

另一种使用整数的方法：

```
int value = 234567;
        ArrayList<Integer> result = new ArrayList<Integer>(); 
        while(value > 0){
            result.add(value%10);
            value = value/10;
        }
        Collections.reverse(result);
        System.out.println(result); 
```

结果：

```
[2, 3, 4, 5, 6, 7] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:34:48.797

这个怎么样：

```
int a = 1234321;

char[] c = ("" + a).toCharArray();
int[] digits = new int[c.length];
for (int i = 0 ; i < digits.length ; i++)
    digits[i] = c[i] - '0';

for (int i : digits) System.out.println(i); 
```

输出：

> 1
> 2
> 3
> 4
> 3
> 2
> 1

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-22T21:28:13.643

创建 ArrayList 整数类型

```
 ArrayList<Integer> arl = new ArrayList<Integer>(); 
```

然后插入值...

```
arl.add(56);
arl.add(74); 
```

# objective-c - 防止子类覆盖方法

> ID：12547823
> 
> 赞同：2
> 
> 时间：2012-09-22T21:22:56.113
> 
> 标签：objective-c

假设有一个像这样初始化的对象

```
- (void)doInit
{
    NSLog(@"In BaseClass init");
}

- (id)init
{
    self = [super init];
    [self doInit];

    return self;
} 
```

它有一个以类似方式初始化的子类

```
- (void)doInit
{
    NSLog (@"In SubClass init");
}

- (id)init
{
    self = [super init];
    [self doInit];

    return self;
} 
```

现在，如果我创建一个子类的实例，那么我会收到以下输出：

```
In SubClass init
In SubClass init 
```

当真的，我的意思是

```
In BaseClass init
In SubClass init 
```

有没有办法标记 doInit 说它不应该被覆盖，或者我需要为子类中的所有方法创建一个唯一的名称？

我不完全确定我以前怎么没有遇到过这个问题，但是你去吧。

编辑：

我理解为什么会发生这种情况，我没想到基类能够调用被覆盖的函数。

我也不能只调用 [super doInit]; 来自 Subclass 方法，因为 BaseClass 仍然需要调用 doInit 以便创建 BaseClass 的实例仍然有效。如果我调用 [super doInit]，我最终还是会调用 SubClass 的 doInit 两次。

看来答案是否定的，我只需要像 doBaseClassInit 和 doSubClassInit 一样为每个 doInit 命名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:48:45.627

如果您有一个不想通过动态绑定的方法（即不希望在存在子类方法时调用它），则需要将其作为 C 函数来执行。所以，你可以这样做：

在基类中：

```
static void DoInit(BaseClass *self)
{
    NSLog(@"In BaseClass init");
}

- (id)init
{
    self = [super init];
    if (self) {
        DoInit(self);
    }
    return self;
} 
```

在子类中：

```
static void DoInit(SubClass *self)
{
    NSLog(@"In SubClass init");
}

- (id)init
{
    self = [super init];
    if (self) {
        DoInit(self);
    }
    return self;
} 
```

请注意，这两种`DoInit`方法都标记为`static`，因此它们仅在每个编译单元（.m 文件）中可见，并且不会相互冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:30:35.267

也许你可以在你的基类中尝试这样的事情。这意味着任何时候`init`执行内部`BaseClass`的`doInit`实现，`BaseClass`都会调用 for 的实现。

```
- (void)doInit
{
    NSLog(@"In BaseClass init");
}

- (id)init
{
    self = [super init];

    Class baseClass = [BaseClass class];
    SEL selector = @selector(doInit);
    IMP baseClassImplementation = class_getInstanceMethod(baseClass, selector);
    baseClassImplementation(self, selector);

    return self;
} 
```

正如我在评论中提到的那样，如果这是您需要的狭隘性，那么它应该可以解决发送消息所涉及的动态方法查找。希望这可以帮助！

**编辑：**

免责声明 - 如果您处于这种情况，这可能不是您设计寿命的好兆头。这项技术现在可以让您启动并运行，但请仔细记录它，并考虑重构代码的方法，以便不再使用它。考虑仅在极其紧急的情况下才真正使用此类修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:41:43.083

您没有收到`"In BaseClass init"`控制台消息的原因是因为您的子类没有调用 super 的 doInit 实现。

如果您不想`doInit`被覆盖，避免这样做的“最佳”方法是不发布此方法的存在。从您的标题中删除它并唯一地命名该方法，以便不太可能发生冲突。例如，Apple 框架中的许多私有方法都有一个前导下划线。因此，例如，您可以调用您的方法`_doInit`，并且子类不太可能意外创建它自己的覆盖实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T21:44:14.743

不，没有可强制执行的方法来防止子类覆盖方法。您可以做的最好的事情是避免将它放在类的公共头文件中，这样就不会有人试图覆盖它。如果该方法必须是公共的，您只需在该方法的文档中添加一条注释，说明它不应该被覆盖，或者无论哪种情况子类都应该调用 super 的实现。您会在 Apple 自己的类的文档中找到这些说明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T21:42:29.507

如果您希望您的子类使用 doInit 的基类版本，那么在子类中不要声明 doInit 方法。这就是我的意思：

A类：

```
@interface ClassA : 

-(void) doInit;
-(id) init;

@implementation

-(void) doInit {
    NSLog(@"ClassA doInit");
}

-(id) init {
    self = [super init];

    if (self != NULL)
        [self doInit];

    return self;
} 
```

B类

```
@interface ClassB : ClassA

-(id) init;

@implementation

-(id) init {
    self = [super init];

    if (self != NULL)
        [self doInit];

    return self;
} 
```

实际上，您也不需要重写 init 方法，除非您希望该类执行一些特殊代码。

# javascript - 获取 Trello JSON 以放入字符串 var

> ID：12547825
> 
> 赞同：1
> 
> 时间：2012-09-22T21:23:03.630
> 
> 标签：javascript, json, trello

我正在尝试获取 TRELLO API Url 返回的 JSON 并将其放入字符串中。在我自己的私人董事会上，我收到“401 Unauthorized”。但是 Trello Api 似乎没有提供通过 URL 授权用户的任何方式。如果我尝试使用公共板，我会收到“XMLHttpRequest cannot load [https://api.trello.com/1/board/4d5ea62fd76aa1136000000c?key=68d02bf40d2ad57dd9eb418eb15f9564](https://api.trello.com/1/board/4d5ea62fd76aa1136000000c?key=68d02bf40d2ad57dd9eb418eb15f9564)。访问控制允许不允许请求标头字段 X-Requested-With-头条。”

这是我的代码：

```
 <body>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">  </script>

      <script>

      var list = $.getJSON(" https://api.trello.com/1/board/4d5ea62fd76aa1136000000c? key=68d02bf40d2ad57dd9eb418eb15f9564");
      document.getElementById('print').innerHTML = list;

      </script>
      <div id="print">
      </div>
      </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:29:32.160

尝试使用这个允许跨域的[JSONP调用。](http://json-p.org/)

```
$.getJSON("https://api.trello.com/1/board/4d5ea62fd76aa1136000000c?&callback=?", {
    key: '68d02bf40d2ad57dd9eb418eb15f9564'
})
.success(function(responseObj) {
    document.getElementById('print').innerHTML = JSON.stringify(responseObj);
}); 
```

**[演示](http://jsfiddle.net/f0t0n/yLGTQ/)**

请参阅：[http ://api.jquery.com/jQuery.getJSON/#jsonp](http://api.jquery.com/jQuery.getJSON/#jsonp)

# c++ - 我的内存泄漏在哪里？

> ID：12547827
> 
> 赞同：0
> 
> 时间：2012-09-22T21:23:38.827
> 
> 标签：c++, memory-management, memory-leaks

因此，我编写了自己的 ArrayList（也称为 C++ 中的向量）的实现，并在其中包含了几个算法。现在我的合并排序方法似乎正在泄漏内存，但我已经逐行检查了代码，跟踪分配到删除，一切似乎都很顺利！

我应该注意，我对 ArrayList 中的每个方法都有一个测试脚本并且我遇到了崩溃，然后我尝试删除合并排序测试，然后繁荣，不再崩溃。但有趣的是......它并不总是崩溃，它有时会工作，它会崩溃其他人。

两种方法的代码如下：

快速变量枚举：

array = 支持 arrayList 的数组

size = 一个跟踪数组大小的 int。

sorted = 一个布尔值，指示列表是否已排序

```
/**
 * Runs merge sort on this ArrayList<T>. Interface function to the central,
 * recursive, merge sort function.
 *
 * Runs in O(nlogn) time. However it consumes extra memory.
 */
template<class T>
void ArrayList<T>::mergeSort() {

    T* temp = mergeSort(array, size);
    delete [] array;
    array = temp;
    sorted = true;
}

/**
 * Runs merge sort on the passed in array. Recursive.
 *
 * Runs in O(nlogn) time. However it consumes extra memory.
 *
 * @param array the array to sort.
 * @param arraySize the size of the array that is to be sorted.
 * @return the sorted array.
 */
template<class T>
T* ArrayList<T>::mergeSort(T* array, int arraySize) {

    T* returnArray;

    //If the array is more than one element.
    if (arraySize > 1) {

        int size1 = arraySize / 2;
        int size2 = arraySize - size1;

        T* array1;
        T* array2;

        //Recurse.
        array1 = mergeSort(array, size1);
        array2 = mergeSort(array + size1, size2);

        //Allocate memory for return array.
        returnArray = new T[arraySize];

        //Loop through all elements in returnArray.
        int i = 0, j = 0, k = 0;
        while (i < arraySize) {

            //Place the lesser of two elements in returnArray.
            if ((array1[j] <= array2[k] && j < size1)
                    || k == size2) {

                returnArray[i] = array1[j];
                j++;
            }
            else {

                returnArray[i] = array2[k];
                k++;
            }

            i++;
        }

        //Free the memory allocated in the recursive calls.

        delete [] array1;
        delete [] array2;
        array1 = 0;
        array2 = 0;
    }
    //If one element is in the passed array.
    else {

        //Allocate memory for new array, and assign passed value to it.
        //This is done so delete can be called in the calling function.
        returnArray = new T[1];
        returnArray[0] = array[0];
    }

    return returnArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:37:16.303

在`array1 [ j ]`检查它是否为`j < size1`. 如果`j >= size1`那么访问该索引处的数组是非法的。它可能并不总是崩溃，这取决于堆中事物的内存布局，但它有时会崩溃。你的支票应该是这样的：

```
if (((j < size1) && (array1[j] <= array2[k])) || k == size2) {
... 
```

# javascript - 小胡子和嵌套模板

> ID：12547829
> 
> 赞同：2
> 
> 时间：2012-09-22T21:24:39.180
> 
> 标签：javascript, mustache

我有一个树状设置，其中每个节点都包含自己的 Mustache 模板，该模板可能包含在父节点的模板中。

```
var templates = {
    secondTmpl: Mustache.compile("<i>Yet another template.. Here's some text: {{text}}</i>     {{date}}"),
    template: Mustache.compile("<b>{{val}}</b><p>{{{outlet}}}</p><ul>{{#list}}<li>{{.}}            </li>{{/list}}</ul> {{test}}")
};

var tree = [
    {
        template: "template",
        data: { val: "yup!!", list: [1,2,3,4,5], test: function() { return new Date(); } },
        children: [
            {
                view: "Main",
                template: "secondTmpl",
                data: { text: "Some Value", date: function() { return new Date(); } }
            }
        ] 
    }
];

function MainView(options) {
    this.template = options.template;
    this.data = options.data;
    this.childViews = options.childViews;
    this.el = document.createElement("div");
}

MainView.prototype.render = function() {
    View.prototype.render.call(this);
    this.postRender();
    return this;
};

MainView.prototype.postRender = function() {
    this.el.getElementsByTagName("i")[0].style.border = "1px dotted red";
};

function View(options) {
    this.template = options.template;
    this.data = options.data;
    this.childViews = options.childViews;
    this.el = document.createElement("div");
}

View.prototype.render = function(renderChildren) {
    if(this.childViews) {
        this.data.outlet = "<div class=\"outlet\"></div>";
    }

    this.el.innerHTML = this.template(this.data);

    if(this.childViews) {
        this.childViews.forEach(function(view) {
            this.el.getElementsByClassName("outlet")[0].appendChild(view.render().el);
        }, this);
    }

    return this;
};

function traverse(node) {
    var viewOptions = {
        template: templates[node.template],
        data: node.data
    };

    if(node.children) {
        viewOptions.childViews = node.children.map(function(n) {
            return traverse(n);
        });
    }

    return node.view ? new window[node.view + "View"](viewOptions) : new View(viewOptions);
}

function init() {
    tree.forEach(function(node) {
        var view = traverse(node);
        document.body.appendChild(view.render().el);
    });
}

window.onload = init;​ 
```

这里的例子：http: [//jsfiddle.net/b4fTB/](http://jsfiddle.net/b4fTB/)

我将数据保存在树中的原因是嵌套模板因用户数据而异，并且许多模板可能包装在不同的模板中。

我不知道我在这里做的是否愚蠢，但它也允许我从 C# 渲染模板，这非常好。

所以 - 问题（当然欢迎对上述内容发表评论）。在处理带有嵌套模板的模板时，最好有一个简单的函数，它只返回与实际模板相关的 dom 元素——而不是来自嵌套模板的 dom 元素。这甚至可能吗？是否有可能以一种允许深度嵌套模板而不损失大量性能的方式？换句话说，我有两个模板，其中一个嵌套在 jsfiddle 中的另一个中。在处理 dom 时不必担心父视图中的嵌套视图会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:37:54.810

好吧，我想我自己找到了方法。

以下代码需要[mustachejs](https://github.com/janl/mustache.js)和[composejs](https://github.com/kriszyp/compose)：

```
var noop = function() {};

var templates = {
    secondTmpl: Mustache.compile("<i>Yet another template..  {{{outlet}}}Here's some text: {{text}}</i> {{date}}"),
    template: Mustache.compile("<b>{{val}}</b><p>{{{outlet}}}</p><ul>{{#list}}<li>{{.}}</li>{{/list}}</ul> {{test}}")
};

var tree = [
    {
        view: "Main",
        template: "template",
        data: { val: "yup!!", list: [1, 2, 3, "Four", 5], test: function() { return new Date(); } },
        children: [
            {
                template: "secondTmpl",
                data: { text: "Some Value", date: function() { return new Date(); } }
            },
            {
                view: "Test",
                template: "secondTmpl",
                data: { text: "ANOTHER TEMPLATE", date: function() { return new Date(); } },
                children: [
                    {
                        template: "template",
                        data: { val: "Pretty nested template", list: [56, 52, 233, "afsdf", 785], test: "no datetime here" }
                    }
                ]
            }
        ] 
    }
];

var View = Compose(function(options) {
    Compose.call(this, options);
    this.el = document.createElement(this.tag);
}, {
    tag: "div",
    render: function() {
        if(this.childViews) {
            this.data.outlet = "<div class=\"outlet\"></div>";
        }

        this.el.innerHTML = this.template(this.data);

        this.didRender();

        if(this.childViews) {
            var lastEl;

            this.childViews.forEach(function(view) {
                if(!lastEl) {
                    var outlet = this.el.getElementsByClassName("outlet")[0];
                    lastEl = view.render().el;
                    outlet.parentNode.replaceChild(lastEl, outlet);
                } else {
                    var el = view.render().el;
                    lastEl.parentNode.insertBefore(el, lastEl.nextSibling);
                    lastEl = el;
                }
            }, this);
        }

        this.didRenderDescendants();

        return this;
    },
    didRender: noop,
    didRenderDescendants: noop
});

var TestView = View.extend({
    didRender: function() {
        var nodes = this.el.querySelectorAll("*");
        for(var i = 0; i < nodes.length;i++)
            nodes[i].style.border = "2px dotted red";
    }
});

var MainView = View.extend({
    didRender: function() {
        var nodes = this.el.querySelectorAll("*");
        for(var i = 0; i < nodes.length;i++)
            nodes[i].style.backgroundColor = "lightgray";
    }
});

function traverse(node) {
    var viewOptions = {
        template: templates[node.template],
        data: node.data
    };

    if(node.children) {
        viewOptions.childViews = node.children.map(function(n) {
            return traverse(n);
        });
    }

    return node.view ? new window[node.view + "View"](viewOptions) : new View(viewOptions);
}

function init() {
    tree.forEach(function(node) {
        var view = traverse(node);
        window["view"] = view;
        document.body.appendChild(view.render().el);
    });
}

window.onload = init; 
```

诀窍是用第一个子视图替换 div.outlet 而不是附加到它。然后将其他子视图彼此相邻插入。

# c# - 使用 C# 写入 CSV 的效率

> ID：12547830
> 
> 赞同：0
> 
> 时间：2012-09-22T21:24:55.540
> 
> 标签：c#, csv

刚，我需要一些关于这个的想法。

假设我想从我收集的数据中构建一个 CSV 文件。List 中的数据约为 100MB。首先构建列表然后将整个列表写入 CSV 是否更有效，或者我应该在收集数据时写入 CSV？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:31:23.440

看来您是在专门询问**效率**。

如果您通过分配的总内存定义最有效 - 那么在获取数据时肯定会构建 CSV。

如果您将最有效定义为在（短期）未来利用数据时最通用的方法，那么首先填充列表可能是最谨慎的。

还有许多其他可能性，我想这取决于您如何定义效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:26:18.397

不使用任何内存并将其用作列表会更快，但是，如果您正在执行需要考虑数据切片的操作，则使用列表会更容易甚至更快。

# javascript - javascript 和 jquery 覆盖

> ID：12547842
> 
> 赞同：2
> 
> 时间：2012-09-22T21:27:15.420
> 
> 标签：javascript, jquery, cross-browser

我正在制作一个小项目，它将让：不同的网站加载我的外部 javascript 文件：像这样：

```
<script type="text/javascript">
        var vsid = "SA89696";
        (function() { 
            var vsjs = document.createElement('script'); vsjs.type = 'text/javascript'; vsjs.async = true; vsjs.setAttribute('defer', 'defer');
            vsjs.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'example.com/robot/robot.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(vsjs, s);
        })();
        </script> 
```

现在我想在我的javascript文件中使用jquery，我自己加载它没有问题，但是如果它已经加载了jquery，我不想对当前网站造成错误。

你有什么建议如何在没有覆盖的情况下加载 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:30:38.383

你需要这样的东西：

```
<script>
if(!window.jQuery)
{
   var script = document.createElement('script');
   script.type = "text/javascript";
   script.src = "path/to/jQuery";
   document.getElementsByTagName('head')[0].appendChild(script);
}
</script> 
```

它检查是否加载了 jQuery。

[来源](https://stackoverflow.com/questions/1828237/check-if-jquery-has-been-loaded-then-load-it-if-false)

# mysql - 优化 MySQL 表索引

> ID：12547846
> 
> 赞同：0
> 
> 时间：2012-09-22T21:28:13.293
> 
> 标签：mysql, database

我正在尝试通过反转 InnoDB 数据库模式上的日期类型索引。MySQL Workbench 但是每次我尝试应用更改时都会被忽略？我需要使用命令行来配置数据库吗？根据[http://www.oracle.com/partners/en/knowledge-zone/mysql-5-5-innodb-myisam-522945.pdf](http://www.oracle.com/partners/en/knowledge-zone/mysql-5-5-innodb-myisam-522945.pdf) 第 10 页。InnoDB 支持 BTREE 索引。

# node.js - 从 debian 服务器上的 node.js 应用程序生成电子邮件

> ID：12547848
> 
> 赞同：2
> 
> 时间：2012-09-22T21:28:15.657
> 
> 标签：node.js, debian, email

我在家里的 debian 盒子上使用 node.js。我想在我的网络应用程序中构建一个发送电子邮件的功能——设置我的家庭 debian 服务器以发送电子邮件的最简单方法是什么？

生产网络主机已经配置了电子邮件，我只需要它在本地工作以进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:32:03.817

我有一段时间没有这样做了，但是[https://github.com/niftylettuce/node-email-templates](https://github.com/niftylettuce/node-email-templates)值得一试。您还可以浏览 npm 以查找关键字“电子邮件”：[https](https://npmjs.org/browse/keyword/email) ://npmjs.org/browse/keyword/email 。我至少看到了一个 sendmail 包装器，它与 Linux 机器上的一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:41:06.837

我推荐[Nodemailer](https://github.com/andris9/Nodemailer)。它支持各种传输的配置，可以轻松地在开发环境和生产服务器之间切换。

# python - 我如何逃避结果？

> ID：12547849
> 
> 赞同：0
> 
> 时间：2012-09-22T21:28:21.810
> 
> 标签：python, sqlalchemy, jinja2

我正在使用 ajax 调用 sqlalchemy 和金字塔从我的 mysql 数据库中提取数据并分页。我的 Ajax 调用是：

```
$.ajax({
    type: 'GET',
    url: "results",
    dataType: 'json',
})
.fail( function (jqXHR, textStatus, errorThrown){
    alert(errorThrown);
    })
    .done(function(data){   
        $.each(data.myitems, function(index, item){
          // do stuff here  
        });
    }); 
```

我的看法是：

```
def pager(request):
    query = DBSession.query(MyTable)
    page_url = paginate.PageURL_WebOb(request)
    customers = paginate.Page(query, 
                     page=int(request.params.get("page", 1)), 
                     items_per_page=25, 
                     url=page_url)

    return render_to_response ("templates/my_json.jinja2",
                        {"customers": customers},
                        request=request) 
```

在我的 jinja2 模板中，我有：

```
{
"page":{{ customers.page }},
"next_page":{{ customers.next_page }},
    "customerlist":[{% for cus in customers %}
        {"name":"{{ cus.name }}",
        "birthday":"{{ cus.birthday }}",
     {% if not loop.last %},{% endif %}{% endfor %}
    ]
} 
```

然后我的数据如下所示：

```
{
"thisvariable":1,
"anothervariable":2,
    "myitems":[
        {"name":"Matt",
        "birthday":"1978-02-23 00:00:00"},
        {"name":"Carol\y",
        "birthday":"1967-05-05 00:00:00"},
        {"name":"Bob",
        "birthday":"1984-02-03 00:00:00"}
        ]
} 
```

如何逃避 Carol\y 中的“\”？我收到一个错误：“SyntaxError: Unexpected token y”。在 Jinja2 中，我尝试了 |e 转义但得到了同样的错误。

编辑：我也在我的models.py中尝试过：

```
from re import escape
class MyTable(Base):
  ....
  def __init__(self, name=""):
        self.name = escape(name) 
```

我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:05:04.660

可能你想`json.dumps`改用吗？Jinja2 生成 JSON 真的很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:43:44.390

不要使用模板来渲染 JSON；改用金字塔的内置 JSON 渲染器：

```
from pyramid.view import view_config

@view_config(renderer='json')
def pager(request):
    query = DBSession.query(MyTable)
    page_url = paginate.PageURL_WebOb(request)
    customers = paginate.Page(query, 
                     page=int(request.params.get("page", 1)), 
                     items_per_page=25, 
                     url=page_url)

    return {"customers": customers} 
```

不过，您可能希望将我们在[其他问题](https://stackoverflow.com/questions/12541322/how-do-i-json-encode-this-view/12541464#12541464)中讨论的 JSON 转换方法应用于`customers`此处；最后一行将是：

```
 return {"customers": [c.json_dump() for c in customers]} 
```

请参阅[金字塔渲染器文档](http://pyramid.readthedocs.org/en/latest/narr/renderers.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:38:57.273

反斜杠通常是转义字符。使用第二个反斜杠来转义反斜杠并将其视为普通字符。像这样。`carol\\y.`

# python - Raspberry Pi 上的 Python/MySQLdb 问题

> ID：12547855
> 
> 赞同：0
> 
> 时间：2012-09-22T21:29:39.617
> 
> 标签：python, mysql, mysql-python, raspberry-pi

我在我的树莓派上运行 python/mysqldb 时遇到了一些麻烦。这是一个非常简单的脚本，所以我不确定我错过了什么。“SELECT * FROM ...”运行没有问题，但我似乎无法用新值更新表。该脚本运行时不会抛出错误，但是当我 ctrl-C 时，它给了我这个：

> 异常 _mysql_exceptions.ProgrammingError: (2014, "Commands out of sync; you can't run this command now") in bound method DictCursor.__del of MySQLdb.cursors.DictCursor object at 0x19dfd90

这是我的脚本：

```
 dhost = "localhost"
    duser = "root"
    dname = "rpi"
    dpass = "datPassword"

    import MySQLdb

    try:
        con = MySQLdb.connect(dhost,duser,dpass,dname);
        cur = con.cursor(MySQLdb.cursors.DictCursor)

    except MySQLdb.Error, e:
        print "Error %d: %s" % (e.args[0],e.args[1])
        sys.exit(1)

    def websiteToSensor():
        cur.execute("SELECT * FROM homeauto WHERE changedby = 'website'")
        rows = cur.fetchall()
        for row in rows:
            cur.execute("UPDATE homeauto SET changedby = 'script' WHERE id = '%s'",(row["id"]))
        return

    while True:
        websiteToSensor() 
```

有谁知道为什么我的表没有更新？谢谢！

**********编辑：解决方案****** ******

 **感谢 Martijn Pieters，这是我的新 websiteToSensor() 代码：

```
 def websiteToSensor():
        cur = con.cursor(MySQLdb.cursors.DictCursor)
        cur.execute("SELECT * FROM homeauto WHERE changedby = 'website'")
        rows = cur.fetchall()
        num = int(cur.rowcount)
        if num > 0:
            for row in rows:
                cur.execute("UPDATE homeauto SET changedby = 'script' WHERE id = '%s'",(row["id"]))
            con.commit()
            cur.close()
            con.commit()
        else:
            cur.close()
            con.commit()
        return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:38:29.800

尝试提交您的更改：

```
def websiteToSensor():
    cur.execute("SELECT * FROM homeauto WHERE changedby = 'website'")
    rows = cur.fetchall()
    for row in rows:
        cur.execute("UPDATE homeauto SET changedby = 'script' WHERE id = '%s'",(row["id"]))
    con.commit()
    return 
```**

# mysql - 所用表类型的最大行大小（不包括 BLOB）为 65535。您必须将某些列更改为 TEXT 或 BLOB

> ID：12547857
> 
> 赞同：10
> 
> 时间：2012-09-22T21:30:30.530
> 
> 标签：mysql, max, multiple-columns, create-table

我在尝试创建的表上收到以下消息。

> 所用表类型的最大行大小（不包括 BLOB）为 65535。您必须将某些列更改为 TEXT 或 BLOB

请问有人知道这个问题的答案吗？

```
-- Table `warrington_central`.`job`  
-- -----------------------------------------------------  

CREATE  TABLE IF NOT EXISTS `warrington_central`.`job` (  
  `id` MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT ,  
  `alias_title` VARCHAR(255) NOT NULL ,  
  `reference_number` VARCHAR(100) NOT NULL ,  
  `title` VARCHAR(255) NOT NULL ,  
  `primary_category` SMALLINT(5) UNSIGNED NOT NULL ,  
  `secondary_category` SMALLINT(5) UNSIGNED NOT NULL ,  
  `tertiary_category` SMALLINT(5) UNSIGNED NULL ,  
  `address_id` BIGINT(20) UNSIGNED NOT NULL ,  
  `geolocation_id` BIGINT(20) UNSIGNED NULL ,  
  `company` VARCHAR(255) NOT NULL ,  
  `description` VARCHAR(10000) NOT NULL ,  
  `skills_required` VARCHAR(10000) NOT NULL ,  
  `job_type` TINYINT(2) UNSIGNED NOT NULL ,  
  `experience_months_required` TINYINT(2) UNSIGNED NOT NULL ,  
  `experience_years_required` TINYINT(2) UNSIGNED NOT NULL ,  
  `salary_range` VARCHAR(30) NOT NULL ,  
  `extra_benefits_above_salary` VARCHAR(500) NOT NULL ,  
  `available_from` DATE NULL ,  
  `available_to` DATE NULL ,  
  `extra_location_details` VARCHAR(1000) NOT NULL ,  
  `contact_email` VARCHAR(100) NOT NULL ,  
  `contact_phone_number` VARCHAR(20) NOT NULL ,  
  `contact_mobile_number` VARCHAR(20) NOT NULL ,  
  `terms_conditions_application` VARCHAR(5000) NOT NULL ,  
  `link_to_profile` ENUM('0','1') NOT NULL ,  
  `created_on` DATETIME NOT NULL ,  
  `updated_on` DATETIME NOT NULL ,  
  `updated_by` BIGINT(20) UNSIGNED NOT NULL ,  
  `add_contact_form` ENUM('0','1') NOT NULL ,  
  `admin_package_id` TINYINT(1) UNSIGNED NOT NULL ,  
  `package_start_date` DATETIME NOT NULL ,  
  `package_end_date` DATETIME NULL ,  
  `package_comment` VARCHAR(500) NOT NULL ,  
  `viewable_to_members_only` ENUM('0','1') NOT NULL ,  
  `advertise_to` DATETIME NULL ,  
  `show_comment` ENUM('0','1') NOT NULL ,  
  `hits` BIGINT(20) UNSIGNED NOT NULL DEFAULT 0 ,  
  `visible` ENUM('0','1') NOT NULL DEFAULT '0' ,  
  `approved` ENUM('I/* large SQL query (3.9 KB), snipped at 2,000 characters */
/* SQL Error (1118): Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535\. You have to change some columns to TEXT or BLOBs */
SHOW WARNINGS; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T21:35:50.597

改变`description`和`skills_required`成为类型`text`

您收到该消息是因为所有字段的*总和*> 65k

# regex - 正则表达式是循环表达式并将其作为一个结果返回

> ID：12547861
> 
> 赞同：1
> 
> 时间：2012-09-22T21:31:24.210
> 
> 标签：regex, perl

我正在编写一个 perl 脚本来使用正则表达式从 .h 文件中生成 .cpp 文件来查找函数，然后再次使用正则表达式将结果分成两个部分，即返回类型和函数。

我创建了一个正则表达式来查找几乎可以工作的返回类型。

```
^(\s*&?\w*\s*(\<{1}.*\>{1})*\s) 
```

编辑：我将正则表达式字符串更新为效果更好的字符串，但就这个问题而言，仍然没有任何变化。

这适用于大多数 cpp 原型，例如

```
int funky();
int funky(int something);
&int funky(int something);
&int <vector *> funky(); 
```

在这些情况下，正则表达式匹配

```
int
int
&int
&int <vector *> 
```

这是完美的，但是在函数参数内部存在匹配的字符串的情况下，例如：

```
int <vector> funky(int <vector> i);
int <vector> funky(int <vector *> i);
int <vector> funky(const int <vector> i); 
```

正则表达式匹配

```
int <vector> funky(int <vector>
int <vector> funky(int <vector *>
int <vector> funky(const int <vector> 
```

当我希望它返回时

```
int <vector>
int <vector>
int <vector> 
```

而且我无法弄清楚它是否继续超过第一个右括号'>'的末尾。我是正则表达式的新手，根本无法弄清楚。

很抱歉有一个答案，我搜索并没有找到一个，可能是因为我什至不知道要查找哪些术语:(。

Edit2：如果这个问题比我预期的更复杂，有人可以解释为什么它会在第一个 <.*> 之后继续吗？我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:59:02.837

正则表达式非常适合[正则语言](http://en.wikipedia.org/wiki/Regular_language)。但是，大多数编程语言都不是规则的。任何具有某种大括号和递归的东西都是上下文无关的语言，甚至是上下文相关的。（如果这些 CS 术语让您感到困惑，请在 Wikipedia 上查找它们。它们很有用）。

尤其是 C 的语法非常复杂。

然而，Perl 的正则表达式并不局限于正则表达式。我们可以表达上下文无关文法，即定义字符串必须匹配的一组规则。在每个规则中，我们可以引用其他规则。因此，我们可以进行递归，以及匹配嵌套括号之类的事情：

```
m{
   ^ (?&NESTED_PAREN) $
   (?(DEFINE)
     (?<NESTED_PAREN> [(] (?: [^()]+ | (?&NESTED_PAREN) )* [)] )
   )
}x; 
```

这个正则表达式定义了一个顶级规则：从头到尾的整个字符串必须是一个嵌套的括号。然后跟随一个`DEFINE`块。我们定义了一个规则`NESTED_PAREN`，它以 a 开头`(`并且可以包含任意数量的非括号字符和嵌套的括号。后面跟着一个`)`. 必须考虑到，编写无限递归语法很容易，但幸运的是，在此示例中，每次递归都会消耗字符或失败。

对于用 Perl 编写语法的更好的界面，我强烈推荐[CPAN 中的 Regexp::Grammars](http://search.cpan.org/~dconway/Regexp-Grammars-1.021/lib/Regexp/Grammars.pm)。

现在我们知道如何在 Perl 中编写语法，并且可以为您的函数声明创建一个语法。这是一个没有空格的符号表示法：

```
FUNCTION ::= TYPE VECTOR? NAME '(' ARGUMENTS ')'
VECTOR   ::= '<' vector '*'? '>'
ARGUMENTS::= ( ARGUMENT (',' ARGUMENT)* )?
ARGUMENT ::= TYPE VECTOR? NAME 
```

您可能已经注意到，我们可以在参数列表中重复使用函数的一些规则。现在您只需要将这个语法映射到一组`(DEFINE)`规则，编写顶级规则，就可以开始了。同样，使用 Regexp::Grammars 将使这项工作变得更加容易，但它提供了另一种您必须学习的语言。

有关Perl 正则表达式中内置功能的最终参考，请参阅[perldoc perlre 。](http://perldoc.perl.org/perlre.html#Extended-Patterns)

请注意，（由于预处理器等原因），C（和 C++）语法既不是常规的也不是上下文无关的。没有执行预处理器的一切最终都会成为一个不错的尝试……</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:39:35.523

正则表达式是贪婪的。用一个 ？跟随你的 .* 使其不贪婪，它将在第一场比赛停止，而不是最后一场比赛。

```
^(\s*&?\w*\s*(\<{1}.*?\>{1})*\s) 
```

更多信息在[http://perldoc.perl.org/perlre.html#Regular-Expressions](http://perldoc.perl.org/perlre.html#Regular-Expressions)：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:32:54.013

这是另一种方法：

```
/^\s*&?\w*(\s+\<[^\>]+\>)?/ 
```

括号中的部分`(\s+\<[^\>]+\>)?`是任何以空格开头的文本，然后是“<”，后跟任何不是“>”的字符（否定字符类`[^\>]+`），然后是“>”。

带有 ">" 的否定字符类确保匹配将在 <> 部分结束后立即结束。括号后面也跟着一个“？” 使其成为表达式的可选部分。

# c# - 如何在其他类中使用 ScreenWidth？

> ID：12547865
> 
> 赞同：2
> 
> 时间：2012-09-22T21:31:42.510
> 
> 标签：c#, xna

这是我用来获取包含以下变量的代码`screenHeight`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Ball pall;
    MinuPad playerPad;
    public int screenWidth;
    public int screenHeight;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

    }

    protected override void Initialize()
    {
        screenWidth = GraphicsDevice.Viewport.Width;
        screenHeight = GraphicsDevice.Viewport.Height; 
```

但是我不能在不同的类中使用该变量。例如，我有一个名为的类`Ball.cs`，我还需要使用关于`screenWidth`和的信息`screenHeight`。

当我尝试使用`GraphicsDevice.Viewport.Width`它时，它给了我：

```
An object reference is required for the non-static field, method, or property 
'Microsoft.Xna.Framework.Graphics.GraphicsDevice.Viewport.get' 
```

我的问题：为什么我不能`GraphicsDevice.Viewport`在其他课程中使用？我应该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:26:12.010

您无法访问它的原因是因为 Ball 类的实例根本不知道 Viewport。您可以通过一些选项来解决此问题，主要是将 传递`Viewport`给您的球的构造函数，例如：

```
public class Ball
{

    Viewport viewport;

    // ... 

    public Ball(int stuff, Viewport viewport)
    {
         this.viewport = viewport;

         // ...
    }
} 
```

在类中创建球的实例，其`Game1`内容如下：

```
Ball ball = new Ball(42, GraphicsDevice.Viewport); 
```

然后，您可以简单地`viewport.Height`在 Ball.cs 中进行操作。

如果您想要更全局的东西以便您可以在*任何地方*使用高度/宽度，那么您可以在 Game1 ( `public static Viewport`) 中创建一个静态视口并`Viewport`在`Initialise()`/`LoadContent()`方法中进行设置；您可以使用`Game1.Viewport`. 就我个人而言，我不喜欢这种方式，因为它看起来像“hacker-ish”，但它可以完成工作..虽然这么说，我通常在我的游戏类中有一个静态随机类:)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:16:39.767

我对 XNA 不熟悉，但我的猜测是它`GraphicsDevice`是基类的成员`Microsoft.Xna.Framework.Game`。您将无法从非派生的类访问它`Game`。

同样，不熟悉 XNA，但如果您的`Ball`类可以访问您的类的实例`Game1`，那么它应该能够访问该`screenWidth`字段：

```
public class Ball
{
    Game1 _game;
    public Ball(Game1 game){_game = game;}
    private void UseScreenWidth(){
        // Do something with _game.screenWidth;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T22:32:26.843

我不是 100% 熟悉 C#，但我认为您在顶部缺少导入语句。

尝试包括以下行：

```
using Microsoft.Xna.Framework.Graphics 
```

...在顶部`Ball.cs`。

我猜如果您检查主文件，您会在文件顶部看到该行（和类似行）。

如果您查看 的[文档](http://msdn.microsoft.com/en-us/library/bb197329.aspx)，`GraphicsDevice`您会看到它位于`Microsoft.Xna.Framework.Graphics`命名空间中。

# javascript - 使用数学随机生成随机不透明度数

> ID：12547866
> 
> 赞同：-1
> 
> 时间：2012-09-22T21:31:52.160
> 
> 标签：javascript, jquery, math, random, opacity

我正在尝试为 css 不透明度生成一个随机数。

这是我到目前为止所尝试的。

CSS

```
.test{
    position : absolute;
    width : 15px;
    height : 15px;
    border-radius:15px;
    background-color : black; 
}​ 
```

脚本

```
$(function() {
    for (var i = 0; i < 300; i++) {
        $("<div>", {
            class: "test",
            css: {
                opacity: randomOpacity
            }
        }).appendTo("body");
    }

    function randomOpacity() {
        var opac = 0;
        opac = Math.random() < 1;
        console.log(opac);
    }

    randomize();
});​ 
```

### [小提琴](http://jsfiddle.net/techydude/pzrsN/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T21:42:32.827

您的小提琴有多个错误：

*   您正在生成 300 个绝对定位的 div。它们相互堆叠，因此无论如何都会显示为黑色。
*   您实际上并没有调用该函数（缺少括号）
*   Math.random() < 1 将返回 True 而不是数字。
*   你没有从你的函数中返回 opac 。
*   您正在调用未定义的 randomize()。

更正版本：http: [//jsfiddle.net/RucKd/1/](http://jsfiddle.net/RucKd/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:38:31.250

[`Math.random()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)`0`已经在和之间生成了一个随机数`1`，所以：

```
$(function() {
    for (var i = 0; i < 100; i++) {
        $("<div>", {
            class: "test"
        }).css('opacity', Math.random()).appendTo("body");
    }
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/pzrsN/6/)

**编辑：**在我的答案中重新插入你的循环并从小提琴中删除绝对位置。阅读@ChristopheBiocca (+1) 的答案以获得更完整的代码审查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:40:59.507

***JS***

```
 $(function() {

        for (var i = 0; i < 300; i++){
          $("<div>", {
            class : "test",
            css : {
              opacity : randomOpacity
            }
          }).appendTo("body"); 
        }

        function randomOpacity(){
          var opac = 0;
             opac =  (Math.random());
            return opac;
        }

      }); 
```

***CSS*** remove`position : absolute;`，用这个 css 你所有的 div 在同一个地方

.test{ 宽度：15px; 高度：15px；边框半径：15px；背景颜色：黑色；}​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:44:29.750

`Math.random()`总是返回一个介于 0 和 1 之间的值，您可以将它直接放在创建`divs`. 此外，`position: absolute`您的 CSS 中的每个都`div`在同一个位置，因此您无法正确看到结果。尝试这个：

CSS

```
.test{
    width : 15px;
    height : 15px;
    border-radius:15px;
    background-color : black; 
}​ 
```

JS

```
$(function() {
    for (var i = 0; i < 300; i++) {
        $("<div>", {
            class: "test",
            css: {
                opacity: Math.random()
            }
        }).appendTo("body");
    }
});​ 
```

无论如何，`randomize()`功能没有定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T21:38:41.343

css 函数改变一个 css 属性，`Math.random()`返回 0-1，所以你可以把它放进去。下面的代码改变了 opac div 的不透明度。

```
 <div id="opac">
 lalalalala
</div>
<script>
$(document).ready(function(){
    $("#opac").css('opacity', Math.random());
});
</script> 
```

`$(document).ready`页面加载后调用其中的所有内容，用于此类事情的好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T21:40:11.373

```
$('#foobar').css({ opacity: Math.random() });​ 
```

# python - 安装 Postgis (PostgreSQL)(Django)(Mac OS x 10.7) 时遇到问题

> ID：12547872
> 
> 赞同：1
> 
> 时间：2012-09-22T21:33:04.033
> 
> 标签：python, django, macos, postgresql, postgis

编辑：

好的，我卸载了我拥有的版本并根据下面列出的说明重新安装：

我跑了：

```
POSTGIS_SQL_PATH=/usr/local/Cellar/postgis15/1.5.3/share/postgis
# Creating the template spatial database.
createdb -E UTF8 template_postgis
createlang -d template_postgis plpgsql # Adding PLPGSQL language support.
# Allows non-superusers the ability to create from this template
psql -d postgres -c "UPDATE pg_database SET datistemplate='true' WHERE datname='template_postgis';"
# Loading the PostGIS SQL routines
psql -d template_postgis -f $POSTGIS_SQL_PATH/postgis.sql
psql -d template_postgis -f $POSTGIS_SQL_PATH/spatial_ref_sys.sql
# Enabling users to alter spatial tables.
psql -d template_postgis -c "GRANT ALL ON geometry_columns TO PUBLIC;"
psql -d template_postgis -c "GRANT ALL ON geography_columns TO PUBLIC;"
psql -d template_postgis -c "GRANT ALL ON spatial_ref_sys TO PUBLIC;" 
```

然后跑：

```
$ createdb -T template_postgis newdb
$ createuser --createdb poop
Shall the new role be a superuser? (y/n) y 
```

现在这是我的数据库列表：

```
$ psql -l
                                  List of databases
       Name       | Owner | Encoding |  Collation  |    Ctype    | Access privileges 
------------------+-------+----------+-------------+-------------+-------------------
 newdb            | User  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 postgres         | User  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0        | User  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/User          +
                  |       |          |             |             | User=CTc/User
 template1        | User  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/User          +
                  |       |          |             |             | User=CTc/User
 template_postgis | User  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
(5 rows) 
```

确保我的版本正确：

```
$ psql newdb
psql (9.0.8)
Type "help" for help.

newdb=# SELECT PostGIS_full_version();
                                       postgis_full_version                                       
--------------------------------------------------------------------------------------------------
 POSTGIS="1.5.3" GEOS="3.3.5-CAPI-1.7.5" PROJ="Rel. 4.8.0, 6 March 2012" LIBXML="2.7.3" USE_STATS
(1 row)

newdb=# \dt
         List of relations
 Schema |       Name       | Type  | Owner 
--------+------------------+-------+-------
 public | geometry_columns | table | User
 public | spatial_ref_sys  | table | User
(2 rows) 
```

看起来所有依赖项都得到了处理，数据库看起来很开心，一切看起来都很干净！（但是，我将上面所有用户访问的 geograph_colums 放在哪里？）

现在，settings.py：

```
DATABASES = {
    'default': {
         'ENGINE': 'django.contrib.gis.db.backends.postgis',
         'NAME': 'newdb',
         'USER': 'poop', # yes, I named my user poop
     }
} 
```

现在当我运行时：

```
$ python manage.py syncdb 
```

我通过以下结尾的各种文件获得链接：

```
psycopg2.OperationalError: could not connect to server: Permission denied
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

显然我的数据库正在运行，因为我可以 psql 进入它。但是权限设置不正确吗？

pg_hba.conf：

```
# TYPE  DATABASE        USER            CIDR-ADDRESS            METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

解答： [运行 Django 的 syncdb 时 OSX 10.7.3 上的 Postgresql 套接字错误](https://stackoverflow.com/questions/9133870/postgresql-socket-error-on-osx-10-7-3-when-running-djangos-syncdb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:57:07.883

我不确定当前的 Django 版本是否与 PostGIS 2.0 兼容。您可能想尝试安装 PostGIS 1.5。这也可能意味着安装 PostgreSQL 9.0。这两个软件包都在自制软件中，但您需要“点击”版本公式：

```
brew update
brew tap homebrew/versions
brew install postgresql9 
```

然后，您需要将默认`postgis15`包更改为指向`postgresql9`（该包的最新更新`postgresql`使其与 不兼容`postgis15`，并且公式尚未更新）：

```
brew edit postgis15 
```

`postgresql`更改to的两个实例`postgresql9`，例如：

第 12 行：

```
depends_on 'postgresql9' 
```

第 30 行：

```
postgresql = Formula.factory 'postgresql9' 
```

然后安装postgis15：

```
brew install postgis15 
```

并像以前一样创建相关数据库。

请注意，`psql`Python`psycopg2`包正在连接到正确的数据库（postgres 9.0）。`psycopg2`另外需要针对正确的库进行编译。确保这一点的最简单方法是在安装 postgis15 之前`postgresql`先从自制软件中卸载软件包（如果您没有将其用于其他任何事情）并移开数据目录：`/usr/local/var/postgres`

```
brew uninstall postgresql
mv /usr/local/var/postgres /usr/local/var/postgres9.1
initdb /usr/local/var/postgres -E utf8
brew install postgresql9 
```

...并`psycopg2`针对新库重新编译（进入您的 virtualenv）：

```
pip uninstall psycopg2
pip install psycopg2 
```

这可能无济于事，但使用已知有效的版本总是好的，除非您愿意试验、调试和提交补丁 :-)

# nosql - 如何通过复合键查询 Cassandra 中的 cli 查询？

> ID：12547873
> 
> 赞同：5
> 
> 时间：2012-09-22T21:33:14.310
> 
> 标签：nosql, cassandra

我在 Cassandra 中创建了以下列族：

```
 CREATE COLUMN FAMILY test with comparator = 'CompositeType(UTF8Type,UTF8Type)' and key_validation_class=UTF8Type; 
```

现在我想添加一些数据：

```
set test['a']['b:c'] = 'abc'
set test['a']['b:d'] = 'abd'
set test['a']['e:f'] = 'aef'
set test['a']['e:g'] = 'aeg'; 
```

现在我想检索在其复合键中有 e 的所有行：

就像是：

```
 get test['a']['e:*]; 
```

结果应该是“aef”和“aeg”。

cli 查询应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:02:31.980

我不确定 CQL，但是使用 playOrm，如果你按 a 分区，你可以只做 S-SQL(scalable SQL) 查询

```
PARTITIONS alias('a') SELECT alias FROM Table as alias WHERE a.column = 'e'; 
```

一个分区可以有数百万行。

无论如何，只是认为它可能会对您有所帮助。

# ios - 嗅探本地网络iOS游戏主机

> ID：12547876
> 
> 赞同：0
> 
> 时间：2012-09-22T21:33:34.930
> 
> 标签：ios, adhoc, sniffing

我这里有个小问题。我想嗅探一个使用本地网络与另一台 iOS 设备建立临时连接以获得多人游戏的 iOS 游戏，但我无法嗅探这些数据包，我尝试使用 Wireshark 但没有运气（我想我在做错了）。我该怎么做才能拦截这两个设备之间的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:16:43.263

如果它在 WPA 网络上，我认为您需要在 AP 上进行嗅探。或者，将所有三个设备都放在一个 ad-hoc WEP 网络上。

还有点对点蓝牙。我会通过关闭它来避免这种情况，而不是试图嗅探蓝牙密钥交换。

# iphone - iphone 如何制作具有三种状态的自定义 UISwitch（选项）

> ID：12547880
> 
> 赞同：0
> 
> 时间：2012-09-22T21:34:09.213
> 
> 标签：iphone, uiswitch, uicontrol

我想制作具有三种状态的 Switch。基本上我需要存储值 0 或 1 或 2。通过检查 Switch 的状态。

请帮助进行此切换。如果可以使用 IB 进行，那将非常好，因为它很容易放置在正确的位置。

（我有图像但无法显示 bec 是新的，还没有 10 声望）

提前感谢您的创造性思维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:41:04.763

您应该为此使用 UISegmentedControl。它是标准控件集的一部分，Apple 已经处理了可访问性支持，用户将知道如何处理它。

制作一个看起来像 UISwitch 但行为不同的自定义控件是一个坏主意。

# php - 在 php 或 javascript 中构建 html 结构？

> ID：12547884
> 
> 赞同：2
> 
> 时间：2012-09-22T21:34:59.567
> 
> 标签：php, javascript

我一直在做很多 ajax 调用，并使用返回的数据用 javascript 构建 html。但是，我注意到有些人在 ajax 调用中返回构造的 html，因为他们都是在 php.ini 中完成的。

首选方法是什么？我有很多东西已经在使用 javascript，所以我想我宁愿不改变所有东西来只使用 php。但是，我假设 php 会更“安全”。

以下是我一直在做的事情：

```
$main_frag = $("<div class='order-container'/>");

$contact_frag = $("<div class='group'><div class='line-data'>Name: "+data.name+"</div><div class='line-data'>Email: "+data.email+"</div><div class='line-data'>Phone: "+data.phone+"</div></div>");

$address_frag = $("<div class='group'><div class='line-data'>Address 1: "+data.address_one+"</div><div class='line-data'>Address 2: "+address2+"</div><div class='line-data'>City: "+data.city+"</div><div class='line-data'>Province: "+data.province+"</div><div class='line-data'>Postal Code: "+data.postal+"</div></div>"); 
```

ETC..

我只是想听听社区的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:41:40.863

IMO 小胡子是一个不错的选择：[http ://coenraets.org/blog/2011/12/tutorial-html-templates-with-mustache-js/](http://coenraets.org/blog/2011/12/tutorial-html-templates-with-mustache-js/)

使用 mustache，您可以在 javascript 中使用模板来生成标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:40:09.067

查看一些 Javascript 模板解决方案，例如 Underscore.js (http://underscorejs.org/)。这只是一个例子，有很多。这应该给你更多的分离和灵活性，而不仅仅是 JQuery。

同样对于更复杂的 Javascript 逻辑，您应该考虑开始使用一些 Javascript MVC 框架，例如 Backbone.js (http://backbonejs.org/)。还有很多。

对于浏览器/服务器通信，可以使用 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:40:52.497

我不认为将它们部分或作为一个整体结构检索会有区别。它们都可以通过 MITB（浏览器中的人）进行更改，甚至可以使用允许您在浏览器中修改 JS 和 HTML 的开发人员工具进行简单更改。

# php - 根据定义的顺序创建图像列表，并丢失

> ID：12547886
> 
> 赞同：1
> 
> 时间：2012-09-22T21:35:12.737
> 
> 标签：php, loops, joomla

我有一个为 Joomla 2.5 和模块的参数中自定义创建的模块，并且有一个未按预期输出的循环。我在模块中有以下参数（字段）： Order Thumb image Image Title Full-size image

现在有 10 组这些 4 参数组。我想要做的是循环遍历每个对象集，其中 10 个，并在每次迭代中构建一个 HTML 图像列表结构。

if 语句为 order 值大于 0 的集合构建 HTML 结构，else 为那些值不大于 0 的集合创建 html。

目标是创建两个变量，然后将字符串连接在一起；前导集是定义了顺序的集。这没有发生，每三个循环似乎都丢失了。

这是 10 组中设置的顺序

```
Set 1 = 0
Set 2 = 4
Set 3 = 1
Set 4 = 0
Set 5 = 5
Set 6 = 0
Set 7 = 0
Set 8 = 6
Set 9 = 3
Set 10 = 9 
```

然而，结果是：

```
9
5
1
4
6
7
10 
```

而不是预期的：

```
3
9
2
5
8
1 (below here are those sets that were not greater than 0 in order of appearance)
4
6
7 
```

这里有什么我看不到的问题？

```
 <?php
    for ($i = 1; $i <= 10; $i++) {
        $order      = $params->get('order'.$i);#get order for main loop of 10
        $active         = "";
        if ($order > 0) {#Check if greater than 0
            for ($n = 1; $n <= 10; $n++) {#loop through all order fields looking and build html lowest to highest;
                $ordercheck =$params->get('order'.$n);
                if ($ordercheck == $i) {
                    $img                = $params->get('image'.$n);
                    $fimage         = $params->get('image'.$n.'fullimage');
                    $title          = $params->get('image'.$n.'alttext');
                    $active         = "";
                    $active         = $active . '<li>';
                    $active         = $active .     '<a href="'.$fimage.'" rel="prettyPhoto[gallery1]" title="'.$title.'">';
                    $active         = $active .         '<img src="'.$img.'" alt="'.$title.'" />';
                    $active         = $active .     '</a>';
                    $active         = $active . '</li>';
                    $leading            = $leading . $active;
                }
            }
        } else { #if the itteration $order was not greater than 0, build in order of accourance
            $img                = $params->get('image'.$i);
            $fimage         = $params->get('image'.$i.'fullimage');
            $title          = $params->get('image'.$i.'alttext');
            $active         = $active . '<li>';
            $active         = $active .     '<a href="'.$fimage.'" rel="prettyPhoto[gallery1]" title="'.$title.'">';
            $active         = $active .         '<img src="'.$img.'" alt="'.$title.'" />';
            $active         = $active .         '</a></li>';
            $unordered  = $unordered . $active;
        }
        $imagesList = $leading . $unordered;
    }
?> 
```

# javascript - 我正在使用正则表达式片段查询字符串路径

> ID：12547887
> 
> 赞同：0
> 
> 时间：2012-09-22T21:35:34.587
> 
> 标签：javascript

使用以下内容基于两个 id 加载图像，一个是 bookid，out 是客户端。我的文件夹结构是这样的。

`root path = flipbooks`

翻书下的子文件夹是书籍和客户端。在子文件夹书籍中，我有一个名为平板电脑的 .NET 页面。后面的平板电脑代码检查客户端的 bookid 并以翻书方式呈现带有图像的平板电脑页面。

因为我们已经在数据库中创建并存储了超过 15000 条记录和翻书，所以我不会将客户端文件夹移动到书籍子文件夹下。我需要下面的代码来访问查询字符串中的客户端子文件夹，并帮助更改它会有所帮助。

现在的结果是：`http://www.somewebsite.com/books/client/images/someimage1.jpg[^]` 我需要的结果是： `http://www.somewebsite.com/client/images/someimage1.jpg[^]`。

我尝试将 tablet.aspx 文件移动到根翻书，它可以工作，但我每次都提供用户名和密码。这需要公众访问，并且我的根目录受到保护。不想更改权限。

我正在尝试删除 /books

```
function getParameterByName(name) {
var results = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
 return results ?
    decodeURIComponent(results[1].replace(/\+/g, ' '))
    : null; 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:21:24.600

修复了重写c#代码的问题。只查询请求字符串并用客户端替换书籍/客户端。

# c++ - C++ 中的多态性和方法重载几乎是一回事吗

> ID：12547892
> 
> 赞同：2
> 
> 时间：2012-09-22T21:35:56.730
> 
> 标签：c++, oop, polymorphism

在 C++ 中，有两种类型的多态性：

1.  对象多态
2.  函数多态

函数多态与方法或**函数重载**完全相同，即我们使用相同的方法名称，但参数和返回类型不同。现在的问题是为什么我们在 OOP 中有这个花哨的名字**多态性？**

多态性与方法重载的明显区别是什么？有人可以用一个场景来解释。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:40:55.047

多态性意味着“多种形式”。

在计算机科学中，主要有三种不同的多态性：

*   即席多态性

    *   函数重载
    *   C++ 模板特化
*   亚型多态性
    *   子类化和虚方法
*   参数多态性

    *   C++ 模板
    *   C# 和 Java 泛型
    *   ML 中的多态函数

多态是一个概念。AdHoc 多态性意味着同名不同的实现。

```
// Function overloading
void f(A a);  
void f(B b);
// template specialization
template <typename T> class A;  
template <> class A<int> {}  
template <> class A<float> {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:45:02.410

多态性：Poly => Multiple，Morph => Form。

为了简单起见，C++中有很多多态机制，函数重载是多态的一种。

[http://www.catonmat.net/blog/cpp-polymorphism/](http://www.catonmat.net/blog/cpp-polymorphism/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T22:10:05.010

多态性的本质是能够通过单一语法形式（通常是 C++ 中的函数调用）提供**不同的行为。**根据这个定义，虚函数调用（实际上代表 OOP 多态性）和重载函数调用都是多态的。

它们之间的区别在于在每种情况下*如何*以及*何时*选择特定行为。

对于虚函数调用，它是根据调用函数成员的对象的动态类型在*运行时进行的。*（当然，如果通过基类指针或引用调用。如果直接调用它将在编译时被选中）。

对于重载的函数调用，它是根据函数调用的签名（参数的类型和数量+ cv-qualifiers）在*编译时进行的。*

所以简而言之，重载是**静态**多态性，在编译时解决，虚函数是**动态**多态性，在运行时解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:45:46.260

多态性与方法重载不同。来自维基百科：

> 多态性与方法重载或方法覆盖不同，[1]（称为临时多态性 [2]）。多态性仅涉及将特定实现应用于接口或更通用的基类。方法重载是指在同一个类中具有相同名称但不同签名的方法。方法覆盖是子类替换其父类的一个或多个方法的实现的地方。方法重载和方法覆盖本身都不是多态性的实现

在多态中，方法被覆盖而不是重载（这意味着子对象有自己的继承函数的实现，但它具有相同的签名）。所以你所说的函​​数多态实际上只是方法重载或临时多态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T05:00:10.890

这两件事被定义为：

**静态多态性**：重载函数的关联称为静态多态性。

**函数重载**：当存在多个具有不同行为\签名的函数\上下文时，称为函数重载。

**注意**：如果存在一个具有不同签名的函数并且我们没有将这些函数与一个对象绑定，我们不能说存在静态多态性。

# php - 另一个带有 cURL 的空白页面

> ID：12547899
> 
> 赞同：0
> 
> 时间：2012-09-22T21:37:26.090
> 
> 标签：php, curl

我读过许多类似的标题问题，但没有一个对我有用......

问题是，当我向网站发送 cURL 查询时，我得到的只是一个空白页面。

这是我的代码：

```
<?php
$action     = "http://www.website.com/index.php?section=login&do=process";
$fields     = array(
    'username'  => $user,
    'rememberMe'    => '1'
);

$login = curl_post($action, $fields);

var_dump($login);

    function curl_post($url, array $post = NULL, array $options = array()) 
    { 
        $defaults = array( 
            CURLOPT_POST            => 1, 
            CURLOPT_HEADER          => 0,
            CURLOPT_HTTPHEADER      => array('Accept-Language: pl,en-us;q=0.7,en;q=0.3', 'Accept-Charset: ISO-8859-2,utf-8;q=0.7,*;q=0.7'),
            CURLOPT_USERAGENT       => "Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3",
            CURLOPT_URL             => $url, 
            CURLOPT_FRESH_CONNECT   => 1,
            CURLOPT_RETURNTRANSFER  => 1, 
            CURLOPT_FORBID_REUSE    => 1, 
            CURLOPT_TIMEOUT         => 4, 
            CURLOPT_NOBODY          => false,
            CURLOPT_POSTFIELDS      => http_build_query($post) 
        ); 

        $ch = curl_init(); 
        curl_setopt_array($ch, ($options + $defaults));
        if( !$result = curl_exec($ch)) 
        { 
            return(curl_error($ch)); 
        }
        curl_close($ch);
        return $result; 
    }

?> 
```

当然，我在 PHP 中启用了我的 cURL，所以不是这样。如果您有任何想法，请分享！

# 更新

我也一直在尝试在我的 PHP 文件顶部添加以下行：

```
ini_set("display_errors", 1);  
error_reporting(E_ALL); 
```

但问题仍然出现 - 结果是空白页。当我使用时，`file_get_contents("http://website.com/");`我可以看到页面内容，因此它不适用于 cURL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:41:36.003

在本地运行并将其指向 Google，我立即看到两件事：

1.  PHP注意：未定义变量：用户
2.  谷歌返回一个“错误 405（不允许的方法）！！1”错误页面，但可能是因为我试图发布到它

当您定义 $user 并重试时会发生什么？

# javascript - 如果 jquery 没有加载然后从这里加载 jquery

> ID：12547904
> 
> 赞同：1
> 
> 时间：2012-09-22T21:37:58.273
> 
> 标签：javascript, jquery

> **可能重复：**
> [如果未加载，则从外部源加载 jQuery](https://stackoverflow.com/questions/4523263/load-jquery-from-external-source-if-not-loaded)

如果 jquery 不加载，我该如何设置备份？

我发现并尝试了这个：

```
if (typeof jQuery == 'undefined') {
    alert('jquery didn't load !');
    loadScript("/here/jquery.min.js");
    .... // this is where i'd want to say load from '/here/jquery.js'
} 
```

但我不知道如何在脚本中调用脚本的 src。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:45:33.860

这是相当普遍的：

```
<!-- Grab Google CDN's jQuery. fall back to local if necessary -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="js/libs/jquery-1.4.2.js"%3E%3C/script%3E'))</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:46:00.757

看这里[如果尚未加载 jQuery，我该如何加载它？](https://stackoverflow.com/questions/6813114/how-can-i-load-jquery-if-it-is-not-already-loaded)或者[如果未加载，则从外部源加载 jQuery](https://stackoverflow.com/questions/4523263/load-jquery-from-external-source-if-not-loaded)

```
if(typeof jQuery=='undefined') {
    var headTag = document.getElementsByTagName("head")[0];
    var jqTag = document.createElement('script');
    jqTag.type = 'text/javascript';
    jqTag.src = 'jquery.js';
    jqTag.onload = myJQueryCode;
    headTag.appendChild(jqTag);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:42:59.443

在常规 HTML 中放置一个 div 表示 jquery 没有加载，然后用 jquery 隐藏它

```
<div class="jqueryError">
  <a> jquery did not load </a>
</div>

$(function(){
  $('jqueryError').hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:48:14.840

如果您连接到互联网，我假设您想加载 jquery？

你可以试试这个：

```
function loadJQuery() {
  if (navigator.onLine(connected)) {
    google.load("jquery", "1.4.1");
  } else {
    document.getElementById('jquery_loader').src = '/javascripts/jquery.js';
  }
 } 
```

但请记住，如果您在离线测试，您可以使用它，但它在网站上毫无用处，因为每个人都将连接到互联网才能访问您的网站。

# javascript - 如何开始使用旧版 1.2.0.RC4 TideSDK？

> ID：12547910
> 
> 赞同：4
> 
> 时间：2012-09-22T21:38:35.827
> 
> 标签：javascript, html, css, desktop-application, tidesdk

我已经从[http://tidesdk.org](http://tidesdk.org)下载了旧版 1.2.0.RC4 。下载后我该怎么办。我该如何开始？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-22T21:38:35.827

## 路上的综合指南

TideSDK 是一个开源软件开发工具包，用于使用 HTML5、CSS3 和 JavaScript 创建多平台桌面应用程序。借助 TideSDK，您还可以使用 Python、PHP 或 Ruby 等其他常见脚本语言来利用您作为 Web 开发人员已经具备的技能。TideSDK 是使用简单的 Web 技术创建独特的桌面应用程序的最佳方式。

TideSDK 团队目前正在准备全面的指南来支持我们的用户。当它们可用时，这些指南将与 API 文档一起托管在：

*   [http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide)

由于许多指南即将完成，请经常回来查看。

注意：TideSDK 正在完成从以前的 Titanium Desktop 到更名和更新的 TideSDK 的过渡。因此，旧版 1.2.0.RC4 将是短暂的，因为 TideSDK 1.3.0 的目标是在 2012 年 9 月结束。尽管如此，旧版 1.2.0.RC4 将让您立即开始您的桌面应用程序开发。由于 TideSDK 1.3.0 没有 API 更改，您可以期望在 1.2.0.RC4 中创建的所有内容都可以在即将发布的版本中使用。尽管您需要注意命名空间的变化。在旧版 1.2.0.RC4 中，API 的命名空间是“Titanium”。在即将发布的 TideSDK 1.3.0 中，命名空间已缩短为“Ti”。为了准备命名空间更改，您可以将以下内容添加到您的代码中：

```
var Ti = Titanium; 
```

在对 SDK 进行 API 调用之前，将其包含在 JavaScript 中的某个位置。当 TideSDK 1.3.0 发布时，您可以删除此行。

要及时了解即将发布的 TideSDK 1.3.0 版本的公告和时间安排，请在 Twitter 上关注我们：

*   [http://twitter.com/TideSDK](http://twitter.com/TideSDK)

或加入我们的邮件列表：

*   [https://groups.google.com/forum/#!forum/tidesdk](https://groups.google.com/forum/#!forum/tidesdk)

## 1.2.0.RC4 平台支持

旧版 1.2.0.RC4 SDK 可用于以下平台：

*   MacOSX 10.6.x 雪豹（使用 Xcode 3.x）
*   Ubuntu 10.10 x86
*   Ubuntu 10.10 x86-64
*   Ubuntu 10.10 x86-64
*   Ubuntu 11.04 x86
*   视窗 7 x86
*   视窗 7 x86-64
*   视窗 XP x86

注意：对最新操作系统版本的支持限制是一个已解决的短期问题。如果您使用的是 OSX Lion 或 Mountain Lion，一个可能的短期解决方案是安装 Windows 虚拟机，直到 TideSDK 1.3.0 发布。TideSDK 1.3.0 将带来更新和升级库以支持以下内容：

*   Ubuntu 12.04 x86
*   Ubuntu 12.04 x86-64
*   MacOSX 10.7.x Lion (Xcode 4.x) x86-64
*   MacOSX 10.8.x 山狮 (Xcode 4.x) x86-64
*   视窗 XP x86
*   视窗 7 x86
*   视窗 7 x86-64
*   视窗 8 x86
*   视窗 8 x86-64

## 从下载到打包的简单步骤

以下步骤将帮助您执行以下操作：

*   为您的平台安装 SDK
*   安装帮助应用程序（帮助您创建和运行应用程序以进行开发）
*   克隆并导入一个 Hello World 示例应用程序以进行试验
*   为您的平台在本地打包应用程序

### 第 1 步：下载并解压 SDK

要获取 SDK，请访问潮汐dk.org 并单击“下载 1.2.0.RC4”按钮。

*   [https://github.com/TideSDK/TideSDK/downloads](https://github.com/TideSDK/TideSDK/downloads)

1.2.0.RC4 SDK 必须解压到您操作系统的特定文件夹中：

对于 Mac OSX：

```
/Library/Application Support/Titanium 
```

在 Linux 上：

```
~/.titanium 
```

在 Windows XP 上：

```
C:\Documents and Settings\All Users\Application Data\Titanium 
```

在 Windows 7 上：

```
C:\ProgramData\Titanium 
```

zip 文件将展开内容并为 1.2.0.RC4 创建/覆盖一些新目录。

注意：随着 TideSDK 1.3.0 的发布，SDK 将安装在 TideSDK 文件夹中，而不是 Titanium。

### 第 2 步：下载 TiDev 社区应用程序

虽然 TideSDK 只能与基本的文本编辑器一起使用，但在您了解更多有关 SDK 的信息之前，建议您使用应用程序来创建、运行和捆绑您的应用程序。

“TiDev 社区”应用程序适合此目的。当“TiDev 社区”的使用寿命即将结束时，TideSDK Builder 将很快取而代之。TideSDK 团队希望将 TideBuilder 与官方 TideSDK 1.3.0 版本捆绑在一起。

要获取“TiDev 社区”，请从此处下载您支持的平台：

*   [http://api.appcelerator.net/p/pages/app_page?token=m4rZLSv6](http://api.appcelerator.net/p/pages/app_page?token=m4rZLSv6)

### 第 3 步：获取 Hello World 示例应用程序

对于第一个应用程序，一个简单的 Hello World 示例是一个很好的介绍。Hello World 应用程序说明了以下内容：

*   使用 API 创建菜单
*   使用简单的回调将菜单项添加到菜单以提示用户退出应用程序
*   使用 HTML 和 CSS 显示内容。

要获取 TideSDK-HelloWorld 应用程序，您可以在安装了 git 的情况下克隆该应用程序，或者只需从以下位置下载 zip：

*   [https://github.com/TideSDK/TideSDK-HelloWorld](https://github.com/TideSDK/TideSDK-HelloWorld)

### STEP 4：将示例应用程序导入 TiDev 社区

要将 Hello World 示例应用程序导入 TiDev，请单击左上角的“导入”按钮，导航到包含该应用程序的文件夹并选择它。

### 第 5 步：运行示例应用程序

要运行 Hello World 应用程序，请单击 TiDev 菜单中的“Test & Package”按钮，然后单击左下方的“Launch App”按钮。Hello World 应用程序将启动并开始登录到屏幕。您包含在代码中的调试语句将出现。

### 第 6 步：使用 CLI 在本地打包示例应用程序

当 Appcelerator 将重点转移到移动端时，他们删除了曾经可用的 Titanium Desktop 的网络打包和更新服务。尽管如此，本地打包一直是捆绑您的应用程序以进行分发的最佳选择之一。事实上，Appcelerator 的服务在服务器（您在本地使用）上使用了相同的进程。

在旧版 SDK 中，提供了一个小型 CLI 应用程序 tibuild.py。您将在 SDK 的根文件夹中找到 tibuild.py（适用于您的平台）。您可以使用此工具来运行您的应用程序或将其捆绑以进行分发。tibuild.py 具有可以显示其可用选项的内置帮助。

使用 CLI 打包应用程序：

```
python tibuild.py --dest=. --type=bundle --package=. "c:\path\to\your\app\dir" 
```

注意：您目前只能进行捆绑包装。调整路径，使其适合您的平台。

This should build and package your app and create a installer for it. Change "dest" and "package" to the directories where you want to have the built app and installation package.

You can omit the OS parameter, since the builder can only generate builds for the current OS.

## Additional Information

If you need more help while the comprehensive guides are being prepared, please post your questions here on stackoverflow or consult our other support channels listed on our site at [http://tidesdk.org](http://tidesdk.org).

# delphi - 可以在 Delphi XE 中提供“未使用”的类吗

> ID：12547913
> 
> 赞同：7
> 
> 时间：2012-09-22T21:38:45.233
> 
> 标签：delphi, delphi-xe, rtti

我在Delphi XE，Windows 7中工作。

在应用程序中，我想为我的用户选择不同的报告类型。为此，我有 1 个基本报告类和每个报告类型（xml、csv、ppt 等）的子类。

```
{Just an illustrating example}
TBaseReport = class
public
  constructor Create;
  procedure GenerateReport; virtual; abstract;
  class function ReportType: string; virtual; abstract;
end;

T*Report = class(TBaseReport);
//Etcetera. 
```

我想要做的是使用 Rtti 来检测所有报告类并列出它们的 ReportType。之后，我想使用 Rtti 创建所选报表类的实例并调用 GenerateReport。总而言之，这并不太难实现。

但是有一个主要缺点：我从不对降级类的使用进行硬编码，因此代码不会包含在可执行文件中。

*有没有一种体面的方法可以强制链接器/编译器包含这些类？*

一个（n丑陋的）解决方法是在其初始化部分模拟报告的使用，但我宁愿不这样做。更好的解决方案是使基类持久化并调用 'RegisterClass(T*Report);' 在初始化部分。它有效，但我认为没有任何其他需要让它们持久化，所以再次，我宁愿不这样做。另一方面，也许这是唯一的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T23:39:23.760

您可以创建自己的 RegisterClass 版本。像 RegisterReportClass 这样的东西。在内部，您保留自己的可以使用的报告类列表。您的注册函数将采用 TBaseReport 类类型 - 不需要 TPersistent。

应在初始化部分调用 RegisterReportClass 方法，确保包含这些类。

如果您查看图形单元，您可以看到 TFileFormatsList = class(TList)。这是用于保存不同图形类型的类，可用作创建您自己的 TReportFormatsList 的示例。Delphi 使用静态函数 TPicture.RegisterFileFormat 将项目添加到其内部列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T00:21:01.707

您可以使用[`{$STRONGLINKTYPES ON}`](http://docwiki.embarcadero.com/RADStudio/XE/en/Strong_link_types_%28Delphi%29)编译器指令将应用程序的所有符号包含在最终的 exe 中，请记住，此选项会增加可执行文件的大小，因为可执行文件中包含更多 RTTI。

# java - 多线程中的 Snmp Walk

> ID：12547914
> 
> 赞同：0
> 
> 时间：2012-09-22T21:38:49.867
> 
> 标签：java, multithreading, snmp

当我 snmpWalk 一个 ip 时，需要 5 秒。但是，如果我在 for 循环中发送 snmpWalk 请求，则步行时间会增加。关于以多线程方式使用 snmp 或仅使用 ExecutorService 有什么好的做法吗？我使用了 ExecutorService，当线程数更多时，它也会减慢 snmp 请求。我的方法可能有问题，我不知道。如果还有其他想法，我会应用它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:13:58.427

如果 SNMP 代理以单线程、顺序模式响应，那么您将使用多少次 snmpwalk 并不重要。用请求重载代理只会减少响应时间。因此，如果您能够启用 SNMP 代理以多线程方式工作，请执行此操作并检查加速因素是什么，如果有的话......

您可以使用版本 2 或 3 中的 SNMP 和 snmpbulkwalk 来加速 walk 命令。由于批量模式，这种方法减少了网络流量 - 我希望使用这种方法可以加快速度。

# c# - 线程 vs 计时器 vs 服务

> ID：12547916
> 
> 赞同：0
> 
> 时间：2012-09-22T21:38:59.597
> 
> 标签：c#, .net

我正在阅读关于某个名为 stackoverflow 的页面的徽章系统的博客[Easy Background Tasks](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)：P，因此，在评论中说他们以执行任务的服务结束，但例如：

用户在 T1 时间执行操作 此操作取决于 X 个用户 在 T2 时间之后，您需要执行一些数据库查询并通知用户（电子邮件或其他）

我这样说是因为实时体验，所以这里的问题是，如果你使用线程，假设你有 1000 个执行操作的用户，你将有 1000 个等待线程，所以在一段时间内，会出现 reciclyng，或者如果服务器由于某种原因关闭，您将丢失所有这些任务。使用计时器将在相同的情况下结束

如果您使用服务，您将失去实时体验，例如在线游戏中。

那么，如何处理这种东西呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:45:55.467

使用线程和信号时应该小心。解决方案取决于场景的细节，但可扩展的解决方案之一是**轮询**。

根据您的情况，线程之间的信号传输效率不高，因为线程池中的可用线程数量总是有限的。但是，如果您知道将持有线程的最大用户数（取决于游戏设计），您可以使用使用 WaitHandles（AutoResetEvent 和/或 ManualResetEvent）的信号在线程之间发出信号。但请确保您在 Global.asax 的 Application_Start 事件处理程序中增加了池中的可用线程数

```
 int availableThreads;

            int availablePorts;

            ThreadPool.GetAvailableThreads(out availableThreads, out availablePorts);

            ThreadPool.SetMinThreads(availableThreads, availablePorts); 
```

希望能帮助到你。

# c++ - 结构向量的值意外变化

> ID：12547918
> 
> 赞同：3
> 
> 时间：2012-09-22T21:39:11.550
> 
> 标签：c++, structure, stdvector

我有一个奇怪的问题。有一个结构向量。使用临时结构，我 push_back 到该结构向量。但是当我检查第一个成员的`cnt`时，我发现它已经改变了。任何的想法？（以下代码为简化版，但具有代表性）

```
struct Vector
{
  float *dim;

  Vector ()
  {
    dim = new float [3];
  }
};

struct Face
{
  float an_N, an_P;
  int P, N;
  Vector Af;
  float Ad;
  Vector cnt;
  float ifac;
  float mf;
};

std::vector <Face> face;

Face temp_face;

for (;;)
{
    temp_face.cnt.dim[0] = 0.f;
    temp_face.cnt.dim[1] = 0.f;
    temp_face.cnt.dim[2] = 0.f;

    for (int q=0; q<n_vtx_2D; ++q)
    {
        temp_face.cnt = temp_face.cnt + pt[vtx[q]] / n_vtx_2D;                
    }                 

    face.push_back(temp_face);
}

std::cout << face[0].cnt.dim[0] << std::endl; 
```

**输出**

0.25

0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T21:43:59.480

默认编译器生成的复制构造函数（和赋值运算符）用于`Vector`和`Face`（但最重要的是`Vector`）。由于代码重用了 的同一个实例`Face`，命名为，向量中的`temp_face`所有实例都指向同一个数组（因为将包含 的副本）。`Face``face``Face.cnt.dim``faces``temp_face`

我看不出有任何理由在里面动态分配数组，`Vector`因为它是固定大小的。建议改为：

```
struct Vector
{
    float dim[3];
}; 
```

或者你需要为`Vector`. 请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)了解更多信息。

# sql-server - Visual Studio 2012 的数据库资源管理器中缺少图表文件夹

> ID：12547925
> 
> 赞同：6
> 
> 时间：2012-09-22T21:40:42.047
> 
> 标签：sql-server, database-design, visual-studio-2012, database-diagramming

我正在设计一个网站时突然数据库图表文件夹从数据库资源管理器中消失了。我不知道发生了什么以及现在该做什么，因为我迫切需要它来继续我的工作 - 手动将表添加到数据库不是我的选择。

找了一天的解决办法，还重新安装了Visual Studio和本地IIS服务器，但是一点用处都没有。

有什么方法可以恢复该功能，或者至少有任何免费工具可以在 Windows 8 x64 上运行并且具有用于 MSSQL 2008 的基于图表的数据库设计器？

# ****编辑****

**微软似乎故意删除了图表。这在业务逻辑中是非常合乎逻辑的——如果有人在 Visual Studio 中构建了基本工具（图表），为什么还要购买 Server Management Studio？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:43:17.257

1) 数据库图是 SQL Server 的一项功能，而不是 Visual Studio。我不确定 VS 使用什么来显示该文件夹，但您可能想与您的 DBA 进行验证或检查数据库的配置，看看是否有人只是[禁用了使用图表的能力](https://stackoverflow.com/questions/525610/how-to-remove-diagramming-support-objects-from-sql-server)。您是否也尝试过刷新与数据库服务器的连接？

2）如何手动将表添加到数据库不是一种选择？如果你让自己依赖于以一种方式做事，而且只依赖于那一种方式，那么你就会在未来的项目中为灾难做好准备，就像你现在的项目一样。在 VS 中还有其他方法可以创建表格，它可能不是图表提供的图形图片。

3) 您是否通过 SSMS 查看了数据库，查看图表文件夹是否显示在那里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T04:48:31.510

您好，这是对我有用的解决方案，使我能够在 Visual Studio 2012 中使用数据库图表 ide！

首先我安装了 SQL Server Management Studio。然后我注意到我的计算机服务中仍然没有 SQLEXPRESS 服务或 SQL 代理浏览器。这就是为什么我认为我无法登录任何令人讨厌的 SSMS。然后我下载了 SQL Server Express R2，然后我运行了另一个很好的设置。我也确实选择为 SQL Server Express 设置一个 sql server 密码。

安装后，我通过右键单击“我的计算机”/“管理”/“服务”仔细检查以确保服务正在运行——向下滚动直到看到“SQL Server (SQLEXPRESS)”并确保该服务已启动以及“SQL Server Agent ( SQLEXPRESS）”（当我检查时这个已关闭）..然后我能够毫无问题地登录到 SSMS。

然后我创建了一个新数据库，像我们在 VS 中所做的那样右键单击图表，并创建了一个包含两个表的图表，创建了它们的关系等等等等。

然后我在 vs 2012 中创建了一个新网站，我在 SERVER EXPLORER 中单击了“连接到数据库”

我选择我的服务器名称，使用 Windows 身份验证并选择我刚刚在 SSMS 中创建的数据库。

然后令我惊讶的是，我现在在 Visual Studio 2012 中设计了数据库图表。最后！

感谢微软删除了这样一个很酷的功能，它现在让我们的开发人员有一些事情要做。

希望这可以帮助。**

# google-chrome - 为什么 chrome.storage.local.get 会导致 XML 页面崩溃？

> ID：12547933
> 
> 赞同：0
> 
> 时间：2012-09-22T21:41:51.253
> 
> 标签：google-chrome, google-chrome-extension, local-storage

我正在开发一个谷歌浏览器扩展。一切正常，除了扩展程序导致页面在查看 XML 文件（例如站点地图）时崩溃。

我已将问题缩小到使用 chrome.storage.local 并且在取出时不会出现问题。

我意识到这不是一个主要问题，因为大多数人很少在浏览器中查看 XML 文件，但是作为开发人员，我经常查看站点地图和其他 XML 文件，这真的让我很烦。

我无法在谷歌上找到有关此的任何其他信息。这是 chrome.storage 的错误还是完全是别的东西？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:05:51.907

已提交错误报告：[https ://code.google.com/p/chromium/issues/detail?id=151838&q=chrome.storage%20XML&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status% 20所有者%20总结](https://code.google.com/p/chromium/issues/detail?id=151838&q=chrome.storage%20XML&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

同时，我正在使用此代码作为解决方法：

```
var isXML = new RegExp(".+\\.[Xx][Mm][Ll](\\?|$)", "i").test(window.location.href);
if (isXML == false) { RunExtension(); } 
```

希望这对其他人有帮助。

# python - 在表达式中分隔运算符和操作数的 Pythonic 方法

> ID：12547938
> 
> 赞同：0
> 
> 时间：2012-09-22T21:42:29.447
> 
> 标签：python

我正在尝试将运算符（包括括号）和表达式中的操作数分开。例如给定一个表达式

```
expr = "(32+54)*342-(4*(3-9))" 
```

我想得到

```
['(', '32', '+', '54', ')', '*', '342', '-', '(', '4', '*', '(', '3', '-', '9', ')', ')'] 
```

这是我写的代码。有没有更好的方法在python中做到这一点。

```
l = list(expr)
n = ''
expr = []
try:
  for c in l:
    if c in string.digits:
      n += c
    else:
      if n != '':
        expr.append(n)
        n = ''
      expr.append(c)
finally:
  if n != '':
    expr.append(n) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:48:28.367

我们可以这样做[`re.split()`](http://docs.python.org/library/re.html#re.split)：

```
>>> import re
>>> expr = "(32+54)*342-(4*(3-9))"
>>> re.split("([-()+*/])", expr)
['', '(', '32', '+', '54', ')', '', '*', '342', '-', '', '(', '4', '*', '', '(', '3', '-', '9', ')', '', ')', ''] 
```

这确实插入了一些空字符串，但这些可能可以很容易地处理或剥离。例如，[列表理解](http://www.youtube.com/watch?v=t85uBptTDYY&list=UUAuqj5Bs5mTTl1mIVDmuAlw&index=1&feature=plcp)：

```
>>> [part for part in re.split("([-()+*/])", expr) if part]
['(', '32', '+', '54', ')', '*', '342', '-', '(', '4', '*', '(', '3', '-', '9', ')', ')'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:52:50.153

如果您只是尝试标记流，那么您的方法很好，但有些过时。您可以使用[正则表达式](http://docs.python.org/library/re.html)，更轻松地拆分标记。

但是，如果您还想对标记做一些事情（例如评估它们），那么我建议您查看一个可以处理递归（正则表达式无法处理递归）的解析模块，例如[pyparsing](http://pyparsing.wikispaces.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:54:11.200

Python：[包括电池](http://docs.python.org/library/tokenize.html)。

```
>>> [x[1] for x in tokenize.generate_tokens(StringIO.StringIO('(32+54)*342-(4*(3-9))').readline)]
['(', '32', '+', '54', ')', '*', '342', '-', '(', '4', '*', '(', '3', '-', '9', ')', ')', ''] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T22:44:32.420

```
>>> if True:
    exp=[]
    expr = "(32+54)*342-(4*(3-9))"
    flag=False
    for i in expr:
        if i.isdigit() and flag:
            exp.append(str(exp.pop(len(exp)-1))+i)
        elif i.isdigit():
            flag=True
            exp.append(i)
        else:
            flag=False
            exp.append(i)
    print(exp)

['(', '32', '+', '54', ')', '*', '342', '-', '(', '4', '*', '(', '3', '-', '9', ')', ')']
>>> 
```

# python - 不能 QWidget 边距，小部件之间的空白空间

> ID：12547945
> 
> 赞同：1
> 
> 时间：2012-09-22T21:43:52.943
> 
> 标签：python, qt, margin, padding, qwidget

我的 QT 代码中的小部件之间存在空白空间问题。我尝试了填充，边距，但没有...

尝试在 QWidget、QVBoxLayout 上设置样式和 setMargin 但没有任何结果。

截图：http: [//imageshack.us/a/img515/4796/gami.png](http://imageshack.us/a/img515/4796/gami.png)

```
def __init__(self, GamiObject):
    """ Create initial window to put contents of installer to (layout) """

    self.Gami = GamiObject
    self.app = QApplication(sys.argv)
    self.window = QWidget()
    self.window.setWindowTitle("Instalator systemu Gentoo Linux")

    self.window.setMinimumSize(600, 350)
    self.layout = QVBoxLayout()
    self.layout.setMargin(0)

    # Title layout {
    TLay = QWidget()
    TLay.setAttribute(Qt.WA_TranslucentBackground, True)
    TLay.setStyleSheet("margin: 0; padding: 0; background-color: rgb(20,20,20, 50%);")
    TLay.setMaximumHeight(80)  
    TLay.setMinimumHeight(80)

    TLayStyle = QHBoxLayout()
    #TLayStyle.setAttribute(Qt.WA_TranslucentBackground, True)
    TLayStyle.addWidget(QLabel("Etap 1/4 - wybor lokalizacji"))

    TLay.setLayout(TLayStyle)
    # Title layout }

    # Empty space {

    self.Content = QFrame()

    # Empty Space }

    # Down layout {
    HBox = QWidget()
    HBoxLayout = QHBoxLayout()
    HBoxLayout.setSpacing(10)
    HBoxLayout.setMargin(0)

    buttonBack = QPushButton("Wstecz")
    buttonNext = QPushButton("Dalej")

    # Signals
    self.window.connect(buttonBack, SIGNAL("clicked()"), self.Gami.previousStep)
    self.window.connect(buttonNext, SIGNAL("clicked()"), self.Gami.nextStep)

    self.Gami.Hooking.connectHook("Gami.previousStep", self.buttonPrevious)
    self.Gami.Hooking.connectHook("Gami.nextStep", self.buttonNext)

    #buttonBack.setMinimumWidth(50)
    buttonBack.setMaximumWidth(100)
    buttonBack.setMinimumWidth(90)
    buttonBack.setMinimumHeight(45)
    buttonBack.setDisabled(True)

    #buttonNext.setMinimumWidth(50)
    buttonNext.setMaximumWidth(100)
    buttonNext.setMinimumWidth(90)
    buttonNext.setMinimumHeight(45)

    HBoxLayout.addWidget(buttonBack, 1, alignment=Qt.Alignment(2))
    HBoxLayout.addWidget(buttonNext, 0, alignment=Qt.Alignment(2))
    HBox.setLayout(HBoxLayout)
    HBox.setStyleSheet("margin: 4px;")

    # Down layout }

    self.layout.addWidget(TLay)
    self.layout.addWidget(self.Content, 1)
    self.layout.addWidget(HBox)

    self.window.setLayout(self.layout)
    self.window.show()

    self.app.exec_() 
```

# c - 如何将 char * 放入数组以便我可以在 qsort 中使用它，然后转到下一行

> ID：12547946
> 
> 赞同：1
> 
> 时间：2012-09-22T21:43:55.553
> 
> 标签：c, pointers, qsort

我有 lineget 函数返回`char *`（它检测到`'\n'`）和`NULL`on `EOF`。在`main()`我试图识别该行中的特定单词。我使用了strtok：

```
int main(int argc, char **argv)
{
    char *line, *ptr;
    FILE *infile;
    FILE *outfile;
    char **helper = NULL;
    int strtoks = 0;
    void *temp;

    infile=fopen(argv[1],"r");
    outfile=fopen(argv[2],"w");

    while(((line=readline(infile))!=NULL))
    {
        ptr = strtok(line, " ");

        temp = realloc(helper, (strtoks)*sizeof(char *));
        if(temp == NULL) {
            printf("Bad alloc error\n");
            free(helper);
            return 0;
        } else {
            helper=temp;
        }
        while (ptr != NULL) {
            strtoks++;
            fputs(ptr, outfile);
            fputc(' ', outfile);
            ptr = strtok(NULL, " ");
            helper[strtoks-1] = ptr;
        }
        /*fputs(line, outfile);*/
        free(line);
    }
    fclose(infile);
    fclose(outfile);
    return 0;
} 
```

现在我不知道如何将每个标记化的单词放入一个数组（我`char ** helper`为此目的创建），以便它可以在`qsort`like中使用`qsort(helper, strtoks, sizeof(char*), compare_string);`。

广告。2 即使它会起作用 - 我不知道如何清除该行，然后继续对下一行进行排序。怎么做？

我什至使 valgrind 崩溃（使用上面提供的代码）->“valgrind：‘不可能’发生了：被致命信号杀死”

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:18:15.257

正如您在`strtok`的原型中看到的：

```
char * strtok ( char * str, const char * delimiters ); 
```

……`str`不是`const`。实际上所做的是`strtok`将找到的分隔符替换为空字节 ( `\0`)`str`并返回指向令牌开头的指针。

每个例子：

```
char in[] = "foo bar baz";
char *toks[3];

toks[0] = strtok(in, " ");
toks[1] = strtok(NULL, " ");
toks[2] = strtok(NULL, " ");

printf("%p %s\n%p %s\n%p %s\n", toks[0], toks[0], toks[1], toks[1], 
                                toks[2], toks[2]);
printf("%p %s\n%p %s\n%p %s\n", &in[0], &in[0], &in[4], &in[4], 
                                &in[8], &in[8]); 
```

现在看看结果：

```
0x7fffd537e870 foo
0x7fffd537e874 bar
0x7fffd537e878 baz
0x7fffd537e870 foo
0x7fffd537e874 bar
0x7fffd537e878 baz 
```

如您所见，`toks[1]`并`&in[4]`指向同一个位置：原件`str`已被修改，实际上所有标记都`toks`指向`str`.

在您的情况下，您的问题是您免费`line`：

```
free(line); 
```

...使您的所有指针无效`helper`。如果您（或）在 freeing 之后`qsort`尝试访问，您最终会访问已释放的内存。`helper[0]``line`

您应该改为*复制*令牌，例如：

```
ptr = strtok(NULL, " ");
helper[strtoks-1] = malloc(strlen(ptr) + 1);
strcpy(helper[strtoks-1], ptr); 
```

显然，您需要释放`helper`之后的每个元素（除了`helper`自身之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:25:43.553

最明显的问题（可能还有其他问题）是您在行首将帮助器重新分配给 strtoks 的值，但随后递增 strtoks 并以更高的 strtoks 值添加到数组中。例如，在第一行，strtoks 为 0，因此`temp = realloc(helper, (strtoks)*sizeof(char *));`将 helper 保留为`NULL`，但随后您尝试将该行上的每个单词添加到 helper 数组中。

我会建议一种完全不同的方法，它在概念上更简单：

```
char buf[1000]; // or big enough to be bigger than any word you'll encounter
char ** helper;
int i, numwords;

while(!feof(infile)) { // most general way of testing if EOF is reached, since EOF 
                       // is just a macro and may not be machine-independent.
    for(i = 0; (ch = fgetc(infile)) != ' ' && ch != '\n'; i++) { 
        // get chars one at a time until we hit a space or a newline
        buf[i] = ch; // add char to buffer
    }
    buf[i + 1] = '\0' // terminate with null byte
    helper = realloc(++numwords * sizeof(char *)); // expand helper to fit one more word
    helper[numwords - 1] = strdup(buffer) // copy current contents of buffer to the just-created element of helper
} 
```

我还没有测试过，所以如果它不正确或者有什么你不明白的，请告诉我。我省略了文件的打开和关闭以及最后的释放（请记住，在释放助手本身之前，您必须释放助手的每个元素）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T22:36:19.897

您应该收到“Bad alloc”错误，因为：

```
char **helper = NULL;
int strtoks = 0;

...

while ((line = readline(infile)) != NULL)  /* Fewer, but sufficient, parentheses */
{
    ptr = strtok(line, " ");

    temp = realloc(helper, (strtoks)*sizeof(char *));
    if (temp == NULL) {
        printf("Bad alloc error\n");
        free(helper);
        return 0;
    } 
```

这是因为 的值`strtoks`为零，因此您要求`realloc()`释放指向的内存`helper`（它本身是一个空指针）。一个外部机会是您的库崩溃了`realloc(0, 0)`，它不应该发生这种情况，但这是一个可能被忽视的奇怪的边缘情况。另一种可能性是`realloc(0, 0)`返回一个指向不允许取消引用的 0 字节数据的非空指针。当您的代码取消引用它时，它会崩溃。C 标准允许返回 NULL 和返回非 NULL；无论显示哪种行为，都不要编写崩溃的代码`realloc()`。（如果您的实现`realloc()`没有返回非 NULL 指针`realloc(0, 0)`，那么我怀疑您没有向我们准确展示导致崩溃的代码`valgrind`（这是一个公平的成就——恭喜你）因为你没有看到程序在控制下终止，因为它应该`realloc(0, 0)`返回 NULL。）

如果您使用以下方法，您应该能够避免该问题：

```
 temp = realloc(helper, (strtoks+1) * sizeof(char *)); 
```

不要忘记`strtoks`在某个时候增加自己。

# javascript - AciveMQ 演示吞下消息

> ID：12547947
> 
> 赞同：0
> 
> 时间：2012-09-22T21:43:56.930
> 
> 标签：javascript, websocket, activemq, stomp

当我尝试 ActiveMQ (http://localhost:8161/demo/websocket/) 的 websocket 聊天演示时，似乎并非所有消息都在两个不同的浏览器实例之间传输。出于某种原因，只有每第二条消息都会发送到其中一个浏览器。

有人对此有解释吗？这是我需要配置的东西吗？

编辑：也许我应该补充一点，我使用 stomp 作为默认设置的有线协议（只是将配置文件更改为使用 websockets）。

[Edit2：按照http://www.jmesnil.net/stomp-websocket/doc/](http://www.jmesnil.net/stomp-websocket/doc/)给出的示例时，我找不到任何行为差异。但是，我注意到一个有趣的效果：当使用 3 个客户端实例时，我可以观察到发送客户端收到了第一条消息，第二个客户端（而不是其他任何一个）收到了第二条消息，并且收到了第三条消息在第三个客户端。我原以为所有客户端都会同时收到消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:29:09.217

我发现了导致问题的原因：在我使用的示例中，客户端订阅了一个队列，而不是一个主题（'/queue/test'）。使用主题按我的预期工作（发布-订阅模式）。我猜当它使用队列时，消息被客户端放入队列并被任何其他客户端拾取（并立即被消费）。

# css - 无法将 div 隐藏在视口之外

> ID：12547949
> 
> 赞同：0
> 
> 时间：2012-09-22T21:44:03.573
> 
> 标签：css, media-queries

当视口小于 960px 时，我想将绝对定位的 div 隐藏在视口之外。这是带有隐藏规则的 div 和媒体查询的 css：

```
@media all and (max-width: 960px) {
    .newsbox{
        right:-355px;
    }

}  

.newsbox{
    position:fixed;
    right:0;
    top:0;
    height:100%;
    background:#fff;
    z-index:900;
    width:395px;
    overflow:hidden;
    background:#f7f7f7;
} 
```

谁能解释一下为什么当浏览器窗口不超过 960 像素时这条规则不隐藏这个元素？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:45:50.867

您的`@media`规则需要放在下面，否则级联将导致您的外部`.newsbox`规则始终优先并覆盖`right`您的内部规则中的样式`.newsbox`，无论您的媒体查询是否生效：

```
.newsbox {
    position: fixed;
    right: 0;
    top: 0;
    height: 100%;
    background: #fff;
    z-index: 900;
    width: 395px;
    overflow: hidden;
    background: #f7f7f7;
}

@media all and (max-width: 960px) {
    .newsbox {
        right: -355px;
    }
} 
```

# c# - Facebook -> 查看朋友的朋友

> ID：12547956
> 
> 赞同：0
> 
> 时间：2012-09-22T21:45:29.743
> 
> 标签：c#, facebook

> **可能重复：**
> [在 facebook 上获取朋友的朋友列表](https://stackoverflow.com/questions/1330123/get-a-list-of-friends-of-a-friend-on-facebook)

我想对我的学校社交网络进行研究。我将在 facebook 的帮助下映射这个网络。看到我朋友的朋友很重要（他们的 ID 就足够了）。使用 Graph api 我只能列出我的朋友。当我尝试查找我朋友的朋友时，我收到一个错误：“不支持的操作，FacebookApiException，代码 100”。我读过这个 API 不再支持这个操作了。我想我可以通过制作一个桌面 facebook 客户端应用程序来解决这个问题，但是我找不到任何关于使用 c# API 使用我自己的用户名和密码登录的信息。有 Facebook 开发者工具包，但它似乎已经过时了。值得一试吗？或者你对我的问题有什么解决方案吗？

ps.：当然，应用程序和用户令牌一切正常

# database - 如何设置 cron 作业以使用 cPanel 删除旧的数据库记录？

> ID：12547964
> 
> 赞同：1
> 
> 时间：2012-09-22T21:46:51.503
> 
> 标签：database, cron, crontab, cpanel, sql-delete

我设置了 CRM，并启用了 CRM 的登录功能。日志存储在名为 crm 的特定数据库和名为 crm_logging 的表中。我希望删除任何早于某个日期（比如 7 天）的记录，以便日志表不会变得太大。

我以前没有做过 cron 作业的经验，我想知道如何使用 cPanel 的内置 Cron Jobs 页面来设置一个 cron 作业来执行此操作？

我读过它看起来像：

```
DELETE FROM [table] WHERE [column] < DATE_SUB(NOW(), INTERVAL 7 DAY); 
```

但我不确定在我把那段代码放入之前是否需要包含这样的东西：

```
mysql -u <username> -p<password> -h <name-of-mysql-server> <databasename> -e "<YOUR-QUERY-HERE>" 
```

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:46:19.477

```
mysql -u <username> -p<username_password> -h <name-of-mysql-server> <databasename> -e "<YOUR-QUERY-HERE>" 
```

替换正确：对于有权访问主机 MySQL 的用户，获取该用户的位置密码

你看，你必须使用**-p**或**--password=**

# linux - 杀死 lxsession (xorg) 后运行脚本

> ID：12547971
> 
> 赞同：1
> 
> 时间：2012-09-22T21:47:49.757
> 
> 标签：linux, bash, xorg, tty, raspberry-pi

在终止 LXDE 会话后，我试图在 bash 脚本中自动运行程序。我的脚本包括：

```
#!/bin/sh
pkill lxsession;
sh /home/pi/RetroPie/EmulationStation/emulationstation 
```

我也试过这个：

```
#!/bin/sh
nohup & pkill lxsession & 
writevt /dev/tty1 'emulationstation' 
```

我的目标是退出 LXDE 会话并使用 bash 脚本在我的 Raspberry Pi 上运行 EmulationStation。我`pkill lxsession;`用来绕过 lxsession 的注销确认对话框。

就目前而言，这个脚本只是让我从一个工作的 LXDE 桌面进入命令行。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:50:10.690

EmulationStation 不需要在后台运行某种 X 服务器才能正常工作吗？

如果没有，请尝试以下操作：

```
#!/bin/sh
pkill lxsession;

sleep 5
su -c sh /home/pi/RetroPie/EmulationStation/emulationstation

exit 
```

也可能是当您退出 lxde 会话时，仿真站有一个用户外壳可以打开它，因此“su -c”我不确定它是否可以工作，但我希望你能解决它。:)

# ruby-on-rails - 在 Mongoid 中，我如何创建一个数组或带有数量的引用

> ID：12547972
> 
> 赞同：3
> 
> 时间：2012-09-22T21:47:52.830
> 
> 标签：ruby-on-rails, mongodb, model, mongoid

我有一个

```
class Item
  include Mongoid::Document
  field name, type: String
end 
```

和一个

```
class Pack
  include Mongoid::Document
end 
```

每个包可以包含不同数量的不同项目。

我最初想做

```
class Pack
  include Mongoid::Document

  field items, type: Array
end 
```

起初，我尝试

```
a = Pack.new
a.items = []
a.items << {item: Item.first, quantity: 4}
a.save 
```

我得到了：

```
NoMethodError: undefined method `__bson_dump__' for #<Item:0x007faf1a56d670> 
```

然后我尝试了：

```
a = Pack.new
a.items = []
a.items << {item_id: Item.first.id, quantity: 4}
a.save 
```

但现在我不能做类似的事情

```
a.items[0].item.name 
```

接下来，我尝试了

```
class Item
  include Mongoid::Document
  field name, type: String
  belongs_to :item_quantity
end

class ItemQuantity
  include Mongoid::Document
  has_one :item
  belongs_to :pack
  field quantity, type: Integer
end

class Pack
  include Mongoid::Document
  has_many :item_quantity
end 
```

哪个有效，但感觉像一个杂物

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:47:25.757

您的最后一次迭代与我过去解决类似问题的方式接近。我会尽量适应你的情况。我所做的主要不同之处在于不将数量存储在“加入”集合中，因此对于包中项目的多个“副本”中的每一个，都会在该集合中创建一个新文档。

```
class Item
  include Mongoid::Document
  has_many :item_instances
end

class ItemInstance
  include Mongoid::Document
  belongs_to :item
  belongs_to :pack
end

class Pack
  include Mongoid::Document
  has_many :item_instances      
end 
```

有了这个，您可以执行以下操作：

```
pack = Pack.new
item = Item.first
pack.item_instances.build(item_id: item.id) 
```

我已经将它用于类所在的印刷店管理应用程序`Invoice, Job, Product`。一份工作是一种产品的“实例”，一张发票有很多工作，可能都是同一种产品，所以直接的多对多映射是行不通的。

我还会重新考虑您的架构并确保有意义地命名事物。只需将您的类从分别重命名`Item, ItemInstance, Pack`为`Product, Item, Pack`，就可以使事情变得更加清晰：

```
pack = Pack.new
product = Product.first
pack.items.build(product_id: product.id) 
```

最后，如果您在`Pack`类中创建一些简单的便捷方法，那么对于创建更有用的接口大有帮助：

```
class Pack
  def new_item(product)
    self.items.build(product_id: product.id)
  end

  def products
    self.items.map { |i| i.product }
  end
end 
```

所以你可以这样做：

```
pack.add_item(product)
# Same as using pack.items.build(product_id: product.id)

pack.products
# Returns an array (including duplicates) of all the products included in the pack. 
```

希望有帮助。这并不经常出现，我确信还有其他解决方案，但这是我在尝试解决“一个对象具有多个对象”问题时使用的基本模式。

添加与您将如何使用该类相关的您自己的方法，它应该非常有用。另外，不要忘记在“join”集合上设置索引。并在 Mongoid 的 Github 页面上查看[此问题](https://github.com/mongoid/mongoid/issues/2217)，请求用于多对多关系的数组中的多个条目。

如果添加了它，那么如果您只需要一个简单的关系，这将是未来的方式。如果您要存储更多详细信息，就像我在创建产品的打印作业时所做的那样（时间戳、标题等），您仍然需要执行上述操作。

# javascript - Passing a variable to another function

> ID：12547976
> 
> 赞同：0
> 
> 时间：2012-09-22T21:48:28.640
> 
> 标签：javascript, jquery, function, variables, global-variables

I got 2 jQUERY functions - and i want to pass a variable from the first to the second. From what i read i need to set the variable as a global variable, but the methods i read and try to reproduce doesn't seem to work.

```
 $(function() {
        $("#selectable").selectable({
            stop: function() {
            $(".ui-selected", this).each(function() {
            var index = $("#selectable li").index(this); });}});});

    $(function() {
    $("#slider-range").slider({
        range: true,
        min: 0,
        max: 180,
        values: [0, 180],
            slide: function(event, ui) {
            var result = $("#result").empty();
            var low = (ui.values[0]);
            var high = (ui.values[1]);
            HERE I NEED THE VARIABLE FROM THE ABOVE FUNCTION

            $.post('search.php',{low: (ui.values[0]), high: (ui.values[1]), HERE I NEED VARIABLE FROM THE ABOVE FUNCTION},
            function(data){
            result.append(data);        
            }); 
```

*   I have tried to do like this:

**FIRST METHOD** - Seen here : [http://www.quirksmode.org/js/function.html](http://www.quirksmode.org/js/function.html)

setting variable : example(index);

retrieveing variable : function example(a) {index = a};

This i can't get to work.. the functions breaks when i try to include the index as the variable in the $.post.

**SECOND METHOD** Not fully aware about this method, but this seems like a solution, if fully understood: document.write() - But i can't seem to get to know how to retrieve it again.

Hope somebody has a solution for this as i have had tried a load of things to try to pass this rather simple thing on to the next function.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:41:32.890

Well, I usually prefer the use of **Namespaces**, it's more elegant, and you can reference to the variable anywhere on the page.

The setup I normally use is like this:

```
var Namespace = (function() {

    return {

            /**
            * Initialize the page. 
            */
            init: function() {

                  //Here you can set Global Variables 
                  //inside the Namespace using "this"
                  this.variable1 = true;
                  this.variable2 = false;

                  //You may call other functions
                  this.setListeners();

            },

            setListeners() {

                  //You may reference the variables using "this"
                  if(this.variable1 == true) {
                      alert(this.variable2);
                  }
            },

            otherFunction() {

                  //When calling functions with callbacks, 
                  //you should set a variable inside the function 
                  //so you may use that in the callbacks to the namespace
                  var self = this;

                  $("#target").click(function() {
                     //Now you can use the variable self in the callbacks
                     alert(self.variable1);

                     //Or you may also use the namespace
                     alert(Namespace.variable1);
                  });
            }
      };
})();

$(document).ready(function(){
         //Here you may call the init function which should fire 
         //everything else you need in the page load
         Namespace.init();
});

//You may also use the variables anywhere else in the page 
//or in other Javascript files by referencing to the namespace

//Variable
Namespace.variable1;
Namespace.variable2;

//Function
Namespace.otherFunction(); 
```

This structure makes the code cleaner and easy to reference by other scripts.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:09:22.383

If I well understood ...

You have to define a global variable in the first common scope of your 2 functions ... Notice that the more scopes javascript should look up, the more the precess is time consuming ...

```
$(function() {

   var globalVar = '';

   $("#selectable").plugin1({callback:function() {
         // you have access to globalVar
   }});

   $("#slider-range").plugin2({callback:function() {
         // you have access to globalVar
   }});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:20:10.810

You could do this any number of ways, using an unscoped variable, not recommended!...

```
$(function() {

  $("#selectable").selectable({
    stop: function() {
      $(".ui-selected", this).each(function() {
        index = $("#selectable").index(this);
      });
    }
  });

});

$(function() {

  $("#slider-range").slider({
    slide: function() {
      // Might want to check index is set as is might not have
      // been set yet
      $.post("search.php", {low: x, high: y, index: index}, function() {
        // Do something
      });
    }
  });

}); 
```

Merging your two document ready enclosures and scoping a variable within...

```
$(function() {

  var index;

  $("#selectable").selectable({
    stop: function() {
      $(".ui-selected", this).each(function() {
        index = $("#selectable").index(this);
      });
    }
  });

  $("#slider-range").slider({
    slide: function() {
      // Might want to check index is set as is might not have
      // been set yet
      $.post("search.php", {low: x, high: y, index: index}, function() {
        // Do something
      });
    }
  });

}); 
```

Or by passing it along as a data attribute...

```
$(function() {

  $("#selectable").selectable({
    stop: function() {
      $(".ui-selected", this).each(function() {
        $("#selectable").data("index", $("#selectable").index(this));
      });
    }
  });

  $("#slider-range").slider({
    slide: function() {
      var index = $("#selectable").data("index");
      // Might want to check index is set as is might not have
      // been set yet
      $.post("search.php", {low: x, high: y, index: index}, function() {
        // Do something
      });
    }
  });

}); 
```

You could also wrap it within an object and use an instance property, or scope it within an enclosure or anonymous function.

Giving details on how it breaks would be good. You might want to check that the value is as you expect it, i.e.

```
$(function() {
  $("#selectable").selectable({
    stop: function() {
      $(".ui-selected", this).each(function() {
        index = $("#selectable li").index(this);

        // Check the index after the selection
        console.log("Selected index " + index);
      });
    }
  });
});

$(function() {
  $("#slider-range").slider({
    range: true,
    min: 0,
    max: 180,
    values: [0, 180],
    slide: function(event, ui) {

      var result = $("#result").empty();
      var low = (ui.values[0]);
      var high = (ui.values[1]);

      // Check the index before the post
      console.log("Slide index " + index);        

      $.post('search.php', {
          low: ui.values[0], 
          high: ui.values[1], 
          index: index
        }, 
        function(data){
          result.append(data);        
        }); 
    }
  });
}); 
```

# javascript - 检查是否上传照片

> ID：12547980
> 
> 赞同：0
> 
> 时间：2012-09-22T21:48:45.043
> 
> 标签：javascript, html

这就是我将要这样做的方式，以便您在上传之前编写或添加文件。像这儿;

```
<script type="text/javascript">
function check(){
    var elm = document.getElementById("hello-world");
    if (elm.value.length>0){
        alert("Hey");
        return true;
    }
    else{
        alert("Nooooo!");
        return false;
    }
}
</script> 
```

所以我真的希望我能完成这一切，就像检查文件中是否有任何内容/上传图像一样。但如果是这样，没有图片，只需点击上传，根本没有任何图片。

当您想上传到数据库中的画廊时，这就是我的 html 输出，或者我在这里称之为。

```
<div class="opslag-indhold">
                    <form name="opslag" method="post" action="#">
                        <input type="file" name="file">
                        <input type="submit" name="opslag" value="Upload" id="del" onclick="return check()">
                    </form>
                </div> 
```

所以想在上面构建一些javascript，以便检查您是否上传了文件..但欢迎您问我是否有任何您想知道的:)

*希望你能明白我的意思，否则问我！*

Jesper -**丹麦**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:24:08.093

如果您的意思是检测文件何时上传，听起来您正在寻找验证或通知解决方案。首先，如果上传失败，编写一些 try/catch 或其他条件来捕获。然后，您需要知道上传的位置（最好是在专门用于此目的的特殊文件夹中），然后检测文件何时到达那里。也许您可以编写一个 Javascript`onChange`事件来向您发送消息。有点难以具体，但这是你想要去的方向。

顺便说一句，您的表单标签将需要：`enctype = "multipart/form-data"`如果您想要一个 HTML 浏览按钮。

# c++ - 有没有办法在 VS2012 中编写 make_unique() ？

> ID：12547983
> 
> 赞同：16
> 
> 时间：2012-09-22T21:48:52.680
> 
> 标签：c++, templates, c++11, variadic-templates, unique-ptr

Herb Sutter 提出了一个简单的实现`make_unique()`：[http ://herbsutter.com/gotw/_102/](http://herbsutter.com/gotw/_102/)

这里是：

```
template<typename T, typename ...Args>
std::unique_ptr<T> make_unique( Args&& ...args )
{
    return std::unique_ptr<T>( new T( std::forward<Args>(args)... ) );
} 
```

我的问题是可变参数模板还不是 VS2012 的一部分，所以我不能按原样使用这段代码。

**是否有一种可维护的方法在 VS2012 中编写它，而不涉及复制粘贴具有不同 args 计数的相同函数？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T22:00:10.540

您可以使用 Boost.Preprocessor 生成不同的参数计数，但我真的看不出这样做的好处。只需完成一次繁重的工作，将其塞入标题中即可完成。您正在节省自己的编译时间并拥有`make_unique`.

[这](http://liveworkspace.org/code/1ehcSt)是我的`make_unique.h`标题的复制粘贴，它模拟了最多 5 个参数的可变参数模板。

* * *

由于 OP 似乎不喜欢复制粘贴工作，这里是生成上述内容的 Boost.Preprocessor 代码：

首先，制作一个包含多次模板头的主头（Boost.Preprocessor 迭代代码公然从[这个答案](https://stackoverflow.com/a/5475750/500104)中窃取）：

```
// make_unique.h
#include <memory>
#include <utility>
#include <boost/preprocessor.hpp>

#ifndef MAKE_UNIQUE_NUM_ARGS
// allow this to be changed to a higher number if needed,
// ten is a good default number
#define MAKE_UNIQUE_NUM_ARGS 10
#endif

#if MAKE_UNIQUE_NUM_ARGS < 0
// but don't be stupid with it
#error Invalid MAKE_UNIQUE_NUM_ARGS value.
#endif

/* optional, see above for premade version
// include premade functions, to avoid the costly iteration
#include "detail/blah_premade.hpp

// generate classes if needed
#if MAKE_UNIQUE_NUM_ARGS > MAKE_UNIQUE_NUM_PREMADE
*/
#define BOOST_PP_ITERATION_LIMITS (0, MAKE_UNIQUE_NUM_ARGS)
#define BOOST_PP_FILENAME_1 "make_unique_template.h"
#include BOOST_PP_ITERATE()
//#endif 
```

现在制作一个模板头，它会一次又一次地包含在内，并根据 的值进行不同的扩展`MAKE_UNIQUE_NUM_ARGS`：

```
// make_unique_template.h
// note: no include guard

#define N BOOST_PP_ITERATION()    

#define MAKE_UNIQUE_TEMPLATE_PARMS \
  BOOST_PP_ENUM_PARAMS(N, typename A)

#define MAKE_UNIQUE_FUNCTION_PARM(J,I,D) \
  BOOST_PP_CAT(A,I)&& BOOST_PP_CAT(a,I)

#define MAKE_UNIQUE_FUNCTION_PARMS \
  BOOST_PP_ENUM(N, MAKE_UNIQUE_FUNCTION_PARM, BOOST_PP_EMPTY)

#define MAKE_UNIQUE_ARG(J,I,D) \
  std::forward<BOOST_PP_CAT(A,I)>(BOOST_PP_CAT(a,I))

#define MAKE_UNIQUE_ARGS \
  BOOST_PP_ENUM(N, MAKE_UNIQUE_ARG, BOOST_PP_EMPTY)

template<class T BOOST_PP_COMMA_IF(N) MAKE_UNIQUE_TEMPLATE_PARMS>
std::unique_ptr<T> make_unique(MAKE_UNIQUE_FUNCTION_PARMS){
  return std::unique_ptr<T>(new T(MAKE_UNIQUE_ARGS));
}

// clean up
#undef MAKE_UNIQUE_TEMPLATE_PARMS
#undef MAKE_UNIQUE_FUNCTION_PARM
#undef MAKE_UNIQUE_FUNCTION_PARMS
#undef MAKE_UNIQUE_ARG
#undef MAKE_UNIQUE_ARGS
#undef N 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T05:38:06.247

尽管可变参数模板不是 VS2012 的一部分，但头文件`<memory>`中内置了宏来帮助模拟它们。

请参阅[这个非常好的答案](https://stackoverflow.com/a/13883981/1190077)，它显示了如何`make_unique<T>`在几行神秘的行中实现。我确认它运作良好：

> ```
> #include <memory> // brings in TEMPLATE macros.
> #define MAKE_UNIQUE(TEMPLATE_LIST, PADDING_LIST, LIST, COMMA, X1, X2, X3, X4)   \
>   template<class T COMMA LIST(_CLASS_TYPE)>  \
>   inline std::unique_ptr<T> make_unique(LIST(_TYPE_REFREF_ARG))  \
>   {  \
>       return std::unique_ptr<T>(new T(LIST(_FORWARD_ARG)));  \
>   }
> _VARIADIC_EXPAND_0X(MAKE_UNIQUE, , , , )
> #undef MAKE_UNIQUE 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T22:58:32.337

使用可变参数列表模拟函数的唯一方法是创建一个合适的重载列表。无论是手动完成，使用 Boost 预处理器库之类的东西，还是使用合适的生成器，都一样：无法模拟真实的可变参数列表。就个人而言，我认为模拟可变参数列表的最易于维护的版本是使用支持它们作为预处理器的编译器，并让它生成适合由尚未支持可变参数模板的编译器编译的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T18:53:20.493

我扩展了 Hugues 的答案来处理创建包装数组的唯一指针（基本上将它与[本文](http://isocpp.org/blog/2013/04/n3656-make-unique-revision-1)中的代码合并）并获得了以下内容，这在我的 VC2012 项目中运行良好：

```
#include <memory>

template<class T> struct _Unique_if {
    typedef std::unique_ptr<T> _Single_object;
};

template<class T> struct _Unique_if<T[]> {
    typedef std::unique_ptr<T[]> _Unknown_bound;
};

template<class T, size_t N> struct _Unique_if<T[N]> {
    typedef void _Known_bound;
};

// Visual Studio 2012 - specific
#define _MAKE_UNIQUE(TEMPLATE_LIST, PADDING_LIST, LIST, COMMA, X1, X2, X3, X4)                                          \
template<class T COMMA LIST(_CLASS_TYPE)> inline typename _Unique_if<T>::_Single_object make_unique(LIST(_TYPE_REFREF_ARG))  \
{                                                                                                                            \
    return std::unique_ptr<T>(new T(LIST(_FORWARD_ARG)));                                                                    \
}
_VARIADIC_EXPAND_0X(_MAKE_UNIQUE, , , , )
#undef _MAKE_UNIQUE

template<class T> inline typename _Unique_if<T>::_Unknown_bound make_unique(size_t n) 
{
    typedef typename std::remove_extent<T>::type U;
    return std::unique_ptr<T>(new U[n]());
}

// Visual Studio 2012 - specific
#define _MAKE_UNIQUE(TEMPLATE_LIST, PADDING_LIST, LIST, COMMA, X1, X2, X3, X4)                                          \
template<class T COMMA LIST(_CLASS_TYPE)> typename _Unique_if<T>::_Known_bound make_unique(LIST(_TYPE_REFREF_ARG)) = delete;
_VARIADIC_EXPAND_0X(_MAKE_UNIQUE, , , , )
#undef _MAKE_UNIQUE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-08T22:05:24.850

只是出于好奇，我试图做类似的事情——我需要支持比 4 个更多的参数——对于 _VARIADIC_EXPAND_0X 类型的解决方案——可能只支持 4 个。

这是 MacroArg.h 头文件：

```
#pragma once

//
// Retrieve the type
//
//  ARGTYPE( (ArgType) argName )                         => ArgType
//
// https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application
//
#define ARGTYPE(x) ARGTYPE_PASS2(ARGTYPE_PASS1 x,)
//
//      => ARGTYPE_PASS2(ARGTYPE_PASS1 (ArgType) argName,)
//
#define ARGTYPE_PASS1(...) (__VA_ARGS__),
//
//      => ARGTYPE_PASS2( (ArgType), argName,)
//
#define ARGTYPE_PASS2(...) ARGTYPE_PASS3((__VA_ARGS__))
//
//      => ARGTYPE_PASS2(( (ArgType), argName,))
//
#define ARGTYPE_PASS3(x)   ARGTYPE_PASS4 x
//
//      => ARGTYPE_PASS4 ( (ArgType), argName,)
//
#define ARGTYPE_PASS4(x, ...) REM x
//
//      => REM (ArgType)
//
#define REM(...) __VA_ARGS__
//
//      => ArgType
//

//
// This counts the number of args: (0 is also supported)
//
//
//  NARGS( (ArgType1) argName1, (ArgType2) argName2 )   => 2
//
#define NARGS(...) NARGS_PASS2(NARGS_PASS1(__VA_ARGS__))
//
//  => NARGS_PASS2(NARGS_PASS1( (ArgType1) argName1, (ArgType2) argName2 ) )
//
#define NARGS_PASS1(...) unused, __VA_ARGS__
//
//  => NARGS_PASS2( unused, (ArgType1) argName1, (ArgType2) argName2 )
//
#define NARGS_PASS2(...) NARGS_PASS4(NARGS_PASS3(__VA_ARGS__, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0))
//
//  => NARGS_PASS4(NARGS_PASS3( unused, (ArgType1) argName1, (ArgType2) argName2 ) , 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0) )
//
#define NARGS_PASS3(_unused,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,VAL, ...) VAL
//
//  => NARGS_PASS4(2)
//
#define NARGS_PASS4(x) x
//
//  => 2
//

//
// Show the type without parenthesis
//
//  ARGPAIR( (ArgType1) argName1 )                         => ArgType1 argName1
//
#define ARGPAIR(x) REM x
//
//  => REM (ArgType1) argName1
//
//  => ArgType1 argName1
//

//
// Show the type without parenthesis
//
//  ARGPAIR( (ArgType1) argName1 )                         => ArgType1 && argName1
//
#define REFARGPAIR(x) REFREM x
//
//  => REFREM (ArgType1) argName1

#define REFREM(...) __VA_ARGS__ &&
//
//  => ArgType1 && argName1
//

//
// Strip off the type
//
//  ARGNAME( (ArgType1) argName1 )                      => argName1
//
#define ARGNAME(x) EAT x
//
//      => EAT (ArgType1) argName1
//
#define EAT(...)
//
//      => argName1
//

//
// This will call a macro on each argument passed in
//
//  DOFOREACH(typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 )
//
#define DOFOREACH(macro, ...) DOFOREACH_PASS1(CAT(DOFOREACH_, NARGS(__VA_ARGS__)), (macro, __VA_ARGS__))
//
//          => DOFOREACH_PASS1(CAT(DOFOREACH_, NARGS( (ArgType1) argName1, (ArgType1) argName2 ) ), (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) ))
//          => DOFOREACH_PASS1(CAT(DOFOREACH_, 2), (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) ))
//
#define CAT(x, y) CAT_PASS1((x, y))
//
//          => DOFOREACH_PASS1(CAT_PASS1((DOFOREACH_, 2)), (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) ))
//
#define CAT_PASS1(x) PRIMITIVE_CAT x
//
//          => DOFOREACH_PASS1(PRIMITIVE_CAT (DOFOREACH_, 2), (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) ))
//
#define PRIMITIVE_CAT(x, y) x ## y
//
//          => DOFOREACH_PASS1( DOFOREACH_2 ), (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) ))
//
#define DOFOREACH_PASS1(m, x) m x
//
//          => DOFOREACH_2 (typename ARGTYPE, (ArgType1) argName1, (ArgType1) argName2 ) )
//
#define DOFOREACH_0(m)
#define DOFOREACH_1(m, x1) m(x1)
#define DOFOREACH_2(m, x1, x2) m(x1), m(x2)
//
//          => typename ARGTYPE( (ArgType1) argName1 ), typename ARGTYPE( (ArgType1) argName2 ) )
//          => typename ArgType1, typename ArgType1
//
#define DOFOREACH_3(m, x1, x2, x3) m(x1), m(x2), m(x3)
#define DOFOREACH_4(m, x1, x2, x3, x4) m(x1), m(x2), m(x3), m(x4)
#define DOFOREACH_5(m, x1, x2, x3, x4, x5) m(x1), m(x2), m(x3), m(x4), m(x5)
#define DOFOREACH_6(m, x1, x2, x3, x4, x5, x6) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6)
#define DOFOREACH_7(m, x1, x2, x3, x4, x5, x6, x7) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7)
#define DOFOREACH_8(m, x1, x2, x3, x4, x5, x6, x7, x8) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8)
#define DOFOREACH_9(m, x1, x2, x3, x4, x5, x6, x7, x8, x9) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9)
#define DOFOREACH_10(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10)
#define DOFOREACH_11(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11)
#define DOFOREACH_12(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12)
#define DOFOREACH_13(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13)
#define DOFOREACH_14(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13), m(x14)
#define DOFOREACH_15(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14, x15) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13), m(x14), m(x15)

//
//  Same version as DOFOREACH, except this one meant to be used for appending list of arguments. If 0 arguments, then list is not appended, otherwise additional command is added in front.
//
#define DOFOREACH2(macro, ...) DOFOREACH_PASS1(CAT(DOFOREACH2_, NARGS(__VA_ARGS__)), (macro, __VA_ARGS__))

#define DOFOREACH2_0(m)
#define DOFOREACH2_1(m, x1) ,m(x1)
#define DOFOREACH2_2(m, x1, x2) ,m(x1), m(x2)
#define DOFOREACH2_3(m, x1, x2, x3) ,m(x1), m(x2), m(x3)
#define DOFOREACH2_4(m, x1, x2, x3, x4) ,m(x1), m(x2), m(x3), m(x4)
#define DOFOREACH2_5(m, x1, x2, x3, x4, x5) ,m(x1), m(x2), m(x3), m(x4), m(x5)
#define DOFOREACH2_6(m, x1, x2, x3, x4, x5, x6) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6)
#define DOFOREACH2_7(m, x1, x2, x3, x4, x5, x6, x7) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7)
#define DOFOREACH2_8(m, x1, x2, x3, x4, x5, x6, x7, x8) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8)
#define DOFOREACH2_9(m, x1, x2, x3, x4, x5, x6, x7, x8, x9) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9)
#define DOFOREACH2_10(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10)
#define DOFOREACH2_11(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11)
#define DOFOREACH2_12(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12)
#define DOFOREACH2_13(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13)
#define DOFOREACH2_14(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13), m(x14)
#define DOFOREACH2_15(m, x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14, x15) ,m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8), m(x9), m(x10), m(x11), m(x12), m(x13), m(x14), m(x15)

//
//  ARGX(1)     =>      (Arg1) arg1
//
#define ARGX(index) (Arg##index) arg##index

//
//  Defines same function with different amount of arguments.
//
#define DEFINE_MULTIARG_FUNC(macro) \
    macro ( ARGX(1) ); \
    macro ( ARGX(1), ARGX(2) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13)  ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13), ARGX(14)  ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13), ARGX(14), ARGX(15)  ); \

//
//  Same as previous, except add support also of function with no arguments.
//  (template functions normally requires at least one template parameter (so you write template<> in front of function and won't get error), that's why separate define)
//
#define DEFINE_MULTIARG_FUNC2(macro) \
    macro ( ); \
    macro ( ARGX(1) ); \
    macro ( ARGX(1), ARGX(2) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12) ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13)  ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13), ARGX(14)  ); \
    macro ( ARGX(1), ARGX(2), ARGX(3), ARGX(4), ARGX(5), ARGX(6), ARGX(7), ARGX(8), ARGX(9), ARGX(10), ARGX(11), ARGX(12), ARGX(13), ARGX(14), ARGX(15)  ); \

/*
    Here is simple example of usage of these macros:

    #define MKFUNC_make_unique(...) \
    template <class T  DOFOREACH2(typename ARGTYPE, __VA_ARGS__) > \
    std::unique_ptr<T> make_unique(  DOFOREACH(REFARGPAIR, __VA_ARGS__) ) \
    { \
        return std::unique_ptr<T>( new T( DOFOREACH(ARGNAME, __VA_ARGS__) ) ); \
    }

    DEFINE_MULTIARG_FUNC2(MKFUNC_make_unique);      //<--
    #undef MKFUNC_make_unique

    Debugger will stall in "<--" this line, so it makes sense to keep amount of line absolute minimal.
*/ 
```

可以在此处找到有关调试宏的一些详细信息（正在讨论类似的问题）

[如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T16:11:21.773

我知道我在这里聚会迟到了，但我刚刚遇到了这个。我一直在使用单行宏（并且与 VS2012 兼容）来执行此操作：

```
#define MAKE_UNIQUE(T, ...) std::unique_ptr<T>(new T(__VA_ARGS__)) 
```

或者不太便携，但你可以传入空参数

```
#define MAKE_UNIQUE(T, ...) std::unique_ptr<T>(new T(##__VA_ARGS__)) 
```

像这样使用：

```
// MAKE_UNIQUE takes the type followed by the arguments list ...
std::unique_ptr<MyClass> pPointer = MAKE_UNIQUE(MyClass, param_1, param_2, ..., param_n); 
```

# eclipse - Mac Lion OS 上 Eclipse Juno 问题的 Maven 集成

> ID：12547986
> 
> 赞同：0
> 
> 时间：2012-09-22T21:49:23.047
> 
> 标签：eclipse, maven, maven-plugin

如何查看依赖项 | 报告等

![在此处输入图像描述](../Images/d0ce099d433a29826c80fc298c954613.png)

即使从 Eclipse Marketplace 安装了 Maven 插件......它看起来像这样......

![在此处输入图像描述](../Images/d70736b152480ac1af7e6dd861b11d07.png)

![在此处输入图像描述](../Images/b07de1834d3ec626e60030b307760146.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:41:12.360

似乎其他一些 xml 编辑器比 pom 特定的编辑器更受欢迎。这种情况不时发生，具体取决于您安装的其他内容（例如，Android ADT 有时也会错误地抓取 pom.xml 文件）。

如果您遇到此问题，只需在 Package Explorer 中右键单击 pom.xml 文件并选择 Open With - Maven POM Editor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:52:37.770

您是否为 Eclipse 安装了 M2E 插件？

```
 m2e - Maven Integration for Eclipse 
```

您可以在 Eclipse MarketPlace 中找到它。

# ios - iOS 模拟器不会减慢 CA 动画的速度

> ID：12547989
> 
> 赞同：3
> 
> 时间：2012-09-22T21:51:58.460
> 
> 标签：ios, ios-simulator

如果您使用 [UIView animate...] 您可以在模拟器中切换慢速动画。但是如果你使用图层和 CAAnimation——那些动画不会变慢。是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T07:20:18.113

不幸的是，模拟器只能切换 UIView 动画的速度。

作为一种解决方法，只需设置 UIWindow 或任意根视图的 speed 属性：

```
view.layer.speed = 0.1f; // 10x slower animations 
```

这会减慢图层子层次结构中的所有 CAAnimations，包括 UIView 动画。

# php - " 在 PHP 中被 \ 取代

> ID：12547991
> 
> 赞同：0
> 
> 时间：2012-09-22T21:52:11.440
> 
> 标签：php

我使用的 URL 是：`http://example.org/codecabana/runCode.php?code=%23include%20%3Cstdio.h%3E%0Aint%20main(void)%20%7B%0Aprintf(%22Code%20Cabana!%22)%3B%0Areturn%200%3B%0A%7D&lang=C`
问题是，它似乎被替换`"`为`\`. 我的 PHP 脚本是：

```
<?php
include "sl.php";
$code = $_GET['code'];
$lang = $_GET['lang'];

try {
$app = new slApp( $plaintext );
$result = $app -> run( $code , $lang ); //Pass the result of the request, as an array, to $result
echo $result['output'],"{BREAK}";
echo $result['compiler_errors'];
echo $code;
}catch( Exception $e ) {

    echo $e -> getMessage(), "{BREAK}", "An error has occurred! CODE: " , $code , "Lang: " , $lang;

}
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T21:58:11.567

`php.ini`您可以从服务器上的文件中关闭 magic_quotes 。

您可以`phpinfo()`从 PHP 脚本运行以显示当前的 php 设置。

# azure - Azure Web 角色关闭（何时以及如何？）

> ID：12547992
> 
> 赞同：3
> 
> 时间：2012-09-22T21:52:15.997
> 
> 标签：azure, azure-web-roles

当 Azure 平台决定关闭我的一个 Web 角色实例时，这是如何实现的？

例如，它是否停止发送新请求，但允许现有请求完成？我无法想象它只是为了日常维护而终止活动连接。这将是高度破坏性和昂贵的。

对这个小黑匣子的任何洞察都会很棒，尤其是如果您知道其中的 MSDN 或 Azure CAT 链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T22:18:28.287

Fabric Controller 将从负载均衡器中删除实例，因此它不会收到新请求。然后它将进入一个干净的关闭序列，首先在其常规生命周期中关闭 ASP.NET（可能会根据您的应用程序是在集成模式还是经典模式下运行而有所不同），等待请求结束（直到shutdownTimeLimit 属性中指定的持续时间），然后引发 RoleEnvironment.Stopping 事件并调用角色的 OnStop 方法进行清理。最后，Job Object 将被终止。

参考：

*   [真实世界：Windows Azure 角色的启动生命周期](http://msdn.microsoft.com/en-us/library/windowsazure/hh127476.aspx)
*   [构建在托管服务中运行的应用程序的概述](http://azure.microsoft.com/en-us/overview/application-hosting/)
*   [RoleEnvironment.Stopping 事件](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx)
*   [IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473(v=vs.100).aspx)
*   [IIS 7.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.100).aspx)
*   [RoleEntryPoint.OnStop 方法](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx)
*   [TerminateJobObject 函数](http://msdn.microsoft.com/en-us/library/ms686709(v=vs.85).aspx)
*   [健康应用程序池设置](http://msdn.microsoft.com/en-us/library/aa720127(v=vs.71).aspx)
*   [应用程序池的进程模型设置](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/processmodel)

# alsa - 如何通过 ALSA 设置脉冲音频流名称？

> ID：12547994
> 
> 赞同：0
> 
> 时间：2012-09-22T21:52:29.397
> 
> 标签：alsa, pulseaudio

我正在使用 ALSA（通过 QAudioInput/Output）编写一个音频应用程序，它同时打开两个输出流。两个 ALSA 流都使用 pulseaudio ALSA 插件。这也很好用，我可以将它们分配给不同的输出设备`pavucontrol`。

如何为这些流设置特定名称（和/或其他参数），以便 pulseaudio 记住流分配给特定输出设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:11:05.217

The PulseAudio stream names are hardcoded as "ALSA Playback" in the plugin.

To use another then PA's default output device, you would have to [create your own ALSA devices](http://git.alsa-project.org/?p=alsa-plugins.git;a=blob;f=doc/README-pulse;hb=HEAD).

# jquery - Jquery slideToggle 不能完全工作

> ID：12547997
> 
> 赞同：1
> 
> 时间：2012-09-22T21:52:51.327
> 
> 标签：jquery, click, toggle

我是 jquery 和 javascript 的新手，但正在实践中。我想创建一个简单的点击功能，其中显示以下内容。你说的很简单。出于某种原因，这不是我的情况。我在[http://jsfiddle.net/richlewis14/FRP3R/1/](http://jsfiddle.net/richlewis14/FRP3R/1/)有一个例子。

我想要做的是单击 h3 元素，然后它将显示下面的所有内容。我还想做的是不要先使用slideUp功能隐藏内容，因为加载页面时您会看到内容消失，这对我来说看起来有点俗气。我需要在加载时隐藏 div 而不是 slideUp 吗？

HTML：

```
<div class="container">
      <div class="row">
      <div class="span4">
      <div class="widget">
        <div class="widget-header">
          <i class="icon-info-sign icon-large"></i>
           <h3 class="clickme">Core</h3>
        </div><!--/widgetheader-->
         <div class="widget-content-box">
          <p>Hello</p>

         </div><!--/widget content-->
        </div><!--widget-->
      </div><!--span4--><div class="container"> 
```

JavaScript：

```
$(".widget-content-box > p").slideUp();
$("h3.clickme").click(function(){
    $(this).next.slideToggle("slow");
}); 
```

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:56:02.537

`next`您的代码中应该有一个错字`next()`。另请注意，您应该先使用`parent()`然后`next()`方法（*'.widget-content-box' 不是 h3 元素的下一个兄弟*），并且当您隐藏 p 元素时`.widget-content-box`没有可见的内容显示，您应该隐藏它`.widget-content-box`。

```
$(document).ready(function(){
    $(".widget-content-box").slideUp(); // $(".widget-content-box").hide()
    $("h3.clickme").click(function(){
        $(this).parent().next().slideToggle("slow");
    });
}) 
```

[http://jsfiddle.net/qxnjj/](http://jsfiddle.net/qxnjj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:05:31.830

这是改变的jQuery：

```
$("h3.clickme").click(function(){
    $(this).parent().next().slideToggle("slow");
  }); 
```

在 css 中我添加了 display:none 所以你不必首先滑动这个 div：

```
.widget-content-box{
border:none;
border-radius: 5px 5px 5px 5px;
background:white;
**display:none;** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:59:33.553

您可以在这里使用两个功能。

你可以尝试这样做：

```
$('h3').click(function()
{
   $('.contentBelowH3').slideToggle();
}); 
```

您可以使用相同的功能手动上下滑动，但手动切换。

```
$('h3').click(function()
{
if($('.contentBelowH3').visible())
    {
      $('.contentBelowH3').slideUp();
    }
else
    {
    $('.contentBelowH3').slidDown();
    }
}); 
```

# java - 访问通过网络爬虫存储的 .lck 和 jdb 文件

> ID：12547999
> 
> 赞同：0
> 
> 时间：2012-09-22T21:53:27.597
> 
> 标签：java, parsing, web-crawler, crawler4j

我目前使用[crawler4j](http://code.google.com/p/crawler4j/)作为我选择的网络爬虫，我正在尝试自学网络爬虫是如何工作的。我已经开始爬网，我希望它能够在下面看到的 crawlStorageFolder (/data/crawl/root) 中快速返回爬网数据

```
public class Controller {

    public static void main(String[] args) throws Exception {

            /*
             * crawlStorageFolder is a folder where intermediate crawl data is
             * stored.
             */
            String crawlStorageFolder =  "/data/crawl/root";

            /*
             * numberOfCrawlers shows the number of concurrent threads that should
             * be initiated for crawling.
             */
            int numberOfCrawlers = 7;

            CrawlConfig config = new CrawlConfig();

            config.setCrawlStorageFolder(crawlStorageFolder); 
```

问题是我能找到的唯一信息是 crawlStorageFolder 位置的两个 .lck 文件和一个 .jdb 文件，我假设是数据的存储位置，但我也无法打开它们。是否有人能帮助我了解如何访问数据，以便我有希望并成功地将其输入数据库并最终将其显示在我的网站上。这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:23:50.490

Crawler4j 使用[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)来存储爬取信息。请参阅[此处](https://code.google.com/p/crawler4j/source/browse/src/main/java/edu/uci/ics/crawler4j/frontier/InProcessPagesDB.java)的源代码。

从命令行，您可以使用 DB utils 来访问数据。[已经在这里](https://stackoverflow.com/questions/37644/examining-berkeley-db-files-from-the-cli)涵盖了。

如果您想访问 Java 代码中的数据，您只需导入 BerkeleyDB 库（[那里](http://www.oracle.com/technetwork/database/berkeleydb/downloads/maven-087630.html)的 Maven 指令）并按照[如何打开数据库的教程进行操作](http://docs.oracle.com/cd/E17277_02/html/collections/tutorial/opendatabases.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T18:53:33.907

您不应该使用该文件夹中的数据。您应该将该数据视为爬虫的内部数据。您始终可以在 WebCrawler 的访问方法中转储/写入您的爬取数据。