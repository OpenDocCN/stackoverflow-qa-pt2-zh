# StackOverflow 问答 15395000-15395999

# c# - 从具有 NaN 的多维数组中找出最小值

> ID：15395006
> 
> 赞同：3
> 
> 时间：2013-03-13T19:45:19.540
> 
> 标签：c#, multidimensional-array, nan, min

我有一个二维数组 ( `double[ , ]`)，我想找出最小值是多少。我尝试了 Linq.Select.Min，但由于我的数组通常包含`NaN`值，`minvalue`所以总是`NaN`.

所以，我需要一些方法来找到“跳过”NaN 的最小值。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:52:58.890

今天是扩展方法的日子！使用它`Min()`在您的所有`double[,]`!

下面是一些通用的 [,] 扩展。请注意，这仅适用于实现的类型`IComparable`

这个什么都忽略：

```
public static T Min<T>(this T[,] arr) where T : IComparable
{
    bool minSet = false;
    T min = default(T);
    for (int i = 0; i < arr.GetLength(0); i++)
        for (int j = 0; j < arr.GetLength(1); j++)
            if (!minSet)
            {
                minSet = true;
                min = arr[i, j];
            }
            else if (arr[i, j].CompareTo(min) < 0)
                min = arr[i, j];
    return min;
} 
```

这将让您指定一个要忽略的值，并且在数组仅包含忽略值的特殊情况下，它将返回忽略值。

```
public static T Min<T>(this T[,] arr, T ignore) where T : IComparable
{
    bool minSet = false;
    T min = default(T);            
    for (int i = 0; i < arr.GetLength(0); i++)
        for (int j = 0; j < arr.GetLength(1); j++)
            if (arr[i, j].CompareTo(ignore) != 0)
                if (!minSet)
                {
                    minSet = true;
                    min = arr[i, j];
                }
                else if (arr[i, j].CompareTo(min) < 0)
                    min = arr[i, j];
    return (minSet) ? min : ignore;
} 
```

以下代码的输出是

南
-10

```
double[,] d = new double[5, 5]
{
    { 0, 1, 2, 3, 4 },
    { 5, 6, 7, 8, 9 },
    { 10, 11, -10, 12, 13 },
    { 14, 15, 16, 17, 18 },
    { 19, double.NaN, 21, 22, 23 }
};
Console.WriteLine(d.Min());
Console.WriteLine(d.Min(double.NaN)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:49:55.103

试试这个：

 ~~~~```
var minvalue = System.Linq.Enumerable.Range(0, 4)
    .Where(i => !Double.IsNa(myarray[i,1]))
    .Select(i => myarray[i, 1]).Min(); 
```~~  ~~更新：

```
 double[,] myarray = new double[4,4];

  var rows = myarray.GetLength(0);
  var cols = myarray.GetLength(1);

  Enumerable.Range(0, rows * cols)
    .Where(i => !Double.IsNaN(myarray[i/rows, i%rows]))
    .Select(i => myarray[i/rows, i%rows])
    .Min(); 
```

.Range() 的更高级使用无疑是可能的，我现在将对其进行研究。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T20:39:56.317

```
public static double MinIsNumber(double[,] array)
{
    return array.Cast<double>()
        .Where(n => !double.IsNaN(n))
        .Min();
} 
```~~~~

# mapping - Altova MapForce 有多好

> ID：15395007
> 
> 赞同：2
> 
> 时间：2013-03-13T19:45:26.263
> 
> 标签：mapping, edi, altova, x12

我的公司需要将 X12 5010 837 文件转换到我们的数据库中并退出。我们一直在使用的工具是 Altova MapForce（试用版）。我一直在尝试检查参考资料，但 Altova 在这方面并没有太大帮助。CNET 对它的评论让我有点担心。我在 stackoverflow 上进行了相当多的搜索，看看是否有人对此有任何反馈，但我发现的大部分内容都是关于特定功能和操作方法的问答。

如果您购买了 Mapforce 并使用它实施了至少一个项目或解决方案的人可以分享您认为它的优点和缺点，我将不胜感激？

它是一年可以处理大约 30K-50K 索赔的可靠工具吗？它会像某些 CNET 评论状态那样每天崩溃吗？

如果您想通过电话聊聊，请给我发电子邮件。

问候，

安德鲁·R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T15:36:29.173

该工具非常可靠，易于使用。一件好事是 X12 库有完整的错误枚举，Altova 是 X12.org 的两个工具供应商之一

它是可靠的。我的建议是进行转换，然后使用重构来管理在 C# 或 Java 中生成的代码，这样您只需将生成的代码复制到项目中的现有目录中即可非常轻松地更新地图。我不会修改 Altova 代码，他们建议您不要在他们的文档中，但不要通过提取方法和更改命名空间来解决重构问题

如果您使用过其他 X12 工具、Sterling Commerce 或 IBM Gentran、Biztalk、Informatica 等。您将欣赏该工具的简单性和价值。如果您没有使用 EDI 的经验，那么您将听从没有使用 EDI 经验的其他人的意见，而这些人实际上是集成的

在 1-10 上，我给产品打了 9，在正确的架构内，枚举的修剪比提到的其他规定的技术更可取，给我一些 Linux、Lamp、JBOSS？和Java重构，我有解决方案

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-05-06T03:52:22.740

这真是一个不错的工具。

我在 Altova Mapforce 上工作了一年。Altova mapforce 最好的事情是，你需要在 Altova mapforce 上工作。他们没有给你准备好的食物。您需要根据需要自定义 Altova mapforce SP 目录。Altova mapforce 自动生成代码负责您对数据库的所有验证。您可以验证表的单个记录。

我很高兴与 altova mapforce 合作。但需要耐心学习。还有一件事.. IT 支持非常好。

# cuda - 每个线程都在启动动态并行吗？

> ID：15395012
> 
> 赞同：1
> 
> 时间：2013-03-13T19:45:39.557
> 
> 标签：cuda, nvidia

我想将动态并行用于我的一种算法，我从 CPU 启动一个具有 12 个块 * 512 个线程的内核，我想知道何时使用动态并行，每个线程都会启动新内核。

```
void main(){
 dynamic<<<12,512,0>>>(x,y,z);
}

__global__ void dynamic(int x,int y, int z){
preprocessing<<<1,100>>>(x,y);
}

__global__ void preprocessing(int x,int y){

 //do stuff
} 
```

这是否意味着我的每个 ~6000 个线程都会尝试启动 100 个线程？还是我的第一个动态内核会暂停所有约 6000 个线程，启动 100 个线程并返回要由我之前的 6000 个线程处理的结果？

如果是的话，我可以简单地使用 100 个线程吗？我应该使用类似的条件

```
if(tid==1){
preprocessing<<<1,100>>>(x,y)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:02:59.983

是的，在您的第一个实例中，遇到内核启动的每个线程都会启动它自己的内核。设备内核启动是异步的，即控制立即返回给调用线程，就像在主机上一样。所以没有线程暂停。

如果您只想从父内核启动一个子内核，则第二种方法将起作用。

您可能想阅读[动态并行编程指南](http://docs.nvidia.com/cuda/pdf/CUDA_Dynamic_Parallelism_Programming_Guide.pdf)。您可以使用编程指南部分中给出的简单示例并修改内核启动参数以查看一个或多个子内核是否启动。

有关异步设备内核启动的说明，请参阅编程指南的第 11 页。

# c# - 使用切换到正在运行的应用程序来捕获什么钩子

> ID：15395014
> 
> 赞同：0
> 
> 时间：2013-03-13T19:45:49.063
> 
> 标签：c#, xaml, windows-8

设置：用 C# 编写的 Windows 8 商店应用程序我尝试了 OnLaunched 和 OnActivated，但当用户从应用程序切换并切换回来时，似乎都没有调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:54:11.453

用于此的 Windows 8 应用商店应用范例是*暂停*和*恢复*（参考[此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh770837.aspx)）。

如果您需要在用户挂起或恢复时执行某些操作，请附加一个事件处理程序，如下所示：

```
Application.Current.Suspending += new SuspendingEventHandler(App_Suspending); 
```

和：

```
async void App_Suspending(Object sender, 
    Windows.ApplicationModel.SuspendingEventArgs e)
{
    // some code here...
} 
```

以类似的方式处理恢复。

请记住，暂停不会立即发生 - 用户切换后可能需要几秒钟才能触发事件。

# android - Android SlidingMenu 将变量从活动传递到菜单

> ID：15395015
> 
> 赞同：1
> 
> 时间：2013-03-13T19:45:55.187
> 
> 标签：android

我在我的 android 应用程序中使用[SlidingMenu 。](https://github.com/jfeinstein10/SlidingMenu)我不想用fragments，我只用Activity（SlidingActivity）

这是我的实现代码：

```
private void setupSlidingMenu() {
    setBehindContentView(R.layout.activity_slidingmenu);
    SlidingMenu menu = getSlidingMenu();

    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setBehindScrollScale(0.55f);
    menu.setFadeDegree(0.85f);
    menu.setBehindOffset(100);

} 
```

我不知道如何`activity_slidingmenu`根据当前的 SlidingActivity 更改（通信）视图信息？

例如，我想更改当前项目的当前菜单字体颜色：

![例子](../Images/3b2dbbf62642a51c5ae4c213fc1585b4.png)

谢谢

# json - 让杰克逊忽略在序列化为 json 时延迟初始化的字段

> ID：15395018
> 
> 赞同：7
> 
> 时间：2013-03-13T19:45:59.230
> 
> 标签：json, spring, spring-mvc, jackson

我使用 Spring 并正在创建一个 REST 服务。

这是我的控制器的一部分：

```
@RequestMapping("/get")
public @ResponseBody Person getPerson() {
    Person person = personRepository.findOne(1L);
    //(1) person.setRoles(null);
    return person;
} 
```

该人的角色是惰性初始化的，当时不需要。当 (1) 被注释掉时，一切都会失败

> org.springframework.http.converter.HttpMessageNotWritableException：无法写入 JSON：无法延迟初始化角色集合：no.something.project.Person.roles，无法初始化代理 - 无会话等。

我可以通过执行 (1) 来解决这个问题，手动将其设置为 null（或其他值），因此当 Jackson 尝试序列化我的对象时它不会失败。

然而，这很烦人，必须在不同的地方多次完成。我想要一些简单的解决方案，在未初始化时忽略那些延迟初始化的字段，或者只是将它们设置为空。

注意：对象上的值上的@JsonIgnore 不是解决方案，因为在其他情况下，我希望包含这些值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T21:19:05.497

检查Jackson[过滤器](http://wiki.fasterxml.com/JacksonFeatureJsonFilter)的[Jackson Views](http://wiki.fasterxml.com/JacksonJsonViews)（我记得两者都受 Spring 支持）。

此外，要使用惰性字段（如果不排除它们），您需要 - [jackson-module-hibernate](https://github.com/FasterXML/jackson-module-hibernate)

# java - Arraylist 不断抛出 IndexOutOfBounds

> ID：15395019
> 
> 赞同：0
> 
> 时间：2013-03-13T19:46:00.520
> 
> 标签：java, arraylist, intervals

我正在尝试构建一个区间树。在这一部分中，我必须按升序取所有左端点，按升序取所有右端点，并将它们放在一个单点列表中（不重复）。但是，当我尝试将正确的端点合并到点列表中时，我不断收到 indexOutOfBounds 异常。我已经确保了容量，这样就不会发生这种情况，但无论如何都会发生。我在这里不明白什么？

```
public static ArrayList<Integer> getSortedEndPoints(ArrayList<Interval> leftSortedIntervals, ArrayList<Interval> rightSortedIntervals) {

    ArrayList<Integer> result = new ArrayList<Integer>();

    for (int i = 0 ; i < leftSortedIntervals.size() ; i++ ) {

        if (i >= 1 && leftSortedIntervals.get(i-1).leftEndPoint != leftSortedIntervals.get(i).leftEndPoint ) {
        result.add(leftSortedIntervals.get(i).leftEndPoint);
        }
        else if (i == 0) {

            result.add(leftSortedIntervals.get(i).leftEndPoint);

        }

    }
    result.ensureCapacity(rightSortedIntervals.size()*2);
    for (int j = 0 ; j < rightSortedIntervals.size(); j++) {
        boolean duplicate = false;
        int size = result.size()-1;
        int temp = rightSortedIntervals.get(j).rightEndPoint;
        while (size >= 0 && result.get(size) >= rightSortedIntervals.get(j).rightEndPoint ) {
            if (result.get(size) == rightSortedIntervals.get(j).rightEndPoint) {
                duplicate = true;
                break;
            }
            else {
                result.set(size+1, result.get(size));

                size--;
            }

        }
        if (duplicate = true) {

            continue;

        }
        else {
        result.add(size, temp);
        }
    }

    return result;
} 
```

错误发生在这一行：

```
else {
            result.set(size+1, result.get(size));

            size--;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:48:48.843

你有：

```
int size = result.size() - 1;
// ...
result.set(size + 1, result.get(size));
size--; 
```

因此每次都会发生错误：在第一次迭代中，`size + 1 == result.size()`所以你不能调用`result.set(size+1, anything)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:50:45.227

ensureCapacity 不会做你认为它做的事情。

ArrayList 有两个不同的值，大小和容量。容量是底层阵列中的存储量，但这不会向用户公开。大小是集合中考虑的元素数量，这在与它交互时很重要。

容量函数存在的唯一原因是，如果您事先知道要使用多少个元素，则增加容量可以让您添加元素，而不会潜在地缓慢地重新分配数组。

# java - java错误转换为unicode

> ID：15395026
> 
> 赞同：1
> 
> 时间：2013-03-13T19:46:30.827
> 
> 标签：java, android, unicode

将字符串转换为 unicode 时出现 java 异常：

```
public static boolean sendOutgoingSms(String phoneNumber, String message,
            Context context) {
    try {
        PendingIntent pi = PendingIntent.getActivity(context, 0,
                new Intent(), 0);
        SmsManager sms = SmsManager.getDefault();
        message = Charset.forName("UTF-8").encode(message).toString();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);
        return true;
    } catch (Exception ex) {
        Trace.e("Failed to send outgoing sms", ex);
    }
    return false;
} 
```

错误：

```
"java.nio.ReadWriteHeapByteBuffer, status: capacity=8 position=0 limit=4" 
```

我是否以错误的方式使用 Charset,forName？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:56:59.063

字符串内部是 Unicode。这里唯一的问题是java源文件可以有多种编码，因此`"hi"`javac编译器可以对字符串常量进行不同的编码。

确保*编辑器*和*编译器*使用相同的编码。最适合国际项目的 UTF-8。如果您使用的是像**maven**这样的构建基础设施，您可以在此处显式声明它。

然后`String message = "eĥoŝanĝo ĉiuĵaŭde";`就好了。

可以使用java工具**native2ascii**对特殊字符进行编码，所以java源码是纯ASCII，

从 Windows Latin-1 转换为`\uXXXX`u 编码（ASCII 仍然存在）。

```
native2ascii -encoding windows-1252 A.java temp.txt 
```

将 java 反向编码为 UTF-8：

```
native2ascii -reverse -encoding UTF-8 temp.txt A.java 
```

* * *

添加问题后，我认为特殊字符的问题在于短信部分。成功很大程度上取决于提供商和接收电话。最好是为相关语言选择一个公认的音译：西里尔语到拉丁语左右。

# mongodb - 在窗口 8 上安装 mongodb

> ID：15395031
> 
> 赞同：4
> 
> 时间：2013-03-13T19:46:50.787
> 
> 标签：mongodb, service

我尝试在窗口 8 上安装 mongodb。

问题是当我想安装 mongodb 服务时

```
C:\mongodb\bin\mongod.exe --auth --config C:\mongodb\mongod.cfg --install 
```

低于错误一致

```
 Wed Mar 13 19:13:23 Trying to install Windows service 'MongoDB'
 Wed Mar 13 19:13:23 Error connecting to the Service Control Manager: Access is denied. (5) 
```

如何安装 MongoDB 服务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-20T12:20:34.223

Open Command with **"Run as Administrator"**,that solved my problem

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-05T17:26:08.947

对于碰巧尝试在 Windows 8 上创建 mongodb 服务并遵循 MongoDB 网站上的说明但仍然无法成功创建服务的任何人 - 我写了这篇文章，解释了在尝试遇到问题后我是如何让它工作的在我的 Windows 8 笔记本电脑上设置 mongo 服务。希望能帮助到你！

以下是在 Windows 8 中为 MongoDB 创建 Windows 服务真正需要遵循的步骤：

**在 Windows 8 上安装 MongoDB**

1.  下载并安装 MongoDB。您可以从此处下载 32 位或 64 位版本。
2.  Make sure you install MongoDB in a folder that you can easily remember, for example: c:\mongodb\
3.  Add directories c:\mongodb\log and c:\mongodb\data
4.  Add log file c:\mongodb\log\mongo.log

**Creating a Windows service for MongoDB**

5.  Open your command window and type the following:

    cd c:\mongodb\bin\mongod.exe --install --rest -master -logpath=c:\mongodb\log\mongo.log

6.  Open the registry settings, press the Windows key and R at the same time and then type **regedit** in the Run command window.

7.  Go to HKEY_LOCAL_MACHINE >> SYSTEM >> CurrentControlSet >> services

8.  Find out MongoDB directory & edit ImagePath key Set key value as:

    C:\mongodb\bin\mongod --service --rest --master --logpath=C:\mongodb\logs\mongo.log --dbpath=C:\mongodb\data

9.  Save and exit registry editor.

10.  Open Services by pressing the Windows key and R at the same time and then type services.msc in the Run command window and click OK.

11.  Find the MongoDB service and right-click on it, select Properties

12.  Make sure the service is set to start automatically and start the service as shown below.

![enter image description here](../Images/bf7664e079ee9c73a81a81dc783cc89b.png)

13.  Open your browser and go to `http://localhost:28017/` to see if MongoDB is running correctly, you should see a page full of MongoDB details.

Link to this blog post: [http://ricardodsanchez.com/2014/09/03/install-mongodb-service-on-windows-8/](http://ricardodsanchez.com/2014/09/03/install-mongodb-service-on-windows-8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T03:10:40.283

错误消息表明您没有管理员权限。

“使用“管理权限”在命令提示符中运行以下所有命令：”

参考：[http ://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#install-and-run-the-mongodb-service](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#install-and-run-the-mongodb-service)

问候， 莫西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T13:24:39.813

感谢您的回答`Moacy Barros`，但问题不在于此，因为我在命令提示符中使用“管理权限：”运行所有命令：问题是`mongod.cfg`如果 `mongod.cfg`在编辑器中手动配置此问题解决了我们不需要在窗口 7 或服务器中执行此操作2008年

编辑：：

[在安装](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#configure-directories-and-files)MongoDB < 2.2时在旧窗口中`that i was tested`。在`Configure directories and files`一步

```
echo logpath="C:\Program Files\MongoDB\log\mongo.log" > "C:\Program Files\MongoDB\mongod.cfg" 
```

它是 `mongod.cfg` 为您的 mongodb 制作的，但它不是为我制作的，`window 8`因为我是手动制作的

```
logpath=C:\mongodb\log\mongo.log 
logappend=true
dbpath = E:\data 
```

# python - 维护socket连接，数据频率不规律

> ID：15395032
> 
> 赞同：0
> 
> 时间：2013-03-13T19:46:52.673
> 
> 标签：python, sockets

我想创建一个 python 套接字（或 SocketServer），一旦连接到单个设备，它就会保持打开的连接，以便定期检查是否已发送任何数据。套接字只会监听一个连接。

例如：

```
def get_data(conn):
    response='back atcha'
    data = conn.recv(1024)
    print 'get_data:',data
    if data:
        conn.send(response)

s = open_socket()
conn, addr = s.accept()
while True:
    print 'running'
    time.sleep(1)
    get_data(conn)
    #do other stuff 
```

一旦服务器套接字被绑定并且连接被接受，套接字在运行 .recv 时阻塞，直到连接的客户端发送一些数据或关闭它的套接字。由于我在等待不规则的数据（可能是几秒钟，也可能是一天），同时程序还需要执行其他任务，所以这种阻塞是个问题。

我不希望客户端关闭其套接字，因为它可能需要随时向（从）服务器发送（或接收）数据。是在单独的线程中运行它的唯一解决方案，还是有一种简单的方法来设置客户端/服务器套接字以永久保持连接（这安全吗？它将在 VLAN 上运行），而不是在没有阻塞时阻塞数据已收到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:57:45.727

您正在寻找非阻塞 I/O，也称为异步 I/O。使用一个单独的线程来阻塞它是非常低效的，但它非常简单。

对于 Python 异步 I/O 框架，我强烈推荐[Twisted](http://twistedmatrix.com/trac/)。还可以查看标准库附带的[asyncore 。](http://docs.python.org/2/library/asyncore.html)

# javascript - 检查字符串中是否已存在占位符文本

> ID：15395034
> 
> 赞同：0
> 
> 时间：2013-03-13T19:46:53.947
> 
> 标签：javascript, jquery, html

我有一个#error 段落。每次提交时表单中都有错误。输入占位符文本被添加到#error 段落中。

**我的问题：**

每次用户单击提交时都会发生这种情况。所以#error 消息返回：

> 请填写您的名字，姓氏，公司，职位，名字，姓氏，公司，职位，名字，姓氏，公司，职位，名字，姓氏，公司，职位，名字，姓氏，公司, 职位, 名字, 姓氏, 公司, 职位,

**我已经寻找其他解决方案并尝试了这个：**

```
if (input.attr('placeholder').indexOf($('#error')) >= 0){
} else{
     $('#error').append(input.attr('placeholder').toLowerCase() + ', ');
} 
```

有什么方法可以检查#error 消息中是否已经存在占位符文本？[这是一个小提琴](http://jsfiddle.net/8YgNT/18/)。我很抱歉，它是如此令人费解。但它是我一直在努力的，并且很方便。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:01:04.523

[http://jsfiddle.net/8YgNT/20/](http://jsfiddle.net/8YgNT/20/)

```
var errorText = '';

//Validate required fields
for (i = 0; i < required.length; i++) {
    var input = $('#' + required[i]);

    if ((input.val() == "") || (input.val() == emptyerror)) {
        input.addClass("tobefixed");
        errornotice.fadeIn(750);

        if (input.attr('placeholder').indexOf($('#error')) >= 0) {
            // do nothing
        } else {
            errorText = errorText + $(input).attr('placeholder').toLowerCase() + ', ';
        }

        input.val(emptyerror);
        errornotice.fadeIn(750);
    } else {
        input.removeClass("tobefixed");
    }
}

$('#error').html('').append('Please fill in your ' + errorText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:00:25.327

我简单地在你的小提琴中添加了一行，它现在正在工作：

```
required = ["id_first_name", "id_last_name", "id_firmbox", "id_job_title"];

errornotice = $("#error");
emptyerror = "Please fill out this field.";

$("#startform").submit(function(){
//Validate required fields

$("#error").html("Please fill in your");

for (i=0;i<required.length;i++) {
    var input = $('#'+required[i]);
    if ((input.val() == "") || (input.val() == emptyerror)) {
        input.addClass("tobefixed");        
        errornotice.fadeIn(750);

        // =====Here===== //
        if (input.attr('placeholder').indexOf($('#error')) >= 0){
        } else{
            $('#error').append(input.attr('placeholder').toLowerCase() + ', ');
        }
        // ============== //

        input.val(emptyerror);
        errornotice.fadeIn(750);
    } else {
        input.removeClass("tobefixed");
    }
 }

 if ($(":input").hasClass("tobefixed")) {
    return false;
 } else {
    errornotice.hide();
    return true;
 }
});
$(":input").focus(function(){
 if ($(this).hasClass("tobefixed") ) {
     $(this).val("");
     $(this).removeClass("tobefixed");
 }
}); 
```

这条线做所有的伎俩：

```
$("#error").html("Please fill in your"); 
```

萨卢多斯 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:01:22.717

如果您想检查是否`#error`包含您想知道的字符串，您可以使用

```
($('#error').text().indexOf(a_string)) != -1 
```

如果`#error`包含，这将返回 true `a_string`。

[关于在这个问题中](https://stackoverflow.com/questions/1789945/method-like-string-contains-in-javascript)搜索其他字符串的字符串有更长的讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:04:30.060

看来您做错了（并且忘记了[`text`](http://api.jquery.com/text/)摆脱`#error`元素）：

```
if ( $('#error').text().indexOf( input.attr('placeholder') ) >= 0) 
```

# c# - 如何使用 C# 在 XML 文件中查找元素并编辑其属性

> ID：15395039
> 
> 赞同：1
> 
> 时间：2013-03-13T19:47:15.373
> 
> 标签：c#, xml

我有一个 xml 文件：

```
<srtch Name="tchfn" version="v.1.1.02"  />
<vrttch Name="tchfn 02" version="v.1.1.03"  />
<ghsch Name="tchfn 03" version="v.1.1.04"  /> 
```

我需要检查是否`vrttch`存在，如果是，我需要更改版本。如果不存在需要创建新条目。

我对 C# 完全陌生。我试过了`xmlreader`。我能够检查它是否属于类型元素，但我无法设置属性。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:54:03.210

这应该可以解决问题

```
 public static void Main()
    {
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load("XMLFile1.xml");

        XmlNodeList xNodeList = xDoc.SelectNodes("//vrttch");

        if (xNodeList.Count != 0)
        {
            xNodeList[0].Attributes["version"].Value = "Whateva";
        }
        xDoc.Save("XMLFile1.xml");
    } 
```

您可能遇到的一个问题是 xml 文件的路径。要查找项目的本地路径在哪里，请右键单击您的项目并单击`open in File explorer`，然后转到`bin`, `debug`，这就是您的 xml 文件所在的位置

如果这听起来对您来说太难了，那么将路径设为绝对路径可能会更容易，例如：

```
xDoc.Load(@"c:\temp\XMLFile1.xml"); 
```

确保在您的 XML 中放置一个根节点，就像这样

```
<root>
  <srtch Name="tchfn" version="v.1.1.02"  />
  <vrttch Name="tchfn 02" version="v.1.1.03"  />
  <ghsch Name="tchfn 03" version="v.1.1.04"  />
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:52:09.633

尝试[XDocument](http://msdn.microsoft.com/en-gb/library/system.xml.linq.xdocument.aspx)并调用 Descendents("vrttch") 以查看其是否为空。如果是这样，它不存在

# php - mysql-php，创建临时表时出错

> ID：15395041
> 
> 赞同：1
> 
> 时间：2013-03-13T19:47:20.187
> 
> 标签：php, mysql, create-table, temp-tables

我终于准备好将查询插入代码中，但现在运行整个查询时出现错误。我相信这与 drop table 功能有关。我最初将它们内联，然后读到我应该删除它并在查询的开头添加，如下所示：

```
 $query = $this->db->query("DROP TABLE IF EXISTS resultx;");
    $query = $this->db->query("DROP TABLE IF EXISTS resulty;");

$query = $this->db->query("
 CREATE TEMPORARY TABLE resultx AS
 select *, CONCAT(Credit,'_',OrderStat) as consol from (.......... 
```

我正在创建两个临时表，然后在最后一个查询中加入它们。我不确定如何将第二个 DROP 临时表放回完整查询中，或者这是否是正确的方法。我得到的错误是：

```
A Database Error Occurred
Error Number: 1064
You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use 
near 'CREATE TEMPORARY TABLE resulty AS select packetDeet,Sales,SaleDate, UserID,Lead' at line 15 
```

询问：

```
CREATE TEMPORARY TABLE resultx AS 
    select 
        *,
        CONCAT(Credit,'_',OrderStat) as consol 
    FROM 
        ( select 
              packetDetailsId, GROUP_CONCAT(Credit) AS Credit,
              GROUP_CONCAT(AccountNum) AS AccountNum,
              GROUP_CONCAT(OrderStat) AS OrderStat 
          FROM 
             ( SELECT 
                   pd_extrafields.packetDetailsId, 
                   CASE WHEN 
                       pd_extrafields.ex_title LIKE ('%Credit%') 
                       THEN pd_extrafields.ex_value 
                       ELSE NULL 
                   END as Credit, 
                  CASE WHEN 
                       pd_extrafields.ex_title LIKE ('%Account%') 
                       THEN pd_extrafields.ex_value 
                       ELSE NULL 
                  END as AccountNum, 
                 CASE WHEN 
                       pd_extrafields.ex_title LIKE ('%Existing%') 
                       THEN pd_extrafields.ex_value 
                       ELSE NULL 
                 END as OrderStat 
               FROM pd_extrafields 
             ) AS myalias 
          GROUP BY packetDetailsId 
        )as TempTab; 
CREATE TEMPORARY TABLE resulty AS select packetDeet,Sales,SaleDate, ......... 
```

请让我知道这是否有意义，或者我需要用更多信息更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:14:01.590

如果您尝试在一次调用中执行两个查询，`$this->db->query()`则问题可能是您的数据库库不允许多个查询。

要查看这是否是问题所在，您应该将它们分成两个单独的查询。

# c# - 奇怪：找不到 C# 类型或命名空间名称 - 构建成功

> ID：15395042
> 
> 赞同：28
> 
> 时间：2013-03-13T19:47:31.297
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, project-reference

在 VS2012 IDE 中打开项目时，我的项目中出现了一个奇怪的错误。在我使用另一个引用项目的地方，它突然说`"Type or Namespace name could not be found"`。通过“说”，我的意思是当我将鼠标悬停在它上面时，它的文本带有红色下划线和错误。智能感知不适用于该代码。**但是（这是奇怪的部分），错误不会显示在错误控制台中，并且项目可以正常构建和运行。**

我什至可以调试和单步调试代码，它工作得非常好。因此，在运行时项目被很好地引用，但在设计时 IDE 找不到它。这在过去的两周内有效，然后突然变得有点疯狂。这真的很烦人，因为我在没有智能感知的情况下编码很垃圾！

有没有人见过这样的事情或有什么建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-11T18:58:35.177

我有这个。我在项目属性的“应用程序”部分引用了“目标框架”设置为“.Net Framework 4”的程序集。我将其更改为“.Net Framework 4.5”，不仅在引用的程序集项目中，而且在我正在构建的项目中并且它有效。试试这个。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T19:50:13.297

我发现这是 VS2012 的一个已知问题。检查您的构建方式，64 位还是 32 位。它不适用于 64 位，但适用于 32 位。它会说缺少东西并且设计将无法正常工作，但是程序会运行良好。我听说尚未发布的新 VS 更新将修复它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-15T18:00:37.573

手动删除对其他项目库的所有引用并重新添加。Intellisense 会在那时重建它需要的任何东西，并且这样做在过去对我有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-29T09:45:19.640

此问题的另一个来源是多个项目包含相同命名空间的代码的解决方案。编译器可以处理这个。智能感知不会。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-27T18:10:38.657

与此处的其他几个答案相关，我有一个使用“数据”命名空间的“数据”项目。构建良好，但最近才开始显示来自智能感知的错误（即使它继续构建良好。）（VS 2015。）

**我通过将“数据”项目和命名空间更改为“MyCompany.Data”来解决此问题。**

奇怪的是，问题似乎直到最近才出现，但做出改变确实解决了它。推测命名空间与另一个项目或引用存在冲突，可以构建良好，但智能感知无法处理。

您可以在**项目属性的应用程序选项卡中**更改它。您还可以打开一个**EDMX 图**，右键单击，选择模型浏览器，在模型浏览器选项卡中选择第二个可折叠项，点击属性，您将在那里找到生成的实体框架实体和上下文的**命名空间选项**。（类似地，如果您修改实体框架模型的命名空间，您可能还需要更改相关连接以匹配 [in Web.Config for ASP.Net 和 MVC。]）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T19:55:04.373

确保没有`class`名称与 Project 相同`default namespace`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T21:23:47.213

确保您没有在 .net 4 项目中引用 .net framework 4.5 项目！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-04T20:19:20.657

在文本编辑器中检查您的 .proj 文件，并确保引用的路径正确。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-29T17:35:11.107

如果您在引用的文件上将**Build Action**设置为“None”并忘记它，也会发生这种情况。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-05T20:45:36.073

我遇到了同样的问题，它可以正常构建和运行，但它总是会显示该错误，我无法在课堂上使用智能感知。

我实际上使用在新文件中创建类的自动方法来解决问题，然后只是从真实类中复制代码。我删除了旧文件，重命名了新文件，现在它可以工作了。

# eclipse - 更新了 eclipse (Juno SR2)，但现在无法更新

> ID：15395044
> 
> 赞同：2
> 
> 时间：2013-03-13T19:47:38.737
> 
> 标签：eclipse

上：

```
Version: Juno Service Release 2
Build id: 20130225-0426 
```

但是，现在当我进行更新时，我得到：'没有要搜索的更新站点。您想打开“可用软件站点”首选项吗？

这样做表明列表是空的，并且不再有更新站点。;(

还有其他人有这个问题吗？知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:58:05.223

将以下 xml 代码保存为 xml 文件并将其导入`Preferences -> Install/Update -> Avaliable Software Sites`。也许有更多的更新站点（我从我的 eclipse 中导出了它们），就像在标准 eclipse 上一样，但它会解决你的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<bookmarks>
    <site url="http://download.eclipse.org/releases/indigo" selected="true" name="Indigo repository"/>
   <site url="http://download.eclipse.org/releases/juno/" selected="true" name="Juno"/>
   <site url="http://download.eclipse.org/linuxtools/update" selected="false" name="Linux Tools"/>
   <site url="http://download.eclipse.org/linuxtools/updates-nightly" selected="false" name="Linux Tools"/>
   <site url="http://download.eclipse.org/tools/orbit/downloads/drops/R20110523182458/repository/" selected="true" name="Orbit-I20110523182458"/>
   <site url="http://download.eclipse.org/tools/orbit/downloads/drops/R20120526062928/repository/" selected="true" name="Orbit-I20120526062928"/>
   <site url="http://download.eclipse.org/eclipse/updates/4.2" selected="true" name="The Eclipse Project Updates"/>
   <site url="http://community.polarion.com/projects/subversive/download/eclipse/3.0/juno-site/" selected="true" name="Update Site"/>
   <site url="http://download.eclipse.org/edapt/update-site/" selected="true" name="Update Site"/>
   <site url="http://texlipse.sourceforge.net" selected="true" name="update site: http://texlipse.sourceforge.net"/>
   <site url="http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/" selected="true" name="Xtext All In One - Releases"/>
   <site url="http://download.itemis.de/updates/" selected="true" name="Xtext Composite Update Site"/>
   <site url="http://borisvl.github.com/Pdf4Eclipse" selected="false" name=""/>
   <site url="http://dev.eclipse.org/svnroot/dsdp/org.eclipse.tm.tcf/releases/0.4.0" selected="false" name=""/>
   <site url="http://download.eclipse.org/birt/update-site/3.7" selected="false" name=""/>
   <site url="http://download.eclipse.org/datatools/updates" selected="false" name=""/>
   <site url="http://download.eclipse.org/eclipse/updates/3.7" selected="false" name=""/>
   <site url="http://download.eclipse.org/egit/updates" selected="false" name=""/>
   <site url="http://download.eclipse.org/jwt/update-site" selected="false" name=""/>
   <site url="http://download.eclipse.org/mat/1.1/update-site/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/emf/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/emft/eef/updates/0.7.1/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/emft/mwe/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/emft/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/gmf/updates/milestones/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/gmf/updates/releases/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/m2t/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/m2t/updates/releases/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/m2t/xpand/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/mdt/papyrus/updates/milestones/0.8" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/mdt/papyrus/updates/releases/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/mdt/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/tmf/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/modeling/tmf/xtext/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/mylyn/releases/3.6" selected="false" name=""/>
   <site url="http://download.eclipse.org/mylyn/releases/indigo/" selected="false" name=""/>
   <site url="http://download.eclipse.org/objectteams/updates/2.0" selected="false" name=""/>
   <site url="http://download.eclipse.org/objectteams/updates/contrib" selected="false" name=""/>
   <site url="http://download.eclipse.org/rt/rap/1.3/runtime" selected="false" name=""/>
   <site url="http://download.eclipse.org/rt/rap/1.3/tooling" selected="false" name=""/>
   <site url="http://download.eclipse.org/sequoyah/updates/2.0/" selected="false" name=""/>
   <site url="http://download.eclipse.org/stp/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/technology/actf/0.9/update-site/" selected="false" name=""/>
   <site url="http://download.eclipse.org/technology/emft/updates/" selected="false" name=""/>
   <site url="http://download.eclipse.org/technology/epp/updates/udc/" selected="false" name=""/>
   <site url="http://download.eclipse.org/technology/subversive/0.7/update-site/" selected="false" name=""/>
   <site url="http://download.eclipse.org/tm/updates/3.3" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/cdt/releases/indigo" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/gef/updates/milestones/" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/gef/updates/releases" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/mylyn/update/e3.4/" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/orbit/downloads/drops/R20100519200754/repository" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/orbit/downloads/drops/R20120119162704/repository" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/orbit/downloads/drops/updateSite" selected="false" name=""/>
   <site url="http://download.eclipse.org/tools/ptp/updates/indigo/" selected="false" name=""/>
   <site url="http://download.eclipse.org/windowbuilder/WB/integration/3.7" selected="false" name=""/>
   <site url="http://download.itemis.com/updates/" selected="false" name=""/>
   <site url="http://www.eclipse.org/downloads/download.php?file=/diffmerge/releases/0.1.0/EMF-DiffMerge-0.1.0.v20121106-1043-Site-Incubation.zip" selected="true" name=""/>
   <site url="http://www.eclipse.org/modeling/emft/?project=search#search" selected="false" name=""/>
   <site url="http://www.eclipse.org/modeling/emft/updates/" selected="false" name=""/>
   <site url="http://www.eclipse.org/modeling/mdt/?project=papyrus#papyrus" selected="false" name=""/>
   <site url="http://www.eclipse.org/modeling/updates/" selected="false" name=""/>
</bookmarks> 
```

# javascript - Python CGI 以不同的方式响应相同的 jQuery/AJAX 请求

> ID：15395052
> 
> 赞同：0
> 
> 时间：2013-03-13T19:47:58.967
> 
> 标签：javascript, python, json, jquery, cgi

我正在实现一个系统，网页（HTML + Javascript）通过 CGI Python 服务器端脚本进行通信。此页面之一发出请求：

```
function doQuery(tweets) {

    $.getJSON("http://linuxproj.ecs.soton.ac.uk/~onme1g10/watchitlater/cgi-bin/engine.cgi?loading="+ uid +"&tweets="+ tweets, function(data) {

    }
    )
    .success(function(data) {
      //alert("complete: " + data['test']);
      if (tweets == 1) {
        //console.log('tweets is one')
        tweetsData = data;
        length = Object.keys(tweetsData["tweets"]).length;
        intervalVar = window.setInterval(showTweets, 1000);
        intervalVar2 = window.setInterval(queryState, 1500);
        //console.log("set intervals");
      }
      else {
        console.log('HERE: ' + data["correct"])
        queryData = data;
        // Function to update state variables
      }
    })
    .error(function(xhr, textStatus, error) {
      //alert("error:" + textStatus);
      console.log(xhr);
      console.log(textStatus);
      console.log(error);
    })
    .complete(function() {/*alert("complete!");*/ });

  } 
```

此请求具有`?tweets=1`或`?tweets=0`，其想法是服务器必须根据该值返回不同的 JSON 对象。在服务器上我有：

```
if fs.has_key('state'):
    createStateFile()
elif fs.has_key('loading'):
    # Return JSON objects
    print "Content-type: application/json"
    print
    option = fs['tweets'].value
    if option == 0:
        response = {'correct':'1'}
        print(json.JSONEncoder().encode(response))
    else:
        response = harvestTweets()
        print(json.JSONEncoder().encode(response))

else:
    # Return main page
    print "Content-type: text/html"
    print
    main() 
```

这不起作用。else 子句（其中 option == 1）执行得很好，但另一个选项返回一个未指定的对象。我尝试了多种方式（两个不同的 AJAX 请求等），但它不起作用。它不喜欢多次请求或多次返回。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:40:37.997

问题确实很简单。在 Python CGI 脚本中，当我这样做时，`if tweets == 1: ... else: ...`它总是转到 else 子句，因为我正在比较一个“tweets”，它是一个来自 FieldStorage 的字符串和数字 1。它永远不会评估为真，因此它总是返回相同的回答。

# c# - CS1501：方法 'btnsaveandclose_Click' 没有重载需要 0 个参数

> ID：15395061
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:48:31.313
> 
> 标签：c#, asp.net, html

嗨，当我尝试运行 aspx.cs 时出现此错误

```
protected void btnsaveandclose_Click(object sender, EventArgs e)
{

    try
    {
        save();
    }
    catch (Exception ex)
    {
    }
} 
```

aspx 是：

```
<asp:button id="btnsaveandclose" runat="server" text="save & close" 
     CausesValidation="true" onclick="btnsaveandclose_Click()" 
     usesubmitbehavior="false"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T19:50:35.730

您`onclick`正在尝试在那里调用该函数（并且没有必要的参数）：

```
onclick="btnsaveandclose_Click()" 
```

应该：

```
onclick="btnsaveandclose_Click" 
```

您只需要使用事件处理程序的*名称*，而不是调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:50:36.007

删除你的括号`onclick=btnsaveandclose_Click()`

# arrays - 我如何为纸牌游戏 War、cleaner 编写函数？

> ID：15395062
> 
> 赞同：0
> 
> 时间：2013-03-13T19:48:46.120
> 
> 标签：arrays, unity3d, unityscript

我一直在写纸牌游戏战争，`Unity`在战争功能中，我失去了 2 张牌。有没有更简单的方法可以做到这一点，或者任何人都可以让我知道我做错了什么？

```
while(Flipped1[Flipped1.length-1].CardValue == Flipped2[Flipped2.length-1].CardValue)
{
    for(var i= 0; i < 3; i++)
    {
        //adds a card from the players hand to the flipped pile
        Flipped1.Add(playerOneCards[0]);
        Flipped2.Add(playerTwoCards[0]);

        //removes card from the array.
        playerOneCards.RemoveAt(0);
        playerTwoCards.RemoveAt(0);
    }

    p1War = Flipped1[Flipped1.length-1].img;
    p2War = Flipped2[Flipped2.length-1].img;

    Debug.Log(Flipped1[i].CardValue);
    Debug.Log(Flipped2[i].CardValue);

    Debug.Log(Flipped1[0].CardValue);
    Debug.Log(Flipped2[0].CardValue);

    if(Flipped1[i].CardValue < Flipped2[i].CardValue)
    {                                                           
        for(var j =0; j < Flipped1.length +2 || j < Flipped2.length+2; j++)
        {
            playerTwoCards.Add(Flipped1[0]);
            playerTwoCards.Add(Flipped2[0]);

            //removes card from the array.
            Flipped1.RemoveAt(0);
            Flipped2.RemoveAt(0);
        }
    }

    else
    {
        for(var q =0; q < Flipped1.length+2|| q < Flipped2.length+2; q++)
        {
            playerOneCards.Add(Flipped2[0]);
            playerOneCards.Add(Flipped1[0]);

            //removes card from the array.
            Flipped1.RemoveAt(0);
            Flipped2.RemoveAt(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:59:07.477

您的问题出在 for 循环中的逻辑中（在 if/else 内）。你实际上想要做类似的东西`while (Flipped1.length > 0)`，因为你想要做的是清空翻转数组，而不是有效地将它与一个递增的 var 减去一个常量进行比较。

# html - 代码或前置元素在 Bootstrap 上无法正常工作

> ID：15395063
> 
> 赞同：0
> 
> 时间：2013-03-13T19:48:46.603
> 
> 标签：html, twitter-bootstrap

我正在使用 Twitter Bootstrap 框架为自己创建一个登录页面，并且我想在我的登录页面上显示一些代码，这就是为什么我将我的代码写入`<code></code>`这些`<pr></pre>`元素但它没有显示的原因。我把我的代码如下：

```
<code>
<command type="?">Click Me!</command>
</code> 
```

或者

```
<pre>
<command type="?">Click Me!</command>
</pre> 
```

但是，Twitter Bootstrap 只向我显示“点击我！” 单词。他没有向我展示`<code>`or`<pre>`元素的整个代码。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:53:54.320

您仍然必须分别用and替换`<`and`>`字符，否则它们将被解释为 HTML：`&lt;``&gt;`

```
<pre>
&lt;command type="?"&gt; Click Me! &lt;/command&gt;
</pre> 
```

# c++ - scanf c ++中的分段错误

> ID：15395068
> 
> 赞同：1
> 
> 时间：2013-03-13T19:49:02.923
> 
> 标签：c++, segmentation-fault, scanf

在我的程序中，在某些时候，我做了一个`scanf(" %d %d", &num1, &num2);`并且我不断得到一个 SegmentationFault。我不明白为什么......我的意思是，他们是`int`。我不确定是否应该为他们分配内存。这是完整的代码。

```
typedef struct my_type{
   int attr1;
   bool attr2;
} my_type;

int main (int argc, char * const argv[]) {

    int testCase, result, totalDom, numLines, num1, num2; 
    int aux_map_int = 0, linesScanned = 0;
    bool firstTime;
    scanf("%d\n %d %d", &testCase, &totalDom, &numLines);
    printf("totalDom: %d; numLines: %d\n", totalDom, numLines);

    std::map<int, std::vector<my_type> > my_map;

    while(aux_map_int < testCase+1){
        std::vector<my_type> my_vector;
        firstTime=true;

        while (linesScanned < numLines) {

            std::cin>>num_dom>>num_next_dom; /** SEGFAULT **/

            if(firstTime){
                my_vector[0].attr1 = num1;
                my_vector[0].attr2 = true;
                firstTime=false;
            }

            my_vector[num1].attr1 = num2;
            my_vector[num1].attr2 = false;

            linesScanned++;
        }
        aux_map_int++;
        my_map.insert(std::pair<int, std::vector<my_type> >(aux_map_int, my_vector));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:51:41.873

%d 需要指向 int 的指针。根据您自己的话，您正在传递指向双打的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:55:06.130

更新：您的分段错误不是因为 scanf，而是因为您在无限 while 循环内的向量中插入元素。检查 aux_map_int 是否增加:)

```
 std::cin>>num_dom>>num_next_dom; /** SEGFAULT **/ 
```

我将假设该行应为

```
 std::cin>>num1>>num2; /** SEGFAULT **/ 
```

如果是这样，当您尝试在内部 while 循环中插入 my_vector 时会出现段错误：

```
 if(firstTime){
            my_vector[0].attr1 = num1;
            my_vector[0].attr2 = true;
            firstTime=false;
        }

        my_vector[num1].attr1 = num2;
        my_vector[num1].attr2 = false; 
```

在此之前，您还没有在向量中插入任何内容，并且您正在尝试从中读取。这是也会出现段错误的代码

```
#include <vector>

typedef struct my_type{
   int attr1;
   bool attr2;
} my_type;

int main (int argc, char * const argv[]) 
{
    std::vector<my_type> v;
    v[0].attr1 = 1;
    v[0].attr1 = true;
} 
```

修复上面的代码，您将学会如何解决您的问题。对不起，我不能给你答案：）

另外，您在 std::cin 上使用 scanf 是否有特定原因？如果答案是否定的，那么请改用这个：

```
#include <iostream>
....
std::cin>>num1>>num2; 
```

它也可以正常工作，没有任何通常的 scanf 麻烦。

如果你必须使用 scanf，我会推荐你​​参考它的文档。您的问题是您没有使用正确的格式说明符。与其只是告诉你它是什么，我宁愿[你自己读](http://en.cppreference.com/w/cpp/io/c/fscanf)。

从您发布的代码看来，您使用 scanf 的原因是为了处理空白。如果是这种情况，请使用 std::cin 并且您的空白问题已成为历史。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:58:31.923

正如@Tomek 所说。%d 代表整数。%f for float 试试这个：

```
double num1, num2;
char str[128];
scanf("%f %f", &num1, &num2); 
```

# javascript - 允许空格

> ID：15395070
> 
> 赞同：0
> 
> 时间：2013-03-13T19:49:13.747
> 
> 标签：javascript, jquery, html

所以，如果我要在我的输入中添加一些空格（**测试测试**）并点击提交，如果我双击提交，它也会显示为**测试+测试，它显示它是****test%2Btest**而不是**test+test** 需要帮助用那些东西..

```
<form name="input" action="" method="get">
Search: <input type="text" name="search">
<input type="submit" value="Submit">
  <div id="result"></div>
</form> 
```

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

$(window).on('hashchange', updateVal);

updateVal();

function updateVal() {
   var values = window.location.hash.slice(1).split('/');
   $("[name=" + values[0] + "]").val(decodeURIComponent(values[1]));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:55:19.940

`+`每次设置输入值时，您只需要替换到空格：

```
$("[name=" + values[0] + "]").val(decodeURIComponent((values[1] || '').replace(/\+/g, ' '))); 
```

您可以在这里看到工作示例：http: [//jsbin.com/elewux/2/edit](http://jsbin.com/elewux/2/edit)

# ruby-on-rails - 如何确保 PostgreSQL 驱动器是线程安全的

> ID：15395071
> 
> 赞同：4
> 
> 时间：2013-03-13T19:49:14.660
> 
> 标签：ruby-on-rails, postgresql, sidekiq

我想`Sidekiq`用于我的后台工作。但要求是 gem 依赖项是线程安全的。

在他们的维基页面中，他们提到：

```
 Some gems can be troublesome:

   * pg (the postgres driver, make sure PG::Connection.isthreadsafe returns true) 
```

我将`pg`gem 用于 PostgreSQL。

我的问题是：如何将 PG::Connection.isthreadsafe 更改为 true？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:06:55.233

gem 调用这个 c 库调用：

`PQisthreadsafe();`

记录在这里：

[http://www.postgresql.org/docs/8.2/static/libpq-threading.html](http://www.postgresql.org/docs/8.2/static/libpq-threading.html)

相关文档是这样的：

> 如果在构建 PostgreSQL 发行版时使用了配置命令行选项 --enable-thread-safety，则 libpq 是可重入且线程安全的。

因此，您将需要重新编译 libpg（或获取线程安全包，如果可用）以使其真正成为线程安全的。

# google-drive-api - 一个 Google Drive 帐户可以有多个用户吗？

> ID：15395079
> 
> 赞同：1
> 
> 时间：2013-03-13T19:49:28.627
> 
> 标签：google-drive-api

我有一个我们正在构建的 Web 应用程序。我们需要一个文本编辑器来允许我们的注册用户创建和/或编辑文档。我们希望在我们的应用程序中使用文档，但希望使用 Google 驱动器界面来创建/编辑/上传文档。我关心的是 OAuth2 过程。我希望我们的网络应用程序成为身份验证器，并允许我们的用户访问我们帐户下的文件/文件夹，而不是他们的。我们可以这样做吗？我们所有的用户都已经通过了我们的应用程序的身份验证，我们不希望他们必须使用他们的个人凭据来访问我们的应用程序使用的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:14:22.437

根据谷歌的文档：

> 每个 Gmail 帐户都旨在供个人用户使用。如果您有多个用户经常从不同位置访问同一个帐户，您可能会达到 Gmail 阈值，并且您的帐户将被暂时锁定。

轶事证据证实了这一点：一所学校的一名工作人员[报告了一个 403 错误](https://productforums.google.com/forum/?fromgroups=#!topic/drive/RUunSecqvko)，可能是由于太多人同时登录同一个帐户造成的。

# android - Android 指针索引与标识符

> ID：15395091
> 
> 赞同：1
> 
> 时间：2013-03-13T19:49:56.720
> 
> 标签：android

我正在阅读Beginning Android Games(for Beginners)，我必须说这非常有帮助。

我的主题是处理多点触控事件，到目前为止，**最令人困惑的部分是***指针索引*和*标识符（ID's）*之间的区别。我知道索引并不总是对应于手指的数量，但是 ID 呢？

假设我将 3 个手指放在屏幕上；我可以假设第一根手指会有`Index var`, 并且对于`ID 0`. 食指`Index var`和`ID 1`，等等？ID 是否总是以这种方式对应，如果不对应，那么`Identifier`手指是什么？

# php - 选择一组具有特定记录数据的行

> ID：15395092
> 
> 赞同：0
> 
> 时间：2013-03-13T19:50:03.837
> 
> 标签：php, mysql, sql

我今天在这里提出一个让我相当困惑和困惑的问题。也许有人可以给我一些帮助。

我有三个表如下。请注意，它们已针对此问题进行了简化。

//table_checks//

```
check_id |task_id| status
   1     |  1    | Done
   2     |  1    | Done
   3     |  1    | Done
   4     |  2    | Done
   5     |  2    | Not Done
   6     |  2    | Not Done
   7     |  2    | Not Done
   8     |  2    | Done
   9     |  3    | Done
  10     |  3    | Done
  11     |  3    | Not Done
  12     |  3    | Done 
```

//table_user//

```
user_id |  email   | type
   1    |  a@a.com | IN
   2    |  b@b.com | IN
   3    |  c@c.com | EX 
```

//table_chk_usr//

```
check_id |user_id 
   1     |  1    
   2     |  1    
   3     |  1    
   4     |  2    
   5     |  2     
   6     |  2     
   7     |  2     
   8     |  2     
   9     |  3     
  10     |  3     
  11     |  3     
  12     |  3 
```

下面是三个表及其在 table_chk_usr 表中的关系。

我的问题是如何从表中查询和选择`table_user`with 类型的行，其中分配的所有用户都使用= 。`'IN'``table_user``task_ids``table_checks``status``done`

所以预期的结果应该如下

//table_user//

```
user_id |  email   | type
   1    |  a@a.com | IN 
```

由于 user_id 为 1 已完成所有状态为 done 的 task_id。

我希望这对你们这些正在阅读的人有意义。任何帮助都感激不尽。

请注意，我使用 PHP 作为我的服务器端语言，如果这有任何帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:09:32.700

我想这就是你要找的。

```
select user.user_id, user.email, user.type, 
sum(if(status = 'done',1, 0)) as done, count(*) as checks
  from checks
   join chk_user on checks.check_id = chk_user.check_id
   join user on chk_user.user_id = user.user_id
   group by chk_user.user_id
   having done = checks 
```

[sqlFiddle](http://www.sqlfiddle.com/#!2/e7b6a/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:53:21.283

您可以在此处使用连接，但可能有更好的方法。

```
SELECT * FROM table_checks
INNER JOIN table_chk_usr
  ON table_checks.check_id = table_chk_usr.check_id 
INNER JOIN table_user
  ON table_chk_usr.user_id = table_user.user_id
WHERE table_checks.status = 'Done'
AND table_user.type = 'IN' 
```

# mysql - 嵌套查询，我认为

> ID：15395097
> 
> 赞同：0
> 
> 时间：2013-03-13T19:50:34.883
> 
> 标签：mysql, entity-attribute-value

我有一个包含以下字段和示例数据的表：

```
user_id     meta_key           meta_value
-------     --------           ----------
'69'        'usertemplate'     'template1'
'69'        'userstartdate'    '07/26/2012 02:01:37 PM'
'69'        'userenddate'      '07/26/2013 02:01:37 PM'
'70'        'usertemplate'     'template1'
'70'        'userstartdate'    '07/26/2013 02:01:37 PM'
'70'        'userenddate'      '07/26/2014 02:01:37 PM'
'71'        'usertemplate'     'template2'
'71'        'userstartdate'    '07/26/2012 02:01:37 PM'
'71'        'userenddate'      '07/26/2013 02:01:37 PM'
'72'        'usertemplate'     'template2'
'72'        'userstartdate'    '07/26/2011 02:01:37 PM'
'72'        'userenddate'      '07/26/2012 02:01:37 PM'
'73'        'usertemplate'     'template2'
'73'        'userstartdate'    '07/25/2011 02:01:37 PM'
'73'        'userenddate'      '07/25/2012 02:01:37 PM' 
```

我的目标是获取 **user_id**s 列表（例如）：

用户模板 = 模板 2

用户开始日期 > 07/20/2011 02:01:37 PM

用户开始日期 < 07/30/2011 02:01:37 PM

我将如何编写此查询？

编辑：这是我迄今为止尝试过的：

```
SELECT user_id 
FROM myTable t 
  INNER JOIN myTable s 
    ON t.user_id = s.user_id 
      AND s.meta_key = 'userstartdate' 
      AND CAST(s.meta_value AS DATE) > '07/20/2011 02:01:37 PM' 
  INNER JOIN myTable e 
    ON t.user_id = e.user_id 
      AND e.meta_key = 'userenddate' 
      AND CAST(e.meta_value AS DATE) < '07/30/2011 02:01:37 PM' 
WHERE t.meta_key = 'usertemplate' 
  AND t.meta_value = 'template2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:53:53.857

您可以通过几个自联接来做到这一点：

```
SELECT user_id
FROM myTable t
INNER JOIN myTable s ON t.user_id = s.user_id 
    AND s.meta_key = 'userstartdate' 
    AND CAST(s.meta_value AS DATE) > '07/20/2011 02:01:37 PM'
INNER JOIN myTable e ON t.user_id = e.user_id 
    AND e.meta_key = 'userenddate' 
    AND CAST(e.meta_value AS DATE) < '07/30/2011 02:01:37 PM'
WHERE t.meta_key = 'usertemplate' AND t.meta_value = 'template2' 
```

我将把转换为日期数据类型和比较的确切语法作为练习。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:55:12.920

这应该有效：

```
SELECT DISTINCT T.user_id
 FROM tbl T
 INNER JOIN tbl T1
         on T.user_id = T1.user_id 
         AND T1.meta_key = 'usertemplate'
         AND T1.meta_value = 'template2'
 INNER JOIN tbl T2
         on T.user_id = T2.user_id 
         AND T2.meta_key = 'userstartdate'
         AND T2.meta_value > '07/20/2011 02:01:37 PM'   
         AND T2.meta_value < '07/30/2011 02:01:37 PM' 
```

# javascript - 隐藏在网格 JS EXT 中的行

> ID：15395100
> 
> 赞同：0
> 
> 时间：2013-03-13T19:50:36.107
> 
> 标签：javascript, extjs, grid

我需要简单地在我的网格中添加一个函数，当用户第一次访问时隐藏行。之后，通过我的网格中已经出现的最小化/展开图标，用户可以展开组并查看行。我的代码是：

```
// create the grid
var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    hideHeaders: true,
    features: [groupingFeature],

    columns: [
        {text: "Questions",groupable: false, flex: 1, dataIndex: 'species',  sortable: true}
    ],
    width: 250,
    height:260,
    split: true,
    region: 'west'
});

// define a template to use for the detail view

var bookTplMarkup = [
    '{resposta}<br/>'
];

var bookTp1 = Ext.create('Ext.Template', bookTplMarkup);
Ext.create('Ext.Panel', {
    renderTo: 'binding-example',
    frame: true,
    width: 720,
    height: 570,
    layout: 'border',
    items: [
        grid, {
            id: 'detailPanel',
            autoScroll: true,
            region: 'center',
            bodyPadding: 7,
            bodyStyle: "background: #ffffff;",
            html: 'Select one option'
    }]
}); 
```

我在哪里添加了 nedded 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:36:02.317

我想 feature 的[`startCollapsed`](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.grid.feature.Grouping-cfg-startCollapsed)属性`grouping`就是你要找的：

```
{ ftype:'grouping', startCollapsed: true } 
```

# jquery - 试图找出 Ruby on Rails 远程：真正的回调

> ID：15395105
> 
> 赞同：25
> 
> 时间：2013-03-13T19:50:48.477
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

所以我一直在谷歌上搜索如何设置它们，最后我得到了这段代码。

```
<script>

$('#reportform')
    .bind("ajax:success", function(data, status, xhr) {
        $('#reportalert').text('Done.');
    });
    .bind("ajax:error", function(xhr, status, error) {

        $('#reportalert').text('Failed.');

    });

</script>

<h2>Review Driver</h2>
<p>Fill out your review of the driver</p>   

<div class="hero-unit form-signin" id="reportformdiv">

    <%= form_for(@report, html: { id: "reportform" }, remote: true, update: 
    { success: "response", failure: "error"} ) do |t| %>
<p id="reportalert"></p>
    <%= t.text_field  :plant_site,    placeholder: "Plant Site" %>

    <%= t.text_field  :route_number,  placeholder: "Route Number" %>

    <%= t.text_field  :driver_name,   placeholder: "Driver name if available" %>

    <%= t.date_select :date_recorded, html: { class: "input-block-level" } %>

    <%= t.text_field  :action,        placeholder: "Action taken" %>

    <%= t.text_area   :report_body,   placeholder: "What you witnessed",
                                     style: "height: 300px;",
                                     class: "input-block-level" %>

    <%= t.submit     "File Report",  class: "btn btn-primary btn-large" %>

    <% end %>

</div> 
```

但它不起作用，我不知道为什么，我确定我做错了什么，我是 RoR 的新手，我喜欢这样一个事实，即我可以声明这个遥控器：它本身的形式是真实的，一旦我弄清楚如何设置回调我会很好去 :) 提前谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-11-20T18:41:50.680

根据[Rails 的 wiki](https://github.com/rails/jquery-ujs/wiki/ajax)，下面的代码应该可以工作：

```
<script>
  $(document).ready(function(){
    $('#reportform').on('ajax:success', function(e, data, status, xhr){
      $('#reportalert').text('Done.');
    }).on('ajax:error',function(e, xhr, status, error){
      $('#reportalert').text('Failed.');
    });
  });
</script> 
```

类似的代码在 Rails 3.2.14 和 jquery-rails 3.0.4 中为我工作

希望能帮助到你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-08-02T08:53:39.077

由于 Rails 5.1，必须通过 event.detail 提取响应、状态和 xhr 参见：[https ://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#rails-ujs-event-handlers](https://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#rails-ujs-event-handlers)

这是一种可能的解决方案：

```
$(document).on('ajax:success', '#reportform', event => {
  const [response, status, xhr] = event.detail;
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-26T23:23:10.167

**Turbolinks 兼容**

```
<script type="text/javascript">

    $(document).on('ajax:success', 'a[data-remote].watching', function(e, data, status, xhr){

    });

</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T20:18:00.183

试试这个：

把你的javascript代码放在`document ready`：

```
<script>
$(document).ready(function(){
  $('#reportform')
    .bind("ajax:success", function(data, status, xhr) {
        $('#reportalert').text('Done.');
    });
    .bind("ajax:error", function(xhr, status, error) {

        $('#reportalert').text('Failed.');

    });
})
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T17:58:18.853

您不必使用 jQuery。能做：

```
document.querySelector('#reportform')
    .addEventListener("ajax:success", function(data, status, xhr) {
        document.querySelector('#reportform').text('Done.');
    });
    .addEventListener("ajax:error", function(xhr, status, error) {
        document.querySelector('#reportform').text('Failed.');
    }); 
```

# c# - 在 Windows 应用程序中使用数据库

> ID：15395107
> 
> 赞同：0
> 
> 时间：2013-03-13T19:51:04.393
> 
> 标签：c#, sql-server, database, windows, kinect

我正在使用 C# 开发 Microsoft Kinect 游戏（适用于 Windows），我需要一个本地数据库来存储有关玩家及其进度的信息以及有关他们的分数和准确性的更详细信息。我从未在 Windows 应用程序中使用过数据库，我一直在寻找有关如何使用的建议。我一直在尝试使用 SQL Server，因为它可以让我在 Visual Studio 中创建一个数据库。我一直无法找到很多关于如何从 C# 应用程序中与数据库交互的资源。

我真的对 SQL Server 知之甚少，所以我不知道它是否是我需要的正确选择。有没有人建议使用什么样的数据库系统？你能指出一些关于如何做我需要做的事情的好资源/例子的方向吗？

非常感谢！

编辑：我还应该提到我确实有使用 SQL 的经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:55:14.753

还有其他更便携的解决方案，例如[SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)和[SQL Server Compact Edition](https://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)，它们不需要单独的服务器安装，并且更容易从独立的桌面应用程序中访问和分发。

该用法可以在很大程度上与外部 SQL 服务器和/或 Linq to SQL 进行比较，因此实际实现应该不会那么难。

一些有趣的链接：

*   [如何：使用应用程序部署 SQL Server Compact 4.0 数据库](http://msdn.microsoft.com/en-us/library/aa983326%28v=vs.110%29.aspx)
*   [SQL Server Compact Edition 简介](http://www.c-sharpcorner.com/uploadfile/3cf852/an-introduction-to-sql-server-compact-edition-sqlce-4-0/)

正如另一条评论中提到的，一个简单的序列化 XML 文件也可能足以供您使用。它快速、简单，如果您不需要执行任何实际的数据库操作而只需保存和加载所有内容，那么它可能会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:55:22.900

研究使用 SQLDatasource 和相关教程。这将为您提供一种简单的方法来启动和运行，而无需深入了解 SQL。一旦你设置好数据源并“绑定”到你的数据库，你就可以使用它来连接你的控件（网格、标签、文本框等）到它。

看一下这个：

[http://www.youtube.com/watch?v=w34BDhDPEEQ](http://www.youtube.com/watch?v=w34BDhDPEEQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:57:47.420

您不想要完全成熟的 SQL Server。SQL Server Compact Edition 更合适，或者还有用于非 Microsoft 选项的 SQLite。

从 C# 与数据库交互的最简单方法是 Entity Framework，它随 .NET 4.5 提供，或者可作为 .NET 3.5 和 .NET 4 的 nuget 包下载。

一个不同的非关系数据库选项是[DB4O](http://www.db4o.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:00:25.180

您可以使用[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)

```
var player = db.Players.Where(x => x.playerId = id);
var points = player.points;

points =+ 100;
db.SaveChanges(); 
```

如果您不想使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)，也可以针对表编写[CRUD操作](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:00:58.147

基本上，您必须使用 Visual Studio 的 GUI 创建一个带有表的数据库。

然后在代码中需要的地方，您必须使用连接字符串创建与数据库的连接。然后，您必须使用 SQLCommand 类插入一条 SQL 命令并执行它。这需要一些有关 SQL 语法的知识，但现在只需搜索您想要的具体命令类型，及时您就会掌握它的窍门。当您准备好写入或读取数据时，不要忘记关闭与数据库的连接。

我希望这给出了主要思想。

编辑：哦，对于这种数据库，SQL Server Compact 就足够了。

# perl - Perl 严格的 decode_base64

> ID：15395108
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:51:07.230
> 
> 标签：perl, base64

我怎样才能在 MIME::Base64::decode() 中获得功能，就像在具有**严格**参数的 php [base64_decode](http://php.net/manual/en/function.base64-decode.php)函数中一样？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:06:57.143

```
my $c = '[A-Za-z0-9+/]';
my $strict = qr/
   ^
   (?:$c{4})*+
   (?:$c(?:==|$c(?:=|$c))=)?+
   \z
/x;

sub php_base64_decode {
   return undef if $_[1] && $_[0] !~ $strict;
   return decode_base64($_[0]);
} 
```

不确定 PHP`base64_decode`究竟做了什么，因此您可能需要调整`$strict`.**

# vb.net - VS 2010 在 AssemblyInfo.vb 的行尾添加空格

> ID：15395117
> 
> 赞同：0
> 
> 时间：2013-03-13T19:51:39.907
> 
> 标签：vb.net, visual-studio-2010

我在 Visual Studio 2010 的 VB 中工作，试图让 AssemblyInfo.vb 文件中的行在末尾没有多余的空格。我使用 GitHub 的 Windows 客户端和它附带的 powershell 环境使用 git 跟踪我的项目，所以当我执行 git diff 时，无论哪里有错误的空白，我都会得到红色标记。

基本上我发现，如果我删除 Visual Studio 中的空格并保存文件，它就会回来。如果我在 Notepad++ 中删除它，保存并在 Visual Studio 中重新打开它，空格就会消失。之后，只要我更改了一行上的任何内容，Visual Studio 就会在我更改的每一行的末尾添加一个空格，否则该空格恰好以 > 结尾。如果我将标签的末尾更改为 />，它不会添加空格，但当然不会编译。

我已经研究了基本、XML 和所有语言的文本编辑器设置，但没有看到任何特定于此的设置。有没有我遗漏的，或者我应该计划使用记事本进行版本更改？我还要提到我的个人机器上有 Visual Studio 2012，但它似乎没有这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:58:30.217

有什么理由不能使用项目属性？

![在此处输入图像描述](../Images/28c770c6e93f0bf29470c7dcc0869f28.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:56:27.393

啊，找到了。为了将来参考，它是文本编辑器 > 基本 > VB 特定中的“代码漂亮列表（重新格式化）”的一部分。以为我已经关掉了。

# java - @Value 注释未正确设置

> ID：15395123
> 
> 赞同：0
> 
> 时间：2013-03-13T19:52:02.403
> 
> 标签：java, spring, annotations

这是我的应用程序：

```
public static void main( String[] args ) {
    AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(Config.class);

    //run the importer
    final ImportNewOrders importer = (ImportNewOrders) ApplicationContextProvider.getApplicationContext().getBean("importNewOrders");
    importer.run();
    //importer.runInBackground();
} 
```

这是我的配置：

```
@Configuration
@ComponentScan(basePackages = {
        "com.production"
})
@PropertySource(value = {
        "classpath:/application.properties",
        "classpath:/environment-${MY_ENVIRONMENT}.properties"
})
@EnableJpaRepositories("com.fettergroup.production.repositories")
@EnableTransactionManagement
public class Config {

    .... skipping things that aren't relevant

    @Bean
    public ImportNewOrders importNewOrders() {
        return new ImportNewOrders();
    } 
```

这是我的课...

```
@Component
public class ImportNewOrders implements Task {

    private final static Logger logger = Logger.getLogger(ImportNewOrders.class.getName());

    @Autowired
    private OrderService orderService;

    @Autowired
    private ImportOrderRequest importOrderRequest;

    @Value("${api.user}")
    private String apiUser;

    @Value("${api.password}")
    private String apiPassword;

    @Value("${api.orders.pingFrequency}")
    private String pingFrequency; 
```

最后是`application.properties`：

```
# ------------------- Application settings -------------------

#Base URL to the API application
api.baseUrl=http://localhost:9998

#Unique token used to authenticate this vendor
api.vendor.token=asdf

#API credentials
api.user=myuser
api.password=mypassword

#How often to check for new orders; frequency is in seconds
api.orders.pingFrequency=60 
```

这在一两个小时前有效，现在决定它不喜欢这些值。我不知道为什么。一切对我来说都是正确的。

**更新**

```
@Configuration
@ComponentScan(basePackages = {
        "com.production"
})
@PropertySource(value = {
        "classpath:/application.properties",
        "classpath:/environment-${MY_ENVIRONMENT}.properties"
})
@EnableJpaRepositories("com.production.repositories")
@EnableTransactionManagement
public class Config {
    @Value("${db.url}")
    private static String PROPERTY_DATABASE_URL;

    @Bean
    public DataSource dataSource() {
        MysqlDataSource dataSource = new MysqlDataSource();

        dataSource.setUrl(PROPERTY_DATABASE_URL); //is null
        /*dataSource.setUser(environment.getRequiredProperty(PROPERTY_NAME_DATABASE_USER));
        dataSource.setPassword(environment.getRequiredProperty(PROPERTY_NAME_DATABASE_PASSWORD));*/

        return dataSource;
    }

    @Bean
    public PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer () {
        return new PropertySourcesPlaceholderConfigurer();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:14:58.690

您的属性文件由您找到，`@Configuration`并将其用于该类中的数据库属性，因为`@PropertySource`. 但`@Value`领域和`${}`评估需要的远不止这些。

来自[Javadoc`@PropertySource`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)

> 为了使用 PropertySource 中的属性解析定义中的 ${...} 占位符或 @Value 注释，必须注册一个 PropertySourcesPlaceholderConfigurer。这在 XML 中使用时会自动发生，但在使用 @Configuration 类时必须使用静态 @Bean 方法显式注册。有关详细信息和示例，请参阅 @Configuration Javadoc 的“使用外部值”部分和 @Bean Javadoc 的“关于 BeanFactoryPostProcessor-returning @Bean 方法的说明”。

所以声明一个

```
@Bean
public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
    PropertySourcesPlaceholderConfigurer p = new PropertySourcesPlaceholderConfigurer();
    p.setLocation(new ClassPathResource("your properties path"));
    // other properties
    return p;
} 
```

在您的配置类中，或者正如 ach 在评论中恰当提到的那样，如果您使用`@PropertySource`您的 can 完全省略`setLocation`：

```
@Configuration
@PropertySource(value="classpath:your_file.properties")
public class MyConfiguration{

    @Bean
    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer()    {
        PropertySourcesPlaceholderConfigurer p = new PropertySourcesPlaceholderConfigurer();
    return p;
    }
} 
```

当你拥有环境时，你不应该需要环境`PropertySourcesPlaceholderConfigurer`

> 然而，在大多数情况下，应用程序级别的 bean 不需要 > 直接与 Environment 交互，而是可能必须将 ${...} 属性值替换为属性占位符配置器，例如 PropertySourcesPlaceholderConfigurer，它本身是 EnvironmentAware 并且作为Spring 3.1 在使用 <context:property-placeholder/> 时默认注册。

# c# - 将存储过程作为字符串传递

> ID：15395124
> 
> 赞同：-2
> 
> 时间：2013-03-13T19:52:06.177
> 
> 标签：c#, sql-server-2005

如何将存储过程和参数作为字符串传递给函数？

我试过这段代码但没有运气..

这是业务访问层代码

```
 try
 {
     string Query_string = "SP_InsertOffer_Tab @offer_name ='" + this.offer_name +"',  @offer_price = " + this.offer_price + ",@start_date = '" + this.start_date + 
 "',@end_date = '" + this.end_date + "'";

     int result = DbAcess.Insert_Query(Query_string);
     return result;
 }
 catch (Exception ex)
 {
    throw ex;
 }
 finally
 {
    DbAcess = null;
 } 
```

数据库层代码如下

```
public int Insert_Query(string strSQL)
{
    SqlConnection con = new SqlConnection();
    con = OpenConnection();

    try
    {
        sqlcmd = new SqlCommand();
        sqlcmd.Connection = con;
        sqlcmd.CommandType = CommandType.StoredProcedure;
        sqlcmd.CommandText = strSQL;

        int Result = sqlcmd.ExecuteNonQuery();
        return Result;
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        con.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:57:42.233

不要将 strSQL 作为 CommandText 传递，其中 strSQL 是您在第一个代码块中创建的字符串（我认为...），只需将 SP 名称作为 CommandText 传递，然后将参数添加到您的 sqlcmd 对象。

```
SqlParameter p = new SqlParameter("@ParameterName", parametervalue));
sqlcmd.Parameters.Add(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:01:58.203

只是为了尝试解决您的问题，但请注意这种方法非常危险，不推荐用于 Sql Injection 问题。

```
string Query_string = "EXEC SP_InsertOffer_Tab @offer_name ='" + 
            this.offer_name +"',  @offer_price = " + 
            this.offer_price + ",@start_date = '" + 
            this.start_date + "',@end_date = '" + this.end_date + "'"; 
```

并将命令类型更改为文本。

更好的方法是更改​​ Insert_Query 方法

```
public int Insert_Query(string strSQL, SqlParameter[] prm)
{
    using(SqlConnection con = OpenConnection())
    {
        sqlcmd = new SqlCommand(strSql, con);
        sqlcmd.CommandType = CommandType.StoredProcedure;
        sqlcmd.Parameters.AddRange(prm)
        int Result = sqlcmd.ExecuteNonQuery();
        return Result;
    }
} 
```

然后这样调用

```
SqlParameter[] prms = new SqlParameter[]
{
   new SqlParameter("@offer_name", SqlDbType.NVarChar),
   new SqlParameter("@offer_price", SqlDbType.Money),
   new SqlParameter("@start_date", SqlDbType.SmallDateTime),
   new SqlParameter("@end_date", SqlDbType.SmallDateTime)
};
prms[0].Value = this.offer_name;
prms[1].Value = this.offer_price;
prms[2].Value = this.start_date;
prms[3].Value = this.end_date;
int result = DbAcess.Insert_Query(Query_string, prms); 
```

# python - numpy数组的算术比较

> ID：15395127
> 
> 赞同：4
> 
> 时间：2013-03-13T19:52:17.387
> 
> 标签：python, numpy

```
>>> import numpy as np
>>> x = np.eye(3)
>>> x[1, 2] = .5
>>> x
array([[ 1\. ,  0\. ,  0\. ],
       [ 0\. ,  1\. ,  0.5],
       [ 0\. ,  0\. ,  1\. ]])
>>> 0 < x.any() < 1
False
>>> 
```

我想检查 numpy 数组是否包含 0 和 1 之间的任何值。
我读`0 < x.any() < 1`为“如果有任何元素的大小大于 0 且小于 1，则返回 true”，但显然不是这样。

如何对 numpy 数组进行算术比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:53:37.940

```
>>> np.any((0 < x) & (x < 1))
True 
```

`x.any()`实际作用：它与 相同，这意味着如果其中的任何元素非零`np.any(x)`，它就会返回。因此，您的比较是，这是错误的，因为在 python 2中是正确的，但不是，因为.`True``x``0 < True < 1``0 < True``True < 1``True == 1`

相比之下，在这种方法中，我们对每个元素的比较是否为真创建布尔数组，然后检查该数组的任何元素是否为真：

```
>>> 0 < x
array([[ True, False, False],
       [False,  True,  True],
       [False, False,  True]], dtype=bool)
>>> x < 1
array([[False,  True,  True],
       [ True, False,  True],
       [ True,  True, False]], dtype=bool)
>>> (0 < x) & (x < 1)
array([[False, False, False],
       [False, False,  True],
       [False, False, False]], dtype=bool) 
```

您必须执行显式`&`，因为不幸的是 numpy 不能（我认为不能）与 python 的内置比较运算符链接一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:55:48.830

您的代码首先测试`x.any()`，其计算结果为`True`， as`x`包含一个非零值。然后它测试`0 < True (=1) < 1`，即`False`。做：

```
((0 < x) & (x < 1)).any() 
```

# .htaccess - 一起使用 URL Rewrite 和 HTTP

> ID：15395128
> 
> 赞同：0
> 
> 时间：2013-03-13T19:52:27.207
> 
> 标签：.htaccess, url, mod-rewrite, web

我正在尝试使用 URL 重写，但仅限于地址的一部分，尽管我是 Web 开发这一领域的新手，而且我有点困惑。

地址是：***domain.com*** /create.php?member=-1&hangout=1

但我正在尝试将其重写为：***domain.com*** /create/?hangout=1

我得到了正确的页面，但我无法使用 $_GET['hangout'] 访问“hangout”。

这是我在 .htaccess 文档中的重写代码：

```
RewriteEngine    On
RewriteRule    ^create/    create.php?member=-1 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:29:09.003

如果您在 a 中添加自己的查询字符串`RewriteRule`，则必须使用该[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志附加现有的查询字符串

```
RewriteRule ^create/ create.php?member=-1 [QSA] 
```

这将重写`create/?hangout=7`并`create.php`添加`member=-1`和`hangout=7`作为查询字符串。

# xml - 根据xml标签内容重命名文件

> ID：15395131
> 
> 赞同：0
> 
> 时间：2013-03-13T19:52:29.880
> 
> 标签：xml, regex, linux, macos, file

我有大量需要重命名的 XML 文件。它们是 .plist 文件。

每个文件中都有一些标签，如下所示：

```
<key>Name</key>
<string>Steve Allen</string>
<key>Place</key>
<string>London</string> 
```

目前，所有文件都以长随机数命名，例如，`659238592496052.record`但我需要它们根据文件中的名称命名，例如`SteveAllen.record`（没有任何空格）。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:03:10.063

```
for file in *.record
do
  nameline=$(grep -A 1 '<key>Name</key>' "$file" | tail -n +2) # Get line after Name key
  name=${nameline/<string>/} # Remove initial <string>
  name=${name/<\/string>/} # Remove trailing </string>
  name=${name// /} # Remove all spaces
  mv "$file" "$name".record
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:12:11.833

您发布的片段不是有效的 xml，所以让我们假设它看起来像这样

```
<body>
<item>
<key>Name</key>
<string>Steve Allen</string>
</item>
<item>
<key>Place</key>
<string>London</string>
</item>
</body> 
```

使用该片段作为输入，该程序将重命名以 args 形式给出的任意数量的文件 如果您将程序保存为“myrename”，则“myrename file1.xml file2.xml file3.xml”将更改 file1.xml file2.xml 的路径名和 file3.xml 到第一项

被称为“钥匙”的标签似乎以一种看起来很神奇的方式工作：/

```
#!/usr/bin/perl

use XML::Simple;
for $file ( @ARGV[ 0 .. $#ARGV ] ) {

    my $ref = XMLin($file);

    $new_name = $ref->{'item'}->{'Name'}->{'string'};

    rename $file, "$new_name.xml" || warn "couldn't rename $file $!";
} 
```

# google-plus - Google+ JavaScript API 是否具有与 Facebook 的 signed_request 等效的功能？

> ID：15395142
> 
> 赞同：4
> 
> 时间：2013-03-13T19:53:00.660
> 
> 标签：google-plus

[Google+ 登录按钮与](https://developers.google.com/+/web/signin/)[Facebook 登录](https://developers.facebook.com/docs/technical-guides/login/)API有着惊人的相似之处，我喜欢这样。

Facebook JS SDK 有一个在客户端提供的[signed_request 参数](https://developers.facebook.com/docs/howtos/login/signed-request/)，但可以将其传递给我的服务器，以验证客户端身份验证是否已发生。它由 Facebook 加密签名，这使我可以验证客户端是否已登录，而无需与服务器端的 Facebook 交谈。

有没有办法用 G+ JS API 做类似的事情？具体来说，我想进行客户端身份验证，然后将一些数据发布到我的服务器并验证客户端确实登录到 Google，*而不*向 Google发起服务器端请求。

（我想要这个，因为我只想使用登录按钮作为注册机制；我不想发布到 Google Plus 或获取用户的朋友列表或类似的东西，这通常需要完整的访问令牌。 )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:46:39.090

Google+ 目前不会代表用户向您的应用程序发出请求，在作为普通 OAuth 2.0 流程的一部分设置的回调 URL 之外。

当收到一个新的令牌或授权码时，你应该在服务器端发出 tokeninfo 请求，以验证你收到的令牌是合法的，并且是针对目标用户的。

我不确定您的服务器使用的是哪个平台，因此无法粘贴相关代码，但请参阅[此处获取代码示例](https://developers.google.com/+/web/signin/server-side-flow#step_8_initialize_the_google_api_client_library_and_start_the_google_service)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:36:01.133

因此，实际上该参数与 access_token 一起返回的 id_token 非常匹配。它是一个签名的 json Web 令牌，包括用户 ID、客户端 ID 等。听起来这将解决您的用例！看看[http://android-developers.blogspot.nl/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.nl/2013/01/verifying-back-end-calls-from-android.html) Tim Bray 的这篇博文 - 它以 Android 为重点，但逻辑几乎相同适用于任何客户。

一旦你得到这个，你就知道它在交付时是有效的，就像一个签名请求一样。当然，在任何一种情况下，如果用户退出或撤销对您的应用程序的访问权限，访问令牌可能不再对拨打电话有效。

# git - Jenkins + Git 插件 CheckoutConflictException

> ID：15395157
> 
> 赞同：9
> 
> 时间：2013-03-13T19:54:00.007
> 
> 标签：git, jenkins, jenkins-plugins

我正在尝试设置我的 CI，并创建了一个自由风格的工作，但它在 git clone 步骤中失败，下面的日志显示。我使用 ssh 密钥正确配置了计算机，但找不到任何问题。

```
Using strategy: Default
Fetching changes from 1 remote Git repository
Commencing build of Revision 9560773cf0e8545f98c6700c44fd2f9ae31af904 (origin/master)
Checking out Revision 9560773cf0e8545f98c6700c44fd2f9ae31af904 (origin/master)
FATAL: Could not checkout 9560773cf0e8545f98c6700c44fd2f9ae31af904
hudson.plugins.git.GitException: Could not checkout 9560773cf0e8545f98c6700c44fd2f9ae31af904
    at org.jenkinsci.plugins.gitclient.JGitAPIImpl.checkout(JGitAPIImpl.java:68)
    at hudson.plugins.git.GitAPI.checkout(GitAPI.java:208)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1261)
    at hudson.plugins.git.GitSCM.access$1200(GitSCM.java:57)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1220)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1196)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1196)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1353)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:683)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:588)
    at hudson.model.Run.execute(Run.java:1567)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: org.eclipse.jgit.api.errors.CheckoutConflictException: Checkout conflict with     files:
Heatmaps.framework/Headers/Heatmaps.h
Heatmaps.framework/Resources/Info.plist
Heatmaps.framework/Versions/Current/Headers
Heatmaps.framework/Versions/Current/Headers/Heatmaps.h
Heatmaps.framework/Versions/Current/Heatmaps
Heatmaps.framework/Versions/Current/Resources
Heatmaps.framework/Versions/Current/Resources/Info.plist
    at org.eclipse.jgit.api.CheckoutCommand.call(CheckoutCommand.java:244)
    at org.jenkinsci.plugins.gitclient.JGitAPIImpl.checkout(JGitAPIImpl.java:64)
    ... 16 more
Caused by: org.eclipse.jgit.errors.CheckoutConflictException: Checkout conflict with files:
Heatmaps.framework/Headers/Heatmaps.h
Heatmaps.framework/Resources/Info.plist
Heatmaps.framework/Versions/Current/Headers
Heatmaps.framework/Versions/Current/Headers/Heatmaps.h
Heatmaps.framework/Versions/Current/Heatmaps
Heatmaps.framework/Versions/Current/Resources
Heatmaps.framework/Versions/Current/Resources/Info.plist
    at org.eclipse.jgit.dircache.DirCacheCheckout.doCheckout(DirCacheCheckout.java:411)
    at org.eclipse.jgit.dircache.DirCacheCheckout.checkout(DirCacheCheckout.java:391)
    at org.eclipse.jgit.api.CheckoutCommand.call(CheckoutCommand.java:240)
    ... 17 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T20:07:49.733

当我安装新的 Jenkins 1.505 并使用 git 客户端插件 1.0.4 时出现此错误。您可以将插件降级到 1.0.3，它可能会工作。我并没有真正使用 git 客户端插件，所以在我的情况下将其删除

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T09:39:49.533

我有同样的问题。他们发布了一个更正该错误的更新，因此您只需将 Jenkins Git 客户端更新到 1.0.5。现在它正在工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T09:35:02.387

我刚刚遇到了同样的问题，想提供一个替代解决方案：

[在插件页面](https://wiki.jenkins-ci.org/display/JENKINS/Git+Client+Plugin)上的 1.0.4 版本信息中，您可以阅读：

> 在 GitAPI 中对所有支持的方法使用 JGit 实现，直到设置 org.jenkinsci.plugins.gitclient.Git.useCLI

这似乎是我们问题的原因。但它说可以通过设置`org.jenkinsci.plugins.gitclient.Git.useCLI`为 true 来解决它。
所以只需添加`-Dorg.jenkinsci.plugins.gitclient.Git.useCLI=true`到您的启动脚本中。

在 Debian 上（使用 apt-get 版本时），更新就足够`JAVA_ARGS`了`/etc/default/jenkins`（如此[处](https://issues.jenkins-ci.org/browse/JENKINS-17204)所述）

# c++ - 奇数印刷品1 -15

> ID：15395159
> 
> 赞同：0
> 
> 时间：2013-03-13T19:54:04.607
> 
> 标签：c++

我需要编写一个程序来打印出 1 到 15 之间所有奇数的乘积。但是无论我尝试什么它都行不通，只会打印乘积。我搞砸了if语句吗？这是我的代码：

```
//Sophia Ali
#include <iostream>

using namespace std;

int main()
{
    int i;
    int product;

    for ( i = 1; i <=15; i+=2)
    {
        if(i%2!=0)
            product = product * i;
        else
            continue;

    }
    cout << "\n product: " << product;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:56:41.287

首先，您没有初始化`product`，这意味着您最终会遇到未定义的行为。您可能希望将其初始化为`1`：

```
int product = 1; 
```

此外，`if`循环中的条件将始终为真，因为`i`无论如何您每次迭代都会增加 2，因此它没有任何目的：

```
for ( i = 1; i <=15; i+=2)
{
    product = product * i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:00:14.590

C++ 没有为你定义任何东西。所以当你`int product;`在主函数的第二行声明时，你应该使用`int product = 1;`. 否则，当您`product = product * i`在 for 循环中使用时，您是在说将一个不存在的数字乘以 i，这是不可能的。

# c - C - select() - 如何正确更新计时器

> ID：15395164
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:54:15.460
> 
> 标签：c, multithreading, posix

linux手册指出：

```
The operation of select() and pselect() is identical, other than these
       three differences:

       (i)    ...

       (ii)   select() may update the timeout argument to indicate how much time
              was left.  pselect() does not change this argument.
       (iii)  ... 
```

它说你可以更新它，但我该怎么做？我再次调用 select()，使用相同的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:56:04.443

> 它说你可以更新它，但我该怎么做

它说没有这样的事情。它说**该功能可以修改它**。[标准](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)用语略有不同：

> 成功完成后， select() 函数**可能会修改 timeout 参数指向的对象**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:13:22.937

调用过程中不应修改超时结构的内容。但是，您可以停止选择，然后使用新的超时重新启动它。

通常，当您使用 制作多线程应用程序时`select`，您会提供一种中断此调用以更新已处理文件描述符列表的方法，例如。例如，这可以使用套接字对来实现。套接字对中的一个套接字用于控制线程，另一个总是添加到`fd_set`. 虽然这是一个不同的主题。

# excel - 从单元格捕获数据并将值粘贴到不同工作表上的另一个单元格中

> ID：15395166
> 
> 赞同：1
> 
> 时间：2013-03-13T19:54:24.370
> 
> 标签：excel, vba

我在脑海中让这变得比它必须的更具挑战性，但由于我最近没有使用 vba 或 excel，所以我以此为借口。请不要质疑方法:) 因为这只是我试图消除的一小步，以节省一些时间，直到我可以重做整个过程。我会做相反的事情，但这是他们正在使用的某种发票......

我在想宏或函数是需要的，而不是公式，因为工作表 2 上的数据每个月都会发生变化，而且我没有可以参考的日期。

我想做的事：

我在工作表 2 上有一个单元格，每月更改一次。我想每月将工作表 2 中的单元格的值放入工作表 1 中的一个单元格中，她每个月都会更改它。

每个月都将在 A 列中表示，并且该月工作表 2 中的单元格的值需要放在 B 列中。

```
Column A         Column B
12/5/2012        $3,459,877.81 
1/8/2013         $9,360,785.62 
2/8/2013        
3/8/2013        
4/8/2013 
```

因此，当她更改 2 月份的工作表 1 时，该数字将填充到 2/8 旁边，依此类推。我想在她保存文档时这样做，或者让它成为她可以点击的快捷方式，或者只是废弃它并告诉她这不值得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:28:28.363

在我的示例中，我使用单元格`G4`作为您的同事将更新的单元格。您必须有一些方法来保持原始值，`G4`以便判断它何时被更改。执行此操作的简单方法是选择一些用户看不见的单元格并将数字存储在那里，以便您以后可以引用它。在这里，我选择了 cell `AA1`。必须专门添加以下代码，`Sheet2`因为它只需要监视该工作表上的更改事件，以便在`G4`更新时触发。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Range("G4") <> Range("AA1") Then
        Dim lastRow As Long

        Range("AA1") = Range("G4")
        lastRow = Worksheets("Sheet1").UsedRange.Rows.Count

        Worksheets("Sheet1").Cells(lastRow + 1, 1).Value = Date
        Worksheets("Sheet1").Cells(lastRow + 1, 2).Value = Range("AA1")

    End If
End Sub 
```

请记住，对于此任务，这是一种非常“快速而肮脏”的方法，因为它没有错误处理程序或它的工作方式具有很大的灵活性。

* * *

**编辑 -**

此处引用了您可以使用的另一种方法，并且可以简单地检查给定单元格是否已更改，而无需验证值的差异。

```
 Private Sub Worksheet_Change(ByVal Target As Range)
     If Not Application.Intersect(Range("G4"), Range(Target.Address)) Is Nothing Then
        Dim lastRow As Long
        Range("AA1") = Range("G4")
         lastRow = Worksheets("Sheet1").UsedRange.Rows.Count

         Worksheets("Sheet1").Cells(lastRow + 1, 1).Value = Date
         Worksheets("Sheet1").Cells(lastRow + 1, 2).Value = Range("AA1")
     End If
 End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:51:26.350

给 Cell 一个名称以供您参考，您可以使用传递给 Worksheet_Change 函数的 Target 参数做一些简洁的事情：

```
'Add this function to the sheet that has the cell being
'+changed by the user (Sheet 2)
Private Sub Worksheet_Change(ByVal Target As Range) 
    Dim strCellName As String
    strCellName = "ChangeMe"
    'If the cell we changed was the ChangeMeCell
    If Target.Address = Sheet2.Range(strCellName).Address Then
        'Store value
        Dim intLastRow, intValue As Integer
        intValue = Range(strCellName).Value

        'Find the cell in Sheet 1 Column A that matches this month
        intLastRow = Sheet1.Range("A:A").End(xlDown).Row
        For Each cl In Sheet1.Range("A1:A" & intLastRow).Cells
            'Ensure cell value is date
            If IsDate(cl.Value) Then

                'If date is today's date
                'Note that Math.Round(<date>, 0 ) essentially removes the time
                '+from any date value so #01/02/03 04:05:06# becomes #01/02/03#
                If Math.Round(cl.Value,0) = Math.Round(Now,0) Then
                    'Update column B's value
                    Sheet1.Range("B" & cl.Row).Value = intValue
                End If
            End If
        Next
    End If
End Sub 
```

这假设您的工作表布局在 Sheet1 中具有“发票值”，并且在 Sheet2 中更改了单元格。您需要为该单元格命名。

使用功能栏左侧的单元格名称框调用更改“ChangeMe”的单元格或您希望将其更改为的任何内容，在函数的第一行更新该单元格名称，此函数将完成所有其余操作。

![在哪里找到单元格名称并将值更改为](../Images/0afe2651a81a13e0e8fb3beb21b95b54.png)

请务必注意，日期必须针对您的系统区域正确格式化。以确保它显示正确的月份 - 将它们格式化为 LongDate 以便您可以将它们视为 2013 年 3 月 8 日而不是 03/08/13，这可能会随着时间的推移而变得混乱。*作为一名英国程序员，约会是我生命中的祸根！*

![这显示日期格式为长日期格式，B 列的数值显示为格式化货币](../Images/b08ef16fb38d19feecb357236169f190.png)

**编辑：**我已经更新了代码以通过完整日期减去时间来比较日期，而不是之前的每月比较，如果您仍然需要减去或添加一个月到任一日期值，只需使用`DateAdd("m", <date>, <value>)`添加或减去月份.

**编辑：** [DatePart 功能页面](http://office.microsoft.com/en-001/access-help/datepart-function-HA001228812.aspx)对于那些想了解更多有关 DatePart() 的人来说是一个有用的资源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:41:42.777

现在，我可以从单元格中的公式中捕获值，并将其放在另一个工作表的不同单元格中。这是我的最终产品：

```
Private Sub Worksheet_Calculate()

  Dim strCellName As String
   strCellName = "ChangeMe"
   If Sheets("Application of Moneys").Range(strCellName).Address <> PrevVal Then
    Dim intLastRow, intValue As Long
    intValue = Range(strCellName).Value

   'Find the cell in Sheet 1 Column A that matches this month
    intLastRow = Sheets("Certificate 1").Range("B:B").End(xlDown).Row
    For Each cl In Sheets("Certificate 1").Range("B13:B25" & intLastRow).Cells
        'Ensure cell value is date
        If IsDate(cl.Value) Then

            'If date is today's date
            'Note that Math.Round(<date>, 0 ) essentially removes the time
            '+from any date value so #01/02/03 04:05:06# becomes #01/02/03#
            If DatePart("m", cl.Value) = DatePart("m", Now()) Then
                'Update column B's value
                Sheets("Certificate 1").Range("H" & cl.Row).Value = intValue
            End If
        End If
    Next
End If
End Sub 
```

# python - 在 Python 中解码 StdClass

> ID：15395167
> 
> 赞同：0
> 
> 时间：2013-03-13T19:54:27.577
> 
> 标签：python, wordpress, object, dictionary, stdclass

我正在使用 Python 使用 urllib 查询 WordPress.org API。反过来，WordPress.org 决定使用编码的 PHP StdClass 对象进行响应。如果我使用 PHP 会很棒，但我必须使用 Python。知道如何把它变成字典（没有**s:10:** "slijekgdds" 前缀）吗？

```
apiUrl = "http://api.wordpress.org/themes/info/1.0/"
body = urllib.urlencode({
    'action': "query_themes",
    'request': {
        "browse": "featured", 
        'fields': {
            'download_link': True,
            'preview_url': False,
            'screenshot_url': False,
            'description': False,
            'sections': False,
            'screenshots': False,
            'downloaded': False,
            'screenshot_count': False
        }
    }
}, True)

request = urllib.urlopen(apiUrl, body)
response = request.read(200) 
```

这是返回（截断）：

```
O:8:"stdClass":2:{
    s:4:"info";
    a:3:{
        s:4:"page";
        i:1;
        s:5:"pages";
        i:41;
        s:7:"results";
        i:610;
    }
    s:6:"themes";
    a:15{
        i:0;
        O:8:"stdClass":10:{
            #BLAH BLAH
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:39:13.450

基于[这个](https://pypi.python.org/pypi/phpserialize)，你必须用 pip 或类似的东西安装，我猜这就是你想要的：

```
from phpserialize import loads, phpobject

python_object = loads(php_serialized_string, object_hook=phpobject) 
```

# javascript - 谷歌地图不与 V3 一起显示

> ID：15395168
> 
> 赞同：0
> 
> 时间：2013-03-13T19:54:40.433
> 
> 标签：javascript, google-maps-api-3

我已经编写了在我的位置显示标记的代码，但是当我添加了 marker.setmap 方法时，地图没有加载到我错的地方

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=ABBByyyeessssf77Z6S8c-M-T3Ea2j-uFczWXFxKh0&sensor=true">
</script>
<script type="text/javascript">
    $(document).ready(function(){
        $(".contact_map .load").append("Loading Map...")
    });

function initialize() {
            $(".contact_map .load").empty();
    var mapOptions = {
      center: new google.maps.LatLng(22.722337, 75.881732),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
    var marker = new google.maps.Marker({
            position: myLatlng,
            title:"Hello World!"
            });
  }

  google.maps.event.addDomListener(window, 'load', initialize)
     marker.setMap(map);
</script>
<div class="contact_container">
<div class="contact_image">
</div>
    <div class="contact_map">
        <p class="load"></p>
    <div id="map_canvas"></div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:23:59.140

变量标记只存在于初始化函数内部，不能在外部使用。为此，请在函数外部定义此 var。另外，我没有看到任何地方定义了 var myLatLng

```
var marker;

function initialize() {
//your other code code
marker = new google.maps.Marker({ //don't use the word 'var' in this line
        position: myLatlng,
        title:"Hello World!"
        });
}

  google.maps.event.addDomListener(window, 'load', initialize)
  marker.setMap(map); 
```

# ruby-on-rails - Rails查询以子项总和为条件

> ID：15395171
> 
> 赞同：1
> 
> 时间：2013-03-13T19:55:01.127
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3.2

如何最好地在 Rails (3.2) 中生成一个查询，该查询返回一组父记录，该父记录取决于其子记录的总和？

例如...

如果和*订单*有很多*项目*

您将如何选择 Items.price（对于订单）的总和大于 50.0 的所有订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:17:38.230

试试这个：

```
Order.joins(:items).
      group("items.order_id").
      having("SUM(items.price) > 50") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:59:40.163

试试这个：

```
Order.joins(:items).where("SUM(items.price) > 50").all 
```

这将对数据库进行一次查询，选择订单商品价格总和大于 50 的所有订单。

**编辑：**

这行不通。看评论。

# drupal - 如何在 Drupal 7 上使用 hook_file_validate 检查表单 ID

> ID：15395182
> 
> 赞同：0
> 
> 时间：2013-03-13T19:55:23.103
> 
> 标签：drupal

如何使用 hook_file_validate 检查正在验证的文件的表单 ID？我必须制作一个仅适用于特定内容类型添加表单的验证功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:18:37.910

不要将其放入 hook_file_validate 尝试通过 hook_form_alter 或 hook_FORMID_form_alter 附加表单验证处理程序。添加您的验证处理程序`$form['#validate'][] = 'my_module_my_form_validation_funciton'`

应该已经检查了 for Id，以便您可以在表单 ['#value'] 上运行检查。

# delphi - Indy 9 - 正文为 RTF 并带有附件的电子邮件

> ID：15395183
> 
> 赞同：4
> 
> 时间：2013-03-13T19:55:23.367
> 
> 标签：delphi, indy

我正在尝试使用 indy 9 发送电子邮件：

*   正文为 RTF，从 TRichEdit 格式化
*   附上一个文件

**编码：**

```
 Message := TIdMessage.Create()
 Message.Recipients.EMailAddresses := 'someone@domain.dotcom';

 Message.ContentType := 'multipart/alternative';

 with TIdText.Create(Message.MessageParts) do
   ContentType := 'text/plain';

 with TIdText.Create(Message.MessageParts) do
 begin
   ContentType := 'text/richtext';
   Body.LoadFromFile('c:\bodymsg.rtf');
 end;

 TIdAttachment.Create(Message.MessageParts, 'c:\myattachment.zip');

 // send... 
```

**结果**：正文为空（使用 web gmail 和 Outlook 2010 作为客户端）。

我已经尝试过其他内容类型但没有成功：

*   文本/rtf
*   文本/丰富

**注意：**我不会升级到 Indy 10。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:12:33.783

存在时，您将 设置`TIdMessage.ContentType`为错误的值`TIdAttachment`。需要将其设置为，`'multipart/mixed'`因为您在同一顶级 MIME 嵌套级别将`'multipart/alternative'`和部分混合在一起，而这些部分是该部分的子代。`'application/x-zip-compressed'``'text/...'``'multipart/alternative'`

看看我在 Indy 网站上写的以下博客文章：

[HTML 消息](http://www.projectindy.org/Sockets/Blogs/RLebeau/2005_08_17_A.EN.aspx)

您尝试创建的电子邮件结构包含在**“纯文本和 HTML 和附件：仅非相关附件”**部分中。您只需将 HTML 替换为 RTF，并忽略该部分的`TIdText`对象，`'multipart/alternative'`因为`TIdMessage`在 Indy 9 中将在内部为您创建该对象（在 Indy 10 中明确需要它，因为它比 Indy 9 具有更深的 MIME 支持）。

试试这个：

```
Message := TIdMessage.Create()
Message.Recipients.EMailAddresses := 'someone@domain.dotcom';

Message.ContentType := 'multipart/mixed';

with TIdText.Create(Message.MessageParts) do
begin
  ContentType := 'text/plain';
  Body.Text := 'You need an RTF reader to view this message';
end;

with TIdText.Create(Message.MessageParts) do
begin
  ContentType := 'text/richtext';
  Body.LoadFromFile('c:\bodymsg.rtf');
end;

TIdAttachment.Create(Message.MessageParts, 'c:\myattachment.zip');

// send... 
```

# path - 寻找路径方案

> ID：15395184
> 
> 赞同：1
> 
> 时间：2013-03-13T19:55:26.977
> 
> 标签：path, scheme, racket

我是 Scheme 的新手，今天我遇到了以下我无法解决的问题。对于代表文件系统的树的节点，我有以下表示：

(directory_name content) 用于目录
file_name 用于文件
(directory_name null) 用于空目录

例如， ("etc/" (("network/" ("interfaces")))) 是路径 etc/network/interfaces 的树。

我要做的是编写一个函数，该函数将这种树和目录/文件名作为参数，并返回它的路径（如果有的话）。如果目录/文件不存在，则返回#f。

例如：

```
(define tree '("/"
               (("etc/" ("network/" ("interfaces")))
                ("root/" null)))) 
```

假设函数的名称是 get-path，通过运行 (get-path tree "interfaces") 它将输出 "/etc/network/interfaces"。

我想要的只是一个想法，如果你能给我一个，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:12:11.083

这里给你一个答案。我对目录/文件使用符号而不是字符串，并稍微更改了树格式。

```
(define tree '(root (etc (passwd) (profile)) (usr (bin) (lib))))

(define (get-path tree name)
  (define (reverse-if l) (and l (reverse l)))
  (reverse-if
   (let descending ((tree tree) (path '()))
     (and (not (null? tree))
          (let ((root (car tree))
                (subs (cdr tree)))
            (if (eq? root name)
                (cons root path)
                (let looking ((subs subs))
                  (and (not (null? subs))
                       (or (descending (car subs) (cons root path))
                           (looking (cdr subs))))))))))) 
```

有一些结果：

```
> (get-path tree 'etc)
(root etc)
> (get-path tree 'bin)
(root usr bin)
> (get-path tree 'profile)
(root etc profile)
> (get-path tree 'foo)
#f
> 
```

# linux - linux中的地址分配：可能超过一圈？

> ID：15395187
> 
> 赞同：0
> 
> 时间：2013-03-13T19:55:44.550
> 
> 标签：linux, memory, overlapping

我正在尝试检查我的程序是否正确分配内存-

所以我有一系列不同类型的指针，

pData1 = 0x844c458 ( malloc 的结果 (5 * size of (double*))

pData2 = 0x844c470 (malloc 的结果 ( *(double) 的 10 大小*));

pData3 = 0x844c3a0(malloc的结果(44 * size 0f (double*));

pData4 = 0x844c358

所以我认为 double = 8 个字节，5 *8 = 40 个字节，这意味着前两个地址将重叠，最后两个地址也类似？

我越来越无效了，所以我正在调查我的代码中的内存损坏，以便找出可能发生这种情况的位置。

-----编辑 -------- 添加代码细节

这是结构 -

```
struct _ELEMENT
 {
 short s;
 char arr[20];
 int size;
 void *ptr1;
 void *ptr2;
 }ELEMENT; 
```

有两个类 Parent 和 Derived（Parent 的子级）

```
Class Parent
{ 
protected:
int size;
 ELEMENT *ele1;
ELEMENT *ele2;

 public:
 void func();
...
 }
Class Child::public Parent
{
 int a,b,c;
 }
 Parent::Parent()
 {
  ele1 = NULL;
  ele2= NULL;
 }

  Parent::~Parent()
  {
   for (int i =0; i< size; i++)
   {
    free(ele1[i].p1);
    free(ele2[i].p1);
   }
   free(ele1);
   free(ele2); 
  }
  Child::Child()
  {
   a=0;...
  }
  Child::~Child()
  {
   for (int i =0; i< size; i++)
   {
    free(ele1[i].p1);
    free(ele2[i].p1);
   }
   free(ele1);
   free(ele2); 
  }

 Parent::func ()
{
 ele1 = (ELEMENT*)malloc (n * sizeof(ELEMENT));   
 ele2 = (ELEMENT*)malloc (n* sizeof(ELEMENT));

  for (int i =0; i <somenumber; i++)
 {
   ...some processing...
   ele1[i].size = n;
   ele2[i].size = x;
   ele1[i].p1 = malloc (ele1[i].size);
   ele2[i].p1 = malloc(ele2[i].size);
  }
 }

main ()
{
  Parent *p;
  CHild *c;

  p = new Parent();
  c= new Child();

  p->func();
  c->func();

  delete(p);
 delete(c);
} 
```

_glibc:invalid free 最初没有父析构函数。此代码在 SOLaris 中运行良好多年，但将其移植到 linux 中会出现此问题...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:13:00.863

1.  `sizeof(double)`是 8 个字节，`sizeof(double*)`是 4（在您的 32 位系统上）。
2.  获得的内存`malloc`不会重叠，除非同时释放。
3.  使用内存调试器，例如[valgrind](http://valgrind.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:08:15.620

您的问题的答案是您的程序正确分配内存，您遇到/遇到的第一个问题是您不知道数据类型的大小，因此您的计算不正确。

如果您发布您的代码和您遇到的实际错误，我们可能会解决这个问题。事实上，`invalid free`无法回答的深层问题。

它可能关心谁，这是一个答案还是一个评论？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:58:57.570

看起来是这样……你是怎么得到这些指针的？原则上，让不同的指针指向同一个空间是可以的——你只是不应该“释放”，除非是从一个用`malloc`(or `calloc`) 分配的指针。glibc 实际上保留了一些“就在指针下方”的数据，这些数据告诉它块有多大等，因此它可以“干净地”释放。如果更改指针的值，则不能“释放块的一部分”，因为有关块大小的信息不可用（仅当指针未更改时）。这可能是你问题的根源吗？

# android - 由于哪个选项卡的项目，上下文菜单被实例化？

> ID：15395190
> 
> 赞同：0
> 
> 时间：2013-03-13T19:55:51.340
> 
> 标签：android, android-listview, android-tabs, android-contextmenu

在我的 android 应用程序中，我有 3 个选项卡。这 3 个选项卡中的每一个都有列表视图。现在我已经为上下文菜单注册了这些列表视图。如何检测从中实例化上下文菜单的选项卡（id 或其名称）？因为选项卡中的所有三个列表视图都注册了相同的上下文菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:00:26.927

当一个选项卡被选中时，您可以将当前选项卡保存到一个变量中，然后当一个项目被选中时，您可以使用这个值。

```
 private String mCurrentTab;

    public MyTabActivity(){

        this.getTabHost().setOnTabChangedListener(new OnTabChangeListener(){
            @Override
            public void onTabChanged(String tabId){
                mCurrentTab = tabId;
            }
        });

        .
        .
        .
    }

    public getCurrentTab(){
        return mCurrentTab;
    } 
```

请注意，自 ICS（4.0）以来，TabActivity 已被弃用，因此您可以考虑改用 Fragments，

# python - python (django) hashlib vs Nodejs 加密

> ID：15395194
> 
> 赞同：10
> 
> 时间：2013-03-13T19:56:07.983
> 
> 标签：python, django, node.js, hashlib, passport.js

我正在将 Django 站点移植到 Node.js，并且我正在尝试在 Node.js 中重新实现 Django 设置密码方法。这是 Django 代码

```
from django.utils.crypto import (
    pbkdf2, get_random_string)

import hashlib

password = 'text1'
algorithm = "pbkdf2_sha256"
iterations = 10000
salt = 'p9Tkr6uqxKtf'
digest = hashlib.sha256
hash = pbkdf2(password, salt, iterations, digest=self.digest)
hash = hash.encode('base64').strip()
print "%s$%d$%s$%s" % (self.algorithm, iterations, salt, hash) 
```

这是我到目前为止的 Node.js 代码：

```
var password = 'text1';
var hashed = crypto.createHash('sha256').update(password, 'utf8').digest();
var salt = 'p9Tkr6uqxKtf';
var algorithm = "pbkdf2_sha256";
var iterations = 10000;
crypto.pbkdf2(hashed, salt, iterations, 32, function(err, encodedPassword) {
    var newPass = new Buffer(encodedPassword).toString('base64');
    console.log(encodedPassword);

    // console.log(Buffer(encodedPassword, 'binary').toString('hex'));
    var finalPass = algorithm +'$'+ iterations +'$'+  salt +'$'+  newPass;
    console.log(finalPass);
}); 
```

我在 Node 中的解决方案输出的结果与 Python / Django 代码不同。在这一点上，我几乎无法自拔，任何帮助都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-09T09:19:47.523

这是使用[pbkdf2-sha256](https://github.com/cryptocoinjs/pbkdf2-sha256)的更好解决方案：

```
var pbkdf2 = require('pbkdf2-sha256');
var password = 'text1';
var salt = 'p9Tkr6uqxKtf';
var algorithm = "pbkdf2_sha256";
var iterations = 10000;
var hashed = pbkdf2(password, new Buffer(salt), iterations, 32).toString('base64');
var finalPass = algorithm +'$'+ iterations +'$'+  salt +'$'+  hashed; 
```

上面的代码应该足以使用 Node.js 验证存储在 Django 中的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:27:24.870

所以我对此的解决方案是创建一个 python 脚本，它接受盐和用户密码并返回散列密码。我从节点调用这个脚本并解析结果。我检查散列密码是否以：pbkdf2_sha256 开头，然后根据我的 python 脚本返回的内容验证它，如果它验证使用我的新系统散列函数来重置密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T12:56:54.717

请改用[pbkdf2-sha256](https://github.com/cryptocoinjs/pbkdf2-sha256)。遇到了您正在处理的完全相同的问题（Django -> NodeJS），这对我有用！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T23:17:16.503

按照bababa的回答，我的方法是创建一个Python脚本以及使用

“从 django.contrib.auth 导入哈希”

函数 hashers.check_password() 和 hashers.make_password() 提供了针对 Django 安装验证或创建密码所需的功能。

有关此功能的更多文档，请参见[https://docs.djangoproject.com/en/1.5/topics/auth/passwords/](https://docs.djangoproject.com/en/1.5/topics/auth/passwords/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-28T21:16:08.890

感谢@paldepind 的回答对我有帮助！但是，不推荐使用 pbkdf2-sha256 模块。虽然它被替换为[pbkdf2](https://github.com/crypto-browserify/pbkdf2)，但这也不是必需的；Node 为内置的加密模块提供了一个[pbkdf2](https://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2sync_password_salt_iterations_keylen_digest)函数，如果你给它正确的参数，它就可以工作。这是带有 OP 密码的代码。我还用我自己的密码验证了这段代码：

```
const crypto = require("crypto");

// Given the following password, using algorithm pbkdf2_sha256:
// pbkdf2_sha256$10000$p9Tkr6uqxKtf$9OTqv/1X3jvhdyWRm1vwQzMYO9cOzth7hYpoFe0qboA=

var password = "text1";
var salt = "p9Tkr6uqxKtf";
var iterations = 10000;

crypto.pbkdf2(password, salt, iterations, 32, "sha256", (err, derivedKey) => {
  if (err) throw err;
  console.log(derivedKey.toString("base64"));
}); 
```

您也可以使用[pbkdf2Sync](https://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2sync_password_salt_iterations_keylen_digest)。

# spring-mvc - Spring MVC——HTTP 状态 500

> ID：15395200
> 
> 赞同：0
> 
> 时间：2013-03-13T19:56:22.717
> 
> 标签：spring-mvc

我是 Spring MVC 的新手。（我知道 Struts MVC，但我需要学习 Spring MVC。）我试图让我的应用程序的首页（位于 /WEB-INF/jsp/Welcome.jsp）出现，但我收到以下消息：

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: java.lang.VerifyError: (class: org/apache/jasper/runtime/JspApplicationContextImpl, method: createELResolver signature: ()Ljavax/el/ELResolver;) Incompatible argument to function
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:275)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1265)
    org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1016)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:965)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.VerifyError: (class: org/apache/jasper/runtime/JspApplicationContextImpl, method: createELResolver signature: ()Ljavax/el/ELResolver;) Incompatible argument to function
    org.apache.jasper.runtime.JspFactoryImpl.getJspApplicationContext(JspFactoryImpl.java:200)
    org.apache.jsp.WEB_002dINF.jsp.Welcome_jsp._jspInit(Welcome_jsp.java:25)
    org.apache.jasper.runtime.HttpJspBase.init(HttpJspBase.java:52)
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:159)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1265)
    org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1016)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:965)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Job Connections Bulletin Board</display-name>

    <servlet>
        <servlet-name>jcbulboard</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jcbulboard</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>Welcome.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

jcbulboard-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="com" />

    <mvc:annotation-driven />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
</beans> 
```

家庭控制器.java

```
package com.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {
    @RequestMapping(value = "/")
    public String home() {
        return "WEB-INF/jsp/Welcome";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:38:19.103

我相信我已经解决了这个问题。我在 Tomcat 7 下运行，但我认为我有 Tomcat 6 的 jars。我已经在我的 lib 文件夹中替换了它们，并且该错误消息已经消失。

# windows - 任务计划未运行批处理文件

> ID：15395201
> 
> 赞同：2
> 
> 时间：2013-03-13T19:56:22.997
> 
> 标签：windows, windows-7, vbscript, batch-file, scheduled-tasks

我有文件可以执行某些操作，如果我手动运行该文件，它可以正常工作，但在任务调度程序中设置时它不会运行。

批处理文件位于 Windows 7 桌面上的文件夹中。

任何反馈都会有所帮助。

我什至试过[这个链接](http://www.blogfodder.co.uk/2012/4/20/win-2008-task-scheduler-with-return-code-1-0x1)解决方案不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:02:25.617

在这种情况下，您很可能需要确保脚本运行所在的目录（“开始于”）设置正确。通常这是包含您的脚本的同一目录。您可以在计划任务的属性中进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T18:23:57.270

我不知道这是否会有所帮助，但是在一个接一个地解决一个问题太多小时后，我终于让自己的批处理文件作为计划任务正常工作。我在这个过程中学到的一些东西：

1.  如果您是创建计划任务的用户，您还必须是使用密码登录系统的用户。
2.  批处理文件中对文件名的任何引用都必须是完全限定路径的最后一部分，以驱动器号开头。
3.  如果您进行比较，例如 [%flag%] EQU [0]，请注意“[”和“]”符号是包含在要比较的数据中的字符串文字。
4.  如果您的批处理文件的一部分设置了一个变量并包含一个“FOR”循环，该循环调用您希望在其中更改变量的子例程，您需要确保该变量在批处理文件中尽早初始化。也就是说，像这样：

    ```
    IF ... (
      SET %flag=0
      FOR ... (CALL :subr)
      IF [%flag%] EQU [1] ( main scheduled-task command goes here)
    )
    GOTO :eof

    :subr
      IF ... (SET %flag=1)

    :eof 
    ```

--从命令行工作，但不是作为计划任务。我必须在第一个 IF 之前移动 %flag 的初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T12:18:44.633

作为测试，尝试将 .bat 文件移动到具有基本权限的目录（例如，可能是共享目录）。

我和你有同样的问题。我的 .bat 文件位于具有一些限制性权限的文件夹中，因此只有我的用户帐户可以访问它。即使我已将任务计划程序设置为使用我的凭据，它仍然失败。将 .bat 文件移动到另一个目录可以解决问题。

# macos - 有没有办法区分启动服务在登录时或用户启动的应用程序？

> ID：15395202
> 
> 赞同：3
> 
> 时间：2013-03-13T19:56:23.953
> 
> 标签：macos, cocoa, startup, launch-services

Cocoa 应用程序可以将自己添加到 `LSSharedFileList`登录项列表中。这将允许在用户登录时启动应用程序。但是，有没有办法判断用户是启动应用程序还是应用程序在登录时自动启动？这很有用，因为在一种情况下，我们可以在另一种情况下显示用户界面，我们可以隐藏 UI 并将应用程序作为菜单栏应用程序在后台运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:37:10.677

这是一些代码。我不确定它会为登录项返回什么，但是如果您尝试一下并发表评论，我会更新帖子。它确实`com.apple.Finder`为 Finder 和`com.apple.dt.Xcode`Xcode 返回。

```
+ (NSString *) bundleIdentifierOfParentProcess {
    NSString *result = nil;
    ProcessSerialNumber psn = {0, 0};
    if (0 == GetCurrentProcess(&psn)) {
        ProcessInfoRec myProcessInfo;
        myProcessInfo.processInfoLength = sizeof(ProcessInfoRec);
        myProcessInfo.processName = NULL;
        myProcessInfo.processAppRef = NULL;
        if (0 == GetProcessInformation(&psn, &myProcessInfo)) {
            ProcessSerialNumber parentPSN = myProcessInfo.processLauncher;
            CFDictionaryRef parentProcessInfo =
            ProcessInformationCopyDictionary(&parentPSN,
                                             kProcessDictionaryIncludeAllInformationMask);
            if (parentProcessInfo) {
                result =
                [(__bridge NSDictionary *) parentProcessInfo objectForKey:
                (__bridge id) kCFBundleIdentifierKey];
                CFRelease(parentProcessInfo);
            }
        }
    }
    return result;
} 
```

`parentProcessInfo`是一个充满值的字典，如果捆绑标识符不够有意义，它也可能会有所帮助。

# python - py2exe 仅在捆绑时使用 PyQt4 应用程序失败？[Win7 64位]

> ID：15395205
> 
> 赞同：0
> 
> 时间：2013-03-13T19:56:35.657
> 
> 标签：python, pyqt, py2exe

我希望这不是重复，因为有几个问题似乎涵盖了这个问题，但没有一个问题具有决定性的答案。

> [Python：PyQt4 Py2exe](https://stackoverflow.com/questions/4640140/python-pyqt4-py2exe) - 没有答案

我有一个非常简单的脚本，它启动一个带有“Hello World”QPushButton 的窗口。单击后，应用程序退出。尽可能简单。

使用非常准系统`setup.py`，我生成了一个`dist`包含大量文件的文件夹。应用程序运行良好。

我上网并在我的脚本中添加了`'bundle_files':1`和`zipfile=None`行，现在我得到了一个 22mb 的 exe，而不是大量的文件，当我尝试执行它时它会静默失败。没有日志文件，没有错误消息，什么都没有。只是一秒钟的犹豫，什么都没有。

另一个不确定的 SO 线程表明这是 py2exe 和 Windows 64 的问题，但贡献者无法解释问题是什么或他在哪里读到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:19:57.637

您应该使用 pyexe 的 win64 版本。另外，请根据 Python 版本检查 py2exe 的版本（您可能有 2.7 ？）

[http://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/py2exe-0.6.9.win64-py2.7.amd64.exe/download?use_mirror=ignum&download=](http://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/py2exe-0.6.9.win64-py2.7.amd64.exe/download?use_mirror=ignum&download=)

# xml - 如何使用 xsl 将 xml 文件的元素显示为编号列表？

> ID：15395207
> 
> 赞同：0
> 
> 时间：2013-03-13T19:56:42.037
> 
> 标签：xml, xslt

我编写了一个 xsl，用于将我的 xml 文件的元素显示为编号列表。但我的 IE 浏览器并非每次都显示该列表。我想知道我的代码有什么问题。

这是我的 xsl 文件：

```
<?xml version = "1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/xsl/Transform">
<xsl:template match="/">
<html>
<body>
<ul>
<xsl:for-each select="Recipe/Ingredients/Ingredient">
<li><xsl:value-of select="name"/></li>
</xsl:for-each>
</ul> 
<ol>
<xsl:for-each select="Recipe/Steps/Step">
<li><xsl:value-of select="Action"/></li>
</xsl:for-each>
</ol>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

这是我的xml文件：

```
<?xml version = "1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="recipe.xsl"?>
<!DOCTYPE Recipe [
  <!ELEMENT Recipe (Ingredients, Steps, Nutrition)> 
  <!ATTLIST Recipe Recipe_name NMTOKEN #REQUIRED>
  <!ATTLIST Recipe Recipe_Lan (EN|FI|JP|CH) "EN">
  <!ELEMENT Ingredients (Ingredient+)> 
  <!ELEMENT Ingredient (name,Composedby?)>
  <!ELEMENT name (#PCDATA)> 
  <!-- PCDATA means the parsed character data, while CDATA refers to unparsed character data. so in an xml document, characters like"&",">" are illegal -->

  <!ELEMENT Composedby (Ingredient+)> 

  <!ATTLIST Ingredient Uni_ID ID #REQUIRED>
  <!ATTLIST Ingredient Amount CDATA #IMPLIED>
  <!ELEMENT Steps (Step+)>
  <!ELEMENT Step (Name, Action)>
  <!ELEMENT Name (#PCDATA)> 
  <!ELEMENT Action (#PCDATA)> 
  <!ATTLIST Step Duration CDATA #REQUIRED>
  <!ELEMENT Nutrition (Calories, Fat, Protain_amount)> 
  <!ELEMENT Calories (#PCDATA)> 
  <!ELEMENT Fat (#PCDATA)> 
  <!ELEMENT Protain_amount (#PCDATA)> 
]> 

<Recipe Recipe_name="Vinegar_pepper_Soup" Recipe_Lan="EN">
<Ingredients>
    <Ingredient Uni_ID="V1" Amount="500ml">
        <name>chicken broth</name>
        <Composedby>
            <Ingredient Uni_ID="V2" Amount="100g">
                <name>chicken</name>
            </Ingredient>
            <Ingredient Uni_ID="V3" Amount="500g">
                <name>water</name>
            </Ingredient>
        </Composedby>
    </Ingredient> 
    <Ingredient Uni_ID="V4" Amount="50g">
                <name>tofu</name>
    </Ingredient>
    <Ingredient Uni_ID="V5" Amount="10ml">
                <name>vinegar</name>
    </Ingredient>
    <Ingredient Uni_ID="V6" Amount="10g">
                <name>flour</name>
    </Ingredient>
    <Ingredient Uni_ID="V7" Amount="100g">
                <name>winter bamboo shoots</name>
    </Ingredient>
    <Ingredient Uni_ID="V8" Amount="30g">
                <name>carrot</name>
    </Ingredient>
    <Ingredient Uni_ID="V9" Amount="one">
                <name>egg</name>
    </Ingredient>
    <Ingredient Uni_ID="V10" Amount="15ml">
                <name>soya light</name>
    </Ingredient>
    <Ingredient Uni_ID="V11" Amount="5g">
                <name>white pepper powder</name>
    </Ingredient>
    <Ingredient Uni_ID="V12" Amount="10ml">
                <name>oil</name>
    </Ingredient>

</Ingredients>
<Steps>
    <Step Duration="3 minutes">
        <Name>Washing</Name>
        <Action>Wash all the stuffs</Action>
    </Step>
    <Step Duration="10 minutes">
        <Name>Cutting</Name>
        <Action>Cutting carrots, winter bamboo shoots and toufu into small pieces</Action>
    </Step>
    <Step Duration="3 minutes">
        <Name>Egg Beating</Name>
        <Action>Beat the egg</Action>
    </Step>
    <Step Duration="5 minutes">
        <Name>Stuffs frying</Name>
        <Action>Pour 10ml oil to the heated pot, wait until it gets warm, fry the cutting stuffs</Action>
    </Step>
    <Step Duration="3 minutes">
        <Name>Water flour</Name>
        <Action>Water the flour, pour it into the pot and stir</Action>
    </Step>
    <Step Duration="1 minutes">
        <Name>Egg liquid Pouring</Name>
        <Action>Pour the egg liquid to the pot and stir</Action>
    </Step>
    <Step Duration="1 minutes">
        <Name>Seasoning</Name>
        <Action>put the venigar, white pepper powder and soya light into the pot</Action>
    </Step>
</Steps>
<Nutrition>
        <Calories>50 cal per 100g</Calories>
        <Fat>5g per 100g</Fat>
        <Protain_amount>10g per 100g</Protain_amount>
</Nutrition>
</Recipe> 
```

IE 浏览器显示如下：![在此处输入图像描述](../Images/218d98e2da2490aedd08d50f244ab82a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:04:54.650

您的 XSLT 命名空间 URI 错误，应该是

```
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
```

注意`XSL`大写。

# arrays - Boost Array 文档参考？

> ID：15395208
> 
> 赞同：2
> 
> 时间：2013-03-13T19:56:42.353
> 
> 标签：arrays, boost

在哪里可以找到 Boost Array 的参考资料。这一页：

[http://www.boost.org/doc/libs/1_53_0/doc/html/array/reference.html](http://www.boost.org/doc/libs/1_53_0/doc/html/array/reference.html)

不引用我知道存在的某些功能，例如`size`函数。哪里有权威参考？我必须使用源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:53:42.913

这很棘手——您必须单击标题文本中的“类数组”。这会将您带到此页面：

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost/array.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/array.html)

哪个应该有你期望找到的一切:)

# c# - 解决我的连接字符串问题

> ID：15395210
> 
> 赞同：0
> 
> 时间：2013-03-13T19:56:48.657
> 
> 标签：c#, asp.net

我正在尝试制作简单的注册表单，我想将文本框中的数据插入到 DataSet 表中，这是我的 WebForm 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.Sql;
using System.Configuration;
using System.Data.SqlClient;

namespace IknowyourbrainWebSite
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

        protected void Page_Load(object sender, EventArgs e)
        {
            con.Open();
        }

        protected void Button2_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("insert into tbl values('"+TxtUserName.Text+"','"+TxtPassword.Text+"','"+TxtRePassword.Text+"')", con);
            cmd.ExecuteNonQuery();
            con.Close();
            TxtUserName.Text = "";
            TxtPassword.Text = "";
            TxtRePassword.Text = "";

        }
    }
} 
```

当我启动它时出现错误：

```
Server Error in '/' Application.
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
 Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)

Source Error: 

Line 20:         protected void Page_Load(object sender, EventArgs e)
Line 21:         {
Line 22:             con.Open();
Line 23:         }
Line 24: 

 Source File:  c:\Users\Fluksikarton\Documents\Visual Studio 2012\Projects\IknowyourbrainWebSite\IknowyourbrainWebSite\WebForm1.aspx.cs    Line:  22 

Stack Trace: 

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295167
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5307115
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +920
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +225
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions) +37
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions) +558
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions) +67
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection) +1052
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +78
   System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +167
   System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +143
   System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) +83
   System.Data.SqlClient.SqlConnection.Open() +96
   IknowyourbrainWebSite.WebForm1.Page_Load(Object sender, EventArgs e) in c:\Users\Fluksikarton\Documents\Visual Studio 2012\Projects\IknowyourbrainWebSite\IknowyourbrainWebSite\WebForm1.aspx.cs:22
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51
   System.Web.UI.Control.OnLoad(EventArgs e) +92
   System.Web.UI.Control.LoadRecursive() +54
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +772
enter code here 
```

这个错误是否可能是由于我的公共 IP 不是静态的，我的意思是动态的，据我所知，每次我重新启动路由器或调制解调器或其他任何东西时它都会改变，或者问题出在我的代码/选项中

这是我在 web.config 中的连接字符串代码：

```
<configuration>
    <connectionStrings>
        <add name="ConnectionString" connectionString="Data Source=|DataDirectory|\RegistrationDataBase.sdf"
            providerName="System.Data.SqlServerCe.4.0" />
    </connectionStrings>
    <system.web>
      <compilation debug="true" targetFramework="4.5" />
      <httpRuntime targetFramework="4.5" />
    </system.web>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:59:13.790

如果您的连接字符串设置不正确，通常会触发此错误。您是否验证它是正确的，服务器名称和实例是否正确，凭据是否正确以及您的服务器是否设置为接收远程连接（假设它与您的代码不在同一个盒子上）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:01:31.840

错误通常是错误的连接字符串。请检查一下。

你为什么不像这样重写 Button2_Click 。

```
protected void Button2_Click(object sender, EventArgs e)
{
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        con.Open();
        SqlCommand cmd = new SqlCommand("insert into tbl values('"+TxtUserName.Text+"','" + TxtPassword.Text+"','"+TxtRePassword.Text+"')", con);
        cmd.ExecuteNonQuery();
        con.Close();
        TxtUserName.Text = "";
        TxtPassword.Text = "";
        TxtRePassword.Text = ""; 
```

}

一些好的起点：

[如何检查连接字符串是否有效？](https://stackoverflow.com/questions/434864/how-to-check-if-connection-string-is-valid)

或者

[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

阅读你得到的实际错误

> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）]

# android - admob 膨胀类 com.google.ads.AdView 时出错

> ID：15395219
> 
> 赞同：1
> 
> 时间：2013-03-13T19:57:21.490
> 
> 标签：android, sdk, admob

我有在其中运行 admob 广告的应用程序。最近我切换到新的 admob SDK (6.3.1) 并设置中介键而不是标准的 admob 键。除了 key 之外，我没有更改代码中的任何内容。现在我通过开发者控制台收到了这个错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mycompany.myapp/com.mycompany.myapp.WebBrowser}: android.view.InflateException: Binary XML file line #23: Error inflating class com.google.ads.AdView
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4895)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #23: Error inflating class com.google.ads.AdView
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.mycompany.myapp.AdHandler.loadAdmobAd(AdHandler.java:61)
at com.mycompany.myapp.AdHandler.loadAd(AdHandler.java:28)
at com.mycompany.myapp.WebBrowser.onCreate(WebBrowser.java:173)
at android.app.Activity.performCreate(Activity.java:5163)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 22 more
Caused by: java.lang.IllegalArgumentException: Optimized data directory /storage/sdcard0/Android/data/com.mycompany.myapp/cache is not owned by the current user. Shared storage cannot protect your application from code injection attacks.
at dalvik.system.DexFile.<init>(DexFile.java:100)
at dalvik.system.DexFile.loadDex(DexFile.java:149)
at dalvik.system.DexPathList.loadDexFile(DexPathList.java:261)
at dalvik.system.DexPathList.makeDexElements(DexPathList.java:229)
at dalvik.system.DexPathList.<init>(DexPathList.java:96)
at dalvik.system.BaseDexClassLoader.<init>(BaseDexClassLoader.java:52)
at dalvik.system.DexClassLoader.<init>(DexClassLoader.java:57)
at com.google.ads.ak.f(SourceFile:354)
at com.google.ads.ak.b(SourceFile:95)
at com.google.ads.ak.a(SourceFile:69)
at com.google.ads.n.<init>(SourceFile:158)
at com.google.ads.internal.d.<init>(SourceFile:267)
at com.google.ads.AdView.a(SourceFile:508)
at com.google.ads.AdView.a(SourceFile:370)
at com.google.ads.AdView.<init>(SourceFile:125)
... 25 more 
```

用户给我留言：再次打开时崩溃

这是 AdHandler 类：

```
public class AdHandler {
    private Activity act;
    private AppClass appState;

    public AdHandler(Activity _act,AppClass _appState){
        act=_act;
        appState=_appState;
    }

    public void loadAd() {
        loadAdmobAd();
    }

    public void loadAdmobAd_() {
        //no ads!
        return;
    }

    public void loadAdmobAd() {
        AdView adView=(AdView) act.findViewById(R.id.vw_adview_admob);

        if(adView==null) {
            LinearLayout adBlock=(LinearLayout)act.findViewById(R.id.ad_block);
            LayoutInflater vi = (LayoutInflater) act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View v = vi.inflate(R.layout.vw_admobcontainer, adBlock);
            adView = (AdView) v.findViewById(R.id.vw_adview_admob);
        }

        act.findViewById(R.id.vw_admobcontainer).setVisibility(View.VISIBLE);
        act.findViewById(R.id.ad_block).setVisibility(View.VISIBLE);

        AdRequest ar = new AdRequest();

        ar.addTestDevice(AdRequest.TEST_EMULATOR);

        adView.loadAd(ar);

        adView.setAdListener(new AdListener() {

            public void onDismissScreen(Ad arg0) {
                // TODO Auto-generated method stub
            }

            public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
                act.findViewById(R.id.ad_block).setVisibility(View.GONE);
                if(WebBrowser.class.isInstance(act)){
                    appState.browserAddLoaded=false;
                    ((WebBrowser)act).setAllWebBrowserButtons();
                }
            }

            public void onLeaveApplication(Ad arg0) {
                // TODO Auto-generated method stub
            }

            public void onPresentScreen(Ad arg0) {
                // TODO Auto-generated method stub
            }

            public void onReceiveAd(Ad arg0) {
                if(WebBrowser.class.isInstance(act)){
                    appState.browserAddLoaded=true;

                    act.findViewById(R.id.ad_block).setVisibility(View.VISIBLE);
                    act.findViewById(R.id.ad_block).invalidate();
                    ((WebBrowser)act).setWebBrowserButtons();
                }
            }
        });
    }
} 
```

这是 admob xml (vw_admobcontainer)：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
    android:id="@+id/vw_admobcontainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- Admob - MEDIATION -->
    <com.google.ads.AdView

            android:id="@+id/vw_adview_admob"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_horizontal|bottom"
            ads:adSize="BANNER"
            ads:adUnitId="8xxxxxxxxxxx1" />

</LinearLayout> 
```

这是 admob 容器 xml (ad_block)：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
    android:id="@+id/ad_block"
    android:layout_width="320dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_gravity="center_horizontal|center"
    android:orientation="vertical"
    android:padding="0dp" 
    android:visibility="gone"
    android:background="#FFFFFFFF">

</LinearLayout> 
```

这是包含 ad_block 布局的活动布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/sky"  >

    <FrameLayout android:layout_width="fill_parent"
        android:layout_height="0dp"
             android:layout_weight="1" >

    <WebView android:id="@+id/web_browser"  
             android:layout_width="fill_parent"  
             android:layout_height="fill_parent"
             android:background="#FFFFFFFF"
               />  

    <ProgressBar android:id="@+id/web_browser_bussy" 
         android:layout_width="50dp"
         android:layout_height="50dp"
         style="@style/android:Widget.ProgressBar.Inverse"
         android:layout_gravity="center"
         />

    </FrameLayout>
    <include layout="@layout/ad_block" />
    <ProgressBar android:id="@+id/web_browser_progress_bar" 
         android:layout_width="fill_parent"
         android:layout_height="5dp"
         style="@style/android:Widget.ProgressBar.Horizontal"
         android:layout_marginRight="5dp"
         android:layout_marginLeft="5dp"
         android:layout_marginTop="2dp"
         android:layout_marginBottom="2dp"
         android:progressDrawable="@drawable/progress_bar"
         />
    <include layout="@layout/web_browser_footer"  android:id="@+id/browser_footer" />
</LinearLayout> 
```

Admob SDK 位于 lib 文件夹内，广告工作正常。我从未成功在我的设备上创建此错误。

谁能告诉我是什么问题？

# jquery - 启用禁用 jquery 脚本 onclick

> ID：15395221
> 
> 赞同：0
> 
> 时间：2013-03-13T19:57:23.263
> 
> 标签：jquery

我想在不同的 jquery 插件之间切换：在另一个被激活（启用）时停用（禁用）一个。

我有一个 html 页面，其中有一个 touchslider (github.com/iosscripts/iosSlider) 和一个 3D 查看器 (github.com/creativeaura/threesixty-slider)。

我想通过一个按钮在 2D 视图（iosslider）和 3D 视图（三个六十滑块）之间切换。我只想一次启用一个。

我创建了一个小提琴（3D 查看器不起作用，我不知道为什么）： http: [//fiddle.jshell.net/TL72w/1/](http://fiddle.jshell.net/TL72w/1/)

这是我的网站，2D 和 3D 视图工作正常，但有一些冲突（因为它们同时被激活）： http: [//freakyshape.com/](http://freakyshape.com/)

这是显示的脚本：没有 2D 和 3D 查看器（我想添加启用禁用 jquery 查看器）：

```
$(document).ready(function() {
   $("a.on.tggl").click(function() {
    $(this).addClass("active");
    $(this).next(".tggl").removeClass("active");
    $('.container-iosSlider').css('display', 'block');
    $('.360-viewer').css('display', 'none');
    $('.custom_nav_bar').css('display', 'none');
    return false;
  });
  $("a.off.tggl").click(function() {
    $(this).addClass("active");
    $(this).prev(".tggl").removeClass("active");
    $('.container-iosSlider').css('display', 'none');
    $('.360-viewer').css('display', 'block');
    $('.custom_nav_bar').css('display', 'block');
    return false;
  });
  $("a.on.pshbtn").click(function() {
    $(this).addClass("active");
    $("a.off.pshbtn").removeClass("active");
    return false;
  });
  $("a.off.pshbtn").click(function() {
    $(this).addClass("active");
    $("a.on.pshbtn").removeClass("active");
    return false;
  });  
 }); 
```

对不起英语，我是法国人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:09:52.390

您可能想取消绑定：[http ://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

如果你使用 on()，你也可以使用 off()：[http ://api.jquery.com/off/](http://api.jquery.com/off/)

# c++ - 互斥体所有权队列顺序

> ID：15395222
> 
> 赞同：2
> 
> 时间：2013-03-13T19:57:27.170
> 
> 标签：c++, winapi, synchronization, mutex

假设我有三个线程都通过互斥锁访问相同的互斥部分。

让我给你这个例子。

第一个线程探测互斥体并首先获得其所有权：

```
//THREAD 1
//TIME: 2013-03-13 01:00:00.000Z
WaitForSingleObject(hMutex, INFINITE);

//Performs the operation that lasts 50 ms

ReleaseMutex(hMutex); 
```

然后 10 毫秒后线程 2 也请求它：

```
//THREAD 2
//TIME: 2013-03-13 01:00:00.010Z
WaitForSingleObject(hMutex, INFINITE);
//Do work
ReleaseMutex(hMutex); 
```

20 毫秒后线程 3 也请求它：

```
//THREAD 3
//TIME: 2013-03-13 01:00:00.030Z
WaitForSingleObject(hMutex, INFINITE);
//Do work
ReleaseMutex(hMutex); 
```

在这种情况下，我是否可以确定线程 2 将始终在线程 3 之前获得互斥锁所有权（因为可以说它是“排在第一位的”），或者在线程 2 和线程 3 之间获得所有权完全是任意的？

如果互斥锁是任意的，如何确保第一个等待线程首先获得所有权？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:59:30.510

可以肯定地说，出于您的目的，它是任意的，因为操作系统将唤醒等待互斥锁的线程之一并将其授予线程，但关于哪个线程的决定是不确定的。

您可以使用全局优先级索引在线程之间实现自己的优先级方案。然后，如果等待互斥锁的线程之一接收到它而不是*第一行*，它会立即放弃它并继续等待，直到互斥锁再次可用。这应该重复，直到获取 Mutex 并且线程根据线程的优先级索引与全局索引相比处于*第一行。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:12:36.433

在 Vista 和 Windows Server 2003 SP1 之前，锁定原语试图提供公平 (FIFO)。由于公平导致锁车队，自 Vista 和 Windows Server 2003 SP1 以来，锁定原语明显不公平（无 FIFO）。请参阅[Windows Server 2003 SP1 和 Windows Vista 中的反护航锁](http://www.bluebytesoftware.com/blog/PermaLink,guid,e40c2675-43a3-410f-8f85-616ef7b031aa.aspx)以及链接的文章。

# ruby - rails 应用命令

> ID：15395227
> 
> 赞同：0
> 
> 时间：2013-03-13T19:57:40.200
> 
> 标签：ruby, ruby-on-rails-4

根据“rails”命令的输出，有“rails application”命令。当我使用它时，我会看到“rails new”命令的输出。

...

```
Description:
The 'rails new' command creates a new Rails application with a default
directory structure and configuration at the path you specify.

You can specify extra command-line arguments to be used every time
'rails new' runs in the .railsrc configuration file in your home directory.

Note that the arguments specified in the .railsrc file don't affect the
defaults values shown above in this help message.

Example:
rails new ~/Code/Ruby/weblog

This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
See the README in the newly created application to get going. 
```

Mb 我做错了什么？或者这些命令做同样的事情？对不起我写得不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:56:45.093

`rails application`不是一个有效的命令。

如果给出了无效命令，`rails`命令行工具将打印出手册页。大多数命令行工具都是这样做的。

运行`rails nonexistent_command`，它将打印出手册页。

如果在 Rails 应用程序之外，它将打印`rails new`. 如果在 rails app 目录中，它将打印出其他可能的命令。例如`rails generate`,`rails console`等。

# ruby-on-rails - 使用 Safari、chrome 或 Firefox 在 Rails 4 上运行 Selenium 时出错

> ID：15395230
> 
> 赞同：1
> 
> 时间：2013-03-13T19:57:44.937
> 
> 标签：ruby-on-rails, ruby, selenium, capybara

我正在尝试使用 rspec 让 selenium（通过 Capybara）在 rails 4、ruby 2.0.0 环境中工作。我尝试通过在我的 spec_helper.rb 中设置配置设置来使用每个浏览器。以 Safari 为例；

```
Capybara.register_driver :selenium do |app|
  Capybara::Selenium::Driver.new(app, :browser => :safari)
end 
```

对于所有浏览器，我已确保适当的驱动程序（例如 safaridriver）位于`$PATH`. 测试示例（显然这里没有 Javascript/AJAX，只是想让它工作）；

```
it 'should post to the publication endpoint', :vcr do
  Capybara.current_driver = :selenium
  visit root_path
  Capybara.use_default_driver
end 
```

上`visit root_path`，我收到以下错误；

```
Selenium::WebDriver::Error::TimeOutError:
       timed out waiting for Safari to respond 
```

环境

```
rails (4.0.0.beta1)
ruby 2.0.0p0
webmock (1.9.3)
capybara (2.0.2)
selenium-webdriver (2.31.0) 
```

我已经尝试让这个工作两天了，所以非常感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:16:01.073

SafariDriver 被实现为 Safari 浏览器扩展。这意味着您需要在使用 Safari 和 Selenium 之前安装它。请按照以下步骤操作：[https ://code.google.com/p/selenium/wiki/SafariDriverInternals](https://code.google.com/p/selenium/wiki/SafariDriverInternals)

> 注册 Apple 的（免费）Safari 开发者计划并为扩展生成签名证书。
> 
> > 构建 SafariDriver 扩展：
> > ./go safari
> 
> 安装扩展：
> 
> > 启动 Safari
> > 启用开发菜单 (Preferences > Advanced > Show Develop menu in menu bar)
> > 打开 Extension Builder (Develop > Show Extension Builder)
> > 添加新扩展：$SELENIUM_CLIENT/build/javascript/safari-driver/SafariDriver.safariextension
> > 点击​​安装

# jquery - 向上拖动以隐藏 div，例如 mobile、jquery

> ID：15395234
> 
> 赞同：0
> 
> 时间：2013-03-13T19:58:01.787
> 
> 标签：jquery, jquery-ui, drag

我的应用程序中有这个部分，我想像手机中的那样在拖动时隐藏它，这可以使用 jquery 吗？或者可能是 jquery ui？

这是我所做的截图，

![在此处输入图像描述](../Images/f80d5d2b701e2f828438ff0510d69493.png)

# java - 如何在数组中查找目标值的每次出现并返回一个包含这些值索引的新数组？爪哇

> ID：15395235
> 
> 赞同：1
> 
> 时间：2013-03-13T19:58:01.977
> 
> 标签：java, arrays, indexoutofboundsexception

我正在解决一个问题，并且很难让它输出正确的信息。

我要做的是找到目标值的每一次出现并将其放入一个新数组中并输出目标值的索引。如果没有找到目标值，则返回一个空数组。 `outputs {}`

现在我收到一个错误。

```
findAll(): 
[I@349b688e
[I@46ed5d9d
java.lang.ArrayIndexOutOfBoundsException 
```

输出应该是：

`outputs {0, 5}`

`outputs {}`

```
public class FindIndex(){
public FindIndex() {
int a[] = {7, 8, 9, 9, 8, 7};

System.out.println("findAll(): ");
System.out.println(findAll(a, 7));
System.out.print(findAll(a, 2));
}

public int[] findAll(int a[], int num) {

    int indexNum = 0;
    int arrSize = 0;

    // find all occurrence of the target number
    for(int i = 0; i < a.length; i++) {
        if(a[i] == num) {
            arrSize++;
        }
    }

    // create new array 
    int newArray[] = new int[arrSize];
    for(int i = 0; i < a.length; i++) {
        if(a[i] == num) {
            newArray[indexNum] = i;

        }
    }
    return newArray;
}

public void print(int a[]) {
    System.out.print("{");
    int i;

    for(i = 0; i < a.length - 1; i++) {
        System.out.print(a[i] + ", ");
    }

    if(a.length > 0) {
        System.out.print(a[i]);
    }
    System.out.print("}\n");

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:06:20.370

您永远不会递增`indexNum`，它始终保持在`0`并且数组继续在同一索引处写入值。

我认为你应该在那里有这个表达：

```
newArray[indexNum++] = i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:07:21.367

对于您的打印问题，您实际打印的是返回的数组的地址，而不是内容。

您可以执行以下操作：

```
 System.out.println(Arrays.toString(findAll(a, 7)));
    System.out.print(Arrays.toString(findAll(a, 2))); 
```

这将为您提供以下输出：

```
[5, 0]
[] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:13:24.963

调用`findAll(a, 2)`的大小为零`newArray`，这就是你得到`ArrayIndexOutOfBoundsException`.

您应该`if (arrSize > 0)`在使用索引进行数组之前检查并访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T20:38:35.087

我正在使用代码并让它工作，但它给我在新数组中添加了零。顶部的输出应该是 0、5 我如何摆脱这些添加的零？

```
int a[] = {7, 8, 9, 9, 8, 7}; 
int array2[];

// print the occurrence of a target index value 
    System.out.println("findAll(): ");
    array2 = copy(findAll(a, 7));
    array2 = copy(findAll(a, 2));

public int[] findAll(int a[], int target) {

    int index;
    int found = 0;

   // find all occurrence of the target number
    for(int i = 0; i < a.length; i++) {
        if(a[i] == target) {
            found = target;
            i++;
        } 
    } 

    // create new array 
    int newArray[] = new int[found];
    for(int i = 0; i < newArray.length; i++) {
        if(a[i] == target) {
            newArray[i] = i;
            i++;
        }
    }
   return newArray;
} 

public int[] copy(int newArray[]) {
    System.out.print("{");
    int i;

    for(i = 0; i < newArray.length - 1; i++) {
        if (newArray.length == 0) {
            System.out.print( " " );
        } else {
            System.out.print(newArray[i] + ", ");
        }

    }

    System.out.print("}\n");
    return newArray;
 }

output:

findAll(): 
{0, 0, 0, 0, 0, 5, }
{} 
```

# lighttpd - Lightttpd 文档根目录：将默认页面从 index.php 更改为 xyz.php

> ID：15395242
> 
> 赞同：1
> 
> 时间：2013-03-13T19:58:37.583
> 
> 标签：lighttpd

我将 Lighttpd 网络服务器与 PHP 结合使用。

我试图弄清楚如何更改默认行为，以便`"www.domain.com"`加载浏览到`xyz.php`而不是`index.php;`两者都在文档根目录中。

我能够向 lighttpd 添加重定向，以便将请求`"www.domain.com/index.php"`成功重定向到`"www.domain.com/xyz.php"`.

但我不知道怎么`"www.domain.com"`去`"www.domain.com/xyz.php"`。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-27T10:09:35.800

更通用的做法是修改 /etc/lighttpd/ 中的 lighttpd.conf，只需将 xyz.php 作为设置**index-file.names**数组中的第一个：[https ://redmine.lighttpd.net/projects/1/ wiki/索引文件名_详细信息](https://redmine.lighttpd.net/projects/1/wiki/Index-file-names_Details)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:02:07.713

你有没有尝试过 ：

```
 url.redirect = (
            "^/$" => "http://www.domain.com/xyz.php"
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T09:17:28.097

您可以更改`index-file.names`lighttpd.conf 中的设置。

```
index-file.names = (
    "xyz.php", "index.php", "index.html"
) 
```

在上面的示例中，如果存在，则请求`http://www.example.com/`将首先服务`xyz.php`，如果不存在`index.php`并且两个文件都不存在`index.html`

# asp.net - aspx.cs 需要向我解释

> ID：15395243
> 
> 赞同：-7
> 
> 时间：2013-03-13T19:58:39.430
> 
> 标签：asp.net

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

和some1向我解释一下所有这些用途是做什么的？

我真的很难在互联网上找到任何东西谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:00:30.593

它们是导入的命名空间。它类似于`#include<stdio.h>`C 中的

# javascript - 使用javascript显示/隐藏div而不刷新页面

> ID：15395244
> 
> 赞同：0
> 
> 时间：2013-03-13T19:58:48.830
> 
> 标签：javascript, jquery

我有一个在页面上显示/隐藏多个独立 div 的脚本。问题是当你点击显示一个 div 时，无论在页面的哪个位置，它都会自动聚焦在第一个 div 上。有没有办法专注于显示的 div？

这是javascript：

```
 function toggleOptions(e) {
        var ele = e;
        var text = e.parentElement.querySelector('.toggleOptions')

    if(text.style.display == "none") {
        //ele.style.display = "none";
        text.style.display = "block";
        text.innerHTML = "TESTING";
        ele.innerHTML = "hide";
    }
    else {
        text.style.display = "none";
        //text.innerHTML = "Hide GPS";
        ele.innerHTML = "show";
    }

    return false;
     } 
```

这是html：

```
<div>
    <a href="#" onclick="toggleOptions(this);" style="display:block;">
        show
     </a>
      <div class="toggleOptions" style="display: none">
        ITEM 1 OPTIONS
     </div>
</div>
<div>
    <a href="#" onclick="toggleOptions(this);" style="display:block;">
        show
     </a>
      <div class="toggleOptions" style="display: none">
        ITEM 2 OPTIONS
     </div>
</div>
<div>
    <a href="#" onclick="toggleOptions(this);" style="display:block;">
        show
     </a>
      <div class="toggleOptions" style="display: none">
        ITEM 3 OPTIONS
     </div>
</div> 
```

这是工作的一个 jfiddle [http://jsfiddle.net/YE6XZ/1/](http://jsfiddle.net/YE6XZ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:00:46.267

给你的节目链接一个类，比如：

```
<a class="show" href="#" onclick="toggleOptions(this);" style="display:block;">show</a> 
```

然后将其添加到您的 jQuery 中：

```
$('a.show').click(function(e){
    e.preventDefault();
}); 
```

书签锚 ( `href="#"`) 的默认操作是跳转到页面顶部。这将阻止这种情况。**[jsFiddle 示例](http://jsfiddle.net/j08691/YE6XZ/5/)**

另一种无 jQuery 的方法是将您的 onclicks 更改为：

```
onclick="return toggleOptions(this);" 
```

因为您已经返回 false。**[jsFiddle 示例](http://jsfiddle.net/j08691/YE6XZ/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:09:08.590

我相信您也可以使用该`.focus()`方法专注于给定元素。在您的示例中：

```
function toggleOptions(e) {
    var ele = e;
    var text = e.parentElement.querySelector('.toggleOptions')

    if(text.style.display == "none") {
        //ele.style.display = "none";
        text.style.display = "block";
        text.innerHTML = "TESTING";
        text.focus(); //This should give focus to the newly shown text element
        ele.innerHTML = "hide";
    }
    else {
        text.style.display = "none";
        //text.innerHTML = "Hide GPS";
        ele.innerHTML = "show";
    }

    return false;
} 
```

除非我误解了你想要做什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T09:50:41.787

在 href 中使用 javascript:void(0)。使用 javascript 函数使用 id 显示或隐藏

```
<a href="javascript:void(0)">Show</a> 
```

# android - 为 Android WebView 启用 WebGL 支持

> ID：15395245
> 
> 赞同：15
> 
> 时间：2013-03-13T19:58:52.283
> 
> 标签：android, graphics, webview, webgl

我需要在我的 webview 中显示 WebGL 图形。有什么方法可以修改 Android WebView 以启用 WebGL。如果是，如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T20:37:46.737

在 Android Lollipop 之前的 WebViews 中不支持 WebGL。在 KitKat 中，Android 切换到 Chromium 作为本机 WebView 实现，但它被锁定为 Chromium 33，没有 WebGL。在 Lollipop 中，WebView 通过 Play 商店更新，现在支持 WebGL。（来源：[https](https://developer.chrome.com/multidevice/webview/overview) ://developer.chrome.com/multidevice/webview/overview ）

试图扩展 WebView 以支持它几乎是不可能的。

您可能会考虑的一件事是使用 CSS 3D 转换而不是 WebGL，Android ICS 和转发都支持这些转换，请参阅[http://caniuse.com/#feat=transforms3d](http://caniuse.com/#feat=transforms3d)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-17T03:27:05.077

WebGL is not supported in current Android webview, you can however use [crosswalk-project](https://crosswalk-project.org/) which is a web runtime that supports WebGL and package it in a android app along with your WebGL app. The latest [Intel XDK](http://xdk.intel.com) supports building Android apps with crosswalk runtime.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:42:57.557

您可以使用 Chrome Beta 应用程序或 Firefox Beta 应用程序在新的 Android 设备上查看 WebGL。我测试过并且可以运行的唯一设备是运行 Android 4.2.2 的 Asus Nexus 7 平板电脑。

运行 Android 4.1.2 的摩托罗拉 Razr 不支持带有 google Chrome Beta 的 WebGL。

不确定这是否直接有帮助..但仅供参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-04T03:22:29.750

尽管无法为 Android WebView 启用 WebGL，但可以选择让原生应用程序使用 WebGL 使用 Ludei (www.ludei.com) 的 CocoonJS 进行渲染。他们甚至在 Google Play 中有一个演示应用程序来展示一些已知的 WebGL 演示，即使在 Android 2.3 设备上也可以运行。

[https://play.google.com/store/apps/details?id=com.ludei.demos.webgl](https://play.google.com/store/apps/details?id=com.ludei.demos.webgl)

甚至在OUYA上运行！

[http://www.youtube.com/watch?v=ypyqkAo1jgo](http://www.youtube.com/watch?v=ypyqkAo1jgo)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-02T18:49:36.287

I have chrome version 28.0 on OS 4.2.2 WebGl is not enabled by default you need to enable it by typying chrome://flags/ in seach bar just the way shwn in pic below

[![enable WebGl Chrome Android](../Images/0ff72aeab47ea8205ac94adacf221ee9.png)](https://i.stack.imgur.com/W9nho.jpg)

Once you have enabled web gl relaunch chrome and you will be able to run most of three.js experiments . I have shared screenshots for few :-

[![cloth demo](../Images/dbfe567c76fb10e191e708bd407b61e0.png)](https://i.stack.imgur.com/5hCcY.png)

[![minecraft demo](../Images/8553fdd05b8d14b31909138e1a5c7a39.png)](https://i.stack.imgur.com/fj9Ui.png)

I also tried everything on webview but I was unable to set webgl flags. Probably it is not possible to use webgl in webviews .

# linux - 为 powerpc 构建 mysql++ 库

> ID：15395248
> 
> 赞同：0
> 
> 时间：2013-03-13T19:59:00.890
> 
> 标签：linux, powerpc, mysql++, mysql

我有一个用 C++ 编写的嵌入式应用程序（在 Linux 环境中的 PowerPC 上运行），它访问外部数据库。所以我的应用程序需要 mysql++ 库，这些库需要使用 powerpc 编译器构建。在构建库之前，我想在我的 Ubuntu VM 上为 linux 构建 mysql++ 库以检查过程。[我从官网](http://tangentsoft.net/mysql++/)下载了最新的包。然后我按照提到的步骤进行操作。

1.  ***从根目录运行 ./configure***，我收到以下错误。

****检查 MySQL 库目录...配置：错误：在 '/usr/lib64 /usr/lib /usr/lib64/mysql /usr/lib/mysql /usr/local/lib64 /usr/ 中找不到 mysqlclient 库local/lib /usr/local/lib/mysql /usr/local/mysql/lib /usr/local/mysql/lib/mysql /usr/mysql/lib/mysql /opt/mysql/lib /opt/mysql/lib/ mysql /sw/lib /sw/lib/mysql'* ***

我尝试查找 mysqlclient 并没有找到任何参考，因此我按照其他论坛中给出的说明并尝试使用以下命令安装 libmysqlclient15-dev。

***sudo apt-get install libmysqlclient15-dev***

输出如下图

***读取包列表...完成构建依赖树
读取状态信息...完成注意，选择'libmysqlclient-dev'而不是'libmysqlclient15-dev' libmysqlclient-dev 已经是最新版本。***

***以下软件包已自动安装且不再需要： libcommons-collections3-java junit4 libecj-java libdb5.1-java libasm3-java libgcj-bc gcj-4.6-jre-lib libgnomeui-common libcommons-el-java junit linux- headers-3.2.0-32 linux-headers-3.2.0-29 libcommons-compress-java libregexp-java libdb-java libswt-cairo-gtk-3-jni libjasper-java libbonoboui2-common libbonoboui2-0 libdb5.1-java -gcj libcommons-httpclient-java libservlet2.4-java liblucene2-java libswt-gtk-3-java libcommons-cli-java libslf4j-java libgcj12 libxml-commons-external-java libswt-webkit-gtk-3-jni linux-headers -3.2.0-29-generic-pae libswt-gtk-3-jni ant gcj-4。6-base libcommons-logging-java default-jdk libswt-glx-gtk-3-jni libcommons-codec-java jarwrapper libequinox-osgi-java libgcj-common libapache-pom-java libgnomeui-0 libjetty-java libjline-java libxerces2- java sat4j libcommons-beanutils-java libdb-je-java fastjar libcommons-digester-java libcommons-parent-java libhamcrest-java libjtidy-java libxml-commons-resolver1.1-java libicu4j-java linux-headers-3.2.0-32 -generic-pae libicu4j-4.4-java libwebkitgtk-1.0-common libcommons-lang-java libwebkitgtk-1.0-0 libjavascriptcoregtk-1.0-0 libjsch-java ant-optional libswt-gnome-gtk-3-jni0-common libcommons-lang-java libwebkitgtk-1.0-0 libjavascriptcoregtk-1.0-0 libjsch-java ant-optional libswt-gnome-gtk-3-jni0-common libcommons-lang-java libwebkitgtk-1.0-0 libjavascriptcoregtk-1.0-0 libjsch-java ant-optional libswt-gnome-gtk-3-jni***

***Use 'apt-get autoremove' to remove them. 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.***

After this I tried to locate libmysqlclient and I still couldn't find the libraries (.so files). I tried ***./configure*** again and it failed in the same location with the same error message. How can I install libmysqlclient ?

Once this is solved I will rebuild the mysql++ library using my toolchain for powerpc. Has anyone tried this ? To build mysql++ library I need mysqlclient, in the earlier example I would install it by executing the command ***apt-get***, but the libraries would be compiled using a gnu compiler ? How to cross compile mysqlclient for powerpc ? I guess I need to do the below

1.  Build mysqlclient for powerpc.
2.  Use those libraries and build mysql++ libraries for powerpc.
3.  Use mysql++ and mysqlclient libraries in my application and compile for powerpc.

I am new to linux and databases.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:27:34.463

I finally solved this problem. I did the below.

1.  Downloaded the Connector/C (libmysql) source files from here
2.  Cross compiled it for powerpc, below is the command given to cmake

    ```
    cmake -DCMAKE_INSTALL_PREFIX="~/mysqlclient_C/lib" -DCMAKE_C_COMPILER="ppc_4xx-gcc" -DCMAKE_C_FLAGS="-I/opt/ELDK/4.2/ppc_4xx/usr/include/" -DCMAKE_CXX_COMPILER="ppc_4xx-g++" -DCMAKE_CXX_FLAGS="-I/opt/ELDK/4.2/ppc_4xx/usr/include/" -DCMAKE_EXE_LINKER_FLAGS="-lm" 
    ```

Then a simple make generated the libmysql libraries.

1.  Downloaded mysql++ source files from [here](http://tangentsoft.net/mysql++/)
2.  Cross compiled it for powerpc, below is my configure command

    ```
    ./configure --target=powerpc-linux --host=powerpc-linux  --prefix="$HOME/mysql++/lib" --enable-thread-check --with-mysql="$HOME/mysqlclient_C/lib" CC=ppc_4xx-gcc CXX=ppc_4xx-g++ LDFLAGS=-lm CFFLAGS="-I/opt/ELDK/4.2/ppc_4xx/usr/include" CXXFLAGS="-I/opt/ELDK/4.2/ppc_4xx/usr/include" 
    ```

3.  The mysql++ libraries is generated now.

I have not tested the built libraries yet.

# amazon-web-services - Amazon Route 53 - 为 ELB 创建 A 记录，在指向该 A 记录的另一个域上创建 CNAME？

> ID：15395249
> 
> 赞同：1
> 
> 时间：2013-03-13T19:59:01.867
> 
> 标签：amazon-web-services, amazon-route53

AWS Elastic Load Balancer 的最大缺点之一是无法为其分配静态 IP。为了解决这个问题，我必须使用 Amazon Route 53 DNS，然后我可以为根/子域设置一条 A 记录以指向负载均衡器。

假设我的 Route 53 域是：domain1.com

我创建了一个弹性负载均衡器，并通过 A Record 指向它： **sub.domain1.com**

我想知道，如果我为另一个域（例如 sub.domain2.com）创建一个 CNAME 并将其指向**sub.domain1.com**是否可以？

为什么我需要这样做？

我们通过在客户网站的子域上设置静态网站来为客户网站运行促销页面。我们目前为他们提供一个 EC2 实例的静态 IP，然后他们为其创建一个 A 记录，但我们正在寻找一个负载平衡集群以实现高可用性和可扩展性。

有没有人试过这个或知道这是否可以做？我知道这个概念有点类似于 S3 CNAME，但我只是不知道这是否不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:42:21.370

> AWS Elastic Load Balancer 的最大缺点之一是无法为其分配静态 IP。

这不是设计限制，它更多地表明您正在尝试错误地使用 ELB。

> 我想知道，如果我为另一个域（例如 sub.domain2.com）创建一个 CNAME 并将其指向 sub.domain1.com 是否可以？

是的，只要确保您将 CNAME 上的 TTL 设置得足够低，以便如果/当 ELB 上的 IP 地址发生更改时，您的用户不会长时间查看过时的记录。Route53 使用 60 秒的 TTL。

> 我们通过在客户网站的子域上设置静态网站来为客户网站运行促销页面。我们目前为他们提供一个 EC2 实例的静态 IP，然后他们为其创建一个 A 记录，但我们正在寻找一个负载平衡集群以实现高可用性和可扩展性。

如果这些实际上是静态网站，最好直接从 S3 存储桶中托管它们。任何重要的事情都不应该在单个 EC2 实例上运行。

# c++ - 对于 C++ 模板，有没有办法找到“有效”输入的类型？

> ID：15395258
> 
> 赞同：0
> 
> 时间：2013-03-13T19:59:35.993
> 
> 标签：c++, templates

我有一个库，模板类/函数经常访问输入类型的显式成员，如下所示：

```
template <
typename InputType>
bool IsSomethingTrue(
  InputType arg1) {

  typename InputType::SubType1::SubType2 &a;

  //Do something

} 
```

在这里，`SubType1`and`SubType2`本身就是用于实例化的泛型类型`InputType`。有没有办法快速找到库中所有可以传入的类型`InputType`（同样是 for`SubType1`和`SubType2`）？到目前为止，我只是在整个代码库中搜索包含适当成员的类，但是模板输入名称在很多地方被重用，因此非常麻烦。

从编码的角度来看，当只有有限的一组可能已经定义的有效输入类型时，使用这样的模板有什么意义？为什么不直接用显式类型重载这个函数而不是让它们泛型呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:04:50.593

> 从编码的角度来看，当只有有限的一组可能已经定义的有效输入类型时，使用这样的模板有什么意义？为什么不直接用显式类型重载这个函数而不是让它们泛型呢？

首先，因为这些重载将具有完全相同的主体，或者非常相似的主体。如果函数的主体足够长，拥有更多的版本是维护的问题。当您需要更改算法时，您现在必须进行 N 次，希望您不会出错。大多数时候，冗余是不好的。

此外，即使*现在*可能只有少数这样的类型可以满足您函数的语法要求，但将来可能会更多。拥有一个函数模板可以让您的算法与新类型一起工作，而无需在每次引入一种新的此类类型时编写新的重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:04:38.547

使用泛型类型的好处不在于模板端：如果您愿意显式命名它们并每次都编辑模板代码，那是一样的。

但是，当您引入模板接受的类型的子类或变体时会发生什么？另一端无需修改。

换句话说，当你说所有类型都是预先知道的时，你是在排除代码修改和扩展，这是使用模板的一半。

# android - Gridview 多屏支持？

> ID：15395259
> 
> 赞同：0
> 
> 时间：2013-03-13T19:59:36.150
> 
> 标签：android, android-gridview, multiscreen

嘿伙计们，我一直在开发墙纸应用程序，它几乎完成了，但是当我尝试在各种设备上测试它时，Gridview 图像被拉伸或重叠我已经阅读了一些关于支持 MultiScreens 的文档，我认为我应该考虑所有屏幕（尺寸/分辨率/密度），但我不确定如何在我的代码中实现它我的 laout

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/GridView1"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:columnWidth="90dp"
android:horizontalSpacing="10dp"
android:verticalSpacing="10dp"
android:gravity="center"
android:stretchMode="columnWidth"
android:background="@android:color/black"
> 
```

我的图像适配器

```
 public View getView(int position, View view, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    try {
        InputStream is = mContext.getAssets().open(list.get(position));
        Bitmap bm = BitmapFactory.decodeStream(is);
        imageView.setImageBitmap(bm);
        imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        if (mContext.getResources().getDisplayMetrics().densityDpi > 200) {
            imageView.setLayoutParams(new GridView.LayoutParams(mheight/3,  v mwidth/3));
         }
        else{
            imageView.setLayoutParams(new GridView.LayoutParams(mheight/3, mwidth/3));
         }

    } catch (IOException e) {

        e.printStackTrace();
    }
    // TODO Auto-generated method stub
    return imageView;
} 
```

我只想在所有手机屏幕上显示 3 列图像如果有人可以指导我某些教程我会很高兴提前谢谢

更新代码

```
 public View getView(int position, View view, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    try {
        InputStream is = mContext.getAssets().open(list.get(position));
        Bitmap bm = BitmapFactory.decodeStream(is);
        imageView.setImageBitmap(bm);
        imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);         
    } catch (IOException e) {

        e.printStackTrace();
    }
    // TODO Auto-generated method stub
    return imageView;
}

The layout

 <GridView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/GridView1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:numColumns="3"
 android:horizontalSpacing="10dp"
 android:verticalSpacing="10dp"
 android:gravity="center"
android:stretchMode="columnWidth"
android:background="@android:color/black"
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:38:24.247

你的问题有点令人困惑，但如果你想这样做：

> 我只想在所有手机屏幕上显示 3 列图像

然后就比较简单了。

首先，在 XML 中设置 GridView 的属性：

```
android:numColumns="3"
android:stretchMode="columnWidth" 
```

这将告诉它使用三列，并将它们拉伸到可用宽度。

之后，摆脱测量代码。您不需要它，因为 GridView 可以处理子测量：

```
 if (mContext.getResources().getDisplayMetrics().densityDpi > 200) {
        imageView.setLayoutParams(new GridView.LayoutParams(mheight/3,  v mwidth/3));
     }
    else{
        imageView.setLayoutParams(new GridView.LayoutParams(mheight/3, mwidth/3));
     } 
```

# c# - 登录存储过程

> ID：15395268
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:59:57.223
> 
> 标签：c#, asp.net, html, sql-server-2008

我有一个`user`包含这些列的表：

```
 user_id
    user_name
    password
    createdate
    full_name
    location
    dep_id
    user_type 
```

我有一个包含用户名和密码的登录表单。

在这个我创建一个splogin

```
create procedure splogin
  @User_Name nvarchar(50),
  @Password nvarchar(50)
as
  Select * from [User] 
  Where User_Name = @User_Name
    and Password = @Password 
```

然后我想知道是`usertype`在登录表单或用户个人资料表单中提到的吗？

并且通过登录表单任何用户都可以登录

即批准文件的经理、主管和执行人员，以及只上传文件的简单用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:09:24.517

首先，将密码存储在数据库中被认为是一种不好的做法（您团队中具有数据库访问权限的任何人都可以看到所有密码）。相反，您应该在数据库中存储单向哈希或校验和，然后在登录期间，根据提交的密码重新创建单向哈希或校验和，并查看它是否与数据库中的内容匹配。

但是对于您的问题，听起来您正在尝试将身份验证（验证您是您所说的人）和授权（您是否允许做您想做的事情）结合起来

这两个功能应该彼此分开。将它们组合成一个功能也是不好的做法，可能会导致许多困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:08:10.933

听起来您想使用用户对象执行安全性。如果是这种情况。我将使用您的“选择”语句返回的内容创建一个用户对象。

基础班

```
class UserObj
UserName
Location
DepartmentID
UserType 
```

然后将其存储在 Session 中。像这样：

```
Session["CurrentUser"] = UserObj; 
```

然后每当您要执行验证。让对象退出会话。

```
UserObj currentUser = (UserObj)Session["CurrentUser"]; 
```

并查看它是否具有有效的用户类型

```
if(currentUser.UserType == "Director")
{
  //run this code
  //hide objects
  grid_BusinessStuff.visible = false;
} 
```

# mysql - 带条件的 MySQL SUM DISTINCT

> ID：15395269
> 
> 赞同：3
> 
> 时间：2013-03-13T19:59:58.643
> 
> 标签：mysql, if-statement, group-by, sum, distinct

我需要使用条件语句以及`DISTINCT`具有倍数的值来收集总和`GROUP BY`。下面的示例是一个复杂得多的查询的简化版本。

**因为真正的查询非常大，我需要避免大幅重写查询。**

数据

```
Contracts
    id  advertiser_id   status
    1   1               1
    2   2               1
    3   3               2
    4   1               1 
```

一个接近的查询

```
SELECT
    COUNT( DISTINCT advertiser_id ) AS advertiser_qty,
    COUNT( DISTINCT id ) AS contract_qty,
    SUM( IF( status = 1, 1, 0 ) ) AS current_qty,
    SUM( IF( status = 2, 1, 0 ) ) AS expired_qty,
    SUM( IF( status = 3, 1, 0 ) ) AS other_qty
FROM (
        SELECT * FROM  `contracts`
        GROUP BY advertiser_id, id
) AS temp 
```

目前退货

```
advertiser_qty  contract_qty    current_qty     expired_qty     other_qty   
3               4               3               1               0 
```

需要返回

```
advertiser_qty  contract_qty    current_qty     expired_qty     other_qty   
3               4               2               1               0 
```

哪里`current_qty`是 2，它是`status = 1`for only的记录总和`DISTINCT advertiser_ids`，每个求和函数都需要相同的修复。

我希望有人有一个可以插入`SUM`功能的简单解决方案。

-谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:04:55.740

试试这个

```
 SELECT
    COUNT( DISTINCT advertiser_id ) AS advertiser_qty,
    COUNT( DISTINCT id ) AS contract_qty,
    (select count(distinct advertiser_id) from contracts where status =1 
    ) AS current_qty,

   SUM( IF( status = 2, 1, 0 ) ) AS expired_qty,
   SUM( IF( status = 3, 1, 0 ) ) AS other_qty
   FROM (
   SELECT * FROM  `contracts`
   GROUP BY advertiser_id, id
   ) AS temp 
```

[**在这里演示**](http://sqlfiddle.com/#!2/53a82/7)

编辑：

你可以在没有子选择的情况下寻找这个。

```
 SELECT COUNT(DISTINCT advertiser_id) AS advertiser_qty,
        COUNT(DISTINCT id) AS contract_qty,
        COUNT(DISTINCT advertiser_id , status = 1) AS current_qty,
        SUM(IF(status = 2, 1, 0)) AS expired_qty,
        SUM(IF(status = 3, 1, 0)) AS other_qty
 FROM (SELECT *
       FROM   `contracts`
       GROUP BY advertiser_id, id) AS temp 
```

[**在这里演示**](http://sqlfiddle.com/#!2/c7c35/9)

# vb.net - 将对象正确存储在数组中

> ID：15395271
> 
> 赞同：2
> 
> 时间：2013-03-13T20:00:02.487
> 
> 标签：vb.net

我知道这可能是一个愚蠢的问题，但这是一个非常重要的问题，所以我想确保我做得正确。这个可以吗？

```
Dim obj as MyObj
Dim objarr as New Arraylist

For x as Integer = 1 to 10
     obj = New MyObj
     obj.SomeValue = x
     objarr.add(obj)
Next 
```

数组将包含所有单独的对象还是它们都包含相同的对象？我是否通过使用相同的 MyObj 对象添加到列表中而犯了错误？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:10:18.470

您通常在循环之外声明一个收集列表。我的看法：

```
Dim objarr as New Generic.List(Of MyObj)
For x as Integer = 1 to 10
  objarr.add(New MyObj With {.SomeValue = x})
Next 
```

这是我用于测试目的的一个类：

```
Private Class MyObj
  Public Property SomeValue As Integer
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:02:58.033

您只是在重用 MyObj 变量 - 将其视为一个容器。每次拨打此行

`obj = New MyObj`

您正在创建一个新`instance`的 MyObj；因此，您的 ArrayList 将包含 10 个不同的 MyObj 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:29:06.777

是的，您的代码可以正常工作。每次使用`New`操作时，您都会实例化（创建）一个新对象。因此，每次通过循环，`obj`变量都会被重新赋值以引用一个新对象。

但是，关于您的代码，有几件事可以改进。首先，您应该使用`List(Of MyObj)`而不是`ArrayList`. 其次，如果您只是在循环内声明变量，则不会那么混乱`obj`，例如：

```
Dim objects As New List(Of MyObj)()
For x As Integer = 1 To 10
    Dim obj As New MyObj()
    obj.SomeValue = x
    objects.Add(obj)
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:33:11.640

**10 种不同的物体：**

```
Dim obj(9) as MyObj
Dim objarr New Generic.List(Of MyObj) 'As Neolisk Suggested in Original Post

For x as Integer = 0 to 9
     obj(x).SomeValue = x
     objarr.add(obj(x))
Next 
```

**同一对象的 10 个不同实例：**

```
'-------Your Code------
Dim obj as MyObj
Dim objarr as New Arraylist

For x as Integer = 1 to 10
     obj = New MyObj
     obj.SomeValue = x
     objarr.add(obj)
Next 
```

# macos - MacPorts 安装 dpkg 错误

> ID：15395275
> 
> 赞同：2
> 
> 时间：2013-03-13T20:00:24.077
> 
> 标签：macos, dpkg, theos

**更新：**

`sudo port selfupdate`没有返回任何错误。这是输出：

```
--->  Updating MacPorts base sources using rsync
MacPorts base version 2.1.3 installed,
MacPorts base version 2.1.3 downloaded.
--->  Updating the ports tree
--->  MacPorts base is already the latest version

The ports tree has been updated. To upgrade your installed ports, you should run
  port upgrade outdated 
```

但是，当我运行时`sudo port upgrade outdated`，出现以下错误：

```
--->  Configuring expat
Error: org.macports.configure for port expat returned: configure failure: command execution failed
Please see the log file for port expat for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/main.log
Error: Unable to upgrade port: 1
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets 
```

运行`sudo port upgrade gettext`返回以下错误：

```
--->  Configuring expat
Error: org.macports.configure for port expat returned: configure failure: command execution failed
Please see the log file for port expat for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/main.log
Error: Unable to upgrade port: 1
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets 
```

**原始问题：**

我目前正在尝试`dpkg`在我的 Mac OS 10.7.5 上安装，所以我可以运行 theos `sudo make package`（它告诉我我不能这样做，因为`dkpg`没有安装）。

我按照[这里](https://stackoverflow.com/questions/3989466/how-to-create-deb-packages-on-mac-os-x/4004482#3989466)的说明进行操作，但是在运行时遇到了问题`sudo port install dpkg`。这是错误：

```
--->  Configuring expat
Error: org.macports.configure for port expat returned: configure failure: command execution failed
Please see the log file for port expat for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/main.log
Error: Unable to upgrade port: 1
Error: Unable to execute port: upgrade gettext failed 
```

这是的内容`main.log`：

```
version:1
:debug:main expat has no conflicts
:debug:main Executing org.macports.main (expat)
:debug:main changing euid/egid - current euid: 0 - current egid: 0
:debug:main egid changed to: 501
:debug:main euid changed to: 502
:debug:main Skipping completed org.macports.archivefetch (expat)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.fetch (expat)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.checksum (expat)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.extract (expat)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:main Skipping completed org.macports.patch (expat)
:debug:main Privilege de-escalation not attempted as not running as root.
:debug:configure configure phase started at Wed Mar 13 14:55:32 CDT 2013
:notice:configure --->  Configuring expat
:debug:configure Using compiler 'Mac OS X clang'
:debug:configure Executing org.macports.configure (expat)
:debug:configure Environment: CPATH='/opt/local/include' CFLAGS='-pipe -O2 -arch x86_64' CPPFLAGS='-I/opt/local/include' CXXFLAGS='-pipe -O2 -arch x86_64' LIBRARY_PATH='/opt/local/lib' MACOSX_DEPLOYMENT_TARGET='10.7' CXX='/usr/bin/clang++' CC_PRINT_OPTIONS_FILE='/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work/.CC_PRINT_OPTIONS' F90FLAGS='-pipe -O2 -m64' LDFLAGS='-L/opt/local/lib -arch x86_64' OBJC='/usr/bin/clang' FCFLAGS='-pipe -O2 -m64' INSTALL='/usr/bin/install -c' OBJCFLAGS='-pipe -O2 -arch x86_64' FFLAGS='-pipe -O2 -m64' CC_PRINT_OPTIONS='YES' CC='/usr/bin/clang'
:debug:configure Assembled command: 'cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work/expat-2.1.0" && ./configure --prefix=/opt/local'
:debug:configure Executing command line:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work/expat-2.1.0" && ./configure --prefix=/opt/local 
:info:configure sh: line 0: cd: /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work/expat-2.1.0: No such file or directory
:info:configure Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work/expat-2.1.0" && ./configure --prefix=/opt/local 
:info:configure Exit code: 1
:error:configure org.macports.configure for port expat returned: configure failure: command execution failed
:debug:configure Error code: NONE
:debug:configure Backtrace: configure failure: command execution failed
    while executing
"$procedure $targetname"
:info:configure Warning: targets not executed for expat: org.macports.install org.macports.configure org.macports.build org.macports.destroot
:notice:configure Please see the log file for port expat for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/main.log 
```

谁能帮我`dpkg`安装？我完全不知道问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-12T11:50:22.847

我有一个类似的问题，所以只是卸载了全部

`sudo port -fp uninstall installed`

得到了我现在安装后的软件包，所以可能值得一试

[https://www.macports.org/guide/chunked/installing.macports.uninstalling.html](https://www.macports.org/guide/chunked/installing.macports.uninstalling.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:06:46.057

我今天也遇到了这个问题 - 最后删除了 /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_textproc_expat/expat/work 中的 .macports.expat.state 文件，并执行了“port fetch expat” ' 手动确保最新的被带来。似乎在 2.1.0 上遇到了困难。

这样做之后，能够直接进行“端口升级 expat”，最终正确升级。

不太确定为什么 expat 2.1.0 升级有问题。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:56:32.617

正如 Randy Howard 所建议的，我通过使用`brew`而不是安装 dpkg 解决了这个问题。`port`

链接在这里： http: [//mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

正如 Randy 所建议的，让 Brew 启动和运行比使用 MacPorts 容易得多。卸载后者后，我运行上面页面中给出的 ruby​​ 代码，并且能够`dpkg`在几分钟内安装。

# asp-classic - 获取页面的当前 url（使用 URL Rewrite）

> ID：15395280
> 
> 赞同：12
> 
> 时间：2013-03-13T20:00:27.130
> 
> 标签：asp-classic, vbscript

我正在开发经典的 asp 应用程序。我在某些页面上使用了 URL 重写。

如何在经典 asp 中获取页面的当前 url？

示例： [http](http://www.site.com/page.asp) ://www.site.com/page.asp ---> IIS 中的 url 重写 ---> [http://www.site.com/home/page](http://www.site.com/home/page)

所以在这里我想要页面的当前网址，即[http://www.site.com/home/page](http://www.site.com/home/page)

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T22:20:31.407

没有一种功能可以做到这一切。

首先，您需要获取协议（如果它不总是 http）：

```
Dim protocol
Dim domainName
Dim fileName
Dim queryString
Dim url

protocol = "http" 
If lcase(request.ServerVariables("HTTPS"))<> "off" Then 
   protocol = "https" 
End If 
```

现在剩下的带有可选的查询字符串：

```
domainName= Request.ServerVariables("SERVER_NAME") 
fileName= Request.ServerVariables("SCRIPT_NAME") 
queryString= Request.ServerVariables("QUERY_STRING")

url = protocol & "://" & domainName & fileName
If Len(queryString)<>0 Then
   url = url & "?" & queryString
End If 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-14T10:04:01.610

您可以尝试像这样输出所有 ServerVariables：

```
for each key in Request.Servervariables
  Response.Write key & " = " & Request.Servervariables(key) & "<br>"
next 
```

也许您寻找的 URL 已经存在。我们使用 Rewrite 模块，并且调用了一个 ServerVariable `HTTP_X_ORIGINAL_URL`，其中包含重写的 URL 路径，例如您的示例中的“/home/page”。

协议 ( `HTTPS=ON/OFF`) 和服务器 ( `SERVER_NAME`) 也可以在 ServerVariables 中找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-05T07:32:51.757

如果使用 URL Rewrite，则只能通过这种方式检索 url 数据：

**Request.ServerVariables("HTTP_X_ORIGINAL_URL")**

例子

```
Dim domainName, urlParam
domainName = Request.ServerVariables("SERVER_NAME") 
urlParam   = Request.ServerVariables("HTTP_X_ORIGINAL_URL")
response.write(domainName & urlParam) 
```

# javascript - Ember.js：将记录保存到 Ember.Data，等待响应再显示

> ID：15395285
> 
> 赞同：4
> 
> 时间：2013-03-13T20:00:40.373
> 
> 标签：javascript, ember.js, ember-data

我正在构建一个允许用户发布到 Twitter 的应用程序。当他们单击提交按钮时，我们会关闭发布表单。我们创建一个 Message 对象，该对象保存到数据存储并发送到服务器。服务器创建一个 Post 对象，然后向 Twitter 提交一个请求。然后服务器更新 Post 对象，用更新的信息回复 UI。

那部分已经开始工作了。但是我需要知道它是否不起作用，以便我可以提醒用户他们的消息没有通过并保持发布表单打开。这是有关我的应用程序的一些相关信息。

```
Social.Message = DS.Model.extend({
    text: DS.attr("string"),
    created: DS.attr("date"),
    isPending: DS.attr("boolean"),
    posts: DS.hasMany("Social.Post")
});

Social.Post = DS.Model.extend({
    text: DS.attr("string"),
    status: DS.attr("string"),
    created: DS.attr("date"),
    message: DS.belongsTo("Social.Message"),
    msgStatus: function() {
        return ((this.get('status') === 'S') ? true : false);
    }.property('status')
}); 
```

帖子（状态）的生命周期从 P（待处理）到 Q（排队）再到 S（已发送），E（错误）也是一种可能性，也是我真正想要的状态。这是 saveMessage 方法：

```
saveMessage: function(text){
    var acct = Social.Account.find(this.get("id")),
        msg = Social.store.createRecord(
                    Social.Message,
                    {
                        text: text,
                        created: new Date()
                    }
                );
    acct.get("messages").addObject(msg);
    Social.store.commit();
    Ember.run.later(this, function() {
        msg.get('posts').forEach(function(p){
            p.reload();
        });
    }, 1000);
} 
```

您可以看到我暂停了一秒钟让服务器处理，然后尝试使用来自 Twitter 的响应重新加载 Post 对象。最后几行是我认为这个新代码会去的地方，但我不确定如何听一些可能不会回来的东西。我宁愿不要“等待”一秒钟，如果消息可以更新就好了。不知道如何做到这一点。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:21:10.997

创建记录后，您需要将代码作为回调运行。这是如何：

```
msg.one('didCreate', function() {
    // transition to new route showing data just created
});
Social.store.commit(); 
```

这将在记录创建时添加一次调用。还有 'didUpdate' 和 'didDelete' 钩子。您需要在调用 create 之前添加这些回调（显然）。

我不确定如何处理错误情况，因为我还没有调查过。

**编辑：**这实际上是坏的，每个[https://github.com/emberjs/data/issues/405](https://github.com/emberjs/data/issues/405)，所以等待可能是目前唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:36:25.573

听起来您不想在这里使用双向数据绑定，而您可能会受益于单向数据绑定。这是一篇很棒的全长博客文章，更深入地解释了它

[http://www.solitr.com/blog/2012/06/ember-input-field-with-save-button/](http://www.solitr.com/blog/2012/06/ember-input-field-with-save-button/)

# php - 将 JSON 存储在 MySQL 数据库中？

> ID：15395287
> 
> 赞同：9
> 
> 时间：2013-03-13T20:00:45.197
> 
> 标签：php, mysql, json

将 JSON 数据存储在 MySQL 表行中是否可以接受？我需要将数组存储在 mysql 数据库中。问题是，我不知道每个用户需要多少列。所以我想将 JSON 存储在以示例命名的一行`array`中。这是最好的方法吗？

编辑：

另外，我使用`text`的是表格列类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T20:04:52.460

是的，使用 mysql 作为键值存储是一个非常好的主意，事实上 facebook 确实有一些用途。

```
CREATE TABLE `json` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `data` blob NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

上面的表格结构会让你走得更远。分片或集群非常容易。

编辑：这里的重点是使用 PHP、Ruby 等来处理 json/data。你做`SELECT ...`，做你的编辑，然后`INSERT ... ON DUPLICATE KEY UPDATE ...`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:06:49.607

在关系数据库字段中存储多条数据通常是错误的。可以考虑可以接受的情况，但不能用于存储整个用户。

如果使用关系数据库结构还不够，您可能需要查看 NoSQL 数据库而不是 MySQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:03:23.827

这算不上问题。mySQL 已经可以处理其文本字段中的大多数括号和时髦字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:05:30.547

我认为不是。四个月后，您决定为您的实体添加一个新属性或从您的实体中删除一些属性呢？您将如何解析旧的 json 内容？如果您不知道表中需要多少列，您应该以不同的方式思考，并可能创建一个动态结构，例如使用 user_column 表

# ruby-on-rails - Jasmine Headless Webkit 主干和把手

> ID：15395290
> 
> 赞同：2
> 
> 时间：2013-03-13T20:00:47.050
> 
> 标签：ruby-on-rails, backbone.js, handlebars.js, jasmine, jasmine-headless-webkit

我正在使用[sht_rails](https://github.com/railsware/sht_rails) gem 在我的 Rails 3.2/Backbone 应用程序中呈现车把模板。

我希望在应用程序的主干和导轨部分都使用这个 .handlebars 模板，但到目前为止，我只是让它在主干中工作。

我这样使用它：

```
class MyApp.views.MyView extends MyApp.views.BaseView

  template: SHT['templates/feed_item']

  render: ->
    data = {}
    @$el.html @template(data)
    @ 
```

这在应用程序中效果很好，完全没有问题，我的车把模板看起来很可爱。

但是，这对我的 js 测试没有好处（我使用 Jasmine 和 jasmine-headless-webkit）

这就是发生的事情：

```
$ jasmine-headless-webkit
ReferenceError: Can't find variable: SHT 
```

这是完全有道理的，因为似乎 sht_rails gem 注册了 SHT 变量，但是，在我测试时它似乎并没有这样做。

运行 jhw 时是否有注册 SHT 变量的好方法？还是茉莉花本身？我什至不需要模板来为我的测试渲染，只要知道模板被调用就足够了。但是现在，我所有的茉莉花测试都被打破了，直到我弄清楚如何注册这个 SHT。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T22:46:43.760

在我们的 Rails 3.2/Backbone/Marionette 应用程序中通过[tilt-jade gem 使用](https://github.com/therabidbanana/tilt-jade)[jade 模板](http://jade-lang.com/)时，我们遇到了同样的问题（因此下面的代码示例中的变量）。我们的解决方案是创建一个模板抽象，然后在规范执行期间使用 Jasmine 间谍来伪造响应。这种方法还允许我们测试模板的使用、构造等。`JST`

### 一般间谍

如果您不熟悉 Jasmine[间谍](https://github.com/pivotal/jasmine/wiki/Spies)：

> Jasmine 集成了允许许多间谍、嘲笑和伪装行为的“间谍”。“间谍”取代了它正在监视的功能。

### 抽象

创建抽象：

```
YourApp.tpl = function(key, data) {
  var path = "templates";
  path += key.charAt(0) === "/" ? key : "/" + key;

  var templateFn = JST[path];
  if(!templateFn) {
    throw new Error('Template "' + path + '" not found');
  }
  if(typeof templateFn !== "function") {
    throw new Error('Template "' + path + '" was a ' + typeof(templateFn) + '. Type "function" expected');
  }
  return templateFn(data);
}; 
```

和必要的猴子补丁：

```
// MONKEYPATCH - Overriding Renderer to use YourApp template function
Marionette.Renderer = {
  render: function(template, model){
    return YourApp.tpl(template, model);
  }
}; 
```

### 模板抽象间谍 (spec_helper.js)

现在我们可以进行如下间谍活动：

```
spyOn(YourApp, 'tpl').andCallFake(function(key, data) {
  return function() {
    return key;
  };
}); 
```

### 奖金

由于我们正在监视该`YourApp.tpl`函数，因此我们还可以对其进行测试：

```
expect(YourApp.tpl).toHaveBeenCalledWith("your_template", { model: model, property: value }); 
```

### 附录

如果您还不知道 jasmine-headless-webkit --runner-out 标志并且正在野外调试您的 Jasmine 规格，请查看这篇[文章](https://stackoverflow.com/a/16047154/1920122)以了解如何生成带有完整回溯的运行器输出报告任何失败.

# jquery - 单击链接后如何保持树状菜单打开？我正在使用 C#！

> ID：15395292
> 
> 赞同：0
> 
> 时间：2013-03-13T20:00:48.893
> 
> 标签：jquery, toggle, jquery-click-event

我有一个树形菜单。

回发后，如何在单击链接后保持此菜单打开？

Obs：我正在使用 ASP.NET C#

你能帮忙吗？

```
jQuery(".menu li").on('click', function (e) {
    e.stopPropagation();

    if (jQuery(this).children().prop("tagName") == "A") {
        jQuery(".menu li a").parent(".item-selected").removeClass('item-selected').addClass('item');
    }

    if (jQuery(this).hasClass('item')) {
        jQuery(this).removeClass('item').addClass('item-selected');
    }

    else if (jQuery(this).hasClass('item-selected')) {
        jQuery(this).removeClass('item-selected').addClass('item');
    }

    jQuery(this).children('ul').slideToggle();
}); 
```

请检查这个小提琴：http: [//jsfiddle.net/fzy48/8/](http://jsfiddle.net/fzy48/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:10:11.317

如果该链接是指向单独页面的实际 URL 链接，那么您就不能这样做。jQuery 仅适用于您所在的页面。另一方面，如果你想管理*看起来*像那样的东西，你可以通过一些小技巧和一些服务器端的动态帮助来管理。基本上，您需要将要保留的状态（树形菜单的状态，无论详细程度如何）传递给服务器，然后将相同的信息反弹到下一页。然后该页面将其作为一组动态生成的 javascript var 调用构建到页面中。然后，您在页面加载中放置一个 jQuery 函数来查找这些变量，并适当地设置菜单。因此，当您进入下一页时，菜单会打开到您离开的位置。

# php - 每次我尝试执行 CentOS Ioncube make_license 时，它 都会被“杀死”

> ID：15395293
> 
> 赞同：0
> 
> 时间：2013-03-13T20:00:50.797
> 
> 标签：php, unix, licensing, centos, ioncube

我正在尝试使用 ioncube 为 Unix 系统提供的“make_license”生成器生成 ioncube 许可证。它适用于我的桌面 Ubuntu 系统，但不适用于我的 CentOS 网络服务器。

每次我尝试运行该文件时，我都会在终端中收到“Killed”消息，所以它看起来像这样：

```
[root@myserver test]# ./make_license --passphrase 'secret' --expire-in 20d > 'license.txt'
Killed
[root@myserver test]# 
```

在我执行文件后只是一个奇怪的消息“被杀死”，没有别的。我还尝试将“sudo”放在“./make_license --passphrase .....”前面，它起作用了，但许可证文件生成为空（0 字节）。

我已经尝试 chmod 755 和 777 来“make_license”，但它没有帮助。我也尝试停止“/etc/init.d/amavisd”，以防万一它是防病毒软件，但同样的事情。

我的服务器配置是：CentOS-6.2 64bit + Nginx, PHP-FPM, APC, php-ioncube-loader-4.2.2-2.el6.art.x86_64

我在 Ioncube 论坛上发现了同样的问题，但没有答案： http: [//forum.ioncube.com/viewtopic.php? t=3909&sid=8d595f7005f5b851479a00d387635ad7](http://forum.ioncube.com/viewtopic.php?t=3909&sid=8d595f7005f5b851479a00d387635ad7)

请分享您可能有的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:51:04.550

所以我联系了 ioncube 支持，他们是这样回答的：

> 这里有两件事要检查：-
> 
> 1.  您已将 make_license 程序以二进制模式而不是 ASCII 模式上传到您的服务器。
> 2.  您已安装 32 位兼容性库（因为 make_license 与编码器一样，是一个 32 位程序）。
> 
> 在这种情况下，加载程序无关紧要，因为它与 make_license 的问题无关。
> 
> 您*可能*需要为 CentOS 安装 32 位兼容性库，以便 make_license 工作，因为它是一个 32 位程序。
> 
> make_license 文件在任何情况下都是二进制文件，但如果您通过 FTP 以 ASCII 模式而不是二进制文件上传到服务器，则可能会损坏文件并导致“已终止”消息。所以请再次上传make_license，确保在您的FTP客户端中选择二进制模式。

所以我检查了我的 make_license 文件：

```
[root@localhost test]# file make_license

make_license: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, stripped 
```

它说该文件是“可执行的”，我认为它是=“二进制”。

但显然它不是二进制的。因为在我再次上传它之后，确保我的 FTP 客户端中的传输模式是“二进制” - 一切正常。不再生成“已终止”消息和许可证。

希望这可以帮助某人。

# jqgrid - 更改日期格式以在 jqGrid 中显示和编辑

> ID：15395295
> 
> 赞同：-1
> 
> 时间：2013-03-13T20:00:52.353
> 
> 标签：jqgrid

我定义了以下列模型-

```
{
    name: 'from',
    index: 'from',
    formatter: 'date',
    formatoptions: {srcformat:'ISO8601Long', newformat:'d-M-y H:i'},
    editable: true,
    edittype: 'text',
    editoptions: {
        maxlengh: 16,
        dataInit: function(element) {
            $(element).datetimepicker({
                dateFormat: 'yy-mm-dd',
                timeFormat: 'hh:mm',
                separator: ' ',
                timezone: '000'
            });
        }
    }
} 
```

日期在网格中显示时被正确格式化为“dMy H:i”。当我尝试编辑记录时，表单会以这种格式填充日期，但我希望它是 'Ymd H:i' 进行编辑。如果我使用 datetimepicker 进行更改，则该值将更新为所需的格式，但如果未编辑该值，则发布的值为“dMy H:i”格式。

在将日期写入表单字段之前，我将如何更改日期的格式？我可以访问 jqGrid 用于转换的格式化方法吗？我可以在填充表单字段之前使用 unformat 选项进行转换吗？我尝试了各种组合，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:59:26.520

您可以创建自定义格式函数来修改值，然后在传输该值时创建自定义取消格式选项。

```
formatter: customFormatFunctionName,

unformat: customUnformatFunctionName, 
```

功能：

```
function customFormatFunctionName(cellval, opts, rowObject, action) { ...

function customUnformatFunctionName(cellval, opts, rowObject, action) { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-28T15:43:11.480

这是对我有用的 colModel。关键是删除我通常用于常规日期选择器列的“日期：真”编辑规则和日期格式。此外，获得恰到好处的格式模型始终是 PITA。我将此设置为我的用户喜欢的内容以及我的 Oracle DB 最适合使用的内容...这是反复试验并使用此页面作为参考： http: [//php.net/manual/en/datetime.formats.date。 php](http://php.net/manual/en/datetime.formats.date.php)

```
{
name:"WMBEMSG_BEGIN_DATE", 
align:"center", 
index:"WMBEMSG_BEGIN_DATE", 
datefmt: 'mm/dd/Y HH:MM', 
editable: true, 
edittype: "text", 
editoptions: { dataInit: function(el) { $(el).datetimepicker({
    controlType: 'select',
    dateFormat: "m/d/yy",
                        timeFormat: "HH:mm"
  } ) }
   }, 
label:"Begin Date", 
width:50, 
sortable: true
} 
```

此外，请确保您的时间选择器 javascript 包含在您的 jquery 和 jquery UI 加载之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:39:33.180

我认为你应该只使用`dateFormat: 'dd-M-yy'`而不是`dateFormat: 'yy-mm-dd'`和`timeFormat: 'HH:mm'`而不是`timeFormat: 'hh:mm'`。它对应于`newformat:'d-M-y H:i'`您使用的格式。

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/DateTimepicker.htm)：

![在此处输入图像描述](../Images/3110bdac2e01bd7d8f86135e69507f8d.png)

# php - Yii Activerecord 不加入嵌套关系

> ID：15395298
> 
> 赞同：2
> 
> 时间：2013-03-13T20:00:57.427
> 
> 标签：php, yii

我在 Yii 中定义了以下标准，并尝试使用它来获取一组客户。

```
$criteria = new CDbCriteria(array(
        "condition"=>"hidden = 0".(Yii::app()->user->GetState('is_admin') ? "" : " AND franchisesMunicipalities.franchise_id=".Yii::app()->user->getState('fid')),
        "with" => array('municipality','municipality.franchisesMunicipalities')
));
$customers = Customers::model()->findAll($criteria); 
```

这（我认为）应该导致 Yii 将表 Customer 与表 Municipalities 连接起来，然后在同一个查询中将表 Municipalities 与表 Franchises_Municipalities 连接起来。但是它不起作用，因为它不加入特许经营市。

结果查询是这样的

```
SELECT `t`.`id`                   AS `t0_c0`, 
   `t`.`municipality_id`      AS `t0_c1`, 
   `t`.`personal_code_number` AS `t0_c2`, 
   `t`.`name`                 AS `t0_c3`, 
   `t`.`adress`               AS `t0_c4`, 
   `t`.`zip`                  AS `t0_c5`, 
   `t`.`phone`                AS `t0_c6`, 
   `t`.`mobile`               AS `t0_c7`, 
   `t`.`email`                AS `t0_c8`, 
   `t`.`hidden`               AS `t0_c9`, 
   `municipality`.`id`        AS `t1_c0`, 
   `municipality`.`county_id` AS `t1_c1`, 
   `municipality`.`name`      AS `t1_c2` 
FROM   `customers` `t` 
   LEFT OUTER JOIN `municipalities` `municipality` 
                ON ( `t`.`municipality_id` = `municipality`.`id` ) 
WHERE  ( hidden = 0 
     AND municipality.franchisesmunicipalities.franchise_id = 7 ) 
LIMIT  30 
```

如您所见，它仅加入一个关系。应该正确定义模型中的关系，因为我可以在其他上下文中使用它们。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:43:49.947

According to [http://www.yiiframework.com/doc/api/1.1/CActiveRecord#with-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#with-detail) I believe you should be doing it this way:

```
$criteria = new CDbCriteria(array(
        "condition"=>"hidden = 0".(Yii::app()->user->GetState('is_admin') ? "" : " AND franchisesMunicipalities.franchise_id=".Yii::app()->user->getState('fid'))
));
$customers = Customers::model()->with('municipality','municipality.franchisesMunicipalities')->findAll($criteria); 
```

Hopefully that works for you.

# php - PHP 电子邮件发送表单 - $_POST 发送表单上的下拉列表

> ID：15395304
> 
> 赞同：0
> 
> 时间：2013-03-13T20:01:12.370
> 
> 标签：php, drop-down-menu

这是我的html和php代码：

```
<!-- Form Code Start -->
<form id='contactus' action='<?php echo $formproc->GetSelfScript(); ?>' method='post' enctype="multipart/form-data" accept-charset='UTF-8'>
    <fieldset >
        <input type='hidden' name='submitted' id='submitted' value='1'/>
        <input type='hidden' name='<?php echo $formproc->GetFormIDInputName(); ?>' value='<?php echo $formproc->GetFormIDInputValue(); ?>'/>
        <input type='text'  class='spmhidip' name='<?php echo $formproc->GetSpamTrapInputName(); ?>' />
        <div><span class='error'><?php echo $formproc->GetErrorMessage(); ?></span></div>
        <div class='container'>
            Years Active (from and to):<br/>
            <select name='years_active_from'>
                <option value='<?php echo $formproc->SafeDisplay('NULL') ?>'>select</option>
                <option value='<?php echo $formproc->SafeDisplay('from 2013') ?>'>2013</option>
                <option value='<?php echo $formproc->SafeDisplay('from 2012') ?>'>2012</option>
            </select>
            <br/>
            <span id='contactus_name_errorloc' class='error'></span>
        </div>
        <div class='container'>
            <input type='submit' name='Submit' value='Submit' />
        </div>
    </fieldset>
</form> 
```

我正在尝试获取不同的下拉选项来更改 `var $years_active_from;` 每个不同的年份，2012 年、2013 年，`NULL`如果不使用下拉菜单，则发布。

`value='<?php echo $formproc->SafeDisplay('NULL') ?>'`没有改变`$years_active_from`，正确的编码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:06:49.593

老实说，我不是 100% 确定我理解您在寻找什么，但我猜您希望在页面加载时预先选择第一个下拉选项。为此，您需要将`selected`属性添加到要显示为选中的选项中：

```
<option selected value='<?php echo $formproc->SafeDisplay('NULL') ?>'>select</option> 
```

# ruby-on-rails - Rails 3.1 Ajax: Why doesn't my link_to's with :remote => true generate a JS request?

> ID：15395312
> 
> 赞同：0
> 
> 时间：2013-03-13T20:01:49.453
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.1

I'm implementing Ajax into my existing Rails 3.1 app. I'm comparing with [Samnang Chhun's excellent tutorial](http://wowkhmer.com/2011/09/19/unobtrusive-ajax-with-rails-31/) - his works, mine doesn't.

This is my link_to:

```
<%= link_to('Do some Ajax!', @activity, :remote => true) %> 
```

This my controller:

```
class ActivitiesController < ApplicationController

  respond_to :html, :js

  # ...

  def show
    @activity = Activity.find(params[:id])
    respond_with @activity
  end

  # ...

end 
```

My `views/activities` folder contains both a `show.html.erb` and a `show.js.erb`.

**UPDATE:** This is my included JavaScript files:

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/activities.js?body=1" type="text/javascript"></script>
<script src="/assets/add2home.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.dropdownPlain.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

When I click it, the page refreshes, a straight HTML request, which is also verified by the server output (see line 2):

```
Started GET "/activities/18-leka-titta-pa-mig" for 127.0.0.1 at 2013-03-13 20:58:43 +0100
  Processing by ActivitiesController#show as HTML
  Parameters: {"id"=>"18-leka-titta-pa-mig"}
  Activity Load (0.4ms)  SELECT "activities".* FROM "activities" WHERE "activities"."id" = $1 LIMIT 1  [["id", "18-leka-titta-pa-mig"]]
WEBSITE: Babycenter.com
  Tag Load (0.8ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 18 AND "taggings"."taggable_type" = 'Activity'
Rendered layouts/_footer.html.erb (0.6ms)
Rendered activities/show.html.erb within layouts/application (63.4ms)
Rendered layouts/_facebook_sdk.html.erb (0.1ms)
Rendered activities/_filter_tabs.html.erb (3.1ms)
Completed 200 OK in 107ms (Views: 79.8ms | ActiveRecord: 21.6ms) 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:20:45.180

You're looking for the jquery UJS hooks - [https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:48:49.710

I found the problem by coincidence. I turned out I used an old JavaScript snippet to disable iOS Safari to open links in new windows. This script wasn't compatible with the Rails 3 way of doing Ajax.

By replacing the script with the latest from [iPhone Safari Web App opens links in new window](https://stackoverflow.com/questions/2898740/iphone-safari-web-app-opens-links-in-new-window) I got it to work.

# javascript - 从画布精灵获取图像像素数据

> ID：15395314
> 
> 赞同：1
> 
> 时间：2013-03-13T20:01:51.187
> 
> 标签：javascript, canvas, sprite

我正在尝试在我的画布游戏中实现像素完美碰撞检测，但是我似乎无法从我的精灵中获取像素信息。

我需要精灵的每个像素的 x 和 y 值，从我读过的内容来看，我使用该`getImageData()`方法来做到这一点。

但是，这不起作用：

```
this.sprite = new Image();
this.sprite.src = 'img/player.png';
console.log(this.sprite.getImageData()); 
```

我可能使用了错误类型的精灵吗？因为我在控制台中收到此错误：

> 未捕获的类型错误：对象 # 没有方法 'getImageData'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T21:37:46.033

**以下是如何使用精灵的像素数据进行像素完美的命中测试**

首先，在可见的画布上正常绘制精灵。

![在此处输入图像描述](../Images/f280e9c3bb5fe4a33a75252c31d05a2c.png)

在隐藏的画布上创建精灵的**红色蒙版副本**。此副本与精灵的大小完全相同，但**仅**包含透明或红色像素。

![在此处输入图像描述](../Images/7e5b3043a9a61c2b1d0b0b68bedcaf1c.png)

跟踪可见精灵的边界框。单击边界框时，计算鼠标点击**相对于精灵边界框**的 X/Y （与画布无关）。

然后，参考红色蒙版精灵，查看 X/Y 处对应的像素是红色还是透明。如果像素是红色的，那么您就有了一个像素完美的命中。如果像素是透明的，则没有命中。

在此图中，假设蓝点是 X/Y 点击位置。由于红色蒙版画布中对应的 X/Y 像素是“红色”，因此这是一个 HIT。

![在此处输入图像描述](../Images/14e573fdf90878955825598a15f0333d.png)

这是创建红色蒙面精灵的代码。我没有在这里展示命中测试的代码，但如果你尝试编写命中测试但无法编写命中测试代码，我也会花时间编写命中测试代码。

重要提示：要运行此代码，您必须避免跨域安全限制。确保您的图像源在您的本地域上，否则您将遇到**跨域安全违规**并且不会绘制掩蔽图像......所以您不能为您的精灵源执行此操作：http: [//otherDomain.com/图片.jpg](http://otherDomain.com/picture.jpg)！

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:10px; }
    canvas{border:1px solid blue;}
</style>

<script>
    $(function(){

        var c=document.getElementById("canvas");
        var ctx=c.getContext("2d");

        var img=new Image();
        img.onload=function(){
          ctx.drawImage(this,100,25);

          // make a red-masked copy of just the sprite
          // on a separate canvas
          var canvasCopy=document.getElementById("canvasCopy");
          var ctxCopy=canvasCopy.getContext("2d");
          canvasCopy.width=this.width;
          canvasCopy.height=this.height;
          ctxCopy.drawImage(img,0,0);

          // make a red-masked copy of the sprite on a separate canvas
          var imgData=ctxCopy.getImageData(0,0,c.width,c.height);
          for (var i=0;i<imgData.data.length;i+=4)
            {
                if(imgData.data[i+3]>0){
                    imgData.data[i]=255;
                    imgData.data[i+1]=0;
                    imgData.data[i+2]=0;
                    imgData.data[i+3]=255;
                }
            }
          ctxCopy.putImageData(imgData,0,0);         

        }
        img.src = "houseIcon.png";

    }); // end $(function(){});
</script>

</head>

<body>
    <p>Original sprite drawn on canvas at XY:100/25</p>
    <canvas id="canvas" width="400" height="300"></canvas>
    <p>Red-masked on canvas used for hit-testing</p>
    <canvas id="canvasCopy" width="300" height="300"></canvas>

</body>
</html> 
```

**要在 2 个精灵之间进行像素完美的碰撞测试，您可以：**

为 sprite#1 和 sprite#2 创建一个红色蒙版画布。

首先测试 2 个精灵的边界框是否发生碰撞。如果边界框没有碰撞，则 2 个精灵没有碰撞，因此您可以在此处停止命中测试。

如果 2 个精灵*可能*使用边界框测试发生碰撞，请为碰撞测试创建第三个画布。

您将使用画布的合成方法通过将 sprite#1 和 sprite#2 都绘制到第三个画布上来测试 sprite#1 和 sprite#2 之间的碰撞。使用合成，只有 2 个精灵的**碰撞**像素将被绘制在第三个画布上。

以下是使用“destination-in”合成的工作原理：现有画布内容保留在新形状 (sprite#2) 和现有形状 (sprite#1) 内容重叠的位置。其他一切都变得透明。

所以……</p>

将sprite#1**的变换状态**绘制到第三个画布中（变换可以是移动、旋转、缩放、倾斜——任何东西！）。

将 globalCompositeOperation 设置为destination-in。

```
context.globalCompositeOperation = 'destination-over'; 
```

将sprite#2**的变换状态**绘制到第三个画布中。

在此绘制之后，第三个画布**仅包含 sprite#1 和 sprite#2 的碰撞部分**

测试第三个画布中的每个像素的不透明像素。如果您发现任何不透明的像素，则 2 个精灵正在碰撞。

根据您在碰撞时要采取的操作，您可能会在找到第一个碰撞像素时退出。

# c++ - 正数和负数的按位和（&）的含义？

> ID：15395317
> 
> 赞同：13
> 
> 时间：2013-03-13T20:02:03.503
> 
> 标签：c++, bitwise-and

谁能帮忙是什么`n&-n`意思？？以及它的意义是什么。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T20:13:39.677

这是一个古老的技巧，它给出了一个包含单个位的数字，即设置在`n`. 至少在二进制补码算术中，这在当今几乎是普遍的。

它起作用的原因：数字的负数是通过将数字反转，然后加 1 产生的（这是二进制补码的定义）。当你加 1 时，从底部开始设置的每一位都会溢出到下一个更高的位；一旦达到零位，这就会停止。那些溢出的位都将为零，而受影响的最后一位之上的位将相互取反，因此唯一剩下的位是停止级联的位 - 开始为 1 并反转为 0 的位。

PS如果您担心遇到补码算法，这里有一个适用于两者的版本：

```
n & (~n + 1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T20:07:46.867

在大多数人真正关心的几乎每个系统上，它都会为您提供 2 的最大幂，而 n 可以被 n 整除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T20:10:27.993

我相信判断 n 是否是 2 的幂是一个技巧。 (n == (n & -n)) IFF n 是 2 (1,2,4,8) 的幂。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-16T11:28:50.920

`N&(-N)`将以二进制形式为您提供***第***一位的位置。例如：`'1'``N`

```
N = 144 (0b10010000) => N&(-N) = 0b10000
N = 7 (0b00000111) => N&(-N) = 0b1 
```

此技巧的一个应用是将整数转换为 2 的幂的总和。例如：

```
To convert 22 = 16 + 4 + 2 = 2^4 + 2^2 + 2^1
22&(-22) = 2, 22 - 2 = 20
20&(-20) = 4, 20 - 4 = 16
16&(-16) = 16, 16 - 16 = 0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T20:11:03.400

这只是数字的按位和。负数表示为[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)。

例如，按位和 7&(-7) 是 x00000111 & x11111001 = x00000001 = 1

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T13:37:03.000

[我会在Mark Randsom](https://stackoverflow.com/users/5987/mark-ransom)的精彩论述中添加一个不言自明的例子。

```
010010000 | +144 ~
----------|-------
101101111 | -145 +
        1 |
----------|-------
101110000 | -144 

101110000 | -144 & 
010010000 | +144
----------|-------
000010000 |   16` 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-01-31T06:20:39.303

因为`x & -x = {0, 1, 2, 1, 4, 1, 2, 1, 8, 1, 2, 1, 4, 1, 2, 1, 16, 1, 2, 1, 4, 1, 2, 1, 8, 1, 2, 1, 4, 1, 2, 1, 32}`for`x`从 0 到 32。它用于在某些应用程序的 for 序列中跳跃。应用程序可以存储累积的记录。

```
for(;x < N;x += x&-x) {
    // do something here
    ++tr[x];
} 
```

循环遍历非常快，因为它寻找下一个二的幂来跳转。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-12-27T09:01:59.257

正如@aestrivex 所提到的，这是一种写作方式 1.即使我遇到了这个

```
for (int y = x; y > 0; y -= y & -y) 
```

它只是意味着 y=y-1 因为
7&(-7) 是 x00000111 & x11111001 = x00000001 = 1

# .net - IIS 7.5 Restful 服务返回错误 411 - .net 客户端需要长度但不是提琴手

> ID：15395323
> 
> 赞同：0
> 
> 时间：2013-03-13T20:02:18.250
> 
> 标签：.net, wcf, rest, iis-7.5

我正在使用 Microsoft 堆栈：Windows Server 2008 R2 / IIS 7.5；.NET 4.0

在本地主机上设置服务，客户端调用操作顺利。设置服务（最初作为 Post，然后作为 Get）我从 .NET 收到以下错误（方法如下）。如果我直接通过提琴手拨打电话，一切正常，（RAW）标头如下：

HTTP/1.1 200 OK 缓存控制：私有内容长度：19854411 内容类型：应用程序/xml；charset=utf-8 服务器：Microsoft-IIS/7.5 X-AspNet-Version：4.0.30319 X-Powered-By：ASP.NET

如果我通过控制台应用程序或 Windows 服务进行调用，我会收到以下错误“远程服务器返回错误：<411> 需要长度。”

我有一个 Web 服务，它应该在完成一些工作后返回一个 zip 文件

```
 [OperationContract]
    [WebInvoke(UriTemplate = "/GetFiles/{profileLocationId}/{batchSize}", Method = "GET", RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    public byte[] ProfileImagesByProfileId(string profileLocationId, string batchSize)
    {
        //  var watch = new Stopwatch();
        //  watch.Start();
        try
        {
            long id = 0;
            long.TryParse(profileLocationId, out id);

            int size = 200;
            int.TryParse(batchSize, out size);

            var profileRoot = ConfigurationManager.AppSettings["ProfileImageRootDirectory"];
            var fileType = ConfigurationManager.AppSettings["ProfileImageDefaultFileType"];

            var packer = new ImagePackager(profileRoot, fileType);
            if (profileLocationId != null)
            {
                var stream = packer.CompressImages(id, size);

                return stream;
            }
        }
        catch (Exception ex)
        {
            return new byte[0];

        }

        return new byte[0];
    }
} 
```

============================

# 客户端方法

```
 static void TimerElapsed(object sender, ElapsedEventArgs e)
    {
        var id = GetLastProfileId();

       // var uri = string.Format("http://{0}/TwitterService/ProfileImages/{1}/{2}", _ipAddress, id, _batchsize);
        var uri = string.Format("http://{0}/Twitter_api/TwitterService/ProfileImages/{1}/{2}", _ipAddress, id, _batchsize);
        GetProfileImagesFromService(uri);
    }

    private static void GetProfileImagesFromService(string uri)
    {
        try
        {
            Console.WriteLine("Process started: {0}", DateTime.Now.ToLongTimeString());
            var request = WebRequest.Create(uri);
            request.Method = "GET";
            request.Timeout = 600000;
            using (var response = (HttpWebResponse)request.GetResponse())
            {
                Console.WriteLine(response.StatusDescription);
                var dataStream = response.GetResponseStream();
                var reader = new StreamReader(dataStream, Encoding.UTF8);
                //  var responseFromServer = reader.ReadToEnd();

                var fileName = string.Format(@"{0}\{1:yyMMddhhmmss}.zip", _targetDirectory, DateTime.UtcNow);
                // File.WriteAllText(fileName, responseFromServer);
                // var xml = XDocument.Parse(responseFromServer);
                var xml = XDocument.Load(reader);
                var base64 = xml.Root.Value.ToCharArray();

                var byteArray = Convert.FromBase64CharArray(base64, 0, base64.Length);

                File.WriteAllBytes(fileName, byteArray);
                Console.WriteLine("GetProfile cycle ended: {0}", DateTime.Now.ToLongTimeString());
            }
        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.Message);
        }
    } 
```

* * *

任何指导将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:05:28.127

HTTP 错误代码 411 表示

> 服务器拒绝接受没有定义 Content-Length 的请求。如果客户端在请求消息中添加了包含消息体长度的有效 Content-Length 头字段，则客户端可以重复请求。

因此，如果您在没有任何正文的情况下调用 HTTP POST 方法，那么只需`Content-Length:0`在标头中添加您的请求对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-03T19:43:21.670

我有一个客户收到 411 错误，结果他们安装了 BitDefender 防病毒软件，以某种方式导致了问题。禁用 BitDefender 解决了这个问题。服务器是 Windows Server（2012 或 2016？）和客户端 AngularJS 上的 IIS/ASP.NET。Chrome 开发工具显示 POST 的 Content-Length: 0 但服务器以 411 错误响应，尽管许多其他客户使用它没有问题，但我们以前从未见过。

因此，如果您偶尔遇到此错误，我建议您寻找可能会中断客户端-服务器通信的防病毒、广告拦截器等。

# objective-c - 从 NSMutableArray 中获取最后 x 个对象

> ID：15395326
> 
> 赞同：9
> 
> 时间：2013-03-13T20:02:33.963
> 
> 标签：objective-c, cocoa, nsarray

我正在尝试获取数组中最后 x 个对象并将其存储在另一个数组中。

像这样工作：

```
 NSMutableArray *LastLines = [[LogLines subarrayWithRange:NSMakeRange(0, [LogLines count])] mutableCopy]; 
```

但是，这不会：

```
NSMutableArray *LastLines = [[LogLines subarrayWithRange:NSMakeRange(([LogLines count]-4), [LogLines count])] mutableCopy]; 
```

并且日志中显示以下错误：

2013-03-13 15:00:43.475 [38565:303] *** -[NSArray subarrayWithRange:]: 范围 {83255, 83259} 超出范围 [0 .. 83258]

但是范围似乎应该在范围内，所以我不确定它为什么会给出这个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-28T17:12:11.647

您可以使用`NSArray -subarrayWithRange:`其他答案建议的方法，**但**请注意如果范围超出数组计数（例如，在数组仅包含 4 个元素时获取最后 10 行），它将引发异常！

为避免这种情况，只需`if`先使用 an 检查数组计数...

```
NSArray *logs = <some long array>
int lastLogsCount = 100;
if (logs.count > lastLogsCount) { // check count first to avoid exception
    logs = [logs subarrayWithRange:NSMakeRange(logs.count - lastLogsCount, lastLogsCount)];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:11:58.403

第一个也不应该工作。数组是从零开始的，因此调用数组的`count`方法总是会返回比使用的最后一个索引多一个。如果您将代码更改为

```
NSMutableArray *LastLines = [[LogLines subarrayWithRange:NSMakeRange(([LogLines count]-4), 4)] mutableCopy]; 
```

它应该工作。不过，我不确定为什么第一行确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:14:33.857

例如，如果您的数组有 10 个项目，则将`count`您带到位置 10。因为这样的数组从位置 0 开始并延伸到位置 9，所以位置 10 将超出边界 1。

从 count 中取一个得到最后一个位置：

```
NSMutableArray *LastLines = [[LogLines subarrayWithRange:NSMakeRange(([LogLines count]-4), [LogLines count]-1)] mutableCopy]; 
```

# c++ - 为什么 10 & (!5) 返回零？

> ID：15395328
> 
> 赞同：0
> 
> 时间：2013-03-13T20:02:40.187
> 
> 标签：c++, math, binary

我一直在尝试使用 c++ 跟踪代码，但我无法弄清楚为什么返回零。

`10 & (!5)`
我们知道二进制中的 10 是 1010，5 是 0101，not(5) 是 1010。让我们开始吧：

```
1010  //Which represent 10
1010  //Which represent not(5)
------AND
1010 
```

这实际上应该返回 10 而不是零。我错了吗 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T20:04:08.373

因为`!`是布尔否定，而不是按位否定，所以你有效地说`10 & 0`.

你最好试试`10 & ~5`

# c++ - 指针和结构

> ID：15395334
> 
> 赞同：1
> 
> 时间：2013-03-13T20:03:07.367
> 
> 标签：c++

我试图围绕指针、引用和地址进行思考，但每次我认为我得到它时都会出现一些意想不到的东西。

在这个例子中，为什么我们不需要取消引用结构来设置一个值？

```
// pointer_tet.cpp
 #include <iostream>
struct example
{
    char name[20];
    int number;
};
int main()
{
   using namespace std;
   example anExample = {"Test", 5};
   example * pt = &anExample;
   pt->number = 6;
   cout << pt->number << endl;

   int anotherExample = 5;
   int * pd = &anotherExample;
   *pd = 6;
   cout << *pd << endl;

   return 0;
} 
```

谢谢！

编辑：谢谢您的回答！让我感到困惑的是无法设置 *pt.number = 6。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T20:05:14.553

您*正在*取消引用`pt`. 你正在做：

```
pt->number = 6; 
```

这相当于：

```
(*pt).number = 6; 
```

`->`运算符提供了一种通过指针访问成员的便捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:10:55.843

你可以做

```
anExample.number = 6; 
```

或者

```
(*pt).number = 6; 
```

阅读 cplusplus.com 指针教程可能会有所帮助。

# perl - 在 Jenkins 中测试 Perl 应用程序的覆盖率

> ID：15395335
> 
> 赞同：0
> 
> 时间：2013-03-13T20:03:09.667
> 
> 标签：perl, unit-testing, jenkins, code-coverage, clover

我刚刚在[Perl，代码覆盖示例中描述了一个出色的 Perl 测试覆盖示例](https://stackoverflow.com/questions/533553/perl-build-unit-testing-code-coverage-a-complete-working-example)

但是这需要 Module::Build ，现在如果我有没有 Module::Build 工具的现有 Perl 应用程序怎么办，有没有办法获得单元或功能测试的测试覆盖率？

我在看 ：

```
Clean up from previous test run (optional)
  cover -delete

  #Test run with coverage instrumentation
  PERL5OPT=-MDevel::Cover prove -r t

  #Collect covered and caller information
  #  Run this _before_ running "cover"
  #  Don't run with Devel::Cover enabled
  covered runs
    - or e.g. -
  covered runs --rex_skip_test_file='/your-prove-file.pl$/' \
          --rex_skip_source_file='{app_cpan_deps/}'

  #Post process to generate covered database
  cover -report Html_basic

  %perl -d:Coverage -Iblib/lib test.pl 
```

但这似乎表明运行应用程序时的代码覆盖率。

我希望能够获得与 Clover 或 Cobertura 兼容的输出，因此我可以将它与 Jenkins 中的电子邮件分机集成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T02:10:45.063

[Task::Jenkins](https://metacpan.org/module/Task::Jenkins)可能会有所帮助。它包含有关如何通过 Jenkins 发布 Devel::Cover HTML 报告的说明，以及有关使其他 Perl 工具适应 Jenkins 的信息。

Jira 有一些关于[将 Devel::Cover 集成到 Jenkins](https://logiclab.jira.com/wiki/display/OPEN/Devel-Cover)中的说明。

要获得任何 Perl 进程（测试、应用程序、服务器等）的代码覆盖率，您需要设置`PERL5OPT`环境变量`-MDevel::Cover`，就像放入`use Devel::Cover`程序一样。如果您执行测试的命令是，`perl something_test`那么您将运行`PERL5OPT=-MDevel::Cover perl something_test`.

如果您正在使用`prove`，请使用`HARNESS_PERL_SWITCHES=-MDevel::Cover prove <normal prove arguments>`。这告诉在运行测试时`prove`加载`Devel::Cover`，但避免收集覆盖以证明自己。

# vba - 奇怪的 VBA 预期语句结束错误

> ID：15395338
> 
> 赞同：5
> 
> 时间：2013-03-13T20:03:17.597
> 
> 标签：vba, ms-access

我开始使用 VBA 编辑器在 Access 2010 中创建自定义函数，但我不断收到预期的语句结束错误。

这是代码：

```
Public Function getPayTotal(ByVal StudentID As Long) As Long

Return StudentID

End Function 
```

我完全不知道为什么这不起作用。调试不断将我送回 Return StudentID 行。我是不是在看一些非常简单的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T20:04:57.193

不返回：

```
Public Function getPayTotal(ByVal StudentID As Long) As Long

   getPayTotal = StudentID

End Function 
```

您可以像这样调用该函数：

```
Sub theFunction
   getPayTotal 21

   ''Or
   Call getPayTotal(21)

   ''Or
   r = getPayTotal(21)
End Sub 
```

换句话说，要小心括号。

# magento - 删除 Magento 中的默认语言

> ID：15395343
> 
> 赞同：0
> 
> 时间：2013-03-13T20:03:34.543
> 
> 标签：magento

我在以下绑定中：

一位客户需要 3 种语言——英语、俄语和拉脱维亚语。自然地，我创建了 3 个商店视图并为每个视图更改了语言。一旦我通过内联翻译工具翻译了所有内容，并且客户添加了带有所有语言描述的产品，客户改变了主意，现在希望删除英语。

现在这是一个问题，因为它是默认的 Store 视图，因此不能被删除。我曾想过只是更改语言的标题和语言环境，但这仍然会使产品描述出错。

有没有办法通过数据库或其他方式做到这一点？

**TL; DR：如何删除 Magento 中的默认商店视图？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:17:29.260

尝试为您的默认“商店”更改“默认商店视图”。转到“系统/管理商店”，选择您的商店并将“默认商店视图”更改为俄语或拉脱维亚语。然后你就可以删除英文storeview了。

# javascript - 如何在javascript中制作自动幻灯片

> ID：15395344
> 
> 赞同：-1
> 
> 时间：2013-03-13T20:03:40.843
> 
> 标签：javascript, jquery, html, css

我试图用这些图像制作一个自动幻灯片，每当我尝试这个时，它都会卡在第一张图像上。[http://jsfiddle.net/He9AV/5/](http://jsfiddle.net/He9AV/5/)

HTML：

```
<div id="slideshow">
    <a href="../images/food/e_chicken_quesa.jpg" target="_blank"><img class="show" src="../images/food/chicken_quesa.jpg" alt="Chicken Quesadilla" title="Chicken Quesadilla"></a>
    <a href="../images/food/e_steak.jpg" target="_blank"><img src="../images/food/steak.jpg" alt="Beef Tenderloin" title="Beef Tenderloin"></a>
    <a href="../images/food/e_pasta_display.jpg" target="_blank"><img src="../images/food/pasta_display.jpg" alt="Pasta Station" title="Pasta Station"></a>
    <a href="../images/food/e_salmon.jpg" target="_blank"><img src="../images/food/salmon.jpg" alt="Salmon Filet" title="Salmon Filet"></a>
    <a href="../images/food/e_panacotta.jpg" target="_blank"><img src="../images/food/panacotta.jpg" alt="Panacotta" title="Panacotta"></a>
    <a href="../images/food/e_beet_salad.jpg" target="_blank"><img src="../images/food/beet_salad.jpg" alt="Beet Salad" title="Beet Salad"></a>
    <a href="../images/food/e_tuna.jpg" target="_blank"><img src="../images/food/tuna.jpg" alt="Seared Tuna" title="Seared Tuna"></a>
    <a href="../images/food/e_foi_gras.jpg" target="_blank"><img src="../images/food/foi_gras.jpg" alt="Foi Gras" title="Foi Gras"></a>
</div> 
```

我不确定错误发生在哪里，但这里是
Javascript：

```
<script type="text/javascript">     
        var hovering = false;
        var slideshow = $("#slideshow");

        slideshow.mouseenter(function() {
            hovering = true;
        }).mouseleave(function() {
            hovering = false;
            slideShow();
        });
        function slideShow() {
            if (!hovering) {
                var currentImg = (slideshow.children("img:visible").length) ? slideshow.children("img:visible") : slideshow.children("img:first");
                var nextImg = (currentImg.next().length) ? currentImg.next() : slideshow.children("img:first");

                currentImg.delay(1000).fadeOut(500, function() {
                    nextImg.fadeIn(500, function() {
                        setTimeout(slideShow, 1000);
                    });
                });
            }
        }
        $(document).ready(function() {
            slideShow();
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:29:19.543

您可以在网站[http://css-tricks.com/snippets/jquery/simple-auto-playing-slideshow/中尝试演示](http://css-tricks.com/snippets/jquery/simple-auto-playing-slideshow/)

# jquery - 谷歌浏览器在过渡（Jquery）时无法正确呈现 css 属性（border-radius）。

> ID：15395345
> 
> 赞同：2
> 
> 时间：2013-03-13T20:03:42.743
> 
> 标签：jquery, google-chrome, css

我不确定我是否可以在不混淆你们的情况下解释这一点。所以，请检查动画 Gif。

适用于 Firefox 和 IE。我正在使用 TMSlider 0.4.1 进行转换。

![一只忙碌的猫](../Images/600a3442df3ec074f936822eac6ca9ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:20:41.543

在您设置了边界半径的 div 上，您的 css 是否也设置为

```
.div{overflow:hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T15:16:08.990

对于容器中的“溢出：隐藏”，我显然遇到了同样的问题。

只有当里面的元素有动画（css3）时才会出现问题，没有delay。

解决方案是这个：[https ://stackoverflow.com/a/27233053/1585052](https://stackoverflow.com/a/27233053/1585052)

# javascript - Does a browser truly read JavaScript line by line OR does it make multiple passes?

> ID：15395347
> 
> 赞同：25
> 
> 时间：2013-03-13T20:03:50.407
> 
> 标签：javascript, browser, interpreter

I understand that JavaScript is interpreted and not compiled. No problem there. However, I keep reading here that JavaScript is executed "on the fly" and that lines are read one at a time. This idea is confusing me quite a bit when it comes to the following example:

```
writeToConsole();

function writeToConsole() {
    console.log("This line was reached.");
} 
```

For the record, this bit of code will write to the console just fine. Still, how would the browser know of the existence of `exampleFunction()` if it had not yet reached the function?

In other words, *when* exactly is this function first interpreted?

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-13T21:16:08.993

First, you make an incorrect assumption: modern JavaScript is compiled. Engines like [V8](http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29), [SpiderMonkey](http://en.wikipedia.org/wiki/SpiderMonkey_%28JavaScript_engine%29), and Nitro compile JS source into the native [machine code](http://en.wikipedia.org/wiki/Machine_code) of the host platform.

Even in older engines, JavaScript isn't *interpreted*. They transform source code into [bytecode](http://en.wikipedia.org/wiki/Bytecode), which the engine's [virtual machine](http://en.wikipedia.org/wiki/Virtual_machine) executes.

This is actually how things in Java and .NET languages work: When you "compile" your application, you're actually transforming source code into the platform's bytecode, [Java bytecode](http://en.wikipedia.org/wiki/Java_bytecode) and [CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language) respectively. Then at runtime, a [JIT compiler](http://en.wikipedia.org/wiki/Just-in-time_compilation) compiles the bytecode into machine code.

Only very old and simplistic JS engines actually [*interpret*](http://en.wikipedia.org/wiki/Interpreter_%28computing%29) the JavaScript source code, because interpretation is very slow.

So how does JS compilation work? In the first phase, the source text is transformed into an [abstract syntax tree (AST)](http://en.wikipedia.org/wiki/Abstract_syntax_tree), a data structure that represents your code in a format that machines can deal with. Conceptually, this is much like how HTML text is transformed into its [DOM](http://en.wikipedia.org/wiki/Document_Object_Model) representation, which is what your code actually works with.

In order to generate an AST, the engine must deal with an input of raw bytes. This is typically done by a [lexical analyzer](http://en.wikipedia.org/wiki/Lexical_analysis). The lexer does not really read the file "line-by-line"; rather it reads byte-by-byte, using the rules of the language's syntax to convert the source text into *tokens*. The lexer then passes the stream of tokens to a [parser](http://en.wikipedia.org/wiki/Parsing#Programming_languages), which is what actually builds the AST. The parser verifies that the tokens form a valid sequence.

You should now be able to see plainly why a syntax error prevents your code from working at all. If unexpected characters appear in your source text, the engine cannot generate a complete AST, and it cannot move on to the next phase.

Once an engine has an AST:

*   An interpreter might simply begin executing the instructions directly from the AST. This is very slow.
*   A JS VM implementation uses the AST to generate bytecode, then begins executing the bytecode.
*   A compiler uses the AST to [generate machine code](https://developers.google.com/v8/design#mach_code), which the CPU executes.

So you should now be able to see that *at minimum*, JS execution happens in two phases.

However, the phases of execution really have no impact on why your example works. It works because of the [rules](http://es5.github.com/) that define how JavaScript programs are to be evaluated and executed. The rules could just as easily be written in a way such that your example would not work, with no impact on how the engine itself actually interprets/compiles source code.

Specifically, JavaScript has [a feature](http://es5.github.com/#x10.5) commonly known as *hoisting*. In order to understand hoisting, you must understand the difference between a *function declaration* and a *function expression*.

Simply, a function declaration is when you declare a new function that will be called elsewhere:

```
function foo() {

} 
```

A function expression is when you use the `function` keyword in any place that expects an *expression*, such as variable assignment or in an argument:

```
var foo = function() { };

$.get('/something', function() { /* callback */ }); 
```

JavaScript mandates that function *declarations* (the first type) be assigned to variable names *at the beginning of an execution context*, **regardless** of where the declaration appears in source text (of the context). An *execution context* is roughly equatable to *scope* – in plain terms, the code inside a function, or the very top of your script if not inside a function.

This can lead to very curious behavior:

```
var foo = function() { console.log('bar'); };

function foo() { console.log('baz'); }

foo(); 
```

What would you expect to be logged to the console? If you simply read the code linearly, you might think `baz`. However, it will actually log `bar`, because the declaration of `foo` is hoisted above the expression that assigns to `foo`.

So to conclude:

*   JS source code is never "read" line-by-line.
*   JS source code is actually compiled (in the true sense of the word) in modern browsers.
*   Engines compile code in multiple passes.
*   The behavior is your example is a byproduct of the rules of the JavaScript language, not how it is compiled or interpreted.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T20:05:55.873

All functions will be examined first by the browser before any code is executed.

However,

```
var foo = function(){}; 
```

This will *not* be examined, and thus the following will throw a `TypeError: undefined is not a function`

```
foo();
var foo = function(){}; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-13T20:09:33.383

It does take 2 passes. The first pass parses the syntax tree, a part of which is performing *hoisting*. That hoisting is what makes your posted code work. Hoisting moves any `var` or named function declarations `function fn(){}` (but not function expressions `fn = function(){}`) to the top of the function they appear in.

The second pass executes the parsed, hoisted, and in some engines compiled, source code tree.

Check out this example. It shows how a syntax error can prevent all execution of your script by throwing a wrench in the first pass, which prevents the second pass (actual code execution) from ever happening.

```
var validCode = function() {
  alert('valid code ran!');
};
validCode();

// on purpose syntax error after valid code that could run
syntax(Error( 
```

[http://jsfiddle.net/Z86rj/](http://jsfiddle.net/Z86rj/)

No `alert()` occurs here. The first pass parsing fails, and no code executes.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T20:07:58.107

The script is first parsed, then interpreted, and then executed. When the first statement (`writeToConsole();`) is executed, the function declaration has already been interpreted.

Since all variable and [function declarations](https://stackoverflow.com/q/1013385/1048572) are *hoisted* in the current scope (in your case, the global script scope), you will be able to call a function that was declared below.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T20:14:56.790

JavaScript is actually interpreted line by line. BUT, before it's executed, there is a first pass made by the compiler, reading certain things in (pretty geeky, have a look at this: [https://www.youtube.com/watch?v=UJPdhx5zTaw](https://www.youtube.com/watch?v=UJPdhx5zTaw) if you're really interested).

The point is, JavaScript will be first "read" by the compiler, who stores functions defined as `function foo(){...}` already. You can call those ones at any given time in the script, given you are calling them from the same or a subordinate scope. What modern compilers also do is preallocate objects, so as a side effect it does make sense to strongly type your variables for the matter of performance.

`var foo = function(){...}` will not be stored by the compiler, due to the fact that JavaScript is loosely typed and the type of a variable could change during execution time.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-24T10:03:48.917

The javascript engine create a execution context before executing your code. The execution context is created mainly in two phases:

*   Creation phase

*   Excecution phase

> Creation Phase

In the creation phase we have the `Global object`, `this` and `outer environment` reference.In the creation phase as the parser runs through the code and begins to setup what we have written for translation, it recognizes where we have created variables and where we have created function. Basically it setup memory space for variable and functions Hoisting.

> Execution Phase

In this the code is run line by line(interpreting, converting, compiling and executing it on the computer).

consider the following example, in this we are able to call the function b even before its declaration. This is because the javascript engine already knows the existence of the function b. And this is also referred to as hoisting in javascript.

```
b();

function b() {
  console.log("I have been hoisted");
}
```

# arrays - Arraylist 中的所有元素都发生变化 - 处理

> ID：15395348
> 
> 赞同：0
> 
> 时间：2013-03-13T20:04:02.620
> 
> 标签：arrays, arraylist, processing

我的程序是一个僵尸生存游戏，设置在二维数组中。我使用一个数组列表——我的第一次尝试——来存储僵尸，并且每个人都“检查”它的上方、下方和周围是否有一个块，以检测它的运动。

我这里贴出相关代码，单独上传sketch文件夹。

```
ArrayList zombies;

void setup() {
  zombies = new ArrayList();
}

void draw() {
      for (int i = 0; i < zombies.size(); i++) {
    Zombie zombie = (Zombie) zombies.get(i);
      zombie.draw();
}
}

void keyPressed() {
  if (key == 'z') {
    zombies.add(new Zombie());
}
}

class Zombie
{
  int posX = 20;
  int posY = 10;
  boolean fall;
  boolean playerOnBlock;

  Zombie() {
    posX = 10;
    posY = 590;
    fall = false;
  }

  void draw() {
    grid.blockCheck(posX, posY, 2);
    fill(0, 255, 0);
    rect(posX, posY, 10, 10);
  }

  void fall() {
    posY += 5;
    println("zombiefall"+posY);
  }

  void move(boolean left, boolean right, boolean above) {
    if (left == true && player.playerX < posX) {
      posX -= 1;
    }
    if (right == true && player.playerX > posX) {
      posX += 1;
    }
  }
}

class Grid {
  void blockCheck(int x, int y, int e) {
    for (int i = 0; i < l; i++)
      for (int j = 0; j < h; j++)
      {
        grid[i][j].aroundMe (x, y, i, j, e);
      }
  }
}

class Block {
  void aroundMe(int _x, int _y, int _i, int _j, int entity) {
    int pGX = _x/10;
    int pGY = _y/10;

    if (entity == 1) {
      if (pGY+1 == _j && pGX == _i && state == 4) {
        player.fall();
      }

      if (pGX == _i && pGX-1 <= _i && _y == posY && state == 4) {
        leftOfMe = true;
      }
      else
      {
        leftOfMe = false;
      }

      if (pGX+1 == _i && _y == posY && state == 4) {
        rightOfMe = true;
      }
      else
      {
        rightOfMe = false;
      }
      if (pGY-1 == _j && _x == posX && state ==4) {
        aboveOfMe = true;
      }
      else
      {
        aboveOfMe = false;
      }

      player.controls(leftOfMe, rightOfMe, aboveOfMe);
    }

    if (entity == 2) {

      if (pGY+1 == _j && pGX == _i && state == 4) {
              for (int i = 0; i < zombies.size(); i++) {
    Zombie zombie = (Zombie) zombies.get(i);
        zombie.fall();
      }
      }

      if (pGX == _i && pGX-1 <= _i && _y == posY && state == 4) {
        ZleftOfMe = true;
      }
      else
      {
        ZleftOfMe = false;
      }

      if (pGX+1 == _i && _y == posY && state == 4) {
        ZrightOfMe = true;
      }
      else
      {
        ZrightOfMe = false;
      }

      if (pGY-1 == _j && _x == posX && state ==4) {
        ZaboveOfMe = true;
      }
      else
      {
        ZaboveOfMe = false;
      }
      for (int i = 0; i < zombies.size(); i++) {
    Zombie zombie = (Zombie) zombies.get(i);
      zombie.move(ZleftOfMe, ZrightOfMe, ZaboveOfMe);
    }
  } 
```

草图在这里：[http ://www.mediafire.com/?u5v3117baym846v](http://www.mediafire.com/?u5v3117baym846v)

我认为问题在于指定我所指的数组列表的哪个元素，因为我可以观察到问题是：

当一个人检测到它应该倒下时，所有“僵尸”都会倒下。

僵尸的速度随着每增加一个僵尸而增加 - 以某种方式将所有僵尸元素视为一个僵尸对象？

这可能是一个类似的问题： [An ArrayList 的所有元素都在添加新元素时发生变化？](https://stackoverflow.com/questions/5608828/all-elements-of-an-arraylist-change-when-a-new-one-is-added)

但我已经摆弄了我的项目，我似乎无法让它继续工作。

请不要犹豫，询问有关我的项目的更多信息。我将整晚都在我的电脑前，所以应该能够快速回复。提前致谢。

谢谢你的帮助。我这样使用它：

```
ArrayList <Zombie> zombies =  new ArrayList <Zombie>();
-------------------------------------------
    void setup(){
  zombies = new ArrayList();
-------------------------------------------

void draw(){
  for (Zombie z:zombies) {
    z.draw();
  }
}

-------------------------------------------

void keyPressed() {
  if (key == 'z') {
    for (int i = 0; i< 1; i++) {
      zombies.add(new Zombie(i));
    }
  }

-------------------------------------------

class Zombie
{
  int posX = 20;
  int posY = 10;
  boolean fall;
  boolean playerOnBlock;
  int z;

  Zombie(int _z) {
    posX = 10;
    posY = 590;
    fall = false;
    z = _z;
  }

  void draw() {
    grid.blockCheck(posX, posY, 2);
    fill(0, 255, 0);
    rect(posX, posY, 10, 10);
  }

  void fall() {
    posY += 5;
    println("zombiefall"+posY);
  }

  void move(boolean left, boolean right, boolean above) {
    if (left == true && player.playerX < posX) {
      posX -= 1;
    }
    if (right == true && player.playerX > posX) {
      posX += 1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:41:23.243

这是想法:)

```
//use generics to keep it simple. Only Zoombies in this list
ArrayList <Zoombie> samp =  new ArrayList <Zoombie>();

void setup() {
  //a regular for loop to use the i as id
  for (int i = 0; i< 100; i++) {
    samp.add(new Zoombie(i));

  }
  //run just once
  noLoop();
}

void draw() {

  //a enhanced for, no need for use  get()
  // z will represent each element in the collection
  for (Zoombie z:samp) {
    z.d();   
  }

  println("done");
}

// a dummy class ;)
class Zoombie {
  int id;
  Zoombie (int _id)
  {
    id =_id;
  }

  void d()
  {
    println(id);
  }
} 
```

# hadoop - Hadoop 会始终在节点之间平均分配工作吗？

> ID：15395351
> 
> 赞同：3
> 
> 时间：2013-03-13T20:04:08.787
> 
> 标签：hadoop, mapreduce, hdfs, job-scheduling, mappers

假设我有 200 个输入文件和 20 个节点，每个节点有 10 个映射器插槽。Hadoop 是否总是平均分配工作，每个节点将获得 10 个输入文件并同时启动 10 个映射器？有没有办法强制这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:15:33.230

使用多少映射器由输入决定——特别是输入拆分。因此，在您的情况下，可以将 200 个文件提供给 200 个映射器。但真正的答案要复杂一些。这取决于

*   文件大小：如果文件大于块大小，则将块大小的块发送到映射器

*   是可拆分的文件。例如 gzip 压缩文件不能被拆分。并且整个文件转到一个映射器（即使文件大于块大小）

# python - 寻找最接近cerin值的数字

> ID：15395353
> 
> 赞同：1
> 
> 时间：2013-03-13T20:04:19.987
> 
> 标签：python, python-2.7

我有一个元组列表：

```
lst = [('54', '1.74', '253.2'), ('342', '2.85', '13.46'), ('53','2.43', '15.63')] 
```

我想在`[1]`最接近 2.0的位置找到 item 的元组

我是这样的：

```
number = lst[0][1]
for i in lst:
    if abs(float(i[1]) - 2) < float(number):
        number = i[1]
        if number in i:
            print i 
```

但是当我试图将字符串转换为浮点数时，它会引发异常；/ 我该如何实际做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:05:31.707

这应该可以解决问题...

```
min(lst,key=lambda x: abs(float(x[0]) - 2)) 
```

该`min`函数将根据函数比较列表中的每个元素`key`。

演示：

```
>>> lst = [('1.74', '253.2'), ('2.85', '13.46'), ('2.43', '15.63')]
>>> min(lst,key=lambda x: abs(float(x[0]) - 2))
('1.74', '253.2') 
```

# java - Java - 我可以在远程对象中调用任意数量的方法吗？

> ID：15395354
> 
> 赞同：1
> 
> 时间：2013-03-13T20:04:21.373
> 
> 标签：java, rmi

在我看到的所有示例中，扩展 Remote 类的接口只有一个方法。

我可以在这个接口中拥有尽可能多的方法并在服务器程序中实现它，以便我的客户端程序调用它们吗？例如：一种方法是获取一个对象，另一种方法是存储一个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:24:03.430

假设您正在谈论 RMI，那么是的，您可以将您想要的东西放在那里，您可以选择尽可能多的方法。

# javascript - node.js 和 socket.io 如何使用回调？

> ID：15395357
> 
> 赞同：0
> 
> 时间：2013-03-13T20:04:28.267
> 
> 标签：javascript, node.js, callback

我正在尝试了解如何使用 node.js 和 socket.io。我在 PHP 之前使用过，但我无法理解如何在 node.js 中使用回调。

我有部分代码分配给 socket.io

```
if (validate_room(room)) {
    console.log('Room exist'); 
    io.sockets.clients(room).forEach(
        function (socket) {
            console.log(socket.id);
        });
    //do some fucnction using socket interface    
} else {
    console.log('Room not exist');
    //do other function using socket interface        
} 
```

你可以看到，这里我需要访问 io.sockets 对象。

validate_room 上面的函数

```
function validate_room(room) {

    mysql_connection.query('SELECT * FROM rooms WHERE room = ' + mysql_connection.escape(room), function(err, rows, fields) {
        if (err)
            throw err;

        if (rows.length.toString() > 0) {
            console.log('Validate room - true: ', rows.length.toString());

            return true;
        }
        console.log('Validate room - false: ', rows.length.toString());
        return false;
    });
} 
```

我需要第二个函数来返回“true / false”。

当我使用“浏览器”时，我只是将回调放入另一个外部函数，但在这里我需要访问 socket.io 对象。

所以我想让“if(validate_room(room))”在这里停下来等待结果真/假。

也许有人可以指出我的想法，我在哪里犯了错误。

最好的问候马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:41:01.360

将这样的内容放入您的回调中：

```
if (err)
    throw err;
afterRoomValidation(rows.length.toString() > 0); 
```

和功能：

```
function afterRoomValidation(isValid) {
    if (isValid) {
        console.log('Room exist'); 
        io.sockets.clients(room).forEach(function (socket) { console.log(socket.id);  });
        //do some fucnction using socket interface    
    } else {
        console.log('Room not exist');
        //do other function using socket interface        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:52:22.527

> 函数只返回“真/假”。

不，您不能这样做，就像您[不能从函数的 AJAX 调用同步返回响应一样？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function). 使用回调：

```
function validate_room(room, validCallback, invalidCallback) {

    mysql_connection.query('SELECT * FROM rooms WHERE room = ' + mysql_connection.escape(room), function(err, rows, fields) {
        if (err)
            throw err;

        if (rows.length.toString() > 0) {
            console.log('Validate room - true: ', rows.length.toString());
            validCallback();
        } else
            console.log('Validate room - false: ', rows.length.toString());
            invalidCallback();
        }
    });
} 
```

和

```
validate_room(room, function() {
    console.log('Room exist'); 
    io.sockets.clients(room).forEach(function (socket) {
        console.log(socket.id);
        //do some fucnction using socket interface
    });
}, function() {
    console.log('Room not exist');
    //do other function using socket interface        
}); 
```

# python - RegEx-如何在字符串中的非字母字符和字母字符之间创建空格

> ID：15395359
> 
> 赞同：0
> 
> 时间：2013-03-13T20:04:30.920
> 
> 标签：python, regex

我想规范化文本字符串；出于这个原因，我想保留标点符号和非字母字符（不是为了识别表情符号），但同时在每两个字母和非字母字符之间留一个空格。例如以下字符串：

```
"*I love u*"
"Hi, life is great:)hehe"
"I will go uni.cul" 
```

应转换为：

```
"* I love u *"
"Hi , life is great :) hehe"
"I will go to uni . cul" 
```

你能告诉我如何写一个正则表达式来做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:12:53.660

您可以替换此表达式的匹配项：

```
(?<=[^\w\s])(?=\w)|(?<=\w)(?=[^\w\s]) 
```

带空格`。`

 `例如：

```
re.sub(r'(?<=[^\w\s])(?=\w)|(?<=\w)(?=[^\w\s])', ' ', str) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:12:52.297

试试这个：

```
x = '''*I love u*
    Hi, life is great:)hehe
    I will go uni.cul'''

def rep(matchobj):
    return ' ' + matchobj.group(0) + ' '

print re.sub('[^a-zA-Z0-9\s]+', rep, x).strip() 
````

# twitter-bootstrap - 引导程序中跨度之间的特定宽度

> ID：15395367
> 
> 赞同：0
> 
> 时间：2013-03-13T20:04:52.117
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap 2.3 响应式构建一个站点，其中涉及一些基本的 jQuery。

我有 3 个购买按钮，都在各自的 span2 中。中间购买保持居中，这是我想要的，但是左右购买都会随着浏览器宽度的变化而移动。

有什么办法可以让左右两边的购买距离中心保持固定的距离？

另外，我需要它们在单独的跨度中，因为 jQuery 需要这个。（我正在让购买左右按钮消失，并且在不同的跨度中保持中间购买中心。）

```
 <div class="row-fluid buy-row">
                    <div class="span2 offset3"><a href="http://www.reddit.com" class="buy-left">Buy</a></div>
                    <div class="span2 pagination-centered"><a href="#" class="buy-center">Buy</a></div>
                    <div class="span2 pagination-centered"><a href="http://www.soundcloud.com" class="buy-right">Buy</a></div> 
       </div> 
```

编辑：要查看我在说什么，请检查[shiftdd](http://www.shifteddd.com)。我希望购买链接始终保持在其各自的海报下方（嗯，无论如何都要低至 840 像素）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:15:35.613

如果我对您的理解正确，您希望中​​间按钮不允许向左或向右按​​钮进入固定距离以及在浏览器展开时不改变位置，对吗？如果是这样，这就是我认为您的解决方案：

1：给中心 div 一个额外的类来分隔它的 CSS，在外部左右按钮之间有一个固定的空间

```
 <div class="row-fluid buy-row">
                <div class="span2 offset3"><a href="http://www.reddit.com" class="buy-left">Buy</a></div>
                <div class="span2 pagination-centered center-button"><a href="#" class="buy-center">Buy</a></div>
                <div class="span2 pagination-centered"><a href="http://www.soundcloud.com" class="buy-right">Buy</a></div> 
   </div> 
```

.center-button 类的 CSS 如下所示：

```
.center-button{margin:0 15px 0;} 
```

这将覆盖左右空间，防止两者折叠到中心 div 上。

现在你的问题是两个按钮都从中心向外扩展，这就像将 3 个按钮包装在一个额外的 div 中并在 'row-fluid buy-row' 内的 div 上设置固定宽度一样简单，例如

```
<div class="row-fluid buy-row">
  <div class="fixed-buy"><!-- additional div wrap to create permanent unchanging width from center -->
                <div class="span2 offset3"><a href="http://www.reddit.com" class="buy-left">Buy</a></div>
                <div class="span2 pagination-centered"><a href="#" class="buy-center">Buy</a></div>
                <div class="span2 pagination-centered"><a href="http://www.soundcloud.com" class="buy-right">Buy</a></div> 
  </div><!-- end your new div -->
</div> 
```

然后将您的 div 设置为您希望不超过的所需像素，使其既不会超出中心也不会在其上折叠

```
.fixed-buy{width:450px} /* or whichever pixel width you prefer */ 
```

这回答了你的问题了吗？

可能需要为此固定位置设置其他媒体查询，或者您也可以以百分比或 em 进行设置

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:17:31.860

[http://jsfiddle.net/fHDxk/4](http://jsfiddle.net/fHDxk/4)

```
.center-wrap {
    text-align: center;
    overflow: hidden;
}
.center-wrap .span2 {
    float: none;
    display: inline-block;
    margin-left: 15px; /* adjust to your taste */
    width: 100px; /* adjust to your taste */
}

<div class="row-fluid buy-row">
    <div class="center-wrap">
        <div class="span2"><a href="http://www.reddit.com" class="buy-left">Click me</a>

        </div>
        <div class="span2 pagination-centered"><a href="#" class="buy-center">Click me</a>

        </div>
        <div class="span2 pagination-centered"><a href="http://www.soundcloud.com" class="buy-right">Click me</a>

        </div>
    </div>
</div> 
```

请注意，我已经删除了您的偏移类。

# iphone - iphone文件上传问题

> ID：15395369
> 
> 赞同：0
> 
> 时间：2013-03-13T20:04:53.773
> 
> 标签：iphone, ios, http, file-upload

我正在通过 HTTP 发布将视频上传到服务器。

我正在使用以下代码

```
 NSString *urlString =@"http://sampleurl.com/upload_video";

 NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];
 [request setURL:[NSURL URLWithString:urlString]];
 [request setHTTPMethod:@"POST"];

  [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n%@", appDelegate.userid] dataUsingEncoding:NSUTF8StringEncoding]];
  [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

   [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video\"; filename=\"%@\"\r\n", @"a.mov"] dataUsingEncoding:NSUTF8StringEncoding]];
   [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
   [postbody appendData:[NSData dataWithData:file]];
   [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
   [request setHTTPBody:postbody];

    conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (conn) {
    webData = [[NSMutableData data] retain];
     } 
```

这是我用来找出写入的字节数和总字节数的函数

```
 -(void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(    NSInteger)totalBytesExpectedToWrite{

    NSLog(@"------%i------%i-----------",totalBytesWritten ,totalBytesExpectedToWrite);

  NSDictionary *uploadStatus=[[NSDictionary alloc]initWithObjectsAndKeys:
                            [NSString stringWithFormat:@"%i",totalBytesWritten],@"bytesWritten",
                            [NSString stringWithFormat:@"%i",totalBytesExpectedToWrite],@"totalBytes",
                            nil];

   [uploadStatus release];
      } 
```

当我的应用程序返回后台时，上传会暂停，当它返回前台时，它会继续上传 **我的问题是......如果我上传了一个冗长的视频，这需要时间并且手机会自动锁定，之后上传过程无法正常工作，即上传卡住了，我被迫重新启动应用程序**

为什么会这样..请帮我提前清除这个谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:19:01.640

Apple 为应用程序引入了多任务支持。多任务支持依赖于将应用程序置于后台状态，它们可以快速恢复到完全交互模式，但不会在后台消耗资源。这可能会给网络应用程序带来问题，例如那些使用`RestKit:`重要的长时间运行请求构建的应用程序可能会因用户切换应用程序而中断。`beginBackgroundTaskWithExpirationHandler`值得庆幸的是，Apple 还通过使用on 方法创建后台任务，为延长进程的生命周期提供了有限的支持`UIApplication`。此方法接受一个 Objective-C 块并`UIBackgroundTaskIdentifier`为创建的后台任务返回一个值。创建后台任务时必须小心，以便保持与 iOS 3.0 部署的向后兼容性。

**请参阅后台上传/下载**中的主题

[http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)链接。

另请参阅此[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28)

[https://developer.apple.com/library/ios/#technotes/tn2277/_index.html](https://developer.apple.com/library/ios/#technotes/tn2277/_index.html)

以下行禁用 iOS 设备的睡眠时间。

```
[[UIApplication sharedApplication] setIdleTimerDisabled:YES] 
```

# groovy - Geb 配置

> ID：15395379
> 
> 赞同：8
> 
> 时间：2013-03-13T20:05:20.280
> 
> 标签：groovy, spock, geb

这看起来应该很简单，但我没有看到如何访问我的 GebConfig.groovy 文件中的值。我尝试了以下方法：

```
userName = "myUserName"

properties = {
  userName = "myUserName"
}

props {
  userName = "myUserName"
}

environments {
  chrome = { 
    driver = { new ChromeDriver() }
    userName = "myUserName" //with and without {}
  }
} 
```

但是我似乎仍然无法通过以下方式访问这些属性：

```
browser.driver.properties.userName 
```

我可以在配置文件中设置这些属性，然后在我的规范中访问它们吗？我似乎得到了默认的一组属性，这只是系统属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T13:36:33.357

这相当简单，但是我使问题变得比本来应该的要困难得多。只见树木不见森林。

我注意到在 Configuration 类中，来自 rawConfig 的项目是从 readValue 方法中获取的。getRawConfig 也没有出现在大纲或配置源中，导致我直接跳过尝试直接访问它。

```
browser.getConfig().getRawConfig().get("userName") 
```

或者以更时髦的方式：

```
browser.config.rawConfig.userName 
```

# c# - 是否有与 C++ std::partial_sort 等效的 C#？

> ID：15395380
> 
> 赞同：12
> 
> 时间：2013-03-13T20:05:23.473
> 
> 标签：c#, partial-sort

我正在尝试为可通过许多标准排序的数据集实现分页算法。不幸的是，虽然其中一些标准可以在数据库级别实现，但有些必须在应用程序级别完成（我们必须与另一个数据源集成）。我们有一个分页（实际上是无限滚动）要求，并且正在寻找一种方法来最大程度地减少每次分页调用在应用程序级别对整个数据集进行排序的痛苦。

进行部分排序的最佳方法是什么，只对列表中绝对需要排序的部分进行排序？[`std::partial_sort`](http://www.cplusplus.com/reference/algorithm/partial_sort/).NET 库中是否有等效于 C++ 的功能？我应该如何解决这个问题？

编辑：这是我要做什么的一个例子：

假设我需要根据一些排序标准获取 1000 个元素集中的第 21-40 个元素。为了加快排序，因为我每次都必须遍历整个数据集（这是一个通过 HTTP 的 Web 服务，它是无状态的），我不需要订购整个数据集。我只需要正确订购元素 21-40。创建 3 个分区就足够了：元素 1-20，*未排序*（但都小于元素 21）；元素 21-40，*已排序*；和元素 41-1000，*未排序*（但都大于元素 40）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T21:19:43.167

好的。根据您在回复我的评论时所说的话，这是我将尝试的。

> 我希望能够说“第 4 到第 6”并得到类似：3、2、1（未排序，但都小于正确的第 4 个元素）；4, 5, 6（已排序并且在相同的位置，它们将用于排序列表）；8, 7, 9（未排序，但都大于正确的第 6 个元素）。

让我们将 10 添加到我们的列表中以使其更容易：10、9、8、7、6、5、4、3、2、1。

所以，你可以做的是使用[快速选择算法](https://en.wikipedia.org/wiki/Quickselect)来找到第 i^个和第 k^个元素。在您上面的情况下，i 是 4，k 是 6。这当然会返回值 4 和 6。这将需要两次通过您的列表。所以，到目前为止，运行时间是 O(2n) = O(n)。当然，下一部分很简单。我们关心的数据有上限和下限。我们需要做的就是再次遍历我们的列表，寻找在我们的上限和下限之间的任何元素。如果我们找到这样的元素，我们会将其放入一个新的列表中。最后，我们对仅包含我们关心的第 i^个到第 k^(个元素的 List 进行排序。)

所以，我相信总运行时间最终是 O(N) + O((ki)lg(ki))

```
static void Main(string[] args) {
    //create an array of 10 million items that are randomly ordered
    var list = Enumerable.Range(1, 10000000).OrderBy(x => Guid.NewGuid()).ToList();

    var sw = Stopwatch.StartNew();
    var slowOrder = list.OrderBy(x => x).Skip(10).Take(10).ToList();
    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds);
    //Took ~8 seconds on my machine

    sw.Restart();
    var smallVal = Quickselect(list, 11);
    var largeVal = Quickselect(list, 20);
    var elements = list.Where(el => el >= smallVal && el <= largeVal).OrderBy(el => el);
    Console.WriteLine(sw.ElapsedMilliseconds);
    //Took ~1 second on my machine
}

public static T Quickselect<T>(IList<T> list , int k) where T : IComparable {
    Random rand = new Random();
    int r = rand.Next(0, list.Count);
    T pivot = list[r];
    List<T> smaller = new List<T>();
    List<T> larger = new List<T>();
    foreach (T element in list) {
        var comparison = element.CompareTo(pivot);
        if (comparison == -1) {
            smaller.Add(element);
        }
        else if (comparison == 1) {
            larger.Add(element);
        }
    }

    if (k <= smaller.Count) {
        return Quickselect(smaller, k);
    }
    else if (k > list.Count - larger.Count) {
        return Quickselect(larger, k - (list.Count - larger.Count));
    }
    else {
        return pivot;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T20:11:44.207

您可以使用[List<T>.Sort(int, int, IComparer<T>)](http://msdn.microsoft.com/en-gb/library/8ce6t5ad.aspx)：

```
inputList.Sort(startIndex, count, Comparer<T>.Default); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-13T20:12:57.837

`Array.Sort()`具有接受的重载`index`和`length`允许您对数组的子集进行排序的参数。对于`List`.

当然，你不能`IEnumerable`直接排序。

# opengl - OpenGL 3.3 多纹理：GL_TEXTURE1 及以下始终为黑色（只有 GL_TEXTURE0 可以正常工作）

> ID：15395382
> 
> 赞同：6
> 
> 时间：2013-03-13T20:05:25.690
> 
> 标签：opengl, glsl, textures, texture2d, multitexturing

GL_TEXTURE0 之后的每个纹理（插槽 0 上的纹理）都是黑色的。

片段着色器（通过改变权重检查不同纹理的示例代码）：

```
#version 330

uniform sampler2D g_ColorTex;
uniform sampler2D g_DepthTex;
uniform sampler2D g_DofNearBlurTex;
uniform sampler2D g_DofDownBlurTex;

in vec4 g_VertexPosition;
in vec2 g_ScreenCoords;

layout (location = 0) out vec4  FragColor;

void main() 
{
    // Changing weights to check textures
    FragColor  = 1.00001f * vec4(texture(g_ColorTex      , g_ScreenCoords).rgb, 1.0f);
    FragColor += 0.00001f * vec4(texture(g_DepthTex      , g_ScreenCoords).rgb, 1.0f);
    FragColor += 0.00001f * vec4(texture(g_DofNearBlurTex, g_ScreenCoords).rgb, 1.0f);
    FragColor += 0.00001f * vec4(texture(g_DofDownBlurTex, g_ScreenCoords).rgb, 1.0f);
} 
```

我上传这样的纹理（摘录！）：

```
::glUseProgram(ShaderHandle);

unsigned int TextureIndex;

TextureIndex = ::glGetUniformLocation(ShaderHandle, "g_ColorTex");

::glUniform1i(TextureIndex, 0);

::glActiveTexture(GL_TEXTURE0);

::glBindTexture(GL_TEXTURE_2D, TextureHandle);

::glBindSampler(GL_TEXTURE0, SamplerHandle);

TextureIndex = ::glGetUniformLocation(ShaderHandle, "g_DepthTex");

::glUniform1i(TextureIndex, 1);

::glActiveTexture(GL_TEXTURE1);

::glBindTexture(GL_TEXTURE_2D, TextureHandle);

::glBindSampler(GL_TEXTURE1, SamplerHandle);

TextureIndex = ::glGetUniformLocation(ShaderHandle, "g_DofNearBlurTex");

::glUniform1i(TextureIndex, 2);

::glActiveTexture(GL_TEXTURE2);

::glBindTexture(GL_TEXTURE_2D, TextureHandle);

::glBindSampler(GL_TEXTURE2, SamplerHandle);

TextureIndex = ::glGetUniformLocation(ShaderHandle, "g_DofDownBlurTex");

::glUniform1i(TextureIndex, 3);

::glActiveTexture(GL_TEXTURE3);

::glBindTexture(GL_TEXTURE_2D, TextureHandle);

::glBindSampler(GL_TEXTURE3, SamplerHandle);

//...

::glDrawElements(GL_TRIANGLES, Mesh->m_Indices.size() * 3, GL_UNSIGNED_INT, 0); 
```

我尝试更改纹理槽并上传不同的纹理，但我总是黑屏，直到我在 GL_TEXTURE0 上使用纹理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T00:47:34.017

```
::glBindSampler(GL_TEXTURE0, SamplerHandle); 
```

那是错误的。[`glBindSampler`](http://www.opengl.org/wiki/GLAPI/glBindSampler)采用纹理图像单元*索引*，而不是枚举。应该是`0`，不是`GL_TEXTURE0`。

处理此问题的最佳方法如下：

```
glUniform1i(TextureIndex, index);
glActiveTexture(GL_TEXTURE0 + index);
glBindTexture(GL_TEXTURE_2D, TextureHandle);
glBindSampler(index, SamplerHandle); 
```

# google-maps-api-3 - 如何正确使用 Google Maps API？

> ID：15395387
> 
> 赞同：6
> 
> 时间：2013-03-13T20:05:31.950
> 
> 标签：google-maps-api-3

我发现，在使用 Google Maps API 时，结果会不时发生变化。改变我的意思是响应对象。基本上我正在查询谷歌地图以获取基于用户输入的地点列表（也使用 jQueryUI 自动完成）。我正在尝试正确获取从 Google Maps API 返回的坐标，但包含精确|近似坐标的属性似乎不时发生变化。

例如：在早期，我能够获得 和 之类的`item.geocode.geometry.location.Ya`坐标`item.geocode.geometry.location.Za`。然后我的搜索表单坏了，因为谷歌把它改成了`item.geometry.location.mb`and `item.geometry.location.nb`。

关于如何以正确且稳定的方式实施此操作的任何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T20:11:41.543

切勿使用您找到的 Maps API 对象的未记录属性。每当修改 Maps API 时，这些都会发生巨大变化。

相反，只使用记录在案的方法和属性。

你`item.geocode.geometry.location`是一个`LatLng`，所以你可以调用它的`.lat()`和`.lng()`方法：

```
var location = item.geocode.geometry.location;
var lat = location.lat();
var lng = location.lng(); 
```

# asp.net-mvc-4 - MVC 4 - 尝试添加新报告时出错

> ID：15395388
> 
> 赞同：0
> 
> 时间：2013-03-13T20:05:32.897
> 
> 标签：asp.net-mvc-4, devexpress, report

[按照此链接](http://help.devexpress.com/#XtraReports/CustomDocument9974)中的步骤，我成功地使用 DXperience ASP.Net MVC Web 应用程序项目向导运行报告，但是当我尝试使用基本的 ASP.Net MVC Web 应用程序项目向导重现完全相同的事情时，我没有编译时调试器错误，但浏览器返回以下错误：

![在此处输入图像描述](../Images/db1f3e57ddf43bbca1af333b3df0fd1b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:23:38.087

看起来 DevExpress 扩展在您的视图的命名空间中不可见。添加一个 using，或将其添加到 ~/Views 下的 Web.Config

```
@using Devexpress; // or whatever the namespace is 
```

此外，您需要确保将 Devexpress 添加为对项目的引用（如果尚未添加）。

# sql - 更新SQL后如何自动更新字段名

> ID：15395391
> 
> 赞同：2
> 
> 时间：2013-03-13T20:05:43.637
> 
> 标签：sql, tsql, reporting-services, ssrs-2008

我正在更改`.rdl`ffile 中数据集的命令文本：

![在此处输入图像描述](../Images/50bdd9380e3793f28291a282f0b4e784.png)

我想知道如何更新`fields`select 语句返回的结果：

![在此处输入图像描述](../Images/5bf66132b15a6c2c111fe495af10b2e4.png)

我知道这些字段必须自动生成，所以我想知道是否可以在内联编辑 SQL 代码后立即更新它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:30:22.580

通常，当有人想查看命令文本中的数据时，他们希望将其作为最终用户的参考（据我所见）。您可能想要修改它，但最终报告您的第一个目标应该是：“我这样做是为了什么？” 如果您的目标是在运行时动态创建，那么我会避免这种情况并提供一些其他建议：

1.  对其进行认证。如果你知道如何在 SQL Server 中创建存储过程，这是一种方便快捷的方式来获得你想要的东西，如果你知道你在用你的 SQL FU 做什么来获得好的结果，你可以优化它。不利的一面是，如果您使用多个环境，则必须为 TSQL 和 RDL 文件部署代码。

2.  使用表达式在运行时构建数据集。如果有人告诉我查询本身没有被其他开发人员正确优化，他们提到这样做。我自己并不总是看到这样做的好处，而不是仅仅让你的谓词构造在源引擎上具有良好的索引工作得很好。无论如何，您都可以在运行时构建数据集。这类似于在文本旁边点击“fx”，然后输入类似这样的内容（假设您有一个名为 @Start 的变量）：

    ```
    ="Select thing 
    from table 
    Where >= " & Parameters!Start.Value 
    ```

    同样，我还没有真正看到这是否真的比：

    ```
    Select thing
    from table
    Where >= @Start 
    ```

    但是，如果您只想动态构建它，它就在那里。

3.  您可以尝试从作为 select 语句一部分的参数动态构建表达式。SSRS 就是关于“表达式”以及你可以用它们做什么。一旦你开始了解它们如何适用于所有事情，你就会发疯，可以说使用它们。不过，一般规则是您使用和依赖的报告越多，您的报告就会变得越慢。

我希望其中一些可能会有所帮助，我首先要问的是由于需要事件驱动或与性能相关的动态。

# java - 文件路径上带有空格的 JDBC 连接字符串（sqlite、hsqldb）

> ID：15395394
> 
> 赞同：1
> 
> 时间：2013-03-13T20:05:52.043
> 
> 标签：java, sqlite, jdbc, hsqldb

我必须连接到文件中托管的数据库。而不是指向一个端口，我必须指向一个像这个 sqlite 连接字符串这样的文件：

```
"jdbc:sqlite:database/users.db" 
```

但是当路径上有空格时，我无法弄清楚如何指定路径，例如：

```
"jdbc:sqlite:C:\\Documents and Settings\\users.db"
"jdbc:sqlite:C:/Documents\ and\ Settings/users.db" 
```

这些都不起作用。

最好我还希望能够以与系统无关的方式指定此路径（即在 Windows 和 linux 上都可以使用）。无需对每个进行特定处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:27:28.297

事实证明 Nishant 是对的，我根本不需要转义字符或使用反斜杠。这有效：

```
"jdbc:sqlite:C:/Documents and Settings/users.db" 
```

我实际上已经尝试过了，但是另一个错误阻止了我看到它工作。我有两个错误，但认为我只有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T03:25:23.583

我们也可以尝试双反斜杠，它对我有用

```
"jdbc:sqlite:C:\\Documents and Settings\\users.db" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:19:43.227

我相信 JDBC 转义是使用 {}。所以那会变成

```
"jdbc:sqlite:{C:/Documents and Settings/users.db}" 
```

或者

```
"{jdbc:sqlite:C:/Documents and Settings/users.db}" 
```

或它的变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:21:42.430

对于系统独立分隔符，您应该`File.separator`从标准 API 使用：

[文件 (Java SE 7)](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separator)

> 系统相关的默认名称分隔符。该字段被初始化为包含系统属性 file.separator 值的第一个字符。在 UNIX 系统上，该字段的值为 '/'；在 Microsoft Windows 系统上，它是 '\'。

`File.separator`将此`char`作为`String`.

# xcode - 如何使 scrollView 自动滚动？

> ID：15395401
> 
> 赞同：3
> 
> 时间：2013-03-13T20:06:23.570
> 
> 标签：xcode, button, scrollview, playback, autoscroll

我有这个滚动视图：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
self.scrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight;
self.scrollView.contentSize = CGSizeMake(320,3000);

_scrollView.frame = CGRectMake(0, 45, 320, 420); 
```

我想让它非常缓慢地向下自动滚动到最后，以便用户可以看到内容（如电影学分），最终使用停止/播放按钮，但在触摸界面时遵循用户手势。

我怎样才能做到这一点？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:11:53.517

您可以使用：

```
 [_scrollView setContentOffset:CGPointMake(x,y) animated:YES]; 
```

并使用 x 和 y 作为您可以捕获的屏幕上的触摸点。

您还可以使用 CoreAnimation 制作动画：

```
 [UIScrollView beginAnimations:@"scrollAnimation" context:nil];
 [UIScrollView setAnimationDuration:1.0f];
 [scroll setContentOffset:CGPointMake(x, y)];
 [UIScrollView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:26:59.287

这个改编的代码成功了（来源[http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/](http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/)）

PS：每张图片是 280 x 200

```
 - (void)viewDidLoad
 {
[super viewDidLoad];

UIScrollView *scr=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
scr.tag = 1;
scr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:scr];
[self setupScrollView:scr];
UIPageControl *pgCtr = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 264, 480, 36)];
[pgCtr setTag:12];
pgCtr.numberOfPages=10;
pgCtr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:pgCtr];
 }

  - (void)setupScrollView:(UIScrollView*)scrMain {
// we have 10 images here.
// we will add all images into a scrollView & set the appropriate size.

for (int i=1; i<=10; i++) {
    // create image
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"sti%02i.jpg",i]];
    // create imageView
    UIImageView *imgV = [[UIImageView alloc] initWithFrame:CGRectMake(20, ((i-1)*scrMain.frame.size.height+100), 280, 200)];
    // set scale to fill
    imgV.contentMode=UIViewContentModeScaleToFill;
    // set image
    [imgV setImage:image];
    // apply tag to access in future
    imgV.tag=i+1;
    // add to scrollView
    [scrMain addSubview:imgV];
}
// set the content size to 10 image width
[scrMain setContentSize:CGSizeMake(scrMain.frame.size.width, scrMain.frame.size.height*10)];
// enable timer after each 2 seconds for scrolling.
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(scrollingTimer) userInfo:nil repeats:YES];

}

 - (void)scrollingTimer {
// access the scroll view with the tag
UIScrollView *scrMain = (UIScrollView*) [self.view viewWithTag:1];
// same way, access pagecontroll access
UIPageControl *pgCtr = (UIPageControl*) [self.view viewWithTag:12];
// get the current offset ( which page is being displayed )
CGFloat contentOffset = scrMain.contentOffset.y;
// calculate next page to display
int nextPage = (int)(contentOffset/scrMain.frame.size.height) + 1 ;
// if page is not 10, display it
if( nextPage!=10 )  {

    [scrMain scrollRectToVisible:CGRectMake(0, nextPage*scrMain.frame.size.height, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=nextPage;
    // else start sliding form 1 :)

} else {

    [scrMain scrollRectToVisible:CGRectMake(0, 0, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=0;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:09:50.377

如果要水平滚动，可以设置 x，否则设置 y 垂直滚动。

```
[_scrollView setContentOffset:CGPointMake(x, y) animated:YES]; 
```

并相应地修改坐标。

# php - php从具有相同'id'号的数组中获取值

> ID：15395404
> 
> 赞同：0
> 
> 时间：2013-03-13T20:06:32.763
> 
> 标签：php, arrays

我无法从数组中获取值

```
Array
(
    [0] => id
    [column_name] => id
)
Array
(
    [0] => businessType
    [column_name] => businessType
)
Array
(
    [0] => name
    [column_name] => name
)
Array
(
    [0] => city
    [column_name] => city
)
... 
```

我从

```
mysql_query("
SELECT column_name 
FROM information_schema.columns 
WHERE table_name='businessUpgrade' 
") 
```

在我的while循环中

```
while($row = mysql_fetch_array($result)){
   while($column = mysql_fetch_array($colName)){
     if($row[$i] == 1){
             //here comes the missing part
     }
     $i++;
   }
} 
```

我尝试了不同的东西，但根据 print_r，我需要获取的值具有相同数量的 id (0)。有什么办法，我可以从这个数组中获取值。我发现我应该用 foreach 来做，但不知何故，我尝试的一切都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:12:28.350

试试这个

```
$res = mysql_query("
SELECT column_name 
FROM information_schema.columns 
WHERE table_name='businessUpgrade' 
");

while($r = mysql_fetch_row($res)){
$arr[]=$r;
} 
```

笔记 。不要使用mysql。改用 mysqli 或 PDO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:13:42.813

无需使用 2 个 while 循环。该`$row`数组是一个[关联数组](http://php.net/manual/en/language.types.array.php)，因此您可以使用...

```
$columns = array();
// {query}
while($row = mysql_fetch_array($result)) {
    $columns[] = $row['column_name'];
}

var_dump($columns); 
```

您的`$columns`数组现在包含所有列的索引。这是一个零索引，因此可以使用以下方法单独拉出：

```
echo $columns[0]; // The first column from the query "id"
echo $columns[2]; // The third column from the query "name" 
```

您还可以根据需要循环该数组。

```
foreach ($columns as $id => $column) {
    if ($id == 0) {
        // Do something with the first column:
        echo $column;
    } elseif ($id == 2) {
        // Do something with the third column:
        echo $column;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:17:49.983

有了这个：

```
while($row = mysql_fetch_array($result)){
  while($column = mysql_fetch_assoc($colName)){
  if(($column['0'] == $row[$i]) && ($row[$i] == 1)){
         //something like this???
  }
}
  $i++;
} 
```

你的问题有点乱XD ......我希望这无论如何都会有所帮助。

# inheritance - ExpressJS 和 CoffeeScript 类继承

> ID：15395406
> 
> 赞同：2
> 
> 时间：2013-03-13T20:06:42.600
> 
> 标签：inheritance, express, coffeescript

我[`CoffeeScript`](http://coffeescript.org/)可以扩展节点的[`http.Server`](http://nodejs.org/api/http.html#http_class_http_server)类：

```
{Server} = require 'http'
class MyServer extends Server
  foo: 'bar'
myserver = new MyServer
console.log myserver.foo # 'bar'

class MyServer2 extends MyServer
  constructor: -> super()
myserver2 = new MyServer2
myserver.listen 3000 
```

如果我正确理解[了这篇文章](https://stackoverflow.com/questions/5284340/what-is-node-js-connect-express-and-middleware)，[`express`](http://expressjs.com/)请扩展[`connect`](http://www.senchalabs.org/connect/)它进而扩展`http.Server`。但是下面有一些继承问题：

```
Express = require 'express'
class MyApp extends Express
  foo: 'bar'
myapp = new MyApp
console.log myapp.foo # undefined

class MyApp2 extends MyApp
  constructor: -> super()
myapp2 = new MyApp2
console.log myapp2 # {}
myapp2.listen 3000 # throws TypeError 
```

当`listen`被调用时，它会抛出以下错误，因为`myapp2`它是一个空对象`{}`并且没有该`listen`方法：

```
TypeError: Object #<MyApp2> has no method 'listen' 
```

如何`express`以面向对象的方式使用`CoffeeScript`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:13:11.737

是的，你完全可以做到。只需删除那些`()`：

```
express = require 'express'
class MyApp extends express
myapp = new MyApp
myapp.listen 3000 
```

`express`现在代表一个类，所以也许你应该`Express`改为调用它，以遵守 CoffeeScript 的准则。你看，`express()`返回给你一个后代的实例`http.Server`，而不是一个后代类，所以你试图扩展一个服务器实例。CoffeeScript 允许直接使用 JS 原型，而这正是你不小心做的。因此，前两行应如下所示：

```
Express = require 'express'
class MyApp extends Express 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T15:43:38.847

你不能从 express 或 server 扩展，因为它是一个函数而不是一个类。您可以使用以下方法进行测试：

`console.log(typeof express);`

# javascript - 事件 - 控制方法的反转

> ID：15395410
> 
> 赞同：0
> 
> 时间：2013-03-13T20:06:50.640
> 
> 标签：javascript, backbone.js

关于开/关，listenTo / stopListening 如何工作？

在控制台中，我正在试验这样的 Backbone 事件系统......

```
// works
Backbone.on('x', function(){console.log('x happened');})

// works
Backbone.trigger('x');

// works
Backbone.off('x');

// works
Backbone.once('x', function(){console.log('x happened');}) 
```

我正在尝试扩展我的示例以使用listenTo() 和stopListening()。

这些被列为控制类型的反转。有没有一种简单的方法来显示上面的用法？

从源代码来看，主要区别在于第一个参数需要是一个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:27:21.643

它完全一样，只是它是控制反转：`listenTo`将事件绑定在侦听对象上，而不是触发对象上。这对于清理 View 事件处理程序非常有用，因为视图现在知道它正在侦听哪些事件，并且可以在它被删除时取消绑定它们。在原始系统中，只有触发对象（即模型）才能直接了解绑定事件。

[这里](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view/7607853#7607853)有一个很好的概念解释。它显示了人们在它被添加到 Backbone 之前是如何做的。

在您的示例中，您实际上并没有“监听”对象，因为您的处理程序只是一个匿名函数。但它会类似于`obj.listenTo(Backbone, "x", obj.alert);`，其中`alert`的处理程序方法在哪里`obj`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:07:38.957

因为 listenTo 和 stopListening 在不同的对象上工作，所以您需要创建另一个可以访问事件系统的对象。一种简单的方法是创建一个视图对象。

```
var View1 = new Backbone.View(); 
```

接下来设置一个监听器：

```
Backbone.listenTo(View1, 'x', function(){console.log('I heard x');}); 
```

现在触发 View1 上的事件

```
View1.trigger('x'); 
```

最后移除监听器

```
Backbone.stopListening(View1,'x'); 
```

这涵盖了事件系统的 6 种主要方法。

经过测试和工作...

# mysql - MySQL 更新触发器不起作用

> ID：15395415
> 
> 赞同：0
> 
> 时间：2013-03-13T20:06:55.977
> 
> 标签：mysql, triggers

```
DELIMITER $$
USE `mydb`$$
DROP TRIGGER /*!50032 IF EXISTS */ `update`$$
CREATE
/*!50017 DEFINER = 'root'@'localhost' */
TRIGGER `update` AFTER UPDATE
ON `users`
FOR EACH ROW BEGIN
UPDATE `users2` SET `users2`.`username` = new.username AND `users2`.`password` = new.password WHERE `users2`.`id` = new.id;
END;
$$ 
```

它不会产生任何错误，也不会做它的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:22:09.320

你的`UPDATE`说法不正确。

改变它从

```
UPDATE `users2` SET `users2`.`username` = new.username AND `users2`.`password` = new.password WHERE `users2`.`id` = new.id;
                                                       ^^^ 
```

到

```
UPDATE `users2`       
   SET `username` = new.username, `password` = new.password 
 WHERE `users2`.`id` = new.id; 
```

# hibernate - 在与 Hibernate/JPA 和播放框架的 @ManyToMany 关系中获取重复的结果对象

> ID：15395419
> 
> 赞同：1
> 
> 时间：2013-03-13T20:07:19.110
> 
> 标签：hibernate, jpa, playframework

我正在使用 Play Framework v1.2.5 和 JPA 和 Hibernate。

我有 2 个模型：

```
@Entity
public class MapTile extends Model {

    // ...

    @Required
    public Integer tileOrder;

    @Required
    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    public List<MapBuildingInfo> buildingsInfo;

    // ...
}

@Entity
public class MapBuildingInfo extends Model {

    // ...

    @Required
    public Integer buildingsCount;

    // ...
} 
```

假设我有以下数据：

```
MapTile :
    tileOrder: 1
    buildingsInfo: 
        - buildingsCount : 1
        - buildingsCount : 2

MapTile :
    tileOrder: 2
    buildingsInfo: 
        - buildingsCount : 3
        - buildingsCount : 4 
```

我正在尝试检索（只有一个查询和连接）所有`MapTiles`及其对应的`MapBuildingInfos`.

这是我使用的查询：

```
List<MapTile> list = MapTile.find("from MapTile tile left join fetch tile.buildingsInfo building").fetch(); 
```

这是我列表中的结果：

```
list[0].tileOrder => 1
list[0].buildingsInfo[0].buildingsCount => 1
list[0].buildingsInfo[0].buildingsCount => 2

list[1].tileOrder => 1
list[1].buildingsInfo[0].buildingsCount => 1
list[1].buildingsInfo[0].buildingsCount => 2

list[2].tileOrder => 2
list[2].buildingsInfo[0].buildingsCount => 3
list[2].buildingsInfo[0].buildingsCount => 4

list[3].tileOrder => 2
list[3].buildingsInfo[0].buildingsCount => 3
list[3].buildingsInfo[0].buildingsCount => 4 
```

而不仅仅是：

```
list[0].tileOrder => 1
list[0].buildingsInfo[0].buildingsCount => 1
list[0].buildingsInfo[0].buildingsCount => 2

list[1].tileOrder => 2
list[1].buildingsInfo[0].buildingsCount => 3
list[1].buildingsInfo[0].buildingsCount => 4 
```

似乎 Hibernate/JPA 将每个结果放入一个新的 MapTile 对象中，因此它创建了一个重复项。但是他正确地填写`buildingsInfo`了。`MapTile`

我不明白为什么我会得到这个结果。你知道我做错了什么吗？你知道这是否是 Hibernate/JPA 的错误吗？还是我的错误？我怎样才能得到正确的结果？

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:15:19.463

我认为您必须将查询转换为：

`select distinct tile from MapTile tile left join fetch tile.buildingsInfo building`

由于您的 fetch 您创建了多行，并且您需要告诉 hibernate 将其映射到同一个实例。

# paypal - PayPal Payments Pro - 适用于英国客户的沙盒 API

> ID：15395421
> 
> 赞同：1
> 
> 时间：2013-03-13T20:07:21.650
> 
> 标签：paypal, paypal-sandbox

不久前，我为 PayPal 设置了一个沙盒帐户。我已经对代码进行了一些更改，并在沙盒模式下对其进行了测试，但我看到 paypal 已经完全改变了界面。

我不知道作为英国客户应该去哪里，而且我忘记了旧的沙盒密码，所以我无法将其导入新的开发人员界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:19:58.820

如果这是第一次通过新的开发者网站访问帐户，您可能需要登录新的 developer.paypal.com。它需要一个注册到真实 PayPal 帐户的电子邮件地址。

登录后，您将需要转到“应用程序”选项卡。
然后从这里您可以选择导入您已设置的现有帐户，但如果您像您说的那样忘记了它们。我建议创建一组新的测试帐户。

如果您能告诉我您要访问哪些页面，我可以查看我是否有指向这些页面的直接链接并为您提供这些链接。

新网站自推出以来存在一些问题，而且 IE 似乎比其他浏览器更多。因此，在做任何事情之前，您可能需要在访问 developer.paypal.com 之前清除缓存和 cookie，并使用 Firefox 或 Chrome。
如果您有来自旧站点的 cookie，则可能会导致新站点出现问题。

# visual-studio-2010 - VC++ 2010 Intellisense 看不到标头，但编译期间没有错误

> ID：15395427
> 
> 赞同：0
> 
> 时间：2013-03-13T20:07:53.940
> 
> 标签：visual-studio-2010, visual-c++, include, sdl

我已经用 SDL 编译了一个测试程序。该程序编译良好并且正在运行，但是我可以包含的文件没有智能感知。

包括它们：“SDL.h”不会给我一个错误。Intelisense 适用于所有 SDL 功能，所以我看不出问题可能是什么。

我的设置：其他包含目录：SDL-1.2.15\include\

编辑：给它一个绝对路径，使智能感知再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:15:41.510

好的，我找到了解决方案，似乎是 VS 中的一个错误，但是当我使用宏将相对路径更改为一个时，它又可以正常工作了。所以我改变了这个：

```
SDL-1.2.15\include\ 
```

对此：

```
$(Project_Dir)\SDL-1.2.15\include\ 
```

# c++ - 从向量转换 ::iterator 到向量 ::iterator

> ID：15395428
> 
> 赞同：3
> 
> 时间：2013-03-13T20:07:54.613
> 
> 标签：c++, stl, iterator, polymorphism

是否可以进行标题中描述的操作？这是我想做的一个具体例子：

```
#include <vector>
class Base{
public:
    Base(int t){tst = t;}
protected:
    int tst;
};

class Derived : public Base{
public:
    Derived(int t):Base(t){} 
};

int main(){
    std::vector<Derived> test;
    test.push_back(Derived(1));
    std::vector<Base>::iterator iTest = test.begin();
} 
```

最后一行失败。使用 static_cast 也不起作用。有没有好的方法来做到这一点？否则，我如何将派生类对象的向量作为基类对象的向量进行迭代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:19:46.263

您不能将它们一起转换。

我认为你需要这样的东西：

```
std::vector<Base*> test;
test.push_back( new Derived(1) );

std::vector<Base*>::iterator iTest = test.begin();

// ....

// cleanup 
```

进而享受多态性优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:14:54.960

不，类型无关。

如果您想公开一系列`Base`对象，隐藏它们实际上是 的事实`Derived`，您可以使用[`boost::iterator_adaptor`](http://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/iterator_adaptor.html). 结果类型不是`vector<Base>::iterator`，但它是一个迭代器，`Base`在取消引用时会给出 a 。

```
#include <boost/iterator/iterator_adaptor.hpp>

class BaseIter
    : public boost::iterator_adaptor<
         BaseIter,                         // This class type for CRTP
         std::vector<Derived>::iterator,   // Underlying iterator type
         Base >                            // Desired value_type
{
public:
    BaseIter()
      : iterator_adaptor() {}
    explicit BaseIter( std::vector<Derived>::iterator iter )
      : iterator_adaptor(iter) {}
}; 
```

（您可能想要`const Base`而不是`Base`作为`value_type`。）

# ruby-on-rails - 在种子文件中创建 Rails 期间防止 API 调用

> ID：15395430
> 
> 赞同：0
> 
> 时间：2013-03-13T20:07:56.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, geokit

我有一个使用 geokit 的 rails 模型，其中包括`acts_as_mappable :auto_geocode=>true`调用类似`before_validation :geocode_address, :on => :create`. 但是，我的问题是我的开发数据库有一个种子文件，它调用 Rails 模型，然后在创建时调用它，它调用外部 API 并在我没有连接到互联网时失败。我可以使用哪些方法？

如果该方法同时涵盖了这种情况以及当我运行我的测试时，那就太好了，但是我已经为那些不是很漂亮的测试解决了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:12:06.483

你可以尝试这样的事情：

```
# /db/seeds.rb

ModelName.class_eval { acts_as_mappable(:auto_geocode => false) }

# Create seed models...

ModelName.class_eval { acts_as_mappable(:auto_geocode => true) } 
```

这甚至可能有效，

```
ModelName.acts_as_mappable(:auto_geocode => false) 
```

**编辑：**

另一种解决方案是`skip_callback`方法：

```
ModelName.skip_callback(:validation, :before, :auto_geocode_address) 
```

# python - 突出显示行 wxgrid

> ID：15395432
> 
> 赞同：1
> 
> 时间：2013-03-13T20:07:59.387
> 
> 标签：python, model-view-controller, grid, wxpython

我一直在寻找一些解决方案，但我没有得到它。

当日期结束时，我想突出显示 wx.Grid 中的行。

有什么功能可以做到这一点吗？

```
<i>        
def load_grid_fare (self, fares):
   for i, j, k in fares :
      self.grid_fare.SetCellValue(count_rows,0,str(i.fare_id))
        self.grid_fare.SetCellValue(count_rows,1,str(j.service_name).encode('utf8'))
        self.grid_fare.SetCellValue(count_rows,2,str(k.vehicle_type_name).encode('utf8'))
        self.grid_fare.SetCellValue(count_rows,3,str(i.fare_cash))
        self.grid_fare.SetCellValue(count_rows,4,str(i.fare_startdate.strftime("%d/%m/%Y")))
        self.grid_fare.SetCellValue(count_rows,5,str(i.fare_enddate.strftime("%d/%m/%Y")))
        count_rows += 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:13:53.183

你需要看一下 wxPython 演示，它可以从 wxPython 网站下载。其中有几个示例展示了如何更改单元格、行或列的颜色。在演示中，它显示您需要创建一个 GridCellAttr() 对象并执行以下操作：

```
attr = wx.grid.Grid.GridCellAttr()
attr.SetBackgroundColour(wx.RED)
self.SetRowAttr(5, attr) 
```

其中“self”指的是 wx.grid.Grid。上面的代码将第 6 行的背景颜色设置为红色。

# excel - Excel 计数函数

> ID：15395433
> 
> 赞同：0
> 
> 时间：2013-03-13T20:07:59.977
> 
> 标签：excel, function, ms-office

嗨，我有一列数字，其中一些以“083”、“082”或“086”等开头……（数字格式示例：083-5694878）。我想知道的是：是否有一个函数可以让我计算以 083 或 082 开头的单元格的数量？请记住，我有一个大约 70 000 人的名单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:14:29.173

如果数据被格式化为文本（如果“-”是单元格内容的一部分，则必须是文本），那么您可以将 COUNTIF 与“通配符”一起使用，例如，对于 A 列中的数据，此公式将计算以“083”开头的那些"

`=COUNTIF(A:A,"083*")`

或者如果单元格中有 083，例如 D2，请使用此公式

`=COUNTIF(A:A,D2&"*")`

# asp.net-mvc - 如何将 LINQ 从视图传递到视图

> ID：15395439
> 
> 赞同：0
> 
> 时间：2013-03-13T20:08:15.910
> 
> 标签：asp.net-mvc, linq, razor

这是我在控制器中的 Linq

```
 List<ProfitsModel> prof = new List<ProfitsModel>();

            var categories =
                from p in prof
                group p by p.IdCategory.Name into g
                select new { Category = g.Key, TotalUnitsInStock = g.Sum(p => p.Value) };

            return View(categories); 
```

如何在我的视图中看到这个选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:18:46.357

看起来您正在构建**匿名**对象的集合。您应该做的是，创建一个 ViewModel 并通过更新投影部分在您的 LINQ 查询中使用它。因此，它返回一个匿名项目列表，而是返回一个视图模型类实例的列表

```
public class StockDetail
{ 
  public string CategoryName { set;get;}
  public int TotalItems { set;get;}
} 
```

现在在您的 GET 操作方法中，更新 LINQ 表达式的投影部分并将结果加载到`StockDetail`

```
public ActionResult GetCategories()
{
   List<ProfitsModel> prof =GetCollectionOfProfitsModelFromSomewhere();
   var items= from p in prof
                group p by p.IdCategory.Name into g select new StockDetail
                   { Category = g.Key, TotalUnitsInStock = g.Sum(p => p.Value) };
  return View(items);
} 
```

将您的视图强类型化为 StockDetails 集合

```
@model List<StockDetail>

@foreach(item in Model)
{
  <p>@item.Category </p>
  <p>@item.TotalUnitsInStock.ToString()</p>

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:12:07.290

将模型绑定到视图并向模型添加列表或可枚举属性。然后，您可以直接在视图中对可枚举对象进行 foreach，并在已定义的 HTML 结构中渲染出每个项目。

如果您的模型是匿名类型，那么您可以使用 ViewBag/ViewData 来存储结果。

# asp.net - 将gridview上模板字段的值分配给变量

> ID：15395440
> 
> 赞同：0
> 
> 时间：2013-03-13T20:08:23.680
> 
> 标签：asp.net, gridview, templatefield

我知道如何获得事件 `templatefield`内部的价值：`RowDataBound`

```
Control ctrl = e.Row.FindControl("Drop_Responsaveis");  
DropDownList ddl = ctrl as DropDownList;
ddl.items.add(something); 
```

但我需要在活动中获得它的价值`button_Click`......我该怎么做？

**@Siz S 答案的解决方案**

```
foreach (GridViewRow gvr in GridView1.Rows)
   {
     string str = ""
     Control ctrl = gvr.FindControl("Drop_Responsaveis");
     if (ctrl != null)
        {
           DropDownList ddl = ctrl as DropDownList;
           str= ddl.SelectedItem.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:16:00.970

你可以得到 gridview TemplateField 控件为

```
foreach (GridViewRow row in yourGrid.Rows)
{
     Control ctrl = row.FindControl("Drop_Responsaveis");
     DropDownList ddl = ctrl as DropDownList;
     ddl.items.add(something);
 } 
```

# asp.net - Umbraco 多文件上传上传按钮不显示在上传选项卡中

> ID：15395449
> 
> 赞同：0
> 
> 时间：2013-03-13T20:08:59.203
> 
> 标签：asp.net, umbraco

我已经浏览了 Umbraco 论坛，但没有运气。我的上传选项卡正在显示，但按钮没有显示，我之前遇到过这个错误并且没有运气让它工作。

该软件包说它已成功安装，但上传按钮未显示在上传选项卡内，我检查了 firebug 并且没有出现错误。

有没有其他人有这个错误？或者知道解决方法吗？谢谢

# azure - 如何检测 Windows Azure 中的恶意活动 - 在 Azure 实例上查看传入 HTTP 请求的方法？

> ID：15395450
> 
> 赞同：1
> 
> 时间：2013-03-13T20:09:01.250
> 
> 标签：azure, azure-sql-database

自 18 个月以来，我在 Azure + SQL Azure 上托管了一个非常稳定的应用程序。

从星期一开始，我在 SQL Azure 中随机出现长时间的死锁，这只会阻止数据库中的任何更新数小时。

然后就过去了。然后它回来了。

这与实例无关，因为网站的“阅读”部分是可以的。

*   我确实在每个读者请求上使用 WITH (NOLOCK)，因为在我的情况下我的一致性并不重要。所以 azure 中的 datareader 确实有效，但每次更新都会引发 SQL 超时连接。

*   我确实在 Windows Azure SQL 中使用重试逻辑来处理暂时性故障。

*   一个集中的数据库服务于几个网站，每天的访问量约为 25,000 次，自 18 个月以来我从未遇到过问题，当前的流量与上周一切正常时相比没有增加。

我不知道会发生什么。我第一次发现自己被困在云端，没有具体的方法来控制任何事情。

也许是攻击。那么如何在 Azure 中检测到呢？有没有办法在 Azure 实例上查看传入的 HTTP 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:12:18.607

虽然分析请求是一个起点，但另一个起点是准确了解数据库中正在发生的事情。这就是你要解决问题的地方，对吧？如果您能找到恶意查询，那么您应该可以更好地追踪源头。不幸的是，Windows Azure SQL 数据库没有为您提供 SQL Server 可用的完整选项（例如分析），但有一些帮助。查看[系统视图](http://msdn.microsoft.com/en-us/library/windowsazure/ee336238.aspx)— [sys.dm_exec_query_stats](http://msdn.microsoft.com/en-us/library/windowsazure/hh977102.aspx)和[sys.dm_tran_active_transactions](http://msdn.microsoft.com/en-us/library/ms174302.aspx)可能是开始的好地方。浏览**每一个视图，****准确**理解**每个都显示什么。这将使您比现在更好地了解数据库中正在发生的事情，无论您的具体问题如何，这都是很好的信息。**

 **如果您可以进行重新部署，请绝对尝试[Newrelic](http://newrelic.com/)，它是一个代理，它可以将自己作为分析器连接到您的应用程序，并提供大量有用信息。如果您遇到严重问题，即使您只是在解决问题时注册试用期也是值得的。请注意，Newrelic 开始工作有点繁琐，并且似乎不支持 Azure 上的 .NET 4.5 目标平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:15:21.243

快速谷歌搜索一下，您应该可以找到描述如何从 Azure 导出 IIS 日志的文章。然后您就可以解析它们，就像您在本地运行 IIS 一样。

但是，如果您遇到这些问题并且它们在您没有进行更改的情况下突然开始，您可能希望直接联系 Microsoft 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:47:14.237

您可以查看管理门户中的 CPU 活动，尽管它可能允许您收集一些信息。您的网络角色是否正在收集服务器日志？如果是这样，您可以使用像[Cerebrata 诊断管理器](http://cerebrata.com/Products/AzureDiagnosticsManager/)这样的工具来可视化日志文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:13:51.400

如果您不介意使用第三方服务和产品，并且需要主动监控当前请求/秒或 SQL Azure 数据库上的负载（主动查询、阻塞查询、打开连接等） - 请查看 AzureWatch @ [http： //www.paraleap.com](http://www.paraleap.com) - 这是一项专门用于 Azure 的监控服务，会在几秒钟内提醒您您的角色或 SQL Azure 数据库出现任何问题。**

# javascript - 二维数组 - 将对象添加到字段

> ID：15395455
> 
> 赞同：1
> 
> 时间：2013-03-13T20:09:10.517
> 
> 标签：javascript, arrays

我创建了一个数组：

```
var test = new Array(5);
for (i=0; i<=5; i++)
{
 test[i]=new Array(10);
} 
```

现在我想向该字段添加对象：

```
test[0][5].push(object); 
```

但出现错误：

> 未捕获的类型错误：无法调用未定义的方法“推送”

我使用“push”是因为我想在这个字段中放入 0-4 个对象，但我不知道到底有多少个对象。我应该如何更改它以使其正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:16:15.083

该表达式`test[0]`引用了一个新的 Array 实例，由以下行创建：

```
test[i]=new Array(10); 
```

*但是，*该数组中没有任何内容。因此，`test[0][5]`指的是未定义的对象。您需要先将其初始化*为*数组，然后才能`push()`对其进行处理。例如：

```
test[0][5] = []; // Set [0][5] to new empty array
test[0][5].push(object); // Push object onto that array 
```

甚至：

```
test[0][5] = [object]; // Set [0][5] to one item array with object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:17:03.487

```
var test = new Array(5);
for (i=0; i<=5; i++)
{
  test[i]=new Array();
} 
```

这将让您创建一个多维数组。变量 test 中的每个元素都是一个数组。

从这里你可以做

```
test[0].push("push string");
test[0].push("push string2"); 
```

从这里

```
test[0][1] will contain "push string2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:12:35.147

将“<=”更改为“<”。

```
for (i = 0; i < 5; i++) 
```

数组是从零开始的，所以如果你有一个有 5 个插槽的数组并且你想访问你将使用的最后一个插槽：

```
anArray[4] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:15:27.787

在使用 push 之前询问值是一个数组

```
if(test[0][5] instanceof  Array)
    test[0][5].push(object); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:15:40.293

```
test[0][5] = new Array(); // you need initialize this position in Array
test[0][5].push(object); // and then push object 
```

或者

```
test[0][5] = [object]; // directly create a new Array with object 
```

但如果你只想在这个位置有一个对象，你应该这样做：

```
test[0][5] = object; 
```

# mysql - MySQL导出导入后表数据不完整

> ID：15395458
> 
> 赞同：3
> 
> 时间：2013-03-13T20:09:15.050
> 
> 标签：mysql, import, export

我们正在尝试将一个非常重的表（大约 23GB）从托管服务器迁移到其中运行 MySQL 实例的虚拟私有云。

对于我们拥有的所有其他（较小的）表，以下过程完美运行：

转储和压缩源服务器上的数据：

```
mysqldump -u user -p db table | gzip > table.gz 
```

使用 rsync 将数据发送到云中的服务器：

```
rsync -avz -e ssh root@gold.net:/path/table.gz . 
```

使用以下命令将数据导入 MySQL：

```
gzip -dc < table.gz | mysql -u user -h {LOCAL IP OF DB INSTANCE} -p db 
```

当对大表（同样，大约 23GB）使用此过程时，目标数据库中缺少行（这已被多次测试）。许多行确实加载成功，但很明显丢失了大量数据。

.gz 文件的 MD5 在源服务器和目标服务器上都是相同的。

这里还有什么可能出错的地方？

# .net - 一个 .NET 解决方案，有两个项目（具有不同的引用），使用相同的源代码？

> ID：15395469
> 
> 赞同：0
> 
> 时间：2013-03-13T20:09:43.910
> 
> 标签：.net, visual-studio-2008, visual-c++

情况是这样的：我有一个访问一些外部硬件的应用程序。为此，我以 .NET 框架的形式使用硬件供应商提供的 API。这里没问题，我只是在框架中添加一个项目引用就可以了。

但是现在我希望能够构建一个“独立”版本的应用程序，除了访问硬件之外，它做的事情完全相同。**我的目的是在使用相同**源文件的相同解决方案中创建一个新项目。它不应该有对框架的项目引用，然后我想我可以使用一些简单`#define`的方法来禁用访问框架的部分。

但我无法弄清楚如何做到这一点。如果我将一个新项目添加到同一个解决方案中，Visual Studio 似乎会将文件（文件->添加现有）复制到新项目目录中。而且由于我将继续处理这些文件，我真的不想复制它们。

主要问题是所需的驱动程序非常庞大，客户不想将它们安装在所有 PC 上，而只是安装在实际使用硬件的单个 PC 上。

我使用 Visual Studio .NET 2008 和 C++，该项目是一个 Windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:12:30.977

添加现有文件时，将它们添加为链接。

> 从**添加**按钮下拉列表中，选择**添加为链接**。

![添加为链接](../Images/26df77a0a30ba0964eb56a6bab2d326d.png)

这在 MSDN 文章[How to: Add Existing Items to a Project 中有](http://msdn.microsoft.com/en-us/library/9f4t9t92.aspx)描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:48:48.097

我认为创建一个新的构建配置而不是一个具有相同源文件的完全独立的项目会更好。本质上，配置就像拥有单独的项目，例如，您可以将其设置为调试或发布。在您的情况下，创建一个新配置，并针对该条件修改项目设置（包括引用）。然后您可以在两种配置之间切换。从构建菜单进入配置管理器。您对项目设置所做的任何更改都适用于当前配置。

# ios - 在 iOS 上使用 JSONP

> ID：15395472
> 
> 赞同：0
> 
> 时间：2013-03-13T20:09:53.207
> 
> 标签：ios, json, ios5, cross-domain, jsonp

我目前的`JSONP`研究表明，使它与众不同的一件事`JSON`是它能够在跨域环境中获取数据。

但从开发的角度来看，特别是原生 iOS 和 JS HTML 之类的 Web 技术。会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:41:21.813

原生 iOS 应用程序没有跨域限制。您可以在任何暴露的地​​方进行交流。

对于在 PhoneGap 等原生 shell 中运行的 Web 应用程序，使用 AJAX 与 JSON 数据服务进行通信，也不存在跨域限制。例如，PhoneGap 在 file:// 协议上运行，它不必遵守同域 AJAX 限制。

对于在 Safari 中运行并使用 AJAX 与 JSON 数据服务进行通信的 Web 应用程序，将应用跨域限制。在这种情况下可以使用 JSONP。

# macos - 为什么我在使用 vim 时在 OS X 上没有 crontab 条目？

> ID：15395479
> 
> 赞同：79
> 
> 时间：2013-03-13T20:10:20.877
> 
> 标签：macos, vim, cron

我想在我的 Mac 上使用 cron。我之所以选择它`launchd`，是因为我也希望能够在 Linux 上使用我的新知识。但是，我似乎无法让`crontab -e`命令正常工作。它启动 vim，我进入我的测试工作：

```
0-59 * * * * mollerhoj3 echo "Hello World" 
```

但是在保存并退出后（`:wq`），

```
crontab -l 
```

说：

```
No crontab for mollerhoj3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-05-24T09:48:24.570

只需按照以下步骤操作：

1.  在终端：`crontab -e`.
2.  按`i`进入 vim 的插入模式。
3.  输入您的 cron 作业，例如：

    ```
    30 * * * * /usr/bin/curl --silent --compressed http://example.com/crawlink.php 
    ```

4.  按`Esc`退出 vim 的插入模式。

5.  键入`ZZ`退出 vim（必须是大写字母）。
6.  您应该看到以下消息：`crontab: installing new crontab`。您可以使用 来验证 crontab 文件`crontab -l`。

但是请注意，根据文件的内容，这可能不起作用`~/.vimrc`。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-09-15T21:25:13.053

我从来没有遇到过这个问题，但我创建了一个 ~/.crontab 文件并编辑它（它允许我备份它，Time Machine 或其他），然后运行

```
crontab ~/.crontab 
```

已经为我工作了 20 多年，涉及多种风格的 unix。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-01-17T19:22:50.560

**注意**：*说使用`ZZ`命令的答案在我的 Mavericks 系统上对我不起作用，但这可能是由于我的 vim 配置中的某些问题，因为如果我从 pristine 开始`.vimrc`，则接受的答案有效。如果其他解决方案不起作用，我的回答可能对您有用。*

`crontab -e`在 MacOS X 上，根据 crontab 手册页，需要就地编辑创建的 crontab 临时文件。Vim 默认不就地编辑（*但它可能会做一些特殊情况来支持`crontab -e`*），所以如果你的`$EDITOR`环境变量设置为`vi`（默认）或`vim`，编辑 crontab 总是会失败。

要让 Vim 就地编辑文件，您需要执行以下操作：

```
:setlocal nowritebackup 
```

这应该使您能够在`crontab -e`使用`:wq`or`ZZ`命令时更新 crontab。

您可以在 .vimrc 中添加一个自动命令，以使其在编辑 crontab 时自动工作：

```
autocmd FileType crontab setlocal nowritebackup 
```

另一种方法是添加`setlocal nowritebackup`to `~/.vim/after/ftplugin/crontab.vim`，如果您启用了 Filetype 插件，它将在您编辑 crontab 文件时由 Vim 自动加载。如果您在多个平台上使用 vim 文件，还可以检查操作系统：

```
""In ~/.vim/after/ftplugin/crontab.vim
if has("mac")
  setlocal nowritebackup
endif 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-03-13T20:22:17.080

不鼓励在 OS X 上使用 cron。 `launchd`改为使用。尝试`man launchctl`开始。您必须创建特殊的 XML 文件来定义您的作业，并将它们放在具有特定权限的特殊位置。

你通常只需要弄清楚`launchctl load`

[http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/launchctl.1.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/launchctl.1.html)

[http://nb.nathanamy.org/2012/07/schedule-jobs-using-launchd/](http://nb.nathanamy.org/2012/07/schedule-jobs-using-launchd/)

**编辑**

如果您确实想在 OS X 上使用 cron，请查看以下答案：[https ://superuser.com/a/243944/2449](https://superuser.com/a/243944/2449)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-13T23:11:36.880

我做了两件事来解决这个问题。

1.  我触摸了这个链接 [coderwall.com/p/ry9jwg](http://coderwall.com/p/ry9jwg)中描述的 crontab 文件（感谢@Andy）。
2.  使用 Emacs 而不是我的默认 vim：（`EDITOR=emacs crontab -e`我不知道为什么 vim 不起作用）

`crontab -l`现在打印 cronjobs。现在我只需要弄清楚为什么 cronjobs 仍然没有运行 ;-)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-31T22:38:52.077

# cron 和 launchd 的区别

如前所述，不推荐使用 cron（但受支持），建议 OS X 使用 launchd。

这取自[developer.apple.com](https://developer.apple.com/library/mac/documentation/macosx/conceptual/bpsystemstartup/chapters/ScheduledJobs.html)

## 睡眠和关机的影响

如果系统关闭或休眠，cron 作业不会执行；在下一个指定时间出现之前，它们不会运行。

如果您通过设置 StartCalendarInterval 键来安排已启动的作业，并且在作业应该运行时计算机处于睡眠状态，则您的作业将在计算机唤醒时运行。但是，如果在作业本应运行时机器关闭，则作业在下一个指定时间发生之前不会执行。

当计算机关闭或睡眠时，将跳过所有其他已启动的作业；在下一个指定时间出现之前，它们不会运行。

因此，如果计算机始终在作业的预定时间关闭，则 cron 作业和已启动的作业都不会运行。例如，如果您总是在晚上关闭计算机，则计划在凌晨 1 点运行的作业将永远不会运行。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-23T15:44:38.203

在用户 crontab ( `crontab -e`) 中不要放置用户字段。

正确的 cron 是：

```
0-59 * * * * echo "Hello World" 
```

带有用户字段的语法`/etc/crontab`仅适用于：

```
0-59 * * * * mollerhoj3 echo "Hello World" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-01T05:06:32.080

该错误`crontab: temp file must be edited in place`是由于 vim 处理备份文件的方式造成的。

要将 vim 与 cron 一起使用，请在**.bash_profile中添加以下行**
`export EDITOR=vim`
`alias crontab="VIM_CRONTAB=true crontab"`

来源文件：
`source .bash_profile`

然后在你的**.vimrc**添加：
`if $VIM_CRONTAB == "true" set nobackup set nowritebackup endif`

这将在将 vim 与 cron 一起使用时禁用备份。您将能够使用`crontab -e`添加/编辑 cronjobs。

成功保存 cronjob 后，您将看到以下消息：
`crontab: installing new crontab`

来源：
[http ://drawohara.com/post/6344279/crontab-temp-file-must-be-edited-in-place](http://drawohara.com/post/6344279/crontab-temp-file-must-be-edited-in-place)[在此处输入链接描述](http://drawohara.com/post/6344279/crontab-temp-file-must-be-edited-in-place)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-16T16:10:04.820

其他选项是根本不使用`crontab -e`。相反，我使用了：

```
(crontab -l && echo "1 1  * * *  /path/to/my/script.sh") | crontab - 
```

请注意，您之前打印的任何内容都`| crontab -`将替换整个 crontab 文件，因此请使用它`crontab -l && echo "<your new schedule>"`来获取以前的内容和新的计划。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-13T21:14:16.710

由于一些权限问题，以前的帖子对我不起作用，我发现创建一个单独的 crontab 文件并使用 -u 参数将其添加到用户的 crontab 中，而 root 对我有用。

```
sudo crontab -u {USERNAME} ~/{PATH_TO_CRONTAB_FILE} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-29T11:50:27.113

以上混合了正确的答案。对我来说有完全相同的错误有用的是：

1）编辑你的bash配置文件

> $ cd ~ && vim .bashrc

2）在您的 bash 配置文件中，确保默认编辑器是 vim 而不是 vi（这会导致问题）

> 导出编辑器=vim

3）编辑你的vim配置文件

> $cd ~ && vim .vimrc

4) 确保 set backupcopy 在你的 .vimrc 中是 yes

> 设置备份复制=是

5）重启终端

6) 现在尝试 crontab 编辑

> $ crontab -e
> 
> 10 * * * * 回声“你好世界”

您应该看到它正确地创建了 crontab 文件。如果您退出 vim（ZZ 或 :wq）并使用以下命令列出 crontab；您应该会看到新的 cron 作业。希望这可以帮助。

> $ crontab -l

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-01T17:20:20.023

**使用其他文本编辑器**

```
env EDITOR=nano crontab -e 
```

或者

```
env EDITOR=code crontab -e 
```

# asp.net-mvc-3 - 让 Ext.JSON.decode() 解析看起来像“/Date(0000000000000-0000)/”的 .net 日期时间字符串

> ID：15395483
> 
> 赞同：0
> 
> 时间：2013-03-13T20:10:30.737
> 
> 标签：asp.net-mvc-3, extjs, dst

我有一些包含时间戳的序列化 json，例如：

`"TimeStamp": "/Date(1362898800000-0700)/",`

如果正确解析，应该是：

`Sat Mar 09 2013 23:59:59 GMT-0700 (Mountain Standard Time)`

但它被解析为

`Sat Mar 09 2013 17:00:00 GMT-0700 (Mountain Standard Time)`

我有几个问题，第一个可能有助于回答第二个：

A) 这种格式叫什么？

B) 我怎样才能让 Ext.JSON.decode() 正确解析这些字符串，或者我应该将它从 .NET 更改为什么格式，才能让 Ext.js 正确处理它？

我已经搜索并只找到了[http://evilcroco.name/2010/12/make-extjs-parse-net-date-format-in-json/](http://evilcroco.name/2010/12/make-extjs-parse-net-date-format-in-json/)但它有点过时了。我只是在寻找一个正确方向的点，并且会在我去的时候用代码更新。

**奖金问题！**

在遵守夏令时的时区中的图表上绘制数据的一些最佳实践或标准是什么？它应该转换为UTC吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:22:25.223

日期已被正确解析，它是产生影响的文化。您正在客户端解析日期，因此它考虑到您当前`-7`来自 GMT 的文化。

考虑将所有日期保存为 UTC，永远不会太晚，一旦应用程序增长，这些日期时间问题就会失控。

由于您使用的是.net，您可以考虑使用[noda time](http://code.google.com/p/noda-time)

这是一个很好的 SO 答案，它可能会帮助您[夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

# jsp - 如何将 AjaxServlet 的响应发送到 JSP div 以获得 qq.fileUploader 功能

> ID：15395484
> 
> 赞同：0
> 
> 时间：2013-03-13T20:10:31.977
> 
> 标签：jsp, jsf, jsf-2, valums-file-uploader

在我的 JSP 页面中，我使用了以下 ajax 调用（valuems-file-uploader）并且文件上传成功。JSF 正确调用适当的 Servlet。我正在检查上传的文件并在 Servlet 中进行服务器端验证。我不确定如何将消息打印回同一个 JSP 的 div。例如。如果字段为空，文件将不会上传，但我还想显示一条自定义消息。到目前为止，我已经以字符串格式存储了消息。我有 HttpServletResponse 对象，但不确定如何将此自定义字符串传递回 JSP 页面。

感谢您的任何帮助或建议:)

```
 new qq.FileUploader({
            element: document.getElementById('file-uploader-demo1'),
            allowedExtension: 'xls|xlsx',
            action: '.....', 
            debug: true,
            onSubmit : function(file, ext){
                // change button text, when user selects file           

            },

            onComplete: function(id, fileName, responseJSON){
                if(!responseJSON.success)
                { //console.log (responseJSON.message); 

                    showErrorBulkOrder();
                }
                else{
                    showSubmitBulkOrder();
                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:13:32.720

这是我采取的方法。我想列出它是否对面临类似问题的任何人有帮助：

在 Servlet 中：

在 post 方法中添加了以下行：

```
 JSONObject jsonObj = new JSONObject(); 
     if (orders == null || orders.size() == 0){
          jsonObj.put("success",false);
      }else{
         jsonObj.put("success",true);
      }
     response.getWriter().print(jsonObj);
     response.setContentType("text/html"); 
```

这样，我还可以添加更多包含来自 Servlet 端的消息的对象。

在 XHTML PAGE 中：同上。

# sql-server-2008 - SQL Server：单行结果，对子表进行 2 次调用

> ID：15395487
> 
> 赞同：0
> 
> 时间：2013-03-13T20:10:42.507
> 
> 标签：sql-server-2008, parent-child

我已经搜索过，但可能没有正确表达我的搜索词。我真的可以对以下简单查询使用一些设计帮助。

我有一个列出游戏的父表

```
GAMENUM     HOMEID     AWAYID
1             25         29
2             12         17
3             13         12 
```

团队表

```
TEAMID    TEAMNAME
12        Blue 
13        Yellow
17        Red
25        Pink
29        White 
```

我需要的是一个查询来获得一个类似的列表

```
GAMENUM    HOMEID    AWAYID   HOMETEAM     AWAYTEAM
1          25        29       Pink         White
2          12        17       Blue         Red
3          13        12       Blue 
```

如果没有与 ID 相关联的团队代码，我仍然希望返回游戏记录，但如果找不到，则 HOMETEAM 或 AWAYTEAM 名称为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:21:46.580

试试这个：

```
SELECT DISTINCT p.GAMENUM, p.HOMEID, p.AWAYID, t1.TEAMNAME [HOMETEAM], t2.TEAMNAME [AWAYTEAM]
FROM [Parent] p
LEFT JOIN Team t1 ON t1.TEAMID = p.HOMEID
LEFT JOIN Team t2 ON t2.TEAMID = p.AWAYID 
```

测试用例：

```
WITH [Parent] AS (SELECT * FROM (
    SELECT 1 [GAMENUM], 25 [HOMEID], 29 [AWAYID] UNION ALL
    SELECT 2, 12, 17 UNION ALL
    SELECT 3, 13, 12) as [Parent]),

[Team] AS (
    SELECT * FROM (
    SELECT 12 [TEAMID], 'Blue' [TEAMNAME] UNION ALL
    SELECT 13, 'Yellow' UNION ALL
    SELECT 17, 'Red' UNION ALL
    SELECT 25, 'Pink' UNION ALL
    SELECT 29, 'White') as [Team])

SELECT p.GAMENUM, p.HOMEID, p.AWAYID, t1.TEAMNAME [HOMETEAM], t2.TEAMNAME [AWAYTEAM]
FROM [Parent] p
LEFT JOIN Team t1 ON t1.TEAMID = p.HOMEID
LEFT JOIN Team t2 ON t2.TEAMID = p.AWAYID 
```

请检查**[SQL Fiddle](http://sqlfiddle.com/#!6/2ce79/1)**以获取测试用例结果

# curl - 批处理脚本获取 html 站点并解析内容（无需 wget、curl 或其他外部应用程序）

> ID：15395490
> 
> 赞同：3
> 
> 时间：2013-03-13T20:10:58.620
> 
> 标签：curl, batch-file, html-parsing, wget

我只需要使用 windows cmd 功能。我需要来自网站的两个变量/字符串在批处理脚本中用于验证操作。为了不让它太简单，这个网站还需要认证。

我在某处发现了这个：

```
@set @x=0 /*
:: ChkHTTP.cmd
@echo off
setlocal
set "URL=http://www.google.com"
cscript /nologo /e:jscript "%~f0" %URL% | find "200" > nul
if %ErrorLevel% EQU 0 (
echo Web server ok % Put your code here %
) else (
echo Web server error reported
)
goto :EOF

JScript */
var x=new ActiveXObject("Microsoft.XMLHTTP");
x.open("GET",WSH.Arguments(0));x.send();
while (x.ReadyState!=4) {WSH.Sleep(50)};
WSH.Echo(x.status) 
```

但是我不确定是否也可以通过这种方式获取网站内容而不是状态答案，而且我越不知道如何对此实施网站身份验证。

上面的代码不能正常工作，因为它总是会因为管道而产生错误，但这似乎更接近我解析我希望的内容的需要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T20:15:51.047

我只使用过 wget 从 Windows 批处理脚本中获取 Web 内容。通过 JScript 使用 XHR 是一个绝妙的主意！

但是您试图掠夺的脚本似乎是用于检查 Web 服务器是否响应，而不是用于获取内容。

通过一些修改，您可以使用它来获取网页并执行您需要的任何处理。

```
@if (@a==@b) @end /*

:: fetch.bat <url>
:: fetch a web page

@echo off
setlocal
if "%~1"=="" goto usage
echo "%~1" | findstr /i "https*://" >NUL || goto usage

set "URL=%~1"
for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (
    rem process the HTML line-by-line
    echo(%%I
)
goto :EOF

:usage
echo Usage: %~nx0 URL
echo     for example: %~nx0 http://www.google.com/
echo;
echo The URL must be fully qualified, including the http:// or https://
goto :EOF

JScript */
var x=new ActiveXObject("Microsoft.XMLHTTP");
x.open("GET",WSH.Arguments(0),true);
x.setRequestHeader('User-Agent','XMLHTTP/1.0');
x.send('');
while (x.readyState!=4) {WSH.Sleep(50)};
WSH.Echo(x.responseText); 
```

# javascript - 如果某个 URL，使用 Jquery 更改 iframe 主体的背景图像

> ID：15395494
> 
> 赞同：0
> 
> 时间：2013-03-13T20:11:09.973
> 
> 标签：javascript, jquery, iframe

我使用以下 jQuery 脚本来读取页面 URL，并据此更改背景图像：

**我的脚本的排序版本：**

```
var url = window.location.href;
if (url.search("food") > 0){
    alert('Example: use image 1');
} else {
    alert('Example: use image 2');
} 
```

当页面*独立*加载时，此脚本运行良好。但是，从 调用页面时它不起作用`iframe`，这意味着脚本无法读取父窗口的 URL。有没有办法从调用的页面中获取父窗口的 URL `iframe`？我希望这是有道理的。

**- 编辑 -**

我可以完全控制两个页面：带有 的页面`iframe`和在`iframe`. 也许另一种选择是在*父*页面中有一个脚本来更改页面的背景图像`iframe`。

**- 解决方案 -**

`parent.document.location.href`成功了，因为我`iframe`在同一个域中但在不同的子域中，所以我还必须声明：`document.domain = "myurl.com"`. 所以我现在的最终脚本是：

```
document.domain = "mydomain.com";
var url = parent.document.location.href;
if (url.search("food") > 0){
    alert('Example: use image 1');
} else {
    alert('Example: use image 2');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:16:51.667

尝试`window.parent.location.href`从 iframe 使用。只要 iframe 和父级都在同一个域上，这可以工作。

另外，请参阅此相关帖子：[从 iframe 访问父 URL](https://stackoverflow.com/questions/3420004/access-parent-url-from-iframe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:31:48.140

操作，

[此解决方案](http://plnkr.co/edit/evGubLPq4GrsFAK4EeYv?p=preview)使用 jQuery 访问（相同域）iframe 的内容/应用 css 样式。

# python - 用空替换元组中的元素

> ID：15395495
> 
> 赞同：1
> 
> 时间：2013-03-13T20:11:10.287
> 
> 标签：python, tuples

这是我的元组模式：

```
(name, age, weight)

UserList = (('steve', 17, 178), ('Mike', 19, 178),('Pull', 24, 200),('Adam', 15, 154)) 
```

我想检查年龄是否小于 18 我想用 ( , , ) 替换该用户的元组

所以最终结果看起来像

```
(('', , ), ('Mike', 19, 178),('Pull', 24, 200),('', , )) 
```

我试过了

```
UserList = list(UserList) 

for i,e in enumerate(UserList):
    if e[1] < 18:
        temp=list(UserList[i])
        for f, tmp in enumerate(temp):
            del temp[:] 
```

但它没有用，任何想法或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:13:00.527

```
In [13]: UserList = tuple((n, a, w) if a >= 18 else ('', None, None) for (n, a, w) in UserList)

In [14]: UserList
Out[14]: (('', None, None), ('Mike', 19, 178), ('Pull', 24, 200), ('', None, None)) 
```

# android - 是否可以从 Android 服务调用 getevent？

> ID：15395496
> 
> 赞同：0
> 
> 时间：2013-03-13T20:11:12.330
> 
> 标签：android, android-service, android-permissions

是否可以从 Android 服务运行 getevent 并获得类似于在开发机器上运行 adb 以从命令提示符调用 getevent 时看到的输出？当我尝试类似的事情时：

```
ProcessBuilder builder = new ProcessBuilder()
    .command("getevent")
    .redirectErrorStream(true)
    .start();
BufferedReader reader = new BufferedReader(new InputStreamReader(builder.getInputStream()));
... 
```

我为每个设备获得的输出如下所示：

无法打开 /dev/input/event[n]，权限被拒绝

由于Android的安全保护，是否无法访问这样的低级信息？有可能在“根”设备上吗？

为什么我要这样做：我想在 Android 设备上记录用户的操作（触摸和手势事件）以进行可用性测试。无障碍服务似乎是要走的路，但信息不够详细。例如，对于滑动手势，我无法获取用户滑动位置的屏幕坐标。我在想，从触摸屏获取低级输入可能会让我获得更详细的信息。也许有更好的方法来做到这一点？（我是Android世界的新手。这种事情在Windows上很容易。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T12:02:21.230

你可以这样做。

```
th = new Thread(new Runnable(){
        private Process exec;

        @Override
        public void run() {
            try {
                exec = Runtime.getRuntime().exec(new String[]{"su","-c","getevent -t " + device});
                InputStreamReader is = new InputStreamReader(
                        exec.getInputStream());
                String s;
                BufferedReader br = new BufferedReader(is);
                while(((s = br.readLine()) != null) && run){
                    ...
                }
                is.close();
                exec.destroy();
            } catch (IOException e) {
                e.printStackTrace();
            } 
} 
```

必须使用**'su' 获取 root 权限**，但这样无法获取**实时**事件，因为**缓冲区大小为 4k**，包含 4k 数据后才能获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:14:59.767

搜索 UIAutomator。这会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T12:35:24.053

您的手机必须**root**才能执行 getevent/sendevent 命令。

一种方法是从 Play 商店安装任何终端仿真器，例如 [Qute: Command Console & Terminal Emulator](https://play.google.com/store/apps/details?id=com.ddm.qute&hl=en)。

在终端输入以下内容：

1）`su`（它将获得所需的root访问权限`getevent`）

2） `getevent`（或`getevent -c 8`仅输出 8 行，否则会淹没终端）

# doctrine-orm - ZF2 Doctrine Entity findAll

> ID：15395497
> 
> 赞同：2
> 
> 时间：2013-03-13T20:11:15.957
> 
> 标签：doctrine-orm, zend-framework2

能够使用 Doctrine 加速了很多事情，但是让我不得不在我的所有控制器中设置/使用实体管理器感觉有点笨拙。我希望将所有数据库逻辑放在 1 个特定模块中。也许我只是想错了方向，有人可以指出我正确的方向。

目前我有我的实体，它的功能很好，我可以通过以下方式很好地插入数据库

```
namespace Manage\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class ViewController extends AbstractActionController {
    public function somethingAction(){
        $objectManager = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
        $user = new \Manage\Entity\User();
        $user->setname('foo');
        $user->settitle('bar');        
        $objectManager->persist($user);
        $objectManager->flush();
    }
} 
```

但是，每当我想从数据库中*选择*一些东西时，我必须确保添加

```
 use Doctrine\ORM\EntityManager; 
```

然后是以下控制器功能列表...

```
/**
 * @var EntityManager
 */
protected $entityManager;

/**
 * Sets the EntityManager
 *
 * @param EntityManager $em
 * @access protected
 * @return PostController
 */
protected function setEntityManager(EntityManager $em) {
    $this->entityManager = $em;
    return $this;
}

/**
 * Returns the EntityManager
 *
 * Fetches the EntityManager from ServiceLocator if it has not been initiated
 * and then returns it
 *
 * @access protected
 * @return EntityManager
 */
protected function getEntityManager() {
    if (null === $this->entityManager) {
        $this->setEntityManager($this->getServiceLocator()->get('Doctrine\ORM\EntityManager'));
    }
    return $this->entityManager;
} 
```

一旦我添加了所有这些，我现在可以像这样在我的 getsomethingAction 中进行查询......

```
public function getsomethingAction() {
    $repository = $this->getEntityManager()->getRepository('Manage\Entity\User');
    $list = $repository->findAll();
    var_dump($list);
    return new ViewModel();
} 
```

对我来说这感觉很笨拙......我可以在不需要所有额外功能的情况下进行插入，但我不能进行选择？是否可以扩展实体类以获取通过调用 $repository = $this->getEntityManager()->getRepository('Manage\Entity\User'); 提供的 find/findAll 等功能 直接在实体内部？

我的意思是我希望能够像设置数据时那样直接在实体上运行查找...如下所示：

```
public function getsomethingAction(){
    $list = new \Manage\Entity\User();
    $l = $list->findAll();
    var_dump($l);
    return new ViewModel();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:54:25.667

好的，到目前为止，我的主要目标是将复杂的逻辑从控制器中移出到可重用的模型中。因此，通过这个示例答案，我正在创建一个复杂逻辑所在的接口，但它也允许我仍然使用控制器中的模型从数据库中获取数据......这是模型......

```
namespace Manage\Model;

use Doctrine\ORM\EntityManager;

class ApiInterface {

    /**
     * @var EntityManager
     */
    protected $entityManager;
    protected $sl;

    /**
     * Sets the EntityManager
     *
     * @param EntityManager $em
     * @access protected
     * @return PostController
     */
    protected function setEntityManager(EntityManager $em) {
        $this->entityManager = $em;
        return $this;
    }

    /**
     * Returns the EntityManager
     *
     * Fetches the EntityManager from ServiceLocator if it has not been initiated
     * and then returns it
     *
     * @access protected
     * @return EntityManager
     */
    protected function getEntityManager() {
        if (null === $this->entityManager) {
            $this->setEntityManager($this->sl->get('Doctrine\ORM\EntityManager'));
        }
        return $this->entityManager;
    }

    public function __construct($ServiceLocator) {
        $this->sl = $ServiceLocator;
    }

    public function get() {
        $repository = $this->getEntityManager()->getRepository('Manage\Entity\ApiList');
        return $repository;
    }

    public function set() {
        return new \Manage\Entity\ApiList();
    }

    public function save($data) {
        $objectManager = $this->sl->get('Doctrine\ORM\EntityManager');
        $objectManager->persist($data);
        $objectManager->flush();
    }

    public function doComplexLogic($foo,$bar){
        // Can now use both set() and get() to inspect/modify/add data
    }

} 
```

所以现在在我的控制器中，我可以做一些从表中获取一些基本数据的事情，比如：

```
public function getapiAction() {
    $api = new \Manage\Model\ApiInterface($this->getServiceLocator());
    var_dump($api->get()->findAll());
    return new ViewModel();
} 
```

为了从控制器快速设置数据，我可以这样做：

```
public function setapiAction() {
    $apiInterface = new \Manage\Model\ApiInterface($this->getServiceLocator());
    $api= $apiInterface->set();
    $user->setfoo('blah');
    $user->setbar('moo');
    $apiInterface->save($api);
    return new ViewModel();
} 
```

它还允许我通过像这样从控制器中消除复杂性来从控制器运行复杂的逻辑......

```
public function complexAction(){
    $foo = $this->params()->fromQuery();
    $bar = $this->params()->fromPost();
    $apiInterface = new \Manage\Model\ApiInterface($this->getServiceLocator());
    $apiInterface->doComplexLogic($foo, $bar);
} 
```

如果这个答案是做事的正确方法，请在评论中告诉我，我意识到它非常简单和通用，但我想保持这种方式，以便其他人可以理解是什么/为什么以及这是否是一个好方法/不是等.

# c# - Web 服务没有返回所有数据

> ID：15395500
> 
> 赞同：0
> 
> 时间：2013-03-13T20:11:31.287
> 
> 标签：c#, web-services, webmethod

我试图创建一个 Web 服务，它将连接到 SQL 数据库并返回存储在那里的所有链接。

到目前为止，我已经编写了这段代码，它只返回插入数据库的最后一个链接。

我创建了这个方法来获取链接：

```
public static string GetLinks()
{
   string query = string.Format("SELECT Link FROM Linkovi");

   try
   {
       conn.Open();
       command.CommandText = query;

       SqlDataReader reader = command.ExecuteReader();

       while (reader.Read())
       {
           query = reader["Link"].ToString();
       }

       reader.Close();
    }
    finally
    {
       conn.Close();
    }

    return query;
} 
```

然后我在这里像这样调用这个方法：

```
[WebMethod]
public string GetLinks()
{
    return ConnectionClass.GetLinks();
} 
```

因此，如果有人可以帮助我，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:13:34.473

您总是覆盖查询的结果。

```
query = reader["Link"].ToString(); 
```

尝试以下操作：

```
// store the links in a list
var list = new List<string>();
...
while (reader.Read()) {
    list.Add(reader["Link"].ToString());
}
...
// return the list of links
return list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:15:02.370

您已将查询声明为字符串，因此每次都会被覆盖。考虑使用高效的 stringbuilder 并将链接附加到它。

```
 string query = string.Format("SELECT Link FROM Linkovi");
    StringBuilder result = new StringBuilder();
    try
        {
            conn.Open();
            command.CommandText = query;

            SqlDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                result.Append(reader["Link"].ToString());
            }
            reader.Close();
        }
        finally
        {
            conn.Close();
        }
        return result.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:16:16.207

您只保存最后一个结果。创建一个集合，并将结果添加到集合中，并将集合值连接在一起，或者更改方法的返回类型，使其返回集合而不是单个`string`.

```
public static string GetLinks()
{
    string query = string.Format("SELECT Link FROM Linkovi");

    try
    {
        conn.Open();
        command.CommandText = query;

        List<string> links = new List<string>();
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                links.Add(reader["Link"].ToString());
            }
        }
    }
    finally
    {
        conn.Close();
    }

    return string.Join(",", links); // You can change the delimiter here to something else.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T20:16:20.640

您的`GetLinks`方法只返回一个字符串。每次通过循环，您执行：

```
query = reader["Link"].ToString(); 
```

所以只返回一个字符串。

如果要返回所有链接，则需要构建一个列表，并将这些字符串添加到列表中。或者，也许，将字符串添加到 a`StringBuilder`中，用换行符或其他东西分隔：

```
StringBuilder sb = new StringBuilder();

while (reader.Read())
{
    sb.Append(reader.["Link"].ToString());
    sb.Append("\n");
}

return sb.ToString(); 
```

在您的客户端代码中，您希望将它们分开：

```
string rslt = ConnectionClass.GetLinks();
string[] links = string.Split(new char[] {'\n'}, StringSplitOptions.RemoveEmptyEntries); 
```

# jquery - 如果在其他地方单击事件后未选中该组，如何为单选按钮分配默认值？

> ID：15395506
> 
> 赞同：0
> 
> 时间：2013-03-13T20:11:46.107
> 
> 标签：jquery, radio-button

由于用户对另一个无线电组的操作，如何使用 Jquery 将默认值分配给另一个脚本未选中的无线电组？

页面上只有一个图像可以分配值“主要”或“次要”。但底部的两个值（“keep”或“delete”）不是独占的，可以应用于页面上的任何图像。该列由正常的单选按钮组行为控制。

通过 jQuery 有 2-way 排他性。（[http://css-tricks.com/radio-buttons-with-2-way-exclusivity/](http://css-tricks.com/radio-buttons-with-2-way-exclusivity/)）

```
<div class="dlab-image-blocks text-center"><img width="150" height="150" src="http://mrtwebdesign.local/ddd/wp-content/uploads/2013/02/Desert1-150x150.jpg" class="attachment-thumbnail" alt="Desert">
  <div class="dlab-ctrl btn-group btn-group-vertical padtop20">
    <label class="btn btn-primary">
      <input type="radio" id="primary871" name="col-871 " class="rbtn" data-row="1" value="primary">Primary
    </label>
    <label class="btn">
      <input type="radio" id="secondary871" name="col-871 " data-row="2" class="rbtn" value="secondary">Secondary
    </label>
    <label class="btn keep">
      <input type="radio" id="keep871" name="col-871 " class="rbtn keep" value="keep" checked="checked">Unused, but keep
    </label>
    <label class="btn">
      <input type="radio" id="delete871" name="col-871 " class="rbtn" value="delete">Delete image
    </label>
  </div> <!-- dlab-ctrl btn-group btn-group-vertical padtop20 -->
</div> 
```

我要分配的默认值是用于值为“keep”的输入。我有几种不同的选择方式。但页面上任何会触发脚本的操作都将在另一个无线电组中。

```
<script>
    $('label').click(function() {
        if ($('input:radio[name|="col"]').length == 0){
           $(this).filter(".keep").attr('checked',true);
        }
    });
</script> 
```

我认为这仅适用于单击的单选按钮组。但点击将始终在另一个组上。

+++++++++++++++++++++++++++++++++++++++++++更新。JSFIDDLE 中的示例：http: [//jsfiddle.net/mrtwebdesign/fQUX3/](http://jsfiddle.net/mrtwebdesign/fQUX3/)

+++++++++++++++++++++++++++++++++++++++++++我最近的尝试。我试图调整页面上的其他工作脚本。仍然不确定我在做什么。

我更新了上面的 jsfiddle 链接

```
setTimeout(function() {
    var attached, elm;
    $("input[type=radio]").click(function () {
        elm = $(this);
        attached = elm.data("attached");
        if ($("input[data-attached=" + attached + "]").length == 0){
        elm.filter('.keep').prop("checked", true);
        }
    });
},500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:40:33.307

经过几个小时的实验，我终于弄明白了。

我已将 jsfiddle 重新设置为工作版本。 [http://jsfiddle.net/mrtwebdesign/fQUX3/](http://jsfiddle.net/mrtwebdesign/fQUX3/)

所以..我能够将它整合到一个脚本中。它在匹配值上设置了 'data-row=' 的单选按钮集强制执行双向排他性。如果一个组最终不受检查。将选中该组中具有“保留”类的单选按钮（即默认值）

```
var row, el, groupName;

$("input[type=radio]").click(function() {
    el = $(this);
    row = el.data("row");
    $("input[data-row=" + row + "]").prop("checked", false);
    el.prop("checked", true);
    groupName = $(this).attr("name");
    $(".rbtn").each(function(idx)
     {
         if($(this).attr("name") != groupName)
         {
         $(this).filter(".keep").prop("checked", true);
         }
     });
}); 
```

# powershell - 在 PowerShell 中返回 DataRow 的行数

> ID：15395510
> 
> 赞同：4
> 
> 时间：2013-03-13T20:11:58.837
> 
> 标签：powershell, powershell-3.0

我的脚本正在从 SQL Server 中的存储过程填充数据行。然后，我在整个脚本中引用此数据行中的特定列。我要做的是添加功能，如果行数 = 0，则执行操作 X，如果行数 = 1，则执行操作 Y，如果行数 > 1，则执行操作 Z。

```
-- PowerShell script snippet

# $MyResult is populated earlier; 
# GetType() returns Name=DataRow, BaseType=System.Object

# this works
ForEach ($MyRow In $MyResult) {

    $MyFile = Get-Content $MyRow.FileName
    # do other cool stuff
}

# this is what I'm trying to do, but doesn't work
If ($MyResult.Count -eq 0) {
    # do something
}
ElseIf ($MyResult.Count -eq 1) {
    # do something else
}
Else {
    # do this instead
} 
```

如果我使用数组，我可以让 $MyResult.Count 工作，但是我不能直接引用 $MyRow.FileName。

这可能很简单，但我是 PowerShell 和面向对象语言的新手。我已尝试搜索此站点、脚本专家的博客和 Google，但我无法找到任何可以告诉我如何执行此操作的内容。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T21:31:39.960

它与您的填充方式有关`$MyResult`。如果您像这样查询数据库

```
$MyResult = @( << code that returns results from database >> ) 
```

也就是说，将返回数据库中的数据集/数据表的代码包含在 中`@( ... )`，然后返回的行数将很容易使用`$MyResult.count`.

如果您以这种方式填充 $MyResult，您的原始代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-06T23:16:59.620

我知道这个线程很旧，但如果其他人在 Google 上找到它，这也应该适用于 PS V5：

替换`$MyResult.Count`为：`($MyResult | Measure-Object | select -ExpandProperty Count)`

例如：
`If (($MyResult | Measure-Object | select -ExpandProperty Count) -eq 0)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T21:33:28.377

我没有PS和SQL的经验，但我会尽力为你提供答案。如果您的 object`$myresult`是`datarow`-object，则意味着您只有一行。如果结果为空，则`$myresult`通常为空。

如果你得到一个或多个行，你可以把它们放在一个数组中并计算它。但是，如果你`$myresult`是空的，并且你把它放在一个数组中，它仍然会算作一个，所以我们需要注意这一点。试试这个：

```
If ($MyResult -eq $null) {
    # do something if no rows
}
Else If (@($MyResult).Count -eq 1) {
    # do something else if there are 1 rows.
    # The cast to array was only in the if-test, 
    # so you can reach the object with $myresult.
}
Else {
    # do this if there are multiple rows.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T02:40:41.920

看起来这个问题得到了很多意见，所以我想发布我是如何处理这个问题的。:)

基本上，对我来说，解决方法是更改​​我用来在 SQL Server 上执行查询的方法。我切换到 Chad Miller 的 Invoke-SqlCmd2 脚本：[TechNet: Invoke-SqlCmd2](http://gallery.technet.microsoft.com/scriptcenter/7985b7ef-ed89-4dfd-b02a-433cc4e30894#content "TechNet：调用-SqlCmd2")，即

```
# --------------- 
# this code works
# ---------------

# Register the function
. .\Invoke-Sqlcmd2.ps1

# make SQL Server call & store results to an array, $MyResults
[array]$MyResults = Invoke-Sqlcmd2 -Serve
rInstance "(local)" -Query "SELECT TOP 1 * FROM sys.databases;"

If ($MyResult -eq $null) {
    # do something
}
ElseIf ($MyResult.Count -eq 1) {
    # do something else
}
Else {
    # do this instead
} 
```

# iphone - NSInvalidArgumentException 与 UITableView？

> ID：15395512
> 
> 赞同：0
> 
> 时间：2013-03-13T20:12:05.660
> 
> 标签：iphone, xcode, uitableview, compiler-errors

我正在为课堂制作一些信息指南。我需要使用UITableView，少这个东西看起来像废话，所以我已经研究了大约一个星期。

我收到的错误是以下代码中的 NSInvalidArgumentException：

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section{
/*NSDictionary *dict = [_allPerks objectAtIndex:section];
NSArray *temp = [dict objectForKey:@"Perks"];
return [temp count];*/
if (section == 0)
    return 9;
else if (section ==1)
    return 7;
else if (section ==2)
    return 11;
else if (section == 3)
    return 11;
else if (section == 4)
    return 8;
else
    return 0;

} 
```

至少，我认为它就在那里。该错误表明我的问题出在该函数中，它的发件人无效。注释的代码是我的第二次尝试，但没有成功。

这也是一个分组表，以防万一。我正在使用一组数组来实现这一点，因为我需要组织很多元素。如果代码是必要的，就这么说吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:16:52.557

确保您的方法签名与此匹配：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

而不是这个：

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:56:20.540

试试这个代码

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    if (section == 0){
          return 9;
    }
    else if (section ==1){
          return 7;
    } 
    else if (section ==2){
          return 11;
    }
    else if (section == 3){
          return 11;
    }
    else if (section == 4){
          return 8;
    }
    else{
          return 0;
    }
} 
```

# objective-c - 目标c中的char *数组

> ID：15395514
> 
> 赞同：1
> 
> 时间：2013-03-13T20:12:06.880
> 
> 标签：objective-c, c

我有交流字符串，需要将其分成几行（此时我不会为它们制作一个 NSString）。有没有像 NSMutableArray 这样的东西，我可以把这个 char * 放进去？或者我怎样才能实现它从字符串中制作一些我以后可以通过索引访问的东西？

目前我做

```
char *cline = strtok(data, "\n");
            while(cline)
            {
...
} 
```

或者当我从磁盘读取文件时更容易做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:22:42.587

使用[NSValue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)将您的 char* 存储在 NSMutableArray

> 概述
> 
> NSValue 对象是单个 C 或 Objective-C 数据项的简单容器。它可以保存任何标量类型，例如 int、float 和 char，以及指针、结构和对象 ID。此类的目的是允许将此类数据类型的项添加到集合中，例如 NSArray 和 NSSet 的实例，这要求它们的元素是对象。NSValue 对象总是不可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:28:52.743

你不能将 C/C++ 指针插入到 NSMutableArray 中，除非它被包装在像 NSValue 或其他 Objective-C 类这样的容器中。

如果你想要一个 NSMutableArray，将它转换为 NSString 会容易得多。

```
NSArray* strings = [[NSString initWithCString:data encoding:NSUTF8StringEncoding] componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]]; 
```

如果您严格地想留在 C/C++ 领域，您的其他选择是拥有一个字符串向量或一个 char* 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T02:11:24.833

正如其他人已经指出的那样，要将原始 C 类型（例如 a ）存储在 Obj-C 对象（例如 的实例）中`NSMutableArray`，您需要首先将它们包装在`NSValue`对象中。

作为这样做的替代方案 - 如果您想在 Obj-C 中使用纯 C 字符串，请不要忘记您可以自由地将 C 与 Objective-C 源代码混合，因此使用普通 C 数组是一个完全合法的解决方案也。

通过将值包装到 obj-c 数组中，您可以获得边界检查和可变性，但如果您继续解开这些值以将它们作为 C 字符串处理，您可能最好坚持使用普通的旧 C 字符串开始，以节省开销。

如果你想创建一个 NSString，你可以简单地使用`NSString`便捷方法`stringWithFormat:`，如下所示：

```
char str[50];

// read characters into the buffer from a file...

// When done, convert to an NSString:
NSString *string = [NSString stringWithFormat:@"%s", str]; 
```

# java - Struts 1.3.10 需要哪个版本的 java

> ID：15395516
> 
> 赞同：0
> 
> 时间：2013-03-13T20:12:09.003
> 
> 标签：java, struts

Struts 1.3.10 需要哪个版本的 java

我计划将 struts 版本从 1.2.9 升级到 1.3.10。请让我知道此升级需要哪个版本的 java？我目前正在使用 java 1.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:18:53.367

从安装[指南](http://struts.apache.org/release/1.3.x/userGuide/installation.html)：`1.3.x`

> Java 开发工具包 - 您必须为您的操作系统平台下载并安装 Java 开发工具包（**1.4 版或更高版本）实现。**

# java - 解析文本文件：效率和性能

> ID：15395517
> 
> 赞同：0
> 
> 时间：2013-03-13T20:12:09.070
> 
> 标签：java, parsing, etl

我在一个与解析文本文件（应用 ETL 方法）相关的小型开发项目中。我创建了一个在我的本地机器上正确运行的演示代码，但是当我将它部署到 Apache Tomcat 容器时，它会产生很多与内存溢出、类型转换等相关的错误。

这是一般事实：

这是[文件结构](https://docs.google.com/spreadsheet/ccc?key=0ArfdLEVE609GdDVydTVSX0E4c29aejFaNE9PY0lDcXc&usp=sharing)（注释指定每个单元格的数据类型和其他相关信息）。

请注意，**RegisterType1**每个客户仅重复一次，**RegisterType2**可以重复一次或多次，**RegisterType3**和**RegisterType4**重复一次。

另请注意，每种寄存器类型的长度都不同，即：RegisterType1 12 个字段，RegisterType2 10 个字段，依此类推。

正如我之前所说，我当前的解析器编码很糟糕，会产生很多错误。[这是实际代码](http://pastebin.com/fzrktzqW)和[这个](http://pastebin.com/FH5J1MAM)（创建数据库连接和执行查询的类）。

这是一个需要解析的[示例文本文件。](http://pastebin.com/aH5ShwNJ)

当前开发环境 **平台**：Java 6 **容器**：Tomcat 7 **VPS 配置文件**：RAM 1.7GB，存储：20GB，处理器：（Intel(R) Xeon(R) CPU X5650 @ 2.67GHz，24 核）。

实际问题：

*   表现不佳
*   内存溢出
*   解析错误：数据类型转换、字段之间的分隔符（分号）（例如：...Paris;Fran[semicolon here]ce;...）

我想创建一个高效、正确和高性能的解析器。

我需要一些关于这个话题的建议。哪个是创建好的解析器的最佳方法？

提前感谢您提供信息。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:28:58.617

在此处发布您的相关代码。好的，我会为你做一些：

```
 BufferedReader reader = null;

    ArrayList< String> elements = new ArrayList< String>();

    try {
        reader = new BufferedReader(new FileReader(archivoFuenteDatos));
        String text = null;

        // repeat until all lines is read
        while ((text = reader.readLine()) != null) {
        ...
        elements.add(...);
        ...
    } catch(...) ...

    saveOnDB(elements); 
```

永远不要读这样的大文件。如果这样做，您必须同时将所有数据保存在内存中。

1.  尝试将每个条目直接写入数据库，而不是先复制到数组列表。这有望修复 OOM。

2.  分析您的代码。如果它足够快，你就完成了。

3.  如果不够快，请创建一个 ArrayList。给它一个初始容量`n`。`n`在写入数据库之前，不超过该列表中的项目。

编辑：如果我没有错过重要的事情，您将自己的代码复制了 4 次。请在发布之前重构（代码太多）。例如，巨大的开关可以重构为这样的：

```
 while ((text = reader.readLine()) != null) {
            String[] campos = text.replaceAll(" +", " ").split(";");
            int n;
            switch (text.charAt(0)) {
                case '1':
                case '2':
                case '3':
                    n = campos.length - 1;
                    break;
                case '4':
                    // what does this mean? It will always give 5!
                    // n = contarPuntoComas(text) == 6 ? 5 : 5;
                    n = 5;
                    break;
                default:
                    n= 0;
            }
            for (int i = 0; i < n; ++i) {
                 elements.add(campos[ i].trim());
            } // end for
        } 
```

# python - django - 如果没有服务器重置，表单字段将不会更新......再次实例化一个类

> ID：15395521
> 
> 赞同：4
> 
> 时间：2013-03-13T20:12:16.077
> 
> 标签：python, django

我有一个从模型中收集数据的表单。问题是如果我更新模型/数据库中的信息，它不会在服务器重新启动之前显示在表单中。

表格.py

```
class RecordForm(forms.Form):
  name = forms.CharField(max_length=255)
  type_choices = []
  choices = Domain.objects.all()
  for choice in choices:
    type_choices.append( (choice.id, choice.name) )
  domain = forms.TypedChoiceField(choices=type_choices)
  type = forms.TypedChoiceField(choices=Record.type_choices)
  content = forms.CharField()
  ttl = forms.CharField()
  comment = forms.CharField() 
```

我正在从域模型中提取数据。在网站上，我有一个页面可以输入域信息。然后是另一个页面，它将在下拉框中列出这些域。但是，如果您添加或删除任何内容，则在您重新启动服务器之前，它不会显示在保管箱中。我的猜测是 django 只调用一次表单类。有没有办法确保它在创建变量时重新运行类代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:18:29.670

```
class RecordForm(forms.Form):
    name = forms.CharField(max_length=255)
    domain = forms.TypedChoiceField(choices=[])
    type = forms.TypedChoiceField(choices=...)
    content = forms.CharField()
    ttl = forms.CharField()
    comment = forms.CharField()

    def __init__(self, *args, **kwargs):
        super(RecordForm, self).__init__(*args, **kwargs)
        self.fields['type'].choices = [(c.id, c.name) for c in Domain.objects.all()] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T20:15:30.963

`Domain`每次实例化 a 时都需要`RecordForm`通过覆盖`__init__`模型表单来获取对象。

```
class RecordForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(RecordForm, self).__init__(*args, **kwargs)
        self.type_choices = [(choice.id, choice.name,) for choice in \
            Domain.objects.all()]

    domain = forms.TypedChoiceField(choices=self.type_choices)
    ... 
```

# java - Swing GUI 应用程序应该由 Event Dispatcher 还是主线程控制？

> ID：15395522
> 
> 赞同：3
> 
> 时间：2013-03-13T20:12:19.220
> 
> 标签：java, multithreading, swing, event-dispatch-thread, invokelater

我读过几本关于 Java 的书。在所有这些中，至少有一章教授 GUI 编程。在所有这些中，创建一个简单的表单应用程序都遵循以下逻辑：

MyFrame.java

```
public class MyFrame extends JFrame
{
    JButton button1;

    public MyFrame()
    {
        button1 = new JButton("Click here.");
    }
} 
```

FrameTest.java：

```
public class FrameTest
{
    public static void main(String[] args)
    {
        MyFrame myFrame = new MyFrame();

        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.setSize(600, 600);
        myFrame.setVisible(true);
    }
} 
```

基本上，只需将 JFrame 子类化以创建表单并将其他组件声明为实例变量并在构造函数中初始化这些组件。然后创建另一个测试类，在该类中实例化框架子类并调用它的一些方法使其可见。

但是在并发课程中，我了解到我们有一个主线程，它在我们创建的每个应用程序中运行 main()。据我所知，当我们使用 Swing 来创建 GUI 应用程序时，我们有另一个线程（Event Dispatcher Thread）。所以如果我没记错的话，在每个基于 Swing 的 GUI 应用程序中至少有两个线程。这使得每个 GUI 应用程序都是多线程的。在我读过的一些文章和教程中，它说 Swing 不支持多线程，因此所有 GUI 组件都应该只在 Event Dispatcher Thread 中创建和修改，否则可能会出现线程干扰和内存不一致错误。

即使在 Wikipedia ( [http://en.wikipedia.org/wiki/Swing_%28Java%29](http://en.wikipedia.org/wiki/Swing_%28Java%29) ) 中最简单的示例中，它也是通过 invokeLater 方法实现的。

那么哪一种才是真正的方法呢？我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:36:16.553

与任何 UI/Swing 组件的所有交互都必须在 EDT 的上下文中完成

启动应用程序时，您应确保在 EDT 中执行，然后再尝试创建任何 Swing 组件/与之交互。

简而言之，您应该使用类似...

```
EventQueue.invokeLater(new Runnable() {
    public void run() {
        // Now in the event dispatching thread
    }
}); 
```

如果您需要运行长时间运行的任务或执行任何阻塞任务，您应该在单独的线程中执行它。 `SwingWorker`在大多数情况下是一个不错的选择，因为它提供了一些简单的机制来将代码重新同步到事件调度线程。

通读一遍

*   [初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)
*   [请问真正的 Swing 单线程规则能站起来吗？](http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/)

所以，简短的回答是，是的，所有基于 Swing 的代码都应该从 EDT 的上下文中访问/修改/交互

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T20:55:46.287

> 所以如果我没记错的话，在每个基于 Swing 的 GUI 应用程序中至少有两个线程

是的。一个是主线程，另一个是 EDT（事件调度线程）。

> 这使得每个 GUI 应用程序都是多线程的。

是的。但在这种情况下，另一个线程不与 GUI 组件交互。

> Swing 不支持多线程，因此所有 GUI 组件只能在 Event Dispatcher 线程中创建和修改，否则可能会出现线程干扰和内存不一致错误。

是的，绝对正确。这意味着一次只有一个线程应该与给定的 GUI 组件交互。
Swing 程序员处理以下类型的线程：

*   [Initial threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，执行初始应用程序代码的线程。
*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)，所有事件处理代码都在其中执行。大多数与 Swing 框架交互的代码也必须在这个线程上执行。
*   [工作线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，也称为后台线程，执行耗时的后台任务。

> 程序员不需要提供显式创建这些线程的代码：它们由运行时或 Swing 框架提供。程序员的工作是*利用这些线程*来创建一个响应迅速、可维护的 Swing 程序。

# html - Html divs 表如

> ID：15395523
> 
> 赞同：0
> 
> 时间：2013-03-13T20:12:19.570
> 
> 标签：html, vertical-alignment, css-tables

我想知道如何在 html 中创建两个像对象一样的表。我需要这两个“表格”在右侧一个，另一个在页面的左侧。这样它们就像平行表一样。每当我尝试使用 div 时，左侧的位置非常好，但右侧看起来像是另一个的延续，我的意思是它的垂直对齐在中间的某个地方，就在第一个结束的地方“表”结束。

html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>

<link type="text/css" rel=stylesheet1 href="stylesheet1.css"/>
<title>Maths lessons</title>

</head>

<body background="img.jpg">
<h1 id="h1">
<center><B>Maths lessons</B></center></h1>
</h1>
<hr/>

 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>
 <div class="div1">Geometry</div>

 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>
 <div class="div2">Geometry</div>

</body>

</html> 

.div1
 {
width:10%;
border-radius:10px;
height:2%;
float:left;

}

 .div2
{
width:10%;
border-radius:10px;
height:2%;
float:right;

  #h1
 {
 font-family:Times,serif;
 width:1000px;
 height:50px;
 text-align:center;
 margin:auto;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:05:14.433

这里有一些可以提供帮助的东西（单击链接并尝试、更改并再次运行）：

[http://jsbin.com/amiyur/1/edit](http://jsbin.com/amiyur/1/edit)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<link type="text/css" rel=stylesheet1 href="stylesheet1.css"/>
<title>Maths lessons</title>

</head>

<body background="img.jpg">
<h1 id="h1">
<center><B>Maths lessons</B></center></h1>
<hr/>

<div class='my-table red'>
 <div class="div1">Geo</div>
 <div class="div1">Geo</div>
 <div class="div1">Geo</div>
</div>

<div class='my-table blue'>
 <div class="div2">Geo</div>
 <div class="div2">Geo</div>
 <div class="div2">Geo</div>
</div>

<div class='clear'></div>
<div class='white' style='width:100px; height:50px;'></div>
</body>

</html> 

.div1
 {
width:50px;
border-radius:10px;
height:20px;
float:left;
display: table-cell;
}

 .div2
{
width:50px;
border-radius:10px;
height:20px;
float:right;
}

#h1
 {
 font-family:Times,serif;
 width:1000px;
 height:50px;
 text-align:center;
 margin:auto;
 }

.my-table {
    float:left; 
}

.red {background-color: red;}
.blue {background-color: blue;}
.white {background-color: white;}

.clear {clear:both;} 
```

# java - 选择和 MenuDetection 从不同的 TrayIcon 创建弹出菜单（OSX）

> ID：15395528
> 
> 赞同：2
> 
> 时间：2013-03-13T20:12:45.343
> 
> 标签：java, menu, swt, selection, trayicon

我正在使用 SWT 开发一个 OSX 应用程序，并且系统托盘中有一个 TrayIcon。我让它工作了，但是有一件小事真的让我很烦恼。当您右键单击该图标时，上下文菜单将按照我的意图显示。

[![](../Images/ef0b66f9e55893519da478256923eee9.png)](https://i.stack.imgur.com/M2R3v.png)

（右键点击）

但是，当我左键单击时，它只会弹出菜单。

[![](../Images/3a52983ce4a561f2db790a77a80e0463.png)](https://i.stack.imgur.com/lt98Q.png)

（左键单击）

如何使左键单击的行为与右键一样？

两者的代码几乎相同：

```
 item.addListener (SWT.Selection, new Listener () {
        public void handleEvent (Event event) {
            menu.setVisible(true);
        }
    });

    item.addListener (SWT.MenuDetect, new Listener () {
        public void handleEvent (Event event) {
            menu.setVisible (true);
        }
    }); 
```

如果有人想查看整个项目的代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Menu;
import org.eclipse.swt.widgets.MenuItem;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tray;
import org.eclipse.swt.widgets.TrayItem;
import org.eclipse.wb.swt.SWTResourceManager;

public class Icon {

public static void main(String[] args) {
Display display = new Display ();
Shell shell = new Shell (display);
shell.setVisible(false);

final Tray tray = display.getSystemTray ();
if (tray == null) {
    System.out.println ("The system tray is not available");
} else {
    final TrayItem item = new TrayItem (tray, SWT.NONE);
    item.setToolTipText("Test Tool Tip");

    final Menu menu = new Menu (shell, SWT.POP_UP);

    MenuItem mi = new MenuItem (menu, SWT.PUSH);
    mi.setText ("View Messages");
    mi.addListener (SWT.Selection, new Listener () {
        public void handleEvent (Event event) {
            System.out.println("Messages will be displayed.");
        }
    });

    new MenuItem(menu, SWT.SEPARATOR);

    MenuItem mi1 = new MenuItem (menu, SWT.PUSH);
    mi1.setText ("Help");
    mi1.addListener (SWT.Selection, new Listener () {
        public void handleEvent (Event event) {
            System.out.println("Help will be displayed.");
        }
    });

    MenuItem mi2 = new MenuItem (menu, SWT.PUSH);
    mi2.setText ("Version 1.0");

    item.addListener (SWT.DefaultSelection, new Listener () {
        public void handleEvent (Event event) {
            menu.setVisible (true);
        }
    });

    item.addListener (SWT.Selection, new Listener () {
        public void handleEvent (Event event) {
            menu.setVisible(true);
        }
    });

    item.addListener (SWT.MenuDetect, new Listener () {
        public void handleEvent (Event event) {
            menu.setVisible (true);
        }
    });
    item.setImage(SWTResourceManager.getImage(Icon.class, "/main/black.png"));
}

while (!shell.isDisposed ()) {
    if (!display.readAndDispatch ()) display.sleep ();
}
display.dispose ();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T08:56:21.500

如果您只添加 this( 并删除 SWT.DefaultSelection 和 SWT.Selection 部分) ，这将按预期工作

```
item.addListener (SWT.MenuDetect, new Listener () {

                                @Override
                                public void handleEvent(
                                        org.eclipse.swt.widgets.Event event) {
                                    menu.setVisible (true);

                                }
                            }); 
```

# android - 状态栏始终在屏幕上

> ID：15395529
> 
> 赞同：1
> 
> 时间：2013-03-13T20:12:51.797
> 
> 标签：android, android-softkeyboard

美好的一天（或晚上，或晚上）我正在为安卓开发一个应用程序，我对一件事非常好奇。我有一个活动，用户与另一个人聊天，比如“im”聊天。底部有一个 EditText，顶部有某种操作栏。我需要的是当用户输入消息并且软件键盘在屏幕上时，我的活动应该向上移动，但操作栏仍然应该“粘”在屏幕顶部，因为它上面有一些有价值的控件。同样，这不是 ActionBar，而只是父垂直线性布局中的 48dp 高度布局。所以我需要知道当布局移出屏幕时，是否有一种简单的方法可以防止它移到顶部。我试图把所有东西都放在 FrameLayout 中，然后把这个栏放在上面，但是在键盘打开时它也会离开屏幕......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:26:22.300

使用 RelativeLayout 作为您的基本布局并将 android:layout_alignParentTop="true" 添加到您的操作栏以保持它

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/action_bar_layout"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_alignParentTop="true" >
    </LinearLayout>

    <TextView
        android:id="@+id/text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:18:04.450

在 AndroidManifest 的 Activity 上，您应该输入以下内容： android:windowSoftInputMode="adjustResize"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:18:18.673

使用这样的东西：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <com.myapp.MyActionBar
        android:layout_width="match_parent"
        android:layout_height="48dp"/>

    <LinearLayout
        android:id="@+id/mylayout"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1dp"/>

    <!-- Add your edittext and button -->

</LinearLayout> 
```

这将确保操作栏和 edittext + 按钮始终在屏幕上，并且`mylayout`占据屏幕的其余部分。当你的键盘出现时，它`mylayout`会缩小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:18:20.520

尝试将 android:windowSoftInputMode="adjustResize" 添加到清单中的活动。这告诉 Android 在键盘出现时完全调整布局的大小，而不是平移它。请注意，如果整个布局没有足够的空间，这仍然不起作用。但是如果您的顶级布局是RelativeLayout，您应该能够使其工作，编辑文本设置为底部对齐，顶部栏对齐顶部，中间部分为fill_parent并且位于编辑文本上方和下方酒吧。

# ruby-on-rails - 从 RubyOnRails 视图调用 SH 脚本 - 之后传递参数并重定向到文件系统上的 html 文件

> ID：15395533
> 
> 赞同：0
> 
> 时间：2013-03-13T20:12:55.173
> 
> 标签：ruby-on-rails, ruby

ruby 新手，我在尝试从视图 (index.html.erb) 中执行 SH 脚本时偶然发现了以下问题。我做了以下事情：

app\views\tests\index.html.erb

```
<%= link_to 'Run it', :action=>'callthis' %> 
```

app\controllers\tests_controller.rb

```
def callthis
  puts "I was called!"
      # system call here
end 
```

我收到以下错误

```
ActionController::RoutingError (No route matches {:action=>"callthis", controller=>"tests"}):
app/views/tests/index.html.erb:20:in `_app_views_tests_index_html_erb__911976670__617626598'
app/views/tests/index.html.erb:4:in `each'
app/views/tests/index.html.erb:4:in `_app_views_tests_index_html_erb__911976670__617626598'
app/controllers/tests_controller.rb:7:in `index' 
```

编辑：路线

```
tests     GET    /tests(.:format)                             tests#index
          POST   /tests(.:format)                             tests#create
new_test  GET    /tests/new(.:format)                         tests#new
edit_test GET    /tests/:id/edit(.:format)                    tests#edit
test      GET    /tests/:id(.:format)                         tests#show
          PUT    /tests/:id(.:format)                         tests#update
      DELETE /tests/:id(.:format)                         tests#destroy 
```

编辑 2：感谢 Zippy，我看到 hello 是输出，但是，它也给了我以下错误：

```
Hello
Started GET "/tests/callthis" for 10.10.9.141 at Wed Mar 13 16:29:22 -0400 2013
Processing by TestsController#callthis as HTML
Completed 500 Internal Server Error in 6ms

ActionView::MissingTemplate (Missing template tests/callthis, application/callthis with     {:handlers=>[:erb, :builde
:formats=>[:html], :locale=>[:en]}. Searched in:
  * "/mnt/wt/ruby/wtrorp/app/views"
): 
```

编辑3：

从“测试”的角度来看，我只想执行“测试控制器”中定义的“callthis”。该 def 将只是一个执行 SH 脚本的系统调用，并重定向到它生成的输出文件到文件系统。我希望将两个参数传递给它：一个字符串（在测试对象'test.script'中）和一个id（我想从浏览器会话中提取）。我意识到问题变得更加困难，并将更新标题问题以反映它：D

```
system(./callthis.sh test.script $my_id_var) 
```

编辑4：

我希望从 sh 脚本生成一个文件，并重定向到一个静态文件。静态页面将捕获一个变量，并知道 sh 脚本生成的文件是哪个文件，以便它可以将其显示在该静态页面的框架中。也许脱离了这个问题的背景，但有人能指出我正确的方向吗？

提前感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:57:35.567

要解决 Missing Template 错误，您需要渲染一个模板，重定向到一个有效的 url，或者至少调用类似 'render :nothing' 或 'head :ok' 之类的东西，以便告诉 rails 如何响应用户的浏览器.

清理任何用户输入时要非常小心，包括您说要退出会话的 id。假设用户可能已经想出了如何恶意修改它来做坏事，并根据白名单检查它，可能只有数字或类似的东西。运行这样的 shell 脚本是绝对不安全的，除非你非常偏执和小心。维护该应用程序的其他所有人也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:28:09.503

尝试为初学者添加这个：

**配置/路由.rb**

```
resources :tests do
  collection do
    get 'callthis'
  end
end 
```

或者如果您没有这样的多条路线，您可以这样做：（同样的事情）

```
resources :tests do
  get 'callthis', :on => :collection
end 
```

另外，只是一个提示：不要将您的操作命名为`callthis`. 这里没有人知道该操作要做什么，当一段时间过去时您也不会知道。希望我有所帮助。

编辑：在提问者更新路线之后，在我进一步阅读问题之后，我只推荐一件事：

像这样声明你的`callthis`控制器：

```
def callthis
   #perform your sh script
   redirect to tests_path
end 
```

# nuget - nuget 配置转换文件的问题

> ID：15395540
> 
> 赞同：0
> 
> 时间：2013-03-13T20:13:13.753
> 
> 标签：nuget, config-transformation

我正在创建一个 nuget 包，除了其他文件之外，它还包含配置文件，例如：f1.config、f2.config 等。这些配置文件又在 web.config 文件中引用。

由于这些配置文件可能存在也可能不存在于安装此包的项目中，因此我将它们重命名为 f1.config.transform、f2.config.transform。

虽然软件包的安装在所有可能的情况下都可以完美运行，但在一种特定情况下卸载并没有按预期工作。即假设安装前项目中不存在配置文件f2.config，卸载包时不会删除。

有任何想法吗？

编辑：NuGet 规范文件

```
<?xml version="1.0" encoding="utf-8"?>
<package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
    <metadata>
        <id>WCFServicesProxyPackage</id>
        <version>1.0.3</version>
        <title />
        <authors>Shkelzen a. Saraqini</authors>
        <owners>Shkelzen a. Saraqini</owners>
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>WCF services proxy package.</description>
        <language>en-CA</language>
        <references>
            <reference file="WCFServices.Proxy.dll" />
        </references>
    </metadata>
    <files>
        <file src="content\config\system.serviceModel.behaviors.Local.config.transform" target="content\config\system.serviceModel.behaviors.Local.config.transform" />
        <file src="content\config\system.serviceModel.behaviors.Production.config.transform" target="content\config\system.serviceModel.behaviors.Production.config.transform" />
        <file src="content\config\system.serviceModel.behaviors.QA.config.transform" target="content\config\system.serviceModel.behaviors.QA.config.transform" />
        <file src="content\config\system.serviceModel.bindings.Local.config.transform" target="content\config\system.serviceModel.bindings.Local.config.transform" />
        <file src="content\config\system.serviceModel.bindings.Production.config.transform" target="content\config\system.serviceModel.bindings.Production.config.transform" />
        <file src="content\config\system.serviceModel.bindings.QA.config.transform" target="content\config\system.serviceModel.bindings.QA.config.transform" />
        <file src="content\config\system.serviceModel.client.Local.config.transform" target="content\config\system.serviceModel.client.Local.config.transform" />
        <file src="content\config\system.serviceModel.client.Production.config.transform" target="content\config\system.serviceModel.client.Production.config.transform" />
        <file src="content\config\system.serviceModel.client.QA.config.transform" target="content\config\system.serviceModel.client.QA.config.transform" />
        <file src="content\Web.config.transform" target="content\Web.config.transform" />
        <file src="lib\net40\WCFServices.Proxy.dll" target="lib\net40\WCFServices.Proxy.dll" />
    </files>
</package> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:01:48.040

你如何安装/卸载配置文件？您能否分享一些脚本中的 PowerShell 片段（假设您在包中使用 PowerShell install.ps1/uninstall.ps1 脚本）？

也许您可以强制删除文件：[http ://www.timvw.be/2011/10/18/force-the-removal-of-a-file-with-powershell/](http://www.timvw.be/2011/10/18/force-the-removal-of-a-file-with-powershell/)

此外，如果 XDT 成为 OSS 以供 NuGet 从中受益，将来很可能会改进此功能。

# objective-c - 将非常大的十进制字符串转换为十六进制？

> ID：15395556
> 
> 赞同：3
> 
> 时间：2013-03-13T20:14:17.040
> 
> 标签：objective-c

我在 NSString 中有一个非常大的十进制数，它太大而无法放入包括 NSDecimal 在内的任何变量中。我是手动做数学的，但如果我不能把这个数字放入一个变量中，那么我就不能把它除掉。那么转换字符串的好方法是什么？

示例输入：423723487924398723478243789243879243978234

输出：4DD361F5A772159224CE9EB0C215D2915FA

[我在这里](https://stackoverflow.com/questions/221154/how-can-i-convert-a-big-decimal-number-to-hex-in-c-sharp-eg-58806359529242495?rq=1)查看第一个答案，但它在 C# 中，我不知道它是客观的 C 等价物。

有没有人有任何不涉及使用外部库的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:31:13.217

如果这就是您所需要的，那么实现起来并不难，特别是如果您愿意使用 Objective-C++。通过使用Objective-C++，你可以使用a`vector`来管理内存，从而简化了代码。

这是我们将要实现的接口：

```
// NSString+BigDecimalToHex.h
@interface NSString (BigDecimalToHex)
- (NSString *)hexStringFromDecimalString;
@end 
```

为了实现它，我们将一个任意精度的非负整数表示为 base-65536 位的向量：

```
// NSString+BigDecimalToHex.mm
#import "NSString+BigDecimalToHex.h"
#import <vector>

// index 0 is the least significant digit
typedef std::vector<uint16_t> BigInt; 
```

“困难”部分是将 a 乘以`BigInt`10 并添加一个十进制数字。我们可以很容易地通过预加载进位的长乘法来实现这一点：

```
static void insertDecimalDigit(BigInt &b, uint16_t decimalDigit) {
    uint32_t carry = decimalDigit;
    for (size_t i = 0; i < b.size(); ++i) {
        uint32_t product = b[i] * (uint32_t)10 + carry;
        b[i] = (uint16_t)product;
        carry = product >> 16;
    }
    if (carry > 0) {
        b.push_back(carry);
    }
} 
```

有了这个辅助方法，我们就可以实现接口了。首先，我们需要`BigInt`为每个十进制数字调用一次帮助方法，将十进制数字字符串转换为 a：

```
- (NSString *)hexStringFromDecimalString {
    NSUInteger length = self.length;
    unichar decimalCharacters[length];
    [self getCharacters:decimalCharacters range:NSMakeRange(0, length)];
    BigInt b;
    for (NSUInteger i = 0; i < length; ++i) {
        insertDecimalDigit(b, decimalCharacters[i] - '0');
    } 
```

如果输入字符串为空或全为零，`b`则为空。我们需要检查一下：

```
 if (b.size() == 0) {
        return @"0";
    } 
```

现在我们需要转换`b`为十六进制数字字符串。的最高有效数字`b`位于最高索引处。为避免前导零，我们将特别处理该数字：

```
 NSMutableString *hexString = [NSMutableString stringWithFormat:@"%X", b.back()]; 
```

然后我们将每个剩余的 base-65536 数字转换为四个十六进制数字，按照从最高有效到最低有效的顺序：

```
 for (ssize_t i = b.size() - 2; i >= 0; --i) {
        [hexString appendFormat:@"%04X", b[i]];
    } 
```

然后我们就完成了：

```
 return hexString;
} 
```

[你可以在这个 gist](https://gist.github.com/mayoff/5156496)中找到我的完整测试程序（作为 Mac 命令行程序运行）。

# ios - 在 UITableView 中点击已选择的单元格时，将调用 willSelectCellAtIndexPath

> ID：15395557
> 
> 赞同：3
> 
> 时间：2013-03-13T20:14:20.313
> 
> 标签：ios, objective-c, uitableview

我有`UITableView`两个部分。基于用户交互（选择和取消选择），我的数据源和`UITableView`更新以在部分之间移动数据。最初它们是第 0 节中的唯一数据。当我点击一个单元格`willSelectCellAtIndexPath`并被`didSelectCellAtIndexPath`调用时。正如预期的那样，当我再次点击同一个单元格时， `didDeselectCellAtIndexPath`会调用它。

即使在我开始将数据向下移动到第 1 部分并选择和取消选择之后，`UITableView's`委托方法也会被适当地调用。

将所有数据移至第 1 节后，`UITableView`开始表现出奇怪的行为。我最初可以选择一个呼叫并被`didSelectCellAtIndexPath`呼叫。但是，当我再次点击它时，`didDeselectCellAtIndexPath`它永远不会被调用。相反，对选定单元格的任何点击（我已经确认它确实是通过`[tableView indexPathsForSelectedCells]`或第 1 节中的任何其他单元格选择的，只会导致`willSelectIndexPath`并被`didSelectIndexPath`调用。

我在这些委托方法中有相当多的代码是不相关的（我相信）......我没有在任何地方显式地更改单元格的选定状态。我已经发布了`willSelect`方法，如果需要可以发布更多。

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath{
if (remainingItemIsSelected && indexPath.section == 0) {
        //other cells in the remaining items section are selected and a cell from that section is being selected

        NSMutableIndexSet *arrayIndexesToBeDeleted = [[NSMutableIndexSet alloc] init];
        for (NSIndexPath *previouslySelectedIndexPath in [tableView indexPathsForSelectedRows]) {
            if (((ReceiptItem *)[self.remainingReceiptItems objectAtIndex:previouslySelectedIndexPath.row]).allocated == YES) {

                //update data sources
                NSLog(@"%@%i%@,%i",@"Section #:",previouslySelectedIndexPath.section,@" Row #:",previouslySelectedIndexPath.row);
                [self.assignedReceiptItems addObject:[self.remainingReceiptItems objectAtIndex:previouslySelectedIndexPath.row]];
                [arrayIndexesToBeDeleted addIndex:previouslySelectedIndexPath.row];

                //update index path arrays
                [self.receiptItemsToDeleteIndexPaths addObject:previouslySelectedIndexPath];
                [self.receiptItemsToAddIndexPaths addObject:[NSIndexPath indexPathForRow:self.assignedReceiptItems.count-1 inSection:1]];

                //update the pressed indexpath to equal to resulting indexpath to pass on to the didSelect method
                if (previouslySelectedIndexPath.row < indexPath.row) {
                    indexPath = [NSIndexPath indexPathForRow:indexPath.row-1 inSection:0];
                }
            }
        }
        //Delete assigned items from the remaining receipt items
        [self.remainingReceiptItems removeObjectsAtIndexes:arrayIndexesToBeDeleted];
        //update table (move allocated item down)
        [tableView beginUpdates];
        [tableView deleteRowsAtIndexPaths:self.receiptItemsToDeleteIndexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
        [tableView insertRowsAtIndexPaths:self.receiptItemsToAddIndexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
        [tableView endUpdates];
        if (self.remainingReceiptItems.count == 0) {
            [tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic];
        }
        //other cells in the remaining items section are selected and a cell from assigned items is being selected
        return nil;
    }
    return indexPath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:05:44.643

从[UITableViewDelegate 的文档中](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)：

> **tableView:willDeselectRowAtIndexPath：**
> 仅当用户尝试选择不同的行时存在现有选择时才调用此方法。为先前选择的行向委托发送此方法。

如果你这样想，你会发现你遇到的是预期的行为。点击选中的行**不会**调用`will/didDeselctRowAtIndexPath`该行。

相反，您可以`didSelectRowAtIndexPath`为选定的行处理这个，即在那里取消选择它。

***可能的替代方案***

话虽如此，我认为你在滥用`UITableView`班级。它真的不是为了做这些动人的事情而设计的。毫无疑问，您已经注意到自己必须编写大量代码才能完成这项工作——这正是您遇到棘手错误的原因。

It seems to me that a much cleaner (and ultimately more flexible) solution would be to have two separate table (or other) views that notify each other via delegates about `datasource` changes. Maybe a bit more work setting it up, but surely much less trouble down the road.

# perl - 格式化日期

> ID：15395562
> 
> 赞同：-5
> 
> 时间：2013-03-13T20:14:30.783
> 
> 标签：perl

2012 年 4 月 9 日可以用以下任何一种方式编写：

```
4912
4/9/12
4-9-12
4 9 12
04-9-12
04-09-12
4 9 2012
4 09 2012
(I think you get the point) 
```

对于那些不明白的人，规则是：

```
1\. Dates may or may not have ` `, `-` or `/` between them
2\. The year can be written as 2 digits (assumed to be dates in the range of [2000, 2099] inclusive) or 4 digits
3\. One digit month/days may or may not have leading zeroes. 
```

您将如何解决问题以将日期格式化为 04/09/12？

我知道日期可能不明确，即 12112 可以是 12/1/12 或 1/21/12，但假设可能是最小的月份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:54:32.253

这实际上是正则表达式擅长的事情；做出假设，继续前进，然后在必要时回溯以获得成功的匹配。

```
s{
    \A 
    ( 1[0-2] | 0?[1-9] )
    [-/ ]?
    ( 3[01] | [12][0-9] | 0?[1-9] )
    [-/ ]?
    ( (?: [0-9]{2} ){1,2} )
    \z
 }
 {
    sprintf '%02u/%02u/%04u', $1, $2, ( length $3 == 4 ? $3 : 2000+$3 )
 }xe; 
```

存在的范围检查虽然不是由月份的值决定的，但应该足以从模棱两可的情况（有一个好的日期）中选择一个好的日期。

请注意，首先尝试两位数的月份和日期很重要；否则 111111 变为 1-1-1111，而不是假定的 11-11-11。但这意味着 11111 会更喜欢 11-1-11，而不是 1-11-11。

如果需要检查有效的月份日期，则应在重新格式化后执行。

笔记：

`s{}{}`是使用花括号而不是 / 来分隔正则表达式的部分以避免必须转义 / 的替换，并且还因为使用成对的分隔符允许打开和关闭模式和替换部分，这对我来说看起来不错。

`\A`匹配被匹配字符串的开头；`\z`匹配结尾。 `^`并且`$`经常用于此目的，但在某些情况下可能具有略微不同的含义；我更喜欢这些，因为它们总是只意味着一件事。

最后的 x 标志表示这是一个扩展的正则表达式，可以有额外的空白或被忽略的注释，因此它更具可读性。（字符类中的空格不会被忽略。） e 标志表示替换部分不是字符串，而是要执行的代码。

`'%02u/%02u/%02u'`是一种 printf 格式，用于获取值并以特定方式对其进行格式化；请参阅[http://perldoc.perl.org/functions/sprintf.html](http://perldoc.perl.org/functions/sprintf.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:17:41.607

安装日期::Calc

在 ubuntu 上 libdate-calc-perl

这应该能够读取所有这些日期（4912、4 9 2012、4 09 2012 除外），然后以通用格式输出它们

# javascript - jquery中的冒号是什么意思？它像 else 语句吗？

> ID：15395563
> 
> 赞同：2
> 
> 时间：2013-03-13T20:14:32.500
> 
> 标签：javascript, jquery

这是一小行代码：

```
data:  {comment: $('#modal_form #note').val(), patient_ids: ids}, 
```

我只是想弄清楚它在“patient_ids：ids”之间使用的参考

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:17:15.783

代码是一个对象字面量

```
{propertyName: "propertyValue"} 
```

的左边`:`是对象属性

右边`:`是属性值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:22:04.303

该`data`对象有两个变量，`comment`并且`patient_ids`

```
data:  {
      comment: $('#modal_form #note').val(),
      patient_ids: ids
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:29:47.507

您提供的代码行是 JavaScript 关联数组的示例，它是键值对的集合：

```
var data = { key1 : value1, key2 : value2, etc... } 
```

您可以读取与 key2 关联的值，如下所示：

```
var v2 = data.key2 
```

为了回答您的问题，冒号将值与键相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:40:15.817

只是为了总结事情，你可能会说 else 因为三元运算符，在 javascript 中可用：

```
var textEmpty = text == ""? true : false; 
```

可以这样写：

```
if (text == ""){
    textEmpty = true;
}else{
    textEmpty = false;
} 
```

但是，如前所述，这是完全不同的用途。

# c# - 动态创建不同类型的 Web 控件

> ID：15395564
> 
> 赞同：3
> 
> 时间：2013-03-13T20:14:33.113
> 
> 标签：c#, asp.net, web-controls

英语不是我的母语；请原谅打字错误。

我正在创建一个调查类型的应用程序，但我不确定我应该如何处理，所以我一直在做一些试验和错误。

我有一个问题课

```
public class Question
{
    public int QuestionID;
    public string QuestionText;
    public int InputTypeID;
    public List<WebControl> Controls;

    public Question()
    {
        //initialize fields;
    }

    internal Question(int id, string text, int inputTypeId)
    {
        //assign parameters to fields
        switch(inputTypeId)
        {
            case 1:
                //checkbox
                break;
            case 2:
                //textbox
                TextBox t = new TextBox();
                Controls = new List<WebControl>();
                Controls.Add(t);
                break;
            ...
        }
    }
} 
```

我的 Question.aspx 看起来像这样：

```
<asp:Repeater ID="repeater" runat="server">
    <ItemTemplate>
        //Want to display a control dynamically here
    </ItemTemplate>
</asp:Repeater> 
```

我试过这个，但它显然没有工作......

```
<asp:Repeater ID="repeater" runat="server">
    <ItemTemplate>
        <%# DataBinder.Eval(Container.DataItem, "Controls") %>
    </ItemTemplate>
</asp:Repeater> 
```

我就明白了。

```
System.Collections.Generic.List`1[System.Web.UI.WebControls.WebControl] System.Collections.Generic.List`1 
```

一个问题可能有

*   一个文本框
*   单选按钮列表
*   复选框列表

在这种情况下，我的 Question 课程应该有`List<WebControl>`还是只有`WebControl`?

另外，我怎样才能在转发器中渲染 webcontrol？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:37:22.200

您应该在 CodeBehind 中使用 Repeater ItemDataBound() 事件执行此操作。您的问题类应该有一个`List<Control>`which 是 WebControl 和其他控件的基类，从而为不同类型的控件提供灵活性。

不必使用 Page_Load 但只是例如，

```
 void Page_Load(Object Sender, EventArgs e) 
   {
         Repeater1.ItemDataBound += repeater1_ItemDataBound;
         Repeater1.DataSource = [your List<Control> containing controls to add];
         Repeater1.DataBind();
   }

   void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
   {

      // Execute the following logic for Items and Alternating Items.
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
      {

         var controlToAdd = (Control)e.Item.DataItem;
         ((PlaceHolder)e.Item.FindControl("PlaceHolder1")).Controls.Add(controlToAdd);

      }
   } 
```

和项目模板：

```
 <ItemTemplate>
       <asp:PlaceHolder id="PlaceHolder1" Runat="server" />
   </ItemTemplate> 
```

# ruby - 查找今天发生的重复性 Outlook 事件

> ID：15395574
> 
> 赞同：0
> 
> 时间：2013-03-13T20:14:56.277
> 
> 标签：ruby, outlook, ole

我有一个使用 Win32OLE 的 Ruby 脚本来阅读我的 Outlook 事件并查找今天发生的事件（基于开始日期值）。

```
events_today = ''

calendar.Items.each do |appointment|
    appt_date = Time.parse(appointment.Start)
    if appt_date > today && appt_date < tomorrow
        events_today << "<p><strong>#{appointment.Subject}:</strong> #{appt_date.strftime("%I:%M %p")}</p>"
    end
end 
```

它捕获今天发生的一次性事件，但它似乎没有捕获重复事件（即上周开始并每天发生的事件，包括今天）。

是否有更好的字段可用于搜索事件（除了`appointment.Start`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:31:44.050

使用 Items.IncludeRecurrences 属性： http: [//msdn.microsoft.com/en-us/library/office/aa171434 (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa171434(v=office.11).aspx)

# visual-studio-2012 - VS2012编译错误

> ID：15395577
> 
> 赞同：0
> 
> 时间：2013-03-13T20:14:57.397
> 
> 标签：visual-studio-2012, compilation

我正在尝试使用 Windows 7 和 Visual Studio 2012编译[eViaCam 。我已经安装了两个库，OpenCV 和 wxWidgets。](http://eviacam.sourceforge.net/)我有几个问题，但我最终通过添加几个包含路径（可能有冗余）手动解决了它们。但是编译的时候还是有问题：

```
1>  Génération de code en cours...
1>          1 fichier(s) copié(s). // Translation : "1 file copied."
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>          1 fichier(s) copié(s).
1>  Le fichier spécifié est introuvable. // Translation : "The specified file is not found"
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>  Le fichier spécifié est introuvable.
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: La commande "mkdir C:\eviacam-1.6.1\src\Release\bin\ca
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\es
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\gl
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\it
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\tr
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\de
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\oc
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\fr
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\ar
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\he
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\ru
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: mkdir C:\eviacam-1.6.1\src\Release\bin\pt_BR
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: 
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\ca.gmo" C:\eviacam-1.6.1\src\Release\bin\ca\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\es.gmo" C:\eviacam-1.6.1\src\Release\bin\es\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\gl.gmo" C:\eviacam-1.6.1\src\Release\bin\gl\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\it.gmo" C:\eviacam-1.6.1\src\Release\bin\it\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\tr.gmo" C:\eviacam-1.6.1\src\Release\bin\tr\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\de.gmo" C:\eviacam-1.6.1\src\Release\bin\de\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\oc.gmo" C:\eviacam-1.6.1\src\Release\bin\oc\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\fr.gmo" C:\eviacam-1.6.1\src\Release\bin\fr\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\ar.gmo" C:\eviacam-1.6.1\src\Release\bin\ar\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\he.gmo" C:\eviacam-1.6.1\src\Release\bin\he\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\ru.gmo" C:\eviacam-1.6.1\src\Release\bin\ru\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "C:\eviacam-1.6.1\src\..\po\pt_BR.gmo" C:\eviacam-1.6.1\src\Release\bin\pt_BR\eviacam.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: 
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\ca.mo" C:\eviacam-1.6.1\src\Release\bin\ca\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\es.mo" C:\eviacam-1.6.1\src\Release\bin\es\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\gl.mo" C:\eviacam-1.6.1\src\Release\bin\gl\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\it.mo" C:\eviacam-1.6.1\src\Release\bin\it\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\tr.mo" C:\eviacam-1.6.1\src\Release\bin\tr\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\de.mo" C:\eviacam-1.6.1\src\Release\bin\de\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: rem copy "%WXWIN%\locale\oc.mo" C:\eviacam-1.6.1\src\Release\bin\oc\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\fr.mo" C:\eviacam-1.6.1\src\Release\bin\fr\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: rem copy "%WXWIN%\locale\ar.mo" C:\eviacam-1.6.1\src\Release\bin\ar\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: rem copy "%WXWIN%\locale\he.mo" C:\eviacam-1.6.1\src\Release\bin\he\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\ru.mo" C:\eviacam-1.6.1\src\Release\bin\ru\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: copy "%WXWIN%\locale\pt_BR.mo" C:\eviacam-1.6.1\src\Release\bin\pt_BR\wxstd.mo
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: 
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(129,5): error MSB3073: :VCEnd" s'est arrêtée avec le code 1\. // Translation : VCEnd has stopped with the code 1.
========== Génération : 0 a réussi, 1 a échoué, 0 mis à jour, 0 a été ignoré ========== 
```

请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:53:46.493

编译器正在尝试在 C 驱动器上创建文件。在 Windows 7 默认帐户中，用户通常没有 C 盘的写权限。

如果您信任该程序，您需要以最推荐的管理员模式运行该程序，或者为特定目录的当前用户设置读写权限。

请注意，在 C 盘上设置写入权限会引发严重问题，还可能导致系统崩溃。所以这样做需要您自担风险-

在包含您要完全控制的所有文件的父文件夹上，执行以下操作：

```
Right Click on the Folder 
Select Properties 
Navigate to Security tab 
Press the Advanced button 
Press the Change Permissions.. button 
Give your username full control 
Make sure Replace all child object permissions with inheritable permissions from this object is selected 
Click Ok, Ok, and then Ok again to acknowledge. 
```

希望对您有所帮助。

# powershell - 使用 Powershell 进行 NTFS 审计

> ID：15395582
> 
> 赞同：1
> 
> 时间：2013-03-13T20:15:06.750
> 
> 标签：powershell, permissions, ntfs

所以基本上我有下面的脚本，它为 NTFS 生成如下输出：

```
Folder Path   IdentityReference    AccessControlType     IsInherited        InheritanceFlags    PropagationFlags
E:\Folder\    DOMAIN\User1         Allow                 True/False         ContainerInherit     Object Inherit
E:\Folder\    DOMAIN\User2         Deny                  True/False         ContainerInherit     Object Inherit 
```

`Allow/Deny`虽然这很有用，但如果我能得到一个指示`Read/Write/Modify/FullControl`标志的输出而不是我会更好。

请参阅我的以下代码，任何想法都值得赞赏！

```
$OutFile = "C:\Permissions.csv"
$Header = "Folder Path,IdentityReference,AccessControlType,IsInherited,InheritanceFlags,PropagationFlags"
Del $OutFile
Add-Content -Value $Header -Path $OutFile 

$RootPath = "E:\Folder"

$Folders = dir $RootPath -recurse | where {$_.psiscontainer -eq $true}

foreach ($Folder in $Folders){
    $ACLs = get-acl $Folder.fullname | ForEach-Object { $_.Access  }
    Foreach ($ACL in $ACLs){
    $OutInfo = $Folder.Fullname + "," + $ACL.IdentityReference  + "," + $ACL.AccessControlType + "," + $ACL.IsInherited + "," + $ACL.InheritanceFlags + "," + $ACL.PropagationFlags
    Add-Content -Value $OutInfo -Path $OutFile
    }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T13:37:19.663

对于那些希望将其包装在函数中的人，请尝试以下操作：

```
Function Get-FolderPermissions {
 Param($FolderPath)

If(-not (Test-Path $FolderPath)){

    Write-Warning "$FolderPath not valid!"
    return

}

$FolderPath = $(Get-Item $FolderPath).fullname

$ACLs = Get-Acl $FolderPath | ForEach-Object { $_.Access  }

$ACLs | Select-Object @{n='FolderPath';e={$FolderPath}}, IdentityReference, AccessControlType, IsInherited, InheritanceFlags, PropagationFlags, FileSystemRights

} 
```

然后您可以像这样导出到 CSV：

```
Get-FolderPermissions 'C:\Folder' | Export-Csv 'C:\Results.csv' -NoTypeInfo 
```

或来自父文件夹的多个文件夹：

```
$Folders = Get-ChildItem 'C:\Folder' -recurse | where {$_.psiscontainer -eq $true}
$Folders | %{ Get-FolderPermissions $_.FullName } | Export-Csv 'C:\Results.csv' -NoTypeInfo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:30:28.827

您要查找的属性是`$ACL.FileSystemRights`。

```
$Header = "Folder Path,IdentityReference,AccessControlType,IsInherited," +
          "InheritanceFlags,PropagationFlags,FileSystemRights"

#...

$OutInfo = $Folder.Fullname + "," + $ACL.IdentityReference  + "," +
           $ACL.AccessControlType + "," + $ACL.IsInherited + "," +
           $ACL.InheritanceFlags + "," + $ACL.PropagationFlags + "," +
           $ACL.FileSystemRights 
```

# javascript - nodejs：永远没有响应

> ID：15395586
> 
> 赞同：7
> 
> 时间：2013-03-13T20:15:18.863
> 
> 标签：javascript, node.js, websocket, forever

所以我知道，这不是最聪明的想法，但我将 nodejs 更新到版本 0.10 并使用“n”，而服务器仍在永远运行。现在当我尝试输入

```
$ forever list 
```

或者

```
$ forever stopall 
```

或者

```
$ forever restartall 
```

它根本什么都不做。无论如何 -

```
$ forever --help 
```

仍然显示帮助菜单，但所有操作都不起作用。而我的 nodejs 服务器仍在响应！

有什么方法可以用火永远杀死吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-08T12:27:35.783

您可以使用

```
sudo killall node 
```

或者

```
sudo forever stopall 
```

如果那也不起作用，只需使用

```
sudo kill -9 $(ps aux | grep 'node' | awk '{print $2}') 
```

希望这有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:25:18.937

我在监视守护进程（例如永远和热节点）中看到了这个问题。正如您所指出的，您可以 grep 丢失进程的 pid。实际上，我什至添加`killall node`到我的生产启动脚本中（比您的解决方案少罗嗦，而且有点矫枉过正，但它有效地解决了问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:33:47.770

好的，在一点帮助下我解决了这个问题：

只需输入

```
$ ps aux | less 
```

并搜索所有必须与 nodejs 做某事的进程并用

```
$ kill -9 *PID HERE* 
```

# .net-4.0 - 从命令行设置 MSBuild Web 发布属性“ExcludeGeneratedDebugSymbol”

> ID：15395592
> 
> 赞同：1
> 
> 时间：2013-03-13T20:15:23.760
> 
> 标签：.net-4.0, build, msbuild, nant

我正在使用 NAnt 构建我的项目并发布网站项目。我想在生成的包中包含 PDB。执行时如何`ExcludeGeneratedDebugSymbol`从命令行设置属性`msbuild`？

我尝试将它添加到参数列表中，但我仍然没有看到 PDB。我的`exec`任务如下所示：

```
<exec program="${MSBuildPath}" workingdir="${path::get-full-path(PublishWebProject.SourcePath)}\">
  <!-- Don't show the logo. -->
  <arg value="/nologo"/>
  <!-- Build w/o Clean -->
  <arg value="/t:Build"/>
  <!-- Configuration, Output, Options, No Warnings -->
  <arg value="/p:OutputPath=bin\;OutDir=${path::get-full-path(PublishWebProject.OutputPath)};Configuration=${Configuration};Platform=Any CPU;UseWPP_CopyWebApplication=True;PipelineDependsOnBuild=False;WarningLevel=0;RunCodeAnalysis=false;ExcludeGeneratedDebugSymbol=false"/>
  <!-- Quiet -->
  <arg value="/v:q"/>
  <!-- Project Path -->
  <arg value="${PublishWebProject.ProjectFileName}"/>
</exec> 
```

这是对 MSBuild 的实际调用：

```
 [exec] Starting 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe (/nologo /t:Build "/p:OutputPath=bin\;OutDir=D:\Projects\XYZ\Publish\Release-Production\CommonWeb\;Configuration=Release-Production;Platform=Any CPU;UseWPP_CopyWebApplication=True;PipelineDependsOnBuild=False;WarningLevel=0;RunCodeAnalysis=false;ExcludeGeneratedDebugSymbol=false" /v:q CommonWeb.csproj)' in 'D:\Projects\XYZ\Source\CommonWeb\' 
```

这相当于：

```
D:\Projects\XYZ\Source\CommonWeb> C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe /nologo /t:Build "/p:OutputPath=bin\;OutDir=D:\Projects\XYZ\Publish\Release-Production\CommonWeb\;Configuration=Release-Production;Platform=Any CPU;UseWPP_CopyWebApplication=True;PipelineDependsOnBuild=False;WarningLevel=0;RunCodeAnalysis=false;ExcludeGeneratedDebugSymbol=false" /v:q CommonWeb.csproj 
```

我也尝试将其设置`UseWPP_CopyWebApplication`为 false，但这也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:56:47.977

您的项目文件包含有关输出调试信息的信息。尝试将调试信息设置为`pdb-only`：

```
<arg value="/debug:pdbonly" /> 
```

# c++ - 与枚举器列表成员关联的整数值是多少？

> ID：15395600
> 
> 赞同：0
> 
> 时间：2013-03-13T20:15:38.350
> 
> 标签：c++, enums

做什么

```
enum Type {
    TYPE_NONE     = 'none',
    TYPE_C_STRING = 'cstr',
    TYPE_INT32    = 'in32',
    TYPE_INT64    = 'in64',
    TYPE_FLOAT    = 'floa',
    TYPE_POINTER  = 'ptr ',
}; 
```

表示与 enumerator-list members 关联的整数值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:20:41.420

形式`'XXXX'`是一种使用 ASCII 字符来形成更大的常数的方法（这早于 Unicode）。ASCII 值以与平台相关的顺序组合以形成最终常量。

有关其作用的 GCC 文档，请参阅[http://gcc.gnu.org/onlinedocs/cpp/Implementation_002ddefined-behavior.html#Implementation_002ddefined-behavior](http://gcc.gnu.org/onlinedocs/cpp/Implementation_002ddefined-behavior.html#Implementation_002ddefined-behavior)

在 GCC（这是 Android 使用的）上，看起来字符从左到右按从高到低的顺序组合，所以`'ABCD'`会有`0x41424344`.

# c++ - 为什么这个构造函数是这样写的？

> ID：15395602
> 
> 赞同：0
> 
> 时间：2013-03-13T20:15:56.827
> 
> 标签：c++, object, copy-constructor, default-constructor, c-strings

我们的教授在网上发布了一个自定义的'String'模板文件，并要求我们填写以下功能。我的问题是，为了尝试理解这一点，为什么前三个构造函数`Text = NULL;`在它下面有 ，`this = source;`，它的其他形式。我觉得每个人都应该说`Text = the_input_parameter`。

非常感谢，代码如下：

```
class String
{
public:
    // Default constructor
    String()
    {
        Text = NULL;
    }
    String(const String& source)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy
        *this = source;     
    }
    String(const char* text)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy

        *this = text;

    }
~String()
    {
        delete[] Text;
    }

    // Assignment operator to perform deep copy
    String& operator = (const char* text)
    {
        // Ddispose of old Text
        delete[] Text;

        // +1 accounts for NULL-terminator
        int trueLength = GetLength(text) + 1;

        // Dynamically allocate characters on heap
        Text = new char[trueLength];

        // Copy all characters from source to Text; +1 accounts for NULL-terminator
        for ( int i = 0; i < trueLength; i++ )
            Text[i] = text[i];

        return *this;
    }

    // Returns a reference to a single character from this String
    char& operator [] (int index) const
    {
        int length = GetLength();

        // Check for valid index
        if ( (index < 0) || (index > length) )
        {
            stringstream error;
            error << "operator[] - index " << index << " is out of bounds (0.." << (length - 1) << ")";
            throw String(error.str().c_str());
        }

        return Text[index];
    }
private:
    // The encapsulated C-string
    char* Text;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:28:26.247

为什么不应该在赋值方面实现构造函数：

*   它在派生类中变得非常讨厌。想想看。
*   很难使异常安全。
*   启动也效率低下（需要默认构造然后分配）。

因此，为什么在您的示例代码中这样做的答案可能是您的教授对 C++ 编程一无所知。

否则，很难说：这样做根本没有任何意义。

* * *

然而，另一种方式，即在复制构造方面实现复制分配，是非常常见的，被称为**复制和交换习语**。

它很简单，异常安全且通常有效，如下所示：

```
class Foo
{
public:
    void swap_with( Foo& other ) throw()
    {
        // No-throwing swap here.
    }

    void operator=( Foo other )
    {
        other.swap_with( *this );
    }
}; 
```

是的，就是这样。

变体包括将交换器命名为 just `swap`，并让赋值运算符返回一个引用，有些人更喜欢通过引用传递参数，然后进行复制（使用复制构造）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:17:44.983

这只是一种将通用代码分解为辅助函数的方法。在这种情况下，`operator=()`充当辅助函数。它的功能是释放当前字符串（在本例中为`NULL`）并执行右侧的深层复制。

> 我觉得每个人都应该说`Text = the_input_parameter`。

因为`String(const String& source)`这不是`source`正确的类型，所以无法编译。

因为`String(const char* text)`这是不正确的，因为这只会分配指针而不是执行深层复制。

以上假设您只向我们展示了类的一部分，并且实际的类定义了适当的赋值运算符和析构函数。如果没有，你需要一个新教授。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:35:20.400

该类管理内存，因此析构函数释放它，赋值运算符为新数据分配新数据并释放旧数据（应该按此顺序）。

那么初始赋值的解释就很清楚了：你需要将成员字段初始化为一个正确的值，否则它将包含垃圾（一些指向某处的指针），代码将尝试使用和释放。

虽然从代码中看不到，但也可能有赋值`const String&`和类型转换运算符`operator const char *() const`。

# c# - 如何阻止 Spyne 将参数包装在 complexType 中？

> ID：15395610
> 
> 赞同：2
> 
> 时间：2013-03-13T20:16:16.613
> 
> 标签：c#, python, soap, spyne

我正在尝试使用 Spyne 从 Python 提供 Web 服务。我已经为一个名为 SayHello(name, times) 的测试函数工作了一切。但是，我想知道为什么 Spyne 将 name 和 times 参数包装在一个名为 SayHello 的 complexType 中？这使得在 .NET 中使用 Web 服务变得更加笨拙（即，`appClient.SayHello("Dave", 5)`我必须这样做`SayHello args = new SayHello(); args.name = "Dave"; args.times = "5"; appClient.SayHello(args);`，这是非常不雅的）。

有没有办法强制 Spyne 不将参数包装在 complexType 中？

这是 Spyne 生成的当前 wsdl 的相关部分：

```
<xs:schema targetNamespace="solutions.sfcs" elementFormDefault="qualified">
  <xs:complexType name="SayHello">
    <xs:sequence>
      <xs:element name="name" type="xs:string" minOccurs="0" nillable="true"/>
      <xs:element name="times" type="xs:integer" minOccurs="0" nillable="true"/>
    </xs:sequence>
  </xs:complexType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:57:14.293

您可以传递`_body_style='bare'`给`@rpc`装饰器以防止包装。但你很可能会得到：

```
Exception: body_style='bare' can handle at most one function argument. 
```

如果你能以不破坏其他测试的方式解决这个问题，我可以合并你的补丁。

# spring - 在 OSGI Karaf 中使用 CXF 保护 REST 端点

> ID：15395614
> 
> 赞同：2
> 
> 时间：2013-03-13T20:16:38.640
> 
> 标签：spring, security, rest, osgi, cxf

在 OSGI 中保护使用 CXF 实现的 REST 端点的标准方法是什么？

有问题的系统是在 Karaf 中部署为 WAB 的 Web 应用程序。该应用程序包含使用 CXF 在单独的 OSGI 包中实现对 REST 服务进行 AJAX 调用的 JavaScript。主 Web 应用程序使用 Spring Security（使用标准 DelegatingFilterProxy）进行保护。应用程序应该是开放的，可以与任何与 Spring Security 兼容的安全提供程序一起使用。

我们需要能够根据用户在主 Web 应用程序中进行身份验证的主体来获取 REST 服务中的用户信息。

保护应用程序中 REST 端点的最佳方法是什么？

谢谢，

迈克尔

# google-maps - 如何沿着由两点定义的线找到点？

> ID：15395620
> 
> 赞同：2
> 
> 时间：2013-03-13T20:17:12.187
> 
> 标签：google-maps, geometry

谷歌地图几何库中有一个功能

```
interpolate(from:LatLng, to:LatLng, fraction:number) 
```

它在其他两个点之间找到一个点：

```
A--X--B 
```

我需要一些非常相似的东西，沿着这条线找到一个点：

```
A--B--X 
```

插值不接受分数> 1，所以我不能使用它。有没有一些简单的方法来计算点？我想达到 A 点和 X 点之间的给定距离。

编辑：在我的应用程序中，距离非常小，所以我使用了 fromLatLngToPoint 转换和线性插值，它们在小面积上获得了足够好的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:15:35.133

[您可以计算方位，然后使用此出色页面](http://www.movable-type.co.uk/scripts/latlong.html)中的代码找到目标点

# math - 反向二元插值

> ID：15395624
> 
> 赞同：2
> 
> 时间：2013-03-13T20:17:15.143
> 
> 标签：math

我得到一个表，索引在 2 维 (x,y) 上，其值（不一定是有序的，尽管我认为这不是一个非常不安全的假设）z，这样 f(x, y) = z

因此，给定一个 x 和 y，我进行插值以找到 az 值。现在给定一个 x 值（或 y，我想，不是很重要）和 az 值，我需要找到与数据对应的 y 值。是否可以在不知道表格 z 值排序的情况下执行此操作？如果对表的 z 值进行排序，是否有可能？在我的脑海中，给定订单，应该可以找到一个独特的解决方案，但如果我没有得到订单，我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T13:31:27.403

您能否发布一些或最好是所有数据？假设它是线性且连续的，我们有 n 个 ax +by = z 的副本。假设 x=3 和 z=4，我们有 3 个未知数，我们可以将它们放入一个具有 n 行和 3 列的矩阵中。第一行看起来像`3 b 4`，因为我们将 a、y 和 z 视为未知数。现在尝试减少梯队行。更具体地说，执行 row1 - row2（现在不要执行 row2 - row1）、row1-row3、row1-row4... row2-row3、row2-row4... 这些排列中应该有 nchoose2。如果有解决方案，那么每个排列将采用以下形式`qia=qjz`（当然，a 和 z 不会存在）其中 qi 和 qj 是已知数，q,i 和 j 是常数。

# javascript - CasperJs 中的假插件支持，通过替换 window.navigator 插件对象

> ID：15395629
> 
> 赞同：0
> 
> 时间：2013-03-13T20:17:22.777
> 
> 标签：javascript, coffeescript, casperjs, navigator

当我尝试在 CasperJS 中伪造 Shockwave Flash 支持时，如[https://stackoverflow.com/a/14587849/1365141](https://stackoverflow.com/a/14587849/1365141)中所述（但对于 PhantomJs，它不起作用。我做错了什么？

```
casper.on 'page.initialized', ->
  casper.evaluate ->
    window.navigator =
      plugins:
        length: 1
        "Shockwave Flash":
          description: "Flsh 123"
  @echo "Shockwafe Flahs #{window.navigator.plugins['Shockwave Flash'].description}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:35:08.830

As we say in Russia, before drinking vodka with a bear with balalaika:

«Correctly formulated question — half of answer.»(©Russians)

```
casper.on 'page.initialized', ->
  window.navigator =
    plugins:
      length: 1
      "Shockwave Flash":
        description: "Flsh 123"
  @echo "Shockwafe Flahs #{window.navigator.plugins['Shockwave Flash'].description}" 
```

And you ask:

— What is the difference?

I will answer to you:

— The difference in context.

When you use casper.evaluate, you use page context.

# php - 摆脱 PHP 生成的网页标题中的 HTML 实体

> ID：15395630
> 
> 赞同：0
> 
> 时间：2013-03-13T20:17:23.597
> 
> 标签：php, html, title, entities, htmlspecialchars

我有一个使用 PHP 编写的内容管理系统 GetSimple 的网站。我根据需要对其进行了编辑，但是，在标题中，这是应该存在的：

```
<title><?php get_page_clean_title(); ?> - <?php get_site_name(); ?></title> 
```

问题是我是捷克人，我必须使用特殊字符（á、é、í、ó、ú、ů、ě、š 等），如果您打开我的网站并查看源代码，您会看到：

```
<title>Tomáš Janeček - osobní web - Tom**&aacute;&scaron;** Janeček | Personal Website</title> 
```

而不是“Tomáš Janeček - osobní web - Tom* *áš* * Janeček | 个人网站”。困扰我的是那些 HTML 实体，它们只在标题的第二部分。á 代表“á”，š 代表“š”。我知道它不应该伤害 SEO，但我这样做是为了保持代码清晰。

有没有办法对其进行解码，或者只是将 get_site_name() 更改为一些更好的函数，这些额外的字符不会有问题？我不想要代码中的实体。我认为不应该编辑这个具体的 .php 文件以使其成为我想要的样子，但是，我希望它可以在这个文件中以某种方式简单地解决。CMS 包含数十个 .php 文件，我不确定应该搜索什么。我在“可疑”文件中查找了一些带有 PHP 实体的代码，但没有发现任何对我有帮助的东西。如果需要，可以在[这里下载整个 CMS](http://get-simple.info/download)

提前感谢您的帮助。

编辑1：// ---------------------------------------------- --------------------------------------

当然，我包含了这个元数据。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

不，我不使用任何数据库。这将伴随着学习 Joomla！:)

我想强调一下，标题有 2 个部分 - get_page_clean_title() 和 get_site_name()，它们都包含我的全名，并且只有一个在源代码中使用 HTML 实体显示它。

我在另一个文件中找到了这些函数：

第一个是不将 HTML 实体放入源代码的那个 - 这就是我想要的第二个函数。

```
function get_page_clean_title($echo=true) {
global $title;
$myVar = strip_tags(strip_decode($title));

if ($echo) {
    echo $myVar;
} else {
    return $myVar;
} 
```

}

SECOND 函数做了它应该做的事情，但是它给出了带有 HTML 实体的输出，这就是问题所在。

```
function get_site_name($echo=true) {
global $SITENAME;
$myVar = trim(stripslashes($SITENAME));

if ($echo) {
    echo $myVar;
} else {
    return $myVar;
} 
```

}

上述两个函数都在同一个文件中。

我试图将有问题的函数替换为可以将变量名称更改为正确值的函数，但是它根本停止工作：/

所以，总而言之，整个页面是好的，除了一个地方没有HTML实体——标题的后半部分带有get_site_name函数。

此外，问题仅存在于源代码中。最后显示没问题。

感谢您迄今为止的回复，我很高兴收到如此快速和有价值的回复。我非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:23:49.837

我认为你有一个字符集问题。如果您希望特殊字符以正确的方式显示它们，请添加

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

到您的 html/php 文件。还要检查您的数据是否经过 UTF-8 编码。

如果您从 MySQL 数据库获取数据，请检查列是否使用`utf-8`字符集。还要设置与此查询的连接的字符集，以确保您获取具有正确编码的数据。

```
set names utf8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:22:58.353

Tome，请确保您的 *.php 或数据库或任何正在关闭的数据是 UTF-8 格式，并且索引上的元字符集也是 utf-8 格式。

[http://www.jakpsatweb.cz/cestina.html](http://www.jakpsatweb.cz/cestina.html) - 请访问此网站以获取有关 html 变音符号的信息。您将看到每种编码中的符号表。

[如何将俄语字符保存在 UTF-8 编码文件中](https://stackoverflow.com/questions/14927122/how-to-save-russian-characters-in-a-utf-8-encoded-file/14927193#14927193)

# jquery - $.post 中的设置值不起作用

> ID：15395631
> 
> 赞同：0
> 
> 时间：2013-03-13T20:17:30.327
> 
> 标签：jquery

我正在使用 ajax 更新数据库并使用下面的代码，问题是我无法在 $.post 方法中设置 newValue。这个值定义。

```
$('#sabt_mored1').live('click', function() {
    $edit=false;
    var newVal=false;
    $(this).parent().siblings('td').find('#cd_e0').hide();              

    $.post("actions.php", {id_sal: id_sal, sal:sal1 , postaction:'virayeshe_sal'}, 
        function(data){
            if(data.success) {
                newVal=true;
            }
            else{
                newVal=false;                       
            }
        },'json');

    alert(newVal);              
    return false;               
}); 
```

使用警报后我得到错误但我必须得到，$.post 返回 data.success

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:20:24.283

Ajax 调用是异步的。在服务器返回结果之前，不会调用回调函数中的代码。alert 语句在发起请求后立即执行。此时 newVal 将始终具有其默认值 false。

您需要在回调函数中获得结果后执行必须发生的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:20:27.690

您在ajax 成功回调函数执行*之前*`alert()`发生。将警报放在回调的末尾，它将正确显示。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:20:51.067

由于`post()`是异步执行的，因此您的`alert`语句需要在回调函数中，以确保它仅在 AJAX 操作完成后执行：

```
$('#sabt_mored1').live('click', function(e) {
    e.preventDefault();

    $edit = false;
    var newVal = false;

    $(this).parent().siblings('td').find('#cd_e0').hide();              

    $.post("actions.php", {id_sal: id_sal, sal:sal1 , postaction:'virayeshe_sal'}, 
        function(data){
            if(data.success) {
                newVal=true;
            }
            else{
                newVal=false;                       
            }

            alert(newVal);
        },'json');           
}); 
```*

# java - 将应用程序与春季社交网站集成

> ID：15395634
> 
> 赞同：5
> 
> 时间：2013-03-13T20:17:39.840
> 
> 标签：java, android, spring, spring-social

我目前有一个使用 Spring MVC 和 Spring Social 建立的网站，因此用户可以使用 Facebook 和 Twitter 登录。

现在我想授权我的 Android 客户端使用 Facebook（或 Twitter）凭据访问我的第三方网站。[如此处所述](https://stackoverflow.com/a/11474888/1303117)，这应该是可能的。但他没有继续说如何。谁能帮我解决这个问题？只需给我一些关于如何做到这一点的基本大纲。我真的被困在这里了...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T13:23:49.500

我实际上正在做一个需要做同样事情的项目。我为网站实现了 Spring Security 和 Spring Social，还需要允许 iOS 和 Android 应用程序通过社交网站进行连接。

这是您需要做的：

1.  将特定于设备的 API 实施到应用项目的开发中。所以，在设备上实现 Facebook、Twitter 或其他任何你通常会做的事情。您将在那里进行实际的身份验证过程。

2.  为您的应用程序实施一个特殊的 URL，以通过社交服务登录。例如， http: [//yousiteapi.com/services/auth/socialSignin](http://yousiteapi.com/services/auth/socialSignin)。您需要将所有参数传递给此 api，这些参数通常会写入 UserConnection 表实现 - providerId、userProviderId、authenticationToken、secret 等。如果提供者不使用其中之一，只需传入 null或空变量。

3.  在此控制器中，您将需要参考您的 spring Social SignInAdapter 和 ConnectionSignUp 类的实现以及 ConnectionRepository 和 UserConnectionRepository 的实现，并基本上重现整个注册过程。首先，您需要通过您传回的 providerId 确定它是哪个提供者，并使用提供者的 consumerKey 和 consumerSecret 来实现您需要的特定 ConnectionFactory。然后，使用您传入的数据创建 ConnectionData 对象。使用 ConnectionData 对象，您可以创建实际的 Connection 对象。

4.  现在是您复制普通 Spring Social 登录逻辑的地方：首先，使用您对 UserConnectionRepository 的引用并调用 findUserIdsWithConnection() 方法来查看用户之前是否已登录。如果没有，请调用 ConnectionSignUp.execute() 方法创建用户。

5.  最后，您只需调用您的 SignInAdapter.signin() 方法来让用户登录。不要忘记将您的响应设置为 OK，以便您的应用程序知道这是成功的。

哇，听起来很多。实际上听起来比它更多。希望这至少有助于为您指明正确的方向。

# python - 如何在 Windows 上静默卸载 Python 2.7？

> ID：15395640
> 
> 赞同：8
> 
> 时间：2013-03-13T20:17:54.717
> 
> 标签：python, windows, python-2.7, uninstallation, silent-installer

有谁知道如何静默卸载 Python 2.7 - 即在无人看管的情况下卸载它，无需用户交互？我需要将其作为卸载脚本的一部分，该脚本以静默方式安装一堆软件。

我尝试在最初安装的 msi 文件上使用 /x 和 /qn 标志运行 msiexec，但它失败了 - 它只是抛出一般帮助消息，暗示我使用了无效选项。

我已经进行了 Google 搜索，并且可以找到早期版本的帮助 - 它们可以通过运行与它们一起安装的 unwise.exe 并使用正确的选项静默卸载。但是 2.7 似乎没有包含 unwise.exe，所以我不能这样做。

有谁知道如何做到这一点？

**编辑**：答案原来是令人尴尬的简单。这些都是正确的命令行选项——只是顺序很重要。正确的命令是：

`msiexec /x python-2.7.3.amd64.msi /qn`

重要的是在 msi 文件*之后*有 /qn 选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:30:57.090

***编辑：***忽略我之前所说的，这里是根据[Python 2.4 文档](http://www.python.org/getit/releases/2.4/msi/)的解决方案：

不必让 MSI 文件可用于卸载；或者，**也可以指定包装或产品代码**。您可以通过查看Python 在开始菜单中安装**的卸载快捷方式**的属性找到产品代码。

点击 Windows 键，搜索 Python 卸载，右键单击它并转到属性。产品密钥在目标字段中，您可以通过执行以下操作使用它来卸载：

```
msiexec /x {03mY-L0NG-A77-K3Y}.msi /qn 
```

# c++ - 回文函数

> ID：15395642
> 
> 赞同：2
> 
> 时间：2013-03-13T20:18:00.293
> 
> 标签：c++, palindrome

我需要重写程序以使用函数 isPalindrome。它需要输入一个 5 位整数并返回一个布尔值（如果是回文则为 true，否则为 false），并且不能包含任何 cout 语句。我不确定如果没有 cout 函数我将如何做到这一点。这是我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    int number, digit1, digit2, digit3, digit4, digit5;

    cout << "\nEnter a 5-digit integer: ";
    cin >> number;

//Break down input number into individual digits:
    digit1 = number / 10000;
    digit2 = number % 10000 / 1000;
    digit3 = number % 10000 / 100;
    digit4 = number % 10000 / 10;
    digit5 = number % 10;

    if ( digit1 == digit5 && digit2 == digit4 )
        cout << number <<" is a palindrome.\n";
             else
             cout << number << " is not a palindrome.\n";
             return 0;
         }
int isPalindrome ()
{

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:24:10.520

这应该可以帮助您入门（不会破坏太多乐趣）

```
int main(){
    //accept integer input using cin
    if(isPalindrome(input))
       cout << "yaay!";
    else
       cout << "nooouuu!";

}

bool isPalindrome (int input)
{
   //test things here
   return ( digit1 == digit5 && digit2 == digit4 ) 
   // ^ returns true if condition satisfied
} 
```

* * *

此外，您分离数字的方式不正确。它应该是：

```
digit1 = number/10000 % 10;
digit2 = number/1000 % 10;
digit3 = number/100 % 10;
digit4 = number/10 % 10;
digit5 = number % 10; 
```

当然，上面的内容实际上应该是循环的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T20:37:27.687

不必指定数字包含多少位数字。你可以尝试这样的事情：

```
 bool isPalindrome(int number) {
        int reverse = 0, copy = number;
        while(copy != 0) {
            reverse = reverse*10 + copy%10;
            copy /= 10;
        }
        return number == reverse;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T19:46:12.987

```
string s;
    cout<<"\nEnter a string : " ;
    cin>>s;
    int length = s.length();

    char* arr = new char();

    int k = length;

    for(int i = 0 ; i <= length ; i++)
    {
        arr[i] = s[k];
        k -= 1;
    }

    if(!palindrome(s, arr, length))
    {
        cout<<"\nNot Palindrome\n";
    }

    else
    {
        cout<<"\nPalindrome\n";
    }
}

bool palindrome(string& s, char* arr, int length)
{
    int j = 0;
    for(int i = 1 ; i <= length; i++)
    {
        if(arr[i]!= s[j])
        {
            return false;
        }
        j++;
    }
    return true;
} 
```

# java - 在 Avro 的反射中使用泛型

> ID：15395643
> 
> 赞同：0
> 
> 时间：2013-03-13T20:18:02.773
> 
> 标签：java, reflection, avro

在下面的代码中：

```
 public class AvroReader<T> {

    public AvroReader(Class type, File packetFile) throws IOException{
            reader = new DataFileReader<>(packetFile,
                    new ReflectDatumReader<T>(ReflectData.get().getSchema(type)));
    }
} 
```

我想取消构造函数中的字段“type”，因为 type=T.class。如果只有编译器接受 getSchema(T.class) ！

一个建议是使用：

```
Class<T> cls = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0]; 
```

我收到此错误：

```
java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:24:10.433

您需要使用下面的黑魔法巫术来检索泛型参数的类：

```
Class<T> persistentClass = (Class<T>) (getClass().getGenericSuperclass()); 
```

然后你可以像这样转换你的代码

```
Schema schema = ReflectData.get().getSchema(persistentClass); 
```

实际上，黑色巫毒魔法线通过反射获得实例化类时使用的通用参数的类型。您必须基于实例来执行此操作，因为在定义类时您不知道参数的类型（因为泛型是 a`syntactic sugar`并且在运行时丢失）。

# sql - Oracle 包含不工作

> ID：15395645
> 
> 赞同：6
> 
> 时间：2013-03-13T20:18:04.060
> 
> 标签：sql, oracle

我的表中有一个列是上下文索引的。

```
CREATE INDEX CIDX_MUSTFIXBY ON TABLE
  (MUST_FIX_BY)
INDEXTYPE IS CTXSYS.CONTEXT
NOPARALLEL; 
```

我正在尝试查询 where 条件

> AND must_fix_by LIKE 'Q2%'

它返回行。

但是，当我尝试使用 where 条件进行查询时

> AND 包含(must_fix_by, 'Q2') > 0

并且它不返回任何行。

有人可以告诉我为什么 like 有效而 contains 无效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T06:30:55.577

两个可能的原因 - 索引可能不同步，并且在匹配字符串`CONTAINS`时似乎匹配单词。`LIKE`

两个字符串的示例，其中`LIKE`两个都匹配，但`CONTAINS`都不匹配：

```
create table test1(must_fix_by varchar2(4000));
create index cidx_mustfixby on test1(must_fix_by) indextype is ctxsys.context;
insert into test1 values('Q234567');
insert into test1 values('Q2 234567');
select * from test1 where must_fix_by like 'Q2%';

MUST_FIX_BY
-----------
Q234567
Q2 234567

select * from test1 where contains(must_fix_by, 'Q2') > 0;

no rows selected 
```

默认情况下，`CONTEXT`索引需要[手动同步](http://docs.oracle.com/cd/E11882_01/text.112/e24436/csql.htm#sthref182)。您要么需要运行：`exec ctx_ddl.sync_index('cidx_mustfixby');`，要么需要使用`on commit`.

```
exec ctx_ddl.sync_index('cidx_mustfixby');
select * from test1 where contains(must_fix_by, 'Q2') > 0;

MUST_FIX_BY
-----------
Q2 234567 
```

这解决了其中一个问题。但是`Q234567`还是不匹配。我对 Oracle Text 了解不多，甚至找不到关于其`CONTAINS`工作原理的简单描述。但它似乎是基于完整的单词而不是字符串。Q2 和其他字符之间需要有某种单词边界，才能被简单的`CONTAINS`过滤器拾取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T18:28:05.883

使用 CONTAINS 时还需要添加 %。

```
AND contains(must_fix_by, 'Q2%') > 0 
```

# php - Symfony 1.4.2 PHP cURL PUT 请求中没有内容

> ID：15395648
> 
> 赞同：1
> 
> 时间：2013-03-13T20:18:11.677
> 
> 标签：php, curl, symfony-1.4, put

使用 PHP cURL 和 Symfony 1.4.2

我正在尝试执行包含数据 (JSON) 的 PUT 请求以修改我的 REST Web 服务中的对象，但无法在服务器端捕获数据。

检查我的日志时，似乎内容已成功附加：

```
PUT to http://localhost:8080/apiapp_test.php/v1/reports/498 with post body content=%7B%22report%22%3A%7B%22title%22%3A%22The+title+has+been+updated%22%7D%7D 
```

我附上了这样的数据：

```
$curl_opts = array(
    CURLOPT_HTTPHEADER => $headers,
    CURLOPT_POSTFIELDS => http_build_query(array('content' => $post_data)),
); 
```

并想使用这样的东西来获取数据

```
$payload = $request->getPostParameter('content'); 
```

它不起作用，我尝试了很多方法来在我的操作文件中获取这些数据。我尝试了以下解决方案：

```
parse_str(file_get_contents("php://input"), $post_vars);
$payload = $post_vars['content'];
// or
$data = $request->getContent(); // $request => sfWebRequest
$payload = $data['content'];
// or
$payload = $request->getPostParameter('content');

// then I'd like to do that
$json_array = json_decode($payload, true); 
```

我只是不知道如何在我的行动中获取这些数据，这令人沮丧，我在这里阅读了很多关于它的主题，但没有一个对我有用。

附加信息：

我为我的 cURL 请求设置了这些设置：

```
curl_setopt($curl_request, CURLOPT_CUSTOMREQUEST, $http_method);

if ($http_method === sfRequest::PUT) {
    curl_setopt($curl_request, CURLOPT_PUT, true);
    $content_length = array_key_exists(CURLOPT_POSTFIELDS, $curl_options) ? strlen($curl_options[CURLOPT_POSTFIELDS]) : 0;
    $curl_options[CURLOPT_HTTPHEADER][] = 'Content-Length: ' . $content_length;
}

curl_setopt($curl_request, CURLOPT_URL, $url);
curl_setopt($curl_request, CURLOPT_CONNECTTIMEOUT, 4);
curl_setopt($curl_request, CURLOPT_TIMEOUT, 4);
curl_setopt($curl_request, CURLOPT_DNS_CACHE_TIMEOUT, 0);
curl_setopt($curl_request, CURLOPT_NOSIGNAL, true);
curl_setopt($curl_request, CURLOPT_RETURNTRANSFER, true); 
```

在 sfWebRequest.php 中，我看到了这个：

```
case 'PUT':
  $this->setMethod(self::PUT);
  if ('application/x-www-form-urlencoded' === $this->getContentType())
  {
    parse_str($this->getContent(), $postParameters);
  }
  break; 
```

所以我尝试将标题的 Content-Type 设置为它，但它没有做任何事情。

如果您有任何想法，请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:18:18.740

根据[另一个问题/答案](https://stackoverflow.com/q/3958226/569101)，我已经测试了这个解决方案，我得到了正确的结果：

```
$body = 'the RAW data string I want to send';

/** use a max of 256KB of RAM before going to disk */
$fp = fopen('php://temp/maxmemory:256000', 'w');
if (!$fp) {
    die('could not open temp memory data');
}
fwrite($fp, $body);
fseek($fp, 0);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_PUT, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_INFILE, $fp); // file pointer
curl_setopt($ch, CURLOPT_INFILESIZE, strlen($body));

$output = curl_exec($ch);

echo $output;
die(); 
```

另一方面，您可以使用以下方法检索内容：

```
$content = $request->getContent(); 
```

如果你`var_dump`这样做，你将检索：

> 我要发送的 RAW 数据字符串

# asp.net - 如何将 ItemTemplate 文本值设置为组合框 DataTextField 而不是 DataValueField

> ID：15395656
> 
> 赞同：2
> 
> 时间：2013-03-13T20:18:38.530
> 
> 标签：asp.net, c#-4.0, gridview, telerik, telerik-grid

我有一个带有 GridTemplateColumn 的 Telerik radgrid，如下所示，在 C# ASP.NET 4.0 网络表单中。

如您所见，在 EditItemTemplate 中，我使用的是 RadComboBox，其 ID 号用于 DataValueField，而人类可读的文本用于 DataTextField。

我的问题是，如何更改 ItemTemplate 中的 Text 以显示人类可读的值而不是 Id？Alias1 的值来自网格数据源，它是 Id。

感谢您提供任何帮助！

```
 <telerik:GridTemplateColumn UniqueName="Alias1" Display="true" DataField="Alias1" HeaderText="Alias1" SortExpression="Alias1">
        <ItemTemplate>

            <asp:Label ID="lblField30" CssClass="text" runat="server" Text='<%# Bind("Alias1") %>'></asp:Label>

        </ItemTemplate>

        <EditItemTemplate> 

            <telerik:RadComboBox ID="RadComboBox16" runat="server" Skin="Outlook" Height="150" DataSourceID="SqlDataSourceAliasOptions" DataTextField="aliasText" DataValueField="aliasid"  SelectedValue='<%#Bind("Alias1") %>'>
            </telerik:RadComboBox>

        </EditItemTemplate>

    </telerik:GridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:40:31.197

您需要像这样更改 ItemTemplate 绑定：

```
 <ItemTemplate>

        <asp:Label ID="lblField30" CssClass="text" runat="server" Text='<%# Eval("aliasText") %>'></asp:Label>

    </ItemTemplate> 
```

当然，您的绑定实体必须具有“aliasText”属性。如果您正在绑定诸如 DataTable 之类的内容，请确保包含“aliasText”列。

# google-apps-script - 需要脚本在电子表格的所有行中采用逗号分隔的值，并根据搜索用第二个电子表格中的值替换

> ID：15395657
> 
> 赞同：-1
> 
> 时间：2013-03-13T20:18:42.323
> 
> 标签：google-apps-script, google-calendar-api, google-sheets, google-spreadsheet-api

我正在创建一个日历/计划资源。用户在 Google 表单中输入所有日历/事件数据。每次提交表单时，数据都会填充到“表单响应”电子表格中，其中会创建一个新行。在电子表格中，电子表格所有者可以运行脚本来创建 Google 日历条目。

在通过 Google 表单收集的数据中，用户可以从 100 多个日历中进行选择，他希望在这些日历上显示他的活动信息。因此，例如，他可以从 100 多个日历的列表中选择日历名称，例如“Apple”、“Pear”、“Watermelon”和“Orange”。在电子表格中，这些选择将出现在逗号分隔的列表中：苹果、梨、西瓜、橙子。

在一个单独的“资源”电子表格中，我有两列。第 1 列包含上述日历名称，第 2 列包含对应的 Google 日历资源地址。

可乐

A1 苹果

A2梨

A3 西瓜

A4 橙色

科尔B

B1 domain.com_190382d0931@resource.calendar.google.com

B2 domain.com_928313sdf98@resource.calendar.google.com

B3 domain.com_239829a3l18@resource.calendar.google.com

B4 domain.com_295801a0181@resource.calendar.google.com

我需要一个脚本来读取“表单响应”电子表格中用户提交的日历名称数据，在“资源”电子表格中搜索相同的数据，并在指定列中以逗号分隔值返回替换的 Google 日历资源地址在“表格回复”电子表格中。

例子：

用户 1 提交了他想在日历“Pear”和“Apple”上预订活动的数据

用户 2 提交他想在日历“橙色”和“苹果”上预订活动的数据

用户 3 提交了他想在日历“Pear”、“Apple”和“Orange”上预订活动的数据

在“Form Responses”电子表格中，创建了三行数据。一列包含每个提交的日历数据。

所以：

J2 含梨、苹果

J3 含橙、苹果

J4 包含梨、苹果、橙子

我希望表单响应电子表格末尾的一列填充资源等价物，从“资源”电子表格中提取。

所以：

Z2 包含 domain.com_928313sdf98@resource.calendar.google.com、domain.com_190382d0931@resource.calendar.google.com

Z3 包含 domain.com_295801a0181@resource.calendar.google.com、domain.com_190382d0931@resource.calendar.google.com

Z4 包含 domain.com_928313sdf98@resource.calendar.google.com、domain.com_190382d0931@resource.calendar.google.com、domain.com_295801a0181@resource.calendar.google.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:46:59.037

使用数组管理这非常简单。

1.  带您使用逗号分隔值的单元格并将其拆分为逗号（这是默认拆分元素）。例如：你会得到一个元素`var calNamestoWrite = cell.split(',');`数组`n`
2.  使用第二张纸读取您`getValues()`的内容，以便您获得与 sheet2 中的行一样多的元素的二维数组。例如 ：`var calNames = ss.sheet2.getDataRange().getValues();`

然后在双 for 循环中，您可以通过比较简单地检查日历名称

```
if(calNamestoWrite[n]==calNames[c][0]){ var calID = calNames[c][1] ... and do the other stuf...} 
```

因为第一列是名称，第二列是日历资源 ID。

`n`迭代`calNamestoWrite`数组并`c`从 sheet2 迭代数组。

等等，这将花费你几分钟的时间来写。

# javascript - onmouseover 和 onmouseout 调整图像大小

> ID：15395660
> 
> 赞同：0
> 
> 时间：2013-03-13T20:18:47.160
> 
> 标签：javascript, onmouseover, onmouseout

我试图将鼠标悬停在几张图像上，然后图像会调整大小，但不知何故，假设我有三张图像。如果我的鼠标在第一个图像上，那么所有三个都将调整大小如果我将鼠标悬停在第三个然后是第二个然后第一个然后它会一个一个地调整大小，而不是一次调整所有三个的大小。我刚开始使用javascript，所以还不太了解。除非我知道更高级的方法，否则它是这样工作的吗？

我也想这样做，所以当我的鼠标不在时，图像会恢复为默认值，但我不确定我应该怎么做......

这就是我所拥有的...

```
<script>
var div1Images=document.getElementById("div1").getElementsByTagName("img");

for(i=0;i<div1Images.length;i++)
{
    div1Images[i].onmouseover=function()
    {
    this.style.width="100px";
    }
}
</script>

<body>
<div id="div1">
<img src="cat.jpg" id="im1"/>
<img src="dog.jpg" id="im2"/>
<img src="fish.jpg" id="im3"/>
</div><!--close div1-->
</body> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:21:31.720

You can do this with CSS:

```
<img class="mypic" src="cat.jpg" id="im1"/>

.myPic:hover {
      width:100px;
} 
```

# javascript - 测试套接字是否仍然打开

> ID：15395662
> 
> 赞同：2
> 
> 时间：2013-03-13T20:18:54.210
> 
> 标签：javascript, node.js, websocket, socket.io

按照[上一个问题](https://stackoverflow.com/questions/15255969/socket-io-client-to-client-messaging)的说明，我现在在 socket.io 中有一组已连接的用户。我的问题（我在答案中被警告过）是即使在浏览器断开连接后套接字仍保留在此数组中。

我尝试在函数中从数组中删除套接字`socket.on('disconnect'` ，但是在浏览器断开连接和 socket.io 触发断开连接之间仍有约 1 分钟的延迟。

“测试”套接字以查看其是否真的存在的最佳方法是什么？我很想尝试发送消息并捕获任何错误，但我觉得有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-15T12:01:47.847

关于如何测试“套接字是否仍然打开”的解决方案

```
if(socket.readyState === socket.OPEN)
{
} 
```

为什么有效：

> readyState = 连接的当前状态；这是就绪状态常量之一。只读。
> 
> “就绪状态常量”
> CONNECTING 0：连接尚未打开。
> OPEN 1：连接已打开并准备好进行通信。
> CLOSING 2：连接正在关闭。
> CLOSED 3：连接已关闭或无法打开。

[https://developer.mozilla.org/en-US/docs/Web/API/WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:22:17.777

```
socket.on('end',function(){
//your code
}) 
```

或者

```
socket.on('error',function(err){
//in case of any errors
}) 
```

在所有客户端断开连接之前，断开连接事件不会触发！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:39:39.727

我的断开连接处理程序出错。我最终使用的是：

```
socket.on('disconnect', function() {
    users.splice(users.indexOf(socket), 1);
}); 
```

# php - 删除 %20 并使用 & 传递值 $_GET

> ID：15395663
> 
> 赞同：0
> 
> 时间：2013-03-13T20:18:56.293
> 
> 标签：php, jquery

我正在尝试通过链接发送一个值并使用 $_GET 获取其他文件上的值，但问题是该值`&`介于两个单词之间，并且在 url 中它就像

`list.php?v=Bakery%20&%20Cake%20Design`

当我在第二页中回显这个值时，它`bakery`变成了`bakery cake & design`. 由于我在单击时通过 jquery 从第一页发送此值，因此我尝试使用从链接`encodeURI()`中删除该值`%20`，但它仍然无济于事，因为`%20 &`当我回显该值时，之后的部分未打印在第二页上。我的jQuery代码是

`var vendor = $(this).text().replace(/\s/g,"%20");`在这我试图通过`replace`too 删除它。但还是没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-10T12:24:49.453

您不需要删除 %20 只需检查变量和值之间不应该有任何空格！

这将产生 %20 ：

```
echo '<td><b><font color="#663300"><a href="deactivate.php?id =' . $row['ID'] . '">Deactivate User</a></font></b></td>'; 
```

这不会：

```
`echo '<td><b><font color="#663300"><a href="deactivate.php?id=' . $row['ID'] . '">Deactivate User</a></font></b></td>';` 
```

原因：之间只是一个空格`(php?id ='.$row)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:20:11.573

使用[URL 解码器功能](http://php.net/manual/en/function.urldecode.php)

```
echo urldecode("A%20B") // will print 'A B' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:31:14.733

在 JS 方面，您需要`encodeURIComponent()`在带有 & 符号的项目上使用。

```
var title = encodeURIComponent('bakery cake & design'); // bakery%20cake%20%26%20design 
```

与之相反`encodeURI`：

> 请注意，encodeURI 本身不能形成正确的 HTTP GET 和 POST 请求，例如 XMLHTTPRequests，因为“&”、“+”和“=”未编码，它们在 GET 和 POST 请求中被视为特殊字符。然而，encodeURIComponent 确实对这些字符进行了编码。这些行为很可能在浏览器中不一致。

# asp.net - 在 IIS 8.0 上设置 asp.net 项目时出现 HTTP 错误 404.17

> ID：15395665
> 
> 赞同：7
> 
> 时间：2013-03-13T20:19:02.167
> 
> 标签：asp.net, .net, iis, webserver, iis-8

我正在尝试在我的 Windows 8 机器上的 IIS 8.0 上设置现有的 asp.net 应用程序，它给了我以下错误消息。

```
HTTP Error 404.17 - Not Found
The requested content appears to be script and will not be served by the static file handler. 
```

我用谷歌搜索了一段时间，并试图用几种解决方案来解决这个问题，比如手动注册 asp.net。但是，它仍然无法正常工作。大多数解决方案都适用于 IIS 7.5，问题是否相同。

任何想法！非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-27T20:50:43.833

正如 Gearhart 所指的博主所指出的，问题可能是没有为 IIS 安装 .NET 3.5。3.5 处理包括 2.0 在内的下层应用程序。

博客中的过程看起来很简单，可能工作正常。然而，微软的“官方”程序看起来不同：

第 1 步：安装 IIS 和 ASP.NET 模块
[http://technet.microsoft.com/en-us/library/hh831475.aspx](http://technet.microsoft.com/en-us/library/hh831475.aspx)

向下滚动到 Windows 8 部分。（我使用的是 Server 2012，该过程对我有用。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:12:25.037

有同样的问题 se 解决方案的链接

[http://www.bitshop.com/Blogs/tabid/95/EntryId/110/-Net-wont-run-HTTP-Error-404-17-Not-Found.aspx](http://www.bitshop.com/Blogs/tabid/95/EntryId/110/-Net-wont-run-HTTP-Error-404-17-Not-Found.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-27T14:50:02.863

我在 Server 2012 R2 上遇到了这个问题。[对我来说，此处](http://www.bitshop.com/Blogs/tabid/95/EntryId/110/-Net-wont-run-HTTP-Error-404-17-Not-Found.aspx)记录的修复工作有效。

在本质上...

修复很简单：

*   启动命令提示符 - 开始 - cmd.exe
*   cd C:\Windows\Microsoft.NET\Framework64\v2.0.50727
*   aspnet_regiis -ir

您应该看到如下输出：

```
Start installing ASP.NET (2.0.50727).
................
Finished installing ASP.NET (2.0.50727). 
```

此时，如果您刷新页面，它应该可以正常工作。高温高压

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-17T13:38:05.033

谢谢它的工作。

我有同样的错误......我运行命令提示符

HTTP 错误 404.17 - 未找到 请求的内容似乎是脚本，不会由静态文件处理程序提供服务。最可能的原因：

```
The request matched a wildcard mime map. The request is mapped to the static file handler. If there were different pre-conditions, the request will map to a different handler. 
```

你可以尝试的事情：

```
If you want to serve this content as a static file, add an explicit MIME map. 
```

详细错误信息：Module StaticFileModule Notification ExecuteRequestHandler Handler StaticFile Error Code 0x80070032 Requested URL [http://localhost:8080/WebForms/index.aspx](http://localhost:8080/WebForms/index.aspx) 物理路径 C:\inetpub\wwwroot\HRMS\WebForms\index.aspx 登录方式匿名登录用户匿名请求跟踪目录 C:\inetpub\logs\FailedReqLogFiles

# javascript - 通过单击图像转换 div 的文本

> ID：15395670
> 
> 赞同：0
> 
> 时间：2013-03-13T20:19:20.463
> 
> 标签：javascript, jquery, flexslider

对 js 来说非常新，但它就在这里。

我希望能够单击“投资组合”部分中的其中一个图像，并让它通过淡入淡出转换更改“文本”部分中 h3 的文本，并在滑块中选择相应的幻灯片。

代码：

```
<!-- 960 Container -->
<div class="container">

    <!-- Description -->
    <div class="sixteen columns">

        <!-- Text -->
            <h3 class="page_headline">Why Do You Need Manage+ For Your Business?</h3>

        <div class="flexslider">
            <ul class="slides">

                <li>
                <div id="details">Tier-1 Tech Support</div>
                </li>

                <li>
                <div id="details">Off-site Backups</div>
                </li>

                <li>
                <div id="details">Loaner Computer</div>
                </li>

             </ul>
        </div>
    </div><!-- End Description-->

    <!-- Portfolio Content -->
    <div id="portfolio-wrapper">

        <!-- 1/4 Column -->
        <div class="four columns portfolio-item">
                <div class="item-img"><a href="support.html"><img src="img/support.jpg" alt=""/>
                <div class="overlay link"></div></a></div>
                <div class="portfolio-item-meta">
                    <h4><a href="support.html">Tier-1 Tech Support</a></h4>
                </div>
        </div>

        <!-- 1/4 Column -->
        <div class="four columns portfolio-item">
                <div class="item-img"><a href="backup.html"><img src="img/backup.jpg" alt=""/>
                <div class="overlay link"></div></a></div>
                <div class="portfolio-item-meta">
                    <h4><a href="backup.html">Off-site Backups</a></h4>
                </div>
        </div>

        <!-- 1/4 Column -->
        <div class="four columns portfolio-item">
                <div class="item-img"><a href="loaner.html"><img src="img/loaner.jpg" alt=""/>
                <div class="overlay link"></div></a></div>
                <div class="portfolio-item-meta">
                    <h4><a href="loaner.html">Loaner Computer</a></h4>
                </div>
        </div>

    </div><!-- End Portfolio Content -->

</div><!-- End 960 Container --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:27:17.383

所有你需要的是平面 javascript 或较少的代码，jquery。

只需将您的 img 和您的 div 放在标记中，并将 img 的 click 事件绑定到您切换除法显示的功能

您可以有多个图像，指的是多个容器（或相同的容器），默认情况下它们是隐藏的，但是当您单击相关图像时，它会出现。

看下面的代码

创建您的标记，如：

```
<div class="wrapper">
    <div class="image">
        <img src='../images/actions_button_ok.png' data-target="one" />
        <img src='../images/actions_button_ok.png' data-target="two" />
        <img src='../images/actions_button_ok.png' data-target="three" />
   </div>
        <div class="target" id="one" >
           this is text A
        </div>
        <div class="target" id="two" >
           this is text B
        </div>
        <div class="target" id="three" >
           this is text C
        </div>
  </div> 
```

和你的jQuery代码：

```
$(document).ready(function(){
    $('img').on("click",function(){
       $('.target').hide();
       $('#'+$(this).data('target')).toggle(1000);
    });    
}); 
```

基本上，您的 html 结构可以由您选择，但您应该这样做。探索更多关于 jquery 的信息。

看到这个[小提琴](http://jsfiddle.net/manishmishra256/V9QyU/2/)。

而不是将click绑定到img，您也可以将其绑定到您的li。

# c# - 在 Windows 窗体应用程序中控制多个视图

> ID：15395671
> 
> 赞同：0
> 
> 时间：2013-03-13T20:19:23.930
> 
> 标签：c#, windows, winforms, visual-studio-2012

我对 Windows 编程非常陌生，但在 Mac OSX 和 iOS 编程方面有很多经验。我正在创建我的第一个 Windows 应用程序并遇到了问题。我有一个 Windows 窗体应用程序，窗体上从左到右有三个视图。第一个是 TreeView，另外两个是 ListView。我希望每个视图都有自己的类来处理每个视图的数据和事件。在我的 Mac 应用程序中，我将创建三个视图控制器类（带有 nib），然后将它们添加到主视图中。

在 Windows 窗体应用程序中执行此操作的正确方法是什么？

如果这有什么不同，我正在使用 Visual Studio 2012 和 C# 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:41:46.503

我在这里推荐你看一下 MVP（Model View Presenter）模式，它有两种主要的风格：监督控制器和被动视图。

基本上，通过介绍这些控制器，你已经熟悉了 MVC 模式，这里也是一样的，原理都是一样的；）

也许您期望一个库或工具为您自动执行此操作，嗯……也许是个坏消息 :) 我从未使用过这样的“工具”，因为我喜欢完全控制这些东西，而且它们并不太复杂好。您可以使用某些 MVP 框架，它们可以为您实现一些东西，但同样，我从未在 WinForms 中使用过这些框架，而且我知道其中大部分已经过时了。

也许您应该考虑尝试 WPF 而不是 WinForms？

# ios - RestKit CoreData 一对多关系映射，To Many 部分不起作用

> ID：15395672
> 
> 赞同：3
> 
> 时间：2013-03-13T20:19:29.230
> 
> 标签：ios, mapping, restkit, relationship

我正在使用 RestKit 0.20 映射 2 个实体。存在一对多关系。

教师<->>学校班级

这是老师.h

```
@class SchoolClass;

@interface Teacher : NSManagedObject

@property (nonatomic, retain) NSString * firstName;
@property (nonatomic, retain) NSString * lastName;
@property (nonatomic, retain) NSNumber * teacherId;
@property (nonatomic, retain) NSSet *teachesClass;
@end

@interface Teacher (CoreDataGeneratedAccessors)

- (void)addTeachesClassObject:(SchoolClass *)value;
- (void)removeTeachesClassObject:(SchoolClass *)value;
- (void)addTeachesClass:(NSSet *)values;
- (void)removeTeachesClass:(NSSet *)values;

@end 
```

这是 SchoolClass.h

```
@interface SchoolClass : NSManagedObject

@property (nonatomic, retain) NSString * classCodeId;
@property (nonatomic, retain) NSString * classDesc;
@property (nonatomic, retain) NSString * classRoom;
@property (nonatomic, retain) Teacher *classTeacher;

@end 
```

关系映射的代码是：

```
[classMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"teacher" toKeyPath:@"classTeacher" withMapping:teacherMapping]]; 
```

结果是在 SchoolClass 对象中，正确添加了 classTeacher 属性。但是在 Teacher 对象中，teacherClass 属性都是空的。这是预期的行为还是我错过了什么？

谢谢雷

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T04:25:35.480

不知何故，问题现在消失了。现在所有的关系都运作良好。不确定到底发生了什么。可能是因为我在更改 json 后对模拟器进行了重置。之前json结果有问题导致双方关系出现问题。修复后，SchoolClass 对象正常，但 Teacher 对象存在关系问题。现在两个都很好。

# jquery - jquery隐藏元素的实例

> ID：15395677
> 
> 赞同：1
> 
> 时间：2013-03-13T20:19:53.967
> 
> 标签：jquery

我只想切换在单击操作上滑动的 div 中的“.plus”和“.minus”元素。

**HTML**

```
<div class="notification-box-heading">
    This is an Alert! 
    <span class="plus"><img src="http://www.cti-w.com/images/info.png"></span>
    <span class="minus"><img src="http://www.cti-w.com/images/close.png"></span>
</div>

<div class="notification-box-body"> 
    <strong>This is an alert!</strong>
    <p>This is the alert subtext.</p>
</div>

<div class="notification-box-heading">
    This is another Alert! 
    <span class="plus"><img src="http://www.cti-w.com/images/info.png"></span>
    <span class="minus"><img src="http://www.cti-w.com/images/close.png"></span>
</div>

<div class="notification-box-body"> 
    <strong>This is an alert!</strong>
    <p>This is the alert subtext.</p>
</div> 
```

**JS**

```
$(document).ready(function () {
    //hide the all of the element with class notification-box-body
    $(".notification-box-body").hide();
    //hide the all of the element with class minus
    $(".minus").hide();
    //slides the element with class "notification-box-body" when paragraph with class "notification-box-heading" is clicked 
    $(".notification-box-heading").click(function () {
        $(this).next("div.notification-box-body").slideToggle(300);
        $(".minus").toggle();
        $(".plus").toggle();
    });
}); 
```

**[http://jsfiddle.net/tqD6S/2/](http://jsfiddle.net/tqD6S/2/)**

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:21:54.000

```
 $(".minus", this).toggle();
    $(".plus", this).toggle(); 
```

第二个参数定义范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:22:44.397

被切换*的*`.notification-box-body`元素不是包含and元素的元素。相反，容器元素实际上是被单击的元素，.*`.minus``.plus``.notification-box-heading`*

 *尝试：

```
$(".notification-box-heading").click(function () {
    $(this).next("div.notification-box-body").slideToggle(300);
    $(this).find(".minus,.plus").toggle();
}); 
```

参见**[jsFiddle 演示](http://jsfiddle.net/soboaz/tqD6S/5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:22:52.180

```
$(document).ready(function () {
    //hide the all of the element with class notification-box-body
    $(".notification-box-body").hide();
    //hide the all of the element with class minus
    $(".minus").hide();
    //slides the element with class "notification-box-body" when paragraph with class "notification-box-heading" is clicked 
    $(".notification-box-heading").click(function () {
        $(this).next("div.notification-box-body").slideToggle(300);
        $(this).find(".minus").toggle();
        $(this).find(".plus").toggle();
    });
}); 
```

[jsFiddle](http://jsfiddle.net/Bxw3j/)*

# iframe - iframe 还是替代方案？

> ID：15395679
> 
> 赞同：0
> 
> 时间：2013-03-13T20:20:00.473
> 
> 标签：iframe

我正在寻找一种解决方案，能够显示来自外部 URL 的内容，该 URL 应该在页眉和页脚 div 之间动态匹配访问者的浏览器的高度和宽度。可以在[这里](http://imgur.com/pxBiWAo)找到一个非常基本的插图。我希望以最大的兼容性来实现这一目标。有人对此有任何想法/经验吗？从现在开始，我将不胜感激任何意见。

提前致谢。

# ruby-on-rails-3 - Rails - 如何链接到另一个对象的形式？

> ID：15395680
> 
> 赞同：0
> 
> 时间：2013-03-13T20:20:06.837
> 
> 标签：ruby-on-rails-3

我想从我的应用程序的一部分`link_to`“创建设备表单” 。我想传递和以在将要创建的新设备中使用。link_to 语句的语法是什么？这是我到目前为止所拥有的：`show_rfid``show_cabinet``rfid_id``cabinet_id`

```
<%= link_to "Create New Device (non-functional)", ???????, :class => "btn btn-primary" %> 
```

奖励：我希望创建设备页面上的提交按钮将它们带回`show_cabinet`页面，如果那是它们来自的地方。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:24:03.240

您可以使用：

```
<%= link_to "Create New Device (non-functional)", new_device_path({:rfid => @rfid_id, cabinet_id: => @cabinet_id}), :class => "btn btn-primary" %> 
```

假设`Device`是类，并且您的`new`操作可以选择接受这些参数。

# cakephp - CakePHP 烘焙生成身份验证组件用户操作

> ID：15395689
> 
> 赞同：0
> 
> 时间：2013-03-13T20:20:28.890
> 
> 标签：cakephp, authorization, cakephp-bake

我敢肯定有一个相对简单的答案。我正在尝试使用 CakePHP 2.0 从命令行烘焙应用程序，并且我希望 cake为我的模型创建基本`AuthComponent`方法。`user`用户的数据库表名为`users`，其中包括 auth`username`和的两个必要字段`password`。

我已经能够包含`AuthComponent`在我`usersController`的 from bake 中，但未能成功地让它`usersController`为 auth 生成基本操作，例如`login()`和`logout()`。

我怎样才能做到这一点？生成这个骨架代码将有助于节省大量时间。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:09:04.583

默认烘焙模板仅适用于 CRUD（create=add、read=index、view update=edit、delete=delete），不适用于其余部分。但是根据您的需要自定义模板相当简单。

尽管登录/注销是一次性的方法，并且没有任何意义被烘焙。手动“制作”它们更容易，更快捷。登录使用添加模板作为基础，注销不需要任何视图。

# c# - 数据绑定---使用 DropDownList 在组合框中插入空行

> ID：15395692
> 
> 赞同：1
> 
> 时间：2013-03-13T20:20:41.760
> 
> 标签：c#, winforms

我是 Visual Studio 的新手，正在修复应用程序中的一个小错误。

存在的组合框可以使用 DropDown 进行编辑，即使它具有数据绑定。因为如果我删除了一个值，它不会保存更改，所以我把它变成了一个 DropDownList；但是，现在我没有使用 null 的选项。

我四处搜索并一直在阅读我可以在数据绑定之前插入一个项目。我有这个组合框的不同功能的代码的点点滴滴。不确定在哪里进行更改。

如果有人能指出我正确的方向，那就太好了。

```
private System.Windows.Forms.ComboBox cmbSecCSR;
//----------------
this.cmbSecCSR = new System.Windows.Forms.ComboBox();
//---------------------
// cmbSecCSR
// 
this.cmbSecCSR.AccessibleRole = System.Windows.Forms.AccessibleRole.TitleBar;
this.cmbSecCSR.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
this.cmbSecCSR.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.cmbSecCSR.DataSource = this.csrBindingSource2;
this.cmbSecCSR.DisplayMember = "Name";
this.cmbSecCSR.FormattingEnabled = true;
this.cmbSecCSR.Location = new System.Drawing.Point(112, 26);
this.cmbSecCSR.Margin = new System.Windows.Forms.Padding(0);
this.cmbSecCSR.MaxDropDownItems = 10;
this.cmbSecCSR.Name = "cmbSecCSR";
this.cmbSecCSR.Size = new System.Drawing.Size(184, 21);
this.cmbSecCSR.TabIndex = 2;
this.cmbSecCSR.ValueMember = "Username";
this.cmbSecCSR.TextChanged += new System.EventHandler(this.comboBox_TextChanged);
this.cmbSecCSR.Enter += new System.EventHandler(this.cmbBox_Entered);
// 
// csrBindingSource2
// 
this.csrBindingSource2.DataMember = "CSR";
this.csrBindingSource2.DataSource = this.productionDS;
//-------------------------
//loadUnboundData(); 
cmbSecCSR.DataBindings.Add("SelectedValue", productionMasterBindingSource, "CSR2", true, DataSourceUpdateMode.OnPropertyChanged); 
```

我的问题与此类似：[http ://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/fa277629-a65b-4799-9400-364f6f771739/](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/fa277629-a65b-4799-9400-364f6f771739/)

这就是我决定将其更改为 DropDownList 的原因；但是，我不知道如何在 DropDownList 中添加 NULL 值，因为它是有界的。

# jquery - 如何从 jQuery 生成的链接（通过 append() ）运行 jQuery 函数？

> ID：15395700
> 
> 赞同：0
> 
> 时间：2013-03-13T20:21:18.277
> 
> 标签：jquery, function, append

我在使用 jQuery 时遇到了一点麻烦，希望你能帮助我。我认为这很容易，但我真的不知道:-(

问题是，我通过 jQuery append() 函数编写了一些内容，并且在这个内容中有一个链接，如果按下它应该运行我自己的函数。

示例在这里：http: [//jsfiddle.net/5ahkD/2/](http://jsfiddle.net/5ahkD/2/)

```
$(document).ready(function () {
    $(".add").click(function () {
        $("#items").append('<div id="item">\n\
                   <a href="#" class="delete" id="delete">Delete!</a>\n\
                   Some content inside div element...\n\
                   </div>');
    });

    $(".delete").click(function () {
        $(this).hide();
    });
  }); 
```

“添加项目！” 将生成一些带有链接的内容（“删除！”），单击后该链接应消失。正如您在单独的底部链接中看到的那样，只有当此链接不是通过 append() 写入时才可以...

这几乎可以肯定是愚蠢的容易，但我找不到任何方法来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:22:53.660

您必须将事件处理委托给页面加载期间存在的元素。jQuery 提供的`.on()`方法就是这样做的。

```
$(document).on('click', '.delete', function(){
    $(this).hide(); // will  hide the delete
    // $(this).parent().hide(); //will hide the .item
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:23:43.323

使用[实时事件处理程序](http://api.jquery.com/on/)。它适用于新创建/添加的元素

```
$("#items").on("click", ".delete", function () {
    $(this).hide();
}); 
```

如果要实际删除创建的行，请使用：

```
$(this).parent().remove(); 
```

# glassfish-3 - 具有异步调用的 RequestScoped Logging bean

> ID：15395701
> 
> 赞同：0
> 
> 时间：2013-03-13T20:21:18.997
> 
> 标签：glassfish-3, ejb-3.1

我有一个日志记录 bean，我在其中记录数据库调用和 bean 方法调用通过拦截器花费的时间。

我有一个调用两个 @Asynchronous 方法的 bean。这两个@Asynchronous 方法调用数据库并被拦截。

但是，当日志记录 bean 记录时，数据库似乎已经花费了 0 毫秒，这是不正确的。当我使用这个日志记录 bean 和所有没有 @Asynchronous 调用的拦截器时，一切正常。

我正在使用 glassfish 3.1.2.2。文档[http://glassfish.java.net/nonav/docs/v3/api/javax/enterprise/context/RequestScoped.html](http://glassfish.java.net/nonav/docs/v3/api/javax/enterprise/context/RequestScoped.html)说“请求上下文被破坏：异步观察者通知完成后”，这是否意味着我的@Asynchronous 方法中的日志记录 bean 实例在方法完成时被销毁？我可以用什么来实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:15:55.323

有多个层：

1.  一个 CDI 代理，它运行 CDI 拦截器，然后调用 EJB。
2.  一个 EJB 代理，它安排异步工作并立即返回。
3.  EJB 拦截器，在异步线程上运行。

据推测，您正在使用 CDI 拦截器，它正在测量 EJB 容器*安排*异步工作所需的时间。如果您改用 EJB 拦截器（即，用 注释 EJB 方法），那么您可以测量*执行*`@Interceptors`工作所花费的时间。

# javascript - 如何使用 parseDate()

> ID：15395703
> 
> 赞同：1
> 
> 时间：2013-03-13T20:21:28.533
> 
> 标签：javascript, jquery

`variable`目前输出为`2013-02-05T16:30:01Z`

如何使用 parseDate() 来更改日期的格式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:27:15.653

您可以使用对象日期来定义日期。

```
var d = new Date('2013-02-05T16:30:01Z'); 
```

该变量`d`现在是一个`Date`对象，您可以处理所有日期方法。而且我认为 parseDate() 是一个 jQuery UI 方法 ( `$.datepicker.parseDate`)

# php - SQL查询通过phpMyAdmin返回行但不在网站上

> ID：15395704
> 
> 赞同：0
> 
> 时间：2013-03-13T20:21:28.837
> 
> 标签：php, sql, codeigniter

我遇到了一个奇怪的问题，当我在我的网站上运行它时，我的查询没有返回任何内容，但是当我在 phpMyAdmin 中运行它时它返回 1 行。

```
$query = $this->db->query("SELECT post_date, post_id, ref_user_id FROM forum_posts WHERE post_id = (SELECT MAX(post_id) FROM forum_posts WHERE ref_post_id = $row->ref_post_id AND NOT deleted = 1 LIMIT 1) LIMIT 1");

echo $this->db->last_query().'<br>';
echo $query->num_rows(); 
```

num_rows() gives me 0\. I copy the line of code that last_query() gives me and paste it into phpMyAdmin where it returns 1 row.

Any ideas why I does not work on my web site?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:27:20.150

您需要转义查询中的字符串以引用 PHP 变量：

```
$query = $this->db->query("SELECT post_date, post_id, ref_user_id FROM forum_posts 
         WHERE post_id = (SELECT MAX(post_id) 
                         FROM forum_posts WHERE ref_post_id = " . $row->ref_post_id . " AND NOT deleted = 1 LIMIT 1) LIMIT 1"); 
```

# mysql - 如何在 WordPress 中合并两个 wp_query 对象？

> ID：15395706
> 
> 赞同：0
> 
> 时间：2013-03-13T20:21:32.350
> 
> 标签：mysql, wordpress

我有一个 wp_query 请求，它要求一个类别和一个元值。“问题”是它返回指定类别中的帖子，该类别也具有该元值。我知道这就是它的工作原理。

我想要得到的是类别和元值的混合。例如，如果我把

```
$query = new WP_Query(array('cat' => 3,'meta_value' => 'football')) 
```

我得到了第 3 类的足球帖子。我需要的是所有关于足球的帖子和第 3 类的所有帖子。

* * *

编辑

我正在尝试将此 SQL 语句与 wpdb 一起使用

```
SELECT *
     FROM $wpdb->postmeta pm
     JOIN $wpdb->posts p
        ON pm.post_id = p.ID
     JOIN $wpdb->term_relationships tr
        ON tr.object_id = p.ID
     JOIN $wpdb->term_taxonomy tt
        on tt.term_taxonomy_id = tr.term_taxonomy_id
     WHERE pm.meta_value = 'project'
     OR (tt.term_taxonomy_id IN('3') AND tt.taxonomy = 'category') 
```

我正在获取我需要的帖子和所需的数据，但有些帖子（即具有该类别的帖子）被多次复制。SELECT DISTINCT 不影响输出。

# nginx - flask + nginx = 连接被拒绝

> ID：15395707
> 
> 赞同：1
> 
> 时间：2013-03-13T20:21:33.347
> 
> 标签：nginx

嗨，我正在尝试让 nginx 和烧瓶在我的本地机器上启动并运行。

我可以用 nginx 很好地服务器静态文件，但我一直遇到 uwsgi 的连接问题。

**我的 nginx：**

```
server {
    listen       80;
    server_name  localhost;

location /static {
    alias /path/to/my/static;
    autoindex  on;
}

location /media {
    alias  /media;
    autoindex  on;
}

location / {
    include uwsgi_params;
    uwsgi_pass unix:/tmp/uwsgi.sock;
    uwsgi_param UWSGI_PYHOME /path/to/my/env;
    uwsgi_param UWSGI_CHDIR /path/to/my/app;
    uwsgi_param UWSGI_MODULE application;
    uwsgi_param UWSGI_CALLABLE app;
}

error_page   404              /404.html;

error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root   /usr/share/nginx/html;
} 
```

}

**/etc/uwsgi/apps-available/uwsgi.ini：**

```
[uwsgi]
plugins=python
vhost=true
socket=/tmp/uwsgi.sock 
```

但是如果我尝试 localhost/，我会在 nginx 错误日志中找到：

```
[error] 1021#0: *16 connect() to unix:/tmp/uwsgi.sock failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: localhost, request: "GET /favicon.ico HTTP/1.1", upstream: "uwsgi://unix:/tmp/uwsgi.sock:", host: "localhost" 
```

我已经尝试更改权限，但我似乎无法解决这个问题。有人有什么建议吗？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:59:58.000

一些想法：

*   你确定uWSGI正在运行吗？
*   在可用的应用程序中编辑该文件后，您是否重新加载/重新启动它？
*   从名称 (apps-available) 来看，是否还有另一个名为 apps-enabled 的目录，您需要将符号链接放置到 apps-available 中的文件？
*   是否存在 uWSGI 正在编写自己的错误消息的日志文件？

您可以使用`lsof`uWSGI pid（例如`lsof -n -p 12345`）来查看它打开了哪些文件。您应该在 /tmp 中看到套接字以及 /var/log 中某处的日志文件

# regex - 如何使用正则表达式查找化学式

> ID：15395717
> 
> 赞同：2
> 
> 时间：2013-03-13T20:22:05.987
> 
> 标签：regex, scientific-notation

这个问题可能不是一个特定的编程问题，但是，我尝试在科学文本中找到 H20、C02 等化学公式，我使用这个：

```
(?<=[\l\u]|\.)\d+ 
```

这有效 - 但现在也找到了“点”之后的每个浮点数：

```
0.1234 -> 1234 is selected. 
```

有机会防止这种情况吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:27:14.837

您可能还包括一个[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)，以防止前面的点前面有一个数字：

```
(?<=[\l\u.])(?<!\d\.)\d+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:54:13.500

如果您还想匹配 , 之类的字符串，`H2O`可以使用：`CH3CH2CH2CH3``SiO2`

```
(?i)\b[a-z]+(?:\d+[a-z]+)*\b 
```

或者

```
\b(?:[A-Z][a-z]?)+(?:\d+(?:[A-Z][a-z]?)+)*\b 
```

# c# - 编写程序以防止计算机自动重启

> ID：15395720
> 
> 赞同：-3
> 
> 时间：2013-03-13T20:22:09.850
> 
> 标签：c#

我有时会在一夜之间运行进程，有时它们会被我的 IT 部门自动重启而中断。是否可以编写一个 C# 程序来防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:26:40.043

如果您的 IT 部门正在使用 SMS/SCCM、WSUS 或组策略进行更新，那么安装更新并重新启动您的计算机没有办法阻止它们，因为他们使用的是域系统帐户，并且您的帐户可能只是本地管理员而不是域管理员。您可以要求他们从他们的组策略中删除您的 WORKSTATION，或者将您放在 Active Directory 中的不同组织单位中以防止这种情况发生。您还可以安排脚本在其维护窗口之外运行，以防止冲突。

但是请记住，他们推送的大多数更新对于防止计算机上的安全漏洞或以某种方式维护网络和域的完整性至关重要。网络的强度取决于最薄弱的环节。等等等等等等。;)

# javascript - 带有方括号的复选框名称属性的JS语法

> ID：15395722
> 
> 赞同：0
> 
> 时间：2013-03-13T20:22:27.507
> 
> 标签：javascript, arrays, attributes, square-bracket

`name=baz[]`这个函数限制了用户选择的复选框的数量，但是当 name 属性有方括号（即）时，我无法让它工作。

出于某种原因，我无法让这段代码在 jsfiddle 中工作，但它基于[本教程](http://www.plus2net.com/javascript_tutorial/checkbox-limit.php)，它有一个工作演示。

```
function chkcontrol(j) {
    var total = 0;
    for (var i = 0; i < document.form1.baz.length; i++) {
        if (document.form1.baz[i].checked) {
            total = total + 1;
        }
        if (total > 3) {
            alert("Please select up to three choices")
            document.form1.baz[j].checked = false;
            return false;
        }
    }
}

 <form name="form1">
    <input type=checkbox name="baz[]" value="1" onclick="chkcontrol(0);">Item 1
    <input type=checkbox name="baz[]" value="2" onclick="chkcontrol(1);">Item 2
    <input type=checkbox name="baz[]" value="3" onclick="chkcontrol(2);">Item 3
    <input type=checkbox name="baz[]" value="4" onclick="chkcontrol(3);">Item 4
    <input type=checkbox name="baz[]" value="5" onclick="chkcontrol(4);">Item 5

    <input type=submit value="submit">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:52:51.390

Chaya，您的问题实际上源于“[]”是名称的一部分。

虽然有规定可以自动将表单及其命名元素转换为 JS 可访问的对象，但没有规定可以了解哪些元素是数组，而不是非数组，因为这是服务器端的区别：`?baz[]=1&baz[]=2`.

如果你要问，`form1["baz[]"];`你应该得到一个名为的所有元素的列表`"baz[]"`。

从那里，如果你说`form1["baz[]"][0];`你应该得到名为“baz[]”的第一个元素。

当然，您可以编写一些解析魔法来自动查找名称中带有“[]”的所有元素，并将“baz”附加为表单的数组，其中填充了所有名为“baz[]”的元素。在那一点上，你可以完全按照你之前想做的事情去做。

这是否矫枉过正取决于你在做什么。

但是简单地在循环中编写`form1["baz[]"][i]`应该不会比你现在得到的更耗时。

# java - 遍历 Arraylist 时出现 ConcurrentModificationException（不删除）

> ID：15395732
> 
> 赞同：3
> 
> 时间：2013-03-13T20:23:05.413
> 
> 标签：java, android, exception, concurrency

我目前在遍历 ArrayList 时遇到问题。我在这里阅读了几篇文章，但似乎没有什么能解决我的问题。这是我的代码：

```
//restaurants contains a list of all restaurants and i want to filter them
List<Restaurant> newList = new ArrayList<Restaurant>();
List<Restaurant> allRestaurants = new ArrayList<Restaurant>(restaurants);
if (query != null && query.length() > 0 && !query.equals("*")) {
            synchronized (allRestaurants) {
                for (Iterator<Restaurant> it = allRestaurants.iterator(); it
                        .hasNext();) {
                    Restaurant restaurant = it.next();
                    if (restaurant.getCity().contains(query)) {
                        synchronized (newList) {
                            newList.add(restaurant);
                        }
                    } else {
                        newList = allRestaurants;
                    }
                }
            } 
```

这是我用我在这里读过的几个想法修改的代码（同步，使用迭代器而不是 for-each-loop）。我什至已经同步了整个方法，但仍然出现异常。

异常发生在以下行：

```
Restaurant restaurant = it.next(); 
```

我不明白。我不是在操纵这一行中的列表。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:27:00.337

```
else{
    newList = allRestaurants;
} 
```

这几乎肯定是你的问题。

分配`newList`给`allRestaurants`然后添加到`newList`会导致您的共修改。

那是在`newList = allRestaurants`任何添加`newList`将更新mod计数`allRestaurants`并因此更新您的错误之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:28:39.460

在 else 分支

```
else {
   newList = allRestaurants;
} 
```

你设置`newList`为`allRestaurants`. 下一个修改`newList.add(restaurant);`更改了 allRestaurants-list。

`it.next()`调用时抛出异常，因为迭代器检查其源是否已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:29:23.467

失败始于：

```
newList = allRestaurants; 
```

它将两个引用都指向同一个列表（即您正在迭代的那个）。然后执行以下操作：

```
newList.add(restaurant); 
```

修改列表。来自的javadoc `ConcurrentModificationException`：

> 请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:29:27.043

您的问题出在 else 子句中。

```
 newList = allRestaurants; 
```

这就是为什么你会得到例外

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:33:03.067

您不能更改用于循环内迭代的 ArrayList；这就是 ConcurrentModificationException 所说的 ( [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html) ) 并且`newList = allRestaurants;`确实`newList.add(restaurant);`可能​​会更改列表`allRestaurants`。

所以你能做的是

1.  创建另一个列表
2.  将要修改的项目放在该列表中
3.  循环*后将*`addAll`新列表（或`removeAll`）添加/删除到旧列表

 *查看[http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html](http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html)了解更多信息。*

# java - 生成 java 类时出现 wsdl2java 错误

> ID：15395734
> 
> 赞同：0
> 
> 时间：2013-03-13T20:23:12.517
> 
> 标签：java, soap, wsdl, soap-client, wsdl2java

我正在尝试为 PHP SOAP 服务器编写一个 java SOAP 客户端。为了更容易开始，我想通过 wsdl2java 生成 java 类，但不幸的是，我从 wsdl2java 收到以下错误。

[编辑] 我忘了提到，我使用 Axis2 1.6.2 中的 wsdl2java 来生成 java 类。[/编辑]

```
I:\>axis2\bin\wsdl2java -uri i:\axis2\result\tatoo.wsdl -o i:\axis2\result -d adb -s
Using AXIS2_HOME:   i:\axis2
Using JAVA_HOME:    c:\Program Files\Java\jdk1.6.0_33
Retrieving document at 'i:\axis2\result\tatoo.wsdl'.
log4j:WARN No appenders could be found for logger (org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" org.apache.axis2.wsdl.codegen.CodeGenerationException: Error parsing WSDL
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.<init>(CodeGenerationEngine.java:175)
        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
Caused by: org.apache.axis2.AxisFault
        at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
        at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateService(WSDL11ToAxisServiceBuilder.java:411)
        at org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder.populateAllServices(WSDL11ToAllAxisServicesBuilder.java:107)
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.<init>(CodeGenerationEngine.java:169)
        ... 2 more
Caused by: java.lang.NullPointerException
        at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.findBinding(WSDL11ToAxisServiceBuilder.java:1084)
        at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateService(WSDL11ToAxisServiceBuilder.java:341)
        ... 4 more 
```

这是我的 wsdl 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions name="TatooWebserviceDefinition" xmlns:tns="http://wafriv.de/tatoo_webservice/wsdl.php" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns="http://schemas.xmlsoap.org/wsdl/">
    <types>
        <xsd:schema>
            <xsd:complexType name="gameList">
                <xsd:sequence>
                    <xsd:element name="game" type="game" minOccurs="1" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="game">
                <xsd:sequence>
                    <xsd:element name="name" type="xsd:string" />
                    <xsd:element name="version" type="xsd:integer" />
                    <xsd:element name="edition" type="xsd:integer" />
                    <xsd:element name="gameID" type="xsd:string" />
                    <xsd:element name="creator" type="xsd:string" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="codexList">
                <xsd:sequence>
                    <xsd:element name="codex" type="codex" minOccurs="1" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="codex">
                <xsd:sequence>
                    <xsd:element name="name" type="xsd:string" />
                    <xsd:element name="version" type="xsd:integer" />
                    <xsd:element name="edition" type="xsd:integer" />
                    <xsd:element name="codexID" type="xsd:string" />
                    <xsd:element name="creator" type="xsd:string" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:schema>
    </types>
    <message name="gameUploadRequest">
        <part name="name" type="xsd:string" />
        <part name="gameID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
        <part name="creator" type="xsd:string" />
        <part name="createDateTime" type="xsd:dateTime" />
        <part name="gameData" type="xsd:string" />
    </message>
    <message name="gameUploadResponse">
        <part name="response" type="xsd:string" />
    </message>
    <message name="codexUploadRequest">
        <part name="name" type="xsd:string" />
        <part name="gameID" type="xsd:string" />
        <part name="gameVersion" type="xsd:integer" />
        <part name="gameEdition" type="xsd:integer" />
        <part name="codexID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
        <part name="creator" type="xsd:string" />
        <part name="createDateTime" type="xsd:dateTime" />
        <part name="codexData" type="xsd:string" />
    </message>
    <message name="codexUploadResponse">
        <part name="response" type="xsd:string" />
    </message>
    <message name="getGameListRequest">
        <part name="versions" type="xsd:string" />
    </message>
    <message name="getGameListResponse">
        <part name="gameList" type="tns:gameList" />
    </message>
    <message name="getCodexListRequest">
        <part name="gameID" type="xsd:string" />
        <part name="gameVersion" type="xsd:integer" />
        <part name="gameEdition" type="xsd:integer" />
        <part name="versions" type="xsd:string" />
    </message>
    <message name="getCodexListResponse">
        <part name="codexList" type="tns:codexList" />
    </message>
    <message name="getGameRequest">
        <part name="gameID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
    </message>
    <message name="getGameResponse">
        <part name="gameData" type="xsd:string" />
    </message>
    <message name="getCodexRequest">
        <part name="codexID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
    </message>
    <message name="getCodexResponse">
        <part name="codexData" type="xsd:string" />
    </message>
    <portType name="TatooWebservicePortType">
        <operation name="gameUpload">
            <input message="gameUploadRequest" />
            <output message="gameUploadResponse" />
        </operation>
        <operation name="codexUpload">
            <input message="codexUploadRequest" />
            <output message="codexUploadResponse" />
        </operation>
        <operation name="getGameList">
            <input message="getGameListRequest" />
            <output message="getGameListResponse" />
        </operation>
        <operation name="getCodexList">
            <input message="getCodexListRequest" />
            <output message="getCodexListResponse" />
        </operation>
        <operation name="getGame">
            <input message="getGameRequest" />
            <output message="getGameResponse" />
        </operation>
        <operation name="getCodex">
            <input message="getCodexRequest" />
            <output message="getCodexResponse" />
        </operation>
    </portType>
    <binding name="TatooWebserviceBinding" type="tns:TatooWebservicePortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
        <operation name="gameUpload">
            <soap:operation soapAction="urn:gameUpload" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="codexUpload">
            <soap:operation soapAction="urn:codexUpload" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getGameList">
            <soap:operation soapAction="urn:getGameList" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getCodexList">
            <soap:operation soapAction="urn:getCodexList" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getGame">
            <soap:operation soapAction="urn:getGame" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getCodex">
            <soap:operation soapAction="urn:getCodex" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
    </binding>
    <service name="TatooWebservice">
        <port name="TatooWebservicePort" binding="tns:TatooWebserviceBinding">
            <soap:address location="http://wafriv.de/tatoo_webservice/index.php" />
        </port>
    </service>
</definitions> 
```

我已经搜索了 stackoverflow 和其他各种页面，但找不到任何有用的东西。如果有人可以帮助我解决这个问题，那就太好了。

问候内森

[编辑]

我尝试使用 Apache CXF 验证器验证 WSDL。它抛出以下错误：

```
WSIBP Validator found <{http://wafriv.de/tatoo_webservice/wsdl.php}blaBinding> is NOT a SOAP binding
WSDLValidator Error :
 Summary:  Failures: 1, Warnings: 0

 <<< ERROR!
file:/c:/Users/Neithan/Desktop/bla/tatoo.wsdl:[214,3]
 Caused by {http://wafriv.de/tatoo_webservice/wsdl.php}[binding:blaBinding] not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-10T06:57:21.170

```
Caused by ... [binding:...] not exist. 
```

通常意味着您的 wsdl 文件中的`xmlns:tns`和是不同的。`targetNamespace`

使它们相同，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:18:07.610

看来您的标签错过了`wsdl:`

前任：

```
<wsdl:definitions ... >
    <wsdl:types>
    </wsdl:types>
</wsdl:definitions> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:34:43.500

wsdl 文件中有一些缺失的属性和一些其他错误。以下文件工作正常。

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions name="TatooWebserviceDefinition" targetNamespace="http://wafriv.de/tatoo_webservice/wsdl.php"
             xmlns:tns="http://wafriv.de/tatoo_webservice/wsdl.php"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
             xmlns:x1="http://wafriv.de/tatoo_webservice/wsdl.php/types/"
             xmlns="http://schemas.xmlsoap.org/wsdl/">
    <types>
        <xsd:schema targetNamespace="http://wafriv.de/tatoo_webservice/wsdl.php/types/"
                    xmlns="http://wafriv.de/tatoo_webservice/wsdl.php/types/">
            <xsd:complexType name="gameList">
                <xsd:sequence>
                    <xsd:element name="game" type="game" minOccurs="1" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="game">
                <xsd:sequence>
                    <xsd:element name="name" type="xsd:string" />
                    <xsd:element name="version" type="xsd:integer" />
                    <xsd:element name="edition" type="xsd:integer" />
                    <xsd:element name="gameID" type="xsd:string" />
                    <xsd:element name="creator" type="xsd:string" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="codexList">
                <xsd:sequence>
                    <xsd:element name="codex" type="codex" minOccurs="1" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="codex">
                <xsd:sequence>
                    <xsd:element name="name" type="xsd:string" />
                    <xsd:element name="version" type="xsd:integer" />
                    <xsd:element name="edition" type="xsd:integer" />
                    <xsd:element name="codexID" type="xsd:string" />
                    <xsd:element name="creator" type="xsd:string" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:schema>
    </types>
    <message name="gameUploadRequest">
        <part name="name" type="xsd:string" />
        <part name="gameID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
        <part name="creator" type="xsd:string" />
        <part name="createDateTime" type="xsd:dateTime" />
        <part name="gameData" type="xsd:string" />
    </message>
    <message name="gameUploadResponse">
        <part name="response" type="xsd:string" />
    </message>
    <message name="codexUploadRequest">
        <part name="name" type="xsd:string" />
        <part name="gameID" type="xsd:string" />
        <part name="gameVersion" type="xsd:integer" />
        <part name="gameEdition" type="xsd:integer" />
        <part name="codexID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
        <part name="creator" type="xsd:string" />
        <part name="createDateTime" type="xsd:dateTime" />
        <part name="codexData" type="xsd:string" />
    </message>
    <message name="codexUploadResponse">
        <part name="response" type="xsd:string" />
    </message>
    <message name="getGameListRequest">
        <part name="versions" type="xsd:string" />
    </message>
    <message name="getGameListResponse">
        <part name="gameList" type="x1:gameList" />
    </message>
    <message name="getCodexListRequest">
        <part name="gameID" type="xsd:string" />
        <part name="gameVersion" type="xsd:integer" />
        <part name="gameEdition" type="xsd:integer" />
        <part name="versions" type="xsd:string" />
    </message>
    <message name="getCodexListResponse">
        <part name="codexList" type="x1:codexList" />
    </message>
    <message name="getGameRequest">
        <part name="gameID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
    </message>
    <message name="getGameResponse">
        <part name="gameData" type="xsd:string" />
    </message>
    <message name="getCodexRequest">
        <part name="codexID" type="xsd:string" />
        <part name="version" type="xsd:integer" />
        <part name="edition" type="xsd:integer" />
    </message>
    <message name="getCodexResponse">
        <part name="codexData" type="xsd:string" />
    </message>
    <portType name="TatooWebservicePortType">
        <operation name="gameUpload">
            <input message="tns:gameUploadRequest" />
            <output message="tns:gameUploadResponse" />
        </operation>
        <operation name="codexUpload">
            <input message="tns:codexUploadRequest" />
            <output message="tns:codexUploadResponse" />
        </operation>
        <operation name="getGameList">
            <input message="tns:getGameListRequest" />
            <output message="tns:getGameListResponse" />
        </operation>
        <operation name="getCodexList">
            <input message="tns:getCodexListRequest" />
            <output message="tns:getCodexListResponse" />
        </operation>
        <operation name="getGame">
            <input message="tns:getGameRequest" />
            <output message="tns:getGameResponse" />
        </operation>
        <operation name="getCodex">
            <input message="tns:getCodexRequest" />
            <output message="tns:getCodexResponse" />
        </operation>
    </portType>
    <binding name="TatooWebserviceBinding" type="tns:TatooWebservicePortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
        <operation name="gameUpload">
            <soap:operation soapAction="urn:gameUpload" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="codexUpload">
            <soap:operation soapAction="urn:codexUpload" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getGameList">
            <soap:operation soapAction="urn:getGameList" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getCodexList">
            <soap:operation soapAction="urn:getCodexList" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getGame">
            <soap:operation soapAction="urn:getGame" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
        <operation name="getCodex">
            <soap:operation soapAction="urn:getCodex" style="rpc" />
            <input>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </input>
            <output>
                <soap:body
                    encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                    namespace="urn:xmethodsTatooWebservice"
                    use="encoded" />
            </output>
        </operation>
    </binding>
    <service name="TatooWebservice">
        <documentation>WSDL for the tatoo webservice</documentation>
        <port name="TatooWebservicePort" binding="tns:TatooWebserviceBinding">
            <soap:address location="http://wafriv.de/tatoo_webservice/index.php" />
        </port>
    </service>
</definitions> 
```

# java - FindBugs 可以用来标记使用已被列入黑名单的方法的代码吗？

> ID：15395736
> 
> 赞同：6
> 
> 时间：2013-03-13T20:23:15.670
> 
> 标签：java, findbugs

我们正在尝试将我们非常大的代码库从 Guava 11 迁移到 Guava 14，并希望捕获已删除或已弃用的 API 的使用情况。FindBugs 可以执行这样的检查吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T21:55:07.770

一种解决方案是仅使用 Oracle 的 Java 编译器`javac`来执行此操作。

如果使用 API 中删除的方法会导致编译器错误，因此应该可以通过编译代码找到它们。

可以使用 javac`-deprecation`选项找到不推荐使用的方法。更多信息：http `-deprecation`: [//docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T13:54:54.000

我认为`javac`不会涉及的一个方面是您是否无法更改 3rd 方代码以添加`@Deprecated`注释。如果你只是想避免一个没有被标记为弃用的方法，你可以使用我为 FindBugs 写的这个插件：

[https://github.com/Grundlefleck/FindBugs4Deprecating3rdParty](https://github.com/Grundlefleck/FindBugs4Deprecating3rdParty)

文档很少，因此您可能需要自己探索一下。它允许配置方法和类以避免在属性文件中。我用它来弃用`org.junit.Assert.assertThat`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T22:03:08.723

您也可以使用 PMD [Sourceforge](http://pmd.sourceforge.net/)来完成此任务。有一些规则可以让您找到不推荐使用的方法

# macos - MacVim 替换所有问题

> ID：15395737
> 
> 赞同：0
> 
> 时间：2013-03-13T20:23:18.010
> 
> 标签：macos, macvim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:37:44.907

进入命令行：

```
:%s/—/\&mdash;/g 
```

也可以获得字符代码。将光标放在角色上，然后按**ga**。在替换字符串中使用十进制、十六进制或八进制代码：

```
\%d match specified decimal character
\%x match specified hex character
\%o match specified octal character
\%u match specified multibyte character 
\%U match specified large multibyte character

:%s/\%d8212/\$mdash;/g 
```

# asp.net - Plesk 托管服务器中的水晶报表错误

> ID：15395748
> 
> 赞同：0
> 
> 时间：2013-03-13T20:23:57.243
> 
> 标签：asp.net, crystal-reports

我正在使用 vs2008[asp.net,c#] 和 sql sever2008 开发 Web 应用程序。

我在哪里创建了一个 Crystal Report，但它在托管服务器上生成错误。本地执行完美。

错误信息：

> Crystal Reports 注册表项权限不足或 Crystal Reports 运行时安装不正确。请安装适当的 Crystal Reports 可再发行组件 (CRRedist*.msi)，其中包含所需的正确版本的 Crystal Reports 运行时（x86、x64 或 Itanium）。请访问 [http://www.businessobjects.com/support](http://www.businessobjects.com/support)了解更多信息。
> 
> 第 45 行：ReportDocument cryRpt = new ReportDocument(); 异常详细信息：CrystalDecisions.CrystalReports.Engine.LoadSaveReportException：尝试加载 Crystal Reports 运行时时出错。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:55:59.770

您没有在服务器上安装与设计报表时使用的相同版本的运行时，或者您尝试部署到 64 位服务器。Crystal for VS2008[必须在 32 位模式下运行](http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2011/01/07/how-to-deploy-a-crystal-reports-net-web-application-on-a-64-bit-operating-system)（即使是 64 位包）。

如果您的 Web 服务器是 64 位，请遵循链接文章中的建议（构建为 x86 并以 32 位运行 App Pool）。

或者，升级到 VS2010 或 2012。

# java - 如何在没有插件的情况下在java中播放声音

> ID：15395753
> 
> 赞同：-3
> 
> 时间：2013-03-13T20:24:03.513
> 
> 标签：java, java-3d

我正在阅读 java3d 和其他 java 库，发现许多类的命名方式你可以假设它们曾经有声音，但是我还没有找到任何关于它的教程，而且我尝试过的每个实验都失败了。如何使用这些类？

javax.media.j3d.AudioDevice；javax.media.j3d.声音；等等等等。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.media.j3d.*;
import javax.vecmath.*;

import com.sun.j3d.audioengines.javasound.JavaSoundMixer;
import com.sun.j3d.utils.behaviors.keyboard.KeyNavigatorBehavior;
import com.sun.j3d.utils.geometry.Box;

public class JavaSound extends Frame implements ActionListener
 {
protected Canvas3D myCanvas3D = new Canvas3D(null);

/** The exit button to quit the application */

protected Button exitButton = new Button("Exit");

/** The button to switch on and off the first sound */

protected Button sound1Button = new Button("Sound 1");

/** The button to switch on and off the second sound */

protected Button sound2Button = new Button("Sound 2");

protected BoundingSphere bounds = new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 10000.0);
// Create the two point sounds

PointSound sound1 = new PointSound();

PointSound sound2 = new PointSound();

/**
 * Build the view branch of the scene graph. In this case a key navigation
 * utility object is created and associated with the view transform so that
 * the view can be changed via the keyboard.
 * @return BranchGroup that is the root of the view branch
 */
protected BranchGroup buildViewBranch(Canvas3D c)
{
    BranchGroup viewBranch = new BranchGroup();

    Transform3D viewXfm = new Transform3D();

    viewXfm.set(new Vector3f(0.0f, 0.0f, 30.0f));

    TransformGroup viewXfmGroup = new TransformGroup(viewXfm);

    viewXfmGroup.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);

    viewXfmGroup.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);

    ViewPlatform myViewPlatform = new ViewPlatform();

    BoundingSphere movingBounds = new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 100.0);
    BoundingLeaf boundLeaf = new BoundingLeaf(movingBounds);

    PhysicalBody myBody = new PhysicalBody();

    PhysicalEnvironment myEnvironment = new PhysicalEnvironment();

    viewXfmGroup.addChild(myViewPlatform);

    viewBranch.addChild(viewXfmGroup);

    View myView = new View();

    myView.addCanvas3D(c);

    myView.attachViewPlatform(myViewPlatform);

    myView.setPhysicalBody(myBody);

    myView.setPhysicalEnvironment(myEnvironment);

    KeyNavigatorBehavior keyNav = new KeyNavigatorBehavior(viewXfmGroup);

    keyNav.setSchedulingBounds(movingBounds);

    viewBranch.addChild(keyNav);

    // Create a sounds mixer to use our sounds with

    // and initialise it

    JavaSoundMixer myMixer = new JavaSoundMixer(myEnvironment);

    myMixer.initialize();

    return viewBranch;

}

protected void addLights(BranchGroup b)
{
    Color3f ambLightColour = new Color3f(0.5f, 0.5f, 0.5f);
    AmbientLight ambLight = new AmbientLight(ambLightColour);
    ambLight.setInfluencingBounds(bounds);
    Color3f dirLightColour = new Color3f(1.0f, 1.0f, 1.0f);
    Vector3f dirLightDir = new Vector3f(-1.0f, -1.0f, -1.0f);
    DirectionalLight dirLight = new DirectionalLight(dirLightColour, dirLightDir);
    dirLight.setInfluencingBounds(bounds);
    b.addChild(ambLight);
    b.addChild(dirLight);
}

protected void addBackgroundSound(BranchGroup b, String soundFile)
{
    // Create a media container to load the file
    MediaContainer droneContainer = new MediaContainer(soundFile);
    // Create the background sound from the media container
    BackgroundSound drone = new BackgroundSound(droneContainer, 1.0f);
    // Activate the sound
    drone.setSchedulingBounds(bounds);
    drone.setEnable(true);
    // Set the sound to loop forever
    drone.setLoop(BackgroundSound.INFINITE_LOOPS);
    // Add it to the group
    b.addChild(drone);
}

protected void addObjectSound(TransformGroup tg, PointSound sound, String soundFile, float edge)
{
    // First we get the current transform so that we can
    // position the sound in the same place
    Transform3D objXfm = new Transform3D();
    Vector3f objPosition = new Vector3f();
    tg.getTransform(objXfm);
    objXfm.get(objPosition);
    // Create the media container to load the sound
    MediaContainer soundContainer = new MediaContainer(soundFile);
    // Use the loaded data in the sound
    sound.setSoundData(soundContainer);
    sound.setInitialGain(1.0f);
    // Set the position to that of the given transform
    sound.setPosition(new Point3f(objPosition));
    // Allow use to switch the sound on and off
    sound.setCapability(PointSound.ALLOW_ENABLE_READ);
    sound.setCapability(PointSound.ALLOW_ENABLE_WRITE);
    sound.setSchedulingBounds(bounds);
    // Set it off to start with
    sound.setEnable(false);
    // Set it to loop forever
    sound.setLoop(BackgroundSound.INFINITE_LOOPS);
    // Use the edge value to set to extent of the sound
    Point2f[] attenuation = { new Point2f(0.0f, 1.0f), new Point2f(edge, 0.1f) };
    sound.setDistanceGain(attenuation);
    // Add the sound to the transform group
    tg.addChild(sound);
}

protected BranchGroup buildContentBranch()
{
    // Create the appearance
    Appearance app = new Appearance();
    Color3f ambientColour = new Color3f(1.0f, 0.0f, 0.0f);
    Color3f emissiveColour = new Color3f(0.0f, 0.0f, 0.0f);
    Color3f specularColour = new Color3f(1.0f, 1.0f, 1.0f);
    Color3f diffuseColour = new Color3f(1.0f, 0.0f, 0.0f);
    float shininess = 20.0f;
    app.setMaterial(new Material(ambientColour, emissiveColour, diffuseColour, specularColour, shininess));
    // Make the cube
    Box myCube = new Box(1.0f, 1.0f, 1.0f, app);
    TransformGroup cubeGroup = new TransformGroup();
    BranchGroup contentBranch = new BranchGroup();
    addLights(contentBranch);
    addObjectSound(cubeGroup, sound1, new String("C:\\Users\\Sawyera\\Desktop\\loop1.wav"), 10.0f);
    addObjectSound(cubeGroup, sound2, new String("C:\\Users\\Sawyera\\Desktop\\loop2.wav"), 20.0f);
    addBackgroundSound(contentBranch, new         String("C:\\Users\\Sawyera\\Desktop\\loop3.wav"));
    cubeGroup.addChild(myCube);
    contentBranch.addChild(cubeGroup);
    return contentBranch;
}

public void actionPerformed(ActionEvent e)
{
    if (e.getSource() == exitButton)
    {
        dispose();
        System.exit(0);
    }
    else if (e.getSource() == sound1Button)
    {
        if (sound1.getEnable())
            sound1.setEnable(false);
        else
            sound1.setEnable(true);
    }
    else if (e.getSource() == sound2Button)
    {
        sound2.setEnable(!sound2.getEnable());
    }
}

public JavaSound()
{
    VirtualUniverse myUniverse = new VirtualUniverse();
    Locale myLocale = new Locale(myUniverse);
    // buildUniverse(myCanvas3D);
    myLocale.addBranchGraph(buildContentBranch());
    myLocale.addBranchGraph(buildViewBranch(myCanvas3D));
    setTitle("SimpleSounds");
    setSize(400, 400);
    setLayout(new BorderLayout());
    Panel bottom = new Panel();
    bottom.add(sound1Button);
    bottom.add(sound2Button);
    bottom.add(exitButton);
    add(BorderLayout.CENTER, myCanvas3D);
    add(BorderLayout.SOUTH, bottom);
    exitButton.addActionListener(this);
    sound1Button.addActionListener(this);
    sound2Button.addActionListener(this);
    setVisible(true);
}

public static void main(String[] args)
{
    JavaSound sw = new JavaSound();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:30:53.687

根据 Javadoc：

“graphicsConfiguration - 将用于创建画布的有效 GraphicsConfiguration 对象。**此对象不应为 null** ...” [javax.media.j3d.Canvas3D](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/media/j3d/Canvas3D.html#Canvas3D%28java.awt.GraphicsConfiguration%29 "Javadoc - Canvas3D")

您将其初始化为空：

```
protected Canvas3D myCanvas3D = new Canvas3D(null); 
```

这是教程中使用的初始化：

```
GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
Canvas3D canvas3D = new Canvas3D(config); 
```

# ios - 购买 Inside App xcode

> ID：15395754
> 
> 赞同：0
> 
> 时间：2013-03-13T20:24:06.467
> 
> 标签：ios, xcode

我正在为一家外卖的餐厅开发一个 ios 应用程序。根据 Apple 的指导方针，我不能为此使用应用内购买。我不这么认为。如何让用户提交请求（订单）并使用信用卡在应用程序内付款？

先感谢您！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:37:39.230

正如您所提到的，Apple 不允许使用应用内购买来购买实物商品或产品。但是，**无论如何您也不想使用它**……其他处理器比 Apple 对 IAP 采取的 30% 削减要便宜得多。

相反，您应该使用第三方信用卡处理器和库：

[贝宝](https://www.x.com/developers/paypal/how-to-guides/how-accept-payments-ios-app-using-mpl)

[授权网](https://developer.authorize.net/integration/fifteenminutes/ios)

或另一个这样的处理器。

祝你好运

# android - 如何让我的数据库信息显示在文本视图中？

> ID：15395757
> 
> 赞同：0
> 
> 时间：2013-03-13T20:24:19.780
> 
> 标签：android, sqlite

我能够将数据导入数据库。单击显示时，我不显示它。我错过了什么？我收到 allColumns 无法解析为 displayCourse 文件中的变量的错误。我在我的 courseDataSource 文件中声明了它。我是这个编程的新手，所以我可能会遗漏一些东西。我只是不知道它是什么。

显示课程.java

```
package com.greygoosefarmpa.fencecoursebuilder;
import java.util.ArrayList;
import java.util.List;

import com.google.android.maps.MapActivity;
import com.greygoosefarmpa.db.courseDBOpenHelper;
import com.greygoosefarmpa.db.courseDataSource;
import com.greygoosefarmpa.model.Course;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class displayCourse extends MapActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.displaycourse);

//TextView dc = (TextView) findViewById(R.id.displayCourses);

courseDataSource datasource = new courseDataSource(this);
datasource.open();

List<Course> course = datasource.findAll();

ArrayAdapter<Course> adapter = new ArrayAdapter<Course>   (this,android.R.layout.simple_list_item_1, course);
setListAdapter(adapter);

datasource.close(); 
```

courseDataSource.java

```
public class courseDataSource {

public static final String LOGTAG = "courseDatabase";

SQLiteOpenHelper dbhelper;
SQLiteDatabase database;

public static final String[] allColumns = {
        courseDBOpenHelper.COLUMN_ALOCATION,
        courseDBOpenHelper.COLUMN_BLOCATION,
        courseDBOpenHelper.COLUMN_COURSENAME,
        courseDBOpenHelper.COLUMN_FENCENAME,
        courseDBOpenHelper.COLUMN_ID
};

public courseDataSource(Context context) {
    dbhelper = new courseDBOpenHelper(context);
    database = dbhelper.getWritableDatabase();
}

public void open(){
    Log.i(LOGTAG, "database open");
    database = dbhelper.getWritableDatabase();
}

public void close(){
    Log.i(LOGTAG, "database closed");
    dbhelper.close();
}

public Course create(Course course) {
    ContentValues values = new ContentValues();
    values.put(courseDBOpenHelper.COLUMN_COURSENAME, course.getcourseid());
    values.put(courseDBOpenHelper.COLUMN_FENCENAME, course.getcoursename());
    values.put(courseDBOpenHelper.COLUMN_ALOCATION, course.getAlocation());
    values.put(courseDBOpenHelper.COLUMN_BLOCATION, course.getBlocation());
    long insertid = database.insert(courseDBOpenHelper.TABLE_COURSES, null, values);
    course.setcourseid(insertid);
    return course;
}

public List<Course> findAll() {
    List<Course> courses = new ArrayList<Course>();

    Cursor cursor = database.query(courseDBOpenHelper.TABLE_COURSES, allColumns, null, null, null, null, null);
            Log.i(LOGTAG, "returned " + cursor.getCount() + " rows");
    if (cursor.getCount() > 0) {
        while (cursor.moveToNext()) {
            Course course = new Course();
            course.setcourseid(cursor.getLong(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ID)));
            course.setAlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ALOCATION)));
            course.setBlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_BLOCATION)));
            course.setcoursename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_COURSENAME)));
            course.setfencename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_FENCENAME)));
            courses.add(course);
        }
    }
    return courses;
} 
```

}

课程.java

```
public class Course {
private long courseid;
private String coursename;
private String fencename;
private String Alocation;
private String Blocation;

public long getcourseid(){
    return courseid;
}

public void setcourseid(long courseid) {
    this.courseid = courseid;
}

public String getcoursename(){
    return coursename;
}

public void setcoursename(String string){
    this.coursename = string;
}

public String getfencename(){
    return fencename;
}

public void setfencename(String fencename){
    this.fencename = fencename;
}

public String getAlocation(){
    return Alocation;
}

public void setAlocation(String string){
    this.Alocation = string;
}

public String getBlocation(){
    return Blocation;
}

public void setBlocation(String string){
    this.Blocation = string;
}

} 
```

courseDBOpenHelper.java

```
public class courseDBOpenHelper extends SQLiteOpenHelper {

private static final String LOGTAG = "courseDatabase";

private static final String DATABASE_NAME = "courses.db";
private static final int DATABASE_VERSION = 1;

public static final String TABLE_COURSES = "courses";
public static final String COLUMN_ID = "coursesID";
public static final String COLUMN_COURSENAME = "coursename";
public static final String COLUMN_FENCENAME = "fencename";
public static final String COLUMN_ALOCATION = "alocation";
public static final String COLUMN_BLOCATION = "blocation";

private static final String TABLE_CREATE = 
        "CREATE TABLE " + TABLE_COURSES + " (" +
        COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
        COLUMN_COURSENAME + " TEXT, " +
        COLUMN_FENCENAME + " TEXT, " +
        COLUMN_ALOCATION + " NUMERIC, " +
        COLUMN_BLOCATION +  " NUMBERIC " +
        ")";

public courseDBOpenHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(TABLE_CREATE);
    Log.i(LOGTAG, "table created");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS" + TABLE_COURSES);
    onCreate(db);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:12:49.410

**能够从数据库中获取数据并将其显示在文本视图中。**

我可以看到你的

`TextView dc = (TextView) findViewById(R.id.displayCourses);`

应该可以在 TextView 中显示数据记录。

```
[...]
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.displaycourse);

TextView dc = (TextView) findViewById(R.id.displayCourses);

courseDataSource datasource = new courseDataSource(this);
datasource.open();

Cursor cursor = database.query(courseDBOpenHelper.TABLE_COURSES,
                               null, null, null, null, null, null);
Log.i(courseDBOpenHelper.LOGTAG, "returned " + Integer.toString(cursor.getCount()) + " rows");
    if (cursor.getCount() > 0) {
        while (cursor.moveToNext()) {     
        String coursename = cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_COURSENAME));
        dc.append("Name: ");
        dc.append(coursename);
        dc.append("\n");
        // more content
        }
    }

[...] 
```

编辑
全部替换`Alocation`为`alocation`并
全部替换`Blocation`为`blocation`

替换
`Log.i(LOGTAG, "returned " ....);`
为
`Log.i(courseDBOpenHelper.LOGTAG, "returned " ....);`

替换
`private static final String LOGTAG = "courseDatabase";`为
`public static final String LOGTAG = "courseDatabase";` 并将其放入您的
`class courseDBOpenHelper public static final String`部分。

替换
`Log.i(LOGTAG, "returned " + cursor.getCount() + " rows");`
为
`Log.i(courseDBOpenHelper.LOGTAG, "returned " + Integer.toString(cursor.getCount()) + " rows");`

我们看不到`allColumns`这样，

替换`allColumns`
`database.query(courseDBOpenHelper.TABLE_COURSES, allColumns, null,....);`
为`null`
`database.query(courseDBOpenHelper.TABLE_COURSES, null, null,....);`

看一看

[sqlite-query-in-android-application](https://stackoverflow.com/questions/1243199/sqlite-query-in-android-application)
[AndroidSQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)
[sqlitedatabase-query-method](https://stackoverflow.com/questions/10600670/sqlitedatabase-query-method)

# javascript - jQuery - 启动功能一次后停止

> ID：15395763
> 
> 赞同：1
> 
> 时间：2013-03-13T20:24:45.927
> 
> 标签：javascript, jquery

我想在完成一次后停止启动我的功能。我有这样的事情：

```
function scrollBottom() {
    var biglink = $('div.nav a:last').attr('href');
    $(window).scroll(function () {
        if ($(window).height() + $(window).scrollTop() == $(document).height()) {
                $('div.nav').before('<div class="lazy"></div>');

                $('div.lazy:last').load(biglink + ' div.cnt > * ', function() {
                    $(this).css('background','0');
                    biglink = $(this).children('div.nav').children('a:contains("starsze")').attr('href');
                });
        }
    });
} 
```

我的问题是 - 每次我到达底部时，我都会`lazy`创建一个新的 div。我只想创建一个，停止和它们，在我完成加载（`load`回调）后我想重新启动它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:27:09.030

在创建一个新的`lazy`div 之前检查一个是否已经存在

```
if(!($(".lazy").length>0)){
 //create new one 
```

# windows-services - 从 jmeter 运行 Windows 服务

> ID：15395765
> 
> 赞同：1
> 
> 时间：2013-03-13T20:24:52.983
> 
> 标签：windows-services, jmeter

我正在编写一个 jmeter 脚本来执行数据库功能测试。我有一个 Windows 服务，它每隔 X 间隔运行一次，它会在完成后更新某些数据库记录。我需要能够远程运行 Windows 服务并验证数据库更改。

是否可以使用`sc \\machine stop <service>`jmeter 远程运行 Windows 服务？
如果是，我该怎么做？

感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:18:37.770

查看[OS Process Sampler](http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler)。

对于这样的命令`sc SERVER_NAME stop SERVICE_NAME`，它将被配置为：

![在此处输入图像描述](../Images/e4cea5a4392d34f1933c3a8b0b76c718.png)

# r - r中的样本大小和功率计算作为SAS中proc功率的可行替代方案？

> ID：15395767
> 
> 赞同：7
> 
> 时间：2013-03-13T20:24:54.173
> 
> 标签：r, sas, sample, hmisc, sample-size

所以我想看看样本量计算（对于两个样本量不相等的样本独立比例）在 SAS 中的 proc power 和 r 中的一些样本量函数之间有多接近。我正在使用[在 UCLA 网站上找到的数据。](http://www.ats.ucla.edu/stat/sas/dae/proportionpow.htm)

UCLA 网站给出的参数如下：

p1=.3,p2=.15,power=.8,null difference=0，对于双边测试，它假设样本量相等；

对于不等样本量测试，参数是相同的，group1 的组权重为 1，group2 的组权重为 2，并且它们执行的测试是单方面的。

我正在使用 r 功能

```
pwr.t.test(n=NULL,d=0,sig.level=0.05,type="two.sample",alternative="two.sided") 
```

从`pwr`包中。

因此，如果我按照 UCLA 站点的第一个示例输入参数选择，则会收到以下错误：

```
Error in uniroot(function(n) eval(p.body) - power, c(2, 1e+07)) :
  f() values at end points not of opposite sign. 
```

这似乎是因为 r 无法检测到差异。我设置了 d=.5 并且它运行了。SAS会因为太小的差异而给出错误吗？它不在示例中，因为它们的零差也为零。

使用时我也收到上述错误

```
pwr.2p.test(h = 0, n = , sig.level =.05, power = .8) 
```

和

```
pwr.chisq.test(w =0, N = , df =1 , sig.level =.05, power =.8 ). 
```

我可能做错了什么，但如果假设的差异为 0，我似乎无法真正找到方法。

我知道 SAS 和 r 使用不同的方法来计算功率，所以我不应该期望得到相同的结果。我真的只是想看看我是否可以在 r 中复制 proc power 结果。

对于第一个示例，我已经能够获得几乎相同的结果，具有相同的样本量和使用的双面替代方案

```
 bsamsize(p1=.30,p2=.15,fraction=.5, alpha=.05, power=.8) 
```

从`Hmisc`包中。但是当他们用不相等的样本量进行单面测试时，我无法复制这些。

有没有办法在 r 中复制该过程以计算不等组大小的单边样本大小？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:14:37.473

In`pwr.t.test`及其衍生物，`d`不是零差异（假设为零），而是两个群体之间的效应大小/假设差异。如果总体均值之间的差异为零，则没有样本量可以让您检测到不存在的差异。

如果群体 A 的比例为 15%，群体 B 的比例为 30%，则使用该函数`pwr::ES.h`计算效应大小并进行比例检验，例如：

```
> pwr.2p.test(h=ES.h(0.30,0.15),power=0.80,sig.level=0.05)

     Difference of proportion power calculation for binomial distribution (arcsine transformation) 

              h = 0.3638807
              n = 118.5547
      sig.level = 0.05
          power = 0.8
    alternative = two.sided

NOTE: same sample sizes

> pwr.chisq.test(w=ES.w1(0.3,0.15),df=1,sig.level=0.05,power=0.80)

     Chi squared power calculation 

              w = 0.2738613
              N = 104.6515
             df = 1
      sig.level = 0.05
          power = 0.8

NOTE: N is the number of observations 
```

# sql - 如果表没有任何意义，我应该使用主键 id 吗？

> ID：15395770
> 
> 赞同：4
> 
> 时间：2013-03-13T20:25:02.487
> 
> 标签：sql, sql-server, entity-framework

我有一个名为“日期限制”的表，它基本上包含以下属性：

```
DayId    : int
DateFrom : datetime
DateTo   : datetime
EventId  : int       // this is a foreign key 
```

现在我访问它的方式是获取我想要的事件，然后查看相关的日期限制。

如果我永远不必单独引用日期限制，那么向该表添加主键列是一种好习惯还是建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:34:22.460

您应该始终拥有一个主键。拥有主键将允许 SQL Server 以更有效的方式物理存储数据。主键还允许实体框架轻松唯一地标识一行。

在你的列中寻找一个自然键。如果单个 EventId 在此表中只有一行，请在 EventId 上创建一个主键。

如果没有自然键，请将代理键列添加到表中并使其成为标识。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T20:36:47.937

作为数据库设计实践，始终建议使用主键。即使您的应用程序不直接引用 DateRestriction 表，具有唯一标识的行不仅会给您带来 SQL 方面的好处，而且还允许实体框架轻松映射表（无需经过任何额外的环节）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:33:41.957

您需要告诉 EF 如何唯一标识数据库中的一行。如果每个事件在表中只出现一次，您可以将 EventId 设为主键和外键。您还可以将所有三列都设为复合主键。例如：

```
class DateRestriction {
  [Key, Column(Order=0)]
  public DateTime DateFrom {get;set;}

  [Key, Column(Order=1)]
  public DateTime DateTo {get;set;}

  [Key, Column(Order=2)]
  public int EventId {get;set;}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T20:40:13.837

我建议使用代理键并使用自然键创建唯一索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:34:17.767

如果你的数据库中的这个表直接被另一个表引用，那么不会。如果没有其余的结构，我不完全确定。因此，我将通过一个示例提供一般的经验法则：

*客户表：*

*   ID
*   姓名
*   最后的

但是你不会查询一个单独的地址，而不是将它链接到一个人。所以你有第二个表，叫做*Address*。

*   客户ID
*   街道
*   城市
*   压缩
*   状态

所以这个*客户*总是有一个绑定的地址，所以定义一个`Foreign Key`是可以接受的。现在，如果允许*客户*拥有多个*地址*，那么是的，您将需要一个`Primary Key`这样的结构独立存在。

如果该特定数据始终与另一个表相关联，您只需定义一个`Foreign Key`. 显然，您的实施和对数据库的访问可能会产生影响。所以你必须保持警惕。如果您使用不同的技术，例如：

*   实体框架
*   阿多
*   ETC

因此，请注意数据库和应用程序的实现和设计。

但是，如果没有 a，`Primary Key`您将不得不定义`Indexes`，以便您可以优化您的数据库。一如既往。 `Primary Key`_`Indexed`

带有索引的代理键就足够了。

抱歉，如果我误解了您的问题，但希望这可以为您指明正确的位置。

# javascript - 循环中的 JQuery 绑定

> ID：15395775
> 
> 赞同：-3
> 
> 时间：2013-03-13T20:25:18.133
> 
> 标签：javascript, jquery

我有一个循环

```
for (i = 0; i < 10; i++)
{
    outPut.innerHTML += "<div id='file" + i + "'>" + i + "</div>";
    $('#file' + i).on('click', function(event) {
        alert('User clicked on ' + i);
    }).css('cursor', 'pointer');
} 
```

并且只有最后一个元素附加了事件。问题是什么？

在这里查看测试[http://jsfiddle.net/haF7Y/](http://jsfiddle.net/haF7Y/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:28:06.337

从`for loop`.

```
$(document).on('click', '[id^=file]', function(e){
    alert('user clicked on '+ this.id.split('file')[1]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:29:08.967

使用这样的 jquery 对象（并创建一个闭包）

```
var jOutPut = $('div:first');

var create = function(i) {
    var j = $('<div/>')
        .attr('id', 'file' + i)
        .css('cursor', 'pointer')
        .html(i)
        .click(function(event){
            alert('User clicked on ' + i);
        });

    jOutPut.append(j);
}

for(i=0;i<10;i++) {
    create(i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:48:01.487

这就是您所缺少的 - 事件侦听器本质上是异步的！因此，在执行此类任务时，请始终在循环内使用闭包函数！见下文 -

```
for (i = 0; i <10; i++){
  (function(i){
    outPut.innerHTML +="<div id='file"+ i + "'>" + i+ "</div>";
    $('#file' + i).on('click', function(event) {
      alert('User clicked on ' + i);
    }).css('cursor', 'pointer');
  }(i))
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:33:19.170

这就是您的代码的编写方式：

```
for (i = 0; i < 10; i++)
{
    var newEl = $("<div class='file' data-index='"+i+"'>" + i + "</div>").css('cursor', 'pointer');
    outPut.append(newEl);
}

$('.file').click(function(event) {
        alert('User clicked on ' + $(this).attr('data-index'));
}); 
```

这是一个显示它有效的小提琴：http: [//jsfiddle.net/qX8RQ/](http://jsfiddle.net/qX8RQ/)

# sql-server - 创建/附加表，其中包含按不同类别分组的值的总和

> ID：15395776
> 
> 赞同：0
> 
> 时间：2013-03-13T20:25:19.147
> 
> 标签：sql-server, sql-server-2008, append

我有一个费用表，例如：

```
WorkWeek  Catg  Item    Cost
WorkWeek1 Cat1  Item1   Price
WorkWeek1 Cat1  Item2   Price
WorkWeek1 Cat1  Item3   Price
WorkWeek1 Cat1  Item4   Price
WorkWeek1 Cat2  Item1   Price
WorkWeek1 Cat2  Item5   Price
WorkWeek1 Cat2  Item6   Price
WorkWeek1 Cat3  Item1   Price
WorkWeek1 Cat3  Item5   Price
.
.
WorkWeekA CatB  ItemC   Price 
```

这就是我现在的做法：

```
select top(1)
     (select sum(cost) from DataTable where Catg like 'Cat1') as Cat1TotalCost
    ,(select sum(cost) from DataTable where Catg like 'Cat2') as Cat2TotalCost
    ,(select sum(cost) from DataTable where Catg like 'Cat3') as Cat3TotalCost
    .
    .
    .
    .
from DataTable where WorkWeek like 'WorkWeek1' 
```

如果我不使用，`top 1`那么我会得到相同的总和，重复数以千计的行。此外，我的做法只占 1 个工作周。:(

我想创建一个表，其中每个工作周的总费用取决于每个类别，例如：

```
WorkWeek1   Cat1TotalCost   Cat2TotalCost   Cat3TotalCost
WorkWeek2   Cat1TotalCost   Cat2TotalCost   Cat3TotalCost
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:37:24.040

试试这个：

```
select
    workweek
    ,(select sum(cost) from DataTable where Catg = 'Cat1') as Cat1TotalCost
    ,(select sum(cost) from DataTable where Catg = 'Cat2') as Cat2TotalCost
    ,(select sum(cost) from DataTable where Catg = 'Cat3') as Cat3TotalCost
    .
    .
    .
    .
from DataTable
group by Workweek 
```

现在，您按工作周字段进行分组。另外，我将其更改`like`为`=`使其稍快一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:52:59.390

看起来你有很多类别，你在寻找一个分组吗？

```
select worksheet, category, sum(cost) from DataTablegroup by worksheet, category order by worksheet 
```

# ios - 自定义 UICollectionViewCell 中的 UIScrollview 不起作用

> ID：15395780
> 
> 赞同：4
> 
> 时间：2013-03-13T20:25:34.740
> 
> 标签：ios, ipad, uiscrollview, uicollectionview, uicollectionviewcell

我试图让 a在 a`UIScrollView`内正常工作`UICollectionViewCell`。

自定义单元格正在通过 xib 文件加载，并且是`UICollectionViewCell`. 我在让其他控件正常工作时遇到了问题，例如按钮和手势识别器，因为它们`UICollecitonView`似乎没有向单元格传递任何触摸，但我绕过了那些`UICollectionView`本身带有手势识别器的控件。我剩下的一个问题是 UIScrollViews ......

`UICollectionView`水平滚动，单元格中的`UIScrollView`垂直滚动。我尝试使用 a`UIPanGestureRecognizer`来滚动它们，但这似乎禁用了`UICollectionView's`滚动功能。

有人有什么想法吗？

编辑：明白了！

所以我已经从我们在 iOS6 之前使用的以前的第三方库转换为集合视图。原来问题出在我们用于单元格的 xib 文件上。在之前的库中，单元格只是 UIView 的子类。我将类更改为 subclass `UICollectionViewCell`，并更新了自定义类。事实证明这还不够。为了让触摸传递到单元格，我实际上必须`UICollectionViewCell`从对象库中拖入一个新的，复制所有子视图并重新连接`IBOutlets`. 在此之后，它起作用了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T15:47:32.837

我通过确保在主线程上调整滚动视图的大小，在我的代码中解决了这个问题。

我的集合视图使用的是 nsfetchedresultscontroller，它使用块调用来刷新选定的单元格。第一次选择单元格时，滚动视图不会滚动。但是，如果您单击另一个单元格并单击返回，它将正常工作。单元格的初始负载似乎大小计算可能不是它需要在主线程上影响行为的地方。

```
-(UICollectionViewCell *) collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell =  [collectionView dequeueReusableCellWithReuseIdentifier:@"CustomCell" forIndexPath:indexPath];
    dispatch_async(dispatch_get_main_queue(), ^{
        // resizeScrollViewMethod should be where scrollview content size > scroll view frame.
        [cell resizeScrollViewMethod];
    });
    return cell;
}

- (void) resizeScrollViewMethod {
    //Do your scrollview size calculation here
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T01:43:55.100

UICollectionViewCell 中的 UISCrollView 没有问题。使用 StoryBoard，您将滚动确定。UIScrollView 覆盖 UICollectionViewCell，因此 didSelect 仅在点击 ScrollView 外部和 Cell 内部 (scrollView.frame < cell.frame) 时起作用。

如果要实现点击或其他手势，只需将其添加到 awakeFromNib 中的 UIScrollView

参考代码：

[https://github.com/lequysang/github_zip/blob/master/CollectionViewWithCellScrollViewStoryBoard.zip](https://github.com/lequysang/github_zip/blob/master/CollectionViewWithCellScrollViewStoryBoard.zip)

# embedded-linux - 如何挂载ext2 fs？

> ID：15395782
> 
> 赞同：0
> 
> 时间：2013-03-13T20:25:48.647
> 
> 标签：embedded-linux, mount, busybox, ext2

fdisk 用于在 64G SD 卡上创建 mmcblk0p3。

```
Disk /dev/mmcblk0: 63.8 GB, 63864569856 bytes
255 heads, 63 sectors/track, 7764 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

        Device Boot      Start         End      Blocks  Id System
/dev/mmcblk0p1   *           2           6       40162+  c Win95 FAT32 (LBA)
/dev/mmcblk0p2               7         130      996030  83 Linux
/dev/mmcblk0p3             131        7764    61320105  83 Linux 
```

然后 fs 的格式如下：

```
$ mke2fs -L media /dev/mmcblk0p3
Filesystem label=media
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
3833856 inodes, 15330026 blocks
766501 blocks (5%) reserved for the super user
First data block=0
Maximum filesystem blocks=16777216
468 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks:
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, ... 
```

`$ mount /dev/mmcblk0p3 /media`当 mmcblk0p3 是 Win95 FAT32 分区上的 FAT32 FS 时，挂载点 /media 肯定存在并且工作正常。我需要从 FAT32 更改为 ext2，因为 FAT32 分区 3 太容易在这个嵌入式 Linux 目标中使用（电源循环、USB 大容量存储断开等）。已使用 Ubuntu 10.04 桌面系统验证分区类型是否为 ext2 并且能够挂载 SD 卡分区，但这需要在嵌入式 Linux 目标上运行。内核版本是 2.6.32-17-ridgerun 和 BusyBox v1.18.2。

*   为什么会`$ mount /dev/mmcblk0p3 /media`导致`mount: mounting /dev/mmcblk0p3 on /media failed: Invalid argument?`
*   为什么会`mount -t ext2 /dev/mmcblk0p3 /media`导致`mount: mounting /dev/mmcblk0p3 on /media failed: No such device?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:56:41.320

> 为什么 $ mount /dev/mmcblk0p3 /media 会导致 mount:mounting /dev/mmcblk0p3 on /media failed: Invalid argument？

内核可能可以挂载文件系统，但它错误地猜测了它的类型。

> 为什么 mount -t ext2 /dev/mmcblk0p3 /media 会导致 mount:mounting /dev/mmcblk0p3 on /media failed: No such device？

如果在您指定 -t 之后，您遇到类似的问题，那么内核很可能无法为您挂载请求的文件系统。检查是否有该文件系统的模块并已加载。

```
lsmod          # show modules
modprobe ext2  # load module 
```

资料来源：[http ://www.silas.net.br/doc.notes/unix/linux/busybox-troubleshooting.html](http://www.silas.net.br/doc.notes/unix/linux/busybox-troubleshooting.html)

据我所知`ext2`，默认情况下已经加载了模块。但检查不会有什么坏处。我认为这里的问题是由于[mke2fs](http://linux.die.net/man/8/mke2fs)引起的歧义。`mke2fs`可用于创建 ext2/ext3/ext4 文件系统。您必须通过`-t`选项指定文件系统。尝试这样做：

```
#mkfs -t ext2 /dev/hda1
#mkfs.ext2 /dev/hda1 
```

`-t`您在命令中错过了`mke2fs`使用默认 conf 中的文件系统格式化它的选项。

# wamp - php.ini include_path - 无法打开流错误

> ID：15395783
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:00.617
> 
> 标签：wamp, php, include-path, require-once

我与一家网络开发公司合作了四个月，目前正在尝试为他们的项目管理工具实现一些新功能。我有源代码，并试图在本地设置它以进行测试。
我正在使用 Windows 7 和 wamp。

我今天花了一整天的时间来解决这个问题，发现了几十个关于堆栈溢出的类似（可能相同）的问题，这些问题对我没有帮助，并阅读了 php.ini 上似乎相关的文档。

代码 - 不是我的 - 使用我设置为与我的结构一起使用的常量 ROOT 值。定义('ROOT', '/ac_test/public_html/||||'); （|||| 只是他们使用的软件）。

当我加载 index.php 文件时，它会尝试包含一个文件： require_once ROOT 。'/defaults.php';

此时它失败并给我这个错误：警告：require_once（/ac_test/public_html/ *** */defaults.php）[function.require-once]：无法打开流：C：\ wamp中没有这样的文件或目录\www\ac_test\public_html\config\defaults.php 第 14 行

致命错误：require_once() [function.require]：在 C:\wamp\www\ac_test\ 中打开所需的 '/ac_test/public_html/||||/defaults.php' (include_path='*PATH ATTEMPTS BELOW') 失败第 14 行的 public_html\config\defaults.php

我已将 php.ini 文件中的 include_path 更改为几乎所有内容。我尝试过相对路径（.;..;../../../.. 等），我尝试过直接路径（例如 c:/wamp/www），可能还有 20 多种其他无意义的可能性。我使用 get_include_path() 来输出最终与文件所在位置相同的路径，并且我使用了完整的直接路径而不使用 ROOT，它可以工作，但我不能使用它。代码中有数百个编码引用需要我使用 ROOT 常量并让 include_path 起作用。

我意识到这个问题已经被问过很多次了。我可能已经阅读了今天有关堆栈溢出的所有帖子。他们都很相似。我的也是这样，但我没有想法。我还应该提到，我在 2 个月前才开始使用这个合作社进行 Web 开发和 php。我的知识有一些很大的漏洞，所以我可能忽略了一些非常简单的事情。

# android - BitmapDrawable 作为背景对齐

> ID：15395784
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:10.300
> 
> 标签：android, bitmap, gravity

我想知道是否可以在android中对齐`background`a 。`View`我有一个图像`BitmapDrawable`，我想填充它的右边缘并将其与`View`.

我使用该`Gravity.CENTER`值是为了使`background`' 的内容居中，但现在我需要将图像作为`background`，但将其右边缘与`View`' 的右边缘对齐，同时仍填充整个`View`，裁剪多余的部分。

这可能吗？

编辑：

哎呀。“我尝试了什么？” 部分丢失。

我尝试将重力设置为`Gravity.RIGHT`，但最终只是使背景居中并缩小。

设置`(Gravity.CENTER | Gravity.RIGHT)`也有相同的结果。

我试过在谷歌上寻找，但它只谈到使用 an `ImageView`，但我需要`View`在 this 中有 s `View`。

所以，这就是我尝试过的，我不知道还能做什么。

***编辑2：***

说清楚，我说的是***[这个](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)***

# c# - 在 ASP.NET c# 上处理 UpdateProgress 后如何触发 JavaScript 事件？

> ID：15395787
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:16.140
> 
> 标签：c#, javascript, asp.net, updatepanel, updateprogress

我有一个网络表单，其中有一个 javascript 函数，用于评估它是否应该显示一个 div ......这是函数......

```
function viewCalendars()
            {
                if (document.getElementById('ddlDates').value == '5')
                {
                    document.getElementById('divSpecificDates').style.display = 'inline';
                }

                else
                {
                    document.getElementById('divSpecificDates').style.display = 'none';
                }

                return;
            } 
```

我也将此添加到我的表单中

```
<body onload="viewCalendars();">
//Everything
</body> 
```

因此，即使有回发，如果下拉列表选择了特定值，它也会显示 div。

但是，我最近添加了一个 updatepanel 和一个 updateprogress ......现在我认为这将不再起作用，因为不会发生回发。

这就是我现在所拥有的...

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Consumptions.aspx.cs" Inherits="Station.Consumptions" %>
<%@ Register TagPrefix="ew" Namespace="eWorld.UI" Assembly="eWorld.UI, Version=1.9.0.0, Culture=neutral, PublicKeyToken=24d65337282035f2" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
        <title>
            Lista De Consumos
        </title>

        <link href="css/Style.css" type="text/css" rel="stylesheet"/>

        <style type="text/css">
            #blur
            {
                width: 100%;
                background-color: black;
                moz-opacity: 0.5;
                khtml-opacity: .5;
                opacity: .5;
                filter: alpha(opacity=50);
                z-index: 120;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }

            #progress
            {
                border: black 1px solid;
                padding: 5px;
                z-index: 100;                
                width: 250px;
                position: absolute;
                background-color: #fff;
                -moz-opacity: 0.75;
                font-family: Tahoma;
                font-size: 11px;
                font-weight: bold;
                text-align: center;
            }
        </style>

        <script type="text/javascript">
            function viewCalendars()
            {
                if (document.getElementById('ddlDates').value == '5')
                {
                    document.getElementById('divSpecificDates').style.display = 'inline';
                }

                else
                {
                    document.getElementById('divSpecificDates').style.display = 'none';
                }

                return;
            }
        </script>
    </head>

    <body onload="viewCalendars();">
        <form id="form1" runat="server">
            <asp:ScriptManager ID="sm" runat="server">
            </asp:ScriptManager>

            <asp:UpdateProgress ID="UpdateProgress1" runat="server">
                <ProgressTemplate>
                    <div id="blur">
                    </div>
                    <div id="progress">
                        <asp:Image ID="imgLoading" GenerateEmptyAlternateText="true" runat="server" ImageUrl="~/images/loading.gif" />
                    </div>
                </ProgressTemplate>
            </asp:UpdateProgress>

            <asp:UpdatePanel ID="upd" runat="server">
                <ContentTemplate>
                    <asp:DropDownList ID="ddlDates" CssClass="tbox" runat="server">
                    </asp:DropDownList>

                    <div runat="server" id="divSpecificDates" style="display: none; width: 100%; z-index: 1000;">
                    </div>

                    &nbsp;
                    <asp:Button Text="Filtrar" CssClass="btn" runat="server" ID="btnFilter" onclick="btnFilter_Click" />
                </ContentTemplate>

                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnFilter" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel>
        </form>
    </body>
</html> 
```

所以，我注意到，当你点击 btnFilter 按钮后，它的功能会被触发，虽然 updateprogress 是可见的，但是在它消失后（并且 btnFilter 功能完成） divSpecificDates 在应该可见的时候不可见。我想我必须在一切完成后调用 viewCalendars() ......

我必须如何以及在哪里调用此功能？

更新：我刚刚摆脱了更新进度......它仍然无法正常工作，所以我想问题不存在......可能它在更新面板上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:53:47.410

当 UpdatePanel 更新时，DOM 发生了变化，您需要重新运行加载页面时所做的初始化。这是通过添加 UpdatePanel 时 asp.net 包含的 javascript 函数完成的。所以`onload`从身体上取下 并使用`pageLoad`.

所以从这一行删除onload

```
<body onload="viewCalendars();"> 
```

并添加此脚本

```
<script>
   function pageLoad() { 
      viewCalendars();
   }  
</script> 
```

类似于[如何在 UpdatePanel 部分回发后保留 javascript](https://stackoverflow.com/questions/14769641/how-to-keep-javascripts-after-updatepanel-partial-postback/14769925#14769925)
参考：[Ajax 客户端生命周期事件](http://msdn.microsoft.com/en-us/library/bb386417(v=vs.100).aspx)

# .htaccess - MODx & .htaccess 问题

> ID：15395788
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:18.727
> 
> 标签：.htaccess, modx, modx-revolution

我一直试图让 FURL 在 MODx 中工作。以下资源详细介绍了该主题 - [http://rtfm.modx.com/display/revolution20/Using+Friendly+URLs](http://rtfm.modx.com/display/revolution20/Using+Friendly+URLs)。但是，一旦对 .htaccess 进行了更改，该站点将不再可用。这是我的 .htaccess 文件：

```
# Friendly URLs Part
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} .
# Force all pages to go to www.domain.com for SEO
RewriteCond %{HTTP_HOST} !^www\.dev\.domain\.co\.uk [NC]
RewriteRule (.*) http://www.dev.domain.co.uk/$1 [R=301,L]
# Friendly URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
# Additional Settings Follow
ExpiresActive On
ExpiresByType image/gif A2592000
ExpiresByType image/jpeg A2592000
ExpiresByType image/png A2592000
BrowserMatch "MSIE" brokenvary=1
BrowserMatch "Mozilla/4.[0-9]{2}" brokenvary=1
BrowserMatch "Opera" !brokenvary
SetEnvIf brokenvary 1 force-no-vary 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:56:12.853

改`.htaccess`回原来的 - [https://github.com/modxcms/revolution/blob/develop/ht.access](https://github.com/modxcms/revolution/blob/develop/ht.access)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T08:25:42.727

试试这个 modx 的默认 htaccess 文件

```
RewriteEngine On
RewriteBase /

#RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\.example.com [NC]
RewriteRule (.*) http://www.example.com/$1 [R=301,L]

# Rewrite secure requests properly to prevent SSL cert warnings, e.g. prevent 
# https://www.example.com when your cert only allows https://secure.example.com
#RewriteCond %{SERVER_PORT} !^443
#RewriteRule (.*) https://example.com/$1 [R=301,L]

# The Friendly URLs part
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

检查[这个](https://allhtaccess.info/modx-default-htaccess-file/)以获得完整的htaccess文件

# performance - 监控等待传输的 TCP 消息队列

> ID：15395791
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:27.243
> 
> 标签：performance, wcf, throughput, wcf-callbacks

我有一个使用 NetTcp 的 WCF 客户端和服务器。服务器托管在 Windows 服务内的 ServiceHost 中。客户端订阅 WCF 服务并注册它的回调接口和它的 InstanceContext。回调接口有几个单向方法调用。我把它全开。

这一切都很好。但是，在我的测试中，我的 Windows 服务中有代码，该代码通过一个紧密的循环，尽可能快地通过单向方法调用之一将消息发送回客户端。我已经超出了 TCP 连接传递数据的能力，结果是消息排队。这是我所期望的。

问题是：服务器上是否有任何方法可以找出队列的备份情况，以便我可以根据实时吞吐量限制发送消息的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:22:05.753

我们从未为此找到答案，但我们创建了自己的解决方法，似乎可以解决问题。为了完整起见，我将在此处发布。我希望它可以帮助面临类似情况的其他人。

**要求：**

1.  我们有一个长时间运行的任务，它将在硬件服务器上运行。当我说长期运行时，我的意思是从一天到很多天。
2.  我们希望有一个可以在网络中的任何其他桌面上启动的用户界面，以便以图形方式查看长期运行任务的统计信息。
3.  用户界面可以多次启动和停止，并且可以同时出现多个实例。
4.  用户界面不应对长时间运行的任务产生过多的负担。运行多个 UI 不应减慢它的速度。

**该设计：**

1.  长时间运行的任务包含在 DLL 中。有一个带有 run() 方法的主类可以启动长时间运行的任务。
2.  我们创建了一个将在硬件服务器上自动运行的 Windows 服务。
3.  Windows 服务将创建主类的实例并通过调用 run() 方法启动任务。
4.  Windows 服务还将创建一个 ServiceHost 实例并启动一个 WCF 服务实例。
5.  Windows 服务会将主类的引用传递给 WCF 服务。
6.  WCF 服务将为主类可以引发的六个事件创建处理程序。
7.  从主类到 WCF 服务的所有通信都是通过引发这六个事件的一种方式。
8.  UI 将是 WCF 服务的客户端，并且连接将使用 NetTcp 绑定。
9.  WCF 服务有一个 subscribe() 方法和一个 unsubscribe() 方法，以便潜在的 UI 可以加入和离开。
10.  当 UI 调用 subscribe() 方法时，它会将唯一标识符作为字符串传递。WCF 服务将标识符及其 OperationContext 放入 ConcurrentDictionary。
11.  当 UI 调用 unsubscribe() 方法时，该条目将从 ConcurrentDictionary 中删除。
12.  UI 和 WCF 服务之间的契约具有从 WCF 服务到客户端的单向消息，用于长时间运行的任务可能引发的每种类型的事件。
13.  在长时间运行的任务期间引发事件时，WCF 服务会处理该事件并遍历已注册的 UI 并向 UI 发送单向消息。

所有这一切都在这一点上起作用。

**问题：**

当我们对该系统进行压力测试时，我们创建了一个场景，其中长时间运行的任务尽可能快地用事件轰炸 WCF 服务。这将是最坏的情况，但我们必须能够处理它。WCF 服务能够处理事件并将消息放在 Tcp 通道上。由于消息是单向的，因此 WCF 服务不会阻止等待发送完成，这使其能够跟上正在引发的事件。

当用户界面没有将消息从通道中拉出的速度不如服务器将它们推入通道时，就会出现问题。消息会备份并最终开始超时并导致通道进入故障状态。我们希望在故障状态发生之前检测到这种情况，以便我们可以开始丢弃消息。不幸的是，我们找不到任何机制来检测此频道上的积压。如果我们将消息更改为双向，WCF 服务将阻塞，直到消息完成并且通道不会被备份，但是，这会影响长时间运行的服务并使其变慢。不好。

**解决方案：**

我们通过在包含长时间运行任务的同一个 DLL 中创建一个特殊类来解决这个问题。此类负责与任何附加的用户界面进行通信。此通信对象包含要引发的每个事件的 ConcurrentQueue。当长时间运行的任务通常将事件引发回 WCF 服务时，它现在将改为调用此通信对象中的方法。

在此方法中，通信对象会将事件 args 输入到该事件的 ConcurrentQueue 中。通信对象还有一个方法，该方法在创建对象时在单独的线程上启动。这种新方法将不断循环通过 concurrentQueues 并弹出事件参数并实际引发事件。我们将 NetTcp 调用改为双向调用，因此线程中的例程将绑定到 TCP 通道的速度，但由于它在单独的线程中，它不会减慢长时间运行任务的主处理。

现在我们有了一个可以使用的 ConcurrentQueue，我们可以检查积压工作。我们在逻辑上为并发队列设置了一些限制（在当前情况下为 10）。当长时间运行的任务调用该方法将事件 args 添加到队列中时，它首先检查队列的计数，如果它小于我们的逻辑限制，它将事件 args 入队，否则它只是将其丢弃并继续。这样长运行队列的速度不会受到影响，WCF 服务也不会备份并导致通道状态出现故障。

**总之：**

我们欢迎任何反馈或替代想法。这对我们来说似乎工作得很好，而且似乎是有弹性的。

```
class UI
{
    #region Class Scoped Variables
    private Int32 _threashold = 10;
    private bool _continue = true;
    #endregion Class Scoped Variables

    #region Public Delegate Definitions
    public delegate void OnPlanSelectionChangedDelegate(PlanSelectionChangedEventArgs e);
    // other lines deleted for brevity
    #endregion Public Delegate Definitions

    #region Local Delegate Instances
    private OnPlanSelectionChangedDelegate _onPlanSelectionChangedDelegate = null;
    // other lines deleted for brevity
    #endregion Local Delegate Instances

    #region Local Queues for Delegates
    private ConcurrentQueue<PlanSelectionChangedEventArgs> _planSelectionChangedQueue
        = new ConcurrentQueue<PlanSelectionChangedEventArgs>();
    // other lines deleted for brevity
    #endregion Local Queues for Delegates

    #region Constructor
    public UI(OnPlanSelectionChangedDelegate onPlanSelectionChanged)
    {
        _onPlanSelectionChangedDelegate = onPlanSelectionChanged;
        // other lines deleted for brevity
        ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), null);
    }
    #endregion Constructor

    #region Public Methods
    public void Shutdown()
    {
        _continue = false;
    }
    public void SendPlanSelection(PlanSelectionChangedEventArgs e)
    {
        if (_planSelectionChangedQueue.Count < _threashold)
        {
            if (_cntPlanSelectionDropped > 0)
            {
                e.Dropped = _cntPlanSelectionDropped;
            }
            _planSelectionChangedQueue.Enqueue(e);
            _cntPlanSelectionDropped = 0;
        }
        else
        {
            _cntPlanSelectionDropped++;
        }
    }
    // other lines deleted for brevity
    #endregion Public Methods

    #region Private Asychronous Method
    private void DoWork(object dummy)
    {
        PlanSelectionChangedEventArgs planSelectionChangedEventArgs = null;
        while (_continue)   // process this loop until told to quit
        {
            // Plan Selection Changed
            // Try to get the next event args in a thread safe way
            if (_planSelectionChangedQueue.TryDequeue(out planSelectionChangedEventArgs))
            {
                // We got an event args from the queue, do we have a valid delegate?
                if (_onPlanSelectionChangedDelegate != null)
                {
                    // We have a delegate, call it with the event args and rais the event
                    _onPlanSelectionChangedDelegate(planSelectionChangedEventArgs);
                }
            }

            // other lines deleted for brevity
        }
    }
    #endregion Private Asychronous Method
} 
```

# ruby - 如何在没有 MacPorts 或 Homebrew 的情况下使用 RVM 在 mac os x 10.8.2 上安装 Ruby 2.0.0？

> ID：15395792
> 
> 赞同：1
> 
> 时间：2013-03-13T20:26:27.760
> 
> 标签：ruby, compilation, openssl, rvm

我知道我可以安装 Hombrew 或 Macports，然后更新旧的 OpenSSL (0.9.8)，但我不想这样做。

*   我只想安装 ruby​​ 2.0.0 然后安装 rails
*   我不想安装 Homebrew 或 Macports

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:34:59.280

Based on [this post at coderwall](https://coderwall.com/p/tptocq), use the following commands:

```
rvm pkg install openssl
rvm install 2.0.0 \ 
    --with-openssl-dir=$HOME/.rvm/usr \
    --verify-downloads 1 
```

Also, depending on your `rvm` configuration, you may want to add the `--autolibs=0` option to each `rvm` command above so it doesn't try to use a package manager (like macports or homebrew).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:46:04.053

you can do it with command:

```
rvm install ruby-head 
```

# ios - UIImage 仅在调整相机图片大小时会旋转，但在截图图片时可以正常工作

> ID：15395794
> 
> 赞同：0
> 
> 时间：2013-03-13T20:26:35.243
> 
> 标签：ios, resize, uiimagepickercontroller

我一直在使用 Trent 的 UIImage 包来调整图像大小以适合我的 UIImage 尺寸 320 * 320。当我使用来自屏幕截图或网络的任何图片时，垂直和水平都很好。但是当我使用 iPhone 5 相机拍摄的照片时，垂直拍摄会像水平一样旋转（幸运的是，水平照片仍然是水平的）。我已经将它缩小到它在我的代码中发生的时间，并且 Trent 的代码是有道理的，但我不知道是什么可能导致只是垂直相机照片这样做？有任何想法吗？

我的代码：

```
 UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
        // Resizes the image, but unfortunately the below code also rotates it if vertical from an iPhone 5
UIImage *scaledImage = [image resizedImageWithContentMode:UIViewContentModeScaleAspectFill bounds:CGSizeMake(pic.frame.size.width, pic.frame.size.height) interpolationQuality:kCGInterpolationHigh]; 
```

特伦特的代码：

```
- (UIImage *)resizedImageWithContentMode:(UIViewContentMode)contentMode
                                  bounds:(CGSize)bounds
                    interpolationQuality:(CGInterpolationQuality)quality {
    CGFloat horizontalRatio = bounds.width / self.size.width;
    CGFloat verticalRatio = bounds.height / self.size.height;
    CGFloat ratio;

    switch (contentMode) {
        case UIViewContentModeScaleAspectFill:
            ratio = MAX(horizontalRatio, verticalRatio);
            break;

        case UIViewContentModeScaleAspectFit:
            ratio = MIN(horizontalRatio, verticalRatio);
            break;

        default:
            [NSException raise:NSInvalidArgumentException format:@"Unsupported content mode: %d", contentMode];
    }

    CGSize newSize = CGSizeMake(self.size.width * ratio, self.size.height * ratio);

    return [self resizedImage:newSize interpolationQuality:quality];
} 
```

**更新：**这里是“调整大小的图像以及来自特伦特的代码：

```
- (UIImage *)resizedImage:(CGSize)newSize interpolationQuality:(CGInterpolationQuality)quality {
    BOOL drawTransposed;
    CGAffineTransform transform = CGAffineTransformIdentity;

    // In iOS 5 the image is already correctly rotated. See Eran Sandler's
    // addition here: http://eran.sandler.co.il/2011/11/07/uiimage-in-ios-5-orientation-and-resize/

    if ( [[[UIDevice currentDevice] systemVersion] floatValue] >= 5.0 ) 
    {
        drawTransposed = NO;  
    } 
    else 
    {    
        switch ( self.imageOrientation ) 
        {
            case UIImageOrientationLeft:
            case UIImageOrientationLeftMirrored:
            case UIImageOrientationRight:
            case UIImageOrientationRightMirrored:
                drawTransposed = YES;
                break;
            default:
                drawTransposed = NO;
        }

        transform = [self transformForOrientation:newSize];
    } 

    return [self resizedImage:newSize transform:transform drawTransposed:drawTransposed interpolationQuality:quality];
} 
```

这里是转换......但我已经知道这不是实际问题所在：

```
- (CGAffineTransform)transformForOrientation:(CGSize)newSize {
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:           // EXIF = 3
        case UIImageOrientationDownMirrored:   // EXIF = 4
            transform = CGAffineTransformTranslate(transform, newSize.width, newSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:           // EXIF = 6
        case UIImageOrientationLeftMirrored:   // EXIF = 5
            transform = CGAffineTransformTranslate(transform, newSize.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:          // EXIF = 8
        case UIImageOrientationRightMirrored:  // EXIF = 7
            transform = CGAffineTransformTranslate(transform, 0, newSize.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        default:
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:     // EXIF = 2
        case UIImageOrientationDownMirrored:   // EXIF = 4
            transform = CGAffineTransformTranslate(transform, newSize.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:   // EXIF = 5
        case UIImageOrientationRightMirrored:  // EXIF = 7
            transform = CGAffineTransformTranslate(transform, newSize.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        default:
            break;
    }

    return transform;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:56:52.180

解决了

```
 - (UIImage *)resizedImage:(CGSize)newSize interpolationQuality:(CGInterpolationQuality)quality {
        BOOL drawTransposed;
        switch ( self.imageOrientation )
        {
            case UIImageOrientationLeft:
                        case UIImageOrientationLeftMirrored:
                        case UIImageOrientationRight:
                        case UIImageOrientationRightMirrored:
                      drawTransposed = YES;
                      break;
                        default:
                      drawTransposed = NO;
                }
        CGAffineTransform transform = [self transformForOrientation:newSize];

        return [self resizedImage:newSize transform:transform drawTransposed:drawTransposed interpolationQuality:quality];
    } 
```

# jquery - jquery在输入时提交，但允许shift+输入

> ID：15395797
> 
> 赞同：1
> 
> 时间：2013-03-13T20:26:42.130
> 
> 标签：jquery, forms

我想让一个文本区域在输入时提交。

```
 <script>
                    $('#wire_post').keydown(function (e) {
                    var keyCode = e.keyCode || e.which;                         
                    if (keyCode == 13) {
                    $(this).parents('form').submit();
                    return false;
                    }
                    });
                </script> 
```

不幸的是，我无法使用上面的代码进行 shift+enter，因为输入被捕获并提交了表单。如何允许 shift+enter 到 CR 到文本区域的下一行，同时保留最初预期的功能？

# binding - 淘汰赛绑定不适用于数组

> ID：15395801
> 
> 赞同：0
> 
> 时间：2013-03-13T20:27:02.363
> 
> 标签：binding, knockout.js

我正在尝试执行以下操作：（请参阅 jsfiddle 中的示例：http: [//jsfiddle.net/graphicsxp/QJK99/1/](http://jsfiddle.net/graphicsxp/QJK99/1/)）

javascript:

```
var originalData = {
id: 1,
name: "Main",
 children: [ { id: 2, name: "bob" }, { id: 3, name: "ted" } ],
selectedChild:  { id: 2, name: "bob" }
};

var viewModel = ko.mapping.fromJS(originalData);

viewModel.selectChild = function(){
   var obj =  { id: 9, name: "new" };

   viewModel.selectedChild(obj);
}  

ko.applyBindings(viewModel); 
```

HTML：

```
 <button data-bind="click: selectChild">click me</button>

<br/>

 <span data-bind="text: selectedChild.name"></span> 
```

但这不会显示 selectedChild 属性。我究竟做错了什么 ？

**[编辑]**

我不得不在这段代码中添加括号：

```
<span data-bind="text: selectedChild().name"></span> 
```

这很好，但我还必须在映射后添加这行代码：

```
viewModel.selectedChild = ko.observable(viewModel.children()[0]); 
```

这太烦人了。为什么我需要将属性隐式设置为 observable ？另外，如果我不给它一个默认值，它就不起作用。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:49:35.310

您应该创建`selectedChild`一个计算出的 observable，它将返回选定的孩子。添加一个可观察的对象，它将跟踪选择的孩子。只需跟踪`id`（或任何唯一标识孩子的属性）。

```
var originalData = {
    id: 1,
    name: "Main",
    children: [{
        id: 2,
        name: "bob"
    }, {
        id: 3,
        name: "ted"
    }],
    selectedId: 2
};

var viewModel = ko.mapping.fromJS(originalData);
viewModel.selectedChild = ko.computed(function() {
    var selectedId = this.selectedId(),
        children = this.children();

    // get the first child that has the same id as the selectedId
    return ko.utils.arrayFirst(children, function(child) {
        return child.id() === selectedId;
    });
}, viewModel); 
```

然后，为了让您更轻松地显示选定的孩子，`with`如果选择了有效的孩子，请使用绑定有条件地呈现。

```
<div data-bind="with: selectedChild">
    <span data-bind="text: name"></span>
</div> 
```

[更新的小提琴](http://jsfiddle.net/QJK99/2/)

# ios - UIPickerView - 对多行行使用自定义视图 - 需要布局建议

> ID：15395813
> 
> 赞同：2
> 
> 时间：2013-03-13T20:27:27.683
> 
> 标签：ios, user-interface, uipickerview

我有一个 UIPickerView，它将为用户显示一个项目列表。我希望每个项目都显示为多行文本，每行使用不同的字体大小。一个粗略的模型如下所示。这将允许呈现比默认 UIPickerView 的单行更多的文本。

![小样](../Images/3b1133ee39cd4c922d71b12ea0b2c88f.png)

bdesham 指出我在 UIPickerView 的委托中使用 pickerView:viewForRow:forComponent:reusingView。这似乎是要走的路，因为它可以让我为各个行提供我自己的自定义视图。

我的想法是创建一个 UIView，它有 2 个 UILabel 子视图，每一行文本一个。这样我就可以对每一行应用不同的字体。我尝试了以下方法，但布局似乎不起作用。我需要线条在另一个之上。下面是我尝试通过掩码将第二行浮动到底部。

```
#define VIEWTAG_LINE1 1
#define VIEWTAG_LINE2 2

- (UIView*)pickerView:(UIPickerView *)thePickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UIView* v;
    if (view)
        v = view;
    else
    {
        v = [[[UIView alloc] init] autorelease];

        UILabel* l1 = [[[UILabel alloc] init] autorelease];
        l1.tag = VIEWTAG_LINE1;
        [v addSubview: l1];

        UILabel* l2 = [[[UILabel alloc] init] autorelease];
        l2.tag = VIEWTAG_LINE2;
        l2.autoresizingMask = UIViewAutoresizingFlexibleTopMargin;
        [v addSubview: l2];
    }

    UILabel* l1 = (UILabel*)[v viewWithTag: VIEWTAG_LINE1];
    l1.text = [NSString stringWithFormat: @"row %d line 1", row];
    [l1 sizeToFit];

    UILabel* l2 = (UILabel*)[v viewWithTag: VIEWTAG_LINE2];
    l2.text = [NSString stringWithFormat: @"row %d line 2", row];
    [l2 sizeToFit];

    [v sizeToFit];

    return v;
} 
```

这会产生以下内容。关于获得两个 UILabel 视图以便将它们堆叠在一起产生所需的多行结果的任何建议？

![多线尝试](../Images/901a70f0a741130f1ad1089fec1a76fb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T03:04:49.217

您需要设置两个标签的框架和字体。

```
 v = [[[UIView alloc] init] autorelease];

    UILabel* l1 = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 24)] autorelease];
    li.font = [UIFont sytemFontOfSize:22]; // choose desired size
    l1.tag = VIEWTAG_LINE1;
    [v addSubview: l1];

    UILabel* l2 = [[[UILabel alloc] initWithFrame:CGRectMake(0, 24, 320, 16)] autorelease];
    l2.font = [UIFont sytemFontOfSize:14]; // choose desired size
    l2.tag = VIEWTAG_LINE2;
    [v addSubview: l2]; 
```

根据需要调整标签的高度。根据需要调整`y`原点。`l2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T11:59:42.097

如果有人在使用自动布局时遇到此问题，请设置`translatesAutoresizingMaskIntoConstraints`为`YES`（这是默认值）。我将其设置为`NO`，这导致了所有问题。

# asp.net - aspx 参数中的正斜杠导致错误

> ID：15395816
> 
> 赞同：0
> 
> 时间：2013-03-13T20:27:59.363
> 
> 标签：asp.net, web-applications, jquery-mobile

在下面的 href 中，当 ItemID 参数（一个字符串）包含一个“/”正斜杠时，它会导致当前页面 ViewQuickQuote.aspx 重新加载，而不是转到 SelectedItem.aspx 页面。我知道其他一切工作正常，因为这只发生在 ID 中带有正斜杠的 ItemID 时。

```
 <li><a href="SelectedItem.aspx?itemID=<%=ItemID %>">View Inventory and Pricing</a></li> 
```

**例子**

```
<a href="SelectedItem.aspx?itemID=HON.TH6320WF1005/U" class="ui-link-inherit">View Inventory and Pricing</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:39:36.660

您需要对 ItemID 进行 UrlEncode：

```
<a href="SelectedItem.aspx?itemID=<%=HttpUtility.UrlEncode(ItemID) %>">View Inventory and Pricing</a> 
```

它位于`System.Web`命名空间中。

并取消编码使用该方法`HttpUtility.UrlDecode()`

# coldfusion - 无法启动事件网关实例：未启用事件网关服务

> ID：15395819
> 
> 赞同：3
> 
> 时间：2013-03-13T20:28:08.750
> 
> 标签：coldfusion, coldfusion-10, cfml, event-gateway

我最近将我们的服务器从 ColdFusion 7 Enterprise 迁移到 ColdFusion 10 Standard，现在我们的事件网关无法正常工作。当我尝试启动它们时，它说：

> 无法启动事件网关实例：未启用事件网关服务。

我确实在“网关设置”页面中选中了“启用 ColdFusion 事件网关服务”。当我打开和关闭设置时，它显示“事件网关已启动。”。然而它仍然不会启动我的服务。当我单击开始时，我收到“无法开始...”错误。

我在 Adob​​e 的网站上看到了一些关于这个问题的帖子，但没有解决方案。两个线程都以“它现在可以工作了！”的评论结束，但没有解释问题是*如何*解决的。

*   [无法启动事件网关实例：事件网关服务未启用。，（服务已启用）](http://webcache.googleusercontent.com/search?q=cache%3aTCYzUodUbcMJ%3aforums.adobe.com/thread/1143757?tstart=0%20&cd=4&hl=en&ct=clnk&gl=us&client=firefox-a)
*   [事件网关服务/实例不工作](http://forums.adobe.com/thread/204629)

我完全忘记了服务器上的设置还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:59:04.183

我想到了。如果您使用的是 Standard 而不是 Enterprise，则必须确保您只在线程中输入 1。我在我们的旧服务器上输入了 8。当我点击更新时，它并没有真正更新，即使它说是。在我用 1 个线程更新它并重新启动服务器之后。有效。我什至不必单击启动服务，它们是自己出现的。我假设因为答案很简单，为什么没有人在 adobe 论坛上更新自己的答案，这非常烦人。

![Service will work on standard edition only if 1 thread is selected.](../Images/cfc6a91c8aedc3caae7a7aef19153c20.png)

![仅允许 1 个线程 标准版](../Images/e0266c7319e5df457e6601ba90221bb3.png)

![在此处输入图像描述](../Images/14afc0d4ab7fbdebf24593349c76b36c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:29:26.577

您需要在 CF Administrator 中启动事件网关服务，然后可能需要重新启动 ColdFusion 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T23:26:36.487

这可能是由于您尝试查看的目录权限不足造成的。检查 Coldfusion Application Server 服务的服务帐户，看看它是否有足够的权限（即本地系统帐户可能无法访问您要查看的目录）

# events - Datagrid 事件在标题窗格中不起作用

> ID：15395822
> 
> 赞同：0
> 
> 时间：2013-03-13T20:28:25.237
> 
> 标签：events, datagrid, dojo

我是 Dojo 的新手，正在尝试创建可以在单击时展开的 Datagrid。因此，我决定将数据网格放在标题窗格中，以便数据网格可以显示在展开的标题窗格中。

标题窗格效果很好，我可以在里面设置数据网格。到目前为止一切都很好。唯一的问题是，我无法在数据网格中获取点击事件。（我无法进行行选择、排序等）

我正在使用 dojo 1.8.3，这是我的代码

函数（taskListModel）{ var 任务 = taskListModel.getData();

```
require(["dojo/ready", "dijit/TitlePane", "dojo/dom"], function(ready, TitlePane, dom){
    ready(function(){
        taskListTitlePane = new dijit.TitlePane({title:"Click here to see Task List", content: "Collapse me!"});
        dom.byId("taskListTitlePane").appendChild(taskListTitlePane.domNode);
        createTaskDataGrid(tasks);      
    });
});} 
```

网格创建：

```
var createTaskDataGrid = function(tasks){ 
```

/*设置数据存储*/ var data = { identifier: "id", items: [] };

```
// push the data into items
for(var i = 0; i < tasks.length; i++){
data.items.push(lang.mixin({ id: i+1 }, tasks[i]));
}
var store = new ItemFileWriteStore({data: data});

/*set up layout*/
var layout = [[
  {'name': 'S.No', 'field': 'id', 'width': '10%'},
  {'name': 'TaskName', 'field': 'task_name', 'width': '20%'},
  {'name': 'Assignee', 'field': 'assignee', 'width': '20%'},
  {'name': 'Module', 'field': 'module_name', 'width': '20%'},
  {'name': 'DueDate', 'field': 'taskid', 'width': '15%'},
  {'name': 'Status', 'field': 'status', 'width': '15%'}
]];

/*create a new grid*/
var grid = new DataGrid({
id: 'grid',
store: store,
structure: layout,
rowSelector: '20px',
autoHeight: true});

/*append the new grid to the div*/
grid.placeAt("tasklistscroller");

/*Call startup() to render the grid*/
grid.startup();

grid.on("RowClick", function(evt){
    var idx = evt.rowIndex,
    rowData = grid.getItem(idx);
    //console.log("row data is = " + rowData.task_name + " " + rowData.taskid);
    mainController.taskSelected(rowData.taskid, rowData.task_name);
}, true);

if(taskListTitlePane !== null){
    console.log("setting grid inside title pane");
    taskListTitlePane.setContent(grid.domNode);
    //taskListTitlePane.containerNode.appendChild(grid.domNode); 
}} 
```

任何帮助都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:18:10.503

请尝试以下代码在网格启动后将 onClick 事件与数据网格连接起来。

```
 dojo.connect(grid,'onRowClick',function(event) {
        var idx = event.rowIndex,
        rowData = grid.getItem(idx);
        //console.log("row data is = " + rowData.task_name + " " + rowData.taskid);
        mainController.taskSelected(rowData.taskid, rowData.task_name);
    }); 
```

也用于排序请使用`grid.canSort = true;`

# jquery - .prop、.attr 在尝试禁用 asp:CheckBox 时不起作用

> ID：15395826
> 
> 赞同：0
> 
> 时间：2013-03-13T20:28:39.243
> 
> 标签：jquery, google-chrome, firefox, checkbox, prop

我有一堆 asp:checkboxs。他们中的大多数都有一个“restricted”类，并且都有clientIdMode='static'。我有一个 id='other' 的单独复选框。单击此框时，我希望禁用带有 class='restricted' 的框。问题是我无法让它在 Firefox 或 Chrome 中运行。我在网上找到了一堆相关的问题，但没有真正的答案。

```
$('#other').click(function() {
    if ($(this).is(":checked")) {
        $(".restricted").prop("disabled", "disabled");
    }
    else {
        $(".restricted").prop("disabled", false);
    }
}); 
```

我尝试过使用 .prop、.attr、("disabled", true) 和 ("disabled", "disabled") 的组合，但我无法让它在 IE 之外工作。

编辑：这里还有一些 html：

```
<fieldset>
    <legend>Accessories</legend>
    <ol>
        <li>
            <asp:CheckBox ID="cb1" runat="server" ClientIDMode="Static" CssClass="restricted" />
            <label for="cb1">VAL 1</label>
        </li>
        <li>
            <asp:CheckBox ID="cbP2" runat="server" ClientIDMode="Static" CssClass="restricted" />
            <label for="cb2">VAL 2</label>
        </li>
        <li>
            <asp:CheckBox ID="cb3" runat="server" ClientIDMode="Static" CssClass="restricted" />
            <label for="cbPickupInside">VAL 3</label>
        </li>
        <li>
            <asp:CheckBox ID="cb4" runat="server" ClientIDMode="Static" CssClass="restricted" />
            <label for="cb4">Value 4</label>
        </li>
    </ol>
</fieldset> 
```

并且单击时应禁用另一个复选框：

```
<fieldset>
<ol>
    <li>
        <asp:CheckBox ID="cbG" runat="server" ClientIDMode="Static" />
        <label for="cbG">VAL G</label>
    </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:12:02.083

```
$('#other').click(function() {
        if ($(this).is(":checked")) {
            $(".restricted input").prop("disabled", "disabled");
        }
        else {
            $(".restricted input").prop("disabled", false);
        }
    }); 
```

我通过在类选择器之后添加输入选择器来修复它。输入周围的跨度实际上是类，所以我猜 IE 找到了跨度并针对输入运行代码。Chrome 和 Firefox 必须停止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T20:47:10.630

如果这是一个 asp 复选框，目标如下：

```
$("#<%=other.ClientID %>").click(function() {
    //code here
}); 
```

更改您的复选框类

```
CssClass="restricted" 
```

到

```
class="restricted" 
```

# python - 简单的多层神经网络实现

> ID：15395835
> 
> 赞同：27
> 
> 时间：2013-03-13T20:29:12.800
> 
> 标签：python, machine-learning, artificial-intelligence, neural-network

前段时间我开始了我的机器学习冒险（在我学习的最后 2 年）。我读了很多书，写了很多机器学习算法的代码，除了神经网络，这些超出了我的范围。我对这个话题很感兴趣，但我有一个很大的问题：我读过的所有书都有两个主要问题：

1.  包含数学方程式的音调。课后我对它们非常熟悉，而且我可以在纸上手工计算。
2.  包含嵌入在某些复杂上下文中的大示例（例如调查网店销售率），并且要进入神经网络实现，我必须编写大量代码来重现上下文。缺少什么 - 简单直接的实现，没有很多上下文和方程式。

你能告诉我，我在哪里可以找到多层感知（神经网络）的简单实现？我不需要理论知识，也不需要上下文嵌入的示例。我更喜欢一些脚本语言来节省时间和精力——我以前的工作 99% 都是用 Python 完成的。

这是我以前读过的书（但没有找到我想要的）：

1.  机器学习在行动
2.  编程集体智能
3.  机器学习：算法视角
4.  Java中的神经网络介绍
5.  C#中的神经网络简介

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-11T16:42:20.287

# 一个简单的实现

这是一个使用`Python`. 此实现以效率换取可理解性：

```
 import math
    import random

    BIAS = -1

    """
    To view the structure of the Neural Network, type
    print network_name
    """

    class Neuron:
        def __init__(self, n_inputs ):
            self.n_inputs = n_inputs
            self.set_weights( [random.uniform(0,1) for x in range(0,n_inputs+1)] ) # +1 for bias weight

        def sum(self, inputs ):
            # Does not include the bias
            return sum(val*self.weights[i] for i,val in enumerate(inputs))

        def set_weights(self, weights ):
            self.weights = weights

        def __str__(self):
            return 'Weights: %s, Bias: %s' % ( str(self.weights[:-1]),str(self.weights[-1]) )

    class NeuronLayer:
        def __init__(self, n_neurons, n_inputs):
            self.n_neurons = n_neurons
            self.neurons = [Neuron( n_inputs ) for _ in range(0,self.n_neurons)]

        def __str__(self):
            return 'Layer:\n\t'+'\n\t'.join([str(neuron) for neuron in self.neurons])+''

    class NeuralNetwork:
        def __init__(self, n_inputs, n_outputs, n_neurons_to_hl, n_hidden_layers):
            self.n_inputs = n_inputs
            self.n_outputs = n_outputs
            self.n_hidden_layers = n_hidden_layers
            self.n_neurons_to_hl = n_neurons_to_hl

            # Do not touch
            self._create_network()
            self._n_weights = None
            # end

        def _create_network(self):
            if self.n_hidden_layers>0:
                # create the first layer
                self.layers = [NeuronLayer( self.n_neurons_to_hl,self.n_inputs )]

                # create hidden layers
                self.layers += [NeuronLayer( self.n_neurons_to_hl,self.n_neurons_to_hl ) for _ in range(0,self.n_hidden_layers)]

                # hidden-to-output layer
                self.layers += [NeuronLayer( self.n_outputs,self.n_neurons_to_hl )]
            else:
                # If we don't require hidden layers
                self.layers = [NeuronLayer( self.n_outputs,self.n_inputs )]

        def get_weights(self):
            weights = []

            for layer in self.layers:
                for neuron in layer.neurons:
                    weights += neuron.weights

            return weights

        @property
        def n_weights(self):
            if not self._n_weights:
                self._n_weights = 0
                for layer in self.layers:
                    for neuron in layer.neurons:
                        self._n_weights += neuron.n_inputs+1 # +1 for bias weight
            return self._n_weights

        def set_weights(self, weights ):
            assert len(weights)==self.n_weights, "Incorrect amount of weights."

            stop = 0
            for layer in self.layers:
                for neuron in layer.neurons:
                    start, stop = stop, stop+(neuron.n_inputs+1)
                    neuron.set_weights( weights[start:stop] )
            return self

        def update(self, inputs ):
            assert len(inputs)==self.n_inputs, "Incorrect amount of inputs."

            for layer in self.layers:
                outputs = []
                for neuron in layer.neurons:
                    tot = neuron.sum(inputs) + neuron.weights[-1]*BIAS
                    outputs.append( self.sigmoid(tot) )
                inputs = outputs   
            return outputs

        def sigmoid(self, activation,response=1 ):
            # the activation function
            try:
                return 1/(1+math.e**(-activation/response))
            except OverflowError:
                return float("inf")

        def __str__(self):
            return '\n'.join([str(i+1)+' '+str(layer) for i,layer in enumerate(self.layers)]) 
```

## 更有效的实施（通过学习）

如果您正在寻找具有学习（反向传播）功能的神经网络的更有效示例，请在[此处查看我的神经网络 Github 存储库](http://jorgenkg.github.io/python-neural-network/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T14:36:51.187

嗯，这很棘手。我之前也遇到过同样的问题，在好的但大量数学负载的解释和准备使用的实现之间我找不到任何东西。

*像 PyBrain 这样的现成*实现的问题在于它们隐藏了细节，因此对学习如何实现 ANN 感兴趣的人需要其他东西。阅读此类解决方案的代码也可能具有挑战性，因为它们经常使用启发式方法来提高性能，这使得初学者更难理解代码。

但是，您可以使用一些资源：

[http://msdn.microsoft.com/en-us/magazine/jj658979.aspx](http://msdn.microsoft.com/en-us/magazine/jj658979.aspx)

[http://itee.uq.edu.au/~cogs2010/cmc/chapters/BackProp/](http://itee.uq.edu.au/~cogs2010/cmc/chapters/BackProp/)

[http://www.codeproject.com/Articles/19323/Image-Recognition-with-Neural-Networks](http://www.codeproject.com/Articles/19323/Image-Recognition-with-Neural-Networks)

[http://freedelta.free.fr/r/php-code-samples/artificial-intelligence-neural-network-backpropagation/](http://freedelta.free.fr/r/php-code-samples/artificial-intelligence-neural-network-backpropagation/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-23T20:36:50.030

这是一个如何使用 numpy 实现前馈神经网络的示例。首先导入 numpy 并指定输入和目标的维度。

```
import numpy as np

input_dim = 1000
target_dim = 10 
```

我们现在将构建网络结构。正如 Bishop 伟大的“模式识别和机器学习”中所建议的，您可以简单地将 numpy 矩阵的最后一行视为偏置权重，将激活的最后一列视为偏置神经元。那么，第一个/最后一个权重矩阵的输入/输出维度需要大 1。

```
dimensions = [input_dim+1, 500, 500, target_dim+1]

weight_matrices = []
for i in range(len(dimensions)-1):
  weight_matrix = np.ones((dimensions[i], dimensions[i]))
  weight_matrices.append(weight_matrix) 
```

如果您的输入存储在 2d numpy 矩阵中，其中每一行对应一个样本，而列对应于样本的属性，您可以像这样通过网络传播：（假设逻辑 sigmoid 函数作为激活函数）

```
def activate_network(inputs):
  activations = [] # we store the activations for each layer here
  a = np.ones((inputs.shape[0], inputs.shape[1]+1)) #add the bias to the inputs
  a[:,:-1] = inputs

  for w in weight_matrices:
    x = a.dot(w) # sum of weighted inputs
    a = 1\. / (1\. - np.exp(-x)) # apply logistic sigmoid activation
    a[:,-1] = 1\. # bias for the next layer.
    activations.append(a)

  return activations 
```

最后一个元素`activations`将是您的网络的输出，但要小心，您需要省略额外的偏差列，因此您的输出将是`activations[-1][:,:-1]`.

要训​​练网络，您需要实现反向传播，这需要几行额外的代码。`activations`基本上，您需要从最后一个元素循环到第一个元素。确保在每个反向传播步骤之前将每个层的误差信号中的偏差列设置为零。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T10:04:26.577

[这](http://arctrix.com/nas/python/bpnn.py)是本机python中的反向传播算法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T21:05:19.157

你试过[PyBrain](http://pybrain.org/)吗？它似乎有[据可查](http://pybrain.org/docs/)。

# ruby - Ruby 将对象写入和读取到文件

> ID：15395841
> 
> 赞同：5
> 
> 时间：2013-03-13T20:29:39.380
> 
> 标签：ruby, file, object, marshalling, unmarshalling

好的，所以我的目标是轻松地将一些数据保存到磁盘以供以后使用。你如何简单地写然后读一个对象？所以如果我有一个简单的课程

```
class C
    attr_accessor :a, :b
    def initialize(a, b)
        @a, @b = a, b
    end
end 
```

所以如果我用那个非常快的方法制作一个 obj

```
obj = C.new("foo", "bar") #just gave it some random values 
```

然后我可以把它变成一个 id

```
string = obj.to_s #which returns "<C:0x240dcf8 @a="foo", @b="bar">" 
```

我终于可以将此字符串打印到文件或其他东西上。我的问题是，我该如何将这个 id 再次变成一个对象？我知道我可以自己挑选信息并创建一个接收该信息的初始化函数，但是 ruby​​ 肯定有一些内置的东西可以将它转回一个对象，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:35:03.603

Ruby has a couple of ways to serialize an object:

```
c = C.new("foo", "bar")

# using YAML
require 'yaml'
yaml_serialized = c.to_yaml
c_object = YAML.load yaml_serialized

# using Marshal
marshal_serialized = Marshal.dump c
c_object = Marshal.load marshal_serialized 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:35:18.960

该字符串不能转回一个对象，它本质上只是一个哈希。

您正在寻找对象的编组或序列化。

[http://www.ruby-doc.org/core-2.0/Marshal.html](http://www.ruby-doc.org/core-2.0/Marshal.html)

> 编组库将 Ruby 对象的集合转换为字节流，允许将它们存储在当前活动脚本之外。随后可以读取该数据并重构原始对象。

这样做时总是存在安全问题，请确保您知道正在阅读的内容。

还要注意某些类型的对象不能编组，涉及 IO 等的东西

编辑：另外，正如 Kyle 指出的那样，yaml 是一种很好的人类可读的字符串表示形式，也应该提到

# php - 告诉 SELinux 授予 Apache 对文档根目录外 PHP 文件的执行访问权限

> ID：15395845
> 
> 赞同：6
> 
> 时间：2013-03-13T20:29:49.830
> 
> 标签：php, apache, selinux

我有一个保存共享 PHP 脚本的目录（名称是任意的，但不是 /var/、/usr/ 或任何 SELinux 具有特定设置的东西）：
/whatever/scripts/

这些脚本可以由 cronjobs 执行，也可以由 Apache 或 Tomcat 执行，因此输出可以包含在网页中。

SELinux 拒绝许可：

> type=AVC msg=audit(1363205612.276:476923): avc: denied { execute } for pid=6855 comm="sh" name="script.php" dev=sda3 ino=4325828 scontext=system_u:system_r:httpd_t:s0 tcontext =unconfined_u:object_r:etc_runtime_t:s0 tclass=文件
> 
> 类型=SYSCALL msg=audit(1363205612.276:476923):arch=c000003e syscall=59 成功=没有退出=-13 a0=2431d10 a1=2431d70 a2=24301e0 a3=50 项= 0 ppid=23100 pid=6855 auid=4294967295 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(无) ses=4294967295 comm="sh" exe=" /bin/bash" subj=system_u:system_r:httpd_t:s0 key=(null)
> 
> type=AVC msg=audit(1363205612.277:476924):avc: denied { execute } for pid=6855 comm="sh" name="script .php" dev=sda3 ino=4325828 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:etc_runtime_t:s0 tclass=文件
> 
> type=SYSCALL msg=audit(1363205612.277:476924):arch=c000003e syscall=21 成功=没有退出=-13 a0=2431d10 a1=1 a2=0 a3=50 项=0 ppid=23100 pid=6855 auid=4294967295 uid =48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=4294967295 comm="sh" exe="/bin/bash" subj=system_u:system_r: httpd_t:s0 key=(null)

我知道有一个命令可以用来告诉 SELinux 允许这样做，但它让我望而却步。

即使使目录和脚本所有者和组 apache 也不起作用，所以这不是典型的权限问题，而是 SELinux 特有的。

系统为CentOS 6.3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T03:09:06.163

我用这两个命令找到了解决方案：

> semanage fcontext -a -t httpd_sys_script_exec_t '/whatever/scripts(/.*)?'
>  
> restorecon -R -v /whatever/scripts/

这允许 Apache 在该目录中执行 PHP 脚本，并在重新启动或系统范围重新标记后持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T22:57:26.057

我将它与我需要从我的 PHP 脚本和 Apache 运行的可执行程序一起使用

```
sudo chcon -v -t httpd_sys_script_exec_t my-executable 
```

# php - Google OAuth 2 auth - 错误：redirect_uri_mismatch 即使在注册 uri 之后

> ID：15395846
> 
> 赞同：4
> 
> 时间：2013-03-13T20:29:53.993
> 
> 标签：php, curl, google-api, access-token, google-oauth

我正在尝试使用 Google OAuth2 交换 access_token 的授权码

```
$client_id = urlencode(GOOGLE_CLIENT_ID);
$client_sec = GOOGLE_CLIENT_SECRET;  
$redirect_uri = urlencode("http://example.com/path/auth.php");
$code = 'Authorization_code_received';
$post="code=$code&client_id=$client_id&client_secret=$client_sec&redirect_uri=$redirect_uri&grant_type=authorization_code";
$ch=curl_init();
$url="https://accounts.google.com/o/oauth2/token";
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch,CURLOPT_AUTOREFERER,1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch,CURLOPT_POST,1); 
curl_setopt($ch,CURLOPT_POSTFIELDS,$post);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
$json=curl_exec($ch);
curl_close($ch);
print_r($json); 
```

我明白了 我的问题[在这里](https://stackoverflow.com/questions/11485271/google-oauth-2-authorization-error-redirect-uri-mismatch)`"error" : "redirect_uri_mismatch"` 完全一样，但我也在google api控制台中注册了我的redirecturi很长时间并且它处于活动状态。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:41:55.457

转到`https://code.google.com/apis/console`并检查`Client ID for web applications`部分中的重定向 URI....检查您的代码`$redirect_uri = urlencode("http://example.com/path/auth.php");`中设置的重定向 URI 是否与 google api 控制台上的相同....

可能是这个原因……

# css - CSS 容器/背景未显示；其余布局工程

> ID：15395847
> 
> 赞同：1
> 
> 时间：2013-03-13T20:29:56.317
> 
> 标签：css, html, background, containers

这是我的问题，我会尽我所能在这里澄清——我有一个简单的网站，使用外部样式表以完整的 CSS 布局。我有一个主容器，其中包含网站内容的所有元素；但是，除了保存实际页面文本和`businessbox`. 现在，它显示主要容器的背景颜色（绿色）而不是它应该是什么（白色）。我很肯定这是我忽略的简单事情，以后可能会踢自己，但我想我会要求第二双眼睛。

这是我得到的以及它应该是什么样子。如果我在使用这个容器时遇到问题，希望对 3 个垂直列进行编程不会成为问题！

截屏：

![在此处输入图像描述](../Images/6734fca4b1515e016371d465442c08ef.png)

我的样式表（style.css）：

```
@charset "UTF-8";
/* CSS Document */

body {
background: #88b488;
margin: 3%;
font-family: Arial, Helvetica, sans-serif;
}

#container {
background: #006200;
width: 1020px;
margin: 0 auto;
}

#header {
background-image: url(img/BS_header.jpg);
background-repeat:  no-repeat;
background-position:center;
width: 1020px;
height: 322px;
} 

<!-- MENU ITEMS -->
#menu {
background: #25235b;
width: 100%;
z-index: 2;
}

#menu ul, #menu ul ul {
list-style-type: none;
padding: 0;
margin: 0;
float: right;
margin-top: 15px;
margin-right: 5px;
}

#menu ul li{
padding: 5px;
position: relative;
float: left;
}

#menu ul a:link, #menu ul a:visited{
display: inline-block;
color: #ffffff;
width: 90px;
padding: 5px;
text-decoration: none;
font-size: 12px;
font-weight: bold;
text-align: center;
} 

#menu ul a:hover, #menu ul a:active {
background: #006100;
}

#menu ul ul {
position: absolute;
margin-top: -1px;
right: 0px;
white-space: nowrap;
visibility: hidden;
}

#menu ul li:hover ul li{
    visibility: visible;
    color: #ffffff;
    background-color: #afafaf;
    padding: 0px;
}

<!-- CONTENT -->
#cbox{
width: 1020px;
background-color: #ffffff;
background-image:url(img/content_grad.jpg);
background-repeat: repeat-x;
}

#businessbox {
background-color: #006200;
width: 620px;
height: auto;
border-top: 3px solid #afafaf;
margin-top: 30px;
padding: 10px;
margin: 30px auto 0px;
}

.businesstitle {
text-align:center;
font-size: 20px;
color: #ffffff;
text-transform: uppercase;
font-style:italic;
}

.businesstext {
color: #ffffff;
font-size: 14px;
}

#footer {
font-size: 10px;
text-transform: uppercase;
color: #fff;
text-align: center;
padding: 10px;
background: #006100;
} 
```

我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Buy Local</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div id="container">
<div id="header">
    <div id="menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Hot Deals</a></li>
            <li><a href="#">Sign Up!</a></li>
            <li><a href="#">Resources</a>
                <ul>
                <li><a href="#">Events</a></li>
                </ul>
            </li>
      </ul>
    </div> <!--end of menu-->
</div> <!--end of header-->

<div id="cbox">
    <div id="businessbox">
        <div class="businesstitle">Our BUSINESS OF THE MONTH:</div><br />
        <img src="#" width="150" height="90" style="float: left; padding-right: 10px;"/>
        <div class="businesstext">You could be our next title sponsor and get your business in the spotlight with logo, name, and short blurb about your business.</div>
    </div> <!--end of businessbox-->

</div> <!--end of cbox-->

<div id="footer">
    2013 &copy; Buy Local
</div><!--end of footer-->

</div><!--end of container-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:38:26.767

您的 CSS 中有 HTML 注释。浏览器正在跳过渲染它旁边的行，因此您的 #cbox 和 #menu 样式永远不会应用。删除`<!-- MENU ITEMS -->`和`<!-- CONTENT -->`评论，这应该可以正常工作。

请参阅[此小提琴](http://jsfiddle.net/ZBmne/1/)以了解实际情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:40:37.017

操作，

你为什么这样做：`<img src="#" ...`？

另外，您的*任何*`background-image`网址都在解析吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:25:14.397

就像我说的，很明显——使用了错误的注释格式，导致#cbox 属性无法正常工作。

感谢您花时间帮助我解决我的愚蠢问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:30:46.430

在您使用图像或背景图像的地方，`overflow: hidden; height: 1%;`我认为使用会解决您的问题。

# javascript - 谷歌脚本日期显示错误的“小时”

> ID：15395848
> 
> 赞同：0
> 
> 时间：2013-03-13T20:30:00.277
> 
> 标签：javascript, google-apps-script, dst, timezone-offset

我感觉好像我已经翻阅了几乎所有关于 JS 和 GAS 中日期的文档。特别是关于夏令时问题。因为在 DST 更改之前我没有遇到过这样的问题。我想我错过了一些简单的东西。问题是，尽管设置了所有设置，但格式实用程序输出的日期时间仍然不正确。下面是调试器的屏幕截图和我正在运行的代码片段。值“日期”是我所关心的。它是在第 53 行的脚本中创建的。

```
var date = new Date(); //line 53
date = Utilities.formatDate(date, "Chicago/America", "MM/dd/yyyy HH:mm:ss zzzz"); //line 61 
```

我在KC。（中部时间或 UTC-06:00 或其他）。

我有一种感觉，这对我来说将是一个面对面的时刻，但是哦，好吧！感谢您的任何帮助！

![调试输出](../Images/a8d0ae0b668897cafc03f5a25d17a944.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:56:50.717

我通常使用没有任何问题的只是：

```
 var FUS1=new Date(dateObject).toString().substr(25,6)+":00";// get the timeZone part of the string coming from the date you are working on (an event)
  dateString = Utilities.formatDate(dateObject, FUS1, "MM/dd/yyyy HH:mm:ss");// use it in formatDate and it will have the right value for every season... 
```

请注意，您`date`在示例代码中使用了 2 次：一次作为字符串结果，一次作为同一行中的日期对象...

根据您的评论进行编辑：

例如，假设日期戳在 A2 中，以下代码应返回正确的时间。

```
 var date = SpreadsheetApp.getActiveSheet().getRange('A2').getValue();
  var FUS1=new Date(date).toString().substr(25,6)+":00";
  dateString = Utilities.formatDate(date, FUS1, "MM/dd/yyyy HH:mm:ss"); 
```

# ios - 在IOS中画彗星

> ID：15395849
> 
> 赞同：-2
> 
> 时间：2013-03-13T20:30:05.550
> 
> 标签：ios, objective-c, drawing, core-graphics

要求非常简单。

当用户移动他的手指时，会画出一颗彗星。我看过一些教程并实现了其中的一些，现在写在这里只是为了获得专家意见。

[http://soulwithmobiletechnology.blogspot.com/2011/06/redo-undo-in-paint-feature.html](http://soulwithmobiletechnology.blogspot.com/2011/06/redo-undo-in-paint-feature.html)

本教程教授如何绘制和撤消正在绘制的线。问题是彗星需要有一些很酷的效果；这意味着末端/尾部以淡出的方式消失。

如何实现这一点以及我所遵循的技术是否合适？

**仅供参考：**

**彗星**是名词：由冰核和尘埃组成的天体，当靠近太阳时，***气体和尘埃粒子的“尾巴”指向...***

第一个屏幕截图对彗星的基本效果有些意义

![这个屏幕截图对彗星的基本效果有些意义](../Images/99d88bfeeea288196221e7bccec745f2.png)

其中第二张图像根本没有意义，并且重复生成彗星效果的图像非常清晰。这是非常不可取的。

![这个图像根本没有意义，重复产生彗星效果的图像非常清晰。 这是非常不可取的。](../Images/6ccc93bc0fe85bbcf91bc7cab6329725.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:32:16.173

也许尝试使用[CAEmitterLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html)和[CAEmitterCell](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterCell_class/Reference/Reference.html)。

这也是Ray Wenderlich 网站上的一个很好的[教程。](http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:51:27.270

[您可以在Cocos2d](http://www.cocos2d-iphone.org/)中使用粒子效果。使用粒子效果，您可以制作出非常漂亮的东西。

# c# - 组合框绑定在使用 MVVM 的 ItemsControl 中不起作用

> ID：15395851
> 
> 赞同：0
> 
> 时间：2013-03-13T20:30:07.890
> 
> 标签：c#, mvvm

我有一个`ComboBox`in `ItemsControl`。我使用 WPF 和 MVVM，我无法弄清楚绑定到`ComboBox`，有人会帮我解决这个问题吗？XAML 和 VM 如下：

```
 <Window x:Class="OutageManagement.Views.MarketAssignmentsView"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            mc:Ignorable="d"
            Title="Market Selection"
            WindowStartupLocation="CenterOwner"
            Width="700" Height="850"
            DataContext="{Binding MarketAssignmentsVM, Source={StaticResource Locator}}" >
      <Grid>
          <ItemsControl ItemsSource="{Binding USMarket}">
              <ItemsControl.ItemTemplate>
                 <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Label Content="{Binding MarketName}" Height="28" 
                            HorizontalAlignment="Left" Name="lblUSMarketName"  
                            VerticalAlignment="Center" />
                        <ComboBox Grid.Column="1" Height="23" HorizontalAlignment="Left" 
                              Name="cbUSUsers" VerticalAlignment="Center" MinWidth="140"
                              ItemsSource="{Binding RelativeSource={RelativeSource 
                              AncestorType=Window}, Path=UserList}" 
                              DisplayMemberPath="UserName" 
                              SelectedValue="{Binding SelectedUserID}" 
                              SelectedValuePath="UserID"/>
                     </Grid>
                 </DataTemplate>
             </ItemsControl.ItemTemplate>
         </ItemsControl>
      </Grid>
     </Window> 
```

视图模型：

```
 public class MarketAssignmentsViewModel : ViewModelBase
    {

    #region Data
    ObservableCollection<NOCUserViewModel> _userList;
    ObservableCollection<MarketAssignmentViewModel> _usMarket;
    ObservableCollection<MarketAssignmentViewModel> _caMarket;
    #endregion 

    #region Constructor
    public MarketAssignmentsViewModel()
    {
        GetUserList();
        GetMarketAssignments();
    }
    #endregion 

    #region Properties

    public ObservableCollection<NOCUserViewModel> UserList
    {
        get { return _userList; }
    }
    public ObservableCollection<MarketAssignmentViewModel> USMarket
    {
        get { return _usMarket; }
    }

    public ObservableCollection<MarketAssignmentViewModel> CAMarket
    {
        get { return _caMarket; }
    }
    #endregion

    .
    .
    .
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:59:34.470

问题是您试图将`UserList`Window 的属性作为 Window 的属性来访问，而不是 Window 的*DataContext*的属性...

修改`ItemsSource`如下：

```
<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor
                          AncestorType=Window}, Path=DataContext.UserList}" ... /> 
```

我建议您在遇到绑定问题时始终查看*输出窗口*，您可能会看到如下内容：

`System.Windows.Data Error: 40 : BindingExpression path error: 'UserList' property not found on 'object' ''MarketAssignmentsView' (Name='')'.`

# lucene - 在 Elasticsearch 中，当我通过 ngram 过滤器运行一个单词时，为什么会丢失整个单词标记？

> ID：15395853
> 
> 赞同：1
> 
> 时间：2013-03-13T20:30:17.150
> 
> 标签：lucene, elasticsearch

似乎如果我通过 ngram 过滤器运行一个单词或短语，则原始单词不会被索引。相反，我只得到不超过我的 max_gram 值的单词块。我希望原始单词也能被索引。我正在使用 Elasticsearch 0.20.5。如果我使用带有 ngram 的过滤器设置索引，如下所示：

```
CURL -XPUT 'http://localhost:9200/test/' -d '{
    "settings": {
        "analysis": {
            "filter": {
                "my_ngram": {
                    "max_gram": 10,
                    "min_gram": 1,
                    "type": "nGram"
                },
                "my_stemmer": {
                    "type": "stemmer",
                    "name": "english"
                }
            },
            "analyzer": {
                "default_index": {
                    "filter": [
                        "standard",
                        "lowercase",
                        "asciifolding",
                        "my_ngram",
                        "my_stemmer"
                    ],
                    "type": "custom",
                    "tokenizer": "standard"
                },
                "default_search": {
                    "filter": [
                        "standard",
                        "lowercase"
                    ],
                    "type": "custom",
                    "tokenizer": "standard"
                }
            }
        }
    }
}' 
```

然后我在文档中放了一个长字：

```
CURL -XPUT 'http://localhost:9200/test/item/1' -d '{
     "foo" : "REALLY_REALLY_LONG_WORD"
 }' 
```

我查询那个长词：

```
CURL -XGET 'http://localhost:9200/test/item/_search' -d '{
  "query":
 {
     "match" : {
         "foo" : "REALLY_REALLY_LONG_WORD"
     }
 }
 }' 
```

我得到 0 个结果。如果我查询该单词的 10 个字符块，我会得到一个结果。当我运行这个：

```
curl -XGET 'localhost:9200/test/_analyze?text=REALLY_REALLY_LONG_WORD 
```

我得到了*很多*克，但不是原来的词。我是否缺少使这项工作按我想要的方式进行的配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:07:30.563

如果您想保留完整的词组，请使用多字段映射来保留一个“未分析”的值，或者使用关键字标记器。

此外，在搜索具有 nGram 标记值的字段时，您可能还应该使用 nGram-tokenizer 进行搜索，然后 n 字符限制也适用于搜索短语，您将获得预期的结果。

# php - 检查字段长度是否大于零

> ID：15395856
> 
> 赞同：0
> 
> 时间：2013-03-13T20:30:21.563
> 
> 标签：php, if-statement

在下面的代码片段中，已为在线表单创建了一个数据包，但如果有意将其中一个字段留空，则会引发错误。我该如何修改这个，如果字符串长度大于 0，则创建数据包，如果不是，就不要设置它或让它未定义？

```
$formData = $_POST['form'];//form post value

 // Create vendor packet
    $oVendor = new stdClass();
    $oVendor->office_name = $formData['vendor_info'][1]['vendor_bus'];
    $oVendor->first_name = $formData['vendor_info'][1]['vendor_first'];
    $oVendor->middle_name = $formData['vendor_info'][1]['vendor_middle'];
    $oVendor->last_name = $formData['vendor_info'][1]['vendor_last'];

    $oVendor->business_address = array(
        'street' => $formData['vendor_address'][1]['vendor_street'],
        'city' => $formData['vendor_address'][1]['vendor_city'],
        'state' => $formData['vendor_address'][1]['vendor_state'],
        'zip' => $formData['vendor_address'][1]['vendor_zip'],
        'is_primary' => $formData['vendor_address'][1]['checkbox_primary']);

    $oVendor->mailing_address = array(
        'street' => $formData['vendor_mail'][1]['vendor_street'],
        'city' => $formData['vendor_mail'][1]['vendor_city'],
        'state' => $formData['vendor_mail'][1]['vendor_state'],
        'zip' => $formData['vendor_mail'][1]['vendor_zip'],
        'is_primary' => $formData['vendor_mail'][1]['checkbox_primary']);

        $emails = array();
    $i = 1;
    foreach($formData['vendor_emails'] as $email)
        $emails[$i++] = $email['vendor_email'];

    $oVendor->emails = $emails; 
```

# jquery - jQuery Mobile：我可以“取消初始化”页面吗？

> ID：15395857
> 
> 赞同：2
> 
> 时间：2013-03-13T20:30:25.927
> 
> 标签：jquery, testing, jquery-mobile

有没有办法“取消初始化”已经被 jQuery Mobile 初始化的页面？我在单个页面上运行整个测试套件，并希望在每次测试后清理 JQM。目前是这样设置的：

```
before(function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.changePage.defaults.changeHash = false;
    $.mobile.autoInitializePage = false;
    $.mobile.defaultPageTransition = 'slide';

    this.$el = $('<div></div>');
    $(document.body).append(this.$el);
});

after(function () {
    this.$el.remove();
});

afterEach(function () {
    this.$el.empty();
});

it('some test', function () {
    var page = $('<div data-role="page">...</div>')
    this.$el.append(page);

    // Each test will perform calls like these at some point
    $.mobile.initializePage();
    $.mobile.changePage(page, {
        allowSamePageTransition: true,
        pageContainer: this.$el,
        transition: 'none'
    });

    assert_whatever();
}); 
```

第一个测试运行良好，但是当第二个测试运行时出现错误：

```
cannot call methods on loader prior to initialization; attempted to call method 'show' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:42:19.927

好像设置：

```
$.mobile.activePage = undefined;
$.mobile.loaderWidget = undefined; 
```

在每次测试之前都可以解决问题。

# linux - 无法让 kafka 示例生产者/消费者运行

> ID：15395859
> 
> 赞同：0
> 
> 时间：2013-03-13T20:30:33.517
> 
> 标签：linux, apache-kafka

我终于设法在 CentOS 机器上设置了 zookeeper 和 kafka 0.7.2 并尝试运行 console-producer.sh 示例。

```
 [root@syslogtest bin]# bash kafka-console-producer.sh
   Error: could not find or load main class kafka.producer.ConsoleProducer 
```

除了[http://kafka.apache.org/quickstart.html](http://kafka.apache.org/quickstart.html)指南之外，还有其他人可以建议学习 kafka 的链接。只是设置我不得不找到这个网站以外的其他资源，结果令人沮丧。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:59:05.377

由于您开始学习 Kafka，您可能需要考虑学习 0.8 版，因为有几个重要的更新，例如复制。( [https://cwiki.apache.org/confluence/display/KAFKA/Changes+in+Kafka+0.8](https://cwiki.apache.org/confluence/display/KAFKA/Changes+in+Kafka+0.8) )

您可以查看[https://cwiki.apache.org/confluence/display/KAFKA/Index](https://cwiki.apache.org/confluence/display/KAFKA/Index)以获取有关设置消费者和生产者的具体示例。

[最后，在http://grokbase.com/g/kafka/](http://grokbase.com/g/kafka/)上有一个活跃的 Kafka 社区

# jquery - 我有一个简单的 JQuery 弹出窗口 - 在 Chrome 和 Firefox 上运行良好，但在 IE9 上没有显示

> ID：15395866
> 
> 赞同：1
> 
> 时间：2013-03-13T20:31:02.617
> 
> 标签：jquery

我只是一个初学者，我希望有人能立即明白为什么 IE9 对我的 Jquery 弹出窗口没有任何作用（Chrome 和 Firefox 工作正常）......调用弹出窗口的 html 位......

```
<!-- HIDDEN / POP-UP DIV -->
  <div id="pop-up">
      <div id="leave_popup">
           here is my popup content (the css for #pop-up sets the div
           display to 'none')........
      </div>
  </div> 
```

这是我的 Jquery 弹出窗口...

```
 $(document).ready(function(){
     $("#req_13").hover(function(e) {$("#pop-up").show();
 });
 $("#req_13").mousemove(function(e) {
     var moveLeft = 20;
     var moveDown = 10;
     $("#pop-up").css('top',+(e.pageY) + moveDown).css('left',+ (e.pageX) + moveLeft);
 });
 $("#leave_popup").mouseleave(function(){
     $("#pop-up").hide();
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:37:31.307

IE 会在最轻微的代码缺陷处中断。您的方法中有额外的`+`符号`.css`。尝试这个：

```
 $(document).ready(function(){
 $("#req_13").hover(function(e) {
      $("#pop-up").show();
 });

$("#req_13").mousemove(function(e) {
   var moveLeft = 20;
   var moveDown = 10;
  $("#pop-up").css('top',e.pageY + moveDown).css('left',e.pageX + moveLeft);
 });

$("#leave_popup").mouseleave(function(){
   $("#pop-up").hide();
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:37:34.320

我认为这与您对 pageY 和 pageX 的使用有关。

在怪癖模式下我的头顶上有一个脚本，类似于：

```
if (e.pageX || e.pageY) {
    posx = e.pageX;
    posy = e.pageY;
} else if (e.clientX || e.clientY) {
    posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
    posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
} 
```

希望有帮助。

**更新：**

```
$(document).ready(function() {
    $("#req_13").hover(function(e) {
        $("#pop-up").show();
    });

    $("#req_13").mousemove(function(e) {
        var moveLeft = 20;
        var moveDown = 10;
        if (e.pageX || e.pageY) {
            posX = e.pageX;
            posY = e.pageY;
        } else if (e.clientX || e.clientY) {
            posX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
            posY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
        }
        var newLeft = posX + moveLeft;
        var newTop = posY + moveDown;
        $("#pop-up").css({'left': newLeft, 'top': newTop});
    });

    $("#leave_popup").mouseleave(function() {
        $("#pop-up").hide();
    });
}); 
```

这是一个可以工作的jsfiddle：http: [//jsfiddle.net/wBaHe/5/](http://jsfiddle.net/wBaHe/5/)

# csv - 在 Jmeter 的同一线程中读取更新的 CSV

> ID：15395867
> 
> 赞同：0
> 
> 时间：2013-03-13T20:31:04.413
> 
> 标签：csv, jmeter

所以我在 Jmeter 中有一个测试计划，它从 CSV 读取 Auth 令牌并执行 POST 请求。
但如果它失败了，我会运行一个脚本，用新的 Auth 令牌更新 CSV。

问题是我在一个线程中做了 4 个不同的 POST。因此，当其中一个失败时，我运行脚本并希望同一线程中的另一个 POST 读取更新的 CSV。

但是在 Jmeter 中，一旦它读取 CSV 文件，它就会对整个线程使用相同的值。
我看到了所有线程、当前线程组和当前线程的选项。
但不想在当前线程中共享它。我想为当前线程中的每个 POST 读取 CSV。

* * *

从下面的评论更新。

我当前的测试计划如下所示：

```
HTTP POST --Read Auth Key From auth.csv
IF Controller (if last Sample Not Ok)
    -- Run the Script Update the auth.csv
HTTP POST --Read from auth.csv
IF Controller(if last Sample Not Ok)
    -- Run the Script Update the auth.csv 
```

问题是第二个 POST 请求使用 CSV 中的旧值，而不是新更新的 csv。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-06T17:25:15.180

为此，您可以在事务控制器“内部”使用每个 HTTP POST 和 CSV 数据集配置。

您的测试计划可能是这样的：

```
Transaction Controller
    CSV Data Set Config
    HTTP POST 

IF Controller (if last Sample Not Ok)
    -- Run the Script Update the auth.csv

Transaction Controller
    CSV Data Set Config
    HTTP POST 

IF Controller (if last Sample Not Ok)
    -- Run the Script Update the auth.csv 

```

# javascript - 从淘汰赛应用绑定中排除 DOM 元素？

> ID：15395872
> 
> 赞同：7
> 
> 时间：2013-03-13T20:31:20.567
> 
> 标签：javascript, asp.net-mvc, dom, asp.net-mvc-4, knockout.js

我想将我的淘汰视图模型定位到 dom 的某些部分，如下所示：

```
ko.applyBindings(MyViewModel,$('#Target')[0]); 
```

但是我不希望它适用于它下面的所有 dom。这样做的原因是整个 SPA 的东西运行得不是很好 - 无法跟上将每个潜在交互包含到一个巨大对象中的巨型视图模型。因此，页面由多个局部视图组成。我希望每个部分都实例化自己的 ViewModel 并为父级交互提供接口。

一些示例 dom

```
<div id="Target">
     <!--Everything here should be included except-->
     <div data-bind="DoNotBindBelowThis:true">
          <!--Everything here should NOT be included by the first binding, 
              I will specifically fill in the binding with targetted
              ApplyBind eg. ko.applyBindings(MyOtherViewModel, $('#MyOtherTarget')[0])
              to fill the gaps-->
            <div id="MyOtherTarget">
            </div>
     </div>
</div> 
```

`DoNotBindBelowThis`再次，我怎样才能排除标有from的 div 下面的整个 dom 树`applyBindings`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T20:37:30.297

看看这里的博客文章：[http ://www.knockmeout.net/2012/05/quick-tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

基本上，您可以创建自定义绑定，例如：

```
ko.bindingHandlers.DoNotBindBelowThis = {
    init: function() {
        return { controlsDescendantBindings: true };
    }
}; 
```

# actionscript-3 - AS3 预加载器代码没有进展

> ID：15395873
> 
> 赞同：0
> 
> 时间：2013-03-13T20:31:24.723
> 
> 标签：actionscript-3, flash, preloader

在我的 FLV 文件的第一帧中，我有这个预加载器代码：

```
//Stop Frame
stop();

//Create a listener to call the loading function as the movie loads
this.loaderInfo.addEventListener (ProgressEvent.PROGRESS, loading);

//Runs when the loading progress has changed
    function loading(event:ProgressEvent):void
    {

    //Determine the percent loaded from bytesLoaded and bytesTotal
    var percent:Number = event.bytesLoaded / event.bytesTotal * 100;

    //Display the percentage of the pre-loaded MovieClip
    percentage_text.text = int(percent)+"%";

        if(percent == 100){
            gotoAndStop(2);
        }
    } 
```

当我尝试通过绝对路径从 Xampp 服务器运行 SWF 文件时，`"http://localhost/test/mainFLV.swf"`SWF 不会超过 0%。但是，当我将 SWF 嵌入 PHP 脚本并加载该 PHP 脚本时，SWF 会加载，但它不会显示预加载器正在进行。

有什么帮助吗？

编辑

刚刚在 Firefox 中对其进行了测试，在进入第二帧之前，我得到了预加载器的 62% 的闪光。然而，原来的问题在 Chrome 中仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:52:21.357

当您在本地主机上测试它时，该`PROGRESS`事件经常触发，过于频繁，因此有时它不会被检测到。如果文件也已被浏览器缓存，则会发生这种情况。

您应该监听事件`COMPLETE`以确定文件是否已加载。

*编辑*

您可以将文件上传到慢速服务器；-) 或者，出于测试目的，使用网络速度限制软件。

但老实说，如果预加载器在正常情况下（平均速度连接）过快，则意味着不需要它。用户可以等待一两秒钟......您可以使用“旋转的东西”来代替。

# ios - Link buttons in a cell to the proper view (proper tag) when sorted alphabetically

> ID：15395880
> 
> 赞同：0
> 
> 时间：2013-03-13T20:32:10.980
> 
> 标签：ios, objective-c, cocoa-touch

I have a table view that displays list of clients (logo of a client + name etc) and at the same time I created 4 buttons that link to specific information about each client (such as overview and such).

Everything works properly when clicking on these buttons and I am taken to the proper corresponding `viewui` info.

Now the problem is when I sort everything alphabetically. Everything gets sorted properly (company names and such) except the buttons still link to the previous `indexPath.row` order... So when I click on client one in the alpha list I see the information of the first client which is correct,., now if I click on the first client under the letter B... I see the information of first client in list A... so the indexpath of the buttons is not sorted at all....

Here is my code:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

NSIndexPath *offsetPath = [self modelRowIndexForIndexPath:indexPath];
        //NSLog(@"Requested: %@  --  Off: %@",indexPath,offsetPath);

    RMCustomClientCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ClientCell"];

    RMClients *client;

    if(!self.alphaMode){

        client = [self.clients objectAtIndex:indexPath.row];

    } else {

        NSString *key = [self.alphaKeys objectAtIndex:offsetPath.section];
        NSArray *specificClients = [self.sortedClients objectForKey:key];
        client = [specificClients objectAtIndex:offsetPath.row];

    }

cell.extraDetailsButton.tag = indexPath.row;
cell.overviewDetailsButton.tag = indexPath.row;
cell.listDetailsButton.tag = indexPath.row;
cell.eventsDetailsButton.tag = indexPath.row;

    cell.nameLabel.text = client.name;

    return cell;

} 
```

Now how do I correct this `cell.extraDetailsButton.tag = indexPath.row;` (the indexPath.row) should be replaced by something else, right?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:58:30.443

对每个进行偏移等`cellForRowAtIndexPath`都是低效的并且容易出错（正如您所发现的那样）。相反，当您更改 tableview 上的排序方法时，请更改 self.clients 的排序，*以便您的索引始终与您的 tables 匹配*。如果你这样做，你可以简化你的按钮逻辑，如下所示：

为您的按钮定义 4 个标签。

```
#define BUTTON0_TAG 100
#define BUTTON1_TAG 101
#define BUTTON2_TAG 102
#define BUTTON3_TAG 103 
```

将您的按钮绑定到此方法：

```
- (void)buttonAction:(UIButton *)sender {
    UITableViewCell *cell = (UITableViewCell *)button.superview.superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

    switch (sender.tag) {
       case BUTTON0_TAG:
          [self detailsForClientAtIndexPath:indexPath];
          break;
       case BUTTON1_TAG:
          [self overviewForClientAtIndexPath:indexPath];
          break;
       case BUTTON2_TAG:
          [self listForClientAtIndexPath:indexPath];
          break;
       case BUTTON3_TAG:
          [self eventsForClientAtIndexPath:indexPath];
          break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:43:53.393

Shouldn't it be set to `offsetPath.row` instead? Isn't that the index you're referring to in order to get the `client` object?

# android - Close an app from another app

> ID：15395881
> 
> 赞同：1
> 
> 时间：2013-03-13T20:32:26.067
> 
> 标签：android

I have application A and application B.

I launch B with an intent from A in this way:

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.applicationB", "com.applicationB.MainActivity");
intent.putExtra(EXTRA_NAME,"name");
startActivity(intent); 
```

When the user closes application A I want application B to close too. App B has JNI and uses `exec()` command.

I've tried [`android:sharedUserId`](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid) but I got this error when app A tries to launch B with the code above:

```
Error running exec(). Command: [....] Working Directory: null Environment: (not null, it shows all the environment. 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:43:08.417

你必须使用android IPC机制，比如广播接收器

当应用程序 A 关闭时，它应该发送一个广播，并且应用程序 B 应该注册一个广播接收器以捕获来自应用程序 A 的广播

有关更多信息，请参阅文档[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:46:44.023

如果这两个应用程序都是您自己编写的，您可以考虑`BroadcastReceiver`在应用程序 B 中添加一个，这会确保所有活动都关闭。在应用程序 A 关闭之前，调用该接收器并完成。

如果您不确定显示的是哪个活动，您可以使用 扩展 Activity 类`BroadcastReceiver`，以便所有活动都得到通知。

如果应用 B 不是您编写的，您可以使用`killbackgroundProcesses()`，例如

```
ActivityManager activityManager = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
activityManager.killBackgroundProcesses(myProcessId); 
```

...但是，这仅在应用 B 实际上在后台时才有效。此外，这不是关闭应用程序的最佳选择，因为您不知道应用程序当前在做什么。

**编辑**：在该主题上找到了我最喜欢的示例 :-) 检查[http://www.hrupin.com/2011/10/how-to-finish-all-activities-in-your-android-application-through-simple-call](http://www.hrupin.com/2011/10/how-to-finish-all-activities-in-your-android-application-through-simple-call) - 它显示了如何从应用程序内关闭所有活动。然而，从另一个人做这件事并不是一个很大的进步......

# sql-server - 每天每行代码的移动平均线

> ID：15395883
> 
> 赞同：4
> 
> 时间：2013-03-13T20:32:33.737
> 
> 标签：sql-server, sql-server-2012, moving-average

我正在尝试计算股票的 3 天移动平均线（实际上是 30 天）交易量。我正在尝试获取最后 3 个日期条目的平均值（而不是今天 - 3 天）。我一直在尝试对 SQL Server 2012 中的 rownumber 做一些事情，但没有成功。任何人都可以帮忙。下面是一个模板模式，以及我对 SQL 的垃圾尝试。我与 group by 有以下 SQL 的各种化身，但仍然无法正常工作。非常感谢！

```
select dt_eod, ticker, volume
from
(
  select  dt_eod, ticker, avg(volume)
    row_number() over(partition by dt_eod order by max_close desc) rn
  from mytable
) src
where rn >= 1 and rn <= 3
order by dt_eod 
```

**示例架构：**

```
CREATE TABLE yourtable  
    ([dt_date] int, [ticker] varchar(1), [volume] int);

INSERT INTO yourtable  
    ([dt_date], [ticker], [volume])
VALUES  
    (20121201, 'A', 5),  
    (20121201, 'B', 7),  
    (20121201, 'C', 6),  
    (20121202, 'A', 10),  
    (20121202, 'B', 8),    
    (20121202, 'C', 7),  
    (20121203, 'A', 10),    
    (20121203, 'B', 87),    
    (20121203, 'C', 74),  
    (20121204, 'A', 10),    
    (20121204, 'B', 86),  
    (20121204, 'C', 67),  
    (20121205, 'A', 100),  
    (20121205, 'B', 84),  
    (20121205, 'C', 70),    
    (20121206, 'A', 258),  
    (20121206, 'B', 864),  
    (20121206, 'C', 740); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:18:46.980

每行的三天平均值：

```
with top3Values as
(
  select t.ticker, t.dt_date, top3.volume
  from yourtable t
    outer apply
    (
      select top 3 top3.volume
      from yourtable top3
      where t.ticker = top3.ticker
        and t.dt_date >= top3.dt_date
      order by top3.dt_date desc
    ) top3
)
select ticker, dt_date, ThreeDayVolume = avg(volume)
from top3Values
group by ticker, dt_date
order by ticker, dt_date 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!6/ed008/25)。

最新值：

```
with tickers as
(
  select distinct ticker from yourtable
), top3Values as
(
  select t.ticker, top3.volume
  from tickers t
    outer apply
    (
      select top 3 top3.volume
      from yourtable top3
      where t.ticker = top3.ticker
      order by dt_date desc
    ) top3
)
select ticker, ThreeDayVolume = avg(volume)
from top3Values
group by ticker
order by ticker 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!6/ed008/21)。

实际上，您不需要为第二个查询创建代码 CTE，因为您将基于一个`[ticker]`表，并且您可能在查询中有某种`date`参数，但希望这会让您正确追踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:16:13.867

您提到了 SQL 2012，这意味着您可以利用更简单的范例。

```
select dt_date, ticker, avg(1.0*volume) over (
    partition by ticker
    order by dt_date
    ROWS BETWEEN 2 preceding and current row
)
from yourtable 
```

我发现这对于实际想要完成的事情更加透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T19:42:43.427

您可能希望查看此处介绍的另一种技术：[SQL-Server Moving Averages set-based algorithm with flexible window-periods and no self-joins](http://www.intersoftdevelopment.com/IDI-ASPNET/Free-Source-Code.aspx?CodeID=29&Code=SQL%20Server%20Set-Based%20Moving%20Averages%20without%20Cursors%201)。

该算法非常快速（比 APPLY 快得多，并且不会像 APPLY 那样随着数据点窗口的扩展而降低性能），很容易适应您的要求，适用于 SQL2012 之前的版本，并克服了 SQL-2012 窗口功能的限制这需要在 OVER/PARTITION-BY 子句中对窗口宽度进行硬编码。

对于具有移动价格平均值的股票市场类型应用程序，允许用户**改变**平均值中包含的数据点的数量是一个常见要求（来自 UI 选择，例如允许用户选择 7 天、30 天）天、60 天等），而 SQL-2012 的 OVER 子句在没有动态 SQL 的情况下无法处理这种可变分区宽度要求。

# java - Java Memory Storage to Reduce Database Load - Safe?

> ID：15395884
> 
> 赞同：0
> 
> 时间：2013-03-13T20:32:39.577
> 
> 标签：java, mysql

If I have a MySQL table that is not changed very often (once a month) which contains information such as active user accounts for a web service. How safe is it to do something like:

```
public AccountDao
{
   List<Account> accounts;
   /*fields*/
   public AccountDao()
   {
       refreshAccounts();
   }

   public void refreshAccounts()
   {
      this.accounts = /*call to database to get list of accounts*/
   }

   public boolean isActiveAccount(String accountId)
   {
       //logic involving in memory list object above
   }
} 
```

I would do this because I have to check a user has an active account for every request to allow access to the web service. This would allow me to avoid one SQL call to the database layer (which is stressed at the moment) on every request. My question is how safe is it to store data like this in production?

By the way, I would refresh the account list whenever a new user account is added via an API call. As stated above, this would happen about once to twice a month.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:57:20.853

1.  需要以某种方式同步对 DAO（以及可能的调用者）中共享状态的访问，以实现线程安全。
2.  陈旧的数据可能会导致错误的访问决策。由于这可能与安全相关，因此您的代码需要是防弹的；特别是，它需要在发生故障时可靠地工作。这使得任何基于通知的方案都不稳定——如果通知丢失了怎么办？
3.  内存中凭证的寿命延长。仍然可以通过散列凭据来实现机密性（坦率地说，如果有人可以读取您的应用程序的内存，那么您还有很多其他问题）。操纵内存中的密码需要攻击者能够访问堆内存，如果他能做到，那么你无论如何都已经输了，因为他可以很容易地更改用于读取帐户的数据库连接。

也就是说，对于高流量的 web 服务，缓存凭证听起来是一个明智的想法，但它并非完全微不足道。

编辑：不，Web 容器不同步线程。并发请求将由并发线程提供服务，如果这些线程碰巧读取和写入相同的数据，则可能导致数据竞争。例如，一个线程可能会在使用新信息更新帐户列表时读取它，因此会看到一个不完整的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:36:10.543

如果您有某种触发器来在相应的数据库表更改时更新内存中的对象，那么它应该是安全的。

如果没有触发器，它就会成为正确性问题，并且可能是策略问题。如果基础架构的不同部分具有不同的数据库内存版本，会发生什么情况？例如添加或删除用户与您的服务反映更改之间的间隔是可接受的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:36:30.823

看看[缓存](http://en.wikipedia.org/wiki/Database_caching)。您的库可能已经支持它，如果不是 memcached 是一个不错的选择。

# c# - MS Access Update with addition

> ID：15395887
> 
> 赞同：1
> 
> 时间：2013-03-13T20:32:52.067
> 
> 标签：c#, winforms, ms-access, updates, addition

I'm working with MS Access and would like to how to update the data correctly..here is the code i use on my button click event with no luck

```
OleDbCommand cmd = new OleDbCommand("SELECT * FROM ItemTemp WHERE ITEM='" + txtItemname.Text + "'", GetConnection());
OleDbDataReader reader = cmd.ExecuteReader();

//check if this item exist on the table ItemTemp
if (reader.HasRows == true)
{
    // item exists, do below action
    OleDbCommand cmde = new OleDbCommand("UPDATE ItemTemp SET QUANTITY=QUANTITY + @QUANTITY, PRICE=PRICE + @PRICE WHERE ITEM='" + txtItemname.Text + "'", GetConnection());
    cmde.Parameters.AddWithValue("@QUANTITY", txtItemquantity.Value); //numericupdown control
    cmde.Parameters.AddWithValue("@PRICE", txtItemprice.Text); //textbox control
    cmde.ExecuteNonQuery();
} 
```

data on database BEFORE updating:

```
ID    |    ITEM    |    QUANTITY    |    PRICE
1     |    ITEM1   |        1       |    400 
```

data on database AFTER updating:

```
ID    |    ITEM    |    QUANTITY    |    PRICE
1     |    ITEM1   |       11       |    400400 
```

data on database which i want it to be AFTER updating:

```
ID    |    ITEM    |    QUANTITY    |    PRICE
1     |    ITEM1   |        2       |    800 
```

i do believe my command is correct if not my bad..there's no other than this code on my button click event. any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:47:41.450

好的，现在似乎完成了。我只是改变

```
cmde.Parameters.AddWithValue("@QUANTITY", txtItemquantity.Value); //numericupdown control
cmde.Parameters.AddWithValue("@PRICE", txtItemprice.Text); //textbox control 
```

对此

```
cmde.Parameters.AddWithValue("@QUANTITY", Convert.ToInt32(txtItemquantity.Value));
cmde.Parameters.AddWithValue("@PRICE", Convert.ToInt32(txtItemprice.Text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:50:50.563

首先，您应该确保数据库字段 Quantity 和 Price 是数字类型。如果它们是文本，那么您的查询会将作为参数传递的字符串值与数据库列中存在的字符串连接起来。

其次，当您使用 AddWithValue 传递参数时，框架会为您推断数据类型以查看传递值的数据类型。在您的情况下，您传递一个字符串，并且数据库引擎会看到一个将连接到现有值的字符串。您需要在传递到适当的数据类型之前进行转换

最后，对传递给数据库引擎的每一件事都使用 allways 参数化查询，特别是如果传递的值来自输入文本框。

```
 OleDbCommand cmd = new OleDbCommand("SELECT * FROM ItemTemp WHERE ITEM=@item", GetConnection());
 cmd.Parameters.AddWithValue("@item", txtItemName.Text);
 OleDbDataReader reader = cmd.ExecuteReader();

 //check if this item exist on the table ItemTemp
 if (reader.HasRows == true)
 {
     OleDbCommand cmde = new OleDbCommand("UPDATE ItemTemp SET QUANTITY=QUANTITY + @QUANTITY," + 
     "PRICE=PRICE + @PRICE WHERE ITEM=@item, GetConnection());
     cmde.Parameters.AddWithValue("@QUANTITY", Convert.ToInt32(txtItemquantity.Value)); 
     cmde.Parameters.AddWithValue("@PRICE", Convert.ToDecimal(txtItemprice.Text)); 
     cmde.Parameters.AddWithValue("@item", txtItemName.Text);
     cmde.ExecuteNonQuery();
 } 
```

# xslt - xslt Format data in a table some columns are blank

> ID：15395889
> 
> 赞同：0
> 
> 时间：2013-03-13T20:33:06.860
> 
> 标签：xslt, formatting, sum, grouping

With XSLT 1.0, how can I change the following:

```
<root>
  <element id="1" Team="Rangers" Season="2011" Points="12" />
  <element id="2" Team="Rangers" Season="2012" Points="5" />
  <element id="3" Team="Rangers" Season="2013" Points="3" />
  <element id="4" Team="Astros" Season="2011" Points="12" />
  <element id="5" Team="Astros" Season="2013" Points="2" />
</root> 
```

Into:

```
<table>
    <tr><td>Team</td>
    <td>2011</td>
    <td>2012</td>
    <td>2013</td>
    <td>Total</td></tr>

    <tr><td>Rangers</td>
    <td>12</td>
    <td>5</td>
    <td>3</td>
    <td>20</td></tr>

    <tr><td>Astros</td>
    <td>12</td>
    <td>0</td>
    <td>2</td>
    <td>14</td></tr>
</table> 
```

The heading can be generated manually as it is static, but I am unsure how to handle null data. Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:12:24.547

```
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="T" match="element" use="@Team"/>
<xsl:key name="S" match="element" use="@Season"/>

<xsl:template match="root">
 <xsl:variable name="years"  select="element[generate-id()=generate-id(key('S',@Season)[1])]"/>
 <table>
  <tbody>
   <tr>
    <td>Team</td>
    <xsl:for-each select="$years">
     <xsl:sort select="@Season"/>
     <td><xsl:value-of select="@Season"/></td>
    </xsl:for-each>
    <td>Total</td>
   </tr>

   <xsl:for-each select="element[generate-id()=generate-id(key('T',@Team)[1])]">
    <tr>
     <xsl:variable name="thisteam" select="key('T',@Team)"/>
     <xsl:for-each select="$years">
      <xsl:sort select="@Season"/>
      <td>
       <xsl:choose>
    <xsl:when test="$thisteam[@Season=current()/@Season]">
     <xsl:value-of select="$thisteam[@Season=current()/@Season]/@Points"/>
    </xsl:when>
    <xsl:otherwise>
     <xsl:value-of select="0"/>
    </xsl:otherwise>
       </xsl:choose>
      </td>
     </xsl:for-each>
     <td><xsl:value-of select="sum($thisteam/@Points)"/></td>
    </tr>
   </xsl:for-each>
  </tbody>
 </table>
</xsl:template>

</xsl:stylesheet> 
```

生产

```
 <?xml version="1.0" encoding="utf-8"?>
<table>
   <tbody>
      <tr>
         <td>Team</td>
         <td>2011</td>
         <td>2012</td>
         <td>2013</td>
         <td>Total</td>
      </tr>
      <tr>
         <td>12</td>
         <td>5</td>
         <td>3</td>
         <td>20</td>
      </tr>
      <tr>
         <td>12</td>
         <td>0</td>
         <td>2</td>
         <td>14</td>
      </tr>
   </tbody>
</table> 
```

# report - Making default value in Pentaho Report Designer

> ID：15395892
> 
> 赞同：0
> 
> 时间：2013-03-13T20:33:12.960
> 
> 标签：report, pentaho, pentaho-report-designer

I have created a report out of Pentaho Report Designer. I uploaded the report on Pentaho User Console.

I have several dropdowns e.g. Order ID, Line Item ID, Date.

Once I select Order ID, Line Item ID is filtered and is displayed.

I created a 'All Line Item' value that displays all line item.

I want to make it as a default value.

How to have a default value in Report Designer? The drop downs are added using 'add parameter'. What settings do I need to have in Parameter of 'Line Item ID' to make 'All Line Item' as default value?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:09:59.447

编辑您的参数，设置默认值或默认值公式![在此处输入图像描述](../Images/5ff1bc3afccca73136dac7acff0caade.png)

# ruby - Having more than one method in a sidekiq worker class

> ID：15395895
> 
> 赞同：3
> 
> 时间：2013-03-13T20:33:29.900
> 
> 标签：ruby, ruby-on-rails-3, sidekiq

I have a sidekiq worker class. I currently implemented it this way. It works when I call PROCESS, and it will queue the method called PERFORM. But i would like to have more than one method that I can queue.

As a side note, is there a difference doing this and simply doing SocialSharer.delay.perform?

```
# I trigger by using SocialSharer.process("xxx")

class SocialSharer

  include Sidekiq::Worker

  def perform(user_id)
    # does things
  end

  def perform_other_things
    #i do not know how to trigger this
  end

  class << self
    def process(user_id)
      Sidekiq::Client.enqueue(SocialSharer,user_id)
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:56:11.297

SocialSharer.delay.perform 会延迟一个名为 perform 的类方法。您的 perform 方法是一个实例方法。

工人被设计为每个工作一个班级。作业通过 perform 方法启动。您可以使用延迟在一个类上启动任意数量的不同类方法，如下所示：

```
class Foo
  def self.a(count)
  end
  def self.b(name)
  end
end
Foo.delay.a(10)
Foo.delay.b('bob') 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-13T21:08:43.167

好吧，如果您*真的*想在一个类中包含所有“可执行”方法，我建议您将`perform`方法重命名为不同的名称（例如，`perform_something`），并创建一个可以*调度*控制流的新`perform`方法：

 *```
class SocialSharer
  include Sidekiq::Worker

  # the 3 lines below may be replaced with `alias_method :perform, :public_send`
  def perform(method, *args)
    self.public_send(method, *args)
  end

  def perform_something(user_id)
    # does things
  end

  def perform_other_things
    # does other things
  end

  def self.process(user_id)
    Sidekiq::Client.enqueue(SocialSharer, :perform_something, user_id)
    Sidekiq::Client.enqueue(SocialSharer, :perform_other_things)
  end
end 
```*

# java - Java: Position JButtons in JFrame/JPanel

> ID：15395896
> 
> 赞同：1
> 
> 时间：2013-03-13T20:33:32.940
> 
> 标签：java, swing, jbutton, layout-manager, border-layout

Hi I made some buttons align nicely next to each other but now I want them at the bottom of my panel/frame.

How can I do this? I thought about setalignment but that doesn't seem to work.

Thanks in advance:

```
public class mainMenu extends JFrame {
private JButton start, highscore, help, stoppen;

public mainMenu() {
    super("Master Mind");
    maakComponenten();
    maakLayout();
    toonFrame();

}

private void maakComponenten() {

    start = new JButton("Start") {
        {
            setSize(150, 30);
            setMaximumSize(getSize());
        }
    };
    highscore = new JButton("Highscore") {
        {
            setSize(150, 30);
            setMaximumSize(getSize());
        }
    };
    help = new JButton("Help") {
        {
            setSize(150, 30);
            setMaximumSize(getSize());
        }
    };
    stoppen = new JButton("Stoppen") {
        {
            setSize(150, 30);
            setMaximumSize(getSize());
        }
    };

}

private void maakLayout() {

    JPanel hoofdmenu = new JPanel();
    hoofdmenu.setLayout(new BoxLayout(hoofdmenu, BoxLayout.X_AXIS));
    hoofdmenu.add(start);
    hoofdmenu.add(highscore);
    hoofdmenu.add(help);
    hoofdmenu.add(stoppen);
    super.add(hoofdmenu);

}

private void toonFrame() {
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setVisible(true);
    setSize(500, 500);

}

public static void main(String[] args) {
    new mainMenu();
} 
```

}![enter image description here](../Images/27bb68cfc146c0d79e5094d585e5b275.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:36:55.017

一种常见的方法是使用 BorderLayout 的 LayoutManager 制作 JPanel。您可以将面板的所有内容（可能是子面板的集合）放在 BorderLayout.CENTER 中，并将仅包含按钮的面板放在 BorderLayout.SOUTH 中。

请参阅：[如何使用布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/layoutlist.html) 和[如何使用 BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

# php - PHP mandatory function call

> ID：15395897
> 
> 赞同：1
> 
> 时间：2013-03-13T20:33:36.050
> 
> 标签：php, oop, class, function, logic

I understand that one can use interfaces to mandate the definition of a function, but I cannot find something that enables one to mandate function calls, such that e.g. if I create a class being a member of another class (via extends, etc), with a function, for that class to automatically ensure that mandatory functions are called in part with that function.

I mean, to clarify further:

```
class domain {

   function isEmpty($input) {
      //apply conditional logic and results
   }
}
class test extends domain {

   function addTestToDBTable($test) {
      /** 
       *  try to add but this class automatically makes it so that all rules of
       *  class domain must be passed before it can run
       *  - so essentially, I am no longer required to call those tests for each and
       *    every method 
       **/  
   }
 } 
```

Apologies if this appears incoherent by any means. Sure, it seems lazy but I want to be able to force context without having to concern abou

Update:

Okay, to clarify further: in PHP, if I extend and declare a __construct() for a child class, that child class will override the parent __construct(). I do not want this, I want the parent construct to remain and mandate whatever as it pleases just as the child class may do so also.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:21:18.040

我会使用带有一些文档块元编程魔法的域验证装饰器。但这确实是整个图书馆的工作，这无疑是存在的。

[小提琴](http://ideone.com/U6YdTs)

```
<?php
class FooDomain {
    public static function is_not_empty($input) {
        return !empty($input);
    }
}

class Foo {
    /**
     * @domain FooDomain::is_not_empty my_string
     */
    public function print_string($my_string) {
        echo $my_string . PHP_EOL;
    }
}

$foo = new DomainValidator(new Foo());
$foo->print_string('Hello, world!');
try {
    $foo->print_string(''); // throws a DomainException
} catch (\DomainException $e) {
    echo 'Could not print an empty string...' . PHP_EOL;
}

// ---

class DomainValidator {
    const DOMAIN_TAG = '@domain';

    private $object;

    public function __construct($object) {
        $this->object = $object;
    }

    public function __call($function, $arguments) {
        if (!$this->verify_domain($function, $arguments)) {
            throw new \DomainException('Bad domain!');
        }

        return call_user_func_array(
            array($this->object, $function),
            $arguments
        );
    }

    public function __get($name) {
        return $this->object->name;
    }

    public function __set($name, $value) {
        $this->object->name = $value;
    }

    private function verify_domain($function, $arguments) {
        // Get reference to method
        $method = new \ReflectionMethod($this->object, $function);
        $domains = $this->get_domains($method->getDocComment());
        $arguments = $this->parse_arguments(
            $method->getParameters(),
            $arguments
        );
        foreach ($domains as $domain) {
            if (!call_user_func(
                $domain['name'],
                $arguments[$domain['parameter']]
            )) {
                return false;
            }
        }
        return true;
    }

    private function get_domains($doc_block) {
        $lines = explode("\n", $doc_block);
        $domains = array();
        $domain_tag = DomainValidator::DOMAIN_TAG . ' ';
        foreach ($lines as $line) {
            $has_domain = stristr($line, $domain_tag) !== false;
            if ($has_domain) {
                $domain_info = explode($domain_tag, $line);
                $domain_info = explode(' ', $domain_info[1]);
                $domains[] = array(
                    'name'      => $domain_info[0],
                    'parameter' => $domain_info[1],
                );
            }
        }
        return $domains;
    }

    private function parse_arguments($parameters, $values) {
        $ret = array();
        for ($i = 0, $size = sizeof($values); $i < $size; $i++) {
            $ret[$parameters[$i]->name] = $values[$i];
        }
        return $ret;
    }
} 
```

输出：

```
Hello, world!
Could not print an empty string... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:12:53.167

我想它可以通过两种不同的方式来完成。

**面向方面的编程**

看看这里[https://github.com/AOP-PHP/AOP](https://github.com/AOP-PHP/AOP)

**生成或编写代理类**

一个非常简单的例子可能是：

```
<?php
class A {
    public function callMe() {
        echo __METHOD__ . "\n";
    }
}

class B extends A {

    // prevents instantiation
    public function __construct() {
    }

    public function shouldCallMe() {
        echo __METHOD__ . "\n";
    }

    public static function newInstance() {
        return new ABProxy();
    }
}

class ABProxy {
    private $b;

    public function __construct() {
        $this->b = new B();
    }

    public function __call($method, $args) {
        $this->b->callMe();
        return call_user_func_array(array($this->b, $method), $args);
    }
}

// make the call
$b = B::newInstance();
$b->shouldCallMe();

// Outputs
// ------------------
// A::callMe
// B::shouldCallMe 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:13:56.380

听起来你想要一个**[Decorator](http://en.wikipedia.org/wiki/Decorator_pattern)**。

有关如何执行此操作的详细说明，请参阅**[此答案。](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)**请注意，它*不需要*类扩展。

# c++ - serialize is not a member of std::unique_ptr

> ID：15395898
> 
> 赞同：0
> 
> 时间：2013-03-13T20:33:39.653
> 
> 标签：c++, boost, c++11, unique-ptr, boost-serialization

Is this question more appropriate for Boost forums? The complete code is referenced below and I do not consider that I have incorrectly attempted to convert an auto_ptr serialization example into a unique_ptr example as compared to other unique_ptr examples on this site. Thus, why would I receive a compilation error deep within a Boost library? I have used Boost serialization on standard containers before with no problems and, although this is a custom adapter, if similar examples have compiled, why not this?

I referenced [http://www.boost.org/doc/libs/1_51_0/libs/serialization/example/demo_auto_ptr.cpp](http://www.boost.org/doc/libs/1_51_0/libs/serialization/example/demo_auto_ptr.cpp) in an attempt to serialize my binary tree using a custom adaptor. Below is a code dump representing an sscce.

```
// disables conversion from 'std::streamsize' to 'size_t', possible loss of data
#pragma warning(disable:4244)  

#ifndef BINARY_SEARCH_TREE_H_
#define BINARY_SEARCH_TREE_H_

#include<functional>

#include<memory>
#include<fstream>
#include<boost/archive/binary_oarchive.hpp>
#include<boost/archive/binary_iarchive.hpp>

#define BST_FILE_NAME "tree.dat"    // default filename used to save and load

namespace boost { 

    namespace serialization {

        template <class Archive, class T>
        inline void save
            (Archive &archive, 
            const std::unique_ptr<T> &subtree,  
            const unsigned int file_version)
        {
            // only the raw pointer has to be saved
            const T *const  subtree_x = subtree.get();

            archive << subtree_x;
        }

        template <class Archive, class T>
        inline void load
            (Archive &archive, 
            const std::unique_ptr<T> &subtree, 
            const unsigned int file_version)
        {

            T *p_subtree;

            archive >> p_subtree;

            #if BOOST_WORKAROUND(BOOST_DINKUMWARE_STDLIB, == 1)
                subtree.release();
                subtree = std::unique_ptr< T >(p_subtree);
            #else
                subtree.reset(p_subtree);
            #endif
        }

        template <class Archive, class T>
        inline void serialize
            (Archive &archive, 
            const std::unique_ptr<T> &subtree, 
            const unsigned int file_version)
        {
            boost::serialization::split_free(archive, subtree, file_version);
        }

    } // namespace serialization
} // namespace boost

template <class T = int>
class BinarySearchTree{

    class BinarySearchTreeNode{
    public:

        std::unique_ptr<BinarySearchTreeNode> node_factory(const T &new_key, const T    &new_index){
            return std::unique_ptr<BinarySearchTreeNode>(new    BinarySearchTreeNode(new_key, new_index)); }

        BinarySearchTreeNode(BinarySearchTreeNode &&other) : key(other.key), index(other.index), left(std::move(other.left)), 
            right(std::move(other.right)) {key = index = left = right = nullptr; }

        BinarySearchTreeNode &operator=(BinarySearchTreeNode &&rhs) { if(this != rhs) { key = rhs.key; index = rhs.index; 
            left = std::move(rhs.left); right = std::move(rhs.right); 
            rhs.key = rhs.index = rhs.left = rhs.right = nullptr;} return *this;}

        ~BinarySearchTreeNode() {}  // Note to self; don't hide the destructor

        friend class BinarySearchTree;

    private:

        friend class boost::serialization::access;
        template<class Archive>
        void serialize(Archive &archive, const unsigned int /* file_version */){
            archive & key;
            archive & index;
            archive & left;
            archive & right;
        }

        T key;
        long index;

        std::unique_ptr<BinarySearchTreeNode> left;
        std::unique_ptr<BinarySearchTreeNode> right;

        BinarySearchTreeNode() {}
        BinarySearchTreeNode(const T &new_key, const T &new_index) :key(new_key), index(new_index), 
                                    left(nullptr), right(nullptr) {}

    };

    std::unique_ptr<BinarySearchTreeNode> root;

    std::list<T> tree_keys;
    std::list<long> tree_indicies;

    friend class boost::serialization::access;
    template <class Archive>
    void serialize(Archive &archive, const unsigned int version){
        archive & root;
    }

    BinarySearchTree(const BinarySearchTree &other){}
    BinarySearchTree &operator=(const BinarySearchTree &rhs){}

    std::unique_ptr<BinarySearchTreeNode> insert(const T &new_key, const T &new_index, 
                std::unique_ptr<BinarySearchTreeNode> &tree){
        if(tree == nullptr){
            return root->node_factory(new_key, new_index);
        }else if(std::less<T> () (new_key, tree->key)){ // Left insertion
            tree->left = insert(new_key, new_index, tree->left);
            return std::move(tree);
        }else {   // Right insertion
            tree->right = insert(new_key, new_index, tree->right);
            return std::move(tree);
        }
    }

public:
    BinarySearchTree() : root(nullptr) {}
    BinarySearchTree(BinarySearchTree &&other) : root(std::move(other.root)) { other.root = nullptr; }
    BinarySearchTree &operator=(BinarySearchTree &&rhs) { if(this != rhs) { root = std::move(rhs.root); 
        rhs.root = nullptr} return *this; }
    bool insert_into_tree(const T &new_key, const T &new_index){
        if(new_key == NULL){
            return false;
        }
        root = std::move(insert(new_key, new_index, root));
        return true;
    }

    void save(const BinarySearchTree &tree)
    {
        // create and open a binary archive for output
        std::ofstream writer(BST_FILE_NAME, std::ofstream::out | std::ofstream::binary);

        if(writer){
            boost::archive::binary_oarchive serial_writer(writer);
            //set_flags(0, true);
            // write class instance to archive
            serial_writer << tree;
            // archive and stream closed when destructors are called

        }else if(writer.fail()){
            writer.clear();
        }
    }

    void load(BinarySearchTree &tree)
    {
        // create and open a binary archive for output
        std::ifstream reader(BST_FILE_NAME, std::ifstream::in | std::ifstream::binary);

        if(reader){
            boost::archive::binary_iarchive serial_reader(reader);
            // read class state from archive
            serial_reader >> tree;
            // archive and stream closed when destructors are called

        }else if(reader.fail()){
            reader.clear();
        }
    }
    ~BinarySearchTree() {}
};

#endif 
```

The code above compiles as does any usage of the tree member functions. Once choosing to call save, that is when the compiler error appears. Here is main:

```
#include<cstdlib>

#include "physical_view.h"

using namespace std;

int main(int argc, char *argv[]){

    BinarySearchTree<> tree;

    tree.insert_into_tree(10, 5);
    tree.insert_into_tree(5, 15);
    tree.insert_into_tree(15, 10); <--------- All is wonderful to here!

    tree.save(tree); <---------- Compiler unhappy here!

    return EXIT_SUCCESS;
} 
```

How about that compiler error:

```
Error   1   error C2039: 'serialize' : is not a member of 'std::unique_ptr<_Ty>'    c:\boost_12\include\boost-1_53_1\boost\serialization\access.hpp 118 
```

I thank you for helping me resolve this compiler error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:32:31.800

那是您的序列化和加载函数的签名不正确。`std::unique_ptr<T>`参数对于他们两个都必须是非常量的。由于它无法推断类型（由于 const），它只是忽略了重载并且根本找不到它。

# jquery - 如何将元素滑动在一起？

> ID：15395906
> 
> 赞同：0
> 
> 时间：2013-03-13T20:34:25.133
> 
> 标签：jquery, jquery-animate

[http://jsfiddle.net/7vwcz/](http://jsfiddle.net/7vwcz/)

所以我试图在工具栏中制作一系列图标，这里用彩色小方块表示。

前两个，Contrast 和 Contrast2，将有用于控制事物的弹出滑块。我只是想让图标平滑地移动到滑块的位置，然后平滑地回到原位。我现在将动画设置为低速，这样我们就可以看到发生了什么。如您所见，它们的移动不规律且不正确——您可以通过单击红色方块来查看动作。

我究竟做错了什么？

```
 $('#contrastSlider').slider();
 $('#contrastSlider').hide()
 $('#contrast').click(function () {

     var cs = $('#contrastSlider'),
         w = cs.outerWidth(true);
     if (!cs.is(':visible')) {
         $('#about').css('margin-left', -w + 40);
         $('#contrast2').css('margin-left', -w);
         w = 0;
     }

     cs.toggle("slide", 2000);

     $('#contrast2').animate({
       'margin-left': -w
       }, 2000, function() {
         this.style.marginLeft = 0;
     });

     $('#about').animate({
         'margin-left': -w + 40
       }, 2000, function() {
         this.style.marginLeft = 0;
     });

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:36:21.533

我将在这个答案中更多地解释我的评论。

html结构：

```
<ul>
    <li class="box">Menu</li> 
    <li class="slider">
    <li class="box">Menu</li> 
    <li class="slider">
    <li class="box">Menu</li> 
</ul> 
```

一个简单的列表，其中包含菜单框和滑块。流量是；用户单击一个框，然后框右侧的滑块将滑出，`200px`其余的将滑到`0px`。

JS：

```
$('.box').click(function() {
    // get the next li, it will be an slider because this is an .box li
    $slider = $(this).next();

    // animate all sliders to 0px width. so hiding all the sliders
    $('.slider').stop().animate({ width: '0px' }, 300);

    // do we have an slider? #about box doesn't 
    if($slider != null) {
        // the other sliders are still in the 'hiding' animation, but now we say to this slider to stop that animation and now to animate to 200px width 
        $slider.stop().animate({ width: '200px' }, 300);
    }
}); 
```

[JsFiddle 示例](http://jsfiddle.net/JzRsG/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:00:08.363

这让你接近。如您所见，您不必那么努力工作。:-)

[http://jsfiddle.net/7vwcz/10](http://jsfiddle.net/7vwcz/10)

```
var isOut = 0;

$('#contrast').click(function () {
    if (isOut == 0) {
        $('#contrastSlider').animate({width: 75, marginRight: '10px'}, 'slow');
        isOut = 1;
    } else {
        $('#contrastSlider').animate({width: 0, marginRight: '0'}, 'slow');
        isOut = 0;
    }
}); 
```

这是一个不依赖于 ID 并且每个框都有一个滑块的变体（更新为使用类而不是变量）：http: [//jsfiddle.net/7vwcz/14](http://jsfiddle.net/7vwcz/14)

```
$('.cube').click(function () {
    if ($(this).hasClass('out')) {
        $(this).removeClass('out').next('.flag').animate({width: 75, marginRight: '10px'}, 'slow');
    } else {
        $(this).addClass('out').next('.flag').animate({width: 0, marginRight: '0'}, 'slow');
    }
}); 
```

# ios - How to play just the audio of YouTube Video?

> ID：15395908
> 
> 赞同：1
> 
> 时间：2013-03-13T20:34:29.940
> 
> 标签：ios, ios6, youtube-api, gdata

In my app I have played a youtube video by embedding it, but how can i only play the audio of the video? I tried using AVAudioPlayer and use the videos url as the file path but it didnt work, any help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:43:27.227

不，这是不可能的，只有一种解决方法就是使用隐藏`UIWebView`并在其中播放。

Youtube 只禁止播放音频！这是来自 youtube 的消息

> 您的 API 客户端不会，您也不会鼓励或为您的用户或其他第三方创建功能：“分离、隔离或修改通过 YouTube API 提供的任何 YouTube 视听内容的音频或视频组件”-Kuan Yong , YouTube API 团队

# c# - how to invoke convertback of a control that has a converter assigned to it in wpf

> ID：15395913
> 
> 赞同：0
> 
> 时间：2013-03-13T20:35:08.843
> 
> 标签：c#, wpf, data-binding

how do i invoke convertback method on a control say textbox or button that has been assigned converter in the xaml markup. I need to get the binding value instead of the displayed value. the content property gives the displayed value but i need the original binding value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:38:54.940

您应该将[BindingMode](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode.aspx)设置为`TwoWay`. 这将调用您的 ConvertBack 方法。如果您需要实际的原始绑定值，那么我的猜测是创建自定义附加行为并在它的帮助下记住值。

# css - 应用 translate3d 时的 CSS3 easeOutBack 问题

> ID：15395915
> 
> 赞同：1
> 
> 时间：2013-03-13T20:35:15.173
> 
> 标签：css

如果我在选择器上默认设置 translate3d 属性，然后通过添加另一个类来更改 translate3d，则会导致bounceOutBack 三次缓动不起作用。它似乎只是默认为 easeIn

```
.content {
    width:200px;
    height:200px;
    background-color:red;
    -webkit-transition: -webkit-transform 500ms cubic-bezier(0.175, 0.885, 0.320, 1.275);
    /*adding the below will mess up my bounceOutBack set above*/
    -webkit-transform: translate3d(0px, 0px, 0px);
} 
```

如果你将这个类添加到下面的 .content 选择器中，并在easeOutback 上方设置了 translate3d 将不起作用。我没有看到任何其他自定义缓动类型的这个问题。很抱歉没有创造一个小提琴来看到这种情况发生。有谁知道为什么会这样？目前仅在 Chrome 中进行测试。谢谢你的帮助。

```
.content.animate {
    -webkit-transform: translate3d(300px, 0px, 0px);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T18:51:51.950

好吧，可能是某种 Chrome 错误。

现在它工作正常

```
.content {
    width:200px;
    height:200px;
    background-color:red;
    -webkit-transition: -webkit-transform 500ms cubic-bezier(0.175, 0.885, 0.320, 1.275);
    /*adding the below will mess up my bounceOutBack set above*/
    -webkit-transform: translate3d(0px, 0px, 0px);
}

body:hover .content {
    -webkit-transform: translate3d(300px, 0px, 0px);
} 
```

[小提琴](http://jsfiddle.net/gNY9L/1/)

# javascript - 滚动到时播放 HTML5 视频

> ID：15395920
> 
> 赞同：25
> 
> 时间：2013-03-13T20:35:24.367
> 
> 标签：javascript, jquery, html, video, html5-video

无论如何，只有当用户在浏览器视口中有视频（或视频的一定百分比）时，才会自动播放 HTML5 视频？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-10-22T13:03:57.510

# 简单来说

假设我们的浏览器窗口`W`当前滚动到 y 位置`scrollTop`并且`scrollBottom`

`V1`我们的视频在其位置处于或`V2`低于快照时将不会播放。

[![在此处输入图像描述](../Images/59a9145521447abbb59a989d15b50313.png)](https://i.stack.imgur.com/s3Obz.png)

# 代码详情

```
 $(document).ready(function() {
            // Get media - with autoplay disabled (audio or video)
            var media = $('video').not("[autoplay='autoplay']");
            var tolerancePixel = 40;

            function checkMedia(){
                // Get current browser top and bottom
                var scrollTop = $(window).scrollTop() + tolerancePixel;
                var scrollBottom = $(window).scrollTop() + $(window).height() - tolerancePixel;

                media.each(function(index, el) {
                    var yTopMedia = $(this).offset().top;
                    var yBottomMedia = $(this).height() + yTopMedia;

                    if(scrollTop < yBottomMedia && scrollBottom > yTopMedia){ //view explaination in `In brief` section above
                        $(this).get(0).play();
                    } else {
                        $(this).get(0).pause();
                    }
                });

                //}
            }
            $(document).on('scroll', checkMedia);
        }); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-03T08:25:33.613

希望这会有所帮助，但之前已经回答过了

[http://jsfiddle.net/jAsDJ/](http://jsfiddle.net/jAsDJ/)

```
var videos = document.getElementsByTagName("video"),
fraction = 0.8;
function checkScroll() {

    for(var i = 0; i < videos.length; i++) {

        var video = videos[i];

        var x = video.offsetLeft, y = video.offsetTop, w = video.offsetWidth, h = video.offsetHeight, r = x + w, //right
            b = y + h, //bottom
            visibleX, visibleY, visible;

            visibleX = Math.max(0, Math.min(w, window.pageXOffset + window.innerWidth - x, r - window.pageXOffset));
            visibleY = Math.max(0, Math.min(h, window.pageYOffset + window.innerHeight - y, b - window.pageYOffset));

            visible = visibleX * visibleY / (w * h);

            if (visible > fraction) {
                video.play();
            } else {
                video.pause();
            }

    }

}

window.addEventListener('scroll', checkScroll, false);
window.addEventListener('resize', checkScroll, false); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-13T21:35:27.530

您可以使用[window.pageXOffset](https://developer.mozilla.org/en-US/docs/DOM/window.scrollX)和[window.pageYOffset](https://developer.mozilla.org/en-US/docs/DOM/window.scrollY)来检查浏览器窗口垂直和水平滚动的距离。使用这些`window.innerWidth`和`innerHeight`一些基本的几何数学来计算可见页面与视频本身的重叠程度。将这一切都放在一个函数中，您可以将其附加到窗口对象上的`scroll`and`resize`事件，以便在每次滚动更改时运行检查。

这是一些示例代码：

```
var video = document.getElementById('video'),
    info = document.getElementById('info'),
    fraction = 0.8;

function checkScroll() {
  var x = video.offsetLeft,
      y = video.offsetTop,
      w = video.offsetWidth,
      h = video.offsetHeight,
      r = x + w, //right
      b = y + h, //bottom
      visibleX,
      visibleY,
      visible;

  if (window.pageXOffset >= r ||
      window.pageYOffset >= b ||
      window.pageXOffset + window.innerWidth < x ||
      window.pageYOffset + window.innerHeight < y
     ) {    

    info.innerHTML = '0%';
    return;
  }

  visibleX = Math.max(0, Math.min(w, window.pageXOffset + window.innerWidth - x, r - window.pageXOffset));
  visibleY = Math.max(0, Math.min(h, window.pageYOffset + window.innerHeight - y, b - window.pageYOffset));

  visible = visibleX * visibleY / (w * h);

  info.innerHTML = Math.round(visible * 100) + '%';

  if (visible > fraction) {
    video.play();
  } else {
    video.pause();
  }

}

window.addEventListener('scroll', checkScroll, false);
window.addEventListener('resize', checkScroll, false);

//one time at the beginning, in case it starts in view
checkScroll();

//as soon as we know the video dimensions
video.addEventListener('loadedmetadata', checkScroll, false); 
```

和一个[工作示例](http://jsbin.com/ocupor/1/edit)。

此代码假定一个非常简单的页面布局。如果您的视频绝对定位在另一个设置了“位置：相对”的元素内，那么您需要做更多的工作来计算视频的正确位置。（如果视频已使用 CSS 变换移动，情况也是如此。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-21T03:38:19.890

这个场景有一个新的 API，叫做[Intersection_Observer_API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)，Chrome 51+ 和 Edge 15+ 都支持。

```
var options = {
    root: document.querySelector('.scroll-container'),
    rootMargin: '0px',
    threshold: 1.0 // trigger only when element comes into view completely
};
var ob = new IntersectionObserver((entries, observer) => {
    entries[0].target.classList.toggle('red');
}, options);

// observe all targets, when coming into view, change color
document.querySelectorAll('.target').forEach((item) => {
    ob.observe(item);
}); 
```

这是一个简单的演示： [https ://codepen.io/hectorguo/pen/ybOKEJ](https://codepen.io/hectorguo/pen/ybOKEJ)

# amazon-ec2 - 声纳启动时没有错误，但我无法通过网络浏览器访问它

> ID：15395922
> 
> 赞同：4
> 
> 时间：2013-03-13T20:35:25.337
> 
> 标签：amazon-ec2, sonarqube

我已经使用“apt-get install sonar”在 Ubuntu 主机上安装了 Sonar。由于这只是 Sonar 的演示实例供我使用，因此我使用的是嵌入式 H2 数据库。

声纳似乎启动良好，而且我的 sonar.log 中没有任何错误或警告。然而，当我尝试通过我的网络浏览器点击它时，我得到了“糟糕！谷歌浏览器无法连接到...... blahblahblah”。

主机实际上是一个 EC2 实例 - 不确定这是否会有所不同。它具有 Amazon 分配的私有 IP、一个 URL（即 ec2-xx-xx...amazonaws.com）和一个虚 URL，因此我不必记住那个可怕的底层 URL。

现在，Sonar 的属性看起来像这样。（我故意在 IP 地址出现的任何地方用 X 删除它。）

```
sonar.web.host:                           10.xxx.xx.xxx
sonar.web.port:                           9000
sonar.web.context:                        /
...
sonar.jdbc.url:                            jdbc:h2:tcp://10.xxx.xx.xxx:9092/sonar
sonar.jdbc.driverClassName:                org.h2.Driver
sonar.embeddedDatabase.port:               9092 
```

我无法通过将浏览器指向 ${monstrous_URL}:9000 或 ${vanity URL}:9000 来访问它。我还尝试将 sonar.web.host 设置为 0.0.0.0 和 ${monstrous_URL} - 遗憾的是，两者都无济于事。

作为参考，这就是我的 sonar.log 的样子：

```
STATUS | wrapper  | 2013/03/13 20:21:42 | --> Wrapper Started as Daemon
STATUS | wrapper  | 2013/03/13 20:21:43 | Launching a JVM...
INFO   | jvm 1    | 2013/03/13 20:21:43 | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
INFO   | jvm 1    | 2013/03/13 20:21:43 |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.
INFO   | jvm 1    | 2013/03/13 20:21:43 |
INFO   | jvm 1    | 2013/03/13 20:21:43 | 2013-03-13 20:21:43.422:INFO::Logging to org.sonar.application.FilteredLogger@7dc6a657 via org.sonar.application.FilteredLogger
INFO   | jvm 1    | 2013/03/13 20:21:43 | 2013-03-13 20:21:43.484:INFO::jetty-6.1.25
INFO   | jvm 1    | 2013/03/13 20:21:43 | 2013-03-13 20:21:43.756:INFO::NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
2013.03.13 20:21:44 INFO  o.s.s.p.ServerImpl  Sonar Server / 3.4.1 / 2f6a7f38e57ec8e9a7bedc81b3260ae735d2a8c8
2013.03.13 20:21:45 INFO  o.s.s.d.EmbeddedDatabase  Starting embedded database on port 9092 with url jdbc:h2:tcp://10.xxx.xx.xxx:9092/sonar
2013.03.13 20:21:45 INFO  o.s.s.d.EmbeddedDatabase  Embedded database started. Data stored in: /opt/sonar/data
2013.03.13 20:21:45 WARN  o.s.c.p.DefaultDatabase  H2 database should be used for evaluation purpose only
2013.03.13 20:21:45 INFO  o.s.c.p.Database  Create JDBC datasource for jdbc:h2:tcp://10.xxx.xx.xxx:9092/sonar
2013.03.13 20:21:47 INFO  o.s.s.p.DefaultServerFileSystem  Sonar home: /opt/sonar
2013.03.13 20:21:47 INFO  o.s.s.p.DefaultServerFileSystem  Deploy dir: /opt/sonar/war/sonar-server/deploy
2013.03.13 20:21:47 INFO  org.sonar.INFO  Install plugins...
2013.03.13 20:21:47 INFO  o.s.s.p.PluginDeployer  Deploy plugin Findbugs / 1.1 / 4785d335df6bd0e662d636a6fb03d79fbdda8c5a
2013.03.13 20:21:47 INFO  o.s.s.p.PluginDeployer  Deploy plugin JaCoCo / 1.1 / 4785d335df6bd0e662d636a6fb03d79fbdda8c5a 
```

有没有人有在 EC2 实例上运行 Sonar 的经验，或者对我有什么建议？我难住了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:44:55.097

> And I'm unable to access it by pointing my browser to ${monstrous_URL}:9000 or ${vanity URL}:9000.

Change the security group attached to the EC2 instance to allow incoming connections to TCP port 9000.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T06:18:56.590

使用以下输入作为声纳将 H2 数据库更改为 mysql。

```
jdbc.url=jdbc:mysql://localhost:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true&useConfigs=maxPerformance
sonar.jdbc.driverClassName= com.mysql.jdbc.Driver
sonar.jdbc.validationQuery= select 1 
```

并在 sonar.properties 中进行以下更改：

```
sonar.web.host:                           0.0.0.0
sonar.web.context:                        /sonar 
```

# c++ - 使用包含数组指针的类重载 + 运算符 (C++)

> ID：15395924
> 
> 赞同：0
> 
> 时间：2013-03-13T20:35:36.083
> 
> 标签：c++, class, operator-overloading

我目前正在编写一个“多项式”类以练习运算符重载。我已经成功地重载了流提取和插入运算符，但是我在使用“+”运算符时遇到了一些问题。

我的类有一个私有指针，它继续在构造函数中创建一个数组。例如，我了解如何使用复数类重载“+”运算符，但我对这个程序感到困惑。

寻求解决方案的指导将不胜感激。谢谢你。

```
#include<iostream>
#include<stdexcept>
using namespace std;

#ifndef POLYNOMIAL_H
#define POLYNOMIAL_H

class Polynomial 
{
      friend istream& operator>>(istream& in, Polynomial& p);
      friend ostream& operator<<(ostream& out, const Polynomial& p);
      public:
             Polynomial(int = 10);
             ~Polynomial();
             void assignExponent();
             Polynomial operator+(const Polynomial& other);

      private:
              int SIZE;
              int *exponents;
              int *polyPtr; //***************
};

#endif

//CONSTRUCTOR
Polynomial::Polynomial(int arraySize)
{
     if(arraySize > 0)
                  SIZE = arraySize;
     else
     {
         cout << "Array size must be greater than 0\. Program will now "
              << "Terminate..." << endl;

         system("pause");
         exit(0);
     }

     polyPtr = new int[SIZE]; //*********************
     exponents = new int[SIZE];

     for(int i = 0; i<SIZE; i++)
             polyPtr[i] = 0;

     assignExponent();
};

//DESTRUCTOR
Polynomial::~Polynomial() //******************
{
     delete [] polyPtr;                         
};

//STREAM INSERTION
istream& operator>>(istream& in, Polynomial& p)
{
         for(int i = 0; i<p.SIZE; i++)
         {
               in >> p.polyPtr[i];  //*************        
         }

         return in;
};

//STREAM EXTRACTION
ostream& operator<<(ostream& out, const Polynomial& p)
{
         int exponent;
         for(int i = 0; i<p.SIZE; i++)
         {
               exponent = (p.SIZE - 1) - i;

               if(p.polyPtr[i] != 1)
               {  
                  if(exponent > 0 && exponent != 1)
                           out << p.polyPtr[i] << "x^" << exponent << " + ";  

                  if(exponent == 1)
                           out << p.polyPtr[i] << "x" << " + ";

                  if(exponent == 0)
                           out << p.polyPtr[i];  
               }

               //In order to not display coefficient if = 1
               else
               {
                   if(exponent > 0 && exponent != 1)
                           out << "x^" << exponent << " + ";  

                   if(exponent == 1)
                           out << "x" << " + ";

                   if(exponent == 0)
                           out << p.polyPtr[i];
               }    
         }       

         return out;
}; 

//Assigns a value for exponent
void Polynomial::assignExponent()
{
     for(int i = 0; i<SIZE; i++)
     {
             exponents[i] = (SIZE - 1) - i;        
     }
};

//OVERLOAD OF + OPERATOR
Polynomial Polynomial::operator+(const Polynomial& other)
{
         Polynomial sum(SIZE);
         int difference;

         //If the first polynomial is larger
         if (SIZE > other.SIZE)
         {
            difference = SIZE - other.SIZE;

            for(int i = 0; i<SIZE; i++)
            {
                 if(i - difference < 0)
                      sum.polyPtr[i] = polyPtr[i];

                 else
                 {
                     sum.polyPtr[i] = polyPtr[i] + 
                                  other.polyPtr[i - difference];  
                 }                            
            }         
         }

         //If the second polynomial is larger       **PROBLEM**  
         if(other.SIZE > SIZE)
         {
            difference = other.SIZE - SIZE;

            for(int i = 0; i<other.SIZE; i++)
            {
                 if(i - difference < 0)
                      sum.polyPtr[i] = other.polyPtr[i];

                 else
                 {
                     sum.polyPtr[i] = other.polyPtr[i] + 
                                  polyPtr[i - difference];  
                 }                            
            }         
         }

         //If the polynomials are equal
         if(SIZE == other.SIZE)     
         {
                  for(int i = SIZE-1; i >= 0; i--)
                  {
                          sum.polyPtr[i] = polyPtr[i] + other.polyPtr[i];        
                  }   
         }

         return sum;
};

int main()
{
    int polySize;

    //User enters a size for the first & second polynomial
    cout << "Enter a size for the first polynomial: ";
    cin >> polySize;
    Polynomial pOne(polySize);

    cout << "\nEnter a size for the second polynomial: ";
    cin >> polySize;
    Polynomial pTwo(polySize);

    //User enters in values (Overload of >> operator
    cout << "\n\nEnter in values for the first polynomial, "
         << "in the format - (x x x x): " << endl;
    cin >> pOne;
    cout << "\nEnter in values for the second polynomial, "
         << "in the format - (x x x x): " << endl;
    cin >> pTwo;

    //Overload << operator for output
    cout << "\nPolynomial 1 is: " << pOne << endl
         << "Polynomial 2 is: " << pTwo << endl;

    Polynomial pThree = pOne + pTwo;

    cout << "\nAfter being added together, the new polynomial is: "
         << pThree << endl;

 system("pause");   
} 
```

我已经更新了我当前的代码，因为我认为打开另一个问题不是最好的方法。无论如何，在尝试排列要添加的多项式时，我已经部分成功了。出现的唯一问题是当第二个多项式 pTwo 大于第一个时。我已经标记了代码部分**PROBLEM**。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:37:46.020

我想`+`应该写如下：

```
class Polynomial 
{
  // ...

  Polynomial operator+(const Polynomial& other);

 // ...
};

Polynomial Polynomial::operator+(const Polynomial& other)
{
     Polynomial sum(SIZE);

     for(int i = 0; i< SIZE; i++)
     {
         sum.polyPtr[i] = polyPtr[i] + other.polyPtr[i];
     }

     return sum;
} 
```

# c# - 使用 EWS 托管 API 2.0 将任务发送到 Exchange 服务器上的多个收件人

> ID：15395925
> 
> 赞同：1
> 
> 时间：2013-03-13T20:35:38.030
> 
> 标签：c#, exchangewebservices, exchange-server

有谁知道如何使用 EWS 托管 API 2.0 在 C# 中以编程方式将任务发送到 Exchange Server 上的多个邮箱？

# ruby - 为什么这种数组构建方法这么慢？

> ID：15395927
> 
> 赞同：0
> 
> 时间：2013-03-13T20:35:48.313
> 
> 标签：ruby

这种方法在 50 个市场和 2,500 个流（约 250,000 次迭代）中需要 7 多秒。为什么这么慢？

```
def matrix
  [:origin, :destination].collect do |location|
    markets.collect do |market|
      network.flows.collect { |flow| flow[location] == market ? 1 : 0 }
    end
  end.flatten
end 
```

我知道缓慢来自于基于我运行的基准对一个市场与另一个市场进行的比较。

以下是正在比较的课程的相关部分。

```
module FreightFlow
  class Market
    include ActiveAttr::Model

    attribute :coordinates

    def ==(value)
      coordinates == value.coordinates
    end

  end
end 
```

加快速度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:45:25.893

You are constructing 100 intermediate collections (2*50) comprising of a total of 250,000 (2*50*2500) elements, and then flattening it at the end. I would try constructing the whole data structure in one pass. Make sure that `markets` and `network.flows` are stored in a hash or set. Maybe something like:

```
def matrix
  network.flows.collect do |flow|
    (markets.h­as_key? flow[:origin] or 
     marke­ts.has_key­? flow[:destination]) ? 1 : 0
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:58:40.773

这是一件简单的事情，但它可以帮助......

在你最里面的循环中，你正在做：

```
network.flows.collect { |flow| flow[location] == market ? 1 : 0 } 
```

不要使用三元语句转换为`1`or `0`，而是使用`true`and`false`布尔值：

```
network.flows.collect { |flow| flow[location] == market } 
```

这在速度上差别不大，但在这么多嵌套循环的过程中，它会累加起来。

此外，它还允许您使用正在生成的矩阵来简化测试。不必比较`1`or `0`，您可以将条件测试简化为`if flow[location]`,`if !flow[location]` or `unless flow[location]`，再次为每个测试加快应用程序的速度。如果它们深深地嵌套在循环中，这很可能，那一点点可以再次加起来。

当速度很重要时，重要的事情是使用 Ruby 的 Benchmark 类来测试执行相同任务的各种方法。然后，而不是猜测，你知道什么是有效的。你会在 Stack Overflow 上找到很多问题，我在其中提供了一个答案，其中包含一个基准，显示各种做事方式之间的速度差异。有时差异非常大。例如：

```
require 'benchmark'

puts `ruby -v`

def test1()
  true
end

def test2(p1)
  true
end

def test3(p1, p2)
  true
end

N = 10_000_000
Benchmark.bm(5) do |b|
  b.report('?:') { N.times { (1 == 1) ? 1 : 0 } }
  b.report('==') { N.times { (1 == 1) } }
  b.report('if') {
    N.times {
      if (1 == 1)
        1
      else
        0
      end
    }
  }
end

Benchmark.bm(5) do |b|
  b.report('test1') { N.times { test1() } }
  b.report('test2') { N.times { test2('foo') } }
  b.report('test3') { N.times { test3('foo', 'bar') } }
  b.report('test4') { N.times { true } }
end 
```

结果：

```
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin10.8.0]
            user     system      total        real
?:      1.880000   0.000000   1.880000 (  1.878676)
==      1.780000   0.000000   1.780000 (  1.785718)
if      1.920000   0.000000   1.920000 (  1.914225)
            user     system      total        real
test1   2.760000   0.000000   2.760000 (  2.760861)
test2   4.800000   0.000000   4.800000 (  4.808184)
test3   6.920000   0.000000   6.920000 (  6.915318)
test4   1.640000   0.000000   1.640000 (  1.637506)

ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin10.8.0]
            user     system      total        real
?:      2.280000   0.000000   2.280000 (  2.285408)
==      2.090000   0.010000   2.100000 (  2.087504)
if      2.350000   0.000000   2.350000 (  2.363972)
            user     system      total        real
test1   2.900000   0.010000   2.910000 (  2.899922)
test2   7.070000   0.010000   7.080000 (  7.092513)
test3  11.010000   0.030000  11.040000 ( 11.033432)
test4   1.660000   0.000000   1.660000 (  1.667247) 
```

有两组不同的测试。首先是看看简单的条件测试与使用的区别是什么`==`不使用三元组来获得布尔值有什么区别。二是测试调用方法的效果，单参数的方法，双参数的方法，对比“inline-code”，找出调用方法时setup和tear-down的成本。

现代 C 编译器在发出要编译的汇编语言之前分析代码时会做一些惊人的事情。我们可以根据大小或速度对它们进行微调。当我们追求速度时，程序会随着编译器寻找可以展开的循环并放置它可以“内联”的代码而增长，以避免 CPU 跳来跳去并丢弃缓存中的内容。

Ruby 在语言链中的位置要高得多，但一些相同的想法仍然适用。我们可以用非常 DRY 的方式编写，避免重复并使用方法和类来抽象我们的数据，但代价是降低了处理速度。答案是智能地编写代码，不要浪费 CPU 时间和展开/内联以提高速度，而在其他时间保持干燥以使代码更易于维护。

这都是一种平衡行为，有时间同时写两种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:33:54.847

在流量中记忆市场指数比任何其他解决方案都要快得多。时间从提出问题时的约 30 秒减少到 0.6 秒。

首先，我`flow_index`在`Network`课堂上添加了一个。它存储包含市场的流量的索引。

```
def flow_index
  @flow_index ||= begin
    flow_index = {}
    [:origin, :destination].each do |location|
      flow_index[location] = {}
      flows.each { |flow| flow_index[location][flow[location]] = [] }
      flows.each_with_index { |flow, i| flow_index[location][flow[location]] << i }
    end
    flow_index
  end
end 
```

然后，我重构了`matrix`使用流索引的方法。

```
def matrix
  base_row = network.flows.count.times.collect { 0 }
  [:origin, :destination].collect do |location|
    markets.collect do |market|
      row = base_row.dup
      network.flow_index[location][market].each do |i|
        row[i] = 1
      end
      row
    end
  end.flatten
end 
```

使用`base_row`全 0 创建，您只需在该市场的 flow_index 位置替换为 1。

# liferay - Liferay 权限资源可以代表门户之外的对象吗？

> ID：15395929
> 
> 赞同：2
> 
> 时间：2013-03-13T20:35:52.153
> 
> 标签：liferay, liferay-6

[Liferay 安全和权限文档](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/security-and-permissio-4)将资源定义为：

> **门户中表示的任何对象**的通用术语。资源的示例包括 portlet（例如留言板、日历等）、Java 类（例如留言板主题、日历事件等）和文件（例如文档、图像等）。

如另一篇[SO 帖子](https://stackoverflow.com/questions/15367895/how-to-use-liferays-permission-system-in-other-applications)中所述，我正在考虑尝试在另一个应用程序（而不是 portlet）中使用 Liferay 的权限系统。

在我的用例中，Liferay 资源将为我的应用程序中的域对象定义。当在我的应用程序中创建一个新的域对象时，我会在 Liferay 中添加一个相应的新资源（可能是通过使用 JSON-WS API）。

文档还指出：

> name 参数是要添加的资源对象的全限定 Java 类名。primKey 参数是资源对象的主键。

我是否正确理解“名称参数”必须与`<model-name>`我之前在 a 中定义的 a匹配`<model-resource>`？

并且“primKey 参数”不必匹配 Portal 数据库中的任何特定对象？它可能是我的外部数据库中对象的主键？

那么，Liferay 权限资源可以代表门户之外的对象吗？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:53:30.523

你如何描述它，它应该有效。基本上，liferay-resource-action 定义为您完成了所有工作。

但“名称参数”不是字符串。它的 PK 来自 CLASSNAME_ 表，其中包含 liferay 中定义的所有类名。在这里，您必须添加一个包含完全限定的 java 类名的行。

'primarKey' 参数通常是一些实体形式 liferay 的主键。所以也许你可以保留这个概念并在现场设置你的实体 pk。

# css - :after : z-index 不起作用

> ID：15395930
> 
> 赞同：2
> 
> 时间：2013-03-13T20:35:53.577
> 
> 标签：css, z-index, pseudo-element

我想将黑色矩形 (:after) 放在 h2 后面，但 z-index 不起作用。

我在 html 中有这段代码

```
 <h2>Ce que tu auras peut-être un jour ou l'autre...</h2> 
```

这在 CSS 中：

```
#general .page h2 {
position: relative;
text-indent: -9999px;
width: 718px;
margin-bottom: 50px;
height: 116px;
z-index: 10;
background: url(img/banniere-hi-04.png);
}

#general .page h2:after {
display: block;
content: "";
position: absolute;
top: -15px;
left: 658px;
width: 544px;
height: 72px;
z-index: -1;
background: black;
} 
```

这是问题所在（这里有一个黑色矩形）： [http ://www.robinmastromarino.be/dataviz04/](http://www.robinmastromarino.be/dataviz04/)

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:48:34.903

您需要给出`<div class="page">`一个相对位置和一个正 z-index，然后删除 z-index 上`<h2>`的伪元素创建一个新的堆叠上下文

[有关原因的更多信息](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context?redirectlocale=en-US&redirectslug=Understanding_CSS_z-index/The_stacking_context)

* * *

例子：

[![](../Images/2f42a05e5842bae3cdf15dfd9e191df4.png)](https://i.stack.imgur.com/l9XTl.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:38:20.240

您不能给子节点的 z-index 低于其父节点。

# ssl - 与独立运行相比，Erlang SSL 模块无法通过 Rebar 应用程序运行

> ID：15395932
> 
> 赞同：2
> 
> 时间：2013-03-13T20:36:05.253
> 
> 标签：ssl, erlang, rebar

我正在开发一个 SSL 服务器应用程序，它应该接受连接并以简单的方式响应。我已经在一个常规的 Erlang 脚本中创建了应用程序的框架，该脚本已经在 Erlang shell 中进行了测试。这种方法完美无缺，但是当试图在 Rebar 中实现它时，模块停止工作。

我的模块看起来像这样（称为 api）：

```
-define(SSL_OPTIONS, [{active, false}, {reuseaddr, true}, {certfile,"../priv/certificate.pem"}, {keyfile,"../priv/key.pem"}]).
start() ->
    try
        ssl:start(),
        Pid = listen(3000),
        {ok, Pid}
    catch
        _:_ -> error
    end.

listen(Port) ->
    {ok, LSocket} = ssl:listen(Port, ?SSL_OPTIONS),
    spawn(fun() -> accept(LSocket) end).

accept(LSocket) ->
    {ok, Socket} = ssl:transport_accept(LSocket),
    Pid = spawn(fun() -> communicator:loop(Socket) end),
    ssl:controlling_process(Socket, Pid),
    ?MODULE:accept(LSocket). 
```

我的 Rebar 应用程序的实现如下所示（称为 redirector_app）：

```
-module(redirector_app).

-behaviour(application).

%% Application callbacks
-export([start/2, stop/1]).

%% ===================================================================
%% Application callbacks
%% ===================================================================

start(_StartType, _StartArgs) ->
    redirector_sup:start_link(),
    spawn(fun() -> init() end).

stop(_State) ->
    ok.

init() ->
    api:start(),
    ok. 
```

我可以通过进入 .beam 文件所在的 ebin 文件夹并运行 Erlang shell 来启动 api 模块。在 Erlang shell 中，我运行以下命令：

```
api:start(). 
```

但是，当我尝试从同一个文件夹和同一个 shell 运行 Rebar 应用程序时：

```
redirector_app:start([],[]). 
```

我收到以下错误：

```
Error in process <0.50.0> with exit value: {{badmatch,{error,einval}},[{ssl,transport_accept,2,[{file,"ssl.erl"},{line,197}]},{api,accept,1,[{file,"src/api.erl"},{line,25}]}]} 
```

如果我转到 Rebar 应用程序的根目录并使用以下命令运行 Erlang shell，这不会改变：

```
$ erl -pa ebin/ 
```

我已将问题缩小到连接问题。我认为连接实际上在 ssl:transport_accept(LSocket) 运行之前关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:53:39.267

钢筋应用程序是钢筋本身。你所做的就是所谓的 Erlang 应用程序。您可以在此处查看文档：[http ://www.erlang.org/doc/design_principles/applications.html](http://www.erlang.org/doc/design_principles/applications.html)

Erlang 应用程序以不同的方式启动。您必须使用`application:start(redirector)`. 这也意味着您的（或其他搜索路径）中必须有`redirector.app`文件，该文件必须有. 您必须确保在您的应用程序之前启动您所依赖的所有应用程序，如果您使用 Erlang 版本，这可能会自动完成[http://www.erlang.org/doc/design_principles/release_structure.html](http://www.erlang.org/doc/design_principles/release_structure.html)`ebin``{mod, {redirector_app,[]}}`

我建议您阅读一篇文章[http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades](http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades)

# actionscript-3 - Flash Builder 4.7 中的选择器模式

> ID：15395934
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:11.837
> 
> 标签：actionscript-3

我刚刚安装了Flash Builder 4.7（试用版），突然我失去了源代码和设计模式。这很奇怪，因为第一天我都有。我检查了一切，但它不起作用。

![](../Images/055448fadc130cde06dbcf2db6d7fafb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:18:55.627

FlashBuilder 4.7 没有设计视图了。只有您看到的源视图！4.6还是有的。也许你在试用中升级了。

# python - 带有不需要前缀的python字典的输出

> ID：15395937
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:20.757
> 
> 标签：python

（免责声明：对 Python 和编程来说还是新手）

我使用 Python 2.7 和 Beautiful Soup 来实现从网站中提取数据的函数……</p>

```
date = soup.find('div', class_="attention-box").p.string 
```

... 运行正则表达式，因为我只需要年份，而不是*Date:*而不是日 + 月 ...</p>

```
date = re.findall(r'(\d{4})\s+', date) 
```

… 将其添加到字典中…</p>

```
collection['date']=date 
```

......并返回字典。

当我尝试使用字典中的字符串打印以下内容（我正在为 wiki 创建模板）时

```
print "|" + collection['URL'] + "|" + collection['title'] + "|" + collection['name']+"|" 
```

有效。

当我添加*日期*

```
print "|" + collection['URL'] + "|" + collection['title'] + "|" + collection['name']+"|" + collection['date'] + "|" 
```

我收到以下错误：*TypeError: coercing to Unicode: need string or buffer, list found*

在我的函数中，我添加`date = str(date)`并得到了一个工作输出，*但*我在日期部分得到了例如*[u'2001']*。如何在此特定设置中的此视觉 unicode 表示（？）中删除它？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:59:14.397

## 列表样式

首先是风格的东西：你可以代表这个：

```
print "|" + collection['URL'] + "|" + collection['title'] + "|" + collection['name']+"|" + collection['date'] + "|" 
```

像这样：

```
print "|".join([a[x] for x in ('URL', 'title', 'name', 'date')]) 
```

演示：

```
In : a
Out: {'URL': 'example.com', 'date': '2013-03-13', 'name': 'Mel', 'title': 'Foo!'}

In : [a[x] for x in ('URL', 'title', 'name', 'date')]
Out: ['example.com', 'Foo!', 'Mel', '2013-03-13']

In : "|".join([a[x] for x in ('URL', 'title', 'name', 'date')])
Out: 'example.com|Foo!|Mel|2013-03-13' 
```

## 重新使用

第二点是`re.findall`返回所有匹配的数组。您可能希望将匹配设置为使用`re.search(...)`检索`result.group()`，或者`re.finditer`如果您想在找到多个匹配时进行错误检查，请使用。您也可以获取 的第一个值`re.findall`，但考虑到其他两个选项，这似乎效率低下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:37:45.133

`findall`正在返回一个集合（一个 python 列表）。

如果只有一个`date`匹配的正则表达式使用`find`，或者您可以继续使用`findall`和访问第一个日期使用`date[0]`

# php - PHP 正则表达式不起作用

> ID：15395938
> 
> 赞同：1
> 
> 时间：2013-03-13T20:36:21.403
> 
> 标签：php, regex

我一直在尝试下一个正则表达式

```
$pattern = '/([0-9]{1,2}[.]{1}([a-z|A-Z|0-9]+[\s]*)+)/'; 
```

为了检测文本中出现的以下情况：[number].[text]，例如：1.text text text 对于下一个文本`"test number one 1.first 2.second"`，结果是

```
array(3) { [0]=> string(9) "1.first 2" [1]=> string(9) "1.first 2" [2]=> string(1) "2" } 
```

我写的正则表达式的问题在哪里？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:58:46.363

这是你想要做的：

```
\d+[.][\w\d\s]+?(?=$|\s\d+[.]) 
```

它将匹配此文本中的所有 3 次出现：`"1\. text test 2\. some more22 3\. and more"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:44:26.377

Try this:

```
$pattern = '/\d\.\w+/';
$str = "test number one 1.first 2.second 3.third 4.xyz 5.abcd";

preg_match_all($pattern, $str, $m);

print_r( $m ); 
```

The output is:

```
Array
(
    [0] => Array
    (
        [0] => 1.first
        [1] => 2.second
        [2] => 3.third
        [3] => 4.xyz
        [4] => 5.abcd
    )

) 
```

**is that what you need ? I'm not sure that I get well what you need to match so please try to explain it a bit more**

You can say for example:

> I would like to match ***x numbers followed by . followed by n letters***

or something like that

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:38:09.140

你的问题是最后的加号，这意味着你可以在空格之后匹配东西。它应该是：

```
$pattern = '/([0-9]{1,2}[.]{1}([a-z|A-Z|0-9]+[\s]*))/'; 
```

# backbone.js - Backbone.Marionette CollectionView 模板“未定义”

> ID：15395944
> 
> 赞同：2
> 
> 时间：2013-03-13T20:36:46.940
> 
> 标签：backbone.js, marionette, collectionview, backbone-rails

我一直在研究 Brian Mann 的 BackboneRails 截屏视频，所以我的应用程序结构与那些完全一致。

下面定义了 HomepageApp Marionette Appication 的“显示”部分。

```
My.module('HomepageApp.Show', function(Show, App, Backbone, Marionette, $, _){

  Show.Photo = Marionette.ItemView.extend({
    tagName:'span'
  });

  Show.Photos = Marionette.CollectionView.extend({  
    template: 'homepage/show/templates/photos',

    itemView:Show.Photo,
    itemViewContainer: '#photos'
  });

  Show.Layout = Marionette.Layout.extend({
    template: 'homepage/show/templates/layout',
    regions:{
      photoRegion: '#photo-region'
    }
  });
}); 
```

我还使用以下内容覆盖了 Marionette.Renderer.render 函数：

```
Backbone.Marionette.Renderer.render = function(template, data){
  var path = JST["backbone/apps/" + template];  

  try{
    if(!path) throw({message: "Template '" + template + "' not found!"}); 
    return path(data);
  }

  catch(err){
    console.log(err.message);
  }
} 
```

我的所有观点，包括许多未在此处显示的观点都运行良好。问题是 Show.Photos CollectionView 的“模板”属性在我的渲染器覆盖中显示为“未定义”，这给了我以下错误：

```
Template 'undefined' not found! 
```

奇怪的是，当我根本没有为模板属性传递任何值时，甚至会发生这种情况。

我也知道我在实例化时传递了一个有效的 Backbone 集合。

我完全被困住了。有谁熟悉这种现象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T08:47:10.117

CollectionView 不应该有模板，为此您应该使用 CompositeView，如文档中所述：

> CompositeView 扩展自 CollectionView 以用作复合视图，用于表示树结构中的分支和叶子的**场景，或者用于需要在包装器模板中呈现集合的场景**。

你可以在这里阅读更多内容：[https ://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

# delphi - 我不断从 TClientSocket 接收 0 字节

> ID：15395947
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:51.820
> 
> 标签：delphi, sockets, winsock

使用 DbgView，我看到在收到 Stream 后，服务器收到 0 个字节，比如 100 多次，这是什么？这对我来说是新的，我从未见过这种情况发生。

我个人觉得这是一个客户端问题，可以吗？

*这就是我接收流服务器端的方式*：

```
 FMemStream := Socket.ReceiveStream(FMemStreamSize, cbUpdateStreamProgBar);
    try
      doClientReadStreamEnd;
    finally
      FMemStream.Free;
      FInStreamMode := False; // we're not in stream mode anymore
    end;

function TCustomWinSocketHelpher.ReceiveStream(StreamLen: Integer; Callback: TUpdateProgBarProc): TMemoryStream;
const
  ChunkSize = 4096; // 4kb
var
  PData: PByte;
  ReadAmount: Integer;
begin
  Result := TMemoryStream.Create;
  GetMem(PData, StreamLen);
  try
    while StreamLen > 0 do
    begin
      ReadAmount := ReceiveBuf(PData^, ChunkSize);
      if (ReadAmount > 0) then
      begin
        Result.Write(PData^, ReadAmount);
        Callback(ReadAmount); // update gui
        Inc(PData^, ReadAmount); // update PData current position
        Dec(StreamLen, ReadAmount); // update loop condition
      end;
    end;
  finally
    FreeMem(PData);
  end;
end; 
```

*在客户端，这就是我发送流的方式*：

```
FClientSocket.Socket.SendStreamEx(RemoteProcedureCalls.Stream);

procedure TCustomWinSocketHelpher.SendStreamEx(Stream: TStream);
begin
  Stream.Seek(0, TSeekOrigin.soBeginning);
  SendStream(Stream);
end; 
```

*这是它的外观照片，它不应该在第5**行***之后继续发送。

![在此处输入图像描述](../Images/2aaa858d0c246614aefc6bd0553527c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:44:12.487

返回 0时`ReceiveBuf()`，表示套接字已被对方断开。你没有处理那个条件，所以你不断循环，一次又一次地回到 0。任何小于 1 的值都是失败的读取，需要这样处理。如果`ReceiveBuf()`返回 -1，则发生了实际的读取错误，但该结果只能在错误为 的情况下返回`WSAEWOULDBLOCK`，这不是致命的，或者您`OnError`分配了一个正在设置的事件处理程序`ErrorCode := 0`。否则，`ReceiveBuf()`会在真正的套接字错误上引发`ESocketError`异常。

试试这个：

```
function TCustomWinSocketHelpher.ReceiveStream(StreamLen: Integer; Callback: TUpdateProgBarProc): TMemoryStream;
const
  ChunkSize = 4096; // 4kb
var
  PData: PByte;
  ReadAmount: Integer;
begin
  Result := TMemoryStream.Create;
  try
    GetMem(PData, ChunkSize);
    try
      while StreamLen > 0 do
      begin
        ReadAmount := ReceiveBuf(PData^, Min(ChunkSize, StreamLen));
        if ReadAmount < 0 then
        begin
          if WSAGetLastError() = WSAEWOULDBLOCK then
            Continue;
          // an OnError event handler must have disabled an exception being raised
          Exit;
        end;
        if ReadAmount = 0 then
        begin
          // socket disconnected
          raise Exception.Create(''); // or just Exit if you don't mind that the expected data is incomplete
        end;
        Result.WriteBuffer(PData^, ReadAmount);
        Callback(ReadAmount); // update gui
        Dec(StreamLen, ReadAmount); // update loop condition
      end;
    finally
      FreeMem(PData);
    end;
  except
    Result.Free;
    raise;
  end;
end; 
```

# java - 有哪些 Java 工具可以报告正在使用的方法？

> ID：15395948
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:54.540
> 
> 标签：java

我们正在尝试将我们非常大的代码库从 Guava 11 迁移到 Guava 14，并希望捕获已删除或已弃用的 API 的使用情况。有哪些（静态分析）Java 工具可以报告正在使用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:01:44.080

正如@Chris Knight 所说，只需针对 Guava 14 编译您的代码库。编译器将在删除的方法上失败，并警告您不推荐使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:41:37.833

虽然我认为这个问题违反了 SO 的指导方针......

我们使用 Sonar 对我们的应用程序进行静态分析：http: [//www.sonarsource.org/](http://www.sonarsource.org/)。我不确定，但它可能会标记折旧 API 的使用。当然，常规编译会捕获已删除 API 的使用情况。

# sql - 这个 PowerShell 脚本有什么问题？

> ID：15395950
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:55.830
> 
> 标签：sql, powershell, filestream

我正在尝试使用 powershell 脚本导出 sql 文件流数据，它最多只能导出 8kb，如果文件超过 8kb，则无法导出。但它会部分创建文件。我不知道缺少什么。

```
$Server = "(local)";              # SQL Server Instance.            
$Database = "AdventureWorks";            
$Dest = "D:\Export\";             # Path to export to.            
$bufferSize = 8192;               # Stream buffer size in bytes.            

$con = New-Object Data.SqlClient.SqlConnection;            
$con.ConnectionString = "Data Source=$Server;" +             
                    "Integrated Security=True;" +            
                    "Initial Catalog=$Database";            
$con.Open();            

[System.Data.SqlClient.SqlTransaction]$tran = $con.BeginTransaction("fs");            
$Sql = "SELECT GET_FILESTREAM_TRANSACTION_CONTEXT()";            
$ctx = [array]::CreateInstance('Byte', 16);            
$cmdct = New-Object Data.SqlClient.SqlCommand($Sql, $con, $tran);            
$ctx = $cmdct.ExecuteScalar();            
$cmdct.Dispose();            

$Sql = "SELECT [FileName] 
          ,[FileStreamData].PathName()
    FROM dbo.FileStreamStorage ";            

$out = [array]::CreateInstance('Byte', $bufferSize);            

$cmd = New-Object Data.SqlClient.SqlCommand($Sql, $con, $tran);            
$rd = $cmd.ExecuteReader();            

While ($rd.Read())            
{            
Write-Output ("Exporting: {0}" -f $rd.GetString(0));                    

$fs = New-Object System.IO.FileStream ($Dest + $rd.GetString(0)), Create, Write;            
$bw = New-Object System.IO.BinaryWriter($fs);            
$sfs = New-Object System.Data.SqlTypes.SqlFileStream $rd.GetString(1), $ctx, Read, None, 0;            

$start = 0;            
While (1 -eq 1)            
{                             
   $received = $sfs.Read($out, $start, $bufferSize - 1);            
   $bw.Write($out, 0, $received);            
   $bw.Flush();            
   $start += $received;            

   If ($received -lt $bufferSize)            
   { break; }            
}            

$bw.Close();            
$fs.Close();            
$sfs.Close();            
}            

$fs.Dispose();            
$sfs.Dispose();            
$rd.Close();            
$rd.Dispose();            
$tran.Commit();            
$cmd.Dispose();            
$tran.Dispose();            
$con.Close();            
$con.Dispose();            

Write-Output ("Finished"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:57:46.490

我认为您正在读取 8191 字节，这意味着如果数据比这更多，则 $received 将为 8191。

```
$received = $sfs.Read($out, $start, **$bufferSize - 1**); 
```

然后你比较 $received (8191) 和 $bufferSize (8192)

```
If ($received -lt $bufferSize) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:07:31.323

我已经对文件流和 Powershell 做了一些工作，我同意其他评论——看来你如何获得长度存在问题。[这是我的博客http://sev17.com/2010/05/11/t-sql-tuesday-006-blobs-filestream-and-powershell/](http://sev17.com/2010/05/11/t-sql-tuesday-006-blobs-filestream-and-powershell/)中的一些代码，它演示了将文件流数据检索到图像文件：

```
$server = "Z002sql2k8"
$database = "AdventureWorks2008"
$query = "SELECT TOP(10) Document.PathName(), GET_FILESTREAM_TRANSACTION_CONTEXT(), Title + FileExtension AS FileName FROM Production.Document WHERE FileExtension = '.doc'"
$dirPath = "C:Usersu00"

$connection=new-object System.Data.SqlClient.SQLConnection
$connection.ConnectionString="Server={0};Database={1};Integrated Security=True" -f $server,$database
$connection.Open()
$command=new-object system.Data.SqlClient.SqlCommand("",$connection)
$command.CommandTimeout=120
$tran = $connection.BeginTransaction([System.Data.IsolationLevel]'ReadCommitted')
$command.Transaction = $tran
$command.CommandText = $query
$reader = $command.ExecuteReader()
while ($reader.Read())
{
    $path = $reader.GetString(0)
    [byte[]]$transactionContext = $reader.GetSqlBytes(1).Buffer
    $filepath = "$dirPath{0}" -f $reader.GetValue(2)

    $fileStream = new-object System.Data.SqlTypes.SqlFileStream($path,[byte[]]$reader.GetValue(1), [System.IO.FileAccess]'Read', [System.IO.FileOptions]'SequentialScan', 0)
    $buffer = new-object byte[] $fileStream.Length
    $fileStream.Read($buffer,0,$fileStream.Length)
    $fileStream.Close()
    [System.IO.File]::WriteAllBytes($filepath,$buffer)

}

$reader.Close()
$tran.Commit()
$connection.Close() 
```

# ios - 应用内电子邮件将发送电子邮件但不会在 Xcode 中关闭

> ID：15395951
> 
> 赞同：0
> 
> 时间：2013-03-13T20:36:57.513
> 
> 标签：ios, xcode, email, mfmailcomposeviewcontroller

我已经阅读了其他线程并尝试了多个变量。

我有一个将屏幕截图附加到应用内电子邮件的应用。
当我按下发送或取消按钮时，电子邮件不会关闭。

不确定我是否有此操作的代表。

代码：

`.h`

```
- (IBAction)openMail: (id)sender; 
```

`.m`

```
//Open Mail
- (IBAction)openMail: (id)sender {
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
//UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);

NSData * imageData = UIImageJPEGRepresentation(viewImage,2.0);

if ([MFMailComposeViewController canSendMail] ) {
    MFMailComposeViewController * mailComposer = [[MFMailComposeViewController alloc]           
init];
    mailComposer.delegate = self;
    [mailComposer addAttachmentData:imageData mimeType:@"image/png"   
fileName:@"attachment.jpng"];

    /* Configure other settings */
    [mailComposer setSubject:@""];
    [mailComposer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
    [mailComposer setToRecipients:[NSArray arrayWithObjects:@"%@", nil]];
    [mailComposer setSubject:@"4-4-2 Tactics/Line Up"];
    //[mailComposer setMessageBody:AddNotesTextField.text isHTML:NO];
    [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

    [self presentViewController:mailComposer animated:YES completion:nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller   
didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error{
if (error) { UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:  
[NSString stringWithFormat:@"Error %@", [error description]] delegate:self 
cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
}
[self dismissViewControllerAnimated:YES completion:NULL];

}

newMedia = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:16:06.230

也许你应该试试这个

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:43:38.407

想通了。

这是我需要的。

//打开邮件

```
- (IBAction)openMail: (id)sender {

UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
//UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);

NSData * imageData = UIImageJPEGRepresentation(viewImage,2.0);

MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
[mailComposer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) {
    [mailComposer setToRecipients:[NSArray arrayWithObjects:@"%@", nil]];
    [mailComposer setSubject:@"4-4-2 Tactics/Line Up"];
    [mailComposer setMessageBody:AddNotesTextField.text isHTML:NO];
    [mailComposer addAttachmentData:imageData mimeType:@"image/png" fileName:@"attachment.jpng"];
    [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentViewController:mailComposer animated:YES completion:nil];
}

newMedia = YES;

} 
```

非常微妙的变化

# c# - 将字符添加到字符数组问题，刽子手游戏

> ID：15395953
> 
> 赞同：1
> 
> 时间：2013-03-13T20:37:07.830
> 
> 标签：c#, console

问题是我发现我的方法需要从多个 char 变量构建一个 char 数组 -> char[]。有人能指出我正确的方向吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
class Program
{
    string[] wordList = { 
                            "Baseball", "Tackle", "Dubstep", "Ignorance", "Limitation", "Sausage",
                            "Destruction", "Patriot", "Computing", "Assembly", "Coding", "Hackers",
                            "Football", "Downward"
                        };
    static void Main(string[] args)
    {
        int guessRemain = 7;
        int wordSel = GenerateRandom();
        Program o = new Program();

        char[] wordChar = o.wordList[wordSel].ToLower().ToCharArray();
        int MAX_BUF = wordChar.Length;

        Console.WriteLine("\nHANGMAN v 1.0\n\n\n\n");
        char[] userInput = PromptUserEntry();
        char[] solution = ScanForMatchingLetter(wordChar, MAX_BUF, userInput);

        Console.Read();
    }
    private static char ScanForMatchingLetter(char[] wordChar, int MAX_BUF, char[] userInput)
    {
        char[] solution = new char[MAX_BUF];
        for (int i = 0; i < MAX_BUF; ++i)
        {
            if (userInput[0] == wordChar[i])
            {
                solution[i] = userInput[0];

            }

        }
        return solution;
    }
    private static char[] PromptUserEntry()
    {
        Console.WriteLine("Pick a letter:");
        char[] userInput = Console.ReadLine().ToCharArray();
        return userInput;
    }
    private static void DisplayGuessLetterLine(char[] solution)
    {

        Console.Write(solution);

    }
    private static int GenerateRandom()
    {
        Random randNum = new Random();
        int wordSel = randNum.Next(0, 13);
        return wordSel;
    }

}
} 
```

我这里有一个返回类型问题；返回类型指定为 char，但我返回的是 char[]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:49:34.863

在您使用 char 数组的每个实例中，将它们替换为

```
List<char> 
```

列表允许您随意添加和删除，为您重新装箱底层数组，这样您就不必担心它。

我已经用你的决议更新了我的答案。当您只有一个用户输入时，使用 List 而不是 char 数组并仅返回单个字符，而不是数组。我希望这有助于并解决您的问题

```
class Program
{
    readonly string[] wordList = { 
                        "Baseball", "Tackle", "Dubstep", "Ignorance", "Limitation", "Sausage",
                        "Destruction", "Patriot", "Computing", "Assembly", "Coding", "Hackers",
                        "Football", "Downward"
                    };
    static void Main(string[] args)
    {
        int guessRemain = 7;
        int wordSel = GenerateRandom();
        Program o = new Program();

        List<char> wordChar = o.wordList[wordSel].ToLower().ToList();
        int MAX_BUF = wordChar.Count;

        Console.WriteLine("\nHANGMAN v 1.0\n\n\n\n");
        char userInput = PromptUserEntry();
        List<char> solution = ScanForMatchingLetter(wordChar, MAX_BUF, userInput);

        Console.Read();
    }
    private static List<char> ScanForMatchingLetter(List<char> wordChar, int MAX_BUF, char userInput)
    {
        List<char> solution = new char[MAX_BUF].ToList();
        for (int i = 0; i < MAX_BUF; ++i)
        {
            if (userInput == wordChar[i])
            {
                solution[i] = userInput;

            }

        }
        return solution;
    }
    private static char PromptUserEntry()
    {
        Console.WriteLine("Pick a letter:");
        char userInput = Console.ReadLine()[0];
        return userInput;
    }
    private static void DisplayGuessLetterLine(List<char> solution)
    {

        Console.Write(solution);

    }
    private static int GenerateRandom()
    {
        Random randNum = new Random();
        int wordSel = randNum.Next(0, 13);
        return wordSel;
    }
} 
```

# ms-access - 如果满足某些条件，如何替换查询中的值？

> ID：15395959
> 
> 赞同：1
> 
> 时间：2013-03-13T20:37:27.487
> 
> 标签：ms-access

例如，我有一个查询 Q，它返回带有办公室的客户 ID。但是，我有一个单独的查询 S，其中包含一个客户 ID 列表，在某些情况下应该硬编码到亚特兰大。

那么我怎么说“运行查询 Q，但如果客户 ID 存在于 S 中，那么不要使用正常的 Office 值，而是使用 S 中的 Office 值”

示例 Q：查询：从 SourceTable 中选择 CustID、Office

示例 S：表：CustID 的列表

因此，例如，如果我自己显示 Q 假设我有：

```
JONES1     Las Vegas
SMITH2     Miami 
```

但是 JONES1 在 S 中，所以我希望它实际显示

```
JONES1     Atlanta
SMITH2     Miami 
```

（当我拉起 Q 时，S 中的所有 custID 都应该显示 Atlanta）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:57:55.110

尝试以下几行：

```
 SELECT q.CustID, IIf(IsNull(s.Office), q.Office, s.Office) 
 FROM SourceTable q
 LEFT JOIN s
 ON q.CustID = s.CustID 
```

# javascript - 将突兀的 JavaScript 转为不突兀

> ID：15395965
> 
> 赞同：0
> 
> 时间：2013-03-13T20:37:34.577
> 
> 标签：javascript, unobtrusive

我正在努力了解如何将一段 javascript 从突兀变为不突兀，有人能解释一下吗？

这是脚本：

```
function limitText(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } else {
        limitCount.value = limitNum - limitField.value.length;          
    } 
```

这是 JSFiddle：http: [//jsfiddle.net/pxmmh/](http://jsfiddle.net/pxmmh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:54:04.593

不是太难。你甚至不需要 jQuery。

[http://jsfiddle.net/pxmmh/4/](http://jsfiddle.net/pxmmh/4/)

```
// your function you have now
function limitText(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } else {
        limitCount.value = limitNum - limitField.value.length;
    }
}

// bind event handlers to the DOM
var field = document.getElementById('limited');
field.onkeydown = function() {
    var counter = document.getElementById('limited-count');
    var limit = parseInt(field.dataset.limit, 10)
    limitText(field, counter, limit);
}; 
```

字段和计数器已被赋予 id，让我们能够找到它们。限制现在是一个`data-*`HTML5 属性，我们可以使用`.dataset`JavaScript 中的属性访问，它允许元素说出它自己的限制是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:40:39.240

在这种情况下，它并不是很突兀。如果 JS 关闭，则不会破坏任何重要内容。但是，您想要做的是在 onload 中附加事件，并在默认情况下隐藏或不存在“您还剩下 X 个字符”的段落。取消隐藏或添加相同的 onload，因为它仅在 JS 运行时才有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:45:07.763

如果你想要一个真正不引人注目的解决方案，一些 jQuery 将为你创造奇迹

```
$(document).ready(function () {

    $('#limitedtextfield').keyup(function () {
        limitText(this.form.limitedtextfield, this.form.countdown, 15);
    });

    $('#limitedtextfield').keydown(function () {
        limitText(this.form.limitedtextfield, this.form.countdown, 15);
    });

    function limitText(limitField, limitCount, limitNum) {
        if (limitField.value.length > limitNum) {
            limitField.value = limitField.value.substring(0, limitNum);
        } else {
            limitCount.value = limitNum - limitField.value.length;
        }
    }
}); 
```

请参阅此处的 JSFiddle [http://jsfiddle.net/x65Kw/](http://jsfiddle.net/x65Kw/)

# javascript - Ajax 调用从 IP 地址获取经度和纬度

> ID：15395968
> 
> 赞同：0
> 
> 时间：2013-03-13T20:37:43.200
> 
> 标签：javascript, ajax, url, ip, ip-address

您将如何进行 Ajax 调用，使用 IP 地址请求纬度和经度

还包括需要哪些参数，比如我可以请求哪个 url？

注意，我无法使用插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:40:34.100

jqlpLocation 正是为此而设计的 jQuery 插件。我建议您阅读它，看看它是否适合您的需求。

[http://jquerybyexample.blogspot.com/2012/09/get-ip-address-information-using-jquery.html](http://jquerybyexample.blogspot.com/2012/09/get-ip-address-information-using-jquery.html)

# php - 我想根据复选框的值显示来自数据库的结果。有任何想法吗？

> ID：15395976
> 
> 赞同：0
> 
> 时间：2013-03-13T20:38:14.097
> 
> 标签：php

这是我原来的问题的第 2 部分：

[任何想法为什么查询结果不显示为复选框？](https://stackoverflow.com/questions/15390597/any-ideas-why-results-of-query-are-not-being-displayed-as-checkboxes)

用户会看到带有值的复选框。

我们希望看到基于复选框显示的结果。

如果用户选中一个框，则显示与该复选框关联的值。

类似地，如果用户选中多个复选框，则复选框的值以逗号分隔的方式显示。

复选框标记已成功实现。

代码工作正常，如下所示：

```
 <form name ="checkForm" method="post" action="Search.php">
  <input type="checkbox" name="ckform1"
        onClick="checkAll(this.form,this)">Check/Uncheck All
        <br>
<?php

   // Connect to SQL Server database
   include("../dbConnect.php");

   // Construct query
     $sql = "SELECT * FROM Search WHERE resultType IS NOT NULL";

// Execute query
$stmt = sqlsrv_query( $conn, $sql);
if( $stmt === false )
{
     echo "Error in executing query.</br>";
     die( print_r( sqlsrv_errors(), true));
}

  while($row = sqlsrv_fetch_array($stmt,SQLSRV_FETCH_ASSOC)){
  echo '<input type="checkbox" name="ck[]"
  value="'.$row["resultType"].'"><font class=heading>'.$row["resultType"].'</font><br>';
  }
  // Free statement and connection resources
  sqlsrv_free_stmt($stmt);
  sqlsrv_close($conn);
  ?>
  <P><input type="submit" value="Go">
  </form> 
```

现在，我很难使用 Search.php。

这是应该根据选中的复选框或选中的复选框返回值的文件。

到目前为止，我没有收到错误。相反，我得到一个空白屏幕。

感谢你的协助

```
<?php

 $ckList = format($_GET["ck"]);

// Connect to SQL Server database
include("../dbConnect.php");

   if ( isset($_POST) && isset($_POST['Search']) )
    {
    $resultTypeWhereClause = '';

    if ( ! empty($_POST['ckList']) ) // if the ckoptions var is set, we'll add the values to the query
    {
        $optionsToSearch = is_array($_POST['ckList']) ? $_POST['ckList'] : array($_POST['ckList']);
        foreach ( $optionsToSearch as &$ckval )
        {
                // prevent sql injection
            $ckval = mysql_real_escape_string($ckval);
        }
        // add all values to an 'IN' clause
        $resultTypeWhereClause = "resultType IN ('" . implode("', '", $optionsToSearch) . "')";
    }

    if ( empty($resultTypeWhereClause) )
    {
        $resultTypeWhereClause = '1';
    }

    $found = array();
    // build the final query
    $sql = 'SELECT * FROM Search WHERE ' .$resultTypeWhereClause;

    // Execute query
    $stmt = sqlsrv_query( $conn, $tsql);
    if( $stmt === false )
    {
     echo "Error in executing query.</br>";
     die( print_r( sqlsrv_errors(), true));
    }
    $results = array();

// Retrieve and display the results of the query
$lastresultType = "";
while($row = sqlsrv_fetch_array($stmt,SQLSRV_FETCH_ASSOC)) {
    array_push($results,$row);
}

 echo json_encode($results);

// Free statement and connection resources
sqlsrv_free_stmt( $stmt);
sqlsrv_close( $conn);
   }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:26:37.683

您是否尝试过或 die() 是数据库在正确的位置，这会给您带来错误吗？

# python - python将dependency_links分发到本地git存储库

> ID：15395977
> 
> 赞同：0
> 
> 时间：2013-03-13T20:38:16.527
> 
> 标签：python, git, dependencies, distribute

可以说我有以下两个包：

```
/srv/share/python/core
/srv/share/python/package1 
```

对两者都有`package1`依赖关系的`core`远程 git 存储库位于：

```
/srv/git/core.git
/srv/git/package1.git 
```

如何在`package1`setup.py 中定义 setup() 以在安装`core`时自动从 /srv/git/core.git 安装`package1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:01:15.940

终于解决了，主要问题是分发已经过时，因为它无法识别`git+file` 运行“ `pip install -I distribute`”来更新分发到最新的 0.6.35

然后在 setup()

```
 install_requires = ['core'],
 dependency_links = ['git+file:///srv/git/core.git/#egg=core'], 
```

# go - 重新连接外部数据库的好模式是什么？

> ID：15395978
> 
> 赞同：3
> 
> 时间：2013-03-13T20:38:18.330
> 
> 标签：go

当我发现持久连接已关闭时，如何有效地重新连接到外部数据库？如果`ExtClient`失去连接，它将返回“Broken pipe” on `err`。

```
func ListenForWork(cmdChannel <-chan *WorkCmd) {
    for {
        cmd, ok := <- cmdChannel
        if !ok {
            break
        }
        for { // Retry request until it's OK (`Broken pipe error` might destroy it)
            _, err := ExtClient.Request(cmd.Key, cmd.Value)
            if err == nil {
                break
            }
        }
    }
} 
```

我怎样才能通过这种或另一种方法以有效的方式重新连接？也欢迎对此代码进行任何改进。`ExtClient`不会自行重新连接，并且是一个全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:40:20.230

如果您使用的是[mymysql](https://github.com/ziutek/mymysql)，那么您可以使用[自动重新连接接口](https://github.com/ziutek/mymysql#example-6---autoreconn-interface)。

从文档

```
import (
    "github.com/ziutek/mymysql/autorc"
    _ "github.com/ziutek/mymysql/thrsafe" // You may also use the native engine
)

// [...]

db := autorc.New("tcp", "", "127.0.0.1:3306", user, pass, dbname)

// Initilisation commands. They will be executed after each connect.
db.Register("set names utf8")

// There is no need to explicity connect to the MySQL server
rows, res, err := db.Query("SELECT * FROM R")
checkError(err)

// Now we are connected.

// It does not matter if connection will be interrupted during sleep, eg
// due to server reboot or network down. 
```

也就是说，通过阅读[sql 文档](http://golang.org/pkg/database/sql/)和[sql 驱动程序文档](http://golang.org/pkg/database/sql/driver/)以及相关代码来看，如果 SQL 驱动程序返回，`ErrBadConn`那么 sql 包将使用新连接重试。这只是在 2012 年 7 月添加的，因此 SQL 驱动程序可能还没有很好地支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:20:43.960

假设 ExtClient 有一个 Connect 或 Reconnect 方法。

并且还假设 BrokenPipe 错误被导出为可以再次匹配的变量。

那么这应该工作`if err == BrokenPipeErr { ExtClient.Connect(args ...SomeType) }`

这些都是很多假设，所以您可能应该告诉我们更多信息，例如您连接到的数据库。您正在使用哪个客户端库。和其他此类信息。

# c# - Parallel.Foreach 问题

> ID：15395979
> 
> 赞同：4
> 
> 时间：2013-03-13T20:38:20.050
> 
> 标签：c#

我有一个`Parallel.Foreach`让我悲伤的循环，想看看你们中的一个人是否可以对此有所了解。不幸的是，几乎找不到谷歌搜索。

这是结：

我的 foreach 循环：

```
string [] Ids = {........}; //a string array of ID's
using(IUnitOfWork uw = GetUnitOfWork())
     {
            Parallel.ForEach(Ids, currentRecord =>
            {
                var x = (from h in uw.GetRepository<EFEntity1>().AsQueryable()
                         join k in uw.GetRepository<EFEntity2>().AsQueryable()
                         on h.ID equals k.ID
                         join l in uw.GetRepository<EFEntity3>().AsQueryable() on 
                          h.FundAccount equals l.FundAccount
                         where h.ID == currentRecord
                         select new { h.x, h.y, h.z});
                foreach (var v in x)
                {
                    if (v.SomeMember == "foo")
                    {

                    }
                    Console.WriteLine("Output : {0} {1} {2} {3} {4} ", v.x, 
                                      v.y, v.z);
                }
            });
        } 
```

LINQ 语句是我`ArgumentExcpetion`抛出的一个说法：

> *已添加具有相同密钥的项目*

在这种情况下我对 foreach 循环的实现可能有什么问题的任何线索？

感谢支持。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-10T14:09:34.840

我通过将 using 括号移动到 Parellel 循环中解决了这个问题。原因是 dbcontext 不是线程安全的。

# c - 从文件读取到数组

> ID：15395986
> 
> 赞同：1
> 
> 时间：2013-03-13T20:39:00.600
> 
> 标签：c, io, fread

我正在尝试从文件中读取。我正在使用 fread()，但我不确定我是否正确地处理了这个问题。我想创建一个结构数组并继续从文件“f-reading”到数组中，如下所示：

```
//Get size of file
struct stat st;
stat(document, &st);
int size = st.st_size;

//Create appropriate array size of structs

struct Person person[size];

for(j = 0; j < size; j++) {
    fread(person[j].name, 1, 16, fp); //each name is truncated to 15 bytes on the file
    fread(person[j].text, 1, 24, fp);  //text is truncated to 24 on the file
} 
```

结构人看起来像这样：

```
struct Person {
    char name[16];
    char text[24];
}; 
```

我正确使用 fread() 吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:45:29.443

下面给出的代码在 for 循环中就足够了

```
fread(person[j], sizeof(struct Person), 1, fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:01:01.147

您应该检查 fread 函数调用是否成功地从数据流中读取了预期的字节数：

```
//Get size of file
struct stat st;
int name_bytes_read, text_bytes_read; // If using C11, use size_t instead
stat(document, &st);
int size = st.st_size;

//Create appropriate array size of structs

struct Person person[size];

for(j = 0; j < size; j++) {
    name_bytes_read = fread(person[j].name, 1, 16, fp); //each name is truncated to 15 bytes on the file
    if (name_bytes_read != 16) { 
      fputs ("Error reading name record", stderr); 
      exit(-1);
    }
    text_bytes_read = fread(person[j].text, 1, 24, fp);  //text is truncated to 24 on the file
    if (text_bytes_read != 24) {
      fputs ("Error reading text record", stderr);
      exit(-1); }
} 
```

进一步阅读：[http ://www.thegeekstuff.com/2012/07/c-file-handling](http://www.thegeekstuff.com/2012/07/c-file-handling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:31:25.880

通过 sizeof(struct Person) 增加 j 以避免 fread 问题或者您可以使用 feof 检查文件结尾

# python - 其他模块使用的假模块

> ID：15395988
> 
> 赞同：1
> 
> 时间：2013-03-13T20:39:04.817
> 
> 标签：python, unit-testing, mocking, python-unittest

是否有可能伪造我在测试中使用的其他模块使用（导入）的模块？

示例：这是我的 test.py：

```
import unittest 
import module1
//test code here
module1.some_method()
//test code here 
```

这是module1.py：

```
import module_i_want_to_fake
//module code here 
```

基于示例：问题是：我如何`module_i_want_to_fake`在 test.py中伪造

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:50:56.190

当您执行 时`import foo`，如果`sys.modules['foo']`已经存在，解释器只会返回它而不是执行新的导入。

因此，要伪造 out`module1`的`import`声明，只需在 load 之前填写值`module1`。这有点hacky，但非常简单。例如：

我的测试.py：

```
import sys
import unittest 
import my_fake_module
sys.modules['module_i_want_to_fake'] = my_fake_module
import module1
//test code here
module1.some_method()
//test code here 
```

模块1.py：

```
import module_i_want_to_fake
print(module_i_want_to_fake) 
```

这将打印出如下内容：

```
<module 'my_fake_module' from 'my_fake_module.pyc'> 
```

如果您需要`module1`更彻底地伪造（即使它试图自省模块），您可以创建一个新模块（通过`types.ModuleType`），其中的代码来自`my_fake_module`name `'module_i_want_to_fake'`，以及您想要的任何其他更改。

如果您需要比仅通过预先静态重命名模块更动态地执行此操作，您可以构建一个导入挂钩，如[PEP 302](http://www.python.org/dev/peps/pep-0302/)中所述。这需要您重新实现大量的导入机制，这在 2.x 中是一个巨大的痛苦，但[`importlib`](http://docs.python.org/3/library/importlib.html)在 3.1+ 中使它变得容易得多。

幸运的是，通常情况下，您不需要执行其中任何一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T16:53:57.550

在 python3 我这样做：

**在模块中创建简单的假类**

```
# module test.py
thismodule = sys.modules[__name__]
setattr(thismodule, "something", type("something", (), {})) 
```

这很酷，但您可能想要的是从配置数据文件生成。

**从 cfg 文件在模块中创建假类**

```
# module test.py
import configparser

cfg = configparser.ConfigParser()
cfg.read("/path/to/fname.ini")

for section in cfg.sections():
    name = cfg[str(section)]['name']
    setattr(thismodule, name, type(name, (), {})) 
```

好的，现在让我们在module1中尝试

```
# Import only the main module
import test

# now you can use as you want
test.something 
```

享受！！

# forms - 从表单提交中收集库存

> ID：15395989
> 
> 赞同：0
> 
> 时间：2013-03-13T20:39:04.960
> 
> 标签：forms, asp-classic, submission, collect

我使用.ASP创建了一个活动表单，活动表单是指人们可以选择他们想要参加的活动的表单。我想知道是否有办法收集提交数据，它会自动收集每个活动的库存. 问题是我们对于每个活动只有一定数量的插槽，并且想要一种简单的方法来知道插槽何时被填满，而不是添加几个不同的提交。

如果有人有任何建议，请告诉我。另外，如果我没有正确解释或使用正确的开发术语，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:36:45.943

向您的数据库表中添加一个整数列，名为“Places”或“Availability”，输入最初可用的位置数，然后每当有人书籍让您的 ASP 脚本按照“更新活动集 Places =（Places -1)”。然后，设置您的预订页面，使其仅显示可用性大于 0 的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:49:15.750

修复号码。个人活动数据库中的条目。前任。假设您希望“动作”活动只需要 5 个，那么一张动作表只需要 5 个输入。

# slickgrid - 分组时，如何按“groupingKey”排序？

> ID：15395992
> 
> 赞同：1
> 
> 时间：2013-03-13T20:39:10.233
> 
> 标签：slickgrid

我想知道是否可以在对“dataView”进行分组时按“groupingKey”进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:12:07.013

除了对or`groupingKey`的调用之外，您永远不应该使用其他任何东西。`expandGroup()``collapseGroup()`

要对组进行排序，`comparer`请在对 的调用中指定 a `setGrouping()`。[请参阅https://github.com/mleibman/SlickGrid/blob/master/examples/example-grouping.html](https://github.com/mleibman/SlickGrid/blob/master/examples/example-grouping.html)中的示例。

# php - AJAX 与 POST 和 PHP 返回纯文本 - apache 配置？

> ID：15395995
> 
> 赞同：1
> 
> 时间：2013-03-13T20:39:23.663
> 
> 标签：php, ajax, forms, apache, post

我在使用带有 Ajax 的 POST 然后使用 PHP 进行处理时遇到问题。

我目前正在研究这个示例并对其进行调整以满足我的需求： [http ://coursesweb.net/ajax/ajax-post-php](http://coursesweb.net/ajax/ajax-post-php)

我已经完全复制了 2 个示例文件，当我提交表单时，浏览器只会显示 PHP 文件的文本内容。

该页面底部的演示工作正常，所以我认为我的服务器配置一定有问题？（Apache 2.2.22 与 PHP 5.3.16）

标准 Ajax 请求正常工作，就像普通的 PHP Post 表单一样，问题仅在使用 Ajax 发布时出现。

任何帮助都是极好的！

如果你不想点击链接：test_form.php

```
<?php
// if data are received via POST
if (isset($_POST['nume']) && isset($_POST['mesaj'])) {
  // get data into variables, deleting the html tags
  $nume = strip_tags($_POST['nume']);
  $mesaj = strip_tags($_POST['mesaj']);

  // if the form fields are completed
  if (strlen($nume)>0 && strlen($mesaj)>0) {
    echo 'Welcome <b>'. $nume. '</b><br />The message you`ve sent: <pre>'. $mesaj. '</pre>';
  }
  else {
    echo 'Fill in all form fields';
  }
}
?> 
```

ajax_form.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<title>Example Ajax and Form</title>

<script type="text/javascript"><!--
// create the XMLHttpRequest object, according browser
function get_XmlHttp() {
  // create the variable that will contain the instance of the XMLHttpRequest object (initially with null value)
  var xmlHttp = null;

  if(window.XMLHttpRequest) {       // for Forefox, IE7+, Opera, Safari, ...
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {   // for Internet Explorer 5 or 6
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

// sends data to a php file, via POST, and displays the received answer
function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();     // calls the function for the XMLHttpRequest instance

  // gets data from form fields, using their ID
  var nume = document.getElementById('nume').value;
  var mesaj = document.getElementById('mesaj').value;

  // create pairs index=value with data that must be sent to server
  var  the_data = 'nume='+nume+'&mesaj='+mesaj;

  request.open("POST", php_file, true);         // sets the request

  // adds a header to tell the PHP script to recognize the data as is sent via POST
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  request.send(the_data);       // sends the request

  // Check request status
  // If the response is received completely, will be transferred to the HTML tag with tagID
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}
--></script>
</head>
<body>

<div id="resp">Here will be displayed the server response.</div><br />
<form action="test_form.php" method="post" name="form1" onsubmit="ajaxrequest('test_form.php', 'resp'); return false;">
  Your name: <input type="text" name="nume" id="nume" size="20" maxlength="33" /><br />
  Your message:<br />
  <textarea name="mesaj" id="mesaj" cols="25" rows="4"></textarea><br />
  <input type="submit" value="Send" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:53:51.910

我觉得很愚蠢……但我想通了。仅当您从 localhost 打开 html 页面时，发布请求才会起作用。我正在使用文件路径打开它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T20:45:12.250

If the browser is showing you the PHP source, then it isn't processing the request through PHP at all. This is either an Apache misconfiguration (most likely) or the PHP file is misnamed (Apache uses the filename to determine when it should pass through the PHP module.) If the file is named correctly, check your Apache configuration; you said that some PHP files are working, so it may be that the directory or vhost that the non-working PHP file resides in is not configured to use mod_php.

# c++ - 如果语句被跳过 C++

> ID：15395997
> 
> 赞同：-2
> 
> 时间：2013-03-13T20:39:30.557
> 
> 标签：c++, if-statement

```
for (i=0;i<3;i++)
{
    if(z == 3)
    {
        z = 0;
    }
    z++;
    if(!(ar[i][z] == 'X') & (z < 3))
    winrow == 0;
} 
```

当我逐行调试程序时，第二个 if 语句被跳过。一切都已初始化，这只是一个片段。有什么理由这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:44:16.160

`winrow == 0` is a typo that has no side effect so there's nothing to execute whether or not the `if` clause is true.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:44:55.033

You're saying:

```
winrow == 0; 
```

in the body of your if statement. This statement means nothing, it isn't assigned to anything, it doesn't have side affects. The compiler therefore likely (with optimizations on) will just skip it. You may mean to say `winrow = 0;`, which would assign 0 to `winrow`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:45:22.057

The second part of the code doesn't do anything.

```
winrow == 0 
```

checks if winrow is equal to 0 and that statement goes out of scope as soon you hit the brackets.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:43:41.990

可能你的条件不对。这是你试图得到的吗？

```
if (ar[i][z] != 'X' && z < 3) 
```