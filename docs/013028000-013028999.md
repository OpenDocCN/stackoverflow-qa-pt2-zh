# StackOverflow 问答 13028000-13028999

# objective-c - iOS GKSession 在一段时间后停止搜索设备

> ID：13028007
> 
> 赞同：0
> 
> 时间：2012-10-23T10:03:13.653
> 
> 标签：objective-c, gksession

我想开发一个可以使用蓝牙或 wifi 在 2 个或更多 iOS 设备之间发送数据的应用程序。我发现 GameKit 框架可以帮助我做到这一点。我的问题是：

1.  一段时间后没有找到任何设备，如何停止搜索设备进程？我已经实现了 GKPeerPickerController，当我按下按钮时，它将开始搜索设备进程。我想在 10 秒后如果没有找到设备，我会停止搜索并通知用户这里附近没有设备。

2.  我怎样才能为自己指定那个时间？是否有任何属性可供我设置，如我上面指出的 10 秒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:46:11.670

我发现我可以管理与 GKSession 的连接，它不需要使用 GKPeerPickerController。只需将 GKSession 的“可用”属性设置为 YES 或 NO 即可开始或停止搜索要连接的设备。

# php - 循环遍历两个数组并在无序列表中列出 NON 匹配项

> ID：13028009
> 
> 赞同：1
> 
> 时间：2012-10-23T10:03:18.707
> 
> 标签：php, arrays, multidimensional-array, array-difference

我有两个数组，我需要找出两者之间的差异并将它们显示在无序列表中。

我可以循环遍历主数组以进行单个匹配，但我不知道如何遍历主列表以获取多个键值并有效地执行此操作。

下面是每个数组的关键值的摘录：

要搜索的主阵列

```
foreach ( $levels as $level ) {
  $output .= '<li>' . $level['name'] . '</li>'; 
```

包含可能匹配的数组

```
foreach ( $login_member_levels as $level ) {
  $output .= '<li>' . $level_array[]=$level->level . '</li>'; 
```

为多维问题添加了信息...

这是我需要比较的两个多维数组，但子数组不匹配：

我需要在第一个数组 [levels][level_id] 和 [levels][level][id] 中进行比较

```
Array
(
  [success] => 1
  [member] => Array
    (
      [0] => Array
        (
          [ID] => 2
          [UserInfo] => Array
              (
                 [ID] => 2
                 [caps] => Array
                      (
                          [administrator] => 1
                      )
              )
          [Sequential] => 
          [Levels] => Array
            (
                [1347037874] => stdClass Object
                    (
                       [Level_ID] => 1347037874
                       [Name] => HFM-Cardiac Resistance Training Program
                       [Cancelled] => 
                    )

                [1347037875] => stdClass Object
                   (
                       [Level_ID] => 1347037875
                       [Name] => HFM-Official Heart Health Guide
                       [Cancelled] => 
                       [1347037876] => stdClass Object
                       (
                             [Level_ID] => 1347037876
                             [Name] => HFM-All Access Cardiac Success Club
                         [Cancelled] => 
                            )
                    )
        )
    ) 
```

这是第二个数组：

```
Array
(
    [success] => 1
    [levels] => Array
        (
            [level] => Array
                (
                    [0] => Array
                        (
                            [id] => 1347037871
                            [name] => HFM-Ask the Experts
                            [_more_] => /levels/1347037871
                        )
                    [1] => Array
                        (
                            [id] => 1347037874
                            [name] => HFM-Cardiac Resistance Training Program
                            [_more_] => /levels/1347037874
                        )
                    [2] => Array
                        (
                            [id] => 1347037875
                            [name] => HFM-Official Heart Health Guide
                            [_more_] => /levels/1347037875
                        )
                    [3] => Array
                        (
                            [id] => 1347037876
                            [name] => HFM-All Access Cardiac Success Club
                            [_more_] => /levels/1347037876
                        )
                )
        )
   [supported_verbs] => Array
        (
           [0] => GET
           [1] => POST
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:33:15.173

请注意，正如[Jod](https://stackoverflow.com/a/13038731/1032370)正确建议的那样，array_diff 函数会将 array1***与***array2 进行比较并返回差异。
例子：

```
$array1 = array("green", "red", "blue", "red");
$array2 = array("green", "yellow", "brown");
$result = array_diff($array1, $array2);

var_dump($array1);
var_dump($array2);
var_dump($result); 
```

会给你：

```
// Array1
array(4) {
  [0] => "green"
  [1] => "red"
  [2] => "blue"
  [3] => "red"
}

// Array2
array(3) {
  [0] => "green"
  [1] => "yellow"
  [2] => "brown"
}

// array_diff result
array(3) {
  [1] => "red"
  [2] => "blue"
  [3] => "red"
} 
```

因为这些值存在于array1 但不在array2·

如果您有兴趣获取一个包含两个（或多个）数组***之间***的所有差异（作为值）的数组，我为此编写了一个函数：

```
function array_diff_all()
{
    $arguments = func_get_args();

    $merged         = array();    
    $intersected    = $arguments[0];
    for ($i = 0; $i < count($arguments); $i++)
    {
        $merged         = array_merge($merged, $arguments[$i]);
        $intersected    = array_intersect($intersected, $arguments[$i]);
    }

    return array_values(array_filter( array_unique(array_diff($merged, $intersected)) ));
} 
```

用法示例：（同上）

```
$array1 = array("green", "red", "blue", "red");
$array2 = array("green", "yellow", "brown");
$result = array_diff_all($array1, $array2);

var_dump($array1);
var_dump($array2);
var_dump($result); 
```

会给你

```
// Array1
array(4) {
  [0] => "green"
  [1] => "red"
  [2] => "blue"
  [3] => "red"
}

// Array2
array(3) {
  [0] => "green"
  [1] => "yellow"
  [2] => "brown"
}

// array_diff_all result
array(4) {
  [0] => "red"
  [1] => "blue"
  [2] => "yellow"
  [3] => "brown"
} 
```

**请注意：**
1）它仅适用于索引数组，如果您使用散列（关联数组），它仅在键是唯一的情况下才能正常工作。
2) 结果数组被重新索引，这意味着与原始值相比，值可以具有不同的索引。
3) 删除重复值并返回唯一的结果数组。
4）您可以一次比较多个数组。
例子：

```
$first  = array('foo', 'moo', 'zoo');
$second = array('foo', 'done', 'gone');
$third  = array('foo', 'mix', 'zoo');

var_dump( array_diff_all($first, $second, $third) ); 
```

将输出：

```
array(5) {
  [0] => "moo"
  [1] => "zoo"
  [2] => "done"
  [3] => "gone"
  [4] => "mix"
} 
```

**编辑：**
对于您问题的第二部分：
您不能将上述方法用于您的具体情况，因为您有两个完全不同的数组要比较，而且第一个包含对象。
要解决您的问题，您需要：
**A)**了解如何访问第一个数组的“级别”数组。在我看来，您必须遍历 $array1['member']，我猜它们每个都有一个 'levels' 数组。
它可以是这样的：

```
foreach ($array1['member'] as $member)
{
    $levels = $member['levels'];
    ...
} 
```

此时 $levels 应该是一个对象数组，如：

```
[Levels] => Array
    (
        [1347037874] => stdClass Object
            (
        [Level_ID] => 1347037874
        [Name] => HFM-Cardiac Resistance Training Program
        [Cancelled] => 
    )

    [1347037875] => stdClass Object
    (
                [Level_ID] => 1347037875
        [Name] => HFM-Official Heart Health Guide
        [Cancelled] => 
            )

    [1347037876] => stdClass Object
    (
        [Level_ID] => 1347037876
            [Name] => HFM-All Access Cardiac Success Club
        [Cancelled] => 
            )
    ) 
```

**B）**这个想法是要注意你需要比较的level_id是这个'levels'数组的键，而array2是一个'普通'多维数组（我的意思是不包含对象）......所以我们可以安全地使用内置 -在 php 的数组函数中。
我们可以假设 level_id 足够复杂以至于在 $array2 中是唯一的，所以我们只能检查某个 level_id 是否存在***于***$array2 中（递归地）作为一个值，而不关心比较其中的 'id' 键。

为此，您需要：
**C）**我编写的递归 in_array 函数：

```
function in_array_recursive($needle, $haystack)
{ 

    $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($haystack)); 

    foreach ($it AS $element)
        if ($element === $needle)
            return true; 

    return false; 
} 
```

**D）**创建一个助手用作array_filter的回调函数

```
function array_diff_helper($var)
{
    global $array2;
    return !(in_array_recursive(trim($var), $array2));
} 
```

**请注意**，如果不同，请在此处使用第二个数组的名称。
**E）**最后你可以得到level_ids的差异：

```
$diff = array_filter(array_keys($levels), "array_diff_helper"); 
```

所以..**你需要的循环可能很简单**：

```
foreach ($array1['member'] as $member)
{
    $not_matching_ids = array_filter(array_keys($member['levels']), "array_diff_helper");
} 
```

希望这会有所帮助，干杯！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:28:40.950

用于`array_diff()`生成不匹配值的数组。

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

# debian - GCC 4.6.3 无法安装 Debian

> ID：13028011
> 
> 赞同：2
> 
> 时间：2012-10-23T10:03:23.717
> 
> 标签：debian, gcc4, hiphop

我在 Debian Squeeze 上安装 gcc 4.6.3 时遇到问题。当前已安装 4.4，但我需要 4.6.x 才能运行 php-hiphop。我已经尝试寻找类似的问题，但没有发现任何与我的错误有关的问题。

我使用以下说明安装：

```
wget ftp://ftp.gnu.org/gnu/gcc/gcc-4.6.3/gcc-4.6.3.tar.gz
tar -xzvf gcc-4.6.3.tar.gz
cd gcc-4.6.3
./contrib/download_prerequisites
cd ..
mkdir objdir
cd objdir
£PWD/../gcc-4.6.3/configure --prefix=/opt/gcc-4.6.3
make
make install 
```

在`make`命令下，一切似乎都很好，持续了 20 分钟或更长时间，BLAMO！这弹出：

```
make[5]: Entering directory `/root/objdir/x86_64-unknown-linux-gnu/32/libgcc'
# If this is the top-level multilib, build all the other
# multilibs.
/root/objdir/./gcc/xgcc -B/root/objdir/./gcc/ -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/bin/ -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/lib/ -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/include -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/sys-include    -g -O2 -m32 -O2  -g -O2 -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED -fno-stack-protector   -I. -I. -I../../.././gcc -I/root/objdir/../gcc-4.6.3/libgcc -I/root/objdir/../gcc-4.6.3/libgcc/. -I/root/objdir/../gcc-4.6.3/libgcc/../gcc -I/root/objdir/../gcc-4.6.3/libgcc/../include -I/root/objdir/../gcc-4.6.3/libgcc/config/libbid -DENABLE_DECIMAL_BID_FORMAT -DHAVE_CC_TLS  -DUSE_TLS -o _muldi3.o -MT _muldi3.o -MD -MP -MF _muldi3.dep -DL_muldi3 -c /root/objdir/../gcc-4.6.3/libgcc/../gcc/libgcc2.c \
          -fvisibility=hidden -DHIDE_EXPORTS
In file included from /usr/include/features.h:378:0,
                 from /usr/include/stdio.h:28,
                 from /root/objdir/../gcc-4.6.3/libgcc/../gcc/tsystem.h:87,
                 from /root/objdir/../gcc-4.6.3/libgcc/../gcc/libgcc2.c:29:
/usr/include/gnu/stubs.h:7:27: fatal error: gnu/stubs-32.h: No such file or directory
compilation terminated.
make[5]: *** [_muldi3.o] Error 1
make[5]: Leaving directory `/root/objdir/x86_64-unknown-linux-gnu/32/libgcc'
make[4]: *** [multi-do] Error 1
make[4]: Leaving directory `/root/objdir/x86_64-unknown-linux-gnu/libgcc'
make[3]: *** [all-multi] Error 2
make[3]: Leaving directory `/root/objdir/x86_64-unknown-linux-gnu/libgcc'
make[2]: *** [all-stage1-target-libgcc] Error 2
make[2]: Leaving directory `/root/objdir'
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory `/root/objdir'
make: *** [all] Error 2
root@localvm:~/objdir# 
```

我知道是什么原因造成的，找不到 stubs.h，但我该如何解决这个问题？我需要一个单独的库，还是有其他问题？提前致谢。

**编辑**下载多库依赖项解决了上述错误。make 命令运行了 5 个小时，是的 5 个小时左右，然后由于另一个与 zips 和 jars 相关的错误而崩溃，我很难过。

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... mawk
checking whether make sets $(MAKE)... yes
checking for style of include used by make... GNU
checking dependency style of /root/objdir/./gcc/xgcc -B/root/objdir/./gcc/ -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/bin/ -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/lib/ -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/include -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/sys-include   ... gcc3
checking dependency style of  /root/objdir/./gcc/xgcc -shared-libgcc -B/root/objdir/./gcc -nostdinc++ -L/root/objdir/x86_64-unknown-linux-gnu/libstdc++-v3/src -L/root/objdir/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/bin/ -B/opt/gcc-4.6.3/x86_64-unknown-linux-gnu/lib/ -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/include -isystem /opt/gcc-4.6.3/x86_64-unknown-linux-gnu/sys-include   ... gcc3
checking for x86_64-unknown-linux-gnu-as... /root/objdir/./gcc/as
checking for x86_64-unknown-linux-gnu-ld... /root/objdir/./gcc/collect-ld
checking for x86_64-unknown-linux-gnu-ar... ar
checking for x86_64-unknown-linux-gnu-ranlib... ranlib
checking for x86_64-unknown-linux-gnu-dlltool... dlltool
checking for gawk... (cached) mawk
checking for jar... no
checking for fastjar... no
checking for gjar... no
checking for zip... no
checking for unzip... unzip
configure: error: cannot find neither zip nor jar, cannot continue
make[1]: *** [configure-target-libjava] Error 1
make[1]: Leaving directory `/root/objdir'
make: *** [all] Error 2
root@localvm:~/objdir# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:06:40.860

我认为您需要 multilib 支持，因为您正在尝试在 64 位机器上安装 32 位库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T11:24:31.800

感谢注销解决了我最初的问题，我整理了后来遇到的问题。需要安装 unzip6.0 和 zip3.0 才能完成`make`操作。遵循以下命令：

```
wget ftp://ftp.info-zip.org/pub/infozip/src/unzip60.tgz
gunzip unzip60.tgz
tar -xvf unzip60.tar
cd unzip60
make -f unix/Makefile generic
make -f unix/Makefile install 
```

和 zip3.0 一样

```
wget ftp://ftp.info-zip.org/pub/infozip/src/zip30.tgz
gunzip zip30.tgz
tar -xvf zip30.tar
cd zip30
make -f unix/Makefile generic
make -f unix/Makefile install 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-03T13:36:17.350

作为 boundless08 的第二个问题和答案的旁注：在 Debian（可能是 Ubuntu）上安装 zip 似乎就足够了：

```
sudo apt-get install zip 
```

（我会写评论，但我似乎没有足够的声誉！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T12:15:54.350

Disable multilib support for GCC configuration using below option while Compiling.

```
 $ ./configure --prefix=$GCC_PREFIX \
    --enable-shared \
    --disable-multilib \ 
```

# trigger.io - TriggerIO 中数据角色的目的是什么？

> ID：13028020
> 
> 赞同：1
> 
> 时间：2012-10-23T10:03:55.990
> 
> 标签：trigger.io

在 TriggerIO 模板文件中看到的 div 'data-role' 选项的目的是什么？我是否可以假设我可以忽略这一点并像构建一个普通的 HTML5 网站一样构建我的应用程序？或者我是否需要使用不同的标签选项来启动 CSS 选择器等？关于您的 TriggerIO 应用程序与您如何编写普通 HTML5 应用程序之间的真正差异似乎没有太多信息。

我正在创建一个儿童故事应用程序，您可以在其中查看图像和一些文本，然后滑动到下一页）。我应该使用画布来加载图像和文本，还是最好使用旧学校的 img 标签和其他标记？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:16:38.807

使用 TriggerToolkit 创建新应用程序时获得的示例应用程序使用 jQuery mobile。jQuery mobile 使用的`data-role`属性：

> 在body中，一个data-role为page的div是用来描绘页面的包装器，里面添加了header bar (data-role="header")和content region (data-role="content")创建一个基本页面（这些都是可选的）。这些数据属性是贯穿 jQuery Mobile 的 HTML5 属性，用于将基本标记转换为增强型和样式化的小部件。

来自：http: [//jquerymobile.com/demos/1.2.0/docs/about/getting-started.html](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)

您可以删除所有这些并使用您在创建网站时通常使用的任何标记、样式表和 JavaScript。我肯定会推荐使用`<img>`和常规文本，而不是在`<canvas>`. 我的建议是“试试看”，将开发视为移动网站，但资产存储在本地并能够利用[伪造 API](http://docs.trigger.io/en/v1.4/modules/mobile/index.html)。

# ms-word - 用visualforce页面显示一个word Doc

> ID：13028032
> 
> 赞同：0
> 
> 时间：2012-10-23T10:05:04.120
> 
> 标签：ms-word, editor, salesforce, visualforce

我想知道如何在visualforce页面中显示word文档的内容，即在“**附件**”或“**内容”中。**我不仅需要查看文本，还需要编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:24:04.340

This will not be possible without ActiveX. The only possible solution is to have them edit and upload back. Here is something I would implement:

**1\. Use documents instead of attachments/Content
2\. Create a VF page to display the shared documents/own documents (hyperlink in VF to the doc. record)
3\. Create a link to document to view/edit it. (Custom Apex Dev.)
i.e. Using Page Reference, redirect them to '/servlet/servlet.FileDownload?file=IDofthedocument'**

I think this should be good enough to not to show the main documents tab (if you dont want the users messing around with the data) and get the functionality working.

***I can post the code if required. Please let me know if this helps!***

# amazon-ec2 - AWS 上的 Drupal 用于 3000 个用户，使用什么实例？

> ID：13028036
> 
> 赞同：2
> 
> 时间：2012-10-23T10:05:13.610
> 
> 标签：amazon-ec2, drupal-7

我正在考虑在 Amazon Web 服务上安装 Drupal 来托管员工培训网站和员工通讯。没有繁重的自定义编码，只是一个非常标准的 drupal 安装。

日常使用量会非常低，但一个小时内会有近 3000 名用户访问该网站。

关于使用哪种实例大小的任何建议？如果使用负载均衡器？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:47:37.427

它取决于许多因素。这些因素围绕着一个问题：您的优化程度如何？如果您没有优化，我不确定即使是 7.2 GB 也足够了。如果正确优化，它可能会。

优化提示？告诉我们这个网站是关于什么的。大部分是静态文件，没想到有很多用户真正登录？您必须已安装[BOOST](http://drupal.org/project/boost)。另外，使用 aws cloudfront 并获得一个 3.4 GB 的实例，应该足够了。（不用说，所有静态文件都应该转到 S3）。

你的意思是一小时内会有3000个用户登录吗？好吧，这可能很棘手......如果用户激增只是几个小时，不要便宜。只需几个小时即可获得一个巨大的实例。这笔钱值得你做的所有优化......

# mysql - 使用子查询选择每个学生的出勤率的 SQL 查询不能使用父查询中的行

> ID：13028037
> 
> 赞同：1
> 
> 时间：2012-10-23T10:05:15.080
> 
> 标签：mysql, sql, subquery

我在 SQL 中遇到问题，我正在尝试在我正在构建的注册系统中计算学生出勤率，但是它不允许我在子查询中使用父列，

```
SELECT A.student_id, TRUNCATE((100 - ((100/B.reg_num) * C.abs_num)), 0) AS attendance FROM
students A
JOIN (
SELECT COUNT(*) AS reg_num
FROM students
JOIN seminargroup_student ON seminargroup_student.student_id = students.student_id
JOIN seminar_group ON seminar_group.seminar_group_id = seminargroup_student.seminar_group_id
JOIN modules ON modules.module_id = seminar_group.seminar_group_module_id
JOIN register_seminar ON register_seminar.seminar_id = seminar_group.seminar_group_id
JOIN registers ON registers.register_id = register_seminar.register_id
WHERE modules.module_id =1 AND students.student_id = A.student_id
) B
JOIN (
SELECT COUNT(*) AS abs_num
FROM students
JOIN seminargroup_student ON seminargroup_student.student_id = students.student_id
JOIN seminar_group ON seminar_group.seminar_group_id = seminargroup_student.seminar_group_id
JOIN modules ON modules.module_id = seminar_group.seminar_group_module_id
JOIN absence ON students.student_id = absence.student_id
WHERE modules.module_id =1 AND students.student_id = A.student_id
) C 
```

这将返回：#1054 - 'where 子句' 中的未知列 'A.student_id'

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:19:16.473

> 它不会让我在子查询中使用父列

一般来说，您不需要在 FROM 中的子查询中引用父级。

相反，您只需将您的加入字段添加到子查询中的`SELECT`和`GROUP BY`子句中，然后加入

例如

```
SELECT students.student_id, 
       Truncate(( 100 - ( ( 100 / b.reg_num ) * c.abs_num ) ), 0) AS attendance 
FROM   students 
       JOIN (SELECT a.studentid, 
                    Count(*) AS reg_num 
             FROM   students A 
                    JOIN seminargroup_student 
                      ON seminargroup_student.student_id = A.student_id 
                    JOIN seminar_group 
                      ON seminar_group.seminar_group_id = 
                         seminargroup_student.seminar_group_id 
                    JOIN modules 
                      ON modules.module_id = 
                         seminar_group.seminar_group_module_id 
                    JOIN register_seminar 
                      ON register_seminar.seminar_id = 
                         seminar_group.seminar_group_id 
                    JOIN registers 
                      ON registers.register_id = register_seminar.register_id 
             GROUP  BY a.studentid) A 
         ON students.studentid = a.student.id 
       JOIN (SELECT a.studentid, 
                    Count(*) AS abs_num 
             FROM   students aA 
                    JOIN seminargroup_student 
                      ON seminargroup_student.student_id = a.student_id 
                    JOIN seminar_group 
                      ON seminar_group.seminar_group_id = 
                         seminargroup_student.seminar_group_id 
                    JOIN modules 
                      ON modules.module_id = 
                         seminar_group.seminar_group_module_id 
                    JOIN absence 
                      ON a.student_id = absence.student_id 
             GROUP  BY a.studentid) b 
         ON students.studentid = b.student.id 
```

作为旁注，如果您使用左连接并在 PK 字段上而不是在 * 上执行 DISTINCT COUNT，则不必执行两个子查询

```
SELECT 
    A.student_id, 
    TRUNCATE((100 - ((100/counts.reg_num) * counts.abs_num)), 0) AS attendance
FROM
students A   
JOIN 
(SELECT 
    COUNT(DISTINCT absence.absence_id) AS abs_num , --OR whatever the PK is
    COUNT(DISTINCT registers.regeister_id) as reg_num,
    students.student_id

FROM   students 
       JOIN seminargroup_student 
         ON seminargroup_student.student_id = students.student_id 
       JOIN seminar_group 
         ON seminar_group.seminar_group_id = 
            seminargroup_student.seminar_group_id 
       JOIN modules 
         ON modules.module_id = seminar_group.seminar_group_module_id 

       LEFT JOIN register_seminar 
         ON register_seminar.seminar_id = seminar_group.seminar_group_id 
       LEFT JOIN registers 
         ON registers.register_id = register_seminar.register_id   

       LEFT JOIN absence 
         ON students.student_id = absence.student_id 
GROUP BY
    students.student_id) COUNTS
ON a.student_id = coutnts.student_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:22:47.100

尝试将您的查询重写为：

```
SELECT students.student_id, TRUNCATE((100 - ((100/B.reg_num) * C.abs_num)), 0) AS attendance FROM 
students 
JOIN ( 
SELECT COUNT(*) AS reg_num 
FROM students A
JOIN seminargroup_student ON seminargroup_student.student_id = A.student_id 
JOIN seminar_group ON seminar_group.seminar_group_id = seminargroup_student.seminar_group_id 
JOIN modules ON modules.module_id = seminar_group.seminar_group_module_id 
JOIN register_seminar ON register_seminar.seminar_id = seminar_group.seminar_group_id 
JOIN registers ON registers.register_id = register_seminar.register_id 
HAVING modules.module_id =1 AND students.student_id = A.student_id 
) B 
JOIN ( 
SELECT COUNT(*) AS abs_num 
FROM students A
JOIN seminargroup_student ON seminargroup_student.student_id = A.student_id 
JOIN seminar_group ON seminar_group.seminar_group_id = seminargroup_student.seminar_group_id 
JOIN modules ON modules.module_id = seminar_group.seminar_group_module_id 
JOIN absence ON A.student_id = absence.student_id 
HAVING modules.module_id =1 AND students.student_id = A.student_id 
) C 
```

**UPD**：WHERE 子句被 HAVING 替换，别名被移动到子查询中。由于在 SELECT 之前计算了 WHERE，可能会导致错误。

这些问题也可以帮助您解决问题：
1.[在 Where 子句中的未知列](https://stackoverflow.com/questions/153598/unknown-column-in-where-clause)
2\. [WHERE 与 HAVING](https://stackoverflow.com/questions/2905292/where-vs-having)

# ajax - 通过 ajax 保护登录过程的最佳方法是什么

> ID：13028040
> 
> 赞同：0
> 
> 时间：2012-10-23T10:05:23.287
> 
> 标签：ajax, zend-framework, login, zend-auth

当您通过 ajax 发布表单时，您可以在那里以纯文本形式读取密码。我认为这是安全问题。例如，哪些可能性是隐藏密码或不允许在萤火虫控制台中读取密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:13:18.430

当您不使用 HTTPS 时，没有什么是真正安全的。攻击者可以拦截您的 Ajax JS 代码并对您的登录过程进行中间人攻击。

使用 HTTPS。

# wcf - 通过 HTTP 和 HTTPS 实现服务时 WCF 失败

> ID：13028041
> 
> 赞同：0
> 
> 时间：2012-10-23T10:05:24.903
> 
> 标签：wcf

```
<system.serviceModel>
<services>
<service name="foo">
<endpoint address="" behaviorConfiguration="testbehaviour" binding="webHttpBinding" contract="testcontact" bindingConfiguration="webBinding" />
<endpoint address="" behaviorConfiguration="testbehaviour" binding="webHttpBinding" contract="testcontact" bindingConfiguration="webBindingHttps" />
</service>
</services>
<system.serviceModel> 
```

如上面的 web.config 摘录所示，在我们的 windows server 2008 机器上，我们有一个可以通过 HTTP 和 HTTPS 访问的端点。

我刚刚安装了服务器 2012（使用 iis8），现在我收到消息“找不到与具有绑定 WebHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]。”

非常奇怪的是 - 如果我将一个`endpoint`元素注释掉（只留下一个活动端点），那么剩下的端点会正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:48:51.903

我在 IIS 中错误地设置了站点 - 我为 HTTP 版本和 HTTPS 版本创建了一个单独的网站，但实际上它们应该是同一个网站，但具有 HTTPS 和 HTTP 绑定

# bash - 如何在 shell 脚本中进行异常处理？

> ID：13028044
> 
> 赞同：0
> 
> 时间：2012-10-23T10:05:32.880
> 
> 标签：bash, shell, sh, system-administration

> **可能重复：**
> [BASH 中的错误处理](https://stackoverflow.com/questions/64786/error-handling-in-bash)

我有一个部署脚本，我想在 ubuntu shell 脚本（即 bash 脚本）中进行异常处理。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:22:12.233

我不确定您所说的异常处理是什么意思，但是如果您正在寻找`try`和`catch`（或类似的东西），那么您就不走运了。有`set -e`，但我不会说这甚至很接近。我能想到的最接近的是 ERR 信号陷阱（ERR 是假信号）

例如;

```
trap 'echo [$LINENO] Error: $?' ERR 
```

在这种情况下，我们只显示行号和返回代码，但您可以将任何代码放在引号内，包括函数调用。失败的定义是一个非零的 $?。它不会针对条件或算术结构执行，也不会带入函数中。

陷阱可以通过以下方式“关闭”：

```
trap – ERR 
```

另请参阅 DEBUG 假信号。

# javascript - 即使找到父级，父级上的 toggleClass() 也不起作用

> ID：13028046
> 
> 赞同：1
> 
> 时间：2012-10-23T10:05:54.253
> 
> 标签：javascript, jquery, html

嗨，我在我的页面中重复了以下 HTML（显然名称、for 和 id 属性在每个实例中都发生了变化）：

```
<div class="funkyCheckBox">
<label for="uniqueName"> Whatever Text </label>
<input type="checkbox"  name="uniqueName" id="uniqueName" />
</div> 
```

这对某些 CSS 的作用是使外观看起来像一个大按钮，隐藏输入，我根据输入的检查值向 div 添加一个类。我为此使用以下 JavaScript /jQuery

```
$(".funkyCheckBox").live("click, tap", function(event){
    $(this).toggleClass("funkyCheckBoxActive");
    var nextCheckBox = $(this).find("input[type=checkbox]");
    nextCheckBox.prop("checked", !nextCheckBox.prop("checked"));
}); 
```

现在这一切都很好，但是在测试期间我注意到如果您单击标签文本，则不会应用该类并且不会切换输入的值...因此我添加了以下内容...

```
$(".funkyCheckBox label").live("click, tap", function(event){                  
    $(this).parent("div").toggleClass("funkyCheckBoxActive");
    var nextCheckBox = $(this).next("input[type=checkbox]");
    nextCheckBox.prop("checked", !nextCheckBox.prop("checked"));
}); 
```

现在这很好，因为现在单击标签文本会更改输入的值，但是父 DIV 没有采用/切换“funkyCheckBoxActive”类。我不确定为什么会`console.log($(this).parent("div"))`在回调函数中使用，并且正在输出 dom 对象的属性。有谁知道为什么我`toggleClass`的没有被申请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T05:37:17.283

根据 jQuery 的版本，您的代码是否可以工作。请注意，当您单击引用它的标签时，浏览器已经切换了该复选框；所以你只需要这样做：

```
$('#uniqueName').change(function() {
    $(this).parents("div").toggleClass("funkyCheckBoxActive");
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-23T10:15:28.503

请使用“on”方法而不是“live”，因为它已被弃用。LABEL Tag 中的“for”属性也指向现有的 Id。

这是更正后的工作代码：

```
<div class="funkyCheckBox">
    <label for="uniqueName"> Whatever Text </label>
    <input type="checkbox"  name="uniqueName" id="uniqueName" />
</div> 
```

和

```
$(".funkyCheckBox label").click(function(event){
     $(this).parent("div").toggleClass("funkyCheckBoxActive");

     var nextCheckBox = $(this).next("input[type=checkbox]");
     var nextCheckBoxValue = nextCheckBox.val();

     nextCheckBox.val(! nextCheckBoxValue);
}); ​ 
```

​</p>

编辑：这里是 jsFiddle 链接

[http://jsfiddle.net/RUYWT/](http://jsfiddle.net/RUYWT/)

**EDIT2：** @Mike Sav：我已经修改了您的代码，现在它正在处理所有可能的情况：http: [//jsfiddle.net/RUYWT/11/](http://jsfiddle.net/RUYWT/11/)

# c - 用布尔值告诉 VX-Tasking “bool”？

> ID：13028048
> 
> 赞同：2
> 
> 时间：2012-10-23T10:05:57.570
> 
> 标签：c, eclipse, misra

我正在使用 Tasking VX 工具集（基于 Eclipse）并且有一个我无法解决的相当基本但基本的问题......我已经 RTFMed 并且仍然完全不明智。

想象一下简单的代码片段：

```
#include <stdbool.h>

bool myFlag = false; 
```

如果我启用 MISRA-C 检查，我会得到以下信息：

```
MISRA-C rule 10.1 violation: [R] restrict the use of implicit conversions for integer types 
```

Eclipse 设置为 C99 实现，根据[标准库定义](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdbool.h.html)，`stdbool.h`定义为：

```
#define bool  _Bool
#define true  1
#define false 0 
```

我假设这个错误是因为`#define false 0`该工具隐式转换为 bool？

注意：如果我进行分配，则错误将被删除：

```
 bool myFlag = (bool)false; 
```

但是（恕我直言）这是在掩盖问题，而不是解决它，我真的不想放弃每一项任务。

诸如 LINT 之类的工具允许您指定 bool 类型来阻止这些误报......我需要 Eclipse/Tasking 的等价物

* * *

所以我的问题是：

**我怀疑某处有一个工具选项可以告诉 TASKING 那`bool`是布尔类型，因此`false`可以`true`使用吗？**

有没有？

{请不要在 [on this thread] 讨论 MISRA 的优点（或其他方面）}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:18:57.627

MISRA 规则 10.1 说

> （规则 10.1）如果出现以下情况，整数类型表达式的值不应隐式转换为不同的基础类型：
> 
> a）它不是转换为具有相同符号的更广泛的整数类型，或
> 
> b) 表达式很复杂，或
> 
> c) 表达式不是常量并且是函数参数，或者
> 
> d) 表达式不是常量，是返回表达式

```
#include <stdbool.h>

bool myFlag = false; 
```

是相同的：

```
_Bool myFlag = 0; 
```

`0`是`int`有符号整数类型但又`_Bool`是无符号整数类型的类型。您正在将有符号类型的值隐式转换为无符号类型的值，因此您违反`a)`了 MISRA 规则 10.1。

请注意，如果您使用的是 MISRA-C:2004（我认为 MISRA-C:2012 尚未发布），则在发布时仅考虑了 C90，并且`_Bool`是 C99 的补充。正如我在评论中所写，您可以使用这样的演员来摆脱警告：

```
bool myFlag = (bool) false; 
```

这就是 MISRA 的美妙之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:26:06.457

似乎没有办法解决它，但你可以自己定义 bool ：

```
typedef enum _bool { false = 0, true = 1 } bool;
bool x = false; 
```

这应该通过严格的检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:55:06.517

您可以`#undef` `true`然后将它们定义为使 MISRA 的东西满意的新值`false`。`#include <stdbool.h>`

C99 和 C11 允许这种做法作为过时的功能。

# .htaccess - 子域通配符 htaccess 重定向到新域

> ID：13028050
> 
> 赞同：3
> 
> 时间：2012-10-23T10:06:03.267
> 
> 标签：.htaccess, redirect, wildcard

我想将我的一个网站重定向到另一个域。

情况：

[旧] *.example.com [新] *.example.net

现在我的 htaccess 中有这个

```
#RewriteCond %{HTTP_HOST} ^(.*).allwebsitestats.com [NC]
#RewriteRule ^(.*)$ http://$1.allwebsitestats.nl [R=301,L] 
```

结果；

请求 [old] *.example.com 结果为 [new] .example.net，问题是它没有获得通配符子域。

谢谢！

问候，尼克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:18:09.483

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(.+?)\.allwebsitestats\.com$ [NC]
RewriteRule ^ http://%1.allwebsitestats.nl%{REQUEST_URI} [R=301,L] 
```

# video - ONVIF 是否提供用于从网络摄像机检索图像的 API？

> ID：13028051
> 
> 赞同：1
> 
> 时间：2012-10-23T10:06:05.227
> 
> 标签：video, streaming, onvif

我正在尝试从网络摄像机中检索图像。我可以使用 MJPEG 做到这一点，但有人告诉我，我可以使用 ONVIF SDK 做到这一点。真的吗？

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:18:35.870

在视频检索的一部分中，ONVIF 基本上会将您重定向到 RTSP/RTP。

[http://www.onvif.org/specs/stream/ONVIF-Streaming-Spec-v210.pdf](http://www.onvif.org/specs/stream/ONVIF-Streaming-Spec-v210.pdf)

```
5
Live Streaming
  This section describes real-time streaming of video, audio and metadata. 
  There is no specific service associated with the real-time streaming. 
  The real-time configurations via Web Service commands are defined in the 
  Media Service and the ReceiverService.

5.1
Media stream protocol

5.1.1
Transport format
  Real-time Transport Protocol (RTP) is a media transfer protocol 
  (see Section 5.1.2). The following four sections describe RTP data transfer. 
```

# joomla - 在Joomla 2.5 前端显示文章列表

> ID：13028055
> 
> 赞同：-1
> 
> 时间：2012-10-23T10:06:16.560
> 
> 标签：joomla, joomla2.5

嗨，我如何在前端 Joomla 2.5 中显示文章列表。我是 Joomla 2,5 的新手![在此处输入图像描述](../Images/fdfd73bfa8e0ca03c66cc0d9d54e4bd8.png)请帮帮我？我将布局选项更改为列表，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:07:58.573

如果您不想使用菜单，请在自定义页面中使用查询：-

```
<?php
$db = &JFactory::getDBO();
$query = "SELECT id, title FROM #__content WHERE state = '1' ORDER BY ordering";
$db->setQuery($query);
$rows = $db->loadObjectList();
?>
<select id="s_articles" name="s_articles">
<?php foreach ($rows as $row) {?>
<option <?php if ($row->id == $value) { echo " selected=\"selected\""; } ?>value="<?php echo $row->id;?>" >
<?php echo $row->title;?>
  </option>
<?php }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:43:38.603

如果您从一个类别列出，只需使用类别列表菜单类型并选择适当的类别。

[http://help.joomla.org/proxy/index.php?option=com_help&keyref=Help16:Menus_Menu_Item_Article_Category_List](http://help.joomla.org/proxy/index.php?option=com_help&keyref=Help16:Menus_Menu_Item_Article_Category_List)

例如

![从类别创建文章列表](../Images/e2fd3efb54698da02a8a9e85a8a83cf2.png)

# google-apps-script - 将文件添加到文件夹

> ID：13028059
> 
> 赞同：1
> 
> 时间：2012-10-23T10:06:25.963
> 
> 标签：google-apps-script

我正在尝试将新创建的 Google Docs 文件重新定位到 google drive 中的文件夹（使用 Google Apps）。

```
var newFile = DocumentApp.create('New File');
var newFileID = Docs.getFileById(newFile);
var newFileRelocated = newFileID.addToFolder(newFolder); 
```

而且我得到“找不到方法addToFolder（。（Line ...）”。我做错了什么？当我编写它时，他们的方法作为一个选项下降，但仍然找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:17:39.553

这个逻辑与你尝试的不完全一样......

这是一个工作示例：

```
function myFunction() {
var newFile = DocumentApp.create('New File');
var newFileID = newFile.getId()
var newFolder = DocsList.createFolder('test Folder')
DocsList.getFileById(newFileID).addToFolder(newFolder)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:02:09.543

您的情况很可能`newFolder`不是预期的。是`string`吗？你在哪里定义的？

无论如何，预期的参数`addToFolder`必须是`Folder`您使用其他方法获得的对象`DocsList`。例如`DocsList.getFolder("/path/to/folder")`或`DocsList.getFolderById("folder-id")`等等。

您的代码似乎还有其他“不一致”，我将粘贴您要执行的操作：

```
var newDoc = DocumentApp.create('New Google Doc');
//a DocumentApp file and a DocsList file are not the same object, although they may point to the same Google Doc
var newFile = DocsList.getFileById(newDoc.getId());
var folder = DocsList.getFolder("/path/to/folder"); //I'm assuming the folder already exists
newFile.addToFolder(folder); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:05:46.667

补充一点，我最近处理了这个问题。

我注意到默认位置是将 DocsList.create() 文件存储在根文件夹（又名我的驱动器）中。

如果您正在处理大量文件，这可能会导致真正的头痛。

我将此添加为 .addToFolder() 之后的行

```
newFile.removeFromFolder(DocsList.getRootFolder()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T02:51:06.767

以下函数是一个简单的谷歌脚本，用于传递图像 URL。

```
function fetchImageToDrive_(imageUrl)
 {
 //Fetch image blob
    var imageBlob = UrlFetchApp.fetch(imageUrl).getBlob();
 //Create image file in drive
    var folder = DocsList.getFolder('test Folder');
    folder.createFile(imageBlob);
 } 
```

# cmd - 如何使用 cmd 将最新文件单独移动到文件夹中？

> ID：13028062
> 
> 赞同：0
> 
> 时间：2012-10-23T10:06:28.163
> 
> 标签：cmd, scheduled-tasks

我必须使用 cmd 将我的最新文件单独移动到名为“存档”的文件夹中。我应该怎么做？

例如：我在 my_folder 中有 5 月、6 月、7 月、8 月和 9 月创建的文件。

现在我需要将所有在 5 月、6 月、7 月和 8 月创建的文件移动到 my_archive 中，而 sep 文件必须留在 my_folder 中。

我使用移动 c:\my_folder*.* c:\my_archive。但这会移动所有文件。这样做的正确脚本应该是什么？

第二件事是，我正在考虑使用任务调度程序来运行具有此移动脚本的批处理文件？这会有帮助吗？

谢谢，

ResKing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:38:58.330

此批次将循环遍历所有旧文件（不是从当前月份开始）并将它们一一移动到 my_archive 目录。

我正在创建一个新文件，以防万一此目录中没有新文件（我使用新文件作为循环的中断规则）。该文件在批处理文件的末尾被删除。

dir 参数仅显示文件并按日期对它们进行排序。您还可以指定您喜欢的时间戳：

```
/T:C - Creation
/T:A - Last Access
/T:W - Last Written 
```

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET SRC_PATH=c:\my_folder
SET DST_PATH=c:\my_archive
SET MONTH=%date:~4,2%
SET YEAR=%date:~-4%
echo blah > !SRC_PATH!\to_delete.txt

for /f "skip=4 tokens=1,5 delims= " %%g in ('dir /A:-D /O:D !SRC_PATH!') do (
set date=%%g
set m=!date:~0,2!
set y=!date:~-4!
if !YEAR! gtr !y! (move !SRC_PATH!\%%h !DST_PATH!\%%h) else (
if !MONTH! gtr !m! (move !SRC_PATH!\%%h !DST_PATH!\%%h) else goto :end
) )

:end
del !SRC_PATH!\to_delete.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:44:35.530

假设您的日期格式是 MM/dd/yyyy，这可能有效：

```
@echo off

set month=%date:~0,2%
set year=%date:~-4%

mkdir temp_folder

rem move this month's files out of the way
forfiles /d +%month%/01/%year% /c "%comspec% /c move \"@path\" temp_folder"

rem move all other files to my_archive
forfiles /d -%month%/01/%year% /c "%comspec% /c move \"@path\" my_archive"

rem restore this month's files
move temp_folder\*.* .

rmdir temp_folder 
```

# java - 从 XMLStreamReader 获取位置

> ID：13028064
> 
> 赞同：2
> 
> 时间：2012-10-23T10:06:36.773
> 
> 标签：java, xml, servlets, stax, xmlstreamreader

我正在研究将用于身份验证和路由的流式 SOAP 代理。代理必须从 SOAP 标头读取和验证凭据和路由信息。它还必须使用目标服务使用的其他元数据来丰富 SOAP 标头。

我首先使用 StAX（XMLStreamReader 和 XMLStreamWriter）完成了一个快速的概念验证。它似乎可以正常工作，因此概念得到了证明，但性能并不是我所期望的。在分析原型时，我注意到应用程序在字符编码/解码上花费了大量的 CPU 时间（30-80%）

我认为解决方案很简单：

*   将 XMLStreamReader 从 InputStream 读取的数据存储到缓冲区
*   获取 SOAP 标头结束标记之前的偏移量 (getLocation())
*   从缓冲区发送数据，直到达到偏移量
*   发送附加数据
*   从缓冲区发送剩余数据
*   从 InputStream 发送数据

这将避免所有不必要的编码/解码。然而令我惊讶的是，我发现标准实现不支持 getLocation() - 它返回 -1。

过时的部分 - 以下内容实际上不起作用，因为 XMLStreamReader 在读取一个字节时会消耗大量内存。“我注意到我可以从 InputStream 获得偏移量，如果我编写一个 InputStreamReader 一次返回一个字节并跟踪读取的字节数。但是这感觉不是正确的解决方案 - 荒谬的读取调用数量很可能比额外的解码/编码造成更大的性能损失。”

如果编写自定义解析器是不可能的，我在这里有什么选择？是否有经过验证并支持 getLocation() 的符合标准的 XMLStreamReader 实现？

# c# - 无法加载 DLL 'SQLite.Interop.dll'

> ID：13028069
> 
> 赞同：240
> 
> 时间：2012-10-23T10:06:45.540
> 
> 标签：c#, visual-studio-2010, sqlite

我定期收到以下异常：

`Unable to load DLL 'SQLite.Interop.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)`

我正在使用 1.0.82.0。版本，在VS2010，操作系统Win7 64中使用nuget安装。

一旦开始出现异常，它就会不断出现 - 在 VS 内部或外部调试和发布和运行应用程序。

阻止它的唯一方法是注销和登录。不抛出异常并加载 dll。它可以工作几天，但它可能会再次中断。

有没有人看到过这样的事情并且有解决方案吗？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-09-01T14:03:06.767

我知道我参加聚会迟到了，但在我今天下载最新的 x86/x64（版本 1.0.88.0）后就遇到了这个问题。我在 VS2012 中的本地 IIS 默认运行 32 位，没有简单的方法可以切换到 x64。我的生产服务器运行 64 位。

无论如何，我将 NuGet 包安装到 DLL 项目中，但出现此错误。我必须做些什么才能让它工作，我也必须**将它安装到主站点**项目中。即使它根本不涉及 SQLite 类。

我的猜测是 SQLite 使用入口程序集来检测要加载的 Interop 版本。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2015-01-22T15:26:41.657

我遇到了这个问题，因为我使用的 dll 将 Sqlite 作为依赖项（在 NuGet 中配置，只有 Sqlite 核心包。）。该项目编译并复制除“SQLite.Interop.dll”（x86 和 x64 文件夹）之外的所有 Sqlite dll-s。

解决方案非常简单：只需将 System.Data.SQLite.Core 包作为依赖项（使用 NuGet）添加到您正在构建/运行的项目中，然后将复制 dll-s。

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2018-02-28T21:54:51.873

因此，添加 NuGet 后，部署不会复制 Interops。您可以将其添加到您的 csproj 文件中，它应该可以修复该行为：

```
 <PropertyGroup> 
    <ContentSQLiteInteropFiles>true</ContentSQLiteInteropFiles>
    <CopySQLiteInteropFiles>false</CopySQLiteInteropFiles>
    <CleanSQLiteInteropFiles>false</CleanSQLiteInteropFiles>
    <CollectSQLiteInteropFiles>false</CollectSQLiteInteropFiles>
 </PropertyGroup> 
```

如果您查看 NuGet for SQLite 的源代码，您可以看到它们具体在做什么。这使我能够使用 ASP.Net Core 进行部署。

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2013-03-03T20:54:31.217

在平台目标为`Any CPU`. 我按照以下步骤修复了它：

1.  在 Visual Studio 中打开项目设计器。可以在[此处](http://msdn.microsoft.com/en-us/library/z15yzzew.aspx)找到有关如何执行此操作的详细信息。
2.  单击构建选项卡。
3.  禁用该`prefer 32-bit`选项。

或者，您可以将平台目标设置为`x86`或`x64`。我认为这个问题是由`System.Data.SQLite`库使用平台目标来获取“SQLite.Interop.dll”文件的位置引起的。

更新：

如果无法联系到项目设计者，只需`*.csproj`从文本编辑器打开项目 ( ) 文件并将值添加`<Prefer32Bit>false</Prefer32Bit>`到`<PropertyGroup>...</PropertyGroup>`标签中。

示例代码

```
<PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>[Set by Visual Studio]</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>[Set by Visual Studio]</RootNamespace>
    <AssemblyName>[Set by Visual Studio]</AssemblyName>
    <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
    <FileAlignment>[Set by Visual Studio]</FileAlignment>
    <!--Add the line below to your project file. Leave everything else untouched-->
    <Prefer32Bit>false</Prefer32Bit>
</PropertyGroup> 
```

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2013-09-25T23:52:02.900

这就是我在项目中修复它的方式。

它工作正常，当一位同事提交他的更改时，我收到“无法加载 DLL 'SQLite.Interop.dll'”异常。

比较项目的 .csproj 文件，这是在非工作版本中：

```
<ItemGroup>
     <Content Include="x64\SQLite.Interop.dll" />
     <Content Include="x86\SQLite.Interop.dll" />
</ItemGroup> 
```

这就是 WORKING 版本的内容：

```
<ItemGroup>
     <Content Include="x64\SQLite.Interop.dll">
          <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </Content>
      <Content Include="x86\SQLite.Interop.dll">
          <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </Content>
</ItemGroup> 
```

恢复后，我没有收到异常。DLL 文件被转储在适当的 Debug\x64 (etc) 文件夹中。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2014-06-04T17:33:06.777

当您进入此状态时，请尝试执行 Rebuild-All。如果这可以解决问题，您可能会遇到与我相同的问题。

**一些背景（我的理解）**：

*   SQLite 有 1 个托管程序集 (System.Data.SQLite.dll) 和几个特定于平台的程序集 (SQLite.Interop.dll)。使用 Nuget 安装 SQLite 时，Nuget 会将特定于平台的程序集添加到您的项目中（在几个文件夹中：\x86、\x64），并将这些 dll 配置为“始终复制”。

*   加载后，托管程序集将在 \x86 和 \x64 文件夹中搜索特定于平台的程序集。[你可以在这里](https://stackoverflow.com/questions/3787428/loading-x86-or-x64-assembly/6060754#6060754)看到更多。例外是这个托管程序集试图在这些文件夹中找到相关的（SQLite.Interop.dll）（并且失败）。

**我的场景**：

我的解决方案中有 2 个项目；一个 WPF 应用程序和一个类库。WPF 应用程序引用类库，类库引用 SQLite（通过 Nuget 安装）。

我的问题是当我只修改 WPF 应用程序时，VS 尝试进行部分重建（意识到依赖的 dll 没有改变）。在这个过程中的某个地方，VS 清理了 \x86 和 \x64 文件夹的内容（吹走 SQLite.Interop.dll）。当我进行完整的 Rebuild-All 时，VS 会正确复制文件夹及其内容。

**我的解决方案**：

为了解决这个问题，我最终添加了一个使用 xcopy 的 Post-Build 进程，以强制将类库中的 \x86 和 \x64 文件夹复制到我的 WPF 项目 \bin 目录中。

或者，您可以使用构建配置/输出目录做一些更有趣的事情。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2014-06-25T14:12:50.067

我在运行 Visual Studio Express 2013 时遇到了同样的问题。我尝试了这里和其他地方提到的几种解决方案，但无济于事。我希望此修复对其他人有所帮助。

我通过在测试基于 SQLite 的服务的测试类上使用[`DeploymentItem`属性来修复它。](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute.aspx)

例子：

```
[TestClass]
[DeploymentItem(@"x86\SQLite.Interop.dll", "x86")] // this is the key
public class LocalStoreServiceTests
{

    [TestMethod]
    public void SomeTestThatWasFailing_DueToThisVeryIssue()
    {
         // ... test code here
    }
} 
```

这会导致需要`SQLite.Interop.dll`将其复制到`x86`相应的“TestResults”文件夹中的目录中。

一切都是绿色的。一切都很好。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-12-23T15:51:39.933

`Tools -> Extension and updates`从SQLite.Core更新 NuGet并使用`PM> Update-Package -reinstall System.Data.SQLite.Core`为我修复的命令重新安装它。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2014-05-27T18:56:18.857

我在多项目解决方案中遇到了类似的问题。SQLite.Interop.dll 对于使用 ClickOnce 与软件一起分发的插件之一是必需的。

至于在 Visual Studio 中调试，一切正常，但部署的版本缺少包含该 DLL 的文件夹 x86/ 和 x64/。

使用 ClickOnce 部署后使其工作的解决方案是在解决方案的启动项目（也是正在发布的项目）中创建这两个子文件夹，将 DLL 复制到其中并将它们设置为始终复制内容。

这样，ClickOnce 发布工具会自动将这些文件和文件夹包含在清单中，并使用它们部署软件

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2020-02-11T19:49:20.723

# 旧项目文件格式

*即项目以`<Project ToolsVersion="3.5" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">`*

将以下内容添加到您的“主”/根项目上的 csproj

```
<PropertyGroup> 
    <ContentSQLiteInteropFiles>true</ContentSQLiteInteropFiles>
    <CopySQLiteInteropFiles>false</CopySQLiteInteropFiles>
    <CleanSQLiteInteropFiles>false</CleanSQLiteInteropFiles>
    <CollectSQLiteInteropFiles>false</CollectSQLiteInteropFiles>
</PropertyGroup> 
```

# 新的 SDK 项目文件格式

*即项目以`<Project Sdk="Microsoft.NET.Sdk.*">`*

将依赖链中的每个 ProjectReference/PackageImport添加`PrivateAssets="none"`到 System.Data.Sqlite PackageImport

前任：

```
<PackageReference Include="System.Data.SQLite.Core" Version="1.0.110" PrivateAssets="none"/> 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2016-08-30T17:14:56.503

这里确实有很多答案，但我的答案很简单明了，*没有 GAC-playing-around*。

问题是，可执行文件需要权限（x86 或 x64）的副本`SQLite.Interop.dll`才能访问我们的数据库。

大多数架构都有层，在我的情况下，*数据层*具有 SQLite 连接所需的 DLL。

所以我简单地将一个后期构建脚本放入我的*数据层*解决方案中，一切正常。

* * *

# TL;博士;

1.  将解决方案的所有项目设置为`x86`或`x64`在构建选项中。

2.  将以下内容添加`Post-Build-Script`到项目中`SQLite nuget Package`：

    `xcopy "$(TargetDir)x64" "$(SolutionDir)bin\Debug\" /y`

当然，您必须更改脚本`Release Build`并`x86`构建。

* * *

# STL;博士;

把你的`SQLite.Interop.dll`下一个`*.exe`文件。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2013-07-09T22:50:36.943

NuGet 中 SQLite 的多架构（x86、x64）版本的默认安装展示了您描述的行为。如果您想为 .NET 运行时选择在您的机器上运行您的应用程序的实际体系结构加载正确的版本，那么您可以向 DLL 加载程序提供有关在何处找到正确库的提示，如下所示：

在 Program.Main() 之前为 SetDLLDirectory() 添加 kernel32.dll 函数调用的声明：

```
 [System.Runtime.InteropServices.DllImport("kernel32.dll", CharSet = System.Runtime.InteropServices.CharSet.Unicode, SetLastError = true)]
    [return: System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.Bool)]
    static extern bool SetDllDirectory(string lpPathName); 
```

然后使用您自己的方法来确定正确的子目录以找到特定于体系结构的“SQLite.Interop.dll”版本。我使用以下代码：

```
 [STAThread]
    static void Main()
    {
        int wsize = IntPtr.Size;
        string libdir = (wsize == 4)?"x86":"x64";
        string appPath = System.IO.Path.GetDirectoryName(Application.ExecutablePath);
        SetDllDirectory(System.IO.Path.Combine(appPath, libdir)); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2013-11-22T12:33:52.060

即使它是一个旧帖子，我也想分享我在这里找到的解决方案：http: [//system.data.sqlite.org/index.html/info/54e52d4c6f](http://system.data.sqlite.org/index.html/info/54e52d4c6f)

如果您不想阅读所有问题，解决方案是将文件“msvcr100.dll”（可以在 Windows\System32 目录中找到）复制到与 SQLite.Interop.dll 相同的路径中。

我建议阅读该问题以了解原因，并将该文件包含在您的设置中，但仅在发生错误时才安装它，我将其设置为可选组件，可在设置选项中选择。

HTH，福门茨

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-02-03T18:56:46.450

我不知道为什么还没有包括在内，但是我必须自己进行研究并找出答案，所以希望有人能找到这个答案并免去麻烦。这是针对 WPF 应用程序的。`Unable to load DLL 'SQLite.Interop.dll'`它在我的开发盒上运行良好，但在我复制它并出现错误的计算机上不起作用。当我运行它时遇到与 OP 相同的错误时，我将其所有相关目录和文件直接从我的“调试”文件夹移植到另一台计算机。包含我的 DLL 的“bin”文件夹已被复制到“Debug\bin”，并且当我使用此路径复制到另一台计算机时，所有文件以及我的应用程序文件都包含在内，因此它没有丢失任何文件。

我在其他不适用的答案中看到的内容：

*   我没有使用 NuGet 包，也不需要创建看起来是 NuGet 包创建的 x86 或 x64 文件夹。我的 DLL（System.Data.SQLite 和 SQLite.Interop.dll，以及 System.Data.SQLite.config）位于我项目的“bin”文件夹中，并手动复制（在解决方案资源管理器中创建“bin”文件夹） VS，在 Windows 资源管理器中将 DLL 粘贴到此文件夹中，使用 Add > Existing Item 将文件放入 VS 文件夹/项目中）。然后我在我的项目中使用该位置将它们引用为引用程序集（“引用”>“添加引用”，然后浏览到一个，[冲洗，](http://www.urbandictionary.com/define.php?term=rinse%2C%20repeat)其余部分重复）。这可以确保我的项目确切地知道它们在哪里。
*   我不需要在我的 app.config 中引用任何 SQLite DLL 文件，甚至不需要触摸我的 MyProject.csproj 文件。
*   我什至不需要指定特定的处理器！我的项目是为“任何 CPU”构建的，即使我只有混合或 64 位 DLL，并且只能在 64 位操作系统的 Windows 7+ 上运行。（没有 x86-only/32-bit only DLLs）
*   当我遇到 OP 的错误时，我已经将它们指定为这些 DLL 的“内容”和“如果更新则复制”。

我发现的是这个，来自[https://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q20](https://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q20)：

> **(11) 为什么在尝试运行我的应用程序时会出现 DllNotFoundException（对于“sqlite3.dll”或“SQLite.Interop.dll”）？**
> 
> 找不到指定的动态链接库 (DLL)，或者由于缺少依赖项而无法加载它。确保命名的动态链接库位于应用程序目录或系统 PATH 沿线的目录中，然后重试。**此外，请确保已安装必要的 Visual C++ 运行时可再发行组件，**除非您使用的是静态链接到它的动态链接库。

强调我在段落中的粗体部分。目标计算机是新的，除了 .NET 4.0 之外没有加载任何程序。一旦我安装了 C++，它就能够完成对 SQLite 的命令。这应该是第一个常见问题解答和先决条件的一部分，但它被埋在#11。我的开发计算机已经加载了它，因为它带有 Visual Studio，所以这就是它在那里工作的原因。

**下载：**
Visual Studio 2015 的 Visual C++ Redistributable：
[https ://www.microsoft.com/en-us/download/details.aspx?id=48145](https://www.microsoft.com/en-us/download/details.aspx?id=48145)

更新 3（累积更新）：
[https ://www.microsoft.com/en-us/download/details.aspx?id=53587](https://www.microsoft.com/en-us/download/details.aspx?id=53587)

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-09-13T06:42:13.297

正如[SQLite wiki](https://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)所说，您的应用程序部署必须是：

[![应用部署](../Images/e3836903b3d262c8cbed0b23b2346f22.png)](https://i.stack.imgur.com/YJJca.png)

所以你需要遵守规则。找到与您的目标平台匹配的 dll 并将其放置在图片中描述的位置。Dll 可以在 YourSolution/packages/System.Data.SQLite.Core.%version%/ 中找到。

我在应用程序部署方面遇到了问题，所以我只是在我的项目中添加了正确的 SQLite.Interop.dll，在安装项目中将 x86 文件夹添加到 AppplicationFolder 并添加了对 dll 的文件引用。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2020-12-03T07:34:20.767

我遇到过同样的问题。请按照以下步骤操作：

1.  确保您已通过from安装`System.Data.SQLite.Core`软件包 。`SQLite Development Team``NuGet`
2.  转到项目解决方案并尝试在文件夹中找到`build`文件`packages`夹
3.  检查您的项目框架并选择所需的 SQLite.Interop.dll 并将其放在您的调试/发布文件夹中

[参考](https://www.youtube.com/watch?v=CMwfDN_Zg1M)

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-01-17T15:03:09.397

在调试文件夹中复制 x86 和 x64 的“SQLite.Interop.dll”文件。这些文件应复制到调试文件夹中的“x86”和“x64”文件夹中。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-11-01T07:50:56.907

如果您尝试在 64 位项目中运行 32 位 dll，您也可能会收到此错误。

当我在 x86 和 x64 文件夹中放置相同的文件（32 位版本的 SQLite.Interop.dll）时，我得到了这个。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2014-03-02T07:22:02.293

如果您[下载正确的二进制文件](http://www.sqlite.org/download.html)，然后根据您的项目构建选项`SQLite`复制`SQLite.Interop.dll`到您的*Release*或*Debug文件夹中。*

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2015-01-26T15:31:03.633

我已经开始使用 Costura.Fody 来打包 (.net) 程序集并嵌入和预加载本机 dll。这也有助于以后分发，因为您可以发送一个文件。

1.  从 Nuget 安装 Costura Fody。

2.  在您的 C# 项目中，创建一个名为 costrua32 的文件夹。在那里添加您要加载的 C# 的任何本机 dll。

3.  将它们添加到此文件夹后。单击属性窗口并将构建操作更改为“嵌入式资源”

4.  最后，您需要修改名为 FodyWeavers.xml 的 XML 文件，如下所示。在这里，我指定首先加载 sql dll。（注意你删除了.dll）

    ```
    Weavers
     Costura
      PreloadOrder
       SQLite.Interop
       tbb_debug
       tbb
      /PreloadOrder>
     /Costura
    /Weavers 
    ```

这样做的好处是您不必编写任何构建前或构建后的事件，并且最终产品完全封装在一个更大的文件中。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2018-08-29T11:38:34.870

还将dll添加到测试项目（通过Nuget Manager）并修复它。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2012-10-23T18:31:20.417

会不会有争夺大会的机会？检查是否有另一个应用程序在 DLL 上具有文件锁定。

如果是这个原因，应该很容易使用像[Sysinternal 的 Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)这样的工具来发现有问题的程序。

HTH，粘土

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2015-01-25T12:03:54.830

我遇到了这个问题，因为我的 PC 中没有安装 Visual C++ 2010 可再发行组件。如果您尚未安装 Visual c++ 2010 可再发行组件[下载](http://www.microsoft.com/en-us/download/details.aspx?id=5555)并安装它（检查 x86 或 64 dll）。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2015-08-16T11:58:42.520

我遇到了同样的问题。但是，最后，我可以修复它。目前，我使用 Visual Studio 2013 社区版。我只是使用**Add->Existing Item...**并浏览到 SQLite.Data.SQLite 文件所在的位置（我的情况是 'C:\Program Files (x86)\System.Data.SQLite\2013\bin'）。请不要忘记将要包含的内容类型更改为**Assembly Files (*.dll; *.pdb)**。在该文件夹中选择“ **SQLite.Interop.dll** ”。从那时起，我可以毫无问题地继续。祝大家好运。^_^ PS 我创建网络表单应用程序。我还没有尝试过窗体应用程序或其他应用程序。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2015-12-22T09:50:11.003

在构建之前尝试将平台目标设置为 x86 或 x64（而不是任何 CPU）：Visual Studio 中的 Project->Properties->Build->Platform target。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2016-09-19T06:39:09.603

将 SQLite.Interop.dll 复制到项目目录中。

```
src\
  project\
      bin\   <-- Past in bin
         x64\
           SQLite.Interop.dll <-- Copy this if 64
         x86\
           SQLite.Interop.dll <-- Copy this if 32 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2016-10-22T10:46:49.003

我为此苦苦挣扎了很长时间，偶尔发现测试设置不正确。看这张图片： ![测试设置](../Images/3dbfc7fcf2dcdac7e070c90c88bdb78a.png)

我只是取消选中测试设置，问题就消失了。否则会发生异常。希望这会对某人有所帮助。不确定这是根本原因。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2017-07-28T20:52:13.620

我的应用程序是一个 Web 应用程序 (ASP.NET MVC)，我必须将应用程序池更改为`LocalSystem`在`ApplicationPoolIdentity`. 去做这个：

1.  打开 IIS 管理器
2.  找到您的站点正在运行的应用程序池。
3.  单击操作中的高级设置
4.  将身份更改为`LocalSystem`

我不知道为什么这可以解决问题。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2021-06-21T23:04:15.373

升级到 Visual Studio 2019 版本。16.10 对我造成了这个问题，其中 msbuild 报告了 -package 的以下内容`System.Data.SQLite.Core`：

```
CopySQLiteInteropFiles:
Skipping target "CopySQLiteInteropFiles" because it has no outputs. 
```

[https://github.com/dotnet/msbuild/issues/6493](https://github.com/dotnet/msbuild/issues/6493)

微软表示该错误已通过版本修复。16.10.4。现在只需要等待 AppVeyor 更新他们的 Visual Studio 图像（在那之前可以使用`Previous Visual Studio 2019`）。

现在 AppVeyor 正在为当前和以前的 Visual Studio 2019-image 使用损坏的 dotnet-build-engine。现在必须显式安装 dotnet sdk ver。5.0.302：

```
Invoke-WebRequest -Uri 'https://dot.net/v1/dotnet-install.ps1' -UseBasicParsing -OutFile "$env:temp/dotnet-install.ps1"; & $env:temp\dotnet-install.ps1 -Architecture x64 -Version 5.0.302 -InstallDir "$env:ProgramFiles\dotnet" 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2013-03-31T22:31:30.783

我不知道这是否是一个好的答案，但我能够通过在具有“本地系统”身份的 AppDomain 下运行我的应用程序来解决这个问题。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2013-10-17T18:07:38.697

我正在开发一个简单的控制台应用程序，以将一些测试数据添加到 SQLite 数据库并收到此错误。项目的配置是“任何 CPU”。我通过将 SQLite.Interop.dll 复制到 bin\debug 文件夹来修复它。更好的方法是使用@Wil 的方法，但是如何为“Any CPU”配置指定此方法？

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2015-01-08T20:44:53.073

供任何查看此问题的人参考：

如果您使用 nuget 包，它会安装一个为您执行复制的构建规则。（请参阅 System.Data.SQLite.Core.1.0.94.0\build - 或您安装的任何核心版本）。

nuget 安装程序会自动将规则添加到您的项目文件中。

不过，这仍然不能解决测试用例问题。DeploymentItem ( [https://stackoverflow.com/a/24411049/89584](https://stackoverflow.com/a/24411049/89584) ) 方法似乎是唯一可行的方法。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2015-02-23T16:57:41.677

我在一个包含 WebAPI/MVC5 Web 项目和一个功能测试项目的解决方案中遇到了这个问题，它们都来自同一个数据访问（或“核心”）项目。我和这里的许多其他人一样，正在使用通过 Visual Studio 2013 中的 NuGet 下载的副本。

我所做的是在 Visual Studio 中将 x86 和 x64 解决方案文件夹添加到功能测试和 Web 项目中。然后我做了一个，并为每个文件夹`Right Click | Add Existing Item...`添加了适当的 SQLite.interop.dll 库。`..\SolutionFolder\packages\System.Data.SQLite.Core.1.0.94.0\build\net451\[appropriate architecture]`然后我做了一个`Right Click | Properties`, 并设置`Copy to Output Directory`为`Always Copy`. 下次我需要运行功能测试时，测试运行成功。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2015-07-20T11:46:16.220

**简而言之**

为了使它也能与*NCrunch*一起工作，我必须将随 NuGet 包提供的 Interop.dll 版本添加为[NCrunch 配置中的附加文件](https://www.ncrunch.net/documentation/reference_solution-configuration_additional-files-to-include)。

**我的情况**

我有一个 C# 解决方案，其中一个项目直接取决于 SQLite（一个帮助程序库）和一个使用该帮助程序库的单元测试项目。我已将 System.Data.SQLite.Core 版本 1.0.97.0 作为 NuGet 包安装。

在我的例子中[，Marin 提供的解决方法](https://stackoverflow.com/a/28092497/668194)使它在 Visual Studio 和 CI 中也能正常工作。但是，这仍然会在 NCrunch 中提供错误。

在 NCrunch 配置中，我在单元测试项目设置下的“要包含的其他文件”中添加了以下路径：

```
..\packages\System.Data.SQLite.Core.1.0.97.0\build\net45\**.dll 
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2015-08-27T16:22:29.000

由于这个问题的复杂性，我想在这里发布。我的解决方案是回滚到 .Net 4.0。我已经测试了 3 天，但无法让 System.Data.SQLite.Core.1.0.98.0 与 .Net 4.5 或 .Net 4.5.1 一起使用。

在 3 台计算机、2 台服务器和一台开发 PC 上进行了详尽的测试。我无法找到问题的根源。我尝试编辑 .vsproj 文件。我实际上已将 SQLite.interop.dll 添加到所有文件夹中。我已将包应用到所有 GAC 文件夹，并单独删除并重新应用。最终被移除。

我确实有 System.Data.SQLite.Core.1.0.98.0 与 .Net 4.0 一起使用。我打算继续尝试迁移，但我想我会先开始一个新项目，看看我是否能让它以这种方式工作。这最初是一个 .Net 3.5 网络应用程序，在我的旅行中，我发现大量信息仍然引用该框架。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2018-09-27T21:57:07.410

我的情况有点独特。我在 docker 容器中运行应用程序并不断收到以下错误

> System.DllNotFoundException：无法加载共享库“SQLite.Interop.dll”或其依赖项之一。为了帮助诊断加载问题，请考虑设置 LD_DEBUG 环境变量： libSQLite.Interop.dll: cannot open shared object file: No such file or directory

所以我设置了**LD_DEBUG=libs**来找出**System.Data.SQLite.dll**正在寻找哪些文件夹来查找**SQLite.Interop.dll**。

您可以在此处找到有关设置**LD_DEBUG**的信息：[http ://www.bnikolic.co.uk/blog/linux-ld-debug.html](http://www.bnikolic.co.uk/blog/linux-ld-debug.html)

一旦我这样做了，我意识到**SQLite.Interop.dll**被发现就好了。未找到的 DLL 是**libSQLite.Interop.dll**。我应该已经阅读了整个错误信息。

经过数小时的谷歌搜索后，我找到了有关如何从 SQLite 源代码编译缺少的 DLL 的[指南。](http://blog.wezeku.com/2016/10/09/using-system-data-sqlite-under-linux-and-mono/)

请注意，实际上缺少的文件是**libSQLite.Interop.dll.so**

无论如何，当您编译源代码时，您会得到**libSQLite.Interop.so**，您需要将其重命名为**libSQLite.Interop.dll.so**并将其放在它正在查找的目录中，您可以通过设置**LD_DEBUG**找到该目录。

对我来说**System.Data.SQLite.dll**正在查找的目录是`/usr/lib/x86_64-linux-gnu/`

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2019-09-10T10:53:22.087

您确实需要通过 NuGet 安装 System.Data.SQLite.Core。如果您使用 InnoSetup，请确保在 .iss 文件的 [Files] 部分中有以下行：

```
Source: "C:\YourProjectPath\bin\Release\x64\*"; DestDir: "{app}\x64"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\YourProjectPath\bin\Release\x86\*"; DestDir: "{app}\x86"; Flags: ignoreversion recursesubdirs createallsubdirs 
```

更改项目路径的“ **YourProjectPath** ”。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2020-10-06T20:06:31.617

这对我有用。

1.  打开 Visual Studio，通过 NUGET 包管理器搜索并安装 SQLite.Core。
2.  转到VS中的解决方案资源管理器，右键单击您的项目名称-->添加-->新建文件夹
3.  将文件夹命名为 x64
4.  重复该过程并添加文件夹并将其命名为 x86
5.  右键单击 x64 文件夹-->添加-->现有项目然后浏览到调试文件夹。您将找到 x64 文件夹。打开它并选择“SQLite.Interop.dll”文件，然后点击确定。
6.  对 x86 文件夹重复步骤 5。
7.  右键单击刚刚添加的 DLL，然后选择 PROPERTIES。在复制到输出目录选项中，选择始终复制。
8.  对 x64 和 x86 文件夹中的两个 DLL 重复步骤 7。

下次您构建项目并将其带到另一台计算机时，它应该可以正常工作。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2021-11-12T11:18:16.900

我发现当我允许 Nuget 将 SQLite 更新到 1.0.115.5 时，我的项目不再需要“SQLite.Interop.dll”。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2015-07-21T19:41:24.310

我自己也遇到过这个问题，后来发现是另外一个原因：

```
System.DllNotFoundException was caught 
Unable to load DLL 'SQLite.Interop.dll': Access is denied. 
```

在这种情况下，代码是（间接）从 IIS 托管的 Web 服务调用的（配置为 x86 构建）。我终于将其追踪到 IIS 中的应用程序池：最初我使用的是**“ASP.NET V4.0 Integrated”**（导致该错误），但是当我将其更改为**“DefaultAppPool”**时，问题就消失了。

（呸！）

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2015-09-22T05:23:35.600

所以，我的问题是 SQLite 试图在 WPF 的设计时加载。由于我只关心 x86 环境，因此我将 CPU 首选项设置为该环境，并将 SQLite.Interop.dll 从 Nuget 包复制到解决方案的根目录。重新启动解决方案，所有问题都消失了。因此，如果您遇到设计时问题，请将库放入解决方案的根目录。

此外，我在运行时遇到了类似的问题，因此我必须将 SQLite.Interop.dll 的副本放入我的项目中，并在属性中将其设置为复制。似乎提供的 x86 和 x64 文件夹完全没用。需要进一步调查，但总的来说......在项目中手动引用 SQLite 比使用 Nuget 包更容易。

此外，官方常见问题解答指出以下内容：

> (20) 当 System.Data.SQLite 项目在 Visual Studio 内部编译和运行时，为什么在尝试运行时会出现 DllNotFoundException 或 BadImageFormatException（对于“sqlite3.dll”或“SQLite.Interop.dll”）或调试应用程序？
> 
> 从使用 System.Data.SQLite 项目（包括测试项目）的 Visual Studio 中编译和运行解决方案时，选择正确的构建配置和平台非常重要。首先，要在 Visual Studio 中调试的托管应用程序不能使用混合模式程序集（即，因为它总是编译到特定于平台的构建输出目录）。这对于正确支持使用相同源项目文件为多个平台构建二进制文件是必要的。因此，从依赖于 System.Data.SQLite 程序集的 Visual Studio 内部运行托管应用程序时，应仅选择“DebugNativeOnly”或“ReleaseNativeOnly”构建配置。这些构建配置包含一个自定义的构建后步骤，该步骤将所需的本机程序集复制到托管输出目录（即启用就地运行托管二进制文件）。但是，只有在所选平台与操作系统的平台匹配时才会执行此构建后步骤（例如，“Win32”适用于 32 位 Windows，“x64”适用于 64 位 Windows）。因此，在尝试在解决方案中运行托管项目之前，最好根据操作系统仔细检查选定的构建平台。对于 64 位 Windows）。因此，在尝试在解决方案中运行托管项目之前，最好根据操作系统仔细检查选定的构建平台。对于 64 位 Windows）。因此，在尝试在解决方案中运行托管项目之前，最好根据操作系统仔细检查选定的构建平台。

[https://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q20](https://system.data.sqlite.org/index.html/doc/trunk/www/faq.wiki#q20)

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2015-09-27T02:02:36.240

我的也不适用于单元测试，并且由于某种原因，Michael Bromley 的回答涉及 DeploymentItem 属性不起作用。但是，我使用测试设置让它工作。在 VS2013 中，将新项目添加到您的解决方案并搜索“设置”并选择“测试设置”模板文件。将其命名为“SqliteUnitTests”或其他名称并打开它。选择右侧的“部署”，然后添加目录/文件。将路径/目录添加到 SQLite.Interop.dll 文件。对我来说，我添加了两条路径，分别用于 Project\bin\Debug\x64 和 Console\bin\Debug\x86。您可能还想添加 Sqlite 文件，具体取决于您希望单元测试/解决方案如何访问该文件。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2016-09-22T11:50:37.147

扩展对我有用的 Kugel 的答案（VS2015 Enterprise）利用 dll 中的 SQLite，可以在构建和测试后从主项目中删除 Nuget 包：

1.将Nuget包安装到主项目。

```
Install-Package System.Data.SQLite 
```

2.构建应用程序并测试您的 Sqlite 连接是否正常：

```
select * from sqlite_master 
```

3.从主构建中卸载 Nuget 包。

```
UnInstall-Package System.Data.SQLite 
```

4.手动删除 SQLite 和 EntityFramework 的 dll 引用：

```
System.Data.SQLite
System.Data.SQLite.EF6
System.Data.SQLite.Linq 
```

5.  从主项目的“packages.config”xml 文件中删除 Xml 引用。

这对我有用，并保持我的项目干净。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2018-03-06T05:20:55.597

在 SQLLite Core 的**Nuget 包**中有一个文件**System.Data.SQLite.Core.targets**。只需将其包含在使用此库的所有项目和使用您的库的所有库中。

在您的 .csproj 或 .vbproj 文件中添加： 每次在您的 bin 中编译时，都会添加带有 SQLite.Interop.dll 文件的 x86 和 x64 目录。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2019-09-06T09:28:42.107

刚刚为我工作：`Install-Package System.Data.SQLite.Core`在包管理器控制台上。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2021-09-08T19:41:57.563

我在这里尝试了几乎所有的解决方案，但没有任何运气。最后通过将与我选择的平台对应的 SQLite.Interop.dll 的副本直接放在我的安装项目的根目录下来解决它。

我不知道它为什么起作用，但它确实起作用了。

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2021-09-13T23:11:39.637

超过 30 个答案，但我以不同的方式解决了它。

我有 2 个独立的项目。一个 Windows 服务和一个 Windows 窗体应用程序。该应用程序引用了 WS 项目，并且都引用了 SQLite Core nuget 包。

在构建 WS 项目时，x64 和 x32 文件夹就在那里。但是在构建应用程序时，文件夹不显示。

在这里检查答案，我无法让它们工作。但是我发现以下代码片段存在于 WS 项目中，而在 App 项目中却丢失了。我添加了它，文件夹现在正确显示。

```
<Import Project="..\packages\System.Data.SQLite.Core.1.0.112.0\build\net46\System.Data.SQLite.Core.targets" Condition="Exists('..\packages\System.Data.SQLite.Core.1.0.112.0\build\net46\System.Data.SQLite.Core.targets')" /> 
```

# php - Facebook 好友的 MySQL 订单

> ID：13028071
> 
> 赞同：0
> 
> 时间：2012-10-23T10:06:47.417
> 
> 标签：php, mysql, facebook, facebook-graph-api

我需要一种方法来排序行列表并将用户的 Facebook 朋友放在首位。

有什么办法可以做到吗？我应该遵循哪种方法？

我从未使用过 Facebook Connect，所以这只是一个假设性问题，因为我很快就会使用它。

我是否应该在每次用户搜索时都获取 Facebook 好友列表（并将生成列表）。然后在我的表中，我会保存每个用户的 facebook_uid？

但是我将如何订购它，以便 Facebook 朋友优先，然后显示“陌生人”？

例如，我的表可能如下所示：

```
id - facebook_uid - text
1  - 1111111      - lorem ipsum.....
2  - 2222222      - something else....
3  - 3333333      - third!!! 
```

因此，如果例如 1111111 和 3333333 是我的朋友，则返回的 ID 将是（按正确的顺序）：1,3,2。

如何在 SQL（或 PHP 逻辑）中排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:32:50.330

我按照 Robin 的方法使用了两个数组。

首先，我从 Graph 加载 Facebook 好友列表 (json)。然后我遍历它，创建一个只有朋友 ID 的数组。这样，我可以只使用 in_array 来检查特定 ID 是否是朋友。

```
<?php
function get_facebook_friends(){
    $friends = json_decode(file_get_contents("https://graph.facebook.com/me/friends?access_token=XXXXXX"));
    $friendArray = array();

    foreach($friends->data as $friend){
        $friendArray[] = $friend->id;
    }

    return $friendArray;
}

function is_facebook_friend($friends, $facebook_uid){   
    return in_array($facebook_uid, $friends);
}

//Do your query stuff...

$friends = get_facebook_friends();
$is_friends = array();
$not_friends = array();

foreach ($rows as $row){
    if(is_facebook_friend($friends, $row->facebook_uid)){ //Is friend
        $is_friends[] = $row;
    }else{
        $not_friends[] = $row;          
    }
}

$rows = array_merge($is_friends, $not_friends);

//Do normal loop here
?> 
```

它非常高效和快速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:12:42.090

Facebook 图表可以使用[fql](https://developers.facebook.com/docs/reference/fql/)。虽然它是基于 SQL 的，但它有一些限制，例如缺失`NOT IN()`和东西。`facebook_id`通过在 table 中运行所有 take的 s [`friend`](https://developers.facebook.com/docs/reference/fql/friend/)，您可以通过查询确定他们是否是朋友。

这假设您存储了他们的所有 ID。假设您搜索并获得 10 个结果。`friend`通过-table运行所有这些 id，例如：

```
SELECT uid2 FROM friend WHERE uid1 = me() AND uid2 IN ({$search_user_1}, {$search_user_1}, ...) 
```

返回的uid2显然是给定人的朋友。

**更新：**

`UNION`我怀疑fql 可以`subqueries`根据需要处理。但我的解决方案仍然相同。

提取行，通过 Facebook 的 api 运行 fql 并比较匹配项。如果它们匹配，您可以将它们放入数组`$friends`中，否则`$not_friends`然后`$users = array_merge($friends, $not_friends)`它们会被排序。动用你的想象力。

这个，或者首先运行一个 fql 来获取当前用户的朋友，然后将它们添加到您自己的数据库中的另一个表中，每个访问日/小时/页面。然后只需运行 a`JOIN`来检查他们是否是朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:25:56.587

> 因此，如果例如 1111111 和 3333333 是我的朋友，则返回的 ID 将是（按正确的顺序）：1,3,2。
> 
> 如何在 SQL（或 PHP 逻辑）中排序？

我会说这应该足够了（在 MySQL 中）：

```
… ORDER BY IF(facebook_uid IN (1111111,3333333), 1, 0) DESC 
```

如果记录的 facebook_uid 在给定列表中，这将导致“排序值”为 1，否则为 0。对它进行 DESCending 排序会使 1 值排在 0 值之前。

将逗号分隔的朋友 ID 的实际列表插入 IN 运算符的括号应该没什么大不了的，例如，如果您将它们作为一个数组，您可以使用逗号作为分隔符将它们内爆。

# iphone - 如何在 iPhone 中隐藏导航栏？

> ID：13028074
> 
> 赞同：1
> 
> 时间：2012-10-23T10:06:49.223
> 
> 标签：iphone, ios, uinavigationbar, hidden

目前我正在使用 iPhone 应用程序，我有两个屏幕，如 A 和 B，A 没有导航栏，但 B 有导航栏。所以我这样设置。

A类：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title=@"A";
    [self.navigationController setNavigationBarHidden:YES];
}

-(void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES];
} 
```

B类：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title=@"B";
    [self.navigationController setNavigationBarHidden:NO];
}

-(void)Previousscreen
{
  [self.navigationController popViewControllerAnimated:YES];
} 
```

然后我运行该应用程序，当我去上一堂课时，例如 B 到 A，当时 B 类中的蓝色显示在下面附上的屏幕截图供您参考。如何解决这个问题？请帮我

提前致谢

![在此处输入图像描述](../Images/df14a481a181c9225a211f91f0040c18.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:13:24.867

设置在 B 类

```
-(void)viewWillAppear:(BOOL)animated
{
 [self.navigationController setNavigationBarHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T09:49:40.180

您需要使用以下代码：

`[navigationController setNavigationBarHidden: YES animated:YES]`

在***- (void)viewWillAppear:(BOOL) 动画***或稍后在两个类的视图生命周期中。[避免在***- (void)viewDidLoad***中这样做。]

这里的技巧是使用*setNavigationBarHidden: **animated** :*方法（代替更简单的*setNavigationBarHidden:*方法）。这将确保您的 UI 问题以及由此导致的任何位置问题消失。

PS 检查*self.navigationController 的值。**navigationBarHidden***（而不是*self.navigationController.navigationBar.hidden***）如果您需要检查您的导航栏是否在某些时候隐藏在您的代码中***。*****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:14:35.693

尝试设置**B 类**的`navigationBarHidden:`in`viewWillDisAppear`

 **在**B 类**

```
-(void)viewWillDisAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:19:04.340

我认为不支持在推动控制器时动态隐藏和显示导航栏的行为。

简单的解决方案 - 隐藏动画栏，`UINavigationController`如果你想在某个控制器上显示它，只需添加一个`UINavigationBar`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:24:35.043

`navigationBar`使用下面的行隐藏`viewWillAppear:`方法 -

```
-(void)viewWillAppear:(BOOL)animated
{
    self.navigationController.navigationBar.hidden=YES;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T10:33:47.380

`Hide`您的代码适用`Unhide`于`navigationBar`. 问题是你隐藏了`Class A`'s`navigationBar`在`viewWillAppear:`其中被调用只是在出现视图之前所以在加载`Class A`视图之前`navigationBar`每次都被隐藏。
如果我们谈论你的蓝色，我认为这是你的`window`颜色。因为隐藏后`navigationBar`，您的上方会有一个空间`self.view`，高度为**44.0**。所以有三个选项可以修复它。

*   隐藏`Class A`的`navigationBar`in方法`Class A`。`viewDidAppear:`
*   设置`window`你想要显示的颜色。
*   您可以将图像添加到`window`背景中，其中图像顶部与's`navigationBar`相同，因此当原始图像被隐藏时它会看到。`Class B``navigationBar``navigationBar`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T02:19:54.310

我最近不得不解决这个问题，我发现有必要在`setNavigationBarHidden:NO`之后`pushViewController:`和`setNavigationBarHidden:YES`之后立即`popViewController:`调用，每次调用都带有动画 YES 。

所以，推的时候：

```
[nc pushViewController:classBView animated:YES]
[nc setNavigationBarHidden:NO animated:YES] 
```

并且在弹出时：

```
[nc popViewControllerAnimated:YES]
[nc setNavigationBarHidden:YES animated:YES] 
```

但就我而言，虽然我可以按上述方式进行推送，但我不想改变我的**B 类**，而是希望它不知道导航栏以前没有隐藏（因为它不是我的代码）。此外，该视图使用普通的后退按钮弹出，没有明确调用`popViewControllerAnimated:`. 在我的代码中最有效的是让我的**类 A**成为`UINavigationController`委托，并在弹出发生时隐藏委托方法调用上的工具栏。

不幸的是，我发现这些`UINavigationControllerDelegate`方法并没有太大帮助，并且在推送我的`willShowViewController`B**类**视图或从它推送的另一个视图弹回该视图时`didShowViewController`无法区分。

 **我遵循了[https://stackoverflow.com/questions/642312/](https://stackoverflow.com/questions/642312/)中关于覆盖的建议，`UINavigationController`并制作了一些自定义委托方法，其中一个在`[super popViewControllerAnimated:]`. 我的子类可在[https://gist.github.com/jpmhouston/6118713](https://gist.github.com/jpmhouston/6118713)获得，委托方法是：

```
- (void)navigationController:(UINavigationController *)navigationController isPoppingViewController:(UIViewController *)poppedViewController backTo:(UIViewController *)revealedViewController {
    if (revealedViewController == self && [poppedViewController isKindOfClass:[MyClassB class]]) {
        [navigationController setNavigationBarHidden:YES animated:YES];
        // ...and more code to run only when going from class B back to class A
    }
} 
```

我确信在`setNavigationBarHidden:`按下后退按钮后有更简单的方法可以调用，但这对我有用。******

# r - 如何读取空格分隔的字符串并将它们转换为十六进制>二进制值？

> ID：13028076
> 
> 赞同：1
> 
> 时间：2012-10-23T10:07:01.763
> 
> 标签：r

我对 R 完全陌生，想要完成以下任务：

我想读入一个包含与此类似的数据的文件：

```
0xD4 0x04 0x46 0x00 0x36 0x40 0x64 0x00 0x00 0x1E 0x00 0x04 0x00 0x26 0x00 0x27 0xB1 0x00 
```

随后，我想将分隔的字符串存储在某种数组中。之后，这些字符串应转换为它们的十六进制表示。所以字符串 0xD4 变成了值 0xd4。在另一个步骤中，我想输出每个十六进制值的二进制表示，例如：

```
0xD4: 11010100 
```

我很难阅读数据。我只知道 read.table 并尝试过：

```
values = read.table("file", sep=" ", headers=FALSE) 
```

但是价值观的表现似乎很奇怪。我不知道如何从那里着手。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:07:36.750

您可能希望按如下方式读取文件：

```
values = read.table("file", sep=" ", headers=FALSE, stringsAsFactors= F ) 
```

然后你可以简单地做

```
values <- as.numeric( values ) 
```

关于二进制表示，请参阅[此问题](https://stackoverflow.com/questions/6614283/converting-decimal-to-binary-in-r)。

# java - 使用 commons-net ftp api。我想下载文件，但这个文件大小为 0

> ID：13028081
> 
> 赞同：0
> 
> 时间：2012-10-23T10:07:36.023
> 
> 标签：java, android, ftp, apache-commons-net

我使用 commons-net-3.1 库制作简单的应用程序我想从 FTP 服务器下载文件，但下载的文件大小为 0 这个文件名是混合英文，符号（如“-”，“_”等），其他语言（如韩语、日语等）。如何解决这个问题？TT

这是代码

```
/**
 * download file. it works thread
 * 
 * @param source
 *            file path witch is remote path
 * @param destination
 *            file path witch is saving local memory
 */
public void downloadFile(String source, String destination) {
    DownloadTempFile download = new DownloadTempFile(source, destination);
    download.setDaemon(true);
    download.start();
}

class DownloadTempFile extends Thread {
    String source, destination;

    public DownloadTempFile(String source, String destination) {
        this.source = source;
        this.destination = destination;
    }

    public void run() {
        OutputStream output = null;

        try {
            File local = new File(destination);
            output = new FileOutputStream(local);

            ftpClient.retrieveFile(source, output);
        } catch (Exception e) {
            // TODO: handle exception
        }
    }
} 
```

而且，这段代码是调用上层方法

```
String tempPath = mSDpath + "/mgtec/temp";
File d = new File(tempPath);

if (d.isDirectory()) {
    String tempFile = tempPath + "/tmp" + position + ".mp3";
    NativeMusicAppActivity.mConnector.downloadFile(mAdapter
            .getItem(position).toString(), tempFile);
} else {
    if (d.mkdirs()) {
        String tempFile = tempPath + "/tmp" + position + ".mp3";
        NativeMusicAppActivity.mConnector.downloadFile(mAdapter
                .getItem(position).toString(), tempFile);
    }
} 
```

# sql - 将大序列值选择到全局变量中在 PL/SQL 代码中不起作用

> ID：13028082
> 
> 赞同：1
> 
> 时间：2012-10-23T10:07:36.883
> 
> 标签：sql, oracle, plsql

我有一个脚本，我想在其中有一个全局变量来存储事务编号以供以后使用。该代码在我获取的序列值相对较低的一个模式上运行良好。它不适用于具有更高序列值的另一个模式，我得到“数字溢出”。如果我将该序列值更改为较低的数字，它也可以正常工作，但这不是一个选项。

```
VAR TRANSACTIONNR NUMBER;

BEGIN
  --Works with        NEXTVAL being around  946713241
  --Doesn't work with NEXTVAL being around 2961725541
  SELECT MY_SEQUENCE.NEXTVAL INTO :TRANSACTIONNR FROM DUAL;
  MY_PACKAGE.STARTTRANSACTION(:TRANSACTIONNR);
END;
/

  -- SQL Statements

BEGIN
  MY_PACKAGE.ENDTRANSACTION;
  MY_PACKAGE.DO_SOMETHING(:TRANSACTIONNR);
END;
/ 
```

同样有效的是将序列选择到 DECLARE 块中声明的变量中：

```
DECLARE
  TRANSACTIONNR NUMBER;
BEGIN
  SELECT MY_SEQUENCE.NEXTVAL INTO TRANSACTIONNR FROM DUAL;
  MY_PACKAGE.STARTTRANSACTION(TRANSACTIONNR);
END;
/ 
```

但这意味着我将无法在最后的块中重用它。无法设置数字的大小。

```
VAR TRANSACTIONNR NUMBER(15) 
```

无效。

有什么想法我可以尝试或其他方法来存储全局状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:19:01.350

在进一步的调查中，这看起来可能是一个 SQL Developer 错误（当然，假设你再次在做什么......）。我可以得到同样的错误：

```
VAR TRANSACTIONNR NUMBER;

BEGIN
  SELECT 2961725541 INTO :TRANSACTIONNR FROM DUAL;
END;
/ 
```

似乎 SQL Developer`NUMBER`仅限于`2^31`，而 Oracle 通常不是这种情况。

一种可能的解决方法是用于`BINARY_FLOAT`存储该值，但您最终会遇到精度问题（不确定在哪里，但看起来可以`2^53`-ish），并且在使用它时需要将`cast()`其恢复`NUMBER`。

```
VAR TRANSACTIONNR BINARY_DOUBLE;

BEGIN
  SELECT 2961725541 INTO :TRANSACTIONNR FROM DUAL;
  -- dbms_output.put_line(cast(:TRANSACTIONNR as NUMBER)); -- null for some reason
END;
/

...

BEGIN
  dbms_output.put_line(cast(:TRANSACTIONNR as NUMBER));
END;
/ 
```

出于某种原因，我似乎无法在我设置的匿名块中再次引用绑定变量——它在注释掉的代码中为空——这似乎是另一个 SQL Developer 怪癖，无论`var`类型如何；但是当你在你的代码中这样做时，我可能再次假设太多......

* * *

*后代的原始答案，因为它可能在其他情况下仍然相关......*

大概你正在做一些事情来结束当前的交易，例如 a `commit`in `endtransaction`; 否则你可以`my_sequence.currval`在`do_something`通话中提及。但是，对于这种大小的`number`数字，变量是可以的，它不会对大小的序列产生任何影响，并且它来自序列而不是手动分配不会有任何区别。我认为问题不在于存储或顺序。

错误似乎更有可能来自您正在调用的包过程之一，尽管我无法想象您可能会用它做什么；像这样的事情会导致同样的错误：

```
create sequence my_sequence start with 2961725541;

create package my_package as
procedure starttransaction(v_num number);
procedure endtransaction;
procedure do_something(v_num number);
end my_package;
/

create package body my_package as

procedure starttransaction(v_num number) is
begin
    dbms_output.put_line('starttransaction(): ' || v_num);
    for i in 1..v_num loop
        null;
    end loop;
end starttransaction;

procedure endtransaction is
begin
    dbms_output.put_line('endtransaction()');
end endtransaction;

procedure do_something(v_num number) is
begin
    dbms_output.put_line('do_something(): ' || v_num);
end do_something;

end my_package;
/ 
```

当您的代码针对它运行时，它会引发您的错误：

```
BEGIN
*
ERROR at line 1:
ORA-01426: numeric overflow
ORA-06512: at "STACKOVERFLOW.MY_PACKAGE", line 6
ORA-06512: at line 5

endtransaction()
do_something(): 
```

请注意，该错误是针对包中的第 6 行报告的，这是该`for ... loop`行，而不是来自匿名块中的分配。

像这样循环当然是一件奇怪的事情，但可能还有其他方法可以产生该错误。它工作的断点是如果在`nextval`上面`2^31`。如果我以 2147483647 开始序列，它可以工作，而 2147483648 则错误。

我假设您实际上是`ORA-01426`从原始问题中得到的；如果它实际上是 a `ORA-1438`，`ORA-06502`则通过尝试将值分配给`number(9)`列或变量来更容易重现。不过，“数字溢出”非常具体。

# javascript - Jquery mobile 和 toggleClass 使导航栏 li 具有开启和关闭状态

> ID：13028084
> 
> 赞同：0
> 
> 时间：2012-10-23T10:07:45.637
> 
> 标签：javascript, jquery, css, jquery-mobile, toggleclass

[http://rickgutierrez.bol.ucla.edu/navbartest.html](http://rickgutierrez.bol.ucla.edu/navbartest.html)

这是我的基本 jquery 移动导航设置。我试图让前三个导航栏元素的功能更像是打开和关闭状态的切换；单击按钮，它会切换到另一个状态（不影响其他按钮状态），再次单击它，它会切换回来。页面加载时，1处于on状态，由.ui-btn-active设置样式，2、3、4处于off状态；我不太确定 jquery 移动 css 代码的哪一部分设置关闭状态。还有我认为可能相关的 ui-btn-up-a 和 ui-btn-down-a 样式。

经过一些研究，我遇到了几个 toggleClass 教程： [http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

jquery 教程的第一个演示最接近我正在寻找的独立功能。该演示中的代码直截了当且简单，这就是为什么我无法让它在我的页面上运行而感到沮丧的原因。

任何人都可以提供一些指示吗？我应该使用哪些类？是 jquery 移动库中的 toggleClass 还是我需要添加指向最新 jquery 脚本的链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:16:00.287

我已经使用 JsBin 创建了一个代码。希望它有所帮助：http: [//jsbin.com/exenov/4/edit](http://jsbin.com/exenov/4/edit)

我添加了一个新类（custom-btn-active），我在 jQuery on click 函数中使用它。

您应该在 jquerymobile.css 文件中做的唯一一件事就是删除原始`.ui-btn-active`css。因为我无法使用 jQuery 删除该类（我完全不知道为什么）

检查我的 Jsbin > 单击时按钮保持绿色，再次单击时它会熄灭（不要注意蓝色背景，因为那是您需要删除的 .ui-btn-active ）。

# android - 将maven项目导入Eclipse/Android项目

> ID：13028088
> 
> 赞同：1
> 
> 时间：2012-10-23T10:07:57.150
> 
> 标签：android, eclipse, maven, export

[我从http://www.neurotechnology.com/megamatcher.html](http://www.neurotechnology.com/megamatcher.html)下载了 Megamatcher Android SDK 我已经在 android 设备上实现了一个人脸标识符现在我想将我的标识符的性能与公司标识符（上面那个）进行比较我的问题是将 Megamatcher 教程中的 mvn 项目导出到 Eclipse 下的 android 项目中。

有一种方法可以从一个 Maven 项目创建一个 Eclipse 项目吗？包括所有远程和本地依赖项？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:53:51.863

也许这正是您正在寻找的内容 From: [source](http://maven.apache.org/guides/mini/guide-ide-eclipse.html) :

> 如果您有一个仅由一个模块组成的简单 java 项目，则使用 eclipse 非常简单。要从 POM 生成 eclipse 项目文件，请执行以下命令：
> 
> mvn 日食：日食
> 
> 如果您已使用 eclipse 创建或签出项目，则只需在工作区中刷新项目。否则，您必须将项目导入您的 Eclipse 工作区（从菜单栏中选择 File >Import >Existing Projects into Workspace）。在后一种情况下，项目（目录）不应位于您的工作区中，因为 eclipse 可能会遇到麻烦，尤其是如果您想使用 eclipse 作为 scm 客户端。

# php - PHP 无法识别 AJAX 调用

> ID：13028092
> 
> 赞同：0
> 
> 时间：2012-10-23T10:08:10.297
> 
> 标签：php, jquery, ajax

我通过 jQuery 的 AJAX 方法调用文件如下所示：

```
 $is_ajax = $_REQUEST['is_ajax'];
    if(isset($is_ajax) && $is_ajax)
    {
        echo 'its ajax!';
    }
    else echo 'im called, but not via ajax'; 
```

和我的 AJAX 调用：

```
jQuery.ajax({
                type: 'POST',
                url: 'my-service.php',
                data: data,
                success: function(response) { 
                    alert(response);
                 }
            }); 
```

但警报总是显示“不是 ajax”消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:15:23.487

看来你检测AJAX的方法是错误的。如果您的服务器支持 HTTP_X_REQUESTED_WITH，那么这就是要走的路：

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  /* special ajax here */
  die($content);
} 
```

来源：[检测 AJAX 请求](http://davidwalsh.name/detect-ajax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:12:26.910

需要添加`is_ajax: 1`通过 AJAX 调用发送的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T10:12:56.207

试试这个 ：

```
jQuery.ajax({
            type: 'POST',
            url: 'my-service.php',
            data: {is_ajax:1},
            success: function(response) { 
                alert(response);
             }
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:12:08.233

**另一种方法**

您可以像这样简单地检查请求是否为 AJAX，

```
/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  echo 'its ajax!';
}else{
  echo 'im called, but not via ajax';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T10:13:08.817

编辑您的 AJAX 调用并修改数据

```
jQuery.ajax({
            type: 'POST',
            url: 'my-service.php',
            data: {"is_ajax":"the value"},
            success: function(response) { 
                alert(response);
             }
        }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T10:14:03.250

试试这个 ：

```
if(isset($_POST['is_ajax']))
{
    echo 'its ajax!';
}
else 
{
echo 'im called, but not via ajax';
} 
```

# r - 是否可以参数化 ar 包版本？

> ID：13028093
> 
> 赞同：5
> 
> 时间：2012-10-23T10:08:12.453
> 
> 标签：r, automation, versioning, packages

我发现自己正在更新我经常维护的 r-packages 的版本和日期。版本和日期都存在于DESCRIPTION、packageName-package.Rd 和man/packageName-package.Rd 中。我忘记在一个文件中更新好几次了。这些最初是由 package.skeleton 命令生成的。是否有类似的命令/实用程序脚本来更新版本？

**编辑：**仔细检查后，不需要 Rd 文件中自动生成的版本和日期。正确的日期和版本仍然出现在生成的手册中。所以很明显，这只留下一个地方来更新这些信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:54:13.420

Paul Hiemstra 的想法对我来说似乎很有用，所以我写了那几行代码：

```
upVers <- function(path,update="snapshot",date=TRUE,simplify=TRUE)
{
  # This function updates the description file from package
  # in path (assumed work directory by default, as typical
  # with projects in RStudio using GitHub).

  # Usage:
    # path: path to contents of a package
    # update: What to update? "version", "major", "minor", "snapshot"
    # date: Update date as well?
    # simplfy: omit trailing zeros?

  # Assumes following numbering system:
  # version.major.minor-snapshot

  uplist <- c("version","major","minor","snapshot")

  if (missing(path)) path <- getwd()
  DESCfile <- paste0(path,"/DESCRIPTION")
  if (!file.exists(DESCfile)) stop("DESCRIPTION does not exist. Is this the folder of a package?")

  DESC <- readLines(DESCfile)

  ### Update date:
  if (date)
  {
    DESC <- gsub("(?<=Date: )\\d{4}-\\d{2}-\\d{2}",Sys.Date(),DESC,perl=TRUE)
  }

  ### Update version:
  Vers <- regmatches(DESC,regexpr("(?<=Version: )\\d+\\.?\\d*\\.?\\d*\\-?\\d*",DESC,perl=TRUE))
  Vers <- as.numeric(unlist(strsplit(Vers,split="\\.|\\-")))
  Vers <- c(Vers,rep(0,length=4-length(Vers)))
  Vers[grep(update,uplist,ignore.case=TRUE)] <- Vers[grep(update,uplist,ignore.case=TRUE)] + 1
  Vers[1:4>grep(update,uplist,ignore.case=TRUE)] <- 0

  # Combine and replace:
  Vers <- paste(paste(Vers[1:3],collapse="."),Vers[4],sep="-")
  if (simplify)
  {
    Vers <- gsub("\\.?0?\\.?0?\\-?0?$","",Vers)
  }
  DESC <- gsub("(?<=Version: )\\d+\\.?\\d*\\.?\\d*\\-?\\d*",Vers,DESC,perl=TRUE)

  # Write Description:
  writeLines(DESC,DESCfile)
} 
```

此函数`DESCRIPTION`使用版本编号系统更新文件`version.major.minor-snapshot`，默认情况下更新快照和日期。例如：

```
# An R package:
f <- function() "foo"
package.skeleton("Foo","f")

# Update:
upVers("Foo")

# DESCIRPTION now shows version number 1.0.0-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:10:25.657

我不知道有这样的工具，但您可以利用 R 函数（如`gsub`）或外部工具（如`grep`and `sed`）来编程此类行为。这不应该超过几行 R。

# c# - 自动完成 jquery asp.net c#

> ID：13028095
> 
> 赞同：1
> 
> 时间：2012-10-23T10:08:21.533
> 
> 标签：c#, jquery, asp.net

我的数据库表 TAGS(TagId,TagName) 我的 web 方法代码如下

```
 public List<Tag> FetchTagList(string tag)
{
    OleDbConnection cn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\"|DataDirectory|\\ImageDB2.mdb\";Persist Security Info=True");
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string query = "select * from TAGS Where TagName like '@myParameter'";
    OleDbCommand cmd = new OleDbCommand(query,cn);
    cmd.Parameters.AddWithValue("@myParameter", "%" + tag + "%");
    try
    {
        cn.Open();
        cmd.ExecuteNonQuery();
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        da.Fill(ds);
    }
    catch(OleDbException excp)
    {

    }
    finally
    {
        cn.Close();
    }
    dt = ds.Tables[0];

    List<Tag> Items = new List<Tag>();

    Tag obj;

    foreach (DataRow row in dt.Rows)
    {
        obj = new Tag();
        //String From DataBase(dbValues)
        obj.TagName = row["TagName"].ToString();
        obj.ID = Convert.ToInt32(row["TagId"].ToString());

        Items.Add(obj);
    }
    return Items;
} 
```

}

我用过课

公共类标签 { 公共 int ID { 获取；放; } 公共字符串 TagName { 获取；放; } }

我的 JavaScript 代码是

```
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="jsautocom/jquery.min.js" type="text/javascript"></script>
<script src="jsautocom/jquery-ui.min.js" type="text/javascript"></script><script type="text/javascript">
        $(function () {
            $(".tb").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "WebService.asmx/FetchTagList",
                        data: "{ 'tag': '" + request.term + "' }",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    value: item.TagName
                                }
                            }))
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });
                },
                minLength: 1
            });
        });
    </script> 
```

我的 aspx 页面就像

```
<div class="demo">
    <div class="ui-widget">
        <label for="tbAuto">Search Tag: </label>
          <asp:TextBox ID="TextBox1" class="tb" runat="server" ontextchanged="TextBox1_TextChanged"></asp:TextBox>
          <asp:Button ID="btnSearch" runat="server" CssClass="btnSearch" 
    onclick="btnSearch_Click" Text="Search"  />
    </div>
</div> 
```

但我什么也没得到。如何解决它。非常感谢任何帮助我的人。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:23:48.017

只需更改 ajax 中的数据和响应，如下所示

```
data: "{'PhoneContactName':'" + document.getElementById("<%= ContactName.ClientID %>").value + "'}",

dataType: "json",

success: function (data) {
    response(data.d);
},

error: function (result) {
    alert("Error");
} 
```

在您的情况下，将 PhoneContactName 更改为标签等，

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:22:38.487

这里有两点需要注意：

A-确保您可以调用您的服务方法，在您的函数上使用 [WebMethod] 属性以使其可通过 http 调用。您可能还需要稍微调整 WebService 设置以使其正常工作。

B- 你的 javascript 代码对于这个任务来说太多了。考虑到 Autocomplete 官方文档中写的内容，您只需要指出 2 件事：

1.  获取方法的 URL，
2.  用户将要写入的控件，并将使用内部的当前值触发自动完成调用。

考虑以下示例：

```
$(".tb").autocomplete({source: "URL_OF_YOUR_REMOTE_METHOD"}); 
```

考虑到您的示例，您需要输入以下代码：

```
$(".tb").autocomplete({source: "WebService.asmx/FetchTagList"}); 
```

这是使其工作所需的最少代码段。但是像你一样手动处理所有事情有点复杂，而且一旦问题开始发生就不容易弄清楚我们的问题。

一个活生生的例子：http: [//jsfiddle.net/grtWe/1/](http://jsfiddle.net/grtWe/1/)

只需使用这段代码并让我知道它是否有效，那么我们可以从这里开始实现您的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:36:22.817

如果 FetchTagList 是您从 jquery 调用的网络方法，那么不要从方法返回列表，您可以将数据表直接绑定到自动完成文本框，只需检查以下链接如何做到这一点。

[http://nareshkamuni.blogspot.in/2012/06/sample-example-of-jquery-autocomplete.html](http://nareshkamuni.blogspot.in/2012/06/sample-example-of-jquery-autocomplete.html)

你也可以使用 ajax 自动完成扩展器来做到这一点。对于使用 ajax 自动完成扩展器，请参考以下链接

[http://www.aspsnippets.com/Articles/ASPNet-AJAX-AutoCompleteExtender-Pass-Additional-Parameter-to-WebMethod-using-ContextKey.aspx](http://www.aspsnippets.com/Articles/ASPNet-AJAX-AutoCompleteExtender-Pass-Additional-Parameter-to-WebMethod-using-ContextKey.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T07:44:48.397

脚本如下：

```
<script type="text/javascript">
    $(document).ready(function () {
        SearchText();

    });
    function SearchText() {
        $(".auto").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Photos.aspx/GetAutoCompleteData",
                    data: "{'CategoryName':'" + document.getElementById("<%= txtCategory.ClientID %>").value + "'}",
                    dataType: "json",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error Occurred");
                    }
                });
            }
        });

    }
            </script> 
```

网络方法：

```
[WebMethod]

public static List<string> GetAutoCompleteData(string CategoryName)
{
    List<string> result = new List<string>();
    OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\"|DataDirectory|\\ImageDB2.mdb\";Persist Security Info=True");
    string query = "select TagName from TAGS where TagName LIKE '%" + CategoryName + "%'";
    OleDbCommand cmd = new OleDbCommand(query, con);
    con.Open();
    //cmd.Parameters.Add("@ptext", System.Data.SqlDbType.NVarChar).Value = CategoryName;
    OleDbDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        result.Add(dr["TagName"].ToString());
    }
    return result;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-17T09:42:55.200

# C# 代码

这里需要记住一件事，Json 数据我们不能手动创建，使用 JavaScriptSerializer 类创建

```
<%@ WebHandler Language="C#" Class="CountryStateCityHandler" %>

using System;
using System.Web;
using System.Data;
using System.Collections.Generic;

public class CountryStateCityHandler : IHttpHandler
{
public void ProcessRequest(HttpContext context)
{
if (context.Request.QueryString["action"] != null)
{
string strCallbackFunf = string.Empty;

if (context.Request.QueryString["callback"] != null)
{
strCallbackFunf = Convert.ToString(context.Request.QueryString["callback"]).Trim();
}

if (context.Request.QueryString["action"] == "getcountry")
{                   
DataTable dt = GetDataTable("EXEC PR_GetCountries"); //GetDataTable need to write, this method will call the Database and get the result
System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
List<Dictionary<string, object>> rows = new List<Dictionary<string, object>>();
Dictionary<string, object> row;
foreach (DataRow dr in dt.Rows)
{
row = new Dictionary<string, object>();
foreach (DataColumn col in dt.Columns)
{
row.Add(col.ColumnName, dr[col]);
}
rows.Add(row);
}

context.Response.ContentType = "text/plain";
if (string.IsNullOrEmpty(strCallbackFunf))
{
context.Response.Write(serializer.Serialize(rows));
}
else
{
context.Response.Write(strCallbackFunf+"("+serializer.Serialize(rows)+");");      
}
}
}
}
public bool IsReusable
{
get
{
return false;
}
}
} 
```

# //需要附上HTML CODE或.aspx代码和脚本。

```
<html>
<head>
<script src="../scripts/jquery-1.7.js"></script>
<link href="../scripts/jqueryui/development-bundle/themes/smoothness/minified/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../scripts/jqueryui/js/jquery-ui-1.10.4.custom.min.js"></script>
<link href="../scripts/jqueryui/development-bundle/demos/demos.css" rel="stylesheet"  type="text/css" />
<script language="JavaScript" type="text/javascript">     

    var CountriesTags; //Local variable to store json object

    $(function () {
        $("#lnkCountry")
          .attr("tabIndex", -1)
          .attr("title", "Show All Items")
          .button({
              icons: {
                  primary: "ui-icon-triangle-1-s"
              },
              text: false
          })
          .removeClass("ui-corner-all")
          .addClass("custom-combobox-toggle ui-corner-right")
          .click(function () {              
              var wasOpen = $("#Country").autocomplete("widget").is(":visible");
              $("#Country").autocomplete("widget").css("display", "none");
              if (wasOpen) {
                  $("#Country").autocomplete("widget").css("display", "none");
                  return;
              }
              // Pass empty string as value to search for, displaying all results
              $("#Country").autocomplete("search", "");
          }); 

        $("#Country").autocomplete({
            source: function( request, response) {
                var matcher = new RegExp("(^| )" + $.ui.autocomplete.escapeRegex(request.term), "i");
                response($.grep(CountriesTags, function (item) {
                    return matcher.test(item.label);
                }));
            },
            minLength: 0,
            select: function (event, ui) {
                var sv = ui.item.label;
                var res = $.grep(CountriesTags, function (e, i) {
                    return e.label == sv;
                });
                if (res.length == 0) {                    
                    this.value = "";
                    $("#CountryID").val("");
                    alert(sv + " country is not available in database.");
                }
                else {
                    $("#CountryID").val(res[0].id);
                }
            },
            change: function (event, ui) {
                var sv = this.value;
                var res = $.grep(CountriesTags, function (e, i) {
                    return e.label == sv;
                });
                if (res.length == 0) {                    
                    this.value = "";
                    $("#CountryID").val("");
                    alert(sv + " country is not available in database.");
                }
                else {
                    $("#CountryID").val(res[0].id);
                }
            },
        });
        LoadCountry();
    }

    //html inputs Value are country id (<%=CountryID %>) and country name (<%=Country%>)
    function LoadCountry() {
        $.ajax({
            url: "CountryStateCityHandler.ashx?action=getcountry",
            dataType: "jsonp",
            type: 'GET',
            async: false,
            success: function (data) {
                CountriesTags = data;
                //array of Json Object will return
                //label, value and id are keys
                //Example  id:219 label:"United States" value:"United States"
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status + ' - Method: Loading countries - ' + thrownError);
            }
        });
    }
</script>
</head>

<body>

<table border="0" cellspacing="0" cellpadding="0">
<tr>
    <td>        
        <input type="text" name="Country" id="Country" maxlength="50" size="20" class="TextBox" value="<%=Country%>" /> 
        <input type="hidden" id="CountryID"  name="CountryID"  value="<%=CountryID %>">
    </td>
    <td>
        <a style="height: 16px" id="lnkCountry"></a>
    </td>                                                
</tr>

</table>

</body>

</html> 
```

# gwt - 如何替换日期对象

> ID：13028098
> 
> 赞同：1
> 
> 时间：2012-10-23T10:08:33.997
> 
> 标签：gwt

```
Date date = new Date();
int lastMonth = date.getMonth();
int lastYear = 1900 + date.getYear(); 
```

我的 GWT 项目中有这段代码，但 java.util.Date 的很多方法已被弃用，22/33 方法。
所以我想使用 Calendar/GregorianCalendar ：它不起作用。它说缺少一个包裹。

用未弃用的代码替换这些代码行的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:22:19.283

不。

`java.util.Calendar`几乎不可能模仿，而且开销太高。`java.util.Date`，虽然远非理想，但最接近 JavaScript 的`Date`，所以它是你应该在*GWT 世界*中使用的。

[JSR 310](http://threeten.sf.net)很有希望（虽然不知道它的模拟效果如何，以及与 相比有多少开销`java.util.Date`）但还没有。

还有 Joda Time（来自与 JSR 310 相同的作者，JSR 310 旨在将 Joda Time 引入 JDK 并修复其早期的一些设计错误），但大多数 GWT 端口早已被放弃。

最后：使用`java.util.Date`.

如果您发现弃用警告很烦人，请取消它们：`@SuppressWarnings("deprecated")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:31:41.987

java.util.Date 没有被弃用！诚然，我尽量避免使用其中的许多方法（如 getMonth 和 getYear）。对于 GWT，您可以使用[DateTimeFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/i18n/client/DateTimeFormat.html)之类的东西来进行日期格式化和解析。

# ios - 空drawRect实现导致内存警告

> ID：13028099
> 
> 赞同：2
> 
> 时间：2012-10-23T10:08:34.640
> 
> 标签：ios, drawrect, uibezierpath

我有一个 UIView，我用手指在其上绘制 UIBezierPath。当我重新缩放视图（例如在绘制路径之后）时，会触发重绘函数，该函数会重新缩放 BezierPath：

```
- (void)redrawPathsWithScale:(float)scale
{
    [_path applyTransform:CGAffineTransformMakeScale(scale, scale)];
    [self setNeedsDisplay];
} 
```

`setNeedsDisplay`导致`drawRect`被调用。现在，每次我放大到 x6 附近的某个绝对比例时，我都会立即收到内存警告，并且应用程序崩溃。

我的`drawRect`方法如下所示：

```
- (void)drawRect:(CGRect)rect
{   
    [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
} 
```

奇怪的是：根本不实施`drawRect`会消除内存警告。实现一个空`drawRect`仍然会导致崩溃！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:14:05.340

添加`[super drawRect:rect];`有什么不同吗？

drawRect 的 Apple 文档指出：

> 如果你直接继承 UIView，你的这个方法的实现不需要调用 super。但是，如果您要对不同的视图类进行子类化，则应在实现中的某个时刻调用 super。

如果你是 UIView 的子类，你应该没问题，但为了以防万一，可能值得检查一下。

# c# - 检查用户是否在 Skype 上注册

> ID：13028100
> 
> 赞同：0
> 
> 时间：2012-10-23T10:08:34.950
> 
> 标签：c#, skype

我正在使用 Skype API 进行视频通话。到目前为止，视频通话工作正常。我使用 Xml 文件来保存 Skype 凭据（用于呼叫任何其他 Skype 朋友/用户）。在将 Skype 凭据保存到 Xml 文件之前，我想确保提供的用户名是否已在 Skype 上注册。

如何检查用户是否在 Skype 上注册？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:20:57.753

据推测，在某些时候您正在使用凭据连接到 Skype。

在成功连接之前不要保存凭据。

（我希望“凭证”不是指“明文用户名和密码”。）

# android - 安卓市场的平板电脑中没有安装 Apk 文件？

> ID：13028101
> 
> 赞同：1
> 
> 时间：2012-10-23T10:08:40.937
> 
> 标签：android, apk

我开发了一个应用程序并将apk文件上传到android市场。它已在所有手机设备中安装并正常工作，**但未安装在平板电脑中**。但是，如果我将 apk 直接安装到平板电脑中，它的工作原理。

我在清单文件中使用了以下内容。

```
 <supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:anyDensity="true"
              android:xlargeScreens="true" />
              /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:18:08.527

将以下代码行添加到您的 android 清单文件中

```
<uses-feature android:name="android.hardware.touchscreen"  android:required="false" /> 
```

有关更多信息，请参见下面的链接。

[应用程序与平板电脑不兼容](https://stackoverflow.com/questions/10832664/app-not-compatible-with-tablet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:02:18.093

您的应用程序似乎无法针对平板电脑屏幕尺寸进行拉伸。

请注意以下几点：

**如果应用程序正确调整大小以填满整个屏幕，则应用程序“支持”给定的屏幕大小。**系统应用的正常调整大小适用于大多数应用程序，您无需做任何额外的工作即可使您的应用程序在比手机设备更大的屏幕上工作。但是，通过提供替代布局资源来针对不同的屏幕尺寸优化应用程序的 UI 通常很重要。例如，与在手机设备上运行时相比，您可能希望在平板电脑上修改活动的布局。

但是，**如果您的应用程序在调整大小以适应不同的屏幕尺寸时无法正常工作，您可以使用元素的属性来控制您的应用程序是应该分发到较小的屏幕还是将其 UI 放大（“缩放”）以适应更大的屏幕屏幕使用系统的屏幕兼容模式。**当您没有为更大的屏幕尺寸进行设计并且正常调整大小无法达到适当的效果时，屏幕兼容模式将通过模拟正常尺寸的屏幕和中等密度来缩放您的 UI，然后放大以使其充满整个屏幕。

**消除**

```
<supports-screens> 
```

**并尝试使用：**

```
<compatible-screens>
        <screen
            android:screenDensity="mdpi"
            android:screenSize="normal" />
        <screen
            android:screenDensity="hdpi"
            android:screenSize="normal" />
        <screen
            android:screenDensity="xhdpi"
            android:screenSize="normal" />
        <screen
            android:screenDensity="hdpi"
            android:screenSize="large" />
        <screen
            android:screenDensity="xhdpi"
            android:screenSize="large" />
        <screen
            android:screenDensity="213"
            android:screenSize="large" />
    </compatible-screens> 
```

# wpf - wpf - vb - 动画 gridsplitter / 停靠面板

> ID：13028103
> 
> 赞同：0
> 
> 时间：2012-10-23T10:09:04.503
> 
> 标签：wpf

这与我之前的问题有关-我想为网格拆分器设置动画（使面板滑入/滑出视图）。我们非常擅长 VB，并且已经有一个 VB 项目，所以如果可以的话，我们希望继续使用 VB，但大多数 WPF 示例似乎都是在 XAML 或 CS 中。

我有一些简单的 VB 动画代码可以工作，但是：

当然，需要动画的是网格列/行的宽度/高度，这不是依赖属性。我在 CS 中发现了一些巧妙的东西来创建依赖属性，但无法将其转换为 vb。所以我找到了一个简单的解决方法，即在网格单元格中为停靠面板设置动画，捕捉它的大小更改事件并使用这些来设置单元格网格大小。它有效，但我想知道它是否效率较低，因为有两件事是分开改变的？我还必须（当动画完成时）以正确的比例将网格单元大小设置回 *，并将停靠面板大小设置回 auto。

它有效，但似乎有点笨拙 - 有人有一个直接从 VB 制作网格动画的例子还有其他建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:17:12.623

作为参考，这里是用于为 gridsplitter 设置动画的依赖属性的 VB 代码：

```
Public Class GridLengthAnimation
Inherits AnimationTimeline
Public Sub New()
End Sub

Public Property From() As GridLength
    Get
        Return DirectCast(GetValue(FromProperty), GridLength)
    End Get
    Set(value As GridLength)
        SetValue(FromProperty, value)
    End Set
End Property

Public Shared ReadOnly FromProperty As DependencyProperty 
  = DependencyProperty.Register("From", GetType(GridLength), 
      GetType(GridLengthAnimation))

Public Property [To]() As GridLength
    Get
        Return DirectCast(GetValue(ToProperty), GridLength)
    End Get
    Set(value As GridLength)
        SetValue(ToProperty, value)
    End Set
End Property

Public Shared ReadOnly ToProperty As DependencyProperty 
   = DependencyProperty.Register("To", GetType(GridLength), 
        GetType(GridLengthAnimation))

Public Overrides ReadOnly Property TargetPropertyType() As Type
    Get
        Return GetType(GridLength)
    End Get
End Property

Protected Overrides Function CreateInstanceCore() As Freezable
    Return New GridLengthAnimation()
End Function

Public Overrides Function GetCurrentValue
      (defaultOriginValue As Object, 
       defaultDestinationValue As Object, 
       animationClock As AnimationClock) As Object
    Dim fromValue As Double = Me.From.Value
    Dim toValue As Double = Me.[To].Value

    If fromValue > toValue Then
        Return New GridLength((1 - animationClock.CurrentProgress.Value) 
             * (fromValue - toValue) + toValue, 
                If(Me.[To].IsStar, GridUnitType.Star, GridUnitType.Pixel))
    Else
          Return New GridLength((animationClock.CurrentProgress.Value) * 
                (toValue - fromValue) + fromValue, 
                   If(Me.[To].IsStar, GridUnitType.Star, GridUnitType.Pixel))
    End If
End Function
End Class 
```

# javascript - 如何使用 html2canvas 存储屏幕截图？

> ID：13028105
> 
> 赞同：2
> 
> 时间：2012-10-23T10:09:05.133
> 
> 标签：javascript, jquery, html2canvas

我正在尝试使用 html2canvas 0.34 保存网站的屏幕截图。

但我不知道截图保存在哪里，如何将截图存储到我的数据库中，或者用新窗口打开图像。

我的代码如下：

```
<script type="text/javascript">
$('div').html2canvas({
onrendered: function( canvas ) {
var img = canvas.toDataURL();
window.open(img);
}
});
</script>

</head>
<body>         
<h1>Testing</h1>
<div>
<img src='http://25.media.tumblr.com/tumblr_mcc5k9YRli1rt6zh0o1_500.jpg'>
</div>
</body></html> 
```

我想将图像的屏幕截图存储到数据库中或在另一个窗口中打开。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:15:11.940

toDataURL 函数仅将图像数据作为字符串返回，无法保存（因为 JS 无权访问文件系统）

为了保存它，您必须让浏览器将其作为图像加载，或者让服务器端脚本处理它。

这应该对你有用 [http://www.kevinsookocheff.com/2011/07/27/saving-canvas-data-to-an-image-file-with-javascript-and-php/](http://www.kevinsookocheff.com/2011/07/27/saving-canvas-data-to-an-image-file-with-javascript-and-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T10:57:46.563

```
 var data = canvas.toDataURL();
-----------------For Downloading Imgage in Chrome (just 4 testing)-------------------------
/* var save = document.createElement('a');
        save.href = data;
        save.target = '_blank';
        save.download = 'fileName';

        var event = document.createEvent('Event');
        event.initEvent('click', true, true);
        save.dispatchEvent(event);
        (window.URL || window.webkitURL).revokeObjectURL(save.href);*/
//--------------------------------- 
```

# html - XPath 获取具有属性的 CSS 类

> ID：13028107
> 
> 赞同：0
> 
> 时间：2012-10-23T10:09:09.080
> 
> 标签：html, xpath

我需要获取具有相应属性的 CSS 类、`c1`、`c2`等，但我无法弄清楚。可以完成还是 CSS 超出了 XPath 的范围？

例子：

```
<style type="text/css">&#13;
    p.c6 {font-weight: bold; text-align: left}&#13;
    p.c5 {font-weight: bold}&#13;
    p.c4 {text-align: left}&#13;
    td.c3 {font-weight: bold}&#13;
    p.c2 {text-align: center}&#13;
    p.c1 {font-weight: bold; text-align: center}&#13;
</style> 
```

# c - 为C中的结构类型常量赋值

> ID：13028110
> 
> 赞同：3
> 
> 时间：2012-10-23T10:09:16.920
> 
> 标签：c, visual-studio-2010

我有以下代码，我猜是为常量结构赋值

在头文件中：

```
struct madStruct {
    uint8_t code;
    uint8_t cluster;
};
typedef struct madStruct MadStruct; 
```

并在`C`文件中

```
const MadStruct madStructConst = {
    .code = 0x00,
    .cluster = 0x01,
}; 
```

我想知道这段代码应该做什么？

此代码无法在 Visual Studio C++ 2010 中编译，如何转换它以便在 MingW 和 Visual Studio C++ 2010 中编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T10:14:26.650

该语法是在 C99 中引入的，允许在初始化时显式指定成员的名称（`.code`和`.cluster`称为*指示符*）。初始化将值分配给`0x00`成员`code`并将值分配`0x01`给`cluster`成员。

VC只支持C89，所以编译失败。由于`struct`只有两个成员并且都正在初始化，因此您可以将初始化替换为：

```
const MadStruct madStructConst = { 0x00, 0x01 }; 
```

如果没有指示符，则使用指定的值初始化成员，按照在 . 中定义成员的顺序`struct`。在这种情况下`code`is assigned`0x00`和`cluster`is assigned `0x01`，与使用指示符的初始化相同。

# forms - Struts 2：从具有模型驱动架构的表单中更新对象列表

> ID：13028113
> 
> 赞同：5
> 
> 时间：2012-10-23T10:09:24.603
> 
> 标签：forms, model, struts2, populate

我已经在这里搜索并找到了几种方法，但我无法让它们为我的项目工作。

我想显示一个对象列表的编辑页面，这些对象应该立即更新。我使用模型驱动的架构方法来实现这一点，但我无法让它正常运行。我总是可以显示和迭代列表及其值，但我不能修改它的值。

所以这就是我目前正在做的事情：

我的数据库中有一个模型“Teilzeitgrad”，它有一些带有 getter 和 setter 的简单属性。

```
public class Teilzeitgrad {

    private Date datumAb;
    private Date datumBis;
    private double betrag;

    // ... getters and setters

} 
```

在我的 Action-Class 中，我使用 Teilzeitgrad-Objects 列表实现了 ModelDriven 接口

```
public class DienstabschnittViewJahrAction implements ModelDriven<List<Teilzeitgrad>>, Preparable
{
    List<Teilzeitgrad> teilzeitgrads;
    private String tzgTypKey;
    private Integer jahrIndex;

    public String execute() {
        return SUCCESS;
    }

    public List<Teilzeitgrad> getModel()
    {
        if(teilzeitgrads == null) {
            teilzeitgrads = getTeilzeitgradListByTypAndJahr(getTzgTypKey(), getJahrIndex());
        }
        return teilzeitgrads;
    }

    public List<Teilzeitgrad> getTeilzeitgrads()
    {
        return teilzeitgrads;
    }

    public void setTeilzeitgrads(List<Teilzeitgrad> teilzeitgrads)
    {
        this.teilzeitgrads = teilzeitgrads;
    }

    @Override
    public void prepare() throws Exception
    {
        // TODO Auto-generated method stub  
    }

    public String getTzgTypKey()
    {
        return tzgTypKey;
    }

    public void setTzgTypKey(String tzgTypKey)
    {
        this.tzgTypKey = tzgTypKey;
    }

    public Integer getJahrIndex()
    {
        return jahrIndex;
    }

    public void setJahrIndex(Integer jahrIndex)
    {
        this.jahrIndex = jahrIndex;
    }
} 
```

中的动作映射`struts.xml`定义如下：

```
<action name="*/auth/GroupAdmin/processEditDienstabschnittJahr" method="execute" class="org.hocon.ul.portal.action.DienstabschnittViewJahrAction">
    <result name="success" type="redirect">${referer}</result>
</action> 
```

在我的 JSP 文件中，我正在迭代模型对象，在文本字段或列表中显示其值，如下所示：

```
<ul:form action="auth/GroupAdmin/processEditDienstabschnittJahr">
<s:iterator value="model" status="rowStatus">

<tr>
    <td style="text-align: center;">
        <s:date name="model.get(#rowStatus.index).datumAb" var="datumAb_DE" format="dd.MM.yyyy" />
        <s:textfield style="width:70px;" name="model.get(#rowStatus.index).datumAb" value="%{#datumAb_DE}" label="DatumAb"></s:textfield >
    </td>

    <td style="text-align:center;">
        <s:date name="model.get(#rowStatus.index).datumBis" var="datumBis_DE" format="dd.MM.yyyy" />
        <s:textfield style="width:70px;" name="model.get(#rowStatus.index).datumBis" value="%{#datumBis_DE}" label="DatumBis"></s:textfield >
    </td>

    <td class="currency">
        <s:set var="tzgBetrag">
            <fmt:formatNumber type="NUMBER" maxFractionDigits="0"><s:property value="%{getBetrag()*100}"></s:property></fmt:formatNumber>
        </s:set>
        <s:textfield style="width:30px;" maxlength="3" name="model.get(#rowStatus.index).betrag" value="%{#tzgBetrag}" label="Betrag"></s:textfield >
    </td>
</tr>

</s:iterator>
<s:submit style="width:24px; height:24px;" type="image" src="../../../res/24px/floppy-disk.png" value="Speichern"></s:submit>
</ul:form> 
```

ul-tag 来自自定义 taglib，它将客户特定的 url 参数添加到操作路径。

因此，当我显示页面时，它会显示我所有的 Teilzeitgrad 记录，每个条目都有一行。但是当我提交表单时，我的模型列表没有被填充。`setTeilzeitgrads(List<Teilzeitgrad> teilzeitgrads)`甚至根本没有调用setter 。我还尝试访问数组语法中的列表：

`<s:textfield style="width:70px;" name="teilzeitgrads[#rowStatus.index].datumAb" value="%{#datumAb_DE}" label="DatumAb"></s:textfield >`

但这也没有用。

解决此案的任何帮助都将不胜感激！提前致谢！

伦佐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:26:51.953

好的 - 这是列表索引的一个非常基本的工作示例。主要的变化是将模型的创建从 getModel() 移到 prepare()。这是因为 getModel() 会为您设置列表所需的每个值调用 - 所以您最终会在每次覆盖之前的更改时重新创建模型。

```
package com.blackbox.x.actions;

import java.util.ArrayList;
import java.util.List;

import com.blackbox.x.actions.ListDemo.ValuePair;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;
import com.opensymphony.xwork2.Preparable;

public class ListDemo extends ActionSupport implements ModelDriven<List<ValuePair>>, Preparable {

private List<ValuePair> values;

@Override
public List<ValuePair> getModel() {

    return values;

}

public String execute() {

    for (ValuePair value: values) {
        System.out.println(value.getValue1() + ":" + value.getValue2());
    }

    return SUCCESS;
}

public void  prepare() {
    values = new ArrayList<ValuePair>();
    values.add(new ValuePair("chalk","cheese"));
    values.add(new ValuePair("orange","apple"));
}

public class ValuePair {

    private String value1;
    private String value2;

    public ValuePair(String value1, String value2) {
        this.value1 = value1;
        this.value2 = value2;
    }

    public String getValue1() {
        return value1;
    }
    public void setValue1(String value1) {
        this.value1 = value1;
    }
    public String getValue2() {
        return value2;
    }
    public void setValue2(String value2) {
        this.value2 = value2;
    }
}
} 
```

和对应的jsp

```
<%@ taglib prefix="s" uri="/struts-tags" %>    
<html>
<head>

</head>
<body>

<s:form action="list-demo" theme="simple">
<table>
<s:iterator value="model" status="rowStatus">
<tr>
<td><s:textfield name="model[%{#rowStatus.index}].value1" value="%{model[#rowStatus.index].value1}"/></td>
<td><s:textfield name="model[%{#rowStatus.index}].value2" value="%{model[#rowStatus.index].value2}"/></td>
</tr>
</s:iterator>
</table>
<s:submit/>
</s:form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:22:37.690

感谢大家与这个问题相处！你的提示是最有用的。我终于启动并运行从头开始重写所有内容。我现在可以使用以下 Action-Class 编辑我的模型：

```
public class TeilzeitgradEditAction implements ModelDriven<List<Teilzeitgrad>> {

List<Teilzeitgrad> teilzeitgrads;
private String tzgTypKey;
private Integer jahr;

public String execute() {
    return SUCCESS;
}

@Override
public List<Teilzeitgrad> getModel()
{
    if(teilzeitgrads == null) {
        teilzeitgrads = getTeilzeitgradListByTypAndJahr(tzgTypKey, jahr);
    }

    return teilzeitgrads;
}

public List<Teilzeitgrad> getTeilzeitgrads()
{
    return teilzeitgrads;
}

public void setTeilzeitgrads(List<Teilzeitgrad> teilzeitgrads)
{
    this.teilzeitgrads = teilzeitgrads;
}

    // getters and setters for local attributes
} 
```

和这个 JSP 代码：

```
<ul:form action="auth/GroupAdmin/processEditDienstabschnittJahr">
<s:iterator var="teilzeitgrad" value="teilzeitgrads" status="listStatus">
<tr>
    <td>
        <s:date name="%{#teilzeitgrad.datumAb}" var="datumAb_DE" format="dd.MM.yyyy" />
        <s:textfield name="teilzeitgrads[%{#listStatus.index}].datumAb" value="%{#datumAb_DE}"/>
    </td>
</tr>
</s:iterator>
<s:submit style="width:24px; height:24px;" type="image" src="../../../res/24px/floppy-disk.png" value="Speichern"></s:submit> 
```

多谢您的支持！

干杯，伦佐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:24:46.887

您要提交值`model`，您必须将它们提交到您的列表中`teilzeitgrads`。

例如参见[http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-model-driven-action-example-1.html](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-model-driven-action-example-1.html)。

**更新**
怎么样 `name="teilzeitgrads[%{#rowStatus.index}].datumBis"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:42:53.910

您是否尝试过这样的方法？

```
<s:iterator var="teilzeitgrad" value="teilzeitgrads" status="listStatus">
   <s:set name="paramName">teilzeitgrads[${ listStatus.index }].datumAb</s:set>
   <s:textfield name="%{#paramName}" value="%{#teilzeitgrad.datumAb}"/>
</s:iterator> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:49:44.150

假设您的配置正确 - 问题可能是由于您定义索引的方式。尝试更改要使用的文本字段上的名称属性

```
model[%{#rowStatus.index}].datumBis 
```

并让OGNL整理出访问方式。（我还会在 Firefox 中使用 Firebug 来查看提交表单时实际发送的内容）

# ruby-on-rails-3 - 导航嵌套的 has_many

> ID：13028114
> 
> 赞同：3
> 
> 时间：2012-10-23T10:09:36.863
> 
> 标签：ruby-on-rails-3

我嵌套了 has_many 关联

项目有很多部分 部分有很多任务 任务有很多工作

有没有比获得与项目相关的所有工作更好的方法

```
project.parts.each do |p|
  p.tasks.each do |t|
    t.jobs.each do |j|
      ...
    end
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:54:12.043

您可以在模型中定义方法时添加`has_many`与选项的关联。`through``#jobs``Project`

例如 ：

```
class Project < ActiveRecord::Base
  has_many :parts
  has_many :tasks, through: :parts

  def jobs
    jobs = []
    tasks.each {|t| jobs << t.jobs }
    jobs.flatten
  end
end 
```

# jquery - ipad/iphone 视频没有切换到全屏模式

> ID：13028119
> 
> 赞同：2
> 
> 时间：2012-10-23T10:09:47.087
> 
> 标签：jquery, iphone, ipad, event-handling, html5-video

我正在努力以全屏模式播放视频。所有浏览器都可以正常工作，包括 safari。但 ipad/iphone 完全没有响应。这是我的状况和功能，有人可以帮我解决这个问题吗？

代码：

```
if(fullscreen && !currentVideo.paused){
            if (currentVideo.requestFullScreen) {
                currentVideo.requestFullScreen();
              } else if (currentVideo.mozRequestFullScreen) {
                currentVideo.mozRequestFullScreen();
              } else if (currentVideo.webkitRequestFullScreen || currentVideo.webkitEnterFullscreen) {
                currentVideo.webkitRequestFullScreen() || currentVideo.webkitEnterFullscreen();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:54:17.443

这对我来说是工作......

```
setTimeout(function () {
        if(fullscreen && !currentVideo.paused){
            if (currentVideo.requestFullScreen) {
                currentVideo.requestFullScreen();
              } else if (currentVideo.mozRequestFullScreen) {
                currentVideo.mozRequestFullScreen();
              } else if (currentVideo.webkitRequestFullScreen) {
                currentVideo.webkitRequestFullScreen();
             } else if (currentVideo.webkitEnterFullscreen){
                currentVideo.webkitEnterFullscreen();
             }
        }
    },1000);        
} ); 
```

谢谢大家。

# python - 按任意数量的空格分割字符串

> ID：13028120
> 
> 赞同：16
> 
> 时间：2012-10-23T10:09:47.760
> 
> 标签：python, split

我正在尝试找到最pythonic的方式来拆分字符串，例如

“字符串中的一些单词”

成单个词。`string.split(' ')`工作正常，但它会在列表中返回一堆空白条目。当然我可以迭代列表并删除空格，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-23T10:11:10.180

只需使用[`my_str.split()`](http://docs.python.org/library/stdtypes.html#str.split)没有`' '`.

* * *

此外，您还可以通过指定第二个参数来指示要执行多少次拆分：

```
>>> ' 1 2 3 4  '.split(None, 2)
['1', '2', '3 4  ']
>>> ' 1 2 3 4  '.split(None, 1)
['1', '2 3 4  '] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-23T10:11:30.030

怎么样：

```
re.split(r'\s+',string) 
```

`\s`是任何空格的缩写。`\s+`连续的空白也是如此。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-23T10:11:26.433

不带参数使用`string.split()`或 `re.split(r'\s+', string)`代替：

```
>>> s = 'some words in a string   with  spaces'
>>> s.split()
['some', 'words', 'in', 'a', 'string', 'with', 'spaces']
>>> import re; re.split(r'\s+', s)
['some', 'words', 'in', 'a', 'string', 'with', 'spaces'] 
```

从[文档](http://docs.python.org/library/stdtypes.html#str.split)：

> 如果`sep`未指定或 is `None`，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。因此，使用分隔符拆分空字符串或仅包含空格的字符串会`None`返回`[]`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-23T10:11:59.817

```
>>> a = "some words in a string"
>>> a.split(" ")
['some', 'words', 'in', 'a', 'string'] 
```

split 参数不包含在结果中，所以我想关于你的字符串还有更多的东西。否则，它应该工作

如果您有多个空格，只需使用不带参数的 split()

```
>>> a = "some words in a string     "
>>> a.split()
['some', 'words', 'in', 'a', 'string']
>>> a.split(" ")
['some', 'words', 'in', 'a', 'string', '', '', '', '', ''] 
```

或者它只会将 a 拆分为单个空格

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-05T18:08:42.170

最 Pythonic 和正确的方法是不指定任何分隔符：

```
"some words in a string".split()

# => ['some', 'words', 'in', 'a', 'string'] 
```

另请阅读： [如何在 Python 中按 1 次或多次出现分隔符进行拆分？](https://stackoverflow.com/questions/2492415/how-can-i-split-by-1-or-more-occurrences-of-a-delimiter-in-python)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:00:48.127

```
text = "".join([w and w+" " for w in text.split(" ")]) 
```

将大空间转换为单个空间

# android - 如何使用删除意图对清除通知执行一些操作？

> ID：13028122
> 
> 赞同：14
> 
> 时间：2012-10-23T10:09:49.127
> 
> 标签：android

当用户清除我的通知时，我想重置我的服务变量：仅此而已！

环顾四周，我看到每个人都建议在我的通知上添加删除意图，但意图用于启动活动、服务或任何东西，而我只需要这样的东西：

```
void onClearPressed(){
   aVariable = 0;
} 
```

如何获得这个结果？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-23T12:00:14.340

通知不是由您的应用程序管理的，所有诸如显示通知和清除通知之类的事情实际上都是在另一个进程中发生的。出于安全原因，您不能让另一个应用程序直接执行一段代码。

在您的情况下，唯一的可能性是提供一个`PendingIntent`仅包含常规 Intent 并在清除通知时代表您的应用程序启动的方法。您需要`PendingIntent`用于发送广播或启动服务，然后在广播接收器或服务中执行您想要的操作。具体使用什么取决于您显示通知的应用程序组件。

在广播接收器的情况下，您可以为广播接收器创建一个匿名内部类并在显示通知之前动态注册它。它看起来像这样：

```
public class NotificationHelper {
    private static final String NOTIFICATION_DELETED_ACTION = "NOTIFICATION_DELETED";

    private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            aVariable = 0; // Do what you want here
            unregisterReceiver(this);
        }
    };

    public void showNotification(Context ctx, String text) {
        Intent intent = new Intent(NOTIFICATION_DELETED_ACTION);
        PendingIntent pendintIntent = PendingIntent.getBroadcast(ctx, 0, intent, 0);
        registerReceiver(receiver, new IntentFilter(NOTIFICATION_DELETED_ACTION));
        Notification n = new Notification.Builder(mContext).
          setContentText(text).
          setDeleteIntent(pendintIntent).
          build();
        NotificationManager.notify(0, n);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-22T17:29:13.753

安德烈是正确的。
如果您想要返回多条消息，例如：

*   你想知道消息是否被点击
*   你附加了一个带有你想要捕捉的图标的动作
*   并且您想知道消息是否被取消

您必须注册每个响应过滤器：

```
public void showNotification(Context ctx, String text) ()
{
    /… create intents and pending intents same format as Andrie did../
    /… you could also set up the style of your message box etc. …/

    //need to register each response filter
    registerReceiver(receiver, new IntentFilter(CLICK_ACTION));
    registerReceiver(receiver, new IntentFilter(USER_RESPONSE_ACTION));
    registerReceiver(receiver, new IntentFilter(NOTIFICATION_DELETED_ACTION));

    Notification n = new Notification.Builder(mContext)
      .setContentText(text)
      .setContentIntent(pendingIntent)                          //Click action
      .setDeleteIntent(pendingCancelIntent)                     //Cancel/Deleted action
      .addAction(R.drawable.icon, "Title", pendingActionIntent) //Response action
      .build();

    NotificationManager.notify(0, n);

} 
```

然后，您可以使用 if、else 语句（如 Andrei 所做的那样）或 switch 语句来捕捉不同的响应。

注意：我做出这个回应主要是因为我在任何地方都找不到这个，我必须自己弄清楚。（也许我会更好地记住它 :-) 玩得开心！

# html - 我可以在没有 css 的情况下更改标签的文本颜色吗？

> ID：13028132
> 
> 赞同：5
> 
> 时间：2012-10-23T10:10:33.327
> 
> 标签：html

我正在为电子邮件编写模板，但我无法使用 css。我需要更改链接的颜色，默认情况下它们会变为蓝色并带有下划线。我想保留下划线但将颜色更改为黑色。没有CSS，这甚至可能吗？

我的确切路线是：

```
<tr><td><a href="#"> Link 3 </a></td></tr> 
```

**编辑**

我找到[了这个答案](https://stackoverflow.com/questions/299168/html-text-decoration-of-a-link-without-css)，但它为正文部分添加了一个属性。这也是我不能拥有的。还有其他解决方案吗？

```
<body link="XXX" alink="YYY" vlink="ZZZ"> 
```

**编辑**

如果您像我一样必须为电子邮件编写 html，则[此链接很棒。](http://www.campaignmonitor.com/css/)我在这里复制它以供后代使用。谢谢@Andy。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T10:14:24.730

您可以做的是使用旧的和已弃用的字体标签。所以它会是：

```
<tr><td><a href="#"><font color="black"> Link 3 </font></a></td></tr> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T10:13:49.553

使用以下代码：

```
<tr><td><a href="#" style="color:black;"> Link 3 </a></td></tr> 
```

它是一个内联 CSS，根据您的要求，您可以在电子邮件中使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-13T15:57:32.080

The only way to do this in PURE HTML is to use *link* and *vlink* attributes.

```
<body link='black' vlink='black'>
        <a href='#'>Click Me</a>
</body> 
```

Here, *link* is a unvisited hyperlink and *vlink* is a visited hyperlink.

To change color on hover use *alink* (active link) attribute of the body tag :

```
<body link='black' vlink='black' alink='green'>
    <a href='#'>Click Me</a>
</body> 
```

In the above code the color of the link changes to green whenever you hover the link.

HOPE This Helped You!

# asp.net - ASP Membership 用户的有序列表

> ID：13028133
> 
> 赞同：2
> 
> 时间：2012-10-23T10:10:34.377
> 
> 标签：asp.net, asp.net-membership

有关对 .Net Membership GetAllUsers() 结果进行排序的问题的答案，请参见[此处](https://stackoverflow.com/questions/11366838/c-sharp-asp-net-membership-getallusers-order-by-email)，对于有关修改基础存储过程以排序结果的建议的回复，请参见[此处。](https://stackoverflow.com/questions/10331705/how-to-modify-asp-net-membership-stored-procedures)

我的问题是 - 但是，如果您有“非常多”的用户和/或您想使用[GetAllUsers(int, int, int)](http://msdn.microsoft.com/en-us/library/xh1acb34.aspx)分页重载和非用户名的排序顺序怎么办？

这是您需要编写自己的会员提供程序的地方吗？还是你去修改底层的 SP（在这里建议不要：[如何修改 ASP.NET MEmbership 存储过程](https://stackoverflow.com/questions/10331705/how-to-modify-asp-net-membership-stored-procedures?rq=1)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:42:17.367

不会。创建新的成员资格提供程序不会神奇地为您提供支持配置排序方式的新成员资格 API。

您最好的选择是简单地执行数据库查询并为此绕过成员资格。

# iphone - CollectionView 类视图，可水平+垂直滚动

> ID：13028134
> 
> 赞同：0
> 
> 时间：2012-10-23T10:10:47.457
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我目前正在开发的应用程序有一个非常大的问题......我想实现一种“时间表”行为，所以我硬编码了一个我称之为 TimeTableView 的视图，它是（正如它的名字所指向的）显示时间表和类似的东西。

我在这里遇到的问题是我没有使用任何类型的可重用性算法，因此该应用程序在运行大量时间表时非常缓慢，并且经常在 iPad1 上进行内存测试时崩溃。（尽管正在释放分配等）。

我不是一个经验丰富的 ObjectiveC 程序员，所以我想知道是否有任何类型的开源库或代码片段可以在具有这些特征的视图中实际处理可重用性和类似的事情。

这张附加的图片显示了我面临的问题的抽象。希望你能帮我解决这个问题！

提前致谢！

![在此处输入图像描述](../Images/e164c7efedf8e2a5ce0623e7b5f9c5f2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:52:06.227

[GMGridView](https://github.com/gmoledina/GMGridView)可能是您正在寻找的框架。

# c++ - 带有默认参数的 c++ 构造函数

> ID：13028141
> 
> 赞同：2
> 
> 时间：2012-10-23T10:11:19.303
> 
> 标签：c++

你好，我创建了这个类，它有一个默认构造函数和一个带默认参数的构造函数

```
Something.h

class Something  // Fraction class
{
public:
      Something (void); // default ctor
      Something (int xx, int yy = 1 );
          int x,y; 
} 
```

* * *

东西.cpp

```
Something::Something(){}

Something::Something(int xx, int yy)
{
    x = xx;
    y = yy;
} 
```

但是当我制作没有参数的对象并打印它时，它会显示 x = 0, y = 0;

问题可能出在哪里:(谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T10:14:09.757

当你创建一个没有参数的对象时，你调用默认构造函数：

```
Something::Something(){} 
```

这个**不**初始化`x`or `y`，这意味着您可以获得任何适合`int`. 大概您正在使用调试配置，因此您获得`x`并`y`初始化为`0`. 不管是什么原因，你都不应该指望这种行为。

要使用默认参数调用构造函数，您需要使用一个或两个参数调用它：

```
Something s1(5);
Something s2(5,6); 
```

**编辑**如果您想确保您的默认构造函数零初始化`x`，`y`您可以在初始化列表中显式执行此操作：

```
Something::Something() : x(0), y(0) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:14:00.560

如果你不带参数调用，你将调用这个构造函数

```
Something::Something(){} 
```

而不是这个

```
Something::Something(int xx, int yy) 
```

所以你的初始化代码不会被调用，因为你没有明确提供，你将在初始化整数成员时获得一个默认值 - 在这种情况下它为零，但它**可以**是任何整数值。因此，最好在构造函数实现中初始化成员变量。例如像这样实现它

```
Something::Something() : x(1),y(1) {} 
```

当您使用零参数构造函数创建对象的实例时，将导致`x`并设置为 1。`y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:08:55.263

这个问题的原因是你已经为此编写了重载的构造函数，但是你调用了没有参数的构造函数，所以默认情况下调用了默认构造函数，并且没有对你的变量进行赋值。

您必须传递参数才能调用重载的构造函数。您重载的构造函数已为 yy 分配了默认值 1，因此如果您仅传递一个参数，则 xx 将被分配该值，并且在这种情况下 yy 将具有默认值 1。但是，如果您将传递两个参数，则会分别为 xx 和 yy 分配这些值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T10:14:06.417

> 当我制作没有参数的对象并打印它时，它将显示 x = 0, y = 0;

默认情况下，实例字段被初始化为其默认值。对于`int`数据类型，默认值为`0`

# c# - EntityFramework 迁移 - 每个构建配置的种子

> ID：13028142
> 
> 赞同：3
> 
> 时间：2012-10-23T10:11:22.467
> 
> 标签：c#, asp.net-mvc, entity-framework

我将 EntityFramework 5 与 Code First 迁移一起使用。我想要做的是根据构建配置指定不同的种子数据。例如：

```
protected override void Seed(EFDbContext context)
{
    // This will be run in every Build configuration
    context.Table1.AddOrUpdate(new Table1 { Field1 = "Foo", Field2 = "Bar" });

    #if DEBUG
    // This will only be executed if we are Debuging
    context.Table1.AddOrUpdate(new Table1 { Field1 = "Blah", Field2 = "De Blah" });
    context.Table2.AddOrUpdate(new Table2 { Field1 = "Development Only" });
} 
```

我知道代码可能是错误的，一旦我知道执行此操作的最佳途径，我就可以找出正确的方法调用。

EF 是否有任何我在做这种事情时错过的内置方法？

谢谢

**更新**

我最后使用的代码是：

```
protected override void Seed(EFDbContext context)
{
    // This will be run in every Build configuration
    context.Table1.AddOrUpdate(t = t.Field1, new Table1 { Field1 = "Foo", Field2 = "Bar" });

    #if DEBUG
        // This will only be executed if we are Debuging
        context.Table1.AddOrUpdate(t = t.Field2, new Table1 { Field1 = "Blah", Field2 = "De Blah" });
        context.Table2.AddOrUpdate(t = t.Field1, new Table2 { Field1 = "Development Only" });
    #endif
} 
```

正如 Yannick 所说，但是在 AddOrUpdate 方法中，您需要传入 EF 将用来确定它是否是新条目的字段。不是我的问题的一部分，但认为我应该提供正确的方法以供将来参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:25:13.933

我认为您已经有了正确的代码（`#endif`语句除外）。

这将按您的预期工作：

```
protected override void Seed(EFDbContext context)
{
    // This will be executed in every Build configuration
    context.Table1.AddOrUpdate(new Table1 { Field1 = "Foo", Field2 = "Bar" });

    #if DEBUG
        // This will only be executed if DEBUG is defined, hence when you are debugging
        context.Table1.AddOrUpdate(new Table1 { Field1 = "Blah", Field2 = "De Blah" });
        context.Table2.AddOrUpdate(new Table2 { Field1 = "Development Only" });
    #endif
} 
```

# c# - 如果父应用程序没有释放互斥对象会发生什么

> ID：13028146
> 
> 赞同：5
> 
> 时间：2012-10-23T10:11:34.453
> 
> 标签：c#, multithreading, mutex

我的应用程序中有一个命名的互斥锁。

```
 private Mutex TaskExitStatus = new Mutex(false, "TaskExit") 
```

我在使用 TaskExitStatus.WaitOne() 的方法中获取互斥锁

如果我在退出应用程序时没有释放互斥锁，会发生什么？互斥锁会被安全处理吗？

**更新 1：** 命名和未命名互斥体在应用程序退出时未释放时的行为是否相同？

**更新 2** 这是我从[MSDN 链接中读到的内容](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)

> 使用 CloseHandle 函数关闭句柄。当进程终止时，系统会自动关闭句柄。互斥对象在其最后一个句柄被关闭时被销毁。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:14:56.150

根据[文档](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)，它被废弃（不一定处置）

> 如果线程在拥有互斥锁时终止，则称该互斥锁被放弃

另外，请注意有关废弃互斥锁的警告：

> 废弃的互斥锁通常表明代码中存在严重错误。当线程退出而不释放互斥体时，受互斥体保护的数据结构可能不会处于一致状态。如果可以验证数据结构的完整性，则请求互斥锁所有权的下一个线程可以处理此异常并继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:16:38.307

互斥锁的目的是维护一个锁（用于跨应用程序的命名互斥锁），直到它被释放。如果您不释放互斥锁，则应在资源上保持锁定，直到计算机重新启动。

# php - 浏览器关闭时如何运行查询？

> ID：13028147
> 
> 赞同：-1
> 
> 时间：2012-10-23T10:11:34.117
> 
> 标签：php

我有下面的脚本。当我们关闭窗口时，用户注销正在工作，但在数据库中状态没有改变。我的意思是状态 1 显示用户在线，状态 0 显示离线，但是当用户通过关闭窗口注销时状态没有改变。

如果我们点击“注销”按钮，onlu 就会改变状态。

```
if($_SESSION['username'] != "admin")
{
    $timeout = 1; 
    $logout_redirect_url = "logout.php"; 
    $timeout = $timeout * 60; 

    if(isset($_SESSION['start_time']))
    {
        $elapsed_time = time() - $_SESSION['start_time'];
        if ($elapsed_time >= $timeout)
        {
            $db->query($strQuery1);
            header("Location: $logout_redirect_url");
        }
    }

    $_SESSION['start_time'] = time();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:21:35.010

我不知道这是否是更好的方法如果你想动态地知道用户当前是否在你的网站上，你可以在你的数据库中设置一个最后连接的值（它保存一个日期时间值）。当用户重新加载新页面时，此值“last connect”将被重置，可能是当您应用测试以查看他当前是否已登录时。

之后，您创建一个读取值“last connect”的 cron，您可以知道用户是否超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:23:41.737

您可以做的是添加一个 javascript`window.onBeforeUnload`事件，该事件会触发 ajax 调用并更新您的查询。

但它并不安全，因为它是唯一的客户端，但值得一试。

另一种方法是检查会话时间，如果会话在您想要的超时时间内未刷新，则手动注销用户。

PS：你也应该看看[这个](http://php.net/manual/en/features.connection-handling.php)手​​册，会有帮助的。

# actionscript-3 - 在 DC 中创建 AS3 动态变量

> ID：13028155
> 
> 赞同：1
> 
> 时间：2012-10-23T10:11:59.943
> 
> 标签：actionscript-3

当我们在AS3中写为Document类时，可以动态创建变量而不声明吗？

例如，我正在从一个库中导入声音文件。大约 20 个声音文件。如果代码本身在 fla 中，我们可以在 for 循环中赋值：

```
this["SOUND"+increasingNumber] 
```

但是在 documentClass 中这是行不通的，因为`this`这里指的是类而不是舞台。

有什么方法可以创建变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:24:25.070

当导入到您的库中时，右键单击声音文件并转到其属性。单击 actionscript 选项卡并选中“export for actionscript”。给它一个类名，然后您可以在文档类中使用它来实例化该声音。

如果您将其命名为 Sound1：

```
var sound:Sound = new Sound1();
sound.play(); 
```

[更详细的信息在这里](http://www.republicofcode.com/tutorials/flash/as3sound/)

[编辑 loxxy 的回复] 上面显示了如何在文档类中创建变量。要动态创建所有声音变量，我建议使用数组，如下所示：

假设您将库中的所有声音命名为 Sound1 到 Sound20

```
import flash.utils.getDefinitionByName;

var sounds:Array = [];
var soundClass:Class;
for(var i:int = 1; i<21; i++){
soundClass = getDefinitionByName("Sound" + i) as Class;
sounds.push(new soundClass());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:38:34.160

在 fla 中添加代码时，会将其添加到框架脚本中。

帧脚本是以固定间隔（帧率）重复的代码块。

[您可以像这样](http://www.rblank.com/2009/10/11/adding-actionscript-dynamically-to-frames-with-addframescript-in-as3/)使用 addFrameScript 来实现。

然而，更好的方法是不要混淆框架脚本和常规类方法。

您可以从代码中访问“阶段”，但必须在 added_to_stage 事件之后才能确定。

```
addEventListener(Event.ADDED_TO_STAGE, init);

function init(e:Event):void{ 

     // Access 'stage' here

} 
```

# sql-server - 如何在 MSSQL 的 NVARCHAR() 列中插入包含 #0 的字符串？

> ID：13028162
> 
> 赞同：4
> 
> 时间：2012-10-23T10:12:16.080
> 
> 标签：sql-server, sql-server-2008, delphi, delphi-xe2, ado

我确信这有一个非常简单的解决方案，但我已经用尽了我的资源。我需要在 MSSQL2k8 的列中插入一堆`WideString`可能包含的变量。在转换中的某处被视为字符串终止符......所以，当我存储时，仅存储。我正在使用. 我能做些什么呢？`#0``NVARCHAR(1024)``#0``#6'r'#0'abc'``#6'r'``TADOQuery`

* * *

这是我使用的代码：

```
var
  S: string;
begin
  S := #6'r'#0'abc';
  ADOQuery1.Append;
  ADOQuery1S.Value := S;
  { At this point, S = #6'r'#0'abc' and ADOQuery1S.Value = #6'r';}
  ADOQuery1.Post;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:06:37.110

如果要存储以任何可能包含 NULL 的方式加密的字符串，请使用 Soap.EncdDecd.pas（旧版本中的 EncdDecd.pas）中的例程将加密数据编码和解码为 Base64。

并且**务必使用**来自 Microsoft CryptoAPI 或任何本机 Delphi 实现（例如[DCPCrypt](http://www.cityinthesky.co.uk/opensource/dcpcrypt) ）的适当加密。

如果您要存储用于访问系统的密码，请考虑对它们进行散列（和加盐）。显然，如果它们是连接到其他系统的密码，你就不能这样做。

```
var
  B64: string;
begin
  B64 := EncodeString(#6'r'#0'abc');
  ADOQuery1.Append;
  ADOQuery1S.Value := B64;
  ADOQuery1.Post;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:24:41.253

如果您可以更改架构，请改用 VARBINARY 或 IMAGE。这些字段类型旨在保存二进制数据。

```
create table MY_DATA ( FLD_1 varbinary(2048), FLD_2 image ) 
```

# javascript - 从已经启动的插件启动对象的jQuery方式？

> ID：13028169
> 
> 赞同：0
> 
> 时间：2012-10-23T10:12:46.330
> 
> 标签：javascript, jquery, ajax, dom

感谢您花时间看我的问题！:)

我正在尝试使用 jQuery 插件[RefineSlider](http://alexdunphy.github.com/refineslide/#tuning "点击这里查看插件页面！")！

我的问题是我不是 Javascript 专家。我想要完成的是通过 ajax 调用动态添加幻灯片。ajax 调用将返回幻灯片的 html 结构。但它从来没有工作过，因为我认为它是在 DOM 中启动的，你不能动态修改幻灯片！

谢谢您，祝您度过愉快的一周！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:42:18.260

如果您在此 jquery 函数中添加实现滑块的函数：

```
//This function will be called after an ajax
$(document).ajaxComplete(function(){
//The example to implement the slider
   $('.rs-slider').refineSlide({
        transition         : 'fade',
        transitionDuration : 7000,
        autoPlay           : true,
        keyNav             : false,
        delay              : 0,
        controls           : null
    });
}); 
```

但警告此函数将被调用所有 ajax 调用。因此，您必须添加一个不添加更多滑块的控件的测试。

# html - CSS高度，如何让它绕过内部div

> ID：13028171
> 
> 赞同：0
> 
> 时间：2012-10-23T10:12:50.097
> 
> 标签：html, css

为什么我的边框没有绕过我的内部 div，而我的内部 div 边框没有转到外部 div 的底部（在 FF 中，但所有主要浏览器都需要这个）。

有人可以帮忙吗

```
<div id="main">
    <div class="insidediv">
        <p>Article 1</p>
    </div>
    <div class="insidediv">
        <p>Article 2</p>

    </div>
    <div class="insidediv">
<p>Article 3</p>
    </div>
</div>

#main{
    width: 800px;
    height: 100%;
    border: 20px solid black;
}

.insidediv{
    width: 200px;
    height: 100%;
    border-right: 20px solid black;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:15:27.090

设置`overflow: hidden;`为`#main`。

编辑：[演示](http://cssdeck.com/labs/edstlgzw/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:16:40.080

将 #main 更改为`float: left;`或`overflow:hidden`。我推荐浮动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:03:11.480

浮动元素将它们带出文档的正常流程，这意味着它们的容器由于缺乏更多技术解释而不再了解它们的结束位置。要解决这个问题，您需要在最后一个内部 div 之后通过添加一个应用 clear:both 的元素来清除浮动。 [http://jsfiddle.net/calder12/BcqnE/](http://jsfiddle.net/calder12/BcqnE/)

```
<div id="main">
<div class="insidediv">
    <p>Article 1</p>
</div>
<div class="insidediv">
    <p>Article 2</p>

</div>
<div class="insidediv">
<p>Article 3</p>
</div><div class="clear"</div>
</div>

#main{
width: 800px;
height: 100%;
border: 20px solid black;
}

.insidediv{
width: 200px;
height: 100%;
border-right: 20px solid black;
float:left;
}
.clear{clear:both;} 
```

还有一种类似于上述的 clearfix 方法，但现在是更标准的方法。[http://j.mp/bestclearfix](http://j.mp/bestclearfix)

# android - 为什么 logcat 显示这个？

> ID：13028178
> 
> 赞同：1
> 
> 时间：2012-10-23T10:13:17.807
> 
> 标签：android, android-emulator, logcat

我正在使用带有 4.1 版本模拟器的 android 最新版本 sdk `eclipse (Helios)`。每件事都运行良好。但是在我`logcat`每次运行任何应用程序时都会得到以下声明。

```
I/Choreographer(1250): Skipped 1001 frames!  The application may be doing too much work on its main thread. 
```

即使在 Hello world 应用程序中，我也得到相同的 logcat 输出。我没有在我的应用程序中使用多线程。有人可以告诉我在我的 logcat 中获取这些日志的原因吗？

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_jsonparsing);

    _mContext = this;
    lv = (ListView) findViewById(R.id.listview);

    new JSONParserTask().execute();
} 
```

在我的异步任务中，我从服务器获取 JSONArray，对其进行解析并列出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:20:35.587

Android 开发者文档提供了这个：

接收来自显示子系统的`choreographer`定时脉冲（例如垂直同步），然后安排工作发生，作为渲染下一显示帧的一部分。

`choreographer`应用程序通常使用动画框架或视图层次结构中的更高级别抽象与间接交互。

有关更多信息，请参阅此[链接](http://developer.android.com/intl/ja/reference/android/view/Choreographer.html)和[此](https://stackoverflow.com/questions/11266535/what-is-android-choreographer)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:32:03.480

这个 logcat 跟踪

```
 I/Choreographer(1250): Skipped 1001 frames! 
```

**该应用程序可能在其主线程上做了太多工作**，这表明您在主线程中执行了一些庞大的任务。如果您正在执行此类任务，请使用单独的线程机制（`AsyncTask`等`Thread`）来执行此操作，此日志应该消失。

如果没有，请粘贴您的代码片段！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:28:26.040

你是在模拟器上运行你的应用程序吗？我想你增加分配给你的 AVD 的内存可能会删除这个警告！！当我的设备模拟器分配的内存较少时，我会遇到类似的问题

# boost - 如何获得太阳黑子的现场得分

> ID：13028180
> 
> 赞同：2
> 
> 时间：2012-10-23T10:13:19.093
> 
> 标签：boost, sunspot

谁能帮我弄清楚如何获得特定领域的分数？我只知道 results.score 是关于搜索结果的总分（相关性），但是我怎样才能获得特定的字段分数，以通过计算分数来确定结果是否被该字段搜索出来.....任何帮助将不胜感激，谢谢！

# python - 比较两个列表并在python中获取相同元素的算法

> ID：13028184
> 
> 赞同：0
> 
> 时间：2012-10-23T10:13:34.217
> 
> 标签：python

我必须列出，其中有一些共同的元素：

```
p = [('link1/d/b/c', 'target1/d/b/c'), ('link2/a/g/c', 'target2/a/g/c'), ..., ('linkn/b/b/f', 'targetn/b/b/f')]

q = [['target1/d/b/c', 'target1', 123, 334], ['targetn/b/b/f', 'targetn', 23, 64], ... ,['targetx/f/f/f', 'targetx', 999, 888]] 
```

我试图比较它们并找到共同的元素，然后对结果做一些工作：

```
do_job('target1/d/b/c', 'target1', 123, 334, 'link1/d/b/c') 
```

现在我使用简单且非常慢的算法：

```
for item in p:
   link = item[0]
   target = item[1]
   for item2 in q:
       target2 = item2[0]
       if target2 == target:
           do_some_job(...) 
```

我认为，我需要比较这两个列表并创建一个包含所有元素的列表，例如：

```
pq = [['target1/d/b/c', 'target1', 123, 334, 'link1/d/b/c'], ..., ['targetn/b/b/f', 'targetn', 23, 64, 'linkn/b/b/f']] 
```

然后`do_some_job(pq)`每次找到相同元素时调用而不是调用它

如何获得它？

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:20:35.413

用于`chain()`展平两个列表，然后使用`set()`and`intersection()`来获取共同的元素。

```
In [78]: from itertools import chain

In [79]: p
Out[79]: 
[('link1/d/b/c', 'target1/d/b/c'),
 ('link2/a/g/c', 'target2/a/g/c'),
 ('linkn/b/b/f', 'targetn/b/b/f')]

In [80]: q
Out[80]: 
[['target1/d/b/c', 'target1', 123, 334],
 ['targetn/b/b/f', 'targetn', 23, 64],
 ['targetx/f/f/f', 'targetx', 999, 888]]

In [81]: set(chain(*p)).intersection(set(chain(*q)))
Out[81]: set(['target1/d/b/c', 'targetn/b/b/f']) 
```

或使用带有短路的列表理解：

```
In [86]: [j for i in p for j in i if j in (z for y in q for z in y)]
Out[86]: ['target1/d/b/c', 'targetn/b/b/f'] 
```

或使用`any()`：

```
In [87]: [j for i in p for j in i if any (j==z for y in q for z in y)]
Out[87]: ['target1/d/b/c', 'targetn/b/b/f'] 
```

**时间**：

```
In [93]: %timeit set(chain(*p)).intersection(set(chain(*q)))
100000 loops, best of 3: 7.38 us per loop                     ##  winner

In [94]: %timeit [j for i in p for j in i if j in (z for y in q for z in y)]
10000 loops, best of 3: 24.9 us per loop

In [95]: %timeit [j for i in p for j in i if any (j==z for y in q for z in y)]
10000 loops, best of 3: 27.4 us per loop

In [97]: %timeit [x for x in chain(*p) if x in chain(*q)]
10000 loops, best of 3: 12.6 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:20:39.737

您可能应该使用字典：

```
target_to_link = dict((v,k) for (k,v) in p)
for item in q:
    args = item + [target_to_link[item[0]]
    do_some_job(*args) 
```

`target_to_link`字典为您提供目标中的相应链接。只要确保您没有多个目标共享同一个链接...

在`for`循环中，我们只是创建一个临时参数列表`args`，将您的`item`（例如，`['target1/d/b/c', 'target1', 123, 334]`）与相应的链接结合起来，我们使用`function(*args)`语法...

* * *

如果您需要循环播放`p`，您可以构建一个字典，例如

```
target_to_args = dict((k[0],k[1:]) for k in q) 
```

然后做类似的事情

```
for (link, target) in p:
    args = [target] + target_to_args[target] + [link]
    do_some_job(*args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:29:13.463

列表理解`chain`应该有效：

```
[x for x in chain(*p) if x in chain(*q)] 
```

# linq - 使用子查询构建查询 (LINQ)

> ID：13028185
> 
> 赞同：0
> 
> 时间：2012-10-23T10:13:36.117
> 
> 标签：linq, c#-4.0, lambda

为简单起见，假设我有以下两个类：

```
public class ComplexClass
{
    public List<SubClass> SubClasses { get; set; }
    public string Name { get; set; }
}

public class SubClass
{
    public string Name { get; set; }
} 
```

我有一个`List<ComplexClass>`，我需要根据一些参数构建一个查询。

如果我需要做的只是使用`Name`. `ComplexClass`这是一个例子：

```
 static IQueryable<ComplexClass> GetQuery(string someParameter, string someOtherParameter)
    {
        var query = list.AsQueryable();
        if (!String.IsNullOrEmpty(someParameter))
            query = query.Where(c => c.Name.StartsWith(someParameter));
        if (!String.IsNullOrEmpty(someOtherParameter))
            query = query.Where(c => c.Name.EndsWith(someOtherParameter));
        return query;
    } 
```

根据我拥有的参数，我可以添加更多查询元素。当然上面的例子很简单，但是实际的问题包含更多的参数，而且这个数量可以增长。

如果我想找到那些`ComplexClass`实例`SubClass`符合基于参数的标准的实例，事情就没有那么简单了：

```
 static IQueryable<ComplexClass> GetSubQuery(string someParameter, string someOtherParameter)
    {
        var query = list.AsQueryable();
        if (!String.IsNullOrEmpty(someParameter))
            if (!String.IsNullOrEmpty(someOtherParameter))
                return query.Where(c => c.SubClasses.Where(sc => sc.Name.StartsWith(someParameter) && sc.Name.EndsWith(someOtherParameter)).Any());
            else
                return query.Where(c => c.SubClasses.Where(sc => sc.Name.StartsWith(someParameter)).Any());
        else
            if (!String.IsNullOrEmpty(someOtherParameter))
                return query.Where(c => c.SubClasses.Where(sc => sc.Name.EndsWith(someOtherParameter)).Any());
            else
                return null;
    } 
```

我不能再根据每个参数添加查询的位，我现在需要一次编写整个查询，这意味着我需要检查每个参数组合，这并不理想。

我怀疑关键是构建一个`Expression`类并从中创建一个 lambda 表达式，但我不确定如何解决这个问题。

有什么建议么？:)

编辑：

我最初的想法是这样的：

```
 static IQueryable<ComplexClass> GetSubQuery(string someParameter, string someOtherParameter)
    {
        var query = list.AsQueryable();
        query = query.Where(c =>
        {
            var subQuery = c.SubClasses.AsQueryable();
            if (!String.IsNullOrEmpty(someParameter))
                subQuery = subQuery.Where(sc => sc.Name.StartsWith(someParameter));
            if (!String.IsNullOrEmpty(someOtherParameter))
                subQuery = subQuery.Where(sc => sc.Name.EndsWith(someOtherParameter));
            return subQuery.Any();
        });
        return query;
    } 
```

这适用于我的小型控制台测试应用程序，因为它使用 LINQ to Objects。不幸的是，我需要使用 Entity Framework 和 LINQ to Entities，这会导致类似于上面的实现抛出`A lambda expression with a statement body cannot be converted to an expression tree`错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:55:25.227

我假设在您的实际代码中，该`SubClasses`属性是`IQueryable<SubClass>`而不是`List<SubClass>`?

如果是这样，那么您的查询构建变得容易：

```
static IQueryable<ComplexClass> GetSubQuery(
    string someParameter, string someOtherParameter)
{
    var query = list.AsQueryable();
    if (!String.IsNullOrEmpty(someParameter))
        query = query.Where(c => c.SubClasses
            .Where(sc => sc.Name.StartsWith(someParameter)).Any());
    if (!String.IsNullOrEmpty(someOtherParameter))
        query = query.Where(c => c.SubClasses
            .Where(sc => sc.Name.StartsWith(someOtherParameter)).Any());
    return query;
} 
```

混合`IEnumerable<T>`和`IQueryable<T>`使用`AsQueryable()`从来都不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:19:44.070

我在一个简单的控制台项目中实现了我的解决方案：

```
internal class Program
{
    #region Constants and Fields

    private static readonly List<ComplexClass> list = new List<ComplexClass>
                                                          {
                                                              new ComplexClass
                                                                  {
                                                                      Name = "complex", 
                                                                      SubClasses = new List<SubClass>
                                                                                       {
                                                                                           new SubClass
                                                                                               {
                                                                                                   SubName = "foobar"
                                                                                               }
                                                                                       }
                                                                  }, 
                                                              new ComplexClass
                                                                  {
                                                                      Name = "complex", 
                                                                      SubClasses = new List<SubClass>
                                                                                       {
                                                                                           new SubClass
                                                                                               {
                                                                                                   SubName = "notfoobar"
                                                                                               }
                                                                                       }
                                                                  }
                                                          };

    #endregion

    #region Public Methods

    public static void Main(string[] args)
    {
        Console.WriteLine("foo / bar :");
        GetSubQuery("foo", "bar");
        Console.WriteLine();

        Console.WriteLine("foo / null :");
        GetSubQuery("foo", null);
        Console.WriteLine();

        Console.WriteLine("string.Empty / bar :");
        GetSubQuery(string.Empty, "bar");
        Console.WriteLine();

        Console.WriteLine("maeh / bar :");
        GetSubQuery("maeh", "bar");

        Console.ReadKey();
    }

    #endregion

    #region Methods

    private static void GetSubQuery(string startsWith, 
        string endsWith)
    {
        var query = from item in list
                    let StartIsNull = string.IsNullOrEmpty(startsWith)
                    let EndIsNull = string.IsNullOrEmpty(endsWith)
                    where
                        (StartIsNull || item.SubClasses.Any(sc => sc.SubName.StartsWith(startsWith)))
                        && (EndIsNull || item.SubClasses.Any(sc => sc.SubName.EndsWith(endsWith)))
                    select item;

        foreach (var complexClass in query)
        {
            Console.WriteLine(complexClass.SubClasses.First().SubName);
        }
    }

    #endregion

    public class ComplexClass
    {
        #region Public Properties

        public string Name { get; set; }
        public List<SubClass> SubClasses { get; set; }

        #endregion
    }

    public class SubClass
    {
        #region Public Properties

        public string SubName { get; set; }

        #endregion
    }
} 
```

控制台输出是：

```
foo / bar :
foobar

foo / null :
foobar

string.Empty / bar :
foobar
notfoobar

maeh / bar : 
```

# c++ - 旧式演员表的命名演员表是什么： pv = (void*)ps;

> ID：13028186
> 
> 赞同：4
> 
> 时间：2012-10-23T10:13:37.717
> 
> 标签：c++

旧式演员的代码：

```
const string *ps;  
void *pv;

pv = (void*)ps; 
```

我尝试了三种不同的命名演员：

```
pv = static_cast<void*>(ps); //  error: invalid static_cast from type ‘const string* {aka const std::basic_string<char>*}’ to type ‘void*’

pv = const_cast<void*>(ps); // error: invalid const_cast from type ‘const string* {aka const std::basic_string<char>*}’ to type ‘void*’

pv = reinterpret_cast<void*>(ps); // error: reinterpret_cast from type ‘const string* {aka const std::basic_string<char>*}’ to type ‘void*’ casts away qualifiers 
```

如你看到的。没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T10:16:15.557

你应该`const_cast`，但要正确的类型。从`string*`to的转换`void*`将自动发生。

```
pv = const_cast<string*>(ps); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T10:20:55.727

在这种特殊情况下，它很简单：

```
pv = const_cast<string*>( ps ); 
```

从`string*`to的转换`void*`是隐式的。如果你想让它明确，你需要第二个单独的演员：

```
pv = static_cast<void*>( const_cast<string*>( ps ) ); 
```

或者

```
pv = const_cast<void*>( static_cast<void const*>( ps ) ); 
```

但是，我不认为将其明确化是特别必要的。您使用 a 的事实`void*`已经表明会有转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T10:16:36.273

您必须首先删除 const-ness，然后再删除 static_cast：

```
pv = static_cast<void*>(const_cast<string*>(ps)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T10:18:47.533

您只需要一个`const_cast`，因为转换为（但不是从）`void*`自动发生（从 void 转换，使用`static_cast`）：

```
pv = const_cast<string*>(ps); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T10:15:57.383

我没有尝试 - 我猜你是 2 个演员 - 由于下面发布的链接，不应该使用它。

```
pv = reinterpret_cast<void*>(const_cast<string*>(ps)); 
```

根据 C++03，唯一安全的方法似乎是使用 static_cast 从/到 void*

```
pv = static_cast<void*>(const_cast<string*>(ps)); 
```

我不会使用隐式演员表，因为它隐藏了演员表。但你的演员阵容看起来是个坏主意——这是什么背景？

* * *

我刚刚发现[何时使用 reinterpret_cast](https://stackoverflow.com/questions/573294/when-to-use-reinterpret-cast)，现在我明白了为什么 static_cast 更好。我仍然不喜欢它，因为它在某种程度上隐藏了（在我看来）铸造无效的危险部分。在评论中，很容易简单地搜索所有 reinterpret_casts 并查看潜在危险的地方。

# android - 在 Android-uitableview 中加载 json 数据

> ID：13028188
> 
> 赞同：0
> 
> 时间：2012-10-23T10:13:39.050
> 
> 标签：android, json, uitableview, android-query

**请帮忙！**

在我的应用程序中，我使用`Android-UiTableView`（[thiagolocatelli / android-uitableview](https://github.com/thiagolocatelli/android-uitableview)）和`AQuery`（[androidquery / androidquery](https://github.com/androidquery/androidquery)）

我的任务是从 json 数组加载数据并从 URL 加载图像。加载没有图片的列表我能够：

```
jgall = json.getJSONArray("gall");                  
int z = 0;
  for(int i = 0; i < jgall.length(); i++){
      JSONObject c = jgall.getJSONObject(i);
      tableView.addBasicItem(c.getString("name"), c.getString("place"));
  } 
```

我尝试显示自定义视图，但没有任何反应

```
LayoutInflater mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
RelativeLayout view      = (RelativeLayout) mInflater.inflate(R.layout.custom_view,null); 
String iurl              = c.getString("img");
aq.id(R.id.img).image(iurl, false, true);                       
ViewItem viewItem        = new ViewItem(view);
tableView.addViewItem(viewItem); 
```

告诉我它是真实的使用`Android-UiTableView`吗？如果是这样的话！如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:17:23.070

我通过自己修改库代码来做到这一点。

我在**UITableView.java**添加了以下构造函数：

```
public void addBasicItem(Drawable drawable, String title, String summary) {
    mItemList.add(new BasicItem(drawable, title, summary));
} 
```

**BasicItem.java**中的以下内容：

```
public Drawable getDDrawable() {
    return dDrawable;
}

public BasicItem(Drawable ddrawable, String _title, String _subtitle) {
    this.dDrawable = ddrawable;
    this.mTitle = _title;
    this.mSubtitle = _subtitle;
} 
```

并再次修改了**UITableView.java**文件中的**setupBasicItem**方法：

 **```
((ImageView) view.findViewById(R.id.image)).setBackgroundDrawable(item.getDDrawable()); 
```

最后，在您的代码中添加以下内容：

```
URL newurl = new URL("http://www.example.com/example.png"); 
Bitmap bmp = BitmapFactory.decodeStream(newurl.openConnection() .getInputStream());
Drawable drawable = new android.graphics.drawable.BitmapDrawable(getResources(),bmp);

tableView.addBasicItem(drawable, "Title", "SubTitle"); 
```

希望它有所帮助，因为它对我有用。**

# migration - 从 WebSphere MQ V6 迁移到 V7 对现有代码有何影响？

> ID：13028195
> 
> 赞同：2
> 
> 时间：2012-10-23T10:14:02.983
> 
> 标签：migration, ibm-mq

从 WebSphere MQ V6 迁移到 V7 对现有代码有何影响？

我们可以简单地做出改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:55:26.413

像所有好的问题一样，这里的答案是“视情况而定”。

首先，不要去v7.0，至少去V7.1，最好还是去V7.5。

*   使用客户端或绑定模式连接？在大多数情况下，您无需接触基于客户端的应用程序即可升级 QMgr。任何版本的 WMQ 客户端都可以与任何版本的 WMQ 服务器通信，但最好不要将应用程序留在不受支持的 WMQ 客户端版本上。当然，在旧客户端上运行的应用程序不会获得自动重新连接或性能改进等新功能，即使 QMgr 是 V7.5。
*   使用 SSL？SSLPEER 元素顺序已更改，管理证书的命令已更改。好消息，证书管理现在使用目录`runmq*km`中的命令执行，`{mq install}/bin`因此您无需搜索 GSKit 目录并确定是否使用`gsk6*`,`gsk7*`或`gsk8*`命令。
*   如果您从 32 位转到 64 位，则可能需要重新编译程序或退出。
*   更正设置`PATH`，`CLASSPATH`并`LIBPATH`跨版本更改。

还有更多，而且信息中心很好地涵盖了这些内容。每个信息中心都有一个关于迁移的部分。在该部分中，有按版本的小节，在这些小节中，有按平台的小节。选择 WMQ 的目标版本（那是 V7.5，对吗？说是！）并向下钻取。从这里开始：

*   [从 V6.0 迁移到 V7.5](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mi67501_.htm)
*   [从 V6.0 迁移到 V7.1](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/mi67101_.htm)
*   [从 V6.0 迁移到 V7.0](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzao.doc/mi24130_.htm)

# excel - 行中的第一个空单元格

> ID：13028201
> 
> 赞同：-1
> 
> 时间：2012-10-23T10:14:09.127
> 
> 标签：excel, vba, range, cell, rows

我正在将一个范围复制到另一个工作簿的下一个空单元格中。以下代码；

```
Public Sub InvoicedInstallments()

Dim rng1 As Range
Dim rng2 As Range
Dim rng3 As Range
Dim fname As String
Dim mt As String, yr As String
mt = MonthBox.Value
yr = YearBox.Value
fname = yr & mt & "DB" & ".xlsx"
Set rng1 = Workbooks("201209TB.xlsx").Worksheets("excel").Range("E348")
Set rng2 = Workbooks("201209TB.xlsx").Worksheets("excel").Range("E295")
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Cells(1, Columns.Count).End(xlToRight).Select

rng3.Value = (rng1.Value + rng2.Value)
rng3.Value = rng3.Value * -1
rng3.Value = Round(rng3.Value / 1000, 0)

End Sub 
```

有过线

```
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Cells(1, Columns.Count).End(xlToRight).Select 
```

变成

```
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Range("AA49").End(xlToRight).Offset(0, 1) 
```

现在这会将数据放入下一个空单元格（这是我想要的），但如果您再次运行代码，它不会将信息放入下一个空单元格。

我想这只是一些简单的事情，但我无法发现它

它正在复制到合并的单元格中，我怀疑其中存在很多问题（请参阅下面的评论以确认这一点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:39:34.347

我猜，你的问题将在这一行：

```
rng3.Value = Round(rng3.Value / 1000, 0) 
```

但是这里抛出了错误

```
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Cells(1, Columns.Count).End(xlToRight).Select 
```

这是因为`select`.

`Select`, 选择，它不会返回一个范围对象。

改用这个

```
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Cells(1, Columns.Count).End(xlToRight) 
```

但是，我不确定这是否是您想要的，因为您可能只是说

```
Set rng3 = Workbooks(fname).Worksheets("UK monthly dashboard").Range("IV1") 
```

因为这就是你得到的——至少，如果你只与`.xlsx`

# objective-c - 从字典中随机访问键

> ID：13028204
> 
> 赞同：0
> 
> 时间：2012-10-23T10:14:21.720
> 
> 标签：objective-c

我有一本我想以随机顺序访问的对象字典。它不必是适当的随机，而只是有大量的变化。

字典看起来像这样：

```
'customer0' : '<Customer Object>'
'customer1' : 'inactive'
'customer2' : 'inactive'
'customer3' : 'inactive'
'customer4' : '<Customer Object>' 
```

该键对应于一个 UI 元素，该元素将用于代表游戏中的客户，基本上我希望它们不会每次都以相同的顺序出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:24:13.950

关于随机数[在 stack 上阅读更多信息](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)。所以如果你有字符串键，你可以像这样使用 smth：

```
NSString *key = [NSString stringWithFormat:@"customer%d", arc4random()%5];
<customer object> *customObj = [yourDictionary objectForKey:key]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:21:56.240

在伪代码中：

1.  创建结构的副本 - 您可以将键放入数组
2.  选择一个从 0 到副本大小的随机整数 n -1
3.  提取（如检索和删除）位置 n 处的元素
4.  从 2) 重复直到 size == 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:20:28.117

我没有对此进行测试，但是这些方面的东西应该可以实现您的目标：

```
//create dictionary
NSDictionary *dictionary = [NSDictionary dictionary];

//gather set of keys from array of keys
NSSet *keys = [NSSet setWithArray:[dictionary allKeys]];

//gather random key
NSString *key = [keys anyObject];

//gather dictionary value with key
NSString *value = [dictionary objectForKey:key]; 
```

通过`NSSet`从`NSArray`字典键中创建一个，您可以使用`anyObject`从数组中收集随机键。

当然还有其他方法可以实现这一点，但这是我能想到的最简洁的方法。

# msdeploy - MSDeploy API - 通过代码删除远程文件

> ID：13028206
> 
> 赞同：1
> 
> 时间：2012-10-23T10:14:25.150
> 
> 标签：msdeploy, webdeploy

我希望通过 c# 代码使用 MSDeploy API 远程触发删除命令。

我想实现以下命令：

`msdeploy.exe -verb:delete -dest:contentPath="/folderName/filename.txt"`

而不是通过运行非托管的外部可执行文件，我想使用 MSDeploy .Net API 来执行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:02:48.747

假设您正在尝试删除绝对文件路径（而不是网站中的文件），您正在寻找这样的东西：

```
DeploymentObject destObject = DeploymentManager.CreateObject(
    DeploymentWellKnownProvider.FilePath, "/foldername/filename.txt");

DeploymentObject sourceObject = DeploymentManager.CreateObject("auto", "");

DeploymentBaseOptions baseOptions = new DeploymentBaseOptions();
DeploymentSyncOptions syncOptions = new DeploymentSyncOptions
{
    DeleteDestination = true;
};

DeploymentChangeSummary results = sourceObject.SyncTo(
   destObject, baseOptions, syncOptions);

// results.ObjectsDeleted == 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:54:31.863

感谢 Richard Szalay 的领导，我找到了答案，并且我使用了`ContentPath`提供程序，因为这是 VS Publishing 使用的常见提供程序，因此获得权限的机会很高：

```
var deployBaseOptions = new DeploymentBaseOptions
{
    ComputerName = "https://mywebserver.com:8172/msdeploy.axd?sitename=yourIISWebsiteName",
    UserName = "username",
    Password = "password",
    UseDelegation = true,
    AuthenticationType = "Basic"
};
var syncOptions = new DeploymentSyncOptions
{
    DeleteDestination = true
};
var deploymentObject = DeploymentManager.CreateObject(DeploymentWellKnownProvider.ContentPath,
                                                        "yourIISWebsiteName" + "/fileToDelete.txt",
                                                        destBaseOptions);

var results = deploymentObject.SyncTo(deployBaseOptions, syncOptions); 
```

奇怪的是，`results`即使只有一个文件，它也总是显示 3 个文件被删除......？！

# javascript - 通过 Javascript 调用控制器动作

> ID：13028208
> 
> 赞同：0
> 
> 时间：2012-10-23T10:14:30.373
> 
> 标签：javascript, asp.net-mvc-3

我使用 window.location 通过 javascript 调用控制器操作

```
window.location = "/SomeController/SomeAction/"; 
```

它工作正常，但是当我在子域上开发它时，它不能正确构建 URL

我的网址是

```
http://testgecianet/pms/ 
```

当我调用它构造 URL 的动作时

```
http://testgecianet/SomeController/SomeAction 
```

代替

```
http://testgecianet/pms/SomeController/SomeAction 
```

当应用程序部署在子域上时，我如何构建正确的路径。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:17:48.803

你试过用`@Url.Action`吗？

例如你的代码

```
 window.location = "/SomeController/SomeAction/"; 
```

可以写成

```
window.location = "@Url.Action("SomeAction","SomeController")"; 
```

这可以解决问题，我希望。

# .net - 在 windows mobile 6.5 中隐藏相机捕获对话框中的菜单栏

> ID：13028210
> 
> 赞同：0
> 
> 时间：2012-10-23T10:14:37.727
> 
> 标签：.net, windows-mobile-6.5

我想在 windows mobile 6.5 开发中隐藏相机捕获对话框中的菜单栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:57:07.957

没有官方 API 可以隐藏相机捕捉对话框的菜单栏。您可以向对话框发送击键、消息或简单的单击以获取全屏预览。

您还可以对对话框进行子类化并调整其大小以覆盖菜单栏。但这不推荐。用户应该如何接受拍摄的照片或返回？

另见[http://www.hjgode.de/wp/2011/03/08/mobile-development-subclassing-the-camera-view-cameracapturedialog-shcameracapture/](http://www.hjgode.de/wp/2011/03/08/mobile-development-subclassing-the-camera-view-cameracapturedialog-shcameracapture/)

如果您可以更详细地解释您的需求，请发表评论。

~约瑟夫

# php - 通过 SQL 动态更改下拉列表并计算总和？

> ID：13028214
> 
> 赞同：0
> 
> 时间：2012-10-23T10:14:53.883
> 
> 标签：php, javascript, jquery, mysql

我在一个表格中有一行，其中有 3 个字段，如下所示：

```
Job            Pay Grade       Cost
<Select>       <Select>        <Calculation> 
```

我有一个包含上述信息的 SQL 表，例如：

```
Job            Pay Grade       Cost
Techie         1               100
Techie         2               200
Engi           2               300
Engi           3               400
Engi           4               500 
```

我需要做的是能够从下拉列表中选择一个工作，然后薪酬等级选择框将根据 SQL 数据库中与该工作匹配的内容而改变。然后它将显示与所选对象相关的成本。

我怎么能解决这个问题，因为我有点卡住了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:31:40.787

选择职位时首先创建 ajax 请求。在请求的成功回调中，将为从服务器的 JSON 响应中选择薪酬等级的选项生成 html

jQuery

```
$('select.jobTitle').change(function(){
    var $titleSelect=$(this);
    $.getJSON('processJobGrades.php', { jobTitle : $(this).val() }, function(response){
        var gradesOptionsHtml=''; 
        /* create options html from json response */
        $.each( response, function(i, item){
            gradesOptionsHtml+='<option value="'+item.grade+' data-cost="'+item.cost+'">'+item.grade+'</option>';
        });  
         $titleSelect.parent().find('select.jobGrade').html(gradesOptionsHtml);       
    });   
}); 
```

在`processJobGrades.php`接收`$_GET['jobTitle']`。进行数据库查找并创建 json 以发回。

PHP

```
$outputArray=array();

/*in loop over DB data:*/
$outputArray[]= array( 'grade'=>$row['grade'], 'cost'=>$row['cost']);

/*Output final array as JSON*/
echo json_encode( $outputArray); 
```

支付等级选择的jQuery更改处理程序以获取`cost`

```
$('select.jobGrade').change(function(){
     var cost=$(this).find(':selected').data('cost')
     $(this).parent().find('input.jobCost').val( cost);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:33:56.133

您需要通过 $.ajax 发布选择作业，然后在成功函数中填充下拉列表，如下所示：

```
function selectHandler (event, ui)
        {
        var id = event.target.id;
        $.ajax({
                type: "POST",
                url: "/php/get_quantity_type.php",
                dataType:"json",
                data: { ingridient : ui.item.value},
                success: function(data){$("#"+id+"_t").empty(); $.each(data,function(index,value) {$("#"+id+"_t").append('<option value="' + value + '">' + value + '</option>');})}
                });
        } 
```

此示例从选择列表中获取材料的名称，通过 $ajax() 将其发布到 php 脚本，并将其写入一个新的下拉列表，该列表的 id 基于触发事件的 id。如果您需要 php 代码，请询问:)

您将作业列表绑定到上面的事件处理程序：

```
("#job_list").bind("select",selectHandler); 
```

此代码将数据发布到“/php/get_quantity_type.php”，并将结果传递给成功属性中声明的函数；

# ssis - SSIS 导出到 RDB 不适用于非 Unicode 页面文件 (8859-9)

> ID：13028217
> 
> 赞同：1
> 
> 时间：2012-10-23T10:14:56.460
> 
> 标签：ssis, hebrew, codepages, non-unicode, oracle-rdb

我正在尝试将数据从 MS SQL Server 2008 R2 中的表导出到 RDB 数据库。但是我在将希伯来语字符串导出到 RDB 时遇到问题，因为我的 SQL Server 是 Unicode 而我的 RDB 是非 unicode。

以下是详细信息：

1.  我正在使用适用于 .NET 的 Oracle RDB 数据提供程序 ![关系数据库连接](../Images/3702cd11f0910c18b3dbe6fb4469f27a.png)

2.  我在目标表中有一个非 Unicode 文本字段，即使我将数据转换为 28598 字符串，数据仍然在 RDB 中以 Unicode 格式出现（并且变得不可读）。

![SSIS 数据转换](../Images/e2134467b9a52c570d1c9854c382a714.png)

结果如下： ![关系数据库结果](../Images/13da5efd602e0d2cef58581409213198.png)

3.  我添加了一个网格数据查看器来检查数据的格式是否正确，看起来是否正确。 ![SSIS 网格查看器](../Images/269bd64b1eee8fc8a8f02bec293b4165.png)

4.  我更进一步，为这个特定的列手动配置了 ADO.NET 外部列属性以匹配数据类型（他自动将其识别为 Unicode，但事实并非如此）。 ![ADO.NET 高级编辑](../Images/2a74b9a1e3382983ca7331fa2951e57f.png)

为此，我检查了 FALSE 外部数据验证。否则 SSIS 将开始运行。 ![ADO.NET 高级编辑第 2 部分](../Images/145e6a006f0458b591ead3338104b8b6.png)

**如果有人有从 SSIS 在 RDB 中编写非 Unicode 数据的经验，请告诉我。它可以是希伯来语或任何其他使用非 Unicode 字符的语言。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:08:54.770

我找到了解决问题的方法。我将连接提供程序从*.Net Providers\ Oracle RDB Data Provider*替换为**ODBC**。

为此，我必须从 Oracle 网站（32 位版本）下载*RDB 数据库的 ODCB 驱动程序，并在 Windows* *ODBC Data Source Administrator*中配置系统 DSN 。

![SSIS 连接管理器和 ODBC 数据源管理器](../Images/aac099e2b0661099a9434909fa9cef6a.png)

在我看来，**Oracle RDB Data Provider for .NET**中存在一个只允许 Unicode 数据的错误。

如果 Oracle 更新此驱动程序，我希望我可以使用 .NET 提供程序而不是 ODBC。

# visual-studio-2010 - 如果在 Visual Studio 2010 中的“排队新构建”之后被破坏，我的第一个构建定义如何工作？

> ID：13028220
> 
> 赞同：1
> 
> 时间：2012-10-23T10:15:14.167
> 
> 标签：visual-studio-2010, build, tfsbuild, microsoft-test-manager

我正在尝试在物理环境中将我的自动编码 UI 测试 (CUIT) 与 Microsoft Test Manager 2010 一起使用。

*   创建了构建定义
*   为 Builds 和
*   [按照此处](http://msdn.microsoft.com/en-us/library/bb778394%28v=vs.100%29.aspx "Microsoft Library")的推荐共享此文件夹
*   在 TFS 2010 中创建了一个构建服务作为“交互过程”
*   创建了一个构建控制器
*   创建代理控制器

我不记得按哪个顺序（如果这很重要）

**来自MS Visual Studio 2010**的错误（图片请到[这里](https://docs.google.com/file/d/0B3TA6vyvJvAgRWdIM08yU3RfeVE/edit)）

错误一 (1)

> TF215097：为构建定义 \Test Sample\Project1BuildOne 初始化构建时出错：在 http://us07ws45510012:9191/Build/v3.0/Services/Controller/1 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

或者

错误二 (2)

> 构建控制器 us07ws45510012 - 控制器不包含名称为 * 且没有标签的已启用构建代理

**来自MS TFS 2010**的错误

 **错误三 (3)

> 服务 'us07ws45510012 - Agent1(OR CONTROLLER)' 出现异常：异常消息：加载自定义程序集时出现问题：API 限制：程序集 'file:///C:\Users\raul.reyes\AppData\Local\Temp\BuildAgent \1\TestProject \obj\Debug\TestProject1.dll' 已经从不同的位置加载。它不能从同一 appdomain 中的新位置加载。

如果您想看 VISUAL STUDIO 20120 图像，请到[这里](https://docs.google.com/file/d/0B3TA6vyvJvAgRWdIM08yU3RfeVE/edit)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-26T21:26:17.937

关于错误 #2（**构建控制器 [controllerName] 不包含名称为 * 且没有标签的已启用构建代理**），我在重新分配构建控制器并创建具有标签的新构建代理后遇到此错误。

**构建定义上的标签定义**

在运行构建时，对构建代理定义中定义的标签进行了匹配。在构建定义上，可以按如下方式查看/配置：

1.  在 Visual Studio IDE 的 Builds 下（在 Team Explorer 中），右键单击构建定义，然后选择“Edit Build Definition...”
2.  在进程下，展开“高级”，然后展开“代理设置”。注意“标签过滤器”。这里可以选择标签，构建代理会根据标签来选择。

![构建定义设置，扩展标签过滤器](../Images/8c124d8e8aab52167e5bed4f3040a8ea.png)

在这种情况下，错误表明构建定义正在寻找“无标签”和完全匹配（**MatchExactly**）。那么，构建代理是否定义了标签？如果是这样，要么从构建代理中删除它们，要么配置构建定义以使用标签，以便匹配构建代理。

**构建代理上的标签定义**

标签在构建代理上定义。它们可以在 TFS 构建服务器上进行修改（基于构建控制器和构建定义中配置的构建代理）。

要在构建代理上定义/修改标签，在 TFS 构建服务器上...

1.  启动“Team Foundation Server 管理控制台”
2.  导航到“构建配置”
3.  找到分配给构建定义正在使用的构建控制器的构建代理，然后选择属性
4.  可以在“构建代理属性”对话框中创建、添加和删除标签：

![构建代理标签设置](../Images/a10f1b8c5ab37068d61c5236caacbf31.png)

鉴于上述构建定义和构建代理配置的图片（只有一个构建代理），将导致此错误，因为构建定义期望在没有标签上完全匹配，并且为与关联的构建控制器配置的唯一构建代理构建定义定义了一个标签（“原型”）。因此，“no tags”和“prototype”没有完全匹配。**

# asp.net-mvc - IIS 上从 http 到 https 的 URL 重写不起作用，

> ID：13028223
> 
> 赞同：9
> 
> 时间：2012-10-23T10:15:26.103
> 
> 标签：asp.net-mvc, http, iis-7, https, url-rewriting

我有个问题。在`IIS`我得到一个有两个端口`80`和`443(https)`. 我想将`http`用户的所有请求重定向到`https`. 我还添加了`Rewrite rule to https`，但是当我在浏览器中输入时，`http://localhost/site`它给了我相同的页面。我需要将用户重定向到`httpS://localhost/site`.

也许这是因为我的本地配置？

我禁用`Require SSL`了`IIS`.

```
The rule is:
<rewrite>
  <rules>
    <rule name="HTTPS Redirect">
      <match url="(.*)" ignoreCase="false" />
      <conditions>
        <add input="{HTTPS}" pattern="off" ignoreCase="false" />
      </conditions>
      <action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}{REQUEST_URI}" />
    </rule>
  </rules>
</rewrite> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T13:44:20.377

以下是我们在生产 IIS 7 站点上使用的将所有请求从 HTTP 重定向到 HTTPS 的确切规则

```
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Redirect to HTTPS" stopProcessing="true">
          <match url="(.*)" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Found" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

您发布的内容与我们使用的内容之间存在一些细微差别。此外，由于您在本地主机上运行，​​您不会使用带有 Visual Studio 的内置 Web 服务器吗？我认为它不会处理 IIS 重写规则。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-05T19:12:40.773

我意识到这可能不是您的问题，但是我遇到了类似的崩溃，这是由另一个问题引起的。

我启用了要求 SSL，这导致站点不断返回 403。因此，要使用此方法，您似乎必须禁用 SSL 设置 -> 要求 SSL。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T17:52:52.230

它适用于 IIS 8.5 [重定向](https://www.youtube.com/watch?v=oriQyM9NMUY)

三点：

1.  使用单个单词`OFF`而不是`^OFF$`
2.  利用`url="https://{HTTP_HOST}/{REQUEST_URI}"`
3.  在这种情况下使用`redirectType=Permanent`而不是`Found`虽然两者都有效但更可取`Permanent`的类型

网络配置代码

```
<rewrite>
  <rules>
    <rule name="Redirect to HTTPS" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTPS}" pattern="OFF" />
      </conditions>
      <action type="Redirect" url="https://{HTTP_HOST}/{REQUEST_URI}" redirectType="Permanent" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-06T21:19:44.813

此外，如果您有多个规则，则顺序可能很重要。确保在其他规则之前添加重定向规则，否则重定向可能不会触发。

这是一个使用需要规则顺序的 SPA 的示例。

```
 <rules>

         // Adding this as last rule will cause it to not redirect
        <rule name="HTTP/S to HTTPS Redirect" enabled="true" stopProcessing="true">
        <match url="(.*)" />
        <conditions logicalGrouping="MatchAny">
          <add input="{SERVER_PORT_SECURE}" pattern="^0$" />
        </conditions>
        <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" redirectType="Permanent" />
        </rule>

      <rule name="static dist files" stopProcessing="true">
        <match url="^(.+)" />
        <conditions>
          <add input="{APPL_PHYSICAL_PATH}app\{R:1}" matchType="IsFile" />
        </conditions>
        <action type="Rewrite" url="/app/{R:1}" />
      </rule>
      <rule name="index.html as document root" stopProcessing="true">
        <match url="^$" />
        <action type="Rewrite" url="/app/" />
      </rule>
      <rule name="SPA Routes" stopProcessing="true">
        <match url=".*|.*/.*$" />
        <conditions logicalGrouping="MatchAll">
          <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          <add input="{REQUEST_URI}" pattern="^/(api)" negate="true" />
        </conditions>
        <action type="Rewrite" url="/app/" />
      </rule>
    </rules> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T13:47:30.983

您可以将其添加到您的页面。强制重定向。

```
if (!Request.IsSecureConnection)
{
Uri uri = new Uri(Request.Url, Request.RawUrl);
Response.Redirect(string.Format("https://{0}{1}{2}", uri.Host.StartsWith("www.x.com") ? uri.Host : "www.x.com", uri.AbsolutePath, uri.Query));
 } 
```

我刚刚看到你的 mvc 标签

将此属性添加到您的操作中。或控制器。

```
[RequireHttps] 
```

# regex - 使用 findstr (ms-dos) 的正则表达式

> ID：13028228
> 
> 赞同：3
> 
> 时间：2012-10-23T10:16:02.407
> 
> 标签：regex, dos

我正在尝试使用 ms-dos 命令 findstr 查找字符串并将其从文件中删除。

目前我可以找到一个明确的字符串，但我真的很努力使用正则表达式。该文件如下所示：

```
PLs - TULIP Report  
Output_Format, PLS - TULIP REPORT  
NUMLINES,    110907
VARIABLE_TYPES,T1,T8,I,T9,T2,N,N,N  
[[data below]] 
```

该文件是从某个系统导出的，并且令人讨厌的是其中包含该标题-因此我想在使用 SQL Loader 将其导入 Oracle 数据库之前对其进行清理。

不仅有一个文件，而且所有文件都具有相同类型的标题，但每个文件中的标题略有不同。虽然我很高兴首先使用硬编码值删除前两行，例如：

```
findstr /v "PLs - TULIP Report" "c:\myfiles\file1.PRO"  > "c:\myfiles\file1.csv"</code><br>
findstr /v "Output_Format, PLS - TULIP REPORT" "c:\myfiles\file1.csv" > "c:\myfiles\file2.csv" 
```

*（请注意我是如何分两步做到这一点的 - 任何可以一步完成的建议，将不胜感激）*

第三行对我来说更复杂，它总是采用这种格式：

```
NUMLINES,    110907 
```

除了每个文件末尾的数字不同。那么如何使用正则表达式找到整行呢？我努力了：

```
findstr /v /b /r "\D+ \s+ \d+" 
```

但没有任何运气。

仅供参考，数据`[[data below]]`看起来像

```
*,"00000161",456823,"017896532","FU",23.95,3.34,20.61 
```

等等..显然，我不想修改数据区。

希望上面说的有道理

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:19:38.463

您必须排除单行，`findstr`不能匹配多行。只需用空格分隔不同的正则表达式

```
findstr /r /b /v "NUMLINES PLs Output_Format" *.txt 
                  ^regex1  ^2  ^3 
```

指定`/b`允许您仅在行的开头查找匹配项并`/v`排除这些行。

编辑：

当然用法是

```
 findstr /r /b /v "NUMLINES PLs Output_Format" yourfile > yourtarget 
```

在`yourtarget`你会发现`yourfile`除了正则表达式排除的行之外的数据。

编辑2：

根据您的评论，您只需添加`VARIABLE_TYPES`到您的正则表达式中即可

```
findstr /r /b /v "NUMLINES PLs Output_Format VARIABLE_TYPES" yourfile > yourtarget 
```

这是在一条指令中完成整个操作的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:38:56.420

这是一个使用正则表达式的单行，它将排除所有四行。（我使用了续行以使代码看起来更好。）每一行都必须完全匹配。我允许每行以任意数量的空格结尾，因为我不确定您的格式。*注意 - FINDSTR 正则表达式支持非常有限且非标准。还有许多其他 FINDSTR 怪癖和错误。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。*

```
findstr /vrx /c:"PLs - TULIP Report *"^
             /c:"Output_Format, PLS - TULIP REPORT *"^
             /c:"NUMLINES, *[0-9]* *"^
             /c:"VARIABLE_TYPES,T1,T8,I,T9,T2,N,N,N *"^
        "c:\myfiles\file1.PRO"  >"c:\myfiles\file1.csv" 
```

如果您只需要跳过前 4 行，那么您通常应该能够使用 MORE。但是在某些情况下，大文件可能会挂起 MORE，但我不记得具体情况了。此外，MORE 会将制表符转换为一系列空格。

```
more +4 "c:\myfiles\file1.PRO"  >"c:\myfiles\file1.csv" 
```

另一种选择是使用 FOR /F 循环。FOR /F 跳过空行，但我认为这不是你关心的问题。

```
>"c:\myfiles\file1.csv" (
  for "usebackq skip=4 delims=" %%A in ("c:\myfiles\file1.PRO") do echo(%%A
) 
```

如果您的任何数据都可以以 a 开头，`;`那么代码会变得有点难看。然后，您可能希望通过将 EOL 选项设置为换行符来禁用它。

```
set LF=^

::above 2 blank lines are critical - do not remove
>"c:\myfiles\file1.csv" (
  for usebackq^ skip^=4^ eol^=^%LF%%LF%^ delims^= %%A in ("c:\myfiles\file1.PRO") do echo(%%A
) 
```

# php - php 在获取文件内容之前评估代码

> ID：13028229
> 
> 赞同：3
> 
> 时间：2012-10-23T10:16:03.743
> 
> 标签：php, file, include

我有一个文件 B590.php，它有很多 html 代码和一些 php 代码（例如登录的用户名、用户的详细信息）。

我尝试使用`$html = file_get_content("B590.php");`

但随后`$html`将 B90.php 的内容作为纯文本（带有 php 代码）。

有什么方法可以在评估文件后获取文件的内容？似乎有很多相关的问题，比如[这个](https://stackoverflow.com/questions/9466936/get-parsed-php-file)和[这个](https://stackoverflow.com/questions/851367/how-to-execute-and-get-content-of-a-php-file-in-a-variable)，但似乎没有一个有明确的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:18:16.057

您可以使用`include()`执行 PHP 文件和输出缓冲来捕获其输出：

```
ob_start();
include('B590.php');
$content = ob_get_clean(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T09:41:19.100

```
 function get_include_contents($filename){
      if(is_file($filename)){
        ob_start();
        include $filename;
        $contents = ob_get_contents();
        ob_end_clean();
        return $contents;
      }
      return false;
    }

    $html = get_include_contents("/playbooks/html_pdf/B580.php"); 
```

这个答案最初发布在 Stackoverflow

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:26:07.170

如果您使用`include`或`require`文件内容将表现得好像当前正在执行的文件也包含该文件的代码`B590.php`。如果您想要的是该文件的*“结果”*（即输出），您可以这样做：

```
ob_start();
include('B590.php');
$html = ob_get_clean(); 
```

例子：

B590.php

```
<div><?php echo 'Foobar'; ?></div> 
```

当前的.php

```
$stuff = 'do stuff here';
echo $stuff;
include('B590.php'); 
```

将输出：

> 在这里做事
> <div>Foobar</div>

然而，如果 current.php 看起来像这样：

```
$stuff = 'do stuff here';
echo $stuff;
ob_start();
include('B590.php');
$html = ob_get_clean();
echo 'Some more';
echo $html; 
```

输出将是：

> 在这里做一些事情
> <
> div>Foobar</div>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:30:06.230

要将评估结果存储到某个变量中，请尝试以下操作：

```
ob_start();
include("B590.php");
$html = ob_get_clean(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:26:12.237

```
$filename = 'B590.php';
$content = '';

if (php_check_syntax($filename)) {
    ob_start();
    include($filename);
    $content = ob_get_clean();
    ob_end_clean();
}

echo $content; 
```

# ios - 当应用程序变为活动时，iOS 推送通知重定向到查看

> ID：13028233
> 
> 赞同：1
> 
> 时间：2012-10-23T10:16:11.753
> 
> 标签：ios, ios5, apple-push-notifications

考虑到应用程序在操作之前刚刚启动，一旦用户从通知中心打开应用程序，是否有任何方法可以重定向到视图。（应用程序仍在后台运行）

例如，我正常启动应用程序，按主页按钮。然后我收到了一些远程通知，然后我从该推送通知的任何地方打开应用程序。

因为我有不同的推送通知可以重定向到我的应用程序的任何部分。我希望重定向不仅在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

在应用程序激活期间我是否仍然可以访问远程通知（内部的 json 数据）？这样我就可以做一些重定向。而且，这样用户就可以浏览他在中心的远程通知，并根据用户点击的通知被重定向到正确的视图。

**更新**

另一个例子：
（1）用户在（2）用户收到2个推送通知，`application: didReceiveRemoteNotification:`
第一个推送通知被重定向。
（3）用户去他的通知中心
（4）点击另一个通知。他还会被重定向吗？我认为该应用程序不会进入其中`application:didReceiveRemoteNotification:`或`application: didFinishLaunchingWithOptions:`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:31:07.580

有与 DIDReceiveRemoteNotification 方法关联的用户信息...您可以按照委托方法使用它。

```
- (BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSDictionary* userInfo =
        [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (userInfo) {
        [self processRemoteNotification:userInfo];
    }
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
    return YES;
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    [self processRemoteNotification:userInfo];
} 
```

之后在用户信息中有一个名为 APS 的密钥，您可以通过以下方法使用它。

```
NSDictionary *apsInfo = [userInfo objectForKey:@"aps"]; 
```

之后，您可以从 APNS 的有效负载中获取每个元素并决定重定向到哪个视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T10:39:19.687

是的，你可以，这是一个简单的大纲/示例

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
 {
      //When notification is pressed on background it will enter here

      //Get strings based on information on your json payload for example
      if([[userInfo objectForKey:@"keyword"] isEqualToString:@"value"]){
           //redirect/push a screen here for example
      }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:25:33.967

是的，你可以。

收到远程通知后，将调用以下委托方法。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo; 
```

# javascript - 清理字符串以使其 URL 和文件名安全？

> ID：13028237
> 
> 赞同：0
> 
> 时间：2012-10-23T10:16:19.393
> 
> 标签：javascript

我需要 javascript 来创建与我在 PHP 中创建的完全相同的 url 安全文件名。

这是我在 PHP 中的代码：

```
<?php
$clean_name = strtr($string, 'ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåçèéêëìíîïñòóôõöøùúûüýÿ', 'SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy');
$clean_name = strtr($clean_name, array('Þ' => 'TH', 'þ' => 'th', 'Ð' => 'DH', 'ð' => 'dh', 'ß' => 'ss', 'Œ' => 'OE', 'œ' => 'oe', 'Æ' => 'AE', 'æ' => 'ae', 'µ' => 'u'));

$clean_name = preg_replace(array('/\s/', '/\.[\.]+/', '/[^\w_\.\-]/'), array('_', '.', ''), $clean_name);
$clean_name = strtolower($clean_name);

?> 
```

我将如何在 Javascript 中复制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:21:43.717

您可以将 PHP 值放入 javascript 值中，如下所示：

```
<script>

var JSvar = "<?= $phpVar ?>";

</script> 
```

# ios - UItableview scrollToRowAtIndexPath 没有正确显示最后一行

> ID：13028239
> 
> 赞同：5
> 
> 时间：2012-10-23T10:16:20.737
> 
> 标签：ios, uitableview, scroll

我有一个表格视图，其中包含具有动态单元格高度的自定义单元格，具体取决于单元格内容。

我的问题如下，当我在 viewDidLoad 中以编程方式要求滚动到它工作的给定位置时，除了最后一行。有时该行出现但不完全，有时甚至没有出现。在这两种情况下，我都必须手动滚动才能看到该行。

这是代码：

```
[self.tableView reloadData];

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:aRow inSection:aSection];
[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES ]; 
```

这是iOS的错误吗？任何解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T14:46:46.050

据我所知，

`view`在屏幕上显示之前使用的所有操作都在`viewDidLoad`所有UI对象中初始化，数据对象可以在此方法中分配和初始化。

所有操作数据修改，UI修改都`view`需要在`viewDidAppear`. 甚至一些操作也可以在`viewWillAppear`.

因此，对于您的问题，`UITableView`必须在表格加载并显示在屏幕上（即`viewDidAppear`.

另请注意，每次向用户显示视图时都会调用`viewDidAppear`& `viewWillAppear`，因此如果您只想为第一个实例滚动表格，您可以在标题中使用一个标志来指示该实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-24T10:53:07.427

```
[self.tableView reloadData];
dispatch_async(dispatch_get_main_queue(), ^{
        NSIndexPath *rowIndexPath = [NSIndexPath indexPathForRow:3 inSection:0];
        [self.tableView scrollToRowAtIndexPath:rowIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
}); 
```

我不知道确切原因，但我猜这种方法有效，因为当我们添加（？？？）行并调用 [tableView reloadData] 时，tableView 没有时间更新一些内部计数器（如行计数器）并调用 [tableView scrollToRowAtIndexPath 。 ..] 没有效果，因为当时没有这样的行（同样，如果您第一次**添加**行或设置 tableView 的数据，可能是正确的）。打电话

```
dispatch_async(dispatch_get_main_queue(), ^{
    ...
}); 
```

在 [tableView reloadData] 给 tableView 足够的时间来更新行计数器并执行滚动到现有行之后。

[Vishy 的方法](https://stackoverflow.com/a/13033138/2305175)之所以有效，是因为它提供了足够的时间，但仅适用于您需要在加载屏幕时恰好滚动一次的情况。此外，每次 viewDid/WillAppear 时都需要检查丑陋的标志。

# javascript - 在服务器端哄骗

> ID：13028243
> 
> 赞同：0
> 
> 时间：2012-10-23T10:16:27.003
> 
> 标签：javascript, xss, google-caja

我阅读了一些 google-caja wiki 页面并有兴趣使用它。我对 caja 的看法是，我们可以将一些 html（例如标签）发送到 google-caja 的服务器（哄骗服务），然后哄骗 html 和内容 javascript 然后发送到我们的页面。最后加载 google-caja 的 javaScript 为内容 javascript（在标签 div 中）提供虚拟 DOM。还有许多其他选项（例如禁用标签内容js）。

我想在服务器端使用此功能（cajole）。加载一些 html 块。然后将其作为字符串传递给 caja。然后将返回的带有必要 js（用于应用限制）的 cajole 字符串插入到我的 JAVA Web 应用程序响应中。

-Html 块，应该在**服务器端**加载或从数据库提供，并且是**字符串**- 我的 Web 应用程序的语言是**JAVA**。

需要哪些 jars 和 jses 文件？从哪个函数开始？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:07:19.340

Caja 游乐场中[`web.xml`](http://code.google.com/p/google-caja/source/browse/trunk/web.xml?r=5066)使用的 表明[`CajolingServlet`](http://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/service/CajolingServlet.java)和`PrecajoleInfoServlet`用于启动和运行服务。

[ANT 构建文件](http://code.google.com/p/google-caja/source/browse/trunk/build.xml#640)列出了您需要的 JAR 集。主要的是`ant-jars/pluginc.jar`，其余的是 3rd-party 依赖项。

[google-caja-discuss](https://groups.google.com/forum/?fromgroups#!forum/google-caja-discuss)也是提问的好地方。

# android - android spotify ERROR detaching thread with interp frames (count=28)

> ID：13028247
> 
> 赞同：4
> 
> 时间：2012-10-23T10:16:35.070
> 
> 标签：android, android-ndk, spotify

我正在做一个 android 项目，需要集成 Spotify 流媒体功能。现在我可以加载动态库和调用函数，但是有一些问题。

```
callbacks.notify_main_thread = callback_notify_main_thread;
config.callbacks = &callbacks;
error = sp_session_create(&config, &session); 
```

然后在回调函数`notify_main_thread`中，它将：

```
vm->AttachCurrentThread( &env, NULL );
vm->DetachCurrentThread(); 
```

此回调函数仍在[由 Spotify c 代码创建的本机线程](https://developer.spotify.com/technologies/libspotify/faq/)中（请参阅问题“根据 do 文档，一些回调是从‘内部会话线程’调用的。这是什么意思？”）。

因此，首先我将当前线程附加到 javaVM 并获取 JNIEnv，然后调用 java 方法，然后将其分离。但是执行时会崩溃`DetachCurrentThread`：

```
10-23 14:55:21.869: E/dalvikvm(1000): ERROR: detaching thread with interp frames (count=28)
10-23 14:55:21.869: I/dalvikvm(1000): "main" prio=5 tid=1 RUNNABLE
10-23 14:55:21.869: I/dalvikvm(1000):   | group="main" sCount=0 dsCount=0 s=N obj=0x40025ad8 self=0xcd80
10-23 14:55:21.869: I/dalvikvm(1000):   | sysTid=1000 nice=0 sched=0/0 cgrp=default handle=-1345017808
10-23 14:55:21.869: I/dalvikvm(1000):   | schedstat=( 523773188 356262213 1690 )
10-23 14:55:21.869: I/dalvikvm(1000):   at com.Spotify.Session.Initialise(Native Method)
...
10-23 14:55:21.869: E/dalvikvm(1000): VM aborting
10-23 14:55:21.899: D/RegisterService(519): insert plugin size 1
10-23 14:55:21.958: D/RegisterService(519): insert plugin size 1
10-23 14:55:21.979: I/DEBUG(64): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
10-23 14:55:21.979: I/DEBUG(64): Build fingerprint: 'htc_wwe/htc_bravo/bravo/bravo:2.2.2/FRG83G/345208.14:user/release-keys'
10-23 14:55:21.979: I/DEBUG(64): pid: 1000, tid: 1000  >>>  <<<
10-23 14:55:21.979: I/DEBUG(64): signal 11 (SIGSEGV), fault addr deadd00d
10-23 14:55:21.979: I/DEBUG(64):  r0 00000026  r1 afd14699  r2 afd14699  r3 00000000
10-23 14:55:21.979: I/DEBUG(64):  r4 808a3448  r5 808a3448  r6 fffe9544  r7 fffe2054
10-23 14:55:21.979: I/DEBUG(64):  r8 80b09f04  r9 00000001  10 002f0980  fp 002f0980
10-23 14:55:21.979: I/DEBUG(64):  ip deadd00d  sp beffb088  lr afd156e3  pc 80842560  cpsr 20000030
10-23 14:55:21.979: I/DEBUG(64):  d0  6472656767756265  d1  617453657669746e
10-23 14:55:21.979: I/DEBUG(64):  d2  4965746f67795a67  d3  6874654d2474690a
10-23 14:55:21.979: I/DEBUG(64):  d4  80a0a16580a0a179  d5  80a0a14580a0a155
10-23 14:55:21.979: I/DEBUG(64):  d6  80a0a12180a0a135  d7  0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d8  40b0000040a00000  d9  0000000000000005
10-23 14:55:21.979: I/DEBUG(64):  d10 0000000000000000  d11 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d12 0000000000000000  d13 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d14 0000000000000000  d15 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d16 001512f000000025  d17 bff0000000000000
10-23 14:55:21.979: I/DEBUG(64):  d18 3ff0000000000000  d19 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d20 0000000000000000  d21 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d22 3ff0000000000000  d23 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d24 3ff0000000000000  d25 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d26 0000000000000000  d27 0000000000000000
10-23 14:55:21.979: I/DEBUG(64):  d28 001f001f001f001e  d29 001e001f001f001f
10-23 14:55:21.979: I/DEBUG(64):  d30 001f001f001f001f  d31 001f001f001f001f
10-23 14:55:21.979: I/DEBUG(64):  scr 60000012
10-23 14:55:21.999: I/DEBUG(64):          #00  pc 00042560  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):          #01  pc 0004fe6e  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):          #02  pc 000455c2  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):          #03  pc 000088aa  /data/data/xxx/lib/xxx.so
10-23 14:55:21.999: I/DEBUG(64):          #04  pc 00008bb2  /data/data/xxx/lib/xxx.so
10-23 14:55:21.999: I/DEBUG(64):          #05  pc 0000a1e8  /data/data/xxx/lib/xxx.so
10-23 14:55:21.999: I/DEBUG(64): code around pc:
10-23 14:55:21.999: I/DEBUG(64): 80842540 20061861 f7d418a2 2000ea54 ebb2f7d4 
10-23 14:55:21.999: I/DEBUG(64): 80842550 58234808 b1036bdb f8df4798 2026c01c 
10-23 14:55:21.999: I/DEBUG(64): 80842560 0000f88c ec18f7d4 00060f0c fffe2054 
10-23 14:55:21.999: I/DEBUG(64): 80842570 fffe52c8 000003a8 deadd00d f8dfb40e 
10-23 14:55:21.999: I/DEBUG(64): 80842580 b503c02c bf00490a 188ba200 f853aa03 
10-23 14:55:21.999: I/DEBUG(64): code around lr:
10-23 14:55:21.999: I/DEBUG(64): afd156c0 b5f74b0d 490da200 2600189b 585c4602 
10-23 14:55:21.999: I/DEBUG(64): afd156d0 686768a5 f9b5e008 b120000c 46289201 
10-23 14:55:21.999: I/DEBUG(64): afd156e0 9a014790 35544306 37fff117 6824d5f3 
10-23 14:55:21.999: I/DEBUG(64): afd156f0 d1ed2c00 bdfe4630 0002cc60 000000d8 
10-23 14:55:21.999: I/DEBUG(64): afd15700 b086b570 f602fb01 9004460c a804a901 
10-23 14:55:21.999: I/DEBUG(64): stack:
10-23 14:55:21.999: I/DEBUG(64):     beffb048  00000015  
10-23 14:55:21.999: I/DEBUG(64):     beffb04c  afd146c9  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb050  afd425a0  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb054  afd4254c  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb058  00000000  
10-23 14:55:21.999: I/DEBUG(64):     beffb05c  afd156e3  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb060  afd14699  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb064  afd14699  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb068  afd146f0  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb06c  808a3448  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):     beffb070  808a3448  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):     beffb074  fffe9544  
10-23 14:55:21.999: I/DEBUG(64):     beffb078  fffe2054  
10-23 14:55:21.999: I/DEBUG(64):     beffb07c  afd146fd  /system/lib/libc.so
10-23 14:55:21.999: I/DEBUG(64):     beffb080  df002777  
10-23 14:55:21.999: I/DEBUG(64):     beffb084  e3a070ad  
10-23 14:55:21.999: I/DEBUG(64): #00 beffb088  0000cd80  [heap]
10-23 14:55:21.999: I/DEBUG(64):     beffb08c  8084fe73  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64): #01 beffb090  0000cd80  [heap]
10-23 14:55:21.999: I/DEBUG(64):     beffb094  4635cdd8  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
10-23 14:55:21.999: I/DEBUG(64):     beffb098  0000cd80  [heap]
10-23 14:55:21.999: I/DEBUG(64):     beffb09c  00000001  
10-23 14:55:21.999: I/DEBUG(64):     beffb0a0  00000007  
10-23 14:55:21.999: I/DEBUG(64):     beffb0a4  808494c1  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):     beffb0a8  80b09f04  /data/data/xxx/lib/xxx.so
10-23 14:55:21.999: I/DEBUG(64):     beffb0ac  80848655  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):     beffb0b0  80b09aa8  /data/data/xxx/lib/xxx.so
10-23 14:55:21.999: I/DEBUG(64):     beffb0b4  41a9e564  /dev/ashmem/dalvik-LinearAlloc (deleted)
10-23 14:55:21.999: I/DEBUG(64):     beffb0b8  808494c1  /system/lib/libdvm.so
10-23 14:55:21.999: I/DEBUG(64):     beffb0bc  808455c7  /system/lib/libdvm.so
10-23 14:55:22.239: I/ActivityManager(96): Process xxx (pid 1000) has died. 
```

而如果

```
//vm->DetachCurrentThread(); 
```

然后调用 sp_session_create()，它永远不会返回错误代码。

参考：

1.  [https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/2H8z5grNqjo](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/2H8z5grNqjo)
2.  [http://groups.google.com/forum/?fromgroups=#!topic/android-ndk/QPTbxdAbz1M](http://groups.google.com/forum/?fromgroups=#!topic/android-ndk/QPTbxdAbz1M)
3.  [https://developer.spotify.com/technologies/libspotify/docs/12.1.45/api_8h.html](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/api_8h.html)
4.  [https://developer.spotify.com/technologies/libspotify/faq/](https://developer.spotify.com/technologies/libspotify/faq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:31:03.460

问题解决了，我使用 javaVM->GetEnv() 来检查当前线程是否已经附加到 vm，而不是直接附加线程并获取 JNIEnv。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T07:05:05.587

由于您只需要分离已附加的线程，因此您可以通过使用[Android 开发人员 JNI 提示页面中的线程部分提供的提示](http://developer.android.com/training/articles/perf-jni.html#threads)非常优雅地避免此问题。对于从第三个库调用的附加线程，当你附加它并从那里分离它时，立即在线程上附加一个“死前”回调可能是最简单的。像这样（c ++“伪”）：

```
pthread_key_t CallbackListener::current_env_key;

...

JNIEnv * CallbackListener::getEnv() {
  JNIEnv *env;
  if ((env = (JNIEnv *)pthread_getspecific(current_env_key)) == NULL) {
    env = YourJavaThreadUtils::attachCurrentThreadToJVM(kCallbackThreadName);
    pthread_key_create(&current_env_key, CallbackListener::detach);
    pthread_setspecific(current_env_key, env);
  }
  return env;
}

...

void CallbackListener::detach(void *env) {
  YourJavaThreadUtils::detatchCurrentThreadFromJVM();
} 
```

# java - 如果连接被拒绝，如何切换到另一台服务器？

> ID：13028249
> 
> 赞同：1
> 
> 时间：2012-10-23T10:16:35.227
> 
> 标签：java, connection, telnet, switching

如果当前连接、连接被拒绝或当前 IP 不存在，我需要切换到另一个。这是代码的一部分：

```
String [] server= {"10.201.30.200", "10.66.20.70",}; // Servers array

public void Telnet(String[] server) {
    try {
        out2 = new PrintStream(new FileOutputStream("output.txt"));
        String [] hrnc = {"HRNC01_", "HRNC02_", "HRNC03_","NRNC01_", "NRNC02_"};

        for (int i = 0; i < server.length; i++) {        
            // Connect to the specified server
            if (server[i].equals("10.201.30.200")) { 
                // Commands via telnet
            } else if (server[i].equals("10.66.20.70")) {
                // Commands
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

例如，如果第一个 IP 不存在，我需要连接到下一个服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:20:48.440

尝试建立连接，捕获异常，如果发生，请尝试另一个 IP 地址。

编辑：当然！这是我的实现

```
package tests;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintStream;
import java.net.Socket;

public class Connection {
    // Servers array
    private static final String[] server = { "10.201.30.200", "10.66.20.70" };
    // @logoff: default Telnet port
    private static final int port = 23;

    public static void telnet(String[] server) {
        PrintStream out2;
        try {

            out2 = new PrintStream(new FileOutputStream("output.txt"));

            String[] hrnc = { "HRNC01_", "HRNC02_", "HRNC03_", "NRNC01_",
                    "NRNC02_" };

            for (int i = 0; i < server.length; i++) {
                try {
                    // @logoff: try connection
                    Socket socket = new Socket(server[i], port);
                } catch (IOException e) {
                    // @logoff: typical "Connection timed out" or
                    // "Connection refused"
                    System.err.println("Error connecting to " + server[i]
                            + ". Error = " + e.getMessage());
                    // @logoff: continue to next for element
                    continue;
                }

                // Connect to the specified server
                if (server[i].equals("10.201.30.200")) {
                    // Commands via telnet
                }

                else if (server[i].equals("10.66.20.70")) {
                    // Commands
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        // @logoff: your method returns void
        return;
    }

    public static void main(String[] args) {
        telnet(server);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:25:43.400

尝试将每个连接尝试放在 try/catch 语句中

# php - 使用 PHP curl 发送存储在 $_COOKIE 全局上的 cookie

> ID：13028258
> 
> 赞同：6
> 
> 时间：2012-10-23T10:17:01.877
> 
> 标签：php, curl

我有两个站点**dev1.test.com**和**dev2.test.com**。

这是在不同服务器上运行的两个站点。dev1.test.com 是我登录的地方，我将 cookie 设置为***.test.com**以验证用户是否已登录。

现在在 dev2.test.com 上，我想通过向 dev1.test.com 发送 PHP CURL 请求来检查当前用户是否已登录。在我的 curl 请求中，我想在此 curl 请求中包含 $_COOKIE 的内容（其中包含 *.test.com 的 cookie 信息）。

我应该如何在 php curl 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T10:27:27.730

由于您有一个通配符 cookie 域，因此 dev2 也将具有与 dev1 相同的 cookie。所以基本上你需要说“通过 curl 将我的 cookie 传递给其他服务器。

您想要的 curl 选项是“CURLOPT_COOKIE”，并且您传入一个 cookie 字符串“name1=value1;name2=value2”

把它放在一起（未经测试 - 当然，你需要将它包装在其他 curl 函数中）

```
$cookiesStringToPass = '';
foreach ($_COOKIE as $name=>$value) {
    if ($cookiesStringToPass) {
        $cookiesStringToPass  .= ';';
    }
    $cookiesStringToPass .= $name . '=' . addslashes($value);
}
curl_setopt ($ch, CURLOPT_COOKIE, $cookiesStringToPass ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-29T01:41:34.140

这是我用来通过 curl 转发 $_COOKIE 的：

```
$cookie_data =
  implode(
    "; ",
    array_map(
      function($k, $v) {
        return "$k=$v";
      },
      array_keys($_COOKIE),
      array_values($_COOKIE)
    )
  );
curl_setopt($ch, CURLOPT_COOKIE, $cookie_data); 
```

参考： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-28T14:19:33.887

除了与`$_COOKIE`您一起工作之外，还可以使用`$_SERVER['HTTP_COOKIE']`包含 HTTP 标头字符串的 。

即你只需要这样写：

```
curl_setopt($ch, CURLOPT_COOKIE, $_SERVER['HTTP_COOKIE']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:20:56.010

阅读：[http ://be2.php.net/manual/en/function.curl-setopt.php](http://be2.php.net/manual/en/function.curl-setopt.php)

`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR`

因此，您必须`$_COOKIE`从一台服务器读取，将其保存到文件中，然后将其发送到另一台服务器

它看起来像：

```
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt"); 
```

# bash - Bash：变量没有被填充

> ID：13028259
> 
> 赞同：0
> 
> 时间：2012-10-23T10:17:06.400
> 
> 标签：bash, variables

最初来自：[IF grep finds what it is looking for do X else Y](https://stackoverflow.com/questions/13024828/if-grep-finds-what-it-is-looking-fore-do-x-else-y)但最初的问题得到了回答。

$@ 的值为“加载 firefox/3.6.12”

```
var1=$(echo "$@" | grep -Eio '\s\w*') # Gets the application name and put it into var1
echo $var1   # is not printed should be "firefox"
var2=$(echo "$@" | grep -o '[^/]*$')  # Gets version name and put it into var2 
echo $var2 # prints fine 
```

正则表达式很好，在我改变一些东西之前它已经工作过一次

编辑：有问题

```
var1=$(echo "$@" | grep -Eio '\s\w*') #expected result is: firefox 
```

如果我使用，我工作得很好

```
var1="firefox" 
```

我一定在某个点上改变了一些东西。

编辑：解决方案

```
echo "Load firefox/6.12.3" | awk ‘{print $2}’ | cut -f1 -d”/” 
```

不再使用 Grep。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:50:49.593

尝试在运行之前回显 find - 看来您确实需要修剪 var1 var2 的文本

**echo "查找 /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2"**

```
if find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then 
```

查找 /app/ **firefox** -noleaf -maxdepth 1 -type l -o -type d | grep 3.6.12

所以试试：

```
var1=${var1//[[:space:]]}
var2=${var2//[[:space:]]}
if find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then 
```

# ajax - ajax 请求结束 CakePHP 会话

> ID：13028263
> 
> 赞同：1
> 
> 时间：2012-10-23T10:17:54.943
> 
> 标签：ajax, json, cakephp, request, openlayers

我已经实现了一个向我的服务器发送请求的 Openlayers BBOX 策略。它的参数在 URL 中。我通过 CakaPHP 回复一个 jsonp 对象。

出于某种原因，一些请求结束了会话，我没有得到一个 jsonp 返回，而是一个重定向到登录页面的页面。在 Firebug 的“NET”选项卡中，您可以看到登录页面的 HTML。

这是 URL（出错的请求）：

```
http://localhost/tests/poi?bbox=4.151161804326345,51.66178773716078,5.615090026982677,52.04772606902698&callback=OpenLayers.Protocol.Script.registry.c2 
```

萤火虫：

```
GET poi?bbox=4.1511618...Script.registry.c2, 302 Found, localhost, 0KB, 127.0.0.1:80 
```

尽管响应显示为 0KB，但响应的 HTML 视图显示了登录页面。您在 Firebug 中看到的实际错误也是：

```
SyntaxError: syntax error <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//E 
```

请求标头：

```
GET /tests/poi?bbox=4.151161804326345,51.66178773716078,5.615090026982677,52.04772606902698&callback=OpenLayers.Protocol.Script.registry.c2 HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
Accept: */*
Accept-Language: nl,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Referer: http://localhost/tests/newmap
Cookie: __utma=111872281.1525876557.1329838516.1338476641.1338488176.228; __utmz=111872281.1329838516.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); _pk_id.1.1fff=00b25fc2e71f2d76.1349166387.64.1350986193.1350979575.; _pk_cvar.1.1fff=%7B%221%22%3A%5B%22User%22%2C%22Jeroen%20Bosch%22%5D%2C%222%22%3A%5B%22Relation%22%2C%22Thunderbuild%20BV%22%5D%7D; _pk_ses.1.1fff=* 
```

响应标头：

```
HTTP/1.1 302 Found
Date: Tue, 23 Oct 2012 09:56:37 GMT
Server: Apache/2.2.21 (Win64) PHP/5.3.8
X-Powered-By: PHP/5.3.8
Set-Cookie: CAKEPHP=q16jb0grsk4rv3krb3rc40cj22; expires=Tue, 23-Oct-2012 13:56:37 GMT;     path=/
P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Location: http://localhost/users/login
Content-Length: 0
Keep-Alive: timeout=5, max=73
Connection: Keep-Alive
Content-Type: text/html; charset=UTF-8 
```

服务器上的代码：

```
public function poi() {
    $this->layout = false;

    if (!isset($this->request->query['bbox'])){
        $this->log($this->request, 'debug');
        return;
    }
    $bounds = $this->request->query['bbox'];
    $callback = $this->request->query['callback'];

    $data = $this->Location->getBoundedLocations($bounds);

    $this->set('callback', $callback);
    $this->set('json', $data);
    $this->render('../Elements/jsonp');
} 
```

jsonp 元素只是一个普通的 json_encode 并且也将它包装在回调函数中。我不明白为什么有时（实际上经常）这会结束会话。我不知道如何解决这个问题。

非常感谢您的想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:21:14.430

出于某种原因，某些浏览器在发送 XMLHttpRequest 时会发送不同的用户代理字符串。这会导致 CakePHP 的安全性拒绝该请求，因为它通过 Ajax 发送的请求的用户代理哈希与用户登录时使用的用户代理不匹配。

这在 IE7 中广为人知，但在其他浏览器中也发生过，并且可能在其他发出请求的应用程序中发生，例如 Flash 应用程序（多次上传等）。

要禁用用户代理匹配，请在文件中设置以下配置参数`/config/core.php`：

```
Configure::write('Session.checkAgent', false); 
```

### 安全隐患

因为我们禁用了用户代理检查，所以会话劫持的可能性略高。但是，如果您的安全级别配置为“中”或“高”，则其他安全措施已到位以防止会话劫持（例如在每个请求上重新生成会话 ID 并利用[`session.referer_check`](http://www.php.net/manual/en/session.configuration.php#ini.session.referer-check)）。

# mysql - 如何使用存储过程删除mysql数据库中的所有视图？

> ID：13028264
> 
> 赞同：3
> 
> 时间：2012-10-23T10:17:54.870
> 
> 标签：mysql, stored-procedures, sql-view

我希望我的 mysql 服务器删除数据库中的所有视图。我已经为存储过程创建了一个事件：

开始

```
DECLARE done INT DEFAULT FALSE; 
DECLARE VIEW_NAME CHAR(255);
DECLARE VIEW_NAMES CURSOR FOR SELECT table_name FROM information_schema.views;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN VIEW_NAMES;

read_loop: LOOP    
    FETCH VIEW_NAMES INTO VIEW_NAME;
    IF done THEN
        LEAVE read_loop;
    END IF;    
    DROP VIEW VIEW_NAME;
END LOOP;

CLOSE VIEW_NAMES; 
```

结尾

但是，此过程会产生以下错误：

> 错误代码：1051。未知表 'view_name'

我的猜测是我的 fetch 语句由于某种原因没有获取。所以我检查了 select 语句，它确实有一个结果集。关于如何解决错误或如何将所有视图删除到 mysql 数据库中的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:56:23.770

您需要使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)来执行这些查询。构建一个字符串'DROP VIEW...'，然后使用准备好的语句执行语句。

例如 -

```
...
read_loop: LOOP    
    FETCH VIEW_NAMES INTO VIEW_NAME;
    IF done THEN
        LEAVE read_loop;
    END IF;    

    SET @query = CONCAT('DROP VIEW ', VIEW_NAME);
    PREPARE stmt FROM @query;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;

END LOOP;
... 
```

* * *

另一个变体，没有打开光标：

```
SET @views = NULL;

SELECT GROUP_CONCAT(table_schema, '.', table_name) INTO @views
  FROM information_schema.views 
  WHERE table_schema = 'database_name';

SET @views = CONCAT('DROP VIEW ', @views);
PREPARE stmt FROM @views;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

...根据需要修改 WHERE 条件。

# php - HTACCESS 重写错误 - 不工作

> ID：13028265
> 
> 赞同：1
> 
> 时间：2012-10-23T10:17:57.490
> 
> 标签：php, regex

我的 .htaccess 中有这个正则表达式，但它不起作用。我想要实现的是这个链接：`http://www.domain.com/`接收4个可选参数，所以它看起来像这样。[http://www.domain.com/var1/var2/var3/var4](http://www.domain.com/var1/var2/var3/var4)。

但由于某种原因，此代码不起作用，我不断收到 404 错误。

```
RewriteRule ^([^/]+)/([^\.]+)/([^/]+)/([^\.]+)/$ index.php?var1=$1&var2=$2&var3=$3&var4=$4 
```

任何帮助表示赞赏。

谢谢海伦。

**更新：**

如果我上面的内容不正确，有人可以告诉我如何为我的 url 提供 4 个参数，`http://www.domain.com/index.php?var1=$1&var2=$2&var3=$3&var4=$4`如下所示：`http://www.domain.com/var1/var2/var3/var4`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:25:33.230

好吧，我们可以说三件事：

1.  在您在介绍中给出的示例中，没有添加查询参数，而是路径中的标记。然而在`RewriteRule`你添加查询参数。那不匹配。

2.  您得到的 404 返回代码表明文件 index.php 不存在（至少不是服务器查找它的位置。

3.  你在里面使用的正则表达式`RewriteRule`肯定不会匹配任何东西。

您应该首先记录在重写过程中实际发生的事情。否则你不会理解它。检查这两个选项`RewriteLog`以及`RewriteLogLevel`mod_rewrite 提供的以及它们出色的文档。

# php - Simplexml 使用内联命名空间解析 XML

> ID：13028266
> 
> 赞同：2
> 
> 时间：2012-10-23T10:18:02.827
> 
> 标签：php, xml, simplexml

如何解析如下所示的文档？

```
<xml xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
xmlns:rs='urn:schemas-microsoft-com:rowset'
xmlns:z='#RowsetSchema'>
<s:Schema id='RowsetSchema'>
<s:ElementType name='row' content='eltOnly'>
       <s:AttributeType name='StMovement' rs:number='1' rs:nullable='true' rs:writeunknown='true'>
        <s:datatype dt:type='number' rs:dbtype='numeric' dt:maxLength='19' rs:scale='0' rs:precision='28' rs:fixedlength='true'/>
    </s:AttributeType>
    </s:ElementType>
</s:Schema>

<rs:data>
<z:row StMovement='21123'/>
</rs:data> 
```

我知道有类似的东西`.children(<schemaurl>)`，但这只有在某个 URL 有 xsd 时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:04:28.820

请参阅该[方法`->children()`的](http://uk.php.net/manual/en/simplexmlelement.children.php)文档。命名空间标识符不必指向 XSD 以便以这种方式使用，您只需要知道要传入的 URI 字符串。

您还可以将该方法的第二个参数设置为`true`并使用命名空间的本地别名/前缀，这在理论上不太可靠，但在实践中通常很好。

在您的情况下（如果您添加`</xml>`上面示例中缺少的 ），以下两种方法都可以正常工作：

```
echo (string)$sx->children('uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882')->Schema->attributes()->id;
echo (string)$sx->children('s', true)->Schema->attributes()->id; 
```

# windows - 在 DirectX/Win API 程序中全屏渲染内部 windows 程序

> ID：13028277
> 
> 赞同：3
> 
> 时间：2012-10-23T10:18:36.697
> 
> 标签：windows, winapi, directx, fullscreen, cmd

我想做这样的东西，在那里我可以在 Windows 中以全屏模式运行我的内部程序，比如 cmd.exe。

早些时候，在 Windows XP 中，我可以使用 Alt + Enter 在全屏模式下使用 cmd.exe，但在 Windows Vista 中，由于 WDDM（Windows 显示驱动程序模型）而禁用了此类功能。

我认为，制作这样的东西的最好方法是：“制作一个全屏 DirectX/Win API 程序，然后在其中渲染另一个内部程序”。

我知道如何使用 DirectX/Win API 创建全屏程序，但无法想象如何在我的全屏程序中渲染另一个程序执行。

另一种方式是：“只需使用 cmd.exe 或其他内部程序对输入/输出流进行操作，然后在 DirectX 全屏程序中全屏解析信息”。

你对这样的问题有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:27:02.760

通过 DirectX 执行此操作将是一场噩梦并且极其复杂。

你最好创建一个屏幕大小的最顶层窗口。它比这稍微复杂一点，因为您需要为窗口大小添加边框空间，然后将其稍微远离屏幕，以便只有窗口本身可见。

在 C/C++ 中，您可以使用[GetSystemMetrics](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385.aspx)函数来执行此操作。

*   SM_CYCAPTION - 是标题栏的高度。
*   SM_CYFRAME - 是一个相当大的框架的高度。
*   SM_CXFRAME - 是一个相当大的框架的宽度。

这意味着您为 1024x768 屏幕创建一个窗口，其宽度/高度及其位置如下所示。

```
const int cxFrame   = GetSystemMetrics( SM_CXFRAME );
const int cyFrame   = GetSystemMetrics( SM_CYFRAME );
const int cyCaption = GetSystemMetrics( SM_CYCAPTION );

const int winWidth  = 1024 + (cxFrame * 2);
const int winHeight = 768 + (cyFrame * 2) + cyCaption;

const int winPosX   = -cxFrame;
const int winPosY   = -cyFrame - cyCaption; 
```

您现在有一个“出现”全屏的窗口，它几乎可以在任何 Windows 系统上运行，并且不依赖于 DirectX 和这将引入的所有其他基于驱动程序的地狱。

# iphone - 裁剪图像目标 C

> ID：13028293
> 
> 赞同：0
> 
> 时间：2012-10-23T10:20:04.370
> 
> 标签：iphone, objective-c, ios

我从过去几个小时开始搜索并获得裁剪图像的解决方案，但我很困惑，想知道这两者之间有什么区别？

问题：我想从图像内部裁剪一个矩形图像，我已经检测到边界。![在此处输入图像描述](../Images/f25b75f0aa4728f4f02fe0a5598e0780.png)

第一的 ：

```
 CGRect rect = CGRectMake(0,0,320, 460);

// Create bitmap image from original image data,
// using rectangle to specify desired crop area

CGImageRef imageRef = CGImageCreateWithImageInRect([imageView.image CGImage], rect);
UIImage *imgs = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef); 
```

第二 ：

```
CGRect rect = [backView bounds];
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[backView.layer renderInContext:context];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:22:34.477

第二种方法更通用，因为您`backView`不需要`UIImageView`像第一种情况那样是 。

换句话说，`CGImageCreateWithImageInRect`需要你有一个 CGImage 开始：

```
CGImageRef imageRef = CGImageCreateWithImageInRect([imageView.image CGImage], rect); 
```

另一方面，`renderInContext`您可以将任何视图渲染为图像：

```
[backView.layer renderInContext:context];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

# c# - 如何将委托与 WorkflowApplication.OnUnhandledException 一起使用

> ID：13028301
> 
> 赞同：0
> 
> 时间：2012-10-23T10:20:40.563
> 
> 标签：c#, workflow-foundation-4, func

WF4 使用了 4 个 Action，我可以用它来委托给方法。像这样。

```
_workflowApplication.Completed = delegate(WorkflowApplicationCompletedEventArgs e) { WorkflowApplicationCompleted(e); }; 
```

但是也有 2 个 Func。我可以看到如何内联使用它们，但我希望它们委托给一个方法。

我试过：

```
_workflowApplication.PersistableIdle = delegate(WorkflowApplicationIdleEventArgs e) { WorkflowApplicationPersistableIdle(e); }; 
```

但我没有退货声明。

我试过：

```
_workflowApplication.OnUnhandledException = (returnValue) => WorkflowApplicationOnUnhandledException(e, returnValue); 
```

但 e 没有解决。

我怎样才能委托给一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:07:59.530

```
private void SetExceptionHandler(WorkflowApplication app)
{
    app.OnUnhandledException = x => HandleTheUnhandled(x);
}

private UnhandledExceptionAction HandleTheUnhandled(
    WorkflowApplicationUnhandledExceptionEventArgs args)
{
    //some logic
    return UnhandledExceptionAction.Abort;
} 
```

或者

```
app.OnUnhandledException = x => 
{
    // some logic
    return UnhandledExceptionAction.Abort;
}; 
```

或者，如果不需要逻辑，

```
app.OnUnhandledException = x => UnhandledExceptionAction.Abort; 
```

拉姆达斯。学习它们。爱他们。

# windows-runtime - 如何检测用户何时下拉 ListView

> ID：13028302
> 
> 赞同：2
> 
> 时间：2012-10-23T10:20:42.980
> 
> 标签：windows-runtime

我想在 Windows 应用商店应用中实现拉取刷新。当用户将列表下拉到列表顶部之外时，我想显示一条消息和一些动画。

`PointerMoved`当用户拉下列表时，有没有办法挂钩事件？用户拉动时我没有收到此事件。

我试图在 ListView 的后代之一上得到它。当我设置时，我可以在拉过程中得到它`ManipulationMode = ManipulationModes.All`，但是列表不再滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:25:36.273

我能弄清楚的唯一方法是实现我自己的 ListView/ScrollViewer 输入。见[这里](https://stackoverflow.com/questions/12636216/scrollviewer-and-handling-manipulation-events-on-child-elements)。

# sql - 如何在 SQL 中将 1 列转为两列（并按 ID 对结果进行分组）

> ID：13028303
> 
> 赞同：0
> 
> 时间：2012-10-23T10:20:46.260
> 
> 标签：sql, oracle, pivot

我有一个表有一个类型列和一个值列。我想将所有类型（我有 2 种类型 MAIN_INT 和 PRINCIPAL）返回到一行中，列名为 Type。

这是源表：

```
Account_No      Component Name   Amount Due 
002ENTA00000169 MAIN_INT         338.13
002ENTA00000169 MAIN_INT         308.65
002ENTA00000169 MAIN_INT         289.1
002ENTA00000169 MAIN_INT         250.36
002ENTA00000169 MAIN_INT         227.47
002ENTA00000169 MAIN_INT         196.08
002ENTA00000169 MAIN_INT         130.75 
002ENTA00000169 PRINCIPAL        1100.21
002ENTA00000169 PRINCIPAL        1154.28    
002ENTA00000169 PRINCIPAL        1173.83
002ENTA00000169 PRINCIPAL        1212.57
002ENTA00000169 PRINCIPAL        1235.46    
002ENTA00000169 PRINCIPAL        1266.85    
002ENTA00000169 PRINCIPAL        1304.33 
```

这是我想看到的

```
ACCOUNT_No          MAIN_INT     PRINCIPAL  
002ENTA00000169     338.13       1100.21    
002ENTA00000169     308.65       1154.28    
002ENTA00000169     289.1        1173.83    
002ENTA00000169     250.36       1212.57    
002ENTA00000169     227.47       1235.46    
002ENTA00000169     196.08       1266.85    
002ENTA00000169     158.6        1304.33    
002ENTA00000169     130.75       1332.18    
002ENTA00000169     93.77        1369.16    
002ENTA00000169     62.11        1400.82    
002ENTA00000169     26.59        1043.23 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:55:12.917

据我了解，您只想在不聚合的情况下分离数据（我在您的示例中没有注意到任何数据）。

```
 -- example of data from your question 
SQL> with t1(Account_No ,Component_Name, Amount_Due ) as
  2  (
  3    select '002ENTA00000169', 'MAIN_INT',  338.13  from dual union all
  4    select '002ENTA00000169', 'MAIN_INT',  308.65  from dual union all
  5    select '002ENTA00000169', 'MAIN_INT',  289.1   from dual union all
  6    select '002ENTA00000169', 'MAIN_INT',  250.36  from dual union all
  7    select '002ENTA00000169', 'MAIN_INT',  227.47  from dual union all
  8    select '002ENTA00000169', 'MAIN_INT',  196.08  from dual union all
  9    select '002ENTA00000169', 'MAIN_INT',  130.75  from dual union all
 10    select '002ENTA00000169', 'PRINCIPAL', 1100.21 from dual union all
 11    select '002ENTA00000169', 'PRINCIPAL', 1154.28 from dual union all
 12    select '002ENTA00000169', 'PRINCIPAL', 1173.83 from dual union all
 13    select '002ENTA00000169', 'PRINCIPAL', 1212.57 from dual union all
 14    select '002ENTA00000169', 'PRINCIPAL', 1235.46 from dual union all
 15    select '002ENTA00000169', 'PRINCIPAL', 1266.85 from dual union all
 16    select '002ENTA00000169', 'PRINCIPAL', 1304.33 from dual
 17  )  
  -- actual query

 18  select Account_No
 19       , MAIN_INT
 20       , PRINCIPAL
 21    from (
 22           select t.Account_No ,Component_Name, Amount_Due
 23                , row_number() over(partition by Account_No, Component_Name order by Account_No, Component_Name ) rn
 24             from t1 t
 25         )
 26  pivot(
 27    min(Amount_Due)
 28      for Component_Name in ('MAIN_INT' as MAIN_INT , 'PRINCIPAL' as PRINCIPAL)
 29  )
 30  order by rn
 31  ; 
```

结果：

```
 ACCOUNT_NO        MAIN_INT  PRINCIPAL
--------------- ---------- ----------
002ENTA00000169     338,13    1100,21
002ENTA00000169     308,65    1154,28
002ENTA00000169      289,1    1173,83
002ENTA00000169     250,36    1212,57
002ENTA00000169     227,47    1235,46
002ENTA00000169     196,08    1266,85
002ENTA00000169     130,75    1304,33 
```

# python - 特殊页面保护

> ID：13028310
> 
> 赞同：0
> 
> 时间：2012-10-23T10:21:15.367
> 
> 标签：python, security, architecture, oauth-2.0

这一次，我没有提出“技术”问题，而是提出了建筑/结构问题。

我目前正在构建一个网络平台，有一个公共区域和一个私人区域。所有 URL 都由一个进程处理，该进程必须检查哪个资源是请求的，然后将请求重定向到正确的进程。

大多数时候，该过程只是检查请求的页面是否可用和公开。如果它不可用，pageHandler 进程会根据错误抛出一个 HTTP 错误文档。如果页面是私有页面，pageHandler 处理认证请求，OAuthHandler 完成他的工作。

现在，我想知道一件事。我是否必须通过其中的身份验证过程来保护我的私人页面，或者我可以这样保留它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:36:02.547

这将取决于您希望访问控制的细粒度。任何经过身份验证的人都可以编辑所有私人页面吗？或者您想要进一步的限制（例如，页面只能由创建它的人编辑）？是否会有不同类别的用户，具有不同的权限？

如果您正在尝试构建另一个 Web 应用程序框架，我建议您首先检查现有的一个是否满足您的需求。有许多不同的选择，从像[bottle](http://bottlepy.org/docs/dev/)、[flask](http://flask.pocoo.org/)和[web.py](http://webpy.org/)这样的微框架到像[django](https://www.djangoproject.com/)、[web2py](http://web2py.com/)和[zope](http://www.zope.org/)这样的大框架。

# thrift - apache thrift async c++ 客户端

> ID：13028313
> 
> 赞同：1
> 
> 时间：2012-10-23T10:21:18.227
> 
> 标签：thrift

我需要一个示例来演示如何创建异步 apache thrift C++ 客户端。[在这个类似的问题](https://stackoverflow.com/questions/10344431/apache-thrift-c-async-client)中，只有一个非闪烁服务器的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:35:55.733

我认为异步客户端意味着能够在不等待响应的情况下调用远程服务，并在它到达时设置某种回调。

它需要改变服务接口和调用服务的方式。不幸的是，我现在在节俭的 C++ 库中没有看到完整的解决方案。在 async 目录和编译器中的 cob 样式选项中只有一些有限的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:37:06.337

服务器如何处理请求与客户端无关，您只需要使用 nHed 之前所说的 TFramedTransport。客户端可以连接到任何类型的服务器。

# java - 在 Java 中创建动态代理会转移对 OS X 的关注

> ID：13028316
> 
> 赞同：2
> 
> 时间：2012-10-23T10:21:34.740
> 
> 标签：java, macos, process, focus, dynamic-proxy

创建动态代理 (java.lang.reflect.Proxy) 会导致 OS X（至少 10.7 和 10.8）将焦点放在创建代理的 Java 应用程序上。

我创建的代理包装了一个启动外部进程的对象。这个外部进程期望获得焦点，而当 Java 进程窃取焦点时，事情就会失败。

似乎 OS X 正在将 Java 进程提升到 Dock，这就是它从其他应用程序中抢走焦点的原因。有谁知道如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:47:11.803

如果您的代码涉及与 AWT 子系统有关的任何内容，您通常会获得 Mac Java 应用程序的停靠图标。这包括看似无害的事情，比如计算字体度量，而不仅仅是显示`JFrame`.

如果您的 Java 代码不需要实际显示任何 GUI 组件，您可以将系统属性设置`java.awt.headless`为字符串`true`，以防止它启动本机窗口系统（尽管如果您使用此选项集运行，然后执行一些*确实*需要本机 GUI 你会得到一个例外）。

# c# - 如何从 MVC 控制器中提取错误处理代码？

> ID：13028317
> 
> 赞同：2
> 
> 时间：2012-10-23T10:21:35.243
> 
> 标签：c#, asp.net-mvc, model-view-controller, controller, refactoring

大多数时候，我可以弄清楚如何将 MVC 控制器中的业务逻辑分解为服务或模型。然而，这个例外是错误处理，在我看来这是控制器的责任。但是，它可能会导致相当“瘦”的控制器。例如：

```
if ((foundEvent = repoEvent.GetEventById(id)) == null) {
    return HttpNotFound("Could not find event with id {0}.".FormatWith(id));
}

var assessment = isSample ? foundEvent.SampleAssessment : foundEvent.ActualAssessment;
if (assessment == null) {
    return HttpNotFound("Could not find {0}assessment for event with id {1}".FormatWith(isSample ? "sample " : "", id));
}

if (assessment.UnmappedCaseStudiesCount == 0) {
    TempData[TempDataKeys.ErrorMessage.GetEnumName()] = "This assessment (\"{0}\") has no case studies!".FormatWith(assessment.Name);
    return RedirectToAction("Index", "Events");
} 
```

`HttpNotFound`在上述所有情况下，在我看来，逻辑确实属于控制器，因为控制器正在设置错误消息而不是返回视图（这是由于类似和`RedirectToAction`是类成员的事实而得到加强的`Controller`，因此对于不扩展的类不可用`Controller`）。但是，您可以看到这会在短时间内变得漫长而混乱。有没有办法在控制器中排除这种错误处理以使控制器更“瘦”，或者这些东西只是属于控制器？

这是一个更大的代码片段，说明我如何重构以允许 2 个操作方法使用相同的视图模型设置代码。但是，它仍然会导致控制器中仅针对 2 个操作方法的 90 多行代码；再次，不是一个非常“瘦”的控制器：

```
#region Private methods
private StartAssessmentViewModel getStartViewModel(int eventId, bool isSample, out ActionResult actionRes) {
    actionRes = null;

    EventRepository repoEvent = new EventRepository();
    Event foundEvent;
    if ((foundEvent = repoEvent.GetEventById(eventId)) == null) {
        actionRes = HttpNotFound("Could not find event with id {0}.".FormatWith(eventId));
        return null;
    }

    var assessment = isSample ? foundEvent.SampleAssessment : foundEvent.ActualAssessment;
    if (assessment == null) {
        actionRes = HttpNotFound("Could not find {0}assessment for event with id {1}".FormatWith(isSample ? "sample " : "", eventId));
        return null;
    }

    if (assessment.UnmappedCaseStudiesCount == 0) {
        TempData[TempDataKeys.ErrorMessage.GetEnumName()] = "This assessment (\"{0}\") has no case studies!".FormatWith(assessment.Name);
        actionRes = RedirectToAction("Index", "Events");
        return null;
    }

    try {
        // Has the assessment finished? (samples don't count)

        UserAssessmentRepository repoUa = new UserAssessmentRepository();
        var foundUa = repoUa.GetUserAssessment(foundEvent.EventId, assessment.AssessmentId, User.Identity.Name);
        // TODO: check that foundUa.Assessment.IsSample is OK; may need to make .Assessment a concrete instance in the repo method
        if (foundUa != null && !foundUa.Assessment.IsSample) {
            if (_svcAsmt.IsAssessmentFinished(foundUa)) {
                // TODO: test that this way of displaying the error works.
                TempData[TempDataKeys.ErrorMessage.GetEnumName()] = "You have already completed the assessment for this event ('{0}'); you cannot start it again.".FormatWith(foundEvent.Name);
                actionRes = RedirectToAction("Index", "Events");
                return null;
            }

            // Has it been started already?
            if (_svcAsmt.IsAssessmentStarted(foundEvent.EventId, foundUa.AssessmentId, User.Identity.Name)) {
                actionRes = RedirectToAction("Question", new { id = foundUa.UserAssessmentId });
                return null;
            }
        }

        return Mapper.Map<StartAssessmentViewModel>(assessment);
    }
    catch (Exception ex) {
        TempData[TempDataKeys.ErrorMessage.GetEnumName()] = "Could not display start screen for assessment {0} on event {1}; error: {2}".FormatWith(assessment.AssessmentId, foundEvent.EventId, ex.Message);
        actionRes = RedirectToAction("Index", "Events");
        return null;
    }
}
#endregion

public ActionResult Start(int id, bool isSample = false) {
    // Set up view model
    ActionResult actionRes;
    StartAssessmentViewModel viewModel = getStartViewModel(id, isSample, out actionRes);
    if (viewModel == null) {
        return actionRes;
    }

    return View(viewModel);
}

[HttpPost, ActionName("Start")]
public ActionResult StartConfirmed(int id, StartAssessmentViewModel viewModel) {
    // Set up view model
    ActionResult actionRes;
    StartAssessmentViewModel newViewModel = getStartViewModel(id, viewModel.AssessmentIsSample, out actionRes);
    if (newViewModel == null) {
        return actionRes;
    }

    if (!ModelState.IsValid) {
        return View(newViewModel);
    }

    // Model is valid; if it's not a sample, we need to check the access code
    if (!viewModel.AssessmentIsSample) {
        if (viewModel.AccessCode != "12345") {
            // Invalid access code
            TempData[TempDataKeys.ErrorMessage.GetEnumName()] = "The access code '{0}' is incorrect.".FormatWith(viewModel.AccessCode);
            return View(newViewModel);
        }
    }

    // Access code is valid or assessment is sample; redirect to first question
    return RedirectToAction("Question", new { id = 1 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:35:13.243

我同意这种错误处理是控制器的责任，所以我认为你已经把它放在了正确的地方。关于使方法“更精简”，您可能比查看 Bob Martin 的清洁代码指南做得更糟，该指南建议将较大的方法重构为更小的方法，如下所示：

```
if (assessment.UnmappedCaseStudiesCount == 0) {
    TempData[TempDataKeys.ErrorMessage.GetEnumName()] = 
        "This assessment (\"{0}\") has no case studies!".FormatWith(assessment.Name);
    actionRes = RedirectToAction("Index", "Events");
    return null;
} 
```

...使用辅助方法，如下所示：

```
if (AssessmentHasNoCaseStudies(assessment, out actionRes)) {
    return null;
}

...

private bool AssessmentHasNoCaseStudies(Assessment assessment, out ActionResult actionRes)
{
    actionRes = (assessment.UnmappedCaseStudiesCount == 0)
        ? RedirectToAction("Index", "Events")
        : null;

    if (actionRes == null)
    {
        return false;
    }

    TempData[TempDataKeys.ErrorMessage.GetEnumName()] = 
        "This assessment (\"{0}\") has no case studies!".FormatWith(assessment.Name);

    return true;
} 
```

# xamarin.ios - MonoTouch/MonoDroid 中可移植类库强汇编参考问题

> ID：13028321
> 
> 赞同：7
> 
> 时间：2012-10-23T10:21:46.020
> 
> 标签：xamarin.ios, xamarin.android, portable-class-library

PCL 在 MonoTouch 和 MonoDroid 中运行良好。

但是，有时，当我使用变量来引用 PCL 中的类型，然后我尝试在 MonoX 客户端中使用相同的引用时，编译器会失败并显示如下消息：

> 'System.Collections.Specialized.INotifyCollectionChanged' 类型在未引用的程序集中定义。您必须添加对程序集“System.Windows，Version=2.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e，Retargetable=Yes”的引用。

这里的问题是，在 MonoDroid 中，我的`System.Collections.Specialized.INotifyCollectionChanged`PCL 在 shim 类型转发 DLL 中提供 - 例如[https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/System.Windows](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/System.Windows) - 显然该 DLL 无法使用微软的私钥。

更多信息：

*   这在 ICommand 和 INotifyCollectionChanged 等接口中很常见
*   它似乎只发生在 .exe 项目中（库以某种方式工作正常）
*   我主要在 VS2010 和 VS2012 中测试/构建
*   更多内容：[https ://github.com/slodge/MvvmCross/issues/41](https://github.com/slodge/MvvmCross/issues/41)

任何人都可以提出任何解决此问题的方法吗？例如，有没有办法关闭强大的程序集命名保护？

我认为如果 PCL 要在 Microsoft 提供的 .Net 实现之外真正可移植，这是需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:01:14.343

从管理员 VS 命令提示符中，您可以运行以下命令：

```
sn -Vr *,7cec85d7bea7798e 
```

这将跳过以 7cec85d7bea7798e 作为公钥令牌的任何程序集的强名称验证。然后您应该能够延迟使用该密钥对您的 shim DLL 进行签名。我认为您可以使用`sn -pc`从 DLL 中提取密钥的公共部分，以便将其用于延迟签名。

这应该允许您使用垫片进行编译。当然，它也需要在运行时工作。我认为 MonoTouch 和 MonoDroid 实际上并没有验证程序集的强名称键，所以它会正常工作。如果他们确实进行了此验证，那么我认为您无能为力。在这种情况下，Mono 需要进行一些更改以支持这些类型引用或忽略 shim 的密钥，或者 Microsoft 需要提供您可以使用的 shim DLL 的签名版本。

请注意，我不是安全专家，因此我不知道在您的计算机上禁用这些 Microsoft 密钥的强名称验证可能会产生什么样的安全影响。我*觉得*不会有太大影响...

* * *

丹尼尔的详细跟进：

我认为这是解决 Mono 上可移植库的类型共享/强名称签名问题所需要做的：

-> 提取System.Windows.dll的公钥，放到Droid System.Windows项目的项目目录下：

```
 Sn –e "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.0\Profile\Profile104\System.Windows.dll" system_windows.snk 
```

-> 修改 Droid system.windows 项目以使用提取的密钥进行延迟签名。将以下内容放在 csproj 文件的 PropertyGroup 中：

```
<SignAssembly>true</SignAssembly>
<AssemblyOriginatorKeyFile>system_windows.snk</AssemblyOriginatorKeyFile>
<DelaySign>true</DelaySign> 
```

-> 将 Droid System.Windows 项目（在 AssemblyInfo.cs 中）的程序集版本更改为：

```
2.0.5.0 
```

在我的测试中，我似乎不需要禁用强名称验证。所以我不认为它会给新手带来任何额外的障碍——一旦你做了这些改变，他们只需要获取你的代码，它就会正确构建。

但是，如果您确实遇到问题，请尝试从管理员 VS 命令提示符运行以下命令：

```
 sn -Vr *,7cec85d7bea7798e 
```

让我知道这是如何工作的！

谢谢，

丹尼尔

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T16:28:23.260

我的项目中有类似的问题，当我尝试构建 MonoDroid 或 MonoTouch 项目时，我有适用于 .Net 4.5、Windows Phone 8、WinRT、MonoTouch 和 MonoDroid 的 PCL，错误如下：

> *错误 1 ​​类型“System.Object”在未引用的程序集中定义。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。
> 
> 错误 2 在未引用的程序集中定义了类型“System.Enum”。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。

我已经完成了建议的命令（sn -Vr *,b03f5f7f11d50a3a），但没有帮助。我正在使用以下配置文件：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.5\Profile\Profile78 
```

# c++ - 另一个不完整类型错误 C++

> ID：13028322
> 
> 赞同：1
> 
> 时间：2012-10-23T10:21:47.327
> 
> 标签：c++, incomplete-type

> **可能重复：**
> [循环依赖/不完整类型](https://stackoverflow.com/questions/7666665/circular-dependencies-incomplete-types)

编写一个小 C++ 程序并感到困惑....

有 4 个类，2 个对这个错误很重要......

在第 13 行收到错误消息“字段 'dot' 的类型不完整”和“预期 ';' 在同一行中的“（”令牌”之前

错误似乎始于 Vector3.cpp，其中仅包含 Vector3.h 和空方法

删除了Normal3 Header中的include“Vector3.h”，以为会绕圈子...不太好...

一些想法？希望如此 :) 和 ty 寻求答案

这是我的两个重要课程：

```
#ifndef NORMAL3_H
#define NORMAL3_H

class Normal3 {

      public:

      double x, y, z;
      Normal3 mul(Normal3 n);
      Normal3 add(Normal3 n);
      Normal3 dot(Vector3 v); //Line 13

      Normal3(double x = 0, double y = 0, double z = 0)
                     : x(x), y(y), z(z)
      { }   

};

#endif //NORMAL3_H 
```

啊啊啊啊啊啊啊啊啊啊啊

```
#ifndef VECTOR3_H
#define VECTOR3_H

#include "Normal3.h"

class Vector3 {

      public:

      double x, y, z, magnitude;

      Vector3 add(Vector3 v);
      Vector3 add(Normal3 n);
      Vector3 sub(Normal3 n);
      Vector3 mul(double c);
      double dot(Vector3 c);
      double dot(Normal3 n);
      Vector3 normalized();
      Normal3 asNormal();
      Vector3 refelctedOn(Normal3 n);

      Vector3(double x = 0, double y = 0, double z = 0, double m = 0)
                     : x(x), y(y), z(z), magnitude(m)
      { }

};

#endif //VECTOR3_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:26:45.677

这只是意味着编译器不知道`Vector3`此时是什么。如果提前声明，错误就会消失：

```
#ifndef NORMAL3_H
#define NORMAL3_H

class Vector3;  // Add this line

class Normal3 {
  // ...
}; 
```

更新：正如[约翰](https://stackoverflow.com/users/1534269/john)`#include "Normal3.h"`在他的评论中所说，在 Vector3.h 中用另一个前向声明替换将是一个很好的改进， `class Normal3;`：

```
#ifndef VECTOR3_H
#define VECTOR3_H

class Normal3; // instead of #include "Normal3.h"

class Vector3 {
  // ...
}; 
```

你应该尽量减少`#include`头文件中的指令，以避免过度的编译依赖。如果它定义了您正在使用的类型，您只需要包含一个标题（通常是因为您正在定义的类具有此类型的数据成员）。如果您仅使用指向该类型或该类型的函数参数的指针或引用（如您的示例中所示），则前向声明就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:43:36.540

你的文件`normal3.h`一无所知`Vector3`。

我看到它`Vector3 v`不会变成`dot`，那么你应该写：

反而`Normal3 dot(Vector3 v); //Line 13`

作为

```
#ifndef NORMAL3_H
#define NORMAL3_H

class Vector3;

class Normal3 {

      public:

      double x, y, z;
      Normal3 mul(Normal3 n);
      Normal3 add(Normal3 n);
      Normal3 dot(const Vector3 &v); //Line 13

      Normal3(double x = 0, double y = 0, double z = 0)
                     : x(x), y(y), z(z)
      { }   

};

#endif //NORMAL3_H 
```

# vb.net - 选择整行上的 VB.NET DataGridView

> ID：13028325
> 
> 赞同：0
> 
> 时间：2012-10-23T10:22:03.463
> 
> 标签：vb.net, visual-studio-2010, datagridview

我对 vb.net 中的 DataGridView 有疑问（制作表格）。

我有一个禁用的按钮。仅当此列表中的行被标记/选择/突出显示时，才应启用此按钮。我怎么写这个？双击 DataGridView 给了我

```
Private Sub My_Grid_CellContentClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles My_Grid.CellContentClick

End Sub 
```

这仅适用于某些单元格，如果我单击左侧的 * 我选择并突出显示该行，则不会执行任何操作。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:24:57.720

![SelectedIndexChange 事件可以选择如图](../Images/c79d5bbc8e2bbd8461b9de2b2622e49b.png)

您需要将事件名称更改为`Handles My_Grid.SelectedIndexChanged`

所以完整的 Sub 会是这样的

```
Private Sub My_Grid_CellContentClick(ByVal sender As Object, ByVal e As EventArgs) Handles My_Grid.SelectedIndexChanged
     'Your code that handles this event here.
    End Sub 
```

# asp.net - 下拉列表不会导致异步回发

> ID：13028326
> 
> 赞同：0
> 
> 时间：2012-10-23T10:22:11.280
> 
> 标签：asp.net, vb.net

我的页面中有一个用户控件（位于包含 scriptmanager 标记的母版页中），其中包含两个下拉列表。ddl1（aka CatList）的值决定了 ddl2（aka CatList2）的内容。过去，每次更改 ddl1 时，我都会使用完整的回发来完成此操作，但由于各种原因，在这种情况下，我更希望它进行部分回发，但是，我似乎无法让部分回发工作. 我的代码，就目前而言，如下所示。

```
<%@ Control Language="VB" AutoEventWireup="true" Inherits="System.Web.UI.UserControl" ClassName="KnownIssuesCode" %>
<%@ Import namespace="system.data" %>
<%@ Import namespace="system.data.SqlClient" %>
<script runat="server">
Protected Dim ThePage as string
Sub Page_Load()
    If Not Page.IsPostBack Then
      Dim myReader4 As IDataReader = CType(GetProduct.Select(DataSourceSelectArguments.Empty), IDataReader)
        CatList.Items.Clear()
        CatList.DataValueField = "ProductID"
        CatList.DataTextField = "ProductName"
        CatList.DataSource=myReader4
        CatList.DataBind()
        CatList.SelectedValue = "0"
      myReader4.close
      If not isNothing(session("ProductID")) then
        CatList.SelectedValue = session("ProductID")
        ProductID.Text = session("ProductID")
      Else
        ProductID.Text = 0 
      End if
      Dim myReader2 As IDataReader = CType(GetModule.Select(DataSourceSelectArguments.Empty), IDataReader)
        CatList2.Items.Clear()
        CatList2.DataValueField = "ModuleID"
        CatList2.DataTextField = "ModuleName"
        CatList2.DataSource=myReader2
        CatList2.DataBind()
        CatList2.SelectedValue = "0"
      myReader2.close
    End If
End Sub
Sub CatListIndex_Changed(sender As Object, e As EventArgs) 
  ProductID.Text = CatList.SelectedValue
  Dim myReader2 As IDataReader = CType(GetModule.Select(DataSourceSelectArguments.Empty), IDataReader)
    CatList2.Items.Clear()
    CatList2.DataValueField = "ModuleID"
    CatList2.DataTextField = "ModuleName"
    CatList2.DataSource=myReader2
    CatList2.DataBind()
    CatList2.SelectedValue = "0"
  myReader2.close
End Sub
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
  session("ProductID") = CatList.SelectedValue
  session("ModuleID") = CatList2.SelectedValue

  response.redirect("known-issues.aspx")
End Sub
</script>
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" ChildrenAsTriggers="False" runat="server">
<ContentTemplate>
   <div class="block-holder">
    <div class="block-frame">
      <div class="form-block">
        <h1>KNOWN ISSUES</h1>
        <div class="add-search-form">
          <fieldset>
            <div class="container">
              <div class="row">
                <asp:dropdownlist title="PRODUCT" id="CatList" OnSelectedIndexChanged="CatListIndex_Changed" AutoPostback="True" CssClass="size-3" runat="server" />
              </div>
              <div class="row">
                <asp:dropdownlist id="CatList2" title="MODULE"  CssClass="standard" runat="server" />
              </div>
              <asp:Label ID="ProductID" runat="server" visible="false"></asp:Label>
            </div>
            <asp:Button ID="Button1" runat="server" Text="Search" />
          </fieldset>
        </div>
        <span class="add-desc">FIND workarounds AND solutions</span>
      </div>
    </div>
  </div>
  <asp:SqlDataSource ID="GetModule" runat="server" 
      ConnectionString="<%$ ConnectionStrings:XXX %>" 
      SelectCommand="SELECT ModuleID, ModuleName, ModuleSeq from Module where ModuleDeleted = 0 and (ProductID=@ProductID or ProductID=0) order by ModuleName" 
      DataSourceMode="DataReader">
      <SelectParameters>
          <asp:ControlParameter ControlID="ProductID" Name="ProductID" Type="Int32" />
      </SelectParameters>
  </asp:SqlDataSource>
</ContentTemplate>
<Triggers>
<asp:AsyncPostBackTrigger ControlID="CatList" EventName="SelectedIndexChanged" />
</Triggers>
</asp:UpdatePanel>
<asp:SqlDataSource ID="GetProduct" runat="server" 
  ConnectionString="<%$ ConnectionStrings:XXX %>" 
  SelectCommand="SELECT ProductID, ProductName, ProductSeq from Product order by ProductSeq"
  DataSourceMode="DataReader">
</asp:SqlDataSource> 
```

eta：目前，不是进行部分回发，而是进行完整回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:41:13.113

代替：

```
Sub CatListIndex_Changed(sender As Object, e As EventArgs) 
```

和

```
Protected Sub CatListIndex_Changed(sender As Object, e As EventArgs) Handles CatList.SelectedIndexChanged 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:35:57.337

问题被证明是安全问题，而不是代码问题 - 我已经在不同的网站上测试了我的代码，它按预期工作。

在对安全设置进行了一些处理之后，事实证明这是我设置的通配符过滤问题，以防止在未登录的情况下访问非 .net 页面。取消它解决了 ajax 问题，并且，至少对于这个站点，过滤可能是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:35:44.913

Remove `ChildrenAsTriggers="False"`,ChildrenAsTriggers="False" 会导致 UpdatePanel 在选定的触发器上回发。您可以在此处找到更多信息[ChildrenAsTriggers](http://dotnetslackers.com/Community/forums/updatepanel-childrenastriggers/p/1167/12744.aspx)

# google-app-engine - Appengine 仪表板：Requests/Second 和 Req/Sec 之间的区别

> ID：13028330
> 
> 赞同：1
> 
> 时间：2012-10-23T10:22:26.583
> 
> 标签：google-app-engine

我正在对我的 Appengine 项目进行一些分析，发现 Requests/Second（cq. Request by Type/Second）图表与同一页面上显示的 Req/Sec 表之间存在相当大的差异。

当前值：

*   请求/秒：~ 37.5（[截图](http://i.stack.imgur.com/HAf2f.png)）
*   按类型/秒的请求（动态请求）：~20（[截图](http://i.stack.imgur.com/VcI9U.png)）
*   请求/秒电流（加起来）：~ 8.8 (http://i.stack.imgur.com/XrEfF.png)

从文档：

> Requests/Second：每秒从您的应用程序请求的 URI 数量，包括动态、静态和缓存请求。

和：

> “Req/Sec”列列出了每个 URI 的短期请求率。

我希望至少动态请求/秒将类似于请求/秒。但是，这两者之间仍然存在 2 倍的差异。

这些数字应该如何解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:08:48.190

图表**Requests/Second**等于**Dynamic Requests** + **Static Requests** + **Cached Requests**。

**Req/Sec current**等于您的应用程序当前为特定路径处理的动态 + 静态 + 缓存请求。

# android-emulator - Android 模拟器因多个错误而挂起

> ID：13028332
> 
> 赞同：3
> 
> 时间：2012-10-23T10:22:29.330
> 
> 标签：android-emulator, filenotfoundexception, freeze, zoneinfo

我从源代码构建了 Android，当我执行模拟器时，它会挂在 android 启动页面上。详情如下

```
JAVA_VERSION=1.6.0_35
PLATFORM_VERSION_CODENAME=AOSP
PLATFORM_VERSION=4.1.2.3.4.5.6.7.8.9
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=linux
HOST_OS_EXTRA=Linux-3.4.11-1.fc16.x86_64-x86_64-with-fedora-16-Verne
HOST_BUILD_TYPE=release
BUILD_ID=OPENMASTER
OUT_DIR=out

I execute the following command which produces the output below:

emulator -verbose -debug-all -logcat -v

W/dalvikvm(  553): Exception Ljava/lang/RuntimeException; thrown while initializing Llibcore/util/ZoneInfoDB;
W/dalvikvm(  553): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Ljava/util/Date;
E/Zygote  (  553): Error preloading java.util.Date.
E/Zygote  (  553): java.lang.ExceptionInInitializerError
E/Zygote  (  553):  at java.lang.Class.classForName(Native Method)
E/Zygote  (  553):  at java.lang.Class.forName(Class.java:217)
E/Zygote  (  553):  at java.lang.Class.forName(Class.java:172)
E/Zygote  (  553):  at com.android.internal.os.ZygoteInit.preloadClasses(ZygoteInit.java:287)
E/Zygote  (  553):  at com.android.internal.os.ZygoteInit.preload(ZygoteInit.java:234)
E/Zygote  (  553):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:524)
E/Zygote  (  553):  at dalvik.system.NativeStart.main(Native Method)
E/Zygote  (  553): Caused by: java.lang.ExceptionInInitializerError
E/Zygote  (  553):  at java.util.TimeZone.getDefault(TimeZone.java:134)
E/Zygote  (  553):  at java.util.GregorianCalendar.<init>(GregorianCalendar.java:335)
E/Zygote  (  553):  at java.util.GregorianCalendar.<init>(GregorianCalendar.java:294)
E/Zygote  (  553):  at java.util.Date.getYear(Date.java:334)
E/Zygote  (  553):  at java.util.Date.<clinit>(Date.java:43)
E/Zygote  (  553):  ... 7 more
E/Zygote  (  553): Caused by: java.lang.RuntimeException: java.io.FileNotFoundException: /system/usr/share/zoneinfo/zoneinfo.version: open failed: ENOENT (No such file or directory)
E/Zygote  (  553):  at libcore.util.ZoneInfoDB.readVersion(ZoneInfoDB.java:101)
E/Zygote  (  553):  at libcore.util.ZoneInfoDB.<clinit>(ZoneInfoDB.java:66)
E/Zygote  (  553):  ... 12 more
E/Zygote  (  553): Caused by: java.io.FileNotFoundException: /system/usr/share/zoneinfo/zoneinfo.version: open failed: ENOENT (No such file or directory)
E/Zygote  (  553):  at libcore.io.IoBridge.open(IoBridge.java:416)
E/Zygote  (  553):  at java.io.RandomAccessFile.<init>(RandomAccessFile.java:118)
E/Zygote  (  553):  at java.io.RandomAccessFile.<init>(RandomAccessFile.java:150)
E/Zygote  (  553):  at libcore.io.IoUtils.readFileAsBytes(IoUtils.java:115)
E/Zygote  (  553):  at libcore.io.IoUtils.readFileAsByteArray(IoUtils.java:102)
E/Zygote  (  553):  at libcore.util.ZoneInfoDB.readVersion(ZoneInfoDB.java:98)
E/Zygote  (  553):  ... 13 more
E/Zygote  (  553): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
E/Zygote  (  553):  at libcore.io.Posix.open(Native Method)
E/Zygote  (  553):  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
E/Zygote  (  553):  at libcore.io.IoBridge.open(IoBridge.java:400)
E/Zygote  (  553):  ... 18 more
D/AndroidRuntime(  553): Shutting down VM
W/dalvikvm(  553): threadid=1: thread exiting with uncaught exception (group=0x40a0d978)
emulator: _qemudPipe_closeFromGuest
emulator: goldfish_audio_write: AUDIO_INT_ENABLE 0
I/ServiceManager(   30): service 'media.audio_policy' died
I/ServiceManager(   30): service 'media.audio_flinger' died
I/ServiceManager(   30): service 'media.player' died
I/ServiceManager(   30): service 'media.camera' died
I/Netd    (  670): Netd 1.0 starting
emulator: Error while connecting to socket '127.0.0.1:1970': 111 -> Connection refused
emulator: ASC 127.0.0.1:1970: Retrying connection. Connector FD = 20 
```

丢失的文件 /system/usr/share/zoneinfo/zoneinfo.version 似乎包含在数据文件 tzdata 中，但是似乎没有正确读取该文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:53:56.627

[http://code.google.com/p/android/issues/attachmentText?id=38857&aid=388570000000&name=0001-Use-libcore-instead-of-frozen-libcore2.patch&token=XtlQt4ANj81pvAUEj6L5rW_SbI8%3A1351090221160](http://code.google.com/p/android/issues/attachmentText?id=38857&aid=388570000000&name=0001-Use-libcore-instead-of-frozen-libcore2.patch&token=XtlQt4ANj81pvAUEj6L5rW_SbI8%3A1351090221160)

应用此补丁将解决问题。

# php - 用 data:image 替换所有图片（带有 src/url 标签）

> ID：13028337
> 
> 赞同：0
> 
> 时间：2012-10-23T10:22:44.120
> 
> 标签：php, android, regex, html, replace

我必须将 html 源代码保存在 sql 数据库中（对于 android 应用程序）。内容必须存储在本地。所以图像也必须保存。我认为进行以下操作是合适的：

*   在服务器（php）上：将所有 img src 替换为 img src="data:image..." 字符串（正则表达式和加载图像？）
*   然后我可以将html代码存储在我的应用程序中

但我怎么能意识到这一点？还是我应该用 html5 保存图像？我希望你能帮助我！

**更新：**

```
$search = '(<img.*?src=")([^"]*?(\/[^/]*\.[^"]+))';
$replace = "<img src=\"".data_uri('$2')."\">";
$content = preg_replace($search, $replace, $content); 
```

有人可以更正此代码吗？谢谢！

**第二次更新：**

例子：

```
<img class="alignnone" src="https://lh4.googleuserco (...)
<img src="https://lh4.googleuserco (...)
<img width="400" height="100" src='...' (...) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T10:37:30.483

替换你`<img src="image.png" alt="An image">`的`<img src="<?php echo data_uri('image.png'); ?>" alt="An image">`并在适当的地方定义以下函数：

```
function data_uri($filename) {
    $mime = mime_content_type($filename);
    $data = base64_encode(file_get_contents($filename));

    return "data:$mime;base64,$data";
} 
```

您最终可能会得到巨大的 html 文件，因此将文件存储在数据库之外可能会更好吗？我对 Android 不熟悉，但在 iOS 上，您可以设置显示 html 文件的 webview 的基本路径，如下[所示](https://stackoverflow.com/questions/5051364/load-the-image-saved-in-sdcard-in-webview)。

**更新**：

我创建了一个 (content.php) 包含几个 img 元素，然后在其上运行以下内容：

```
$content = file_get_contents('content.php');
$search = '/(<img\s+src=["\'])([^"\']+)(["\']\s+[^>]+>)/';
$content = preg_replace_callback($search, create_function(
        '$matches',
        'return $matches[1] . data_uri($matches[2]) . $matches[3];'
    ), $content); 
```

在您在问题中发布的代码中，您的模式缺少斜杠，并且您最终也会只是字面上运行`data_uri('$2')`（也就是说，$2 是用作参数的实际字符串）。`preg_replace_callback`允许您访问 preg_replace 找到的实际值。

无论如何，上面的代码将用返回的*值*替换所有图像`data_uri`，从而使用数据 URI 构建 img 元素。您可能想稍微改进一下模式，因为它目前假定~~属性用双引号括起来，没有别的，而且~~src 属性是元素的第一个属性，这就是我认为通常建议使用 XML 解析的原因。这种情况的严重程度取决于您输入的数据偏离路线。

**更新 2**：

一个更通用的解决方案是根据我的最新评论将其拆分为两个正则表达式。那是首先将您的搜索模式修改为 $search = '(]+>)'; 然后确实`preg_replace_callback($search, 'img_handler', $content);`将您的`img_handler`功能定义为如下所示：

```
function img_handler($matches) { 
    $image_element = $matches[1]; 

    $pattern = '/(src=["\'])([^"\']+)(["\'])/'; 
    $image_element; = preg_replace_callback($pattern, create_function( 
            $matches, 
            $matches[1] . data_uri($matches[2]) . $matches[3]), 
        $image_element); 

    return $image_element; 
} 
```

其工作方式是第一个正则表达式识别所有 ing 元素 () 并将它们发送到回调函数 img_handler，而后者又只替换 src 属性。XML 有点复杂（但更通用）。我没有时间整理一个例子，但它有很好的记录。查看[DOMDocument](http://php.net/manual/en/class.domdocument.php)或[SimpleXML](http://php.net/manual/en/book.simplexml.php)基本上做同样的事情。

**结束时**：

您现在已经两次修改了您的问题，并且有时肯定需要澄清这一点，我觉得我们离最初的问题越来越远。我建议让您的问题保持简洁并专注于一个主题。如果答案或评论引发了进一步的问题，而这些问题本身没有得到回答，最好就该问题启动一个新线程（例如，[替换 img 元素的 src 属性](https://stackoverflow.com/questions/9883517/php-regex-replace-image-src-attribute)）或查找任何类似的已经提出的问题。

# ios - 如何获取 UITableView 中的所有单元格

> ID：13028340
> 
> 赞同：32
> 
> 时间：2012-10-23T10:22:45.890
> 
> 标签：ios, uitableview

假设我有一个 UITableView 有多行。我想在某个时间点将所有 UITableViewCells 作为 NSArray 获取。我努力了

```
[tableView visibleCells] 
```

但这种方法存在一个问题：我不能拥有当前不在当前屏幕中的所有单元格。所以我转向了另一种方法：

```
-(NSArray *)cellsForTableView:(UITableView *)tableView
{
    NSInteger sections = tableView.numberOfSections;
    NSMutableArray *cells = [[NSMutableArray alloc]  init];
    for (int section = 0; section < sections; section++) {
        NSInteger rows =  [tableView numberOfRowsInSection:section];
        for (int row = 0; row < rows; row++) {
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
            UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];   // **here, for those cells not in current screen, cell is nil**
            [cells addObject:cell];
        }
    }
    return cells;
} 
```

但似乎这种方法仍然无法获取那些未显示在屏幕中的单元格。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T10:28:35.510

我认为这是不可能的，仅仅是因为 tableView 不存储所有单元格。它使用一种缓存机制，该机制仅存储一些不可见的单元格以供重用。

为什么需要所有细胞？也许你可以实现，你正在尝试做的事情，否则。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-21T06:32:47.603

这是 Swift 3.0 中最简单的解决方案

```
func getAllCells() -> [UITableViewCell] {

    var cells = [UITableViewCell]()
    // assuming tableView is your self.tableView defined somewhere
    for i in 0...tableView.numberOfSections-1
    {
        for j in 0...tableView.numberOfRowsInSection(i)-1
        {
            if let cell = tableView.cellForRowAtIndexPath(NSIndexPath(forRow: j, inSection: i)) {

               cells.append(cell)
            }

        }
    }
 return cells
 } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-31T09:54:48.000

每次创建单元格时，您都可以将其添加到 NSMutableArray 中，您可以在需要时对其进行解析：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *Cell = [self dequeueReusableCellWithIdentifier:@"Custom_Cell_Id"];
    if (Cell == NULL)
    {
        Cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Custom_Cell_Id"]];
        [Cells_Array addObject:Cell];
    }
}

- (void) DoSomething
{
    for (int i = 0;i < [Cells count];i++)
    {
        CustomCell *Cell = [Cells objectAtIndex:i];
        //Access cell components
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-21T03:02:13.500

**但是，获取当前单元格的更简单的实现是使用 Set 即 O(1)**

```
/// Reference to all cells.
private var allCells = Set<UITableViewCell>()

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Your_Cell_ID") as! UITableViewCell
    if !allCells.contains(cell) { allCells.insert(cell) }
    return cell
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-18T16:21:34.313

我想我找到了解决这个问题的窍门。尝试这个 ;）

```
self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.contentSize.width, self.tableView.contentSize.height); 
```

UITableView`cellForRowAtIndexPath`根据高度调用，`tableView.frame`因此您应该更新 tableView 的高度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T10:29:00.857

我想你可能会误解如何`UITableView`是如何实现的。要理解的重要一点是，不可见的细胞实际上并不存在（或者至少它们可能不存在）

随着`UITableView`滚动，旧单元格被新单元格替换 `dequeueReusableCellWithIdentifier` 为

```
-(UITableViewCell) cellForRowAtIndexPath (NSIndexPath *)indexPath 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-22T11:42:34.717

### 功能解决方案 swift 5.0

```
extension UITableView {
    /**
     * Returns all cells in a table
     * ## Examples:
     * tableView.cells // array of cells in a tableview
     */
    public var cells: [UITableViewCell] {
      (0..<self.numberOfSections).indices.map { (sectionIndex: Int) -> [UITableViewCell] in
          (0..<self.numberOfRows(inSection: sectionIndex)).indices.compactMap { (rowIndex: Int) -> UITableViewCell? in
              self.cellForRow(at: IndexPath(row: rowIndex, section: sectionIndex))
          }
      }.flatMap { $0 }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T10:38:31.470

你想要那些文本字段的值吗？如果是，您可以通过带有 indexpath.row 的文本字段的标签属性访问

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-11T16:03:49.890

**SWIFT 5** UITableView 确实重用了单元格，这意味着您可以将 100 个项目加载到 UITableView 中，但是您一次只能显示 10 个项目。如果用户想要显示其他项目，他需要滚动。因此，对于内存优化，`UITableView` 仅加载 13 个单元（显示 10 个单元 + 预加载 3 个单元）。如果要获取所有可见单元格（在我们的示例中为 10 个单元格），您可以使用：

```
let visibleCells = yourTableView.visiblecells 
```

但是，如果您想获取所有已加载的单元格（在我们的示例中为 13 个单元格），我建议使用以下扩展名：

```
extension UITableView {

func getAllCells() -> [UITableViewCell] {
    var cells = [UITableViewCell]()
    for i in 0..<self.numberOfSections
    {
        for j in 0..<self.numberOfRows(inSection: i)
        {
            if let cell = self.cellForRow(at: IndexPath(row: j, section: i)) {
                cells.append(cell)
            }

        }
    }
    return cells
} 
```

}

然后，您可以通过调用以下方式获取所有单元格：

```
let allLoadedCells = yourtableView.getAllCells() 
```

# jquery - jquery ui 可调整大小的自定义句柄错误

> ID：13028342
> 
> 赞同：0
> 
> 时间：2012-10-23T10:23:03.543
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我试图让自定义句柄与 jquery ui 可调整大小的小部件一起使用，但是当我使用句柄选项将 jquery 引用传递给另一个元素时，它失败了。从我从文档和网络上的其他示例中阅读的内容来看，这应该可以正常工作。

```
<div class="layer">
<div class="left">left</div>
<div class="center">center</div>
<div class="right">right</div>
</div>
​
$('.layer').resizable({
    handles: {
        'e': $('.right')
    }
});
​ 
```

这是一个小提琴：http: [//jsfiddle.net/MatteS75/3dwVp/](http://jsfiddle.net/MatteS75/3dwVp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:13:28.357

这是最近修复的一个错误：

[http://bugs.jqueryui.com/ticket/8713](http://bugs.jqueryui.com/ticket/8713)

[https://github.com/jquery/jquery-ui/commit/9b908878ae3a9c0fbbd9958b579f223a648c5c69](https://github.com/jquery/jquery-ui/commit/9b908878ae3a9c0fbbd9958b579f223a648c5c69)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:15:04.207

我找到了解决方法。

通过将handles 选项设置为null，并自己设置类，我的自定义句柄就可以工作了。这需要对 jquery ui 代码进行一些调查才能弄清楚。

```
<div class="layer" style="width: 150px;">
<div class="left">left</div>
<div class="center">center</div>
<div class="right ui-resizable-handle ui-resizable-e">right</div>
</div>
​
$('.layer').resizable({
    handles: null
});
​ 
```

[http://jsfiddle.net/MatteS75/3dwVp/7/](http://jsfiddle.net/MatteS75/3dwVp/7/)

但是，我确实认为这是一个 jquery ui 错误，与这个问题有关： [overriding a jquery ui widget string option with an object](https://stackoverflow.com/questions/13031214/overriding-a-jquery-ui-widget-string-option-with-an-object)

# bash - BASH：虽然 -le 不起作用

> ID：13028343
> 
> 赞同：0
> 
> 时间：2012-10-23T10:23:04.717
> 
> 标签：bash, while-loop, conditional-statements

如果我使用 -le with while 我收到以下错误：

```
line 172: [: : integer expression expected 
```

我在这里做错了什么？

我的代码：

```
while [ "$LOOP_EPISODE" -le "100" ]; do

        my code
        LOOP_EPISODE=$((LOOP_EPISODE+1))
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:28:51.963

放

```
LOOP_EPISODE=0 
```

在你的 while 语句之前。

# javascript - 有没有办法阻止在控制台中执行 Javascript 命令？

> ID：13028344
> 
> 赞同：2
> 
> 时间：2012-10-23T10:23:05.823
> 
> 标签：javascript, security, console

根据问题标题。

虽然*不是*必需的；我想阻止人们通过控制台在我的页面上执行功能......这甚至可能吗？

我已经尝试了一些东西，这是我最接近的 - 但这不起作用:(

```
 window.onresize = function(){
        if((window.outerHeight - window.innerHeight) > 100) {
            //stop commands here?
        }
    }
    window.onload = function() {
        if (typeof console !== "undefined" || typeof console.log !== "undefined") {
            if (window.console && (window.console.firebug || window.console.exception)) {
                    //stop commands here?
            }
        }
    } 
```

**编辑：**
我不必禁用控制台，只需在其中进行函数调用 - 两种解决方案都可以；）

**EDIT2：**
所以，要做到这一点......现在根本没有办法检测控制台跨浏览器？

**EDIT3：**
我已经通过执行以下操作来解决它，尽管 JS 函数仍然存在 - 它们相关的元素不是......不是一个很好的修复，但我想它会做...... :(

```
 setInterval(function() {
            if (!$.browser.mozilla) {
                if((window.outerHeight - window.innerHeight) > 100) {
                    alert("DISABLED!");
                    $('body').remove();
                    return false;
                }
            }
            if (window.console && (window.console.firebug || window.console.exception)) {
                alert("DISABLED!");
                $('body').remove();
                return false;
            }
        }, 750); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:29:59.327

尝试通过窗口宽度检测控制台并不好。这也可能在其他浏览器上引起一些问题。如果您只想保护您的功能：

正如你有一个按钮：

```
<button onclick="someFunction()"></button> 
```

someFunction 当然可以通过控制台访问。但是如果你不让用户知道你的函数名，他就不能调用这个函数，可以吗？看这里：

```
<script type="text/javascript">
//obsfuscate this code
$(function() {
$("#theButton").on("click", someFunction);
})
</script>
<button id="theButton"></button> 
```

这只是一个可能的解决方案。但是请记住，没有任何 javascript 解决方案可以 100% 安全，因为用户知道您的所有代码，无论是否混淆。

# java - 如何将初始的、第一个用户添加到 Web 应用程序用户列表（该用户随后会添加其他用户）？

> ID：13028345
> 
> 赞同：1
> 
> 时间：2012-10-23T10:23:12.620
> 
> 标签：java, security

我正在构建一个面向许多客户的网络应用程序。Tha应用程序使客户能够管理他们的用户：使用用户名、密码、权限等创建用户。需要有第一个管理员用户有权创建其他用户。

问题是初始用户设置：

*   首次安装应用时，如何添加第一个用户？
*   该用户是否应该预先安装在用户数据库中？
*   为该初始用户设置哪个密码以及在忘记密码时使用哪个电子邮件恢复密码？
*   等等。

像这样的情况如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:29:04.007

当数据库中没有用户时，一些 web 应用程序会在第一次运行时显示安装屏幕。您可以输入管理员登录名、密码和一些偏好设置，然后webapp切换到正常运行模式，您可以作为新创建的管理员用户登录并创建其他用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:32:15.710

这种情况没有规则。只有指导方针和最佳实践。我在市场上经常看到的解决方案是在数据库中自动创建一个弱密码的管理员用户（例如：密码、管理员等），并要求管理员在他第一次登录时更改它系统。

# c# - 实体框架插入新实体

> ID：13028346
> 
> 赞同：0
> 
> 时间：2012-10-23T10:23:20.623
> 
> 标签：c#, foreign-keys, data-annotations, entity-framework-5

我正在使用带有代码优先方法的最新实体框架。我有这样的课程：

```
[Serializable]
public class Customer
{
        [Key]
        public int Id { get; set; }
        public string CustomerInitials { get; set; }
        [InverseProperty("Customer")]
        public virtual List<Transaction> Transactions { get; set; }
}

[Serializable]
public class Transaction
{
        [Key]
        public int Id { get; set; }
        public int CustomerId { get; set; }
        [InverseProperty("Transactions")]
        public virtual Customer Customer { get; set; }
} 
```

当我想输入一个新条目时，我会`IDbSet<Customer>` 在我的上下文中找到相应的客户并调用

```
customer.Transactions.Add(newTrasnaction)
context.SaveChanges(); 
```

这给了我`Invalid column name 'CustomerInitials'`，这是表中的普通 varchar 列`Customers`。加载所有数据工作得很好，只是保存有问题。

**一些额外的细节：**创建新事务时，我没有设置 Customer 属性，只设置了 CustomerId。不确定这是否与此问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:04:00.400

哦，愚蠢的我没有深入研究异常。结果发现表的插入触发器出现错误。

# c# - 尝试在 WCF 中序列化时出现 System.StackOverflowException

> ID：13028348
> 
> 赞同：3
> 
> 时间：2012-10-23T10:23:31.223
> 
> 标签：c#, wcf, serialization, poco, datacontract

我在尝试使用循环引用序列化图形时遇到问题。这是我的场景：

```
 [DataContract(IsReference = true)]
        public class Child
        {
            [DataMember]
            public string name { get; set; }
            [DataMember]
            public Parent parent { get; set; }
        }

        [DataContract(IsReference = true)]
        public class Parent
        {

            [DataMember]
            public string name { get; set; }
            [DataMember]
            public List<Child> children { get; set; }

            public Parent()
            {
                children = new List<Child>();
            }

        }

   //Testing method
   //Invoke it through WCF Service (basocHttpBinding)
   public Parent Test()
    {
        Parent p = new Parent();
        p.name = "Pepe";
        p.children.Add(new Child { name = "Juan", parent = p });
        return p;

    } 
```

当我尝试序列化 Parent 类型的 Object 时，它会产生 System.StackOverflowException，因为 Cyclic 引用。

如果我在 Child 类中将他的导航属性的 DataMember 删除到 Parent，它可以完美地工作，但是我会丢失序列化对象中的导航属性。我一直在研究解决方案，但没有运气。我只发现 IsReference 属性解决了这种类型的循环引用，但就我而言，它似乎无法正常工作。

一些帮助将受到欢迎！

提前致谢

家长班：

```
[DataContract(IsReference = true)]  
[KnownType(typeof(Expediente))]    
public partial class Expediente: POCO, IEntidad
{   

    public Expediente() : base(typeof(Expediente))            
    {
    }

    public virtual int Sid
    {
        get;
        set;
    }
    [DataMember] 
    public virtual int NumExpediente
    {
        get;
        set;
    }

    [DataMember]
    public virtual ICollection<Policia> Policias
    {
        get
        {
            if (_policias == null)
            {
                var newCollection = new FixupCollection<Policia>();
                newCollection.CollectionChanged += FixupPolicias;
                _policias = newCollection;
            }
            return _policias;
        }
        set
        {
            if (!ReferenceEquals(_policias, value))
            {
                var previousValue = _policias as FixupCollection<Policia>;
                if (previousValue != null)
                {
                    previousValue.CollectionChanged -= FixupPolicias;
                }
                _policias = value;
                var newValue = value as FixupCollection<Policia>;
                if (newValue != null)
                {
                    newValue.CollectionChanged += FixupPolicias;
                }
            }
        }
    }
    private ICollection<Policia> _policias;

    private void FixupPolicias(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (Policia item in e.NewItems)
            {
                item.Expediente = this;
            }
        }

        if (e.OldItems != null)
        {
            foreach (Policia item in e.OldItems)
            {
                if (ReferenceEquals(item.Expediente, this))
                {
                    item.Expediente = null;
                }
            }
        }
    }
} 
```

儿童班：

```
[DataContract(IsReference = true)]
[KnownType(typeof(Policia))]    
public partial class Policia: POCO, IEntidad
{

//Constructor por defecto
public Policia() : base(typeof(Policia))            
{
}

[DataMember] 
public virtual int Sid
{
    get { return _sid; }
    set
    {
        if (_sid != value)
        {
            if (Expediente != null && Expediente.Sid != value)
            {
                Expediente = null;
            }
            _sid = value;
        }
    }
}
private int _sid;

[DataMember] 
public virtual int NumPlaca
{
    get;
    set;
}

[DataMember]
public virtual Expediente Expediente
{
    get { return _expediente; }
    set
    {
        if (!ReferenceEquals(_expediente, value))
        {
            var previousValue = _expediente;
            _expediente = value;
            FixupExpediente(previousValue);
        }
    }
}
private Expediente _expediente;

private void FixupExpediente(Expediente previousValue)
{
    if (previousValue != null && previousValue.Policias.Contains(this))
    {
        previousValue.Policias.Remove(this);
    }

    if (Expediente != null)
    {
        if (!Expediente.Policias.Contains(this))
        {
            Expediente.Policias.Add(this);
        }
        if (Sid != Expediente.Sid)
        {
            Sid = Expediente.Sid;
        }
    }
}
} 
```

要序列化，我通过 WCF 使用标准 DataContractSerializer。我只是通过 Serilize Poco Proxies 的属性向我的 WCF 服务添加了一些行为。这是属性代码：

```
public class ApplyDataContractResolverAttribute : Attribute, IOperationBehavior
{
    public ApplyDataContractResolverAttribute()
    {
    }

    public void AddBindingParameters(OperationDescription description, BindingParameterCollection parameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription description, System.ServiceModel.Dispatcher.ClientOperation proxy)
    {
        DataContractSerializerOperationBehavior dataContractSerializerOperationBehavior =
            description.Behaviors.Find<DataContractSerializerOperationBehavior>();
        dataContractSerializerOperationBehavior.DataContractResolver =
            new ProxyDataContractResolver();
    }

    public void ApplyDispatchBehavior(OperationDescription description, System.ServiceModel.Dispatcher.DispatchOperation dispatch)
    {
        DataContractSerializerOperationBehavior dataContractSerializerOperationBehavior =
            description.Behaviors.Find<DataContractSerializerOperationBehavior>();
        dataContractSerializerOperationBehavior.DataContractResolver =
            new ProxyDataContractResolver();
    }

    public void Validate(OperationDescription description)
    {            
    }

} 
```

POCO 基类。具有一些基本验证功能的简单类

```
[DataContract(IsReference = true)]
public class POCO
{
    public POCO(Type Tipo)
    {
        RegistrarMetadatos(Tipo);
    }

    /// <summary>
    /// Este metodo valida la clase y devuelve todos los mensajes de validacion.
    /// </summary>        
    /// <returns>Devuelve una Lista de tipo ValidationResults con todos los resultados de la validación</returns>
    public List<ValidationResult> Validar()
    {
        List<ValidationResult> Resultados = new List<ValidationResult>();
        ValidationContext ctx = new ValidationContext(this, null, null);
        Validator.TryValidateObject(this, ctx, Resultados, true);
        return Resultados;
    }

    /// <summary>
    /// Este metodo valida la clase y en caso de no superar la validación levante una excepción del tipo ValidationEx
    /// </summary>        
    public void TryValidar()
    {
        List<ValidationResult> Resultados = new List<ValidationResult>();
        ValidationContext ctx = new ValidationContext(this, null, null);
        Validator.TryValidateObject(this, ctx, Resultados, true);
        if (Resultados.Count > 0)
        {
            throw new ValEx(Resultados);
        };
    }

    /// <summary>
    /// Este metodo busca la clase interna que contiene los metadatos con las 
    /// Validaciones y las adhiere a la clase principal. Parae ello usa la convención "MD"
    /// <param name="Tipo">El tipo de la clase que sobre la que se quiere registar los metadatos</param>
    /// </summary>
    private void RegistrarMetadatos(Type Tipo)
    {
        string aux = Tipo.AssemblyQualifiedName;

        aux = aux.Replace(Tipo.FullName, Tipo.FullName + "+" + Tipo.Name +"MD");

        Type Meta = Type.GetType(aux);

        if (Meta != null)
        {
            var DescProv =
                new AssociatedMetadataTypeTypeDescriptionProvider(
                    Tipo, Meta
                );
            TypeDescriptor.AddProviderTransparent(DescProv, Tipo);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:11:56.583

序列化器查看`Child`并查看`Parent`，反之亦然。这就是为什么存在导致`ThisSiteException`.

解决方案是添加`NonSerialized`（仅限字段）属性或删除`DataContract`（这是不可取的）。

考虑重构您的代码以`Parent`从任何子节点中删除（我的观点）该属性，并将它们自动添加到您的客户端-服务器应用程序的接收端。

# javascript - jQuery Mobile 中的页面高度不正确

> ID：13028349
> 
> 赞同：5
> 
> 时间：2012-10-23T10:23:33.617
> 
> 标签：javascript, jquery, css, windows-phone-7, jquery-mobile

我正在使用 jQuery Mobile 1.2.0 开发一个 Web 应用程序，并且在 iOS 和 Android 上正确计算了页面高度，但在 Windows Phone 上却没有，它在页面底部有一个间隙。

知道如何修复它，最好只使用 CSS 吗？

```
<!DOCTYPE html>
<html>
    <head>
        <title>Hello World jQuery Mobile</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" /></script>
        <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    </head>
    <body>
        <div data-role="page" style="background:green">
            <div data-role="header">
                <h1>Page Title</h1>
            </div>
            <div data-role="content">
                <p>Page content goes here.</p>
            </div>
            <div data-role="footer">
                <h4>Page Footer</h4>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:40:12.130

这是一个已知的问题。您可以通过 CSS 硬编码身体的最小高度（仅限纵向模式）或执行以下操作。

```
function bodyMinHeightFix() {
    var isWp7 = window.navigator.userAgent.indexOf("IEMobile/9.0") != -1;

    if (!isWp7) return;

    // portrait mode only
    if(window.innerHeight <= window.innerWidth) return;

    var zoomFactorW = document.body.clientWidth / screen.availWidth;

    // default value (web browser app)
    var addrBarH = 72;

    // no app bar in web view control
    if (typeof window.external.Notify !== "undefined") {
        addrBarH = 0;
    }

    var divHeightInDoc = (screen.availHeight-addrBarH) * zoomFactorW;
    //$("body")[0].style.minHeight = divHeightInDoc + 'px';

    var page = $("div[data-role='page']");
    if (page.length > 0)
        page[0].style.setProperty("min-height", divHeightInDoc + "px", 'important');

} 
```

[https://github.com/sgrebnov/jqmobile-metro-theme/blob/master/themes/metro/jquery.mobile.metro.theme.init.js](https://github.com/sgrebnov/jqmobile-metro-theme/blob/master/themes/metro/jquery.mobile.metro.theme.init.js)

在 Windows Phone 8 上，您可以使用以下

```
@media screen and (orientation: portrait) {
    @-ms-viewport {
        width: 320px;
        user-zoom: fixed;
        max-zoom: 1;
        min-zoom: 1;
    }
}

@media screen and (orientation: landscape) {
    @-ms-viewport {
        width: 480px;
        user-zoom: fixed;
        max-zoom: 1;
        min-zoom: 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:59:33.857

@Sergei 的回答：该修复适用于我的第一页，但我的其他主页有固定的页脚，这些页脚仍然“浮动”在空白区域之上。

虽然之前的空白空间肯定更少（页脚位于屏幕中间略上方）

我尝试在页面更改时再次运行代码并使用类“ui-mobile-viewport”更改正文的高度，但它不起作用。

希望你能帮忙。感谢！

# ruby-on-rails - 在 Rails 应用程序中签署新证书

> ID：13028355
> 
> 赞同：1
> 
> 时间：2012-10-23T10:23:51.310
> 
> 标签：ruby-on-rails, certificate, ca

我有一个带有公共 REST API 的 Rails 应用程序，它使用 SSL 客户端证书对 API 客户端进行身份验证。

我希望该应用程序充当简单的 CA。管理员用户应该能够访问站点上的页面并请求新证书。应用程序应该生成一个新的 SSL 证书，用应用程序的私钥签名，并以某种形式将其返回给管理员用户。

然后，管理员用户将在客户端应用程序中安装此证书。然后，这些应用程序将能够使用新证书访问 REST API。

实现这一点的最简单方法是什么？我知道生成和签署新证书的唯一方法是使用`openssl`命令行，在`openssl`服务器上配置为 CA 之后（例如[像这样](http://it.toolbox.com/blogs/securitymonkey/howto-securing-a-website-with-client-ssl-certificates-11500)）。我是否需要这样做，并`openssl`在 Rails 中使用反引号进行通信？这看起来既繁琐又脆弱。

我应该如何将证书退还给管理员？我可以将证书作为文本文件传递出去以供下载。我见过 CA Web 界面允许用户从浏览器请求证书，然后将证书直接安装到浏览器中。然后管理员必须导出证书以将其传递给客户端脚本。

我不认为`acts_as_CA`Rails 有任何类型的“”宝石？

[请注意，我已经知道如何根据我的私钥对客户端请求进行身份验证。这个问题特别与颁发新证书有关。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:41:00.460

您可能想看看我们过去如何使用我们称为“证书仓库”的工具完成类似的事情。

*   [博客文章](http://www.fngtps.com/2010/security-through-clarity-keeping-secrets_multi-server-amazon-ec2-setup/)
*   [GitHub 仓库](https://github.com/Fingertips/certificate-depot)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:32:44.180

您可以使用 openssl gem 或[sshkey](https://github.com/bensie/sshkey)生成密钥对。

将证书作为文本文件或纯文本传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:37:17.487

我现在有这个工作。Ruby 中的 OpenSSL 库具有 CA 工作所需的所有方法，此处提供了清晰的示例：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL.html)

我不需要在服务器上设置 OpenSSL CA（如上面问题中的链接）——即使用命令行 openssl 作为 CA。从 Ruby 中使用它，您需要管理自己的 CA 证书存储、唯一序列号等。

如果您希望客户端证书可以直接下载到浏览器，请提供带有“.p12”文件扩展名的 PCKS12 捆绑包。请参阅[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/PKCS12.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/PKCS12.html) 为“名称”参数使用友好名称——这不会影响您的证书，但它可以很容易地在浏览器的选择密钥对话框中找到。不要在 PKCS12 包中包含您的 CA 证书，Windows 会要求用户将您的 CA 安装为完全受信任的根 CA。

# c++ - 如何为函数参数的类型转换提供 g++ 打印警告？

> ID：13028356
> 
> 赞同：1
> 
> 时间：2012-10-23T10:24:06.677
> 
> 标签：c++, g++, warnings, compiler-warnings

> **可能重复：**
> [我可以让 GCC 在将过宽的类型传递给函数时发出警告吗？](https://stackoverflow.com/questions/310108/can-i-make-gcc-warn-on-passing-too-wide-types-to-functions)

当我将有符号整数传递给采用无符号整数的函数时，有没有办法让 gcc 或 g++ 产生警告？

例如：

```
int main(){
        char buf[8];
        int i;
        for(i=0;i<6;i++)
                buf[i] = 'a';
        buf[6]='\0';
        strcat(buf, " ");
        strncat(buf, "happystacksmashingstring",-1 );
        return 0;

} 
```

将导致堆栈粉碎，因为 strncat 将 size_t 作为其第三个参数，这通常是一个无符号整数。然而，命令：

```
g++ -Wall -Wextra -Werror -pedantic -W -Weffc++ -Wconversion test.c 
```

它包含我知道的每个警告标志，在编译时不会产生错误或警告，并且在运行时会产生粉碎的堆栈。

```
gcc -Wall -Wextra -Werror -pedantic -W -Wconversion test.c 
```

*相反会*产生关于隐式转换的错误。为什么 -Wconversion 标志不能与 g++ 一起正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:36:10.040

从 g++ 的手册页：

> Warnings about conversions between signed and unsigned integers are disabled by default in C++ unless-Wsign-conversion is explicitly enabled.

# android - 我们必须做些什么和所有设置才能访问我服务器上的本地数据库

> ID：13028357
> 
> 赞同：0
> 
> 时间：2012-10-23T10:24:07.840
> 
> 标签：android, android-layout

我创建了一个应用程序，它将与我的服务器上的本地数据库同步数据，我使用 jdbc 代码实现了这一点。它在我的模拟器上运行良好。
我制作了它的apk文件并安装到我的设备中。但是我怎样才能同步。我通过 USB 连接了我的设备并尝试了它，但它没有同步。我不知道要连接到服务器上的本地数据库必须进行哪些设置和所有设置。
我提到[了 http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access-sql-database-server-from-android-app/](http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access-sql-database-server-from-android-app/)和[http://jtds.sourceforge.net /](http://jtds.sourceforge.net/)进行编码..

这是我用来连接到我的数据库的示例代码。我正在使用 jtds.jdbc 添加的 jar 文件来访问本地数据库。

```
String driver = "net.sourceforge.jtds.jdbc.Driver";
            Class.forName(driver).newInstance();
            Connection conn = DriverManager
                    .getConnection(
                            "jdbc:jtds:sqlserver://localhost:dbname",
                            "username", "password");
            Log.w("Connection", "open");
            Statement stmtUserDetails = conn.createStatement();
            //Fetching Data From Tbl
            ResultSet resetUserDetails = stmtUserDetails
                    .executeQuery("select UserName,Password,Priviledges from TblmyTable"); 
```

我在 Log-cat 中遇到以下错误

```
11-02 13:19:05.249: D/SntpClient(73): request time failed: java.net.SocketException: Address family not supported by protocol 
```

# sql - COUNT 函数的结果不正确？

> ID：13028358
> 
> 赞同：0
> 
> 时间：2012-10-23T10:24:11.193
> 
> 标签：sql, oracle, count

我是使用 ORACLE 的 SQL 初学者，但遇到了一些问题。我有一个包含 4 个表（HOTEL、ROOM、BOOKING、GUEST）的基本数据库，其中填充了有关房间分机价格的数据。

我有一个书面查询，应该找到预订价格在 230 到 350 美元之间的房间的客人的人数和姓名。还要显示他们预订了多少次这样的房间。但是，它似乎没有给我正确的输出，我不知道为什么。这是查询：

```
SELECT GUEST.GUEST_NAME "GUEST NAME",GUEST.GUEST_NO "GUEST NUMBER", 
COUNT(GUEST.GUEST_NO)     "NUMBER OF TIMES BOOKED"
FROM ROOM, GUEST, BOOKING
WHERE R_PRICE>=260
AND R_PRICE<=350
AND GUEST.GUEST_NO = BOOKING.GUEST_NO
AND ROOM.HOTEL_NO = BOOKING.HOTEL_NO
GROUP BY GUEST.GUEST_NO, GUEST.GUEST_NAME
ORDER BY "NUMBER OF TIMES BOOKED" ASC; 
```

和输出：

```
Tina Duncan      G001    2
Jenny Freeman    G003    2
Martin Ferguson  G006    3
Paul Happy       G002    3
Steve Kirkwood   G005    3 
```

这是表格的示例：

房间：

```
 ROOM_NO HOTEL_NO R_TYPE
------- -------- ------ ---------
1       H100     S          220
2       H100     D          230
3       H100     F          310
1       H200     S          260
2       H200     D          170
3       H200     S          250
4       H200     F          180
5       H200     F          295
1       H300     D          200
2       H300     S          420 
```

预订：

```
DATE_FROM DATE_TO   ROOM_NO
--------- --------- -------
15-AUG-12 17-AUG-12 1
30-AUG-12 15-SEP-12 2
01-AUG-12 02-AUG-12 2
10-AUG-12 11-AUG-12 2
01-SEP-12 15-SEP-12 3
31-JUL-12 02-AUG-12 1
11-JUL-12 01-AUG-12 1
12-JUL-12 13-JUL-12 1
14-JUL-12 15-JUL-12 1
17-AUG-12 28-AUG-12 2
31-JUL-12 01-SEP-12 1
31-AUG-12 01-SEP-12 2
31-AUG-12 15-SEP-12 4
01-SEP-12 15-SEP-12 1 
```

来宾：

```
GUEST_NO G_NAME
-------- --------------------
G001     Tina Duncan
G002     Paul Happy
G003     Jenny Freeman
G012     Dianne Kelly
G005     Steve Kirkwood
G006     Martin Ferguson
G007     Vanessa Horton
Goo8     Bianca Begg 
```

输出应该是：

```
Paul Happy       G002    2
Jenny Freeman    G003    1
Steve Kirkwood   G005    1
Martin Ferguson      G006    1
Dianne Kelly     G012    1 
```

希望我已经给了你足够的东西，如果我能得到一点帮助，我将不胜感激。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:33:45.400

好吧，您实际上并没有解释为什么您认为您的输出不正确，但是您会立即想到一些事情。

首先，您需要使用 Booking 表中存储的价格，而不是 Room 表中的价格。为什么？好吧，Room 表中的价格会随着时间而变化，而 Booking 表中的价格是客户*实际支付*的价格。**编辑**我注意到您的预订表没有存储支付的价格。也需要！！

其次，您说您感兴趣的价格范围是230-350美元，但查询的是260-350美元。

第三，如果你想统计预订的数量，那就统计预订的数量。您正在计算客人 ID。

我会建议类似以下查询：

```
SELECT GUEST.GUEST_NAME         "GUEST NAME",
       GUEST.GUEST_NO           "GUEST NUMBER", 
       COUNT(BOOKING.BOOKINGID) "NUMBER OF TIMES BOOKED"
FROM BOOKING JOIN
     GUEST ON GUEST.GUEST_NO = BOOKING.GUEST_NO
WHERE BOOKING.PRICE BETWEEN 230 AND 350
GROUP BY GUEST.GUEST_NO, GUEST.GUEST_NAME
ORDER BY "NUMBER OF TIMES BOOKED" ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:34:52.797

此连接可能导致它：

```
AND ROOM.HOTEL_NO = BOOKING.HOTEL_NO 
```

因为酒店有很多房间，所以此连接将为酒店中的每个房间生成一行（或计数 +1）。尝试添加这个：

```
AND BOOKING.ROOM_NO = ROOM.ROOM_NO 
```

# wso2 - 从 wsdl 创建的 WSO2 GREG 服务被锁定

> ID：13028364
> 
> 赞同：1
> 
> 时间：2012-10-23T10:24:25.027
> 
> 标签：wso2, registry, wso2carbon, wso2greg

将 wsdl 导入 GREG 时，GREG 会自动创建服务工件，但该工件被锁定是不可编辑的。一些解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:25:39.777

工件被锁定是因为服务工件应该反映 WSDL 的状态。

但是，锁定是使用权限模型发生的。因此，如果您确实想要编辑针对 WSDL 生成的服务工件的信息，您可以将服务工件的权限从只读更改为读写，然后按照您想要的方式编辑服务数据。

# java - 这些 XSRF 保护是否也适用于 RequestFactory？

> ID：13028365
> 
> 赞同：0
> 
> 时间：2012-10-23T10:24:31.557
> 
> 标签：java, gwt, csrf, requestfactory

我刚刚阅读[了这篇关于 GWT RPC XSRF 保护](https://developers.google.com/web-toolkit/doc/2.4/DevGuideSecurityRpcXsrf)的文章，但是我正计划编写一个利用更新的 RequestFactory 框架的 GWT 应用程序。

但是，我没有看到任何与本文等效的 RequestFactory，所以我问：如果我使用 RequestFactory，我是否需要担心上面文章中概述的攻击媒介和必要的保护/预防措施，或者我是否“免疫“？有人知道这些项目的 RequestFactory 等效项吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:40:04.673

不，你不能免疫。

而且我不知道 RequestFactory 有任何等价物。您基本上会`RequestTransport`在客户端实现 a 并在服务器端实现 servlet 过滤器；但是您必须找到某种`XsrfToken`与客户端通信的方法（想到动态主机页面）。

# iphone - 在objective-c中从xml源中选择随机文本

> ID：13028367
> 
> 赞同：1
> 
> 时间：2012-10-23T10:24:43.277
> 
> 标签：iphone, objective-c, xml, random

我正在尝试从我已经拥有的 XML 文件中选择一个随机的圣经经文。我想提取一个随机的诗句，显示它，然后还显示诗句号和书名。

我有几个 XML 文件，因此将它们转换为 Plist 可能会很麻烦，而且我不确定是否使用还可以提取章节编号和书名的字典。

XML 文件看起来像这样......

```
 <bible translation="KJV">
    <testament name="Old">

        <book index="1" name="Genesis">
            <chapter index="1">
                <verse index="1" text="In the beginning God created the heaven and the earth."/>
                <verse index="2" text="And the earth was without form, and void; and darkness was upon the face of the deep. And the Spirit of God moved upon the face of the waters."/>

                <!-- THE REST OF THE XML HERE -->

            </chapter>
       </book>
</testament> 
```

关于如何选择随机诗句然后显示文本、书名和章节编号的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:27:08.537

生成一个介于 1 和您拥有的最高书号之间的随机书号，生成一个介于 1 和该书中章节数之间的随机章节号，最后生成一个介于 1 和该章节中的经文数之间的随机数。从那里，您可以使用生成的三个数字来选择正确的诗句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:28:32.623

一个相当简单的解决方案是获取您的 XML 文件并将其格式化为*“属性列表”*（plist）文件 - 这些可以在 Objective-C 中轻松处理。本质上，*“属性列表”*只是一个 XML 文件，因此转换它的工作量应该很小。

然后，您可以使用“plist”文件的内容填充数组或字典，并简单地生成一个随机数用作从数组中选择对象的索引。网上有很多关于如何处理 plist 文件的信息，你可以在[这里查看一个简单的教程](http://hayageek.com/plist-tutorial/)

# shell - 选择目录中在 shell 脚本中有超过 'n' 行的文件？

> ID：13028371
> 
> 赞同：0
> 
> 时间：2012-10-23T10:25:02.383
> 
> 标签：shell, awk, find, xargs

我正在尝试在 shell 脚本中选择行数超过 'n' 的文件并将它们移动到另一个目录。

以下命令在命令行中可以正常工作，但不能在 ashell 脚本中工作，

```
MY_PATH='/var/www/'
find $MY_PATH -maxdepth 1 -type f -name 'authuser-*' | xargs  wc -l |   awk '{if($1 >= 5) print $1} 
```

但是当在 shell 脚本中时，

```
files_count=`find $MY_PATH -type f  -name 'authuser-*' | xargs  wc -l | awk '{if($1 > 5) print $2}'`
echo $files_count
exit 1 
```

我目前正在使用这个完整的命令

```
find /var/www/ -maxdepth 1 -type f -name 'authuser-*'| xargs  wc -l |   awk '{if($1 >= 5) print $2}' | awk '{if($1 !="total") print $1}' | xargs -i basename {} | head -$5 
```

可能是什么问题呢？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:04:37.483

实际上，我认为您投入了太多管道命令来完成一项简单的工作。考虑选择所有行数大于 5 的文件：

```
 find /var/www/ -maxdepth 1 -type f -name 'authuser-*' \
                    -exec awk 'END {if (NR > 5) print FILENAME}' {} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:03:04.060

似乎你让它变得比必要的复杂得多：

```
n=5
for file in authuser-*
do
    (( $(wc -l <"$file") > "$n" )) &&
    mv "$file" wherever...
done 
```

请注意，与使用文件列表填充变量的任何解决方案不同，上述方法可以很好地处理名称中带有空格的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:34:29.247

*您*是否在脚本中设置了PATH？ `PATH='/var/www/'`

否则，您的脚本将使用系统的 PATH 变量，而不是您设置的 PATH。除此之外，我不明白为什么如果您的命令从命令行运行，它为什么不能在脚本中运行。

此外，您不应该`PATH`用于设置自定义路径。例如，您可以选择不同的名称`MY_PATH`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:10:21.977

问题在于 find 命令：

```
find "$MY_PATH" -type f  -name 'authuser-*' 
```

你错过了双引号。顺便说一句，下面的脚本在我的地方工作。

```
#!/bin/sh
mypah='./'
var=`find "$mypah" -name "temp" | xargs nawk '{a[FILENAME]++}END{for(i in a){if(a[i]>5)print i}}'`

echo $var 
```

# c# - 如何从第一个表中获取一行，从第二个表中获取其他行

> ID：13028375
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:25:26.163
> 
> 标签：c#, linq

关于要显示 2 个表中的记录的查询，我遇到了一个小问题。我需要显示第一个表中的一行和第二个表中的许多行（与第一个 table.id 相关）

如表 1

```
name | id
----------
Shop | 1
Shop | 2 
```

表 2

```
name | id  | shopid
item | 1   |
item | 2   |
item | 3   | 
```

我想从表 1 中检索单行，从表 2 中检索相关行。

我有一个项目对象，其中包含两个表的属性，但我需要显示表 1 中的单个记录（我尝试过加入，并使用其他方式但从表 1 中获取更多值（第一条记录有信息，其他为空））。

这是示例代码

```
public class ItemsInfo
{
    public Shopname { get; set;}
    public item { get; set; }
}

public List<ItemsInfo> ShopItems(int ShopId)
{
    var items = from i in db.items
                join s in db.shops on i.shopid equals s.id
                where s.id == ShopId
                select new ItemsInfo
                           {
                               shopname = s.name,
                           items = i.name
                           }
    return items.Tolist();
} 
```

我想要结果为

```
Shopname : abcd
items    : item 1
items    : item 2
items    : item 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:21:01.127

找到解决方案:)

创建主对象并将第二个表的嵌套对象添加到主对象中

这是代码

创建了 2 个对象 1 用于商店表，第 2 用于物品

```
public class Shop
{
   /// Shop Object
   public string Shop { get; set; }
   public List<Item> Items { get; set; }
}

public class Item
{
   ///Items Object
   public string Name { get; set; }
   public string Picture { get; set; }
}

public List<Item> ItemsList(int id)
{
   var item = from i in DB.Items
   where i.ShopId == id
   select new ShopItem
   {
      Name = i.Name,
      Picture = i.ItemPictures
   };
  return item.ToList();
}

public List<Shop> ShopItems(int ShopId)
{
   var Shopitms = from shop in DB.Shops
   where shop.Id == ShopId && shop.IsActive == true && shop.IsDeleted == false
   select new Shop
   {
      Shop = shop.Name,
      Items = ItemsList(shop.Id)
   }
return ShopItms.ToList();
} 
```

工作正常:)

# android - 使用 SWIG 的 Android 回调示例

> ID：13028380
> 
> 赞同：1
> 
> 时间：2012-10-23T10:25:47.053
> 
> 标签：android, callback, java-native-interface, swig

有没有人有一个关于如何在使用本机代码的 Android 应用程序中引入回调功能的体面示例？理想情况下，我想使用 swig 来生成界面。网站链接？

# java - 从 MySQL 数据库中获取存储过程

> ID：13028381
> 
> 赞同：0
> 
> 时间：2012-10-23T10:25:52.143
> 
> 标签：java, mysql, stored-procedures

是否有任何工具可以从数据库中找出存储过程及其参数列表？我只是在 Swing 应用程序中实现，用户将只提供数据库名称，并且基于数据库名称我必须获取所有存储过程及其参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:38:33.633

您可以使用：`SELECT name,param_list FROM mysql.proc WHERE db='your_database' and type='procedure';`检索所有过程及其参数的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:28:25.443

```
SHOW PROCEDURE STATUS 
```

将向您显示可用的存储过程。

要获取特定数据库的过程，请使用 -

```
SHOW PROCEDURE STATUS 
WHERE Db = 'your_database_name'; 
```

有关更详细的说明，请参阅[此答案。](https://stackoverflow.com/a/1582221/245679)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:29:14.413

看看[DBVisualizer](http://www.dbvis.com/)。它将向您显示与您的数据库相关的所有内容，包括您的存储过程。

# android - XMPP 房间邀请

> ID：13028384
> 
> 赞同：2
> 
> 时间：2012-10-23T10:26:12.200
> 
> 标签：android, xmpp, chatroom, multi-user

在我的聊天应用程序中，我想实现群聊功能。同样，我想创建房间并将邀请发送给我的朋友加入房间。这是我加入并邀请朋友到房间的代码。

创建房间

```
//Create Room
    btn_CreateRoom = (Button)findViewById(R.id.btn_usermenu_CreateRoom);
    btn_CreateRoom.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            try {
                muc = new MultiUserChat(connection, "room1@conference.abc.com");

                muc.join("Sunil","123456");
                muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));

            } catch (XMPPException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            System.out.println("Room Created");
        }
    });

    btn_Invite = (Button)findViewById(R.id.btn_usermenu_InviteToRoom);
    btn_Invite.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            muc.invite("sunil@abc.com", "Please join this room");

        }
    });

} 
```

为了接收邀请，我在我的服务类中实现了一个邀请监听器。但我无法通过通知收到邀请。代码的问题。

这是我的邀请听众。

```
MultiUserChat.addInvitationListener(connection, new InvitationListener() {

            @Override
            public void invitationReceived(Connection arg0, String arg1, String arg2,
                    String arg3, String arg4, Message arg5) {
                // TODO Auto-generated method stub

                System.out.println("Received??");
                notification("Invitation Received"); 
```

请告诉我为什么我没有收到邀请。？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-02T12:42:43.917

你写这段代码之后`xmppconnection.connect()`

```
MultiUserChatManager.getInstanceFor(connection).addInvitationListener(new InvitationListener() {
                    @Override
                    public void invitationReceived(XMPPConnection conn, MultiUserChat room, String inviter, String reason, String password, Message message) {
                        MultiUserChatManager manager = MultiUserChatManager.getInstanceFor(conn);
                        try {
                            room.join("pandian");
                        } catch (SmackException.NoResponseException e) {
                            e.printStackTrace();
                        } catch (XMPPException.XMPPErrorException e) {
                            e.printStackTrace();
                        } catch (SmackException.NotConnectedException e) {
                            e.printStackTrace();
                        }
                    }

                }); 
```

它对我有用..试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:19:47.987

你可以试试这个

```
public class myclass extends Activity implements InvitationListener{
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
                MultiUserChat.addInvitationListener(Connection,myclass.this);
}
@Override
    public void invitationReceived(Connection conn, final String room,
            String inviter, String reason, String password, Message message) {

        Log.e("inviter", inviter);
        Log.e("message", message.getBody());
        Log.e("reason", reason);
        Log.e("room", room);

    }
} 
```

这可能会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T09:30:22.597

我们在这里错过了**线程**：

只需添加以下代码即可加入群组：

```
private void setChatRoomInvitationListener() {
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                MultiUserChat.addInvitationListener(xmppConnection, new InvitationListener() {
                    @Override
                    public void invitationReceived(Connection connection,String room, String inviter, String reason,String unKnown, Message message) {
                        XMPPConnectionUtils.configureChatStandards();
                        MultiUserChat muc = new MultiUserChat(connection, room);
                        try {
                            muc.join("My_Name_Here");
                        } catch (XMPPException e) {
                            e.printStackTrace();
                        }
                    }
                });
            }
        });
        thread.start();
    } 
```

希望这会有所帮助。

# mysql - SQL 返回错误的行数

> ID：13028388
> 
> 赞同：1
> 
> 时间：2012-10-23T10:26:31.440
> 
> 标签：mysql, sql

我知道这似乎是一个简单的问题，但它的答案已经让我困惑了很长一段时间。我正在尝试使用 WHERE 子句从数据库中返回行数。我的查询如下：

```
$query = "SELECT COUNT(*) 
          FROM nfl_current_season_games
          WHERE home_team = 'Indianapolis Colts'
          AND away_team = 'Chicago Bears'
          AND week = '1'"; 
```

我100%肯定有这样的一行。我正在 phpmyadmin 中查看它。无论我是在 phpmyadmin 中使用纯 SQL 还是在浏览器中通过 php 脚本执行查询，它仍然返回值 0。我尝试将 var_dump 函数用于 php 的 $away_team 和 $home_team 变量，它们都是正好。我不知道从这里去哪里，因为这看起来很奇怪。

有没有人有任何提示或线索？

谢谢，

槊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:31:21.683

您可能在其中一列中有空格或排序规则问题。

我建议您一次使用一个条件运行查询，并尝试找出导致问题的原因。

当您发现时，将其粘贴到此处，看看我们是否可以提供帮助

**编辑：**

尝试做类似的事情（不确定mysql语法，但想法是修剪以删除空格并将其发送到上层）：

```
UPPERCASE(TRIM(away_team)) = 'CHICAGO BEARS' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:43:13.990

我终于明白了：

印第安纳波利斯小马队在第一周客场对阵芝加哥熊队。

[http://www.colts.com/team/season-schedule.html](http://www.colts.com/team/season-schedule.html)

有时这不是代码问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:09:03.027

“周”列的数据类型是字符串/字符吗？如果不是，则只给出不带引号的值 1，否则（在引号中给出）会将其解释为字符串/字符。试试这个查询：

> $query = "选择计数(*)
> 
> 来自 nfl_current_season_games
> 
> WHERE home_team = '印第安纳波利斯小马队'
> 
> AND away_team = '芝加哥熊队'
> 
> AND 周 = 1 ";

# android - 安装了 FB 应用程序的 Android 和 Facebook

> ID：13028391
> 
> 赞同：0
> 
> 时间：2012-10-23T10:26:46.193
> 
> 标签：android, facebook

我在手机上安装了 Facebook API 和 FB 应用程序时变灰了。

我执行检查是否安装了 FB，只是为了记录它，我得到以下信息：

```
10-23 12:08:35.193: W/FAcebook(21888): PackageInfo{41908a68 com.facebook.katana} 
```

（所以，Facebook 发现）然后当我尝试执行登录/照片上传时：

```
10-23 12:08:40.208: E/ActivityThread(21888): Failed to find provider info for com.facebook.katana.provider.AttributionIdProvider 
```

在我的应用程序中，如果未安装 FB 应用程序，一切正常。如果 FB 在它自己的设备上，它不起作用，但我没有（不再）收到 App 配置错误的消息。

我在日志中只收到那个小错误，当我尝试从我的应用程序执行操作时，FB 应用程序出现了几秒钟，微调器“工作”，然后它消失了，就是这样。

不崩溃，不让我登录，不提供任何信息......

# jquery - 如果没有可见的兄弟姐妹，则隐藏兄弟姐妹

> ID：13028397
> 
> 赞同：2
> 
> 时间：2012-10-23T10:27:16.367
> 
> 标签：jquery, siblings

我有以下内容，如果有人可以提供帮助，那就太好了..

```
 $(".brand-nav").click(function(e){
        var type = $(this).attr( id );
        $('.article').hide();
        $('.' + type).show();            
        e.preventDefault();            
        $(".letter-section").each(function (i) {
            var siblings = $(i).siblings(":visible").length;
            if (siblings == 0) {
                $(i.big-lettter').hide();
            } else {
                $(i.big-lettter').show();
            }
        }
    }); 
```

我已经制作了这个 JS 小提琴以包含 HTML 的想法：http: [//jsfiddle.net/BEa4x/](http://jsfiddle.net/BEa4x/)当我在这里发布它时它的格式不正确。

当您单击顶部菜单时，它应该隐藏所有链接，然后仅通过链接 ID 显示相关链接。

如果然后您单击食物，这意味着“A”部分中没有可见的链接，因此我也需要隐藏 A，否则应该显示它。

任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:43:37.370

好的，那里有一些语法错误......还有一些逻辑错误。尝试这个：

```
 $(".brand-nav").click(function(e) {
     var type = $(this).attr('id'); // id needs quotes
     $('.article').hide();
     $('.' + type).show();            
     e.preventDefault();            
     $(".letter-section").each(function (i) {
         var siblings = $(this).find('li').filter(':visible'); // i is the index, "this" is the actual DOM element. Also you need the descendants 'li', not his siblings
         if (siblings.size() == 0) {
             $(this).children('.big-letter').hide(); // again, use "this" and get the children (you may want to filter the first also).
         }
         else {
             $(this).children('.big-letter').show(); // remember to show again or it will stay hidden :)
         }
     }); // you also forgot to close this bracket
 }); 
```

小提琴：http: [//jsfiddle.net/BEa4x/21/](http://jsfiddle.net/BEa4x/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:53:19.527

```
$(document).ready(function() {
    $(".brand-nav").click(function(e){
        e.preventDefault();            

        // Note that id has to be quoted here.
        var kind = $(this).attr('id');

        // First of all show all the letters
        // in case they had been hidden previously
        $('.letter-section').show();

        // Hide all the articles and only show the ones that
        // match the id of the element that's been clicked on.
        $('.article').hide();
        $('.' + kind).show();

        // For each letter section...
        $('.letter-section').each(function(index, element) {
            // Check if its visible li count is 0
            if ($(element).contents('li:visible').length == 0) {
              // If it is, hide the letter!
              $(element).hide();   
            }
        });
    });    
}); 
```

你可以看到它在这里工作：http: [//jsfiddle.net/BEa4x/23/](http://jsfiddle.net/BEa4x/23/)

这是对您的代码的快速而肮脏的修复，如果我是您，我会重构它，首先将字母部分内容检查放入其自己的函数中。

# javascript - JSON 模式到 Javascript 类型对象

> ID：13028400
> 
> 赞同：11
> 
> 时间：2012-10-23T10:27:34.103
> 
> 标签：javascript, json, code-generation

是否有任何库可以从 JSON 模式生成 Javascript 类型对象（JS 函数）？基本上相当于这个[http://code.google.com/p/jsonschema2pojo/](http://code.google.com/p/jsonschema2pojo/)的 JS 版本。谢谢。

编辑：

从...开始 ：

```
{
    "description": "An entity",
    "type":"object",
    "properties": {
        "geometries": {"type": "array",
            "items": {
                "$ref" : "geometry"
             }
          }
    }
} 
```

我想为我生成一些这样的代码

```
function Entity {
    this.geometries;
} 
```

显然，使用 $ref 等模式可能会更复杂，我希望这能给出这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T08:36:38.827

这个[djvi](https://github.com/korzio/djvi)库是否满足您的要求？

提供的示例显示：

```
var jsonSchema = {"common":{"properties":{"type":{"enum":["common"]}},"required":["type"]}};

var env = new djvi();
env.addSchema('test', jsonSchema);
env.instance('test#/common');
// => { type: 'common' } 
```

我怀疑这是您所追求的解决方案。

现在这不是您所追求的确切解决方案，但我遇到了类似的问题并创建了以下解决方案以将父对象作为函数返回，它可能会有所帮助：

```
var dbdict = {
    "title": "Entity",
    "description": "An entity",
    "type":"object",
    "properties": {
        "geometries": {"type": "array",
            "items": {
                "$ref" : "geometry"
             }
          }
    }
}

var walkJSONSchema = function (JSONSchema, returnFunction) {

    var walkObject = function(PROPS) {
        var $this = this,
            $child = {}
        ;

        if(returnFunction == true) {
            $child = new function() {};
        }

        //console.log("PROPS");
        //console.log(PROPS);

        for(var key in PROPS) {
            console.log("key:"+key+" type:"+PROPS[key].type+" default:"+PROPS[key].default);
            switch(PROPS[key].type) {
                case "boolean":
                    $child[key] = PROPS[key].default || undefined;
                    break;
                case "integer":
                case "number":
                    $child[key] = PROPS[key].default || undefined;
                    break;
                case "array":
                    $child[key] = [].push($this.walkObject(PROPS[key].properties));
                    break;
                case "object":
                    $child[key] = $this.walkObject(PROPS[key].properties);
                    break;
                case "string":
                    $child[key] = PROPS[key].default || undefined;
                    break;
            };
        };

        return $child;
    }

    return walkObject(JSONSchema.properties);
}

Entity = walkJSONSchema(dbdict, true); 
```

Of course you could script the retrieval of the "Entity" from the schema doc however you like, but this way at least you get a function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:13:31.337

我会说你是靠自己的。无论如何，做起来应该不会太难。只需解析您拥有的 JSON，然后遍历每个项目，为每个“类”应用您想要的逻辑并将结果附加到一个字符串。完成后，打印该字符串并使用任何 JS 格式化程序来获取您的代码。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-23T11:27:13.270

您唯一能做的就是向`_type_`您的 json 对象添加一个属性（以某种奇怪的方式命名，以免与其他文字冲突），以识别您的类型。然后，您可以将该字符串映射到 javascript 中列出可用属性的另一个对象。

你可以这样做——这并不意味着这是一个好主意。Json 是为了在 javascript 中直接使用而设计的。

# javascript - 我如何阅读这个奇怪的服务器响应并获得“成功”键？

> ID：13028403
> 
> 赞同：3
> 
> 时间：2012-10-23T10:27:38.720
> 
> 标签：javascript, jquery, ajax, object

我正在使用这个 jQuery 基本 ajax 阅读器：

```
$.ajax({
    url: url,
    dataType: 'jsonp',
    success: function (data) {
        console.log('data is', data);
    }
}); 
```

我得到的完整服务器响应是：

```
jQuery17107194540228229016_1350987657731({"action":"", "type":"", "callerId":""},
 {"errorCode":0,"errorDescription":"OK","success":true,"payload":null}); 
```

但是，当我尝试使用`console.log('data is,data);`我得到的输出输出它时：

```
data is  Object {action: "", type: "", callerId: ""} 
```

**如何接收服务器响应的另一部分？**

即：告诉我的部分`success:true`：

```
{"errorCode":0,"errorDescription":"OK","success":true,"payload":null} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:34:10.640

试试这个，不知道有没有帮助：

```
success:function(data, second){
                       console.log('data is',data, 'second is ',second); 
```

正如一些人指出的那样，成功函数只有在请求成功时才会返回。但是如果你有一些特殊的原因想要使用这些返回值，你可以添加一个额外的参数（我想，我自己还没有测试过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:34:38.847

即使响应是 404，来自 jquery 请求的成功回调也将始终成功。只要服务器可以访问，那始终是成功的。仅当服务器无法访问或请求以触发错误回调的方式丢失时。从这个角度来看，您总是必须分析输出以查看结果是否是所需的（或者检查响应的状态代码。如果它是 40 倍，那么从您的角度来看，这可能是一个错误）。

# android - 无法在 android 中启动活动...？

> ID：13028404
> 
> 赞同：0
> 
> 时间：2012-10-23T10:27:59.400
> 
> 标签：android, global-variables, start-activity

由于我是 android 开发的新手，所以我在项目中遇到了一个问题。代码是..

为了处理 web 服务代码，我从 main.java 文件调用 webinterface 类，如下所示。

主.java

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
WebServiceInterface webinterface=   new WebServiceInterface();
submit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            getuser = username.getText().toString();
            getpass = password.getText().toString();

            HashMap<String, Object> map =  new HashMap<String,Object>();
            map.put("username", getuser);
            map.put("password", getpass);
            webinterface.sendRequest(map);
        }
    }); 
```

在 Webinterface 类中，我收到以下地图值并将它们转换为字符串并发送到 RestClient.class 以处理 Web 服务请求。

WebServiceInterface.java

```
 ArrayList<String> ast = new ArrayList<String>();
  Collection<Object> strings = map.values();
    Iterator iterator = strings.iterator();
    while (iterator.hasNext()) {
        getuser = (String) iterator.next();
        ast.add(getuser);
    }

    String password = ast.get(0).toString();
    String username = ast.get(1).toString();

    RestClient client = new RestClient(
            "***********************");
    client.AddParam("username", username);
    client.AddParam("password", password);

    try {
        client.Execute(RequestMethod.POST);
    } catch (Exception e) {
        e.printStackTrace();
    }

      String response = client.getResponse();

     /** here getting response & sending that response back to Main.java class**/

       Main main = new Main();
   main.responseData(responsedata); 
```

这里从接口类接收到响应方法后，Main.java 类中正在进行以下过程

主.java

```
 @Override
public void onCreate(Bundle savedInstanceState) {

      System.out.println("response is----^^^^^^^^^^====>>>>>>    " + getrespstatus + "_______---->>   > " + respdoctorID);
       }//end of oncreate...

  public void responseData(HashMap<String, Object> responsedata) {
    // TODO Auto-generated method stub

    System.out.println("response data in main class->>>>>>>>  "  + responsedata);

    Collection<Object> strings = responsedata.values();
    Iterator iterator = strings.iterator();
    while (iterator.hasNext()) {
        getresponse = (String) iterator.next();
        ast.add(getresponse);
    }

    String status = ast.get(0).toString();

    try {
        JSONObject json = new JSONObject(status);
        getrespstatus = json.getString("status");
        respdoctorID = json.getString("doctorID");
        callmethod(getrespstatus, respdoctorID);
        System.out.println("response is----^^^^^^^^^^====>>>>>>    " + getrespstatus + "_______---->>   > " + respdoctorID);
                /* if(getrespstatus == "true")
                  {
                   startActivity(new Intent(Main.this,Second.class)) 
                  }else 
                  {
                    //some alert message
                   }*/
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

在这里，如果响应状态== true，我想开始活动。但是在这里我收到了空指针异常的错误。我的另一个疑问是我得到了响应和医生ID。如果我试图在 oncreate 方法中访问以下值，它显示为空值（简单地说，如果我在日志中打印响应值，在我得到的 responseData 方法中，如果从 oncreate 打印得到空值）所以，任何人都可以帮我解决这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:35:43.773

你必须打电话`super`进来`onCreate`。我强烈推荐阅读[这篇](http://developer.android.com/guide/components/activities.html)关于 Activity 生命周期的文章。

至于返回响应，最简单的方法是将您的 Main 实例添加到 WebInterface 类作为引用，也许在构造函数中。

# dependency-injection - Autofac.Webapi 在应用程序启动时在运行时失败

> ID：13028406
> 
> 赞同：1
> 
> 时间：2012-10-23T10:28:02.123
> 
> 标签：dependency-injection, asp.net-web-api, autofac

我正在尝试将 Autofac.WebApi 与 ASP.NET MVC4 WebApi 项目一起使用。我使用 Nuget 安装了最新的 Autofac 和 Autofac.WebApi，但是在尝试注册 GlobalConfiguration DependencyResolver 时，在应用程序启动的运行时，我抛出了这个异常：

> 无法加载文件或程序集“Autofac，Version=2.6.2.859，Culture=neutral，PublicKeyToken=17863af14b0044da”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:28:02.123

Autofac 的最新版本是 2.6.3，而 Autofac.WebApi 是 2.6.2。似乎 Autofac.WebApi 试图调用特定版本 2.6.2 但找不到它。我的 web.config 中有从任何版本到 2.6.3 的 bindingRedirect，但问题仍然存在。

为了解决这个问题，我卸载了这两个包，然后安装了 Autofac 指定版本 2.6.2 和 Autofac.WebApi 忽略依赖项（否则它将卸载旧的 autofac 并安装 2.6.3）。

```
Install-Package autofac -version 2.6.2.859
Install-Package autofac.WebApi -version 2.6.2.859 -IgnoreDependencies 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:27:01.063

Autofac.WebApi 有一个匹配的 2.6.3 包，但它被标记为预发布。使用以下命令安装预发布版本。这将阻止您添加绑定重定向。

`Install-Package Autofac.WebApi -Pre`

# php - 我应该使用哪个函数来检测表单 POST 中的空值？

> ID：13028409
> 
> 赞同：1
> 
> 时间：2012-10-23T10:28:08.487
> 
> 标签：php, isset, string

我不想在我的数据库上导入空白/空、空格、空值。因此，出于这个原因，我想在导入数据库之前检查我的输入值。请任何人都可以告诉我 isset 和 empty 函数哪一个有利于检查输入值。这是我的代码。谢谢

```
$required = array('login', 'password', 'confirm', 'name', 'phone', 'email');

$error = false;
foreach($required as $field) {
  if (empty($_POST[$field])) {
    $error = true;
  }
}

if ($error) {
  echo "All fields are required.";
} else {
  echo "Proceed...";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:30:33.670

在这种情况下`empty`更有意义，因为它还会检查字符串是否为空。`isset`只是检查它是否已定义。您可能还想修剪输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:32:57.070

```
$required = array('login', 'password', 'confirm', 'name', 'phone', 'email');

$error = false;
foreach($required as $field) {
  if (empty($_POST[$field]) || strlen(trim($_POST[$field])) == 0) {
    $error = true;
  }
}

if ($error) {
  echo "All fields are required.";
} else {
  echo "Proceed...";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:33:59.000

`isset`完全没用，`empty`在这里可能不是一个合适的选择。

里面的值`$_POST`（以及`$_GET`和`$REQUEST`）总是作为字符串输入，*所以*`isset`总是返回。此外，on的行为和其他此类值不会起作用，这意味着检查只会拒绝：*`true``empty``false``null``empty`*

 **   零长度字符串
*   字符串`"0"`

这与您的代码似乎打算拒绝的内容不同，后者是：

*   零长度字符串
*   完全由空格组成的字符串

考虑`trim($_POST['foo']) === ''`改为使用 as 条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:34:39.923

最好的方法可能是使用`empty`and `trim`。为什么要修剪？它将从开头和结尾删除空格和线条等。这意味着，当有人插入几个空格但没有文本时，可以删除空格，以便您检查`empty`：

```
if(empty(trim($foo))) 
{
    // It is empty!
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T10:35:12.100

`Isset()`检查变量的值是否包括（Flase、0 或空字符串），但不是 NULL。
如果 var 存在，则返回 TRUE；否则为假。

`empty()`函数检查变量是否具有空值、空字符串、0、NULL 或 False。如果 var 具有非空且非零值，则返回 FALSE。

**例子：**

```
$var = 0;

// Evaluates to true because $var is empty
if (empty($var)) {
echo '$var is either 0, empty, or not set at all';
}

// Evaluates as true because $var is set
if (isset($var)) {
echo '$var is set even though it is empty';
} 
```

[来源](http://zainal.wordpress.com/2006/04/25/8/)

在您的情况下，您可以使用`empty()`功能

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T10:32:42.150

修理它：

```
foreach($required as $field) 
{
   $val = trim($_POST[$field];
   if (empty($val)) 
   {
      $error = true;
   }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-23T10:36:10.490

您可以合并**isNotEmpty**功能

```
<?php
function isNotEmpty($input){
    $strTemp = trim($input);

    if($strTemp !== ''){
       return true;
    }
    return false;
} 
```

?>

*   将 isNotEmpty 保存为 'isnotempty.php' 以防您将来需要引用它。

    ```
    include 'isnotempty.php';
    $error = false;
    foreach($required as $field) {
      if (!(isNotEmpty($_POST[$field]))) {
        $error = true;
      }

    if ($error) {
      echo "All fields are required.";
    } else {
      echo "Proceed...";
    } 
    ```

希望这可以帮助*

# java - Jfree：堆积面积图在零值处重叠

> ID：13028415
> 
> 赞同：1
> 
> 时间：2012-10-23T10:28:36.540
> 
> 标签：java, jsp, charts, jfreechart

我在 jfree 图表中遇到问题 - StackedAreaChart。

问题是我想显示一个正值和另一个负值。正值在 2011 年结束，负值从 2012 年开始。但在堆积面积图中，它在比例尺上重叠了一段距离。有关问题和所需解决方案，请参见图像。

有谁知道这个的解决方案。任何帮助将不胜感激。

![在此处输入图像描述](../Images/7ceb09881569fcadeb632a34ef127aae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:27:20.510

尝试使用 a`TimeTableXYDataset`来保存系列数据，并使用第二个`StackedXYAreaRenderer`来显示底片。这可能会解决您的问题：

```
import java.io.File;
import java.io.IOException;
import java.text.FieldPosition;
import java.text.NumberFormat;
import java.text.ParsePosition;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StackedXYAreaRenderer;
import org.jfree.data.time.TimeTableXYDataset;
import org.jfree.data.time.Year;
import org.jfree.data.xy.TableXYDataset;

public class StackedAreaChart2 {

    public StackedAreaChart2() {
        TimeTableXYDataset[] dataset = createDataset();
        createChart(dataset);
    }

    public TimeTableXYDataset[] createDataset() {
        TimeTableXYDataset dataSet1 = new TimeTableXYDataset();

        dataSet1.add(new Year(2001), 1.0,"Series1");
        dataSet1.add(new Year(2002), 2.0,"Series1");
        dataSet1.add(new Year(2003),3.0,"Series1");
        dataSet1.add(new Year(2004),4.0,"Series1");
        dataSet1.add(new Year(2005),5.0,"Series1");
        dataSet1.add(new Year(2006),0,"Series1");

        dataSet1.add(new Year(2001), 6.0,"Series2");
        dataSet1.add(new Year(2002),3.0,"Series2");
        dataSet1.add(new Year(2003),4.0,"Series2");
        dataSet1.add(new Year(2004),3.0,"Series2");
        dataSet1.add(new Year(2005),9.0,"Series2");
        dataSet1.add(new Year(2006),0,"Series2");

        TimeTableXYDataset dataSet2 = new TimeTableXYDataset();
        dataSet2.add(new Year(2006),-2,"Series3");
        dataSet2.add(new Year(2007),-3,"Series3");
        dataSet2.add(new Year(2008),-4,"Series3");  

        return new TimeTableXYDataset[] {dataSet1,dataSet2};
    }

    public JFreeChart createChart(TableXYDataset[]  dataset) {
        final JFreeChart chart = ChartFactory.createStackedXYAreaChart("","","",dataset[0],PlotOrientation.VERTICAL,true,true,false);
        XYPlot plot = (XYPlot) chart.getPlot();        
        StackedXYAreaRenderer renderer2 = new StackedXYAreaRenderer();
        plot.setDataset(1, dataset[1]);
        plot.setRenderer(1, renderer2);
        NumberAxis axis = (NumberAxis) plot.getDomainAxis();
        axis.setNumberFormatOverride(new NumberFormat(){

            @Override
            public StringBuffer format(double number, StringBuffer toAppendTo, FieldPosition pos) {
                  SimpleDateFormat format = new SimpleDateFormat("YYYY");   
                  return toAppendTo.append(format.format(new Date((long) number)));
                }

            @Override
            public StringBuffer format(long number, StringBuffer toAppendTo, FieldPosition pos) {
                return new StringBuffer(String.format("%s", number));
            }

            @Override
            public Number parse(String source, ParsePosition parsePosition) {
                return null;
            }
        });
        return chart;
    }

    public void saveChart(JFreeChart chart, String fileLocation) {
        String fileName = fileLocation;
        try {
            ChartUtilities.saveChartAsPNG(new File(fileName), chart, 1000, 600);
        } catch (IOException e) {
            e.printStackTrace();
            System.err.println("Problem occurred creating chart.");
        }
    }

    public static void main(final String[] args) {
        final StackedAreaChart2 demo = new StackedAreaChart2();
        TableXYDataset[] categoryDataset = demo.createDataset();
        JFreeChart chart = demo.createChart(categoryDataset);
        String fileLocation = "StackAreaChart.png";
        demo.saveChart(chart, fileLocation);
        System.out.println("Pie Chart has been created successfully");
        System.out.println("Chart has been saved to: " + fileLocation);
    }

} 
```

![在此处输入图像描述](../Images/6c3fcce61ec238b6ca255105eb2c4185.png)

# internet-explorer - 当 IE6 请求页面时，为什么在 ColdFusion 中尝试将 HTML 转换为二进制时出现错误？

> ID：13028416
> 
> 赞同：1
> 
> 时间：2012-10-23T10:28:49.383
> 
> 标签：internet-explorer, encoding, coldfusion, binary, internet-explorer-6

我在后端运行 ColdFusion 并像这样包装我的页面：

```
 <cfsavecontent variable="renderedResults"><p>hello</p></cfsavecontent>
    <cfscript>
        compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");
        compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
        compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");
        variables.alredayBinary = "false";
    </cfscript>

    <cfif cgi.HTTP_ACCEPT_ENCODING contains "gzip">
       <cfinvoke component="services.utils" method="gzip" stringToZip="#compressedHTML#" returnvariable="compressedHTML"></cfinvoke>    
       <cfheader name="Content-Encoding" value="gzip">
       <cfset variables.alredayBinary = "true">
    </cfif>

    <cfheader name="Content-Type" value="text/html; charset=ISO-8859-1">
    <cfheader name="Content-Length" value="#len(compressedHTML)#" >

    <cfif variables.alredayBinary EQ "false">
        <cfcontent reset="no" variable="#ToBinary(compressedHTML)#" />
    <cfelse>
        <cfcontent reset="no" variable="#compressedHTML#" />    
    </cfif>
    <cfreturn  /> 
```

尽管这对我来说很有意义并且似乎在最新的浏览器上运行良好，但我只是让用户使用 Internet Explorer 6 产生了一系列错误消息。

我收到的信息是：

```
 The parameter 1 of function ToBinary, which is now <HTML STRING> must be a Base-64 encoded string 
```

这告诉我，我最终得到`variables.alredayBinary = false`应该将 HTML 字符串转换为二进制编码字符串。

**问题：**
我不确定我理解什么`toBinary`。不就是为了那个 - 获取 HTML 并转换它吗？那么为什么会出错呢？为什么只在 IE6 上？我只能测试运行良好的 IE8。

感谢您的一些提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:46:27.490

根据错误消息报告的内容，尝试将 base64 字符串提供给`ToBinary`.

```
<cfcontent reset="no" variable="#ToBinary(ToBase64(compressedHTML))#" /> 
```

请注意，Adobe 建议不要使用`ToBinary`and `ToBase64`，而是建议使用[`BinaryDecode`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fc5.html)and [`BinaryEncode`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f65.html)。但是，对于您的使用，您可以[`CharsetDecode`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f64.html)改为使用。

```
<cfcontent reset="no" variable="#CharsetDecode(compressedHTML, "iso-8859-1")#" /> 
```

请注意，这将影响的不仅仅是 IE6。任何不`accept` `gzip`符合 if 语句的浏览器。

附加说明，在我的示例中，我`iso-8859-1`根据您的代码将编码设置为，但建议您考虑`utf-8`.

# java - Saml Inter 服务提供者身份验证

> ID：13028419
> 
> 赞同：1
> 
> 时间：2012-10-23T10:28:57.773
> 
> 标签：java, saml, opensaml

在我们的应用程序中，我们有两个服务提供商一个 Idp。我们的客户是移动应用程序。一个服务提供商 (A) 部署在云中，另一个 (B) 位于防火墙后面。但是服务提供商 (A) 可以通过 NAT/受限 IP 访问访问服务提供商 (B)。

我的问题是我想启用 SSO (SAML)。给我一些详细信息以及如何启用服务提供商间身份验证。

# iframe - 如何确保内容仅在 iframe 中呈现

> ID：13028421
> 
> 赞同：0
> 
> 时间：2012-10-23T10:29:00.170
> 
> 标签：iframe, curl, detection

我想知道如果内容是在真实浏览器的 iframe 中加载的，如何确保我只显示/渲染内容（将代码发送到客户端），类似于 Facebook 检查何时显示他们的点赞按钮和其他社会事业。

在那里，当尝试使用 curl 简单地加载内容时，即使发送 cookie、会话详细信息和用户代理详细信息，它仍然没有返回任何内容。当尝试在 iframe 之外加载内容时，什么都没有收到。怎样才能做到这一点？我想这只是一个涉及多个步骤的简单过程。我对第一个特别感兴趣，即如何检测它真的是从浏览器发送的，而不是简单地卷曲。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:36:47.843

您的服务器无法检测它是使用浏览器还是 curl 发送的，因为标头很容易伪造。

# extjs - EXTJS - 删除选择列的选项

> ID：13028425
> 
> 赞同：3
> 
> 时间：2012-10-23T10:29:24.477
> 
> 标签：extjs, extjs4.1

如何删除选择我的 extjs 网格上的列的选项：

![在此处输入图像描述](../Images/20aeff0b937e96e77abb7a137b078e0d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:11:09.683

尝试设置属性`enableColumnHide:false`

参考：[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Table-cfg-enableColumnHide)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:37:47.237

您还可以在配置每个列时将其设置为属性。只需`hideable: false`为他们每个人设置。

[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Table-cfg-columns)告诉你所有的配置，这里有一些可能很方便的例子：

```
columns: [
    {
        header:'MyHeader',
        dataIndex: 'myData',
        menuDisabled: true,
        draggable: true,
        sortable: true,
        resizeable: true,
        hideable: false,
        hidden: false
    }
] 
```

# ios - iPad 内存不足警告，虽然没有其他应用程序正在运行，我的应用程序仅分配 8 MB

> ID：13028427
> 
> 赞同：4
> 
> 时间：2012-10-23T10:29:28.613
> 
> 标签：ios, didreceivememorywarning

尽管没有其他应用程序正在运行，但我在 iPad 上收到内存不足警告（通过仪器检查），并且我的应用程序只有 8 MB 的实时字节。

据我了解，iOS 仅在系统资源不足时才会触发内存警告。怎么可能，我仍然得到它们？

（为了更好地了解问题和相关情况，请查看这个问题：[Empty drawRect implementation cause memory warning](https://stackoverflow.com/questions/13028099/empty-drawrect-implementation-causes-memory-warning)）

# php - PHP如何使用id从图像文件夹中获取图像

> ID：13028428
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:29:29.077
> 
> 标签：php, mysql

我已经编写了一个用于浏览文件图像的代码，并使用 php 将其上传到指定的文件夹中。现在我想要一个 mysql 数据库，在其中创建两个字段名称 id 和 name，我可以将浏览文件名存储到数据库中。然后我想使用 id 从文件夹中获取图像。

请编写代码以将图像从 id 提取到特定文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:20:01.390

作为该问题的解决方案，您需要为图像文件夹指定固定路径并在数据库中定义一个字段用于存储图像的文件名。

然后，您可以使用为图像文件夹定义的路径以及从数据库中检索图像的文件名来获取图像。

例如

```
 <img src="<?php echo $Path.'/'.$record['image_filename'];?>"> 
```

# css - IE9 不支持 CSS 选择器 >?

> ID：13028429
> 
> 赞同：1
> 
> 时间：2012-10-23T10:29:31.880
> 
> 标签：css, internet-explorer-9, css-selectors

那么我有以下html：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Gallery</title>
        <link href="style.css" rel="stylesheet" />
    </head>
        <body>
        <div>
            <ul class="Boxes">
                <li>
                    <span>Nature</span>
                </li>
                <li class="Add">
                    <div></div>
                </li>
            </ul>
        </div>
    </body>
</html> 
```

和以下CSS：

```
body {
    background: black;
    color: white;
}
body .Boxes li {
    width: 192px;
    height: 192px;
    font-size: 2.5em;
    background: rgb(27, 161, 226);
}
body .Boxes li.Add div {
    background-position: 0px -352px;
    width: 192px;
    height: 192px;
    background-image: url("Sprites.png");
    background-repeat: no-repeat;
    background-color: transparent;
}
.Boxes {
    list-style-type: none;
    float: left;

}
.Boxes li {
    margin: 10px; border: 0px currentColor;
    float: left;
    display: block;
    list-style-type: none;
} 
```

现在这很好用，但是如果我将“body .Boxes li.Add div {”行更改为“body .Boxes li.Add **>** div {”，那么它在 IE9 中停止工作，我不知道为什么？注意：它仍在 Opera、Chrome 中运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:36:54.767

因为您缺少 doctype 声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

没有它，IE9 将进入 quirks 模式，在 quirks 模式下，IE 将无法识别`>`选择器等。这不会影响其他浏览器中的怪癖模式。

# .htaccess - 将对文件的所有访问重定向到root

> ID：13028430
> 
> 赞同：2
> 
> 时间：2012-10-23T10:29:32.277
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我想将所有对文件 myfile.php 的访问重定向到根域。

因此，例如，我希望以下 URL 都解析为 www.mydomain.tld ：

```
www.mydomain.tld/myfile.php?Action=1&k=a-value
www.mydomain.tld/myfile.php?Action=2&k=parameter5
www.mydomain.tld/myfile.php?Action=parameters
www.mydomain.tld/myfile.php?Action=sitemap 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:44:26.737

> 我想将所有对文件 myfile.php 的访问重定向到根域。

您可以使用 mod_alias：

```
Redirect /myfile.php /? 
```

或 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?myfile.php$ /? [L,R] 
```

# jsf - 仅为特定按钮打开新标签？

> ID：13028435
> 
> 赞同：1
> 
> 时间：2012-10-23T10:29:49.920
> 
> 标签：jsf, facelets

如何仅针对特定按钮在 buttonclick 上打开新选项卡？

这将为两者打开新标签，但我只想将它用于“登录”。此外，这些按钮仍应并排对齐。

```
<h:form target="_blank">
    <h:panelGrid columns="2">
        <h:commandButton value="Login" />
        <h:commandButton value="Logout" />
    </h:panelGrid>
</h:form> 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:33:32.073

将您的表单目标设置`_blank`为`onclick`

像这样 ：

```
<h:commandButton value="Login" onclick="this.form.target='_blank'"/> 
```

# bash - 扩展 Bash 选项卡完成：如何处理路径/部分命令？

> ID：13028438
> 
> 赞同：0
> 
> 时间：2012-10-23T10:30:00.017
> 
> 标签：bash, autocomplete

我已经为我的程序添加了制表符完成来 bash。它工作得很好，但我不知道如何处理单词的部分完成。示例：用户类型

```
./program /home/user/De 
```

并按 TAB。然后完成到

```
./program /home/user/Desktop/ 
```

，但现在在“桌面/”之后有一个尾随空格，这不是我想要的。基本上，我需要一种方法来防止 bash 在完成的单词之后添加空格。

我不想将 bash 的补全用于路径。

**编辑：**这似乎不清楚。当按下 TAB 时，我的制表符补全功能会找出要补全的单词（在本例中，即 '/home/user/De'）。然后它会生成一个匹配列表（在这种情况下，唯一的匹配是'/home/user/Desktop'）。Bash 使用这个列表来完成实际的补全：它将 '/home/user/De' 更改为 '/home/user/Desktop/ '。我想防止 bash 在“桌面/”之后添加该空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:42:16.940

在语音标记中尝试过吗？

```
./program "/home/user/[tab]" 
```

我完全不确定这个问题:) bash 实际上会自动完成我不确定你是如何编写一个脚本来自动完成 bash 为你做的事情 -

无论如何......你已经说过你不希望 bash 添加额外的空间 - 除非你打算重写 bash 或添加到它 - 这是不可能的

相反，这是您需要添加到您自己的代码中以删除空格的内容。尝试

```
var1=${var1//[[:space:]]} 
```

在获得 var1 是输入变量名的值之后

# facebook-like - 行/不同 - 相同的数字？

> ID：13028442
> 
> 赞同：1
> 
> 时间：2012-10-23T10:30:17.127
> 
> 标签：facebook-like

我们对我们的乐队 Facebook 页面进行了粉丝研究。

大约 6 个月，新的粉丝正在通过那里的 LIKE 按钮添加，但据此几乎有相同数量的不同，因此它对页面上的总喜欢有影响，它仍然是大约相同的数值（大约 13.045 或更少/更多）。今天我们收到了粉丝的反馈，他们不知道为什么他们仍然没有被计入Like按钮，所以他们必须再次点击它。

设置有什么问题或者我们该如何处理？

提前感谢您的帮助！

# asp.net - 如何将asp.net标签文本居中对齐

> ID：13028443
> 
> 赞同：3
> 
> 时间：2012-10-23T10:30:26.987
> 
> 标签：asp.net, css

我在文本框之前的 ASP.NET 中的 div 中有一个标签，但我不确定如何将我的 asp.net 标签居中对齐，

```
 <div style="float: left; width: 65%;">
        <asp:Label ID="lba" CssClass="aa" runat="server" Text="aaa" />
    </div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T10:34:38.020

在`div`元素中添加样式`text-align: center`以使文本居中

`<div style="float: left; width: 65%; text-align: center;">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:45:51.083

```
<div style="float: left; width: 65%; text-align: center;">
      <asp:Label ID="lba" CssClass="aa" runat="server" Text="aaa" />
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:22:32.673

```
<div style="text-align:center; width:100%;"> 
  <asp:Lable ID="lba" style="margin:0 auto;" CssClass="aa" runat="server"/>
</div> 
```

你也可以试试 style="margin:0 auto;" 将标签和宽度 100% 用于 parend div。

# mongodb - 在 mongodb 服务器前使用 memcache

> ID：13028448
> 
> 赞同：1
> 
> 时间：2012-10-23T10:30:51.753
> 
> 标签：mongodb, memcached

我试图了解 mongo 的内部缓存是如何工作的，以及它是否确实消除了使用 memcache。我们的数据库大小约为 200G，索引适合内存，但索引后服务器上没有多少可用内存。

我的一位同事说 mongo 的内部缓存将与 memcache 一样快，因此无需使用 memcache 引入另一个级别的复杂性。

我脑海中的场景是，当我们从 db 读取数据时，它保存在 memcache 中，下次直接从缓存中读取而不是返回到 db 服务器。如果数据发生更改并需要保存/更新，则在 memcache 服务器和数据库服务器上完成。

我一直在读这个，但还不能说服自己。因此，如果有人能对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:11:00.100

首先，缓存存储不同于数据库。因此，与 Memcache 相比，MongoDB 和 SQL 在用途和用途上有所不同。

Memcache 非常擅长降低查询的工作集大小。例如：想象一个带有子选择和`CASE`语句的巨大聚合查询以及 SQL 中没有的东西（想想你能想到的最复杂的查询），一直实时执行此查询可能会导致计算机“抖动”（而不是提到客户端的问题）。

但是，众所周知，您只需将此查询汇总到另一个集合/表即可立即更快。memcache 的真正速度来自于它是一个内存键值存储的事实。这就是 MongoDB 可能会在速度上失败的地方，因为它不是内存存储的，它是内存映射但不存储的。

MongoDB 不进行自我缓存，只要查询是“热的”并且在 LRU（这是您的工作集所在）中，您不应该注意到响应时间有太大差异。确保查询“热”的一个好方法是运行它。有些人有一个他们最大的查询脚本，他们运行这些脚本来预热缓存。

正如我所说，memcache 是一个缓存层，这就是为什么：

> 如果数据发生更改并需要保存/更新，则在 memcache 服务器和数据库服务器上完成。

让我死在里面。许多确实模糊了数据库和缓存层之间的界限。

# xmpp - Openfire 向 smack 发送空的（没有标记 attr）jabber:x:delay 扩展

> ID：13028449
> 
> 赞同：1
> 
> 时间：2012-10-23T10:30:55.630
> 
> 标签：xmpp, openfire, smack

我从 openfire 服务器收到离线消息，但它包含空的 jabber:x:delay 扩展名。

我收到的消息是：

```
<message id="qU7N8-64" to="ac1@server.jj.ru" from="ac2@server.jj.ru/4847791" type="chat">
      <body>test message</body>
      <delay xmlns="urn:xmpp:delay"></delay>
      <x xmlns="jabber:x:delay"></x>
</message> 
```

我收到带有 smack 库的这条消息。

但是当我用 Miranda IM 连接到 openfire 时，openfire 会发送扩展 jabber:x:delay 和数据。

为什么 openfire 只发送空的 jabber:x:delay 到 smack 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T12:28:24.213

连接后添加此行。

```
ProviderManager.getInstance()addExtensionProvider("x","jabber:x:delay", new DelayInformationProvider()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:29:50.370

Openfire 没有做任何不同的事情，因为它不知道（或关心）连接的客户端。您显示的数据包非常特殊，因为它包含延迟交付的旧版本和当前版本，但两者都缺少必需的属性。

尝试使用 VM 参数**-Dsmack.debugEnabled=true**设置运行。然后检查传入的**原始**数据包的实际消息内容。最有可能发生两件事之一。

1.  时间丢失了，所以 Miranda 通过填充一些默认值来补偿它，比如当前日期。
2.  时间格式不符合规范，因此 Smack 中的解析器将其省略。

# environment-variables - TCL如何打印所有环境变量？

> ID：13028456
> 
> 赞同：8
> 
> 时间：2012-10-23T10:31:20.563
> 
> 标签：environment-variables, tcl

在 TCL 中，如何使用单行命令打印所有环境变量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T10:38:52.773

有一个名为 env 的数组存储所有环境变量。所以你可以简单地这样做：

```
puts [array get env] 
```

或者干脆

```
parray env 
```

# tsql - TSQL 在 IN 内为 null 的情况下返回所有记录

> ID：13028462
> 
> 赞同：0
> 
> 时间：2012-10-23T10:31:34.990
> 
> 标签：tsql

如果不为空，我想按@campId 过滤，如果为空，我想全部返回

这可以编译但不能按预期工作：

```
 declare @campId int
 select * 
 from cli 
 where 
    cu in (
        CASE @campId 
          when null then (select id from [dbo].[camp]) 
          else @campId 
        end) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:36:53.193

如果 cu 从不为空

```
where cu = isnull(@campid, cu) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:37:19.747

尝试这个：

```
select * 
from cli
where
   cu in (select  isnull(@campId, id) from [dbo].[camp]) 
```

这利用了这样一个事实，即从营地中选择将返回@campId，如果它不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:36:41.790

为什么不简单地使用`IF`语句？

```
DECLARE @campId AS INT

IF (@campId IS NULL) BEGIN
      SELECT [Column1], [Column2], ...
      FROM [dbo].[cli] AS C1
        INNER JOIN [dbo].[Camp] AS C2 ON C2.[Id] = C1.[Cu]  
END
ELSE BEGIN
      SELECT [Column1], [Column2], ...
      FROM [dbo].[cli] AS
      WHERE [Cu] = @camp    
END 
```

# c++ - 正则表达式过滤字符串

> ID：13028463
> 
> 赞同：1
> 
> 时间：2012-10-23T10:31:38.860
> 
> 标签：c++, regex, string, pattern-matching

我需要根据两个要求过滤字符串

1) 他们必须以“city_date”开头

2）他们不应该在字符串中的任何地方都有“metro”。

这需要在一次检查中完成。

一开始我知道它应该是这样的，但不知道用“metro”消除字符串

```
string pattern = "city_date_" 
```

**补充：**我需要将正则表达式用于 SQL LIKE 语句。因此我需要它在一个字符串中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:37:18.027

使用[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)（我不知道你的正则表达式库是否支持这一点）

```
string pattern = "^city_date(?!.*metro)" 
```

我还在开头添加了一个锚点`^`，它将匹配字符串的开头。

`(?!.*metro)`如果前面某处有字符串“metro”，则否定前瞻断言将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:45:28.327

正则表达式通常比直接比较昂贵得多。如果直接比较可以轻松表达需求，请使用它们。这个问题不需要正则表达式的开销。只需编写代码：

```
std::string str = /* whatever */
const std::string head = "city_date";
const std::string exclude = "metro";
if (str.compare(head, 0, head.size) == 0 && str.find(exclude) == std::string::npos) {
    // process valid string
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:25:32.680

通过使用 javascript

```
input="contains the string your matching"

var pattern=/^city_date/g;
if(pattern.test(input))  // to match city_data at the begining
{
var patt=/metro/g;
if(patt.test(input)) return "false";  
else return input; //matched string without metro
}
else
return "false"; //unable to match city_data 
```

# javascript - 谷歌地图api添加自定义图标

> ID：13028470
> 
> 赞同：0
> 
> 时间：2012-10-23T10:32:07.617
> 
> 标签：javascript, api, google-maps

有点奇怪 - 我在我正在处理的网站上为联系页面创建了一个谷歌地图区域。一切正常，等等。我今天回去更改页面上的更多内容，图标已完全消失。地图仍然生成并显示正常 - 只是缺少图标。我的 img 路径仍然正确，没有其他任何改变。我似乎隐约记得在原始构建期间发生了这种情况，但它可能已经修复了。有没有其他人遇到过类似的事情？

我的地图 JS 在这里 - 当我故意更改为不存在或无效的 var 时，地图不会生成，所以我不完全确定这是此代码的错误。

任何帮助将不胜感激。谢谢，

```
 <script type="text/javascript">
    function initialize() {
        var latlng = new google.maps.LatLng(51.865151,-2.234739);
        var settings = {
            zoom: 16,
            center: latlng,
            mapTypeControl: true,
            scrollwheel: false,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
    var companyLogo = new google.maps.MarkerImage('img/gmap-icon.png',
    new google.maps.Size(100,50),
    new google.maps.Point(0,0),
    new google.maps.Point(50,50)
);
      var companyPos = new google.maps.LatLng(51.865151,-2.234739);
      var companyMarker = new google.maps.Marker({
    position: companyPos,
    map: map,
    icon: companyLogo,
    title:"10 Yetis HQ"
});

    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:40:03.440

我遇到了类似的情况，尝试将图标路径直接更改为物理路径

```
Icon: "images/greymarker.png" 
```

否则你甚至可以使用

```
companyMarker.setIcon("images/bluedot.png"); 
```

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:45:28.360

我认为您的浏览器缓存有问题。每次都清除缓存以进行更改，您将看到混合版本的更改。

此外，因为您使用的是 javascript，所以大多数路径都不是相对的。尝试使用绝对网址。例如：

```
var companyLogo = new google.maps.MarkerImage('/img/gmap-icon.png', ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:55:16.600

谢谢你们的回答:)不幸的是，它更简单。在我的 dvi 在 DOM 中呈现之前，我的 JS 正在执行——我注意到 Chrome 上的 JS 控制台中有一些错误并对其进行了排序。谢谢你们俩！！

# iphone - 在 ios 静态库中集成谷歌分析的问题

> ID：13028471
> 
> 赞同：4
> 
> 时间：2012-10-23T10:32:14.120
> 
> 标签：iphone

嘿，我想将谷歌分析集成到我的 ios 静态库中，但是当我将`libGoogleAnalytics.a`for `google analytics sdk`ios 放入我自己的静态库中时，我收到了这个错误

```
Libtool build/Debug-iphonesimulator/libHY5Lib.a normal i386
    cd /Hy5Canvas/Lib/HY5Lib
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/libtool -static -arch_only i386 -syslibroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Hy5Canvas/Lib/HY5Lib/build/Debug-iphonesimulator -L/Hy5Canvas/Lib/HY5Lib/HY5Lib -L/Hy5Canvas/Lib/HY5Lib -filelist /Hy5Canvas/Lib/HY5Lib/build/HY5Lib.build/Debug-iphonesimulator/HY5Lib.build/Objects-normal/i386/HY5Lib.LinkFileList -ObjC -framework Foundation -lGoogleAnalytics -o /Hy5Canvas/Lib/HY5Lib/build/Debug-iphonesimulator/libHY5Lib.a 
```

**命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/libtool 失败，退出代码为 1**

请帮助我解决这个问题谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:48:12.783

适用于 iOS 的 Google Analytics SDK 不是为 armv7s 架构构建的。此架构刚刚在 Xcode 4.5（2012 年 9 月 12 日发布）中可用，并且是构建新 iPhone 5 所必需的。请发布包含此架构的新版本 SDK。

参考：[谷歌分析问题](http://code.google.com/p/analytics-issues/issues/detail?id=232)

希望这可以帮助 ：）

# java - java hadoop程序编译出错

> ID：13028475
> 
> 赞同：0
> 
> 时间：2012-10-23T10:32:42.063
> 
> 标签：java, linux, unix, hadoop, compiler-errors

我编写了这个 Java hadoop 程序，它将执行文件的并行索引。该文件是在 eclipse 中创建的

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> { 
     private final static IntWritable zero = new IntWritable(0); 
     private Text word = new Text();
     public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
        String line = value.toString();
        int CountComputers;
        //DataInputStream ConfigFile = new DataInputStream( new FileInputStream("countcomputers.txt"));
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // путь к файлу
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String result = br.readLine(); // читаем как строку
        CountComputers = Integer.parseInt(result); // переводим строку в число
        //CountComputers=ConfigFile.readInt();
        in.close();
        fstream.close();
        ArrayList<String> paths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          paths.add(tokenizer.nextToken());
        }
        String[] ConcatPaths= new String[CountComputers];
        int NumberOfElementConcatPaths=0;
        if (paths.size()%CountComputers==0)
        {
            for (int i=0; i<CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*paths.size()/CountComputers+j);
                }
            }
        }
        else
        {
            NumberOfElementConcatPaths=0;
            for (int i=0; i<paths.size()%CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers+1;              
                for (int j=1; j<paths.size()/CountComputers+1; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*(paths.size()/CountComputers+1)+j);
                }           
            }
            for (int k=paths.size()%CountComputers; k<CountComputers; k++)
            {
                ConcatPaths[k]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;                
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[k]+="\n"+paths.get((k-paths.size()%CountComputers)*paths.size()/CountComputers+paths.size()%CountComputers*(paths.size()/CountComputers+1)+j);
                }                   
            }
        }
        //CountComputers=ConfigFile.readInt();
        for (int i=0; i<ConcatPaths.length; i++)
        {
            word.set(ConcatPaths[i]);
            output.collect(word, zero);
        }
     }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, LongWritable> { 
    public native long Traveser(String Path);
    public native void Configure(String Path);
    public void reduce(Text key, IntWritable value, OutputCollector<Text, LongWritable> output, Reporter reporter) throws IOException { 
        long count;
        String line = key.toString();
        ArrayList<String> ProcessedPaths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          ProcessedPaths.add(tokenizer.nextToken());
        }       
        Configure("/etc/nsindexer.conf");
        for (int i=0; i<ProcessedPaths.size(); i++)
        {
            count=Traveser(ProcessedPaths.get(i));
        }
        output.collect(key, new LongWritable(count));
      }
    static
    {
        System.loadLibrary("nativelib");
    } 
}

public static void main(String[] args) throws Exception { 
      JobConf conf = new JobConf(ParallelIndexation.class); 
      conf.setJobName("parallelindexation");
      conf.setOutputKeyClass(Text.class);
      conf.setOutputValueClass(LongWritable.class);
      conf.setMapperClass(Map.class);
      conf.setCombinerClass(Reduce.class);
      conf.setReducerClass(Reduce.class);
      conf.setInputFormat(TextInputFormat.class);
      conf.setOutputFormat(TextOutputFormat.class);
      FileInputFormat.setInputPaths(conf, new Path(args[0]));
      FileOutputFormat.setOutputPath(conf, new Path(args[1]));
      JobClient.runJob(conf);
  } 
} 
```

通过团队在 Nexenta Illumos 操作系统 (solaris) 中编译的结果

```
javac -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar -d folder/classes folder/src/ParallelIndexation.java, 
```

收到以下错误

```
folder/src/ParallelIndexation.java:81: error: Reduce is not abstract and does not override abstract method reduce(Text,Iterator<IntWritable>,OutputCollector<Text,LongWritable>,Reporter) in Reducer
    public static class Reduce extends MapReduceBase implements
                  ^
1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:46:26.917

它想要`Iterator<IntWritable>`作为第二个参数`reduce`而不是`IntWritable`它自己

# python - Nginx 性能测量

> ID：13028477
> 
> 赞同：0
> 
> 时间：2012-10-23T10:32:47.577
> 
> 标签：python, performance, nginx, zeromq, bottle

我想测试 nginx 可以承受的负载。为此，我必须向它可以同时处理的 nginx 发出大量请求。有没有办法做到这一点？

我想用python写脚本，我也可以用zeromq来做这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:41:02.733

为此，请使用[几个现有程序](http://en.wikipedia.org/wiki/Web_server_benchmarking#Tools_for_benchmarking)之一。无需在这里重新发明轮子。

# ios - UIWebView 中的进度条

> ID：13028478
> 
> 赞同：2
> 
> 时间：2012-10-23T10:32:50.310
> 
> 标签：ios, cocoa, uiwebview, progress-bar, nsurlconnection

如何在`UIWebView?` Few Observations 中确定进度： 1\. 要确定下载内容的进度，我们需要创建一个`NSURLConnection`对象并两次获取数据：一次使用 the `UIWebView`，另`NSURLConnection` 一次使用 2\. 如果我们只获取一次数据`NSURLConnection`并加载 webview该数据文本/html然后该数据呈现不佳

困难：a）由于两次获取数据会大大减慢该过程，因此使用私有 api 是否可行（appstore 安全？）像这里给出的那样：[https ://github.com/petr-inmite/imtwebview](https://github.com/petr-inmite/imtwebview)

b）如果我们不能，那么我们如何显示进度条？

c）还会使用镜像加载`NSURLConnection`进度异步下载数据吗？`UIWebView`两次获取数据的性能会有多糟糕？

有一些像 safari、dolphin 这样的浏览器正在显示进度条......关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:01:57.483

使用它的`UIWebView`代表。首先将你的 webview 的代表设置为`self`然后使用这些方法。在此之前创建并添加一个微调器到视图中，它应该指示 uiwebview 的进度，例如`UIActivityIndicatorView *spinner`

```
- (void)webViewDidStartLoad:(UIWebView *)localWebView {

    [ spinner performSelectorInBackground: @selector(startAnimating) withObject: nil];
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

    [ spinner performSelectorInBackground: @selector(stopAnimating) withObject: nil];

}

- (void)webViewDidFinishLoad:(UIWebView *)localWebView {

    [ spinner performSelectorInBackground: @selector(stopAnimating) withObject: nil];
} 
```

# javascript - 从 javascript 获取 iframe 高度

> ID：13028479
> 
> 赞同：0
> 
> 时间：2012-10-23T10:32:51.243
> 
> 标签：javascript, html, iframe, plugins

我在网页中嵌入了一个 iframe 标签，类似于

```
 <iframe id="xyz" height="900" width="800" src="www.pqr.com></iframe>

I'm trying to get the height and width of the iframe using:
 function getDimensions()
{
    var iframelist = document.getElementsByTagName("iframe");
    for(var i=0;i<iframelist.length;i++)
    {
     if(iframelist[i].id == "xyz")
    {
      var width = iframelist[i].height;
      var height = iframelist[i].width;
      var src = iframelist[i].src;
    }
    }
} 
```

我得到 0 的宽度和高度值，但 src 得到了正确的值。

我使用 NPN_Evaluate() 函数将上述 javascript 函数定义插入到网页中，并再次使用 NPN_evaluate 调用该函数。

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:39:55.960

你不能用这样的东西..

```
var iframelist = document.getElementById("xyz");
alert(iframelist.offsetHeight​);​ 
```

[http://jsfiddle.net/dQjqR/](http://jsfiddle.net/dQjqR/)

或者您是否尝试从 iframe 中访问尺寸？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:43:00.473

这似乎在这个演示中工作，你在哪个浏览器上测试它？

[演示](http://cssdeck.com/labs/collab/ouitocy3/0)

# java - 类图混淆（琐碎）

> ID：13028481
> 
> 赞同：1
> 
> 时间：2012-10-23T10:33:01.330
> 
> 标签：java, uml, modeling, class-diagram

我认为这相对简单，但我只是很困惑，因为我是新的类图。

我即将创建一个关于管理麦当劳员工类型的程序（用 Java 编写）。因此，考虑对对象进行建模。

为简单起见，麦当劳只有两种类型的员工，“主管”和“船员”，两者都按月领取工资。此外，他们都根据情况获得不同类型的奖金（当然将来可能会改变）

所以，我通过创建一个具有属性的超类“Employee”开始建模

```
name
empId
salary 
```

（方法......等）

顺便说一句，我把“CrewMember”和“Superviser”做成了它的子类。

所以我的困惑是，**如果我以这种方式建模我的对象，我的“CrewMember”和“Superviser”类的实例怎么可能彼此不同？**

请纠正我应该如何为我的课程建模。为了使班级区分，我还考虑在每个“船员”和“主管”上添加一种奖金，但我认为这不会灵活，如果将来奖金和奖金类型会发生变化。所以，我现在很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:35:30.480

主管和船员有什么区别？

至少我认为您需要在这两个班级之间建立关联，以模拟主管是一名或多名船员的老板。

如果有什么是主管做的，而船员却没有做，那么你应该在主管类中建模。

如果主管和船员之间没有区别，那么你不需要这两个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:41:00.927

您好 :) 这个答案发布在我的 iPhone 上，但我稍后会更新！当您像员工一样创建超级类时，您只需在类图中通过一个从超级类到两个子类的简单箭头来显示它 - 我稍后会找到一个链接，请注意两个类是否无关紧要看起来相同，但是当图表完成时应该清楚！通常你在类图之前创建一个域模型来显示这些类型的继承

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:10:47.947

要将继承的概念用于泛化和特化案例，应该有一些动机来泛化/特化实体之间的差异。这称为鉴别器 - 它是一些不同的特征（行为或结构）。所以需要有一些只适用于上级/机组成员的功能，一些关联或属性。否则，在超类“Employee”中为“employeeType”建模就足够了。请注意，在大多数开发环境中添加继承的成本很高。当您尝试从模型到实现时，将会有额外的源代码、额外的文档、额外的表格、文件以及其他内容。

# asp.net-ajax - 模态弹出扩展器需要点击 2 次才能触发

> ID：13028484
> 
> 赞同：0
> 
> 时间：2012-10-23T10:33:09.917
> 
> 标签：asp.net-ajax, modalpopupextender, ajaxcontroltoolkit

我在这个论坛和其他论坛中查看了各种类似的问题，但没有找到答案。

我有几个带有相应面板的 modalpopup 扩展器。我在页面上没有更新面板或任何其他 ajax 控件。页面显示 OK（加载时面板不可见）。

问题是第一次尝试打开弹出窗口。单击任何目标按钮会导致在第二次单击之前不会出现弹出窗口。在此初始故障之后，单击任何按钮一次将使相应的面板根据需要显示。

是什么导致了这个问题。

我的代码的精简版......

```
<asp:Button ID="but_Pn1Opn" runat="server" Text="Panel One" />
<asp:Button ID="but_Pn2Opn" runat="server" Text="Panel Two" />

<asp:ModalPopupExtender ID="mpx_Pn1" runat="server" OkControlID="but_Pn1Cls" 
BehaviourID="Pn1" DynamicServicePath="" Enabled="true" PopupControlID="Pn1"
TargetControlID="but_Pn1Opn" BackgroundCssClass="modalBackground" />
<asp:Panel ID="Pn1" runat="server" Width="600px" CssClass="modalPopup" Style="display:none">
<div class="box">
<table>
<tr><th>Panel One Title</th></tr>
<tr><td>Panel One Content</td></tr>
<tr><td><asp:Button ID="but_Pn1Cls" runat="server" Text="Close" /></td></tr>
</table>
</div>
</asp:Panel>

<asp:ModalPopupExtender ID="mpx_Pn2" runat="server" OkControlID="but_Pn2Cls" 
BehaviourID="Pn2" DynamicServicePath="" Enabled="true" PopupControlID="Pn2"
TargetControlID="but_Pn2Opn" BackgroundCssClass="modalBackground" />
<asp:Panel ID="Pn2" runat="server" Width="600px" CssClass="modalPopup" Style="display:none">
<div class="box">
<table>
<tr><th>Panel Two Title</th></tr>
<tr><td>Panel Two Content</td></tr>
<tr><td><asp:Button ID="but_Pn2Cls" runat="server" Text="Close" /></td></tr>
</table>
</div>
</asp:Panel> 
```

我的实际页面有 7 个这样的面板。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:49:50.983

我复制了你的代码并运行了它。你确实有一个脚本管理器，对吗？此外，由于出现以下错误，我删除了 BehaviourID 属性：

“AjaxControlToolkit.ModalPopupExtender”没有名为“BehaviourID”的公共属性

我认为这是由于工具包的不同版本造成的。此属性用于表示与事件关联的 Javascript 函数。尝试删除它，看看会发生什么。

# go - Go中函数重载的替代方案？

> ID：13028486
> 
> 赞同：18
> 
> 时间：2012-10-23T10:33:13.540
> 
> 标签：go, overloading

是否可以像使用 Golang 的 C# 中的函数重载或可选参数一样以类似的方式工作？或者也许是另一种方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T09:38:24.160

Go 中可选参数的惯用答案是包装函数：

```
func do(a, b, c int) {
    // ...
}

func doSimply(a, b) {
    do(a, b, 42)
} 
```

函数重载被有意遗漏了，因为它使代码难以阅读。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T11:00:34.613

既不直接支持函数重载，也不支持可选参数。您可以围绕它们构建自己的参数结构。我的意思是这样（未经测试，可能无法正常工作......）编辑：[现在测试......](http://play.golang.org/p/Vp05hDKqBr)

```
package main

    import "fmt"

    func main() {
        args:=NewMyArgs("a","b") // filename is by default "c"
        args.SetFileName("k")

        ret := Compresser(args)
        fmt.Println(ret)
    }

    func Compresser(args *MyArgs) string {
        return args.dstFilePath + args.srcFilePath + args.fileName 
    }

    // a struct with your arguments
    type MyArgs struct 
    {
        dstFilePath, srcFilePath, fileName string 
    }

   // a "constructor" func that gives default values to args 
    func NewMyArgs(dstFilePath string, srcFilePath string) *MyArgs {
        return &MyArgs{
              dstFilePath: dstFilePath, 
              srcFilePath:srcFilePath, 
              fileName :"c"}
    }

    func (a *MyArgs) SetFileName(value string){
      a.fileName=value;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-11T02:14:31.353

[这里](http://changelog.ca/log/2015/01/30/golang)有一些使用可变参数的提示，例如：

```
sm1 := Sum(1, 2, 3, 4) // = 1 + 2 + 3 + 4 = 10
sm2 := Sum(1, 2) // = 1 + 2 = 3
sm3 := Sum(7, 1, -2, 0, 18) // = 7 + 1 + -2 + 0 + 18 = 24
sm4 := Sum() // = 0

func Sum(numbers ...int) int {    
    n := 0    
    for _,number := range numbers {
        n += number
    }    
    return n
} 
```

或者`...interface{}`对于任何类型：

```
Ul("apple", 7.2, "BANANA", 5, "cHeRy")

func Ul(things ...interface{}) {
  fmt.Println("<ul>")    
  for _,it := range things {
    fmt.Printf("    <li>%v</li>\n", it)
  }    
  fmt.Println("</ul>")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T13:46:12.667

我有时使用具有不同参数的新方法构造对象的方法是具有“风味”伪类型。你可以在 Go Playground 上试试[https://play.golang.org/p/5To5AcY-MRe](https://play.golang.org/p/5To5AcY-MRe)

```
package main

import "fmt"

type flavorA struct{}
type flavorB struct{}

var FlavorA = flavorA{}
var FlavorB = flavorB{}

type Something struct {
    i int
    f float64
}

func (flavor flavorA) NewSomething(i int) *Something {
    return &Something{i:i, f:0.0}
}

func (flavor flavorB) NewSomething(f float64) *Something {
    return &Something{i:0, f:f}
}

func main() {
    fmt.Println(FlavorA.NewSomething(1), FlavorB.NewSomething(2))
} 
```

# playframework-2.0 - 播放框架：Form withGlobalError

> ID：13028487
> 
> 赞同：0
> 
> 时间：2012-10-23T10:33:14.823
> 
> 标签：playframework-2.0

我在使用表单助手时遇到了问题。我想在将表单传递给视图之前向表单添加一个错误，但出现以下错误：

```
value withGlobalError is not a member of play.api.data.Form[(String, String)] 
```

我的代码如下：

```
def loginForm = Form(
            tuple (
              "email" -> nonEmptyText,
              "password" -> nonEmptyText
            )
    )   

def asignIn = Action {
      implicit request => 
        loginForm.bindFromRequest.fold (
              formWithErrors => Ok(views.html.login(formWithErrors.withGlobalError("Invalid username or password")),
              user => authenticationStep(user)(request)
      )
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:44:55.677

电子邮件和密码的验证应以如下形式完成：

```
val loginForm = Form(
  tuple(
    "email" -> nonEmptyText,
    "password" -> text
  ) verifying("Invalid user name or password", fields => fields match { 
      case (email, pwd) => User.authenticate(email,pwd).isDefined 
  })
) 
```

# php - 如何为 Phpcloud 配置 Eclipse

> ID：13028488
> 
> 赞同：1
> 
> 时间：2012-10-23T10:33:20.107
> 
> 标签：php, eclipse, php-ide

我正在寻找使用 PHPcloud 逐步配置 Eclipse 的指南。phpcloud 有一个涵盖zend studio、Netbeans 和PHP Storm 的快速入门指南。

我正在为 PHP 开发人员使用 Eclipse，版本：3.0.2

[PHP 可以： https](https://my.phpcloud.com) ://my.phpcloud.com

# jsf-2 - JSF 和 Primefaces：找不到组件 ID

> ID：13028489
> 
> 赞同：0
> 
> 时间：2012-10-23T10:33:31.057
> 
> 标签：jsf-2, primefaces

我一次又一次地收到同样的异常。*比较没有for="#{choiceRadio.clientId}"*的异常和 hmtl-output似乎告诉我绑定有效。但事实并非如此，我觉得我错过了一些巨大的东西。

编码：

```
 <p:selectOneRadio binding="#{choiceRadio}" value="#" layout="custom">
        <f:selectItems value="#" />
    </p:selectOneRadio>

    <h:panelGrid columns="1">
        <ui:repeat var='choice' value='#{item.items3}'>
            <p:radioButton for="#{choiceRadio.clientId}" />#{choice.name}
        </ui:repeat>
    </h:panelGrid>

</h:form> 
```

例外：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Cannot find component 'j_idt34:0:j_idt36:2:j_idt46:j_idt82' in view.
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
root cause

javax.faces.FacesException: Cannot find component 'j_idt34:0:j_idt36:2:j_idt46:j_idt82' in view.
    org.primefaces.component.radiobutton.RadioButtonRenderer.findSelectOneRadio(RadioButtonRenderer.java:126)
    org.primefaces.component.radiobutton.RadioButtonRenderer.encodeEnd(RadioButtonRenderer.java:35)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:104)
    com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:523)
    com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:984)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    org.primefaces.component.lightbox.LightBoxRenderer.encodeMarkup(LightBoxRenderer.java:52)
    org.primefaces.component.lightbox.LightBoxRenderer.encodeEnd(LightBoxRenderer.java:32)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:59)
    org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
    org.primefaces.component.outputpanel.OutputPanelRenderer.encodeEnd(OutputPanelRenderer.java:46)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:104)
    com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:523)
    com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:984)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:55)
    org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
    org.primefaces.component.outputpanel.OutputPanelRenderer.encodeEnd(OutputPanelRenderer.java:46)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:104)
    com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:523)
    com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:984)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
note The full stack trace of the root cause is available in the JBoss Web/7.0.13.Final logs.

JBoss Web/7.0.13.Final 
```

没有 ui:repeat 我没有任何异常，但没有 ui:repeat 我也没有任何内容：

```
 <p:selectOneRadio  id="myRadio" value="#{cartBean.selectedChoice}" layout="custom">
        <f:selectItems value="#{item.items3}" />
    </p:selectOneRadio>

    <h:panelGrid columns="1">

            <p:radioButton for="myRadio" value="hh" itemIndex="0"/>

    </h:panelGrid>

</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:38:00.573

的`for`属性`radioButton`必须是`id`它`selectOneRadio`所指的。

添加`id`到您的`selectOneRadio`并在按钮中引用它：

```
<p:selectOneRadio id="myRadio" binding="#{choiceRadio}" value="#" layout="custom">
    <f:selectItems value="#" />
</p:selectOneRadio>

<h:panelGrid columns="1">
    <ui:repeat var='choice' value='#{item.items3}'>
        <p:radioButton for="myRadio" />#{choice.name}
    </ui:repeat>
</h:panelGrid> 
```

**编辑**

您可能需要在 element 之前添加所有`NamingContainer`s的 id ，例如：。`ViewRoot``id``for="form_id:myRadio"`

如果不确定元素的确切绝对值`id`是什么，请在 FireBug (Firefox) 或开发人员工具 (Chrome) 中查看它，或`id`在 html 输出源中搜索给定的（在本例中为“myRadio”）并跳过可能的数字-之间。

所以这

`id="iterateCategories:0:iterateItems:2:lightForm:radioForm"`

会成为

`iterateCategories:iterateItems:lightForm:radioForm`

作为你的绝对身份。

# ios - NSLocalizedStringFromTableInBundle ：没有获取键的值

> ID：13028500
> 
> 赞同：3
> 
> 时间：2012-10-23T10:34:18.283
> 
> 标签：ios, iphone, nslocalizedstring, localizable.strings

我无法从`values`.`keys``InfoPlist`

```
label.text = NSLocalizedStringFromTableInBundle(@"keyone", 
                                                nil, 
                                                AppDelegateObj.langBundle, nil)); 
```

在`InfoPlist.strings`里面有一个值

```
"keyone" = "value one"; 
```

当我运行我的应用程序时，它显示`UILabel`为**keyone**

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:44:50.547

试试这个：

```
label.text = NSLocalizedStringFromTableInBundle(@"keyone", 
                 @"InfoPlist", 
                 AppDelegateObj.langBundle, nil)); 
```

# html - 如何阻止文本区域在两个不同版本的 chrome 上看起来不同？

> ID：13028502
> 
> 赞同：0
> 
> 时间：2012-10-23T10:34:20.690
> 
> 标签：html, css, internet-explorer, google-chrome, input

跨浏览器测试在最好的时候让我很头疼，但是这个真的让我很难过。**我在谷歌浏览器（和 Mac）上**开发了我的网站，最近更新了搜索功能并重新设计了搜索输入区域的样式。

我注意到，当我在 Internet Explorer 中进行跨浏览器检查时，网站右上角搜索输入中的文本与 chrome 上的定位方式不同。

在我的 Chrome 版本中，文本距离框的左边缘 10 像素，所以它很好地坐在那里。然而，在 Internet Explorer 上，它正好在盒子的边缘。

**这就是问题所在 - 当我在PC 上**的 Chrome 中打开我的网站时，输入中的文本的定位方式与它在 IE 中显示的方式相同。

我认为这是因为我 Mac 上的 Chrome 与 PC 上的版本不同。任何人都可以帮我解决这个问题，以便文本在这些浏览器中很好地放置吗？

你可以在这里查看我的网站[http://tinyurl.com/8uaajmz](http://tinyurl.com/8uaajmz)

提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:56:41.887

#search_bar_2 的 CSS 规则在名称的开头有一个 _，将其更改为：

```
text-indent:10px !important; 
```

你很好。不是跨浏览器问题，而是错字问题。

# javascript - 使用 javascript 生成分组复选框 JQuery mobile

> ID：13028511
> 
> 赞同：1
> 
> 时间：2012-10-23T10:34:51.673
> 
> 标签：javascript, jquery, jquery-mobile

请检查此代码：http: [//jsfiddle.net/Hce8y/](http://jsfiddle.net/Hce8y/)

我正在尝试生成分组复选框列表：

```
function ItemCode_Changed(sender, onload) {
$('#category-contianer-id-3').append(
        '<div data-role="fieldcontain">'
             + '<fieldset data-role="controlgroup">'
                + '<legend>Choose as many:</legend>'
                + '<input type="checkbox" name="checkbox-1a" id="checkbox-1a" class="custom" />'
                + '<label for="checkbox-1a">Cheetos</label>'
                + '<input type="checkbox" name="checkbox-2a" id="checkbox-2a" class="custom" />'
                + '<label for="checkbox-2a">Doritos</label>'                    
                + '<input type="checkbox" name="checkbox-3a" id="checkbox-3a" class="custom" />'
                + '<label for="checkbox-3a">Fritos</label>'
                + '<input type="checkbox" name="checkbox-4a" id="checkbox-4a" class="custom" />'
                + '<label for="checkbox-4a">Sun Chips</label>'
            + '</fieldset>'
        + '</div>');

$('#category-contianer-id-3 [data-role="fieldcontain"]').fieldcontain();
    $('#category-contianer-id-3 [data-role="fieldcontain"]').fieldcontain('refresh');

    $("#category-contianer-id-3 input[type='checkbox']").checkboxradio();
$("#category-contianer-id-3 input[type='checkbox']").checkboxradio('refresh');
//$('#my-home').page(); 
```

}

更改输入中的文本时，但结果看起来不像演示。

是否有任何错误，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:57:29.560

嘿，你为什么不把代码放在 HTML 中，当用户点击“Append Stuff”按钮时，div 会显示出来？

```
<div id="category-contianer-id-3" style="display:none">
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <legend>Choose as many:</legend>
        <input type='checkbox' name='checkbox-1a' id='checkbox-1a' class='custom' />
        <label for='checkbox-1a'>Cheetos</label>
       <input type='checkbox' name='checkbox-2a' id='checkbox-2a' class='custom' />
        <label for='checkbox-2a'>Doritos</label>
    </fieldset>
</div> 
```

并显示：

```
 $('#category-contianer-id-3').show(); 
```

查看我创建的演示，也许这会对您有所帮助。 [http://jsfiddle.net/ZaZSa/1/](http://jsfiddle.net/ZaZSa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:10:12.560

您必须调用这两种方法：

```
$('input[type=checkbox]').checkboxradio();
$('fieldset').controlgroup(); 
```

在更改其子元素后调用 fieldcontain() 不会改变任何内容。至少我看不到任何差异。

# java - 从几个数字中减去最小的数字

> ID：13028512
> 
> 赞同：6
> 
> 时间：2012-10-23T10:34:54.677
> 
> 标签：java, algorithm, math

我有两个号码。我希望从两个值中减去较小的数字。

```
x: 1000
y: 200
=> result: x = 800 and y = 0. 
```

以下对我来说有点难看，那么有没有更好的方法可以做到这一点？

```
if (x <= y) {
    y = y - x;
    x = 0
} else {
    x = x - y;
    y = 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T10:39:12.120

这应该这样做：

```
int min = Math.min(x, y);
x -= min;
y -= min; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:39:21.547

您可以执行以下操作：

```
x = x - y;
y = 0;

if(x<0)
{
    y = -x
    x = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T10:43:40.683

作为邓肯答案的补充，如果您只关心减法后不会为零的值，则可以使用此代码段：

```
int non_zero = Math.abs(x - y); // unless the two are equal of course 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:40:31.130

*这个怎么样*： -

```
int lower = x < y ? x : y;
x -= lower;
y -= lower; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:43:14.837

```
x=x-y;
y=y-x;
if(x<0)
    x=0;
else
    y=0; 
```

# java - 如何覆盖对象的ArrayList的ToString方法？

> ID：13028525
> 
> 赞同：4
> 
> 时间：2012-10-23T10:35:39.750
> 
> 标签：java, string, arraylist, overriding, tostring

```
class Person {
  public String firstname;
  public String lastname;
}

Person p1 = new Person("Jim","Green");
Person p2 = new Person("Tony","White");

ArrayList<Person> people = new ArrayList<Person>();

people.add(p1);
people.add(p2);

System.out.println(people.toString()); 
```

我希望输出是`[Jim,Tony]`，如果存在这样的方法，那么覆盖该`ToString`方法的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:38:27.683

您实际上需要在 Person 类中覆盖 toString() ，这将返回名字，因为 ArrayList 会自动调用封闭类型的 toString 来打印元素的字符串表示形式。

```
@Override
public String toString() {
    return this.firstname;
} 
```

因此，将上述方法添加到您的 Person 类中，您可能会得到您想要的。

**PS** : - 在旁注中，你不需要做`people.toString()`. 只要这样做`System.out.println(people)`，它就会自动调用for的`toString()`方法`ArrayList`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:40:34.010

您可以在 Person 类上编写一个静态辅助方法：

```
public static String toString(ArrayList<Person> people) {

    Iterator<Person> iter = people.iterator();

    ....

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T10:41:03.497

`toString()`在`Person`类中编写覆盖方法方法。

```
public String toString() {
    return firstname;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:45:29.840

在这种情况下，您必须重写`toString`Person 类的方法，因为 arrayList 只是迭代 Person 类实例。

# facebook-graph-api - FQL 您的语句不可索引，但在控制台中很好

> ID：13028526
> 
> 赞同：1
> 
> 时间：2012-10-23T10:35:42.777
> 
> 标签：facebook-graph-api, facebook-fql

我将此查询用于 FQL：

```
SELECT pid, object_id, caption, like_info, comment_info, src, src_small, src_big, images FROM photo WHERE album_object_id="10151088306597851" ORDER BY like_info DESC 
```

在控制台中工作正常，检查： [https ://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20pid%2C%20object_id%2C%20caption%2C%20like_info%2C%20comment_info %2C%20src%2C%20src_small%2C%20src_big%2C%20images%20FROM%20photo%20WHERE%20album_object_id%3D%2210151088306597851%22%20ORDER%20BY%20like_info%20DESC](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20pid%2C%20object_id%2C%20caption%2C%20like_info%2C%20comment_info%2C%20src%2C%20src_small%2C%20src_big%2C%20images%20FROM%20photo%20WHERE%20album_object_id%3D%2210151088306597851%22%20ORDER%20BY%20like_info%20DESC)

[但是，当我将 Javascript SDK 与 FB.api() 方法一起使用时，它会失败并显示错误 604“您的语句不可索引。WHERE 子句必须包含可索引列。此类列在从http://](http://developers.facebook.com/docs/reference/fql)链接的表中标有 * [developer.facebook.com/docs/reference/fql](http://developers.facebook.com/docs/reference/fql) “但根据表格“照片”“album_object_id”的文档是可索引的..

这是我的 Javascript 代码：

```
 if (album_object_id) {
        var query = 'SELECT pid, object_id, caption, like_info, comment_info, src, src_small, src_big, images FROM photo WHERE album_object_id="' + album_object_id + '" ORDER BY like_info DESC';
        //console.log(query);return;
        FB.api('/fql?q=' + encodeURI(query), callback);
    } 
```

当我记录查询并将其复制/粘贴到图形 API 控制台时，它工作正常..

有什么线索吗？？

欢呼 Sjoerd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:39:25.427

我认为 encodeURI 在这种语法上引入了一个查询编码问题。以下代码完美运行并返回 82 项：

```
var query = 'SELECT pid, object_id, caption, like_info, comment_info, src, src_small, src_big, images FROM photo WHERE album_object_id="10151088306597851" ORDER BY like_info DESC';

FB.api('/fql', {q: query}, function(r) {
        console.log(r)
    });
} 
```

# jquery - 使用 jquery 暂停和恢复动画

> ID：13028528
> 
> 赞同：3
> 
> 时间：2012-10-23T10:35:43.867
> 
> 标签：jquery, html, jquery-plugins

在我们当前的项目中，我们使用 jquery 部署了各种对象的动画。谁能建议一种暂停和恢复动画的方法。

我们听说过队列，但无法正确暂停和恢复。请建议如何使用队列暂停动画。请注意，我们有多个对象，我们需要在单击按钮时暂停所有动画，然后在另一个按钮上恢复点击。

如果有人可以演示或提供示例，那将是您的好意。（暂停插件不起作用，因为我们在动画之间有一些延迟功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:45:16.927

`stop()`使用该功能可以轻松完成。

**演示：http:** [//jsfiddle.net/6eMQq/](http://jsfiddle.net/6eMQq/)

**代码：**

```
// to animate or continue animation
$('#item').animate({width: '500px'}, 2000);

// to pause the animation
$('#item').stop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:41:35.310

你可以使用 jQuery`animate()`和`stop()`to-do 开始和暂停动画，

`animate`- [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

`stop`- [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

在这里查看 jQuery 演示， [http://jsfiddle.net/muthkum/KP74n/](http://jsfiddle.net/muthkum/KP74n/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T23:03:42.717

```
function animateLoop( $elem ){
    var i = $elem.data("i");
    var ti = 1 - i;
    var startPos = ( 2 * ti * contentWidth ) - contentWidth;
    $elem.css('margin-left', startPos + "px");
    $elem.animate( 
        { 
            'margin-left' :  - contentWidth + "px" },
        {
            duration: ( time * 1000 * ti ),
            easing: 'linear',
            step: function( v, p ){ 
                $elem.data( 'i', i + p.pos * ti ); 
                //console.log( i + p.pos * ti ); 
            },
            complete: function(){ 
                $elem.data( 'i', 0 ); 
                animateLoop( $elem ); 
            } 
        }
    );
};

$content.data('i',0);
animateLoop( $content ); 
```

我关于如何停止和恢复 jquery 动画循环的建议。

# java - 如何停止在 BufferedReader.readline() 上阻止读取？

> ID：13028530
> 
> 赞同：0
> 
> 时间：2012-10-23T10:35:50.283
> 
> 标签：java, multithreading

我有一个小程序，在主线程中，我在控制台中要求用户输入。

```
System.out.print("Alternatively, enter peer's ID to connect:");
InputStreamReader reader = new InputStreamReader(System.in);
BufferedReader bReader = new BufferedReader(reader);
String peerID = bReader.readLine(); 
```

在一个单独的线程中，我从我的套接字的 InputStream 中监听。如果我从这个流中接收到一些东西，我会尝试通过调用来“解锁”readLine，`System.in.close()`而不用等待用户的输入。然后主线程可以继续对从套接字读取或从用户获得的信息进行处理。

不知何故，它似​​乎可以在我的 Mac 上运行，但是如果我在 Windows 上尝试它，单步调试调试器，我发现这些`System.in.close()`块和整个程序都会挂起。

知道为什么以及如何解除封锁`readline()`吗？否则重写逻辑的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:45:34.753

您可以尝试关闭`bReader`，但更合理的方法是在 nio 包中使用可中断 io 并可能在`Console`. 我会尝试使用[Console.read(CharBuffer)](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28java.nio.CharBuffer%29)并中断线程。那“应该”起作用。虽然没有测试...

**更新：**但是[选择器](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/Selector.html)可能更适合您的目的。聆听您的套接字和 System.in，然后对提供输入的那个采取行动？

# drupal - 使用手动 html 表单的 Ubercart 结帐

> ID：13028532
> 
> 赞同：0
> 
> 时间：2012-10-23T10:35:59.673
> 
> 标签：drupal, drupal-7, drupal-modules, ubercart

我基本上是在使用 Ubercart 在 Drupal 7 中创建自己的界面，用于在不同的产品选项中进行选择。我想手动创建一个 html 表单，我将在其中提交代表产品详细信息的帖子变量。

这有可能吗？有这方面的任何文件吗？我希望它足够简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:36:37.340

1.  创建一个自定义模块（让我们称之为 mymodule ）
2.  [使用hook_menu](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)注册一个可以访问您的 html 表单的有效 url

    ```
    $items['mymodule/submit'] = array(
      'page callback' => 'mymodule_submit', 
      'access arguments' => array('access content'), 
      'type' => MENU_CALLBACK,
    ); 
    ```

3.  现在在您的模块中创建函数 mymodule_submit() 并使用 $_POST 变量检查值并采取相应措施。

# php - 比较php中的两个xml文件

> ID：13028536
> 
> 赞同：0
> 
> 时间：2012-10-23T10:36:14.600
> 
> 标签：php, xml, xml-parsing

我想在 PHP 中比较两个 xml 文件，一个文件包含客户数据（customerdata.xml），另一个文件包含用于过滤客户数据的规则（rule.xml），并希望获取过滤后的客户数据（result.xml）

客户数据.xml

```
<customerdata>
<firstname>allen</firstname>
<lastname>peter</lastname>
<age>21</age>
<country>NL</country>
<firstname>alby</firstname>
<lastname>jerry</lastname>
<age>31</age>
<country>IN</country>
<firstname>thomas</firstname>
<lastname>alfred</lastname>
<age>28</age>
<country>NL</country>
<firstname>ajay</firstname>
<lastname>raghav</lastname>
<age>21</age>
<country>IN</country>
</customerdata> 
```

这是客户详细信息的 xml 文件。我想根据另一个 xml 文件（rule.xml）中包含的某些规则过滤这些详细信息

规则.xml

```
<rule>
<ruleoperator>contains</ruleoperator>
<rulevalue>IN</rulevalue>
</rule> 
```

这是我的规则 xml。过滤后我想得到结果为 xml(result.xml)

结果.xml

```
<result>
<firstname>alby</firstname>
<lastname>jerry</lastname>
<age>31</age>
<country>IN</country>
<firstname>ajay</firstname>
<lastname>raghav</lastname>
<age>21</age>
<country>IN</country>
<result> 
```

我不知道如何过滤这个，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:42:08.270

您不能在这里简单地“比较”这两个 XML 文件。您想将第二个规则“应用”到第一个规则以生成第三个。为此，您必须在第一步中阅读所有规则并分析第一个文件以查找匹配项。

我建议尝试[XQUERY](https://stackoverflow.com/questions/2211743/execute-a-xquery-with-php)，它与 SQL 查询类似，但在 XML 文件上工作。

# php - 使用 PHP 处理来自 MySQL 的 utf8mb4 数据

> ID：13028537
> 
> 赞同：7
> 
> 时间：2012-10-23T10:36:17.860
> 
> 标签：php, mysql, cjk, utf8mb4

这可能很简单。我发誓我一直在网上寻找答案，但没有找到。由于我的特殊情况有点不典型，我最终决定在这里问。

我在 MySQL 中有一些用于中文程序的表。它需要能够支持所有可能的汉字，包括那些没有很好的字体支持的稀有汉字。表中的示例单元格可能是这样的：

> 东菄鸫䍶倲涷蝀冻鯟崠埬䰤</p>

为了让它在数据库中正常工作，我不得不将编码/排序规则设置为 utf8mb4。到现在为止还挺好。不幸的是，当我将相同的字符串拉入 PHP 时，它会打印为：

> 东菄鸫䍶?倲??涷蝀冻鯟?崠埬?䰤</p>

我怎样才能最终消除剩余的问号并让它们显示为它们应该是的 unicode 字形？我已经在标签中使用 UTF8 编码并作为元标签来获取 php 页面本身。

为什么他们不能互相交流？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T14:03:36.930

我只是猜测您将表设置为`utf8mb4`，但您的连接编码设置为`utf8`. 您也必须将其设置`utf8mb4`为，否则 MySQL 会将存储的`utf8mb4`数据转换为`utf8`，后者无法编码“高”Unicode 字符。（是的，这是 MySQL 的特性。）

在原始 MySQL 连接上，它必须如下所示：

```
SET NAMES 'utf8mb4';
SELECT * FROM `my_table`; 
```

您必须将其调整为客户端的最佳方式，具体取决于您如何从 PHP（mysql、mysqli 或 PDO）连接到 MySQL。

* * *

要真正澄清（是的，`mysql_`为了简单起见，使用扩展名，不要在家里这样做）：

```
mysql_connect(...);
mysql_select_db(...);
mysql_set_charset('utf8mb4');     // adapt to your mysql connector of choice

$r = mysql_query('SELECT * FROM `my_table`');

var_dump(mysql_fetch_assoc($r));  // data will be UTF8 encoded 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-17T06:37:33.053

只是为了添加到@deceze 的答案，我推荐一个配置良好的 MySQL 服务器（对我来说，在`/etc/mysql/mysql.conf.d/mysqld.cnf`）。以下是确保您正在使用的配置选项`utfmb4`，尽管我确实建议您检查每个 MySQL 配置选项，尽管令人生畏，但有很多默认值非常不理想。

```
[client]

default-character-set           = utf8mb4

[mysql]

default_character_set           = utf8mb4

[mysqld]

init-connect                    = "SET NAMES utf8mb4"
character-set-client-handshake  = FALSE
character-set-server            = "utf8mb4"
collation-server                = "utf8mb4_unicode_ci"
autocommit                      = 1
block_encryption_mode           = "aes-256-cbc" 
```

最后一个只是应该默认的。此外，`init-connect`处理不必每次都执行的问题。保持代码干净。现在运行：

```
SHOW VARIABLES WHERE Variable_name LIKE 'character\_set\_%' OR Variable_name LIKE 'collation%'; 
```

您应该返回如下内容：

```
+--------------------------+--------------------+
| Variable_name            | Value              |
+--------------------------+--------------------+
| character_set_client     | utf8mb4            |
| character_set_connection | utf8mb4            |
| character_set_database   | utf8mb4            |
| character_set_filesystem | binary             |
| character_set_results    | utf8mb4            |
| character_set_server     | utf8mb4            |
| character_set_system     | utf8               |
| collation_connection     | utf8mb4_unicode_ci |
| collation_database       | utf8mb4_unicode_ci |
| collation_server         | utf8mb4_unicode_ci |
+--------------------------+--------------------+ 
```

看起来你已经这样做了，但明确定义表创建并没有什么坏处：

```
CREATE TABLE `mysql_table` (
  `mysql_column` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`mysql_column`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8mb4; 
```

希望这可以帮助某人。

# php - sqlsrv_connect() 保持应用程序池中的连接处于活动状态

> ID：13028538
> 
> 赞同：3
> 
> 时间：2012-10-23T10:36:22.137
> 
> 标签：php, sql, sql-server-2008, database-connection, connect

我有一个通过 sqlsrv_connect 连接到本地 SQL 服务器数据库的 php 脚本。

```
 $serverName = "127.0.0.1\MSSQLSERVER";
  $userName = 'username';
  $userPassword = 'pass';
  $dbName = "name";
  $connectionInfo = array("database"=>$dbName,
                              "UID"=>$userName,
                              "PWD"=>$userPassword, 
                              "MultipleActiveResultSets"=>true,
                              "ConnectionPooling"=>true);

  sqlsrv_configure('WarningsReturnAsErrors', 0);

  $this->connection = sqlsrv_connect( $serverName, $connectionInfo); 
```

我第一次加载网站时，这段代码在大约 1.5 秒内执行

```
$this->connection = sqlsrv_connect( $serverName, $connectionInfo); 
```

如果我重新加载页面，同一行的执行时间为 0.0012 - 0.0020 秒（快得多）

如果我等待让我们说 10 分钟并尝试再次重新加载页面，则连接的执行时间超过 1 秒

我能做些什么来保持连接“活跃”以`sqlsrv_connect`加快运行速度吗？

1.  IIS 应用程序池空闲关闭已禁用
2.  MSSQL Server 连接超时为 0

提前致谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-01T13:39:22.503

你为什么使用 sqlsrv_connect()？

看看 mysqli 更新了很多，而且还在开发中。（我的英语）

[Mysqli PHP 手册](http://php.net/manual/en/book.mysqli.php)

# javascript - 如何强制asp.net页面不使用客户端计算机中的任何存储资源？

> ID：13028540
> 
> 赞同：0
> 
> 时间：2012-10-23T10:36:23.783
> 
> 标签：javascript, asp.net, html

我在公司的网站上做了一些更新，但问题是我尝试了很多测试计算机，我以前用它们来测试和查看网站，他们给了我一些已经在公司网站上更新过的旧图像。我现在被迫按 (Ctrl + F5) 重新加载页面并获取新版本的图像和内容，所以在 asp.net 中有没有一种方法或方法可以防止从客户端计算机使用网站的旧资源并总是询问从服务器获取资源？

谢谢，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:56:32.053

您似乎遇到了缓存问题的经典案例。

`<head>`一种方法是在HTML 输出部分中使用以下元标记：

```
<meta http-equiv="expires" content="0"> 
```

该属性的值应等于或小于 0。此标记命令浏览器从原始服务器重新加载所有资源并忽略所有缓存。

顺便提一句。零值表示内容将在多少秒内过期。您还可以选择将其定义为特定日期。如果你想这样，你必须将日期定义为国际格式，如下所示：

```
content="Sat, 15 Dec 2001 12:00:00 GMT" 
```

希望它会有所帮助。

PS：留意 ManselUK 的评论。Stackoverflow.com 是一个以**给予和接受**为基础的社区，而不仅仅是接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:56:58.627

一个肮脏的技巧是使用假查询字符串，即：

`http://myPage.com/page.aspx?code=123456`

并且每次使代码部分随机。

# python - 环境变量不在 Python 解释器中

> ID：13028559
> 
> 赞同：2
> 
> 时间：2012-10-23T10:37:20.540
> 
> 标签：python, environment-variables

嗨，我只是遇到了一件奇怪的事情。

在我的 .bashrc 中看起来像这样：

```
PYTHONPATH=$PYTHONPATH:/home/pschu/ParaView-3.14.1-Build/Utilities/VTKPythonWrapping/site-packages:home/pschu/ParaView-3.14.1-Build/bin

ParaView_DIR=/home/pschu/ParaView-3.14.1-Build

LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/pschu/ParaView-3.14.1-Builds/bin 
```

所以现在当我启动 python 解释器并输入以下内容时：

```
>>>os.environ['PYTHONPATH']
 Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 File "/usr/lib64/python2.7/UserDict.py", line 23, in __getitem__
 raise KeyError(key)
KeyError: 'PYTHONPATH' 
```

与 相同的错误`ParaView_DIR`，但`LD_LIBRARY_PATH`有额外的路径。

它们存在于外壳中。

```
echo $PYTHONPATH
:/home/pschu/ParaView-3.14.1-Build/Utilities/VTKPythonWrapping/site-packages:home/pschu/ParaView-3.14.1-Build/bin 
```

现在当我做

```
export PYTHONPATH=$PYTHONPATH 
```

在我运行 python 解释器之前它可以工作。

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:40:06.297

这有效：

```
% PYTHONPATH=$PYTHONPATH:/tmp python 
```

在 Python 中：

```
>>> import os
>>> os.environ["PYTHONPATH"]
':/tmp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:40:07.230

你`export`有变数吗？

```
export PYTHONPATH ParaView_DIR 
```

LD_LIBRARY_PATH 可能已经在您的其他启动文件之一中导出。一旦变量被导出，它就会保持这种状态。

导出变量使其成为*环境变量*，如果您不这样做，`export`那么它只是 shell 的本地变量，并且子进程不会获得副本。

如果您使用的是 C-shell（通常由 % 提示符指示），则语法不同：

```
setenv PYTHONPATH $PYTHONPATH 
```

# assembly - 组装事业部

> ID：13028561
> 
> 赞同：4
> 
> 时间：2012-10-23T10:37:21.527
> 
> 标签：assembly, x86, division

在我的程序中，十六进制数除以十并检查余数。

第一师表现良好；然而，在第二次划分之后，程序出错了。我是组装新手，我找不到问题出在哪里......

这是代码段：

```
ORG 1000

    MOV AX, 0x04B4 (1204 decimal value )
    MOV BX, 0x000A ( 10 decimal value )
    MOV CX, 0x0000

    DIV BX ( After this part, AX is 120 decimal and DX 4 decimal )

    CMP DX, 0x0000
    JE eq1

    ADD CX, 0x0002
    JMP con1

    eq1:    ADD CX, 0x0001  

    con1:

    DIV BX ( But, after this division AX becomes 6677 ( 26231 decimal and DX remains 4 decimal )
    CMP DX, 0x0000 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T10:46:39.207

该`DIV BX`指令将DX:AX 中的**32 位值除以 BX。**由于您没有初始化 DX，因此除数的高位字是前一次计算中 DX 寄存器中留下的任何垃圾，因此您实际上是在将 0x00040078=262314 除以 10。结果是正确的：26231 的商与余数为 4。

在第一个分区中，DX最初恰好为0一定是纯粹的运气。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:44:13.123

英特尔指令 DIV 将寄存器对 DX:AX 与参数分开。

在第一种情况下，DX 恰好为零。
第二次 DX 一定是 4。

# vbscript - WScript.Shell.run 启动 robocopy 不显示目标参数

> ID：13028562
> 
> 赞同：2
> 
> 时间：2012-10-23T10:37:22.560
> 
> 标签：vbscript, robocopy, wsh

我正在尝试使用 vbscript (cscript/vbs) 将文件从一个网络位置（我的电视节目下载文件夹）复制到另一个网络位置（我的 pvr）。

我尝试使用 xcopy 但最终在没有任何上下文的情况下出现“解析错误”。尝试了一些方法，例如确保引用有空格的文件等无法解决。

我尝试使用 scripting.filesystemobject 的 copyfile 方法，但是由于“错误的文件名或编号”错误而失败，并且在谷歌上搜索这个导致了很多很多死胡同。

我目前正在尝试让 robocopy 来处理副本，因为它通常比上述两者都好。但是当使用 WScript.Shell 的 Run 方法从 cscript 中运行时，目标、文件名和参数都“脱落”。

所以这里是复制部分的一个片段。

```
 if dirmatch > "" then
            fileFrom = quote(myloc) ' & fil.name) 'fil.name will not need to be quoted
            fileTo = quote(dirmatch) ' puts double-quotes around things if they have spaces in the name
            ' copyCommand = "%comspec% /k xcopy " & fileFrom & " " & fileTo & " /C /D /Y" ' returns "parse error"
            copyCommand = "%comspec% /k robocopy " & fileFrom & " " & fileTo & " " & fil.name & " /R:3 /W:10"' /MOV"
            logmsg copyCommand
            oShellApp.run copyCommand
        else
            logmsg "no matching directory found for: " & fil.name
        end if 
```

fileFrom 和 fileTo 是我之前使用文件名解析计算的目录 - 格式为`\\server\path\more path might have spaces\etc\etc`. fil.name 是文件，它从不包含空格 - 以点分隔。文件夹名称中的空格是我使用的另一个应用程序中匹配原因的要求。

所以一个给定的文件复制命令应该是这样的：

`00:19: %comspec% /k robocopy \\qnap\qdownload\transmission\completed \\pvr\e\tv\MythBusters Mythbusters.S11E03.Hail.Hijinx.HDTV.x264-FQM.mp4 /R:3 /W:10`

但是新命令窗口（例如`cmd.exe /k`）中的 robocopy 会像这样抛出：

```
-------------------------------------------------------------------------------
   ROBOCOPY     ::     Robust File Copy for Windows
-------------------------------------------------------------------------------
Started : Tue Oct 23 21:04:58 2012
Source : \\qnap\qdownload\transmission\completed\
Dest -
Files : *.*
Options : *.* /COPY:DAT /R:1000000 /W:30
------------------------------------------------------------------------------
ERROR : No Destination Directory Specified. 
```

我正确启动了它，但它看不到第一个参数。使用 copy 执行相同的命令可能会遇到相同的问题。

如何获取所有 robocopy 参数以传递给新的 cmd 实例？

ps 我的整个脚本在这里：[http](http://pastebin.com/xgpGJYmU) ://pastebin.com/xgpGJYmU ：随意优化它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:19:43.997

好的，所以经过多年的磕磕绊绊，我终于发现目的地开头的一个字符的 ascii 代码小于零。filesystemobject 和 asp 都很有趣，让你有这样的愚蠢场景。asp unicode 实现：你这个混蛋！

从一开始它就在那里盯着我看：

```
00:19: %comspec% /k robocopy \\qnap\qdownload\transmission\completed 
\\pvr\e\tv\MythBusters Mythbusters.S11E03.Hail.Hijinx.HDTV.x264-FQM.mp4 /R:3 /W:10 
```

\pvr\e .. etc 之前的换行符我将其视为命令提示符中的换行问题，但对字符串的“逐个字符”探索没有发现问题。

最后，我无法剪切一个可以将我的宽字节转换回 ascii 的正则表达式，因此必须逐个字母地进行处理：

```
Function unicodeToAscii(sText)
  Dim x, aAscii, ascval, l
  l = len(sText)
  If l = 0 Then Exit Function
  redim aAscii(l)
  For x = 1 To l
    ascval = AscW(Mid(sText, x, 1))
    If (ascval < 0) Then
      ascval = 65536 + ascval ' http://support.microsoft.com/kb/272138
    End If
    aAscii(x) = chr(ascval)
  Next
  unicodeToAscii = join(aAscii,"")
End Function 
```

这是一个非常糟糕的黑客攻击。

无论如何，问题不是 robocopy 或 wsh，而是 unicode 文件系统！解决了。

ps 这是整个脚本的更新、优化的 pastebin：http: [//pastebin.com/s1XtzCGC](http://pastebin.com/s1XtzCGC)

# java - 对象到 ArrayList 未经检查的演员表

> ID：13028563
> 
> 赞同：5
> 
> 时间：2012-10-23T10:37:28.610
> 
> 标签：java, arraylist, iterator

用 -Xlint 编译我的代码我发现了这个：

```
warning: [unchecked] unchecked cast
found   : java.lang.Object
required: java.util.ArrayList<java.lang.String>
                    ArrayList<String> msgData = (ArrayList<String>)element; 
```

这是代码：

```
ArrayList<ArrayList<String>> msg = new ArrayList<ArrayList<String>>();
//add some data to msg
Iterator i = msg.iterator();
while(i.hasNext()) {

    Object element = i.next();
    ArrayList<String> msgData = (ArrayList<String>)element;     
} 
```

演员应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:40:56.217

您的迭代器也需要一个类型，如下所示：

```
ArrayList<ArrayList<String>> msg = new ArrayList<ArrayList<String>>();
//add some data to msg
Iterator<ArrayList<String>> i = msg.iterator();
while(i.hasNext()) {
    ArrayList<String> element = i.next();
} 
```

顺便说一句，最好对接口进行编程，而不是对实现进行编程。因此，你会写：

```
List<List<String>> msg = new ArrayList<List<String>>();
//add some data to msg
Iterator<List<String>> i = msg.iterator();
while(i.hasNext()) {
    List<String> element = i.next();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:39:27.163

您的迭代器应该类似于

```
Iterator<ArrayList<String>> i = msg.iterator(); 
```

顺便说一句，您可以使用 for-each 循环：

```
for (ArrayList<String> sublist : msg) {
    ....            
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:41:52.270

```
ArrayList<ArrayList<String>> msg = new ArrayList<ArrayList<String>>();
//add some data to msg
for (ArrayList<String> msgData : msg) {
   //do something
} 
```

# couchbase - 存储桶之间的 Couchbase 视图共享

> ID：13028565
> 
> 赞同：2
> 
> 时间：2012-10-23T10:37:33.550
> 
> 标签：couchbase, couchbase-view

我们是一群开发人员，每个人都有自己的桶——但观点相同。

我想要一个文件，其中包含在源代码管理下定义的视图。

然后，该文件应以某种方式轻松应用于现有存储桶，以便更新该存储桶上的视图。

我怎样才能轻松实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:19:45.453

在帮助下解决

[http://www.couchbase.com/forums/thread/couchbase-view#comment-1007530](http://www.couchbase.com/forums/thread/couchbase-view#comment-1007530) http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-designdoc-api.html

只是我将视图定义保存在文件中，并通过 couchbase rest api 更新 couchbase 中的视图。因此，每当开发人员需要更新他们的存储桶时，他们都会运行简单的工具，该工具会通过带有视图的文件夹进行更新......

# .net - NHibernate SchemaExport 不创建索引

> ID：13028567
> 
> 赞同：0
> 
> 时间：2012-10-23T10:37:34.503
> 
> 标签：.net, nhibernate, schemaexport

我的 NHibernate 映射包含一个`<database-object>`元素来定义 MS SQL Server 2008 的索引。问题是当我调用`SchemaExport.Create`. 其他所有内容都已创建，但没有索引。

其中一个实体如下所示，例如：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">

  <class xmlns="urn:nhibernate-mapping-2.2" 
      name="MyApp.Entities.SomeEntity, MyApp.Entities" table="SomeEntity">

    <!- -->

  </class>

  <database-object>
    <create>
      CREATE INDEX [Idx_SomeEntityIndex] ON [SomeEntity] 
          ([Field1] ASC, [Field2] ASC) INCLUDE ( [Field3], [Field4], [Field5])
      CREATE STATISTICS [Stat_SomeEntityStat] ON [SomeEntity] 
          ([Field1], [Field2])
    </create>
    <drop>
      DROP INDEX [Idx_SomeEntityIndex] ON [SomeEntity]
      DROP STATISTICS [Stat_SomeEntityStat]
    </drop>
    <dialect-scope name="NHibernate.Dialect.MsSql2008Dialect, NHibernate"/>
  </database-object>

</hibernate-mapping> 
```

问题是这曾经工作过（可能在从 NH2 移动到 NH3 之前），我不确定 NHibernate 中是否发生了一些变化，这会阻止它执行。

方言与配置文件中的方言匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:46:44.853

感谢@OskarBerggren，我在另一个论坛上得到了答案。问题是程序集名称（`NHibernate`在本例中为 ）不应该在方言字符串中指定。

所以，当我改变这个时：

```
<dialect-scope name="NHibernate.Dialect.MsSql2008Dialect, NHibernate"/> 
```

对此：

```
<dialect-scope name="NHibernate.Dialect.MsSql2008Dialect"/> 
```

它解决了我的问题。

# java - 在数组中查找最近的数字

> ID：13028570
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:37:44.093
> 
> 标签：java

一个有数字的数组，例如`1,2,3,4,5`。

我需要返回与整个数组的平均值最接近的元素。例如，

```
1+2+3+4+5=15
15/5=3 
```

结果应该是数字 3。

如果没有与平均值相同的数字，则结果应该是数组中最接近的数字。

我只需要返回该值的方法。

```
Integer sum = 0; 
Integer a = 0;
for(int i=0; i<array.getLength();i++)
{
   a = array.get(i); sum=sum+a; 
}
 Integer average= sum/array.getLength();
 return average;
} 
```

我试过这个，但它只返回准确的平均值，而不是最接近的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:06:39.413

这是简单的解决方案。如果对数组进行排序，可能可以使用一些更聪明的算法从数组中获取最接近的值。如果有两个数字都最接近平均值，则选择数组中第一个出现的数字。

**编辑**更改了比较，因此最接近平均值的最低数字是 foud。

```
public static Integer nearestToAverage(int[] res) {
    if (res.length < 1) {
        return null; //if there is no array return null;
    }
    int sum = 0; //variable to sum up the array
    for (int i = 0; i < res.length; i++) {
        int act = res[i];
        sum += act; //adding elements of array to sum
    }
    int avg = sum / res.length; //computing the average value
    int minDistance = Integer.MAX_VALUE; //set distance to integer max so it is higher than any of values in array
    Integer ret = null; //setting return value to null it will be replaced with value from array
    for (int i = 0; i < res.length; i++) {
        int act = res[i];
        int actDistance = Math.abs(act - avg); //computing distance of actual value and average
        if ((actDistance < minDistance) || ((actDistance == minDistance) && (act < ret))) { //if it is less than actual minimal distance or it is the same and act number is lower than return value
            minDistance = actDistance; //the distance is set to new
            ret = act; //also is return value
        }
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:51:07.007

```
void findelement()
    {
        int[] arr = {1,2,3,4,5};
        int a`enter code here`ve = 3, elem=0;
        long tempi=0, tempdiff;
        long diff=-1;
        for(int i=0; i<arr.length;i++)
        {
            tempdiff = (long)arr[i]-(long)ave;
            tempdiff = (tempdiff < 0 ? -tempdiff : tempdiff);
            diff = (diff==-1)?tempdiff : diff;
            if(diff>tempdiff){
                diff = tempdiff;
                elem = i;
            }
        }
        System.out.println("hi element is "+elem+" and value near to average is "+arr[elem]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:48:54.750

尝试这个 ：：

```
int[] arr = {1,2,3,4,5};
double closeDiff = 0;
double arravg = getAverage(arr); // write a method which will return the average
int resultIndex = 0;

for(int i=1;i<arr.length;i++)
{

  if(arr[i-1] > arr[i])
  tempDiff = (arr[i-1] - arr[i]);
  else
    tempDiff = (-arr[i-1] + arr[i]);
  if(tempDiff<closeDiff)
   resultIndex = i;
}
return arr[i]; 
```

# ios - 从另一个视图控制器中的一个视图控制器获取按钮

> ID：13028572
> 
> 赞同：0
> 
> 时间：2012-10-23T10:37:55.327
> 
> 标签：ios, uiviewcontroller, navigation, uibutton

我是 ios 编程的新手，所以它会产生很多问题。我有 2 个控制器 - SwitchingViewController 和 ToastViewController。SwitchingViewController 是在控制器之间切换，所以它也有一个按钮。

现在的重点是 - 如何在 ToastViewController 中显示在 SwitchingViewController 中声明的“返回”按钮？

看起来像这样

切换视图控制器.h

```
@interface SwitchingViewController : UIViewController{
  IBOutlet UIButton *addnew;
  IBOutlet UIButton *contin;
  IBOutlet UIButton *mytoasts;
  IBOutlet UIButton *backToToast;
} 
```

ToastViewController.m

```
#import "SwitchingViewController.h"

@interface ToastViewController ()
@end

@implementation ToastViewController
  -(void)sendToServer:(id)sender{
    //show here backToToast button
  } 
```

我尝试了 [SwitchViewController.backToToast] 或 getByTag 之类的方法，但它显然不起作用（我有 ruby​​ 经验，所以我有很多后遗症）。有人能告诉我如何操作其他控制器的元素吗？

**编辑/解决**

实际上我这样做是为了扭转问题......我在 ToastViewController 中放置了一个按钮，例如 *goToBack 并将其与操作 sendToServer 连接。现在当点击 goToBack 时，它会运行 sendToServer 操作，如下所示：

```
//do somenthing to send to server and change view to other controller
//changing controller is defined in action goBackToOther in SwitchViewController

[[NSNotificationCenter defaultCenter] postNotificationName: @"goBackToOtherNotif" object: nil]; 
```

并在 SwitchViewController.m -> init()

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(goBackToOther:) name: @"goBackToOtherNotif" object: nil]; 
```

在 SwitchViewController.m -> dealloc()

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

也许它不是很优雅，但就像我说的那样——我还不熟悉 ios 编程，所以我选择了可​​行的方法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:49:12.967

尝试在 SwitchingViewController.h 中创建 Properties 并在 SwitchingViewController.m 文件中合成 backToToast。

@property (retain, nonatomic) IBOutlet UIButton *backToToast; (SwitchingViewController.h)

@synthesize backToToast; (切换视图控制器.m)

# ios - Objective-C iOS6 [] 运算符重载（const id []）

> ID：13028574
> 
> 赞同：2
> 
> 时间：2012-10-23T10:38:02.010
> 
> 标签：ios, objective-c, operator-overloading

我知道新的文字和访问器，比如

```
id obj = [dict objectForKey:@"keyStr"]; 
```

相当于

```
id obj = dict[@"keyStr"]; 
```

我注意到主要课程的一些变化，比如

```
+ (id)dictionaryWithObjects:(const id [])objects forKeys:(const id [])keys count:(NSUInteger)cnt; 
```

但什么是（const id []）？

我如何使用 [ ] 运算符创建自己的课程

这基本上是运算符重载，我认为这在 ObjectiveC 中是不可能的，是否有可能重载其他运算符，如 +、/、- 等...

运算符重载在 C++ 中是可能的，这是否意味着我可以将它用作 Objective-C++ 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:47:53.217

`const id []`

只是一个数组的类型声明`const id`。

它相当于：

`const int a[]`

对于`id`类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:48:28.517

`const id []`只是一个`const`Objective-C 对象的 C 数组。该方法处理`NSDictionary`从字典文字 - 的构造`@{ @"a": @1 }`。这不是你要找的。

使用is *subscripting*`X`通过对象内部的键访问对象。`something``something[X]`

 *如果您希望您的类支持下标，则实现`- (id)objectAtIndexedSubscript:(NSUInteger)idx`是否要采用整数和`- (id)objectForKeyedSubscript:(id)key`是否要采用对象。有关更多信息，[请参阅此功能的 clang（“LLVM 编译器”）文档](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

setter 的对应方法是`- (void)setObject:(id)anObject atIndexedSubscript:(NSUInteger)index`和`- (void)setObject:(id)object forKeyedSubscript:(id<NSCopying>)aKey`。*

# dynamics-crm-2011 - 在插件中创建一个案例，想立即使用它的票号

> ID：13028576
> 
> 赞同：0
> 
> 时间：2012-10-23T10:38:05.363
> 
> 标签：dynamics-crm-2011

我有一个插件，我正在创建一个新案例，我想在创建时发送一封电子邮件，包括它的票号。我试图在插件中调用它，但它回来说它不在字典中。我知道这个字段是使用 CRM 自己的自动编号填充的，所以我猜测正在发生的是我的插件正在触发并创建案例，但是我试图在自动编号完成之前使用这个字段。

那么有没有办法让我的插件“等待”直到该字段可用然后使用它？

谢谢

编辑：下面的代码：

```
string emailBody = entity.Attributes["description"].ToString();

int bodyLength = emailBody.Length;
int textStart = emailBody.IndexOf(">") + 1;

int newLength = bodyLength - (textStart + 7);

string description = emailBody.Substring(textStart, newLength);

//create complaint
Entity complaint = new Entity("incident");

complaint["description"] = description;
complaint["ts_case_type"] = 717750001;
complaint["ts_registration_datetime"] = DateTime.Now;
complaint["ownerid"] = Owner;
complaint["customerid"] = Organisation;

Service.Create(complaint); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:57:19.000

作为一个方面，如果可能的话，我建议发送带有工作流程的电子邮件，从长远来看，它会更容易维护，并且在短期内实施起来会更快。

无论如何，要回答您的问题，您需要在创建事件后更新您的代码以检索票号。您可以使用[检索](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iorganizationservice.retrieve.aspx)消息来执行此操作。

例如：

```
//Create the complaint
Entity complaint = new Entity("incident");

//This is the information that is being sent to the server,
//it will not be updated by CRM with any additional information post creation
complaint["description"] = description;
complaint["ts_case_type"] = 717750001;
complaint["ts_registration_datetime"] = DateTime.Now;
complaint["ownerid"] = Owner;
complaint["customerid"] = Organisation;

//Capture the id of the complaint, we will need this in a moment
Guid complaintId = Service.Create(complaint);

//complaint["ticketnumber"] <-- The server does not populate this information in your object

//Retrieve the ticketnumber from the incident we just created            
Entity complaintRetrieved = service.Retrieve("incident", complaintId, new ColumnSet("ticketnumber"));

//Get the ticketnumber
String ticketNumber = (String)complaintRetrieved.Attributes["ticketnumber"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:09:24.883

就像 James 在评论中所说的那样，如果您只想发送带有某些案例属性的电子邮件，最好使用工作流（在案例创建时）来做到这一点。在您的插件中，会生成 ID，您可以通过以下方式获取它：

```
entity.Attributes["ticketnumber"] 
```

# string - 将我的word文档的blob内容转换为顶点控制器中的字符串

> ID：13028577
> 
> 赞同：1
> 
> 时间：2012-10-23T10:38:07.750
> 
> 标签：string, salesforce, blob, converter, apex-code

在销售队伍上，

我有一个 word 文档作为自定义对象的附件，我可以通过使用 SOQL 查询选择附件的正文来将其作为 blob 获取：

附件 att = [ SELECT Body FROM Attachment WHERE PARENTID = ' ***** *** ' and ContentType='application/msword'] ; 斑点 b = att.body ;

我尝试使用 b.toString() 函数来获取内容，但它不起作用。那么有没有其他方法可以将 blob 转换为代表写在我的 word 文档中的文本的字符串。

```
 thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:33:49.677

***文档正文保存为 Blob 并采用 base64 编码。请使用 EncodingUtil 类和 bas64Encode/base64Decode 方法来达到预期的效果。***

文档： http: [//www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_encodingUtil.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_encodingUtil.htm)

**你到底想用这个实现什么？**
*如果您尝试显示文档。内容并让用户编辑/保存它。除非使用另一个不同级别的 ActiveX 控件，否则这是不可能的。*

**如果需要任何编码帮助，请发布代码！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:49:51.533

b.toString() 方法应返回 blob 的字符串。但请记住，它不会将 word 文档的专有格式转换为纯文本。它仍然是一个带有一些丑陋的字符串，因为它代表的是 word 文档格式，而不是你从 word 中查看时看到的文本。

# php - 如何在一次 ajax 调用中引入 json 和 html 数据

> ID：13028578
> 
> 赞同：1
> 
> 时间：2012-10-23T10:38:09.343
> 
> 标签：php, jquery, html, ajax

我有两个 jquery 函数，可以将评级和评论从两个运行良好的文件中分开。

现在我想在一个 ajax 调用中完成它，我试图以这种方式将两个函数合并在一起，但它不起作用。

**jQuery**

```
 function get_review(){
    $.ajax({ 
      type: "POST",
      url: '../review.php',                        
      data: {value1:value1, value2:value2, value3:value3},                        
      dataType: 'json',
      cache: false,              
      success: function(data)          
       {
        var x = data[0];
        var rating = (x-0.5)*2
        var y = (20 * rating)+40;
        $('#urating').css("backgroundPosition","0%"  +(y)+ "px");
        $('#comments').html(data);
       } 
     });
}; 
```

**PHP**

```
$find_data = "SELECT * FROM $tablename WHERE table_name='$table' AND product_id='$id' ORDER by id DESC";
$query = mysqli_query($connection, $find_data);

$find_data2 = "SELECT * FROM $tablename2 WHERE id='$id'";
$query2 = mysqli_query($connection, $find_data2);
$row2 = mysqli_fetch_assoc($query2);

header('Content-type: application/json');
echo json_encode($row2);
?> 

      <?php while($row = mysqli_fetch_assoc($query)):?>
      <div class="comment-container">
        <div class="user-info"><?php echo $row['user_name']; ?></div>
        <div class="comment"><p><?php echo $row['quick_comment']; ?></p></div>
      </div>
      <?php endwhile;?> 
```

请查看并建议任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:41:06.623

尝试对 JSON 对象的整个响应进行编码！就像是：

```
$response = array(
    'success' => true,
    'object'  => $yourobject_or_array,
    'html'    => '<b>Bla bla</b>'
);
echo json_encode($response);
die(); 
```

JS：

```
function(response) {
    var res = false;
    try {
        res = jQuery.parseJSON(response);
    } catch(e) {}
    if (res && res.success) {
        // Use res.object and res.html here
    }
} 
```

# css - 浏览器滚动条在我的固定 div 下

> ID：13028584
> 
> 赞同：73
> 
> 时间：2012-10-23T10:38:37.180
> 
> 标签：css, css-position

我有一个 100% 宽度的固定标题。

```
#header {
background: #2e2e2e;
width: 100%;
z-index: 999;
position: fixed;
} 
```

浏览器滚动条在我的固定 div 下。如何解决？

![滚动条](../Images/d2f8557528b296ddb904606a6cc6ffdb.png)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-23T10:39:51.340

这是因为`overflow-x: hidden;`base.css 中的第 9 行

```
body {
    color: #444444;
    font: 13px/20px Arial,Helvetica,sans-serif;
    overflow-x: hidden; // remove this 
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-28T14:31:11.177

这可以通过添加 body 的溢出来解决

从

```
overflow:auto; 
```

至

```
overflow:auto;
overflow:initial; 
```

[这是你的问题](https://jsfiddle.net/t6e55j1b/)

如果您的滚动设置在正文上，如果其结构为正文 > 包装器 > 标题（位置固定），内容等等

以下是您的解决方案

[问题的解决方案](https://jsfiddle.net/r0qL8kno/1/)

*注意：这仅适用于正文，但不适用于带有滚动的 div 容器。您也可以使用 z-index 来使其工作，但您将指定 z-index 来堆叠其他元素以使其正确。*

希望这可以帮助..：）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-06-28T11:24:26.837

问题不`overflow-x`在于 body 标签。这是因为`overflow-x`和`overflow-y`在**`html`**标签上。一旦我从 HTML 标记中删除它，我就可以在我的身体上放置我想要的任何溢出。

这发生在：

*   `overflow-x`设置为`auto`, `hidden`, `overflow`, 或`scroll`
*   `overflow-y`设置为`auto`, `hidden`, `-webkit-paged-x`, 或`-webkit-paged-y`

它不必是对`overflow-x`or的显式调用`overflow-y`，因为`overflow`它们都设置了。

*我在使用 Windows 10 的 Chrome 67 上。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-05T22:17:45.130

`z-index`在作为标题和内容的父容器的容器上设置 a 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-01T10:31:43.443

`height:100%`在 html 标签中删除

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-31T23:41:10.853

对此的 css hack（我终于找到了一种方法）并没有很快做出太多解释 - 第一个浮动元素是。我想从下面的代码中理解它的工作原理。

更新：移动浏览器存在一个问题，请参见下文以评估您是否可以使用它。

```
<div style="position: fixed;top: 0;width: 100%;left: 0;z-index: 100000;height: 200px;background: #f00;">

<div id="aaaaa" style="display: block;float:right;color: #000;overflow-y:scroll;min-height:20px;top: -100px;background: #0f0;border: 1px solid #0f0;"></div>
<div id="bbbb" style="display: block;position:relative;color: #000;overflow:hidden;min-height:20px;background: #f0f;border: 1px solid #00f;">sdfasdf sdfas s as as fasd fasd fasdfasd fasd asdf asd fasdf sadf asdf asdf asdf sad fasdf asdf asdf asd fasdf asdf asdf asd fsad sad sfd

        <div style="width: 100%;height: 20px;background: #5ff"></div>

</div> 
```

最后的代码，几乎与您希望看到和工作的东西相同

```
<div style="position: fixed;top: 0;width: 100%;left: 0;z-index: 100000;height: 0px;overflow:visible;background: #f00;">

<div id="aaaaa" style="display: block;float:right;color: #000;overflow-y:scroll;visibility:hidden;min-height:20px;top: -100px;background: #0f0;border: 1px solid #0f0;"></div>
<div id="bbbb" style="display: block;position:relative;color: #000;overflow:hidden;min-height:20px;background: #f0f;border: 1px solid #00f;">sdfasdf sdfas s as as fasd fasd fasdfasd fasd asdf asd fasdf sadf asdf asdf asdf sad fasdf asdf asdf asd fasdf asdf asdf asd fsad sad sfd

        <div style="width: 100%;height: 20px;background: #5ff"></div>

</div> 
```

重要的是它适用于移动和桌面浏览器。实际上，当我的电脑变成平板电脑模式然后是桌面模式时，我在 Windows Edge 上测试了移动设备。然后代码一直有效。检查这是否适用于 :before 而不是 div id="aaaa" 以使其更加纯 css 和额外的 div 独立。

更新：Edge 浏览器在进入平板模式时不会更改滚动条之前不能很好地工作。

如果您在 bbbb 元素中遇到隐藏内容的问题，请尽量不要在 bbbb 容器中定位：绝对/固定元素。

我尚未针对所有情况和浏览器对其进行测试。

更新：这个答案顶部某处**提到的**问题 - 但在移动浏览器上滚动条被覆盖，因为滚动条是动态的 - 它仅在您滚动并且您知道它不是任何容器的一部分时才会出现。滚动条可能在所有浏览器上都很薄，所以你应该决定如何处理它。可能有 5 像素左右的边距？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-06T03:00:09.317

我解决这个问题的方法是设置滚动条的宽度，然后将 100% 的宽度设置为导航栏减去滚动条的宽度。

像这样：

```
.main-container::-webkit-scrollbar {
  width: 8px;
}

.navbar{
    display: flex;
    position: fixed;
    width: calc(100% - 8px);
    height: 8rem;
    z-index: 5000;
} 
```

这是它的样子

![这就是滚动条的样子](../Images/1ac2e84e4165620a96b51c7372b7c649.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-15T03:39:48.913

[clip-path](https://developer.mozilla.org/en-US/docs/Web/CSS/clip-path)属性可以帮助你。

您需要将标题放在可滚动内容中，但这并不重要，因为它具有固定位置。然后，如果你应用`clip-path: inset(0 0 0 0);`到容器上，它会剪掉这个矩形之外的所有东西。

```
function toggle() {
  content.classList.toggle('clip');
}
```

```
#container {
  overflow-y: auto;
  width: 300px;
  height: 100px;
  padding: 0;
}
#fixed {
  position: fixed;
  left: 0;
  top: 0;
  width: 350px;
  height: 50px;
  background: blue;
}
#content {
  height: 1000px;
  width: 100%;
  background: yellow;
}
#content.clip {
  clip-path: inset(0 0 0 0);
}
```

```
<div id="container">
  <div id="content">
    <div id="fixed"></div>
  </div>
</div>
<button onclick="toggle()">toggle clip-path</button>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-21T09:56:50.887

我遇到了这个问题，我的滚动条在我的固定标题下，我从我的 html 标记中删除后解决了这个问题，`height: 100%;`我添加了其他属性以确保我有相同的结果。其他解决方案都没有帮助我。我希望这可以帮助别人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-02T05:58:00.053

这可以使用以下两种方式解决：

1.首先计算`scrollbarWidth=el.offsetWidth - el.clientWidth`

2.设置固定`div left=scrollbarWidth`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-26T09:44:48.460

放在`margin-right: 0px;`topNavBar 对我有用

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-12T14:06:12.123

在反应应用程序中有同样的问题。

`overflow-y: scroll`将样式从`#root`选择器移至`body`选择器。它为我解决了问题。

# javascript - 转义序列 javascript

> ID：13028587
> 
> 赞同：0
> 
> 时间：2012-10-23T10:38:46.630
> 
> 标签：javascript, jquery

在这种情况下如何将变量传递给其他函数，我通过带有单引号的 javascript 插入 textarea，但是当它被调用时`myFunction(abc123)`，它看起来像这样，该函数在被调用时假设是这样的 -`myFunction('abc123')`

所以我该怎么做 ？

```
myNum=123;
focusVar = "abc"+myNum;

$("#myDiv").append('<textarea onFocus="onFocusReportReply('+focusVar+')" onBlur="onBlurReportReply()" id="replyReportText'+data.activityId1+'">') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:41:53.300

```
$("#myDiv").append('<textarea onFocus="onFocusReportReply(\''+focusVar+'\')" onBlur="onBlurReportReply()" id="replyReportText'+data.activityId1+'">') 
```

反斜杠转义特殊字符，在这种情况下是字符串分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:42:14.667

您可以使用*双引号*或*转义单引号*。

```
var foo = 'onFocus=myFunc("' + focusVar + '") moar'; 
```

或者

```
var foo = 'onFocus=myFunc(\'' + focusVar + '\') moar'; 
```

* * *

要转义特殊字符，您需要一个前导反斜杠。例子是

```
\t (tabulator)
\n (line feed)
\\ (backslash) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:43:15.270

将您的字符串括在单引号内，如下所示：

```
myNum=123;
focusVar = "'abc"+myNum+"'"; 
```

# java - 为 chart.theme 实例化扩展注册表时出错

> ID：13028592
> 
> 赞同：0
> 
> 时间：2012-10-23T10:38:58.497
> 
> 标签：java, spring, web-applications, jasper-reports

我正在尝试使用*JasperReports生成**PDF*。

 *第一次尝试时，我收到此错误：

```
ERROR [net.sf.jasperreports.extensions.DefaultExtensionsRegistry] Error instantiating extensions registry for chart.theme 
from vfszip:My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/jasperreports_extension.properties
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: 
Failed to import bean definitions from relative location [defaultChartPropertiesBean.xml]
Offending resource: URL 
[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/chartThemesBeans.xml];
nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: 
Failed to import bean definitions from relative location [chartConstantsBean.xml]
Offending resource: URL 
[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/defaultChartPropertiesBean.xml]; 
nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL 
[My-App.ear/lib/jasperreports-chart-themes-4.7.0.jar/net/sf/jasperreports/chartthemes/spring/beans/chartConstantsBean.xml];
nested exception is org.springframework.beans.FatalBeanException: 
Class [org.springframework.beans.factory.xml.UtilNamespaceHandler] for namespace 
[http://www.springframework.org/schema/util] does not implement the [org.springframework.beans.factory.xml.NamespaceHandler] interface
at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:219)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:148)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:133)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:73)
at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:61)
at net.sf.jasperreports.extensions.SpringExtensionsRegistryFactory.getBeanFactory(SpringExtensionsRegistryFactory.java:101) 
```

但是，生成*PDF*时没有任何问题。

另外，下次我尝试生成一个*PDF*时，不会再出现错误。这只发生在第一代。

原因是什么？以及如何避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:43:02.567

OK 问题解决了。

我在类路径中包含了 jasperreports-chart-themes-4.7.0.jar。但是，这个罐子不再使用了。我只使用了 jasper 的默认主题。

从 .ear 中删除这个 jar，一切正常。

不管怎么说，还是要谢谢你*

# youtube - Youtube Direct 的审核/提交设置

> ID：13028593
> 
> 赞同：0
> 
> 时间：2012-10-23T10:38:58.613
> 
> 标签：youtube, youtube-api

我一直在尝试将提交模式更改为 NEW，但即使在单击 Save Changes 按钮后它仍然处于 NEW 或 EXISTING 状态。我不希望用户提交现有视频，并且“提交现有视频”按钮不应该在那里。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:10:03.880

YouTube Direct 使用 Guice 的方式存在一个不幸的错误，只要运行 YouTube Direct 的 JVM 保持活动状态，就会导致配置对象被缓存和重用。实际上，这通常意味着新设置将在几个小时后生效。

总的来说，我们现在的重点是 YouTube Direct Lite。如果您想了解更多，请参阅

[http://code.google.com/p/youtube-direct-lite/](http://code.google.com/p/youtube-direct-lite/)

您可以直接自定义 JavaScript 代码，使其不在 YouTube Direct Lite 中显示现有视频选项卡。

# asp.net - C#/ASP.NET MVC 4 实例化从工厂方法中的接口派生的对象

> ID：13028596
> 
> 赞同：1
> 
> 时间：2012-10-23T10:39:02.840
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4, factory-pattern

目前有一个具有`GetSelector`函数的 Factory 类，该函数返回`ISelector`. 我有几个实现 ISelector 的不同类，并且基于我希望收到适当`ISelector`回复的设置。

```
public interface ISelector
{
    string GetValue(string Params);
}

public class XmlSelector : ISelector
{
    public string GetValue(string Params)
    {
        // open XML file and get value
    }
}

public static class SelectorFactory
{
    public static ISelector GetSelector()
    {
        return new XmlSelector(); // Needs changing to look at settings
    }
} 
```

我的问题是存储设置的最佳方式是什么？我知道使用 AppSettings 等，但我不确定是否要在 web.config 中存储字符串并对其执行开关 - 如果 ISelector 的新实现是制造，那么工厂将需要改变。有没有办法存储程序集名称并基于它进行实例化？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:57:38.407

很难说，因为我不知道您的特定项目的架构，但乍一看，**如果**与 ISelector 关联的对象可以与您的 Web 应用程序解耦，我会将这些对象放在一个类库以及工厂。如果您实现一个新的 ISelector，您的工厂将需要更改，但如果您可以将整个 ISelector 系列与您的实际 Web 应用程序分离，那么与单体架构相比，您必须进行的重构深度将是最小的。

就我个人而言，对于关键任务设计问题，我倾向于避免使用 AppSettings、web.config 设置等。以 web.config 为例，我看到了存储架构数据以便于配置的应用程序。问题是在编译后你的 web.config 可以改变（毕竟这是它的目的），如果你的类的实现取决于选择的非常具体的值，当有人无意修改时，你就有崩溃的风险错误的值。

就像我说的那样，这一切都完全取决于您的应用程序架构，但我的反应是将未来可能需要修改的组件拆分到类库中。松耦合是你的朋友；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:57:47.750

与其在 AppSettings 中执行此操作，我认为更好的方法是创建一个单独的 XML 文件，该文件将仅保存映射，并且您可以从该文件遍历映射并在`GetSelector()`.

# api - 谷歌获取令牌调用的 redirect_uri 有什么意义？

> ID：13028600
> 
> 赞同：3
> 
> 时间：2012-10-23T10:39:16.583
> 
> 标签：api, oauth-2.0

我有一个使用 Google API 的网络应用程序。身份验证过程对 google 进行了两次调用，第一次获取 a `code`，第二次将 a 交换`code`为`token`。两个调用都带有一个`redirect_uri`参数。第一次调用按我的预期使用这个参数，重定向回`redirect_uri`，但是，第二次调用，获取令牌，不重定向，验证它似乎忽略了这个参数，那么它有什么意义呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:37:34.410

访问令牌请求中的`redirect_uri`参数在[OAuth 2.0 规范](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3)中被描述为 REQUIRED 。

其背后的原因在同一文档的[10.6节中有详细描述。](https://www.rfc-editor.org/rfc/rfc6749#section-10.6)简而言之：

1.  攻击者可以通过操纵`request_uri`授权请求来获取授权码。唯一能注意到这个技巧的两方是受害者（合法用户）和服务器。客户仍然不知道这些操作。
2.  即使使用该代码，攻击者也无法将其交换为访问令牌，但它可以尝试通过代表自己发送带有被盗代码的“回调响应”来欺骗客户端。
3.  如果客户端可以将收到的代码交换为令牌，它将授予攻击者访问受害者数据的权限。幸运的是，由于客户端`redirect_uri`与服务器看到的不匹配，请求将被拒绝。

# node.js - 使用 faye 通过 websockets 发送 javascript 对象

> ID：13028604
> 
> 赞同：42
> 
> 时间：2012-10-23T10:39:21.380
> 
> 标签：node.js, serialization, websocket, javascript-objects, faye

大家好，我正在尝试通过 websockets 发送一个 javascript 对象：

faye-websockets 文档说：

**send(message)** *接受 String 或 Buffer 并通过连接向其他对等方发送文本或二进制消息。*

服务器端我正在使用节点和 faye。

```
var WebSocket = require('faye-websocket');
var http = require('http');

var server = http.createServer();
server.addListener('upgrade', function(request, socket, head) {
    var ws = new WebSocket(request, socket, head);
    ws.send({topic:'handshake', data:'sdf487rgiuh7'});
});
server.listen(8000); 
```

客户端：

```
<script>
    var ws = new WebSocket('ws://localhost:8000');
    ws.onmessage = function(e) {
        console.log(e.data); //prints [Object object] string and not the object
    };
</script> 
```

我的错误是什么？谢谢

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-23T15:39:31.383

WebSockets 支持发送和接收：字符串、类型化数组 (ArrayBuffer) 和 Blob。Javascript 对象在发送前必须序列化为上述类型之一。

要将对象作为字符串发送，您可以使用内置的 JSON 支持：

```
ws.send(JSON.stringify(object)); 
```

要将对象作为类型化数组发送，您可以使用 javascript BSON 库，[例如](https://github.com/schteppe/js-bson)：

```
ws.send(BSON.serialize(object)); 
```

当您收到 WebSocket 消息时，您需要对其进行反序列化。

从 WebSocket 消息反序列化 JSON 字符串：

```
ws.onmessage = function (e) {
    var object = JSON.parse(e.data);
    ...
}; 
```

如果您在 WebSocket 上使用二进制消息，那么首先您应该设置 binaryType 属性，以便将所有二进制消息作为类型化数组接收：

```
ws.binaryType = "arraybuffer"; 
```

然后反序列化将如下所示：

```
ws.onmessage = function (e) {
    var object = BSON.deserialize(e.data);
    ...
}; 
```

这是一篇关于[在 Javascript 中使用 BSON](http://granular.cs.umu.se/browserphysics/?p=1025)的博客文章；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:00:49.437

我基本上正在使用 Socket.IO，但看起来您需要在服务器中对数据进行字符串化并在客户端中对其进行解析，如下所示：

在服务器中：

```
ws.send(JSON.stringify({topic:'handshake', data:'sdf487rgiuh7'})); 
```

在客户端：

```
console.log(JSON.parse(e.data)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-09T12:29:56.187

客户：

```
const bson = new BSON();
ws.binaryType = 'arraybuffer';

ws.onmessage = function(event) {
  console.log(bson.deserialize(Buffer.from(event.data)));
} 
```

服务器：

```
 const data = bson.serialize({ ... });
 ws.send(data); 
```

# mysql - 用于“实时”在嵌入式计算机之间同步数据的数据库和工具

> ID：13028610
> 
> 赞同：0
> 
> 时间：2012-10-23T10:39:50.397
> 
> 标签：mysql, database, embedded, real-time, synchronize

我有 3 个 Beagleboard 需要尽可能快地在彼此之间共享数据。它们正在运行 debian（带有实时内核）并通过 wlan 相互连接。

所有 beagleboards 都连接了不同的传感器。所有 Beagleboard 都需要实时获取其他 Beagleboard 的传感器数据（或至少尽可能快——这些数据用于执行器的控制算法）。

该系统应该用于演示一个概念，不需要 100% 防错，但尽可能接近。

设计这样一个系统的最佳方法是什么？

想法：为UDP广播和一些sql服务器设计程序，或者只是接收端的一个对象/类。

具有复制或集群的嵌入式 MySQL/高性能 MySQL。

SQLite - 需要一些插件？

任何其他解决方案可能会更好，我以前从未设计过这样的系统。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:53:10.647

如果“尽可能快”是您的要求，您需要自己共享数据并使用数据库来存储共享数据。

您可以实现发布者/订阅者机制。您的一个节点成为主节点，其他每个节点在启动时订阅该节点。主节点对来自订阅者的消息进行倍增和路由。

另一个（更快）选项是在没有主节点的情况下实现发布者/订阅者机制。每个节点都将自己注册到其他节点，这类似于您提到的广播。

# javascript - Nodejs 在 pub/sub 中从客户端发布

> ID：13028613
> 
> 赞同：7
> 
> 时间：2012-10-23T10:39:55.897
> 
> 标签：javascript, node.js, redis, socket.io

我正在尝试在 nodejs 中构建一个小应用程序来发布和订阅。我被困在如何从客户端发布。这是我的代码。

这是我的服务器代码（server.js）

```
var express = require('express'),
app = express(),
http = require('http'),
server = http.createServer(app);
app.use(express.bodyParser());

app.get('/', function(req, res) {
  res.sendfile(__dirname + '/public/index.html');  
});

app.post('/publish/:channel/:event/', function(req, res) {
  console.log("**************************************");
  var params = req.params;
  console.log(req.params);
  console.log(req.body);
  var data = req.body;
  console.log("**************************************");
  var result = io.sockets.emit(params.channel,{event:params.event,data:data});
  //console.log(result);
  console.log("**************************************"); 
  res.sendfile(__dirname + '/public/index.html');  
});

//include static files
app.use(express.static(__dirname + '/public'));

server = server.listen(3000);
var io = require('socket.io').listen(server);

io.sockets.on('connection', function (s) {
  socket = s
  socket.emit('c1', { hello: 'world' });

  socket.on('test', function (data) {
    socket.emit('c1', { hello: 'world' });
    console.log('test');console.log(data);
  });
}); 
```

这是客户端代码

```
var narad = {};
narad.url = 'http://192.168.0.46:3000';

narad.lisentingChannels = {}

var socket = io.connect(narad.url);

function Channel(channelName) {
  this.channelName = channelName; //serviceObject is the object of 
  this.events = {};
};

Channel.prototype.bind = function (event, callback) {
   this.events[event] = callback;
};

narad.subscribe = function (channelName)  {
  var channel = new Channel(channelName)
  this.lisentingChannels[channelName] = channel;

  socket.on(channelName, this.callbackBuilder(channel))

  return this.lisentingChannels[channelName];
}

narad.callbackBuilder = function (channel) {
  return function (data) {
    var callback = channel.events[data["event"]];
    callback(data.data);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:07:36.283

您可以`emit`在客户端和服务器 websocket 连接上使用该方法，取自[Socket.io](http://socket.io/#how-to-use)：

```
var socket = io.connect(narad.url);
socket.emit('publish', 'message'); 
```

然后在您的服务器上收听消息：

```
socket.on('publish', function (data) {
  // Emit the published message to the subscribers
  socket.emit('subscribers', data);
  console.log(data);
}); 
```

这样您就可以使用 websockets 的双向通信，而无需使用一些`POST`api。

# eclipse-rcp - 在 eclipse rcp 应用程序中从命令或文件对话框更新视图的最佳方法

> ID：13028617
> 
> 赞同：3
> 
> 时间：2012-10-23T10:40:04.050
> 
> 标签：eclipse-rcp

在我的应用程序中，我有一个打开的菜单 `SelectionDialog`，此对话框用于选择一个对象。选择此对象后，我必须在视图中显示它。

更新我的观点的最佳方式是什么？

目前，我`myview.update(object)`在对话框关闭后调用（在菜单的处理程序中）。但我认为这个解决方案设计得不好。

我已阅读有关更新我的模型并通知我的视图，但我的模型没有改变（没有数据改变，我只显示不同的 Data ）。

有人对良好的设计解决方案有一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:00:28.543

1.  定义模型监听器（dataPopulated(Event e)）
2.  使您的视图实现模型侦听器并将其注册到模型中。
3.  定义一个模型类，该类可以包含要在视图中填充的对象
4.  当调用 Model.setInput(Object input) 时，在所有注册的模型侦听器上触发 dataPopulated() 事件。

激活视图后，上述步骤可以正常工作。您需要考虑以下情况，例如视图是否已停用或不可见（确保刷新视图可见，否则刷新视图虽然不可见，但您将有不必要的开销）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:08:11.533

尝试在视图中添加选择侦听器并在对话框中注册此选择。

在侦听器操作中，添加代码以显示所选对象。

# php - 来自 php 代码的 jquery 和字符串

> ID：13028620
> 
> 赞同：0
> 
> 时间：2012-10-23T10:40:05.930
> 
> 标签：php, jquery, progress-bar

我有一个问题，例如如何将`$example=1;`变量传递给这个 jquery，比如括号中的值，其中是 20、40、60 .....：

```
<script type="text/javascript">
            $(document).ready(function() {

                $("#pb1").progressBar(20);
                $("#pb2").progressBar(40);
                $("#pb3").progressBar(60);
                $("#pb4").progressBar(70);
                $("#pb5").progressBar(100);
                $("#pb6").progressBar(100);

            });
    </script> 
```

主要问题是我想示例字符串具有数据库中的值，所以这就是为什么我需要在脚本之外制作它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:43:32.150

如果此代码在您的 .php 页面中...

```
<script type="text/javascript">
            $(document).ready(function() {

                $("#pb1").progressBar(<?php echo $pb1 ;?>);
                $("#pb2").progressBar(<?php echo $pb2 ;?>);
                $("#pb3").progressBar(<?php echo $pb3 ;?>);
                $("#pb4").progressBar(<?php echo $pb4 ;?>);
                $("#pb5").progressBar(<?php echo $pb5 ;?>);
                $("#pb6").progressBar(<?php echo $pb6 ;?>);

            });
    </script> 
```

其中 $pb1,$pb2,$pb3,$pb4,$pb5,$pb6 是整数..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:48:02.370

这很简单：

```
 <?php 
//Insert your code to generate the values to $example
$example = ...
?>

// and here is your JS with php code inside it

<script type="text/javascript">
            $(document).ready(function() {

                $("#pb1").progressBar(<?php echo $example; ?>);
                $("#pb2").progressBar(<?php echo $example1; ?>);
                $("#pb3").progressBar(<?php echo $example2; ?>);
                $("#pb4").progressBar(<?php echo $example3; ?>);
                $("#pb5").progressBar(<?php echo $example4; ?>);
                $("#pb6").progressBar(<?php echo $example5; ?>);

            });
    </script> 
```

我希望它有帮助！祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:45:17.370

如果您打算将 php 变量传递给客户端以动态替换 jquery 中的数字，您可以使用下面的代码

```
<script type="text/javascript">
            $(document).ready(function() {

                $("#pb1").progressBar(<?php echo example;  ?>);

            });
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:46:19.293

首先，将它放在您的数据库中并不意味着您不能在脚本中这样做。实际上有几种方法可以做到这一点。您可以让您的 javascript 文件是生成 javascript 而不是 html 的 php，或者更简单：您可以使用内联 javscript。但是，如果您确实想将两者分开，仍然可以：

```
[..]
<script type='text/javascript'>var percentageDone = <?php echo intval($example) ?>;</script>
<script type="text/javascript">
        $(document).ready(function() {

            $("#pb1").progressBar(percentageDone);

        });
</script>

[..] 
```

# java - 在 Java 中如何为 System.in 赋值？

> ID：13028625
> 
> 赞同：5
> 
> 时间：2012-10-23T10:40:39.960
> 
> 标签：java

> **可能重复：**
> [将数据写入 System.in](https://stackoverflow.com/questions/3814055/writing-data-to-system-in)

我们知道`System.in`（标准输入）连接到控制台。因此，每当我们在控制台中写入时，它都会流向该流。但是有没有办法在不从控制台输入的情况下将值传递给这个标准输入，例如`System.in = "ABCD"`. 我只想模仿，因为值是从控制台传递的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T10:43:34.280

就在这里。使用[`System.setIn(InputStream in)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setIn(java.io.InputStream)).

您也可以提供 的任何子类型`InputStream`，因此如果您想提供特定值，可以使用[`StringBufferInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/StringBufferInputStream.html)，如下所示：

```
StringBufferInputStream s = new StringBufferInputStream("ABCD");
System.setIn(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:42:45.987

我认为不是让您的方法直接访问 System.in：

```
public void process() {

    byte b[] = new byte[4000];
    int bytesRead = System.in.read(b);

    ...

} 
```

您应该将其考虑在内，以便将输入流传递到方法中：

```
public void run() {

    process(System.in);

}

public void process(InputStream is) {

    byte b[] = new byte[4000];
    int bytesRead = is.read(b);

    ...

} 
```

这为您提供了相同的行为，但也允许您使用自己为测试目的设计的输入流来调用业务逻辑。

# mysql - 如何使用连接编写 Hibernate HQL 查询？

> ID：13028628
> 
> 赞同：1
> 
> 时间：2012-10-23T10:40:49.960
> 
> 标签：mysql, oracle, hql

我是新来写`HQl`查询请帮帮我.. 实际上我`SQL Query`有 5 个表，即`COURSE`, `SKILLSET`, `TIMETABLE`, `INTREST`,`USER`

```
select
 (select count(*) from intrest) AS 
    NoAttends,course.NAME,course.TYPE,user.FIRSTNAME,user.LASTNAME,skill.COURSE_CONT,
   skill.TEACH_EXP,tt.CLASS_DUR,tt.COURSE_DUR,tt.DATE_TIME from COURSE course 
   inner join SKILLSET skill on
   skill.course_id=course.s_id 
   inner join USER user on 
   user.s_id=skill.user_id 
   inner join TIMETABLE tt on
   tt.course_id=course.s_id
   where course.name IN ('course') 
   ORDER BY course.name LIMIT 10; 
```

请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:53:37.160

尝试如下所示。. . . .

```
SELECT t1.col1, t2.col2, t3.col3 
FROM Table1 t1 JOIN t1.someGroupMemebers t2 
JOIN t2.someUser t3 WHERE t3.username = 'blah blah' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:24:05.627

将 JPA 用于 Hibernate 非常容易，例如：

```
 entityManager.createQuery("select cd from CourseDetailsVO cd join cd.course.keywords k where k.keyword in (:courseName) and cd.startDate between (:sDate) and (:eDate)", CourseDetailsVO.class);
setParameter("courseName", searchVO.getName())..
... 
```

EntityManager 将进行处理..

# c#-4.0 - 如何从 C#.Net 按钮单击上的所有文本框中清除特定文本框的值..？

> ID：13028639
> 
> 赞同：1
> 
> 时间：2012-10-23T10:41:26.857
> 
> 标签：c#-4.0

我在表单中保留了 10 个文本框，以便将值输入到我的 Sql 数据库中。在一个条目之后，我不想清除按钮单击事件中的所有文本框，我只需要清除按钮单击事件中要清除的 4 个文本框，以创建另一个条目。所以请有人帮我清除这个..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:43:24.023

单击按钮时，将空字符串显式分配给这四个文本框的 Text 属性。就像是。

```
textBox1.Text = "";
textBox2.Text = string.Empty;
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:32:24.067

`textBox1.Clear();` Is all you need to use for the selected boxes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:47:18.047

请为此使用列表和 Lambda 表达式：

```
List<TextBox> tb=new List<TextBox>() {textbox1,textbox2,textbox3,textbox4};
tb.Foreach(u=>u.Text=""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:46:50.013

点击按钮

```
TextBox1.Text="";
TextBox2.Text=""; 
```

# html - JQuery UI catcomplete不返回选定的结果

> ID：13028645
> 
> 赞同：1
> 
> 时间：2012-10-23T10:41:45.203
> 
> 标签：html, jquery-ui-autocomplete

我正在使用带有类别的 JQuery UI 远程自动完成。

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            cat = currentCategory;
            self._renderItem( ul, item );
        });
    }
});

$(function() {
        $( "#birds" ).catcomplete({
            delay:0,
            source: "/search.html?term="+ $("#birds").val(),
            minLength: 2,
            select: function( event, ui ){
            alert(ui.item.value);
            }
        });     
}); 
```

以下是我从源获得的结果：

[{"value":"只是一个产品","id":"1","category":"Category Name"}]

问题是我无法让警报（ui.item.value）工作并显示所选项目。

请问有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:52:08.150

这不是你处理源的方式。看到这个.. [http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source) 你可以使用

*   大批
*   细绳
*   回调函数

如果您想从 json 格式的页面接收数据，请使用 jquery 的 $.ajax() 查看 ajax [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

你可以做类似的事情

```
$.ajax({url: 'search.php?term='+$("#birds").val(),
dataType: 'json',
beforeSend: function(xhrObj){
xhrObj.setRequestHeader("Accept","application/json");
},
async: false,
success: function(data){
bArray=new Array;
bJson=data;
bArray.push(bJson[0].value);
bArray.push(bJson[0].id);
bArray.push(bJson[0].category);// for multiple records put these 3 lines in loop and replace 0 with a counter
}
});

$( "#birds" ).autocomplete({
source: bArray,
select:function(event,ui)
{alert(ui.item.value);}     
}); 
```

不要忘记声明 bArray, bJson

但我仍然会说你做错了。而不是一起使用 value,id,category ，您只使用其中一个作为自动完成。你能说出你在自动完成中到底显示了什么吗

# ruby-on-rails-3 - kaminari-bootstrap 与活动管理员冲突

> ID：13028649
> 
> 赞同：0
> 
> 时间：2012-10-23T10:41:56.440
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, activeadmin, kaminari

我的 rails 项目使用 Twitter Bootstrap 来实现主站点的外观。为了让 kaminari 更好地适应，我添加了 kaminari-bootstrap gem。到目前为止，一切都很好。

问题是 kaminari-bootstrap HTML 破坏了 active_admin 中的分页。

理想的做法是找到一种方法，只为主站点启用 kaminari-bootstrap，而不是为活动管理员启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:13:24.753

试试这可能会有所帮助，在您`application.css`删除您的`active_admin.css`. 然后重新启动您的服务器。

写在你的`active_admin.css.scss`文件中 -

```
@import "active_admin/mixins";
@import "active_admin/base"; 
```

然后尝试

# silverlight-4.0 - 如何将 Silverlight 子窗口作为单独的浏览器打开

> ID：13028654
> 
> 赞同：2
> 
> 时间：2012-10-23T10:42:12.393
> 
> 标签：silverlight-4.0

当单击任何按钮时，它应该将silverlight子窗口显示为弹出窗口，但不是模态弹出窗口，我想将子窗口打开为带有url的单独窗口/浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:55:26.340

请试试这个

```
 HtmlPopupWindowOptions options = new HtmlPopupWindowOptions();
  HtmlPage.PopupWindow(new Uri(http://localhost:51327/MyprintPage.aspx), "_newWindow", options); 
```

# ios - CLGeocoder reverseGeocode在中国的位置

> ID：13028656
> 
> 赞同：3
> 
> 时间：2012-10-23T10:42:15.913
> 
> 标签：ios, ios5, ios6

我正在使用 CLGeocoder reverseGeocodeLocation 从坐标中获取地址，似乎在中国正在返回“地理编码器失败：错误域=kCLErrorDomain Code=8”操作无法完成。（kCLErrorDomain 错误 8。）“对于 loc：50.820835 4.385551”。从 iOs 5.0 开始，有人在中国遇到过 reverseGeocodeLocation 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:59:48.733

kCLErrorDomain 错误 8 是 kCLErrorGeocodeFoundNoResult。

我在罗马尼亚遇到了类似的问题，但是，如果不是完整地址，下面的代码至少应该返回城市。

```
[_geoCoder reverseGeocodeLocation:location
                    completionHandler:
     ^(NSArray *placemarks, NSError *error) {

    // Iterate trough placemarks

    CLPlacemark *placemark = [placemarks objectAtIndex:i];                 
    NSDictionary *addressDict = [placemark addressDictionary];

    //addressDict should contain your info.

}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:50:36.853

有时在中国，您只能反转中国的地理编码位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T07:23:11.553

中国政府长期以来一直在封锁谷歌及其服务。对于北美地区的居民，请不要期望获得中国的详细地理信息。双方互相阻拦。

# ruby-on-rails - Rails：不同控制器的表单

> ID：13028660
> 
> 赞同：14
> 
> 时间：2012-10-23T10:42:19.960
> 
> 标签：ruby-on-rails

我正在开发一个带有登录页面的 Rails 应用程序。在登录页面上，用户可以注册该应用程序。对于登录，有一个带有额外控制器的额外视图。

它看起来像这样：

```
views/landinpage/index.html --> sign up form
views/login/index.html --> login form 
```

但我只想拥有一个控制器

```
controllers/login_controller --> create new user from sign up form & check login data 
```

所以我必须在登录页面视图和 login_controller 之间建立连接。

这是我的尝试：

```
<%= form_for @login, :url => { :controller => "login_controller", :action => "create" }, :html => {:method => :post} do |f| %> 
```

但它会引发路线错误：

```
No route matches {:controller=>"login_controller", :action=>"create"} 
```

我已经在routes.rb中定义了登录资源，但似乎问题出在其他地方？

```
resources :logins 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T10:53:37.437

试试这个

```
class LoginsController < ApplicationController
   def new
     ...
   end

   def create
     ...
   end
  ...
 end 
```

在你的 route.rb 文件中写

```
 match '/login/create' => 'logins#create', :as => :create_login
  or
  resources :logins 
```

在您的控制台中 - 编写 -`rake routes`并检查您的路线

然后

```
<%= form_for @login, :url => create_login_path(@login) do |f| %> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-23T10:44:45.023

我认为您的代码应如下所示：

```
<%= form_for @login, :url => { :controller => "login", :action => "create" }, :html => {:method => :post} do |f| %> 
```

现在无法对此进行测试，但我相信 _controller 部分不是必需的。

**更新：**

我经常使用的另一件事是有效的：

```
<%= form_for @login, :url => create_login_path(@login), :html => {:method => :post} do |f| %> 
```

您可能必须修复该`create_login_path`部分以匹配您的应用程序的路由，但这就是我通常定义这些视图的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:37:16.930

可以看到html表单动作部分，可以看！

你`config/routes`有

```
resources :posts

namespace :admin do
  resources :posts
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T09:43:21.170

试试这个

```
class LoginsController < ApplicationController
   def new
     ...
   end

   def create
     ...
   end
  ...
 end 
```

在你的**`routes.rb`**文件中

```
resources :logins do
    collection do
      post :create
    end
  end 
```

在你的**`views`**

```
<%= form_for @login, :url => create_login_path(@login) do |f| %>> 
```

# iphone - 如何显示搜索栏的取消按钮？

> ID：13028665
> 
> 赞同：15
> 
> 时间：2012-10-23T10:42:46.380
> 
> 标签：iphone, uinavigationbar, uisearchbar

当用户在搜索栏上开始编辑时，我想隐藏页面的导航栏，我还想显示一个取消按钮。
完成了，但是当我打开 UISearchBar 时无法访问我的取消按钮，谢谢大家。

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    self.navigationController.navigationBar.hidden=TRUE;
    CGRect r=self.view.frame;
    r.origin.y=-44;
    r.size.height+=44;

    self.view.frame=r;

    searchBar.showsCancelButton=TRUE;

} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-23T10:54:50.713

## 目标 C

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    self.navigationController.navigationBar.hidden = TRUE;
    CGRect r = self.view.frame;
    r.origin.y = -44;
    r.size.height += 44;
    self.view.frame = r;

    [searchBar setShowsCancelButton:YES animated:YES];
}

-(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:NO animated:YES];
} 
```

## 迅速

```
func searchBarTextDidBeginEditing(searchBar: UISearchBar) {
    self.navigationController.navigationBar.hidden = true
    var r = self.view.frame
    r.origin.y = -44
    r.size.height += 44

    self.view.frame = r
    searchBar.setShowsCancelButton(true, animated: true)
}

func searchBarTextDidEndEditing(searchBar: UISearchBar) {
    searchBar.setShowsCancelButton(false, animated: true)
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-23T11:05:05.330

使用此代码显示/隐藏取消按钮`SearchBar`

由于用户将在 SearchBar 中开始编辑，因此显示取消按钮。

仅当您正确设置了委托时，才能访问以下方法`SearchBar`。

```
 -(void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar
  {
    //This'll Show The cancelButton with Animation  
    [searchBar setShowsCancelButton:YES animated:YES];
    //remaining Code'll go here
  } 
```

隐藏`CancelButton`用户点击取消按钮

```
 - (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar
 {
        //This'll Hide The cancelButton with Animation  
      [searchBar setShowsCancelButton:NO animated:YES];
       //remaining Code'll go here
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-20T12:22:19.480

使用此代码

```
searchBar.showsCancelButton=YES; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-18T05:01:34.170

**斯威夫特 4：**

下面的 2 行代码对我有用，可以显示取消按钮：

```
searchBar.setShowsCancelButton(true, animated: true)
searchBar.showsCancelButton = true 
```

`searchBarTextDidBeginEditing()`单击搜索栏后，调用内部方法将显示取消按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T10:45:33.903

使用此代码显示`cancel`按钮。当您在 中输入文本时，它将显示按钮 `searchBar`。

```
-(void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:YES animated:YES];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T11:00:58.577

您需要使用 UISearchDisplayController，它会自动为您隐藏导航栏。这是代码，

```
-(void) createSearchBar
{
     _searchBar          = [[SearchBar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 44)];
     _searchBar.delegate = self;
     [self.view addSubview:_searchBar];

    searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:_searchBar contentsController:self];
    searchDisplayController.delegate = self;
    searchDisplayController.searchResultsDataSource = self;
    searchDisplayController.searchResultsDelegate = self;
    searchDisplayController.searchResultsTableView.sectionHeaderHeight = 10;
    searchDisplayController.searchResultsTableView.sectionFooterHeight = 0;
    [searchDisplayController.searchResultsTableView setSeparatorColor:[Color whiteColor]];  
} 
```

您必须在 .h 文件中实现协议 UISearchBarDelegate、UISearchDisplayDelegate、UITableViewDelegate、UITableViewDataSource。

_searchBar 和 searchDisplayController 也是在 .h 文件中定义的变量。

# android - 在不同的选项卡之间移动，而无需始终创建视图

> ID：13028667
> 
> 赞同：0
> 
> 时间：2012-10-23T10:42:54.490
> 
> 标签：android, tabs, views, android-fragments

我对我的程序有疑问。

我在操作栏中有 3 个选项卡（由片段组成），每个选项卡都显示不同的视图。这些视图具有从数据库中收集的大量信息以显示图表。问题是每次我从一个选项卡切换到另一个选项卡时，阅读的信息量都很大。问题：有没有办法只创建一次每个视图，然后在它们之间移动？

活动：

```
 String label1 = "one day";              
    Tab tab = actionBar.newTab();           
    tab.setText(label1);                
    TabListener<Tab1Fragment> tl = new TabListener<Tab1Fragment>(this, label1, Tab1Fragment.class);     
    tab.setTabListener(tl);                     
    actionBar.addTab(tab);                  
    String label2 = "two days";
    tab = actionBar.newTab();
    tab.setText(label2); 
    TabListener<Tab2Fragment> tl2 = new TabListener<Tab2Fragment>(this, label2, Tab2Fragment.class);
    tab.setTabListener(tl2);
    actionBar.addTab(tab);        
    String label3 = "three days";
    tab = actionBar.newTab();
    tab.setText(label3);
    TabListener<Tab3Fragment> tl3 = new TabListener<Tab3Fragment>(this, label3, Tab3Fragment.class);
    tab.setTabListener(tl3);
    actionBar.addTab(tab); 
```

选项卡侦听器类：

```
private class TabListener<T extends Fragment> implements ActionBar.TabListener{

    private Fragment fragment;              
    private final Activity activity; 
    private final String tag; 
    private final Class<T> classT; 

    public TabListener(Activity activityTab, String tagTab, Class<T> classTab) { 
        activity = activityTab; 
        tag = tagTab; 
        classT = classTab; 
    } 

    public void onTabReselected(Tab tab, FragmentTransaction ft) {  
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (fragment == null) {                                            
           fragment = Fragment.instantiate(activity, classT.getName()); 
           ft.add(android.R.id.content, fragment, tag); 
       } else { 
           ft.attach(fragment);                            }
    } 

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(fragment);
    } 
```

和其中一个片段（3个都是一样的，只是改变了R.layout.**）：

```
public class Tab1Fragment extends Fragment {
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    setRetainInstance(true);
    return (LinearLayout) inflater.inflate(R.layout.main, container, false); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:47:49.260

每个片段都可以保留其状态。调用`setRetainInstance(true)`片段构造函数。

然后，您应该仅在尚未获取数据时才获取数据（如果您将数据存储在 List 中，请在构造函数中将该列表设置为 null，在获取数据时创建并填充它，并在 onStart 方法中，如果list 为空，获取数据。否则，什么都不做）。

另请参阅：[在 ListAdapter 中使用 setRetainInstance 在 configurationChanges 上持久化列表项](https://stackoverflow.com/questions/9735514/persisting-list-items-in-listadapter-on-configurationchanges-with-setretaininsta)

# javascript - Guiders.js attachTo 在 iframe 中不起作用

> ID：13028674
> 
> 赞同：0
> 
> 时间：2012-10-23T10:43:16.257
> 
> 标签：javascript, guiders.js

我正在使用[guiders.js](https://github.com/jeff-optimizely/Guiders-JS)向用户提供提示。虽然当 div 位于 iframe 内时，我在使用 attachTo 参数时遇到问题。

这是向导的代码：

```
 guiders.createGuider({
    attachTo: '#'+thisId,
    buttons: [{name: "Ok", onclick: function(){
closeEdit();
    guiders.hideAll();
    }
    }],
    description: "<input value='new text'>",
    id: "guiderToChangeParameter",
    position: 3,
    title: "title",
    width: 400
    }).show(); 
```

如果 thisId 引用页面内的 div id，则 attachTo 有效。

如果 thisId 引用 iframe 中的 div ，则引导显示但**不附加到 div**。

这是 guiders.js 库的正常行为吗？有没有办法真正附加到 iframe 中的 div？

jsfiddle 显示 attachTo 工作： http: [//jsfiddle.net/y3mzP/1/](http://jsfiddle.net/y3mzP/1/) jsfiddle 不允许 iframe，所以很遗憾我无法重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:14:30.823

我不希望任何 JavaScript 能够访问 iFrame，而不仅仅是 guiders.js。如果您想让父页面上的元素位于父页面上的元素附近，则必须使用 iFrame 消息发布 (https://developer.mozilla.org/en-US/docs/DOM/window. postMessage) 让内部的脚本将目标元素的 x 和 y 位置中继到父框架上的脚本。

在您的情况下，您还可以创建一个绝对定位在父页面上的透明 div，使其大致位于您期望内部元素所在的位置。然后让 Guiders 附加到那个透明的 div 上。

# c++ - C++ - 在布尔值中返回值然后验证它

> ID：13028675
> 
> 赞同：0
> 
> 时间：2012-10-23T10:43:20.733
> 
> 标签：c++

今天我开始学一点c++，我开始用简单的代码来理解，但这让我很困惑

```
#include <iostream>

using namespace std;

class MyVar
{

    public:
        MyVar(){
            cout << "this is constructor" << endl;
        }
        void accesscheckpass(string x){
            checkpass(x);
        }

    private:
        bool checkpass(string x){
            if(x == "password"){
                return true;
            }
        }
};

int main()
{
    int inputpass;
    cout << "please enter your password\n" << endl;
    cin >> inputpass;

    MyVar MyAccess;

    if(MyAccess.accesscheckpass(inputpass) == true){
        cout << "welcome user 1" << endl;
    }else{
        cout << "get lost !" << endl;
    }

} 
```

我想在他/她输入密码时验证用户，然后到 IF 部分，当我想编译它时，编译器返回状态“从'int'到'const char *'的无效转换[-fpermissive]|” ，请有人修复我的代码并解释我错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:46:12.663

> 请有人修复我的代码

在我们解释问题后尝试自己修复它。与我们发布您的代码相比，您将从中获得更多。

> 解释我错了什么

当然。该方法`accesscheckpass`需要一个`std::string`as 参数（顺便说一句，您需要`#include <string>`在文件顶部）。你称之为

```
MyAccess.accesscheckpass(inputpass) 
```

但是`inputpass`被声明为`int inputpass;`，所以它是 and `int`，而不是 a `std::string`。因此，您要么必须声明`inputpass`为 a `string`，要么了解如何将 a 转换`int`为 a `string`。（应该很容易）

另外，你的方法：

```
 bool checkpass(string x){
        if(x == "password"){
            return true;
        }
    } 
```

仅在条件为真时返回。你也应该有一个`else`分支：

```
 else
        return false; 
```

或者，更好的是，直接返回结果。

```
 bool checkpass(string x){
        return x == "password";
    } 
```

和你的方法

```
 bool accesscheckpass(string x){
       return  checkpass(x);
    } 
```

也应该返回 a `bool`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:53:18.930

```
#include <iostream>
#include <string>

using namespace std;

class MyVar
{

    public:
        MyVar(){
            cout << "this is constructor" << endl;
        }

            bool accesscheckpass(string x){
            return checkpass(x);
        }

    private:
        bool checkpass(string x){

            if( x == "password" ){
                return true;
            }
            else
            return false;
        }
};

int main()
{
    string inputpass;
    cout << "please enter your password\n" << endl;
    cin >> inputpass;

    MyVar MyAccess;

    if( MyAccess.accesscheckpass(inputpass) == true ){
        cout << "welcome user 1" << endl;
    }else{
        cout << "get lost !" << endl;
    }

} 
```

以上是更正后的工作代码。发现的错误如下：

1.  “从‘int’到‘const char*’的无效转换[-fpermissive]|” 因为您将 int 传递给其参数是字符串类型参数的函数，所以 inputpass 的数据类型已更改。
2.  accesscheckpass() 没有返回任何内容，所以我返回了 checkpass() 的返回值。checkpass() 仅处理真实条件，因此添加了错误条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:46:27.697

`accesscheckpass(string x)`应该返回布尔值。

```
bool accesscheckpass(string x){
        return checkpass(x);
    } 
```

另外，`inputpass`应该是类型`std::string`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:47:54.957

改变：

```
int inputpass 
```

到

```
string inputpass 
```

因为您的密码是字符串，而不是整数。

此外，您的课程充满了错误！它应该看起来像这样：

```
class MyVar
{

    public:
        MyVar(){
            cout << "this is constructor" << endl;
        }
        bool accesscheckpass(string x){
            return checkpass(x);
        }

    private:
        bool checkpass(string x){
            if(x == "password"){
                return true;
            }
            else
            {
                return false;
            }
        }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:14:23.393

这是代码，你需要什么，它不是最好的代码，但它可以工作：

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

class MyVar
{

public:
    MyVar(){
        cout << "this is constructor" << endl;
    }
    bool accesscheckpass(string x){
        return checkpass(x);
    }

private:
    bool checkpass(string x){
        string pass = "password";
        for(int i = 0; i < x.length();i++)
            if(x[i]!=pass[i])
                return false;
        return true;
    }
    };

    int main()
    {
string inputpass;
cout << "please enter your password\n" << endl;
getline(cin, inputpass);
MyVar MyAccess;

if(MyAccess.accesscheckpass(inputpass) == true){
    cout << "welcome user 1" << endl;
}else{
    cout << "get lost !" << endl;
} 
```

}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-23T10:45:47.173

您阅读字符形式`std::cin`。您需要将这些字符解析为整数。

# javascript - 如何用两个值拆分传入的参数值？

> ID：13028676
> 
> 赞同：0
> 
> 时间：2012-10-23T10:43:20.317
> 
> 标签：javascript

我有这个 JS：

```
function SetAPIValue(key1, value1, scormVersion, methodCalled) {
   if (key1 == true || key1 == false) { }
   else
   {
     alert("value1 = " + value1);
     /* value1 came back with two values for cmi.suspend_data! */
     var obj = {
       key: key1,
       value: value1
    }
   setValuesArray.push(obj);
 } 
```

不知何故 value1 包含 key1 的两个值，当我推送到我的数组时如何吐出它们以便每个值和键都在一行中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:46:01.310

If`value1`是一个包含多个值的数组：

```
function SetAPIValue(key1, value1, scormVersion, methodCalled) {
    if (value1 instanceof Array) {
        for (var i = 0; i < value1.length; i++) {
            setValuesArray.push({
                key: key1,
                value: value1[i]
            );
        }
    } else {
        setValuesArray.push({
            key: key1,
            value: value1
        });
    }
 } 
```

请注意，这会给您留下多个具有相同键的对象，这可能是不可取的。

# ruby - 如何在 ruby 文件中获取程序的“入口点”？

> ID：13028678
> 
> 赞同：0
> 
> 时间：2012-10-23T10:43:24.383
> 
> 标签：ruby, module, path

我有三个 ruby​​ 文件，`a.rb`和`b.rb`如下`c.rb`：

要执行`c.rb`I could either`ruby a.rb`或`ruby lib/lib/c.rb`. 但我想区分这两种方法。所以在`c.rb`我想知道程序的入口点。（如果您熟悉node，则与.）相同`require.main`。）

```
dir
 -- a.rb
 -- lib
    -- b.rb
    -- lib
       -- c.rb

# a.rb
require 'lib/b'

# b.rb
require 'lib/c'

# c.rb
puts 'I am here' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:45:28.983

经典的做法是使用`__FILE__`and `$0`：

```
if $0 == __FILE__
  # code when this file is the entry point
end 
```

# javascript - 多行参数

> ID：13028679
> 
> 赞同：1
> 
> 时间：2012-10-23T10:43:27.563
> 
> 标签：javascript, titanium-mobile

```
[
{
"_id": "Some Comments.",
"Loan Name": "College Access",
"Description": "Some Comments.",
"Signer": "Some Comments.",
"Co-signer": "Some Comments.",
"Interest Rate": "0.0525",
"Deferment": "Some Comments."
}] 
```

这是我正在使用的 json。我想`Loan Name`在我的项目中检索值，但是存在一个空格，如果我通过多行标记问题直接给出贷款名称。我不知道如何解决它。如何访问 java 脚本中的值。

请任何帮助来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:49:42.903

做

```
 alert ( json[0]["Loan Name"]); 
```

[工作演示](http://jsfiddle.net/rh7zS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:51:22.017

数组表示法也适用于 JSON。由于您只有一个包含一条记录的数组，因此没有父级：

```
var test=[
{
"_id": "Some Comments.",
"Loan Name": "College Access",
"Description": "Some Comments.",
"Signer": "Some Comments.",
"Co-signer": "Some Comments.",
"Interest Rate": "0.0525",
"Deferment": "Some Comments."
}]

alert(test[0]['Loan Name']); 
```

作品

# image - 如何使用 TextField 加载图像并将其居中操作脚本

> ID：13028682
> 
> 赞同：0
> 
> 时间：2012-10-23T10:43:34.247
> 
> 标签：image, actionscript-3, flash

我需要在我的 Flash 项目中加载图像我不想使用 Loader 类，因为图像来自不同的域。

我用 TextField 加载图像这是我的代码：

```
var ti:TextField = new TextField();
ti.border=1
ti.htmlText += " <img id='movieInTxt' align='center' src='"+pic+"' />";
allMC[counter].img.addChild(ti); 
```

我正在将图像以盒子的形状加载到movieClip。我想将图像定位在中心。我怎样才能做到？

我试过`ti.autoSize = TextFieldAutoSize.CENTER`了，但它不起作用......

任何建议如何加载图像并将其放置在中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:25:09.693

你可以用`<p align='center'><img /></p>`我猜。

您完全可以在您不拥有的域上使用 Loader，因为您不访问图像上的任何高级属性（如像素级操作）。然后，您可以访问图像的大小，并将其置于容器的中心。

[AS3 文档](http://as3.blue112.eu/flash/display/Loader.html)说：

> **您可以从任何可访问的来源加载内容。**
> 
> 如果加载的内容是图像，则安全沙箱之外的 SWF 文件无法访问其数据，除非该 SWF 文件的域包含在图像源域的跨域策略文件中。

您可以通过传入构造函数来强制 flashplayer 不检查`crossdomain.xml`文件：`false``LoaderContext`

```
myLoader.load(urlReq, new LoaderContext(false)); 
```

# java - 用于列表类的 Mockito any()

> ID：13028688
> 
> 赞同：-1
> 
> 时间：2012-10-23T10:43:49.857
> 
> 标签：java, junit4, mockito

我试图编写一个单元测试，调用返回一个列表..但我似乎无法使用：

```
Mockito.any(List.class) 
```

我怎样才能做到这一点？有什么想法吗？...任何教程

```
Mockito.when(abilityRepository.findRandomAbilitySetForEventLogic(eventLogic, pageableForSingleResult)).thenReturn(abilitySetIds); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:12:53.377

javadoc 和教程表明这`any`是一个匹配器，而不是返回的东西。我相信你想做的是：

```
when(abilityRepository.findRandomAbilitySetForEventLogic(eventLogic, pageableForSingleResult)).thenReturn(ability_ids());

...

private List<AbilitySetId> ability_ids() {
    return new ImmutableList.of(...);
} 
```

当然，我编了一些名字，但这就是想法。

# sorting - 为 ASP.NET Telerik MVC 网格列设置列单击的排序方向

> ID：13028689
> 
> 赞同：1
> 
> 时间：2012-10-23T10:43:57.207
> 
> 标签：sorting, telerik, grid, telerik-mvc

目前在 Asp.net 中使用 Telerik MVC 3.0。我有几列的网格。当页面加载时，行被绑定。当我单击该列时，它应该在第一次单击时按降序排序，而不是按升序排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:01:09.340

您可以通过覆盖网格的 toggleOrder 方法来做到这一点。首先，定义一个新的 ReverseToggleOrder 函数：

```
function ReverseToggleOrder(l) {

    l = typeof l == "number" ? this.columns[l] : l;
    var n = "desc";
    if (l.order == "desc") {
        n = "asc";
    } else {
        if (l.order == "asc") {
            n = null;
        }
    }
    l.order = n;
    var m = $.inArray(l, this.sorted);
    if (this.sortMode == "single" && m < 0) {
        $.each(this.sorted, function () {
            this.order = null;
        });
        this.sorted = [];
    }
    if (m < 0 && n) {
        this.sorted.push(l);
    }
    if (!n) {
        this.sorted.splice(m, 1);
    }
}

function grid_onLoad(e) {

    var grid = $(this).data('tGrid');
    grid.toggleOrder = ReverseToggleOrder;
} 
```

然后在网格的 OnLoad 事件处理程序中，您需要覆盖其默认行为：

.ClientEvents(events => events.OnLoad("grid_onLoad"))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:26:50.463

Grid 不支持这样的排序配置。它总是先排序 ASC，然后再排序 DESC。

# jquery - 页面加载后 jQuery 选项卡隐藏

> ID：13028692
> 
> 赞同：0
> 
> 时间：2012-10-23T10:44:02.200
> 
> 标签：jquery, tabs, jquery-ui-tabs

我在[www.quickerbook.imobisoft.eu](http://www.quickerbook.imobisoft.eu)上使用 jQuery 选项卡控件。在右上角的“我的帐户”下，您可以看到选项卡出现一段时间并隐藏，直到页面完全加载。我尝试了很多帖子/论坛来解决这个问题，但由于 jQuery 的初学者水平，我无法解决这个问题。

请指导我如何隐藏标签？它应该在用户单击“我的帐户”选项卡时出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:52:59.767

'flash of unstyled content' 是因为页面显示之前 javascript 有 javascript 在页面中运行。

我喜欢采用modernizr 方法，将类名添加到根html 元素，然后使用css 隐藏基于js 启用的元素。

所以，在你的`<head>`

```
<script>document.getElementsByTagName("html")[0].className = 'js'</script> 
```

然后添加此样式以隐藏选项卡：

```
.js #hidden1{display:none} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:47:42.807

**在页面来源`Line: 63`（chrome 浏览器）。**您在使用页面加载后隐藏选项卡`.hide()`，

```
$('#hidden1,#hidden2,#hidden3').hide().click(function(e) {
        e.stopPropagation();    ^^^^
}); 
```

改成，

```
$('#hidden1,#hidden2,#hidden3').click(function(e) {
        e.stopPropagation();
    }); 
```

# nhibernate - 仅获取不同的记录 -Fluent Nhibernate 映射

> ID：13028696
> 
> 赞同：0
> 
> 时间：2012-10-23T10:44:30.397
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有两张桌子

```
Table A:
Id  | Attachment_id
1   | 123

Table B:
Id | doc_name |Attachment_id | version
1  | sab.txt  | 123          | 1
2  | sab.txt  | 123          | 2 
```

当我上传具有相同名称和内容的文件时，它会随着版本的增加而保存。由于 attachment_id 重复它会导致爆炸。您能否让我知道如何提供 FluentNhibernate 映射以仅获取最新版本的文档（即 2、sab.txt、123、2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:09:15.530

使用获取最后一个条目的公式

```
References(x => x.LastAttachment)
    .Formula("(Select b.Id FROM B b WHERE b.Attachment_id = Attachment_id ORDER BY version DESC LIMIT 1)"); 
```

# c# - 通过代码将XDocument转换为xsd文件

> ID：13028697
> 
> 赞同：0
> 
> 时间：2012-10-23T10:44:37.580
> 
> 标签：c#, xml, xsd

> **可能重复：**
> [如何在 C# 中以编程方式创建 XSD 文件？](https://stackoverflow.com/questions/10557253/how-to-create-xsd-file-programmatically-in-c)

我有一个 XDocument 对象，我想通过代码将其转换为 xsd 文件

我该怎么做？

我的项目如下所示：

```
WebClient client = new WebClient(); 
Stream stream = client.OpenRead("http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Vancouver+BC&mode=bicycling&language=fr-FR&sensor=false"); 
XDocument doc = XDocument.Load(stream); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:52:05.960

`XSD`如果加载`XML`的`XDocument`对象符合`XSD`格式，只需将其保存在扩展中。

```
WebClient client = new WebClient(); 
Stream stream = client.OpenRead("http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Vancouver+BC&mode=bicycling&language=fr-FR&sensor=false"); 
XDocument doc = XDocument.Load(stream);
// ...
doc.Save(@"C:\AnyFileName.xsd"); 
```

**添加**：或者如果`XML`不是`XSD`格式，那么您可以使用以下代码`XSD`根据输入生成：`XML`

```
doc.Save(@"C:\xmlFile.xml");
string parms = @"C:\File.xml /outputdir:C:\\";
string xsdExePath = @"C:\Program Files\...\xsd.exe";
ProcessStartInfo psi = new ProcessStartInfo(xsdExePath, parms);
var process = System.Diagnostics.Process.Start(psi); 
```

现在，您可以`XSD`在 C:\ 驱动器根目录下使用。

# javascript - 更改单选按钮上的 div 文本单击

> ID：13028699
> 
> 赞同：1
> 
> 时间：2012-10-23T10:44:38.977
> 
> 标签：javascript, jquery

我想将单选按钮值放在状态 div 中。状态 div 的文本应该根据用户选择的单选按钮而改变。我在下面使用的代码不起作用。请帮忙。谢谢！

HTML 代码：

```
 <form action="">
     <input type="radio" name="sex" value="male">Male<br>
     <input type="radio" name="sex" value="female">Female<br>
     <div id="status"></div>
  </form>​ 
```

JS代码：

```
 $(document).ready(function () {
    RadioStatus="";

    $("input[type='radio']:checked").each( function()
    { 
        if ($(this).attr('checked');)
              RadioStatus=$(this).val();
              $("#status").text(RadioStatus);
        });

    $("input[type='radio']").change(function()  
     {
             RadioStatus= $('input[type='radio']:checked').val()
            $('#status').text(RadioStatus);        
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:48:32.930

这应该有效：

```
$("input[type='radio']").click(function() {
    $('#status').text($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:49:51.923

对您的代码进行一些小的调整使其正常工作：

```
$(document).ready(function () {
    RadioStatus="";

    $("input[type='radio']:checked").each( function()
    { 
        if ($(this).attr('checked'))
              RadioStatus=$(this).val();
              $("#status").text(RadioStatus);
        });

    $("input[type='radio']").change(function()  
     {
             RadioStatus= $('input[type="radio"]:checked').val();
            $('#status').text(RadioStatus);        
    });
});​ 
```

见：http: [//jsfiddle.net/f6Tru/](http://jsfiddle.net/f6Tru/)

..或者你可以通过使用techfoobar的*真正简化它：*

```
$(document).ready(function () {
    $("input[type='radio']").click(function() {
        $('#status').text($(this).val());
    });
});​ 
```

反而。见：http: [//jsfiddle.net/RrhYM/](http://jsfiddle.net/RrhYM/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:50:32.103

你的单引号有问题`'`

改变：

```
RadioStatus= $('input[type='radio']:checked').val() 
```

到：

```
RadioStatus= $('input[type="radio"]:checked').val() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T10:50:59.660

试试这个代码

```
$('input[name ^=sex]').click(function() {
        $('#status').text($(this).val());
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T10:51:21.390

只需使用`change`来确定选择了一个单选按钮。然后使用`html`或`text`将所选单选按钮的值附加到您的`<div id="status">`.

```
$(document).ready(function () {
    $('input[type=radio]').on("change", function() {
        $('#status').html($(this).val());
        // Alternative
        // $('#status').text($(this).val());
    });
});​ 
```

[演示](http://jsfiddle.net/2wehw/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T10:51:36.603

[演示](http://jsfiddle.net/pintu31/5KJuM/2/)

```
$("input:radio").click(function() { //use $("input:radio[name='sex']").click if more radio buttons there
  $('#status').text($(this).val());
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T11:03:41.727

您可以使用以下 JS 代码来实现：

```
$("input").click(function(e){
     var selectedValue = e.currentTarget.value;                 
    $('#status').html(selectedValue );       
}); 
```

​</p>

​</p>

# c++ - 直接捕获没有变量的cin - C++

> ID：13028702
> 
> 赞同：4
> 
> 时间：2012-10-23T10:44:51.937
> 
> 标签：c++, cin

更多的是一个好奇的问题，但实际上是否可以将通过的任何内容传递`cin`给函数而不必浪费变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:21:11.630

您可以轻松地定义一个包装函数来执行此操作。

```
template<class T>
T get(std::istream& is){
  T result;
  is >> result;
  return result;
} 
```

任何体面的编译器都会使用 NRVO 来消除副本。

你可以像这样使用它

```
f(get<int>(std::cin)); 
```

确保不要在一个语句中多次使用它。如果您执行此类操作，则未指定流操作的顺序。

```
f(get<int>(std::cin),get<int>(std::cin)); 
```

您可以按任意顺序获得这两个整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:57:03.323

`cin`只是一个流，它没有任何魔法。您可以使用其他流方法来做任何您想做的事情。

查看[http://www.cplusplus.com/reference/iostream/](http://www.cplusplus.com/reference/iostream/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:55:09.313

你的问题的答案是否定的。为了通过流输入一些东西，你将不得不“浪费”一个变量。您不能将输入数据直接传递给没有中间变量的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T06:29:49.223

当然：

```
f(*std::istream_iterator<T>(std::cin)); 
```

不过，这可能并不比使用变量*更简单*，而且如果流无法提供`T`.

# javascript - JavaScript 地理编码不开始搜索

> ID：13028706
> 
> 赞同：2
> 
> 时间：2012-10-23T10:44:58.897
> 
> 标签：javascript, jquery, function, google-maps, geocoding

好吧，我目前正在将谷歌地图的一些功能移动到一个单独的文件中。在我的另一个文件中，我创建了一些主函数 search()，在其中我创建了包含另一个文件的这个工作流。我遇到的问题是 geocoder.geocode() 函数，它直到今天都运行良好，但我不知道出了什么问题。地理编码器被创建，然后跨过函数 geocoder.geocode() 而不实际做任何事情。有人有想法吗？

这是我的主要 file.js 的一部分：

```
//set the point.
var latlng = new google.maps.LatLng(55.379, -3.444);
//initialize the google map.
initializeMap(latlng, null, null, null);
//get selected country text from dropdown.
var address = $('#country option:selected').text();
//get entered postcode from textbox.
if ($("#postcode").val() != "") {
    address = $('#postcode').val() + ", " + address;
}
//do a google search and store the result.
var result = googleSearch(address); 
```

地址类似于：“NX5 897，美国”。这是functionCollection.js中的googleSearch

```
 function googleSearch(address) {

    var result;

    //setting up a geocoder search.
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ address: address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            result = results[0];
        }
        else {
            alert("Geocode was not successful for the following reason: " + status);
            result = null;
        }
    });
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:06:36.487

您正在返回异步请求 geocoder.geocode() 的结果。向 googleSearch 发送回调，或者只是从函数中调用您的函数。

```
 geocoder.geocode({ address: address }, function (results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    result = results[0];
}
else {
    alert("Geocode was not successful for the following reason: " + status);
    result = null;
}
somefunction(result); or callback(result) 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:04:46.880

这里

```
geocoder.geocode({ address: address }, 
```

您将变量传递`address`两次。

将变量名称更改为其他名称，例如`myaddress`并尝试

```
geocoder.geocode({ address: myaddress }, 
```

# wordpress - wordpress get_header 函数错误

> ID：13028711
> 
> 赞同：0
> 
> 时间：2012-10-23T10:45:15.590
> 
> 标签：wordpress

我正在使用 wordpress 的 20 elevan 主题。我的页面仅显示没有样式和标题内容的页面内容。当我登录管理员时，它会显示带有标题内容的页面。请让我知道为什么当我注销时页眉和页脚功能不起作用。我该如何解决这个问题？

```
http://govirtualassistants.com/

    <?php
     /**
  * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
* @package WordPress
 *  @subpackage Twenty_Eleven 
```

* @since 211 1.0 / ?> > > > > " /> * 根据正在查看的内容打印标签。 */ global $page, $paged;

```
wp_title( '|', true, 'right' );

// Add the blog name.
bloginfo( 'name' );

// Add the blog description for the home/front page.
$site_description = get_bloginfo( 'description', 'display' );
if ( $site_description && ( is_home() || is_front_page() ) )
    echo " | $site_description";

  // Add a page number if necessary:
  if ( $paged >= 2 || $page >= 2 )
    echo ' | ' . sprintf( __( 'Page %s', 'twentyeleven' ), max( $paged, $page )                    );

 ?></title>
 <link rel="profile" href="http://gmpg.org/xfn/11" />
 <link rel="stylesheet" type="text/css" media="all"
  href="<?php bloginfo(     'stylesheet_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
        <!--[if lt IE 9]>
  <script src="<?php echo get_template_directory_uri(); ?>/js/html5.js"                
    type="text/javascript">
   </script>
     <![endif]-->
     <?php
/* We add some JavaScript to pages with the comment form
 * to support sites with threaded comments (when in use).
 */
if ( is_singular() && get_option( 'thread_comments' ) )
    wp_enqueue_script( 'comment-reply' );

/* Always have wp_head() just before the closing </head>
 * tag of your theme, or you will break many plugins, which
 * generally use this hook to add elements to <head> such
 * as styles, scripts, and meta tags.
 */
wp_head();
      ?>
         </head>

       <body <?php body_class(); ?>>
         <div id="page" class="hfeed">
 <header id="branding" role="banner">

          <nav id="access" role="navigation">
            <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
            <?php /* Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
            <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
            <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
            <?php /* Our navigation menu. If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assigned to the primary location is the one used. If one isn't assigned, the menu with the lowest ID is used. */ ?>
            <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
        </nav><!-- #access -->
</header><!-- #branding -->

<div id="main"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:53:59.620

如果您打开 page.php 或 index.php

确保对 wordpress 标题的调用存在并且没有被注释掉！

IE

```
<?php get_header(); ?> 
```

我看到您的其他页面和帖子加载正常，如果您已将主页设置为页面，或使用不同的页面模板，请仔细检查对 wp head 的调用是否仍然是他们的。

马蒂

# php - 设计自己的日历视图....从哪里开始？

> ID：13028713
> 
> 赞同：0
> 
> 时间：2012-10-23T10:45:16.413
> 
> 标签：php, mysql, calendar

我正在用 PHP 和 MySQL 制作预订系统。到目前为止，预订系统正在运行，它会显示已预订的项目以及在哪些日期之间。

我现在需要做的就是在一个漂亮的日历视图中显示它，这样用户就可以看到哪些项目是为哪个日期和时间保留的，这比回显预订项目的开始和结束日期并订购要好得多日期...类似于议程的东西...

我现在在互联网上四处寻找一段时间，但没有太大成功。

如果有人碰巧知道周围有什么好的教程，我很想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:05:56.140

我找到了一个很棒的“jQuery 周历”，非常适合我的需要！事件由单行代码设置。通过在我预订项目时向此事件文件写入一行，预订将按天和小时显示在日历上。

编辑：日历可以在这里找到：[https ://github.com/robmonie/jquery-week-calendar](https://github.com/robmonie/jquery-week-calendar)

# ruby-on-rails-3.2 - ruby on rails 中的 500 内部服务器错误

> ID：13028715
> 
> 赞同：2
> 
> 时间：2012-10-23T10:45:17.047
> 
> 标签：ruby-on-rails-3.2, passenger

我正在使用乘客 3.0.17 部署我的 ruby​​ 3.2.6 项目。我的 httpd.conf 文件是：

```
<VirtualHost *:80>
      ServerName test.com
      DocumentRoot /var/www/html/test/public
      RackBaseURI /var/www/html/test/public
      <Directory /var/www/html/test/public>
         # This relaxes Apache security settings.
         AllowOverride all
         # MultiViews must be turned off.
         Options -MultiViews
      </Directory>
      PassengerMinInstances 1
</VirtualHost>

LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194/ruby
RailsSpawnMethod conservative 
```

当我通过启动乘客来部署我的项目时，它工作正常，但是在将图像上传到服务器时，它会引发**500 内部错误**。我无法找到此错误的原因，而且此错误是暂时的，并且在我通过删除保存在我的 ruby​​ 项目中的缓存重新启动乘客后被删除。

我是 ruby​​ on rails 的新手，无法弄清楚这个错误的原因以及为什么它在重新启动乘客时消失。

请指导我提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:52:59.067

阅读 Apache 错误日志文件。如果 Phusion Passenger 没有在浏览器中显示错误消息，那么它会将错误消息打印到日志文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-20T11:33:58.637

采用：

`passenger-status`

如果出现错误，您可能没有为您的 ruby​​ 版本安装 gam

采用：

`gem install passenger`

然后：

`passenger-install-apache2-module`

检查乘客是否运行：

`passenger-memory-stats`

或者

`passenger-status`

按照[Phusion 乘客的说明进行操作](https://www.phusionpassenger.com/documentation/Users%20guide%20Apache.html#install_on_debian_ubuntu)

您可能需要修改`mods-available/passenger.conf`以指向 rbenv 或 rvm ruby​​ 解释器，而不是`us/bin/ruby`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T09:41:10.010

有同样的问题，通过检查发现有多个乘客在运行`passenger-status`。杀死他们，然后`passenger start`再次在 上运行乘客，而不是 root 用户。

# cocos2d-iphone - 如何制作一个可选的块参数以用于 CCSequence？

> ID：13028716
> 
> 赞同：0
> 
> 时间：2012-10-23T10:45:21.353
> 
> 标签：cocos2d-iphone

基本上我想这样做：

```
-(void)doIt:(void(^)())block {

    [CCSequence *sequence = [CCSequence actions:
                              [CCDelayTime actionWithDuration:1.0f], 
                              (block ? [CCCallBlock actionWithBlock:block] : nil), nil];

    [self runAction:sequence];

} 
```

这样我就可以做到：

```
[self doIt:^{ [self somethingElse]; }]; 
```

也：

```
[self doIt:nil]; 
```

而不是当我不需要回调时必须这样做：

```
[self doIt:^{}]; 
```

...关于如何做这种事情的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:41:27.953

您可以检查以确保该块存在

```
if(block)
{
    //Sequence with block
}
else
{
    //Sequence without block
} 
```

# .net - 当可靠会话打开并且突发异步请求时，WCF 很慢

> ID：13028717
> 
> 赞同：4
> 
> 时间：2012-10-23T10:45:22.883
> 
> 标签：.net, wcf, nettcpbinding, ws-reliablemessaging

对于实验，我在 VS2012 上使用 .NET 4.5 创建了一个简单的“Hello World”WCF 服务和客户端。服务器托管在控制台应用程序上并使用 net.tcp 绑定。我编写了客户端代码来向服务器发送大量异步请求（总共 700 个请求）。一切都很顺利，直到我打开服务的可靠会话功能。开启后，服务突然跑得很慢，在我的机器上花了将近一分钟才完成 700 个请求。我尝试微调 Concurrency 和 Throttling 参数（见下文），但没有帮助。

有谁知道为什么会这样？有没有办法避免这种情况？

如果我关闭了 Reliable session 功能，或者我使服务调用同步，则不会发生缓慢。所以我认为这可能与 WCF 在 WS-ReliableMessaging 模式下处理挂起请求的方式有关。

编辑：当我将 netTcpBinding 更改为 wsHttpBinding 时，这也没有发生。这很奇怪，因为在这种情况下 wsHttpBinding 比 netTcpBinding 快得多。

编辑：在服务器端运行 Perfmon.exe 表明在上述情况下，“线程数”逐渐从 8 增加到 100 以上。

编辑：我的电脑（本地网络）上的一些测量吞吐量。看到案例 1 的性能非常缓慢并且几乎没有用处。

1.  异步 + NetTcpBinding/可靠吞吐量 -> 大约。14 次呼叫/秒（70 毫秒/次呼叫）
2.  Async + WsHttp/Reliable 吞吐量 -> 7957 call/s (0.12 ms/call)
3.  Sync + NetTcpBinding/Reliablethroughtput -> 3986 call/s (0.25 ms/call)

下面是我在实验中使用的服务器和客户端的代码和配置。

**服务器：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using System.ServiceModel;
using System.ServiceModel.Description;

[ServiceContract]
public interface IHelloService
{
    [OperationContract(IsOneWay=false)]
    string SayHello(string name);
}

[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode=InstanceContextMode.PerSession)]
public class HelloService : IHelloService
{
    public string SayHello(string name) {
        String s = string.Format("Hello {0}", name); 
        return s; 
    }
}

namespace WcfServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Uri baseAddress = new Uri("net.tcp://localhost:8080/hello");
            using (ServiceHost host = new ServiceHost(typeof(HelloService), baseAddress)){
                // Open and listen
                host.Open();
                Console.WriteLine("The service is ready at {0}", baseAddress);
                Console.WriteLine("Press <Enter> to stop the service.");
                Console.ReadLine();
                // Close the ServiceHost.
                host.Close();
            }
        }
    }
} 
```

**客户：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using System.ServiceModel;
using WcfClient.WcfServer;

namespace WcfClient
{
    class Program
    {
        static async Task PrintNameAsync(HelloServiceClient client, int cnt) {
            string s = await client.SayHelloAsync(string.Format("-- {0} --", cnt));
            Console.WriteLine(s);
        }

        static void Main(string[] args)
        {
            HelloServiceClient client = new HelloServiceClient("HelloService", "net.tcp://10.20.61.13:8080/hello");
            List<Task> tasks = new List<Task>();
            for(int i=0; i < 700; i++){
                Task t = PrintNameAsync(client, i);
                tasks.Add(t);
            }
            Task.WhenAll(tasks).Wait();
            client.Close();
        }
    }
} 
```

**服务器的 App.config：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="HelloServiceBinding">
                    <reliableSession ordered="true" enabled="true" />
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>
        <behaviors>
            <serviceBehaviors>
                <behavior name="HelloServiceBehavior">
                    <serviceMetadata policyVersion="Policy15" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                    <serviceThrottling maxConcurrentCalls="1000" maxConcurrentSessions="1000"
                        maxConcurrentInstances="1000" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="HelloServiceBehavior" name="HelloService">
                <endpoint address="net.tcp://localhost:8080/hello" binding="netTcpBinding"
                    bindingConfiguration="HelloServiceBinding" name="HelloService" contract="IHelloService" />
                <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

**客户端的 App.config：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="HelloServiceBinding" sendTimeout="00:01:00">
                    <reliableSession enabled="true" />
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:8080/hello" binding="netTcpBinding"
                bindingConfiguration="HelloServiceBinding" contract="WcfServer.IHelloService"
                name="HelloService">
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:03:59.417

从以下链接中找到了该问题的部分解决方法：

*   [http://blogs.msdn.com/b/endpoint/archive/2011/05/04/wcf-scales-up-slowly-with-bursts-of-work.aspx](http://blogs.msdn.com/b/endpoint/archive/2011/05/04/wcf-scales-up-slowly-with-bursts-of-work.aspx)
*   [http://support.microsoft.com/kb/2538826](http://support.microsoft.com/kb/2538826)

使用解决方法（使用 WorkerThreadPoolBehavior），测得的吞吐量如下：

1.  Async + NetTcpBinding/Reliable 吞吐量 -> 474 call/s (2.1 ms/call) ... 改进但不令人满意
2.  Async + WsHttp/Reliable 吞吐量 -> 7856 call/s (0.13 ms/call) ... 没有变化
3.  Sync + NetTcpBinding/Reliablethroughtput -> 2110 call/s 0.47 ms/call) ... 降级

请注意，上述案例 1 比 70 毫秒/调用显着提高。但是，它仍然落后于案例 2。对于案例 3，引入 WorkerThreadPool 行为会导致性能从 0.25 毫秒/调用下降到 0.47 毫秒/调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T15:23:46.830

看这个...

"**设置 MaxTransferWindowSize**

Windows Communication Foundation (WCF) 中的可靠会话使用**传输窗口**来保存客户端和服务上的消息。可配置属性**MaxTransferWindowSize**指示传输窗口可以容纳多少条消息。

在发送方，这表明**传输窗口在等待确认时可以保存多少条消息**；在接收器上，它指示**要为服务缓冲多少消息**……”

来源“MSDN：可靠会话的最佳实践”：http: [//msdn.microsoft.com/en-us/library/ms733795.aspx](http://msdn.microsoft.com/en-us/library/ms733795.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:45:36.997

您正在异步发送消息，但您已在 ReliableSessionBindingElement 上订购了="true"。这没有意义。将ordered 设置为false，因为它对您的场景更有意义。ReliableMessaging 会导致性能下降，因为它会在每个响应消息中添加一个 SequenceAcknowledgement。它还增加了 CreateSequence/CreateSequenceResponse 和 CloseSequence/CloseSequenceResponse 的开销，然后在会话开始和结束时进行 TerminateSequence/TerminateSequenceResponse 消息交换。

# pdf - 从 A4 页面获取两个 A6 完整小册子序列

> ID：13028724
> 
> 赞同：2
> 
> 时间：2012-10-23T10:45:37.983
> 
> 标签：pdf, pdf-generation, pdftk, imposition

我有一本 a6 pdf 书。我想将它转换为 a4 pdf，这样当我打印它时，我可以将 a4 页面一分为二（正反两面的内容相同，所以我最终会得到两份这本书）和将页面放在一起时，可以按顺序阅读（我认为这称为强制）

假设 A、B、C、D 是这本书的 4 页。我希望生成的文件是：

```
DA
DA 
```

和

```
CD
CD 
```

我说清楚了吗？

抱歉，如果我没有使用正确的术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:13:25.883

正如建议的那样，强大的**Multivalent 工具**是解决方案，但它们需要与我附加的脚本相结合才能执行您想要的任务

# 用法：

`2copiesinA4 filename.pdf multivalent relative path`

它需要指定 2 个参数：

*   1 个参数是带有**pdf**扩展名的文件名，
*   2 参数是**多价相对路径**

> 例如，如果您在**/mnt/home/中有****Multivalent.jar**，这将是您需要传递给脚本的**相对路径。**

 ****```
#!/bin/bash
file=$1
multivalentpath=$2
pages="`pdftk $file dump_data | grep NumberOfPages | cut -d : -f2`"
echo $pages
halfpages="`echo -n $(( $pages / 2 ))`"
echo $halfpages
h="$(pdfinfo $file | grep "Page size" | cut -d x -f1 | tr 'Page size:' ' ' | xargs)"
w="$(pdfinfo $file | grep "Page size" | cut -d x -f2  | tr 'pts' ' ' | xargs)"
echo $h
echo $w
doubleheight="`let MULTIPLICATION=$h*2; echo $MULTIPLICATION`"
doublewidth="`let MULTIPLICATION=$w*2; echo $MULTIPLICATION`" 
echo $doubleheight
echo $doublewidth
sequence="`for ((x=$pages, y=1;x>=$halfpages, y<=$halfpages;x--, y++)); do echo "$x $y "; done | awk 'NR %2==1 {print $1, $2, $1, $2 } NR % 2==0 { print $2, $1, $2, $1 }' | xargs | tr " " ","`"
echo $sequence
java -cp "$multivalentpath"Multivalent.jar tool.pdf.Impose -verbose -dim 2x2 -paper "$doubleheight"x"$doublewidth"pt -page "$sequence" $file
exit 0 
```

# 脚步

### 1.下载最新**免费**版本的**Multivalent**，里面有工具

**多价**

*   [https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html](https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355/Multivalent20060102.jar.html) （包含工具的最新免费版本，当前本身没有工具）

把它放在磁盘上的某个地方，记住它的**相对路径**

* * *

### 2\. 将上面的脚本复制到一个文件中并允许执行（您可以将此文件命名为*2copiesina4.sh*）并启动脚本

> ### 重要提示：仔细检查您的 PDF 的页数是否为*4 * 的整数倍数*（如 4,8、12、16...等等）

我上传了一些示例文件

*   [http://ge.tt/92slb5Q/v/2](http://ge.tt/92slb5Q/v/2) A6 格式的 pdf，16 页长
*   [http://ge.tt/92slb5Q/v/3](http://ge.tt/92slb5Q/v/3)在上面的脚本的帮助下生成的 pdf 输出

生成的**IMPOSED**文件如下所示*（参见 gif 动画*

![在一张 A4 纸上拼版 2 个 A6 副本的动画](../Images/c167e7ccd68af752d7c360bc3087f1fd.png)

### 第 3 步

打印完成后，您将拥有最后一页，成为您打印的大量纸张的第一页

您将在** A4 长边** 上的纸张中心（14.8 厘米）剪下这张纸，以将形成 2 本书的两块分开

![第一次水平切割](../Images/edbc0a36fd1cdb51c5620b87e91b8389.png)

然后再次切割两张纸块，以便能够关闭另一个上的每个生成的子锁，以使书具有连续的页面顺序

![第二次切割](../Images/c0616655fa0c5cf711dbf27413cf55e4.png)

＃笔记

这是通常为获得所谓的**小册子**（A5 肖像书，在 A4 横向纸上打印 2 页）所做的工作的重复**，显然，在我们的例子中，同样可以为 A6 书做打印在 A4 上以获得整本书的 2 份副本，修改一些东西但具有相同的逻辑**

拼版顺序，需要页面的顺序是这样的：

**最后 - 第一，第二 - 倒数第二，倒数第二 - 第三......等等......**

对于 16 页的书，拼版顺序为：

**16 1, 2 15, 14 3, 4 13, 12 5, 6 11, 10 7, 8 9**

在我们的例子中，因为我们想在 A4 纸上获得同一本书的两份完整副本，所以我们在同一张纸上重复了**这个**序列**两次**

我还开发了一种方法，根据我的个人需要，在 A4 纸上获得一份**A6**小册子副本，如果您**只**需要使用 A4 纸打印的书的一份 A6 副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:34:42.090

你想“强加”你的 PDF 页面，多价可以做到这一点 [http://multivalent.sourceforge.net/Tools/pdf/Impose.html](http://multivalent.sourceforge.net/Tools/pdf/Impose.html)****

# sqlite - 在sqlite中删除+排序（Android）

> ID：13028725
> 
> 赞同：4
> 
> 时间：2012-10-23T10:45:39.047
> 
> 标签：sqlite

我有一个表格用于保存我的应用程序的排名，其中包含以下字段：`[id,username,score]`我想清理表格，只保留前 100 个条目。

我该怎么做这个删除？我试过`DELETE FROM ranking ORDER BY score DESC LIMIT 100,999999999)`但它返回一个错误：

```
Error: near "ORDER": syntax  error 
```

我考虑过的其他选择是：

```
DELETE FROM ranking WHERE id NOT IN (SELECT id FROM ranking ORDER BY score 
  DESC LIMIT 100) 
```

但我不知道它是否有效

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T10:51:07.367

我想你正在寻找这个：

```
DELETE FROM ranking WHERE id NOT IN (
    SELECT id FROM ranking ORDER BY score DESC LIMIT 100); 
```

这是说明这个概念的[**SQL Fiddle 。**](http://sqlfiddle.com/#!5/308d4/1)

它非常有效（事实上，它非常典型），因为嵌套查询只执行一次。它实际上更多地取决于“分数”是否被索引覆盖 - 与否：

（无索引）：

```
EXPLAIN QUERY PLAN DELETE FROM ranking WHERE id NOT IN (
   SELECT id FROM ranking AS ranking_subquery ORDER BY score DESC LIMIT 2);

--
selectid   order   from   detail
0          0       0      SCAN TABLE ranking (~500000 rows)
0          0       0      EXECUTE LIST SUBQUERY 0
0          0       0      SCAN TABLE ranking AS ranking_subquery (~1000000 rows)
0          0       0      USE TEMP B-TREE FOR ORDER BY 
```

（之后`CREATE INDEX ts ON ranking(score);`）

```
selectid   order   from   detail
0          0       0      SCAN TABLE ranking (~500000 rows)
0          0       0      EXECUTE LIST SUBQUERY 0
0          0       0      SCAN TABLE ranking AS ranking_subquery USING INDEX ts (~1000000 rows) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:51:29.450

所有行都有内置字段`rowid`。试试这个：

```
DELETE FROM [tbl_names] WHERE rowid not in 
(select rowid from [tbl_name] order by score desc limit 100 ) 
```

您可以[在此处阅读更多相关信息](https://stackoverflow.com/questions/7700376/sqlite-delete-row-count)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:49:53.570

试试这个：

```
DELETE FROM ranking WHERE id NOT IN 
   (SELECT id FROM ranking ORDER BY SCORE limit 100) 
```

假设您的 ID 列没有重复项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:52:04.900

你可以试试这个

```
delete from ranking where id not in
 (select top(100) * from ranking order by score) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-05T19:54:13.797

这里的答案是处理您的情况的好方法。我想添加一个答案来解释您的语法错误的来源。

DELETE 上的 ORDER 和 LIMIT 子句是 sqlite 的编译时选项。我只是花了几个小时艰难地学习这一点：D。

来自[https://www.sqlite.org/compile.html#enable_update_delete_limit](https://www.sqlite.org/compile.html#enable_update_delete_limit)：

> SQLITE_ENABLE_UPDATE_DELETE_LIMIT
> 
> 此选项在 UPDATE 和 DELETE 语句上启用可选的 ORDER BY 和 LIMIT 子句。
> 
> 如果定义了这个选项，那么在使用 Lemon 解析器生成器工具生成 parse.c 文件时也必须定义它。因此，仅当库是从源代码构建时才可以使用此选项，而不是从合并或从网站上为非类 Unix 平台提供的预打包 C 文件的集合中构建的。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-23T10:49:35.700

某些单词，如 SELECT、DELETE 或 BIGINT [或 ORDER] 是保留的，需要特殊处理才能用作表名和列名等标识符。

传统的 MySQL 报价：

```
DELETE FROM ranking ORDER BY `score` DESC; 
```

正确的 (ANSI) SQL 引号（一些数据库也支持 [order]）：

```
DELETE FROM ranking ORDER BY "score" DESC; 
```

尽管我会考虑重命名该列以避免将来出现此类令人困惑的问题。

# objective-c - 将数据永久保存在 iOS 设备上

> ID：13028731
> 
> 赞同：2
> 
> 时间：2012-10-23T10:45:55.993
> 
> 标签：objective-c, ios, core-data, udid

我想将数据保存在设备本身上，即使在删除应用程序并再次安装后也能持久保存（数据甚至可以是一个整数/日期）。据我所知，这是不可能的，因为每个应用程序只能在其沙盒上存储数据（我知道我可以使用 iCloud 等，但我不希望任何服务用户不能拥有或授予应用程序特定权限）。

据我了解，唯一的选择是将其存储在我的服务器上。但是，Apple 不允许发送 UDID 或任何其他特定设备 ID，我无法获得 iTunes ID。我知道我可以使用任何其他 ID，例如 Facebook ID，但该应用程序没有它，这会带来非常糟糕的用户体验。

我已经下载了成功完成此操作的应用程序（专门将数据保存到我的设备中，即使在删除后也可以恢复，无需输入任何 ID 或登录过程）。他们是如何做到的呢？他们是否将 UDID 发送到某个服务器而苹果错过了这一点，或者有一种方法可以在应用程序沙箱之外保存数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:48:08.567

好吧，有 KeyChain，它可以存储即使您删除应用程序也会保留的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T10:49:00.847

我们在我们的应用程序中也这样做：

基本上，我们创建自己的 UDID 并将其存储在设备上（在钥匙串中）。结合用户 ID，我们可以在服务器端识别用户和他的设备。我们不会在设备上存储任何其他应用程序数据，全部由服务器管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T00:43:31.320

您可以打包数据，将其存储在应用程序的文档文件夹中，然后将设备备份到云或 iTunes。然后，您可以进行还原以将其取回。在备份和还原之间，您无法在手机上执行任何操作。只是说。

# objective-c - 超级视图旋转后UIButton没有收到触摸

> ID：13028734
> 
> 赞同：2
> 
> 时间：2012-10-23T10:46:19.703
> 
> 标签：objective-c, ios, caanimation

我正在使用 UICollectionView，并且通过子类化该类来定义自定义 UICollectionViewCell。类的初始化器定义了两个视图，就像这样：

```
 [[NSBundle mainBundle] loadNibNamed:@"ProtelViewCellFlipped" owner:self options:nil];

    CATransform3D transform = CATransform3DMakeRotation(M_PI, 0, 1, 0);
    [flippedView.layer setTransform:transform];
    [flippedView setHidden:YES];
    [self addSubview:flippedView];

    [[NSBundle mainBundle] loadNibNamed:@"ProtelViewCell" owner:self options:nil];
    [self addSubview:selfView];
    [selfView.layer setZPosition:1]; 
```

其中flippedView 是“ProtelViewCellFlipped”xib 文件定义的视图，selfView 是“ProtelViewCell”xib 文件中定义的视图。视图层次结构是这样[的：视图层次结构 http://massimomarra.altervista.org/gerarchia.png](http://massimomarra.altervista.org/gerarchia.png)

问题是翻转的视图被旋转了（好像它是“selfView”视图的另一边）`CATransform3D`，然后它被隐藏了。没关系，它有效。

视图上`selfView`有一个 UIButton。在视图的右下角。如果我按下该按钮，则会触发此方法：

```
- (void)infoButtonPressed:(UIButton *)sender
{
    NSString *animationKey = (selfView.layer.zPosition > flippedView.layer.zPosition)? @"forward" : @"backwards";
    CGFloat animationDuration = 0.3;

    if (selfView.layer.zPosition > flippedView.layer.zPosition)
        [self.layer removeAllAnimations];

    CABasicAnimation *rotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
    [rotation setValue:animationKey forKey:@"id"];
    rotation.toValue = [NSNumber numberWithFloat:M_PI];
    rotation.duration = animationDuration;
    rotation.removedOnCompletion = NO;
    rotation.fillMode = kCAFillModeForwards;
    [self.layer addAnimation:rotation forKey:animationKey];

    [self performSelector:@selector(flipLayers) withObject:nil afterDelay:animationDuration/2];
} 
```

使`self`视图随动画一起旋转。此外，在动画期间调用此方法：

```
- (void)flipLayers
{
    [selfView setHidden:!selfView.hidden];
    [flippedView setHidden:!selfView.hidden];

    [selfView.layer setZPosition:flippedView.layer.zPosition];
    [flippedView.layer setZPosition:(1-selfView.layer.zPosition)];
} 
```

这样`flippedView`变得可见（并`selfView`隐藏），并且他的层的 zPosition 变得高于`selfView`。

所以现在我有了`flippedView`可见的，它显示正确。它还有一个按钮，但要触发他的动作，我必须在另一个位置点击：[翻转视图方案：我必须在旋转之前点击按钮“是”的位置 http://massimomarra.altervista.org/s03KRJAUk7C_nP3yTXb7TBQ.png](http://massimomarra.altervista.org/s03KRJAUk7C_nP3yTXb7TBQ.png)

似乎旋转只是修改了视图的图形，而不是内容。你能帮我么？

提前谢谢大家！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:40:06.483

在更改方向之前将按钮转换回标识

像这样的东西：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
{

    oneButton.transform=CGAffineTransformIdentity;
} 
```

我不知道为什么，但它似乎工作

# javascript - javascript添加数组项以形成值

> ID：13028741
> 
> 赞同：0
> 
> 时间：2012-10-23T10:46:27.363
> 
> 标签：javascript, forms

我有一个带有隐藏字段的表单：

```
<input type="hidden" name="newdesc[]" id="newdesc" /> 
```

我有一个自动查找和一个加号按钮，因此加号按钮将自动查找的字段值添加到数组中：

```
newdesc_a.push(document.getElementById('autocomplete1').value);
var x=document.getElementById("businesslist");
x.innerHTML=newdesc_a;
document.getElementById('newdesc').value = newdesc_a; 
```

（newdesc_a 之前被声明为一个数组）

它更新 div OK (businesslist) 但不将值分配给 newdesc。

我相信这很简单，但它让我发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:10:05.020

鉴于该`name="newdesc[]"`属性，我假设 PHP 在服务器端。当您两次或多次提交密钥时，脚本中只有最后一个值通过`$_REQUEST`. 相反，对于以 结尾的键`[]`，PHP 会构建一个数组并通过`$_REQUEST['key']`. 请注意，此行为是特定于应用程序的，在 HTTP 级别没有像*数组这样的东西。*

现在，您想将一个数组从客户端 (Javascript) 传递到后端 (PHP)。你有两个选择：

1.  使用专有格式，例如用逗号或冒号分隔值，并在服务器端拆分字符串（或者您可以使用现有格式，如 JSON、XML 等）

2.  利用 PHP 语法传递数组

看来您想采用第二种方式，因此您需要提交如下表格

```
<input name="email[]" value="joel@example.com" />
<input name="email[]" value="mark@people.com" />
<input name="email[]" value="bill@hello.com" /> 
```

`$_REQUEST`如果您像这样构建表单，PHP 将能够访问一个普通数组。现在，您遇到了按需以编程方式构建表单的问题。这是我能想到的最好的（jQuery）：

```
var email = $("#autocomplete").value;

// if you really need to keep emails in an array, just
// emails.push(email);

$('<input type="hidden">').attr({
    name: 'email[]',
    value: email
}).appendTo('#myForm'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:49:54.263

您想为该元素分配一个特定的数组值吗？

你可以这样使用。

```
document.getElementById('newdesc').value = newdesc_a.index; 
```

其中'index'是数组的索引。代替它。

# java - 使用 JIRA Rest Java 客户端库需要什么？

> ID：13028743
> 
> 赞同：0
> 
> 时间：2012-10-23T10:46:33.640
> 
> 标签：java, jira

我将制作一个简单的应用程序来使用 JIRA Rest Java 客户端库连接到 JIRA。`jira-rest-java-client-0.6-m8.jar`但是除了我需要它之外，我不知道所有东西（API、jars 等） 。

我不知道起点。在我的 Eclipse 中安装 maven 插件后，我在他们的网站上看到了教程并使用了相同的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:53:04.053

我已经使用里程碑 4 设置了一个测试项目，使用该 lib 和他们站点中建议的 maven 依赖项。

此链接应该可以帮助您找出需要包含在 pom.xml 中的依赖项：

[http://www.versioneye.com/package/com~atlassian~jira--jira-rest-java-client/version/0~6-m8](http://www.versioneye.com/package/com~atlassian~jira--jira-rest-java-client/version/0~6-m8)

# c++ - 如何使用 auto 和 decltype 关键字来简化模板参数推导？

> ID：13028749
> 
> 赞同：3
> 
> 时间：2012-10-23T10:46:50.547
> 
> 标签：c++, templates, gcc, c++11

我正在实现合并排序算法。问题是当我尝试在算法中使用自动推导类型的向量时。

```
template <typename TIterator, typename TCompare>
void mergeSort(TIterator begin, TIterator end, TCompare criterium)
{
     //...
     auto help = *begin;                // help is a value (not a reference)
     QVector<decltype(help)> leftPart;  // now decltype(help) is also a value
     //...                              // and not a reference
} 
```

这行得通。

但是一旦我让算法通过`TIterators`常量引用，我就会得到一个我一生中从未遇到过的错误：

```
template <typename TIterator, typename TCompare>
void mergeSort(const TIterator& begin, const TIterator& end, TCompare criterium)
{
     //...
     auto help = *begin;                    // help is a value (not a reference)
     QVector<decltype(help)> leftPart;  // now decltype(help) is also a value
     //...
} 
```

结果是：

```
In function 'void mergeSort(const TIterator&, const TIterator&, TCompare)':
internal compiler error: in type_unification_real, at cp/pt.c:14176 
```

我正在`g++ 4.6.3`使用`Ubuntu`

什么地方出了错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T11:12:09.870

*每当编译器失败*时，就会发生内部编译器错误，这意味着您发现了一个错误。这就是早期采用新标准通常被称为最*前沿*的原因：有时，它会让你流血；）

您的代码可能有问题，也可能没有。仅凭此输出无法判断。可以肯定的是编译器不支持它，因此您可能想要更改它。

特别是，查找`std::iterator_traits<>`以查看您可以从迭代器的类型中推断出的所有内容：

```
typename std::iterator_traits<TIterator>::value_type help = *begin;
                                     // ::reference
                                     // ::pointer
                                     // ... 
```

通过绕过自动推导，您可能能够克服编译器错误。

* * *

注意：如果您希望报告错误，这当然值得称赞，您将被要求生成一个重现该问题的预处理文件。该文件应尽可能小。它可以`-E`在 gcc 命令行上生成，通常以`.ii`扩展名结尾。

# php - Netbeans 未在 Wamp 上与 xdebug 连接：“显示等待连接”

> ID：13028768
> 
> 赞同：1
> 
> 时间：2012-10-23T10:48:02.250
> 
> 标签：php, netbeans, xdebug

以下是我在`bin\php\php5.3.9\php.ini`和中的配置`bin\apache\Apache2.2.21\bin`

```
[xdebug]

zend_extension = "D:/wamp/php/ext/php_xdebug-2.2.1-5.2-vc9-nts.dll"
xdebug.profiler_output_dir = "D:/wamp/tmp/xdebug"
xdebug.profiler_output_name = "cachegrind.out.%p"
xdebug.profiler_enable = 0
xdebug.profiler_append=0
xdebug.extended_info=1
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.idekey=xdebug
xdebug.remote_log="D:/wamp/tmp/xdebug/xdebug_remot.log"
xdebug.show_exception_trace=0
xdebug.show_local_vars=9
xdebug.show_mem_delta=0
xdebug.trace_format=0 
```

当我`php_xdebug-2.2.1-5.2-vc9-nts.dll`在里面`wamp/php/ext/`和里面`\wamp\bin\php\php5.3.9\zend_ext`

但它仍然没有在 phpinfo() 中显示 xdebug 信息，也没有与 xdebug 连接。

它长时间显示**“等待连接” 。**

请帮助我如何进行此配置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T04:55:48.133

对于 Wamp Server，请确保您在正确的 php.ini 中进行更改。有2个文件-

1.  \wamp_server\bin\php\php5.5.12\php.ini
2.  \wamp_server\bin\apache\apache2.4.9\bin\php.ini

我正在对第一个文件进行更改。然后我通过单击 wampserver 图标 - > PHP - > php.ini 检查正在使用的 php.ini 文件（该文件的位置在 apache 目录中，而不是我假设的 php）

更改第二个文件对我有用。

编辑 php.ini 文件以包含以下代码：

```
zend_extension=[path to xdebug .so/.dll]
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T19:51:17.373

刚刚决定发布我与 Xdebug 的成功斗争。我所做的只是对 php.ini 进行了更改：

```
zend_extension = "D:/wamp/bin/php/php5.3.13/zend_ext/php_xdebug-2.2.0-5.3-vc9.dll"

xdebug.remote_enable = 1

xdebug.idekey="netbeans-xdebug"

xdebug.profiler_enable = 1 
```

我希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:07:25.757

要与 netbeans 连接，您需要在 Tools>Options>PHP>Debugger settings 中进行配置，并在上面的 php.ini 中进行更改：

```
xdebug.idekey=xdebug 
```

至

```
xdebug.idekey="netbeans-xdebug" 
```

希望有帮助

# html - HTML5 post message, 来源可以被篡改吗

> ID：13028769
> 
> 赞同：1
> 
> 时间：2012-10-23T10:48:06.520
> 
> 标签：html, iframe

我正在尝试使用 HTML5 实现跨域身份验证。

domain 2 会向 domain1 iframe 发送消息以获取数据， domain1 会检查来源并获取数据。用户数据将是电子邮件地址。

有人可以篡改消息的原始属性（例如通过更改主机文件），伪装成 domain2，将消息发布到 domain1 Iframe，并获取用户的电子邮件地址吗？

谢谢

图科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:35:20.787

是的，用户可以篡改它。

Javascript 在用户的网络浏览器中执行。客户端发生的一切都可以由用户控制和操纵。用户甚至不必为此操作主机文件，还有许多其他方法可以伪造 HTTP POST 请求。

任何不能被用户操作的东西都必须在服务器端完成。

当您需要跨域身份验证时，您通常会在托管 domain1 的服务器上生成一个长的随机 ID 号（也称为令牌）。此令牌既发送给用户，也发送给托管 domain2 的其他服务器。当用户随后访问域 2 时，它可以提供从域 1 获得的令牌（通常作为从域 1 到域 2 的 URL 的一部分）。这允许 domain2 识别用户。

# asp.net - 使用网站传输xml

> ID：13028774
> 
> 赞同：0
> 
> 时间：2012-10-23T10:48:12.623
> 
> 标签：asp.net, xml, webresponse

如何设置一个场景，其中托管在 X 上的一个网站发布一个 URL，当浏览到该 URL 时将返回纯 XML。

其他地方的网页将访问此 URL，将 XML 加载到对象中。

所以我想要一个像[http://www.xml.com/document.aspx?id=1这样的网址](http://www.xml.com/document.aspx?id=1)

另一个站点将使用 webresponse 和 webrequest 对象从上面的页面获取响应，我希望响应是好的 XML，所以我可以使用 XML 来填充对象。

我确实得到了一些工作，但响应包含呈现页面所需的所有 HTML，我实际上只想要 XML 作为响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:22:16.593

可能最好的方法是使用 HttpHandler/ASHX 文件，但如果你想用页面来做，那是完全可能的。两个关键点是：

1.  使用空白页面。您在 ASPX 的标记中想要的只是 <% Page ... %> 指令。
2.  将 Response 流的 ContentType 设置为 XML -`Response.ContentType = "text/xml"`

如何生成 XML 本身取决于您，但如果 XML 表示对象图，您可以使用`XmlSerializer`（来自`System.Xml.Serialization`命名空间）将 XML 直接写入响应流，例如

```
using System.Xml.Serialization;

// New up a serialiser, passing in the System.Type we want to serialize
XmlSerializer serializer = new XmlSerializer(typeof(MyObject));

// Set the ContentType
Response.ContentType = "text/xml";

// Serialise the object to XML and pass it to the Response stream 
// to be returned to the client
serialzer.Serialize(Response.Output, MyObject); 
```

如果您已经拥有 XML，那么一旦设置了 ContentType，您只需将其写入响应流，然后结束并刷新流。

```
// Set the ContentType
Response.ContentType = "text/xml";

Response.Write(myXmlString);

Response.Flush();
Response.End(); 
```

# cakephp - 将 HABTM 模型保存到 cakePHP 中的多个数据库无法正常工作

> ID：13028776
> 
> 赞同：0
> 
> 时间：2012-10-23T10:48:24.243
> 
> 标签：cakephp

```
function save($data = null, $validate = true, $fieldList = array()) {
$this->setDataSource('master');
$isSave = parent::save($data, $validate, $fieldList);
$this->setDataSource('default');
    $isSave = parent::save($data, $validate, $fieldList);
    return $isSave;
} 
```

在我的 AppModel 中，我试图将保存复制到两个数据库中。但是，我发现要保存的数据的 HABTM 部分仅保存到“默认”数据源。我假设关联可能是由事件侦听器附加的？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:32:36.040

对于任何可能也因 Model.php 的第 1789 行引起此问题的人 $dbMulti = $this->{$withModel}->getDataSource(); 它将您的数据源切换回默认值。

# javascript - 无需身份验证即可验证 Twitter 帐户

> ID：13028777
> 
> 赞同：0
> 
> 时间：2012-10-23T10:48:26.550
> 
> 标签：javascript, jquery, ajax, twitter

我的网络应用程序之前使用以下函数来检查 Twitter 帐户是否存在：

```
var checkTwitter = function(username){

     $.ajax({
      url: 'http://twitter.com/statuses/user_timeline.json?screen_name='+username+'&count=1&suppress_response_codes=true&callback=?',
      dataType: 'json',
      success: function(data, success){
      if(data.error){
                  //gone bad code
      } else {
                  //gone good code

      }
}});
  } 
```

这已经愉快地工作了一两个月。现在网址返回：

```
{"error":"Not found","request":"\/statuses\/user_timeline.json?screen_name=mildfuzz&count=1&suppress_response_codes=true&callback=?"} 
```

检查我自己的 Twitter 帐户 (@mildfuzz) 时。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:59:09.657

您还应该将成功功能更改为：

```
if(data="[]" || data.error || data.errors){
      //gone bad code
} else {
      //gone good code
} 
```

错误（未经授权）：[https ://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=test&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=test&count=2)

错误（当用户不存在时）：[https ://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=qsdsqdq&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=qsdsqdq&count=2)

此外，当用户不存在时，它可以返回一个空数组（虽然我不知道为什么）：[https ://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=dsf&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=dsf&count=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:50:32.597

Twitter 最近更改了他们的 API 规则，也许是因为这样？

换成https试试。

根据[Twitter Dev](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)使用 HTTPS

而且您必须有一个身份验证[上下文](https://dev.twitter.com/docs/auth/oauth#user-context)。

`https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:07:20.567

[https://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup) 这个链接修复了它。Twitter现在有一个简单地查找用户的功能，不需要身份验证。

# php - Ruby 与 PHP 在数组和哈希方面的差异

> ID：13028786
> 
> 赞同：2
> 
> 时间：2012-10-23T10:48:50.420
> 
> 标签：php, ruby

经过多年的 PHP 编程，我刚刚开始学习 Ruby。我想知道 Ruby 中的数组与 PHP 数组有何不同，以及它与 Ruby 中的哈希有何相似之处/不同之处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T10:58:16.567

数组，在其他语言中也称为列表，是事物的有序集合。在 PHP 中是这样的：

```
array('foo', 'bar', 'baz') 
```

在 Ruby 中，这是：

```
['foo', 'bar', 'baz'] 
```

您可以使用数字索引访问它们：`$arr[0]`/ `arr[0]`。

哈希在 PHP 中称为*关联*数组。它们由键和值组成：

```
array('foo' => 'bar', 'baz' => 42)
{ 'foo' => 'bar', 'baz' => 42 } 
```

实际上，这两种类型都是 PHP 中的关联数组，只是分别带有数字键或字符串键。在 PHP 中它们使用相同的语言结构和类型，在包括 Ruby 在内的其他语言中它们是不同的类型。PHP 将散列和列表混合为一种`Array`类型，而 Ruby 没有。

与 Haskell 等语言（列表必须是同质的）相反，哈希/数组可以包含 PHP 和 Ruby 中的任何类型的混合值：

```
array('foo' => 'bar', 'baz' => array(42, 7), 'blerg' => array(array(array())))
{ 'foo' => 'bar', 'baz' => [42, 7], 'blerg' => [[[]]] } 
```

它们在底层有何不同很难回答，因为语言非常不同，首先数组/哈希是 Ruby 中的对象，而不是 PHP 中的对象。如果您有*特定*的有针对性的幕后实现细节问题，请提出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:57:20.080

你有没有先阅读**[To Ruby From PHP](http://www.ruby-lang.org/en/documentation/ruby-from-other-languages/to-ruby-from-php/)**？

# android - 如何在 Mono for Android 中创建动态菜单？

> ID：13028788
> 
> 赞同：1
> 
> 时间：2012-10-23T10:48:53.510
> 
> 标签：android, xamarin.android

我想用 Mono for Android 制作动态菜单，我在 SQLLite 数据库中有表格菜单；如何从该表中将菜单项添加到我的菜单中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:11:16.673

覆盖 dispatchKeyEvent()，如下所示：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    switch (event.getKeyCode())
    {
    case KeyEvent.KEYCODE_MENU:
    ...
    return true; 
```

# sql-server - MVC 重构方法？如何引入更通用的功能？

> ID：13028791
> 
> 赞同：0
> 
> 时间：2012-10-23T10:49:01.490
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3

我正在开发一个复杂的向导驱动的文档创建应用程序。我了解初始域的要求，因此可以使用显式列名为此创建显式数据库模型。我也是 MVC 的新手。我知道我需要使应用程序更通用，即向导会改变，需要存储不同的属性。我当前的观点/本能是使用 MVC/EF 工具最密切支持的最传统技术来实现目前已知的技术，然后使用 SQL Server 和 WF 中的 XML 功能等技术进行重构以支持更通用的功能基金会等。现在做这一切似乎是一大步。

所以我的问题是关于保持简单的优点，然后在以后重构更复杂的功能，而不是从一开始就构建它是通用的。

思想和智慧大受赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:48:06.863

我觉得在这种情况下（阅读 OP 评论），如果你选择一个简单的“演示”版本的向导，其中包含更多硬编码的东西，那么你最终会想要，你最终会报废演示而不是重构它。但是，我并不是说这是一个糟糕的方法。

从我的角度来看，有两种方法可以接近此类应用程序的开发过程。

*   第一个是做上面提到的应用程序的快速草图版本。这样做会让你意识到朝着一个或另一个方向前进的利弊，会让你意识到必须以一种方式而不是另一种方式构建的东西以及所有类似的东西。这是“代码猴子”方法。只需输入该死的代码！

*   第二个是进入更多的 UML 路线，并根据您的需要绘制图表。然而，如果没有太多 UML 设计经验，这最终可能会浪费大量时间，因为您将继续编写应用程序，认为一切都已弄清楚，然后开始编写代码并意识到有些东西您没有考虑到为了。这条路应该是最好的路线，但缺乏这样做的经验可能会花费您的时间和金钱。

# oracle - Oracle OSM - XQuery 不循环

> ID：13028792
> 
> 赞同：1
> 
> 时间：2012-10-23T10:49:07.470
> 
> 标签：oracle, xquery, oracle-osm

我正在使用`OSM`7.2.0.3 并且我有一个带有`Order Recognition Rule`, 的墨盒`Order Data Rule`（在转换选项卡内）

在 ODR 我有这个 XQuery 代码：

```
declare namespace im="http://xxx"; 
declare namespace xs="http://www.w3.org/2001/XMLSchema";

declare variable $ord :=  fn:root(.)/im:Order;

<_root>
  <Order>
  {
    for $moli in $ord/MainOrderLineItem
      return 
        $moli/LineItemAttributeInfo/LineItemAttribute
  }
 </Order>
</_root> 
```

OSM 的 XML 输入是：

```
<ord:CreateOrder
    xmlns:ord="http://xmlns.oracle.com/communications/ordermanagement">
    <im:Order xmlns:im="http://xxx"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.oracle.com/communications/sce/dictionary/BaseOrderCommonCartridge/DataDictionary_BaseOrderCommon ../dataDictionary/DataDictionary_BaseOrderCommon.xsd">

      <OrderHeader>
        <OrderID>12345</OrderID>
        <RevisionNumber>1</RevisionNumber>
      </OrderHeader>

      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>1234</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>
      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>5678</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>
      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>abcd</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>

    </im:Order>
</ord:CreateOrder> 
```

有 3 次出现，`<MainOrderLineItem>`但输出仅为 1：

```
<LineItemAttribute xmlns:im="http://xxx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <AttributeID>1234</AttributeID>
</LineItemAttributeInfo> 
```

为什么不循环？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:15:21.700

问题在这里：

```
declare variable $ord :=  fn:root(.)/im:Order; 
```

一定是：

```
declare variable $ord :=  fn:root(.)/*/im:Order; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T11:33:42.253

这可能为时已晚，但很可能问题出在 for 语句中的节点选择表达式上。选择多个 MainOrderLineItems 的正确方法：

```
for $moli in $ord//MainOrderLineItem 
```

注意 $ord 后面的双斜杠

'/abcde' 路径表达式选择根元素 'abcde'

'parent//abcde' 路径表达式选择父级下所有名为'abcde'的子元素

由于存在多个 MainOrderLineItem 节点，因此路径表达式需要包含 '//'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T02:54:50.670

我刚刚使用了您的 XQuery 并进行了检查，没问题。尝试在控制台中打印出 $ord 变量，以查看您在 OSM 中实际得到的内容。

这是我在任何 XQuery ide 中尝试过的：

```
declare namespace im="http://xxx"; 

declare variable $ord1 := <ord:CreateOrder
    xmlns:ord="http://xmlns.oracle.com/communications/ordermanagement">
    <im:Order xmlns:im="http://xxx"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.oracle.com/communications/sce/dictionary/BaseOrderCommonCartridge/DataDictionary_BaseOrderCommon ../dataDictionary/DataDictionary_BaseOrderCommon.xsd">

      <OrderHeader>
        <OrderID>12345</OrderID>
        <RevisionNumber>1</RevisionNumber>
      </OrderHeader>

      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>1234</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>
      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>5678</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>
      <MainOrderLineItem>
        <LineItemAttributeInfo>
          <LineItemAttribute>
            <AttributeID>abcd</AttributeID>
          </LineItemAttribute>
        </LineItemAttributeInfo>
      </MainOrderLineItem>
    </im:Order>
</ord:CreateOrder>;

let $ord := $ord1/im:Order

return
(
    for $moli in $ord/MainOrderLineItem
      return 
        $moli/LineItemAttributeInfo/LineItemAttribute
) 
```

结果只是预期的..

```
<LineItemAttribute xmlns:im="http://xxx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ord="http://xmlns.oracle.com/communications/ordermanagement">
  <AttributeID>1234</AttributeID>
</LineItemAttribute>
<LineItemAttribute xmlns:im="http://xxx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ord="http://xmlns.oracle.com/communications/ordermanagement">
  <AttributeID>5678</AttributeID>
</LineItemAttribute>
<LineItemAttribute xmlns:im="http://xxx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ord="http://xmlns.oracle.com/communications/ordermanagement">
  <AttributeID>abcd</AttributeID>
</LineItemAttribute> 
```

# android - AlphaAnimation 在冰淇淋三明治中不起作用

> ID：13028793
> 
> 赞同：4
> 
> 时间：2012-10-23T10:49:10.967
> 
> 标签：android, android-linearlayout, android-4.0-ice-cream-sandwich

我通过使用`AlphaAnimation`.

当前的解决方案在我的两台使用 Gingerbread 的设备和一台使用 Froyo 的设备上运行良好。但是，它不适用于冰淇淋三明治？！

这是我的 xml 布局。

```
<LinearLayout
        android:id="@+id/photoOptionBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:alpha="0"
        android:background="@color/gpsBackground"
        android:orientation="horizontal">

        <ImageButton
            android:id="@+id/displayShareBtn"
            style="@android:style/Widget.Holo.Button.Borderless.Small"
            android:background="@android:color/transparent"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:padding="20dp"
            android:src="@drawable/share"
            android:contentDescription="Share the picture"/>

        <ImageButton
            android:id="@+id/displayDiscardBtn"
            style="@android:style/Widget.Holo.Button.Borderless.Small"
            android:background="@android:color/transparent"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:padding="20dp"
            android:src="@drawable/contentdiscard"
            android:contentDescription="Discard Picture"/>

    </LinearLayout> 
```

这是我的 onCreate 方法，用于在加载时将 alpha 设置为 0，因为在 xml 中完成时它不起作用...

```
 AlphaAnimation alpha = new AlphaAnimation(0.0F, 0.0F);
    alpha.setDuration(0); // Make animation instant
    alpha.setFillAfter(true); // Tell it to persist after the animation ends
    // And then on your layout
    this._photoOptionsBar.startAnimation(alpha); 
```

然后当我想展示它时，我会调用以下内容。

```
public void showOptions() {
        AlphaAnimation alpha = new AlphaAnimation(0.0F, 1.0F);
        alpha.setDuration(PhotoDisplayFragment.FADE_DURATION); // Make animation instant
        alpha.setFillAfter(true);
        this._photoOptionsBar.startAnimation(alpha);
        this._optionsShowing = true;
} 
```

当我在 IceCream 三明治中加载它时，LinearLayout 就在那里，因为您可以单击按钮并执行它们的功能，并且正在调用要显示的功能，但我就是看不到它！

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:56:07.317

问题`android:alpha=0`出在线性布局中。为了使事情正常工作，您必须在布局 xml 中将可见性属性设置为不可见。在开始 alpha 动画调用之前`setVisibility(View.VISIBLE)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:18:02.010

我有这个完全相同的问题。

似乎有两个单独的 alpha 属性。`AlphaAnimation`改变一个，`android:alpha`改变另一个。这两个属性都在 ICS 上使用，但在 ICS`android:alpha`之前被忽略。

因此，如果您设置`android:alpha="0"`并使用`AlphaAnimation`来执行动画，则在 ICS 之前它会正常工作，因为`android:alpha`它被忽略了。在 ICS 上，视图将始终不可见，因为`AlphaAnimation`不会`android:alpha`从 0 更改。因此，解决方案只是删除该`android:alpha="0"`行。

我对此不是 100% 确定，但这似乎就是它的行为方式。

我还认为这两个 alpha 的工作方式略有不同。当然，如果您`ImageView`使用半透明图像更改 alpha 的 alpha，它看起来比 更`AlphaAnimation`糟糕`android:alpha`。但是您对此无能为力。

# python - 在 python Pandas 中计算数据时跳过 NaN 值

> ID：13028796
> 
> 赞同：-4
> 
> 时间：2012-10-23T10:49:18.003
> 
> 标签：python, pandas

我正在使用 pandas 来获取 Text 类型数据的计数并找出给定数据中的前 5 个。

输入文件如下：

```
Gears of war 3
Gears of war
Assassin creed
.......
.......
Crysis 2
Gears of war3
Sims 
```

我的输出如下：

```
{
    'Gears of War 3': 6,
    'Batman': 5,
    'gears of war 3': 4,
    'Rocksmith': 5,
    'nan': 32870
} 
```

我希望我的代码跳过对 csv 文件中的 nan 值进行计数。

我的代码如下：

```
data = pandas.read_csv('D:\my_file.csv')

for colname, dtype in data.dtypes.to_dict().iteritems():
    if dtype == 'object':
        print colname
        count = Counter(data[colname])
        d = dict((str(k), v) for k, v in count.iteritems())
        f = dict(sorted(d.iteritems(), key=lambda item: item[1], reverse = True)[:5]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:58:53.573

您可以`nan`从类字典对象的 Counter 实例中删除项目：

```
from numpy import nan
del count[nan] 
```

顺便说一句，您可以使用`Counter.most_common`方法：

```
f = count.most_common(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:04:15.520

用于`value_counts()`计算非`Nan`值：

```
 one       two     three
a  0.196508 -0.465768 -0.710062
b       NaN       NaN       NaN
c  0.532602  1.835499  0.465047
d       NaN       NaN       NaN
e  0.175336 -0.471934 -1.517812
f -2.392756 -0.021330 -0.239647
g       NaN       NaN       NaN
h -0.612554  0.238613 -1.060184

df2['one'].value_counts()

 0.532602    1
 0.196508    1
 0.175336    1
-0.612554    1
-2.392756    1 
```

# php - PHP MYSQL JOIN：两个相似的表

> ID：13028797
> 
> 赞同：-1
> 
> 时间：2012-10-23T10:49:20.033
> 
> 标签：php, mysql, join

我试图加入两个具有相同列但值不同的表，但每次我输出它都会重复。

这是我的代码：

```
<?php
                    $dept = $_SESSION['department'];
                  $dept1 = strtolower($dept);
                  $dept2 = str_replace(" ", "_", $dept1);
                $dept4 = "$dept2" . "_200";
                  $dept = $_SESSION['department'];
                  $level = $_SESSION['level'];
                  $level2 = str_replace (" ", "_", $level);

                  if($level ="200_level") {
                    $query = " SELECT * FROM $dept2 Join $dept4";

                    }
                    else
                    {
                    $query = " SELCT * FROM $dept2";

                    }
                  $result = mysql_query($query) or die('<div       class="header5"small_font">Your Courses are not available yet. Pls contact the ICT Unit</div>');
                      while ($row = mysql_fetch_assoc($result))  {
                        $id = $row['id'];
                   $course = htmlspecialchars($row['course_name']);
                 $code = htmlspecialchars($row['course_code']);
                   $status = $row['status'];
                   $unit = htmlspecialchars($row['unit']);   

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:06:18.593

如果您正在寻找具有相同列的两个表的内容，[MySQL UNION](http://dev.mysql.com/doc/refman/5.6/en/union.html)应该会有所帮助

> UNION 用于将多个 SELECT 语句的结果组合成一个结果集。

像这样：

```
 $query = "(SELECT * FROM $dept2)
            UNION
           (SELECT * FROM $dept4)"; 
```

# c - 优化 C 代码 -> CodeChef 解决时间超出

> ID：13028801
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:49:30.073
> 
> 标签：c, performance, optimization, time-complexity

有什么技巧可以让我的代码在给定的时间限制内执行？也许一些合乎逻辑的变化或任何东西。

当我在 CodeChef 中提交我的解决方案时，它显示超出时间限制，但我认为这是足够快的简单代码。怎么能在时限内，即3秒内执行？

### 代码

```
long int iv, aia[1000][1000];
long int imax = 0;
long int score(int ia, int ib);

int main() {

    int ii, ij;
    long int iut, ivt, ie;

    memset(aia, 0, 1000000);

    scanf("%d %d", &iv, &ie);

    if((iv <= 1000) && (iv >= 2)) {

        if((ie >= (iv-1)) && (ie <= ( (iv*(iv-1)) / 2) )) {

            for(ii = 0; ii<ie; ii++) {

                scanf("%d%d", &iut, &ivt);

                if((iut >= 0) && (ivt <= (iv -1))) {

                    scanf("%d", &aia[iut][ivt]);

                    if(aia[iut][ivt] < 0) {

                        return 1;
                    }

                    aia[ivt][iut] = aia[iut][ivt];
                }
                else {

                    return 1;
                }
            }

            for(ii = 0; ii<iv; ii++) {

                for(ij = 0; ij<iv; ij++) {

                   printf("%d ", score(ii, ij));
                   imax = 0;
                }

                printf("\n");
            }
        }
    }
    return 0;
}

long int score(int ia, int ib) {

    int ii;
    int long imaxt = 0;

    if(ia == ib) {

        return 0;
    }

    if(aia[ia][ib] != 0) {

        imax = aia[ia][ib];
    }

    for(ii = 0; ii<iv; ii++) {

        if((ii != ib) && (ii != ia)) {

            if(aia[ia][ii] != 0) {

                if(aia[ii][ib] != 0) {

                    imaxt = (aia[ia][ii] < aia[ii][ib]) ? aia[ia][ii] : aia[ii][ib];

                    if(imaxt > imax) {

                        imax = imaxt;
                    }
                }
            }
        }
    }
    return imax;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:54:33.850

我对您的建议是通过探查器运行您的代码。我个人更喜欢[Valgrind](http://valgrind.org/)。

然后，当您发现瓶颈时，您可以试一试或将其发布在此处，而不是长列表。

# php - ajax 调用没有响应

> ID：13028803
> 
> 赞同：3
> 
> 时间：2012-10-23T10:49:36.023
> 
> 标签：php, jquery, ajax

当我直接在浏览器的地址栏中发布 ajax url 时，我使用 ajax 从远程服务器检索数据，我正在获取数据，但是当我在 javascript 文件中对该 url 进行 ajax 调用时，它显示错误。我在这里粘贴我的代码。

```
<!DOCTYPE html>
<html>
<head>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$.ajax({
url:"http://www.appitechture.com/api/index.php?action=getContactDetails&id=96",
type:'get',
datatype:'json',
success:function OnSuccess(data , status){
  alert(data);
   } ,

error: function OnError(request , status , error){
        alert('error');
      }
 });
 </script>

 </head>
 <body>
  <div id="images"></div>
 </body>
  </html> 
```

所以如果有人知道它的解决方案，请告诉我。

谢谢 puneet

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:50:57.000

您是否尝试执行跨域 AJAX 请求？坏主意，阅读这篇文章[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:59:43.117

如果不是同一个域，则需要使用 JSONP（带填充的 JSON）。正如 Bogdan Burim 所说，这是由于同源政策。

[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)可以以一种简单的方式帮助您。它将在您的页面上包含这样的脚本标签。

```
<script type="text/javascript"
         src="http://example.com/jsonp?callback=parseResponse">
</script> 
```

您还需要更改远程服务器的响应以包含回调变量，如下所示：

```
parseResponse({"bar": "foo", "foo2": "bar2"}); 
```

你也可以看看[easyXDM](http://easyxdm.net)：

> easyXDM 是一个 Javascript 库，使您作为开发人员能够轻松解决同源策略设置的限制，从而使跨域边界的通信和公开 javascript API 变得容易。

[维基百科有一篇关于 JSONP 的好文章。](http://en.wikipedia.org/wiki/JSONP)

# c# - 多用户应用程序的组织

> ID：13028807
> 
> 赞同：2
> 
> 时间：2012-10-23T10:49:46.737
> 
> 标签：c#, wpf, sql-server

我有一个与 Sql Server Express 数据库交互的 WPF C# 多用户应用程序。目前我遇到了以下问题：如何组织应用程序和数据库以便不同站点上的多个用户能够使用它，也许我应该将数据库文件放在服务器上，并将我的应用程序放在所有其他站点在与数据库交互时引用该服务器？如果是这样，我该如何提供数据库文件的安全性。是否有任何情况可以在服务器上安装我的应用程序并将其签名为服务器，而在其他机器上安装时指向该服务器？在这种情况下对一般策略的任何建议将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:13:48.450

如果所有用户都是并发的，那么您将需要将 SQL 实例放在他们都有权访问的服务器上。

您还需要了解很多这样的事情，例如您将如何管理您的事务以及您的持久层将如何运作。

这些主题中的每一个都可能会产生更多的 SO 问题:)

这可以帮助您了解如何构建持久层。 [http://msdn.microsoft.com/en-us/magazine/dd569757.aspx](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:05:49.497

对于多用户应用程序，您绝对应该将数据库放在服务器上。并且由于该应用程序是为多用户设计的，所以当用户打开应用程序时显示的第一个屏幕是登录屏幕（就像 Web 应用程序的情况一样）。

安全性不是问题，一旦将数据库放入文件系统，只有该计算机上的用户可以访问它。当然，包含数据库的计算机应该只有管理员作为用户。还有一点是Windows可能有IIS运行，不要把数据库文件放在IIS的公共根目录下，这样非用户就无法通过HTTP下载。

假设用户在同一个办公室工作。您可以将局域网中的任何计算机分配为服务器并在其上安装数据库。同一 LAN 中的任何计算机都有一个 LAN IP（例如 192.168.1.100），您的应用程序可以连接到该 IP 以进行数据库操作。

# sql - DBMS 中类似文件系统的权限

> ID：13028816
> 
> 赞同：1
> 
> 时间：2012-10-23T10:50:06.987
> 
> 标签：sql

很抱歉提出一个大问题，但我无法用较少的信息来解释我的情况。
我设计了一个这样的数据库系统：

```
CREATE TABLE servers(
    ID bigint primary key not null
    /* other fields of the server */
);
CREATE TABLE producers(
    ID bigint not null,
    ServerID bigint not null,
    /* other field of the producer */
    constraint "PK_producers"
        primary key (ID, ServerID),
    constraint "FK_producer_servers"
        foreign key("ServerID") references "servers"
);
CREATE TABLE records(
    ID bigint primary key,
    ServerID bigint not null,
    ProducerID bigint not null
    /* other fields of record */
    constraint "FK_records_servers"
        foreign key("ServerID") references "servers"
    constraint "FK_records_producers"
        foreign key("ServerID", "ProducerID") references "producers"
);

CREATE TABLE groups(
    ID bigint not null primary key,
    GroupName nvarchar(50) not null,
    Permissions int not null
    /* other fields of the group */
);
CREATE TABLE users(
    ID bigint not null primary key,
    UserName nvarchar(50) not null unique,
    Permissions int not null
    /* other fields of user */
);
CREATE TABLE users_in_groups(
    UserID bigint not null,
    GroupID bigint not null,
    constraint "PK_users_in_groups" primary key (UserID, GroupID),
    constraint "FK_uig_users" foreign key("UserID") references "users",
    constraint "FK_uig_groups" foreign key("GroupID") references "groups"
); 
```

数据会添加到`records`from `producers`，每个生产者每天可以提供 500~2000 条记录，每个生产者`server`通常有 2~4 个生产者，拥有 3~6 个服务器是完全正常的。如您所见，`records`表的增长速度非常快（我会定期归档一些数据并缩小数据库，但`records`表通常有 > 100000 条记录）。

现在我的问题是：
正如您所见，用户拥有不同的权限，根据他们当前属于哪个组以及管理员向他们应用了哪些权限，现在我必须以每个用户可能对不同项目具有不同权限的方式推进这个系统（`server`,`producer`和`record`) 的方式是，如果用户对某个项目具有显式权限，则使用该权限，否则使用来自父级的权限和至少用户的全局权限。例如，用户对 a 的权限`record`将由应用到 that `record`、 its `producer`、 its`server`或为用户定义的权限的权限指示。

作为第一个解决方法，我想我将实现提供用户和各种对象之间关系的关系表，如下所示：

```
CREATE TABLE user_server_permissions(
    UserID bigint not null,
    ServerID bigint not null,
    Permissions int not null,
    constraint "PK_usp" primary key ("UserID", "ServerID"),
    constraint "FK_usp_users" foreign key ("UserID") references "users",
    constraint "FK_usp_server" foreign key ("ServerID") references "servers"
);
CREATE TABLE user_producer_permissions(
    UserID bigint not null,
    ServerID bigint not null,
    ProducerID bigint not null,
    Permissions int not null,
    constraint "PK_upp" primary key ("UserID", "ServerID", "ProducerID"),
    constraint "FK_upp_users" foreign key ("UserID") references "users",
    constraint "FK_upp_server" foreign key ("ServerID") references "servers"
    constraint "FK_upp_producer" foreign key ("ServerID", "ProducerID") references "producers"
);
CREATE TABLE user_record_permissions(
    UserID bigint not null,
    RecordID bigint not null,
    Permissions int not null,
    constraint "PK_urp" primary key ("UserID", "ServerID"),
    constraint "FK_urp_users" foreign key ("UserID") references "users",
    constraint "FK_urp_record" foreign key ("RecordID") references "records"
); 
```

但是使用这种方法确实会降低性能，因为我使用它的主表是`records`管理员为记录设置特殊权限并且大多数记录应该使用他们的权限`producer`但使用这种技术我应该检查多个表的罕见情况每次访问`records`表。例如一个简单的查询，如：

```
SELECT * FROM "records" WHERE /* Some condition */ AND record_is_accessible( "ID" ) 
```

将杀死我应该能够响应多个客户端的服务器！
我的大多数客户使用 MSSQL 作为 DBMS，但很少有使用 MySQL 或 ORACLE 的情况。

现在谁能指导我完成任务！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:06:56.257

乍一看，一个快速的解决方案是没有 3 个单独的权限表。相反，你会拥有这个

```
CREATE TABLE user_entity_permissions(
    UserID bigint not null,
    EntityID bigint not null,
    EntityType int not null,
    Permissions int not null,
    constraint "PK_usp" primary key ("UserID", "EntityID"),
    constraint "FK_usp_users" foreign key ("UserID") references "users"
    --- Third FK constraint ---
    ); 
```

现在您想相应地塑造您的第三个 Fk 约束（如果需要）例如，假设您给服务器一个 EntityType = 1、Producer --> 2、Record --> 3 然后 EntityId 和 EntityType = 1 对服务器的引用等等。 ..

这样，您还可以使用 EntityType 对权限的优先级进行排序（例如，首先是 1，然后是 2，然后是 3）

# javascript - jquery：从 $(window).load() 中排除外部资源

> ID：13028821
> 
> 赞同：4
> 
> 时间：2012-10-23T10:50:28.283
> 
> 标签：javascript, jquery

当我的域和子域上的所有资源都被加载时，我需要执行一些脚本，所以我这样做了：

```
$(window).load(function(){
  // al my functions here...
} 
```

问题是有一些外部资源（不在我的域和子域上）有时需要更长时间才能加载。有没有办法从加载事件中排除外部资源？

**编辑：** 我希望做类似的事情：

```
$(window).not(".idontcare").load(function() 
```

但它不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:15:27.700

我猜你的外部资源依赖于一个`src`属性。

如果是这样，在您的页面源代码中，您可以将`src`不想等待的资源的属性设置为，而`src`不是`external_src`.

然后你可以很容易地做到：

```
$(document).ready(function(){

    $(window).load(function(){
        // all your functions here...
    });

    $('[external_src]').each(function() {

        var external_src = $(this).attr("external_src");

        $(this).attr("src", external_src); // now it starts to load
        $(this).removeAttr("external_src"); // keep your DOM clean

        //Or just one line:
        //$(this).attr("src", $(this).attr("external_src")).removeAttr("external_src");

    });

}); 
```

这样，只要 DOM 准备好，外部资源就应该开始加载，而无需等待完整的窗口加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:31:53.793

我有几乎相同的情况。但就我而言，我想排除所有从另一个站点（例如 youtube、vimeo 等）加载内容的 iframe。找到了解决方法，因此该场景是在 DOM 准备好时从所有 iframe 中隐藏“src”属性，并在窗口完成加载所有其他内容时将其放回原处。

```
(function($){
    //DOM is ready
    $(document).ready(function(){
        var frame = $('iframe'),
            frameSrc = new Array();

        if( frame.length ){
            $.each( frame, function(i, f){
                frameSrc[i] = $(f).attr('src');
                //remove the src attribute so window will ignore these iframes
                $(f).attr('src', '');
            });

            //window finish load
            $(window).on('load',function(){
                $.each( frame, function(a, x){
                    //put the src attribute value back
                    $(x).attr('src', frameSrc[a]);
                });
            });
        }
    });
})(jQuery); 
```

您可以通过添加特殊类来标记站点中加载外部资源的所有元素，并使用`$('.special_class')`或类似的方式更改 iframe。我不知道这是否是最好的方法，但至少它对我来说效果很好：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:53:11.733

不幸的是，该`window.onload`事件非常严格。正如您可能知道的那样，当所有和所有资源都被传输和加载时，它会触发，*图像*，*iframe*，*一切*。因此，对您的问题的快速回答是否定的，没有易于使用的方法来告诉该事件忽略外部资源，在那里没有区别。

您需要自己处理，根据这些资源的包含和定位方式，这可能是一件棘手的事情。您甚至可能需要在源代码交付之前对其进行操作以完成此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:53:13.583

据我所知，脚本标签有一个 async - 标签。您可以包括：

```
<script src="script_path" async="true"></script> 
```

这将不包括他们参加活动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:53:35.680

也许

```
$(document).ready(...) 
```

而不是 $(window).load() 会有所帮助吗？

当 HTML 文档被加载并且 DOM 准备就绪时，文档就绪事件已经执行，即使所有的图形还没有加载。

# twitter-bootstrap - 输入值未在弹出窗口中呈现

> ID：13028826
> 
> 赞同：1
> 
> 时间：2012-10-23T10:50:48.393
> 
> 标签：twitter-bootstrap, knockout.js

为什么文本绑定有效而值不起作用，如果我使用 jquery 选择具有 ID 的元素并在控制台中打印她的值，该值是正确的但它没有显示。

```
<center>
  <h2>Popover Demo</h2>
  <div data-bind="template: {name: 'popoverTemplate', foreach: commands}"></div>
</center>

<script type="text/html" id="popoverTemplate">
    <div style="display:none;" data-bind="attr: {'id': $data.command + 'Content'}, template: {name: 'popoverContent', data: $data.content}"></div>    
    <a href="#" class="btn" data-bind='text: $data.command, popover: $data'></a>
</script>

<script type="text/html" id="popoverContent">
    <p>Name: <input type="text" data-bind='value: $data.name'></p>
    <p>Email: <b data-bind='text: $data.email'></b></p>
</script> 
```

​</p>

这是 JSFiddle [http://jsfiddle.net/mounir/V3nVd/15/中的完整示例](http://jsfiddle.net/mounir/V3nVd/15/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:40:34.073

您`.popover`将渲染模板的 html 复制到`data-`属性中。

看起来绑定不适用于动态插入的 html。并且`value:`绑定（ko 默认）通过 javascript`.value('sample text')`方法设置输入。所以本质上，复制的 HTML：

```
<p>Name: <input type="text" data-bind='value: $data.name'></p>
<p>Email: <b data-bind='text: $data.email'>ben@msn.com</b></p> 
```

只是：

```
<p>Name: <input type="text"></p>
<p>Email: <b>ben@msn.com</b></p> 
```

因此是空的`<input>`但已填充的`<b>`标签。

为了解决这个问题，您可以将 的`value`属性设置`<input>`为所需的值：

```
<p>Name: <input type="text" data-bind="attr: { value: $data.name }"></p>
<p>Email: <b data-bind="text: $data.email"></b></p> 
```

这填充了`<input>`. 但请记住，这些值不再是可观察的。

每次`.popover`调用时都会更新这些值，但如果在显示弹出框时更新了可观察对象，则不会更新。您也不能通过编辑`<input>`.

您应该考虑扩展您的自定义绑定以解决所有这些问题，例如从`<input>`弹出窗口关闭时获取值并将其放回可观察对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:22:54.920

感谢您的回答塞西。是的，但是如果我不想让我的输入仍然可观察，我应该在 init 函数中传递 viewModel，并在 popover div 中应用绑定。对于雇用点击事件时的每个弹出窗口，我设置`ko.applyBindings(viewModel, thePopover);`

```
ko.bindingHandlers.popover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var attribute = ko.utils.unwrapObservable(valueAccessor());
        var cssSelectorForPopoverTemplate = attribute.content;
        var popOverTemplate = "<div id='"+attribute.id+"-popver'>" + $(cssSelectorForPopoverTemplate).html() + "</div>";
        $(element).popover({
            content: popOverTemplate,
            html: true,
            trigger: 'manual'
        });

        $(element).click(function() {
            $(this).popover('toggle');
            var thePopover = document.getElementById(attribute.id+"-popver");
            ko.applyBindings(viewModel, thePopover);
        });
    },
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:48:19.030

这是一个完整的工作示例，当我们希望将按钮关联到例如根视图模型中的函数时，我将其更改`ko.applyBindings()`为`ko.applyBindingsToDescendants`包含绑定上下文 $root 和 $parent。

```
$(element).click(function() {
            $(this).popover('toggle');
            var thePopover = document.getElementById(attribute.id+"-popover");
            childBindingContext = bindingContext.createChildContext(viewModel);
            ko.applyBindingsToDescendants(childBindingContext, thePopover);
        }); 
```

看看[@http://jsfiddle.net/mounir/Mv3nP/4/](http://jsfiddle.net/mounir/Mv3nP/4/)

# php - 在 livevalidation 中总是返回 false

> ID：13028835
> 
> 赞同：0
> 
> 时间：2012-10-23T10:51:14.777
> 
> 标签：php, jquery, livevalidation

我无法使用 livevalidation.js 捕捉 ajax 请求是真还是假。无论php函数执行为false还是true，它总是返回用户名；

PHP 代码

```
public function valid_username()
{
   $is_username_exist = 'some query here';

   if($is_username_exist == true){
        $output['success'] = true;
   }else{
       $output['success'] = false;
   }

   echo json_encode($output);
} 
```

JS代码

```
$(document).ready( function() {
var username = new LiveValidation('username',{validMessage: 'Available', wait:500});
username.add( Validate.Presence );
username.add( Validate.Length, { minimum: 4, maximum: 10 } );
username.add( Validate.Custom, { against: function() { return  check_username_availability( 'username', '#username', base_url+'cms-profile/profile_ajax/valid_username');}, failureMessage: 'Username already taken' } );

});

function check_username_availability(name, id, postUrl)
{
var dataVal = name+'='+$(id).val();

  $.ajax({
    url: postUrl,
    cache: false,
    type: 'post',
    dataType: 'json',
    data: dataVal,
    async:  false,
    success: function(data) {
     return $.parseJSON(data);
    }
  });  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:55:08.840

当您以这种方式使用 ajax 设置数据 POST 时：

```
$.ajax({
    url: postUrl,
    cache: false,
    type: 'post',
    dataType: 'json',
    data: {'name':name , 'id': id},
    async:  false,
    success: function(data) {
     return data.success;
    }
  }); 
```

并且不要使用 parseJSON。没有必要，因为您可以直接返回您的响应值..

# python - 使用 python 提取 CSS 样式声明

> ID：13028838
> 
> 赞同：3
> 
> 时间：2012-10-23T10:51:21.480
> 
> 标签：python, html, css, lxml

我正在使用 lxml.html 解析一个 html 文件，但是，我需要获取在样式表中用作选择器的 HTML 类，即`['c1','c2','c3','c4','c5','c6']`具有相应的样式信息。

我将样式部分提取为字符串尝试使用解析它，`cssutils.parseString`但我最终得到了这个：

```
ERROR   CSSStyleRule: No start { of style declaration found: u'<style type="text/css">&#13;' [1:28: ;]
ERROR   Selector: Unexpected CHAR. [1:1: <]
ERROR   Selector: Unexpected CHAR. [1:12: =]
ERROR   Selector: Unexpected STRING. [1:13: "text/css"]
ERROR   Selector: Unexpected CHAR. [1:24: &]
ERROR   SelectorList: Invalid Selector: <style type="text/css">&#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'<style type="text/css">&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [2:47: ;]
ERROR   Selector: Unexpected CHAR. [2:43: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [3:33: ;]
ERROR   Selector: Unexpected CHAR. [3:29: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [4:32: ;]
ERROR   Selector: Unexpected CHAR. [4:28: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [5:34: ;]
ERROR   Selector: Unexpected CHAR. [5:30: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [6:34: ;]
ERROR   Selector: Unexpected CHAR. [6:30: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'&#13;' [7:53: ;]
ERROR   Selector: Unexpected CHAR. [7:49: &]
ERROR   SelectorList: Invalid Selector: &#13
ERROR   CSSStyleRule: No style declaration or "}" found: u'&#13;'
ERROR   CSSStyleRule: No start { of style declaration found: u'</style>' [8:13: ]
ERROR   Selector: Unexpected CHAR. [8:5: <]
ERROR   Selector: Unexpected CHAR. [8:6: /]
ERROR   Selector: Cannot end with combinator: </style>
ERROR   SelectorList: Invalid Selector: </style>
ERROR   CSSStyleRule: No style declaration or "}" found: u'</style>'
<cssutils.css.CSSStyleSheet object encoding='utf-8' href=None media=None title=None namespaces={} at 0x308ca90> 
```

我该如何解决这个问题？

```
<style type="text/css">&#13;
    p.c6 {font-weight: bold; text-align: left}&#13;
    p.c5 {font-weight: bold}&#13;
    p.c4 {text-align: left}&#13;
    td.c3 {font-weight: bold}&#13;
    p.c2 {text-align: center}&#13;
    p.c1 {font-weight: bold; text-align: center}&#13;
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:18:03.073

您用于获取该错误消息的代码是什么？

CSS 解析器（如 cssutils 或 tinycss）希望您提供 CSS 源代码。看来您正在提供 HTML`<style>`元素的来源。您可以使用 lxml.html 来解析该 HTML。然后您应该提取`text`您感兴趣的节点的属性，而不是将它们序列化回 HTML。

你的代码应该是这样的：

```
html = '<style>a.b &#123;}</style>'
lxml.html.fromstring(html)
for style_element in html.xpath('style')
    # lmxl parses HTML entities like &#123;
    assert style_element.text == 'a.b {}'
    stylesheet = cssutils.parseString(style_element.text) 
```

# android - 在选项卡中添加多个视图

> ID：13028850
> 
> 赞同：1
> 
> 时间：2012-10-23T10:52:31.073
> 
> 标签：android, view, tabs

我正在尝试使用“setContent(...)”方法在选项卡视图中添加内容

```
 TabHost.TabSpec spec = tabs.newTabSpec("tag1");
    spec.setContent(R.id.radioGroup1);  
    spec.setContent(R.id.button1); 
```

当我使用不同的方法在 setContent(...) 中添加多个项目时，它只喜欢最后一个。如何在单个选项卡下添加两个视图，在这种情况下是 radioGroup1 和 button1 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:56:44.060

您不能直接添加一个以上的视图，但您可以添加容器视图（例如线性布局）和内部容器布局，您可以确定添加任意数量的视图

这正是你想要[的......标签的好例子](http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:57:19.877

您必须将两个视图组合成一个视图 - 例如`LinearLayout`.

在 Android 中很典型，当您在系统回调中执行操作时（例如`onCreate`或`onButtonPressed`看到。

# opengl - glBindBufferRange() OpenGL 3.1 的问题

> ID：13028852
> 
> 赞同：5
> 
> 时间：2012-10-23T10:52:36.103
> 
> 标签：opengl, glsl, opengl-3

我的顶点着色器是

```
uniform Block1{    vec4 offset_x1;   vec4 offset_x2;}block1;

out float value;

in vec4 position;

void main()
{
    value = block1.offset_x1.x + block1.offset_x2.x;            

    gl_Position = position;
} 
```

我用来传递值的代码是：

```
GLfloat color_values[8];// contains valid values

glGenBuffers(1,&buffer_object);

glBindBuffer(GL_UNIFORM_BUFFER,buffer_object);

glBufferData(GL_UNIFORM_BUFFER,sizeof(color_values),color_values,GL_STATIC_DRAW);

glUniformBlockBinding(psId,blockIndex,0);

glBindBufferRange(GL_UNIFORM_BUFFER,0,buffer_object,0,16);                                              

glBindBufferRange(GL_UNIFORM_BUFFER,0,buffer_object,16,16); 
```

这里我期望的是，为每个 vec4 制服传递 16 个字节。我得到偏移量 = 16 的 GL_INVALID_VALUE 错误，大小 = 16。我对偏移值感到困惑。Spec说它对应于“buffer_object”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:19:48.210

绑定时 UBO有[对齐限制](http://www.opengl.org/wiki/Uniform_Buffer_Object#Data_storage)。Any`glBindBufferRange/Base`的偏移量必须是 的倍数`GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT`。这种对齐可以是任何东西，因此您必须在构建统一缓冲区数组之前对其进行查询。这意味着您不能直接在编译时 C++ 逻辑中执行此操作；它必须是运行时逻辑。

说到在运行时查询事物，您的代码在许多其他方面都被严重破坏了。您没有为统一块定义布局限定符；因此，使用默认值：`shared`. 如果不从 OpenGL[*查询*](http://www.opengl.org/wiki/Uniform_Buffer_Object#Layout_queries)[每个块成员的布局，](http://www.opengl.org/wiki/Uniform_Buffer_Object#Layout_queries)*就不能*使用 `shared* 布局。*曾经*。[](http://www.opengl.org/wiki/Uniform_Buffer_Object#Layout_queries)

 **如果您进行了查询，您会很快发现您的统一块大小至少为*32 个字节*，而不是 16 个。而且由于您只提供了 16 个字节在您的范围内，未定义的行为（包括*程序终止*的可能性）结果.

如果您希望能够定义精确映射到统一块定义的 C/C++ 对象，则需要使用`std140`布局并遵循`std140`C/C++ 对象中的布局规则。**

# iphone - 如何解决使用未声明的标识符“UIKeyboard”错误？

> ID：13028855
> 
> 赞同：0
> 
> 时间：2012-10-23T10:52:53.617
> 
> 标签：iphone, ios, keyboard, uikeyboard

我试图在不使用`UITextView`and的情况下显示 UIKeyboard `UITextField`。我正在按照以下源代码在我的应用程序中显示键盘。

```
 UIKeyboard *keyboard = [[[UIKeyboard alloc] initWithFrame: CGRectMake(0.0f, 220.0f, 320.0f, 216.0f)] autorelease];
[keyboard setReturnKeyEnabled:NO];
[keyboard setTapDelegate:editingTextView]; 
```

但显示以下错误的代码，

```
Use of undeclared identifier 'UIKeyboard'
Use of undeclared identifier 'keyboard' 
```

有人请帮忙解决这个错误吗？请告诉我这是在不使用`UITextView`and的情况下显示键盘的正确方法`UITextField`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:30:22.723

您可以使用`UIKeyInput`委托。

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController<UIKeyInput> 
```

在你的`ViewController.m`课堂上。`return YES;`到`canBecomeFirstResponder:`

```
-(BOOL)canBecomeFirstResponder
{
    return YES; 
} 
```

它会告诉你`keyboard`。但是如果没有`UITextView`或，你在哪里写`UITextField`。写得好，`UIView`看看这个逻辑 - [UIKeyInput- 在没有 UITextField 或 UITextView 的 iPhone 中显示键盘](http://www.ioslearner.com/uikeyinput-displaying-keyboard-iphone-uitextfield-uitextview/)

# c++ - 使用 asio 使用 C++ 编译的 linux ubuntu 服务器 11.10 (vps) 上的 boost

> ID：13028856
> 
> 赞同：1
> 
> 时间：2012-10-23T10:52:57.193
> 
> 标签：c++, linux, ubuntu, boost, boost-asio

我遵循了 unix 指南。[http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html)。它在我的 Mac 上运行良好。但是在我的 VPS 上，我似乎遇到了一些问题。我下载了最新版本并运行了 bootstrap 和 b2 install，example.cpp 运行良好。

当我厌倦了编译 boost udp echo 服务器时 - [http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/async_udp_echo_server.cpp](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/async_udp_echo_server.cpp)

我收到以下错误。

```
andrew@am:~/Documents/boostExamples/asyncUdpEchoServer$ c++ -I /usr/local/boost main.cpp -o udpEchoServer
/tmp/cczYAR1r.o: In function `__static_initialization_and_destruction_0(int, int)':
main.cpp:(.text+0x21e): undefined reference to `boost::system::generic_category()'
main.cpp:(.text+0x228): undefined reference to `boost::system::generic_category()'
main.cpp:(.text+0x232): undefined reference to `boost::system::system_category()'
/tmp/cczYAR1r.o: In function `boost::system::error_code::error_code()':
main.cpp:(.text._ZN5boost6system10error_codeC2Ev[_ZN5boost6system10error_codeC5Ev]+0x10): undefined reference to `boost::system::system_category()'
/tmp/cczYAR1r.o: In function `boost::asio::error::get_system_category()':
main.cpp:(.text._ZN5boost4asio5error19get_system_categoryEv[boost::asio::error::get_system_category()]+0x7): undefined reference to `boost::system::system_category()'
collect2: ld returned 1 exit status 
```

任何想法我需要在这里做什么？- 如果在你不需要建立提升的影响下，我很高兴。

vps 正在运行 ubuntu 服务器 11.10，但它似乎有点减少。我已经安装了 build-essential。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:39:20.070

您必须链接 boost_system lib: `-lboost_system`。如果需要，也不要忘记指定 lib 目录。

# c# - 识别应用实例 Windows 8

> ID：13028859
> 
> 赞同：1
> 
> 时间：2012-10-23T10:52:59.760
> 
> 标签：c#, windows-8, uniqueidentifier

我正在尝试将信息存储在中央数据库中，以跟踪有多少客户拥有不同版本的应用程序。我无法在 WinRT 中找到任何标识应用实例的唯一标识。有谁知道我如何跟踪这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:20:43.070

如果我了解您的要求，您可以使用[Application Specific Hardware ID (ASHWID)](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.getpackagespecifictoken)。例如：

```
 Windows.System.Profile.HardwareToken hid = Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);

        var version = Package.Current.Id.Version;
        Debug.WriteLine(hid.Id + " - " + version.ToString()); 
```

从文档中：

> 获取表示当前硬件的硬件标识符 (ASHWID)。每个应用程序包返回的 ASHWID 将不同。换句话说，当来自不同包的两个应用程序调用此 API 时，将返回不同的标识符。当属于同一包的两个应用程序调用时，它将返回相同的标识符。

# objective-c - iOS UITextView 忽略 JSON 响应中的换行符

> ID：13028861
> 
> 赞同：2
> 
> 时间：2012-10-23T10:53:01.293
> 
> 标签：objective-c, ios, json, uitextview

我需要在我的 iOS 应用程序中的多行 UITextView 中显示来自 JSON Webservice 的一些数据，但是当我在 textview 上使用字符串时，新行不起作用。

这是我正在使用的代码：

```
// Data Value from JSON = testing the data value \r\n Another \n liine maybe?
NSString *responseDataString = [dictRequestorDetails objectForKey:@"data"];
txtWorkflowDetails.text = responseDataString; 
```

当我执行此代码时 UITextField 显示

> 测试数据值 \r\n 可能是另一个 \n 线？

但是，如果我输入这样的字符串

```
// Data Value from JSON = testing the data value \r\n Another \n liine maybe?
NSString *responseDataString = [dictRequestorDetails objectForKey:@"data"];
txtWorkflowDetails.text = @"testing the data value \r\n Another \n liine maybe?"; 
```

换行符然后在 TextView 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:04:15.393

刚刚关注了这篇文章：[向 UITextView 添加换行符](https://stackoverflow.com/questions/3697253/adding-a-line-break-to-a-uitextview)

我更新了我的 JSON 提要以输出新的行，例如

> 测试数据值 \n另一个 \nmline 可能吗？

然后在我的代码中运行；

```
responseDataString = [responseDataString stringByReplacingOccurrencesOfString:@"\\n" withString:@"\n"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-26T17:58:35.547

**斯威夫特 4：**

```
let stringForUITextView = originJsonString.replacingOccurrences(of: "\\n", with: "\n") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:05:48.387

您可以先处理字符串并将所有出现的 \n 替换为 \n

```
NSString *newString = [responseDataString stringByReplacingOccurrencesOfString:@"\n" withString:@"\\n"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:08:21.127

txtWorkflowDetails 是否设置为允许换行（例如自动换行）？

# android - Android - 全屏按钮使 youtube 视频（嵌入 youtube）在 webView 崩溃

> ID：13028866
> 
> 赞同：2
> 
> 时间：2012-10-23T10:53:10.127
> 
> 标签：android, html, webview, youtube

这是我的 xml 结构（动态变化。代码生成）

```
<LinearLayout>
    <WebView></WebView>
</LinearLayout> 
```

在那个 webView 上，我设置了这个 html 代码

```
<html><body><iframe class="youtube-player" type="text/html" height="100%" width="100%" src="http://www.youtube.com/embed/vS6mwyHNacA?rel=0&html5=1" frameborder="0"></iframe></body></html> 
```

当我按下播放按钮时它播放正常。但是当我按下全屏按钮（右下角）时，视频停止播放。之后，即使我再次按下播放按钮或拖动进度条，视频也不会播放。

谁能告诉我如何使全屏按钮起作用？

这是日志猫

```
10-24 09:28:42.065: V/MediaPlayer(25419): isPlaying: 1
10-24 09:28:42.065: V/MediaPlayer-JNI(25419): isPlaying: 1
10-24 09:28:42.125: V/MediaPlayer(25419): isPlaying: 1
10-24 09:28:42.125: V/MediaPlayer-JNI(25419): isPlaying: 1
10-24 09:28:42.225: D/HTML5VideoViewProxy(25419): enterFullScreenVideo() called.
10-24 09:28:42.225: V/MediaPlayer-JNI(25419): getCurrentPosition: 9583 (msec)
10-24 09:28:42.225: V/MediaPlayer(25419): isPlaying: 1
10-24 09:28:42.225: V/MediaPlayer-JNI(25419): isPlaying: 1
10-24 09:28:42.230: V/MediaPlayer(25419): isPlaying: 1
10-24 09:28:42.230: V/MediaPlayer-JNI(25419): isPlaying: 1
10-24 09:28:42.230: V/MediaPlayer-JNI(25419): pause
10-24 09:28:42.230: V/MediaPlayer(25419): pause
10-24 09:28:42.230: V/MediaPlayer-JNI(25419): release
10-24 09:28:42.230: V/MediaPlayer(25419): setListener
10-24 09:28:42.230: V/MediaPlayer(25419): disconnect
10-24 09:28:42.275: V/MediaPlayer(25419): destructor
10-24 09:28:42.275: V/MediaPlayer(25419): disconnect
10-24 09:28:42.275: D/HTML5VideoViewProxy(25419): enterFullScreenVideo : mHTML5VideoView.release()
10-24 09:28:42.275: V/MediaPlayer-JNI(25419): native_setup
10-24 09:28:42.275: V/MediaPlayer(25419): constructor
10-24 09:28:42.275: V/MediaPlayer(25419): setListener
10-24 09:28:50.450: V/webview(25419): NO_FAST_DRAW = false
10-24 09:28:50.560: V/webview(25419):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
10-24 09:28:50.975: D/HTML5VideoViewProxy(25419): handleMessage : SEEK
10-24 09:28:50.975: D/HTML5VideoViewProxy(25419): play() : videoView not ready
10-24 09:28:58.355: V/webview(25419): NO_FAST_DRAW = false
10-24 09:28:58.465: V/webview(25419):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
10-24 09:29:04.105: V/webview(25419): NO_FAST_DRAW = false
10-24 09:29:04.195: V/webview(25419):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
10-24 09:29:04.590: D/HTML5VideoViewProxy(25419): handleMessage : PAUSE
10-24 09:29:04.590: D/HTML5VideoViewProxy(25419): handleMessage : SEEK
10-24 09:29:04.590: D/HTML5VideoViewProxy(25419): handleMessage : SEEK
10-24 09:29:04.590: D/HTML5VideoViewProxy(25419): play() : videoView not ready 
```

“enterFullScreenVideo() 调用”是当我按下全屏按钮时

视频只是在那之后暂停

“play() : videoView not ready”是当我按下播放按钮时

视频仍然无法再次播放

# c++ - 正确关闭WinAPI HANDLEs（避免重复关闭）

> ID：13028872
> 
> 赞同：6
> 
> 时间：2012-10-23T10:53:29.690
> 
> 标签：c++, winapi, handle, hbitmap

我有一些手柄，我需要关闭它。代码中有一些地方可能会关闭句柄。那么，这是关闭句柄的正确方法吗？

```
HANDLE h;
....
if ( h != INVALID_HANDLE_VALUE ) {
  ::CloseHandle(h);
  h = INVALID_HANDLE_VALUE;
} 
```

关于位图句柄也有同样的问题：

```
HBITMAP hb;
....
if ( hb != INVALID_HANDLE_VALUE ) {
  ::DeleteObject(hb);
  hb = INVALID_HANDLE_VALUE;
} 
```

***编辑：***我认为，有一些误解。我知道`CloseHandle`是为了关闭手柄。我想知道关闭手柄的正确方法。删除指针也会出现类似的情况。

```
Foo *foo = new Foo();

// for example there is 2 functions that can delete foo
void bar() {
  ....
  delete foo;
}
void duck() {
  ....
  delete foo;
} 
```

因此，以下代码意味着问题：

```
bar();
duck(); 
```

这种情况有一些解决方法。我们需要像这样定义`bar`&`duck`函数：

```
void bar() {
  ....
  if (foo) {
    delete foo;
    foo = NULL;
  }
}
void duck() {
  ....
  if (foo) {
    delete foo;
    foo = NULL;
  }
} 
```

所以我们避免重复删除 foo。问题是关闭句柄的正确方法是什么？我的意思是，如何避免重复关闭句柄问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T00:29:46.947

并非所有使用`HANDLE`use的函数`CloseHandle()`，有些使用其他关闭函数。此外，并非所有`HANDLE`值都使用`INVALID_HANDLE_VALUE`。有的`NULL`改用。

`HBITMAP`从不使用`INVALID_HANDLE_VALUE`，它总是使用`NULL`。你永远不应该要求`DeleteObject()`一个`HBITMAP`你不拥有的东西。

所以简短的回答是 - 如果您正在尝试创建一些通用句柄管理，请不要打扰。你很可能会弄错。如果您分配/打开某个句柄，您必须知道关闭它的正确方法，您无法猜测它。

如果您希望手柄自行管理，那么 RAII 是最佳选择。我更喜欢使用具有特殊特征的模板类来减少不同类型句柄的代码重复，例如：

```
template< class traits >
class HandleWrapper
{
private:
    traits::HandleType FHandle;

public:
    HandleWrapper()
        FHandle(traits::InvalidValue)
    {
    }

    HandleWrapper(const traits::HandleType value)
        FHandle(value)
    {
    }

    ~HandleWrapper()
    {
        Close();
    }

    void Close()
    {
        if (FHandle != traits::InvalidValue)
        {
            traits::Close(FHandle);
            FHandle = traits::InvalidValue;
        }
    }

    bool operator !() const {
        return (FHandle == traits:::InvalidValue);
    }

    operator bool() const {
        return (FHandle != traits:::InvalidValue);
    }

    operator traits::HandleType() {
        return FHandle;
    }
}; 
```

.

```
struct KernelHandleTraits
{
    typedef HANDLE HandleType;
    static const HANDLE InvalidValue = INVALID_HANDLE_VALUE;

    static void Close(HANDLE value)
    {
        CloseHandle(value);
    }
};

HandleWrapper<KernelHandleTraits> hFile(CreateFile(...)); 
```

.

```
struct NullKernelHandleTraits
{
    typedef HANDLE HandleType;
    static const HANDLE InvalidValue = NULL;

    static void Close(HANDLE value)
    {
        CloseHandle(value);
    }
};

HandleWrapper<NullKernelHandleTraits> hMapping(CreateFileMapping(...)); 
```

.

```
struct FileMapViewTraits
{    
    typedef void* HandleType;
    static const void* InvalidValue = NULL;

    static void Close(void *value)
    {
        UnmapViewOfFile(value);
    }
};

HandleWrapper<FileMapViewTraits> hView(MapViewOfFile(...)); 
```

.

```
struct GDIBitmapHandleTraits
{    
    typedef HBITMAP HandleType;
    static const HBITMAP InvalidValue = NULL;

    static void Close(HBITMAP value)
    {
        DeleteObject(value);
    }
};

HandleWrapper<GDIBitmapTraits> hBmp(CreateBitmap(...)); 
```

等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:36:44.500

使用[RAII 模式](http://en.wikipedia.org/wiki/RAII)。

将句柄包装到一个类中，该类在构造函数中分配句柄并在析构函数中销毁它。您可以在 MFC 中找到一些示例，例如用于 GDI 对象的[CGdiObject 类](http://msdn.microsoft.com/en-us/library/e1af4h6d%28v=vs.80%29.aspx)`HBITMAP`，例如.

另请参阅这个 SO 问题：[RAII and smart pointers in C++](https://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T11:04:26.830

是的。

*   [`CloseHandle()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211.aspx)关闭 Windows*内核对象*句柄。
*   [`DeleteObject()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183539.aspx)删除 GDI 对象。

我认为您的困惑来自于它们都被称为“句柄”，但它们是不同的“类”对象。术语句柄在`HBITMAP`这里更多地用作“不透明的标识符”。还有大量文档假定“句柄”==“Windows 内核句柄”。

一般来说，如果您想知道如何删除某些内容，您应该查看构造函数的文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:42:49.667

以下代码可能是您所追求的：

```
BOOL CloseValidHandle(HANDLE& handle)
{
  if (handle != INVALID_HANDLE_VALUE && handle != 0)
  {
    if (CloseHandle(handle))
    {
      handle = INVALID_HANDLE_VALUE;
      return TRUE;
    }
    else
    {
      return FALSE;
    }
  }

  return TRUE;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T07:32:07.303

它不是 RAII，但它有助于删除/关闭处理程序。

```
class HandleDel : boost::notcopyable{
public:
    HandleDel(HANDLE h, HANDLE invalid, BOOL(WINAPI *del)(HANDLE)):
        h(h), invalid(invalid), del(del){
    }
    ~HandleDel(){
        if ( h != invalid ) del(h);
    }
private:
    HANDLE h;
    HANDLE invalid;
    BOOL(WINAPI *del)(HANDLE);
}; 
```

# javascript - 如何使用 javascript 或 jquery 解析这种类型的字符串？

> ID：13028873
> 
> 赞同：2
> 
> 时间：2012-10-23T10:53:28.927
> 
> 标签：javascript, jquery, json, parsing

嘿伙计们，我想解析这种类型的字符串：

```
 {"1":
    [
        {"OrderItemId":832,"ItemId":995,"Price":0},
        {"OrderItemId":833,"ItemId":997,"Price":0},
        {"OrderItemId":834,"ItemId":999,"Price":0}
    ],
    "2":
    [
        {"OrderItemId":835,"ItemId":1008,"Price":0},
        {"OrderItemId":836,"ItemId":1057,"Price":0}
    ]
} 
```

它对我来说非常重要，所以请大家帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:57:18.690

像这样，如果你想访问 OrderItemId

```
var test =  {"1":
    [
        {"OrderItemId":832,"ItemId":995,"Price":0},
        {"OrderItemId":833,"ItemId":997,"Price":0},
        {"OrderItemId":834,"ItemId":999,"Price":0}
    ],
    "2":
    [
        {"OrderItemId":835,"ItemId":1008,"Price":0},
        {"OrderItemId":836,"ItemId":1057,"Price":0}
    ]
}

alert(test["1"][0]['OrderItemId']);
alert(test["1"][1]['OrderItemId']);
alert(test["1"][2]['OrderItemId']);

alert(test["2"][0]['OrderItemId']);
alert(test["2"][1]['OrderItemId']); 
```

更新，迭代未知长度的低谷测试

```
for (var i=0;i<test["1"].length;i++) {
    alert(test["1"][i]['OrderItemId']);
} 
```

这里有全自动枚举

```
var number, count = 0;
var en = [];
for(number in test) {
    en[count]=number;
    count++;
}
for (var r=0;r<en.length;r++) {
    alert(en[r]);
    for (var i=0;i<test[en[r]].length;i++) {
        alert(test[en[r]][i]['OrderItemId']);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:55:04.037

这是[JSON](http://www.json.org/)。使用[它](http://www.json.org/js.html)来解析它。（或您喜欢的任何其他库，可能是 jQuery）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T11:03:34.537

//你也可以这样做：

```
<script>
    var employees = { "accounting" : [   // accounting is an array in employees.
                                    { "firstName" : "John",  // First element
                                      "lastName"  : "Doe",
                                      "age"       : 23 },

                                    { "firstName" : "Mary",  // Second Element
                                      "lastName"  : "Smith",
                                      "age"       : 32 }
                                  ], // End "accounting" array.                                  
                  "sales"       : [ // Sales is another array in employees.
                                    { "firstName" : "Sally", // First Element
                                      "lastName"  : "Green",
                                      "age"       : 27 },

                                    { "firstName" : "Jim",   // Second Element
                                      "lastName"  : "Galley",
                                      "age"       : 41 }
                                  ] // End "sales" Array.
                } // End Employees

    var output="<ul>";
    for (var i in employees.accounting) {
        output+="<li>" + employees.accounting[i].firstName + " " + employees.accounting[i].lastName + "--" + employees.accounting[i].age+"</li>";
    }
    output+="</ul>";

    var output1="<ul>";
    for (var j in employees.sales) {
        output1+="<li>" + employees.sales[j].firstName + " " + employees.sales[j].lastName + "--" + employees.sales[j].age+"</li>";
    }
    output+="</ul>";

    alert(output1);

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:59:09.153

问题可能是由于行结束。

这是一个工作[在 chrome 开发控制台中测试] 代码：

```
var jsonStr = '{"1":\
    [\
        {"OrderItemId":832,"ItemId":995,"Price":0},\
        {"OrderItemId":833,"ItemId":997,"Price":0},\
        {"OrderItemId":834,"ItemId":999,"Price":0}\
    ],\
    "2":\
    [\
        {"OrderItemId":835,"ItemId":1008,"Price":0},\
        {"OrderItemId":836,"ItemId":1057,"Price":0}\
    ]\
}';
var obj = JSON.parse(jsonStr); // works! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:01:07.160

您可以使用[jQuery 来解析 JSON](http://api.jquery.com/jQuery.parseJSON/)

也看看这个 SO 问题[Parse JSON in JavaScript?](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T11:26:19.323

如果每个对象项结束，则无需在结束后添加反斜杠。只能用逗号分隔。

# jquery - jQuery 移动表格颜色

> ID：13028881
> 
> 赞同：0
> 
> 时间：2012-10-23T10:53:56.520
> 
> 标签：jquery, html, css, jquery-mobile

我正在遍历一个列表，并且想为表格中单元格的背景添加颜色：

```
$("<td>")
   .addClass("tableCell")
   .text(cellText)
   .data("col", c)
   .appendTo(MyTable)
   .css("background-color", "#EFF1F1"); 
```

但是设置css不起作用，有什么想法吗？

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:17:56.387

查看我的 jsFiddle，这对我有用

我用`$("td")`而不是`$("<td>");`

[http://jsfiddle.net/brSET/](http://jsfiddle.net/brSET/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:11:07.983

我以前也遇到过这个问题，改了

`.css("background-color", "#EFF1F1");` 到 `.css("background-color", "grey");`

似乎对我有用..

# css - 如何对 CSS 伪元素进行替换

> ID：13028891
> 
> 赞同：2
> 
> 时间：2012-10-23T10:54:42.090
> 
> 标签：css, performance

`:after`有没有一种方法可以测量具有大量和CSS的网页的性能（显示）`:before`？

我认为对每个元素的渲染时间影响很小，在现代计算机上没有问题，但在速度较慢的移动设备上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:11:31.840

Chromium 开发者工具现在包括一个简单的 CSS 选择器时序分析器。

打开开发人员工具（`F12`或`Ctrl + Shift + I`）并选择“配置文件”；使用“收集 CSS 选择器配置文件”。（您需要开始分析并在一段时间后停止分析以查看结果）您可以`ms`在 DevTools-Window 的底部将输出从百分比切换到时间测量。

# php - 我如何解决需要在多个地方使用相同功能的情况

> ID：13028892
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:54:42.123
> 
> 标签：php, codeigniter

我正在为 mu 电子商务系统创建一个订单履行系统。我陷入了困境。每 1 小时运行 1 个 cron 作业，它分配仓库并执行其他进程。所以这是我执行 1 个完整进程的类。我需要为用户提供单独手动执行每个操作的选项，即手动分配仓库等。因此，此仓库功能将在多个地方使用，即在 cron 类和仓库类中。那么我应该在像warehouse.php 这样的1 个库中创建这些函数，还是在cron 类中创建每个类的实例并调用它的函数？我正在使用 Codeigniter。

希望下面的代码让我清楚。所以我应该创建一个仓库库还是一个控制器是我的问题。主要问题是这样使用

```
class cron extends CI_Controller{

function index(){
$this->load->library('blacklist');
$this->load->library('warehouse');
$this->load->library('lsp');
$this->blacklist->function1();
$this->warehouse->function2();
}
}

or 

class cron extends CI_Controller{

function index(){
$blacklist = new blacklist();
$warehouse = new warehouse();
$lsp  = new lsp();
$blacklist->function1();
$warehouse->function2();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:01:18.110

在扩展 CI_Controller 的 Core 文件夹中设置 MY_Controller - 使您的普通控制器扩展 MY_Controller 而不是 CI_Controller 并将您需要从多个控制器访问的功能放在那里。我做了类似的事情，然后只使用 if(!$this->input->is_cli_request()){ exit(); 将我的 cron 控制器限制为 cli 请求。} 以增加安全性。

样本：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Controller extends CI_Controller {

        public function __construct() {
            parent::__construct();
        }

        protected function _order_export()
        {
             // Export routine goes here
        }
}
/* End of file MY_Controller.php */
/* Location: ./application/core/MY_Controller.php */ 
```

使用 $this->_order_export() 调用此函数；在您的其他控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:02:34.270

是的你可以。编写一个仓库类/控制器或一组函数，以适应系统不同部分的多种用途。然后，您可以对类/函数进行逻辑编程，使其适用于每次使用。

**非常基本的伪代码：**

```
If (CLI)
{
   // do this
} elseif (BATCH) {
   // do that
} elseif (MANUAL) {
   // do other
} 
```

在这一点上，不可能再进一步帮助您，因为我们就像雷区中的盲人。

# jquery - 通过 gmap3 显示地图时出错

> ID：13028895
> 
> 赞同：2
> 
> 时间：2012-10-23T10:54:46.943
> 
> 标签：jquery, google-maps, coffeescript, jquery-gmap3

我正在努力在我的网页屏幕上显示地图。但在显示时遇到一些错误。

错误 ：-

```
TypeError: $("#driver_map").gmap3 is not a function 
```

代码 ：-

```
%script{:src=>'../assets/public/js/gmap3.js'}
%script{:src=>'http://maps.google.com/maps/api/js?sensor=false' :type=>'text/javascript'}
%script{:src=>'../assets/public/js/jquery-1.6.4.js'}

%html
  %head
    %body
      %div{:id=>"driver_map"}

:javascript
  $(function(){
    $('#driver_map').gmap3(
      { action:'init',
        options:{
          center:[46.578498,2.457275],
          zoom: 5
        }
      },
      { action: 'addMarkers',
        markers:[
          {lat:48.8620722, lng:2.352047, data:'Paris !'},
          {lat:46.59433,lng:0.342236, data:'Poitiers : great city !'},
          {lat:42.704931, lng:2.894697, data:'Perpignan ! <br> GO USAP !'}
        ],            
      }
    );
  }); 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:25:12.130

`gmap3.js`使用 jQuery，所以需要在`jquery-1.6.4.js`. 所有示例都按以下顺序加载内容：

1.  jQuery
2.  谷歌地图
3.  gmap3

所以它可能也需要在 Google Maps JavaScript 之后加载。

尝试调整加载顺序：

```
%script{:src=>'../assets/public/js/jquery-1.6.4.js'}
%script{:src=>'http://maps.google.com/maps/api/js?sensor=false' :type=>'text/javascript'}
%script{:src=>'../assets/public/js/gmap3.js'} 
```

我还建议不要使用亲属路径，它们只会造成麻烦。你最好使用绝对路径，`'/assets/public/js/jquery-1.6.4.js'`这样你就不必关心你在哪里。

# javascript - 如何通过ScriptManager类生成标签后面的javascript

> ID：13028896
> 
> 赞同：-2
> 
> 时间：2012-10-23T10:54:47.873
> 
> 标签：javascript, asp.net, webforms

我想使用 ScriptManager 类来生成标记后面的 javascript。但我不知道我应该使用哪种方法......位置必须在标签后面

我的英语很烂，希望表达清楚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:27:44.790

很难说出您需要什么，但如果您需要注册一些客户端脚本，请使用：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "scriptName", "your java script", true); 
```

或者，如果您需要注册在页面加载时运行的脚本，请使用：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "scriptName", "your javascript", true); 
```

# c# - 在图像上添加文本

> ID：13028900
> 
> 赞同：0
> 
> 时间：2012-10-23T10:55:06.517
> 
> 标签：c#, silverlight, windows-phone-7

我正在尝试在相机拍摄的照片上添加一些文本，这是我正在使用的方法，但不幸的是，我得到了一个 closedStream 错误，或者当我尝试使用调度程序时存在跨线程访问。有人可以解释一下出了什么问题吗？

```
 void cam_CaptureImageAvailable(object sender, Microsoft.Devices.ContentReadyEventArgs e)
    {
        DateTime dt = DateTime.Now;
        string fileName = dt.Year.ToString() + dt.Month.ToString() + dt.Day.ToString() + dt.Hour.ToString() + dt.Minute.ToString() + dt.Second.ToString() + ".jpg";

        try
        {  
            // Save picture to the library camera roll.
            library.SavePictureToCameraRoll(fileName, e.ImageStream);

            // Set the position of the stream back to start
            e.ImageStream.Seek(0, SeekOrigin.Begin);

            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                // load photo to writable bitmap 
                WriteableBitmap writeableBitmap = PictureDecoder.DecodeJpeg(e.ImageStream);
                writeableBitmap.Invalidate();
                var renderText = new TextBlock
                {
                    Text = "Hello World",
                    FontSize = 72,
                    Foreground = new SolidColorBrush(Colors.White),
                    FontWeight = FontWeights.Black,
                    Width = 500,
                    Height = 100
                };

                writeableBitmap.Render(renderText, new TranslateTransform() { X = 100, Y = 300 });
                writeableBitmap.Invalidate();

                using (var ms = new MemoryStream())
                {
                    writeableBitmap.SaveJpeg(ms, 1024, 768, 0, 100);
                    ms.Seek(0, SeekOrigin.Begin);

                    library.SavePicture("x" + fileName, ms);
                }

                // e.ImageStream.Close();
            });

            // Save picture as JPEG to isolated storage.
            using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write))
                {
                    // Initialize the buffer for 4KB disk pages.
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;

                    // Copy the image to isolated storage. 
                    while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);
                    }
                }
            }
        }
        finally
        {
            // Close image stream
            e.ImageStream.Close();
        }
    } 
```

使用上面的代码，我收到以下错误：无法访问已关闭的流。

如果我删除调度程序，我会收到此错误：无效的跨线程访问。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:47:05.703

首先，发生了什么？

`Dispatcher.BeginInvoke`推迟你的代码并告诉 UI 线程在它可用时执行它。因此，您的`e.ImageStream.Close();`行在`BeginInvoke`. 因此，当您尝试读取流的内容时，它已经关闭。

解决这个问题的两种方法：

1.  `e.ImageStream.Close();`从`finally`块中删除。但我不知道流是否仍会保持打开状态。
2.  如果 1\. 不起作用，请将流的内容复制到 a `MemoryStream`，然后使用此流创建`WriteableBitmap`：

    ```
    var stream = new MemoryStream();
    e.ImageStream.CopyTo(stream); 
    ```

在这两种情况下，不要忘记在创建完`WriteableBitmap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:03:54.927

将 ui less 代码放置在调度程序范围之外。

或将您的 e.ImageStream 保存到其他流可以在调度程序范围内获得。

# python - 不能在美味派中使用 curl 和 ApiKeyAuthentication 进行发布

> ID：13028906
> 
> 赞同：0
> 
> 时间：2012-10-23T10:55:19.550
> 
> 标签：python, django, tastypie

我正在使用tastePie 0.9.11 创建一个RESTful API。

我的 API 工作正常，但是当我添加 APIKeyAuthentication 时，我无法让 POST 请求工作。

我在资源元中将身份验证/授权设置为：

```
authentication = ApiKeyAuthentication()
authorization= Authorization() 
```

我已经在管理站点中为用户 admin 手动添加了一个 API 密钥，密钥为 1234567890。

当我执行 GET 时，它可以正常工作（http://127.0.0.1:8000/api/v1/application/?format=json&username=admin&api_key=1234567890）

但是，当我尝试使用 curl 进行 POST 时：

```
curl --dump-header - -H "Authorization: ApiKey admin:1234567890" -H "Content-Type: application/json" -X POST --data '{"user": "/api/v1/user/1/", "title":"api test application"}' http://localhost:8000/api/v1/application/ 
```

我收到 401 未授权错误。

我通过添加授权标头来关注文档，但也许我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:47:04.190

在 v0.9.11 之后添加了通过标头指定 ApiKey。它将在 v0.9.12 版本中。

# javascript - 返回顶部 php 上的链接是否包含页脚？

> ID：13028907
> 
> 赞同：4
> 
> 时间：2012-10-23T10:55:23.473
> 
> 标签：javascript, html, href

我的网站上有一个页脚部分，我想在其中包含一个返回顶部的链接。问题是它无法检测到用户在网站的哪个页面上，因此它在 index html 顶部发送它。有什么办法可以做到这一点？

我不能使用`<a href="#">Back to top</a>`，因为我有一个链接到网站索引页面的基本 href。

这段代码运行良好，也可以跨浏览器：

```
<a href="javascript:void(0)" onclick="parent.window.scrollTo(0,0);">TOP</a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T10:59:54.507

在页面内容之前添加一个命名锚点，以指定当前页面的顶部。像：

```
<a name="top"></a>
<!-- Rest of your content here --> 
```

然后在您的页脚中，链接到锚点：

```
<a href="#top">Back to top</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T10:58:53.850

你不需要 php。只需添加这样的链接：

```
<a href="#">Back to top</a> 
```

# javascript - CKEDITOR 中将非正式文本转换为 Html

> ID：13028910
> 
> 赞同：0
> 
> 时间：2012-10-23T10:55:28.530
> 
> 标签：javascript, html, ckeditor, nodes

我有如下字符串：

```
alert(tempstr);//"&lt;b&gt; Testing &lt;/b&gt;" 
```

现在我想用这个字符串创建一个 ckeditor 节点

```
NewElem=CKEDITOR.dom.element.createFromHtml(tempstr); 
```

或者

```
NewElem.setHtml(tempstr); 
```

两者都像文本一样分配。

可能使用替换（`&lt;`到<）和（`&gt;`到>）是可能的。我的想法是这不是一个正确的代码。任何其他正确的代码分配为 Html 字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:07:16.967

这两种方法都接受 HTML，而不是编码的 HTML。所以你应该找到一种方法来解码`tempstr`. 最简单的解决方案是使用替换方法：

```
var newElement = CKEDITOR.dom.element.createFromHtml(
    tempstr.replace( /&lt;/gi, '<' ).replace( /&gt;/gi, '>' )
); 
```

# wpf - 应用程序范围的 WPF 命名空间

> ID：13028911
> 
> 赞同：2
> 
> 时间：2012-10-23T10:55:28.957
> 
> 标签：wpf, xaml

在我的 WPF 应用程序中，我发现自己将以下命名空间添加到每个控件：

```
xmlns:Core="clr-namespace:MHA.Modules.Core;assembly=MHA.Modules.Core" 
```

有没有办法我只能添加这个命名空间一次并且它可以在应用程序范围内使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:26:54.213

可悲的是，我没有办法知道这样做..

相反，您可以做的是使用 XmlnsDefinitions ，这将大大整理它，并且如果您决定在核心但在不同的名称空间中添加一些新的东西，它还会为您提供一些未来的证明。

在您的 AssemblyInfo 文件中，添加以下内容

[程序集：XmlnsDefinition("COMMON-URL", "MHA.Modules.Core")]

您还可以在一个 URL 下添加多个命名空间。

然后你可以在你的 XAML 中引用它，比如

xmlns:Core="COMMON-URL"

有关更多信息 - 请参阅[http://zachbonham.blogspot.co.uk/2010/04/organize-xaml-namespace-declarations.html](http://zachbonham.blogspot.co.uk/2010/04/organize-xaml-namespace-declarations.html)

干杯。圣。

# java - 如何使用 GridBagLayout 定位组件？

> ID：13028917
> 
> 赞同：6
> 
> 时间：2012-10-23T10:56:00.827
> 
> 标签：java, swing, user-interface, layout, gridbaglayout

我是 Java 编程的新手，我正在尝试制作一个包含两个按钮和一个文本区域的窗口，如下图所示。我遇到的问题是定位组件。我尝试使用`GridLayout`并将窗口分成 9 行和 16 个单元格，但后来发现我不能让组件占据超过一个单元格。我知道我应该使用`GridBagLayout`，但我不知道具体如何。帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:56:00.957

你有很多选择。与其尝试将整个组件布局在一个整体中，不如尝试使用复合布局，您可以在单独的窗格中布局 UI 的各个部分，并专注于每个部分的个别需求......

![在此处输入图像描述](../Images/3b38c8a9d3823a25052d3dcbcbdb0f13.png)

```
public class TestLayout11 {

    public static void main(String[] args) {
        new TestLayout11();
    }

    public TestLayout11() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ExamplePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class ExamplePane extends JPanel {

        public ExamplePane() {
            setLayout(new GridBagLayout());

            JPanel buttonPane = new JPanel(new GridBagLayout());

            JButton btnOkay = new JButton("Ok");
            JButton btnCancel = new JButton("Cancel");

            JTextArea textArea = new JTextArea(5, 20);

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.anchor = GridBagConstraints.CENTER;
            buttonPane.add(btnOkay, gbc);
            gbc.gridy++;
            gbc.insets = new Insets(50, 0, 0, 0);
            buttonPane.add(btnCancel, gbc);

            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(100, 100, 100, 100);
            add(buttonPane, gbc);

            gbc.insets = new Insets(150, 100, 150, 100);
            gbc.gridx++;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.BOTH;
            add(new JScrollPane(textArea), gbc);                
        }            
    }        
} 
```

# tsql - 我如何运行带有错误异常的 t-sql 脚本

> ID：13028919
> 
> 赞同：0
> 
> 时间：2012-10-23T10:56:04.650
> 
> 标签：tsql

我在表格中有文本列，其中保存日期，日期以 21.02.2012 和 2012-02-21 格式保存，我想将所有日期转换为 2012-02-21
我如何运行此脚本并出现错误异常
`update AdvancedFieldsValues set value=(CONVERT(date, value, 104)) where field_id=801`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:20:00.750

```
update AdvancedFieldsValues
set value = convert(char(10), convert(date, value, 104), 120)
where field_id=801 
```

# r - 将数据作为事务读取时出错

> ID：13028923
> 
> 赞同：3
> 
> 时间：2012-10-23T10:56:09.907
> 
> 标签：r

我正在尝试从我的交易数据中找出关联规则。

文件格式如下：

```
TransactionID |  ProductID
----------------------------
3716280          337
3716280          1512
3714018          963 
```

我使用 RCmdr 导入数据并将其保存为数据集。我尝试使用以下命令再次将其作为事务读取：

```
txn <- read.transactions(transactions, rm.duplicates= FALSE, format=”single”,sep=””,cols=c(1,2)); 
```

我收到一个错误：`ERROR: < text>`

我刚开始学习R，有人可以帮忙吗？

谢谢！维诺特

# scala - TestNG @Test 中会出现竞争条件吗？

> ID：13028924
> 
> 赞同：0
> 
> 时间：2012-10-23T10:56:13.853
> 
> 标签：scala, testng, race-condition

我写了几个测试，非常相同，但只有一个方式不同。一个测试有一个国际地址，另一个有国内地址：`DomesticAddress`.scala & `InternationalAddress`.scala

`DomesticAddress`.scala 扩展了另一个`ShipMethods`具有`@Test`方法的类 .scala。在这里，我正在验证`DomesticAddress`.scala 是否存在有效的船舶方法。`InternationalAddress`.scala 不*扩展*.scala `ShipMethods`。

两个测试类（`DomesticAddress`.scala 和`InternationalAddress`.scala）都有不同的用户；唯一的相似之处是地址存储在名为“地址”的 val 中。

当我运行这两个测试几次（并且只有几次）时，`DomesticAddress`.scala 的测试失败，因为我在那里看到了一个国际地址。

**在这种情况下是否可能发生竞争条件？**我的 testng xml 保留了测试的顺序，因此可能会发生竞争情况更加令人困惑，尤其是因为我没有在测试之间共享任何资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:32:53.780

为什么您的 ShipMethods 上有一个 @Test 注释？是测试班吗？如果它不是测试类（与您要测试的类相反），那么它不应该有 @Test 注释。

您的被测类不应在其中包含测试方法。

# sql - 连接表时删除重复项

> ID：13028925
> 
> 赞同：7
> 
> 时间：2012-10-23T10:56:18.843
> 
> 标签：sql, database, postgresql

我有一个新闻表如下

消息：

```
| id  | title                       | description
| 1   | Breaking news               | bla bla bla
| 2   | Heavy snowfall in london    | bla bla bla 
```

a 类型表如下：

```
| id  | type_name   | type_code
| 1   | weather     | 0567
| 2   | city        | 0653 
```

和一个 NewsType 表如下

```
|id | news_id | type_id | created_by |
| 1 | 2       | 1       | "John"     |
| 2 | 2       | 2       | "Alex"     | 
```

从 NewsType 表中可以看出，一条新闻可以分为两种或多种类型。

我需要显示与类型相对应的新闻。用户可能会说给我有关城市和天气的所有新闻。为了显示这一点，我正在做类似的事情：

```
 select distinct n.* , nt.created_at
      from news n, newstype nt, type t where
      n.id = nt.news_id and
      t.id = nt.type_id 
      order by nt.created_at
      limit 25 
```

问题是这个查询两次返回相同的消息（我认为这是因为我正在做的内部连接）。我应该在查询中进行什么更改，以便如果新闻被分类为两种类型，并且用户请求查看相同的两种类型的新闻，我只能得到单个新闻项？而不是两个！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:12:18.030

简单的解决方案：

```
select * from news where news_id in (
select news_id 
from NewsType 
where type_id in (the types you want)
) 
```

大多数人会说您应该在内部查询的 news_id 上添加 DISTINCT。你可以试试，但我很确定它会降低性能。

总而言之，如果您认为此解决方案表现不佳，您可以将内部查询设为 CTE，这通常表现更好：

```
with my_CTE as(
    select news_id 
    from NewsType 
    where type_id in (the types you want)
)
select * 
from news 
where news_id in (select news_id  from my_CTE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:39:58.977

A`group by`是另一种方法：

```
select n.id, n.title, n.description, max(nt.created_at)
      from news n, newstype nt, type t where
      n.id = nt.news_id and
      t.id = nt.type_id
      group by n.id, n.title, n.description
      order by nt.created_at
      limit 25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T11:04:56.220

尝试

```
select distinct n.id, n.title, n.description 
```

但是，正如@Jan Dvorak 所说，

```
select distinct n.* 
```

不应该两次选择相同的新闻

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:04:24.117

您想要选择所有在 NewsType 表中具有条目的故事以用于特定类型。因此，您要选择与类型存在关系的新闻项目：

```
SELECT
    News.ID,
    News.Title,
    News.Description
FROM
    News
WHERE
    EXISTS
    (SELECT
        NULL
    FROM
        NewsType
        INNER JOIN Type ON NewsType.Type_ID = Type.ID
    WHERE
        News.ID = NewsType.News_ID
    AND Type.Type_Code = @typeCode) 
```

如果使用类型名称作为参数，where 子句的最后一行可能需要更改为 Type.Type_Name = @typeName

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:08:05.143

您需要决定如何处理“重复”类型：您是想只为与多种类型关联的新闻项目显示一种类型，还是要将它们全部列出？

如果是后者，您可以使用 string_agg 函数进行调查，请参阅[http://www.postgresql.org/docs/9.2/static/functions-aggregate.html](http://www.postgresql.org/docs/9.2/static/functions-aggregate.html)

```
select distinct n.id, n.title, n.description, string_agg(t.type_name, ',')
from news n, newstype nt, type t where
n.id = nt.news_id and
t.id = nt.type_id
group by n.id, n.title, n.description
limit 25 
```

# eclipse - eclipse CDT - Cannot open .gcda files

> ID：13028944
> 
> 赞同：0
> 
> 时间：2012-10-23T10:57:39.863
> 
> 标签：eclipse, cygwin, code-coverage, eclipse-cdt, gcov

I am developing a coverage data tool in eclipse cdt. I used gcov and build and execute my C program to generate .gcda and .gcno files.

When double click on .gcda file to see the coverage data, below error message displays.

> An error has occurred. See error log for more details. org.eclipse.linuxtools.binutils.utils.STSymbolManager.demangle(Lorg/eclipse/cdt/core/IBinaryParser$IBinaryObject;Ljava/lang/String;Lorg/eclipse/core/resources/IProject;)Ljava/lang/String;

But I already downloaded and save **org.eclipse.linuxtools.binutils_4.0.0.201209191645.jar** into ***plugins*** directory.

Where am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:55:37.330

after doing some further reasearch I was able to get rid of this problem.

After completing following requirements, I was able to open & view coverage details in .gcda files.

*   Eclipse Indigo
*   CDT 8.0
*   Eclipse GCov Integration (Incubation) 0.6.0.201202152032 Plugin
*   Eclipse GProf Integration (Incubation) 0.7.0.201202152032 Plugin
*   Cygwin
*   GNU cygwin binutils (strings.exe,addr2line.exe, c++filt.exe and nm.exe should be there)
*   cygwin\bin path should be in the system PATH

# android - Zxing 项目作为项目中的库不会构建

> ID：13028945
> 
> 赞同：1
> 
> 时间：2012-10-23T10:57:40.160
> 
> 标签：android, zxing

（再次）我想在我的项目中使用 ZXing 库，我按照本教程 [http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app- natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/) [唯一的区别我正在使用 netbeans] 在构建 zxing android 项目并将其标记为库之后，我想在我自己的项目中将其作为库。完成后，我无法构建它。看起来 R 文件无法在 [library 和 myProject ] 中创建，例如：

```
 error: constant expression required
        case R.id.zxinglib_auto_focus: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:59:58.413

它不能直接用作库项目，因为它不打算用作库项目，通常不鼓励这样做。请参阅我对同一篇文章的评论。

[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/#comment-159](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/#comment-159)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T11:23:33.200

清理项目后重试。Eclipse 可能没有创建您正在使用的视图的 ID。

# jquery - 拖放游戏 - 为什么它现在不起作用我已将其移至另一个域？

> ID：13028948
> 
> 赞同：1
> 
> 时间：2012-10-23T10:57:44.057
> 
> 标签：jquery, jquery-ui-draggable

今年早些时候，我在拖放游戏上做了一些工作。这是我除了基本的 html 之外的第一件事。我让它工作了，但后来不得不把它放在一边一段时间。

我现在回来工作了。我创建的游戏被放在我不再拥有的域的 ftp 上。我将 html 和图像文件放在另一个域中，希望它们能够正常工作。然而现在什么都没有了！

我不知道有什么不同。我几乎不记得我最初是如何编码的。是否有其他文件应该在 ftp 或类似的东西上？任何人都可以解释一下吗？

游戏： http: [//www.vic-taylor.com/dolls/doll6.html](http://www.vic-taylor.com/dolls/doll6.html)

代码：

```
<!doctype html>
<html lang="en">
<head>

<script src="http://code.jquery.com/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.17/jquery-ui.min.js"></script>

    <script>
    $(function() {
        $( "#draggable" ).draggable()
    });
    </script>

<script>
    $(function() {
        $( "#draggable2" ).draggable();
    });
    </script>

<script>
    $(function() {
        $( "#draggable3" ).draggable();
    });
    </script>

<script>
    $(function() {
        $( "#draggable4" ).draggable();
    });
    </script>

<script>
    $(function() {
        $( "#draggable5" ).draggable();
    });
    </script>

</head>
</body>

<div id="bodies/palepd.gif">
    <img src="bodies/palepd.gif" class="ui-widget-content" id="draggable">
    <img src="bodies/trousers.gif" class="ui-widget-content" id="draggable2">
<img src="bodies/top.gif" class="ui-widget-content" id="draggable3">
<img src="bodies/dress.gif" class="ui-widget-content" id="draggable4">
<img src="bodies/coat.gif" class="ui-widget-content" id="draggable5">
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:03:12.547

对于初学者，您的 HTML 有以下错误：

`<div id="bodies/palepd.gif">`

我建议更改您的代码以引用 jquery 的确切版本，而不仅仅是最新版本。这是因为 jquery 和 jquery-ui 版本需要兼容。

# linux - 基于 libpcap 的嗅探器是否适用于基于拨号的 Internet 连接

> ID：13028950
> 
> 赞同：2
> 
> 时间：2012-10-23T10:57:48.923
> 
> 标签：linux, networking, network-programming, libpcap, packet-sniffers

我正在使用 libpcap 编写一个 http-sniffer。如果用户使用基于拨号的互联网连接，我想知道它会起作用吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:58:58.590

是的。拨号连接将在计算机上显示为单独的界面（在大多数情况下，无论如何），并且可以正常嗅探。

# c# - 使用 C# 在服务器端文本框中进行十进制验证

> ID：13028952
> 
> 赞同：1
> 
> 时间：2012-10-23T10:58:03.023
> 
> 标签：c#, asp.net, validation, c#-4.0, decimal

我使用此代码进行十进制验证。它工作正常。但它允许在文本框中输入字母。当我从文本框退出时，只有错误消息会显示附近的文本框。我需要，**如果我按字母，文本框不允许输入文本框**，该怎么做？

```
<asp:RegularExpressionValidator ControlToValidate="txtNumber" 
                    runat="server" ValidationExpression="^[1-9]\d*(\.\d+)?$"
                        ErrorMessage="Please enter only numbers">
                    </asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:05:40.450

只需使用`CompareValidator`，您实际上不需要使用正则表达式：

```
<asp:CompareValidator 
      ID="CompareValidator1" runat="server" ControlToValidate="TextBox1"
      ErrorMessage="Please enter a numberical value." ForeColor="Red"
      Operator="DataTypeCheck" Type="Integer">!
</asp:CompareValidator>
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox> 
```

您也可以在服务器上执行此操作，只需使用`TryParse()`：

```
int x = 0;
bool valid = Int32.TryParse(TextBox1.Text, out x);
if(!valid)
   {
        //inform the user
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:20:50.347

**使用 Javascript：**

```
<asp:TextBox ID="TextBox2" onkeypress="AllowOnlyNumeric(event);" 
   runat="server"></asp:TextBox> 
```

**Javascript代码：**

```
function AllowOnlyNumeric(e) {
    if (window.event) // IE 
    {
        if (((e.keyCode < 48 || e.keyCode > 57) & e.keyCode != 8) & e.keyCode != 46) {
            event.returnValue = false;
            return false;

        }
    }
    else { // Fire Fox
        if (((e.which < 48 || e.which > 57) & e.which != 8) & e.which != 46) {
            e.preventDefault();
            return false;

        }
    }
} 
```

# java - Hibernate mysql groupe 按天计算结果

> ID：13028959
> 
> 赞同：1
> 
> 时间：2012-10-23T10:58:33.820
> 
> 标签：java, mysql, sql, hibernate

我有这个功能

我需要在sql（hibernate或mysql）或interpert结果数组的java函数中这样做

我需要一个连续的结果fort groupe by day

从 propCode.propClass 中选择 DAY(prop.docCreationDate), count(prop.docfullName) 作为 prop.docCreationDate >= '" + startDate + " 00:00:00' 和 prop.docCreationDate <= '" + endDate + " 23:59:59' 按天分组（prop.docCreationDate）"

```
i have this entitie count in my table
2012-10-05   3
2012-10-06   0
2012-10-07   7
2012-10-08   13
2012-10-09   9
2012-10-10   0
2012-10-11   0
2012-10-12   3

the request return me this values
5    3
7    7
8    13
9    9
12   3

in this way i loose three lignes that have 0 as value, i need a request that return me this
5    3
6    0
7    7
8    13
9    9
10   0
11   0
12   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:58:51.550

我假设在您的`propClass`表格中，您每天有多个带有文档路径名称的条目。由于您提供的条目已经几乎是您需要的，除了一天的转换，它与使用的查询不匹配。

考虑到这一点，您提到的条目是每天的文档总数，我假设您在缺失的日子里插入了 0 个值。如果是这样，您可以使用[此处](http://schimpf.es/generate-a-list-between-two-dates-in-mysql/)`time_intervals`提到的临时表。然后您应该能够执行以下操作：

```
call interval_between('"+ startDate +"', '" + endDate + "', 'DAY', 1);

select day(ti.interval_from), count(prop.docfullName) from time_intervals ti left join propClass as prop 
on prop.docCreationDate>=ti.interval_from AND prop.docCreationDate < ti.interval_from + INTERVAL 1 DAY
where ti.interval_from>='"+ startDate +"' and ti.interval_from < '" + endDate + "'
group by ti.interval_from; 
```

使用[本机查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)，您可以从 hibernate 调用上述两个语句。

用[SqlFiddle](http://www.sqlfiddle.com/#!2/0461d/3)测试。

# c# - RavenDB 为日历应用程序建模

> ID：13028960
> 
> 赞同：2
> 
> 时间：2012-10-23T10:58:34.523
> 
> 标签：c#, nosql, data-modeling, ravendb, modeling

我第一次尝试 Ravendb 并尝试为锻炼应用程序建立模型。这是我不知道如何安排的课程的简单示例。

```
User{
string:Name
string:Email
//+ 20 or so more properties

}

CalendarEntry{
DateTime:TimeStamp
decimal:Weight
decimal:Waist
List<Meal> Meals
List<WorkoutSession> WorkoutSessions
//+ more properties

} 
```

成员将更新他们的训练日历，包括体重、腰围、他们的日常锻炼、食物摄入量和卡路里等。所以日历条目的列表每天都会增长。

所以问题是，用户对象应该包含日历条目列表，还是应该将其用作自己的实体集合，并带有指向用户的 Id？

我主要关心的是 Ravendb 中的最大文档大小（有吗？），因为列表每天都会增长，而且如果日历条目是嵌套集合，一年左右后用户文档可能会变得太重。

任何意见，将不胜感激

//金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:55:35.583

我不知道 Raven 中的任何文档大小限制，但您的第二种方法仍然听起来更好......日历条目对象本身看起来相当大，因此如果集合，它最终可能会进一步损害性能每个用户的日历条目数量都会增加。

但你真正需要问的问题是如何使用数据？您是否可能想要查询数据库中的所有日历条目，而不考虑用户？或者在给定的时间段内？如果答案是肯定的，那么您最好将日历条目存储在它们自己的集合中，以便为它们优化索引。

在 raven 中管理文档之间的“外键”相当容易，所以这应该不会太难完成。此页面详细说明了您如何处理文档关系：[http ://ravendb.net/docs/client-api/querying/handling-document-relationships](http://ravendb.net/docs/client-api/querying/handling-document-relationships)

# c++ - 如何强制 approxPolyDP() 只返回最好的 4 个角？- Opencv 2.4.2

> ID：13028961
> 
> 赞同：5
> 
> 时间：2012-10-23T10:58:36.927
> 
> 标签：c++, image-processing, opencv, artificial-intelligence

好吧，这个问题说明了一切

我有一些轮廓，我想从中得到最好的四边形

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-11T04:51:10.980

我遇到了圆角卡片的问题，即使我`approxPolyDP()`只能返回 4 个点/边缘，它也永远不是最好的，因为“角落”经常被选为更接近这些圆角边缘。我的解决方案包括增加返回到拐角处的点数，然后我的问题让我可以相对安全地假设找到的四个最长边代表边。按顺序取这四个最长的边，找到每对相交的位置，你就有了四边形的点。

作为奖励，您已经有了长度，因此您可以以正确的顺序将点输入到您的透视变换中，这样它就不会以错误的方式被挤压和拉伸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:25:28.277

您必须使用嵌套区间的方法找到一个合适的值`epsilon`，因为点的数量随着 的减少而增加`epsion`。但是，可能无法达到 4 个角点的值，因为在某个 epsilon 值下，点的数量可能会从 3 跳到 5。

如果您想排除这种情况，您可能需要自己实现 Ramer-Douglas-Peucker 算法并对其进行修改，因此将返回给定数量的点。（顺便说一句，您要的是“最佳” 4 个角。您必须指定最佳含义。`approxPolyDp()`不要求最佳解决方案！）

除此之外，我认为没有办法强制`approxPolyDP()`退回 4 分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-25T14:07:14.863

我相信您可以对值执行二进制搜索`epsilon`以找到最佳简化。

编码：

```
def simplify_contour(contour, n_corners=4):
    '''
    Binary searches best `epsilon` value to force contour 
        approximation contain exactly `n_corners` points.

    :param contour: OpenCV2 contour.
    :param n_corners: Number of corners (points) the contour must contain.

    :returns: Simplified contour in successful case. Otherwise returns initial contour.
    '''
    n_iter, max_iter = 0, 100
    lb, ub = 0., 1.

    while True:
        n_iter += 1
        if n_iter > max_iter:
            return contour

        k = (lb + ub)/2.
        eps = k*cv2.arcLength(contour, True)
        approx = cv2.approxPolyDP(contour, eps, True)

        if len(approx) > n_corners:
            lb = (lb + ub)/2.
        elif len(approx) < n_corners:
            ub = (lb + ub)/2.
        else:
            return approx 
```

# delphi - 从命令行编译 .dproj 文件

> ID：13028962
> 
> 赞同：2
> 
> 时间：2012-10-23T10:58:37.457
> 
> 标签：delphi, delphi-xe2

我正在使用 Embarcadero Delphi XE2，并且我有一个想要从命令行编译的项目。我设法在 .dpr 上使用 dcc32 来做到这一点，但我必须设置一些设置。

从我的想法来看，文件 .dproj 具有所有必要的路径和东西，所以我不需要设置这些变量，所以我的问题是：

是否可以从 .dproj 文件编译 delphi 命令行项目？

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T11:07:08.133

是的。其实很简单。

使用`Windows Start`按钮启动`Embarcadero RAD Studio XE2->RAD Studio Command Prompt`，它会设置正确的环境变量和搜索路径条目。然后切换到您的项目文件夹，只需键入`MSBuild`并点击`Enter`，它将使用当前项目文件执行编译器。

如果文件夹中有多个 .dproj 文件，只需在 之后添加它的名称`MSBuild`，如`MSBuild MyMainProj.dproj`.

# excel - OLEDB 读取 excel 混合数据类型，没有标题

> ID：13028969
> 
> 赞同：1
> 
> 时间：2012-10-23T10:58:59.870
> 
> 标签：excel, datatable, dataset, oledb

我正在通过 OLEDB 连接将一些 excel 电子表格读入数据集。我遇到了混合数据类型的问题（特别是数字值和数字与文本混合的列，即####### 和##abc##）

我已经尝试过这个问题中建议的解决方案[OleDB & mixed Excel datatypes : missing data](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data/5721521#5721521)

然而，经过进一步研究，似乎 TypeGuessRows=0 和 ImportMixedTypes=Text 在连接字符串中什么都不做，因为它们总是从注册表中获取，对于这个解决方案我无法编辑。

上述解决方案有效的唯一原因是不设置标题 (HDR=NO)，以便任何具有标题的文件始终将所有列设置为文本类型。

我要处理的文件确实具有混合数据类型，并且没有标题行。有谁知道将 OLEDBDataAdapter 设置为将所有列读取为文本类型的解决方案？

# html - 使单字符css样式的站点宽？

> ID：13028971
> 
> 赞同：4
> 
> 时间：2012-10-23T10:59:03.770
> 
> 标签：html, css

客户只要求将`/`他的网站的 红色... 贯穿整个网站！

我是否必须在每个 / 周围添加跨度，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:22:16.330

希望这个样本有帮助。我在 SO 中找到了它。您可以用`&reg;`斜杠的html代码替换`&#47;`

```
$(document).ready(function() {
    $('*').each(function() {
        var n = $(this).html().replace(
            new RegExp('®','g'),
            '<sup>®</sup>'
            ).replace(
            new RegExp('&reg;','g'),
            '<sup>&reg;</sup>'
            );
        $(this).html(n);
    });
});​ 
```

[**演示**](http://jsfiddle.net/SowmyaShivaram/Fwjd4/21/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:20:59.870

您可以尝试以下 jQuery 脚本：

```
$('body').html($('body').html()
          .replace(/\/(?=[^>]*<)/gi, '<span style="color:red">/</span>'));​​​​ 
```

它只是用 span 将所有不在标签内的斜线包装起来。

检查它对您的网站有多快，我相信它可以使用。

这是一个[FIDDLE](http://jsfiddle.net/vagvL/)，用于证明使用前瞻`(?=[^>]*<)`对于防止标签内的匹配`<>`被替换很重要。尝试删除它，生成的 HTML 将被破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:09:44.673

不能单独用css完成。检查此[链接](https://stackoverflow.com/questions/1230445/javascript-regex-how-to-bold-specific-words-with-regex)以了解如何使用 javascript 进行操作

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T11:05:06.217

您必须将每个出现的字符都包含在`span`标记或其他合适的标记中。（实际上，`<font color=red>/</font>`也可以。）但是，如果这听起来更合适，您可以在客户端动态执行此操作（您将拥有遍历文档树并进行包装的客户端 JavaScript）。

注意：这不适用于将纯文本作为声明内容的元素中的内容，例如`option`元素。在它们内部，单个字符的样式不能与元素的其他内容不同。

# java - 按钮单击时读取 URL 未报告 Java 中的 IO 编译错误

> ID：13028972
> 
> 赞同：0
> 
> 时间：2012-10-23T10:59:05.443
> 
> 标签：java, compiler-errors, japplet

我收到未报告的 IOException 错误尽管我构造了 try&catch 语句。

这个小程序试图调用一个 phpscript 。所以我必须在单击按钮时阅读 URL。

我是java的新手。你能解释什么是错的

错误 44：IO 异常必须被捕获或声明为抛出

URLConnection myURLConnection = myURL.openConnection();

错误 46：IO 异常必须被捕获或声明为抛出

myURLConnection.connect();

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.io.*;

public class RegisterUser extends Applet{

 //Applet components
TextField panel1 = new TextField(10);
TextField panel2 = new TextField(10);
TextField panel3 = new TextField(10);
Button    save   = new Button("Save");

public void init(){
   //There is two text fields and a button
    add(panel1);
    add(new Label("Name:"));
    addNewLine();
    add(panel2);
    add(new Label("Last:"));
    addNewLine();
    add(save);
    addNewLine();

    // Now tell the button  what it should do when it clicked

   save.addActionListener(new SaveListener());
  }

  class SaveListener implements ActionListener{

public void actionPerformed(ActionEvent event) {

                    try
          {

          URL myURL = new URL("http://www.myplace.com/save.php?name="+panel1.getText()+"&last_name="+panel2.getText()+"&email="+panel3.getText());

          URLConnection myURLConnection = myURL.openConnection();

          myURLConnection.connect();

          }

          }
          catch (MalformedURLException e){
          System.out.println(e.getMessage());
         }
    }
      }

      private void addHorizontalLine(Color c)
   {
   // Add a Canvas 10000 pixels wide but only 1 pixel high, which acts as
   // a horizontal line to separate one group of components from the next.
   Canvas line = new Canvas( );
  line.setSize(10000,1);
  line.setBackground(c);
  add(line);
  }

  private void addNewLine( )
 {
   // Add a horizontal line in the background color. The line itself is
   // invisible, but it serves to force the next Component onto a new line.
   addHorizontalLine(getBackground( ));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:07:48.937

`IOException`你必须像这样抓住检查

```
catch (IOException exc) {
  // handle exception
} 
```

在你的`try` `catch`你只能抓住`MalformedURLException`这就是你得到编译错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:19:44.600

看起来你在-block`}`之后有太多了。`try`

你还必须赶上`IOException`

像这样写：

```
 try{
        URL myURL = new URL("http://www.myplace.com/save.php?name="+panel1.getText()+"&last_name="+panel2.getText()+"&email="+panel3.getText());
        URLConnection myURLConnection = myURL.openConnection();
        myURLConnection.connect();
      }catch (MalformedURLException e){
        System.out.println(e.getMessage());
      }catch (IOException e2){
        System.out.println(e2.getMessage());
      } 
```

# android - 如何将画布保留在布局中？

> ID：13028977
> 
> 赞同：1
> 
> 时间：2012-10-23T10:59:09.687
> 
> 标签：android

我的代码：

```
public class MainActivity extends GraphicsActivity{    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new MyView(this));

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xffffffff);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                       0.4f, 6, 3.5f);
        mPaint.setMaskFilter(mEmboss);

        //mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
    }

    private Paint       mPaint;
    private MaskFilter  mEmboss;

    public class MyView extends View {

        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;

        public MyView(Context c) {
            super(c);

            Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.t01);
            Display  display = getWindowManager().getDefaultDisplay();
            int height = display.getWidth();
            int width = display.getHeight();
            mBitmap = Bitmap.createScaledBitmap(bmp, height, width, true);
            //mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }

        @Override
        protected void onDraw(Canvas canvas) {

            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }
    }

} 
```

我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/t01"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

现在我想将活动中的视图添加到这个 xml 中，并且我想把这个视图放在布局上，以便必须看到图像和视图。实际上，我正在尝试在图像中的字母线条内绘制。比如追踪这封信。而且我不希望我的画布绘制在图像中排除我的信的轮廓。如果它越过，那么我想发出一些警告声音。 ![在此处输入图像描述](../Images/5fd713980f8ce299a6ae84f573ae0083.png) 请帮助我如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:01:47.793

当我尝试 MarvinLabs 给出的答案时，我得到了 Inflate Exception。所以尝试使用java本身编写代码。我的代码对我有用：

```
public class MainActivity extends GraphicsActivity{

    private Button clearButton;
    MyView signature;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        signature = new MyView(this);

        RelativeLayout myLayout = new RelativeLayout(this);
        myLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

        clearButton = new Button(this);
        clearButton.setText("Clear");
        clearButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // To clear the drawn lines with finger.
                Intent intent = new Intent(MainActivity.this, MainActivity.class);
            startActivity(intent);
            finish();
            }
        });

        myLayout.addView(signature);
        myLayout.addView(clearButton);

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(100, LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        clearButton.setLayoutParams(params);

        clearButton.bringToFront();
        this.setContentView(myLayout);

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xffffffff);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                       0.4f, 6, 3.5f);
        mPaint.setMaskFilter(mEmboss);

    }

    private Paint       mPaint;
    private MaskFilter  mEmboss;

    public class MyView extends View {

        private static final float MINP = 0.25f;
        private static final float MAXP = 0.75f;

        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;

        public MyView(Context c) {
            super(c);

            Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.t01);
            Display  display = getWindowManager().getDefaultDisplay();
            int height = display.getWidth();
            int width = display.getHeight();
            mBitmap = Bitmap.createScaledBitmap(bmp, height, width, true);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }

        @Override
        protected void onDraw(Canvas canvas) {

            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }
    }
} 
```

感谢您的支持和帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:04:00.043

我想你需要

```
void onMeasure(int widthScrean, int heightScrean) 
```

这可以设置您的可绘制大小，搜索一些示例，这里有很多帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:04:49.800

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/t01" />

    <view
        class="com.mypackage.MainActivity$MyView" 
        id="@+id/my_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

将 com.mypackage 替换为您的实际活动包。

关于声音，覆盖视图的 onTouch 方法并查看是否收到任何 ACTION_OUTSIDE 事件。

# automation - 将 ePub 自动添加到商店

> ID：13028978
> 
> 赞同：1
> 
> 时间：2012-10-23T10:59:13.930
> 
> 标签：automation, publishing, epub, ibooks

有谁知道是否有任何 API 允许您自动将已发布的 ePub 添加到所有主要的电子书商店，如 iBookStore、Amazon Kindle 或 Kobo 电子书？

我可以找到有关创建 ePub 并将其手动添加到商店的大量信息，但我们希望使整个过程自动化，以便我们公司的任何人都可以轻松上传 pdf、一些图像和一些文本，并最终上线书店没有任何人工干预。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:06:34.733

I don't think automated submission is possible for any of the stores, let alone all of them. Certainly for Apple you need to use their custom software to submit the ePub; Amazon requires you to use their web form. Neither is scriptable as far as I'm aware (although you could probably export the metadata to an iTunes-Publisher-ready format).

# javascript - javascript文本字段格式货币？

> ID：13028982
> 
> 赞同：0
> 
> 时间：2012-10-23T10:59:43.087
> 
> 标签：javascript, text, format, field, currency

我有多个文本字段，一旦填写，最终文本字段会通过 javascript 自动更新，我的问题是我想将最后一个字段格式化为货币，但我不知道从哪里开始。

谷歌已经好几天了。:(

这是 JavaScript 代码：

```
function startCalc(){
  interval = setInterval("calc()",1);
}
function calc(){
  one = document.myform.numberof_golfers2.value;
  two = document.myform.numberof_golfers3.value;
  three = document.myform.selected_Rate.value;
  document.myform.Costs_Total.value = (one * 13040) + (two * 10280) + (three * 1);
}
function stopCalc(){
  clearInterval(interval);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:07:58.607

您可以尝试通过以下方式传递值。

```
function formatCurrency(num) {
num = isNaN(num) || num === '' || num === null ? 0.00 : num;
return parseFloat(num).toFixed(2);
} 
```

但请像其他海报建议的那样详细说明您的问题。最后你想要什么格式？

# jakarta-ee - hudson 使用 maven cargo 插件在 tomcat 上部署战争

> ID：13028987
> 
> 赞同：3
> 
> 时间：2012-10-23T11:00:08.703
> 
> 标签：jakarta-ee, maven-2, hudson, hudson-plugins

我正在使用 Hudson 进行 CI。我使用了复制工件插件，它将新形成的构建复制到 maven 存储库，并且 maven 的货物插件用于在 tomcat7x 容器上部署战争。当在 tomcat webapps 中没有战争并且安排了 Hudson 作业时，构建成功部署在 tomcat 上，但是当我在下次成功创建构建时安排我的 Hudson 作业，但是当部署在 tomcat 容器上时，我遇到异常。

```
[INFO] Copying 68 resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [war:war {execution: default-war}]
[INFO] Packaging webapp
[INFO] Assembling webapp [epdei] in [C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\Users\rohit.kumar\.hudson\jobs\test\workspace\src\main\webapp]
[INFO] Webapp assembled in [34667 msecs]
[INFO] Building war: C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war
[INFO] [install:install {execution: default-install}]
[INFO] Installing C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war to C:\Users\rohit.kumar\.m2\repository\epdei\epdei\2.3.0.RELEASE\epdei-2.3.0.RELEASE.war
[HUDSON] Archiving C:\Users\rohit.kumar\.hudson\jobs\test\workspace\pom.xml to C:\Users\rohit.kumar\.hudson\jobs\test\modules\epdei$epdei\builds\2012-10-23_15-47-30\archive\epdei\epdei\2.3.0.RELEASE\pom.xml
[HUDSON] Archiving C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war to C:\Users\rohit.kumar\.hudson\jobs\test\modules\epdei$epdei\builds\2012-10-23_15-47-30\archive\epdei\epdei\2.3.0.RELEASE\epdei.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 minutes 38 seconds
[INFO] Finished at: Tue Oct 23 15:50:16 IST 2012
[INFO] Final Memory: 31M/265M
[INFO] ------------------------------------------------------------------------
channel stopped
Deploying artifacts to file:///C:/Users/rohit.kumar/.m2/repository
Deploying the main artifact epdei.war
Deploying C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war to container Tomcat 7.x Remote
  The property cargo.tomcat.manager.url has been deprecated, please use cargo.remote.uri instead.
  Redeploying [C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war]
  Undeploying [C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war]
ERROR: Publisher hudson.plugins.deploy.DeployPublisher aborted due to exception
org.codehaus.cargo.container.ContainerException: Failed to undeploy [C:\Users\rohit.kumar\.hudson\jobs\test\workspace\target\epdei.war]
    at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.undeploy(AbstractTomcatManagerDeployer.java:138)
    at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:176)
    at hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:62)
    at hudson.plugins.deploy.CargoContainerAdapter$1.invoke(CargoContainerAdapter.java:92)
    at hudson.plugins.deploy.CargoContainerAdapter$1.invoke(CargoContainerAdapter.java:75)
    at hudson.FilePath.act(FilePath.java:758)
    at hudson.FilePath.act(FilePath.java:740)
    at hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:75)
    at hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:45)
    at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:36)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:630)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:608)
    at hudson.maven.MavenModuleSetBuild$RunnerImpl.post2(MavenModuleSetBuild.java:811)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:553)
    at hudson.model.Run.run(Run.java:1390)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:414)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:145)
Caused by: org.codehaus.cargo.container.tomcat.internal.TomcatManagerException: FAIL - Unable to delete [C:\apache-tomcat-7.0.28\webapps\epdei]. The continued presence of this file may cause problems.

    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:529)
    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:443)
    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.undeploy(TomcatManager.java:383)
    at org.codehaus.cargo.container.tomcat.Tomcat7xRemoteDeployer.performUndeploy(Tomcat7xRemoteDeployer.java:59)
    at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.undeploy(AbstractTomcatManagerDeployer.java:128)
    ... 17 more
org.codehaus.cargo.container.tomcat.internal.TomcatManagerException: FAIL - Unable to delete [C:\apache-tomcat-7.0.28\webapps\epdei]. The continued presence of this file may cause problems.

    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:529)
    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:443)
    at org.codehaus.cargo.container.tomcat.internal.TomcatManager.undeploy(TomcatManager.java:383)
    at org.codehaus.cargo.container.tomcat.Tomcat7xRemoteDeployer.performUndeploy(Tomcat7xRemoteDeployer.java:59)
    at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.undeploy(AbstractTomcatManagerDeployer.java:128)
    at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:176)
    at hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:62)
    at hudson.plugins.deploy.CargoContainerAdapter$1.invoke(CargoContainerAdapter.java:92)
    at hudson.plugins.deploy.CargoContainerAdapter$1.invoke(CargoContainerAdapter.java:75)
    at hudson.FilePath.act(FilePath.java:758)
    at hudson.FilePath.act(FilePath.java:740)
    at hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:75)
    at hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:45)
    at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:36)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:630)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:608)
    at hudson.maven.MavenModuleSetBuild$RunnerImpl.post2(MavenModuleSetBuild.java:811)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:553)
    at hudson.model.Run.run(Run.java:1390)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:414)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:145)
[DEBUG] Skipping watched dependency update for build: test #43 due to result: FAILURE
Finished: FAILURE 
```

我的货物插件配置是：

```
<plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <version>1.2.0</version>
            <configuration> 
                <container>
                    <containerId>tomcat7x</containerId>
                    <type>installed</type>
                </container> 
                <configuration>
                    <type>existing</type>
                    <home>C:\apache-tomcat-7.0.28</home>
                </configuration>               
                    <deployer>
                        <type>installed</type>
                        <deployables>
                            <deployable>
                                <groupId>epdei</groupId>
                                <artifactId>epdei</artifactId>
                                <type>war</type>
                                <properties>
                                <context>/epdei</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </deployer>
            </configuration>            
        </plugin> 
```

谁能告诉我如何解决这个问题。

# apache - htaccess 利用浏览器缓存图像和 css

> ID：13028990
> 
> 赞同：39
> 
> 时间：2012-10-23T11:00:47.987
> 
> 标签：apache, .htaccess

我正在尝试为我的网站创建一个 htaccess 文件，并且 pageSpeed 洞察力显示有图像和一个未过期的 css 文件。

我不知道从哪里开始或如何做，我从在线教程中获得了这段代码，并且想知道这是否足以工作。

```
<IfModule mod_expires.c>
ExpiresActive On
############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 1 year"
</FilesMatch>
</IfModule> 
```

或者这段代码是否做了我需要它做的事情？

谢谢

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-23T11:02:05.677

尝试类似的东西

```
<IfModule mod_expires.c> 
  ExpiresActive On
  ExpiresDefault "access plus 1 seconds"
  ExpiresByType text/html "access plus 1 seconds"
  ExpiresByType image/x-icon "access plus 2592000 seconds"
  ExpiresByType image/gif "access plus 2592000 seconds"
  ExpiresByType image/jpeg "access plus 2592000 seconds"
  ExpiresByType image/png "access plus 2592000 seconds"
  ExpiresByType text/css "access plus 604800 seconds"
  ExpiresByType text/javascript "access plus 86400 seconds"
  ExpiresByType application/x-javascript "access plus 86400 seconds"
</IfModule> 
```

或者

```
<FilesMatch "\.(?i:gif|jpe?g|png|ico|css|js|swf)$">

  <IfModule mod_headers.c>
    Header set Cache-Control "max-age=172800, public, must-revalidate"
  </IfModule>

</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-10-15T15:31:42.260

我知道这是一个迟来的答案，但以上内容对我不起作用。相反，我使用了以下内容：

```
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|webp|gif|html|htm|xml|txt|xsl|css)$">
Header set Cache-Control "max-age=31536050"
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-07-21T10:41:40.403

上面的答案对我有用，但是我还想在`.htaccess`. 下面的代码给了我一个很好的解决方案。

`.htaccess`传递 Google PageSpeed Insight 的完整代码：

1.  启用压缩
2.  利用浏览器缓存

> ```
> # Enable Compression
> <IfModule mod_deflate.c>
>   AddOutputFilterByType DEFLATE application/javascript
>   AddOutputFilterByType DEFLATE application/rss+xml
>   AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
>   AddOutputFilterByType DEFLATE application/x-font
>   AddOutputFilterByType DEFLATE application/x-font-opentype
>   AddOutputFilterByType DEFLATE application/x-font-otf
>   AddOutputFilterByType DEFLATE application/x-font-truetype
>   AddOutputFilterByType DEFLATE application/x-font-ttf
>   AddOutputFilterByType DEFLATE application/x-javascript
>   AddOutputFilterByType DEFLATE application/xhtml+xml
>   AddOutputFilterByType DEFLATE application/xml
>   AddOutputFilterByType DEFLATE font/opentype
>   AddOutputFilterByType DEFLATE font/otf
>   AddOutputFilterByType DEFLATE font/ttf
>   AddOutputFilterByType DEFLATE image/svg+xml
>   AddOutputFilterByType DEFLATE image/x-icon
>   AddOutputFilterByType DEFLATE text/css
>   AddOutputFilterByType DEFLATE text/html
>   AddOutputFilterByType DEFLATE text/javascript
>   AddOutputFilterByType DEFLATE text/plain
> </IfModule>
> <IfModule mod_gzip.c>
>   mod_gzip_on Yes
>   mod_gzip_dechunk Yes
>   mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
>   mod_gzip_item_include handler ^cgi-script$
>   mod_gzip_item_include mime ^text/.*
>   mod_gzip_item_include mime ^application/x-javascript.*
>   mod_gzip_item_exclude mime ^image/.*
>   mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
> </IfModule>
> 
> # Leverage Browser Caching
> <IfModule mod_expires.c>
>   ExpiresActive On
>   ExpiresByType image/jpg "access 1 year"
>   ExpiresByType image/jpeg "access 1 year"
>   ExpiresByType image/gif "access 1 year"
>   ExpiresByType image/png "access 1 year"
>   ExpiresByType text/css "access 1 month"
>   ExpiresByType text/html "access 1 month"
>   ExpiresByType application/pdf "access 1 month"
>   ExpiresByType text/x-javascript "access 1 month"
>   ExpiresByType application/x-shockwave-flash "access 1 month"
>   ExpiresByType image/x-icon "access 1 year"
>   ExpiresDefault "access 1 month"
> </IfModule>
> <IfModule mod_headers.c>
>   <filesmatch "\.(ico|flv|jpg|jpeg|png|gif|css|swf)$">
>   Header set Cache-Control "max-age=2678400, public"
>   </filesmatch>
>   <filesmatch "\.(html|htm)$">
>   Header set Cache-Control "max-age=7200, private, must-revalidate"
>   </filesmatch>
>   <filesmatch "\.(pdf)$">
>   Header set Cache-Control "max-age=86400, public"
>   </filesmatch>
>   <filesmatch "\.(js)$">
>   Header set Cache-Control "max-age=2678400, private"
>   </filesmatch>
> </IfModule> 
> ```

还有一些针对各种 Web 服务器的配置，请参见[*此处*](https://github.com/hyipscript/server-configs)。
希望这将有助于获得 100/100 的分数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-27T08:20:32.960

关于上面 Matthew Johnson 的回答，因为它在我的 Laravel5.2 网站上对我不起作用但我在列表中添加了 'php' 并且它起作用了！！谢谢 Matthew Johnson

```
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|html|htm|xml|php|txt|xsl)$">
Header set Cache-Control "max-age=31536050"
</FilesMatch> 
```

# web-services - 部署调用另一个 Web 服务并使用 xml 签名的 Web 服务

> ID：13028994
> 
> 赞同：2
> 
> 时间：2012-10-23T11:01:05.673
> 
> 标签：web-services, jakarta-ee, weblogic, axis2, saaj

我的目标是制作一个使用 Soap (SAAJ) 调用另一个 Web 服务的 Web 服务。用户调用我的 Web 服务并发送我签名的 XML 文件（字符串），然后发送到目标 Web 服务。目标 Web 服务回复带有签名的 XML，我必须在我的 Web 服务中验证其签名，如果一切正常，则将该回复发送回我的用户。目标 Web 服务还要求我使用 HTTPS/单向 ssl 握手。

以下是我编写的代码，当我将其作为常规程序进行测试时，一切正常。之后，我做了一些细微的更改，并尝试使用 Eclipse 和本地 Tomcat 服务器将其作为 Web 服务进行测试，它也可以正常工作——我可以使用 WSDL 调用方法并得到预期的结果。这就是问题所在 - 我必须在独立的 Weblogic (10.3.6) 服务器上部署我的 Web 服务，但它不再工作了。我遵循了在 JDeveloper 中创建 Web 服务的教程，并将其部署到（集成和独立）服务器，但方法调用无法正常工作。我怀疑问题出在 Weblogic 安全性和它使用证书的方式上，我已将必须用于 ssl 握手的密钥库添加到 Weblogic 密钥库配置中，但它没有帮助。

```
@WebService
public class Test {

// Keystore containing multiple certificates I am using to sign xml which I send to target web service
private static final String KEY_STORE_TYPE = "JKS";
private static final String KEY_STORE_FILE = "C:\\Certificates\\mycert.jks";
private static final String KEY_STORE_PASS = "mypass";

// Keystore which I use to validate the signed message I receive from target web service
private static final String TARGET_KEY_STORE_TYPE = "JKS";
private static final String TARGET_KEY_STORE_FILE = "C:\\Certificates\\othercert.jks";
private static final String TARGET_KEY_STORE_PASS = "otherpass";
private static final String TARGET_KEY_ALIAS = "othercert";

// Keystore which I use for one way ssl handshake when connecting to target web service
private static final String TRUSTED_STORE_TYPE = "JKS";
private static final String TRUSTED_STORE_FILE = "C:\\Certificates\\truststore.jks";
private static final String TRUSTED_STORE_PASS = "trustpass";

// Target web service which I'm connecting to
private static final String SERVICE_URL = "https://service.i-am.using:1111/AnotherWebService";

// Attribute used in signing xml
private static final String ID = "testId";

// Method which user calls to sign and send his message to target web service which returns signed reply with data. Since there are multiple certificates (for multiple users) in keystore user must supply certificate alias and password
@WebMethod
public String getData(String user_message, String alias, String passwd) {
    String reply = "Unexpected error";
    SOAPMessage message = null;
    try {
        message = createSoapMessage(user_message);
        message = signMessage(message, alias, passwd);
        message = sendSoapMessage(message);
        Boolean value = false;
        value = verifyMessage(message);
        if (value == false) throw new Exception ("Message received from target web service is not correctly signed!");
        reply = stringFromSoap(message);
    } catch (Exception e) {
            reply = "Error! "+e.toString();
    }
    return reply;
}

// Method for testing whether target web service is available
@WebMethod
public String testResponse(){
    String reply = "Unexpected error";
    SOAPMessage response = null;
    try {
        response = createEchoMessage();
        // THIS CALL DOESN'T WORK WHEN EVEN WHEN I ADD KEYSTORE TO WEBLOGIC KEYSTORE CONFIGURATION
        response = sendSoapMessage(response);
        reply = stringFromSoap(response);
    } catch (Exception e) {
        reply = "Error! "+e.toString();
    }
    return reply;
}

// Method for creating Soap message used in testResponse method. Implementation is not important, here it is only as a signature.
private SOAPMessage createEchoMessage();

// Method for creating Soap message from string. Implementation is not important, here it is only as a signature.
private SOAPMessage createSoapMessage(String input_msg);

// Method for creating string from Soap message. Implementation is not important, here it is only as a signature.
private String stringFromSoap(SOAPMessage message);

// Method that sends Soap message to target server and receives reply
private SOAPMessage sendSoapMessage(SOAPMessage message) throws Exception {

    // Key used for one way ssl
    KeyStore keyStore = KeyStore.getInstance(TRUSTED_STORE_TYPE);
    keyStore.load(
        new FileInputStream(TRUSTED_STORE_FILE),  
        TRUSTED_STORE_PASS.toCharArray()
    );

    TrustManagerFactory tmf = TrustManagerFactory.getInstance("PKIX");
    tmf.init(keyStore);

    SSLContext sslctx = SSLContext.getInstance("SSL");
    sslctx.init(null, tmf.getTrustManagers(), null);

    HttpsURLConnection.setDefaultSSLSocketFactory(sslctx.getSocketFactory());

    SOAPConnectionFactory sfc = SOAPConnectionFactory.newInstance();
    SOAPConnection connection = sfc.createConnection();

    SOAPMessage response = null;

    try{
        URL endpoint =
                  new URL(new URL(SERVICE_URL),
                          "",
                          new URLStreamHandler() {
                            @Override
                            protected URLConnection openConnection(URL url) {
                                URLConnection dummy = null;
                                try{
                                    URL target = new URL(url.toString());
                                    URLConnection connection = target.openConnection();
                                    // Timeout settings
                                    connection.setConnectTimeout(1000); // 1 sec
                                    connection.setReadTimeout(5000); // 5 sec
                                    return(connection);
                                }
                                catch (Exception e){
                                    return dummy;
                                }
                            }
                          });
        response = connection.call(message, endpoint);
    }
    catch (Exception e){
        throw e;
    }
    connection.close();
    return response;
}

// Method for signing xml
@SuppressWarnings({ "unchecked", "rawtypes", "serial" })
private static SOAPMessage signMessage(SOAPMessage message, String alias, String passwd) throws Exception {

    // Read SOAP message
    SOAPMessage doc = message;
    SOAPPart soapPart = doc.getSOAPPart();

    // Find id for signing
    Node nodeToSign = null;
    Node sigParent = null;
    String referenceURI = null;
    XPathExpression expr = null; 
    NodeList nodes;
    List transforms = null;

    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();

    expr = xpath.compile(
            String.format("//*[@Id='%s']", ID)
        );
        nodes = (NodeList) expr.evaluate(soapPart, XPathConstants.NODESET);
        if (nodes.getLength() == 0) {
            throw new Exception("No node with id: " + ID);
        }

    nodeToSign = nodes.item(0);
    sigParent = nodeToSign;
    referenceURI = "#" + ID;

    // Prepare signature
    String providerName = System.getProperty(
            "jsr105Provider", 
            "org.jcp.xml.dsig.internal.dom.XMLDSigRI"
            );

    final XMLSignatureFactory sigFactory = XMLSignatureFactory.getInstance(
                        "DOM",
                        (Provider) Class.forName(providerName).newInstance()
                     );

    // Transformations used for signing
    transforms = new ArrayList<Transform>(){{
        add(sigFactory.newTransform(
                Transform.ENVELOPED, 
                (TransformParameterSpec) null )

        );
        add(sigFactory.newTransform(CanonicalizationMethod.EXCLUSIVE, (TransformParameterSpec) null
        )
        );
    }};

    // Get key for signing
    KeyStore keyStore = KeyStore.getInstance(KEY_STORE_TYPE);
    keyStore.load(
        new FileInputStream(KEY_STORE_FILE),  
        KEY_STORE_PASS.toCharArray()
    );

    PrivateKey privateKey = (PrivateKey) keyStore.getKey(
                    alias,
                    passwd.toCharArray()
                );

    X509Certificate cert = (X509Certificate) keyStore.getCertificate(alias);

    // Create a reference to enveloped document
    Reference ref = sigFactory.newReference(
            referenceURI,
            sigFactory.newDigestMethod(DigestMethod.SHA1, null),
            transforms,
            null, 
            null
            );

    // Create SignedInfo
    SignedInfo signedInfo = sigFactory.newSignedInfo(
                    sigFactory.newCanonicalizationMethod(
                    CanonicalizationMethod.EXCLUSIVE, 
                    (C14NMethodParameterSpec) null
                    ), 
                    sigFactory.newSignatureMethod(
                    SignatureMethod.RSA_SHA1, 
                    null
                    ),
                    Collections.singletonList(ref)
                );

    // Create KeyInfo
    KeyInfoFactory keyinfoFactory = sigFactory.getKeyInfoFactory(); 

    X509IssuerSerial issuer= keyinfoFactory.newX509IssuerSerial(cert.getIssuerX500Principal().getName(), cert.getSerialNumber());

    List x509Content = new ArrayList();
    x509Content.add(cert);
    x509Content.add(cert.getSubjectX500Principal().getName());
    x509Content.add(issuer);
    X509Data xd = keyinfoFactory.newX509Data(x509Content);
    KeyInfo keyInfo = keyinfoFactory.newKeyInfo(Collections.singletonList(xd));

    // Create DOMSignContext
    DOMSignContext dsc = new DOMSignContext(
                 privateKey, 
                 sigParent
                 );
            System.out.println(dsc.toString());

    // Create XMLSignature
    XMLSignature signature = sigFactory.newXMLSignature(signedInfo, keyInfo);

    // Generate and sign - THIS IS WHERE THE PROGRAM FAILS WHEN I CONVERT IT TO WEBLOGIC WEBSERVICE
    signature.sign(dsc);

    // Save changes on Soap message
    doc.saveChanges();

    return doc;
}

// Method used to verify message received from targer server
private Boolean verifyMessage(SOAPMessage message) throws Exception{

    Boolean verified = false;

    // Create xml from Soap message
    SOAPMessage msg = message;
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    msg.writeTo(out);

    XMLSignatureFactory fac = XMLSignatureFactory.getInstance("DOM");

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(true);
    Document doc = dbf.newDocumentBuilder().parse(new ByteArrayInputStream(out.toByteArray()));

    // Check whether Signature element exists in XML message
    NodeList nl = doc.getElementsByTagNameNS(XMLSignature.XMLNS,"Signature");
    if (nl.getLength() == 0) {
        throw new Exception("Signature element doesn't exist!");
    }

    // Get key which will be used for verification
    KeyStore keyStore = KeyStore.getInstance(TARGET_KEY_STORE_TYPE);
    keyStore.load(
        new FileInputStream(TARGET_KEY_STORE_FILE),  
        TARGET_KEY_STORE_PASS.toCharArray()
    );

    X509Certificate cert = (X509Certificate) keyStore.getCertificate(TARGET_KEY_ALIAS);
    PublicKey publicKey = cert.getPublicKey();

    // Create validation context and signature
    DOMValidateContext valContext = new DOMValidateContext(publicKey, nl.item(0));
    XMLSignature signature = fac.unmarshalXMLSignature(valContext);

    // Check whether the document is properly signed
    verified = signature.validate(valContext);

    return verified;
}
} 
```

这是我在调用 testResponse 方法时遇到的错误：

```
com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl:com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Message send failed 
```

在我将密钥库添加到 Weblogic 密钥库配置错误消息后更改为：

```
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
<S:Body>
    <S:Fault>
        <S:Code>
            <S:Value>S:Receiver</S:Value>
        </S:Code>
        <S:Reason>
            <S:Text xml:lang="en">502 HTTP Analyzer Bad Gateway Connection refused: connect</S:Text>
        </S:Reason>
        <S:Detail>
            <ns2:exception xmlns:ns2="http://jax-ws.dev.java.net/"
                class="java.net.ConnectException" note="An exception occured while connecting to https://localhost:7202/test/TestPort.">
                <message>Connection refused: connect</message>
                <ns2:stackTrace>
                    <ns2:frame class="java.net.PlainSocketImpl"
                        file="PlainSocketImpl.java" line="-2" method="socketConnect"/>
                    <ns2:frame class="java.net.PlainSocketImpl"
                        file="PlainSocketImpl.java" line="351" method="doConnect"/>
                    <ns2:frame class="java.net.PlainSocketImpl"
                        file="PlainSocketImpl.java" line="213" method="connectToAddress"/>
                    <ns2:frame class="java.net.PlainSocketImpl"
                        file="PlainSocketImpl.java" line="200" method="connect"/>
                    <ns2:frame class="java.net.SocksSocketImpl"
                        file="SocksSocketImpl.java" line="366" method="connect"/>
                    <ns2:frame class="java.net.Socket"
                        file="Socket.java" line="529" method="connect"/>
                    <ns2:frame class="java.net.Socket"
                        file="Socket.java" line="478" method="connect"/>
                    <ns2:frame class="java.net.Socket"
                        file="Socket.java" line="375" method="&lt;init>"/>
                    <ns2:frame class="java.net.Socket"
                        file="Socket.java" line="218" method="&lt;init>"/>
                    <ns2:frame
                        class="javax.net.DefaultSocketFactory"
                        file="SocketFactory.java" line="212" method="createSocket"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="3606" method="getSocket"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="4364" method="doConnect"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="3358" method="sendRequest"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="3281" method="handleRequest"/>
                    <ns2:frame class="HTTPClient.HTTPConnection$9"
                        file="HTTPConnection.java" line="3032" method="run"/>
                    <ns2:frame class="HTTPClient.HTTPConnection$9"
                        file="HTTPConnection.java" line="3023" method="run"/>
                    <ns2:frame
                        class="HTTPClient.HttpClientConfiguration"
                        file="HttpClientConfiguration.java"
                        line="666" method="doAction"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="5401" method="doAction"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="3023" method="setupRequest"/>
                    <ns2:frame class="HTTPClient.HTTPConnection"
                        file="HTTPConnection.java" line="1524" method="ExtensionMethod"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.config.NetworkAccessRule"
                        file="NetworkAccessRule.java" line="1403" method="getResponseDefault"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.config.NetworkAccessRule"
                        file="NetworkAccessRule.java" line="325" method="getResponse"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.config.PassThroughRule"
                        file="PassThroughRule.java" line="135" method="execute"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.config.Rule"
                        file="Rule.java" line="473" method="fire"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.ConnectionHandler"
                        file="ConnectionHandler.java" line="558" method="getResponse"/>
                    <ns2:frame
                        class="oracle.jdevimpl.webservices.tcpmonitor.ConnectionHandler"
                        file="ConnectionHandler.java" line="412" method="run"/>
                    <ns2:frame
                        class="java.util.concurrent.Executors$RunnableAdapter"
                        file="Executors.java" line="441" method="call"/>
                    <ns2:frame
                        class="java.util.concurrent.FutureTask$Sync"
                        file="FutureTask.java" line="303" method="innerRun"/>
                    <ns2:frame
                        class="java.util.concurrent.FutureTask"
                        file="FutureTask.java" line="138" method="run"/>
                    <ns2:frame
                        class="java.util.concurrent.ThreadPoolExecutor$Worker"
                        file="ThreadPoolExecutor.java" line="886" method="runTask"/>
                    <ns2:frame
                        class="java.util.concurrent.ThreadPoolExecutor$Worker"
                        file="ThreadPoolExecutor.java" line="908" method="run"/>
                    <ns2:frame class="java.lang.Thread"
                        file="Thread.java" line="662" method="run"/>
                </ns2:stackTrace>
            </ns2:exception>
        </S:Detail>
    </S:Fault>
</S:Body> 
```

调用 getData 方法时收到以下错误消息：

```
<S:Envelope>
<S:Body>
    <S:Fault>
        <faultcode>S:Server</faultcode>
        <faultstring>UNIMPLEMENTED</faultstring>
        <detail>
            <ns2:exception class="java.lang.AssertionError" note="To disable this feature, set com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system property to false">
                <message>UNIMPLEMENTED</message>
                <ns2:stackTrace>
                    <ns2:frame class="weblogic.xml.domimpl.DocumentImpl" file="DocumentImpl.java" line="407" method="getElementById" />
                    <ns2:frame class="com.sun.org.apache.xml.internal.security.utils.IdResolver" file="IdResolver.java" line="146" method="getElementByIdUsingDOM" />
                    <ns2:frame class="com.sun.org.apache.xml.internal.security.utils.IdResolver" file="IdResolver.java" line="113" method="getElementById" />
                    <ns2:frame class="com.sun.org.apache.xml.internal.security.utils.resolver.implementations.ResolverFragment" file="ResolverFragment.java" line="92" method="engineResolve" />
                    <ns2:frame class="com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolver" file="ResourceResolver.java" line="263" method="resolve" />
                    <ns2:frame class="org.jcp.xml.dsig.internal.dom.DOMURIDereferencer" file="DOMURIDereferencer.java" line="95" method="dereference" />
                    <ns2:frame class="org.jcp.xml.dsig.internal.dom.DOMReference" file="DOMReference.java" line="370" method="dereference" />
                    <ns2:frame class="org.jcp.xml.dsig.internal.dom.DOMReference" file="DOMReference.java" line="304" method="digest" />
                    <ns2:frame class="org.jcp.xml.dsig.internal.dom.DOMXMLSignature" file="DOMXMLSignature.java" line="470" method="digestReference" />
                    <ns2:frame class="org.jcp.xml.dsig.internal.dom.DOMXMLSignature" file="DOMXMLSignature.java" line="366" method="sign" />
                    <ns2:frame class="test.WebServis" file="WebServis.java" line="391" method="signMessage" />
                    <ns2:frame class="test.WebServis" file="WebServis.java" line="117" method="getJIR" />
                    <ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="native" method="invoke0" />
                    <ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="57" method="invoke" />
                    <ns2:frame class="sun.reflect.DelegatingMethodAccessorImpl" file="DelegatingMethodAccessorImpl.java" line="43" method="invoke" />
                    <ns2:frame class="java.lang.reflect.Method" file="Method.java" line="601" method="invoke" />
                    <ns2:frame class="weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker" file="WLSInstanceResolver.java" line="92" method="invoke" />
                    <ns2:frame class="weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker" file="WLSInstanceResolver.java" line="74" method="invoke" />
                    <ns2:frame class="com.sun.xml.ws.server.InvokerTube$2" file="InvokerTube.java" line="151" method="invoke" />
                    <ns2:frame class="com.sun.xml.ws.server.sei.EndpointMethodHandlerImpl" file="EndpointMethodHandlerImpl.java" line="268" method="invoke" />
                    <ns2:frame class="com.sun.xml.ws.server.sei.SEIInvokerTube" file="SEIInvokerTube.java" line="100" method="processRequest" />
                    <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="866" method="__doRun" />
                    <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="815" method="_doRun" />
                    <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="778" method="doRun" />
                    <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="680" method="runSync" />
                    <ns2:frame class="com.sun.xml.ws.server.WSEndpointImpl$2" file="WSEndpointImpl.java" line="403" method="process" />
                    <ns2:frame class="com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit" file="HttpAdapter.java" line="539" method="handle" />
                    <ns2:frame class="com.sun.xml.ws.transport.http.HttpAdapter" file="HttpAdapter.java" line="253" method="handle" />
                    <ns2:frame class="com.sun.xml.ws.transport.http.servlet.ServletAdapter" file="ServletAdapter.java" line="140" method="handle" />
                    <ns2:frame class="weblogic.wsee.jaxws.WLSServletAdapter" file="WLSServletAdapter.java" line="171" method="handle" />
                    <ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter$AuthorizedInvoke" file="HttpServletAdapter.java" line="708" method="run" />
                    <ns2:frame class="weblogic.security.acl.internal.AuthenticatedSubject" file="AuthenticatedSubject.java" line="363" method="doAs" />
                    <ns2:frame class="weblogic.security.service.SecurityManager" file="SecurityManager.java" line="146" method="runAs" />
                    <ns2:frame class="weblogic.wsee.util.ServerSecurityHelper" file="ServerSecurityHelper.java" line="103" method="authenticatedInvoke" />
                    <ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter$3" file="HttpServletAdapter.java" line="311" method="run" />
                    <ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter" file="HttpServletAdapter.java" line="336" method="post" />
                    <ns2:frame class="weblogic.wsee.jaxws.JAXWSServlet" file="JAXWSServlet.java" line="99" method="doRequest" />
                    <ns2:frame class="weblogic.servlet.http.AbstractAsyncServlet" file="AbstractAsyncServlet.java" line="99" method="service" />
                    <ns2:frame class="javax.servlet.http.HttpServlet" file="HttpServlet.java" line="820" method="service" />
                    <ns2:frame class="weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction" file="StubSecurityHelper.java" line="227" method="run" />
                    <ns2:frame class="weblogic.servlet.internal.StubSecurityHelper" file="StubSecurityHelper.java" line="125" method="invokeServlet" />
                    <ns2:frame class="weblogic.servlet.internal.ServletStubImpl" file="ServletStubImpl.java" line="301" method="execute" />
                    <ns2:frame class="weblogic.servlet.internal.TailFilter" file="TailFilter.java" line="26" method="doFilter" />
                    <ns2:frame class="weblogic.servlet.internal.FilterChainImpl" file="FilterChainImpl.java" line="56" method="doFilter" />
                    <ns2:frame class="oracle.security.jps.ee.http.JpsAbsFilter$1" file="JpsAbsFilter.java" line="119" method="run" />
                    <ns2:frame class="java.security.AccessController" file="AccessController.java" line="native" method="doPrivileged" />
                    <ns2:frame class="oracle.security.jps.util.JpsSubject" file="JpsSubject.java" line="315" method="doAsPrivileged" />
                    <ns2:frame class="oracle.security.jps.ee.util.JpsPlatformUtil" file="JpsPlatformUtil.java" line="442" method="runJaasMode" />
                    <ns2:frame class="oracle.security.jps.ee.http.JpsAbsFilter" file="JpsAbsFilter.java" line="103" method="runJaasMode" />
                    <ns2:frame class="oracle.security.jps.ee.http.JpsAbsFilter" file="JpsAbsFilter.java" line="171" method="doFilter" />
                    <ns2:frame class="oracle.security.jps.ee.http.JpsFilter" file="JpsFilter.java" line="71" method="doFilter" />
                    <ns2:frame class="weblogic.servlet.internal.FilterChainImpl" file="FilterChainImpl.java" line="56" method="doFilter" />
                    <ns2:frame class="oracle.dms.servlet.DMSServletFilter" file="DMSServletFilter.java" line="139" method="doFilter" />
                    <ns2:frame class="weblogic.servlet.internal.FilterChainImpl" file="FilterChainImpl.java" line="56" method="doFilter" />
                    <ns2:frame class="weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction" file="WebAppServletContext.java" line="3730" method="wrapRun" />
                    <ns2:frame class="weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction" file="WebAppServletContext.java" line="3696" method="run" />
                    <ns2:frame class="weblogic.security.acl.internal.AuthenticatedSubject" file="AuthenticatedSubject.java" line="321" method="doAs" />
                    <ns2:frame class="weblogic.security.service.SecurityManager" file="SecurityManager.java" line="120" method="runAs" />
                    <ns2:frame class="weblogic.servlet.internal.WebAppServletContext" file="WebAppServletContext.java" line="2273" method="securedExecute" />
                    <ns2:frame class="weblogic.servlet.internal.WebAppServletContext" file="WebAppServletContext.java" line="2179" method="execute" />
                    <ns2:frame class="weblogic.servlet.internal.ServletRequestImpl" file="ServletRequestImpl.java" line="1490" method="run" />
                    <ns2:frame class="weblogic.work.ExecuteThread" file="ExecuteThread.java" line="256" method="execute" />
                    <ns2:frame class="weblogic.work.ExecuteThread" file="ExecuteThread.java" line="221" method="run" />
                </ns2:stackTrace>
            </ns2:exception>
        </detail>
    </S:Fault>
</S:Body> 
```

我已经阅读了一些有关 Web 服务和安全性的 Weblogic 文档，但似乎我看不到树木的木材。如果有人能给我一些指示，我将不胜感激。另外，作为最后的手段，如果我使用 Axis2 重写代码会有帮助吗？这样的 Web 服务能否成功部署到 Weblogic？

# python - 我可以在 GAE 上不断运行一些东西吗？

> ID：13028996
> 
> 赞同：0
> 
> 时间：2012-10-23T11:01:15.867
> 
> 标签：python, google-app-engine, google-cloud-datastore, trie

我需要检查是否存在某些单词（或单词前缀），最好的方法是构建一个 Trie，但这在 GAE 上并不容易，它应该留在内存中（或者我每次查找时都必须构建它一些字符串），我不知道如何在 GAE 上实现它。

理想的结果是，在应用程序启动时构建一个 Trie，并在应用程序运行时保留它。

我尝试将所有单词和前缀存储在大表中，但性能不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:27:03.157

您可能会考虑使用后端来保存数据。

> 后端是特殊的 App Engine 实例，它们没有请求期限、更高的内存和 CPU 限制以及跨请求的持久状态。它们由 App Engine 自动启动，可以长时间连续运行。每个后端实例都有一个用于请求的唯一 URL，您可以跨多个实例对请求进行负载平衡。
> 
> 后端可以处理来自用户或应用程序其他部分的 HTTP 请求，在后台连续启动和运行，或者由任务队列任务或 Cron 作业驱动。 [https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:12:43.383

您可以使用实例内存来保存 trie 并使用 Python 对象构建它。

请参阅这篇文章： http: [//blog.notdot.net/2010/11/Storage-options-on-App-Engine](http://blog.notdot.net/2010/11/Storage-options-on-App-Engine)以及存储 trie 的其他选项。

# ruby-on-rails - Rails 引擎是否支持 i18n

> ID：13028998
> 
> 赞同：1
> 
> 时间：2012-10-23T11:01:20.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, i18n-gem, rails-i18n

我想做的是在我的引擎中有一个翻译文件。我已将文件放入

> 配置
> 
> ```
>  \locales
> 
>      \fr.yml 
> ```

现在我正在为字符串 hello 编写翻译

fr: "Hello":"Bonjour" 但我收到翻译错误。当我在我的应用程序翻译文件中使用同一行时，它可以工作。

我只想知道引擎中的翻译文件是否有效？如果是的话，你能告诉我正在做的错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:38:19.050

最后我找到了，在引擎中使用 gem i18n。

谢谢