# StackOverflow 问答 15353000-15353999

# wireshark - 将wireshark移植到基于qnx的系统

> ID：15353000
> 
> 赞同：-1
> 
> 时间：2013-03-12T03:53:02.620
> 
> 标签：wireshark, libpcap, cisco-ios

我是行业新手，作为实习的一部分，我被分配了上述项目。我没有如何将特定应用程序移植到不同操作系统的经验。

到目前为止，我已经尝试了解组件的基本结构（即应用程序称为 IOS-XR），但据我所知，移植 wireshark 还需要将 libpcap 库移植到 XR。

有人可以说明我应该如何接近它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:29:36.860

我对 QNX 一无所知；

但是，我会注意到 Wireshark 对各种库有很多依赖：

一些例子;

```
libgLib
libgtk
libffi-5
libfontconfig-1
libfreetype-6
libintl-8
libjasper-1
libjpeg-8
liblzma-5
libpixman-1-0
libpng15-15
libtiff-5
libxml2-2
... 
```

QNX 上是否提供这些库？

关于 libpcap：

捕获文件需要 libpcap。如果不可用，它肯定需要移植。我可以想象这可能是一个很大的努力，因为大概代码可能非常依赖于确切的操作系统功能来访问网络级数据。

有关开发 Wireshark（在 Windows 和 *nix 上）的信息，请参阅 [Wireshark 开发人员指南](https://www.wireshark.org/docs/wsdg_html_chunked/)。

# c# - 有没有办法自动启动和搜索 Windows 8 中的默认视频应用程序？

> ID：15353003
> 
> 赞同：2
> 
> 时间：2013-03-12T03:53:28.963
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

Windows 8 应用商店应用可以注册它们可以处理的协议类型。这对于可以处理 Web URL (Http...) 或电子邮件应用程序 (mailto:...) 等的应用程序非常有用。

许多应用程序还指定了它们的特殊协议。例如，Windows 商店处理“ms-windows-store”，例如，您可以启动应用程序并使用

ms-windows-store:Search?query=hello

我的问题是是否有人知道 msft 视频应用程序使用的格式。它的激活协议是“microsoftvideo：”，但我无法弄清楚它需要什么（如果有的话）输入格式。例如，以下内容不起作用。

microsoftvideo:搜索?查询=你好

作为第二个问题，有人知道其他流行应用程序可用的格式吗？我可以使用“netflix:”启动 Netflix，但无法确定是否也可以立即搜索。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:41:49.327

首先，请阅读 StackOverflow 类似的问题：[link](https://stackoverflow.com/a/13332190/361100)。

无需注册任何名称，Package Family Name 可用于执行另一个应用程序。请阅读[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh974767.aspx)。

而且，关于称为 URI 方案的命名协议，请阅读此[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779670%28v=win.10%29.aspx)。

而且，关于`?query=`，我认为您可能不打算使用 Search Contract。在这种情况下，您可能不知道除非他们（另一个应用程序的开发人员）打开了该信息，因为它是由自己定义的。

# elasticsearch - 弹性搜索方面或过滤器

> ID：15353005
> 
> 赞同：1
> 
> 时间：2013-03-12T03:53:41.060
> 
> 标签：elasticsearch

我的 elasticsearch DSL 有一个问题，在使用分面导航时，当我应用我的分面过滤器时，下一组结果不包含任何其他分面，即使我已经要求它们。

当我进行初始搜索时，我得到了我想要的结果：

```
{
"sort": {
    "_score": {},
    "salesQuantity": {
        "order": "asc"
    }
},
"query": {
    "filtered": {
        "query": {
            "match": {
                "categoryTree": "D01"
            }
        },
        "filter": {
            "term": {
                "publicwebEnabled": true,
                "parentID": 0
            }
        }
    }
},
"facets": {
    "delivery_locations": {
        "terms": {
            "field": "delivery_locations",
            "all_terms": true
        }
    },
    "categories": {
        "terms": {
            "field": "categoryTree",
            "all_terms": true
        }
    },
    "collectable": {
        "terms": {
            "field": "collectable",
            "all_terms": true
        }
    }
},
"from": 0,
"size": 12} 
```

然后当我像这样应用过滤器时，我得到的结果不包括方面：

```
{
"sort": {
    "_score": {},
    "salesQuantity": {
        "order": "asc"
    }
},
"query": {
    "filtered": {
        "query": {
            "match": {
                "categoryTree": "D01"
            }
        },
        "filter": {
            "term": {
                "publicwebEnabled": true,
                "parentID": 0
            },
            "or": [
                {
                    "range": {
                        "Retail_Price": {
                            "to": "49.99",
                            "from": "0"
                        }
                    }
                }
            ]
        }
    }
},
"facets": {
    "delivery_locations": {
        "terms": {
            "field": "delivery_locations",
            "all_terms": true
        }
    },
    "categories": {
        "terms": {
            "field": "categoryTree",
            "all_terms": true
        }
    },
    "collectable": {
        "terms": {
            "field": "collectable",
            "all_terms": true
        }
    }
},
"from": 0,
"size": 12} 
```

**注意**，我在上面添加了 OR 过滤器 - 因为用户可以选择多个价格范围进行过滤。

难道我做错了什么？

我希望返回新的方面，因为改变价格显然会改变其他方面的方面数量......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:41:59.590

在 or 过滤器中添加原始术语过滤器，或添加另一个布尔过滤器以将整个过滤器包装在布尔表达式中。我不认为你可以像这样用逗号分隔它们来添加这两个过滤器。

# c - C程序返回数组

> ID：15353016
> 
> 赞同：1
> 
> 时间：2013-03-12T03:54:57.507
> 
> 标签：c

我正在开发一个非常基本的程序，我想将一个长度为 2 的整数数组返回到我的主块。我无法让它工作，我被告知我可能需要指针来做这件事。指针是如何工作的，我如何在我的程序中使用它？这是我当前的代码：

```
int[] return2();

int main() {

  int a[2];

  a = request();
  printf("%d%d\n", a[0], a[1]);

  return(0);
}

int[] request ()
{
  int a[2];

  a[0] = -1;
  a[1] = 8;

  return a;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T04:05:32.653

*   您不能声明返回数组的函数。

    > ### ISO/IEC 9899:1999
    > 
    > ### §6.9.1 函数定义
    > 
    > ¶3函数的返回类型应为`void`数组类型以外的对象类型。

    C2011 基本上会说同样的话。

*   您永远不应该从函数返回指向（非静态）局部变量的指针，因为一旦返回完成，它就不再在范围内（因此无效）。

如果数组是静态分配的，或者如果它是通过`malloc()`et al 动态分配的，则可以返回指向数组开头的指针。

```
int *function1(void)
{
    static int a[2] = { -1, +1 };
    return a;
}

static int b[2] = { -1, +1 };

int *function2(void)
{
    return b;
}

/* The caller must free the pointer returned by function3() */
int *function3(void)
{
    int *c = malloc(2 * sizeof(*c));
    c[0] = -1;
    c[1] = +1;
    return c;
} 
```

或者，如果您喜欢冒险，您可以返回一个指向数组的指针：

```
/* The caller must free the pointer returned by function4() */
int (*function4(void))[2]
{
    int (*d)[2] = malloc(sizeof(*d));
    (*d)[0] = -1;
    (*d)[1] = +1;
    return d;
} 
```

小心那个函数声明！完全改变其含义并不需要太多改变：

```
int (*function4(void))[2]; // Function returning pointer to array of two int
int (*function5[2])(void); // Array of two pointers to functions returning int
int (*function6(void)[2]); // Illegal: function returning array of two pointers to int
int  *function7(void)[2];  // Illegal: function returning array of two pointers to int 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T04:09:57.640

`pointer to array of 2 integers`你必须从函数中返回。＃包括

```
int(* request()) [2]
{
static int a[2];
a[0] = -1;
a[1] = 8;
return &a;
}

int main() {
int (*a) [2];
a = request();
printf("%d%d\n", *(*a+0), *(*a+1));
return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T04:05:04.570

您最好了解指针是如何工作的。这是一个（坏的）解决方案：

```
#include <stdio.h>

int* request(){
    int a[2];
    a[0] = -1;
    a[1] = 8;
    return a;
}

int main() {
    int* a;
    a = request();
    printf("%d%d\n", a[0], a[1]);
    return 0;
} 
```

但有一个问题。因为`int a[2];`in`int* request()`是一个局部变量，所以不能保证返回的值不会被覆盖。这是一个更好的解决方案：

```
#include <stdio.h>

void request(int* a){
    a[0] = -1;
    a[1] = 8;
}

int main() {
    int a[2];
    request(a);
    printf("%d %d\n", a[0], a[1]);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T04:08:15.790

`int a[2]`您在其中声明的数组`request`仅在该函数的范围内有效，因此像那样返回它是行不通的，因为一旦`main`得到它，数组就不再有效。

如果您不理解指针，您将不得不真正了解正在发生的事情，但这里有一些代码可以满足您的需求：

```
int* request();

int main() {

  int* a;  // a is a pointer to an int

  a = request();
  printf("%d%d\n", a[0], a[1]);

  // we have to tell the program that we're done with the array now
  free(a);

  return(0);
}

int* request ()
{
  // allocate space for 2 ints -- this space will survive after the function returns
  int* a = malloc(sizeof(int) * 2);/

  a[0] = -1;
  a[1] = 8;

  return a;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T07:00:34.863

您可以按照其他人的建议进行操作，并通过 malloc 分配内存以返回指针。您还应该考虑以下内容：

```
struct values {
    int val1;
    int val2;
};

struct values request();

int main() {

  struct values a;

  a = request();
  printf("%d%d\n", a.val1, a.val2);

  return(0);
}

struct values request ()
{
  struct values vals;

  vals.val1 = -1;
  vals.val2 = 8;

  return vals;
} 
```

结构是按值传递和返回的（意味着它们被复制），有时可能更容易和更安全，具体取决于结构中包含的数据类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T04:05:30.680

要返回数组，您必须动态分配它。

试试这个（观察变化）：

```
int* request();

int main() {    
  int *a;    
  a = (int *)request();
  printf("%d %d\n", a[0], a[1]);        
  return(0);
}

int* request() {
  int *a = malloc(sizeof(int) * 2);    
  a[0] = -1;
  a[1] = 8;    
  return a;
} 
```

# c - 对用户输入设置时间限制

> ID：15353018
> 
> 赞同：3
> 
> 时间：2013-03-12T03:55:01.030
> 
> 标签：c, input

我正在尝试对用户输入设置时间限制，因此如果输入输入的时间超过 2 秒，则程序将终止。我想知道在 C 语言中是否有一种简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:04:54.480

您可以通过信号处理来实现这一点，您必须在代码中处理 SIGALARM 信号。

```
void AlrmSigHnd(int signo)
{
exit(0);
}
int main()
{
void(*SigHnd)(int);
SigHnd = AlrSigHnd;

signal(SIGALRM,SigHnd);
alarm(2); // AlrmSigHnd will called after 2 seconds.
scanf("%d",&i);  
alarm(0); // Cancel signal registration
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:38:16.577

您可以使用 select 超时，检查标准输入。因此，如果 select 返回一个空的 fd 集，您就知道超时已过期，如果它返回带有 stdin 的集，那么您再次循环并继续读取您的输入。

不幸的是，这种方法不能让您轻松地直接读取一个 int，但它可以在不使用信号处理程序的情况下工作。

# ios - 单元格背景视图未填充整个单元格

> ID：15353020
> 
> 赞同：1
> 
> 时间：2013-03-12T03:55:09.470
> 
> 标签：ios, uitableview

我使用单独`UITableViewCell`的`UITableView`，当我设置此单元格的背景视图时，它似乎将图像填充在一个框中而不是整个单元格中。单独`UITableViewCell`和`UITableView's`行的尺寸都是`280x44`。这是它的样子： ![在此处输入图像描述](../Images/94dc469fc80a3fe4d31e1d896e789479.png)

这是我为设置单元格的背景视图而编写的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
// ...

    PBDashboardSummarizedCell *cell = (PBDashboardSummarizedCell *)[tableView dequeueReusableCellWithIdentifier:@"PBDashboardSummarizedCell"];
    if (!cell) {
        cell = [PBDashboardSummarizedCell standardCell];
    }
     if(datapickup.isexpanded==YES)
          {
           UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 280, 44)];
              av.opaque = NO;
              av.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"dashboardCellEffect.png"]];
              cell.backgroundView = av;          //tried this
             // [cell setBackgroundView:av];     //and this also... but still image is set in the box and not the whole cell
          }
          else{
              UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 280, 44)];
              av.backgroundColor = [UIColor clearColor];
              av.opaque = NO;
              cell.backgroundView = av;

        }

          return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:17:11.343

试试这个代码。它对我有用。

```
UIImageView * ac= [[UIImageView alloc] init];
ac.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]];
cell.backgroundView =ac;
cell.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:01:01.893

试试这个？

```
UIImage *backgroundImage = [UIImage imageNamed:@"dashboardCellEffect.png"];
UIView *backgroundCellView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 280, 44)];
// redraw the image to fit cell's size
UIGraphicsBeginImageContextWithOptions(backgroundCellView.frame.size, NO, 0.f);
[backgroundImage drawInRect:CGRectMake(0.f, 0.f, backgroundCellView.frame.size.width, backgroundCellView.frame.size.height)];
UIImage *refinedImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();

[backgroundCellView setBackgroundColor:[UIColor colorWithPatternImage:refinedImage]];
cell.backgroundView = backgroundCellView; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:10:55.723

您正在使用 imageview，因此它仅在 imageview 而不是整个单元格中显示颜色

你可以试试下面的方法

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(datapickup.isexpanded==YES)
    {
        cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"dashboardCellEffect.png"]];
    }
    else {
         cell.backgroundColor = [UIColor clearColor];
    }
} 
```

上面的代码你的问题将解决。

# vim - 编辑同一个文件时，是否可以在拆分窗口 vim 中有单独的可视模式？

> ID：15353021
> 
> 赞同：5
> 
> 时间：2013-03-12T03:55:14.863
> 
> 标签：vim

当我在 vim 中打开一个文件`Foo.txt`，然后使用`:vsplit`以便我可以并排检查它的不同部分时，我注意到如果我在左侧进行任何类型的视觉选择，vim 将在右侧选择相同的文本. 此外，如果在我开始视觉选择时两侧没有对齐，那么无论我切换到哪一侧，都会跳转到与选择的那一侧相匹配。

我希望能够使用可视模式突出显示拆分窗口两侧的不同文本段，或者至少能够在左侧使用可视模式，然后将光标向右移动。如果这两个文件实际上是不同的文件，这将非常有效。

是否有一些选项可以启用此功能，或者是制作文件副本的唯一方法？

编辑：我正在扩大这个问题的范围以包括任何基于 vimscript 的解决方案，因为它似乎不是一个可以设置的选项。如果有人有一个很好的技巧来获得这种行为，请分享。与此同时，我还将研究 autocmd，尽管它很可能超出了我目前对 vimscript 的了解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T07:35:56.933

> 就好像 vim 在看到两个相同的文件时试图变得聪明，而这种聪明应该是可以禁用的。

这种“聪明”是视觉选择（准确地说是`'<,'>`标记）*在缓冲区本地*的实现细节。正如您所观察到的，不同的缓冲区可以有（并记住）不同的选择。

另一种方法是使视觉选择窗口本地化。我想没有选择这种方法是因为通常不能将确切的选择范围转移到另一个缓冲区；线的数量和长度是不同的。

也就是说，您可能可以使用`:autocmd`s 来实现您想要的，将`'<,'>`标记保存在窗口局部变量 on`WinLeave`并从那些 on 恢复`WinEnter`。

# c# - c# .net 3.5 中的多线程异步 Web 服务调用

> ID：15353022
> 
> 赞同：2
> 
> 时间：2013-03-12T03:55:15.503
> 
> 标签：c#, .net, web-services, asynchronous

我有 2 个 ASP.net 3.5 asmx Web 服务**ws2**和**ws3**。它们分别包含操作**op21**和**op31**。op21 休眠**2 秒**， op31 休眠**3 秒**。我想从web 服务**ws1中的****op11**异步调用 op21 和 op31 。这样当我从客户端同步调用**op11**时，所花费的时间将是**3 秒**，这是总时间。我目前使用此代码获得**5 秒：**

```
WS2SoapClient ws2 = new WS2SoapClient();
WS3SoapClient ws3 = new WS3SoapClient();

//capture time
DateTime now = DateTime.Now;            
//make calls

IAsyncResult result1 = ws3.BeginOP31(null,null);
IAsyncResult result2 = ws2.BeginOP21(null,null);
WaitHandle[] handles = { result1.AsyncWaitHandle, result2.AsyncWaitHandle };

WaitHandle.WaitAll(handles);

//calculate time difference
TimeSpan ts = DateTime.Now.Subtract(now);
return "Asynchronous Execution Time (h:m:s:ms): " + String.Format("{0}:{1}:{2}:{3}",
ts.Hours,
ts.Minutes,
ts.Seconds,
ts.Milliseconds); 
```

预期的结果是两个请求的总时间应该等于执行较慢请求所需的时间。

请注意，当我使用 Visual Studio 调试它时，它按预期工作，但是在 IIS 上运行它时，时间为 5 秒，这似乎表明请求没有同时处理。

我的问题是，是否有可能需要正确设置 IIS 和 ASMX Web 服务的特定配置才能按预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:03:45.707

**原答案：**

我在 google.com 和 bing.com 上试过这个，得到了同样的东西，线性执行。问题是您正在同一个线程上启动 BeginOP() 调用，并且在调用完成之前不会返回 AsyncResult （无论出于何种原因）。有点没用。

我的 TPL 前多线程有点生疏，但我在这个答案的结尾测试了代码，它异步执行：这是一个 .net 3.5 控制台应用程序。请注意，我显然阻碍了您的一些代码，但使类看起来相同。

* * *

**更新：**

我开始怀疑自己，因为我的执行时间非常接近，令人困惑。因此，我稍微重新编写了测试，以包含您的原始代码和我使用 Thread.Start() 建议的代码。此外，我在 WebRequest 方法中添加了 Thread.Sleep(N) ，这样它就可以模拟不同的请求执行时间。

测试结果确实表明您发布的代码是按我在原始答案中所述的顺序执行的。

![试验结果](../Images/f1cc36b431eb2a889bddb586c1fbeccc.png)

请注意，由于 Thread.Sleep()，两种情况下的总时间都比实际 Web 请求时间长得多。我还添加了 Thread.Sleep() 以抵消对任何站点的第一个 Web 请求需要很长时间才能启动（9 秒）这一事实，如上所示。无论采用哪种方式，很明显，在“旧”案例中时间是连续的，而在新案例中是真正的“异步”。

* * *

**用于测试的更新程序：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading;

namespace MultiThreadedTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // Test both ways of executing IAsyncResult web calls

            ExecuteUsingWaitHandles();
            Console.WriteLine();

            ExecuteUsingThreadStart();
            Console.ReadKey();
        }

        private static void ExecuteUsingWaitHandles()
        {
            Console.WriteLine("Starting to execute using wait handles (old way) ");

            WS2SoapClient ws2 = new WS2SoapClient();
            WS3SoapClient ws3 = new WS3SoapClient();

            IAsyncResult result1 = null;
            IAsyncResult result2 = null;

            // Time the threadas
            var stopWatchBoth = System.Diagnostics.Stopwatch.StartNew();
            result1 = ws3.BeginOP31();
            result2 = ws2.BeginOP21();

            WaitHandle[] handles = { result1.AsyncWaitHandle, result2.AsyncWaitHandle };
            WaitHandle.WaitAll(handles);

            stopWatchBoth.Stop();

            // Display execution time of individual calls
            Console.WriteLine((result1.AsyncState as StateObject));
            Console.WriteLine((result2.AsyncState as StateObject));

            // Display time for both calls together
            Console.WriteLine("Asynchronous Execution Time for both is {0}", stopWatchBoth.Elapsed.TotalSeconds);
        }

        private static void ExecuteUsingThreadStart()
        {
            Console.WriteLine("Starting to execute using thread start (new way) ");

            WS2SoapClient ws2 = new WS2SoapClient();
            WS3SoapClient ws3 = new WS3SoapClient();

            IAsyncResult result1 = null;
            IAsyncResult result2 = null;

            // Create threads to execute the methods asynchronously
            Thread startOp3 = new Thread( () => result1 = ws3.BeginOP31() );
            Thread startOp2 = new Thread( () => result2 = ws2.BeginOP21() );

            // Time the threadas
            var stopWatchBoth = System.Diagnostics.Stopwatch.StartNew();

            // Start the threads
            startOp2.Start();
            startOp3.Start();

            // Make this thread wait until both of those threads are complete
            startOp2.Join();
            startOp3.Join();

            stopWatchBoth.Stop();

            // Display execution time of individual calls
            Console.WriteLine((result1.AsyncState as StateObject));
            Console.WriteLine((result2.AsyncState as StateObject));

            // Display time for both calls together
            Console.WriteLine("Asynchronous Execution Time for both is {0}", stopWatchBoth.Elapsed.TotalSeconds);
        }
    }

    // Class representing your WS2 client
    internal class WS2SoapClient : TestWebRequestAsyncBase
    {
        public WS2SoapClient() : base("http://www.msn.com/") { }

        public IAsyncResult BeginOP21()
        {
            Thread.Sleep(TimeSpan.FromSeconds(10D));
            return BeginWebRequest();
        }
    }

    // Class representing your WS3 client
    internal class WS3SoapClient : TestWebRequestAsyncBase
    {
        public WS3SoapClient() : base("http://www.google.com/") { }

        public IAsyncResult BeginOP31()
        {
            // Added sleep here to simulate a much longer request, which should make it obvious if the times are overlapping or sequential
            Thread.Sleep(TimeSpan.FromSeconds(20D)); 
            return BeginWebRequest();
        }
    }

    // Base class that makes the web request
    internal abstract class TestWebRequestAsyncBase
    {
        public StateObject AsyncStateObject;
        protected string UriToCall;

        public TestWebRequestAsyncBase(string uri)
        {
            AsyncStateObject = new StateObject()
            {
                UriToCall = uri
            };

            this.UriToCall = uri;
        }

        protected IAsyncResult BeginWebRequest()
        {
            WebRequest request =
               WebRequest.Create(this.UriToCall);

            AsyncCallback callBack = new AsyncCallback(onCompleted);

            AsyncStateObject.WebRequest = request;
            AsyncStateObject.Stopwatch = System.Diagnostics.Stopwatch.StartNew();

            return request.BeginGetResponse(callBack, AsyncStateObject);
        }

        void onCompleted(IAsyncResult result)
        {
            this.AsyncStateObject = (StateObject)result.AsyncState;
            this.AsyncStateObject.Stopwatch.Stop();

            var webResponse = this.AsyncStateObject.WebRequest.EndGetResponse(result);
            Console.WriteLine(webResponse.ContentType, webResponse.ResponseUri);
        }
    }

    // Keep stopwatch on state object for illustration of individual execution time
    internal class StateObject
    {
        public System.Diagnostics.Stopwatch Stopwatch { get; set; }
        public WebRequest WebRequest { get; set; }
        public string UriToCall;

        public override string ToString()
        {
            return string.Format("Request to {0} executed in {1} seconds", this.UriToCall, Stopwatch.Elapsed.TotalSeconds);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:00:09.743

您的系统中存在一些限制。可能该服务仅为一个并发调用者配置，这是一个常见原因（WCF ConcurrencyMode）。服务器上可能存在 HTTP 级别的连接限制 (ServicePointManager.DefaultConnectionLimit) 或 WCF 限制。

使用 Fiddler 确定两个请求是否同时发送。使用调试器中断服务器并查看两个调用是否同时运行。

# gdb - 从 IDA pro 导出符号以在 GDB 中使用

> ID：15353023
> 
> 赞同：3
> 
> 时间：2013-03-12T03:55:16.973
> 
> 标签：gdb, mach-o, ida

我有一个在 IDA pro 中反汇编的 dylib 文件 a2.dylib，它去掉了符号。我使用了带有符号的 a1.dylib，尽管旧版本的 a2.dylib 带有 Bindiff 来区分函数名称以匹配 a2.dylib。我需要导出这些派生函数名称以用于调试 GDB 中的 a2.dylib；类似于在 GDB 中使用的 Windows PDB 文件。我怎么能在 IDA pro 6.4 中做呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T23:24:16.933

[您可以使用SymTabCreator](https://github.com/karstenBriksoft/SymTabCreator)轻松创建符号表。您所需要的只是一个地址 ↔ 符号映射列表。

请注意，自述文件说它仅适用于主要可执行文件，因此您可能需要调整 dylib 的[imageBase](https://github.com/karstenBriksoft/SymTabCreator/blob/281b1687d7bfbad6e01b1dc211cd4ad398a65e47/SymTabCreator.m#L91)偏移量。

# regex - 使用 Perl 进行模式匹配

> ID：15353024
> 
> 赞同：1
> 
> 时间：2013-03-12T03:55:19.173
> 
> 标签：regex, perl

我的输入文件中有一个字典单词列表，并且我正在尝试对具有按该顺序出现在单词中的所有元音（a，e，i，o，u）的单词进行模式匹配。它们不必紧挨着。现在，这是我的代码：

```
open(INFILE, "words.txt") or die "Can't open word.txt: $!";
while(<INFILE>){
    $word = <INFILE>;
    if($word =~ /[a-z][a-zA-Z]*a[a-zA-Z]*e[a-zA-Z]*i[a-zA-Z]*o[a-zA-Z]*u[a-zA-Z]*/){
        print $word;
    }
}
close(INFILE); 
```

但是即使我知道我的输入中有一个带有这种模式的单词，我也没有返回任何单词。我能解释一下为什么吗？这是为了家庭作业。

编辑：第一个字母必须小写，所有元音必须小写。另外，在搜索 aeiou 模式时，我不能重复。

EDIT2：将匹配的单词示例是`abstemiousness`，不匹配的示例是`aAbstemiousness`（在找到 aeiou 的完整模式之前重复 e），（非字母 0），（以大写字母开头），（不低于发现案例）。`badetikojuw.``ambeeiou``0abstemiousness``Taeiou``baEstmious``e`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:01:28.247

怎么样

```
a.*e.*i.*o.*u 
```

匹配中间的`.*`零个或多个字符，因此以这种方式编写它可以确保元音是有序的。这也假设每行只有一个单词，情况似乎如此。

编辑：

选择：

```
a\w*e\w*i\w*o\w*u 
```

没有`_`和数字的替代方案：

```
a[a-z]*e[a-z]*i[a-z]*o[a-z]*u 
```

连续没有重复元音的替代方案：

```
a[b-df-hj-np-tv-z] #repeat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T04:15:44.807

您正在跳过一半的输入。

每次出现都会读取一行；你叫它两次。第一次将结果分配给 $_（默认代词），它被丢弃。

试着放

```
 while (my $word = <INFILE>) 
```

以避免丢弃所有其他输入行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:02:15.857

您排除了只有 1`a`并且它出现在开头的情况。请注意，元音区分大小写，而其他字符则不区分大小写。

由于您没有进行锚定匹配（匹配整个输入字符串，而不是允许匹配在输入字符串的中间任意开始和结束），您可以这样编写：

```
/[Aa][a-zA-Z]*[Ee][a-zA-Z]*[Ii][a-zA-Z]*[Oo][a-zA-Z]*[Uu]/ 
```

或者您可以打开不区分大小写的标志`i`：

```
/a[a-z]*e[a-z]*i[a-z]*o[a-z]*u/i 
```

[**演示**](http://ideone.com/Lp5EbK)

**上面的答案唯一的假设是之前`a`和之后的其余单词`u`都是英文字母。**

如果你想确保整个字符串只包含英文字母，并且有模式，你需要一个锚定匹配：

```
/^[a-z]*a[a-z]*e[a-z]*i[a-z]*o[a-z]*u[a-z]*$/i 
```

这是最严格的形式，对单词中的所有字符进行验证，并且不允许`@#$garblesdifdoup@#`匹配。

# javascript - 将 Javascript 注入 iframe

> ID：15353028
> 
> 赞同：0
> 
> 时间：2013-03-12T03:55:29.233
> 
> 标签：javascript, jquery, iframe, inject

我正在为我的网站制作实时编辑器。我有 CSS 和 HTML 部分，现在唯一的问题是 JS 部分。这是代码片段

```
var frame = $('#preview_content'),
           contents = frame.contents(),
           body = contents.find('body');
           csstag = contents.find('head').append('<style></style>').children('style');
           java = contents.find('head').append('<script><\/script>').children('script');//Issues here
       $('.area_content_box').focus(function() {
       var $this = $(this);
       var check = $this.attr('id');
        $this.keyup(function() {

        if (check === "html_process"){
        body.html($this.val());
        } else if(check === "css_process") {
        csstag.text($this.val());
        } else if (check === "java_process"){
        java.text( $this.val() );
        }

        });
      }); 
```

问题是当我尝试这个时，它没有在 iframe 主体或头部注入脚本标签。我已经阅读了有关注入和一些包含结束脚本标记的问题。我需要弄清楚如何注入脚本标签，真的希望它们在头脑中，但如果在身体中更容易，那很好。

jfriend00 - 如果你认为我应该诚实的话，我将专注于制作这个香草。

那么关于如何让我的编辑器与注入的 JS 一起正常工作有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:12:09.913

这两行代码看起来可能有问题：

```
csstag = contents.find('head').append('<style></style>').children('style');
java = contents.find('head').append('<script><\/script>').children('script');//Issues here 
```

似乎创建样式标记并记住该 DOM 元素会好得多。

```
var iframe = document.getElementById("preview_content");
var iframewindow = iframe.contentWindow || iframe.contentDocument.defaultView;
var doc = iframewindow.document;
var csstag = doc.createElement("style");
var scripttag = doc.createElement("script");
var head = doc.getElementsByTagName("head")[0];
head.appendChild.cssTag;
head.appendChild.scriptTag;

$('.area_content_box').focus(function() {
    var $this = $(this);
    var check = this.id;
    $this.keyup(function() {
        if (check === "html_process") {\
            // I would expect this to work
            doc.body.html($this.val());
        } else if(check === "css_process") {
            // I don't know if you can just replace CSS text like this 
            // or if you have to physically remove the previous style tag
            // and then insert a new one
            csstag.text($this.val());
        } else if (check === "java_process"){
            // this is unlikely to work
            // you probably have to create and insert a new script tag each time
            java.text( $this.val() );
        }
    });
}); 
```

这应该适用于正文 HTML，它可能适用于样式标签中的 CSS 文本。

我不相信它适用于 javascript，因为您无法通过按照您的方式将文本分配给标签来更改脚本。一旦脚本被解析，它就位于 javascript 命名空间中。

我知道没有用于删除先前定义和解释的脚本的公共 API。您可以使用后续脚本重新定义全局符号，但不能删除以前的脚本或其效果。

如果这是我的代码，我会删除以前的样式标签，创建一个新标签，在其插入 DOM 之前在其上设置文本，然后将其插入 DOM。

如果您不打算那样做，那么您必须测试以查看`.text()`在已插入（和解析）样式标签上设置的这种概念是否适用于所有相关浏览器。

对于脚本标签，我很确定您必须创建一个新的脚本标签并重新插入它，但是除了重新定义全局符号之外，没有办法摆脱已经解析过的旧代码。如果您真的想从头开始编写代码，则必须从头开始创建一个新的 iframe 对象。

* * *

这也有其他问题。`.keyup()`每次获取焦点时，您都​​在安装一个事件处理程序`.area_content_box`，这很容易导致安装许多事件处理程序，所有事件处理程序都被调用并且都试图做同样的工作。

# javascript - 当文件完成上传到服务器时，Javascript 可以关闭窗口吗？

> ID：15353033
> 
> 赞同：1
> 
> 时间：2013-03-12T03:56:11.750
> 
> 标签：javascript, jquery, web

目前我正在`POST`对我们的服务器进行处理，我希望能够`window.open`在文件上传完成后关闭弹出窗口。现在，我正在使用：

```
setTimeout(function()
 {
   imageUploadWindow.close();
 }, 5000); 
```

但是，这会引入我想避免的具有不同文件大小或 Internet 连接的时间错误。有人知道我可以在 100% 上传后关闭窗口的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:57:39.200

在 POST 之后，让您的服务器将浏览器重定向到包含关闭窗口的脚本的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:00:33.763

您可以让您的服务器回复一些结果，这表示上传已完成。一旦您收到来自服务器的响应，您就可以检查结果并执行您想要的任何操作。假设您的服务器回复说“upload_completed”。根据这个结果，您可以触发 JavaScript 代码来关闭窗口。

# python - 循环赛的python程序

> ID：15353038
> 
> 赞同：3
> 
> 时间：2013-03-12T03:56:48.410
> 
> 标签：python

我正在编写一个程序，允许用户输入偶数个玩家，然后它将生成一个循环锦标赛时间表。`n/2 * n-1`游戏的数量，以便每个玩家都玩其他玩家。

现在我很难生成用户输入的玩家数量列表。我收到此错误：

> TypeError：'int' 对象不可迭代。

我在我的程序中经常遇到这个错误，所以我想我不太了解 Python 的这一部分，所以如果有人也能解释一下，我将不胜感激。

```
def rounds(players, player_list):
    """determines how many rounds and who plays who in each round"""
    num_games = int((players/2) * (players-1))
    num_rounds = int(players/2)
    player_list = list(players)
    return player_list 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T04:01:59.347

如果您只想获取数字列表，则可能需要该[`range()`](http://docs.python.org/2/library/functions.html#range)功能。

对于实际的循环赛，您应该查看[`itertools.combinations`](http://docs.python.org/2/library/itertools.html#itertools.combinations).

```
>>> n = 4
>>> players = range(1,n+1)
>>> players
[1, 2, 3, 4]
>>> list(itertools.combinations(players, 2))
[(1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T04:04:33.013

```
player_list= list(players) 
```

是什么引起了`TypeError`. 发生这种情况是因为该`list()`函数只知道如何对可以迭代的对象进行操作，而`int`不是这样的对象。

从评论来看，您似乎只是想创建一个包含球员编号（或姓名或索引）的列表。你可以这样做：

```
# this will create the list [1,2,3,...players]:
player_list = range(1, players+1) 
# or, the list [0,1,...players-1]: 
player_list = range(players) #  this is equivalent to range(0,players) 
```

# javascript - 如果词汇表中有可用的定义，则使用 SPAN 更改单词的颜色

> ID：15353041
> 
> 赞同：1
> 
> 时间：2013-03-12T03:56:55.447
> 
> 标签：javascript, jquery, css, html

我正在自学 JavaScript 和 JQuery，并在学习过程中通过一个简单的词汇表应用程序工作。目前，我的词汇表术语位于两个 json 文件中（一个用于术语，一个用于首字母缩略词）。当我单击术语表或首字母缩略词表中可用的单词时，我有一个带有文本的页面和代码以在警报中显示定义。那部分正在工作。我想做的是能够更改文本中具有匹配定义（颜色、下划线等）的每个单词的样式。我想我需要使用循环来检查词汇表中的单词是否（我已经可以这样做）然后应用，但我不确定跨度在动态执行时是否有效。我的代码中的一个跨度标记是已在此处发布的另一个问题中发布的修改示例，我让它为我工作，我' 我只是不太确定它是如何做的。有人有时间让我朝着正确的方向前进吗？

```
//breaks the paragraph html into word by word targets
var p = $('p#paragraph');
var words;
p.html(function(index, oldHtml) {
    words = oldHtml.replace(/\b(\w+?)\b/g, '<span class="word">$1</span>')
    return words;
});
//when word is clicked checks to see if word in the glossary, if so displays alert box with word and definition
p.click(function(event) {
    if (this.id != event.target.id) {
          var termNeeded = event.target.innerHTML;
        //checks Terms json first
        var checkAcronyms = true;
        for (var i = 0; i < jsonTerms.GlossaryTerms.length; i++) {
            var obj = jsonTerms.GlossaryTerms[i];
            if (obj.term == termNeeded) {
                alert(obj.term + ":  " + obj.definition);
                checkAcronyms = false;
                break;

         };
        };
        //if the word is not in the terms, then checks in the acronyms
            if (checkAcronyms == true){
            for (var i = 0; i < jsonAcronyms.GlossaryAcronyms.length; i++) {
            var obj = jsonAcronyms.GlossaryAcronyms[i];
            if (obj.term == termNeeded) {
                alert(obj.term + ":  " + obj.definition);
            break;
            };
            };
            };
        };

});

//brings in the JSON data
var jsonTerms;
$.getJSON("GlossaryTerms.json", function(data) {
    jsonTerms = data;
    //console.log(jsonTerms);
});

var jsonAcronyms;
$.getJSON("GlossaryAcronyms.json", function(data) {
    jsonAcronyms = data;
    //console.log(jsonAcronyms);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:31:18.603

一旦您添加了跨度并加载了 JSON 数据，您需要遍历每个单词跨度来测试它们是否匹配。

```
p.find('span.word').each(function(){
    // "this" now refers to the span element
   var txt=this.innerHTML;
   if(isInGlossary(txt)){
    $(this).addClass('in_glossary');
   }
}) 
```

您将需要定义函数，这几乎是您在代码`isInGlossary(term)`中已经完成的工作。`p.click`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T04:35:15.393

也许这样的事情可以解决问题：

我稍微更改了您的代码，请注意它未经测试。

您必须使用 name 定义 CSS 样式`"defined"`，这将表明该词具有定义。

我将您的逻辑提取到一个单独的函数中以供重用。此外，创建了该`addStyleToWords`函数，它应该遍历所有单词，检查它们是否有定义，如果有，则向该元素添加一个额外的类。

```
var jsonTerms;
var jsonAcronyms;

function checkWord(termNeeded) {
    //checks Terms json first
    for (var i = 0; i < jsonTerms.GlossaryTerms.length; i++) {
        var obj = jsonTerms.GlossaryTerms[i];
        if (obj.term == termNeeded) {
            return obj;
        }
    }
    //if the word is not in the terms, then checks in the acronyms
    for (var i = 0; i < jsonAcronyms.GlossaryAcronyms.length; i++) {
        var obj = jsonAcronyms.GlossaryAcronyms[i];
        if (obj.term == termNeeded) {
            return obj;
        }
    }
    return null;
}
function addStyleToWords() {
    $(".word").each(function() {
        var el = $(this);
        var obj = checkWord(el.text());
        if (obj != null) el.addClass("defined");
    });
}

//breaks the paragraph html into word by word targets
var p = $('p#paragraph');
p.html(function(index, oldHtml) {
    return oldHtml.replace(/\b(\w+?)\b/g, '<span class="word">$1</span>');
});
//when word is clicked checks to see if word in the glossary, if so displays alert box with word and definition
p.click(function(event) {
    if (this.id != event.target.id) {
        var obj = checkWord(event.target.innerHTML);
        if (obj != null) alert(obj.term + ":  " + obj.definition);
});

//brings in the JSON data
$.getJSON("GlossaryTerms.json", function(data) {
    jsonTerms = data;
    $.getJSON("GlossaryAcronyms.json", function(data) {
        jsonAcronyms = data;
        addStyleToWords();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:31:05.457

我不明白...

如果我理解正确，请查看：[JQuery addClass](http://api.jquery.com/addClass/)

* * *

我的建议：

如果您想遍历段落中的每个作品，那么在您的点击处理程序中使用 $('p#paragraph).find('span').each(function(){...});

在你的每个函数中，使用 $(this).html() 来设置你的单词的样式，添加一个类或 css 到 $(this)。参见：[JQuery addClass](http://api.jquery.com/addClass/)

而是将您的 JSONArray 作为 JSONObject（很像关联数组）返回，其中 word 是属性，而 description 是值，这样您就可以像这样搜索它：var definition = json[word].

# iis - IIS Url Rewriter 重写失败，但重定向工作完美

> ID：15353043
> 
> 赞同：4
> 
> 时间：2013-03-12T03:57:26.130
> 
> 标签：iis, url-rewriting, reverse-proxy

我必须在新的 Intranet 服务器（Win 2008 R2 Standard SP1）上设置几个应用程序。我在使用 URL 重写器规则时遇到了一些困难。我有一个类似的规则在我的本地 IIS（Win 7）上运行良好。该规则旨在为 Web 服务创建反向代理，使来自客户端的 jQuery AJAX 请求能够避免 XSS。

规则如下，如果我按原样使用它，然后在浏览器中输入示例 URL：

```
http://srv01.domain.com/serviceproxy/workflow/Users/GetUsers?q=smith&max=10 
```

我从服务器收到 404 响应。如果我将类型更改为“重定向”，我会从服务器获得预期的响应（但显然这将使我避免 XSS 的尝试无效）。

```
<rewrite>
  <rules>
    <rule name="Reverse Proxy - WCF Service" stopProcessing="true">
      <match url="serviceproxy/workflow/(.+)" />
      <action type="Rewrite" url="http://srv01.domain.com/WorkflowService/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

服务器配置中可能缺少的任何想法？是否需要配置某处的安全设置以允许重写发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:38:44.157

我发现了我的问题。我没有在此服务器上安装应用程序请求路由。要么我忘记将它安装在我的另一台服务器上，要么出于其他原因它已经在那里。

找到帮助我解决它的这篇文章。

[http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T12:51:28.543

在 Windows 2008 IIS 7.5 上也有类似的问题 问题是应用程序池处于集成模式。这导致了重写问题。重定向总是好的，但重写总是失败。

将应用程序池更改为经典模式并解决了问题（至少目前如此）。

一个更好的解决方案可能是[http://forums.iis.net/t/1200671.aspx?ARR+URl+Rewrite+is+not+working+for+external+servers](http://forums.iis.net/t/1200671.aspx?ARR+URl+Rewrite+is+not+working+for+external+servers) 就在最后。但我还没有尝试过。

# android - 拉取刷新GridView无限加载/拉取数据失败

> ID：15353048
> 
> 赞同：0
> 
> 时间：2013-03-12T03:58:04.170
> 
> 标签：android, android-view, android-gridview, baseadapter

我似乎无法弄清楚这出了什么问题，代码非常干净/简单，但是由于某种原因，当我拉动刷新时，它只是向我显示了无限的加载图标。不仅如此，我什至没有收到任何错误。我用于拉取刷新的库就是[这个](https://github.com/chrisbanes/Android-PullToRefresh)。

我花了几个小时试图弄清楚这一点，但事实上它甚至没有给我错误，这让我很难追查到。

是的，我确信其余的请求是有效的。

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.GridView;
import android.widget.TextView;
import android.widget.Toast;

import com.handmark.pulltorefresh.library.PullToRefreshBase;
import com.handmark.pulltorefresh.library.PullToRefreshBase.Mode;
import com.handmark.pulltorefresh.library.PullToRefreshBase.OnRefreshListener2;
import com.handmark.pulltorefresh.library.PullToRefreshGridView;
import com.loopj.android.http.JsonHttpResponseHandler;
import com.loopj.android.http.RequestParams;

public final class PullToRefresh extends Activity {

    static final int MENU_SET_MODE = 0;
    static final String KEY_FEED = "feed"; // parent node
    static final String KEY_UID_FK = "uid_fk";
    static final String KEY_FIRST_NAME = "first_name";
    static final String KEY_LAST_NAME = "last_name";
    public static final String KEY_NAME = "name";
    static final String KEY_MESSAGE = "message";
    static final String KEY_CREATED = "created";
    static final String KEY_THUMB_URL = "thumb_img";
    static final String KEY_DATA = "data";
    static final String KEY_HOMETOWN = "hometown";
    static final String KEY_BIO = "bio";

    private ArrayList<HashMap<String, String>> feedList = new ArrayList<HashMap<String, String>>();
    private PullToRefreshGridView mPullRefreshGridView;
    private GridView mGridView;
    private GridAdapter adapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ptr_grid);

        mPullRefreshGridView = (PullToRefreshGridView) findViewById(R.id.pull_refresh_grid);
        mGridView = mPullRefreshGridView.getRefreshableView();

        // Set a listener to be invoked when the list should be refreshed.
        mPullRefreshGridView
                .setOnRefreshListener(new OnRefreshListener2<GridView>() {

                    @Override
                    public void onPullDownToRefresh(
                            PullToRefreshBase<GridView> refreshView) {
                        Toast.makeText(PullToRefresh.this, "Pull Down!",
                                Toast.LENGTH_SHORT).show();
                        try {
                            new RestClientUsage().getPublicTimeline();
                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onPullUpToRefresh(
                            PullToRefreshBase<GridView> refreshView) {
                        Toast.makeText(PullToRefresh.this, "Pull Up!",
                                Toast.LENGTH_SHORT).show();
                        try {
                            new RestClientUsage().getPublicTimeline();
                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                });

        ArrayList<HashMap<String, String>> feedList = new ArrayList<HashMap<String, String>>();
        TextView tv = new TextView(this);
        tv.setGravity(Gravity.CENTER);
        tv.setText("Empty View, Pull Down/Up to Add Items");
        mPullRefreshGridView.setEmptyView(tv);
        adapter = new GridAdapter(PullToRefresh.this, feedList);
        mGridView.setAdapter(adapter);
    }

    class RestClientUsage {

        public void getPublicTimeline() throws JSONException {
            RequestParams params = new RequestParams();
            params.put("loggedin_uid", TabHostFragmentActivity.loggedin_uid);

            RestClient.post("http://localhost/basic/rest/request/format/json",
                    params, new JsonHttpResponseHandler() {

                        private JSONArray feed;

                        @Override
                        public void onSuccess(JSONObject json) {
                            try {
                                Log.i("JSON->TRAILS RESPONSE", json.toString(3));

                                // Getting Feed Array
                                feed = json.getJSONArray(KEY_FEED);

                                /*
                                * Log & Debug Code String feed_log =
                                * feed.toString(3); int feed_length =
                                * feed.length(); String string_length =
                                * Integer.toString(feed_length);
                                * Log.i("JSON PROFILE FEED RESPONSE", feed_log
                                * ); Log.i("JSON PROFILE FEED LENGTH",
                                * string_length);
                                */

                                // looping through Feed of Updates
                                for (int i = 0; i < feed.length(); i++) {
                                    JSONObject c = feed.getJSONObject(i);

                                    String jFeedObj = c.toString(3);
                                    Log.i("JSON FEED OBJ", jFeedObj);

                                    // Storing each json item in variable
                                    String uid = c.getString(KEY_UID_FK);
                                    String first_name = c
                                            .getString(KEY_FIRST_NAME);
                                    String last_name = c
                                            .getString(KEY_LAST_NAME);
                                    String name = first_name + ' ' + last_name;
                                    String http = "http://10.0.2.2/CI_REST_LOGIN/UPLOADS/thumbs/";
                                    String base_url = c
                                            .getString(KEY_THUMB_URL);
                                    String thumb_url = http + base_url;
                                    String message = c.getString(KEY_MESSAGE);
                                    String created = c.getString(KEY_CREATED);

                                    // creating new HashMap
                                    HashMap<String, String> map = new HashMap<String, String>();

                                    // adding each child node to HashMap key =>
                                    // value
                                    map.put(KEY_UID_FK, uid);
                                    map.put(KEY_NAME, name);
                                    map.put(KEY_MESSAGE, message);
                                    map.put(KEY_CREATED, created);
                                    map.put(KEY_THUMB_URL, thumb_url);

                                    Log.i("Trails - line 130", "Success");
                                    // adding HashList to ArrayList
                                    feedList.add(map);
                                }

                                adapter.notifyDataSetChanged();
                                // Call onRefreshComplete when the list has been
                                // refreshed.
                                mPullRefreshGridView.onRefreshComplete();

                            } catch (JSONException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    });
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(
                0,
                MENU_SET_MODE,
                0,
                mPullRefreshGridView.getMode() == Mode.BOTH ? "Change to MODE_PULL_DOWN"
                        : "Change to MODE_PULL_BOTH");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        MenuItem setModeItem = menu.findItem(MENU_SET_MODE);
        setModeItem
                .setTitle(mPullRefreshGridView.getMode() == Mode.BOTH ? "Change to MODE_PULL_FROM_START"
                        : "Change to MODE_PULL_BOTH");

        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case MENU_SET_MODE:
            mPullRefreshGridView
                    .setMode(mPullRefreshGridView.getMode() == Mode.BOTH ? Mode.PULL_FROM_START
                            : Mode.BOTH);
            break;
        }

        return super.onOptionsItemSelected(item);
    }
} 
```

这是我的`GridView`适配器的代码：

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.loopj.android.image.SmartImageView;

public class GridAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater = null;
    public ImageLoader imageLoader;

    public GridAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data = d;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if (convertView == null)
            vi = inflater.inflate(R.layout.mobile, null);

        TextView name = (TextView) vi.findViewById(R.id.grid_item_label); // title
        SmartImageView thumb_image = (SmartImageView) vi
                .findViewById(R.id.grid_item_image);

        HashMap<String, String> update = new HashMap<String, String>();
        update = data.get(position);

        // Setting all values in listview
        name.setText(update.get("name"));
        thumb_image.setImageUrl(update.get("thumb_img"));
        name.setOnClickListener(new myOnClickListener(position));
        thumb_image.setOnClickListener(new myOnClickListener(position));
        return vi;
    }

    public class myOnClickListener implements OnClickListener {

        private int position;
        private String clicked_uid;

        public myOnClickListener(int position) {
            this.position = position;
        }

        @Override
        public void onClick(View v) { // TODO Auto-generated method stub
            HashMap<String, String> update = new HashMap<String, String>();
            update = data.get(position);
            Log.i("Update Position:", update.toString());
            clicked_uid = update.get("uid");
            Log.d("Clicked UID:", clicked_uid + "");
            Intent i = new Intent(activity.getApplicationContext(),
                    TabHostFragmentActivity.class);
            i.putExtra("profile_uid", clicked_uid);
            activity.startActivity(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:24:47.240

`RestClient.post`在对 in 的调用中，您应该 POST 到 10.0.2.2 而不是 localhost `RestClientUsage`。

我不熟悉`JsonHttpResponseHandler`，但我想有一个`onFailure`方法（或类似的东西）你可能想要覆盖。如果有，您可以调用`mPullRefreshGridView.onRefreshComplete()`它。

# sublimetext2 - 崇高文本2 Windows 7上的python 3.3

> ID：15353057
> 
> 赞同：0
> 
> 时间：2013-03-12T03:59:07.337
> 
> 标签：sublimetext2, python-3.3

我正在运行 Windows 7 32 位并且我正在使用 sublime text 2 我想知道如何将 ST2 中的默认 python 更改为我下载的 python 3.3。任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:21:28.757

您需要更改 Python 的 Sublime 构建系统。将`Python.sublime-build`文件从`Packages/Python`文件夹复制到文件`Packages/User`夹。在文件`User`夹中的文件中，将`cmd`选项从更改`python`为`c:/python33/python`（您的 Python 3.3 可执行文件所在的位置）。

# javascript - 输出换行符而不是分号的 JavaScript 缩小器 - 基于 Windows

> ID：15353059
> 
> 赞同：1
> 
> 时间：2013-03-12T03:59:22.950
> 
> 标签：javascript, exception-handling, minify, line-numbers

当客户端 JavaScript 发生异常时，我们希望行号有用。理想情况下，理解 ASI（自动分号插入）规则的解决方案，即具有语法意识而不是基于 RegExp/文本的解决方案。

我发现的最接近的是 UglifyJS2，分号选项设置为 false。[编辑：UglifyJS2 还需要将最大行长度选项设置为较低的值，并且可能未勾选序列选项，否则它仍会生成长行，例如 1000 个字符长]。

PS：我们的构建过程必须使用Windows（由于各种原因被锁定），并且我们的构建脚本已经依赖于Python和Java（JS的closurecompiler，CSS的yuicompressor，将图像嵌入CSS的cssembed）我真的不'不想添加另一个构建过程依赖项（Node、Ruby 或 Web 服务等），我强烈反对使用 RegExp 解决方案，因为我认为文本处理对于可靠的生产解决方案来说太脆弱了。

PPS：我不想依赖源图，因为它们要复杂得多（跨浏览器问题、内部和客户端支持问题、管理和查找正确源图的困难）。

PPPS：对行号有新要求的原因是我们开始使用[https://github.com/getsentry/raven-js](https://github.com/getsentry/raven-js)，如果异常的行号有用，它将是最有用的。我们的客户端代码是一个单页 Ajax/json 应用程序。理论上，使用换行符而不是分号会改变 gzip 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:59:30.630

UglifyJS2 是我发现在以下设置下工作正常的唯一解决方案：

*   分号选项设置为 false
*   最大行长度选项设置为合理的低值
*   序列选项未勾选

行长的选择涉及一个折衷方案：较短的行长更适合诊断发生异常的位置，但 gzip 大小会随着您减少行长而增加少量。

# dojo - 尝试使用 dojo 动态导航到新页面

> ID：15353066
> 
> 赞同：2
> 
> 时间：2013-03-12T04:00:12.910
> 
> 标签：dojo

我是 javascript 和 dojo 的新手，正在尝试编写代码以动态导航到另一个 URL。使用 javascript 似乎很容易做到这一点，但我无法让它与 dojo/on 一起使用。这是我的示例代码。微不足道的回调工作正常。dojo/on 回调调用回调，但新页面永远不会出现。我必须动态地使用 dojo 来执行此操作，因为我的项目需要它。任何人都知道为什么会失败以及如何使其工作？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js">
</script>
<script type="text/javascript">
callback = function() {
    window.location.href = "about:blank";
    console.debug("callback invoked"); 
}
function init() {
    var node = dojo.byId("test");
    var childNode = dojo.create("a", { href : "" }, node);
    childNode.innerText = "dojo callback click here"; 
    require(["dojo/on"], function(on){
        on(childNode, "click", callback);
    }); 
}
dojo.ready(init);
</script>
<div id="test">
    <p>
    <a href = "javascript:callback()">trivial callback click here</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T06:12:18.970

从 Dojo 1.7 开始，AMD 加载程序是使用 Dojo 模块的首选方式。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"></script>
    <script type="text/javascript">
    require(['dojo/on', 'dojo/dom', 'dojo/domReady!'], function(on, dom){
        on(dom.byId('theDiv'), 'click', function(){
            alert("Click!") // replace this line with location changes
        })
    })
    </script>
</head>
<body>
    <div id="test">
        <a href="javascript:void(0);" id="theDiv">Click Me</a>
    </div>
</body>
</html> 
```

在此示例中，核心 Dojo.js 已加载（如您所要求），但不同之处在于我使用了 require 方法，将`click`方法附加`dojo/on`到 div。理想情况下，您将使用单独的 javascript 文件来指示页面的行为，但对于此示例，将 js 嵌入到索引页面中就足够了。

使用解析器，您可以使用声明`<script type="dojo/on" data-dojo-event="click">...</script>`式，但出于各种原因，您应该使用编程解析并使用 javascript 文件以获得最大效率。

此外，在全局范围内定义函数/方法/变量：

```
<script type="text/javascript">
callback = function() {
    window.location.href = "about:blank";
    console.debug("callback invoked"); 
}
</script> 
```

...不推荐，有更好的选择。

# ruby-on-rails - PayPal 即时更新 API 不适用于 HTTPS

> ID：15353067
> 
> 赞同：1
> 
> 时间：2013-03-12T04:00:18.103
> 
> 标签：ruby-on-rails, paypal, spree

我们正在建立一个基于 Spree 并托管在 Heroku 上的在线商店。我们想让结帐尽可能简单，因此我们决定使用 PayPal Express Checkout 和 Instant Update API 来确定运费。

当我们通过 HTTP 测试结帐过程时，一切正常 - 当用户输入他的送货地址时，PayPal 在后台查询我们的服务器并获取运费。

但是，当我们切换到 SSL 时，运费不会更新并恢复为默认的统一费率。我不知道出了什么问题，因为一切都是一样的，除了这次应用程序是通过 HTTPS 访问的，即[https://myapp.herokuapp.com](https://myapp.herokuapp.com)

我检查了日志，发现 PayPal 的服务器确实进行了查询，但运费并未在 PayPal 的结帐页面上更新。

有什么想法吗？

**更新：**

经过进一步测试，PayPal 似乎没有遵守交易设置中设置的超时时间。我们在回调方法中添加了一个简单的“sleep(x)”来人为地诱导一些延迟（x 秒），即使在正常的 HTTP 上，仅仅 1 秒的延迟就足以导致 PayPal 忽略响应。

最大超时应该是 6 秒，但实际上似乎根本不是这种情况。再加上 HTTPS（建立连接需要更长的时间），这可能就是回调失败的原因。

我已经向 PayPal 提交了一张票，但我不确定他们是否会对此做出回应或采取任何措施......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:37:14.553

看来 PayPal 可能会忽略回调中返回的运输选项的原因有很多。

我想在 PayPal 的网站上看到一些东西，它会保留最近调用回调的历史记录以及返回的响应和拒绝的原因——有点类似于有用的 IPN 历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:29:25.093

我很高兴您在这里发布了您的真实域名，因为您几乎证实了我的怀疑。

我非常确信问题在于您有一个通配符 SSL（我看到您的证书颁发给`*.herokuapp.com`），而不仅仅是单个域的 SSL。

我在使用`www.MicroPedi.com`5 名 UCC 证书的 UCC 证书时遇到了同样的问题。PayPal 完全拒绝甚至对它进行任何调用（我有日志记录，除了使用沙盒时什么都没有通过）。

* * *

为了确认这一点，我之前有一个运行良好的 Express 结帐实现（使用单个 SSL），我将我的新应用程序指向那个旧 URL，它神奇地再次开始工作。那是一个单一的名称 SSL - 实际上它是那些昂贵的`green bar`证书之一。

我已经直接写信给 PayPal 支持，但现在我唯一能想到的解决方法是编写某种代理页面，它只会从好的域重定向到我的 UCC 域。

# android - 在 BroadcastReceiver 中创建通知时出现 IllegalArgumentException

> ID：15353068
> 
> 赞同：2
> 
> 时间：2013-03-12T04:00:20.470
> 
> 标签：android, exception, android-notifications

我正在使用以下代码在`onRecieve`my 的方法中创建通知，`BroadcastReceiver`但它给了我以下异常：

`java.lang.IllegalArgumentException: contentIntent required`

## 编码：

```
 NotificationManager notificationManager;
        notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
    String tickerText;
    String expandedText;
    String expandedTitle;
    int icon;
    long when;
    Notification notification;

    int notificationref = new Random().nextInt(100) + 1;
    icon = R.drawable.reminder;
    tickerText = "New Reminder";
    when = System.currentTimeMillis();
    notification = new Notification(icon, tickerText, when);
    expandedText = "Reminder at: "
            + DateOrTimeString.getTimeString(task.time) + "\n"
            + task.detail;
    expandedTitle = "Reminder:" + task.topic;
    Intent intentDestroyer = new Intent(context, RemindHomeActivity.class);
    intentDestroyer.putExtra("ID", task.id);
    intentDestroyer.putExtra("NOTIFICATIONREF", notificationref);
    launchIntent = PendingIntent.getActivity(context, notificationref,
            intentDestroyer, 0);

    notification.setLatestEventInfo(mContext, expandedTitle, expandedText,
            null);
    notificationManager.notify(1, notification); 
```

还有一件事这个问题只在 API 级别小于 11。它在 API 级别 15 Icecream Sandwitch 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:32:44.027

您需要设置 contentIntent

```
void android.app.Notification.setLatestEventInfo(Context context, CharSequence contentTitle, CharSequence contentText, PendingIntent contentIntent)‬ 
```

在你的情况下：

```
notification.setLatestEventInfo(mContext, expandedTitle, expandedText,
            launchIntent ); 
```

# cakephp - 如何从 CakePHP 中的 URL 字符串获取连接的路由？

> ID：15353074
> 
> 赞同：1
> 
> 时间：2013-03-12T04:01:11.437
> 
> 标签：cakephp, routing, slug

CakePHP 似乎具有转换请求的 URL 并确定要执行的控制器和操作的功能，因为必须对每个 http 请求执行此操作。

有没有办法可以在控制器或系统其他地方利用这个过程？最好的结果是有一个输入 URL 字符串的函数，响应是一个包含控制器详细信息的数组。例如：

```
$url_route = RouteFunction('/page/url/here');

// $url_route = array(
//    'controller' => 'page', 
//    'action' => 'display', 
//    'pass' => array('url', 'here')
// ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:54:42.793

为此，您可以使用[`Router::parse()`](http://api.cakephp.org/2.3/class-Router.html#_parse).

例如：

```
$route = Router::parse('/users/view/21');
debug($route); 
```

将默认输出：

```
array(
    'controller' => 'users',
    'action' => 'view',
    'named' => array(),
    'pass' => array(
            (int) 0 => '21'
    ),
    'plugin' => null
) 
```

# c# - 如何创建 SP、表、函数和触发器

> ID：15353076
> 
> 赞同：0
> 
> 时间：2013-03-12T04:01:37.447
> 
> 标签：c#, .net, sql, sql-server, tsql

我目前正在开发应用程序，其中要求之一是能够从 ASP.NET 内部创建 SP、表、函数、触发器等。我使用的语言是 C#，但我不知道这是否可能。您介意为我指出正确的方向或提供一些代码示例吗？

我尝试在网上查找，但找不到任何有关此的信息。

@rmayer06，我听从了你的建议，下面是我的代码：

```
protected void createproc_Click(object sender, EventArgs e)
{
    string sqlscript = File.ReadAllText(Server.MapPath("~/sp_create.sql"));

    try
    {
        SqlConnection con = new SqlConnection();
        SqlCommand cmd = new SqlCommand(sqlscript, con);
        cmd.CommandType = CommandType.Text;
        con.ConnectionString = ConfigurationManager.ConnectionStrings["TCKT"].ConnectionString;

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }
    catch (Exception ex)
    {
        throw new Exception("An error has occurred" + ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:07:09.280

可以使用`SqlCommand.ExecuteNonQuery()`，或使用`Microsoft.SqlServer`命名空间中的类。我在快速搜索中找到了这个：[http ://forums.asp.net/t/1703608.aspx/1](http://forums.asp.net/t/1703608.aspx/1)

但是，如果我是您，我会要求您进一步澄清您的要求。您需要动态创建 SP 似乎很奇怪。通常，如果需要，最好将它们设计为数据库的一部分，因为 SP 需要进行优化、调试等。

在相关的说明中，我在 c# 中运行了数据库更新脚本，它确实创建了存储过程作为更新数据库代码的一部分。如果您正在这样做，我建议您执行以下操作：

1.  将整个数据库编写成一个`.SQL`文件。
2.  使用 sqlcmd 实用程序针对您的本地服务器执行该文件。这可以通过`System.Diagnostics.Process.Start()`从 Web 应用程序调用并提供必要的命令行参数来完成。

需要注意的是，您的 Web 应用程序进程将需要启动 sqlcmd 进程的权限。或者作为替代方案，您可以使用`SqlCommand`该类并将 SQL 脚本的全部内容转储到一个字符串中，然后将其传递给命令。我想我也这样做了，而且奏效了。

# ruby-on-rails-3 - ROR + PdfKit + 没有这样的文件或目录 -"C:\\Program\ Files\\wkhtmltopdf\\wkhtmltopdf.exe"

> ID：15353078
> 
> 赞同：1
> 
> 时间：2013-03-12T04:01:46.900
> 
> 标签：ruby-on-rails-3, pdf-generation, pdfkit

在我的项目中，我在 windows 平台上使用了 PDFKIT。最初它工作正常，但现在它给出了一些奇怪的错误消息。

> 没有这样的文件或目录 - "C:\Program\ Files\wkhtmltopdf\wkhtmltopdf.exe" "--page-size" "Letter" "--margin-top" "0.75in" "--margin-right" "0.75 in" "--margin-bottom" "0.75in" "--margin-left" "0.75in" "--encoding" "UTF-8" "--quiet" "-" "-"

我没有办法解决它，这里是 ruby​​ 代码。

```
kit = PDFKit.new(html)
send_data(kit.to_pdf, :filename => "#{file_name}.pdf", :type =>'application/pdf') 
```

文件：app/config/initializers/pdfkit.rb

```
PDFKit.configure do |config|
  config.wkhtmltopdf = 'C:\Program Files\wkhtmltopdf\wkhtmltopdf.exe'
  # config.default_options = {
  #   :page_size => 'Legal',
  #   :print_media_type => true
  # }
  # config.root_url = "http://localhost" # Use only if your external hostname is unavailable on the server.
end 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:29:08.863

当我的系统上发生这种情况时，我通过将 wkhtmltopdf 移动到路径不包含空格的目录来解决它。

# ruby-on-rails - rails：如何检查管理员用户设置路线？

> ID：15353082
> 
> 赞同：2
> 
> 时间：2013-03-12T04:02:00.737
> 
> 标签：ruby-on-rails, routing

我需要使用 devise 设置仅在登录用户是管理员（user.admin？）时才有效的路由。我正在为 sidekiq 做这个，但这个问题对于任何类似的用途都是有效的。

这是我的路线代码：

```
class AdminConstraint
  def matches?(request)
    !request.session['warden.user.user.key'].nil? and request.session['warden'].user.admin?
  end
end

require 'sidekiq/web'
mount Sidekiq::Web => '/sidekiq', :constraints => AdminConstraint.new 
```

我从 sidekiq wiki 获得了这段代码： [https](https://github.com/mperham/sidekiq/wiki/Monitoring) ://github.com/mperham/sidekiq/wiki/Monitoring 我尝试了他们发布的代码，但没有成功，所以我在刚刚发布的时候做了一些修改。当用户评估为零时，上面的代码不起作用。

处理此问题的正确*安全方法是什么？*

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T15:56:51.007

如果您使用 devise 对用户进行身份验证，您需要执行以下操作：

在您的 routes.rb 文件中，替换此行：

```
mount Sidekiq::Web => '/sidekiq', :constraints => AdminConstraint.new 
```

用这个块：

```
authenticate :user, lambda { |u| u.has_role? :admin } do
    mount Sidekiq::Web => '/sidekiq'
end 
```

该块的作用是告诉您的设计机制首先检查用户是否已通过身份验证（该`authenticate`方法是设计方法），并且在定义路由之前用户具有管理员角色（lambda 块检查） sidekiq 用户界面。这样，只有具有管理员角色的用户才能访问此路由。其他用户在开发中会遇到路由错误，在生产中会出现 404 错误。

还有一件事，该`has_role?`方法是一个 rolify gem，在我的情况下我使用它，但是您可以将其替换为任何其他检查用户是否为管理员的方法/查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:13:44.560

您并没有真正尝试根据用户是谁来更改路线（我什至不确定在没有大量黑客攻击的情况下是否可以在 Rails 中使用），您正在尝试*授权*用户的操作。

有几个很好的授权库。我个人喜欢[CanCan](https://github.com/ryanb/cancan)，但还有很多其他的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:35:47.453

如果您在控制器中进行任何类型的过滤以进行设计，您可以使用助手

```
class ###Controller < ApplicationController

  before_filter: :authenticate_admin!

def index
end 
```

或您尝试允许访问的任何设计模型，即

```
before_filter: :authenticate_user!
before_filter: :authenticate_author! 
```

就像 bdares 说的那样。如果设计中的辅助方法不够，您可以使用 CanCan gem 进行授权

希望能帮助到你！

# jquery - Jquery Ajax HTTP 发布

> ID：15353084
> 
> 赞同：1
> 
> 时间：2013-03-12T04:02:23.207
> 
> 标签：jquery

我需要在提交表单时执行静默帖子。然后应该将该帖子的结果加载到 div 中。该帖子运行良好，但浏览器将用户重定向到发布的页面，而不是将该页面静默加载到 div 中。这是代码...

```
 $('#task_details_form').submit(function() {
            // Submit AJAX request
        $.ajax({
                url      : $(this).attr('action'),
                type     : 'post',
                data     : $(this).serialize(),
                cache    : false,
                success  : function(data) {
                        $('#user_tasks').html(data);    
                    }

                });
         return false;
     }); 
```

我一直在玩语法一段时间但没有成功。有任何想法吗？

我在有和没有 e 的情况下都试过这个，但仍然没有运气。

```
$('#task_details_form').click(function(e) {
        e.preventDefault();
            // Submit AJAX request
        $.ajax({
                url      : $(this).attr('action'),
                type     : 'post',
                data     : $(this).serialize(),
                cache    : false,
                dataType : 'json',
                success  : function(data) {
                        $('#user_tasks').html(data);    
                    }

                });
         return false;
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:06:13.943

您需要告诉 ajax 请求的 ContentType。添加内容类型

> 向服务器发送数据时，使用此内容类型。默认为“application/x-www-form-urlencoded; charset=UTF-8”，在大多数情况下都可以。如果您明确地将内容类型传递给 $.ajax()，那么它将始终被发送到服务器（即使没有发送数据）。如果没有指定字符集，数据将使用服务器的默认字符集传输到服务器；您必须在服务器端对此进行适当解码。

```
contentType:"Application/JSON" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:11:08.323

您需要防止表单提交的默认操作。通常，当您提交表单时，浏览器会从当前页面重定向到目标页面。

你需要改变：

```
$('#task_details_form').submit(function() { 
```

至

```
$('#task_details_form').submit(function(e) { 
```

然后在函数的第一行添加以下内容：

```
e.preventDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:13:09.070

尝试，使用其中的 ajax 发布代码创建一个函数并在单击按钮时调用

例子

```
function PostMe(){
    var myForm = $('form#id_of_your_form');

      $.ajax({
        url      : myForm.attr('action'),
        type     : 'post',
        data     : myForm.serialize(),
        cache    : false,
        success  : function(data) {
                        $('#user_tasks').html(data);    
                    }

      });
} 
```

和按钮

```
<button onclick="PostMe();">Async Post</button> 
```

# xcode - 将 URL 数组转换为 xcode 中的图像 url 数组

> ID：15353085
> 
> 赞同：0
> 
> 时间：2013-03-12T04:02:26.880
> 
> 标签：xcode, json, ios6, nsarray, nsdate

我有一个 URL 数组，这个数组是 JSON 解析的结果

```
 id=[s valueForKey:@"bid"];

    title=[s valueForKey:@"btitle"];

   author=[s valueForKey:@"author"];

    price=[s valueForKey:@"price"];

    image=[s valueForKey:@"image"]; 
```

在这里显示该图像数组（带有 URL 的数组到 tableviewcell 中）我将该数组转换为该单元格内的 NSdata-for row index() 方法，例如

NSData *imageData= [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[image objectAtIndex:indexPath.row]]];

所以然后我使用该图像数据在 tableviewcell 中显示图像..但是无论如何以数组格式显示内容，这样我就可以轻松使用它。

我想要以下格式的相同数组，

```
NSARRAY *a=[[ NSARRAY alloc]initWithObjects:[UIimage imagenamed:@"url1"],[UIimage imagenamed:@"url2"],nil]; 
```

有没有办法将该数据格式转换为数组格式？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:26:24.643

使用此代码将图像数据存储到数组中...

```
NSMutableArray *imagesArray = [[NSMutableArray alloc] init];
    for(int i = 0; i < [image count]; i++)
    {
        NSData *imageData= [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[image objectAtIndex:i]]];
        [imagesArray addObject:[UIImage imageWithData:imageData]];
    } 
```

**编辑：**

您必须使用此代码，您从字典中获取图像网址，但不是在 cellForRowAtIndexPath() 方法中...（*简单地说，在到达 cellForRow..() 方法之前，您需要这样做*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:20:02.770

使用[Linq-to-ObectiveC select 方法](https://github.com/ColinEberhardt/LinqToObjectiveC#select)，您可以将字符串数组转换为图像数组，如下所示：

```
NSArray* images = [urls select:^id(id url) {
    return [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]];
}]; 
```

# java - 多个超类和代码重用

> ID：15353086
> 
> 赞同：11
> 
> 时间：2013-03-12T04:02:43.010
> 
> 标签：java, android, inheritance

这个问题与 Android 有关，因为我的需求存在于那个领域，但这个问题仍然适用于整个 Java；我将在这里使用一些 Android 术语，例如`Activity`, `FragmentActivity`,`ListActivity`等...

我需要实现一个包含必须在整个应用程序中使用的功能的抽象基类，更具体地说，每个人都`Activity`必须使用此功能，但我希望它由基类自动处理。我的问题是我在应用程序中有许多不同类型的活动，例如`Activity`，`FragmentActivity`和`ListActivity`，所有这些都扩展`Activity`（当然减去`Activity`）。

由于基类中的代码对于每个实现都是完全相同的`Activity`，有没有办法避免代码重复并需要为每种类型创建一个基类`Activity`？

我试图避免的事情：

```
public abstract class BaseActivity extends Activity
{
    public void onCreate(Bundle savedBundle)
    {
        // code goes here, will be the exact same for all these base classes
    }
}

public abstract class BaseFragmentActivity extends FragmentActivity
{
    public void onCreate(Bundle savedBundle)
    {
        // code goes here, will be the exact same for all these base classes
    }
}

public abstract class BaseListActivity extends ListActivity
{
    public void onCreate(Bundle savedBundle)
    {
        // code goes here, will be the exact same for all these base classes
    }
}

public class MyMainActivity extends BaseActivity
{
}

public class MyUserList extends BaseListActivity
{
}

public class SomeActivityThatNeedsToBeAFragment extends BaseFragmentActivity
{
} 
```

我试图通过使用类似下面的东西来利用泛型

```
public abstract class BaseActivity<T extends Activity> extends T 
```

但显然那是行不通的；或者我只是做错了。那么有什么方法可以实现这种代码重用并避免重复，还是我只是简单地重复我的代码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:37:54.550

通常，使用 Fragments 可以帮助解决此类问题。在您的特定情况下，尽管我看到您也想使用 ListActivity。这让事情变得更难

如您所知，Java 在这里帮不了您。您不能继承多个实现（List 和 MyBase）。没有简单的答案。我可以建议两件事：

*   List(Activity,Fragment) 是对其基类的非常简单的扩展。您可以通过合理的工作量构建自己的，从您的基类继承。它们可能比框架中的更简单。也许这样就可以了。

*   代表。编写一个实现常见行为但不从 Activity/Fragment 继承的类。在片段/活动类的初始化期间创建这些对象之一。只要有共同行为，就将其委托给委托实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:15:28.587

创建一个名为`BaseActivity`. 实现`onCreate()`它，它应该涵盖活动操作的基础知识。创建从 扩展的其他类`BaseActivity`，并允许它们覆盖该方法，当且仅当它们做一些比 . 稍微特殊的事情时`BaseActivity`。

这里的主要思想是，`Activity`您拥有或创建的任何东西都以某种方式相互关联，它们执行类似的代码操作。只有在特殊情况下，您才需要做一些额外的事情，从而覆盖`onCreate()`.

# graphviz - 以编程方式在 networkx 的 pygraphviz/dot 包装器中指定相同等级的节点

> ID：15353087
> 
> 赞同：6
> 
> 时间：2013-03-12T04:02:49.267
> 
> 标签：graphviz, dot, networkx, pygraphviz

是否可以更改以下代码以将 Child_4 置于与 Grandchild_0 相同的水平级别（从而将 Grandchild_4 推到自己的级别）？

```
import networkx as nx
import matplotlib.pyplot as plt

G = nx.DiGraph()
G.add_node("ROOT")
for i in xrange(5):
    G.add_node("Child_%i" % i)
    G.add_node("Grandchild_%i" % i)
    G.add_edge("ROOT", "Child_%i" % i)
    G.add_edge("Child_%i" % i, "Grandchild_%i" % i)

pos=nx.graphviz_layout(G,prog='dot')
nx.draw(G,pos,arrows=False)
plt.show() 
```

上面的代码产生了以下布局，我想通过将孩子向下移动一级以与孙子水平对齐来改变它： ![img 显示一个根节点、五个子节点和每个子节点下的一个孙子节点](../Images/131d6d4b5412fe7219318118aebb8cc8.png)

* * *

在 Python 网络库 networkx 中，我使用 graphviz 的点引擎来渲染一棵树（遵循[这个建议](https://stackoverflow.com/questions/11479624/is-there-a-way-to-guarantee-hierarchical-output-from-networkx)）。我想通过指定哪些节点应该具有相同的高度来控制节点的 y 位置。节点可能位于树中的不同深度。

`rank=same`我知道如果我通过使用命令（例如，`{rank=same; n4 -> p2;}`[ [ex.](https://stackoverflow.com/questions/7374108/graphviz-node-placement-and-rankdir) ]）编写自己的graphviz 代码，我可以控制节点高度。但是，我依赖 networkx.graphviz_layout() [ [doc](http://networkx.github.com/documentation/latest/reference/generated/networkx.drawing.nx_agraph.graphviz_layout.html) | [source](http://networkx.github.com/documentation/latest/_modules/networkx/drawing/nx_agraph.html#graphviz_layout) ] 生成节点位置，graphviz_layout 只能向 pygraphviz 发送命令行参数。我尝试使用的变体`nx.graphviz_layout(G, prog='dot', args="-Grank=same; n4 -> p2;")`失败了。 ~~是否可以在 pygraphviz 的 NetworkX 包装器中描述所需的节点高度，还是我需要围绕 pygraphviz 编写自己的包装器？~~ *编辑：*答案为 pygraphviz 提供了一个新的包装器。它将显着简化在 pygraphviz 的现有 NetworkX 包装器中发送排名信息的事情。如果有人能告诉我这怎么可能，我会改变我接受的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:15:26.707

我找不到通过原始 networkx 包装器实现此目的的方法。

相反，我为 pygraphviz 编写了一个新的包装器，其中大部分行都是从[源代码复制而来的](http://networkx.github.com/documentation/latest/_modules/networkx/drawing/nx_agraph.html#pygraphviz_layout)。`sameRank = []`它为相同等级的节点列表添加了一个参数，并`for`围绕`pygraphviz.add_subgraph(listOfNodes,rank="same")`.

```
def graphviz_layout_with_rank(G, prog = "neato", root = None, sameRank = [], args = ""):
    ## See original import of pygraphviz in try-except block
    ## See original identification of root through command line
    A = nx.to_agraph(G)
    for sameNodeHeight in sameRank:
        if type(sameNodeHeight) == str:
            print("node \"%s\" has no peers in its rank group" %sameNodeHeight)
        A.add_subgraph(sameNodeHeight, rank="same")
    A.layout(prog=prog, args=args)
    ## See original saving of each node location to node_pos 
    return node_pos 
```

在问题示例中，Child_4 可以通过以下行推到与 Grandchild_0 相同的水平水平：

```
pos=graphviz_layout_with_rank(G, prog='dot',sameRank=[["Child_4","Grandchild_0"]]) 
```

# c++ - 在库中传递数组 Arduino

> ID：15353092
> 
> 赞同：0
> 
> 时间：2013-03-12T04:03:53.367
> 
> 标签：c++, c, arrays, windows, arduino

我正在尝试编写一个读取 5 个变量的库，然后通过串行端口将它们发送到蓝牙接收器，我遇到了许多错误，我不知道从哪里开始，我需要实现指针吗？

这是Arduino代码....

```
#include <serialComms.h>
serialComms testing;

void setup()
{
 Serial.begin(9600); 
}
char data[] = {1,2,3,4,5,6};

void loop()
{

 for(int t = 0;t<6;t++)
 {
  data[t] = data[t]++; 
 }
  testing.updateUser(data);
  delay(250);

} 
```

serialComms.cpp

```
#include <Arduino.h>
#include <serialComms.h>

void serialComms::init()
{
  // This is where the constructor would be...right now we are too stupid to have one
}

void serialComms::readAllBytes()  // Target Pin,Values
{
}
 void serialComms::assignBytes()
{
  for(int t  = 0;t<5;t++)
  {
    digitalWrite(12,HIGH);
    delay(250);
    digitalWrite(12,LOW);
  }   
}
void serialComms::updateUser(char t[])
{
    Serial.write(t,5);
} 
```

serialComms.h

```
#ifndef serialComms_h
#define serialComms_h
/* serialComms Class */
class serialComms
{
  public:
       serialComms() {};
void init();
void readAllBytes(); // Will be used to create the array --> two variables for now...
void assignBytes();
void updateUser(char t[]);
    };
#endif 
```

这是我遇到的错误... - serialComms.cpp:28: error: initializing argument 1 of 'virtual size_t Print::write(const uint8_t*, size_t)'

```
- 
- serialComms.cpp:28: error: invalid conversion from 'char*' to 'const uint8_t*'
- serialComms.cpp: In member function 'void serialComms::updateUser(char*)':
- serialComms.cpp:27: error: expected primary-expression before ']' token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:33:13.253

Serial.write 只能发送常量字符串，例如

```
Serial.write(“hello”); 
```

这就是错误错误的原因：从 'char*' 到 'const uint8_t*' 的无效转换

用于

```
char temp[max_length];
sprintf(temp,"%s",t);
Serial.write(temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:22:35.080

例子：

```
 void setup()
{

  Serial.begin(9600);
  char string_array[] = "hello";
  char data_array[] = {1,2,3,4,5,6};
  unsigned char data_array_uchar[] = {21,22,23,24,25,26};
  uint8_t uint8_array[] = {11,12,13,14,15,16};
  char alpha_array[] = {0x41,0x42,0x43,0x44,0x45,0x46};
  // take note that sizeof() is a precompile command... number of places/size of each place.

  updateUserPrint(string_array);
  updateUserWrite(data_array, sizeof(string_array));
  updateUserWriteUchar(data_array_uchar, sizeof(data_array_uchar));
  updateUserWriteUchar(uint8_array, sizeof(uint8_array));
  updateUserWriteUint(uint8_array, sizeof(string_array));
  updateUserAlpha(alpha_array, sizeof(string_array));
}
void updateUserPrint(char *s)
{  //note a string aka array of char's is ended with a null.
  Serial.print(s); // this can detect.
  Serial.println();
}
void updateUserWrite(char *t, size_t len)
{  //note an array of int's is not ended with a null. so you need to know how long it is.
  for (int n = 0; n < len ; n++) {
    Serial.print(t[n],DEC);
    Serial.print(",");
  }
  Serial.println();
}
void updateUserWriteUchar(unsigned char *t, size_t len)
{  //note an array of int's is not ended with a null. so you need to know how long it is.
  for (int n = 0; n < len ; n++) {
    Serial.print(t[n],DEC);
    Serial.print(",");
  }
  Serial.println();
}
void updateUserWriteUint(uint8_t *t, size_t len)
{  //note an array of int's is not ended with a null. so you need to know how long it is.
  for (int n = 0; n < len ; n++) {
    Serial.print(t[n],DEC);
    Serial.print(",");
  }
  Serial.println();
}
void updateUserAlpha(char *t, int len)
{  //note an array of int's is not ended with a null. so you need to know how long it is.
  for (int n = 0; n < len ; n++) {
    Serial.write(t[n]);
  }
  Serial.println();
} 
```

产生以下内容：

```
hello
1,2,3,4,5,6,
21,22,23,24,25,26,
11,12,13,14,15,16,
11,12,13,14,15,16,
ABCDEF 
```

# java - 以编程方式生成 BPEL 文件？

> ID：15353097
> 
> 赞同：7
> 
> 时间：2013-03-12T04:04:26.637
> 
> 标签：java, eclipse, eclipse-plugin, bpel

有没有办法在 Java 中以编程方式生成 BPEL？

我尝试使用 BPEL Eclipse Designer API 来编写这段代码：

```
 Process process = null; 
 try {

        Resource.Factory.Registry reg =Resource.Factory.Registry.INSTANCE;

        Map<String, Object> m = reg.getExtensionToFactoryMap();

        m.put("bpel", new BPELResourceFactoryImpl());//it works with XMLResourceFactoryImpl()

         //create resource

         URI uri =URI.createFileURI("myBPEL2.bpel");

         ResourceSet rSet = new ResourceSetImpl();

          Resource bpelResource = rSet.createResource(uri);

          //create/populate process

          process = BPELFactory.eINSTANCE.createProcess();

          process.setName("myBPEL");

          Sequence mySeq = BPELFactory.eINSTANCE.createSequence();

          mySeq.setName("mainSequence");

          process.setActivity(mySeq);

          //save resource

          bpelResource.getContents().add(process);

          Map<String,String> map= new HashMap<String, String>();
          map.put("bpel", "http://docs.oasis-open.org/wsbpel/2.0/process/executable");
          map.put("tns", "http://matrix.bpelprocess");
          map.put("xsd", "http://www.w3.org/2001/XMLSchema");
          bpelResource.save(map);

    }

    catch (Exception e) {

          e.printStackTrace();

    }

} 
```

但我收到一个错误：

> `INamespaceMap cannot be attached to an eObject`...

我读了西蒙的[这条消息](http://dev.eclipse.org/mhonarc/lists/bpel-dev/msg01101.html)：

> 我知道在 Eclipse 之外使用 BPEL 模型可能是可取的，但我们从来没有打算这样做。因此，这不受支持

是否有任何其他 API 可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:56:05.350

您可能想尝试一下[JAXB](http://jaxb.java.net/)。它可以帮助您将官方的 BPEL XSD 转换为 Java 类。您使用这些类来构建您的 BPEL 文档并输出它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:59:42.177

我在使用 BPELUnit [1] 时遇到了完全相同的问题，因此我在 BPELUnit 中启动了一个模块，该模块具有生成和读取 BPEL 模型 [2] 所需的首要条件，尽管它远未完成。仅支持 BPEL 2.0（1.1 将在稍后推出），并且目前也不支持处理程序（但将被添加）。它正在积极开发中，因为 BPELUnit 的代码覆盖组件将基于它，因此它会随着时间的推移完成 BPEL 功能。如果您需要更早地缩小差距，我们很乐意邀请​​您做出贡献。

您可以从 GitHub 上查看它或获取 Maven 工件。

到目前为止，还没有文档，但您可以查看读取和写入进程的 JUnit 测试。

如果这不适合，我想和你分享一些经验：

1.  不要使用 JAXB：您将需要读取和写入 JAXB 未保留的 XML 命名空间。这就是我选择 XMLBeans 的原因。DOM 将是我能想到的另一种选择。

2.  XML Schema 中的继承对开发人员并不友好。这就是为什么围绕 XMLBeans 生成的类有自己的接口结构和包装器的原因。

丹尼尔

[1] [http://www.bpelunit.net](http://www.bpelunit.net)
[2] [https://github.com/bpelunit/bpelunit/tree/master/net.bpelunit.model.bpel](https://github.com/bpelunit/bpelunit/tree/master/net.bpelunit.model.bpel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-15T07:47:30.190

在添加必要的类来处理相关性之后，使用[统一框架 API](http://soft.vub.ac.be/svn-gen/unify/src/org/unify_framework/instances/bpel/)解决了这个问题。@Daniel 所说的 BPELUnit 似乎是另一种选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T07:43:49.197

Eclipse BPEL API 基于 EMF 模型。因此，您可以在此基础上使用 JET 或 Xpand 生成您自己的工件。这样就不需要在 Eclipse 中运行。

尽管您可能无法在 Eclipse 之外使用 BPEL，但您是否考虑过在其中移动应用程序的某些部分？

BPEL XML 模式列在[规范](http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html)的附录中。因此，您还可以在此基础上开展工作，并在必要时与现有的 BPEL 应用程序集成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T21:22:13.380

如果有人希望在 eclipse 环境中运行时解决上述问题。

**如Luca Pino** 所说，可以通过添加以下内容来解决该[问题](https://www.eclipse.org/forums/index.php?t=msg&th=175677&goto=1045039&#msg_1045039)：

```
AdapterRegistry.INSTANCE.registerAdapterFactory( BPELPackage.eINSTANCE, BasicBPELAdapterFactory.INSTANCE ); 
```

在资源创建行之前，即

```
Resource bpelResource = rSet.createResource(uri); 
```

**注意：**针对同一问题的另一种解决方案，也说明了如何解决依赖关系以使此代码工作，可以在我的其他答案中[找到](https://stackoverflow.com/questions/5166287/framework-for-generating-bpel-in-runtime/37942758#37942758)。

# shell - 异步确定shell成功？

> ID：15353099
> 
> 赞同：0
> 
> 时间：2013-03-12T04:04:37.190
> 
> 标签：shell, posix

如果符合 POSIX 的 shell 无法执行命令，它会立即以 status 退出`127`。

是否可以立即确定这样的 shell 已成功执行命令*而无需*等待命令（以及 shell）退出？（不是命令的退出状态！）特别是我在考虑这样的命令`xterm`在用户选择终止它们之前不会退出。

如果这不能便携地完成，它可以非便携地完成吗？在 Linux 下，还是只使用 Bash 或其他一些 shell 子集？

# php - Wordpress 中的 PHP If & Else 语句

> ID：15353102
> 
> 赞同：0
> 
> 时间：2013-03-12T04:04:52.687
> 
> 标签：php, html, wordpress, graphical-logo

我试图弄清楚如何在 Wordpress 中执行 if else 语句。我希望它说明是否`$data[0]['media_upload']`为空，然后显示博客标题。否则*（如果有的话）*在 Wordpress 中显示徽标。我想知道我是否有错误的语法。

现在我有以下显示博客标题并且没有错误但我确实上传了一张图片但由于某种原因它没有显示。任何想法都会很棒！

```
<?php
if (empty($data[0]['media_upload'])) {
echo'<h1 class="site-title"><a href="';
  esc_url( home_url( '/' ) );
echo'" title="';
  esc_attr( get_bloginfo( 'name', 'display' ) );
echo'" rel="home">';
  bloginfo( 'name' );
echo'</a></h1>';
}

else{
echo '<a href="';
  bloginfo('siteurl');
    echo '">';
echo'<img src="';
  global $data; 
  $data['media_upload']; 
echo'" /></a>';
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:15:42.327

尝试将： `$data['media_upload'];` 在您的 else 中更改为：`$data[0]['media_upload'];` 就像您在 if 语句中一样（或相反）。我们真的不知道 $data 是什么，因此很难为您提供帮助。

编辑：由于我还不能发表评论，所以我会在这里发表评论。尝试使用[橡皮鸭技术](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)；向我们解释代码中的 $data 对象发生了什么。也许你会自己弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:12:56.967

它应该是

```
echo'<img src="';
global $data; 
$data[0]['media_upload']; 
      ^ // you forgot 0th index
echo'" /></a>'; 
```

# arrays - 在actionscript中对具有相同值的数组进行分组

> ID：15353103
> 
> 赞同：1
> 
> 时间：2013-03-12T04:04:52.980
> 
> 标签：arrays, actionscript-3

我有一个数组：

```
var exArr:Array = [5,6,10,6,5,11,7,9,12,8,8,13,7,9,14]; 
```

我想排列：

```
var resultArr:Array = [5,6,7,8,9,10,11,12,13,14]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:12:56.273

这可能对你有用。

```
var a:Array = [5,6,10,6,5,11,7,9,12,8,8,13,7,9,14];
a.sort();
var i:int = 0;
while(i < a.length) {
    while(i < a.length+1 && a[i] == a[i+1]) {
        a.splice(i, 1);
    }
    i++;
} 
```

其他的，[看这里](http://englishblog.flepstudio.org/tutorials/removing-duplicate-elements-of-array-with-actionscript-3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:51:24.817

尝试这个：

```
var exArr:Array = [5,6,10,6,5,11,7,9,12,8,8,13,7,9,14];

function group(subject:Array):Array
{
    var base:Array = subject.slice().sort(Array.NUMERIC);
    var prev:Number = base[0];

    for(var i:int = 1; i < base.length; i++)
    {
        if(base[i] === prev)
        {
            base.splice(i, 1);
            i--;
        }

        prev = base[i];
    }

    return base;
}

trace( group(exArr) ); 
```

# android - Android 中的日期格式

> ID：15353108
> 
> 赞同：0
> 
> 时间：2013-03-12T04:05:11.780
> 
> 标签：android, sqlite

如何将这种格式的日期转换为`mm/dd/yyyy`在`yyyy-mm-dd`Android 中将数据保存到 SQLite 数据库时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:19:51.950

然后你可以使用 Calendar 对象。

```
 Calendar cal=Calendar.getInstance(); 
```

您可以使用检索相同

```
 long date=cursor.getLong(cursor.getColumnIndex("expired_date"));
      Calendar cal=Calendar.getInstance();
      cal.clear();
      cal.setTimeInMillis(date); 
```

有关各种日期格式，请参阅此链接 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

```
 Calendar cal=Calendar.getInstance();
     String date_time=String.format("%1$tY  %1$tB %1$te,%1$tI:%1$tM:%1$tS %1$Tp",cal);
     Toast.makeText(getApplicationContext(),date_time,Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T04:29:02.013

```
SimpleDateFormat  new_format= new SimpleDateFormat("yyyy-MM-dd);
SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy");

Date date;
String local_date = null;
try{
    date = sdf.parse(value);

    local_date = new_format.format(date);

}catch(ParseException e)
{

e.printStackTrace();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:41:52.030

看看这段代码..这将解决您有关日期时间转换的所有疑问..

```
 public static String convertDateStringFormat(String currentFormat,
            String newFormat, String strDate) {
        SimpleDateFormat dateFormat = new SimpleDateFormat(currentFormat);
        Date date = null;
        try {
            date = dateFormat.parse(strDate);
        } catch (ParseException e) {
            CommonFunctions.DoCatchOperation(e);
        }

        String newFormatString = convertDateToString(newFormat, date);
        return newFormatString;
    }

    public static Date convertStringToDate(String dateFormatter, String strDate) {
        SimpleDateFormat dateFormat = new SimpleDateFormat(dateFormatter);
        Date date = null;
        try {
            date = dateFormat.parse(strDate);
        } catch (ParseException e) {
            CommonFunctions.DoCatchOperation(e);
        }
        return date;
    }

    public static String convertDateToString(String dateFormatter, Date date) {
        if (date == null)
            return "";
        else {
            SimpleDateFormat dFormat = new SimpleDateFormat(dateFormatter);
            return dFormat.format(date);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T04:09:34.407

```
public String formatDate(String value) {

    SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy",
            Locale.US);

    Date date;
    String dateformat = "";
    try {
        date = sdf.parse(value);
        sdf.applyPattern("yyyy-mm-dd");
        dateformat = sdf.format(date);
    } catch (Exception e) {
        return "";
    }

    return dateformat;

} 
```

# assembly - Turbo Assember 的高级循环？

> ID：15353118
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:06:21.937
> 
> 标签：assembly, tasm

我创建了一个程序，它将输出以下字母：

```
W
V
U
T
S
R 
```

这是我正在使用的代码：

```
.model small
.stack 100h
.data

M DB 'W'

.CODE

MAIN PROC FAR
MOV AX, @DATA
MOV DS, AX
MOV AX, 003H
INT 10H

MOV CX, 6
X:
MOV AH, 02
MOV DL, M
INT 21H
DEC M

MOV AH, 2
MOV DL, 10
INT 21H
MOV DL, 13
INT 21H
LOOP X

MOV AH, 4CH
INT 21H

MAIN ENDP
END MAIN 
```

我希望输出看起来像这样：

```
W
VW
UVW
TUVW
STUVW
RSTUVW 
```

我是这种编程语言的新手，我真的很难尝试学习它。

更新：请看下面的代码。

```
.model small
.stack 100h
.data

.CODE
; mov     I, 0 
; WhileLp:        cmp     I, 100
; jge     WhileDone
; inc     I
; jmp     WhileLp

; for (CX = 6; CX != 0; CX--) {
    ; for (BL = 0; BL != 7-CX; BL++) {
        ; putchar(M+BL);
; }    
    ; M--;
    ; putchar(10);
    ; putchar(13);
; }

M DB 'W'

MAIN PROC FAR
MOV AX, @DATA
MOV DS, AX
MOV AX, 003H
INT 10H

MOV CX, 6
WHILECX:

MOV AL, 7
WHILEBL: 
SUB CL, AL
CMP BL, CL
JGE WHILEDONE
MOV AH, 02
MOV DL, M
INT 21H
MOV DL, BL
INT 21H
INC BL
JNE WHILEBL
DEC M

WHILEDONE:
MOV AH, 2
MOV DL, 10
INT 21H
MOV DL, 13
INT 21H
LOOP WHILECX

MOV AH, 4CH
INT 21H

MAIN ENDP
END MAIN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:00:46.870

在当前循环中放置另一个循环（您不必为此使用`LOOP`指令），它打印`7-CX`以 M 开头的字符。
因此，在外循环的第一次迭代中，您将执行内循环 7-6 == 1时间，它将打印'W'。下一次您将执行内部循环 7-5 == 2 次，M 的初始值为“V”，因此您将打印“VW”。等等。

整个事情的伪代码：

```
for (CX = 6; CX != 0; CX--) {
    for (BL = 0; BL != 7-CX; BL++) {
        putchar(M+BL);
    }
    M--;
    putchar(10);
    putchar(13);
} 
```

# html - 左侧浮动 div 的 100% 背景，其中另一个右侧浮动 div 超过左侧

> ID：15353123
> 
> 赞同：0
> 
> 时间：2013-03-12T04:06:49.640
> 
> 标签：html, css

我使用的 HTML...

```
<div id="left">
   few contents here
</div>
<div id="right">
   more contents here
</div> 
```

我应用的CSS...

```
#left{float: left; width: 300px; background: red;}
#right{float: right; width 600px; background: green;} 
```

我不想在`#left`内容中指定高度，因为内容的更大内容`#right`是什么？所以，我用过`height: 100%;`，`#left`但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:09:05.053

您还需要增加容器元素的高度，所以试试这个

```
html, body {
   height: 100%;
} 
```

[**演示**](http://jsfiddle.net/GEKDN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:52:32.080

这是你的解决方案

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>
    <style type="text/css">
    html, body {
        height: 100%;
    }
    #left {
        float: left;
        width: 300px;
        background: red;
        height:100%
    }
    #right {
        float: right;
    width 600px;
        background: green;
        height:100%
    }
    </style>
    <body>
    <div id="left"> few contents here </div>
    <div id="right"> more contents here </div>
    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:01:12.787

通常在 CSS 中，我们需要固定/知道任一侧的高度......但是仍然有很多环形交叉路口。 **解决方法：**将一侧的边框作为另一侧的背景。

```
<html>
<head>
    <title></title>
    <style type="text/css">

    #container { width: 800px; margin-left: auto; margin-right: auto; }
    #wrapper {
        display: inline-block;
        border-left: 200px solid #efacec;
    }
    #left {
        float: left;
        width: 160px;
        margin-left: -190px;
        margin-right: 200px;
        position: relative;            
    }
    #right {
        float: right;
        width: 200px;
        background-color: lightblue;
    }    
    </style>
</head>
<body>
    <div id="container">
        <div id="wrapper">
            <div id="left">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                </p>
            </div>
            <div id="right">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                </p>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:29:56.410

好的试试这个[http://jsfiddle.net/7KhXd/1/](http://jsfiddle.net/7KhXd/1/)

这是html摘要：

```
<div id="container">
    <div id="left-nav">
        <!-- left nav content-->
    </div>
    <div id="main"> 
        <div>
            <!-- main body contnent-->
        </div>
    </div>
</div> 
```

CSS：

```
#container {
  background-color: grey;
  width: 1000px;
}

#main {
  margin-left:20em;

  background-color: white;
  padding-left: 2em;
}

#main > div {
  background-color: grey; /* so that main has the same color as nav bar if necessary */
}

#left-nav {
  width: 19em;
  float: left;
} 
```

**解释：** 这个想法是你不要让左侧导航栏与主体的长度相同。而是希望它*看起来*好像是相同的长度。你可以通过给它一个背景颜色来实现这一点延伸与主体相同的长度（不管它有多短）..

所以你有一个容器div（即包装器div）并给它一个背景颜色..并创建一个主div并给它一个左边距，在那个左边距你漂浮在导航栏中..

这样，两者中最长的一个（主栏或导航栏）..另一个将具有相同的背景颜色..您只需放置一个填充以在视觉上将它们分开

# matlab - 如何将一系列 3D 数组中的元素分配到单个向量中？

> ID：15353137
> 
> 赞同：0
> 
> 时间：2013-03-12T04:08:06.063
> 
> 标签：matlab

所以我希望第三列的所有 6 个元素都进入一个包含 6 个元素的向量。我该怎么做？

![在此处输入图像描述](../Images/5abab29493b3326aaf9c8743eebd8e44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:21:59.047

您可以使用 (:) 运算符将 nD 矩阵折叠为单个向量。对于您的示例，请执行以下操作：

```
mat = (50 < seals(:, 3, 1)) & (seals(:, 3, 1) < 100)
vec = mat(:); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:25:09.297

首先，您不能像您那样使用比较运算符与区间进行比较。我建议你尝试运行这段代码：

```
x = 1:10;
4 < x < 7 
```

在我的系统上我得到了答案

```
ans =

 1     1     1     1     1     1     1     1     1     1 
```

我怀疑这不是你想要的。解决方案是像这样划分你的条件

```
(4 < x) & (x < 7) 
```

给予

```
ans =

 0     0     0     0     1     1     0     0     0     0 
```

正如预期的那样。

现在，回到你的实际问题。如果您知道生成的向量应该有多少个元素，那么您可以使用`reshape`：

```
mask = (50 < seals(:, 3, 1)) & (seals(:, 3, 1) < 100)
x = nanmean(seals(mask, :, :));
v = reshape(x(:, 3, :), 6, 1); 
```

但是，在这种情况下，您使用搜索条件来查找要选择的值，因此可能事先不知道最终向量的长度。然后另一种选择是首先检索您想要的值，然后使用冒号运算符将它们重塑为向量，`(:)`如下所示：

```
mask = (50 < seals(:, 3, 1)) & (seals(:, 3, 1) < 100)
x = nanmean(seals(mask, :, :));
y = x(:, 3, :);
v = y(:); 
```

在这两种情况下，我还引入了一个单独的选择蒙版以略微提高可读性。

# mysql - 如何从多态 MySQL 表中检索数据

> ID：15353139
> 
> 赞同：0
> 
> 时间：2013-03-12T04:08:19.813
> 
> 标签：mysql, sql, polymorphic-associations

我在 MySQL 中有三个表：`application`、`questions`和`questions_answer`.

`application`商店`user_id`；`questions`商店`question_id`和`type of questions`（即姓名、身份证、学校名称）；`questions_answer`存储对和的`answers`引用。`user_id``question_id`

据我了解，这种类型的关联称为多态关联。现在我不知道如何从不同的 question_id 检索数据并将它们作为列标题。

我希望这是有道理的。

编辑：

为了说明，以下是相应的表格：

`application`：

```
user_id         name
-------------------------------
100             Leon Barnacles
101             Richard Kennard
102             Fareeza Salleh 
```

`questions`：

```
question_id     question_name
---------------------------------------------   
20              NRIC
21              Have you ever applied to TFM?
22              What's your current GPA?
23              Name of school 
```

`questions_answer`：

```
question_id     user_id     answer
------------------------------------------------
20              100         880808-06-8990
20              100         900990-14-0911
23              102         SMK Taman Pandamaran 
```

我希望检索的内容：

```
Name                NRIC                Name of school
------------------------------------------------------------
Leon Barnacles      880808-06-8990      
Richard Kennard     900990-14-0911
Fareeza Salleh                          SMK Taman Pandamaran 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:55:38.753

你需要的是一个`PIVOT`类型函数，MYSQL 不像 SQL Server 或 Oracle 那样支持 PIVOT。您可以使用以下脚本来实现对问题表数据的`pivot`使用`max and case`

```
select group_concat(concat('max(case when question_id = ''', question_id, ''' then
             answer end) as `', question_name ,'`')) into @sql from tfm_questions;

set @sql = 
concat('select full_name, ', @sql, ' from 
          (
             select a.full_name, q.question_name, an.answer, q.question_id
             from tfm_application a
             inner join tfm_questions_answer an on a.user_id = an.user_id
             inner join tfm_questions q on an.question_id = q.question_id
          ) x
       group by full_name');

select @sql;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

[SQL 演示](http://sqlfiddle.com/#!2/004b8/18)

# c++ - 未调用重写的虚拟方法

> ID：15353140
> 
> 赞同：0
> 
> 时间：2013-03-12T04:08:28.643
> 
> 标签：c++, inheritance, arduino, abstract-class

我正在尝试创建一个抽象类，其他一些类可以作为 arduino 项目的基础。但是，每当我调用基础中的虚拟方法时，它只会调用基础实现。代码如下。谁能看到我做错了什么？

```
#define RTCBASE 0
class RTC_Base {
public:
  virtual uint8_t begin(void){ return 0; };
  virtual void adjust(const DateTime& dt){};
  virtual DateTime now(){ return DateTime(); };
  virtual int Type(){ return RTCBASE; };
};
////////////////////////////////////////////////////////////////////////////////
// RTC based on the DS1307 chip connected via I2C and the Wire library
#define DS1307 1
class RTC_DS1307 : public RTC_Base 
{
public:
  virtual int Type(){ 
    return DS1307; 
  }
  uint8_t begin(void);
  void adjust(const DateTime& dt);
  uint8_t isrunning(void);
  DateTime now();
  uint8_t readMemory(uint8_t offset, uint8_t* data, uint8_t length);
  uint8_t writeMemory(uint8_t offset, uint8_t* data, uint8_t length);

};

///In Code
RTC_Base RTC = RTC_DS1307();
DateTime dt = RTC.now();
//The above call just returns a blank DateTime(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:15:52.640

你有代码：

```
RTC_Base RTC = RTC_DS1307();
DateTime dt = RTC.now(); //The above call just returns a blank DateTime(); 
```

那是[对象切片](http://en.wikipedia.org/wiki/Object_slicing)（正如@chris 最初猜测的那样）。为了使[多态性](http://www.cplusplus.com/doc/tutorial/polymorphism/)起作用，您必须假装派生类是基类，将*指针或引用*视为基类，而实际上它是派生类的地址。（因为 Derived 实际上包含其中的 Base）。

```
Derived myDerived;
Base &myBaseRef = myDerived;

myBaseRef.myVirtualFunction(); 
```

否则，您将创建一个 Derived，并尝试将字节强制转换为 Base，并丢失所有 Derived 的字节。这样不好！=)

关键是，您实际上不应该*将*Derived 转换为 Base，而只是像访问 Base 一样访问 Derived。如果将其转换为基础，则它*是*基础。并且您的 Base 类返回一个空的 DateTime。

要使用动态分配的内存执行此操作，您可以执行以下操作：

```
Base *myBase = nullptr; //Or 'NULL' if you aren't using C++11
myBase = new Derived;

myBase->myVirtualFunction(); //Dereference the myBase pointer and call the function.

delete myBase; //Free the memory when you are finished. 
```

如果您使用的是 C++11，您可以让[std::unique_ptr](http://www.cplusplus.com/reference/memory/unique_ptr/?kw=unique_ptr)为您处理对象的生命周期，因此您不必记住调用“删除”：

```
std::unique_ptr<Base> myBase;

//Later...
myBase = new Derived;
myBase->myVirtualFunction();

//Automatically freed when the myBase smart pointer goes out of scope... 
```

# django - 如何在 Django DateField 中仅保留日期部分

> ID：15353144
> 
> 赞同：1
> 
> 时间：2013-03-12T04:09:22.540
> 
> 标签：django

我在下面的模型类中定义了一个 DateField，我只想将它用作 Date 类型，根本没有时间部分。但是，一旦我以 YYYY-MM-DD 格式加载数据，它就会自动添加 12:00:00 AM。

FromDate = models.DateField（空白=真，空=真）

我尝试了[Django DateField 默认选项](https://stackoverflow.com/questions/2029295/django-datefield-default-options)的解决方案，例如 date = models.DateField(_("Date"), default=date.today) 但 syncdb 让我

NameError：名称“_”未定义

Django 版本 1.2.1 和 1.4.2 都有相同的错误。

我错过了什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:02:58.583

也许您的数据库已经将该列创建为日期时间？例如，如果您首先`DateTime`在模型中有一个字段，然后运行`syncdb`​​，然后将模型更改为 use ，则可能会发生这种情况`Date`。

如果是这种情况，请尝试修改您的数据库表，或删除它并重新运行`syncdb`。

# php - symfony 2.1.7 中的 Gregwar Captcha 错误

> ID：15353152
> 
> 赞同：1
> 
> 时间：2013-03-12T04:10:40.310
> 
> 标签：php, captcha, symfony-2.1

我安装了 GregwarCaptcha 包并在控制器中添加了以下代码

```
$form = $this->createFormBuilder()
                ->add('captcha', 'captcha', array(
                            'width' => 200,
                            'height' => 50,
                            'length' => 6,
                        ));
    return $this->render('MyIndexBundle:Default:contact.html.twig',array(
                      'form' => $form->createView()

                    )); 
```

模板中的以下代码

```
{% form_theme form 'MyIndexBundle:Default:captcha.html.twig' %}
 <form action="" method="post">
   ........
  {{ form_widget(form.captcha) }}
  .......
   </form> 
```

captcha.html.twig 是

```
{% block captcha_widget %}
{% spaceless %}
 <img src="{{ captcha_code }}" alt="" title="captcha" width="{{ captcha_width }}" height="{{ captcha_height }}" />
 ...
 {{ form_widget(form, {'attr': { 'autocapitalize': 'off','autocorrect': 'off' }}) }}
  ...
 {% endspaceless %}
 {% endblock %} 
```

我收到“对象“Symfony\Component\Form\FormView”不存在的“方法“验证码”错误。...如果我使用 captcha.html.twig，我直接得到验证码不存在...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:37:55.750

我管理使用 gregwar 验证码，使用它是这样的：

首先，添加`new Gregwar\CaptchaBundle\GregwarCaptchaBundle(),`到您的`AppKernel.php`

然后添加以下代码`config.yml`

```
gregwar_captcha:
  width: 200
  height: 50
  length: 6 
```

然后，添加`->add('captcha', 'captcha')`到您的`$builder`

最后，添加`{{ form_widget(form.captcha) }}`树枝模板。

所以我两个都没`form_theme`用`captcha.html.twig`

这工作得很好。

# python - Python Azure GetSharedAccessSignature

> ID：15353153
> 
> 赞同：1
> 
> 时间：2013-03-12T04:10:43.050
> 
> 标签：python, azure

适用于 Azure 的 Python SDK 不必`GetSharedAccessSignature`生成 aceess 签名。

我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:39:19.470

您是否在 Github 上查看过[Azure SDK for Python的源代码，尤其是这个：](https://github.com/WindowsAzure/azure-sdk-for-python) [https](https://github.com/WindowsAzure/azure-sdk-for-python/blob/master/src/azure/storage/sharedaccesssignature.py) ://github.com/WindowsAzure/azure-sdk-for-python/blob/master/src/azure/storage/sharedaccesssignature.py 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T19:02:22.553

上面的链接好像坏了。我发现这个文档真的很有帮助，而且有点难找： [http ://azure.github.io/azure-storage-python/](http://azure.github.io/azure-storage-python/)

# xml - 通过 Flex 操作 XML 数据

> ID：15353154
> 
> 赞同：1
> 
> 时间：2013-03-12T04:10:51.497
> 
> 标签：xml, actionscript-3, apache-flex

我正在制作一个程序，将玩家添加到舞台上，我可以添加或减去分数。我想我已经接近完成了，除了一些事情，我在屏幕上看不到我的球员姓名，而且我在显示分数时遇到了问题。单击按钮时分数会增加和减少，但显示标签不显示它们。这是我现在的整个程序。有点乱，所以我提前道歉。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx"       applicationComplete="init()">
<fx:Style source="style.css.css"/>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:XML id="playerData" source="data/data.xml" />
    <s:XMLListCollection id="playerList" source="{playerData.player}" />
</fx:Declarations>

<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    @namespace mx "library://ns.adobe.com/flex/mx";

    s|Button { color:#F2E9E9; }

    s|Label { color:#f2e9e9; }

    #outterBorder { backgroundColor:F7FEF9; }
</fx:Style>
<s:BorderContainer id="outterBorder" x="328" y="48" width="307" height="547">
    <s:Image x="269" y="10"/>
    <s:Label x="25" y="19" width="107" height="21" text="Score Keeper" color="#000000"/>
    <s:BorderContainer id="innerBorder" x="10" y="58" width="285" height="477">
        <s:TextInput id="myTextBox" x="10" y="425" width="138" />
        <s:Button id="add" x="176" y="425" width="97" label="Add Player" click="addPlayer()" />
        <s:HGroup id="group1" x="10" y="10" width="263" height="92" >
        </s:HGroup>
        <s:HGroup id="group2" x="10" y="114" width="264" height="92">
        </s:HGroup>
        <s:HGroup id="group3" x="10" y="214" width="263" height="92">
        </s:HGroup>
        <s:HGroup id="group4" x="10" y="313" width="263" height="92">
        </s:HGroup>
    </s:BorderContainer>

</s:BorderContainer>

<fx:Script>
    <![CDATA[

        //Gabe Dougherty
        //n222
        //Midterm
        //3-8-13

        public var myPlayerLabel:Label = new Label;
        public var myScoreLabel:Label = new Label;
        public var myIncScore:Button = new Button;
        public var myDecScore:Button = new Button;
        public var myPlayerDelete:Button = new Button;
        public var myScore:Number = 0;
        public var numPlayers:Number = 0;

        public function init():void {
            var file:File = File.desktopDirectory.resolvePath("newPlayer.xml");
            var stream:FileStream = new FileStream()
            stream.open(file, FileMode.READ);

            var str:String = stream.readUTFBytes(stream.bytesAvailable);
            stream.close();

            playerData = XML(str);
            myPlayerLabel.text = playerData;

            //re-enable myDecScore
            myDecScore.enabled = true;

        }

        public function addPlayer():void {
            var file:File = File.desktopDirectory.resolvePath("newPlayer.xml");

            var stream:FileStream = new FileStream();
            stream.open(file, FileMode.WRITE);

            var str:String = playerData.toString();

            stream.writeUTFBytes(str);
            stream.close(); 

            //set all player info
            //make playerLabel
            var playerLabel:Label = new Label();

            //make scoreLabel
            var scoreLabel:Label = new Label();
            scoreLabel.text = String(myScore);

            //make decScore
            var decScore:Button = new Button();
            decScore.label = "-";
            decScore.addEventListener(MouseEvent.CLICK, decrementScore);

            //make incScore
            var incScore:Button = new Button();
            incScore.label = "+"
            incScore.addEventListener(MouseEvent.CLICK, incrementScore);

            //make playerDelete
            var playerDelete:Button = new Button();
            playerDelete.label = "Delete";
            playerDelete.addEventListener(MouseEvent.CLICK, deletePlayer);

            numPlayers++;
            if(numPlayers == 1) {

                group1.addElement(playerLabel);
                group1.addElement(scoreLabel);
                group1.addElement(decScore);
                group1.addElement(incScore);
                group1.addElement(playerDelete);
            } else if(numPlayers == 2) {

                group2.addElement(playerLabel);
                group2.addElement(scoreLabel);
                group2.addElement(decScore);
                group2.addElement(incScore);
                group2.addElement(playerDelete);
            } else if(numPlayers == 3) {

                group3.addElement(playerLabel);
                group3.addElement(scoreLabel);
                group3.addElement(decScore);
                group3.addElement(incScore);
                group3.addElement(playerDelete);;
            } else if(numPlayers == 4) {

                group4.addElement(playerLabel);
                group4.addElement(scoreLabel);
                group4.addElement(decScore);
                group4.addElement(incScore);
                group4.addElement(playerDelete);
            }

            //add a new player from text input
            var newPlayer:XML = <player></player>;

            newPlayer.@name = myTextBox.text;

            playerData.appendChild(newPlayer);

            myPlayerLabel.text = newPlayer;

        }

        public function deletePlayer():void {
            delete playerData.players.player;

            //not sure of the right syntax for deleting a node but I think this is right?
        }

        public function decrementScore(e:MouseEvent):void {
            myScore--;

            myScoreLabel.text = String(myScore);
            if(myScore == 0) {

                myDecScore.enabled = false;
                myDecScore.alpha = .5;
            }
            trace(myScore);
        }

        public function incrementScore(e:MouseEvent):void {
            myScore++;

            myScoreLabel.text = String(myScore);
            trace(myScore);

        }
    ]]>
</fx:Script>
</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:29:43.810

确实有点难以理解。

我看到以下可能的错误：

*   a`myPlayerLabel`似乎永远不会添加到显示列表中。（没有`addElement(myPlayerLabel)`）
*   a`playerLabel`添加到显示列表但`text`从未设置。（没有`playerLabel.text = "a string"`）
*   您将整个 XML 对象分配给`myPlayerLabel.text`，而不是其`name`属性。

除了这些错误之外，我看不出为什么所有这些都应该用 ActionScript 编写。如果这些按钮和标签只是在 MXML 中实例化，您的代码会更加透明。

# java - 关于让这些列排列的任何想法（Java）？

> ID：15353157
> 
> 赞同：0
> 
> 时间：2013-03-12T04:11:06.680
> 
> 标签：java, for-loop

我正在练习用 Java 编写循环。这是我到目前为止所拥有的：

```
 int a = 0;
    int b = 0;
    int c = 0;
    int d = 0;
System.out.println ("Num  "+"Square  "+"Num  "+"Square  "+"Num  "+"Square  "+"Num  "+"Square  ");
    for (int x = 1; x<=20; x++) {
                a = x * 1;
                b = 20+a;
                c = 40+a;
                d = 60+a;
               for (int y = 1; y <= 1; y++) {
System.out.println (a + "     " + (a * a) + "      " + b + "   " + (b * b) + "      " + c +
             "     " + (c * c) + "      " + d + "     " + (d * d));
              }

         } 
```

我根本不想更改代码（这意味着我不想添加比我已经拥有的更复杂的东西），但我希望列对齐。当数字开始以数字增加时，显然间距会变得混乱。有想法该怎么解决这个吗？

编辑：要回答您的问题，我对此很陌生，并且没有自学过更多。我非常确定有更好的方法可以做到这一点，但我只是在练习我的 for 循环。任何人，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:21:44.897

您可以使用 tab( `\t`) 对其进行格式化。双标签将为您的情况提供更多空间。

```
// Changed Num to Number - Out of habit
System.out.println("Number\t\t" + "Square\t\t" + "Number\t\t" + "Square\t\t" + "Number\t\t" + "Square\t\t" + "Number\t\t" + "Square");

System.out.println(a + "\t\t" + (a * a) + "\t\t" + b + "\t\t" + (b * b) + "\t\t" + c + "\t\t" + (c * c) + "\t\t" + d + "\t\t" + (d * d)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:29:13.173

```
public String appendBlankSpace(int val){
String returnValue=Integer.toString(val);
int lengthTobeAppend=10-returnValue.length();
//Here you can use any number instead of 10.It is for space allocated for a column

for(int i=1;i<=lengthTobeAppend;i++){
returnValue= " " + returnValue;
}

return returnValue;
} 
```

现在你可以使用，

```
System.out.println (appendBlankSpace(a) + appendBlankSpace(a * a) +       appendBlankSpace(b) + appendBlankSpace(b * b) +  appendBlankSpace(c) + appendBlankSpace(c *     c) + appendBlankSpace(d) + appendBlankSpace(d * d)); 
```

我希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:21:59.840

您可以将 a、b、c、d 值存储在数组中，例如内部循环

```
 for (int x = 1; x<=20; x++) {
                a = x * 1;
                b = 20+a;
                c = 40+a;
                d = 60+a;
               int [] array = {a,b,c,d}

               //using enhanced for loop
               for(int ele : array){
                     System.out.println(ele +"\t\t"+ ele*ele)
                 } 
} 
```

输出将如下所示：

2 4

3 9

4 16

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T04:41:15.633

使用 printf。

```
public class Squarely {
    public static void main(String[] args) {
        for (int x = 1; x <= 20; ++x) {
            int a = x, b = 20+x, c = 40+a, d = 60+a;
            System.out.printf("%6d %6d %6d %6d %6d %6d %6d %6d%n",
                    a, a*a, b, b*b, c, c*c, d, d*d);
        }
    }
} 
```

# javascript - 为 Closure Compiler 问题注解 JavaScript

> ID：15353159
> 
> 赞同：4
> 
> 时间：2013-03-12T04:11:10.577
> 
> 标签：javascript, google-closure-compiler, strong-typing

我在 externs 文件中有以下 typedef：

```
/** @typedef ({eventNameArray: Array.<string>,eventArrayIndex: number}) */
var triggerNextData; 
```

希望它用作 triggerNext 函数的传递参数（将触发下一个事件）。eventNameArray（字符串数组）和 eventArrayIndex 都是必需的。

这是期望该类型的 triggerNext 函数：

```
/** 
* @type {function(triggerNextData)}
*/
triggerNext: function(data){
...
} 
```

当我这样称呼它时：

```
mediator.triggerNext("hi there"); 
```

我按预期收到警告，但警告说 eventNameArray 是可选的：

> 找到：需要字符串：{eventArrayIndex: number, eventNameArray: (Array.|null)} mediator.triggerNext("hi there");

不知何故，它不接受它需要一个字符串数组（类型数组未显示），并且该数组是可选的。

以下不会产生任何警告：

```
mediator.triggerNext({eventNameArray:null,eventArrayIndex:0});
mediator.triggerNext({eventNameArray:[22,33],eventArrayIndex:0}); 
```

我想知道如何将 eventNameArray 键入为强制的字符串数组，可以这样做吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:28:05.760

从closuretools.blogspot.co.uk/2012/02/type-checking-tips.html逐字复制，因为“谢谢你的建议。太糟糕的blogspot在中国被封锁了，所以无法阅读。我看到了很多有关此的文章在 blogspot 上但看不到”

Closure Compiler 的类型语言有点复杂。它具有联合（“变量 x 可以是 A 或 B”）、结构函数（“变量 x 是返回数字的函数”）和记录类型（“变量 x 是具有属性 foo 和 bar 的任何对象”）。

很多人告诉我们，这仍然不够表达。有很多方法可以编写不完全适合我们的类型系统的 JavaScript。人们建议我们应该添加混入、特征和匿名对象的事后命名。

这对我们来说并不特别令人惊讶。JavaScript 中的对象规则有点像 Calvinball 的规则。您可以随时更改任何内容，并制定新规则。很多人认为一个好的类型系统可以给你一种强有力的方式来描述你的程序的结构。但它也给了你一套规则。类型系统确保每个人都同意什么是“类”、什么是“接口”以及“是”的含义。当您尝试向无类型的 JS 添加类型注释时，您不可避免地会遇到我头脑中的规则与您头脑中的规则不太匹配的问题。没关系。

但令我们惊讶的是，当我们给人们这种类型系统时，他们经常会找到多种方式来表达同一件事。有些方法比其他方法效果更好。我想我会写这篇文章来描述人们尝试过的一些事情，以及他们是如何解决的。

函数与函数（）

有两种方式来描述一个函数。一种是使用 {Function} 类型，编译器将其字面解释为“任何对象 x 其中 'x instanceof Function' 为真”。A`{Function}`是故意糊状的。它可以接受任何参数，并返回任何东西。您甚至可以在其上使用“新”。编译器将允许您随意调用它而不会发出警告。

结构函数更加具体，让您可以细粒度地控制函数的功能。A`{function()}`没有参数，但我们不在乎它返回什么。A`{function(?): number}`返回一个数字并只接受一个参数，但我们不关心该参数的类型。当你用“new”调用它时， A`{function(new:Array)}`会创建一个数组。我们的类型文档和 JavaScript 样式指南有更多关于如何使用结构函数的示例。

很多人问我们是否`{Function}`气馁，因为它不太具体。实际上，它非常有用。例如，考虑 的定义`Function.prototype.bind`。它可以让你对函数进行柯里化：你可以给它一个函数和一个参数列表，它会给你一个带有“预填充”参数的新函数。我们的类型系统不可能表示返回的函数类型是第一个参数类型的转换。所以 JSDoc on`Function.prototype.bind`说它返回 a `{Function}`，编译器必须有手工编码的逻辑才能找出真正的类型。

也有很多情况下你想传递一个回调函数来收集结果，但结果是特定于上下文的。

```
rpc.get(‘MyObject’, function(x) {
  // process MyObject
}); 
```

如果你传递的回调参数必须对它得到的任何东西进行类型转换，那么“rpc.get”方法就更加笨拙了。所以通常更容易给参数一个 {Function} 类型，并相信调用者类型不值得类型检查。

对象与匿名对象

许多 JS 库定义了一个包含许多方法的全局对象。该对象应该有什么类型的注释？

```
var bucket = {};
/** @param {number} stuff */ bucket.fill = function(stuff) {}; 
```

如果你来自 Java，你可能会想给它类型 {Object}。

```
/** @type {Object} */ var bucket = {};
/** @param {number} stuff */ bucket.fill = function(stuff) {}; 
```

这通常不是你想要的。如果你添加一个“@type {Object}”注解，你不仅仅是告诉编译器“bucket is an Object”。你告诉它“桶可以是任何对象”。所以编译器必须假设任何人都可以将任何对象分配给“桶”，并且程序仍然是类型安全的。

相反，您通常最好使用@const。

```
/** @const */ var bucket = {};
/** @param {number} stuff */ bucket.fill = function(stuff) {}; 
```

现在我们知道桶不能分配给任何其他对象，并且编译器的类型推理引擎可以对桶及其方法进行更强大的检查。

一切都可以只是记录类型吗？

JavaScript 的类型系统并没有那么复杂。它有 8 种具有特殊语法的类型：null、undefined、boolean、number、string、Object、Array 和 Function。有些人注意到记录类型允许您定义“具有属性 x、y 和 z 的对象”，而 typedef 允许您为任何类型表达式命名。所以在两者之间，您应该能够使用记录类型和 typedef 定义任何用户定义的类型。这就是我们所需要的吗？

当您需要一个函数来接受大量可选参数时，记录类型非常有用。所以如果你有这个功能：

```
/**
 * @param {boolean=} withKetchup
 * @param {boolean=} withLettuce
 * @param {boolean=} withOnions
 */
function makeBurger(withKetchup, withLettuce, withOnions) {} 
```

你可以让它更容易像这样调用：

```
/**
 * @param {{withKetchup: (boolean|undefined),
            withLettuce: (boolean|undefined),
            withOnions: (boolean|undefined)}=} options
 */
function makeBurger(options) {} 
```

这很好用。但是当你在一个程序的很多地方使用相同的记录类型时，事情会变得有点麻烦。假设您为 makeBurger 的参数创建了一个类型：

```
/** @typedef  {{withKetchup: (boolean|undefined),
                withLettuce: (boolean|undefined),
                withOnions: (boolean|undefined)}=} */
var BurgerToppings;

/** @const */
var bobsBurgerToppings = {withKetchup: true};

function makeBurgerForBob() {
  return makeBurger(bobsBurgerToppings);
} 
```

后来，Alice 在 Bob 的库之上构建了一个餐厅应用程序。在一个单独的文件中，她尝试添加洋葱，但搞砸了 API。

```
bobsBurgerToppings.withOnions = 3; 
```

Closure Compiler 会注意到 bobsBurgerToppings 不再匹配 BurgerToppings 记录类型。但它不会抱怨 Alice 的代码。它会抱怨 Bob 的代码出现类型错误。对于非平凡的程序，Bob 可能很难弄清楚为什么类型不再匹配。

一个好的类型系统不仅仅表达关于类型的契约。它还为我们提供了一种在代码违反合同时分配责任的好方法。因为一个类通常定义在一个地方，编译器可以找出是谁破坏了类的定义。但是，当您有一个匿名对象被传递给许多不同的函数，并且具有从许多不同的地方设置的属性时，对于人类和编译器来说，要找出谁在破坏类型契约要困难得多。

作者：软件工程师 Nick Santos

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:36:56.417

[`null`默认情况下，所有对象都可以](https://developers.google.com/closure/compiler/docs/js-for-compiler)：

> 默认情况下，所有对象类型都可以为空，无论它们是否使用 Nullable 运算符声明。

你可以`!`说它应该是一个非空值：

```
@typedef ({eventNameArray:!Array.<string>, eventArrayIndex:number}) 
```

至于数组的元素是字符串，我还不知道。

# c# - 如何创建一个 Windows 服务来安排一些任务，比如删除某个文件夹上的文件？

> ID：15353160
> 
> 赞同：1
> 
> 时间：2013-03-12T04:11:12.153
> 
> 标签：c#, windows, visual-studio-2010, windows-services

嗨，我对 Windows 服务比较陌生。我想创建一个计划任务，该任务将通过某个文件夹（如 c://dev/）并删除在某个日期/时间之间创建的文件。我怎样才能做到这一点？任何帮助真的很受欢迎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:15:33.857

检查这个'forfiles'命令：[批处理文件删除超过N天的文件](https://stackoverflow.com/questions/51054/batch-file-to-delete-files-older-than-n-days)

然后，您可以将您希望的命令存储到 .bat 文件中，并设置 Windows 任务计划程序以运行该文件。

如果您想使用 Windows 服务执行此操作，请检查：[http ://www.c-sharpcorner.com/blogs/7224/deleting-a-file-after-7-days-using-windows-services.aspx](http://www.c-sharpcorner.com/blogs/7224/deleting-a-file-after-7-days-using-windows-services.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:54:09.087

如果您想从 Windows 服务运行**自定义调度程序**，您可以尝试[Quartz](http://quartz-scheduler.org/overview)开源调度服务库。然后，您可以定义[CRON 触发器](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)以在需要时触发。我已经在用 C# 开发的 Windows 服务中使用了它，它非常出色。这些[教程](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/)将让您快速启动并运行。

对于 Windows 服务本身，您可以查看上面@mostruash 的文章，甚至可以查看这篇[文章](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)。您可以根据自己的意愿轻松自定义基本模板。

# php - PHP MySQL生成唯一随机数

> ID：15353166
> 
> 赞同：3
> 
> 时间：2013-03-12T04:11:43.063
> 
> 标签：php, mysql, database

我不明白为什么我的代码不起作用。连接工作正常，但是当我尝试生成一个唯一的随机数并从 MySQL 检查该数字是否存在时，它仍然会打印出一个随机数，但它不是唯一的。有人可以帮我吗？这是我的代码：

```
$num = rand(1,5);
$sel_query  = "SELECT *  FROM  test"; 
$result2 =  $con->query($sel_query);

$i = 1;
for (;$i<2; $i++)
{
    while($row = mysqli_fetch_array($result2))
    {
        if ($row['id'] == $num) 
        {
             $num = rand(1,5);
             $i = 0; 

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:44:38.097

这应该有效：

```
$is_unique = false;
$num = false;
while (!$is_unique){
    $num = rand(1,5);
    $sel_query  = "SELECT id from test where id = " . $num; 
    $result2 =  $con->query($sel_query) or die($conn->error);
    if (!mysqli_fetch_array($result2)){
        $is_unique = true;
    }
}
echo "Unique number is " . $num; 
```

但如果没有更多可能的唯一数字，它将永远循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T20:22:11.660

我知道这有点老了，但在需要类似的答案后我发现了这个问题。我接受了 Jodes 的回答并稍微更新了它，这样它就不会永远运行，它是一个返回数字的函数，并接受一个 mysqli 连接作为 $mysqli：

```
function getUniqueNumber($mysqli)
{
    $is_unique = false;
    $num = false;
    $times_run = 0;
    while (!$is_unique)
    {
        if($times_run > 10)
        {
            echo "Run too many times, dying.";
            die();
        }
        $num = rand(1,5);
        $sel_query  = "SELECT id from test where id = " . $num; 
        $result2 =  $mysqli->query($sel_query) or die($mysqli->error);
        if (!mysqli_fetch_array($result2))
        {
            $is_unique = true;
        }
        $times_run++;
    }
    return $num;
} 
```

# c++ - C++ 随机和数组

> ID：15353169
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:11:53.477
> 
> 标签：c++, random

我尝试将随机函数用于不同的事情。现在它可以工作，但我遇到一个问题是我想在我的代码中随机生成 F 但它们之后需要变成数组。我也需要使用它，如果我需要一个一个地做，我认为我的代码会太长而且太乱。你知道我该怎么做吗？

```
#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;
int main(){
    srand(time(0));
    //random numbers 1 to 10 for Time:
    int t = rand() % 10 + 1 ;
    cout << "There is "<< t << " Time;
    int* F1 = new int [t];
    int* F2 = new int [t];
    int* F3 = new int [t];
    int* F4 = new int [t];
    int* F5 = new int [t];
    cout << "Time per F: 0 Not available, 1 available;
    //For F1
    for(int i = 0; i < t; i++){
        //random numbers 0 or 1:
        F1[i] = rand() % 2 ;
    }
    cout << "The Time for F1 is ";
    for(int a = 0; a < t; a++){
        cout << " "<< F1[a] <<" ";
    } 
    //For F2
    for(int j = 0; j < t; j++){
        //random numbers 0 or 1:
        F2[j] = rand() % 2 ;
    }
    cout << "The Time slot for F2 is ";
    for(int b = 0; b < t; b++){
        cout << " "<< F2[b] << " ";
    }
    return 0;
} 
```

谢谢

编辑：你给我的解决方案有助于找到我做的解决方案 int F[em][t];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:49:57.407

> 我尝试将随机函数用于不同的事情。

随机的东西，大概。

> 现在它可以工作，但我遇到一个问题是我想在我的代码中随机生成 F 但它们之后需要变成数组。

您可以像生成值一样生成它`t`。

```
const int number_of_fs = rand() % 10 + 1;
std::cout << "Working with " << number_of_fs << " Fs" << std::endl; 
```

> 我也需要使用它，如果我需要一个一个地做，我认为我的代码会太长而且太乱。你知道我该怎么做吗？

你的代码已经太长太乱并且有内存泄漏。您应该使用标准[容器库](http://en.cppreference.com/w/cpp/container)中的容器，而不是指向永远不会得到`delete`d 的指针的指针。

例如，如果您使用 a `std::map`of `std::vector`s，您的代码可能如下所示：

```
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <iterator>
#include <map>
#include <vector>

int main(){
    srand(time(0));
    //random numbers 1 to 10 for Time:
    const int t = rand() % 10 + 1;
    std::cout << "There is "<< t << " Time" << std::endl;
    const int number_of_fs = rand() % 10 + 1;
    std::cout << "Working with " << number_of_fs << " Fs" << std::endl;

    std::map<int, std::vector<int> > f;

    std::cout << "Time per F: 0 Not available, 1 available" << std::endl;

    for (int f_slot = 1; f_slot <= number_of_fs; ++f_slot) {
        for(int i = 0; i < t; i++){
            //random numbers 0 or 1:
            f[f_slot].push_back(rand() % 2);
        }
        std::cout << "The Time for F" << f_slot << " is " << std::endl;
        std::copy(f[f_slot].begin(), f[f_slot].end(), 
            std::ostream_iterator<int>(std::cout, " "));
        std::cout << std::endl;
    }
} 
```

[看它跑](http://liveworkspace.org/code/3DapKz%241)！

当然，这些容器内容的填充和打印可能应该被提取到单独的函数中，但我不想*完全*重写你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:41:56.377

[由于您使用的是 C++，并且可以访问标准库，因此可以像std::vector](http://www.cplusplus.com/reference/vector/vector/?kw=vector)一样写得更干净：

```
#include <iostream>
#include <ctime>
#include <cstdlib>
#include <iostream>
#include <vector>

using namespace std;
int main()
{
    srand(time(0));

    //Random number from 3 to 7
    int numberOfVectors = (rand() % 7) + 3;

    //Random number from 1 to 10.
    int size = (rand() % 10) + 1;

    std::cout << "There are " << numberOfVectors << " vectors." << std::endl;
    std::cout << "Each vector has " << size  << " elements." << std::endl;

    std::vector< std::vector<int> > vectorOfVectorOfInt;

    std::cout << "Value per element: 0 = Not available, 1 = available" << std::endl;

    for(int vec = 0; vec < numberOfVectors; vec++)
    {
        //Create a new vector with 'size' elements.
        std::vector<int> newVector(size);

        for(int i = 0; i < size; i++)
        {
            //Generate a random value between 0 and 50
            newVector[i] = (rand() % 50);
        }

        //Add the vector to our vector-of-vectors.
        vectorOfVectorOfInt.push_back(newVector);

        std::cout << "The values for Vector #" << (vec+1) << " is:";
        for(int b = 0; b < size; b++)
        {
            int value = vectorOfVectorOfInt[vec][b];
            std::cout << "\t" << value;
        }
        std::cout << std::endl;
    }

    return 0;
} 
```

您可以运行它并在此处查看结果：http: [//ideone.com/RWQhjO](http://ideone.com/RWQhjO)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:19:03.600

使用数组数组：

```
#include <ctime>
#include <cstdlib>
using namespace std;
int main(){
   srand(time(0));
    //random numbers 1 to 10 for Time:
    int t = rand() % 10 + 1 ;
    cout << "Time per F: 0 Not available, 1 available";
    const int f_num = 5;
    cout << "There is "<< t << "Time";
    int* F = new int*[f_num];
    for(int i = 0; i < f_num; i++){
       F[i] = new int[t];
       cout << "The Time for F"<<i<<" is :";
       for(int j = 0; j < t; j++){
          //random numbers 0 or 1:
          F[i][j] = rand() % 2 ;
          cout << " "<< F1[i][j] <<" ";
       }
    }
} 
```

顺便说一句，您的代码类似于 C。在 C++ 中，我们通常使用`std::vector`代替普通数组，并使用[http://en.cppreference.com/w/cpp/numeric/random](http://en.cppreference.com/w/cpp/numeric/random)代替 rand() 。另外，不要使用`using namespace std`. 这可能会导致名称冲突。

# ruby-on-rails - 橡胶在 create_staging Bundler::GemfileNotFound ec2 期间失败

> ID：15353173
> 
> 赞同：0
> 
> 时间：2013-03-12T04:12:15.967
> 
> 标签：ruby-on-rails, ruby, amazon-ec2, ruby-on-rails-4, rubber

这是我第一次将应用程序部署到 ec2 实例。似乎大部分过程都有效，但最终部署失败并出现以下错误：

```
failed: "/bin/bash -l -c 'cd /mnt/depot-production/releases/20130312030226 && bundle install --gemfile /mnt/depot-production/releases/20130312030226/Gemfile --path /mnt/depot-production/shared/bundle --deployment --quiet --without development test staging'" on production.foo.com 
```

我登录到我的服务器并转到目录并尝试执行命令。显示以下错误：

```
Bundler::GemfileNotFound 
```

当我列出目录的内容时，它会显示一个 gemfile。只是可以使用一些帮助来确定为什么找不到它以及如何修复它。

我也不确定如何进行？我想简单地修复错误并继续创建的实例，但不确定需要执行哪些步骤。

# php - 如何在使用php的body标签之前动态注入javascript代码？

> ID：15353178
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:12:39.123
> 
> 标签：php, javascript

我正在使用我自己构建的自定义 mvc 框架。我想问一下我们如何将javascript文件动态包含到我的页面底部？

创建帐户页面 (createaccount.php)

```
<?php include('header.php'); ?>

<div class="container maincontainer">
<h3>Create an Account </h3>

<?php include('footer.php'); ?> 
```

我的标签在footer.php 中。

我有另一个页面叫做

登录页面 (login.php)

```
<?php include('header.php'); ?>

<div class="container maincontainer">
<h3>Login </h3>

<?php include('footer.php'); ?> 
```

基本上，这 2 个页面使用不同的 javascript 文件。我想为不同的页面包含不同的js。注意：他们使用相同的footer.php文件

我可以编写任何函数/方法来根据特定页面将 js 代码动态注入到 footer.php 吗？非常感谢专家的建议！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:28:30.740

我通常通过在脚本的每一页上创建一个数组来注入页脚来处理这种情况：

创建帐户.php

```
<?php
$scripts = array('foo.js', 'bar.js');

include('header.php'); ?>

<!-- page specific content -->

<?php include('footer.php'); ?> 
```

登录.php

```
<?php
$scripts = array('http://example.com/baz.js');

include('header.php'); ?>

<!-- page specific content -->

<?php include('footer.php'); ?> 
```

页脚.php

```
<!-- whatever your footer content is -->

<?php
// script injection
foreach ($scripts as $url) { ?>
  <script src="<?=$url?>"></script>
<?php } ?>
</body>
</html> 
```

这将允许您根据需要在每个页面上包含尽可能多或少的脚本。

通常我有一个 php 文件，它会首先包含在所有页面上，以处理数据库连接、会话等，并包括`$scripts = array()`那里的初始化；那么默认情况下，每个页面都将`$scripts`初始化为一个空数组，因此如果需要使用它，则只需要在页面本身上进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:19:08.893

您可以尝试在您的 footer.php 中添加以下内容

```
 <?php 
      $path = $_SERVER['PHP_SELF'];
      $file_info = pathinfo($path);
      $file_name = $file_info['file_name'];

      if($file_name == 'createaccount.php'){
         echo "<script src = 'your_script.js'></script>";
      }else if($file_name == 'login.php'){
         echo "<script src = 'another_script.js'></script>";
      }

    ?> 
```

如果有很多动态脚本，您也可以使用开关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:16:43.670

也许`$script`在您的页面中创建一个存储脚本的 var ...然后在您的页脚中执行`if($script) echo $script;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T04:23:45.780

如果您的脚本仅用于该页面，则没有理由不能`<script>`在包含页脚之前添加标签：

```
<script type="text/javascript">
// your code here
</script>
<?php include('footer.php'); ?> 
```

在脚本被评估时，您需要在脚本中引用的任何元素都已经添加到 DOM 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T04:27:18.203

我认为，为不同的页面使用不同的 js 文件不会是一个明智的选择。

由于浏览器会在下载后缓存 js 文件。

但是，您可以对特定页面使用内联 js。

保留要包含的 page_id 和 js 代码的哈希（php 中的数组）

在您`footer.php`的标签之前`</body>`，内联打印与该 page_id 链接的 js 代码。

例如

```
$scripts = array('page1' => 'page1 js code', 'page2' => 'page2 js code'); 
```

就在`footer.php`之前`</body>`，

```
`echo '<script type="text/javascript">';
 echo $scripts['page1'];
 echo '</script>'; 
```

`if/else`在这种情况下你不需要任何东西。

# php - 您如何在配置中为您的自定义 magento 主题提供自己的区域？

> ID：15353180
> 
> 赞同：1
> 
> 时间：2013-03-12T04:12:56.490
> 
> 标签：php, magento, themes, magento-1.7

我是 magento 主题的新手，我刚刚完成了我的第一个主题。然而，页面上的很多内容都是静态的。例如页脚、滑块等中的一些链接。就将主题分发给其他人而言，最好的方法是让他们在 magento 中编辑此信息，或者作为配置区域、静态块、小部件等。

安装主题后，我将如何制作一个静态块并将其安装在 magento 中？

您将如何在 magento 配置中创建一个区域，用户可以在其中自定义主题中的某些选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:46:59.757

您可能知道可以在 modules`sql`目录中为模块创建的数据库安装脚本，但是从 1.6 CE 开始，您还可以在`data`模块目录中创建数据安装脚本，这允许您执行您想要安装的各种事情- 所以你可以用它来创建一个静态块。[这里](http://inchoo.net/ecommerce/magento/using-magento-1-6-data-install-scripts/)有一个快速的总结。这里的一个限制是主题将仅限于 Magento CE 1.6 及更高版本。还可以查看 1.6+ 中 Mage_Cms 模块数据目录中的数据安装脚本。

在 1.6 以下，您将不得不使用数据库安装脚本直接操作数据库，这不是一个优雅的解决方案，我不推荐它。

关于让用户为主题配置选项，看看添加一个`system.xml`和可选的`adminhtml.xml`（因为这个内容也可以放入`config.xml`）文件到模块`etc`目录中以及`config.xml`. `system.xml`允许您将带有配置选项的新选项卡和页面添加到管理员的系统 -> 配置部分，并`adminhtml.xml`允许您为这些菜单项配置 acl。看看[这里](http://alanstorm.com/custom_magento_system_configuration)。

# python - Python：文件处理程序问题：删除文件而不留下 .nsf 文件

> ID：15353189
> 
> 赞同：2
> 
> 时间：2013-03-12T04:13:44.470
> 
> 标签：python, logging, nsfilehandle

我有以下方法来处理我的 python 程序中的日志记录

```
def createLogger(logger, logLang):
    """
    Setting up logger
    """
    log_format = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")
    file_handler = logging.FileHandler(filename=(os.path.join(OUT_DIR_LOGS, logLang + '-userdynamics.log')))
    file_handler.setFormatter(log_format)
    logger.setLevel(logging.INFO)
    logger.addHandler(file_handler) 
```

这是一个大型数据收集代码库，为了避免远程服务器上的配额限制，我实现了以下 gzip 和 tar 程序，

```
def gzipLogs(lang):
    """
    Compressing and tar
    """
    # Compressing logfiles and removing the old logfile
    original_filePath = OUT_DIR_LOGS + "/" +lang + "-userdynamics.log"
    gzip_filePath = OUT_DIR_LOGS + "/" + lang +"-userdynamics.gz"
    with open(original_filePath , 'rb') as original_file:
        with gzip.open(gzip_filePath, 'wb') as zipped_file:
            zipped_file.writelines(original_file)
    os.remove(original_filePath)
    # Compressing language folders that has data
    folder_path = OUT_DIR + "/" + lang
    tar_file = tarfile.open(folder_path + ".tgz", "w:gz")
    # add timestamp to arch file
    tar_file.add(folder_path, arcname = NOW + "_" + lang)
    tar_file.close()
    # delete the original file
    shutil.rmtree(folder_path) 
```

我在嵌套的 for 循环中进行数据收集过程，并按如下所述调用记录器：

```
for something in somethings:
    for item in items:
        log = logging.getLogger()
        # Calling the logging configuration function.
        createLogger(log, lang) 
```

一切正常，但是当它被执行时，在删除文件 .nsf 文件残留物后会留下，同时导致配额问题保持原样。

所以我添加了以下代码段来关闭日志文件处理程序，但现在我最终得到以下错误：

关闭日志文件的代码：

```
unclosed_logs = list(log.handlers)
for uFile in unclosed_logs:
    print uFile
    log.removeHandler(uFile)
    uFile.flush()
    uFile.close() 
```

上面的代码最终给了我这个错误：

```
Traceback (most recent call last):
  File "/somefilepath/SomePythonFile.py", line 529, in <module>
    main()
  File "/somefilepath/SomePythonFile.py", line 521, in main
    gzipLogs(lang)
  File "/somefilepath/SomePythonFile.py", line 61, in gzipLogs
    with gzip.open(gzip_filePath, 'wb') as zipped_file:
AttributeError: GzipFile instance has no attribute '__exit__' 
```

这是处理程序关闭代码段时 main 方法的样子：

```
for something in somethings:
    for item in items:
        log = logging.getLogger()
        # Calling the logging configuration function.
        createLogger(log, lang)
    unclosed_logs = list(log.handlers)
    for uFile in unclosed_logs:
        print uFile
        log.removeHandler(uFile)
        uFile.flush()
        uFile.close() 
```

我究竟做错了什么？我处理记录器是否错误？还是我过早关闭文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:08:23.427

有很多事情可能会导致问题：

1.  您应该只在程序的一处配置日志记录（例如设置级别、添加处理程序），最好从`if __name__ == '__main__'`子句中配置。你似乎没有这样做。请注意，您可以使用`WatchedFileHandler`和使用外部旋转器来旋转日志文件 - 例如[logrotate](http://linux.die.net/man/8/logrotate)提供旋转和压缩功能。
2.  您的错误`__exit__`与日志记录无关 - 它可能与 Python 版本问题有关。`GZipFile`仅在 Python 2.7 / 3.2 中可用`with`- 在旧版本中，如果您尝试`GZipFile`在`with`语句中使用 a，您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:14:54.077

经过一番研究，我意识到我正在执行该文件的服务器是针对 python 2.6 运行的，而在 2.6 GZip 模块中没有`with open`. 要回答这个问题，要么切换到 python 2.7，要么将实现更改为 try catch 块中的老式文件打开文件。

```
try:
    inOriginalFile = open(original_filePath, 'rb')
    outGZipFile = gzip.open(gzip_filePath, 'wb')
    try:
        outGZipFile.writelines(inOriginalFile)
    finally:
        outGZipFile.close()
        inOriginalFile.close()
except IOError as e:
    logging.error("Unable to open gzip files, GZIP FAILURE") 
```

这就是我解决这个问题的方法。

# php - 维护数据库的最佳方法是什么？更少的表有很多行还是很多表有更少的行？

> ID：15353191
> 
> 赞同：-2
> 
> 时间：2013-03-12T04:13:45.903
> 
> 标签：php, sql, mysqli

维护数据库的最佳方法是什么？更少的具有数十万（或数百万）行的表或许多具有数千行的表？我正在创建一个网站，该网站将有一个可以达到数十万（可能是数百万）行的表格。但是，我想把它分成 10-15 个表，每个表都有几千行。这是正确的方式还是我应该选择一张桌子。需要提到的是，在这两种情况下，数据管理对我来说都不是问题。我担心性能问题。此外，将所有表（将创建以代替一个大表）放在同一个数据库中是否很好，或者我可以创建 2-3 个数据库，每个数据库中有 4-5 个表？在同一网页上访问多个数据库会影响性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:27:29.350

我不相信这个问题非常适合这个网站的格式。因此，它可能最终被关闭。但是当它打开时，我会这样回答：

没有关于什么是“最好”的规则。

我建议遵循一些简单的原则。

1.  **提防过早的优化**——在你能证明它是一个重要的瓶颈之前不要优化。

2.  **以自然的方式使用数据库**- 如果您按照设计的工作方式使用数据库，那么数据库非常擅长解决如何做好事情。也就是说，使用它以适合所表示的数据的方式对数据进行建模。

3.  **从接口中抽象出数据库**- 如果可能，尝试以这样一种方式编写代码，即如果将来需要，底层数据库模型可以更改，而无需重写整个程序。

4.  **使用武力**——相信你的直觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:30:30.710

您是否探索过 NoSql 数据库，例如 Couchbase？这些水平扩展，无需执行您的建议。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-12T04:22:29.277

想想你未来的查询......你将如何使用这些表？....您要检索哪些数据...以及按什么顺序...您要搜索表格...我总是被教导最快的数据排序方法...是存储它预先排序...如果可以的话

# windows - 为 Windows 主题创建 UI 主题

> ID：15353192
> 
> 赞同：1
> 
> 时间：2013-03-12T04:13:57.017
> 
> 标签：windows, winforms

有没有办法为 Windows 窗体创建像 Telerik、DevExpress 这样的 UI 组件。.NET 框架中是否有任何特定的命名空间。如果有，请在此处添加它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:16:28.267

最接近主题的 Winforms 是默认情况下继承父级 UI 属性的子控件。不过，这很直截了当。3rd 方控件集确实允许主题化，但您不会在股票 .NET BCL 中看到类似的东西。

但是，通过一些巧妙的子类化，您可以创建自己的一组“主题”控件。假设您不想在第 3 方套餐上花费 $。您可以选择一组标准的 Winforms 控件，用您自己的类继承每个控件，例如 KalgTextBox、KalgForm 等。然后让每个类使用像 SetTheme 这样的单一方法实现一个接口，如 IKalgThemedUi，该方法接受一个 KalgTheme 对象并将其传递给它的孩子，如果有的话，或者像 KalgTheme 这样的单个属性，它在 getter 上会完全按照方法的作用。KalgTheme 对象当然会包含您的控制集的所有主题信息。主题可以根据您的需要简单或复杂。

几个主题/皮肤代码示例：

*   [一个不错但先进的框架](http://www.codeproject.com/Articles/33716/Fancy-Windows-Forms#themes)
*   [一个简单但不是很好的框架](http://www.codeproject.com/Articles/7566/Net-Win-Forms-Themes)
*   [类似 CSS 的实现](http://www.codeproject.com/Articles/14814/StylesSheetManager-A-CSS-like-component-for-WinFor)

# ios - UICollectionView 更改方向不正确的单元格数

> ID：15353199
> 
> 赞同：0
> 
> 时间：2013-03-12T04:14:38.237
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

我有一个 UICollectionView 在纵向模式下显示 2 列，然后当 iPhone 旋转到横向时，它显示 4。但是，当设备旋转回纵向模式时，它会尝试显示 3 列。因此它正确显示 2 列，并且仅显示第三列的四分之一，因为它不适合。有没有人遇到过这种情况，你是如何解决的？我原以为它应该自动解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:58:10.420

我设法通过在我的 UICollectionViewCell 上禁用自动布局来解决我的问题。事实证明，我的单元格不需要自动布局，因为布局是固定的，不会因设备或方向而改变。

# c# - 将通用方法参数转换为特定类型

> ID：15353200
> 
> 赞同：2
> 
> 时间：2013-03-12T04:14:44.887
> 
> 标签：c#, linq, generics, lambda, expression

给定一个采用以下参数的通用方法`Get<T>`...

```
Expression<Func<T,bool>> foo 
```

在该方法主体中，我想测试“T”是否为 typeof(Stuff)，如果是，则进行转换：

```
Expression<Func<Stuff,bool>> boo = (???) foo; 
```

我期望的第一反应是“不需要投射它，`Stuff`如果传入它就已经是类型了。” 但是我发现在方法调度方面不是这样！！

所以是的，我需要测试和投射，但不知道如何。

以下是为什么以及在何处需要这样做的背景。

我有这样的代码：

```
public class Stuff {
    public int Alpha;
}

interface ISomething {
    List<T> Get<T>(Expression<Func<T,bool>> lambda);
}

public class Something : ISomething {

    List<T> Get<T>(Expression<Func<T,bool>> expr){
      //...

      //Makes non-recursive call to non-generic 'Get' method.
      //Works as expected.
      Get((Stuff x) => x.Alpha > 10);

      //UH-OH! makes recursive call to Get<T> even when T is typeof(Stuff)!
      //This is where casting is needed!
      Get(expr);

      //...
    }

    List<Stuff> Get(Expression<Func<Stuff,bool>> expr){
       //...
    }
} 
```

我的意图是让泛型方法`Get<T>`调用非泛型`Get`，如果`expr` `LambdaExpression`具体采用 type 参数`Stuff`。但这不是上面代码中发生的情况。

如果我运行此代码...

```
ISomething foo = new Something();
var result = foo.Get((Stuff x) => x.Alpha < 20); 
```

...调用的函数是`Get<T>`. 这并不奇怪，即使非泛型`Get`是更好的匹配，因为`Get<T>`它是 ISomething 接口中唯一可用的匹配。所以这没关系。

但是一旦`Get<T>`方法执行，我希望`Get`使用名为`expr`. `Expression<Func<T,bool>>`鉴于我观察到的行为，看起来只有将to 转换为我才能得到我想要的东西`Expression<Func<Stuff,bool>>`。这也假设我有一个测试，比如`is`or `as`，以确认它是可铸造的。

类型测试是如何完成的，演员是如何完成的？

`Get`是否有另一种方法来强制调用更具体和非通用的方法？请假设调用者必须`ISomething`只通过接口工作。

`Get`当然，如果不经过任何处理就立即调用非泛型会更加理想`Get<T>`。但如果我被迫通过`ISomething`界面工作，我认为这是不可能的。

仅供参考，如果可以找到一种方法来完成这项工作 - 然后它将提供类似于C++ 中[的“特征 - else-then-if ”的功能。](http://erdani.com/publications/traits.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:51:04.977

像这样的东西怎么样：

```
public List<T> Get<T>(Expression<Func<T,bool>> expr){
    var expr2 = expr as Expression<Func<Stuff, bool>>;
    if (expr2 != null){
        return Get(expr2) as List<T>;
    }

    //...
} 
```

这段代码让 ReSharper 吓坏了，但它似乎可以工作:)

如果可能的话，更好的选择是向 ISomething 添加非泛型重载。

# jquery - 警报 JQuery Ajax 状态代码

> ID：15353214
> 
> 赞同：2
> 
> 时间：2013-03-12T04:16:31.187
> 
> 标签：jquery

在 Jquery Ajax 中，如果由于服务器关闭而找不到/无法加载 ajax url，我如何显示警报错误消息。

我试过了

```
error:function(){
} 
```

和

```
statusCodes:{
} 
```

只有在成功加载 url 时，这些才有效。如果 url 无法加载，我该如何显示错误消息？

**我正在使用 JSONP**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:30:33.427

您可以使用以下内容检查 jQuery ajax 返回的所有状态

```
 $.ajax(
   statusCode: {
      200: function (response) {
         alert('status 200');
      },
      201: function (response) {
         alert('status  201');
      },
      400: function (response) {
         alert('status  400');
      },
      404: function (response) {
         alert('status  404 ');
      }
   }, success: function () {
      alert('success');
   },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:19:15.963

我在刚刚编辑的 ajax 调用中尝试了这个，我收到了警报。

```
 $.ajax({
                    url: "/Stores/Ajax_GetStoreDetailsw",
                    type: 'POST',
                    data: { StoreId: selectedStoreId },
                    success: function (data) {
                        $(".StoreWindows").html(data);
                    },
                    error: function () {
                        alert(9);
                        //alert the error here.
                    }
                }); 
```

我将网址更改为不正确的网址，并出现了警报。

也将您的错误处理程序更改为此，以便您可以开始查看哪些错误产生了哪些错误代码。

```
 error: function (xhr, ajaxOptions, thrownError) {
                        alert(xhr.status);
                        alert(thrownError);
                        //alert the error here.
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:22:00.887

响应具有相应代码时要调用的数字 HTTP 代码和函数的对象。例如，当响应状态为 404 时会发出警报：[Jquery ajax](http://api.jquery.com/jQuery.ajax/) try like this。

```
$.ajax({
  statusCode: {
    200: function() {
      alert("OK ");
    },
    404: function() {
      alert("page not found");
    }
  }
}); 
```

尽管您也可以在错误块中获取状态代码。像这样的东西。

```
error: function (xhrReq, textstatus, errorThrown) {
                        alert(xhrReq.status);
                        alert(errorThrown);

                    } 
```

# python - 如何在生成器中使用 python 上下文管理器

> ID：15353220
> 
> 赞同：21
> 
> 时间：2013-03-12T04:16:58.973
> 
> 标签：python, generator, with-statement

在 python 中，应该在生成器中使用 with 语句吗？需要明确的是，我不是在询问使用装饰器从生成器函数创建上下文管理器。我在问是否存在使用 with 语句作为生成器内部的上下文管理器的固有问题，因为它至少在某些情况下会捕获`StopIteration`异常`GeneratorExit`。下面举两个例子。

Beazley 的例子（第 106 页）提出了这个问题的一个很好的例子。我已将其修改为使用 with 语句，以便在 opener 方法中的 yield 之后显式关闭文件。我还添加了两种在迭代结果时可以引发异常的方法。

```
import os
import fnmatch

def find_files(topdir, pattern):
    for path, dirname, filelist in os.walk(topdir):
        for name in filelist:
            if fnmatch.fnmatch(name, pattern):
                yield os.path.join(path,name)
def opener(filenames):
    f = None
    for name in filenames:
        print "F before open: '%s'" % f
        #f = open(name,'r')
        with open(name,'r') as f:
            print "Fname: %s, F#: %d" % (name, f.fileno())
            yield f
            print "F after yield: '%s'" % f
def cat(filelist):
    for i,f in enumerate(filelist):
        if i ==20:
            # Cause and exception
            f.write('foobar')
        for line in f:
            yield line
def grep(pattern,lines):
    for line in lines:
        if pattern in line:
            yield line

pylogs = find_files("/var/log","*.log*")
files = opener(pylogs)
lines = cat(files)
pylines = grep("python", lines)
i = 0
for line in pylines:
    i +=1
    if i == 10:
        raise RuntimeError("You're hosed!")

print 'Counted %d lines\n' % i 
```

在此示例中，上下文管理器成功关闭了 opener 函数中的文件。当引发异常时，我会看到异常的回溯，但生成器会静默停止。如果 with 语句捕获异常，为什么生成器不继续？

当我定义自己的上下文管理器以在生成器中使用时。我收到运行时错误，说我忽略了一个`GeneratorExit`. 例如：

```
class CManager(object):  
    def __enter__(self):
          print "  __enter__"
          return self
    def __exit__(self, exctype, value, tb):
        print "  __exit__; excptype: '%s'; value: '%s'" % (exctype, value)
        return True

def foo(n):
    for i in xrange(n):
        with CManager() as cman:
            cman.val = i
            yield cman
# Case1 
for item in foo(10):
    print 'Pass - val: %d' % item.val
# Case2
for item in foo(10):
    print 'Fail - val: %d' % item.val
    item.not_an_attribute 
```

这个小演示在 case1 中运行良好，没有引发异常，但在引发属性错误的 case2 中失败。在这里，我看到了一个`RuntimeException`提升，因为 with 语句已捕获并忽略了一个`GeneratorExit`异常。

有人可以帮助澄清这个棘手用例的规则吗？我怀疑这是我正在做的事情，或者没有按照我的`__exit__`方法做。我尝试添加代码来 re-raise `GeneratorExit`，但这没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T04:37:40.220

从[数据模型条目`object.__exit__`](http://docs.python.org/2/reference/datamodel.html#object.__exit__)

> 如果提供了一个异常，并且该方法希望抑制该异常（即，防止它被传播），它应该返回一个真值。否则，异常将在退出该方法时正常处理。

在您的`__exit__`函数中，您将返回`True`将抑制*所有*异常。如果您将其更改为 return `False`，异常将继续正常引发（唯一的区别是您保证您的`__exit__`函数被调用并且您可以确保自己清理）

例如，将代码更改为：

```
def __exit__(self, exctype, value, tb):
    print "  __exit__; excptype: '%s'; value: '%s'" % (exctype, value)
    if exctype is GeneratorExit:
        return False
    return True 
```

让你做正确的事而不是压抑`GeneratorExit`。现在您*只*看到属性错误。也许经验法则应该与任何异常处理相同——**只有在您知道如何处理异常的情况下才拦截异常**。有一个`__exit__`回报`True`是相当的（可能稍微差一点！）除了：

```
try:
   something()
except: #Uh-Oh
   pass 
```

* * *

请注意，当`AttributeError`引发（而不是被捕获）时，我相信这会导致生成器对象上的引用计数下降到 0，然后触发`GeneratorExit`生成器中的异常，以便它可以自行清理。使用 my `__exit__`，玩弄以下两种情况，希望你能明白我的意思：

```
try:
    for item in foo(10):
        print 'Fail - val: %d' % item.val
        item.not_an_attribute
except AttributeError:
    pass

print "Here"  #No reference to the generator left.  
              #Should see __exit__ before "Here" 
```

和

```
g = foo(10)
try:
    for item in g:
        print 'Fail - val: %d' % item.val
        item.not_an_attribute
except AttributeError:
    pass

print "Here"
b = g  #keep a reference to prevent the reference counter from cleaning this up.
       #Now we see __exit__ *after* "Here" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:51:21.097

```
class CManager(object):
    def __enter__(self):
          print "  __enter__"
          return self
    def __exit__(self, exctype, value, tb):
        print "  __exit__; excptype: '%s'; value: '%s'" % (exctype, value)
        if exctype is None:
            return

        # only re-raise if it's *not* the exception that was
        # passed to throw(), because __exit__() must not raise
        # an exception unless __exit__() itself failed.  But throw()
        # has to raise the exception to signal propagation, so this
        # fixes the impedance mismatch between the throw() protocol
        # and the __exit__() protocol.
        #
        if sys.exc_info()[1] is not (value or exctype()):
            raise 
```

# jquery - 使用 jquery 验证多个输入文本字段

> ID：15353227
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:17:47.753
> 
> 标签：jquery, html

我有多组输入字段，其中包含姓名和电子邮件。如果用户可以通过单击添加新按钮来添加新的输入字段集。在提交表单时如何验证这些新添加的输入字段？我听说这可以通过 using 来完成`jquery.each`，但我不知道如何实现它。有什么帮助吗？

代码如下：

```
<div class="subsriber_list_view">
    <div class="sr">
Name:<input type="text" class="subsribe_name" autocomplete="off" name="name[]">
Email:<input type="text" class="subsribe_mail" autocomplete="off" name="email[]">
</div>      
<div class="subsriber_list_container" id="sr1">
    <div class="sr">
    Name:<input type="text" class="subsribe_name" autocomplete="off" name="name[]">
    Email:<input type="text" class="subsribe_mail" autocomplete="off" name="email[]">
    </div>
    <div class="s_remove">
     <a href="javascript:void(0)">Remove</a>
    </div>
    </div>
    <div class="subsriber_list_container" id="sr2">
       <div class="sr">
    Name:<input type="text" class="subsribe_name" autocomplete="off" name="name[]">
        Email:<input type="text" class="subsribe_mail" autocomplete="off" name="email[]">
       </div>
    <div class="s_remove">
            <a href="javascript:void(0)">Remove</a>
        </div>
    </div>
    <div class="subsriber_list_container" id="sr3">
            <div class="sr">
                Name:<input type="text" class="subsribe_name" autocomplete="off" name="name[]">
                Email:<input type="text" class="subsribe_mail" autocomplete="off" name="email[]">
            </div>
        <div class="s_remove">
            <a href="javascript:void(0)">Remove</a>
        </div>
    </div>
    <div class="subsriber_list_container" id="sr4">
            <div class="sr">
                Name:<input type="text" class="subsribe_name" autocomplete="off" name="name[]">
                Email:<input type="text" class="subsribe_mail" autocomplete="off" name="email[]">
            </div>
        <div class="s_remove">
            <a href="javascript:void(0)">Remove</a>
        </div>
    </div>
</div>  
<input type="hidden" name="referer_id" class="referer" value="1">
<input type="submit" name="subscriber_submit" class="subscriber" value="Subsribe to Join1000">
<script type='text/javascript' src='http://code.jquery.com/jquery-latest.min.js'></script>

<script type='text/javascript'>

    var me = jQuery || $.noConflict();
    me(document).ready(function() {
        me(".add_new").click(function() {
            me('span.err').remove(); // clear all existing error messages
            me('input.subsribe_name').each(function() {                 
                $subsribe_name = me(this).val();
                $subsribe_mail = me(this).val();
                if($subsribe_name == '') {
                    me('input.subsribe_name').after('<span class="err">Please Enter Referer name</span>').focus();
                    return false;
                }               

           var intId = me(".subsriber_list_view .subsriber_list_container").length + 1;
           var fieldWrapper = me("<div class=\"subsriber_list_container\"  id=\"sr" + intId + "\"/>");
           var fName = me("<div class='sr'>Name:<input type='text' class='subsribe_name' autocomplete='off'name='name[]' /> Email:<input type='text' class='subsribe_mail' autocomplete='off' name='email[]' />");
           var removeButton = me("<div class='s_remove'><a href='javascript:void(0)'>Remove</a></div></div></div>");
           fieldWrapper.append(fName);
           fieldWrapper.append(removeButton);      
           me(".subsriber_list_view").append(fieldWrapper);
           removeButton.click(function() {
               me(this).parent().remove();         
           });  
           });
        });     
        me('#sr .subscriber').click(function() {
            me('span.err').remove(); // clear all existing error messages
            $subsribe_name = me('.subsribe_name').val();
            $subsribe_mail = me('.subsribe_mail').val();
            if($subsribe_name == '') {
                me('input.subsribe_name').after('<span class="err">Please Enter Referer name</span>').focus();  return false;
            }
            if($subsribe_mail == '') {
                me('input.subsribe_mail').after('<span class="err">Please Enter Referer mail ID</span>').focus();
                return false;
            }
            var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i
            if (!filter.test($subsribe_mail)) {
                    me('input.subsribe_mail').after('<span class="err">Please input a valid email address!</span>').focus();
                    return false;               
            }           
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:47:30.337

你可能想要这样..，[DEMO](http://jsfiddle.net/Dwzc9/61/)

```
<form method="post" action="" id="userForm">
    <input type="text" name="name" />
    <input type="text" name="email" />
    <input type="text" name="name1" />
    <input type="text" name="email1" />
    <input type="submit" value="Submit" id="submitBtn" />
</form>

$(function() {

 $("#submitBtn").click(function() {

 $("#userForm input[type=text]").each(function() {

        if(!$(this).val()) {
            alert("Please Fill All Fields");
            $(this).addClass('warn');
            $(this).focus();
            return false;
     }    
    });
    return false;
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:21:31.950

插件将使您的喜欢更容易和管理，无论如何附加一个点击处理程序到表单提交按钮

```
$("#form-submit-btn").on("click",function(e){
 e.preventDefault();//prevent default form submission

 //perform your validation login
 //if the form is valid
  //$(this).closest('form').submit();
 //else
  //show error messages

}); 
```

# c# - 手动绘制的控件有奇怪的字体

> ID：15353229
> 
> 赞同：0
> 
> 时间：2013-03-12T04:17:54.793
> 
> 标签：c#, winforms, bitmap, controls

长话短说，我正在以类似于以下方式在位图中绘制一个控件（例如：一个按钮）：

```
using (Bitmap controlBitmap = new Bitmap(control.Width, control.Height))
{
    using (Graphics controlGraphic = Graphics.FromImage(controlBitmap))
    {
        PaintEventArgs args = new PaintEventArgs(controlGraphic, control.ClientRectangle);

        MethodInfo info = control.GetType().GetMethod("OnPaintBackground", BindingFlags.Instance | BindingFlags.NonPublic);
        info.Invoke(control, new object[] { args });
        info = control.GetType().GetMethod("OnPaint", BindingFlags.Instance | BindingFlags.NonPublic);
        info.Invoke(control, new object[] { args });

        graphic.DrawImage(controlBitmap, control.Left, control.Top);
    }
} 
```

虽然所有控件都正确绘制，但唯一不正确的是文本。

![肥胖或损坏的文本？](../Images/87d15ad8f35fb15f18eb234c860e5f48.png)

我有点达到了我对控件行为方式的了解的极限。我不知道为什么文本是唯一没有正确绘制的部分。

为了使字体正确显示，我缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:43:50.540

嗯，文本没有得到正确的抗锯齿，从黑色混合到黑色。好像背景是透明的。不知道为什么。只是不要这样做，利用 Control.DrawToBitmap()：

```
 using (Bitmap controlBitmap = new Bitmap(control.Width, control.Height)) 
    using (Graphics controlGraphic = Graphics.FromImage(controlBitmap)) {
        control.DrawToBitmap(controlBitmap, control.DisplayRectangle);
        graphic.DrawImage(controlBitmap, control.Left, control.Top);
    } 
```

# javascript - 在检查 Jstree 中的节点之前先打开节点 - Jquery

> ID：15353231
> 
> 赞同：0
> 
> 时间：2013-03-12T04:18:14.037
> 
> 标签：javascript, jquery, jstree

```
for (var j = 0; j < eles.length; j++) {

    if (eles[j].trim().length != 0) {

        jQV6('#jstreeDivforBrowse').jstree("open_node", "#" + eles[j]);
        jQV6('#jstreeDivforBrowse').jstree("check_node", "#" + eles[j]);

        //Tried the below too

        /*
        var tree = jQuery.jstree._focused();
        tree.open_node("#"+eles[j], function () {
        tree.check_node("#"+eles[j], true, null); });
        */
    }
} 
```

该数组`eles[]`有一个 id 列表，在检查之前需要先打开它。

当我运行上面的代码时会发生什么，即使在子节点展开之前节点也会被检查。

在我们执行检查节点等其他步骤之前，jstree中是否有等待子节点扩展完成的情况，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:38:46.077

尝试这个：

```
jQV6('#jstreeDivforBrowse').jstree('open_node', "#"+eles[j], function(e, data) {
    jQV6('#jstreeDivforBrowse').jstree('select_node', "#"+eles[j]);
}, true); 
```

JsTree可能重复[打开一个节点然后选择一个子节点（使用json_result）](https://stackoverflow.com/questions/7307004/jstree-open-a-node-then-select-a-child-node-using-json-result)

# ruby-on-rails - 在 Rails button_to 中嵌入 font-awesome 图标

> ID：15353233
> 
> 赞同：5
> 
> 时间：2013-03-12T04:18:15.483
> 
> 标签：ruby-on-rails, font-awesome

我想要一个按钮如下：

```
[ Sign in with FB] 
```

其中 FB 是一个很棒的字体图标。我尝试了以下方法，但不知道如何将图标嵌入到按钮中：

```
= button_to "Login with", user_omniauth_authorize_path(:facebook) 
```

这是`font-awesome`通常调用的方式（在haml中）：

```
%i.icon-facebook-sign 
```

如何达到我想要的效果？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T21:36:40.237

你可以像这样[传递一个块](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)`button_to`：

```
= button_to user_omniauth_authorize_path(:facebook) do
    Login with
    %i.icon-facebook-sign 
```

（虽然我不确定你为什么不直接使用 Facebook 图标本身作为按钮。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T04:23:20.840

为 button_to 助手添加类选项

```
= button_to "Login with", user_omniauth_authorize_path(:facebook), :class => 'icon-facebook-sign' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T15:01:20.137

您可以创建一个使用按钮标签但自定义输出的辅助方法：

```
#application_helper.rb

def button_to_with_icon(text, path, classes)
  form_tag path, :method => :post do
    button_tag(classes) do
      raw text
    end
  end
end 
```

然后使用嵌入的原始 html 作为参数调用辅助方法：

```
<%= button_to_with_icon("login with <i class='fa fa-facebook-official'></i>", { action: "omniauth_authorize", controller: "users" }, class: "btn btn-info") %> 
```

动作、控制器和类设置只是示例。但我认为，您可以修改它以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T02:38:26.077

这是我为我制作的帮手：

```
def html_button_to(html = nil, options = nil, html_options = nil)
  button_to(options, html_options) do
    html
  end
end 
```

结合[font-awesome-rails gem](https://github.com/bokmann/font-awesome-rails)，它可以让你做到：

```
html_button_to fa_icon(:facebook, text: "Login with"), user_omniauth_authorize_path(:facebook) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-14T06:44:37.690

试试这个代码，它为我运行

`<%= button_to line_items_path(product_id: produit.id),class:"btn btn-outline-primary" do %> <i class="fas fa-shopping-basket"></i> <% end %>`

只需更改图标

# r - 使用数据框行作为函数参数

> ID：15353236
> 
> 赞同：0
> 
> 时间：2013-03-12T04:18:27.200
> 
> 标签：r, ggplot2

我正在尝试自动化一些图形，而不诉诸传统循环。我很难弄清楚如何将数据框行的元素作为函数的参数传递。该函数如下所示：

```
makeline  <- function(df, var, date, ylab="",xlab="", title="", nbershade=TRUE) {
p <- ggplot(df, aes_string(x=date, y=var)) 
p <- p  + geom_line()

# do some other magical things 
} 
```

假设我有一个数据框，其中一行如下：

```
row1 <- c("corn","Price","Date") 
```

由于玉米是一个数据框 ggplot 作为一个角色被它窒息。然后我使用不带引号的玉米，因为它是一个列名为“价格”和“日期”的数据框，我认为这会起作用：

```
mapply(makeline,row1[1],row1[2],row1[3]) 
```

无论如何，我正在摸索如何有效地使用这个新功能，而不会导致遍历列表。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:30:11.133

我不确定我是否会推荐此策略，但您可以使用它`get`来获取 data.frame

```
makeline  <- function(df, var, date, ylab="",xlab="", title="", nbershade=TRUE) {
  df <- get(df)
  p <- ggplot(df, aes_string(x=date, y=var)) 
  p <- p  + geom_line()

# do some other magical things 
} 
```

您可能需要调整环境`get`才能始终如一地工作，但它`inherits = TRUE`可以处理大多数事情

```
data(mtcars)
data(diamonds)

Map(makeline, df = c('mtcars','diamonds'), var = c('cyl','x'), date = c('mpg','y')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:29:14.223

试试这个

```
mapply(makeline,get(row1[,1]),row1[,2],row1[,3]) 
```

# javascript - 使用 Soundcloud API 时出现“未捕获的 ReferenceError”

> ID：15353240
> 
> 赞同：1
> 
> 时间：2013-03-12T04:18:46.810
> 
> 标签：javascript, soundcloud

我正在尝试使用 Javascript 使用站点的 API 在 Soundcloud 上搜索曲目。我`test.html`使用以下代码创建了一个页面（删除了客户端 ID）：

```
<html>
<head>
<script src="http://connect.soundcloud.com/sdk.js">
function findMusicByTag(tag)
{
SC.initialize({
    client_id: 'MY_CLIENT_ID'
});
SC.get('/tracks',{tags:\"tag\"},
    function(tracks)
    {
        console.log(tracks);
    });
}
</script>
</head>
<body onload="findMusicByTag('hitech')">
</body>
</html> 
```

当我在 Chrome 中加载页面，然后转到控制台时，我看到了这个错误：

```
Uncaught ReferenceError: findMusicByTag is not defined         test.html:17 
```

我定义的方式有什么问题`findMusicByTag()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:28:02.930

您应该将`<script>`标签分成两部分：

```
<script type="text/javascript" src="http://connect.soundcloud.com/sdk.js"></script>
<script type="text/javascript">
function findMusicByTag(tag)
{
    SC.initialize({
        client_id: 'MY_CLIENT_ID'
    });
    SC.get('/tracks',{tags:tag},
        function(tracks)
        {
            console.log(tracks);
    });
}
</script> 
```

正如[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/script)所述：

> **源代码**
> 
> 该属性指定外部脚本的 URI；这可以用作直接在文档中嵌入脚本的替代方法。**`script`具有指定属性的元素`src`不应在其标签中嵌入脚本**。

**编辑**：删除了反斜杠和双引号`{tags:tag}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:39:34.440

除了分隔脚本标签外，还需要去掉 /" 周围的标签

```
<html>
<head>
<script src="http://connect.soundcloud.com/sdk.js">
</script>
<script type="text/javascript">
function findMusicByTag(tag)
{
SC.initialize({
    client_id: 'your id'
});
SC.get('/tracks',{tags: tag},
    function(tracks)
    {
        console.log(tracks);
    });
}
</script>
</head>
<body onload="findMusicByTag('hitech')">
</body>
</html> 
```

# c# - 必须定义参数“@s”

> ID：15353241
> 
> 赞同：0
> 
> 时间：2013-03-12T04:18:47.753
> 
> 标签：c#, mysql, database, procedure

我在自定义操作中运行脚本时遇到问题。该脚本在 localhost MySQL 服务器中创建和设置数据库。

具体来说，我的一个程序有问题：

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `UpdateAutoInc`(IN `increment` BIGINT) 
BEGIN
SET @s = concat('ALTER TABLE tblactionservices AUTO_INCREMENT ',increment);
PREPARE stmt FROM @s;
EXECUTE stmt;
SET @s = concat('ALTER TABLE tblbannedclient AUTO_INCREMENT ',increment);
PREPARE stmt FROM @s;
EXECUTE stmt;
END$$
DELIMITER ; 
```

在脚本中，在此过程之前，我还有另外 2 个可以完美运行的过程。

安装应用程序时出现的错误是“必须定义参数'@s'”。寻找互联网我找到了这个[博客](http://blog.tjitjing.com/index.php/2009/05/mysqldatamysqlclientmysqlexception-parameter-id-must-be-defined.html)，但我添加了“允许用户变量=真；” 没有运气。有了这段文字，脚本直接在第一个过程中崩溃。事实上，它总是崩溃，无论它找到什么（程序，表格......）。我得到的错误是绝对没用的“你的 SQL 语法有错误；检查手册 bla bla”，所以我找不到问题。

这是我用来从 c# 运行脚本的类：

```
private void ExecuteSql(string DatabaseName, string Sql)
        {
        MySqlConnection connection = new MySqlConnection { ConnectionString = "server=127.0.0.1;User Id=root" };
        MySqlCommand command = new MySqlCommand(Sql, connection);

        command.Connection.Close();
        command.Connection.Open();

        try
        {
            command.ExecuteNonQuery();

        }
        finally
        {
            // Closing the connection should be done in a Finally block
            command.Connection.Close();
        }
    } 
```

该脚本不是手动输入的，而是从 PhPMyAdmin 自动生成的。MySQL服务器版本为5.5，连接器版本为6.5.5.0

# actionscript-3 - 如何检测该区域是否在 as3 中 100% 绘制

> ID：15353242
> 
> 赞同：3
> 
> 时间：2013-03-12T04:19:00.783
> 
> 标签：actionscript-3, flash, bitmap, paint, bitmapdata

我正在制作一个模拟泛行业的游戏，其中一个过程是绘画。

我想要做的是让玩家绘制平底锅，但我不希望使用 FILL 很容易，我希望玩家用刷子绘制平底锅，然后游戏检测是否所有区域都被绘制并让玩家前进。

对于这幅画，我打算使用那个图书馆：[http ://www.nocircleno.com/graffiti/](http://www.nocircleno.com/graffiti/)

但我不知道如何检测是否所有区域都被绘制了。有人可以告诉我一些方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T06:05:09.810

One of the ways would be - you make a shielding BitmapData that has transparency and is opaque in place which you need your player to paint. (Color it as needed, but make sure the color is fully opaque). Then gather `histogram()` then query alpha vector for 255th value, this will be the initial value for zero percent filled. These range from 0-255, so you can't use 100 or any other fixed value. Then, while the player is painting, you draw the brush over that BitmapData with `blendMode` parameter set to `BlendMode.ERASE`, this will net your BitmapData to gain transparency where the brush was drawn. After your player finishes drawing by any means (say, the paint is used up), you run another `histogram()` over the BitmapData, and query the 255th value of alpha channel vector. 0 means the bitmap is fully transparent (or at least, only a small amount of pixels is left opaque), thus you can count a zero as 100% fill, for anything greater use the proportion.

```
var bd:BitmapData=new BitmapData(w,h,true,0x0); // fully transparent initial bitmap
bd.draw(yourPaintBase); // a shape that designates area to be painted. Must be fully opaque
var bm:Bitmap=new Bitmap(bd);
// position it as needed, so the area which should be painted is aligned to wherever you need
addChild(bm);
addEventListener(Event.ENTER_FRAME,doPaint);
var baseValue:int=bd.histogram()[3][255]; // Vector #3 contains alpha, #255 contains 
// percentage of those pixels that have alpha of 255 = fully opaque
function doPaint(e:Event):void {
    if (!areWePainting) return;
    var sh:Shape=getBrush(); // shuold return an existing Shape object reference for performance
    sh.x=e.localX;
    sh.y=e.localY; // we are drawing where the mouse is
    bd.draw(sh,null,null,BlendMode.ERASE);
    decreasePaint(); // we have used some paint
    if (noMorePaint()) {
        e.target.removeEventListener(Event.ENTER_FRAME,doPaint);
        var endValue:int=Math.floor(100*(1-bd.histogram()[3][255]/baseValue));
        // aligning to percentage. This is the value you seek
        reportFilledPercentage(endValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:27:55.150

您可以遍历您的像素`BitmapData`并用于[`getPixel()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#getPixel%28%29)检查所有这些像素的颜色是否不是白色。如果找到白色，则图像未完全绘制。

像这样的东西：

```
function containsWhite(bitmapData:BitmapData):Boolean
{
    for(var c:int = 0; c < bitmapData.width; c++)
    {
        for(var r:int = 0; r < bitmapData.height; r++)
        {
            // Check if pixel is white.
            if(bitmapData.getPixel(c, r) >= 0xFFFFFF)
            {
                return true;
            }
        }
    }

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:43:29.080

您本质上是在处理碰撞检测问题。通过查看他们的 API，您可以尝试使用 getColorAtPoint 进行 for 循环之类的操作，并尝试确定它们已在每个像素处绘制。

如果所有其他方法都失败，请查看库使用对象的 .hitTestObject 方法生成的对象之间的冲突。

看到这个：[http ://sierakowski.eu/list-of-tips/39-collision-detection-methods-hittest-and-hittestobject-alternatives.html](http://sierakowski.eu/list-of-tips/39-collision-detection-methods-hittest-and-hittestobject-alternatives.html)

看看有人如何处理与像素的碰撞：[http ://www.emanueleferonato.com/2010/08/05/worms-like-destructible-terrain-in-flash-part-2/](http://www.emanueleferonato.com/2010/08/05/worms-like-destructible-terrain-in-flash-part-2/)

# javascript - jQuery UI 可排序和 JS Cookie

> ID：15353244
> 
> 赞同：0
> 
> 时间：2013-03-12T04:19:05.230
> 
> 标签：javascript, jquery, jquery-ui, cookies, jquery-ui-sortable

**声明**
好的，所以我一直在尝试让[jQuery UI 的可排序插件](http://jqueryui.com/sortable)在我的网站上运行。如果您不熟悉该插件，可以[在此处](http://api.jqueryui.com/sortable)查看他们的 API 。经过几天的调试（插件有很多问题），它终于运行良好。然后我花了几天时间研究一种不实用的方法，用 PHP 将订单存储为 cookie，这有一些问题——而且我宁愿不使用 PHP 来做。

输入[jQuery Cookie](https://github.com/carhartl/jquery-cookie)相信大家都很熟悉。我以前用过它，甚至用它来存储所述可排序部分的切换状态，但我当然不是它的专业人士（事实上，我完全是 Javascript/jQuery 的新手）。

无论如何，我在 StackOverflow 和其他地方看到了几个问题，讨论了这个话题并介绍了来自不同人的解决方案。但是，所有这些解决方案似乎都有 1-4 年的历史，并且不适合我。可能只是因为我在实现他们的代码时做错了——这当然不是不可能的，我非常缺乏经验。

话虽如此，如果您查看我的演示/代码并告诉我出了什么问题，或者只是帮助我完全重写它以使其正常工作，我将不胜感激。

**编码**

```
function restoreOrder() {
    var cookie = $.cookie('cookie_name');
    if (!cookie) return;
    var SavedID = cookie.split('|');
    for ( var u=0, ul=SavedID.length; u < ul; u++ ){ SavedID[u] = SavedID[u].split(',');}
    for (var Scolumn=0, n = SavedID.length; Scolumn < n; Scolumn++) {
        for (var Sitem=0, m = SavedID[Scolumn].length; Sitem < m; Sitem++) {
            $("#sortablemain").eq(Scolumn).append($("#sortablemain").children("#" + SavedID[Scolumn][Sitem]));
        }
    }
}

$(function() {
    $( "#sortable" ).sortable({
    handle: "h3",
    cursor: "move",
    axis: "y",
    placeholder: "marker",
    opacity: 0.3,
    scrollSpeed: 50,
    containment: '#sortable',
    forcePlaceholderSize: true,
    scroll: true,
    scrollSensitivity: 100,
    revert: 200,
    helper: 'clone',
    tolerance: 'pointer'
    });
});

$(function() {
    $( "#sortablemain" ).sortable({
    handle: "h2",
    cursor: "move",
    axis: "y",
    placeholder: "marker",
    opacity: 0.3,
    scrollSpeed: 50,
    containment: '#sortablemain',
    forcePlaceholderSize: true,
    scroll: true,
    scrollSensitivity: 100,
    revert: 200,
    helper: 'clone',
    tolerance: 'pointer',
    update: function(event, ui) {
          var cooked = [];
          $( "#sortablemain" ).each(function(index, domEle){ cooked[index]=    $(domEle).sortable('toArray');});
          $.cookie('cookie_name', 'x'+cooked.join('|'), { expires: 7, path: '/'});
      }
    });
});

$(document).ready(function(){
    restoreOrder();
}); 
```

*[[从这个问题](https://stackoverflow.com/questions/1370417/jquery-ui-sortable-and-cookie)的答案中获得的“解决方案”（不起作用）]*

**排序演示** *[无 cookie] **[工作]***：http:
[//jsfiddle.net/mQGdS/](http://jsfiddle.net/mQGdS/)

**排序演示** *[使用 cookie] **[不工作 - 排序仍然有效，cookie 无效]***：http:
[//jsfiddle.net/48tJM/2](http://jsfiddle.net/48tJM/2)

**另一个失败的 cookie 演示尝试（不同的 cookie 方法）**：http:
[//jsfiddle.net/mQGdS/3](http://jsfiddle.net/mQGdS/3)（从[这个问题](https://stackoverflow.com/questions/746800/jquery-ui-sortables-and-cookie-plugin-with-multiple-lists?rq=1)的答案中获得）。

仍然没有运气。:(

**在关闭** *[澄清]*
上面的 jsFiddle（带有 cookie）只是尝试为#sortablemain 创建一个 cookie。实际上，我需要创建 2 个单独的 cookie，分别存储两个列表的顺序，#sortable 和 #sortablemain。如 jsFiddle 演示中所示，我正在使用 jQuery 1.8.3 和 jQuery UI 1.9.2

非常感谢（真的 <3）
达斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:41:59.423

好吧，记住男孩是女孩......你需要包含外部js，例如cookie.jquery.js......

我尝试过的所有 cookie 方法显然都有效。我只是浪费了很多时间，因为我只是忘记包含 cookie.jquery.js

不错的作品。

最后的工作示例：http: [//jsfiddle.net/48tJM/5/](http://jsfiddle.net/48tJM/5/)

```
function restoreOrderSidebar() {
    var cookie = $.cookie('cookie_sidebar');
    if (!cookie) return;
    var SavedID = cookie.split('|');
    for ( var u=0, ul=SavedID.length; u < ul; u++ ){ SavedID[u] = SavedID[u].split(',');}
    for (var Scolumn=0, n = SavedID.length; Scolumn < n; Scolumn++) {
        for (var Sitem=0, m = SavedID[Scolumn].length; Sitem < m; Sitem++) {
            $("#sortable").eq(Scolumn).append($("#sortable").children("#" + SavedID[Scolumn][Sitem]));
        }
    }
}

function restoreOrderMain() {
    var cookie = $.cookie('cookie_main');
    if (!cookie) return;
    var SavedID = cookie.split('|');
    for ( var u=0, ul=SavedID.length; u < ul; u++ ){ SavedID[u] = SavedID[u].split(',');}
    for (var Scolumn=0, n = SavedID.length; Scolumn < n; Scolumn++) {
        for (var Sitem=0, m = SavedID[Scolumn].length; Sitem < m; Sitem++) {
            $("#sortablemain").eq(Scolumn).append($("#sortablemain").children("#" + SavedID[Scolumn][Sitem]));
        }
    }
}

$(function() {
    $( "#sortable" ).sortable({
    handle: "h3",
    cursor: "move",
    axis: "y",
    placeholder: "marker",
    opacity: 0.3,
    scrollSpeed: 50,
    containment: '#sortable',
    forcePlaceholderSize: true,
    scroll: true,
    scrollSensitivity: 100,
    revert: 200,
    helper: 'clone',
    tolerance: 'pointer',
    update: function(event, ui) {
          var cooked = [];
          $( "#sortable" ).each(function(index, domEle){ cooked[index]=    $(domEle).sortable('toArray');});
          $.cookie('cookie_sidebar', 'x'+cooked.join('|'), { expires: 31, path: '/'});
      }
    });
});

$(function() {
    $( "#sortablemain" ).sortable({
    handle: "h2",
    cursor: "move",
    axis: "y",
    placeholder: "marker",
    opacity: 0.3,
    scrollSpeed: 50,
    containment: '#sortablemain',
    forcePlaceholderSize: true,
    scroll: true,
    scrollSensitivity: 100,
    revert: 200,
    helper: 'clone',
    tolerance: 'pointer',
    update: function(event, ui) {
          var cooked = [];
          $( "#sortablemain" ).each(function(index, domEle){ cooked[index]=    $(domEle).sortable('toArray');});
          $.cookie('cookie_main', 'x'+cooked.join('|'), { expires: 31, path: '/'});
      }
    });
});

$(document).ready(function(){
    restoreOrderMain();
    restoreOrderSidebar();
}); 
```

# php - 谷歌地图数组中的多个标记

> ID：15353247
> 
> 赞同：0
> 
> 时间：2013-03-12T04:19:17.540
> 
> 标签：php, google-maps, google-maps-api-3

我有一个像这样的地图位置数组

```
var locations = [
      ['bobcat', '100.212','-100.232',  4],
      ['car', '200.212','-200.232',  4],...and so on...
            ]; 
```

我在一个 php 数组中有纬度和经度......而且有很多。它们也在不断变化，所以每次添加新的时我都无法对它们进行硬编码。我可以回显 php 数组值来代替 lat 和 longs，它也可以工作。我基本上想要一个循环，因此它会自动将整行数组索引写入位置

像这样

```
 var locations = [
     for(i=0;i<array.size;i++)
        {
          [phpItemType[i], phpLatVar[i],phpLongVar[i],  phpNumber[i]],
        }
             ]; 
```

我怎样才能做到这一点？我希望这个问题很清楚。请告诉我。多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:50:37.813

我假设您想要 JavaScript 中的代码，这可能会有所帮助

```
var locations =[];
for(i=0;i<array.size;i++)
{
    var tempArray = [];
    tempArray.push(phpItemType[i], phpLatVar[i],phpLongVar[i],  phpNumber[i]);
    locations.push(tempArray);
} 
```

# python - 在 Hadoop 上运行 Python 代码失败

> ID：15353252
> 
> 赞同：6
> 
> 时间：2013-03-12T04:19:44.010
> 
> 标签：python, hadoop-streaming

我已尝试按照此页面上的说明进行操作：http: [//www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)

```
$bin/hadoop jar contrib/streaming/hadoop-streaming-1.0.4.jar -input /user/root/wordcountpythontxt -output /user/root/wordcountpythontxt-output -mapper /user/root/wordcountpython/mapper.py -reducer /user/root/wordcountpython/reducer.py -file /user/root/mapper.py -file /user/root/reducer.py 
```

它说

```
File: /user/root/mapper.py does not exist, or is not readable.
Streaming Command Fail 
```

当我浏览 url:jobdetails.jsp/

我发现很多异常

```
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:432)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 9 more
Caused by: java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
    ... 14 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 17 more
Caused by: java.lang.RuntimeException: configuration exception
    at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:230)
    at org.apache.hadoop.streaming.PipeMapper.configure(PipeMapper.java:66)
    ... 22 more
Caused by: java.io.IOException: Cannot run program "/user/root/wordcountpython/mapper.py": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:214)
    ... 23 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 24 more 
```

我无法修复它，请帮助我运行 python pgm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:39:53.253

如果您仔细检查了[链接](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)上的说明，

```
hduser@ubuntu:/usr/local/hadoop$ bin/hadoop jar contrib/streaming/hadoop-*streaming*.jar -file /home/hduser/mapper.py -mapper /home/hduser/mapper.py -file /home/hduser/reducer.py -reducer /home/hduser/reducer.py -input /user/hduser/gutenberg/* -output /user/hduser/gutenberg-output 
```

它清楚地表明不需要将 mapper.py 和 reducer.py 复制到 HDFS，您可以将这两个文件从本地文件系统链接：作为 /path/to/mapper。我相信你可以避免上述错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:59:27.740

您可能想检查您的 #! 之后是否没有 dos 样式的新行。mapper.py 中的行。如果你这样做了，hadoop 可能无法找到你的 python 解释器，因为它会看到一个额外的 CR。例如 /usr/local/bin/python^M 而不是 /usr/local/bin/python 其中 ^M 是 CR。在你的 mapper 和 reducer 上尝试 dos2unix 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:09:27.757

看来问题是有问题的。

```
Caused by: java.io.IOException: Cannot run program "/user/root/wordcountpython/mapper.py": error=2, No such file or directory 
```

请您检查文件是否`/user/root/wordcountpython/mapper.py`存在。如果它存在，那么该文件的权限是什么。

你运行hadoop的用户有执行和读取这个文件的权限吗？

# java - JComboBox - ActionPerformed - 如何区分用户和代码？

> ID：15353254
> 
> 赞同：0
> 
> 时间：2013-03-12T04:19:47.743
> 
> 标签：java, actionlistener, jcombobox

我`JComboBoxes`在 Java Gui 应用程序中有很多。

我想在用户更改组合框时触发事件（我已经完成了，这很好用）。

我的问题是我还需要偶尔通过代码更新组合框中的值，并且我不希望执行这些相同的事件。

如果它的代码或用户触发了这些侦听器，我如何区分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:00:04.957

> 如果它的代码或用户触发了这些侦听器，我如何区分？

```
comboBox.removeActionListener(...);
// do your code here
comboBox.addActionListener(...); 
```

# python - 将 Python 2 Unicode 移植到 Python 3

> ID：15353260
> 
> 赞同：1
> 
> 时间：2013-03-12T04:20:12.373
> 
> 标签：python, unicode, python-3.x, porting

我目前正在将一些代码从 Python 2.x 移植到 3.x，我遇到了麻烦。当我尝试改变时：

```
base = unicode(base, FSENCODING, "replace") 
```

我认为 3 想要的，即：

```
base = str(base, FSENCODING, "replace") 
```

说`str`不能解码是行不通的。如果我尝试：

```
base = b'\x80abc'.decode(base, FSENCODING, "replace") 
```

我收到一条错误消息，说这只能接受两个参数，而不是我提供的三个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:33:30.003

尝试：

```
base = b'\x80abc'.decode(FSENCODING, "replace") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:00:01.633

```
base = str(base, FSENCODING, "replace") 
```

是正确的。你也可以这样做：

```
base = base.decode(FSENCODING, "replace") 
```

这是同一件事。

如果没有错误消息，就不可能说出出了什么问题。

# c# - 确定要使用的连接

> ID：15353264
> 
> 赞同：0
> 
> 时间：2013-03-12T04:20:44.570
> 
> 标签：c#

在我的代码中，如果我有多个连接字符串，由于多个连接，如何在不创建另一个 ExecuteNonQuery() 共享函数的情况下实现这一点？我正在考虑使用 if else 来确定类函数调用 ExecuteNonQuery() 是否应该使用特定的连接字符串来打开/关闭连接，我想重用 ExecuteNonQuery() 曾经有不同的连接，有更好的主意吗？或者如果设计是错误的？

```
public void OpenConnection()
{
    try
    {
        string strSQLSvr = ConfigurationManager.ConnectionStrings["SQLConnStr"].ConnectionString;
        string strUsrSvr = ConfigurationManager.ConnectionStrings["usrMaint"].ConnectionString;

        conn = new SqlConnection(strSQLSvr);
        conn.Open();
    }
    catch (Exception ex)
    {
    }
}

public void CloseConnection()
{
    try {
        if (conn.State == ConnectionState.Open)
        {
            conn.Close();
        }
    }
    catch (Exception ex)
    {

    }

public void ExecuteNonQuery(string strSQL)
{
    try
    {
        OpenConnection();
        cmd.CommandText = strSQL;
        cmd.Connection = conn;
        cmd.ExecuteNonQuery();
    }
    catch (Exception ex)
    {

    }
    finally
    {
        CloseConnection();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:30:30.320

你可以使用下面的设计

```
public class DatabaseConnection 
{

    private static DbConnection createSQlConnectionWithDB1()
    {
        // create a connection with DB1

        return new SqlConnection();
    }

    private static DbConnection createSQlConnectionWithDB2()
    {
       // create a connection with DB2
        return new SqlConnection();
    }

    public  static DbConnection createConnection(string typeOfConnection)
    {
        if (typeOfConnection.Equals("DB1"))
            return createSQlConnectionWithDB1();

        if (typeOfConnection.Equals("DB2"))
            return createSQlConnectionWithDB2();

        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:31:45.640

您可以`OpenConnection()`根据连接字符串的变化在函数中创建不同的连接对象。

然后，您可以简单地将连接对象传递给`ExecuteNonQuery`函数。

这样就可以工作了。

# php - Drupal 6 在 mysql 表中存储数组，因为 varchar 是错误提供的无效参数

> ID：15353269
> 
> 赞同：0
> 
> 时间：2013-03-12T04:21:37.597
> 
> 标签：php, mysql, drupal, drupal-6, varchar

我制作了一个 mysql 表来存储问题及其 Drupal 6 属性，如前缀、后缀、选项、标题、值、类型……等。

不幸的是，存储的选项值是一个数组，我收到错误“警告：为 foreach() 提供的参数无效”

代码是：

```
$fruit = db_query("SELECT type,title, value, section, collapsible,collapsed, description, options, size, prefix, suffix, default_value FROM {table} ");
  $count = 1;
  while($slice = db_fetch_array($fruit)){
  $section = $slice['section'];
  $op = $slice['options'];
    $form[$count] = array(
    '#type' => $slice['type'],
    '#title' => $slice['title'],
    '#collapsible' => $slice['collapsible'],
    '#collapsed' => $slice['collapsed'], 
    '#description' => $slice['description'], 
    '#options' => $op, 
    '#size' => $slice['size'], 
    '#prefix' => $slice['prefix'], 
    '#suffix' => $slice['suffix'], 
      );
$count = $count+1;
      } 
```

在一种特殊情况下，选项是

```
array(t('yes'), t('no')) 
```

其中 type 是“radios”
，它是作为 varchar 存储的内容（blob 也不起作用）（添加逗号也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:48:27.717

不要将数组序列化为字符串。这是人们在数据库中存储列表时常犯的错误之一（尽管公平地说，这比为前 n 项创建固定数量的列要好）。

我会制作一个单独的`options`表格，其中每行有两列：问题表中的外键`(question_id, option)`在哪里。`question_id`查询看起来像，

```
SELECT option FROM options WHERE question_id = <<$id>>; 
```

（<> 不是实际的 SQL，只是 PHP 参数化查询语法的占位符。）

如果需要订购选项，请添加第三列`rank`：

```
SELECT option FROM options WHERE question_id = <<$id>> SORT BY rank ASCENDING; 
```

**编辑：为什么不将数组序列化为字符串？**

这不是我深入研究过的东西，但我可以想到性能、便利性和理论：

1.  出于性能原因，数据库经过优化以存储固定宽度的字段。如果您开始将列表放入字段中，最终您会遇到包含太多项目的列表，并且需要调整字段大小。同时，数据库经过高度优化，可以存储任意多行的表，您永远不需要调整表的大小来容纳更多行。

2.  为方便起见，对已序列化为单个字段的列表运行查询确实很烦人。大多数数据库对查询存储为字段的列表的支持很差。从数据库的角度来看，这只是一个字符串，甚至可能是一个不透明的二进制 blob。

3.  从理论的角度来看，它违反了关系数据库是关系代数的具体化的虚构。但事实证明这会产生实际后果，因为查询优化器使用关系代数中的等价定理将您的查询重写为性能更高的形式。违反关系代数的假设往往会生成优化不佳的查询（尽管永远不会错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:09:29.470

您不能在 MySQL 中按原样存储数组。您可能希望将其保存为序列化字符串 ( `serialize($options)`)，然后保存`unserialize($slice['options'])`在您的表单中。

# javascript - if 语句的第二部分不起作用

> ID：15353273
> 
> 赞同：1
> 
> 时间：2013-03-12T04:21:49.030
> 
> 标签：javascript, jquery

```
if(($(this).val().length == 0) && ($(this).not('.optionalField'))){ 
```

该语句的第二部分不起作用（在 && 之后）。有人知道为什么吗？我的表单中只有一个字段具有类 optionalField，但由于某种原因，它对所有字段都一视同仁？？？这段代码错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:25:55.153

您可能打算使用哪个过滤器[`.is()`](http://api.jquery.com/is/)而不是`.not()`针对选择器的交集过滤当前结果集`.optionalfield`：

```
!$(this).is('.optionalField') 
```

所以：

```
if ($(this).val().length == 0 && !$(this).is('.optionalField')) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:24:20.463

这可能是一个更好的解决方案（`!`暗示“不” [`hasClass`](http://api.jquery.com/hasClass/)）

`if(($(this).val().length == 0) && ( !$(this).hasClass('optionalField'))){`

`.not()`传统上用于其他属性（`:checked`,`:visible`等）

# c++ - 在单例类中声明和访问枚举 - C++

> ID：15353278
> 
> 赞同：0
> 
> 时间：2013-03-12T04:22:06.003
> 
> 标签：c++

C++初学者问题！

如果单例类的公共部分中有一个枚举，那么从单例类外部使用**枚举值的正确方法是什么。**

```
class MySingletonClass
{
    public:
      static MySingletonClass & Singleton();

      enum
      {
          eCodeZero         = 0,
          eCodeOne      = 1
      }MsgQueueCodes;
    protected:

          MySingletonClass ();
          ~MySingletonClass ();
}; 
```

我能够从这个类之外访问这样的枚举值。

```
MySingletonClass::Singleton().eCodeZero
MySingletonClass::Singleton().eCodeOne 
```

我的问题是，

1.  这是正确的方法吗？
2.  是否存在任何替代方法？
3.  在另一个类中声明枚举变量的语法是什么？[需要做类似`MySingletonClass::MsgQueueCodes myMsgQCode;`// 语法不正确]

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:53:31.503

*   如果您`enum`唯一相关的`MySingletonClass`是在类中声明它是好的。那么你必须`MySingletonClass::eCodeZero`在类定义之外定义的函数中使用。
*   如果您`enum`在其他一些类中同样使用，那么最好的方法是在类之外但使用命名空间声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:23:37.597

该代码是有效的，并且可能是您想要的。请注意，它`MsgQueueCodes`被声明为（未命名的）枚举的成员变量。也许你想要：

```
class MySingletonClass
{
    public:
      static MySingletonClass & Singleton();

      enum MsgQueueCodes
      {
          eCodeZero     = 0,
          eCodeOne      = 1
      };
    MsgQueueCodes code;
    protected:

          MySingletonClass ();
          ~MySingletonClass ();
}; 
```

然后你可以写：

```
MySingletonClass::MsgQueueCodes code =  MySingletonClass::Singleton().eCodeZero;
MySingletonClass::MsgQueueCodes code =  MySingletonClass::Singleton().code; 
```

此外，从 C++ 11 开始，我们有了`enum class`，这意味着更好的枚举名称范围。参见示例： [强类型枚举](http://en.wikipedia.org/wiki/C++11#Strongly_typed_enumerations)

# ruby-on-rails - 无法在视图中显示来自 rails 3.2 后端（postgresql）的多个数据

> ID：15353281
> 
> 赞同：0
> 
> 时间：2013-03-12T04:22:19.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, postgresql, ruby-on-rails-3.2

我目前正在为图书馆管理系统做一个项目。我在项目中有五个表。它们都是相互关联的，即它们相互引用。

我正在处理的表格是`Admin`, `Books`, `Library_Locations`,`Users`和`Categories`

```
Books is referencing user,categories and admin .User is referencing library_location 
```

我已经为它们创建了模型和控制器。我想知道我是否可以创建一个视图，这样如果我点击 book_id，我可以获得用户、类别和管理员的详细信息。

我的书表是：-

```
id serial NOT NULL,
  title character varying(255) NOT NULL,
  abstract character varying(255),
  isbn character varying(255),
  call_no character varying(255),
  reference_no character varying(255),
  category_id integer,
  library_location_id integer,
  author_first_name character varying(255),
  author_middle_name character varying(255),
  author_last_name character varying(255),
  image character varying(255),
  publisher character varying(255),
  edition character varying(255),
  book_location character varying(255),
  deleted integer NOT NULL DEFAULT 0,
  total_num_copies integer,
  cost numeric(8,2) DEFAULT 0.0,
  entered_by integer,
  last_updated_by integer,
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL,
  CONSTRAINT books_pkey PRIMARY KEY (id) 
```

我已经在 lov_names 和 values.The 上试过了。观点是：-

```
<h3>lov Name</h3><br>
<div class="span3">
<table class="table table-striped table-bordered">
<tr>    
<td>Lov Names-Id: </td><td><%= params[:id] %></td>
<tr><td>Lov Names-Name:</td><td> <%= LovName.where('id = ?', params[:id]).pluck(:name)[0] %></td></tr>
<tr><td>Lov Values-Description:</td><td> <%= LovName.where('id = ?', params[:id]).pluck(:description)[0] %></td></tr>
</tr>

</table>
</div>
</br>

   <table class="table table-hover table-bordered">

 <tr><th>lov_value id.</td><th>lov_value Name</th><th>lov_value</th><th>Sequence</th><th>Edit</th><th>Delete</th></tr>
<% @lov_value.each do |p| %>
<tr>
<td><%= p.id %> <br></td>
<td><%= p.lov_name_id %> <br></td>
<td><%= p.lov_value %> <br></td>
<td><%= p.sequence %> <br></td>

<td><%= link_to 'Edit', {:action => 'lov_value_edit', :id => p.id} %> &nbsp;</td>
<td><%= link_to 'Delete', {:action => 'lov_value_delete', :id => p.id},
    :data => { :confirm => "Are you sure you want to delete this lov_value?" } %></td>
    </tr>
</tr>
<% end %>
</table>
<br/>

<p class="btn btn-primary "><%= link_to 'Back', {:action => 'index'} %></p>
<p class="btn btn-primary "><%= link_to 'Add New lov_values', {:action => 'add_values'} %></p> 
```

我的 Books.rb 片段：-

```
has_many :book_holds
has_many :book_transactions

belongs_to :admin, :foreign_key => 'last_updated_by'
belongs_to :admin, :foreign_key => 'entered_by'

belongs_to :library_location
belongs_to :category
    belongs_to :user 
```

谁能给我一个关于如何实现这个的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:11:43.967

我认为您可能是在想这个问题，或者您可能没有阅读[Michael Hartl 的惊人的 Rails 教程](http://ruby.railstutorial.org/)，该教程是 100% 在线免费的（并且还有廉价的[印刷版](https://rads.stackoverflow.com/amzn/click/com/0321832051)和[kindle](https://rads.stackoverflow.com/amzn/click/com/B008RN1SJO)版）。

访问您需要的不同值应该发生在*控制器*类中，并且显示数据应该发生在视图中。所以你的控制器需要看起来像：

## /app/controllers/books_controller.rb

```
class BooksController
  def index
   @books = Book.all
  end

  def show
   @book = Book.find(params[:id])
   @category = @book.category
   @lastUpdatedBy = @book.last_updated_by
   @enteredBy = @book.entered_by
   @user = @book.user
  end

  # Any other methods (edit, destroy, create, new, etc.) go here
end 
```

现在我们定义视图：

## /app/views/books/show.html.erb

```
<h1><%= @book.title %><h1>
<h2>By <%= @book.author %></h2>
<h3>Category: <%= @category.name %></h3>

<p> Current user: <%= @user.name %> </p>
<p> Last updated by: <%= @lastUpdatedBy.name %> </p>
<p> Entered by: <%= @enteredBy.name %> </p> 
```

# matlab - 在 Matlab 中，当矩阵至少具有 3 个维度时，如何连接存储在完全不同的矩阵中的数组？

> ID：15353284
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:22:32.027
> 
> 标签：matlab

例如，我想将 ans(:,:,8) 中的所有数据与 ans(:,:,9) 等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:44:56.540

你看到[heterogenous cat](http://www.mathworks.in/help/matlab/ref/matlab.mixin.heterogeneous.cat.html?searchHighlight=cat)和[Normal concatenation](http://www.mathworks.in/help/matlab/ref/cat.html)

在不同的方向，尝试[horzcat](http://www.mathworks.in/help/matlab/ref/horzcat.html)和[vertcat](http://www.mathworks.in/help/matlab/ref/vertcat.html)

# r - 为什么 r/sqlite 需要主键？

> ID：15353290
> 
> 赞同：3
> 
> 时间：2013-03-12T04:23:17.527
> 
> 标签：r, sqlite, primary-key

所以我有一个使用以下方法创建的表：

```
dbGetQuery(conn, "CREATE TABLE Data (DataID integer primary key autoincrement, 
           DataTypeID integer, DataName varchar)") 
```

在一些代码之后，我创建了一个名为“insertdata”的数据框，如下所示：

```
 type    name
1   1   Data1
2   1   Data2
3   1   Data3
4   1   Data4
5   1   Data5 
```

我使用以下内容将其插入我的表中：

```
dbWriteTable(conn, "Data", insertdata, append=TRUE) 
```

稍后我创建另一个数据框以插入不同类型的数据，如下所示：

```
 type    name
1   2   OtherData1
2   2   OtherData2
3   2   OtherData3
4   2   OtherData4
5   2   OtherData5 
```

但是当我使用与以前相同的 dbWriteTable 时，它​​会告诉我

```
"Warning message:
In value[[3L]](cond) :
  RS-DBI driver: (RS_SQLite_exec: could not execute: PRIMARY KEY must be unique)" 
```

这是为什么？我的表设置为自动递增主键。我不明白非唯一字符来自哪里。是因为每个行名都相同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T05:27:10.387

是的，发生错误是因为每行的行名相同。您已经创建了一个带有自动增量 ID 或 ROWID 的表。当向 SQLite 表中插入新行时，可以将 ROWID 指定为 INSERT 语句的一部分，也可以由数据库引擎自动分配。

当你使用

```
 dbWriteTable(conn, "Data", insertdata, append=TRUE) 
```

在这里您使用 option `row.names = TRUE`，因此行名用作增量 ID。由于您的 2 data.frame 具有相同的 rownames ，因此您会收到错误消息。通常的解决**方法是给新创建的行一个比插入语句之前表中最大的 ROWID 大一的 ROWID**。

例如，您可以这样做：

```
driver <- dbDriver("SQLite")
conn <- dbConnect(driver, dbname='DB_KEY')
## I read all the table to get rows number, you can optimize this with a clever select
index <- nrow(dbReadTable(conn,'Data'))
rownames(mydf) <- 1:nrow(mydf) +index
dbWriteTable(conn, "Data", mydf, append=TRUE)
dbDisconnect(conn) 
```

# php - FPDF中的while循环

> ID：15353291
> 
> 赞同：0
> 
> 时间：2013-03-12T04:23:19.980
> 
> 标签：php, fpdf

我在让 SQL 查询在 fpdf 中工作时遇到了一些麻烦，这甚至可能吗？

我目前有

```
session_start();
require('fpdf.php');    
class PDF extends FPDF
{
    function Header()
        {
            include('config.php');
            $client_check = $db->prepare("SELECT * FROM clients WHERE client_fullname = '".$_SESSION['client_details']."'");
            $client_check->execute();
            while ($row = $client_check->fetch(PDO::FETCH_ASSOC))
            {
                $client_firstname    = $row ['client_firstname'];
                $client_lastname     = $row ['client_lastname'];
                $client_address      = $row ['client_address'];
                $client_jobaddress   = $row ['client_jobaddress'];
                $client_homephone    = $row ['client_homephone'];

                $this->SetFont('Arial', 'B', 12);
                $this->Cell(10,0,'Ph(H):',0,0,'C');
                $this->Cell(20,0,''.$client_homephone.'', 0,0,'C');
                $this->Line(30,61,100,61);
                $this->Cell(210,0,'Job No:',0,0,'C');
                $this->Cell(-120,0,'Model:',0,0,'C');
                $this->Line(110,61,200,61);
            }
        }
    }
// Instanciation of inherited class
$pdf = new PDF();
$pdf->AliasNbPages();
$pdf->AddPage();
$pdf->SetFont('Times','',10);
$pdf->Output(); 
```

在我添加 while 循环之前，一切都运行良好。现在它只是向我吐出一个空白的pdf。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:12:50.900

**恐怕你不能那样做**

这是因为每次将新页面添加到 pdf 时都会运行 Header 函数（如果页面溢出，则会自动完成）

相反，你可以这样做

1.  为调用函数的 PDF 类创建一个构造函数，比如 Fill_details
2.  将 while 循环移动到函数 Fill_details
3.  页眉和页脚函数应该只包含所有页面共有的那部分代码，比如页面边框、页脚版权等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:22:23.913

```
$con = mysql_connect("localhost", "{username}", "{password}") or die(mysql_error()) ; 
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
$db = mysql_select_db("{db}", $con) or die(mysql_error()) ; 
$client= mysql_query("{SELECT * FROM clients}")or die(mysql_error());
while ($client2= mysql_fetch_array($client)){

$pdf = new PDF();
$pdf->AliasNbPages();
$pdf->AddPage();
$pdf->SetFont('Times','',10);

$pdf->Cell(20,0,''.$client2["client_homephone"].'', 0,0,'C');
.....

}

mysql_close($con);

$pdf->Output(); 
```

# iphone - 从 CLLocationManager 获取坐标

> ID：15353296
> 
> 赞同：0
> 
> 时间：2013-03-12T04:23:47.750
> 
> 标签：iphone, mapkit, core-location

我添加了地图视图并添加了所需的地图套件框架和核心位置框架，使用 iOS6，我添加了这些方法，但没有获取当前坐标，以便我可以显示 GPS 跟踪的指示器。

这是代码：

```
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations {

    CLLocation* location = [locations lastObject];

    NSLog(@"first time -- locations.count = %d", locations.count);

    NSDate* eventDate = location.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    if (abs(howRecent) > 15.0) {
        NSLog(@"latitude %+.6f, longitude %+.6f\n",
            location.coordinate.latitude,
            location.coordinate.longitude);
    }
} 
```

它给了我地图的默认值（纬度 +37.785834，经度 -122.406417），而不是我所在位置的当前位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:40:04.957

正如 Vidya 所提到的，要获取您所在位置的实际值，您需要在真实设备上进行尝试。要测试您的设置是否正确，请从模拟器中选择某个位置，并查看坐标是否反映了更改。

![在此处输入图像描述](../Images/460d82ef15d31a9ea7f9c5f730b7509b.png)

# matlab - 在 Matlab 中，如何自动绘制一组带有均值和误差线的向量？

> ID：15353299
> 
> 赞同：-4
> 
> 时间：2013-03-12T04:24:09.607
> 
> 标签：matlab

例如

矢量1，矢量2，矢量3，矢量4...

我希望能够自动绘制这些带有均值和误差线的向量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:42:27.323

使用[`errorbar`](http://www.mathworks.com/help/matlab/ref/errorbar.html)，例如

```
errorbar(Vector1,Err) 
```

绘制 Vector1 并在 Vector1 的每个元素处绘制一个误差线。误差条是曲线上方和下方的 Err(i) 距离，因此每个条都是对称的且长度为 2*E(i)。

另一个例子：

```
load count.dat;
y = mean(count,2);
e = std(count,1,2);
errorbar(y,e,'xr') 
```

![在此处输入图像描述](../Images/99e7926be271afa0ce68677428ac2bdb.png)

注意，所有这些都是从 Matlab 的文档中获取的，所以下次尝试阅读文档。

# java - JCombobox - 仅在值更改时执行 actionlistener

> ID：15353300
> 
> 赞同：3
> 
> 时间：2013-03-12T04:24:19.537
> 
> 标签：java, swing, actionlistener, onchange, jcombobox

我有一个`JComboBox`，并且我有一个监听器。

现在，每次用户从下拉列表中“选择”某些内容时，事件都会触发，即使他们只是重新选择了之前选择的值。

如果组合框的选定值与选择之前的值不同，有没有办法只触发事件？

我想我可以将组合框的值存储在不同的字段中，并在每次触发事件时进行比较，这似乎有点矫枉过正。我有 20 个左右这样的组合框。我宁愿不再有 20 个变量来存储值，这样事件就不会触发。

一定有更好的方法。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T04:35:40.540

您是否考虑过使用 ItemListener 而不是 ActionListener？

```
 JComboBox<String> cb = new JComboBox<>(new String[] {"Stack", "Over", "Flow"});
 cb.addItemListener(new ItemListener() {
     @Override
     public void itemStateChanged(ItemEvent e) {
         System.out.println("Change");
     }
 }); 
```

它会触发两次，因为一项变为 DESELECTED，另一项变为 SELECTED。两者都会触发事件。您可以通过调用来检查发生了哪一个`e.getStateChange()`。

# oracle - 嵌套对象未保存 JPA，Spring JPA 存储库 Oracle

> ID：15353302
> 
> 赞同：0
> 
> 时间：2013-03-12T04:24:23.257
> 
> 标签：oracle, spring, jpa

我在购物车和计划之间有一对多的关系。当我坚持购物车时，我想坚持购物车中的所有计划。我正在使用 Spring JPA 存储库。我已经尝试过单向和双向关联。在每种情况下，它都会失败并出现以下错误：

org.springframework.dao.DataIntegrityViolationException: ORA-01400: cannot insert NULL into ("SS"."SS_CART_PLANS"."CART_ID") ；SQL [不适用]；约束[空]；嵌套异常是 org.hibernate.exception.ConstraintViolationException: ORA-01400: cannot insert NULL into ("SS"."SS_CART_PLANS"."CART_ID")

映射如下：

```
@Entity
@Table(name = "SS_CART")
 public class Cart implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@SequenceGenerator(name="SS_CART_PLANS_ID_GENERATOR", sequenceName="SS_SEQ")
@GeneratedValue(strategy=GenerationType.SEQUENCE,                       generator="SS_CART_PLANS_ID_GENERATOR")
    private long id;

@OneToMany(cascade=CascadeType.ALL,mappedBy="cart")
private Set<CartPlan> cartPlans;

// uni-directional many-to-one association to SsUser
@ManyToOne(cascade= {CascadeType.ALL })
@JoinColumn(name = "USER_ID")
private User user;

public Cart() {
}

public long getId() {
    return this.id;
}

public void setId(long id) {
    this.id = id;
}

public Set<CartPlan> getCartPlans() {
    return this.cartPlans;
}

public void setCartPlans(Set<CartPlan> cartPlans) {
    this.cartPlans = cartPlans;
}

/**
 * @return the user
 */
public User getUser() {
    return user;
}

/**
 * @param user the user to set
 */
public void setUser(User user) {
    this.user = user;
}

}

    @Entity
@Table(name="SS_CART_PLANS")
public class CartPlan implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name="SS_CART_PLANS_ID_GENERATOR", sequenceName="SS_SEQ")
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SS_CART_PLANS_ID_GENERATOR")
    private long id;

    @Temporal(TemporalType.DATE)
    @Column(name="EFFECTIVE_DATE")
    private Date effectiveDate;

    @Column(name="ISSUER_CODE")
    private String issuerCode;

    @Column(name="PLAN_CODE")
    private String planCode;

    //bi-directional many-to-one association to SsCartPlan
    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="PARENT_PLAN_ID")
    private Set<CartPlan> cartPlans;

    @ManyToOne
    @JoinColumn(name="CART_ID")
    @ForeignKey(name="SS_CART_PLANS_CART_FK")
    private Cart cart;

    //bi-directional one-to-one association to SsSearchCriteria
    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="CRITERIA_ID")
    private SearchCriteria searchCriteria;

    public CartPlan() {
    }

    public long getId() {
        return this.id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public Date getEffectiveDate() {
        return this.effectiveDate;
    }

    public void setEffectiveDate(Date effectiveDate) {
        this.effectiveDate = effectiveDate;
    }

    public String getIssuerCode() {
        return this.issuerCode;
    }

    public void setIssuerCode(String issuerCode) {
        this.issuerCode = issuerCode;
    }

    public String getPlanCode() {
        return this.planCode;
    }

    public void setPlanCode(String planCode) {
        this.planCode = planCode;
    }

    /**
     * @return the cartPlans
     */
    public Set<CartPlan> getCartPlans() {
        return cartPlans;
    }

    /**
     * @param cartPlans the cartPlans to set
     */
    public void setCartPlans(Set<CartPlan> cartPlans) {
        this.cartPlans = cartPlans;
    }

    /**
     * @return the searchCriteria
     */
    public SearchCriteria getSearchCriteria() {
        return searchCriteria;
    }

    /**
     * @param searchCriteria the searchCriteria to set
     */
    public void setSearchCriteria(SearchCriteria searchCriteria) {
        this.searchCriteria = searchCriteria;
    }

    /**
     * @return the cart
     */
    public Cart getCart() {
        return cart;
    }

    /**
     * @param cart the cart to set
     */
    public void setCart(Cart cart) {
        this.cart = cart;
    }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:13:36.070

我想你`card`在`CardPlan`坚持之前忘记了。

# linux - 如何在 tcp 应用程序中使用 linux tc

> ID：15353304
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:24:44.660
> 
> 标签：linux, trafficshaping

我有一个 1Gb 的网络，我需要通过将速率限制为 100MB 和 1Gb 来运行某些 TCP 性能测试。我的理解是可以使用分层令牌桶（htb）来实现这一点，如下所示

```
tc qdisc add dev eth0 root handle 1: htb default 12
tc class add dev eth0 parent 1: classid 1:1 htb rate 1gbps ceil 1gbps
tc class add dev eth0 parent 1: classid 1:10 htb rate 100mbps ceil 100mbps 
```

这应该创建两个根类 1:1 和 1:10，分别具有 1gb 和 100mb 带宽。如果我的理解有误，请纠正我。

接下来，如何在我的 tcp 应用程序中使用上述类？例如，当我运行我的应用程序时，它应该只使用 100 Mb，我是否需要在套接字选项中指定某些内容，以便应用程序发送的任何消息现在都属于 1:1 类，因此将速率限制为 100 Mb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:51:57.727

使用流量控制匹配规则和 ip 表规则来标记流量。

```
tc filter add dev eth0 protocol ip parent 1:0 prio 1 handle 1 fw flowid 1:10
iptables -A OUTPUT -i eth0 -p tcp -j MARK --set-mark 1 
```

将所有 TCP 出站数据包放入您拥有的每秒 100 兆位的队列中。

由于您只想匹配一个应用程序，让我们假设您的应用程序有一个 TCP 套接字侦听端口 7654，所有连接都通过该端口进行。iptables 规则看起来更像这样

```
iptables -A OUTPUT -i eth0 -p tcp -m multiport --sports 7654 -j MARK --set-mark 1 
```

此外，您应该在`tc qdisc`命令中将默认设置为 1 Gbps 队列，以便系统上的正常流量不会以任何方式影响您的测试。

# zend-framework - Zend Action View Helper 与 ActionStack Action Helper

> ID：15353305
> 
> 赞同：1
> 
> 时间：2013-03-12T04:24:45.877
> 
> 标签：zend-framework, zend-framework-mvc

我了解 ZF ActionStack Action Helper 会导致性能下降，因为它会重新触发整个调度过程。但是 Action View Helper 呢？我应该出于同样的原因避免它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:04:46.740

如果您的意思是`$this->action()`视图助手，那么是的，出于同样的原因避免使用它。所有这一切都是调用动作堆栈。

# php - phonegap 文件传输上传获取文件上传选项值

> ID：15353310
> 
> 赞同：0
> 
> 时间：2013-03-12T04:25:05.877
> 
> 标签：php, cordova

我正在关注文件上传文档，并成功使用此代码上传图片

```
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
options.mimeType="image/jpeg";

var params = {};
params.value1 = "test";
params.value2 = "param";

options.params = params;

var ft = new FileTransfer();
ft.upload(imageURI, encodeURI("http://some.server.com/upload.php"), win, fail, options); 
```

但是如何访问发送到服务器的 fileuploadoptions 呢？我正在使用 php 代码将图片上传到文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:04:29.520

那些作为常规的帖子字段出现，所以`$_POST['value1']`和`$_POST['value2']`

# android - Android - TextView 和 ImageView 的相同 OnClickListener

> ID：15353318
> 
> 赞同：3
> 
> 时间：2013-03-12T04:26:19.073
> 
> 标签：android, onclicklistener

我有3个项目的清单：

```
[image_1] [text_1]
[image_2] [text_2]
[image_3] [text_3] 
```

![在此处输入图像描述](../Images/eb82db4dd1c5cd0b509b376c31451471.png)

我没有使用 ListView。相反，我使用了RelativeLayout。

我将如何处理 TextView 和 ImageView 的 OnClickListener？

list_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

<ImageView
    android:id="@+id/image_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="21dp"
    android:layout_marginTop="21dp"
    android:src="@drawable/calbutton" />

<TextView
    android:id="@+id/text_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/image_1"
    android:layout_toRightOf="@+id/image_1"
    android:text="TextView" />

   <ImageView
    android:id="@+id/image_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBelow="@+id/image_1"
    android:layout_below="@+id/image_1"
    android:layout_marginLeft="21dp"
    android:layout_marginTop="21dp"
    android:src="@drawable/calbutton" />

   <TextView
     android:id="@+id/text_2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/text_1"
     android:layout_alignTop="@+id/image_2"
     android:text="TextView" />

   <ImageView
    android:id="@+id/image_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBelow="@+id/image_2"
    android:layout_below="@+id/image_2"
    android:layout_marginLeft="21dp"
    android:layout_marginTop="21dp"
    android:src="@drawable/calbutton" />  

   <TextView
       android:id="@+id/text_3"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignTop="@+id/image_3"
       android:layout_toRightOf="@+id/image_3"
       android:text="TextView" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T04:31:23.797

您可以为视图添加一个父视图，并将单击侦听器调用到该父视图，就像您可以将 LinearLayout 添加为父视图一样：

```
<LinearLayout android:id="@+id/firstparent">
<Imageview/>
<TextView/>
</LinearLayout>
<LinearLayout android:id="@+id/secondparent">
<Imageview/>
<TextView/>
</LinearLayout>
<LinearLayout android:id="@+id/thirdparent">
<Imageview/>
<TextView/>
</LinearLayout>
<LinearLayout android:id="@+id/forthparent">
<Imageview/>
<TextView/>
</LinearLayout> 
```

现在将单击侦听器设置为，`LinearLayout`这样无论您单击图像视图还是文本视图，您都可以获得相同的事件。

然后为每个布局注册 onClickListner。

```
layout1.setOnClickListener(this);
layout2.setOnClickListener(this);
layout3.setOnClickListener(this);
layout4.setOnClickListener(this);

@Override
public void onClick ( View v )
{
     if ( v == layout1 ) 
     {
            // your code...
     }
     else if(v == layout2){
         // your code...
     }
   ////  add others...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T04:33:16.880

将`imageview`and`textview`放入`linear layout`. `onClickLListener`然后覆盖`LinearLayout`

```
<RelativeLayout ...... >

    <LinearLayout android:layout_width="match_parent" android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ImageView
        android:id="@+id/image_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="21dp"
        android:layout_marginTop="21dp"
        android:src="@drawable/calbutton" />

        <TextView
           android:id="@+id/text_1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignTop="@+id/image_1"
           android:layout_toRightOf="@+id/image_1"
           android:text="TextView" />

    </LinearLyaout>

  .......

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T04:35:49.363

因为`[ListView](https://developer.android.com/reference/android/widget/ListView.html)`您可以添加一个`[onItemClickListener](https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)`将被调用以在行上的任意位置单击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T04:31:26.593

只需`OnClickListener()`像beflow一样实现您的java文件，

```
public yourClassName extends Activity implements OnClickListener
{

    ....your code

    // register for onClickListener
    text1.setOnClickListener(this); 
    // register same for other textboxes & imageview.

    @Override
    public void onClick ( View view )
    {
         if ( view == text1 ) // assuming text1 is your text_1 of your .xml file
         {
                // do stuff
         }
         ... 
         // same for other textboxes & image view.
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T04:32:22.383

只需对所有这样的文本视图和图像视图使用 OnClickListeners

```
findViewById(R.id.image_1).setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View v) {
       ////// write your code here
   }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T04:41:21.667

您可以为 image/button/textview/edittext 等设置如下所示的 onClick 事件，并在 Activity 中使用该方法。

![在此处输入图像描述](../Images/a1af12ddb82485548a3cc151357223df.png)

```
<Button
    android:id="@+id/some_ui_element"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#00FFFFFF"
    android:onClick="onClickButton"
    android:shadowColor="#000"
    android:text="@string/sometitle"
    android:textColor="@android:color/primary_text_dark_nodisable" />

/**
 * onClickView() called
 * @param v
 */
public void onClickView(View v) {
  //Do something
      switch(v.getId()){
         case R.id.someuielement :
         break;
         ...
         ...
      }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T04:33:48.293

如果您想要一个处理程序对每个视图具有不同的操作，您可以这样做：

```
TextView tv;
ImageView iv;
View.OnClickListener myOnlyhandler = new View.OnClickListener() {
  public void onClick(View v) {
      if( tv.getId() == ((TextView)v).getId() ){
          // it was the textview
      }
      else if(iv.getId() == ((ImageView)v).getId() ){
          // it was the imageview
      }
  }
} 
```

或者，如果您想将两个 View 组合在一起，请将它们放在一个容器中（例如，RelativeLayout、LinearLayout 等）并为容器分配一个 OnClickListener。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T04:34:13.553

这是代码

```
TextView tv[] = new TextView[subCategory.length];
    for (int i = 0; i < subCategory.length; i++) {
            tv[i] = new TextView(this);
            tv[i].setText(subCategory[i]);
            tv[i].setId(i);
            sCategoryLayout.addView(tv[i]);
            tv[i].setOnClickListener(onclicklistener);
        } 
```

onclicklistener 方法：

```
OnClickListener onclicklistener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v == tv[0]){
            //do whatever you want....
        }
    }
}; 
```

# rest - 如何更改struts-rest-pulgin的默认映射规则

> ID：15353324
> 
> 赞同：1
> 
> 时间：2013-03-12T04:27:11.850
> 
> 标签：rest, struts2, struts2-convention-plugin

我正在使用 struts2 + 约定 + rest 来构建我的 Web 项目。content文件夹中有很多jsp文件。所以我想按文件夹对它们进行分类。例如，我想把`user.jsp`,`user-list.jsp`和`user-edit.jsp`放在`\content\user`文件夹中。而且我必须添加`Namespace`注释`UserController`，如下所示：

```
@Namespace("/user")
public class UserController 
```

但如果我这样做，访问的 url`user.jsp`将更改为`localhost:8080\projectName\user\user`. 我不太喜欢`user`这个网址。

所以我的问题是，我可以将默认映射规则更改为 access `user.jsp`by`localhost:8080\projectName\user`吗？如果我无法更改它，那么如何管理文件夹中的这么多 jsp 文件`\WEB-INF\content`？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:07:19.713

我发现`@ResultPath`注释可以解决我的问题。于是代码变成如下：

```
@ResultPath("/WEB-INF/content/user")
public class UserController 
```

通过这样做，我可以`WEB-INF/content/user/user.jsp`通过 url 访问文件`localhost:8080/projectName/user`。

我仍然想知道是否有任何方法可以将默认结果路径更改为`/WEB-INF/content/{controllerNamePrefix}`单个位置的方式，而不是为每个控制器类添加注释。

# javascript - 从 sqllite 数据库加载数据并打印到 html 元素

> ID：15353329
> 
> 赞同：0
> 
> 时间：2013-03-12T04:27:40.913
> 
> 标签：javascript, database, sqlite, cordova, onload

我正在构建一个 PhoneGap Android 应用程序，并有一个加载了 Javascript 的 SQLLite DB。数据库已正确加载并且数据存在得到证实。

我正在为 GUI 使用 JQuery Mobile Framework。在应用程序的一个子页面上，我试图从数据库中加载元素并将它们作为列表元素打印出来 - 但是，我一直在尝试通过在开始列表标签中调用 'onload=""' 来做到这一点，没有调用任何函数 - 尝试通过一个简单的警报来执行此操作以确保正在发生某些事情，但什么也没有。

很高兴自己打印数据库结果，我只是想立即调用该函数。任何帮助，将不胜感激。下面的代码：

```
<div data-role="page" id="cachelist"> <!-- Start of cache list screen -->
        <header data-role="header">
            <h1>Cache List</h1>
            <a href="#home" data-icon="home">Home</a>
        </header>
        <article data-role="content">
            <ul data-role="listview" data-filter="true" id="cachelistList" onload="alert('test')">

            </ul>
        </article>
</div> <!-- End of cache list screen --> 
```

这是 div - 你可以看到我正试图从开头打电话`<ul>`。

我也尝试过调用`<head>`文档中的 JS 函数，我认为这不会产生影响 - 但它在下面以防万一。

```
<ul onload="cacheListPrint()">
</ul>

function cacheListPrint() {
    alert("Getting this far");
    db.transaction(queryDBPrint, errorCB);
}

function queryDBPrint(tx) {
    tx.executeSql('SELECT * FROM cache', [], querySuccessPrint, errorCB);
}

function querySuccessPrint(tx, results) {
    var rows = results.rows;
    var len = rows.length;
    if(len > 0) {
        for (var i=0; i<len; i++){
            document.getElementById('cachelistList').innerHTML += 
        '<li><h1>' + rows.item(i).name + '</h1></li>';
        }
    }
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:42:09.243

尝试使用“.pagebeforeshow”。“.pagebeforeshow”将在动画开始之前在新页面上触发。

```
$( '#yourPageID' ).live( 'pagebeforeshow',function(event){
    cacheListPrint();
}); 
```

# javascript - Chrome 中一页上的音频元素数量有限

> ID：15353332
> 
> 赞同：0
> 
> 时间：2013-03-12T04:28:27.517
> 
> 标签：javascript, jquery, google-chrome, jplayer

我们正在构建一个语言学习游戏，我需要在其中加载大量声音文件（100 多个）。我使用 jPlayer 作为我的跨浏览器解决方案。我需要在游戏开始之前预加载所有音频（preload=auto）。加载实际上并不需要很长时间，因为每个文件只有几 Kb 大小。

在我正在测试的所有浏览器中，令我惊讶的是，Chrome 是唯一一个在页面上加载超过 95 个音频文件时崩溃的浏览器。一旦插入超过 95 个音频标签，它就会给我“Aw snaps”消息。这与一次发送多少个请求无关，因为我确保一次队列中不超过 20 个。所以我可以让 95 个完全加载的音频愉快地坐在页面上并且表现良好，然后如果我插入另一个，它就会崩溃。有趣的是，只有我正在测试的 Windows 上的 Chome 崩溃了；Mac 上的 Chrome 运行良好。

还有其他人遇到类似的问题吗？有没有办法解决这个问题，还是我必须忍受一页上可以拥有的音频文件数量的硬性限制？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:33:49.870

我唯一能想到的是音频精灵......想想图像精灵，但对于音频。虽然由于您必须等待它们全部加载，但我不确定这是否会有所帮助。看看：[http ://remysharp.com/2010/12/23/audio-sprites/](http://remysharp.com/2010/12/23/audio-sprites/)

# jsf - Primefaces 日历验证

> ID：15353333
> 
> 赞同：1
> 
> 时间：2013-03-12T04:28:27.183
> 
> 标签：jsf, primefaces

我正在尝试使用弹出按钮验证日历作为输入文本，输入文本已正确验证。但是无法验证从弹出按钮中选择的日期我的 xhtml 代码是：

```
<p:calendar value="#{indexBean.searchCriteria.date}" 
            id="date" showOn="button"
            mindate="#{indexBean.searchCriteria.mindate}" maxdate="#{indexBean.searchCriteria.maxdate}"
            label="Date" converterMessage="The Date must be of the form DD/MM/YYYY and be a valid date"
            pattern="dd/MM/yyyy" validator="#{indexBean.validateDate}" widgetVar="dateCalendar"
            timeOnly="false">
    <f:convertDateTime pattern="dd/MM/yyyy" />
    <p:ajax update=":messages" event="change" />
</p:calendar> 
```

我应该怎么做才能在弹出按钮上应用验证？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:46:28.540

使用 ajax，您应该能够键入`dateSelect`日历事件，并执行标准的、ajax 驱动的验证。根据文档，弹出模式还可以在`blur`和上触发 ajax 事件`keyup`。`change`您指定的仅适用于日历的输入文本位

# javascript - 开始图像 div

> ID：15353339
> 
> 赞同：0
> 
> 时间：2013-03-12T04:28:52.230
> 
> 标签：javascript, jquery, html, image

我有一个`<div>`包含图像（在内部`div's`），您可以通过单击`nav`控件来浏览它们。我的问题是如何从特定图像开始（加载）图像 div？例如，从数组中的第三个图像开始？

HTML：

```
 <div id="imagePanel">
    <div id="images">
        <div> <img src="http://placehold.it/250x387/bb5533/000000"></div>
        <div> <img src="http://placehold.it/250x387/ffff33/000000"></div>
        <div> <img src="http://placehold.it/250x387/feef33/000000"></div>
        <div> <img src="http://placehold.it/250x387/dd4433/000000"></div>
    </div>
    </div>
        <div id="imageNav">
            <a id="prev">prev</a><br />
            <a id="next">next</a>
        </div> 
```

JS：

```
var imgsize = 387;
$('#images').data('top',0);
len = $('#images').children().length;
$('#images').data('max',len * (-imgsize));

$(document).ready(function() {

    $('#prev').click(function(){
        currTop = $('#images').data('top') + (imgsize);
        if (currTop == imgsize) {
            return;
        }     

        $('#images').css('top',currTop.toString()+"px");
        $('#images').data('top',currTop);
    });

    $('#next').click(function(){      
        currTop = $('#images').data('top') - (imgsize);
        if (currTop == $('#images').data('max')) {
            return;
        }     

        $('#images').css('top',currTop.toString()+"px");
        $('#images').data('top',currTop);
    });

}); 
```

CSS：

```
#imagePanel{
    width:280px;        
    height:390px;
    background:#aa44dd;
    border:4px solid #bbbb33;
    overflow-x:hidden;
    overflow-y:hidden;
    margin:auto;
}

#images{
    width:250px;          
    position:relative;
    overflow:hidden; 
    text-align:center;
    margin-left:auto;
    margin-right:auto;
    padding:0px 0px 0px 0px;
}

#images > div {  
    height:387px;            
    margin:0 auto;
    padding:0px 0px 0px 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:57:52.417

像这样的东西，其中 imagenumber 是所需图像的从零开始的位置：

```
function gotoImage(imagenumber){
      var top=imagenumber*imgsize;
      if(top > 0){
        top = 0;
      }
      if(top < $('#images').data('max')){
        top = $('#images').data('max');
      }
      $('#images').css('top',top.toString()+"px");
      $('#images').data('top',top)
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:59:08.610

如果你想选择`third`图像`top`然后试试这个`document.ready function`

```
$('#images').css('top',-(3*imgsize)+"px");//showing third image so 3
$('#images').data('top',-(3*imgsize)); 
```

**完整代码**

```
$(document).ready(function() {
    $('#prev').click(function(){
        currTop = $('#images').data('top') + (imgsize);
        if (currTop == imgsize) {
            return;
        }     
        $('#images').css('top',currTop.toString()+"px");
        $('#images').data('top',currTop);
    });

    $('#next').click(function(){      
        currTop = $('#images').data('top') - (imgsize);
        if (currTop == $('#images').data('max')) {
            return;
        }     
        $('#images').css('top',currTop.toString()+"px");
        $('#images').data('top',currTop);
    });
    $('#images').css('top',-(3*imgsize)+"px");
    $('#images').data('top',-(3*imgsize));
}); 
```

**小提琴** [http://jsfiddle.net/jEmQ7/](http://jsfiddle.net/jEmQ7/)

# amazon-web-services - 亚马逊是否刚刚发布了多服务器问题的解决方案

> ID：15353340
> 
> 赞同：2
> 
> 时间：2013-03-12T04:28:54.410
> 
> 标签：amazon-web-services, meteor

我正在开发一个流星应用程序，我害怕的一件事是没有人知道如何让一个应用程序在多台机器上运行。

亚马逊刚刚宣布：[http ://aws.amazon.com/about-aws/whats-new/2013/03/11/announcing-aws-elastic-beanstalk-for-node-js/](http://aws.amazon.com/about-aws/whats-new/2013/03/11/announcing-aws-elastic-beanstalk-for-node-js/)

这会通过提供一个基本上无限大的机器来解决这个问题吗？还是我完全误解了 AWS？还是因为没有流星应用程序会使用超过 30GB 的 RAM 而担心这一点很荒谬？

对不起初学者的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:47:04.650

Amazon Beanstalk 使用预定义的 CloudFormations 模板以及一些预配置的 AMI，让您可以轻松部署应用程序。不同的风格，这个新的节点之一就是其中之一，是预先配置的技术堆栈来使用。

模板本身并不能解决流星水平缩放问题。也就是说，在多台机器上运行流星。为此，您需要让流星保持其 WebSocket 状态，以便集群中的其他服务器可以共享它。

Amazon 弹性负载均衡器 (ELB) 允许 TCP 流量，这是扩展 WebSocket 流量所需的。ELB 还支持会话关联或粘性会话（为此有很多名称）。然而，这还不够。想象一下，我登录到一台服务器，然后我就呆在那里。然后您登录到另一台服务器并留在那里。现在我们有两个不同的服务器，分别与我们交谈。但是，如果这些服务器共享 WebSocket 状态。

SocketIO + Redis 可以通过 RedisStore 一起使用，但目前流星不支持。我希望他们最终会支持这一点，因为可行的生产就绪产品需要它——除非他们想出一些其他的魔法来实现同样的目标。

你担心它是对的，因为服务器有时会死掉，尤其是在虚拟化环境中。集群不仅关乎性能，还关乎高可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:25:47.350

我认为[modules.io](http://modulus.io/features)可能会因为它们的“会话关联”特性而工作得最好

“我们的负载平衡器确保当用户点击伺服器时，他们会被发送回同一个伺服器以进行所有后续活动。这通过允许内存状态信息降低了应用程序的复杂性。”

但是，我实际上并没有尝试在那里部署流星应用程序。

他们还有一篇专门关于流星的博客[文章](http://blog.modulus.io/demeteorizer)

# c# - 队列和 While 循环

> ID：15353342
> 
> 赞同：1
> 
> 时间：2013-03-12T04:29:12.513
> 
> 标签：c#, multithreading, queue

我有 2 个线程，一个添加到 Enqueue，一个执行 Dequeue 并进行一些处理，

现在有时队列会变空，可能需要几分钟才能用一个元素填充它，另一方面，如果数据是本地的，它可能有几百个元素，所以它混合了快速添加的本地数据和数据必须先下载。

现在如果我做类似的事情

```
While(queue.count > 0)
{  
    //lock denque and process
} 
```

另一方面，如果我执行类似的操作，它将退出循环并且线程将结束

```
While(queue.count > 0 && DownloaderThreadisRunning)
    {  
        //lock denque and process
    } 
```

我还有另一个问题，因为某些对象可能需要处理时间到 Enqueue 线程已经结束其工作的地步，所以它不会进入循环。

我想到了类似的东西

```
While(queue.count > 0)
        {  
            //lock denque and process
         if(!DownloaderThreadisRunning && queue.Count==0)
         {
            break;
         }
        } 
```

但是有没有内置的解决方案来管理这些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:33:43.130

如果您可以使用[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)比创建自己的生产者和消费者有更多的抽象。

# php - 使用 Laravel 的 Eloquent ORM 查找表：不是唯一的表别名？

> ID：15353351
> 
> 赞同：0
> 
> 时间：2013-03-12T04:30:21.690
> 
> 标签：php, laravel, eloquent

我一直在尝试将 Eloquent 用于我正在制作的应用程序（受到 Codeigniter 的保护），但我无法让它工作。

我有 3 张桌子：

*   `users`
*   `departments`
*   `department_members`（这是查找表）

`department_members`有 3 个字段：id、department_id 和 user_id。我所有的桌子都有自己的模型。当我尝试使用 ORM 获取用户的部门（`User::find(1)->member()->first()`）时，我得到的只是这个错误：

> SQLSTATE [42000]：语法错误或访问冲突：1066 不是唯一的表/别名：'users'

虽然我知道问题是什么，但我不知道如何解决它，因为它都是由 ORM 生成的。

型号：

*   会员型号

    ```
    class Member extends Eloquent {
        public static $table        = 'department_members';
        public static $timestamps   = false;

        public function user() {
            return $this->has_many_and_belongs_to('User', 'users');
        }
    } 
    ```

*   用户模型

    ```
    class User extends Eloquent {
        public static $timestamps = false;

        public function member() {
            return $this->has_many_and_belongs_to('Member', 'department_members');
        }
    } 
    ```

*   部门型号

    ```
    class Department extends Eloquent {
        public function member() {
            return $this->has_many_and_belongs_to('Member', 'department_members');
        }
    } 
    ```

这些列具有适当的名称： id 作为 PK，以及附加了 _id 的相应名称。

如果需要更多信息，我很乐意提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:47:28.807

你错误地建立了你的关系。您不需要有成员模型 - 只需一个用户和部门模型。

像这样：

```
# in User
public function departments() {
    return $this->has_many_and_belongs_to('Department', 'department_members');
}

# in Department
public function users() {
    return $this->has_many_and_belongs_to('User', 'department_members');
} 
```

不需要额外的模型。此外，您可能想在这里阅读：http: [//laravel.com/docs/database/eloquent#many-to-many](http://laravel.com/docs/database/eloquent#many-to-many) - 特别注意的是数据透视表，以防您想在连接表上做一些额外的工作关系的方面。

# file - Zend 文件传输

> ID：15353352
> 
> 赞同：0
> 
> 时间：2013-03-12T04:30:25.423
> 
> 标签：file, zend-framework, transfer

我上传有问题。
这是我的代码：

> $upload->addFilter('Rename',array('target'=>$path,'overwrite'=>true));

和错误：

> 警告：重命名（C:\xampp\htdocs\laptop/public/_upload/laptop/50\1.JPG,C:\xampp\htdocs\laptop/public/_upload/laptop/50/1.JPG）[function.rename ]： 该系统找不到指定的文件。（代码：2）在第 186 行的 C:\xampp\php\PEAR\Zend\Filter\File\Rename.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T13:36:33.427

```
$upload->addFilter('Rename',array('target'=>$path,'overwrite'=>true)); 
```

需求：

```
$upload->addFilter('Rename',array('target'=>$path,'overwrite'=>true), **string Files**); 
```

# ruby - 如何更改项目的默认 gemset 和 ruby 版本？

> ID：15353356
> 
> 赞同：1
> 
> 时间：2013-03-12T04:31:03.717
> 
> 标签：ruby, rvm

当我列出系统上的所有 Ruby 版本时，我得到以下信息：

```
$ rvm list rubies

rvm rubies

   ruby-1.8.7-p370 [ i686 ]
   ruby-1.9.2-p0 [ x86_64 ]
   ruby-1.9.2-p320 [ x86_64 ]
 * ruby-1.9.3-p194 [ x86_64 ]
=> ruby-1.9.3-p392 [ x86_64 ]
   ruby-2.0.0-p0 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

当我在项目的新终端窗口中列出 gemset 时，我看到：

```
$ rvm gemset list

gemsets for ruby-1.9.3-p392 (found in /.rvm/gems/ruby-1.9.3-p392)
   (default)
=> myapp
   boso
   global 
```

所以，我改变了`1.9.3`我想使用的版本：

```
$ rvm use 1.9.3-p194
Using /.rvm/gems/ruby-1.9.3-p194
$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /.rvm/gems/ruby-1.9.3-p194)
=> (default)
   myapp1
   myapp2
   myapp3
   myapp4
   global 
```

然后我尝试将 gemset 的默认值设置为`myapp1`版本`1.9.3-p194`并将其设置为默认值，这似乎有效：

```
$ rvm use 1.9.3-p194@myapp1 --default
Using /.rvm/gems/ruby-1.9.3-p194 with gemset myapp1 
```

但是当我启动一个新的终端窗口并执行`rvm gemset list`时，我最终回到了第 1 格 - 使用不同的 ruby​​ 版本 - 即`1.9.3-p392`而不是`-p194`.

```
$ rvm gemset list

gemsets for ruby-1.9.3-p392 (found in /.rvm/gems/ruby-1.9.3-p392)
   (default)
=> myapp
   boso
   global 
```

发生这种情况是因为我在打开新的终端窗口之前没有关闭之前的终端窗口吗？我是否必须强制 RVM 为所有会话或其他内容保存它？

我错过了什么？

我也试过`rvm --default use 1.9.3.-p194@myapp1`了，这给了我同样的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T04:44:26.940

如果您希望每个项目都有特定的 gemset 和 ruby​​ 版本，只需`.rvmrc`直接在根项目中手动创建一个文件。在该文件中添加：

```
ruby-1.9.3-p362@gemset-name --create 
```

或者，如果您不想手动创建它，您可以让 rvm 为您完成。`cd`进入项目的根目录并创建`.rvmrc`如下文件：

```
$ rvm use ruby-1.9.3-p194@gemset-name --create --rvmrc 
```

确保`.rvmrc`文件包含与此类似的行并采用以下格式：

```
 environment_id="ruby-1.9.3-p392@gemset-name" 
```

更新：

使用 RVM 时，用于为每个项目设置 ruby​​ 版本和 gemset 的约定是在项目的根目录中使用一个`.ruby-version`文件和一个文件。`.ruby-gemset`

文件`.ruby-version`如下所示：

```
ruby-2.0.0-p598 
```

文件`.ruby-gemset`如下所示：

```
my_gemset_name 
```

# asp.net-mvc-3 - 请为 MVC3 命名一些教程，它显示了从控制器到视图的数据传输

> ID：15353363
> 
> 赞同：0
> 
> 时间：2013-03-12T04:31:24.467
> 
> 标签：asp.net-mvc-3, view, model, controller

我只是 MVC 的初学者，我有疑问，如何将数据从两个 ActionResults 传递到同一个视图......然后查看如何从控制器返回这两个值......

到目前为止，我能够从数据库中列出、编辑和创建表行。我的下一步是显示一个列表和一个标签，两者都是从我在视图中收到的模型对象动态填充的......

但是我不确定如何从我在视图中收到的一个模型对象中获取两个不同的值..或者我在传递列表和值时可能是错误的，从控制器操作...

所以，请给出一些想法，或者一些好的视频或其他教程，这可以帮助我完成这一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:34:42.967

每当您想在视图中显示某些东西时。您可以选择以下选项]

1.  ViewData ：ViewData 是从 ViewDataDictionary 类派生的对象字典，可使用字符串作为键进行访问。
2.  ViewBag ：用于存储值的动态包装器。
3.  静态类型的 ViewModel 类。创建一个类并添加该特定视图所需的属性和方法。我更喜欢 viewModel

模型类

```
 public class SomePageViewModel
    {
      public string EmployeeName{get;set;}
      public string EmployeeCode{get;set;}
    } 
```

控制器

```
public ActionResult GetData()
{
  var somedata=GetSomeDataFor(SomePageviewModel obj);// change your logic here
   return view(somedata);
} 
```

在视图中使用模型

```
@model yourNamespace.SomePageViewModel 
```

对于教程，我认为此列表会对您有所帮助

1.  [Asp.net MVC 教程](http://www.asp.net/mvc/tutorials)
2.  [Pluralsight-asp.net MVC](http://www.asp.net/mvc/videos/pluralsight-building-applications-with-aspnet-mvc-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:34:58.377

最好的办法是打开 MVC 附带的示例项目。它曾经被称为书呆子晚餐，但新的是在[这里找到的电影数据库](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

您要研究的一件事是表单视图模型。本质上，您将一个类从您的操作结果传回视图并在您的视图中读取它。

像这样的东西；

```
MyModel myFVM = new MyModel
myFVM.SomeData = "Some data"
Return View(myFVM) 
```

然后你的视图需要从类继承；

```
Inherits="System.Web.Mvc.ViewPage<MyModel> 
```

然后获取值

```
<%= Model.SomeData %> 
```

# java - 以不同的顺序从测试方法返回输入，然后将它们提供给方法

> ID：15353375
> 
> 赞同：1
> 
> 时间：2013-03-12T04:32:58.810
> 
> 标签：java, arrays, testing

基本上我在返回值时需要一种延迟：因此，如果我的方法 SlowThinker 被赋予字符串“Hello”，然后是“Goodbye”，然后是“See you later”，它需要返回“”（空字符串），然后是“ Hello”，然后是“Goodbye”（依此类推，总是在其当前输入之后一个）。

到目前为止，我试图将所有输入保存在一个数组中，但我无法弄清楚我在实现中做错了什么：

```
public class SlowThinker {
private String[] sayings = new String[20];
private int i = 0;
public int increment(){
    while(true){
        i++;
        return i;
    }
}
public String transform(String stringToTransform){
    sayings[0] = "";
    sayings[increment()] = stringToTransform;
    return sayings[increment()-1];
} 
```

}

我还在另一个班级中使用以下内容作为我的测试人员：

```
assertEquals("", this.slowThinkerOne.transform("Return This Later"));
    assertEquals("Return This Later", this.slowThinkerOne
            .transform("One More Time"));
    assertEquals("One More Time", this.slowThinkerOne.transform(""));
    assertEquals("", this.slowThinkerTwo.transform("This is the Last Time")); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:37:20.767

您在方法中调用`increment()`了两次`transform()`。您可以通过将值存储在临时变量中来修复它。

```
int val = increment();
sayings[val] = stringToTransform;
return sayings[val]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:11:44.037

函数式编程的对立面。返回值不是仅基于参数，而是仅基于先前调用的参数。

```
public class SlowThinker {
    private String last = "";

    public String transform(String saying) {
        String response = last;
        last = saying;
        return response;
    }
} 
```

# google-app-engine - 如何使用 oauth2 在 bulkloader 中下载数据

> ID：15353384
> 
> 赞同：0
> 
> 时间：2013-03-12T04:34:07.187
> 
> 标签：google-app-engine, oauth, oauth-2.0, google-oauth, bulkloader

我在Python中使用builkloader，我的命令如下：

```
appcfg.py download_data --config_file=bulkloader.yaml --filename=all.csv --kind=all 
  --url=http://myapp.appspot.com/remote_api --namespace=mynamespace 
```

成功了，输入邮箱和密码后就可以正常下载了。我不想手动输入电子邮件和密码，并尝试 --oauth2 选项。但它仍然提示我在控制台中输入电子邮件和密码。

我试图谷歌它，但没有理由。

感谢先进！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:23:27.727

我想你正在寻找这个

```
appcfg.py --oauth2_refresh_token=token update myapp/ 
```

[链接到文档](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth)

# android - Gson序列化错误类com.activeandroid.DatabaseHelper声明了多个名为mContext的JSON字段

> ID：15353386
> 
> 赞同：5
> 
> 时间：2013-03-12T04:34:08.037
> 
> 标签：android, gson, resttemplate, android-annotations, activeandroid

我得到的错误是“java.lang.IllegalArgumentException：com.activeandroid.DatabaseHelper 类声明了多个名为 mContext 的 JSON 字段”

我正在使用 AndroidAnnotations RestClient 从我的 Web 服务中提取数据并序列化为 POJO。使用 ORMLite 时序列化工作正常，但我最近决定尝试 Active Android，现在我的类扩展了 Model。Gson 正在序列化我无法控制的父类。无论如何，我只能包含某些字段，或者只是从 RestClient 返回纯 JSON 并以不同的方式进行序列化

```
@Rest(rootUrl = "http://stuff...com", converters = { GsonHttpMessageConverter.class })
    public interface RestClient {
    @Get("/AndroidController/createFacebookUser?facebookToken={facebookToken}&catIds=    {catIds}")
    User createFacebookUser(String facebookToken,String catIds);
} 
```

用户模型是

```
@Data
@Table(name = "Users")
public class User extends Model {
@Column(name = "SystemID")
private String systemID;
@Column(name = "Name")
private String name;
public List<GameEntry> items() {
    return getMany(GameEntry.class, "Category");
}

public User(){} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T05:07:03.323

Gson 提供了多种从序列化和反序列化中排除字段和类型的方法。看看[从序列化和反序列化中排除字段](https://sites.google.com/site/gson/gson-user-guide#TOC-Excluding-Fields-From-Serialization-and-Deserialization)`@Expose`，特别是注释和用户定义的用法[`ExclusionStrategy`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/ExclusionStrategy.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T01:45:43.483

我创建了自己的序列化器，它在此处的答案之后扩展了 AbstractHttpMessageConverter

[使用 @ResponseBody 自定义 HttpMessageConverter 来做 Json 事情](https://stackoverflow.com/questions/5019162/custom-httpmessageconverter-with-responsebody-to-do-json-things)

我唯一改变的是我制作了 Gson 并在我想要序列化的字段上使用了 @Expose

```
private Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create(); 
```

# php - 在将 sql 行添加到 php 中的数组之前编辑它？

> ID：15353387
> 
> 赞同：0
> 
> 时间：2013-03-12T04:34:12.973
> 
> 标签：php, mysql, arrays

我有一个 php 脚本，它从 sql 数据库中获取数据，然后将其添加到数组中并在 json 中对其进行编码，然后打印出来，但是我想在其中一个项目被添加到数组之前对其进行编辑，我将如何进行编辑`$row['name']`在它被添加到数组之前？

对不起，如果这真的令人困惑！

```
$con = mysql_connect("localhost","username","password");
mysql_select_db("database", $con);

        $result = mysql_query("SELECT name,email,phone FROM table;");       
        $rows = array();
        while($row = mysql_fetch_array($result))
        {           
            $rows[] = $row;
         }
        $jTableResult = array();
        $jTableResult['aaData'] = $rows;
        print json_encode($jTableResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:43:24.157

你可以这样添加：

```
while($row = mysql_fetch_array($result))
{
if($row['name'])
{
// do here what you want.
}  
$rows[] = $row;
} 
```

也许它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:44:48.833

```
while($row = mysql_fetch_array($result))
{ 
    $row['name'] = YourFunction($row['name']); //change it however you want
    $rows[] = $row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:29:37.087

根据您想要修改的方式`$row['name']`，您可能会发现 MySQL 的[String 函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)很有用。

我假设您想在查询中进行此修改。

```
// Add a string to the end of name
$result = mysql_query("SELECT CONCAT(name, 'string') name, email, phone FROM table");

// Or try replacing a part of the string
$result = mysql_query("SELECT REPLACE(name, 'old', 'new') name, email, phone FROM table");

$rows = array();
while ($row = mysql_fetch_array($result)) {           
  $rows[] = $row;
} 
```

*   [CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)文档
*   [REPLACE()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)文档

# php - PHP echo 添加空格

> ID：15353389
> 
> 赞同：3
> 
> 时间：2013-03-12T04:34:15.803
> 
> 标签：php, html

显示当前登录的用户名后如何获得一些空格？只需要几个空格，因为它遇到了别的东西。

```
<?php 

if ( is_user_logged_in() ) {
global $current_user;
      get_currentuserinfo();

echo '<span class="white-text">Welcome, &nbsp;' .$current_user->user_firstname     .       "</span>\n";}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:35:52.010

```
echo '<span class="white-text">Welcome, &nbsp;' .$current_user->user_firstname . "  &nbsp; &nbsp;&nbsp;&nbsp; </span>\n"; 
```

每个  是一个“不间断的空间”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T04:36:38.353

更好的方法是不添加更多空格，而是添加边距：

```
<span class="white-text" style="margin-right: 5em;"> 
```

更改`5em`为其他数字以更改空间量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:44:39.130

您的代码不起作用，因为多余的空格被忽略了，这是正常的。只会输出第一个空格字符，如果需要更多，请使用`&nbsp;`（不间断空格）。

您还可以使用 CSS 在文本上添加边距：

```
span.white-text {
    margin: 5px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-06T13:11:23.323

我遇到过类似的问题，经过多次试验和错误后发现这适用于我的代码行，在名字和姓氏之间插入一个空格 - 所以类似的东西可能适合你的......

```
<option value=<?php echo $row ["First_Name"], "&nbsp;", $row["Surname"] ; ?>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T04:38:25.093

试试这个

```
echo "<span class='white-text'>Welcome," . " " .$current_user->user_firstname."</span>\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-13T18:56:16.027

```
echo "<td>" . $info['id'] . "</td>";
echo "<td></td>";
echo "<td></td>";
echo "<td>" . $info['refid'] . "</td>";
echo "<td></td>";
echo "<td></td>";
echo "<td>" . $info['username'] . "</td>"; 
```

# c++ - 霍夫曼树创建 C++

> ID：15353392
> 
> 赞同：0
> 
> 时间：2013-03-12T04:34:23.730
> 
> 标签：c++, object, loops, memory, huffman-code

我有一个 Node *left 和 Node *right 作为变量的类 Node。现在我有一个函数来构建霍夫曼树，如下所示

```
int x = pQueue.size();

for(int i=0;i<x-1;i++){

    Node *z = new Node;
    z->left = &pQueue.extractMin();
    z->right = &pQueue.extractMin();
    z->setchar(NULL);
    z->setfrequency(z->left->getFrequency() + z->right->getFrequency());
    pQueue.insert(z);

} 
```

这是创建霍夫曼树的标准函数。然而问题是这样的。最初，当创建一个新的 Node* z 并分配其左右子节点时，在循环的下一次执行期间，z 的左右子节点被重新分配，并且我丢失了最初分配的值。我的印象是，在每次执行循环期间，都会创建新对象，并且其左右子对象将具有不同的内存位置。但这并没有发生。每次执行循环时如何创建一个新对象。??

这是我得到的

![在此处输入图像描述](../Images/0f14dab9e2819886779ed0386d16f1c7.png)

如果您检查频率为 14 的节点在第一次执行中分配了一些内存位置作为其左右子节点。但是在下一次执行中，频率 14 节点的左右子节点为空，频率 25 节点的子节点设置为先前的位置。我希望它们在第一轮中分配给频率 14 节点和频率 25 节点的新位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:09:36.933

如果如您所说，pQueue 是 Node 对象的向量（并且我假设 std::vector - 如果不是，请忽略答案！），通过使用 vector::insert()，您实际上是在添加一个迭代器而不是一个节点对象。尝试这样的事情：

```
int x = pQueue.size();

for(int i=0;i<x-1;i++){

    Node z;
    z.left = &pQueue.extractMin();
    z.right = &pQueue.extractMin();
    z.setchar(NULL);
    z.setfrequency(z.left->getFrequency() + z.right->getFrequency());
    pQueue.push_back(z);
} 
```

# c# - 果园是正确的选择吗？SQL Azure，VS 2010

> ID：15353399
> 
> 赞同：1
> 
> 时间：2013-03-12T04:35:09.870
> 
> 标签：c#, architecture, asp.net-mvc-4, orchardcms

我正在做一个项目，我们将在后端构建一个面向公众的网站，其中包含一组经过身份验证的表单，我们的要求是将其构建并部署到 Windows Azure；从架构的角度来看，我们计划利用 CMS 让管理员用户填充内容，并在整个应用程序中构建和部署一组 MVC 页面。

我花了几天时间研究 Orchard，但找不到有关如何将自定义页面构建为 MVC 项目的一部分并将它们部署到 Windows Azure 中托管的 Orchard 解决方案的指导。也许我在这件事上走错路了？下载源代码并对其进行自定义，然后将其部署到 Azure？！

没有太多指导，这已经过时了 - [http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure)

有什么想法吗？其他基于 .NET 的 CMS？有人指出我让这个果园成长的正确方向吗？这将是一个巨大的产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:19:06.687

我建议的一件事是，您将是否需要 CMS 的决定推迟到可能的最新时刻。您可以在任何时候将原版 MVC 应用程序转换为 Orchard 模块，但是一旦您进行了转换，您将无法在没有大量返工的情况下恢复它。我在最近的一个项目中发现了这一点。在我们真正了解我们是否真的需要该项目的 CMS 之前，组织中的某个人决定使用 Orchard。问自己这些问题：

1.  网站中有多少内容是管理员用户需要自行更新的内容？
2.  您需要在自定义内容区域之外构建多少功能？
3.  是否存在开箱即用的 Orchard 安装不支持的业务需求？

如果第 1) 点超过第 2) 和 3) 点，那么您现在可能有理由沿着果园路线走下去。如果 2) 和/或 3) 更为普遍，我建议在不影响项目的情况下尽可能推迟该决定。如果您决定使用 Orchard 并且必须对其进行自定义，请为陡峭的学习曲线做好准备，因为我发现它很难理解。它做什么，它做得非常好。如果您必须对其进行大量定制，请尝试找到以前使用过它的人。正是出于这个原因，而且仅凭这个原因，我最终才掌握了它。

就与 Azure 的集成而言，它运行良好。只需确保创建一个自定义 .deployment 文件，告诉 Azure 部署 Web 文件夹的内容。如果您创建自定义模块，它将只是您应用程序中的一个 Web 项目，但它将位于 Orchard 应用程序结构内的 Modules 文件夹中，并且需要与 Orchard 代码库的其余部分一起部署。Orchard 数据迁移使您的域模型的架构更新在您的数据库中更新非常简单，即使在 SQL Azure 中也是如此，这是一个非常好的功能。

# file - 打开以前保存的 matlab 文件

> ID：15353402
> 
> 赞同：0
> 
> 时间：2013-03-12T04:35:37.810
> 
> 标签：file, matlab, loading

我是matlab的新手。我正在使用matlab r2010b。我保存了一个 .mat 文件，但无法在 matlab 中打开它。是否有我必须使用的功能来查看文件？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:41:37.963

检查[load](http://www.mathworks.in/help/matlab/ref/load.html)和[importdata](http://www.mathworks.in/help/matlab/ref/importdata.html)。变量将具有您存储它们的名称。

# javascript - 单页网站的客户端模板

> ID：15353407
> 
> 赞同：1
> 
> 时间：2013-03-12T04:35:58.067
> 
> 标签：javascript, templating

通常在 CMS 中，有一个模板引擎，我们在其中定义“模板化 html 页面”，当访问特定页面的 URL 时，它会返回“模板化”呈现的页面。

但是，我想做单页站点并将其部署在 CMS 中，同时利用在客户端运行的模板引擎。

在我当前的设置中，我有一个“根”页面，其中其他页面被注入到指定的 div 中，例如：

```
<body>
   $page.content
</body> 
```

在此根页面中注入的内容页面使用如下 URL 进行映射：`/home` `/blog` `/etc`

使用模板支持实现这样的单页网站有哪些选择？我需要的是一个 JS 模板引擎，它不需要任何服务器端后端或其他东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:41:37.757

如果喜欢模板引擎，请尝试[http://mustache.github.com/](http://mustache.github.com/)这将有所帮助

# powershell - PowerShell 和 ActiveDirectory 模块 - 查找不是特定组成员的用户

> ID：15353414
> 
> 赞同：7
> 
> 时间：2013-03-12T04:37:23.620
> 
> 标签：powershell, active-directory

上周，我第一次接触到 PowerShell 和 ActiveDirectory。我希望能够找到不是管理员或域管理员的用户列表。

到目前为止，我知道如何使用以下命令/语句获取所有 ActiveDirectory 用户的所有属性：

```
Get-ADUser -Filter * -Properties * 
```

我想做的是只打印当前 ActiveDirectory 用户的用户名——不是管理员或域管理员。

这是我正在尝试做的一些伪代码/Powershell代码：

```
$users = Get-ADUser -Filter * -Properties *
foreach($u in $users){
    if ($u isn't an administrator OR $u isn't a domain administrator){ 
        Write-Host "User Name:" $u.Name
    }
} 
```

当我运行`Get-ADUser -Filter * -Properties *`命令时，我看到了`MemberOf`每个用户的属性——我认为这可能是一个线索。我还`AdminCount`从通过谷歌找到的各种来源听说过（有什么叫做的东西`DomainAdminCount`吗？）。

我被特别要求不要为 ActiveDirectory 使用 PowerShell 扩展——尽管各种消息来源都说拥有这个扩展会更容易。

我花了大约 2 个小时测试各种语句组合，但我的新手 PowerShell 状态对我没有太大帮助。我将不胜感激任何帮助，以及任何反馈背后的一些明确解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T05:55:46.767

这是非常简单的任务，您不需要先检索所有用户并循环：

```
$DomainsAdminsDn = (Get-ADGroup 'Domain Admins').DistinguishedName
Get-ADUser -Filter { -not (memberof -eq $DomainsAdminsDn) }
# OR
Get-ADUser -LDAPFilter "(!(memberof=$DomainsAdminsDn))" 
```

您可以对任何其他组执行相同操作。

**编辑**：反向查询，返回**不在**组中的帐户。顺便说一句，这不起作用：

```
Get-ADUser -Filter { memberof -ne $DomainsAdminsDn } 
```

它将跳过不属于任何其他组的所有帐户，而不是默认帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-02T16:29:27.983

我使用了你们每个人贡献的一点点，并对其进行了调整。我需要找出谁不属于一个群体，我只需要他们的名字。让我知道这是否对您有所帮助。

```
$Internet_Users = Get-ADGroup -Filter {Name -like "Internet_Users" }
Get-ADUser -Filter { -not (memberof -eq $Internet_Users) -and (enabled -eq "True" -and objectclass -eq "user")} |Select Name | Export-CSV "C:\Users\YOURNAME\Documents\Enabled_Users_Without_Internet_Users_Group.csv" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:23:15.403

借助 BartekB 的一些非常有用的反馈，我能够实现以下解决方案：

```
## This variable gets all the users that are Domain Administrators
$DomainsAdminsDn = (Get-ADGroup 'Domain Admins').DistinguishedName

## This variable gets all the users that are Administrators
$AdministratorsDn = (Get-ADGroup 'Administrators').DistinguishedName

## This line will get all the users that are not "Domain Administrators" or "Administrators"
Get-ADUser -Filter {(memberOf -ne $AdministratorsDn) -and (memberOf -ne $DomainsAdminsDn)} 
```

对于最后一行，我想组合这两个变量以使过滤更加具体（即查找不是管理员或域管理员的用户）。我不得不花大约 10 分钟的时间来寻找与 && 运算符等效的 PowerShell ——这正如我所怀疑的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T21:24:39.157

事实证明，“域用户”是经过特殊处理的，因此如果您尝试查找不在该组中的人，它将无法正常工作。

基于以下代码： http: [//powershell.org/wp/forums/topic/find-users-not-in-a-group/](http://powershell.org/wp/forums/topic/find-users-not-in-a-group/)

```
Import-Module ActiveDirectory
$users = Get-ADUser -Filter {Enabled -eq $true} -Properties MemberOf, PrimaryGroup
$dugDn = (Get-ADGroup "Domain Users").DistinguishedName
foreach ($user in $users)
{
    Write-Verbose "Working on $($user.Name)"
    $groups = $user.MemberOf, $user.PrimaryGroup
    if ($groups -NotContains $dugDn)
    {
        Write-Host "$($user.SamAccountName) not in the domain users group"
    }
} 
```

# sugarcrm - 使用 Restull API 通过用户 id 获取角色

> ID：15353415
> 
> 赞同：0
> 
> 时间：2013-03-12T04:37:33.690
> 
> 标签：sugarcrm

我正在尝试获取某个用户的角色（通​​过其 id），目前我这样做：

*$this 是 SugarCRM 之外的自制 API 访问，会话是隐式发送的*

```
$roles = $this->get_entry_list('ACLRoles', null, null, null, array('name'));
       if ($roles) {
            foreach ($roles->entry_list as $role) {
                $result = $this->get_relationships('ACLRoles', $role->id, 'users', 'user_id=' . $userId);
                if (count($result->entry_list) > 0) {
                    return array(
                        'id' => $role->id,
                        'name' => $role->name_value_list->name->value
                    );
                }
            }
       } 
```

但是，我认为这是一个低效的解决方案，因为我需要遍历所有角色以检查用户是否在那里......我一直在查看 API 并尝试其他方法，但我无法找到关系用户-> ACLRoles，只有 ACLRoles -> 用户...

有没有更好的方法来获得用户的角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:17:28.070

另一种选择是通过您自己的自定义端点添加新的 Web 服务调用。这实际上很简单，请参阅此知识库文章了解更多详细信息...

[http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.6/02_Application_Framework/Web_Services/06_Extending_Web_Services](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.6/02_Application_Framework/Web_Services/06_Extending_Web_Services)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:27:46.960

我在 Sugar 6.5.8 中使用 get_relationships 通过 SOAP 服务检索给定用户的角色。

```
get_relationships(sessionId, "Users", userId, "aclroles", "", array("id", "name")) 
```

注意：link_field_name (4th) 参数似乎是区分大小写的，但如果你像 module_name 参数一样弄错了它不会出错...它只是被忽略并且不返回任何记录。

# knockout.js - 敲除数据绑定到数组元素只有一半工作

> ID：15353417
> 
> 赞同：0
> 
> 时间：2013-03-12T04:37:51.653
> 
> 标签：knockout.js

我正在绑定到数组内的可观察对象，并且绑定似乎仅在第一次从模型中读取值时才会生效。随后对绑定到可观察对象的输入进行更改不会更新模型。

JSFiddle 在这里：http: [//jsfiddle.net/coverbeck/hK49f/88/](http://jsfiddle.net/coverbeck/hK49f/88/)。这是HTML：

```
<div>
    <input data-bind="value: work"/>
    <span data-bind="text: work"></span>
</div>
<!-- ko foreach: nowork -->
<div>
    <input data-bind="value: $data"/>
    <span data-bind="text: $data"></span>
</div>
<!-- /ko --> 
```

和 JavaScript：

```
var viewModel = {
    work: ko.observable('Change me and span changes'), 
    nowork : [ko.observable("Change me and span doesn't update")]
}
ko.applyBindings(viewModel); 
```

当您在第一个输入中键入内容时，绑定到可观察的范围会更新。当您在第二个输入中键入内容时，绑定到数组内可观察对象的跨度不会更新。但是那个输入和跨度开始正确。

使“nowork”成为 ko.observableArray 而不是普通数组没有任何区别（我也不希望它这样做）。

我觉得我错过了一些明显的东西，但我不明白是什么。有人知道发生了什么吗？

谢谢，

查尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:10:02.630

问题是 foreach 绑定，在 foreach 绑定中，您将输入绑定到`$data`并且`$data`属性不是可观察的，而是未包装的可观察的（仅可观察的内容）。这就是为什么更改输入字段不会改变您的可观察属性值的原因。

您应该将输入与可观察的绑定。这是一个工作小提琴

[http://jsfiddle.net/w7WQh/](http://jsfiddle.net/w7WQh/)

# java - 异常 java.lang.ClassCastException

> ID：15353419
> 
> 赞同：0
> 
> 时间：2013-03-12T04:37:59.937
> 
> 标签：java, jsf-2

我试图从表中只读取两列（一列是整数，另一列是字符串）并获取结果列表。我正在阅读表格`EntityManger`，如下面的代码所示。此代码正确执行，没有异常出现。

```
@SuppressWarnings("unchecked")
public List<BusinessProcessIdAndName> getBusinessProcessList(int level) {
    List<BusinessProcessIdAndName> businessProcessTableList = new        ArrayList<BusinessProcessIdAndName>();
    EntityManager em = null;
    try {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory(ApplicationConstants.DERBY_PERSISTENCE_UNIT_NAME);
        em = emf.createEntityManager();
        EntityTransaction et = em.getTransaction();
        et.begin();
        Query query = em.createQuery("select t.businessProcessId, t.businessProcessName from BusinessProcessTable t");
        businessProcessTableList = query.getResultList();
        // The line below displays the correct result, The logger is basically a System.out.println  
        logger.debug(businessProcessTableList.size());
    } 
    catch(Exception e) {
        logger.debug("Exception Caught while getting BP List: " + e);
    }
    return businessProcessTableList;
} 
```

`BusinessProcessIdAndName`类如下

```
public class BusinessProcessIdAndName {

    private Integer businessProcessId;
    private String businessProcessName;

    public Integer getBusinessProcessId() {
        return businessProcessId;
    }

    public void setBusinessProcessId(Integer businessProcessId) {
        this.businessProcessId = businessProcessId;
    }

    public String getBusinessProcessName() {
        return businessProcessName;
    }

    public void setBusinessProcessName(String businessProcessName) {
        this.businessProcessName = businessProcessName;
    }

} 
```

然后在托管 Bean 中，我使用上述代码的结果，如下所示。在这里我得到了异常

> java.lang.ClassCastException：[Ljava.lang.Object；与 com.ewt.ewtalmutil.object.BusinessProcessIdAndName 不兼容

我知道这个异常表示对象不匹配并且它们不兼容，但是我认为我的对象应该是兼容的，请告诉我我错在哪里以及正确的方法是什么。

```
public SelectCriteriaBean () {
    logger.entering(CLASS_NAME);
    this.businessProcessLevelZeroList = new ArrayList<SelectItem>();
    List<BusinessProcessIdAndName> tempBusinessProcessLevelZeroList = new BusinessProcessTableManager().getBusinessProcessList(0);
    // The line below also displays correct result
    logger.debug(tempBusinessProcessLevelZeroList.size());
    // The line below gives Exception: java.lang.ClassCastException: [Ljava.lang.Object; incompatible with com.ewt.ewtalmutil.object.BusinessProcessIdAndName
    try {
        Iterator<BusinessProcessIdAndName> iterator = tempBusinessProcessLevelZeroList.iterator();
    }
    catch (Exception e) {
        logger.debug("Exception: " + e);
    }
    while (iterator.hasNext()) {
        BusinessProcessIdAndName businessProcessIdAndName = new BusinessProcessIdAndName();
        businessProcessIdAndName = iterator.next();
        // The Exception/Error comes in the line below 
        String businessProcessName = businessProcessIdAndName.getBusinessProcessName();
        int businessProcessId = businessProcessIdAndName.getBusinessProcessId();
        String businessProcessIdString = String.valueOf(businessProcessId);
        SelectItem item = new SelectItem(businessProcessIdString,businessProcessName);
        businessProcessLevelZeroList.add(item);
    }
    setBusinessProcessLevelOneListRendered(false);
    setAddBusinessProcessRendered(false);
    logger.exiting(CLASS_NAME);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:55:27.350

考虑以下三个例子。

*   如果您尝试选择表的所有列。然后你必须像下面的代码那样编写你的程序。

例如

```
Query q = em.createQuery("SELECT t FROM BusinessProcessTable t");    
List<BusinessProcessTable > result = q.getResultList(); 
```

*   如果您尝试获得单个但表格的所有列。然后你必须像下面的代码那样编写你的程序。

例如

```
Query q1 = em.createQuery("SELECT t FROM BusinessProcessTable t WHERE t.id = :id");
q1.setParameter("id", "4711");
BusinessProcessTable e = (BusinessProcessTable )q1.getSingleResult(); 
```

*   如果您试图获取表的选择性列的所有记录，则返回类型将是对象列表。你应该像下面的代码那样编写你的程序。

例如

```
 Query q1 = em.createQuery("SELECT t.name, t.salary FROM BusinessProcessTable t");
        List<Object[]> result1 = q1.getResultList();
        for (Object[] resultElement : result1) {
            String name = (String)resultElement[0];
            Double salary = (Double)resultElement[1];
            ...
        } 
```

# precision - Ada 定点类型的限制

> ID：15353425
> 
> 赞同：2
> 
> 时间：2013-03-12T04:38:32.897
> 
> 标签：precision, ada, fixed-point, delta

阅读这个[http://en.wikibooks.org/wiki/Ada_Programming/Types/delta](http://en.wikibooks.org/wiki/Ada_Programming/Types/delta) 让我想知道极限值`delta`是多少。

例如

```
delta 127 range 0..1_000_000; 
```

需要一个字节来保存增量值。

但

```
delta 0.0000000001 range 0..1; 
```

需要更多字节，对吗？

那么delta有限制吗？当然，我们不能无限地进行更小的增量吗？

在上面的链接中它说

> 如果编译器接受您的定点类型定义，则它保证由该类型表示的值将至少具有指定的准确度（或更好）。如果编译器不支持类型定义（例如，由于硬件有限），则会导致编译时错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:25:03.797

编译后的代码不会在`Delta`任何地方保存该值；类型的存储值被缩放，因此所需的大小对应于除以的范围`Small`（请记住，如果`Delta`不是 2 的幂，则需要指定`Small`与 相同`Delta`）。

对于 GNAT，事实证明存在 的最小支持值`Delta`，并且`Size`对于以下类型的对象存在最大值： 在 Mac OS X (Intel) 上，

```
Small_Delta : constant := 2.0 ** (-127);
Small_Bound : constant := 2.0 ** (-64);
type T1 is delta Small_Delta range -Small_Bound .. Small_Bound; 
```

失败了

```
"T1'Small" too small, minimum allowed is 2.0**(-80) 
```

和

```
Larger_Delta : constant := 2.0 ** (-64);
Larger_Bound : constant := 2.0;
type T2 is delta Larger_Delta range -Larger_Bound .. Larger_Bound; 
```

失败了

```
size required (67) for type "T2" too large, maximum allowed is 64 
```

（我不确定为什么是 67，而不是 65！）

# c# - 使用委托时出错：类、结构或接口成员声明中的标记“void”无效

> ID：15353428
> 
> 赞同：2
> 
> 时间：2013-03-12T04:38:55.583
> 
> 标签：c#, delegates

声明委托时出现此错误：“类、结构或接口成员声明中的令牌无效”

![在此处输入图像描述](../Images/6aa83045364bd07fcd6aab41ee27834d.png)

有人可以提出这个错误的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:41:02.097

使用`delegate`代替`Delegate`

```
 public delegate void ShowDel(string msg); 
```

> Delegate 类是委托类型的基类。但是，只有系统和编译器可以显式地从 Delegate 类或 MulticastDelegate 类派生。也不允许从委托类型派生新类型。Delegate 类不被视为委托类型；它是一个用于派生委托类型的类。大多数语言都实现了委托关键字，并且这些语言的编译器能够派生自 MulticastDelegate 类；因此，用户应该使用语言提供的delegate关键字。[MSDN](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)

# asp.net-mvc-3 - 我可以在一个解决方案中使用多个子域吗？

> ID：15353430
> 
> 赞同：1
> 
> 时间：2013-03-12T04:39:25.647
> 
> 标签：asp.net-mvc-3, subdomain, .net-4.5

是否可以有一个带有主 Web 项目的解决方案并将不同的项目设置为子域？

例如，在一种解决方案下，将有：

1.  一个数据项目
2.  主要的“网络”项目——`www.example.com`
3.  另一个网络项目 -`www.blog.example.com`
4.  另一个网络——`www.foobar.example.com`

我已经看到与此相关的大多数帖子都是关于路由的 - 但是有一些内置的方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:59:17.923

解决方案只是组织项目组的一种便捷方式。Web 项目充当不同的应用程序，所以我不明白为什么每个项目不应该在单独的（自己的）（子）域下工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:01:07.487

您必须在 IIS 中为每个 Web 项目设置 3 个不同的网站并分配绑定：

![在此处输入图像描述](../Images/153542ffc8a90071338435a35a6d304e.png)

这样 IIS 就知道根据子域名将请求路由到哪个网站。

*在开发机器上，您需要*主机文件*中指向 localhost - 127.0.0.1 的域条目。

# sql - 在 varchar 列中查找包含符号的行

> ID：15353438
> 
> 赞同：-2
> 
> 时间：2013-03-12T04:40:15.810
> 
> 标签：sql, sql-server, sql-server-2008

如何选择 varchar 列包含 SQL Server 视为符号的任何字符的行？符号可以在字符串中的任何位置。

是否有与 C#`char.IsSymbol()`函数等效的 SQL Server？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T04:53:32.160

假设您对“符号”的定义是任何非字母数字字符。

**您需要使用 SQL Server 的`LIKE`功能。**

这将分别在开始、结束和任何地方找到包含非字母数字的行。

```
Select * from MyTable where MyColumn like '[^a-zA-Z0-9]%'  -- Starts With 
```

或者

```
Select * from MyTable where MyColumn like '%[^a-zA-Z0-9]' -- Ends With 
```

或者

```
Select * from MyTable where MyColumn like '%[^a-zA-Z0-9]%' -- contains 
```

最后一个的表现异常糟糕。

**参考**

*   [喜欢的 MSDN](http://msdn.microsoft.com/en-us/library/ms179859.aspx)
*   [类似问题](https://stackoverflow.com/questions/1919757/sql-server-2008-query-to-find-rows-containing-non-alphanumeric-chararacters-in-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:47:42.117

**C#**
U 可用于`Indexof()`搜索第一次出现的符号`car`并与 0 进行比较以检查它是否存在于列值的开头。

您可以使用`LastIndexof()`搜索符号的最后出现`car`并与 inputstring.Length-3 进行比较以检查最后是否存在汽车。这里 inputstring 是列值。

**SQL Server**
使用`CHARINDEX()`函数查找符号出现的位置`car`

```
Select * from Table
where CHARINDEX('car',column_name)=1 or CHARINDEX('car',column_name) = LEN(column_name)-3 
```

注意：**CHARINDEX()**返回的起始位置是从 1 开始的，而不是从 0 开始的。

# java - 在java中将音频转换为字节数组后实际存储了什么？

> ID：15353450
> 
> 赞同：5
> 
> 时间：2013-03-12T04:41:38.057
> 
> 标签：java, audio

实际上我正在使用 LSB 替换算法来实现音频隐写术。我正在使用以下代码将音频转换为字节数组：

```
 File src = new File("C:\\test.wav");
    AudioInputStream ais = AudioSystem.getAudioInputStream(src);
    byte[] data = new byte[ais.available()];
    int n = ais.read(data); 
```

现在问题是这个音频文件是 16 位样本长度、双通道和 LittleEndian；我使用“isBigEndian()”函数检查了这个。因此，我想知道样本是如何存储在字节数组中的，以便我知道要替换哪些位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:09:49.787

你如何将音频转换为字节数组？

实际存储的是样本数组。如果你有一个特定频率的干净单音，你会得到一个遵循正弦曲线的阵列。这是一个完美正弦波的示例：

127,130,133,136,139,142,145,148,151,154,157,160,163,166,169,172,175,178,181,184,186,189,192,194,197,200,202,205,207,209,212,214,216,218,221,223,225,227,229,230,232,234,235,237,239,240,241,243,244,245,246,247,248,249,250,250,251,252,252,253,253,253,253,253,254,253,253,253,253,253,252,252,251,250,250,249,248,247,246,245,244,243,241,240,239,237,235,234,232,230,229,227,225,223,221,218,216,214,212,209,207,205,202,200,197,194,192,189,186,184,181,178,175,172,169,166,163,160,157,154,151,148,145,142,139,136,133,130,127,123,120,117,114,111,108,105,102,99,96,93,90,87,84,81,78,75,72,69,67,64,61,59,56,53, 51,48,46,44,41,39,37,35,32,30,28,26,24,23,21,19,18,16,14,13,12,10,9,8,7, 6,5,4,3,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,2,3,3,4, 5,6,7,8,9,10,12,13,14,16,18,19,21,23,24,26,28,30,32,35,37,39,41,44,46, 48,51,53,56,59,61,64,67,69,72,75,78,81,84,87,90,93,96,99,102,105,108,111,114,117,120,123

如果您有一个 16 位流，您应该使用 short[] 来存储它，这样您就不必担心大/小端。如果您选择使用 byte[]，它将是音频样本数量的两倍，并且需要组合两个连续的字节来表示一个样本。

# javascript - Javascript相当于爆炸

> ID：15353452
> 
> 赞同：0
> 
> 时间：2013-03-12T04:41:47.773
> 
> 标签：javascript

我最初的想法是从使用 JSON 接收的 URL 中获取某个数字

**[http://fh13.fhcdn.com/static/img/nations/14.png](http://fh13.fhcdn.com/static/img/nations/14.png)**

我将如何使用 Javascript仅收到**14 个？**我会使用 split() 还是不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:44:50.863

要获取所有号码：

```
var url = "http://fh13.fhcdn.com/static/img/nations/14.png";
url.match(/\d+/g);   // returns ["13","14"], so url.match(/\d+/g).pop() == "14" 
```

或者抓取“14.png”然后 parseInt()：

```
parseInt( url.match( /\d+\D*$/g ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:48:17.987

你可以这样做：

```
var l = "http://fh13.fhcdn.com/static/img/nations/14.png";
var larr = l.split("/");
var laast = larr.pop();
console.log(laast.split(".")[0]); //gets 14 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T04:48:28.683

是的，分裂是要走的路...

```
var n = '14.jpg';
var p = n.split('.');
console.log(p[0]); 
```

此外，如果文件名中有一个点，您可以试试这个：

```
var n = 'file.14.jpg';
var p = n.split('.');
p.pop(); //removes the extension
console.log(p.join('.')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T04:48:36.290

```
var url = "http://fh13.fhcdn.com/static/img/nations/14.png";

var index = url.lastIndexOf("/");
var dotIndex = url.indexOf(".", index);

console.log(url.substring(index+1,dotIndex));  // Prints 14 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T04:48:40.300

如果你总是有相同的结构可以使用

```
var url = "http://fh13.fhcdn.com/static/img/nations/14.png";
var n = ((url.split(".")[2]).split("/"))[4]; //return 14 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T04:45:27.487

您可以使用`split()`. 它的第一个参数可以是字符串或正则表达式。因此，如果您想根据多个分隔符拆分字符串，您只需形成字符的快速正则表达式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T04:48:49.263

与 相比， String`.split`更等同于`preg_split`（或已弃用`split`）`explode`，因为它也采用正则表达式并且其使用方法不同，但实际上可以以相同的方式使用。

```
url.substring(url.lastIndexOf('/') + 1).split('.')[0] 
```

您还可以将`.lastIndexOf('.')`用作 的第二个参数`substring`。

# android - 在android中单击和双击一个按钮

> ID：15353457
> 
> 赞同：7
> 
> 时间：2013-03-12T04:42:08.347
> 
> 标签：android, button, onclicklistener

在我的应用程序中，我有一个按钮。单击按钮和双击按钮后将执行单独的操作。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T04:46:20.960

您可能需要创建一个延迟变量，以区分单击和双击。

看到这段代码，

```
private static final long DOUBLE_PRESS_INTERVAL = 250; // in millis
private long lastPressTime;

private boolean mHasDoubleClicked = false;

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {    

        // Get current time in nano seconds.
        long pressTime = System.currentTimeMillis();

        // If double click...
        if (pressTime - lastPressTime <= DOUBLE_PRESS_INTERVAL) {
            Toast.makeText(getApplicationContext(), "Double Click Event", Toast.LENGTH_SHORT).show();
            mHasDoubleClicked = true;
        }
        else {     // If not double click....
            mHasDoubleClicked = false;
            Handler myHandler = new Handler() {
                 public void handleMessage(Message m) {
                      if (!mHasDoubleClicked) {
                            Toast.makeText(getApplicationContext(), "Single Click Event", Toast.LENGTH_SHORT).show();
                      }
                 }
            };
            Message m = new Message();
            myHandler.sendMessageDelayed(m,DOUBLE_PRESS_INTERVAL);
        }
        // record the last time the menu button was pressed.
        lastPressTime = pressTime;      
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-10-24T18:48:10.430

那么它很简单只是覆盖。

> OnClickListener 的 onClick 方法

```
public abstract class DoubleClickListener implements View.OnClickListener {
private static final long DEFAULT_QUALIFICATION_SPAN = 200;
private boolean isSingleEvent;
private long doubleClickQualificationSpanInMillis;
private long timestampLastClick;
private Handler handler;
private Runnable runnable;

public DoubleClickListener() {
    doubleClickQualificationSpanInMillis = DEFAULT_QUALIFICATION_SPAN;
    timestampLastClick = 0;
    handler = new Handler();
    runnable = new Runnable() {
        @Override
        public void run() {
            if (isSingleEvent) {
                onSingleClick();
            }
        }
    };
}

@Override
public void onClick(View v) {
    if((SystemClock.elapsedRealtime() - timestampLastClick) < doubleClickQualificationSpanInMillis) {
        isSingleEvent = false;
        handler.removeCallbacks(runnable);
        onDoubleClick();
        return;
    }

    isSingleEvent = true;
    handler.postDelayed(runnable, DEFAULT_QUALIFICATION_SPAN);
    timestampLastClick = SystemClock.elapsedRealtime();
}

public abstract void onDoubleClick();
public abstract void onSingleClick();
} 
```

**用法**

```
 button.setOnClickListener(new DoubleClickListener() {
        @Override
        public void onDoubleClick() {
            Log.i("onClick", "double");
        }

        @Override
        public void onSingleClick() {
            Log.i("onClick", "single");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T04:49:10.293

您可能要考虑不使用 DoubleTap。这不是正常的 Android 行为。

当我第一次开始在 Android 上编程时，我不断遇到在 android 上真正“难以”做的事情。随着时间的流逝，我发现其中许多都很难，因为它们是一个非常糟糕的主意。

如果您要移植 iOS 应用程序或模拟 iOS 应用程序的行为，您可能需要考虑将 UI 转换为 Android 样式的行为并使用 longPress 或其他“androidy”手势。

这是一个类似的问题和答案：

[Android：如何检测双击？](https://stackoverflow.com/questions/2217670/android-how-to-detect-double-tap)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-12T04:47:09.027

您必须实现**GestureDetector**并将您的代码放入`single/double click`.

**测试活动.java**

```
iv.setOnClickListener(new OnClickListener() {           
                @Override
                public void onClick(View v) {
                    //putyour first activity call.
                }
    }

iv.setOnTouchListener(new OnTouchListener() {
             GestureDetector gestureDetector = new GestureDetector(context, new MyGestureDetector(context));
         @Override
         public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
         }
}); 
```

现在你必须创建`GestureDetector.java`类。

```
public class MyGestureDetector extends SimpleOnGestureListener {
    public Context context;
    public String phno;

    public MyGestureDetector(Context con) {
        this.context=con;       
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return super.onDown(e);
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        System.out.println("in Double tap");

        return true;
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        System.out.println("in single tap up");
            //put your second activity.
        return super.onSingleTapUp(e);
    }   
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-12T10:30:27.700

*感谢**@NikolaDespotoski*。_

您可以从以下**URL**检查**DOUBLE-TAP** *示例*。在 listView 中使用。我希望它对你有用。

 **[https://nodeload.github.com/NikolaDespotoski/DoubleTapListView/zip/master](https://nodeload.github.com/NikolaDespotoski/DoubleTapListView/zip/master)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-12T08:54:37.433

虽然为时已晚，但任何人都可以弄清楚他们是否看到了这一点。

```
int number_of_clicks = 0;
boolean thread_started = false;
final int DELAY_BETWEEN_CLICKS_IN_MILLISECONDS = 250;

button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        ++number_of_clicks;
        if(!thread_started){
            new Thread(new Runnable() {
                @Override
                public void run() {
                    thread_started = true;
                    try {
                        Thread.sleep(DELAY_BETWEEN_CLICKS_IN_MILLISECONDS);
                        if(number_of_clicks == 1){
                            client.send(AppHelper.FORMAT_LEFT_CLICK);
                        } else if(number_of_clicks == 2){
                            client.send(AppHelper.FORMAT_DOUBLE_CLICK);
                        }
                        number_of_clicks = 0;
                        thread_started = false;
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }).start();
        }
    }
}); 
```

**解释：**

* * *

在单击按钮之前，number_of_click 被初始化为 0。thread_started 是一个标志，用于检测线程之前是否启动过。现在，在单击按钮时，通过增量运算符增加按钮单击的次数。检查线程之前是否启动过，如果没有，则启动线程。在线程上，使用 number_of_clicks 应用您的逻辑。并且线程将等待下一毫秒，然后将通过您的逻辑。因此，现在您可以根据需要应用任意数量的点击。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-03T08:51:10.313

通过继承View.OnClickListener并检查点击时间来区分单击或双击来解决这个问题，这也解决了快速点击的问题。此解决方案将带来较小的代码更改，只需替换 View.OnClickLister。您还可以覆盖 getGap() 以重新定义两次单击之间的时间。

```
import android.os.SystemClock;
import android.view.View;

/*****
 * Implement to fix the double click problem.
 * Avoid the fast double click for button and images.
 */
public abstract class OnSingleClickListener implements View.OnClickListener {
    private long prevClickTime =0;

    @Override
    public void onClick(View v) {
        _onClick(v);
    }

    private synchronized void _onClick(View v){
        long current = SystemClock.elapsedRealtime();
        if(current-prevClickTime> getGap()){
            onSingleClick(v);
            prevClickTime = SystemClock.elapsedRealtime();
        }else {
            onDoubleClick(v);
            prevClickTime = 0;
        }
    }

    public abstract void onSingleClick(View v);
    public abstract void onDoubleClick(View v);

    /********
     *
     * @return The time in ms between two clicks.
     */
    public long getGap(){
        return 500L; //500ms
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-12T22:13:43.790

这是@saksham 在 Kotlin 中的回答。

```
abstract class DoubleClickListener : View.OnClickListener {
    private val DEFAULT_QUALIFICATION_SPAN = 200L
    private var isSingleEvent = false
    private val doubleClickQualificationSpanInMillis =
        DEFAULT_QUALIFICATION_SPAN
    private var timestampLastClick = 0L
    private val handler = Handler(Looper.getMainLooper())
    private val runnable: () -> Unit = {
        if (isSingleEvent) {
            onSingleClick()
        }
    }
    override fun onClick(v: View) {
        if (SystemClock.elapsedRealtime() - timestampLastClick < doubleClickQualificationSpanInMillis) {
            isSingleEvent = false
            handler.removeCallbacks(runnable)
            onDoubleClick()
            return
        }
        isSingleEvent = true
        handler.postDelayed(runnable, DEFAULT_QUALIFICATION_SPAN)
        timestampLastClick = SystemClock.elapsedRealtime()
    }

    abstract fun onDoubleClick()
    abstract fun onSingleClick()
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-06T03:10:56.110

up 解决方案不能用于多次单击，我对其进行了测试但失败了。

所以我建议将 RxBinding 与 ProgressDialog 一起使用。

单击按钮时，progressDialog显示设置无法取消，修复它。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-05-15T08:07:28.713

我也遇到过同样的问题

```
setOnClickListener(new OnClickListener() {           
            @Override
            public void onClick(View v) {
                if(isFmOn()){
                   //stopFM
                }else{
                  //do other things
                }
            }
} 
```

当我单击按钮时，FM 停止；但是当我双击时，FM 并没有停止。问题是单击按钮和双击按钮时，isFmOn() 的值不同。我用这个解决了这个问题：

```
setOnClickListener(new OnClickListener() {           
            @Override
            public void onClick(View v) {
                Thread.sleep(500);//500ms was enough to finish stopFM before the second click
                if(isFmOn()){
                   //stopFM
                }else{
                  //do other things
                }
            }
} 
```**

# java - 使用 JNLP 将文件安装到主机上并确定生成的路径

> ID：15353462
> 
> 赞同：1
> 
> 时间：2013-03-12T04:42:40.427
> 
> 标签：java, jar, jnlp

我正在开发一个应用程序（Sigar），可以通过单击链接通过网络浏览器下载。该应用程序将监视机器信息，并且它需要一些库文件来执行此操作（例如 libsigar-x86-linux.so、libsigar-x86-freebsd-5.so）。

我的计划是先将原生文件放入一个 JAR 中，然后在使用 JWS 下载应用程序时，我会

*   解压 JAR 文件，包括本地库到一个文件夹
*   查找应用程序运行时确定的当前类路径。
*   最后设置java.library.path相对于classpath，这样就可以找到我的原生库了。

目前我正在尝试使用以下代码确定 JAR 的路径：

```
String path = MyClass.class.getProtectionDomain()
   .getCodeSource().getLocation().getPath(); 
```

但我一定是做错了什么，因为返回的路径是 Web 服务路径，而不是本地环境中的路径。

谁能指出我目前的计划中有哪些错误？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:08:29.893

JNLP 文件中的`nativelib`标记旨在处理您需要的任何本机库。

[请参阅JNLP 文件语法](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)中资源标签的文档 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:21:04.973

如前所述，本机库`jnlp`可能是您所追求的。

但是，如果出于其他原因您想手动控制 unpacing，您可以通过在 a 中嵌入 a 来`jar`实现`jar`。请参阅：[从使用 JWS 下载的 jar 文件中提取一些内容](https://stackoverflow.com/questions/11208681/extract-some-content-from-jar-file-downloaded-with-jws)

# ruby-on-rails - Capybara/rspec 配置问题

> ID：15353468
> 
> 赞同：1
> 
> 时间：2013-03-12T04:43:59.530
> 
> 标签：ruby-on-rails, rspec, capybara

当我尝试使用 Capybara 运行我的功能规范时，我得到一个

```
undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1:0x007fdc629c6d28> 
```

错误。我知道这是没有正确配置水豚的问题，否则它会有一个`visit`方法。

这是我的 gemfile 的相关部分：

```
group :test, :development do
  gem 'rspec-rails', '~> 2.0'
  gem 'factory_girl_rails', ">= 4.2.0"
  gem 'guard-rspec', "~> 0.7.0"
end

group :test do
  gem 'faker', '~> 1.0.1'
  gem 'capybara', git: 'https://github.com/jnicklas/capybara', ref: '7fa75e55420e'
  gem 'database_cleaner', '~> 0.7.2'
  gem 'launchy', '~> 2.1.0'
  gem 'shoulda-matchers'
end 
```

使用我从[这篇](http://techblog.fundinggates.com/blog/2012/08/capybara-2-0-upgrade-guide/)关于升级到 Capybara 2.0 的文章中获得的 capybara 参考。

这是我的规格：

```
# spec/features/create_user_spec.rb

require 'spec_helper'

feature 'Creating a user' do

  scenario 'adds a new user' do

    visit new_user_registration_path
    fill_in 'Email', :with => 'me@me.com'
    [ 'Password', 'Password confirmation' ].each { |p| fill_in p, :with => '12345678' }
    page.should have_content 'User successfully created'
    current_path.should == recipes_path

  end

end 
```

这是我的`spec_helper.rb`：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

require 'capybara/rspec'
require 'capybara/rails'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.use_transactional_fixtures = true

  config.infer_base_class_for_anonymous_controllers = false

  config.include Capybara::DSL

  config.order = "random"
end 
```

## 我试过的

*   手动包括`Capybara::DSL`
*   添加`require_relative`为`spec_helper`文件提供正确的路由

请告诉我我忽略了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:24:29.190

你有多个 spec_helper.rb 文件

尝试给予

```
require File.expand_path(File.dirname(__FILE__) + '/../spec_helper') 
```

或给出完整路径...

下划线没有被渲染。

# php - 在 Websocket 中添加自定义数据

> ID：15353469
> 
> 赞同：1
> 
> 时间：2013-03-12T04:44:00.950
> 
> 标签：php, jquery, mysql, websocket, phpwebsocket

我想将登录的客户端用户名连同客户端输入的消息一起发送到 websocket 脚本。我需要支持实现另一个变量 rge 用户名，以便与消息一起发送。现在我正在使用：[https](https://github.com/Flynsarmy/PHPWebSocket-Chat) ://github.com/Flynsarmy/PHPWebSocket-Chat和 js 是

```
Server.send( 'message', text ); 
```

服务器是 FancyWebSocket。这被发送到：

```
var FancyWebSocket = function(url)
{
    var callbacks = {};
    var ws_url = url;
    var conn;

    this.bind = function(event_name, callback){
        callbacks[event_name] = callbacks[event_name] || [];
        callbacks[event_name].push(callback);
        return this;// chainable
    };

    this.send = function(event_name, event_data){
        this.conn.send( event_data );
        return this;
    };

    this.connect = function() {
        if ( typeof(MozWebSocket) == 'function' )
            this.conn = new MozWebSocket(url);
        else
            this.conn = new WebSocket(url);

        // dispatch to the right handlers
        this.conn.onmessage = function(evt){
            dispatch('message', evt.data);
        };

        this.conn.onclose = function(){dispatch('close',null)}
        this.conn.onopen = function(){dispatch('open',null)}
    };

    this.disconnect = function() {
        this.conn.close();
    };

    var dispatch = function(event_name, message){
        var chain = callbacks[event_name];
        if(typeof chain == 'undefined') return; // no callbacks for this event
        for(var i = 0; i < chain.length; i++){
            chain[i]( message )
        }
    }
}; 
```

绑定到我的 server.php 为：

```
$Server->bind('message', 'wsOnMessage');    
function wsOnMessage($clientID, $message, $messageLength, $binary) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:24:46.550

您发送的内容取决于您。例如，您可以像这样发送它

```
Server.send("USERNAME|message", text); 
```

`|`然后，您可以通过在管道符号处拆分接收到的字符串来提取服务器上的 USERNAME 。

# c++ - glColor3f 只有红色

> ID：15353470
> 
> 赞同：0
> 
> 时间：2013-03-12T04:44:18.863
> 
> 标签：c++, opengl, sdl

我有一个奇怪的`OpenGL`问题`glColor3f`。在下面的代码中，如果我改变 的红色值`glColor3f`，那么下面的多边形就会变成那个红色阴影。但是，如果我改变绿色或蓝色，那么它不会改变多边形的颜色，但会改变游戏中所有其他对象的颜色。基本上，只有函数的红色值起作用，我也需要蓝色和绿色才能起作用。

```
glColor3f(1.0f,1.0f,0.0f);
for(int i = 0; i < totalhumans; i++)
{
    if(humans[i].rage)
    {
        glPushMatrix();
            glTranslatef(humans[i].x,humans[i].y,humans[i].depth);
            glBegin(GL_QUADS);
                glVertex3f(-16.0f,-(humans[i].dimen->bodyh/2)-16,0.0f);
                glVertex3f(-16.0f,-(humans[i].dimen->bodyh/2)-8,0.0f);
                glVertex3f(16.0f,-(humans[i].dimen->bodyh/2)-8,0.0f);
                glVertex3f(16.0f,-(humans[i].dimen->bodyh/2)-16,0.0f);
            glEnd();
        glPopMatrix();
    }
} 
```

这是我的初始化代码：

```
void START_GAME()
{
    SDL_Init(SDL_INIT_AUDIO|SDL_INIT_VIDEO|SDL_INIT_TIMER);
    Mix_OpenAudio(22050,MIX_DEFAULT_FORMAT,2,2048);
    SDL_ShowCursor(SDL_DISABLE);
    loadsettings();
    if(fullscreen)
    {
        const SDL_VideoInfo *VideoInfo = SDL_GetVideoInfo();
        screen = SDL_SetVideoMode(VideoInfo->current_w, VideoInfo->current_h, 32, SDL_OPENGL|SDL_FULLSCREEN);
    }
    if(!fullscreen)
    {
        screen = SDL_SetVideoMode(640, 480, 32, SDL_OPENGL);
    }
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);
    glClearColor(0.0f,0.0f,0.0f,0.0f);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_COLOR_MATERIAL);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_ALPHA_TEST);
    glAlphaFunc(GL_GREATER, 0.0f);

    setvariables();
    loadimages();
    loadsounds();

    SDL_WM_SetCaption("Freshmen Stuffing Boys",NULL);
    SDL_WM_SetIcon(badge,NULL);

    running = true;
} 
```

编辑：我发现由于某种原因，在禁用后`GL_TEXTURE_2D`，我想要的颜色出现了。有人可以解释为什么会这样吗？

这个问题不是重复的，因为1）我的电脑是新的，所有的显卡驱动都是新的，所以不是gpu问题，2）我是第一次写代码，所以我没有想知道代码是否可以在任何其他计算机上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:48:46.270

我想你已经在其他代码中启用了纹理。当这个多边形被绘制时，GL 将使用最后使用的纹理和纹理坐标（因为你没有告诉它），在你的情况下这可能是一个红色像素。结果，您的顶点颜色被红色调制，导致蓝色和绿色值乘以零。

如果您不想要纹理，请禁用它。如果您确实需要它，请设置正确的纹理并提供纹理坐标。

# c# - 从数据库 (ado.net) 检索数据时出错

> ID：15353471
> 
> 赞同：2
> 
> 时间：2013-03-12T04:44:23.923
> 
> 标签：c#, ado.net

从子行检索数据时出现错误。基本上我需要`lecturerName`from `tbl_lecturer`，`projectTitle`from `tbl_lecturer_project`。

这是我的代码。

```
//get data from 3 tables
DataSet ds = new DataSet(); // .xsd file name
DataTable dt = new DataTable();

//Connection string replace 'databaseservername' with your db server name
SqlConnection con = new SqlConnection(connectionString);
SqlCommand cmd = new SqlCommand();
SqlDataAdapter adapter;

con.Open();

//Stored procedure calling. It is already in sample db.
string selectSQL = "SELECT * FROM tbl_allocated_project where allocatedGroupId='" + team + "'";
cmd = new SqlCommand(selectSQL, con);
ds = new DataSet();
adapter = new SqlDataAdapter(cmd);
adapter.Fill(ds, "tbl_allocated_project");

cmd.CommandText = "SELECT * FROM tbl_lecturer_project";
adapter.Fill(ds, "tbl_lecturer_project");

cmd.CommandText = "SELECT * FROM tbl_lecturer";
adapter.Fill(ds, "tbl_lecturer");

DataRelation dr1 = new DataRelation("dr1", ds.Tables["tbl_lecturer"].Columns["lecturerId"],ds.Tables["tbl_lecturer_project"].Columns["lecturerId"]);
DataRelation dr2 = new DataRelation("dr2", ds.Tables["tbl_lecturer_project"].Columns["lecturerProjectId"], ds.Tables["tbl_allocated_project"].Columns["allocatedProjectId"]);
ds.Relations.Add(dr1);
ds.Relations.Add(dr2);

foreach (DataRow row in ds.Tables["tbl_allocated_project"].Rows)
{
    lblDisplay.Text = "";
    //lblDisplay.Text += row["allocatedGroupId"];
    //lblDisplay.Text += " " + row["intro"];

    foreach (DataRow col in row.GetChildRows(dr2))
    {
        DataRow rowdata = col.GetParentRows(dr1)[0];
        //lblDisplay.Text += "&nbsp;&nbsp;";
        lblDisplay.Text += rowdata["projectTitle"];
    }
} 
```

我收到此错误：

> *GetChildRows 需要其表为 的行`tbl_lecturer_project`，但指定行的表为`tbl_allocated_project`。*

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:06:00.750

应该这样：

```
DataRelation dr2 = new DataRelation("dr2", ds.Tables["tbl_lecturer_project"].Columns["lecturerProjectId"], ds.Tables["tbl_allocated_project"].Columns["allocatedProjectId"]); 
```

是这样的：

```
DataRelation dr2 = new DataRelation("dr2", ds.Tables["tbl_allocated_project"].Columns["lecturerProjectId"], ds.Tables["tbl_lecturer_project"].Columns["allocatedProjectId"]); 
```

这将使, 这应该允许您调用它`tbl_allocated_project`的父级。`tbl_lecturer_project``GetChildRows`

# python - 用于 Visual Studio 的 OpenERP 和 Python 工具编译错误

> ID：15353484
> 
> 赞同：0
> 
> 时间：2013-03-12T04:45:10.207
> 
> 标签：python, openerp, ptvs

我正在尝试使用 Python Tools for Visual Studio 在 Visual Studio 2012 中构建和运行 OpenERP 服务器。

目前我收到超过 2300 条错误消息，主要是：

```
unexpected token 'x1' 
```

我已经下载了 openerp-server-6.0.4 源代码，并从 VS 中的现有 Python 代码项目创建了一个新的 Python 项目。我在提示时选择了 OpenERP 源 (C:\OpenERP\Bin) 的路径，按下 F5 时要执行的文件是 openerp-server.py。我选择了 Python 64 位 3.3 解释器。

该项目已创建，但即使在构建之前，我也会收到许多意外的令牌错误。例如，在 account.py 文件中，它在以下代码中抱怨意外的令牌“税”：

```
 tax.type=='code':
            address = address_id and obj_partener_address.browse(cr, uid, address_id) or None
            localdict = {'price_unit':cur_price_unit, 'address':address, 'product':product, 'partner':partner}
            exec tax.python_compute in localdict
            amount = localdict['result']
            data['amount'] = amount 
```

在 Python Interactive 中使用 TOOLS > Python Tools > Execute Project 时，我看到以下结果：

Python 交互式窗口。键入 $help 以获取命令列表。

重置执行引擎

交互窗口尚未启动。

运行 C:\temp\openerp-server-6.0.4\bin\openerp-server.py

回溯（最近一次通话最后）：

导入工具中的文件“C:\temp\openerp-server-6.0.4\bin\openerp-server.py”，第 64 行

文件“C:\temp\openerp-server-6.0.4\bin\tools__init__.py”，第 23 行，导入 win32

ImportError：没有名为“win32”的模块

谁能指导我让 OpenERP 使用 VS 构建和运行？甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:10:28.060

你必须安装

[http://www.py2exe.org/index.cgi/PyOpenGL](http://www.py2exe.org/index.cgi/PyOpenGL)

请在安装此模块后尝试。

# php - 带有 wp_get_current_users() 错误的 wordpress 自定义 php 页面

> ID：15353485
> 
> 赞同：0
> 
> 时间：2013-03-12T04:45:22.013
> 
> 标签：php, ajax, wordpress

我正在尝试创建一个自定义 wordpress 页面，以便我可以从 ajax 调用加载数据并可以在该文件中使用 wordpress 函数。问题是即使在包含自定义 wordpress php 文件所需的所有正确文件之后，它也会给我错误

> 致命错误：在第 1281 行的 /web/sites/meta/mormonrod.com/wp-includes/capabilities.php 中调用未定义函数 wp_get_current_user()

我也遵循了这个问题中的步骤（[在独立脚本中使用 WPDB？](https://stackoverflow.com/questions/5306612/using-wpdb-in-standalone-script/5331944#5331944)），其中包括这些文件

```
$path = $_SERVER['DOCUMENT_ROOT'];

include_once $path . '/wp-config.php';
include_once $path . '/wp-load.php';
include_once $path . '/wp-includes/wp-db.php';
include_once $path . '/wp-includes/pluggable.php'; 
```

但是我仍然出现了该错误，并且无法完成 ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:50:54.980

您可以使用在您的文件夹中创建一个文件并在顶部的此文件中写入此行来执行此操作

```
/*Template Name: xyz */ 
```

现在从管理员创建一个页面并选择模板作为 xyz，现在在此文件中您可以编写自定义代码以及使用 wordpress 功能而不包含任何文件。

或者您可以参考以下链接以在 wordpress
[http://www.1stwebdesigner.com/css/implement-ajax-wordpress-themes/中调用 ajax](http://www.1stwebdesigner.com/css/implement-ajax-wordpress-themes/)

# ruby - 如何从具有空格的字符串创建符号？

> ID：15353488
> 
> 赞同：14
> 
> 时间：2013-03-12T04:45:37.497
> 
> 标签：ruby, hash, symbols

我正在为电影名称存储创建一个 Ruby 哈希。

当哈希的键是包含空格的字符串时，它工作得很好。

如：

`movies = {"Avatar" => 5, "Lord of the rings" => 4, "Godfather" => 4}`

现在我试图用符号替换字符串的使用：

`movies = {Avatar: 5, Lord of the rings: 4, Godfather: 4}`

显然那是行不通的。

Ruby 如何处理符号命名中的空格？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T04:51:31.953

自己试试

```
"Lord of the rings".to_sym
#=> :"Lord of the rings" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T04:50:46.037

我不确定为什么要在键值中包含空格时要使用符号，但是您可以这样做。你只是不能使用`<symbol>: <value>`语法来做到这一点......

```
{:Avatar => 5, :"Lord of the rings" => 4, :Godfather => 4} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-24T07:21:11.163

要制作带空格的符号，请输入冒号，后跟带引号的字符串。对于您的示例，您将输入：

```
movies = {:Avatar => 5, :'Lord of the rings' => 4, :Godfather => 4} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-31T22:03:54.900

聚会迟到了，但解决此问题的另一种方法是执行以下操作：

```
movies = Hash.new

movies["the little mermaid".to_sym] = 4 
```

# jsf-2 - 如何提高加载性能

> ID：15353491
> 
> 赞同：1
> 
> 时间：2013-03-12T04:45:57.693
> 
> 标签：jsf-2, primefaces

我在托管 BackBean 上有方法 getStudents，我正在调用 getstudents，它反过来调用数据库并获取数据。UI 显示正确，但它会导致性能问题，因为加载页面需要太多时间。请建议我如何处理这个性能问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:54:00.313

您不应该在 getter 方法中执行业务逻辑。您应该在`@PostConstruct`方法中初始化列表或在 getter 中进行延迟加载：

```
private List myList;

@PostConstruct
public void init() {
  // init my List
}

// getter and setter 
```

`@PostConstruct`方法将在托管 bean 实例化后调用。我建议你在这个方法中初始化，而不是在构造函数中。当您在支持 bean 生命周期期间更改列表时，您应该在更改时更新它。您可以添加用户创建的数据，也可以选择插入值后再次调用数据库。您必须担心这一点，没有自动化。

# jquery - IClientValidatable 与 MVC 4

> ID：15353492
> 
> 赞同：1
> 
> 时间：2013-03-12T04:45:57.543
> 
> 标签：jquery, jquery-plugins, asp.net-mvc-4

我正在寻找如何将 IClientValidatable 与 MVC4 和 jQuery.Validation 一起使用的示例实现/文档。我发现这个非常好的资源在这里拥有一切。

[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic3.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic3.aspx)

但是 MVC4 的问题是没有 MicrosoftMvcValidation.js 和 mvc 4 项目默认脚本之类的东西。而且我需要对客户端和服务器进行自定义验证。所以任何文档/codesnippet/how-to-guidelnes 将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:56:02.220

尝试使用可与 IClientValidatable 一起使用的这些脚本文件

```
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

这些在`Scripts`您项目的文件夹中，您可以参考这些脚本以使其工作

# hibernate - Nhibernate 中的不同连接

> ID：15353494
> 
> 赞同：1
> 
> 时间：2013-03-12T04:46:00.327
> 
> 标签：hibernate, nhibernate

我想要使​​用连接的两个不同表中的两列。我得到重复的值。我试过`.SetResultTransformer(Transformers.DistinctRootEntity`）`.SetResultTransformer(new DistinctRootEntityResultTransformer())`但没有任何帮助。在探查器中，我收到如下查询：

```
SELECT job1_.DeptName as y0_, this_.refDeptId as y1_ FROM [Emp] this_ inner join [Dept] job1_ on this_.refDeptId=job1_.DeptId 
```

我想查询不同的值。比如：`SELECT distinct job1_.DeptName as y0_, this_.refDeptId as y1_ FROM [Emp] this_ inner join [Dept] job1_ on this_.refDeptId=job1_.DeptId` 我在 nhibernate 中的查询是：

```
IList  ListOfElements=  (session
  .CreateCriteria(typeof(EmpModel))
   .CreateCriteria("objEmpDeptId1", "job",NHibernate.SqlCommand.JoinType.InnerJoin)
  .SetProjection( a_ProjectionList).List()); 
```

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:54:29.187

您的 a_list 是否类似于以下内容（如果您想转换为 DTO，请使用别名）？

```
Projections.Distinct(Projections.ProjectionList()
    .Add(Projections.Property("DeptName ").As("BeanDeptName"))
    .Add(Projections.Property("refDeptId ").As("BeanDeptId")) 
```

# android - 带有 PACKAGE_REPLACED 的 queryBroadcastReceivers

> ID：15353495
> 
> 赞同：1
> 
> 时间：2013-03-12T04:46:04.760
> 
> 标签：android, android-intent

以下代码返回一个空列表，而运行它的应用程序注册了这个特定的意图！？

```
pm.queryBroadcastReceivers(new Intent(Intent.PACKAGE_REPLACED), PackageManager.GET_INTENT_FILTERS | PackageManager.GET_DISABLED_COMPONENTS); 
```

有没有办法为这种意图和其他类似意图检索所有接收者？

这种方法看起来很不可靠还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:54:55.723

经过大量研究，只有[这里的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/com/android/server/IntentResolver.java#IntentResolver.buildResolveList%28android.content.Intent,android.util.FastImmutableArraySet,boolean,boolean,java.lang.String,java.lang.String,java.util.List,java.util.List,int%29)提供了一些见解：

当仅在意图中指定一个动作时，API 将过滤所有接受此类动作的接收者，而无需任何数据类型或方案。

事实证明，许多动作意图需要一个方案或数据类型，例如任何 PACKAGE_* 动作上的“包”方案。

所以意图需要指定“包”方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T13:23:23.820

可以获取信息使用代码，例如

```
List<String> startupApps = new ArrayList<String>();
Intent intent = new Intent(Intent.ACTION_PACKAGE_ADDED);
Uri uriInfo = Uri.parse("package://");
intent.setData(uriInfo);
final List<ResolveInfo> activities = packageManager
                .queryBroadcastReceivers(intent, 0);
for (ResolveInfo resolveInfo : activities) {
        ActivityInfo activityInfo = resolveInfo.activityInfo;
        if (activityInfo != null)
            startupApps.add(activityInfo.name);
} 
```

# c# - ContentControl 未更新

> ID：15353500
> 
> 赞同：6
> 
> 时间：2013-03-12T04:46:26.280
> 
> 标签：c#, wpf, xaml, data-binding, reactiveui

我正在尝试拥有一个绑定到视图的 MainWindow。我在代码中更改了该视图，并希望它在主窗口中更新，但这并没有发生。

我的 XAML 中有这段代码

```
<Grid>
    <ContentControl Content="{Binding Source={StaticResource ViewModelLocator}, Path=MainWindowViewModel.CurrentControl}" />
</Grid> 
```

然后我通过此代码更改我的控制

```
public class MainWindowViewModel : ReactiveObject
{
    private UserControl _CurrentControl = null;
    public UserControl CurrentControl
    {
        get
        {
            if (_CurrentControl == null)
            {
                _CurrentControl = new HomePage();
            }
            return _CurrentControl;
        }
        set
        {
            this.RaiseAndSetIfChanged(x => x.CurrentControl, value);
        }
    }
} 
```

如您所见，我正在使用 ReactiveUI 库。

在`ContentControl`该视图中使用错误的东西还是我没有正确绑定和更新？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T21:07:30.293

实际上有一个更好的方法可以做到这一点，使用`ViewModelViewHost`：

```
<Grid DataContext="{Binding ViewModel, ElementName=TheUserControl}">
    <ViewModelViewHost ViewModel="{Binding CurrentControlViewModel}" />
</Grid> 
```

现在，您的课程将如下所示：

```
public class MainWindowViewModel : ReactiveObject
{
    private ReactiveObject _CurrentControlViewModel = new HomePageViewModel();
    public ReactiveObject CurrentControlViewModel {
        get { return _CurrentControl; }
        set { this.RaiseAndSetIfChanged(x => x.CurrentControlViewModel, value); }
    }
} 
```

在你的应用程序启动的某个地方，你应该写：

```
RxApp.Register(typeof(IViewFor<HomePageViewModel>), typeof(HomePage)); 
```

## 什么是 ViewModelViewHost？

`ViewModelViewHost`将获取您通过 Bindings 提供的 ViewModel 对象，并使用 Service Location*查找*适合它的 View。Register 调用是您可以将 View 与 ViewModel 相关联的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T07:30:54.210

为什么你叫你的班级 MainWindowViewModel？当你想做 mvvm 时，你的 VM 中不应该有类型为 UserControl 的属性。

通常的 mvvm 方式如下所示：

*   带有 INotifyPropertyChanged 的​​视图模型

```
public class MyViewmodel
{
    public IWorkspace MyContent {get;set;}
} 
```

*   绑定到您的 VM 的 xaml 内容控制

```
<ContentControl Content="{Binding MyContent}"/> 
```

*   datatemplate --> 以便 wpf 知道如何呈现您的 IWorkspace

```
<DataTemplate DataType="{x:Type local:MyIWorkSpaceImplementationType}" >
   <view:MyWorkspaceView />
</DataTemplate> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T08:25:26.280

我认为您在这里有几个混乱的概念，它们相互干扰。

首先，您实际上并没有使用任何 reactiveUI 代码，它永远不会被调用。由于您的 get 访问器实现了惰性实例化模式，因此这意味着 set 访问器被忽略。这意味着视图永远不会通知属性更改，因此您永远不会获得更新。

我建议使用更像

```
private UserControl _currentControl;

public MainWindowVirwModel()
{
  CurrentControl = new HomePage();
}

public UserControl CurrentControl
{
  get { return _curentControl;}
  set { this.RaiseAndSetIfChanged(...); }
} 
```

此外，这仍然会在 ViewModel 层中混淆 View 组件，即 HomePage，这将使单元测试变得更加困难。

# c# - C# 捕获失败的线程？

> ID：15353501
> 
> 赞同：0
> 
> 时间：2013-03-12T04:46:29.930
> 
> 标签：c#

有没有办法在 C# 中捕获最深层次的终止线程？我目前有：

```
AppDomain.CurrentDomain.UnhandledException += new System.UnhandledExceptionEventHandler(App_ThreadException); 
```

在开始时

```
~IOThread()
{
    Console.WriteLine(string.Format("IOThread destroyed at: {0}", DateTime.Now));
} 
```

一个析构函数。

一个

```
try
{
    Server.world.Tick();
}
catch (Exception e)
{
    Console.WriteLine(e.ToString());
} 
```

尝试捕获失败的访问或空引用。但仍！某些原因导致处理线程停止，并且它不是无限循环，因为如果我在调试器中执行 BreakAll，则处理线程不在线程列表中。

任何帮助将不胜感激，我什至无法调试此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:53:28.797

正确执行此操作的唯一方法是将 catch(Exception) 放在您在程序中创建的每个线程的根目录中，包括线程池回调方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:12:16.853

首先 AppDomain.CurrentDomain.UnhandledException 不会“捕获”任何东西。如果出现异常，您的应用程序仍然会崩溃。这个事件在那里，所以你可以在崩溃之前做一些事情。

其次，您将析构函数与终结器混淆了。

第三，如果另一个线程中存在未处理的异常——整个应用程序将崩溃。如果它没有崩溃——那只能意味着一件事——你的线程就完成了工作。

# java - 调整图像文件的大小

> ID：15353506
> 
> 赞同：0
> 
> 时间：2013-03-12T04:47:02.723
> 
> 标签：java, file, file-io, copy

在 Java 中，我将图像文件从一个位置复制到另一个位置。该程序正在正确执行，但我希望目标文件大小与源文件大小不同。有没有其他方法可以在新位置调整文件大小？我正在使用以下代码：

```
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    public static void copyFile(File sourceFile, File destFile)
            throws IOException {
        if (!destFile.exists()) {
            destFile.createNewFile();
        }

        FileChannel source = null;
        FileChannel destination = null;
        try {
            source = new FileInputStream(sourceFile).getChannel();
            destination = new FileOutputStream(destFile).getChannel();

            // previous code: destination.transferFrom(source, 0, source.size());
            // to avoid infinite loops, should be:
            long count = 0;
            long size = source.size();
            while ((count += destination.transferFrom(source, count, size
                    - count)) < size)
                ;
        } finally {
            if (source != null) {
                source.close();
            }
            if (destination != null) {
                destination.close();
            }
        }
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            File sourceFile = new File(
                    "d:/adesh/golden_temple_amritsar_india-normal.jpg");

            File destFile = new File(
                    "d:/adesh2/golden_temple_amritsar_india-normal.jpg");

            copyFile(sourceFile, destFile);
        } catch (Exception ex) {
        }

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:13:40.670

这是根据您的规范调整图像大小的代码。在 copyFile 方法中，

> 整数宽度=100，高度=75；/* 在这里设置宽度和高度 */
> 
> BufferedImage inputImage=ImageIO.read(sourceFile);
> 
> BufferedImage outputImage=new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
> 
> Graphics2D g=outputImage.createGraphics();
> 
> g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BICUBIC);
> 
> g.clearRect(0, 0, 宽度, 高度);
> 
> g.drawImage(inputImage, 0, 0, 宽度, 高度, null);
> 
> g.dispose();
> 
> ImageIO.write(outputImage,"jpg",destFile); /* 第一个参数是 BufferedImage 的对象，第二个参数是你要写入的图像类型，可以使用 jpg、bmp、png 等，第三个参数是目标文件对象。*/

# magento - 如何在magento中下载文件

> ID：15353508
> 
> 赞同：5
> 
> 时间：2013-03-12T04:47:12.477
> 
> 标签：magento, download, magento-1.7

我在magento中为每个客户上传了一些文件......

然后我用上传的文件名列出了客户的详细信息..

我需要使用 magento 代码下载文件

这是代码：

```
public function downloadAction() {
        $entityid = $this->getRequest()->getParam('entity_id');
        $customer_data = Mage::getModel('customer/customer')->load($entityid);
        $filename = '';
        if($customer_data){
            $filename = $customer_data->getFileuploadname();
        }
        $filepath = '../uploads/'.$filename;

        if (! is_file ( $filepath ) || ! is_readable ( $filepath )) {
            throw new Exception ( );
        }
        $this->getResponse ()
                    ->setHttpResponseCode ( 200 )
                    ->setHeader ( 'Pragma', 'public', true )
                    ->setHeader ( 'Cache-Control', 'must-revalidate, post-check=0, pre-check=0', true )
                    ->setHeader ( 'Content-type', 'application/force-download' )
                    ->setHeader ( 'Content-Length', filesize($filepath) )
                    ->setHeader ('Content-Disposition', 'inline' . '; filename=' . basename($filepath) );
        $this->getResponse ()->clearBody ();
        $this->getResponse ()->sendHeaders ();
        readfile ( $filepath );
        //exit(0);
    } 
```

但它确实显示错误，例如：

```
Trace:
#0 D:\wamp\www\mysite\app\code\core\Mage\Core\Controller\Varien\Action.php(419): Managecustomers_Users_IndexController->downloadAction()
#1 D:\wamp\www\mysite\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('download')
#2 D:\wamp\www\mysite\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#3 D:\wamp\www\mysite\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#4 D:\wamp\www\mysite\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#5 D:\wamp\www\mysite\index.php(87): Mage::run('', 'store')
#6 {main} 
```

该`uploads`文件夹位于magento根文件夹中...

怎么下载文件啊。。。。

`$filename`上传来自数据库的文件名...

**编辑 ：**

当我删除代码时：

```
 if (! is_file ( $filepath ) || ! is_readable ( $filepath )) {
            throw new Exception ( );
        } 
```

然后将文件路径更改为：

```
$filepath = 'http://localhost/mysite/uploads/'.$filename; 
```

然后完美下载完成......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-09T11:30:12.927

使用 Magento 代码怎么样？...`_prepareDownloadResponse()`

```
 public function downloadAction()
    {
       $filename = '';
       if($customer_data){
          $filename = $customer_data->getFileuploadname();
       }
       $filepath = Mage::getBaseDir('base').'/uploads/'.$filename;

        if ($filename) {
            try {
                $this->_prepareDownloadResponse($filename, array('type' => 'filename', 'value' => $filepath));

            } catch (Exception $e) {
                $this->_getSession()->addError($e->getMessage());
            }
        } else {
            $this->_getSession()->addError($filepath . ' not found');
            $this->_redirect('adminhtml/cache');
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T05:33:22.777

这是此类问题的解决方案：

```
 public function downloadAction() {
        $entityid = $this->getRequest()->getParam('entity_id');
        $customer_data = Mage::getModel('customer/customer')->load($entityid);
        $filename = '';
        if($customer_data){
            $filename = $customer_data->getFileuploadname();
        }
        $filepath = Mage::getBaseDir('base').'/uploads/'.$filename;

        if (! is_file ( $filepath ) || ! is_readable ( $filepath )) {
            throw new Exception ( );
        }
        $this->getResponse ()
                    ->setHttpResponseCode ( 200 )
                    ->setHeader ( 'Cache-Control', 'must-revalidate, post-check=0, pre-check=0', true )
                     ->setHeader ( 'Pragma', 'public', true )
                    ->setHeader ( 'Content-type', 'application/force-download' )
                    ->setHeader ( 'Content-Length', filesize($filepath) )
                    ->setHeader ('Content-Disposition', 'attachment' . '; filename=' . basename($filepath) );
        $this->getResponse ()->clearBody ();
        $this->getResponse ()->sendHeaders ();
        readfile ( $filepath );
        exit;
    } 
```

基于文件路径问题的问题......现在解决了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-22T13:01:05.403

`_prepareDownloadResponse()`要在您有权访问文件路径时在控制器操作中使用 Magento ，请在控制器类中执行以下操作：

```
public function downloadAction()
{
    $filePath = '/this/is/an/filepath';

    return $this->_prepareDownloadResponse(basename($filePath), file_get_contents($filePath));
} 
```

# bash - Bash 脚本不工作

> ID：15353509
> 
> 赞同：3
> 
> 时间：2013-03-12T04:47:16.913
> 
> 标签：bash

我正在编写脚本来打印乘法表。

```
#!/bin/bash
a=1
while [ $a -le "10" ]
do

tmp=`expr $a * $1`
printf "%d x %d = %d\n" $1 $a $tmp
a=`expr $a + 1`

done 
```

它给出了语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:49:30.407

转义 * 如下

```
while [ $a -le "10" ]
do
    tmp=`expr $a \* $1`
    printf "%d x %2d = %3d\n" $1 $a $tmp
    a=`expr $a + 1`
done 
```

请注意上面代码中的\*。
这里 bash 将 * 解释为通配符。因此，您需要将其转义为文字星（即乘法。如果您不想转义 * 则可以使用执行算术运算的 (( )) 。

```
while [ $a -le "10" ]
do
    ((tmp = $a * $1))
    printf "%d x %2d = %3d\n" $1 $a $tmp
    ((a++))
done 
```

# mongodb - 如何进行 MongoDB 备份

> ID：15353511
> 
> 赞同：-5
> 
> 时间：2013-03-12T04:47:21.753
> 
> 标签：mongodb, backup, database

我有一个 MongoDB 数据库，大约有 50 个集合。它包含一些主集合和一些事务集合。我想每 5 小时备份一次我的数据库.. PLz 建议一些解决方案来做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T05:09:56.060

这个问题很可能已经结束，但无论如何我都会帮助你。转储 mongo 数据库非常容易。查看[mongodump](http://docs.mongodb.org/manual/reference/mongodump/)命令。一旦你有了这个，设置一个[cron 作业](http://en.wikipedia.org/wiki/Cron)在你想要的时候执行它（在这种情况下，每 5 小时）。

有关设置 cron 作业的更多信息，请查看[此处](https://www.google.com/search?q=how+to+set+up+a+cron+job)。

# asp.net - 当我在表单中提交 HTML 字符时，为什么 ASP.NET 会引发内部服务器 (500) 错误？

> ID：15353512
> 
> 赞同：5
> 
> 时间：2013-03-12T04:08:00.337
> 
> 标签：asp.net, asp.net-mvc, validation, vb.net, character-encoding

当我在我的表单中输入 HTML 字符时`<br />`，ASP.NET 会抛出一个内部 500 异常，如此[处](https://stackoverflow.com/questions/81991/a-potentially-dangerous-request-form-value-was-detected-from-the-client)所述。

`A potentially dangerous Request.Form value was detected from the client (Name="<br />").`

好的，所以它保护我免受可能用于恶意原因的未编码字符。

*问题是，这在我漫长的搜索中没有得到回答，是如何处理它*。即我的应用程序不应该只是在用户输入错误字符时抛出一个通用的内部服务器错误（如果他们正在绘制诸如 <-- 之类的箭头怎么办）。

更好的是简单地返回页面并`ModelState`显示“请不要使用 HTML 字符”或其他有意义的错误。

但是如何实现呢？错误在到达我的代码之前就被抛出了。此外，我不想只是通过关闭它`validateRequest="false"`，然后必须验证我的应用程序中的每个表单是否有 HTML 字符并返回错误。

**有没有办法启用这种类型的验证，但只是以不同的方式处理它？**

澄清代码：

`Model`

```
Public Class SomeModel
    Public Property SomeField As String
End Class 
```

`Controller`

```
<HttpPost>
Function SomeController(ByVal model As SomeModel)
    ' model.SomeField contains some HTML characters :O
    ' but it doesn't matter, since an internal error has occured :(
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:03:01.283

您是否尝试将[AllowHtml](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute%28v=vs.98%29.aspx)属性添加到视图模型的属性中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:19:50.860

绝对可以使用您认为合适的任何消息显示您自己的错误页面。
为此，您使用 customError 页面。

您可以配置这些错误页面以显示相应的错误代码。

```
<configuration>
   <system.web>
      <customErrors mode="RemoteOnly" redirectMode="ResponseRewrite" 
                    defaultRedirect="GenericError.htm">
         <error statusCode="500" redirect="InternalError.aspx"/>
      </customErrors>
   </system.web>
</configuration> 
```

[显示自定义错误页面](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)

如果您希望以不同方式处理这种 html 数据案例，您可以在错误页面上检测最后一个错误`Server.GetLastError()`并使用它显示适当的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:01:37.243

听起来您想要的是在全球范围内关闭它。

与使用 razor 和 <%: %> asp.net 网页语法自动 HTML 编码输出相比，您对必须验证应用程序中的每个输入的担忧已不再是问题。您需要手动验证以确保它们不包含 HTML 的应用程序的唯一字段是显示为未编码的原始文本的字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:23:55.853

要在模型中允许受限输入，请使用模型属性上的 AllowHtmlAttribute。这是第一步。

然后创建自定义验证器或使用 RegularExpressionAttribute 验证规范的输入。

或者，如果要允许用户输入受限字符，请使用 HttpUtility.HtmlEncode 对值进行编码。

# java - 使用数字时钟在 JPanel 中显示数字时出现问题

> ID：15353515
> 
> 赞同：0
> 
> 时间：2013-03-12T04:47:38.510
> 
> 标签：java, swing

我正在做一个数字时钟项目，我要制作一个看起来像这样的时钟：

![数码时钟](../Images/d6dc8b01c57dd3d0d40eeb9d967a4f7d.png)

一帧中有9个面板。一个班的小组，`TitlePanel`班的6个，`DigitPanel`班的2个`ColonPanel`。我遇到的问题出在`DigitPanel`课堂上。我基本上已经完成了这件事，但是当我执行程序时，由于`setDigit`某种原因该方法不会覆盖数字的默认值。

有人可以告诉我我`DigitPanel`上课的方法有什么问题吗？

**主类：**

```
public class DigitPane extends JPanel {

    DigitPanel[] hourDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
    DigitPanel[] minDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
    DigitPanel[] secDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
    private String hour = pad(Calendar.getInstance().get(Calendar.HOUR));
    private String min = pad(Calendar.getInstance().get(Calendar.MINUTE));
    private String sec = pad(Calendar.getInstance().get(Calendar.SECOND));
    private char[] hours = hour.toCharArray();
    private char[] minutes = min.toCharArray();
    private char[] seconds = sec.toCharArray();

    public DigitPane() {
        JPanel digitsPanel = new JPanel();
        digitsPanel.setLayout(new BoxLayout(digitsPanel, BoxLayout.X_AXIS));
        digitsPanel.setSize(new Dimension(605, 100));

        digitsPanel.add(new panelPadding());

        hourDigit[0].setDigit(hours[0]);
        digitsPanel.add(hourDigit[0]);
        digitsPanel.add(new panelPadding());

        hourDigit[1].setDigit(hours[1]);
        digitsPanel.add(hourDigit[1]);
        digitsPanel.add(new panelPadding());

        digitsPanel.add(new ColonPanel());
        digitsPanel.add(new panelPadding());

        minDigit[0].setDigit(minutes[0]);
        digitsPanel.add(minDigit[0]);
        digitsPanel.add(new panelPadding());

        minDigit[1].setDigit(minutes[1]);
        digitsPanel.add(minDigit[1]);
        digitsPanel.add(new panelPadding());

        digitsPanel.add(new ColonPanel());
        digitsPanel.add(new panelPadding());

        secDigit[0].setDigit(seconds[0]);
        digitsPanel.add(secDigit[0]);
        digitsPanel.add(new panelPadding());

        secDigit[1].setDigit(seconds[1]);
        digitsPanel.add(secDigit[1]);
        digitsPanel.add(new panelPadding());

        this.add(digitsPanel);
    }

    protected String pad(int value) {
        StringBuilder sb = new StringBuilder(String.valueOf(value));
        while (sb.length() < 2) {
            sb.insert(0, "0");
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        new DigitalTimeUI();
    }

    public class panelPadding extends JPanel {

        public panelPadding() {
            this.setPreferredSize(new Dimension(5, 80));
        }
    }
} 
```

**标题面板：**

```
public class TitlePanel extends JPanel {

    JLabel title;

    public TitlePanel() {
        this.setBackground(Color.WHITE);
        this.setPreferredSize(new Dimension(605, 100));
        this.setLayout(new GridBagLayout());
        title = new JLabel("DIGITAL CLOCK");
        title.setFont(new Font("Tahoma", Font.BOLD, 72));
        title.setForeground(Color.BLACK);
        this.add(title);
    }
} 
```

**数字面板：**

```
public class DigitPanel extends JPanel {

    private char digit = '0';

    public DigitPanel() {
        JLabel label = new JLabel(String.valueOf(digit));
        label.setFont(new Font("Tahoma", Font.BOLD, 72));
        label.setForeground(Color.WHITE);

        this.setLayout(new GridBagLayout());
        this.setPreferredSize(new Dimension(80, 80));
        this.setBackground(Color.BLACK);
        this.add(label);
    }

    public final char getDigit() {
        return digit;
    }

    public void setDigit(char digit) {
        this.digit = digit;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:51:33.970

1.  `JLabel`in`DigitPanel`应该是一个类级别的变量。
2.  `setDigit`应该设置标签的文本属性

.

```
public class DigitPanel extends JPanel {

    private JLabel label = new JLabel(String.valueOf(digit));

    public DigitPanel() {
        label = new JLabel(String.valueOf(0));
        label.setFont(new Font("Tahoma", Font.BOLD, 72));
        label.setForeground(Color.WHITE);

        this.setLayout(new GridBagLayout());
        this.setPreferredSize(new Dimension(80, 80));
        this.setBackground(Color.BLACK);
        this.add(label);
    }

    public final char getDigit() {
        return label.getText().charAt(0);
    }

    public void setDigit(char digit) {
        label.setText(Character.toString(digit);
    }
} 
```

# c - 从文件的最后一行读取到 C 中的第一行

> ID：15353517
> 
> 赞同：-2
> 
> 时间：2013-03-12T04:47:43.257
> 
> 标签：c, shell, file-io, operating-system

我正在尝试在 C 中实现一个 shell。事情就是这样。我想做一个历史友好的功能，如果我按下它就会转到上一个。命令。

现在我有一个存储历史的文件，比如history.txt。当我执行命令时，我会将命令附加到文本中。并将某种偏移量重置为文件的最后一行。

我需要一种方法来找到最后一行并根据命令逐行上移。并根据命令一一上移。

现在，我的一个想法是 fgets() 直到 -1 还是什么？

关于我应该如何开始的任何想法？

编辑：我可以想到一个使用数组的解决方案。但是有没有办法让我几乎不用空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:51:12.330

当您需要运行上一个命令时，不要费心从文件中读取历史记录。只需将先前的命令存储在内存中即可。退出时将它们写入磁盘，并在启动时加载它们。这就是真正的贝壳的工作方式。

# android - Android OnLocationChanged 从未被调用

> ID：15353518
> 
> 赞同：-2
> 
> 时间：2013-03-12T04:47:46.047
> 
> 标签：android

我有以下代码 - `enter code here`
使用系统；使用 System.Collections.Generic；使用 System.Text；使用Android.App；使用Android.Content；使用 Android.Runtime；使用 Android.Views；使用 Android.Widget；使用Android.OS；使用 Android.Locations；使用安卓.蓝牙；

```
namespace GetCurrentLocation
{
    [Activity(Label = "Get Current Location", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity, ILocationListener
    {
        LocationManager _locMgr ;
        String oBestProvider;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            _locMgr = GetSystemService(Context.LocationService) as LocationManager;

            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.UI);
            StringBuilder strLocations = new StringBuilder();
            // Get our button from the layout resource,
            // and attach an event to it
            Button button = FindViewById<Button>(Resource.Id.btnGetLocation);
            int i;
            var locationText =
                FindViewById<TextView>(Resource.Id.txtLocation);

                Android.Locations.Location oLocation;

            oLocation = _locMgr.GetLastKnownLocation (Context.LocationService);
            IList<String> oLocationProviders = _locMgr.GetProviders(true);

            //Location location;
            button.Click += delegate {
                if(oLocationProviders != null)
                    {

                _locMgr.RequestLocationUpdates(oLocationProviders[0], 2000, 1, this);
                _locMgr.RequestLocationUpdates(oLocationProviders[1], 2000, 1, this);

                    }
                    else{

                    locationText.Text ="No Provider Found";
                    }

            };

        }

        protected override void OnResume() {
            base.OnResume();

        }

        protected override void OnPause() {
            base.OnPause ();
            _locMgr.RemoveUpdates(this);
        }

        public void OnLocationChanged (Location location)
        {

            var locationText =
                   FindViewById<TextView> (Resource.Id.txtLocation);
            if (location != null) {
                locationText.Text = String.Format ("Latitude = {0}, Longitude = {1}",
                   location.Latitude, location.Longitude);
            }
        }

        public void OnProviderDisabled(string provider)
        {

        }

        public void OnProviderEnabled(string provider)
        {
        }

        public void OnStatusChanged(string provider, Availability status, Bundle extras)
        {
        }

    }
} 
```

我尝试过使用 GetBestProvider/GetProviders/RequestLocationUpdates/GetLastKnownLocation。我无法继续。有人可以指导我为什么我的 OnLocationUpdates 永远不会被调用。即使类 Activity 正在实现 ILocationListener 接口，我也无法在此函数上使用 Override 关键字。请帮助.....也只是为了您的信息，我正在尝试在 Google 的试用版 Emulator AVD For Nexus 5 上运行此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:52:41.580

如果您在模拟器上运行，那么除非您从 DDMS 提供位置，否则永远不会调用 onLocationChanged。在 DDMS 中，您需要提供纬度和经度，以便它调用所需的方法。

请在开放区域检查真实设备上的代码。

# jquery - 从按钮执行异步 python 脚本

> ID：15353519
> 
> 赞同：0
> 
> 时间：2013-03-12T04:47:46.327
> 
> 标签：jquery, python, ajax, cgi

我在 RPi 上安装了一个非常标准的 LAMP。

我有一个带有指标和按钮的 html 界面。我正在使用 Jquery 将服务器端文本文件读入指标，并希望有按钮调整指标。

我的实现是一个带有通过 cgi 运行 python 脚本的按钮的表单。这个想法是让 python 脚本编辑 jquery 正在读入指标的文件。其他脚本在服务器上运行，将文本文件读入硬件控制，因此这个中间文件很重要。

问题是 python 脚本执行重定向页面。我只需要脚本安静地执行。

谢谢。C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T04:26:07.247

这里的答案是 cgi 或 wsgi 通过一个非常简单的 ajax 调用。回想起来，回顾这个​​问题很有趣。

jquery，在本例中用于在 sqlite 数据库上执行查询：

```
function wsgiCallbackTableData (database,table,callback) {
    // Get the data
    //alert(database + ' ' + table + ' ' + callback)
    $.ajax({
        url: "/wsgisqlitequery",
        type: "post",
        datatype:"json",                        
        data: {'database':database,'table':table},
        success: function(response){
            //alert("I worked");
            // Execute our callback function
            callback(response);                                     
        }
     });    
} 
```

蟒蛇：

```
def application(environ, start_response):

import cgi
import json
from pilib import dynamicsqliteread, sqlitequery

post_env = environ.copy()
post_env['QUERY_STRING'] = ''
post = cgi.FieldStorage(
    fp=environ['wsgi.input'],
    environ=post_env,
    keep_blank_values=True
)

formname=post.getvalue('name')
data={}
d={}
for k in post.keys():
    d[k] = post.getvalue(k)

status = '200 OK'

# Run stuff as requested

if 'length' in d:                   # Handle table row subset
    data=dynamicsqliteread(d['database'],d['table'],d['start'],d['length'])
elif 'row' in d:                    # Handle table row
    data=dynamicsqliteread(d['database'],d['table'],d['row'])

elif 'table' in d:                  # Handle entire table
    data=dynamicsqliteread(d['database'],d['table'])
elif 'query' in d:                          # Take plain single query
    result=sqlitequery(d['database'],d['query'])
    data=result
elif 'queryarray[]' in d:           # Take query array, won't find
    result=[]
    for query in d['queryarray[]']:
        result.append(sqlitequery(d['database'],query))
    data=result
else:
    data=['empty']

output = json.dumps(data,indent=1)

response_headers = [('Content-type', 'application/json')]
start_response(status,response_headers)

return [output] 
```

pilib 包含一组非常基本的 sqlite 命令，这些命令打包到一个动态调用中。

# windows-phone-7 - 退出申请 - Windows Phone 认证

> ID：15353520
> 
> 赞同：1
> 
> 时间：2013-03-12T04:48:04.360
> 
> 标签：windows-phone-7

这是退出应用程序的代码。

```
if (NavigationService.CanGoBack)
{
            while (NavigationService.RemoveBackEntry() != null)
            {
                NavigationService.RemoveBackEntry();
            }
} 
```

谁能告诉我从 Windows Phone 认证要求的角度来看是否允许？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:59:49.047

您不应该通过这样做来中断正常的应用程序流程。用户希望通过点击后退按钮或 Windows 键来关闭应用程序。用户可能还期望通过快速应用切换来恢复应用程序的工作。

此外，您的方法不会退出应用程序，因为在某一时刻您将访问主页，它无法返回。之后，将无法删除返回条目。

底线：**不要这样做。**

Peter Torr 的一个很好的解释可以[在这里找到](http://blogs.msdn.com/b/ptorr/archive/2010/08/01/exiting-a-windows-phone-application.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:30:11.257

在我的一个应用程序中，我的任务是在用户重置他/她的帐户时退出。该应用程序在商店中，因此没有问题。我确定您可以使用此代码实现退出，并且可以：

```
var g = new Microsoft.Xna.Framework.Game();
                    g.Exit(); 
```

只需添加参考`Microsoft.Xna.Framework.Game`

[看看这个链接](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)

> **5.1.2 - 应用关闭**

```
The app must handle exceptions raised by the any of the managed or native System API 
and not close unexpectedly. During the certification process, the app is monitored 
for unexpected closure. An app that closes unexpectedly fails certification. The app
must continue to run and remain responsive to user input after the exception is
handled. 
```

例如，您只需要一条消息，因此预期会出现**THE EXIT 。**

# gwt - 关于 GWT 的教程

> ID：15353523
> 
> 赞同：1
> 
> 时间：2013-03-12T04:48:20.400
> 
> 标签：gwt

我正在开发一个新项目，其中 GUI 部分构建在 GWT（Google 窗口工具包）之上，因为我必须对 GUI 部分进行一些更改，请告诉我一些 GUI 视频教程，尽管我正在经历[http://www.mkyong.com/google-app-engine/google-app-engine-hello-world-example-using-eclipse/](http://www.mkyong.com/google-app-engine/google-app-engine-hello-world-example-using-eclipse/) 但请提供一些最好的教程，特别是视频教程。在此先感谢

还请告知谷歌网络工具包和谷歌应用引擎它们是两个不同的独立事物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:20:17.943

在这里你可以从`tutorial`helloworld[开始。](http://www.youtube.com/watch?v=0MjQg9Mssqw).

然后看看[使用 GWT 构建的体系结构](http://www.youtube.com/watch?v=AapyOMOoQNM)

最后是[远程过程调用](http://www.youtube.com/watch?v=Hd5vnHNylB8)（`hitting backend`）。

最后是您的第二个问题[GWT 与 App 引擎](http://www.youtube.com/watch?v=M5x6E6ze1x8&playnext=1&list=PL254DA9E1D5FE58E3&feature=results_main)

我建议看看[GWT 展示](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCheckBox)和代码示例。

以及最好的 GWT 示例网站[roughian](http://examples.roughian.com/#Home)

# php - 正则表达式数字和连字符

> ID：15353532
> 
> 赞同：1
> 
> 时间：2013-03-12T04:48:36.277
> 
> 标签：php, regex

我有一个函数可以在字符串中搜索一个效果很好的字母和/或数字组合，但有时该组合还包含一个我也想匹配的连字符。下面的正则表达式取自更大的正则表达式模式匹配，但这是我坚持的表达式的一部分。

例如：

([A-Za-z0-9-]+)

匹配字符串 123 或 123A 但不匹配 123-125 或 123A-125A

我确信这是一个简单的解决方案，但这不是我的强项。

提前致谢

```
$key= preg_replace("/http:\/\/www.website.com\/[0-9]+\/([A-Za-z0-9-]+)_([A-Za-z_]+)_(MUSIC|VIDEO|PHOTOS)_([A-Z_]+)_(..+)_([0-9]+)/i", '${1}, ${2}, ${3}, ${4}, ${5}, ${6}', $url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:55:40.157

很简单，您需要转义字符集中的连字符：

```
([A-Za-z0-9\-]+) 
```

# javascript - 代码在 Fiddle 上运行，但不在网站上

> ID：15353535
> 
> 赞同：3
> 
> 时间：2013-03-12T04:48:50.100
> 
> 标签：javascript, jquery, html, audio, jsfiddle

这在 Fiddle 上运行良好，但在我的网站上不太好。我似乎无法弄清楚其中的区别。

我已经尝试删除整个 Videobox 包含，但这并没有解决它。

我也意识到 jQuery 和 Mootools 有点多，但我真的很喜欢 Videobox，我真的很喜欢音频播放器。

就我网站上的工作而言，一切都按其应有的方式工作，除了我的 javascript 中的第二个函数。

**这是小提琴：http:** [//jsfiddle.net/HM8m7/4/](http://jsfiddle.net/HM8m7/4/)

**我的网站的 HTML：**

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Music</title>

<script type="text/javascript" src="videobox/js/mootools.js"></script>
<script type="text/javascript" src="videobox/js/swfobject.js"></script>
<script type="text/javascript" src="videobox/js/videobox.js"></script>
<link rel="stylesheet" href="videobox/css/videobox.css" type="text/css" media="screen" />

<link rel="stylesheet" href="libs/css/styles.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="src/jquery.ubaplayer.js"></script>
<script>
       jQuery.noConflict();
       jQuery(function () {
           jQuery("#ubaPlayer").ubaPlayer({
               codecs: [{
                 name: "MP3",
                 codec: 'audio/mpeg;'
               }]
           });

       });

       jQuery('a[rel=vidbox]').click(function () {

           if (jQuery("#ubaPlayer").ubaPlayer("playing") === true) {
              jQuery("#ubaPlayer").ubaPlayer("pause");
             }
         return false;
       });
</script>
</head>

<body>
<div id="content_wrapper">    
 <div id="table_container">
  <table>
    <tr>
      <th>Title</th>
    </tr>
    <tr>
      <td><div id="ubaPlayer"></div>
        <ul class="controls">
        <a href="http://www.youtube.com/v/2sAnENc6ObI&autoplay=1" rel="vidbox" title="The Rainbox Connection - Live at the Berklee Performance Center"><img src="playbtn.png" class="fakeplay" alt="Play Button">The Rainbow Connection (Video)</a>
        <ul class="controls">
        <li><a class="audioButton" href="mp3/closetoyou.mp3">
        Close to You</a></li>
      </td>
    </tr>
 </table>
</div>
</div>
</body>
</html> 
```

**音频播放器脚本：**

```
(function($) {
var defaults = {
    audioButtonClass: "audioButton",
    autoPlay: null,
    codecs: [{
        name: "OGG",
        codec: 'audio/ogg; codecs="vorbis"'
    }, {
        name: "MP3",
        codec: 'audio/mpeg'
    }],
    continuous: false,
    extension: null,
    flashAudioPlayerPath: "libs/swf/player.swf",
    flashExtension: ".mp3",
    flashObjectID: "audioPlayer",
    loadingClass: "loading",
    loop: false,
    playerContainer: "player",
    playingClass: "playing",
    swfobjectPath: "libs/swfobject/swfobject.js",
    volume: 1
},
    currentTrack, isPlaying = false,
    isFlash = false,
    audio, $buttons, $tgt, $el, playTrack, resumeTrack, pauseTrack, methods = {
        play: function(element) {
            $tgt = element;
            currentTrack = _methods.getFileNameWithoutExtension($tgt.attr("href"));
            isPlaying = true;
            $tgt.addClass(defaults.loadingClass);
            $buttons.removeClass(defaults.playingClass);

            if (isFlash) {
                if (audio) {
                    _methods.removeListeners(window);
                }
                audio = document.getElementById(defaults.flashObjectID);
                _methods.addListeners(window);
                audio.playFlash(currentTrack + defaults.extension);
            } else {
                if (audio) {
                    audio.pause();
                    _methods.removeListeners(audio);
                }
                audio = new Audio("");
                _methods.addListeners(audio);
                audio.id = "audio";
                audio.loop = defaults.loop ? "loop" : "";
                audio.volume = defaults.volume;
                audio.src = currentTrack + defaults.extension;
                audio.play();
            }
        },

        pause: function() {
            if (isFlash) {
                audio.pauseFlash();
            } else {
                audio.pause();
            }

            $tgt.removeClass(defaults.playingClass);
            isPlaying = false;
        },

        resume: function() {
            if (isFlash) {
                audio.playFlash();
            } else {
                audio.play();
            }
            $tgt.addClass(defaults.playingClass);
            isPlaying = true;
        },

        playing: function() {
            return isPlaying;
        }
    },

    _methods = {
        init: function(options) {
            var types;

            //set defaults
            $.extend(defaults, options);
            $el = this;

            //listen for clicks on the controls
            $(".controls").bind("click", function(event) {
                _methods.updateTrackState(event);
                return false;
            });
            $buttons = $("." + defaults.audioButtonClass);

            types = defaults.codecs;
            for (var i = 0, ilen = types.length; i < ilen; i++) {
                var type = types[i];
                if (_methods.canPlay(type)) {
                    defaults.extension = [".", type.name.toLowerCase()].join("");
                    break;
                }
            }

            if (!defaults.extension || isFlash) {
                isFlash = true;
                defaults.extension = defaults.flashExtension;
            }

            if (isFlash) {
                $el.html("<div id='" + defaults.playerContainer + "'/>");
                $.getScript(defaults.swfobjectPath, function() {
                    swfobject.embedSWF(defaults.flashAudioPlayerPath, defaults.playerContainer, "0", "0", "9.0.0", "swf/expressInstall.swf", false, false, {
                        id: defaults.flashObjectID
                    }, _methods.swfLoaded);
                });
            } else {
                if (defaults.autoPlay) {
                    methods.play(defaults.autoPlay);
                }
            }
        },

        updateTrackState: function(evt) {
            $tgt = $(evt.target);
            if (!$tgt.hasClass("audioButton")) {
                return;
            }
            if (!audio || (audio && currentTrack !== _methods.getFileNameWithoutExtension($tgt.attr("href")))) {
                methods.play($tgt);
            } else if (!isPlaying) {
                methods.resume();
            } else {
                methods.pause();
            }
        },

        addListeners: function(elem) {
            $(elem).bind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        removeListeners: function(elem) {
            $(elem).unbind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        onLoaded: function() {
            $buttons.removeClass(defaults.loadingClass);
            $tgt.addClass(defaults.playingClass);

            audio.play();
        },

        onError: function() {
            $buttons.removeClass(defaults.loadingClass);
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }
        },

        onEnded: function() {
            isPlaying = false;
            $tgt.removeClass(defaults.playingClass);
            currentTrack = "";
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }

            if (defaults.continuous) {
                var $next = $tgt.next().length ? $tgt.next() : $(defaults.audioButtonClass).eq(0);
                methods.play($next);
            }

        },

        canPlay: function(type) {
            if (!document.createElement("audio").canPlayType) {
                return false;
            } else {
                return document.createElement("audio").canPlayType(type.codec).match(/maybe|probably/i) ? true : false;
            }
        },

        swfLoaded: function() {
            if (defaults.autoPlay) {
                setTimeout(function() {
                    methods.play(defaults.autoPlay);
                }, 500);
            }
        },

        getFileNameWithoutExtension: function(fileName) {
            //this function take a full file name and returns an extensionless file name
            //ex. entering foo.mp3 returns foo
            //ex. entering foo returns foo (no change)
            var fileNamePieces = fileName.split('.');
            fileNamePieces.pop();
            return fileNamePieces.join(".");
        }
    };

$.fn.ubaPlayer = function(method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === "object" || !method) {
        return _methods.init.apply(this, arguments);
    } else {
        $.error("Method " + method + " does not exist on jquery.ubaPlayer");
    }
};})(jQuery); 
```

**视频框脚本：**

```
var Videobox = {

init: function (options) {
    // init default options
    this.options = Object.extend({
        resizeDuration: 400,    // Duration of height and width resizing (ms)
        initialWidth: 250,      // Initial width of the box (px)
        initialHeight: 250,     // Initial height of the box (px)
        defaultWidth: 625,      // Default width of the box (px)
        defaultHeight: 350, // Default height of the box (px)
        animateCaption: true,   // Enable/Disable caption animation
        flvplayer: 'swf/flvplayer.swf'
    }, options || {});

    this.anchors = [];
    $A($$('a')).each(function(el){
        if(el.rel && el.href && el.rel.test('^vidbox', 'i')) {
            el.addEvent('click', function (e) {
      e = new Event(e);
      e.stop();
      this.click(el);
            }.bind(this));
            this.anchors.push(el);
        }
}, this);

    this.overlay = new Element('div').setProperty('id', 'lbOverlay').injectInside(document.body);
    this.center = new Element('div').setProperty('id', 'lbCenter').setStyles({width: this.options.initialWidth+'px', height: this.options.initialHeight+'px', marginLeft: '-'+(this.options.initialWidth/2)+'px', display: 'none'}).injectInside(document.body);

    this.bottomContainer = new Element('div').setProperty('id', 'lbBottomContainer').setStyle('display', 'none').injectInside(document.body);
    this.bottom = new Element('div').setProperty('id', 'lbBottom').injectInside(this.bottomContainer);
    new Element('a').setProperties({id: 'lbCloseLink', href: '#'}).injectInside(this.bottom).onclick = this.overlay.onclick = this.close.bind(this);
    this.caption = new Element('div').setProperty('id', 'lbCaption').injectInside(this.bottom);
    this.number = new Element('div').setProperty('id', 'lbNumber').injectInside(this.bottom);
    new Element('div').setStyle('clear', 'both').injectInside(this.bottom);

    var nextEffect = this.nextEffect.bind(this);
    this.fx = {
        overlay: this.overlay.effect('opacity', {duration: 500}).hide(),
        center: this.center.effects({duration: 500, transition: Fx.Transitions.sineInOut, onComplete: nextEffect}),
        bottom: this.bottom.effect('margin-top', {duration: 400})
    };

},

click: function(link) {

        return this.open (link.href, link.title, link.rel);

},
open: function(sLinkHref, sLinkTitle, sLinkRel) {
    this.href = sLinkHref;
    this.title = sLinkTitle;
    this.rel = sLinkRel;
    this.position();
    this.setup();
    this.video(this.href);
    this.top = Window.getScrollTop() + (Window.getHeight() / 15);
    this.center.setStyles({top: this.top+'px', display: ''});
    this.fx.overlay.start(0.8);
    this.step = 1;
    this.center.setStyle('background','#fff url(loading.gif) no-repeat center');
    this.caption.innerHTML = this.title;
    this.fx.center.start({'height': [this.options.contentsHeight]});
},

setup: function(){
    var aDim = this.rel.match(/[0-9]+/g);
    this.options.contentsWidth = (aDim && (aDim[0] > 0)) ? aDim[0] : this.options.defaultWidth;
    this.options.contentsHeight = (aDim && (aDim[1] > 0)) ? aDim[1] : this.options.defaultHeight;

},

position: function(){
this.overlay.setStyles({'top': window.getScrollTop()+'px', 'height': window.getHeight()+'px'});
},

video: function(sLinkHref){
    if (sLinkHref.match(/youtube\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.youtube.com/v/"+this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/metacafe\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('/');
        this.videoID = videoId[4];
        this.so = new SWFObject("http://www.metacafe.com/fplayer/"+this.videoID+"/.swf", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/google\.com\/videoplay/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://video.google.com/googleplayer.swf?docId="+this.videoID+"&hl=en", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/ifilm\.com\/video/i)) {
      this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('video/');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.ifilm.com/efp", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
        this.so.addVariable("flvbaseclip", this.videoID+"&");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/\.mov/i)) {
      this.flash = false;
        if (navigator.plugins && navigator.plugins.length) {
      this.other ='<object id="qtboxMovie" type="video/quicktime" codebase="http://www.apple.com/qtactivex/qtplugin.cab" data="'+sLinkHref+'" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  } else {
    this.other = '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'" id="qtboxMovie"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  }
    }
    else if (sLinkHref.match(/\.wmv/i) || sLinkHref.match(/\.asx/i)) {
    this.flash = false;
     this.other = '<object NAME="Player" WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" type="application/x-oleobject" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"><param NAME="URL" VALUE="'+sLinkHref+'"><param><param NAME="AUTOSTART" VALUE="false"></param><param name="showControls" value="true"></param><embed WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" SRC="'+sLinkHref+'" TYPE="application/x-oleobject" AUTOSTART="false"></embed></object>'
    }
    else if (sLinkHref.match(/\.flv/i)) {
     this.flash = true;
     this.so = new SWFObject(this.options.flvplayer+"?file="+sLinkHref, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
    }
    else {
      this.flash = true;
        this.videoID = sLinkHref;
        this.so = new SWFObject(this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
    }
},

nextEffect: function(){
    switch (this.step++){
    case 1:
        this.fx.center.start({'width': [this.options.contentsWidth], 'marginLeft': [this.options.contentsWidth/-2]});
        break;
        this.step++;
    case 2:
        this.center.setStyle('background','#fff');
        this.flash ? this.so.write(this.center) : this.center.setHTML(this.other) ;
        this.bottomContainer.setStyles({top: (this.top + this.center.clientHeight)+'px', height: '0px', marginLeft: this.center.style.marginLeft, width: this.options.contentsWidth+'px',display: ''});
        if (this.options.animateCaption){
            this.fx.bottom.set(-this.bottom.offsetHeight);
            this.bottomContainer.style.height = '';
            this.fx.bottom.start(0);
            break;
        }
        this.bottomContainer.style.height = '';
        this.step++;
    }
},

close: function(){
    this.fx.overlay.start(0);
    this.center.style.display = this.bottomContainer.style.display = 'none';
    this.center.innerHTML = '';
    return false;
}};window.addEvent('domready', Videobox.init.bind(Videobox)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:05:30.123

您的网站 JS 代码需要等待 DOM 准备好，然后 jQuery 才能找到`#ubaPlayer`and`a[rel=vidbox]`元素（这是因为您`script`在 HTML 之前声明，如果您的脚本是在 html 之后定义的，您可以摆脱它，尽管这不是一个好主意，因为你真的应该把你的 JavaScript 放在一个外部`.js`文件中）。

因此，将其包装起来，`.ready()`以便您的脚本在 DOM 准备好后运行：

```
 jQuery(document).ready(function () {
       jQuery("#ubaPlayer").ubaPlayer({
           codecs: [{
             name: "MP3",
             codec: 'audio/mpeg;'
           }]
       });
       jQuery('a[rel=vidbox]').click(function () {
           if (jQuery("#ubaPlayer").ubaPlayer("playing") === true) {
               jQuery("#ubaPlayer").ubaPlayer("pause");
           }
           return false;
       });

   }); 
```

小提琴有`on DOM ready`，所以它有效。

# jquery - jquery拖动停止后chrome中的表格边框问题

> ID：15353536
> 
> 赞同：6
> 
> 时间：2013-03-12T04:48:51.543
> 
> 标签：jquery, html, css, jquery-ui, google-chrome

**然后在拖动时使用`position: relative:`td, th 进行**更新****

 **![在此处输入图像描述](../Images/583573ab9b86b1c2f3902e5046585c75.png)

jquery拖动后表格边框消失

![在此处输入图像描述](../Images/74d56b51c54e7d4665421538e73339ba.png)

在 mozila 和 ie 中工作正常，但在 chrome 中不行

jsfiddle[在这里](http://jsfiddle.net/YTZrj/)

**HTML**

```
<table>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>city</th>
    </tr>
      <tr class="person">
        <td>1</td>
        <td>abc</td>
        <td>abc</td>
    </tr>
      <tr class="person">
       <td>2</td>
        <td>xyz</td>
        <td>xyz</td>
    </tr>
</table> 
```

**CSS**

```
table{
    border-collapse : collapse;
}

td, th{
    border : 1px solid #000;
    padding : 5px 20px;
}

th{
    background-color : #f3f3f3;
}

.drag {
    background-color : #f3f3f3;
    height : 20px;
    width : 100px;
} 
```

**JS**

```
$('.person').draggable({
    helper : function(){
        return $('<div class="drag">Drag me</div>')
    },
    cursor : 'crosshair',
    cursorAt : {left : 50},
    start : function(){
        $(this).hide();
    },
    stop : function(){
          $(this).show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:56:30.467

从表格 css 中删除边框折叠似乎已经成功了。

```
table{
      /* border-collapse : collapse */
} 
```

查看[http://jsfiddle.net/YTZrj/1/](http://jsfiddle.net/YTZrj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:45:25.807

```
table {border-collapse:separate;} 
```

会使表格看起来有点不同，但不会再引起这个问题。

[http://jsfiddle.net/YTZrj/4/](http://jsfiddle.net/YTZrj/4/)**

# ios - iOS CollectionView 'NSInternalInconsistencyException'

> ID：15353537
> 
> 赞同：2
> 
> 时间：2013-03-12T04:49:05.267
> 
> 标签：ios, cocoa, exception

所以，我正在玩一些 iOS 编程。没有太多时间，但我已经推迟学习它太久了。但是我现在被这个可怕的问题困住了 2 天。当我尝试将单元格添加到我的 collectionView 时出现以下错误。

'NSInternalInconsistencyException', 原因：'尝试将第 0 项插入第 0 节，但更新后第 0 节中只有 0 项'

这是我的代码：

```
@interface DocumentsViewController() {
    FileManager *fileManager;
    NSMutableArray *folderContent;
}

@end

@implementation DocumentsViewController

@synthesize fileList;

- (void)viewDidLoad
{
    [super viewDidLoad];

    folderContent = [[NSMutableArray alloc] init];
    fileManager = [[FileManager alloc] init];

    NSArray *items = [fileManager getDirectoryInfo];
    [self createFileList:items];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)createFileList:(NSArray *)items
{
    for(NSString *item in items)
    {
        NSInteger count = [folderContent count];
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:count inSection:0];
        [folderContent insertObject:item atIndex:count];

        [self.fileList insertItemsAtIndexPaths:@[indexPath]];
    }
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    FilesViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"DefaultCell" forIndexPath:indexPath];

    cell.image.image = [UIImage imageNamed:@"folder.png"];
    cell.label.text = @"oi"; //objects[indexPath.row];

    return cell;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return folderContent.count;
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

@end 
```

在此先感谢，卢卡斯

*更新*

好的，所以在一些非常有用的提示之后，我收到了另一条错误消息：'NSInternalInconsistencyException'，原因：'无效更新：第 0 节中的项目数无效。更新后现有节中包含的项目数 (1) 必须等于更新前该节中包含的项目数 (1)，加上或减去从该节插入或删除的项目数（1 插入，0 删除），加上或减去移入或移出的项目数该部分的（0 移入，0 移出）。

就像我在下面所说的那样，我可能正在使用 (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section 错误，因为它被连续调用了两次，而没有给 folderContent.count 的值更改时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T05:02:29.077

您真的想在创建列表时使用 insertItemsAtIndexPath 吗？这将导致它们一次动画化。为什么在 for 循环后完全填充 [self.fileList reloadData] 后不执行？

另外，我认为这条线可能会给您带来问题- `NSIndexPath *indexPath = [NSIndexPath indexPathForRow:count inSection:0];`

您正在使用一个集合视图，它没有与 UITableViews 相同意义上的行（注意 indexPathForItem 而不是 indexPathForRow） `NSIndexPath *indexPath = [NSIndexPath indexPathForItem:count inSection:0];`

# ajax - 通过 Ajax 显示表单

> ID：15353539
> 
> 赞同：3
> 
> 时间：2013-03-12T04:49:11.757
> 
> 标签：ajax, symfony

## 编辑

关于 SO 的许多问题都是关于通过 Ajax 提交表单（[这个](https://stackoverflow.com/questions/9002489/symfony2-form-with-csrf-passed-through-jquery-ajax)非常流行），而不是关于如何通过 ajax 调用显示表单。

我的问题是关于粗体部分：**用户要求表单 -> ajaxCall -> displayForm** -> 用户提交表单 -> 将表单发送到控制器 -> 验证表单 -> 向用户发送响应（错误与否）。

* * *

## 问题

ajax 调用是一个 POST，在进行 ajax 调用时`$request->isMethod('POST')`总是返回。`true`因此，如果通过 ajax 调用请求新表单，它将始终被验证。我附上了下面的代码，表单显示正常，但表单中显示以下错误消息：

> CSRF 令牌无效。

问题是在控制器中的表单的ajax调用请求期间正在验证表单。

附带说明一下，提交表单效果很好，并且验证效果很好。

有谁知道如何在不验证空白新表单的情况下通过 Ajax 显示表单？

## 到目前为止我的代码：

```
/**
 * Display the message as well as the form to reply to that message
 *
 * @param Request $request
 * @return Response
 */
public function viewMessageAction(Request $request)
{
    //Forbid every request but jQuery's XHR
    if (!$request->isXmlHttpRequest()){
        return new Response('', 200, array('Content-Type' => 'application/json'));
    }

    //Retrieve the message from the request
    $messageId = $request->request->get('messageId');
    $message = $this->getMessageManager->getMessage($messageId);

    //Creates the form to reply to the message
    $form = $this->container->get('reply_form.factory')->create($message);

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            //...
            return $this->redirect($this->generateUrl('task_success'));
        }
    }

    $answer =$this->container->get('templating')->renderResponse('AcmeMessageBundle:Message:message.html.twig', array(
        'form' => $form->createView(),
        'message' => $message
    ));

    $response = new Response();
    $response->headers->set('Content-type', 'application/json; charset=utf-8');
    $response->setContent(json_encode($answer));
    return $response;

} 
```

## 编辑：jQuery部分：

```
<script type="text/javascript">
    $(function(){

        var myPath = ;//...

        function getMessage(messageId){
            $.ajax({
                type: "POST",
                url:  myPath,
                data: "messageId="+messageId,
                success: function(returnData){
                    $('#message').html(returnData);
                }
            });
        }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:02:57.550

ajax 调用并不总是需要 POST。它可以是 GET、PUT 或 DELETE。因此，当您进行 ajax 调用以获取表单时，请使其成为 GET 请求。

如果你在这里使用 jquery，你就是这样做的

```
$.ajax({
   url: "http://localhost/proj/url",
   type:'GET'
}) 
```

如果你使用的是 Using XHR，你可以在 open 函数中指定类型

```
xhr.open( 'GET', URL) 
```

PS：最好使用[JMS Serializer Service](https://github.com/schmittjoh/JMSSerializerBundle)进行序列化而不是 json_encode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:54:01.663

您可能还对[FOSJsRoutingBundle 感兴趣](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)，因为它通常为使用 ajax 和 Symfony2 路由增加了很多舒适度。

# jvm - installshield如何搜索和创建jvm路径提示文件？

> ID：15353548
> 
> 赞同：2
> 
> 时间：2013-03-12T04:50:07.073
> 
> 标签：jvm, installshield

我正在使用 installshield 安装产品，它会首先读取 is:javahome 标签来指定和验证 jre 位置，如果没有设置，则读取 tmp 文件 /tmp/istem2223070045253/xxx_linux_150.jvm 进行安装。这是这个 jvm 提示文件的内容：

```
DESC: IBM Java Runtime Environment (JRE) 1.5.0 for Linux
JVM_EXE: bin/java
SKIP_PATH_SEARCH: true
CLASSPATH: "-cp "
CLASSPATH_SEPARATOR: :
SYSTEM: "-D"
SYSTEM_SEPARATOR: =
INITIAL_HEAP_SIZE: "-Xms"
MAXIMUM_HEAP_SIZE: "-Xmx"
JVM_PROPERTIES:
"java.vendor=IBM..."
"java.version=1.5.0..."
/:
SET_ENV_FOR_WIZARD:
JAVA2D_USEAWTFONTS=0
/:
PATH_HINT:
was/linux/java
../linux
linux/java

/:
SEARCH_ALL: 0
JVM_HOME:/update/xxx/was/linux/java/ 
```

我想知道这个 jvm 文件是如何工作的以及 path_hint 是如何生成的？有没有我可以参考的文档？谢谢

# asp.net-mvc - [问]asp.net mvc更新数据库报错

> ID：15353550
> 
> 赞同：3
> 
> 时间：2013-03-12T04:50:30.593
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我有两个一对一关系的模型类：

```
class Person
{
    public int PersonID { get; set; }
    public int DetailPersonID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DetailPerson DetailPerson { get; set; }
}

class DetailPerson
{
    public int DetailPersonID { get; set; }
    public string Address { get; set; }
    public string PhoneNumber { get; set; }
} 
```

以及编辑页面视图的代码：

```
@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.PersonID)

    @Html.LabelFor(m => m.FirstName)
    @Html.TextBoxFor(m => m.FirstName)

    @Html.LabelFor(m => m.LastName)
    @Html.TextBoxFor(m => m.LastName)

    @Html.LabelFor(m => m.DetailPerson.Address)
    @Html.TextBoxFor(m => m.DetailPerson.Address)

    @Html.LabelFor(m => m.DetailPerson.PhoneNumber)
    @Html.TextBoxFor(m => m.DetailPerson.PhoneNumber)

    <input type="submit" value="Edit">

} 
```

EF 脚手架使用此代码更新数据：

```
db.Entry(person).State = System.Data.EntityState.Modified;
db.saveChanges(); 
```

当我提交编辑表单时，我收到如下错误：

**无法插入外键值，因为对应的主键值不存在。[ 外键约束名称 = FK_dbo.People_dbo.DetailPersons_DetailPersonID ]**

但如果我这样做：

```
Person p = db.Persons.Find(person.PersonID);
p.DetailPerson = person.DetailPerson;
p.FirstName = person.FirstName;
p.LastName = person.LastName;
db.saveChanges(); 
```

更新数据成功无错误

我想知道为什么第一种方法会导致错误，当我在包含**EntityState.Modified**的行设置断点时，但外键值（ DetailPersonID ）为0。然后，我添加了@ **Html.HiddenFor(m => m. DetailPersonID)**在编辑表单上。

我得到另一个错误：

**发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。**

我仍然以另一种方式更新数据库，我只是好奇为什么第一种方式是 EF 标准来更新数据会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:16:29.313

如果存在一对一的关系，则不应使用两个类，因为无论如何 EF 都会将 db 标准化为相应的形式。像这样组合你的课程。

```
public class Person
{
    public int PersonID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Address { get; set; }
    public string PhoneNumber { get; set; }
} 
```

如果您必须有单独的课程（不推荐），请这样做：

```
public class Person
{
    public int PersonID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int DetailPersonID { get; set; }
    public virtual DetailPerson DetailPerson { get; set; }
}

public class DetailPerson
{
    public int PersonID { get; set; }
    public virtual Person Person { get; set; }
    public int DetailPersonID { get; set; }
    public string Address { get; set; }
    public string PhoneNumber { get; set; }
} 
```

然后当你检索你的对象时，这样做：

```
// include the detail when retrieving the parent
Person person = db.People.Include(p=>p.DetailPerson).Single(p=>p.PersonId == whateverIdYou Need);

// modify whatever you like
person.DetailPerson.Address = "my new address";

// then your previous statement will work
db.Entry(person).State = System.Data.EntityState.Modified;
db.saveChanges(); 
```

# java - 如何在 Android 中的 GridView 中设置图像显示中的 TextView

> ID：15353551
> 
> 赞同：-1
> 
> 时间：2013-03-12T04:50:31.420
> 
> 标签：java, android, listview, gridview

大家好！！我已经在gridview中显示了图像。现在单击gridview中的任何图像时，我将导航到下一页，单击的图像显示在屏幕上。根据我的需要，我必须在全屏上添加图像的描述我已经采取了 TextView 但它没有发生。这是我的代码......

全图.java

```
public class FullImage extends Activity {
private TextView lView = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full);

    // get intent data
    Intent i = getIntent();

    // Selected image id
    int position = i.getExtras().getInt("id");

    if (position == 1){
        lView = (TextView)findViewById(R.id.my_title);
        lView.setText("Akshardham");

    }
    else{
        lView = (TextView)findViewById(R.id.my_title);
        lView.setText("Other");

    }

    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(imageAdapter.mThumbIds[position]);
} 
```

和 Full.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView android:id="@+id/full_image_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

<TextView
android:id="@+id/my_title"
android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:layout_centerVertical="true"
android:layout_marginLeft="5dip"/> 
```

这是我的主要活动类代码..

```
gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            // Sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), FullImage.class);
            // passing array index
            i.putExtra("id", position);
            startActivity(i);
        }
    });
} 
```

这是我的 ImageAdapter 代码...

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.akshar, R.drawable.charminar,
        R.drawable.gateway, R.drawable.goa,
        R.drawable.jimcorbet, R.drawable.kerala,
        R.drawable.mussoorie, R.drawable.parliament,
        R.drawable.qutub, R.drawable.taj,
        R.drawable.tirupati

};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(270, 270));
    return imageView;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:03:20.463

这里 imageView 是高度和宽度的填充父级，因此它占用了屏幕上的所有可用空间。所以你需要设计你的布局，以便按顺序显示两个元素。

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ImageView
        android:id="@+id/full_image_view"
        android:layout_width="fill_parent"
        android:src="@drawable/button"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/my_title"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/full_image_view"
        android:layout_height="wrap_content"
        android:text="This is the image which i want at bottom"
        android:layout_width="wrap_content"
        android:layout_marginLeft="5dip" />
</RelativeLayout> 
```

# ruby-on-rails - 如何更新具有大量行的特定列

> ID：15353553
> 
> 赞同：1
> 
> 时间：2013-03-12T04:50:48.320
> 
> 标签：ruby-on-rails, activerecord

我们正在使用以下查询将具有 200 万行的表中的某个字段设置为空。使用 ActiveRecord API 是否有更快的方法来执行此操作。现在需要 2-3 分钟才能从这个电话中返回。

```
Foo.update_all(:bar => nil) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:24:15.847

试试这个，另一种方式来做你想做的事。

```
ALTER TABLE foo DROP COLUMN bar; 
```

进而，

```
ALTER TABLE foo ADD COLUMN bar INT(10) DEFAULT NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:01:24.877

可能不是。这将执行非常简单的 SQL：

```
UPDATE foos SET bar = NULL 
```

不知道如何利用 ActiveRecord API 来*加快*速度。

# firefox - Firefox Add-on dev , 如何在 Addon Builder 中使用来自 MDN 的示例代码

> ID：15353554
> 
> 赞同：5
> 
> 时间：2013-03-12T04:50:55.003
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我在搜索 MDN 时使用 add on builder 来构建扩展我发现我不知道如何在在线插件构建器中调用它们的接口

例如这段代码

```
var bmsvc = Components.classes["@mozilla.org/browser/nav-bookmarks-service;1"]
                      .getService(Components.interfaces.nsINavBookmarksService); 
```

不构建并导致 XPI 错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:56:05.387

在文档的顶部放置行：

```
const { Cc, Ci, Cu } = require('chrome'); 
```

而不是`Components.classes`尝试使用`Cc`，而不是`Components.interfaces`尝试`Ci`。

```
var bmsvc = Cc["@mozilla.org/browser/nav-bookmarks-service;1"]
                  .getService(Ci.nsINavBookmarksService); 
```

这应该可以，如果没有，请将链接放置到您的公共插件或代码示例并链接到文档站点。

# wdk - IoGetDevicePropertyData() 返回 STATUS_OBJECT_NAME_NOT_FOUND

> ID：15353557
> 
> 赞同：2
> 
> 时间：2013-03-12T04:50:55.230
> 
> 标签：wdk, pci-e, kmdf

我正在为 PCI 设备更新功能正常的 KMDF 驱动程序，使用 WinDDK 7600.16385.1 和 OSR 的 ddkbuild.cmd，针对 WLH，在 Win7 x86 和 x64 上进行测试。

我正在尝试检索 DEVPKEY_Device_LocationPaths 属性。

设备管理器设备属性详细信息选项卡在“位置路径”中显示预期值...

```
PCIROOT(0)#PCI(1C00)#PCI(0000)#PCI(0200)#PCI(0000)#PCI(0900)#PCI(0000)#PCI(0400) 
```

...但是从 EvtDriverDeviceAdd 处理程序调用 IoGetDevicePropertyData() ...

```
 PDEVICE_OBJECT pWdmPDO = WdfFdoInitWdmGetPhysicalDevice( pDeviceInit );

    [... WdfDeviceCreate succeeds ...]

    WCHAR wszLocationStrings[128] = { 0 }; // Temporary, just to confirm DDI works
    ULONG ulRequiredSize = 0;
    DEVPROPTYPE devPropType = 0;

    status = IoGetDevicePropertyData( pWdmPDO,
                                      &DEVPKEY_Device_LocationPaths,
                                      LOCALE_NEUTRAL,
                                      /*ulFlags*/ 0,
                                      sizeof(wszLocationStrings),
                                      wszLocationStrings,
                                      &ulRequiredSize,
                                      &devPropType ); 
```

... 总是返回 STATUS_OBJECT_NAME_NOT_FOUND。

我努力了 ...

*   为其他 DEVPKEY_Device_* 值调用 IoGetDevicePropertyData()。结果是一样的。

*   在 EvtDevicePrepareHardware 处理程序中调用 IoGetDevicePropertyData()。结果是一样的。

*   调用 WdfDeviceWdmGetPhysicalDevice() 来检索 PDO。结果是一样的

*   WdfDeviceAllocAndQueryProperty()。它工作正常，但不提供我需要的信息。

*   WdfFdoQueryForInterface（GUID_PNP_LOCATION_INTERFACE）。它工作正常但只提供当前节点（即“PCI（0400）”）

*   搜索调用 IoGetDevicePropertyData 的示例代码。我找到了 Windows CDROM 存储类驱动程序示例，但它似乎没有做任何我还没有尝试过的事情。

所以......我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:51:34.653

我在 WinHEC 2006 powerpoint 中找到了一个 MS PnP 支持电子邮件地址，并收到了 Microsoft 的回复...

```
On Vista and Windows 7, IoGetDevicePropertyData cannot retrieve all the DEVPKEY
properties that user-mode can. There is no way for you to directly retrieve that
full path as created by the operating system from kernel mode.

For further questions, the Windows Hardware WDK and Driver Development forum 
(http://social.msdn.microsoft.com/Forums/en-US/wdk/threads ) is a good place to
ask driver development questions. 
```

......我回应了......

```
Thank you very much to your quick response!

It would be very helpful if the IoGetDevicePropertyData online docs could be updated
to include a list of the DEVPKEY properties that are supported and restrictions on
their availability (i.e. only after Start IRP completes as noted in the WinHEC 
powerpoint)

And thanks for the link to the forum, I'll start there next time. 
```

# php - 序列化 PHP/JQuery

> ID：15353559
> 
> 赞同：1
> 
> 时间：2013-03-12T04:51:02.600
> 
> 标签：php, jquery, serialization

我有一个工作程序，但我刚刚了解了 JQuery 和 PHP 中的“序列化”选项，我认为它可以清理我的代码。问题是，在这里阅读了一些很棒的帖子后，我仍然无法正常工作。如果你不介意，有人可以看看吗？

这是我发送到 PHP 页面的内容（序列化表单数据）：

contForm 是我的表单的名称 dispAdd 是我不担心的回调

```
var formData = $('#contForm').serialize();
$.post('functs.php',formData,dispAdd);
    function dispAdd(status) {
      if (status=='added') {
        $('#main').html('<div>Your have been added to the mailing list</div>');
     } else {
       if ($('#fail').length==0) {
            $('#main'.prepend('<div>This email address is already subscribed to our mailing list</div>');
            }
          }
        } 
```

我知道它正在发送字符串，但我在输出结果时遇到问题。我计划使用 PDO 中的输出来访问数据库。我正在尝试 parse_str 但它只是不起作用。这是我的格式化方式：

```
function addMember() 
{
 $params = array();
 parse_str($_POST, $params); 
```

这就是我所能得到的。我试图弄清楚如何访问新变量（序列化表单数据）。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:55:33.323

您的请求通过 AJAX 发送`application/x-www-form-urlencoded`并被解码为`$_POST`.

如果您的表格中有一个`<input name="test" />`表格，则在发布后它将变为：

```
$_POST['test'] 
```

# undeclared-identifier - 未声明的标识符 viewForZoomingInScrollView

> ID：15353561
> 
> 赞同：1
> 
> 时间：2013-03-12T04:51:05.580
> 
> 标签：undeclared-identifier

这是我的协议

```
#import <UIKit/UIKit.h>
#import "HypnosisterView.h"

@interface HypnosisterAppDelegate : UIResponder <UIApplicationDelegate,UIScrollViewDelegate>
{
HypnosisterView *view;
}

@property (strong, nonatomic) UIWindow *window;

@end 
```

这是委托的实现

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

CGRect screenRect = [[self window]bounds];

UIScrollView *scrollView = [[UIScrollView alloc]initWithFrame:screenRect];

[scrollView setMaximumZoomScale:1.0];
[scrollView setMaximumZoomScale:5.0];

[scrollView setDelegate:self];

[[self window]addSubview:scrollView];

CGRect bigRect = screenRect;
view = [[HypnosisterView alloc]initWithFrame:screenRect];
[scrollView addSubview:view];
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return view;
}

[scrollView setContentSize:bigRect.size];

BOOL success = [view becomeFirstResponder];
if (success) {
    NSLog(@"HypnosisView became the first responder");
}else{
    NSLog(@"Couldn't become first responder");
}

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

即使在确认协议给出错误**未声明的标识符 viewForZoomingInScrollView 之后。** 我已经从苹果文档中复制了这个方法，并通过跳转到该委托的定义进行了交叉验证。它显示未声明的这就是为什么也没有出现在自动建议中。请帮帮我。感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T12:35:20.670

当你意识到错误时，你可能会踢自己。我实现了你的代码并得到了同样的错误。尽管您正在重写一个方法，因此不需要在您的 .h 文件中声明它......我还是决定这样做。仍然，未声明。

正是在这一点上，我意识到您已经在您的 -(BOOL)application:applicationDidFinishLaunchingWithOptions 方法中编写了“viewForZoomingInScrollView”的方法。所以我把它从那里取下来，放在上面，问题就解决了。

tldr：删除 viewForZoomingInScrollView 方法

-（BOOL）应用程序：applicationDidFinishLaunchingWithOptions 方法。

# objective-c - 何时创建接口构建器 IBOutlet 对象

> ID：15353569
> 
> 赞同：1
> 
> 时间：2013-03-12T04:51:43.260
> 
> 标签：objective-c, interface-builder, uilabel

我正在使用 iPad 主/详细项目模板，并尝试在应用程序首次运行时更新一些`UILabels`模板`detailViewController`。

这是我的代码：

```
 (void)setObject:(id)newObject
{
    if (_object != newObject) {
        [_object release];
        _object = [newObject retain];

        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }
}

- (void)configureView
{
    [self updateDetails];
}

- (void) updateDetails
{
    NSLog(@"Details = %@", self.details);
    NSLog (@"detailLabel %@", self.detailLabel);
    self.detailLabel.text = [self.details objectForKey:@"aKey"];
}
- (IBAction)refresh:(UIBarButtonItem *)sender {
    [self updateDetails];
} 
```

`setEvent`从主视图控制器的`viewDidLoad`方法中调用，因为默认选择它的 tableview 的第一行。

```
if (![self.tableView indexPathForSelectedRow])
{
    [self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:0];
    [self.detailViewController setObject:[self.sortedObjects objectAtIndex:0]];
} 
```

当我运行代码时，`detailLabel`没有改变并且`NSLog`说`self.detailLabel`是（null）。如果稍后从按钮单击调用“刷新”，则单击`detailLabel`不为空并正确更新。如何执行此操作以确保`detailLabel`已创建并且不是（空）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:02:23.740

IBOutlet 对象将在该对象的 viewDidLoad() 时创建（详细视图，但不是主视图）。

调用`[self updateDetails];`细节视图控制器的 in viewdidLoad() 方法可以避免这个问题。

# wpf - 将 linq 转换为实体查询到强类型 ObservableCollection 的最佳方法

> ID：15353579
> 
> 赞同：2
> 
> 时间：2013-03-12T04:53:24.073
> 
> 标签：wpf, linq-to-entities, observablecollection

这些天我正在学习Entity Framework 5。我开发了基于MVVM和PRISM的WPF应用程序。为了获得我`ObservableCollection`用来保存数据的属性更改通知。

当我使用 linq 到实体投影时遇到问题，我不确定什么是最好的解决方案。

如您所知，当您通过 linq 对实体执行投影时，您会得到没有人知道方法范围的匿名类型。我搜索了如何使这个查询成为强类型。

我看到了一些关于这个问题的讨论，但我找不到最好的方法。

我看到了 3 种不同的解决方案：

1.  使用查询视图
2.  使用定义查询
3.  [http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c6b8375a-2684-4020-bbcc-24433baf997b](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c6b8375a-2684-4020-bbcc-24433baf997b)

3 号是最简单的，看起来正是我需要的，但我知道反射是“高成本”操作，所以它让我回到这个问题的最佳方法是什么？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:40:42.583

这就是我使用的：

我使用VB：

```
Dim ObjectQuery As IQueryable(Of YourObject) = CType((From c In YourContext.objects Select c), IQueryable(Of YourObject))
Return New ObservableCollection(Of YourObject)(ObjectQuery) 
```

以上基于 C# 中的客户端表的简单版本，没有 CType。我使用了一个 vb 到 C# 转换器，所以它可能需要调整

```
IQueryable<client> ClientQuery = from c in ftcContext.clients select c;
return new ObservableCollection<client>(ClientQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:36:50.517

您不应投影到匿名类型，而应投影到命名类型。

```
var query = from c in Customers 
            join o in Orders on c.CustomerID equals o.CustomerID
            select new OrderDto {
                                    customer_name = c.CompanyName,
                                    order_date = o.OrderDate,
                                    order_Id = o.OrderID
                                }; 
```

其中使用了一个简单的类`OrderDto`。所以这不是你的选择。

旁注：您可能可以使用导航属性：

```
var query = from o in Orders
            select new OrderDto {
                                    customer_name = o.Customer.CompanyName,
                                    order_date = o.OrderDate,
                                    order_Id = o.OrderID
                                }; 
```

EF 会弄清楚如何加入。

# kendo-ui - KendoUI 上传在 IE9 中不起作用

> ID：15353589
> 
> 赞同：1
> 
> 时间：2013-03-12T04:54:21.873
> 
> 标签：kendo-ui

我在我的 asp.net 应用程序中使用 Kendoui 上传控件（异步模式）。我能够使用 Google chrome、Firefox 和 IE10 成功上传文件，但在 IE9 中，上传事件触发并且文件上传成功，但 kendo 上传成功事件没有火灾，它总是会发生错误事件。

剑道上传使ajax调用asp.net apiController，我在其中编写了不返回任何内容的子程序。

我得到了没有显示内容的 204 代码的响应。我试图返回 json 作为响应，但在这种情况下，kendoui 上传的成功事件仍然不会触发。

以下是我的响应标题和正文的屏幕截图的网址。

[http://screencast.com/t/0KQ0KF9mC](http://screencast.com/t/0KQ0KF9mC) [http://screencast.com/t/tCAC1JJ6No59](http://screencast.com/t/tCAC1JJ6No59)

请帮我。

问候

伊姆兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:41:30.123

已经有一段时间了，所以您可能已经解决了这个问题，但是我遇到了同样的问题，解决方案很简单：

将响应标头内容类型设置为`'text/html'`

# c# - excel上传时单元格值被截断

> ID：15353592
> 
> 赞同：0
> 
> 时间：2013-03-12T04:54:35.493
> 
> 标签：c#, .net, excel, excel-2007, excel-interop

我正在使用以下代码进行 excel 上传

```
 OleDbConnection sSourceConnection;
            string properties = "Excel 8.0; HDR=NO; IMEX=1;";//properties set for connection to excel
            string sSourceConstr = @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + filePath + ";Extended Properties=\"" + properties + "\"";
            sSourceConnection = new OleDbConnection(sSourceConstr);//creating the OLEDB connection
            try
            {
                //select statement to select data from the first excel sheet
                string sql = string.Format("Select * FROM [{0}]", "Sheet1$");

                //commands to fill the dataset with excel data
                OleDbDataAdapter excelAdapter = new OleDbDataAdapter();
                OleDbCommand command = new OleDbCommand(sql, sSourceConnection);
                sSourceConnection.Open();
                excelAdapter.SelectCommand = command;
                excelAdapter.Fill(dSet, EXCEL_DATA); 
```

我必须上传大约 300 条记录。一栏有一些文字评论。评论的长度从 10 个字符到 1000 个字符不等。但是所有超过 255 长度的评论都在该列中被截断。

我已经使用这篇文章[Excel cell-values are truncated by OLEDB-provider](https://stackoverflow.com/questions/898513/excel-cell-values-are-truncated-by-oledb-provider)来更改注册表设置，但它不起作用。

我还尝试了[OleDB 和混合 Excel 数据类型后提到的所有内容：缺少数据](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data/5721521#5721521)，仍然没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:10:59.230

我使用的是 ACE 引擎，所以更新注册表的正确位置是

`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Excel\TypeGuessRowsHKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Excel\TypeGuessRows`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-23T19:19:39.820

适用于 Microsoft Office 2010-2013-2016/365

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Excel 
```

更好的是扫描文本“TypeGuessRows”，当你找到它时，结合 Excel，将其值设置为 0。我们在此位置找到了此行为的另一个重要位置

```
\HKEY_LOCAL_MACHINE \SOFTWARE\Microsoft\Office \ClickToRun\REGISTRY \MACHINE\Software \Wow6432Node \Microsoft \Office\16.0\Access Connectivity Engine\Engines\Excel. 
```

# java - 如果使用 jdk7，是否必须在证书中使用 keyusage

> ID：15353595
> 
> 赞同：1
> 
> 时间：2013-03-12T04:54:51.560
> 
> 标签：java, ssl-certificate

我正在使用jdk1.7。我正在使用自签名证书进行 SSL 握手。如果我使用 jdk1.7，是否必须在证书中使用 keyusage。请让我知道我很困惑。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T04:34:01.593

这是[RFC 5280](https://www.rfc-editor.org/rfc/rfc5280#page-29)所说的：

> 符合标准的 CA 必须在证书中包含此扩展，这些证书
> 包含用于验证
> 其他公钥证书或 CRL 上的数字签名的公钥。如果存在，符合标准的 CA
> 应该将此扩展标记为关键。

但是，[RFC 6818](https://www.rfc-editor.org/rfc/rfc6818)是对 RFC 5280 的更新，它说：

> 与 X.509 (11/2008) [X.509] 的第 3.4.61 节一致，我们注意到使用自颁发证书和由 CA 以外的实体颁发的自签名证书超出了本规范的范围。因此，例如，Web 服务器或客户端可能会生成一个自签名证书来标识自己。这些证书以及依赖方如何使用它们来验证断言的身份都超出了 RFC 5280 的范围。

因此，如果您以 CA 的身份行事，您应该包括密钥使用。无论如何，包含它可能是一个好主意，尽管根据上面的段落并不严格要求它。

# javascript - Javascript中是否有正确的间距方式？

> ID：15353596
> 
> 赞同：4
> 
> 时间：2013-03-12T04:55:27.193
> 
> 标签：javascript

在一次初步的技术面试中，我被要求用 Javascript 编写一个*简单的计算器函数*。我的代码是可以通过的，但他评论我**的间距不好**。我写了这样的东西：

```
 var calc = function(num1, num2, operand){       //function(...  VS function (...
      if(operand === 'add'){                     
           return num1 + num2;
      } else if(operand === 'multiply'){         // if(...
           return num1 * num2;                            
      } else if (operand === 'subtract'){        // if (... 
           return num1 - num2;
      } else {
           console.log("Not a valid operand");
      };
 }; 
```

我是 Javascript 的初学者，希望学习和保持良好的编码习惯。我知道上面的函数会运行，不管我的间距不一致，但是有没有正确的间隔 Javascript 控制循环的方法？

任何建议或编码示例都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T04:57:58.170

他可能认为这很糟糕，因为您的写作风格与他不同。

关于代码风格的一个很好的资源是[Google JavaScript Style Guide](https://google.github.io/styleguide/javascriptguide.xml)。

页面末尾的关键点说：

> 始终如一。
> 
> 如果您正在编辑代码，请花几分钟时间查看您周围的代码并确定其样式。如果他们在所有算术运算符周围使用空格，你也应该这样做。如果他们的评论周围有小框哈希标记，请让您的评论周围也有小框哈希标记。
> 
> 制定风格指南的重点是要有一个通用的编码词汇，这样人们就可以专注于你在说什么，而不是你怎么说。我们在这里介绍全局样式规则，以便人们了解词汇，但本地样式也很重要。如果你添加到一个文件中的代码看起来与它周围的现有代码完全不同，那么当他们去阅读它时，它会让读者失去他们的节奏。避免这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T05:02:44.160

这一切都只是见仁见智。您的代码是完全可以接受的——在某些地方略有不一致，但仍然有效。我个人会这样写：

```
var calc = function (num1, num2, operand) {
  if (operand === 'add') {
    return num1 + num2;
  } else if (operand === 'multiply') {
    return num1 * num2;                            
  } else if (operand === 'subtract') {
    return num1 - num2;
  } else {
    console.log("Not a valid operand");
  }
}; 
```

好吧，我实际上可能会使用 switch 语句，但无论如何......

以下是一些您可能会觉得有用的风格指南：

*   [http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)
*   [http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)
*   [http://contribute.jquery.org/style-guide/js/](http://contribute.jquery.org/style-guide/js/)

当然，这些都不是正确的答案，但它们都可以帮助您保持代码的清洁和可维护性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:11:02.363

这对你有用吗？

```
var calc = function(num1, num2, operand){
   return ( new Function( 'return ' + num1 + operand + num2 ) )();
}; 
```

正如其他人已经提到的那样，JavaScript 中没有像 Python 或 F# 这样的空格规则。由于以下原因，他可能会说间距不好

1.  如果使用`if() else()`，则必须从内存中检索每个比较值，如果使用 switch，则该值将被检索一次并完成工作。在这种情况下，当然 Switch 更好。

2.  在这种情况下，也不需要使用 switch。你可以使用我在回答中提到的。

# android - Android：如何获取本机电子邮件客户端包名称

> ID：15353600
> 
> 赞同：6
> 
> 时间：2013-03-12T04:55:36.520
> 
> 标签：android, email

在三星设备 **中 com.sec.android.email** 是默认的内置邮件客户端，但在 HTC 中是**com.htc.android.mail** .. 我的问题是有没有办法在 android 中获取默认邮件客户端包名称设备与不同的公司版本无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T15:02:05.337

这不是一个完整的答案，但这里是如何获取可以发送的活动列表`message/rfc822`：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("message/rfc822");
PackageManager pkgManager = context.getPackageManager();
List<ResolveInfo> activities = pkgManager.queryIntentActivities(intent, 0); 
```

您可以遍历列表。有关感兴趣的领域，请参阅[`ResolveInfo`](https://developer.android.com/reference/android/content/pm/ResolveInfo.html)文档。

# javascript - 如何用一个标签选择多个名称不同的单选按钮？

> ID：15353601
> 
> 赞同：0
> 
> 时间：2013-03-12T04:55:36.537
> 
> 标签：javascript, jquery, button, radio, labels

如何用一个标签选择多个名称不同的单选按钮？

这是我要实现的目标的简单示例...

```
<input id="1A" type="radio" name="first" value="A">firstA<br>
<input id="1B" type="radio" name="first" value="B">firstB<br>
<input id="2A" type="radio" name="second">secondA<br>
<input id="2B" type="radio" name="second">secondB<br>
<input id="3A" type="radio" name="third">thirdA<br>
<input id="3B" type="radio" name="third">thirdB<br>
<label for="1A">
    <label for="2B">
        <label for="3A">
            <div>1A / 2B / 3A</div>
        </label>
    </label>
</label> 
```

所以当我单击“1A / 2B / 3A”时，我希望它选择选择 3 个单选按钮（firstA、secondB、thirdA），有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:14:13.997

假设标签总是正确嵌套，`click`事件会自然传播。您可以手动设置选中的属性，然后：

```
$("label").on('click', function () {
    $("#" + $(this).attr('for')).prop('checked', true);
}); 
```

[http://jsfiddle.net/ExplosionPIlls/rT8x5/2/](http://jsfiddle.net/ExplosionPIlls/rT8x5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:19:10.823

```
<div id="divId">1A / 2B / 3A</div>

$('#divId').click(function () {
    $('#1A').attr('checked', checked);
    $('#2B').attr('checked', checked);
    $('#3A').attr('checked', checked);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:05:16.893

给你的 div 一个 id（唯一）

```
 <div id="divID">1A / 2B / 3A</div> 
```

调用点击函数

```
 $('#divID').click(function(){
      $('#1A').prop('checked',true);
      $('#2B').prop('checked',true);
      $('#3A').prop('checked',true);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:17:03.813

您可以覆盖标签元素的默认行为以将点击事件传播到父元素。

```
function bubbleLabelClick(e){
    $("#" + $(this).attr('for')).prop('checked', true);
    return true;
}
$('label').click( bubbleLabelClick); 
```

测试它：http: [//jsfiddle.net/phxjL/](http://jsfiddle.net/phxjL/)

关键点`return true;`在函数bubbleLabelClick 中。

# ruby - 从 ruby 的匹配中获取字符串

> ID：15353604
> 
> 赞同：1
> 
> 时间：2013-03-12T04:55:52.810
> 
> 标签：ruby, regex

我有这个字符串：

```
"A man, a plan, a canal -- Panama" 
```

一个正则表达式：

```
/[^[^\w*]]/ 
```

所需的结果是：

```
"AmanaplanacanalPanama" 
```

问题：我无法得到该结果的字符串。这是我的代码：

```
def palindromo(s)  #s is a string

  num_expr = /[^[^\w*]]/
  m = s.match(num_expr)
  unless m
    puts "no hubo concordancia"
    exit
  end
  print "El string de la busqueda es: " 
  puts m.string   # string donde se efectúa la búsqueda 
  print "La parte del string que concuerda con la busqueda es: " 

  puts m 
```

代码给了我这个结果：`"A"`，我想得到这个字符串： `"AmanaplanacanalPanama"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:01:52.780

```
"A man, a plan, a canal -- Panama".gsub( /[^\w]/, "" ) == "AmanaplanacanalPanama"
# => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:52:52.860

```
puts "El string de la busqueda es: #{s}"
puts s[/\W/] ? "La parte del string que concuerda con la busqueda es: #{s.gsub( /[^\w]/, "" ) }" : "no hubo concordancia" 
```

# compass-sass - 罗盘编译器错误每隔一次

> ID：15353608
> 
> 赞同：0
> 
> 时间：2013-03-12T04:56:16.677
> 
> 标签：compass-sass, sass

我有一个使用 Compass 编译 scss 文件的 Grunt 任务，并且每隔一次构建就会失败。当我更改使用 Compass mixin 的文件时，例如`@import box-sizing(border-box)`，它失败并说不包含插件（它实际上包含在文件“all.scss”中使用`@import "compass/css3/box-sizing"`，然后它包含其他 scss 文件。

第二次（在你看到错误之后）你尝试编译它，它工作得很好。我猜原因是如果其他文件（特别是我的“all.scss”文件）没有更改，它会在编译过程中跳过它，所以找不到包含。

另外，如果我在 config.rb 中使用`require 'box-sizing'`or `require "compass/css3/box-sizing"`，它也会失败，说它找不到这个插件。

知道是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:20:27.120

`box-sizing`是一个[mixin](http://compass-style.org/reference/compass/css3/box_sizing/#mixin-box-sizing)，所以你想要`@include`它，而不是`@import`：

```
@include box-sizing(border-box); 
```

当您导入它时，编译器会将其视为 Compass 扩展，而`config.rb`. 但它首先不是扩展，它首先是 Compass 的一部分！

因此，更改`@import`为`@include`将解决您的问题。

有关语法，请参见[http://sass-lang.com/#mixins](http://sass-lang.com/#mixins)。

# php - 如何阻止共享主机服务器上的 php 功能？

> ID：15353614
> 
> 赞同：0
> 
> 时间：2013-03-12T04:56:45.973
> 
> 标签：php, security, shared-hosting

最近我发现我的网站被黑了。不知何故，黑客设法将一个文件放在我正在执行 eval() 函数的 Web 服务器上。

我已经收紧了 FTP 安全性，但进一步说我不希望某些 PHP 函数不应该在任何文件中使用，例如 eval()。

知道如何在共享主机上阻止 php 功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:01:11.740

如果您在共享主机上并且无权访问 php.ini，则可以在 .htaccess 文件中包含这一行：

`php_admin_value disable_functions "exec, system"`

将函数名称放在引号 (" ") 中，如果您想要更多，只需使用逗号将它们分开，就像我的示例中一样。

# assembly - 在间接寻址中非法使用寄存器

> ID：15353616
> 
> 赞同：1
> 
> 时间：2013-03-12T04:57:12.887
> 
> 标签：assembly, x86, masm

我正在尝试编写一个在 x86 程序集 (MASM) 中添加两个大数的子程序。这些数字由 si 和 di 寄存器指向，函数应该从右到左迭代，添加每个数据字并传递进位，并将结果保存在 di 中。要添加的数据字数由前面的代码块确定。

```
...
    mov       cx, ( number of data words to add )
adding:
    mov       bx,cx               ;copy the loop counter to bx
    lea       ax,[di+2*bx]        ;move ax to the destination word
    adc       ax,[si+2*bx]        ;add the source word into the destination word
    loop      adding              ;main sub loop
... 
```

不幸的是，当我尝试编译此代码时，我收到错误 A2032：lea 和 adc 行上的寄存器使用无效。我使用的语法有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:04:17.827

最初的[8086 寻址模式](http://www.ic.unicamp.br/~celio/mc404s2-03/addr_modes/intel_addr.html)仅限于此图表中的组合：

```
 (disp)   (base)   (offset)
 mov [1234] + [bx]  +  [si], ax
              [bp]  +  [di] 
```

必须从每组中最多选择一项（位移、基数和偏移量）。没有其他组合是有效的。

[80386 寻址模式](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH04/CH04-3.html)向更正交的方向扩展：

```
 mov  al, byte ptr [12345] + [esp + 8 * eax]; 
```

这里的变址寄存器都是 32 位的，esp 可以用来直接指向栈变量，缩放项的合法值是 1,2,4 和 8。有了这么多的组合，指令`LEA`可以用来执行单个指令*正交*3 参数加法而不更改标志：[reg1] = [reg2] + [reg3]；并执行一些其他算术运算，例如将寄存器乘以 3,5 或 9 的因子。

如果没有 32 位寻址模式，则必须模拟缩放，例如

```
 mov bx, (N-1)*2          // constant expression
 a:  mov ax, [bx + di]
     adc ax, [bx + si]
     sub bx, 2
     jns a 
```

另请参阅[LEA 指令的目的](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction)。

# bitmap - 手臂控制器 lm3s8962

> ID：15353619
> 
> 赞同：1
> 
> 时间：2013-03-12T04:57:28.300
> 
> 标签：bitmap, arm, cortex-m3, texas-instruments

你好，

我是嵌入式编码的新手。我正在研究 ARM lm3s8962 控制器。

谁能向我解释下面的代码在做什么？它正在实现位撞击，但我想知道它是如何实现的。

```
//*****************************************************************************
//
// Macros for hardware access, both direct and via the bit-band region.
//
//*****************************************************************************
#define HWREG(x)                                                              \
        (*((volatile unsigned long *)(x)))
#define HWREGH(x)                                                             \
        (*((volatile unsigned short *)(x)))
#define HWREGB(x)                                                             \
        (*((volatile unsigned char *)(x)))
#define HWREGBITW(x, b)                                                       \
        HWREG(((unsigned long)(x) & 0xF0000000) | 0x02000000 |                \
              (((unsigned long)(x) & 0x000FFFFF) << 5) | ((b) << 2))
#define HWREGBITH(x, b)                                                       \
        HWREGH(((unsigned long)(x) & 0xF0000000) | 0x02000000 |               \
               (((unsigned long)(x) & 0x000FFFFF) << 5) | ((b) << 2))
#define HWREGBITB(x, b)                                                       \
        HWREGB(((unsigned long)(x) & 0xF0000000) | 0x02000000 |               \
               (((unsigned long)(x) & 0x000FFFFF) << 5) | ((b) << 2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:37:55.550

这些是宏的声明。它们不是函数，它们不会“返回”任何东西。它们只是一个稍微智能的搜索和替换。

作为对您的评论的回应，`HWREG(x)`它被替换为`(*((volatile unsigned long *)(x)))`（这是一个指针引用，即在 address 处获取值`x`）并`x`在通过预处理器运行时用其参数替换。

我们可以从中推断出`HWREG`以某种形式采用某种地址。这将帮助我们弄清楚是什么`HWREGBITB`。

`HWREGBITB(x, b)`看重它的`x`价值，

1.  ( `((unsigned long)(x) & 0xF0000000)`)：清除除最高有效 4 位之外的所有位（假设 long 为 32 位宽）
2.  ( `| 0x02000000`)：将接下来的 4 位设置为值 2。
3.  ( `| (((unsigned long)(x) & 0x000FFFFF) << 5)`)：获取原始数据的低 20 位`x`并将其向左移动 5 位。然后，或将其放入结果中。
4.  ( `| ((b) << 2)`): 取`b`，将其移动 2 位，然后将其与结果相或。
5.  将最终结果视为地址并使用取消引用它`HWREG`

您可以使用类似的方法来计算其他宏的含义。

它在硬件方面的具体作用取决于它正在访问的硬件以及外围设备上的寄存器是什么。如果我不得不猜测，我会说它正在 AXI 总线上进行某种事务。

# php - 从正则表达式中得到错误“重复运算符操作数无效” - mysql

> ID：15353622
> 
> 赞同：5
> 
> 时间：2013-03-12T04:57:35.010
> 
> 标签：php, mysql, regex

当我尝试在 sql 中使用以下正则表达式时，出现错误。

```
 [0-9]{10,}|(?:[\+\(]|1\-)\s*[0-9]+([ \.\(\)\-/x]+[0-9]{2,})+[0-9] 
```

请让我知道我在这方面所做的错误。

我得到的错误是，

> 1139 从正则表达式中得到错误“重复运算符操作数无效”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:55:11.683

请参阅错误[http://bugs.mysql.com/bug.php?id=399](http://bugs.mysql.com/bug.php?id=399)

\+ 被视为重复运算符所以这也失败了：

```
mysql> select 'fred' regexp('?[\+]'); 
ERROR 1139 (42000): Got error 'repetition-operator operand invalid' from regexp 
```

# java - 将 apache poi 3.9 与 JDK 4 一起使用的解决方法

> ID：15353623
> 
> 赞同：0
> 
> 时间：2013-03-12T04:57:41.513
> 
> 标签：java, apache-poi

这是一个后续[问题](https://stackoverflow.com/questions/15352638/java-program-using-apache-poi-3-9-encountered-error-in-xml-build-file)。[我刚刚在Apache POI 网站上](http://poi.apache.org/)找到了这个标题。

> POI 3.5 及更高版本需要 JDK 1.5 或更高版本。3.5 之前的版本需要 JDK 1.4+

显然，这就是我无法构建 Java 程序的原因。我想知道是否有任何解决方法可以使用我当前的设置在 Ant 中成功构建我的项目。

### 设置

*   阿帕奇 POI - 3.9
*   JDK - 1.4.2 (4.0)

欢迎任何建议、提示或技巧。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:53:07.257

Java 1.4 现在已经很老了——它是在 2002 年发布的，所以在 10 多年前。常规支持于 2008 年结束，所以我不敢想您需要向 Oracle 支付多少费用才能获得延长支持……如果可能的话，将部分现金转用于升级项目！

在 Java 1.4 上运行的最后一个[Apache POI](http://poi.apache.org/)版本是 POI 3.2，于 2008 年 10 月发布。它的源代码和二进制包可从[Apache dist 存档](http://archive.apache.org/dist/poi/release/bin/)中获得。今天使用 POI 3.2 有两个主要障碍，第一个是它只支持二进制文件格式。它不支持 .xlsx、.pptx、.docx 等 OOXML 格式。对这些（通过 XSLF、XSSF 和 XWPF）的支持仅在 POI 3.5 中引入，并且至少需要升级到 Java 5。第二个问题是您将错过[5 年的错误修复和新功能](http://poi.apache.org/changes.html)，其中有很多！

自从有人询问旧 JDK 上的新版本 Apache POI 以来已经有几年了（其他人都设法升级到具有正常支持的东西！）。当人们问起时，一个常见的答案是尝试[Retroweaver](http://retroweaver.sourceforge.net/)，它应该可以让您在 JDK 1.4 上加载和运行 JDK 5 代码。我自己没有尝试过，但是给出这个答案的人似乎很高兴，所以我认为它会成功......

（将 POI 3.9 转换为在 JDK 1.4 上运行对您来说将是很多工作。从 3.2 天开始，大部分新代码都使用了泛型，我认为很多旧代码通过转向泛型得到了很大的整理和简化，我想有一些奇怪的可变参数，关于日期格式化程序的东西敲响了警钟，还有所有 XML 的东西。可以完成，但不会很快）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:08:58.077

我想这是非常困难的。举个例子=> 假设`POI 3.9`使用`Generics`或`varargs`的特性`jdk 1.5`，那么你怎么能用`jdk 1.4`. 我建议您将您的 POI 版本降级或升级您的`jdk`版本更高。

编辑：添加 Maven 依赖项添加对 POI 3.2 的支持，如下面的代码

```
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi</artifactId>
    <version>3.2-FINAL</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T11:49:26.647

我使用[Poi 3.8 迁移到 jdk 1.4](http://en.sourceforge.jp/projects/poi-jdk14/releases/)。有用 ：-）

# linux - taskstats 统计数据未加起来

> ID：15353624
> 
> 赞同：2
> 
> 时间：2013-03-12T04:57:47.453
> 
> 标签：linux, linux-kernel, process-accounting

我试图弄清楚 taskstats 结构中的统计数据是如何相加的。我写了一个简单的 C 程序，它运行了一段时间做 IO 并退出。我使用从 taskstats netlink 多播组获得的 taskstats 结构来监视该程序的统计信息。当我对`cpu_delay_total`、`blkio_delay_total`、`swapin_delay_total`、和的值求和时`freepages_delay_total`，我得到一个比经过时间 ( )的值大约 0.5 秒的值`ac_utime``ac_stime``ac_etime`

以下是 3.5 秒运行的统计数据：

`ac_etime: 3536036` `ac_utime: 172000` `ac_stime: 3032000` `cpu_delay_total: 792528445` `blkio_delay_total: 46320128` `swapin_delay_total: 0` `freepages_delay_total: 0`

将延迟、utime 和 stime 的值相加`4042848.573`（将延迟除以 1000 以转换为微秒），而`etime`只有`3536036`!

有趣的是，挂钟时间给出的值实际上等于 utime+stime: `cpu_run_real_total: 3204000129`，而`ac_utime + ac_stime: 3204000`

`cpu_run_real_total`尽管 taskstats.h 中的注释明确指出这是挂钟时间，但该字段是否给出了 cpu 时间？这些字段的总和大于经过时间的原因可能是什么？

我的内核版本是 3.2.0-38。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:24:46.977

(1) cpu_run_real_total = ac_utime + ac_stime，我查看./kernel/delayacct.c中的代码，函数__delayacct_add_tsk()：

```
tmp = (s64)d->cpu_run_real_total;
cputime_to_timespec(tsk->utime + tsk->stime, &ts);
tmp += timespec_to_ns(&ts);
d->cpu_run_real_total = (tmp < (s64)d->cpu_run_real_total) ? 0 : tmp; 
```

从上面的代码中，我们知道 cpu_run_real_total 是 utime 和 stime 的总和。

(2) 为什么cpu_delay_total、blkio_delay_total、swapin_delay_total、freepages_delay_total、ac_utime和ac_stime的值相加，比ac_etime的值大？

我还没弄清楚为什么。但我猜想：时间可能与各种 *_delay_total 计数器有些重叠。

# mysql - 优化 Given mySql 查询

> ID：15353629
> 
> 赞同：1
> 
> 时间：2013-03-12T04:57:59.970
> 
> 标签：mysql

我一直在经历我的缓慢查询，并尽我所能来优化每个查询。我遇到了这个，我一直坚持下去。

```
EXPLAIN SELECT pID FROM ds_products WHERE pLevel >0

id  select_type   table        type  possible_keys  key     key_len   ref   rows    Extra
1   SIMPLE        ds_products  ALL   pLevel         NULL    NULL      NULL  45939   Using where 
```

我已编制索引`pLevel [tinyint(1)]`，但查询未使用它并进行全表扫描。

以下是该表中每个 pLevel 值的行数：

```
pLevel   count
0        34040
1        3078
2        7143
3        865
4        478
5        279
6        56 
```

如果我对 pLevel 的特定值进行查询，它确实使用索引：

```
EXPLAIN SELECT pID FROM ds_products WHERE pLevel =6

id  select_type  table        type   possible_keys    key              key_len  ref     rows    Extra
1   SIMPLE       ds_products  ref    pLevel  pLevel  1      const   1265 
```

我已经尝试过 pLevel>=1 和 pLevel<=6... 但它仍然会进行全面扫描

我已经尝试过（pLevel=1 或 pLevel=2 或 pLevel=3 或 pLevel=4 或 pLevel=5 或 pLevel=6）......但它仍然会进行全表扫描。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:13:08.817

尝试使用 MySQL [GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

```
SELECT pLevel, COUNT(*)
FROM ds_products
GROUP BY pLevel 
```

**编辑：**

这篇 MySQL 文档文章可能对您有用。[如何避免表扫描](http://dev.mysql.com/doc/refman/5.0/en/how-to-avoid-table-scan.html)

# mysql - Mysql 在 date_time 字段中按天分组

> ID：15353630
> 
> 赞同：2
> 
> 时间：2013-03-12T04:58:01.730
> 
> 标签：mysql, sql, select, group-by

是否有可能有一个查询从包含完整 date_time 值的 date_time 字段的表中选择按天或月分组的行？

![在此处输入图像描述](../Images/48995d9a1139afd3d0ef6a274d5a34c0.png)

我需要得到每天的 sr13, r4, huawei 的总和。任何关于我如何做到这一点的想法都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:21:26.477

您可以使用`DATE()`从值中提取日期，

```
SELECT  DATE(date_time) datetime,
        SUM(sr13) total_sr13,
        SUM(r4) total_4
FROM    TableName
GROUP   BY DATE(date_time) 
```

# c# - 简单的计算属性和 DTO

> ID：15353631
> 
> 赞同：1
> 
> 时间：2013-03-12T04:58:07.173
> 
> 标签：c#, winforms, wcf

我有一个 WCF 服务，它公开了它与 DTO 的接口。我有一个实体类`MyClass`，它有两个属性`SimpleProperty1`和`SimpleProperty2`. 在这个类中有一个计算属性，`CalculatedProperty1`它使用上述两个属性来计算它的值。我有一个`MyClassDTO`只有两个简单属性的 dto 类。在 UI 中，`MyClassDTO`正在修改对象，我希望用户看到`CalculatedProperty`在飞行中。但是，据我了解，DTO 不应嵌入任何逻辑。而且在这样一个简单的场景下，在web服务中实现一个函数来获取属性的计算值似乎有点浪费。我该怎么做呢？这样做的标准方法是什么？我看到从 WCF 服务生成的类被定义为部分类。是否可以处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:09:02.407

您可以使用扩展方法来显示计算的属性

```
 public class MyClassDTO
{
    public string P1 { get; set; }

    public string P2 { get; set; }
}

public static class MyClassDtoExtension
{
    public static string ToCalculatedProperty(this MyClassDTO obj)
    {
        return obj.P1 + obj.P2;
    }
} 
```

// 用法

```
 var d = new MyClassDTO(){P1 = "1",P2 = "2"};

        d.ToCalculatedProperty(); 
```

# c - C - strtok(...) 上的意外分段错误

> ID：15353636
> 
> 赞同：3
> 
> 时间：2013-03-12T04:58:36.360
> 
> 标签：c, string, segmentation-fault, token, strtok

我正在使用库的 strtok(...) ，它似乎工作正常，直到结束条件，它导致分段错误和程序崩溃。API 声称 strtok(...) 将在找不到更多令牌时输出 NULL，这意味着，我认为，您必须捕获此 NULL 才能终止使用 strtok( ...）。我需要做什么来捕获这个 NULL 以防止我的程序崩溃？我想象 NULL 被允许用作终止条件。

我为您准备了一个 SSCCE 来观察这种行为。我需要 strtok(...) 来为我正在编写的更大的软件工作，并且我得到了完全相同的分段行为。命令行的输出显示在此代码小插图下方（是的，我知道您使用 <...> 来包含库，但我很难让这篇文章显示代码库）。我在 Windows 8 操作系统上使用 gcc 版本 4.5.3，下面显示了我想象的两种不同风格的尝试在循环中捕获 NULL 的方式。

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>

main(){
  char* from = "12.34.56.78";
  char * ch = ".";
  char * token = strtok(from, ch);
  printf("%s\n",token);
  while(token != NULL){
    token = strtok(NULL, ch);
    printf("%s\n", token);
  }
  printf("Broke out of loop!");
  while(strcmp(token, 0) != 0){
    printf("%s\n",token);
    token = strtok(NULL, ch);
  }
} 
```

```
＃＃＃＃＃＃＃＃＃＃＃＃ 输出： ＃＃＃＃＃＃＃＃＃＃＃＃

$ ./测试
12
34
56
78
分段错误（核心转储）

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:00:52.650

`strtok`修改它的第一个参数。您正在从只读内存中传递一个字符串，并且在`strtok`尝试更改它时会发生段错误。尝试更改：

```
char* from = "12.34.56.78"; 
```

到

```
char from[] = "12.34.56.78"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T05:01:22.170

您首先检查是否`token`不等于 NULL（当它是时，它会跳出`while`循环）。然后你在比较`token`，哪个是`NULL`常数 NUMBER？这里：`strcmp(token, 0)`当`strcmp`需要 2 个字符串时，您提供一个数字。`strcmp`将尝试在第 0 个地址（或 NULL）处获取一个字符串，从而给您一个分段错误。

```
while(strcmp(token, 0) != 0){
    token = strtok(NULL, ch);
    printf("%s\n",token);
  } 
```

此外，这段代码应该类似于以下内容：

改变

```
 char * token = strtok(from, ch);
  printf("%s\n",token);
  while(token != NULL){
    token = strtok(NULL, ch);
    printf("%s\n", token);
  } 
```

到

```
 char * token = strtok(from, ch);
  printf("%s\n",token);
  while(token != NULL){
    printf("%s\n", token);
    token = strtok(NULL, ch);
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T05:02:18.690

这是个问题：

```
 while(token != NULL){
    token = strtok(NULL, ch);
    printf("%s\n", token);
  } 
```

您正在检查 NULL，但随后`strtok`再次调用而不是在那之后而是在打印之前检查。

代码还有其他问题，但我怀疑这就是它现在崩溃的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T05:01:34.410

问题是即使您在`strtok()`返回时终止循环`NULL`，您也会尝试打印第`NULL`一个：

```
 while(token != NULL){
    token = strtok(NULL, ch);
    printf("%s\n", token);    // not good when token is NULL
  } 
```

事实证明，除了这个例子中的段错误之外，还有几个机会，正如其他答案所指出的那样。

这是处理示例标记化的一种方法：

```
char from[] = "12.34.56.78";
char * ch = ".";
char * token = strtok(from, ch);
while (token != NULL){
    printf("%s\n", token);
    token = strtok(NULL, ch);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T06:27:00.377

如果代码的目的只是打印由 '.' 分隔的元素，则仅在 char 声明中更改并且在打印令牌之前检查其值是否为 NULL ！

```
 main(){
        char from[] = "12.34.56.78.100.101";
        char * ch = ".";
        char * token = strtok(from, ch);
        //printf("%s\n",token);
        while(token != NULL){
            printf("%s\n", token);
            token = strtok(NULL, ch);
        }
   } 
```

输出

```
 ./test1
 12
 12
 34
 56
 78
 100
 101 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T05:23:50.763

您有内存访问错误和逻辑错误。我只会解决导致程序崩溃的内存访问错误。

`strtok`修改它的第一个参数。由于您传递的是字符串文字，因此无法修改字符串（字符串文字不可修改。）

`from`这是定义为可修改字符串数组的可能修复方法：

```
char from[] = "12.34.56.78"; 
```

因为`strtok`修改了传递给它的字符串，所以您不能在第二个 while 循环中再次处理该字符串。您实际上是将 NULL 传递给`strcmp`那里的函数。一个可能的解决方法是在`from`每次您希望使用时将数组复制到另一个缓冲区中`strtok`。

# jquery - 收音机点击不显示

> ID：15353640
> 
> 赞同：1
> 
> 时间：2013-03-12T04:58:58.963
> 
> 标签：jquery

如何检查是否单击了单选按钮？

```
$(document).ready(function() {
$("#rad").click(function() {
        var radio = $("#rad input:checked");
        if(radio == 0)
        {
            alert($(this).data('id'));
        }
    });
}); 
```

[html]

```
<input type="radio" data-id='1' name="default" class="rad" value="1">
<input type="radio" data-id='2' name="default" class="rad" value="1">
<input type="radio" data-id='3' name="default" class="rad" value="1">
<input type="radio" data-id='4' name="default" class="rad" value="1">
<input type="radio" data-id='5' name="default" class="rad" value="1"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T04:59:55.877

在代码`rad`中不是类`id`，所以使用[类选择器](http://api.jquery.com/class-selector/)而不是[id 选择器](http://api.jquery.com/id-selector/)来绑定事件。

**[现场演示](http://jsfiddle.net/qMxGU/)**

*改变*

```
$("#rad") 
```

*至*

```
$(".rad") 
```

当您单击一个`radio`按钮时，它会被选中，因此您无需再次验证它，并且`$(this)`代表您可以直接使用它的事件源，您的代码将是

```
$(".rad").click(function () {
    alert($(this).data('id'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:10:02.807

您可以按名称获取单选按钮，然后检查单击了哪个单选按钮。像这样，

```
 $(function() {
    $('input[name="default"]').click(function() {
     var getID = $(this).attr('data-id');
      alert(getID);
     });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:34:48.457

## **[在这里查看演示](http://jsfiddle.net/gUEaM/)**

**jQuery**

```
$(document).on('click', '.rad', function () {
    alert($(this).attr('data-id'));
}); 
```

确保你有**[1.7+ Jquery](http://jqapi.ru/)**

![在此处输入图像描述](../Images/66c250e52e9e5ee87c7808e3eb600ac3.png)

**替代品 - 1**

```
$(document).ready(function () {
    $('.rad').bind('click', function () {
        alert($(this).attr('data-id'));
    });
}); 
```

**替代品 - 2**

```
$(document).ready(function () {
    $('.rad').click(function () {
        alert($(this).attr('data-id'));
    });    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:12:34.597

您应该首先通过类选择器而不是 id 选择器选择元素，然后根据需要检查已检查的状态，但由于您单击它，它总是会被检查。

之后使用`.attr()`方法获取`data-id`属性数据

```
$(document).ready(function(){
      $(".rad").click(function() {
        if($(".rad").is(":checked")) { // not necessarily needed
            alert($(this).attr('data-id')); // use data-id inside .attr()
        }
    });
}); 
```

# java - 将 IP 地址范围转换为两个 BIGINT 以便更快地查找

> ID：15353641
> 
> 赞同：6
> 
> 时间：2013-03-12T04:59:00.513
> 
> 标签：java, mysql, database, performance, geolocation

我正在做一个我们需要做的项目`IP Address lookups`。因此，为此我们得到了如下所示的数据集，现在下一步是将这些数据集（可能是 csv 文件）填充到`MySql table`. 下面是包含列的数据集示例 -

```
ip_address      country region  city           metro-code   latitude    longitude   postal-code   country-code   region-code    city-code   continent-code  country-code

24.32.116.116   usa       tx    clarksville    623           33.6103    -95.0498    75426            840           44             34918            6            us
65.29.108.232   usa       mi    novi           505           42.4637    -83.4604    48375            840           23             4339             6            us
66.169.99.69    usa       tx    ft worth       623           32.7016    -97.3823    76109            840           44             771              6            us
72.70.100.111   usa       ma    peabody        506           42.5332    -70.9726    1960             840           22             1392             6            us
174.252.116.137 usa       va    oakton         511           38.8892    -77.3222    22124            840           47             3860             6            us
68.55.144.242   usa       md    pasadena       512           39.1276    -76.5125    21122            840           21             4358             6            us
174.252.83.27   usa       pa    lancaster      566           40.0459    -76.3542    17603            840           39             333              6            us
174.78.192.31   usa       ga    warner robins  503           32.5958    -83.6384    31088            840           11             5052             6            us
98.192.146.235  usa       fl    panama city    656           30.1804    -85.5598    32404            840           10             671              6            us
71.192.181.20   usa       ma    springfield    543           42.1187    -72.5483    1109             840           22             967              6            us
76.183.54.227   usa       tx    dallas         623           32.7202    -96.6769    75217            840           44             77               6            us
69.62.143.140   usa       ca    granite bay    862           38.7442    -121.191    95746            840           5              49451            6            us
69.142.76.32    usa       nj    penns grove    504           39.707     -75.4467    8069             840           31             2335             6            us
70.173.54.93    usa       nv    las vegas      839           36.2059    -115.225    89108            840           29             173              6            us
98.242.8.222    usa       ca    fresno         866           36.7968    -119.883    93722            840           5              19               6            us 
```

**问题陈述：-**

我打算将`START_IP_NUM`and存储`END_IP_NUM`在`BIGINT`MySql 数据库中，而不是存储`IP Address`在表中，因为对 BIGINT 进行查找比搜索字符串（点 ip 表示法）要快得多。就像我们为 Maxmind 设置数据库一样。

所以我的问题是我们将`Java Program`在 MySql 表中填充上述数据集。所以我需要设备某种逻辑，可以将上述数据集转换为如下所示 -

```
start_ip_num
end_ip_num
country 
region  
city           
metro-code  
latitude    
longitude   
postal-code   
country-code     
region-code 
city-code   
continent-code  
country-code 
```

给定一个 IP 地址，我很困惑，我应该如何在此处进行设备`start_ip_num`并将`end_ip_num`其存储到`MySql table`. 因为我假设会有一个文件包含上面的数据集，然后我需要读取该文件和设备某种逻辑以将 IP 地址转换为两个 BIGINT 并将其存储到 MySql 表中。

并将其存储到 MySql 数据库中。我可以在 MySql 中查找类似的内容-

```
SELECT country
FROM geoip
WHERE
INET_ATON('174.36.207.186') BETWEEN start_ip_num AND end_ip_num
LIMIT 1 
```

**更新：-**

假设我在上面提到的格式的文本文件中有几个`Thousands IP Address`类似的东西。`100,000 IP Addresses`

现在我的主要目标是做`IP Address lookup`. 与此相对应，`IP Address`我得到了所有其他必填字段。

因此，为了使这件事起作用，我最初计划将文本文件数据转储为`MySql table`. 所以 MySql 表将包含`IP Address`列和其他列，就像我在上面的例子中一样。但是对 String 进行查找是昂贵的。

所以我想我应该将这些 IP 地址`start_ip_num`和`end_ip_num`范围转换，然后转储数据，`MySql table`所以现在它看起来像这样 -

```
start_ip_num
end_ip_num
country 
region  
city           
metro-code  
latitude    
longitude   
postal-code   
country-code     
region-code 
city-code   
continent-code  
country-code 
```

现在，如果我需要进行查找，我可以将它`SQL query`嵌入到我的`WebService eventually`-

```
SELECT country
FROM geoip
WHERE
INET_ATON('174.36.207.186') BETWEEN start_ip_num AND end_ip_num
LIMIT 1 
```

**所以问题是 -**给定一个`Text file`将有列表`IP Addresses`和其他字段对应的字段，我应该如何按摩它，以便我可以以我上面提到的格式将相同的数据集存储在 MySql 中，`IP Address`例如`start_ip_num`and和其他字段。`end_ip_num``country`

基本上，我正在尝试遵循 Maxmind 目前的数据库模式。他们也有`start_ip_num`and`end_ip_num`等领域。当您需要进行查找时，您可以根据我上面提到的 SQL 将 IP 地址转换为`BIGINT`using来进行查找`INET_ATON`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:31:04.607

IPv4 地址包含 4 个数字，每个数字的范围为 0...255

您可以使用此逻辑将地址 ABCD 转换为 32 位整数（或 bigint，如果您愿意）

```
Result = (A<<24) | (B<<16) | (C<<8) | D 
```

其中 A,B,C,D 是整数。这是我们使用的方法，我认为这甚至最初是针对 MaxMind 进行的测试。（抱歉，如果不完全是 java 示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:37:39.880

您在 IP 地址中有原始数据，您希望它以范围格式表示。这是它应该如何工作的流程图。

1）将所有IP地址转换为IP号 2）IP号升序排序 3）扫描记录并压缩同城记录

例如，IP 1 和 IP 2 在 X 市。您可以将其表示为 1,2,X。

这里的假设是您拥有几乎所有的 IP 地址。如果 2 个号码之间有缺失的差距，则需要假设它来自同一个城市 X。例如，IP 1 和 IP 3 在 X 城市，您也假设 IP 2 在 X。1,3,X。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:31:26.760

您似乎在 IpAddress 与其在世界上的物理位置之间建立了某种硬关系。例如，如果两个密切相关的 IpAdresse 来自纽约，那么任何具有这两个 IpAdresse 之间值的 IpAdresse 也应该来自纽约；正确的？

错误的！

IP 地址在全球的分布是完全任意的，而 IP 地址通常以块的形式分布到国家、地区、大公司等；之后发生的事情或多或少是任意的。例如，微软和谷歌等大公司拥有自己的 IP 地址块；然而，他们用它做什么是完全任意的，微软选择用一个 IP 地址做什么可能与下一个或以前的地址完全不同。甚至有可能一个 IP 地址会在一天指向一个国家，而在第二天指向另一个国家，因为网络拓扑发生了变化。

在 IP 地址与其物理位置之间建立关系需要一个非常广泛的数据库，即使在这种情况下，也很容易出现错误和日常变化。甚至谷歌使用的数据库也可能充满了错误；尽管有大量数据。

# ruby-on-rails - 如何填充下拉列表？

> ID：15353643
> 
> 赞同：0
> 
> 时间：2013-03-12T04:59:11.120
> 
> 标签：ruby-on-rails, ruby

我想使用 rails 3 将从数据库中获取的值填充到下拉列表中：

`@details`包含数据库中的所有值。打印`@details.inspect`时，它在网页中显示为：

```
[<DeviceDetail DeviceID: 14448, No: 616">, <DeviceDetail DeviceID: 14448, No: 617">, <DeviceDetail DeviceID: 14448, No: 618">]........ 
```

在循环中，我获取`No`详细信息。如何`No`在下拉列表中显示？

```
 <% @details.each do |d| %>    
    <%=d.No%>
    <% end %> 
```

我添加了以下内容以`No`在下拉列表中显示，但它返回错误`undefined method name for DeviceDetail:0x390f3f0`。我的数据库不包含名称字段，那么我应该在`:name`字段中输入什么？数据库表包含`no`、`deviceid`和。 `speed``time`

```
 <% @details.each do |d| %>    
      <%=collection_select(:device_detail, d.No, @details, :id, :name) %>
        <% end %> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:06:38.807

这是表格的一部分吗？使用`select_tag`, 并选择相同的输入选项。查看[http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:11:16.343

如果我正确理解您的问题，您将需要`@details`在`Device`控制器中声明实例变量。它应该看起来像这样：

控制器/设备.rb：

```
def show
  @details = Detail.all
end 
```

然后，在您的索引和显示页面中，您可以像这样访问该实例变量：

视图/设备/show.rb：

```
<% @details.each do |detail| %>
  <%= render detail %>
<% end %> 
```

它应该遍历您的每个细节并呈现每个细节。如果您只想显示细节的“否”，它应该如下所示：

```
<% @details.each do |detail| %>
  <%= detail.no %>
<% end %> 
```

或者，如果您在显示页面上，您可以像这样简单地调用该页面的详细信息：

```
<%= detail.no %> 
```

这是你问的吗？

# android - 解析数据 org.json.JSONException 时出错：在字符 10 处输入结束

> ID：15353644
> 
> 赞同：3
> 
> 时间：2013-03-12T04:59:13.467
> 
> 标签：android, parsing, jsonexception

我目前遇到此错误“**解析数据时出错 org.json.JSONException: End of input at character 10 of** ”。我用 Chrome 的 Plugin Postman 测试了我的 PHP，服务器端似乎没问题。请查看下面的代码，感谢您的帮助。

**PHP代码：**

```
public function login($alias, $password){
$user_info = $this->getUserFromDatabase($alias, $password);
if ($user_info != false){
$response["success"] = "true";
$response["user_id"] = $user_info["userID"];
$response["userFirstName"] = $user_info["userFirstName"];
$response["userRank"] = $user_info["userRank"];
echo json_encode($response);
}else{
$response["success"] = "false";
$response["error"] = "true";
echo json_encode($response);
}
}

public function getUserFromDatabase($android_alias, $android_password) {
$db_query = mysql_query("SELECT userID, userFirstName, userRank FROM capUserTable 
WHERE userAlias = '$android_alias' AND userPassword = '$android_password'") 
or die(mysql_error());

$query_results = mysql_fetch_assoc($db_query);
return $query_results;
} 
```

**邮递员结果：**

```
{
"success": "true",
"user_id": "1",
"userFirstName": "username",
"userRank": "99"
} 
```

**JAVA代码：**

```
private InputStream inputStream = null;
private JSONObject jObject = null;
private String json = "";

public JSONparser() {
}

public JSONObject getJSONFromURL(String URL, List<NameValuePair> params){
try{
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(URL);
httpPost.setEntity(new UrlEncodedFormEntity(params)); 
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
inputStream = httpEntity.getContent();
}catch(UnsupportedEncodingException e){
e.printStackTrace();
Log.e("UnsupportedEncodingException", "Unsupported Encoding Exception" + e.toString());
}catch(ClientProtocolException e){
e.printStackTrace();
}catch(IOException e){
e.printStackTrace();
}catch(Exception e){
e.printStackTrace();
}

try{
BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 10);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null){
sb.append(line + "\n");
}
inputStream.close();
json = sb.toString();
}catch(Exception e){
Log.e("Buffer Error", "Error converting result " + e.toString());
}

try{
jObject = new JSONObject(json); //this is where the problem occurs
}catch(JSONException e){
Log.e("JSON Parser", "Error parsing data " + e.toString()); 
}
return jObject;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:43:12.617

嗨，我已检查您的回复得到一个问题

```
String response = "{success\":\"true\",\"user_id\": \"1\",\"userFirstName\":\"username\", \"userRank\": \"99\"}"; 
```

它在 json 验证中显示有效，但在成功键中不是“在启动中，因此它创建 json 对象，如

```
{"userFirstName":"username","user_id":"1","success\"":"true","userRank":"99"} 
```

所以它无法从成功中获得价值

写下类似的东西

```
String response = "{\"success\":\"true\",\"user_id\": \"1\",\"userFirstName\":\"username\", \"userRank\": \"99\"}"; 
```

它应该像这样解析

```
 try {
            JSONObject  jobj  = new JSONObject(response);
            String succes = jobj.getString("success");
            String userFirstName = jobj.getString("userFirstName");
            String user_id = jobj.getString("user_id");
            String userRank = jobj.getString("userRank");
            String user_id = jobj.getString("user_id"); 

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T07:41:59.707

实际上我之前也面临同样的问题....我通过更改我的杰森课程来清除错误...

```
 // function get json from url
  // by making HTTP POST or GET mehtod
  public JSONObject makeHttpRequest(String url, String method,
                  List<NameValuePair> params) {

          // Making HTTP request
          try {

                  // check for request method
                  if(method == "POST"){
                          // request method is POST
                          // defaultHttpClient
                          DefaultHttpClient httpClient = new DefaultHttpClient();
                          HttpPost httpPost = new HttpPost(url);
                          httpPost.setEntity(new UrlEncodedFormEntity(params));

                          HttpResponse httpResponse = httpClient.execute(httpPost);
                          HttpEntity httpEntity = httpResponse.getEntity();
                          is = httpEntity.getContent();

                  }else if(method == "GET"){

                          // request method is GET
                          DefaultHttpClient httpClient = new DefaultHttpClient();
                          String paramString = URLEncodedUtils.format(params, "utf-8");
                          url += "?" + paramString;
                          HttpGet httpGet = new HttpGet(url);

                          HttpResponse httpResponse = httpClient.execute(httpGet);
                          HttpEntity httpEntity = httpResponse.getEntity();

                          is = httpEntity.getContent();
                  }                      

          } catch (UnsupportedEncodingException e) {
                  e.printStackTrace();
          } catch (ClientProtocolException e) {
                  e.printStackTrace();
          } catch (IOException e) {
                  e.printStackTrace();
          }

          try {
                  BufferedReader reader = new BufferedReader(new InputStreamReader(
                                  is, "iso-8859-1"), 8);
                  StringBuilder sb = new StringBuilder();
                  String line = null;

                  while ((line = reader.readLine()) != null) {
                          sb.append(line + "\n");
                  }
                  is.close();
                  json = sb.toString();
          } catch (Exception e) {
                  Log.e("Buffer Error", "Error converting result " + e.toString());
          }

          // try parse the string to a JSON object
          try {
               Log.d("response string",json);
                  jObj = new JSONObject(json);
          } catch (JSONException e) {
                  Log.e("JSON Parser", "Error parsing data " + e.toString());
          }

          // return JSON String
          return jObj;

  } 
```

我希望它会帮助你

# c++ - Access Violation Mystery with gethostbyname?

> ID：15353651
> 
> 赞同：1
> 
> 时间：2013-03-12T04:59:59.130
> 
> 标签：c++

```
std::cout << WebClient().Load(in.substr(2, in.length())); 
```

I made a WebClient for fun, and you can pass in a string through cin to in via std::getline(cin, in);

The starting part of my Load method:

```
std::string Load(std::string url)
{
    WSADATA wsaData;
    if (WSAStartup(MAKEWORD(2,2), &wsaData) != 0) {
        return "WSAStartup failed.\n";
    }
    SOCKET Socket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
    struct hostent *host;
    host = gethostbyname(url.c_str());
    SOCKADDR_IN SockAddr;
    SockAddr.sin_port=htons(80);
    SockAddr.sin_family=AF_INET;
    if(host != nullptr)
    {
        SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);
    } 
```

I would get an Access Violation because host becomes a nullptr (hence checking it), yet with the same string but passed in differently: WebClient().Load("www.google.ca") it works. and I tried putting c_str() at the end of the substr'ed string with no avail.

I am still learning the quirks, what's up with this? I am using standard libraries from

```
#include <http.h>
#include <string>
#include <winsock2.h>
#include <windows.h>
#include <iostream>
#pragma comment(lib,"ws2_32.lib") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:07:34.397

Try checking what the value of the passed in string is received as from `getline`. It could be malformed when `gethostbyname` receives it. You can check if this is where it's failing (and becoming NULL) by using [`WSAGetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741580%28v=vs.85%29.aspx). Check MSDN for `gethostbyname`'s possible [error codes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx).

**EDIT**: You say you have seemingly identical parameters. Can you find a way to prove this (to yourself). Maybe there are invisible characters that got in there? A new line `\n`, or perhaps it uses a different encoding? Just some ideas.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:05:24.673

Writing my comments as an answer: You should print the URL in a way which lets you see if there are extra chars, even whitespace. Then you should check error codes of all functions you use, like here read [the documentation of `gethostbyname`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx) through. A debug version of your function below, and with that you need the [error codes explained here](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx):

```
#include <cstring>

std::string Load(std::string url)
{
    WSADATA wsaData;
    if (WSAStartup(MAKEWORD(2,2), &wsaData) != 0) {
        return "WSAStartup failed.\n";
    }
    SOCKET Socket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
    struct hostent *host;
    std::cout << "Getting hostname for url as seen by gethostbyname: '" << url.c_str() << "', strlen=" << strlen(url.c_str()) << std::endl;
    host = gethostbyname(url.c_str());
    if (host) {
        std::cout << "got valid hostent as response" << std::endl;
    } else {
        std::cout << "gethostbyname WSAGetLastError=" << WSAGetLastError() << std::endl;
        return "Invalid url.\n";
    }
    SOCKADDR_IN SockAddr;
    SockAddr.sin_port=htons(80);
    SockAddr.sin_family=AF_INET;
    if(host != nullptr)
    {
        SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);
    } 
```

A guess of a reason: your url from `cin` has whitespace in it.

A note on terminology: that address string, it is not really url, url must have scheme like `http://` at the start. What you have there is a *fully qualified domain name* of the host, as it should be too, `gethostbyname` does not understand urls.

# api - API 是否应该公开诸如“批准”或“拒绝”之类的操作？

> ID：15353652
> 
> 赞同：0
> 
> 时间：2013-03-12T05:00:03.117
> 
> 标签：api, web-applications, asp.net-web-api

我正在构建我的第一个 API，我想知道是否 - 因为这些操作是应用程序的核心并且将被任何客户端利用 - 我应该以一种在典型 CRUD 场景之外公开操作的方式构建我的 api。我为报告准备了一些东西，但我也需要允许用户批准或拒绝报告，所以我在想这样的事情：

```
/api/report/id/approve
/api/report/id/deny 
```

会有用的。这是否违反了 API 的任何标准或实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:54:55.277

公开这些 URL 并没有错。REST 对 URL 没有任何要求，它是一组与此无关的约束。其中之一是 HATEOS。如果您以某种方式公开这些链接以更改报告的状态作为报告的资源表示的一部分，那么您将使用该约束作为实现的一部分。例如，

```
<report>
  <id>2</id>
  <link url="api/report/2/approve" rel="approve"/>
  <link url="api/report/2/deny" rel="deny"/>
</report> 
```

这将使您的 API 更容易被发现，这就是当今 Web 的工作方式。另一个限制是您需要以正确的方式使用 HTTP 动词。对该链接的 HTTP GET 将无效，因为它会更改资源的状态。HTTP GET 应该是安全的，因此它不应该改变资源的状态。HTTP POST 更适合这种情况。这些是您如何将不同的约束应用于您的 web api 的一些示例，但请记住，该设计没有任何问题。

问候，巴勃罗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:19:43.923

我认为你如何构建你的 API 完全取决于你。尽管它可能不能称为“RESTful”并且更类似于 RPC，但只要您为 API 用户提供他们需要的功能，这真的很重要吗？

有几种不同的方法可以实现您的要求，您可以考虑许多意见和“最佳实践”，但最终只要 API 实现了它的目标，您如何实现它并不重要。

# bash - 如何在 bash 中使用 cut 命令显示除指定列之外的所有列？

> ID：15353655
> 
> 赞同：37
> 
> 时间：2013-03-12T05:00:19.640
> 
> 标签：bash, cut

我需要从纯文本文件中删除一列。我认为这可以使用 cut 命令的逆来完成。我的意思是，像这样：

如果这是我的文件：

```
01 Procedimiento_tal retiro aceptado
01 tx1
01 tx2
01 tx3
02 Procedimiento_tal retiro rechazado
02 tx1
02 tx2
02 tx3
03 Procedimiento_tal retiro aceptado
03 tx1
03 tx2
03 tx3 
```

如何使用 cut 删除第一列并在 bash 中获取以下文本？：

```
Procedimiento_tal retiro aceptado
tx1
tx2
tx3
Procedimiento_tal retiro rechazado
tx1
tx2
tx3
Procedimiento_tal retiro aceptado
tx1
tx2
tx3 
```

提前致谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-12T05:04:19.820

使用`cut`：

```
cut -d ' ' -f 2- input-file 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-12T05:07:55.650

读取`infile`使用`' '`作为分隔符 ( `-d`) 并将字段 ( `-f`) 2 向前 ( `2-`) 放入`file`：

```
cut -d' ' -f2- infile > file 
```

查看[**`man cut`**](http://www.manpagez.com/man/1/cut/)更多选项。

**注意：**这不是[bash](/questions/tagged/bash "显示标记为“bash”的问题")特定的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-05T12:09:12.940

GNU coreutils cut 支持该`--complement`标志。因此，如果您使用的是该版本的 cut，您可以说：

```
cut --complement -d' ' -f1 infile 
```

输出：

```
Procedimiento_tal retiro aceptado
tx1
tx2
tx3
Procedimiento_tal retiro rechazado
tx1
tx2
tx3
Procedimiento_tal retiro aceptado
tx1
tx2
tx3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-03T14:50:39.857

这是一个有效的命令，它比每个人的都短一点：

```
cut -b 4- input-file 
```

-b 代表字节，并选择将被粘贴到屏幕上的字节。

4- 是 -b 的一部分，这意味着它将选择每行的第 4 个字符到每行的最后一个字符。然后剪切命令会将选择粘贴到屏幕上。

# mysql - 如何将 mysql 转储导入 SQLyog

> ID：15353657
> 
> 赞同：10
> 
> 时间：2013-03-12T05:00:30.227
> 
> 标签：mysql, sqlyog

我很少有 sql 转储文件，例如从其他数据库中获取的表。现在我想使用 sqlyog 将表更新到我的服务器中。那么任何人都可以帮助我将 .sql 文件导入 SQLyog 吗？提前谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T10:09:04.210

在 SQLyog 中有一个选项 - `Tools -> Execute SQL script`。您可以使用它来运行 SQL 脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-13T11:56:02.847

为了清楚起见，请参阅屏幕截图：

![在此处输入图像描述](../Images/363b045a22df753aa8e7534aa984da09.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T05:28:29.133

为什么要使用 SQLYog，mysqldump 已经是服务器可用的命令。

```
mysqldump --opt --user=username --password database > dumbfile.sql 
```

其中dumbfile 将是您的sql 文件。

[MYSQLDump 命令](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)我经常使用它来导出数据库，并且非常可靠。

和mysql命令导入一样：

```
mysql -u root -p[root_password] [database_name] < dumpfilename.sql 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-13T09:45:58.753

在 SQLyog 中有一个选项 - `Tools -> Execute SQL script`。如果有一些错误它会给你一个弹出窗口，然后点击`"Open Error File button"`，它会在 sql 文件中给你错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T07:39:31.840

我认为您可以在查询窗口中打开您的 SQL 文件，然后在 SQLYog 中运行它。看看这个文档页面 -[执行 SQL 查询](https://www.webyog.com/webyog/sqlyogDocs)。

此外，您可以使用[mysql — MySQL 命令行工具](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)或[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)（免费快速版）针对 MySQL 数据库执行 SQL 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-04T03:52:53.553

在 SQLyog v7.14 中，运行 DB -> 从 SQL Dump 还原...，或者直接按 Ctrl+Shift+Q。

# android - 在 Android 应用中创建类似 Google 的即时搜索

> ID：15353666
> 
> 赞同：5
> 
> 时间：2013-03-12T05:01:26.447
> 
> 标签：android, textbox, search-engine, android-search, instant

我正在开发一个 Android 应用程序，我想在其中添加即时搜索功能。

基本上，我想在用户在`TextBox`.
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-10T12:50:09.297

# 构建界面

您可以使用[InstantSearch Android](https://community.algolia.com/instantsearch-android/)，这是一个开源库，可帮助您使用[Algolia](https://algolia.com)在 Android 上轻松构建即时搜索体验。

它[在 GitHub 上可用](https://github.com/algolia/instantsearch-android)，可让您快速构建即时搜索 UI。参见例如[InstantSearch Media 应用程序](https://github.com/algolia/instantsearch-android-examples/tree/master/media)：

[![示例媒体应用程序](../Images/b61f1d239bb5ae45f3a825d3aab781a2.png)](https://i.stack.imgur.com/ab6Ck.gif)

您可以从[入门指南开始](https://community.algolia.com/instantsearch-android/getting-started.html)，它将引导您完成使用该库的主要步骤。

[示例应用程序](https://github.com/algolia/instantsearch-android-examples)可以让您了解使用 InstantSearch Android 可以构建什么。

# 使用数据

如果您有要搜索的地点数据，您[只需在 Algolia 中](https://www.algolia.com/doc/guides/indexing/synchronization/)对其进行索引，即可在您的应用程序中进行搜索。

如果您在某处没有数据，请查看[Algolia Places](http://algolia.com/places)，它提供对全球地点数据库的**免费访问。**

*免责声明：我是 InstantSearch Android 的作者。*

# sql-server - 使用 SQL Server 从同名的 XML 节点获取所有数据

> ID：15353668
> 
> 赞同：8
> 
> 时间：2013-03-12T05:01:39.870
> 
> 标签：sql-server, xml, nodes

我有一个 XML 文件，其中我需要数据的节点都命名相同。我了解如何访问第一条（或第二条记录），所以下面的查询只给了我第二个作者（`<a1>`标签）。如何将所有作者作为一个列？

```
 DECLARE @MyXML XML
      SET @MyXML = '<refworks>
            <reference>
               <rt>Journal Article</rt> 
               <sr>Print(0)</sr> 
               <id>869</id> 
               <a1>Aabye,Martine G.</a1> 
               <a1>Hermansen,Thomas Stig</a1> 
               <a1>Ruhwald,Morten</a1> 
               <a1>PrayGod,George</a1> 
               <a1>Faurholt-Jepsen,Daniel</a1> 
               <a1>Jeremiah,Kidola</a1> 
               <a1>Faurholt-Jepsen,Maria</a1> 
               <a1>Range,Nyagosya</a1> 
           </reference>
         </refworks>'

      SELECT 
          author.value('(a1)[2]', 'varchar(MAX)') AS 'Author'
      FROM @MyXML.nodes('/refworks/reference') AS ref(author) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T05:25:45.237

尝试这个 ：-

```
 SELECT 
      author.value('./text()[1]', 'varchar(MAX)') AS 'Author'
  FROM @MyXML.nodes('//refworks/reference/child::node()') AS ref(author)
  where  author.value('local-name(.)[1]', 'varchar(100)') ='a1' 
```

child::node() 表示一个轴说明符，它是`child`并且`::`是轴分隔符。

要了解用于在节点中向下钻取的子轴，可以在此[MSDN](http://msdn.microsoft.com/en-US/library/ms345122%28v=SQL.90%29.aspx)文档中找到。

或[在 sql server 中操作 xml 数据](https://www.simple-talk.com/sql/database-administration/manipulating-xml-data-in-sql-server/)

更新 ：-

一个更简单的方法你在正确的轨道上。在 from 子句中指定子节点以过滤数据

```
 SELECT 
      author.value('(.)[1]', 'varchar(MAX)') AS 'Author'
  FROM @MyXML.nodes('/refworks/reference/a1') AS ref(author) 
```

# android - 在 android sdcard 中创建目录

> ID：15353669
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:01:42.820
> 
> 标签：android, file-io, sd-card, android-sdcard

我试图通过此卡在 sd 卡中创建目录。但它不起作用。我在清单中添加了写入外部存储权限，尽管它不起作用。需要紧急帮助。我已将此代码放入 try catch。但它没有输入 catch 块。这是我的代码..

```
try
        {
          File songDirectory = new File(Environment.getExternalStorageDirectory().toString()+"/iAC2013");
           if(!songDirectory.exists())
          {
              songDirectory.mkdirs();
              Toast.makeText(getApplicationContext(),"Directory created", Toast.LENGTH_LONG).show();
                // ShowlistView();
          }
         else
         {
               //ShowlistView();
               Toast.makeText(getApplicationContext(),"Directory AlreadyExists", Toast.LENGTH_LONG).show();
         }
        }
        catch(Exception e)
        {
            Log.e("","Error While creating file is:::::"+e+"");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:04:16.023

试试下面的代码：

```
File sdDir = Environment.getExternalStorageDirectory();
            File wwwjdicDir = new File(sdDir.getAbsolutePath() + "/your_folder_name");
            if (!wwwjdicDir.exists()) {
                wwwjdicDir.mkdir();
            }

            if (!wwwjdicDir.canWrite()) {
                return;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:10:22.563

试试看

```
 File dir = new File(DEFAULT_STORAGE_LOCATION);
        // test dir for existence and writeability
        if (!dir.exists()) {
            try {
                dir.mkdirs();
            } catch (Exception e) {   
                return null;
            }
        } else {
            if (!dir.canWrite()) {
                   return null;
                 // do your work here
            }
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T05:03:34.813

如果这是您的代码

```
File songDirectory = new `File(Environment.getExternalStorageDirectory().toString()+"/iAC2013"); 
```

你需要把它改成这个

```
File songDirectory = new File(Environment.getExternalStorageDirectory().toString()+"/iAC2013"); 
```

# java - 从 ANSI 到 UTF8 的 Java 文件编码转换

> ID：15353671
> 
> 赞同：4
> 
> 时间：2013-03-12T05:01:59.197
> 
> 标签：java, file, encoding

我需要将文件的编码从 ANSI(windows-1252) 更改为 UTF8。我写了下面的程序来通过java来做到这一点。该程序将字符转换为 UTF8，但是当我在 notepad++ 中打开文件时，编码类型显示为 ANSI 为 UTF8。当我在访问数据库中导入此文件时，这给了我错误。需要仅具有 UTF8 编码的文件。此外，要求是转换文件而不在任何编辑器中打开它。

```
public class ConvertFromAnsiToUtf8 {

    private static final char BYTE_ORDER_MARK = '\uFEFF';
    private static final String ANSI_CODE = "windows-1252";
    private static final String UTF_CODE = "UTF8";
    private static final Charset ANSI_CHARSET = Charset.forName(ANSI_CODE);

    public static void main(String[] args) {

        List<File> fileList;
        File inputFolder = new File(args[0]);
        if (!inputFolder.isDirectory()) {
            return;
        }
        File parentDir = new File(inputFolder.getParent() + "\\"
                    + inputFolder.getName() + "_converted");

        if (parentDir.exists()) {
            return;
        }
        if (parentDir.mkdir()) {

        } else {
            return;
        }

        fileList = new ArrayList<File>();
        for (final File fileEntry : inputFolder.listFiles()) {
            fileList.add(fileEntry);
        }

        InputStream in;

        Reader reader = null;
        Writer writer = null;
        try {
            for (File file : fileList) {
                in = new FileInputStream(file.getAbsoluteFile());
                reader = new InputStreamReader(in, ANSI_CHARSET);

                OutputStream out = new FileOutputStream(
                            parentDir.getAbsoluteFile() + "\\"
                                            + file.getName());
                writer = new OutputStreamWriter(out, UTF_CODE);
                writer.write(BYTE_ORDER_MARK);
                char[] buffer = new char[10];
                int read;
                while ((read = reader.read(buffer)) != -1) {
                    System.out.println(read);
                    writer.write(buffer, 0, read);
                }
            }
            reader.close();
            writer.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

任何指针都会有所帮助。

谢谢，阿希什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T10:06:45.703

发布的代码正确地从 windows-1252 转码为 UTF-8。

Notepad++ 消息令人困惑，因为“ANSI as UTF-8”没有明显的含义；它似乎是 Notepad++ 中的一个[开放缺陷](http://sourceforge.net/p/notepad-plus/bugs/4095/)。我相信 Notepad++ 意味着*没有 BOM*的 UTF-8（参见编码菜单。）

Microsoft Access 是一个 Windows 程序，它可能期望 UTF-8 文件以字节顺序标记 ( [BOM](http://www.unicode.org/faq/utf_bom.html#BOM) ) 开头。

您可以通过在文件开头编写代码点 U+FEFF 来将 BOM 注入文档：

```
import java.io.*;
import java.nio.charset.*;

public class Ansi1252ToUtf8 {
  private static final char BYTE_ORDER_MARK = '\uFEFF';

  public static void main(String[] args) throws IOException {
    Charset windows1252 = Charset.forName("windows-1252");
    try (InputStream in = new FileInputStream(args[0]);
        Reader reader = new InputStreamReader(in, windows1252);
        OutputStream out = new FileOutputStream(args[1]);
        Writer writer = new OutputStreamWriter(out, StandardCharsets.UTF_8)) {
      writer.write(BYTE_ORDER_MARK);
      char[] buffer = new char[1024];
      int read;
      while ((read = reader.read(buffer)) != -1) {
        writer.write(buffer, 0, read);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T14:07:42.373

在运行 Java 8 的 Windows 7（64 位）上，我不得不关闭每个文件。否则，文件将被截断为 4 kB 的倍数。关闭最后一组文件是不够的，我必须关闭每个文件才能获得所需的结果。发布我的改编版本，添加错误消息：

```
import java.io.*;
import java.nio.charset.*;
import java.util.ArrayList;

public class ConvertFromAnsiToUtf8 {

    private static final char BYTE_ORDER_MARK = '\uFEFF';
    private static final String ANSI_CODE = "windows-1252";
    private static final String UTF_CODE = "UTF8";
    private static final Charset ANSI_CHARSET = Charset.forName(ANSI_CODE);
    private static final String PATH_SEP = "\\";
    private static final boolean WRITE_BOM = false;

    public static void main(String[] args) 
    {
        if (args.length != 2) {
            System.out.println("Please name a source and a target directory");
            return;
        }

        File inputFolder = new File(args[0]);
        if (!inputFolder.isDirectory()) {
            System.out.println("Input folder " + inputFolder + " does not exist");
            return;
        }
        File outputFolder = new File(args[1]);

        if (outputFolder.exists()) {
            System.out.println("Folder " + outputFolder + " exists - aborting");
            return;
        }
        if (outputFolder.mkdir()) {
            System.out.println("Placing converted files in " + outputFolder);
        } else {
            System.out.println("Output folder " + outputFolder + " exists - aborting");
            return;
        }

        ArrayList<File> fileList = new ArrayList<File>();
        for (final File fileEntry : inputFolder.listFiles()) {
            fileList.add(fileEntry);
        }

        InputStream in;
        Reader reader = null;
        Writer writer = null;
        int converted = 0;

        try {
            for (File file : fileList) {
                try {
                    in = new FileInputStream(file.getAbsoluteFile());
                    reader = new InputStreamReader(in, ANSI_CHARSET);

                    OutputStream out = new FileOutputStream(outputFolder.getAbsoluteFile() + PATH_SEP + file.getName());
                    writer = new OutputStreamWriter(out, UTF_CODE);

                    if (WRITE_BOM)
                        writer.write(BYTE_ORDER_MARK);
                    char[] buffer = new char[1024];
                    int read;
                    while ((read = reader.read(buffer)) != -1) {
                        writer.write(buffer, 0, read);
                    }
                    ++converted;
                } finally {
                    reader.close();
                    writer.close();
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        System.out.println(converted + " files converted");
    }

} 
```

# highcharts - Highcharts：如何在“columnrange”类型的格式化程序中访问范围值？

> ID：15353673
> 
> 赞同：2
> 
> 时间：2013-03-12T05:02:12.577
> 
> 标签：highcharts

我想自定义我的 Highcharts 图表的工具提示。y 轴属于“columnrange”类型，即它有一个 y 值区间：

```
 series: [{
        data: [
            [-0.547571175, 0.401498266],
            [-0.960011899, 0.444655955],
            [-0.660727717, 0.862639688],
            [-0.446911722, 0.660380453],
            [-0.863925256, 0.619544707],
               .......
        ]
    }] 
```

工具提示格式化程序应如下所示：

```
 tooltip: {
        formatter: function() {
            var point = this.points[0];
            return '<b>'+ point.x +'</b><br />Interval:'+ point.low +' - '+ point.high;
        },
        shared: true
    } 
```

但是`point.low`并`point.high`没有定义......如何获得这些低/高值？

在这里你可以找到一个示例图：http: [//jsfiddle.net/dmN3N/21/](http://jsfiddle.net/dmN3N/21/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T15:08:56.677

如果您在工具提示中使用共享选项，那么您需要使用 this.points[0] 等，如果您禁用了共享选项，您应该使用 this.point

看看共享的示例 [http://jsfiddle.net/dmn3N/24/](http://jsfiddle.net/dmN3N/24/)

```
 tooltip: {
        shared:true,
        valueSuffix: '',
        formatter:function(){

            return 'LOW: '+this.points[0].point.low+' HIGH: '+this.points[0].point.high ;
        }
    }, 
```

并且不共享

[http://jsfiddle.net/dmN3N/22/](http://jsfiddle.net/dmN3N/22/)

```
tooltip: {
        valueSuffix: '',
        formatter:function(){

            return 'LOW: '+this.point.low+' HIGH: '+this.point.high;
        }
    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:18:20.310

此代码适用于工具提示的格式化程序：

```
tooltip: {
    formatter: function() {
        var point = this.points[0];
        return '<b>'+ point.x +'</b><br />Interval:'+ point.series.data[0].low +' - '+ point.series.data[0].high;
    },
    shared: true
} 
```

请参阅此处获取示例：http: [//jsfiddle.net/c2gVe/1/](http://jsfiddle.net/c2gVe/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:04:24.627

它们不只是`point[0]`和`point[1]`分别为低和高吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:40:38.007

试试这个，为你的格式化功能：

```
formatter: function() {
    var lowPoint = getLow(this.series.data, 'x');
    var highPoint = getHigh(this.series.data, 'x');
    return '<b>'+ this.x +'</b><br />Interval:'+ lowPoint +' - '+ highPoint;
} 
```

和函数简单地获取点列表`getLow()`并`getHigh()`分别返回低点/高点。

这是实现它的一种方法，但您可以自由使用您喜欢的任何算法。

我假设您想要最高/最低`x`值（您可以`y`通过传入 'y' 作为`axis`参数轻松获得）：

```
var getLow = function(list, axis) {
    var low = null;
    for (var i = 0; i < list.length; i++){
        if (low !== null) {
            low = list[i][axis] < low ? list[i][axis] : low;
        } else {
            low = list[i][axis];
        }
    }
    return low;
};

var getHigh = function(list, axis) {
    var high = null;
    for (var i = 0; i < list.length; i++){
        if (high !== null) {
            high = list[i][axis] > high ? list[i][axis] : high;
        } else {
            high = list[i][axis];
        }
    }
    return high;
}; 
```

这是要演示的小提琴：http: [//jsfiddle.net/tKB7y/](http://jsfiddle.net/tKB7y/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-16T13:03:48.530

要使用基本的 pointFormat 属性，您可以执行以下操作：

```
tooltip: { pointFormat: '{point.low}' } 
```

# android - 如何在 Android 中以 HH:MM:SS 格式从 TimePicker 保存选定的时间

> ID：15353682
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:03:20.270
> 
> 标签：android, sqlite, format, timepicker

任何人都可以建议如何将时间选择器以 05:30:55 格式（即 HH:MM:SS 格式）保存到 android 中的 sqlite 数据库中。我用日历来节省时间。它以 5:30 格式保存。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:54:34.117

使用此代码。

```
 int time=(picker.getCurrentMinute() * 60 + picker.getCurrentHour() * 60 * 60) * 1000;
  SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
   String formatted = format.format(time); 
```

并将该格式化字符串插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:09:11.973

您需要在 Date 函数中提供每个参数。

```
 Date dt = new Date(year, month, day, hour, minute, second);
    SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
    String formattedDate = dateFormat.format(dt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:35:22.383

我建议将原始时间（`long`用于支持 Calendar 实例）保存在数据库中，并仅在 UI 需要时对其进行格式化。以这种方式进行查询和其他事情（如比较日期）要容易得多，而且您可以随时按照 Amit 所写的方式进行操作。

# iphone - 在 iphone 中将此 Html 文本转换为简单文本

> ID：15353688
> 
> 赞同：0
> 
> 时间：2013-03-12T05:04:08.840
> 
> 标签：iphone, ios, objective-c

```
&lt;strong&gt;Occupant Safety&lt;/strong&gt; 
```

除了牵引力和稳定性控制系统以及电子制动力分配外，所有 ILX 车型均标配双前、前侧和全长侧帘式安全气囊。

```
&lt;strong&gt;Key competitors&lt;/strong&gt; 
```

作为讴歌的新入门级产品，ILX 将与别克 Verano 和奥迪 A3 竞争。买家还可以考虑将其与讴歌自己的 TSX 交叉购物，后者的尺寸更大，但价格略高。

**请说如何在iphone中将这个html标签转换为简单的文本**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:26:52.620

试试这个.. [https://github.com/mwaterfall/MWFeedParser](https://github.com/mwaterfall/MWFeedParser)

导入类别文件夹。

只定义..

# 导入“NSString+HTML.h”

并且这样写...

simpletxt.text = [YourHTMLString stringByConvertingHTMLToPlainText];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:51:40.797

您需要转义字符串中的 html 标签，您有一些`NSString`类别可以使其正常工作，请遵循此

[将格式化的 HTML 文本字符串转换为 NSString 部分](https://stackoverflow.com/questions/8148291/convert-formatted-html-text-string-to-nsstring-parts)

在接受的答案中，您可以找到您的解决方案，如何在字符串中转义 html 标签。

# sql - 如何在 SQL 存储过程中组合值

> ID：15353692
> 
> 赞同：3
> 
> 时间：2013-03-12T05:04:30.930
> 
> 标签：sql, json, sql-server-2008, stored-procedures

我有一个存储过程

```
SELECT P.Name,P.Description,
      PP.Attribute,PD.Value
FROM admin.Profiles P
LEFT JOIN admin.ProfilePreferenceMap PPM on P.ProfileID=PPM.ProfileID
LEFT JOIN admin.ProfilePrefDtl PD on PD.ProfilePrefDtlID=PPM.PreferenceID
LEFT JOIN admin.ProfilePref PP on PP.ProfilePrefID=PD.ProfilePrefID
WHERE P.Name='Profile1' 
```

它返回像

```
Name          Description           Attribute  Value
Profile1    Profile 1 description     E         EV
Profile1    Profile 1 description     S         SV 
```

我想得到结果

```
Name            Description         Attribute   Value
Profile1    Profile 1 description   E,S         EV,SV 
```

我的目的是将此值转换为 JSON 数据，例如 -

```
[{"Name":"Profile1","Description":"Profile 1 description","Attribute":["E", "S"],"Value":["EV", "SV"]}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:21:51.393

您应该[模拟 MySql 中存在的 GROUP_CONCAT()](https://stackoverflow.com/questions/6344950/sql-query-to-get-aggregated-result-in-comma-seperators-along-with-group-by-colum?lq=1)

[SQLFiddle 演示](http://sqlfiddle.com/#!6/869ad/2)

```
with t as
(
  SELECT P.Name,P.Description,
      PP.Attribute,PD.Value
  FROM admin.Profiles P
  LEFT JOIN admin.ProfilePreferenceMap PPM on P.ProfileID=PPM.ProfileID
  LEFT JOIN admin.ProfilePrefDtl PD on PD.ProfilePrefDtlID=PPM.PreferenceID
  LEFT JOIN admin.ProfilePref PP on PP.ProfilePrefID=PD.ProfilePrefID
  WHERE P.Name='Profile1'
)

select 
    Name,Description, 
    stuff((select ', ' + Attribute 
           from t t2 where t1.NAme = t2.NAme and t1.Description = t2.Description
           for xml path('')),
          1,2,'') [Attributes],
    stuff((select ', ' + Value
           from t t2 where t1.NAme = t2.NAme and t1.Description = t2.Description
           for xml path('')),
          1,2,'') [Values]
from t t1
group by Name,Description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:10:20.677

您可以使用`group by`按唯一名称或描述列进行分组，但我不确定是否有一种简单的方法来获取逗号分隔值，由不同行中的值组成，除非您对`Temp`表格做了一些事情并且`CONCAT()`可能？

如果分组没问题，试试这个：

```
SELECT P.Name,P.Description,
      PP.Attribute,PD.Value
FROM admin.Profiles P
LEFT JOIN admin.ProfilePreferenceMap PPM on P.ProfileID=PPM.ProfileID
LEFT JOIN admin.ProfilePrefDtl PD on PD.ProfilePrefDtlID=PPM.PreferenceID
LEFT JOIN admin.ProfilePref PP on PP.ProfilePrefID=PD.ProfilePrefID
WHERE P.Name='Profile1'
GROUP BY P.Name 
```

`Attribute`但是，像这样的分组只会显示您和`Value`列的第一行（基于排序）

# hadoop - 在 Hadoop 上，运行应用程序（如 WordCount 或 Pi Estimator）时是否可以增加地图（不是 maptask 或节点！）

> ID：15353698
> 
> 赞同：0
> 
> 时间：2013-03-12T05:05:02.177
> 
> 标签：hadoop

我是初学者程序员和hadoop学习者。

在启动 maptask 和 hdfs 之前，我正在使用 5 台 PC（具有双核 cpu 和 ram 2G）测试 hadoop 完全分发模式，我知道我必须配置文件（IP 上的 etc/hosts、主机名和 hadoop 文件夹/conf/masters， slaves 文件）所以我完成了该文件的配置。接着，

我有一个问题

运行应用程序（如 WordCount 或 Pi Estimator）时是否可以增加（或添加）地图（不是 mapTask 或节点！）？

例如，我正在使用 10 个地图运行 Pi Estimator 应用程序，迭代 100,000,000 次。

在运行应用程序的路上，我觉得它很慢，所以我想增加map，即使hadoop状态正在运行。可能吗？如果是真的，请告诉我方法。

或者在运行应用程序之前，我可以配置配置文件（如 hdfs-site.xml 或 mapred-site.xml）以在运行应用程序时动态增加地图吗？

堆栈溢出社区的hadoop高手，请告诉我真相。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:23:50.160

你可以设置 mapred.map.tasks 并给工作一个关于你想要多少映射器的提示，但这只是一个提示，hadoop 不一定会遵守它。您可以通过设置 mapred.tasktracker.reduce.tasks.maximum 来设置一次运行的最大并发映射任务数，

[设置map任务和reduce任务的数量](https://stackoverflow.com/questions/6885441/setting-the-number-of-map-tasks-and-reduce-tasks)

[如何根据用于提高性能的实例数增加 hadoop 中的映射器和缩减器？](https://stackoverflow.com/questions/10448204/how-to-increase-the-mappers-and-reducers-in-hadoop-according-to-number-of-instan)

# iphone - 如果条件不起作用，则分配值

> ID：15353701
> 
> 赞同：4
> 
> 时间：2013-03-12T05:05:11.803
> 
> 标签：iphone, objective-c, if-statement

我有 var 我已经为它分配了值 12.90 我希望如果变量具有值 12.90 那么它可以执行如果其他明智的

```
if (appDelegate.p_ClinInf_Yes_NV_InModel==12.90) {

}

else{

} 
```

但它每次运行 else 语句

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T05:07:54.250

尝试这个

```
if (appDelegate.p_ClinInf_Yes_NV_InModel == 12.90F) {

}
else{ 

} 
```

由于它们的精度，比较浮点数和双精度数的相等性不会产生预期的结果。

# vim - 带有 if 语句的 Vim gui 键映射

> ID：15353706
> 
> 赞同：0
> 
> 时间：2013-03-12T05:05:25.130
> 
> 标签：vim

我是 vim 的新手并且喜欢它！只是想与我的 .vimrc 文件联系并获得一些帮助。

我正在尝试设置 F11 以使我的 gvim 窗口更大。以下是相关代码：

```
if has("gui_running")
  set guioptions-=m
  set guioptions-=r
  set lines=32 columns=132
  nnoremap <F11> :set lines=39 columns=169 <Enter>
  vnoremap <F11> :set lines=39 columns=169 <Enter>
  autocmd FocusLost * silent! :wa
endif 
```

一旦我按下 F11，它就会增长到更大的尺寸（在我的机器上几乎全屏）但是当我再次按下 F11 时没有任何反应......显然:)

我想让 F11 用更小的尺寸切换更大的尺寸。我不确定正确的方法，我在编写 vim 脚本方面非常陌生。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:08:59.350

您可以编写自定义切换功能并映射`F11`到该功能。我不使用 gvim 也没有对此进行测试，但我很确定它应该可以工作：

```
function! ToggleGvimSize()
    if g:gvim_large
        set lines=32 columns=132
        let g:gvim_large = 0
    else
        set lines=39 columns=169
        let g:gvim_large = 1
    endif
endfunction

let g:gvim_large = 0
nnoremap <F11> :call ToggleGvimSize() 
```

将上述内容放入您的`.vimrc`. 现在按下`F11`应该切换您的窗口大小。根据您的需要更改参数和逻辑。

# php - facebook php sdk $this->getUser 总是返回 0

> ID：15353707
> 
> 赞同：0
> 
> 时间：2013-03-12T05:05:29.087
> 
> 标签：php, facebook, codeigniter, facebook-php-sdk

我为这个问题搜索了很多，并没有找到这个问题的特定解决方案。我见过很多例子和所谓的解决方案，但没有一个有效。最重要的是，我正在观看 phpacademy 的视频并完全按照视频输入。

在有人将此标记为重复之前，我唯一的问题是

这是因为我在本地机器上测试这个吗？因为我的设置和视频之间的唯一区别是教程是实时托管的，我正在本地机器上测试它。

如果是这种情况？如何在我的本地机器上测试 PHP facebook SDK？

这是我的完整代码这是我的主控制器

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Fbapp extends MX_Controller {

    function __construct() {
        $this->load->library('fbconnect');
        parent::__construct();
    }
    function index() {

        echo "<a href='" . base_url() . "fbapp/gotofb'>Go To Facebook</a>";
    }

    function gotofb(){

        $data = array(
            'redirect_uri' => base_url() . "fbapp/redirected",
            'scope' => "email,photo_upload"
        );
      $url =  $this->fbconnect->getLoginUrl($data);

     redirect($url);
    }

    function redirected(){
        $user_id= $this->fbconnect->getUser();
       echo $user_id;

    }
} 
```

这是我命名为“fbconnect.php”的库文件，包括库中的 sdk 文件并包含在库中，并且我在配置中创建了一个 facebook.php，其中存储了我已加载为 $config 的 appId 和秘密。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require_once(APPPATH . 'libraries/facebook/src/facebook.php');
class Fbconnect extends Facebook{

    public $user = null;

    function __construct() {
        $ci =& get_instance();

        $ci->load->config("facebook", true);
        $config = $ci->config->item('facebook');

        parent::__construct($config);
    }

} 
```

步骤： 1.我访问我的网址。我点击链接。2.它让我进入facebook的登录页面。我登录。3\. 它将我重定向到重定向 uri 并打印 0。

注意：我正在使用 codeigniter 进行开发。提前致谢。任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:25:39.500

嗨@developernaren 尝试在您的库中使用以下代码：

```
<?php
    if (!defined('BASEPATH')) exit('No direct script access allowed');

include(APPPATH.'libraries/facebook/src/facebook.php');

class Fb_connect extends Facebook {

    //declare protected variables
    protected $user     = NULL;
    protected $user_id  = FALSE;
            protected $friends      = NULL;

            //constructor method.
    public function __construct()
    {
                $CI = & get_instance();
                $CI->config->load("facebook",TRUE);
                $config = $CI->config->item('facebook');
                parent::__construct($config);
                $this->user_id = $this->getUser();
                if ($this->user_id) {
                    log_message('Info','Userid is fetched!');
                    try {
                        $this->user = $this->api('/me');
                        $this->friends = $this->api('/me/friends');
                    } catch (FacebookApiException $e) {
                        error_log($e);
                    }
                }
    }
            //Use this function to fetch the fb_uid. Function call: $this->fb_connect->user_id();
            public function user_id()
            {
                if(!empty($this->user_id))
                    return $this->user_id;
                else
                    return FALSE;
            }
          //Use this function to fetch the user details from fb. Function call: $this->fb_connect->user();
            public function user()
            {
                if(!empty($this->user))
                    return $this->user;
                else
                    return NULL;
            }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:25:47.597

我之前遇到过同样的问题，经过几天的搜索，如果您确定所有配置，我会通过两种方式解决它......我认为您必须尝试解决方案：1-将您的应用程序托管在网络托管服务器上并尝试使用域你会得到。2-使用 javascript sdk 获取 access_token 然后将其传递给 php skd，如下所示：

```
 window.fbAsyncInit = function() {
            FB.init({
              appId      : 'appId', // App ID
              channelUrl : 'channel.html', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });
            // Additional init code here

            FB.Event.subscribe('auth.login', function(response) {
            var accessToken = response.authResponse.accessToken;
            window.location.href = "http://page_to_read_process_the _request?"accessToken="+accessToken;
         }); 
```

在php中你只应该这样做：

```
$facebook->setAccessToken($accessToken);
$facebook->getUser(); 
```

如果这解决了您的问题：请不要忘记投票：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:33:48.567

您可以尝试为本地机器创建某种测试环境。

您需要了解 Facebook 如何将数据发送到您的应用程序，然后才能创建您的环境。

1.  Facebook 正在向您的页面发送请求（通过 POST），而您的页面正在接收此数据，您需要接受数据并对其进行处理。

2.  尝试创建一个在线应用程序（我使用的是 PHP，所以我会以这种方式编写）和 var_dump 签名请求。

3.  在 var_dump 之后，您可以看到从 Facebook 发送的签名请求。

4.  创建带有输入字段的 PHP 文件，您可以在其中放置本地应用程序，以及将数据发布到输入页面的按钮。在表单中，您将隐藏名为“signed_request”的输入，其中包含步骤 2 中的数据。

5.  将数据发送到页面后，页面将处理签名请求，就像它应该在线处理一样。

我知道如何制作它是一个漫长的过程，但是一旦完成，您将拥有测试环境，以供将来所有其他应用程序使用。

另外，请尝试使用几种情况创建多个表单：

1.  Facebook 页面标签不喜欢
2.  Facebook页面标签喜欢
3.  带有已接受权限框的 Facebook 页面选项卡
4.  ETC...

# ios - 如何在Javascript中调用Objective C函数

> ID：15353709
> 
> 赞同：0
> 
> 时间：2013-03-12T05:05:32.567
> 
> 标签：ios

我开发了一个 iOS 应用程序，现在我想转换这个 phonegap 应用程序，我的问题是：如何为 iOS 文件创建插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:23:29.053

首先，您必须在插件文件夹中创建CDVPlugin 的objective-C 类文件子类，即.h 文件和.m 文件。之后，将您的方法声明和实现创建为

```
-(void)methodName:(CDVInvokedUrlCommand*)command; 
```

![在此处输入图像描述](../Images/e5a5d6286e8c257de60a98edf0f62fa3.png)

并将您的插件文件添加到 Cordova.plist 文件中

![在此处输入图像描述](../Images/a1e15b0b882e92966527fbe38491c33b.png)

最后在 javaScript 文件中调用你的方法为

```
cordova.exec(success, error, "MyCustomPlugin", "methodName", arr); 
```

这里 arr 是您将与方法调用一起发送的参数。成功和错误是方法回调。有关更多信息，您可以从此处获取参考。

[在 ios PhoneGap 中添加插件](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_ios_index.md.html)

# ruby-on-rails - Rails：无法从不同模型中引用模型

> ID：15353715
> 
> 赞同：0
> 
> 时间：2013-03-12T05:06:03.577
> 
> 标签：ruby-on-rails, model

从控制台我可以这样做：

```
bin = Bin.find(9)       
bin.messages.create :to => "joe@example.com", :from => "tom@example.com", :subject => "hi", :body => "just hi" 
```

但是，我试图在我的消息模型中的一个函数中做同样的事情，它正在保存一条记录，但是 bin_id 为 nil。这很重要，因为 Message 属于一个 Bin，而一个 Bin 有许多 Message。

message.rb 的内容：

```
class Message < ActiveRecord::Base
    attr_accessible :body, :from, :subject, :to
    belongs_to :bin
    def self.receive_mail(message)
        bin = Bin.find(9)       
        bin.messages.create :to => "joe@example.com", :from => "tom@example.com", :subject => "hi", :body => "just hi"
    end
end 
```

我需要做一些特别的事情来从我的 Message 模型中获取 Bin 吗？

# php - 将 Javascript 发布到 PHP 文件？

> ID：15353716
> 
> 赞同：0
> 
> 时间：2013-03-12T05:06:09.230
> 
> 标签：php, javascript, database

所以我有这个问题。

我的网页上有以下表格：

```
 <form>
 <textarea rows="3" id="pasteText"> </textarea>
 <button class="btn btn-success btn-block" type="submit" id="paster" onclick="captureText();">Paste!</button> 
```

我有一个 JavaScript 方法来捕获 textarea 中的文本：

```
function captureText() {
var value = $("#pasteText").val();

//var sent = "../../lib/_add.php?data="+value;
$.post('../../lib/_add.php', {data: value});
} 
```

我正在尝试将 textarea 中的值发送到 PHP 中的数据（add.php 将数据变量添加到我的数据库中）。最好的方法是什么？到目前为止我所尝试的一切都没有奏效。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:10:36.280

您不需要 jQuery`$.post`来提交表单。一个简单的 HTML 表单就可以了。

```
<form action="../../lib/_add.php" method="post">
<textarea rows="3" name="data" id="pasteText"></textarea>
<input class="btn btn-success btn-block" id="paster" type="submit" value="Paste!" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:24:50.173

您正在使用输入类型“提交”。因此，如果您想继续使用 ajax 提交表单，则必须从您的函数中返回 false。在这种情况下，您的 javascript 将如下所示：

```
function captureText() {
    var value = $("#pasteText").val();
    //var sent = "../../lib/_add.php?data="+value;
    $.post('../../lib/_add.php', {data: value});
    return fasle;
} 
```

否则，一个简单的表格可以正常工作。

享受！。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:41:21.607

```
 function captureText() {
    var value = $("#pasteText").val();

    //var sent = "../../lib/_add.php?data="+value;
    $.post('../../lib/_add.php', {data: value})

    .done(function(data) {
                 alert("Data Loaded: " + data);
                          //  add some result confirmation code from php

                     });

    alert("data received");
   } 
```

检查jquery路径和php文件路径

# c# - Newtonsoft Json 解析器

> ID：15353717
> 
> 赞同：-3
> 
> 时间：2013-03-12T05:06:09.693
> 
> 标签：c#, json

我如何解析来自[https://graph.facebook.com/google/的以下结果](https://graph.facebook.com/google/)

```
{
   "about": "组织世界信息并使其普遍可访问和有用。",
   “签到”：22645，
   "company_overview": "Google 是一家专注于搜索服务的公开盈利公司。以数学术语“googol”命名，Google 在许多国际域中运营网站，其中访问量最大的是 www.google.com。Google 是因其快速、准确和易于使用而被公认为“世界上最好的搜索引擎”。公司还为包括广告商、内容发布商和网站管理员在内的企业客户提供具有成本效益的广告和广泛的创收服务搜索服务。Google 的突破性技术和持续创新服务于公司的使命，即“组织世界信息并使其普遍可访问和有用。”，
   “成立”：“1998”，
   “is_published”：是的，
   “地点”： {
      "street": "1600 Amphitheatre Parkway",
      "城市": "山景",
      “状态”：“CA”，
      “国家”：“美国”，
      “邮编”：“94043”，
      “纬度”：37.421956357856，
      “经度”：-122.08422985089
   },
   "mission": "Google 的使命是组织全球信息并使其普遍可用和有用。",
   "products": "查看完整列表：\nhttp://www.google.com/options/index.html",
   “talking_about_count”：60684，
   “用户名”：“谷歌”，
   “网站”：“www.google.com”，
   “were_here_count”：0，
   “类别”：“网站”，
   "id": "104958162837",
   “名称”：“谷歌”，
   "链接": "http://www.facebook.com/Google",
   “喜欢”：12341682，
   “覆盖”： {
      "cover_id": "10151163547067838",
      “来源”：“http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash3/s720x720/546101_10151163547067838_18950259_n.jpg”，
      “offset_y”：0，
      “偏移量_x”：0
   }
}

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:17:53.457

将该 JSON 粘贴到[http://json2csharp.com](http://json2csharp.com)中，这将为您提供映射的类，这些类将是：

```
public class Location
{
    public string street { get; set; }
    public string city { get; set; }
    public string state { get; set; }
    public string country { get; set; }
    public string zip { get; set; }
    public double latitude { get; set; }
    public double longitude { get; set; }
}

public class Cover
{
    public string cover_id { get; set; }
    public string source { get; set; }
    public int offset_y { get; set; }
    public int offset_x { get; set; }
}

public class RootObject
{
    public string about { get; set; }
    public int checkins { get; set; }
    public string company_overview { get; set; }
    public string founded { get; set; }
    public bool is_published { get; set; }
    public Location location { get; set; }
    public string mission { get; set; }
    public string products { get; set; }
    public int talking_about_count { get; set; }
    public string username { get; set; }
    public string website { get; set; }
    public int were_here_count { get; set; }
    public string category { get; set; }
    public string id { get; set; }
    public string name { get; set; }
    public string link { get; set; }
    public int likes { get; set; }
    public Cover cover { get; set; }
} 
```

稍后您可以将 Newtonsoft JSON 解析器用作：

```
RootObject myObject =  JsonConvert.DeserializeObject<RootObject>(jsonString); 
```

您应该看到[Json.Net 的文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:26:46.813

与其创建和支持多个表示 json 结构的类，我更喜欢将 json 反序列化为动态对象：

```
dynamic d = JObject.Parse(json);
//d.founded == "1998" 
```

# c# - ServiceStack OrmLite 命令超时

> ID：15353719
> 
> 赞同：6
> 
> 时间：2013-03-12T05:06:41.530
> 
> 标签：c#, servicestack, ormlite-servicestack

使用 IDbConnection.ExecuteSql 时如何设置命令超时？

```
IDbConnection db = ConnectionFactory.OpenDbConnection();
db.ExecuteSql("..."); 
```

如果我使用 IDbCommand.ExecuteSql（见下文）方法，我可以设置命令超时，但我会收到一堆关于不推荐使用的方法的警告。

```
IDbCommand comm = db.CreateCommand()
comm.CommandTimeout = 240;                    
comm.ExecuteSql("...");
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:31:22.660

随着最近的变化，OrmLite 不再`IDbCommand`直接提供围绕对象的 API（现在这些 API 在最新版本中都被内部化了）。

但是由于 OrmLite 只是 ADO.NET 底层[IDbConnection](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)和[IDbCommand](http://msdn.microsoft.com/en-us/library/system.data.idbcommand.aspx)接口的扩展方法，因此您可以在需要时轻松绕过 OrmLite 的扩展方法，直接使用它们，例如：

```
IDbConnection db = ConnectionFactory.OpenDbConnection();
IDbCommand cmd = db.CreateCommand();
cmd.CommandTimeout = 240;  
cmd.CommandText = "...";
cmd.ExecuteNonQuery(); 
```

或者，您可以使用以下命令设置全局 CommandTimeout：

```
OrmLiteConfig.CommandTimeout = 240; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-30T12:47:47.550

派对有点晚了，正如你在我的评论中看到的那样，我遇到了这个确切的问题。我的解决方案是扩展神话的建议并创建一个新的扩展方法：

```
public static partial class IDbConnectionExtensionMethods
{
    public static List<T> Query<T>(this IDbConnection self, string sql, int commandTimeout)
    {
        List<T> results = null;
        self.Exec((dbCmd) =>
            {
                dbCmd.CommandTimeout = commandTimeout;
                dbCmd.CommandText = sql;
                using (var reader = dbCmd.ExecuteReader())
                {
                    results = reader.ConvertToList<T>();
                }
            });

        return results;
    }   // eo Query<T>
}   // eo class IDbConnectionExtensionMethods 
```

# javascript - 如何为主机和端口设置环境变量

> ID：15353724
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:07:05.870
> 
> 标签：javascript, node.js, mongodb, port, hostname

我有这样的编码

```
var express = require('express');
var app=express();
var mongodb = require('mongodb');
var Db=require('mongodb').Db;
var Server=require('mongodb').Server;
var client=new Db('healthdata' , new Server('127.0.0.1',27017),{safe:false});

client.open(function(err,pClient)
{
  client.collection('userdetails',function(err,collection)
  {
    Ucollection=collection;
  });
});

app.listen(8080,'192.168.0.1'); 
```

我已经使用上面的端口和本地 IP 地址运行了我的应用程序，因此如何为节点和 mongodb 的主机名和端口设置环境变量。用编码解释我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T07:47:51.860

Node.js 能够使用`process.env.XXX`where`XXX`是您要访问的变量的名称来访问环境变量。

对于您的问题，一种通常的解决方案是定义一个环境变量，例如`PORT`，它包含端口号，然后将其作为`process.env.PORT`.

由于您不能保证在每种情况下都设置了此环境变量，因此您通常还会包含一个后备，例如：

```
var port = process.env.PORT || 3000; 
```

对于IP地址，基本相同：

```
var ip = process.env.IP || '192.168.178.1'; 
```

然后你可以这样做：

```
var ip = process.env.IP || '192.168.178.1',
    port = process.env.PORT || 3000;

app.listen(port, ip); 
```

希望这可以帮助。

# haskell - 缺少“可转换的 SqlValue UTCTime”？

> ID：15353725
> 
> 赞同：1
> 
> 时间：2013-03-12T05:07:11.833
> 
> 标签：haskell, hdbc

我试图将 a 转换`SqlValue`成`UTCTime`这样：

```
导入数据库.HDBC
导入 Data.Time (UTCTime)

getUTCTimeFromSql :: SqlValue -> UTCTime
getUTCTimeFromSql 时间 = fromSql 时间 :: UTCTime

```

但 GHC 抱怨说我缺少一个`Convertible`实例来执行此操作：

```
(Data.Convertible.Base.Convertible) 没有实例
                   SqlValue UTC 时间）
  由使用“fromSql”引起
可能的修复：
  添加实例声明
  (Data.Convertible.Base.Convertible SqlValue UTCTime)
表达式中：fromSql时间::UTCTime
在 `getUTCTimeFromSql' 的等式中：
    getUTCTimeFromSql 时间 = fromSql 时间 :: UTCTime

```

当我查看[HDBC 源代码](http://hackage.haskell.org/packages/archive/HDBC/2.3.1.2/doc/html/src/Database-HDBC-SqlValue.html#SqlValue)时，实例就`UTCTime`在那里。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:41:46.483

请参阅[丹尼尔的评论](https://stackoverflow.com/questions/15353725/convertible-sqlvalue-utctime-missing#comment21702250_15353725)以获取答案。

> 我怀疑您的 HDBC（和敞篷车）是针对与您使用的不同版本的时间构建的。因此，旧时间包的 UTCTime 有一个实例，但没有较新时间包的类型。ghc-pkg list time 是否报告多个已安装版本？

# ruby-on-rails - 当它应该在幕后运行时，Rails 会大声发布它的语法吗？

> ID：15353727
> 
> 赞同：8
> 
> 时间：2013-03-12T05:07:17.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, firebug

请参阅更新：底部的答案

原始问题：

我的页面中有一个`<script></script>`，当它运行时：-

```
<% Route.all.each do |route| %>
  var long = "<%= route.longitude %>";
  var lati = "<%= route.latitude %>";
  var title = "Route <%= route.route_number %> Stop <%= route.stop_number %>";
  var id = "<%= route.id %>";
<% end %> 
```

但是`Firebug`我在控制台中遇到了这个错误。

```
SyntaxError: syntax error
[Break On This Error]   
<% Route.all.each do |route| %>
 ^ 
```

**更新：**原来是一个萤火虫问题，按预期工作，但萤火虫会作为错误发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T19:00:45.267

这与您的环境有关（“生产”不显示详细的错误和调试信息）

或与萤火虫本身有关（上帝保佑他们，没有它就活不下去）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:14:48.653

尝试这个，

```
<% content_for :scripts do %>
<script type="text/javascript" charset="utf-8">

<< your script code >>

</script>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T12:41:00.133

我相信这是因为 js 变量 long、lati、title 和 id 定义了不止一次：Route 的每个实例路由都会生成所有这四个变量的*定义*。为避免这种情况，请在循环之前用空值 '' 定义它们一次，然后在循环中删除它们之前的“var”。

```
var long = ""; var lati = ""; var title = ""; var id = "";
<% Route.all.each do |route| %>
 long = "<%= route.longitude %>";
 lati = "<%= route.latitude %>";
 title = "Route <%= route.route_number %> Stop <%= route.stop_number %>";
 id = "<%= route.id%>";
<% end %> 
```

# ios - 使用嵌套上下文时如何自动设置核心数据关系

> ID：15353728
> 
> 赞同：11
> 
> 时间：2013-03-12T05:07:20.133
> 
> 标签：ios, objective-c, macos, cocoa, core-data

我正在努力找出一个体面的解决方案来解决在核心数据中使用嵌套托管对象上下文时出现的问题。以一个有两个实体Person 和Name 的模型为例，其中每个Person 与一个Name 是一对一的关系，而Name 的person 关系不是可选的。以前，在 Person 的`-awakeFromInsert`方法中，我会自动为新的 Person 创建一个 Name 实体：

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];

    NSManagedObjectContext *context = [self managedObjectContext];
    self.name = [NSEntityDescription insertNewObjectForEntityForName:@"Name" inManagedObjectContext:context];
} 
```

这在单个非嵌套托管对象上下文中工作得很好。但是，如果上下文有父上下文，则在保存子上下文时，会在父上下文中创建一个新的 Person 对象，并在复制原始 Person 的属性和关系*之前*`-awakeFromInsert`在此新对象上再次调用。因此，创建了另一个 Name 对象，然后在复制现有名称关系时“断开连接”。保存失败，因为对浮动名称的 now-nil关系的验证失败。这个问题在[这里](http://www.mikeabdullah.net/an--awakefrominsert-gotcha.html)和其他地方都有描述。*`person`*

 *到目前为止，我一直无法想出一个好的解决方案来解决这个问题。在 getter 方法中懒惰地创建关系实际上会导致同样的问题，因为当在父上下文中创建新 Person 时，内部 Core Data 机器会调用 getter。

我唯一能想到的就是放弃自动关系生成，并始终在创建 Person 的控制器类或`+[Person insertNewPersonInManagedObjectContext:]`仅由我的代码调用的便捷方法（例如）中显式创建关系，并且*始终*用于显式创建新 Person 对象的方法。也许这是最好的解决方案，但我宁愿不必如此严格地只允许使用一个方法来创建托管对象，而其他我无法控制且我无法使用的创建方法轻松检查/排除，存在。一方面，这将意味着多个 NSArrayController 子类来自定义它们创建托管对象的方式。

遇到此问题的其他人是否提出了一个优雅的解决方案，允许一个 NSManagedObject 在创建/插入时自动创建关系对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:58:34.160

想到的第一个想法是虽然`Name`' 的`person`关系是非可选的，但你没有说`Person`' 的`name`关系也是非可选的。是否可以创建一个`Person`with no `Name`，使用您的代码进行处理，然后`Name`在您实际需要时创建后者？

如果没有，一种简单的方法是在创建之前检查您是否在根上下文中`Name`：

```
- (void)awakeFromInsert
{
    [super awakeFromInsert];

    NSManagedObjectContext *context = [self managedObjectContext];
    if ([context parentContext] != nil) {
        self.name = [NSEntityDescription insertNewObjectForEntityForName:@"Name" inManagedObjectContext:context];
    }
} 
```

但这只有在您*总是*在子上下文上创建新实例并且您*永远不会*嵌套超过一层的上下文时才有效。

我可能会做的是创建一个像`insertNewPersonInManagedObjectContext:`你描述的方法。然后用类似下面的东西来补充它来处理为你创建实例的任何情况（即数组控制器）：

```
- (void)willSave
{
    if ([self name] == nil) {
        NSManagedObjectContext *context = [self managedObjectContext];
        Name *name = [NSEntityDescription insertNewObjectForEntityForName:@"Name" inManagedObjectContext:context];
        [self setName:name];
    }
} 
```

...当然不要打扰自定义`awakeFromInsert`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:21:50.580

我最终选择了方便的方法解决方案。我的应用程序中的所有 NSManagedObject 子类都有一个`+insertInManagedObjectContext:`方法。创建这些对象的实例（在我自己的代码中）*总是*使用该方法完成。在该方法中，我这样做：

```
+ (instancetype)insertInManagedObjectContext:(NSManagedObjectContext *)moc
{
    MyManagedObject *result = [NSEntityDescription insertNewObjectForEntityForName:@"MyEntityName" inManagedObjectContext:moc]
    [result awakeFromCreation];
    return result;
}

- (void)awakeFromCreation
{
    // Do here what used to be done in -awakeFromInsert.
    // Set up default relationships, etc.
} 
```

至于 NSArrayController 问题，解决它一点也不坏。我只是创建了一个 NSArrayController 的子类 overrode ，`-newObject`并将该子类用于我的应用程序中的所有相关 NSArrayController：

```
@implementation ORSManagedObjectsArrayController

- (id)newObject
{
    NSManagedObjectContext *moc = [self managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription entityForName:[self entityName]
                                              inManagedObjectContext:moc];
    if (!entity) return nil;

    Class class = NSClassFromString([entity managedObjectClassName]);
    return [class insertInManagedObjectContext:moc];
}

@end 
```*

# r - R中的时间差

> ID：15353731
> 
> 赞同：3
> 
> 时间：2013-03-12T05:07:45.070
> 
> 标签：r

我有一些看起来像这样的数据：

```
id    time
1     2013-02-04 02:20:59
1     2013-02-04 02:21:05
1     2013-02-04 02:21:24
2     2013-02-04 02:21:26
2     2013-02-04 02:22:19
2     2013-02-04 02:22:35 
```

我想取两个时间值之间每个 id 的时间差，例如：

```
id 1 02:21:05-02:20:59=00:00:06\. 
```

我怎样才能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:24:26.087

您应该`diff`按时完成`id`，然后使用`ifelse`填充第三列

```
df <- structure(list(id = c(1L, 1L, 1L, 2L, 2L, 2L), 
        time = structure(c(1359915659, 1359915665, 1359915684, 
        1359915686, 1359915739, 1359915755), class = c("POSIXct", 
        "POSIXt"), tzone = "")), .Names = c("id", "time"), row.names = c(NA, -6L), 
        class = "data.frame")
df
##   id                time
## 1  1 2013-02-04 02:20:59
## 2  1 2013-02-04 02:21:05
## 3  1 2013-02-04 02:21:24
## 4  2 2013-02-04 02:21:26
## 5  2 2013-02-04 02:22:19
## 6  2 2013-02-04 02:22:35

## here you are checking if that result is diff in time only when diff in id is 0
df$result <- c(0, ifelse(diff(df$id) == 0, diff(df$time), 0))

df
##   id                time result
## 1  1 2013-02-04 02:20:59      0
## 2  1 2013-02-04 02:21:05      6
## 3  1 2013-02-04 02:21:24     19
## 4  2 2013-02-04 02:21:26      0
## 5  2 2013-02-04 02:22:19     53
## 6  2 2013-02-04 02:22:35     16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:01:40.810

这里使用基本包的分组解决方案使用`by`和`transform`

```
 transform(dat, res = unlist(by(time,as.factor(id),
                            FUN=function(x)c(0,diff(x))))) 
```

这适用于因子 id ，它是分组列的自然类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:24:36.117

我认为这会起作用，但我对您的要求并不完全清楚......

```
df <- data.frame(id = rep(c(1,2), each=3), time=seq(from = as.POSIXct("2013-02-04 02:20:59"), to=as.POSIXct("2013-02-04 02:22:35"),length.out=6))

library(plyr)
df.diff <- ddply(df, .(id), summarise,
                 difference = diff(as.numeric(time)))
df.diff
# id diff
# 1  1 19.2
# 2  1 19.2
# 3  2 19.2
# 4  2 19.2 
```

# iphone - 使用 NSURL 方法的登录凭据问题

> ID：15353732
> 
> 赞同：0
> 
> 时间：2013-03-12T05:07:53.557
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我有一个附加密码的网络服务 url。当我通过提供正确的密码运行应用程序时，应用程序正在运行，同时我使用错误的凭据运行应用程序。该应用程序正在运行，我不知道摆脱这个问题。我的代码在这里：

```
 NSString *post =[[NSString alloc] initWithFormat:@"password=%@",[password text]];
        NSLog(@"PostData: %@",post);
        NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://myexample.com/Accountservice/Secure/ValidateAccess?password=abcd&type=1"]];

        NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
        [request setURL:url];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];

        NSURLRequest *request1 = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:post] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:10];

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request1 delegate:self startImmediately:YES];
        if(!connection){
            NSLog(@"connection failed");
        }
        else{
            NSLog(@"connection succeeded");
        } 
```

如果我给了'abcd'作为密码连接成功显示。如果我给出了错误的密码连接成功显示。我该如何解决这个问题？如果我输入了错误的密码，需要显示警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:13:14.000

这里的控制结构就是问题所在：

```
if(!connection){
    NSLog(@"connection failed");
}
else {
    NSLog(@"connection succeeded");
} 
```

这不检查坏连接，它检查连接对象是否等于 0 (nil)。显然，在上面的行中初始化它后，else 语句将始终记录下来，给您一种连接成功的错误印象。您应该成为连接的[委托人](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)，并改为响应适当的委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:15:21.770

问题可能与您使用的网址有关

1.  在浏览器中触发 url 并查看它返回的内容
2.  尝试使用单引号添加 url 参数 accesscode='abcd'

通过这种方式传递凭据不是一个好习惯。您可以使用带有一些有效加密的 POST 方法来防止可能发生的安全问题

**解决方案** 试试这个

```
 NSString *urlString=@"http://myexample.com/Accountservice/Secure/ValidateAccess?";
    self.responseData = [NSMutableData data];
    NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",userNameTextField.text,passwordTextField.text];
    NSData *postData=[post dataUsingEncoding:NSUTF8StringEncoding];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];
    NSURLConnection *connection0= [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection0 start]; 
```

# php - php irc bot 定期向频道发送消息

> ID：15353736
> 
> 赞同：1
> 
> 时间：2013-03-12T05:08:22.760
> 
> 标签：php, bots, irc

我按照一些教程从头开始创建机器人，基本功能工作正常，比如我可以连接，它响应命令，并将输出输出到网页。

我想要的是定期向频道发送消息，这些消息是我从某个带有 curl 的网站获得的。

$irc 和 $curl 只是带有设置的数组，而 date('s') 可以说是返回更新的函数。当然，我有为此工作的 curl 功能。$irc['delay'] 设置为 10，因此使用 sleep(1) 它应该每 10 秒发送一次更新。

问题是在第一分钟左右，它每 10 秒发送一次当前秒数，但它不听我设置的任何命令。它在第一个初始延迟之后执行命令，我不是它来自的地方
然后它仅在有人在频道上讲话时才向当前秒数（if 条件）发送消息。我猜它在等待这 128 个字节？但它确实会立即听命令。

```
while(1) {
    while($data = fgets($socket, 128)) {
        echo nl2br($data);
        flush();

        if ($curl['delay'] <= $d) { fputs($socket, "PRIVMSG ".$irc['channel']." :".date('s')."\n"); $d=0; };
        $d+=1;
        sleep(1);

        $ex = explode(' ', $data);
        if($ex[0] == "PING") fputs($socket, "PONG ".$ex[1]."\n");
        $command = str_replace(array(chr(10), chr(13)), '', $ex[3]);
        switch ($command) {
            case ":!say" : fputs($socket, "PRIVMSG ".$ex[2]." :Hello!\n"); break;
            case ":!off" : break 3;
        };
    };
} 
```

好吧，我希望它既响应命令，又定期自动发送消息提取数据。但我不明白它的行为，甚至不知道我想要什么是可能的 php

就像 Ranty 建议的那样
：它会说一次日期，然后下一次报告至少需要一分钟。如果我说任何命令，它会进一步延迟它。

10:39 Moninal 我来了
10:39 Moninal 39:24
10:40 Moninal 40:26

10:41 Moninal 我来了
10:41 Moninal 41:05
10:41 Gregos !sayit
10:41 Moninal 你好！
10:41 Gregos !sayit
10:41 Moninal 你好！
10:42 Moninal 42:51

在它发送第二条消息后，我第一次在网页上得到输出，下一个报告每 61 秒发送一次，而不是 10 秒。

10:42 莫纳尔 42:51
10:43 莫纳尔 43:52
10:44 莫纳尔 44:53

如果我在内部循环中添加中断：对于第一分钟，我每 10 秒收到一次报告，但所有发送的命令都在第一分钟结束时触发，就像以前一样。在那之后，命令起作用，但每 61 秒再次报告一次。

也许这与我的服务器配置有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:00:26.870

我想问题是你在`while($data = fgets($socket, 128))`循环中拥有所有逻辑。如果您考虑一下，*如果聊天中发生了某些事情，*就会执行您的逻辑。因此，当您启动脚本时，它执行正常，因为它读取那里的数据（我假设是这样），但是在读取该数据之后，它只在新数据上执行。

现在它只在聊天中打印秒数，因为它等待 10 次 128 字节（你的意思是 10 秒），因为只有当内部 while 循环条件始终为真（如果它每秒执行一次）时，它才会是 10 秒。

您可以尝试将一些逻辑移到内部 while 循环之外。我还为您更改了 curl 时间 - 让它休眠 1 秒并在计数器上加 1 的方式 - 这是不可靠的。您可以简单地将当前时间与上次请求的时间进行比较。

```
while(1) {
    flush();

    if ($curl['next_request'] <= time()) {
        fputs($socket, "PRIVMSG ".$irc['channel']." :".date('s')."\n");
        $curl['next_request'] = time() + $curl['delay'];
    };

    while($data = fgets($socket, 128)) {
        echo nl2br($data);
        $ex = explode(' ', $data);
        if($ex[0] == "PING") fputs($socket, "PONG ".$ex[1]."\n");
        $command = str_replace(array(chr(10), chr(13)), '', $ex[3]);
        switch ($command) {
            case ":!say" : fputs($socket, "PRIVMSG ".$ex[2]." :Hello!\n"); break;
            case ":!off" : break 3;
        };
    };

    sleep(1);
} 
```

它可能会同时响应所有命令，而不是每秒 1 个，如果你想改变它，你可以尝试在内部 while 的末尾添加一个 break。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:34:15.677

好吧，经过一天的痛苦，我终于找到了愚蠢的原因和解决方案。基本上延迟 1 分钟的原因是 fget 命令 while($data = fgets($socket, 128));
解决方法是设置 stream_set_timeout($socket,1); 在循环之前。好吧，我也最终设置了 nginx 服务器而不是 apache。我不确定这是否有帮助。
另外我想我可以在 stream_set_timeout($socket,1); 中设置时间 控制发送消息的最小间隔。

```
$next=time();
stream_set_timeout($socket,1);
while(1) {

    $data = fgets($socket, 128);
    echo nl2br($data);

    $ex = explode(' ', $data);
    if($ex[0] == "PING") fputs($socket, "PONG ".$ex[1]."\n");
    if (isset($ex[3])) $command = str_replace(array(chr(10), chr(13)), '', $ex[3]);

    switch ($command) {
        case ":!sayit" : 
            $msg = NULL; for ($i = 4; $i < count($ex); $i++) { $msg .= $ex[$i] . ' '; }
            fputs($socket, "PRIVMSG ".$ex[2]." :".$msg."\n"); 
            break;
        case ":!off" :
          fputs($socket, "PRIVMSG ".$irc['channel']." : Bye\n");
          fputs($socket,"QUIT Client Disconnected!\n");
          die('Exited!');
    };

    if ($next <= time()) {
        fputs($socket, "PRIVMSG ".$irc['channel']." :".date('H:i:s')."\n");
        echo "PRIVMSG ".$irc['channel']." :".date('H:i:s')."<br />";
        $next = time() + $curl['delay']; 
    };
    flush(); 
}; 
```

好吧，它不包括所有的连接设置。这很容易找到怎么做。

# javascript - jQuery 如何在其 $.ajax 方法中执行 async:false ？

> ID：15353737
> 
> 赞同：1
> 
> 时间：2013-03-12T05:08:30.590
> 
> 标签：javascript, jquery, xcode, asynchronous

我在[这里有一个类似的问题](https://stackoverflow.com/questions/15351918/synchronous-javascript)，但我想我会以不同的方式问它以撒下更大的网。我还没有遇到可行的解决方案（据我所知）。

我希望 XCode 发出 JavaScript 命令并从 executeSql 回调中获取返回值。

根据我一直在阅读的研究，我无法发出同步的 executeSql 命令。我最接近的是尝试旋转锁定，直到我收到回调。但这也没有奏效。也许我的旋转没有给回调机会回来（见下面的代码）。

问：当涉及到 Ajax 时，jQuery 怎么会有 async=false 参数？XHR 与 executeSql 命令有什么不同吗？

到目前为止，这是我的概念验证：（请不要笑）

```
// First define any dom elements that are referenced more than once.
var dom = {};
dom.TestID = $('#TestID'); // <input id="TestID">
dom.msg = $('#msg'); // <div id="msg"></div>

window.dbo = openDatabase('POC','1.0','Proof-Of-Concept', 1024*1024); // 1MB

!function($, window, undefined) {
    var Variables = {}; // Variables that are to be passed from one function to another.

    Variables.Ready = new $.Deferred();
    Variables.DropTableDeferred = new $.Deferred();
    Variables.CreateTableDeferred = new $.Deferred();
    window.dbo.transaction(function(myTrans) {
        myTrans.executeSql(
            'drop table Test;',
            [],
            Variables.DropTableDeferred.resolve()
            // ,WebSqlError
        );
    });
    $.when(Variables.DropTableDeferred).done(function() {
        window.dbo.transaction(function(myTrans) {
            myTrans.executeSql(
                'CREATE TABLE IF NOT EXISTS Test' 
                + '(TestID Integer NOT NULL PRIMARY KEY'
                + ',TestSort Int'
                + ');',
                [],
                Variables.CreateTableDeferred.resolve(),
                WebSqlError
            );
        });
    });

    $.when(Variables.CreateTableDeferred).done(function() {
        for (var i=0;i < 10;i++) {
            myFunction(i);
        };
        Variables.Ready.resolve();
        function myFunction(i) {
            window.dbo.transaction(function(myTrans) {
                myTrans.executeSql(
                    'INSERT INTO Test(TestID,TestSort) VALUES(?,?)',
                    [
                        i
                        ,i+100000
                    ]
                    ,function() {}
                    ,WebSqlError
                )
            });
        };
    });
    $.when(Variables.Ready).done(function() {
        $('#Save').removeAttr('disabled');
    });
}(jQuery, window);

!function($, window, undefined) {
    var Variables = {};

    $(document).on('click','#Save',function() {
        var local = {};
        local.result = barcode.Scan(dom.TestID.val());
        console.log(local.result);
    });

    var mySuccess = function(transaction, argument) {
        var local = {};

        for (local.i=0; local.i < argument.rows.length; local.i++) {
            local.qry = argument.rows.item(local.i);
            Variables.result = local.qry.TestSort;
        }
        Variables.Return = true;
    };
    var myError = function(transaction, argument) {
        dom.msg.text(argument.message);
        Variables.result = '';
        Variables.Return = true;
    }

    var barcode = {};
    barcode.Scan = function(argument) {
        var local = {};

        Variables.result = '';
        Variables.Return = false;
        window.dbo.transaction(function(myTrans) {
            myTrans.executeSql(
                 'SELECT * FROM Test WHERE TestID=?'
                ,[argument]
                ,mySuccess
                ,myError
            )
        });
        for (local.I = 0;local.I < 3; local.I++) { // Try a bunch of times.
            if (Variables.Return) break; // Gets set in mySuccess and myError
            SpinLock(250);
        }
        return Variables.result;
    }

    var SpinLock = function(milliseconds) {
        var local = {};
        local.StartTime = Date.now();
        do  {
        } while (Date.now() < local.StartTime + milliseconds);
    }

    function WebSqlError(tx,result) {
        if (dom.msg.text()) {
            dom.msg.append('<br>');
        }
        dom.msg.append(result.message);
    }

}(jQuery, window); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:22:40.533

> XHR 与 executeSql 命令有什么不同吗？

有点儿。

> 当涉及到 Ajax 时，jQuery 如何具有 async=false 参数？

Ajax，或者更确切地说[`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)，并不严格限制为异步 —— 不过，正如[最初的首字母缩写词](http://en.wikipedia.org/wiki/Ajax_%28programming%29)所暗示的那样，它是首选。

`jQuery.ajax()`的`async`选项与 的`boolean async`参数相关[`xhr.open()`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#open%28%29)：

```
void open(
   DOMString method,
   DOMString url,
   optional boolean async,    // <---
   optional DOMString user,
   optional DOMString password
); 
```

[Web SQL 数据库](http://www.w3.org/TR/webdatabase/)规范还定义了同步[数据库 API](http://www.w3.org/TR/webdatabase/#synchronous-database-api)。但是，它[仅适用](http://www.w3.org/TR/webdatabase/#sql)于`WorkerUtils`主要为[Web Workers](http://www.w3.org/TR/workers/#apis-available-to-workers)定义的接口的实现：

```
window.dbo = openDatabaseSync('POC','1.0','Proof-Of-Concept', 1024*1024);

var results;
window.dbo.transaction(function (trans) {
    results = trans.executeSql('...');
}); 
```

如果运行脚本的环境没有实现这个接口，那么你就被异步 API 卡住了，`return`结果是不可行的。由于您怀疑的原因，您不能强制阻塞/等待异步任务：

> 也许我的旋转没有给回调机会回来（见下面的代码）。

# sitecore - TDS 在环境之间同步站点核心成员资格和安全性，为每个环境指定部署的项目

> ID：15353740
> 
> 赞同：4
> 
> 时间：2013-03-12T05:08:47.687
> 
> 标签：sitecore, tds

我正在评估 TDS 看它是否能解决我们的要求，以下是我需要帮助的问题；

**角色和成员资格** 我们喜欢使用 TDS 在环境之间同步用户、角色、安全设置等，有哪些选项可以支持此要求？

**部署站点核心项目** 我们有多个环境，可以分为登台和生产，我们喜欢使用 DeployOnce 或 AlwaysDeploy 属性指定 TDS 为特定环境部署哪些项目，即；1\. 暂存环境：将 AlwaysUpdate 设置为所有项目 2\. Prod 环境：为某些项目设置 DeployOnce，为其他项目设置 AlwaysUpdate 或仅包含要部署的项目。是否有任何选项可以指定为每个环境部署哪些项目？我能想到的一种可能的解决方案是为每个环境创建两个不同的 TDS 项目，但是可能还有其他方法。

**自动从站点核心同步到 TDS 项目**：是否有 MSBuild 目标可用于从构建脚本将站点核心项目同步到 TDS 项目。同样，可以在 Visual Studio 中执行的其他命令，例如获取 Sitecore 项目、与 SiteCore 同步、部署等，它们可以从构建脚本中触发吗？

**限制同步方向**：是否可以指定项目只能在一个环境中从 sitecore 同步到 TDS 项目，并且相同的项目可以在另一个环境中同步任一方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:06:26.157

**角色和成员资格：**不，目前无法将用户和角色引入 TDS，因为它们没有作为 Sitecore 项目存储在数据库中。将引入每个项目的安全设置，因为它存储在项目本身的字段中。Hedgehog 在此视频的 QnA 部分中提到了这一点：- [http://www.youtube.com/watch?v=Sbx7bk4UEO0&feature=player_detailpage#t=2530s](http://www.youtube.com/watch?v=Sbx7bk4UEO0&feature=player_detailpage#t=2530s)（参见 42.10 ）

**部署站点核心项目：**我不知道有一种方法可以根据这样的配置以不同的方式设置部署属性。一种可能性是设置“AlwaysUpdate”一次，构建到所有环境，然后在您不想继续推送到生产环境的环境中设置“从配置中排除”属性，这样它就不会再次被推送。不理想，但它是一个替代方案。

**从 sitecore 到 TDS 项目的自动同步：**目前您无法利用 TDS Web 服务从 TDS 本身之外执行这些操作。

**限制同步方向：**同样，我不知道。如果站点上安装了 Sitecore 连接器，您可以执行所有 TDS 操作，但您不能将其限制在一个方向上，要么双向，要么什么都不做。关于这一点，我能想到的最接近的事情是 techphoria414 的关于将构建限制在非调试环境中的博客文章......但这并不完全是你所追求的。 [http://www.techphoria414.com/Blog/2011/September/Failsafe-for-non-Debug-TDS-Builds](http://www.techphoria414.com/Blog/2011/September/Failsafe-for-non-Debug-TDS-Builds)

# javascript - Ajax 从 php 中获取价值？

> ID：15353744
> 
> 赞同：2
> 
> 时间：2013-03-12T05:09:08.950
> 
> 标签：javascript, php, jquery, ajax

我正在尝试使用 ajax 添加 div 以显示错误消息。但是我每次都得到 null 而不是正确的错误消息。空值是

```
<?php echo json_encode($_SESSION['msg']['login-err']); ?>; 
```

我怎样才能解决这个问题？为什么显示为空？

JavaScript：

```
 $(document).ready(function(){
            $("#open").click(function(){
                $("#register").fadeIn(500);
            });
            $("#close").click(function(){
                $("#register").fadeOut(500);
            });
            $("#log").click(function(){
                username=$("#username").val();
                password=$("#password").val();
                submit=$("#log").val();
                $.ajax({
                    type: "POST",
                    url: "",
                    data: "submit="+submit+"&username="+username+"&password="+password,
                    success: function(html) {
                        if(html==true) {

                        }
                        else {
                            $("#error-log").remove();
                            var error_msg = <?php echo json_encode($_SESSION['msg']['login-err']); ?>;
                            $("#s-log").append('<div id="error-log" class="err welcome dismissible">'+error_msg+'</div>');
                            <?php unset($_SESSION['msg']['login-err']); ?>
                        }
                    }
                });
                return false;
            }); 
```

成员.php：

```
<?php if(!defined('INCLUDE_CHECK')) header("Location: ../index.php"); ?>
<?php

require 'connect.php';
require 'functions.php';
// Those two files can be included only if INCLUDE_CHECK is defined

session_name('Login');
// Starting the session

session_set_cookie_params(7*24*60*60);
// Making the cookie live for 1 week

session_start();

if($_SESSION['id'] && !isset($_COOKIE['FRCteam3482Remember']) && !$_SESSION['rememberMe'])
{
    // If you are logged in, but you don't have the FRCteam3482Remember cookie (browser restart)
    // and you have not checked the rememberMe checkbox:

    $_SESSION = array();
    session_destroy();

    // Destroy the session
}

if(isset($_GET['logoff']))
{
    $_SESSION = array();
    session_destroy();

    header("Location: ../../index.php");
    exit;
}

if($_POST['submit']=='Login')
{
// Checking whether the Login form has been submitted

$err = array();
// Will hold our errors

if(!$_POST['username'] || !$_POST['password'])
    $err[] = 'All the fields must be filled in!';

if(!count($err))
{
    $_POST['username'] = mysql_real_escape_string($_POST['username']);
    $_POST['password'] = mysql_real_escape_string($_POST['password']);
    $_POST['rememberMe'] = (int)$_POST['rememberMe'];

    // Escaping all input data

    $row = mysql_fetch_assoc(mysql_query("SELECT id,usr FROM members WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'"));

    if($row['usr'])
    {
        // If everything is OK login

        $_SESSION['usr']=$row['usr'];
        $_SESSION['id'] = $row['id'];
        $_SESSION['rememberMe'] = $_POST['rememberMe'];

        // Store some data in the session

        setcookie('FRCteam3482Remember',$_POST['rememberMe']);
    }
    else $err[]='Wrong username and/or password!';
}

if($err) {
    $_SESSION['msg']['login-err'] = implode('<br />',$err);
    // Save the error messages in the session

    header("Location: index.php");
}
else
    header("Location: workspace/index.php");
    echo 'true';
exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:43:07.150

通常，AJAX 请求向 PHP 页面发出请求，该页面**返回一个值**。它通常是 JSON，但不一定是。这是一个例子。

```
$.ajax({
    type: "POST",
    url: "a request URL",
    data:{
        'POST1':var1,
        'POST2':var2
        }
    success: function(result)
        {
        //Do something based on result. If result is empty. You have a problem.
        }
}); 
```

您的 PHP 页面**并不总是返回值**，因此很难知道发生了什么。您的解决方法是在您的页面返回空时使用 javascript 变量来保存回显的 PHP 数据。但这不适用于您的情况。将 PHP 变量回显到 javascript 中有时可能会很好，但这不是一个好的做法。

它不适用于您的情况，因为您的 javascript 变量是在首次加载页面时设置的。此时变量`$_SESSION['msg']['login-err']`尚未设置（或可能包含一些不相关的数据），这也是您的 javascript 变量也将包含的内容。

当您按照我提到的方式进行操作时，您还可以使用`console.log(result)`或之类的函数`alert(result)`来手动查看 PHP 页面的结果并修复任何问题。

我建议做类似以下的事情。

```
if($err) {
    $_SESSION['msg']['login-err'] = implode('<br />',$err);
    echo $_SESSION['msg']['login-err'];
}
else
    echo 'success';
} 
```

Javascript

```
$.ajax({
        type: "POST",
        url: "",
        data: "submit="+submit+"&username="+username+"&password="+password,
        success: function(response) {
            if(response=='success') {
                alert("Woo! everything went well.  What happens now?");
                //do some stuff
            }
            else {
                alert("oh no, looks like we ran into some problems.  Response is"+ response);
                $("#error-log").remove();
                var error_msg = response;
                $("#s-log").append('<div id="error-log" class="err welcome dismissible">'+error_msg+'</div>');
            }
        }
}); 
```

这可能不一定完全按照您的预期工作，但对您来说是一个良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:37:40.117

通过查看代码，您似乎是先进行重定向，然后再发送响应。

下面的代码片段有问题

```
if($err) {
    $_SESSION['msg']['login-err'] = implode('<br />',$err);
    // Save the error messages in the session

    header("Location: index.php");
}
else
    header("Location: workspace/index.php");
    echo 'true';
exit;
} 
```

# verilog - Verilog 多个信号在 Always 块的灵敏度列表中发生变化

> ID：15353746
> 
> 赞同：3
> 
> 时间：2013-03-12T05:09:13.847
> 
> 标签：verilog

我想知道只有当敏感度列表中的多个信号一起变化时，才可能执行 always 块。

如，假设我有一个信号'in'和另一个'posedge clk'。我希望在两个信号都发生变化时执行 always 块。有没有可能，如果有，它的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T06:12:43.030

一般来说，没有办法做到这一点，因为这实际上并没有映射到人们通常会合成的任何类型的标准逻辑单元。但是，如果您描述您的最终目标是什么，我相信有人可以在仍然使用可综合逻辑的同时为您指出正确的方向。我很难想象你会想要这样一个街区做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:43:32.740

**这是对原始问题的回答，而不是评论中揭示的问题**

正如@Tim 所提到的，没有可以做到这一点的硬件结构。`always @(posedge clk)`创建触发器，在 clk 的边缘对数据进行采样。

`always @*`块创建组合逻辑，当分配或选择信号的右侧发生变化时，由模拟器评估。

如果您有多个由 D 型触发器驱动的 1 位信号，您可以`^`对输入 (D) 和输出 (Q) 进行异或 ( ) 以创建一个 1 个时钟周期宽的信号，指示值已更改。可以组合这些变化信号以创建启用信号。用作触发器的选择或启用。

```
always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    //reset condition
  end
  else if (enabled)
    //Enabled condition
  end
  // no final else, everything will holds its value
end 
```

或者可以作为锁存器的使能：

```
//synopsys async_set_reset "rst_n"
always @* begin
  if (~rst_n) begin
    // Reset 
  end
  else if (latch_open) begin
    //next datavalue
  end
end 
```

# perl - 我想在 perl 中创建一个长度从 1 到 255 的变量

> ID：15353750
> 
> 赞同：0
> 
> 时间：2013-03-12T05:09:32.600
> 
> 标签：perl, variables

就像我们如何使用正则表达式匹配变量一样，我想使用正则表达式将可变长度分配给我的变量。

例如：让我们使用一个计数器`$i`，它`$i`在 for 循环中运行

```
for($i=0; $i < 256; $i++)
{
   $myVariable = a{$i};
} 
```

我想要`$myVariable`不同的长度，基于计数器变量`$i`

例如，如果`$i`是 5，那么`$myVariabe`应该是`"aaaaa"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:11:22.553

```
for my $i (1..255) {
   my $myVariable = 'a' x $i;
   ...
} 
```

或者

```
my $myVariable;
for my $i (1..255) {
   $myVariable .= 'a';
   ...
} 
```

# gevent - gevent 如何与 threading.local 数据交互？

> ID：15353753
> 
> 赞同：7
> 
> 时间：2013-03-12T05:09:50.810
> 
> 标签：gevent

存储在 threading.local 中的数据对于特定的协程是唯一的，还是对于 python 线程来说仍然是唯一的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T02:53:05.217

根据[http://www.gevent.org/gevent.monkey.html](http://www.gevent.org/gevent.monkey.html)上 gevent.monkey 的文档，线程和线程模块成为基于 greenlet 的。“线程本地存储变成了greenlet本地存储。”

# vectorization - Xeon Phi 上的 loaddup_pd/unpacklo_pd

> ID：15353754
> 
> 赞同：3
> 
> 时间：2013-03-12T05:09:54.280
> 
> 标签：vectorization, sse, avx, intel-mic, xeon-phi

如果我在 512 宽的 SIMD 向量中有以下双精度数，例如在 Xeon Phi 寄存器中：

```
m0 = |b4|a4|b3|a3|b2|a2|b1|a1| 
```

是否有可能使它成为：

```
m0_d = |a4|a4|a3|a3|a2|a2|a1|a1| 
```

使用一条指令？另外，由于双精度数没有按位内在函数，这仍然是实现上述目标的有效方法吗？

```
m0_t = _mm512_swizzle_pd(m9,_MM_SWIZ_REG_CDAB);//m0_t->|a4|b4|a3|b3|a2|b2|a1|b1|
__m512d res = _mm512_mask_or_epi64(m0,k1,zero,m0_t);//k1 is 0xAA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:38:15.317

可以实现如下：

```
m0_d = _mm512_mask_swizzle_pd(m0,0xAA,m0,_MM_SWIZ_REG_CDAB); 
```

看起来 swizzle 操作是有限的，但是使用掩码变体我们也可以实现其他排列。

# facebook - 使用直接 URL 的共享按钮（提要）打开整个 Facebook 页面，而不是在弹出窗口中

> ID：15353756
> 
> 赞同：0
> 
> 时间：2013-03-12T05:10:01.373
> 
> 标签：facebook, facebook-javascript-sdk

我正在我的 facebook 应用程序上实现一个分享按钮（我不想使用 Like）我正在使用这个 url：

```
 http://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=http://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  message=Facebook%20Dialogs%20are%20so%20easy!&
  redirect_uri=http://www.example.com/response&
  display=popup 
```

我从[这个文档](https://developers.facebook.com/docs/reference/dialogs/feed/)和[显示模式中得到它](http://developers.facebook.com/docs/reference/dialogs/#display)

现在，当我按下链接时，Facebook 对话框以全页模式运行，带有 Facebook 页眉和页脚，而不是“弹出窗口”。

任何人都知道我怎样才能让 Facebook 对话框显示在弹出窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:49:20.503

# themes - Tumblr：在菜单中显示页面链接？

> ID：15353764
> 
> 赞同：0
> 
> 时间：2013-03-12T05:10:30.643
> 
> 标签：themes, blogs, tumblr

我创建了一个自定义 Tumblr 主题，并且在我的博客上有许多页面。我想在模板顶部附近创建一个导航菜单，但不确定如何执行此操作。

我添加了以下几行：

```
 {block:HasPages} {/block:HasPages}
        {block:Pages} {/block:Pages} 
```

但这没有效果。

有谁知道实现这一目标的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:31:43.003

你应该能够做到

```
{block:HasPages}
  {block:Pages}
    <a href="{URL}">{Label}</a>
  {/block:Pages}
{/block:HasPages} 
```

# jquery - 使用 jQuery Mobile 1.3 列表视图保存滚动位置

> ID：15353766
> 
> 赞同：3
> 
> 时间：2013-03-12T05:10:36.697
> 
> 标签：jquery, jquery-mobile

我对此进行了相当多的研究，但未能找到解决方案。我正在使用 jquery mobile 1.3

我有一个从数据库填充的动态嵌套列表视图，当用户浏览列表视图时 - 用户向下滚动，单击返回时，用户不会返回到最后一个位置，它会转到屏幕顶部。

当用户浏览嵌套列表视图并保存它时，有什么方法可以获取滚动位置，以便当用户单击返回时我可以使用它可以调用 $.mobile.silentScroll。

请指教，

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T10:17:56.900

## 解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/5zZzz/](http://jsfiddle.net/Gajotres/5zZzz/)

```
// Detect click on a li element and store its coordinate, change page to another
$(document).on('pagebeforeshow', '#index', function(){  
    $('#test-list li').on('click', function(){   
        storePosition.topCoordinate =  $(this).offset().top;
        $.mobile.changePage('#second');
    });    
});

// If there's a stored position use silentscroll function and scroll to correct location
$(document).on('pageshow', '#index', function(){      
    if(storePosition.topCoordinate !== null) {
        $.mobile.silentScroll(storePosition.topCoordinate);
    }
});

// Store position location
var storePosition = {
    topCoordinate : null
} 
```

## 介绍

在我描述您需要了解的其他解决方案之前，这不是错误，也没有完美的解决方案。问题是，要动画到另一个页面的过渡，视口必须位于页面顶部，以便当前页面和过渡页面垂直对齐。

如果您在一个页面（例如 1000 像素）上的长列表中途而您要转移到的页面只有几百像素高，那么当前页面将正确地在屏幕上显示动画，但新页面将不会显示为它会在视口上方。

有两个真正可行的解决方案：

## 1\. iScroll及其jQuery Mobile派生iScrollview

iScroll 主页：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

iScrollview 主页：[https ://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

iScroll 是一种 javascript，它可以在 Web 浏览器的窗口中滚动内容，其行为与 iPhone 和 Android 等移动设备上的原生滚动非常相似。这意味着您可以使用类似本机的滚动条和物理在浏览器中滚动窗口。

这也是我们当前问题的解决方案。因为 iScroll 实现页面会占据 100% 的页面高度，不管 listview 滚动多远。这也是返回时 listview 仍将保持在同一位置的原因。

当然，如果你想实现这个解决方案，你应该选择 iScrollview 实现。您仍然可以实现 iScroll，但它会花费您更多的时间。

## 2.无声滚动

就像在我的顶级示例中一样：

官方文档：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html)

这个 jQuery Mobile 功能也是我们最初遇到这个问题的原因。在触发页面转换之前，原始页面会静默滚动到顶部。

在我们的例子中，当 listview 被选中时，必须记住它的位置（这里你会找到页面转换期间存储数据/参数的解决方案，只需搜索章节：页面转换之间的数据/参数操作）在页面更改之前。在这种情况下，当我们返回上一页时，我们可以使用 pagebefpreshow 事件在页面显示之前静默滚动到底部。

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

这是一个无声滚动的工作示例：http: [//jsfiddle.net/Gajotres/2xfrM/](http://jsfiddle.net/Gajotres/2xfrM/)

## 更多信息

如果您想了解有关此主题的更多信息，请查看**[本文](http://www.gajotres.net/prevent-scroll-to-the-top-before-page-transition-in-jquery-mobile/)**，您还将找到工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:08:32.337

Gajotres 有一个很好的答案，我只是使用这种方式（我用 saveScrollTop 类标记了页面，这是必要的）：

```
$(document).on('pageshow',function(){
    if ($.mobile.activePage.hasClass('saveScrollTop')
        && $.mobile.activePage.data('scroll')){
        $.mobile.silentScroll($.mobile.activePage.data('scroll'));
    } else {
        $.mobile.silentScroll(0);
    }
});

$(document).on('pagebeforechange',function(){
    if ($.mobile.activePage && $.mobile.activePage.hasClass('saveScrollTop')){
        $.mobile.activePage.data('scroll',$(window).scrollTop());
    }
}); 
```

不幸的是，jQuery 滚动窗口而不是页面 div 内的内容，这就是问题的根源。它保存最后滚动的位置并将其设置在下一页中。如果您不在新页面上滚动并返回，它可以正常工作。但是如果两个页面都比屏幕大，那就完全一团糟了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:17:34.977

您可以在 jQuery mobile 中使用[.offset()跟踪位置。](http://api.jquery.com/offset/)您可以将值保存到 a 中`sessionStorage`，当用户返回页面时，从中检索值`sessionStorage`并执行静默滚动。

保存如下

```
sessionStorage.pixelFromTop = $("#ordSrcCnt").offset(); 
```

用户回来后滚动如下

```
$.mobile.silentScroll(parseInt(sessionStorage.scrollToOrderRow)); 
```

希望这足以让您入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T19:26:08.120

如上所述，对我有用的是：

```
$(document).on("pageshow","#page",function (event) {
if (Listnumber>0)$.mobile.silentScroll($("#"+listnumber).offset().top-50);
}); 
```

我有一个动态生成的列表视图（来自 xml 文件），每个 li-item 都有一个 id。我将 id 放在 var listnumber 中，以便在单击 listview 查看详细信息页面后返回 listview 页面时可以检索它。首次访问 listviewpage 时，listnumer var 为 0，因此不会进行任何滚动。我在偏移后做了-50，所以我滚动到我点击的列表项，因为否则列表项将不可见。hth 因为我花了几个小时才弄明白...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T17:34:42.907

这是修复它的最佳方法。

把它放在页眉中：

```
<script>
  $(function() { 
    $.mobile.defaultHomeScroll = 0;
  });
</script> 
```

这样它直到永远不会滚动回顶部。

# runtime-error - TTS 语音已禁用

> ID：15353769
> 
> 赞同：0
> 
> 时间：2013-03-12T05:11:01.013
> 
> 标签：runtime-error, text-to-speech, voice

我的 Windows 操作系统上安装了许多 Voices。我正在尝试将这些声音用于文本转语音 (TTS)。其中许多我无法使用，并显示以下错误消息：“所选语音未安装或已禁用”

我怎样才能“启用”这些声音？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:18:19.853

有一天这对我有帮助

控制面板中语音工具中的文本转语音选项卡显示了每个 TTS 引擎的选项。除了一般选项外，每个引擎都可以有一组不同的特定功能。因此，并非所有生成的对话框看起来都一样。可能没有包含特殊功能，并且某些属性按钮将没有关联的对话框。

设置您的硬件 注意：我假设您在控制面板中使用经典视图。要更改视图，请执行以下步骤：

```
Click Start, and then click Control Panel.
In Control Panel, click Switch to Classic View or Switch to Category View. 
```

**设置扬声器** 扬声器的设计和用途差异很大。有关硬件和软件的详细信息，请参阅扬声器手册。但是，大多数型号都可以以类似的方式安装。

**要设置扬声器，请按以下步骤操作：**

```
Locate the sound connections and connect the speaker jack to the computer. Most computers use an internal sound card and often the connections are in the back of the computer. These are a series of connections the same size and diameter as the speaker jack. In many cases there are two sound out connections:
    One will be labeled as a line-out connection. Most speakers that require a separate power supply (such as an electrical (AC) adapter or batteries) should use this connection. It is also used to export amplified sound to recording devices including recordable CDs and tape cassette systems.
    The other connection is for the non-powered speakers. Because the signal is boosted by the computer, powered speakers may be damaged if connected. 
Plug the speaker into the proper connection.
To test the connection, follow these steps:
    Click Start, click Control Panel, and then double-click Speech.
    On the Text-to-Speech tab, click Preview Voice to hear the currently selected voice. The text is spoken and the words are highlighted as they are spoken. If the speakers are working properly, you will hear the spoken words. 
If you do not hear sound after you connect the speakers, see the "Possible Text-to-Speech Problems" section of this article for troubleshooting procedures. 
```

**选择音频输出设备** 要选择音频输出设备，请执行以下步骤：

```
Click Start, click Control Panel, and then double-click Speech.
On the Text-to-Speech tab, click Audio Output.
Select either Use preferred audio output device or Use this audio output device.
    Use preferred audio device sets the output device as the default for the system. Select this option if you want to use the same output device for speech as all other sound for the system. It is also the default option for Speech properties. Often, computers will have only one output device, such as a pair of speakers. The default device is designated in the appropriate sounds or multimedia properties in Control Panel for each operating system. Additional information for the specific panel is available through the associated Help files.
    Use this audio output device allows you to select another device for speech programs only. The drop-down list is active if other devices are available. In this drop-down list, select the device that you want. This does not change the default device for other audio programs. For example, you may want all speech output to go through your headset rather than the speakers. 
```

**设置音频输出设备选项** 默认情况下，此选项处于禁用状态。但是，其他语音引擎可能包括音频线路输出选项的高级属性。如果是这样，音频输出将可用。按照屏幕上的说明或针对特定引擎单独记录的说明进行操作。

**要设置音频输出设备选项，请执行以下步骤：**

```
Click Start, click Control Panel, and then double-click Speech.
On the Text-to-Speech tab, click Audio Output.
Follow the instructions presented on the screen. 
```

*配置文本转语音选项* 确定所选的 TTS 语音或引擎 *要确定所选的文本转语音语音，请执行以下步骤：*

```
Click Start, click Control Panel, and then double-click Speech.

On the Text-to-Speech tab, the displayed name in the Voice selection drop-down list is the currently active voice.
Click Preview Voice to hear the active voice. The text is spoken and the words are highlighted as they are spoken. 
```

*预览 TTS 语音* 要预览文本到语音的语音，请执行以下步骤：

```
Click Start, click Control Panel, and then double-click Speech.

On the Text-to-Speech tab, the displayed name in the Voice selection drop-down list is the active voice.
Click Preview Voice to hear the currently selected voice. The text is spoken and the words are highlighted as they are spoken.
During playback, Preview Voice will change to Stop. Click Stop to interrupt the voice playback. 
```

*注意*：您可以通过突出显示文本并输入新文本来更改预览语音要阅读的文本。这些更改不是永久性的，当您重新打开语音属性或选择不同的语音时，文本将重置为默认值。

*更改 TTS 语音或引擎* 要更改文本转语音语音或引擎，请执行以下步骤：

```
Click Start, click Control Panel, and then double-click Speech.
On the Text-to-Speech tab, the name displayed in the Voice selection drop-down list is the active voice.
Click the active voice inside the drop-down list, or use the arrow to display a list of available voices.
Click a new voice to select it.

The newly selected voice speaks the text in Preview Voice box.
Click OK or Apply to accept the new voice. 
```

*笔记：*

```
A Text-to-Speech voice is closely associated with a particular speech engine. It may not be clear from the displayed name which language a voice is using. After selecting a speech engine or voice, test the voice and language by clicking Preview Voice.
The language or voices supported by a speech engine may not be obvious from the engine's displayed name. Refer to the specific user's guide for detailed information about the engine. This includes not only the language supported, but also the lexicon purpose. The lexicon purpose indicates whether it is a general grammar or jargon specific to a profession such as legal or medical.
Microsoft does not provide additional speech engines (voices), but a number of third-party products are available that support the new Microsoft Speech API. For information on these products, visit the following Microsoft Web site:
http://www.microsoft.com/speech/evaluation/thirdparty/engines.mspx 
```

*更改 TTS 语音速率* *要更改文本到语音的语音速率，请按照下列步骤操作：*

```
Click Start, click Control Panel, and then double-click Speech.
Select the Text-to-Speech tab.
Move the Voice speed slider to change the rate of the Text-to-Speech voice. By default, it is set to Normal.
Click Preview Voice to hear the currently selected voice at the new rate. The text is spoken and the words are highlighted as they are spoken. 
```

*更改文本到语音的音量* 要调整音量输出级别，请按照以下步骤操作。请注意，并非所有设备都以相同的方式支持此选项。某些设备不支持音量控制，音量按钮将不可用。其他设备可能会使用自己的显示器。在这些情况下，请按照屏幕上显示的说明或与引擎单独记录的说明进行操作。

```
Click Start, click Control Panel, and then double-click Speech.
On the Text-to-Speech tab, click Audio Output, and then click Volume.
A volume control mixer will be displayed. Adjust the appropriate device to the required level. 
```

请参阅
[http://support.microsoft.com/kb/306902](http://support.microsoft.com/kb/306902) [http://answers.yahoo.com/question/index?qid=20080125142917AAhJ1QB](http://answers.yahoo.com/question/index?qid=20080125142917AAhJ1QB)

# android - 如果我选择联系方式，我没有得到我的意思的联系方式

> ID：15353780
> 
> 赞同：2
> 
> 时间：2013-03-12T05:11:57.260
> 
> 标签：android

我知道如何在 Android 上获取所有联系人，但如果我选择联系人，我无法获得我想要的联系人。示例：我有 4 个联系人

```
joe have phone number 7889 987;
erick have phone number 8792 871;
nona phone number 3653 872 and 2345 907;
rina phone number 8796 235; 
```

如果我选择 joe，我会得到 nona 的电话号码 = 2345 907 我不知道我的应用程序有什么问题。

这是我的代码

```
public void tambahPenerima ( View v ) {
    Intent i = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);
    i.setType(ContactsContract.Contacts.CONTENT_TYPE);
    startActivityForResult(i, PICK_CONTACT);    
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {     
    if(resultCode == RESULT_OK) {
            Cursor cursor = null;
            String name = "";
            String number = "";

            cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

            while(cursor.moveToNext()) {
                name = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
                number = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            } 
                if(cursor!=null) {
                    cursor.close();
                }

                Intent kirimPesan = new Intent();
                kirimPesan.setClass(this, kirimPesan.class);
                kirimPesan.putExtra("nama", name);
                kirimPesan.putExtra("nomor", number);
                kirimPesan.putExtra("chiper", chiper);
                startActivity(kirimPesan);
    }                   
} 
```

有人请帮助我，我真的需要帮助。对不起我糟糕的英语。谢谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:14:43.907

```
 cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
 if(cursor != null && cursor.moveToFirst()) {

                while(cursor.moveToNext()) {
                    name = cursor.getString(cursor.getColumnIndex((ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
                    number = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:07:24.940

这可以帮助您获得具体的联系方式

在这里姓名或号码通过并获取您想要的联系方式

```
 private String getContactName(Context context, String number) {
        String name = null;
        // define the columns I want the query to return
        String[] projection = new String[] {
                ContactsContract.PhoneLookup.DISPLAY_NAME,
                ContactsContract.PhoneLookup._ID};

        // encode the phone number and build the filter URI
        Uri contactUri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));

        // query time
        Cursor cursor = context.getContentResolver().query(contactUri, projection, null, null, null);

        if(cursor != null) {
            if (cursor.moveToFirst()) {
                name = cursor.getString(cursor.getColumnIndex(ContactsContract.PhoneLookup.DISPLAY_NAME));
                Log.v(TAG, "Started uploadcontactphoto: Contact Found @ " + number);            
                Log.v(TAG, "Started uploadcontactphoto: Contact name  = " + name);
            } else {
                Log.v(TAG, "Contact Not Found @ " + number);
            }
            cursor.close();
        }
        return name;
    } 
```

# css - 使用属性选择器的单选/复选框样式

> ID：15353781
> 
> 赞同：2
> 
> 时间：2013-03-12T05:12:04.327
> 
> 标签：css

我有以下CSS

```
input [type="checkbox"] {
    display:none;
} 
```

目前它为所有复选框设置样式。我希望它只为定义了 class="vote" 的输入设置样式

我试过 ：

```
.vote input [type="checkbox"] {
    display:none;
}

input.vote [type="checkbox"] {
    display:none;
}

input vote [type="checkbox"] {
    display:none;
}

input [type="checkbox" class="vote"] {
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T05:14:21.757

代替

```
.vote input [type="checkbox"] {
    display:none;
} 
```

写为

```
input[type="checkbox"].vote {
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:14:52.300

不要用空格隔开。它应该是

```
input[type="checkbox"] {
    display:none;
} 
```

或者

```
input[type="checkbox"].vote {
    display:none;
} 
```

# android - 如何为以对话框为主题的活动设置百分比宽度

> ID：15353786
> 
> 赞同：5
> 
> 时间：2013-03-12T05:12:22.547
> 
> 标签：android, android-layout

我有一个带有对话框主题 ( `Theme.Holo.DialogWhenLarge`) 的活动。它看起来太窄了，我希望它占据更大比例的屏幕。我试图通过覆盖[windowMinWidthMinor](http://developer.android.com/reference/android/R.attr.html#windowMinWidthMinor)和[windowMinWidthMajor](http://developer.android.com/reference/android/R.attr.html#windowMinWidthMajor)属性来实现这一点。

我的活动使用的主题看起来像这样......

```
<style name="MyTheme" parent="@android:style/Theme.Holo.DialogWhenLarge">
    <item name="android:windowMinWidthMajor">90%</item>
    <item name="android:windowMinWidthMinor">90%</item>
</style> 
```

但是，它似乎`windowMinWidthMajor`并`windowMinWidthMinor`没有效果。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-15T11:53:15.667

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Some code here
        setWindowHeight(90);
    }
    /**
     * Set percentage width height
     * @param percent percent from current size. From 0 to 100.
     */
    private void setWindowHeight(int percent){
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        int screenHeight = metrics.heightPixels;
        WindowManager.LayoutParams params = getWindow().getAttributes();
        params.height = (int)(screenHeight*percent/100);
        this.getWindow().setAttributes(params);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T05:18:34.237

为 android 设置百分比是不可能的，但是有办法解决。我所做的是获取屏幕宽度并将其乘以我希望我的视图或项目的百分比（例如：如果我想要填充 40% 的宽度，如果是 Screen-Width * 0.4）

# c# - C# Combobox 将项目移动到列表底部

> ID：15353787
> 
> 赞同：5
> 
> 时间：2013-03-12T05:12:34.390
> 
> 标签：c#, winforms, combobox

我需要在组合框项目的底部添加“选择更多...”，就像在 SQL 2008 服务器选择器上所做的那样。像这样尝试：

```
 List<string> srvList = new List<string>();
        srvList.Add("ff");
        srvList.Add("jj");
        srvList.Add("pp");
        srvList.Add("<Select more...>");
        ComboBoxServs.Items.AddRange(srvList.ToArray<String>()); 
```

但是“选择更多...”出现在项目的顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:24:23.637

正如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.addrange.aspx)所说：

> 如果 ComboBox 的 Sorted 属性设置为 true，**则项目将按字母顺序插入到列表中**。否则，项目将按照它们在数组中出现的顺序插入。

尝试将`Sorted`属性设置为`false`：

```
 ComboBoxServs.Sorted = false;
    List<string> srvList = new List<string>();
    srvList.Add("ff");
    srvList.Add("jj");
    srvList.Add("pp");
    srvList.Add("<Select more...>");
    ComboBoxServs.Items.AddRange(srvList.ToArray<String>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:30:08.880

您必须使用控制`Insert`方法的索引`Combobox`

```
 myComboBox.Items.Insert(0, "Select more"); 
```

希望有所帮助。你也可以参考[这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/762a58f5-667d-4e97-a107-86312942f966)

# c# - Nhibernate中类内部的空值和空值属性

> ID：15353789
> 
> 赞同：1
> 
> 时间：2013-03-12T05:12:37.387
> 
> 标签：c#, nhibernate

我从使用 nHibernate 的类映射中获取空值，请参见下文：

```
public class IndicadorRepository : Repository<IndicadorRepository>
{
    ...
    public Indicador FindById(int indicadorId)
    {
        return _session.Get<Indicador>(indicadorId);
    }
    ...
} 
```

**存储库.cs**

```
 public class Repository<T> where T : Repository<T>, new()
    {
        /* Properties */
        protected static T instance;
        public ISession _session;
        public static T Instance
        {
            get
            {
                if (instance == null) instance = new T();
                return instance;
            }    
        }

        /* Constructor */
        protected Repository()
        {
            this._session = SingletonSession.Session;
        }
} 
```

**SingletonSession.cs**

```
class SingletonSession
{
    protected static ISession _session;
    public static ISession Session
    {
        get
        {
            if (_session == null)
            {
                try
                {
                    var cfg = new Configuration();
                    cfg.Configure();
                    cfg.AddAssembly(typeof(Objetivo).Assembly);
                    var schema = new SchemaUpdate(cfg);
                    schema.Execute(true, true);
                    // Get ourselves an NHibernate Session
                    var sessions = cfg.BuildSessionFactory();
                    _session = sessions.OpenSession();
                }
                catch (Exception e)
                {
                    Console.WriteLine(e);
                }
            }
            return _session;
        }
    }
} 
```

**从这里开始问题**

**Indicador.cs**这个类是用 nhibernate 映射的。

```
public class Indicador : Modelo<Indicador>
{
     public virtual string Nombre { get; set;}

     /************* Constructor *************/
    public Indicador()
    {
        // Pay attention to line below
        Console.WriteLine("Property from Inside: " + Nombre); 
    }
} 
```

**SomeForm.cs**

```
...
private void ConfigurarIndicadoresDataGrid()
{
    // Pay attention to line below
    Console.WriteLine("Property from Outside: {0}", IndicadorRepository.Instance.FindById(1).Nombre); 
}
... 
```

**输出结果：**

`Property from Inside:`

`Property from Outside: This is the name of indicador 1`

为什么类内的属性值为`Indicador`null，而类外的属性值是加载的？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:33:20.937

也许我误解了你的问题，但这似乎是一个时间问题。

在

```
Console.WriteLine("Property from Inside: " + Nombre); 
```

您正在尝试在构造函数中访问和显示一个属性值，该对象当时甚至没有绑定到数据库。为什么要为此属性指定特定值？

在

```
 Console.WriteLine("Property from Outside: {0}", IndicadorRepository.Instance.FindById(1).Nombre); 
```

您正在显示刚刚从数据库加载的对象的值。它（希望）具有价值

# java - 无法加载或实例化 TagLibraryValidator 类 | Tomcat 7，Eclipse STS

> ID：15353791
> 
> 赞同：4
> 
> 时间：2013-03-12T05:12:43.927
> 
> 标签：java, jsp, jakarta-ee, servlets, tomcat7

我正在尝试将 Web 应用程序从 Webspiere 迁移到 Tomcat 7。我正在使用 Spring Tool Suit (sts)。尝试运行应用程序时出现以下异常。该项目未作为 Maven 项目维护。我尝试了从类路径中具有 jsp jar 和 servlet jar 的两种选项，但没有它们。问题还是一样的。

```
org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /myapp threw load() exception
org.apache.jasper.JasperException: /admin_login.jsp (line: 3, column: 0) Failed to load or instantiate TagLibraryValidator class: org.apache.taglibs.standard.tlv.JstlCoreTLV 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:51:53.753

似乎您在类路径中缺少 JSTL 标记库，或者您可能在类路径中缺少了 standard.jar。

检查[这个](http://www.techcrony.info/2009/03/24/nitingautam/orgapachejasperjasperexception-failed-to-load-or-instantiate-taglibraryvalidator-class-orgapachetaglibsstandardtlvjstlcoretlv/) 和[这个](https://stackoverflow.com/questions/3452403/unable-to-read-tld-meta-inf-c-tld)。

# javascript - 与 javascript 原型对象混淆

> ID：15353793
> 
> 赞同：1
> 
> 时间：2013-03-12T05:13:09.050
> 
> 标签：javascript, prototype

当我们创建这样的对象时

```
function Person(first,last){

this.first = first;
this.last = last;
this.full = function (){
   alert(this.first + " " + this.last); 
   }
}

obj = new Person('abdul','raziq'); 
```

我们是否也可以在 obj 的原型中添加类似这样的东西

```
obj.prototype = 'some functions or anything '; 
```

或者一旦我们创建了对象就不可能了？

并且在 person 对象上有一个`__proto__`属性

对象。`__proto__`

但是当我访问 obj.prototype 属性时它的未定义？

有人可以用简单的方式解释吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:19:17.290

该`prototype`属性仅存在于函数上，而不存在于函数的实例上。阅读此 StackOverflow 答案以了解更多信息：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:15:34.673

你可以做类似的事情

```
Person.prototype.full = function(){
   alert(this.first + " " + this.last); 
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/zS7yE/)

原型对象附加到`Class`实例，所以是的，您可以在创建实例后向原型添加/删除属性。并且该类型的所有实例都将反映所做的更改。

# php - 将 PHP 代码转换为 JQuery Ajax 调用

> ID：15353796
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:13:21.853
> 
> 标签：php, json

我需要发出与以下 PHP 代码具有相同功能的 JQuery AJAX 请求。

问题：

**我如何将 PHP 变量（merchantId）传递给 AJAX？**

**我如何处理成功功能？**

PHP代码：

```
 <form method="get" action="http://www.example.com/payments/paymentStore.html">
    <input type="hidden" name="merchantId" value="<?php=$merchantid?>">
    <input type="submit" value="Pay" name="PayKZM">
    </form> 
```

阿贾克斯调用

```
<div class="buttons">
  <div class="right">

<input type="button" value="<?php echo $button_confirm; ?>" id="button-confirm" class="button" />
  </div>
</div>
<script type="text/javascript"><!--
$('#button-confirm').bind('click', function() {
    $.ajax({ 
        type: 'GET',
        url: 'http://www.example.com/payments/paymentStore.html',
        data: "merchantId="+$merchantId,
        success: function() {
            location = '<?php echo $continue; ?>';
        }       
    });
});
//--></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:54:59.190

您非常接近，您只需要从隐藏的输入字段中获取值：

HTML：

```
<input type="hidden" id="merchantId" name="merchantId" value="<?php=$merchantid?>"> 
```

JS：

```
$('#button-confirm').bind('click', function() {
    var merchant_id = $('#merchantId').val();
    $.ajax({ 
        type: 'GET',
        url: 'http://www.example.com/payments/paymentStore.html',
        data: "merchantId="+merchant_id,
        success: function() {
            location = '<?php echo $continue; ?>';
        }       
    });
}); 
```

当然，看看你通过 PHP 字符串将位置传递给 JS 部分的事实，你可以简单地做

```
...
data: "merchantId='<?php echo $merchantId; ?>'",
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:28:57.760

试试这个

```
 <div class="buttons">
  <div class="right">

 <input type="button" value="<?php echo $button_confirm; ?>" 
   id="button-confirm" class="button" onclick='functionname(".$merchantid.")' />
 </div>
</div>
 <script type="text/javascript"><!--
  public functionname(merchan_id) {
$.ajax({ 
    type: 'GET',
    url: 'http://www.example.com/payments/paymentStore.html',
    data: "merchantId="+merchan_id,
    success: function() {
        location = '<?php echo $continue; ?>';
    }       
});
});
 </script> 
```

# java - 运行for循环后出现意外结果

> ID：15353797
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:13:24.477
> 
> 标签：java

我`Bank`在构造函数中编写了一个名为 and 的类。我将帐户的初始余额设置为`initialBalance`。`accounts`是`double[]`数组类型的数据成员。

```
public Bank(int n, double initialBalance){
   accounts=new double[n];
   for( double i:accounts)
      i=initialBalance;
      System.out.println("setting accounts[3]"+accounts[3]);

 } 
```

我面临的问题是我试图在循环后打印任何帐户的余额。它没有显示正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:17:07.090

您是否应该分配`initialBalance`给数组的每个元素`accounts`...

```
public Bank(int n, double initialBalance){
    accounts=new double[n];
    for( int i = 0; i < n; i++) {
        accounts[i]=initialBalance;
    }
    System.out.println("setting accounts[3]"+accounts[3]);
 } 
```

另外，访问数组元素时要小心，它可能不存在。IE`accounts[3]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:18:06.887

```
for(int i = 0; i < accounts.length; i++){
   accounts[i] = initialBalance;
}
System.out.println("setting accounts[3]"+accounts[3]); 
```

吻！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:19:18.650

在 Java 中无法使用 foreach 循环修改数组。但是，您可以使用传统的`for`循环来做到这一点：

```
public Bank(int n, double initialBalance){
   accounts=new double[n];
   for(int i = 0; i < accounts.length; ++i)
      accounts[i] = initialBalance;
      System.out.println("setting accounts[i]"+accounts[i]);

 } 
```

此外，另一个危险信号：如果将小于 0 的值作为 n 传递，`NegativeArraySizeException`如果 n 为负数，这将导致 a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:53:55.907

在我看来，正确的代码如下，它可以帮助你：

```
public class Bank{
   public Bank(int n, double initialBalance){
   double accounts[]=new double[n];
   for(int i = 0; i<accounts.length; i++){
      accounts[i]=initialBalance;
      System.out.println("setting accounts[]"+accounts[i]);
   }//end of for
   }//end of constructor

  public static void main(String a[]){
  Bank b = new Bank(2, 12);

 }//end of main
}//end  of class 
```

# wix - WIX 设置项目中的许可协议界面

> ID：15353798
> 
> 赞同：0
> 
> 时间：2013-03-12T05:13:27.433
> 
> 标签：wix, licensing

当我试图构建一个定制的 Wix 设置项目时，我需要包含一个许可协议界面。使用 WixUiExtension 我可以用这段代码轻松完成

```
<WixVariable Id="WixUILicenseRtf" Value="sample.rtf" /> 
```

但是，如何在不使用 WixUiExtension 的情况下以自定义的 .wxs 形式获取此 .rtf 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:27:58.130

`UI`在标签中这样定义它：

```
 <Control Id="LicenseText" Type="ScrollableText" X="20" Y="60" Width="330" Height="140" Sunken="yes" TabSkip="no">
                <Text SourceFile="sample.rtf" />
            </Control> 
```

# javascript - 无法使用 Google api 发送 html 电子邮件

> ID：15353801
> 
> 赞同：1
> 
> 时间：2013-03-12T05:13:51.710
> 
> 标签：javascript, google-api

我想发送带有 html 标签的电子邮件，我正在使用这行代码发送电子邮件。

```
var mailLink = "https://mail.google.com/mail/?view=cm&fs=1&tf=1&source=mailto&su
=" + title + " &body=" + body;

window.open(mailLink); 
```

在正文部分我有一个`<a>`标签只是链接`<a href="www.google.com">Google</a>`。但问题是当我们撰写这封邮件时，这封邮件的正文部分并没有显示这个链接。他们是否可以通过此链接发送此电子邮件。请告诉我。谢谢

# winapi - C 语言中的单服务器、多客户端 UDP 应用程序 (Winsock)

> ID：15353809
> 
> 赞同：0
> 
> 时间：2013-03-12T05:14:49.850
> 
> 标签：winapi, udp, winsock

我创建了单个服务器和单个客户端回显应用程序。它适用于单个服务器和单个客户端。但现在我想通过为单个服务器处理多个客户端来使其更实用。我突然想到在服务器端使用listen() 函数来处理多个客户端连接，但后来我知道listen 仅用于TCP。请帮我解决这个问题。下面是我的单服务器和单客户端的功能代码。帮助我如何修改它以制作单服务器多客户端应用程序。

**服务器：**

```
#define PORT 8888   //The port on which to listen for incoming data

int main()
{

SOCKET s;
struct sockaddr_in serverSocket, clientSocket;

char receiveBuffer[1000];
//int receiveBufferLength=1000;
int clientSocketLength;
int recv_len;

clientSocketLength = sizeof(clientSocket) ;

WSADATA wsa; 
//Initialise winsock
printf("\nInitialising Winsock...");
if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
{
  printf("Failed. Error Code : %d",WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("Socket Initialised.\n");

//Create a socket
if((s = socket(AF_INET , SOCK_DGRAM , 0 )) == INVALID_SOCKET)
{
    printf("Could not create socket : %d" , WSAGetLastError());
}
printf("Socket created.\n");   

//Prepare the sockaddr_in structure
serverSocket.sin_family = AF_INET;
serverSocket.sin_addr.s_addr = INADDR_ANY;
serverSocket.sin_port = htons( PORT );

//Bind
if( bind(s ,(struct sockaddr *)&serverSocket , sizeof(serverSocket)) == SOCKET_ERROR)
{
    printf("\nBind failed with error code : %d" , WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("Bind done\n\n");

//keep listening for data

while(1)
{
    printf("\n\t\t\tWaiting for data...\n");
    fflush(stdout);
    //receiveBuffer[2000]=NULL;

    if((recv_len = recvfrom(s, receiveBuffer, 1000, 0, (struct sockaddr *) &clientSocket, &clientSocketLength)) == SOCKET_ERROR)
    {
        printf("\n\nrecvfrom() failed with error code : %d" , WSAGetLastError());
        //exit(EXIT_FAILURE);
        while(1);
    }

    //print details of the client/peer and the data received
    printf("\n\nReceived packet from %s:%d\n", inet_ntoa(clientSocket.sin_addr), ntohs(clientSocket.sin_port));
    printf("\nClient Says: " );
        printf(receiveBuffer,recv_len);

    //now reply the client with the same data
    if (sendto(s, receiveBuffer, recv_len, 0, (struct sockaddr*) &clientSocket, clientSocketLength) == SOCKET_ERROR)
    {
        printf("\nsendto() failed with error code : %d" , WSAGetLastError());
       // exit(EXIT_FAILURE);
        while(1);
    }
    else
        printf("\nMessage Sent Back to Client");

}

closesocket(s);
WSACleanup();
return 0;

} 
```

**客户：**

```
#define PORT 8888   //The port on which to listen for incoming data
#define SERVER "10.0.1.25"  //ip address of udp server
//#define PORT 8888   //The port on which to listen for incoming data

int main(void)
{
struct sockaddr_in connectedSocket;

int s;
int length=sizeof(connectedSocket);

char receiveBuffer[1000];
char message[1000];

//clear the buffer by filling null, it might have previously received data
memset(receiveBuffer,'\0', 1000);

WSADATA wsa;
//Initialise winsock
printf("\nInitialising Winsock...\n");
if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
{
    printf("\nFailed. Error Code : %d",WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("\n.........Initialised.\n");

//create socket
if ( (s=socket(AF_INET, SOCK_DGRAM, 0)) == SOCKET_ERROR)
{
    printf("\n\nsocket() failed with error code : %d" , WSAGetLastError());
    exit(EXIT_FAILURE);
}

//setup address structure
memset((char *) &connectedSocket, 0, sizeof(connectedSocket));
connectedSocket.sin_family = AF_INET;
connectedSocket.sin_port = htons(PORT);
 //connectedSocket.sin_port = INADDR_BROADCAST;
connectedSocket.sin_addr.S_un.S_addr = inet_addr(SERVER);

while(1)
{
    printf("\n\n\nEnter message : ");
    gets(message);

  //send the message
    if (sendto(s, message,sizeof(message) , 0 , (struct sockaddr *) &connectedSocket, sizeof(connectedSocket)) == SOCKET_ERROR)
    {
        printf("\nsendto() failed with error code : %d" , WSAGetLastError());
        exit(EXIT_FAILURE);
    }

        printf("\nMessage Successfully sent to Server");
      // fflush(stdout);

    if (recvfrom(s, receiveBuffer, 1000, 0, (struct sockaddr *) &connectedSocket,&length) == SOCKET_ERROR)
    {
       printf("\nrecvfrom() failed with error code : %d" , WSAGetLastError());
       exit(EXIT_FAILURE);
    }

    printf("\nServer Says : ");
    printf(receiveBuffer,sizeof(receiveBuffer));

}

closesocket(s);
WSACleanup();

return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:18:38.220

让我为您解释一些可能令人困惑的事情。

首先，在您的服务器中，您需要设置`serverSocket.sin_addr.s_addr`为`INADDR_ANY`即使您想广播。你不想成功`INADDR_BROADCAST`。这只是告诉服务器绑定您计算机拥有的*任何*IP 地址，因为一台计算机可以拥有多个 IP。你做对了。

但是你怎么能从服务器广播呢？你需要使用这样`setsockopt`的`SO_BROADCAST`参数...

```
int options = 1;
if ((setsockopt(s, SOL_SOCKET, SO_BROADCAST,(char *)&options,sizeof(options))) < 0){
    printf("%d",WSAGetLastError());
} 
```

这将使您的服务器*监听*广播，但是您如何*发送*广播呢？您需要在调用函数之前在**sockaddr**`INADDR_BROADCAST`结构中的`s_addr`字段中进行设置。**`sendto`**

 **```
clientSocket.sin_addr.s_addr = INADDR_BROADCAST; 
```

然后使用`sendto`with`clientSocket`将您的消息播回。

其次，在您的客户端代码中，您有两个选项，具体取决于您的应用程序。

1.  如果您希望您的客户端首先将消息发送到服务器（直接而不广播），那么您做对了，通过设置`inet_addr(SERVER)`客户端仅将消息发送到您的服务器。

2.  但是，如果您希望客户端广播消息，那么您需要`setsockopt`在您的客户端中再次使用，与您的服务器相同，并将`connectSocket`结构中的地址设置为`INADDR_BROADCAST`.

最后，如果你告诉我们你想在这里完成什么会更好。如果您希望客户端首先连接到服务器，然后服务器将客户端*通知*给其他客户端，那么您可能会采用 TCP 而不是 UDP。**

# objective-c - 异常数据源必须使用 customCell 在 tableView 中返回一个单元格

> ID：15353812
> 
> 赞同：0
> 
> 时间：2013-03-12T05:15:09.357
> 
> 标签：objective-c, xcode

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";

    if (tableView ==tableview1) {
        ContactCustom *cell1=(ContactCustom *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell1 == nil) {
            [[NSBundle mainBundle] loadNibNamed:@"ContactCustom" owner:self options:nil];
            cell1 = contactCustom;
        }

        NSString *nameStr = [newcontactList objectAtIndex:indexPath.row];
        NSArray * arr = [nameStr componentsSeparatedByString:@"!"];
        NSLog(@"arr %@\n",arr);

        [cell1 ContactNameText:[arr objectAtIndex:0]];
        [cell1 MobileNoText:[arr objectAtIndex:1]];

        if (![[arr objectAtIndex:3] isEqualToString:@"no"]) {
           [cell1 ScreenNameText:[arr objectAtIndex:3]]; 
        }

        if (![[arr objectAtIndex:4] isEqualToString:@"0"]) {
            [cell1 setImg:[arr objectAtIndex:4]];
        }
        else
        {
            cell1.receiveCountBtn.hidden=YES;
        }

        cell1.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
        cell1.selectionStyle = UITableViewCellSelectionStyleNone;

        return cell1;
    }

    else if (tableView ==tableview2) {

        ContactPicsCustom *cell=(ContactPicsCustom *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil) {
            [[NSBundle mainBundle] loadNibNamed:@"ContactPicsCustom" owner:self options:nil];
            cell = contactPicsCustom;
        }

        NSString *nameStr = [sentPicsContactList objectAtIndex:indexPath.row];
        NSArray * arr1 = [nameStr componentsSeparatedByString:@"!"];
//        NSLog(@"arr1 %@\n",arr1);

        User *userObj = [[User alloc]init];
        userObj.fName = [arr1 objectAtIndex:0];
        userObj.mNo = [arr1 objectAtIndex:1];

//        NSLog(@"user %@ %@\n",userObj.fName,userObj.mNo);

        [cell ContactNameText:[arr1 objectAtIndex:0]];

        if ([arr1 count] == 4) {
            [cell ScreenNameText:[arr1 objectAtIndex:3]];
        }

//        [cell setImg:[dicPhotosCount valueForKey:[arr1 objectAtIndex:0]]];
        NSInteger cnt = [[DBModel database]photosCnt:userObj];
//        NSLog(@"cnt: %d\n",cnt);
        if(cnt >= 1)
        {
            [cell setImg:[NSString stringWithFormat:@"%d",cnt]];
        }
        else
        {
            cell.imgView.hidden=YES;
        }

        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        return cell;
    }

        return 0;
} 
```

我已经`tabBarController`在我的项目中添加了。有一个`tabBarItem`调用`ContactsViewController`它具有带有 customCell 的 tableView。当我单击 tableViewRow 时，它会将我带到下一个视图。然后我单击另一个 tabBarItem 并再次单击`ContactsViewController`我收到错误，因为`UITableView`dataSource 必须返回一个单元格`tableView:cellForRowAtIndexPath`。我的代码有什么问题？

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    if (tabBarController.selectedIndex == 0) {

    }
    else if (tabBarController.selectedIndex == 1) {

 UINavigationController *requiredNavigationController = [tabBarController.viewControllers objectAtIndex:1];
        [requiredNavigationController popToRootViewControllerAnimated:YES];

    } 
```

在我在 Appdelegate.mi 中添加上述方法后，我得到了异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:30:08.537

改变 ：

```
 return 0; 
```

至 ：

```
 return nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:33:46.630

表没有获取您的自定义单元格。检查您的 ContactCustom cell.xib 并将您的 ContactCustom 添加为单元格的类。
![在此处输入图像描述](../Images/8c90626f8d0734cb924dd3cbb373e4df.png)

添加您的自定义类名称而不是“DeckListCell”。

尝试这个：

```
if (tableView ==tableview1) {
            ContactCustom *cell1=(ContactCustom *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) 
    { 
       NSArray *nib;
       nib= [[NSBundle mainBundle] loadNibNamed:@"ContactCustom" owner:self  options:nil];
        for (id oneObject in nib) if ([oneObject isKindOfClass:[ContactCustom class]])
                cell = (ContactCustom *)oneObject;

       // configure your cell.
    }
  return cell;
 } 
```

# jquery - 如何在 jQuery 中选择下一个标签？

> ID：15353818
> 
> 赞同：4
> 
> 时间：2013-03-12T05:15:48.823
> 
> 标签：jquery

如何从我的位置选择带有 class="date" 和 id="z" 的标签？

```
<td style="width:300px;height:40px;" id="pricePanel">
    <div id="class">
        <label class="priceNumber" id="label">test</label>
        <div class="no" hidden="hidden">
            <input type="text" id='priceNumber' class="text" style="text-align:center;" onkeypress="if(event.keyCode==13)" value='@item.Cost.ToString()' />
        </div>
    <div>
</td>
<td id="x">
    <label class="date" id="z">@date</label>
</td> 
```

我的位置在我的 jQuery 代码的文本框块中：

```
$(".text").live("keypress", function (event) {
        //Here I want to change the text of the label with class="date" and id="z"
    }); 
```

注意：在主代码中我有一个循环，不幸的是有一些标签具有相同的类和 id，因此我想在我更改了文本的文本框之后选择标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T05:18:14.003

使用`$(this)`参考来获取当前位置..`parents('td')`移动到`<td>`..`next()`获取下一个`<td>`并`find`获取标签试试这个

```
 $("div.no").on("keypress",".text", function (event) {
   $(this).parents('td').next().find('#z').text();
}); 
```

**但是**，由于您在标签中有 id ...直接将其用作选择器，因此性能更好，速度更快..

```
 $(".text").on("keypress", function (event) {
   $('#z').text();  // $('label.date').text();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:18:06.700

您可以使用`closest()`到达`td`文本的父级，然后使用`next()`到达下一个 td 和`find()`给定类的标签。您可能有重复的结构，并且`id`禁止使用一个以上的元素，因此请`class`与标签一起使用。如果您没有重复的结构，请立即使用 id 。

**[现场演示](http://jsfiddle.net/ZPJpv/)**

您也没有关闭第一个 td 中的第一个 div 。

*html*

```
<table>
    <tr>
        <td style="width:300px;height:40px;" id="pricePanel">
            <div id="class">
                <label class="priceNumber" id="label">test</label>
                <div class="no">
                    <input type="text" id='priceNumber' class="text" style="text-align:center;"
                    onkeypress="if(event.keyCode==13)" value='@item.Cost.ToString()' />
                </div>
            </div>
        </td>
        <td id="x">
            <label class="date" id="z">@date</label>
        </td>
    </tr>
</table> 
```

*Javascript*

```
$(".text").live("keypress", function (event) {
    $(this).closest('td').next('td').find('.date').text("your text");
}); 
```

如果您没有重复块并且有单个，则直接使用 id。

```
$(".text").live("keypress", function (event) {
    $('#z').text("your text");
}); 
```

`Live``on`如果可能，不推荐使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:18:54.573

```
 $(".text").live("keypress", function (event) {
             $("label#z").text(/*your text*/)
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T05:20:10.680

使用 ID/class 是更快的识别和对象的方法

**直接使用id属性（考虑到“z”是唯一的id）**

```
$('#z').text("your text") 
```

**如果 z 是重复的，那么最好使用 class**

```
$('label.date').text("your text") 
```

# c# - 在内部使用 WCF 配置 - 如何在内部和外部使用我的 WCF 服务？

> ID：15353824
> 
> 赞同：0
> 
> 时间：2013-03-12T05:16:22.657
> 
> 标签：c#, wcf, extensibility

原谅标题，我不太清楚如何描述我遇到的问题。

我正在通过 SOAP 和 REST 端点公开 API。我已经使用了一些 WCF 可扩展性功能来使用 HTTP 标头来满足我拥有的某些身份验证/授权和日志记录需求。当服务被外部客户端（不是我）使用时，所有这些都运行良好。

我有一个将使用相同服务的站点，但我不想担心通过地址使用这些服务，因为我可以在我的站点中初始化它们。

有没有一种方法可以使用 ChannelFactory，或者其他方法可以在不指定地址的情况下创建我的服务实例，并且仍然让它通过 WCF 堆栈并达到我的可扩展性点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:35:33.897

我能够准确地弄清楚我需要什么。我不知道即使您在本地运行服务，您仍然可以添加对它们的引用作为服务。这使我仍然可以利用 WCF 堆栈和我实现的所有可扩展点。

# asp.net - 在 ASP.net gridview 中 SQl 查询数据类型 Date 的问题

> ID：15353826
> 
> 赞同：0
> 
> 时间：2013-03-12T05:16:41.620
> 
> 标签：asp.net, sql, sql-server, gridview, datetime-format

这是我的 SQL 选择语句：

```
Select * from dbo.RAM 
```

这是我在 SQL Server 中运行它时的输出：

```
ID  Size    Date_Disposed
2   512mb   2013-02-01 
```

为了填充 gridview，我使用相同的 sql select 语句，代码如下：

```
 adapter = New SqlDataAdapter("Select * from dbo.RAM", con)
            adapter.Fill(ds)
            tbltemplate.DataSource = ds.Tables(0)
            tbltemplate.DataBind() 
```

当我运行代码时，这是 gridview 的输出：

```
ID  Size    Date_Disposed
2   512mb   2/1/2013 12:00:00 AM 
```

问题是日期的格式不同，并且有时间值。我怎样才能在gridview中防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:19:22.253

您可以像这样使用[BoundField.DataFormatString 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)：

```
<asp:BoundField DataField="date" DataFormatString="{0:yyyy-MM-dd}" 
     HeaderText="Date_Disposed" /> 
```

这会给你一个输出：

```
2013-02-01 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:18:39.330

你可以使用 DataFormatstring [DataFormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

```
<asp:BoundField DataField="Date_Disposed" 
                    HeaderText="Disposed Date" 
                    DataFormatString="{0:d}" /> or {0:dd/mm/yyyy} pattern. check for the links for various patterns 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:18:45.233

您可以通过 sql 手动格式化日期，

```
SELECT  ID,
        Size,    
        convert(varchar(15), Date_Disposed, 111) AS DateDisposed
FROM    dbo.RAM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:19:53.907

日期时间格式在那里。有关更多格式，请参阅链接[日期时间格式](http://blog.sqlauthority.com/2012/11/21/sql-server-display-datetime-in-specific-format-sql-in-sixty-seconds-033-video/)、[SQL Server 日期](http://www.sql-server-helper.com/tips/date-formats.aspx)格式。尝试

```
SELECT ID, Size, CONVERT(nvarchar(20), Date_Disposed, 106) Date_Disposed FROM RAM 
```

# iphone - 步进工作只按了两次？

> ID：15353827
> 
> 赞同：1
> 
> 时间：2013-03-12T05:16:48.093
> 
> 标签：iphone, ios, objective-c, uistepper

我使用步进器来控制文本视图的字体大小，但是在我按下步进器两次之前不会触发任何操作。为什么会这样？

以下代码用于“mystepper”IBAction：

```
- (IBAction) changeFontSize:(id)sender
{
    [myStepper setMinimumValue:14.0]
    self.myStepper.maximumValue =20.0;

    CGFloat newSize = [myTextView fontWithSize:self.stepper.value];
    self.myTextView.font = newSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:33:18.147

检查您是否已将`UIStepper`Recieved Actions 连接到该`changeFontSize:`功能，`Values Changed`而不是`Touches inside`

# php - 如何正确存储和使用具有不同时区的 MySQL TIMESTAMP？

> ID：15353829
> 
> 赞同：0
> 
> 时间：2013-03-12T05:17:05.200
> 
> 标签：php, mysql

我正在创建一个基于安排约会的应用程序，在一个用户可以选择他们想要的时区的环境中。

经过一番研究，我确信使用 MYSQL`TIMESTAMP`来存储所有日期。我*认为*，在使用 时`TIMESTAMP`，所有日期都会被转换并存储为 UTC。然后，`TIMESTAMP`当从数据库中提取日期时，一列将转换为 MYSQL 的时区。

***以下是我当前设置的一些示例代码：***

在每个页面上，为 PHP 和 MYSQL 设置了时区*（基于用户选择。此示例为 PST）*：

```
date_default_timezone_set('US/Pacific');
SET time_zone = '-08:00' 
```

将时间放入 MYSQL 时，我只需将时间戳转换为正确的格式。

```
date("Y-m-d H:i:s", $unix_timestamp); 
```

从数据库中提取时，我会简单地使用 MYSQL 转换为 UNIX。

```
SELECT UNIX_TIMESTAMP(created_at) as created_at FROM `table` WHERE id=1 
```

这很优雅，而且似乎工作得很好。MySQL 为我完成了所有繁重的时区转换，只需使用`TIMESTAMP`. 也就是说，直到夏令时发生。现在，只要选择了非 UTC 时区，时间就会**关闭一个小时**。

我究竟做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:47:31.003

如果您使用；

```
date_default_timezone_set('US/Pacific');
SET time_zone = '-08:00' 
```

...MySQL 的服务器时区在夏季将比太平洋时间晚一小时，因为`PDT`是`GMT-07:00`. 而是使用例如；

```
date_default_timezone_set('US/Pacific');
SET time_zone = 'America/Los_Angeles'; 
```

...并且 MySQL 的服务器时间将支持 DST 更改，您应该获得正确的时区转换。

由于 MySQL 并不总是包含所有可用的时区，如果`America/Los_Angeles`您的系统中缺少时区，[这个页面应该可以帮助您安装它](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)。

由于您使用每个用户的动态时区，您可能需要某种查找表来在 MySQL 和 PHP 时区之间进行转换，因此您可以为每个用户设置正确的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:57:41.330

为什么不将时间作为 UTC（我们英语更喜欢 GMT）存储在数据库中？

然后在 mySql中使用[CONVERT_TZ()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)函数或在 PHP中使用[setTimezone 。](http://php.net/manual/en/datetime.settimezone.php)

这将使人们能够轻松地查看其他人的日历并转换为他们的当地时间。因此，没有人有理由太早或太晚（或在错误的日子！）。

# php - 何时使用序列化与仅使用常规 POST

> ID：15353845
> 
> 赞同：9
> 
> 时间：2013-03-12T05:18:43.283
> 
> 标签：php, jquery

我最近问了一个部分回答的问题，但我希望有人能更清楚地解释这个问题。它关于 PHP 和序列化函数。

所以我有一个包含 12 个字段的表单，所有字段都有名称。传统上我只会使用 POST 方法，将它们发送到 PHP 页面，然后将它们提供到数据库中。

今天我偶然发现了 serialize 方法，但是在使用它之后，它似乎没有做任何常规 POST 语句会做的事情。例如，如果我想使用序列化，我会执行以下操作：

```
var formData = $('#contForm').serialize();
$.post('functs.php',formData,dispAdd); 
```

然后打印一个我会使用的值

```
echo $_POST['value_name'] 
```

我看到发生的是，无论有没有序列化，我都会得到相同的结果。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:27:21.097

> .serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。表单元素可以有多种类型。[阅读更多](http://api.jquery.com/serialize/)。

`.serialize()`当您通过 AJAX 请求发送数据时使用。这与使用提交按钮提交表单相同。仅当您使用 AJAX 时会有所不同，它不会刷新页面。这就是为什么即使您使用提交按钮或`.serialize()`使用 AJAX 提交表单，您也会得到相同的结果。

[.serializeArray()](http://api.jquery.com/serializeArray/)将是 .serializeArray() 的替代品`.serialize()`。

**请记住**，如果您不使用`.serialize()`，则必须像上面评论中提到的@Akam 那样手动创建键值对。

最后

何时使用序列化<--何时使用 AJAX 发布数据

当常规 POST <-- 当您使用提交按钮发布数据时

# java - java中方法的执行时间

> ID：15353849
> 
> 赞同：4
> 
> 时间：2013-03-12T05:19:08.317
> 
> 标签：java, performance, spring

我想打印java中方法的执行时间。目前正在使用以下代码，

```
long startTime = System.currentTimeMillis();
// method body
long runTime= System.currentTimeMillis() - startTime;
System.out.println(" XYZ Method execution time: " + runTime); 
```

我想在项目中找到运行时的方法太多了，有没有办法防止在每个方法中编写这段代码？

该项目使用 Spring 2.5，Struts 2。

编辑：我不想为每个方法添加逻辑，我想，说，写一次逻辑并使用某种配置，我可以指定我需要打印执行时间的方法。因此，无论何时执行该方法，都会自动将运行时间打印到控制台。正如我所说的那样，一种方法是将代码添加到序言和结尾，但我不想编辑该方法，因为这会很耗时，并且编写相同的代码不是一个好习惯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:24:07.980

我建议你看看 Codahale 的[Metrics](http://metrics.codahale.com/)包。这个包收集各种指标（包括时间），然后通过 JMX 或其他机制报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:19:58.837

为什么不直接使用分析器，例如[YourKit](http://www.yourkit.com/)或[JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)。JVisualVM 随 JDK 一起提供。如果您真的想自己执行此操作，请使用`java.lang.instrument`并`ASM`编写自己的代理。使用这种方法向 Java 方法的序言和结尾添加逻辑很简单。

这是一个帮助您[入门](http://www.javalobby.org/java/forums/t19309.html)的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T17:34:05.870

选项 1:: 使用 AOP

选项 2 :: 如果您在正确的位置（之前和之后）进行日志记录，并且在日志中输入时间戳，您可以使用任何分析工具（logrythm、splunk 的开源版本等）来处理你的日志并弄清楚时间。但是请记住，日志记录通常是一项昂贵的操作（嗯，AOP 在某种程度上也是如此）。

无论您采用哪种方法，请确保计算您将对应用程序施加的性能影响，只是为了衡量性能本身:-)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T05:30:08.370

看看Spring AOP，可以使用around通知来计算方法执行时间

[春天 2.5](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)

[弹簧 3.0 x](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html)

# android - android解析博主的RSS

> ID：15353856
> 
> 赞同：1
> 
> 时间：2013-03-12T05:19:20.540
> 
> 标签：android, xml-parsing

遇到无法解析博客 RSS 中的链接标签的问题。因为它在每个标签中都有 6 个链接标签。这就是为什么会出现问题。我尝试使用以下编码进行解析，但失败了。

[这是来自博主http://www.innewsmyanmar.com/feeds/posts/default](http://www.innewsmyanmar.com/feeds/posts/default)的 RSS 提要链接

```
private Entry readEntry(XmlPullParser parser) throws XmlPullParserException, IOException {
        parser.require(XmlPullParser.START_TAG, ns, "entry");
        String title = null;
        String summary = null;
        String link = null;
        String id = null;
        String category = null;
        String updated = null;
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String name = parser.getName();            
            if (name.equals("title")) {
                title = readTitle(parser);
            } else if (name.equals("content")) {
                summary = readSummary(parser);
            } else if (name.equals("link")) {
                link = readLink(parser);
            } else if (name.equals("id")) {             
                id = readId(parser);                
            } else if (name.equals("updated")) {
                updated = readUpdated(parser);
            } else if (name.equals("category")) {
                category = readCategory(parser);                
            } else {
                skip(parser);
            }
        }
        return new Entry(id, title, summary, link, category, updated);
    }

    // Processes link tags in the feed.
    private String readLink(XmlPullParser parser) throws IOException, XmlPullParserException {
        parser.require(XmlPullParser.START_TAG, ns, "link"); 
        String link = "";

        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() == XmlPullParser.START_TAG) {
                continue;
            }
            String tag = parser.getName();          
            String relType = parser.getAttributeValue(null, "rel");
            if (tag.equals("link")) {
                if (relType.equals("alternate")) {                      
                        link = parser.getAttributeValue(null, "href");
                    break;
                }
            }               
        }  
        return link;
    } 
```

当我跟踪**readLink**函数时，事务无法进入**while (parser.next() != XmlPullParser.END_TAG)**条件。

# git - git 子目录中的 git init

> ID：15353858
> 
> 赞同：8
> 
> 时间：2013-03-12T05:19:30.210
> 
> 标签：git, git-submodules, git-subtree

我有一个 git repo，它有一些子目录：

```
 ~/src
  ~/src/.git
  ~/src/mystuff
  ~/src/otherstuff 
```

现在我想`otherstuff`和朋友分享，我打算用 bitbucket 来做这个。他们应该能够克隆它并推送更改，`otherstuff`但我不希望他们能够访问`src`，`mystuff`（甚至看不到它们存在）。

我该怎么做？我几乎进入`cd ~/src/otherstuff`并做了`git init`，`git remote add origin ssh://git@bitbucket.org/wim_glenn/...`但是当它已经处于版本控制之下时，再次执行 git init 有什么不好的地方。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T07:09:41.687

`git init`在 git repo 中创建 a 是可行的：您在其中初始化嵌套 repo 的目录会*被*父 repo 忽略。

但是，如果该子目录的历史很重要，最好将[其导出为单独的 repo](https://stackoverflow.com/a/1662787/6309)（如[Nick](https://stackoverflow.com/users/78613/nick-veys) [建议](https://stackoverflow.com/questions/15353858/git-init-in-a-git-subdirectory#comment21690750_15353858)的那样）。
从那里，您可以通过将新的 repo 声明[为父 repo 的子模块](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)来保持两个 repos 的锁定步骤。

# mootools - 如何根据其值使用 mootools 删除超链接？

> ID：15353859
> 
> 赞同：0
> 
> 时间：2013-03-12T05:19:30.613
> 
> 标签：mootools

在下面的代码中，如何根据超链接的值删除 li？

```
<ul class="clean menu sub">
    <li>
        <a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_fios" rel="1">FiOS Internet</a>
    </li>
    <li>
        <a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_hsi" rel="1">High Speed Internet</a>
    </li>
    <li class="last" style="margin-bottom:7px;">
        <a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_dialup" rel="1">Dial-up</a>
    </li>
</ul> 
```

我得到了变量中超链接的值。现在根据值，其他 2 li 应该被删除。我们如何使用 mootools 实现这一目标？

现在如果我得到 flag="Dial-up"，其他 2 li 应该被删除，代码应该是这样的：

```
<ul class="clean menu sub">
    <li class="last" style="margin-bottom:7px;">
        <a cat="tech" class="sec_net_1" href="javascript:void(0);" name="&amp;lid=choose_category_internet_dialup" rel="1">Dial-up</a>
    </li>
</ul> 
```

在这里，我从服务器获取 Flag 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:47:12.410

如果您可以利用链接名称，则解决方案是一行：

[http://jsfiddle.net/5axJc/](http://jsfiddle.net/5axJc/)

```
$$("ul.menu :not(a[name='&li=choose_category_internet_dialup']) !> li").destroy() 
```

对集合调用destroy（我会在生产代码中使用document.getElements）将对其中的每个元素调用您的方法。

在选择表达式中有几个*深奥*的选择器，也许值得更深入的解释：

*   ul.menu 是一个普通的基于类的选择器
*   :not(a[name='&li=choose_category_internet_dialup'])根据与值匹配的属性
    选择链接`name``:not()`
*   !> 是父选择器

因此您可以将选择器读取为：

选择所有 li 到菜单 ul 中，它们是名称不是您想要的值的锚的父亲。

**编辑**

要仅选择作为搜索对象的父母的 li，只需使用 选择它， `ul.sub a[name='&lid=choose_category_internet_fios'] !> li`并在此基础上选择所有兄弟姐妹`~ li`。结果是这样的。

```
$$("ul.sub a[name='&lid=choose_category_internet_fios'] !> li ~ li").dispose() 
```

请注意，我们已经摆脱了 :not() 选择器。对我来说，这是一种更线性的方式来完成任务。

# iphone - UIBarButton 可点击区域太大

> ID：15353865
> 
> 赞同：1
> 
> 时间：2013-03-12T05:19:57.523
> 
> 标签：iphone, ios, xcode, ios5, uibarbuttonitem

我有一个从 NIB 添加的 UIBarButtonItem。它的宽度是 33。但是那个 BarButton 的可点击区域太大了。即外部宽度我们也可以点击那个按钮。如何减少等于 UIBarButton 宽度的可点击区域。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:25:24.507

UIBarButtonItem 默认情况下有一个覆盖。无法使用标准 UIBarButtonItem 限制额外的可点击区域。更好的方法是使用一个看起来像 UIBarButtonItem 的普通按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:25:23.447

默认情况下。不能减少 UIBarButton 的可点击区域。

但我总是通过向 UIView 添加一个带有 UIBarButton 自定义图像的 UIButton 并将该 UIButton 的 x、y 坐标更改为 UIBarButton 的框架来解决这个问题，并且注意 UIButton 应该在 UIView 的子视图中而不是在标签栏中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:52:44.573

试试这个：

1.  取 UIView 的对象
2.  在该 UIView 对象中创建和添加 UIButton 对象
3.  将该 UIView 对象设置为导航项的标题视图。

[self.navigationController.navigationItem setTitleView:viewobj];

# jsf - JSF 参数未在第二次调用时传递

> ID：15353868
> 
> 赞同：1
> 
> 时间：2013-03-12T05:20:08.397
> 
> 标签：jsf

我在同一页面上有 2 个按钮。

```
<p:commandButton action="#{testController.create}" value="Next">
    <f:param name="sid" value="#{sessionScope.userId}" />
</p:commandButton>

<p:commandButton action="#{testController.update}" value="Next">
    <f:param name="sid" value="#{sessionScope.userId}" />
</p:commandButton> 
```

在我的 bean 上，create 和 update 方法都有以下代码：

```
Map<String, String> param = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
int id = Integer.parseInt(param.get("sid")); 
```

在第一次单击更新或创建时，获取参数 sid 工作。但在第二次点击时，它会给我一个例外`int id = Integer.parseInt(param.get("sid"));`

我真的很困惑..我在这里想念什么？

例外：

```
e = (java.lang.NumberFormatException) java.lang.NumberFormatException: For input string: "{sessionScope.userId}" 
```

# c - 我该怎么做才能停止错误“'char'之前的预期表达式”？

> ID：15353870
> 
> 赞同：0
> 
> 时间：2013-03-12T05:20:13.213
> 
> 标签：c, compiler-construction, casting, char, format

我正在编译我的工作，无论我如何编辑我的代码，这个错误都会不断出现：

```
expected expression before ‘char’ 
```

和

```
format ‘%s’ expects type ‘char *’, but argument 2 has type ‘int’ 
```

从第二个错误开始，我尝试使用类型转换，但问题确实存在。有谁知道怎么做？这是我的代码的一部分：

```
while ( char my_wget (char web_address[BUFLEN]) != EOF ) {
    printf ("%s", (char) web_address[BUFLEN]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:23:48.017

因为你在你写的地方有一个语法错误，这`char`是`char`不允许的。

也许你想到了：

```
int ch;
char web_address[BUFLEN];

while ((ch = my_wget(web_address)) != EOF)
    printf("%s\n", web_address); 
```

使用正确的`my_wget()`around 声明（例如`extern int my_wget(char *buffer);`），应该可以编译。你不能到处声明变量。

第二个错误是因为`web_address[BUFLEN]`是一个字符（当然在我的代码中；它似乎也在你的代码中，因为编译器设法识别出足以生成错误的类型）。如果您像我一样声明它，它也是超出数组末尾的一个。将`char`值（可能是 8 位数量）视为地址（指针；可能是 32 位或 64 位数量）是错误的，这就是编译器抱怨的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:23:39.797

在`printf()`语句中，尝试将部分更改`char`为`char*` Same 适用于`while`循环中的条件。`char`将之前更改`web_address`为`(char*)`

我觉得你`"char"`以前写的很奇怪`my_wget()`。你能更具体一点吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T06:49:41.183

请参阅下面的此代码

```
#include <stdio.h>

int main()
{
char c;
printf ("%s",  st);
} 
```

当我编译它时，我得到了同样的警告信息。

```
 warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘int’ 
```

所以我将程序更改为

```
#include <stdio.h>

int main()
{
char *str = "string";
printf ("%s",  st);
} 
```

现在程序可以正确编译。

所以作为一个 c 的新手，这就是你学习语言的方式，写最小的例子，以证明你对这个概念有牢牢的把握。

# sql - 从sql表中删除多行

> ID：15353874
> 
> 赞同：1
> 
> 时间：2013-03-12T05:21:00.377
> 
> 标签：sql, sql-server-2008, sql-delete

我有一个 sql 表，比如表格

```
name         age
h             1
a             2
r             3
i             4 
```

我想删除第一行和第三行。我想要某种形式的东西，

```
delete from tablename where name=h,r; 
```

这是正确的语法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T05:21:48.073

尝试：

```
DELETE FROM tablename WHERE name IN ('h', 'r') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:23:56.600

尝试

```
delete from tablename where name='h' or name='r'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T05:43:11.313

```
You may use or operator or in condition like
delete from tablename where name='h' or name='r';

delete from tablename where name in ('h', 'r'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T05:23:36.957

您需要使用条件运算符，例如`OR，

```
DELETE FROM tablename 
WHERE  name = 'h' OR name ='r' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T06:49:42.253

您可以使用 or 运算符或在类似的条件下使用

```
delete from tablename where name='h' or name='r'; 
```

或者

```
delete from tablename where name in ('h', 'r'); 
```

# git - 如何仅在 Git 中添加分支更改？

> ID：15353875
> 
> 赞同：0
> 
> 时间：2013-03-12T05:21:06.370
> 
> 标签：git

我有一个初始项目，其中包含一些未分阶段的更改。我添加了一个新分支并对项目进行了更多更改。如何将文件添加到暂存区域，仅在该特定分支中进行更改？**我可以使用git add**手动添加每个文件，但我想知道它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:28:55.910

未暂存的更改不属于任何分支。因此，在您进行未暂存更改时创建/切换分支会将这些更改转移到新分支，就好像您在切换分支后进行了更改一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:19:26.293

我认为最好的办法是为当前暂存的更改创建一个补丁，然后将这个补丁应用到另一个分支。[您可以按照在此处](https://stackoverflow.com/questions/5159185/create-a-git-patch-from-the-changes-in-the-current-working-directory)创建分阶段更改补丁的说明进行操作

# php - 显示缩略图问题

> ID：15353880
> 
> 赞同：0
> 
> 时间：2013-03-12T05:21:34.320
> 
> 标签：php, image-upload

我在 PHP 和 MySQL 方面没有经验，但我正在尝试按照 Kevin Skoglund 的教程构建一个图像上传网站。一切都很好，直到我的图像应该显示在 html 表格的页面上。

我从我的数据库中获取了所有内容（图像大小、类型、名称、标题），但我得到的不是图像缩略图，而是断开的链接。这是相关的html

```
 <tr>
    <td><img src="../<?php echo $photo->image_path(); ?>" width="100" /></td>
    <td><?php echo $photo->filename; ?></td>
    <td><?php echo $photo->caption; ?></td>
    <td><?php echo $photo->size_as_text(); ?></td>
    <td><?php echo $photo->type; ?></td>
</tr> 
```

这是定义图像路径的php

```
protected $upload_dir="images";
public function image_path() {
return $this->upload_dir.DS.$this->filename; 
```

}

站点根定义：

```
defined('SITE_ROOT') ? null : 
    define('SITE_ROOT', DS.'wamp'.DS.'www'.DS.'projekat'); 
```

这是文件夹结构![在此处输入图像描述](../Images/4a5f5450891a85aea91c7c3ba62cd8fc.png)

这是最终结果![在此处输入图像描述](../Images/429c6b6a8fd16870a13cdca90841bedb.png)

感谢您花时间阅读并提前帮助解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:25:46.463

**编辑：**

返回 $photo->image_path() 为

```
 projekat/public/images/filename.jpg 
```

并显示

```
 <td><img src="/<?php echo $photo->image_path(); ?>" 
```

在 html 中，您可以使用开头的 '/' 来表示 root。因此，如果您将相对路径存储在数据库中

```
 $path = relative/path/to/file 
```

您可以使用

```
src = "/<?php echo $path?>" 
```

# php - Magento - 在 Magento Extension 中加载模型时出错？

> ID：15353888
> 
> 赞同：4
> 
> 时间：2013-03-12T05:22:32.593
> 
> 标签：php, magento

我正在开发一个 magento 扩展，我试图将值插入到数据库表中，但我遇到的问题是模型没有加载。

问题是当我`save()`在控制器中调用函数时，页面上出现错误：

```
Fatal error: Call to a member function beginTransaction() on a non-object in /var/www/magento/app/code/core/Mage/Core/Model/Abstract.php on line 313 
```

当我检查`system.log`文件中的错误日志时，我看到了这个错误：

```
Warning: include(Gwb/Magecrmsync/Model/Mysql4/Magecrmsync.php): failed to open stream: No such file or directory  in /var/www/magento/lib/Varien/Autoload.php on line 93 
```

我用谷歌搜索了它，但找不到答案。请帮忙

这是我的`config.xml`代码：

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
<Gwb_Magecrmsync>
    <version>0.1.0</version>
</Gwb_Magecrmsync>
</modules>
<frontend>
<routers>
    <magecrmsync>
        <use>standard</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
<layout>
    <updates>
        <magecrmsync>
            <file>adminhtml.xml</file>
        </magecrmsync>
    </updates>
</layout>
</frontend>
<admin>
<routers>
    <magecrmsync>
        <use>admin</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
</admin>
<adminhtml>
<menu>
    <menu1 translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="magecrmsync">
                <title>Customers</title>
                <action>magecrmsync/adminhtml_customers</action>
            </menuitem1>
            <menuitem2 module="magecrmsync">
                <title>Orders</title>
                <action>magecrmsync/adminhtml_orders</action>
            </menuitem2>
            <menuitem3 module="magecrmsync">
                <title>Products</title>
                <action>magecrmsync/adminhtml_products</action>
            </menuitem3>
            <menuitem4 module="magecrmsync">
                <title>Settings</title>
                <action>magecrmsync/adminhtml_settings</action>
            </menuitem4>
        </children>
    </menu1>
</menu>
<acl>
    <resources>
        <admin>
            <children>
                <menu1 translate="title" module="magecrmsync">
                    <title>Synchronize</title>
                    <sort_order>999</sort_order>
                    <children>
                        <menuitem1>
                            <title>Customers</title>
                        </menuitem1>
                        <menuitem2>
                            <title>Orders</title>
                        </menuitem2>
                        <menuitem3>
                            <title>Products</title>
                        </menuitem3>
                        <menuitem4>
                            <title>Settings</title>
                        </menuitem4>
                    </children>
                </menu1>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>
<global>
<!-- turn on models -->
<models>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Model</class>
        <resourceModel>Magecrmsync_mysql4</resourceModel>
    </magecrmsync>
    <Magecrmsync_mysql4>
        <class>Gwb_Magecrmsync_Model_Mysql4</class>
        <entities>
            <magecrmsync>
                <table>magecrmsync</table>
            </magecrmsync>
        </entities>
    </Magecrmsync_mysql4>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
    <magecrmsync_setup>
        <setup>
            <module>Gwb_Magecrmsync</module>
        </setup>
        <connection>
            <use>core_setup</use>
        </connection>
    </magecrmsync_setup>
    <magecrmsync_write>
        <connection>
            <use>core_write</use>
        </connection>
    </magecrmsync_write>
    <magecrmsync_read>
        <connection>
            <use>core_read</use>
        </connection>
    </magecrmsync_read>
</resources>

<blocks>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Block</class>
    </magecrmsync>
</blocks>

<helpers>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Helper</class>
    </magecrmsync>
</helpers>

<layout>
    <magecrmsync>
        <file>adminhtml.xml</file>
    </magecrmsync>
</layout>

</global>
</config> 
```

这是我的控制器文件中的函数：

```
public function settingsAction()
{
    if($this->getRequest()->getPost())
    {
        try
        {
            $login_info = Mage::getModel('magecrmsync/magecrmsync');
            $username = $this->getRequest()->getPost('username');
            $password = $this->getRequest()->getPost('password');

            $login_info->setUsername($username);
            $login_info->setPassword(md5($password));
            $login_info->save();

            Mage::getSingleton('adminhtml/session')->addSuccess("Login Information has been updated successfully.");                
        }
        catch(Exception $e)
        {
            Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
        }
    }
    else
    {
        Mage::getSingleton('adminhtml/session')->addError("Error! Please try again.");
    }
    $this->_redirect('/*/*');
} 
```

谁能确定这里没有让我的模型加载的问题？

任何帮助将不胜感激，并将对我有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:50:16.913

经过24个多小时的研究，我终于让它工作了。由于文件夹权限，我遇到了这个错误（找不到文件）。当我授予它工作的文件夹的权限时。谢谢你帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:48:56.550

Magento 尝试从 加载您的文件，这意味着它将您的**资源模型**`Mage/Magecrmsync/Mysql4/Model/Magecrmsync.php`的别名解释为. 让我们看看，您是如何配置资源模型别名的：`'magecrmsync/magecrmsync'`**`Mage_Magecrmsync_Mysql4_Model_Magecrmsync`**

 **```
 <resourceModel>Magecrmsync_mysql4</resourceModel> 
```

进而：

```
<magecrmsync_mysql4> 
```

元素名称区分大小写，因此 Magento 找不到它并将其解释为具有默认命名空间的类别名`Mage`。**

# javascript - Chrome 中的图像预加载画布

> ID：15353889
> 
> 赞同：2
> 
> 时间：2013-03-12T05:22:35.203
> 
> 标签：javascript, html, google-chrome, canvas, preload

据我所知，我已经成功预加载了所有图像。在 FireFox 中，一切都呈现得很好，但它拒绝在 Chrome 中显示。我已经在使用 webkit 浏览器时遇到过其他随机的怪癖，我认为这只是其中之一。这是适用的代码（我为篇幅道歉，只是冗长。我向你保证，其中大部分都很简单）。

initResources() 从 $(document).ready() 函数调用，其中画布也被正确初始化。

具体问题似乎是游戏板。X 和 O（它是 tictactoe...）看起来不错，但游戏板拒绝单独出现在 Chrome 的画布上。适用于所有其他浏览器。Chrome 的开发者工具坚称它们是通过网络选项卡加载的，控制台显示了它应该显示的所有内容。谢谢你。

[编辑：刚刚在 Firefox 中也失败了。可能是缓存问题，此时我更加困惑]

```
var canvas, context, playerPiece, aiPiece;
var x = new Image();
var o = new Image();
var gameBoard = new Image();
var numResources = 3;   // Total number of resources to wait for loading
var curResources = 0;

function initResources() {
    // Get all our resources ready to go
    x.height = 130;
    x.width = 130;
    x.onload = isLoaded();
    x.src = "images/gamepieceX.png";

    o.height = 130;
    o.width = 130;
    o.onload = isLoaded();// = curResources++;
    o.src = "images/gamepieceO.png";

    gameBoard.height = 500;
    gameBoard.width = 500;
    gameBoard.onload = isLoaded(); //= curResources++;
    gameBoard.src = "images/gameBoard.png";
}

function isLoaded() {
    curResources++;
    console.log("Loaded resource! Total: " + curResources);
    if(curResources == numResources) {
        console.log("All loaded up! Moving on!");
        gameSetup();
    }
}

function gameSetup() {
    // Draw our board and assign a piece
    console.log("Setting up game!");
    playerPiece = x;
    aiPiece = o;

    // Draw gameboard
    context.drawImage(gameBoard, 0, 0);
    console.log(gameBoard);

    canvas.addEventListener ("mousedown", mouseClicked, false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:30:44.033

我是在调用函数内联而不是为每个图像上的 .onload 回调。这是在加载图像之前启动游戏初始化。感谢那些发表评论的人，但我在这里发帖后才看到这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T20:01:41.370

这是一个可能与此有关的 chrome 错误的链接。

[https://code.google.com/p/chromium/issues/detail?id=245296](https://code.google.com/p/chromium/issues/detail?id=245296)

而不是使用

```
new Image() 
```

以老式方式创建图像元素

```
document.createElement("img") 
```

# asp.net - 在重新调整 UltraWebGrid (asp.net) 中的列大小时，必须更改列对齐方式

> ID：15353891
> 
> 赞同：0
> 
> 时间：2013-03-12T05:22:56.400
> 
> 标签：asp.net, infragistics, ultrawebgrid

在重新调整 UltraWebGrid (asp.net) 中的列大小时，必须更改列对齐方式...所有标题名称从左侧向右对齐（即未对齐格式）

如何解决？

> [http://i.stack.imgur.com/1m3xz.png](http://i.stack.imgur.com/1m3xz.png)

# extjs - 我们可以在 ext.js 中打印图表、pdf 和其他网格报告吗？

> ID：15353892
> 
> 赞同：2
> 
> 时间：2013-03-12T05:22:59.317
> 
> 标签：extjs, sencha-charts

我是 Ext.js 的新手，打算使用 Ext.js 开发应用程序，根据需要需要打印图表、pdf 和其他网格报告。**谁能告诉我 ext.js 有可能吗？**如果可能意味着可以让我知道如何实现？请给我相关链接，否则给我提示？非常感谢谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:27:43.407

ExtJS 不允许任何功能打印任何东西。

您需要使用 aspos 或 open xml 等其他库来生成 excel 表格、pdf 文件，您可以在其中绘制图表、网格。

我希望这能澄清你的问题。

# node.js - 节点：没有方法创建

> ID：15353894
> 
> 赞同：0
> 
> 时间：2013-03-12T05:23:00.957
> 
> 标签：node.js, restify

我正在尝试在这个 git hub 站点上测试节点/骨干教程`$ git clone git://github.com/antoviaque/backbone-relational-tutorial.git`。当我启动节点服务器（通过运行 command `node app`）时，我收到一个错误，即方法 create 在 restify 模块中不存在。服务器似乎启动后立即触发错误

```
restify listening at http://0.0.0.0:3001 
```

我对 node 一点经验都没有，如果你能提供任何帮助，我将不胜感激。

```
node_modules/restify/lib/server.js:724
        d = domain.create();

Object function Domain(options){
...lots of code ommitted....
    has no method 'create'
        at Server._run (/Users/mm/Sites/backboneforum/node_modules/restify/lib/server.js:724:20)
        at onRoute (/Users/mm/Sites/backboneforum/node_modules/restify/lib/server.js:592:38)
        at Router.find (/Users/mm/Sites/backboneforum/node_modules/restify/lib/router.js:372:17)
        at _route (/Users/mm/Sites/backboneforum/node_modules/restify/lib/server.js:532:29)
        at Server._handle (/Users/mm/Sites/backboneforum/node_modules/restify/lib/server.js:617:17)
        at Server.onRequest (/Users/mm/Sites/backboneforum/node_modules/restify/lib/server.js:201:22)
        at Server.emit (events.js:70:17)
        at HTTPParser.onIncoming (http.js:1514:12)
        at HTTPParser.onHeadersComplete (http.js:102:31)
        at Socket.ondata (http.js:1410:22) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:45:00.550

要将评论放入答案中：

它不起作用，因为该`domain`模块是作为 Node.js 0.8 的一部分引入的。由于您正在运行 0.6，因此无法找到它。因此，您会收到相应的错误消息。

正如你所说，你`package.json`说：

```
"node": ">= 0.6.0 < 0.7.0" 
```

尝试将此设置调整为也接受 Node.js 0.8（甚至 0.10）的值，或者 - 这可能是更好的解决方案 - 完全摆脱这条线。如果您不使用任何特定于 Node.js 0.6 的东西，那么一切都应该仍然有效。

希望这可以帮助。

# facebook-login - 新的小型 Facebook oauth 网络对话 x 旧的大型经典 oauth 对话

> ID：15353896
> 
> 赞同：1
> 
> 时间：2013-03-12T05:23:21.080
> 
> 标签：facebook-login, facebook-oauth

我想从图像 #1 中获取完整的 oauth 旧对话框，并且我在图像 #2 上获得了小的新对话框

当我在developers.facebook.com/apps 上预览我的对话框时，我得到了我想要的，但是当我加载时

[https://www.facebook.com/dialog/oauth?client_id=123&redirect_uri=www](https://www.facebook.com/dialog/oauth?client_id=123&redirect_uri=www)我得到了新的小号。

它与使用不同 client_id 的相同 url 与用户无关，来自另一个应用程序可以正常工作。是流量吗？

感谢您提供任何线索。

![图像1](../Images/cccb585727f91b41e222a291b71d9e41.png)

![图2](../Images/12ee4a1590071769b20b6c91b48fcc47.png)

# android - 当应用程序被强制关闭或设备重新启动时，共享首选项会重置数据

> ID：15353900
> 
> 赞同：11
> 
> 时间：2013-03-12T05:23:39.350
> 
> 标签：android, sharedpreferences

我正在开发一个应用程序，我在其中存储`username`和`password`. `SharedPreferences`一切对我来说都很好，存储和检索值。但我发现当我重新启动设备或应用程序被强制关闭时，存储的值`SharedPreferences`被重置。当我再次启动我的应用程序时，我在`SharedPreferences`键中得到空值。这是我为存储值所做的事情：

```
SharedPreferences emailLoginSP;

emailLoginSP = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
emailLoginSP.edit().putString("prefEmailId", email_text).commit();
emailLoginSP.edit().putString("prefUserId", userIDToken).commit();
emailLoginSP.edit().putString("prefAccess_token", accessToken).commit();

Intent i = new Intent(LoginWithEmail.this,UserInfoActivity.class);
i.putExtra("acess_token", accessToken);
i.putExtra("user_id", userIDToken);
i.putExtra("emailID", email_text);
startActivity(i); 
```

而且，这就是我正在检索它的方式：

```
SharedPreferences emailLoginSP = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

loginEmail = emailLoginSP.getString("prefEmailId", null);
loginUserId = emailLoginSP.getString("prefUserId", null);
loginAccessToken = emailLoginSP.getString("prefAccess_token", null); 
```

到目前为止，一切都很好。我再次说明我的问题，即当我强制关闭或重新启动设备时我得到空值。我们可以将其永久存储在应用程序内存中吗？或者，我在这里做错了什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T05:52:57.163

我有一个登录屏幕，并希望在应用程序关闭/销毁/电话/等后，该应用程序在内部屏幕上保持“登录”状态。

我有一个`Preferences`对象来保存`Login`or之后的值`Register`。我阅读了所有关键屏幕`onResume()`方法中的偏好值。

**登录后（例如）：**

```
SharedPreferences app_preferences = PreferenceManager.getDefaultSharedPreferences(activity);
SharedPreferences.Editor editor = app_preferences.edit();
editor.putString("sessionId", application.currentSessionId);
editor.putString("userId", application.currentUserId);
editor.putString("userEmail", application.currentUserEmail);
editor.putString("siteUserId", application.currentSiteUserId);
editor.commit(); 
```

**在活动的 onResume() 内：（** 即，在内部屏幕内）

```
SharedPreferences app_preferences = PreferenceManager.getDefaultSharedPreferences(activity);
application.currentSessionId = app_preferences.getString("sessionId", "");
application.currentUserId = app_preferences.getString("userId", "");
application.currentUserEmail = app_preferences.getString("userEmail", "");
application.currentSiteUserId = app_preferences.getString("siteUserId", ""); 
```

笔记。我有应用程序“全局”变量，即，`application.currentSessionId`你可以替换你的变量

尝试类似的事情，也许您没有正确保存或检索值，因为`SharePreferences`应该可以

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-25T07:24:55.487

**你好 ！对我有用的解决方案！**

[解决方案 1](http://i.stack.imgur.com/lHDvR.png) [解决方案 2](http://i.stack.imgur.com/Z0fob.png)

解决方案1：

> ```
>  SharedPreferences sharedPreferences = getSharedPreferences("namefile",               
>     Context.MODE_PRIVATE);//store or retrieved file "namefile.xml".
>     /*or 
>    SharedPreferences sharedPreferences    
>    =getActivity().getSharedPreferences("namefile", Context.MODE_PRIVATE); 
>    (use Shared Preferences in Fragment)*/
>    String getValueFromKey = sharedPreferences.getString("yourKey",new   
>    String());
>    //Log.d("printf:",getValueFromKey );
>    getValueFromKey ="Hahaha"; /*  Edit value    
>    or Do nothing …… */
>    SharedPreferences.Editor editor = sharedPreferences.edit();
>    editor.clear(); //[important] Clearing your editor before using it.
>    editor.putString("yourKey", getValueFromKey);
>    editor.commit(); 
> ```

解决方案2：

> ```
> SharedPreferences sharedPreferences = getSharedPreferences("namefile",     
>   Context.MODE_PRIVATE);//store or retrieved file "namefile.xml".
> /*or 
> SharedPreferences sharedPreferences = 
> getActivity().getSharedPreferences("namefile", Context.MODE_PRIVATE); 
> (use Shared Preferences in Fragment)
> */
> Set<String> getListValueFromKey =
> sharedPreferences.getStringSet("yourKey",new HashSet<String>());
> getListValueFromKey.add("Hahaha");
> getListValueFromKey.add("Kakaka");
> getListValueFromKey.add("Hohoho");
> /*  Add value or Do nothing …… */
> SharedPreferences.Editor editor = sharedPreferences.edit();
> editor.clear(); //[important] Clearing your editor before using it.
> editor.putStringSet("yourKey", getListValueFromKey);
> editor.commit(); 
> ```

我遇到了和你一样的问题，这对我有用。对于我的整个代码示例，请参见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:52:03.577

改成：

```
SharedPreferences emailLoginSP;
SharedPreferences.Editor SPEdit;

emailLoginSP = getSharedPreferences("pref_file_name",MODE_PRIVATE);
SPEdit = emailLoginSP.edit();

SPEdit.putString("prefEmailId", email_text);
SPEdit.putString("prefUserId", userIDToken);
SPEdit.putString("prefAccess_token", accessToken);
SPEdit.commit(); 
```

注意：这是未经测试的，来自内存，因此可能存在错误。

你想最小化`.commit()`调用，这就是为什么最后只有一个。

`pref_file_name`可以是任何你想要的，小写字母，开头没有数字等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:45:17.567

看我做了如下。

```
 sharedPreferences = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
        editor = sharedPreferences.edit();
        isPaidVerison = sharedPreferences.getInt("isPaidVerison", 0);

        editor.putInt("isPaidVerison", 1);
        editor.commit(); 
```

这很好用。**数据将保留在 Sharedprefrences 中，直到不会重新安装应用程序或直到不会清除数据。**

我以这种方式检索数据。

```
 isPaidVerison = sharedPreferences.getInt("isPaidVerison", 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-29T03:34:13.127

确保您使用相同的文件进行保存和检索。这让我看起来真的很愚蠢:(

```
// When saving
public SharedPreferences.Editor getEditor(Activity activity, int mode) {
    SharedPreferences sharedPref = activity.getApplicationContext().getSharedPreferences(PreferenceConstants.SWAGGER_USER_PREFS, mode);
    SharedPreferences.Editor editor = sharedPref.edit();
    return editor;
}

// When getting it
    public SharedPreferences getSharedPref(Activity activity, int mode) {
            SharedPreferences sharedPref = activity.getSharedPreferences(PreferenceConstants.SWAGGER_USER_PREFS, mode);
            return sharedPref;
        } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-12T06:13:29.447

如果您想尝试共享首选项以外的方法，则可以使用文件写入值，然后从中检索值。声明一个文本文件 emailLogin.txt 并按如下方式使用它来写入数据。

```
 try {
                Context context = MainActivity.this;
                OutputStreamWriter out=
                        new OutputStreamWriter(context.openFileOutput(EMAILLOGIN, 0));

                out.write(email_text);                   
                out.write("\r\n");
                out.write(userIDToken);                   
                out.write("\r\n");
                out.write(accessToken);                   
                out.write("\r\n");

                out.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

写入文件后，您可以执行以下操作来读取它。

```
 File file = this.getFileStreamPath(EMAILLOGIN);

            if(file.exists())
            {
                try {
                    InputStream in=openFileInput(NUMBERS);

                    if (in!=null) {
                        InputStreamReader tmp=new InputStreamReader(in);
                        BufferedReader reader=new BufferedReader(tmp);
                        String str;
                        String strcount[]= new String[20];                                                        

                        java.util.Arrays.fill(strcount, 0, 10, "");
                        while ((str = reader.readLine()) != null) {                       
                            strcount[linecount]=str;                              
                        }

                        loginEmail = strcount[0];
                        loginUserId = strcount[1];
                        loginAccessToken = strcount[2];

                        in.close();              
                    }
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } 
```

这将确保即使您的应用程序强制关闭或您的设备重新启动，您仍然可以从文件中读取所需的值。

# c++ - 如何知道何时使用 CCdataType* varName 与 CCdataType *pVarName

> ID：15353906
> 
> 赞同：0
> 
> 时间：2013-03-12T05:23:56.373
> 
> 标签：c++, cocos2d-x

我的问题是你怎么知道什么时候使用语法`CCdataType* varName = ...`，而`CCdataType *pVarName = ...`我知道第二个是指针，但也许我遗漏了一些东西......我不明白其中的区别。第一个是尊重声明吗？如果您引用的值超出了您正在写入的类的范围，您是否使用 CCdataType *pVarName 中的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T06:14:35.393

> ...我知道第二个是指针...

两者都是指针。只是“*”左移和右移。

*   `CCdataType* varName = ...`通常被认为是更多的 C++ 风格。
*   另一方面`CCdataType *pVarName = ...`，在声明多个指针成员的情况下更直观，例如：`T *p1, *p2, *p3;`.

顺便说一句，你甚至可以写：

```
CCdataType*pVarName = ... 
```

这是[Bjarne 的常见问题页面](http://www.stroustrup.com/bs_faq2.html#whitespace)中针对您的问题的确切信息。

# lightbox - 单击提交按钮后，如何从下拉选项列表中打开灯箱中的图像

> ID：15353912
> 
> 赞同：0
> 
> 时间：2013-03-12T05:24:12.550
> 
> 标签：lightbox

我整天在网上搜索结果以解决我的问题...

我想要一个选项列表，每个选项都链接到不同的图像。但是，我希望图像在同一页面上的灯箱中打开，而不是在新窗口中打开图像（wordpress 的灯箱进化是我正在使用的插件）。

我尝试在输入字段中使用 onclick，灯箱将打开（如果 class="lightbox"）但没有图像加载。

我不知道是否需要添加一个函数，允许输入识别选择了哪个选项，以便在单击输入按钮时，该特定图像会在灯箱中打开。

如果我确实需要一个功能，我不知道在哪里添加功能... onclick？选项标签中的某处，还是选择标签？

```
<form>
<select>
<option value="linkimage1.jpg">image 1</option>
<option value="linkimage2.jpg">image 2</option>
<option value="linkimage3.jpg">image 3</option>
<input type="button" value="submit" />
</select>
</form> 
```

任何帮助都将不胜感激，即使它是一个很好的链接，可以解释我如何创建一个函数并将其添加到我的代码中，然后使用解决方案将该函数调用到我的下拉列表中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:18:38.837

如果使用 iLightBox [http://ilightbox.net/](http://ilightbox.net/)你可以这样做：

```
<select id="selectImage">
    <option>Select Image</option>
    <option value="linkimage1.jpg">image 1</option>
    <option value="linkimage2.jpg">image 2</option>
    <option value="linkimage3.jpg">image 3</option>
</select>

<script>
    jQuery(document).ready(function($){
        $('select#selectImage').change(function(){
            var $this = $(this),
                url = $this.val();

            $.iLightBox(url);
        });
    });
</script> 
```

# java - Java - 读取/扫描文本文件的字符串长度并在程序中使用它

> ID：15353913
> 
> 赞同：0
> 
> 时间：2013-03-12T05:24:16.907
> 
> 标签：java, string, file, search

我正在尝试用 Java 制作一个简单的刽子手游戏。我确实有一个名为 dictionary.txt 的文本文件，其中包含来自英语词典的 120K 单词。当我要提示用户输入字长并显示具有该特定长度的字数时，就会出现问题。

在这里花了相当多的时间和谷歌搜索后，我已经走到了这一步，但现在我被困住了：

```
import java.util.Scanner;
import java.io.*;
import java.io.IOException;

public class Hangman 

{

public static void main(String[] args) throws IOException
{
    // declaring variables
    int wordLength;
    int guessNumber;

    // initiate the scanner
    Scanner keyboard = new Scanner( System.in );

    // read the dictionary file 

    File file = new File("dictionary.txt");
    StringBuilder contents = new StringBuilder();
    BufferedReader reader = null;

    // prompt the user for word length

    System.out.println("Welcome to Hangman. Let's play! ");
    System.out.println("Please enter the desired word length: ");
    wordLength = keyboard.nextInt();

    while(wordLength < 0 || wordLength > 26)
    {
        System.out.println("This is not a valid word length. ");
        System.out.println("Please enter the desired word length: ");
        wordLength = keyboard.nextInt();
    }

    // prompt the user for number of guesses 

    System.out.println("How many guesses do you want to have? ");
    guessNumber = keyboard.nextInt();

    while(guessNumber < 0)
    {
        System.out.println("Number of guesses has to be a postive integer. ");
        System.out.println("Please enter the desired number of guesses: ");
        guessNumber = keyboard.nextInt();
    }

    } 
```

}

**我的目标是提示用户输入字长，如果 dictionary.txt 文件中不存在所需的字长，那么它会一直询问，直到给出有效响应。**

**我还希望能够打印给定单词长度的单词数量（例如，如果用户输入“10”，那么它会显示 dictionary.txt 中有多少单词长度为 10 个字母。**

代码的以下部分是我希望用读取 txt 文件并随后执行的代码替换的部分：

```
while(wordLength < 0 || wordLength > 26)
{
    System.out.println("This is not a valid word length. ");
    System.out.println("Please enter the desired word length: ");
    wordLength = keyboard.nextInt();
} 
```

我可能采取了错误的方法，因此非常欢迎所有反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:39:55.667

此代码可用于建立每个字长的字数。

```
// map where the key is the length of a word and
// the value is the number of words of that length
Map<Integer, Integer> numberOfWordsOfLength = new HashMap<>();

Scanner dictionaryScanner = new Scanner(file);

while (dictionaryScanner.hasNext())
{
   String word = dictionaryScanner.next();
   int wordLength = word.length();
   numberOfWordsOfLength.put(wordLength, 1 +
      numberOfWordsOfLength.containsKey(wordLength) ?
      numberOfWordsOfLength.get(wordLength) :
      0);
} 
```

然后，当您想知道是否有任何给定长度的单词时，您可以使用它。

```
numberOfWordsOfLength.containsKey(length) 
```

当您想获取字典中具有给定长度的单词数时，可以使用它。

```
numberOfWordsOfLength.get(length) 
```

* * *

稍后，当你想选择一个给定长度的随机单词时，你可以这样做。

```
int wordIndex = new Random().nextInt(numberOfWordsOfLength.get(length));
Scanner dictionaryScanner = new Scanner(file);
String word;
while (dictionaryScanner.hasNext())
{
   String candidateWord = dictionaryScanner.next();
   if (candidateWord.length() != length) continue;
   if (wordIndex == 0)
   {
      word = candidateWord;
      break;
   }
   --wordIndex;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:47:29.453

试试这个：

```
try
{
    Scanner input = new Scanner(file);
    boolean flag = true;
    while(flag)
    {
        ArrayList<String> words = new ArrayList<String>(120000);
        while(input.hasNextLine())
        {
            String s = in.nextLine();
            if(s.length() == wordLength)
            {
                words.add(s);
            }
        }
        if(words.isEmpty())
        {
            System.err.print("Invalid word length, please try again\n>");
            wordLength = keyboard.nextInt();
        }
        else
        {
            flag = false;
            System.out.println("There were " + words.size() + " such words");
        }
    }
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

它有效吗？

# c# - 托管用 linux 编写的服务并通过在 Windows 7 中运行的 C# 使用它

> ID：15353918
> 
> 赞同：0
> 
> 时间：2013-03-12T05:24:41.763
> 
> 标签：c#, java, linux, service

我需要在linux中编写一个web服务，通​​过一个java程序。提供的服务应该是一个文本文件。说每当客户端访问服务时，它应该返回一个文件说/tmp/sample.txt。

问题是，客户端是在 Windows 7 上运行的 C# 程序。Linux 将在 Windows 中作为虚拟机运行。

我需要的是：

1.  我如何在 linux 中托管一个用 java 编写的服务。

2.  我如何在 ac# 程序的 windows 客户端中访问它。

如果有人在这方面帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:39:59.760

您可以将 Tomcat 集成到 Apache 中，以便在 Linux 上托管 Java 站点。这是 Apache Tomcat 的站点：http: [//tomcat.apache.org/](http://tomcat.apache.org/)。不要忘记，您还需要在 Linux 服务器上安装 JDK，以便它可以运行 Java 程序。

这是一个可以帮助您在 Linux 的 RedHat 发行版上开始使用它的网站：http: [//easylinuxtutorials.blogspot.com.au/2012/07/how-to-install-apache-tomcat-7-on.html](http://easylinuxtutorials.blogspot.com.au/2012/07/how-to-install-apache-tomcat-7-on.html)

只要它有一个可访问的 URL，您就可以调用该 URL，然后通过将其保存到本地目录并从下载的文件中读取它来读取文件，或者直接将其读取到文件流中。检查[如何从互联网读取文件？](https://stackoverflow.com/questions/2471209/how-to-read-a-file-from-internet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T23:43:22.947

您的意思是在 Linux 上使用 Java-WS 托管服务！没有什么是“用 Linux 编写的”

这里有两件显示...

**步骤 1.**在 Fedora/Linux 上使用 SFTP 创建一个 VM，以便您可以将在 Windows 工作站上创建的 Java-ws（使用 Netbeans 或记事本！）上传到 VM。 [https://gridwizard.wordpress.com/2014/12/28/install-tomcat-on-fedora-vm-for-msdev/](https://gridwizard.wordpress.com/2014/12/28/install-tomcat-on-fedora-vm-for-msdev/)

**STEP 2.**创建一个简单的 java-ws，放在 Tomcat 下，然后从 C# 消费 [https://gridwizard.wordpress.com/2014/12/26/java-ws-and-dotnet-interop-example/](https://gridwizard.wordpress.com/2014/12/26/java-ws-and-dotnet-interop-example/)

# php - php 检查数组索引是否越界

> ID：15353924
> 
> 赞同：0
> 
> 时间：2013-03-12T05:25:10.370
> 
> 标签：php, arrays

考虑以下数组。

```
$a['a'] = 1;
$a['b'] = 2;
$a['c'] = 3;
$a['d'] = 4; 
```

然后我循环数组

```
foreach( $a as $q => $x )
{

  # Some operations ....

  if( isLastElement == false  ){ 
     #Want to do some more operation
  }
} 
```

我怎么知道当前位置是`last`不是？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:29:20.487

取最后一个元素的键并进行比较。

```
$last_key = end(array_keys($a));

foreach( $a as $q => $x )
{
 # Some operations ....
 if( $q == $last_key){ 
     #Your last element
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:27:59.950

```
foreach (array_slice($a, 0, -1) as $q => $x) {

}
extraProcessing(array_slice($a, -1)); 
```

编辑：

`array_slice`如果您想对最后一个元素进行相同的处理，我想第一个不是必需的。其实两者都不是最后一个。

```
foreach ($a as $q => $x) {

}
extraProcessing($q, $x); 
```

最后的元素在循环之后仍然可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:28:58.530

您可以使用该[`end()`](http://php.net/manual/en/function.end.php)功能进行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:29:24.573

```
<?php
$a['a'] = 1;
$a['b'] = 2;
$a['c'] = 3;
$a['d'] = 4;

$endkey= end(array_keys($a));

foreach( $a as $q => $x )
{

  # Some operations ....

  if( $endkey == $q  ){ 
     #Want to do some more operation
     echo 'last key = '.$q.' and value ='.$x;
  }
}
?> 
```

# java - 多个线程编辑 ArrayList 及其对象

> ID：15353925
> 
> 赞同：1
> 
> 时间：2013-03-12T05:25:19.030
> 
> 标签：java, multithreading, arraylist, wait, synchronized

我正在尝试运行 2 个并发线程，其中一个不断将对象添加到列表中，另一个更新这些对象，并且也可能从列表中删除其中一些对象。我有一个`ArrayList`用于我的方法和类的整个项目，所以现在很难改变它。

我环顾四周，发现了几种方法，但正如我所说，很难从`ArrayList`. 我尝试使用`synchronized`and `notify()`for 将对象添加到列表`wait()`中的方法，以及更改这些对象的方法，如果它们符合某些条件，则可能会删除它们。

现在，我已经想出了如何使用 a 来做到这一点`CopyOnWriteArrayList`，但我想知道是否有可能使用`ArrayList`它自己来模拟这个。这样我就不必编辑我的整个代码。

所以，基本上，我想做这样的事情，但是`ArrayList`：

```
import java.util.Iterator;
import java.util.concurrent.CopyOnWriteArrayList;

public class ListExample{
    CopyOnWriteArrayList<MyObject> syncList;

    public ListExample(){
        syncList = new CopyOnWriteArrayList<MyObject>();

        Thread thread1 = new Thread(){
            public void run(){
                synchronized (syncList){
                    for(int i = 0; i < 10; i++){
                        syncList.add(new MyObject(i));
                    }
                }
            }
        };

        Thread thread2 = new Thread(){
            public void run(){
                synchronized (syncList){
                    Iterator<MyObject> iterator = syncList.iterator();
                    while(iterator.hasNext()){
                        MyObject temp = iterator.next();

                        //this is just a sample list manipulation
                        if (temp.getID() > 3)
                            syncList.remove(temp);

                        System.out.println("Object ID: " + temp.getID() + " AND list size: " + syncList.size());
                    }
                }
            }
        };

        thread1.start();
        thread2.start();
    }

    public static void main(String[] args){
        new ListExample();
    }
}

class MyObject{
    private int ID;

    public MyObject(int ID){
        this.ID = ID;
    }

    public int getID(){
        return ID;
    }

    public void setID(int ID){
        this.ID = ID;
    }
} 
```

我也读过，`Collections.synchronizedList(new ArrayList())`但我相信这将需要我更改我的代码，因为我有大量的方法可以`ArrayList`作为参数。

任何指导将不胜感激，因为我没有想法。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T05:34:08.343

您可能对[`java.util.concurrent`](http://docs.oracle.com/javase/6/docs/api/)包提供的收藏感兴趣。它们对于生产者/消费者场景非常有用，其中一个或多个线程将事物添加到队列中，而其他线程获取它们。有不同的方法取决于您是要阻塞还是在队列满/空时失败。

关于重构您的方法，您应该使用接口（例如`List`）而不是具体的实现类（例如`ArrayList`）。这就是接口的目的，Java API 提供了很好的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:34:26.727

作为一种快速解决方案，您可以扩展 ArrayList 并使修改方法（添加/删除）同步。并重构代码以将 ArrayList 替换为您的自定义 ArrayList

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T06:01:43.187

使用`Vector`而不是`ArrayList`. 请记住将其存储在`List`引用中，因为 Vector 包含不推荐使用的方法。与 ArrayList 不同，Vector 会同步其内部操作，而与 ArrayList 不同`CopyOnWriteArrayList`，它不会在每次进行修改时复制内部数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T06:15:04.597

当然你应该使用`java.util.concurrent`包。但是，让我们看看仅`ArrayList`和同步会发生什么/可能发生什么。

在您的代码中，如果您只是`ArrayList`代替，它应该可以工作，因为您已经为您在线程中所做/操作的任何事情`CopyOnWriteArrayList`提供了完全同步。`synchronized (syncList)`如果整个事情是同步的，则不需要任何`wait()` `notify()`内容​​（但不建议这样做，以后会这样）。

但是这段代码会给出`ConcurrentModificationException`，因为一旦你使用迭代器`syncList.iterator()`，你不应该从该列表中删除元素，否则它可能会在迭代时产生不良结果，这就是它被设计为快速失败并给出异常的原因。为避免这种情况，您可以使用如下：

```
 Iterator<MyObject> iterator = syncList.iterator();
                ArrayList<MyObject> toBeRemoved = new ArrayList<MyObject>();
                while(iterator.hasNext()){
                    MyObject temp = iterator.next();

                    //this is just a sample list manipulation
                    if (temp.getID() > 3)
                    {
                        //syncList.remove(temp);
                        toBeRemoved.add(temp);
                    }
                    System.out.println("Object ID: " + temp.getID() + " AND list size: " + syncList.size());
                }
                syncList.removeAll(toBeRemoved); 
```

现在关于同步，你应该努力最小化它的范围，否则线程之间会有不必要的等待，这就是为什么 java.util.concurrent 包在多线程中具有高性能（甚至使用非阻塞算法）。或者你也可以使用`Collections.synchronizedList(new ArrayList())`，但它们不如`concurrent`类。

如果你想像在生产者/消费者问题中那样使用条件同步，那么你可以`wait()` `notify()`在同一个对象上使用机制（锁）。但是同样已经有一些类可以帮助使用`java.util.concurrent.LinkedBlockingQueue`.

# objective-c - 排行榜请求、嵌套块和保留周期

> ID：15353926
> 
> 赞同：0
> 
> 时间：2013-03-12T05:25:19.583
> 
> 标签：objective-c, objective-c-blocks, gamekit, retain-cycle

我为我的 iPhone 游戏开发了一个排行榜显示类。该类具有以下实例方法。

```
-(void)displayScoresWithRequest:(CBLeaderboard*)request completionHandler:(void(^)())completionHandler
{
    if (request_ != nil)
        return;

    request_ = [[CBLeaderboard alloc] init];
    [request_ setCategory:[request category]];
    [request_ setPlayerScope:[request playerScope]];
    [request_ setTimeScope:[request timeScope]];
    [request_ setRange:[request range]];

    __block CBLeaderboardDisplay* blockSelf = self;
    [request_ loadScoresWithCompletionHandler:^(NSArray* scores, NSError* error)
    {
        blockSelf->request_ = nil;

        NSUInteger scoresCount = [scores count];
        if (scoresCount == 0 && error != nil)
            return;

        NSMutableArray* playerIDs = [NSMutableArray array];
        for (GKScore* score in scores)
            [playerIDs addObject:[score playerID]];

        [GKPlayer loadPlayersForIdentifiers:playerIDs withCompletionHandler:^(NSArray* players, NSError* error)
        {
            if (scoresCount > [players count] && error != nil)
                return;

            [blockSelf displayScores:scores players:players];

            completionHandler();
        }];
    }];

    [request_ release];
} 
```

如您所见，该方法复制排行榜请求，执行它，然后调用提供的完成处理程序。我的游戏中的一个图层调用这个方法如下。

```
-(void)refreshDisplay
{
    CBLeaderboard* request = [[CBLeaderboard alloc] init];
    [request setCategory:[[sharedGameCenterManager_ classicLeaderboard] category]];
    [request setPlayerScope:GKLeaderboardPlayerScopeFriendsOnly];
    [request setTimeScope:GKLeaderboardTimeScopeAllTime];

    static NSRange kRequestRange = NSMakeRange(1, 3);
    [request setRange:kRequestRange];

    __block GJGameOver* blockSelf = self;
    [display_ displayScoresWithRequest:request completionHandler:^
    {
        CGSize displayContentSize = [blockSelf->display_ contentSize];
        displayContentSize.width = width(blockSelf) - 2.0 * kGJLabelPadding;
        [blockSelf->display_ setContentSize:displayContentSize];

        CGFloat displayHeight =
            bottomEdge(blockSelf->multiplierLabel_) - topEdge(blockSelf->menu_) - 2.0 * kGJLabelPadding;
        CGFloat displayScoreDisplaysCount = [blockSelf->display_ scoreDisplaysCount];
        CGFloat displayLabelPadding =
            (displayHeight - [blockSelf->display_ minContentSize].height) / displayScoreDisplaysCount;
        [blockSelf->display_ setLabelPadding:MIN(floor(displayLabelPadding), kGJLabelPadding)];

        static CGFloat kFadeInDuration = 2.0;
        if ([blockSelf->display_ opacity] == 0)
            [blockSelf->display_ runAction:[CCFadeIn actionWithDuration:kFadeInDuration]];
    }];

    [request release];
} 
```

当层和显示都被释放并且请求尚未完成时，我的游戏崩溃了。当请求完成时，它会尝试向已释放的实例发送消息，然后崩溃。是否可以取消排行榜请求？如果没有，有什么办法可以避免崩溃而不会导致内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:22:10.797

在您的两个块中，您使用`__block`允许块引用`self`而不保留它。这就是问题所在，因为您正在执行异步操作，并且如果块在`self`被释放后执行，则它使用的是悬空指针。方块保留它们捕获的对象的全部目的是让它们保持活力，以便方块可以使用它。

制作块时不保留`self`通常是为了避免保留循环。但是，我在这里看不到任何保留周期：

*   `request_`in可能会`displayScoresWithRequest`保留块 in`displayScoresWithRequest`
*   `displayScoresWithRequest`保留中的块`self`，`CBLeaderboardDisplay`对象
*   中的块`displayScoresWithRequest`保留来自的块`refreshDisplay`
*   `refreshDisplay`保留中的块`self`，`GJGameOver`对象
*   对象`GJGameOver`保留，`display_`对象`CBLeaderboardDisplay`

但是，该`CBLeaderboardDisplay`对象不保留其实例变量`request_`。（这段代码写得非常糟糕，`request_`在方法结束时发布，但没有设置`nil`为一次与否。）

# javascript - IE、Mozilla 和 Chrome 支持的 3D Javascript 库

> ID：15353933
> 
> 赞同：1
> 
> 时间：2013-03-12T05:25:58.277
> 
> 标签：javascript, 3d

我正在寻找与 IE、Mozilla 和 Chrome 兼容的 3D Javascript 库。使用 Web GL 的库可以在 Mozilla 和 Chrome 上运行，但几乎没有 IE 的支持。我们需要添加插件才能在 IE 中运行。

我们有支持 IE 浏览器的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:39:30.450

我认为您需要[three.js](http://mrdoob.github.com/three.js/) - 检查画布示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T02:44:58.647

我不知道您有什么样的期望，因为您正在使用 WebGL。您没有具体说明您希望使用哪种图形效果，但总的来说，使用 2D Canvas 上下文很难（如果不是不可能）完成一些视觉壮举，而您可能会发现在 WebGL 中更容易。一些插件（例如 Unity、Shockwave、Java [如果您的用户仍然觉得用它浏览 Web 足够安全]，甚至 Flash [在某种程度上]）提供了这种华丽的 3D 视觉质量，尽管它们在操作方面受到影响系统兼容性。无论如何，他们都使用 IE。

话虽如此，我假设您不熟悉 Three.js 的 2D Canvas 后备模式。除了没有 WebGL 部分外，它基本上与您习惯的旧 WebGL 相同。问题是，除了图形看起来不太好之外，Three.js 从来没有可靠地支持 Internet Explorer。您可以尝试它的各种版本，因为我知道 Microsoft 曾一度将它用于简单的空间演示，或者您可能会弄乱较新版本的代码并修补各种不兼容点（例如花哨的数组类型），但是底线是它被“设计”为支持 IE10（而不是 IE9），而且它会有点难以使用。

如果您想保持您的代码简单并且您非常贴近 IE9，那么[HTML5 GDK](https://bitbucket.org/fluffrabbit/html5gdk/downloads)适合您。它有点像 Three.js，但具有简化的语法和更强调跨浏览器支持（意味着没有 WebGL）。您可以将其用作后备来支持非 WebGL 浏览器上的现有 3D 内容。

另一个需要关注的 3D 库是[Phoria](http://kevs3d.co.uk/dev/phoria/)，尽管与其他两个库不同，它还不支持纹理映射对象。但是，我可以确认它支持 IE9 和所有其他与 Canvas 兼容的浏览器，就像 HTML5 GDK 一样。Kev 正在努力开发它，因此它可能会在未来几个月内支持纹理映射。

# nginx - 在 nginx.conf 中正确的代理路径

> ID：15353935
> 
> 赞同：28
> 
> 时间：2013-03-12T05:26:17.817
> 
> 标签：nginx

我们有两台服务器，A 和 B。服务器 A 可在全球范围内访问。他安装了nginx。这就是我在conf中的内容：

```
location /test {
  proxy_pass http://localserver.com;
} 
```

它应该做的是将地址[http://globalserver.com/test](http://globalserver.com/test)（即服务器 A）转换为内部服务器地址[http://localserver.com](http://localserver.com)。但是，它确实附加了位置路径，即尝试查找[http://localserver.com/test](http://localserver.com/test)，这根本不可用。如何使代理传递到正确的地址，丢弃该位置的最后一部分？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-14T12:36:35.917

那应该行得通。Nginx 应该去除上游本地服务器上的“/test”路径。所以我只能说这不是原因。为了让它更好一点，试试这个：

```
location /test/ {
  proxy_pass http://localserver.com/;
} 
```

例如，我在前 2 行添加的 2 个斜杠将避免错误匹配 '/testABC' 并将错误的请求发送到上游本地服务器。

你有没有

```
proxy_redirect 
```

在同一位置块中的行？如果您的上游本地服务器有重定向，那么该行的错误将导致您描述的问题。

[**更新**]找到了原始配置不起作用而我的工作的根本原因：如果 proxy_pass 指令本身没有 URI 路径，nginx 不会替换 URI 路径部分。因此，我在末尾添加斜杠（斜杠被视为 URI 路径）的修复会触发 URI 路径替换。

参考：[http ://wiki.nginx.org/HttpProxyModule#proxy_pass](http://wiki.nginx.org/HttpProxyModule#proxy_pass)

> 如果需要以未处理的形式传输 URI，则应使用指令 proxy_pass 而不使用 URI 部分
> 
> ```
> location  /some/path/ {
>   proxy_pass   http://127.0.0.1;
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:57:14.637

尝试按照此处指定的方式添加[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass)：

```
 proxy_pass http://localserver.com/; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T07:40:44.530

尝试重写

```
location /test {
    rewrite ^ $scheme://$host/;
    proxy_pass http://localserver.com;
} 
```

一些有用的链接...

[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite)

[http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)

# ruby-on-rails - 如何在 Ruby on Rails 中将一组保留字符替换为“”？

> ID：15353936
> 
> 赞同：4
> 
> 时间：2013-03-12T05:26:20.493
> 
> 标签：ruby-on-rails, ruby, regex

我想将以下保留字符替换为空格：

```
+ - & | ! ( ) { } [ ] ^ " ~ * ? : \ 
```

这是我的代码，但它不起作用。我错过了什么吗？

```
keyword = keyword.gsub(/\\+-&\\|!\\(\\)\\{\\}\\[\\]\\^"~\\*\\?:\\\\/, ' ') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:12:41.287

`gsub`这是一个基准，显示和之间的速度差异`tr`：

```
require 'benchmark'
require 'pp'

STR = '+ - & | ! ( ) { } [ ] ^ " ~ * ? : \\'
LONG_STR = STR * 1_000
N = 1_000

puts `ruby -v`

pp STR.gsub(/[+&|!(){}\[\]^"~*:?\\-]/, ' ')
pp STR.tr('-+&|!(){}[]^"~*?:\\', ' ')

Benchmark.bm(5) do |b|
  b.report('gsub') { N.times { LONG_STR.gsub(/[+&|!(){}\[\]^"~*:?\\-]/, ' ') } }
  b.report('tr') { N.times { LONG_STR.tr('+&|!(){}[]^"~*:?\\-', ' ') } }
end 
```

和输出：

```
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
"                                   "
"                                   "
          user     system      total        real
gsub  13.300000   0.190000  13.490000 ( 13.524779)
tr     0.080000   0.010000   0.090000 (  0.090045)

ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.0]
"                                   "
"                                   "
            user     system      total        real
gsub   17.890000   0.040000  17.930000 ( 18.016657)
tr      0.270000   0.000000   0.270000 (  0.283021)

ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.0]
"                                   "
"                                   "
            user     system      total        real
gsub    7.310000   0.020000   7.330000 (  7.361403)
tr      0.140000   0.010000   0.150000 (  0.145816) 
```

有趣的是，1.8.7 的表现优于 1.9.3。我怀疑这是因为在 1.9+ 中添加了多字节字符支持。

我已经使用 2.0 完成了几个基准测试，并且对我所看到的速度改进感到非常满意。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T05:41:36.467

这`tr`是为了：

```
keyword.tr '-+&|!(){}[]^"~*?:\\', " "
#=> "                                   " 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T05:28:28.043

就这样做吧。

```
keyword.gsub!(/[+\-&|!(){}\[\]^"~*?:\\]/, " ") 
```

查看：

```
>> keyword = '+ - & | ! ( ) { } [ ] ^ " ~ * ? : \\'
=> "+ - & | ! ( ) { } [ ] ^ \" ~ * ? : \\"
>> keyword.gsub!(/[+\-&|!(){}\[\]^"~*?:\\]/, " ")
=> "                                   " 
```

在这种情况下，字符类（由 括起来`[]`）更容易推理。你需要逃避`-`and`[`和`]`and `\`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:36:34.163

**\W = 任何非单词字符**

```
>> keyword = '+ - & | ! ( ) { } [ ] ^ " ~ * ? : \\'
=> "+ - & | ! ( ) { } [ ] ^ \" ~ * ? : \\"
>> keyword.gsub!(/\W/," ")
=> "                                   " 
```

# c++ - 为什么 std::fstream 使用 char*？

> ID：15353940
> 
> 赞同：3
> 
> 时间：2013-03-12T05:26:44.493
> 
> 标签：c++, vector, binaryfiles

我正在编写一个小程序，它以 16 个字节为一组从二进制文件中的文件中读取字节（*请不要问为什么*），修改它们，然后将它们写入另一个文件。

该`fstream::read`函数读入一个`char *`缓冲区，我最初将其传递给一个如下所示的函数：

```
char* modify (char block[16], std::string key) 
```

修改完成`block`，然后返回。在漫游 SO 的帖子时，我意识到使用`std::vector<char>`. 我的下一个担心是如何将 a 转换`char *`为`std::vector<char>`. 再一次，[SO给了我一个答案](https://stackoverflow.com/questions/7619806/cast-char-to-stdvector#answer-7619836)。

但现在我想知道的是：如果使用`std::vector<char>`而不是这样一个好主意`char*`，那么为什么要使用这些`fstream`函数`char*`呢？

`char*`另外，首先将from`fstream`转换为好主意`std::vector<char>`吗？

编辑：我现在意识到，因为`fstream::read`用于直接将数据写入对象，`char *`是必要的。我现在必须修改我的问题。首先，为什么没有重载函数`fstream::read`？其次，在我写的程序中，哪个是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:41:13.567

要将其与向量一起使用，请不要将指针传递给向量。相反，传递一个指向向量内容的指针：

```
vector<char> v(size);
stream.read(&v[0], size); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:36:45.343

`fstream()`函数允许您使用`char*`s，因此您可以将它们指向任意预分配的缓冲区。 `std::vector<char>`可以调整大小以提供适当的缓冲区，但它将位于堆上，并且涉及分配成本。有时您也可能想要读取或写入数据到内存中的特定位置——甚至在共享内存中——而不是接受`vector`碰巧分配的任何堆内存。此外，您可能希望在`fstream`不包含`vector`标头的情况下使用...能够避免不必要的包含很好，因为它减少了编译时间。

由于缓冲区的大小始终为 16 字节，因此最好将它们作为`char [16]`数据成员分配到适当的拥有对象（如果存在）或堆栈（即某些函数的局部变量）中。

`vector<>`当替代方案是堆分配时更有用 - 无论是因为大小在编译时未知，还是特别大，或者您希望更灵活地控制内存寿命。当您特别想要一些其他矢量功能时，它也很有用，例如能够在之后更改元素数量、对字节进行排序等 - 您似乎不太可能想要这样做，因此矢量会引发问题在阅读您的代码的人的脑海中，您会无缘无故地做什么。尽管如此，`char[16]`vs的选择`vector`似乎（根据您声明的要求）更多的是品味问题，而不是客观利益。

# c# - 评估用户表达

> ID：15353943
> 
> 赞同：0
> 
> 时间：2013-03-12T05:26:52.887
> 
> 标签：c#, asp.net, expression

我正在开发一个有文本框的 Web 应用程序。用户输入条件以显示“字符串”的特定颜色。该字符串包含一些整数值。

用户像这样为字符串值指定条件，

```
>30:"Red"
<20:"Green"
:"Yellow: 
```

这是一个条件。它类似于 if,elseif,else 条件。用户只能指定 if,else like condition like this

```
>60:"Blue"
:"White" 
```

（这意味着如果字符串值大于 60，则将“蓝色”作为字符串的颜色，否则将“白色”作为字符串的颜色）

我必须根据在每个字符串的文本框中输入的上述条件来评估字符串的颜色。有数千个带有值的字符串，用户将为每个字符串输入这样的表达式。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:42:12.537

```
String input = getTextBoxInput() // get input from text box
if(input.contains("<") || input.contains("<"))
{
   if(input.contains("<"))
   {
      int index = input.indexOf("<");
      String conditionString = input.substring(index+1,input.length());
      // condition number is the number being compared
      int conditionNumber = conditionString.split(":")[0];
      // if condition is true then get the corresponding colour
      if(number < conditionNumber){setColor(conditionString.split(":")[1])}
      // check if it an if else condition and do the following
      else if(input.length()>1){ setColor(conditionString.split(":")[2])}
   }
} 
```

这是基本的伪代码。您可以为 "<" 和 ">" 定义常量。此外，如果输入不正确，您可能需要进行一些异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:46:02.933

请参阅[Shunting Yard](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)算法，你需要有类似的东西

# android - 如何在我的应用程序中创建简单的超文本链接？

> ID：15353944
> 
> 赞同：2
> 
> 时间：2013-03-12T05:26:54.523
> 
> 标签：android, hyperlink, textview

我只是想让一个简单的 TextView 在单击时在浏览器中打开一个链接。

**XML:**

```
 <TextView
        android:text="@string/account_sign_up_link"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/sign_up_link"
        android:autoLink="web"
        android:onClick="signUpLink"
        android:clickable="true" /> 
```

**爪哇：**

```
 public class signUpLink extends Activity {
        public void onClick(View v) {
            ...
        }
    } 
```

我不明白为什么 Eclipse 不断抛出这个错误。

**错误：**

```
Illegal modifier for the local class signUpLink; only abstract or final is permitted 
```

**更新：**

我的第一个问题是它在里面，`protected void onCreate(Bundle savedInstanceState)`所以我把它拿出来了。

最终我想出了这个：

```
public void signUpLink(View v){
    Uri uriUrl = Uri.parse("http://mysite.com/signup"); 
    Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
    startActivity(launchBrowser);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:34:03.237

> void 是变量 signUpLink 的无效类型

方法声明需要在类定义中进行。当试图在另一个方法中声明一个方法时，会报告与此类似的错误。

```
public class SignUpLink extends Activity {

    public void onCreate(Bundle bundle) {
           ...

    }
    public void signUpLink(View v) {
        //....Code here
    }
} 
```

并遵循类的命名约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:28:40.677

改变：

```
public class signUpLink extends Activity {
    public void onClick(View v) {
        ...
    }
} 
```

至：

```
public void signUpLink(View v) {
    //Code from onClick(View v) goes here
} 
```

此方法必须进入您使用 XML 布局的 Activity 类。当您指定为 XML 属性时，Android 会在布局已膨胀到的 Activity 中`onClick`查找具有该名称的方法，该方法将 a作为参数。`View`

之前，您正在创建一个新类，而不是一个新方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:44:01.630

使用 Html.fromHtml

```
 Text1.setText(
        Html.fromHtml(
            "<a href=\"http://www.google.com\">Google</a> "));
    Text1.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:47:46.043

使用这个片段

```
 TextView url = ((TextView)findViewById(R.id.myWebSite));
    Linkify.addLinks(url, Linkify.WEB_URLS); 
```

这对我有用。不要忘记在清单文件中定义互联网许可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T06:05:23.593

由于您的 xml 布局将`TextView`'`onClick`操作指定为“ ” `signUpLink`，因此`Activity`其内容视图是 xml 文件需要实现该方法，如下所示：

```
public class MyActivity extends Activity {
    @Override
    public void onCreate(final Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.your_layout_file);
    }

    public void signUpLink(final View view) {
        // Do signup action
    }
} 
```

或者，如果您想在 a 中使用此布局`Fragment`并将逻辑封装到`Fragment`自身，则需要执行以下操作：

```
public class MyFragment extends Fragment {
    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup parent, final Bundle icicle) {
        final View view = inflater.inflate(R.layout.your_layout_file, parent, false);
        view.findViewById(R.id.sign_up_link).setOnClickListener(new View.OnClickListener() {
            @Override
            void onClick(View v) {
                /*MyFragment.this.*/signUpLink(v);
            }
        });
        return view;
    }

    private void signUpLink(final View view) {
        // Do signup action
    }
} 
```

# rest - 使用python中的post将参数传递给rest api调用

> ID：15353945
> 
> 赞同：0
> 
> 时间：2013-03-12T05:26:59.973
> 
> 标签：rest, post, python-2.7, argument-passing, atlassian-crucible

我正在调用休息服务以从登录中“获取”身份验证令牌，然后将其与其他一些数据一起传递给 POST 请求。代码片段是

```
issue = json.loads(r4)
print json.dumps(issue, sort_keys=True, indent=4)
data=issue['token']
args=urllib.urlencode({'FEAUTH':data}).replace("%3A", ":")
print "args is", args
args1={'FEAUTH':data}
print "###################################################################"

data = json.dumps({
  "reviewData" : {
    "projectKey" : "EEU",
    "name" : "Example review.",
    "description" : "Test Description",
    "author" : {
      "userName" : "testUser",
      "displayName" : "test user",
      "avatarUrl" : "https://fisheye/avatar/testUser?s=48"
    },
    "moderator" : {
      "userName" : "testUser",
      "displayName" : "test user",
      "avatarUrl" : "https://fisheye/avatar/testUser?s=48"
    },
    "creator" : {
      "userName" : "testUser",
      "displayName" : "test user",
      "avatarUrl" : "https://fisheye/avatar/testUser?s=48"
    },
    "permaId" : {
      "id" : "EEU-598"
    },
    "permaIdHistory" : [ "EEU-597" ],
    "type" : "REVIEW",
    "allowReviewersToJoin" : "false",
    "metricsVersion" : "2",
    "createDate" : "2013-03-11T15:38:54.046+1100",
    "dueDate" : "2013-03-12T15:38:54.046+1100",
    "jiraIssueKey" : ""
  }
})
data1 = (data)
args2={}
**req = conn.request("post","/rest-service/reviews-v1"+"?"+ args, data1, headers) 
r3 = conn.getresponse()** 
status = r3.status
print "the url is"#, r3.getheader('Location')
url=r3.getheader('location', '')
print url
url1=r3.msg.dict#['location']
print url1
print "read"
r4=r3.read()
issue = json.loads(r4)
print json.dumps(issue, sort_keys=True, indent=4) 
```

当尝试调用发布请求时，args 包含 feauth 并且 data1 具有要传递的 json 对象，标头具有 application/json 并且在调用它时我收到以下错误消息

args 是 FEAUTH=user:14254:894b8aaf8c6e455c3c6dde4215e3657d

#

网址是

{'x-ausername': 'anonymous', 'transfer-encoding': 'chunked', 'set-cookie': 'FESESSIONID=1er2ophgu5kqntjbm67nksztc;Path=/;HttpOnly', 'expires': 'Thu, 01-Jan- 1970 00:00:00 GMT'，'服务器'：'码头（6.1.26）'，'连接'：'关闭'，'dat

e': '2013 年 3 月 11 日星期一 06:02:12 GMT', 'content-type': 'application/json'}

读

{

“代码”：“网络应用程序”，

“消息”：“com.sun.jersey.api.MessageException：Java 类 com.atlassian.fecrurestplugin.crucible.RestReviewService$CreateReview 和 Java 类型类 com.atlassian.fecrurestplugin.crucible.RestReview 的消息正文阅读器

Service$CreateReview，未找到 MIME 媒体类型 application/octet-stream。\n与 MIME 媒体类型兼容的已注册消息正文阅读器是：\n*/* ->\n com.sun.jersey.core.impl。 provider.entity.FormProvider\n co

m.sun.jersey.core.impl.provider.entity.StringProvider\n com.sun.jersey.core.impl.provider.entity.ByteArrayProvider\n com.sun.jersey.core.impl.provider.entity.FileProvider\ n com.sun.jersey.core.impl.provider.entity.InputStreamPr

ovider\n com.sun.jersey.core.impl.provider.entity.DataSourceProvider\n com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General\n com.sun.jersey.core.impl.provider .entity.ReaderProvider\n com.sun.jersey.core.imp

l.provider.entity.DocumentProvider\n com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader\n com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader\n com.sun .jersey.core.impl.provider.entit

y.SourceProvider$DOMSourceReader\n com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General\n com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General\n com.sun.jersey .core.impl.provider.entity.XM

LListElementProvider$General\n com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General\n com.sun.jersey.core.impl.provider.entity.EntityHolderReader\n com.sun.jersey.json.impl .provider.entity.JSONRootElementProvi

der$General\n com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General\n com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy\napplication/octet-stream ->\n com .sun.jersey.core.impl.provider.entity.Byte

ArrayProvider\n com.sun.jersey.core.impl.provider.entity.FileProvider\n com.sun.jersey.core.impl.provider.entity.InputStreamProvider\n com.sun.jersey.core.impl.provider.entity .DataSourceProvider\n com.sun.jersey.core.impl.prov

ider.entity.RenderedImageProvider\n",

“stacktrace”：“javax.ws.rs.WebApplicationException：com.sun.jersey.api.MessageException：Java 类 com.atlassian.fecrurestplugin.crucible.RestReviewService$CreateReview 和 Java 类型类 com.atlas 的消息体阅读器

sian.fecrurestplugin.crucible.RestReviewService$CreateReview，并且未找到 MIME 媒体类型 application/octet-stream。\n与 MIME 媒体类型兼容的已注册消息正文阅读器是：\n*/* ->\n com.sun。球衣核心

.impl.provider.entity.FormProvider\n com.sun.jersey.core.impl.provider.entity.StringProvider\n com.sun.jersey.core.impl.provider.entity.ByteArrayProvider\n com.sun.jersey。 core.impl.provider.entity.FileProvider\n com.sun.jersey

.core.impl.provider.entity.InputStreamProvider\n com.sun.jersey.core.impl.provider.entity.DataSourceProvider\n com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General\n com. sun.jersey.core.impl.provider.entity.R

eaderProvider\n com.sun.jersey.core.impl.provider.entity.DocumentProvider\n com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader\n com.sun.jersey.core.impl.provider .entity.SourceProvider$SAXSourceReader\n

com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader\n com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General\n com.sun.jersey.core.impl.provider。 entity.XMLRootElementProvider$General\n com

.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General\n com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General\n com.sun.jersey.core.impl.provider.entity .EntityHolderReader\n com.sun.jersey.json.i

mpl.provider.entity.JSONRootElementProvider$General\n com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General\n com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy\napplication/octet-流 ->\n com.s

un.jersey.core.impl.provider.entity.ByteArrayProvider\n com.sun.jersey.core.impl.provider.entity.FileProvider\n com.sun.jersey.core.impl.provider.entity.InputStreamProvider\n com .sun.jersey.core.impl.provider.entity.DataSourceP

提供者\n com.sun.jersey.core.impl.provider.entity.RenderedImageProvider\n\n\tat com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:461)\n\tat com. sun.jersey.server.impl.model.method.dispatch.EntityPara

mDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)\n\tat com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)\n\tat com.atlassian.plugins.r

est.common.interceptor.impl.DispatchProviderHelper$EntityParamInInvoker.getParams(DispatchProviderHelper.java:127)\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$ResponseOutInvoker._dispatch(Dispat

chProviderHelper.java:196)\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\n\tat com.sun.jersey.server.impl。 uri.rules.HttpMethodRule.accept（HttpMet

hodRule.java:288)\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\n\tat com.sun.jersey.server.impl.uri。 rules.RightHandPathRule.accept(RightHandPathRule.java:147)\n\tat com.sun.jersey

.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\n\tat com .sun.jersey.server.impl.a

pplication.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\n\tat com.sun.jersey.server. impl.application.We

bApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\n\tat com.sun.jersey.spi.container。 servlet.ServletContainer.service(ServletContain

er.java:537)\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter$JerseyOsgiServletContainer.doFilter(RestDelegatingServletFilter.java:178)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer。过滤器（服务

tContainer.java:795)\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:73)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilte

r.java:74)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFil

ter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPlu

ginFilter.java:74)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter .java:66)\n

\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilterInternal(RestServletUtilsUpdaterFilter.java:26)\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilter(RestServle

tUtilsUpdaterFilter.java:40)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:74)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.雅

va:42)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:66)\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter .java:25)\n\tat com.atlassian.pl

ugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:74)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\n\tat com.atlassian.plugin。 servlet.filter.Se

rvletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\n\tat org.mort

bay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.cenqua.fisheye.web.filters.RestFilter.doFilter(RestFilter.java:36)\n\tat com.cenqua. fisheye.web.filters.CrucibleRestFilter.doFilter（CrucibleRestFi

lter.java:21)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain. java:46)\n\tat com.atlassian.plugin

.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:

63)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)\n \tat org.springframework.web.fil

ter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.crucible.filters.CrucibleFilter。 doFilter(CrucibleFilter.ja

va:146)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.cenqua.fisheye.web.filters.TotalityFilter.doFilter(TotalityFilter.java: 286)\n\tat org.springframework.web.filter.DelegatingF

ilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter( ServletHan

dler.java:1264)\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:98)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterP

roxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java: 1264)\n\tat com.atlassian.plugin。

servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:66)\n\tat com.atlassian.oauth.serviceprovider .inter

nal.servlet.OAuthFilter.doFilter(OAuthFilter.java:71)\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:74)\n\tat com.atlassian.plugin.servlet。 filter.IteratingFilterChain.doFilte

r(IteratingFilterChain.java:42)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContain

erFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain。 doFilter(迭代

gFilterChain.java:46)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.d

oFilter(ServletFilterModuleContainerFilter.java:63)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler. java:399)\n\tat org.m

ortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n\tat org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n\tat org.mortbay.jetty.handler。 ContextHandler.handle(ContextHandler.java:766)\n

\tat org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)\n\tat org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)\n\tat org.mortbay。 jetty.servlet.Dispatcher.forward(Dispatcher.java:126)\n\tat com.c

enqua.fisheye.web.filters.TotalityFilter.doFilter(TotalityFilter.java:187)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web. filter.DelegatingFi

lterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.security.auth.trustedapps.filter。 TrustedApplicationsFilter.doFilter(Tru

stedApplicationsFilter.java:98)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.ja

va:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java: 46)\n\tat com.atlassian.plugin.servl

et.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:66)\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:71)\n\tat com.atlassian.plugin .servlet.filter.DelegatingP

luginFilter.doFilter(DelegatingPluginFilter.java:74)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilte

r.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\n\tat org.mortbay.jetty.servlet.ServletHandle

r$Chain.doFilter(ServletHandler.java:1264)\n\tat org.mortbay.servlet.UserAgentFilter.doFilter(UserAgentFilter.java:78)\n\tat org.mortbay.servlet.GzipFilter.doFilter(GzipFilter.java: 154)\n\tat com.cenqua.fisheye.web.filters.CustomI

ncludableGzipFilter.doFilter(CustomIncludableGzipFilter.java:27)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.cenqua.fisheye.web.filters.ProductInfoFilter。 doFilter(ProductInfoFi

lter.java:44)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) \n\tat 组织。

mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\n\tat com.atlassian。 plugin.servlet.filter.ServletF

ilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\n\tat org.mortbay.je

tty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat com.cenqua.fisheye.web.filters.UpfrontFilter.doFilter(UpfrontFilter.java:54)\n\tat org.springframework.web. filter.DelegatingFilterProxy.invokeDelegate(Deleg

atingFilterProxy.java:237)\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:第1264章

sian.fecru.profiling.ProfilingServletFilter.doFilter(ProfilingServletFilter.java:74)\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n\tat org.springframework.web.filter。德

legatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n\tat org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1264)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle( ServletHandler.java:399)\n\

tat org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n\tat org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n\tat org.mortbay.jetty .handler.ContextHandler.handle(ContextHandler.ja

va:766)\n\tat org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n \tat org.mortbay.jetty.handler.HandlerCollecti

on.handle(HandlerCollection.java:114)\n\tat org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n\tat org.mortbay.jetty.Server.handle(Server.java: 326）\n\tat org.mortbay.jetty.HttpConnection.handleRequest（HttpC

onnection.java:542)\n\tat org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)\n\tat org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)\n \tat org.mortbay.jetty.HttpParser.parseAvailable(HttpPar

ser.java:218)\n\tat org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n\tat org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)\n \tat org.mortbay.thread.BoundedThreadPool$PoolThread.run(Boun

dedThreadPool.java:451)\n原因：com.sun.jersey.api.MessageException：Java 类 com.atlassian.fecrurestplugin.crucible.RestReviewService$CreateReview 和 Java 类型类 com.atlassian.fecrurestplugin 的消息正文阅读器

.crucible.RestReviewService$CreateReview，未找到 MIME 媒体类型 application/octet-stream。\n与 MIME 媒体类型兼容的已注册消息正文阅读器为：\n*/* ->\n com.sun.jersey.core .impl.provider.entit

y.FormProvider\n com.sun.jersey.core.impl.provider.entity.StringProvider\n com.sun.jersey.core.impl.provider.entity.ByteArrayProvider\n com.sun.jersey.core.impl.provider .entity.FileProvider\n com.sun.jersey.core.impl.provider。

entity.InputStreamProvider\n com.sun.jersey.core.impl.provider.entity.DataSourceProvider\n com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General\n com.sun.jersey.core.impl .provider.entity.ReaderProvider\n com

.sun.jersey.core.impl.provider.entity.DocumentProvider\n com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader\n com.sun.jersey.core.impl.provider.entity.SourceProvider $SAXSourceReader\n com.sun.jersey.core

.impl.provider.entity.SourceProvider$DOMSourceReader\n com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General\n com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General\n com.sun.jersey.core.imp

l.provider.entity.XMLListElementProvider$General\n com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General\n com.sun.jersey.core.impl.provider.entity.EntityHolderReader\n com.sun .jersey.json.impl.provider.entity。

JSONRootElementProvider$General\n com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General\n com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy\napplication/octet-stream ->\n com .sun.jersey.core.impl。

provider.entity.ByteArrayProvider\n com.sun.jersey.core.impl.provider.entity.FileProvider\n com.sun.jersey.core.impl.provider.entity.InputStreamProvider\n com.sun.jersey.core.impl .provider.entity.DataSourceProvider\n com.sun.j

ersey.core.impl.provider.entity.RenderedImageProvider\n\n\t... 128 更多\n"

}

发送开放审查请求后

无 500 内部服务器错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:38:22.137

错误的关键部分是“MIME 媒体类型 application/octet-stream”我必须为 post **Content-Type: application/json**设置内容类型，而 不仅仅是 Accept 标头。

问题已解决

# spring - 使用休眠的 Spring MVC3 验证中的动态错误消息

> ID：15353947
> 
> 赞同：0
> 
> 时间：2013-03-12T05:27:20.123
> 
> 标签：spring, hibernate, validation, spring-mvc

我希望能够在另一个表单字段的错误消息（比如说电子邮件）中使用来自一个表单字段（比如说名称）的值（如果可用）。
例如：我希望电子邮件字段的错误消息如下：
`"Hi "+name+", please enter a valid email address."`

此外，我还希望能够根据一天/一年的时间或其他错误消息自定义错误消息。但到目前为止我还没有做到这一点；我收到此错误：

```
The value for annotation attribute NotEmpty.message must be a constant expression 
```

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:38:59.907

```
这是由于您在错误消息中使用名称变量。
为此，您可以在 jsp 页面上进行编码。
使用 if-else 条件对此进行自定义
该特定错误而不是打印给定消息，例如：

```

```
<c:if test="${success=='n'}">
      <b>put dynamic test here </b>
     <form:errors path="*"/>
</c:if> 
```

在您的控制器上设置成功的位置，例如：

map.put("成功", "n");

```
问候
唵

```

# delphi - Converting EMF files to bitmaps and getting the right size

> ID：15353950
> 
> 赞同：1
> 
> 时间：2013-03-12T05:27:34.427
> 
> 标签：delphi, bitmap

The scenario is that I have a printer EMF file. I'm wanting to overlay some data on it before sending it to the printer. The printer file is 300dpi. It's important to keep the same print quality.

I'm converting the emf file using this code ...

```
 b:=TBitmap.create;
  MyMetaFile.LoadFromFile(emf);
  MyCanvas:= TMetafileCanvas.Create(MyMetaFile, 0);
  try
    Width:=MyMetaFile.Width;
    Height:=MyMetaFile.Height;

    b.width:=width;
    b.height:=height;
    b.Canvas.Draw(0, 0, MyMetaFile);
    b.SaveToFile('c:\emftest.bmp'); 
```

That kind of works except you only get the top left corner of the emf file. If you look at the properties of the EMF file in windows, it says 2551x3301\. But width and height here are set to 613x792\. If I override the b.width and b.height with these values it's all ok, but I obviously don't want to do that. The EMF file is 300dpi, the screen dpi is about 100, yet the error is a factor of 4.16\. Any idea what is going on here?

Thanks Terry

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:33:20.770

You have to use `StrechDraw` instead of `Draw` here, in order to scale the content to the expected bitmap size.

For instance:

```
function MetafileToBitmap(Source: TMetafile; ScaleX,ScaleY: integer): TBitmap;
var R: TRect;
begin
  result := nil;
  if Source=nil then // self=nil is OK below
    Exit;
  R.Left := 0;
  R.Right := (Source.Width*ScaleX)div 100;
  R.Top := 0;
  R.Bottom := (Source.Height*ScaleY)div 100;
  result := TBitmap.Create;
  result.Width := R.Right;
  result.Height := R.Bottom;
  Dec(R.Right);  // Metafile rect includes right and bottom coords
  Dec(R.Bottom);
  PlayEnhMetaFile(Result.Canvas.Handle,Source.Handle,R);
end; 
```

If you want anti-aliased drawing using GDI+, you will need to enumerate the metafile content then render it with [our Open Source SynGdiPlus unit](http://blog.synopse.info/post/2010/04/02/Antialiased-drawing-from-TMetaFile):

```
function LoadFrom(const MetaFile: TMetaFile): TBitmap; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:40:20.623

(Thanks to Arnaud for his comments.)

When working with matafiles, only the bitmap data will be rendered when you load the file unless you use the Windows GDI methods to render (or play) the vector content. I use a 3rd party library (GDI+) to do the work for me. I also use Graphics32 whenever I work with images.

## GDI+

The author's website doesn't seem to have the source code anymore. However, I found it [here](http://www.codeforge.com/read/36727/GDIPOBJ.pas__html) by searching for `gdipobj.pas`. I found it on `code.google.com` as well (included in several projects, [like this one](https://code.google.com/p/ihiewer/source/browse/trunk/components/?r=2)).

## Graphics32

The source for Graphics32 is on SourceForge [here](https://graphics32.svn.sourceforge.net/svnroot/graphics32/trunk). The SVN command is:

```
svn co https://graphics32.svn.sourceforge.net/svnroot/graphics32/trunk graphics32 
```

## My Solution

It took a while to figure out how to properly render the Metafile, at the right size, etc. Here is the function that I use.

```
uses
  GR32, GDIPOBJ, ActiveX;

procedure RenderWMF(var WMF: TMemoryStream; OutputBitmap: TBitmap32; const ScreenResolution: Integer = 96);
var
  gph: TGPGraphics;
  img: TGPImage;
  bmap: TBitmap;
  ms: IStream;
  pLi: PLongint;
  iPos: Int64;
  tmpms: TMemoryStream;
begin
  WMF.Position := 0;
  ms := TStreamAdapter.Create(WMF, soReference);
  try
    pLi := nil;
    ms.Write(WMF.Memory, WMF.Size, pLi);
    bmap := TBitmap.Create;
    try
      ms.Seek(0, soFromBeginning, iPos);
      img := TGPImage.Create(ms);
      try
        bmap.width := Trunc(img.GetWidth / img.GetHorizontalResolution * ScreenResolution + 0.5);
        bmap.height := Trunc(img.GetHeight / img.GetVerticalResolution * ScreenResolution + 0.5);
        gph := TGPGraphics.Create(bmap.Canvas.Handle);
        try
          gph.DrawImage(img, 0, 0, bmap.Width, bmap.Height);
          tmpms := TMemoryStream.Create;
          try
            bmap.SaveToStream(tmpms);
            tmpms.Position := 0;
            OutputBitmap.LoadFromStream(tmpms);
          finally
            tmpms.Free;
          end;
        finally
          gph.Free;
        end;
      finally
        img.Free;
      end;
    finally
      bmap.Free;
    end;
  finally
    ms := nil;
  end;
end; 
```

I call it with code like this:

```
var
  bm32: TBitmap32;
  wmf: TMemoryStream;
begin
  bm32 := TBitmap32.Create;
  try
    wmf := TMemoryStream.Create;
    try
      wmf.LoadFromFile('metafile.emf');
      RenderWMF(wmf, bm32, Screen.PixelsPerInch);
      // Do something with 'bm32'
    finally
      wmf.Free;
    end;
  finally
    bm32.Free;
  end;
end; 
```

I know this answer is much broader than `how to properly set the canvas size`. I hope it is helpful.

# vb.net - 为什么尝试从其余代码中捕获隐藏变量

> ID：15353955
> 
> 赞同：0
> 
> 时间：2013-03-12T05:28:09.400
> 
> 标签：vb.net

为什么尝试从 vb.net 的其余代码中捕获隐藏变量。

我在网上搜索并找到了一些 C# 答案，但我对 C# 的理解不够好，无法理解他们在说什么。

```
 Public Function GetUsers(ByVal Path As String) As System.Collections.Generic.IEnumerable(Of System.IO.DirectoryInfo)
    Dim users As System.Collections.Generic.IEnumerable(Of System.IO.DirectoryInfo)
    Dim DDLEXEPath As String = Path
    'this is start directory
    Dim curPath = DDLEXEPath.Substring(0, DDLEXEPath.LastIndexOf("\"))

    Try
        Dim diTop As New DirectoryInfo(curPath)
        users = diTop.EnumerateDirectories
    Catch UnAuthTop As UnauthorizedAccessException
        Debug.WriteLine("{0}", UnAuthTop.Message)
    Catch LongPath As Exception
        Console.WriteLine("{0}", LongPath.Message)
    End Try
    Return users
End Function 
```

我收到“返回用户”中的用户未初始化的错误。我已经在 try 块中为其分配了一个值。

我玩过遵循相同格式的简单字符串并得到相同的错误。

到目前为止，这已经是漫长的一个月了；-(

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:32:43.133

“尝试/捕捉”不会“隐藏”任何东西。但是由于您在“try”中分配了“users”，并且由于（根据定义）不能保证“try”会完成，VB.Net 在返回时认为“users”“未初始化”。

解决方案：

在 try/catch*之外*显式初始化用户：

```
 users = Nothing
    Try
        Dim diTop As New DirectoryInfo(curPath)
        users = diTop.EnumerateDirectories
    Catch UnAuthTop As UnauthorizedAccessException
        Debug.WriteLine("{0}", UnAuthTop.Message)
    Catch LongPath As Exception
        Console.WriteLine("{0}", LongPath.Message)
    End Try
    Return users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:32:08.523

因为 try 打开了一个新的范围，而您的 return 语句超出了这个范围。

解决方案 1：将 return 移到 try 块内，并将其作为最后一行放在那里。

解决方案 2：将 dim 移到 try 之前，并仅保留 try 中的分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:32:29.897

您只需在 try catch 块中设置用户的值。

以下仅定义用户类型

```
 Dim users As System.Collections.Generic.IEnumerable(Of System.IO.DirectoryInfo) 
```

添加新的以初始化它

```
 Dim users As new System.Collections.Generic.IEnumerable(Of System.IO.DirectoryInfo) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:32:45.783

错误消息告诉您的是，`users`必须先为它分配一个值`Return`（或者除分配它之外做任何其他*事情*）。因此，只需在声明时明确声明`users`要设置的`Nothing`内容。

```
Dim users As IEnumerable(Of DirectoryInfo) = Nothing 
```

# objective-c - 无法更新用户界面

> ID：15353956
> 
> 赞同：0
> 
> 时间：2013-03-12T05:28:14.000
> 
> 标签：objective-c, cocoa-touch

在我的匹配纸牌游戏中，我`IBAction`为 newGame 创建了一个方法。

现在，我有一个方法被调用来根据动作`updateUI`改变状态。`UI`

在我的`updateUI`方法中，我有一个即时调用 alpha 以淡化匹配的卡片，但是当我调用该`newGame`方法时，卡片仍然从我调用 alpha 的时间消失......

这是我的`ViewController`，请告诉我我做错了什么......谢谢！：

```
#import "CardGameViewController.h"
#import "PlayingCardsDeck.h"
#import "CardMatchingGame.h"

@interface CardGameViewController ()

@property (weak, nonatomic) IBOutlet UILabel *flipsLabel;
@property (weak, nonatomic) IBOutlet UILabel *notificationLabel;
@property (weak, nonatomic) IBOutlet UILabel *scoreCounter;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;

@property (strong, nonatomic) CardMatchingGame *game;
@property (nonatomic) int flipsCount;

@end

@implementation CardGameViewController

//creating the getter method that creates a new card game.
-(CardMatchingGame *) game {

    if (!_game) _game = [[CardMatchingGame alloc] initWithCardCount:self.cardButtons.count usingDeck:[[PlayingCardsDeck alloc] init]];
    return _game;
}

//creating a setter for the IBOutletCollection cardButtons
-(void) setCardButtons:(NSArray *)cardButtons {

    _cardButtons = cardButtons;
   [self updateUI];
}

//creating the setter for the flipCount property. Whick is setting the flipsLabel to the right text and adding the number of counts.
-(void) setFlipsCount:(int)flipsCount {

    _flipsCount = flipsCount;
    self.flipsLabel.text = [NSString stringWithFormat:@"Flips: %d", self.flipsCount];

}

-(void) updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.unplayble;
        if (card.unplayble) {
            cardButton.alpha = 0.1;
        }
        self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];

        if (self.game.notification) {

        self.notificationLabel.text = self.game.notification;

        }
    }
}

//Here I created a method to flipCards when the card is selected, and give the user a random card from the deck each time he flips the card. After each flip i'm incrementing the flipCount setter by one.
- (IBAction)flipCard:(UIButton *)sender {

    [self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]];
    self.flipsCount++;
    [self updateUI];
}

- (IBAction)newGame:(UIButton *)sender {

    [self.game cleanHistory];

    self.flipsCount = 0;

    self.game = nil;

    [self updateUI];

}

@end 
```

这是 cleanHistory 方法：

```
-(void)cleanHistory {

    for (Card *card in self.cards) {
        card.unplayble = NO;
        card.faceUp = NO;
    }

    self.notification = nil;
    self.score = 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:50:38.240

确保所有对象都存在且未释放/自动释放和/或确保在主线程中刷新 UI。

# asp.net - 在 ASP.Net WebForms 中使用捆绑（来自 Systelm.Web.Optimization）会导致问题

> ID：15353958
> 
> 赞同：2
> 
> 时间：2013-03-12T05:28:25.163
> 
> 标签：asp.net, bundling-and-minification, asp.net-optimization

我正在尝试通过在我的应用程序中使用对我的应用程序进行一些*优化*。`BundlesCollection``ASP.Net 4.0`

我的样式包包含 6 个 css 文件。这些文件包含在母版页中。如果我从母版页中删除 CSS 文件，而是输入以下内容：

```
<%= Styles.Render("~/bundles/css/default") %> 
```

我收到以下错误：

```
The Controls collection cannot be modified because the control contains code 
    blocks (i.e. <% ... %>). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T05:32:28.520

`<%#` 以代替开始代码块`<%=`

# bash - 打印最后一个匹配行

> ID：15353962
> 
> 赞同：2
> 
> 时间：2013-03-12T05:28:43.270
> 
> 标签：bash, sed

使用`sed`，我想打印文件的最后一个匹配行。我碰到

[sed：返回最后一次匹配，直到文件结束](https://stackoverflow.com/q/7724778)

但是，我只想要匹配的线本身，而不是任何范围的线。使用该页面，我实际上想出了一个有效的命令

```
$ sed '/out_time=/h; $!d; x' progress.txt
out_time=00:00:07.720000 
```

问题是为什么这会起作用，或者换句话说，这个命令中发生了什么。`sed`如果存在，还包括一个更简单的命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:34:15.037

很简单，这些是在每一行（循环）上运行的三个独立命令：

*   该`h`命令将当前保持缓冲区替换为包含`out_time=`.
*   `$!d`删除任何不是最后一行并重新开始下一个循环。
*   该`x`命令交换保持和模式缓冲区。

效果是最后`out_time=`一行被放置在保持缓冲区中，并且唯一通过`$!d`过滤器逃逸的行（文件的最后一行）在打印之前与该保持缓冲区交换。

将其视为以下几行的程序：

```
for every line in file:
    if line contains "out_time=":
        holdbuff = line
    if line is not last line of file:
        continue for loop
    swap line and holdbuff
    print line 
```

*当然，如果您拥有适合这项工作的正确*工具，则可以避免整个折磨过程：

```
grep 'out_time=' progress.txt | tail -1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T05:33:14.700

我想这可能被认为更简单：

```
sed -n '/out_time=/h; ${x;p;}' progress.txt 
```

也可以写成：

```
sed -n '/out_time=/h; $x; $p' progress.txt 
```

在所有这些中，`sed`只是在保持空间中保存了一条匹配行，因此当它到达文件末尾时，它找到的最后一个匹配项是在保持空间中。此时，它将保持空间拉入模式空间，然后打印它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T10:48:56.833

一个很晚的答案*，没有*使用任何管道`awk`（有人提到了正确的工具......）：

```
awk '/out_time=/{last=$0} END{print last}'  progress.txt 
```

解释：

*   `/$PAT/{...}`: 将匹配的事件保存到变量`last`中，覆盖之前的事件
*   `END{...}`：退出程序时执行块，在这种情况下打印的值`last`

# javascript - HTML5 音频播放器 - 自动播放下一个类实例

> ID：15353968
> 
> 赞同：7
> 
> 时间：2013-03-12T05:29:10.843
> 
> 标签：javascript, jquery, html

我正在使用 UbaPlayer，它是一个带有 Flash 后备的 jQuery HTML5 音频播放器。目前，它只是在被提示的特定歌曲完成后停止。

我希望它自动播放按时间顺序列出的下一个“音频按钮”类。

@Winner_joiner 已设法编辑第 190 行以移至下一首歌曲，`<ul>`但在最后一首歌曲`<ul>`完成后，它转到 的第一个实例`<ul class=controls>`，而我希望它继续到`<ul>`.

我有一些歌曲之间的内容，所以我必须打破`<ul>`并为其他歌曲重新开始。

**这是我的 HTML：**

```
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="src/jquery.ubaplayer.js"></script>
<script>
jQuery(document).ready(function() { 
   jQuery.noConflict();
   jQuery(function(){
            jQuery("#ubaPlayer").ubaPlayer({
            codecs: [{name:"MP3", codec: 'audio/mpeg;'}]
            });

    });
    jQuery('a[rel=vidbox]').click(function () {

        if (jQuery("#ubaPlayer").ubaPlayer("playing") === true) {
            jQuery("#ubaPlayer").ubaPlayer("pause");
            }
        return false;
    });
})
</script>
</head>

<body>
<div id="ubaPlayer"></div>
    <ul class="controls">
        <li><a class="audioButton" href="mp3/dontthinktwice.mp3">
        Don't Think Twice (Bob Dylan)</a></li>
        <li><a class="audioButton" href="mp3/livingforthecity.mp3">
        Living for the City (Stevie Wonder)</a></li>
    </ul>

    <!-- More content and stuff here-->

    <ul class="controls">
        <li><a class="audioButton" href="mp3/anothersong.mp3">
        Another Song</a></li>
        <li><a class="audioButton" href="mp3/anothersong2.mp3">
        Another Song 2</a></li>
    </ul>
</body> 
```

**音频播放器 JavaScript：**

```
(function($) {
var defaults = {
    audioButtonClass: "audioButton",
    autoPlay: null,
    codecs: [{
        name: "OGG",
        codec: 'audio/ogg; codecs="vorbis"'
    }, {
        name: "MP3",
        codec: 'audio/mpeg'
    }],
    continuous: false,
    extension: null,
    flashAudioPlayerPath: "libs/swf/player.swf",
    flashExtension: ".mp3",
    flashObjectID: "audioPlayer",
    loadingClass: "loading",
    loop: false,
    playerContainer: "player",
    playingClass: "playing",
    swfobjectPath: "libs/swfobject/swfobject.js",
    volume: 1
},
    currentTrack, isPlaying = false,
    isFlash = false,
    audio, $buttons, $tgt, $el, playTrack, resumeTrack, pauseTrack, methods = {
        play: function(element) {
            $tgt = element;
            currentTrack = _methods.getFileNameWithoutExtension($tgt.attr("href"));
            isPlaying = true;
            $tgt.addClass(defaults.loadingClass);
            $buttons.removeClass(defaults.playingClass);

            if (isFlash) {
                if (audio) {
                    _methods.removeListeners(window);
                }
                audio = document.getElementById(defaults.flashObjectID);
                _methods.addListeners(window);
                audio.playFlash(currentTrack + defaults.extension);
            } else {
                if (audio) {
                    audio.pause();
                    _methods.removeListeners(audio);
                }
                audio = new Audio("");
                _methods.addListeners(audio);
                audio.id = "audio";
                audio.loop = defaults.loop ? "loop" : "";
                audio.volume = defaults.volume;
                audio.src = currentTrack + defaults.extension;
                audio.play();
            }
        },

        pause: function() {
            if (isFlash) {
                audio.pauseFlash();
            } else {
                audio.pause();
            }

            $tgt.removeClass(defaults.playingClass);
            isPlaying = false;
        },

        resume: function() {
            if (isFlash) {
                audio.playFlash();
            } else {
                audio.play();
            }
            $tgt.addClass(defaults.playingClass);
            isPlaying = true;
        },

        playing: function() {
            return isPlaying;
        }
    },

    _methods = {
        init: function(options) {
            var types;

            //set defaults
            $.extend(defaults, options);
            $el = this;

            //listen for clicks on the controls
            $(".controls").bind("click", function(event) {
                _methods.updateTrackState(event);
                return false;
            });
            $buttons = $("." + defaults.audioButtonClass);

            types = defaults.codecs;
            for (var i = 0, ilen = types.length; i < ilen; i++) {
                var type = types[i];
                if (_methods.canPlay(type)) {
                    defaults.extension = [".", type.name.toLowerCase()].join("");
                    break;
                }
            }

            if (!defaults.extension || isFlash) {
                isFlash = true;
                defaults.extension = defaults.flashExtension;
            }

            if (isFlash) {
                $el.html("<div id='" + defaults.playerContainer + "'/>");
                $.getScript(defaults.swfobjectPath, function() {
                    swfobject.embedSWF(defaults.flashAudioPlayerPath, defaults.playerContainer, "0", "0", "9.0.0", "swf/expressInstall.swf", false, false, {
                        id: defaults.flashObjectID
                    }, _methods.swfLoaded);
                });
            } else {
                if (defaults.autoPlay) {
                    methods.play(defaults.autoPlay);
                }
            }
        },

        updateTrackState: function(evt) {
            $tgt = $(evt.target);
            if (!$tgt.hasClass("audioButton")) {
                return;
            }
            if (!audio || (audio && currentTrack !== _methods.getFileNameWithoutExtension($tgt.attr("href")))) {
                methods.play($tgt);
            } else if (!isPlaying) {
                methods.resume();
            } else {
                methods.pause();
            }
        },

        addListeners: function(elem) {
            $(elem).bind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        removeListeners: function(elem) {
            $(elem).unbind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        onLoaded: function() {
            $buttons.removeClass(defaults.loadingClass);
            $tgt.addClass(defaults.playingClass);

            audio.play();
        },

        onError: function() {
            $buttons.removeClass(defaults.loadingClass);
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }
        },

        onEnded: function() {
            isPlaying = false;
            $tgt.removeClass(defaults.playingClass);
            currentTrack = "";
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }

            if (defaults.continuous) {
                var $next = $tgt.next().length ? $tgt.next() : $(defaults.audioButtonClass).eq(0);
                methods.play($next);
            }

        },

        canPlay: function(type) {
            if (!document.createElement("audio").canPlayType) {
                return false;
            } else {
                return document.createElement("audio").canPlayType(type.codec).match(/maybe|probably/i) ? true : false;
            }
        },

        swfLoaded: function() {
            if (defaults.autoPlay) {
                setTimeout(function() {
                    methods.play(defaults.autoPlay);
                }, 500);
            }
        },

        getFileNameWithoutExtension: function(fileName) {
            //this function take a full file name and returns an extensionless file name
            //ex. entering foo.mp3 returns foo
            //ex. entering foo returns foo (no change)
            var fileNamePieces = fileName.split('.');
            fileNamePieces.pop();
            return fileNamePieces.join(".");
        }
    };

$.fn.ubaPlayer = function(method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === "object" || !method) {
        return _methods.init.apply(this, arguments);
    } else {
        $.error("Method " + method + " does not exist on jQuery.ubaPlayer");
    }
};})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:54:13.197

这似乎是 lib 中的一个错误（或未记录的功能）。

**仅**当音频按钮是直接兄弟时才有效（在 jquery.ubaplayer.js 的第 190 行中证明）

```
var $next = $tgt.next().length ? $tgt.next() : $(defaults.audioButtonClass).eq(0);
// a other unrelated bug in the same line is ... $(defaults.audioButtonClass) should be $("." + defaults.audioButtonClass) or so 
```

换句话说，如果您的 HTML 看起来像这样（*连续：true*）：

```
 <div class="controls"> <!-- THIS IS NOW AN DIV NOT UL-->
     <!-- NO LI'S since the links have to be direkt siblings-->
        <a class="audioButton" href="mp3/dontthinktwice.mp3">
        Don't Think Twice (Bob Dylan)</a>
        <a class="audioButton" href="mp3/livingforthecity.mp3">
        Living for the City (Stevie Wonder)</a>
 </div> 
```

它可以工作（使用 chrome 25+）

我希望这有帮助。

**更新1：**

如果要使用**HTML**，则必须将文件 jquery.ubaplayer.js 中的第 190 行更新为

```
var $next = $tgt.parent().next().length>0 && $tgt.parent().next().children().length>0?$tgt.parent().next().children().eq(0):$("."+defaults.audioButtonClass).eq(0);
// Code could/should be cleaned up a bit 
```

此代码获取 a-Tag = li-Tag 的父级，检查它是否有兄弟姐妹，如果有，则获取正确的音频 href。

**警告我刚刚检查了代码是否运行，对于您的问题，我不知道它是否会在其他使用场景中引起问题。（顺便说一句。我只会更改 HTML 并将 LIB 保持原样，因此如果有更新，则不会出现中断更改）**

**更新 2：**

使用自动播放调用 Ubaplayer 的代码

```
 jQuery("#ubaPlayer").ubaPlayer({
        codecs: [{name:"MP3", codec: 'audio/mpeg;'}],
        autoPlay:$(".audioButton").eq(0)
 }); 
```

# big-o - 关于 O(n^2logn)

> ID：15353970
> 
> 赞同：-1
> 
> 时间：2013-03-12T05:29:24.193
> 
> 标签：big-o

```
void function(int n ) {
    int i, j , k ;
    for ( i = n/2 ; i <= n ; i ++) 
        for ( j = 1; j + n/2 <= n; j++ ) 
            for ( k = 1; k <=n ; k = k*2 )
                count ++;
} 
```

外部循环执行 n/2 次，中间循环执行 n/2 次，内部 llop 执行 logn 时间。

上述函数的复杂度是 O(n^2logn)，但是 n/2 和 n/2 将如何变为 n^2 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T15:14:47.090

您的算法的确切迭代次数及其增长复杂度的顺序将按如下方式推断：

![在此处输入图像描述](../Images/224386b057e09e179b44172e26e31dec.png)

支持文件：[这里](http://faculty.kfupm.edu.sa/ics/jauhar/ics202/Unit03_ComplexityAnalysis1.ppt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:33:17.367

循环是嵌套的，因此它们的所有计数都会相乘。(n/2) * (n/2) 是 n^2 / 4，但常数对 big-O 无关紧要；n^2 / 4 = O(n^2) 并且这样写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:35:33.433

对于大 O 表示法，省略了常数：“如果 f(x) 是多个因子的乘积，则省略任何常数（乘积中不依赖于 x 的项）。”

所以你的内循环是 logn，你的中间和外循环是 n/2，但一起是 (n/2) * (n/2) * logn = 1/4 (n^2logn)，1/4 被丢弃给出 O(n^2logn)。

参考： [http ://en.wikipedia.org/wiki/Big_oh_notation](http://en.wikipedia.org/wiki/Big_oh_notation)

# python - PyQt4 本地目录视图，带有选择文件夹的选项

> ID：15353972
> 
> 赞同：6
> 
> 时间：2013-03-12T05:29:28.183
> 
> 标签：python, qt, pyqt, pyqt4

我知道如何使用 QDirModel（或 QFileSystemModel）制作一个简单的 QTreeView() 来显示系统中的文件/文件夹，但我想在每个文件旁边添加一个复选框，以便用户可以选择一些文件夹/文件他的系统。显然，我还需要知道他选择了哪些。有什么提示吗？

基本上是这样的......

![在此处输入图像描述](../Images/82989e3aeaea1643b7187bb0436c10f3.png)

下面是一个创建目录视图但没有复选框的示例代码。

```
from PyQt4 import QtGui

if __name__ == '__main__':

    import sys

    app = QtGui.QApplication(sys.argv)

    model = QtGui.QDirModel()
    tree = QtGui.QTreeView()
    tree.setModel(model)

    tree.setAnimated(False)
    tree.setIndentation(20)
    tree.setSortingEnabled(True)

    tree.setWindowTitle("Dir View")
    tree.resize(640, 480)
    tree.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T07:39:58.783

您可以继承 QDirModel，并重新实现`data(index,role)`方法，您应该检查，如果`role` 是`QtCore.Qt.CheckStateRole`。如果是，您应该返回`QtCore.Qt.Checked`或`QtCore.Qt.Unchecked`。此外，您还需要重新实现`setData`方法，以处理用户检查/取消检查，并`flags`返回 QtCore.Qt.ItemIsUserCheckable 标志，该标志启用用户检查/取消检查。IE：

```
class CheckableDirModel(QtGui.QDirModel):
def __init__(self, parent=None):
    QtGui.QDirModel.__init__(self, None)
    self.checks = {}

def data(self, index, role=QtCore.Qt.DisplayRole):
    if role != QtCore.Qt.CheckStateRole:
        return QtGui.QDirModel.data(self, index, role)
    else:
        if index.column() == 0:
            return self.checkState(index)

def flags(self, index):
    return QtGui.QDirModel.flags(self, index) | QtCore.Qt.ItemIsUserCheckable

def checkState(self, index):
    if index in self.checks:
        return self.checks[index]
    else:
        return QtCore.Qt.Unchecked

def setData(self, index, value, role):
    if (role == QtCore.Qt.CheckStateRole and index.column() == 0):
        self.checks[index] = value
        self.emit(QtCore.SIGNAL("dataChanged(QModelIndex,QModelIndex)"), index, index)
        return True 

    return QtGui.QDirModel.setData(self, index, value, role) 
```

然后你使用这个类而不是`QDirModel`：

```
model = CheckableDirModel()
tree = QtGui.QTreeView()
tree.setModel(model) 
```

# xml - 为什么我的 AJAX .each 循环一次打印所有 XML 数据？

> ID：15353974
> 
> 赞同：0
> 
> 时间：2013-03-12T05:29:46.097
> 
> 标签：xml, ajax, loops, each

我是 Web Programming 的新手，到目前为止我非常喜欢它。嗯，直到现在。我正在尝试使用 JQuery 显示来自 .XML 文件的数据，而在我使用 XSLT 文件对其进行样式设置和显示之前。到目前为止，我取得了不错的进展，但我似乎不了解 .each 循环是如何工作的，或者至少不了解如何使其正常工作。

这是我的 XML 文件，我想显示以下内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--<?xml-stylesheet type="text/xsl" href="testimonials.xsl"?>-->
<!DOCTYPE testimonials SYSTEM "testimonials.dtd">

<testimonials>
  <feedback>
    <quote>Impressively well-versed in their knowledge of GM motors. Very nice and courteous staff, shipping was fast too. Will be purchasing again.</quote>
    <name>Rich</name>
    <location>Chester, NY</location>
  </feedback>
  <feedback>
    <quote>Huge selection and extremely helpful staff got me just what I was looking for for my Cobalt SS. Very Happy!</quote>
    <name>Justin S.</name>
    <location>Buffalo, NY</location>
  </feedback>
  <feedback>
    <quote>My wife managed to blow up my Tahoe on her way to work. You guys had a new motor to me in less than a week. Couldn't be happier</quote>
    <name>Jake</name>
    <location>Matamoras, PA</location>
  </feedback>
</testimonials> 
```

够简单吧？现在我所要做的就是使用 AJAX 在我的页面上显示它。我要的格式是这样的：

“报价” - 名称 - 位置

**一个例子是：**

```
"Huge selection and extremely helpful staff got me just what I was looking for for my Cobalt SS. Very Happy!" - Justin S. - Buffalo, NY 
```

请注意，该示例位于代码标签中，以准确显示我希望它在我的网页上显示的方式。**全部在一条线上。** 我认为最简单的方法是使用表格，其中每一行可以是一个新的推荐，每行可以有 3 个单元格。一份是报价单，一份是客户姓名，一份是他们的家乡。我必须为所有 3 份推荐书执行此操作。我在 XSLT 中可以正常工作，但由于某些非常令人沮丧的原因，我在使用 AJAX 时无法正确显示它。不是循环显示 A Quote、Name 和 Location 3 次，而是显示所有三个引号混合在一起，然后将所有三个名称混合在一起，所有三个位置都挤在各自的段落中。

这是我的**AJAX**代码（暂时是内联的，我计划在不久的将来将它移到单独的 .js 文件中）：

```
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "../stylesheets/testimonials.xml",
            dataType: "xml",
            success: function (xml) {
                $(xml).find('feedback').each(function () {
                    var quote = $(this).find('quote').text()
                    $("#p1").append(quote);
                    var name = $(this).find('name').text()
                    $("#p2").append(name);
                    var location = $(this).find('location').text()
                    $("#p3").append(location);
                });

            }
        })
    }); 
```

这是我希望我的 AJAX 代码写入的**HTML ：**

```
 <table id="table1">
        <tr>
          <td><p id="p1">"</p></td>
          <td><p id="p2">-</p></td>
          <td><p id="p3">-</p></td>
        </tr>
        <tr>
          <td><p id="p1">"</p></td>
          <td><p id="p2">-</p></td>
          <td><p id="p3">-</p></td>
        </tr>
        <tr>
          <td><p id="p1">"</p></td>
          <td><p id="p2">-</p></td>
          <td><p id="p3">-</p></td>
        </tr>
      </table> 
```

在 XSL 中这很容易，因为我会使用 For Each 循环遍历 XML 中的每个“反馈”标签，然后使用 Value-Of 显示相关数据，如下所示：（ **用于演示目的的 XSL 文件）**

```
 <xsl:for-each select="testimonials/feedback">
      <table id="infoTestimonials">
        <tr>
          <td>
            <font class="infoQuotes">"</font><xsl:value-of select="quote"/><font class="infoQuotes">"</font>
          </td>
          <td> - <font size="2pt"><xsl:value-of select="name"/></font></td>
          <td> - <font size="2pt"><xsl:value-of select="location"/></font></td>
        </tr>
      </table>
    </xsl:for-each> 
```

如何使用 AJAX 轻松反映我在 XSL 中显示的内容？我很高兴能进入 Web 编程的世界，但我已经花了 4 多个小时试图让它正常工作，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:03:56.453

在一个页面中多次使用同一个 ID 是无效的：

```
<table id="table1">
  <tr>
    <td><p id="p1">"</p></td>
    <td><p id="p2">-</p></td>
    <td><p id="p3">-</p></td>
  </tr>
  <tr>
    <td><p id="p1">"</p></td>
    <td><p id="p2">-</p></td>
    <td><p id="p3">-</p></td>
  </tr>
  <tr>
    <td><p id="p1">"</p></td>
    <td><p id="p2">-</p></td>
    <td><p id="p3">-</p></td>
  </tr>
</table> 
```

在此示例中，您将使用每个 id（p1、p2 和 p3）3 次。在您尝试的 jQuery 代码中，`$("#p1").append(quote);`但由于“p1”id 出现了 3 次，因此它有三个位置可以附加数据。我会做这样的事情：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "../stylesheets/testimonials.xml",
        dataType: "xml",
        success: function (xml) {
            var i = 1; //Create iterator variable.
            $(xml).find('feedback').each(function () {
                var quote = $(this).find('quote').text();
                var name = $(this).find('name').text();
                var location = $(this).find('location').text();
                var testimonial = "\"" + quote + "\" - " + name + " - " + location; //Add formatting to testimonial.
                $("#p"+i).html(testimonial); //Select id that is "p"+i.
                i++; //Iterate variable before repeat.
            });

        }
    });
}); 
```

这将创建一个值为 1 的变量 i。当`.each`循环第一次运行时，它将选择“p1”id 并将数据插入其中。第二次运行时，它将选择“p2” id 并将数据插入其中，依此类推。您必须将您的 HTML 更改为：

```
<table id="table1">
  <tr>
    <td><p id="p1"></p></td>
  </tr>
  <tr>
    <td><p id="p2"></p></td>
  </tr>
  <tr>
    <td><p id="p3"></p></td>
  </tr>
</table> 
```

您还应该注意 JavaScript 中的分号，因为您遗漏了一些。

# ios - 带有空单元格的表格视图

> ID：15353976
> 
> 赞同：0
> 
> 时间：2013-03-12T05:30:05.543
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我想要的：在表格视图中显示一些数据列表。

通过创建不同的对象将数据存储在单个数组中。因此，对于每个对象，数组的大小各不相同。所以我的问题是在显示数据时，一些单元格没有完全填充表格单元格，而是留空。它看起来不太好。

谁能解释如何在没有任何额外空单元格的情况下获得表格视图？

这是我排列数据的方式：

```
Recipe *recipe1 = [Recipe new];

recipe1.ingredients = [NSArray arrayWithObjects:@"1\. Fish  - 500 g .",@"2\. Onion (Big) - 2 nos (Chopped)",@"3\. Garlic (Chopped) - 3 flakes",@"4\. Green chillies - 2 nos (Chopped)",@"5\. Chilly powder - 3/4 tbsp  ",@"6\. Coriander powder - 1/2 tsp ",nil];

Recipe *recipe2 = [Recipe new];

recipe2.ingredients = [NSArray arrayWithObjects:@"1\. fish - 300 gm",@"2\. Tomato(medium) - 1 no",@"3\. Garlic - 10 gm",@"4\. Coconut powder - 10 gm",@"5\. Curry leaves - A few",@"6\. Salt - As reqd",@"7\. Onions(medium) - 2 nos(chopped)",@"8\. Oil - 1 - 2 tbsp",nil]; 
```

我想根据选择的菜在 tableview 中显示这些成分列表。

这是我的数据源方法

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellIdentifier";

    // Dequeue or create a cell of the appropriate type.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    [cell.textLabel setFont:[UIFont fontWithName:@"Bold" size:20]];

    // Configure the cell.
    cell.textLabel.text =[data objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:34:57.640

内部`cellForRowAtIndexPath`方法尝试使用以下

在第二个配方选择：

```
 cell.textLabel.text = [recipe1.ingredients objectAtIndex:indexPath.row]; 
```

在第二个配方选择：

```
cell.textLabel.text = [recipe2.ingredients objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:44:44.017

修改以下函数：for (MAC OS)

```
 - (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView
    {
         if (First Recipe)
    return [recipe1.ingredients count];

       else if (Second Recipe)
    return [recipe2.ingredients count];

    } 
```

或者对于 iOS：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
       if (First Recipe)
            return [recipe1.ingredients count];

               else if (Second Recipe)
            return [recipe2.ingredients count];
    } 
```

之后，确保在选择完成后重新加载表格视图。愿这对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:59:40.300

你想要做的是：

您将拥有一个充满配方对象的数组，这将是您的 tableview 的数据源。& 当您单击任何食谱（名称）时，它将推送到另一个视图控制器，在表格视图中给出该食谱所需的成分列表（作为列表）。

为此，首先创建一个以 recipeArray （配方对象）作为数据源的主视图控制器，并在表视图中列出配方名称的配方。当您选择一个配方时（将调用 in didSelectRowAtIndexPath），使用所选配方对象推送到新视图控制器并在下一个 tableview 控制器中填充成分列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T09:28:56.197

在 viewDidLoad 添加 1 行

```
tableview.tableFooterView = [[UIView alloc] init]; 
```

并且还在下面添加这个方法，所以你不会看到任何额外的空单元格

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Remove seperator inset
    if ([cell respondsToSelector:@selector(setSeparatorInset:)]) {
        [cell setSeparatorInset:UIEdgeInsetsZero];
    }

    // Prevent the cell from inheriting the Table View's margin settings
    if ([cell respondsToSelector:@selector(setPreservesSuperviewLayoutMargins:)]) {
        [cell setPreservesSuperviewLayoutMargins:NO];
    }

    // Explictly set your cell's layout margins
    if ([cell respondsToSelector:@selector(setLayoutMargins:)]) {
        [cell setLayoutMargins:UIEdgeInsetsZero];
    }
 } 
```

# python - django 邮件发送速度很慢。

> ID：15353981
> 
> 赞同：1
> 
> 时间：2013-03-12T05:30:34.907
> 
> 标签：python, django, email, sendmail

我正在使用`EmailMessage`django 发送邮件。这是我的代码：

```
 message = " test message "
  email = EmailMessage('test subject', message, to=['me@test.com'])
  email.send() 
```

但是我需要向不同的人发送更多不同内容的电子邮件，所以如果我做了两次以上的操作，发送邮件需要很长时间。比如 10 秒或更长时间。是否有任何其他解决方案可以更轻松快捷地发送？

在php中它非常快。我也可以在 django 中有这个吗？

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:37:45.300

如果您需要发送多封电子邮件并希望加快流程，可以使用 Django 的[`send_mass_mail`](https://docs.djangoproject.com/en/dev/topics/email/#send-mass-mail)功能。该文档非常清楚地说明了如何使用它；这是一个示例表格：

```
message1 = ('Subject here', 'Here is the message', 'from@example.com', ['first@example.com', 'other@example.com'])
message2 = ('Another Subject', 'Here is another message', 'from@example.com', ['second@test.com'])
send_mass_mail((message1, message2), fail_silently=False) 
```

* * *

这将为所有电子邮件重用一个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:13:41.770

扩展到@Thomas Orozco 的答案。

django-pigeonpost - 允许您设置发送邮件的时间，等等...

[https://github.com/dragonfly-science/django-pigeonpost](https://github.com/dragonfly-science/django-pigeonpost)

django cron - 从 webapp 的第一个请求开始，它将每 300 毫秒（0.3 秒）发送电子邮件

[https://sites.google.com/site/vigeblog/blog/sendmailswithdjango](https://sites.google.com/site/vigeblog/blog/sendmailswithdjango)

如果发送邮件再次变慢（在您看来），您必须检查您的服务器，重构您的代码并进行测试。

# php - oledb 没有在 php 中打开

> ID：15353984
> 
> 赞同：0
> 
> 时间：2013-03-12T05:30:51.313
> 
> 标签：php, sql

对于使用 php 读取 word 文档，我在 C:\xampp\php\ext 文件夹中安装了“php_oledb.dll”文件。之后它显示以下错误。

```
Fatal error: Call to undefined function oledb_open() in C:\xampp\htdocs\mallikarjuna\test\parsing5\test1.php on line 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:51:43.343

在好目录中添加新的扩展/库后，我认为您必须在`php.ini`

添加新行以使用此 dll

您应该在文件中找到一些示例`php.ini`，应该是这样的：

```
extension=php_extname.dll 
```

重新启动PHP，这应该没问题。如果这不行，请查看 PHP 错误日志，有时，扩展需要一些其他的东西/配置。

# fork - 等待进程

> ID：15353985
> 
> 赞同：0
> 
> 时间：2013-03-12T05:30:54.183
> 
> 标签：fork

我有一个关于 fork() 的问题。如果我的程序只接受命令行参数，就会产生许多子进程。每个子进程随机休眠几秒然后退出。一旦大多数子进程退出，主进程应该退出。代码应该如何等待进程？为什么在这种情况下选择是明智的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T20:57:02.730

使用 wait() 调用。这等待任何孩子退出。您所要做的就是循环调用 wait() 直到超过一半的孩子退出。

# java - 扩展/实现这些接口需要泛型？

> ID：15353986
> 
> 赞同：0
> 
> 时间：2013-03-12T05:31:07.697
> 
> 标签：java, generics, interface, pcap

我正在尝试设计接口和类来解析 pcap 格式文件中的某些类型的数据包。（我知道存在特殊的库，但我需要自己做）

所以我有一个分类器接口，该方法会检查它是否是一个有效的数据包。

```
public interface Classifier {
    boolean classify (PcapPacket pcapPacket);
} 
```

解析器接口的方法会将内部的字节数组`PcapPacket`转换为一些字段。`P`代表新解析的数据包和`S`统计信息。

```
public interface Parser<P, S> extends Classifier {
    P parsePacket (PcapPacket pcapPacket);
    P parsePacket (PcapPacket pcapPacket, P outPacket);
    S parseReader (PcapReader pcapReader);
} 
```

现在我已经实现`AParser`了它可以解析某个数据包或文件。

```
public class AParser implements Parser<APacket, AStats>, Classifier { 
```

但是现在我很难`BParser`在`AParser`考虑到这一点的基础上实施`BPacket extends APacket`。

**`public class BParser extends AParser implements Parser<BPacket, BStats> {`**

在`parsePacket`我想做这样的事情：

```
BPacket parsePacket (PcapPacket pcapPacket) {
    APacket apacket = super.parse(pcapPacket);
    BPacket bpacket = new BPacket(apacket);

    //extract val1 and val2 from pcapPacket
    bpacket.set(val1, val2);
    return bpacket;
} 
```

粗体线给出编译错误。在这一点上，我明白我的方法有问题。可能，我在定义接口时需要使用泛型。

**您将如何帮助我重新设计此代码以使其在未来工作和灵活？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:40:10.527

是的，泛型和子类不能以这种方式很好地协同工作。您已经声明了解析器 (AParser) 的特化，它将其通用参数绑定到给定对象 (APacket)。然后，您不能使用一组不同的通用参数扩展此专业化。就像您正在尝试这样做：

```
public class BParser implements Parser<APacket, AStats>, Parser<BPacket, BStats> { 
```

这不起作用，因为类型擦除意味着您有一堆方法可以转换为相同的签名。一个更可行的解决方案是将专用解析器的通用功能推入一个抽象基类，该基类*不会*将泛型参数绑定到特定类型。用伪代码说明：

```
public abstract class BaseParser<P, S> implements Parser<P, S> {
    // common functionality here
}

public class AParser extends BaseParser<APacket, AStats> {
    // functionality specific to AParser
}

public class BParser extends BaseParser<BPacket, BStats> {
    // functionality specific to BParser
} 
```

# vim - .vimrc 的重新加载时间逐渐变慢

> ID：15353988
> 
> 赞同：18
> 
> 时间：2013-03-12T05:31:15.747
> 
> 标签：vim, reload

我的 vim 启动时间大约是半秒（用“--startuptime”测试），但是在我通过 重新加载 vimrc 几次之后`source`，它随后变得更慢。我还没有系统地调试过 .vimrc，所以我不确定如何进行。设置`verbose`有助于了解发生了什么，我几乎可以肯定 .vimrc 被多次加载。（尤其是`filetype.vim`and `ftplugin.vim`）每当我按下`Ctrl-C`停止挂起时，我都会收到一个错误`filetype.vim`，我认为这是因为 vim 花费了大部分时间来尝试加载`filetype.vim`. 我看到的最可能的罪魁祸首是 .vimrc 的自动重新加载：

```
if has("autocmd")
    autocmd bufwritepost .vimrc source $MYVIMRC "auto source vimrc
endif 
```

我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-12T06:16:42.337

这里的罪魁祸首是您使用`autocmd`. 当您定义自动命令时

```
autocmd <Event> <Action> 
```

vim 定义了一个新的自动命令**，而不管现有的**命令。因此，当您有几个这样的自动命令`.vimrc`并重复获取它时（在这种情况下，对于每次写入），您最终会定义成百上千的自动命令，它们都重复执行相同的操作。很快，这将炸毁并减慢您的 vim 会话，这是您已经注意到的。

相反，您需要做的是对您的自动命令进行分组，然后使用`autocmd!`. 举个简单的例子：

```
augroup Group1  
    autocmd!
    autocmd <Event1> <Action1>
    autocmd <Event2> <Action2>
    ...    
augroup END 
```

您可以拥有任意数量的组，这样您就可以通过类似的操作/事件来组织它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-15T13:36:43.993

这是我的解决方案，它也清除了以前的映射：

```
augroup VimrcGroup
  autocmd!
  " Make changes effective after saving .vimrc. Beware that autocommands are
  " duplicated if .vimrc gets sourced again, unless they are wrapped in an
  " augroup and the autocommands are cleared first using 'autocmd!'
  autocmd bufwritepost $MYVIMRC call OnSavingVimrc()
augroup END

" Avoid infinite loops
if !exists("*OnSavingVimrc")
  function! OnSavingVimrc()
    " Clear previous mappings, they don't go away automatically when sourcing vimrc
    mapclear
    echo "Sourcing Vimrc after saving it"
    source $MYVIMRC
  endfunction
endif 
```

# gridview - ASP.NET C# (3.5)，Membership，如何在 GridView 中使用 DropDownList 设置 RoleName？

> ID：15353989
> 
> 赞同：0
> 
> 时间：2013-03-12T05:31:17.723
> 
> 标签：gridview, drop-down-menu, membership

我尝试在 GridView 中使用 DropDownList 设置“RoleName”，但出现此错误：

```
DataBinding: 'System.String' does not contain a property with the name 'RoleName'. 
```

我做了你想象的任何事情，在不同的论坛上提到过。以下是代码：

```
 <asp:GridView ID="gvUsers" runat="server" PageSize="25" CssClass="gv" AutoGenerateColumns="False" DataKeyNames="UserName" DataSourceID="odsUsersInRoles" EnableModelValidation="True">
            <Columns>
    <asp:TemplateField HeaderText="Role">
        <EditItemTemplate>
            <asp:DropDownList ID="ddlRoles" runat="server" DataSourceID="odsRoles" DataTextField="RoleName" DataValueField="RoleName" SelectedValue='<%# Eval("RoleName") %>'></asp:DropDownList>
            <asp:ObjectDataSource ID="odsRoles" runat="server" SelectMethod="GetAllRolesButAdministrator" TypeName="cUsers"></asp:ObjectDataSource>
        </EditItemTemplate>
        <ItemTemplate>
            <asp:Label ID="Label3" runat="server" Text='<%# Bind("RoleName") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    ...
            </Columns>
        </asp:GridView>

public static string[] GetAllRolesButAdministrator()
{
    string[] roles = System.Web.Security.Roles.GetAllRoles();
    int removeIndex = Array.IndexOf(roles, "Administrator");

    if (removeIndex >= 0)
    {
        string[] newStrItems = new string[roles.Length - 1];

        for (int i = 0, j = 0; i < newStrItems.Length; i++, j++)
        {
            if (i == removeIndex)
                j++;
            newStrItems[i] = roles[j];
        }

        roles = newStrItems;
    }
    return roles;
} 
```

请有人帮助我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:53:40.170

好吧，我犯了一个非常愚蠢的错误:-(

我试图设置其 RoleName 的行根本没有 Role，因此它无法将“null”绑定到任何角色。

问题已解决:-)

# php - 无法在弹出模式窗口中显示 sql 结果

> ID：15353991
> 
> 赞同：0
> 
> 时间：2013-03-12T05:31:23.440
> 
> 标签：php, javascript, css, popup, modalpopupextender

我有一个 CSS 模式窗口。我想显示 sql 结果。当我点击一个链接。单击链接后，它从中获取 id`<a href="index.php?idi='.$id.'">`并从数据库中选择数据并显示在弹出窗口中，这是我放置代码以在弹出窗口中查看的位置`index.php`。但这不起作用，我需要知道缺少什么或必须添加什么，谢谢

```
if (isset($_GET['idi'])) {
    $pop_id = $_GET['idi'];
    $popList="";
    $sql = mysql_query("SELECT * FROM products WHERE id='$pop_id' LIMIT 1");
    if($sql === false) {
        var_dump(mysql_error()); 
    }
else {
    print_r(mysql_num_rows($sql));
}
$popCount = mysql_num_rows($sql); // count the output amount
if ($popCount == 1)  {
    while($row = mysql_fetch_array($sql)){

             $exp = $row["expiry"];
             $com = $row["comments"];
             $term = $row["terms"];
             $qid = $row["id"];
             $pname = $row["product_name"];
             $rs = $row["price"];
             $detail = $row ["details"];

             $popList .= '<a href="#x" class="overlay" id="tc_form"></a>
        <div class="popup">
             <h2>Product Offer</h2>
                         <p></p>
            <div>
            <label for="pass">Price <?php echo $rs; ?></label>
          </div>
          <div>
            <label for="firstname">Expiry Date</label>
            </div>
            <div>
              <label for="lastname">Details</label>
            </div>
            <div>
                <label for="lastname">Conditions</label>
            </div>
            <div>
                <label for="lastname">Terms & Conditions</label>
            </div>
            </div>';
    }
} else {
    echo "That item does not exist.";
    exit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:37:43.740

试试这个，我认为你错过了`echo`保存在`$popList`变量中的列表语句。将以下代码添加到代码底部

```
echo $popList; 
```

# jquery - 如何通过done（）-mvc4中的jquery ajax调用从控制器获取集合以查看

> ID：15353992
> 
> 赞同：0
> 
> 时间：2013-03-12T05:31:25.743
> 
> 标签：jquery, asp.net-mvc-4

我有两个下拉框，在选择一个时，我想将合适的数据异步填充到第二个。为此，我使用 Jquery ajax，它将数据传递给操作方法。但是这里的问题是我不知道如何将集合从该操作方法传递回 ajax 的 done()/success() 中的视图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:42:47.013

查看 Rick Anderson 的本教程。有一个应用程序示例，您可以下载它

[ASP.Net MVC 中的级联 DropDownList](http://code.msdn.microsoft.com/Cascading-DropDownList-in-833683f9)

这是另[一篇博文](http://helios.ca/2009/05/30/aspnet-mvc-cascading-dropdownlist-with-jquery/)

希望能帮助到你

# dictionary - python：从另一个模块的字典中调用函数

> ID：15353997
> 
> 赞同：1
> 
> 时间：2013-03-12T05:32:13.673
> 
> 标签：dictionary, python-2.7, module

我有一个 if 语句，它检查来自另一个模块的字典，以查看它是否包含恰好具有函数作为其值的关键字。该函数从未被显式调用，但它在程序启动时执行，甚至在其他任何事情发生之前。这不是期望的行为，该函数永远不应该被实际调用。如果关键字在字典中，那么应该发生的只是程序向终端打印“good”。难道我做错了什么？我已经在网上搜索了几个小时，我的大脑很痛:(

从'source.py'：

```
import commands
game_state = 'playing'

while game_state == 'playing':
    player_input = raw_input('>>')
    if player_input == 'quit':
        break 
    elif player_input in commands.command_list:
        print 'good' 
```

从'commands.py'：

```
def one():
    print '1'
command_list = {'one' : one()} 
```

最后，这是输入函数名称后的结果终端：

```
1
>>one
good
>>_ 
```

一开始的'1'不应该在那里，因为该函数实际上从未被调用......对吗？我想不通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:34:32.720

您将调用返回的值存储`one`在您的字典中。由于您的 dict 是全球性的，因此它在导入时获得其价值。即你的代码相当于：

```
x = one()  # call the function
command_list = {'one' : x}  # store result in a dict 
```

尝试：

```
command_list = {'one' : one}  # store the function in a dict 
```

这存储了函数对象，而不调用它。

# visual-studio-2010 - 视觉源安全。一个项目和两个不同（混合）版本的 Visual Studio

> ID：15353999
> 
> 赞同：0
> 
> 时间：2013-03-12T05:32:25.287
> 
> 标签：visual-studio-2010, visual-studio-2008, version-control, visual-sourcesafe, visual-sourcesafe-2005

我有一个非常小的团队正在使用 Visual Studio 2008 和 Visual SourceSafe 2005（是的，我知道......）一个新的开发人员刚进来，他的机器上安装了 Visual Studio 2012。他不愿意安装 VS 2008 - 谁愿意？

那么，我们在这里有哪些选择呢？

他尝试连接到 VSS 并下载解决方案，但由于他的 Visual Studio 版本较新，因此所有项目文件都需要升级，并且这些文件会自动签出，这并不好。我需要的是让他获得解决方案并能够签出、签入仅 aspx 和 c#/vb.net 文件，这些文件与版本无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:48:01.623

共享整个解决方案并同时分支项目文件（使 aspx 和 c#/vb.net 文件保持共享）怎么样？