# StackOverflow 问答 15968000-15968999

# javascript - 无法加载静态文件 express js

> ID：15968000
> 
> 赞同：1
> 
> 时间：2013-04-12T09:43:15.547
> 
> 标签：javascript, jquery, node.js, express, socket.io

节点开发新手。

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server); 
```

我的内容如下

```
server.listen(1337);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');

}); 
```

我正在尝试获取如下静态文件

```
server.use("/", app.static(__dirname + '/')); 
```

但它不会出错。

如何获取静态文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:54:43.670

只需阅读快递文档

```
 var express = require('express'),
    app= express(),
      , server = require('http').createServer(app)
      , io = require('socket.io').listen(server);

app.use("/", express.static(__dirname + '/')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:48:49.327

静态函数是 express 模块上的一个方法。

所以应该是：

```
var express = require('express'),
app = express(),
io = require('socket.io').listen(server);

app.use(express.static(__dirname + '/')); 
```

# multicore - 使用 PAPI 读取 Intel Core i7 中的性能监控计数器

> ID：15968006
> 
> 赞同：0
> 
> 时间：2013-04-12T09:43:43.923
> 
> 标签：multicore, performance, papi

我想在 Core i7 中读取性能监控计数器 每个事件的输出仅包含 1 个数据，并且没有关于该数据所针对的核心的信息。如何通过 PAPI 分别读取每个内核的事件计数？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:11:43.940

PAPI 计数基于线程而不是内核。如果您想要基于内核的测量，您可能需要考虑使用 intel pcm - 它能够提供每个内核的计数。

PCM 使用起来有点棘手，并且计数可能与 PAPI 不匹配 - 因为 PCM 计数或记账方式略有不同。

它回答了你的问题吗？

tjr

# localization - Orchard Localization PO 文件使用和 Vandelay.TranslationManager

> ID：15968007
> 
> 赞同：2
> 
> 时间：2013-04-12T09:43:44.060
> 
> 标签：localization, orchardcms, po

我试图了解如何管理和翻译 Orchard PO 文件，如下所述： [http ://weblogs.asp.net/bleroy/archive/2011/01/13/creating-and-maintaining-orchard-translations.aspx](http://weblogs.asp.net/bleroy/archive/2011/01/13/creating-and-maintaining-orchard-translations.aspx)

当我尝试使用在互联网上找到的一些编辑器时，问题就开始了，我注意到：

*   Vandelay.TranslationManager 生成的果园翻译文件可能无效
*   在外部编辑器中编辑的文件可能会破坏 PO 翻译文件并阻止使用同步（有效键被标记为过时，新键被添加为未翻译）

首先，我试图获得 PO 文件格式的可靠解释，我在这里找到：http: [//pology.nedohodnik.net/doc/user/en_US/ch-poformat.html](http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html)

规格摘要：

*   PO 文件中的消息由其 msgid 字符串唯一标识
*   当在不同的文件中使用相同的 msgid 时，可以使用可选的上下文来区分相同的 msgid

在 Vandelay.TranslationManager 和所有翻译文件中挖掘了一下之后，我想我找到了问题所在。

Vandelay.TranslationManager 将两个值的组合假定为唯一键： - #| msgid（用作翻译键） - msgctxt（可选上下文，在 Orchard 中始终定义）

问题是 Vandelay.TranslationManager 用作唯一键 "#| msgid" 而不是 "msgid" "#| msgid" 用于模糊字符串并说明以前未翻译的字符串，在果园中用作额外信息，看起来更像是“ #。”

提取的 PO 文件示例：

```
#: ~/Modules/nwazet.commerce/Module.txt
#| msgid "Nwazet.Commerce.Category"
msgctxt ~/Modules/nwazet.commerce/Module.txt
msgid "Commerce"
msgstr "Commerce"

#: ~/Modules/nwazet.commerce/Module.txt
#| msgid "Nwazet.Bundles.Category"
msgctxt ~/Modules/nwazet.commerce/Module.txt
msgid "Commerce"
msgstr "Commerce" 
```

请注意，即使“#| msgid”不同，根据规范，上面的两个条目确实是重复的。

现在的问题是：这只是一个错误还是一个精确的设计？Afaik Vandelay.TranslationManager 是在 Orchard 中处理 Po 文件的推荐方法。还有其他人在使用此功能时遇到问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:02:52.773

处理Orchard po文件的推荐方式是在线翻译工具： http: [//orchardproject.net/localize](http://orchardproject.net/localize)

# android - 创建消息传递应用程序 (Wifi)

> ID：15968008
> 
> 赞同：0
> 
> 时间：2013-04-12T09:43:48.033
> 
> 标签：android, wifi, chat, messaging

我对 Android 应用程序开发有点陌生。我已经创建了一个非常简单的应用程序，可以打开/关闭设备的手电筒。我想尝试创建一个消息应用程序，当你们都连接到 Wifi 时，您可以在其中与朋友聊天。有点像“WhatsApp”、“Viber”等。如果你能给我指导并帮助我了解如何开发这样的应用程序，我会非常高兴。

非常感谢你，奥雷尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T20:46:03.640

使用这个：

> **聊天服务器端**

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;
import java.util.Enumeration;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class ChatServerSide extends Activity implements View.OnClickListener {

private ServerSocket serverSocket;
Handler updateConversationHandler;
Thread serverThread = null;
Button btnSendMsg;
EditText etInputMessage;
TextView tvOutputMessage;
TextView tvMyIp;
Socket socket;
public static final int SERVERPORT = 6000;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.chat_main_activity);
    iniUi();
    iniListener();

    updateConversationHandler = new Handler();

    this.serverThread = new Thread(new ServerThread());
    this.serverThread.start();
    tvMyIp.setText("Waiting devices on " + getIpAddress());

}

private void iniUi() {
    tvMyIp = (TextView) findViewById(R.id.tvMyIp);
    btnSendMsg = (Button) findViewById(R.id.btnSendMsg);
    etInputMessage = (EditText) findViewById(R.id.etInputMesage);
    tvOutputMessage = (TextView) findViewById(R.id.tvOutputMessage);
}

private void iniListener() {
    btnSendMsg.setOnClickListener(this);
}

@Override
protected void onStop() {
    super.onStop();

}

@Override
protected void onDestroy() {
    super.onDestroy();

}

@Override
public void onClick(View view) {
    try {

        String str = etInputMessage.getText().toString();
        PrintWriter out = new PrintWriter(new BufferedWriter(
                new OutputStreamWriter(socket.getOutputStream())),
                true
        );
        tvOutputMessage.setText(tvOutputMessage.getText().toString() + "You Says: "   + str + "\n");
        etInputMessage.setText("");
        out.println(str);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

class ServerThread implements Runnable {

    public void run() {
        socket = null;
        try {
            serverSocket = new ServerSocket(SERVERPORT);
        } catch (IOException e) {
            e.printStackTrace();
        }
        while (!Thread.currentThread().isInterrupted()) {

            try {
                socket = serverSocket.accept();
                CommunicationThread commThread = new CommunicationThread(socket);
                new Thread(commThread).start();

            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}

class CommunicationThread implements Runnable {

    private Socket clientSocket;
    private BufferedReader input;

    public CommunicationThread(Socket clientSocket) {
        this.clientSocket = clientSocket;

        try {
            this.input = new BufferedReader(new   InputStreamReader(this.clientSocket.getInputStream()));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            String read = null;
            try {

                read = input.readLine();
                if (read == null) {
                    read = "Client has leave the chat";
                    socket.close();
                    updateConversationHandler.post(new updateUIThread(read));
                    break;
                }
                updateConversationHandler.post(new updateUIThread("Client Says: " +   read));

        }catch(IOException e){
            e.printStackTrace();
        }

    }
}

}

class updateUIThread implements Runnable {
private String msg;

public updateUIThread(String str) {
    this.msg = str;
}

@Override
public void run() {
    tvOutputMessage.setText(tvOutputMessage.getText().toString() + msg + "\n");
}

}

private String getIpAddress() {
    String ip = "";
    try {
        Enumeration<NetworkInterface> enumNetworkInterfaces = NetworkInterface
                .getNetworkInterfaces();
        while (enumNetworkInterfaces.hasMoreElements()) {
            NetworkInterface networkInterface = enumNetworkInterfaces
                    .nextElement();
            Enumeration<InetAddress> enumInetAddress = networkInterface
                    .getInetAddresses();
            while (enumInetAddress.hasMoreElements()) {
                InetAddress inetAddress = enumInetAddress.nextElement();

                if (inetAddress.isSiteLocalAddress()) {
                    ip += inetAddress.getHostAddress() + "\n";
                }

            }

        }

    } catch (SocketException e) {
        e.printStackTrace();
        ip += "Something Wrong! " + e.toString() + "\n";
    }

    return ip;
  }
} 
```

> **聊天客户端**

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class ChatClientSide extends Activity implements View.OnClickListener {

private Handler handler = new Handler();
private Socket socket;
Button btnSendMsg;
EditText etInputMessage;
TextView tvOutputMessage;
Handler updateConversationHandler;
TextView tvMyIp;
private static final int SERVERPORT = 6000;
private static String SERVER_IP = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.chat_main_activity);
    iniUi();
    iniListener();
    SERVER_IP = ActivityMain.ipToConnect;
    updateConversationHandler = new Handler();
    receiveMsg();

}

@Override
protected void onStop() {
    super.onStop();
    try {
        socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    try {
        socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private String getServerIp(Intent intent) {
    Bundle bundle = intent.getExtras();
    String ip = bundle.getString("destAdress");
    tvMyIp.setText("Is connected to " + ip);
    return ip;
}

private void iniUi() {
    tvMyIp = (TextView) findViewById(R.id.tvMyIp);
    btnSendMsg = (Button) findViewById(R.id.btnSendMsg);
    etInputMessage = (EditText) findViewById(R.id.etInputMesage);
    tvOutputMessage = (TextView) findViewById(R.id.tvOutputMessage);
}

private void iniListener() {
    btnSendMsg.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    try {

        String str = etInputMessage.getText().toString();
        PrintWriter out = new PrintWriter(new BufferedWriter(
                new OutputStreamWriter(socket.getOutputStream())),
                true
        );
        tvOutputMessage.setText(tvOutputMessage.getText().toString() + "You Says: "   + str + "\n");
        etInputMessage.setText("");
        out.println(str);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void receiveMsg() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            final String host = SERVER_IP;

            BufferedReader in = null;
            try {
                socket = new Socket(host, SERVERPORT);
            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            } catch (IOException e) {
                e.printStackTrace();
            }

            while (true) {
                String msg = null;
                try {
                    msg = in.readLine();
                    //msgList.add(msg);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                if (msg == null) {
                    break;
                } else {
                    displayMsg(msg);
                }
            }

        }
    }).start();

}

public void displayMsg(String msg) {
    final String mssg = msg;
    handler.post(new Runnable() {

        @Override
        public void run() {
            tvOutputMessage.setText(tvOutputMessage.getText().toString() + "Server Says: " + mssg + "\n");
        }
    });
}
} 
```

> **chat_main_activity.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TextView
        android:id="@+id/tvMyIp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""/>
    </LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <Button
        android:id="@+id/btnSendMsg"
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:text="send"
        android:layout_weight="0" />

    <EditText
        android:id="@+id/etInputMesage"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:id="@+id/tvOutputMessage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    </TextView>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:25:46.057

为此，您需要创建服务器程序，该程序将验证用户名和密码以及差异用户之间的通信..等，并且您需要根据用户查询发送响应。对于任何网络通信应用程序都包含两个组件：

1.  服务器
2.  客户

对于 WhatsApp android 应用程序，它是一个与 WhatsApp 服务器通信的客户端应用程序。

The server with exchange the data from one client to another client, the client may be desktop, android mobile, iPhone,...etc

Generally chat programs will implemented using sockets, and its depends upon the architecture and technologies which you will chose.

# javascript - 我已经实现了 Phonegap Sqlite 插件警告

> ID：15968009
> 
> 赞同：1
> 
> 时间：2013-04-12T09:43:51.567
> 
> 标签：javascript, android, database, sqlite, cordova

[**我已尝试实现此**](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+%28Gaurav+S+Tomar+:+Bootstrapping+Intelligence%29) 博客中提到的 SQLite 插件。

我对编码的更改

```
 try 
        {
            File dbFile = getDatabasePath("abc.db");
            if(!dbFile.exists()){
                System.out.println("current db path:"+getDatabasePath("abc.db"));
                this.copy("abc.db",dbFile.getAbsolutePath());
            }
            else
            {
                System.out.println("db path:"+dbFile.getAbsolutePath());
            }
         } 
         catch (Exception e)
         {
         e.printStackTrace();
         }

    //And our copy function:

    super.loadUrl("file:///android_asset/www/index.html");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

  void copy(String file, String folder) throws IOException 
    {
     File CheckDirectory;
     CheckDirectory = new File(folder);

     String parentPath = CheckDirectory.getParent();

     File filedir = new File(parentPath);
     if (!filedir.exists()) {
         if (!filedir.mkdirs()) {
             return;
         }
     }

        InputStream in = this.getApplicationContext().getAssets().open(file);
        File newfile = new File(folder);
        OutputStream out = new FileOutputStream(newfile);

        byte[] buf = new byte[1024];
        int len; while ((len = in.read(buf)) > 0) out.write(buf, 0, len);
        in.close(); out.close();
    } 
```

我刚刚在**Assets 文件夹**中单独添加了 Sqlite（数据库）文件 ， [**PhoneGap-SQLitePlugin-Android**](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android/blob/master/Android/src/com/phonegap/plugin/sqlitePlugin/SQLitePlugin.java) 只有这两个 java 文件。

**当我得到它显示为的路径时，我收到警告为 FILENOTFOUNDEXCEPTION**

```
04-17 19:06:46.370: I/System.out(8101): current db path:/data/data/com.a.b.c/databases/abc.db 
```

**我正在使用cordova 2.5.0，我将android从4.1.2更改为2.2，并使用4个月前更新的插件的更新版本..**

我不知道我哪里出错了。

# javascript - 如何从具有相同类的多个 div 中删除没有标签的 div？

> ID：15968011
> 
> 赞同：1
> 
> 时间：2013-04-12T09:43:51.913
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T09:45:03.380

您可以使用`not`方法：

```
$('div.columns').not(':has(a)').remove(); 
```

请注意，ID 必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:46:59.673

另外的选择：

```
$('div.columns').filter(function(){
     return !$(this).find('a').length;
}).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:45:37.280

您可以将复合选择器与`:not`and一起使用`:has`：

```
$("div:not(:has(*))").remove(); 
```

这将删除所有`<div>`内部不包含任何标签的元素。

# python - 格式化浮点数元组

> ID：15968017
> 
> 赞同：2
> 
> 时间：2013-04-12T09:44:07.790
> 
> 标签：python

如何将浮点元组格式化为`.3f`？

```
In [1]: pi=3.14159265359

In [2]: print "{:.3f}".format(pi)
3.142

In [3]: e=2.71828182

In [4]: z=(pi,e)

In [5]: print z
(3.14159265359, 2.71828182) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:45:17.473

*您格式化元组中*的每个浮点值：

```
print ' '.join(format(f, '.3f') for f in z) 
```

我在这里使用该[`format()`函数](http://docs.python.org/2/library/functions.html#format)来为单个浮点值实现相同的格式。

输出：

```
>>> pi=3.14159265359
>>> e=2.71828182
>>> z=(pi,e)
>>> print ' '.join(format(f, '.3f') for f in z)
3.142 2.718 
```

根据需要调整连接字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-30T14:20:49.757

你可以使用

```
print '{:.3f} {:.3f}'.format(*z) 
```

# objective-c - MPMoviePlayerController 无法正常工作

> ID：15968020
> 
> 赞同：0
> 
> 时间：2013-04-12T09:44:28.950
> 
> 标签：objective-c, mpmovieplayercontroller

我正在制作一个我正在尝试播放视频的应用程序。视频正常启动，但 4 秒后视频屏幕变为黑色。我不知道是什么问题。

当我设置 player.movi​​eplayer.shouldautoplay = NO 时，这条线没有效果，视频自动开始。

这是代码：

```
NSString *urlString = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"];

NSURL *urlObj = [NSURL fileURLWithPath:urlString];

UIGraphicsBeginImageContext(CGSizeMake(1,1));
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:urlObj];
UIGraphicsEndImageContext();

[player.view setBounds:self.view.bounds];
// when playing from server source type shoud be MPMovieSourceTypeStreaming
[player.moviePlayer setMovieSourceType:MPMovieSourceTypeStreaming];
[player.moviePlayer setScalingMode:MPMovieScalingModeAspectFill];

player.moviePlayer.shouldAutoplay =  NO;

[self.view addSubview:player.view];
[player.moviePlayer play]; 
```

我在这里错过了什么吗？

我试图获取视频的总持续时间（使用 mpmovieplayercontroller 的持续时间属性），但它显示为 0.0。如何获得视频的时长？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:50:16.110

```
NSString *urlString = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"];
NSURL *urlObj = [NSURL fileURLWithPath:urlString];

UIGraphicsBeginImageContext(CGSizeMake(1,1));
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:urlObj];
UIGraphicsEndImageContext();

[player.view setBounds:self.view.bounds];
// when playing from server source type shoud be MPMovieSourceTypeStreaming
[player.moviePlayer setMovieSourceType:MPMovieSourceTypeStreaming]; // I was missing this line therefore video was not playing
[player.moviePlayer setScalingMode:MPMovieScalingModeAspectFill];

[self.view addSubview:player.view];
[player.moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:10:06.563

这里有几个问题：

1.  对于这种类型的用法（将播放器集成到您的视图中），您应该使用`MPMoviePlayerController`，而不是`MPMoviePlayerViewController`. `MPMoviePlayerViewController`当您想拥有一个可以使用`presentMoviePlayerViewControllerAnimated:`.

2.  假设您使用的是 ARC，主要问题是没有任何东西保留对您的播放器对象的引用。结果，播放器在您创建后不久就会消失。您应该通过将其分配给视图控制器的属性或实例变量来保留对它的引用。

    有关这方面的完整示例，请参阅[Till](https://stackoverflow.com/users/91282/till)对类似问题的出色[回答](https://stackoverflow.com/a/15065878/6111)。

3.  我不确定你的`UIGraphicsBeginImageContext`and`UIGraphicsEndImageContext`调用的预期目的是什么，但我看不出这里需要它们。

* * *

至于，视频还在开始，因为你马上就`shouldAutoplay = NO`打电话了。`play`

* * *

玩家的属性仅在收到`duration`a 后才包含有用的值。`MPMovieDurationAvailableNotification`您需要执行与以下类似的操作才能访问实际持续时间：

```
__weak MediaPlayerController *weakSelf = self;
[[NSNotificationCenter defaultCenter] addObserverForName:MPMovieDurationAvailableNotification object:self.player queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
  NSLog(@"Movie duration: %lf", weakSelf.player.duration);
}]; 
```

完成后用于`removeObserver:name:object:`移除观察者。

# python - python http状态码

> ID：15968031
> 
> 赞同：1
> 
> 时间：2013-04-12T09:44:47.323
> 
> 标签：python, http-status-codes, httpconnection

我正在用 python 编写自己的目录破坏器，并在安全可靠的环境中针对我的 Web 服务器对其进行测试。该脚本主要尝试从给定网站检索公共目录，并查看响应的 HTTP 状态代码，它能够确定页面是否可访问。
首先，该脚本读取一个包含所有要查找的感兴趣目录的文件，然后通过以下方式发出请求：

```
for dir in fileinput.input('utils/Directories_Common.wordlist'):

    try:
        conn = httplib.HTTPConnection(url)
        conn.request("GET", "/"+str(dir))
        toturl = 'http://'+url+'/'+str(dir)[:-1]
        print '    Trying to get: '+toturl
        r1 = conn.getresponse()
        response = r1.read()
        print '   ',r1.status, r1.reason
        conn.close() 
```

然后，解析响应，如果返回等于“200”的状态代码，则该页面是可访问的。我已经通过以下方式实现了所有这些：

```
if(r1.status == 200):
    print '\n[!] Got it! The subdirectory '+str(dir)+' could be interesting..\n\n\n' 
```

对我来说一切都很好，只是脚本标记为实际上不是的可访问页面。事实上，该算法只收集返回“200 OK”的页面，但是当我手动浏览这些页面时，我发现它们已被永久移动或访问受限。出了点问题，但我不知道应该在哪里准确修复代码，感谢任何帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:02:06.890

我没有发现你的代码有任何问题，除了它几乎不可读。我已将其重写为这个工作片段：

```
import httplib

host = 'www.google.com'
directories = ['aosicdjqwe0cd9qwe0d9q2we', 'reader', 'news']

for directory in directories:
    conn = httplib.HTTPConnection(host)
    conn.request('HEAD', '/' + directory)

    url = 'http://{0}/{1}'.format(host, directory)
    print '    Trying: {0}'.format(url)

    response = conn.getresponse()
    print '    Got: ', response.status, response.reason

    conn.close()

    if response.status == 200:
        print ("[!] The subdirectory '{0}' "
               "could be interesting.").format(directory) 
```

输出：

```
$ python snippet.py
    Trying: http://www.google.com/aosicdjqwe0cd9qwe0d9q2we
    Got:  404 Not Found
    Trying: http://www.google.com/reader
    Got:  302 Moved Temporarily
    Trying: http://www.google.com/news
    Got:  200 OK
[!] The subdirectory 'news' could be interesting. 
```

此外，我确实使用[HEAD](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4) HTTP 请求而不是 GET，因为如果您不需要内容并且只对状态代码感兴趣，它会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:53:39.480

我会建议你使用[http://docs.python-requests.org/en/latest/#](http://docs.python-requests.org/en/latest/#)作为 http。

# java - 无法使用 jmap 将 java 核心转储转换为 hprof

> ID：15968032
> 
> 赞同：4
> 
> 时间：2013-04-12T09:44:47.763
> 
> 标签：java, heap-dump, jmap

当尝试使用 jmap 将 java 核心转储转换为 hprof 时，我得到了这个执行：

```
Attaching to core core.26045 from executable /usr/java/jdk1.6.0_21/bin/java, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 17.0-b16
Dumping heap to core.hprof ...
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at sun.tools.jmap.JMap.runTool(JMap.java:179)
        at sun.tools.jmap.JMap.main(JMap.java:110)
Caused by: sun.jvm.hotspot.debugger.UnmappedAddressException
        at sun.jvm.hotspot.debugger.PageCache.checkPage(PageCache.java:208)
        at sun.jvm.hotspot.debugger.PageCache.getData(PageCache.java:63)
        at sun.jvm.hotspot.debugger.DebuggerBase.readBytes(DebuggerBase.java:217)
        at sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.readCInteger(LinuxDebuggerLocal.java:482)
        at sun.jvm.hotspot.debugger.DebuggerBase.readAddressValue(DebuggerBase.java:454)
        at sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.readOopHandle(LinuxDebuggerLocal.java:436)
        at sun.jvm.hotspot.debugger.linux.LinuxAddress.getOopHandleAt(LinuxAddress.java:120)
        at sun.jvm.hotspot.oops.Oop.getKlassForOopHandle(Oop.java:237)
        at sun.jvm.hotspot.oops.ObjectHeap.newOop(ObjectHeap.java:362)
        at sun.jvm.hotspot.utilities.HashtableEntry.literal(HashtableEntry.java:53)
        at sun.jvm.hotspot.memory.SymbolTable.symbolsDo(SymbolTable.java:106)
        at sun.jvm.hotspot.utilities.HeapHprofBinWriter.writeSymbols(HeapHprofBinWriter.java:838)
        at sun.jvm.hotspot.utilities.HeapHprofBinWriter.write(HeapHprofBinWriter.java:396)
        at sun.jvm.hotspot.tools.HeapDumper.run(HeapDumper.java:56)
        at sun.jvm.hotspot.tools.Tool.start(Tool.java:221)
        at sun.jvm.hotspot.tools.HeapDumper.main(HeapDumper.java:77)
        ... 6 more 
```

我使用了命令：

```
jmap -dump:format=b,file=core.hprof /usr/java/jdk1.6.0_21/bin/java core.26045 
```

对此有什么帮助吗？

我正在尝试在同一个盒子中创建 hprof，在那里我得到了核心转储。

# xcode - 构建为子项目时未找到来自 PCH 文件的框架头文件

> ID：15968033
> 
> 赞同：2
> 
> 时间：2013-04-12T09:44:50.743
> 
> 标签：xcode, frameworks, import, header, subproject

我有以下**项目设置**：

1) 一个主要的 iOS 项目（“*超级项目*”）......这里没什么特别的，该项目是建立在 Xcode 的默认 iOS 模板之一之上的。

2)在静态库模板之上创建的第二个项目（“*子项目”）。*我将此项目添加到超级项目中，并在“目标依赖项”和“将二进制文件与库链接”构建阶段从超级项目中创建了对它的引用。

在子项目中，我有一个 C 函数声明，如下所示：

```
ABAddressBookRef myABAddressBookCreateWithOptions(CFDictionaryRef options, CFErrorRef * error); 
```

它是 AddressBook 框架中名称相似的函数的替换/代理，并使用该框架中的类型 ( `ABAddressBookRef`)。声明存储在头文件中，实现存在于相应`.m`文件中。为了使这种类型可用，我将框架头添加到`.pch`我的子项目的文件中：

```
#ifdef __OBJC__
        #import <AddressBook/AddressBook.h>
        #import <Foundation/Foundation.h>
#endif 
```

出现以下**问题**：

如果我构建超级项目（发布或调试配置），构建失败并显示以下错误消息：

```
.../ManagedCFunctions.h:24:1: Unknown type name 'ABAddressBookRef' 
```

我为**解决这个问题**所做的事情，或者至少了解发生了什么：

*   单独构建子项目（但后续的超级项目构建无论如何都会失败）
*   取消注释声明会消除错误，但自然会`Implicit Declaration of Function`在调用位置引发“”警告
*   将导入添加到超级项目的`.pch`文件没有帮助
*   直接将导入添加到函数的头文件中，但在我的场景中不是一个选项（部分代码是自动生成的，很难找出哪个文件需要哪个框架）

我怀疑头文件可能不是在 Objective-C 中处理的，而是在 C 模式下处理的，因此由于`#ifdef __OBJC__`导入周围的宏而忽略了导入，但删除它也没有帮助。我还尝试将`#import <Foundation/Foundation.h>`函数的头文件添加到“建议”Objective-C 模式，它实际上在文件中启用了正确的语法突出显示，但对构建没有帮助。

关于为什么在 中找到符号`.m`但不在`.h`文件中的任何建议？或者任何不需要将导入添加到特定头文件但全局的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-08T12:01:30.640

今天我在 project -> Info -> Configurations 添加配置文件后发现了一个问题，然后我运行我的项目，它在我的 pch 文件中出错。

显示没有找到xxx.h，我搜索了很多解决方案，但我无法得到正确的答案。所以我记得那一步。

我删除了配置文件，我的项目就正常了。

我希望这对此类问题有所帮助。

# android - 如何从 Windows 在 android 模拟器浏览器中启动 URL 链接

> ID：15968036
> 
> 赞同：3
> 
> 时间：2013-04-12T09:44:58.217
> 
> 标签：android, maven, js-test-driver

我有问题。我想在android浏览器中自动化测试。

我的要求：

我有`JS Test Driver`需要在 android 浏览器中测试的 maven 项目。

所以我想做的是

在 Maven`pom.xml`文件中，而不是指向 chrome 作为

```
<browser.command>C:\Program Files (x86)\Google\Chrome\Application\chrome.exe</browser.command> 
```

创建`bat file`将在 android 模拟器浏览器中运行启动 URL 链接的命令并将其指向该`bat file`.

我的问题是我不知道要编写什么命令来从命令行在 android 模拟器浏览器中午餐特定的 URL。

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T10:32:25.603

将该`adb shell`工具与`am`命令结合使用，您应该能够在您的 Android 设备上启动浏览器，并将其指向一个选择的 url。

类似的东西（目前我没有设备，所以无法测试）：

```
adb shell am start -a "android.intent.action.VIEW" -d "http://your.url.here" 
```

把它放在你的 bat 文件中并运行它。它应该会自动找到连接的设备。如果您还想等待设备可用，请查看`adb`文档：也可以这样做。

# powershell - AppFabric 仪表板引发 Powershell 错误

> ID：15968037
> 
> 赞同：3
> 
> 时间：2013-04-12T09:45:02.997
> 
> 标签：powershell, appfabric

我已将 AppFabric 安装到 Server2012 上。我检查了先安装的先决条件并安装了累积更新 3。我有一个 SQL Server 2012 实例安装到 SP1 并且操作系统指示已安装所有更新。

查看仪表板时，我收到错误：

> 无法将对象类型转换为“System.Management.Automation.PSCustomObject”类型以键入“Microsoft.ApplicationServer.Management.Data.Group ...”

在我的谷歌搜索过程中，我发现的信息很少，但都没有提供解决问题的方法。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-15T02:41:12.550

我遇到了同样的问题，发现应用 Windows Update [KB2932678](https://support.microsoft.com/en-gb/help/2932678/cumulative-update-package-5-for-microsoft-appfabric-1.1-for-windows-server)（适用于 Windows Server 的 Microsoft AppFabric 1.1 的累积更新包 5）阻止了错误的出现。

编辑：[KB3092423](https://support.microsoft.com/en-gb/help/3092423/cumulative-update-7-for-microsoft-appfabric-1.1-for-windows-server)（累积更新 7）是我能找到的最新版本，因此如果您要应用更新，不妨应用最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T16:32:55.380

我有同样的问题。我在某处（没有链接）读到它出现，因为在包含（服务的）实例的 AppFabric 监控数据库表中没有记录。

一旦您在那里至少有一条记录，错误就会消失，仪表板将正确显示 WF 实例。

这在我的情况下有效。

更新：

准确地说，与 AppFabric Dashboard 停止显示上述错误相关的表是：AppFabric Persistence DB's table [System.Activities.DurableInstancing].[InstancesTable] 。此表应包含至少一条与显示当前 AppFabric 仪表板的 WF 服务相关的记录。

# python - Z3：如何在 Z3 python 中编码 If-the-else？

> ID：15968039
> 
> 赞同：4
> 
> 时间：2013-04-12T09:45:03.960
> 
> 标签：python, z3

我想在 Z3 python 中对 If-the-else 进行编码，但找不到有关如何执行此操作的任何文档或示例。

我有一个如下示例代码。

```
F = True
tmp = BitVec('tmp', 1)
tmp1 = BitVec('tmp1', 8) 
```

现在如何将这个条件编码为 F：

```
if tmp == 1, then tmp1 == 100\. otherwise, tmp1 == 0 
```

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:07:37.560

您将需要 Z3 的`If`功能：

> ```
> def z3py.If   (       a,
>           b,
>           c,
>           ctx = None 
>   ) 
> ```
> 
> 创建 Z3 if-then-else 表达式。
> 
> ```
> >>> x = Int('x')
> >>> y = Int('y')
> >>> max = If(x > y, x, y)
> >>> max
> If(x > y, x, y)
> >>> simplify(max)
> If(x <= y, y, x) 
> ```

（从[这里](http://research.microsoft.com/en-us/um/redmond/projects/z3/namespacez3py.html#a2340b7cde2aa8c9dc7aeaa5dfa7e851f)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T10:07:14.820

你可以用`If`这个。`If`接受三个参数：条件、条件为真时应为真的表达式和条件为假时应为真的表达式。所以为了表达你的逻辑，你会写：

```
If(tmp==1, tmp1==100, tmp1==0) 
```

# html - 有什么方法可以将 JavaFX FXML UI 转储为静态 HTML 页面？

> ID：15968047
> 
> 赞同：0
> 
> 时间：2013-04-12T09:45:21.070
> 
> 标签：html, javafx, fxml

我们正在构建一个 JavaFX 桌面应用程序，该应用程序从一开始就可以使用外部 CSS 文件进行主题化。现在我们想给我们的设计师（不是程序员）一些机会来调整应用程序的外观，而不必每次都安装 JFX、NetBeans 和重新启动应用程序。

有没有办法将 UI 的静态 FXML 外观转储为某种 HTML 文件？基本上这样设计师就可以调整 CSS 并使用 F5 刷新外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:08:53.453

AFAIK，场景生成器支持 CSS，因此不需要将 FXML 转换为 HTML。

否则，您可以编写一个 XSL 脚本或一个 Java 程序（例如使用 StAX）来进行转换，但我猜这将是相当多的工作。

# shell - 在 shell 脚本中使用别名？

> ID：15968053
> 
> 赞同：26
> 
> 时间：2013-04-12T09:45:38.733
> 
> 标签：shell

我在示例 shell 脚本中定义的别名不起作用。我是 Linux Shell 脚本的新手。下面是示例 shell 文件

```
#!/bin/sh

echo "Setting Sample aliases ..."
alias xyz="cd /home/usr/src/xyz"
echo "Setting done ..." 
```

在执行此脚本时，我可以看到回显消息。但是如果我执行 alias 命令，我会看到以下错误

```
xyz: command not found 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-12T09:51:37.947

**源**你的脚本，不要执行它像`./foo.sh`或`sh foo.sh`

如果你这样执行你的脚本，它在子 shell 中运行，而不是你当前的。

```
source foo.sh 
```

会为你工作。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-06-19T18:07:03.537

您需要设置一个特定选项来执行此操作，`expand_aliases`：

```
 shopt -s expand_aliases 
```

示例：

```
# With option
$ cat a
#!/bin/bash
shopt -s expand_aliases
alias a="echo b"
type a
a
$ ./a
a is aliased to 'echo b'
b

# Without option
$ cat a
#!/bin/bash
alias a="echo b"
type a
a

$ ./a
./a: line 3: type: a: not found
./a: line 4: a: command not found 
```

参见：[https](https://unix.stackexchange.com/a/1498/27031) ://unix.stackexchange.com/a/1498/27031和[https://askubuntu.com/a/98786/127746](https://askubuntu.com/a/98786/127746)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T09:51:10.050

**采购脚本** `source script.sh`

`./script.sh`将在子 shell 中执行，所做的更改仅适用于子 shell。一旦命令终止，子外壳程序就会执行，更改也会执行。

* * *

## 或者

HACK：只需在 shell 上运行以下命令，然后执行脚本。

```
alias xyz="cd /home/usr/src/xyz"
./script.sh 
```

要取消别名，请在 shell 提示符下使用以下命令

```
unalias xyz 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:46:26.890

如果您在脚本中执行它，则别名将在脚本完成执行时结束。

*如果您希望它是永久性的：*

您的别名定义明确，但您必须将其存储在 中`~/.bashrc`，而不是 shell 脚本中。

将其添加到该文件中，然后使用`. .bashrc`- 它将加载该文件，以便可以使用别名。

*如果您希望它仅在当前会话中使用：*

只需将其写入控制台提示符即可。

```
$ aa
The program 'aa' is currently not installed. ...
$ 
$ alias aa="echo hello"
$ 
$ aa
hello
$ 
```

另外：从[肯特的回答](https://stackoverflow.com/a/15968190/1983854)中，我们可以看到您也`source`可以通过`source your_file`. 在这种情况下，您不需要使用 a `shell script`，只需一个普通文件即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T16:42:37.987

如果您在提示符下调用它，您的别名必须在您的 .profile 文件中，而不是在您的脚本中。

如果您在脚本中放置别名，则必须在脚本中调用它。

尝试运行内部具有别名的脚本时，源文件是正确的答案。

```
source yourscript.sh 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-19T22:49:39.060

将您的别名放在文件调用中 ~/.bash_aliases 然后，在许多发行版中，它将自动加载，无需手动运行 source 命令来加载它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-22T05:16:18.383

您可以使用以下命令。

```
shopt -s expand_aliases

source ~/.bashrc

eval $command 
```

# f# - 在 F# 标准库实现中看到的 (# ... #) 语法是什么？

> ID：15968054
> 
> 赞同：24
> 
> 时间：2013-04-12T09:45:41.610
> 
> 标签：f#, cil

阅读 Array2D 模块的源代码，我在许多核心功能的实现中偶然发现了这个有趣的结构，例如：

```
[<CompiledName("Get")>]
let get (array: 'T[,]) (n:int) (m:int) =  (# "ldelem.multi 2 !0" type ('T) array n m : 'T #) 
```

我只能假设这是内联 CIL 的语法，并且在这里使用显然是为了获得性能优势。但是，当我尝试在我的程序中使用此语法时，我收到一个错误：

```
warning FS0042: This construct is deprecated: it is only for use in the F# library 
```

这究竟是什么？有详细的文档吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T09:52:30.450

我认为这有两个目的：

1.  这些函数精确地编译为 1 条 CIL 指令，必须在某处进行编码，因此在源代码处进行编码似乎是最好的。
2.  它允许一些额外的技巧，`Add`以高性能方式定义多态函数，这对于 F# 类型系统来说很难。

您实际上可以使用它，但您必须在代码中指定`--compiling-fslib`（未记录的）和`--standalone`标志。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T18:02:45.137

我在 usenet 档案中找到了一些细节：http: [//osdir.com/ml/lang.fsharp.general/2008-01/msg00009.html](http://osdir.com/ml/lang.fsharp.general/2008-01/msg00009.html)

> > F# 代码中的嵌入式 IL。官方是否支持此功能
> 
> 并不真地。此功能 99.9% 的用途是用于 FSharp.Core.dll（在 1.9.2.9 及之前版本中称为 fslib.dll）中定义的操作。
> 
> 从历史上看，允许最终用户嵌入 IL 以访问 F# 库或使用他们自己的嵌入式 IL 的语言结构无法访问的 .NET IL 功能一直很有用。现在 F# 库已经更加成熟，对此的需求变得越来越少，实际上几乎不存在。我们预计这种情况将继续存在。我们甚至有可能在 F# 的“产品”版本中将此作为库独有的功能，尽管我们尚未就此做出最终决定。

这是 Don Syme 于 2008 年 1 月发来的信息。

# php - php - 需要动态处理情感分析的建议

> ID：15968058
> 
> 赞同：0
> 
> 时间：2013-04-12T09:45:55.047
> 
> 标签：php, dynamic, twitter, processing

![我的推文情绪分析](https://i.stack.imgur.com/7WM7S.jpg)

这是我的情绪分析任务的屏幕截图。我想从你们那里得到一些建议。
这个程序是用 PHP 构建的，并且是静态运行的。处理完所有输入后显示的结果推文。
我希望推文继续产生（连续），然后将情绪结果映射到实时线图形。
1.在您看来，最有效的方法是什么？
（我想也许 jquery 是工具。但我还没有找到一个连续处理 jquery/javascript）。
2.你知道jquery/javascript动态/连续处理的示例/项目吗？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:56:38.753

您可以使用 JSON 公开数据，然后使用 jQuery getJSON() 定期获取它们。

# css - Firefox 无法识别媒体查询

> ID：15968060
> 
> 赞同：0
> 
> 时间：2013-04-12T09:45:59.993
> 
> 标签：css, firefox, media-queries, freemarker

我有一个用`FreeMarker`模板语言编写的小模板。我有以下CSS：

```
<style type="text/css">
@media print {
    @page {
        size: landscape;
    }
}
@media screen {
    .run {
        min-height: 100%;
    }
}
/* More css properties goes here */
</style> 
```

问题是这两条规则仅适用于我在 Google Chrome 中打开网页时。当我在 Firefox 中打开它时，该`min-height`属性不适用于`.run`div，并且 Firefox 以纵向模式打印我的页面，而不是指定的横向模式。我究竟做错了什么？
PS：如果重要的话，doctype 字符串如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:36:56.490

我从从事打印样式工作时就知道，某些浏览器使用了一些规则，而其他浏览器则不使用这些规则。我很确定大小：风景就是其中之一。还有其他的，比如 Firefox 使用的分页符，而不是其他人。所以它真的很受欢迎。祝你好运，在 HTML 电子邮件和打印 CSS 中工作这是我讨厌使用网络的两件事。

# asp.net - 更新 Orchard 中的内容部分后如何执行 Web 服务调用？

> ID：15968062
> 
> 赞同：1
> 
> 时间：2013-04-12T09:46:07.197
> 
> 标签：asp.net, .net, asp.net-mvc, web-services, orchardcms

我有一个 Web API 服务，我已经设法`ContentPart`通过使用此处概述的方法将值提取到 a 中：[如何更改 Orchard 记录存储库](https://stackoverflow.com/questions/4727843/how-to-change-orchard-record-repository)。

现在，我要做的是更新我的属性值，`ContentPart`并通过 Web API 调用执行更新。我想我已经接近了，但只是无法触发更新方法。

在我的`Handler`中，我添加了一个处理程序`OnUpdate`。我可以看到我的`OnUpdate`方法已注册，但它永远不会执行。

**所以我的问题是**：这是要使用的正确处理程序事件吗？如果是这样，我怎样才能让它触发？

我应该补充一点，我正在`ContentPart`通过 a访问`Controller`，而不是 a `Driver`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:33:25.487

`OnUpdating`/`OnUpdated`每次打电话都会被解雇`IContentManager.UpdateEditor(item)`。在默认情况下，当您在编辑内容项时点击*“保存”*按钮时会发生这种情况。

我不太明白您所说的“*通过 a**访问`ContentPart``Controller`*”是什么意思？

您是否有处理项目编辑器呈现和回发的自定义控制器？或者您是否在代码中创建和更新某些项目，而根本不使用内置编辑器？

*   在前一种情况下，您需要确保 `IContentEditor.UpdateEditor(item)`在 POST 操作中调用整个内容项（与默认控制器中的方式相同 - `Core\Contents\Controllers\AdminController.cs`）。
*   在后者中，我猜这里可能就是这种情况，`OnUpdating`/ `OnUpdated`不会被解雇，您需要从控制器操作中自己调用 Web 服务，正如 Bertrand 在评论中指出的那样。

**还有第三个选项可用**，我发现它在类似情况下特别有用：

1.  用作`LazyField<T>`更新后需要推送到 Web 服务的那些部件属性的支持字段。
2.  将调用 Web 服务的代码放在该惰性字段的设置器中（在处理程序`OnActivated`事件期间设置它）。
3.  现在，每当您的属性更新时，都会调用网络服务，即。惰性字段将充当您的 Web 服务和当前代码之间的透明代理。

*有关如何使用惰性字段的示例，请查看`CommonPartHandler`类和方法`LazyLoadHandlers`以及`PropertySetHandlers`.*

# django - Django admin：如何允许用户编辑配置文件？

> ID：15968064
> 
> 赞同：1
> 
> 时间：2013-04-12T09:46:14.873
> 
> 标签：django, django-models, django-admin, django-profiles

我尝试实现用于编辑 Django 管理面板的代码。它运行没有任何错误，但它没有更新数据库中的相关数据字段。这是我更新数据库表的代码。

**视图.py**

```
 @login_required
   def edit_profile(request):
    if request.POST:
    if 'logout' in request.POST:
        return HttpResponseRedirect('/logout/')

    elif 'save' in request.POST:
        user = User.objects.get(username= request.user)
        user.user=request.POST.get('user')
                    user.name=request.POST.get('name')
        user.address=request.POST.get('address')
        user.designation=request.POST.get('designation')                        
        user.email=request.POST.get('email') 
        user.role=request.POST.get('role')
        user.project=request.POST.get('project')                        
        user.task=request.POST.get('task')
        user.save()
        return HttpResponseRedirect('/view_profile/')

                   # user.set_password(form.cleaned_data['password'])

                    #drinker=user.get_profile();
                    #drinker.name=form.cleaned_data['name']
                    #drinker.address=form.cleaned_data['address']
                    #drinker.save()

    elif 'cancel' in request.POST:
        return                 HttpResponseRedirect('/view_profile/')               

user_profile = request.user.get_profile()
return render_to_response('edit_profile.html',{'profile':user_profile },context_instance=RequestContext(request)) 
```

**HTML 模板**

```
 {% block content %}

<form action="." method="post">
{% csrf_token %}    

    <input type="submit" value="Logout" name="logout" />
    <br/>
    User:
    <input type="text" name="user" value="{{ profile.user}}" /><br />
    Name:
    <input type="text" name="name" value="{{ profile.name}}" /><br />

    Address:
    <input type="text" name="address" value="{{ profile.address}}" /><br />
    Designation:
    <input type="text" name="designation" value="{{ profile.designation}}" /><br />

    Email:
    <input type="text" name="email" value="{{ profile.email}}" /><br />
    Role:
    <input type="text" name="role" value="{{ profile.role}}" /><br />

    Project:
    <input type="text" name="project" value="{{ profile.project}}" /><br />
    Task:
    <input type="text" name="task" value="{{ profile.task}}" /><br />

    <input type="submit" value="Save Changes" name="save" />
    <input type="submit" value="Cancel" name="cancel" />
    <br/>
</form>

   {% endblock %} 
```

请帮我解决这个问题。

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:20:14.623

你的代码

```
user = User.objects.get(username=request.user)
//equivalent to ex. (jay=1) 
```

也许您应该将此行更改为

```
user = User.objects.get(username=request.user.username) 
```

或者

```
user = User.objects.get(pk=request.user.id) 
```

根据您的代码，您定义不在 User 模型中的字段

```
user = User.objects.get(username= request.user)
user.name=request.POST.get('name')
user.address=request.POST.get('address') <-----
user.designation=request.POST.get('designation') <----                        
user.email=request.POST.get('email') 
user.role=request.POST.get('role') <-----
user.project=request.POST.get('project') <----                       
user.task=request.POST.get('task') <-----
user.save() 
```

我不知道这些领域是从哪里来的。如果您希望保存这些信息，则必须为该字段定义一个单独的模型。

**更新：**

```
@login_required
def edit_profile(request):
    if request.POST:
        user = User.objects.get(pk=request.user.id)
        user.username=request.POST.get('user')                    
        user.email=request.POST.get('email') 
        user.save()

        employee = Employee.objects.get(user=request.user)
        employee.name=request.POST.get('name')
        employee.address=request.POST.get('address')
        employee.designation=request.POST.get('designation')                        
        employee.role=request.POST.get('role')
        employee.project=request.POST.get('project')                        
        employee.task=request.POST.get('task')
        employee.save()

        return HttpResponseRedirect('/view_profile/')            

    user_profile = request.user.get_profile()
    return render_to_response('edit_profile.html',{
        'profile':user_profile 
    },context_instance=RequestContext(request))

<form action="." method="post">
    {% csrf_token %}    
    User:
    <input type="text" name="user" value="{{ profile.user.username}}" /><br />
    Name:
    <input type="text" name="name" value="{{ profile.name}}" /><br />

    Address:
    <input type="text" name="address" value="{{ profile.address}}" /><br />
    Designation:
    <input type="text" name="designation" value="{{ profile.designation}}" /><br />

    Email:
    <input type="text" name="email" value="{{ profile.email}}" /><br />
    Role:
    <input type="text" name="role" value="{{ profile.role}}" /><br />

    Project:
    <input type="text" name="project" value="{{ profile.project}}" /><br />
    Task:
    <input type="text" name="task" value="{{ profile.task}}" /><br />

    <input type="submit" value="Save Changes" name="save" />
    <input type="reset" value="Cancel" name="cancel" />
    <br/>
</form> 
```

这是保存它的方法，但抱歉我不完全了解您的 Employee 模型字段，所以我只是根据您使用的变量猜测它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T19:05:21.583

您可以像这样创建一个新表单（myExample）：

```
class userForm(ModelForm):

    class Meta:
        model = Usuario
        fields = ['userName','name', 'lastName', 'email', 'description', 'image']} 
```

然后在您的视图文件和您的方法中添加带有对象实例的表单，例如：

```
myUser = User.objects.get(id=request.session['userId'])
form = userForm(request.POST, instance=myUser) 
```

现在您可以通过填写完整的表单来传递此表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:23:52.460

如果我没记错的话，`request.user`是发出请求的用户的 Django 模型的一个实例，所以这条线......

```
user = User.objects.get(username= request.user) 
```

......可能只是......

```
user = request.user 
```

...但我可能是错的。

**更新**

我突然想到，如果包含该行的代码的原始版本...

```
user = User.objects.get(username= request.user) 
```

...没有引发异常，那么它甚至可能没有被执行。如果您从 Django 内置命令运行，请尝试在函数顶部`runserver`打印出变量的内容。`request`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:45:32.577

```
class ProfileView(UpdateView):
    model = User
    template_name = 'profile.html'
    slug_url_kwarg = 'username'
    slug_field = 'username'

    def get_object(self, queryset=None):
        obj = super(ProfileView, self).get_object(queryset)
        if not self.request.user or self.request.user.pk != obj.pk:
            raise Http404('nope')
        return obj 
```

网址路线：

```
url(r'profileedit/(?P<username>[a-z-\d-]+)/$', ProfileView.as_view(), name='profile_view') 
```

模板很明显，我猜

# .net - 如何定义聚合和聚合根以及聚合之间的链接

> ID：15968067
> 
> 赞同：1
> 
> 时间：2013-04-12T09:46:20.080
> 
> 标签：.net, domain-driven-design, entity-framework-5, aggregate, aggregateroot

所以我是 DDD 的新手，我正在尝试正确设计一个应用程序。但是我在识别聚合根时遇到了一些困难。

我的需要或多或少是一棵树

```
*Customers
*Each customer can have 0 or more licenses
*Each license can have 0 or more courses
*Each course can have 0 or more lessons
*Each lesson can have 0 or more slides and videos 
```

最后，我的测验/测试几乎可以链接到任何东西，甚至是课程视频中的某个时间。

不管我怎么想，我只知道 Customer 将是包含 [Customer, License, Course, Lesson, Slide, Video] 的聚合的聚合根

但这是一个相当大的聚合，我知道应该避免大聚合。

然后，测验将是问题、答案等的集合。作为第二个问题，我可能会问链接应该是什么样子？因为假设我想在 4 分钟后在视频中弹出一个测验。那么我的测验需要链接到该视频并存储时间。但该视频是另一个聚合（在客户、许可证、课程、课程下）的深处，不应以持久的方式直接从该测验聚合中链接。

那我该如何解决。我已经订购了我的大 DDD 书，但暂时不会在这里，如果我能在此之前理解这一点，那就太好了！

我没关系，但我使用 .net c# mvc，带有 ef5 和存储库模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:13:45.037

为了简化事情，您应该使用 CQRS，即使用不同的模型进行“编写”和查询。这意味着我们有 2 个案例 1\. 创建和更新业务对象（实体） 2\. 从业务对象生成简化模型以允许简单查询

使用这种方法意味着您可以专注于对客户、许可证、课程、课程进行严格建模，目的是为真实行为和它们之间的关系建模。

在这里很容易陷入以数据为中心的方法，其中客户被视为许可证的容器，而许可证又是课程等的容器。很明显（即使没有太多信息）这些实体是聚合根而不是容器。

将课程组织成根据许可证组织的课程可能更合适。这意味着课程实体与一些课程实体相关联，因此课程实际上没有课程。它有一个名字、一个教学大纲等。课程、教授、学生被“附加”到课程中，但不是课程的一部分。

客户实体对客户进行建模。当客户购买了一些许可证时，他就**有权访问**与该许可证相关的课程。再一次，客户**没有**许可证。因此，您需要在此处对客户和许可证之间的关联进行建模。这样做时，请考虑 License 的哪些详细信息取决于客户的哪些详细信息（它们可能不是，因为它们是完全不同的东西，所以基本的 (CustomerId,LicenseId) 就足够了）。当然，这些都是简单的建议，因为我并不完全了解该领域。

要点是，您必须深入了解客户、许可证等对域的含义，并抵制以“明显”方式查看事物的冲动。DDD 建模并不难，但它非常棘手，因为你真的不能肤浅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:18:45.120

您应该在业务不变量之后定义聚合。

看看弗农[关于聚合设计的文章](https://vaughnvernon.co/?p=139)。
要关联不同的聚合，您可以使用[共享标识符](http://epic.tesio.it/doc/manual/shared_identifiers.html)，这也消除了[延迟加载](https://stackoverflow.com/questions/15851122/domain-driven-design-entity-lazy-loading)的需要。

但是，您还应该考虑是否必须设计不同的有界上下文。与您的领域专家交谈，解释每个有界上下文都与对此事的特定观点有关。

# c# - 将二进制文件保存到数据库

> ID：15968072
> 
> 赞同：3
> 
> 时间：2013-04-12T09:46:28.550
> 
> 标签：c#, .net, vb.net, visual-studio, visual-studio-lightswitch

我知道这个主题有很多线程，我尝试将[这个](http://social.msdn.microsoft.com/Forums/en-US/lightswitchgeneral/thread/f9ad0c95-5914-4b65-b406-57f7b7a37741)线程从 VB 实现（翻译）为 C#。

`Table fileContainer = {string FileName, binary File}`

这是我的尝试：

```
partial void FileContainersAddAndEditNew_Execute()
{
    Dispatchers.Main.BeginInvoke(() =>
    {

        OpenFileDialog openDialog = new OpenFileDialog();

        if (openDialog.ShowDialog() == true)
        {
            using (System.IO.FileStream fileData = openDialog.File.OpenRead())
            {
                long fileLen = fileData.Length;

                if (fileLen > 0)
                {
                    Byte[] fileBArray = new Byte[fileLen];

                    fileData.Read(fileBArray, 0, fileLen);
                    fileData.Close();

                    FileContainer fc = this.FileContainers.AddNew();

                    fc.File = fileBArray;
                    fc.FileName = openDialog.File.Extension.ToString().ToLower();

                }
            }
        }

    });
} 
```

但是代码在这一行失败了：

```
 FileContainer fc = this.FileContainers.AddNew(); 
```

出现此错误：

```
IVisualCollection<T>.AddNew() should not be called from UI Thread. 
```

我有点困惑。我认为：

```
 Dispatchers.Main.BeginInvoke(() => 
```

阻止了这种情况的发生。还是我做错了？

我注意到的另一件事是 VB 代码使用：

```
filenLen-1 
```

但我试图做到这一点越界。他们也不会将其转换为 an`int`但`.Read`不会将 a`long`作为参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:27:18.333

`openFileDialog.ShowDialog()` does not return a bool value and cannot be used in an if statement like that. `openFileDialog.ShowDialog()` will open the dialog. As far as I know the execution pauses until you close the dialog and there's no reason to check if it's open or not.

```
filenLen-1

using (System.IO.FileStream fileData = openDialog.File.OpenRead());

long fileLen = fileData.Length; 
```

should be

```
filenLen--;

using (System.IO.FileStream fileData = System.IO.File.OpenRead(openDialog.FileName))

int fileLen = int.Parse(fileData.Length.ToString()); 
```

`fileData.Read(fileBArray, 0, fileLen);` needs fileLen to be an integer. fileData returns a long for a reason though and this might cause problems.

As for the invoke question I'd have to know exactly what you're trying to do to be able to help you. Perhaps we can avoid invoking.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:35:56.617

我在这里发布我更新的代码，以免为未来的读者弄乱我的原始代码。这应该有效；

```
 partial void FileContainersAddAndEditNew_Execute()
    {

        var supportedFiles = "*.*";
        Dispatchers.Main.BeginInvoke(() =>
        {
            OpenFileDialog openDialog = new OpenFileDialog();
            openDialog.Filter = "Supported files|" + supportedFiles;

            if (openDialog.ShowDialog() == true)
            {
                using (System.IO.FileStream fileData = openDialog.File.OpenRead())
                {
                    long fileLen = fileData.Length;

                    if (fileLen > 0)
                    {
                        Byte[] fileBArray = new Byte[fileLen--];

                        fileData.Read(fileBArray, 0, (int)fileLen);
                        fileData.Close();
                        var filename = openDialog.File.ToString().ToLower();

                        this.FileContainers.Details.Dispatcher.BeginInvoke(() =>
                        {
                            FileContainer fc = this.FileContainers.AddNew();
                            fc.File = fileBArray;
                            fc.FileName = filename;
                        });

                    }
                }
            }
        }); 

    } 
```

# mysql - 如何从 MySQL 的时间跨度中提取“日期”部分

> ID：15968074
> 
> 赞同：0
> 
> 时间：2013-04-12T09:46:31.627
> 
> 标签：mysql, date

我有一个 SQL 表中的时间跨度列表和其他表中的其他变量。使用连接脚本，我试图提取两列：`name`和`time`.

```
name      time 
soo       12/9/2001 13.25
nu        13/4/2005 4.33 
```

等等

使用以下脚本，我得到语法错误。任何人都可以在这方面帮助我吗？

```
SELECT data1.files.names,
       data1.registrationtime.date(regtime)
FROM data1.files,
     data1.registrationtime
WHERE files.id=fileID
  AND registrationtime.id=regID 
```

语法错误在括号内`regtime`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:03:57.947

如果我对您的理解正确，您想从 MySQL 中的时间戳中提取日期部分。

这可以通过使用`DATE_FORMAT()`函数来完成。例如

```
SELECT DATE_FORMAT(data1.registrationtime, '%d/%c/%y') 
FROM ... 
```

# html - 坐标图像 - 在图像上形成

> ID：15968075
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:46:34.583
> 
> 标签：html, image, forms

我想在图像上放置 2 个表格

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:49:07.377

将表格放入`div`. 给`div`a `background-image`。

# php - MySQL 查询 - 基本加入建议

> ID：15968078
> 
> 赞同：0
> 
> 时间：2013-04-12T09:46:48.613
> 
> 标签：php, mysql

我昨天真的开始学习 PHP / MySQL，所以如果这是一个简单/愚蠢/措辞不当的问题，我深表歉意。

我有一个带有两个表的数据库：

**地点**

```
l_id | loc_name
----------------
1    | France
2    | London
3    | The Moon 
```

**项目**

```
i_id | item_name | item_loc
----------------------------
1    | Book      | 1
2    | Mirror    | 1
3    | Bread     | 2
4    | Camera    | 2
5    | Cheese    | 3
6    | Ladle     | 3 
```

当提供 l_id 编号列表时，我如何才能最好地找到 loc_name 和分配给每个编号的所有项目？

这可以通过单个查询来完成，还是我需要查询两次 - 一次用于名称，一次用于项目？

另一方面，我在其他查询中使用 JOIN 取得了一些非常小的成功，但我真的不明白他们为什么工作。我很难弄清楚幕后的过程是什么以及语法如何描述它。如果有人可以推荐任何关于这个主题的阅读材料，那就太好了。

谢谢你的帮助，如果问题有点抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:52:28.920

在阅读材料方面，从 O'Reilly[学习 SQL](http://shop.oreilly.com/product/9780596520847.do)是一个很好的起点。如果您更喜欢免费资源，那么[W3Schools SQL 教程](http://www.w3schools.com/sql/default.asp)很好地介绍了基础知识。我发现使用更完整的语法和显式连接可以更容易地理解正在发生的事情。因此，在您的示例中，类似于：

```
SELECT *
FROM locations AS loc
INNER JOIN items AS i
ON loc.l_id = i.item_loc
WHERE loc.l_id IN (value1,value2,...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:52:29.953

应该工作：

```
SELECT items.i_id, items.item_name, location.loc_name FROM items LEFT JOIN locations ON l_id =  items.item_loc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:59:25.620

由于 l_id 和 item_loc 是相同的属性，我们可以在两个表上执行内连接。

```
 select l.loc_name,i.item_name 
    from Items i inner join Locations l
    on i.item_loc=l.l_id 
```

基本上，它将通过映射公共属性值（此处为 item_loc 和 l_id）来组合两个表。我们得到另一个带有属性的表（i_id，item_name，item_loc，loc_name）。

# jquery - Jquery Mobiles，页面和图像链接

> ID：15968086
> 
> 赞同：0
> 
> 时间：2013-04-12T09:47:02.920
> 
> 标签：jquery, image, url, cordova, mobile

我正在开发一个应用程序，我刚刚开始使用 jQuery Mobile 进行开发。但现在我似乎陷入了一个（我认为）非常简单的问题。

我的结构如下所示：

```
index.html  
|  
pages  
|--login.html  
|--otherpage.html  
|  
images  
|  
|--logo.png 
```

问题是`logo.png`相对访问。我使用 和 中的`index.html`图像`login.html`。我想通过两个页面中的相同 URL 访问图像。

我已经尝试了一些东西，比如设置一个 <base> 标签。但似乎没有任何效果:(
有人可以帮我走上正轨吗！

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:15:37.750

您不能使用相同的 URL，因为您的 html 文件位于不同的文件夹中

在 index.html 中它将是

```
<img src="images/logo.png" /> 
```

在 login.html 中

```
<img src="../images/logo.png" /> 
```

# ajax - 通过 ajax 发布数据时是否需要服务器端验证？

> ID：15968090
> 
> 赞同：0
> 
> 时间：2013-04-12T09:47:11.577
> 
> 标签：ajax, jquery, jquery-validate, validation

在我的项目中，我通过 POSTING 到一个 php 文件来存储 FORM 数据。我在 buttonclick 上通过 ajax 发送数据，我正在做客户端验证，所以无论如何我不能在没有 javascript 的情况下进行数据库插入，那么我需要服务器端验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:48:26.413

绝对地。客户端运行的环境完全不在您的控制范围内，您应该认为它是敌对的并且可能受到威胁。

您的问题还包含错误的假设。你说，“当数据通过 ajax 发布时”。但是你怎么知道呢？当您看到一些数据通过 Internet 到达您的服务器时，您完全无法判断该数据来自什么软件。这就是*您希望*它发布的方式，但除非您控制网络上的每台机器，否则这就是您希望它发生的方式。显然，攻击者（甚至是实验者）不会尊重你的意愿。

# iphone - VoiceOver 忽略可见视图，并说出隐藏视图的可访问性标签

> ID：15968092
> 
> 赞同：1
> 
> 时间：2013-04-12T09:47:16.813
> 
> 标签：iphone, ios, accessibility, voiceover, uiaccessibility

我有 UIView，它可以包含两个视图之一。当我 removeFromSuperview 第一个视图和 addSubview 第二个视图时，我仍然可以听到隐藏视图的 accessibiliyLabel。只有在 1-2 秒内，我才能听到正确的 accessibiilityLabel。我看到，当视图的隐藏状态发生变化时，可访问性可能会受到挫折，但仍然会说出隐藏视图，并且不注意可见视图，这是很常见的情况。此外，如果在 UITableViewCell 中 UIButton 被隐藏，然后隐藏状态更改为 NO，VoiceOver 会忽略它，就像它仍然隐藏一样。只有手动实现单元的 UIAccessibilityContainer 协议才能解决上述问题

没有通知可以解决这个问题。即使玩accessibilityElementsHidden 也无济于事。这几天为此苦苦挣扎

请你能推荐一下有什么方法可以说视图层次结构改变的可访问性吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T22:19:36.127

我自己用第三方侧菜单库遇到了这个问题，不得不使用accessibilityElementsHidden 来修复它。我首先尝试利用accessibilityViewIsModal 属性，但这仅适用于兄弟视图。

```
#pragma mark - IIViewDeckControllerDelegate

- (void)viewDeckController:(IIViewDeckController *)viewDeckController didOpenViewSide:(IIViewDeckSide)viewDeckSide animated:(BOOL)animated
{
    if (viewDeckSide == IIViewDeckLeftSide) {
        [self.topViewController.view endEditing:YES];
        self.viewDeckController.leftController.view.accessibilityElementsHidden = NO;
    }
}

- (void)viewDeckController:(IIViewDeckController *)viewDeckController didCloseViewSide:(IIViewDeckSide)viewDeckSide animated:(BOOL)animated
{
    self.viewDeckController.leftController.view.accessibilityElementsHidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T00:14:03.163

您可以发布 UIAccessibilityScreenChangedNotification 或 UIAccessibilityLayoutChanged 以提醒 UIAccessibility 视图已更改。由于您没有发布任何代码，我只能给您一个通用示例，例如：

```
UIAccessibilityPostnotification(UIAccessibilityLayoutChanged,accessibilityelement) 
```

...其中“可访问性元素”将是 VoiceOver 下一个切换到的按钮或文本字段或其他可访问性元素。

参考：[UIKIt 参考](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html)

# coldfusion - Coldfusion 2 查询比较

> ID：15968093
> 
> 赞同：1
> 
> 时间：2013-04-12T09:47:19.860
> 
> 标签：coldfusion

我在 Coldfusion 中有 2 个 Query 对象现在我想根据这 2 个查询创建一个小报告

查询可能看起来像

```
Q1

ID CODE NAME ACTIVE 
```

和

```
Q2
CODE PRICE BOOKABLE 
```

代码`CODE` 字段是这两个查询之间的公共键。现在我想获取在 Q1 但不在 Q2 中的记录，反之亦然，在两个`CODE`唯一的查询中有多少重新编码是常见的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:40:39.197

```
 <cfquery name="Q1" datasource="test">
       select * from users where code not in (select code from system)
 </cfquery>
 <cfquery name="Q2" datasource="test">
          select * from system where code not in (select code from users)
  </cfquery> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:37:51.790

你可以使用 QoQ 来解决这个问题。

```
 <cfquery name="Q1" datasource="test">
            select * from table1
        </cfquery>

        <cfquery name="Q2" datasource="test">
            select * from table2
        </cfquery>

        <cfset q1code = valuelist(q2.code,"," )>
        <cfset q2code = valuelist(q1.code,"," )>

        <cfquery name="q3" dbtype="query" >
            select * from q1 where code Not in(#q1code#)
        </cfquery>

        <cfquery name="q4" dbtype="query" >
            select * from q2 where code Not in(#q2code#)
        </cfquery>

        <cfquery name="q5" dbtype="query" >
            select * from q1,q2 where q1.code = q2.code
        </cfquery> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:59:55.860

同意其他人，让数据库完成工作。如果这些在同一个数据库中，那么您这样做是为了获取两个表共有的记录：

```
SELECT Q1.ID
  ,Q1.CODE 
  ,Q1.NAME 
  ,Q1.ACTIVE
  ,Q2.PRICE 
  ,Q2.BOOKABLE
FROM Q1, Q2
WHERE Q1.CODE = Q2.CODE 
```

为了完成您问题的第一部分.. 获取 Q1 但不在 Q2 中的记录，如果我理解正确，您可以使用 outer_join 来做到这一点。所有数据库在进行外部连接时的语法都不同。我总是要去看它，所以我不打算在这里写它。

另一种选择是合并两个表，让冷融合拉出 column_name = '' 上的报告

```
select * from Q1 UNION SELECT * FROM Q2 
```

- 由于两个数据库中重复的“代码”列，您实际上不能这样做（选择 *）。您必须明确指定列并将第一个重命名为 Q1Code，然后是 Q2Code。

然后在 CF 你做

```
<cfif q2Code EQ ''> print Q1: #Q1CODE# <cfelse> print Q2: #Q2CODE#  </cfif> 
```

或者你可能想要：

```
<cfif q1code EQ Q2code> yay they match</cfif> 
```

# c# - 枚举前的“~”是什么意思

> ID：15968094
> 
> 赞同：5
> 
> 时间：2013-04-12T09:47:22.087
> 
> 标签：c#, syntax, enums

今天看到这段代码：

```
ViewBag.country = from p in CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures)
                              select new SelectListItem
                              {
                                  Text = p.EnglishName,
                                  Value = p.DisplayName
                              }; 
```

我无法理解。“~” - 这是一个错误？据我记得，“~”放在析构函数之前。但这是枚举。并且编译了这段代码！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T09:48:17.777

它是按位否定运算符。

[~ 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/d2bd4x66.aspx)

> `~`运算符对其操作数执行按位补码运算，这具有反转每个位的效果。`int`为、`uint`、`long`和预定义按位补码运算符`ulong`。

并且由于*枚举通常允许对整数类型进行操作，*因此您可以使用`~`上面列出的类型支持的枚举。

# javascript - 我可以不使用嵌入式 CSS on Android?</a></h1> <div class="ml12 aside-cta flex--item print:d-none sm:ml0 sm:mb12 sm:order-first sm:as-end"> <a href="https://stackoverflow.com/questions/ask" target="_blank" class="ws-nowrap s-btn s-btn__primary">问问题</a></div> </div> <div class="d-flex fw-wrap pb8 mb16 bb bc-black-075"> <div class="flex--item ws-nowrap mr16 mb8"> <span class="fc-light mr2"></span> </div> <div class="flex--item ws-nowrap mr16 mb8" title="2022-04-17 15:46:40Z"> <span class="fc-light mr2">问问题</span> <time itemprop="dateCreated" datetime="2013-04-12T09:47:23.490">2013-04-12T09:47:23.490</time> </div> <div class="flex--item ws-nowrap mb8" title="Viewed 6 times"> <span class="fc-light mr2"></span> 1136 次 </div> </div> <div id="mainbar" role="main" aria-label="question and answers"> <div class="question" data-questionid="4" data-position-on-page="0" data-score="763" id="question"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="4"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-peeufs8c"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button> <div id="--stacks-s-tooltip-peeufs8c" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question shows research effort; it is useful and clear<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value=""> 0 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-04106eqn"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button><div id="--stacks-s-tooltip-04106eqn" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question does not show any research effort; it is unclear or not useful<div class="s-popover--arrow"></div></div> <div id="--stacks-s-tooltip-tgvwendx" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Bookmark this question.<div class="s-popover--arrow"></div></div> <a class="js-post-issue flex--item s-btn s-btn__unset c-pointer py6 mx-auto" data-shortcut="T" data-ks-title="timeline" data-controller="s-tooltip" data-s-tooltip-placement="right" aria-label="Timeline" aria-describedby="--stacks-s-tooltip-abwmy15k"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path></svg></a><div id="--stacks-s-tooltip-abwmy15k" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Show activity on this post.<div class="s-popover--arrow"></div></div> </div> </div> <div class="postcell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>I'm debugging a site on an Android HTC Sense. The site uses a lot of inserted content, which comes along with it's own CSS and JS like:</p>&#xA;&#xA;<pre><code>// wrapper id = snippet_id&#xA;&lt;html&gt;&#xA;&lt;head&gt;&#xA;&lt;style type="text/css"&gt;&#xA; #snippet_id div {border: 1px solid red !important;}&#xA; div {border: 1px solid blue !important;}&#xA;&lt;/style&gt;&#xA;&lt;/head&gt;&#xA;&lt;body&gt;&#xA; &lt;div&gt;Hello World&lt;/div&gt;&#xA;&lt;/body&gt;&#xA;&lt;html&gt;&#xA;</code></pre>&#xA;&#xA;<p>This is inserted into an existing page, so it sort these snippets are sort of like iFrames I guess.</p>&#xA;&#xA;<p><strong>Question:</strong><br>&#xA;Problem is, that while Javascript works fine, all CSS I'm specifying using <code>&lt;style&gt;</code> tags is being ignored. Any idea why?</p>&#xA;&#xA;<p><strong>EDIT:</strong><br>&#xA;Works on:&#xA;- Android 4.0.1&#xA;Does not work on:&#xA;- Android 2.3.1&#xA;- IOS 4.1</p>&#xA;&#xA;<p>If I add the CSS to the main.css file being requested when the page loads, all is ok. If it's inside my gadget, it's not working.</p>&#xA;&#xA;<p><strong>EDIT</strong>:<br>&#xA;So from what I can see, <code>&lt;style&gt;</code> does not seem to work on classes and id. If I use regular HTML elements as selectors it works. </p>&#xA;&#xA;<p><strong>EDIT</strong>: &#xA;My dev-site is <a href="http://www.franckreich.de/members/export/z/p/index.html" rel="nofollow">here</a>. I'm using a plugin called <a href="http://www.renderjs.org/" rel="nofollow">renderJs</a>, which encapsultes HTML snippets (along with their CSS and JS) into resuable gadgets. Gadgets content will be appended to the page body, so although a gadget can act as a standalone HTML page, it can also be part of a page.</p>&#xA;&#xA;<p>Example code from my page (I stripped out all gadgets but one below):</p>&#xA;&#xA;<p><a href="http://www.franckreich.de/members/export/z/p/index.html" rel="nofollow">index.html</a> - include <code>index_wrapper</code> gadget</p>&#xA;&#xA;<pre><code>&lt;!DOCTYPE html&gt; &#xA;&lt;html itemscope itemtype="http://schema.org/Organization" lang="en" class="render"&gt; &#xA;&lt;head&gt;&#xA; &lt;meta charset="utf-8"&gt; &#xA; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; &#xA; &lt;link rel="stylesheet" href="../css/overrides.css"&gt;&#xA; &lt;script data-main="../js/main.js" type="text/javascript" src="../js/libs/require/require.js"&gt;&lt;/script&gt;&#xA; &lt;title&gt;&lt;/title&gt;&#xA;&lt;/head&gt;&#xA;&lt;body class="splash"&gt;&#xA; &lt;div data-role="page" id="index"&gt;&#xA; &lt;div id="index_wrapper" data-gadget="../gadgets/index_wrapper.html"&gt;&lt;/div&gt;&#xA; &lt;/div&gt;&#xA;&lt;/body&gt;&#xA;&lt;/html&gt;&#xA;</code></pre>&#xA;&#xA;<p>The page has a gadget called <code>index_wrapper</code> <a href="http://www.franckreich.de/members/export/z/gadgets/index_wrapper.html" rel="nofollow">link</a> - code below:</p>&#xA;&#xA;<pre><code>&lt;!DOCTYPE html&gt; &#xA;&lt;head&gt;&lt;/head&gt;&#xA;&lt;body&gt;&#xA; &lt;div id="index_social" data-gadget="../gadgets/social.html"&gt;&lt;/div&gt;&#xA; &lt;p class="mini t" data-i18n="gen.disclaimer"&gt;&lt;/p&gt;&#xA;&lt;/body&gt;&#xA;&lt;/html&gt;&#xA;</code></pre>&#xA;&#xA;<p>Which has another gadget called <code>social</code> <a href="http://www.franckreich.de/members/export/z/gadgets/social.html" rel="nofollow">here</a>. This gadget includes some CSS, but on the devices in question, it is ignored (just saw, I'm missing a <code>&lt;/div&gt;</code> in the index_wrapper, so trying to see if that fixed the problem, too).</p>&#xA;&#xA;<p>The code below includes my fix:</p>&#xA;&#xA;<pre><code>&lt;!DOCTYPE html&gt; &#xA;&lt;head&gt;&#xA; &lt;style type="text/css" scoped&gt;&#xA; // will be ignroed&#xA; .el {width: 1px;}&#xA; .menu_social {text-align: center; margin: 1em 0;}&#xA; .action_menu {display: inline-block;}&#xA; .follow_us {display: inline-block; margin: 0; padding: 0 .5em 0 0;}&#xA; ...&#xA; &lt;/head&gt;&#xA; &lt;body&gt;&#xA; &lt;div class="menu_social"&gt;&#xA; &lt;div&gt;&#xA; &lt;span class="el ui-hidden-accessible"&gt;&lt;/span&gt;&lt;!-- fallback for CSS not working --&gt;&#xA; &lt;div data-role="controlgroup" data-type="horizontal" data-theme="c" class="action_menu"&gt;&#xA; &lt;a href="https://twitter.com/nexedi" data-ajax="false" id="follow_twitter" data-role="button" data-icon="tw" data-theme="c" class="t ui-icon-vendor twitter scale-a" data-i18n-target=".ui-btn-text" data-i18n="[title]soc.tw_fw;[html]soc.tw"&gt;&lt;/a&gt;&#xA; &lt;a href="http://www.facebook.com/pages/Nexedi/168462169880320" data-ajax="false" id="follow_facebook" data-role="button" data-icon="fb" data-theme="c" class="t ui-icon-vendor facebook scale-a" data-i18n-target=".ui-btn-text" data-i18n="[title]soc.fb_fw;[html]soc.fb"&gt;&lt;/a&gt;&#xA; &lt;/div&gt;&#xA; &lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&#xA;&lt;script type="text/javascript"&gt;&#xA; //&lt;![CDATA[&#xA; (function () {&#xA; $(document).ready(function() {&#xA; var gadget = RenderJs.getSelfGadget();&#xA;&#xA; // fallback for old devices which cannot load &lt;style&gt; css&#xA; if (gadget.dom.find(".el").css('width') !== "1px") {&#xA; require(['text!../css/social.css'], function (t) {&#xA; var x = '&lt;style&gt;'+t+'&lt;/style&gt;';&#xA; gadget.dom.append(x);&#xA; });&#xA; }&#xA;&#xA; // trigger enhancement&#xA; $(this).trigger("render_enhance", {gadget: gadget.dom});&#xA; });&#xA; })();&#xA; //]]&gt;&#xA; &lt;/script&gt;&#xA;&#xA; &lt;/body&gt;&#xA;&lt;/html&gt;&#xA;</code></pre>&#xA;&#xA;<p>So aside from probably missing a closing <code>&lt;/div&gt;</code> I'm still wondering why my embedded CSS is not working.</p>&#xA; </div> <div class="mt24 mb12"> <div class="post-taglist d-flex gs4 gsy fd-column"> <div class="d-flex ps-relative fw-wrap"> <a href="/tags/javascript" class="post-tag js-gps-track" title="show questions tagged 'javascript'" rel="tag">javascript</a><a href="/tags/android" class="post-tag js-gps-track" title="show questions tagged 'android'" rel="tag">android</a><a href="/tags/jquery" class="post-tag js-gps-track" title="show questions tagged 'jquery'" rel="tag">jquery</a><a href="/tags/css" class="post-tag js-gps-track" title="show questions tagged 'css'" rel="tag">css</a><a href="/tags/web-applications" class="post-tag js-gps-track" title="show questions tagged 'web-applications'" rel="tag">web-applications</a> </div> </div> </div> </div> <span class="d-none" itemprop="commentCount">4</span> </div> </div> <div class="js-zone-container zone-container-responsive"> <div id="dfp-isb" class="everyonelovesstackoverflow everyoneloves__inline-sidebar mx-auto" style="min-height: auto; height: auto; display: none;"></div> <div class="js-report-ad-button-container mx-auto" style="width: 300px"></div> </div> <div id="answers"> <a name="tab-top"></a> <div id="answers-header"> <div class="answers-subheader d-flex ai-center mb8"> <div class="flex--item fl1"> <h2 class="mb0" data-answercount=""> 2 回答 <span style="display:none;" itemprop="answerCount">2</span> </h2> </div> </div> </div> <a name="7"></a> <div id="answer-7" class="answer js-answer accepted-answer" data-answerid="7" data-parentid="4" data-score="506" data-position-on-page="1" data-highest-scored="1" data-question-has-accepted-highest-score="1" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="7"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-dgvag2l3"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button><div id="--stacks-s-tooltip-dgvag2l3" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This answer is useful<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value="2"> 2 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-gn8ppsfv"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button> </div> </div> <div class="answercell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>查看演示页面生成的 HTML 代码（即，由 JavaScript 修改的代码）表明<code>style</code>元素是在内部生成的<code>body</code>。尽管 HTML5 草案在<code>scoped</code>属性存在时允许此类元素，但对该属性的支持似乎不存在，并且样式表是全局应用的。然而，有些浏览器可能根本不应用它，至少在<code>style</code>动态生成元素时是这样。</p> <p>更好的方法是使所有样式表对文档都是全局的，最好是作为外部样式表，并使用上下文选择器将规则限制为仅限于某些元素。并且可能使用 JavaScript 来更改元素的类别，而不是直接操作样式表。</p> </div> <div class="mt24"> <div class="user-action-time" style="color:#999;text-align:right;">于 2013-04-13T11:17:17.463 回答</div> </div> </div> </div> </div><a name="7"></a> <div id="answer-7" class="answer js-answer accepted-answer" data-answerid="7" data-parentid="4" data-score="506" data-position-on-page="1" data-highest-scored="1" data-question-has-accepted-highest-score="1" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="7"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-dgvag2l3"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button><div id="--stacks-s-tooltip-dgvag2l3" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This answer is useful<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value="0"> 0 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-gn8ppsfv"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button> </div> </div> <div class="answercell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>好的。丑陋的解决方法：</p> <p>在 inline 部分中，设置：</p> <pre><code>&lt;style&gt; .el {width: 1px;} &lt;/style&gt; </code></pre> <p>在页面中，设置隐藏元素，<code>el</code>如下所示：</p> <pre><code>// ui-hidden-accessible is a JQM class, moving the item out of view // since it uses pos:absolute, &amp;nbsp; is needed to not break // selects on the page (compare to JQM ui-icon) &lt;span class="el ui-hidden-accessible"&gt;&amp;nbsp;&lt;/span&gt; </code></pre> <p>然后在运行内联 Javascript（有效）时检查宽度，并在宽度不在时要求内联 CSS 作为单独的文件<code>1px</code></p> <pre><code>// fallback for old devices which cannot load &lt;style&gt; css // gadget is my iframe-look-a-like if (gadget.dom.find(".el").css('width') !== "1px") { require(['text!../css/translate.css'], function (t) { var x = '&lt;style&gt;'+t+'&lt;/style&gt;'; gadget.dom.append(x); }); } </code></pre> <p>丑陋和额外的 HTTP 请求，但至少 CSS 可以正常工作。</p> </div> <div class="mt24"> <div class="user-action-time" style="color:#999;text-align:right;">于 2013-04-12T13:17:46.127 回答</div> </div> </div> </div> </div></div> </div> <div id="sidebar" class="show-votes" role="complementary" aria-label="sidebar"> <div class="module sidebar-related"> <h4 id="h-related">Related</h4> <div class="related js-gps-related-questions" data-tracker="rq=1"> <div class="spacer"> <a href="/questions/18004307" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/18004307" class="question-hyperlink">c# - 格式化网格的 linq 查询输出</a> </div><div class="spacer"> <a href="/questions/18004312" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/18004312" class="question-hyperlink">javascript - 带有左侧边距的滑动框检查是否过度滑动</a> </div><div class="spacer"> <a href="/questions/18004314" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004314" class="question-hyperlink">ms-access - MS Access 限制表/表单访问</a> </div><div class="spacer"> <a href="/questions/18004319" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004319" class="question-hyperlink">java - 尝试使用方法重命名录制的文件</a> </div><div class="spacer"> <a href="/questions/18004321" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">3</div> </a> <a href="/questions/18004321" class="question-hyperlink">c# - 正则表达式出错 - 哪些字符需要转义？</a> </div><div class="spacer"> <a href="/questions/18004322" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004322" class="question-hyperlink">ruby-on-rails - 在 AJAX 请求期间使用 js 禁用所有 best_in_place 字段</a> </div><div class="spacer"> <a href="/questions/18004323" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">0</div> </a> <a href="/questions/18004323" class="question-hyperlink">web-services - 未找到操作的端点参考 (EPR)</a> </div><div class="spacer"> <a href="/questions/18004326" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004326" class="question-hyperlink">ruby - 如何在不运行每个测试的情况下快速计算大型黄瓜套件中的场景和步骤数量？</a> </div><div class="spacer"> <a href="/questions/18004327" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004327" class="question-hyperlink">rest - 没有 keypath 的数组的 Restkit 映射</a> </div><div class="spacer"> <a href="/questions/18004328" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/18004328" class="question-hyperlink">java - Java 代码 Char 和 Int</a> </div> </div> </div> <div class="module js-gps-related-tags" id="related-tags"> <h4 id="h-related-tags">Reference</h4> <div data-name="javascript"> <a href="https://php.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">php</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1429865</span> </span> </div> <div data-name="javascript"> <a href="https://c-cpp.com" class="post-tag no-tag-menu js-gps-track" target="_blank">c/c++</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">756500</span> </span> </div> <div data-name="javascript"> <a href="https://nginx.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">nginx</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49975</span> </span> </div> <div data-name="javascript"> <a href="https://mongodb.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mongodb</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">159057</span> </span> </div> <div data-name="javascript"> <a href="https://mybatis.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mybatis</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">3233</span> </span> </div> <div data-name="javascript"> <a href="https://anaconda.org.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">anaconda</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">13410</span> </span> </div> <div data-name="javascript"> <a href="https://pycharm.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">pycharm</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">14671</span> </span> </div> <div data-name="javascript"> <a href="https://python.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">python</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1902243</span> </span> </div> <div data-name="javascript"> <a href="https://vscode.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">vscode</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">56040</span> </span> </div> <div data-name="javascript"> <a href="https://dockerdocs.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">docker</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">110988</span> </span> </div> <div data-name="javascript"> <a href="https://github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">github</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49000</span> </span> </div> <div data-name="javascript"> <a href="https://flask.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">flask</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49129</span> </span> </div> <div data-name="javascript"> <a href="https://ffmpeg.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">ffmpeg</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">24037</span> </span> </div> <div data-name="javascript"> <a href="https://jmeter.net" class="post-tag no-tag-menu js-gps-track" target="_blank">jmeter</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">16910</span> </span> </div> <div data-name="javascript"> <a href="https://matplotlib.net" class="post-tag no-tag-menu js-gps-track" target="_blank">matplotlib</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">63493</span> </span> </div> <div data-name="javascript"> <a href="https://getbootstrap.net" class="post-tag no-tag-menu js-gps-track" target="_blank">bootstrap</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">54641</span> </span> </div> </div> </div> </div> </div> </div> </div> <footer id="footer" class="site-footer js-footer" role="contentinfo"> <div class="site-footer--container"> <div class="site-footer--logo"> <a href="https://stackoverflow.com"><svg aria-hidden="true" class="native svg-icon iconLogoGlyphMd" width="32" height="37" viewBox="0 0 32 37"><path d="M26 33v-9h4v13H0V24h4v9h22Z" fill="#BCBBBB"/><path d="m21.5 0-2.7 2 9.9 13.3 2.7-2L21.5 0ZM26 18.4 13.3 7.8l2.1-2.5 12.7 10.6-2.1 2.5ZM9.1 15.2l15 7 1.4-3-15-7-1.4 3Zm14 10.79.68-2.95-16.1-3.35L7 23l16.1 2.99ZM23 30H7v-3h16v3Z" fill="#F48024"/></svg></a> </div> <nav class="site-footer--nav"> <div class="site-footer--col"> <h5 class="-title"><a href="https://stackoverflow.org.cn" class="js-gps-track" data-gps-track="footer.click({ location: 3, link: 15})">Stack Overflow 中文网</a></h5> <p>遵从 CC BY-SA 知识共享许可协议。</p> </div> </nav> </div> </footer> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?709ff2ad9744e86b5b0eee677fc13ede"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MW5BV8G8E"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-1MW5BV8G8E'); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6117966252207595" crossorigin="anonymous"></script> </body> </html>

> ID：15968096
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# asp.net-mvc-3 - Elmah 不发送电子邮件

> ID：15968099
> 
> 赞同：5
> 
> 时间：2013-04-12T09:47:28.150
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, elmah

我在我的 Mvc4 应用程序中实现了 Elmah。我的 web.config 如下：-

```
<configuration>
  <configSections>
      <sectionGroup name="elmah">
          <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
          <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
          <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
          <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
      </sectionGroup>        
  </configSections>

    <elmah>
        <security allowRemoteAccess="1" />
        <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data"/>
        <errorMail from="test@test.in" to="test1@test.in" subject="Elmah Report" async="true" smtpServer="mail.test.in" />            
    </elmah>

  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-Mvcjquery-20130225111502;Integrated Security=SSPI" />
  </connectionStrings>   

    <system.web>
      <httpHandlers>
          <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />         
      </httpHandlers>

      <httpModules>
          <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
          <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah"/>

     </httpModules>        
  </system.web>

  <system.webServer>
      <validation validateIntegratedModeConfiguration="false"/>
      <modules>
          <add name="Elmah.ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
          <add name="Elmah.ErrorMail" type="Elmah.ErrorMailModule" preCondition="managedHandler" />
      </modules>

      <handlers>
          <add name="Elmah" path="elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />         
      </handlers>
  </system.webServer>    

</configuration> 
```

我添加了通过 elmah 发送电子邮件的代码。我可以通过输入 url localhost://elmah.axd 来查看错误。但是我没有收到邮件。请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:05:15.670

尝试`async="false"`：

```
<errorMail 
    from="join@assert.in" 
    to="twinkle@assert.in" 
    subject="Elmah Report" 
    async="false" 
    smtpServer="mail.assert.in" /> 
```

# ios - UIView 动画警告

> ID：15968100
> 
> 赞同：8
> 
> 时间：2013-04-12T09:47:32.943
> 
> 标签：ios, objective-c, uiview, uiviewanimation, uiviewanimation-curve

我正在使用以下代码

```
[UIView animateWithDuration:1.0
                      delay:0.05
                    options:UIViewAnimationCurveEaseIn
                 animations:^{

                                  //Code

                 } completion:^(BOOL finished) {}]; 
```

我收到以下警告

```
Implicit conversion from enumeration type 'enum UIViewAnimationCurve' to different enumeration type 'UIViewAnimationOptions' (aka 'enum UIViewAnimationOptions') 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T09:50:06.040

你应该`UIViewAnimationOptionCurveEaseIn`改用。

`UIViewAnimationCurveEaseIn`是其他方法中使用的不同枚举的一部分。

# c++ - 添加对共享 ptr 的引用是否会增加引用计数

> ID：15968104
> 
> 赞同：6
> 
> 时间：2013-04-12T09:47:38.963
> 
> 标签：c++, shared-ptr

假设我有这样的方法

```
void foo(const boost::shared_ptr<Pfoo>& rx)
{
   myvector->push_back(rx);
} 
```

我读到当 boost::shared_ptr 作为引用传递时，它的引用计数不会增加。现在如果实际 ptr 超出范围会发生什么情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:49:19.627

当通过引用传递指针时 - 没有复制发生，没有引用计数器递增。

```
myvector->push_back(rx); 
```

在这里， in vector 将推送`rx`, not的副本`rx`，因此，引用计数器将递增。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T09:50:03.770

当您通过引用传递时，您传递相同的指针 - 不会发生副本。所以生命周期`rx`是绑定到原始对象的生命周期的。当你这样做时，`push_back`容器会复制`rx`并增加引用计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:58:25.437

这是正确的。如果您传递对共享指针的引用，则该函数仅获得对调用者（共享）引用的（常规 C++）引用。它没有自己的（共享的）参考。如果调用者的（共享）引用被破坏，代码将失败。

这发生在我身上一次，并导致了一个难以追踪的严重错误并产生了实际后果。所以不要传递对对象的引用，除非你确定函数所做的任何事情都不会破坏被引用的对象！

`push_back`创建对该对象的新引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:51:27.743

不，下面的代码只是将智能指针传递给函数，不会增加它的引用计数：

```
void foo(const boost::shared_ptr<Pfoo>& rx) 
```

此外，推`rx`入向量将增加引用计数：

```
myvector->push_back(rx); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T09:51:53.773

smart_ptr 作为参考传递，因此它不会在那时增加参考计数。在插入对象的矢量副本的情况下。所以引用会增加。

```
myvector->push_back(rx); //Copy of object is passed. 
```

# wpf - WPF数据网格验证不一致

> ID：15968106
> 
> 赞同：3
> 
> 时间：2013-04-12T09:47:43.320
> 
> 标签：wpf, binding, wpfdatagrid

我有一个 DataGrid，我将它绑定到“客户”类的 ObservableCollection，实现 IDataErrorInfo。Customer 类的属性之一是`int`，在我的 IDataErrorInfo 实现中，我检查它是否在有效范围内，例如：-

```
public class Customer : IDataErrorInfo
{
    public int PercentDiscount { get; set; }

    ... other properties & methods removed for clarity

    public string this[columnName]
    {
        get
        {
            if (PercentDiscount < 0 || PercentDiscount > 10)
                return "Percent Discount is invalid";
        }
    }
} 
```

在我的 XAML 代码隐藏中，我处理了几个事件。如果`PreparingCellForEdit`我存储对正在编辑的行的引用：-

```
private void DataGrid_PreparingCellForEdit(object sender, DataGridPreparingCellForEditEventArgs e)
{
    _rowBeingEdited = e.Row;
} 
```

然后在这种情况`RowEditEnding`下，如果该行处于无效状态，我会采取一些措施（在我的情况下，我将 Customer 属性恢复为之前的“好”值）：-

```
private void DataGrid_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
{
    if (_rowBeingEdited != null)
    {
        var errors = Validation.GetErrors(_rowBeingEdited);
        if (errors.Count > 0)
        {
            .. do something
        }
    }
} 
```

如果用户输入的数字值未通过我的验证规则，则此方法可以正常工作，但如果用户输入非数字值，则该`RowEditEnding`事件永远不会触发并且单元格保持在编辑状态。我认为这是因为 WPF 无法将非数字值绑定到`int`属性。发生这种情况时，有什么方法可以检测/处理吗？

最后的手段是将`PercentDiscount`属性更改为字符串，但我试图避免沿着这条路线走。

**编辑**- 我刚刚发现我可以使用`CellEditEnding`事件而不是`RowEditEnding`. 但是出现了一个新问题 - 如果我在单元格中输入无效值然后按*Enter*，则基础属性不会更新，因此当 CellEditEnding 触发时`Validation.GetErrors`为空。最终结果是该行离开编辑模式，但仍然在带有红色边框的单元格中显示无效值。知道现在发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:51:14.510

这可能不是一个很好的答案，尤其是因为您已经提到过它，但是我已经与 DataGrid 验证进行了一段时间的斗争，最终使我的支持值成为字符串。您会在调试器的输出窗口中注意到，当您在绑定到 int 的 DataGridColumn 中键入字母字符时会发生绑定或转换异常。

您可以通过更改 UpdateSourceTrigger 或通过在绑定和属性之间放置一个转换器来获得不同的行为，但在我使用字符串支持这些值之前，我从来没有完全得到我需要的东西。

我想您也可以尝试创建自己的从 DataGridTextColumn 派生的 DataGridNumericColumn，也许您可​​以更好地控制绑定/验证行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T05:47:43.380

我努力为此找到一个好的解决方案，但我看到其他一些人弄乱了[CellEditEnding](https://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.celleditending(v=vs.110).aspx)事件，最后我想出了这段代码来在转换失败时恢复值：

```
private void CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
{
    if (e.EditingElement is TextBox)
    {
        var cellTextBox = (TextBox)e.EditingElement;
        var cellTextBoxBinding = cellTextBox.GetBindingExpression(TextBox.TextProperty);
        if (cellTextBoxBinding != null && !cellTextBoxBinding.ValidateWithoutUpdate())
        {
            cellTextBoxBinding.UpdateTarget();
        }
    }
} 
```

如果值转换失败，则在编辑元素绑定上调用[ValidateWithoutUpdate会返回 false，然后调用](https://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpressionbase.validatewithoutupdate(v=vs.110).aspx)[UpdateTarget 会](https://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpression.updatetarget(v=vs.110).aspx)强制将值恢复为当前的“模型”值。

# windows-phone-7 - Windows Phone Emulator issue

> ID：15968108
> 
> 赞同：6
> 
> 时间：2013-04-12T09:47:46.037
> 
> 标签：windows-phone-7, windows-8, windows-phone-7.1, windows-phone, windows-phone-7.1.1

I'm developing a windows phone application on Visual Studio 2010, Windows 8 x86\. I've setup Visual Studio to Run as an administrator. Every time I try to run the windows phone 7 application, i have also updated sdk 7.1.1 but it still gives me this error:

Windows Phone: Deployment of application to device failed. Exception from HRESULT: 0x89721800

is there any solution regarding this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:02:52.450

Start from [here](https://dev.windowsphone.com/en-us)! And you understand all.

for [wp7.1](http://www.microsoft.com/en-us/download/details.aspx?id=27570)

```
System requirements
Supported operating systems: Windows 7, Windows Vista

Windows® Vista® (x86 and x64) with Service Pack 2 – all editions except Starter Edition
Windows 7 (x86 and x64) – all editions except Starter Edition
Installation requires 4 GB of free disk space on the system drive.
3 GB RAM
Windows Phone Emulator requires a DirectX 10 or above capable graphics card with a WDDM 1.1 driver

The Windows Phone SDK 7.1 is compatible with the final version of Visual Studio 2010 SP1\. 
```

for [wp8](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

```
System requirements
Supported operating systems: Windows 8, Windows 8 Pro

Operating system type:
Windows 8 64-bit (x64) client versions
Hardware:
6.5 GB of free hard disk space
4 GB RAM
64-bit (x64) CPU
Windows Phone 8 Emulator:
Windows 8 Pro edition or greater
Requires a processor that supports Second Level Address Translation (SLAT)
If your computer meets the hardware and operating system requirements, but does not meet the requirements for the Windows Phone 8 Emulator, the Windows Phone SDK 8.0 will install and run. However, the Windows Phone 8 Emulator will not function and you will not be able to deploy or test apps on the Windows Phone 8 Emulator. 
```

Basically, you need Win 8 64x or Win7\.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:49:52.220

Visual Studio 数据存储已损坏。

尝试：

1.  关闭所有可能当前正在运行的 Visual Studio 实例。
2.  删除文件夹“%LOCALAPPDATA%\Microsoft\Phone Tools\CoreCon\10.0”</li>
3.  启动 Visual Studio 的新实例

参考链接中的更多解决方法。

参考：[MSDN](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/796ea925-c1bf-4fb3-bc67-4967823b51eb)

# asp.net-mvc-3 - web.config 在 MVC3 和 MVC4 中是不同的

> ID：15968111
> 
> 赞同：2
> 
> 时间：2013-04-12T09:47:49.397
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, web-config

我在 C# 和 ASP.NET MVC4 中做一个 Web 应用程序。在检查 web.config 文件时，我注意到 MVC4 有这个：

```
<system.web>
<compilation debug="true" targetFramework="4.0" /> 
```

而如果您查看 MVC3 web.config 文件，您将看到以下内容：

```
<system.web>
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation> 
```

所以，我的问题是为什么程序集不在 MVC4 web.config 中？还是他们在别处？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:40:33.043

如果您滚动一下，您会看到两个 web.config 都在其中添加了命名空间，我想可以。

```
<pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:34:44.940

现在大部分都是“卷起”的命名空间，这是您现在通常会看到的。如果您需要在程序集中添加，您可以自由地这样做。

[http://www.asp.net/whitepapers/mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes)

你应该仍然可以这样做：

```
<compilation debug="true" targetFramework="4.5">
  <assemblies>
    <add assembly="System.Data.Entity, Version=5.0.0.0, Culture=neutral,  PublicKeyToken=b77a5c561934e089" />
  </assemblies>
</compilation> 
```

# vb.net - 将控件名称解析为变量名称

> ID：15968123
> 
> 赞同：0
> 
> 时间：2013-04-12T09:48:24.050
> 
> 标签：vb.net, visual-studio, variables, dynamic-variables

我有一个名为“ **Cheat_Enabled** ”的变量：

```
 Dim Cheat_Enabled As Boolean 
```

还有一个名为“ **CheckBox_Cheat ”的复选框，带有“** **Cheat** ”标签

现在我想做一个动态方法，通过拆分（或其他）控件的名称来更改 var 的值。

例如，像这样的东西（代码显然不起作用）：

```
Private Sub CheckBoxes_CheckedChanged(sender As Object, e As EventArgs) Handles _
    CheckBox_Cheat.CheckedChanged

    Dim SenderVarEquivalent As Object = _
    Me.variables.Find(sender.Tag & "_Enabled")(0)

    If sender.Checked Then SenderVarEquivalent = True _
    Else SenderVarEquivalent = False

End Sub

    ' Info:
    ' Sender.Tag = "Cheat"
    ' Sender.Name = "CheckBox_Cheat"
    ' VariableName = "Cheat_Enabled" 
```

我认为这可以通过一个 CType 或 DirectCast 或 GetObject 来完成，但我不知道该怎么做。

> 更新：

这是一个类似的简单代码，但不是将 ControlName 转换为 VariableName，而是将控制标记转换为 Checkbox 的 ControlName 对象：

```
Public Class Form1

    Dim Cheat_Enabled As Boolean = True

    Private Sub CheckBox_Cheat_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox_Cheat.CheckedChanged
        CType(Controls("CheckBox" & "_" & sender.tag), CheckBox).Checked = Cheat_Enabled
    End Sub

End Class 
```

我希望如果我可以对 CType 控件名称执行相同的操作以捕获变量名称并使用它，例如像这样：

```
 Dim Cheat_Enabled As Boolean

Private Sub CheckBox_Cheat_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox_Cheat.CheckedChanged

    ' Sender.name is  : "CheckBox_Cheat"
    ' Sender.tag is   : "Cheat"
    ' Variable name is: "Cheat_Enabled"

    If sender.checked Then
         CType(Variable(sender.tag & "_Enabled"), Boolean) = True
    Else
         CType(Variable(sender.tag & "_Enabled"), Boolean) = False
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:24:46.927

在[MSDN](http://msdn.microsoft.com/de-de/library/system.type.findmembers.aspx)中，您可以找到一个 VB.Net 示例如何枚举给定类的所有成员：

```
Imports System
Imports System.Reflection
Imports Microsoft.VisualBasic

Class MyFindMembersClass

    Public Shared Sub Main()
        Dim objTest As New Object()
        Dim objType As Type = objTest.GetType()
        Dim arrayMemberInfo() As MemberInfo
        Try
            'Find all static or public methods in the Object 
            'class that match the specified name.
            arrayMemberInfo = objType.FindMembers(MemberTypes.Method, _
                              BindingFlags.Public Or BindingFlags.Static _
                              Or BindingFlags.Instance, _
                              New MemberFilter(AddressOf DelegateToSearchCriteria), _
                              "ReferenceEquals")

            Dim index As Integer
            For index = 0 To arrayMemberInfo.Length - 1
                Console.WriteLine("Result of FindMembers -" + ControlChars.Tab + _
                               arrayMemberInfo(index).ToString() + ControlChars.Cr)
            Next index
        Catch e As Exception
            Console.WriteLine("Exception : " + e.ToString())
        End Try
    End Sub 'Main

    Public Shared Function DelegateToSearchCriteria _
                            (ByVal objMemberInfo As MemberInfo, _
                             ByVal objSearch As Object) As Boolean
        ' Compare the name of the member function with the filter criteria.
        If objMemberInfo.Name.ToString() = objSearch.ToString() Then
            Return True
        Else
            Return False
        End If
    End Function 'DelegateToSearchCriteria 
End Class 'MyFindMembersClass 
```

另一种选择是将所有布尔变量放入一个`Dictionary`对象中。这将允许您“按名称”访问布尔值而不使用`Reflection`.

举例说明：

```
Imports System.Collections.Generic

Module vbModule

Class Example

    Private _dictionary

    Public Sub New()
        ' Allocate and populate the field Dictionary.
        Me._dictionary = New Dictionary(Of String, Boolean)
        Me._dictionary.Add("v1", False)
        Me._dictionary.Add("v2", True)
    End Sub

    Public Function GetValue(name as String) As Boolean
        ' Return value from private Dictionary.
        Return Me._dictionary.Item(name)
    End Function

    Public Sub SetValue(name as String, val as Boolean)
        Me._dictionary.Item(name) = val
    End Sub

End Class

Sub Main()
    ' Allocate an instance of the class.
    Dim example As New Example

    ' Write a value from the class.
    Console.WriteLine(example.GetValue("v1"))
    Console.WriteLine(example.GetValue("v2"))
    example.SetValue("v1", true)
    Console.WriteLine(example.GetValue("v1"))
End Sub
End Module 
```

# asp.net - 在 nop Commerce Terilik 网格中传递控制器中的选定行

> ID：15968127
> 
> 赞同：0
> 
> 时间：2013-04-12T09:48:33.750
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, nopcommerce

我是使用 nopCommerce 2.30 (MVC 3 Razor) 和 Telerik().Grid 的初学者。我目前正在工作

在 Nop.Admin 项目上。我尝试在我的表单中创建一个 Html.Telerik().Grid，具有许多功能。

请看下面我的网格图。

![在此处输入图像描述](https://i.stack.imgur.com/vgB2Y.png)

这些是特征。

1.  网格数据应过滤下拉列表的选定值。

2.  所有网格列都启用排序。

3.  在第一列标题中包含一个复选框，用于多选。

4.  网格视图必须启用列上下文菜单。

请在下面查看我的代码。

我的 .cshtml 文件

```
 <td>
        @(Html.Telerik().Grid<NotificationMailReminderModel>()
                    .Name("productvariants-grid")

                    .DataKeys(keys =>
                    {
                        keys.Add(pv => pv.Username);
                    })
                    .DataBinding(dataBinding =>
                        dataBinding.Ajax()
                                .Select("EmailReminderByEvent", "Customer")
                    )
                    .Columns(columns =>
                    {
                        columns.Bound(pv => pv.IsSelected)
                        .ClientTemplate("<input type='checkbox'  name='Id' value='<#= Id #>' />")
                        .HeaderTemplate(@<text><input type="checkbox" title="check all records" id="checkAllRecords" /></text>)
                        .Width(50)

                        .HeaderHtmlAttributes(new { style = "text-align:center" })
                        .HtmlAttributes(new { style = "text-align:center" });
                        columns.Bound(pv => pv.Username).ReadOnly().Width(250);
                        columns.Bound(pv => pv.Firstname).ReadOnly();
                        columns.Bound(pv => pv.Lastname).ReadOnly();
                    })
                            .ClientEvents(events => events.OnDataBinding("Grid_onDataBinding").OnError("Grid_onError").OnSubmitChanges("Grid_onSubmitChanges")
                            .OnRowDataBound("onRowDataBound"))
                    .Editable(editing => editing.Mode(GridEditMode.InCell))
                    .Pageable(settings => settings.PageSize(2).Position(GridPagerPosition.Both))
                    .Sortable(sorting => sorting.Enabled(true))
        )
        <script type="text/javascript">

            $(document).ready(function () {
                $('#search-products').click(function () {
                    var grid = $('#productvariants-grid').data('tGrid');
                    grid.currentPage = 1; //new search. Set page size to 1
                    grid.ajaxRequest();
                    return false;
                });
                $('#send-mail-reminder').click(function () {
                    var grid = $('#productvariants-grid').data('tGrid');
                    grid.ajaxRequest();
                    return false;
                });

                $('#grdCustomerEventRoleData #productvariants-grid table thead #checkAllRecords').click(function () {
                    $("#grdCustomerEventRoleData #productvariants-grid table tbody input:checkbox").attr("checked", this.checked);
                });
            });

            function Grid_onError(args) {
                if (args.textStatus == "modelstateerror" && args.modelState) {
                    var message = "Errors:\n";
                    $.each(args.modelState, function (key, value) {
                        if ('errors' in value) {
                            $.each(value.errors, function () {
                                message += this + "\n";
                            });
                        }
                    });
                    args.preventDefault();
                    alert(message);
                }
            }

            function Grid_onDataBinding(e) {
                var loadData = true;
                var grid = $(this).data('tGrid');

                if (loadData) {
                    var searchModel = {
                        Event: $('#select-event').val()
                    };
                    e.data = searchModel;
                }
            }

            function Grid_onSubmitChanges(e) {
                //TODO pass current search parameters

                //we can't pass search parameters in submit changes
                //that's why let's just clear search params
                //$('#@Html.FieldIdFor(model => model.Event)').val('');
                //$('#SearchCategoryId').val('0');
                //$('#SearchManufacturerId').val('0');
            }
        </script>
    </td> 
```

我的控制器操作

```
 public ActionResult EmailReminder()
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCustomers))
            return AccessDeniedView();

        var model = new NotificationMailReminderModels();

        model.Event = 0;

        List<Nop.Core.Domain.Catalog.Product> products = _productRepository.Table.Where(p => p.EventDate != null && p.EventDate >= DateTime.MinValue).OrderBy(o => o.Name).ToList();

        model.Events = products.Select(p => new System.Web.Mvc.SelectListItem
        {
            Text = p.Name.Trim(),
            Value = p.Id.ToString()
        }).ToList();

        return View(model);
    } 
```

[HttpPost, GridAction(EnableCustomBinding = true)] public ActionResult EmailReminderByEvent(int[] Id, GridCommand 命令, NotificationMailReminderModels 模型) { if (!_permissionService.Authorize(StandardPermissionProvider.ManageCustomers)) return AccessDeniedView();

```
 var gridModel = new GridModel();

        string vwSlEv = ViewBag.SelectedEvent;
        int selevent = 0;
        if (!string.IsNullOrEmpty(vwSlEv))
        {
            Int32.TryParse(vwSlEv, out selevent);
        }
        else
        {
            selevent = model.Event;
        }

        var csts = _customerEventRoleRepository.Table.Where(e => e.EventId == selevent).Select(cs => cs.CustomerId).Distinct().ToArray();

        var customers = _customerRepository.Table.Where(c => !string.IsNullOrEmpty(c.Username) && !string.IsNullOrEmpty(c.Email) && csts.Contains(c.Id)).ToList();

        var gridmodel = customers.Select(x =>
        {
            NotificationMailReminderModel not = new NotificationMailReminderModel();
            not.Id = x.Id;
            not.Username = x.Username;
            not.Firstname = x.CustomerAttributes.FirstName;
            not.Lastname = x.CustomerAttributes.LastName;

            return not;
        });

        var grddata = new PagedList<NotificationMailReminderModel>(gridmodel.ToList(), command.Page - 1, command.PageSize);

        gridModel.Data = grddata;

        gridModel.Total = grddata.TotalCount;

        return new JsonResult
        {
            Data = gridModel
        };
    } 
```

数据网格排序和过滤在我的网格中工作正常。但我无法获得 ContextMenu

Razor 智能中的功能。

我想将选定的行传递给控制器​​ POST 函数。

但是，如何将选定的行传递给控制器​​函数。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:57:34.050

> 但是，如何将选定的行传递给控制器​​函数。

**jQuery（示例代码）**

```
var MyConnectionList = {
    ColorList: []
};

function SendStream() {
    debugger;

    MyConnectionList.ColorList.push({
        "Name": 'Test1',
        "Color": 'red'
    });

    MyConnectionList.ColorList.push({
        "Name": 'Test2',
        "Color": 'Green'
    });

    $.ajax({
        url: "Ur url",
        data: JSON.stringify(MyConnectionList),
        type: 'POST',
        contentType: 'application/json',
        dataType: 'json',
        success: function (data) { }
    });
} 
```

**动作方法**

```
public ActionResult SendStream(List<Sample> ColorList)
{
} 
```

# php - formname.submit 在 IE8 上不起作用

> ID：15968128
> 
> 赞同：0
> 
> 时间：2013-04-12T09:48:36.707
> 
> 标签：php, javascript, jquery

我目前正在开发一个应用程序，但在 IE8 上遇到了困难。

我有以下代码：

```
<form class="fillClaimForm" name="fillClaimForm" method="POST" enctype="multipart/form-data" action="<?php print BASE_URL; ?>?action=insertBlogger" >
   <label for="fblogName">Blog's name: </label>
   <input type="text" name="fblogName" id="fblogName" class="cfInput" placeholder ="Complex" required />
   <label for="fblogUrl">URL: </label>
   <input type="text" name="fblogUrl" id="fblogUrl" class="cfInput" placeholder ="www.complex.com" required />
   <label>Blog's logo: </label>
   <div class="upload-file-container"><span>UPLOAD</span>
   <input  type="file" name="fblogLogo" id="fblogLogo"/>
   <p class="ErrLoad error" style="display:none;">Please load your logo</p>
   </div>
    <label for="fEmail">Email adresse: </label>
    <input  type="email" name="fEmail" id="fEmail" class="cfInput" required />
    <label for="frNum">Phone number: </label>
    <input  type="tel"  name="frNum" id="frNum" class="cfInput" required />
    <input type="hidden" name="idVid" id ="idVid" value=""/>
    <input type="hidden" name="idRubrique" id ="idRubrique" value=""/>
    <button id="sendClaim" class="sendClaim">SEND</button> 
```

因此，我正在使用 jquery 进行表单提交：

```
......submit(function(){
        validate=false;
        formInfo = validateForm(validate,$thisLi);
        if(formInfo.validate){
            **fillClaimForm.submit();**
        }
        return false;
    }); 
```

它适用于除 IE8 以外的所有浏览器

有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:52:45.483

尝试这个：

```
document.forms.fillClaimForm.submit(); 
```

或者，如果 `......`您的代码中的 代表在同一​​个表单上创建提交处理程序，您可能只是说`this.submit()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:52:48.403

关闭您的表单。还要为您的表单提供与 id 相同的名称并使用

```
$("#formId").submit(); 
```

代码

```
<form class="fillClaimForm" name="fillClaimForm" method="POST" enctype="multipart/form-data" action="<?php print BASE_URL; ?>?action=insertBlogger" >
   <label for="fblogName">Blog's name: </label>
   <input type="text" name="fblogName" id="fblogName" class="cfInput" placeholder ="Complex" required />
   <label for="fblogUrl">URL: </label>
   <input type="text" name="fblogUrl" id="fblogUrl" class="cfInput" placeholder ="www.complex.com" required />
   <label>Blog's logo: </label>
   <div class="upload-file-container"><span>UPLOAD</span>
   <input  type="file" name="fblogLogo" id="fblogLogo"/>
   <p class="ErrLoad error" style="display:none;">Please load your logo</p>
   </div>
    <label for="fEmail">Email adresse: </label>
    <input  type="email" name="fEmail" id="fEmail" class="cfInput" required />
    <label for="frNum">Phone number: </label>
    <input  type="tel"  name="frNum" id="frNum" class="cfInput" required />
    <input type="hidden" name="idVid" id ="idVid" value=""/>
    <input type="hidden" name="idRubrique" id ="idRubrique" value=""/>
    <button id="sendClaim" class="sendClaim">SEND</button>
</form>

$("#sendClaim").click(function(){
        validate=false;
        formInfo = validateForm(validate,$thisLi);
        if(formInfo.validate){
            $("#fillClaimForm").submit();
        }
        return false;
    }); 
```

# mysql - Wordpress 慢查询

> ID：15968129
> 
> 赞同：1
> 
> 时间：2013-04-12T09:48:39.543
> 
> 标签：mysql, wordpress, mysql-slow-query-log

我有一个 wordpress 博客，我的共享托管公司警告我活动缓慢。

在我的 mysql slowlog.log 中，我有大约需要 2 和 3 的基本查询（我认为秒而不是毫秒）

这是日志中的查询：

```
# Query_time: 2  Lock_time: 0  Rows_sent: 25  Rows_examined: 36266
    SELECT l.ID, post_content, post_name, post_author, post_parent, post_modified_gmt, post_date, post_date_gmt
                    FROM (
                        SELECT ID FROM wp_posts 
                            WHERE post_status = 'publish'
                            AND post_password = ''
                            AND post_type = 'my_post_type'

                            ORDER BY post_modified ASC
                            LIMIT 25 OFFSET 9925 ) o
                        JOIN wp_posts l
                        ON l.ID = o.ID
                        ORDER BY l.ID; 
```

我的问题是：这个查询是核心查询吗？在这种情况下需要 3 秒是正常的吗？如果没有，我该如何补救？如果它不是生成此查询的插件或主题函数，我的意思是核心查询，因为我没有在主题的 function.php 中找到它

我在日志中有另一个慢查询：

```
# Query_time: 2  Lock_time: 0  Rows_sent: 1  Rows_examined: 29232
SELECT post_modified_gmt FROM wp_posts WHERE post_status IN ('publish','inherit') AND post_type = 'my_post_type' ORDER BY post_modified_gmt ASC LIMIT 1 OFFSET 2999; 
```

这里有同样的问题，它是核心查询还是插件相关的等等......

请注意，我已经安装了 WP 超级缓存，我的网站加载速度更快，但在 slowlog.log 中仍然有这些慢查询

PS：我在一家可靠的 hsting 公司 (infomaniak)，他们已将我的博客放在专用 VPS 机器上 15 天让我解决问题

感谢您的帮助，并为我的英语非常糟糕感到抱歉

- - - - - - - - - - - - - - - - - - - - - -编辑 - - - ---------------------------------

安装 wp 超级缓存后，这些查询再也没有办法了 :(

```
# Query_time: 2  Lock_time: 0  Rows_sent: 25  Rows_examined: 49908
SELECT l.ID, post_content, post_name, post_author, post_parent, post_modified_gmt, post_date, post_date_gmt
                FROM (
                    SELECT ID FROM wp_posts 
                        WHERE post_status = 'publish'
                        AND post_password = ''
                        AND post_type = 'my_post_type'

                        ORDER BY post_modified ASC
                        LIMIT 25 OFFSET 23550 ) o
                    JOIN wp_posts l
                    ON l.ID = o.ID
                    ORDER BY l.ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:03:29.353

好的，我发现这些查询有什么问题：

首先，它们不是由名为“Yoast WordPress SEO”的插件生成的核心查询，该插件正是该插件的站点地图部分。“文件：class-sitemaps.php”

当我禁用插件的站点地图部分时，我的 slowlog.log 文件中没有这些查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:54:10.573

这两个查询是核心查询，不能删除。

最好的方法是使用缓存插件（如 wp 超级缓存），

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T13:07:06.173

我将其视为慢查询，该查询将在该查询中命中

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.ID FROM wp_posts  WHERE 1=1  AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'publish')  ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

实际上我手动设置`posts_per_pages`为16，

# php - 我如何获得自动增量字段mysql

> ID：15968132
> 
> 赞同：0
> 
> 时间：2013-04-12T09:48:46.263
> 
> 标签：php, mysql

我怎样才能使用自动增量字段名称`ALTER TABLE`

或者

有没有其他想法来获得自动增量字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:50:49.947

您可以获得类似这样的表格详细信息

```
$res = $mysqli->query('SHOW COLUMNS FROM tablename');

while($row = $res->fetch_assoc()) {
     if ($row['Extra'] == 'auto_increment')
     echo 'Field with auto_increment = '.$row['Field'];
     if ($row['Key'] == 'PRI')
     echo 'Field with primary key = '.$row['Field'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:05:31.990

**如果您查看 information_schema 数据库，您可以在TABLES**表中找到表的自动增量值。**COLUMNS**表包含每列的详细信息，并且该表上的额外字段将显示自动递增列的 auto_increment 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:57:13.157

您可以为此使用 information_schema 数据库

```
SELECT column_name, column_key, extra
FROM information_schema.columns
WHERE table_schema = 'yourdatabase'
AND table_name = 'yourtable'
AND extra = 'auto_increment' 
```

# eclipse - 如何在 build.gradle 中设置 Eclipse 项目的常规特性？

> ID：15968141
> 
> 赞同：0
> 
> 时间：2013-04-12T09:49:10.797
> 
> 标签：eclipse, groovy, gradle

在项目上运行后`gradle cleanEclipse Eclipse`，它失去了 Groovy 的性质。我怎样才能自动设置这种性质，或者只是对 Gradle 说不要管它。

编辑：根据 do [doc](http://www.gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseProject.html)，我可以在 build.gradle 中写：

```
eclipse {
  project {
    natures 'some.extra.eclipse.nature', 'some.another.interesting.nature'
  }
} 
```

但是，groovy 性质的名称是什么，或者我怎么能得到它？

我去 .project 看看：

```
<natures>
    <nature>org.eclipse.jdt.groovy.core.groovyNature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>bndtools.core.bndnature</nature>
</natures> 
```

org.eclipse.jdt.groovy.core.groovyNature - 这是自然名称

正如@Peter Niederwieser 建议的那样，我正在补充`apply plugin: "groovy"`（感谢+1）

## 但

运行后`gradle cleanEclipse Eclipse`我有正确的 .project 文件，并且该项目的图标上有“G”，但在 .classpath 中不存在两行：

```
<classpathentry exported="true" kind="con" path="GROOVY_SUPPORT"/>
<classpathentry exported="true" kind="con" path="GROOVY_DSL_SUPPORT"/> 
```

当我手动设置 Groovy 特性时，它们就存在了。

看来，这些行很重要，因为在该变体中，即使在编译级别项目也显示错误 - 它没有看到一些 Groovy 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:09:27.587

再次考虑这一点，Gradle 将为那些应用了`groovy`（或`groovy-base`）插件的项目添加 Groovy 特性。因此，要么在 Gradle 端添加该插件，要么在手动添加 Groovy 特性后不运行`cleanEclipse`，或者切换到[Eclipse Gradle 工具](https://github.com/SpringSource/eclipse-integration-gradle)而不是生成 Eclipse 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:15:24.833

看来，对于一个真正时髦的自然环境，我不仅需要设置

```
natures.add 'org.eclipse.jdt.groovy.core.groovyNature' 
```

和

```
apply plugin: "groovy" 
```

，还可以编辑类路径。

```
eclipse {
    classpath {
        file {
            withXml {
                Node node = it.asNode()
                node.appendNode('classpathentry',[exported:"true",kind:"con",path:"GROOVY_SUPPORT"]) 
                node.appendNode('classpathentry',[exported:"true",kind:"con",path:"GROOVY_DSL_SUPPORT"])
            }
        }
    }
} 
```

有趣的是，如果我们手动打开 groovy 类路径，.classpath 文件中只会出现路径“GROOVY_SUPPORT”。对于我的项目也足够了。但是当手动转动整个 Groovy 特性时，两条路径都会出现。所以，我最好也包括他们两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:57:23.873

Gradle-Eclipse 插件（即 Eclipse 的 gradle 工具，而不是 gradle 的 Eclipse 插件）。应该可以安装在 Eclipse 3.6 上。（我说*应该*是可安装的，因为我们不再在 3.6 上进行测试，但不应该有任何原因导致它被破坏）。如果你安装了这个插件，你应该能够将你的 gradle 项目导入 Eclipse，而无需调用`gradle Eclipse`.

您可以从此处的更新站点安装：

[http://dist.springsource.com/release/TOOLS/gradle](http://dist.springsource.com/release/TOOLS/gradle)

有关该项目的更多信息在这里：

[https://github.com/SpringSource/eclipse-integration-gradle](https://github.com/SpringSource/eclipse-integration-gradle)

# java - 计算开始时间和经过时间的时间差

> ID：15968146
> 
> 赞同：0
> 
> 时间：2013-04-12T09:49:27.563
> 
> 标签：java, android

```
public static final long TIMEOUT = 60000;
public static final long SYSTEM_TIME = System.currentTimeMillis(); 
```

我将我的应用程序的 TIMEOUT 值设置为 60000，并且我有我的系统时间。现在我怎么知道`50 seconds`已经过去了，我需要向最终用户显示一条消息。

```
if (TIMEOUT  - SYSTEM_TIME <= 10000) {
    Toast.makeText(getApplicationContext(), "10 Seconds Left", Toast.LENGTH_LONG).show();
    disconnectHandler.postDelayed(disconnectCallback, DISCONNECT_TIMEOUT);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:57:20.383

如果您不需要在该线程中执行其他操作，则可以使用`sleep(50000)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:00:08.710

这是一次性运行特定任务的方法：

```
new Timer().schedule(new TimerTask() {              
            @Override
            public void run() {
                // TODO
                ...
            }
        }, TIMEOUT); 
```

文档在[这里](http://developer.android.com/intl/ru/reference/java/util/Timer.html)（由 jimpanzer 报告）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:02:49.777

也许你可以使用这样的东西：

```
long startTime = SystemClock.elapsedRealtime();
// do what you want
long endTime = SystemClock.elapsedRealtime();
long ellapsedTime = endTime - startTime;
if (ellapsedTime>TIME_OUT) {
    // do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T10:05:01.960

也许我错了，或者只是还没有喝足够的咖啡，但是 Timeout 是 60000，您的 System 值要高得多 - 从 1970 年开始的所有毫秒（如果我在这里也没有弄错的话）。这意味着 TIMEOUT - SYSTEM_TIME 的结果为负数，因此为负数，因此小于 10000。因此，您的 if 语句始终运行。

# c# - 如何读取特定 SkyDrive 文件夹中的文件列表？

> ID：15968154
> 
> 赞同：0
> 
> 时间：2013-04-12T09:49:58.080
> 
> 标签：c#, windows-phone-7, onedrive, live-sdk

我知道我可以通过使用获取 SkyDrive 根目录中的文件列表，`liveClient.GetAsync("me/skydrive/files")`如果我知道我可以使用的文件夹 ID `liveClient.GetAsync(folderId + "/files")`，所以我不希望这些作为答案:)

是否有一种简单的方法来获取特定文件夹中的文件列表，而不是遍历所有用户的文件夹和 3 级深度以获取“folderX/folderY/folderZ”中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T05:21:02.260

我认为这段代码会对你有所帮助。

```
private const string DropBoxUsername = "abc@hotmail.com";

private const string DropBoxPassword = "password";

private const string FolderName = "MainFolder";

private const string UserEmail = "abc@hotmail.com";

protected void BtnUploadClick(object sender, EventArgs e)

{

   var client = new SkyDriveServiceClient();
   // log on into drop box using username and password
   client.LogOn(DropBoxUsername, DropBoxPassword);

   // verifying the company folder is available or not
   WebFolderInfo userskyDrivefolder = null;

   WebFolderInfo clientskyDrivefolder = 
   client.ListRootWebFolders().FirstOrDefault(subWebFolder => subWebFolder.Name == FolderName);
    if (clientskyDrivefolder != null)
    {
        foreach (WebFolderInfo subWebFolder in client.ListSubWebFolders(clientskyDrivefolder))
        {
            if (subWebFolder.Name == UserEmail)
            {
                userskyDrivefolder = subWebFolder;
                break;
            }
        }
    }
} 
```

# jenkins-plugins - 如何使用 CloudBees Deployer 插件添加部署消息参数

> ID：15968158
> 
> 赞同：1
> 
> 时间：2013-04-12T09:50:15.570
> 
> 标签：jenkins-plugins, cloudbees

有没有办法使用 Cloudbees Deployer 插件为部署提供自定义消息？我们习惯于将 git 版本放到部署中，以便更容易查看我们在 run@cloud 运行的版本。

我们已经尝试使用 bees maven 插件进行部署，并且可以从构建参数中获取消息参数集。能使用插件就好了，而不用乱用 maven 插件，在配置阶段更容易出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:55:18.527

[此功能在 CloudBees Deployer 插件 4.4](http://release-notes.cloudbees.com/release/CloudBees+Deployer+Plugin/4.4)版之前不可用。

4.4 版增加了在“高级”按钮中配置描述的功能：

![扩展高级按钮的应用程序配置](https://i.stack.imgur.com/sGUlp.png)

该字段的默认值是`${JOB_NAME} #${BUILD_NUMBER}`为了保留以前的行为。

该字段支持所有常见的 Jenkins 环境令牌宏扩展，因此您可能希望将其设置为类似`${GIT_COMMIT}`或`${GIT_COMMIT} ${JOB_NAME} #${BUILD_NUMBER}`. 在任何情况下，标准令牌宏都应该提供您需要的灵活性。

注意：如果您使用的是 DEV@cloud，并且 Jenkins 有 4.4 之前的插件版本，您将不得不等到之后`2013-04-15T15:00Z`重新启动您的 Jenkins 实例以获取更新版本的插件。

注意：如果您通过[CloudBees Free Enterprise Plugins](https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Free+Enterprise+Plugins)路由使用 CloudBees Deployer 插件，则必须强制更新中心元数据更新或等到之后`2013-04-16T12:30Z`才能在插件列表中看到更新。

# ios - 从 NSArray 获取 4 个等距值

> ID：15968161
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:50:23.770
> 
> 标签：ios, objective-c, cocoa-touch, nsarray, int

假设我有`NSArray`60 个元素。其中，我想在索引 15、30、45、60 处获得 4 个值。我试图将其放入 for 循环中，但在这里效果不佳：

```
for (int elementIndex = x_valuesDataArray.count / 4; elementIndex < x_valuesDataArray.count; elementIndex = elementIndex + elementIndex){
    NSLog(@"Element index is %d", elementIndex);
    NSLog(@"Total values %u", x_valuesDataArray.count);
    NSString *firstValue = [x_valuesDataArray objectAtIndex:elementIndex];
    [xAxisArray02 addObject:firstValue];
} 
```

但是我的`NSLog`输出显示我做错了：

```
2013-04-12 13:48:59.267 myApp[44682:907] Element index is 15
2013-04-12 13:48:59.269 myApp[44682:907] Total values 60
2013-04-12 13:48:59.270 myApp[44682:907] Element index is 30
2013-04-12 13:48:59.271 myApp[44682:907] Total values 60 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:59:18.593

```
for (int i = 1; i <= 4; i++) {
    int elementIndex = x_valuesDataArray.count * i / 4 - 1;
    // ...
} 
```

应该管用。请注意，具有 40 个元素的数组的索引为 0 .. 39。在这种情况下，上述循环给出了索引 9、19、29、39。还假设该数组*至少有*4 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:02:38.793

A. x_valuesDataArray 有 60 个元素，而不是您预测的 40 个元素。

B. 这行：`elementIndex = elementIndex + elementIndex`应该是

```
elementIndex = elementIndex + 10 
```

如果`valuesDataArray`是40。

# java - 通过 Http POST 请求从 Android 上传文件和其他数据

> ID：15968165
> 
> 赞同：16
> 
> 时间：2013-04-12T09:50:35.520
> 
> 标签：java, android, post, http-post

这是从 Android 发布文件的简单方法。

```
String url = "http://yourserver.com/upload.php";
File file = new File("myfileuri");
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(url);

    InputStreamEntity reqEntity = new InputStreamEntity(new FileInputStream(file), -1);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true); // Send in multiple parts if needed
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
    //Do something with response...

} catch (Exception e) {
    e.printStackTrace();
} 
```

我想要做的是`POST`向我的请求添加更多变量。我怎么做？在`POST`请求中上传纯字符串时，我们使用`URLEncodedFormEntity`.

```
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

而在上传文件时，我们使用`InputStreamEntity`.

另外，我如何专门将此文件上传到`$_FILES['myfilename']`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T19:32:45.900

最有效的方法是使用[android-async-http](http://loopj.com/android-async-http/)

您可以使用此代码上传文件：

```
 File myFile = new File("/path/to/file.png");
    RequestParams params = new RequestParams();
    try {
        params.put("profile_picture", myFile);
    } catch(FileNotFoundException e) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T15:27:27.720

花了一整天的时间找到了[loopj](http://loopj.com/android-async-http/)。您可以按照以下代码示例进行操作：

```
//context: Activity context, Property: Custom class, replace with your pojo
public void postProperty(Context context,Property property){
        // Creates a Async client. 
        AsyncHttpClient client = new AsyncHttpClient();
         //New File
        File files = new File(property.getImageUrl());
        RequestParams params = new RequestParams();
        try {
            //"photos" is Name of the field to identify file on server
            params.put("photos", files);
        } catch (FileNotFoundException e) {
            //TODO: Handle error
            e.printStackTrace();
        }
        //TODO: Reaming body with id "property". prepareJson converts property class to Json string. Replace this with with your own method 
        params.put("property",prepareJson(property));
        client.post(context, baseURL+"upload", params, new AsyncHttpResponseHandler() {
            @Override
            public void onFailure(int statusCode, Header[] headers, byte[] responseBody, Throwable error) {
                System.out.print("Failed..");
            }

            @Override
            public void onSuccess(int statusCode, Header[] headers, byte[] responseBody) {
                System.out.print("Success..");
            }
        });

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:00:31.760

由于您想从应用程序**上传文件，因此这里有一个很好的教程：**

[**在 Android 上使用 POST 将文件上传到 HTTP 服务器。**](http://stunningco.de/uploading-files-to-http-server-using-post-android-sdk/)

如果你也想上传字符串，我想你已经知道解决方案了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T14:23:53.350

给你几个方法：

*   提出 2 个发布请求：首先使用图像文件。服务器返回一个图像 id，并在第二个请求中附加到这个 id 你的参数。

*   或者，您可以使用`MultipartEntity`request 来代替“2 request”解决方案。[在这里查看更多数据](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)

# ios - 在 viewDidLoad 中初始化的变量范围到另一个方法

> ID：15968167
> 
> 赞同：1
> 
> 时间：2013-04-12T09:50:42.777
> 
> 标签：ios, objective-c, xcode

在视图中确实加载了我有这个段：

```
 UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActionSheetStyleBlackTranslucent];
    [self.view addSubview:spinner];
    [spinner startAnimating]; 
```

哪个工作正常，

然而更进一步：`webViewDidFinishLoad`我有：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    [spinner stopAnimating];
} 
```

并且微调器的范围已经丢失。我还没有将微调器作为出口或属性/合成 - 仍在掌握它。我认为一旦我掌握了范围，它应该使 obj-c 能力更好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:53:51.170

> 并且微调器的范围已经丢失。

`spinner`是一个*局部*变量。一旦代码到达其声明后最近的右花括号，它就会消失。如果您不希望它发生，`spinner`请为类或类扩展创建一个实例变量。

实例变量在接口声明或类扩展声明之后的花括号内声明，例如：

```
// In the header file...
@interface MyClass {
    ...
    UIActivityIndicatorView *spinner;
}
...
@end 
```

或者

```
// In the implementation file...
@interface MyClass() /*class extension*/ {
    ...
    UIActivityIndicatorView *spinner;
}
...
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:53:39.280

您需要在头文件中使微调器成为实例变量，否则`webViewDidFinishLoad`将无法看到该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:59:13.920

在你 viewDidLoad 中为 spinner 设置一个标签

```
 spinner.tag = 90; 
```

并在 webViewDidFinishLoad 方法中使用以下行

```
 UIActivityIndicatorView *activity =(UIActivityIndicatorView *) [self.view viewWithTag:90];
 [activity stopAnimating];
     or  declare spinner in .h file so that you can use it any where. 
```

# mysql - 在 MySQL 中最后创建的表之前获取一个

> ID：15968168
> 
> 赞同：1
> 
> 时间：2013-04-12T09:50:44.897
> 
> 标签：mysql

找到这段代码给我最新创建的表，但我怎样才能得到它之前的那个？

```
SELECT TABLE_NAME
FROM information_schema.tables
WHERE table_schema = 'data'
ORDER BY create_time DESC LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:56:45.513

而不是 LIMIT 1，使用 LIMIT 1,1 这将给你第二个最后创建的表

# javascript - 使用javascript比较两个数组

> ID：15968170
> 
> 赞同：0
> 
> 时间：2013-04-12T09:50:48.170
> 
> 标签：javascript

```
var array1 = [column1,column2,column3,column4];
var array2 = [column1 [empid],column2 [mobno],column4 [place]]; 
```

*   如果 array1 有任何 array2 值。我的意思是，在上述情况下，array1 中有 column1、column2、column4，然后删除这些值，array1 应该只有 column3，然后将 array1 值附加到 array2。
*   检查并删除后，现在`array1 = [column3]`然后最后`array1`加上值`array2`
*   `array2 = [column1 [empid],column2 [mobno],column3,column4 [place]];`它应该在正确的索引位置

以上情况可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:55:00.903

我建议使用像[Underscore.js](http://underscorejs.org/#union)这样的库，它具有类似的功能，可以满足`_.union()`您的描述。如果您不想使用该库，则可以查看它们的实现。

使用您的示例：

```
array2 = _.union(array1, array2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:15:42.073

如果您不想使用任何库，那么您可以这样做

`for(elem in array2){`

 ````
 var index = array1.indexOf(array2[elem]);
    if(index > -1)
    array1.splice(index,1); 
```

}` 

`array2 = array1.concat(array2).sort();`

# ios - Google Maps Javascript SDK v3 或切换到 Google Maps iOS SDK

> ID：15968172
> 
> 赞同：2
> 
> 时间：2013-04-12T09:50:51.367
> 
> 标签：ios, ipad, google-maps, google-maps-sdk-ios

我的 iOS 应用程序目前正在使用 Google Maps JavaScript Application v2，自从它被弃用以来，我有两种可能的解决方案。

需要升级到下一个版本，即 v3 或使用 google SDK（比如 GMSMapView）。

虽然由于各种原因我不能使用苹果地图。

从更高的角度来看，两者似乎都有效，但迄今为止都没有深入研究。

1.  **将我的 Google 地图 JavaScript 应用程序升级到 v3**：升级到 v3 将需要重写我的部分地图相关代码。由于 Google Maps JavaScript API v2 和 v3 之间发生了很多变化，这不仅仅是增量升级。因此，我需要研究更改并检查是否满足所有要求，并且更改不会影响其他任何内容。

2.  **谷歌地图 SDK**：这将是一个彻底的返工，但使用似乎比升级到新版本更简单，更可靠。但不知道以后会有多复杂。并且使用 Google Maps JavaScript Application v2 完成的所有事情也应该适用于 SDK。

帮助我选择最佳解决方案或告诉我您是否有更好的解决方案。

# windows - 在批处理文件中，如何获取名称是另一个环境变量的值的环境变量的值？

> ID：15968175
> 
> 赞同：1
> 
> 时间：2013-04-12T09:50:58.673
> 
> 标签：windows, batch-file

如果我知道一个环境变量包含另一个环境变量的名称，如何获取第二个环境变量的值？

假设我的`java.properties`批处理文件旁边有一个文件，其中包含以下内容。

```
JAVA_HOME_OVERRIDE_ENV_VAR=JAVA_HOME_1_7_0_17 
```

我想要做的是检查是否`JAVA_HOME_1_7_0_17`已设置，如果是，则执行相当于`set JAVA_HOME=%JAVA_HOME_1_7_0_17%`. 我可以弄清楚我正在寻找什么环境变量，但我不知道如何获得它的值。这是我目前所拥有的......

```
@echo off
setlocal enabledelayedexpansion

if exist %~dp0\java.properties (
    echo "Found java properties."

    for /F "tokens=1* usebackq delims==" %%A IN (%~dp0\java.properties) DO (
        if "%%A"=="JAVA_HOME_OVERRIDE_ENV_VAR" set JAVA_HOME_OVERRIDE_ENV_VAR=%%B
    )

    if not [!JAVA_HOME_OVERRIDE_ENV_VAR!] == [] (
        echo "Override var is !JAVA_HOME_OVERRIDE_ENV_VAR!"
        REM This is where I'm stuck!!!
        REM Assume JAVA_HOME_OVERRIDE_ENV_VAR is JAVA_HOME_1_7_0_17
    )
)

endlocal & set JAVA_HOME=%JAVA_HOME% 
```

我想要做的是检查环境变量是否`JAVA_HOME_1_7_0_17`存在，如果存在，使用它的值来设置`JAVA_HOME`。

## 更新

我认为嵌套的 if 语句使事情变得比需要的更困难。我摆脱了它们，以下似乎有效。

```
@echo off

setlocal enabledelayedexpansion

if not exist "%~dp0\java.properties" (
    goto:EOF
)

for /F "tokens=1* usebackq delims==" %%A IN ("%~dp0\java.properties") DO (
    if "%%A"=="JAVA_HOME_OVERRIDE_ENV_VAR" set JAVA_HOME_OVERRIDE_ENV_VAR=%%B
)

if [!JAVA_HOME_OVERRIDE_ENV_VAR!] == [] (
    goto:EOF
)

set JAVA_HOME=!%JAVA_HOME_OVERRIDE_ENV_VAR%!

endlocal & set JAVA_HOME="%JAVA_HOME%" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:59:05.463

试试`set JAVA_HOME=%!JAVA_HOME_OVERRIDE_ENV_VAR!%`。

**编辑：**`!JAVA_HOME_OVERRIDE_ENV_VAR!`如果设置在同一行，这应该不起作用。尝试

```
call set JAVA_HOME=!%JAVA_HOME_OVERRIDE_ENV_VAR%! 
```

一个缺点是，由于它会在磁盘上搜索名称为 的文件/可执行文件`set`，因此该命令应该需要稍长的时间才能完成，尽管它应该只在大循环中才会被注意到。

**编辑2：**也试试这个......

（`set override=0`在前面添加，在`set override=1`下面添加`if not`，并替换该`endlocal`行）

```
@echo off
setlocal enabledelayedexpansion
set override=0

if exist %~dp0\java.properties (
    echo "Found java properties."

    for /F "tokens=1* usebackq delims==" %%A IN (%~dp0\java.properties) DO (
        if "%%A"=="JAVA_HOME_OVERRIDE_ENV_VAR" set JAVA_HOME_OVERRIDE_ENV_VAR=%%B
    )

    if not [!JAVA_HOME_OVERRIDE_ENV_VAR!] == [] (
        echo "Override var is !JAVA_HOME_OVERRIDE_ENV_VAR!"
        set override=1
        REM Assume JAVA_HOME_OVERRIDE_ENV_VAR is JAVA_HOME_1_7_0_17
    )
)

endlocal & if override=1 set JAVA_HOME=!%JAVA_HOME_OVERRIDE_ENV_VAR%! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:01:40.463

我将使用 FINDSTR 过滤掉相关行，使用 IF DEFINED 来验证变量的存在，并在循环内延迟扩展以获得适当的值。

您的代码可能很简单：

```
@echo off
setlocal enableDelayedExpansion
for /f "tokens=1* delims==" %%A in (
  '2^>nul findstr /bil "JAVA_HOME_OVERRIDE_ENV_VAR=" "%~dp0\java.properties"'
) do if defined %%B set "JAVA_HOME=!%%B!"
endlocal & set "JAVA_HOME=%JAVA_HOME%" 
```

# php - php 在 echo 语句中使用 switch

> ID：15968176
> 
> 赞同：3
> 
> 时间：2013-04-12T09:51:04.570
> 
> 标签：php, switch-statement, echo

我需要在 echo 语句中使用 switch 之类的语句

我找到了一种方法，但是当我们想在 echo 中使用 IF 时，我认为这不是最好的方法，写一些类似的东西：

```
echo ((condition)?'print this if condition is True':'print this if condition is False'); 
```

我们可以将此方法用于类似 switch 的方式：

```
echo ((case1)?'case 1 result':((case2)?'case2 result':((case3)?'case3 result':'default result'))); 
```

你知道更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:54:58.170

您的示例称为三元运算符，它基本上是 if 语句的简写。

因此，在您的第二个示例中，您只是在执行大量链式 if then else's

你最好做这样的事情

```
 switch ($type)) {
    case "txt":
         $output = "images/doctypes/icon_txt.gif";
    break;
    case "doc":
         $output = "images/doctypes/icon_doc.gif";
    break;
    case "docx":
         $output = "images/doctypes/icon_doc.gif";
    break;
    case "pdf":
         $output = "images/doctypes/icon_pdf.gif";
    break;
    case "xls":
         $output = "images/doctypes/icon_xls.gif";
    break;
    case "xlsx":
         $output = "images/doctypes/icon_xls.gif";
    break;
    case "ppt":
         $output = "images/doctypes/icon_ppt.gif";
    break;
    case "pptx":
         $output = "images/doctypes/icon_txt.gif";
    break;
    case "rtf":
         $output = "images/doctypes/icon_txt.gif";
    break;
    case "zip":
         $output = "images/doctypes/icon_zip.gif";
    break;
    case "rar":
         $output = "images/doctypes/icon_zip.gif";
    break;
    case "mdb":
         $output = "images/doctypes/mdb.gif";
    break;
    default:
         $output = "images/doctypes/icon_generic.gif";
    };

echo $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T22:23:45.613

唔。如果我理解正确，您想知道第一个成功的条件是多少？

我只是想出了这个......看看它是否适合你。

只需将 false/true 替换为您的条件即可。

```
$i = 0;
++$i AND false OR // 1
++$i AND false OR // 2
++$i AND false OR // 3
++$i AND true  OR // 4 (here we go)
++$i AND false OR // 5
++$i AND true  OR // 6 (ignored)
++$i AND false OR // 7
$i = 0;           // 0

echo "case" . $i . " result"; // echoes 'case4 result' 
```

**编辑：**
这是使用相同技术的另一种方法。
但是，您可以提供自己的成功字符串，而不是计数器。
请记住，只需将 false/true 替换为您的条件。

```
function dostuff($str) { echo $str; return true;}

false AND dostuff('string1') OR
false AND dostuff('string2') OR
false AND dostuff('string3') OR
true  AND dostuff('string4') OR // echoes 'string4'
false AND dostuff('string5') OR
true  AND dostuff('string6') OR // ignored
false AND dostuff('string7'); 
```

# knockout.js - 让我的 SELECT 与 optgroup + optionsCaption 与淘汰赛似乎被忽略

> ID：15968177
> 
> 赞同：3
> 
> 时间：2013-04-12T09:51:06.070
> 
> 标签：knockout.js

我有一个使用我的 SELECT html 标记的 optgroup 的解决方案。

这是 SO 帖子：[Construct a knockout SELECT with optgroup based on observableArray](https://stackoverflow.com/questions/15948619/construct-a-knockout-select-with-optgroup-based-on-observablearray)

![在此处输入图像描述](https://i.stack.imgur.com/OOckD.png)

现在我想在这个 SELECT 中允许一个空值。我尝试使用 optionsCaption：

```
<select data-bind="foreach: brands, optionsCaption: '  '">
    <optgroup data-bind="attr: {label: $data}, foreach: $parent.vehicles">
    <!-- ko if: Brand == $parent -->
        <option data-bind="text: Type"></option>
    <!-- /ko -->
    </optgroup>
</select> 
```

但它不起作用：没有空选项。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-09T12:29:25.810

如果您只想在第一组之前显示标题，您还可以将标题的可见性数据绑定到 $index < 1。

```
<select data-bind="foreach: brands">
    <option data-bind="visible: $index() < 1">Select vehicle</option>    
        <optgroup data-bind="attr: {label: $data}, foreach: $parent.vehicles">
        <!-- ko if: Brand == $parent -->
        <option data-bind="text: Type"></option>
        <!-- /ko -->
    </optgroup>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:55:47.850

您只能将`optionsCaption`绑定与`options`绑定一起使用。由于您不使用它，因此您必须手动将空选项添加到选项列表中：

```
<select data-bind="foreach: brands">
     <option value=''>  </option>
    <optgroup data-bind="attr: {label: $data}, foreach: $parent.vehicles">
    <!-- ko if: Brand == $parent -->
        <option data-bind="text: Type"></option>
    <!-- /ko -->
    </optgroup>
</select> 
```

这是一个工作小提琴：http: [//jsfiddle.net/HPhmB/57/](http://jsfiddle.net/HPhmB/57/)

# python - 使用无模型表单的隐藏表单字段

> ID：15968182
> 
> 赞同：1
> 
> 时间：2013-04-12T09:51:15.503
> 
> 标签：python, django

当我使用模型表单时，我可以通过使用 Meta 类和**exclude**来排除显示的字段。但是，对于标准的非**模型**形式，这不起作用。我想隐藏一个字段调用量并在初始化时填充。如何？

```
amount = forms.FloatField() 
```

好吧，我试图首先排除这样的......

```
class Meta:
    exclude = ('amount',) 
```

但这似乎不适用于任何模型形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:01:47.103

用于`forms.ModelForm`覆盖初始化

```
class YourForm(forms.ModelForm):
    amount = forms.FloatField() 

    def __init__(self, *args, **kwargs):
        super(YourForm, self).__init__(*args, **kwargs)
        self.fields['amount'].widget = forms.HiddenInput() 
        self.fields['amount'].initial = '' 
```

# zend-framework - Zend Form TextArea 带有倒计时字符和 StringLength Validator - 不同的计算

> ID：15968183
> 
> 赞同：1
> 
> 时间：2013-04-12T09:51:18.770
> 
> 标签：zend-framework, zend-form, zend-validate

在我的表单中，我有一个 zend_form_element_textarea。对于这个元素，我添加了一个验证器 StringLength，如下所示：

```
$this->addElement('textarea', 'text', array('label' => 'F_MESSAGE_SMS_TEXT', 'required' => true, 'class' => 'fieldLiveLimit', 'limit' => 160));
$this->text->addValidator('StringLength', false, array('max' => 160)); 
```

我使用脚本 javascript 来显示实时倒计时字符：

```
//Text field or text area limit - get limit by field parameter
    $(".fieldLiveLimit").each(function () {
        var characters = $(this).attr('limit');
        var remaining = calcDifference(characters, $(this).val());
        if ($('.limitCounter').length > 0) {
            $(this).after($('.limitCounter').first().clone());
            $(this).next('.limitCounter').children('span').html(remaining);
        } else {
            $(this).after($("<div class='limitCounter'>" + translate('L_LIMIT_COUNTER', [remaining]) + "</div>"));
        }
        checkClassCounter(remaining, $(this));

        $(this).bind('textchange', function (event, previousText) {
            remaining = calcDifference(characters, $(this).val());
            checkClassCounter(remaining, $(this));
            if ($(this).val().length > characters) {
                $(this).val($(this).val().substr(0, characters));
            } else {
                $(this).next('.limitCounter').children('span').html(remaining);
            }
        });

        function calcDifference(characters, value) {
            return characters - parseInt(value.length);
        }

        function checkClassCounter(remaining, element) {
            if (parseInt(element.val().length) == 0) {
                element.next(".limitCounter").hide();
            } else {
                element.next(".limitCounter").show();
                if (remaining <= 10) {
                    element.next(".limitCounter").addClass('red-message');
                } else {
                    element.next(".limitCounter").removeClass('red-message');
                }
            }
        }
    }); 
```

这很好用，除了一件事。如果在文本区域内有新行，验证器将新行视为两个字符，而我的 JS 脚本为一个。谁错了？我觉得是zend验证器，不过好像真的是个奇怪的东西再问你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:51:58.863

正如用户 Pankrates 在他的评论中已经指出的那样，这与换行符有关。

事实上，这个问题比最初看起来要复杂得多，因为它至少有两个维度：

1.  jQuery 去除函数中的回车符`val()`：*“目前，在 textarea 元素上使用 .val() 会从浏览器报告的值中去除回车符。”* [jQuery 文档](http://api.jquery.com/val/)。
2.  浏览器如何计算换行符是不一致`\r\n`的。有关 SO 的相关问题，请参见[此处](https://stackoverflow.com/a/7642371/1126369)或[此处](https://stackoverflow.com/questions/462348/string-length-differs-from-javascript-to-java-code)。但是，在我系统上安装的所有浏览器（Firefox 20.0 和 Chrome 26.0）上，`\r\n`都算作两个字符，所以我无法确认这一点。

请参阅此小代码片段以进行演示：

```
<?php
$str1 =  "test\nstring";
$str2 =  "test\r\nstring";
?>
    <textarea id="text1"><?php echo $str1 ?></textarea>jQuery: <span id="jquery1"></span>, JS: <span id="js1"></span>, PHP: <?php echo iconv_strlen($str1) ?>
    <textarea id="text2"><?php echo $str2 ?></textarea>jQuery: <span id="jquery2"></span>, JS: <span id="js2"></span>, PHP: <?php echo iconv_strlen($str2) ?>

<script type="text/javascript">
        $(document).ready(function() {
                $("#jquery1").text($("#text1").val().length);
                $("#js1").text("<?php echo str_replace(array("\n", "\r"), array('\n', '\r'), $str1) ?>".length);
                $("#jquery2").text($("#text2").val().length);
                $("#js2").text("<?php echo str_replace(array("\n", "\r"), array('\n', '\r'), $str2) ?>".length);
        });     
</script> 
```

它给了我第一个盒子`jQuery: 11, JS: 11, PHP: 11`，但我得到了第二个盒子`jQuery: 11, JS: 12, PHP: 12`。

我能想到几种解决方案（没有一个是理想的）：

1.  `Zend_Filter_PregReplace`在您的表单中使用 a将所有内容`\r\n`替换为`\n`. 优点：计数将与 jQuery 的一致，`val()`并且相对容易。缺点：您正在破坏用户的换行符，这可能会导致不需要的结果。
2.  [装饰](http://en.wikipedia.org/wiki/Decorator_pattern)，`Zend_Validate_StringLength`以便您可以在方法中替换`\r\n`by 。优点：将保留用户的换行符，缺点：您可能会得到一个超过 200 个字符的有效结果，因为被计为一个字符，您需要引入一个新类。`\n``isValid()``\r\n`
3.  使用[jQuery 的 textarea.valHooks](http://api.jquery.com/val/)将所有换行符替换为`\r\n`： Pro：简单，Con：如果您的用户具有`\n`换行符，它再次会给您带来不一致的结果。

我希望这个答案能根据您的应用程序的上下文向您展示如何解决这种情况的一些方向。

# java - Java：处理 webcal 协议

> ID：15968184
> 
> 赞同：1
> 
> 时间：2013-04-12T09:51:20.780
> 
> 标签：java, http, url, protocols, webcal

我正在尝试下载 - 甚至只是打开一个流 - 到位于 webcal://www.somewhere.com/foo?etc=bar 的日历。

当我这样做时，Java URL 类抛出“未知协议：webcal”异常：

```
URL url = new URL("webcal://..."); 
```

我如何告诉 URL 类它应该只使用 HTTP 作为传输协议，即使 Web 资源位于 webcal:// 协议后面的某个位置？

或者，无论如何，我怎样才能下载我的日历？

请记住，如果我尝试将“webcal://”替换为“http://”，我正在调用的 Web 服务器不会为日历提供服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:30:02.567

据我了解，苹果对“webcal”的使用确实只是“http”的代名词；所以它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-06T07:07:23.300

“webcal://”是一个非官方的 URI 方案，请参阅 Wikipedia上的[文章](https://en.wikipedia.org/wiki/Webcal)。

因此，它可能代表一个或另一个后端实现 - 例如，您正在调用的 Web 服务器可能正在使用任何提到的协议实现，例如[WebDAV](https://en.wikipedia.org/wiki/WebDAV)、[CalDAV](https://en.wikipedia.org/wiki/CalDAV)或[OpenDAV](https://en.wikipedia.org/wiki/GroupDAV)

但是，如果您只想读取文件的内容，那么任何 HTTP 客户端都应该这样做，因为上述协议是基于 HTTP 的。

[这是一个关于如何使用 URL 自己的打开HttpURLConnection](https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)机制来读取远程 iCal 的示例：

```
 URL calendarURL = new URL("http://www.facebook.com/ical/b.php?uid=myUID&key=myKEY");
    URLConnection connection = calendarURL.openConnection();
    BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    while (reader.ready()) {
        System.out.println(reader.readLine());
    } 
```

如您所见，我已将原始 URL 从

webcal://www.facebook.com/ical/b.php?uid=MYUID&key=MYKEY

至

[http://www.facebook.com/ical/b.php?uid=MYUID&key=MYKEY](http://www.facebook.com/ical/b.php?uid=MYUID&key=MYKEY)

，因为我们使用 java.net.URL 并且默认情况下 Java 不识别此协议。如果您要联系的 Web 服务器确实只通过 webcal:// 提供内容，那么您可能需要使用适当的客户端（基于服务器使用的确切协议实现）。例如，有许多框架提供 WebDAV 客户端功能，例如[JackRabbit](https://wiki.apache.org/jackrabbit/WebDAV)、[Sardine](http://code.google.com/p/sardine)等。

如果您提供有关服务器类型的更多信息，我们可以进一步挖掘。

# celery - 使用 django-celery，我如何让工作人员处理在 tasks.py 之外定义的任务？

> ID：15968185
> 
> 赞同：0
> 
> 时间：2013-04-12T09:51:24.100
> 
> 标签：celery, django-celery, worker

甚至可以在tasks.py之外定义任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:19:17.310

您可以在 之外定义任务`tasks.py`，您只需要告诉工作人员任务在哪里。您可以使用`CELERY_INCLUDE`设置（或 的`-I`参数`celery worker`）来做到这一点

如果您的意思是向工作人员发送任务源代码，那么这是一个更复杂的问题。它可以解决，但它会非常有限。

# c# - 如何编写使用从 C# 创建的临时表的存储过程

> ID：15968188
> 
> 赞同：2
> 
> 时间：2013-04-12T09:51:29.883
> 
> 标签：c#, sql-server

我有一个用 C# 开发的应用程序，它遵循这个工作流程：

*   读取 CSV 文件
*   创建临时表
*   使用 SqlBulkCopy 将 CSV 数据发送到临时表
*   调用存储过程合并真实表中的临时表
*   删除临时表

    ```
    using (var dbConnection = new SqlConnection(_connectionString))
    {
        dbConnection.Open();

        using (var cmd = new SqlCommand("CREATE TABLE [#UpdatedData]([Path] [nvarchar](50))", dbConnection))
        {
            cmd.ExecuteNonQuery();
        }

        using (var bulkCopy = new SqlBulkCopy(dbConnection))
        {
            bulkCopy.DestinationTableName = "[#UpdatedData]";

            bulkCopy.WriteToServer(dt);
        }

        using (var cmd = new SqlCommand("usp_MergeData", dbConnection))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.ExecuteNonQuery();
        }

        using (var cmd = new SqlCommand("DROP TABLE [#UpdatedData]", dbConnection))
        {
            cmd.ExecuteNonQuery();
        }
    } 
    ```

我的问题是我在 C# 中创建临时表，我无法编写 SQL Server 存储过程，因为它找不到临时表。有什么解决方法吗？

我将 localdb 用于开发，将 SQL Azure 用于生产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:03:53.457

您可以创建一个全局临时表：

```
using (var cmd = new SqlCommand(
    "CREATE TABLE [##UpdatedData]([Path] [nvarchar](50))"
    , dbConnection)) 
```

[本地临时表名称前缀为单号 (#table_name)，全局临时表名称前缀为双号 (##table_name)。](http://msdn.microsoft.com/en-us/library/ms174979.aspx)

* * *

**编辑**

由于您不能在 SQL Azure 中拥有全局临时表，因此您可能必须创建一个真实表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:33:45.380

我终于在没有永久表或全局表的情况下做到了！

我没有尝试在 SQL Server 中创建 MERGE 存储过程，而是在 C# 的字符串中编写了一个大的 MERGE 函数，并像普通 SQL 查询一样执行它！

# java - 将java资源写入src目录

> ID：15968189
> 
> 赞同：3
> 
> 时间：2013-04-12T09:51:29.977
> 
> 标签：java, eclipse, getresource

我正在使用 java 和 eclipse 作为 IDE 制作（平铺）级编辑器。我正在使用 getResourceAsStream 加载 tilemap。并将此代码写回地图。

```
URL resourceUrl = getClass().getResource(FILENAME);
File file = new File(resourceUrl.toURI());
OutputStream output = new FileOutputStream(file); 
```

它工作正常，但问题是我有两个目录 bin/ 和 src/。目录 bin/ 将由 eclipse 生成。所以我想编辑 src 目录中的文件。不幸的是 getResource() 适用于 bin/ 直接。此外，如果我重建一个项目，地图上的所有更改都将被删除。所以我只想编辑 src/ 文件夹中的 tilemaps。我怎样才能做到这一点？

我想避免硬编码一些绝对路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:57:10.003

Eclipse 默认使用 workdir = project dir 启动项目，因此 src 就在 workdir 下。使用相对路径

```
File file = new File("src/fileName"); 
```

# jquery - svg路径上的Raphael dropshadow插件firefox和opera问题

> ID：15968192
> 
> 赞同：2
> 
> 时间：2013-04-12T09:51:46.897
> 
> 标签：jquery, svg, raphael, svg-filters

我在尝试基于 raphael blur 插件的[dropshadow.raphael.js插件时遇到了一个奇怪的问题（我尝试使用 css 过滤器插件，同样的问题）。](https://github.com/dahoo/raphael.dropshadow.js)

我正在绘制贝塞尔路径并添加阴影：

```
var borderBottomRounded = paper.path("M150,100C20,200,600,200,400,100"); 
borderBottomRounded.attr({'stroke':'#000000', 'stroke-width':'1'});

borderBottomRounded.dropShadow(1,0,1,0.5); // dropShadow(size, offsetX, offsetY, opacity = 1) 
```

在那里，阴影在每个浏览器上都可以正常工作（还没有尝试过 IE）。

比我画一条直线，同样的阴影是这样的：

```
var borderBottom = paper.path("M 0,100 L800, 100");
borderBottom.attr({'stroke':'#000000', 'stroke-width':'1'});

borderBottom.dropShadow(1,0,1,0.5); 
```

*`$content`是我的拉斐尔`paper`，因为我希望它占据整个宽度。我无法使用`viewport`我正在做的事情。*

**但是这条路径在 Firefox 或 Opera 上会消失**（与 webkit 浏览器配合得很好）。

我该如何解决这个问题？目前，我只是为 Firefox 和 Opera 禁用这条线上的阴影，但我正在尝试找到一种更好的方法来做到这一点......

请参阅[fiddle 上的实时示例](http://jsfiddle.net/CqFMj/1/)。

再次尝试使用[css 过滤器插件](http://jsfiddle.net/CqFMj/2/)。

包括 jQuery 1.9.1、Raphael 2.1.0 和 raphael dropshadow 插件。

**编辑**

通过使用矩形而不是线来修复，因为在应用过滤器时元素需要具有高度（感谢罗伯特朗森）：

```
var borderBottom = paper.path("M 0,100 H800 v1 H0 Z");
borderBottom.attr({'fill':'#000000', 'stroke-width':'0'}); 
```

[工作小提琴。](http://jsfiddle.net/CqFMj/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:57:23.347

根据[http://www.w3.org/TR/SVG/coords.html#ObjectBoundingBox](http://www.w3.org/TR/SVG/coords.html#ObjectBoundingBox)

*当适用元素的几何形状没有宽度或没有高度时（例如水平或垂直线的情况），即使当由于具有非零笔划宽度而查看时线条具有实际厚度时，也不应使用关键字 objectBoundingBox边界框计算忽略笔画宽度。当适用元素的几何形状没有宽度或高度并且指定了 objectBoundingBox 时，将忽略给定的效果（例如，渐变或过滤器）。*

filterUnits 的默认值是 objectBoundingBox。因此 Opera 和 Firefox 不显示过滤器是正确的，并且任何这样做的 UA 都没有正确遵循 SVG 规范。

# android - 究竟如何在android中读取php发送的json对象？

> ID：15968193
> 
> 赞同：-2
> 
> 时间：2013-04-12T09:51:49.860
> 
> 标签：android, json

这是我读取 Web 应用程序发送到 android 的 json 对象的代码

InputStream instream = entity.getContent();

```
 String result = "";
    try {
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(instream, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line1 = null;
        while ((line1 = reader.readLine()) != null) {
            sb.append(line1 + "\n");
        }
        instream.close();
        result = sb.toString();
        Log.i("xxxxxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxxxxxxxx");
        Log.i("Read from server", result);
        Log.i("xxxxxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxxxxxxxx");

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        JSONObject jArray = new JSONObject(result);
    }

    catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

} catch (Exception e) {
    Log.i("------resultat---------", "Errrrrrrrrrrrooooooor");
} 
```

但是在 Logcat 中显示结果时它不显示

当在代码android中执行这一行时

> ```
>  Log.i("xxxxxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxxxxxxxx");
>       Log.i("Read from server", result);
>       Log.i("xxxxxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxxxxxxxx"); 
> ```

它显示此代码

```
04-12 09:39:59.980:  xxxxxxxxxxxxxxxxxxxxxx
04-12 09:39:59.980: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
04-12 09:39:59.980:  <html><head>
04-12 09:39:59.980:  <title>403 Forbidden</title>
04-12 09:39:59.980:  </head><body>
04-12 09:39:59.980:  <h1>Forbidden</h1>
04-12 09:39:59.980:  <p>**You don't have permission to access /younes_project/younesservices.php**
04-12 09:39:59.980:  on this server.</p>
04-12 09:39:59.980:  </body></html>
04-12 09:39:59.980: xxxxxxxxxxxxxxxxxxxxxx 
```

请问这种情况有什么问题:):):)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:00:40.147

这不是您的代码的问题。这是服务器端脚本（PHP）或文件访问权限的问题。服务器正在向您发送错误页面，而不是 json 响应。您可以联系您的 PHP 开发人员要求他更改文件访问权限文件 /younes_project/younesservices.php。

# iphone - unsafe_unretained 属性有什么用？

> ID：15968198
> 
> 赞同：15
> 
> 时间：2013-04-12T09:51:57.400
> 
> 标签：iphone, ios

我知道 的定义`unsafe_unretained`。

所以我不指望任何人写它的定义。

我想通过示例了解它的用途，以及它如何与**内存管理**一起使用。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-12T17:45:47.210

`unsafe_unretained`仅存在于 ARC（[自动引用计数](https://en.wikipedia.org/wiki/Automatic_Reference_Counting)）中。它的工作方式类似于`assign`MRC（手动引用计数）。这些属性将不会保留。通常，您希望将此类属性用于委托，因为它们不需要保留它们的所有者。

`weak`属性类似于`unsafe_unretained`，只是它们工作得更聪明一些。当分配给该属性的对象被释放时，弱引用自动变为`nil`，以避免在向该对象（其内存地址）发送消息时崩溃。

`unsafe_unretained`属性不这样做。它们将始终保留分配给它的内存地址（除非您手动更改它），而不管与该地址关联的对象如何。在这种情况下，弱引用可以防止崩溃，但结果仍然不会像预期的那样。如果您的代码井井有条且编写良好，则不应该发生这种情况。

那么为什么要使用`unsafe_unretained`而不是`weak`呢？弱引用仅适用于 iOS 5 及更高版本，因此如果您正在构建面向 iOS 4 的 ARC 应用程序，则需要使用`unsafe_unretained`属性。同样，向已发布的属性发送消息并不是您希望在任何代码中拥有的任何东西。如果您的代码组织良好，那么您应该对此没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:26:59.857

在 ARC 之前，人们可能会指定一个委托或其他对父属性的引用，`assign`以防止保留循环。随着 ARC 和较新的编译器的引入，您将改为使用`unsafe_unretained`.

因此，您可以在不需要引用所有权的任何时候使用它，并且当您不需要或不想使用新的`weak`引用类型时（当引用被释放时它会取消引用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T13:41:52.743

这是 unsafe_unretained 的一个特定用例。假设两个类相互引用，一个方向强，另一个方向弱。在第一个类的释放期间，第二个类对它的弱引用已经为零，从而阻止了适当的清理。用 unsafe_unretained 引用替换弱引用将解决此问题。请参阅下面的代码示例：

```
@class Foo;

@interface Bar: NSObject

//Replacing weak with unsafe_unretained prevents this property from becoming nil during Foo.dealloc
@property (nonatomic, weak) Foo *foo;

- (id)initWithFoo:(Foo *)foo;

@end

@interface Foo : NSObject

@property (nonatomic, strong) Bar *bar;

- (void)startObserving;
- (void)endObserving;

@end

@implementation Bar

- (id)initWithFoo:(Foo *)foo {
    if ((self = [super init])) {
        self.foo = foo;

        //Start observing
        [self.foo startObserving];
    }
    return self;
}

- (void)dealloc {
    //Since foo is a weak property, self.foo may actually be nil at this point! See dealloc of class Foo.
    [self.foo endObserving];
}

@end

@implementation Foo

- (id)init {
    if ((self = [super init])) {
        self.bar = [[Bar alloc] initWithFoo:self];
    }
    return self;
}

- (void)dealloc {
    //This will trigger the deallocation of bar. However, at this point all weak references to self will return nil already!
    self.bar = nil;

    //endObserving is never called, because Bar.foo reference was already nil.
}

- (void)startObserving {
    NSLog(@"Start observing");
}

- (void)endObserving {
    NSLog(@"End observing");
}

@end 
```

# sql - 包含非聚集索引的列是否重复值？

> ID：15968201
> 
> 赞同：1
> 
> 时间：2013-04-12T09:52:01.043
> 
> 标签：sql, sql-server-2008, include, indexing, non-clustered-index

如果我使用 INCLUDE 子句并将一些列添加到非聚集索引中，这是否意味着我将数据同时存储在 INDEX 及其 PAGE 上——这意味着至少消耗了双倍的空间——？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:55:19.870

是的。这种空间加倍也适用于索引键。索引可以构成大量的存储空间。

包含所有表列的覆盖索引几乎与原始表的大小完全相同，只是排序不同。

# ios - sqlite db创建+objective-c+cordova

> ID：15968203
> 
> 赞同：0
> 
> 时间：2013-04-12T09:52:08.007
> 
> 标签：ios, objective-c, sqlite, cordova

我正在使用cordova 2.1.0 框架在IOS 中创建一个应用程序。我正在执行以下操作来创建数据库：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
//NSError *error;  
if (![fileManager fileExistsAtPath:self.databaseFile]) {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    self.databaseFile = [documentsDirectory stringByAppendingPathComponent:@"klb_db.sqlite"];

    [self createConfigTable];
} else {
    NSLog(@"fail to create database");
}

// to create config table
-(void) createConfigTable{

    NSString *createStmt = @"CREATE TABLE IF NOT EXISTS config (id INTEGER PRIMARY KEY AUTOINCREMENT,key text,value text);";

    // Open the database and or create it
    if (sqlite3_open_v2([self.databaseFile UTF8String], &databaseHandle, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE , NULL) == SQLITE_OK)
    {
        NSLog(@"database created");

        const char *sqlStatement = [createStmt UTF8String];

        char *error;

        if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
        {
            NSLog(@"Config table created.");
        }
    }
    else{

        sqlite3_close(databaseHandle);
    }

    sqlite3_close(databaseHandle);

    return;
} 
```

然后，在 cordova index.html 中，我尝试在上面创建的数据库中运行查询：

```
dbName = 'Database';

//to insert username, password into db
db = window.openDatabase(dbName, "1.0", gAppConfig.dbMessage, 200000);

db.transaction(querySelectConfig, errorQuery);

//Get Messages from the DB
            function querySelectConfig(tx) {

                alert('select config')
                tx.executeSql('SELECT * FROM "'+gAppConfig.configTable+'";', [], querySelectSuccess, errorQuery);
            } 
```

在函数 querySelectConfig() 中，查询失败。为什么查询失败。Objective-c 中的数据库创建过程是否存在缺陷？其次，klb_db.sqlite 文件的用途是什么。创建新数据库时，是否需要为空。以及如何创建 .sqlite 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:00:05.507

使用核心数据，它将为您节省时间

[http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

# java - 以编程方式创建 mapView

> ID：15968204
> 
> 赞同：2
> 
> 时间：2013-04-12T09:52:11.223
> 
> 标签：java, android, android-mapview, instantiation, osmdroid

我想以编程方式实例化 MapView。我正在使用 Osmdroid。我写了这个，但地图没有显示（有或没有设置参数）！怎么了？

```
 LinearLayout contentLayout = (LinearLayout) findViewById(R.id.contentLayout);

    m_mapView = new MapView(this, 10);

    org.osmdroid.views.MapView.LayoutParams mapParams = new org.osmdroid.views.MapView.LayoutParams(
            org.osmdroid.views.MapView.LayoutParams.MATCH_PARENT,
            org.osmdroid.views.MapView.LayoutParams.MATCH_PARENT,
            null, 0, 0, 0);

    m_mapView.setBuiltInZoomControls(true);

    m_mapView.setMultiTouchControls(false);     

    mapController = this.m_mapView.getController();
    mapController.setZoom(MAP_DEFAULT_ZOOM);
    m_mapView.getController().setCenter( new GeoPoint(MAP_DEFAULT_LATITUDE, MAP_DEFAULT_LONGITUDE));

    m_mapView.invalidate();

    contentLayout.addView(m_mapView,mapParams); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:44:37.170

我真的很想帮助你，因为你的帖子帮助我解决了以编程方式显示 osmdroid 地图的问题：我像你一样将地图视图添加到线性布局，但没有像你一样包含布局参数，地图即将到来空白。谢谢！

我认为您的问题是您没有指定***tile source***。这是我使用的代码，它成功绘制了地图。它与你的相同，除了添加一个平铺源，用值替换你的常量，以及将你的变量名 mapController 更改为 m_mapController，我假设它的定义与你的 mapView 相同。我只是不想让任何人认为它是在方法中定义的并且没有显示。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LinearLayout contentLayout = (LinearLayout) findViewById(R.id.contentLayout);
    m_mapView = new MapView(this, 10);
    m_mapView.setTileSource(TileSourceFactory.MAPNIK);
    org.osmdroid.views.MapView.LayoutParams mapParams = new org.osmdroid.views.MapView.LayoutParams(
            org.osmdroid.views.MapView.LayoutParams.MATCH_PARENT,
            org.osmdroid.views.MapView.LayoutParams.MATCH_PARENT,
            null, 0, 0, 0);
    m_mapView.setBuiltInZoomControls(true);
    m_mapView.setMultiTouchControls(false);     
    m_mapController = this.m_mapView.getController();
    m_mapController.setZoom(15);
    m_mapView.getController().setCenter( new GeoPoint(51496994, -134733));
    m_mapView.invalidate();
    contentLayout.addView(m_mapView, mapParams);
} 
```

当我开始使用 osmdroid 时，我使用了这个[有用的页面](https://stackoverflow.com/a/5327788/2050917)，当我自己修改杂草时，它可以很好地检查。

我希望这会有所帮助...再次感谢您提供给我的提示！

# solr - Solr 自定义排名

> ID：15968209
> 
> 赞同：0
> 
> 时间：2013-04-12T09:52:28.830
> 
> 标签：solr, lucene, full-text-search, sphinx

使用 Sphinx，我可以以任何我想要的方式对文档进行排名。

```
SELECT *
FROM someIndex
WHERE MATCH('foo bar')
OPTION ranker=expr('<any rank expression>') 
```

如何使用 Solr 实现相同的行为？是`{!boost q=<some_boost_expression>}`唯一的方法吗？例如，我需要词数越多的文档得分越高：

```
A: foo bar blah blah blah
B: foo bar 
```

`foo bar`我需要 A 与查询更相关。现在B有更高的分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:04:20.743

您可以应用 boost 函数（bf 属性）以比简单的查询词 boost 更复杂的方式自定义您的评分。这在[DisMax 查询解析器](http://wiki.apache.org/solr/DisMaxQParserPlugin#bf_.28Boost_Functions.29)中可用，并且如您所料，在[Extended dismax 查询解析器中进一步扩展](http://wiki.apache.org/solr/ExtendedDisMax#bf_.28Boost_Function.2C_additive.29)

[规范](http://wiki.apache.org/solr/FunctionQuery#norm)是您通常期望找到有关字段长度的现成信息的地方，尽管它将与找到的任何字段级别提升相结合，并且您的逻辑（更重地权衡较长的字段）与默认值相反得分。除非您创建自定义相似度，否则这将使支持字段提升和逻辑变得困难。顺便说一句，规范存储在索引时，而不是在查询时计算，如果您决定采用该路线。

# safari - Safari 扩展首次运行和更新

> ID：15968213
> 
> 赞同：2
> 
> 时间：2013-04-12T09:52:30.680
> 
> 标签：safari, safari-extension

[Chrome 中相同任务](https://stackoverflow.com/questions/2399389/chrome-extension-first-run)的解决方案运行良好，但有一个例外。似乎 Safari 没有清理它`localStorage`然后卸载扩展，因此任何后续安装相同版本的扩展都不会创建`onInstall`“事件”。在 Safari 中是否有任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:31:18.927

尝试使用`safari.extension.settings`而不是`localStorage`.

# android - Titanium应用程序关闭并随机关闭

> ID：15968214
> 
> 赞同：0
> 
> 时间：2013-04-12T09:52:30.670
> 
> 标签：android, geolocation, titanium, appcelerator

我已经在 Android 2.3.6 和 4.1.2 上确认了这一点。不能说我在 iOS 上做过（还没有对其进行扩展测试）。但这是交易：

我有一个应用程序，它将它的当前坐标发送到一个 php 服务，该服务将它保存到一个 mysql 数据库并作为结果将响应（通常为 1）发送回应用程序。它以 5 秒的间隔执行此操作，并以我想要的方式执行此操作。所以基本上这个应用程序做得很好。然而; 如果我稍等片刻，整个应用程序就会随机关闭。它在 9 小时和 3 小时后发生在我身上，没有真正的理由这样做。电话基本上只是固定在我的桌子上。

钛应用程序是否有任何已知问题在没有崩溃报告/警告的情况下关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:36:25.527

我想您可能违反了移动操作系统的运行方式。也许你有内存泄漏并且设备/模拟器看到你的应用程序吃掉了所有的内存并强制关闭它。我不确定设备上有哪些日志可以通知您刚刚发生的事情。也许您会看到应用程序已被设备关闭，并说明原因。

你有没有分析过你的应用程序？我要猜测内存泄漏。

# codeigniter - 在codeigniter中访问结果数组

> ID：15968219
> 
> 赞同：0
> 
> 时间：2013-04-12T09:52:41.100
> 
> 标签：codeigniter, codeigniter-2

我的模型中发生了以下情况：

```
public function load_user_menu($username)
    {
        $this->db->select('*');
        $this->db->from('menu');
        $this->db->where('username', $username);
        $query = $this->db->get();
        return $query->result();
    } 
```

以及我的控制器中的以下内容：

```
public function index()
    {     
        /*If user previously logged in and not logged out, username remains in session.
            load username and load profile data. 
        */
        //check if user logged in or not
        if(($this->session->userdata('username')!=""))
        {
            //load data from model
            $profile = array();
            $username = $this->session->userdata('username');
            $result = $this->profileModel->user_profile($username);
             foreach($result as &$value)
              {
                  $profile['userdetails'] = $value;
              }
            $this->load->view('profile', $profile);
        }else{
            //redirect to login function
            $this->login();
        }
    } 
```

但我在个人资料视图上遇到错误。我确定我访问它们是错误的，因为我正在这样做：

```
<? echo $userdetails['profilepic']; ?> 
```

除了这个错误，什么都没有显示：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：试图获取非对象的属性
> 
> 文件名：控制器/profile.php
> 
> 行号：60

这是肯定的，因为访问错误。如何根据上述内容访问详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:57:21.793

假设您有`profilepic`内部 userdetails 并看到您试图获取非对象属性的错误，这意味着

```
 <? echo $userdetails['profilepic']; ?> 
```

应该

```
 <? echo $userdetails->profilepic; ?> 
```

因为您将结果作为对象而不是数组

```
return $query->result(); 
```

或者你把它改成

```
return $query->result_array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:58:35.727

`$query->result();`产生一个对象； `$query->result_array();`给你一个数组

两者都可以，取决于您的需求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T10:28:18.053

- 控制器中不需要 foreach 循环，因为

```
$result = $this->profileModel->user_profile($username);
             foreach($result as &$value)
              {
                  $profile['userdetails'] = $value;
              } 
```

- 试试这个。

```
$profile['userdetails'] = $this->profileModel->user_profile($username); 
```

- 要在视图中访问，请将其用作

```
echo $userdetails->profilepic; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-13T07:56:00.853

只需在您的查看页面上试试这个

```
<? echo $profilepic; ?> 
```

# javascript - 使用 css 和 jquery 切换 html 按钮

> ID：15968221
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:52:45.290
> 
> 标签：javascript, jquery, css, html

我想使用 css 在 html 中创建两个切换按钮。我想要它，这样当我单击一个时，它会保持推入，而另一个则处于正常位置。两者都会发生同样的情况，反之亦然。

如果没有办法只使用 HTML 和 css。有没有办法使用 jQuery 或 javascript 来做到这一点？

考虑两个按钮。TEST 和 LIVE，

如何做到以上相同，我可以得到帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:58:25.287

您可以使用 JQuery[切换](http://api.jquery.com/toggle/)功能并使用 css。

或者，您可以使用一种更简单的方法，使用看起来与工具按钮完全一样的JQuery ( [checkbox )。](http://jqueryui.com/button/#checkbox)如果您执行此选项，则在单击复选框时，您可以检查它是否被选中并像这样更改它的文本

```
if($('#chk1').is(':checked')){
  $('#chk1').text('test');
}else{
  $('#chk1').text('live');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:59:33.080

通过快速谷歌，这里有一个类似的过去 Stackoverflow 问题： [如何创建切换按钮？](https://stackoverflow.com/questions/309081/how-do-you-create-a-toggle-button)

# javascript - addEventListener 在 Chrome 中不起作用

> ID：15968224
> 
> 赞同：7
> 
> 时间：2013-04-12T09:52:48.233
> 
> 标签：javascript, google-chrome, dom, javascript-events

我正在关注 Lynda.com 上有关新 DOM 事件模型的教程。

这是我正在使用的代码。

```
function addEventHandler(oNode, sEvt, fFunc, bCapture){

if (typeof (window.event) != "undefined")
    oNode.attachEvent("on" + sEvt, fFunc);
else
    oNode.addEventListener(sEvt, fFunc, bCapture);
}

function onLinkClicked(e){
alert('You clicked the link');
}

function setUpClickHandler(){
addEventHandler(document.getElementById("clickLink"), "click", onLinkClicked, false);
}

addEventHandler(window, "load", setUpClickHandler, false); 
```

我将其添加到此链接上的点击事件中

```
<a href="#" title="click me" id="clickLink">Click Me!</a> 
```

它在 IE、Firefox、Opra 中运行良好，但在 Chrome 中却不行。我环顾四周，但还没有找到任何具体的东西。一些类似的问题，但它没有回答我的问题。

我从 Chrome 控制台收到以下错误

```
Uncaught TypeError: Object [object HTMLAnchorElement] has no method 'attachEvent' 
```

任何建议或答案的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:56:55.573

你为什么要测试：

```
if (typeof (window.event) != "undefined") 
```

...为了决定是否使用`attachEvent()`？Chrome 确实定义`window.event`了，因此您的代码会尝试使用`attachEvent()`未定义的。

尝试直接测试该方法：

```
if (oNode.attachEvent)
    oNode.attachEvent("on" + sEvt, fFunc);
else
    oNode.addEventListener(sEvt, fFunc, bCapture); 
```

# c++ - 使用行为不同的引用返回 tmp

> ID：15968226
> 
> 赞同：0
> 
> 时间：2013-04-12T09:52:57.637
> 
> 标签：c++, reference

我知道使用引用返回临时变量不起作用，因为临时对象在函数终止后丢失，但以下代码有效，因为返回的临时对象被分配给另一个对象。

我假设临时对象在函数调用行之后被销毁。如果是这样，为什么这不适用于这种方法链接？

```
Counter& Counter::doubler()
{ 
   Counter tmp;
   tmp.i = this->i * 2;
   return tmp;
}

int main()
{
    Counter d(2);
    Counter d1, d2;
    d1 = d.doubler();                            // normal function call
    std::cout << "d1=" << d1.get() << std::endl; // Output : d1=4 
    d2 = d.doubler().doubler();                  // Method chaining
    std::cout << "d2=" << d2.get() << std::endl; // Output : d2=0 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:55:42.690

如果函数返回对本地对象的引用，则该对象将在函数返回后立即销毁（与本地对象一样）。它不会*持续*到函数调用的行尾。

在对象被销毁后访问它会产生不可预知的结果。对于“工作”的某些定义，有时它可能会起作用，有时它可能不会。只是不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:55:33.393

```
Counter& doubler()
{ 
Counter tmp;
tmp.i=this->i*2;
return tmp;
} 
```

这是未定义的行为。从函数返回后-您的引用将悬空，因为`Counter`将为 local object 调用析构函数`tmp`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:00:45.890

真正的问题不是“为什么这种方法链接不起作用？”，而是“为什么第一个（'正常'）函数调用有效？”

答案是没办法说，因为它还不如破坏你的程序。

明确地说：通过引用返回临时对象是未定义的行为。当然，这意味着它今天可能会巧合，明天就会停止工作。所有的赌注都取消了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:21:41.057

其他都很好，因为“只是不要摆弄对本地对象的引用”

但至于为什么它在一种情况下有效，而在另一种情况下无效

1.  当你单独调用它时，当函数返回时，对象仍然躺在堆栈上。授予一个“已破坏”的对象 - 但该对象过去占用的空间仍然存在于堆栈中。如果你有一个简单的对象，比如只有一个 int 成员，那么堆栈上不会有任何干扰，除非你在堆栈上分配了其他东西，或者析构函数决定做一个彻底的工作并删除一个整数成员（大多数析构函数不这样做）。授予 yada yada，但直到下一行不会发生太多将其从堆栈中移出的情况。您的引用指向一个有效的内存位置，并且您的（被破坏的）对象将在那里。这就是为什么它对你有用。

2.  当您将其称为链式调用时，请参阅第一个调用会返回对堆栈上该 tmp 的引用。正如上面#1 中所解释的，到目前为止没有问题。您的（破坏的） tmp 仍然在堆栈中。但是请注意您调用第二个加倍器的那一刻。第二个 doubler 函数调用中的 tmp 将出现在哪里？就在您第一次通话的 tmp 所在的位置！！！第二次调用用值为 0 的 tmp（默认构造的）覆盖对象（值为 4 的 tmp）。第二次调用实际上是在具有 0 值的 Counter 上进行的，因此您得到 0。非常棘手 - 这就是为什么忘记摆弄返回对局部变量的引用的原因。

现在纯粹主义者可能会尖叫 - 未定义，不，不，只是不这样做 - 我和他们在一起 - 我自己说过两次（现在三次）不这样做。但人们可以尝试一下。我打赌像下面这样的“简单”对象，并且代码与问题中的完全相同（以免干扰堆栈），每个人都会得到一致的 4, 0 - 没有随机性，没有未定义......

```
class Counter
{
public:
    Counter()
    {
        i = 0;
    }
    Counter(int k)
    {
        i = k;
    }
    int get()
    {
        return i;
    }
    int i;
    Counter& doubler();
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T10:04:00.060

当函数返回并发生堆栈回滚时，它是逻辑回滚，堆栈指针设置为不同的值。如果一个函数返回一个局部变量引用，那么指向本地的内存位置可能仍然在进程中并且具有相同的位设置。但是，这并不能保证，并且在多次调用之后将无效并且可能导致未定义的行为。

# sql-server - 具有 C# 枚举值的 SQL Server 存储过程

> ID：15968227
> 
> 赞同：1
> 
> 时间：2013-04-12T09:52:57.837
> 
> 标签：sql-server, stored-procedures, enums

我正在为我的应用程序编写一些存储过程。在 C# 代码中，我有很多枚举。举个例子：

```
public enum Status
{
    Active = 1
    Inactive = 2
} 
```

现在，当我编写存储过程时，有没有办法在数据库中复制枚举？我想避免使用一张桌子来保存它们，但我想知道你是否可以将它们全部塞进某个对象中，并在其他存储过程中引用它？

所以我希望我的存储过程使用以下样式：

```
SELECT *
FROM Users
WHERE status = Status.Active 
```

而不是像这样使用原始数值：

```
SELECT *
FROM Users
WHERE status = 1 
```

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T13:22:54.003

事实证明，最好的方法是使用 SQL Server Scalar 函数来完成这项工作，如下所示：

```
ALTER FUNCTION [dbo].[fn_GetEnumValue] 
```

(@enumName varchar(512)) 开始声明时返回 INT @returnVal INT = 0

```
SELECT @returnVal = (
    CASE
        WHEN @enumName = 'Active' THEN 1
        WHEN @enumName = 'Inactive' THEN 2

        ELSE 0
    END
)

RETURN @returnVal 
```

结尾

然后你可以像这样使用它：

```
SELECT * FROM Users WHERE status = dbo.fn_GetEnumValue('Active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:25:58.207

您可以创建一组单行表，每个表代表一个枚举。所以对于用户状态：

```
CREATE TABLE Enum_Status
(
    Active TINYINT NOT NULL DEFAULT 1,
    Inactive TINYINT NOT NULL DEFAULT 2
);
INSERT INTO Enum_Status VALUES( 1 , 2  ); 
```

然后您的 SELECT 语句看起来会很整洁（如果不像 Oracle 中的等效语句那么简洁）：

```
SELECT Users.*
   FROM Users, Enum_Status Status
   WHERE status = Status.Active; 
```

为了保持整洁，我很想将枚举表放在它们自己的模式中，并授予所有用户相关权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:03:14.123

As i understand, your aim is to ensure that the value passed to the stored procedure is valid.

You could create a Status table as follows

```
CREATE TABLE Status
(
    StatusID int,
    StatusName nvarchar,
) 
```

insert the valid data here.

Then, in your query, you could do an INNER JOIN to validate.

```
SELECT *
FROM Users
INNER JOIN Status ON Users.status = Status.StatusID
WHERE StatusID = @StatusID 
```

# jsf - 托管 bean 构造函数不会在页面导航中被触发

> ID：15968232
> 
> 赞同：1
> 
> 时间：2013-04-12T09:53:16.463
> 
> 标签：jsf, jspx

我正在使用 MyFaces 1.1.14。我有两个带有 JSF 组件的 JSPX 页面，并且我的托管 bean 在请求范围内。在第一页，bean 构造函数被触发，当我提交表单时，它再次被触发。但是在我的应用导航到新页面后，它并没有被解雇。构造函数应该被调用，对吧？

问题是该页面正在访问 bean 的某些属性——那些 setter 被调用——这没有问题，但为什么不调用构造函数呢？当页面被加载时，我需要从前一个进程（即来自不同的框架）中获取数据。我的理解有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:16:39.930

默认情况下，导航不会触发新的 HTTP 请求。相反，不同的视图被用作当前 HTTP 响应的内容。`<redirect/>`只有当您通过将条目附加到 来进行重定向时，`<navigation-case>`才会创建新的 HTTP 请求。

如果您熟悉JSF 所基于[的基本 Servlet API](https://stackoverflow.com/tags/servlets/info)[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)的概念，您应该完全理解它。

### 也可以看看：

*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366/what-is-the-difference-between-redirect-and-navigation-forward-and-when-to-use-w/11277482#11277482)- 请注意，代码示例针对的是 JSF 2.x，但这些原则同样适用于 JSF 1.x。

# jquery - 如何使用 jquery != 有条件 || 操作员

> ID：15968239
> 
> 赞同：1
> 
> 时间：2013-04-12T09:53:31.357
> 
> 标签：jquery

抱歉，因为这是我今天问的同一类型的问题。但随着前面的问题越来越大，越来越混乱，我不得不单独再问这个问题。我的正文部分有以下代码：

```
<form action="" method="post">
<select id="fruits" name="fruits">
<option>Apple</option>
<option>Mango</option>
<option>Orange</option>
</select>
<select id="color" name="color">
<option>Red</option>
<option>Green</option>
<option>Yellow</option>
</select>
<input type="text" id="result" value="" /> 
```

我想要做什么，如果用户从水果中选择苹果并从第二个下拉菜单中更改颜色，“正确的选择”将出现在#result 输入中。另一方面，如果用户从水果中选择芒果或橙子并更改颜色选项，则值将从#result 输入中清除。所以jquery代码会是这样的：

```
$("#color").change(function() {
if($("#fruits").val()!="Mango" || $("#fruits").val()!="Orange"){
  $("#result").val(""); 
}else{
  $("#result").val("Right Choice"); 
}
}); 
```

但它不起作用。更改任何水果，从#result 输入中清除值。但是，如果我在 if 语句中只使用一个条件，那么它运行良好。

```
$("#color").change(function() {
if($("#fruits").val()!="Mango"){
  $("#result").val(""); 
}else{
  $("#result").val("Right Choice"); 
}
}); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:55:17.853

```
if($("#fruits").val()!="Mango" || $("#fruits").val()!="Orange"){ 
```

如果值为 NOT Mango 或 NOT Orange，则表示**TRUE**的情况。在您的情况下，您应该替换`||`为，`&&`这样如果用户选择 Mango 或 Orange，它将提示`Right Choice`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:55:56.267

用这个

```
 if(($("#fruits").val()!="Mango") && ($("#fruits").val()!="Orange")){
  $("#result").val(""); 
} else{
  $("#result").val("Right Choice"); 
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:56:39.590

改变

```
if($("#fruits").val()!="Mango" || $("#fruits").val()!="Orange"){ 
```

至

```
if( !($("#fruits").val()=="Mango" || $("#fruits").val()=="Orange")){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:55:04.787

如果您希望水果不是芒果和橙子，您可以使用 &&(AND) 代替 OR。

# html - 如何创建可以更改其页面的 iframe

> ID：15968241
> 
> 赞同：0
> 
> 时间：2013-04-12T09:53:34.117
> 
> 标签：html, iframe, hyperlink, href

最好用一个例子来解释：我有一个 main.html、example1.html、example2.html

在 main.html 中，我有两个指向 example1 和 example2 的链接，在链接下方我有一个 iframe 框。有没有办法单击 example1 使其出现在 iframe 框中，当我单击 example2 时，iframe 会更改为那个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:04:00.810

如果我理解正确，您想单击 main.html 中的链接，然后将该链接的 href 加载到 iframe 中？

如果是这样，您不需要 JavaScript 来执行此操作，您可以使用目标属性并命名您的框架，例如

```
<a href="http://www.microsoft.com" target="myFrame">Example 1</a><br />
<a href="http://www.bing.com" target="myFrame">Example 2</a><br />
<br />
<iframe name="myFrame"></iframe> 
```

有关上述工作示例，请在此处查看：http: [//jsfiddle.net/BLG7U/1/](http://jsfiddle.net/BLG7U/1/)

# android - 基于纬度和经度的邻近搜索

> ID：15968245
> 
> 赞同：1
> 
> 时间：2013-04-12T09:53:45.540
> 
> 标签：android, sql, google-maps, google-geocoder, google-geocoding-api

我正在制作一个市场类型的应用程序，用户在其中输入产品详细信息和产品地址，现在我使用 Google Geodcoder 将此地址地理编码为纬度和经度，然后我将此信息处理到 MySql 数据库中。如果我提供用户定义的半径以在附近进行搜索，则邻近搜索将完美无缺。但是，我无法确定我将如何在一个国家的边境处理它。我不希望来自印度的人能够查看来自巴基斯坦的产品，这对我的应用程序来说将是一场灾难，因为两者都处于战争状态。关于如何克服这个问题的任何建议。

我也有其他一些建议：[https ://dba.stackexchange.com/questions/39115/zip-based-search-in-mysql/39138?noredirect=1#comment69710_39138](https://dba.stackexchange.com/questions/39115/zip-based-search-in-mysql/39138?noredirect=1#comment69710_39138)

但是，我想要最好和最有效的方式来做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T07:17:58.730

您可以查看以下 PDF 并了解国家/地区限制，我认为您可以通过在搜索查询中包含***Where Country = 'XCountry'***来将搜索限制在一个国家/地区。

[http://www.arubin.org/files/geo_search.pdf](http://www.arubin.org/files/geo_search.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:01:01.647

您可以在输入地址时记下国家/地区，也可以对纬度/经度进行反向地理编码并从中提取国家。

[https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false](https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false)

# sql - 为每个提取的记录在其他表上计算聚合 - 性能

> ID：15968246
> 
> 赞同：0
> 
> 时间：2013-04-12T09:53:45.933
> 
> 标签：sql, performance, tsql

我正在使用许多连接进行查询。对于一个“加入”的表，有一对多的关联，我需要在这个表上聚合（SUM）。

我在每次查询执行时提取了大约 500 到 1000 条记录。它大约需要 100 到 200 毫秒（它有很多连接）。但是在添加聚合后，它会将执行时间增加到大约 5-6 秒！

我尝试了 2 个解决方案（问题在于最后两列：**SubchargesTo**和**SubchargesFrom**），两者的性能都大大恶化：

第一的：

```
SELECT
            RR.Id,
            Customer.Name AS Customer,
            PrincipalsCustomer.Name AS PrincipalsCustomer,
            EffectiveCarrier.Name AS EffectiveCarrier,
            CAST(CASE RR.isImport WHEN 1 THEN RR.unloadingDateStart ELSE TR.loadingDateStart END AS DATE) AS LoadingUnloadingDate,
            RR.containerNo AS ContainerNumber,
            CASE RR.isImport WHEN 1 THEN PLACEUNLOADING.Name ELSE PlaceLoading.Name END AS LoadingUnloadingPlace,
            Pol.Name AS POL,
            Pod.Name AS POD,
            Commodity.Name AS Commodity,
            RR.Km AS Km,
            RR.pricePerKm AS SalesPricePerKM,
            RR.salesPrice AS SalesPrice,
            RR.purchasePrice AS PurchasePrice
            (SELECT SUM(salesAmount*salesCost) FROM TruckingTobaccoSurcharges WHERE TruckingTobaccoSurcharges.REPORT = RR.Id) +
            (SELECT SUM(incomeAmount*toSBCIncome) FROM TruckingTobaccoSurcharges2 WHERE TruckingTobaccoSurcharges2.REPORT = RR.Id) as SurchargesTo,
            (SELECT SUM(costAmount*costCost) FROM TruckingTobaccoSurcharges WHERE TruckingTobaccoSurcharges.REPORT = RR.Id) +
            (SELECT SUM(costAmount*fromCustomerCost) FROM TruckingTobaccoSurcharges2 WHERE TruckingTobaccoSurcharges2.REPORT = RR.Id) as SurchargesFrom
        FROM Report RR
            JOIN TruckingReport TR ON TR.REPORT = RR.ID
            LEFT JOIN Customer ON RR.CUSTOMER = Customer.ID
            LEFT JOIN PrincipalsCustomer ON RR.PRINCIPALSCUSTOMER = PrincipalsCustomer.ID
            LEFT JOIN EffectiveCarrier ON RR.EFFECTIVECARRIER = EffectiveCarrier.ID
            LEFT JOIN PlaceLoading ON TR.PLACELOADING = PlaceLoading.ID
            LEFT JOIN PlaceUnloading ON RR.PLACEUNLOADING = PlaceUnloading.ID
            LEFT JOIN Pol ON TR.POL = Pol.Id
            LEFT JOIN Pod ON TR.POD = Pod.Id
            LEFT JOIN Commodity ON RR.COMMODITY = Commodity.Id 
```

第二个：

```
SELECT
            RR.Id,
            Customer.Name AS Customer,
            PrincipalsCustomer.Name AS PrincipalsCustomer,
            EffectiveCarrier.Name AS EffectiveCarrier,
            CAST(CASE RR.isImport WHEN 1 THEN RR.unloadingDateStart ELSE TR.loadingDateStart END AS DATE) AS LoadingUnloadingDate,
            RR.containerNo AS ContainerNumber,
            CASE RR.isImport WHEN 1 THEN PLACEUNLOADING.Name ELSE PlaceLoading.Name END AS LoadingUnloadingPlace,
            Pol.Name AS POL,
            Pod.Name AS POD,
            Commodity.Name AS Commodity,
            RR.Km AS Km,
            RR.pricePerKm AS SalesPricePerKM,
            RR.salesPrice AS SalesPrice,
            RR.purchasePrice AS PurchasePrice,
            SUBCH1.sales + SUBCH2.sales AS SurchargesTo,
            SUBCH1.costs + SUBCH2.costs AS SurchargesFrom
        FROM Report RR
            JOIN TruckingReport TR ON TR.REPORT = RR.ID
            LEFT JOIN Customer ON RR.CUSTOMER = Customer.ID
            LEFT JOIN PrincipalsCustomer ON RR.PRINCIPALSCUSTOMER = PrincipalsCustomer.ID
            LEFT JOIN EffectiveCarrier ON RR.EFFECTIVECARRIER = EffectiveCarrier.ID
            LEFT JOIN PlaceLoading ON TR.PLACELOADING = PlaceLoading.ID
            LEFT JOIN PlaceUnloading ON RR.PLACEUNLOADING = PlaceUnloading.ID
            LEFT JOIN Pol ON TR.POL = Pol.Id
            LEFT JOIN Pod ON TR.POD = Pod.Id
            LEFT JOIN Commodity ON RR.COMMODITY = Commodity.Id
            LEFT JOIN ( SELECT REPORT, SUM(salesAmount*salesCost) AS sales, SUM(costAmount*costCost) AS costs
                        FROM TruckingTobaccoSurcharges SR1 GROUP BY SR1.REPORT
                        )AS SUBCH1 ON SUBCH1.REPORT = RR.ID
            LEFT JOIN ( SELECT REPORT, SUM(incomeAmount*toSBCIncome) AS sales, SUM(costAmount*fromCustomerCost) AS costs
                        FROM TruckingTobaccoSurcharges2 SR2 GROUP BY SR2.REPORT
                       )AS SUBCH2 ON SUBCH2.REPORT = RR.ID 
```

有没有更快的方法来达到预期的结果？或者这么多的连接不能真正让它更快？

任何帮助表示赞赏=]

**编辑：**

正如 Nikola Markovinović 建议的那样，在 TruckingTobaccoSurcharges 表上的 Report FK 上添加了索引，使其再次快速（使用解决方案 1）！虽然没有尝试过解决方案2。我仍然想知道我的查询是否会更好，因为正如其他人所说，我不是加入而是子查询......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:07:31.390

你必须意识到你没有加入！
是的，你正在加入，因为到处都有 LEFT JOIN，但实际上不，这不是你的问题。
您正在**子查询**以检索您的总和，这很糟糕，很糟糕，很糟糕。子查询总是比加入慢。

这是一个子查询，而不是一个连接：

```
LEFT JOIN 
( 
    SELECT REPORT, 
           SUM(salesAmount*salesCost) AS sales, 
           SUM(costAmount*costCost) AS costs
    FROM TruckingTobaccoSurcharges SR1 GROUP BY SR1.REPORT
) 
```

因为你是子查询，所以 REPORT 上的索引没有被使用，所以速度很慢。

所以对于你的问题，这应该是可行的：（注意，真正的加入！！）

```
SELECT
    SUM(s.salesAmount * s.salesCost) + SUM(s2.salesAmount * s2.salesCost) AS SurchargesTo,
    SUM(s.costAmount * s.costCost) + SUM(s2.costAmount * s2.fromCustomerCost) AS SurchargesFrom
FROM Report RR
    LEFT JOIN TruckingTobaccoSurcharges s 
        ON s.REPORT = RR.ID
    LEFT JOIN TruckingTobaccoSurcharges2 ss
        ON s.REPORT = RR.ID
GROUP BY s.REPORT 
```

# git - git merge 不会导致某些文件发生冲突或自动合并

> ID：15968250
> 
> 赞同：0
> 
> 时间：2013-04-12T09:53:54.530
> 
> 标签：git

所以我在我的分支上做一个常规`git merge --no-ff --no-commit master`，令我惊讶的是，我知道分支之间不同的一些文件（`git diff --name-status mybranch..master`）没有被列为自动合并或冲突！在解决其他所有冲突后，我可以看到受影响的文件仍然按照“mybranch”...

我正在处理共享的 GitHub 存储库，我所知道的是，该分支之前已与“master”同步，没有问题（但从未将“mybranch”同步为“master”）。这是怎么回事？

我怎样才能解决这种情况，了解真正发生的事情并避免将来出现类似情况？

我的 git`1.7.12.4 (Apple Git-37)`在 OS X 10.8.3 上运行。

**更新：**做一个干净的克隆，会导致同样的问题。

# iphone - 获取图像的缩放坐标

> ID：15968251
> 
> 赞同：1
> 
> 时间：2013-04-12T09:53:54.737
> 
> 标签：iphone, ios, objective-c, ipad, uiimageview

我在 UIImageView 中有一个图像。在我显示弹出的图像中有一个点。现在，当我缩放图像时，显示弹出框的坐标不会根据点而改变，即点在其他地方并弹出其他位置。如何在缩放图像时获取点的坐标。当我不缩放图像时，我得到了正确的坐标，但是当我缩放图像时，我没有得到点的确切坐标。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:12:52.467

您可以使用滚动视图的 scrollview.contentOffset 属性设置它。

例子：

CGPoint p = CGPointMake(x-scroller.contentOffset.x, y-scroller.contentOffset.y);

希望它有效.. !!

# c# - 如何为动态创建的文本框动态触发事件？

> ID：15968255
> 
> 赞同：0
> 
> 时间：2013-04-12T09:54:04.377
> 
> 标签：c#, asp.net

如何为动态创建的文本框动态触发事件？我用过这段代码：

`lab.Click += new EventHandler(lab1_Click);`

但是这段代码不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:47:49.983

**必须在Page_Init**事件中将动态创建的控件重新添加到页面控件层次结构中，并使用与上次添加控件**相同的 ID**。

然后只有 ASP.NET 框架会将回发数据（在您的情况下将包含 TextChange 的数据）和挂钩控制以及事件与其事件处理程序相匹配。否则什么都不会发生

查看这篇文章了解详情

[http://support.microsoft.com/kb/317515](http://support.microsoft.com/kb/317515)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:35:39.273

.net 不允许文本框上的单击事件。如果您希望在文本框失去焦点时触发该事件，您可以使用“lab_validate()”事件。

TextBox还有很多其他的事件可以选择你觉得合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:52:49.720

lab.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));

# ios - NSURLconnection 的重复请求

> ID：15968256
> 
> 赞同：0
> 
> 时间：2013-04-12T09:54:05.757
> 
> 标签：ios, cocoa, ios5, https

我正在使用 NSURLConnection 在端口 443 连接服务器进行身份验证。仅对于 BAD 凭据，它会发出两个请求，即使我只提出了一个请求。我通过使用嗅探器记录服务器和模拟器/设备进行调试。

但我只打了一次电话，只得到一个回复​​。我在模拟器/iphone/ipad 中使用 NSLog 对其进行了调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:48:11.193

固定的。如果您使用的是 NSOperationQueue，请将 maxConcurrentOperationCount 设置为 1。这样就可以了。

# c# - c#中的东西函数实现

> ID：15968273
> 
> 赞同：8
> 
> 时间：2013-04-12T09:55:03.437
> 
> 标签：c#, .net, tsql

我需要知道 c# 是否有任何等于 sql function的函数[`stuff`](http://msdn.microsoft.com/en-us/library/ms188043.aspx)，它根据给定的开始和长度将输入字符串替换为原始字符串。

为添加示例而编辑：

```
select stuff('sad',1,1'b')

select stuff(original string, start point, length,input string) 
```

输出将是`"bad".`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T09:58:13.163

将[String.Insert()](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)函数与 String.Remove() 函数一起使用

```
"abc".Remove(1, 1).Insert(2, "XYZ") // result "aXYZc" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T10:06:15.933

没有内置方法可以做到这一点，但您可以编写一个扩展方法：

```
static class StringExtensions
{
    public static string Splice(this string str, int start, int length,
                                string replacement)
    {
        return str.Substring(0, start) +
               replacement +
               str.Substring(start + length);
    }

} 
```

用法是这样的：

```
string sad = "sad";
string bad = sad.Splice(0, 1, "b"); 
```

请注意，C# 中字符串中的第一个字符是数字 0，而不是 SQL 示例中的 1。

如果您愿意，当然可以调用该方法`Stuff`，但可以说`Splice`名称更清晰一些（尽管它也不经常使用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:06:15.200

你可以做一个扩展方法，结合`string.replace`和`string.insert`

```
public static string Stuff(this string str, int start , int length , string replaceWith_expression)
{
    return str.Remove(start, length).Insert(start, replaceWith_expression);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:06:59.450

C# 中没有这样的函数，但是你可以很容易地编写它。请注意，我的实现是从零开始的（第一个字符的索引为 0）：

```
string input = "abcdefg";
int start = 2;
int length = 3;
string replaceWith = "ijklmn";
string stuffedString = input.Remove(start, length).Insert(start, replaceWith);
// will return abijklmnfg 
```

您还可以编写一个扩展方法，这样可以更轻松地使用该函数：

```
public static class StringExtensions
{
    public static string Stuff(this string input, int start, int length, string replaceWith)
    {
        return input.Remove(start, length).Insert(start, replaceWith);
    }
} 
```

用法：

```
string stuffed = "abcdefg".Stuff(2, 3, "ijklmn"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-28T13:49:39.110

再举个 Thorarin 的例子，这个函数将处理超出范围的输入和空字符串。

```
 /// <summary>
    /// combines 2 strings by inserting the replacement string into the original 
    /// string starting at the start position and will remove up to CharsToRemove 
    /// from the original string before appending the remainder.
    /// </summary>
    /// <param name="original">original string to modify</param>
    /// <param name="start">starting point for insertion, 0-based</param>
    /// <param name="charstoremove">number of characters from original string to remove</param>
    /// <param name="replacement">string to insert</param>
    /// <returns>a new string as follows:
    /// {original,0,start}{replacement}{original,start+charstoremove,end}
    /// </returns>
    /// <example>
    /// "ABC".Split(1,1,"123") == "A123C"
    /// </example>
    public static string Splice(this string original, int start, int charstoremove,
                                string replacement)
    {
        // protect from null reference exceptions
        if (original == null)
            original = "";
        if (replacement == null)
            replacement = "";

        var sb = new StringBuilder();
        if (start < 0)
            start = 0;

        // start is too big, concatenate strings
        if (start >= original.Length)
        {
            sb.Append(original);
            sb.Append(replacement);
            return sb.ToString();
        }

        // take first piece + replacement
        sb.Append(original.Substring(0, start));
        sb.Append(replacement);

        // if new length is bigger then old length, return what we have
        if (start+charstoremove >= original.Length)
            return sb.ToString();

        // otherwise append remainder
        sb.Append(original.Substring(start + charstoremove));
        return sb.ToString();
    } 
```

# java - 如何删除 cookie

> ID：15968276
> 
> 赞同：3
> 
> 时间：2013-04-12T09:55:12.133
> 
> 标签：java, jquery, servlets, cookies, logout

我正在尝试为我的 iPhone 应用程序实现注销功能，该应用程序在客户端使用 jQuery 移动、JS，在服务器端使用 java。目前我要做的是清除cookie并重定向到我的index.html中的#loginpage标签（我只有1个HTML文件，其中不同页面有多个标签）。我现在为 clearCookie 做的是：

```
Cookie readCookie = null;
for (Cookie cookie : httpRequest.getCookies()) {
    if (cookie.getName().equals("CookieForLogin")) {
        readCookie = cookie;
        break;
    }
}

readCookie.setMaxAge(0);
httpResponse.addCookie(readCookie); 
```

但是这段代码并没有清除 cookie。我已经尝试过 JS 方法，即将到期日期设置为以前的某个日期，在网上给出，但它们也不起作用。我也没有响应方法`HttpServletResponse`。如何清除在客户端设置的 cookie 以及如何重定向到特定标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:34:08.557

Cookie 与特定路径相关联。您需要确保在删除 cookie 期间设置与创建 cookie 期间相同的路径。它默认为 URL 中当前请求的文件夹（因此只能在同一文件夹或其所有子文件夹中使用）。您最好明确指定路径，否则它将取决于 URL 中当前请求的文件夹。cookie 路径信息类似于请求 cookie 标头中不可用的 maxage。

假设您按如下方式创建了 cookie，

```
Cookie cookie = new Cookie("CookieForLogin", cookieForLogin);
cookie.setPath("/somePath");
cookie.setMaxAge(maxAgeInSeconds);
// ...
response.addCookie(cookie); 
```

它需要按如下方式删除：

```
Cookie cookie = new Cookie("CookieForLogin", null);
cookie.setPath("/somePath");
cookie.setMaxAge(0);
// ...
response.addCookie(cookie); 
```

这`/somePath`只是示例。您也可以只使用`/`，只要在两种情况下都相同。

请注意，这同样适用于 cookie 的[Secure](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setSecure%28boolean%29)和[HTTP-only](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setHttpOnly%28boolean%29)标志。如果您最初`true`在 cookie 创建期间将其设置为，那么您也应该`true`在 cookie 删除期间将其设置为，即默认为`false`.

也就是说，我不确定将登录用户存储为 cookie 有什么用处。您基本上还允许最终用户操纵其价值。而是将登录用户存储为会话属性并`session.invalidate()`在注销时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-03T22:11:14.573

> `void setMaxAge(int expiry)`

我们可以使用方法删除cookie，称为`setMaxAge()`

```
Cookie c = new Coookie("x", "10"); 
```

如果将 maxage 设置为 0

```
c.setMaxAge(0); //it causes the cookie to be deleted. 
```

如果将 maxage 设置为负值

```
c.setMaxAge(-1);
// cookie is not stored persistently and will be deleted end of the browsing session. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:29:01.380

获取最大年龄

public int getMaxAge() 获取此 Cookie 的最大年龄（以秒为单位）。默认返回-1，表示cookie会一直持续到浏览器关闭。

返回： 一个整数，指定 cookie 的最大年龄（以秒为单位）；如果为负，则表示 cookie 一直存在到浏览器关闭另请参见：setMaxAge(int)

//Java API 文档

简而言之，您需要设置 cookie 年龄：

```
A negative value means that the cookie is not stored persistently and will be deleted when the Web browser exits. 
A zero value causes the cookie to be deleted.

 Cookie killMyCookie = new Cookie("mycookie", null);
 killMyCookie.setMaxAge(0);
 killMyCookie.setPath("/");
 response.addCookie(killMyCookie); 
```

# php - 使用复选框值制作 URL。mvc模式

> ID：15968285
> 
> 赞同：0
> 
> 时间：2013-04-12T09:55:25.240
> 
> 标签：php, javascript, jquery, arrays, checkbox

我面临以下问题。我有一个用户概览，我希望可以删除多个用户。因此，如果我检查用户 1（用户 ID 1）和用户 2（用户 ID 2），他们都会删除。

我想在我的 URL 中设置它，例如：`localhost/cms/users/multipledelete/1&2`，所以使用 &.

当我把那个 url 放在我的浏览器中时，我的删除工作已经完成。在我的javascript中，我有以下代码：

```
 $('.checkbox').click(function() {
    if($(".checkbox").length == $(".checkbox:checked").length) {
            $("#checkall").prop('checked', this.checked);
        } else {
            $("#checkall").removeAttr("checked");
        }                     
}); 
```

在我的索引中，我设置了以下代码：

```
<td>
<input type="checkbox" class="checkbox" name="check_list[]" value="<?php echo $user->id; ?>"/>
</td>
<td> ....... </td> 
```

在我的概览下方，我想将 url 设置为：multipledelete/1&2

```
 <a href="<?php echo $this->url('zfcadmin/user', array('action'=>'multipledelete', 'id'=>'1&2'));?>">
                   <i class="icon-trash"></i>
              </a> 
```

所以 1&2 在哪里，我想要当前选中的复选框。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:08:13.410

您需要使用 JavaScript 来生成`1&2`字符串。像这样的东西（用 jQuery 编写）应该可以工作：

```
$('.checkbox:checked').map(function() {
    return this.value;
}).get().join('&'); 
```

打破它：

*   `$('.checkbox:checked')`选中`checked`复选框；
*   `.map(function() { return this.value; })`生成一个包含其值数组的 jQuery 对象；
*   `.get()`将其作为实际数组返回
*   `.join('&')`返回一个字符串，将数组的每个元素与`&`

我创建了一个基本的[jsFiddle 演示](http://jsfiddle.net/SEKuY/)，因此您可以看到上面的结果。

现在您需要在单击链接时调用它（可能最好给它一个`id`或`class`以便您可以选择它），以便它根据检查的内容是动态的：

```
$('#anchor-id').click(function(e) {
    e.preventDefault(); // don't follow the link
    var idString = $('.checkbox:checked').map(function() {
        return this.value;
    }).get().join('&');
    window.location.href = this.href + idString;
}); 
```

您将标签的`href`属性`<a>`设为静态部分，因此`localhost/cms/users/multipledelete/`.

# collections - 使用泛型创建集合对象

> ID：15968292
> 
> 赞同：11
> 
> 时间：2013-04-12T09:55:43.067
> 
> 标签：collections, java

当我尝试创建如下对象时：

```
Map<Integer, Map<String, Integer>> myMap = new HashMap<Integer, HashMap<String, Integer>>(); 
```

语法上有什么问题，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T09:58:07.107

泛型不是协变的。您可以使用：

```
Map<Integer, Map<String, Integer>> myMap = new HashMap<Integer, Map<String, Integer>>();
^                                                                ^
--------------^------------------- becomes ------^               |
              -----------------must remain as type --------------- 
```

虽然`Map`赋值的左外侧可以“变成” a`HashMap`赋值，但同样不能应用于作为泛型参数出现的任何类型。

编辑：

正如@Keppil 所述，您可以使用有界通配符语法：

```
Map<Integer, ? extends Map<String, Integer>> myMap = new HashMap<Integer, HashMap<String, Integer>>(); 
```

请注意，此语法不允许将条目添加到映射中，但可用作传入和传出方法的类型。

一些参考资料：

*   [协方差](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)
*   [泛型陷阱](https://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)
*   [通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-12T09:57:30.957

这是类似的错误

```
List<Animal> list = new ArrayList<Dog>(); 
```

参数化类型在两端应该是相同的类型。没有继承 (IS-A) 概念。如果您仍想使用它，请使用带扩展/超级关键字的通配符（？），该关键字仅允许在等号的左侧使用。

```
List<Animal> list = new ArrayList<Dog>(); // is not allowed 
```

但

```
Animal[] animal = new Dog[10];  //is allowed
animal[0] = new Dog(); // is allowed 
```

`Cat`如果有人试图添加（扩展动物）对象，它稍后会失败并抛出异常。

```
animal[1] = new Cat();  //compiles fine but throws java.lang.ArrayStoreException at Runtime. 
```

记住*`animal[1]`*或者*`animal[index]`*是抱着`reference`狗。所以`Dog`引用变量可以引用`Dog`对象而不是`Cat`对象。

所以为了避免这种情况，JSL 在泛型列表/集合中做了这样的改变。此答案也适用于您的问题（`Map`）。
参数化类型在两端应该是相同的类型。

```
List<Animal> list = new ArrayList<Animal>(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-12T09:59:07.543

尝试这个

```
Map<Integer, ? extends Map<String, Integer>> myMap = new HashMap<Integer, HashMap<String, Integer>>(); 
```

用一个更简单的例子解释起来更容易

```
Set<Number> set = new HashSet<Integer>(); 
```

是不允许的，因为这样你就可以向整数的 HashSet 添加一个 Double

```
set.add(1.0) 
```

注意

```
Set<? extends Number> set = new HashSet<Integer>(); 
```

`null`除了添加到集合之外，不允许添加任何内容。但你只能从中读取数字

您可以在这里找到更多信息[http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-12T09:58:56.697

你需要这样的东西：

```
Map<Integer, Map<String, Integer>> myMap = new HashMap<Integer, Map<String, Integer>>();
myMap.put(1, new HashMap<String, Integer>()); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-12T10:03:01.577

`Map<String, Integer>`不一样`HashMap<String, Integer>`。那就是问题所在。

实际上 HashMap 实现了 Map 接口。所以它应该`? extends Map<String, Integer>`在左侧

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-12T09:58:29.943

尝试这个：

```
Map<Integer, HashMap<String, Integer>> myMap = new HashMap<Integer, HashMap<String, Integer>>(); 
```

# asp.net-mvc-4 - 在 MVC 中的视图中显示时将整数值替换为字符串

> ID：15968299
> 
> 赞同：0
> 
> 时间：2013-04-12T09:55:57.433
> 
> 标签：asp.net-mvc-4

我有这样的看法：

```
@model IEnumerable<PMS.Models.Activity_Contractor>

@{
ViewBag.Title = "Index";
Layout = "~/Views/Shared/_LayoutPageArchitect.cshtml";
  }

 <h2>Index</h2>

 <p>
   @*@Html.ActionLink("Create New", "Create")*@
  </p>
<table>
<tr>
     @*<th>
        @Html.DisplayNameFor(model => model.A_C_ID)
    </th>*@

    <th>
        @Html.DisplayName("ProjectName")
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ProjectActivityMaster.ActivityName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ContractorMaster.ContractorName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.IsActive)
    </th>
  @*  <th>
        @Html.DisplayNameFor(model => model.CreatedBy)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.CreatedON)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.UpdatedBy)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.UpdatedON)
    </th>*@
    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    @*<td>
        @Html.DisplayFor(modelItem => item.A_C_ID)
    </td>*@
    <td>
        @Html.Label("Project")
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ProjectActivityMaster.ActivityName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ContractorMaster.ContractorName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.IsActive)
    </td>
   @* <td>
        @Html.DisplayFor(modelItem => item.CreatedBy)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CreatedON)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UpdatedBy)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UpdatedON)
    </td>*@
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.A_C_ID  }) |
        @Html.ActionLink("Details", "Details", new { id=item.A_C_ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.A_C_ID })
    </td>
     </tr>
}

 </table> 
```

我的 item.IsActive 值曾经是 1/0 我想将其视为 True if 1 和 False id 0。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:22:14.057

> 我的 item.IsActive 值曾经是 1/0 我想将其视为 True if 1 和 False id 0。我该怎么做？
> 
> 包含 1/0 的 INT

如果您想完全控制可以显示的内容，那么最好使用显示模板。

## 创建模板

`DisplayTemplates`在文件夹下创建一个文件`Shared`夹，如果还没有的话。然后创建一个名为 的文件`CustomInt.cshtml`，您当然可以选择任何您想要的名称，**除了**那些类似于数据类型的名称（例如 Int、Boolean 等）。然后在模板上你需要有这个：

```
@model System.Int32

@if (Model == 0)
{
    @:True
}
else if (Model==1) {
    @:False
} 
```

## 你如何使用它

然后在您要显示的视图中，`IsActive`您需要执行以下操作：

```
@Html.DisplayFor(m => m.IsActive, "CustomInt") 
```

请注意，我们为 html helper 指定了一个模板名称。

## 陷阱

使用模板时需要非常小心。因为`IsActive`是一个 int 那么它可以有一个除`0`and之外的值`1`。因此，如果该值不是这两个值，则不会打印任何内容。但这不是一个大问题，因为您可以轻松添加另一个`else`并打印错误或其他内容。但我认为你很确定`IsActive`总是有`0`or `1`。

捕获意外值的修改模板：

```
@model System.Int32

@if (Model == 0)
{
    @:True
}
else if (Model==1) {
    @:False
}
else {
    @:What is this value? The system was hacked!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:06:27.260

您可以在视图模型上解析 IsActive 以返回 true 或 false。

```
public class Myviewmodel
{
    public string IsActive { get; set; }

}

public class Mymodel
{
    public bool IsActive { get; set; }
} 
```

然后在将布尔值从模型映射到视图模型时将它们解析为字符串？

提示：尝试使用 NBuilder

# c# - Html.Label 用于使用对象的 DisplayName 而不是属性

> ID：15968305
> 
> 赞同：5
> 
> 时间：2013-04-12T09:56:09.390
> 
> 标签：c#, asp.net-mvc-3, razor

给定这样的视图模型：

```
public class ParentViewModel
{
    public object ChildViewModel { get; set; }
} 
```

如果我`Html.LabelFor`这样使用：

```
@Html.LabelFor(model => model.ChildViewModel) 
```

我会得到这样的输出：

```
<label for="Model_ChildViewModel">ChildViewModel</label> 
```

我真正想要的是生成的标签使用`DisplayName`应用于对象 EG 的属性

```
[DisplayName("My Custom Label")]
public class ChildViewModel
{
} 
```

输出为：

```
<label for="Model_ChildViewModel">My Custom Label</label> 
```

我知道该`Html.LabelFor`方法采用一个需要属性的表达式，它将`DisplayName`在该属性而不是对象本身上查找属性。

我创建了一个 Html 辅助方法来实现我想要的，如下所示：

```
public static IHtmlString CreateLabel<TModel>(this HtmlHelper html, Func<TModel, object> func) 
    where TModel : class
    {
        TagBuilder tb = new TagBuilder("label");

        var model = html.ViewData.Model as TModel;
        if (model != null)
        {
            object obj = func(model);
            if (obj != null)
            {
                var attribute = obj.GetType().GetCustomAttributes(
                    typeof(DisplayNameAttribute), true)
                    .FirstOrDefault() as DisplayNameAttribute;

                if (attribute != null)
                {
                    tb.InnerHtml = attribute.DisplayName;
                    return MvcHtmlString.Create(tb.ToString());
                }
                else
                {
                    tb.InnerHtml = obj.ToString();
                    return MvcHtmlString.Create(tb.ToString());
                }
            }
        }

        tb.InnerHtml = html.ViewData.Model.ToString();
        return MvcHtmlString.Create(tb.ToString());
    } 
```

我的助手没有采用表达式，而是采用 a`Func<TModel, object>`来返回我要检查`DisplayName`属性的对象。

我遇到的第一个问题是当我尝试像这样在 razor 中调用此方法时：

```
@Html.CreateLabel(model => model.ChildObject) 
```

我收到以下错误：

```
The type arguments for method 'CreateLabel<TModel>(this HtmlHelper,
Func<TModel, object>) cannot be inferred from usage. Try specifying
the arguments explicitly.' 
```

所以我改为这样调用方法：

```
 @{ Html.CreateLabel<ChildViewModel>(model => model.ChildObject); } 
```

但没有任何东西被渲染。如果我使用调试器单步执行我的辅助方法，则会生成标签标记，但在呈现我的页面时没有显示任何内容。

所以我的问题是：

*   如何解决此问题以为我的视图生成标签？
*   我必须做什么才能推断出泛型参数？
*   有没有办法编写 Html 助手来做同样的事情，但使用表达式？我没有使用表达式的经验，所以不知道从哪里开始。

**更新**

我想我会发布最终代码，因为我做了一些小改动。首先，我查看了 MVC 源代码中的帮助程序，并决定根据提供的示例将该方法拆分为三个单独的方法。我还删除了所有`TagBuilder`内容，因为我真正需要的是生成要在`<legend></legend>`标签之间注入的文本。最终代码如下。再次感谢 Sylon 帮助我解决这个问题。

```
public static IHtmlString LegendTextFor<TModel, TObject>(this HtmlHelper<TModel> html, Expression<Func<TModel, TObject>> expression)
{
    return LegendTextHelper(html,
        ModelMetadata.FromLambdaExpression(expression, html.ViewData),
        ExpressionHelper.GetExpressionText(expression),
        expression.Compile().Invoke(html.ViewData.Model));
}

private static IHtmlString LegendTextHelper<TModel, TObject>(this HtmlHelper<TModel> html, ModelMetadata metadata, string htmlFieldName, TObject value)
{
    string resolvedLabelText = metadata.DisplayName ?? value.GetDisplayName() ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last();

    if (String.IsNullOrEmpty(resolvedLabelText))
        return MvcHtmlString.Empty;

    return MvcHtmlString.Create(resolvedLabelText);
}

private static string GetDisplayName<T>(this T obj)
{
    if (obj != null)
    {
        var attribute = obj.GetType()
            .GetCustomAttributes(typeof(DisplayNameAttribute), false)
            .Cast<DisplayNameAttribute>()
            .FirstOrDefault();

        return attribute != null ? attribute.DisplayName : null;
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:06:42.087

我刚刚为标签创建了一个自定义 Html 帮助器，它可以满足您的需求：

html助手：

```
public static class HtmlHelperExtensions
{

    public static MvcHtmlString LabelForCustom<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);

        string customDisplayName = null;

       var value = expression.Compile().Invoke(html.ViewData.Model);

       if (value != null)
       {
          var attribute = value.GetType().GetCustomAttributes(typeof(DisplayNameAttribute), false)
           .Cast<DisplayNameAttribute>()
           .FirstOrDefault();

           customDisplayName = attribute != null ? attribute.DisplayName : null;
       }

         string htmlFieldName = ExpressionHelper.GetExpressionText(expression);
        string labelText = metadata.DisplayName ?? customDisplayName ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last();
        if (String.IsNullOrEmpty(labelText))
        {
            return MvcHtmlString.Empty;
        }

        TagBuilder tag = new TagBuilder("label");
         tag.Attributes.Add("for", html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(htmlFieldName));
        tag.SetInnerText(labelText);
        return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
    }
} 
```

我的示例模型：

```
public class Parent
{
    public object Child { get; set; }
}

[DisplayName("yo")]
public class Child 
{
   public int Id { get; set; }
} 
```

看法：

```
@Html.LabelForCustom(m => m.Child)  @*prints yo*@ 
```

# excel - Excel 网格——Qt 中的类

> ID：15968306
> 
> 赞同：1
> 
> 时间：2013-04-12T09:56:12.480
> 
> 标签：excel, qt

我正在 Qt 上制作一个能够从 CAN 总线接收消息的工具。现在我需要将这些消息显示到类似 Excel 的网格上。

![例子](https://i.stack.imgur.com/KHHoh.jpg)

请建议可以为此使用哪一类 Qt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:00:08.863

我会选择[QTableWidget](http://qt-project.org/doc/qt-4.8/qtablewidget.html) / [QTableView](http://qt-project.org/doc/qt-4.8/qtableview.html)。

您可以使用 Qt 样式表来自定义此小部件：[如何通过样式表自定义 QTableWidget？](https://stackoverflow.com/questions/5418304/how-to-customize-qtablewidget-through-qt-stylesheet)

# jquery - 选中复选框后移动 div

> ID：15968310
> 
> 赞同：0
> 
> 时间：2013-04-12T09:56:18.710
> 
> 标签：jquery, checkbox, css-selectors

我正在尝试实现电梯功能[有 6 个楼层，
每个楼层对应，有一个复选框。根据选中的复选框，电梯
会移动到该楼层。

但是该功能似乎无法正常工作。

这是我的带有嵌入式 jquery 脚本的 HTML 标记：

```
<!DOCTYPE html>
    <html>
        <head>
            <title>Sample Page</title>
            <link rel="stylesheet" type="text/css" href="main.css">
    <script src="jquery.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">

    $('.container input').change(function(){
    if ($(this).is(':checked')){
            if ($('div.activeDiv')[0]) {
           $(".blockdiv>div").removeClass("activeDiv");}
           $(this).closest('.blockdiv .inactiveDiv').addClass("activeDiv");
    }
    });

    </script>
    <style> .blockDiv {   
    width: 60px;
    height: 60px;
    background: #0000FF;
    border: 2px solid #000;
}

.activeDiv{
    width: 45px;
    height: 45px;
    background: #FFAC00;
    margin-left: 8px;
    margin-top: 8px;
}
.inactiveDiv{
    background: #0000FF;
}</style>
        </head>
        <body>
            <div>
            <div class="container">
                <div class="blockDiv">
                    <div class="inactiveDiv"></div>
                </div>            
            <input type="checkbox" name="floorCheck" value="fifthFloor"/>
            </div>
            <div class="container">
                <div class="blockDiv">
                    <div class="inactiveDiv"></div>
                </div>
                <input type="checkbox" name="floorCheck" value="fourthFloor"/>
            </div>
            <div class="container">
                <div class="blockDiv">
                    <div class="inactiveDiv"></div>
                </div>
                <input type="checkbox" name="floorCheck" value="thirdFloor"/>
            </div>
            <div class="container">
                <div class="blockDiv">
                    <div class="inactiveDiv"></div>
                </div>
                <input type="checkbox" name="floorCheck" value="secondFloor"/>
            </div>
            <div class="container">
                <div class="blockDiv">
                    <div class="inactiveDiv"></div>
                </div>
                <input type="checkbox" name="floorCheck" value="firstFloor"/>
            </div>
            <div class="container">
                <div class="blockDiv">
                    <div class="activeDiv"></div>
                </div>
                <input type="checkbox" name="floorCheck" value="groundFloor"/>
            </div>
            </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:05:14.067

删除非活动类并添加活动类

尝试这个

```
$(function(){ //this is to call the script only after document is ready
  $('.container input').change(function () {
    if ($(this).is(':checked')) {

      $(".blockDiv > div").removeClass("activeDiv");
      $(this).siblings('.blockDiv').find('.inactiveDiv').addClass("activeDiv");

    }
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:11:59.157

首先将 JS 包装在文档就绪处理程序中，否则它将无法找到您的元素。（或者将脚本移动到正文的末尾。）

然后更新您的 CSS 以在`.activeDiv`之后定义类，`.inactiveDiv`以便如果一个元素具有两个类`.activeDiv`将覆盖`.inactiveDiv`- 这样您就不必担心删除`.inactiveDiv`，您只需添加和删除`.activeDiv`。

然后请注意，您现有的代码`$(this).closest('.blockdiv .inactiveDiv')`将找不到任何东西，因为*遍历*`.closest()`DOM并且元素是复选框的兄弟，而不是父级，因此请使用方法或使用来获取父级，然后返回到块分区。*`.blockDiv``.prev()``.closest('.container')``.find('.blockDiv .inactiveDiv')`*

 *```
 $('.container input').change(function () {
      if (this.checked) {
          $(".blockDiv > div").removeClass("activeDiv");
          $(this).closest('.container').find('.blockDiv .inactiveDiv').addClass("activeDiv");
      }
  }); 
```

演示：http: [//jsfiddle.net/rrCam/](http://jsfiddle.net/rrCam/)

另请注意，这`this.checked`比`$(this).is(':checked')`.*

# jpa-2.0 - 在应用程序之间共享 JPA 实体

> ID：15968312
> 
> 赞同：2
> 
> 时间：2013-04-12T09:56:26.013
> 
> 标签：jpa-2.0, java-ee-6, war

假设有多个 JavaEE 6 应用程序在数据库中使用相同的实体——在它们之间共享 JPA 实体类的最佳方式是什么？

它们应该作为类包含在每个 WAR 中，还是应该在每个 WAR 中都有一个带有实体的 JAR，还是应该单独部署实体？

解决方案是否依赖于服务器？目前我们使用 JBoss 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:29:46.040

我将建议在这种情况下为我实施解决方案：在我的公司中，我们有一个单一的数据库，用于我们正在开发的 ERP 中的所有内容。我们使用通用数据库实施的每个 ERP 模块，都做了什么？很好地实现了一个封装所有数据访问的 EJB MODULE，它包含实体和实体管理器，并通过它完成所有数据访问。这个 EJB 模块作为库添加到每个 ERP 项目中。这样，ERP模块本身就无法访问数据库，整个系统的层次更加清晰，每个ERP项目都专注于实施自己的业务规则。我们使用在事务环境中管理的容器管理实体。吉6。

# php - PHP数组初始化

> ID：15968314
> 
> 赞同：0
> 
> 时间：2013-04-12T09:56:29.863
> 
> 标签：php, arrays, indexing

我有一个 PHP 数组数组。

我正在测试是否设置了索引。如果为 false，我想初始化给定的索引，使其为空集，例如：

```
if( !isset($_SESSION['temp'][$_POST['theindex']]) ){

          $_SESSION['temp'][$_POST['theindex']]=array();

} 
```

我是否必须隐式指定数组的结构，还是可以让它复制索引中其他数组的结构？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:03:49.280

> 我是否必须隐式指定数组的结构，还是可以让它复制索引中其他数组的结构？

恐怕没有数据就无法复制唯一的结构。
所以，如果你有一个空的引用数组——为什么不使用它来初始化呢？

# asp.net-mvc - 在 MVC dotnet 中，模型类名称是否必须与数据库名称相同？

> ID：15968315
> 
> 赞同：0
> 
> 时间：2013-04-12T09:56:33.263
> 
> 标签：asp.net-mvc, naming-conventions

我在这个网站上浏览了这个例子， [http://www.w3schools.com/aspnet/mvc_models.asp](http://www.w3schools.com/aspnet/mvc_models.asp) （见页面代码后面的“注意”。）

在 MVC dotnet 中，模型类名称是否必须与数据库名称相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:05:22.037

没有必要，如果您在谈论 EntityFramework，那么您会将您的实体类映射到 DB 表。在 EF 设计器中或在实体框架代码优先方法的情况下使用表属性。见[参考](http://msdn.microsoft.com/en-us/data/gg193958.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:32:57.330

这不是必需的，可以通过在模型上添加 Table 属性来完成：

```
[Table("Table name on db")]
public class ModelName
{
....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:03:51.767

不必要，

此处的示例描述了实体框架的使用（由 dbContext 类假定）。默认情况下假定表名与模型名相同，但显然您可以使用[Attribute Table](https://stackoverflow.com/a/12958273/794226)和[Fluent API覆盖它](http://msdn.microsoft.com/en-us/data/jj591617)

```
modelBuilder.Entity<Department>() 
    .ToTable("t_Department"); 
```

# php - YiiBooster - 鼠标中键点击链接被禁用？

> ID：15968319
> 
> 赞同：0
> 
> 时间：2013-04-12T09:56:43.947
> 
> 标签：php, twitter-bootstrap, yii

我有一个 Yii 应用程序，我使用 YiiBooster。我注意到我无法使用鼠标中键打开链接。这真的很糟糕，因为例如我无法在新标签中打开链接。

是默认的吗？我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:19:47.460

我有同样的问题.. 确认这是 1.0.6 版 booster 的问题，仅适用于 firefox 浏览器。我在降级到 1.0.5 版后解决了！

我知道这不是一个解决方案，但总比没有好；）

此致！！！

萨尔塞罗

# jsf - 使用 JasperReports 导出到 excel 时出现 FileNotFoundException

> ID：15968328
> 
> 赞同：0
> 
> 时间：2013-04-12T09:56:58.273
> 
> 标签：jsf, jasper-reports, filenotfoundexception

我在 JSF 1.2、RichFaces 中开发了应用程序并在 Apache Tomcat 上运行。使用 JasperReports（使用 iReport 4）从应用程序生成 pdf 文件，它完全没问题。现在我想将相同的文件导出到 excel 而不是 pdf。我使用了以下代码片段，但出现错误

```
net.sf.jasperreports.engine.JRException: java.io.FileNotFoundException: \reports\studentReports\testExcel.jrprint 
```

生成excel的代码片段如下：-

```
File file = new File("/reports/studentReports/testExcel.jrprint");
JasperPrint jasperPrint = (JasperPrint)
JRLoader.loadObject(file);
JExcelApiExporter xlsExporter = new JExcelApiExporter();
xlsExporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
xlsExporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME,"/reports/studentReports" + "/" + "testExcel1" + ".xls");
System.out.println("Exporting report...");
xlsExporter.exportReport(); 
```

我已经检查过了，报告的路径是正确的。我在哪里做错了。提前致谢。

# eclipse - 为 Scala IDE 配置 Lift 项目

> ID：15968329
> 
> 赞同：3
> 
> 时间：2013-04-12T09:56:59.610
> 
> 标签：eclipse, scala, sbt, lift, sbteclipse

我正在尝试为 Eclipse IDE 配置 Lift 项目。为此，我执行了本教程：[http ://scala-ide.org/docs/tutorials/lift24scalaide20/index.html](http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html)

我到了为 Scala IDE 配置 Lift 项目的步骤，当我运行命令 >sbt 时，我有这个错误：

**D:\lift-lift_24_sbt-61d24f7\lift_basic\build.sbt:11：错误：未找到：值 EclipseKeys EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource ^ D:\lift-lift_24_sbt-61d24f7\lift_basic\build. sbt:11：错误：重新分配给 val EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource ^ [错误] 表达式中的类型错误项目加载失败：(r)etry、(q)uit、(l)ast 或 (忽视？**

我不明白我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:55:08.567

我之前遇到过这个错误，问题是我没有`sbteclipse`安装插件。尝试将此添加到`~/.sbt/plugins/plugins.sbt`，或您的 sbt 插件配置文件所在的任何位置：

```
//Eclipse Plugin
resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.0.0") 
```

# php - Zend 2：如何从控制器抛出 404 错误

> ID：15968331
> 
> 赞同：17
> 
> 时间：2013-04-12T09:57:00.877
> 
> 标签：php, zend-framework2

我想从我的控制器中抛出“404 Page not found”错误。我怎样才能做到这一点？

我使用 Zend Framework 2 而不是 1。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-12T10:10:55.077

```
class IndexController extends AbstractActionController
{
    public function previewAction ()
    {
        return $this->notFoundAction ();
    }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-12T09:58:32.573

只需尝试：

```
$this->getResponse()->setStatusCode(404);
return; 
```

在控制器的操作方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T06:51:55.200

在正确的 ZF2 设置中，您应该已经有了 404 视图，然后在您的控制器操作中，只需使用以下内容，404 就会自动为您处理：

```
 if($notTheCorrectSlugMatchOrWhatEver){
   return  $this->notFoundAction();
   } 
```

# php - PHP：Yahoo Finance .CSV 数组的斜线

> ID：15968336
> 
> 赞同：0
> 
> 时间：2013-04-12T09:57:10.057
> 
> 标签：php, arrays, csv, finance, stripslashes

我试图删除数组输出的斜杠。我正在使用来自 yahoo Finance 的 .csv 文件。不知何故，我无法让它工作，斜线不会剥离。我得到的输出是带有斜杠的“Google .inc”。

```
<?php
// Setup Variables
$stockList = "goog";
$stockFormat = "snl1d1t1c1hgw";
$host = "http://quote.yahoo.com/d/quotes.csv";
$requestUrl = $host."?s=".$stockList."&f=".$stockFormat."&amp;amp;amp;amp;e=.csv";

// Pull data (download CSV as file)
$filesize=2000;
$handle = fopen($requestUrl, "r");
$raw = fread($handle, $filesize);
fclose($handle);

// Split results, trim way the extra line break at the end
$quotes = explode("\n",trim($raw));

// Function to stripslashes from array
function stripslashes_deep($value)
{
    $value = is_array($value) ?
                array_map('stripslashes_deep', $value) :
                stripslashes($value);

    return $value;
}

foreach($quotes as $quoteraw) {
  $quoteraw = str_replace(", I", " I", $quoteraw);
  $quote = explode(",", $quoteraw);

  //Call function to strip the slashes
  $quote = stripslashes_deep($quote);

  //output second array, name of stock
  echo $quote[1]; // This outputs "Google .Inc" with slashes..
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:07:25.147

最后，我用 str_replace 做到了。

```
$name = str_replace("\"", "", $quote[1]); 
```

满的：

```
foreach($quotes as $quoteraw) {
  $quoteraw = str_replace(", I", " I", $quoteraw);
  $quote = explode(",", $quoteraw);
  $name = str_replace("\"", "", $quote[1]);

  print_r($name);
} 
```

# android - 安卓 2.2 到 4.0

> ID：15968340
> 
> 赞同：3
> 
> 时间：2013-04-12T09:57:18.657
> 
> 标签：android, sdk, resources, development-environment

我为 android 2.2 创建了我的应用程序的第一个版本。但是现在当我发布 4.0 版本的应用程序时，应用程序停止工作。

但我低于强制关闭错误

```
04-12 12:11:07.377: E/AndroidRuntime(716): FATAL EXCEPTION: main
04-12 12:11:07.377: E/AndroidRuntime(716): java.lang.RuntimeException: Unable to start activity ComponentInfo{ru.deltakey.mobile.android/ru.deltakey.mobile.android.ui.MainActivity}: android.view.InflateException: Binary XML file line #96: Error inflating class <unknown>
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.os.Looper.loop(Looper.java:137)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-12 12:11:07.377: E/AndroidRuntime(716):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:11:07.377: E/AndroidRuntime(716):  at java.lang.reflect.Method.invoke(Method.java:511)
04-12 12:11:07.377: E/AndroidRuntime(716):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-12 12:11:07.377: E/AndroidRuntime(716):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-12 12:11:07.377: E/AndroidRuntime(716):  at dalvik.system.NativeStart.main(Native Method)
04-12 12:11:07.377: E/AndroidRuntime(716): Caused by: android.view.InflateException: Binary XML file line #96: Error inflating class <unknown>
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.parseInclude(LayoutInflater.java:823)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:729)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-12 12:11:07.377: E/AndroidRuntime(716):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.Activity.setContentView(Activity.java:1835)
04-12 12:11:07.377: E/AndroidRuntime(716):  at ru.deltakey.mobile.android.ui.MainActivity.onCreate(MainActivity.java:105)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.Activity.performCreate(Activity.java:4465)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
04-12 12:11:07.377: E/AndroidRuntime(716):  ... 11 more
04-12 12:11:07.377: E/AndroidRuntime(716): Caused by: java.lang.reflect.InvocationTargetException
04-12 12:11:07.377: E/AndroidRuntime(716):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-12 12:11:07.377: E/AndroidRuntime(716):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
04-12 12:11:07.377: E/AndroidRuntime(716):  ... 27 more
04-12 12:11:07.377: E/AndroidRuntime(716): Caused by: android.content.res.Resources$NotFoundException: File  from drawable resource ID #0x1020004
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.content.res.Resources.loadDrawable(Resources.java:1942)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.view.View.<init>(View.java:2780)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.widget.TextView.<init>(TextView.java:445)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.widget.Button.<init>(Button.java:108)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.widget.Button.<init>(Button.java:104)
04-12 12:11:07.377: E/AndroidRuntime(716):  at ru.deltakey.mobile.android.ui.CustomFontButton.<init>(CustomFontButton.java:21)
04-12 12:11:07.377: E/AndroidRuntime(716):  ... 30 more
04-12 12:11:07.377: E/AndroidRuntime(716): Caused by: java.io.FileNotFoundException: 
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.content.res.AssetManager.openNonAssetNative(Native Method)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.content.res.AssetManager.openNonAsset(AssetManager.java:407)
04-12 12:11:07.377: E/AndroidRuntime(716):  at android.content.res.Resources.loadDrawable(Resources.java:1934)
04-12 12:11:07.377: E/AndroidRuntime(716):  ... 36 more 
```

代码

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        initVariables();
        registerForContextMenu((ListView)findViewById(R.id.favLVid));
    } 
```

我的清单文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="ru.deltakey.mobile.android"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.READ_LOGS"/>

    <uses-sdk android:minSdkVersion="3"
        android:targetSdkVersion="14" />

    <application android:name=".additional.AllApp" android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:name=".ui.MainActivity"
                  android:icon="@drawable/ic_launcher"
                  android:theme="@android:style/Theme.Black.NoTitleBar"
                  android:label="@string/app_name"
                  android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

主要的.xml

```
 <ru.deltakey.mobile.android.ui.CustomFontButton
                android:id="@+id/pay_mom_bt"
                style="@style/MainLayoutButtonsRow"
                android:drawableTop="@drawable/pay_mom"
                android:text="@string/pay_mom"
                delta_mobile:font="default_bold.ttf">
            </ru.deltakey.mobile.android.ui.CustomFontButton> 
```

# css - 我将如何定位此页面左侧的底部 li

> ID：15968344
> 
> 赞同：-1
> 
> 时间：2013-04-12T09:57:23.367
> 
> 标签：css, css-selectors

我试图将虚线边框向上推 10 像素，以便在Graham Courtney – 2012 年伦敦场地媒体经理的图像之间有一个干净的空间。

目前我似乎无法正确定位它我有这样的东西

.mid-list:nth-child(2) li

网站在这里 = [http://goo.gl/NgCXC](http://goo.gl/NgCXC)

我不确定我如何使用这些，任何指导都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:01:30.590

你可能只是想要这个：`.mid-list > li { margin-top: 10px; }`

# javascript - 为什么 console.log 在 webkit 上工作异常以及如何防止

> ID：15968352
> 
> 赞同：0
> 
> 时间：2013-04-12T09:57:50.593
> 
> 标签：javascript, arrays, webkit, console.log

首先，我有这样的代码行

```
var arr = [1];
console.log("first: ", arr);
arr.push(2);
console.log("second: ", arr);
arr.push(3);
console.log("third: ", arr); 
```

它输出

```
first [1,2,3]
second [1,2,3]
third [1,2,3] 
```

我不知道为什么会这样.. 实际上，这是我在项目中的 console.log 和数组遇到很多麻烦后尝试的测试，它显示了数组对象，其中包含我从未添加到数组中的奇怪项目之前（实际上是之后），但数组长度是正确的，如果我检查每个项目，它也是正确的。我的朋友解释说，Javascript 执行 console.log 比 arr.push“慢”，是真的吗？javascript不像其他语言那样遵循正式的序列代码流程吗？我该如何防止呢？Console.log 对我来说非常重要，现在我对它的输出不再有信心了:(

# rest - 消费网络服务

> ID：15968358
> 
> 赞同：0
> 
> 时间：2013-04-12T09:58:07.360
> 
> 标签：rest, grails, groovy, apache-httpclient-4.x, httpbuilder

我正在调用这样的网络服务（使用[休息](http://grails.org/plugin/rest)插件）：

```
withRest(uri: "http://server.com") {
    def response = post(path: '/webservice', query: [q: 'test'])
    // process response
} 
```

并得到以下响应：

```
<?xml version="1.0" encoding="UTF-8" ?>
<RESPONSE>
    <MULTIPLE>
        <SINGLE>
            <KEY name="id">
                <VALUE>1</VALUE>
            </KEY>
            <KEY name="courseid">
                <VALUE>1</VALUE>
            </KEY>
            <KEY name="name">
                <VALUE>test</VALUE>
            </KEY>
            <KEY name="description">
                <VALUE>Test</VALUE>
            </KEY>
            <KEY name="descriptionformat">
                <VALUE>1</VALUE>
            </KEY>
            <KEY name="enrolmentkey">
                <VALUE>TEST</VALUE>
            </KEY>
        </SINGLE>
    </MULTIPLE>
</RESPONSE> 
```

我想将此响应转换为对象，以便可以执行以下操作：

```
assert responseMap.id == 1 
```

我知道如何做到这一点的唯一方法是使用`// process request`上面块中的 Gpath 表达式来获取单个条目并构建我的`responseMap`. 有没有更简单的方法？此响应是否遵循某些“标准”，是否有使我的工作更轻松的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:01:23.713

你可以这样做：

```
new XmlSlurper().parseText( response )
                .MULTIPLE.SINGLE.KEY
                .find { it.@name == 'id' }
                .VALUE.text() == '1' 
```

用is检查标签`VALUE`的`KEY``name="id"``1`

# android - 如何在点击屏幕时制作滑出动画？

> ID：15968361
> 
> 赞同：0
> 
> 时间：2013-04-12T09:58:15.027
> 
> 标签：android

我设计了一个屏幕，单击菜单中的按钮从底部滑出，单击其他按钮时，菜单将滑出并消失，但我的要求是每当我单击菜单中的任何位置时，我都想让菜单滑出菜单部分之外的屏幕。请告诉我如何实现这一目标。

```
//Code
if(v==mBtnMenu){
            mBtnMenu.setVisibility(Button.INVISIBLE);
            mFrameLayoutCustom.startAnimation(slideInAnim);
            mFrameLayoutCustom.setVisibility(View.VISIBLE);

        }   else if (v == mBtnMenuonTop) {
            mBtnMenu.setVisibility(Button.VISIBLE);
            mFrameLayoutCustom.startAnimation(slideOutAnim);
            mFrameLayoutCustom.setVisibility(View.GONE);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:03:35.390

我想你可以尝试使用

```
 YourItemName.setOnFocusChangeListener(new OnFocusChangeListener() {          

        public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
               // TODO Auto-generated method stub
        }
    }); 
```

# smarty - prestashop 如何找到类别 id_image

> ID：15968362
> 
> 赞同：1
> 
> 时间：2013-04-12T09:58:17.357
> 
> 标签：smarty, prestashop

我有一些子类别，我只需要从它们的父类别中获取“id_image”。是否可以？

我可以获取父类别 id '$id_category_parent' 但从他们那里我不知道如何获取图像。我尝试：

```
$id_category->id_image 
```

但显然它不起作用，因为 $id_category_parent 不是对象。我想我缺少一个获取对象的“智能”功能，但我不太了解它。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T00:37:27.020

好的，所以我是凭记忆做到这一点的，所以我不能保证它是 100% 正确的，但这是我的想法。如果您想在类别页面中执行此操作，您可以覆盖`CategoryController.php`

```
/**
 * Overrides the init method
 * to get the parent category
 */
public function init() {
    parent::init();

    // I don't remember if it's id_parent or id_category_parent but this will be easy to find out
    $this->parent_category = new Category($this->category->id_parent, $this->context->language->id);
}

/**
 * Pass the variable to smarty
 */
public function initContent() {
    parent::initContent();

    $this->context->smarty->assign('parent_category', $this->parent_category);
} 
```

然后在您的模板中，您可以使用经典：

```
<img src="{$link->getCatImageLink($parent_category->name, $parent_category->id_category, 'home_default')}"> 
```

像这样的东西应该工作。

# c# - 由于网络导致的性能问题

> ID：15968371
> 
> 赞同：3
> 
> 时间：2013-04-12T09:58:40.703
> 
> 标签：c#, asp.net, performance, networking, large-data

我目前正在处理具有大型数据集的 .NET (3.5) 页面，性能是坐在 2 个不同位置（相隔 12 小时）的用户的主要关注点。

目标和要求：

1.  我有一个大约 2500 条记录 x 30 列的结果集。
2.  显示为带有客户端排序和大量单元格格式的表格视图。
3.  在相隔 12 小时的两个不同位置加载时间相当快（一个位于 Web 浏览器旁边，另一个位于 Web 服务器的半个地球）。

我尝试了 2 种不同的方法，但无法满足两个用户。这是我到目前为止所尝试的：

*   客户端网格
    *   优点：
    *   通过线路发送的较小数据包；Web 服务器正在发送 < 1 MB。通过网络更快
    *   缺点：
    *   生成网格的 Javascript/JQuery 过程需要 10 - 15 秒（不定）。

**总结：客户端网格对于远离**Web 服务器的用户是有益的。但是，对于坐在服务器旁边的用户而言，情况并非如此。现在坐在服务器旁边的用户将不得不坐下来等待 JQuery/Javascript 来构建表格。

*   服务器端网格
    *   优点：
    *   大多数（如果不是全部）标记都在 Web 服务器（服务器端）上完成，因此渲染速度更快。
    *   缺点：
    *   通过网线发送的大数据包；Web 服务器正在发送 3.5 - 5 MB。通过网络慢得多。（检索 3.7 MB 的页面大约需要 30 多秒）

总结：服务器端网格对坐在Web 服务器**旁边**的用户是有益的（因为它几乎是瞬间加载的—— 3 MB 只需 1 秒）。同样，对于坐在地球另一端的用户而言，网络传输会受到网络传输的影响——3.MB 页面需要 30 多秒。

经过谷歌搜索和实验；对于如何让这两个用户都满意，我仍然摸不着头脑。

*注意：我决定不包含任何源代码，因为它不会以任何可能的方式帮助您。

我知道没有一种适合所有解决方案的解决方案，但我正在寻找至少能够满足这两个用户的中间立场。

一般来说，至少，我想给用户一个页面已经“加载”（快速）的印象——在所有数据到达之前开始渲染；尽管它可能仍在加载数据。即无限滚动也许。

我正在寻找有创意的想法；因此，如果您的建议包括将服务器移动到全球的一半；增加您的带宽或任何其他牵强的想法；如果您对自己的想法保密，我将不胜感激。

谢谢。

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:04:20.493

1.  您可以在网格上使用[服务器端分页](http://www.4guysfromrolla.com/webtech/041206-1.shtml)，每页只需加载 10 个条目
2.  如果用户想要查看整个网格，您可以提供“下载为 pdf”文件选项

您可以进一步将客户端网格与服务器端分页一起使用，以缩短访问时间。我认为带有服务器端分页的gridview 就可以了。如果您需要一次显示所有记录，那么这是一个单独的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:07:16.173

服务器端分页？

你说*创意*，所以你有没有打开 gzip 来压缩你发送的数据？另外，尝试缩小html？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:04:15.143

我已经成功地将[DHTMLX Grid](http://dhtmlx.com/docs/products/dhtmlxGrid/index.shtml)用于此用途。它既有无限滚动的能力，也有分页的能力。仅请求页面/可见滚动区域上显示的数据（减少在任何给定时间通过网络发送的数据量。它也非常可定制，并且具有许多您可能会发现有用的其他功能。

# ios - 用 XML 字符串填充数组

> ID：15968373
> 
> 赞同：0
> 
> 时间：2013-04-12T09:58:45.673
> 
> 标签：ios, xml, xcode, object, nsmutablearray

我的问题是 sendXML 在开头有多个括号：

```
> sendXML: <<<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Table_info><table_id>1</table_id><action_id>3</action_id><Bestellliste><item><categorie>getraenke</categorie><item_id>102</item_id><menge>3</menge></item>item><categorie>getraenke</categorie><item_id>101</item_id><menge>2</menge></item>/Bestellliste></Table_info> 
```

但应该是：

```
sendXML: <?xml version="1.0" encoding="UTF-8" standalone="yes"?><Table_info><table_id>1</table_id><action_id>3</action_id><Bestellliste><item><categorie>getraenke</categorie><item_id>102</item_id><menge>3</menge></item><item><categorie>getraenke</categorie><item_id>101</item_id><menge>2</menge></item></Bestellliste></Table_info> 
```

我的代码：

```
NSMutableArray * objectAttributes = [NSMutableArray arrayWithCapacity:100];

NSString *headerXML = [NSString stringWithFormat:
                                 @"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>"
                                 "<Table_info>"
                                 "<table_id>1</table_id>"
                                 "<action_id>3</action_id>"
                                 "<Bestellliste>"];

NSMutableArray *bodyXML = [NSMutableArray arrayWithCapacity:200];

NSString *endXML = [NSString stringWithFormat:
                             @"</Bestellliste>"
                             "</Table_info>"];

for(int i=0, j=0; i<getraenkeArray.count; i++)
{
    [objectAttributes addObject:[[getraenkeArray objectAtIndex:i] categorie]];
    [objectAttributes addObject:[[getraenkeArray objectAtIndex:i] item_id]];
    [objectAttributes addObject:[[getraenkeArray objectAtIndex:i] menge]];

    [bodyXML addObject:[NSString stringWithFormat:
                        @"<item>"
                        "<categorie>%@</categorie>"
                        "<item_id>%@</item_id>"
                        "<menge>%@</menge>"
                        "</item>",
               [objectAttributes objectAtIndex:j],
               [objectAttributes objectAtIndex:j+1],
               [objectAttributes objectAtIndex:j+2]]];
    j=j+3;
}

NSMutableString *sendXML = [NSMutableString stringWithCapacity:500];
int i=0;

[sendXML insertString: endXML atIndex: 0];  // Final-XML

// If no object is in getraenkeArray, bodyXML gets an empy standard-string
if (getraenkeArray.count == 0) {
    [bodyXML addObject:[NSString stringWithFormat:
                        @"<item>"
                        "<categorie></categorie>"
                        "<item_id></item_id>"
                        "<menge></menge>"
                        "</item>"]];
    [sendXML insertString: [bodyXML objectAtIndex:i] atIndex: i+1];
    NSLog(@"if");
}
else
{
    for(i=0; i<(getraenkeArray.count); i++)
    {
        [sendXML insertString: [bodyXML objectAtIndex:i] atIndex: i+1]; NSLog(@"i: %d", i);
    }
    NSLog(@"else");
}

[sendXML insertString: headerXML atIndex: i];
NSLog(@"XML: %@", sendXML); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:15:45.593

在将数组中的项目插入到 sendXML 的 for 循环中，您在索引 i+1 处插入，这是一个字符偏移量，因此第二个元素被插入到第一个字符串的字符 1 处，即紧随其后第一个`<`，因此给你糟糕的结果，

`appendString:`如果您希望在`sendXML`字符串中一个接一个地刺痛，或者如果您需要插入它们，请尝试获取真正的插入位置。

# css - 如何使用 :after 伪将图标放置在 h2 标记之后，即使宽度为 100%

> ID：15968374
> 
> 赞同：2
> 
> 时间：2013-04-12T09:58:51.760
> 
> 标签：css

想知道是否有人知道我如何将三角形图标直接`h2`放置在标签文本之后，目前我使用 :after 并将其浮动到右侧，但因为这个三角形`h2`位于`display: block`右侧。因为我有一个需要拉伸的边框底部，所以`100%`我不能用它`display: inline-block`来得到我的结果。想知道我是否可以实现这一点而不必添加空跨度等

小提琴：http: [//jsfiddle.net/7bCwv/](http://jsfiddle.net/7bCwv/)

HTML：

```
<h2 class="definition-heading">Tools for Internet Users</h2> 
```

CSS：

```
 h1, .carousel-caption, h2, h3, h4 {
    font-family:"Proxima Nova Semi Bold", Arial, Helvetica, sans-serif;
    color: #454545;
    font-size: 16px;
}
h2 {
    border-bottom: 1px solid #b7b7b7;
    padding: 10px 0;
}
.definition-heading:after {
    content:'';
    border-bottom: 5px solid transparent;
    border-left: 7px solid #e15646;
    border-top: 5px solid transparent;
    height: 0;
    width: 0;
    float: right;
    position: relative;
    top: 7px;
    margin-left: 9px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:00:56.847

如果您`inline-block`在生成的内容上使用，它应该完全符合您的要求。看到[这个 fork](http://jsfiddle.net/cherryflavourpez/znJ5q/)，CSS 变化：

```
.definition-heading:after {
   display: inline-block; /* add this */
   /* float: right;
   top: 7px; remove these */
} 
```

这使：

![使用内联块的屏幕截图](https://i.stack.imgur.com/HQK3N.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T10:21:55.643

@CherryFlavourPez 给出了最好的答案，我还想建议您设置三角形图标的样式`vertical-align: middle;`，以便您的标题和三角形看起来不错。

**编辑**

您也可以不使用上述方法显示三角形图标，这里有一个更简单的方法：

```
<h1>heading text here<span>►&lt;/span></h1> 
```

现在为您的跨度设计样式。（三角形图标是从字符映射中复制的）

# php - 通过 HTML 表单将图像上传到 FTP

> ID：15968377
> 
> 赞同：1
> 
> 时间：2013-04-12T09:58:58.297
> 
> 标签：php, html

我正在尝试将图像上传到我的 FTP 图像文件夹中。我该怎么做呢？

```
 <html>
<head>
</head>
<body>
    <?php
 if(isset($_REQUEST['submit']))
 {
 $filename=  $_FILES["imgfile"]["name"];
 if ((($_FILES["imgfile"]["type"] == "image/gif")|| ($_FILES["imgfile"]["type"] ==       "image/jpeg") || ($_FILES["imgfile"]["type"] == "image/png")  || ($_FILES["imgfile"]["type"] == "image/pjpeg"))&& ($_FILES["imgfile"]["size"] < 9999999999))
 {
  if(file_exists($_FILES["imgfile"]["name"]))
 {
 echo "File name exists.";
 }
 else
 {
 move_uploaded_file($_FILES["imgfile"]["tmp_name"],"images/$filename");
 echo "Upload Successful . <a href='images/$filename'>Click here</a> to view the         uploaded image";
}
}
 else
 {
 echo "invalid file.";
 }
 }
 else
 {
 ?>
 <form method="post" enctype="multipart/form-data">
 File name:<input type="file" name="imgfile"><br>
 <input type="submit" name="submit" value="upload">
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:07:55.317

以下是检查扩展的方法：

```
if(is_uploaded_file($_FILES['imgfile']['tmp_name']))
{
    $fileExtension = array('jpg','jpeg','gif','png');
    $file_name = pathinfo($_FILES["imgfile"]["name"]);
    $extension = strtolower($file_name['extension']);
    if(!in_array($extension, $fileExtension))
    {
        $error .= "<span class='error'>invalid file format !</span><br>";
    }
} 
```

.

如果没有发现错误，您将如何上传：

```
$tmp_file = '';       
if(is_uploaded_file($_FILES['imgfile']['tmp_name']))
{
    $file_name = pathinfo($_FILES["imgfile"]["name"]);
    $extension = strtolower($file_name['extension']);
    $tmp_file = substr($file_name['filename'], 0, 50).'_'.time().'.'.$extension;

    $uploaddir = 'user_image/';
    $uploadfile = $uploaddir.$tmp_file;

    move_uploaded_file($_FILES['imgfile']['tmp_name'], $uploadfile);
    //list($width, $height) = getimagesize($uploadfile);

    $fileType = $_FILES['imgfile']['type'];
    $fileSize = $_FILES['imgfile']['size'];
} 
```

# php - 使用 jQuery 动态添加表单元素并使用 PHP 提交到数据库

> ID：15968385
> 
> 赞同：1
> 
> 时间：2013-04-12T09:59:20.530
> 
> 标签：php, jquery

我对 jQuery 比较陌生，我在使用 jQuery 动态添加表单元素然后使用 PHP 遍历这些表单元素以添加到数据库时遇到问题。

基本上我拥有的是一个表格，单击 a`div`后，会添加一个包含表单元素的新表格行。代码如下所示：

```
$('.addRow1').click(function() {
      <?php $count++; ?>
       $('.mainTable > tbody:last').one().append('<tr><td>Chronic Pain Referral</td><td>Chronic referral</td><td><input type="hidden" name="count" value="<?php echo $count; ?>"><textarea name="notes"></textarea></td></tr>');
    }); 
```

如您所见，我尝试使用 PHP 添加一个计数器，因此每次添加一行时它都会添加`1 to $count`，然后我可以简单地执行一个`foreach()`语句来遍历每一行的表单数据。

然而这并没有奏效。如果我尝试`foreach()`与计数器一起使用，我会收到服务器错误，并且如果我只是添加很多表行并单击，当我打印计数器值时，无论我添加多少行`submit`，它总是以结束。`1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:15:56.230

PHP 代码`<?php $count++; ?>`在页面发送到客户端之前在服务器上执行；当 JavaScript 函数触发时它不会执行。您需要为增量字段计数使用*JavaScript*变量。

此外，在您的表单中，您只会有一个名为“count”且值不断增加的字段的重复实例，以及一个名为“notes”的文本区域的实例。“计数”字段将毫无意义，因为您无法将它们与文本区域相关联（不保证表单字段以任何特定顺序提交表单。）

您可能希望将计数附加到动态字段上的字段名称，以便能够知道哪些字段连续排列在一起。然后，您可以在表单处理程序中遍历已发布的字段，并使用字段名称末尾的索引将相关字段匹配在一起。我已经做过很多次了，这有点棘手，但绝对可行。

另一种解决方案是将文本区域命名为“notes[]”而不是“notes”。然后，在您的表单处理程序中，`$_REQUEST['notes']`将是表单中所有“注释”字段的数组。如果只有一个动态字段要处理，这很好用；但是，如果每个动态添加的行都有多个相互关联的字段，则您将无法分辨出哪些字段一起出现在一行中。在这种情况下，您必须将索引附加到表单字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:03:07.670

据我所知，PHP 脚本在服务器端执行，代码`<?php $count++; ?>`不会循环执行。它将在服务器端执行一次。您将不得不做相反的事情，在 PHP 脚本中迭代列表并相应地附加事件。

我没有 PHP 技能，所以无法提供代码示例。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:14:27.560

PHP 代码仅在发送到浏览器之前在服务器端执行，您需要使用 javascript 获取行数。

尝试这样的事情：

```
var cnt = $('.mainTable > tbody > tr').length + 1;
var row = '<tr><td>Chronic Pain Referral</td><td>Chronic referral</td><td><input type="hidden" name="count" value="' + cnt + '"><textarea name="notes"></textarea></td></tr>'; 
```

现在，如果您一次提交所有行，则需要在每行的字段名称中添加 []。这会通知 PHP 数据是一个数组。这可能是使用 foreach 时错误的来源，您没有将数组传递给它。

```
<textarea name="notes[]"></textarea> 
```

然后，当您在 PHP 中获得表单提交时，您不需要计数，只需执行以下操作：

```
<?php
if (!empty($_POST['notes'])) {
  foreach ($_POST['notes'] as $note) {
     ...
  }
}
?> 
```

阿德里安的方式的一个例子：

```
<textarea name="notes_"' + cnt + '"></textarea> 
```

PHP：

```
<?php
if (!empty($_POST)) {
  foreach ($_POST as $key => $value) {
    $pieces = explode('_', $key);
    $field = $pieces[0];
    if ($field == 'notes') {
      $row = $pieces[1];          
      // Process data... 
    }
  }
}
?> 
```

# c# - 正则表达式匹配为空

> ID：15968390
> 
> 赞同：0
> 
> 时间：2013-04-12T09:59:35.923
> 
> 标签：c#, regex

我有：

```
string cap = "OK|pz6u1";
var id = Regex.Match(cap, @"OK\|(.*?)").Groups[1].Value; 
```

为什么 id 为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:02:48.423

将您的代码更改为以下代码：

```
var id = Regex.Match(cap, @"OK\|(.*)").Groups[1].Value 
```

你表达的问题是一个问号（？）。问号标记使**前面**的语句**可选**，所以它被省略了。

# c# - MVC 4异步调用动作

> ID：15968393
> 
> 赞同：1
> 
> 时间：2013-04-12T09:59:46.467
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我正在使用 MVC4 和实体框架来开发一个 wep 应用程序。在我的一个观点中，我有一份人员名单，其中都有详细信息。一开始，只显示名字和姓氏，但有一个链接可以显示详细信息，我想让它尽可能动态。

我的动作返回一个`Json(object, JsonRequestBehavior.AllowGet)`

有什么想法吗？

编辑：我的行动

```
 public ActionResult ListByOwner(long id)
    {
        var productallocations = db.ProductAllocations.Where(obj => obj.Id_Person == id).Include("Product");
        return PartialView(productallocations);
    } 
```

我的观点 ：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Styles.Render("~/Content/bootstrap")
        @Scripts.Render("~/bundles/modernizr")
        <script src="../../Scripts/globalize.js" type="text/javascript"></script>
        <script src="../../Scripts/globalize.culture.fr-FR.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
            <div class="container-fluid">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
                <a class="brand" href="@Url.Action("Index", "Home")">BuSI Material Manager</a>
                <div class="nav-collapse collapse">
                <p class="navbar-text pull-right">
                    Logged in as @User.Identity.Name
                </p>
                <ul class="nav">
                    <li>@Html.ActionLink("Home","Index","Home")</li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Persons <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li>@Html.ActionLink("All persons list","Index","Person")</li>
                          <li>@Html.ActionLink("All allocations list", "Index", "ProductAllocation")</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cards<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li>@Html.ActionLink("All phone cards list", "Index", "PhoneCard")</li>
                          <li>@Html.ActionLink("All fuel cards list", "Index", "VehicleFuelCard")</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li>@Html.ActionLink("All products list", "Index", "Product")</li>
                          <li>@Html.ActionLink("Products in stock", "ProductStock", "Product")</li>
                          <li>@Html.ActionLink("Allocated products", "AllocatedProducts", "Product")</li>
                          <li class="divider"></li>
                          <li>@Html.ActionLink("Product types", "Index", "ProductType")</li>
                          <li>@Html.ActionLink("Product companies", "Index", "ProductCompany")</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Vehicles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li>@Html.ActionLink("All vehicles list", "Index", "Vehicle")</li>
                          <li>@Html.ActionLink("Available vehicles", "AvailableVehicles", "Vehicle")</li>
                          <li>@Html.ActionLink("Allocated vehicles", "AllocatedVehicles", "Vehicle")</li>
                          <li class="divider"></li>
                          <li>@Html.ActionLink("Vehicle types", "Index", "VehicleType")</li>
                          <li>@Html.ActionLink("Vehicle motor types", "Index", "VehicleMotorType")</li>
                          <li class="divider"></li>
                          <li><a href="@Url.Action("Index", "VehicleInsuranceContract")">Insurance contracts</a></li>
                          <li><a href="@Url.Action("Index", "VehicleLeasingContract")">Leasing contracts</a></li>
                        </ul>
                    </li>
                </ul>
                </div>
            </div>
            </div>
        </div>

        <div id="body">
            @RenderSection("featured", required: false)
            @RenderBody()
        </div>

        <footer>
            <p>Developed by me.</p>
        </footer>

        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryval")
        @Scripts.Render("~/bundles/bootstrap")
        @RenderSection("scripts", required: false)
        <script src="../../Scripts/Utils.js" type ="text/javascript"></script>
    </body>

</html> 
```

捆绑 ：

```
public class BundleConfig
    {
        // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
        public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                        "~/Scripts/jquery-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                        "~/Scripts/jquery-ui-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                        "~/Scripts/jquery.unobtrusive*",
                        "~/Scripts/jquery.validate*"));

            // Use the development version of Modernizr to develop with and learn from. Then, when you're
            // ready for production, use the build tool at http://modernizr.com to pick only the tests you need.
            bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                        "~/Scripts/modernizr-*"));

            bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));

            bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                        "~/Content/themes/base/jquery.ui.core.css",
                        "~/Content/themes/base/jquery.ui.resizable.css",
                        "~/Content/themes/base/jquery.ui.selectable.css",
                        "~/Content/themes/base/jquery.ui.accordion.css",
                        "~/Content/themes/base/jquery.ui.autocomplete.css",
                        "~/Content/themes/base/jquery.ui.button.css",
                        "~/Content/themes/base/jquery.ui.dialog.css",
                        "~/Content/themes/base/jquery.ui.slider.css",
                        "~/Content/themes/base/jquery.ui.tabs.css",
                        "~/Content/themes/base/jquery.ui.datepicker.css",
                        "~/Content/themes/base/jquery.ui.progressbar.css",
                        "~/Content/themes/base/jquery.ui.theme.css"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:02:11.640

> 有什么想法吗？

是的，您可以使用 AJAX 链接：

```
@Ajax.ActionLink(
    "Details", 
    "Details", 
    new { id = person.Id }, 
    new AjaxOptions { UpdateTargetId = "details" }
) 
```

然后有一个占位符，其中将显示详细信息：

```
<div id="details"></div> 
```

最后让您的控制器操作返回部分视图而不是 JSON：

```
public ActionResult Details(int id)
{
    var model = repository.Get(id);
    return PartialView(model);
} 
```

在相应的局部视图中，您可以了解详细信息：

```
@model Person
<div>
    @Html.DisplayFor(x => x.FirstName)
</div>
<div>
    @Html.DisplayFor(x => x.LastName)
</div>
<div>
    @Html.DisplayFor(x => x.Age)
</div>
... 
```

`jquery.unobtrusive-ajax.js`备注：如果你想工作，不要忘记在你的 _Layout 中包含脚本`Ajax.ActionLink`。

# python - python - 遍历图（找到所有链接的问题）

> ID：15968394
> 
> 赞同：1
> 
> 时间：2013-04-12T09:59:53.483
> 
> 标签：python, recursion, graph, tail-recursion

我在尝试解决一个获取所有链接问题的简单任务时有点卡住了。我猜这基本上是一个图表任务——我处理了一个 jira 问题，找到它的所有链接，然后转到链接问题的链接，直到我处理完所有问题。

我正在测试的 jira 问题的布局如下图所示： ![在此处输入图像描述](https://i.stack.imgur.com/jnF4j.png)

但结果是这样的：

```
PMO-100 -> SA-300
SA-100 -> SA-300
SA-100 -> SA-200 
```

它缺少一个链接，但它会错过更多，因为它只处理所有找到的链接中的第一个链接：

```
__init__       6996   Starting...
_new_conn      6996   Starting new HTTP connection (1): 10.48.34.174
collect_links  6996   Looking for links for issue PMO-100
collect_links  6996   Found 2 links: 27846, 27843
collect_links  6996   processing link 27846
put_link       6996   Appending link 27846 to link register
collect_links  6996   Looking for links for issue SA-300
collect_links  6996   Found 2 links: 27845, 27846
collect_links  6996   processing link 27845
put_link       6996   Appending link 27845 to link register
collect_links  6996   Looking for links for issue SA-100
collect_links  6996   Found 3 links: 27844, 27845, 27843
collect_links  6996   processing link 27844
put_link       6996   Appending link 27844 to link register
collect_links  6996   Looking for links for issue SA-200
collect_links  6996   Found 1 links: 27844
collect_links  6996   processing link 27844
put_link       6996   Link 27844 already exists in link register
collect_links  6996   issue SA-100 is already in tracked issues 
```

发生这种情况是因为 collect_links 方法中的 for ... each 循环 - 每当它被调用时，它都会覆盖 for ... each 集合：

```
def collect_links(self, key):
        logging.info('Looking for links for issue %s' % key)
        self.tracked.append(key)
        links = self.jac.issue(key).fields.issuelinks
        logging.info('Found %s links: %s' % (len(links), ', '.join(i.id for i in links)))
        for link in links:
            logging.info('processing link %s' % link.id)
            self.put_link(link)
            rel = None
            if hasattr(link, 'outwardIssue'):
                rel = link.outwardIssue.key
            else:
                rel = link.inwardIssue.key
            linked_issue = self.jac.issue(rel)
            if linked_issue.key not in self.tracked:
                return self.collect_links(linked_issue.key)
            else:
                logging.info('issue %s is already in tracked issues' % linked_issue.key) 
```

看起来当您从方法本身中调用 self.method 时，它不会为其创建新的数据块，而是覆盖您已经在方法中创建的数据 - 我该如何克服呢？

会发生什么：

```
for link in links: #links contains the links linked to current issue
    if linked_issue.key not in self.tracked:
        return self.collect_links(linked_issue.key) #links changes 
```

在最后一行，我希望它保持我的链接集合不变，但它会将其更改为链接集合`linked_issue.key`

[我已将整个代码粘贴在 pastebin 上](http://pastebin.com/nqBJHV7k)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:00:52.860

呃，不确定我是否理解你的问题，但万一我明白了：

```
for link in links: #links contains the links linked to current issue
    if linked_issue.key not in self.tracked:
        return self.collect_links(linked_issue.key) #links changes 
```

这当然会`for`在第一个未跟踪的链接处停止循环。如果要继续遍历 的其余元素`links`，则不能`return`在此处使用语句。

# c++ - C++：在类和超类之间共享字段

> ID：15968400
> 
> 赞同：5
> 
> 时间：2013-04-12T10:00:00.893
> 
> 标签：c++, inheritance, field

我对类和超类共享字段有点困惑。我期待这没问题：

```
class SuperC {
 public:
     SuperC();
 protected:
     double value;
};

class C : public SuperC {
 public :
     C(double value);
};

SuperC::SuperC(){}
C::C(double value):SuperC(),value(value){} 
```

但编译器告诉我 C 没有字段“值”。C 不继承自 SuperC 中定义的那个？

很多谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:02:27.593

确实如此，但您只能使用构造函数初始化列表语法来初始化当前类成员。

您必须在`SuperC`初始化`value`并调用它时创建一个重载的构造函数。

```
class SuperC {
 public:
     SuperC();
     SuperC(double v) : value(v) {}
 protected:
     double value;
};

class C : public SuperC {
 public :
     C(double value);
};

SuperC::SuperC(){}
C::C(double value):SuperC(value){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:09:42.620

您不能在派生类的构造函数初始化列表中初始化基类成员。

修复1：最多您可以通过将参数传递给BC来初始化派生类中的基类（BC）构造函数。

fix2：在派生类构造函数的主体中分配基类成员而不是构造函数初始化列表

```
C::C(double value1):SuperC()
 {
      value = value1;
 } 
```

# caching - Parsley PropertiesFile 如何重新加载，避免加载缓存版本？

> ID：15968403
> 
> 赞同：0
> 
> 时间：2013-04-12T10:00:09.510
> 
> 标签：caching, flex4, configuration-files, http-caching, parsley

`Flex 4.1`在我正在使用的旧项目中`Parsley 2.3.0`，它由`PropertiesFile`我的主文件中的标签配置`mxml`，如下所示：

```
<parsley:ContextBuilder>
    <parsley:PropertiesFile file="parsley.properties" />
</parsley:ContextBuilder> 
```

问题是现在我在属性文件中添加了一个新的属性，但是缓存版本的文件总是被客户的浏览器加载，然后新的属性就丢失了。除了清理浏览器缓存（客户已经放弃了针对 SWF 文件的解决方案）之外，您还有什么建议吗？

我在谷歌上搜索了很多关于如何避免 SWF 缓存的解决方案，但没有关于`Parsley`配置重新加载的内容。

非常感谢。

# magento - 在结帐页面的免费送货块中添加文本

> ID：15968411
> 
> 赞同：0
> 
> 时间：2013-04-12T10:00:29.327
> 
> 标签：magento, shipping

如何在 magento 的结帐页面上自定义免费的 shpping 文本。

我想在结帐页面添加一些文本来代替运费。

默认情况下，运费为：-“免费 0.00 美元”，我想将其更改为“免费 6.95 美元 - 6.95 美元 = 0.00 美元”。

问候， Ravijot Kaur

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:14:13.943

Two solutions come to mind:

**1)** You can add an attribute to all the products and hard code how much you expect a shipping of each product to cost and then just sum up those numbers. In this case you would simply find all the templates in which you would like to change the text of free shipping, get all items that are currently in cart (see [this](https://stackoverflow.com/questions/5512090/how-do-i-get-items-in-shopping-cart-using-models-magento) answer on how you can get quote items), from them you can get product data with getProduct(), load your attribute, sum them up, format the price to your store's locale and print it out.

**For example:** one such location is `app/design/frontend/base/default/template/checkout/onepage/shipping_method/available.phtml` you would have to put an if statement there so that you would make the change only to free shipping. There you can see a call to $_rate->getCode(). If the output of that function matches to freeshipping_freeshipping then you have to attach your text to html.

**2)** A second and a bit more complex solution is that you select another shipping method and get the amount from it (e.g. you use ups shipping method to see how much it would cost if free shipping would not be used). For this you would have to create a helper class and implement a function that converts shipping adderess (class Mage_Sales_Model_Quote_Address) to a request (class Mage_Shipping_Model_Rate_Request)

```
public function prepareRequest( Mage_Sales_Model_Quote_Address $address )
{
  $request = Mage::getModel( 'shipping/rate_request' )
      ->setAllItems( $address->getAllItems() )
      ->setDestCountryId( $address->getCountryId() )
      ->setDestRegionId( $address->getRegionId() )
      ->setDestPostcode( $address->getPostcode() )
      ->setPackageValue( $address->getBaseSubtotal() )
      ->setPackageValueWithDiscount( $address->getBaseSubtotalWithDiscount() )
      ->setStoreId( Mage::app()->getStore()->getId() )
      ->setWebsiteId( Mage::app()->getStore()->getWebsiteId() )
      ->setBaseCurrency( Mage::app()->getStore()->getBaseCurrency() )
      ->setPackageCurrency( Mage::app()->getStore()->getCurrentCurrency() )
      ->setPackageQty( $address->getItemQty() )
      ->setPackageWeight( $address->getWeight() );

  return $request;
} 
```

You can get address from qoute:

```
Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress(); 
```

With that request you would call collectRates function on a carrier of your choice (e.g. Mage_Usa_Model_Shipping_Carrier_Ups::collectRates). You can see an example of call to all the carriers in Mage_Shipping_Model_Shipping::collectRates and the function that gets called from ther Mage_Shipping_Model_Shipping::collectCarrierRates which contains `$carrier->collectRates($request);` - function call that you will have to make with your request.

collectRates function will return a result class (Mage_Shipping_Model_Tracking_Result) (use var_dump( $response->getData() ); or Mage::log( $response->getData() ); to see the structure) and from that class you will get the price that the carrier would charge for the delivery of products to shipping address.

With that number you then do the same as if you would use solution **1)** (see For example part at the bottom of first solution):

1.  format price to your store's locale
2.  find all phtml files where you want to make the change
3.  check if shipping method is freeshipping_freeshipping
4.  if it is free shipping then add your text

**EDIT:**

Alternative to adding your text to each template file would be to use a rewrite on Mage_Shipping_Model_Carrier_Freeshipping class and add your text to `$method->setMethodTitle($this->getConfigData('name'));` setter.

**EDIT 2:**

Or better yet write your own shipping method based on free shipping method, [this](http://inchoo.net/ecommerce/magento/custom-shipping-method-in-magento/) article and the solution above. That way you won't have to use a rewrite or change template files.

**Edit 3:**

I forgot to mention that in the above prepareRequest function you also have to set package_qty and package_weight (have added them now). This two values are calculated and added to address in `Mage_Sales_Model_Quote_Address_Total_Shipping::collect`.

# mongodb - Symfony2动态表单mongodb

> ID：15968415
> 
> 赞同：1
> 
> 时间：2013-04-12T10:00:32.240
> 
> 标签：mongodb, symfony, doctrine-odm

遵循以下[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html中记录的示例](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

我需要根据类别选择填充子类别字段。我不明白为什么 /article/create 会出现此错误：

```
FatalErrorException: Error: Call to a member function getSubCategories() on a non-object 
```

表格 ：

```
namespace Cc\HitoBundle\Form\Type;

…

class ArticleType extends AbstractType
{
    private $registrationArticleListener;

    public function __construct(RegistrationArticleListener $registrationArticleListener)
    {
        $this->registrationArticleListener = $registrationArticleListener;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            …

            ->add('category', 'document', array(
                'label' => 'Category',
                'class' => 'Cc\HitoBundle\Document\Category',
                'property' => 'name',
            ));

        $builder->addEventSubscriber($this->registrationArticleListener);
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Cc\HitoBundle\Document\Article'
        ));
    }

    public function getName()
    {
        return 'article';
    }
} 
```

我不明白说明书中的**AddNameFieldSubscriber()**函数是什么

聆听者：

```
namespace Cc\HitoBundle\Form\EventListener;

…

class RegistrationArticleListener implements EventSubscriberInterface
{
    /**
     * @var FormFactoryInterface
     */
    private $factory;

    /**
     * @var DocumentManager
     */
    private $dm;

    /**
     * @param factory FormFactoryInterface
     */
    public function __construct(FormFactoryInterface $factory, $mongo)
    {
        $this->factory = $factory;
        $this->dm = $mongo->getManager();
    }

    public static function getSubscribedEvents()
    {
        return array(
            FormEvents::PRE_BIND => 'preBind',
            FormEvents::PRE_SET_DATA => 'preSetData',
        );
    }

    /**
     * @param event FormEvent
     */
    public function preSetData(FormEvent $event)
    {
        $agent = $event->getData();

        if (null === $article) {
            return;
        }

        $form = $event->getForm();
        $subCategories = $article->getCategory()->getSubCategories();

        $this->customizeForm($form, $subCategories);
    }

    public function preBind(FormEvent $event)
    {
        $data = $event->getData();
        $id = $data['event'];
        $agent = $this->dm
            ->getRepository('CcHitoBundle:Article')
            ->find($id);

        if ($article === null) {
            $msg = 'The event %s could not be found for you registration';
            throw new \Exception(sprintf($msg, $id));
        }
        $form = $event->getForm();
        $subCategories = $article->getCategory()->getSubCategories();

        $this->customizeForm($form, $subCategories);
    }

    protected function customizeForm($form, $subCategories)
    {

    }
} 
```

而且我不明白我必须在 customizeForm 函数中添加什么。请帮我 ！！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:06:21.650

您收到非对象错误，因为您实际上并未在 preBind 或 preSetData 函数中创建 $article 变量。看起来你正在混淆`$agent`和`$article`

```
public function preSetData(FormEvent $event)
{
    //here you have $agent
    $agent = $event->getData();
    //here you have $article
    if (null === $article) {
        return;
    }

    $form = $event->getForm();
    //here you have $article
    $subCategories = $article->getCategory()->getSubCategories();

    $this->customizeForm($form, $subCategories);
} 
```

改成：

```
public function preSetData(FormEvent $event)
{
    $article = $event->getData();
    // We can only set subcategories if a category is set
    if (null === $article->getCategory()) {
        return;
    }

    $form = $event->getForm();
    //... 
```

在自定义表单功能中，您要添加所需的字段，例如子类别：

```
//taken from the article OP referenced
protected function customizeForm($form, $subCatQueryBuilder)
{
    $formOptions = array(
        'class' => 'You\YourBundle\Entity\SubCategory',
        'multiple' => true,
        'expanded' => false,
        'property' => 'THE_FIELD_YOU_WANT_TO_SHOW',
         // I would create a query builder that selects the correct sub cats rather than pass through a collection of objects
        'query_builder' => $subCatQueryBuilder,
    );
    // create the field, this is similar the $builder->add()
    // field name, field type, data, options
    $form->add($this->factory->createNamed('subCategories', 'entity', null, $formOptions));
} 
```

对于查询生成器：

```
/**
 * @param event FormEvent
 */
public function preSetData(FormEvent $event)
{
    $agent = $event->getData();

    if (null === $article->getCategory()) {
        return;
    }

    $form = $event->getForm();

   //Something like
   $category = $article->getCategory();
   $subCatQueryBuilder =  $this->dm
      ->getRepository("YourCatBundle:Subcategory")
      ->createQueryBuilder("sc")
      ->join("sc.category", "c")
      ->where("c.id = :category")
      ->setParameter("category", $category->getId());
   $this->customizeForm($form, $subCatQueryBuilder);
} 
```

# javascript - 当用户单击视频播放时使计时器停止

> ID：15968417
> 
> 赞同：2
> 
> 时间：2013-04-12T10:00:36.990
> 
> 标签：javascript, html, css, timer

我在另一个视频上有一个视频。现在它的工作原理是，第一个视频在 20 秒后关闭，用户将被发送到第二个视频，但我希望当用户点击第一个视频的播放时，计时器将停止并且不会在 20 秒后关闭第一个视频秒。我该怎么办？

这是我的代码

```
<div id="luong_video_ads">
  <div id="luong_video_ads_mes">
    <div style="float:left;">
      <p style="color: #565656; font-family: sans-serif; font-size: 13px;">Ad will be closed   in <span id="luong_video_ads_c"></span> seconds
      </p>
    </div>
    <div style="float:left;margin-left:30px;">
      <input type="button" style="background: #ffe100; color: #474747; float: right; border:   1px solid #474747; border-radius: 5px; "value="Skip Ad" onclick="luong_video_ads_showMainVideo();">
    </div>
  </div>
  <br style="clear:both;"/>
  <div id="luong_video_ads_player">
  </div>
</div>
<script type="text/javascript">
luong_video_ads_time_wait = 30;
luong_video_ads_showed = 0;
luong_video_ads_embed = '<iframe src="http://player.vimeo.com/video/17618255"    width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen   allowFullScreen></iframe>';
luong_video_ads_main_embed = '<object width="420" height="315"><param name="movie"    value="http://www.youtube.com/v/Fcx-bRni7WM?   version=3&amp;hl=en_US&amp;rel=0&amp;autoplay=1"></param><param name="allowFullScreen"    value="true"></param><param name="allowscriptaccess" value="always"></param><embed    src="http://www.youtube.com/v/Fcx-bRni7WM?version=3&amp;hl=en_US&amp;rel=0&amp;autoplay=1"    type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always"    allowfullscreen="true"></embed></object>';
function luong_video_ads_showAdsVideo(){
  document.getElementById("luong_video_ads_c").innerHTML = luong_video_ads_time_wait;
  document.getElementById("luong_video_ads_player").innerHTML = luong_video_ads_embed;
}
function luong_video_ads_showMainVideo(){
  if (luong_video_ads_showed>0)
    return;
    luong_video_ads_showed = 1;
    document.getElementById("luong_video_ads_player").innerHTML =     luong_video_ads_main_embed;
    document.getElementById("luong_video_ads_mes").style.display = 'none';
}
luong_video_ads_int=self.setInterval(function(){luong_video_ads_clock()},1000);
function luong_video_ads_clock(){
  luong_video_ads_time_wait--;
    if (luong_video_ads_time_wait==0){
      luong_video_ads_showMainVideo();
    }
  document.getElementById("luong_video_ads_c").innerHTML = luong_video_ads_time_wait;
}
luong_video_ads_showAdsVideo();

</script> 
```

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:04:20.320

我建议您查看[http://videojs.com/ 之](http://videojs.com/)类的内容 - 您也可以嵌入 vimeo。

这支持回调和事件侦听器，因此您可以轻松地在播放/暂停和视频结束时运行函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:04:41.253

您可以通过删除它来删除计时器

```
window.clearInterval(intervalVariable); 
```

有关更多选项，请参阅[此](http://www.w3schools.com/js/js_timing.asp)

# leaflet - 带有传单的页面 prec

> ID：15968421
> 
> 赞同：0
> 
> 时间：2013-04-12T10:00:40.400
> 
> 标签：leaflet

如果我进入[传单站点](http://leafletjs.com/)并缩放地图，然后进入另一个站点，然后我在浏览器上返回带有“page prec”的传单站点，我得到的地图没有缩放。

如何在页面 prec 之后构建具有相同状态的传单地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-21T13:58:34.263

Leaflet 的这个插件处理一个永久链接，它将为您完成这项工作

[https://github.com/shramov/leaflet-plugins](https://github.com/shramov/leaflet-plugins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:39:01.640

您可以将处理程序添加到事件`moveend`并`zoomend`映射事件，并存储当前位置并缩放到`localstorage`服务器或 url 哈希。在地图加载时，您可以从此存储中获取位置和缩放。

您还可以将 js 对象添加为缓冲区和计时器，以避免在活动地图移动和缩放使用时性能下降。

如果您只想在后退按钮单击时恢复，则必须检测页面加载方式。我发现了下一个问题：[如何使用浏览器中的 BACK 按钮检测用户打开页面？](https://stackoverflow.com/questions/1312953/how-to-detect-that-user-open-page-using-back-button-in-browser)但它太旧了。

# android - onRestoreInstance() 没有被调用

> ID：15968422
> 
> 赞同：0
> 
> 时间：2013-04-12T10:00:43.270
> 
> 标签：android, android-lifecycle

我正在使用 onRestoreInstance() 检索保存在 onSaveInstance 中的数据，但在我的应用程序中，当再次返回活动时不会调用它。

当我的活动正在运行时，我按 Home 键。然后，如果我再次开始活动，则不会调用 onRestorInstance()，这就是我无法检索值的原因。

谁能解释一下 onRestoreInstance() 方法何时被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:10:53.170

按 Home 键不会导致 ReCreate，只是 onPause()，但 OnRestoreInstanceState() 在 onCreate() 之后调用，您可以检查此[Recreating](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)。

# c - 使用 strtok，适用于一个文件，但不适用于另一个

> ID：15968423
> 
> 赞同：0
> 
> 时间：2013-04-12T10:00:45.193
> 
> 标签：c

这是我的代码：

```
 char delims[4];
      delims[0]='\t';
      delims[1]=' ';
      delims[2]=',';
      delims[3]='\0';

      i = 0;
      while (fgets(line, 10000, fp) != NULL) 
      { 

        result = strtok(line,delims);

        while(result != NULL) {
          (*data_array)[i++] = atof(result);
          result = strtok(NULL, delims);
        }
      } 
```

够直截了当。它适用于以下文件：

```
 3.600000 79.000000
      1.800000 54.000000
      3.333000 74.000000
      2.283000 62.000000
      4.533000 85.000000
      2.883000 55.000000
      4.700000 88.000000 
```

但它不适用于此文件：

```
 3.6   79  3
      1.8   54  3
      3.333 74  3
      2.283 62  1
      4.533 85  1
      2.883 55  1
      4.7   88  2
      3.6   85  1
      1.95  51  1
      4.35  85  3 
```

我收到“中止（核心转储）”错误。我究竟做错了什么？

编辑：这是整个功能。*data_array 和 *data_labels 刚刚在 main() 中声明。我注释掉了一些 data_labels 部分，这样我就可以让第一部分工作：

```
 int getdata(double* *data_array, int* *data_labels, int argc, char *argv[], int *items, int *attr)
    {  
      // filename variables
      char *filename;         // pointer to a string that will contain the name of the training data file.
      char *result = NULL;    // used with strtok() to extract each feature value given a line of delimited features.
      FILE *fp;               // pointer to FILE, we can use this with fgets to access each line
      char line[10000];       // array of 1000 chars for storing the raw data for one observation
      char delims[4];         // an array of common delimiters for data files
      delims[0]='\t';
      delims[1]=' ';
      delims[2]=',';
      delims[3]='\0';

      int i, j;

      // check that we have the correct number of command line arguments
      if (argc < 2)
      {
        printf("2usage: progname filename\n");
        return -1;
      }

      if (argc < 4)
      {
        printf("3usage: progname filename num_labels k(nn)\n");
        return -1;
      }

      if (atoi(argv[2]) < 1)
      {
        printf("num_labels must be a positive integer.\n");
        return -1;
      }

      if (atof(argv[2]) - atoi(argv[2]) > 0)
      {
        printf("num_labels must be an integer.\n");
        return -1;
      }

       if (atoi(argv[3]) < 1)
      {
        printf("k must be a positive integer.\n");
        return -1;
      }

      if (atof(argv[3]) - atoi(argv[3]) > 0)
      {
        printf("k must be an integer.\n");
        return -1;
      }

      // try to open the file
      filename = argv[1];
      fp = fopen(filename, "r");
      if (fp == NULL)
      {
        printf("could not open file: %s\n", filename);
        printf("note: the filename should be the second command line argument, after the .exe file");
        return -1;
      }

      printf("reading file: %s\n", filename);

      // get first line of the file to get num_items and num_attrs.
      fgets(line, 1000, fp);
      sscanf(line, "%d \t %d", items, attr);
      printf("num items: %d\n", *items);
      printf("num attributes: %d\n", *attr);  

      if (atoi(argv[3]) > *items)
      {
        printf("k should be smaller than the number of items in the input file.\n");
        return -1;
      }

      // create an array of the data
      *data_array = malloc(*items* *attr*sizeof(double));
      *data_labels = malloc(*items*sizeof(int));
      printf("data array size = %d\n\n",*items* *attr);

      i=0;
      j=0;

      while (fgets(line, 10000, fp) != NULL) 
      { 

        // we break line into tokens using our delimeters list declared at the beginning of the function
        result = strtok(line,delims);
        //printf("%d\n",i);

        while(result != NULL) {
          (*data_array)[i++] = atof(result);
          //printf("%f\n",(*data_array)[i-1]);
          result = strtok(NULL, delims);
        }
        //(*data_labels)[j++] = (int)((*data_array)[--i]);
      }
      /*
      printf("j=%d,items=%d\n",j,*items);
      for (i=0;i<*items;i++)
      {
        printf("i=%d,items=%d,",i,*items);
        printf("label=%d\n",(*data_labels)[i]);
      }
      // close the file
      fclose(fp);

      return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:06:24.263

你的电话没问题`strtok`- 我会用`delims`等效的替换初始化

```
char *delims = "\t ,"; 
```

并切换到 re-enterable [`strtok_r`](http://linux.die.net/man/3/strtok_r)，但这不是导致崩溃的原因（除非您处于并发环境中，在这种情况下，崩溃应该是随机的，并且大部分与正在解析的文件无关）。

这条线非常可疑：

```
(*data_array)[i++] = atof(result); 
```

您要么没有足够的空间分配给`data_array`指针指向的数组，要么`data_array`本身无​​效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:06:34.587

可以容纳的元素数量`(*data_array)`少于您尝试填充循环的标记数量。

# objective-c - NSNotificationCenter 线程安全吗？

> ID：15968430
> 
> 赞同：14
> 
> 时间：2013-04-12T10:01:03.300
> 
> 标签：objective-c, cocoa-touch, concurrency, grand-central-dispatch, nsnotificationcenter

我可以在给定队列中发布通知并在另一个队列中接收吗？我想使用通知来传达不同的队列，但我不确定这是否安全......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T10:25:13.780

不可以。通知在发送它们的同一线程中传递，您需要以某种方式重新发送它才能将通知发送到您的线程。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-12T10:27:48.713

No.

Apple's docs on the subject say: "*Regular notification centers deliver notifications on the thread in which the notification was posted. [...] At times, you may require notifications to be delivered on a particular thread that is determined by you instead of the notification center. [...] In these cases, you must capture the notifications as they are delivered on the default thread and redirect them to the appropriate thread.*"

The following documentation from Apple might help: [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Threading.html#//apple_ref/doc/uid/20001289-CEGJFDFG](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Threading.html#//apple_ref/doc/uid/20001289-CEGJFDFG)

# ios - 调整 UIViewController 中的视图大小

> ID：15968431
> 
> 赞同：0
> 
> 时间：2013-04-12T10:01:04.490
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uiscrollview, uitoolbar

我有`UIViewController`一个故事板应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/H54TG.png)

设置 segue 时会自动添加导航栏，并且我已将`UIToolBar`IB 中的一个添加到底部。

在运行时 a`UIScrollView`作为视图添加到视图控制器。导致的问题是它与`UIToolBar`之前添加的重叠。所以我添加了以下行并将工具栏拉回前面。

```
self.mailOptionsToolbar.layer.zPosition = 1; 
```

现在看起来很好，但还有一个小问题。当我单击 中的工具栏按钮项时`UIToolBar`，它们不起作用。比如说，在滚动视图中，如果 UITextbox 位于这些按钮的正下方，当我单击它们时，它会弹出键盘！它就像点击是通过`UIToolBar`下面的 UITextField。我怎样才能阻止这种情况发生？

我也在想别的办法。那就是调整大小`UIScrollBar`以仅适合空白区域，这样它就不会首先掩盖，`UIToolBar`因此不会产生这个点击问题。但我不知道如何使`UIScrollView`在运行时添加的内容仅适合白色区域。

对这两个方面的建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:06:58.997

```
 CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
    // 20.0f is for status bar height and 44.0f is for navigation bar
    CGFloat scrollViewHeight = screenHeight - 20.0f - 44.0f - self.mailOptionsToolbar.frame.size.height;
    CGRect frame = [CGRectMake(0, 0, 320.0f, scrollViewHeight)];
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:frame]; 
```

# sql-server-2012 - MS SQL ldf 文件上个月没有变化

> ID：15968434
> 
> 赞同：0
> 
> 时间：2013-04-12T10:01:24.060
> 
> 标签：sql-server-2012

我从一个月前的备份中恢复了一个 mssql 数据库，看起来还不错。一个月后，查看 db 物理文件，我可以看到自那以后 ldf 没有改变（具有相同的日期戳和相同的大小），而 mdf 已经增长了一点并且具有今天的日期戳。ldf 文件约为 195MB，而 mdf 文件约为 780MB。这是正常的吗？这会影响性能吗？我能做些什么？

我问这个，因为数据库是 Umbraco 数据库，网站变得非常缓慢，不知道从哪里开始查找。该数据库位于 Windows/SQL Server 2012 上，Umbraco 为 4.7.0。备份来自 SQL Server 2008。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:19:39.423

就日期而言，无需担心。Windows 将更新文件大小增加（或缩小）的日期。如果尺寸配置正确，这可能会在很长一段时间内不会发生。使 ldf 的大小低于 mdf 大小通常也更好。

如果你想摆脱你正在试验的性能问题，有很多东西要发现……所有这些问题很容易填满几本书。如果表现如此糟糕，请考虑寻求外部帮助并进行一些诊断。或提供有关您遇到的问题类型的更多信息（时间、频率、持续时间、等待类型……）

# html - 使用 `%` 设置边距大小...父或元素相对性？

> ID：15968441
> 
> 赞同：0
> 
> 时间：2013-04-12T10:01:56.737
> 
> 标签：html, css

假设我们有以下 HTML：

```
<div id='parent'>
   <div id='child'>
   </div>
</div> 
```

如果我们设置这个 CSS ：

```
 #parent {
     width:1000px;
     height:1000px
 }
 #child {
    width:20%;
    height:40%;
    margin-top:10%;
 } 
```

子元素将有一个`margin-top`是`%`父高度还是子高度？还有一种不同的方式可以让浏览器在`%`边距方面呈现大小？如果有一个`padding`应用于 child/parent ，它会影响`margin`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:11:25.110

最好的检查方法是自己[测试一下](http://jsfiddle.net/teddyrised/LDrd3/)；）

所有关于宽度、高度的百分比都是根据父容器的宽度计算的——在这种情况下，`#child`元素的宽度为 200 像素，高度为 400 像素。

同时，当基于百分比时，paddings 和 margins[**是根据包含父项的 width 计算的**](https://stackoverflow.com/questions/11003911/why-are-margin-padding-percentages-in-css-always-calculated-against-width)：因此`#child`将具有 100px 的上边距。

请注意，[在某些情况下，垂直边距（即顶部和底部边距）可能会塌陷](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。在我发布的[小提琴](http://jsfiddle.net/teddyrised/LDrd3/)中，情况正是如此。

# java - 在java中从ms访问jdbcodbc查询数据库的正确语法是什么

> ID：15968442
> 
> 赞同：0
> 
> 时间：2013-04-12T10:01:57.357
> 
> 标签：java, ms-access

使用 java eclipse 查询 ms access 数据库时出现此错误。

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Undefined function txtIcNo.getText' in expression.
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcStatement.execute(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcStatement.executeQuery(Unknown Source)
    at GetDataFromDB.retrieveDB(GetDataFromDB.java:103)
    at GetDataFromDB.actionPerformed(GetDataFromDB.java:79)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)" 
```

我的代码如下

```
 public void retrieveDB() throws SQLException,ClassNotFoundException{
    //load JDBC Driver
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con = DriverManager.getConnection("jdbc:odbc:PatientDB");
    String query = "SELECT * FROM PatientDB WHERE IC_No = txtIcNo.getText()";
    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery(query);
    con.commit();
    while(rs.next()){
    if("txtIcNo.getText()"!=null){

    txtIcNo.setText(rs.getObject(1).toString());    
    txtName.setText(rs.getObject(2).toString());
    }
    else{
    System.out.println("Bye bye");
    }
    }
    con.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:19:59.120

如果这只是一个学习练习，那么尝试类似

```
String query = "SELECT * FROM PatientDB WHERE IC_No = '" + txtIcNo.getText() + "'"; 
```

如果这是用于生产代码，则不要**使用**上述代码。相反，对“SQL 注入”攻击进行一些 Web 搜索，然后了解“参数化查询”并使用它们。

# .net - VB .NET SQL 删除查询不起作用

> ID：15968445
> 
> 赞同：2
> 
> 时间：2013-04-12T10:02:05.583
> 
> 标签：.net, sql, vb.net

我有一个大程序试图从我的 SQL Servers 数据库中删除一条记录。我最初创建此代码以使用 Microsoft Access，但我决定将其转换为使用 MS SQL 2008。

现在这就是我所拥有的：

```
Dim dbConnection As SqlConnection
Dim dbCommand As SqlCommand
Dim strSQL As String
Dim dgvSelectRow As Integer 'Represents the selected row in the DataGridView

Public Sub SQLConnect()
    dbConnection = New SqlConnection("Data Source=w7gbnewmfg2143\sqlexpress;Initial Catalog=master_plan;Integrated Security=True")
    dbConnection.Open()
End Sub

Public Sub SQLCommand()
    dbCommand = New SqlCommand(strSQL, dbConnection)
End Sub

Public Sub SQLDisconnect()
    dbConnection.Close()
End Sub

Private Sub btnRemove_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRemove.Click
    If dgvLine1.RowCount = 0 Then
        MsgBox("No Rows to Delete")
    Else

        dgvSelectRow = dgvLine1.CurrentRow.Index

        If MsgBox("Are you sure to remove this job?", MsgBoxStyle.Critical + MsgBoxStyle.YesNo, "Remove Job") = MsgBoxResult.Yes Then

            SQLConnect()
            strSQL = "DELETE FROM [LinePlan] WHERE DateTime = '" & dgvLine1.Item(8, dgvSelectRow).Value & "'" 'Removes selected row from DataGridView at position column 8
            SQLCommand()
            dbCommand.ExecuteNonQuery()
            SQLDisconnect()
            tmrUpdate.Enabled = True
            tmrUpdate.Start()
        Else

        End If
    End If
End Sub 
```

基本上我正在尝试从 DataGridView 中的选定行中删除记录。在该行中，它删除了我的 DGV 中列处的 DateTime 值。现在，当我在 MS Access 中创建此查询时，我完全没有问题，它运行良好。现在我已经将它迁移到 MS SQL，我遇到了各种各样的问题。我得到了很多我现在已经解决的语法错误（我认为）。我一直在使用 Catch ex As Exception 来尝试确定任何错误。我现在已经清除了所有错误。现在，当我单击删除按钮时，我没有收到任何错误，但是记录并没有删除，它仍然保留在数据库中。该程序不会崩溃或显示任何错误，并且似乎已经完成了它需要做的事情，但它不会删除记录。我尝试过使用不同的连接字符串方法，但无济于事。

我是否错过了一些直接的东西？因为我无法弄清楚问题可能是什么。这似乎是一个非常直接的查询，并没有想到真的会出错，但我错了:)。

任何帮助或指导将不胜感激。谢谢你的时间！

问候，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:06:17.103

尝试使用参数化查询

```
strSQL = "DELETE FROM [LinePlan] WHERE DateTime = @dtValue"
SQLCommand()
dbCommand.Parameters.AddWithValue("@dtValue", Convert.ToDateTime(dgvLine1.Item(8, dgvSelectRow).Value)
dbCommand.ExecuteNonQuery() 
```

这应该会更好，因为您离开了将正确格式化的日期时间值传递给数据库引擎的工作，而不是尝试传递您认为数据库格式正确的字符串。

...我忘了别的东西？....啊，是的，告别[Sql Injection](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)

# magento - Magento 从页面布局中获取产品（如 1column.phtml）

> ID：15968449
> 
> 赞同：0
> 
> 时间：2013-04-12T10:02:16.480
> 
> 标签：magento, templates, magento-1.7, product

我正在使用 Magento 1.7

我创建了一个自定义页面布局 (parallaxe.phtml)
一个产品与这个自定义页面布局相关联。

我在产品视图页面上，正在显示我的自定义布局页面。
我想直接从此页面访问我的产品信息。

```
$_product = $this->getProduct(); 
```

返回`null` :(

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:39:00.803

我假设您的模板附加到 core/template 类型的块（或其他不设置产品变量的块。

`$product = Mage::registry('current_product');`您可以通过调用或从注册表访问产品变量`$product = Mage::registry('product');`

# git - git fetch origin 被拒绝

> ID：15968450
> 
> 赞同：3
> 
> 时间：2013-04-12T10:02:18.013
> 
> 标签：git

突然，我无法再从远程获取...

```
$git fetch origin
! [rejected]        master     -> origin/master  (non-fast-forward) 
```

我不知道要寻找什么或发生了什么，因为它一直工作到现在。配置就不多说了：

```
[remote "origin"]
    url = http://xx.xxx.xx/project.git
    fetch = refs/tags/*:refs/tags/*
    fetch = refs/heads/*:refs/remotes/origin/*
    push = refs/tags/*:refs/tags/*
    push = refs/heads/master:refs/heads/master 
```

其他同事可能在遥控器上推送了一些东西，但我们这样做了很长时间没有问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:18:45.210

1.  正如您自己发现的那样，您的 fetch refspec 是非标准的：缺少“+”前缀。它是*有效*的，只是它不是 Git 默认设置的，因为默认情况下它会在获取时覆盖远程分支的内容。

    Git 为命名远程添加的默认 refspec 如下所示：

    ```
    $ git config --get remote.origin.fetch
    +refs/heads/*:refs/remotes/origin/* 
    ```

    因此，您可能应该只撤消您手动完成的操作并坚持使用默认值，直到您真正了解 refspecs 和 fetching 的工作原理（至少通过阅读[`git-fetch`手册页）。](https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)

2.  `git merge origin master`意思是«将分支“origin”和“master”合并到本地分支中»（进行所谓的“章鱼合并”）。

    您要么想要`git pull origin master`（这意味着«从“origin”获取分支“master”，然后将其合并到当前签出的分支中»）或`git fetch origin`后跟`git merge origin/master`，其中“origin/master”指的是远程分支应该创建/更新为工作的结果`git fetch origin`（以上述第一点为准）。

最重要的是，您似乎试图通过编辑配置文件而不是仅仅运行来创建远程`git remote add <name> <git_url>`。除非您真正了解内部工作原理，否则不要这样做。

[阅读远程分支](http://git-scm.com/book/en/Git-Branching-Remote-Branches)也是必不可少的。

# asp.net - 如何更新 PDF 文件？

> ID：15968453
> 
> 赞同：-3
> 
> 时间：2013-04-12T10:02:29.197
> 
> 标签：asp.net, c#-4.0, pdf, itextsharp

我需要在 ASP.NET 的 PDF 文档中用用户从下拉列表中选择的新词替换一个词。我正在使用 iTextSharp ，但创建的新 PDF 全部失真，因为我无法在提取时提取 PDF 的格式/样式信息。另外，有没有办法逐行阅读pdf？请帮忙..

```
 protected void Page_Load(object sender, EventArgs e)
    {
        String s = DropDownList1.SelectedValue;
        Response.Write(s);
        ListFieldNames(s);
    }
    private void CreatePDF(string text)
    {
        string outFileName = @"z:\TEMP\PDF\Test_abc.pdf";
        Document doc = new Document();
        doc.SetMargins(30f, 30f, 30f, 30f);
        PdfWriter.GetInstance(doc, new FileStream(outFileName, FileMode.Create));
        doc.Open();
        BaseFont bfTimes = BaseFont.CreateFont(BaseFont.COURIER, BaseFont.CP1252, false);
        Font times = new Font(bfTimes, 12, Font.BOLDITALIC);
        //Chunk ch = new Chunk(text,times);
        Paragraph para = new Paragraph(text,times);

        //para.SpacingAfter = 9f;
        para.Alignment = Element.ALIGN_CENTER;
        //para.IndentationLeft = 100;
        doc.Add(para);

        //doc.Add(new Paragraph(text,times));
        doc.Close();
        Response.Redirect(@"z:\TEMP\PDF\Test_abc.pdf",false);

    }

    private void ListFieldNames(string s)
    {
        ArrayList arrCheck = new ArrayList();
        try
        {
            string pdfTemplate = @"z:\TEMP\PDF\abc.pdf";
            //string dest = @"z:\TEMP\PDF\Test_abc.pdf";

            PdfReader pdfReader = new PdfReader(pdfTemplate);
            string pdfText = string.Empty;
            string extracttext = "";
            for (int page = 1; page <= pdfReader.NumberOfPages; page++)
            {

                ITextExtractionStrategy its = new iTextSharp.text.pdf.parser.SimpleTextExtractionStrategy();
                PdfReader reader = new PdfReader((string)pdfTemplate);
                extracttext = PdfTextExtractor.GetTextFromPage(reader, page, its);
                extracttext = Encoding.Unicode.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.Unicode, Encoding.Default.GetBytes(extracttext)));
                pdfText = pdfText + extracttext;

                pdfText = pdfText.Replace("[xyz]", s);
                pdfReader.Close();
            }

            CreatePDF(pdfText);
        }
        catch (Exception ex)
        {

        }
        finally
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:38:36.263

你一个接一个地做出错误的假设。

1.  您假设 PDF 中存在“线条”的概念。这是错误的。在文本状态中，不同的文本片段被绘制在页面上的绝对位置。对于每个“显示文本”运算符，iText 将返回一个`TextRenderInfo`对象，其中包含已绘制的文本部分及其坐标。一行可以包含多个文本片段。文本片段可能包含空格，甚至可能为空。
2.  您假设 PDF 中的所有文本都保持其自然阅读顺序。对于 PDF/UA（UA 代表 Universal Accessibility），这应该是正确的，但对于您可以在野外找到的大多数 PDF，它肯定不是正确的。这就是 iText 提供基于位置的文本提取的原因（参见[iText in Action, Second Edition](http://itextpdf.com/book)的 p521 ）。如 p516 中所述，文本“Hello World”可以在 PDF 中存储为“ld”、“Wor”、“llo”、“He”。将对所有文本片段进行排序，`LocationTextExtractionStrategy`并在必要时重新构建单词。例如：它将“He”和“llo”连接到“Hello”，因为“He”片段和“llo”片段之间没有足够的空间。然而，由于未知的原因（可能是无知），你'`SimpleTextExtractionStrategy`
3.  您完全忽略了所有图形状态运算符，以及定义字体的文本状态运算符等...
4.  您假设 PDF 是一种文字处理格式。这在许多层面上都是错误的，您的代码也是如此。请阅读[我的书第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)的介绍。

所有这些错误的假设几乎让我想对你的问题投反对票。冒着被自己否决这个答案的风险，我必须告诉你，你不应该尝试“做同样的事情”。你在问一些非常复杂的问题，在很多情况下甚至是不可能的！

# iphone - 以编程方式加载时 UIView 自动调整大小问题

> ID：15968454
> 
> 赞同：1
> 
> 时间：2013-04-12T10:02:35.993
> 
> 标签：iphone, objective-c, uiview, autoresize, autoresizingmask

我在 xib 中添加了一个带有 UIImage 和 UILabel 的 UIView。我已经在 xib 本身中设置了自动调整大小。我正在呈现这个视图以从底部到中心进行动画处理，我在动画后调整最后一帧，但是视图没有自动调整大小的效果。

# android - alertDialog 访问 onClick() 中的值

> ID：15968455
> 
> 赞同：1
> 
> 时间：2013-04-12T10:02:38.150
> 
> 标签：android, android-alertdialog

如何在 onClick() 之外的 onClick() 中访问用户接受的值。我已经在全局范围内声明了变量 currentIntervalchoice，我将在其中检索值。如何在 else{} 部分访问 currentIntervalchoice 的值。

```
 private void doFirstRun()
{
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    if (settings.getBoolean("isFirstRun", true))
    {
        //-------------------------------------------------------------------------
        Toast.makeText(getApplicationContext(),"in 1st run true", Toast.LENGTH_LONG).show();
        LayoutInflater li = LayoutInflater.from(this);
        View promptsView = li.inflate(R.layout.prompts, null);
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        // set prompts.xml to alertdialog builder
        alertDialogBuilder.setView(promptsView);
        final EditText userInput = (EditText) promptsView
                .findViewById(R.id.editTextDialogUserInput);

        // set dialog message
        alertDialogBuilder.setCancelable(false).setPositiveButton("OK",
                new DialogInterface.OnClickListener()
                {
            public void onClick(DialogInterface dialog,int which)
            {
                 String value = userInput.getText().toString();
                 currentIntervalChoice=Integer.parseInt(value);
                toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                        AppSettings.setLoggingInterval(MainActivity.this,currentIntervalChoice));
                dialog.dismiss();
                // return;  
            }
              });
        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();
        // show it
        alertDialog.show();
        SharedPreferences.Editor editor = settings.edit();
        editor.putBoolean("isFirstRun", false);
        editor.commit();
    }
    else
    {

        Toast.makeText(getApplicationContext(),"in 1st run false", Toast.LENGTH_LONG).show();       
        toggleLogging(AppSettings.getServiceRunning(MainActivity.this),
                AppSettings.setLoggingInterval(MainActivity.this,currentIntervalChoice));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:06:53.750

据我所知，您正在使用共享首选项来存储/检查这是否是应用程序的第一次运行。您的`else`部分不会在同一次运行中执行（因为它不是第一次运行）。您应该做的是将用户输入的值存储到共享首选项中，与存储`isFirstRun`标志的方式完全相同。然后，您`else`只需从您共享的偏好中读取该值即可。像这样的东西：

```
final SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
if (settings.getBoolean("isFirstRun", true))
{
    ...

    alertDialogBuilder.setCancelable(false).setPositiveButton("OK",
            new DialogInterface.OnClickListener()
            {
        public void onClick(DialogInterface dialog,int which)
        {
             String value = userInput.getText().toString();
             int currentIntervalChoice=Integer.parseInt(value);
             Editor edit = settings.edit();
             editor.putBoolean("isFirstRun", false);
             editor.putInt("currentIntervalChoice", currentIntervalChoice);
             editor.commit();

             ...
        }
          });
    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();
    // show it
    alertDialog.show();
}
else
{
    int currentIntervalChoice = settings.getInt("currentIntervalChoice", 0);

    ...
} 
```

请注意，我删除了不相关的代码 - 您可能需要保留它。我还移动了将您的`isFirstRun`标志存储在`onClick`. 您可能还想对该值添加一些验证，但这取决于您的逻辑。

# ios - 向 NSSet 添加对象

> ID：15968457
> 
> 赞同：1
> 
> 时间：2013-04-12T10:02:40.737
> 
> 标签：ios, objective-c, set, nsset

我有 2 个指向同一个 NSSet 的对象（对象 A 和对象 B）。

如果我从集合中删除对象，对象 A 和 B 都会看到删除。

如果我将对象 A 中的对象添加到集合中，则这不会反映在对象 B 中，反之亦然。

如果他们都指向同一个对象，为什么他们看不到添加，因为他们确实看到了删除。

必须在这里遗漏一些简单的东西吗？

多谢你们

# iphone - 单例更改不保留到下查看IOS

> ID：15968460
> 
> 赞同：2
> 
> 时间：2013-04-12T10:02:48.857
> 
> 标签：iphone, ios, singleton, global-variables

我有一个单例类，我打算在整个应用程序中共享它。它看起来像这样：

.m

```
 @implementation PersonalGlobal

@synthesize firstName;
@synthesize lastName;
@synthesize SSN;
@synthesize customerNo;
@synthesize email;
@synthesize address;
@synthesize city;
@synthesize postalCode;
@synthesize telNo;
@synthesize mobileNo;

#pragma mark Singleton Methods

+ (id)sharedPersonal {
    static PersonalGlobal *sharedPersonalGlobal = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedPersonalGlobal = [[self alloc] init];
    });
    return sharedPersonalGlobal;
}

- (void)dealloc {
    [super dealloc];
    // Should never be called
}

@end 
```

。H

```
#import <foundation/Foundation.h>

@interface PersonalGlobal : NSObject {
    NSString *firstName;
    NSString *lastName;
    NSString *SSN;
    NSString *customerNo;
    NSString *email;
    NSString *address;
    NSString *city;
    NSString *postalCode;
    NSString *telNo;
    NSString *mobileNo;    
}

@property (nonatomic, retain) NSString *firstName;
@property (nonatomic, retain) NSString *lastName;
@property (nonatomic, retain) NSString *SSN;
@property (nonatomic, retain) NSString *customerNo;
@property (nonatomic, retain) NSString *email;
@property (nonatomic, retain) NSString *address;
@property (nonatomic, retain) NSString *city;
@property (nonatomic, retain) NSString *postalCode;
@property (nonatomic, retain) NSString *telNo;
@property (nonatomic, retain) NSString *mobileNo;

+ (id)sharedPersonal;

@end 
```

在代码中，我将字符串保存到它，如下所示：

```
PersonalGlobal *sharedPersonal = [PersonalGlobal sharedPersonal];
sharedPersonal.firstName = @"Some string"; 
```

但是当我改变视图并尝试访问这样的字符串时：

```
 PersonalGlobal *sharedPersonal = [PersonalGlobal sharedPersonal];
   //Setting some textfield    
   sometextfield.text = sharedPersonal.firstName; 
```

我什么都得不到。我`#import "PersonalGlobal.h"`在所有文件中都做了一个。我可以以任何方式将更改提交给单例类吗？

谁能看到我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:25:35.227

您的实现看起来不错。如果您的单例返回唯一的一个实例，这应该可以工作。所以对你的`sharedPersonal`方法有疑问。只需尝试在此方法中添加断点，并查看它是否每次都创建一个新实例。作为参考，我得到了[这个](https://stackoverflow.com/questions/5720029/create-singleton-using-gcds-dispatch-once-in-objective-c)SO 问题。

如果没有，那么你也可以试试这个：

```
+(SingleTon *)getSharedInstance
{
    static PersonalGlobal *sharedPersonalGlobal = nil;
    if (sharedPersonalGlobal==nil)
    {
        sharedPersonalGlobal=[[PersonalGlobal alloc]init];
    }
    return sharedPersonalGlobal;
} 
```

这是我的工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:05:07.927

您的单例实现看起来不错。`firstName`如果在这种情况下，您编写的用于设置just的代码永远不会被执行，我不会感到惊讶。如果我是你，我会逐步检查代码。

# python - 我在哪里可以找到 _sre.py python 内置模块？

> ID：15968462
> 
> 赞同：4
> 
> 时间：2013-04-12T10:02:50.920
> 
> 标签：python, regex

我正在研究python正则表达式（`re.py`）源代码。

在`re.py`他们导入的模块中`sre_compile`：

```
import sre_compile 
```

我查看了模块 sre_compile 他们`_sre` 在第 13 行导入了模块

```
import _sre, sys 
```

我搜索了该模块`_sre.py`，但在任何地方都找不到它，我什至试图在我的外壳中
找到它。`_sre.py`

最后我尝试用python解释器找到它。我导入`_sre`了，我试图寻找的`__file__`属性，`_sre`但它给了我以下错误：

```
AttributeError: 'module' object has no attribute '__file__' 
```

在哪里可以找到`_sre`模块源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:03:23.423

`_sre`是实现大部分`re`模块功能的 C 扩展。C 扩展通常没有`__file__`属性。

因此，您正在寻找[`_sre.c`源文件](http://hg.python.org/cpython/file/2.7/Modules/_sre.c)。

# mongodb - Mongo Map Reduce 错误

> ID：15968465
> 
> 赞同：1
> 
> 时间：2013-04-12T10:03:00.343
> 
> 标签：mongodb, mapreduce

作为 MongoDB 的新手，我正在尝试调用 MapReduce。不幸的是，我收到以下错误：

```
mongos> db.events.mapReduce(m,r,"errors");
Fri Apr 12 11:39:15.637 JavaScript execution failed: map reduce failed:{
    "ok" : 0,
    "errmsg" : "MR parallel processing failed: { errmsg: \"exception: reduce -> multiple not supported yet\", code: 10075, ok: 0.0 }"
} at src/mongo/shell/collection.js:L970
mongos> 
```

我正在使用 Mongo 2.4.0

我的事件集合如下所示：

```
{ "sid" : "1UADM45MCGRTW ", "time" : ISODate("2013-04-08T11:33:13.229Z"), "class" : "S", "service" : "service1" }
{ "sid" : "1UADM45MCGRTW ", "time" : ISODate("2013-04-08T11:33:13.229Z"), "class" : "I", "service" : "service1" }
{ "sid" : "1UADM45MCGRTW ", "time" : ISODate("2013-04-08T11:33:13.236Z"), "class" : "E", "text" : "error message" }
{ "sid" : "1UADM45MCGRTW ", "time" : ISODate("2013-04-08T11:33:13.239Z"), "class" : "F", "service" : "service1" }

{ "sid" : "1UDO3H7YUOK08 ", "time" : ISODate("2013-04-08T11:33:08.095Z"), "class" : "S", "service" : "service2" }
{ "sid" : "1UDO3H7YUOK08 ", "time" : ISODate("2013-04-08T11:33:08.095Z"), "class" : "I", "service" : "service2" }
{ "sid" : "1UDO3H7YUOK08 ", "time" : ISODate("2013-04-08T11:33:08.173Z"), "class" : "E", "text" : "another error message" }
{ "sid" : "1UDO3H7YUOK08 ", "time" : ISODate("2013-04-08T11:33:08.188Z"), "class" : "F", "service" : "service2" }

{ "sid" : "1UDO3JVXIS2UZ ", "time" : ISODate("2013-04-08T11:28:39.480Z"), "class" : "I", "service" : "service1" }
{ ""sid" : "1UDO3JVXIS2UZ ", "time" : ISODate("2013-04-08T11:28:39.480Z"), "class" : "S", "service" : "service1" }
{ "sid" : "1UDO3JVXIS2UZ ", "time" : ISODate("2013-04-08T11:28:40.853Z"), "class" : "F", "service" : "service1" }
{ "sid" : "1UDO3JVXIS2UZ ", "time" : ISODate("2013-04-08T11:28:40.852Z"), "class" : "I", "service" : "service1" } 
```

我的目的是获取所有“E”条目并将它们与“F”条目的相应“sid”的“服务”字段结合起来。所以这应该很简单，但我无法进行（由于上述错误）。

我使用的 map/reduce 函数是：

```
var m = function() {
    if (this.class == "E") {
        value = { time: this.time, error: this.text };
        emit(this.sid, value);
    } else if (this.class == "F") {
        value = { service: this.service };
        emit(this.sid, value);
    }
}

var r = function(key,values) {
    return values;
}

db.events.mapReduce(m,r,"errors"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T00:59:59.957

问题是您想要累积每个键的所有错误，这意味着您必须发出一个文档数组，然后您的 reduce 必须将它们组合成一个数组（因为它将接收一个数组数组）。

您遇到的另一个问题是您希望将每个唯一 cid 的不同类组合成一些组合的缩减结果，但您的 reduce 函数甚至没有尝试这样做。

很难知道每个 sid 可能获得多少不同的类值，但如果它就像您提供的示例数据一样，我猜您想要这样的东西：

```
var m = function() {
    array = [];
    if (this.class == "E") {
        value = { time: this.time, error: this.text };
        array.push(value);
        emit(this.sid, {a:array});
    } else if (this.class == "F") {
        value = { service: this.service };
        array.push(value);
        emit(this.sid, {a:array});
    }
}

var r = function(key,values) {
    result = {a:[]};
    values.forEach(function (v) {
       result.a = v.a.concat(result.a);
    });
    return result;
}

db.events.mapReduce(m,r,"errors"); 
```

在您的示例中，生成的集合将如下所示：

```
> db.errors.find().pretty()
{
    "_id" : "1UADM45MCGRTW ",
    "value" : {
        "a" : [
            {
                "service" : "service1"
            },
            {
                "time" : ISODate("2013-04-08T11:33:13.236Z"),
                "error" : "error message"
            }
        ]
    }
}
{
    "_id" : "1UDO3H7YUOK08 ",
    "value" : {
        "a" : [
            {
                "service" : "service2"
            },
            {
                "time" : ISODate("2013-04-08T11:33:08.173Z"),
                "error" : "another error message"
            }
        ]
    }
}
{
    "_id" : "1UDO3JVXIS2UZ ",
    "value" : {
        "a" : [
            {
                "service" : "service1"
            }
        ]
    }
} 
```

您可能可以添加一个 finalize 函数来将此数组转换为单个文档的结果，但这取决于您想要拥有的结果集合的格式以及每个 sid 的预期输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:38:55.773

根据文档（[故障排除reduce函数](http://docs.mongodb.org/manual/tutorial/troubleshoot-reduce-function/)）“ *reduce函数必须返回一个对象，其类型必须与map函数发出的值的类型相同*”

当你发射一个对象时，reduce 也应该发射一个对象 - 所以包裹`values`一个对象，你应该很高兴。

# java - 从树打印匹配

> ID：15968470
> 
> 赞同：0
> 
> 时间：2013-04-12T10:03:16.890
> 
> 标签：java

我正在尝试从作为文本文件的字典创建一个“单词完成”树 java 程序，但我不确定从这里去哪里。单词完成程序将匹配以输入的字符串开头的任何单词。我是 java/编程新手。我将树设计为多路树，每个节点将字符存储为字母和布尔变量以指示它是否是单词的结尾（以及其他内容）。

我正试图查看我将文件读入树中是否正常工作。但是，当我尝试打印我的树时，它无法正常工作。在第一个单词之后的每个单词中都没有正确显示第一个字母。出于测试目的，我没有从文件中读取，而是仅在树中添加了 4 个单词（Base、Basement、Ma、Matthew）。

所以我的问题是谁能告诉我为什么它不能正确打印以及我接下来需要做什么才能完成单词完成？

非常感谢大家花时间帮助我解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:18:17.073

这是这部分

```
 while(t!=null) {
    if(t.down!=null && t.right!=null) {
        //System.out.println(t.letter + " children");
        //System.out.print(t.letter);
        print(t.down);
    }
    t=t.right; 
```

当你遇到另一个你应该打印的单词时，你从`t.down`. 例如，您可以将直到该节点的所有字母存储在相互堆栈上，打印它们，然后继续打印树中的其他字母。

这里的问题是：`t.down`换句话来说是下一个字母（从当前节点的角度来看）。

尝试使用常见的起始子字符串添加更多单词以轻松理解我的观点。

# c# - 从 Image 类类型中获取 Image 文件路径

> ID：15968471
> 
> 赞同：1
> 
> 时间：2013-04-12T10:03:20.517
> 
> 标签：c#, windows, image

我有一个关于`C#` `Image class type`. 考虑以下语句

```
Image img = Image.LoadFromFile(@"C:\1.jpg"); 
```

问题：如何从`img`变量中获取图像文件路径？

猜想：我不认为我们可以有图像路径，因为如果我们看到 LoadFromFile 方法，它会从物理文件路径中读取图像并将其逐字节加载到内存中。一旦加载，它将位于 img 对象中。img 对象现在将独立于磁盘上的 Image 物理文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:53:10.380

您的猜测是正确的，图像对象在加载到内存后与文件没有连接。您需要将路径存储在单独的变量中，或者执行以下操作：

```
public class ImageEx
{
    public Image Image { get; set; }
    public string Filename { get; set; }

    public ImageEx(string filename)
    {
        this.Image = Image.FromFile(filename);
        this.Filename = filename;
    }
}

public class SomeClass
{
    public void SomeMethod()
    {
        ImageEx img = new ImageEx(@"C:\1.jpg");

        Debug.WriteLine("Loaded file: {0}", img.Filename);
        Debug.WriteLine("Dimensions: {0}x{1}", img.Image.Width, img.Image.Height);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:06:10.237

尝试使用以下

```
 img.ImageUrl 
```

# c# - 通过代理连接数据库

> ID：15968474
> 
> 赞同：0
> 
> 时间：2013-04-12T10:03:29.327
> 
> 标签：c#, asp.net, sql-server, entity-framework, proxy

我在我的 asp.net c# 网站项目中使用实体框架 5.0。

数据库服务器位于远程服务器上，我的开发人员机器位于具有 LDAP 身份验证的 HTTP 代理后面。

如何配置我的项目以使用特定的代理设置来建立与我的 MSSQL 服务器的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:43:55.843

由于 SQL Server 本身不使用 HTTP 通信，因此它不能与 HTTP 代理一起使用（除非代理允许直通，在这种情况下，它确实断开了自己充当代理的连接，并且[此页面可能很有趣](http://www.example-code.com/sql/socket_http_proxy.asp)）。远形式的所有 HTTP 代理都将允许这样做。

要通过 HTTP 代理从 SQL Server 向您的安装公开数据，您可能需要考虑在 SQL Server 端创建[OData 服务](http://en.wikipedia.org/wiki/Open_Data_Protocol)，并将其用于应用程序中的数据访问。这将允许您以代理友好的方式通过 HTTP 查询数据库。

# objective-c - 如何在 UIscrollView 中显示来自 URL 的许多图像

> ID：15968479
> 
> 赞同：-2
> 
> 时间：2013-04-12T10:03:49.723
> 
> 标签：objective-c, ios5, uiscrollview, uiimageview

我想创建一个页面，该页面具有 3 个水平（从右到左）在顶部和中间和向下页面滚动。

在每个滚动视图中都有很多这样的图像：

```
----------------------------------------
| -------    --------     --------     |
| |     |    |      |     |      |     |   Outside the box is scroller!!!
| |     |    |      |     |      |     |
| -------    --------     --------     |
---------------------------------------- 
```

在任何滚动页面中存在 3 个图像。

我想在更改存在此页面的滚动图像的页面时更改！！！（如 IMDB 应用程序中的滚动）

我可以创建滚动，我可以从 URL 读取许多图像，但我无法连接这些！！！:(

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:18:28.087

检查[iCarousel](https://github.com/nicklockwood/iCarousel)出色的库以执行此类操作。它包含大量示例并兼容iOS5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:19:53.290

这可能对您有用：

A. 创建一个`UIView`以容纳 3`UImageViews`以包含 3 个图像。

B. 添加`UIView`作为`contentView`的`UISrollView`。

C. 使用`UIPageControl`和的组合`UIScrollView`。

# c# - 性能 IEnumerable .ToList().ForEach() 循环

> ID：15968481
> 
> 赞同：-2
> 
> 时间：2013-04-12T10:03:52.187
> 
> 标签：c#, linq

这两个语句之间有任何性能差异吗？

```
IEnumerable<T>.ToList().ForEach(x => Console.WriteLine(x)); 
```

和

```
foreach (var obj in IEnumerable<T>)
   Console.WriteLine(obj) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:07:58.097

在第一个示例中，您将

1.  **通过枚举源**创建列表
***   **枚举新列表**并调用`Console.WriteLine`每个元素。**

 **在第二个示例中，您将

1.  **枚举源**并调用`Console.WriteLine`每个元素。

第一个比第二个有两个性能惩罚：

*   新`List`对象的创建
*   双重枚举：在原始来源上，然后是列表**

# java - 我可以让 JFrame 看起来像 JWindow 吗？

> ID：15968483
> 
> 赞同：2
> 
> 时间：2013-04-12T10:03:56.717
> 
> 标签：java, swing, jframe, jwindow

我可以从 JFrame 中删除边框以及最小化和关闭按钮吗？我不能使用 JWindow，因为它无法处理我理解的 keyListener 。（至少不容易）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T10:08:25.833

> 我可以从 JFrame 中删除边框以及最小化和关闭按钮吗？

*   [JFrame.setUndecorated(true)](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setUndecorated%28boolean%29)

> 我不能使用 JWindow，因为它无法处理我理解的 keyListener 。（至少不容易）。

*   JFrame、JDialog 或 JWindow 不响应 KeyListener，JComponent 必须为 KeyListener`FocusOwner`或实现`setFocusable`

*   不要使用 KeyListener，而是使用 KeyBindings

> 我不能使用 JWindow，因为它无法处理我理解的 keyListener 。

*   射向黑暗，

*   如果没有可见的 JFrame 作为父级，JTextComponents 在 JWindow 中不可编辑（真的不知道原因）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:08:02.377

不确定您在这里真正想要实现的目标......但会`setUndecorated(true)`为您做到吗？

# c# - Linq to Sql-我可以构建一个通用的更新操作吗？

> ID：15968486
> 
> 赞同：1
> 
> 时间：2013-04-12T10:04:08.273
> 
> 标签：c#, linq-to-sql, business-logic-layer

对于我的每个表都有 Key 值，所以我的问题是如何获得 Key 属性？我想搜索我在参数中得到的那个对象，并通过这个更新的对象更新表。如何从表中找到我的对象？

```
public static void Update<TEntity>(TEntity UpdatedObject) where TEntity : class
        {
            DatabaseLinqDataContext ClientLinq = new DatabaseLinqDataContext(Patch);
            ClientLinq.GetTable<TEntity>()// I want to search that object i got in the paramater and update it. how do I find my object from the table?
            ClientLinq.SubmitChanges();
        } 
```

任何想法？解决这个问题的正确方法是什么？

**这个动作写在业务逻辑层中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:23:02.430

有几个案例需要考虑。

如果实体实例之前已被此数据上下文加载，则只需调用 SubmitChanges。无需执行任何其他操作（此时将更新所有修改的实例）。

如果实体实例之前由不同的数据上下文加载，则需要制作一个不会被跟踪的新副本，然后按照下一个案例。

如果实体实例不是由数据上下文加载的（或者实例是上面的副本），那么您需要调用

```
 //attach the changes to the tracked object graph
dataContext.GetTable<T>().Attach(t, true);
  //if type uses optimistic concurrency, then you need to refresh
  //load the "original" state for the tracked object graph
dataContext.Refresh(t, RefreshMode.KeepCurrentValues);
dataContext.SubmitChanges(); 
```

或者，最好调用：

```
dataContext.GetTable<T>().Attach(tChanged, tOriginal);
dataContext.SubmitChanges(); 
```

# php - 如何使用 PHP 在文本框中查找第二项的值

> ID：15968492
> 
> 赞同：0
> 
> 时间：2013-04-12T10:04:21.093
> 
> 标签：php, web-applications, browser

我正在做一个项目，我想找到用户在文本中输入的内容，但我不想知道我想知道第二个术语的整个值。 **示例：用户输入：ABCD 现在我希望我的程序打印 B。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:12:42.800

```
$str = "Hello world";
if(strlen($str))
  echo substr($str,1,1);  //e 
```

**说明**：[substr()](http://php.net/manual/en/function.substr.php) 函数用于从字符串中截取字符串的一部分，从指定位置开始。

**语法**：substr(string_name, start_pos, length_to_cut)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:15:01.850

为此，使用[substr()](http://www.php.net/manual/en/function.substr.php)从字符串中获取字符。

例子 ：

```
<?php 
  // substr(string, position, limit) 
  echo substr('welcome', 1, 1);       // It display 'e'
?> 
```

希望能帮助到你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:20:18.343

```
User  substr function . It takes three parameter 
Ist is string 
2nd is start value
3rd is length. Remeber it start count from 0
$string ='ABCD';
echo substr($string,1,1);
// will out put B 
```

# r - 如何删除仅包含 NA 的列？

> ID：15968494
> 
> 赞同：97
> 
> 时间：2013-04-12T10:04:29.407
> 
> 标签：r, dataframe, na

我有一个 data.frame 包含一些具有所有 NA 值的列。如何从 data.frame 中删除它们？

我可以使用该功能，

```
na.omit(...) 
```

指定一些额外的参数？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-04-12T10:25:28.330

一种方法：

```
df[, colSums(is.na(df)) != nrow(df)] 
```

如果列中的 NA 数等于行数，则它必须完全为 NA。

或类似地

```
df[colSums(!is.na(df)) > 0] 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2017-07-28T22:06:11.780

这是一个 dplyr 解决方案：

```
df %>% select_if(~sum(!is.na(.)) > 0) 
```

**更新：**该`summarise_if()`功能自`dplyr 1.0`. `where()`以下是使用tidyselect 函数的另外两个解决方案：

```
df %>% 
  select(
    where(
      ~sum(!is.na(.x)) > 0
    )
  ) 
```

```
df %>% 
  select(
    where(
      ~!all(is.na(.x))
    )
  ) 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-07-11T19:59:21.947

另一种选择是`janitor`包装：

```
df <- remove_empty_cols(df) 
```

[https://github.com/sfirke/janitor](https://github.com/sfirke/janitor)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-04-12T10:14:24.733

似乎您只想删除带有**ALL的****列** `NA`，留下带有某些行的列`NA`。我会这样做（但我确信有一个有效的矢量化解决方案：

```
#set seed for reproducibility
set.seed <- 103
df <- data.frame( id = 1:10 , nas = rep( NA , 10 ) , vals = sample( c( 1:3 , NA ) , 10 , repl = TRUE ) )
df
#      id nas vals
#   1   1  NA   NA
#   2   2  NA    2
#   3   3  NA    1
#   4   4  NA    2
#   5   5  NA    2
#   6   6  NA    3
#   7   7  NA    2
#   8   8  NA    3
#   9   9  NA    3
#   10 10  NA    2

#Use this command to remove columns that are entirely NA values, it will leave columns where only some values are NA
df[ , ! apply( df , 2 , function(x) all(is.na(x)) ) ]
#      id vals
#   1   1   NA
#   2   2    2
#   3   3    1
#   4   4    2
#   5   5    2
#   6   6    3
#   7   7    2
#   8   8    3
#   9   9    3
#   10 10    2 
```

如果您发现自己处于要删除具有任何`NA`值的列的情况，您只需将`all`上面的命令更改为`any`.

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-12-27T15:08:55.563

一个直观的脚本：`dplyr::select_if(~!all(is.na(.)))`. 它实际上只保留并非所有元素缺失的列。（删除所有元素缺失的列）。

```
> df <- data.frame( id = 1:10 , nas = rep( NA , 10 ) , vals = sample( c( 1:3 , NA ) , 10 , repl = TRUE ) )

> df %>% glimpse()
Observations: 10
Variables: 3
$ id   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
$ nas  <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA
$ vals <int> NA, 1, 1, NA, 1, 1, 1, 2, 3, NA

> df %>% select_if(~!all(is.na(.))) 
   id vals
1   1   NA
2   2    1
3   3    1
4   4   NA
5   5    1
6   6    1
7   7    1
8   8    2
9   9    3
10 10   NA 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-03-17T11:59:11.170

另一种选择`Filter`

```
Filter(function(x) !all(is.na(x)), df) 
```

注意：来自@Simon O'Hanlon 帖子的数据。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2020-05-05T09:04:07.923

因为性能对我来说真的很重要，所以我对上面的所有功能进行了基准测试。

注意：来自@Simon O'Hanlon 帖子的数据。只有大小 15000 而不是 10。

```
library(tidyverse)
library(microbenchmark)

set.seed(123)
df <- data.frame(id = 1:15000,
                 nas = rep(NA, 15000), 
                 vals = sample(c(1:3, NA), 15000,
                               repl = TRUE))
df

MadSconeF1 <- function(x) x[, colSums(is.na(x)) != nrow(x)]

MadSconeF2 <- function(x) x[colSums(!is.na(x)) > 0]

BradCannell <- function(x) x %>% select_if(~sum(!is.na(.)) > 0)

SimonOHanlon <- function(x) x[ , !apply(x, 2 ,function(y) all(is.na(y)))]

jsta <- function(x) janitor::remove_empty(x)

SiboJiang <- function(x) x %>% dplyr::select_if(~!all(is.na(.)))

akrun <- function(x) Filter(function(y) !all(is.na(y)), x)

mbm <- microbenchmark(
  "MadSconeF1" = {MadSconeF1(df)},
  "MadSconeF2" = {MadSconeF2(df)},
  "BradCannell" = {BradCannell(df)},
  "SimonOHanlon" = {SimonOHanlon(df)},
  "SiboJiang" = {SiboJiang(df)},
  "jsta" = {jsta(df)}, 
  "akrun" = {akrun(df)},
  times = 1000)

mbm 
```

结果：

```
Unit: microseconds
         expr    min      lq      mean  median      uq      max neval  cld
   MadSconeF1  154.5  178.35  257.9396  196.05  219.25   5001.0  1000 a   
   MadSconeF2  180.4  209.75  281.2541  226.40  251.05   6322.1  1000 a   
  BradCannell 2579.4 2884.90 3330.3700 3059.45 3379.30  33667.3  1000    d
 SimonOHanlon  511.0  565.00  943.3089  586.45  623.65 210338.4  1000  b  
    SiboJiang 2558.1 2853.05 3377.6702 3010.30 3310.00  89718.0  1000    d
         jsta 1544.8 1652.45 2031.5065 1706.05 1872.65  11594.9  1000   c 
        akrun   93.8  111.60  139.9482  121.90  135.45   3851.2  1000 a

autoplot(mbm) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/wSZel.png)](https://i.stack.imgur.com/wSZel.png)

```
mbm %>% 
  tbl_df() %>%
  ggplot(aes(sample = time)) + 
  stat_qq() + 
  stat_qq_line() +
  facet_wrap(~expr, scales = "free") 
```

[![在此处输入图像描述](https://i.stack.imgur.com/WDBN7.png)](https://i.stack.imgur.com/WDBN7.png)

# php - $_SERVER['REQUEST_URI'] 与 url 不匹配

> ID：15968495
> 
> 赞同：0
> 
> 时间：2013-04-12T10:04:34.487
> 
> 标签：php, apache, mod-rewrite, rewrite, globals

我在我的服务器 documentroot 的子文件夹中上传了一个新网站，`(www.example.com/demos/website-name)`就像我向客户展示演示一样。

在我的 cms 中，我使用`mod_rewrite`将所有请求推送到`index.php`php 中并进行“内部”重写，因此我必须检索它`$_SERVER['REQUEST_URI']`以读取它并加载正确的页面。

非常随机（并且仅当 cms 像这种情况下放置在子文件夹中时）`REQUEST_URI`与浏览器中的 uri 不匹配，但仍然是前一个：例如我在`"/cms/foo"`，我点击一个链接，将我`"/cms/bar"`带到页面重新加载，但如果我转储`REQUEST_URI`我仍然得到`"/cms/foo"`。

我真的无法理解这怎么可能。

这是 .htaccess 的样子：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

这就是我如何检索`REQUEST_URI`（`MainConfig::ROOT_URL`是子文件夹路径“/demos/website-name”）：

```
public static function getPath()
{
    if(isset(self::$cache['path'])) {
        return self::$cache['path'];
    }
    if(isset($_SERVER['REQUEST_URI'])) {
        $path = str_replace(MainConfig::ROOT_URL, '', $_SERVER["REQUEST_URI"]);
        $path = explode('/', $path);
        if(trim($path[1]) == '') {
            $path = array();
        }
        unset($path[0]);
        $path = array_values($path);
        for($i = 0; $i < count($path); $i++) {
            $fragment = $path[$i];
            if(strpos($fragment, '?') !== false) {
                $lastPathIndex = $i;
                break;
            } elseif(strpos($fragment, 'index.php') !== false) {
                $lastPathIndex = $i;
                break;
            }
        }
        if(isset($lastPathIndex)) {
            $lastPathElement = array();
            $length = count($path);
            for($i = $lastPathIndex; $i < $length; $i++) {
                $lastPathElement[] = $path[$i];
                unset($path[$i]);
            }
            $lastPathElement = str_replace('index.php', '', implode('/', $lastPathElement));
        }
        if(isset($lastPathElement)) {
            $path[] = $lastPathElement;
        }
    } else {
        $path = array();
    }
    $path = array_values($path);
    self::$cache['path'] = $path;
    return $path;
} 
```

# git - 如何添加 git repo？

> ID：15968496
> 
> 赞同：0
> 
> 时间：2013-04-12T10:04:34.470
> 
> 标签：git

例如，我有一个 git repo（名为 repo）和代码库（名为 mycode）。它由 git 管理。而且我已经有 100 个 git 提交了。

今天我在办公室又做了 5 次 git 提交。我只想把这 5 个提交带回家。然后我可以将它们发送到家里的代码库。 **如何获得这 5 个提交的补丁（不仅是第 5 个补丁）？**

如果我只是使用“diff”和“patch”命令，那么我只会得到最后一个/第 5 个补丁。但我想要的是保留所有提交历史。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:12:17.207

您可能对[`git bundle`](https://www.kernel.org/pub/software/scm/git/docs/git-bundle.html).

**例如：**

在办公室里：

```
git bundle create my.bundle HEAD@{5}.. 
```

在家：

```
git pull my.bundle 
```

当然，您可能希望使用专用的`tag`/来代替每次`branch`使用什么来代替（即 5 次提交）。`HEAD@{5}`

# php - 3层文件上传架构（浏览器/ PHP/ API）

> ID：15968497
> 
> 赞同：5
> 
> 时间：2013-04-12T10:04:38.303
> 
> 标签：php, file-upload, jersey

我们目前面临着处理大型 (>30 MB) 文件上传的设计挑战。我们的系统目前如下：

```
Browser <---AJAX---> PHP <---OAUTH---> REST API 
```

PHP 和 API 位于不同的服务器/域上。

将文件从浏览器上传到 PHP，然后从 PHP 上传到 API 对我来说听起来像是浪费带宽。

所以我们的想法是使用以下序列：

1.  来自 API 的 PHP 请求上传 URL
2.  API 创建随机数并将其作为上传 URL 发送回
3.  浏览器使用上传 URL 将文件直接上传到 API。

所以我们只传输文件数据一次。

这会有什么问题吗？

谢谢，

佩皮恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:36:45.003

如果 PHP 不需要对文件进行进一步处理，那么它应该没问题。

# android - ImageView 小部件旋转器

> ID：15968499
> 
> 赞同：0
> 
> 时间：2013-04-12T10:04:45.363
> 
> 标签：android, rotation, widget, imageview, banner

我正在开发一个循环显示一些图像的 android 小部件应用程序。此小部件模拟网站图像横幅旋转器。

我正在使用 ScheduledExecutorService 来执行将当前图像更改为下一个图像的任务。

所有图像应每 2 或 3 秒更改一次，但 Android 似乎不喜欢这种在几分钟内停止任务的行为。

我尝试使用动画 gif，但它显示为静态图像。

谁能给我任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:31:06.173

解决方案是使用android的Alarm Manager机制而不是ScheduledExecutorService。谢谢你的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:15:22.197

对于使用 gif，您可以使用 WebView 或 Movie 类（如本教程中的说明）。

[http://weavora.com/blog/2012/02/07/android-how-to-use-animated-gif/](http://weavora.com/blog/2012/02/07/android-how-to-use-animated-gif/)

和做一个横幅旋转器去这个链接[android 广告横幅](https://stackoverflow.com/questions/5011134/android-ad-banner)

# c# - 计算来自多个麦克风的声音输入的时间差

> ID：15968502
> 
> 赞同：2
> 
> 时间：2013-04-12T10:04:51.393
> 
> 标签：c#, input, time, microphone

我有一个 C# 项目，它将多个（目前是 2 个）麦克风作为音频设备，检测来自它们的声音，使用傅里叶变换处理它们的音频帧并显示它们。它还以三种颜色打印它们：红色表示输入更强的麦克风，绿色表示输入较弱的麦克风，灰色表示强度不足以引起任何兴趣的帧。

我项目的下一步是计算到达每个麦克风的声音样本的时间差。例如，如果我直接对着一个麦克风说话，而另一个在 3 英尺外，则差异应该是大约 3 毫秒（假设声速为 1 英尺/毫秒）。这当然只是一个例子。

谁能帮我这个？我基于此制作了我的项目：http: [//www.codeproject.com/Articles/20025/Sound-visualizer-in-C](http://www.codeproject.com/Articles/20025/Sound-visualizer-in-C)

# javascript - 如果列表为空，则隐藏父 div

> ID：15968511
> 
> 赞同：1
> 
> 时间：2013-04-12T10:05:11.597
> 
> 标签：javascript, jquery, html, css

我有以下......

```
<div class="validationbox">
    <h1>Errors</h1>
        <ul class="validationerrors">
            <li>Error 1</li>
            <li>Error 2</li>
            <li>Error 3</li>
        </ul>
</div> 
```

错误列表项是动态生成的，所以有时没有，如果没有列表项，我想隐藏“validationbox”div。

我想我应该看的是javascript或jquery，有人有例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:05:55.737

在 jQuery 中，您可以简单地执行以下操作：

```
$(".validationbox:not(:has(li))").hide(); 
```

在纯 JavaScript 中，您需要迭代“.validationbox”元素并在其中搜索`<li>`节点：

```
var div = document.getElementsByClassName("validationbox");
for (var i = 0, len = div.length; i < len; i++) {
    if (!div[i].getElementsByTagName("li").length) {
        div[i].style.display = "none";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:07:36.720

```
$('.validationbox').toggle( $('.validationerrors li').length ); 
```

`toggle()`接受一个布尔值作为参数。`$('.validationerrors li').length`如果没有`<li>`元素，将评估为 false，否则为 true，这将显示错误列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:12:36.627

你可以用不。

```
$('div .validationbox').not(':has(li)').hide(); 
```

希望对你有帮助

# python - 美丽的汤返回无

> ID：15968518
> 
> 赞同：2
> 
> 时间：2013-04-12T10:05:30.530
> 
> 标签：python, beautifulsoup

我有以下 html 代码，我使用漂亮的汤来提取信息。我想获得例如关系状态：关系

```
<table class="box-content-list" cellspacing="0">
            <tbody>
             <tr class="first">
              <td>
                   <strong>
                    Relationship status:
                   </strong>
               Relationship
              </td>
             </tr>
             <tr class="alt">
              <td>
               <strong>
                Living:
              </strong>
               With partner
              </td>
             </tr> 
```

我创建了以下代码：

```
xs = [x for x in soup.findAll('table', attrs = {'class':'box-content-list'})]       
    for x in xs:
        #print x
        sx = [s for s in x.findAll('tr',attrs={'class':'first'})]
        for s in sx:
            td_tabs = [td for td in s.findAll('td')]
            for td in td_tabs:
                title = td.findNext('strong')
                #print str(td)
                status = td.findNextSibling()
                print title.string
                print status 
```

但我得到的结果是关系状态：打印状态是打印无。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:37:52.257

有一种特殊的方法`get_text`（或`getText`在旧的 BeautifulSoup 版本中）来获取复杂标签的内容。用你的例子：

```
>>> example.td.get_text(' ', strip=True)
'Relationship status: Relationship' 
```

第一个参数是要使用的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:14:22.337

首先，不需要所有的列表推导；你的除了复制结果*什么都不*做，没有它们你可以安全地做。

您的列中*没有*下一个兄弟（只有*一个* `<td>`标签），因此它返回`None`. 您想从*标题*（标签）中获取`.next`属性：*`<strong>`*

 *```
for table in soup.findAll('table', attrs = {'class':'box-content-list'}):
    for row in table.findAll('tr',attrs={'class':'first'}):
        for col in row.findAll('td'):
            title = col.strong
            status = title.nextSibling
            print title.text.strip(), status.strip() 
```

打印：

```
Relationship status: Relationship 
```

以你为例。*

# c++ - 关于 C++ 中鼠标钩子的困惑

> ID：15968520
> 
> 赞同：0
> 
> 时间：2013-04-12T10:05:33.053
> 
> 标签：c++, windows, hook, mousemove, mouse-hook

我正在尝试获取全局鼠标位置。我有一个可以获取鼠标位置的钩子，但是它只能在钩子代码中访问它。试图访问 main 中的数据是行不通的。

解释这一点的最好方法是使用代码：

```
LRESULT CALLBACK mouseHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
     PMSLLHOOKSTRUCT p = (PMSLLHOOKSTRUCT) lParam;
     position.x = p->pt.x;
     position.y = p->pt.y;
     std::cout<<position.x<<std::endl;
     return CallNextHookEx(NULL, nCode, wParam, lParam);
}

int WINAPI WinMain (HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpszArgument,int nCmdShow)
{
     HHOOK mouseHook = SetWindowsHookEx(WH_MOUSE_LL,mouseHookProc,hInstance,NULL);

     MessageBox(NULL, "Press OK to close.", "", MB_OK);
     return 0;
} 
```

使用上面的代码，移动鼠标将在控制台窗口中显示新的位置。但是，如果我把`std::cout<<position.x<<std::endl;`main 放在里面，它只会说 0\. `position`是一个全局变量。

输出在 main 内部时的代码：

```
LRESULT CALLBACK mouseHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
     PMSLLHOOKSTRUCT p = (PMSLLHOOKSTRUCT) lParam;
     position.x = p->pt.x;
     position.y = p->pt.y;

     return CallNextHookEx(NULL, nCode, wParam, lParam);
}

int WINAPI WinMain (HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpszArgument,int nCmdShow)
{
     HHOOK mouseHook = SetWindowsHookEx(WH_MOUSE_LL,mouseHookProc,hInstance,NULL);
     for(;;)
     {
         std::cout<<position.x<<std::endl;
     }
     MessageBox(NULL, "Press OK to close.", "", MB_OK);
     return 0;
} 
```

第一段代码工作正常，它检测到鼠标位置，我只是不知道如何将 x,y 数据放入我的 main 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:23:32.497

重新发布此代码：

```
LRESULT CALLBACK mouseHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
     PMSLLHOOKSTRUCT p = (PMSLLHOOKSTRUCT) lParam;
     position.x = p->pt.x;
     position.y = p->pt.y;

     return CallNextHookEx(NULL, nCode, wParam, lParam);
}

int WINAPI WinMain (HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpszArgument,int nCmdShow)
{
     HHOOK mouseHook = SetWindowsHookEx(WH_MOUSE_LL,mouseHookProc,hInstance,NULL);
     std::cout<<position.x<<std::endl;
     MessageBox(NULL, "Press OK to close.", "", MB_OK);
     return 0;
} 
```

这是 main 函数指定应该发生的事情：

*   首先，调用`SetWindowsHookEx`（这种情况发生一次）。
*   然后，输出`position` （这种情况发生一次）。
*   然后，显示一个`MessageBox` （这种情况发生一次）。

就这样。

在调用`MessageBox`钩子过程期间（每当您移动鼠标时），它不会做任何可见的事情，只是进行内部更新。

你为什么期待更多？

* * *

怎么修：

*   与其依赖`MessageBox`不做任何输出的内部消息循环，不如自己编写代码。
*   与功能无关，而只是因为当前的代码就像非常脏的衣服，确实起到了它的作用，但穿起来感觉不好：用`WinMain`标准的 C 和 C++ 替换微软的怪物`main`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:16:55.033

对于**全局挂钩**，挂钩过程`mouseHookProc`应位于 DLL 中，以便可以将其注入进程。检查这个： http: [//www.codeproject.com/Articles/1037/Hooks-and-DLLs](http://www.codeproject.com/Articles/1037/Hooks-and-DLLs)

# svn - svnsync 无法启动 pre-revprop-change 钩子

> ID：15968526
> 
> 赞同：2
> 
> 时间：2013-04-12T10:06:04.213
> 
> 标签：svn, visualsvn-server, svn-hooks, svnsync

我正在尝试使用`svnsync`. 它在一个目标服务器上工作，但在另一个非常相似的设置上失败，我找不到有什么不同。两种情况下的源服务器都是相同的，所以我猜它的设置是无关紧要的。

目标服务器是：Windows Server 2008 R2 Standard SP1，64 位

SVN 是：VisualSVN Server 2.5.9（也试过 2.5.7 和 2.5.8）

**svnsync 初始化**失败：

```
E:\>svnsync init https://.../ https://.../
svnsync: E175002: DAV request failed; it's possible that the repository's pre-revprop-change hook either failed or is non-existent
svnsync: E175008: At least one property change failed; repository is unchanged
svnsync: E175002: Error setting property 'svn:sync-lock': Failed to start '.../hooks/pre-revprop-change.bat' hook 
```

Hook 存在且仅包含 1 行：

```
E:\>type ...\hooks\pre-revprop-change.bat
exit 0 
```

（相同的钩子适用于另一台目标服务器）

查看 Windows 中的事件查看器，我在 VisualSVN 服务器日志中看到以下错误：

```
Failed to start '.../hooks/pre-revprop-change.bat' hook  [500, #165001]
[client 2002:f8d:64d6::f8d:64d6]

Can't start process '.../hooks/pre-revprop-change.bat': Invalid argument  [500, #22]
[client 2002:f8d:64d6::f8d:64d6] 
```

使用的 svnsync 版本：

```
E:\>which svnsync
D:\Program Files (x86)\VisualSVN Server\bin\svnsync.EXE

E:\>svnsync --version
svnsync, version 1.7.9 (r1462340)
   compiled Apr  1 2013, 18:58:57

Copyright (C) 2013 The Apache Software Foundation.
This software consists of contributions made by many people; see the NOTICE file for more information.
Subversion is open source software, see http://subversion.apache.org/

The following repository access (RA) modules are available:

* ra_neon : Module for accessing a repository via WebDAV protocol using Neon.
  - handles 'http' scheme
  - handles 'https' scheme
* ra_svn : Module for accessing a repository using the svn network protocol.
  - handles 'svn' scheme
* ra_local : Module for accessing a repository on local disk.
  - handles 'file' scheme
* ra_serf : Module for accessing a repository via WebDAV protocol using serf.
  - handles 'http' scheme
  - handles 'https' scheme 
```

问题是 - 这里的 h*ll 有什么问题？)))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T05:47:46.690

重新启动目标服务器对我有用。

# c# - 我怎样才能获得更流畅的翻译？

> ID：15968531
> 
> 赞同：2
> 
> 时间：2013-04-12T10:06:15.430
> 
> 标签：c#, windows-phone-7, xaml

在 xaml 中，我将我的画布定义为：

```
 <Canvas Name="GameCanvas">

            <Canvas.RenderTransform>
                <CompositeTransform x:Name="CanvasRenderTransform" />
            </Canvas.RenderTransform> 
```

在 c# 中，我定义了以下内容，我在其中存储初始比例并在压缩时对其进行修改：

```
private void GestureListener_DragDelta(object sender, DragDeltaGestureEventArgs e)
        {
            Point p = e.GetPosition(GameCanvas);

            CanvasRenderTransform.TranslateX = p.X - originDragPoint.X;
            CanvasRenderTransform.TranslateY = p.Y - originDragPoint.Y;
        }

        private void GestureListener_DragStarted(object sender, DragStartedGestureEventArgs e)
        {
            originDragPoint = e.GetPosition(GameCanvas);
        } 
```

任何人都知道为什么当我移动它时它会闪烁并且移动得很差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:07:21.693

这里的解决方案是使用 DP CacheMode。这允许在第一次渲染后将视觉元素存储为位图。我们将更好地利用 GPU。

BitmapCaching 应该用于混合、变换（平移、拉伸、旋转）的场景。

检查此[链接](http://techtwaddle.net/2011/03/10/windows-phone-7-translation-rotation-scaling-and-the-effect-of-bitmapcache-on-performance/)以获取解释和精彩视频。

# ios - iOs：当标签页超过 5 个时如何更改“更多”后退按钮的颜色

> ID：15968533
> 
> 赞同：0
> 
> 时间：2013-04-12T10:06:16.323
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我有一个包含 6 个选项卡的应用程序，因此系统会自动生成前 4 个选项卡和第五个名为“Altro”（意大利语为“更多”）的选项卡，其中包含之前的第五个和第六个选项卡内容。

还行吧。问题是我不知道如何在通过“altro”选项卡时更改后退按钮的颜色。有什么建议吗？

一些屏幕截图可以更好地解释问题：

![橙色后退按钮](https://i.stack.imgur.com/NaHt5.png)

![Altro 选项卡](https://i.stack.imgur.com/WQN4T.png)

![蓝色后退按钮](https://i.stack.imgur.com/AKJkb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:08:25.883

```
UIImage *buttonImage = [UIImage imageNamed:@"back_btn.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:buttonImage forState:UIControlStateNormal];
button.frame = CGRectMake(0, 0, buttonImage.size.width/2, buttonImage.size.height/2);
[button addTarget:self action:@selector(backPressed) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.leftBarButtonItem = customBarItem; 
```

试试这个.......一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:08:06.407

您可以使用以下代码更改 backButton 的颜色：

`self.navigationItem.backBarButtonItem.tintColor = [UIColor redColor];`

# javascript - 如何在数组的每个项目前面添加文本？

> ID：15968539
> 
> 赞同：0
> 
> 时间：2013-04-12T10:06:27.887
> 
> 标签：javascript, jquery, arrays

我有这段代码，它遍历所有包含“menu-item-li”类的元素，并将它们的href标签的值放入一个数组中。这是这样做的代码：

```
var arr = new Array();
$(".menu-item-li").each(function() {
    arr.push($(this).attr("href"));
}); 
```

这些将返回如下内容：

*   链接1.html
*   链接2.html
*   链接3.html
*   ...等等

现在我想做的是在数组中的每个项目前面放一些文本。假设我想把“网站/”放在每个项目的前面。结果应该是这样的：

*   网站/link1.html
*   网站/link2.html
*   网站/link3.html
*   ...等等

如何编辑我的 Javascript 代码，以便可以将“website/”添加到数组中每个项目的前面？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:07:40.593

`arr.push('website/' + $(this).attr("href"));`，但你也可以使用`.map`方法。

```
var arr = $(".menu-item-li").map(function() {
    return 'website/' + $(this).attr("href");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:09:34.780

```
var arr = new Array();
$(".menu-item-li").each(function() {
    var str = "website/"+$(this).attr("href");
    arr.push(str);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:13:25.390

如果数组包含一个`<a>`元素列表——我假设尽管有类名，因为你正在使用`href`属性——那么它只是：

```
var arr = $(".menu-item-li").map(function() {
    return "website/" + this.href;
}); 
```

您实际上不需要再次调用 jQuery`this`并调用该`attr`方法，这是一种浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:12:18.707

用这个，

```
var arr = new Array();
$(".menu-item-li").each(function() {
    arr.push('website/' + $(this).attr("href"));
}); 
```

# php - PHP MySQL 两个查询

> ID：15968541
> 
> 赞同：1
> 
> 时间：2013-04-12T10:06:40.827
> 
> 标签：php, mysql

我想知道如何在 PHP 代码中执行两个 mysql 查询（query_1 和 query_2），但对于 query_1 的每个结果只显示 query_2 的结果，如下所示：

```
query_1==> `SELECT tbl_name FROM table_ref `

query_2 ==> `SELECT id,name FROM (result of the first query)` 
```

query_1 返回表的名称：table1、table2、table3，并且使用 query_2 我必须这样做：

`SELECT id,name FROM table1`和`SELECT id,name FROM table2`......就像在一个循环中

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:09:57.490

```
SELECT id, name FROM sometable WHERE name in (SELECT tbl_name FROM table_ref) 
```

在此示例中，需要在 2 个表之间建立连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:43:53.127

在 php 方面，您可以按以下方式处理两个数组结果：

```
$array1 = array('tbl_name1' => '' ,'tbl_name2' => '');

$array2 = array('tbl_name1' => array('id' => 'id1'),
                'tbl_name2' => array('id' => 'id2'));

echo '<pre>';
print_r(array_intersect_key($array2, $array1));
echo '</pre>'; 
```

o/p：

```
Array
(
    [tbl_name1] => Array
        (
            [id] => id1
        )

    [tbl_name2] => Array
        (
            [id] => id2
        )

) 
```

# wpf - 将 WPF 用于条形图

> ID：15968545
> 
> 赞同：0
> 
> 时间：2013-04-12T10:06:43.420
> 
> 标签：wpf, xaml, c#-4.0

我想在 WPF 中使用图表。目前我正在使用 WPF 工具包在 WPF 中制作图表，但找不到用于修改条形图（颜色、大小等）的逐步过程的资源。有人可以帮我或给我这样做的必要网址...这也可以用来制作 3d 图表，或者如果有任何其他我可以使用的开源东西，请务必提及。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:11:40.730

你试过[动态数据显示](http://dynamicdatadisplay.codeplex.com/)吗？

对我来说，它是可用于 WPF 的最好的免费图表库。

# asp.net-mvc-3 - 在 MVC3 中的登录页面上重定向的全局方法

> ID：15968546
> 
> 赞同：0
> 
> 时间：2013-04-12T10:06:53.683
> 
> 标签：asp.net-mvc-3

我想知道如何在这种情况下使用全局方法设计我的应用程序

1.  如果用户未通过身份验证或会话已过期，则在登录页面上重定向
2.  如果用户确实具有其他角色，则在登录页面上重定向并尝试访问不属于该角色的页面。
3.  如果请求的页面不存在于应用程序中，则在登录页面上重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:36:23.470

基本上你可以创建一个 ActionFilter 看到这个： [http ://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

或者在 MVC3 中执行此操作的另一种快捷方式，您可以在页面剃刀代码的主页面顶部检查会话或身份验证，即：`_LayOut.cshtm`l 喜欢这样：

```
@model CustomerModel{
if(Session["CustomerId"]==null)
    RedirectToActionResult("Index","Home");

} 
```

注意：为此，您需要使用 _LayOut.cshtml 继承所有视图，并且不要使用母版页继承 /Home/Index 视图，因为它将递归运行并且您会遇到超时错误。

# mysql - MySQL query to fetch result between start date and end date

> ID：15968550
> 
> 赞同：2
> 
> 时间：2013-04-12T10:06:59.857
> 
> 标签：mysql, sql

I have two dates say `start_date = 2013-04-12` and `end_date = 2013-04-30`
and my table contains row with `start_date = 2013-04-12` and `end_date = 2013-04-16`

I want to fetch records whose start date is greater 2013-04-12 and end_date is less than 2013-04-30\. Which includes above record having 2013-04-16 as end_date

I tried with this query

`SELECT * FROM TABLE_NAME WHERE (start_date <='2013-04-12' AND end_date >='2013-04-30')` which dont give any result however if i put end_date 2013-04-15 it works fine

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:15:29.140

```
SELECT
    *
FROM
    (
        SELECT
            '2013-04-12' as `start_date`,
            '2013-04-16' as `end_date`
    ) `sub`
WHERE
    (`start_date` BETWEEN '2013-04-12' AND '2013-04-30')
    AND
    (`end_date` BETWEEN '2013-04-12' AND '2013-04-30') 
```

`BETWEEN` is more reliable

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:11:40.357

If you want to have start_date GREATER OR EQUAL 2013-04-12 and end_date LESSER OR EQUAL, than your operators are wrong:

```
start_date <='2013-04-12' AND end_date >='2013-04-30' 
```

you should use >= for start_date and <= for end_date like this:

```
start_date >='2013-04-12' AND end_date <='2013-04-30' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:14:34.017

I think you are using wrong operators ... start_date greater than(>=) end_date less than equal to (<=)

```
SELECT * FROM TABLE_NAME WHERE (start_date >='2013-04-12' AND end_date <='2013-04-30') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:11:28.173

Try this,

```
SELECT * FROM TABLE_NAME WHERE Convert(varchar,start_date,101) >'04/12/2013') AND convert(varchar,end_date,101) <'04/30/2013') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T10:16:28.293

I would do: SELECT * FROM table_name WHERE start_date BETWEEN '2013-04-12' AND '2013-04-30'

# android - 如何在不关闭先前活动的情况下从通知中打开对话框样式的活动？

> ID：15968559
> 
> 赞同：2
> 
> 时间：2013-04-12T10:07:35.197
> 
> 标签：android, android-activity, notifications

1.  我有一个带有对话框样式的 Activity，因此它可以在以前的 Activity 之上直观地打开。
2.  我有一个通知，它会像这样打开这个活动：

```
Intent intent = new Intent(this, CalcActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
builder.setContentIntent(pendingIntent);
((NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE)).notify(0, builder.build());

```

问题是当用户点击我的通知时，以前的可见活动关闭，主屏幕出现并且我的对话框显示在主屏幕顶部。如何防止关闭以前的活动？请注意，以前的活动可能不是来自我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-22T06:56:06.667

使用意图如下：

```
Intent intent = new Intent(this,MainActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

```

并在`AndroidManifest.xml`注册活动中并将主题用作`dialog`：

```
<activity android:name=".MainActivity" android:theme="@style/Theme.AppCompat.Light.Dialog"/> 
```

# app-store-connect - 我不小心在applestore中将我的版本设置为8.1

> ID：15968565
> 
> 赞同：0
> 
> 时间：2013-04-12T10:07:48.203
> 
> 标签：app-store-connect

我该如何改变呢？

它应该是 .81 版而不是 8.1 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:10:57.923

选择版本。近版本信息有一个字“编辑”。点击那个。然后更改为 0.81。

节省。

# php - LDAP 搜索通过用户 ID 获取用户名

> ID：15968567
> 
> 赞同：2
> 
> 时间：2013-04-12T10:07:52.093
> 
> 标签：php, ldap

我已经在我的 php 脚本中成功运行了 ldap_connect 和 ldap_bind 命令。现在我需要通过用户 ID 获取 guvenName。我怎样才能做到这一点。

```
$username = $_POST['username'];
$password = $_POST['password'];

define('LDAP_SERVER', 'localhost');
define('LDAP_PORT', 389);
define('LDAP_TOP', 'ou=people,dc=domain,dc=com');

$ds = ldap_connect(LDAP_SERVER, LDAP_PORT);
if (!$ds) {
    echo "FALSE";
}
if (!ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3)) {
    @ldap_close($ds);
    echo "FALSE";
}
$dn = 'uid=' . $username . "," . LDAP_TOP;

if (!ldap_bind($ds, $dn, $password)) {
    echo "FALSE";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:13:31.663

一般来说，这很简单

```
public function getusercn($accountname)
{
     $filter_person = "(&(sAMAccountName={$accountname}))";
     $sr_person = ldap_search($this->ds_ad,$this->base_user_dn,$filter_person);
     $sr = ldap_get_entries($this->ds_ad, $sr_person);
     $attr = $sr[0]["givenName"][0];
     return $attr;
} 
```

$this->ds_ad - 在你的代码中是 $ds

$this->base_user_dn - 是您要从中搜索的基本 OU（例如 LDAP_TOP 在您的情况下）

sAMAccountName - 在您的案例中是“用户 ID”属性 uid

givenName - 是您要查找的属性

所有属性都已经在 $sr 变量中，因此您可以使用 var_dump 来检查所有内容。

# c# - 如何在asp.net图表控件中使用外键表中的值

> ID：15968569
> 
> 赞同：0
> 
> 时间：2013-04-12T10:07:53.627
> 
> 标签：c#, asp.net, entity-framework, charts

我有一个具有以下值的数据库表（从 PRO_ID=2061 的 tbl 中选择 *）：
![在此处输入图像描述](https://i.stack.imgur.com/cT49B.jpg)

我有一个asp：图表。上表也可以是 Chart1.DataSource。标记可能如下所示：

```
 <asp:Chart ID="Chart1" runat="server" Width="800px" Height="400px">
        <series>
            <asp:Series Name="Risk HW" ChartArea="ChartArea1" YValueMembers="HW_ID"> 
```

这行得通。但是 HW_ID 是一个外键，我想从表 tbl_HW 中获得另一个值。
最好是：YValueMembers="tbl_HW.myWantedValue"。
我可以以某种方式调用父表并获得想要的值（以一种简单的方式）吗？

（提示：我用的是Entity Framework。也许可以用EntityDataSource来实现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:56:01.143

如果您已映射对象，以便填充该表的对象具有另一个表的类作为属性，您应该能够对其进行数据绑定。

[这个问题](https://stackoverflow.com/questions/3687487/how-to-properly-bind-to-a-child-object)似乎有一些相关信息，但不是特定于图表。

数据绑定控件中的属性名称反映到绑定到它们的对象上，因此您可以使用复杂对象的属性（因此，如果绑定 Foo 类型的对象，则可以绑定到 Foo.bar.Pickle，如果 Foo 类有一个属性栏，它是一个具有名为“Pickle”的属性的对象）

# html - Internet Explorer 8“背景色”问题

> ID：15968577
> 
> 赞同：3
> 
> 时间：2013-04-12T10:08:07.287
> 
> 标签：html, css, internet-explorer-8, compatibility, background-color

在 75% 的浏览器中查看**[http://joelkidd.co.uk/test时，该站点看起来不错。](http://joelkidd.co.uk/test)**然而，像往常一样，任何低于 Internet Explorer 9 的网站看起来都像炸弹一样击中了它。我今天早上坐下来为它创建一个单独的样式表，我现在正在这样做，但是我遇到了一个问题（这是我的第一个交叉兼容性工作等）。

当我在标题元素（和其他 div，就此而言）设置背景颜色时，它会被完全忽略。如果您在任何（大多数）其他浏览器中查看该站点，您将看到一个大的天鹅绒背景，覆盖了页面的前 20%（大约）。

如果有人能告诉我为什么会这样，我会非常感激。

谢谢，乔尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:21:51.023

我感觉到你的痛苦。我想我可能知道你的问题。您需要包含这一点 javasctipt 代码：[https ://code.google.com/p/html5shiv/](https://code.google.com/p/html5shiv/)

因为您使用的是 HTML5 标签，例如`<header>`IE6、7 和 8，所以不知道它们的含义。通过包含一点点 javascript 代码，它基本上会使 HTML5 元素看起来更像`<div>`IE6、7 和 8

当然，您的另一个选择是将所有 HTML5 元素更改`<div>`为例如：`<div id="header">`而不是`<header>`. 这也意味着改变你所有的 CSS。

# java - 使用数组进行转换计算

> ID：15968579
> 
> 赞同：0
> 
> 时间：2013-04-12T10:08:11.907
> 
> 标签：java, arrays, user-interface

我正在为各个城市之间的距离创建一个转换计算器。但是我在如何从转换方法调用计算时遇到问题。比如这里：

```
private class ComboBoxListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        int selectedRow = destinationBox.getSelectedIndex();
        int selectedCol = originBox.getSelectedIndex();
        distanceText.setText(fileData[selectedRow + 1][selectedCol + 1]);
    }
}

private class RadioButtonListener implements ActionListener
{

    public void actionPerformed (ActionEvent event)
    {
        if (event.getSource() == kilometersRadioButton)
        {
            distanceLabel.setText("Distance (kilometers):");
            avgspeedLabel.setText("Avg. Speeg (kph): ");  
        }
        else if (event.getSource() == milesRadioButton)
        {
            distanceLabel.setText("Distance (miles): ");
            avgspeedLabel.setText("Avg. Speeg (mph): ");
        }
    }
} 
```

这部分是二维数组选择值的地方，我的目的是在单击单选按钮时进行从英里到公里的计算。我从中绘制的文件默认以英里为单位。

```
public class MetricConverter
{

    public static double milesToKilometers(double miles) //This static method holds the miles to kilometers conversion equation
    {
        return miles * 1.609;
    }

    public static double kilometersToMiles(double kilometers) //This static method holds the kilometers to miles conversion equation
    {
        return kilometers / 1.609;
    }
} 
```

这是转换方法。我如何称呼它们，因为数组的值在 TextField/String 中。

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:11:48.000

由于您的方法是静态的，您可以直接调用`Classname.methodName();`

如果要存储在 String 中，可以执行以下操作：

```
String str = String.valueOf(MetricConverter.kilometersToMiles( kilometers)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:25:59.437

想象一下，您知道如何调用转换方法。考虑这种情况：

1.  您选择两个城市。距离以英里为单位。
2.  您选择公里。距离以公里为单位。
3.  你改变了其中一个城市。**距离以英里为单位显示，即使选择了单选按钮“公里”。**

问题是您输入的文本`distanceText`取决于两种不同的输入操作：设置城市和设置显示类型。因此，您在设置文本时需要所有这些信息。

假设您的事件处理程序被声明为内部类，我建议该数据的一些字段、相应的设置器和“更新文本”方法：

```
private int row, column;
private boolean inKm;

private void setCities(int row, int column) {
    this.row = row;
    this.column = column;
}

private void setKm(boolean inKm) {
    this.inKm = inKm;
}

// one place to set the distance text
private void updateDistanceText() {
    String text = fileData[row+1][column+1];
    if (inKm) {
        text = String.valueOf(
                   MetricConverter.milesToKilometers(Double.valueOf(text)));
    }
    distanceText.setText(text);        
} 
```

最后，更新您的事件处理程序：

```
private class ComboBoxListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        setCities(destinationBox.getSelectedIndex(), 
                  originBox.getSelectedIndex());
        updateDistanceText();
    }
}

private class RadioButtonListener implements ActionListener {
    public void actionPerformed (ActionEvent event) {
        if (event.getSource() == kilometersRadioButton) {
            distanceLabel.setText("Distance (kilometers):");
            avgspeedLabel.setText("Avg. Speed (kph): ");
            setKm(true);
        } else if (event.getSource() == milesRadioButton) {
            distanceLabel.setText("Distance (miles): ");
            avgspeedLabel.setText("Avg. Speed (mph): ");
            setKm(false);
        }
        updateDistanceText();
    }
} 
```

**编辑**如果你不想使用你还没有学过的技术，你可以使用一些复制粘贴......一般来说，在多个地方拥有相同的代码是不好的做法，因为改变它是一种痛苦，但是对于说明目的，无论如何我都会这样做：

```
private class ComboBoxListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        int selectedRow = destinationBox.getSelectedIndex();
        int selectedCol = originBox.getSelectedIndex();

        String text = fileData[selectedRow+1][selectedColumn+1];

        if (kilometersRadioButton.isSelected()) {
            text = String.valueOf(
                     MetricConverter.milesToKilometers(Double.valueOf(text)));
        }

        distanceText.setText(text);        
    }
}

private class RadioButtonListener implements ActionListener {
    public void actionPerformed (ActionEvent event) {
        int selectedRow = destinationBox.getSelectedIndex();
        int selectedCol = originBox.getSelectedIndex();

        String text = fileData[selectedRow+1][selectedColumn+1];

        if (event.getSource() == kilometersRadioButton) {
            distanceLabel.setText("Distance (kilometers):");
            avgspeedLabel.setText("Avg. Speeg (kph): ");  

            text = String.valueOf(
                     MetricConverter.milesToKilometers(Double.valueOf(text)));
        } else if (event.getSource() == milesRadioButton) {
            distanceLabel.setText("Distance (miles): ");
            avgspeedLabel.setText("Avg. Speeg (mph): ");
        }

        distanceText.setText(text);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:12:54.503

只是：

```
distanceText.setText(String.valueOf(MetricConverter.milesToKilometers(fileData[selectedRow + 1][selectedCol + 1]))); 
```

或英里：

```
distanceText.setText(String.valueOf(MetricConverter.kilometersToMiles(fileData[selectedRow + 1][selectedCol + 1]))); 
```

这当然只有在 fileData 包含双值时才有效。

# mysql - 在 Yii 中实现带有排序和分页的选项卡视图

> ID：15968581
> 
> 赞同：0
> 
> 时间：2013-04-12T10:08:13.313
> 
> 标签：mysql, yii, yii-components, yii-events

我试图在 Yii 中引入一个带有列表、排序和分页的选项卡视图。我有 2 个名为 service_request 的表和数据来自的收藏夹。在该页面中，我需要显示服务请求和收藏夹添加日期和其他一些字段。我尝试使用 join 来实现它，但它没有成功列出服务请求中的数据。在我的控制器操作中，我添加了

```
 $criteria = new CDbCriteria;
$criteria->select = 'favourite_notes,s.service_request_id';
$criteria->join = 'LEFT JOIN service_request s  ON  service_request_id = 1';
$criteria->condition = 'favourite_type = 1';
    $data=new CActiveDataProvider('ProviderFavourite',array('criteria'=>$criteria,'pagination'=>array('pageSize'=>1)
                ));
            $this->renderPartial('viewtest', array(
                'ModelInstance' => ProviderFavourite::model()->findAll($criteria),
                'dataProvider'=>$data,
            )); 
```

在我提供的视图测试中，

```
 $this->widget('zii.widgets.CListView', array('dataProvider'=>$dataProvider,'itemView'=>'view',     
             'id'=>'request-list',
'template' => '  {items}{pager}',
)); 
```

在视图页面中，我已经获取了数据

```
 echo $data->service_request;
    echo $data->favourite_notes; 
```

欢迎您的所有建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:45:53.920

您可以使用 CDBCriteria 构建自己的排序函数

在模型方面，您可以 orderby 和 orderById 通过 get 或 post

```
 $criteria=new CDbCriteria;
$criteria->alias='b';
$criteria->order='b.'.$orderById.' '.$orderBy.',b.type asc,b.smallimage desc';
$dataProvider=new CActiveDataProvider($this->tableName(), array(
        'criteria' => $criteria,
        'pagination'=>array(
            'pageSize'=>$limit,
        ),
    )); 
```

现在在视图方面，您可以像这里一样做 Web pager 是分页类，而 extrapara 是分页所需的参数数组

```
 $this->widget('application.extensions.WebPager',
            array(
            'cssFile'=>false,
            'pages' => $pagination,
            'extraPara'=>$extraPara,
            'id'=>'link_pager'
            )); 
```

# java - Android动态设置textview的重力

> ID：15968583
> 
> 赞同：2
> 
> 时间：2013-04-12T10:08:14.380
> 
> 标签：java, android, android-linearlayout, textview, gravity

我为我的活动动态添加了水平布局，并试图将它们放入`textviews`其中。

问题是，我不能把一些放在`textviews`右边，一些放在左边。

我试过`textview.setgravity`了，但它只是改变了里面文本的位置，`textview`而不是移动它`textview`本身。

编辑：这是我的一些代码，可以帮助您获得一个想法：

```
for(int i=0;i<nbelem;i++){          //génération des boutons des commandes
        layouts[i] = new RelativeLayout(this);
        layouts[i].setClickable(true);      //toute la zone est cliquable
        layouts[i].setId(i);
        layouts[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 150));

        Info[i] = new TextView(this);
        Info[i].setClickable(true); 
        Info[i].setId(i);
        Info[i].setText("Pizza 4 fromages x2 \n Pizza chevre x2");
        Info[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.FILL_PARENT));

        layouts[i].addView(Info[i]);

        Numcom[i] = new TextView(this);
        Numcom[i].setClickable(true);
        Numcom[i].setId(i);
        Numcom[i].setText("n°1522");
        Numcom[i].setGravity(Gravity.RIGHT | Gravity.TOP);              
        Numcom[i].setTextSize(12);
        Numcom[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,50)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:18:50.550

这听起来`RelativeLayout`可能适合您的需求并为您节省大量`LinearLayout`不推荐的嵌套 s（性能方面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:23:50.147

您必须为包含您的 textview 的 LinearLayout 设置布局重力。

```
LayoutParams lp = new LayoutParams();
lp.gravity= Gravity.CENTER_HORIZONTAL; 
textview1.setLayoutParams(lp); 
```

确保使用[LinearLayout.LayoutParams](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

# algorithm - 在大矩阵内移动正方形，找到重叠中的最小数

> ID：15968587
> 
> 赞同：1
> 
> 时间：2013-04-12T10:08:40.103
> 
> 标签：algorithm, data-structures, matrix

我有一个正方形矩阵和一个较小的正方形，它在矩阵内所有可能的位置移动（不会超出矩阵）。我需要在所有这些可能的重叠中找到最小的数字。

问题是两者的大小都可以达到数千。有什么快速的方法吗？

我知道一种方法 - 如果有一个数组而不是矩阵和一个窗口而不是正方形，我们可以使用**deque****在线性**时间内做到这一点。

 **提前致谢。

**编辑**：例子

矩阵：

```
1 3 6 2 5
8 2 3 4 5
3 8 6 1 5
7 4 8 2 1
8 0 9 0 5 
```

对于一个大小为 3 的正方形，总共可能有 9 个重叠。对于每个重叠，矩阵形式的最小数字是：

```
1 1 1
2 1 1
0 0 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:54:37.633

`O(k * n^2)`你的双端队列想法是可能的：

如果您的小方块是`k x k`，则迭代矩阵中从 1 到 的第一行元素，并通过预先计算矩阵每一列中从 1 到、从 2 到等`k`元素的最小值将其视为一个数组（此预计算将占用. 这就是你的第一行：`k``k + 1``O(k * n^2))`

```
*********
1 3 6 2 5
8 2 3 4 5
3 8 6 1 5
*********
7 4 8 2 1
8 0 9 0 5 
```

我提到的预计算将为您提供每一列的最小值，因此您将问题简化为一维数组问题。

然后继续从 2 到 的元素行`k + 1`：

```
1 3 6 2 5
*********
8 2 3 4 5
3 8 6 1 5
7 4 8 2 1
*********
8 0 9 0 5 
```

会有`O(n)`行，您将能够解决每一行，`O(n)`因为我们的预计算允许我们将它们减少为基本数组。**

# php - opencart 在包含 html 的字符串中调整图像大小

> ID：15968591
> 
> 赞同：0
> 
> 时间：2013-04-12T10:08:54.160
> 
> 标签：php, html, opencart

我在变量 $signature 中有一个来自客户签名的字符串。该字符串是 html 并且可能包含标签。我如何将该字符串中的所有图像调整为最大设置大小以阻止人们包含大量图片，但仍然在变量 $signature 中保留所有带有调整大小标签的 html。我需要设置最大尺寸或某种比例来减少显示的图像。

示例字符串：

```
$signature = '<b>test text</b><img src="http://kushsrivastava.files.wordpress.com/2012/11/test.gif">' 
```

任何帮助都会很棒thanx..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:47:09.137

也许您可以将它全部包装在一个样式中，并在样式表中添加一个修复程序。

因此，当您在页面上输出 sig 时，将其包装起来......

```
<div class="sigstyle">
<?php echo $signature; ?>
</div> 
```

然后，在您的样式表中，添加一个类...

```
.sigstyle img { 
    max-width: 300px;
    max-height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:35:44.643

只需使用该`CSS`属性重新调整图像大小

```
$signature = '<b>test text</b><img src="http://kushsrivastava.files.wordpress.com/2012/11/test.gif" width="100px" height="100px">'; 
```

# css - 在 css 中悬停时淡化图像标题

> ID：15968596
> 
> 赞同：2
> 
> 时间：2013-04-12T10:09:13.057
> 
> 标签：css, hover, transition, caption

我正在制作我的作品集，并对我的图像缩略图做了一些花哨的事情。我现在希望我的悬停标题在悬停时淡入/淡出。

到目前为止，这是我的代码；HTML：

```
<a href="1.jpg" class="mask"><img src="1.jpg" />
        <span class="caption fade-caption">  
        <h3>Fade Caption</h3>  
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit,sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>  
        </span>  
    </a> 
```

CSS：

```
 .mask {
    position:relative;
    height:180px;
    width:240px;
    -webkit-box-shadow:0 0 1px #000;
    border:5px solid #f6f6f6;
    overflow:hidden;
    float:left;
    margin:15px;
}
.mask img {
    position:absolute;
    height:300px;
    width:400px;
    -webkit-transform: rotate(15deg);
    -moz-transform:rotate(15deg);
    -o-transform:rotate(15deg);
    -ms-transform:rotate(15deg);
    transform:rotate(15deg);
    top:50%;
    left:50%;
    margin-top:-150px; /* half the height */
    margin-left:-200px; /*half the width */
}

.mask:last-child {
    margin-right:0px;
}

.mask .caption {  
    background-color: rgba(222,169,188,0.9);  
    position: absolute;  
    color: #fff;  
    z-index: 100;  
    left: 0;  
}  

.mask .fade-caption {  
    opacity: 0;  
    width: 220px;  
    height: 180px;  
    text-align: left;  
    padding: 4px 20px 4px 15px; 
    display:none; 
    font-size:0.8em;
}  

.mask:hover .fade-caption {  
    opacity: 1;  
    display:inline;
      width: 220px;  
        height: 180px;
-webkit-transition: all 300ms ease-out;  
    -moz-transition: all 300ms ease-out;  
    -o-transition: all 300ms ease-out;  
    -ms-transition: all 300ms ease-out;  
    transition: all 300ms ease-out;   
    } 
```

我认为我需要添加一个淡入淡出标题类并将转换置于 :hover 状态，但显然这是不对的。我对转换还不是很熟练，我希望有人可以帮助我，因为我找不到可以帮助我解决问题的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:28:54.347

You were pretty close. Check out [this fiddle](http://jsfiddle.net/cherryflavourpez/drsrd/) for a working example. Full CSS below:

```
.mask {
    position:relative;
    height:180px;
    width:240px;
    box-shadow:0 0 1px #000;
    border:5px solid #f6f6f6;
    overflow:hidden;
    float:left;
    margin:15px;
}
.mask img {
    position:absolute;
    height:300px;
    width:400px;
    top:50%;
    left:50%;
    margin-top:-150px; /* half the height */
    margin-left:-200px; /*half the width */
    -webkit-transform: rotate(15deg);
    -moz-transform:rotate(15deg);
    -o-transform:rotate(15deg);
    -ms-transform:rotate(15deg);
    transform:rotate(15deg);
}

.caption {  
    background-color: rgba(222,169,188,0.9);  
    position: absolute;  
    color: #fff;  
    left: 0;
    right: 0;
    top: 0;
    bottom: 0; 
    padding: 4px 20px 4px 15px; 
    font-size:0.8em;
    opacity: 0;
    -webkit-transition: all 300ms ease-out;  
    -moz-transition: all 300ms ease-out;  
    -o-transition: all 300ms ease-out;  
    -ms-transition: all 300ms ease-out;  
    transition: all 300ms ease-out;   
}  

.mask:hover .caption {  
    opacity: 1;  
} 
```

Importantly, the `transition` styling is on the element itself, not just its `:hover` state. That way it will both fade in and out. If those style are just on `:hover`, the element will fade in but disappear immediately rather than fading out.

You can't transition between `display: none` and `display: block/whatever`. So, you need to let the `opacity` in this instance be what visually hides your caption. You could add the proprietary ms-filters to get old-IE support.

Other points to note:

1.  I consolidated your `.caption` and `.fade-caption` classes for the sake of simplicity.
2.  There's no need to re-declare things that are already set for the `:hover` state, you just need to state those things that need to change.
3.  There's no need for prefixes on `box-shadow` any more, just use the final version.
4.  You were getting a bit confused with positioning your caption, making it `absolute` but also setting a `width` and `height`. For simplicity's sake I have just set all four valules to `0`.
5.  You don't need to declare the `z-index` here, just let the browser's normal stacking order sort it for you. If you need to place the caption before the image in the markup though, you would need to add this back in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:31:19.440

您的转换不是当前执行您可能期望的那样的原因是标题上的`display`属性（从`none`to ）阻止转换，并且您的转换也应该在您进行任何更改之前应用于元素（即之前悬停 - 处于常规状态）。纯粹依靠来淡入淡出标题应该是一种享受：`inline``opacity``opacity`

```
.mask .fade-caption {  
    opacity: 0;  
    width: 220px;  
    height: 180px;  
    text-align: left;  
    padding: 4px 20px 4px 15px; 
    font-size:0.8em;
    -webkit-transition: all 300ms ease-out;  
    -moz-transition: all 300ms ease-out;  
    -o-transition: all 300ms ease-out;  
    -ms-transition: all 300ms ease-out;  
    transition: all 300ms ease-out;  
}  

.mask:hover .fade-caption {  
    opacity: 1;  
    width: 220px;  
    height: 180px;
} 
```

[http://jsfiddle.net/g9NFV/](http://jsfiddle.net/g9NFV/)

编辑：忍者，但我现在还是把这个答案留在这里。

# json - 需要帮助，访问更多级别的 json/twitter 搜索

> ID：15968599
> 
> 赞同：0
> 
> 时间：2013-04-12T10:09:25.177
> 
> 标签：json, twitter, playframework-2.1, iterate

我正在使用来自@diegolparra 的示例来进行推特搜索和/或流式传输。

```
package controllers

import play.api.mvc.{WebSocket, Action, Controller}
import play.api.libs.functional.syntax._
import play.api.libs.json._
import play.api.libs.concurrent.Execution.Implicits.defaultContext
import play.api.libs.ws.WS
import play.api.libs.iteratee.{Iteratee, Concurrent, Enumerator}
import play.api.libs.oauth.{OAuthCalculator, RequestToken, ConsumerKey}

case class Tweet(from: String, text: String)

object Tweets extends Controller {
  implicit val tweetReads = (
    (__ \ "from_user_name").read[String] and
    (__ \ "text").read[String]
    )(Tweet)

  def tweetList(query: String) = Action {
    Async {
      val results = 50
      val responsePromise =
        WS.url("http://search.twitter.com/search.json")
          .withQueryString("q" -> query, "rpp" -> results.toString).get

      responsePromise.map {
        response =>
          val tweets = Json.parse(response.body).\("results").as[Seq[Tweet]]
          Ok(views.html.tweetlist(tweets))
      }
    }
  }

  val consumerKey =         ConsumerKey("EBcP4MM9VnI64L8RZLO7g","SVi7XyyNpWzidR2Zx2HVNZ7kZTwFGxpqGKqhOeA")

  val accessToken = RequestToken("1228081488-sLSztNAm0ST2kssCkBNRyhSsmk8SP5dtcbX1ZE2", "GxHUymXdyTYRZxw4bbTbgN8Xh53jKxC1KwvgsVwUU")

  def stream(keywords: String) = WebSocket.using[String] { request =>
    val out: Enumerator[String] = Concurrent.unicast[String](onStart = pushee => {
      def twitterIteratee = Iteratee.foreach[Array[Byte]]{ ba =>
        val msg = new String(ba, "UTF-8")
        pushee.push(msg)
        println(msg)
      }
      WS.url("https://stream.twitter.com/1.1/statuses/filter.json?track=" + keywords)
        .sign(OAuthCalculator(consumerKey, accessToken))
        .get(headers=> twitterIteratee)
    })

    val in = Iteratee.ignore[String]
    (in, out)
  }
} 
```

此示例从 twitter 搜索字段的结果中获取 from_user_name 和 text。现在我需要访问 created_at 日期和另一个级别（节点用户）以从用户获取：profile_image_url 和 lang。

请问，有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:54:03.347

在 Devoxx France，Guillaume Bort 展示了一个通过推文获取一些“深层”信息的示例。你可以在这里找到代码：[https ://github.com/adericbourg/devoxxfr2013/blob/master/app/controllers/Application.scala](https://github.com/adericbourg/devoxxfr2013/blob/master/app/controllers/Application.scala)

它没有显示您需要的属性，但使用该示例和 Twitter API 文档，您可能会设法获得所需的内容。

希望这会有所帮助，所以。

# python - Python Suds Soap 客户端错误

> ID：15968600
> 
> 赞同：0
> 
> 时间：2013-04-12T10:09:26.197
> 
> 标签：python, suds

我正在尝试使用 Python/SUDS 连接到 Web 服务。

我在一个文件中有以下代码，我能够成功连接并收到响应。

```
class Suds_Connect:
    def __init__(self, url, q_user, q_passwd):

        logging.basicConfig(level=logging.INFO)
        logging.getLogger('suds.client').setLevel(logging.DEBUG)
        try:
            # fix broken wsdl
            # add <s:import namespace="http://www.w3.org/2001/XMLSchema"/> to the wsdl
            imp = Import('http://www.w3.org/2001/XMLSchema',
            location='http://www.w3.org/2001/XMLSchema.xsd')

            wsdl_url = url
            self.client = Client(wsdl_url, doctor=ImportDoctor(imp))
            t = HttpAuthenticated()

            security = Security()
            token = UsernameToken(q_user,q_passwd)
            security.tokens.append(token)
            self.client.set_options(wsse=security)

        except Exception, e: 
            print "Unexpected error:", sys.exc_info()[0]
            print str(e)
            sys.exit()

def CallWebMethod():

        try:
        print ' SUDS Client'
            print self.client
            Person= self.client.factory.create('ns0:Person')

            Person.name= 'bob'
            Person.age= '34'
            Person.address= '44, river lane'
            print self.client.service.AddPerson(Person)

        except WebFault, f:
            print str(f.fault)
        except Exception, e: 
            print str(e)

if __name__ == '__main__':
    errors = 0
    sudsClient = Suds_Connect('url','user','password')
    sudsClient.CallWebMethod()
    print '\nFinished:' 
```

我想在将从按钮单击事件调用的 Python 客户端应用程序中使用此代码。我试图实现这一点，并且能够打印出客户端，但是当我进行 Web 服务调用 ( `print self.client.service.AddPerson(Person)`) 时，出现以下错误。

```
unsupported operand type(s) for +: 'NoneType' and 'str' 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:27:33.470

好的，

看来我遇到的问题与 Soap Header 生成有关。在 SUDS 中有一个文件 wsse.py，其中包含一个函数 xml()。

```
def xml(self):
        """
        Get xml representation of the object.
        @return: The root node.
        @rtype: L{Element}
        """
    root = Element('UsernameToken', ns=wssens)
    u = Element('Username', ns=wssens)
    u.setText(self.username)
    root.append(u)
    p = Element('Password', ns=wssens)
    p.set('Type', "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest")

    import sha
    import base64
    p.setText(base64.encodestring(sha.new(self.nonce + str(UTC(self.created)) + self.password).digest()).replace("\n", ''))

    root.append(p)
    if self.nonce is not None:
        n = Element('Nonce', ns=wssens)
        n.setText(base64.encodestring(self.nonce).replace("\n",''))
        root.append(n)
    if self.created is not None:
        n = Element('Created', ns=wsuns)
        n.setText(str(UTC(self.created)))
        root.append(n)
    return root 
```

我在以下行收到错误：

```
p.setText(base64.encodestring(sha.new(self.nonce + str(UTC(self.created)) + self.password).digest()).replace("\n", '')) 
```

所以我注释掉了这一行并添加了以下行：

```
p.setText(self.password) 
```

请注意，我正在通过 https 拨打电话

问候

诺埃尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:14:35.297

看起来 web 服务调用返回无。需要额外的信息来确定出了什么问题。

首先 - 通过在调用 Suds_Connect 之前添加来启用 suds 日志记录。这应该为您提供有关引擎盖下的泡沫发生了什么的信息。

```
import logging
logging.basicConfig(level=logging.DEBUG) 
```

尝试获取更多调试信息的另一件事 - 请尝试以下操作而不是`print self.client.service.AddPerson(Person)`

```
result = self.client.service.AddPerson(Person)
print str(result) 
```

此外，获取异常的完整堆栈跟踪也会很有帮助 - 它发生在哪一行以及调用堆栈是什么。请尝试注释掉`except Exception, e:`case 的异常处理，并在此处发布您将得到的异常。

# android - AndroidRuntime：android.database.sqlite.SQLiteException：无法识别的令牌：“0_id”

> ID：15968602
> 
> 赞同：0
> 
> 时间：2013-04-12T10:09:28.087
> 
> 标签：android, sqlite

例外

```
04-12 16:05:16.170: E/AndroidRuntime(5027): FATAL EXCEPTION: main
04-12 16:05:16.170: E/AndroidRuntime(5027): android.database.sqlite.SQLiteException: unrecognized token: "0_id": , while compiling: SELECT _id, display_name, photo_id, contacts_status_updates.status_icon AS contact_status_icon, contacts_status_updates.status AS contact_status, agg_presence.mode AS contact_presence, photo_uri FROM view_contacts LEFT OUTER JOIN agg_presence ON (_id = agg_presence.presence_contact_id) LEFT OUTER JOIN status_updates contacts_status_updates ON (status_update_id=contacts_status_updates.status_update_data_id) WHERE (view_contacts.[single_is_restricted] = 0_id IN (SELECT contact_id FROM raw_contacts WHERE raw_contacts._id IN (SELECT data.raw_contact_id FROM data JOIN mimetypes ON (data.mimetype_id = mimetypes._id) WHERE mimetype_id=? AND data1=(SELECT groups._id FROM groups WHERE title=?)))) ORDER BY display_name ASC
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:179)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.content.ContentResolver.query(ContentResolver.java:321)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.utils.contacts.ContactsUtils5.getContactsByGroup(ContactsUtils5.java:506)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.utils.contacts.ContactsUtils5.getCSipPhonesByGroup(ContactsUtils5.java:521)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.service.PresenceManager.getBuddiesForAccount(PresenceManager.java:61)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.service.PresenceManager.addBuddiesForAccount(PresenceManager.java:74)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.service.PresenceManager.updateRegistrations(PresenceManager.java:188)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.service.PresenceManager.access$0(PresenceManager.java:138)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.coperator.service.PresenceManager$AccountStatusContentObserver.onChange(PresenceManager.java:202)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.database.ContentObserver$NotificationRunnable.run(ContentObserver.java:43)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.os.Handler.handleCallback(Handler.java:605)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.os.Looper.loop(Looper.java:137)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at android.app.ActivityThread.main(ActivityThread.java:4464)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:822)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:589)
04-12 16:05:16.170: E/AndroidRuntime(5027):     at dalvik.system.NativeStart.main(Native Method) 
```

代码

```
@Override
    public Cursor getContactsByGroup(Context ctxt, String groupName) {

        if (TextUtils.isEmpty(groupName)) {
            return null;
        }

        String[] projection;
        if (Compatibility.isCompatible(11)) {
            projection = new String[] {
                    Contacts._ID,
                    Contacts.DISPLAY_NAME,
                    Contacts.PHOTO_ID,
                    Contacts.CONTACT_STATUS_ICON,
                    Contacts.CONTACT_STATUS,
                    Contacts.CONTACT_PRESENCE,
                    Contacts.PHOTO_URI
            };
        } else {
            projection = new String[] {
                    Contacts._ID,
                    Contacts.DISPLAY_NAME,
                    Contacts.PHOTO_ID,
                    Contacts.CONTACT_STATUS,
                    Contacts.CONTACT_PRESENCE
            };
        }

        Uri searchUri = Uri.withAppendedPath(Contacts.CONTENT_GROUP_URI, Uri.encode(groupName));

        return ctxt.getContentResolver().query(searchUri, projection, null, null,
                Contacts.DISPLAY_NAME + " ASC");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:45:01.210

这是某些 LG 手机的联系人提供程序实施中的错误。您在软件中无能为力。

尝试获取该手机的更新，或将手机扔掉。

# java - AppEngine 全文搜索错误：更改了 userIndex 的索引规范

> ID：15968603
> 
> 赞同：0
> 
> 时间：2013-04-12T10:09:29.367
> 
> 标签：java, google-app-engine, full-text-search

升级到 AppEngine SDK 1.7.6 后出现错误。

```
public Index getIndex( String indexName ) {
    IndexSpec indexSpec = IndexSpec.newBuilder()
        .setName( indexName )
        .build();

    return SearchServiceFactory.getSearchService().getIndex(indexSpec);
}

public void indexUser(Profile user){
    try{
        Document doc = Document.newBuilder()
            .setId( user.getEmailAddress() )
            .addField( Field.newBuilder().setName( "emailAddress" ).setAtom( user.getEmailAddress() ) )

            .build();
        getIndex( USER_INDEX ).put( doc );
    } catch(Exception ex){
        ex.printStackTrace();
    }
} 
```

错误：

```
java.io.IOException: Changed index specification for userIndex
    at com.google.appengine.api.search.dev.LuceneDirectoryMap.getDirectory(LuceneDirectoryMap.java:198)
    at com.google.appengine.api.search.dev.LuceneDirectoryMap$FileBased.getDirectory(LuceneDirectoryMap.java:64)
    at com.google.appengine.api.search.dev.LocalSearchService.indexDocument(LocalSearchService.java:243)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:527)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:481)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:458)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:461)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:458)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
com.google.appengine.api.search.PutException
    at com.google.appengine.api.search.IndexImpl$3.wrap(IndexImpl.java:296)
    at com.google.appengine.api.search.IndexImpl$3.wrap(IndexImpl.java:275)
    at com.google.appengine.api.utils.FutureWrapper.wrapAndCache(FutureWrapper.java:53)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.search.FutureHelper.getInternal(FutureHelper.java:73)
    at com.google.appengine.api.search.FutureHelper.quietGet(FutureHelper.java:32)
    at com.google.appengine.api.search.IndexImpl.put(IndexImpl.java:464)
    at dating.user.search.SearchAccess.indexUser(SearchAccess.java:112)
    at dating.user.UserAccess.updateLastLogin(UserAccess.java:209)
    at dating.dating.LogAction.execute(LogAction.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:106)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:57:53.367

在 Java 的 1.7.7.1 中已修复。看[这里](http://code.google.com/p/googleappengine/issues/detail?id=9088)

# mysql - MySQL IF 给我 BLOB

> ID：15968612
> 
> 赞同：3
> 
> 时间：2013-04-12T10:09:49.713
> 
> 标签：mysql

我在 SQL 查询中有以下两行：

```
if( tb2.show_count = 0, 'hidden', count( tb1.user_id ) ) as 'count'
if( tb2.show_name = 0, 'hidden', tb1.name ) as 'name' 
```

第一行给出了我`blob`，第二行返回`name`或者`hidden`基于值`show_name`

我如何对第一行做同样的事情？即阻止它给我 a`blob`并让它返回`count`或`hidden`基于`show_count`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:14:13.927

尝试：

```
if( tb2.show_count=0, 'hidden', cast(count(tb1.user_id) as char(10)) ) as 'count' 
```

- 如果 if 的结果评估为不同的类型，它们将作为 BLOB 返回，因此答案是将计数转换为字符类型（与“隐藏”相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T06:37:02.323

在 MySQL Workbench 中，转到：“Edit -> Preferences... -> SQL Queries”或“Edit -> Preferences... -> SQL Editor”（取决于您拥有的 Workbench 版本）。

选中“将 BINARY/VARBINARY 视为非二进制字符串”选项以显示实际值。

# erlang - 是否可以在不编译的情况下运行erlang？

> ID：15968614
> 
> 赞同：4
> 
> 时间：2013-04-12T10:09:52.643
> 
> 标签：erlang, runtime

是否有任何适用于 Erlang 的 VM 允许您即时编译而不是之前编译？

有可能从 shell 编译，谢谢 Martin。

```
Now, from the Erlang shell (or some other module!):

1> compile:file("mymod.erl").
{ok,mymod}
2> mymod:myfun().
Hello Joe 
```

这样做有什么好处或坏处吗？你还能热交换代码吗？它是处理代码的常规用例吗？那么编译器到底给你带来了什么好处呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:22:21.360

在 Erlang shell 中，您可以使用`c("path/to/module.erl")`. 您还可以通过`compile`模块访问此功能，特别是`compile:file/{1,2}`函数。

例如，假设我们有一个文件`mymod.erl`：

```
-module(mymod).
-export([myfun/0]).

myfun() -> io:format("Hello Joe~n"). 
```

现在，从 Erlang shell（或其他模块！）：

```
1> compile:file("mymod.erl").
{ok,mymod}
2> mymod:myfun().
Hello Joe 
```

[有关更多信息，请参阅compile](http://erldocs.com/R15B/compiler/compile.html)模块上的 Erldocs 。

你可以在运行时使用 Erlang 编译器做很多事情。例如，您可以为模块动态生成代码（使用`erl_syntax`！），然后编译它，甚至无需使用`compile:forms/{1,2}`.

（插入关于伟大权力和重大责任的标准演讲。）

* * *

> 你还能热交换代码吗？

是的。

> 它是处理代码的常规用例吗？

不会。通常 Erlang 代码会提前编译成 BEAM 字节码。根据 Erlang 是以[嵌入式还是交互](http://www.erlang.org/doc/system_principles/system_principles.html#id60849)模式启动的，模块要么在启动时加载，要么在引用时动态加载。如果你正在构建一个[release](http://www.erlang.org/doc/design_principles/release_structure.html)，你基本上*必须*提前编译。

> 那么编译器到底给你带来了什么好处呢？

好吧，一方面，我们可以构建紧凑的版本，而不需要编译器等不必要的组件。当然，我们还获得了提前编译的所有传统好处，尤其是不必一直浪费时间进行编译。

综上所述，除非您完全理解其中的含义并且有*充分的理由*不提前编译代码，否则请遵循标准做法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T18:48:15.440

Erlang VM 只能运行编译后的代码！如果你想解释 Erlang 代码，那么你需要一个解释器。该模块`erl_eval`实现了 Erlang 解释器，是标准 Erlang/OTP 发行版的一部分。Erlang shell 使用它来解释输入的表达式。

**Erlang VM 中的所有**代码处理，无论是编译、加载还是更新，都是在模块级别完成的，因此不可能只编译或加载一个函数。Erlang 编译器是用 Erlang 编写的，并且始终可用，并且可以编译为可以立即加载到系统中的文件或二进制文件。正如@MartinTörnwall 指出的那样，使用从shell 编译模块`c(module)`本质上是动态编译。

因此，在模块级别使用时自动编译代码不会有任何问题。只是当前系统并非设计为以这种方式工作，默认情况下，当它尝试加载模块时，它只会查找预编译的目标文件，即`.beam`文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T04:32:03.160

Erlang 有一个解释器[escript](http://erlang.org/doc/man/escript.html)。整个 Erlang 档案都可以用脚本编写。几乎所有功能都可用。

默认情况下，脚本将被解释。`-mode(compile).`您可以通过在脚本中包含 来强制编译它。

尽管这取决于您设计应用程序的方式，但通常的做法是使用 .erl 文件进行编译和运行，而不是使用 escript 文件。

所以现在你有很多选择。

1.  使用`c(my_module)`此自动加载 .beam 文件将 .erl 文件编译为 .beam。所以现有的虚拟机可以运行它。在代码中，您可以使用编译模块功能，如文件、清除和加载来动态加载和运行它。
2.  使用 erlc、erl -make、rebar 等（Erlang 有丰富的支持）编译并保存 .erl 文件，然后运行它。您可以构建档案、启动脚本、rel 等来管理 Erlang 软件的运行和发布。这通常是生产实践。
3.  使用 escript 并以解释模式运行所有内容。
4.  使用 escript 并给出 -mode(compile) 选项告诉 Erlang VM 在运行时（开始运行 escript 时）编译代码并运行编译后的代码（在内存中）

这样做有什么好处或坏处吗？

编译代码比解释代码快。我现在在 Erlang 中看不到任何其他内容，因为两者都支持几乎所有内容。Erlang 甚至支持组合（从解释代码调用编译代码）

你还能热交换代码吗？

在所有情况下都是的。您的代码也应该能够处理这个问题。

它是处理代码的常规用例吗？

生产的选项 2。1 用于学习/简单开发的选项。选项 3 和 4 需要根据具体要求（可能是一次运行）。

那么编译器到底给你带来了什么好处呢？

为了清楚起见，[erlc](http://erlang.org/doc/man/erlc.html)程序提供了一种通用方式来运行 Erlang 系统中的所有编译器，而[compile](http://erlang.org/doc/man/compile.html)模块为 Erlang 编译器提供了一个接口。编译器提供中间二进制 .beam 文件，它有助于运行 Erlang 代码比解释对应的代码更快。它们还捕获语法错误（编译错误）。

# jquery - 将 form.submit 重置为其原始状态 jQuery

> ID：15968615
> 
> 赞同：1
> 
> 时间：2013-04-12T10:09:53.040
> 
> 标签：jquery

我有简单的形式。我更改了表单提交 - 像这样。

```
$("#formID").submit(function () { do something; return false; }); 
```

在此之后如何将提交重置为其原始状态，因为如果数据有效，我需要将其发布回另一个 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:15:59.290

**[jsFiddle 演示](http://jsfiddle.net/8g2j9/)**

要删除提交事件，您可以使用***[`unbind`](http://api.jquery.com/unbind/)***：

```
$('#formID').unbind("submit"); 
```

这将删除定义的提交事件和回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:16:41.840

在常规提交代码中使用隐藏按钮。

从上面的代码返回后，点击隐藏按钮

# html - jsonp 数据到 rder html 标记为 html

> ID：15968618
> 
> 赞同：0
> 
> 时间：2013-04-12T10:09:59.203
> 
> 标签：html, jsrender

你好我有json对象如下..

```
[Object { Address="Space Hall <br/> GSBS Ground",  EventStartDate="4/12/2013 12:00:00 AM",  EventEndDate="4/12/2013 12:00:00 AM",  more...}, 
Object { Address="Space Hall <br/> GSBS Ground",  EventStartDate="4/13/2013 12:00:00 AM",  EventEndDate="4/13/2013 12:00:00 AM",  more...}] 
```

我在模板中使用 jsrender 将其渲染为

```
<script id="jsTemplate" type="text/html">  
   <tr>
   <td>{{=Address}}
   </td>
   </tr>
</script> 
```

现在的问题是“地址”在其中包含中断，即“br”标签……所以我该怎么做才能将其仅视为html标签而不显示这样的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:53:29.487

你必须使用

```
{{:Address}} 
```

如果你想显示 html 标记。

您可以在[jsrender 演示页面上找到更多详细信息](http://borismoore.github.io/jsrender/demos/step-by-step/03_converters-and-encoding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:56:00.743

哦，解决了...我从其他来源找到...更改为 {{=Address!}} 并且可以正常工作

# php - MySQL PDO NOW() 作为赋值 - 有可能吗？

> ID：15968620
> 
> 赞同：0
> 
> 时间：2013-04-12T10:10:03.950
> 
> 标签：php, mysql, pdo

我试图`NOW()`通过 PHP 将 MySQL 的函数传递给 PDO 的赋值，但它失败了。我发现我必须将它直接传递到 MySQL 语句中。但就我而言，有时该`datetime`字段可能为空。

甚至可以`NOW()`作为 PHP 的赋值传递吗？

一些代码：

我正在动态构建查询，并且`datetime`取决于其他一些变量的值。

```
if(isset($accountStatus)&&$accountStatus!=""){
    $tmp[':account_status']=$accountStatus;
    if($accountStatus==0){
        $tmp[':vCodeExpire']="NOW() + INTERVAL 1 WEEK";
        $tmp[':verified']=0;
    }else{
        $tmp[':verified']=1;
    }
} 
```

构建 SQL 查询：

```
$sql="";
foreach($tmp as $k=>$v){
    $sql.=str_replace(":","",$k)."=".$k.",";
}
$sql=substr($sql,0,strlen($sql)-1); 
```

然后，我运行 PDO 查询：

```
$db=$pdo->prepare("UPDATE users SET $sql WHERE id=:id");
$db->execute($tmp); 
```

我尝试用单引号替换双引号`NOW() + INTERVAL 1 WEEK`，但没有运气。我也尝试在 PDO 查询周围使用单引号，但随后`$sql`直接传递，而不是使用分配的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:17:36.410

> 是否可以？

不。

有2个解决方案。

1.  使用 PHP 计算到期日期。就像是`date('Y-m-d',strtotime('+1 week'))`
2.  为查询创建条件部分

    ```
    if(isset($accountStatus)&&$accountStatus!=""){
    $tmp[':account_status']=$accountStatus;
    if($accountStatus==0){
        $accSql = "NOW() + INTERVAL 1 WEEK,";
        $tmp[':verified']=0;
    }else{
        $accSql ='';
        $tmp[':verified']=1;
    }
    $db=$pdo->prepare("UPDATE users SET $accSql $sql WHERE id=:id"); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:22:32.657

使用`strtotime()`而不是 MySQL 来获取日期值。

# c++ - std::istream_iterator，内存消耗

> ID：15968621
> 
> 赞同：0
> 
> 时间：2013-04-12T10:10:05.683
> 
> 标签：c++, stl, istream-iterator

我尝试使用迭代器迭代文本文件：

```
1) std::istream_iterator<MyData> itRecordStreamBegin(fileStream);
2) std::istream_iterator<MyData> itRecordStreamEnd; 
```

在第一行之后，它从文件中读取一些数据（它使用运算符 >> 表示 MyData 类型）。正如预期的那样。

不幸的是，在那之后内存消耗增加了，似乎`istream_iterator`试图将整个文件加载到内存中。几秒钟后（当抛出 out_of_memory 异常时）调试器进入第二行。但是文件读取失败，我无法读取更多内容。

**问题**：

这是`istream_iterator`（将文件加载到内存中）的正确行为吗？

对于较小的文件（如 20MB），我没有观察到这一点。

也许对于这么大的文件我需要使用常见的`getline`方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:14:29.433

`istream_iterator`只是在类型上使用运算`>>`符。它在内存中最多保留*一个*该类型的实例。使用它时，您*确实*制作了实例的副本。我会怀疑（但没有看到代码）您的复制构造函数或析构函数有缺陷，或者您在`>>`运算符的某个地方泄漏了内存。如果问题与`istream_iterator`.

# c# - 文化信息名称

> ID：15968625
> 
> 赞同：8
> 
> 时间：2013-04-12T10:10:21.320
> 
> 标签：c#, .net, winforms, currency, cultureinfo

我正在`culture`根据所选货币更改应用程序。

例如。

```
_culture = new CultureInfo("en-US");
_culture = new CultureInfo("fr-FR"); 
```

有什么地方可以让我获得所有文化信息的名称以供使用`.net`？

我找到了他们中的大多数，但在少数几个国家/地区错过了

***斐济元（FJD）、瑞典克朗（SEK）、冰岛克朗（ISK）、斯里兰卡卢比（LKR）和巴西雷亚尔（BRL）***

如果有人知道我可以寻找这些货币的任何参考，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:13:52.260

> 有没有什么地方可以让我获得所有与.net一起工作的文化信息的名称？

看看：[http ://www.csharp-examples.net/culture-names/](http://www.csharp-examples.net/culture-names/)

```
CULTURE   SPEC.CULTURE  ENGLISH NAME
--------------------------------------------------------------
                        Invariant Language (Invariant Country)
af          af-ZA       Afrikaans
af-ZA       af-ZA       Afrikaans (South Africa)
ar          ar-SA       Arabic
ar-AE       ar-AE       Arabic (U.A.E.)
ar-BH       ar-BH       Arabic (Bahrain)
ar-DZ       ar-DZ       Arabic (Algeria)
ar-EG       ar-EG       Arabic (Egypt)
ar-IQ       ar-IQ       Arabic (Iraq)
ar-JO       ar-JO       Arabic (Jordan)
ar-KW       ar-KW       Arabic (Kuwait)
ar-LB       ar-LB       Arabic (Lebanon)
ar-LY       ar-LY       Arabic (Libya)
ar-MA       ar-MA       Arabic (Morocco)
ar-OM       ar-OM       Arabic (Oman)
ar-QA       ar-QA       Arabic (Qatar)
ar-SA       ar-SA       Arabic (Saudi Arabia)
ar-SY       ar-SY       Arabic (Syria)
ar-TN       ar-TN       Arabic (Tunisia)
ar-YE       ar-YE       Arabic (Yemen)
az          az-Latn-AZ  Azeri
az-Cyrl-AZ  az-Cyrl-AZ  Azeri (Cyrillic, Azerbaijan)
az-Latn-AZ  az-Latn-AZ  Azeri (Latin, Azerbaijan)
be          be-BY       Belarusian
be-BY       be-BY       Belarusian (Belarus)
bg          bg-BG       Bulgarian
bg-BG       bg-BG       Bulgarian (Bulgaria)
bs-Latn-BA  bs-Latn-BA  Bosnian (Bosnia and Herzegovina)
ca          ca-ES       Catalan
ca-ES       ca-ES       Catalan (Catalan)
cs          cs-CZ       Czech
cs-CZ       cs-CZ       Czech (Czech Republic)
cy-GB       cy-GB       Welsh (United Kingdom)
da          da-DK       Danish
da-DK       da-DK       Danish (Denmark)
de          de-DE       German
de-AT       de-AT       German (Austria)
de-DE       de-DE       German (Germany)
de-CH       de-CH       German (Switzerland)
de-LI       de-LI       German (Liechtenstein)
de-LU       de-LU       German (Luxembourg)
dv          dv-MV       Divehi
dv-MV       dv-MV       Divehi (Maldives)
el          el-GR       Greek
el-GR       el-GR       Greek (Greece)
en          en-US       English
en-029      en-029      English (Caribbean)
en-AU       en-AU       English (Australia)
en-BZ       en-BZ       English (Belize)
en-CA       en-CA       English (Canada)
en-GB       en-GB       English (United Kingdom)
en-IE       en-IE       English (Ireland)
en-JM       en-JM       English (Jamaica)
en-NZ       en-NZ       English (New Zealand)
en-PH       en-PH       English (Republic of the Philippines)
en-TT       en-TT       English (Trinidad and Tobago)
en-US       en-US       English (United States)
en-ZA       en-ZA       English (South Africa)
en-ZW       en-ZW       English (Zimbabwe)
es          es-ES       Spanish
es-AR       es-AR       Spanish (Argentina)
es-BO       es-BO       Spanish (Bolivia)
es-CL       es-CL       Spanish (Chile)
es-CO       es-CO       Spanish (Colombia)
es-CR       es-CR       Spanish (Costa Rica)
es-DO       es-DO       Spanish (Dominican Republic)
es-EC       es-EC       Spanish (Ecuador)
es-ES       es-ES       Spanish (Spain)
es-GT       es-GT       Spanish (Guatemala)
es-HN       es-HN       Spanish (Honduras)
es-MX       es-MX       Spanish (Mexico)
es-NI       es-NI       Spanish (Nicaragua)
es-PA       es-PA       Spanish (Panama)
es-PE       es-PE       Spanish (Peru)
es-PR       es-PR       Spanish (Puerto Rico)
es-PY       es-PY       Spanish (Paraguay)
es-SV       es-SV       Spanish (El Salvador)
es-UY       es-UY       Spanish (Uruguay)
es-VE       es-VE       Spanish (Venezuela)
et          et-EE       Estonian
et-EE       et-EE       Estonian (Estonia)
eu          eu-ES       Basque
eu-ES       eu-ES       Basque (Basque)
fa          fa-IR       Persian
fa-IR       fa-IR       Persian (Iran)
fi          fi-FI       Finnish
fi-FI       fi-FI       Finnish (Finland)
fo          fo-FO       Faroese
fo-FO       fo-FO       Faroese (Faroe Islands)
fr          fr-FR       French
fr-BE       fr-BE       French (Belgium)
fr-CA       fr-CA       French (Canada)
fr-FR       fr-FR       French (France)
fr-CH       fr-CH       French (Switzerland)
fr-LU       fr-LU       French (Luxembourg)
fr-MC       fr-MC       French (Principality of Monaco)
gl          gl-ES       Galician
gl-ES       gl-ES       Galician (Galician)
gu          gu-IN       Gujarati
gu-IN       gu-IN       Gujarati (India)
he          he-IL       Hebrew
he-IL       he-IL       Hebrew (Israel)
hi          hi-IN       Hindi
hi-IN       hi-IN       Hindi (India)
hr          hr-HR       Croatian
hr-BA       hr-BA       Croatian (Bosnia and Herzegovina)
hr-HR       hr-HR       Croatian (Croatia)
hu          hu-HU       Hungarian
hu-HU       hu-HU       Hungarian (Hungary)
hy          hy-AM       Armenian
hy-AM       hy-AM       Armenian (Armenia)
id          id-ID       Indonesian
id-ID       id-ID       Indonesian (Indonesia)
is          is-IS       Icelandic
is-IS       is-IS       Icelandic (Iceland)
it          it-IT       Italian
it-CH       it-CH       Italian (Switzerland)
it-IT       it-IT       Italian (Italy)
ja          ja-JP       Japanese
ja-JP       ja-JP       Japanese (Japan)
ka          ka-GE       Georgian
ka-GE       ka-GE       Georgian (Georgia)
kk          kk-KZ       Kazakh
kk-KZ       kk-KZ       Kazakh (Kazakhstan)
kn          kn-IN       Kannada
kn-IN       kn-IN       Kannada (India)
ko          ko-KR       Korean
kok         kok-IN      Konkani
kok-IN      kok-IN      Konkani (India)
ko-KR       ko-KR       Korean (Korea)
ky          ky-KG       Kyrgyz
ky-KG       ky-KG       Kyrgyz (Kyrgyzstan)
lt          lt-LT       Lithuanian
lt-LT       lt-LT       Lithuanian (Lithuania)
lv          lv-LV       Latvian
lv-LV       lv-LV       Latvian (Latvia)
mi-NZ       mi-NZ       Maori (New Zealand)
mk          mk-MK       Macedonian
mk-MK       mk-MK       Macedonian (Former Yugoslav Republic of Macedonia)
mn          mn-MN       Mongolian
mn-MN       mn-MN       Mongolian (Cyrillic, Mongolia)
mr          mr-IN       Marathi
mr-IN       mr-IN       Marathi (India)
ms          ms-MY       Malay
ms-BN       ms-BN       Malay (Brunei Darussalam)
ms-MY       ms-MY       Malay (Malaysia)
mt-MT       mt-MT       Maltese (Malta)
nb-NO       nb-NO       Norwegian, Bokmal (Norway)
nl          nl-NL       Dutch
nl-BE       nl-BE       Dutch (Belgium)
nl-NL       nl-NL       Dutch (Netherlands)
nn-NO       nn-NO       Norwegian, Nynorsk (Norway)
no          nb-NO       Norwegian
ns-ZA       ns-ZA       Northern Sotho (South Africa)
pa          pa-IN       Punjabi
pa-IN       pa-IN       Punjabi (India)
pl          pl-PL       Polish
pl-PL       pl-PL       Polish (Poland)
pt          pt-BR       Portuguese
pt-BR       pt-BR       Portuguese (Brazil)
pt-PT       pt-PT       Portuguese (Portugal)
quz-BO      quz-BO      Quechua (Bolivia)
quz-EC      quz-EC      Quechua (Ecuador)
quz-PE      quz-PE      Quechua (Peru)
ro          ro-RO       Romanian
ro-RO       ro-RO       Romanian (Romania)
ru          ru-RU       Russian
ru-RU       ru-RU       Russian (Russia)
sa          sa-IN       Sanskrit
sa-IN       sa-IN       Sanskrit (India)
se-FI       se-FI       Sami (Northern) (Finland)
se-NO       se-NO       Sami (Northern) (Norway)
se-SE       se-SE       Sami (Northern) (Sweden)
sk          sk-SK       Slovak
sk-SK       sk-SK       Slovak (Slovakia)
sl          sl-SI       Slovenian
sl-SI       sl-SI       Slovenian (Slovenia)
sma-NO      sma-NO      Sami (Southern) (Norway)
sma-SE      sma-SE      Sami (Southern) (Sweden)
smj-NO      smj-NO      Sami (Lule) (Norway)
smj-SE      smj-SE      Sami (Lule) (Sweden)
smn-FI      smn-FI      Sami (Inari) (Finland)
sms-FI      sms-FI      Sami (Skolt) (Finland)
sq          sq-AL       Albanian
sq-AL       sq-AL       Albanian (Albania)
sr          sr-Latn-CS  Serbian
sr-Cyrl-BA  sr-Cyrl-BA  Serbian (Cyrillic) (Bosnia and Herzegovina)
sr-Cyrl-CS  sr-Cyrl-CS  Serbian (Cyrillic, Serbia)
sr-Latn-BA  sr-Latn-BA  Serbian (Latin) (Bosnia and Herzegovina)
sr-Latn-CS  sr-Latn-CS  Serbian (Latin, Serbia)
sv          sv-SE       Swedish
sv-FI       sv-FI       Swedish (Finland)
sv-SE       sv-SE       Swedish (Sweden)
sw          sw-KE       Kiswahili
sw-KE       sw-KE       Kiswahili (Kenya)
syr         syr-SY      Syriac
syr-SY      syr-SY      Syriac (Syria)
ta          ta-IN       Tamil
ta-IN       ta-IN       Tamil (India)
te          te-IN       Telugu
te-IN       te-IN       Telugu (India)
th          th-TH       Thai
th-TH       th-TH       Thai (Thailand)
tn-ZA       tn-ZA       Tswana (South Africa)
tr          tr-TR       Turkish
tr-TR       tr-TR       Turkish (Turkey)
tt          tt-RU       Tatar
tt-RU       tt-RU       Tatar (Russia)
uk          uk-UA       Ukrainian
uk-UA       uk-UA       Ukrainian (Ukraine)
ur          ur-PK       Urdu
ur-PK       ur-PK       Urdu (Islamic Republic of Pakistan)
uz          uz-Latn-UZ  Uzbek
uz-Cyrl-UZ  uz-Cyrl-UZ  Uzbek (Cyrillic, Uzbekistan)
uz-Latn-UZ  uz-Latn-UZ  Uzbek (Latin, Uzbekistan)
vi          vi-VN       Vietnamese
vi-VN       vi-VN       Vietnamese (Vietnam)
xh-ZA       xh-ZA       Xhosa (South Africa)
zh-CN       zh-CN       Chinese (People's Republic of China)
zh-HK       zh-HK       Chinese (Hong Kong S.A.R.)
zh-CHS      (none)      Chinese (Simplified)
zh-CHT      (none)      Chinese (Traditional)
zh-MO       zh-MO       Chinese (Macao S.A.R.)
zh-SG       zh-SG       Chinese (Singapore)
zh-TW       zh-TW       Chinese (Taiwan)
zu-ZA       zu-ZA       Zulu (South Africa) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T10:12:00.187

> 有没有什么地方可以让我获得所有与.net一起工作的文化信息的名称？

您可以使用它[`CultureInfo.GetCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)来查找您实际运行的机器上支持的文化列表。如果它因操作系统、服务包、.NET 版本等而异，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T10:12:55.130

检查[`CultureInfo.GetCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)方法。

> 获取由指定 CultureTypes 参数过滤的受支持区域性列表。

您可以将[`CultureTypes.AllCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.culturetypes.aspx)其用作参数；

> .NET Framework 附带的所有文化，包括中性和特定文化、安装在 Windows 操作系统中的文化以及用户创建的自定义文化。

```
foreach (CultureInfo ci in CultureInfo.GetCultures(CultureTypes.AllCultures))
{
     Console.Write("{0,-7}", ci.Name);
     Console.Write(" {0,-3}", ci.TwoLetterISOLanguageName);
     Console.Write(" {0,-3}", ci.ThreeLetterISOLanguageName);
     Console.Write(" {0,-3}", ci.ThreeLetterWindowsLanguageName);
     Console.Write(" {0,-40}", ci.DisplayName);
     Console.WriteLine(" {0,-40}", ci.EnglishName);
} 
```

这是一个[`DEMO`](http://ideone.com/AhcI3w).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T10:25:28.490

国家语言支持 (NLS) API 参考：http:
[//msdn.microsoft.com/en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)

在链接
[http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.isocurrencysymbol(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.isocurrencysymbol(v=vs.110).aspx)
中，您可以找到 SEK、ISK 和 BRL。

new RegionInfo("si-LK") 用于 LKR。不幸的是，NLS 列表中没有斐济。

# javascript - 如何发送部分代码异步？

> ID：15968628
> 
> 赞同：0
> 
> 时间：2013-04-12T10:10:39.230
> 
> 标签：javascript, .net, linq, serialization, asynchronous

在我的回复中，我有一个函数可以加载点（谷歌点）的模型数据并将其序列化，完成后发送给客户端。

代码如下所示：

```
IList<PuntoMappa> punti = new List<PuntoMappa>();
foreach (Ricettivito Struttura in StruttureFinali)
{
    PuntoMappa punto = new PuntoMappa();
    punto.Titolo = Struttura.Titolo;
    punto.Lat = Struttura.Geo.Latitudine;
    punto.Lng = Struttura.Geo.Longitudine;
    punto.Categoria = Struttura.Categoria;
    punti.Add(punto);
    }
}

m_strPunti = jsonSerializer.Serialize(punti);
if (m_strPunti == "")
{
    m_strPunti = "{ }";
}

ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "puntiLocalizzati", "var puntiLocalizzati = " + m_strPunti + ";", true); 
```

问题是我里面有 200/300 个对象`StruttureFinali`，加载这个函数并序列化它需要大约 10 秒。

在 WebForm 上的 .cs 中的所有功能完成之前，网页不会显示。

有没有办法异步加载这个内容？那么正常显示代码，并异步返回“这个函数”？客户端我可以使用就绪/加载事件来管理整个操作。

附言

`StruttureFinali`是一个`List<Ricettivito>.ToList();`

# machine-learning - 使用 sklearn.AffinityPropagation 输出标签

> ID：15968635
> 
> 赞同：2
> 
> 时间：2013-04-12T10:10:58.877
> 
> 标签：machine-learning, bioinformatics, scikit-learn

我有一组数据，它是 1000 个同源蛋白质序列的距离矩阵。

我已经设法为此计算了亲和力矩阵（简单计算：1 - 距离，在我的例子中）。

基本上，如果在 Excel 中查看数据，没有标题行，第一列是序列名称，然后接下来的 1000 列是距离值。

我已经修改了 sklearn 的 Affinity Propagation 站点上提供的代码。这就是它现在的样子：

```
print __doc__

import numpy as np
from sklearn.cluster import AffinityPropagation
from sklearn import metrics
from sklearn.datasets.samples_generator import make_blobs
import csv

##############################################################################
f = open('ha-sequences-sample-distmat2.csv', 'rU')
csvreader = csv.reader(f)

sequence_names = []
distance_matrix = []
full_data = []

for row in csvreader:
#   print row

    sequence_names.append(row[0])
    distance_matrix.append(row[1:])
    full_data.append(row)

f.close()

distmat = np.array([row for row in distance_matrix]).astype(np.float)

# print distmat

affinity_matrix = np.array([1 - row for row in distmat]).astype(np.float)

full_matrix = zip(sequence_names, affinity_matrix)

# print affinity_matrix, sequence_names

##############################################################################
# Compute Affinity Propagation
af = AffinityPropagation(affinity='precomputed').fit(affinity_matrix)
cluster_centers_indices = af.cluster_centers_indices_
labels = af.labels_

n_clusters_ = len(cluster_centers_indices)

print 'Estimated number of clusters: %d' % n_clusters_
print "Homogeneity: %0.3f" % metrics.homogeneity_score(sequence_names, labels)
print "Completeness: %0.3f" % metrics.completeness_score(sequence_names, labels)
print "V-measure: %0.3f" % metrics.v_measure_score(sequence_names, labels)
print "Adjusted Rand Index: %0.3f" % \
    metrics.adjusted_rand_score(sequence_names, labels)
print("Adjusted Mutual Information: %0.3f" %
      metrics.adjusted_mutual_info_score(sequence_names, labels))
print("Silhouette Coefficient: %0.3f" %
      metrics.silhouette_score(affinity_matrix, labels, metric='sqeuclidean'))

##############################################################################
# Plot result
import pylab as pl
from itertools import cycle

pl.close('all')
pl.figure(1)
pl.clf()

colors = cycle('bgrcmykbgrcmykbgrcmykbgrcmyk')
for k, col in zip(range(n_clusters_), colors):
    class_members = labels == k
    cluster_center = affinity_matrix[cluster_centers_indices[k]]
    pl.plot(affinity_matrix[class_members, 0], affinity_matrix[class_members, 1], col + '.')
    pl.plot(cluster_center[0], cluster_center[1], 'o', markerfacecolor=col,
            markeredgecolor='k', markersize=14)
    for x in affinity_matrix[class_members]:
        pl.plot([cluster_center[0], x[0]], [cluster_center[1], x[1]], col)

pl.title('Estimated number of clusters: %d' % n_clusters_)
pl.show() 
```

我遇到的问题是：我不知道如何输出与每个集群对应的序列名称。如果我可以将聚集在一起的序列输出到 shell 并在绘图上显示簇编号，那将是最好的，但即使我不在绘图上显示东西，那也很酷。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:58:15.277

您有序列名称列表 (sequence_names) 和一个集群标签数组 (af.labels_)。因此，您可以遍历集群标签数组并从集群标签列表中保留一个映射序列名称。例如

```
#for a simple example, assume the names and cluster labels are predefined
sequence_names = ["a", "b", "c", "d"]
labels = [0,1,1,0]

from collections import defaultdict
clusternames = defaultdict(list)

for i, label in enumerate(labels):
    clusternames[label].append(sequence_names[i])

#clusternames now holds a map from cluster label to list of sequence names
#Print out the label with the list 
for k, v in clusternames.items():
    print k, v 
```

# iphone - 录制音频并保存到文档目录后无法使用 AVAudioPlayer 播放音频文件

> ID：15968636
> 
> 赞同：0
> 
> 时间：2013-04-12T10:11:01.033
> 
> 标签：iphone, ios, ios6, avaudioplayer, avaudiorecorder

我正在开发具有录制音频并播放存储在文档目录中的录制文件的应用程序。

**这是我的代码：**

录制按钮方法。

```
(IBAction)stopButtonPressed:(id)sender{

     UIButton *button = (UIButton *)sender;

     if (button.selected) { // Play recorded file.

     self.stopButton.selected = NO;

     NSError *error;

    self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioRecorder.url     error:&error];

    self.audioPlayer.delegate = self;

    self.audioPlayer.volume = 1.0;

    [self.audioPlayer prepareToPlay];

    [self.audioPlayer play];

    }

    else{ // Stop recording.

    self.stopButton.selected = YES;

    if (recordTimer) {

    [recordTimer invalidate];

    }

    [self.audioPlayer stop];

    self.recordButton.selected = NO;

    [audioRecorder stop];

    self.readyLabel.text = @"READY";

    [self insertNewRecording];
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:30:30.020

我认为您正在使用 ARC，在这种情况下，您需要保留 AVAudioPlayer，因为它会自动设置为 nil。在您的头文件中输入以下内容

> @property (nonatomic, strong) AVAudioPlayer *audioPlayer;

希望这对你有用，干杯吉姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:38:10.953

嗯..我不确定。但作为一个测试，也许你可以尝试通过指定文件名来播放文件？例如，你有一个 forest.mp3 可以播放，代码的关键部分可以是这样的：

```
path = [[NSBundle mainBundle] pathForResource:@"forest" ofType:@"mp3"]; 
NSData *sampleData = [[NSData alloc] initWithContentsOfFile:path]; 
NSError *audioError = nil; 
av = [[AVAudioPlayer alloc] initWithData:sampleData  error:&audioError]; 
```

如果一切顺利，也许这与您代码中的 audioRecorder.url 有关？

希望这能给你一些想法。

# android - 安卓 + 谷歌地图 API v2 错误

> ID：15968637
> 
> 赞同：1
> 
> 时间：2013-04-12T10:11:00.780
> 
> 标签：android, google-maps, compiler-errors

我正在尝试安装 2 个软件包以在模拟器上使用 google 地图，但我在 log cat 中遇到问题，我不知道如何在模拟器上修复此错误，它显示 **此应用程序不会运行，除非您更新 google播放服务** 谁能帮我？？？这些是我用来构建简单的文件和代码

# mainActivity.java

```
package com.example.googlemapv2;

import android.os.Bundle;
import android.app.Activity;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

# 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.googlemapv2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.googlemapv2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="your.application.package.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="API KEY" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.googlemapv2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# 日志猫

```
04-12 09:27:58.548: E/Trace(622): error opening trace file: No such file or directory (2)
04-12 09:27:59.448: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.468: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.498: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.510: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.537: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.578: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:27:59.888: D/gralloc_goldfish(622): Emulator without GPU emulation detected.
04-12 09:28:13.158: W/GooglePlayServicesUtil(622): Google Play services out of date.  Requires 3027100 but found 2012110
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622): KeyEvent: ACTION_UP but key was not down.
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   in com.android.internal.policy.impl.PhoneWindow$DecorView@414a00c0
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   0: sent at 692046000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=692046, downTime=691902, deviceId=0, source=0x101 }
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   -- recent events --
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   1: sent at 222169403000, (unhandled) MotionEvent { action=ACTION_UP, id[0]=0, x[0]=464.0, y[0]=562.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=222169, downTime=222095, deviceId=0, source=0x1002 }
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   2: sent at 222095935000, (unhandled) MotionEvent { action=ACTION_DOWN, id[0]=0, x[0]=464.0, y[0]=562.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=222095, downTime=222095, deviceId=0, source=0x1002 }
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   3: sent at 146103826000, MotionEvent { action=ACTION_UP, id[0]=0, x[0]=111.0, y[0]=287.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=146103, downTime=146009, deviceId=0, source=0x1002 }
04-12 09:37:16.108: D/InputEventConsistencyVerifier(622):   4: sent at 146009274000, MotionEvent { action=ACTION_DOWN, id[0]=0, x[0]=111.0, y[0]=287.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=146009, downTime=146009, deviceId=0, source=0x1002 }
04-12 09:37:16.208: D/dalvikvm(622): GC_CONCURRENT freed 257K, 3% free 10934K/11271K, paused 22ms+10ms, total 144ms 
```

# php - Safari浏览器不处理cookie - PHP

> ID：15968640
> 
> 赞同：2
> 
> 时间：2013-04-12T10:11:06.780
> 
> 标签：php, safari

在过去的两天里，我一直被这个问题困扰，我的主“login.php”文件中有以下代码，它在所有浏览器中运行没有任何问题，但在“Safari”中没有。

```
 if(isset($_SESSION["del_log"]) && !empty($_SESSION["del_log"]) && isset($_SESSION["user_type"]) && !empty($deal_type)){

            $expire=time()+60*60*24*365;
            setcookie("del_log",$_SESSION["del_log"], $expire, '/');
            setcookie("user_type", $_SESSION["user_type"], $expire, '/');

    echo "<script>window.location.href=\"http://www.sample.com/foldername/index.php\"</script>";
        } 
```

我正在“.../foldername/index.php”文件中检查这些cookies：

```
 if (isset($_COOKIE["del_log"]) && !empty($_COOKIE["del_log"])){
     $log=$_COOKIE["del_log"];
     $user_type=$_COOKIE["user_type"];
 }else{
     echo "<script>window.location.href=\"http://www.sample.com/\"</script>";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:32:46.487

以前遇到过这个问题。会话的 cookie 路径 ( [http://php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php) ) 必须有一个斜杠才能工作。Safari 特定的。

请参阅我的另一个问题的答案：[https ://stackoverflow.com/a/15131791/188331](https://stackoverflow.com/a/15131791/188331)

# java - Struts2 重定向具有哈希的 url

> ID：15968641
> 
> 赞同：0
> 
> 时间：2013-04-12T10:11:07.610
> 
> 标签：java, facebook, url, redirect, struts2

我目前正在我的应用程序中实现一个 facebook 登录，在用户成功授权他或她的帐户后，它将返回到我的 Web 服务器中的一个操作类，然后就可以了。

这是一个例子

1）用户点击登录 facebook 2）他或她将被重定向到这个 facebook 授权页面 2）一旦他或她被授权。页面将被重定向到 struts2 动作类。所以网址看起来像这样

```
http://127.0.0.1:8080/MyApp-Facebook/oAuthExchange?code=SomeLongFacebookCodHere#_=_ 
```

如果您会看到 oAuthExchange 的结束 url 有一个`#_=_`. 然后它将被重定向到我的应用程序的仪表板页面，页面网址将如下所示

```
http://127.0.0.1:8080/Struts2-Facebook/dashboard#_=_ 
```

如果您注意到`"#_=_"`我的网址中有一个。无论如何我可以`"#_=_"`在我进行重定向时删除？

我也将[Facebook4j](http://facebook4j.org/en/index.html)用于 facebook 图形 API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:52:08.947

您可以直接从 HTML5 兼容浏览器的结果页面中删除它`history.pushState()`。

假设`#_=_`是固定的（否则你需要执行一个动态`substring`的`indexOf`寻找`#`），把它放在你的页面中：

```
<script>
    //4 is the lenght of #_=_
    var cleanLocation = location.href.substring(0, location.href - 4); 
    history.pushState("","", cleanLocation);
</script> 
```

# android - Android：前台活动的经过时间

> ID：15968646
> 
> 赞同：0
> 
> 时间：2013-04-12T10:11:23.677
> 
> 标签：android

在我当前的 android 项目中，我正在尝试计算前台活动经过的时间。我在[这个网站](http://www.androidjavadoc.com/2.3/android/os/BatteryStats.Uid.Proc.html#getForegroundTime%28int%29)上发现了一些功能。

这些内置函数是只返回时间还是我必须在其他类中定义这些方法？有人请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:19:01.897

您可以在没有任何库的情况下以一种 hack 简单的方式将您的活动的时间花在前台......只需**@Override OnPause()** - 您可以在其中获取当前时间，然后当应用程序从前台返回时**@Override OnResume()**您在哪里当前时间也是...然后只计算差异！！））例如，您可以将 cur.times 保存在 sharedPrefs 中，并在 OnDestroy() 中将它们设置为 null ！！）

# jquery - $(element).find(".class").css(...) 和 $(this).css 在 $(element).find(".class").each() 函数中是否有区别?

> ID：15968653
> 
> 赞同：5
> 
> 时间：2013-04-12T10:11:39.937
> 
> 标签：jquery, backbone.js

如果我想使用 jQuery find 方法编辑具有特定类的 DOM 元素的 CSS 属性，如果我使用这种简短的方法，它是否会有所不同（在性能和浏览器兼容性方面）：

```
$(domobject).find(".theclass").css("color","#FFF"); 
```

或这样的每个函数：

```
$(domobject).find(".theclass").each(function() {
    $(this).css("color","#FFF");
}); 
```

就我而言，dom-object 是一个backbone.js view.el 元素，但当然我的问题不仅适用于backbone.js。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:18:41.217

所以你想用“theclass”类来设计你所有的元素？

如果是这样[， .each() 的 jQuery 文档](http://api.jquery.com/each/%20%22jQuery%20Api%20for%20.each%28%29)说：

> 注意：大多数返回 jQuery 对象的 jQuery 方法也会循环遍历 jQuery 集合中的元素集——这个过程称为隐式迭代。**发生这种情况时，通常不需要显式地使用 .each() 方法进行迭代**

正如 Sirko 建议的那样，您可以进行性能测试 :) 我更喜欢您的首选

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:17:55.620

第一个选择更好——更少的代码，不创建不必要的匿名函数，不调用这个函数。两者都是跨浏览器。jQuery：少写，多做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T10:19:02.843

性能方面，第一个片段[稍微快一点](http://jsperf.com/jquery-explicit-each)：

![在此处输入图像描述](https://i.stack.imgur.com/1tlBf.png)

在内部，它做了几乎相同的事情，但是在 jQuery 中迭代一组元素的代码可能比你可以手动实现的优化得多`.each`。

正如其他人已经说过的，浏览器兼容性应该是相同的。

# android - 在android的linearlayout中找出哪个视图在多个布局中触摸？

> ID：15968667
> 
> 赞同：0
> 
> 时间：2013-04-12T10:12:20.973
> 
> 标签：android, android-layout

我必须使用 Java 动态创建布局。

我动态创建了 9 个线性布局，如下所示：

```
for (int i=0;i<10;i++)
{
    Element e = (Element) nl.item(i);
    cpName = parser.getValue(e,"coverpage");    
    System.out.println("coverpage name :" + cpName);

    LinearLayout lbottomLayoutu1=new LinearLayout(getApplicationContext());
    lbottomLayoutu1.setGravity(Gravity.CENTER);
    LinearLayout.LayoutParams layoutParams1u1= new LinearLayout.LayoutParams(width,height/4);
    layoutParams1u1.weight=1.0f;    
    lbottomLayoutu1.setLayoutParams(layoutParams1u1);
    lbottomLayoutu1.setBackgroundColor(Color.RED);
    lbottomLayoutu1.setBackgroundResource(R.drawable.image);
    linearLayout.addView(lbottomLayoutu1);

    ImageView iv1=new ImageView(getApplicationContext());
    LinearLayout.LayoutParams layoutParams= new LinearLayout.LayoutParams(width/4,height/4);
    iv1.setLayoutParams(layoutParams);
    iv1.setImageResource(R.drawable.coverpage3);
    lbottomLayoutu1.addView(iv1);

    lbottomLayoutu1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            System.out.println("Calling coverpage");
            String Url = WebUrl+cpName;
            System.out.println("web Url: " + Url);
            Intent in = new Intent(getApplicationContext(),CurlActivity.class);
            Bundle bundle = new Bundle();
            bundle.putString("Image Url",Url);
            in.putExtras(bundle);
            startActivity(in);
        }
    });
    setContentView(linearLayout);
} 
```

我为每个布局设置了一个触摸事件。但是如果我触摸任何布局，我怎么知道哪个布局正在触摸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:32:32.990

您需要将每个布局的 id 设置为

```
 obj.setId(i) 
```

以便在您的触摸事件中您可以识别它

```
 int id=obj.getId() 
```

并相应地工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:26:04.360

我认为最好使用自定义 listView （比如这里[http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text](http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T10:54:42.207

如果您为视图实现 OnClickListener，就像您所做的那样......

```
lbottomLayoutu1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // ...
    }
} 
```

...该参数`View v`告诉您已触及哪个布局。然后，您可以将其转换为您预期的布局，例如：

```
LinearLayout clickedLayout = (LinearLayout) v; 
```

这将是已单击的布局。

然而，如果你想知道你在循环中使用的索引，你必须覆盖你的`LinearLayout`并给它一个保存索引的成员。然后您可以将其转换为您的自定义 LinearLayout 类并获取索引。（如果您需要更多帮助，请在评论中告诉我）。

# iphone - ios 中的 Google+ 签到位置

> ID：15968670
> 
> 赞同：1
> 
> 时间：2013-04-12T10:12:37.933
> 
> 标签：iphone, objective-c, ios6, geolocation, google-plus

我想在 ios 中实现位置签入功能。我的应用程序正在使用 google+ ios sdk。我面临的问题是，在我实现了 google+ 签入功能之后，该帖子没有显示在我的 google+ 帐户上。

我尝试并实施的技术写在下面。

```
 -(IBAction)checkIn
  {
   GTMOAuth2Authentication *auth = [GPPSignIn sharedInstance].authentication;

   GTLServicePlus* plusService = [[GTLServicePlus alloc] init] ;
   plusService.retryEnabled = YES;
    [plusService setAuthorizer:auth];

GTLPlusMoment *moment = [[GTLPlusMoment alloc] init];
moment.type =  @"http://schemas.google.com/CheckInActivity";
GTLPlusItemScope *target = [[GTLPlusItemScope alloc] init] ;
target.url =@"https://developers.google.com/+/plugins/snippet/examples/place";

moment.target = target;

 GTLQueryPlus *query =
[GTLQueryPlus queryForMomentsInsertWithObject:moment
                                       userId:@"me"
                                  collection:kGTLPlusCollectionVault];

[plusService executeQuery:query
        completionHandler:^(GTLServiceTicket *ticket,
                            id object,
                            NSError *error) {
            if (error) {
                GTMLoggerError(@"Error: %@", error);
                NSString *failure =
                [NSString stringWithFormat:@"Status: Error: %@", error];
                NSLog(@"%@",failure);

            } else {
               NSString *result = @"CheckedIn Saved in Google+";
                NSLog(@"%@",result);
            }
        }];

        } 
```

任何人都可以帮助我。这是实现google+位置签入功能的正确方法还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:35:54.203

您正在使用的方法是向 Google+ 写入“应用程序活动”，它将“时刻”存储在用户的应用程序活动库中。正如[https://developers.google.com/+/mobile/ios/app-activities](https://developers.google.com/+/mobile/ios/app-activities)中所述，这些时刻在用户的信息流中并不直接可见，但如果用户愿意，可以选择将它们分享到信息流中。

要查看已共享的时刻，您需要使用桌面应用程序。您的个人资料中有一个使用 Google+ 登录的应用列表，您可以查看、共享和删除每个应用的活动。移动 Google+ 客户端还不允许您查看活动。

# c# - 使用 ajax 发布到部分视图表单的服务器

> ID：15968671
> 
> 赞同：0
> 
> 时间：2013-04-12T10:12:38.043
> 
> 标签：c#, html, ajax, asp.net-mvc, asp.net-mvc-3

我是使用 ajax 的新手，我必须将表单数据添加到帖子中，以便可以将其添加到服务器。但棘手的部分是表单数据是对话框上的部分视图。我想知道如何使用 ajax 来获取这些数据，以便将其放回数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:24:04.080

单击对话框中的按钮创建一个函数然后取消该函数使用 $.Post({"Controller/Action", {Parameter List}}) 其中参数列表将包含控件的值 Like

Parameter1=document.getelementbyid('Textbox1').value; 很快 ....

并使用 [HTTPPost] 在控制器中创建一个操作方法

你可以从这里检查语法

[http://www.codeproject.com/Articles/426765/post-and-get-in-MVC-Razor-JQuery](http://www.codeproject.com/Articles/426765/post-and-get-in-MVC-Razor-JQuery)

如果它对您的问题有帮助，请单击有用的答案。

# c# - JSON.NET：处理反序列化的未知成员

> ID：15968673
> 
> 赞同：7
> 
> 时间：2013-04-12T10:12:44.627
> 
> 标签：c#, json, json.net

我正在使用 JSON 进行数据交换。我正在使用 JSON.NET 框架。

我有课：

```
public class CarEntity
{
    public string Model { get; set; }
    public int Year { get; set; }
    public int Price { get; set; }
} 
```

我有以下代码：

```
public void Test()
{
    var jsonString = 
    @"{
      ""Model"": ""Dodge Caliber"",
      ""Year"": 2011,
      ""Price"": 15000,
      ""Mileage"": 35000
    }";
    var parsed = (CarEntity)JsonConvert.DeserializeObject(jsonString, typeof(CarEntity));
} 
```

由于 CarEntity 类中没有“里程”字段，我需要有关它的日志警告：

> 未知字段：里程=35000

有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T10:39:16.813

这有点棘手，但你可以。将您的代码更改为：

```
var parsed = (CarEntity)JsonConvert.DeserializeObject(jsonString, typeof(CarEntity), new JsonSerializerSettings()
{
    MissingMemberHandling = MissingMemberHandling.Error,
    Error = ErrorHandler
}); 
```

并添加：

```
private static void ErrorHandler(object x, ErrorEventArgs error)
{
    Console.WriteLine(error.ErrorContext.Error);
    error.ErrorContext.Handled = true;
} 
```

您可能应该对最后一行做更多的事情，因为现在每个错误都不会引发异常。

**更新**

在 Json.NET 中调用异常的反编译代码表单：

```
if (this.TraceWriter != null && this.TraceWriter.LevelFilter >= TraceLevel.Verbose)
    this.TraceWriter.Trace(TraceLevel.Verbose, JsonPosition.FormatMessage(reader as IJsonLineInfo, reader.Path, StringUtils.FormatWith("Could not find member '{0}' on {1}", (IFormatProvider) CultureInfo.InvariantCulture, (object) propertyName, (object) contract.UnderlyingType)), (Exception) null);
if (this.Serializer.MissingMemberHandling == MissingMemberHandling.Error)
    throw JsonSerializationException.Create(reader, StringUtils.FormatWith("Could not find member '{0}' on object of type '{1}'", (IFormatProvider) CultureInfo.InvariantCulture, (object) propertyName, (object) contract.UnderlyingType.Name));
reader.Skip(); 
```

# c# - LINQ to SQL 中的连接池

> ID：15968674
> 
> 赞同：2
> 
> 时间：2013-04-12T10:12:49.003
> 
> 标签：c#, linq, linq-to-sql

在使用调用 Web 服务的 C# 2008 Windows 应用程序中，有大量如下所示的语句： 在 C# 2008 应用程序中，我正在使用如下所示的 linq to sql 语句：

//代码

```
 TDataContext TData = new TDataContext();
  var TNumber = (from dw in cms_TData.people
  where dw.Organization_Name.ToUpper().Trim() == strOrgnizationName.Trim(). 
```

在每次调用数据库之前，都会创建一个新的数据上下文对象。

这会导致数据库出现某种连接池问题吗？如果是这样，你能告诉我如何解决连接池问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:16:22.893

连接池不是问题，它是解决问题的方法。连接池使您能够编写

```
TDataContext TData = new TDataContext(); 
```

不用担心耗尽有限数量的 RDBMS 连接，或者由于过于频繁地关闭和重新打开连接而使系统变慢。使用这样的代码可能会遇到的唯一问题是缓存：缓存在其中的任何内容在`TData`超出范围时都会消失，因此您可能会不必要地多次重新读取相同的信息。但是，在大多数情况下，RDBMS 端的缓存会对您有所帮助，因此在大多数情况下，即使缓存也不会成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:16:07.017

DataContext 是一个轻量级对象，它在作为任务完成后立即关闭数据库连接。

因此，创建大量这些对象不应导致连接池问题，除非它们可能同时在不同的线程上创建。

# php - 在表格中添加列

> ID：15968680
> 
> 赞同：0
> 
> 时间：2013-04-12T10:12:56.973
> 
> 标签：php, mysql

我想在数据库的所有表中添加一个公共列

例如：

我想`TENANT_ID`在数据库的所有表中插入列

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:14:18.637

您可以使用 ALTER TABLE SQL 命令，如下所示：

```
ALTER TABLE table_name
ADD column_name datatype 
```

如果您有多个表，则需要将其连续应用于每个表。

更多信息：http: [//www.w3schools.com/sql/sql_alter.asp](http://www.w3schools.com/sql/sql_alter.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:34:57.443

是的，你可以添加它

如果您有数组中的表列表

```
$column_name = 'TENANT_ID';
$size = '';
foreach($all_table_name as $each_table_name) {
   mysql_query("ALTER TABLE {$each_table_name} ADD {$column_name} VARBINARY({$size})");
} 
```

上面的代码我只是skilton你必须根据你的代码进行设置。

# cordova - 如何使用phonegap确定屏幕分辨率？

> ID：15968681
> 
> 赞同：0
> 
> 时间：2013-04-12T10:13:00.490
> 
> 标签：cordova

我为不同的屏幕分辨率创建了几个图像。fonegap 用什么函数可以确定屏幕分辨率？

我也想看一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:56:59.337

您还可以使用 $(window).width() 和 $(window).height() 或 screen.width；和screen.height；

这是一个使用 HTML、Javascript 和 JQuery 移动实现的示例。

网页：

```
<html>
    <head>
        <!-- put any jquery references here -->
        <script type="text/javascript" src="index.js">
    </head>
    <body>
        <div id=main_page">
        </div>
    </body>
</html> 
```

带有 JQuery 的 Javascript 文件：

```
$(document).ready(function ()
{
   resolution_handling();
});

function resolution_handling() 
{
    //first way to implement
    browser_width = $(window).width();
    browser_height = $(window).height();
    $("#main_page").css("width":browser_width+"px");
    $("#main_page").css("height":browser_height+"px");

    //second way to implement
    browser_width = screen.width;
    browser_height = screen.height;
    $("#main_page").css("width":browser_width+"px");
    $("#main_page").css("height":browser_height+"px");
} 
```

这两种实现都会使 div main_page 具有屏幕高度和宽度的尺寸。

我建议使用 $(window).width() 和 $(window).height() 因为从经验来看它比 screen.width 更稳定；和screen.height；

# ms-access - 仅指第一条记录的连续形式

> ID：15968682
> 
> 赞同：5
> 
> 时间：2013-04-12T10:13:06.193
> 
> 标签：ms-access, ms-access-2007, vba, continuous-forms

我有一个连续的表格 - 表格上的字段之一是 RecordID。

我在该表单上有一个标签，单击该标签时应通过 VBA 生成一个带有 RecordID 的消息框：

```
MsgBox Me.RecordID 
```

标签复制在连续表格的每一行上，但只会引用第一条记录。尽管我可以看到表单的每一行中的 RecordID 字段都不同，但我总是得到相同的结果，在本例中为 80029。

那是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:50:09.977

`Me.RecordID` refers to the `RecordID` of the *current record*, as indicated by the black triangle in the record selector:

![ContinuousForm](https://i.stack.imgur.com/HCHvn.png)

A `Label` control on a form cannot receive the `Focus`, so when you click on the label in another record the current record does not change and you keep getting the same `RecordID`. Note that if you put the same code into the `Click` handler for a textbox (or some other control that can receive the `Focus`) then the current record *will* change and you'll get the `RecordID` of that record.

# arrays - 排序程序不起作用

> ID：15968683
> 
> 赞同：2
> 
> 时间：2013-04-12T10:13:06.617
> 
> 标签：arrays, vba, sorting

我正在尝试对从单元格 A40 开始并以 A46 结束的 7 个值的列进行排序。我正在使用冒泡排序，并创建了两个过程。但是，当我执行时，VBA 告诉我下标超出范围......谁能告诉我我的代码中的问题在哪里，好吗？

```
Sub dort()

    Dim plaga() As Variant
    plaga = Worksheets("Sheet3").Range("A40:A46").Value

    Call tri1(plaga)

    Dim Destination As Range
    Set Destination = Worksheets("Sheet3").Range("C40")
    Destination.Resize(7, 1).Value = plaga

End Sub

Sub tri1(plaga As Variant)

    Dim ligne_Deb As Long
    Dim ligne_Fin As Long

    ligne_Deb = LBound(plaga)
    ligne_Fin = UBound(plaga)

    Dim i As Long, j As Long
    Dim tmp As Long

        For i = ligne_Deb To ligne_Fin - 1
        For j = ligne_Fin To i + 1 Step -1
            If plaga(j) < plaga(j - 1) Then
            tmp = plaga(j)
            plaga(j) = plaga(j - 1)
            plaga(j - 1) = tmp
            End If
        Next j
        Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:21:25.690

> 谁能告诉我代码中的问题在哪里，好吗？

```
plaga = Worksheets("Sheet3").Range("A40:A46").Value 
```

当您将范围存储在数组中时，它不是一维数组。

将您的代码更改为

```
plaga(j,1) 
```

注意`,1`. 将其融入任何地方。

例如

```
For i = ligne_Deb To ligne_Fin - 1
    For j = ligne_Fin To i + 1 Step -1
        If plaga(j, 1) < plaga(j - 1, 1) Then
            tmp = plaga(j, 1)
            plaga(j, 1) = plaga(j - 1, 1)
            plaga(j - 1, 1) = tmp
        End If
    Next j
Next i 
```

[有趣的阅​​读](http://www.cpearson.com/excel/ArraysAndRanges.aspx)

# c# - 返回一个整数数组的函数，该数组具有 1000 个元素，包含随机顺序的值 1 到 1000

> ID：15968685
> 
> 赞同：-4
> 
> 时间：2013-04-12T10:13:09.867
> 
> 标签：c#, .net

有人可以为我做这件事吗？

编写一个函数，返回一个包含 1000 个元素的整数数组，其中包含 1 到 1000 的随机顺序值。任何数字都不能重复或省略。

以下是解决上述问题的提示：用于`Random rnd=new Random()`创建随机数生成器的新实例并`rnd.Next(1,1000)`获取 1 到 1000 之间的随机整数值。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:16:59.187

我怀疑您的考官可能正在寻找[Fisher-Yates Shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，因此以下答案可能过于简洁。

```
Random r = new Random();
public int[] GetArr()
{
    return Enumerable.Range(1, 1000).OrderBy(_ => r.Next()).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T10:16:59.957

你试过吗： - 生成一个随机数 - 检查他是否已经在选项卡中 - 把它放在你的数组中，在第一个空闲位置

唯一的问题是它最终会大幅减速

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-12T10:21:56.570

您可能想尝试创建一个包含 int 和 bool 的类，bool 可以“使用”，然后 int 可以是索引，然后使用随机数生成器，获取与输出关联的数字，然后检查该数字是否被您的类的数组使用，如果没有，则将其推送到整数列表中，然后一旦完成将列表作为数组返回？

# oracle - Oracle 包中的全局变量大小

> ID：15968692
> 
> 赞同：0
> 
> 时间：2013-04-12T10:13:25.980
> 
> 标签：oracle, package, global-variables

如何根据函数的参数大小设置 oracle 包中 Varchar2 类型的全局变量的大小。

```
CREATE OR REPLACE PACKAGE Test 
AS

   g_lastname Varchar2(15);
   FUNCTION search( p_lastname IN varchar2);

END;

CREATE OR REPLACE PACKAGE BODY Test
AS
    FUNCTION search(p_lastname IN VARCHAR2) return VARCHAR2 
    IS
    BEGIN
        g_lastname := p_lastname;
        return g_lastname;
    END;
END; 
```

这里的问题是如果 p_lastname 大小大于 15，那么它会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:20:35.453

你不能，因为函数参数可以是任意大小`varchar2`，直到运行时才知道。

如果您知道稍后将如何使用该值，那么您可以根据表格列对其进行约束；因此，如果最终将在 select from table 中使用它，则可以将其`people`声明为：

```
 g_lastname people.last_name%type; 
```

您还可以在函数声明中使用该语法：

```
 FUNCTION search(p_lastname IN people.last_name%type) return VARCHAR2 
```

...虽然这实际上并没有限制可以传入的值的大小；`p_lastname`如果 的值太大，分配仍然会失败。可以说，在这种情况下，它必须在某个时候失败，并且在这里可能比您稍后尝试在`select`. 但它在代码中提供了一些一致性，并且（IMO）显示了全局和参数的意图，这对于以后的维护和故障排除很有用。

如果您只是想避免错误，则可以选择截断传递的值（如果它太长）：

```
 g_lastname := substr(p_lastname, 1, 15); 
```

...或先测试长度，但幻数并不完全理想（如果您更改定义，`g_lastname`则必须记住查找和替换依赖该长度的任何内容）；或捕捉并做一些例外的事情。

否则，仅仅声明它比你想象的要大并没有太大的缺点，最多：

```
 g_lastname varchar2(32767); 
```

尽管您可能会想出一个实际的较小的最大长度，但该值将永远需要（当然，直到有人更改要求！）。该[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CIHEDDFG)讨论了大变量的内存分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T22:05:45.513

> “%type 对我没有帮助。”

这很不寻常。大多数在 PL/SQL 程序之间传递的数据来自或最终出现在数据库表中。所以最佳实践是通过引用适当列的声明来定义变量和参数。

但是，对于真正不映射到任何表列的数据项，存在子类型声明。您可以在任何地方定义这些，但将所有声明组织在一个地方会很有帮助：

```
create or replace package types as
    subtype name_t is varchar2(15);
end;
/ 
```

您可以在您的程序中使用它，如下所示：

```
CREATE OR REPLACE PACKAGE Test 
AS

   FUNCTION search( p_lastname IN types.name_t) return types.name_t;

END; 
```

（我`g_lastname`从规范转移到正文，因为将包变量封装在正文中并仅通过打包过程访问它们是个好主意。）

```
CREATE OR REPLACE PACKAGE BODY Test
AS

    g_lastname types.name_t;

    FUNCTION search( p_lastname IN types.name_t) return types.name_t 
    IS
    BEGIN
        g_lastname := p_lastname;
        return g_lastname;
    END;
END; 
```

使用子类型的优点是只有一个地方定义了类型的精度。如果您需要 20 个字符的名称，只需更改该包规范中的声明，更改就会传播到所有引用程序。

# youtube-api - 适用于 C# 的 YouTube GData API - 在哪里可以找到有效的批处理查询示例？

> ID：15968695
> 
> 赞同：0
> 
> 时间：2013-04-12T10:13:36.767
> 
> 标签：youtube-api, gdata-api, youtube.net-api

我已经在网上搜索了好几天，只是寻找一个使用 C# API 的 YouTube 批处理请求的工作示例，但没有成功。很多文档已经过时了。

这些告诉我 XML 应该是什么样子：

[https://developers.google.com/gdata/docs/batch](https://developers.google.com/gdata/docs/batch) [https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing](https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing)

这是谷歌电子表格的一个例子：

[https://developers.google.com/google-apps/spreadsheets/#updating_multiple_cells_with_a_batch_request](https://developers.google.com/google-apps/spreadsheets/#updating_multiple_cells_with_a_batch_request)

虽然我一次又一次地非常接近，但我一直未能达到描述性 GDataRequestException “执行请求批处理失败”的目标。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:05:11.793

终于破解了！

现在，所以你不必经历我所经历的同样的盲目试验和恐怖经历：

```
using Google.GData.Client;
using Google.GData.YouTube;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.Linq;
using System.Text.RegularExpressions;
using System.Threading;
using System.Windows.Forms;
using System.Xml;
...
YouTubeService service = new YouTubeService("YouTube API Client", Properties.Settings.Default.YouTubeDeveloperKey);
const String searchFields = "entry(id,title,link[@rel='alternate'],author(name,yt:userId),media:group(media:category(@label),media:credit,yt:videoid,yt:uploaderId),yt:statistics,yt:rating,gd:rating(@average),gd:comments/gd:feedLink(@countHint))";
String urlBase = String.Format("https://{0}gdata.youtube.com/feeds/api/videos", (testing ? "stage." : "")); 
String url = String.Format("{0}?v=2&fields={1}", urlBase, searchFields);
Debug.Print(url);
YouTubeQuery searchQuery = new YouTubeQuery(url);
searchQuery.Query = keyword;
searchQuery.NumberToRetrieve = Properties.Settings.Default.NumVideosToRetrieve;
searchQuery.OrderBy = "relevance";
lblTagStats.Text = "Retrieving Top " + searchQuery.NumberToRetrieve + " Videos...";
YouTubeFeed searchResults = service.Query(searchQuery);
DebugSaveToXml(searchResults, "searchResults");
foreach (YouTubeEntry entry in searchResults.Entries)
{
    titles.Add(entry.Title.Text);
    if (entry.Statistics != null)
        viewCounts.Add(long.Parse(entry.Statistics.ViewCount));
    if (entry.Comments != null)
        commentCounts.Add(long.Parse(entry.Comments.FeedLink.CountHint.ToString()));
    if (entry.Rating != null)
        ratings.Add(entry.Rating.Average);
    if (entry.YtRating != null)
    {
        likeCounts.Add(long.Parse(entry.YtRating.NumLikes));
        dislikeCounts.Add(long.Parse(entry.YtRating.NumDislikes));
    }
    videoURLs.Add(new Uri(entry.AlternateUri.ToString()));
    uploaders.Add(entry.Authors[0].Name);
    foreach (var category in entry.Media.Categories)
        if (category.Attributes["label"] != null)
            categories.Add(category.Attributes["label"].ToString());
}

lblTagStats.Text = "Retrieving Subscriber Counts...";
AtomFeed batchRequest = new AtomFeed(searchResults);
batchRequest.BatchData = new GDataBatchFeedData();
batchRequest.BatchData.Type = GDataBatchOperationType.query;
foreach (YouTubeEntry entry in searchResults.Entries)
{
    AtomEntry batchEntry = searchResults.CreateFeedEntry();
    String uploaderId = entry.Media.ChildNodes.Find(x => x.Name == "yt:uploaderId").InnerText;
    batchEntry.Id = new AtomId("tag:youtube.com,2008:user:" + uploaderId);  //not returned in search, so reconstruct it
    batchEntry.BatchData = new GDataBatchEntryData();
    urlBase = String.Format("https://{0}gdata.youtube.com/feeds/api/users", (testing ? "stage." : ""));
    url = String.Format("{0}/{1}?v=2", urlBase, entry.Media.Credit.Value);
    Debug.Print(url);
    batchEntry.EditUri = url;
    batchRequest.Entries.Add(batchEntry);
}
DebugSaveToXml(batchRequest, "batchRequest_Profiles");

const String profileFields = ""; // "&fields=id,yt:username,yt:statistics(@subscriberCount)"; // YouTube API bug: cant handle colons in batch request fields
urlBase = String.Format("https://{0}gdata.youtube.com/feeds/api/users/batch", (testing ? "stage." : ""));
url = String.Format("{0}?v=2{1}", urlBase, profileFields);
Debug.Print(url);
YouTubeFeed profilesFeed = (YouTubeFeed)service.Batch(batchRequest, new Uri(url));
DebugSaveToXml(profilesFeed,"profilesFeed");
foreach (ProfileEntry entry in profilesFeed.Entries)
    if (entry.BatchData.Status.Code == 200)
        subscriberCounts.Add(long.Parse(entry.Statistics.SubscriberCount));

lblTagStats.Text = "Retrieving Full Descriptions...";
batchRequest = new AtomFeed(searchResults);
batchRequest.BatchData = new GDataBatchFeedData();
batchRequest.BatchData.Type = GDataBatchOperationType.query;
foreach (YouTubeEntry entry in searchResults.Entries)
{
    AtomEntry batchEntry = searchResults.CreateFeedEntry();
    batchEntry.Id = entry.Id;
    batchEntry.BatchData = new GDataBatchEntryData();
    urlBase = String.Format("https://{0}gdata.youtube.com/feeds/api/videos", (testing ? "stage." : ""));
    url = String.Format("{0}/{1}?v=2", urlBase, entry.VideoId);
    Debug.Print(url);
    batchEntry.EditUri = url;
    batchRequest.Entries.Add(batchEntry);
}
DebugSaveToXml(batchRequest, "batchRequest_Descriptions");

const String descriptionFields = ""; // "&fields=media:group/media:description"; // YouTube API bug: cant handle colons in batch request fields
urlBase = String.Format("https://{0}gdata.youtube.com/feeds/api/videos/batch", (testing ? "stage.":""));
url = String.Format("{0}?v=2{1}", urlBase, descriptionFields);
Debug.Print(url);
YouTubeFeed descriptionsFeed = (YouTubeFeed)service.Batch(batchRequest, new Uri(url));
DebugSaveToXml(descriptionsFeed,"descriptionsFeed");

foreach (YouTubeEntry entry in descriptionsFeed.Entries)
    if (entry.BatchData.Status.Code == 200)
        descriptions.Add(entry.Media.Description.Value); 
```

仅供参考，这为配置文件发布了以下批处理请求 XML，这与其他示例有很大不同，但仍然像魅力一样工作：

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:batch="http://schemas.google.com/gdata/batch">
  <link rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml" />
  <link rel="http://schemas.google.com/g/2005#post" type="application/atom+xml" />
  <link rel="self" type="application/atom+xml" />
  <link rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml" />
  <batch:operation type="query" />
  <entry xmlns:gd="http://schemas.google.com/g/2005">
    <id>tag:youtube.com,2008:user:UC7UgD2HIyslGofSyX811fsQ</id>
    <link href="https://stage.gdata.youtube.com/feeds/api/users/inspiredtennis?v=2" rel="edit" type="application/atom+xml" />
  </entry>
  <entry xmlns:gd="http://schemas.google.com/g/2005">
    <id>tag:youtube.com,2008:user:UClXdxsQW4AqykIq2Fu4YXvQ</id>
    <link href="https://stage.gdata.youtube.com/feeds/api/users/azishertanto?v=2" rel="edit" type="application/atom+xml" />
  </entry>
  <entry xmlns:gd="http://schemas.google.com/g/2005">
    <id>tag:youtube.com,2008:user:UC1Diq4duvGuTUaGxk61-LOQ</id>
    <link href="https://stage.gdata.youtube.com/feeds/api/users/atamaiidotcom?v=2" rel="edit" type="application/atom+xml" />
  </entry>
  ...
</feed> 
```

# ruby-on-rails - 在 sass 中使用 image-url 来避免硬编码图像资产路径

> ID：15968696
> 
> 赞同：0
> 
> 时间：2013-04-12T10:13:40.427
> 
> 标签：ruby-on-rails, sass, asset-pipeline

我刚刚开始使用 Rails 资产管道，我是前端人员。我正在尝试在 sass 文件中使用 image-url 帮助程序，这样我就不必对路径进行硬编码。

以下**SASS**

```
.some-class
  background: image-url("image.png") 
```

生成以下**CSS**

```
.some-class{
  background: url("asset/image.png");
} 
```

如何使用 image-url 帮助程序生成以下 css，而不对图像路径进行硬编码？

```
.some-class{
  background: url("asset/image.png") no-repeat 0 0 #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:02:01.960

您可以使用，

```
.some-class
  background-image: image-url("image.png")
  background-repeat: no-repeat;
  background-color: #fff; 
```

等等。

或者

```
 background: #fff image-url("image.png") no-repeat 0 0; 
```

应该管用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T23:02:19.433

您可能应该使用：

```
background-image: asset-url("image.png", image) no-repeat 0 0 #fff; 
```

assets-url 是一个 sass/rails 功能，它可以让资产管道为你做一些（生产）工作。[您可以在此处](https://github.com/rails/sass-rails#features)阅读有关该功能的信息。

使用 helper 比使用 plain 更可取`url("image.png")`，因为它可以在生产中为您提供指纹 URL。请参阅[此 StackOverflow 答案](https://stackoverflow.com/questions/7947967/rails-3-1-asset-pipeline-why-should-i-use-the-asset-helpers-in-a-scss-file?rq=1)。

# iphone - 将日期时间插入sqlite数据库iphone语法错误接近时间

> ID：15968697
> 
> 赞同：0
> 
> 时间：2013-04-12T10:13:40.537
> 
> 标签：iphone, sqlite, datetime

将日期时间插入sqlite数据库iphone语法错误接近时间我的查询给出

```
UPDATE Orders SET Toal_Price = 33.33,Date_of_Submit=2013-04-12 15:34:16 ,Status=1 WHERE OrderID=2 
```

显示错误：

“15”附近：语法错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:30:58.810

在 SQL 中，此类时间戳是字符串。

您必须像这样格式化它们：

```
UPDATE Orders
SET Toal_Price = 33.33,    -- not Total_Price?
    Date_of_Submit='2013-04-12 15:34:16',
    Status=1
WHERE OrderID=2 
```

# c# - 将字符串值传递给 sql server

> ID：15968699
> 
> 赞同：1
> 
> 时间：2013-04-12T10:13:45.640
> 
> 标签：c#, sql-server

我正在使用 SQL 从 C# 中的 SQL-Server 检索数据，如下所示：

```
var cmd = new SqlCommand(
    "select *, replace(trucknocn, char(10), '') trucknocn1 from deliverylist  where deliverydate=@scantime", sqlCon);             
cmd.Parameters.Add("@scantime", SqlDbType.VarChar, 10).Value
    = Calendar1.SelectedDate.ToString("yyyy-MM-dd");            

da.SelectCommand = cmd; 
```

我的问题是我这样做是否正确以避免我的客户端应用程序机器的区域设置问题。我能做些什么来完全避免区域设置问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:21:09.450

是`deliverydate`一个`varchar`？我不这么认为。
您可以将参数添加为`DateTime`：

```
cmd.Parameters.Add("@scantime", SqlDbType.DateTime).Value = Calendar1.SelectedDate; 
```

然后所有的区域设置问题都没有了，因为没有字符串->日期->字符串转换，并且比较是基于真实的日期值，而不仅仅是字符串表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:59:42.153

如果 deliverydate 是 varchar 类型，那么我在您的代码中没有发现任何问题，

但是如果deliverydate是日期时间然后改变代码如下 -

你的

> cmd.Parameters.Add("@scantime", SqlDbType.VarChar, 10).Value = Calendar1.SelectedDate.ToString("yyyy-MM-dd");

新代码：

> cmd.Parameters.Add("@scantime", SqlDbType.DateTime).Value = Calendar1.SelectedDate;

# sql - 格式化从数据库查询返回的实际值

> ID：15968706
> 
> 赞同：0
> 
> 时间：2013-04-12T10:14:02.773
> 
> 标签：sql, database, postgresql-9.1

我正在使用 postgresql。我的数据库中的表具有类型为 .的列`REAL`。当实际值具有超过七个零时，postgresql 将其存储为例如 1e+007。当通过查询检索时，值返回也为 1e+007。但我需要值为 10000000 。解决方案是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:22:27.860

使用 SQL `CAST`。在 DB2 中为我工作

```
select cast(cast(1e+007 as real) as decimal (15,2)) from sysibm.sysdummy1;
10000000.00 
```

您可以根据所需的值 (15,0) 设置小数位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:21:18.827

```
select to_char(1e+007::real, '9999999999') 
```

手册中的更多详细信息：[http ://www.postgresql.org/docs/current/static/functions-formatting.html](http://www.postgresql.org/docs/current/static/functions-formatting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:03:41.047

如果您将浮点数用于不适合的事物，您将遇到更多问题，包括几乎任何您关心数字的确切表示的事物。

我建议您使用`NUMERIC`，一种以 10 为底（十进制）的数字数据类型，可让您控制精度和比例。请参阅[数字类型](http://www.postgresql.org/docs/current/static/datatype-numeric.html)。`NUMERIC` *执行计算速度*较慢并且消耗更多存储空间，因此它并不总是正确的答案，但它是许多应用程序的理想选择。

您*可以*使用浮点数，这更难，因为您无法安全地比较精确相等，必须使用舍入和格式化函数进行显示等。

例子：

```
regress=> select '1.2'::float8 - '1.0'::float8;
       ?column?       
----------------------
 0.199999999999999956
(1 row)

regress=> select '1.2'::numeric - '1.0'::numeric;
 ?column? 
----------
      0.2
(1 row) 
```

此类问题的另一个常见解决方案是使用应用程序定义的定点表示。如果您需要（例如）2 个小数位，您只需将数字存储`2000.11`在`200011`数据库中，乘以 100。这是金融应用程序中的一种常见技术，尽管现在使用正确的十进制数据类型更为常见。

# php - 将循环结果保存为文本文件中的字符串

> ID：15968712
> 
> 赞同：1
> 
> 时间：2013-04-12T10:14:25.547
> 
> 标签：php, for-loop

这是我的尝试：-

```
<?php
for($i=1;$i<100000;$i++)
{
    echo $i.',';

}
 // save the new xml file
file_put_contents('tab_id.text', $i);
echo ' Creat Text File';
?> 
```

这有效，但它只保存最后一个循环值。我想保存所有循环的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:17:06.773

尝试这个：

```
<?php
$px = '';
for($i=1;$i<100000;$i++)
{
    $px.=$i.',';

}

// save the new xml file
file_put_contents('tab_id.text', $px);
echo ' Creat Text File';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:17:01.530

迭代器`$i`变量在每次循环迭代时递增。它不会聚合其先前的值，因此在这种情况下，自然会在循环结束时`$i`计算分配给它的最后一个值`99999`。

要实现您想要的结果，只需将 的不同值聚合到`$i`一个单独的变量中，因此在循环结束时，该变量将是一个由 的所有值组成的字符串`$i`。

例如：

```
$all_values = '';
for($i=1;$i<100000;$i++) {
   $all_values .= $i.',';
}

file_put_contents('tab_id.text', $all_values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:18:09.510

您做了回声，这不会将值保存在任何地方。

尝试这个：

```
<?php
echo 'Start creating text file';
$result = '';
for($i=1;$i<100000;$i++)
{
    $result .= $i.',';
    echo 'Adding '.$i.', to result';
}
    // save the new xml file
    file_put_contents('tab_id.text', $result);
echo 'End creating text file';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:17:20.093

```
<?php
    for($i=1;$i<100000;$i++)
    {
        $output .= $i.',';
    }
    // save the new xml file
    file_put_contents('tab_id.text', $output);
    echo ' Creat Text File';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T10:17:30.337

用这个

```
$str = "";   
for($i=1;$i<100000;$i++)
{
    $str.= $i.',';

}
// save the new xml file
file_put_contents('tab_id.text', $str);
echo ' Creat Text File'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T10:17:34.617

尝试使用像这样的另一个变量，因为`i`每次都会更改每个循环的值：

```
<?php
$k="";
for($i=1;$i<100000;$i++)
{
    echo $k.=$i.',';

}
    // save the new xml file
    file_put_contents('tab_id.text', $k);
echo ' Creat Text File';
?> 
```

# javascript - 在画布上绘制（渐进式）油漆飞溅

> ID：15968717
> 
> 赞同：8
> 
> 时间：2013-04-12T10:14:32.370
> 
> 标签：javascript, html, canvas, drawing, html5-canvas

我正在寻找一种简单的方法，它可以让我在画布上画出这样的**油漆飞溅**： ![油漆飞溅](https://i.stack.imgur.com/HXaHh.jpg)

一种方法是**发射很多小粒子**，这些粒子会画一个小圆圈，但我不想管理很多粒子对象。

**编辑**：`example here:` [jsfiddle.net/MK73j/4/](http://jsfiddle.net/MK73j/4/)

第二种方法是使用少量图像并**操纵 scale 和 rotation**，但我希望对效果有一个很好的随机性。

第三种方法是制作一些随机的小点，用**贝塞尔曲线**连接它们并填充内容，但我只有一个标记。

好吧，我不知道是否有更好的方法来产生看起来像这张图片的效果，或者我是否必须从我想到的 3 个中进行选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:25:03.527

您可以使用错觉来创建漂亮的 splat 效果。

由于对象在接近时会“增长”，因此您可以通过动画增加尺寸和一点点运动来创建您的 splat 效果。

您可以使用 context.drawImage 来处理调整大小：

```
context.drawImage(splashImg, 0 ,0, splashImg.width, splashImg.height, 
                  newX, newY, newWidth, newHeight); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/r8Grf/](http://jsfiddle.net/m1erickson/r8Grf/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        $("go").html("Loading...");

        var count=80;
        var win=new Image();
        var splash;
        win.onload=function(){
            splash=new Image();
            splash.onload=function(){
              ctx.drawImage(win,0,0);
            }
            splash.src="http://dl.dropbox.com/u/139992952/splash2.svg";
        }
        win.src="http://dl.dropbox.com/u/139992952/window.png";

        $("#go").click(function(){ count=80; animate(); });

        function animate() {
          // drawings
          if(--count>1){
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.save();
              ctx.drawImage(win,0,0);
              ctx.globalCompositeOperation = 'destination-over';
              ctx.drawImage(splash,0,0,splash.width,splash.height,25,25,splash.width/count,splash.height/count);
              ctx.restore();
          }

          // request new frame
          requestAnimFrame(function() {
              animate();
          });
        }

    }); // end $(function(){});
</script>

</head>

<body>
    <br/><button id="go">Splash!</button><br/><br/>
    <canvas id="canvas" width=326 height=237></canvas>
</body>
</html> 
```

# javascript - 无法在 javascript 中调用绘图函数

> ID：15968729
> 
> 赞同：1
> 
> 时间：2013-04-12T10:15:18.867
> 
> 标签：javascript, html, canvas

我有一个创建布局的项目，我决定用画布元素来做。我创建了一个需要 4 个参数的函数。

```
 function fillArc(camvas,x,y,w,h)
{
canv.beginPath();
    var canv = document.getElementById("camvas");
    var context = canv.getContext('2d');
    context.strokeStyle="#FFFFFF";
    context.moveTo(x+5,y);
    context.lineTo(w-5,y);
    context.quadraticCurveTo(w,y,w,y+5);
    context.lineTo(w,h-5);
    context.quadraticCurveTo(w,h,w-5,h);
    context.lineTo(x+5,h);  
    context.quadraticCurveTo(x,h,x,h-5);
    context.lineTo(x,y+5);
    context.quadraticCurveTo(x,y,x+5,y);
    context.stroke();
canv.closePath();

} 
```

我有几个画布元素，所以我想在不同的区域创建这个边框半径框。我假设这样的调用：

```
<canvas width="500" height="500" id="canvaslayouts">
</canvas>

<script>
fillArc(canvaslayouts,10,10,50,50);
</script> 
```

但这似乎不起作用。任何人都可以指出我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:16:29.607

把它放在一个`<script>`块中应该可以解决问题：

```
<canvas width="500" height="500" id="canvaslayouts"></canvas>
<script>
fillArc(canvaslayouts,10,10,50,50);
</script> 
```

另外，请注意您的`fillArc()`函数定义（或您可能拥有的任何其他可执行 JavaScript）也应该在一个`<script>`块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:17:59.647

您需要更改`.beginPath()`and`.closePath()`调用，以便将它们应用于*context*，而不是*canvas*。

当然，这只能在您调用后才能完成`canv.getContext()`。

您还需要：

1.  使用正确的 ID - 你`"camvas"`在它应该是具有该名称的*变量时使用过*
2.  把你的 JS 放在`<script>`标签里面

IE：

```
<script>
function fillArc(camvas,x,y,w,h)
{
    var canv = document.getElementById(camvas); 
    var context = canv.getContext('2d');
    context.beginPath();
    context.strokeStyle="#FFFFFF";
    context.moveTo(x+5,y);
    context.lineTo(w-5,y);
    context.quadraticCurveTo(w,y,w,y+5);
    context.lineTo(w,h-5);
    context.quadraticCurveTo(w,h,w-5,h);
    context.lineTo(x+5,h);  
    context.quadraticCurveTo(x,h,x,h-5);
    context.lineTo(x,y+5);
    context.quadraticCurveTo(x,y,x+5,y);
    context.closePath();  // NB: close the path before you stroke it
    context.stroke();
}
</script>

<canvas width="500" height="500" id="canvaslayouts"> </canvas>
<script>
    fillArc("canvaslayouts", 10, 10, 50, 50);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:18:08.837

嗯，有几件事：

1.  你永远不会使用`camvas`变量。
2.  你总是指`#camvas`.
3.  你`canv.beginPath()`在设置`canv`任何东西之前打电话。
4.  您在画布中的 javascript 代码不在脚本标签中
5.  您在 canvas 标记中的 javascript 代码以`canvaslayouts`第一个参数调用该函数。这意味着您正在搜索名为“canvaslayouts”的变量而不是 ID。将其更改`"canvaslayouts"`为指定它是要在`getElementById`.

正确的代码应该是这样的：

```
function fillArc(camvas,x,y,w,h)
{
    //Changed to use the variable instead, and moved it to the start
    var canv = document.getElementById(camvas); 
    canv.beginPath();
        var context = canv.getContext('2d');
        context.strokeStyle="#FFFFFF";
        context.moveTo(x+5,y);
        context.lineTo(w-5,y);
        context.quadraticCurveTo(w,y,w,y+5);
        context.lineTo(w,h-5);
        context.quadraticCurveTo(w,h,w-5,h);
        context.lineTo(x+5,h);  
        context.quadraticCurveTo(x,h,x,h-5);
        context.lineTo(x,y+5);
        context.quadraticCurveTo(x,y,x+5,y);
        context.stroke();
    canv.closePath();
} 
```

和

```
<canvas width="500" height="500" id="canvaslayouts">
    <script type="text/javascript">
        //Use a script container
        fillArc("canvaslayouts",10,10,50,50); //Use a string, not a variable
    </script>
</canvas> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:23:09.243

***[`jsFiddle Demo`](http://jsfiddle.net/hmpJv/)***

*   将你的函数和对它的调用放在一个`script`元素 中*   传入一个字符串，该字符串与`id`您希望在其上绘制的画布 相匹配*   使用上下文而不是画布来访问绘图 API

    ```
    <script>
    function fillArc(camvas,x,y,w,h)
    {
    var canv = document.getElementById(camvas);
    var context = canv.getContext('2d');
    context.beginPath();
    context.strokeStyle="#ffffff";
    context.moveTo(x+5,y);
    context.lineTo(w-5,y);
    context.quadraticCurveTo(w,y,w,y+5);
    context.lineTo(w,h-5);
    context.quadraticCurveTo(w,h,w-5,h);
    context.lineTo(x+5,h);  
    context.quadraticCurveTo(x,h,x,h-5);
    context.lineTo(x,y+5);
    context.quadraticCurveTo(x,y,x+5,y);
    context.stroke();
    context.closePath();
    }
    fillArc("canvaslayouts",10,10,50,50);
    </script> 
    ```

# c - 在c中具有整数的表的联合合并

> ID：15968732
> 
> 赞同：-3
> 
> 时间：2013-04-12T10:15:28.107
> 
> 标签：c

我有一个二维整数表（全为正数），并希望制作一个所有整数只有一次的一维表，（无重复数字）已排序。二维中的每一行都已排序。

例子：

二维表

```
15 20 40 69 74 83

12 40 58 74 82 94 111

19 30 69

12 19

44 64 74 83 
```

答案：一维表：

```
12, 15, 19, 20, 30, 40, 44, 58, 64, 69, 74, 82, 83, 94, 111 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:33:36.400

```
#include <stdio.h>

int main() {
    int subtable1[] = {15, 20, 40, 69, 74, 83, 0};
    int subtable2[] = {12, 40, 58, 74, 82, 94, 111, 0};
    int subtable3[] = {19, 30, 69, 0};
    int subtable4[] = {12, 19, 0};
    int subtable5[] = {44, 64, 74, 83, 0};
    int *table[] = { subtable1, subtable2, subtable3, subtable4, subtable5};
    int result[128] = {0};
    int temp[128] = {0};
    int i,j, count=0;

    for(i=0;i<sizeof(table)/sizeof(int*);++i)
        for(j=0;table[i][j];++j)
            ++temp[table[i][j]];

    for(i=1;i<128;++i)
        if(temp[i])
            result[count++]=i;
    //check print
    for(i=0;i<count;++i)
        printf("%d ", result[i]);
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:56:05.030

另一种方式

```
#include <stdio.h>
#include <stdlib.h>

int* merge(int* array1, int* array2){
    int *result = NULL;
    int size=0;

    result = (int*)malloc(sizeof(int)*48);//need capacity check!
    while(*array1 || *array2){
        if(*array1 && *array2){
            if(*array1 < *array2){
                result[size++]=*array1++;
                continue;
            }
            if(*array1 > *array2){
                result[size++]=*array2++;
                continue;
            }
            if(*array1 == *array2){
                result[size++]=*array1++;
                array2++;
                continue;
            }
        }
        if(*array1){
            while(*array1)
                result[size++]=*array1++;
        }
        if(*array2){
            while(*array2)
                result[size++]=*array2++;
        }
    }
    result[size++]=0;
    result = realloc(result, sizeof(int)*size);
    return result;
}

int main() {
    int subtable1[] = {15, 20, 40, 69, 74, 83, 0};
    int subtable2[] = {12, 40, 58, 74, 82, 94, 111, 0};
    int subtable3[] = {19, 30, 69, 0};
    int subtable4[] = {12, 19, 0};
    int subtable5[] = {44, 64, 74, 83, 0};
//  int *table[] = { subtable1, subtable2, subtable3, subtable4, subtable5 };
    int *m12, *m34, *m1234, *result;
    int counter=0;

    m12=merge(subtable1, subtable2);
    m34=merge(subtable3, subtable4);
    m1234=merge(m12, m34);
    result=merge(m1234, subtable5);
    //check print
    for(counter=0;result[counter];++counter)
        printf("%d ", result[counter]);
    printf("\n");
    //need free
    return 0;
} 
```

# mongodb - Mongodb MapReduce - Mongoexport 缺少列值

> ID：15968736
> 
> 赞同：0
> 
> 时间：2013-04-12T10:15:41.907
> 
> 标签：mongodb, mapreduce

对 Mongodb 和 MapReduce 来说非常新，但我喜欢我可以用它做的事情，并且大部分时间都可以。但是，我无法将 MapReduce 的结果导出到 CSV。

这就是我正在做的事情：

```
var mapFunction1 = function() {
                       emit({isrc: this.isrc, country: this.country}, this.amount_payable);
                   };

var reduceFunction1 = function(keyIsrc, valuesAmountPayable) {
                        return Array.sum(valuesAmountPayable);
                    };

db.sales.mapReduce(
        mapFunction1,
        reduceFunction1,
            { out: "sales_with_total_by_country_and_isrc" }
                )

db.sales_with_total_by_country_and_isrc.find() 
```

当我运行上面的查找时，我可以看到我想要的结果，ISRC、国家和价值观都存在。

我正在按如下方式运行我的导出，正如我所说，这运行正常，所有列都存在，但我只有 value 列中的值，而不是 ISRC 或 Country。

```
mongoexport --csv -d test -c sales_with_total_by_country_and_isrc -q '{value: {$ne: 0}}' -f "isrc","country","value" -o sales_with_total_by_country_and_isrc.csv 
```

我究竟做错了什么？据我所知，我正在以正确的方式使用 -f 传递我想要导出的字段。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:50:52.543

好的，我自己解决了这个问题。

因为，生成的集合看起来像：

```
{ "_id" : { "isrc" : "", "country" : "AE" }, "value" : 0.391081 } 
```

我只需要拨打`-f "_id.isrc","_id.country","value"`我的 mongoexport 电话。

希望这可以帮助其他一些人。

# objective-c - ios，KVC，为什么不调用countOf 当我调用 [[MyObject valueForKey:"MyArray" ] count]

> ID：15968741
> 
> 赞同：3
> 
> 时间：2013-04-12T10:15:50.890
> 
> 标签：objective-c, nsarray, key-value-coding, kvc

.....................

```
    环境：OSX10.8、Xcode4.5
    参考：
    https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual
    /KeyValueCoding/Articles/SearchImplementation.html#//apple_ref/doc/uid
    /20000955-CJBBBFFA

    如果 countOf 方法和其他两种可能方法中的至少一种是
    找到，一个响应所有 NSArray 方法的集合代理对象是
    回来。每个发送到集合代理对象的 NSArray 消息都会产生
    在 countOf、objectInAtIndex: 和 AtIndexes 的某种组合中：消息被
    发送到 valueForKey: 的原始接收者。

```

**我的步骤：**

1)在 MyObject.h 中创建一个`property`for 。`NSArray* arrs`

2) 在 MyObject.m

```
@implementation MyObject
- (void)setArrs:(NSArray*)arrs
{ _arrs=arrs; }

- (NSUInteger) countOfArrs
{ NSLog("Im here");
  return 0;}

- (id) objectInArrsAtIndex:(NSUInteger)index
{ NSLog(@"objectInArrs");
  return nil;
}

@end 
```

3) 测试代码

```
MyObject* obj=[[MyObject alloc] init];
NSArray* arr=[NSarray arrayWithObjects:@"abc",nil];
[obj setArrs:arr];
NSLog(@"%d",[[obj valueForKey:@"arrs"]count]);
NSLog(@"%@",[[obj valueForKey:@"arrs"] objectobjectAtIndex:0]) 
```

**我的问题：**

我希望它会自动调用`countOfArrs`，`objectInArrsAtIndex:`但是它没有。它所做的只是返回正常的 NSArray，以 1 和“abc”显示计数。

我没有找到任何有用的样本，或者我误解了医生所说的内容，不是吗？

我的语言不是英语，希望我没有提出任何雄心勃勃的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T21:27:29.883

您已经实现了比所需更多的功能。您的`@property`声明是添加`-<key>`getter 和`-set<Key>`accessor。正如您所发现的，您的 getter（由 调用`valueForKey:@"arrs"`）正在返回分配给返回其计数和对象的属性的实际 NSArray。

您链接到的指南有原因在valueForKey:部分的*默认搜索模式的**第 1 步*和*第 2步中不起作用。*

 *基本上，只有在没有 a或方法时才会调用您的`-countOf<Key>`and方法。`-objectIn<Key>AtIndex:``-<key>``-get<Key>``-is<Key>`

为了让它工作，你需要通过删除`@property`声明来删除getter，然后你需要添加一个实例变量来保存你的数组。

将此作为您的界面，它应该可以工作

```
@interface MyObject : NSObject {
  NSArray *_arrs;
}
@end 
```*

# ruby-on-rails - Rails：选择错综复杂的关系

> ID：15968742
> 
> 赞同：0
> 
> 时间：2013-04-12T10:15:55.110
> 
> 标签：ruby-on-rails, select, relationship, named-scope

我对 Rails 比较陌生，所以请您耐心等待。

我在三个（ActiveRecord）模型之间有一些复杂的关系：

```
class Producer
  has_many :clients
end  

class Client
  belongs_to :producer
  has_many   :products
end

class Product
  belongs_to :client
  belongs_to :producer
end 
```

特定产品的生产者不一定与产品客户的生产者相同（但他可以）。

我需要以某种方式选择/范围生产者的所有产品，而他不是该产品客户的生产者。我无法解决这个问题。我试图按照 producer != producer.products.clients.producer 的方式思考，这当然行不通或有意义。

请帮忙？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:44:35.000

```
Product.includes(:producer, :client).
   where("products.producer_id" => X).
   where( "clients.producer.id != products.producer_id") 
```

将根据您的需要从具有 id X 的生产者那里找到产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:31:24.313

```
@products = Product.select("products.*").joins(:clients).joins(:producers).where("products.producer_id = ? AND clients.producer_id != ?", producer_id, producer_id) 
```

应该给你所需的结果。

希望能帮助到你 ！

# macos - mac上的奇怪字符

> ID：15968745
> 
> 赞同：0
> 
> 时间：2013-04-12T10:16:02.800
> 
> 标签：macos, osx-mountain-lion

几周以来，每当某个应用程序需要我们的密码时，我们就需要我们的许可，它不再将其显示为可理解的语言，而是使用奇怪的字符。我们如何解决这个问题？

![在此处输入图像描述](https://i.stack.imgur.com/exL0x.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:21:29.830

对于某些输入/选项，您的语言可能存在问题。

查看此文档以了解如何更改特定选项的语言：

[http://support.apple.com/kb/PH11251](http://support.apple.com/kb/PH11251)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T19:32:52.590

根据您运行的 OSX 版本，您可能想尝试*Font Book*（在 Applications 文件夹中）并专门搜索**Look for Enabled Duplicates**。有时，重复或错误命名的字体会导致这样的渲染问题。

还有其他实用程序，例如可以进行类似（和更广泛）搜索的**字体医生。**

# entity-framework - 实体框架存储过程问题

> ID：15968749
> 
> 赞同：1
> 
> 时间：2013-04-12T10:16:13.340
> 
> 标签：entity-framework, stored-procedures, edmx

我定义了以下存储过程：

```
USE [BcmMetrice]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[ActivityAdd_proc] @Name nvarchar(max),@Description nvarchar(max)  =null ,@Users nvarchar(max),@Object_id nvarchar (15) =null, @Source nvarchar(10)  =null, @TemplateId bigint  =null, @UserID bigint =null
AS

DECLARE activityUsers_cursor CURSOR FOR
select s from dbo.SplitString(@Users, ';')

DECLARE
@new_ActivityId bigint,
@new_CommentId bigint,
@activityUser_l bigint

BEGIN TRY

INSERT INTO [BcmMetrice].[dbo].[Activity]
           ([Name]
           ,[Description]
           ,[Type]
           ,[Created])
     VALUES
           (@Name
           ,@Description
           ,ISNULL(@TemplateId,0)
           ,GETDATE())

SET @new_ActivityId = (SELECT SCOPE_IDENTITY())

INSERT INTO [BcmMetrice].[dbo].[Comment] ([UserID],[CommentText],[Timestamp])
VALUES (ISNULL(@UserID,151),'Activity has been created',GETDATE())

SET @new_CommentId = (SELECT SCOPE_IDENTITY())

INSERT INTO [BcmMetrice].[dbo].[ActivityComment] ([ActivityID],[CommentID])
VALUES (@new_ActivityId, @new_CommentId)

INSERT INTO [BcmMetrice].[dbo].[Log]([Timestamp],[Type],[Data],[StackTrace]) VALUES (GETDATE(),'SQL.ActivityAdd_proc','users='+ISNULL(CAST(@Users as varchar(max)),'empty'),null)

OPEN activityUsers_cursor
FETCH NEXT FROM activityUsers_cursor INTO @activityUser_l
WHILE @@FETCH_STATUS = 0
    BEGIN

        INSERT INTO [BcmMetrice].[dbo].[Log]([Timestamp],[Type],[Data],[StackTrace]) VALUES (GETDATE(),'SQL.ActivityAdd_proc','Inserting users='+ISNULL(CAST(@activityUser_l as varchar(max)),'empty'),null)

        INSERT INTO [BcmMetrice].[dbo].[ActivityUser]
               ([ActivityId]
               ,[UserId]
               ,[Role])
         VALUES
               (@new_ActivityId
               ,@activityUser_l
               ,1)

        FETCH NEXT FROM activityUsers_cursor INTO @activityUser_l
    END

CLOSE activityUsers_cursor
DEALLOCATE activityUsers_cursor

END TRY

BEGIN CATCH

PRINT 'ERROR'
INSERT INTO [BcmMetrice].[dbo].[Log]([Timestamp],[Type],[Data],[StackTrace]) VALUES (GETDATE(),'SQL.ActivityAdd_proc','ERROR CATCHED!'+ERROR_MESSAGE(),null)

END CATCH

select @new_ActivityId 
```

我想做的事情是从过程中返回一个新添加的活动的 id。这就是为什么在非常和我使用线：

```
select @new_ActivityId 
```

在 SQL Management Studio 中测试此过程时，一切似乎都运行良好。当我尝试在我的 .NET 项目中使用此过程时，问题就开始了。我更新了我的 edmx 模型表单数据库，但是当我执行此过程时，返回值无效。

过程执行如下所示：

```
int ret = dc.Db.ActivityAdd_proc(name, description, users, object_id, source, templateId, userId); 
```

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:59:18.350

我找到了解决我的问题的方法。当您尝试通过 select 语句从存储过程中返回数据时，您必须在 edmx 的模型浏览器中创建函数导入。在向导中，您选择一种返回集合的类型（在我的例子中，它是 int64 类型的标量）。

# c++ - Wrong forwarding of rvalue reference

> ID：15968752
> 
> 赞同：6
> 
> 时间：2013-04-12T10:16:22.433
> 
> 标签：c++, c++11, rvalue

I was experimenting with the newly added rvalue refernces ( in vs2012 express ).

I don't understand something tho. Given the code below ( most of it taken from the c++ standard where std::forward is explained ).

```
struct A
{
    A(int& i, const float& j):
        m_i(i),
        m_j(j){}

    int& m_i;
    const float& m_j;
};

template<class T, class A1, class A2>
T* factory(A1&& a1, A2&& a2)
{
    return new T(a1, a2);
}

void test()
{

    A* a1 = factory<A>(1, 1.2f);

    //How does this work ?        
    a1->m_i = 2;
} 
```

I don't understand where is m_i binded to.

I will basically have a lvalue reference to an rvalue reference (& &&), that by the ref collapsing rules becomes (&) just a plain lvalue ref. But a reference to what?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T10:23:20.580

> 我不明白 m_i 绑定到哪里。

`m_i`绑定到`A`的构造函数的参数。这里的构造函数的参数是什么`A`？

在这种情况下，由于`factory`不*将*其参数转发给`A`（即不使用`std::forward<>()`），因此传递给`A`的是*左值*。这是因为`a1`是*命名*的，而**命名对象是左**值。

的*类型*与`a1`确定`a1`是左值还是右值无关。因此，即使具有对( ) 的`a1`类型*右值引用* ，就像您的程序中的情况一样，参数本身也是一个命名对象，因此它是一个左值。`int``int&&``a1`

这意味着，由于`m_i`具有对 的左值引用类型`int`，因此`m_i` **可以**将其绑定（并且确实已绑定）到`factory`的 (lvalue) 参数，该参数将在返回`a1`时被销毁。`factory()`换句话说，你留下了一个悬空的参考。

尝试取消引用它（就像您稍后在程序中所做的那样）会调用**Undefined Behavior**。

但是，如果您的`factory()`函数已将其参数*转发*`A`给的构造函数：

```
template<class T, class A1, class A2>
T* factory(A1&& a1, A2&& a2)
{
    return new T(std::forward<A1>(a1), std::forward<A2>(a2));
} 
```

这会导致编译器错误，因为 的机制`std::forward<>()`会确保左值保持左值，而右值保持右值。尝试将左值引用绑定到右值是非法的，因此对`A`的构造函数的调用将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:22:36.767

> 但是参考什么？

这是未定义的行为。正如您猜对的那样，它是对在函数堆栈中被破坏的临时对象的引用`factory`。要在编译时捕获此类问题，您需要使用`std::forward`

```
template<class T, class A1, class A2>
T* factory(A1&& a1, A2&& a2)
{
    return new T(std::forward<A1>(a1), std::forward<A2>(a2));
} 
```

# java - 内部异常：com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障

> ID：15968755
> 
> 赞同：3
> 
> 时间：2013-04-12T10:16:28.047
> 
> 标签：java, mysql, hibernate

我开发了一个应用程序来捕获数据、检索信息、删除和更新信息。该应用程序使用 java swing 和 hibernate 开发，并使用 MySQL 5.5 版作为数据库。我在本地服务器或本地主机上对其进行了测试，并且工作正常。所以现在我更进一步尝试访问远程服务器上的数据库。请注意，我在本地服务器上使用的 MySQL 版本也与远程服务器中的 MySQL 相同。

我收到以下错误：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
Error Code: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:24:28.773

问题是您的 MySqlConnector/Driver 无法建立与远程服务器的连接。

检查您的 jdbc URL 并检查是否使用了错误的端口。也许从外部无法访问 Mysql DB，而不是您可以使用 ssh 的端口转发，例如：

转发端口：

```
ssh -L3306:127.0.0.1:3306 user@remoteServer 
```

比将您的 jdbc url 更改为：

```
jdbc:mysql://localhost:3306/database 
```

解释：-L port:host:hostport

> 指定将本地（客户端）主机上的给定端口转发到远程端的给定主机和端口。
> ...
> 每当与此端口建立连接时，都会通过安全通道转发连接，并从远程计算机建立与主机端口 hostport 的连接。

来源：[http ://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1)

这意味着您使用本地 3306 端口上的 MySQL JDBC 驱动程序（jdbc url）请求将被转发到其本地 3306 端口上的远程服务器，Mysql 数据库在该端口上列出。

# sql - how to make two columns are unique in SQL Server?

> ID：15968759
> 
> 赞同：2
> 
> 时间：2013-04-12T10:16:35.503
> 
> 标签：sql, sql-server

Good Day Friends,

I want to know that how to make two columns are unique in SQL server in the special manner as I explained below.

The Way I want :

```
------------------------- 
  User    | Friend      |  
-------------------------
  Stevan  | Johns     } 
  William | David     }This is how I want two columns to be unique. 
```

The Way I don't Want :

```
-------------------------
  User    | Friend    | 
-------------------------
 Steven   | Johns     }   
 Johns    | Steven    }This must not allow. 
```

Steven is a friend of Johns So They are friends so I don't want Johns to add a new row saying Johns is a friend of Steven.

Steven add new row like this :

```
-------------------------
  User    | Friend    | 
-------------------------
 Steven   | Johns     } 
```

I Don't want john to add a row again Like this

```
-------------------------
  User    | Friend    | 
-------------------------
 Steven   | Johns     }   
 Johns    | Steven    } 
```

I hop my question is clear, IF someone know a good answer for this , please help me. Thanks in advance for any answer

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:23:03.987

执行此操作的直接方法（所有其他条件相同）是坚持第一列中的值始终排在第二列中的值之前：

```
CREATE TABLE Friends (
    Party1 varchar(20) not null,
    Party2 varchar(20) not null,
    constraint CK_Friend_Parties CHECK (Party1 < Party2),
    constraint CK_Friends_Unique UNIQUE (Party1,Party2)
) 
```

如果您无法适应这种变化（这很奇怪，因为它表明关系不是对称的），您可以通过索引视图强制执行它：

```
create table dbo.T1 (
    Party1 varchar(20) not null,
    Party2 varchar(20) not null
)
go
create view dbo.V1
with schemabinding
as
    select
        CASE WHEN Party1 < Party2 THEN Party1 else Party2 END as NormParty1,
        CASE WHEN Party1 < Party2 THEN Party2 else Party1 END as NormParty2
    from
        dbo.T1
go
create unique clustered index IX_V1 on dbo.V1 (NormParty1,NormParty2)
go
insert into dbo.T1 (Party1,Party2) values ('Steven','John')
go
insert into dbo.T1 (Party1,Party2) values ('John','Steven') 
```

上面的最后插入会产生错误。请注意，对于大多数意图，您会忽略视图`V1`- 它只是为了强制执行此约束而存在（当我使用此类表时，我通常会在它们的名称前加上前缀，`DRI_`以清楚地表明它并不是真正为查询而创建的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T10:20:39.720

我认为，因为主键不起作用，您将不得不使用触发器来检查该行是否已经存在。

# python - shapefile 和 matplotlib：绘制 shapefile 坐标的多边形集合

> ID：15968762
> 
> 赞同：8
> 
> 时间：2013-04-12T10:16:48.783
> 
> 标签：python, matplotlib, polygon, geospatial, shapefile

我正在尝试使用 python 中的 matplotlib 在世界地图上绘制国家的填充多边形。

我有一个带有每个国家/地区边界坐标的 shapefile。现在，我想使用 matplotlib 将这些坐标（针对每个国家/地区）转换为多边形。不使用底图。不幸的是，这些部分是交叉或重叠的。是否有解决方法，可能使用点到点的距离..或重新排序？ ![在此处输入图像描述](https://i.stack.imgur.com/EfMFP.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T13:06:07.513

哈！我发现，如何.. 我完全忽略了 sf.shapes[i].parts 信息！然后归结为：

```
#   -- import --
import shapefile
import matplotlib.pyplot as plt
import matplotlib.patches as patches
from matplotlib.patches import Polygon
from matplotlib.collections import PatchCollection
#   -- input --
sf = shapefile.Reader("./shapefiles/world_countries_boundary_file_world_2002")
recs    = sf.records()
shapes  = sf.shapes()
Nshp    = len(shapes)
cns     = []
for nshp in xrange(Nshp):
    cns.append(recs[nshp][1])
cns = array(cns)
cm    = get_cmap('Dark2')
cccol = cm(1.*arange(Nshp)/Nshp)
#   -- plot --
fig     = plt.figure()
ax      = fig.add_subplot(111)
for nshp in xrange(Nshp):
    ptchs   = []
    pts     = array(shapes[nshp].points)
    prt     = shapes[nshp].parts
    par     = list(prt) + [pts.shape[0]]
    for pij in xrange(len(prt)):
     ptchs.append(Polygon(pts[par[pij]:par[pij+1]]))
    ax.add_collection(PatchCollection(ptchs,facecolor=cccol[nshp,:],edgecolor='k', linewidths=.1))
ax.set_xlim(-180,+180)
ax.set_ylim(-90,90)
fig.savefig('test.png') 
```

然后它看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/PvlLf.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T18:06:46.500

这是我用来绘制多边形 shapefile 的另一段代码。它使用 GDAL/OGR 读取 shapefile 并正确绘制甜甜圈形状多边形：

```
from osgeo import ogr
import numpy as np
import matplotlib.path as mpath
import matplotlib.patches as mpatches
import matplotlib.pyplot as plt

# Extract first layer of features from shapefile using OGR
ds = ogr.Open('world_countries_boundary_file_world_2002.shp')
nlay = ds.GetLayerCount()
lyr = ds.GetLayer(0)

# Get extent and calculate buffer size
ext = lyr.GetExtent()
xoff = (ext[1]-ext[0])/50
yoff = (ext[3]-ext[2])/50

# Prepare figure
fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlim(ext[0]-xoff,ext[1]+xoff)
ax.set_ylim(ext[2]-yoff,ext[3]+yoff)

paths = []
lyr.ResetReading()

# Read all features in layer and store as paths
for feat in lyr:
    geom = feat.geometry()
    codes = []
    all_x = []
    all_y = []
    for i in range(geom.GetGeometryCount()):
        # Read ring geometry and create path
        r = geom.GetGeometryRef(i)
        x = [r.GetX(j) for j in range(r.GetPointCount())]
        y = [r.GetY(j) for j in range(r.GetPointCount())]
        # skip boundary between individual rings
        codes += [mpath.Path.MOVETO] + \
                     (len(x)-1)*[mpath.Path.LINETO]
        all_x += x
        all_y += y
    path = mpath.Path(np.column_stack((all_x,all_y)), codes)
    paths.append(path)

# Add paths as patches to axes
for path in paths:
    patch = mpatches.PathPatch(path, \
            facecolor='blue', edgecolor='black')
    ax.add_patch(patch)

ax.set_aspect(1.0)
plt.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:42:11.987

```
from fiona import collection
import matplotlib.pyplot as plt
from descartes import PolygonPatch
from matplotlib.collections import PatchCollection
from itertools import imap
from matplotlib.cm import get_cmap

cm = get_cmap('Dark2')

figure, axes = plt.subplots(1)

source_path = "./shapefiles/world_countries_boundary_file_world_2002"

with collection(source_path, 'r') as source:
    patches = imap(PolygonPatch, (record['geometry'] for record in source)

axes.add_collection( PatchCollection ( patches, cmap=cm, linewidths=0.1 ) )

axes.set_xlim(-180,+180)
axes.set_ylim(-90,90)

plt.show() 
```

请注意，这假设多边形，MultiPolygons 可以以类似的方式处理

```
map(PolygonPatch, MultiPolygon(record['geometry'])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-01T13:18:13.190

关于[@hannesk](https://stackoverflow.com/a/15972203/2351966)的回答，您应该添加以下导入：`from numpy import array`并将`import matplotlib`该行替换`cm = get_cmap('Dark2')`为`cm = matplotlib.cm.get_cmap('Dark2')`

*（我在注意到的帖子中添加评论并不是很有名。）*

# php - TCPDF 无法读取 xlsx 格式的数据？

> ID：15968763
> 
> 赞同：2
> 
> 时间：2013-04-12T10:16:49.863
> 
> 标签：php, tcpdf

如果我曾经从 xls 文件中读取数据，它的工作原理，但是当我使用 PDF 库的 .xlsx 文件时，无法从 excel 文件中读取内容。

任何人都可以告诉我解决方案。

错误：

```
The filename includes/user-uploads/apx4-899450-1365758229.xlsx is not readable 
```

如果我曾经读取 xls 文件，它的工作正常。所以正确的URL。

# android - 滚动视图中的 ListView 魔术

> ID：15968766
> 
> 赞同：3
> 
> 时间：2013-04-12T10:16:54.463
> 
> 标签：android, android-listview, touch, android-actionbar, android-scrollview

对于我的应用程序，我想启用一个看起来像这样的东西：

```
<ScrollView>
    <LinearLayout orientation="vertical">
        <FrameLayout layout_height="48dp">
            Anything I want here...
        </FrameLayout>
        <ListView>
            It's size will be set to screen height anyway
        </ListView>
    </LinearLayout>
</ScrollView> 
```

我想这样做，当用户触摸屏幕进行滚动时，起初只有滚动视图滚动，然后，当它到达它的一个边缘时，滚动事件转到列表视图并开始滚动。

我怎样才能做到这一点？

PS 这样做的原因是制作某种隐藏操作栏，当用户向下滚动时，它会从屏幕上滚动出来，然后当他向上滚动时，它应该从底部出现，而不是动画，而是随着列表的移动。因此，如果我将列表滚动到操作栏高度的一半 - 我会在屏幕上看到操作栏的下半部分。你可以在 iOS Google+ 应用程序中看到我的意思。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T05:02:02.767

在布局设置参数

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

      <ListView
                    android:id="@+id/listview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">
      </ListView>
</ScrollView> 
```

并在编码部分根据设备高度设置listview的动态高度

```
 LayoutParams lp = (LayoutParams) list1.getLayoutParams();
    int height = (arraylist.size()) * 80; 

        //arraylist list is in which all data is kept

    lp.height = height;
    listview.setLayoutParams(lp);

    listview.setAdapter(Adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T18:35:20.010

```
 setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                mFirstVisibleItem = firstVisibleItem;
                mLastVisibleItem = firstVisibleItem + visibleItemCount;
                mTotalOfItems = totalItemCount;
            }
}); 
```

我这样做是为了知道我在哪里滚动，使用 OnScrollListener 和 OnTouchListener 知道我将滚动到哪里，它对我来说很好......

```
setOnTouchListener(new OnTouchListener() {

        float oldY = -1;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                oldY = event.getY();
                v.getParent().requestDisallowInterceptTouchEvent(true);
                break;

            case MotionEvent.ACTION_UP:
                v.getParent().requestDisallowInterceptTouchEvent(false);
                break;
            }

            if (oldY > -1 && 
                    (mFirstVisibleItem == 0 && oldY < event.getY()) || 
                    (mLastVisibleItem >= mTotalOfItems && oldY > event.getY())) {
                v.getParent().requestDisallowInterceptTouchEvent(false);
            }

            v.onTouchEvent(event);

            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T06:56:24.873

```
*     ListView lv = (ListView)findViewById(R.id.myListView);  
      lv.setOnTouchListener(new ListView.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            int action = event.getAction();
            switch (action) {
            case MotionEvent.ACTION_DOWN:
                // Disallow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(true);
                break;

            case MotionEvent.ACTION_UP:
                // Allow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(false);
                break;
            }

            // Handle ListView touch events.
            v.onTouchEvent(event);
            return true;
        }
    });k;
            }
            // Handle ListView touch events.
            v.onTouchEvent(event);
            return true;
        }
    });* 
```

# expression-blend - 无法在 Expression Blend for Visual Studio 2012 中导出项目

> ID：15968768
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:16:57.710
> 
> 标签：expression-blend

我在 2012 年的 Blend + Sketchflow 预览中创建了一个 WPF 原型，我想将屏幕截图导出到 word，但是这个菜单选项不可用。我也试过用 Blend for Visual Studio 2012 来做，但它也没有公开这个选项。有什么想法可以导出到word吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-09T19:56:43.253

您是否尝试过使用打印屏幕按钮？它将捕获屏幕。如果按住`Alt`它，它只会捕获窗口。

# node.js - 使用 Express 通过渲染发送多个变量

> ID：15968776
> 
> 赞同：2
> 
> 时间：2013-04-12T10:17:18.270
> 
> 标签：node.js, variables, express

也许是一个愚蠢的问题，但是，是否可以通过`res.render()`Express 发送多个变量？

因为，当我这样做时

```
res.render('index', { title: 'Express', name: 'Arnaud' }); 
```

我有所有这些漂亮的错误告诉我`name`没有定义。

![在此处输入图像描述](https://i.stack.imgur.com/8Uu47.png)

在这个视图中

```
extends layout

block content
  h1 Salut #{name}
  p Welcome to #{title} 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-03-17T02:52:22.290

在路线：

```
res.render("index", { data: { title: "Express", name: "Arnaud" } }) 
```

鉴于：

```
<%= data.title %>
<%= data.name %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T10:52:08.700

奇怪的事情很奇怪：我重新生成了一个新的 Express 项目，一切都很好......

# html - Performance of HTML links

> ID：15968779
> 
> 赞同：1
> 
> 时间：2013-04-12T10:17:24.827
> 
> 标签：html, browser

Is there any reason to prefer

```
<a href="alpha/beta.html"> 
```

over

```
<a href="http://mysite.com/dir/alpha/beta.html"> 
```

(assuming that the links refer to the same location)? And similarly for references to scripts and style sheets.

I worry that the former might be slightly slower because the browser might reuse a connection in the former case but open a new connection in the latter.

Or are browsers smart enough to handle this in the optimal way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:30:47.747

是的，有一个主要原因：**便携性**。当某些事情发生变化时，如果它不是一千处硬写，你会感觉更好。

此外，相对形式（第一种形式）要短得多。因此，当您的页面中有几十个内部链接时，使用相对链接可以节省很多字节。这里是为了**表演**。这样可以缩短传输时间，因此**可以节省能源**，**对地球也有好处**。

关于连接的重用，链接的相对或绝对形式无关紧要。Web 浏览器不是这样工作的。无论如何，Web 浏览器非常擅长使用相对链接并将它们定向到好的服务器。

**相对链接**绝对是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:31:03.897

不，在请求页面加载方面没有任何性能差异，因为它们都将解析到完全相同的地址，尽管由于 src 属性更长，绝对路径的页面大小会稍微大一些，但是显然，不值得一提，除非您当然有一个包含数千个链接的页面。

在大多数情况下，相对路径（您的第一个示例）优于绝对路径，就好像域需要更改一样，您不必遍历整个站点来更新图像/文件路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:19:47.633

HTTP 是一种无[状态](http://en.wikipedia.org/wiki/Stateless_protocol)协议，因此每次用户单击链接到新 HTML 页面的链接时，都会向服务器发送 HTTP 请求，因此使用完整 URL 不会比相对 URL 慢或快。

# xcode - 潮汐dk安装钛工作室错误

> ID：15968780
> 
> 赞同：0
> 
> 时间：2013-04-12T10:17:29.767
> 
> 标签：xcode, macos, titanium, tidesdk

我使用实际配置[按照在 Titanium Studio 中设置 TideSDK 中的](https://stackoverflow.com/questions/12504503/setting-up-tidesdk-in-titanium-studio)说明进行操作：

*   Mac OS X 10.8.3 和 Xcode 4.6.1
*   钛工作室构建 3.0.2.201302191606
*   TideSDK-1.3.1-beta-osx-x86-64

但是当我尝试通过帮助/安装 Titanium SDK 安装 TideSDK 下载的 zip 时，我收到此错误：

```
File not found: /var/folders/ts/1gfpg44s2ks3lqhd3rt79dh40000gn/T/TideSDK-1.3.1-beta-osx-x86-64.zip310468998/modules/osx/php/1.3.1-beta/libticrypto.0.dylib. 
```

但是该文件存在...我如何仍将 Titanium Studio 用作带有 TideSDK for Desktop 应用程序的 IDE（通过其他方式解决此错误）？

非常感谢 ！

阿德里安 C.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:52:42.643

我认为 Titanium Studio 不再支持 TideSDK。尝试从网站[http://tidesdk.org](http://tidesdk.org)下载 TideSDK Developer 。

# c# - Should I add checks for parameters which are just passed to another method?

> ID：15968783
> 
> 赞同：0
> 
> 时间：2013-04-12T10:17:33.763
> 
> 标签：c#, code-contracts

Consider these two methods

```
public int GetSomething(object obj)
{
    Contract.Requires<ArgumentNullException>(obj != null);

    ...
}

public int GetSomethingWrapper(object anotherObj)
{
    var obj = GetObj(anotherObj);
    return GetSomething(obj);
} 
```

Let's consider `GetObj` to be safe i.e. it doesn't throw any exceptions.
Thus `GetSomething` and `GetSomethingWrapper` throw execption if obj is null. But in the latter case the origin of exception is `GetSomething` method.

The question is whether I'd add checks for `GetSomethingWrapper`?
One the one side: not its business to care about. On the other: both methods are public but caller of the wrapper method has no contract information.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:20:57.217

> 一方面：不关心它的业务。

是的，它正在调用带有合约的方法，因此它应该遵守该合约。遵守该合同的最简单方法是强加自己的合同。

`GetSomethingWrapper`然后，正如您所说，还有一个当前没有合同的附加问题，因此使用 null 参数调用它*应该*是合法的……但实际上并非如此。

所以基本上，是的 - 我也会添加合同`GetSomethingWrapper`。它调用的*实现细节*`GetSomething`不应影响公共合同。

# javascript - 仅当输入值长度大于 2 时才显示 Jquery 模式窗口

> ID：15968786
> 
> 赞同：0
> 
> 时间：2013-04-12T10:17:37.003
> 
> 标签：javascript, jquery

当我在我的键盘上单击输入时，我有这样的代码来显示模式窗口：

```
 $(".search-input").keypress(function(e) {
    if(e.which == 13) {
      $('#screen').css({ opacity: 0.5, 'width':$(document).width(),'height':$(document).height()});
      $('#screen').show();
      $('#loading_modal').show();    
    }
  }); 
```

但我需要自定义它，如果输入的类 .search-input 值小于 3，我没有显示任何模态窗口...

我这样尝试：

```
 $(".search-input").keypress(function(e) {
    if(e.which == 13) {
      if($(".search-input").value.length > 2) {
        $('#screen').css({ opacity: 0.5, 'width':$(document).width(),'height':$(document).height()});
        $('#screen').show();
        $('#loading_modal').show();    
      }
    }
  }); 
```

但由于某些原因它不起作用（如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:18:52.493

用于`trim()`删除空格和`val()`

试试这个

```
 if($.trim($(this).val()).length > 2) {
      ...... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:24:05.380

这基本上将替换任何文本：

```
$(".search-input").value.replace(/{.*?}/g, '').length > 2 
```

试试这个：

```
$.trim($(this).val().replace(/[^\w\s]/g, '')).length > 2 
```

如果您***真的只***想要搜索字符串中的字母，请执行以下操作：

```
$(this).val().replace(/[^a-z]/gi, '').length > 2 
```

# variables - Good practice in naming derived types in fortran

> ID：15968789
> 
> 赞同：4
> 
> 时间：2013-04-12T10:17:44.317
> 
> 标签：variables, coding-style, fortran, derived-types

I'd like to optimize the readability of my codes in Fortran by using OOP. I thus use derived types. what is the best practice to name the types and derived types?

For example, is it better to:

```
type a
    real :: var
end type
type(a) :: mya 
```

or always begin type names by `type_` like in `type_a`? I like this one but maybe better ideas can be foud.

Also, is it better (then why) to use short names that are less readable or longer names that end up quite difficult to read if the type has too many "levels". For example, in `a%b%c%d%e`, if a, b, c, d and e are 8 or more letters long as in `country%hospital%service%patient%name`, then once again readability seems to be a concern.

Advices from experts are really welcome.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:27:22.090

This not anything special to Fortran. You can use coding recommendation for other languages. Usually, type names are not designated by any prefix or suffix. In many languages class names start with a capital letter. You can use this in Fortran also, even if it is not case sensitive. Just be sure not to reuse the name with a small letter as a variable name.

One example of a good coding guideline is [this](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html) and you can adapt it for Fortran very easily. Also, have a look on some Fortran examples in books like [MRC](http://books.google.cz/books/about/Modern_Fortran_Explained.html?id=MmOIFEgsDLwC&redir_esc=y) or [RXX](http://books.google.cz/books?id=xedE5KkHVn4C&printsec=frontcover&hl=cs&sa=X&ei=EONnUY_zMuiR4ATmj4DIBQ&ved=0CDQQ6AEwAA). [OS](http://books.google.cz/books?id=E6a8oZOS8noC&lpg=PP1&pg=PP1#v=onepage&q&f=false) can be also useful.

I would recommend not to use too short component names, if the letter is not the same as used in the written equation. In that case it can be used.

Use the `associate` construct or pointers to make aliases to nested names like `country%hospital%service%patient%name`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-24T20:53:11.640

根据我的经验，由于 Fortran 的命名模块、缺少命名空间和不区分大小写等原因，OO Fortran 中的命名问题比其他语言（例如 C++）更多。不区分大小写会造成伤害，因为如果您命名 type `Foo`，则不能命名变量`foo`，否则会出现编译器错误（使用 gfortran 4.9 测试）。

我确定的规则是：

*   每个 Fortran 模块都提供一个名为`Namespace_Foo`.
*   该类`Namespace_Foo`可以作为`Namespace/Foo_M.f90`.
*   类变量是具有描述性的小写名称的名词，例如`bar`or `bar_baz`。
*   类方法是具有描述性（但尽可能简短）名称的动词，并使用 rename `search => Namespace_Foo_search`。
*   当没有简单的替代方案时，`Namespace_Foo`可以命名类的实例（没有命名空间）。`foo`

`Namespace::Foo`这些规则使得在 Fortran 中镜像 C/C++ 类或将 C++ 类绑定（使用）到 Fortran变得特别容易`BIND(C)`。它们还避免了我遇到的所有常见名称冲突。

这是一个工作示例（使用 gfortran 4.9 测试）。

```
module Namespace_Foo_M
implicit none

type :: Namespace_Foo
  integer :: bar
  real    :: bar_baz
  contains
  procedure, pass(this) :: search => Namespace_Foo_search
end type

contains

function Namespace_Foo_search(this, offset) result(index)
  class(Namespace_Foo) :: this 
  integer,intent(in)   :: offset !input
  integer              :: index  !return value
  index = this%bar + int(this%bar_baz) + offset
end function

end module

program main
use Namespace_Foo_M !src/Namespace/Foo_M.f90

type(Namespace_Foo) :: foo

foo % bar = 1
foo % bar_baz = 7.3

print *, foo % search(3) !should print 11

end program 
```

请注意，为了运行示例，您可以将上面的所有内容复制/粘贴到一个文件中。

*最后的想法*

我发现 Fortran 中缺少名称空间非常令人沮丧，破解它的唯一方法就是将其包含在名称本身中。我们有一些嵌套的“命名空间”，例如在 C++`Utils::IO::PrettyPrinter`和 Fortran 中`Utils_IO_PrettyPrinter`。我将 CamelCase 用于类的一个原因，例如，`PrettyPrinter`而不是`Pretty_Printer`，是为了消除命名空间的歧义。命名空间是大写还是小写对我来说并不重要，但是在名称和文件路径中应该使用相同的大小写，例如类`utils_io_PrettyPrinter`应该位于`utils/io/PrettyPrinter_M.f90`. 在大型/不熟悉的项目中，您将花费大量时间搜索源代码树以查找特定模块所在的位置，并且在模块名称和文件路径之间制定约定可以节省大量时间。

# visual-studio-2012 - VS2012 - 如何启用/重新启用方法列表？

> ID：15968791
> 
> 赞同：0
> 
> 时间：2013-04-12T10:17:45.220
> 
> 标签：visual-studio-2012

我以前可以看到下面的方法列表。但它似乎现在已经消失了，我不知道如何重新启用它。任何帮助表示赞赏:)

![在此处输入图像描述](https://i.stack.imgur.com/bKwCn.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:21:06.477

试试这个，但我不确定这是否能解决你的问题。

工具>导入和导出设置，然后选择重置所有设置

# google-app-engine - Serving static files from google cloud storage?

> ID：15968792
> 
> 赞同：7
> 
> 时间：2013-04-12T10:17:53.230
> 
> 标签：google-app-engine, google-cloud-storage

I wanted to serve static files stored in google cloud storage for app hosted in app engine. In HTML file, I used

```
<link href="https://storage.cloud.google.com/my_bucket/custom.css" rel="stylesheet"> 
```

It works properly, if the google account of logged in user has permission to access bucket. Since app can be accessed by anyone who will not have access to my bucket and in such case, static files will not be served.

Is it possible to make static files in bucket publicly available? I made static file(custom.css) as 'shared publicly'(ACL set to 'public-read') but still other users can't access it.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T10:39:24.677

我不确定您如何上传文件以及为什么未正确设置公共读取，但您也可以通过[Google Cloud Storage Manager](https://storage.cloud.google.com)进行更改。只需找到存储桶和文件，然后单击`Share Publicly`复选标记，您将获得链接。

![云存储桶中的文件列表](https://i.stack.imgur.com/8YfF0.png)

或者您可以使用[或者您可以使用gsutil](https://developers.google.com/storage/docs/gsutil)并立即公开阅读：

```
gsutil cp -a public-read custom.css gs://my_backet 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T07:32:06.737

除了通过[*Google Cloud Storage Manager*](https://stackoverflow.com/a/15969224/4058484)手动更改每个静态文件之外，您还可以使用[gsutil](https://cloud.google.com/storage/docs/gsutil)*[将存储桶](https://bitmovin.com/docs/encoding/faqs/how-can-i-create-access-secret-keys-for-google-cloud-storage)*设置为公开可见：

使用[*acl*](https://cloud.google.com/storage/docs/gsutil/commands/acl)对**当前存储桶对象设置公开读取**

```
gsutil -m acl set -R -a public-read gs://BUCKET_NAME 
```

使用[*defacl*](https://cloud.google.com/storage/docs/gsutil/commands/defacl)设置为**将来上传**的默认值：

```
gsutil -m defacl set public-read gs://BUCKET_NAME 
```

然后将自动检查每个上传的文件的“公开共享”复选框。

要[*访问 bucket*](https://stackoverflow.com/a/29395746/4058484)，请确保您已输入组和用户的授权 id 或电子邮件以及[*存储桶权限*](https://cloud.google.com/storage/docs/cloud-console#_bucketpermission)的域， 否则您将收到如下错误消息：

```
'DefAclCommand' object has no attribute 'continue_on_error' 
```

您也可以在*[控制台](https://stackoverflow.com/a/49809949/4058484)*或*[使用 IAM 角色中](https://stackoverflow.com/a/51225419/4058484)*进行。

# javascript - 使用 jquery 和 BASIC 身份验证的 Ajax 跨域请求？

> ID：15968796
> 
> 赞同：2
> 
> 时间：2013-04-12T10:17:59.193
> 
> 标签：javascript, ajax, glassfish, cross-domain, basic-authentication

如果有人能告诉我该身份验证有什么问题，我真的很感激？我从服务器上取消身份验证以在没有它的情况下进行测试，但 javascript 已损坏。

```
 $('#btnSignIn').click(function() {
            var username = $("#username").val();
            var password = $("#password").val();

    function make_base_auth(user, password) {
            var tok = user + ':' + password;

            var final = "Basic " + $.base64.encode(tok);
            console.log("FINAL---->" +final);
            alert("FINAL---->" +final);

            return final;
}

            $.ajax({
                        type: "GET",
                        contentType: "application/json",
                        url: "http://localhost:8080/SesameService/webresources/users/secured/login",
                        crossDomain: true,
                        dataType: "text",
                        async: false,
                        data: {},
                        beforeSend: function (xhr){ 
                            xhr.setRequestHeader('authorization', make_base_auth(username, password));
                       },
                        success: function() {
                            alert('Thanks for your signin in! ');

                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            console.log(textStatus, errorThrown);
                            alert(' Error in signIn-process!! ' +textStatus);
                        }
                    });
        }); 
```

错误：如果我采取

```
beforeSend: function (xhr){ 
    xhr.setRequestHeader('authorization', make_base_auth(username, password)); 
```

- 从功能中分离出来，我可以进入 REST 服务。我暂时没有进行身份验证。这可能是原因还是我应该在使用该标头时在服务器中进行身份验证？

```
contentType: "application/json",

@GET
@Path("/secured/login")
@Produces({"text/plain"})
public String login() {

    return "Is it working or not?";
} 
```

* * *

在 JS 中使用 beforeSend-part 时，出现错误：

```
[Exception... "Failure" nsresult: "0x80004005 (NS_ERROR_FAILURE)" location: "JS frame :: http://localhost:8383/Sesame/assets/js/jquery.min.js :: .send :: line 3" data: no] { message="Failure"
, result=2147500037
, name="NS_ERROR_FAILURE"
, 
```

如果我理解正确，标题中的“授权+基本”告诉 Glassfish 服务器，基本身份验证将完成。身份验证后，它转到 REST 服务，在我的情况下，将 json-object 返回给 HTML5-client。HTML5-client 在 localhost:8383 中运行，其余服务在 localhost:8080 中运行。

如果我直接在 localhost:8080 中运行安全的休息服务，它就可以工作，所以这不是问题。问题是，当我使用或尝试使用来自不同域 localhost:8383 的 rest-services 时，我得到 JS-error console.log('----ERROR IN ------Siging IN-- --------'); 我不是 100% 确定，但我认为问题是 401 未授权，因此跨域身份验证不起作用。

我应该插入 crossDomain: true 吗？我在某个地方看到过，也许是这样？

在服务器端，我有过滤器：

```
<init-param>
        <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
        <param-value>util.CrossOriginResourceSharingFilter</param-value>
    </init-param>

public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
    response.getHttpHeaders().putSingle("Access-Control-Allow-Origin", "*");
    response.getHttpHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE");
    response.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "content-type");
    return response;
} 
```

* * *

**问题**

1）如果服务器未配置身份验证并且我仍然使用授权标头会破坏应用程序并导致错误，这是否可能？

2) JS 错误是什么意思？

干杯，萨米

# c# - 使用 Web 服务和本地数据库 MVC 视图的一对多关系

> ID：15968799
> 
> 赞同：2
> 
> 时间：2013-04-12T10:18:02.097
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我目前正在大学从事一项任务，不幸的是不久前我丢失了一些代码。特别是我将特定产品展示到特定商店的地方，我拥有的代码现在根本不适合我，将不胜感激

我有一个 Web 服务和一个本地数据库，Web 服务从中引入产品信息，本地信息包含商店数据和商店等级数据。

这是我在详细信息视图页面上显示的代码。

```
@model Part1MVC.ViewModels.GradeProductVM

@{
ViewBag.Title = "Details";
}

<h2>Details</h2>
<fieldset><legend>GradeProductVM</legend>
<div class="display-label">@Html.DisplayNameFor(model => model.Gradeid)</div>
<div class="display-field">@Html.DisplayFor(model => model.Gradeid)</div>
<div class="display-label">@Html.DisplayNameFor(model => model.GradeName)</div>
<div class="display-field">@Html.DisplayFor(model => model.GradeName)</div>
</fieldset>

<div>There are @Model.Products.Count products</div>
@foreach (var prod in Model.Products) { <div>@prod.ProductName</div>}
<p>@Html.ActionLink("Edit", "Edit", new { id=Model.Gradeid }) |
@Html.ActionLink("Back to List", "Index")</p> 
```

// 这是 service1.cs 获取等级产品的代码

```
 public List<PhysicalProduct> GetProductsForGrade(int gradeid){
        var list = new List<PhysicalProduct>();
        try {
            using (var db = new ProductsEntities()) {
                var q = from prod in db.PhysicalProducts
                        join pg in db.ProductToGrades on prod.ProductId equals pg.ProductId
                        where pg.StoreGradeId == gradeid
                        select prod;
                return q.ToList();
            }
        }
        catch (Exception ex) {
            return null;
        }
        return list;
    } 
```

////这是控制器代码

```
 public ActionResult Details(int id){
        Grade grade = db.Grade.SingleOrDefault(x => x.GradeId == id);
        //var products = ServiceLayer.GetProducts();
        var products = ServiceLayer.GetProductsForGrade(id);
        var vm = new ViewModels.GradeProductVM(id, grade.Description, products);
        return View(vm);
    } 
```

//这是视图模型代码

```
public class GradeProductVM {
    public int Gradeid { get; set; }
    public string GradeName { get; set; }
    public List<PhysicalProduct> Products { get; set; }

    public GradeProductVM() {

    }
    public GradeProductVM(int gradeid, string name, List<PhysicalProduct> prods){
        Gradeid = gradeid;
        GradeName = name;
        Products = prods;

    }
} 
```

我可以获取当前在数据库中的所有产品以显示给每个商店，但不能将特定产品显示给特定商店。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T17:59:24.767

请发布数据库表结构，似乎查询连接可能是错误的。休息似乎是正确的！

# css - 如何在 GWT 中使用 CSSResource 应用复杂样式

> ID：15968801
> 
> 赞同：1
> 
> 时间：2013-04-12T10:18:09.400
> 
> 标签：css, gwt, cssresource

在我的项目中，我将您的 CSSResource 捆绑包应用于项目中的样式。

如何应用[示例](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss)中给出的更复杂的样式？

我无法使用 x.setStyleName(refToCss.MenuBar()) 和 addStyleName(refToCess.MenuItem()) 应用子样式。

在我的情况下，第二个（子）样式*MenuItem*似乎被忽略了。

我只是在这里使用这个菜单栏作为例子。我想要实现的是拥有多个具有多种状态的组件。例如 .component1 .stateA, component2 .stateA .. 其中状态 A 对于 component1 和 component2 具有不同的视觉外观。

（实际上 CSS 应该可以工作）。

提前致谢， 沃特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:59:20.900

```
In my case the second (child) style MenuItem just seems to be ignored. 
```

为了忽略你应该使用

```
x.setStylePrimaryName(refToCss.MenuBar()); 
```

# php - 图片上传速度防止网页加载缓慢

> ID：15968804
> 
> 赞同：0
> 
> 时间：2013-04-12T10:18:14.867
> 
> 标签：php, javascript, html, image, loading

第 1 步：使用 ftp 客户端（fielzilla）将照片上传到我的 ftp 服务器
第 2 步：想在浏览器中加载这些图像（每个图像大小 > 10 MB）
第 3 步问题：由于没有创建缩略图，网页也需要加载时间很多。

问题：

有没有办法通过使用 javascript / 服务器端脚本在我的网页中显示图像的缩略图，

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:29:50.433

You can use an image resizer script to render the image as thumbnail: ([http://viralpatel.net/blogs/resize-image-dynamically-php/](http://viralpatel.net/blogs/resize-image-dynamically-php/)), you can download from here ([http://timthumb.googlecode.com/svn/trunk/timthumb.php](http://timthumb.googlecode.com/svn/trunk/timthumb.php)).

# javascript - Fancybox 2.0 and Youtube Video

> ID：15968805
> 
> 赞同：2
> 
> 时间：2013-04-12T10:18:16.617
> 
> 标签：javascript, jquery, youtube, fancybox, fancybox-2

I want to open a youtube video in the new fancybox. I don't get it to work. It always goes directly to the page instead of opening it in the fancybox. Here is the code:

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>youtube video</title>
        <link rel="stylesheet" href="css/jquery.fancybox.css" />
        <script src="./js/jquery-1.9.1.min.js"></script>
        <script src="./js/jquery.fancybox.pack.js"></script>
        <script>
            $(document).ready(function(){
                $(".fancybox-media").fancybox({
                    openEffect  : 'none',
                    closeEffect : 'none',
                    helpers : {
                        media : {}
                    }
                });
            });
        </script>
    </head>
    <body>
        <a href="http://www.youtube.com/watch?v=b_ojoebJyvc" class="fancybox-media">Video</a>
    </body>
</html> 
```

What I'm doing wrong? I also tried this code (as stated on the [fancybox website](http://fancyapps.com/fancybox/#examples)):

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>youtube test</title>
        <link rel="stylesheet" href="css/jquery.fancybox.css" />
        <link rel="stylesheet" href="css/jquery.fancybox-buttons.css" />
        <link rel="stylesheet" href="css/jquery.fancybox-thumbs.css" />

    </head>
    <body>
        <a class="various fancybox.iframe" href="http://www.youtube.com/v/ZeStnz5c2GI?fs=1&amp;autoplay=1"><img src="http://dogmatic69.com/files/portfolio/image/4f288818-c5a8-4872-a003-06376318cd71/stackoverflow-logo.png" width="200" /></a>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="js/jquery.fancybox.pack.js"></script>
        <script src="js/jquery.mousewheel-3.0.6.pack.js"></script>
        <script src="js/jquery.fancybox-buttons.js"></script>
        <script src="js/jquery.fancybox-media.js"></script>
        <script src="js/jquery.fancybox-thumbs.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                $(".various").fancybox({
                    maxWidth    : 800,
                    maxHeight   : 600,
                    fitToView   : false,
                    width       : '70%',
                    height      : '70%',
                    autoSize    : false,
                    closeClick  : false,
                    openEffect  : 'elastic',
                    closeEffect : 'none'
                });
            });
        </script>
    </body>
</html> 
```

This code should be the same as on [this page](http://webdesignandsuch.com/posts/fancybox-download/responsive-youtube-videos/fancybox-youtube.html). What is the difference?

**EDIT:**

It is the youtube link!

[http://www.youtube.com/v/ZeStnz5c2GI?fs=1&autoplay=1](http://www.youtube.com/v/ZeStnz5c2GI?fs=1&autoplay=1)

does work.

This link doesn't

[http://www.youtube.com/watch?v=b_ojoebJyvc](http://www.youtube.com/watch?v=b_ojoebJyvc)

What can I do?

```
$(document).ready(function() {
    $(".various").click(function() {
        $.fancybox({
            maxWidth    : 800,
            maxHeight   : 600,
            fitToView   : false,
            width       : '70%',
            height      : '70%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'elastic',
            closeEffect : 'none',
            href        : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/') + '?fs=1&autoplay=1'
        });
        //alert(this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'));
        alert(this.href);
    });
}); 
```

This doesn't work. The href is never overwritten!

This also doesn't work (it always follows the link and no fancybox is openend):

```
$(document).ready(function() {
    $(".various").click(function() {
        $.fancybox({
            maxWidth    : 800,
            maxHeight   : 600,
            fitToView   : false,
            width       : '70%',
            height      : '70%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'elastic',
            closeEffect : 'none',
            beforeLoad  : function(){
                var url= $(this.element).data("href");
                url.replace(new RegExp("watch\\?v=", "i"), 'v/') + '?fs=1&autoplay=1'
                this.href = url
                alert(url);
            }
        });
        //alert(this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'));
        //alert(this.href);
    });
}); 
```

So I think you can forget fancybox 2.0\. Take the old one and you are good ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:10:04.520

再次感谢[肯尼迪](https://stackoverflow.com/a/11619396/426227)。这现在有效：

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>youtube test</title>
        <link rel="stylesheet" href="css/jquery.fancybox.css" />
    </head>
    <body>
        <a class="various fancybox.iframe" href="http://www.youtube.com/watch?v=L9szn1QQfas"><img src="http://dogmatic69.com/files/portfolio/image/4f288818-c5a8-4872-a003-06376318cd71/stackoverflow-logo.png" width="200" /></a>

        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/jquery.fancybox.pack.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".various").fancybox({
                    maxWidth    : 800,
                    maxHeight   : 600,
                    fitToView   : false,
                    width       : '70%',
                    height      : '70%',
                    autoSize    : false,
                    closeClick  : false,
                    openEffect  : 'elastic',
                    closeEffect : 'none',
                    beforeLoad  : function(){
                        var url= $(this.element).attr("href");
                        url = url.replace(new RegExp("watch\\?v=", "i"), 'v/');
                        url += '?fs=1&autoplay=1';
                        this.href = url
                    }
                });
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:21:18.187

删除`class`属性中的点，它应该可以工作：

```
<a href="http://www.youtube.com/watch?v=qnydFmqHuVo" class="fancybox-media">Video</a> 
```

（已编辑）

# java - 从 JAR 加载 CLP 文件的问题

> ID：15968813
> 
> 赞同：0
> 
> 时间：2013-04-12T10:18:43.650
> 
> 标签：java, jar, clips

我正在使用 CLIPSJNI。

我所拥有的是：

```
Environment clips = new Environment();
clips.load("main.clp"); 
```

其中 main.clp 与 src 和 bin 文件夹位于同一级别。

这在 Eclipse 中运行良好。但是，当我导出到 JAR 时。它不能工作。

我知道当我们导出到 JAR 时路径存在一些问题。所以我看到有人建议使用 this.getClass().getResourceStream() 但事实并非如此。因为我需要的是文件的名称，而不是它的内容。

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T23:42:56.510

问题是加载是在 C 端的本机库中完成的，它被传递一个文件名作为参数。C 代码没有 JAR 文件的概念或如何提取嵌入其中的文件。我认为您需要做的是始终将 .clp 文件放在 JAR 文件中，然后有一个例程从 JAR 文件中提取数据并将其保存到文件中。然后，您可以使用 load 方法加载它，并在完成后删除文件。

# java - 相同的 Java 源代码导致不同的结果

> ID：15968824
> 
> 赞同：1
> 
> 时间：2013-04-12T10:19:14.637
> 
> 标签：java, swing, user-interface, jframe

我正在尝试学习 Java 并想编写一个 GUI。尝试从一个简单的计算器开始，我在试验 JTextField 时遇到了一个问题。编译以下代码有时会导致一个空框架，有时会导致其中包含面板和按钮。

无论我使用 javac 还是 eclipse，都会发生这种情况。我使用以下代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class Mainframe extends JFrame {

private JButton button1;
private JPanel mainpanel;
private JLabel headline;
private Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
JTextField number1;
JTextField number2;

public Mainframe(String s) {

    super(s);
    setSize(screenSize.width, screenSize.height);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    mainpanel = new JPanel(new BorderLayout(100, 100));
    number1 = new JTextField(20);
    number2 = new JTextField(20);
    headline = new JLabel("Simple Calculator");
    button1 = new JButton("1");

    mainpanel.add(headline, BorderLayout.NORTH);
    mainpanel.add(number1, BorderLayout.SOUTH);
    mainpanel.add(button1, BorderLayout.EAST);
    mainpanel.add(number2, BorderLayout.CENTER);
    mainpanel.validate();

    getContentPane().add(mainpanel);

}

public static void main(String[] args) {
    Mainframe mainframe1 = new Mainframe("Title");

}
} 
```

我想重复一遍：这不是关于 javac 和 eclipse 之间的差异，而是关于我在两个编译器中遇到的问题/发生 - 有时结果是想要的，有时不是。为什么会这样？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:21:49.407

将您`setVisible( true )`移到添加所有组件的时刻。

如果不这样做，则需要按照[`Container#add`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)方法的 javadoc 中的指示重新验证布局：

> 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:22:02.217

确保调用`JFrame.setVisible(true)`是您调用的最后一行。

所以只需移动这条线：

```
setVisible(true); 
```

到构造函数的末尾。

再提几点意见：

*   不需要就不要扩展（这里不需要）
*   确保所有与 UI 相关的操作都在 EDT 上完成（使用`SwingUtilities.invokeLater()`块启动 UI）
*   不要打电话`setSize(screenSize.width, screenSize.height);`，而是`frame.setExtendedState(Frame.MAXIMIZED_BOTH);`让一个窗口占据整个屏幕空间。还考虑`pack()`在使框架可见之前（但在调用之前`frame.setExtendedState(Frame.MAXIMIZED_BOTH);`）调用，以便正确布置所有组件，这也将框架的大小设置为其计算的首选大小。

# javascript - 将 Json 数据转换为特定数组

> ID：15968825
> 
> 赞同：0
> 
> 时间：2013-04-12T10:19:15.560
> 
> 标签：javascript, arrays, json

我收到来自 json 的以下格式的响应

```
["user0", "user1", "user2", "user3", "user5", "user6", "user7"] 
```

我需要将其转换为以下格式

```
 [
     { id: 'user0', text: 'user1'},
     { id: 'user1', text: 'user2'},
     { id: 'user2', text: 'user3'},
     { id: 'user3', text: 'user4'},
     { id: 'user5', text: 'user5'},
     { id: 'user6', text: 'user6' },
     { id: 'user7', text: 'user7' }
    ]; 
```

如何在 javascript 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:38:04.177

尝试这个

```
 var a = ["user0", "user1", "user2", "user3", "user5", "user6", "user7"]
    var array = [];

    for(var i =0;i<a.length;i++)
    {
        var temp = new Object();
        temp.id= a[i];
        temp.text = a[i];
        array.push(temp);
        //alert(JSON.stringify(array));
    }

var requiredString = JSON.stringify(array);
alert(requiredString.replace(/"id"/g, 'id').replace(/"text"/g,text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:34:28.713

在现代浏览器中，我会使用[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Map)。

```
var array = ["user0", "user1", "user2", "user3", "user5", "user6", "user7"];

var newArray = array.map(function(item) {
    return {id: item, text: item};
}) 
```

如果你必须支持不支持 ES5 的旧浏览器，我会使用 shim——通常我会填充所有[ES5 方法](https://github.com/kriskowal/es5-shim)，但你也可以只实现你需要的那个，实现示例在文档中。

只是要知道，在 ES6 和 Firefox Nightly 已经支持新的 fat 数组语法 - 你实际上可以有：

```
var array = ["user0", "user1", "user2", "user3", "user5", "user6", "user7"];

var newArray = array.map(item => ({id: item, text: item})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:23:54.690

一个简单的循环应该可以满足您的需要：

```
var myArray = ["user0", "user1", "user2", "user3", "user5", "user6", "user7"];
var newArray = [];
for (var i = 0, l = myArray.length; i < l; i++) {
    var newItem = {id : myArray[i], text: "user" + (i +1)};
    newArray.push(newItem);
} 
```

JSFiddle 示例 - [http://jsfiddle.net/eVQWS/](http://jsfiddle.net/eVQWS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:24:08.023

最简单的方法是使用[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)方法：

```
var arr = ["user0", "user1", "user2", "user3", "user5", "user6", "user7"],
    result = arr.map(function(e, i, a) {
        return { id: e, text: i < a.length - 1 ? a[i+1] : e };
    });

console.log(result); 
```

请在**MDN**上检查[浏览器兼容性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Browser_compatibility)，并在需要时使用[shim 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)

# ruby-on-rails - 使用 Rails 服务器运行 Web 应用程序

> ID：15968828
> 
> 赞同：0
> 
> 时间：2013-04-12T10:19:28.043
> 
> 标签：ruby-on-rails, macos

我需要在 Mac OS 10.8 上使用 rails 应用程序，但我无法启动 rails 服务器。

我安装了 Ruby，我使用的是 ruby​​-1.9.2-p320 版本，我安装了 rvm 和 rails。按照 Ruby 入门指南 ( [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html) )，我现在需要的只是导航到我的应用程序文件夹并运行命令：

```
rails server 
```

但我得到这个错误

```
git://github.com/archiloque/rest-client.git (at master) is not checked out. Please run `bundle install` 
```

运行命令时，`bundle install`我遇到以下错误

```
Could not find gem 'rest-client (>= 0) ruby' in git://github.com/archiloque/rest-client.git (at master).
Source does not contain any versions of 'rest-client (>= 0) ruby' 
```

我错过了什么？

我刚刚注意到的奇怪的事情是，在跑步时

```
gem rails install 
```

我被告知 rails 已正确安装 ( `Successfully installed rails-3.2.13`)，但在检查其版本时

```
rails --version 
```

我再次收到错误消息

```
git://github.com/archiloque/rest-client.git (at master) is not checked out. Please run `bundle install` 
```

我的 Gemfile 的内容如下：

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'
gem 'sqlite3'
gem 'devise', '2.1.2'
gem 'rest-client', :git => 'git://github.com/archiloque/rest-client.git'
gem 'jquery-rails'
gem 'rspec-rails', group: [:test,:development]
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git"
gem "rb-readline"

group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'twitter-bootstrap-rails'
gem 'uglifier', '>= 1.0.3'
end

group :test do
gem 'debugger'
gem 'factory_girl_rails'
gem 'capybara'
gem 'guard-rspec'
gem 'vcr'
gem 'fakeweb'
gem 'rb-fsevent', :require => false
gem 'guard-rspec'
gem 'growl'
gem 'database_cleaner'
end

group :development do
gem 'capistrano'
gem 'capistrano-ext'
gem 'rvm-capistrano'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:22:11.767

移动存储库的所有者`rest-client`，请参见此处 ( [https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client) )。

在您的 Gemfile 中使用它`gem 'rest-client', :git => 'git://github.com/rest-client/rest-client.git'`

# android - 经认证的文件从 Android App 上传到 Django 后端

> ID：15968830
> 
> 赞同：0
> 
> 时间：2013-04-12T10:19:31.010
> 
> 标签：android, django, authentication, file-upload

我想允许用户将文件从 Android 应用程序上传到 Django 网站。为了防止随机上传，我想将此功能限制为经过身份验证的用户。例如，通过为用户分配一个可以在请求中发送的唯一 API 密钥。理想情况下，服务器应尽快拒绝请求以减少负载。否则，我可以简单地在 POST 请求中发送一个额外的参数，但这意味着所有内容都已上传，然后才能被接受或拒绝。

我想让授权用户尽可能简单，因此避免用户名/密码会话管理。我生成的单个随机 API 密钥将是完美的。

关于我应该研究什么方向的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:42:49.957

如果您在标头中包含身份验证信息，则可以在开始读取请求正文之前拒绝未经授权的 POST。您可能只想使用[HTTP Basic Auth](http://en.wikipedia.org/wiki/Basic_access_authentication)；它简单而标准。Authorization 标头用于用户名/密码，但您可以轻松地用这些术语表示 API 密钥或类似类型的凭据。

# cordova - Using Local storage in phone gap

> ID：15968831
> 
> 赞同：23
> 
> 时间：2013-04-12T10:19:33.977
> 
> 标签：cordova, mobile, phonegap-build

I wanted to create an mobile app for my web project. I found phonegap. It says Easily create apps using HTML, CSS, and JavaScript. I have not created a mobile app using phone gap before. There are three storage options memory-store.js (MemoryStore), ls-store.js (LocalStorageStore) and websql-store.js (WebSqlStore). I just want to save a token to recognise the user. Which storage is best suited. Is there a better way to build an mobile app.

I appreciate any help.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-12T10:51:55.670

使用本地存储可能最容易满足您的需求。

从根本上说，PhoneGap 应用程序是原生应用程序（因此它们可以通过应用程序商店分发），它们只运行一个或多个网页。然后，PhoneGap API 将 JavaScript 挂钩提供到相机等设备功能中。还有更多内容，但现在这就是背景。

因此，由于该应用程序本质上是一个网页（HTML5、CSS、JS），因此您可以使用 LocalStorage（HTML5 的一部分）。

**本地存储使用示例：**

设定值：

```
localStorage.myname = "Greg"; 
```

获取值：

```
localStorage.myname; // returns "Greg" 
```

有关本地存储的更多信息：http: [//diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

对于 Windows Phone 7：[http ://docs.phonegap.com/en/3.4.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/3.4.0/cordova_storage_storage.md.html#Storage)

语法如下

```
localStorage.setItem("name", "Alen");

localStorage.getItem("name"); //will return Alen 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T07:30:18.520

关于使用 localStorage 的一点要补充的是，它仅受 HTML5 兼容设备支持。对于较早的设备（对于新设备也是一个不错的选择），选项是使用 phonegap 的 SQLite 实现。[看这里...](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#Database)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:17:10.793

I would recommend you also look into Lawnchair persistent storage solution. It was built with a mobile first approach. I have used it in some projects; it works really well.

Sample code

```
var store = new lawnchair({name:'testing'}, function(store) {
    // create an object
    var me = {key:'brian'};

    // save it
    store.save(me);

    // access it later... yes even after a page refresh!
    store.get('brian', function(me) {
        console.log(me);
    });
}); 
```

You can read more about it at [http://brian.io/lawnchair/](http://brian.io/lawnchair/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T21:19:24.677

朋友，我也尝试过使用带有 phonegap 的 cookie，但没有成功。解决方案是使用 localStorage。

关键快速示例：

```
 var keyName = window.localStorage.key(0); 
```

设置项目快速示例：

```
 window.localStorage.setItem("key", "value"); 
```

获取项目快速示例

```
 var value = window.localStorage.getItem("key");
 // value is now equal to "value" 
```

删除项目快速示例：

```
 window.localStorage.removeItem("key"); 
```

清除快速示例：

```
 window.localStorage.clear(); 
```

如果您将 javascript 用于移动设备和网络，则可以使用此代码来检测该环境：

```
var wl = window.location.href;
var mob = (wl.indexOf("android")>0); 
```

参考资料： [http ://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage) [http://cordova.apache.org/docs/en/6.x/cordova/storage/storage.html #page-toc-源](http://cordova.apache.org/docs/en/6.x/cordova/storage/storage.html#page-toc-source)

请注意：在 iOS 上使用匿名导航可能会使本地存储无法正常工作。一个对我来说很好的简单测试：

```
$(document).ready(function () {
    try {
        localStorage.setItem('test', '1');
    } catch (Err) {
        if (Err.message.indexOf('QuotaExceededError') > -1) {
            // Tell the user they are in anonymous mode
            // Sugest it to go to https://support.apple.com/pt-br/HT203036 to get help to disable it
            }
        }
    }
}); 
```

# php - Run perl when system() is disabled

> ID：15968832
> 
> 赞同：0
> 
> 时间：2013-04-12T10:19:35.560
> 
> 标签：php, perl, passthru

I'm trying to run a Perl script using:

```
$var = null;
system(PATH_PERL . 'script.pl', $var);
var_dump($var); 
```

However, I'm getting this error:

> `Warning: system() has been disabled for security reasons [...]`

The complete list of disabled functions (with `ini_get('disable_functions')`):

> `system, system_exec, shell, shell_exec, exec, passthru, escapeshellarg, escapeshellcmd, proc_close, proc_open, ini_alter, popen, show_source, enable _dl, dl`

**Is there any way to execute a Perl script when these functions are disabled?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:32:11.460

没有办法通过 shell 执行它们；在 PHP 中执行 shell 命令的所有方法都被禁用。（execpt 在 PHP 中解释 perl（我认为这毫无意义……；那么你也可以直接将 perl 翻译成 php））

# javascript - 对存储在变量中的元素名称应用方法

> ID：15968838
> 
> 赞同：0
> 
> 时间：2013-04-12T10:20:00.640
> 
> 标签：javascript, jquery

如果我将元素 id 存储在变量中，那么如何在其上应用 show()、hide() 等任何方法。说“var a”有它的名字，现在怎么说 hide() 这个元素？

谢谢 ，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T10:22:18.717

试试这样：

```
 $("#"+ a).hide(); 
```

在哪里`a`持有`id`

[ID选择器](http://api.jquery.com/id-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:22:44.090

在 jquery 中试试这个：

```
$('#'+your_id).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:23:17.123

只需将它提供给 jquery 对象，就像使用纯字符串一样。

```
var id = "#yourid";
$(id).hide();

// or

var id = "yourid";
$("#"+id).hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:23:21.633

```
$("#elementId").hide(); 
```

但是你可以用这种方式

```
var eleId = "elementId";
$("#"+eleId).hide(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T10:26:55.100

将 id 缓存在变量中并使用它。

```
 var element = $("#"+holder);

 element.hide();
 element.show(); 
```

# c++ - 数组初始值设定项列表中的隐式转换

> ID：15968839
> 
> 赞同：3
> 
> 时间：2013-04-12T10:20:01.200
> 
> 标签：c++, c++11, initializer-list

`const char*`为什么从to的隐式转换`std::string`在后一种情况下不起作用？如果可能，请链接对 C++ 标准的引用。

**变体 1：**

```
struct Foo {
    Foo(const char* a) {}
};

int main() {
   // works well for a "const char*" accepting constructor
   Foo* foo = new Foo[1] { "a" };
} 
```

**变体 2：**

```
struct Foo {
    Foo(std::string a) {}
};

int main() {
   // could not convert from "const char*" to "Foo"
   Foo* foo = new Foo[1] { "a" };
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:26:48.710

一个用户定义的转换序列（12.3p4）中最多允许一个用户定义的转换。

您可以使用额外的大括号来使其工作：

```
 Foo* foo = new Foo[1] { {"a"} }; 
```

请注意，由于[clang 中的一个错误，](http://llvm.org/bugs/show_bug.cgi?id=15735)它需要`Foo`有一个默认构造函数`Foo::Foo()`，即使它实际上不会被调用。

# php - 如何以编程方式自动在 Woocommerce 中应用优惠券？

> ID：15968840
> 
> 赞同：1
> 
> 时间：2013-04-12T10:20:01.863
> 
> 标签：php, wordpress, woocommerce

嗨，我希望在购物车的总金额为 25 欧元或更多时自动向购物车应用 20% 的优惠券折扣 - 我查看了以前用户的代码并尝试对其进行修改并将其放置在 functions.php 中，但是它对我不起作用 - 关于我做错了什么/有什么帮助吗？这是我放入functions.php的代码；

```
/* Mod: 20% Discount for orders over €25 
Works with code added to child theme: woocommerce/cart/cart.php lines 13 - 14: which gets $subtotal of cart:
        global $subtotal;
        $subtotal= $woocommerce->cart->subtotal;
*/
add_action('woocommerce_before_cart_table', 'discount_when_order_greater_25');
function discount_when_order_greater_25( ) {
    global $woocommerce;
    global $subtotal;
    if( $subtotal >= 25 ) {
        $coupon_code = '20';
        if (!$woocommerce->cart->add_discount( sanitize_text_field( $coupon_code ))) {
            $woocommerce->show_messages();
        }
        echo '<div class="woocommerce_message"><strong>Your order is over €25 so a 20% Discount has been Applied!</strong> Your total order weight is <strong>' . $total_weight . '</strong> lbs.</div>';
    }
}

/* Mod: 20% Discount for orders under €25  */
add_action('woocommerce_before_cart_table', 'remove_discount_when_order_less_25');
function remove_discount_when_order_less_25( ) {
    global $woocommerce;
    global $subtotal;
    if( $subtotal < 25 ) {
        $coupon_code = '20';
        $woocommerce->cart->get_applied_coupons();
        if (!$woocommerce->cart->remove_coupons( sanitize_text_field( $coupon_code ))) {
            $woocommerce->show_messages();
        }
        $woocommerce->cart->calculate_totals();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-03T14:03:33.093

我一直在使用旨在执行此操作的免费 WooCommerce 插件时遇到麻烦（在 woo 商务车中自动应用优惠券代码）。其次，我在 Google 上轻松找到的论坛帖子不完整，并且引发了未处理的异常。

所以这是截至今天 2020-11-03 的工作代码示例。你可以把它放在你的 Wordpress 子主题的文件夹 functions.php 文件中：

```
add_action('woocommerce_before_cart', 'auto_apply_discount_coupon');
function auto_apply_discount_coupon() {
    $wc_coupon = new WC_Coupon('DEMO-90JOURS'); // get intance of wc_coupon which code is "DEMO-90JOURS"
    if (!$wc_coupon || !$wc_coupon->is_valid()) {
        return;
    }

    $coupon_code = $wc_coupon->get_code();
    if (!$coupon_code) {
        return;
    }

    global $woocommerce;
    if (!$woocommerce->cart->has_discount($coupon_code)) {
        // You can call apply_coupon() without checking if the coupon already has been applied,
        // because the function apply_coupon() will itself make sure to not re-add it if it was applied before.
        // However this if-check prevents the customer getting a error message saying
        // “The coupon has already been applied” every time the cart is updated.
        if (!$woocommerce->cart->apply_coupon($coupon_code)) {
            $woocommerce->wc_print_notices();
            return;
        }

        wc_print_notice('<div class="woocommerce_message"><strong>Le coupon ' . $coupon_code . ' a été appliqué avec succès!</strong></div>', 'notice');
    }
} 
```

# php - 如何从数组 XML 中获取值

> ID：15968841
> 
> 赞同：3
> 
> 时间：2013-04-12T10:20:04.927
> 
> 标签：php, xml, arrays, facebook-graph-api, xmpp

我想通过 jaxl.v3 开发与 facebook 的聊天。这是我的代码

```
 `$client->add_cb('on_chat_message', function($stanza) {

                 global $client;
                 // echo back incoming message stanza 
                 $stanza->to = $stanza->from;
                 $stanza->from = $client->full_jid->to_string();
                 print_r($stanza);
                 sendMessage($client); 
      });` 
```

这是我打印的结果`print_r($stanza)`：

![我的 PrtScn 的图像](https://i.stack.imgur.com/sTpTW.png)

我现在问什么：

*   如果我想获得 `[text]=>hi`价值。我该怎么写？我很久以前就尽力了，但我仍然无法`Hi`从这个数组中获得价值。请帮我解决它。谢谢，我期待尽快看到您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:26:27.127

尝试这个：

```
foreach($stanza->childrens as $child) {
   echo $child->text, '<br>';
} 
```

# ios - 越狱后，iOS应用程序会以root权限运行吗？

> ID：15968845
> 
> 赞同：5
> 
> 时间：2013-04-12T10:20:16.923
> 
> 标签：ios, xcode, jailbreak, root

iOS 设备越狱后，我们可以构建越狱应用程序（使用 theos），并将其安装在`/Applications`以 root 权限运行预加载应用程序的目录中。如果应用程序是用 Xcode 构建的，一旦安装，它就会进入`/private/var/mobile/Applications/`文件夹，该文件夹应该强制执行 Apple 沙箱（越狱前）。

所以，我的问题是：

1.  对于越狱设备，应用程序会`/private/var/mobile/Applications/`以root权限还是`mobile`用户权限执行？

2.  在 Android 的情况下，一旦获得 root 权限，应用程序必须通过执行`su`命令来获得 root 权限。iOS也是这样吗？

我想了解这两个开发选项（Theos / Xcode）之间的区别以及它如何影响我的应用程序可以执行的操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:28:05.640

长话短说：没有。

**越狱是获得root的必要条件，但不是充分条件。**默认情况下，应用程序仍将被沙盒化。

为了使您的应用程序以 root 权限运行，您可以做的是创建一个具有`root:wheel`所有权和权限的启动 shell 脚本，然后创建具有与权限相同的所有权（即设置其“setuid”位）`755`的实际可执行文件，然后从内部调用, 在调用之前。`7555``setuid(0);``main()``UIApplicationMain()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T11:23:15.503

不反对任何[H2CO3 所说](https://stackoverflow.com/a/15968998/119114)的，但要添加一些进一步的澄清......

*   使用 Xcode安装在`/private/var/mobile/Applications/`(†) 中的应用程序将以用户`mobile`权限运行，即使在越狱手机上也是如此。

*   即使在越狱的手机上，安装到`/private/var/mobile/Applications/`(†) 的应用程序也将被沙盒化，*几乎*(‡) 就像已入狱手机上的应用程序一样。因此，即使这些文件归用户所有，也不要读取其他（正常）应用程序的数据`mobile`。

*   有关 Cydia 等应用程序以 root 身份运行的过程的详细描述，[请参阅此答案](https://stackoverflow.com/a/8796556/119114)。或者，只需 ssh 进入你的手机，然后看看`/Applications/Cydia.app/`你自己。

*   [如果您只是将应用程序（不执行H2CO3 建议](https://stackoverflow.com/a/15968998/119114)的操作）复制/安装到`/Applications/`，它不会被沙箱化，但仍会以`mobile`(UID=501) 权限运行：

```
iPhone5:~ root# cd /Applications

iPhone5:/Applications root# ls -altr ./HelloJB.app/
total 220
-rw-r--r--  1 root wheel   711 Apr  3 20:36 entitlements.xml
-rw-r--r--  1 root wheel   297 Apr  3 20:36 entitlements-daemon.xml
-rw-r--r--  1 root wheel  7972 Apr  3 20:36 embedded.mobileprovision
-rw-r--r--  1 root wheel 58755 Apr  3 20:36 date.zip
-rw-r--r--  1 root wheel   485 Apr  3 20:36 ResourceRules.plist
-rw-r--r--  1 root wheel     8 Apr  3 20:36 PkgInfo
-rw-r--r--  1 root wheel  1226 Apr  3 20:36 Info.plist
-rw-r--r--  1 root wheel 10960 Apr  3 20:36 Icon\@2x.png
-rw-r--r--  1 root wheel  8328 Apr  3 20:36 Icon.png
-rw-r--r--  1 root wheel   451 Apr  3 20:36 HelloJB.plist
-rwxr-xr-x  1 root wheel 61088 Apr  3 20:36 HelloJB*
-rwxr-xr-x  1 root wheel 42688 Apr  3 20:36 HelloDaemon*
drwxr-xr-x  2 root wheel   136 Apr  3 20:36 en.lproj/
drwxr-xr-x  2 root wheel   102 Apr  3 20:36 _CodeSignature/
drwxr-xr-x  4 root wheel   544 Apr  3 20:36 ./
drwxrwxr-x 54 root admin  1904 Apr  5 02:14 ../

iPhone5:/Applications root# ps -Aef | grep HelloJB
  501  9412     1   0   0:00.00 ??         0:00.33 /Applications/HelloJB.app/HelloJB

iPhone5:/Applications root# grep mobile /etc/passwd
mobile:*:501:501:Mobile User:/var/mobile:/bin/sh 
```

(‡) 这是一个[很好的讨论，由 Saurik 提供，关于不同的越狱如何影响沙盒](https://news.ycombinator.com/item?id=4127801)。长话短说：这取决于。

* * *

**(†) 更新**：在最新版本的 iOS 中，第 3 方应用程序的位置已移至`/var/mobile/Containers`，随后移至`/var/containers/`，但仍然存在相同的基本沙盒问题。

# sql - 如何在使用两个数据库的系统中找到触发器？

> ID：15968856
> 
> 赞同：0
> 
> 时间：2013-04-12T10:21:11.100
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我在 SQL Server 2008 R2 中创建了一个触发器。我在那个触发器中使用了两个数据库的表。我试图在`Programmability -> Database Triggers`两个数据库中找到它，但我没有找到它。谁能帮我找到它？我什至忘记了它的名字（我几周前创建的）。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:40:45.747

以下查询将列出数据库中的所有触发器，最近创建的触发器位于列表顶部：

```
SELECT name,create_date 
FROM sys.triggers 
ORDER BY create_date DESC 
```

边注：

触发器没有出现，`Programmability > Database Triggers`因为该区域包含链接到数据库的触发器（如 DDL 触发器）。标准触发器附加到数据库表并显示在 SSMS 树部分的拥有表下方`Tables`- 它们没有单独列出。

# c# - Web应用场景中NHibernate乐观并发的问题

> ID：15968861
> 
> 赞同：2
> 
> 时间：2013-04-12T10:21:29.047
> 
> 标签：c#, nhibernate, web-applications, dto, optimistic-concurrency

我正在使用 Version 字段来控制 ASP.NET MVC 4 应用程序中的并发性。

映射：

```
 <class name="User" table="Users">
        <id name="Id">
          <generator class="native"/>
        </id>
        <version name="Version" column="Version"/>
... other fields omitted for brevity... 
```

实体：

```
 public class User
    {
            public virtual int Id { get; set; }
            public virtual int Version { get; set; }
... other fields omitted for brevity... 
```

我正在使用以下方法：

*   按 Id 读取实体并映射到我的 UserDto 实体（Dto 用于数据传输对象模式），还包括 Version 字段
*   显示用于编辑 UserDto 实体的表单
*   接收 POSTed UserDto 实体

然后我执行以下操作：

```
 // read the original entity from the database using my repository wrapper around NHibernate
        var rep = RepositoryFactory.Create<User>(currentUnitOfWork);
        User originalEntity = rep.GetById(userDto.Id);

        // optimistic lock control - keep the version as the user saw it
        originalEntity.Version = userDto.Version;
... other fields omitted for brevity...

        rep.Update(originalEntity); 
```

问题是，即使 userDto.Version 与 originalEntity.Version 不匹配，NHibernate 也会忽略我的 userDto.Version 并使用 originalEntity.Version（显然，来自一级缓存，因为刚刚读取了实体）。这种行为使我的版本字段完全无用。

**如何强制 NHibernate 使用我提供的版本值而不是缓存的值？**

此外，以某种方式使版本控制对使用我的存储库的其他程序员更加透明会很棒，但目前我不知道如何让它自动从接收到的实体中获取版本并强制 NHibernate 在没有程序员的情况下使用它甚至注意到它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:07:00.583

您需要意识到的是，以下示例中的乐观并发仅在作为**此**Web 请求的一部分创建的 ISession 的范围内工作。因此，如果在此请求中 User 的 Version 值为 5，那么它将用于确保 User 行没有被更新。

```
 // read the original entity from the database using my repository wrapper around NHibernate
    var rep = RepositoryFactory.Create<User>(currentUnitOfWork);
    User originalEntity = rep.GetById(userDto.Id);

    // optimistic lock control - keep the version as the user saw it
    originalEntity.Version = userDto.Version;
    ... other fields omitted for brevity...

    rep.Update(originalEntity); 
```

因此，要获得所需的行为，您需要做

```
User originalEntity = rep.GetById(userDto.Id);
if (originalEntity.Version != userDto.Version) throw new ConcurrencyException(); 
```

如[文档](http://nhforge.org/doc/nh/en/#transactions-optimistic-detached)中所述，我希望您更愿意调用与以下内容松散对齐的内容

```
var @object = userDto.ToUser();
myisession.SaveOrUpdate(@object); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T15:42:33.647

我知道这是一个老问题，但我会在这里保留我通常的方法。

这是使用 ORM 时已知的“问题”。NHibernate 和实体框架都遇到了这个“问题”，这是因为 ORM 在内部跟踪版本值，而不是使用属性返回的值。与 EF 不同，您可以使用 Array.Copy 复制 byte[] 值，在 NHibernate 中，我通常将实体从会话中逐出，然后进行更新，这向 NHibernate 表明您正在更新现有实体，但他将使用您刚刚分配的版本开始跟踪。

这是一个代码片段：

```
public void Edit(int id, string description, DateTime version)
{
    using (var session = sessionFactory.OpenSession())
    using (var tx = session.BeginTransaction())
    {
        var record = session.Get<Record>(id);
        record.Version = version;
        record.Description = description;

        session.Evict(record);  //  evict the object from the session
        session.Update(record); //  NHibernate will attach the object, and will use your version

        tx.Commit();
    }
} 
```

如果您像我通常在模型类（[示例](https://github.com/gravity00/SimplePersistence/blob/master/SimplePersistence/SimplePersistence.Model/IHaveVersionAsLong.cs)）中那样使用接口，您可以轻松创建一些扩展方法，使人们更难忘记。

据我所知，我没有发现这种方法有任何问题，但如果您发现任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T10:47:07.347

你可以看看@[这个](http://weblogs.asp.net/stefansedich/archive/2008/10/01/set-the-value-of-a-version-column-in-nhibernate-manually.aspx)

但是，由于拦截器是旧概念，您可以在自定义事件侦听器中扩展 DefaultUpdateEventListener 并覆盖 OnSaveOrUpdate 方法，如下所示

```
var source = @event.Session;
var entity = @event.Entity;
var persister = @event.Session.GetEntityPersister(@event.EntityName, entity);
if (persister.IsVersioned)
{
    var mode = source.GetSessionImplementation().EntityMode;
    var id = persister.GetIdentifier(entity, mode);

    var version = persister.GetVersion(entity, mode);
    var currentVersion = persister.GetCurrentVersion(id, source);

    if (!version.Equals(currentVersion))
    {
        throw new StaleObjectStateException(persister.EntityName, id);
    }
} 
```

这里唯一令人头疼的是 GetCurrntVersion 发送一个数据库调用。因此，对于云应用程序来说，这不是一个非常合适的解决方案，因为每次通话都要计费。

或者，您可以从会话中*逐出对象。*但是，您将失去一级缓存优势。

如果我找到任何更好的解决方案，将发布。

# java - 如何找到sdcard的位置

> ID：15968865
> 
> 赞同：0
> 
> 时间：2013-04-12T10:21:41.650
> 
> 标签：java, php, android, database, sd-card

当我检查一个 android 应用程序时...我发现应用程序中的视频上传到 sdcard 中..例如：mnt/sdcard...有没有办法找到这个 sdcard 的 url...因为...我的需要是报告此非法内容..有什么办法请帮助....我经历了但我没有得到正确的答案...请帮助.. [我如何以编程方式安装 sdcard？](https://stackoverflow.com/questions/3716105/how-can-i-mount-sdcard-programmatic?rq=1)

[程序化 sdcard 挂载/卸载](https://stackoverflow.com/questions/2357282/programmatic-sdcard-mounting-unmounting)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:25:07.513

## 以编程方式挂载 SDCARD..

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
 Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

* * *

查找文件的位置很简单：

我的 SD 卡/我的文件夹名称/视频中有视频，然后路径是

```
File videoPath = new File(Environment.getExternalStorageDirectory()+"/myFolderName/video1.mp4"); 
```

* * *

## 检查外部存储是否可用？

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:29:53.920

试试这个..

```
Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED) {
File f = Environment.getExternalStorageDirectory(); 
```

这将为您提供外部存储路径。您也可以使用此：“/mnt/sdcard” 如果仍然不清楚，请查看此链接：[链接](https://stackoverflow.com/questions/5694933/find-an-external-sd-card-location)

希望这会帮助你。

# java - How to convert SQLServer "CAST(0xBB330B00 AS Date)" to MySQL syntax

> ID：15968869
> 
> 赞同：0
> 
> 时间：2013-04-12T10:21:52.007
> 
> 标签：java, mysql, sql, sql-server, matlab

I have a script from an SQL Server database that includes statements such as this:

```
INSERT SPECIAL_DAYS_TABLE (Date, Description) VALUES (CAST(0xB5330B00 AS Date), 'Christmas') 
```

My question: how can I convert this into valid MySQL syntax? The cast part returns a null date value...

Unfortunately, I have no access to the SQLServer database, do direct data import is impossible - the script is the only thing that I can work with.

Note: there are hundreds of such statements, so I need to programmatically convert the cast part either in MySQL or outside MySQL (C/Java/Matlab/VB).

EDIT: answer closed as per [how to cast the hexadecimal to varchar(datetime)?](https://stackoverflow.com/questions/4946292/how-to-cast-the-hexadecimal-to-varchardatetime) and the correction by Martin in the comment below

Apparently, the 0xB5330B00 should be interpreted as 0x000B33B5 (i.e., reverse the bytes) = 734133 (days since 0001-Jan-01)

```
CAST('0001-01-01 00:00:00' + INTERVAL CAST(0x000B33B5 AS SIGNED) DAY as date) => 2010-12-28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:57:23.377

根据[如何将十六进制转换为 varchar(datetime)？](https://stackoverflow.com/questions/4946292/how-to-cast-the-hexadecimal-to-varchardatetime)以及 Martin 在下面的评论中的更正，显然，0xB5330B00 应解释为 0x000B33B5（即反转字节）= 734133（自 0001 年 1 月 1 日以来的天数）

所以完整的答案是：

```
INSERT SPECIAL_DAYS_TABLE (Date, Description) VALUES (CAST('0001-01-01' + INTERVAL 0x000B33B5 DAY as date), 'Christmas') 
```

请注意此问题/解决方案与上面引用的问题/解决方案之间的差异：

*   对于`datetime`，基准 SQLServer 日期是 1900-01-01；因为`date`它是 0001-01-01
*   对于`datetime`，十六进制格式有 8 个字节*不能*颠倒（最左边 4 个字节是日期，最右边 4 个字节是时间）；因为`date`只有 4 个字节*需要*反转

总之，这是一个将 SQLServer`date`和`datetime`对象转换为等效 MySql 语法的示例 Matlab 代码：

```
% Convert dates in MATLAB from SQLServer => MySQL

% Datetime: byte order is NOT reversed & start date is 1/1/1900
str = regexprep(str, 'CAST\(0x(........)(........) AS DateTime\)', ...
                     'CAST(''1900-01-01'' + INTERVAL 0x$1 DAY + INTERVAL 0x$2/300 second as datetime)');

% Date: byte order is reversed & start date is 1/1/0001
str = regexprep(str, 'CAST\(0x(..)(..)(..)(..) AS Date\)', ...
                     'CAST(''0001-01-01'' + INTERVAL 0x$4$3$2$1 DAY as date)'); 
```

这个片段可以很容易地适应其他编程语言。

# vim - Vim cursor position on new split window

> ID：15968880
> 
> 赞同：4
> 
> 时间：2013-04-12T10:22:14.623
> 
> 标签：vim

The default behaviour keeps the cursor on the original split window, so I have to press ctrl+w hjkl to switch to the new one. How can I set vim to to this automatically for me, whenever i open a new split pane?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T10:35:23.033

当您`:split filename`时，新窗口（包含`filename`）将处于活动状态。`:split`只是当你/`<C-w>s`当前窗口一分为二时，你对什么是“原始”的看法与 Vim 的行为不同。

您可以使用以下选项影响 Vim 的行为（对于相同缓冲区和不同文件的拆分）：

```
:set splitbelow
:set splitright 
```

如果您只想更改相同缓冲区拆分的行为，则必须`<C-w>s`使用映射覆盖默认命令；在那里，您可以使用该`:belowright split`命令来影响行为，而无需修改上述选项。

# java - how to zip a folder itself using java

> ID：15968883
> 
> 赞同：77
> 
> 时间：2013-04-12T10:22:20.857
> 
> 标签：java, zip, directory

Suppose I have the following directory structure.

```
D:\reports\january\ 
```

Inside january there are suppose two excel files say A.xls and B.xls. There are many places where it has been written about how to zip files using `java.util.zip`. But I want to zip the january folder itself inside reports folder so that both **january** and **january.zip** will be present inside reports. (***That means when I unzip the january.zip file I should get the january folder***).

Can anyone please provide me the code to do this using `java.util.zip`. Please let me know whether this can be more easily done by using other libraries.

Thanks a lot...

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-12T10:51:44.183

您是否尝试过[Zeroturnaround Zip](https://github.com/zeroturnaround/zt-zip)库？真的很整洁！压缩文件夹只是一个衬里：

```
ZipUtil.pack(new File("D:\\reports\\january\\"), new File("D:\\reports\\january.zip")); 
```

（感谢[Oleg Šelajev](https://stackoverflow.com/users/1087978/oleg-elajev)的例子）

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2015-08-17T13:43:39.217

这是 Java 8+ 示例：

```
public static void pack(String sourceDirPath, String zipFilePath) throws IOException {
    Path p = Files.createFile(Paths.get(zipFilePath));
    try (ZipOutputStream zs = new ZipOutputStream(Files.newOutputStream(p))) {
        Path pp = Paths.get(sourceDirPath);
        Files.walk(pp)
          .filter(path -> !Files.isDirectory(path))
          .forEach(path -> {
              ZipEntry zipEntry = new ZipEntry(pp.relativize(path).toString());
              try {
                  zs.putNextEntry(zipEntry);
                  Files.copy(path, zs);
                  zs.closeEntry();
            } catch (IOException e) {
                System.err.println(e);
            }
          });
    }
} 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-04-12T11:41:46.293

打包即可轻松解决，**`java.util.Zip`**无需任何额外`Jar`文件

只需复制以下代码并`run it`使用您的`IDE`

```
//Import all needed packages
package general;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class ZipUtils {

    private List <String> fileList;
    private static final String OUTPUT_ZIP_FILE = "Folder.zip";
    private static final String SOURCE_FOLDER = "D:\\Reports"; // SourceFolder path

    public ZipUtils() {
        fileList = new ArrayList < String > ();
    }

    public static void main(String[] args) {
        ZipUtils appZip = new ZipUtils();
        appZip.generateFileList(new File(SOURCE_FOLDER));
        appZip.zipIt(OUTPUT_ZIP_FILE);
    }

    public void zipIt(String zipFile) {
        byte[] buffer = new byte[1024];
        String source = new File(SOURCE_FOLDER).getName();
        FileOutputStream fos = null;
        ZipOutputStream zos = null;
        try {
            fos = new FileOutputStream(zipFile);
            zos = new ZipOutputStream(fos);

            System.out.println("Output to Zip : " + zipFile);
            FileInputStream in = null;

            for (String file: this.fileList) {
                System.out.println("File Added : " + file);
                ZipEntry ze = new ZipEntry(source + File.separator + file);
                zos.putNextEntry(ze);
                try {
                    in = new FileInputStream(SOURCE_FOLDER + File.separator + file);
                    int len;
                    while ((len = in .read(buffer)) > 0) {
                        zos.write(buffer, 0, len);
                    }
                } finally {
                    in.close();
                }
            }

            zos.closeEntry();
            System.out.println("Folder successfully compressed");

        } catch (IOException ex) {
            ex.printStackTrace();
        } finally {
            try {
                zos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public void generateFileList(File node) {
        // add file only
        if (node.isFile()) {
            fileList.add(generateZipEntry(node.toString()));
        }

        if (node.isDirectory()) {
            String[] subNote = node.list();
            for (String filename: subNote) {
                generateFileList(new File(node, filename));
            }
        }
    }

    private String generateZipEntry(String file) {
        return file.substring(SOURCE_FOLDER.length() + 1, file.length());
    }
} 
```

参考[mkyong](http://www.mkyong.com/java/how-to-compress-files-in-zip-format/) ..我更改了当前问题要求的代码

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-02-02T16:01:49.207

这是一个非常简洁的 Java 7+ 解决方案，它完全依赖于普通的 JDK 类，不需要第三方库：

```
public static void pack(final Path folder, final Path zipFilePath) throws IOException {
    try (
            FileOutputStream fos = new FileOutputStream(zipFilePath.toFile());
            ZipOutputStream zos = new ZipOutputStream(fos)
    ) {
        Files.walkFileTree(folder, new SimpleFileVisitor<Path>() {
            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
                zos.putNextEntry(new ZipEntry(folder.relativize(file).toString()));
                Files.copy(file, zos);
                zos.closeEntry();
                return FileVisitResult.CONTINUE;
            }

            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
                zos.putNextEntry(new ZipEntry(folder.relativize(dir).toString() + "/"));
                zos.closeEntry();
                return FileVisitResult.CONTINUE;
            }
        });
    }
} 
```

它复制 中的所有文件`folder`，包括空目录，并在 中创建一个 zip 存档`zipFilePath`。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-04-16T13:05:03.753

Java 7+，commons.io

```
public final class ZipUtils {

    public static void zipFolder(final File folder, final File zipFile) throws IOException {
        zipFolder(folder, new FileOutputStream(zipFile));
    }

    public static void zipFolder(final File folder, final OutputStream outputStream) throws IOException {
        try (ZipOutputStream zipOutputStream = new ZipOutputStream(outputStream)) {
            processFolder(folder, zipOutputStream, folder.getPath().length() + 1);
        }
    }

    private static void processFolder(final File folder, final ZipOutputStream zipOutputStream, final int prefixLength)
            throws IOException {
        for (final File file : folder.listFiles()) {
            if (file.isFile()) {
                final ZipEntry zipEntry = new ZipEntry(file.getPath().substring(prefixLength));
                zipOutputStream.putNextEntry(zipEntry);
                try (FileInputStream inputStream = new FileInputStream(file)) {
                    IOUtils.copy(inputStream, zipOutputStream);
                }
                zipOutputStream.closeEntry();
            } else if (file.isDirectory()) {
                processFolder(file, zipOutputStream, prefixLength);
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-12T11:01:34.727

我通常使用我曾经为此任务编写的辅助类：

```
import java.util.zip.*;
import java.io.*;

public class ZipExample {
    public static void main(String[] args){
        ZipHelper zippy = new ZipHelper();
        try {
            zippy.zipDir("folderName","test.zip");
        } catch(IOException e2) {
            System.err.println(e2);
        }
    }
}

class ZipHelper  
{
    public void zipDir(String dirName, String nameZipFile) throws IOException {
        ZipOutputStream zip = null;
        FileOutputStream fW = null;
        fW = new FileOutputStream(nameZipFile);
        zip = new ZipOutputStream(fW);
        addFolderToZip("", dirName, zip);
        zip.close();
        fW.close();
    }

    private void addFolderToZip(String path, String srcFolder, ZipOutputStream zip) throws IOException {
        File folder = new File(srcFolder);
        if (folder.list().length == 0) {
            addFileToZip(path , srcFolder, zip, true);
        }
        else {
            for (String fileName : folder.list()) {
                if (path.equals("")) {
                    addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip, false);
                } 
                else {
                     addFileToZip(path + "/" + folder.getName(), srcFolder + "/" + fileName, zip, false);
                }
            }
        }
    }

    private void addFileToZip(String path, String srcFile, ZipOutputStream zip, boolean flag) throws IOException {
        File folder = new File(srcFile);
        if (flag) {
            zip.putNextEntry(new ZipEntry(path + "/" +folder.getName() + "/"));
        }
        else {
            if (folder.isDirectory()) {
                addFolderToZip(path, srcFile, zip);
            }
            else {
                byte[] buf = new byte[1024];
                int len;
                FileInputStream in = new FileInputStream(srcFile);
                zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
                while ((len = in.read(buf)) > 0) {
                    zip.write(buf, 0, len);
                }
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-11-13T06:31:19.227

增强的 Java 8+ 示例（来自[Nikita Koksharov 的回答](https://stackoverflow.com/a/32052016/2073920)）

```
public static void pack(String sourceDirPath, String zipFilePath) throws IOException {
    Path p = Files.createFile(Paths.get(zipFilePath));
    Path pp = Paths.get(sourceDirPath);
    try (ZipOutputStream zs = new ZipOutputStream(Files.newOutputStream(p));
        Stream<Path> paths = Files.walk(pp)) {
        paths
          .filter(path -> !Files.isDirectory(path))
          .forEach(path -> {
              ZipEntry zipEntry = new ZipEntry(pp.relativize(path).toString());
              try {
                  zs.putNextEntry(zipEntry);
                  Files.copy(path, zs);
                  zs.closeEntry();
            } catch (IOException e) {
                System.err.println(e);
            }
          });
    }
} 
```

`Files.walk`已被包裹在`try with resources`块中，以便可以关闭流。这解决了由 标识的阻止程序问题`SonarQube`。感谢@Matt Harrison 指出这一点。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-04-12T10:47:53.043

我会使用[Apache Ant](http://ant.apache.org)，它有一个 API 可以从 Java 代码而不是 XML 构建文件调用任务。

```
Project p = new Project();
p.init();
Zip zip = new Zip();
zip.setProject(p);
zip.setDestFile(zipFile); // a java.io.File for the zip you want to create
zip.setBasedir(new File("D:\\reports"));
zip.setIncludes("january/**");
zip.perform(); 
```

在这里，我告诉它从基本目录开始`D:\reports`并压缩`january`文件夹和其中的所有内容。生成的 zip 文件中的路径将与相对于 的原始路径相同`D:\reports`，因此它们将包含`january`前缀。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-30T11:57:24.903

使用[zip4j](https://github.com/srikanth-lingala/zip4j)你可以简单地做到这一点

```
ZipFile zipfile = new ZipFile(new File("D:\\reports\\january\\filename.zip"));
zipfile.addFolder(new File("D:\\reports\\january\\")); 
```

它将存档您的文件夹及其中的所有内容。

使用`.extractAll`方法将其全部取出：

```
zipfile.extractAll("D:\\destination_directory"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-22T08:03:08.253

尝试这个：

```
 import java.io.File;

 import java.io.FileInputStream;

 import java.io.FileOutputStream;

 import java.util.zip.ZipEntry;

 import java.util.zip.ZipOutputStream;

  public class Zip {

public static void main(String[] a) throws Exception {

    zipFolder("D:\\reports\\january", "D:\\reports\\january.zip");

  }

  static public void zipFolder(String srcFolder, String destZipFile) throws Exception {
    ZipOutputStream zip = null;
    FileOutputStream fileWriter = null;
    fileWriter = new FileOutputStream(destZipFile);
    zip = new ZipOutputStream(fileWriter);
    addFolderToZip("", srcFolder, zip);
    zip.flush();
    zip.close();
  }
  static private void addFileToZip(String path, String srcFile, ZipOutputStream zip)
      throws Exception {
    File folder = new File(srcFile);
    if (folder.isDirectory()) {
      addFolderToZip(path, srcFile, zip);
    } else {
      byte[] buf = new byte[1024];
      int len;
      FileInputStream in = new FileInputStream(srcFile);
      zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
      while ((len = in.read(buf)) > 0) {
        zip.write(buf, 0, len);
      }
    }
  }

  static private void addFolderToZip(String path, String srcFolder, ZipOutputStream zip)
      throws Exception {
    File folder = new File(srcFolder);

    for (String fileName : folder.list()) {
      if (path.equals("")) {
        addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
      } else {
        addFileToZip(path + "/" + folder.getName(), srcFolder + "/" +   fileName, zip);
      }
    }
  }

   } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-30T04:02:49.110

我发现这个解决方案对我来说非常好。不需要任何第三方 api

'test' 实际上是一个文件夹，里面有很多文件。

```
String folderPath= "C:\Users\Desktop\test";
String zipPath = "C:\Users\Desktop\test1.zip";

private boolean zipDirectory(String folderPath, String zipPath) throws IOException{

        byte[] buffer = new byte[1024];
        FileInputStream fis = null;
        ZipOutputStream zos = null;

        try{
            zos = new ZipOutputStream(new FileOutputStream(zipPath));
            updateSourceFolder(new File(folderPath));

            if (sourceFolder == null) {
                zos.close();
                return false;
            }
            generateFileAndFolderList(new File(folderPath));

            for (String unzippedFile: fileList) {
                System.out.println(sourceFolder + unzippedFile);

                ZipEntry entry = new ZipEntry(unzippedFile);
                zos.putNextEntry(entry);

                if ((unzippedFile.substring(unzippedFile.length()-1)).equals(File.separator))
                    continue;
                try{
                    fis = new FileInputStream(sourceFolder + unzippedFile);
                    int len=0;
                    while ((len = fis.read(buffer))>0) {
                        zos.write(buffer,0,len);
                    }
                } catch(IOException e) {
                    return false;
                } finally {
                    if (fis != null)
                        fis.close();
                }
            }
            zos.closeEntry();
        } catch(IOException e) {
            return false;
        } finally {
            zos.close();
            fileList = null;
            sourceFolder = null;
        }
        return true;
    }

    private void generateFileAndFolderList(File node) {
        if (node.isFile()) {
            fileList.add(generateZipEntry(node.getAbsoluteFile().toString()));
        }
        if (node.isDirectory()) {
            String dir = node.getAbsoluteFile().toString();
            fileList.add(dir.substring(sourceFolder.length(), dir.length()) + File.separator);

            String[] subNode = node.list();
            for (String fileOrFolderName : subNode) {
                generateFileAndFolderList(new File(node, fileOrFolderName));
            }
        }
    }

    private void updateSourceFolder(File node) {
        if (node.isFile() || node.isDirectory()) {
            String sf = node.getAbsoluteFile().toString();
            sourceFolder = sf.substring(0, (sf.lastIndexOf("/") > 0 ? sf.lastIndexOf("/") : sf.lastIndexOf("\\")));
            sourceFolder += File.separator;
        } else
            sourceFolder = null;
    }

    private String generateZipEntry(String file) {
        return file.substring(sourceFolder.length(), file.length());
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-09T10:59:56.330

Java 6 +

```
import java.io.*;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class Zip {

    private static final FileFilter FOLDER_FILTER = new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isDirectory();
        }
    };

    private static final FileFilter FILE_FILTER = new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isFile();
        }
    };

    private static void compress(File file, ZipOutputStream outputStream, String path) throws IOException {

        if (file.isDirectory()) {
            File[] subFiles = file.listFiles(FILE_FILTER);
            if (subFiles != null) {
                for (File subFile : subFiles) {
                    compress(subFile, outputStream, new File(path, subFile.getName()).getAbsolutePath());
                }
            }
            File[] subDirs = file.listFiles(FOLDER_FILTER);
            if (subDirs != null) {
                for (File subDir : subDirs) {
                    compress(subDir, outputStream, new File(path, subDir.getName()).getAbsolutePath());
                }
            }
        } else if (file.exists()) {
            outputStream.putNextEntry(new ZipEntry(path));
            FileInputStream inputStream = new FileInputStream(file);
            byte[] buffer = new byte[1024];
            int len;
            while ((len = inputStream.read(buffer)) >= 0) {
                outputStream.write(buffer, 0, len);
            }
            outputStream.closeEntry();
        }
    }

    public static void compress(String dirPath, String zipFilePath) throws IOException {
        File file = new File(dirPath);
        final ZipOutputStream outputStream = new ZipOutputStream(new FileOutputStream(zipFilePath));
        compress(file, outputStream, "/");
        outputStream.close();
    }

} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-06-25T14:29:28.490

此方法压缩文件夹并将所有子文件和文件夹（包括空文件夹）添加到 zip 文件中。

```
void zipFolder(Path sourceDir, Path targetFile) throws IOException {
    ZipDirectoryVisitor zipVisitor = new ZipDirectoryVisitor(sourceDir);
    Files.walkFileTree(sourceDir, zipVisitor);
    FileOutputStream fos = new FileOutputStream(targetFile.toString());
    ZipOutputStream zos = new ZipOutputStream(fos);
    byte[] buffer = new byte[1024];
    for (ZipEntry entry : zipVisitor.getZipEntries()) {
        zos.putNextEntry(entry);
        Path curFile = Paths.get(sourceDir.getParent().toString(), entry.toString());
        if (!curFile.toFile().isDirectory()) {
            FileInputStream in = new FileInputStream(Paths.get(sourceDir.getParent().toString(), entry.toString()).toString());
            int len;
            while ((len = in.read(buffer)) > 0) {
                zos.write(buffer, 0, len);
            }
            in.close();
        }
        zos.closeEntry();
    }
    zos.close();

} 
```

这是 ZipDirectoryVisitor 的实现：

```
class ZipDirectoryVisitor extends SimpleFileVisitor<Path> {
    private Path dirToZip;
    private List<ZipEntry> zipEntries; // files and folders inside source folder as zip entries
    public ZipDirectoryVisitor(Path dirToZip) throws IOException {
        this.dirToZip = dirToZip;
        zipEntries = new ArrayList<>();
    }

    @Override
    public FileVisitResult visitFile(Path path, BasicFileAttributes basicFileAttributes) throws IOException {
        // According to zip standard backslashes
        // should not be used in zip entries
        String zipFile = dirToZip.getParent().relativize(path).toString().replace("\\", "/");
        ZipEntry entry = new ZipEntry(zipFile);
        zipEntries.add(entry);
        return FileVisitResult.CONTINUE;
    }

    @Override
    public FileVisitResult preVisitDirectory(Path path, BasicFileAttributes basicFileAttributes) throws IOException {
        String zipDir = dirToZip.getParent().relativize(path).toString().replace("\\", "/");
        // Zip directory entries should end with a forward slash
        ZipEntry entry = new ZipEntry(zipDir + "/");
        zipEntries.add(entry);
        return FileVisitResult.CONTINUE;
    }

    @Override
    public FileVisitResult visitFileFailed(Path path, IOException e) throws IOException {
        System.err.format("Could not visit file %s while creating a file list from file tree", path);
        return FileVisitResult.TERMINATE;
    }

    public List<ZipEntry> getZipEntries() {
        return zipEntries;
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-19T10:41:41.383

试试这个 zip("C:\testFolder", "D:\testZip.zip")

```
public void zip( String sourcDirPath,  String zipPath) throws IOException {
  Path zipFile = Files.createFile(Paths.get(zipPath));

  Path sourceDirPath = Paths.get(sourcDirPath);
  try (ZipOutputStream zipOutputStream = new ZipOutputStream(Files.newOutputStream(zipFile));
       Stream<Path> paths = Files.walk(sourceDirPath)) {
      paths
              .filter(path -> !Files.isDirectory(path))
              .forEach(path -> {
                  ZipEntry zipEntry = new ZipEntry(sourceDirPath.relativize(path).toString());
                  try {
                      zipOutputStream.putNextEntry(zipEntry);
                      Files.copy(path, zipOutputStream);
                      zipOutputStream.closeEntry();
                  } catch (IOException e) {
                      System.err.println(e);
                  }
              });
  }

  System.out.println("Zip is created at : "+zipFile);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-12T04:05:31.043

改进@Nikita Koksharov 的代码在打包空目录时遇到问题。

```
private void zipDirectory(OutputStream outputStream, Path directoryPath) throws IOException {
    try (ZipOutputStream zs = new ZipOutputStream(outputStream)) {
        Path pp = directoryPath;
        Files.walk(pp)
                .forEach(path -> {
                    try {
                        if (Files.isDirectory(path)) {
                            zs.putNextEntry(new ZipEntry(pp.relativize(path).toString() + "/"));
                        } else {
                            ZipEntry zipEntry = new ZipEntry(pp.relativize(path).toString());
                            zs.putNextEntry(zipEntry);
                            Files.copy(path, zs);
                            zs.closeEntry();
                        }
                    } catch (IOException e) {
                        System.err.println(e);
                    }
                });
    }
} 
```

测试使用

```
 FileOutputStream zipOutput = new FileOutputStream("path_to_file.zip");
    Path pathOutput = Path.of("path_directory_fid");
    zipDirectory(outputStream, pathOutput); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-05T07:17:47.467

我已经修改了上述解决方案并替换`Files.walk`为`Files.list`. 这也假设您要压缩的目录仅包含文件而不包含任何子目录。

```
private void zipDirectory(Path dirPath) throws IOException {
        String zipFilePathStr = dirPath.toString() + ".zip";
        Path zipFilePath = Files.createFile(Paths.get(zipFilePathStr));

        try (ZipOutputStream zs = new ZipOutputStream(Files.newOutputStream(zipFilePath))) {
            Files.list(dirPath)
                .filter(filePath-> !Files.isDirectory(filePath))
                .forEach(filePath-> {
                    ZipEntry zipEntry = new ZipEntry(dirPath.relativize(filePath).toString());
                    try {
                        zs.putNextEntry(zipEntry);
                        Files.copy(filePath, zs);
                        zs.closeEntry();
                    }
                    catch (IOException e) {
                        System.err.println(e);
                    }
                });
        }
    } 
```

# javascript - Google Maps: clickable polyline icon

> ID：15968898
> 
> 赞同：5
> 
> 时间：2013-04-12T10:23:07.890
> 
> 标签：javascript, google-maps, events, polyline

I have two markers with a polyline connecting the two. I have click events on the markers and the polyline, but i was trying to make the polyline easier to click without placing a new marker or increasing it's strokeWeight. So I created a circular icon and placed on the polyline, but I can't make it clickable. Is it possible?

Saw this thread but doesn't give any specifics on how the icon is clickable. I searched it's code source but he adds a KML layer. I didn't want to do that. [Google Maps: Attaching events on polyline icons](https://stackoverflow.com/questions/14823927/google-maps-attaching-events-on-polyline-icons)

Searched the google maps overlay API but didn't find any interface to listen to click events. [https://developers.google.com/maps/documentation/javascript/overlays#Polylines](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)

I also tried to attach an event listener but didn't work. I suspect it can't be done without adding an actual marker or an object but if someone else had a similar problem i would appreciate any tips :)

Thanks in advance!

My code:

```
var pathSymbol = {
    path: google.maps.SymbolPath.CIRCLE,
    scale: 8,
    strokeColor: '#228B22'
};

var conPath = new google.maps.Polyline({
    path: conCoord,
        strokeColor: "#228B22",
        strokeOpacity: 0.7,
        icons: [{
            icon: pathSymbol,
            offset: '50%'
        }],
        strokeWeight: 2
});

conPath.setMap(map);

google.maps.event.addListener(conPath, 'click', (function(l,conCoord) {
    return function() {
            infowindowPath.setContent("<b>Ligação "+connections[l].id);
        infowindowPath.setPosition(new google.maps.LatLngBounds(conCoord[1], conCoord[0]).getCenter());
            infowindowPath.open(map);
        }
})(l,conCoord)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T10:31:34.497

我也需要这个功能，但不幸的是这是不可能的——我几乎是肯定的（见我的[**演示**](http://jsfiddle.net/demoive/83jra/)）。我之所以这么说是因为：

1.  我尝试了很多不同的方式，但只有折线接收事件
2.  谷歌的文档中没有明确记录
3.  文档的以下部分意味着什么：

    从[**Symbols**](https://developers.google.com/maps/documentation/javascript/overlays#Symbols)[的文档中](https://developers.google.com/maps/documentation/javascript/overlays#Symbols)**：**

     **> **符号**是基于矢量的图像，可以显示在**标记**或**折线**对象上。

    从[**AddEventListener**](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)[上](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)**的文档：**

     **```
    addListener（实例：对象，事件名称：字符串，处理程序：函数）
    ```

    > 将给定的侦听器函数添加到给定对象实例的给定事件名称。返回可与 removeListener() 一起使用的此侦听器的标识符。**** 

 ****事件可以附加到**Object*实例***（例如*Marker*或*Polyline*）。由于*符号是在折***线上**渲染的基于矢量的图像，因此它们包含在其中，而不是正式的 Object 实例。显然，这使他们没有资格将事件附加到自己身上。

现在，我仍然怀疑的是，我上面的理性暗示符号是折线的一部分，这意味着它也应该接收与折线相连的相同事件。但是，在我的试验中，情况并非如此（[**此处演示**](http://jsfiddle.net/demoive/83jra/)：无论折线上的符号大小如何，它都不会收到任何事件）：

```
var mySymbol = {
    path: google.maps.SymbolPath.CIRCLE,
    scale: 25,
    strokeWeight: 5,
    fillOpacity: .2
};

var myPolyline = new google.maps.Polyline({
    icons: [{
        icon: mySymbol,
        fixedRotation: true,
        offset: '50%',
    }],
    path: [polylineCenter, polylineEnd],
    strokeColor: 'black',
    strokeOpacity: 1,
    strokeWeight: 5,
    map: myMap
});

// works since <myPolyline> is an instance of an Object
google.maps.event.addListener(myPolyline, 'click', function() {
    alert('Polyline clicked!');
});

// doesn't work :-( since <mySymbol> is an Object literal
google.maps.event.addListener(mySymbol, 'click', function() {
    alert('Symbol clicked!');
}); 
```****

# javascript - How to clear text area with a button in html using javascript?

> ID：15968911
> 
> 赞同：33
> 
> 时间：2013-04-12T10:24:01.423
> 
> 标签：javascript, html, button, textarea

I have button in html

```
<input type="button" value="Clear"> 
<textarea id='output' rows=20 cols=90></textarea> 
```

If I have an external javascript (.js) function, what should I write?

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-12T10:25:54.400

通过在按钮单击上添加功能来更改您的 html

```
 <input type="button" value="Clear" onclick="javascript:eraseText();"> 
    <textarea id='output' rows=20 cols=90></textarea> 
```

在你的 js 文件中试试这个：

```
function eraseText() {
    document.getElementById("output").value = "";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T10:32:34.743

您需要附加一个`click`事件处理程序并从该处理程序中清除 textarea 的内容。

HTML

```
<input type="button" value="Clear" id="clear"> 
<textarea id='output' rows=20 cols=90></textarea> 
```

JS

```
var input = document.querySelector('#clear');
var textarea = document.querySelector('#output');

input.addEventListener('click', function () {
    textarea.value = '';
}, false); 
```

这是[工作演示](http://cssdeck.com/labs/palvpxbe)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T10:26:43.503

**使用 jQuery 库，您可以执行以下操作：**

```
<input type="button" value="Clear" onclick="javascript: functionName();" > 
```

你只需要设置 onclick 事件，在这个 onclick 事件上调用你想要的函数。

```
function functionName()
{
    $("#output").val("");
} 
```

上面的函数将文本区域的值设置为空字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T05:56:44.567

你的 HTML

```
<input type="button" value="Clear" onclick="clearContent()"> 
<textarea id='output' rows=20 cols=90></textarea> 
```

你的 Javascript

```
function clearContent()
{
    document.getElementById("output").value='';
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-07-22T10:42:08.440

您可以简单地使用**ID**属性到表单并将`<textarea>`标签附加到表单，如下所示：

```
<form name="commentform" action="#" method="post" target="_blank" id="1321">
    <textarea name="forcom" cols="40" rows="5" form="1321" maxlength="188">
        Enter your comment here...
    </textarea>
    <input type="submit" value="OK">
    <input type="reset" value="Clear">
</form> 
```

# verilog - Asynchronous FIFO Design

> ID：15968912
> 
> 赞同：3
> 
> 时间：2013-04-12T10:24:04.693
> 
> 标签：verilog, fifo

I found the following piece of code in the internet , while searching for good FIFO design. From the link[SVN Code FIFO -Author Clifford E. Cummings](http://subversion.assembla.com/svn/ecpe-293-b/trunk/netfpga/lib/verilog/core/utils/src/small_async_fifo.v) . I did some research , I was not able to figure out why there are three pointers in the design ?I can read the code but what am I missing ?

```
 module sync_r2w #(parameter ADDRSIZE = 4)
 (output reg [ADDRSIZE:0] wq2_rptr,
 input [ADDRSIZE:0] rptr,
 input wclk, wrst_n);
 reg [ADDRSIZE:0] wq1_rptr;
 always @(posedge wclk or negedge wrst_n)
 if (!wrst_n) {wq2_rptr,wq1_rptr} <= 0;
 else {wq2_rptr,wq1_rptr} <= {wq1_rptr,rptr};
endmodule

module sync_w2r #(parameter ADDRSIZE = 4)
 (output reg [ADDRSIZE:0] rq2_wptr,
 input [ADDRSIZE:0] wptr,
 input rclk, rrst_n);
 reg [ADDRSIZE:0] rq1_wptr;
 always @(posedge rclk or negedge rrst_n)
 if (!rrst_n) {rq2_wptr,rq1_wptr} <= 0;
 else {rq2_wptr,rq1_wptr} <= {rq1_wptr,wptr};
endmodule 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T16:24:11.103

您在这里看到的是所谓的双列同步器。正如您提到的，这是一个异步 FIFO。这意味着 FIFO 的读取端和写入端不在同一个时钟域上。

如您所知，触发器需要满足建立和保持时序要求才能正常工作。当您将信号从一个时钟域驱动到另一个时钟域时，在一般情况下无法保证这一要求。

当您违反这些要求时，FF 会进入所谓的“亚稳定”状态，其中有一小段时间是不确定的，然后（或多或少）随机变为 1 或 0。但他们会这样做（这很重要）在不到一个时钟周期内。

这就是为什么这里有两层翻牌。第一个有机会进入亚稳定状态，但应该及时解决以被第二组翻牌干净地捕获。

这本身不足以跨时钟域传递多位值（地址指针）。如果不止一个位在同一时间发生变化，那么您无法确定另一侧的过渡是否干净。因此，在这些情况下，您经常会看到 FIFO 指针将采用格雷编码。这意味着计数器的每个增量一次最多更改一位。

例如，而不是 00 -> 01 -> 10 -> 11 -> 00 ... 它将是 00 -> 01 -> 11 -> 10 -> 00 ...

时钟域交叉是一个深刻而微妙的主题。即使是经验丰富的设计师也经常在没有仔细考虑的情况下把它们搞砸。

顺便说一句，普通的 Verilog 模拟不会显示我刚刚在零延迟模拟中描述的任何内容。您需要使用真实时序模型进行带注释的 SDF 仿真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:08:35.830

在此示例中，地址通过[移位寄存器](http://en.wikipedia.org/wiki/Shift_register)传递，以使其延迟一个时钟周期。本来可以有更多的“指针”来进一步延迟输出。

通常，如果您对设计进行仿真并查看波形，则更容易理解发生了什么以及为什么。

此外，您可以查看以下一些不错的 FIFO 实现：

1.  [Xilinx FIFO 发生器 IP 内核](http://www.xilinx.com/products/intellectual-property/FIFO_Generator.htm)
2.  [Altera 的单/双时钟 FIFO](http://www.altera.com/literature/ug/ug_fifo.pdf)
3.  [OpenCores 通用 FIFO](http://opencores.org/project,generic_fifos)

希望能帮助到你。祝你好运！

# forms - 基于 Visual Foxpro 数据网格的输入屏幕表单

> ID：15968918
> 
> 赞同：0
> 
> 时间：2013-04-12T10:24:14.417
> 
> 标签：forms, datagrid, visual-foxpro

我有三个表格，第一个是缔约方名称，第二个是质量，第三个是存储采购订单。目前我开发了带有文本框的订单输入表单。当我在同一日期有来自一方的 10 或 20 多个不同质量的订单时，很难输入订单。现在我想在网格中制作它。首先选择日期，然后选择派对并输入任意数量的订单。但我不知道如何在 Visual Foxpro 中做到这一点。我尝试了很多以找到一些示例或示例，但未能找到。我想在这里提到的另一件事是，这是我的 4 个表单应用程序中唯一的一个表单。我需要知道如何在网格中进行计算。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:49:55.393

在 VFP 命令窗口中，打开任务窗格管理器并选择解决方案示例。搜索网格，你会发现一堆关于使用网格的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T14:58:00.667

像这样的东西？

```
createtables()
ON ERROR 
oForm = CREATEOBJECT("myform")
oForm.visible = .t. 
READ EVENTS  
DEFINE CLASS mygrid as grid
    PROCEDURE init
        this.top = 40
        this.Left = 10
        this.Width = 450 
        this.ColumnCount = 6
        this.DeleteMark = .f.
        this.RecordMark = .f.
        this.RecordSource = "porders"
        this.column1.ControlSource = this.RecordSource + ".podate" 
        this.column1.Header1.Caption = "PO Date"
        this.column1.width = 75     
        this.column2.ControlSource = this.RecordSource + ".ponum" 
        this.column2.Header1.Caption = "PO Num"
        this.column2.width = 65
        this.column3.ControlSource = this.RecordSource + ".poparty"         
        this.column3.Header1.Caption = "Party"
        this.column3.width = 65
        this.column4.ControlSource = this.RecordSource + ".poqty" 
        this.column4.Header1.Caption = "Qty"
        this.column4.width = 65
        this.column5.ControlSource = this.RecordSource + ".poprice"
        this.column5.Header1.Caption = "Price"
        this.column5.width = 65
        this.column6.addobject("oqualities", "myqualities")
        this.column6.CurrentControl = "oqualities"
        this.column6.width = 65
        this.column6.sparse = .t.
        this.column6.Header1.Caption = "Quality"
        this.column6.ControlSource = this.RecordSource + ".poquality"       
    ENDPROC 
ENDDEFINE 
DEFINE class mycombo as combobox
    PROCEDURE init
        this.top = 10
        this.left = 150 
        this.Style = 2 
        this.RowSource = "parties.name"
        this.RowSourceType = 6       
    ENDPROC     
    PROCEDURE interactivechange
        SELECT (this.Parent.oGrid.RecordSource)
        lcVal = ["] + ALLTRIM(this.value) + ["]
        SET FILTER TO ALLTRIM(poparty) = &lcVal     
        this.Parent.ogrid.refresh()
    ENDPROC 
ENDDEFINE 
DEFINE class myqualities as combobox
    PROCEDURE init
        this.Style = 2
        this.RowSource = "qualities.desc"
        this.RowSourceType = 6      
    ENDPROC     
ENDDEFINE 
DEFINE CLASS mybutton as commandbutton
    PROCEDURE init
        LPARAMETERS tcMode
        this.Caption = tcMode
        this.Top = 250
        this.Left = 10
    ENDPROC  
    PROCEDURE click     
        IF this.Caption == "ADD"
            IF EMPTY(ALLTRIM(this.Parent.oparties.value))
                MESSAGEBOX("Please select party")
                RETURN .f.
            ENDIF 
            SELECT (this.Parent.ogrid.recordsource)         
            APPEND BLANK

            replace podate WITH this.parent.odate.value, ;
                    ponum WITH INT(RAND()*100000), ;
                    poparty WITH this.Parent.oparties.value, ;
                    poqty WITH 1                    

            this.Parent.ogrid.setfocus()
        ENDIF 
    ENDPROC 
ENDDEFINE  
DEFINE CLASS mydate as TextBox
    PROCEDURE init
        this.Value = DATE()
        this.Left = 10  
        this.Top = 10
    ENDPROC 
ENDDEFINE 
DEFINE CLASS myform as form
    PROCEDURE init
        this.AddObject("ogrid", "mygrid")
        this.AddObject("odate", "mydate")
        this.AddObject("oparties", "mycombo")
        this.AddObject("oAdd", "mybutton", "ADD")               
        this.ogrid.visible = .t.
        this.oparties.visible = .t.
        this.oAdd.visible = .t. 
        this.odate.visible = .t.        
        this.Height = 300
        this.Width = 470
        this.Visible = .t.
    ENDPROC 
ENDDEFINE 
PROCEDURE createtables
    IF !USED('parties')
        CREATE TABLE parties FREE (name c(20))
        INSERT INTO parties values("John")
        INSERT INTO parties values("Richard")
        INSERT INTO parties values("Melvin")
    ENDIF 
    IF !USED('qualities')
        CREATE TABLE qualities FREE (desc c(20))
        INSERT INTO qualities values("GOOD")
        INSERT INTO qualities values("BAD")
        INSERT INTO qualities values("SMELLY")
    ENDIF   
    IF !USED('porders')
        CREATE TABLE porders FREE (ponum i, podate D, poparty c(20), poqty n(10,2), poprice n(10,2), poquality c(20))
    ENDIF 
ENDPROC 
```

# groovy - 嵌套映射中的叶节点

> ID：15968919
> 
> 赞同：2
> 
> 时间：2013-04-12T10:24:15.920
> 
> 标签：groovy

给定这样的嵌套地图：

```
def map = [group: [group_name: 'test', group_color: 'red']] 
```

有没有办法把它变成这样：

```
['group-group_name': 'test', 'group-group_color': 'red'] 
```

地图可以有任何级别的嵌套。

进一步解释：如果地图被认为是一棵树，我希望生成的地图将所有叶子值作为其值，并且每个键应该是使用树顶部的所有键构建的“绝对”键叶节点（在上面的示例中，所有键都使用 连接`-`）。

这就是我想要的（当然不起作用）：

```
def newMap = map.findAll { it.isLeaf() }.collect { [it.absoluteKeyPath: it.value] } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:33:09.987

我相信这应该这样做：

```
def map = [ cheese: 'cheddar', 
            group: [ group_name: 'test',
                     group_color: 'red',
                     deep:[ bool:'yes' ] ] ]

def compress( Map m, String prefix = '' ) {
  prefix = prefix ? "$prefix-" : ''
  m.collectEntries { k, v ->
    if( v instanceof Map ) compress( v, "$prefix$k" )
    else [ ("$prefix$k".toString()): v ]
  }
}

assert compress( map ) == [ 'cheese':'cheddar',
                            'group-group_name':'test',
                            'group-group_color':'red',
                            'group-deep-bool':'yes' ] 
```

当然，您需要小心，因为映射键可能已经包含`-`字符，因此如果一个名称与叶子的路径相同，您可能会丢失数据

# jquery - 如何在同一页面中打开多个 jquery 对话框

> ID：15968924
> 
> 赞同：2
> 
> 时间：2013-04-12T10:24:37.057
> 
> 标签：jquery

我在一个页面中至少有 20 个链接，并且在每个链接上我必须显示一个包含不同内容的弹出窗口。有什么方法可以让我只调用一个 javascript 函数并将它传递给必须显示为弹出窗口的 div 的 id。我的 html结构看起来像这样

```
<div id='1'>    
<a href='#'>Moreinfo</a>
<div id='popup1'>
Content for first link
</div>
</div>

<div id='2'>
<a href='#'>Moreinfo</a>
<div id='popup2'>
Content for first link
</div>
</div> 
```

另外，如果我单击其他链接，第一个应该关闭。请在回复中给出合适的例子。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:30:57.563

我会尝试这样的事情

```
<div class="popupHolder">
    <div class="clickToPopup">Click here</div>
    <div class="popup">your popup content</div>
</div>
<div class="popupHolder">
    <div class="clickToPopup">Click here</div>
    <div class="popup">your popup content</div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $(".clickToPopup").click(function(){
             $(".popup").hide();
             $(this).parent("div.popupHolder").children("div.popup").show();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:30:37.963

***[`jsFiddle Demo`](http://jsfiddle.net/pKa6P/)***

你可以这样做

```
$("div[id^=popup]").hide();
$("a").click(function(){
 $("div[id^=popup]").hide();
 var id = this.parentNode.id;
 $("#popup"+id).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:34:31.853

```
<div id='1' class="div">
<a href='#'>Moreinfo</a>

    <div id='popup1' class="poppup">Content for first link</div>
</div>
<div id='2' class="div">
<a href='#'>Moreinfo</a>

    <div id='popup2' class="poppup">Content for first link</div>
</div> 
```

查询

```
 $('.div').click(function () {
        $('.poppup').hide();
        $(this).children('.poppup').show();
    }); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/yAVDg/3/)

# html - 带有 servlet 的数据源 - javax.naming.NameNotFoundException

> ID：15968925
> 
> 赞同：0
> 
> 时间：2013-04-12T10:24:43.040
> 
> 标签：html, xml, tomcat, servlets, datasource

我正在尝试使用 HTML 创建登录表单，并使用 Oracle 数据库中的用户名和密码使用 DataSource 登录。FirstServlet.java

```
 import java.io.*;
    import javax.servlet.*;
    import javax.servlet.http.*;
    import javax.servlet.annotation.*;
    import javax.naming.*;
    import javax.sql.*;
    import oracle.jdbc.*;
    import java.sql.*;
    import javax.annotation.Resource;
    public class FirstServlet extends HttpServlet
    {

        DataSource ds;
        Connection con;
        public void init() throws ServletException
       {
                InitialContext ic=new InitialContext();
            Context cont=(Context)ic.lookup("java:comp");
                DataSource ds=(DataSource)cont.lookup("jdbc/xe");
       }
        protected void doPost(HttpServletRequest request,HttpServletResponse response                     throws ServletException,IOException
        {
              response.setContentType("text/html");
              PrintWriter pw=response.getWriter();
              String user=request.getParameter("username");
              String pass=request.getParameter("pass");
              boolean status=false;
             try
            {

            con=ds.getConnection("sys","password");
            PreparedStatement ps=con.prepareStatement("select * from example where name=? and pass=?");
            ps.setString(1,user);
            ps.setString(2,pass);
            ResultSet rs=ps.executeQuery();
            status=rs.next();
            }
            catch(Exception e)
            {
             System.out.println(e);
            }
            if(status)
            {
                RequestDispatcher rd=request.getRequestDispatcher("Welcome");
                rd.forward(request,response);
            }
          else
           {
              pw.println("Username/Password error");
              RequestDispatcher rd=request.getRequestDispatcher("index.html");
              rd.include(request,response);
           }
    pw.close();
    }
  } 
```

index.html（主页）

```
 <html>
<form action="servlet1" method=post>
Name:<input type=text name=username></input>
<br />
Password:<input type=text name=pass>
<input type=submit value=login/>
    </html> 
```

web.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javae
/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

<resource-ref>
<description>Example </description>
<res-ref-name>jdbc/xe</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref>

<servlet>
    <servlet-name>FirstServlet</servlet-name>
    <servlet-class>FirstServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>WelcomeServlet</servlet-name>
    <servlet-name>WelcomeServlet</servlet-name>
</servlet>
<servlet-mapping>
    <servlet-name>FirstServlet</servlet-name>
    <url-pattern>servlet1</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>WelcomeServlet</servlet-name>
    <url-pattern>servlet2</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
    </web-app> 
```

WelcomeServlet.java

```
 import java.io.*;
    import javax.servlet.*;
    import javax.servlet.http.*;
    import javax.servlet.annotation.*;
    import javax.naming.*;
    import javax.sql.*;
    import oracle.jdbc.*;
    public class WelcomeServlet extends HttpServlet
   {
     protected void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException,ServletException
     {
        response.setContentType("text/html");
        PrintWriter out=response.getWriter();
        String username=request.getParameter("username");
        out.println("Welcome "+username);
      } 
```

}

最后是 conf 文件夹中的 context.xml：

```
 <?xml version='1.0' encoding='utf-8'?>
     <Context>

<WatchedResource>WEB-INF/web.xml</WatchedResource>
<Resource name="jdbc/xe" auth="Container"
          type="javax.sql.DataSource" driverClassName="oracle.jdbc.OracleDriver"
          url="jdbc:oracle:thin:@127.0.0.1:1521:xe"
          username="sys" password="password" maxActive="20" maxIdle="10"
          maxWait="-1"/>
      </Context> 
```

但是当我尝试从 Tomcat Manager 执行应用程序时，它无法部署。这是 Catalina 日志文件中的错误：

```
 Apr 12, 2013 3:11:25 PM org.apache.catalina.deploy.NamingResources cleanUp
    WARNING: Failed to retrieve JNDI naming context for container                      [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/login]] so no cleanup was performed for that container
    javax.naming.NameNotFoundException: Name [comp/env] is not bound in this Context. Unable to find [comp].
at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.catalina.deploy.NamingResources.cleanUp(NamingResources.java:988)
at org.apache.catalina.deploy.NamingResources.stopInternal(NamingResources.java:970)
at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5590)
at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:141)
at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1256)
at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:714)
at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:219)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:213)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

context.xml 文件有什么问题吗？

**编辑**：我已经更改了 java:/comp/env/jdbc/xe 的路径，但我得到了另一个错误：

```
 org.apache.catalina.startup.HostConfig deployDirectory
    SEVERE: Error deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\login
    java.lang.IllegalStateException: ContainerBase.addChild: start:    org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/login]]
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:31:04.340

我认为您`env`在检索`DataSource`. 尝试：

```
InitialContext ctx = new InitialContext();
DataSource ds = (DataSource) ctx.lookup("java:comp/env/jdbc/xe"); 
```

# gnuplot - Gnuplot：在单独的块中绘制多个对象的轨迹

> ID：15968929
> 
> 赞同：0
> 
> 时间：2013-04-12T10:24:55.537
> 
> 标签：gnuplot

我计算了多个粒子的迭代位置，因此我的输出文件如下所示：

```
x1(t=0) y1(t=0)
x2(t=0) y2(t=0)
...
xn(t=0) yn(t=0)

x1(t=1) y1(t=1)
...
xn(t=1) yn(t=1)

(a lot of blocks)

x1(t=p) y1(t=p)
...
xn(t=p) yn(t=p) 
```

例如，粒子 1 位于块的第一行，等等。

我需要在单个图中绘制每个粒子的轨迹，点与线相连。我偶然发现的问题是正确链接对应于正确粒子的点。我找到了一些建议重新格式化数据的建议，但我不知道如何处理它。也可以使用绘图命令直接绘制轨迹，但我再次缺乏解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:51:17.717

不幸的是，您当前的数据文件设置无法做到这一点。`every`您可以使用( `e`) 关键字制作不连接点的图：

```
plot for [i=0:NPOINTS-1] 'test.dat' e ::i::i w p 
```

但是，如果您想要连接数据集，这并不是很有帮助，您需要“反转”您的数据。我会使用`python`，因为它非常简单：

```
#pythonscript.py
import sys  #allow us to get commandline arguments

#store data as
#[[x1(t=0) y1(t=0),x2(t=0) y2(t=0),x3(t=0) y3(t=0),...],
# [x1(t=1) y1(t=2),x2(t=2) y2(t=2),x3(t=2) y3(t=2),...],
#  ... 
# [x1(t=N) y1(t=N),x2(t=N) y2(t=N),x3(t=N) y3(t=N),...],
#]

with open(sys.argv[1]) as fin:
    data = []
    current = []
    data.append(current)
    for line in fin:
        line = line.rstrip()
        if line:
           current.append(line)
        else:
           current = [] 
           data.append(current)

#now transpose the data an write it out.  `zip(*data)` will give you:
#[(x1(t=0) y1(t=0),x1(t=1) y1(t=1),x1(t=2) y3(t=2),...),
# (x2(t=0) y2(t=0),x2(t=1) y2(t=1),x2(t=2) y2(t=2),...),
# ...
# (xN(t=0) yN(t=0),xN(t=1) yN(t=1),xN(t=2) yN(t=2),...),
#]
for lst in zip(*data):
    for dpoint in lst:
        print dpoint
    print 
```

对我来说，给定输入文件 ( `test.dat`)：

```
x1(t=0) y1(t=0)
x2(t=0) y2(t=0)
xn(t=0) yn(t=0)

x1(t=1) y1(t=1)
x2(t=1) y2(t=1)
xn(t=1) yn(t=1)

x1(t=p) y1(t=p)
x2(t=p) y2(t=p)
xn(t=p) yn(t=p) 
```

运行`python pythonscript.test.dat`给出：

```
x1(t=0) y1(t=0)
x1(t=1) y1(t=1)
x1(t=p) y1(t=p)

x2(t=0) y2(t=0)
x2(t=1) y2(t=1)
x2(t=p) y2(t=p)

xn(t=0) yn(t=0)
xn(t=1) yn(t=1)
xn(t=p) yn(t=p) 
```

现在您可以使用[andyras 的解决方案](https://stackoverflow.com/a/15973159/748858)绘制它：

```
plot for [i=0:NP] '< python pythonscript.py data.dat' index i w lp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:53:07.410

您应该可以使用循环（在 gnuplot >= 4.6 中）和`index`plot 命令的选项来执行此操作：

```
p = (number of particles)
plot for [i=0:p] 'data.dat' index i with linespoints 
```

该`with linespoints`选项听起来也像您想要的那样，它将数据点与线联系起来。

# javascript - 每行少于 80 个字符的 RFC822 咖啡脚本

> ID：15968930
> 
> 赞同：0
> 
> 时间：2013-04-12T10:24:58.843
> 
> 标签：javascript, regex, coffeescript

```
validate_email = ( email ) ->
   (/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/).test email 
```

这可行，但它在 79 个字符时未能通过我的“最大行长度”测试，因此我一直在尝试使用 coffeescript.org 上的示例将其减少到少于 80 个字符（实际上最多 74 个）：

```
RFC822 = /// ^ (
  ([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x22([^\x0d\x22\x5c\x80-\xff]
  | \x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x22([^\x0d\x22\x5c\x80-\xff]
  | \x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x5b([^\x0d\x5b-\x5d\x80-\xff]
  | \x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x5b([^\x0d\x5b-\x5d\x80-\xff]
  | \x5c[\x00-\x7f])*\x5d))*$/
) ///
RFC822.test email 
```

虽然这编译得很好，但它不起作用。它总是返回假。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:51:46.280

您可以从字符串构建（如果您转义反斜杠）：

```
var re = new RegExp(
               "..." + 
               "..." + 
               "..."); 
```

（[JS中完整匹配器的要点](https://gist.github.com/robertklep/5371203)，似乎工作正常，但我的CF生锈了，所以我不知道它是否转化为CF）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:28:27.353

> 我该怎么做呢？

你不 - 正则表达式不适合解析电子邮件地址。

任何这样的正则表达式都注定要失败，因为现在存在的域名几乎打破了它们通常做出的所有假设，例如：

*   长 ASCII TLD（如果 TLD 长于 4 个字符，我已经看到了 regexps which barf）
*   不使用美国 ASCII 的国际域名 (IDN)

也就是说，使用交互式 Coffeescript 解释器，我只需调整几个字符就可以得到：

```
RFC822 = ///
^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x22([^\x0d\x22\x5c\x80-\xff]
  | \x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x22([^\x0d\x22\x5c\x80-\xff]
  | \x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x5b([^\x0d\x5b-\x5d\x80-\xff]
  | \x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a
  -\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+
  | \x5b([^\x0d\x5b-\x5d\x80-\xff]
  | \x5c[\x00-\x7f])*\x5d))*$
/// 
```

这完全减少到原始的正则表达式。唯一的变化是删除了整个正则表达式周围的一对多余的大括号，以及`/`结束后的尾随`$`。

# eclipse-plugin - 用于 Play & Lift 的 Eclipse 插件，用于创建新项目

> ID：15968933
> 
> 赞同：1
> 
> 时间：2013-04-12T10:25:09.497
> 
> 标签：eclipse-plugin, playframework, lift

我是 Play 和 Lift 框架的初学者，我有一个问题：是否有任何适用于 Play 框架和/或 Lift 框架的 Eclipse 插件使我们能够直接从 Eclipse IDE 创建一个新的 Play/Lift 项目（我们可以从 Eclipse 中创建文件>新建>播放项目（和/或提升项目））？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:55:09.317

有一个“lifty”插件（但它可能已经过时）可以从 SBT 创建项目的一部分：http: [//lifty.github.io/Installing+The+Plugin.html](http://lifty.github.io/Installing+The+Plugin.html)

无论如何，我个人认为，创建 liftweb 项目的最佳方式是从[https://github.com/lift/lift_25_sbt/](https://github.com/lift/lift_25_sbt/)开始， 这是由 Lift 的一些提交者创建的一个小示例项目。它包含 2 个简单页面和一个基本设置。之后，您可以执行以下操作：

`./sbt eclipse with-sources=true`创建一个eclipse项目

# javascript - Raphael SVG 事件类似 Element.dblclick()

> ID：15968939
> 
> 赞同：0
> 
> 时间：2013-04-12T10:25:34.380
> 
> 标签：javascript, jquery, raphael

我正在使用 Raphael JS 创建一个 SVG Web 编辑器，它专为 Iphone 和其他支持触控的设备以及台式电脑而设计。我很难找到与 iphone 一起使用的类似 Element.dblclick() 的事件？有谁能够帮我？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:44:12.360

Raphael 中有可用的触摸事件

**Element.touchstart** - [http://raphaeljs.com/reference.html#Element.touchstart](http://raphaeljs.com/reference.html#Element.touchstart)

# php - 使用 AJAX 和 mysql 更新 html 页面

> ID：15968944
> 
> 赞同：0
> 
> 时间：2013-04-12T10:25:43.033
> 
> 标签：php, mysql, ajax, jquery

我的 html 页面中有 3 个 div，默认情况下显示：无，我想定期检查数据库并相应地更新我的 div 的显示属性。

```
<div class="gunnybag" style="float:right">
        <div id="p1" style="display:none;"><img id="drag1"  draggable="true" src="coconut.png"></div>
        <div id="p2" style="display:none;"><img id="drag2"  draggable="true" src="coconut.png"></div>
        <div id="p3" style="display:none;"><img id="drag3"  draggable="true" src="coconut.png"></div>
    </div> 
```

为此，我编写了这个 JS 文件，

```
$(document).ready(function() {
     doAjax();
    });

function doAjax(){
$.ajax({
    url: "db_fetch.php",
    dataType: "json",
    success: function(json){
        var dataArray = JSON.decode(json);
        dataArray.each(function(entry){
            var i=1;
            if(entry.valueName==true){        //checking if `state`= true/false.
                $q('#p'+i).css( "display","block" );
            }
            else{
                $q('#p'+i).css( "display","none" );
            }
            i=i++;
        })
    }

}).complete(function(){
        setTimeout(function(){doAjax();}, 1000);  // check with DB every sec
    });
} 
```

这是 db_fetch.php

```
<?php
try{
  $con=mysql_connect("sqlservername","uname", "pass") or die(mysql_error());
}
catch(Exception $e){
    echo $e;
}
mysql_select_db("db_name", $con) or die(mysql_error());

$q = mysql_query("SELECT `state` FROM `table` ");   //selecting all `state` from table
var_dump($q);
$query = mysql_query($q, $con);
$results = mysql_fetch_assoc($query);
echo json_encode($results);    //returns json obj to above JS

?> 
```

我的数据库有 2 列 id 和 state，id 有 p1、p2、p3 作为值，并且 state 是真或假。

请指出我做错了什么。

非常感谢您的回复。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:47:48.093

像这样使用 window.onload 函数。

```
<script language="javascript">
 window.onload = function() {

  doAjax();

 }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:19:41.283

这是最终的工作代码。问题是我正在解析 json，注意：如果您在 $.ajax() 中使用 dataType: "json"，那么您不需要解析 JSON，它已经解析了！

ajx.js：

```
 $(document).ready(function() {
 doAjax();
});

function doAjax(){
var i=0;
$.ajax({
    url: "db_fetch.php",
    dataType: "json",
    success: function(json){

        jQuery.each(json, function(i){

            if(json[i].data.state=='true'){
                $('#p'+(i+1)).css( "display","block" );
            }
            else{
                $('#p'+(i+1)).css( "display","none" );
            }
            i=i++;
        });
    }

}).complete(function(){
        setTimeout(function(){doAjax();}, 2000);
    });
} 
```

# windows - 用于移动文件的 Windows 批处理脚本

> ID：15968949
> 
> 赞同：12
> 
> 时间：2013-04-12T10:26:01.180
> 
> 标签：windows, batch-file, move

我需要在 Windows 中将文件从一个目录移动到另一个目录，并且我需要在批处理脚本中编写它。

我们编写了一个 SQL 作业，其中每 4 小时在`D:`驱动器上创建备份文件，最后 4 个备份文件将被保存，其他文件将被删除。

我需要编写一个批处理脚本，每 10 小时将这些文件从`D:`驱动器移动到驱动器。`E:`

谁能帮我写这个脚本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T21:05:08.180

使用语法创建一个名为 MoveFiles.bat 的文件

```
move c:\Sourcefoldernam\*.* e:\destinationFolder 
```

然后安排一个任务每 10 小时运行一次 MoveFiles.bat。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-20T22:20:52.213

你可以试试这个：

`:backup move C:\FilesToBeBackedUp\*.* E:\BackupPlace\ timeout 36000 goto backup`

如果这不起作用，请尝试用睡眠替换“超时”。我这个帖子已经有一年多了，只是帮助任何有同样问题的人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-12T22:27:53.243

这正是它对我有用的方式。由于某种原因，上面的代码失败了。

这个每 3 分钟检查一次那里的任何文件，并自动将其移动到目标文件夹。如果需要提示冲突，则将 /y 更改为 /-y

```
:backup
move /y "D:\Dropbox\Dropbox\Camera Uploads\*.*" "D:\Archive\Camera Uploads\"
timeout 360
goto backup 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-28T12:35:14.713

```
move c:\Sourcefoldernam\*.* e:\destinationFolder 
```

^ 由于某种原因，这对我不起作用

但是当我尝试使用引号时，它突然起作用了：

```
move "c:\Sourcefoldernam\*.*" "e:\destinationFolder" 
```

我认为这是因为我的目录在其中一个文件夹中有空格。因此，如果它不适合您，请尝试使用引号！

# ios - 使用 Objective c 在 twitter 等应用程序中打开链接

> ID：15968950
> 
> 赞同：-1
> 
> 时间：2013-04-12T10:26:01.643
> 
> 标签：ios, twitter

在 twitter 中，当你点击一个链接时，它会打开它并在左上角有一个“关闭”按钮。当您单击关闭时，您将回到您在 Twitter 中离开的位置，而不是其他任何地方。

我想使用Objective C来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:30:48.180

您可能希望将一个嵌入`UIWebView`到您的应用程序中：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# c - Matrix multiplication error: Segmentation fault (core dumped)

> ID：15968952
> 
> 赞同：1
> 
> 时间：2013-04-12T10:26:07.753
> 
> 标签：c

I have the following code, and I want to calculate the running time of several matrix multiplications, with different sizes. I started with matrix size of 100, and moved till 500, but when I try 1000, I get an error saying: Segmentation fault (core dumped), so I assume it has to do something with the memory. I want to calculate the running time even of the matrices with sizes of 5000 and maybe 10000\. Anyone can help me solve my problem?

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 1000

int main(void)
{
    int A[SIZE][SIZE], B[SIZE][SIZE], C[SIZE][SIZE] = {0};
    int i, j, k;

    srand(time(NULL));

    for(i = 0; i < SIZE; i++)
    {
        for(j = 0; j < SIZE; j++)
        {
            A[i][j] = rand()%100;
            B[i][j] = rand()%100;
        }
    }

    clock_t begin, end;
    double time_spent;

    begin = clock();

    for(i = 0; i < SIZE; i++)
        for(j = 0; j < SIZE; j++)
            for(k = 0; k < SIZE; k++)
                C[i][j] += A[i][k] * B[k][j];

    end = clock();

    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;

    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T10:28:51.050

This is a classic [stack overflow](http://en.wikipedia.org/wiki/Stack_overflow) - you have 3 local arrays each of approx 4 MB in size (assuming 32 bit ints) on your stack for a total of around 12 MB. On most modern operating systems the stack is typically 8 MB or less. Either make the variables static, e.g.

```
static int A[SIZE][SIZE], B[SIZE][SIZE], C[SIZE][SIZE] = {0}; 
```

so that they no longer reside on the stack, or allocate them dynamically.

# objective-c - Adding a UISwitch to a UINavigationItem

> ID：15968953
> 
> 赞同：4
> 
> 时间：2013-04-12T10:26:11.523
> 
> 标签：objective-c, cocoa-touch, uibarbuttonitem, uinavigationitem, uiswitch

I want to have a UISwitch in the right corner of a UINavigationItem, instead of a UIBarButton. Is this possible without subclassing the UINavigationItem?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T10:32:11.580

`UIBarButtonItem`您可以使用该[`initWithCustomView:`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/initWithCustomView%3a)方法在其中创建一个带有自定义视图的视图。例如：

```
UISwitch *switch = ...;
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:mySwitch]; 
```

将此设置为`UINavigationItem`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T10:32:29.487

有可能`[UIBarButtonItem initWithCustomView:]`：

```
UISwitch* switchView = [[UISwitch alloc] init];
UIBarButtonItem* switchItem = [[UIBarButtonItem alloc] initWithCustomView:switchView];
self.navigationItem.rightBarButtonItem = switchItem; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-25T07:45:48.913

在斯威夫特-

在 viewDidLoad() 中编写此代码

```
let switchDemo=UISwitch(frame:CGRectMake(15, 15, 0, 0))
        switchDemo.on = true
        switchDemo.setOn(true, animated: false)
        switchDemo.addTarget(self, action: "switchValueDidChange:", forControlEvents: .ValueChanged)
        self.view.addSubview(switchDemo) 
```

这是你的功能 -

```
func switchValueDidChange(sender:UISwitch!)
{
if (sender.on == true){
println(“on”)
}
else{
println(“off”)
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T10:34:12.870

有可能`[UIBarButtonItem initWithCustomView:]`：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView: mySwitch]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-20T09:15:57.503

对于迅速 4：

```
@IBOutlet weak var hostGuestSwitchOutletDeclare: UISwitch!
private func loadHostGuestSwitch(){
    hostGuestSwitchOutletDeclare.isOn = true
    hostGuestSwitchOutletDeclare.setOn(true, animated: false)
    hostGuestSwitchOutletDeclare.addTarget(self, action: #selector(switchValueDidChange), for: .valueChanged)
    if self.hostGuestSwitchOutletDeclare.isOn {
        self.navigationItem.title = "ON"
    } else {
        self.navigationItem.title = "OFF"
    }
}
@objc func switchValueDidChange(sender:UISwitch!) {
    if (sender.isOn == true){
        self.navigationItem.title = "ON"
    } else {
        self.navigationItem.title = "OF"
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-23T19:50:26.473

**斯威夫特版本**

```
let customSwitch = UIBarButtonItem(customView: UISwitch())
navigationItem.rightBarButtonItem = customSwitch 
```

在 viewDidLoad 中执行此操作

# wcf - 从 Windows 服务调用 Reporting Services 的安全异常

> ID：15968954
> 
> 赞同：1
> 
> 时间：2013-04-12T10:26:11.650
> 
> 标签：wcf, reporting-services, windows-services, ssrs-2008

我正在尝试从 Windows 服务调用 SQL Server Reporting Services 的 Web 服务。我可以从 Asp.Net MVC 网站成功进行调用，但是当我尝试使用 Windows 服务中完全相同的代码（具有看似相同的 WCF 配置）时，我收到以下错误...

> 内部异常：System.ServiceModel.Security.MessageSecurityException - HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“NTLM”。
> 
> 内部异常：System.Net.WebException - 远程服务器返回错误：（401）未经授权。

我的 Asp.Net MVC 站点的应用程序池和 Windows 服务都设置为使用“网络服务”用户。

这是我在配置文件中的 WCF 配置...

```
 <system.serviceModel>
<serviceHostingEnvironment
        aspNetCompatibilityEnabled="true"/>
<bindings>
  <basicHttpBinding>
    <binding name="ReportExecutionServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxArrayLength="2147483647"
                    maxStringContentLength="2147483647"
                    maxBytesPerRead="2147483647"
                    maxDepth="2147483647"
                    maxNameTableCharCount="2147483647"
                    />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm=""/>
      </security>
    </binding>

  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://myserver/ReportServer_MSSQL2008/ReportExecution2005.asmx"
      binding="basicHttpBinding" bindingConfiguration="ReportExecutionServiceSoap"
      contract="ReportService.ReportExecutionServiceSoap" name="ReportExecutionServiceSoap" behaviorConfiguration="ImpersonationBehaviour" />
</client>
<behaviors>
  <endpointBehaviors>
   <behavior name="ImpersonationBehaviour">
    <clientCredentials>
     <windows allowedImpersonationLevel="None" allowNtlm="true"/>
    </clientCredentials>
   </behavior>
  </endpointBehaviors>
</behaviors> 
```

我已经尝试了所有不同的“allowedImpersonationLevel”，并且在完全没有定义这种行为的情况下进行了尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:25:36.840

让您参考了运行 Windows 应用程序所需的所有代码。

# outlook - Outlook 2013：将按钮添加到阅读窗格？

> ID：15968960
> 
> 赞同：4
> 
> 时间：2013-04-12T10:26:28.027
> 
> 标签：outlook, vsto, outlook-2013

是否可以在 Outlook 2013 阅读窗格中添加自定义按钮 - 在“FORWARD”旁边（红色箭头指向的位置）...

![在此处输入图像描述](https://i.stack.imgur.com/RsvpW.png)

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-28T18:42:12.550

这些是阅读按钮中的标准按钮，您不能更改或添加它。

# php - CURL PHP MyGate 支付网关

> ID：15968962
> 
> 赞同：1
> 
> 时间：2013-04-12T10:26:29.750
> 
> 标签：php, curl, https, payment-gateway

我正在尝试将一些详细信息发布到 mygate 支付网关。如果我使用普通表单并发布到 url，它会为该特定会话生成一个令牌 ID，并在内部将页面重定向到详细信息捕获页面。

当我使用 curl 执行此操作时，我收到一条成功消息，但我无法获得所需的页面。

是否可以使用 curl 在新选项卡中加载相同的页面，我怀疑这会以某种方式帮助我。

任何其他解决方案也将不胜感激。

我试过的代码是：

```
 //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL, $url);
    curl_setopt($ch,CURLOPT_POST, count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_SSLVERSION, 3);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,0);

    //turning off the server and peer verification(TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);       

    $result = curl_exec($ch);

    if(!$result)
    {
        echo curl_error($ch);
    }
    else
    {
        echo $result;
    }

    //close connection
    curl_close($ch); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:42:32.563

由于它成功重定向到页面，因此您可以获得重定向 url 的位置。

您可以通过设置一些 curl 选项来获取重定向 URL。

```
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$a = curl_exec($ch);
if(preg_match('#Location: (.*)#', $a, $r))
 $l = trim($r[1]); 
```

`$l`将是重定向位置。您可以获取 url 并将您的页面重定向到该位置。

$r 将包含一个带有位置 url 的数组。

# python - 如何找到包含给定点的德劳内三角剖分面

> ID：15968968
> 
> 赞同：3
> 
> 时间：2013-04-12T10:26:51.893
> 
> 标签：python, geometry, interpolation, triangulation, delaunay

我已经绘制了`n`随机点*（黑点）*并使用了 delaunay 三角剖分，现在我想插入`m`随机评估点*（红点）*，所以我需要计算评估点在哪个三角形内。

计算每个点的三角形顶点的方法是什么？ ![在此处输入图像描述](https://i.stack.imgur.com/4sp25.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:31:40.953

对于给定的三角形ABC，如果一个点与点C在AB线的同一侧，与A点在BC线的同一侧，并且与点AC在线的同一侧，则该点位于三角形内部B是。您可以为每个三角形预先优化此检查并检查它们，直到找到它所在的三角形。有关更多详细信息，请参阅[此页面](http://www.blackpawn.com/texts/pointinpoly/)。

为了节省计算，您可以计算每个三角形的点的最小和最大 X 和 Y 坐标。如果某个点的 X 和 Y 坐标不在最小值和最大值范围内，您可以立即跳过检查该三角形。如果该点不在三角形边界的矩形内，则该点不能在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:57:04.003

我会假设三角形除了公共边外不相交。

您不想独立检查每个三角形（或它们的子集）。主要原因是计算错误 - 由于它们，您可能会在多个三角形（或零）的“内部”得到答案，这可能会破坏程序的逻辑。

更健壮的方法是：

1.  找到离点最近的边
2.  选择接触此边缘的三角形之一
3.  对该三角形进行一次检查（该点与第三个三角形顶点位于同一侧）
4.  如果“内部” - 返回这个三角形
5.  如果“外部” - 在此边缘返回另一个三角形（如果没有其他三角形，则返回“无”）

即使你会因为计算错误而返回错误的三角形，仍然只有一个三角形，并且点将离它足够近，可以接受这样的错误。

对于＃1，您可以使用 Michael Wild 建议的四叉树之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:32:11.090

Delaunay 三角剖分本身就是一种搜索数据结构。您的 Delaunay 三角测量实现可能具有定位功能。您是如何计算点的 Delaunay 三角剖分的？

[CGAL](http://www.cgal.org/)实现了 2D 和 3D 三角测量。生成的数据结构能够使用从给定点步行来定位任何点。例如参见[手册的那一章](http://www.cgal.org/Manual/4.2/doc_html/cgal_manual/Triangulation_2/Chapter_main.html#Section_37.5)。CGAL 是一个 C++ 库，但它有[python 绑定](http://code.google.com/p/cgal-bindings/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T14:56:22.467

这个简单的例子对 10 个随机点进行三角剖分，生成另外 3 个随机点，如果它们落在三角形内，则给出顶点：

```
import numpy as np
from pyhull.delaunay import DelaunayTri

def sign(a,b,c):
    return (a[0]-c[0])*(b[1]-c[1])-(b[0]-c[0])*(a[1]-c[1])

def findfacet(p,simplice):
    c,b,a = simplice.coords
    b1 = sign(p,a,b) < 0.0
    b2 = sign(p,b,c) < 0.0
    b3 = sign(p,c,a) < 0.0
    return b1 == b2 == b3

data = np.random.randn(10, 2)
dtri = DelaunayTri(data)

interpolate = np.random.randn(3, 2)

for point in interpolate:
    for triangle in dtri.simplices:
        if findfacet(point,triangle):
            print "Point",point,"inside",triangle.coords
        break 
```

`matplotlib`用于可视化（*代码省略）*：

![在此处输入图像描述](https://i.stack.imgur.com/wIGqK.png)

青色虚线现在连接点，以插入它所在的三角形的顶点。黑线是凸包，青色实线是德劳内三角剖分。

# php - 是否可以使用 cURL 通过 POST 流式上传文件？

> ID：15968972
> 
> 赞同：9
> 
> 时间：2013-04-12T10:27:04.873
> 
> 标签：php, curl

还是 PHP 不允许这样做？我已经读过使用 PUT 是可能的，但服务器只需要 POST。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-26T02:12:41.830

cURL 已经支持流，尝试一下`curl --help | grep binary`，你会得到：

> --data-binary DATA HTTP POST 二进制数据 (H)

一个例子：

> curl -v -XPOST http://example:port/path --data-binary @file.tar
> -H "Content-Type: application/octet-stream"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T18:36:48.337

是的，可以使用带有 cURL 的 POST 文件上传来*流式上传文件。*这是默认设置，您需要提供要以字符串形式流式传输的文件的文件名。

```
// URL on which we have to post data
$url = "http://localhost/tutorials/post_action.php";
// Any other field you might want to catch
$post_data['name'] = "khan";
// File you want to upload/post
$post_data['file'] = "@c:/logs.log";

// Initialize cURL
$ch = curl_init();
// Set URL on which you want to post the Form and/or data
curl_setopt($ch, CURLOPT_URL, $url);
// Data+Files to be posted
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
// Pass TRUE or 1 if you want to wait for and catch the response against the request made
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// For Debug mode; shows up any error encountered during the operation
curl_setopt($ch, CURLOPT_VERBOSE, 1);
// Execute the request
$response = curl_exec($ch);

// Just for debug: to see response
echo $response; 
```

除了该默认方法外，*不能*使用 cURL 使用 POST 方法流式上传文件。

# python - 如何将文件的输出作为输入提供给其他文件，如何将在 pyqt4 中 LineEdit 中输入的文本作为输入字符串提供给另一个文件

> ID：15968974
> 
> 赞同：0
> 
> 时间：2013-04-12T10:27:10.980
> 
> 标签：python, python-2.7, pyqt, pyqt4, qlineedit

```
import sys
from PyQt4.QtCore import SIGNAL
from PyQt4.QtGui import QDialog, QApplication, QPushButton, QLineEdit, QFormLayout

class Form(QDialog):
    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        self.le = QLineEdit()
        self.le.setText("Host")

        self.pb = QPushButton()

        self.pb.setText("Connect") 

        layout = QFormLayout()
        layout.addWidget(self.le)
        layout.addWidget(self.pb)

        self.setLayout(layout)
        self.connect(self.pb, SIGNAL("clicked()"),self.button_click)
        self.setWindowTitle("Learning")

    def button_click(self):
        # shost is a QString object
        shost = self.le.text()
        #what should I write here to access the other python file and give shost as input string to that file

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

现在，当我在 lineedit 中输入文本并单击连接按钮时，它应该将文本作为输入提供给下面给出的其他 python 文件。我需要修改上面代码中的 button_click(self) 函数，以便它在 lineedit 中提供文本作为下面 python 文件的输入。

```
 # Requiredfile.py
Enteredstring = input('Enter string:')
print Enteredstring 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:29:00.853

考虑到您的 pyqt 代码是正确的，

```
import sys
from PyQt4.QtCore import SIGNAL
from PyQt4.QtGui import QDialog, QApplication, QPushButton, QLineEdit, QFormLayout

class Form(QDialog):
  def __init__(self, parent=None):
    super(Form, self).__init__(parent)

    self.le = QLineEdit()
    self.le.setText("Host")

    self.pb = QPushButton()

    self.pb.setText("Connect") 

    layout = QFormLayout()
    layout.addWidget(self.le)
    layout.addWidget(self.pb)

    self.setLayout(layout)
    self.connect(self.pb, SIGNAL("clicked()"),self.button_click)
    self.setWindowTitle("Learning")

  def button_click(self):
    # shost is a QString object
    shost = self.le.text()
    import Requiredfile.py
    Requiredfile.func(shost)

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

你在你的 requiredfile.py 中创建一个名为的函数`func`，并在你的 gui 文件中导入 Requiredfile.py 并将 shost var 传递给该文件。

这是你的Requiredfile.py

```
def func(shost):
    Enteredstring = input('Enter string:')
    print Enteredstring
    print shost 
```

所以在这里你在你的Requiredfile.py中得到了shost，用shost做任何你想做的事情

# c# - 将 LINQ 查询转换为列表

> ID：15968978
> 
> 赞同：2
> 
> 时间：2013-04-12T10:27:14.873
> 
> 标签：c#, linq, generic-list

这是函数，我使用排列列表：

```
public static IEnumerable<IEnumerable<T>> Permute<T>(IEnumerable<T> list)
        {
            if (list.Count() == 1)
                return new List<IEnumerable<T>> { list };

            return list.Select((a, i1) => Permute(
                            list.Where((b, i2) => i2 != i1)).Select(
                                    b => (new List<T> { a }).Union(b))
                            ).SelectMany(c => c);
        } 
```

按以下方式使用它：

```
var SFP_vars = Permute(SFP); 
```

其中 SFP 是字节数组：

```
byte[] SFP = new byte[7] { 0, 1, 2, 3, 4, 5, 6 }; 
```

还有其他变量：

```
List<byte[]> lst_SFP = new List<byte[]>(); 
```

现在我的问题是：如何将 SFP_vars 的值分配给 lst_SFP ？ `lst_SFP = SFP_vars.ToList()`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:28:58.337

```
lst_SFP = SFP_vars.Select(bytePermutation => bytePermutation.ToArray()).ToList() 
```

基本上，您希望列表中的内容是一个字节数组，因此`Select`语句会处理它，给您一个`IEnumerable<byte[]>`.
然后我们这样做`ToList`以使其成为一个列表。

`bytePermutation`可以命名任何东西，我只是这样命名它，这样你就可以了解发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:29:21.627

您还需要将内部枚举转换为`byte`数组：

```
lst_SFP = SFP_vars.Select(x => x.ToArray()).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:31:54.767

SFP_vars 看起来像一个`IEnumerable<IEnumerable<byte>>`而不是一个`IEnumerable<byte[]>`.

这意味着您首先需要将`IEnumerable<byte>`对象转换为`byte[]`使用 ToArray() 方法。然后，您可以将它们添加到列表中。

虽然它相当于同一件事，但您可以用这个 LINQ 查询替换：

```
List<byte[]> lst_SFP = SFP_vars.Select(ie => ie.ToArray()).ToList(); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:32:18.750

您需要将内部`IEnumerable<byte>`转换为数组，这可以使用[`.Select()`](http://msdn.microsoft.com/en-AU/library/bb548891.aspx). 完成的一个`.ToList()`将作为`List<byte[]>`.

```
var SFP = new byte[7] { 0, 1, 2, 3, 4, 5, 6 };
var SFP_vars = Permute(SFP);
var lst_SFP = SFP_vars
    .Select(e => e.ToArray())
    .ToList(); 
```

除非您需要特定的订单，否则最好使用`List<IEnumerable<byte>>`. 使用它会阻止[Array.Copy](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.array.copy.aspx&ei=A-NnUY2bII6RigeP3oD4BQ&usg=AFQjCNH7IGghwH0GgJp8ErFKkeixv2KEyg&bvm=bv.45175338,d.aGc)。

# python - sort files according to name in python

> ID：15968979
> 
> 赞同：1
> 
> 时间：2013-04-12T10:27:15.873
> 
> 标签：python, sorting

I have a few files stored in my directory according to their dates such as

```
01mar13
09mar13
20feb13
27jan13 
```

my problem is I want to sort them such that its arranged as

```
27jan13
20feb13
01mar13
09mar13 
```

I have a feeling it should be very simple. Would appreciate if someone could point me to the right direction of solving my problem.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:34:37.417

```
from datetime import datetime
import glob

sorted(glob.glob('*'), key=lambda x: datetime.strptime(x, '%d%b%y')) 
```

返回按时间顺序排序的文件名列表（忽略世纪）。是的，以 YYYYMMDD 格式存储文件是一个很好的解决方案。

# c - CCS 错误 [128] 在此行之前需要 #DEVICE

> ID：15968985
> 
> 赞同：2
> 
> 时间：2013-04-12T10:27:33.827
> 
> 标签：c, compiler-construction, embedded

我正进入（状态

```
Error[128]   C:\Program Files\PICC\drivers\string.h 34 : A #DEVICE required before this line 
```

编译简单的 helloWorld.c 时

```
#include <stdio.h>

void main()
{
printf("Hi");

} 
```

我正在通过命令编译它`"ccsc +FM C:\vamshi\test\cFiles\Sample.c"`

我正在使用**CCS, Inc. PCWHD 版本 4**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:11:38.633

参考[用户手册](http://www.ccsinfo.com/downloads/ccs_c_manual.pdf)；#DEVICE 指令定义编译器的行为以适应各种 PIC 架构和指令集变体。但是，您通常不会将此指令直接放在您的代码中，而是`#include`将其放在适合您的设备头中。您尚未具体说明您使用的是什么部分，但例如：

```
#include <pic16c63a.h> 
```

# java - Java1.8接口中的具体方法

> ID：15968987
> 
> 赞同：10
> 
> 时间：2013-04-12T10:27:35.803
> 
> 标签：java, interface

在一次讨论中，我的一位朋友告诉我，`concrete methods would be allowed in java 1.8 in interfaces`当时我想到了一个问题，即如果他们被允许，那么我们将如何区分这些方法。例如
，我有两个接口`Animal.java`，`Pet.java`并且都有相同的具体方法，即`eat()`

```
 public interfaces Animal{

        void eat(){
                System.out.println("Animal Start eating ....");
        }
   }

   public interfaces Pet{

        void eat(){
                System.out.println("Pet Start eating ....");
        }
   } 
```

现在我`Zoo.java`实现了这两个并且没有覆盖

```
 public class Zoo() implements Pet , Animal{ 
             //Now name method is a part of this class
   } 
```

现在这是我的困惑。如何`animal`使用`Test`对象调用接口上的特定方法

```
public class Demo{
        public static void main(String[] args){

                 Zoo zoo = new Zoo();
                 zoo.eat();    //What would be the output
        }
 } 
```

有什么建议么？或者在 java1.8 中是否有任何解决方案，因为我无法找到它的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T10:50:23.420

You get a compile time error, unless you override eat in your Zoo class.

```
java: class defaultMethods.Zoo inherits unrelated defaults for eat() from types Pet and Animal 
```

The latest and geatest jdk is [here btw](http://jdk8.java.net/lambda/). And the syntax should be

```
default void eat(){
  System.out.println("Animal Start eating ....");
} 
```

# perl - Net::SSH::Perl 使用转发的 SSH 密钥

> ID：15968988
> 
> 赞同：6
> 
> 时间：2013-04-12T10:27:37.100
> 
> 标签：perl, ssh

我正在尝试使用 Net::SSH::Perl 编写 perl 脚本

目前它非常简单，因为我只想通过 ssh 在目录中执行 ls。

```
#!/usr/bin/perl

use Net::SSH::Perl;

@KEYFILE = ("/user/.ssh/id_rsa");
$ssh = Net::SSH::Perl->new($host, debug=>1, identity_files=>\@KEYFILE)

my $host = "hostname";
my $user = "user";

#-- set up a new connection
my $ssh = Net::SSH::Perl->new($host, debug=>1, identity_files=>\@KEYFILE)
#-- authenticate
$ssh->login($user);
#-- execute the command
my($stdout, $stderr, $exit) = $ssh->cmd("ls -l /home/user/"); 
```

这可行，但唯一的问题是，我需要跳过堡垒服务器来运行命令。我将我的私钥转发到堡垒，但我坚持的一点是如何在 perl 中使用转发的密钥，而不是使用必须在服务器上的密钥。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:37:00.903

连接到堡垒服务器时，您必须启用代理转发：

```
my $ssh = Net::SSH::Perl->new(
    $host,
    debug          => 1,
    identity_files => \@KEYFILE,
    options        => [
        'ForwardAgent yes',
    ],
); 
```

有关其他 ssh Perl 模块及其优缺点，请参阅[Net::OpenSSH 与 Net::SSH:: modules](https://metacpan.org/module/Net%3a%3aOpenSSH#Net%3a%3aOpenSSH-Vs-Net%3a%3aSSH%3a%3a.-modules)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T19:59:38.497

您可以将文件内容作为标量引用传入。

```
my $ssh = Net::SSH::Perl->new($host, identity_files => [ \$file_contents ]); 
```

但是，如果您要通过堡垒服务器进行 ssh，那么转发 SSH 代理是执行此操作的最佳方式（如 abraxxa 上面所示）。

# java - 抽象产品是泛型类时的工厂模式

> ID：15968989
> 
> 赞同：0
> 
> 时间：2013-04-12T10:27:41.953
> 
> 标签：java, generics, graph, factory-pattern

我项目的第一部分是构建一个超图

这是一个快速绘制的 UML 图![在此处输入图像描述](https://i.stack.imgur.com/Cxq38.png)

顶点类

```
public abstract class Vertex <T>{

    int vertexId ;
    T vertexValue ;
    public  abstract  T computeVertexValue();
} 
```

图像顶点类

```
public class ImageVertex extends Vertex<Map<String, Instance>>{

    public ImageVertex(int id ) {
        this.vertexId=id;
    }

    @Override
    public Map<String, Instance> computeVertexValue(){
        return null;
    }
} 
```

抽象顶点工厂

```
public abstract class AbstractVertexFactory {

    public abstract  Vertex createVertex(int id);

    public  Vertex produceVertex(int id) {

        Vertex vertex = createVertex(id);
        vertex.computeVertexValue();
        return vertex;
    }
} 
```

ImageFactory 类

```
public class ImageFactory extends AbstractVertexFactory {

    @Override
    public Vertex createVertex(int id) {
        // TODO Auto-generated method stub
        return new ImageVertex(id);
    }
} 
```

模拟器

```
public class ImageFactorySimulator {

    /**
     * @param args
     */
    public static void main(String[] args) {

        AbstractVertexFactory imFactory= new ImageFactory();

        ImageVertex im = (ImageVertex) imFactory.createVertex(0);

    }

} 
```

在模拟器中使用 cast 是有问题的 我该如何避免呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:35:25.273

你可以使用

```
public abstract class AbstractVertexFactory <T extends Vertex> {
    public abstract  T createVertex(int id);
} 
```

和

```
public class ImageFactory extends AbstractVertexFactory<ImageVertex> {

    @Override
    public ImageVertex createVertex(int id) {
        // TODO Auto-generated method stub
        return new ImageVertex(id);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:35:50.413

尝试

```
abstract class AbstractVertexFactory<T extends Vertex> {
    public abstract Vertex createVertex(int id);
}

class ImageFactory extends AbstractVertexFactory<ImageVertex> {
    @Override
    public ImageVertex createVertex(int id) {
        return new ImageVertex(id);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T10:46:24.790

另一个答案是：

```
public abstract class Vertex <T>{

    int vertexId ;
    T vertexValue ;
    public  abstract  T computeVertexValue();
}
public class ImageVertex extends Vertex<Map<String, Object>>{

    public ImageVertex(int id ) {
        this.vertexId=id;
    }

    @Override
    public Map<String, Object> computeVertexValue(){
        return null;
    }
}
public abstract class AbstractVertexFactory<T extends Vertex> {

    public abstract  T createVertex(int id);

    public  T produceVertex(int id) {

        T vertex = createVertex(id);
        vertex.computeVertexValue();
        return vertex;
    }
}

public class ImageFactory extends AbstractVertexFactory<ImageVertex> {

    @Override
    public ImageVertex createVertex(int id) {
        // TODO Auto-generated method stub
        return new ImageVertex(id);
    }
}

public class ImageFactorySimulator {

    /**
     * @param args
     */
    public void ttt(String[] args) {

        ImageFactory imFactory= new ImageFactory();

        ImageVertex im = imFactory.createVertex(0);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:36:14.990

你可以使用这个：

```
public class ImageFactory extends AbstractVertexFactory {

    @Override
    public Vertex createVertex(int id) {
        // TODO Auto-generated method stub
        return createImageVertex(id);
    }

    public ImageVertex createImageVertex(int id) {
        // TODO Auto-generated method stub
        return new ImageVertex(id);
    }
} 
```

和

```
public class ImageFactorySimulator {

    /**
         * @param args
     */
    public static void main(String[] args) {

        AbstractVertexFactory imFactory= new ImageFactory();

        ImageVertex im = imFactory.createImageVertex(0);

    }
} 
```

# php - get value of a variable from a python script

> ID：15968990
> 
> 赞同：0
> 
> 时间：2013-04-12T10:27:48.280
> 
> 标签：php, python, json, exec

I have a python script that returns a json object. Say, for example i run the following:

```
exec('python /var/www/abc/abc.py'); 
```

and it returns a json object, how can i assign the `json` object as a variable in a php script.

### Example python script:

```
#!/usr/bin/python
import sys 

def main():
    data = {"Fail": 35}
    sys.stdout.write(str(data))

main() 
```

### Example PHP script:

```
<?php

exec("python /home/amyth/Projects/test/variable.py", $output, $v);
echo($output);

?> 
```

The above returns an empty Array. Why so ?

I want to call the above script from php using the `exec` method and want to use the json object returned by the python script. How can i achieve this ?

Update:

The above works if i use another shell command, For Example:

```
<?php

exec("ls", $output, $v);
echo($output);

?> 
```

Anyone knows the reason ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:36:45.350

如果您的想法是您将拥有一个将 JSON 数据打印到标准输出的 Python 脚本，那么您可能正在寻找[`popen`](http://php.net/popen).

就像是...

```
<?php

$f = popen('python /var/www/abc/abc.py', 'r');
if ($f === false)
{
   echo "popen failed";
   exit 1;
}
$json = fgets($f);
fclose($f); 
```

...将输出抓取到`$json`变量中。

至于您的示例 Python 脚本，如果您的想法是您尝试将 Python 字典转换`{"tests": "35"}`为 JSON，并打印到标准输出，您需要更改`loads`为`dumps`和`return`to `print`，所以它看起来像......

```
import simplejson

def main():
    data = simplejson.dumps({"tests": "35"})
    print data

main() 
```

# ios - Core Data 版本控制仍在加载旧的 mom 文件

> ID：15968992
> 
> 赞同：0
> 
> 时间：2013-04-12T10:27:49.267
> 
> 标签：ios, core-data, model, versioning

我对核心数据进行版本控制有问题。我添加了一个新实体事件并遵循了版本控制的所有步骤。我有一个 Model.momd 文件夹，其中包含 Model.mom、Model2.mom 和 Model2.omo 以及版本文件。我已将加载 modelObjectContext 更改为从 momd 文件夹加载。

*   **当我使用 Xcode 将应用程序加载到我的 iPhone 时，它​​可以工作。**然而，当
*   **我通过 iTunes**创建了一个存档并用这个新版本替换了 Appstore 版本，****我收到以下错误消息**。谢谢**

     **createUnresolved error Error Domain=NSCocoaErrorDomain Code=134130 “操作无法完成。（Cocoa 错误 134130。）” UserInfo=0x20147820 {URL=file://localhost/var/mobile/Applications/3B2BD803-401D-4A95-ACDA -DD6A7D197930/Documents/Database.sqlite，元数据={ NSPersistenceFrameworkVersion = 419; NSStoreModelVersionHashes = { 状态 = <0bfe87fd 1e1b5822 eb704808 86efd0ca 61c108c3 328c095d 2f2eadb8 4c51a17f>; }; NSStoreModelVersionHashesVersion = 3; NSStoreModelVersionIdentifiers = ( "" ); NSStoreType = SQLite；NSStoreUUID = "C2EDD217-1F20-425A-927E-1B9A1C661085"; "_NSAutoVacuumLevel" = 2; }, reason=找不到源存储的模型。** 

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:12:14.940

您是否在文件检查器中选择了当前模型？

![版本设置](https://i.stack.imgur.com/CfCnO.png)

您在 Project Navigator 中的核心数据模型应如下所示

![项目导航器](https://i.stack.imgur.com/uDufB.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T20:31:43.763

我在项目的文件夹中有数据库模型，即使在硬盘上的文件夹中也是如此。当我将数据库模型移动到 xcode 项目的根目录时，版本控制开始工作。**

# exception - Throwing a NPE at the start of method for error checking

> ID：15968997
> 
> 赞同：1
> 
> 时间：2013-04-12T10:28:01.660
> 
> 标签：exception, error-handling, nullpointerexception

So im preparing for interviews and in one of Gayle Laakmans career Cup videos a guy is writing a simple method that takes in an array and does something with it. She mentions his lack of error checking so he adds in this line like so:

```
public int max(int[] array) {
    if (array == null)
        throw new NullPointerException();

    //method body

} 
```

Is it correct to manually throw a NPE exception like this, this exception will get thrown anyway in the method body as it will use the array reference at some point.

A possible advantage to this i can see is that it separates input invalidation from the method logic being invalid and somehow creating a null reference. Otherwise it is a little confusing and maybe IllegalArgumentException would work better?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:22:44.010

进入方法后立即抛出没有什么问题，`NullPointerException`而不是在一些处理完成后等待检测它。如果该方法将失败，它也可能很快失败。

Joshua Bloch 的*Effective Java*`NullPointerException`建议在这种情况下扔掉`IllegalArgumentException`（第 60 条：支持使用标准异常）。

> 如果调用者传入`null`了一些禁止 null 值的参数，则约定将`NullPointerException`其抛出而不是`IllegalArgumentException`.

`IllegalArgumentException`当传入非法的非空值时应该抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-22T06:40:55.247

还可以看看 java 自己的实用程序类`java.util.Objects`：

```
public static <T> T requireNonNull(T obj,
               String message) 
```

检查指定的对象引用是否不为空，如果是则抛出自定义的 NullPointerException。该方法主要用于在具有多个参数的方法和构造函数中进行参数验证，如下所示：

```
 public Foo(Bar bar, Baz baz) {
     this.bar = Objects.requireNonNull(bar, "bar must not be null");
     this.baz = Objects.requireNonNull(baz, "baz must not be null");
 } 
```

*   类型参数：
    **T** - 引用的类型

*   参数：
    **obj** - 检查无效性的对象引用
    **message** - 在引发 NullPointerException 的情况下使用的详细消息

*   返回：如果不为空，则 返回
    **obj**

*   抛出：
    **NullPointerException** - 如果 obj 为 null

来自[https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html)

## 结论

您是否使用此实用程序类是另一个问题，但它明确表明，Java 语言背后的团队打算将**NullPointerException**用于这些目的。

# postgresql - 使用 ADO.Net "System.Data.Odbc" (VB.Net) 从 PostgreSQL 数据库中检索数据

> ID：15968999
> 
> 赞同：0
> 
> 时间：2013-04-12T10:28:07.447
> 
> 标签：postgresql, unicode, ado.net, odbc

虽然我从过去十年一直在使用 SQL Server、Oracle，但我被要求对 PostgreSQL 进行一些研究，经过一些初步调查，很明显我现在正坚持使用 Function 从 PostgreSQL 数据库中检索数据。

使用以下代码检索数据并出现错误（'错误 [26000] 错误：准备好的语句“mytabletest”不存在；'执行查询时出错）

*代码片段*

```
 Dim oDBCommand As DbCommand = GetDBCommand(oConnectionType, "mytabletest", CommandType.StoredProcedure)
    Dim dstResults As DataSet = GetDataSet(ConnectionTypes.ODBC, oDBCommand)

Public Function GetDataReader(dbType As ConnectionTypes, command As DbCommand) As DbDataReader

    Try

        Dim oConnection As DbConnection = GetDBConnection(dbType)

        Dim oDBTransaction As DbTransaction = oConnection.BeginTransaction
        command.Connection = oConnection
        command.Transaction = oDBTransaction

   'GETTING ERROR ON FOLLOWING LINE
        'ERROR [26000] ERROR: prepared statement "mytabletest" does not exist;
        'Error while executing the query
        return command.ExecuteReader()

    Catch ex As Exception
        Throw ex
    Finally
    End Try

    Return Nothing

End Function 
```

我目前正在处理的环境如下：-

```
32位机。
视觉工作室 2010 + SP1
ODBC 提供程序：PostgreSQL Unicode 9.01.02.00
ADO.Net (System.Data.Odbc)

```

**请注意，我愿意接受任何建议，即如果我完全做错了或部分做错了等等。请随时写信。**

为了方便您创建相同的环境，请使用下表/函数定义。

```
--- Simple table to make things easier to understand. <br>
CREATE TABLE mytable
(
  messagetypeid integer NOT NULL,
  messagetype character varying(100) NOT NULL
) 
```

```
-- Function to retrieve data. <br>
CREATE OR REPLACE FUNCTION mytabletest()  <br>
   RETURNS SETOF refcursor AS $$
    DECLARE 
    ref1 refcursor; 
    BEGIN
      OPEN ref1 FOR SELECT * FROM mytable;
      RETURN NEXT ref1;                                                                               
    END;
    $$ LANGUAGE plpgsql; 
```

***请注意：***

```
If I use <br>
  Dim oDBCommand As DbCommand = GetDBCommand(oConnectionType, "SELECT * FROM mytable", CommandType.Text) 
```

然后系统设法从数据库中检索信息而没有任何问题，但是，正如我所提到的，一旦我们使用“功能”，它就会引发异常。

在我从互联网上搜索任何解决方案失败的努力中，有人提到应该用小写创建表，所以为了它，我用小写重新创建，但是问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:25:33.033

我不熟悉，`.net`但我怀疑你的意思更像：

```
GetDBCommand(oConnectionType, "SELECT myfunc()", CommandType.Text) 
```

或者在`SETOF`功能等的情况下。

```
GetDBCommand(oConnectionType, "SELECT * FROM myfunc()", CommandType.Text) 
```

PostgreSQL 本身没有“存储过程”。它确实有`functions`，而且我相信客户端/服务器协议有一种准备语句的方法，然后可以使用不同的变量多次执行这些语句（以节省解析 SQL 的成本），但这应该通过您的客户端库公开。