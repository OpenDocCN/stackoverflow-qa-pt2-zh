# StackOverflow 问答 15701000-15701999

# android - 如何使用其他活动的完成将活动置于前面

> ID：15701001
> 
> 赞同：2
> 
> 时间：2013-03-29T09:58:19.610
> 
> 标签：android, android-activity, activity-finish, home-button

我有两个活动：A 和 B。

从 A 到 B：

**创建**

```
Context context = this; 
```

**点击**

```
Intent i = new Intent(context,B.class);
startActivity(i); 
```

从 B 到 A：（如果 B 有返回 A 的按钮）

```
button.setOnClickListener(new View.OnClickListener(){
   public void onClick(View v){
      finish();
   }
}); 
```

但如果流程是这样的：

A呼叫B，正在观看B的用户单击主页按钮并再次从启动的活动中单击B并单击按钮调用finish（），它转到主页而不是我的第一个活动A。我该怎么做？

编辑：

**流动**

1.  A->B // 使用 startActivity(Intent);
2.  B->Home // 点击设备上的主页按钮
3.  Home->B // 从已启动的活动中单击我的应用程序
4.  B.finish() -> Home 而不是 A //finish 或 onBackPressed 做同样的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:02:36.697

你能试试这个：-

为什么您使用`getApplicationContext()`而不是使用`this`或`Activity A name.`

**A->B**

```
 Intent i = new Intent(yourcurrentActivity,B.class);
 startActivty(i); 
```

**乙->甲**

称呼`finish()`

**如果您使用它，请**更新：- 删除它****

 **```
android:noHistory="true"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:03:53.830

称呼

```
onBackPressed(); 
```

代替

```
finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:04:06.463

试试这个：

```
startActivity(new Intent(B.this,B.class)); 
```

并在活动 A 中完成（）为

```
// in your activity A
Intent i = new Intent(getApplicationContext(),B.class);
startActivity(i);
finish(); 
```

和

```
public void OnBackPressed()
{
finish();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:04:44.230

试试这个：

```
public void startActivityForResult (Intent intent, int requestCode) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T10:33:27.957

检查下面的代码：我有 3 个活动：MainActivity，A_Acvitiy，B_actiivty（希望它按照您的要求工作..）

```
package com.example.androidtest;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void callActivity(View v) {
        if (v.getId() == R.id.button1) {
            // A
            startActivity(new Intent(MainActivity.this, A_activity.class));
        }

        if (v.getId() == R.id.button2) {
            // B
            startActivity(new Intent(MainActivity.this, B_activity.class));
            if (GeneraClass.isFormB) {
                            GeneraClass.isFormB = false;
                finish();
            }
        }
    }
} 
```

A_活动：

```
package com.example.androidtest;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class A_activity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.a_layout);
    }

    public void callActivity(View v) {
        if (v.getId() == R.id.button1) {
            // B
            startActivity(new Intent(A_activity.this, B_activity.class));
                 finish();
        }

    }

} 
```

b_活动：

```
package com.example.androidtest;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class B_activity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.b_layout);
    }

    public void callActivity(View v) {
        if (v.getId() == R.id.home) {
            // home
            GeneraClass.isFormB = true;
            startActivity(new Intent(B_activity.this, MainActivity.class));
            finish();
        }

    }
} 
```

我的额外课程：

```
package com.example.androidtest;

public class GeneraClass {

    public static boolean isFormB = false;
} 
```

所以，**`Home-->A(finish)-->B--->Home(if from b then finish)-->B-->Back--> Home --->Back--> exit App`****

# c++ - 将 C++ 中的字符串拆分并处理为不同的变量

> ID：15701015
> 
> 赞同：2
> 
> 时间：2013-03-29T09:58:59.817
> 
> 标签：c++, string, sorting, stream, split

我有一个包含一堆数据的文本文件，实际上是一个学生列表。
结构类似于：“姓名”“电话”“性别”“学生 ID”“电子邮件”

以下是列表示例：

> Roger Pont 70778745 M 20120345 hills@school.edu
> Tommy Holness 5127438973 M 20120212 tommy@school.edu
> Lee Kin Fong 864564456434 F 30245678 fong@school.edu

数据存储在一个文本文件中，我已经使用 getline() 函数将每一行转换为字符串。

即：student[0] 包含“Roger Pont 7077874567 M 20120345 hills@school.edu”

我的任务是根据 StudentID 升序对记录进行排序。

我的问题是我想将字符串拆分为不同的变量类型。
但是，由于某些名称之间有更多空格并且电话号码包含不同的长度，因此我不能这样使用输入和输出流：
stream >> name[i] >> tel[i] >> gender[i] >> 学生ID[i] >> 电子邮件[i];

有什么想法可以将字符串拆分为不同的变量吗？

提前致谢。

备注：我已经读过这篇文章（[Splitting a string into multiple variables in C++](https://stackoverflow.com/questions/10194000/splitting-a-string-into-multiple-variables-in-c)），但与那种情况不同，我没有特定的模式，例如在表示年龄的整数之前有“年龄”一词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:07:44.223

```
Roger Pont 70778745 M 20120345 hills@school.edu
Tommy Holness 5127438973 M 20120212 tommy@school.edu
Lee Kin Fong 864564456434 F 30245678 fong@school.edu 
```

看上面的数据，如果我们把每一行都*倒过来*处理，那么问题就变得很简单了：

*   将*单词*分成一行。说字数是`N`。
*   最后一个词是 *email*，即`words[N-1]`=> 电子邮件地址
*   倒数第二个是*studentid*，即`words[N-2]`=> 学生 id。
*   同样，倒数第三个是*性别*，倒数第四个是*电话*，剩下的单词就是*名字*。

这给了你足够的暗示。

# 代码：

```
#include <iostream>
#include <sstream>
#include <vector>
#include <string>
#include <iterator>
#include <cassert>

struct student
{
  std::string name;
  std::string phone;
  std::string gender;
  std::string student_id;
  std::string email;
};

int main()
{
    std::vector<student> students;

    std::string line;
    while(std::getline(std::cin, line))
    {
        std::istringstream ss(line);
        std::istream_iterator<std::string> begin(ss), end;
        std::vector<std::string> words(begin, end); 

        assert(words.size() >= 5); 

        int n = words.size() - 1;
        student s { words[0], words[n-3], words[n-2], words[n-1], words[n] };
        for (int i = 1 ; i < n - 3 ; i++) s.name += " " + words[i];

        students.push_back(s);
    }

    //printing
    for(auto && s : students)
        std::cout << "name       = " << s.name  << "\n"
                  << "phone      = " << s.phone << "\n"
                  << "gender     = " << s.gender << "\n"
                  << "student_id = " << s.student_id << "\n"
                  << "email      = " << s.email << "\n\n";
} 
```

# 输入：

```
Roger Pont 70778745 M 20120345 hills@school.edu
Tommy Holness 5127438973 M 20120212 tommy@school.edu
Lee Kin Fong 864564456434 F 30245678 fong@school.edu 
```

# 输出：

```
name       = Roger Pont
phone      = 70778745
gender     = M
student_id = 20120345
email      = hills@school.edu

name       = Tommy Holness
phone      = 5127438973
gender     = M
student_id = 20120212
email      = tommy@school.edu

name       = Lee Kin Fong
phone      = 864564456434
gender     = F
student_id = 30245678
email      = fong@school.edu 
```

# 在线演示

*   [在 Ideone 演示](http://ideone.com/qra2KJ)

现在花一些时间来理解代码。我向您展示的代码是使用 C++11 编写的。它演示了现代 C++ 的许多习语。

*   如何读取文件。逐行。
*   如何分割一条线，并填充一个字符串向量。
*   如何填充结构（具体问题）

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:13:11.267

```
#include <iostream>
#include <vector>
#include <sstream>

using namespace std;

    std::vector<std::string> strings;
    std::istringstream f("Roger Pont 70778745 M  20120345 hills@school.edus");
    std::string s;
    while (std::getline(f, s, ' ')) {
        std::cout << s << std::endl;
        strings.push_back(s);
    } 
```

这有两个单词之间的间距大于 1 个空格 ' ' 的问题。

# css - 产品 div 的定位变得混乱

> ID：15701019
> 
> 赞同：0
> 
> 时间：2013-03-29T09:59:13.550
> 
> 标签：css, html

你看，页面应该是这样的：

[http://www.whybaguio.com/php/shop/shoplistings.php?arrange=default](http://www.whybaguio.com/php/shop/shoplistings.php?arrange=default)

但是有些页面看起来像这样： [http ://www.whybaguio.com/php/eat/eatlistings.php?arrange=default](http://www.whybaguio.com/php/eat/eatlistings.php?arrange=default)

我想我知道类别 div 是罪魁祸首......但是你知道我可以通过什么方法来修复它而不使类别的字体再次变小吗？:(

我希望你明白我的意思..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:41:46.463

看看您的网站，右侧的导航按钮过于向下推列。当图像丢失时，它会导致其下方的元素向上移动。我已经用 fireBug 更改了以下内容，现在对我来说看起来很正常。

将右侧导航移到上方。

`.righttilenav {margin-right:52px;}`

设置最小高度以保持所有元素的高度相同。

`.col-1-8 {min-height:278px;}`

# iphone - 使用目标 C 编写 SQLite 脚本

> ID：15701020
> 
> 赞同：0
> 
> 时间：2013-03-29T09:59:14.163
> 
> 标签：iphone, ios, database, ipad, sqlite

我有两个 .sqlite 文件。一份用于完整版，一份用于精简版。我正在使用以下代码为一种条件选择一个 .sqlite 文件：

```
if (FULLVERSION) {
self.databaseName = @"Alpha.sqlite";
}
else {
self.databaseName = @"AlphaLite.sqlite";
} 
```

现在，当我查询时，我想在其中使用这个 self.databaseName。我现在这样做：

```
-(NSMutableArray *) Alpha {
    sqlite3 *database;
    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
        const char *sqlStatement = "SELECT * FROM Alpha";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

    }
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);

    return alpha;   
} 
```

在“SELECT * FROM Alpha”行中，我想使用 self.databaseName 代替 Alpha，它将根据条件具有数据库名称。

这该怎么做？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:04:18.893

在`SELECT`声明中，替换`const char *sqlStatement = "SELECT * FROM Alpha";`为以下两行：

```
NSString *sqlString = [NSString stringWithFormat:@"SELECT * FROM %@", self.databaseName];
const char *sqlStatement = [sqlString UTF8String]; 
```

或者

替换`const char *sqlStatement = "SELECT * FROM Alpha";`为

```
const char *sqlStatement;
if (FULLVERSION) {
    sqlStatement = "SELECT * FROM Alpha";
} else {
    sqlStatement = "SELECT * FROM AlphaLite";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:05:20.740

您可以使用 Stringwithformat ，然后获取 utf8string

```
NSString *sql = [NSString stringWithFormat:@"SELECT * FROM %@",self.databaseName];
const char *sqlStatement = [sql UTF8String]; 
```

# jquery - 带有显示的 div 中的 jQuery 计数复选框：阻止但不显示：无

> ID：15701025
> 
> 赞同：1
> 
> 时间：2013-03-29T09:59:21.833
> 
> 标签：jquery

我想使用 jquery 来计算 div 中复选框的数量，但仅当 div 显示设置为阻止时，而不是设置为无时。这会根据按钮按下而改变。

到目前为止，我已经尝试过：

```
$("div:#divid:visible").find('input:checkbox').length
$('input:checkbox:visible').length
$("div:#divid").find('input:checkbox.visible').length 
```

似乎总是发生的是，如果包含“可见”，那么无论其父 div 是 display:none 还是块，它总是计算 0 个复选框，如果我不包括“可见”，它总是计算所有复选框，再次忽略父div的显示状态。复选框本身没有显示属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:00:34.257

你的第一个有额外`:`的，你想要：

```
$("div#divid:visible").find('input:checkbox').length
//    ^---- No : here 
```

尽管`div`开头的那个是没有意义的（无害，但没有意义），除非元素有时`id="divid"`可能是 a`div`而不是其他时间，如果它不是 a ，你想跳过它`div`。更有可能的是：

```
$("#divid:visible").find('input:checkbox').length 
```

虽然实际上，您可以只使用一个选择器而不是调用`find`：

```
$("#divid:visible input:checkbox").length 
```

另请注意，您需要确保相关`div`内容位于 DOM 中，并且具有`display`您想要在上面的代码运行时检查的设置，因为它会*及时*查看所有内容。

示例 - [Live Copy](http://jsbin.com/oyosod/1) | [来源](http://jsbin.com/oyosod/1/edit)

HTML：

```
<div id="div1">
  <input type="checkbox">
  <input type="checkbox">
  <input type="checkbox">
  <input type="checkbox">
  <input type="checkbox">
</div>
<div id="div2" style="display: none">
  <input type="checkbox">
  <input type="checkbox">
  <input type="checkbox">
</div> 
```

JavaScript：

```
(function($) {

  display('$("#div1:visible input:checkbox").length = ' + $("#div1:visible input:checkbox").length);
  display('$("#div2:visible input:checkbox").length = ' + $("#div2:visible input:checkbox").length);

  function display(msg) {
    $("<p>").html("<code>" + msg + "</code>").appendTo(document.body);
  }
})(jQuery); 
```

结果：

```
$("#div1:可见输入：复选框").length = 5

$("#div2:可见输入：复选框").length = 0
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:00:55.417

试试这个

```
 $("#divid:visible").find('input[type=checkbox]').length; 
```

# c# - Sn.exe 添加密钥对，但项目仍未构建

> ID：15701026
> 
> 赞同：0
> 
> 时间：2013-03-29T09:59:22.357
> 
> 标签：c#

我们正在将构建机器移动到另一台服务器，并且我们移动了用于强名称签名的证书。我正在尝试使用如下 sn 工具添加用于签署程序集的密钥对：

```
sn –i “C:\Certificates\MyCert.pfx” Key_Value_Pair_Name 
```

sn 工具报告密钥对已成功添加，但是当我尝试构建解决方案时，出现以下错误：

```
Cryptographic failure while signing assembly ‘assembly name’ – 
the key container name ‘Key_Value_Pair_Name’ doesn’t exist. 
```

我们的解决方案是基于 .NET 3.5 构建的，我尝试将 sn 工具用于 .NET 3.5 以及其他框架版本，但我仍然无法让它工作。

任何关于可能是什么问题的想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:12:53.953

您必须将您的密钥文件添加到源代码管理中，因为当您构建时，他会搜索您的密钥但没有找到。

或者您必须调整密钥文件的路径。

# sql - 从 SQL Server 2008 发送电子邮件

> ID：15701031
> 
> 赞同：0
> 
> 时间：2013-03-29T09:59:42.610
> 
> 标签：sql, sql-server, sql-server-2008, email, database-mail

我想从 SQL Server 2008 发送电子邮件。

这是我的代码：

```
USE mydatabase

declare @keywords nvarchar(3000)  
Select @keywords = null

SELECT 
    @Keywords = Coalesce(@Keywords + '; ', '') + Email 
from 
    SharedDataUser

EXEC msdb.dbo.sp_send_dbmail 
    @profile_name = 'MyTestProfile', 
    @recipients=@keywords,
    @subject = 'Test mail' 
```

我可以通过数据库邮件发送电子邮件。

**问题**

我正在向多个用户发送邮件。每个用户都有不同的截止日期，我需要用电子邮件正文发送截止日期。我没找到路。谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:01:35.880

使用这种方法，您将无法为每个收件人提供不同的正文。您可以使用光标遍历收件人，为每个收件人调用 sp_send_dbmail。然后，您可以将@body 参数设置为适合该收件人的任何内容，即他们的截止日期。

# backbone.js - Backbone.js 模型验证不起作用

> ID：15701036
> 
> 赞同：1
> 
> 时间：2013-03-29T10:00:01.350
> 
> 标签：backbone.js, model-validation

以下代码有什么问题？

```
(function(){

    window.App = {
        Models: {},
        Collections: {},
        Views: {}
    };

    window.template = function(id) {
        return _.template($('#' + id).html());
    };

    App.Models.Task = Backbone.Model.extend({
        defaults:{
            title: '',
            priority: 0
        },

        validate: function(attrs, options){
            if (attrs.priority < 0){
                return 'Priority cannot be negative.';
            }
        }
    });

    var task = new App.Models.Task ({ title: 'Sample Task', priority: 5 });
    task.on('invalid', function(model, error) { console.log(error); })

    task.save({ priority: -9 }); // Should not pass validation
    console.log(task.validationError); // Prints a validation error

    console.log(task.toJSON()); // Model is updated with -9
    console.log(task.isValid()); // false
})(); 
```

输出：

```
Priority cannot be negative. app.js:27
Priority cannot be negative. app.js:30
Object {title: "Sample Task", priority: -9} app.js:32
Priority cannot be negative. app.js:27
false 
```

我目前正在观看一个视频教程，它基于老版本的主干.js，其中默认情况下对`set`方法强制执行验证。但在当前版本中，默认情况下对`save`方法强制执行验证。

但即使它不是一个有效值并且验证没有通过，为什么它仍然将值设置为 -9。验证不通过时不应该不设置值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-14T20:15:33.457

在当前版本的 Backbone.js 中：

> 默认情况下 validate 在保存之前调用，但如果 {validate:true} 被传递，也可以在设置之前调用。

因此，为了在您的方法上调用此方法，您应该在模型上设置属性时将 validate 设置为 true，如下所示：

```
yourmodel.set('someproperty', 14, {validate: true}); 
```

我希望我的回答对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:02:03.990

使用新版本，保存新数据时，需要通过验证选项：

```
task.save({ priority: -9 }, {validation: true}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:16:57.290

这是官方网站代码的问题。查看`save`函数的来源，我了解到在调用之后会发生`options.validate`to的预设。`true``set`

您可以尝试切换行的顺序（在`save`函数中`Model`）：

```
 if (attrs && (!options || !options.wait) && !this.set(attrs, options)) return false;

  options = _.extend({validate: true}, options); 
```

到：

```
 options = _.extend({validate: true}, options);

   if (attrs && (!options || !options.wait) && !this.set(attrs, options)) return false; 
```

但我不确定它不会破坏其他东西。

或者您可以使用来自 GitHub 存储库的代码 - 有一个更改可以解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:52:02.790

好的，您只需将标志“等待”设置为真或将“验证”标志设置为真。如何？好吧，如果您不将等待标志设置为 true，则将使用您在验证之前通过 save 方法的选项调用 set 方法。因此，由于您不需要传递 validate 标志，因此 set 方法不会接收它，不运行验证并设置属性。
由于文档不清楚等待标志：您的服务器仍将收到更新的数据。

# ruby-on-rails - rails 3.2 引导下拉菜单

> ID：15701039
> 
> 赞同：0
> 
> 时间：2013-03-29T10:00:22.903
> 
> 标签：ruby-on-rails, twitter-bootstrap, drop-down-menu

如果我点击我的下拉菜单，什么都没有发生......

这里有几行代码：

**应用程序/资产/javascripts/application.js**

```
//= require bootstrap
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

**应用程序/视图/布局/application.html.erb**

```
<%= stylesheet_link_tag    "application", media: "all" %> 
<%= javascript_include_tag "application", media: "all" %>
<%= csrf_meta_tags %>
<%= favicon_link_tag %> 
```

**应用程序/视图/布局/_header.html.erb**

```
<header class="navbar navbar-fixed-top">
<div class="navbar-inner">
  <div class="container">
    <%= link_to "Something", root_path, id: "logo" %>
    <ul class="nav pull-right noline">
      <li><%= link_to "Docs",  '/home' %></li>
        <% if user_signed_in? %>
          <li id="fat-menu" class="dropdown bold">
            <a href="#fat-menu" class="dropdown-toggle" data-toggle="dropdown">
              <%= current_user.username %><b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><%= link_to "Settings", edit_user_registration_path %></li>
              <li class="divider"></li>
              <li>
                <%= link_to "Logout", destroy_user_session_path %>
              </li>
            </ul>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</header> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:13:04.157

**更新：**似乎`bootstrap-sass`版本中的 gem`2.0.0`提供了使用过时`$.browser`属性的 Twitter Bootstrap。因此将其更新到最新版本（`2.2.2`目前为止）。

将指令的顺序更改为`application.js`：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

**重要的是按照顺序~

//= 要求树。是最后一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:12:57.143

试试这个：

```
jQuery(document).ready(function($) {
  $('.dropdown-toggle').dropdown();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:08:58.180

您是否尝试过包含以下内容：

```
<%= javascript_include_tag "jquery" %>
<%= javascript_include_tag "jquery.min" %>
<%= javascript_include_tag "jquery-ui" %> 
```

我无法确定，但如果不是，请尝试包含这些文件。确保它们位于asset/javascript 文件夹中

我的意思是这只是一个示例，您也可以将它们包含`application.js`在内

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T04:22:15.020

我有一个类似的问题。通过更改我使用的引导程序版本来修复它 - >

宝石'bootstrap-sass'，'2.3.1.0'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T12:43:05.120

我回答了一个类似的问题，下拉菜单也没有触发，但这只发生在我自己身上。

```
<a href="#" ,class="dropdown-toggle" ,data-toggle="dropdown"> 
```

是的，这只是一个语法错误。我以前没有在我的作品中使用过 HTML 语言。

wtf。

```
<a href="#" class="dropdown-toggle" data-toggle="dropdown"> 
```

Emmm，如果你也阅读了 Micheal Heart 的 Rails 教程书，并通过其他问题的解决方案修改了代码，那么，将它们转换为原始代码。

# mongodb - Elasticsearch 方案优化

> ID：15701041
> 
> 赞同：0
> 
> 时间：2013-03-29T10:00:31.153
> 
> 标签：mongodb, lucene, elasticsearch

当我使用 ElasticSearch 时，我可以将 json 文档保存到其中并默认通过它们进行搜索。我还可以指定一些索引设置，我可以在其中描述字段类型和索引设置。我的问题是关于在 ElasticSearch 中存储数据的内部实现。就像在 MongoDB 中一样，我可以在此处存储动态 json 数据，因此所有文档都将按原样保存（实际上在 BSON 中，但在这里不适用）。例如：

```
{
  firstName:"A",
  lastName: "B"
} 
```

在这里我们可以看到“方案数据”比“实际数据”占用更多的磁盘空间。因此，在 MongoDB 中，将“方案数据”的大小最小化是一种很好的做法，如下所示：

```
{
   f:"A",
   l:"B"
} 
```

并在应用程序代码中提供一些映射以支持此方案。在 Elasticsearch (Lucene) 中，我可以指定一些方案，因此在内部它只能保存“实际数据”而不是“实际+方案”，但我不确定这一点，因为我也可以存储动态 json 数据。

所以问题是我应该在 ElasticSearch 中实现这样的优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:56:56.930

是的，它会占用更多空间，但我不会担心。Elasticsearch 中的文档在`_source`字段中存储为完整的 JSON。占用磁盘空间，返回结果时临时占用内存。

但是，您可以将`_source`字段设置为压缩，从 0.90 开始的 Elasticsearch 版本中，整个段都被压缩，并且字段名称是压缩的良好候选者。

我宁愿让我的文件可读而不是神秘。

# ruby-on-rails - 如何使特定于某个对象ID的rails缓存检索

> ID：15701043
> 
> 赞同：0
> 
> 时间：2013-03-29T10:00:36.513
> 
> 标签：ruby-on-rails, dalli

对于 bar_id = 1，缓存在第一次访问时形成。但即使 bar_id 稍后更改为 2，也会保留 1 的值。如何使它跨 bar_id(s) 工作

```
 @foo = Rails.cache.fetch("foo_by_id", expires_in: 10.minutes) do
    Foo.where(:search => params['search'], :bar_id => params['bar_id']).first
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:02:01.087

您的缓存键必须包含您想要用来分隔缓存的任何动态数据。在您的情况下，缓存键必须包含 bar_id。我要做的是：

```
@foo = Rails.cache.fetch("foo_by_id:#{params['bar_id']}", expires_in: 10.minutes) do
    Foo.where(:search => params['search'], :bar_id => params['bar_id']).first
 end 
```

# java - 将数据保存在一个数组中，然后在另一个类中重新使用这个数组，使用@DataProvider，我们怎样才能做到这一点？

> ID：15701057
> 
> 赞同：0
> 
> 时间：2013-03-29T10:01:20.273
> 
> 标签：java, webdriver, testng

我创建了不同的帐户，所有帐户都有唯一的 a/c id。AccCreation.java 创建账户，AccountDeletion.java 删除这些创建的测试账户。我想要的是：

1.  我可以打印唯一的 a/c id
2.  我想将这些唯一的空调 ID 保存在一个数组中
3.  AccountDeletion.java，将运行相同的代码，直到这个数组的长度。

我正在使用 java 在 ubuntu 上编写我的脚本。我这样做是因为我想验证用户是否能够创建许多帐户，并且管理员可以批准/删除这些帐户。

# rvm - 安装 rvm 时出错（Ruby 版本管理器）

> ID：15701058
> 
> 赞同：3
> 
> 时间：2013-03-29T10:01:24.620
> 
> 标签：rvm

我试图安装 Ruby 版本管理器来安装 Ruby on Rails。

我正在关注这个链接。：[https ://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)

但是，我收到此错误。

```
$ curl -L get.rvm.io | bash -s stable --auto
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   184  100   184    0     0      8      0  0:00:23  0:00:20  0:00:03   562
100 11861  100 11861    0     0    251      0  0:00:47  0:00:47 --:--:--  1974
Warning, --auto is deprecated in favor of --auto-dotfiles.
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   124  100   124    0     0      5      0  0:00:24  0:00:23  0:00:01    35
100 1631k  100 1631k    0     0   5867      0  0:04:44  0:04:44 --:--:-- 11223

Could not download 'https://github.com/wayneeseguin/rvm/archive/stable.tar.gz'.
  curl returned status ''. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T23:41:39.290

***使用 RUBY 安装 RVM***

> **sudo apt-get install curl**

安装后安装 rvm 也 ruby

> **\curl -sSL [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定**

如果您遇到上述行的问题（无法连接到 get.rvm.io 端口 443：网络无法访问）

在浏览器中转到**[https://get.rvm.io](https://get.rvm.io)**将页面保存在任何位置

> **使其成为可执行**文件名 rvm-installer
> 
> **chmod +x rvm 安装程序**
> 
> 然后执行以下操作
> 
> **bash rvm-installer stable --ruby**

然后检查**rvm list** 注意终端上 ruby​​ 列表的版本

**将终端更改为登录shell。打开一个新的终端**

然后**rvm 使用 2.1.1** =>（2.1.1 版本）

然后它完成了！

pd@admin:~$ **ruby​​ -v**

ruby 2.1.1p76（2014-02-24 修订版 45161）[x86_64-linux]

* * *

```
STEPS
1: go to [https://get.rvm.io][1] save the page in in home directory(filename rvm-installer) 
2: chmod +x rvm-installer
3: bash rvm-installer stable --ruby
4:rvm use 2.1.1
5:gem install rails 
```

程序员继续使用 ruby​​ 进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:13:58.933

似乎您无法从 github 下载该软件包。在我这边，`https://github.com/wayneeseguin/rvm/archive/stable.tar.gz`用浏览器下载包没问题。如果您在浏览器中遇到相同的错误，则可能是网络问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:29:11.093

1) 安装 RVM

```
$ sudo apt-get install curl
$ curl -L https://get.rvm.io | bash -s stable --ruby
(Refer  https://rvm.io/rvm/install/)
$ source /home/sodel/.rvm/scripts/rvm ( enable rvm) 
```

这将安装最新的稳定 ruby​​。要安装另一个版本，请运行 rvm install

2) `rvm install 1.9.3`(它将安装 ruby​​ 1.9.3)

3) `rvm use 1.9.3`(使用最新版本的 ruby​​)

4) 开始安装 gem 示例：`gem install bundle`

5) `bundle install`（适用于所有宝石）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T11:04:15.303

如果您有任何防病毒软件，请尝试检查您的防病毒软件，我在从 ruby​​gems.org 获取 rails 时遇到了同样的问题，它由于某种原因阻止了 http 连接。如果有，请尝试禁用您的防病毒软件，然后重试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-02T12:23:56.563

我也遇到了同样的问题，但我删除了“网址中的安全部分，它对我有用”试试这个

```
$ curl -L http://get.rvm.io | bash -s stable --ruby 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-27T19:41:04.427

在我的 cygwin 系统上没有安装 curl。相反，我的 Windows 上必须有一个 cygwin 子系统使用的版本。

我已经通过 cygwin setup.exe 安装了 curl 并且所有东西都运行文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-17T05:01:25.700

据我所见，在此错误之前有一个错误。它说 curl 已经过时了。我不得不再次升级 curl 和 den 我继续安装 rvm 。为我工作，虽然网络错误也很有可能发生。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-04T03:09:29.393

在 Ubuntu 上使用它的包管理器：

```
sudo apt-get install ruby-rvm 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-21T11:01:14.823

我遇到了类似的错误，我通过更改`https`来解决它以`http`获得更多说明，您可以查看下面的简短屏幕。

![使用 Cygwin 安装 RVM](../Images/1fca923f34e612438290560aee79b436.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-02T10:16:52.487

这个解决方案对我有用。

这是一个互联网协议问题。我在 curl 之前做过，一切正常

```
echo ipv4 >> ~/.curlrc 
```

所以我的步骤是：

```
gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
echo ipv4 >> ~/.curlrc
\curl -sSL https://get.rvm.io | bash -s stable --ruby 
```

# android - android中textview上的数学公式

> ID：15701061
> 
> 赞同：7
> 
> 时间：2013-03-29T10:01:34.997
> 
> 标签：android, math

我正在开发一个应用程序，我必须在来自网络的 textView 上设置数学公式。例如：我想设置二次公式，因为它出现在儿童教科书上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:05:05.800

**使用 MathJax**

[示例 android 在这里](http://cs.jsu.edu/wordpress/?p=498)

# java - Java 线程何时空闲？

> ID：15701064
> 
> 赞同：6
> 
> 时间：2013-03-29T10:01:38.957
> 
> 标签：java, multithreading

只需查看 Java[线程状态](http://docs.oracle.com/javase/1.5.0/docs/api/index.html?java/lang/Thread.State.html)：

```
NEW
A thread that has not yet started is in this state.
RUNNABLE
A thread executing in the Java virtual machine is in this state.
BLOCKED
A thread that is blocked waiting for a monitor lock is in this state.
WAITING
A thread that is waiting indefinitely for another thread to perform a particular action is in this state.
TIMED_WAITING
A thread that is waiting for another thread to perform an action for up to a specified waiting time is in this state.
TERMINATED
A thread that has exited is in this state. 
```

怎么没有空闲状态？或者什么状态最接近代表空闲线程？
是否`RUNNING`只是不在 CPU 上执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T10:03:20.057

撇开不说`NEW`，`TERMINATED`“空闲”的意思是“等待东西”。这包括以下所有内容：

```
BLOCKED
WAITING
TIMED_WAITING 
```

> 是否`RUNNING`只是不在 CPU 上执行？

没有`RUNNING`，有`RUNNABLE`。这大致意味着“有事情要做”，但没有说明线程现在是否正在实际运行（它可能正在等待内核可用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:10:47.283

A BLOCKED thread is one that has made a call to slow and/or shared resource. Since the thread cannot continue until the call returns, the thread is idle.

WAITING and TIMED_WAITING is when the thread is waiting for another thread (as opposed to some resource), and will be idle until the other thread allows it to resume.

NEW merely has not been scheduled on a CPU yet. It is essentially RUNNABLE, but this points out the fact that it was just created. I personally would not consider this idle.

RUNNABLE means it is either running, or is waiting to be assigned to a CPU.

# asp.net - ASP.NET Webapi 发布文件引发 IOException

> ID：15701065
> 
> 赞同：1
> 
> 时间：2013-03-29T10:01:43.920
> 
> 标签：asp.net, asp.net-web-api

我做了一个公开 POST 动作的小型 Webapi。我创建了一个自定义`MultipartFileStreamProvider`来处理有效负载并存储文件。当我发送大量文件时会出现问题（更准确地说，一次依次发送 1500 个文件）。在我的覆盖方法`ExecutePostProcessingAsync`中，我有以下行尝试读取文件

```
using (var fs = new FileStream(file.LocalFileName, FileMode.Open, FileAccess.Read, FileShare.Read)) 
```

但它抛出一个`IOException`

```
"The process cannot access the file" 
```

对于其中极少数（通常是 1500 个文件中的一两个文件）。我不知道谁锁定了它（可能是 IIS 或 asp.net）

任何建议（我可能会在 10 毫秒后添加一些重试，但希望正确了解出了什么问题以及如何正确处理这些文件上传）

# ios - 我应该使用什么版本的 Xcode 在 iPhone 3gs 设备 6.1.2 (10B146) 上运行我的应用程序

> ID：15701070
> 
> 赞同：0
> 
> 时间：2013-03-29T10:01:56.687
> 
> 标签：ios, xcode, ios6, version, osx-snow-leopard

我想在设备上运行我的应用程序。我有 iPhone 3GS 版本 6.1.2 (10B146)。我当前的 Xcode 版本是 4.0.2，我正在运行 Snow Leopard 10.6.6

以下是主办方告诉我的：

> “iPhone”上的 iOS 版本与此 iOS SDK 安装支持开发的任何 iOS 版本都不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。
> 
> 安装在 iPhone 6.1.2 (10B146) 上的操作系统
> 
> Xcode 支持的 iOS 版本最新 4.3、4.2、4.1、4.0.2、

我读到 4.2 是支持 Snow Leopard 的最后一个 XCode 版本，但我想知道这个版本的 Xcode 是否支持我的设备版本？所以我可以在设备上运行我的应用程序。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:04:23.040

您需要使用 Xcode 4.4+，为此您需要升级到 Lion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:04:28.680

您应该将您的 Mac OS 更新为 Lion，并使用 xCode 4.6

# delphi - Delphi XE3 在退出时不保存打开的 IDE 选项卡

> ID：15701071
> 
> 赞同：0
> 
> 时间：2013-03-29T10:01:57.743
> 
> 标签：delphi, ide, desktop

我正在运行 win 7（64 位）Delphi XE3，

当我在旧的 Delphi XE 中打开一个项目时，它会打开我上次保存项目时打开的所有表单。

我怎样才能让 XE3 有同样的动作？

显然是一个简单的问题，但如果我找不到将布局保存在 XE3 中的设置，我会感到震惊。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:58:21.427

您必须在 中打开它`Tools->Options->Environment Options`。这是来自 XE3，但它是自 Delphi 2 或 3 以来的同一个位置：

![XE3 自动保存选项](../Images/88ffb069ad36b48aaa570458134e3075.png)

只需检查`Project desktop`项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:06:42.363

我认为您需要在“环境选项”->“自动保存选项”中设置“项目桌面”选项（这就是该选项在 D2010 中的位置，但我认为 XE3 并没有改变）。

*更新*

好的，花点时间查看 wiki - 请参阅[环境选项](http://docwiki.embarcadero.com/RADStudio/XE3/en/Environment_Options)主题。

# java - ioio代码LCD JHD162A无法初始化

> ID：15701072
> 
> 赞同：1
> 
> 时间：2013-03-29T10:01:59.870
> 
> 标签：java, lcd, ioio

**在大约 5 小时的作业后在这里提问，因此避免来自 GOOGLE 的热门搜索参考**

* * *

我正在尝试将 LCD JHD162A 连接到 ioio V1，但 LCD 未初始化，它显示单行黑盒，我的意思是“ **LCD 未正确初始化**”，可能是什么原因？任何人都可以帮助**核心代码**如下所示，代码有什么错误吗？

连接：

* * *

*   液晶 16x2 | 回复 | E | D0 | D1 | D2 | D3 | D4 | D5 | D6 | D7 |

    * * *

*   IOIO 板 | 端口 1 | 端口 2 | 端口 3 | 端口 4 | 端口 5 | 端口 6 | 端口 7 | 端口 8 | 端口 9 | 端口 10 |

    * * *

**所有连接都正常并检查三次或更多**
**信息：对比度可调**

**核心代码：**

```
class Looper extends BaseIOIOLooper {

// Create object for assigned to output port
private DigitalOutput D0,D1,D2,D3,D4,D5,D6,D7,RS,E;

// This function will do when application is startup
// Like onCreate function but use with ioio board
@Override
public void setup() throws ConnectionLostException {

    // Assigned eacth object to each output port and initial state is false

    D0 = ioio_.openDigitalOutput(3, false);
    D1 = ioio_.openDigitalOutput(4, false);
    D2 = ioio_.openDigitalOutput(5, false);
    D3 = ioio_.openDigitalOutput(6, false);
    D4 = ioio_.openDigitalOutput(7, false);
    D5 = ioio_.openDigitalOutput(8, false);
    D6 = ioio_.openDigitalOutput(9, false);
    D7 = ioio_.openDigitalOutput(10, false);
    RS = ioio_.openDigitalOutput(1, false);
    E = ioio_.openDigitalOutput(2, false);

            lcd_init();
            Print("LCD is ok", 0x82);

    }

}

// This function will always running when device connect with ioio board
// It use for control ioio board
@Override
public void loop() throws ConnectionLostException { }

// Function for send high pulse to LCD
public void enable() {
    try {

        // Set e to be High
        E.write(true);

        // Send high pulse for one millisecond
        Thread.sleep(1);

        // Set back to Low
        E.write(false);
    } catch (ConnectionLostException e) {
    } catch (InterruptedException e) { }
}

// Function for convert integer to boolean and send to data port on LCD
public void senddatabit(int i) {
    // Call function for convert integer to boolean
    // and set boolean logic to each port
    try {
        D0.write(check(i));
        D1.write(check(i >> 1));
        D2.write(check(i >> 2));
        D3.write(check(i >> 3));
        D4.write(check(i >> 4));
        D5.write(check(i >> 5));
        D6.write(check(i >> 6));
        D7.write(check(i >> 7));
    } catch (ConnectionLostException e) {
        e.printStackTrace();
    }       

    // Call enable function
    enable();
}

// Function for convert integer value to boolean
public boolean check(int i) {

    // Create variable for convert binary to boolean
    // Use for command LCD on IOIO Board
    boolean st = false;
    i = i & 0x01;
    // If i = 0 set st = false or if i =1 set st = true
    // and return st back to main program
    if(i == 0x00)
        st = false;
    else if(i == 0x01)
        st = true;
    return st;
}

// Send command to LCD
public void lcd_command(int com) {
    try {
        // Set rs port to low
        RS.write(false);
    } catch (ConnectionLostException e) {
        e.printStackTrace();
    }

    // Call senddatabit for send command
    senddatabit(com);
}

// Send command to LCD
public void lcd_write(int text) {
    try {
        // Set rs port to high
        RS.write(true);
    } catch (ConnectionLostException e) {
        e.printStackTrace();
    }

    // Call senddatabit for send data
    senddatabit(text);
}       

// Send data to LCD
public void lcd_init() {

    // LCD 8 Bit 5x7 Dot 2 Line
    lcd_command(0x38);

    // Clear screen
    lcd_command(0x01);

    // Display on, no cursor
    lcd_command(0x0C); 

}

// Send one letters to LCD with set address
public void SendC(char c, int address) {

    // Set address
    lcd_command(address);

    // Send the letters to LCD
    lcd_write(Integer.valueOf(c));
}

// Send text string to LCD
public void Print(String str, int address) {

    // Send the letters one by one until the end
    for (int i = 0; i < str.length(); i++) {
        SendC(str.charAt(i), address);
        address++;
    }
}
} 
```

# lua - & 在 os.execute

> ID：15701075
> 
> 赞同：0
> 
> 时间：2013-03-29T10:02:09.357
> 
> 标签：lua

```
os.execute("start http://test.aspx?arg1=one&arg2=two") 
```

我收到此错误：

> 'arg2' 不是内部或外部命令、可运行程序或批处理文件。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:06:18.993

Windows 解释`&`为命令分隔符

```
os.execute'start "http://test.aspx?arg1=one&arg2=two"' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T10:12:01.317

在 shell 语言中，`&`并`;`充当命令分隔符。您需要将命令括在双引号内才能正常工作。

```
os.execute("start \"http://test.aspx?arg1=one&arg2=two\"") 
```

或者更简单地说：

```
os.execute([[start "http://test.aspx?arg1=one&arg2=two"]]) 
```

# crossrider - Crossrider：在上下文菜单中使用鼠标位置

> ID：15701078
> 
> 赞同：0
> 
> 时间：2013-03-29T10:02:29.850
> 
> 标签：crossrider

我们想使用 appAPI.openURL 但代替发送 data.selectedText 我想发送鼠标下元素的文本。但我找不到获取鼠标位置的方法。我的想法是在 appAPI.ready 中添加以下内容

```
$().mousemove(function(event) {
myPositionX = event.pageX ;
myPositionY = event.pageY ;
} 
```

并且有两个全局变量`myPositionX` ，`myPositionY`我可以在我的后台代码中访问它们以作为我的 URL 的参数进行传输。但这似乎不起作用。我在做什么疯了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:58:37.300

您会很高兴地注意到，您并没有发疯，只是错过了将处理程序附加到页面所需的选择器。因此，为了使您的代码正常工作，请按照以下经过验证的代码将**mousemove**处理程序绑定到**文档对象：**

```
$(document).mousemove(function(event) {
    myPositionX = event.pageX ;
    myPositionY = event.pageY ;
}); 
```

# flash - 闪光灯上有白带

> ID：15701082
> 
> 赞同：1
> 
> 时间：2013-03-29T10:03:06.893
> 
> 标签：flash

我根本不是闪光者。我需要在页面中嵌入 Flash，仅此而已。

但是，当嵌入闪光灯时，我在闪光灯的左侧和右侧看到两条白色条纹。生产它的闪光灯声称它的侧面没有白色条纹。

这是我用来嵌入它的代码

```
<div id="vegacer_def_banner"></div>
<script type="text/javascript">
    var so2 = new SWFObject("flash/vegacerdefbanner2.swf", "mymovie", "180", "100", "0", "");
    so2.addParam("wmode", "opaque");
    so2.write("vegacer_def_banner");
</script> 
```

正如我所说，我从未使用过闪光灯，也无法弄清楚问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:42:20.553

您的`.swf`文件的尺寸可能不是`180*100`. `stage.width`您可以使用和检测原始大小，`stage.width`如[本答案](https://stackoverflow.com/questions/6179653/get-the-embedded-width-height-of-a-flash-player-using-as3)中所述。然后，您可以在加载后动态设置其宽度/高度，或者更改创建`SWFObject`.

祝你好运！

# asp.net - 如何在 IE 8 中用白色在底部给出阴影？

> ID：15701083
> 
> 赞同：0
> 
> 时间：2013-03-29T10:03:08.573
> 
> 标签：asp.net, html, css

```
 .divClassGreen
    {      
           box-shadow: 0 0px black inset, 0 -3px white inset, -0px 0 blue inset, 0px 0 green inset;
           border-bottom:5px solid  green;       
    } 
```

我想给选项卡和边框绿色提供阴影白色，这段代码在 google chrome 和 firefox 中运行良好。但在 IE 中，只有边框底部起作用，框阴影不起作用，基本上我试图给它两个边框，我的元素是在 c# 中创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:15:44.293

即使 IE8 不直接支持它，您也可以使用 box-shadow，但方法稍有不同。

查看此[链接](http://placenamehere.com/article/384/css3boxshadowininternetexplorerblurshadow/)中的代码，您会在 IE8 浏览器上看到阴影。

此外，您可以使用[CSS3 PIE](http://css3pie.com/)来管理对阴影等的跨浏览器支持。

CSS3 Pie 支持 box-shadow [http://css3pie.com/documentation/supported-css3-features/](http://css3pie.com/documentation/supported-css3-features/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:10:35.297

更多 CSS-3 代码适用于 IE-9 及更高版本。

对于 IE-8，您只需为元素设置边框：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:11:19.133

ie不支持box-shadow，尝试使用图像（png）作为背景定位ie

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:19:16.257

IE8 和更少有一个专有`filter`属性，这个模仿最简单的线性渐变：[http](http://www.colorzilla.com/gradient-editor/#ffffff+0,000000+100;Custom)
://www.colorzilla.com/gradient-editor/#ffffff+0,000000+100;自定义 以防万一它是你想要的这种后备更喜欢。但是@Aleks 的答案可能更接近您想要实现的目标；）

注意：如果粗体/斜体文本在较小的 IE 上突然变得模糊和难看，怪罪`filter`！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T13:06:37.977

如果您在 Internet Explorer 9 中使用 box-shadow 作为 CSS 属性并且 box-shadow 未显示，您可能需要检查： 您使用的是正确的语法 - 您可以检查该属性是否出现在开发人员中当前元素的窗口 (F12)。如果这对您没有帮助，您可能想知道，Internet Explorer 9+ 支持 box-shadow，所以如果您使用

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

在您使用 Internet Explorer 9 的页面中，或者如果您使用的是 Internet Explorer 8（或更低版本），box-shadow 将不起作用。如果您想在 Internet Explorer 8 中获得类似的效果，请阅读这篇文章。

看下面的选项

[http://css-tricks.com/snippets/css/css-box-shadow/](http://css-tricks.com/snippets/css/css-box-shadow/)

# c# - 如何在 asp.net 中动态生成 HTML 和 CSS？

> ID：15701086
> 
> 赞同：1
> 
> 时间：2013-03-29T10:03:24.553
> 
> 标签：c#, javascript, jquery, asp.net, sql

我正在尝试[将此相册](http://youhack.me/demo/g%20plus%20photo/)集成到我的 asp.net 网站中。我正在从数据库中选择 3 张图片的 url，并显示来自特定相册的这 3 张图片。现在的问题是，如果用户有多个相册怎么办？它应该能够在页面上生成与该用户关联的数据库中一样多的 Jquery 专辑。

```
 <div class="image_stack" style="margin-left:300px" runat="server" >
 <img  id="photo1" class="stackphotos"  runat="server" clientidmode="static" >
    <img  id="photo2" class="stackphotos"  runat="server" clientidmode="static">
     <img   id="photo3" class="stackphotos"  runat="server" clientidmode="static" > 
     </div>

 public DataTable dt = new DataTable();
    dboperation dbo = new dboperation();

    protected void Page_Load(object sender, EventArgs e)
    {

        string q = "select photourl ,AlbumName  from PhotoAlbum where UserId=42";
        dt = dbo.Getdt(q);
        string a = dt.Rows[0]["photourl"].ToString();
        string b = dt.Rows[1]["photourl"].ToString();
        string c = dt.Rows[2]["photourl"].ToString();

        photo1.Src = a.Substring(1, a.Length - 1);
        photo2.Src = b.Substring(1, b.Length - 1);
        photo3.Src = c.Substring(1, c.Length - 1);

        q = "  select PhotoAlbum.AlbumId,PhotoAlbum.AlbumName from PhotoAlbum where UserId=42";

         dt = dbo.Getdt(q);
         drpalbum.DataSource = dt;
         drpalbum.DataTextField = "albumname";
         drpalbum.DataValueField = "albumid";
         drpalbum.DataBind();
    } 
```

如果您需要查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:19:34.413

简单地使用“div”

其中像这样

```
//HTML (.aspx)
<div id="MyDiv" runat="server" > </div>

//CodeBehind (.aspx.cs)
MyDiv.innerHTML = "Your HTML & CSS or Script code here CODE"; 
```

它将应用于整个 div

编辑1：

```
using System.Web.UI.HtmlControls; 
```

上面导入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:23:19.200

你需要做的是在你的页面上有一个 HTML 元素，像这样与服务器通信，

与光子几乎相同

```
//HTML - Does not have to be div could be anything like <p>, <div>, <a> etc.
<span id="SomeHTMLElement" runat="server" ></span>

//C#
SomeHTMLElement.innerHTML = "Any text you want to your page (text, HTML, script and/or CSS"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:32:56.763

checkout this to generate HTML and CSS dynamically in asp.net

[http://www.dotnetperls.com/htmltextwriter](http://www.dotnetperls.com/htmltextwriter)

# php - ZendFrameWork 如何与 Zend_Db_Adapter_Driver_Pdo 连接

> ID：15701099
> 
> 赞同：0
> 
> 时间：2013-03-29T10:04:06.940
> 
> 标签：php, zend-framework

```
$params = array('host'=> 'localhost',
                'username'  => 'root',
                'password'    => '',
                'dbname'        => 'test'
               );

$DB = new Zend_Db_Adapter_Driver_Pdo($params);
$DB->setFetchMode(Zend_Db::FETCH_OBJ);
Zend_Registry::set('DB',$DB); 
```

在我的 Bootstrap 中无法连接到数据库，因为我不知道如何编写

```
use Zend\Db\Adapter\Driver\Pdo; 
```

它说没有找到类 Zend_Db_Adapter_Driver_Pdo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T12:00:48.633

您可以使用以下代码进行检查

1) 在您的 application.ini 文件中，添加以下内容

```
db.adapter = pdo_Mysql
db.params.host = host_name
db.params.username = user_name
db.params.password = pasword
db.params.dbname = database_name
db.params.profiler = true 
```

2）接下来，在您的 index.php 文件中，添加以下内容

```
// Define path to application directory
defined('APPLICATION_PATH') || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV') || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

// auto loader
require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->setFallbackAutoloader(true);

// config
$config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini', 'production');
$registry = Zend_Registry::getInstance();
$registry->set('config', $config);

// setup database
$db = Zend_Db::factory($config->db);
Zend_Db_Table::setDefaultAdapter($db);
$registry->set('db', $db); 
```

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:45:35.663

在 application.ini 中建立连接：

```
//excerpt from application.ini
;-------------------------------------------------------------------------------
;Database Settings
;-------------------------------------------------------------------------------

resources.db.adapter = "pdo_Mysql"
resources.db.params.username = "user"
resources.db.params.password = "xxxxxx"
resources.db.params.dbname = "database"
resources.db.params.charset = "utf8" 
```

然后在您的引导程序中，您可以将所有 application.ini 设置添加到注册表：

```
//Bootstrap.php
protected function _initRegistry()
    {
        $config = new Zend_Config($this->getOptions());
        Zend_Registry::set('config', $config);
    } 
```

***Natrium***是正确的，您需要对 Zend Framework 1.x 进行更多研究。你不会马上解决这个问题。这个框架在范围或应用上都不是微不足道的。

# highcharts - xaxis 范围不会在 area-colums 组合图表中占据图表的全宽

> ID：15701103
> 
> 赞同：2
> 
> 时间：2013-03-29T10:04:18.900
> 
> 标签：highcharts

我正在构建一个结合区域和列的图表。

添加列系列时，xaxis 范围缩小，在图表的两侧留下大的空白区域。我找不到问题所在以及为什么我不能使用图表的整个宽度。

见那些例子：

没有柱状图：

结果：http: [//jsfiddle.net/PL79W/12/](http://jsfiddle.net/PL79W/12/)

与列系列：

```
$(document).ready(function() { 
        char_option={

    chart:{
        type:null,
        renderTo:"RapportMainContener",
        zoomType:"xy",
        margin:{
            marginLeft:0
        },
        backgroundColor:"transparent"
    },
    tooltip:{
        xDateFormat:"%Y-%m-%d %H:%M",
        shared:true,
        crosshairs:{
            color:"orange",
            width:1
        },
        snap:50,
        formatter:null,
        useHTML:true,
        backgroundColor:"rgba(241, 243, 248, 0.85)"
    },
    title:null,
    xAxis:[
        {
            gridLineWidth:null,
            gridLineDashStyle:"Dash",
            type:"datetime",
            endOnTick:true,
            startOnTick:true,
            plotBands:[],
            plotLines:[],
            title:[],
            minRange:600000,
            opposite:false,
            lineColor:"#C0D0E0",
            lineWidth:0,
            tickColor:"#C0D0E0",
            tickInterval:null,
            tickPosition:"outside",
            pointPadding:null,
            groupPadding:null,
            borderWidth:null,
            formatter:null,
            min:1364346000000,
            max:1364432400000
        }
    ],
    yAxis:[
        {
            gridLineWidth:1,
            gridLineDashStyle:"Solid",
            type:"linear", 
            labels:{
                        formatter:function() {return this.value;}
            },
            title:{
                text:"Temps (ms)"
            },
            min:null,
            max:null,
            plotBands:[],
            plotLines:[],
            minRange:null,
            opposite:false,
            lineColor:"#C0D0E0",
            lineWidth:0,
            tickColor:"#C0D0E0",
            tickInterval:null,
            tickPosition:"outside",
            pointPadding:null,
            groupPadding:null,
            borderWidth:null,
            formatter:null
        },
        {
            gridLineWidth:1,
            gridLineDashStyle:"Solid",
            type:"linear",
            labels:{
                enabled:true
            },
            title:{
                text:"nbr Anomalies"
            },
            min:null,
            max:null,
            plotBands:[],
            plotLines:[],
            minRange:null,
            opposite:true,
            lineColor:"#FF0000",
            lineWidth:0,
            tickColor:"#C0D0E0",
            tickInterval:1,
            tickPosition:"outside",
            pointPadding:0,
            groupPadding:0,
            borderWidth:0,
            formatter:null
        }
    ],
    plotOptions:{
        area:{
            marker:{
                enabled:true,
                radius:1
            },
            lineWidth:1,
            connectNulls:false,
            shadow:false,
            fillOpacity:0.3,
            zIndex:1
        },
        areaspline:{
            marker:{
                enabled:false
            },
            lineWidth:1,
            connectNulls:false,
            shadow:false,
            fillOpacity:0.3,
            zIndex:1
        },
        series:{
            marker:{
                lineColor:"orange",
                states:{
                    hover:{
                        fillColor:"orange",
                        radius:1
                    }
                }
            }
        },
        column:{
            marker:{
                enabled:false
            },
            borderWidth:1,
            shadow:false,
            fillOpacity:0.3,
            zIndex:0
        }
    },
    series:[
        {
            data:[[1364346000000,828],[1364346600000,992.5],[1364347200000,1156.5],[1364347800000,1109.5],[1364348400000,1304.5],[1364349000000,1078],[1364349600000,977],[1364350200000,977],[1364350800000,961],[1364351400000,1672],[1364352000000,984.5],[1364352600000,797],[1364353200000,1125],[1364353800000,1008],[1364354400000,1055],[1364355000000,914],[1364355600000,1039],[1364356200000,851.5],[1364356800000,961],[1364357400000,945.5],[1364358000000,945.5],[1364358600000,1133],[1364359200000,945],[1364359800000,828.5],[1364360400000,1359.5],[1364361000000,1281],[1364361600000,1133],[1364362200000,945.5],[1364362800000,984.5],[1364363400000,835.5],[1364364000000,914],[1364364600000,1109.5],[1364365200000,1078],[1364365800000,1820.5],[1364366400000,922],[1364367000000,922],[1364367600000,1055],[1364368200000,960.5],[1364368800000,938],[1364369400000,976.5],[1364370000000,781],[1364370600000,953.5],[1364371200000,1718.5],[1364371800000,992],[1364372400000,1055],[1364373000000,867.5],[1364373600000,1047],[1364374200000,2375],[1364374800000,1234.5],[1364375400000,1148.5],[1364376000000,1031],[1364376600000,1234.5],[1364377200000,1023.5],[1364377800000,1015.5],[1364378400000,1078],[1364379000000,969],[1364379600000,984.5],[1364380200000,1164],[1364380800000,1210.5],[1364381400000,1367],[1364382000000,1523.5],[1364382600000,835.5],[1364383200000,1007.5],[1364383800000,1375],[1364384400000,929.5],[1364385000000,945.5],[1364385600000,969],[1364386200000,19601.5],[1364386800000,1273],[1364387400000,1210.5],[1364388000000,961],[1364388600000,890.5],[1364389200000,1039],[1364389800000,906],[1364390400000,2875],[1364391000000,1125],[1364391600000,1125.5],[1364392200000,945],[1364392800000,1266],[1364393400000,914],[1364394000000,960.5],[1364394600000,1047.5],[1364395200000,820],[1364395800000,1023],[1364396400000,906],[1364397000000,1047],[1364397600000,1078],[1364398200000,914.5],[1364398800000,1172],[1364399400000,1516],[1364400000000,1062],[1364400600000,882.5],[1364401200000,953],[1364401800000,1320.5],[1364402400000,828],[1364403000000,1008],[1364403600000,937.5],[1364404200000,1538.5],[1364404800000,914],[1364405400000,1812.5],[1364406000000,1164],[1364406600000,1062.5],[1364407200000,1038.5],[1364407800000,867],[1364408400000,812.5],[1364409000000,1524],[1364409600000,860],[1364410200000,929.5],[1364410800000,1024],[1364411400000,992.5],[1364412000000,882.5],[1364412600000,1047],[1364413200000,883.5],[1364413800000,960.5],[1364414400000,930],[1364415000000,906.5],[1364415600000,828],[1364416200000,1507.5],[1364416800000,922],[1364417400000,883],[1364418000000,1344],[1364418600000,820],[1364419200000,874.5],[1364419800000,945.5],[1364420400000,953],[1364421000000,929.5],[1364421600000,899],[1364422200000,938],[1364422800000,1187.5],[1364423400000,1007.5],[1364424000000,961],[1364424600000,961],[1364425200000,977],[1364425800000,984.5],[1364426400000,992],[1364427000000,992.5],[1364427600000,860],[1364428200000,1156.5],[1364428800000,1148.5],[1364429400000,1039],[1364430000000,1031],[1364430600000,1804.5],[1364431200000,1249.5],[1364431800000,969]],
            xAxis:0,
            yAxis:0,
            index:0,
            name:"Temps de chargement de la page et des objets",
            type:"area",
            color:null,
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:null,
            fillOpacity:0.3,
            borderColor:null,
            pointPadding:null,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:{
                useHTML:true,
                valueSuffix:" ms",
                pointFormat:"<div class=\\\"cartouche\\\"><div  style=\\\"background-color:{series.color};height:10px;width:10px;float:left;\\\"><\/div><span>{series.name}: <b>{point.stackY} ms<\/b><\/span><\/div>"
            }
        },
        {
            data:[[1364346000000,16],[1364346600000,7.5],[1364347200000,8],[1364347800000,31],[1364348400000,0],[1364349000000,7.5],[1364349600000,0],[1364350200000,0],[1364350800000,8],[1364351400000,0],[1364352000000,8],[1364352600000,0],[1364353200000,0],[1364353800000,0],[1364354400000,0],[1364355000000,7.5],[1364355600000,0],[1364356200000,0],[1364356800000,8],[1364357400000,0],[1364358000000,0],[1364358600000,47],[1364359200000,8],[1364359800000,15.5],[1364360400000,8],[1364361000000,55],[1364361600000,0],[1364362200000,8],[1364362800000,8],[1364363400000,8],[1364364000000,31],[1364364600000,8],[1364365200000,8],[1364365800000,39],[1364366400000,31.5],[1364367000000,7.5],[1364367600000,23],[1364368200000,16],[1364368800000,7.5],[1364369400000,0],[1364370000000,0],[1364370600000,7.5],[1364371200000,8],[1364371800000,0],[1364372400000,15.5],[1364373000000,0],[1364373600000,16],[1364374200000,180],[1364374800000,15.5],[1364375400000,15],[1364376000000,16],[1364376600000,7.5],[1364377200000,0],[1364377800000,39.5],[1364378400000,8],[1364379000000,7.5],[1364379600000,8],[1364380200000,8],[1364380800000,24],[1364381400000,8],[1364382000000,47],[1364382600000,8],[1364383200000,16],[1364383800000,15.5],[1364384400000,0],[1364385000000,23],[1364385600000,46.5],[1364386200000,16],[1364386800000,0],[1364387400000,8],[1364388000000,8],[1364388600000,16],[1364389200000,0],[1364389800000,8],[1364390400000,0],[1364391000000,23.5],[1364391600000,23],[1364392200000,16],[1364392800000,0],[1364393400000,141],[1364394000000,31.5],[1364394600000,7.5],[1364395200000,0],[1364395800000,8],[1364396400000,8],[1364397000000,8],[1364397600000,8],[1364398200000,7.5],[1364398800000,31.5],[1364399400000,0],[1364400000000,0],[1364400600000,0],[1364401200000,39],[1364401800000,31.5],[1364402400000,15.5],[1364403000000,0],[1364403600000,8],[1364404200000,8],[1364404800000,7.5],[1364405400000,0],[1364406000000,15.5],[1364406600000,8],[1364407200000,8],[1364407800000,15.5],[1364408400000,62],[1364409000000,62.5],[1364409600000,0],[1364410200000,0],[1364410800000,0],[1364411400000,8],[1364412000000,23.5],[1364412600000,47],[1364413200000,15.5],[1364413800000,8],[1364414400000,8],[1364415000000,8],[1364415600000,0],[1364416200000,23.5],[1364416800000,0],[1364417400000,7.5],[1364418000000,15],[1364418600000,8],[1364419200000,94],[1364419800000,0],[1364420400000,23.5],[1364421000000,8],[1364421600000,7.5],[1364422200000,23],[1364422800000,8],[1364423400000,24],[1364424000000,7.5],[1364424600000,15],[1364425200000,7.5],[1364425800000,0],[1364426400000,8],[1364427000000,7.5],[1364427600000,7.5],[1364428200000,7.5],[1364428800000,15.5],[1364429400000,16],[1364430000000,7.5],[1364430600000,0],[1364431200000,15.5],[1364431800000,15.5]],
            xAxis:0,
            yAxis:0,
            index:0,
            name:"Temps de chargement de la page",
            type:"area",
            color:null,
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:null,
            fillOpacity:0.3,
            borderColor:null,
            pointPadding:null,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:{
                useHTML:true,
                valueSuffix:" ms",
                pointFormat:"<div class=\\\"cartouche\\\"><div  style=\\\"background-color:{series.color};height:10px;width:10px;float:left;\\\"><\/div><span>{series.name}: <b>{point.stackY} ms<\/b><\/span><\/div>"
            }
        },
        {
            data:[[1364346000000,343.5],[1364346600000,328.5],[1364347200000,202.5],[1364347800000,304.5],[1364348400000,297.5],[1364349000000,250],[1364349600000,257.5],[1364350200000,312],[1364350800000,172],[1364351400000,219],[1364352000000,218.5],[1364352600000,234.5],[1364353200000,500],[1364353800000,359],[1364354400000,492],[1364355000000,320.5],[1364355600000,266],[1364356200000,351.5],[1364356800000,328],[1364357400000,265.5],[1364358000000,296.5],[1364358600000,273],[1364359200000,250],[1364359800000,430],[1364360400000,374.5],[1364361000000,516],[1364361600000,336],[1364362200000,351.5],[1364362800000,265.5],[1364363400000,187.5],[1364364000000,406],[1364364600000,265],[1364365200000,227],[1364365800000,421.5],[1364366400000,320],[1364367000000,211],[1364367600000,320.5],[1364368200000,336],[1364368800000,281],[1364369400000,242],[1364370000000,289.5],[1364370600000,273.5],[1364371200000,289],[1364371800000,304.5],[1364372400000,320],[1364373000000,414],[1364373600000,476],[1364374200000,383],[1364374800000,430],[1364375400000,562.5],[1364376000000,445.5],[1364376600000,461],[1364377200000,281.5],[1364377800000,320],[1364378400000,804],[1364379000000,328.5],[1364379600000,297],[1364380200000,562],[1364380800000,601.5],[1364381400000,328],[1364382000000,469],[1364382600000,258],[1364383200000,492],[1364383800000,687.5],[1364384400000,211],[1364385000000,461.5],[1364385600000,305],[1364386200000,398.5],[1364386800000,586.5],[1364387400000,320.5],[1364388000000,390.5],[1364388600000,414],[1364389200000,273.5],[1364389800000,422],[1364390400000,312.5],[1364391000000,328],[1364391600000,500],[1364392200000,296.5],[1364392800000,359],[1364393400000,1851.5],[1364394000000,367],[1364394600000,476.5],[1364395200000,297],[1364395800000,703.5],[1364396400000,359.5],[1364397000000,429.5],[1364397600000,554.5],[1364398200000,336],[1364398800000,648],[1364399400000,367],[1364400000000,305],[1364400600000,625.5],[1364401200000,539],[1364401800000,445],[1364402400000,328.5],[1364403000000,343.5],[1364403600000,968.5],[1364404200000,305],[1364404800000,414],[1364405400000,453],[1364406000000,547],[1364406600000,304.5],[1364407200000,382.5],[1364407800000,484.5],[1364408400000,391],[1364409000000,281],[1364409600000,171.5],[1364410200000,453],[1364410800000,359.5],[1364411400000,367],[1364412000000,328],[1364412600000,234],[1364413200000,351.5],[1364413800000,289],[1364414400000,351.5],[1364415000000,288.5],[1364415600000,289.5],[1364416200000,430],[1364416800000,312.5],[1364417400000,305],[1364418000000,344],[1364418600000,234.5],[1364419200000,203],[1364419800000,304.5],[1364420400000,500],[1364421000000,343.5],[1364421600000,265.5],[1364422200000,516],[1364422800000,546.5],[1364423400000,453],[1364424000000,445.5],[1364424600000,321],[1364425200000,422],[1364425800000,203],[1364426400000,242.5],[1364427000000,351.5],[1364427600000,523],[1364428200000,375],[1364428800000,422],[1364429400000,398],[1364430000000,203.5],[1364430600000,437.5],[1364431200000,344],[1364431800000,500]],
            xAxis:0,
            yAxis:0,
            index:0,
            name:"Réception premier octet",
            type:"area",
            color:null,
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:null,
            fillOpacity:0.3,
            borderColor:null,
            pointPadding:null,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:{
                useHTML:true,
                valueSuffix:" ms",
                pointFormat:"<div class=\\\"cartouche\\\"><div  style=\\\"background-color:{series.color};height:10px;width:10px;float:left;\\\"><\/div><span>{series.name}: <b>{point.stackY} ms<\/b><\/span><\/div>"
            }
        },
        {
            data:[[1364346000000,24],[1364346600000,31],[1364347200000,31.5],[1364347800000,23.5],[1364348400000,30.5],[1364349000000,16],[1364349600000,31.5],[1364350200000,16],[1364350800000,23],[1364351400000,38.5],[1364352000000,23.5],[1364352600000,23],[1364353200000,24],[1364353800000,16],[1364354400000,31],[1364355000000,15.5],[1364355600000,31],[1364356200000,23.5],[1364356800000,23],[1364357400000,23.5],[1364358000000,31.5],[1364358600000,39.5],[1364359200000,16],[1364359800000,15],[1364360400000,32],[1364361000000,31],[1364361600000,23],[1364362200000,15.5],[1364362800000,54.5],[1364363400000,16],[1364364000000,31.5],[1364364600000,31.5],[1364365200000,31],[1364365800000,23.5],[1364366400000,47],[1364367000000,23.5],[1364367600000,39],[1364368200000,31.5],[1364368800000,31.5],[1364369400000,31],[1364370000000,23],[1364370600000,23],[1364371200000,54.5],[1364371800000,32],[1364372400000,23.5],[1364373000000,23],[1364373600000,31.5],[1364374200000,15.5],[1364374800000,31.5],[1364375400000,39],[1364376000000,31],[1364376600000,31.5],[1364377200000,23.5],[1364377800000,15.5],[1364378400000,24],[1364379000000,31],[1364379600000,23.5],[1364380200000,16],[1364380800000,23.5],[1364381400000,23.5],[1364382000000,31],[1364382600000,31],[1364383200000,23.5],[1364383800000,39.5],[1364384400000,39],[1364385000000,23],[1364385600000,47],[1364386200000,23],[1364386800000,23],[1364387400000,31.5],[1364388000000,16],[1364388600000,23.5],[1364389200000,15.5],[1364389800000,23],[1364390400000,15.5],[1364391000000,31.5],[1364391600000,23],[1364392200000,24],[1364392800000,55],[1364393400000,31],[1364394000000,31],[1364394600000,15.5],[1364395200000,23.5],[1364395800000,23],[1364396400000,31.5],[1364397000000,31],[1364397600000,31],[1364398200000,15.5],[1364398800000,24],[1364399400000,23.5],[1364400000000,47],[1364400600000,23],[1364401200000,24],[1364401800000,15.5],[1364402400000,15.5],[1364403000000,23.5],[1364403600000,31.5],[1364404200000,31],[1364404800000,23.5],[1364405400000,23.5],[1364406000000,15.5],[1364406600000,23.5],[1364407200000,24],[1364407800000,23.5],[1364408400000,15.5],[1364409000000,46.5],[1364409600000,31.5],[1364410200000,24],[1364410800000,15.5],[1364411400000,23.5],[1364412000000,15.5],[1364412600000,24],[1364413200000,31],[1364413800000,15.5],[1364414400000,15.5],[1364415000000,16],[1364415600000,23],[1364416200000,23],[1364416800000,31],[1364417400000,15],[1364418000000,39],[1364418600000,23.5],[1364419200000,23.5],[1364419800000,31],[1364420400000,23],[1364421000000,31.5],[1364421600000,16],[1364422200000,23.5],[1364422800000,15.5],[1364423400000,23.5],[1364424000000,31.5],[1364424600000,31],[1364425200000,15.5],[1364425800000,39],[1364426400000,23],[1364427000000,23],[1364427600000,24],[1364428200000,16],[1364428800000,70],[1364429400000,31.5],[1364430000000,16],[1364430600000,31],[1364431200000,23.5],[1364431800000,16]],
            xAxis:0,
            yAxis:0,
            index:0,
            name:"Temps de connexion",
            type:"area",
            color:null,
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:null,
            fillOpacity:0.3,
            borderColor:null,
            pointPadding:null,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:{
                useHTML:true,
                valueSuffix:" ms",
                pointFormat:"<div class=\\\"cartouche\\\"><div  style=\\\"background-color:{series.color};height:10px;width:10px;float:left;\\\"><\/div><span>{series.name}: <b>{point.stackY} ms<\/b><\/span><\/div>"
            }
        },
        {
            data:[[1364346000000,38.5],[1364346600000,46.5],[1364347200000,39],[1364347800000,23.5],[1364348400000,55],[1364349000000,54.5],[1364349600000,70],[1364350200000,39],[1364350800000,47],[1364351400000,86],[1364352000000,62.5],[1364352600000,32],[1364353200000,39],[1364353800000,54],[1364354400000,39],[1364355000000,39.5],[1364355600000,15.5],[1364356200000,47],[1364356800000,32],[1364357400000,39],[1364358000000,23.5],[1364358600000,39],[1364359200000,47],[1364359800000,39.5],[1364360400000,47],[1364361000000,31],[1364361600000,47],[1364362200000,47],[1364362800000,125],[1364363400000,54],[1364364000000,31],[1364364600000,47],[1364365200000,23.5],[1364365800000,39],[1364366400000,47],[1364367000000,54.5],[1364367600000,62.5],[1364368200000,31],[1364368800000,39.5],[1364369400000,63],[1364370000000,47],[1364370600000,31.5],[1364371200000,94],[1364371800000,23],[1364372400000,55],[1364373000000,31],[1364373600000,54.5],[1364374200000,46.5],[1364374800000,31],[1364375400000,24],[1364376000000,39.5],[1364376600000,39],[1364377200000,62.5],[1364377800000,39.5],[1364378400000,46.5],[1364379000000,31],[1364379600000,38.5],[1364380200000,46.5],[1364380800000,31],[1364381400000,55],[1364382000000,70],[1364382600000,24],[1364383200000,31.5],[1364383800000,62],[1364384400000,31],[1364385000000,24],[1364385600000,39],[1364386200000,39.5],[1364386800000,31.5],[1364387400000,31],[1364388000000,31],[1364388600000,23],[1364389200000,31.5],[1364389800000,32],[1364390400000,31.5],[1364391000000,23.5],[1364391600000,32],[1364392200000,23],[1364392800000,46.5],[1364393400000,39],[1364394000000,31.5],[1364394600000,1031.5],[1364395200000,31],[1364395800000,31.5],[1364396400000,39],[1364397000000,39.5],[1364397600000,24],[1364398200000,31.5],[1364398800000,31],[1364399400000,31],[1364400000000,46.5],[1364400600000,31],[1364401200000,38.5],[1364401800000,93.5],[1364402400000,62.5],[1364403000000,39],[1364403600000,31],[1364404200000,1531],[1364404800000,23.5],[1364405400000,70],[1364406000000,23.5],[1364406600000,47],[1364407200000,39],[1364407800000,31],[1364408400000,31.5],[1364409000000,63],[1364409600000,31],[1364410200000,23],[1364410800000,70],[1364411400000,31],[1364412000000,31.5],[1364412600000,38.5],[1364413200000,31],[1364413800000,39],[1364414400000,39],[1364415000000,39],[1364415600000,31.5],[1364416200000,55],[1364416800000,39.5],[1364417400000,23.5],[1364418000000,31],[1364418600000,31],[1364419200000,23.5],[1364419800000,24],[1364420400000,31.5],[1364421000000,31.5],[1364421600000,46.5],[1364422200000,31],[1364422800000,39.5],[1364423400000,47],[1364424000000,31],[1364424600000,31],[1364425200000,70],[1364425800000,47],[1364426400000,54.5],[1364427000000,32],[1364427600000,47],[1364428200000,31],[1364428800000,62.5],[1364429400000,23],[1364430000000,31],[1364430600000,31],[1364431200000,31.5],[1364431800000,39]],
            xAxis:0,
            yAxis:0,
            index:0,
            name:"Temps de réponse DNS",
            type:"area",
            color:null,
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:null,
            fillOpacity:0.3,
            borderColor:null,
            pointPadding:null,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:{
                useHTML:true,
                valueSuffix:" ms",
                pointFormat:"<div class=\\\"cartouche\\\"><div  style=\\\"background-color:{series.color};height:10px;width:10px;float:left;\\\"><\/div><span>{series.name}: <b>{point.stackY} ms<\/b><\/span><\/div>"
            }
        },
        {
data:[[1364353200000,1],[1364409600000,1]],
            xAxis:0,
            yAxis:1,
            index:0,
            name:"Anomalies",
            type:"column",
            color:"rgba(255,0,0, 0.5)",
            zIndex:1,
            stacking:"normal",
            legend:null,
            borderWidth:1,
            fillOpacity:0.3,
            borderColor:"rgba(216,28,28, 0.5)",
            pointPadding:0,
            groupPadding:null,
            dataLabels:{
            },
            tooltip:null
        }
    ],
    colors:[
        "#FFC000",
        "#FF8300",
        "#4B41FF",
        "#8DC6FF",
        "#AB0000",
        "#615EB0",
        "#FCE151",
        "#FFBA00",
        "#FF9724",
        "#E39810",
        "#DF5300",
        "#F10000",
        "#94211A",
        "#4A411B",
        "#015F1B",
        "#298A2F",
        "#869420",
        "#83803B",
        "#806460",
        "#782FA7",
        "#7309DB",
        "#5900B0",
        "#FFC000",
        "#FF8300",
        "#4B41FF",
        "#8DC6FF",
        "#AB0000",
        "#615EB0",
        "#FCE151",
        "#FFBA00",
        "#FF9724",
        "#E39810",
        "#DF5300",
        "#F10000",
        "#94211A",
        "#4A411B",
        "#015F1B",
        "#298A2F",
        "#869420",
        "#83803B",
        "#806460",
        "#782FA7",
        "#7309DB",
        "#5900B0"
    ]

}
                                                                                            chart = new Highcharts.Chart(char_option);}) 
```

结果：http: [//jsfiddle.net/PL79W/11/](http://jsfiddle.net/PL79W/11/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:55:26.763

为 xAxis删除`startOnTick`和`endOnTick`，并且可以正常工作，请参阅：http: [//jsfiddle.net/PL79W/13/](http://jsfiddle.net/PL79W/13/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-25T16:05:36.513

这不是一个答案，但我也无法让它工作，并且提供的所有答案都有太多代码需要筛选以找到解决方案。因此，将其简化为两点图，我希望所有图（区域和线）扩展图表的整个宽度，左右没有间隙。

这是我的小提琴：http: [//jsfiddle.net/lamarant/KTksk/](http://jsfiddle.net/lamarant/KTksk/)

```
$('#container').highcharts({
    chart: {
        type: 'area',
        plotBackgroundColor: '#00B417'
    },
    xAxis: {
        categories: ['Mar', 'Apr']
    },
    yAxis: {
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    plotOptions: {
        area: {
            pointPlacement: 'on',
            connectNulls: true
        },
        line: {
            connectNulls: true
        }
    },
    series: [{
        showInLegend: false,
        data: [194, 205],
        marker: {
            enabled: false
        },
        fillColor: '#D9B900',
        lineColor: '#D9B900'
    }, {
        showInLegend: false,
        data: [180, 190],
        marker: {
            enabled: false
        },
        fillColor: '#B80006',
        lineColor: '#B80006'
    }, {
        type: 'line',
        name: 'Actual Values',
        lineColor: '#000000',
        color: '#000000',
        data: [225, 215]
    }, {
        type: 'line',
        name: 'Target Values',
        lineColor: '#0000ff',
        color: '#0000ff',
        data: [200, 200]
    }]
}); 
```

# scala - 如何在 Scala 中将选定的列表条目合并在一起？（即产生一个可能更短的列表）

> ID：15701104
> 
> 赞同：1
> 
> 时间：2013-03-29T10:04:19.060
> 
> 标签：scala

我有一个文本行列表，并希望将任何以 '\' 结尾的行视为继续到下一行，即合并它们。下面的递归代码做到了，但一定有一些巧妙的方法，类似于`map`,`filter`和所有？

`reduceLeft`很接近，但它只产生一个结果，而不是一个修改过的（可能更短的）新列表。

也欢迎提出关于使下面的代码更精简的建议。

```
object TestX extends App {

  // Merge lines together if the former ends with '\'.
  //
  private def mergeLines( list: List[String] ): List[String] = {

    def merge( head: String, tail: List[String] ): List[String] = {
      if (head.endsWith("\\")) {
        val head2= head.dropRight(1)
        if (tail.isEmpty) {
          head2 :: Nil   // or throw an exception on bad input
        } else {
          merge( head2 + tail.head, tail.tail )
        }
      } else {
        if (tail.isEmpty)
          head :: Nil
        else 
          head :: merge( tail.head, tail.tail )     // note: cannot tailrec this
      }
    }

    if (list.isEmpty) {
      list
    } else {
      merge( list.head, list.tail )
    }
  }

  val list = "These two \\" :: "should be joined" :: "but not this." :: Nil

  val list2 = mergeLines(list)    // any standard easy way to do this? 'list.mergeIf( _.endsWith('\\') )'

  println( list2 )
  assert( list2.size == 2 )
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:25:40.470

以下是您可以使用的一些技巧：

```
 @annotation.tailrec
  def mergeLines(xs: List[String], out: List[String] = Nil): List[String] = xs match {
    case Nil            => out.reverse
    case x :: Nil       => mergeLines(Nil, x :: out)
    case x :: y :: rest => 
      if (x endsWith """\""") mergeLines(x.init + y :: rest, out)
      else                    mergeLines(y :: rest, x :: out)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:12:34.990

您可以使用 foldLeft 编写它：

```
List("a\\", "b", "c").foldLeft(List.empty[String])((xs, x) => xs match { 
  case Nil => x :: Nil
  case _ => if (xs.head.endsWith("\\")) (xs.head.dropRight(1) + x) :: xs.tail else x :: xs 
}).reverse 
```

它可能不是最有效的方法（对于小型列表很好，但对于大型列表来说不是），因为它使用不可变数据结构，更有效的方法是使用可变列表。

# c# - Gtk.Bin.Destroy() 和 Gtk.Bin.Dispose() 有什么区别

> ID：15701109
> 
> 赞同：4
> 
> 时间：2013-03-29T10:04:33.580
> 
> 标签：c#, gtk

我有一个 gtk bin 控件，我想删除它。这意味着我需要将它从操作内存和窗口中删除。我通过简单地调用 window.Remove(child_item) 将它从窗口中删除，但我应该调用 Destroy() 或 Dispose() 还是同时调用两者？按什么顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:45:38.323

Dispose() 是 的一部分`GObject`，它在实例完成序列期间用于释放引用和分离信号处理程序；它可以被多次调用，以防引用循环，因此检查未设置的字段是一个好习惯。

Destroy() 是 的一部分`GtkWidget`，其目的与 Dispose() 实现类似；Destroy() 几乎是一个历史产物，它`GObject`作为 GTK 的内部类型开始，然后被移出（与类型系统的其余部分一起）到 GLib 中。Destroy() 作为 Dispose() inside 的默认实现的一部分被调用`GtkWidget`。

如果你想从容器中移除一个子容器，你可以简单地调用容器上的 Remove(child)，或者调用子容器上的 Destroy()：Remove() 将释放持有在子容器上的引用，这将导致销毁小部件，如果那是最后一个引用。在 a 上调​​用 Destroy()`GtkWidget`将导致小部件从其父容器中删除。这两个代码路径应该是可互换的。

直接调用 Dispose() 是 Gtk#-ism： Dispose() 方法主要是为了被覆盖，而不是直接调用。

# cassandra - 具有 3 个字段的 CQL3 复合索引如何在 thrift 列族世界中映射？

> ID：15701111
> 
> 赞同：2
> 
> 时间：2013-03-29T10:04:42.330
> 
> 标签：cassandra

在[planetcassandra](http://planetcassandra.org/blog/post/datastax-developer-blog-a-thrift-to-cql3-upgrade-guide)阅读此博客后，我想知道具有 3 个字段的 CQL3 复合索引如何在节俭列族词中映射，例如：

```
CREATE TABLE comments (
        article_id uuid,
        posted_at timestamp,       
        author text,
        karma int,
        content text,
        PRIMARY KEY (article_id, posted_at)
    ) 
```

在这里，article_id 列将映射到内部行键，posted_at 将映射到单元格名称（的第一部分）。

如果桌子设计是

```
CREATE TABLE comments (
        author_id varchar,
        posted_at timestamp,
        article_id uuid,       
        author text,
        karma int,
        content text,
        PRIMARY KEY (author_id, posted_at, article_id)
    ) 
```

1.  内部行键是否会映射到复合索引的第一个 2 字段，article_id 映射到单元格名称，本质上对多达 20 亿个条目的文章进行切片，并且对 author_id 和 posted_at 组合的任何查询都是磁盘上的一次查找？
2.  复合键中任意数量的字段的行为是否相同？

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:43:04.520

上面的观察是不正确的，正确的[在这里](http://architects.dzone.com/articles/composite-keys-cassandra)

我亲自验证过：

```
In the first case:
article_id = partition key, posted_at = cluster key

In the second case:
author_id  = partition key, posted_at:article_id = cluster key 
```

1.  复合键的第一部分（author_id）称为“分区键”，其余部分（posted_at,article_id）是剩余键。
2.  当使用复合键时，Cassandra 以不同的方式存储列。分区键成为行键。其余键与每个列名（“：”作为分隔符）连接以形成列名。列值保持不变。
3.  其余键（分区键除外）是有序的，不允许在任何随机列上搜索，必须从第一个开始，然后可以移动到第二个，依此类推。这从“错误请求”错误中可以看出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:00:54.377

Aaron Morton @他的网站[thelastpickle](http://thelastpickle.com/)有一个很好的解释。

```
In the first case:
article_id = partition key, posted_at = cluster key

In the second case:
author_id + posted_at = partition key, article_id = cluster key 
```

因此，当您使用第二种方法时，请注意磁盘寻道，并且与第一种情况相比，该行不会变得太宽，并且会带来真正的好处。如果您没有超过 20 亿并且在限制范围内，请不要过度采用第二种方法，因为记录的分散发生在组合键上。

# c# - 在 C# 中使用 AES-NI

> ID：15701116
> 
> 赞同：4
> 
> 时间：2013-03-29T10:05:10.233
> 
> 标签：c#, aes, aes-ni

我有一个问题，我希望我在这里是正确的。我想在 C# 程序中使用 AES-NI 加速。我没有找到任何好的来源，并想问这是否可能以及是否有任何好的信息来源。另外我想问一下，AES-NI 支持哪些密钥大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T12:35:22.713

AesCryptoServiceProvider 应该使用 AES-NI（和类似的指令集）。这**不在**文档中，但经过多次基准测试后，我注意到AES-NI 机器的性能***显着***提高（156 mbps，34 mbps）。所以我想假设使用 AES-NI 是安全的。

# javascript - 为什么不使用 node.js 设置 req.session

> ID：15701121
> 
> 赞同：0
> 
> 时间：2013-03-29T10:05:35.697
> 
> 标签：javascript, node.js, oauth, express

我似乎无法为任何事情做好准备

```
req.session 
```

我正在尝试将 oauth 令牌和秘密存储到会话中，以便在授权回调后检查它们。这是我的代码

```
var express = require('express'),
    app     = express(),
    server  = require('http').createServer(app),
    io      = require('socket.io').listen(server),
    oauth   = require('oauth'),
    tumblr  = require('tumblr.js'),
    client  = {
        consumer_key: '1n9fMPxCBFBbcIGRImYKSK5wwDL6yux64S4DxEwiwzHTNuaIoD',
        consumer_secret: 'bW9YKbnwgxexyVx1AaxQr1QoemEkjd29p5U1WpbZ8r1XEH41C0'
    },
    consumer = new oauth.OAuth(
        "http://www.tumblr.com/oauth/request_token", "http://www.tumblr.com/oauth/access_token",
        client.consumer_key, client.consumer_secret, "1.0A", "http://127.0.0.1:8080/sessions/callback", "HMAC-SHA1");

server.listen(1337);

app.configure('dev', function(){
    app.use(express.logger());
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: "topsecret" }));
});

app.get('/home', function(req, res){
    consumer.getOAuthRequestToken(function(err, oauth_token, oauth_token_secret, results){
        if(err){
            console.log(err);
        }else{
            //req.session.oauth.token = oauth_token;
            console.log('oauth.token: ' + oauth_token);
            //req.session.oauth.token_secret = oauth_token_secret;
            console.log('oauth.token_secret: ' + oauth_token_secret);
            res.redirect('http://www.tumblr.com/oauth/authorize?oauth_token='+oauth_token);
        }
    });
});

app.get('/oauth/testapp', function(req, res){
    res.send('callback');
}); 
```

当我取消注释时

```
req.session.oauth.token = oauth_token; 
```

我收到一个错误“无法读取未定义的属性'oauth'”，req.session 在控制台中也显示未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:14:30.357

您正在尝试在会话`token`上的对象上设置属性。`oauth`如果`oauth`对象未初始化，则为`undefined`，并且不能设置`token`属性。您首先需要`oauth`在会话中初始化对象。你可以例如做

```
req.session.oauth = {token: theToken} 
```

这将在会话中创建一个对象并设置该`token`对象的属性。

@robertklep 想出了解决方案的另一半：确保您在正确的环境中运行。由于您已使用`dev`in `app.configure`，因此您必须运行 node with`NODE_ENV=dev`才能应用配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T13:54:54.780

```
var app = express();
app.configure('dev', function() {
    app.use(express.logger());
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: "topsecret" }));
    app.use(app.router); // You need to add the router after the express.session
}); 
```

希望这可以帮到你

# c++ - 为什么不修改关联容器的键？

> ID：15701123
> 
> 赞同：8
> 
> 时间：2013-03-29T10:05:52.113
> 
> 标签：c++, c++11, std, language-lawyer

我知道在关联容器中更改对象的键是一个糟糕的主意，但我想知道标准究竟在哪里禁止我这样做。考虑：

```
#include <map>
#include <memory>

struct X { int i; };

struct lt
{
  bool operator()( const std::shared_ptr< X >& lhs,
                   const std::shared_ptr< X >& rhs ) const
  {
    return lhs->i < rhs->i;
  }
};

int main()
{
  std::map< std::shared_ptr< X >, int, lt > m;
  auto x = std::make_shared< X >();
  x->i = 1;
  m.insert( std::make_pair( x, 2 ) );

  x->i = 42; // change key wrt the container!
} 
```

我认为上述内容*应该*是非法的，但我已经阅读了一段时间的标准，但我找不到任何实际上*使它*非法的东西。它在哪里？还是隐藏在未来的缺陷报告中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T10:08:58.753

如果您修改值的方式是根据您指定的比较器在更改后任何两个键的比较不同，这会在您的程序中注入未定义的行为。

根据 C++11 标准 ([associative.reqmts]) 的第 23.2.4/3 段：

> 短语“键的等价”是指通过比较而不是 `operator==`on 键强加的等价关系。也就是说，如果对于比较对象, ，则两个键`k1`和`k2`被认为是等效的。**对于同一容器中的****任意两个键****，调用****应始终返回相同的值。**`comp``comp(k1, k2) == false && comp(k2, k1) == false`**`k1``k2``comp(k1, k2)`**

# ios - 从 Xamarin iOS 中的 appDelegate 类访问 UIViewController 属性

> ID：15701124
> 
> 赞同：0
> 
> 时间：2013-03-29T10:05:53.557
> 
> 标签：ios, xamarin

我创建了一个 UIViewController 类，我在其中设置了一个 UIbutton 属性和一个公共方法来访问它。在我的 appDelegate 类中，我实例化了这个视图控制器，一切正常。但是，当我尝试访问调用该方法时，Xamarin 不会编译并返回 NullReferenceException，尽管 UIButton 显示在屏幕上。

谢谢你的帮助。

编辑实际上，我在 viewdidload 中实例化了我的组件，但我必须在构造函数中执行 ti。

# iphone - 在OpenGLES中将图像分割成一个小四边形网格

> ID：15701125
> 
> 赞同：6
> 
> 时间：2013-03-29T10:05:57.283
> 
> 标签：iphone, ios, objective-c, opengl-es, uiimage

如何将图像拆分为`OpenGLES`.

我需要将图像分成小部分，然后只拉伸图像的一部分，而不是整个图像。

可以使用`OpenGL`吗？我是新来的`OpenGL`。

**在编辑头发图像之前**

![在编辑头发图像之前](../Images/aca5f3986490cd4b2ca88dfd24bc8376.png)

并**在编辑头发图像后**
![并在编辑头发图像后](../Images/5593b4751938e32d7503871bbd8db70a.png)

因此，图像从任何一侧以任何方式延伸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T06:04:53.260

你能解释得更详细一点吗？你想用什么四边形？它们是简单的矩形还是正方形？或者它们更复杂一些，比如平行四边形、梯形、风筝形或菱形？

无论如何，将图像拆分为您想要的任何四边形都很容易。您可以通过告诉 OpenGL 图像坐标来从图像中获取任何四边形：glTexCoord2f(x, y)

我忘了提到 OpenGL 中的图像加载了大小（1.f，1.f），无论您的图片大小如何，您都可以将其拆分为任意数量的四边形。

有一个关于纹理映射的非常有用的[教程](http://www.cse.msu.edu/~cse872/tutorial4.html)，也许你会得到更详细的答案。我还建议您关注官方的 OpenGL 文档。

祝你好运。

# opengl - 如何使用 obj2opengl.pl

> ID：15701134
> 
> 赞同：0
> 
> 时间：2013-03-29T10:06:20.587
> 
> 标签：opengl, 3d, .obj, 3d-model

现在，我有一个 .obj 文件扩展名的 3d 模型，但我使用 JavaScript 和 obj2opengl.pl。

指导如何使用步骤导出文件 .h 扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:50:57.893

请不要使用`obj2opengl.pl`——将几何数据硬编码到程序的可执行文件中绝对是疯狂的；无论您使用哪种语言和目标架构。

只需直接读取 obj 文件，它们就很容易解析。

# sencha-touch-2 - Sencha 命令 - 未找到 @import 'sencha-touch/default/all'

> ID：15701140
> 
> 赞同：0
> 
> 时间：2013-03-29T10:06:48.897
> 
> 标签：sencha-touch-2, sencha-cmd

当我像这样运行 sencha 命令时：

**sencha app build 生产**

我收到一个错误，它指向 app.scss 中的以下行：

**@import 'sencha-touch/default/all';**

在我的应用程序中，我有以下文件夹：

**\App\touch\resources\themes\stylesheets\sencha-touch\default**

但是没有“全部”文件夹。我的应用程序结构是否损坏或者我还缺少其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:00:15.503

可能会产生错误，因为没有`_all.scss`内部

> touch\resources\themes\stylesheets\sencha-touch\default

_all.scss 的内容是

```
@import 'core';
@import 'widgets'; 
```

再次检查应用程序结构或`_all.scss`手动创建，看看它是否解决了问题。

# asynchronous - 在返回 Stream 的函数中实现异常处理

> ID：15701142
> 
> 赞同：2
> 
> 时间：2013-03-29T10:06:54.677
> 
> 标签：asynchronous, dart

我正在实现一个返回 Stream 的函数。我不确定如何实现错误处理，最佳实践是什么？

对于返回 Future 的函数，最好[不要抛出同步错误](http://www.dartlang.org/articles/futures-and-error-handling/#potential-problem-accidentally-mixing-synchronous-and-asynchronous-errors)。对于返回 Stream 的函数也是如此吗？

这是我在想的一个例子：

```
Stream<int> count() {
   var controller = new StreamController<int>();
   int i = 0;
   try {
     doSomethingThatMightThrow();
     new Timer.repeating(new Duration(seconds: 1), () => controller.add(i++));
   } on Exception catch (e) {
     controller.addError(e);
     controller.close();
   }
   return controller.stream;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:51:43.433

一般来说，Streams 也是如此。主要思想是，用户应该只需要以一种方式处理错误。您的示例将所有错误移动到流中。

在某些情况下，立即错误会更好（例如，您可能会因为编程错误而导致错误并且永远不应该处理，或者如果您想保证 Stream 永远不会产生错误），但是通过流发送错误几乎总是一件好事。

小笨蛋：一个 Stream 通常应该（有例外）在有人开始收听之前不产生任何数据。在您的示例中，您正在启动一个 Timer，即使您甚至不知道是否会有监听器。我猜这个例子是减少的，并不代表你的真实代码，但它是需要注意的。解决方案是使用 StreamController 的回调来进行暂停和订阅更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:01:51.637

我已经更新了示例以采纳 Florian 的评论。

在我的实际用例中，我不想缓冲结果，所以如果流暂停，我会抛出 UnsupportedError 。

我已将其设为终止流，而不是无限流。

如果此函数的用户在几秒钟后异步添加了一个侦听器，那么他们将丢失前几个结果。他们不应该这样做。我想这是要清楚地记录下来的东西。虽然也许，如果订阅状态在收到第一个数据之后发生变化，但在收到关闭之前，我也可能会抛出错误。

```
Stream<int> count(int max) {
   var controller = new StreamController<int>(
           onPauseStateChange: () => throw new UnsupportedError('count() Stream pausing not supported.'));
   int i = 0;
   try {
     doSomethingThatMightThrow();
     new Timer.repeating(new Duration(seconds: 1), () {
        if (!controller.hasSubscribers)
           return;
        controller.add(i++);
        if (i >= max)
           controller.close();
     });
   } on Exception catch (e) {
     controller.addError(e);
     controller.close();
   }
   return controller.stream;
} 
```

# javascript - 给定纬度/经度，使用 JSONP 检索城市和州的最简单方法是什么？

> ID：15701143
> 
> 赞同：-2
> 
> 时间：2013-03-29T10:06:57.750
> 
> 标签：javascript, api, google-maps, geolocation

我正在寻找一个 API。最好是 JSONP API（客户端）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:23:31.737

不是 JSONP，但您可以根据需要对其进行操作。我正在使用 Google Map API 客户端。

```
var lat = 'some value';
   var lng = 'some value'; 
   geomap.geocode({'latLng':new google.map.latLng(lat,lng)},function(res){
            var tmp = [];
            $.each(res,function(i,e){
                    if(e.address_components.length>=4){
                            tmp.push(e);
                    }
            });
            if(tmp.length>=1){      
                    tmp.sort();
                    $.each(tmp[0].address_components,function(i,e){
                            if(e.types=='postal_code')  console.log(e.short_name);
                            if(e.types[0]=='administrative_area_level_1') console.log(e.short_name);
                            if(e.types[0]=='locality') console.log(e.short_name);
                    });
            }
    }); 
```

# file-upload - Corona：如何在 Corona SDK 中的服务器上发送多个文件？

> ID：15701145
> 
> 赞同：2
> 
> 时间：2013-03-29T10:07:04.007
> 
> 标签：file-upload, httpwebrequest, webserver, coronasdk, network-protocols

我想向服务器发送多个文件，其中一些是音频、图像和纯文本文件。

我正在尝试将所有文​​件名放在单个表中并通过服务器发送该表。我们能做到这一点吗？如何？

我能够使用此链接发送简单的字符串： [network.request](http://docs.coronalabs.com/api/library/network/request.html#custom-http-headers)

# c - 将 fprintf 输出重定向到端口

> ID：15701150
> 
> 赞同：5
> 
> 时间：2013-03-29T10:07:17.033
> 
> 标签：c, logging, netbeans, log4j, netbeans-7

我曾在 Java 中工作过，并且我知道基本的 C。

我必须调试不是我写的代码。在我的 Java 项目中，我一直在使用具有以下配置的 log4j：

```
log4j.rootCategory=INFO, A1, socket
log4j.appender.socket=org.apache.log4j.net.SocketAppender
log4j.appender.socket.remoteHost=localhost
log4j.appender.socket.port=4445
log4j.appender.socket.locationInfo=true
log4j.appender.A1=org.apache.log4j.ConsoleAppender 
```

之后我使用 NetBeans 中的 beanmill 插件读取日志，以了解日志的来源。可以在源代码中搜索日志输出中的字符串，但这需要时间，而且我必须为很多语句执行此操作。Beanmill 使它像单击记录的行一样简单。

现在我必须使用一些使用大量`fprintf`语句的 C 代码。

`fprintf`知道如何通过将输出重定向到端口 4445来实现我对 log4j 和 beanmill 所做的事情吗？

我在 Windows XP 中使用 MinGW 和 NetBeans 7.3 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T08:13:34.467

在您提到的代码段中，您基本上是在写入一个**套接字**，即`localhost:4445`.

您不需要重定向`fprintf`到*port*。您需要*使用*.`fprintf`

但是*套接字*不是*文件句柄*`fprintf`，因此在这种情况下您不能使用。您可以使用`fprintfsock`专门为使用套接字而设计的。在 Windows 上，您可以执行以下操作：

```
#define fprintf(a,b,...) fprintfsock(a,b,__VA_ARGS__)

void fprintfsock( SOCKET s, const char* f, ... )
{
    va_list a;
    va_start( a, f );
    //vsnprintf will return total number of characters excluiding null-terminator
    int l = vsnprintf( 0, 0, f, a ) + 1 ;
    char* buf = (char*) malloc(l);
    va_start( a, f );
    // vsnprintf will write at most l characters including null-terminator
    vsnprintf( buf, l, f, a );
    send( s, buf, l, 0 );
    free( buf );
} 
```

# backbone.js - 谷歌地图和 Backbone.js 事件触发

> ID：15701152
> 
> 赞同：1
> 
> 时间：2013-03-29T10:07:23.470
> 
> 标签：backbone.js, google-maps-api-3, google-maps-markers

我有一个谷歌地图，用户可以点击（在地图上的任何地方），点击事件打开一个引导模式窗口，包含一个表单。我的问题是，如何/在哪里处理此提交事件以将标记添加到标记集合，将其保存到数据库等。

目前我有一个地图视图，它呈现谷歌地图，并为点击添加一个事件监听器。单击地图打开模态。

```
App.Views.Map = Backbone.View.extend({
...
initializeMap : function(){}
...
addMapEventlistener : function() {

    google.maps.event.addListener(this.map, 'dblclick', function(event) {

    var coords = event.latLng.toUrlValue();

    var carray = coords.split(",");

    var model = new Backbone.Model({ coords: carray });

    var view = new App.Views.Modal({ model: model });

    var $modalEl = $("#modal");
    $modalEl.html(view.render().el);
    $modalEl.modal();
    }); 
}    

App.Views.App = Backbone.View.extend({

        initialize: function() {

var addMarkerView = new App.Views.AddMarker({ collection: App.markers });

        }

});

// add marker view

    App.Views.AddMarker = Backbone.View.extend({

        el: '#addForm',

        initialize: function() {

            $('<input>', {
                type: 'submit',
                value: 'Submit',
                class: 'smt'
            }).appendTo(this.$el);

            console.log('AddMarker init run'); // this echoed out

        },

        events: {
            'submit' : 'addMarker'      
        },

        addMarker: function(e) {

            e.preventDefault();

            alert('hello');

        },

    }); 
```

我的猜测是在地图上的点击事件之后呈现的表单，所以我必须在模式打开后以某种方式设置主干事件监听，并在集合视图中处理表单提交，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:26:59.313

您可能希望使用[事件](http://backbonejs.org/#View)对象来绑定您的侦听器。
关于何时（重新）绑定您的事件。实例化视图时，事件对象中指定的侦听器将绑定**到视图元素**。这意味着，如果您的事件以子元素为目标，那么此时该子元素是否存在并不重要。**现在，在不使用 setElement 方法更改视图元素**的特殊情况下，您必须重新绑定侦听器。

例子：

```
<div id="#mydiv"></div> 
```

并且您想在此 div 内的按钮上绑定一个事件（稍后您将创建一些。）。好吧，[这是一个例子](http://jsfiddle.net/gVJ7N/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:54:30.710

好的，解决了。我的错。我将事件添加到错误的视图中，我必须将其添加到 App.Views.Modal 视图中（当然事件发生在模态中）。谢谢你的时间！

# javascript - 无法通过 .bind (JS) 传递数据

> ID：15701153
> 
> 赞同：0
> 
> 时间：2013-03-29T10:07:24.477
> 
> 标签：javascript, function, bind

我需要通过 .bind 传递数据的帮助

```
$('#cell1').bind('click',0,function(mx)
{
    alert('hiiii');
    alert(mx[0]);
}); 
```

出现'hiii'消息，但是当涉及到mx[0]时，我确定不是空的数组，出现'undefined'，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:10:33.593

您必须使用`data`event 参数的属性：

```
$('#cell1').bind('click',0,function(event)
{
    alert('hiiii');
    alert(event.data);
}); 
```

见[http://api.jquery.com/event.data/](http://api.jquery.com/event.data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:54:28.130

在您的代码中，'mx' 是函数中的唯一参数，它指向一个事件对象，因为 jQuery. 而且我认为这里不需要使用参数。试试这个：

```
$('#cell1').bind('click',function(){
    alert('hiiii');
    alert(mx[0]);
}); 
```

如果您想使用 'mx' 作为事件对象的参数。

```
$('#cell1').bind('click',{mx:mx},function(event){
    alert('hiiii');
    alert(event.data.mx[0]);
}); 
```

# ios - 在 iOS 6 上发送全局触摸事件

> ID：15701155
> 
> 赞同：2
> 
> 时间：2013-03-29T10:07:28.533
> 
> 标签：ios, iphone-privateapi

我想构建一个自动 iOS 应用程序测试框架。我可以通过 IOHIDFamily 记录触摸事件，所以有什么方法可以重播这个？

我试过这样的GSEvent

```
void sendclickevent(){     
    mach_port_t thePortOfApp = GSCopyPurpleNamedPort("com.fuckyou.fuck");     

    GSEventRecord header;     
    GSHandInfo click;     
    GSPathInfo pathInfo = {2,2,2,1,1,{50,50}, NULL};     

    bzero(&header, sizeof(header));     
    bzero(&click, sizeof(click));     

    header.type = kGSEventHand;     
    header.subtype = kGSEventSubTypeUnknown;     
    header.location.x = 50;     
    header.location.y = 50;     
    header.windowLocation.x = 50;     
    header.windowLocation.y = 50;     
    header.infoSize = sizeof(GSHandInfo)+sizeof(GSPathInfo);     
    header.timestamp = mach_absolute_time();     

    click.type = kGSHandInfoTypeTouchDown;     
    click.deltaX = 1;     
    click.deltaY = 1;     
    click.pathInfosCount = 1;     

    struct    
    {     
        GSEventRecord record;     
        GSHandInfo hand;     
        GSPathInfo path;     
    } record = {header, click, pathInfo};     

    GSSendEvent(&record, thePortOfApp);     
} 
```

thePortOfApp 返回非零。但是在这个功能结束时，比如按下一个按钮，什么都没有发生。那么有什么问题吗？或者我需要另一种方式将触摸事件发送到 iOS UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:39:44.167

看看与在您的应用程序之外发送事件相关的其他一些问题：

[使用GSEvent发送触摸事件，但无效](https://stackoverflow.com/questions/10274405/use-gsevent-to-send-touch-event-but-its-inviald)

[使用 GraphicsServices.h/GSEvent 以及使用 Xcode 编译 CLI iPhone 工具](https://stackoverflow.com/questions/3017367/using-graphicsservices-h-gsevent-as-well-as-compiling-cli-iphone-tools-with-xcod)

[如何向 iPhone OS 发送触摸事件？](https://stackoverflow.com/questions/1746452/how-to-send-a-touch-event-to-iphone-os/10515571#10515571)

[在 iOS 上模拟系统范围的触摸事件](https://stackoverflow.com/questions/9221086/simulating-system-wide-touch-events-on-ios/9988262#9988262)

**笔记**

1）我相信你应该先发送 touchDown 然后再发送 touchUp 以获得点击。

2) 我在这个主题上看到的大部分代码都使用了 GSGetPurpleSystemAppPort()，它允许发送系统范围的事件（与 GSCopyPurpleNamedPort 相比）。

我相信 GSCopyPurpleNamedPort 只是做通常的 bootstrap_look_up 端口。所以，它会找到一个端口，即使它不是紫色端口（对于“com.fuckyou.fuck”来说很可能是这样）

# matlab - 将文件名传递给 gui 以显示图像

> ID：15701157
> 
> 赞同：0
> 
> 时间：2013-03-29T10:07:32.750
> 
> 标签：matlab

我有一个上面已经有轴的 gui...我想将文件名传递给该 gui 并将其显示在轴上...这是我尝试过的方法..这是写在 xyz.m 文件中的：

```
close current_gui;
 result_image(im2fn); 
```

在这里，当前 gui 是我正在使用的 gui，result_image 是我要显示图像的 gui，im2fn 是具有图像文件名的变量...
在 result_gui 我写了以下代码..

```
function result_image_OpeningFcn(hObject, eventdata, handles, varargin)
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);
axes(handles.axes1);
imshow(im2fn); 
```

显示了 gui，但没有显示图像，而且我收到一个错误，因为未定义函数或变量 'im2fn'....请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:22:27.050

您收到此错误是因为`im2fn`它不是内部本地工作区的一部分`OpeningFcn`- 您对工作方式做出了错误的假设`varargin`。当您使用[`varargin`](http://www.mathworks.co.uk/help/matlab/ref/varargin.html)时，它将是您传递的值的元胞数组。有关更多示例，请参见链接，但在您的情况下，您只想执行以下操作：

```
% Make sure the user passed us something to display
assert(~isempty(varargin), [mfilename ':NoImageToDisplay'], 'You must pass an image to the ''result_image'' GUI');
% Extract data from varargs
im2fn = varargin{1};
% Show it!
imshow(im2fn); 
```

# sqlite - 仅当 SQLite 存在时，如何在 SQLite 中调用用户定义的函数？

> ID：15701159
> 
> 赞同：0
> 
> 时间：2013-03-29T10:07:36.163
> 
> 标签：sqlite, user-defined-functions

SQLite 允许[定义](http://www.sqlite.org/c3ref/create_function.html)可以从 SQL 语句调用的自定义函数。

我正在尝试使用这种机制来获取应用程序中触发活动的通知，例如：

```
CREATE TRIGGER AfterInsert AFTER INSERT ON T
BEGIN
  -- main trigger code involves some extra db modifications
  -- ...

  -- invoke application callback
  SELECT ChangeNotify('T', 'INSERT', NEW.id);
END; 
```

但是，用户定义的函数仅添加到当前数据库连接。可能还有其他客户尚未定义`ChangeNotify`，我不希望他们得到`no such function`错误。是否可以仅在定义函数时调用函数？

也赞赏任何替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:35:00.247

SQLite 被设计为嵌入式数据库，因此假设您的应用程序控制对数据库的操作。

SQLite 没有用于检查用户定义函数的 SQL 函数。

如果您只想检测您自己的程序所做的更改，请使用[sqlite3_update_hook](http://www.sqlite.org/c3ref/update_hook.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-25T11:54:04.360

在调用您的用户定义函数之前，您可以通过从 pragma_function_list 中选择来检查该函数是否存在；

```
select exists(select 1 from pragma_function_list where name='ChangeNotify');
1 
```

# android - Android - 如果第一次加载 Activity（不使用 SharedPreferences），则阻止 onResume() 函数

> ID：15701163
> 
> 赞同：11
> 
> 时间：2013-03-29T10:07:55.910
> 
> 标签：android, android-activity, sharedpreferences, android-lifecycle, onresume

在我当前的应用程序中，当我第一次加载 Activity 时会触发 onResume 函数。我查看了[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html)，但没​​有找到防止这种情况发生的方法。

我可以在第一次加载 Activity 时阻止 onResume() 函数加载，而不使用 SharedPreferences？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-29T10:13:10.640

首先，正如 RvdK 所说，您不应该修改 Android Activity 生命周期，您可能必须重新设计您的 Activity 行为以符合它。

无论如何，这是我看到的最好的方式：

1.在您的活动中创建一个布尔变量

```
public class MyActivity extends Activity{
  boolean shouldExecuteOnResume;
  // The rest of the code from here..
} 
```

2.在您的 onCreate 中将其设置为 false：

```
public void onCreate(){
  shouldExecuteOnResume = false
} 
```

3.然后在你的onResume中：

```
public void onResume(){
  if(shouldExecuteOnResume){
    // Your onResume Code Here
  } else{
     shouldExecuteOnResume = true;
  }

} 
```

这样，您`onResume`将不会第一次执行（`shouldExecuteOnResume`为假），而是在加载活动的所有其他时间执行（因为`shouldExecuteOnResume`将为真）。如果该活动在下次加载时被杀死（由用户或系统），则该`onCreate`方法将再次被调用，因此`onResume`不会被执行，等等。

# visual-studio-2012 - 如何在 VS2012 TFS2010 中使用 StyleCop 签入策略

> ID：15701166
> 
> 赞同：1
> 
> 时间：2013-03-29T10:08:24.320
> 
> 标签：visual-studio-2012, checkin-policy

我正在使用带有 TFS 2010 的 Visual Studio 2012，我想使用 StyleCop 签入策略，但它不起作用。我已经在服务器和客户端上安装了 StyleCop、StyleCop Check-In Policy for TFS 2010 和 Team Foundation Power Tools 2010，但仍然没有任何好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T11:04:06.843

我知道这是一篇较旧的帖子，但我刚刚发布了 Visual Studio 2013 的签入策略。我不知道您是否已经在使用 VS2013，但请查看此扩展。如果你想要 VS2012 支持，你可以添加一个问题。如果有足够的选票，我会增加对它的支持。 [https://stylecopcheckinpolicy.codeplex.com/](https://stylecopcheckinpolicy.codeplex.com/)

# jquery - 将分页添加到简单的 jQuery Carousel

> ID：15701168
> 
> 赞同：1
> 
> 时间：2013-03-29T10:08:44.160
> 
> 标签：jquery, pagination, carousel

我创建了一个简单的 jQuery 循环（无限）轮播。我想在我的脚本中添加分页，以便指示循环中的哪张幻灯片。我的jQuery代码如下：

```
jQuery.fn.carousel = function(previous, next, options){
var sliderList = jQuery(this).children()[0];

if (sliderList) {
    var increment = jQuery(sliderList).children().outerWidth("true"),
    elmnts = jQuery(sliderList).children(),
    numElmts = elmnts.length,
    sizeFirstElmnt = increment,
    shownInViewport = Math.round(jQuery(this).width() / sizeFirstElmnt),
    firstElementOnViewPort = 1,
    isAnimating = false;

    for (i = 0; i < shownInViewport; i++) {
        jQuery(sliderList).css('width',(numElmts+shownInViewport)*increment + increment + "px");
        jQuery(sliderList).append(jQuery(elmnts[i]).clone());
    }

    jQuery(previous).click(function(event){
        if (!isAnimating) {
            if (firstElementOnViewPort == 1) {
                jQuery(sliderList).css('left', "-" + numElmts * sizeFirstElmnt + "px");
                firstElementOnViewPort = numElmts;
            }
            else {
                firstElementOnViewPort--;
            }

            jQuery(sliderList).animate({
                left: "+=" + increment,
                y: 0,
                queue: true
            }, "swing", function(){isAnimating = false;});
            isAnimating = true;
        }

    });

    jQuery(next).click(function(event){
        if (!isAnimating) {
            if (firstElementOnViewPort > numElmts) {
                firstElementOnViewPort = 2;
                jQuery(sliderList).css('left', "0px");
            }
            else {
                firstElementOnViewPort++;
            }
            jQuery(sliderList).animate({
                left: "-=" + increment,
                y: 0,
                queue: true
            }, "swing", function(){isAnimating = false;});
            isAnimating = true;
        }
    });
}
}; 
```

和 html 标记在这里：

```
<div id="viewport">
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
</div> <!-- END VIEWPORT-->

<div class="buttons">
     <a id="prev"><i class="icon-chevron-left"></i></a>
     <a id="next"><i class="icon-chevron-right"></i></a>
</div> 
```

我正在努力了解如何实现分页系统。任何帮助或指导都会很棒。你可以在这里看到我的代码：http: [//www.samskirrow.com/projects/carousel](http://www.samskirrow.com/projects/carousel)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:33:40.910

This is a very basic idea of what you're hoping to achieve, but the way I would go around this is for each item that is in your carousel to append an element to another menu, and then link each one to the relevant element in the slider. For example [please see this VERY basic fiddle](http://jsfiddle.net/KKqZZ/2/).

To add the elements

```
count = 0;
$('#cara .item').each(function () {
    count++;
    li = '<li id="' + count + '"> Page ' + count + '</li>';
    $('.page ul').append(li);
}); 
```

And for each element on click animate to the item in your carousel.

```
$('.page ul li').on('click', function () {
    id = $(this).attr('id');
    $('.item').animate({opacity:0});
    $('.item:nth-of-type('+id+')').animate({
        opacity: 1
    });
}); 
```

As I said this is a simple version of what you're trying to achieve but is an idea that might help you.

# android - Zend framework 2 + Android Mobile + ZfcUser Authentication

> ID：15701172
> 
> 赞同：2
> 
> 时间：2013-03-29T10:09:01.843
> 
> 标签：android, mobile, zend-framework2, sessionid, zfcuser

我需要在我的网站上通过 Android 进行身份验证（Zend Framework2+ZfcUser+ZfcUserDoctrineORM）。我想调用一个对我进行身份验证的 url，并返回一个包含我的 session_id 的 json 对象。我不知道这是否是正确的方法，但无论如何我不知道如何用 zfcUser 做到这一点。

大卫

接下来，我将能够将此 session_id 存储到共享首选项存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:33:21.600

首先对不起我的英语。在我的应用程序中，我需要几乎相同。好的。所以在 yoursite.com/module/YourModuleName/Module.php 做：使用 YourModuleName\Model\YourModuleName;

```
use YourModuleName\Model\YourModuleName;
class Module {
public function onBootstrap(MvcEvent $e) {
        $app = $e->getApplication();
        $em  = $app->getEventManager();
        $sm  = $app->getServiceManager();
        $auth = $sm->get('zfcuser_auth_service');

        $model = new OrdersManager();

        if (!$auth->hasIdentity()) {
            $em->attach(MvcEvent::EVENT_ROUTE, function($e) use ($app, $sm, $auth, $model) {
                $match = $e->getRouteMatch();

                // No route, this is a 404
                if (!$match instanceof RouteMatch) {
                    return;
                }

                $match = $e->getRouteMatch();
                $matchParams = $match->getParams();
                // $matchParams['hash'] == some url param
                if (isset($matchParams['hash'])) {

                    $model->setDbAdapterColibo($sm->get('dbAdapter'));
                    $usersSqlObject = $model->getUsers();

                    $salt = md5('caw');

                    foreach ($usersSqlObject as $key => $user) {
                        $hash = hash('sha256', $salt.$param1.$user['user_id']);
                        if ($hash == $matchParams['hash']) {
                            $authAdapter = $sm->get('ZfcUser\Authentication\Adapter\AdapterChain');
                            $request = $app->getRequest();
                            $request->getPost()->set('identity', $user['email']);
                            // You may use user password to auth user
                            $request->getPost()->set('credential', $user['user_id']);
                            $result = $authAdapter->prepareForAuthentication($request);
                            $auth->authenticate($authAdapter);

                            // do your staff with session or other. 
                            // after this you will be redirect to page from where query was

                            break;
                        }
                    }
                }
            });
        }

    }
} 
```

不要忘记 yoursite.com/module/YourModuleName/config/module.config.php 您需要使用您的 URL 参数添加路由，以便在 $matchParams = $match->getParams(); 中接收它 如果我描述过您将获得身份验证并立即重定向到该站点。示例： [http](http://example.com/someController/someAction/param1/param2/hash) ://example.com/someController/someAction/param1/param2/hash ...结果将是身份验证并打开页面[http://example.com/someController/someAction/param1/param2/hash](http://example.com/someController/someAction/param1/param2/hash) ...

好的。这就是我的应用程序所需要的。希望这有帮助。

PS 一些想法来自[Zend Framework 2 - Global check for authentication with ZFCUser](https://stackoverflow.com/questions/14137868/zend-framework-2-global-check-for-authentication-with-zfcuser)

# arrays - Perl - 如何将 [ a=>1, b=>2, ... ] 之类的 2 个数组/列表合并为一个？

> ID：15701174
> 
> 赞同：2
> 
> 时间：2013-03-29T10:09:09.173
> 
> 标签：arrays, perl, http-post, httprequest

我需要加入 2 个 perl 数组/列表（对不起，不知道它们是如何正确命名的）格式

```
[ a=>1, b=>2, c=>3 ] and [ d=>4, e=>5, f=6 ] 
```

并且需要加入他们

```
[ a=>1, b=>2, c=>3, d=>4, e=>5, f=6 ] 
```

我怎样才能做到这一点？我以前从未使用过这样的列表...

我需要它用于 HTTP::Request::Common

```
$ua->request(POST 'http://somewhere/foo', [foo => bar, bar => foo]); 
```

因为我为每个请求都有一组标准参数，另外还有根据请求的自定义参数。当然，我不想在每个请求中都编写相同的代码，而是只定义一次公共参数。

Tnx 为您提供帮助，罗伯特

## 澄清：

这是大约。我想做的事：

```
my $result = httpPOST( $url, [ a=>1, b=2, ... ] );

sub httpPOST {
    my( $url, $params ) = @_; # ???
    my $ua = LWP::UserAgent->new;

    my $result  = $ua->request( POST $url, [ %auth, ????? ] );

    return $result->content;
} 
```

嗯...我没有得到适当的语法。请你再帮我一次好吗！？;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:13:27.823

```
[ ... ] 
```

类似于

```
do { my @anon = ( ... ); \@anon } 
```

您有一个哈希 ( `%auth`) 和一个对数组 ( `$params`) 的引用。

* * *

`%hash`获取散列的元素作为键和值的列表。

`@array`获取数组的元素，这意味着`@$ref`获取引用数组的元素。

所有你需要的是

```
 [ %auth, @$params ] 
```

* * *

请注意，您永远不应该使用`->content`. 改为使用`->decoded_content`。因此，您应该使用以下代码：

```
my $response  = $ua->request( POST $url, [ %auth, @$params ] );
return $response->decoded_content( charset => 'none' ); 
```

（`charset => 'none'`解决了破坏 XML 响应的错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:53:13.427

在 Perl 中，`=>`被称为“胖逗号”，与普通的基本相同`,`，只是“不需要在它的左边引用单词”。所以基本上

```
[ a=>1, b=>2, c=>3 ] and [ d=>4, e=>5, f=>6 ] 
```

等同于

```
[ 'a', 1, 'b', 2, 'c', 3 ] and [ 'd', 4, 'e' 5, 'f', 6 ] 
```

如果您想知道奇怪的语法做了什么。在 Perl 中，一个常见的模因是使用类似的东西`function(key => 'value')`来代替作者`function('key', 'value')`是否“看起来更自然”。Perl 本身并不介意这两种方式。

您可以正常合并这些 ( `[ @$list1, @$list2 ]`)，但在这种情况下，它可能不是您想要的。你看，`HTTP::Request::Common`使用数组而不是常规哈希/哈希引用的原因是它需要能够定义具有不同“值”的相同“键”。引用模块的 perldoc：

> 可以通过重复字段名称或将值作为数组引用传递来指定多值表单字段。

因此，如果您希望您的“附加自定义参数”覆盖任何同名的“标准参数”，则不会发生这种情况。为此，您应该将它们视为实际的哈希值，然后强制它们排列 refs：

```
my %standards = ( foo => 'bar', bar => 'foo');
my %additionals = ( foo => 'not-bar', this => 'that');
$ua->request(POST 'http://somewhere/foo', [ %standards, %additionals ]); 
```

# css - Mootools .setStyle 不会改变 IE9 中的背景颜色

> ID：15701179
> 
> 赞同：0
> 
> 时间：2013-03-29T10:09:31.137
> 
> 标签：css, background, internet-explorer-9, mootools

我有一个 MooTools 脚本，它处理带有按钮的面板（切换面板内容）。

这是脚本 - 每个按钮设置相应的面板可见 + 更改自身的背景：

```
buttons.addEvent('mouseenter', function(button){
        var panel = 'panel-' + this.get("id");
        $$('.panel').setStyle('display','none');
        $(panel).setStyle('display','block');
        buttons.setStyle('background',null);
        this.setStyle('background','#183c7c');
    }); 
```

对于 IE（在 8 和 9 中尝试过），脚本的最后一行不起作用 - 按钮本身的背景不会改变。对于 Firefox 和 Chrome，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:00:07.640

它在 IE9 下为我工作：http: [//jsfiddle.net/EWUeP/](http://jsfiddle.net/EWUeP/)

html:

```
<div id="divy"></div> 
```

CSS：

```
div{
    width:300px;
    height: 300px;
    background-color: #eee000;
} 
```

js：

```
var d = document.id('divy');
d.setStyle('background','#183c7c'); 
```

但是，如果您只想更改 bg 颜色 - 调用正确的 css: `d.setStyle('background-color','red');`background 规则是所有背景 css 类型的全局规则 [color url position repeat etc..]

# css - 媒体查询在 NookColor 中有效吗

> ID：15701180
> 
> 赞同：1
> 
> 时间：2013-03-29T10:09:35.370
> 
> 标签：css, media-queries, nook

我想知道媒体查询是否适用于 NookColor？如果它没有什么可以解决它？

# iphone - 在 iphone App 中捏合以放大 UIWebView

> ID：15701181
> 
> 赞同：2
> 
> 时间：2013-03-29T10:09:40.863
> 
> 标签：iphone, ios, objective-c, uiwebview, zooming

我正在开发简单的应用程序。我正在访问**html**页面`UIWebVIew`。我想在选项的帮助下缩放**html页面**`zoom`

请帮帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T10:13:52.690

放大**、缩小和捏合是****UIWebView**的内置功能。您无需编写任何代码即可实现这一目标。简单地说，用你的手指。

在 Simulator 上，您可以将**Option (Alt)**和**Shift**键与**Mouse**一起使用。

使您的选项**Scale Page to Fit ON**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T10:16:32.573

试试这个下面的属性

webView.scalesPageToFit = 是；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-03T11:06:28.103

首先设置下面给出的这个属性：

```
 webView.scalesPageToFit = YES; 
```

然后你必须在 html 字符串的元数据上设置视口。在我的情况下，头标签是空的。这就是为什么我只是用包含元标记的头替换了头。

```
 htmlString = [htmlString stringByReplacingOccurrencesOfString:@"<head></head>"
                                                 withString:@"<head><meta name=\"viewport\" content=\"width=568\"/></head>"];
    [webView loadHTMLString:htmlString baseURL:nil]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T13:38:49.523

# c# - 如何从另一个类访问表单元素

> ID：15701183
> 
> 赞同：2
> 
> 时间：2013-03-29T10:09:45.270
> 
> 标签：c#, winforms, oop

我有以下代码

```
 namespace Spaceship_Invaders
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
                Image myImage = Image.FromFile("image/Untitled.png");
                pictureBox1.Image = myImage;
            }

            public class spaceship { 
                Image myimage = Image.FromFile("image/Untitled6.png");
                Form1 myform = new Form1();
                 myform.pictureBox1.Image = myimage;            

            }

        }
    } 
```

我的表格中有一个图片框，我想从类宇宙飞船访问图片框，但我无法访问它。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:10:28.323

**[已编辑]**您可以通过以下方式访问它：

```
public class spaceship
{ 
    Image myimage = Image.FromFile("image/Untitled6.png");
    Form1 myform = new Form1();

    spaceship()
    {
        myform.pictureBox1.Image = myimage;             
    }
} 
```

[看看这里](http://msdn.microsoft.com/en-US/library/ms173115%28v=VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:15:09.023

与其取消公共字段，不如创建一个公共属性 From1.TheImage 来将图像设置为 PictureBox。

这允许您实现检查、跨线程安全（如果需要）以及在不更改 SpaceShip 类的情况下将 PictureBox 与其他东西交换。

阅读这篇文章：[SO public fields/properties](https://stackoverflow.com/questions/3500758/in-what-cases-should-public-fields-be-used-instead-of-properties)以了解和了解将字段公开的风险。

```
 public partial class Form1 : Form
    {

        public Image MyImage
        {
            get { return pictureBox1.Image; }
            set { 
                  //do some checks if neccessary
                  pictureBox1.Image = value; 
                }
        }

        public Form1()
        {
            InitializeComponent();
        }
    } 
```

# php - PHP 分叉进程接受连接

> ID：15701185
> 
> 赞同：2
> 
> 时间：2013-03-29T10:09:55.567
> 
> 标签：php, sockets, fork

我想知道在绑定服务器的 IP 和端口后是否分叉了一个进程。分叉是否能够接受连接。如果我有 10 个分叉都在尝试接受，那么扩展它是否有可能超过 1 个可以接受相同的连接，或者是否有一些锁定？

前几天想用php写一个http服务器。因此它一次可以处理多个连接。接受连接的主进程读取数据并通过 unix 套接字将其传递给线程。到目前为止，在我的笔记本电脑上，我可以在一个给出当前日期和时间的小页面上每秒获得 1000 个连接。瓶颈之一是主流程。最初我很想获得连接的文件描述符并将它们传递给套接字并让它们读取数据然后处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:23:21.173

是的，分叉的孩子将能够在同一个（继承的）监听套接字上接受新的连接。

假设您`socket_accept()`在所有子进程中使用阻塞，即使它增加到 100 个进程，您也不应该遇到任何性能问题；操作系统将唤醒一个子进程来处理连接。

应该提到的是，使用`ab`或类似的负载生成器工具对其进行基准测试是一种很好的做法。

# sql-server-2008 - 查询父子消息

> ID：15701194
> 
> 赞同：0
> 
> 时间：2013-03-29T10:10:35.990
> 
> 标签：sql-server-2008, tsql

我有一个表 Messages ，其中包含父消息及其子消息。表：mid parentid 主题 msgbody 1 null main test 2 1 subreply .. 3 null test .. 4 1 subreply ..

```
So here, output should be like

mid    parentid    subject    msgbody   counts
4         1        subreply    ..         3
3        null      test        ..         0 
```

我尝试使用下面的查询不存在但与计数混淆并仅从中获取最新记录。

```
NOT EXISTS (SELECT 1 FROM tblMessages MInner WHERE MInner.ParentId = M.MessageId) 
```

在我的输出中，消息 id 1 和 2 不可用，因为我想在我的消息队列中显示最近和最新的消息。

在我的示例数据消息队列中，messageid 为 1。我要显示的 3 条消息的总数为 3。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:54:39.293

最后在使用 CTE 的行号的帮助下完成。谢谢

# php - php 错误 + mysqli 一个注意到的错误

> ID：15701201
> 
> 赞同：0
> 
> 时间：2013-03-29T10:10:53.680
> 
> 标签：php, mysql, forms

我收到一个错误说

**注意：第 15 行 C:\wamp\www\chat2\ajaxLoad.php 中的数组到字符串转换**

我不知道如何解决这个问题有人可以帮助我吗？？？

# 这是代码

```
<?php
 require_once('mysqli.class.php');  

$config = array();
        $config['host'] = 'localhost';
        $config['user'] = 'root';
        $config['pass'] = 'root';
        $config['table'] = 'messages';

        $db = new DB($config);

        // Run a Query:
        $db->query('SELECT * FROM message');

        echo$db->get();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:13:51.963

`$db->get()`返回一个数组。数组是事物的列表。`echo`只能打印字符串和数字，不能打印数组，所以不知道怎么处理。它打印`Array`并发出此通知。

如果要打印整个数组，请使用

```
print_r($db->get()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:14:00.943

那是因为输出的`$db->get()`是数组而不是字符串，但是当你尝试回显它时，PHP 会尝试转换它；因此通知。

您可以使用`print_r()`or`var_dump()`代替：

```
print_r($db->get()); 
```

迭代结果：

```
foreach ($db->get() as $row) {
    // do something with $row, also an array most likely
} 
```

# android - 我们可以在 Android 中使用 Sherlock 库在 ActionBar 上实现一个列表吗？

> ID：15701203
> 
> 赞同：0
> 
> 时间：2013-03-29T10:11:12.697
> 
> 标签：android, actionbarsherlock

我在我的应用程序中使用操作栏来实现选项卡片段。我在这方面很成功。但是遇到一个小问题。我需要操作栏右上角的下拉列表和搜索按钮。请看图片： ![ ](../Images/ea462a977815547b7b983e8e900cf195.png)

您可以看到我需要在操作栏中显示的红色标记按钮，在操作栏下方我们有标签片段。我成功生成了片段，但在操作栏上显示这些按钮时遇到问题。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:18:54.313

溢出按钮是自动生成的，但如果您的手机带有硬件按钮，则不会显示。你不应该试图强迫它出现，因为它违背了拥有硬件按钮手机的人的通常行为。

# java - Weld @Inject ApplicationScope bean 在每个注入点创建新实例

> ID：15701206
> 
> 赞同：0
> 
> 时间：2013-03-29T10:11:25.133
> 
> 标签：java, cdi, weld, jsr299

我正在尝试使用 Weld 来理解 CDI。得到下一个结构：

```
@ApplicationScoped
public class MainFacade {

    @Inject
    private FooFacade fooFacade;

    private static int ins=0;

    public MainFacade() {
        super();
        ins++;
        System.out.println("MainFacade instance = "+ins);
    }

    public FooFacade getFooFacade() {
        return fooFacade;
    }
} 
```

其中 FooFacade 也是 @ApplicationScope。

当应用程序启动时，我得到一个 MainFacade 实例 = 1。当我将它注入其他类（GWT RPC servlet）并调用 mainFacade.getFooFacade() 时，将创建 MainFacade 的新实例以及 fooFacade 的新实例。

认为 Weld 会在我注入它的任何地方返回相同的应用程序范围 bean 实例。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:21:05.820

我认为这个测试不能很好地验证应用程序范围的 bean 是否真的是“单例”。

如果您将此 bean 注入到其他 bean 中，Weld 将创建一个代理，该代理将处理对正确实例的所有调用的委托。例如，如果您将请求范围的 bean 注入到会话范围的 bean 中，这一点尤其重要。

代理将基本上扩展`MainFacade`这是必需的，因为否则代理无法注入到发生注入的字段中。创建代理实例时，将执行 bean 的默认构造函数。由于 Weld 将创建许多代理，您会在控制台中看到多个日志。您可以通过在构造函数中添加类似这样的内容来验证这一点：

```
System.out.println("Type: "+this.getClass().getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T23:00:04.360

当您使用 @ApplicationScoped Weld 时，也会创建一个调用构造函数的代理，请[在此处](http://docs.jboss.org/weld/reference/1.1.0.Final/en-US/html/injection.html#d0e1429)指定。

# codeigniter - 用于显示数据库中特定数据的代码点火器分页？

> ID：15701208
> 
> 赞同：0
> 
> 时间：2013-03-29T10:11:27.313
> 
> 标签：codeigniter

我想通过使用 CI 的分页显示数据库中的一些特定数据。但默认情况下，分页在函数中传递参数，这给我带来了问题。

这是我的控制器

```
function page($catagoryid){

 $this->load->library('pagination');
 $config['base_url'] = base_url().'index.php/pagination/page/'; 

$count = $this->db->query("select * from tbl_products where category_id='$categoryid'");
 $total=$count->num_rows();

 $per_page = 4;
 $config['total_rows'] = $total;
 $config['per_page'] = $per_page;
 $this->pagination->initialize($config);
 $data['pagination'] = $this->pagination->create_links();
 $this->load->model("mpagination");
 $data['list'] = $this->mpagination->get_s(,$categoryid,$config['per_page'],$this->uri->segment(3));
 if ($data['list']!== null){

 $this->load->view('pagination_view', $data);
 }
else {
$this->load->view('noresult');

} 
 } 
```

这是我的模型

```
function get_s($categoryid,$num, $offset) {

$this->db->select ('*');
        ->where('category_id',$categoryid);  // field name

$sql = $this->db->get('tbl_products',$num, $offset); // table name
if ($sql->num_rows () >0) {

    return $sql->result();
 }
 else {
 return null;
}
} 
```

这是我的看法

```
 <?php
 foreach($list as $row):?>

    <?php echo $row->_prduct_id."   ".$row->name."   ".$row->description;?>
    <br/>

  <?php endforeach;?>
  <br/>
     <?php echo $pagination; ?> 
```

这段代码一开始可以工作，但是当我点击分页的第二个链接时它不会工作，因为默认情况下分页将其值作为参数发送到 url 并且不显示数据。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:23:28.677

我没有正确理解您的代码，但这是您进行分页所需的方式。

```
public function page($category_id)
{
    $result = $this->model_file->model_function($category_id);

    $start_index = 0;

    $total_rows = count($result);

    $items_per_page = 10;

    $filtered = array_splice($result,$start_index,$items_per_page);

    $model['data'] = $filtered;

    $model['page_link'] = create_page_links (base_url()."/controller_file_name/page", $items_per_page, $total_rows);

    $this->load->view('view_file_name_path',$model);

    }

    function create_page_links($base_url, $per_page, $total_rows) {

    $CI = & get_instance();
    $CI->load->library('pagination');

    $config['base_url'] = $base_url;
    $config['total_rows'] = $total_rows;
    $config['per_page'] = $per_page; 

    $CI->pagination->initialize($config); 

    return $CI->pagination->create_links();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:36:17.943

像这样试试

```
public function index($offset = 0) 
{
    $language_id = 1;
    $this->load->library('pagination');
    $limit = 10;

    $total = $this->legend_model->get_legend_count($language_id);

    $config['base_url'] = base_url().'legend/index/';
    $config['total_rows'] = $total;
    $config['per_page'] = $limit;
    $config['uri_segment'] = 3;

    $config['first_link'] = '<< First';
    $config['last_link'] = 'Last >>';
    $config['next_link'] = 'Next ' . '&gt;';
    $config['prev_link'] = '&lt;' . ' Previous';
    $config['num_tag_open'] = '<span class="number">';
    $config['num_tag_close'] = '</span>';

    $config['cur_tag_open'] = '<span class="current"><a href="#">';
    $config['cur_tag_close'] = '</a></span>';

    $this->pagination->initialize($config);
    $data['offset'] = $offset;
    $data['legends'] = $this->legend_model->get_legend($language_id, $limit, $offset);

    $this->template->write('title', 'Legend : Manage Legend');
    $this->template->write_view('content', 'legend/index', $data);
    $this->template->render();
} 
```

# asp.net - 关于 MVC4 中的响应和请求

> ID：15701210
> 
> 赞同：0
> 
> 时间：2013-03-29T10:11:31.573
> 
> 标签：asp.net, asp.net-mvc, rest, asp.net-mvc-4

我已经下载了一个应用程序，其中我无法找到在哪里进行地狱数据库操作的事情是有一个 localhost 的 url 例如：- localhosttest/search/products 和代码被编写为发送 xml 作为 POST 的数据，然后在返回响应来自我的数据库。但是我无法在这个 mvc4 应用程序的代码或 sql 中找到任何选择、插入、更新查询。我怎么能找到那个。任何帮助都会很棒谢谢代码是这样的

```
 protected T Execute<T>(Product request) where T : new()
        {
            System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();
            sw.Start();
            T response = default(T);

                RestfulQuery query = new RestfulQuery(string.Format("{0}/{1}", _asUrl, request.Resource));

                string result = string.Empty;
                string mimeType = "application/xml";

                switch (request.Method)
                {
                    case Method.GET:
                        query.Method("GET")
                          .MimeType(mimeType);
                        break;
                    case Method.POST:
                        query.Method("POST")
                          .MimeType(mimeType)
                          .WriteParam(request.Data);
                        break;
                    case Method.PUT:
                        query.Method("PUT")
                          .MimeType(mimeType)
                          .WriteParam(request.Data);
                        break;
                    case Method.DELETE:
                        query.Method("DELETE")
                          .MimeType(mimeType)
                          .WriteParam(request.Data);
                        break;

                }

                result = query.Execute();

                response = SerializerHelper.Deserialize<T>(result);

            }

            return response; 
        }

    } 
```

# macos - 如何在 Mac OS X 10.6 上将 clang 更新到 3.3

> ID：15701224
> 
> 赞同：3
> 
> 时间：2013-03-29T10:12:29.477
> 
> 标签：macos, llvm, clang

我正在运行 Mac OS X 10.6 并想安装适用于 Mac OS X 10.7+ 的 TextMate 2。但它所需要的只是更新版本的 clang (LLVM)，它包含在 Lion 和 Mountain Lion 中。[我在这里](https://stackoverflow.com/questions/8674546/how-to-update-llvm-clang-on-mac-osx)之前读过我可以用 MacPorts 做到这一点。所以我使用`port install clang`MacPorts 并更新到 clang-2.9，然后是 clang-3.2，最后是 clang-3.3。我想，它现在更新了，我检查了版本：`clang --version`. 而且它没有更新：

```
 Apple clang version 2.0 (tags/Apple/clang-139) (based on LLVM 2.9svn)
 Target: x86_64-apple-darwin10
 Thread model: posix 
```

`So I copied the new clang file in this path (`/opt/local/libexec/llvm-3.3/bin `) to`/usr/bin`。但现在有一个失败:(:

```
dyld: Library not loaded: @executable_path/../lib/libLLVM-3.3svn.dylib 
Referenced from: /usr/bin/clang   
Reason: image not found Trace/BPT trap 
```

`libLLVM-3.3svn.dylib`位于`/opt/local/libexec/llvm-3.3/lib`。_ 我现在能做什么，它运行 clang-3.3？对不起，我的英语不完美；）谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:42:19.827

如果您`clang`从运行`/usr/bin`，它将在`/usr/bin/../lib/libLLVM-3.3svn.dylib`IE中查找 LLVM 库`/usr/lib/libLLVM-3.3svn.dylib`（至少动态加载器告诉您的是这样）。您可以尝试将 lib 文件复制到`/usr/lib`.

或者，您可以在此处下载更新的 Clang 官方版本：http: [//llvm.org/releases/download.html](http://llvm.org/releases/download.html)

据我所知，这些构建是自包含的，不需要任何动态库。但是，可能需要将 Apple 的 ARC 库复制到某个目录中。如果您遇到麻烦，请再次询问。

另一种方法是从源代码构建 Clang 和 LLVM。您可以在此处找到存储库 URL 和说明：http: [//clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)

这也应该使用静态链接的 LLVM 库构建 Clang。

3.3, by the way, has not been officially released, so I would recommend using 3.2 unless you need any specific new features.

# javascript - 如何在javascript中为字符串包含switch语句

> ID：15701226
> 
> 赞同：0
> 
> 时间：2013-03-29T10:12:41.963
> 
> 标签：javascript, asp.net-mvc

在我的 MVC 应用程序中包含了一个名为 form Field 的按钮。每当用户单击该按钮时，下拉列表就会显示在包含文本、复选框等选项的模式框中。表单字段和下拉列表的代码：

```
<input type="button" id="FormField" name="Form Field" value="Form Field" style="width: 110px; height: 30px; background-color: #FFFFFF;"  onclick="return FormField_onclick()" />

function FormField_onclick(box) {
             dhtmlx.modalbox({
                 title: "Form Field Creation Tool",
                 text: "<div id='form_in_box'><div ><label>Type: <select id='Type' name='Type'><option>Text</option><option>Checkbox</option><option>Radio</option><option>DropDown</option><option>Listbox</option></select></label><br></div><div><span class='dhtmlx_button'><input type='submit' value='Select' style='width: 86px' onclick='Select_type(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
                 width: "300px"
             });  
         } 
```

每当用户从下拉列表中选择特定选项时，例如，如果用户选择文本选项并单击“选择”按钮，则文本框应插入光标位置。选择按钮的代码：

```
 function Select_type(box) {
             var tp = document.getElementById('Type');

             switch (tp) {
                 case "text":
                     {
                     var editor = CKEDITOR.instances.message;
                        editor.insertHtml('<input type="text" id="tx" name="tx" style="width: 110px; height: 30px" />'); 
                 }
                     break;
                 case "Checkbox": { var editor = CKEDITOR.instances.message;
                                        editor.insertHtml('<input type="checkbox" id="chk" name="chk" value="Checkbox" style="width: 110px; height: 30px" />');} 
                     break;
                 case "Radio": 
                     { 
                 var editor = CKEDITOR.instances.message;
                 editor.insertHtml('<input "radio" id="rd" name="rd" value="radio" style="width: 110px; height: 30px" />');
}
                     break;
                 case "DropDown": alert("DropDown");
                     break;
                 case "Listbox": alert("Listbox");
                     break;
             }              
             dhtmlx.modalbox.hide(box);
         } 
```

但这对我不起作用。即使警报不起作用。而且也不知道如何在其中包含下拉列表和列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:39:02.440

您想要打开开关：

```
document.getElementById('Type').value 
```

而不是它自己的元素，因为它不等于您提供的任何情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:15:30.533

如果你想的话，你可以为 switch 语句使用一个对象字面量...

```
var sw = {
    hello: function () {
        console.log("hello");
    },
    goodbye: function () {
        console.log("goodbye");
    }
}
var str = "hello";
sw[str](); //logs hello 
```

这是一个解释：[http ://www.dyn-web.com/tutorials/obj_lit.php](http://www.dyn-web.com/tutorials/obj_lit.php)

我认为你需要澄清你的问题并适当地标记它......

# javascript - 在 knockoutjs 中将正则表达式绑定为可观察对象

> ID：15701232
> 
> 赞同：1
> 
> 时间：2013-03-29T10:13:07.040
> 
> 标签：javascript, knockout.js

我是 KnockoutJS 的新手。我知道如何定义将用于更改元素文本（或从文本元素更新）的可观察对象，但是，我希望模型中的数据实际上是具有读/写访问权限的正则表达式。我想使用`textarea`类似设置它：

```
<textarea data-bind="value: regex"></textarea> 
```

并使用以下命令在页面上显示：

```
<span data-bind="text: regex"></span> 
```

现在初始化工作：

```
//inside the model
this.regex = ko.observable( /,/g ); 
```

并且两者都`textarea`得到`span`更新（因为本机正则表达式变量具有一个`toString()`可以很好地显示正则表达式的字符串表示的函数）。但是当我更改时`regex`不会更新。似乎设置可观察对象失败了。`textarea``span`

这是可以理解的，因为`value`from`textarea`只是一个文本，为了将其转换为实际的正则表达式，需要一些代码。我有代码。`function str2regex()`让我们用类似这样的主体来调用它：

```
//this is pseudo code and doesn't neccesarily work
function str2regex( str )
  var r = str.match( "^\/(.+?)\/([mig])*$" );
  if ( r ) {
    if ( r[2] === null ) {
      return new RegExp( r[1] );
    } else {
      return new RegExp( r[1], r[2] );
    }
  }
  return null;
} 
```

如何使用来自的文本在我的模型中设置类型正则表达式的值`textarea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:42:33.440

您应该`str2regex`像这样将您的转换为计算出的 observable：

```
// str2regex transformed to computed observable
self.regex = ko.computed(function(){
    var m = self.regex_string().match(/^\/(.+)\/([mig])*$/);
    return m ? new RegExp(m[1], m[2]) : null;
}); 
```

但是您仍然应该跟踪您在 textarea 中可编辑的正则表达式字符串（`regex_string`在我的代码中可观察到）。

看看：http: [//jsbin.com/ofehuj/2/edit](http://jsbin.com/ofehuj/2/edit)

# ruby-on-rails - bcrypt-ruby 如何掩盖被黑数据库的密码？

> ID：15701239
> 
> 赞同：0
> 
> 时间：2013-03-29T10:13:28.457
> 
> 标签：ruby-on-rails, bcrypt, bcrypt-ruby

我试图了解如何`has_secure_password`工作。在 bcrypt-ruby[网站上](https://github.com/codahale/bcrypt-ruby)有以下示例说明如何使用它。`password`上课的方法`User`让我很困惑。看起来代码`@password ||= Password.new(password_hash)`采用加密的哈希并返回未加密的密码。仅从加密的哈希中恢复密码是不可能的。我在误解什么`Password.new`

用户模型

```
require 'bcrypt'

class User < ActiveRecord::Base
  # users.password_hash in the database is a :string
  include BCrypt

  def password
    @password ||= Password.new(password_hash)
  end

  def password=(new_password)
    @password = Password.create(new_password)
    self.password_hash = @password
  end
end 
```

创建帐户

```
def create
  @user = User.new(params[:user])
  @user.password = params[:password]
  @user.save!
end 
```

验证用户

```
def login
  @user = User.find_by_email(params[:email])
  if @user.password == params[:password]
    give_token
  else
    redirect_to home_url
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:23:12.963

I figured out that the line of code `if @user.password == params[:password]` is not comparing the encrypted hash with the unencrypted password `params[:password]`. It takes `params[:password]` and hashes it before doing a comparison. The hashing of `params[:password]` is obscured by `==` which turns out to be a method call.

# vim - 你如何将 密钥映射到vim中的其他东西？

> ID：15701245
> 
> 赞同：1
> 
> 时间：2013-03-29T10:13:56.600
> 
> 标签：vim

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:39:51.187

这对你有用吗？

```
nnoremap u :help<cr> 
```

您的映射也有效，实际上，您没有将键映射`u`到`help`，而是映射`<``u``>`到`help`.

另一个问题，你真的想要那个映射（通过覆盖`u`）吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:26:05.530

你几乎是对的；该`<...>`符号仅用于特殊键和修饰键组合，请参阅`:help key-notation`.

# java - 我应该为下表创建一个方法或变量吗

> ID：15701255
> 
> 赞同：0
> 
> 时间：2013-03-29T10:14:41.297
> 
> 标签：java, queue

```
I have an assignment which says that I need to create an queue class with instruction messages on it.
and instruction message is formed of following properties

 -----------
>InstructionType integer  
> ProductCode    integer  
> Quantity       integer  
> UOM byte

--------------------------------

Can I declare all the above given properties as variables and then pass it as a parameter in a function created for instruction message and place it in the instruction queue class. Can anyone give me a sample code for proceeding with this..and let me know if I think right or any other methodologies. Can be done? please help. 
```

任何人都可以建议，如果是对的。我可以这样使用：
public class instructionqueue { LinkedList queue = new LinkedList() /* 如何从队列类中添加、检索和删除指令消息 */ } 其中指令消息是一个类

```
public class Instructionmessage 
{

   public int Instructiontype;
   public Integer   Productcode;
   public Integer quantity;
   public byte[] UOM = new byte[256];
   public Integer Timestamp;

  /*method to set and get the instruction type  for the messages*/

   public int getInstructiontype()
   {
       return Instructiontype;
   }
   public void setInstructiontype(int newInstructtype)
   {
       Instructiontype = newInstructtype;
   }

    /*method to set and get the product code   for the messages*/

   public int getProductcode()
   {
       return Productcode;
   }
   public void setProductCode(int newproductcode)
   {
       Productcode = newproductcode;
   }

   /*method to set and get the quantity   for the messages*/
   public int getquantity()
   {
       return quantity;
   }

   public void setquantity(int newquantity)
   {
     quantity = newquantity;
   }

   /*method to set and get the Timestamp   for the messages*/
   public int getTimestamp ()
   {
       return Timestamp;
   }
   public void setTimestamp(int newTimestamp)
   {
       Timestamp = newTimestamp;
   }

   /*method to set and get the UOM   for the messages*/
   public byte[] getUOM()
   {
       return UOM;
   }

   public void setUOM(byte[] newUOM)
   {
       UOM = newUOM;
   }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:25:38.807

由于指令消息由 4 个字段组成，您可以创建一个指令类来封装它们。然后，对于队列，您可以使用一个列表，并用指令填充它。例如，实例化

```
LinkedList<Instruction> queue = new LinkedList<Instruction>(); 
```

然后，您可以使用 queue.getFirst() 和 queue.addLast(...) 来操作队列的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:16:34.203

使用所有变量创建一个 POJO java 类。为所有变量创建 getter 和 setter。这将帮助您使用这些方法设置和获取数据。

现在在您的主类中创建一个 Queue 对象，并使用 add(Object) 方法将其添加到队列中。

```
Queue<String> sampleQueue = new LinkedList<String>();
sampleQueue.add("Joseph");
sampleQueue.add("Madhonna"); 
```

**注意：**队列是一个接口，所以不能实例化对象。

使用此方法时可能会引发异常。有关更多详细信息，请参阅此链接[http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html#add(E)](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html#add%28E%29)

1.  IllegalStateException - 如果此时由于容量限制无法添加元素列表项
2.  ClassCastException - 如果指定元素的类阻止它被添加到此队列
3.  NullPointerException - 如果指定元素为空且此队列不允许空元素
4.  IllegalArgumentException - 如果此元素的某些属性阻止它被添加到此队列

# file - 站点/默认/文件应该可以从根 drupal 6 访问

> ID：15701260
> 
> 赞同：0
> 
> 时间：2013-03-29T10:15:06.913
> 
> 标签：file, drupal-6, alias

一个名为“test.php”的文件位于sites/default/files 应该可以从root 访问，即www.example.com/test.php 使用drupal 6。

谁能帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:33:56.823

Your php file did not run because in sites/default/files folder there is a .htaccess file which disables the php handler to execute php files. This is a normal behavior. It is what happens on all my sites.

The change in behavior in "files" is caused by the small .htaccess files which Drupal puts there for security reasons (to disable the php handler). Thats why your **test.php** is not working.

If you are a bit curious, then run your file and check the file source, you will see your php code is still there.

For more: [http://drupal.org/node/814890](http://drupal.org/node/814890), [http://drupal.org/node/652002](http://drupal.org/node/652002)

# jquery - JS客户端页面缓存如何实现？

> ID：15701262
> 
> 赞同：0
> 
> 时间：2013-03-29T10:15:17.550
> 
> 标签：jquery, ruby-on-rails-3, caching, local-storage, browser-cache

我需要为 Web 应用程序添加客户端缓存，因为该站点面向移动设备，响应和连接速度不高。前端缓存有什么“最佳实践”吗？

Rails 3 用于后端，JS+jQuery 用于前端。

我想尽可能少地改变。完美的选择是从缓存中加载页面，如果页面已更新，则从后端重新加载。

可以选择使用骨干网或淘汰赛之类的东西来开发前端应用程序，只从后端检索数据，但如果目前可能的话，我不想避免将路由、视图和逻辑传输到前端。

# cassandra - 使用 cql 优于 thrift 的优势

> ID：15701263
> 
> 赞同：16
> 
> 时间：2013-03-29T10:15:28.167
> 
> 标签：cassandra, thrift, cql

使用 cql 比 thrift 有什么明显的优势，还是仅仅是开发人员过于习惯 SQL 的情况？我想从节俭查询切换到 cql，唯一的问题是我不确定这样做的缺点。这些是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T17:19:16.163

柳本的回答很好，但我相信他可能在几点上被误导了。首先，您应该知道 Thrift API 不会获得新功能；它的存在是为了向后兼容，不推荐用于新项目。已经有一些功能无法通过 Thrift 界面使用。

另一个因素是 Acunu 引用的基准具有误导性。他们不使用准备好的语句来衡量 CQL 的性能。例如，请参见[https://issues.apache.org/jira/browse/CASSANDRA-3634](https://issues.apache.org/jira/browse/CASSANDRA-3634)上的图表（可能与 Acunu 帖子所基于的数据集相同，因为 Eric Evans 两者都写了）。去年 CQL 解析和执行速度也有了一些改进。您不太可能观察到 CQL 3 和 Thrift 之间的任何实际速度差异。

最后，我什至不同意 Thrift 更灵活。CQL 3 数据模型允许使用与 Thrift 相同的数据结构，用于几乎所有非反模式的用途；它只是让您以更有条理的方式思考模型。例如，Lyuben 提到了具有不同列数的行。CQL 3 表可能仍然使用该功能：“存储引擎行”（这是 Cassandra 的低级存储，Thrift 直接使用）和“CQL 行”（您通过 Thrift 界面看到的）之间存在差异。CQL 只是完成了将宽存储引擎行可视化为结构化表所需的额外工作。

在快速的 SO 答案中解释起来有点困难，但请参阅[这篇文章](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)以获得一些温和的解释。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-29T10:30:32.430

**查询**
在 CQL 中，您可以通过几行查询 cassandra 并获取数据（使用 JDBC 驱动程序）：

```
String query = "SELECT * FROM message;";
PreparedStatement statement = con.prepareStatement(query); 
```

虽然在基于节俭的 API 中它有点复杂（例如 Astyanax）：

```
OperationResult<ColumnList<String>> result = 
     keyspace.prepareQuery(mail/*specify columnfamily structure*/)
             .getKey("lyuben@1363115059").execute();
ColumnList<String> columns = result.getResult(); 
```

**性能**
根据 Acunu 执行的[基准测试](http://www.acunu.com/2/post/2011/12/cql-benchmarking.html)，Thrift (RPC) 在查询性能方面略优于 CQL，但您需要处于高吞吐量是这一性能优势的关键的情况下才能获得显着优势。

* * *

一些要查找的优秀文章是：

*   [CQL3 升级指南的节俭。](http://www.datastax.com/dev/blog/thrift-to-cql3)
*   [CQL 与 RPC - Acunu 基准测试](http://www.acunu.com/2/post/2011/12/cql-benchmarking.html)
*   [cassandra 专家的 CQL3](http://www.datastax.com/dev/blog/cql3-for-cassandra-experts)

**编辑**

上述基准已经过时，保罗[在准备好的报表上提供了更新的基准](https://issues.apache.org/jira/browse/CASSANDRA-3634)。

# sql-server-2012 - AdventureWorks2012：SQL 确定在一个数据集中销售过和从未销售过的产品总数

> ID：15701264
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:15:28.230
> 
> 标签：sql-server-2012

我是一名学生，花了足够的时间来完成这项工作。有人可以帮我解决这个问题：确定曾经售出的产品总数和从未售出的产品总数，就像在一个数据集中一样。

我猜 Union 、 Intersection 和 except 不适用于 Production.Product 和 sales.salesOrderDetail。

有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:34:03.140

If I have understood the question correctly then this should work

```
SELECT 
    SUM(CASE WHEN s.ProductId IS NULL THEN 1 ELSE 0 END) TotalProductsUnsold
    , SUM(CASE WHEN s.ProductId IS NULL THEN 0 ELSE 1 END) TotalProductsSold
FROM Production.Product p
LEFT JOIN (
    SELECT DISTINCT ProductId
    FROM Sales.SalesOrderDetail
) s ON s.ProductId = p.ProductId 
```

Using union and except you could do something like

```
SELECT 
    'Total Products Unsold'
    , COUNT(ProductId) [Count]
FROM (
    SELECT
        ProductId
    FROM Production.Product 
    EXCEPT
    SELECT ProductId
    FROM Sales.SalesOrderDetail
) Products
UNION ALL
SELECT
    'Total Products Sold'
    , COUNT(DISTINCT ProductId) [Count]
FROM Sales.SalesOrderDetail 
```

If you can't use / don't want to use `COUNT(DISTINCT ...)` then the second unioned select statement can be replaced with

```
SELECT 
    'Total Products Unsold'
    , COUNT(ProductId) [Count]
FROM (
    SELECT
        ProductId
    FROM Production.Product 
    INTERSECT
    SELECT ProductId
    FROM Sales.SalesOrderDetail
) Products 
```

# iphone - FGallery 无法从 NSArray 加载 ImagePath

> ID：15701271
> 
> 赞同：2
> 
> 时间：2013-03-29T10:15:51.480
> 
> 标签：iphone, objective-c, fgallery

见下文我做了什么：

我有一个`NSArray`有 10 个图像路径，直接从我的本地数据库中获取。每个路径都采用这种格式：`/Users/myname/Library/Application Support/iPhone Simulator/6.1/Applications/CC5BE47A-8249-FDDF-90E3-415CEBGGD75AB/Documents/..`

我`FGallery`用来在网格视图和全尺寸视图中显示图像。当我试图将上述`NSArray`方法`FGallery`委托给我的应用程序时，我的应用程序正在崩溃。它给了我以下错误：

```
***** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI pathExtension]: unrecognized selector sent to instance 0xa4e8c70'
** 
```

现在我需要的是：

我需要上述错误的解决方案，为什么我的应用程序在初始化`NSArray`有 10 个图像路径到`FGallery`委托方法后会崩溃？

**添加的代码：**

```
 NSString *testString = (NSString *) [[self.allImageGalleryDetails valueForKey:@"imageGallery_Detail_ImagePath"]objectAtIndex:0];
    NSArray *array = [[NSArray alloc] initWithObjects:testString, nil];
    listofImagePath = array; //Load FGallery View Controller 
    localGallery = [[FGalleryViewController alloc] initWithPhotoSource:self];
[self.navigationController pushViewController:localGallery animated:YES]; 
    [localGallery release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:20:06.177

试试这样，而不是

```
 NSArray *imagesArray = [[NSArray alloc] initWithObjects:@"Your_Path",...,nil]; 
```

使用下面的行，

```
 NSArray *imagesArray = [[NSArray alloc]initWithObjects:[NSURL fileURLWithPath:@"Your_Path"],..., nil]; 
```

在您的情况下 testString 是您的路径，对吗？如果是这样，则将 @"Your_Path" 替换为 testString。

希望它会帮助你。

# java - 将日志输出重定向到另一个终端

> ID：15701274
> 
> 赞同：0
> 
> 时间：2013-03-29T10:15:58.933
> 
> 标签：java, linux, shell, io-redirection, gnome-terminal

我有以下脚本文件，它执行 Java 主类并在终端上打印一些日志数据。我想将打印此程序的任何内容重定向到另一个终端（例如 /dev/pts/1，但这对我不起作用）。怎么做 ？

```
#!/bin/sh

# Usage: ./zipfs_mount.sh file.zip /mount/point

. ./build.conf

LD_LIBRARY_PATH=./jni:$FUSE_HOME/lib $JDK_HOME/bin/java \
   -classpath ./build:./lib/commons-logging-1.0.4.jar \
   -Dorg.apache.commons.logging.Log=fuse.logging.FuseLog \
   -Dfuse.logging.level=DEBUG \
   Main -f -s $2 $1 > /dev/pts/1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:24:14.727

假设程序将其日志写入 stdout 而不是 stderr 并且这`/dev/pts/1`是另一个终端的正确设备，那么您编写的内容应该可以工作。您可以使用以下方法进行测试：

```
echo Hello > /dev/pts/1 
```

这应该会`Hello`出现在另一个终端窗口中。如果没有，请使用该`tty`命令检查终端正在使用的设备。

如果您的程序记录到 stderr，您也可以重定向它：

```
program >/dev/pts/1 2>&1     # send stderr to the same place as stdout 
```

# android - org.apache.http.conn.HttpHostConnectException：

> ID：15701276
> 
> 赞同：1
> 
> 时间：2013-03-29T10:16:07.250
> 
> 标签：android, httpconnection

我正在使用客户端服务器应用程序。客户端是 Ubuntu 平台中的 Android 设备。我的服务器是 IIS，即 MS Visual Studio 2010。两个系统（Ubuntu-Android Aap 正在开发的地方，Window7-服务器所在的地方）都通过 WI-FI 连接。我遇到了一个例外

```
 03-29 09:56:54.141: I/System.out(576): Place order click
                       03-29 09:56:54.262: I/System.out(576): address  = http://192.168.1.3/RestaurantPOSNew/ProcessOrder.aspx?order_id=3&table_no=11&order_items=%5B%7B%22OrderID%22%3A3%2C%22isAdd%22%3Atrue%2C%22itemId%22%3A2%2C%22quantity%22%3A4%7D%2C%7B%22OrderID%22%3A0%2C%22isAdd%22%3Afalse%2C%22itemId%22%3A0%2C%22quantity%22%3A0%7D%5D
                     03-29 09:56:59.382: I/dalvikvm(576): threadid=4: reacting to signal 3
                     03-29 09:56:59.412: I/dalvikvm(576): Wrote stack traces to '/data/anr/traces.txt'
                     03-29 09:57:15.271: W/System.err(576): org.apache.http.conn.HttpHostConnectException: Connection to http://192.168.1.3 refused
                     03-29 09:57:15.303: W/System.err(576):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:178)
                     03-29 09:57:15.303: W/System.err(576):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
                     03-29 09:57:15.303: W/System.err(576):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
                      03-29 09:57:15.303: W/System.err(576):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
                      03-29 09:57:15.303: W/System.err(576):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
                     03-29 09:57:15.303: W/System.err(576):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
                     03-29 09:57:15.303: W/System.err(576):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
                     03-29 09:57:15.312: W/System.err(576):     at com.sst.restaurant.RestaurantHome.sendJSONOrderToServer(RestaurantHome.java:1480)
                     03-29 09:57:15.322: W/System.err(576):     at com.sst.restaurant.RestaurantHome$8.onClick(RestaurantHome.java:1172)
                    03-29 09:57:15.322: W/System.err(576):  at android.view.View.performClick(View.java:3110)
                   03-29 09:57:15.322: W/System.err(576):   at android.view.View$PerformClick.run(View.java:11928)
                   03-29 09:57:15.322: W/System.err(576):   at android.os.Handler.handleCallback(Handler.java:587)
                   03-29 09:57:15.322: W/System.err(576):   at android.os.Handler.dispatchMessage(Handler.java:92)
                  03-29 09:57:15.322: W/System.err(576):    at android.os.Looper.loop(Looper.java:132)
                  03-29 09:57:15.322: W/System.err(576):    at android.app.ActivityThread.main(ActivityThread.java:4025)
                  03-29 09:57:15.322: W/System.err(576):    at java.lang.reflect.Method.invokeNative(Native Method)
                 03-29 09:57:15.322: W/System.err(576):     at java.lang.reflect.Method.invoke(Method.java:491)
                 03-29 09:57:15.322: W/System.err(576):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
                 03-29 09:57:15.322: W/System.err(576):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
                  03-29 09:57:15.332: W/System.err(576):    at dalvik.system.NativeStart.main(Native Method)
                     03-29 09:57:15.342: W/System.err(576): Caused by: java.net.ConnectException: /192.168.1.3:80 - Connection refused
                    03-29 09:57:15.342: W/System.err(576):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:211)
                   03-29 09:57:15.352: W/System.err(576):   at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:431)
                      03-29 09:57:15.352: W/System.err(576):    at java.net.Socket.connect(Socket.java:901)
                        03-29 09:57:15.352: W/System.err(576):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
                       03-29 09:57:15.352: W/System.err(576):   at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
                       03-29 09:57:15.362: W/System.err(576):   ... 19 more
                       03-29 09:57:15.393: I/System.out(576): inside handler
                       03-29 09:57:15.691: D/dalvikvm(576): GC_CONCURRENT freed 844K, 11% free 10643K/11847K, paused 8ms+65ms 
```

我在清单文件中声明了互联网许可。我在终端中通过 ping 命令检查了两个系统都在同一个网络中。

# linux - 安装 tinyproxy 时测试 asciidoc 失败

> ID：15701286
> 
> 赞同：6
> 
> 时间：2013-03-29T10:16:43.703
> 
> 标签：linux

我想安装 tinyproxy [https://banu.com/tinyproxy/](https://banu.com/tinyproxy/)

当我`cd`进入目录并运行时，`make` 我得到

```
checking for a2x... no
configure: error: Test for asciidoc failed. See the file 'INSTALL' for help. 
```

然后我想安装我得到的 asciidoc

```
[root@dd tinyproxy-1.8.3]yum install asciidoc
Loaded plugins: auto-update-debuginfo, langpacks, presto, refresh-packagekit
Setting up Install Process
No package asciidoc available.
Error: Nothing to do 
```

如何处理？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T18:17:24.043

如果 asciidoc 不在您的 linux 发行版中，或者您不是 root。你必须手动安装它。[从http://www.methods.co.nz/asciidoc/](http://www.methods.co.nz/asciidoc/)下载 asciidoc 压缩包并照常执行：

```
 configure --prefix=${HOME} && make && make install 
```

然后确保 ${HOME}/bin 在您的 PATH 中，例如通过运行 export PATH=${PATH}:${HOME}/bin

tinyproxy 的配置脚本将检查 a2x 是否在您的 PATH 中。如果它找不到它，你将无法编译它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-30T14:09:54.117

如果您不关心 tinyproxy 的文档，只需`docs`从 Makefile 中的变量中删除子目录`SUBDIRS`，然后`make`.

这样调用时会跳过doc生成目标`make`，所以不需要安装`a2x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T21:03:38.473

我正在运行 ubuntu 13，所以 apt-get install asciidoc 为我工作，如果“yum install asciidoc”显示“没有可用的软件包 asciidoc”，你可能想检查你的 yum 存储库。

同时结帐 asciidoc 的官方网站（确保您查看先决条件） [http://www.methods.co.nz/asciidoc/INSTALL.html](http://www.methods.co.nz/asciidoc/INSTALL.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T18:56:22.390

试试项目的 ruby​​ 版本怎么样？`sudo yum install rubygem-asciidoctor`

此处描述了可用于安装 gem 的其他选项：http: [//asciidoctor.org/](http://asciidoctor.org/)

这样做的好处是大多数 gems 只有其他 gems 作为依赖项，在大多数情况下，它们没有 ac 库作为依赖项，因此安装时不会遇到问题，无论如何 yum 应该能够解决它.

# java - Quartz 不会从调度中删除已删除的作业

> ID：15701287
> 
> 赞同：3
> 
> 时间：2013-03-29T10:16:52.457
> 
> 标签：java, quartz-scheduler, jobs

我正在开发定期服务。

该应用程序是使用 JDK 1.6、Spring Framework 2.5.6 和 Quartz 1.8.4 开发的，用于调度作业。

我有两台使用 WebLogic Server 10.3.5 的集群服务器。

我注意到的行为是，如果从应用程序中删除（或重命名）作业，Quartz 会继续尝试启动旧作业（它似乎已注册在 Quartz 用于同步其实例的数据库中）。

有人可以解释这种行为的原因吗？

我的需要是，当我在应用程序中删除作业并重新启动 WebLogic 实例时，Quartz 不会尝试启动旧作业。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:26:23.253

您需要从石英调度程序中明确删除作业，您这样做了吗？例如，如果你有这个调度器

```
private org.quartz.Scheduler myScheduler = null; 
```

你需要调用：

```
myScheduler.deleteJob(... 
```

当作业被删除或重命名时。

如果这样做，也许您传递的密钥不正确？

或者，当您构建石英作业时，您可以使用：`jobBuilder.storeDurably(false)` 当不再有关联的活动触发器时，这将导致您的石英作业被自动删除。

# jquery - jQuery移动自动完成选择项目

> ID：15701288
> 
> 赞同：0
> 
> 时间：2013-03-29T10:16:54.087
> 
> 标签：jquery, jquery-mobile

有问题从列表中选择一个项目，它显示但当我点击时没有任何反应，我显然没有设置选项，所以当从列表中点击一个项目时，我想调用一个点击事件，任何人都指向正确的方向? （缺少代码/）

```
<script>
         $(function () {
             $("#autocomplete").on("listviewbeforefilter", function (e, data) {
                 var $ul = $(this),
                     $input = $(data.input),
                     value = $input.val(),
                     html = "";
                 $ul.html("");
                 if (value && value.length > 2) {
                     console.log($input.val());
                     $ul.html("<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>");
                     $ul.listview("refresh");
                     console.log($input.val());
                     $.ajax({
                         url: "@Url.Action("ClientSearch","Schedule")",
                         dataType: "json",
                         type:"GET",
                         data: {
                             term: $input.val()
                         }
                     })
                         .then(function (response) {
                             $.each(response, function (i, val) {
                                 html += "<li><a href>" + val.FullName + "</a></li>";
                             });
                             $ul.html(html);
                             $ul.listview("refresh");
                             $ul.trigger("updatelayout");
                         });
                 }
             });
         });

     </script> 
```

# php - PHP DOMDocument hasAttribute 与哪些元素相关联？

> ID：15701289
> 
> 赞同：0
> 
> 时间：2013-03-29T10:16:54.550
> 
> 标签：php, xss, domdocument

我想检查正文下的所有标签并检查并删除它是否具有我尝试过的样式属性

```
$user_submitted_html = "This is Some Text";
$html = '<body>' . $user_submitted_html . '</body>';

$dom = new DOMDocument();
$dom->loadHTML($html_string);
$elements = $dom->getElementsByTagName('body');
foreach($elements as $element) {

   foreach($element->childNodes as $child) {

      if($child->hasAttribute('style')) {

          $child->removeAttribute('style')

      }      
   }  
 } 
```

如果`$user_submitted_html`不仅是文本，它可以正常工作，意味着它是否有一些标签，但如果它只是文本，那么它会给出错误

```
Call to undefined method DOMText::hasAttribute() 
```

然后我在 foreach 循环中得到 nodeName

```
echo "Node Name: " . $child->nodeName 
```

它给出了

```
Node Name = #text 
```

这是什么节点名称，我已经回显了其他节点，它给出了我熟悉的 div、span 等。我想知道哪些是 hasAttribute 不属于它们的元素，所以我可以在像这样使用 hasAttribute 之前设置一个条件

```
if($child->nodeName=="#text") {
    continue; // skip to next iteration
}
if($child->hasAttribute('style')) {
.
.
. 
```

或任何其他解决方案？？？

需要另外一项建议。如果我只从`<div>,<span>,<p> and <a>`. 如果其余标签可以使用样式属性，它会不会受到 xss 的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:28:18.893

我认为与其检查 nodeName 不如检查类 $child 是一个实例。

```
if ( $child instanceof DOMElement )
{
    //do your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:36:11.853

您可以使用 XPath 仅获取具有`style`属性的元素

```
$xpath = new DOMXPath($dom);
$elements = $xpath->query('//[@style]');

foreach($elements as $e) {
    $e->removeAttribute('style')
} 
```

# jquery - AJAX插入的定时器程序的多个副本：如何确保只有一个副本在运行

> ID：15701295
> 
> 赞同：0
> 
> 时间：2013-03-29T10:17:23.237
> 
> 标签：jquery, ajax

我有一个 HTML 文件`product.html`，它使用 AJAX（通过单击按钮）插入到另一个 HTML 文件中的 div 中。有一个定时器`product.html`如下：

`product.html`：

```
<!-- HTML stuff -->
...

Bid time of the product: <div id="displayTime"></div>

...
<!-- HTML stuff -->

<div id="testChange">
<script> 
$(document).ready(function() {

  function updateTime() {
    var newContent = $("#testChange").html();
    if (newContent != oldContent) {  // If the content of "testChange" changes, stop the timer
      return;
    }
    timeStr = ...   // prepare the time for display
    $("#displayTime").html(timeStr);
    setTimeout(updateTime, 1000);
  }

  function startUpdatingTime() {
    oldContent = $("#testChange").html();
    updateTime();
  }

 startUpdatingTime();

</script>
</div> 
```

当我单击按钮时，文件`product.html`被 AJAX 插入到另一个 HTML 的 div 中。计时器运行正常。但是，当我再次单击该按钮时，显然有两个计时器正在运行。如果我再次单击，将运行多个计时器副本。div 闪烁，`displayTime`因为有很多计时器试图更新它。我的问题：我如何检查是否已经有一个计时器正在运行，这样就不需要运行一个新的了。或者我如何阻止旧的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:57:02.577

只需使用`clearTimeout`如下所示：

```
$(document).ready(function() {

  var timeout, oldContent;

  function updateTime() {
    var newContent = $("#testChange").html();
    if (newContent != oldContent) {  // If the content of "testChange" changes, stop the timer
      return;
    }
    timeStr = ...   // prepare the time for display
    $("#displayTime").html(timeStr);

    if (timeout){
       window.clearTimeout(timeout);
    }
    timeout = window.setTimeout(updateTime, 1000);
  }

  function startUpdatingTime() {
    oldContent = $("#testChange").html();
    updateTime();
  }

 startUpdatingTime();

}); 
```

# php - 识别 PHP 中的登录用户

> ID：15701297
> 
> 赞同：0
> 
> 时间：2013-03-29T10:17:26.303
> 
> 标签：php, mysql, session, authorization

我一直在阅读有关登录、存储密码和用户名的信息。将密码存储在 cookie 中是**一件大事**。所以我选择只在 cookie 中存储用户名，我想这很好。我将它存储到 cookie 中，以便我可以轻松访问它并处理“记住我”选项。但是，如果我想通过以下方式识别用户，那么密码呢？`SELECT * FROM databse WHERE username='$_COOKIE[]' AND password=''`

我在想会话。我可以在会话中存储密码，不安全但很好。但问题是当用户关闭浏览器并重新打开它时会发生什么。他们将保持登录状态，但会话将消失，因此每次我必须检查是否设置了 SESSION[pass] 如果没有，请从数据库中选择并设置它。

那是我的解决方案，有人可以建议我更合适的解决方案吗？

事实是，没有超级安全的系统，如果有人真的想闯入，他们就会成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:23:44.473

您可以有一个名为的表`remember_tokens`，其结构如下：

```
 id         |         user_id              |        created
------------------------------------------------------------------------
f129ea9c     |            1                 |     2-3-2013 12:31:51
e9ac8aa0     |            2                 |     2-4-2013 08:21:13 
```

`id`有一些唯一的 id，比如一个`UUID`或随机生成的字符串。`user_id`是要记住的用户的id。`created`是创建记录的时间（因此您可以在 X 时间后注销用户）。

现在，如果用户成功登录并希望被记住，您可以添加一条具有唯一性`id`和他的`user_id`到的新记录`remember_tokens`。您还可以使用它创建一个新的 cookie `setcookie()`，该 cookie 将包含`id`您刚刚插入的随机生成的内容。

现在，当用户下次请求该站点时，您会看到他已经`remember`存储了 cookie。您获取该记录，检查它是否尚未过期并使用该`user_id`列登录相应的用户。这样，您就不会在 cookie 中存储敏感信息。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:27:04.190

以下是一些更详细的答案供您遵循：

*   **[实施安全“记住我”的最佳实践</a>](https://stackoverflow.com/questions/2594960/best-practice-to-implement-secure-remember-me)**
[](https://stackoverflow.com/questions/2594960/best-practice-to-implement-secure-remember-me)
*   [](https://stackoverflow.com/questions/2594960/best-practice-to-implement-secure-remember-me)****[“在这台电脑上记住我” - 它应该如何工作？](https://stackoverflow.com/questions/1074831/remember-me-on-this-computer-how-should-it-work)****
***   **[“让我登录”——最好的方法](https://stackoverflow.com/questions/1354999/keep-me-logged-in-the-best-approach)****

 **在回答这个问题时还收集了一些很好的资源：**[网站身份验证权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-website-authentication-beta/477578#477578)****

# ruby-on-rails - Rspec 规范和 Rake 规范给出不同的结果

> ID：15701298
> 
> 赞同：3
> 
> 时间：2013-03-29T10:17:41.177
> 
> 标签：ruby-on-rails, rspec, rake

这似乎是最常被问到的问题，我在两者中运行时都有一个应用程序，`rake spec`并且`rspec`输出似乎不同。当使用 rspec spec -p 命令时，会显示 0 个失败消息，而当使用 rake spec 时，会显示很少的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-26T16:09:37.930

运行时`$ bundle exec rspec # (defaults to spec)`，会执行目录中的所有文件`./spec`。

当您运行时，您正在执行从所有 gem 及其依赖项中`$ bundle exec rake spec`命名的所有 rake 任务。`'spec'`

此外，执行测试的环境可能会因这些文件而异。不要怀疑您是否面临不同的输出。

# jquery - 触发器 jquery 不 lau

> ID：15701300
> 
> 赞同：0
> 
> 时间：2013-03-29T10:17:50.833
> 
> 标签：jquery, triggers

我想在我的选择上启动触发器，但似乎没有任何效果：

这是我的选择：

```
<select id="sel_annee">
        <option value="<?php echo (date('Y')-1); ?>"><?php echo (date('Y')-1); ?></option>
        <option value="<?php echo date('Y'); ?>" selected='selected'><?php echo date('Y'); ?></option>
        <option value="<?php echo (date('Y')+1); ?>"><?php echo date('Y')+1; ?></option>
    </select> 
```

这是我的触发器：

```
$(document).ready(function(){

           $('#sel_annee').trigger("change"); 
```

这就是功能

```
$('#sel_annee').change(function()
           {
              alert("here");            
              $('.month').hide();
              $('.month:first').show();
              $('.months a:first').addClass('active');

                          $.ajax({
                             type: 'post',
                             url: 'changer_annee.php',
                             data:
                             {
                                year:$('#sel_annee').val()
                             },
                             dataType: 'text',

                             success: function(retour_php)
                             {
                                $('#month1').html('');         
                                //console.log(retour_php);
                                var arr = retour_php.split('#');

                                //console.log(retour_php);

                               for(i= 1; i<=12;i++)
                               {
                                  $('#month'+i).html(arr[i-1]);
                                  //console.log($('#month'+i));
                                  //console.log(arr[i]);
                               }

                               //$('.month').hide();
                               $('.month:first').show();
                               $('.months a').removeClass('active');
                               $('.months a:first').addClass('active');
                               //$('.months a:first').addClass('active');

                             },
                             error: function(retour_php)
                             {
                                alert("pas ok");
                                alert(retour_php);
                             }

                          }
                          );
           }); 
```

此警报不起作用：

```
$('#sel_annee').change(function()
               {
                  alert("here"); 
```

我想我做了所有我必须做的，但触发器不起作用。

任何的想法 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:19:19.867

我相信您甚至在附加处理程序之前就试图*触发*。`change``change`

你应该这样做：

```
$(document).ready(function(){

   // bind the change handler
   $('#sel_annee').change(function() {
      ...
   });

   // now trigger it
   $('#sel_annee').trigger("change");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:38:23.773

确保在您的文档就绪处理程序代码中，您首先附加更改处理程序，然后触发更改事件。

您的代码中的一切都是完美的，我认为唯一可能出错的是在将函数附加到它之前尝试触发事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:33:38.437

尝试这样的事情：

```
jQuery(function(){
    $('#sel_annee').change(function(){
    alert('changed');
    });
    $('#sel_annee').trigger("change");
}); 
```

# iphone - 导入 vcf vcard 文件时的 EXC_BAD_ACES

> ID：15701301
> 
> 赞同：0
> 
> 时间：2013-03-29T10:17:51.580
> 
> 标签：iphone, ios, exc-bad-access, abaddressbook, vcf-vcard

我正在将应用程序文档目录中的 vcf 文件中的 vcard 数据检索到字符串中。该字符串很好，但`ABPersonCreatePeopleInSourceWithVCardRepresentation`会引发 BAD_ACCESS 错误。这是代码...

```
ABRecordRef defaultSource = ABAddressBookCopyDefaultSource(addressBook);
 NSData *data=[vcardString dataUsingEncoding:NSUTF8StringEncoding];
CFDataRef vCardData = (__bridge CFDataRef)data;
ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
                if(granted)
                {
                    NSLog(@"%@",vcardString);
                    CFArrayRef vCardPeople = ABPersonCreatePeopleInSourceWithVCardRepresentation(defaultSource, vCardData);//BAD_ACCESS ERROR
                    for (CFIndex index = 0; index < CFArrayGetCount(vCardPeople); index++) {
                        ABRecordRef person = CFArrayGetValueAtIndex(vCardPeople, index);
                        ABAddressBookAddRecord(addressBook, person, NULL);
                        NSLog(@"added");
                    }

                    CFRelease(vCardPeople);
                    CFRelease(defaultSource);
                    ABAddressBookSave(addressBook, NULL);
                }
                else
                    NSLog(@"not granted"); 
```

这是 NSLog vcardString...

```
BEGIN:VCARD

VERSION:3.0

PRODID:-//Apple Inc.//iOS 6.1//EN

N:;Home;;;

FN:Home

EMAIL;type=INTERNET;type=HOME;type=pref:carljosdsdsewhnson.akasdssh@gmail.com

TEL;type=CELL;type=VOICE;type=pref:2323454645

PHOTO;ENCODING=b;TYPE=JPEG:/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAQICAgIC

....LOT OF GIBBERISH....

END:VCARD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:21:00.490

您`CFDataRef`按要求使用，但内存管理不正常。完成处理程序不会在线执行，到那时`data`将被释放。这使得`vCardData`悬空指针访问错误。要解决此问题，而不是`__bridge`使用`__bridge_retained`，然后`CFRelease`在`vCardData`完成后调用。

```
ABRecordRef defaultSource = ABAddressBookCopyDefaultSource(addressBook);
 NSData *data=[vcardString dataUsingEncoding:NSUTF8StringEncoding];
CFDataRef vCardData = (__bridge_retained CFDataRef)data;
ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
    if(granted)
    {
        NSLog(@"%@",vcardString);
        CFArrayRef vCardPeople = ABPersonCreatePeopleInSourceWithVCardRepresentation(defaultSource, vCardData);//BAD_ACCESS ERROR
        CFRelease(vCardData);
        for (CFIndex index = 0; index < CFArrayGetCount(vCardPeople); index++) {
        //... 
```

# java - 高速使用来自其他线程的 StyledText.append()

> ID：15701302
> 
> 赞同：0
> 
> 时间：2013-03-29T10:18:00.357
> 
> 标签：java, multithreading, swt, ui-thread

我正在使用 SWT 编写一个桌面应用程序，它以高速（每秒近 100 个数据包）从网络接收日志数据。每个数据包都包含一行，必须附加到`StyledText`. 由于我在非 UI 线程中接收数据包，因此我必须使用以下代码：

```
 display.asyncExec(new Runnable() {

        @Override
        public void run() {
            txtLog.append(log);
            txtLog.setTopIndex(txtLog.getLineCount() - 1);
        }
    }); 
```

但是这段代码让我的 Logger 太慢了，而且我的 logger 的输出与 sender 不同步。例如，我停止了发送方设备，我的程序日志输出在 3 分钟后停止！！但是，eclipse 控制台输出（`System.out.println()`）与发送方完全同步并按时停止输出！eclipse`setText()`是`StyledText`怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:43:28.380

两件事情：

使用`asyncExec`而不是`syncExec`- 这将使您的记录器本身快速。但是，如果添加记录器条目的速度超过 UI 线程可以处理的速度，那么事件队列将变得越来越大......并且您将获得与您概述的相同的缓慢响应......

对 a 的所有更改`StyledText`——包括附加到它——都是相当昂贵的。因此，您可能还需要记录器和`StyledText`小部件之间的中间缓冲区：

*   记录器添加到缓冲区
*   如果缓冲区*为*空，则执行`asyncExec`
*   将`asyncExec` `Runnable`追加当前缓冲区内容并清空缓冲区

这在我的一个应用程序中非常有效......

# file - 将字符串传递给批处理变量和文件创建

> ID：15701311
> 
> 赞同：0
> 
> 时间：2013-03-29T10:18:50.827
> 
> 标签：file, batch-file, io

我们可以动态地将字符串传递给定义的批处理变量吗？如下定义：

`Enter your Organization name:`

`Enter your Name:`

**|> 按回车**

`echo %%Org_name >> Org_name.txt`

`echo %%User_name >> Org_name.txt`

现在这些将被保存到 Org_name.txt 文件中。有可能吗？指导一下，谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:35:22.630

是的你可以：

```
set /p "org_name=Enter your Organization name: "
set /p "user_name=Enter your Name: "
echo %Org_name%.>>Org_name.txt
echo %User_name%.>>Org_name.txt 
```

# python - celery 教程：未注册错误

> ID：15701312
> 
> 赞同：11
> 
> 时间：2013-03-29T10:18:54.213
> 
> 标签：python, celery

我正在尝试获得 celery 的官方教程工作，但不断收到此错误：

> D:\test>celery -A tasks worker --loglevel=info
> -------------- celery@BLR122S v3.0.17 (Chiastic Slide)
> ---- **** --- --
> --- * *** * -- [配置]
> -- * - **** --- . 经纪人：amqp://guest@localhost:5672//
> - ** ---------- 。应用程序：任务：0x2a76850
> - ** ---------- 。并发：2（进程）
> - ** ---------- 。事件：关闭（启用 -E 监控此工作人员）
> - ** ----------
> - *** --- * --- [队列]
> -- ******* ---- . 芹菜：交换：芹菜（直接）绑定：芹菜
> --- ***** -----
> [任务]
> 。tasks.add
> [2013-03-29 17:50:52,533: WARNING/MainProcess] celery@BLR122S 准备好了。
> [2013-03-29 17:50:52,568：INFO/MainProcess] 消费者：连接到 amqp://guest@127.0.0.1:5672//。
> [2013-03-29 17:51:32,496：INFO/MainProcess] 从代理获得任务：tasks.add [8345 9233-ce54-40ed-a2a8-ee0d60768006]
> [2013-03-29 17:51:32,562：错误/ MainProcess] 任务 tasks.add[83459233-ce54-40ed-a 2a8-ee0d60768006] 引发异常：“tasks.add”类型的任务未注册，请确保已导入。
> 回溯（最近一次通话最后）：
> 
> > 文件“C:\Python27\lib\site-packages\billiard\pool.py”，第 293 行，在 worker 中
> > 
> > > 结果 = (True, func(*args, **kwds))
> > > 文件“C:\Python27\lib\site-packages\celery\task\trace.py”，第 320 行，在 _fast_trace_task
> > > 返回 _tasks[task].__trace__( uuid, args, kwargs, request)[0]
> > > 文件“C:\Python27\lib\site-packages\celery\app\registry.py”，第 20 行，在 __missing__
> > > raise self.NotRegistered(key)
> > > NotRegistered: 'tasks.添加'

我安装了 celery==3.0.17 和 rabbitMQ。然后通过 " "
开始 celery似乎在 [Tasks] 中，但是通过以下方式调用：`D:\test>celery -A tasks worker --loglevel=info`
`tasks.add`

```
>>> from tasks import add
>>> add.delay(1,1)
# Out: AsyncResult: 83459233-ce54-40ed-a2a8-ee0d60768006 
```

得到了上面的失败。有没有人有同样的问题？

**编辑：** 这是我从教程中复制的 tasks.py。

```
from celery import Celery

celery = Celery('tasks', broker='amqp://guest@localhost//')

@celery.task
def add(x, y):
    return x + y 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:36:23.527

尝试先导入任务，我建议你在交互式 python 环境中实现你的工作，比如 python IDE，然后你这样做：

*   导入任务

在你写之前`tasks.add`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-04T23:02:01.643

以下将解决您的问题

```
from tasks import add
res = add.delay(1,2) #call to add 
res.get() #get result 
```

使用更改后重新启动您的工作人员

```
celery -A tasks worker --loglevel=info 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-09T16:12:11.747

有同样的问题；我通过比较`PYTHONPATH`我`main.py`的和运行芹菜工人的控制台找到了解决方案。`tasks.py`不`PYTHONPATH`适合芹菜工人，因此无法导入任务。

我的文件：

`try_celery/tasks.py`

```
from celery import Celery

app = Celery('tasks', broker='pyamqp://guest@localhost//', backend='redis://localhost')

@app.task
def add(x, y):
    return x + y 
```

`try_celery/main.py`

```
from try_celery.tasks import add

if __name__ == '__main__':
    result = add.delay(4, 4)
    while not result.ready():
        pass
    print(result.get()) 
```

`run_worker.sh`

```
#!/bin/bash
PYTHONPATH=$PYTHONPATH:/<path_to_project>  # line this solved the problem
celery -A try_celery.tasks worker --loglevel=info 
```

执行，先运行`run_worker.sh` 然后运行`python3 main.py` 当我`main.py`从 IDE 运行时，`PYTHONPATH`已经用项目路径更新了

# c# - 如何在 xaml 中创建全局对象？

> ID：15701317
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:19:33.227
> 
> 标签：c#, xaml, resources, global-variables, application-resource

我有一个 wpf 导航应用程序。我有一个我想从不同页面访问的对象。目前，该对象仅在创建它的页面中可用。

这就是我所做的。

在页面 A.xaml

我在页面中这样定义

```
<UserControl.Resources>
    <local:SerialComm x:Key="SerialCommDataSource" d:IsDataSource="True" />
</UserControl.Resources> 
```

上述方法有效，但范围仅限于页面。我希望能够从任何其他页面访问该对象。

我像这样使用页面中的对象

```
<Grid Style="{StaticResource ContentRoot}" DataContext="{Binding Source={StaticResource SerialCommDataSource}}" >
    <TextBox x:Name="tbbaudRate" Height="23" TextWrapping="Wrap" MinWidth="200" Text="{Binding SerialPort.BaudRate}" />
</Grid> 
```

我想将资源放在 App.xaml 中，以便我可以在任何地方访问它。

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Blah;component/Assets/Blah.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
    <local:SerialComm x:Key="SerialCommDataSource" d:IsDataSource="True" /> <--Error here
</Application.Resources> 
```

如何在 xaml 中创建全局对象？该对象必须能够在任何地方进行编辑，并且编辑的值会被更新。我读到无法在代码中创建对象并在 xaml 中的任何位置访问它。那么我如何在 xaml 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:12:35.663

问题是缺少 d: 命名空间

# java - 如何解决：无法处理 Jar 条目

> ID：15701319
> 
> 赞同：18
> 
> 时间：2013-03-29T10:19:36.470
> 
> 标签：java, maven, spring-mvc

我在控制台上收到此错误。谁能帮帮我（我正在使用 GWT 和 maven 开发一个 Spring MVC 项目）

> 严重：无法处理来自 Jar [jar:file:/C:/Users/ayush/workspace/.metadata/.plugins/org.eclipse.wst 的 Jar 条目 [com/ibm/icu/impl/data/LocaleElements_zh__PINYIN.class] .server.core/tmp1/wtpwebapps/transconnect/WEB-INF/lib/icu4j-2.6.1.jar!/] 用于注释 org.apache.tomcat.util.bcel.classfile.Cl

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-14T11:11:46.847

我通过简单地用最新的 jar 替换 icu4j-2.6.1.jar 解决了同样的问题

点击[这里](http://www.java2s.com/Code/Jar/i/Downloadicu4j40jar.htm)下载最新版本的jar

希望它有效！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-28T20:19:52.913

因此，在我们的例子中，它不是来自直接依赖，而是来自`com.google.code.findbugs`库的间接注入。

通过为您的项目运行，您将知道它来自哪里`mvn dependency:tree`（假设您使用的是 maven）

我们的解决方案是使用更新版本的 findbugs 库（3.0.0），它在依赖内容方面似乎更精简。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:03:16.813

我猜`LocaleElements_zh__PINYIN.class`jar 中缺少文件尝试替换[jar](http://www.findjar.com/jar/com.ibm.icu/jars/icu4j-2.6.1.jar.html?all=true)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T18:16:56.183

com.ibm.icu.impl.data.LocaleElements_zh__PINYIN 是 2.6.1 icu4j jar 文件中的格式错误的类文件。覆盖或使用较新的 icu4j jar 文件 55.0+。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T12:20:27.777

首先使用任何 zip 浏览器（例如 7Zip）打开文件 icu4j-2.6.1.jar。检查它是否包含 com/ibm/icu/impl/data/LocaleElements_zh__PINYIN.class 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T06:57:25.590

当 icu4j-xxx.jar 包含在我的类路径中时，我收到此错误。为什么不尝试将其从 WEB-INF/lib 中删除？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-14T06:49:40.947

这对我有用：

```
<dependency>
  <groupId>com.ibm.icu</groupId>
  <artifactId>icu4j</artifactId>
  <version>4.6</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-29T18:51:29.240

对我来说，升级 tomcat 来`tomcat-8.0.37`解决这个问题。

# clojure - lein repl zip 文件为空异常

> ID：15701320
> 
> 赞同：4
> 
> 时间：2013-03-29T10:19:38.553
> 
> 标签：clojure, leiningen

当我进入`lein repl`我的项目根文件夹时，我收到错误消息。我试图删除主文件夹中的 .lein 目录并重新下载 lein，但它对我不起作用。

可能重复： [使用 leiningen 时出现 ExceptionInInitializerError](https://stackoverflow.com/questions/7233334/exceptionininitializererror-when-using-leiningen)

```
Exception in thread "Thread-1" java.util.zip.ZipException: zip file is empty
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:214)
at java.util.zip.ZipFile.<init>(ZipFile.java:144)
at java.util.jar.JarFile.<init>(JarFile.java:153)
at java.util.jar.JarFile.<init>(JarFile.java:117)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at clojure.lang.Reflector.invokeConstructor(Reflector.java:180)
at leiningen.core.classpath$extract_native_deps.invoke(classpath.clj:43)
at clojure.lang.AFn.applyToHelper(AFn.java:167)
at clojure.lang.AFn.applyTo(AFn.java:151)
at clojure.core$apply.invoke(core.clj:617)
at leiningen.core.classpath$when_stale.doInvoke(classpath.clj:66)
at clojure.lang.RestFn.invoke(RestFn.java:580)
at leiningen.core.classpath$resolve_dependencies.doInvoke(classpath.clj:231)
at clojure.lang.RestFn.invoke(RestFn.java:425)
at leiningen.core.eval$prep.invoke(eval.clj:54)
at leiningen.core.eval$eval_in_project.invoke(eval.clj:282)
at leiningen.repl$start_server.invoke(repl.clj:117)
at leiningen.repl$server$fn__6110.invoke(repl.clj:173)
at clojure.lang.AFn.applyToHelper(AFn.java:159)
at clojure.lang.AFn.applyTo(AFn.java:151)
at clojure.core$apply.invoke(core.clj:617)
at clojure.core$with_bindings_STAR_.doInvoke(core.clj:1788)
at clojure.lang.RestFn.invoke(RestFn.java:425)
at clojure.lang.AFn.applyToHelper(AFn.java:163)
at clojure.lang.RestFn.applyTo(RestFn.java:132)
at clojure.core$apply.invoke(core.clj:621)
at clojure.core$bound_fn_STAR_$fn__4102.doInvoke(core.clj:1810)
at clojure.lang.RestFn.invoke(RestFn.java:397)
at clojure.lang.AFn.run(AFn.java:24)
at java.lang.Thread.run(Thread.java:722) 
```

编辑：我在 ubuntu 12.10 64 位机器上运行 leiningen 2.1.2。

注意：如果我`lein repl`在我的项目根文件夹之外运行，那很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:12:27.930

我曾经通过运行使用 lein2 成功地解决了这个问题

```
lein clean 
```

我的下一个猜测是将您的 ~/.m2/repository 移开并重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-29T12:15:56.837

this is because you can't name your uberjar the same as the jar file named internally by leiningen. just make sure you add something like "name-0.1.0-**STABLE**" or anything else like SNAPSHOT or LATEST to your :uberjar ... :uberjar-name.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T12:43:19.793

没有什么对我有用（清洁，吹走〜/ .m2）。我什至去了另一台机器。然后我想可能`lein`对同时看到这两个条目感到困惑：

```
:jar-name "my-server.jar"
:uberjar-name "my-server.jar" 
```

So I commented out `:uberjar-name` and ran `lein jar` and it didn't give me the exception - ran through to the end.

# r - 如何根据R中的条件获取相关变量

> ID：15701323
> 
> 赞同：3
> 
> 时间：2013-03-29T10:19:51.857
> 
> 标签：r, function, plyr

嗨，所有社区成员，我检查了所有相关问题，但我无法找到解决方案。我有以下数据库

```
DB<-data.frame(ID=rep((1:10),10),DISTANCE=1:100,TIME=rep(1:20)) 
```

并且我想获得具有相关时间的每个 ID 的列 DISTANCE 的最大值，即：

```
result<-data.frame(ID=1:10,DISTANCE=91:100,TIME=11:20) 
```

我已经知道了

```
aggregate(DB$DISTANCE,by=list(DB$ID),max) 
```

可以做部分工作，那么如何根据每个ID的DISTANCE最大值获取TIME列的相关值？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:28:08.863

您应该使用`merge`来获取该`TIME`列：

```
DB.a <- aggregate(data = DB, DISTANCE ~ ID, max)
merge(DB.a, DB)
#    ID DISTANCE TIME
# 1   1       91   11
# 2  10      100   20
# 3   2       92   12
# 4   3       93   13
# 5   4       94   14
# 6   5       95   15
# 7   6       96   16
# 8   7       97   17
# 9   8       98   18
# 10  9       99   19 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:30:19.910

我会这样做`plyr`：

```
library(plyr)
ddply(DB, .(ID), summarise, mx = max(DISTANCE), TIME = TIME[which.max(DISTANCE)]) 
```

`ddply``data.frame`根据 中的级别切分`ID`。然后对于每个子集，它计算`max(DISTANCE)`并使用 找到关联`TIME`的`which.max`。

# java - 如何在 libGDX 游戏中使用 Scoreloop 的奖励系统

> ID：15701326
> 
> 赞同：0
> 
> 时间：2013-03-29T10:19:59.807
> 
> 标签：java, android, libgdx, scoreloop

我想在我的游戏中使用 Scoreloop 成就。我在他们的网站上配置了带有图标的捆绑包，并将捆绑包添加到资产中。当运行 Scorellop EntryActivity 我有成就活动。但是现在我需要设置游戏成就的进度，但我不明白该怎么做。Scoreloop 网站的文档没有为我清除。有人可以提供我的示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:09:58.503

```
 public void achieve(final String awardId) {
    ScoreloopManagerSingleton.get().loadAchievements(null);

    // final String awardId = context.getResources().getString(resId);

    // i.e. wait with the unlocking and/or display of achievements until your runnable gets invoked.
    ScoreloopManagerSingleton.get().loadAchievements(new Continuation<Boolean>() {
      @Override
      public void withValue(Boolean arg0, Exception arg1) {
        Achievement achivment = ScoreloopManagerSingleton.get().getAchievement(awardId);
        if (achivment.getAward().getAchievingValue() - achivment.getValue() == 1) {
          ScoreloopManagerSingleton.get().achieveAward(achivment.getAward().getIdentifier(), true, true);
        } else {
          if (!achivment.isAchieved()) {
            achivment.incrementValue();
          }

          if (achivment.needsSubmit()) {
            AchievementController aController = new AchievementController(
                new RequestControllerObserver() {

                  public void requestControllerDidReceiveResponse(RequestController arg0) {
                    // TODO Auto-generated method stub

                  }

                  public void requestControllerDidFail(RequestController arg0, Exception arg1) {
                    // TODO Auto-generated method stub

                  }
                });

            aController.setAchievement(achivment);
            aController.submitAchievement();
          }
        }
      }

    });
  } 
```

# mysql - db2 相当于 MySql REPLACE INTO

> ID：15701327
> 
> 赞同：3
> 
> 时间：2013-03-29T10:20:00.767
> 
> 标签：mysql, sql, db2

我喜欢MySql的非常有用的语句`REPLACE INTO table`是'REPLACE a value if-exist OR INSERT INTO table If-Not-Exist'。

db2 的文档 `REPLACE`是针对仅对字符串进行操作的函数，因此没有这个含义。

db2中是否有任何等价物？现在我也在寻找关键字`IF EXSTS/IF NOT EXIST`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T13:35:21.900

DB2 使用 SQL 标准[`MERGE`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html)语句来做基本相同的事情。语法不同：

```
MERGE INTO table_to_upsert AS tab
USING (VALUES
        (1, 2, 3),
        (4, 5, 6),
        (7, 8, 9)
        -- more rows
    ) AS merge (C1, C2, C3)
    ON tab.key_to_match = merge.key_to_match
    WHEN MATCHED THEN
        UPDATE SET tab.C1 = merge.C1,
                   tab.C2 = merge.C2,
                   tab.C3 = merge.C3
    WHEN NOT MATCHED THEN
        INSERT (C1, C2, C3)
        VALUES (merge.C1, merge.C2, merge.C3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:37:26.493

您正在寻找的 DB2 函数是 MERGE

```
CREATE TABLE FOO ( ID INT, TITLE VARCHAR(500), VALUE );
CREATE TABLE BAR ( ID INT, TITLE VARCHAR(500), VALUE );
INSERT INTO FOO VALUES (1, 'BAR', 5.0);
INSERT INTO BAR VALUES (1, 'CCC', 3.0);
INSERT INTO BAR VALUES (2, 'DDD', 1.0);

MERGE INTO FOO AS F
   USING BAR AS B
   ON (F.ID = B.ID) WHEN MATCHED THEN UPDATE SET TITLE = B.TITLE, VALUE = F.VALUE - B.VALUE
   WHEN NOT MATCHED THEN INSERT VALUES(B.ID, B.TITLE, B.VALUE);

SELECT ID, TITLE, VALUE FROM FOO;
1    CCC    2.0
2    DDD    1.0 
```

DeveloperWorks 的这一[解释](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/merge?lang=en "解释")将填补一些空白。

# c# - 如何使用 div 颜色突出显示 C# 日历控件

> ID：15701328
> 
> 赞同：0
> 
> 时间：2013-03-29T10:20:13.837
> 
> 标签：c#, asp.net, sql-server

任何人都可以告诉我如何用绿色和粉红色两种颜色突出显示c#日历日期我可以在日历单元格上应用div颜色吗？如果是，那么如何？目前我的代码是

```
 if(dt.Rows.Count>1)  
                {
                    cell.BackColor = System.Drawing.Color.Yellow;
                    //cell.Style.Add("font-weight", "bold");
                    //cell.Style.Add("color", "pink");
                    //cell.ForeColor = System.Drawing.Color.Pink;
                 //foreach (var item in collection)
                    //{

                    //}
                  //  cell.Controls.Add("divColor");

                   // cell.BackColor = System.Drawing.Color.Magenta;
                }

                if (dCalendarDate == tempDate)
                {

                    ViewState["ManagerID"] = iManagerID;
                    //Session["tempid"] = iManagerID;
                  //  int tempdate1 = iManagerID;
                   // if (tempid != iManagerID)
                    //{
                       // tblColorCodes clr = new tblColorCodes();
                        //clr.GetColor(tempid);

                      //}
                     DateTime tempdate2 = tempDate;

                    tblColorCodes objColorCode = new tblColorCodes();
                    objColorCode.GetColor(iManagerID);
                    string colorCode = objColorCode.ColorCode;
                    cell.BackColor = System.Drawing.Color.FromName(colorCode);
                    strJavascript = "javascript:datePic('" + day.Date + "','" + iManagerID + "');";
                    if (day.Date >= DateTime.Today)
                    {
                        cell.Attributes.Add("onclick", strJavascript);
                    }
                }

            }
            cell.Style.Add("cursor", "pointer");
            if (day.Date < DateTime.Now.Date)
            {
                cell.BackColor = System.Drawing.Color.FromArgb(150, 150, 150);
                cell.ToolTip = "You can’t select a date in the past!";
            }
            //cell.Attributes.Add("onclick", "datePic('" + day.Date + "')");

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:51:22.420

您可以使用 jQuery 执行以下操作：

```
$('#calendarID a').each(function() {
   if (this.innerText == "14") 
   {
     this.style.color = 'red';
   }
}); 
```

（或者使用 JavaScript 更轻松地实现相同的目标。）

这会将第 14 天的颜色设置为红色。如果您想将它与您的 ASP.NET 标记结合起来，您应该将 calendarID 更改为 ClientID。您可以以类似的方式更改颜色和日期。您还应该使用 css 类而不是直接设置样式属性。

# prolog - 如何以更快的方式查阅文件以 swi-prolog

> ID：15701330
> 
> 赞同：3
> 
> 时间：2013-03-29T10:20:18.707
> 
> 标签：prolog, swi-prolog

我有一个 prolog 文件（扩展名为 .pl），我的 prolog 文件目前至少有 >200000 行（文件大小约为 20MB）。每当我想使用该文件时，我必须将其加载到 swi-prolog（我使用“咨询”谓词），但是这样，我需要很多时间来咨询..（现在超过 10 分钟）

所以，任何人都知道另一种以最短时间查阅文件的方法，请帮助我。预先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:00:06.067

您应该预编译您的数据：请参阅[docs](http://www.swi-prolog.org/pldoc/doc_for?object=section%284,%272.10.2.3%27,swi%28%27/doc/Manual/compilation.html%27%29%29)。

*编辑*：对不起，我在上面建议了一个错误的链接：正确的是[qcompile](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.3.3%27,swi%28%27/doc/Manual/consulting.html%27%29%29)。这里使用 wordnet 数据进行测试：

```
?- load_relation(sk, N).
% /home/carlo/prolog/wordnet30/prolog/wn_sk compiled into wordnet 14,11 sec, 212,559 clauses
N = 3 . 
```

之后`qcompile('/home/carlo/prolog/wordnet30/prolog/wn_sk')`，生成.qlf：

```
?- load_relation(sk, N).
% /home/carlo/prolog/wordnet30/prolog/wn_sk loaded into wordnet 0,81 sec, 212,558 clauses
N = 3 . 
```

qcompile 执行良好的加速（几乎快 18 倍），但需要一些额外的磁盘空间。

*编辑*完整的 wordnet 3.0 关系 (34.8 Mb) qcompile 表现相当不错：我们从 69.8 秒到 3.1 秒。它需要 39.8 Mb 额外磁盘空间（用于 .qlf 文件）。

# android - Cocos2d-x setAnimationInterval 在 Android 上不起作用

> ID：15701338
> 
> 赞同：4
> 
> 时间：2013-03-29T10:20:35.793
> 
> 标签：android, c++, eclipse, cocos2d-x, frame-rate

我尝试使用以下代码在 Cocos2d-x 中的应用程序中设置最大 FPS：

```
CCDirector::sharedDirector()->setAnimationInterval(1.0 / 30); 
```

它在 iOS 上运行，但是当我在三个 Android 设备上测试它时，它被忽略了，并以标准间隔 (1/60) 呈现帧。

如何使用 cocos2d-x 在 Android 上正确设置最大 FPS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:26:54.247

所以我实际上已经设法实现了它。您必须编辑 Cocos2dxRenderer.java 文件，然后清理并重建 Cocos2d-x。

这是代码：

```
public void onDrawFrame(final GL10 gl) {

     // FPS controlling algorithm is not accurate, and it will slow down FPS
     // on some devices. So comment FPS controlling code.

    try {
        if (loopRuntime < 40) {
            Log.wtf("RENDERER", "Sleeping for == " + (40 - loopRuntime));
            Thread.sleep(40 - loopRuntime);
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    //final long nowInNanoSeconds = System.nanoTime();
    //final long interval = nowInNanoSeconds - this.mLastTickInNanoSeconds;

            loopStart = System.currentTimeMillis();

    // should render a frame when onDrawFrame() is called or there is a
    // "ghost"
    Cocos2dxRenderer.nativeRender();

    loopEnd = System.currentTimeMillis();
    loopRuntime = (loopEnd - loopStart);

    Log.wtf("RENDERER", "loopRunTime == " + loopRuntime);

    // fps controlling
    /*if (interval < Cocos2dxRenderer.sAnimationInterval) {
        try {
            // because we render it before, so we should sleep twice time interval
            Thread.sleep((Cocos2dxRenderer.sAnimationInterval - interval) / Cocos2dxRenderer.NANOSECONDSPERMICROSECOND);
        } catch (final Exception e) {
        }
    }*/

    //this.mLastTickInNanoSeconds = nowInNanoSeconds;
} 
```

奇怪的是，当我取消注释那里的 fps 控制部分时，它什么也没做，而当我编写我的版本时，它确实......无论如何，那里的“神奇”值 40 给出了大约 35fps，但你当然可以轻松更改它与通过 setAnimationInterval() 传递的值一起工作；

编辑：我将 loopStart 行移到睡眠后-> 睡眠时间不应包含在 loopTime 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:16:22.213

这是一件很奇怪的事情。但是如果你有两个场景一起播放并且你让两个场景都达到 30 fps，虽然`pDirector->getAnimationInterval()`返回间隔为 1/30，但你仍然可以获得 60+ fps。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T07:12:01.587

此代码工作正常...

从[http://discuss.cocos2d-x.org/t/setanimationinterval-does-nothing-on-android/6419/4找到](http://discuss.cocos2d-x.org/t/setanimationinterval-does-nothing-on-android/6419/4)

```
private long renderingElapsedTime;

@Override

public void onDrawFrame(final GL10 gl) 

{

/*
 * FPS controlling algorithm is not accurate, and it will slow down FPS
 * on some devices. So comment FPS controlling code.
 */

try {
    if (renderingElapsedTime * NANOSECONDSPERMICROSECOND < Cocos2dxRenderer.sAnimationInterval) {
        Thread.sleep((Cocos2dxRenderer.sAnimationInterval - renderingElapsedTime * NANOSECONDSPERMICROSECOND) / NANOSECONDSPERMICROSECOND);
    }
} catch (InterruptedException e) {
    e.printStackTrace();
}

/*
final long nowInNanoSeconds = System.nanoTime();
final long interval = nowInNanoSeconds - this.mLastTickInNanoSeconds;
*/

// Get the timestamp when rendering started
long renderingStartedTimestamp = System.currentTimeMillis();

// should render a frame when onDrawFrame() is called or there is a
// "ghost"
Cocos2dxRenderer.nativeRender();

// Calculate the elapsed time during rendering
renderingElapsedTime = (System.currentTimeMillis() - renderingStartedTimestamp);

/*
// fps controlling
if (interval < Cocos2dxRenderer.sAnimationInterval) {
    try {
        // because we render it before, so we should sleep twice time interval
        Thread.sleep((Cocos2dxRenderer.sAnimationInterval - interval) / Cocos2dxRenderer.NANOSECONDSPERMICROSECOND);
    } catch (final Exception e) {
    }
}

this.mLastTickInNanoSeconds = nowInNanoSeconds;
*/ 
```

}

希望能帮助到你

# java - 希望使用 RESTful Web 服务通过 JSON 响应其他语言字体（印地语）

> ID：15701340
> 
> 赞同：5
> 
> 时间：2013-03-29T10:20:49.617
> 
> 标签：java, json, web-services

我有一个代码，它根据它的 url 搜索数据库并产生相关结果。当数据库中的数据是英文时，它工作得很好，但是当我用我的语言（印地语）替换它时，它开始产生垃圾编码。从我的方法生成的 JSON 响应完美地生成了所需的数据，但浏览器没有以正确的方式显示它（在印地语中）......

```
**`Returned JSON String`** =
 "{"Emp":{"3":{"EXPERIENCE":"०","Name":"राहुल शर्मा","PROFILE":"ट्रेनी","AGE":"२५","ADDRESS":"घ्हशिअबद","ID":"103","PHONE NUMBER":"८२७३६४५५१०","array":["name","Lamis"]},"2":{"EXPERIENCE":"०","Name":"कुशल सेठ","PROFILE":"ट्रेनी","AGE":"२४","ADDRESS":"नेव देल्ही","ID":"102","PHONE NUMBER":"९१८२७३६४५०","array":["name","Lamis"]},"1":{"EXPERIENCE":"+१","Name":"अजय रण","PROFILE":"देसिग्नेर","AGE":"२७","ADDRESS":"देल्ही","ID":"101","PHONE NUMBER":"७८९९८७६५५६","array":["name","Lamis"]},"0":{"EXPERIENCE":"+१","Name":"राज सिंघ","PROFILE":"देवेलोपेर","AGE":"२६","ADDRESS":"घ्हशिअबद","ID":"100","PHONE NUMBER":"९९८८७७६६५५","array":["name","Lamis"]},"4":{"EXPERIENCE":"०","Name":"रेने रे","PROFILE":"ट्रेनी","AGE":"२३","ADDRESS":"नेव देल्ही","ID":"104","PHONE NUMBER":"८१८२८३८४८५","array":["name","Lamis"]}},"Employee Details":[{"EXPERIENCE":"+१","Name":"राज सिंघ","PROFILE":"देवेलोपेर","AGE":"२६","ADDRESS":"घ्हशिअबद","ID":"100","PHONE NUMBER":"९९८८७७६६५५","array":["name","Lamis"]},{"EXPERIENCE":"+१","Name":"अजय रण","PROFILE":"देसिग्नेर","AGE":"२७","ADDRESS":"देल्ही","ID":"101","PHONE NUMBER":"७८९९८७६५५६","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"कुशल सेठ","PROFILE":"ट्रेनी","AGE":"२४","ADDRESS":"नेव देल्ही","ID":"102","PHONE NUMBER":"९१८२७३६४५०","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"राहुल शर्मा","PROFILE":"ट्रेनी","AGE":"२५","ADDRESS":"घ्हशिअबद","ID":"103","PHONE NUMBER":"८२७३६४५५१०","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"रेने रे","PROFILE":"ट्रेनी","AGE":"२३","ADDRESS":"नेव देल्ही","ID":"104","PHONE NUMBER":"८१८२८३८४८५","array":["name","Lamis"]}],"Employee":[{"EXPERIENCE":"+१","Name":"राज सिंघ","PROFILE":"देवेलोपेर","AGE":"२६","ADDRESS":"घ्हशिअबद","ID":"100","PHONE NUMBER":"९९८८७७६६५५","array":["name","Lamis"]},{"EXPERIENCE":"+१","Name":"अजय रण","PROFILE":"देसिग्नेर","AGE":"२७","ADDRESS":"देल्ही","ID":"101","PHONE NUMBER":"७८९९८७६५५६","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"कुशल सेठ","PROFILE":"ट्रेनी","AGE":"२४","ADDRESS":"नेव देल्ही","ID":"102","PHONE NUMBER":"९१८२७३६४५०","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"राहुल शर्मा","PROFILE":"ट्रेनी","AGE":"२५","ADDRESS":"घ्हशिअबद","ID":"103","PHONE NUMBER":"८२७३६४५५१०","array":["name","Lamis"]},{"EXPERIENCE":"०","Name":"रेने रे","PROFILE":"ट्रेनी","AGE":"२३","ADDRESS":"नेव देल्ही","ID":"104","PHONE NUMBER":"८१८२८३८४८५","array":["name","Lamis"]}]}"

**And Browser Visible String** =
"{"Emp":{"3":{"EXPERIENCE":"à¥¦","Name":"à¤°à¤¾à¤¹à¥à¤² à¤¶à¤°à¥à¤®à¤¾","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥«","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"103","PHONE NUMBER":"à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥«à¥§à¥¦","array":["name","Lamis"]},"2":{"EXPERIENCE":"à¥¦","Name":"à¤•à¥à¤¶à¤² à¤¸à¥‡à¤ ","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥ª","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"102","PHONE NUMBER":"à¥¯à¥§à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥¦","array":["name","Lamis"]},"1":{"EXPERIENCE":"+à¥§","Name":"à¤…à¤œà¤¯ à¤°à¤£","PROFILE":"à¤¦à¥‡à¤¸à¤¿à¤—à¥à¤¨à¥‡à¤°","AGE":"à¥¨à¥­","ADDRESS":"à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"101","PHONE NUMBER":"à¥­à¥®à¥¯à¥¯à¥®à¥­à¥¬à¥«à¥«à¥¬","array":["name","Lamis"]},"0":{"EXPERIENCE":"+à¥§","Name":"à¤°à¤¾à¤œ à¤¸à¤¿à¤‚à¤˜","PROFILE":"à¤¦à¥‡à¤µà¥‡à¤²à¥‹à¤ªà¥‡à¤°","AGE":"à¥¨à¥¬","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"100","PHONE NUMBER":"à¥¯à¥¯à¥®à¥®à¥­à¥­à¥¬à¥¬à¥«à¥«","array":["name","Lamis"]},"4":{"EXPERIENCE":"à¥¦","Name":"à¤°à¥‡à¤¨à¥‡ à¤°à¥‡","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥©","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"104","PHONE NUMBER":"à¥®à¥§à¥®à¥¨à¥®à¥©à¥®à¥ªà¥®à¥«","array":["name","Lamis"]}},"Employee Details":[{"EXPERIENCE":"+à¥§","Name":"à¤°à¤¾à¤œ à¤¸à¤¿à¤‚à¤˜","PROFILE":"à¤¦à¥‡à¤µà¥‡à¤²à¥‹à¤ªà¥‡à¤°","AGE":"à¥¨à¥¬","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"100","PHONE NUMBER":"à¥¯à¥¯à¥®à¥®à¥­à¥­à¥¬à¥¬à¥«à¥«","array":["name","Lamis"]},{"EXPERIENCE":"+à¥§","Name":"à¤…à¤œà¤¯ à¤°à¤£","PROFILE":"à¤¦à¥‡à¤¸à¤¿à¤—à¥à¤¨à¥‡à¤°","AGE":"à¥¨à¥­","ADDRESS":"à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"101","PHONE NUMBER":"à¥­à¥®à¥¯à¥¯à¥®à¥­à¥¬à¥«à¥«à¥¬","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤•à¥à¤¶à¤² à¤¸à¥‡à¤ ","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥ª","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"102","PHONE NUMBER":"à¥¯à¥§à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥¦","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤°à¤¾à¤¹à¥à¤² à¤¶à¤°à¥à¤®à¤¾","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥«","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"103","PHONE NUMBER":"à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥«à¥§à¥¦","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤°à¥‡à¤¨à¥‡ à¤°à¥‡","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥©","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"104","PHONE NUMBER":"à¥®à¥§à¥®à¥¨à¥®à¥©à¥®à¥ªà¥®à¥«","array":["name","Lamis"]}],"Employee":[{"EXPERIENCE":"+à¥§","Name":"à¤°à¤¾à¤œ à¤¸à¤¿à¤‚à¤˜","PROFILE":"à¤¦à¥‡à¤µà¥‡à¤²à¥‹à¤ªà¥‡à¤°","AGE":"à¥¨à¥¬","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"100","PHONE NUMBER":"à¥¯à¥¯à¥®à¥®à¥­à¥­à¥¬à¥¬à¥«à¥«","array":["name","Lamis"]},{"EXPERIENCE":"+à¥§","Name":"à¤…à¤œà¤¯ à¤°à¤£","PROFILE":"à¤¦à¥‡à¤¸à¤¿à¤—à¥à¤¨à¥‡à¤°","AGE":"à¥¨à¥­","ADDRESS":"à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"101","PHONE NUMBER":"à¥­à¥®à¥¯à¥¯à¥®à¥­à¥¬à¥«à¥«à¥¬","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤•à¥à¤¶à¤² à¤¸à¥‡à¤ ","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥ª","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"102","PHONE NUMBER":"à¥¯à¥§à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥¦","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤°à¤¾à¤¹à¥à¤² à¤¶à¤°à¥à¤®à¤¾","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥«","ADDRESS":"à¤˜à¥à¤¹à¤¶à¤¿à¤…à¤¬à¤¦","ID":"103","PHONE NUMBER":"à¥®à¥¨à¥­à¥©à¥¬à¥ªà¥«à¥«à¥§à¥¦","array":["name","Lamis"]},{"EXPERIENCE":"à¥¦","Name":"à¤°à¥‡à¤¨à¥‡ à¤°à¥‡","PROFILE":"à¤Ÿà¥à¤°à¥‡à¤¨à¥€","AGE":"à¥¨à¥©","ADDRESS":"à¤¨à¥‡à¤µ à¤¦à¥‡à¤²à¥à¤¹à¥€","ID":"104","PHONE NUMBER":"à¥®à¥§à¥®à¥¨à¥®à¥©à¥®à¥ªà¥®à¥«","array":["name","Lamis"]}]}" 
```

**请帮我找出这有什么问题..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:19:13.387

问题是数据的字符编码。您正在使用一种称为 UTF-8 的方法。但是您的浏览器认为您使用的是 ISO-8859，因为当您不告诉浏览器您想要什么时，这是 HTML 的标准。在 java 中，您可以使用 HttpServletResposne 对象来配置此信息。只需调用：

```
response.setCharacterEncoding("UTF-8"); 
```

然后浏览器将正确解释数据。这通常通过过滤器或项目的另一个中心点来完成，因为今天大多数项目都希望使用 UTF-8 进行完整的通信，以避免运行您现在面临的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T04:37:37.887

`@Produces(MediaType.APPLICATION_JSON + ";charset=utf-8")` 或者

```
@Produces({MediaType.APPLICATION_JSON +";charset=utf-8"}) 
```

这是我的代码中缺少的，现在它可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:47:56.783

在您的回复中，尝试使用**内容编码 UTF-8**。

我尝试从您的问题中复制文本并使用记事本将其保存在文本文件中。当我使用 UTF-8 编码时，它起作用了。

我什至尝试使用带有 SP1 的 Visual Studio 2010 将此文本用于 MVC4 项目。

希望这可以帮助！

维韦克

# symfony - Twig / Assetic 块继承 - 无法使用 parent() 添加到初始块

> ID：15701341
> 
> 赞同：2
> 
> 时间：2013-03-29T10:20:50.057
> 
> 标签：symfony, twig, assetic

我正在开发一个包含主题系统的 symfony2 项目。由于该系统的限制，我必须在包含文件中定义 javascripts 和样式表块，然后将其包含在主题的布局树枝文件中。结构如下：

应用程序/资源/主题/{theme_name}/views/layout.html.twig

```
... code ...
{% include '::theme_assets.html.twig; %} 
```

应用程序/资源/视图/theme_assets.html.twig

```
{% block stylesheets %}
    {% stylesheets 
        'stylesheet.css'
        'stylesheet2.css'
        filter='cssrewrite'
        output='css/packed/layout_theme.css'
    %}
    <link type="text/css" rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts%}
    {# same as stylesheets #}
{% endblock %} 
```

然后，我希望能够在上面在各个页面上设置的初始块中包含其他 css/js 文件，例如

src/Blah/BlahBundle/Resources/views/subpage.html.twig

```
{% extends 'BlahBundle::layout.html.twig' %} {# the theme system works out that there is a theme overrde for this file #}

{% block body %}
    ...body...
{% endblock %}

{% block stylesheets %}
    {{ parent() }} {# should include the initial block #}
    <link rel="stylesheet" type="text/css" href="{{ asset('/bundles/blah/css/additional1.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ asset('/bundles/blah/css/additional2.css') }}" />
{% endblock %} 
```

由于某种原因，当我查看“subpage.html.twig”时，这些额外的样式表不包括在内。我高度怀疑问题出在我的实施中，但我不确定我可以尝试什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:36:03.110

我遇到了类似的问题，但我所做的和工作是：我`layout.html.twig`用作所有页面的基础。（一切都包括这个布局）。一个它有： `{% block stylesheets %}... {% endblock %}`和 NO `{% stylesheets ... {% endstylesheets %}`。当我想为单个页面添加新样式表时，我像您一样再次调用样式表块，通过调用父级，Sf2 将 css 添加到末尾。但是我知道这个解决方案的一件事是我猜不会允许资产倾销。

# jenkins - 如何在 Jenkins/Hudson 中管理作业之间的共享资源？

> ID：15701343
> 
> 赞同：3
> 
> 时间：2013-03-29T10:20:59.010
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins

我们有几个工作在不同的数据库模式上运行我们的应用程序。
现在每个作业都使用自己的数据库模式。
现在非常方便。
如果同一个作业多次启动，那么这些构建将一个接一个地执行，而不是并行执行，因为它们使用相同的 DB 方案。
是否可以在 Jenkins 中管理数据库模式列表？
如果某个方案现在没有被任何作业使用，那么新作业可以开始使用这个免费方案。
是否有一些插件可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:43:54.093

尝试使用[Jenkins 排除插件](https://wiki.jenkins-ci.org/display/JENKINS/Exclusion-Plugin)。您必须将每个数据库定义为单独的资源，并设置每个作业以监控正确的资源。

我们将它用于多个工作之间非常相似的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:48:36.670

我认为，如果他们运行 10-15 分钟，那么它只会设置组装一项工作。但是在这种情况下，您可以使用脚本来管理您的数据库。

1.  检查可用的数据库（可以使用名称为 db 的 db.txt 文件）
2.  获取名称免费数据库并将此名称用于配置文件您的应用程序或配置作业。
3.  在 db.txt 文件上标记此数据库“不可用”。
4.  完成作业后，将此数据库设置为可用。

如果您并行运行第二个作业，您的脚本检查列表 db 并放置第二个 db，因为第一个 DB 带有标记“不可用”。

如果我不明白你的Q，请原谅我。

# c# - C# 两个二维数组的加法

> ID：15701344
> 
> 赞同：1
> 
> 时间：2013-03-29T10:20:59.630
> 
> 标签：c#, arrays, for-loop, multidimensional-array

好的，正如标题所说，我需要帮助找到一种将两个数组相加的简单方法。到目前为止，这是我的代码：

```
static void Main()
{
    Console.Write("Enter Rows: ");
    int row = Convert.ToInt32(Console.ReadLine());
    Console.Write("Enter Columns: ");
    int col = Convert.ToInt32(Console.ReadLine());
    int[,] a = new int[row, col];
    for (int i = 0; i < row; i++)
    {
        for (int j = 0; j < col; j++)
        {
            Console.Write("Enter Matrix({0},{1}): ", i, j);
            a[i, j] = Convert.ToInt32(Console.ReadLine());
        }
    }
    int[,] b = new int[row, col];
    for (int i = 0; i < row; i++)
    {
        for (int j = 0; j < col; j++)
        {
            Console.Write("Enter Matrix({0},{1}): ", i, j);
            a[i, j] = Convert.ToInt32(Console.ReadLine());
        }
    } 
```

那么，我如何将这两个数组加在一起，并打印出结果。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:32:23.363

```
static void Main()
{
    // Your code

    int[,] result = new int[row, col];

    for (int i = 0; i < row; i++)
    {
        for (int j = 0; j < col; j++)
        {
            result [i, j] = a[i,j] + b[i,j];

            Console.Write(result[i, j] + " ");
        }

        Console.WriteLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T06:51:55.260

```
int m, n, c, d;
int[,] first = new int[10, 10];
int[,] second = new int[10, 10];
int[,] sum = new int[10, 10];

Console.WriteLine("Enter the number of rows and columns of matrix");
m = Convert.ToInt16(Console.ReadLine());
n = Convert.ToInt16(Console.ReadLine());
Console.WriteLine("\nEnter the elements of first matrix\n");

for (c = 0; c < m; c++)
    for (d = 0; d < n; d++)
    {
        Console.WriteLine("Enter Element [" + c + " , " + d + "]");
        first[c, d] = Convert.ToInt16(Console.ReadLine());
    }

Console.WriteLine("Enter the elements of second matrix");
for (c = 0; c < m; c++)
    for (d = 0; d < n; d++)
    {
        Console.WriteLine("Enter Element [" + c + " , " + d + "]");
        second[c, d] = Convert.ToInt16(Console.ReadLine());
    }

for (c = 0; c < m; c++)
    for (d = 0; d < n; d++)
        sum[c, d] = first[c, d] + second[c, d];

Console.WriteLine("Sum of entered matrices:-");
for (c = 0; c < m; c++)
{
    for (d = 0; d < n; d++)
        Console.Write(" " + sum[c, d]);
    Console.WriteLine();
}
Console.ReadKey(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T15:09:25.893

```
using System;
class matrixAdd
{
public static void Main()
{
    int [,] mat1 = new int[3,3];
    int [,] mat2 = new int[3,3];
    int [,] addition = new int[3,3];
    int i, j;
    Console.WriteLine("Enter the elements of the matrix1: ");
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            mat1[i,j] = Convert.ToInt32(Console.ReadLine());
        }
    }
    Console.WriteLine("Entered elements of the matrix1: ");
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            Console.Write("{0} ", mat1[i,j]);
        }
        Console.Write("\n");
    }

    Console.WriteLine("Enter the elements of the matrix2: ");
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            mat2[i,j] = Convert.ToInt32(Console.ReadLine());
        }
    }
    Console.WriteLine("Entered elements of the matrix2: ");
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            Console.Write("{0} ", mat2[i,j]);
        }
        Console.Write("\n");
    }

    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            addition[i,j] = mat1[i,j] + mat2[i,j];
        }
    }

    Console.WriteLine("Addition of the matrix1 and matrix2: ");
    for(i=0; i<3; i++)
    {
        for(j=0; j<3; j++)
        {
            Console.Write("{0} ", addition[i,j]);
        }
        Console.Write("\n");
    }   
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T21:32:52.040

对两个数组求和后，您需要进行新的 for 循环以打印新数组

```
 // your code

 int[,] result = new int[row, col];

        for (int i = 0; i < row; i++)
        {
            for (int j = 0; j < col; j++)
            {
                result[i, j] = a[i, j] + b[i, j];
            }
        }
        for (int i = 0; i < row; i++)
        {
            for (int j = 0; j < col; j++)
            {
                Console.Write(result[i, j] + " ");
            }
            Console.WriteLine();
        } 
```

# php - 在网页加载时向用户显示消息

> ID：15701347
> 
> 赞同：0
> 
> 时间：2013-03-29T10:21:11.530
> 
> 标签：php, javascript, android, css, html

我已经为 android 移植了一个移动网络应用程序。该应用程序已经运行良好，位于 [CancerBank](http://www.kenyacancerbank.org/www)此处。当用户在 android 应用程序上单击它们时，有些链接的加载时间超过 30 秒，可以在此处下载[Android 应用程序](http://www.kenyacancerbank.org/Cancer-Ke.apk)。现在我想向用户显示页面正在加载的消息，直到页面完全加载。有没有人有一个插件可以用来完成这个？

我的页面应用程序是用 javascript、html5 和 css 开发的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:40:34.237

您可以默认隐藏所有页面元素（例如`<div class='show_this' style='display: none;'>content</div>`），并且只显示包含“加载”动画的 div。然后，您将在页面加载时显示页面元素。例如。在加载 jQuery 后放置：

```
$(document).ready(function(){
   $('.loading_message').hide();
   $('.show_this').show();
}); 
```

类似的东西可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:00:59.977

如果您使用的是 jQuery 并且页面内容是由 ajax 加载的，则可以使用：

```
$("body").on({
    ajaxStart: function() { 
        // Your code here
    },
    ajaxStop: function() { 
        // your code here 
    }    
}); 
```

如果您不使用 ajax，只需`div`在用户单击链接时添加加载。当页面加载并且用户获得新内容时，这`div`将再次消失，因为页面已“刷新”。如果你真的想让他们等待新页面的所有内容被加载：添加一个`div`总是显示的加载，而不是使用 javascript 来隐藏它。

```
window.onload = function() {
    // hide your div
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:58:31.750

看看这个。这似乎是一个不错的插件。

[http://www.gayadesign.com/scripts/queryLoader2/](http://www.gayadesign.com/scripts/queryLoader2/)

# android - 我的页面中的搜索选项

> ID：15701348
> 
> 赞同：0
> 
> 时间：2013-03-29T10:21:16.050
> 
> 标签：android

我正在开发一个基于问答的应用程序。

我正在使用 res/raw 数据库来获取数据，我计划为此设置一个搜索选项，即，我在底部保留了一个搜索框并说我有 100 个问题，我想做的是转到第 45 个问题。通过在搜索框中输入数字。我对这方面的工作没有任何想法。请帮我找到解决方案

```
protected void loadQuestionset1() throws Exception {
try {
InputStream questionset1 = this.getBaseContext().getResources()
                    .openRawResource(R.raw.questionset1);
bReader = new BufferedReader(new InputStreamReader(questionset1));
StringBuilder quesString = new StringBuilder();
            String aJsonLine = null;
            while ((aJsonLine = bReader.readLine()) != null) {
                quesString.append(aJsonLine);
            }
Log.d(this.getClass().toString(), quesString.toString());
            JSONObject quesObj = new JSONObject(quesString.toString());
            quesList1 = quesObj.getJSONArray("Questions");
            Log.d(this.getClass().getName(),
                    "Num Questions " + quesList1.length());
            }
catch (Exception e){

            } finally {
                try {
                    bReader.close();
                } catch (Exception e) {
                    Log.e("", e.getMessage().toString(), e.getCause());
                }

            }

        }
public static JSONArray getQuesList1() {
            return quesList1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:12:23.460

```
 public  ArrayList<NewQuestion> questionList=new ArrayList<NewQuestion>(); 
```

每次你从数据库中得到问题

```
 NewQuestion newQuestion=new NewQuestion();     
 newQuestion.question.put(NewQuestion.QUESTION_TEXT,q);
 newQuestion.question.put(NewQuestion.OPTION_1,q);
 newQuestion.question.put(NewQuestion.QPTION_2,q);
 newQuestion.question.put(NewQuestion.OPTION_3,q);
 newQuestion.question.put(NewQuestion.OPTION_4,q);    
 questionList.add(newQuestion);     

 public class NewQuestion {

 public static List<String> q12=new ArrayList<String>();
 public static final String QUESTION_TEXT="questionText";
 public static final String OPTION_1="option1";
 public static final String OPTION_2="option2";
 public static final String OPTION_3="option3";
 public static final String OPTION_4="option4";
 public static final String CORRECT_ANSWER="answer";

 Hashtable question=new Hashtable();

 public NewQuestion()
 {

    question.put(NewQuestion.QUESTION_TEXT,new String());
    question.put(NewQuestion.OPTION_1,new String());
    question.put(NewQuestion.OPTION_2,new String());
    question.put(NewQuestion.OPTION_3,new String());
    question.put(NewQuestion.OPTION_4,new String());
    question.put(NewQuestion.CORRECT_ANSWER,new String());
}
} 
```

现在您的 questionList of 0(index 0) 将包含与问题 1 相关的数据。当用户键入 40 时，您可以访问 40 处的数据

```
 newQuestion=(NewQuestion)questionList.get(questionNo);//question no 45

        String q=newQuestion.question.get(NewQuestion.QUESTION_TEXT).toString();//get question
         String op1=newQuestion.question.get(NewQuestion.OPTION_1).toString();
         String op2=newQuestion.question.get(NewQuestion.OPTION_2).toString();
         String op3=newQuestion.question.get(NewQuestion.OPTION_3).toString();
         String op4=newQuestion.question.get(NewQuestion.OPTION_4).toString(); 
```

如果您可以直接从原始数据库访问位置 45 的问题集，则无需使用上述内容。上述过程并不理想，因为 arraylist 存储所有数据。当尺寸增加时，可能会减慢操作速度。

如果您是用于存储问题和答案的数据库（sqlite），则使用查询从数据库中获取数据会更容易。

# javascript - Javascript window.onload 或 document.ready 在 Google Chrome 中不起作用？

> ID：15701354
> 
> 赞同：1
> 
> 时间：2013-03-29T10:22:00.313
> 
> 标签：javascript, jquery, google-chrome, window, onload

我想在页面加载时运行一个事件……我不能使用 body onload……因为我还有很多其他事件。

所以我`尝试了很多解决方案......：

**适用于 Firefox 但不适用于 chrome ：**

```
if (window.addEventListener) {
    window.addEventListener("load", adminArboOuvrirEvt, false);
} else if (window.attachEvent) {
    window.attachEvent("load", adminArboOuvrirEvt);} 
```

或者

```
$(window).bind('load', function(){
   adminArboOuvrirEvt();
}) 
```

**在 Firefox 和 Chrome 中都不起作用：**

```
$(function(){
    adminArboOuvrirEvt();
});

$(window).ready(function(){
     adminArboOuvrirEvt();
});

$(document).ready(function(){
     adminArboOuvrirEvt();
}); 
```

我的其他活动是：

```
window.onload = function(){ height("menu1","menu2"); };
window.onresize = function(){height("menu1","menu2"); }; 
```

提前致谢 ！

**编辑：我注意到在谷歌浏览器上它可以工作一次！但如果我刷新不再起作用。如果我来自外部网站并回来，工作一次...是否有活动清洁工或...？**

# php - PHP，图像从 FTP 到 BLOB

> ID：15701355
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:05.950
> 
> 标签：php, ftp, blob

我的 FTP 上有一张图片，在这里：`/home/www/myImage.jpg`

我需要在 PHP 中检索此图像并创建一个 BLOB。

我使用 CURL，但我不知道该怎么做。

我试过这个：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "ftp://MY_IP/home/www/myImage.jpg");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 0);    
curl_setopt($ch, CURLOPT_USERPWD, "LOGIN:PASSWORD");

$myBlobImage= curl_exec($ch);

curl_close($ch); 
```

但是有了这个，我什么也没得到……有什么想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:31:03.577

如果您在存储文件的同一台服务器上运行代码，那么您只需执行以下操作：

```
file_get_contents('PATH/TO/MyFile.Ext'); 
```

它加载文件的内容。现在您可以轻松地将它存储到数据库中的 BLOB 列中。您可以`base64_encode`先获取数据，也可以不`file_get_contents`使用*字节流*来读取字节流...

# python-2.7 - 在 account.invoice 工作流中添加一个简单的流程

> ID：15701356
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:09.717
> 
> 标签：python-2.7, openerp, workflow-activity

我想在用户验证 Openerp 7 中的发票后添加一个小流程（只是为销售人员记录一些），但我不知道如何“拦截”该操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:13:18.993

好的，我只需要继承`account_invoice`类并定义一个新`invoice_validate`方法

@user1576199 这是你的意思吗？

```
from account import account_invoice

class account_invoice(osv.osv):
    _inherit="account.invoice"
    def invoice_validate(self, cr, uid, ids, context=None):
        super(account_invoice,self).invoice_validate() 
```

# jquery - 停止点击时的jQuery效果？

> ID：15701360
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:15.857
> 
> 标签：jquery

为什么推送 .pulse 类后这不会停止我的效果？

```
jQuery(".pulse").effect("pulsate", { times:100 }, 2000).click(function(){
        jQuery(".pulse").effect().stop();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:29:43.447

解决方案是指定 2 个非常重要的参数，`.stop()`它们允许您清除所有排队的动画步骤并直接跳转到动画的结束状态 - 请参阅**[文档](http://api.jquery.com/stop/)**

```
jQuery(".pulse").effect("pulsate", { times:1000 }, 2000).click(function(){
    jQuery(this).stop(true, true);
}); 
```

看到这个**演示**：http: [//jsfiddle.net/YGTLq/](http://jsfiddle.net/YGTLq/)

# c# - 如何保护 web.config 连接字符串免受其他开发人员的攻击？

> ID：15701363
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:18.607
> 
> 标签：c#, asp.net, web-config

我需要保护我的`Web.config`文件免受恶意用户访问我们的网络服务器和团队中的初级开发人员。我曾经`RsaProtectedConfigurationProvider`成功地加密和解密我们的文件。但是，解密连接字符串就像从我的应用程序中访问它一样容易，无论它是否加密

```
protected void btnShowConnectionString_Click(object sender, EventArgs e)
{
    lblMessage.Text = WebConfigurationManager.ConnectionStrings["MyTestConnection"].ConnectionString;
} 
```

如何保护我的连接字符串以避免像这样的变通办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:35:36.800

使用标准解决方案无法做到这一点。

要进行此类保护，您应该使用此连接字符串围绕标准库编写自己的包装器，这将解密来自 webconfig 的连接字符串。而且你应该保护你的包装器不被像 Sentinel Hasp 这样的东西反编译。如果您不保护包装器，那么获取加密算法和解密连接字符串将很简单。

但是不向开发人员 webconfig 写入生产连接字符串会更简单。部署到生产环境时，使用开发人员环境开发和编写生产环境连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:38:32.840

您可以阅读此链接`secure string connection`，了解 msdn 推荐的解决方案

链接： http: [//msdn.microsoft.com/en-us/library/89211k9b (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:11:49.460

恕我直言，您提到的“解决方法”并不是真正的解决方法，而是它的本质。

您的应用程序（网络或其他）必须能够解密信息，以便我可以实际建立连接。除非您对 SQL 服务器使用 Windows 身份验证，否则用户/密码总是“存在”...我的问题是为什么/如何在您的应用程序中存在此类代码（首先）？

正如前面的答案中所述，将您的开发环境与生产环境分开 - 可能只有生产环境中的生产配置[转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)。

# jquery - 使用 Jquery 管理 Asp.Net 验证器

> ID：15701365
> 
> 赞同：2
> 
> 时间：2013-03-29T10:22:38.267
> 
> 标签：jquery, asp.net, validation, requiredfieldvalidator

我们如何使用 JQuery 访问 Asp.NET 验证器，如必填字段、正则表达式等？
我们如何使用 Jquery 控制它们的显示和自定义它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:06:31.880

简而言之，是的，您可以从 Javascript 访问验证器（实际上不需要 jQuery 来执行此操作），当然前提是启用了客户端验证（即，页面中至少有一个启用且可见的验证器及其[EnableClientScript](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.enableclientscript.aspx)属性设置为`true`）。

验证器对象在全局`Page_Validators`数组中可用。您可以使用 禁用或启用单个验证器`ValidatorEnable()`，并使用 强制验证`ValidatorValidate()`。[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)提供了有关客户端验证 API 的更多信息。

可以通过重新绑定验证器的验证方法来实现任意定制。[我的这个旧答案](https://stackoverflow.com/a/3925205/464709)用纯 Javascript 记录了这个过程，使用 jQuery 它给出了类似的内容：

```
if (window.Page_Validators) {
    $.each(window.Page_Validators, function(index, validator) {
        validator.__old_evaluationfunction = validator.evaluationfunction;
        validator.evaluationfunction = function(value) {
            var element = validator.controltovalidate;
            if (!validator.__old_evaluationfunction(value)) {
                // Validation failed - turn 'element' red, scream at the user, etc.
                return false;
            } else {
                // Validation succeeded - restore 'element' to its normal state.
                return true;
            }
        };
    });
} 
```

# matlab - 在matlab中生成每个二进制nxm矩阵

> ID：15701366
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:38.623
> 
> 标签：matlab, matrix, binary

我想将 matlab 中的每个布尔矩阵生成为 3 维数组。

例如：

```
mat(:,:,1) = [[1 0][0 1]]
mat(:,:,2) = [[1 1][0 1]]
... 
```

我的最终目标是生成给定大小的每个三元矩阵。请记住，我知道矩阵的数量是指数的，但我会使用小数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:49:36.127

不确定前面的答案是否确实符合您的要求...使用该方法，我在 array2D 中获得了多个相同的条目。这是一个矢量化且（我相信）正确的解决方案：

```
clear all;

nRows = 2;
nCols = nRows; % Only works for square matrices

% Generate matrix of all binary numbers that fit in nCols
max2Pow = nCols;
maxNum = 2 ^ max2Pow - 1; 
allBinCols = bsxfun(@bitand, (0:maxNum)', 2.^((max2Pow-1):-1:0)) > 0;

% Get the indices of the rows in this matrix required for each output
% binary matrix
N = size(allBinCols, 1);
A = repmat({1:N}, nCols, 1);
[B{1:nCols}] = ndgrid(A{:});
rowInds = reshape(cat(3, B{:}), [], nCols)';

% Get the appropriate rows and reshape to a 3D array of right size
nMats = size(rowInds, 2);
binMats = reshape(allBinCols(rowInds(:), :)', nRows, nCols, nMats) 
```

请注意，除了少数人之外，`nRows`您将很快耗尽内存，因为您正在生成`2^(nRows*nRows)`size 的矩阵`nRows*nRows`。那是AlottaNumbers。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:22:38.623

其实答案很简单。每个矩阵都是布尔值，可以通过以任何给定顺序读取所有值时获得的二进制数进行索引。

对于二进制矩阵：设 n 为矩阵中元素的数量（n = 行 * 列）。

```
for d=0:(2^n-1)
    %Convert binary to decimal string
    str = dec2bin(d);
    %Convert string to array
    array1D = str - '0';
    array1D = [array1D zeros(1, n-length(array1D))];
    %Reshape
    array2D(:,:,d+1) = reshape(array1D, rows, cols);
end 
```

通过将 dec2bin 更改为 dec2base 并将 2^n 更改为 (yourbase)^n，这可以很容易地推广到任何基础。

# php - 倒数计时器在php中？

> ID：15701368
> 
> 赞同：-2
> 
> 时间：2013-03-29T10:22:39.157
> 
> 标签：php, countdowntimer

我是 PHP 的新手。我想在我的网页上添加一个倒数计时器。有人可以解释一下怎么做吗？有什么功能可以做到吗？我正在考虑使用 AJAX，但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:29:15.937

您可以使用 setInterval

```
function init()
{
    updateCountdown();
    window.setInterval(updateTime,30000);
}

updateCountdown()
{
  //you code
} 
```

# php - 将数据从 Mysql 传输到 Excel

> ID：15701371
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:44.593
> 
> 标签：php, mysql, excel, report

**我使用php**创建了一个网站。在那个网站上，我想创建一个类似报告的东西，其中包括将详细信息从一个表格转移到一个可下载的 Excel 表格中。有什么办法可以完成这项工作吗？请帮助我找到解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:35:01.563

您可以从数据库中获取所有行并使用 fputcsv 函数将其作为 csv

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Disposition: attachment;filename=export.csv");
header("Content-Transfer-Encoding: binary");

$csvHandler = fopen("php://output", 'w');
while ($row = mysql_fetch_array ($res))
{
    fputcsv($csvHandler, $row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:30:42.090

您可以使用[PHPExcel](http://phpexcel.codeplex.com/)生成数据

和一个简单的文件下载功能：

```
function show_download($data, $name, $type = "unknown/unknown") {
header('Content-Type: ' . $type);
header('Expires: ' . gmdate('D, d M Y H:i:s') . ' GMT');
header('Content-Disposition: attachment; filename="' . $name . '"');
header('Content-Length: ' . strlen($data));
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');

print $data;

exit(); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:32:10.800

您可以创建一个导出 CSV 文件的脚本，如下所示：

```
header('Content-type: text/csv');
header("Content-Disposition: attachment; filename=clients_" . date("Ymd") . ".csv");

//Open PHP output stream
$fd = fopen('php://output', 'w');

$tab = array();

//get your results from your database
foreach ($results as $res)
   $tab[] = array($res->Client_Name, $res->Client_Email);

foreach ($tab as $val)
    fputcsv($fd, $val);

fclose($fd); 
```

# clearcase - 清除任务 - 需要查询命名列表

> ID：15701372
> 
> 赞同：1
> 
> 时间：2013-03-29T10:22:46.330
> 
> 标签：clearcase, cleartool, clearquest, clearcase-automation

我的要求：我需要使用 cq perl 向命名列表（在 CQ 中，编辑 -> 命名列表 -> 内部版本号）添加一个新值。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:44:25.860

知道了谢谢。如果有人正在寻找答案： [http ://pic.dhe.ibm.com/infocenter/cqhelp/v7r1m2/index.jsp?topic=%2Fcom.ibm.rational.clearquest.apiref.doc%2Ftopics%2Fc_database_mthds.htm](http://pic.dhe.ibm.com/infocenter/cqhelp/v7r1m2/index.jsp?topic=%2Fcom.ibm.rational.clearquest.apiref.doc%2Ftopics%2Fc_database_mthds.htm)

# oop - 在面向对象的分析和设计中消息的作用是什么？

> ID：15701373
> 
> 赞同：0
> 
> 时间：2013-03-29T10:22:47.530
> 
> 标签：oop, object, analysis

在面向对象的编程中，对象通过传递消息进行通信，有时这些消息也可以有参数。

```
I.e. A Student object can send a message to a School object asking for a list of public holidays. 
```

我的问题是这些消息与传统的类方法有何不同？他们都是一样的吗？我们如何在 UML 中显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:28:00.757

有“消息传递”之类的东西，您可以在[WikiPedia](http://en.wikipedia.org/wiki/Message_passing)上阅读它，但从您引用的文本来看，我猜它们只是指方法调用。没有更多的上下文不能说更多。

# iphone - 如何在 webview 中调用 javascript

> ID：15701376
> 
> 赞同：0
> 
> 时间：2013-03-29T10:23:01.323
> 
> 标签：iphone, ios, objective-c

我是 iPhone 的初学者。我想在 webview 中调用 javascript 页面。我用过像这样的脚本

```
 <script src="http://www.infochoice.com.au/modules/applets/flash9/Source/Scripts/swfobject.js" type="text/javascript"></script>
            <div id="ich_flashcontent"></div>
            <script type="text/javascript">
               var ich_calc_detect = new SWFObject("http://www.infochoice.com.au/modules/applets/flash9/Source/Applets/600/LoanRepayments.swf", "ich_LoanRepayments", "595", "330", "9", "#000");
               ich_calc_detect.addVariable("splash_location", "http://www.infochoice.com.au/modules/applets/flash9/Source/Applets/splash_icon.swf");
               ich_calc_detect.addVariable("info_location", "http://www.infochoice.com.au/distributions/flash9/58/info/");
               ich_calc_detect.addVariable("xml_location", "http://www.infochoice.com.au/distributions/flash9/58/");
               ich_calc_detect.addVariable("core_location", "http://www.infochoice.com.au/modules/applets/flash9/Source/Applets/StGeorge/");
               ich_calc_detect.addParam("AllowScriptAccess", "always");
               ich_calc_detect.addParam("wmode", "transparent"); 
               ich_calc_detect.useExpressInstall('http://www.infochoice.com.au/modules/applets/flash9/Source/Applets/expressinstall.swf');
               ich_calc_detect.write("ich_flashcontent");
            </script> 
```

请提供适用于我的应用程序的任何建议和源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:27:00.013

只是一个简单的：

```
[webView stringByEvaluatingJavaScriptFromString:%your javascript string%]; 
```

请注意，每次调用需要 10 秒的执行时间和 10mb 的内存，否则无论它是否完成执行，它都会被杀死。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:27:16.750

尝试使用`[webView stringByEvaluatingJavaScriptFromString:@"your_javascript_here"];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:27:47.680

我已经通过以下方式为 UIWebview 执行了 java 脚本

```
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%f%%'",(fontSize * 10.0)];
[self stringByEvaluatingJavaScriptFromString:jsString];
  [jsString release]; 
```

希望它可以帮助你。这里 self 是 UIWebView 的一个实例。

# asp.net - 更新面板的回发事件，反映asp.net中控件的当前状态

> ID：15701377
> 
> 赞同：0
> 
> 时间：2013-03-29T10:23:04.383
> 
> 标签：asp.net, updatepanel

我有更新面板控件。其中有两个单选按钮和 2 个 div。当我们单击单选按钮时，应显示相应的 div。& 默认情况下，这些按钮中的 1 个被选中并显示相应的 div。

Problem: when the default button is selected, the div is displayed properly, but when I select another button, in keeps the page inactive for a minute or any event is occurred like click or so,then the default buttons respective div is displayed again,而不是选中的。

代码：

```
 <asp:UpdatePanel ID="newUP" runat="server">
            <ContentTemplate>

             <table>
             <tr>
              <td style="float:left; margin:0px;">
                 <asp:RadioButton ID="rbtnInclude" runat="server" GroupName="Stores" Checked="true" Text="Include"/><br />
               </td>
              </tr>
              <tr>
               <td style="float:left; margin:0px;">
                 <asp:RadioButton ID="rbtnExclude" runat="server" GroupName="Stores" Text="Exclude"/>  
               </td>
              </tr>
              </table>
              <table>
               <tr>
                <td>
                  <div class="divIn" id="DivIn1" runat="server" style="width:700px; display: block;">
                        DIV IN TEXT
                  </div>
              </td>
              <tr>
               <td>
                  <div class="divEx" id="DivEx1" runat="server" style="width:700px; display: none;">            DIV EX TEXT 
                   </div>
               </td>
              </tr>    

            </table>
            </ContentTemplate>

            </asp:UpdatePanel> 
```

Javascript：

```
function enableDisableDiv()
{
  if (document.getElementById("<%=rbtnInclude.ClientID %>").checked)
        {
            $(".divIn").show();
            $(".divEx").hide();

        }
  if (document.getElementById("<%=rbtnExclude.ClientID %>").checked)
        {
            $(".divIn").hide();
            $(".divEx").show();

        }
} 
```

代码背后：

```
 if (!Page.IsPostBack)
        {
        rbtnInclude.Attributes.Add("onclick", "javascript: enableDisableDiv();");
        rbtnExclude.Attributes.Add("onclick", "javascript: enableDisableDiv();");
        } 
```

*编辑：*这个面板也嵌套在另一个更新面板中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:30:44.303

在 enableDisableDiv() 函数下添加小脚本块。

```
<script language="javascript" type="text/javascript">
function enableDisableDiv()
{
     //Do your stuff
}

function pageLoad() {
    enableDisableDiv()
}

</script> 
```

# javafx - JavaFX TilePane - 绘制子项的顺序

> ID：15701378
> 
> 赞同：2
> 
> 时间：2013-03-29T10:23:19.690
> 
> 标签：javafx

我有一个 JavaFX 2.2 TilePane 有几个项目（孩子）。我添加了 css，以便在鼠标悬停时，项目的比例设置为 1.2。默认情况下，子节点的顺序定义了首先绘制的节点和最后绘制的节点。有没有办法让悬停项目高于所有其他项目，而不诉诸 toFront() 并使其成为最后一个项目（将其移动到最后）。这个问题类似于[https://stackoverflow.com/questions/13893514/scaling-children-in-a-flowpane-makes-the-children-clip-eachother](https://stackoverflow.com/questions/13893514/scaling-children-in-a-flowpane-makes-the-children-clip-eachother)（仍未得到答复）。

该问题的屏幕截图位于：http: [//vladeck.files.wordpress.com/2013/03/javafx_tilepane.png ?w=640](http://vladeck.files.wordpress.com/2013/03/javafx_tilepane.png?w=640)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:52:30.230

*解决方案/解决方法*

1.  使用[GridPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/GridPane.html)而不是[TilePane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/TilePane.html)。
2.  当用户单击网格中的某个项目时，在该项目上调用[toFront](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#toFront%28%29)。

* * *

*示例代码*

我将以下代码添加到基于网格布局的[计算器中，该网格布局看起来类似于示例屏幕截图中的平铺布局。](https://gist.github.com/jewelsea/4344564)使用修改后的应用程序，我没有遇到计算器按钮重叠的情况。令我惊讶的是，虽然它们看起来有点奇怪，但按比例缩放的按钮使计算器更易于使用......

```
button.setOnMouseEntered(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    button.toFront();
    button.setScaleX(1.6); button.setScaleY(1.6);
  }
});
button.setOnMouseExited(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    button.setScaleX(1); button.setScaleY(1);
  }
}); 
```

![计算器 image1](../Images/7c6cd726483d4ab87b63303c530f27e5.png) ![计算器 image2](../Images/aad6657bf95fe6f3b59e765d06276c58.png)

* * *

*背景*

As you note, the overlapping issue is unresolvable in some stock Panes like `TilePane`. This is because the z-order as well as the relative layout position of a node are both defined by the relative position of the node in the TilePane's child list. In such Panes, you cannot change the z-order and bring it to the front without also moving the node to the last layout position in the `TilePane`.

A `GridPane` does not suffer from the same issues as a `TilePane` because it's child node list order only defines the z-order of it's child nodes, not the layout positioning of those child nodes.

> Is there a way (a hack?) to implement my own code of retrieving the children order for drawing when JavaFX repaints TilePanel?

Yes, you could hack the [TilePane code](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-common/src/javafx/scene/layout/TilePane.java) if you have the skills.

# wso2 - WSO2 注册表 master-datasources.xml 和 WSO2AM_DB

> ID：15701380
> 
> 赞同：0
> 
> 时间：2013-03-29T10:23:21.020
> 
> 标签：wso2

4.5.3 版与 4.5.1 版的不同之处在于 master-datasources.xml 中出现了 WSO2AM_DB 的新数据源 这是什么意思？这两种产品如何相互关联？如果我有一个注册表主机、API 主机和一个 MySQL 主机，我如何才能拥有一个共享注册表？

至于我在 API 管理器之前配置的内容依赖于注册表和 BAM，所以我需要有用于注册表和 BAM 的数据库（所以安装注册表而不是 BAM 而不是 API）。

新的数据源如何改变这个依赖路径 Registry 是否也依赖于 API 管理器，但谁先创建 DB？

谢谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:24:58.523

这并不意味着 Governance Registry 依赖于 Api Manager。这是为 API 管理器定义的数据源，如果可用于存储它是运行时数据，则使用该数据源。如果需要，您可以使用相同的 WSO2_CARBON_DB，但随后需要进行一些配置。所以这纯粹是为了将 API 相关的运行时数据另外存储到 Carbon 数据库中。（此数据源的 JNDI 查找发生在 API 管理器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T14:47:40.270

我们将 WSO2_CARBON_DB 数据源配置为指向我们组织的 Oracle 数据库。GReg 分发包括设置数据模型所需的特定脚本。

如果我们需要将 WSO2AM_DB 数据源指向同一个 Oracle DB，我们找不到任何脚本或文档。

# d3.js - 具有多个值的半饼图

> ID：15701381
> 
> 赞同：3
> 
> 时间：2013-03-29T10:23:24.973
> 
> 标签：d3.js

如何在 d3 中创建半饼弧
我正在关注一个带有完整饼图的示例。如何创建半饼图？

到目前为止的代码

[http://tributary.io/inlet/5260888](http://tributary.io/inlet/5260888)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T21:38:09.683

解决方案： http: [//tributary.io/inlet/5273835](http://tributary.io/inlet/5273835)

[d3 的饼图](https://github.com/mbostock/d3/wiki/Pie-Layout)具有设置[startAngle](https://github.com/mbostock/d3/wiki/Pie-Layout#wiki-startAngle)和[engAngle](https://github.com/mbostock/d3/wiki/Pie-Layout#wiki-endAngle)属性的功能，可以创建部分饼图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T00:44:02.237

我有类似的要求，但是缺少的部分不是一半，而是整体的变化部分。为了实现这一点，我只是将缺失段的“描边”和“填充”设置为“无”。

# amazon-web-services - 将数据从 Amazon S3 复制到 Redshift 并避免重复行

> ID：15701385
> 
> 赞同：12
> 
> 时间：2013-03-29T10:23:35.927
> 
> 标签：amazon-web-services, amazon-s3, duplicates, copy, amazon-redshift

我正在将数据从 Amazon S3 复制到 Redshift。在此过程中，我需要避免再次加载相同的文件。我的 Redshift 表没有任何独特的限制。有没有办法使用复制命令来实现这一点？

[http://docs.aws.amazon.com/redshift/latest/dg/r_COPY_command_examples.html](http://docs.aws.amazon.com/redshift/latest/dg/r_COPY_command_examples.html)

我尝试添加唯一约束并将列设置为主键，但没有运气。Redshift 似乎不支持唯一/主键约束。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T07:38:41.610

正如 user1045047 提到的，Amazon Redshift 不支持唯一约束，因此我一直在寻找使用删除语句从表中删除重复记录的方法。最后，我找到了一个合理的方法。

Amazon Redshift 支持创建存储自动生成的唯一编号的 IDENTITY 列。 [http://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_NEW.html](http://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_NEW.html)

以下 sql 用于 PostgreSQL 删除 OID 为唯一列的重复记录，您可以通过将 OID 替换为标识列来使用此 sql。

```
DELETE FROM duplicated_table WHERE OID > (
　SELECT MIN(OID) FROM duplicated_table d2
　　WHERE column1 = d2.dupl_column1
　　AND column2 = d2.column2
); 
```

这是我在 Amazon Redshift 集群上测试的示例。

```
create table auto_id_table (auto_id int IDENTITY, name varchar, age int);

insert into auto_id_table (name, age) values('John', 18);
insert into auto_id_table (name, age) values('John', 18);
insert into auto_id_table (name, age) values('John', 18);
insert into auto_id_table (name, age) values('John', 18);
insert into auto_id_table (name, age) values('John', 18);
insert into auto_id_table (name, age) values('Bob', 20);
insert into auto_id_table (name, age) values('Bob', 20);  
insert into auto_id_table (name, age) values('Matt', 24); 

select * from auto_id_table order by auto_id; 
 auto_id | name | age 
---------+------+-----
       1 | John |  18
       2 | John |  18
       3 | John |  18
       4 | John |  18
       5 | John |  18
       6 | Bob  |  20
       7 | Bob  |  20
       8 | Matt |  24    
(8 rows) 

delete from auto_id_table where auto_id > (
  select min(auto_id) from auto_id_table d
    where auto_id_table.name = d.name
    and auto_id_table.age = d.age
);

select * from auto_id_table order by auto_id;
 auto_id | name | age 
---------+------+-----
       1 | John |  18
       6 | Bob  |  20
       8 | Matt |  24
(3 rows) 
```

它也适用于这样的 COPY 命令。

*   auto_id_table.csv

    ```
    John,18
    Bob,20
    Matt,24 
    ```

*   复制sql

    ```
    copy auto_id_table (name, age) from '[s3-path]/auto_id_table.csv' CREDENTIALS 'aws_access_key_id=[your-aws-key-id] ;aws_secret_access_key=[your-aws-secret-key]' delimiter ','; 
    ```

这种方式的优点是您不需要运行 DDL 语句。但是，它不适用于没有标识列的现有表，因为无法将标识列添加到现有表中。删除现有表中重复记录的唯一方法是像这样迁移所有记录。（与user1045047的回答相同）

```
insert into temp_table (select distinct from original_table);
drop table original_table;
alter table temp_table rename to original_table; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-26T15:25:30.157

嗯..

不直接将数据加载到主表中怎么样。

避免重复的步骤：

1.  开始交易
2.  批量加载到临时临时表中
3.  从主表中删除，其中行 = 临时表行
4.  从临时表插入主表（合并）
5.  删除临时表
6.  结束交易。

这也是~~极好的~~有点快，由redshift docs推荐。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-12T15:58:47.310

我的解决方案是在表格上的“复制”之前运行“删除”命令。在我的用例中，每次我需要将每日快照的记录复制到 redshift 表中，因此我可以使用以下“删除”命令确保删除重复记录，然后运行“复制”命令。

> 从 t_data 中删除，其中 snapshot_day = 'xxxx-xx-xx'；

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-12T18:21:28.993

目前没有办法从 redshift 中删除重复项。Redshift 不支持主键/唯一键约束，并且使用行号删除重复项也不是一种选择（删除行号大于 1 的行），因为 redshift 上的删除操作不允许复杂的语句（也是红移中不存在行号）。

删除重复项的最佳方法是编写一个 cron/quartz 作业，该作业将选择所有不同的行，将它们放在单独的表中，然后将表重命名为原始表。

`Insert into temp_originalTable (Select Distinct from originalTable)`

`Drop table originalTable`

`Alter table temp_originalTable rename to originalTable`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-07T01:26:33.877

我们每周删除重复项，但您也可以在 @Kyle 提到的加载事务期间执行此操作。此外，这确实需要存在一个自动生成的 ID 列作为 delete 的最终目标：

```
DELETE FROM <your table> WHERE ID NOT IN ( 
   SELECT ID FROM (
      SELECT *, ROW_NUMBER() OVER 
         ( PARTITION BY <your constraint columns> ORDER BY ID ASC ) DUPLICATES 
      FROM REQUESTS 
   ) WHERE DUPLICATES=1
); COMMIT; 
```

例如：

```
CREATE TABLE IF NOT EXISTS public.requests
(
    id BIGINT NOT NULL DEFAULT "identity"(1, 0, '1,1'::text) ENCODE delta
    kaid VARCHAR(50)   NOT NULL 
    ,eid VARCHAR(50)   NOT NULL ENCODE text32k
    ,aid VARCHAR(100)  NOT NULL ENCODE text32k
    ,sid VARCHAR(100)  NOT NULL ENCODE zstd
    ,rid VARCHAR(100)  NOT NULL ENCODE zstd
    ,"ts" TIMESTAMP WITHOUT TIME ZONE NOT NULL  ENCODE delta32k
    ,rtype VARCHAR(50) NOT NULL ENCODE bytedict
    ,stype VARCHAR(25)          ENCODE bytedict
    ,sver VARCHAR(50)  NOT NULL ENCODE text255
    ,dmacd INTEGER              ENCODE delta32k
    ,reqnum INTEGER    NOT NULL ENCODE delta32k
    ,did VARCHAR(255)           ENCODE zstd
    ,"region" VARCHAR(10)       ENCODE lzo
)
DISTSTYLE EVEN
SORTKEY (kaid, eid, aid, "ts")
;

. . . 

DELETE FROM REQUESTS WHERE ID NOT IN ( 
   SELECT ID FROM (
      SELECT *, ROW_NUMBER() OVER 
         ( PARTITION BY DID,RID,RTYPE,TS ORDER BY ID ASC ) DUPLICATES 
      FROM REQUESTS 
   ) WHERE DUPLICATES=1
); COMMIT; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-21T11:58:03.220

还有另一种解决方案可以真正避免数据重复，尽管它不像插入后删除重复数据那么简单。复制命令具有清单选项来指定要复制的文件

```
copy customer
from 's3://mybucket/cust.manifest' 
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
manifest; 
```

您可以在每次运行复制命令之前构建一个生成新清单文件的 lambda。该 lambda 会将已复制的文件与到达的新文件进行比较，并将创建一个仅包含新文件的新清单，这样您就不会两次摄取同一个文件

# c# - solr pdf 提取工作但没有索引

> ID：15701387
> 
> 赞同：1
> 
> 时间：2013-03-29T10:23:39.057
> 
> 标签：c#, apache, solr, solrnet

我与 solr 合作提取 pdf 文件并将其编入索引。现在我可以使用以下代码提取它：

```
private static void IndexPDFFile(ISolrOperations<Article> solr)
{
    string filecontent = null;

    using (var file = File.OpenRead(@"C:\\cookbook.pdf"))
    {
        var response = solr.Extract(new ExtractParameters(file, "abcd1")
        {
            ExtractOnly = true,
            ExtractFormat = ExtractFormat.Text,
        });

        filecontent = response.Content;
    }
    solr.Commit();
} 
```

但是当我在浏览器中使用以下命令检查 solr 时，什么也没有出现：

```
http://berserkerpc:444/solr/select/?q=text:solr 
```

或者

```
http://berserkerpc:444/solr/select/?q=author:admin 
```

pdf 文件的内容是：这是一本 Solr 食谱......字段作者应该包含一些带有管理员的内容。

这里的输出：

```
 <response><lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
<lst name="params"><str name="q">text:Solr</str></lst></lst><result name="response" numFound="0" start="0"/></response> 
```

对这个问题有什么建议吗？？

谢谢，特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:05:28.263

这是因为您`ExtractOnly=true`在`ExtractParameters`. 这是源代码中对 ExtractOnly 参数的注释。

```
 /// <summary>
    /// If true, return the extracted content from Tika without indexing the document. 
    /// This literally includes the extracted XHTML as a string in the response. 
    /// </summary>
    public bool ExtractOnly { get; set; } 
```

如果要索引提取的内容，请不要将此参数设置为 true。

# java - 使用 displaytag 导出

> ID：15701390
> 
> 赞同：-2
> 
> 时间：2013-03-29T10:23:58.563
> 
> 标签：java, servlets, displaytag

我正在使用 displaytag 标签库来导出数据，但我的数据是这样出来的：

```
<a href=../status?status_index="78190" /a> 
```

但是我希望在导出期间剥离 HTML 标记，以便只导出实际数据。

例如，我想要的唯一数据不是 url 应该是： `78190`

代码：

```
<display:table name="bulkDetails" export="true" pagesize="100" id="row" sort="list">
    <display:column title="REQUESTID" sortable="true">
        <c:url value="../Status" var="url">
            <c:param name="Status_Index" value="${row.REQUESTID}"/>
        </c:url>
        <a href=${url}>${row.REQUESTID}</a>
    </display:column> 
```

我`displaytag.properties looks`是这样的：

```
basic.empty.showtable=true 
export.excel=true 
export.csv=true 
export.xml=false 
export.pdf=false 
export.excel.class=org.displaytag.export.ExcelView 
#export.excel.class=org.displaytag.export.CsvView 
# if set, file is downloaded instead of opened in the browser window 
export.excel.filename=report.xls 
export.csv.include_header=true 
export.csv.filename=report.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:38:29.613

您需要为显示和导出列定义不同的媒体类型：

```
<display:table name="bulkDetails" export="true" pagesize="100" id="row" sort="list">
    <display:column title="REQUESTID" sortable="true" media="html">
        <c:url value="../Status" var="url">
            <c:param name="Status_Index" value="${row.REQUESTID}"/>
        </c:url>
        <a href=${url}>${row.REQUESTID}</a>
    </display:column> 

    <display:column title="REQUESTID" sortable="true" media="excel">
        ${row.REQUESTID}
    </display:column> 
```

本质上这是同一列的重复，在浏览器中它将包含`REQUESTID`一个链接，而在导出的版本中它将只包含实际数字。

这里有一个类似的问题：[DisplayTag Export and Links](https://stackoverflow.com/questions/5680920/displaytag-export-and-links?rq=1)

# html - Java EE Web App - 图像路径配置

> ID：15701391
> 
> 赞同：0
> 
> 时间：2013-03-29T10:23:59.897
> 
> 标签：html, image, jakarta-ee, web-applications

我已经实现了图像上传功能，但我面临其路径配置的问题。

我想将上传的图像存储在 webapp 根目录之外，因为每次我取消部署应用程序时，它都会删除应用程序中的图像。

现在，我可以通过从属性文件 [say C:\images] 获取路径来存储上传的文件，但是当我在其中使用该路径时，它不会在网页中显示该文件。

能否请您告诉我如何获取 img src 标签中的绝对路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:11:53.973

出于安全原因，您不能引用 webapp 根目录之外的文件。您将需要使用虚拟目录。这些会将外部路径映射到可访问的 URL，因此 c:\images 可以作为 myapp.com/myapp/images/ 访问

这种事情特定于您正在运行的应用程序服务器，因此您需要检查系统的文档以使其工作。

# blackberry - 如何在黑莓的联系人列表中提供全选选项菜单？

> ID：15701392
> 
> 赞同：0
> 
> 时间：2013-03-29T10:24:01.480
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我正在尝试在我的应用程序中创建一个设备联系人列表，我必须在其中提供一个**全选**复选框。检查时它应该选择所有联系人并为所有联系人创建一个字符串缓冲区，以便我可以使用它向所有选定的联系人发送邮件。

到目前为止，我可以选择一个复选框，但无法创建全选菜单。我附上了我正在使用的代码。

```
public class CheckboxListField extends VerticalFieldManager implements ListFieldCallback, FieldChangeListener {
    private static String [] selectedContacts = new String[]{};
    private ChecklistData[] mListData = new ChecklistData[] {};
    private ListField mListField;
    private Vector mContacts;
    private SendEmail sendEmail;
    private int i;
    public static StringBuffer emailString = new StringBuffer();
    private MenuItem mMenuItemToggle = new MenuItem(
            "Change Option", 0, 0) {
        public void run() {
            toggleItem();
        };
    };

    private MenuItem mMenuItemGet = new MenuItem("Get", 0,
            0) {
        public void run() {
            StringBuffer sbi = new StringBuffer();
            for (int i = 0; i < mListData.length; i++) {
                ChecklistData checkboxField = mListData[i];
                if (checkboxField.isChecked()) {
                    sbi.append(checkboxField.getStringVal()).append(checkboxField.getContactNumber())
                    .append("\n");
                }
            }

        }
    };
    private ButtonField _inviteButton;

    // A class to hold the Strings in the CheckBox and it's checkbox state
    // (checked or unchecked).
    private class ChecklistData {
        private String _stringVal;
        private boolean _checked;
        private String _telNumber;

        ChecklistData(String stringVal,String telNumber , boolean checked) {
            _stringVal = stringVal;
            _checked = checked;
            _telNumber = telNumber;

        }

        // Get/set methods.
        private String getStringVal() {
            return _stringVal;
        }

        private boolean isChecked() {
            return _checked;
        }

        //Contact Info
        private String getContactNumber() {
            return _stringVal;
        }

        // Toggle the checked status.
        public boolean toggleChecked() {
            _checked = !_checked;
            return _checked;
        }
    }

    public CheckboxListField() {
        //INVITE BUTTON

        _inviteButton=new ButtonField("Invite Friend");
        _inviteButton.setChangeListener(this);
        _inviteButton.setMargin(2,0,10,0);

        // toggle list field item on navigation click
        mListField = new ListField() {
            protected boolean navigationClick(int status,
                    int time) {
                toggleItem();
                return true;
            };
        };
        // set two line row height
        mListField.setRowHeight(getFont().getHeight() * 2);
        mListField.setCallback(this);

        add(new NullField(NullField.FOCUSABLE));
        add(_inviteButton);
        add(mListField);

        // load contacts in separate thread
        loadContacts.run();
    }

    protected Runnable loadContacts = new Runnable() {
        public void run() {
            reloadContactList();
            // fill list field control in UI event thread
            UiApplication.getUiApplication().invokeLater(
                    fillList);
        }
    };

    protected Runnable fillList = new Runnable() {
        public void run() {
            int size = mContacts.size();
            mListData = new ChecklistData[size];
            for (int i = 0; i < mContacts.size(); i++) {
                BlackBerryContact item = (BlackBerryContact) mContacts
                .elementAt(i);
                String displayName = getDisplayName(item);
                String telContact = getContact(item);
                mListData[i] = new ChecklistData(
                        displayName,telContact , false);
            }
            mListField.setSize(size);
        }
    };

    protected void toggleItem() {
        // Get the index of the selected row.
        int index = mListField.getSelectedIndex();
        if (index != -1) {
            // Get the ChecklistData for this row.
            ChecklistData data = mListData[index];

            // Toggle its status.
            data.toggleChecked();

            // Invalidate the modified row of the ListField.
            mListField.invalidate(index);

            BlackBerryContact contact = (BlackBerryContact) mContacts
            .elementAt(mListField
                    .getSelectedIndex());

            String email= contact.getString(Contact.EMAIL, 0);

            emailString = emailString.append(email+",");
        }
    }

    protected void makeMenu(Menu menu, int instance) {
        menu.add(mMenuItemToggle);
        menu.add(mMenuItemGet);
        super.makeMenu(menu, instance);
    }

    private boolean reloadContactList() {
        try {
            ContactList contactList = (ContactList) PIM
            .getInstance()
            .openPIMList(PIM.CONTACT_LIST,
                    PIM.READ_ONLY);

            Enumeration allContacts = contactList.items();
            mContacts = enumToVector(allContacts);
            mListField.setSize(mContacts.size());
            return true;
        } catch (PIMException e) {
            return false;
        }
    }

    // Convert the list of contacts from an Enumeration to a Vector
    private Vector enumToVector(Enumeration contactEnum) {
        Vector v = new Vector();

        if (contactEnum == null)
            return v;

        while (contactEnum.hasMoreElements()) {
            v.addElement(contactEnum.nextElement());
        }

        return v;
    }

    public void drawListRow(ListField list,
            Graphics graphics, int index, int y, int w) {
        Object obj = this.get(list, index);

        if (list.getSelectedIndex() != index) {
            graphics.setBackgroundColor(index % 2 == 0 ? Color.WHITE
                    : Color.LIGHTGRAY);
            graphics.clear();
            //list.setFocus();
        }

        if (obj != null) {
            ChecklistData currentRow = (ChecklistData) obj;
            StringBuffer rowString = new StringBuffer();

            if (currentRow.isChecked()) {
                rowString
                .append(Characters.BALLOT_BOX_WITH_CHECK);
            } else {
                rowString.append(Characters.BALLOT_BOX);
            }
            // Append a couple spaces and the row's text.
            rowString.append(Characters.SPACE);
            rowString.append(Characters.SPACE);
            rowString.append(currentRow.getStringVal());
            // Draw the text.
            graphics.drawText(rowString.toString(), 0, y,
                    0, w);

        } else {
            graphics.drawText("No rows available.", 0, y,
                    0, w);
        }
    }

    public static String getDisplayName(Contact contact) {
        if (contact == null) {
            return null;
        }
        String displayName = null;
        // First, see if there is a meaningful name set for the contact.
        if (contact.countValues(Contact.NAME) > 0) {
            final String[] name = contact.getStringArray(
                    Contact.NAME, 0);
            final String firstName = name[Contact.NAME_GIVEN];
            final String lastName = name[Contact.NAME_FAMILY];
            if (firstName != null && lastName != null) {
                displayName = firstName + " " + lastName;
            } else if (firstName != null) {
                displayName = firstName;
            } else if (lastName != null) {
                displayName = lastName;
            }
            if (displayName != null) {
                final String namePrefix = name[Contact.NAME_PREFIX];
                if (namePrefix != null) {
                    displayName = namePrefix + " "
                    + displayName;
                }
                return displayName;
            }
        }
        return displayName;
    }

    // Returns the object at the specified index.
    public Object get(ListField list, int index) {
        Object result = null;
        if (mListData.length > index) {
            result = mListData[index];
        }
        return result;
    }

    // Returns the first occurrence of the given String,
    // beginning the search at index, and testing for
    // equality using the equals method.
    public int indexOfList(ListField list, String p, int s) {
        return -1;
    }

    // Returns the screen width so the list uses the entire screen width.
    public int getPreferredWidth(ListField list) {
        return Graphics.getScreenWidth();
        // return Display.getWidth();
    }

    //GET EMAIL IDS FROM CONTACT
    public static String getContact(Contact contact){
        if (contact == null) {
            return null;
        }
        String telNumber=null;

        telNumber = contact.getString(Contact.TEL, 0);
        telNumber = "[ "+telNumber+" ]";
        System.out.println(telNumber);

        return telNumber;
    }

    public void fieldChanged(Field field, int context) {
        ChecklistData checklistData = new ChecklistData("","", false);
        if(field==_inviteButton){
            if(!checklistData.toggleChecked()){
                UiApplication.getApplication();
                synchronized (Application.getEventLock()){
                    UiApplication.getUiApplication().pushScreen(new InviteFriendEmailScreen());
                }
            }else{
                //emailId = contact.getString(Contact.EMAIL, 0);

                String mailBody =": "+Jxa.loginUserName+" invited you on NaijaPings app. Please download NaijaPings Android app from here "+"http://appworld.blackberry.com/webstore/content/77264/?lang=en" ;
                sendEmail=new SendEmail(mailBody);
                sendEmail.Email(emailString.toString(),Constant.emailSubject);
                emailString=null;
            }

        }
    }

} 
```

请建议我并帮助我创建这个特殊的。

在这里，在**Invite Button下方和创建列表之前，我需要带有文本****Select All**的复选框。 ![在此处输入图像描述](../Images/1a634f944496d7df70be763eee458eda.png)

# android - 触摸图像时播放声音

> ID：15701394
> 
> 赞同：0
> 
> 时间：2013-03-29T10:24:14.513
> 
> 标签：android, coordinates, android-imageview, touch-event, soundpool

正在开发一个应用程序，当用户触摸图像时播放声音。我创建自己的声音文件。在这种情况下，我有 3 个疑问，

1.  我需要在哪个文件夹中放置声音文件。？？

2.  哪种方法适合播放声音..

3.  我如何检测用户在图像上触摸的位置，因为当用户在不同位置触摸时我需要播放不同的声音。

希望你能理解我的想法......请帮助我......

```
public boolean onTouch(View v, MotionEvent event)
{
    touchEvent(event);
    return true;
}

private void touchEvent(MotionEvent event)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:28:25.897

**1.**您应该将声音文件放在`/res/raw`文件夹中。

**2.**使用以下代码播放声音

```
MediaPlayer mp = MediaPlayer.create(activity,R.raw.sound_file);
                 mp.start(); 
```

**3.** 附加一个`TouchListener`将允许您处理`MotionEvent`包含实际触摸位置的 ；只需执行以下操作

```
if(event.getX() < image.width / 2) { 
    // touch on left 
} else { 
    // touch on right;
} 
```

您还可以通过添加更多逻辑来进一步优化您的触摸位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:26:36.863

我需要在哪个文件夹中放置声音文件。？？

`raw folder`如果 res 中不存在，则创建一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:28:38.087

**res/raw 文件夹中的声音文件**

首先，获取 x 和 y 坐标，然后将您的条件设置为 onTouch 并尝试使用以下代码播放音乐

```
MediaPlayer mPlayer2;
mPlayer2= MediaPlayer.create(this, R.raw.music);
        mPlayer2.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:30:26.223

`In which folder i need to place sound file.??`

通常文件（mp3、csv、pdf）文件放在`Raw`文件夹内。

`Which method is suitable for playing sounds..`

没有这么简单的方法。您需要使用[MediaPlayer 类](http://developer.android.com/guide/topics/media/mediaplayer.html)

`how can i detect where the user touch on the image, because i need to play different sound when user touches at different places.`

将 a 添加`onClickEventListener`到 ImageView 并从那里调用 MediaPlayer 实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-12T04:04:49.190

我认为您可以使用 Event OnClick

```
 MediaPlayer song;
    image.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            song=MediaPlayer.create(this, R.raw.songname);
            song.start();
        }
    }); 
```

# tsql - T-SQL查询一张表，获取其他表值的存在与否

> ID：15701396
> 
> 赞同：1
> 
> 时间：2013-03-29T10:24:23.927
> 
> 标签：tsql, sql-server-2005

我不确定这种类型的查询叫什么，所以我无法正确搜索它。我有两个表，表 A 有大约 10,000 行。表 B 具有可变数量的行。

我想编写一个查询来获取表 A 的所有结果，但添加了一个列，该列的值是一个布尔值，表示结果是否也出现在表 B 中。

我编写了这个查询，它可以工作但速度很慢，它不使用布尔值，而是使用零或一的计数。任何建议的改进都将被欣然接受：

```
SELECT u.number,u.name,u.deliveryaddress, 
            (SELECT COUNT(productUserid) 
             FROM ProductUser 
             WHERE number = u.number and productid = @ProductId) 
             AS IsInPromo

FROM Users u 
```

**更新**

我已经在启用了实际执行计划的情况下运行了查询，我不确定如何显示结果，但各种成本是：

嵌套循环（左半连接）：29%]

聚集索引扫描（用户表）：41%

聚集索引扫描（ProductUser 表）：29%

**NUMBERS** users 表中有 7366 个用户，目前 productUser 表中有 18 行（尽管这会改变，可能有数千个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:26:02.323

您可以`EXISTS`在找到第一行后使用短路，而不是`COUNT`-ing 所有匹配的行。

SQL Server 没有布尔数据类型。最接近的等价物是`BIT`

```
SELECT u.number,
       u.name,
       u.deliveryaddress,
       CASE
         WHEN EXISTS (SELECT *
                      FROM   ProductUser
                      WHERE  number = u.number
                             AND productid = @ProductId) THEN CAST(1 AS BIT)
         ELSE  CAST(0 AS BIT)
       END AS IsInPromo
FROM   Users u 
```

RE：“我不确定这种类型的查询叫什么”。这将给出一个半连接的计划。有关更多信息，请参阅[CASE 表达式](http://blogs.msdn.com/b/craigfr/archive/2006/08/23/715306.aspx)中的子查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:31:09.007

您使用的是哪种管理系统？试试这个：

```
SELECT u.number,u.name,u.deliveryaddress, 
            case when COUNT(p.productUserid) > 0 then 1 else 0 end
FROM Users u
left join ProductUser p on p.number = u.number and productid = @ProductId
group by u.number,u.name,u.deliveryaddress 
```

UPD：使用 mssql 可能会更快

```
;with fff as
(
    select distinct p.number  from ProductUser p where p.productid = @ProductId
)
select u.number,u.name,u.deliveryaddress,  
    case when isnull(f.number, 0) = 0 then 0 else 1 end 
from Users u left join fff f on f.number = u.number 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T10:33:28.710

由于您似乎关心性能，因此此查询可以执行得更快，因为这将导致`index seek`两个表与`index scan`:

```
SELECT u.number,
       u.name,
       u.deliveryaddress,       
       ISNULL(p.number, 0)  IsInPromo
FROM   Users u 
       LEFT JOIN ProductUser p ON p.number = u.number
WHERE   p.productid = @ProductId 
```

# javascript - Parsley 验证未运行（即使在纯 html 文件上）

> ID：15701400
> 
> 赞同：2
> 
> 时间：2013-03-29T10:24:47.077
> 
> 标签：javascript, validation, twitter-bootstrap, parsley.js

我喜欢[Parsley](http://parsleyjs.org/documentation.html)的表单验证风格，在表单元素上使用漂亮的背景颜色（绿色 -> 正确，红色 -> 错误），但我不知道如何实现这一点。

我按照每行的说明行，但它不起作用。也许我的其他 js 资源扰乱了流程，所以我创建了一个普通的新 html 站点，但它也不起作用。

我究竟做错了什么？

我的普通 .html 看起来像这样：

```
<html>
<head>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script type="text/javascript" src="pars/parsley.js"></script>
</head>

<body>
<form id="demo-form" data-validate="parsley">
  <label for="fullname">Full Name * :</label>
  <input type="text" id="fullname" name="fullname" data-required="true" />
  <input type="submit" value="ok" />
</form>
</body>
</html> 
```

我将字段留空，单击“确定”，没有任何反应。

我能够（不要问我如何）在短时间内运行 Parsley，但没有花哨的背景颜色。你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T23:06:22.877

Parsley 不管理颜色/用户界面。它只是根据验证添加/删除 css 类。

默认情况下：`parsley-error`和`parsley-success`。它们可以在欧芹配置中更改。

但是你仍然需要做一些 css 来判断`parsley-success`例如有绿色背景和`parsley-error`红色背景。

# jquery - MVC 和模型设计 - 每个 json 动作一个？每个视图一个？

> ID：15701405
> 
> 赞同：0
> 
> 时间：2013-03-29T10:25:08.557
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jsonresult

我在 Microsoft MVC4 上，我开始有很多模型，我想重新组织它们。

我大量使用 jQuery Ajax 调用来填充数据，因此我有：

*   很少有返回简单视图的操作（即空的 html 表）

*   许多返回 JsonResult 的操作，用于填充表/列表项等

在某些动作中，相同的元素（'item'）与一些信息（即列）一起显示，在其他动作中，它与其他信息一起显示。

我的两个问题：

*   为了清楚起见，我应该为每个返回 Json 结果的操作创建一个模型吗？或者我不应该打扰，我应该继续使用匿名投影？

*   我应该有基本模型（即“简单”模型）和从基本模型继承的扩展模型吗？或者我应该保持模型分开，从而产生更清洁（但更不易维护？）的结构？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:28:07.057

> 为了清楚起见，我应该为每个返回 Json 结果的操作创建一个模型吗？或者我不应该打扰，我应该继续使用匿名投影？

匿名项目非常适合 JSON 结果。使单元测试更难一些，但由您决定是否要在此处引入视图模型。

> 我应该有基本模型（即“简单”模型）和从基本模型继承的扩展模型吗？或者我应该保持模型分开，从而产生更清洁（但更不易维护？）的结构？

您可以在视图模型中继承。

# objective-c - 检查 NSStatusItem 在系统菜单栏中是否可见？

> ID：15701410
> 
> 赞同：0
> 
> 时间：2013-03-29T10:25:29.937
> 
> 标签：objective-c, macos, cocoa, nsstatusitem

是否可以检查 NSStatusItem 在系统菜单栏中是否可见？有时不是因为用户有太多的状态项和活动的应用程序菜单栏大小。

我可以通过“hack”检查状态项的位置，如下所示：

```
statusRect = [[_statusItem valueForKey:@"window"] frame]; 
```

但我不能做同样的事情是可见的：（它总是返回真）

```
BOOL visible = [[_statusItem valueForKey:@"window"] isVisible]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:37:20.767

我不相信没有真正糟糕的黑客是可行的

### 我的第一个：

在您的 NSStatusItem 中有一个视图，并将 window.isVisible 与视图的 visibleRect 结合起来。无论如何，状态栏都不能被窗口遮挡。
=> 没用

### 2.尝试

在您的 NSStatusItem 中有一个视图，并尝试从[正确的方式来确定是否绘制了 NSView](https://stackoverflow.com/questions/5407248/proper-way-to-determine-if-nsview-is-drawn)
=> 不起作用

### 真正邪恶的黑客可能会奏效

通过辅助功能 api 模拟鼠标点击并查看您的视图是否收到事件：

* * *

我试过的

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    item = [[[NSStatusBar systemStatusBar] statusItemWithLength:NSSquareStatusItemLength] retain];
    item.title = @"TEST";
    view = [[DDQuickMenuStatusItemView alloc] init];
    view.item = item;
    view.title = item.title;
    item.view = view;

    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(checkVisible:) userInfo:nil repeats:YES];
}

- (void)checkVisible:(id)timer {
    NSLog(@"NOT WORKING vis: %d", (view.window.isVisible && !NSEqualRects(view.visibleRect, NSZeroRect)));
    NSLog(@"NOT WORKING isDrawn: %d", (view.isDrawn));
} 
```

# html - 设置“直接回复此电子邮件”的最简单方法是什么？

> ID：15701413
> 
> 赞同：1
> 
> 时间：2013-03-29T10:25:54.213
> 
> 标签：html, email, postfix-mta

我有一个人们通过私人信息交流的网站。我向这些人发送 npemail 通知。

在电子邮件通知中，我希望用户能够点击电子邮件回复。然后，我的系统将分析主题行并将消息写入该用户的数据库。

我设置了一个电子邮件服务器（按照说明安装 dovecot 和 postfix）。然而，这是一个非常基本的设置，我完全不知道如何实现我刚才描述的系统。

我正在寻找一个很好的概述答案或通过此教程的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:49:35.477

您可以利用一个技巧：将邮件`user+extension@domain`发送到与发送到的邮件相同的邮箱`user@domain`。我会用它而不是主题行来找出回复是关于哪条消息的——这让用户可以选择一个自定义主题行。

要让特定用户的邮件直接进入程序，最简单的方法可能是将`.forward`文件放入他的主目录。在该文件中，写入`| <path to executable>`. 完整的邮件（包括标题）将通过标准输入传递给指定的可执行文件，并且将`EXTENSION`设置一些带有元数据（例如）的环境变量。

你可能想做[`man 8 local`](http://www.postfix.org/local.8.html).

# azure - SQL Azure 上奇怪的“隐形数据库错误”？

> ID：15701415
> 
> 赞同：0
> 
> 时间：2013-03-29T10:26:00.077
> 
> 标签：azure, azure-sql-database

我有一个使用以下 SQL Azure 连接字符串运行的项目（比如**project1 ）：**

```
Server=tcp:....database.windows.net,1433;Database=project1;User ID=... 
```

数据库*project1*存在，并且 project1 上的所有内容都运行良好。

然后我正在处理第二个项目 ( **project2** )，并将其作为 Azure 中的第二个云服务上传。我打算将其数据存储在不同模式下的数据库*project1*中（因为有计划合并两个项目），但意外地我使用以下连接字符串部署了该项目：

```
Server=tcp:....database.windows.net,1433;Database=project2;User ID=... 
```

project2 上的一切工作正常，但后来我注意到 project2 在数据库*project1*中的表是空的，尽管我已经在云服务中输入了数据。然后我注意到连接字符串指向一个数据库*project2*。

为了清楚起见，没有名为*project2*的 SQL 数据库。我检查了 SQL Management Studio 以及 Silverlight SQL Azure 数据库客户端。

我无法解释这一点。不知何故，Windows Azure 或 SQL Azure 一定隐式地创建了一个数据库*project2*，因为我能够在云服务上工作。一定有某个“隐藏的地方”，project2 存储了它的数据。

这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:33:16.070

如果你尝试连接一个不存在的数据库，你会自动连接到主数据库，至少我上次尝试的情况是这样。但是 master 在云中是只读的，所以我希望大多数应用程序在连接到 master 时都会失败。SQL 数据库不会自动为您创建数据库，所以也不会。可能是您在代码中捕获/消除错误，因此您无法告诉您是否真的连接到 master？

# java - 簇配置中石英的奇怪行为

> ID：15701417
> 
> 赞同：7
> 
> 时间：2013-03-29T10:26:04.760
> 
> 标签：java, cluster-computing, quartz-scheduler, job-scheduling

我正在开发定期服务。

该应用程序是使用 JDK 1.6、Spring Framework 2.5.6 和 Quartz 1.8.4 开发的，用于调度作业。

我有两台使用 WebLogic Server 10.3.5 的集群服务器。

有时，石英的调度似乎变得疯狂。分析它发生的条件，集群服务器之间似乎存在大于一秒的时钟“不同步”。然而这种不同步并不总是由于服务器的系统时间，有时即使机器的时钟同步，JVM也会引入一点“延迟”。

有没有人遇到过同样的问题？有没有办法解决它？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T19:26:39.697

在 2.2.1 版的 Oracle 上使用 JDBC-JobStore 时，我遇到了同样的问题。

就我而言，我在单个节点上运行 Quartz。但是，我注意到数据库机器与运行 Quartz 的节点没有时间同步。

我在数据库机器和运行 Quartz 的机器上都激活了 ntpd，几分钟后问题就消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-20T09:56:12.183

这个问题最常发生是因为集群节点中的时间不同步。但是，它也可能是由于应用程序与 DB 的连接不稳定造成的。这种连接问题可能是由于网络问题（如果应用服务器和数据库服务器在不同的机器上）或性能问题（数据库服务器由于某种原因处理请求非常慢）引起的。

在这种情况下，可以通过增加 org.quartz.jobStore.clusterCheckinInterval 值来减少出现此问题的机会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T09:00:07.860

我正在使用 Quartz 2.2.1，每当发生集群恢复时，我都会注意到一个奇怪的行为。

例如，即使机器已与 ntpdate 服务同步，我也会在集群实例恢复时收到以下消息：

org.quartz.impl.jdbcjobstore.JobStoreSupport findFailedInstances “<em>此调度程序实例 () 仍处于活动状态，但已被集群中的另一个实例恢复。这可能会导致不一致的行为”。

[这里](http://blogs.adobe.com/dmcmahon/2012/07/17/livecycle-es2-this-scheduler-instance-is-still-active-but-was-recovered-by-another-instance-in-the-cluster/)说解决方案是：“***同步所有集群节点上的时间，然后重新启动集群。消息不应再出现在日志中。”***

由于每台机器都是同步的，这种“延迟”可能是由 JVM 引入的？我不知道...：（

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-09T12:22:01.557

我遇到了同样的问题。首先，您应该检查集群的日志和时间同步。

标记是日志中的消息：

```
08-02-2018 17:13:49.926 [QuartzScheduler_schedulerService-pc6061518092456074_ClusterManager] INFO  o.s.s.quartz.LocalDataSourceJobStore - ClusterManager: detected 1 failed or restarted instances.

08-02-2018 17:14:06.137 [QuartzScheduler_schedulerService-pc6061518092765988_ClusterManager] WARN  o.s.s.quartz.LocalDataSourceJobStore - This scheduler instance (pc6061518092765988) is still active but was recovered by another instance in the cluster. 
```

当第一个节点观察到第二个节点不存在超过`org.quartz.jobStore.clusterCheckinInterval`它从集群中注销第二个节点并删除其所有触发器时。

看一下同步算法：`org.quartz.impl.jdbcjobstore.JobStoreSupport.ClusterManager#run`

当“签入”需要很长时间时，可能会发生这种情况。

我的解决方案是覆盖`org.quartz.impl.jdbcjobstore.JobStoreSupport#calcFailedIfAfter`. 硬编码值“7500L”看起来像宽限期。我将其替换为参数。

注意：如果您使用 SchedulerFactoryBean 注册新的 JobStoreSupport 子类时要小心。Spring强行注册自己的店铺`org.springframework.scheduling.quartz.LocalDataSourceJobStore`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-30T17:56:33.153

这个问题几乎总是归因于时钟偏差。即使你认为你已经正确设置了 NTPd，仍然会发生一些事情：

*   我们*认为*我们的 NTPd 工作正常（并且配置正确），但在 AWS 上，防火墙阻止了 NTP 端口。UDP 123。同样，这是 UDP 而不是 TCP。
*   如果您不经常同步，您将累积时钟偏差。众所周知，许多主板上计时器的准确性是不稳定的。因此，随着时间的推移（几天），您会突然收到这些 Quartz 错误。超过 5 分钟，您会遇到许多安全错误，例如 Kerberos。

所以这个故事的寓意是与 NTPd 同步，但经常这样做并验证它是否确实有效。

# jquery - 如何在 JSF 数据表中添加行详细信息？

> ID：15701418
> 
> 赞同：0
> 
> 时间：2013-03-29T10:26:10.783
> 
> 标签：jquery, jsf, datatable, row

我需要在每个 JSF dataTable 行中添加“+”图标。单击该图标时，该行应展开以显示有关该行中对象的相关详细信息。我需要知道，JSF 中是否已经存在这种性质的东西？

我正在尝试完成这样的事情： [http ://www.datatables.net/examples/api/row_details.html](http://www.datatables.net/examples/api/row_details.html)

请告诉我，是否有人对此有想法。仅供参考，到目前为止，我正在使用 tomahawk 的数据表。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:46:20.367

您可以为各种组件选择 PrimeFaces，

至于您当前的需求，请查看[此示例](http://www.primefaces.org/showcase/ui/datatableExpandableRows.jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:43:57.167

我已经使用 t:dataTable 的 varDetailToggler 完成了这项工作，因为 tomahawk 已经是项目的一部分，然后使用 detailStamp facet 指定要显示为行详细信息的组件。代码如下所示：

```
<t:dataTable var="node"
    border="1"
    value="#{tableDataModel}"
    varDetailToggler="detailToggler">
    <t:column >
        <h:commandLink rendered="#{detailToggler.currentDetailExpanded}" action="#{detailToggler.toggleDetail}">
            <h:graphicImage value="/images/minus.png" style="border:0" />
        </h:commandLink>
        <h:commandLink rendered="#{!detailToggler.currentDetailExpanded}" action="#{detailToggler.toggleDetail}">
            <h:graphicImage value="/images/plus.png" style="border:0" />
        </h:commandLink>
    </t:column>
    <t:column >
    ....
    </t:column>
    <t:column >
    ....
    </t:column>
    <f:facet name="detailStamp">
                <h:outputText value="Row details here...Can be any component"/>
    </f:facet>
</t:dataTable> 
```

# sql-server-2008 - 将 ISO 格式的日期转换为 DATETIME

> ID：15701421
> 
> 赞同：2
> 
> 时间：2013-03-29T10:26:16.627
> 
> 标签：sql-server-2008, type-conversion

我正在使用 SQL Server Management Studio 编写 SQL 查询，并且有一些 ISO 日期格式的 NVARCHAR 类型值（例如：）`20130302T164800`。我需要将它们转换为 DATETIME

我尝试了该`Convert()`功能，但它导致异常：

> 将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:04:29.213

问题是您的字符串*不是*可接受的 SQL Server 日期时间格式。SQL Server 识别**ISO8601**格式，即：

```
yyyy-mm-ddThh:mi:ss.mmm 
```

上面的日期是**2013-03-02T16:48:00**。

请参阅[日期和时间样式](http://msdn.microsoft.com/en-gb/library/ms187928.aspx)部分。

所以下面的语句会失败：

```
declare @date nvarchar(max) = '20130302T164800'

select convertedDate = cast(@date as datetime) 
```

如果将字符串转换为**ISO8601**格式，则该语句将起作用：

```
declare @date nvarchar(max) = '2013-03-02T16:48:00'

select convertedDate = cast(@date as datetime) 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/d41d8/11757)。

您可以将格式更新为 SQL Server 可识别的格式，并在一个语句中将字符串转换为日期时间：

```
declare @date nvarchar(max) = '20130302T164800'

select cast(left(@date, 4)
  + '-' + substring(@date,5,2)
  + '-' + substring(@date,7,5)
  + ':' + substring(@date,12,2)
  + ':' + substring(@date,14,2) as datetime) 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/d41d8/11760)。

这只是一个示例，您可以将其转换为 SQL Server 识别的任何格式，但这会将其转换为**ISO8601**。基本上，将其转换为不同的格式以允许转换工作。

# javascript - 如何使用 jQuery FooTable 使 Telerik RadGrid 响应

> ID：15701430
> 
> 赞同：2
> 
> 时间：2013-03-29T10:26:53.317
> 
> 标签：javascript, jquery, telerik, responsive-design, telerik-grid

关于这个要求有两个问题：

1-我正在尝试在编辑表单 mod 中打开用户控件，在用户控件中我使用了 footable（参考链接 themergency.com/footable/）和 asp gridview。footable 功能在用户控件中不起作用，如果我只是在另一个页面上打开该控件，而不是在 radgrid 中的行编辑表单用户控件中，footable 工作正常，telerik 和其他 jquery 插件之间是否存在冲突......？

2 - 我想让 Telerik radgrid 表现得像脚一样（参考链接[http://themergency.com/footable-demo/demo.htm](http://themergency.com/footable-demo/demo.htm)）如果可能的话请帮忙

# javascript - 使用相同功能的 JavaScript 打开不同的链接

> ID：15701437
> 
> 赞同：2
> 
> 时间：2013-03-29T10:27:30.860
> 
> 标签：javascript, getelementsbyclassname

我的 JS 有点问题。我有几个相同的链接**onclick**。我的问题是当点击一个链接时，第一个**onclick**显示。

**我的 HTML**

```
<li>
    <a href="#" onclick="openRookie();" class="rookie">John Doe</a>
    <p class="open">
        <a href="#">Portfolio</a>
        <a href="#">Twitter</a>
        <a href="#">Dribbble</a>
    </p>
</li>
<li>
    <a href="#" onclick="openRookie();" class="rookie">John Doe</a>
    <p class="open">
        <a href="#">Portfolio</a>
        <a href="#">Twitter</a>
        <a href="#">Dribbble</a>
    </p>
</li>
<li>
    <a href="#" onclick="openRookie();" class="rookie">John Doe</a>
    <p class="open">
        <a href="#">Portfolio</a>
        <a href="#">Twitter</a>
        <a href="#">Dribbble</a>
    </p>
</li> 
```

**我的JS**

```
var s = document.getElementsByClassName('open');
function openRookie() {
    for(var i=0; i<s.length; i++) {
        if (s[i].style.maxHeight !== "20px") {
            s[i].style.maxHeight = "20px";
            s[i].style.marginTop = "10px";
        } else {
            s[i].style.maxHeight = "0";
            s[i].style.marginTop = "0";
        }
        return false;
    }
} 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:30:05.307

你必须给`<p>`你想要显示/隐藏的 id 一个你可以到达然后使用的 id `getElementById`。ID 应作为参数传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:48:36.967

您可以通过定位触发事件的元素来重用相同的功能。然后使用这个元素，就可以得到事件所涉及的不同的html节点。

例如看到这个[http://jsfiddle.net/65Xxw/1/](http://jsfiddle.net/65Xxw/1/)

```
function openRookie(){

    // get the anchor which has been clicked.
    var elm = event.target;
    // get the parent node which is the li tag
    var parent = elm.parentNode;
    // get the child of the li tag which is a paragraph. 
    var paragraphs = parent.getElementsByTagName('p');

    // paragraphs is an array. we know there is only one so can just show.
    paragraphs[0].style.display = "block";

    // prevent the link from doing it's natural thing.
    return false;

} 
```

如果您最终`<p>`在`<li>`

# java - 具有继承策略的休眠二级缓存 (ehcache) = InheritanceType.SINGLE_TABLE

> ID：15701439
> 
> 赞同：2
> 
> 时间：2013-03-29T10:27:40.743
> 
> 标签：java, hibernate, inheritance, ehcache

我想缓存从配置为的父级继承的子实体`strategy = InheritanceType.SINGLE_TABLE`。我想对它们中的每一个应用不同的缓存策略，其中一些我根本不想被缓存。这可能吗？我在junit测试中对其进行了测试，它似乎不起作用。我只能缓存父级，这会导致所有子级以相同的方式缓存。当我尝试缓存孩子时，根本没有缓存发生。我在官方文档中找不到任何内容，有人可以帮忙吗？

# java - 在另一个列表中添加不同类型的列表

> ID：15701440
> 
> 赞同：0
> 
> 时间：2013-03-29T10:27:43.550
> 
> 标签：java, jakarta-ee, casting, arraylist

在我的 Java EE 项目中，我有 2 个`ArrayList`对象：

```
private ArrayList<Sales_personRef> sales_personsRef = new ArrayList<Sales_personRef>();

private ArrayList<Sales_person> sales_persons = new ArrayList<Sales_person>(); 
```

我的问题是：如何在第二个列表中添加我的第一个列表（sales_personsRef）？这些列表有不同的类型，我不能转换它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:32:11.823

如果 Sales_personRef 和 Sales_person 都扩展了另一个类，比如说`Person`，那么您可以将这两种类型都添加到`ArrayList<Person>`.

请记住，如果您这样做，那么您以后从列表中获得的内容将是`Person`. 然后，您必须将其转换回原来的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:34:03.277

通过将您的第二个列表声明为`List<Object>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:34:22.360

您需要将第一个列表的每个项目转换为第二个列表接受的项目

```
sales_persons.addAll(convertSalesPersons(sales_personsRef)); 
```

和：

```
private static Collection<? extends Sales_person> convertSalesPersons(ArrayList<Sales_personRef> sales_persons) {
    List<Sales_person> persons = new ArrayList<Sales_person>();
    for (Sales_personRef sales_personRef : sales_persons) {
        persons.add(converSalesPersonRefToSalesPerson(sales_personRef));
    }
    return persons;
}
private static Sales_person converSalesPersonRefToSalesPerson(Sales_personRef sales_personRef) {
    //implement the conversion here
    return new Sales_person();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:38:34.110

你必须在这里使用多态概念。让父类说人，然后扩展它可以工作

# mysql - 从具有不同id的同一个表中获取具有共同值的行

> ID：15701444
> 
> 赞同：2
> 
> 时间：2013-03-29T10:27:48.363
> 
> 标签：mysql

我刚刚回顾了这个[问题](https://stackoverflow.com/questions/513098/get-common-rows-within-the-same-table)，但我需要的是完全不同的东西。

但是，我有这张桌子：

```
team_players_order 
    (team_id, 
    player_id, 
    ordering, 
    captain
    ) 
```

该表存储了球队 ID 列表以及属于每个球队的球员 ID（每个球队可以有 0-15 名球员）。我想得到的是有共同球员的球队。

我想要比较的团队列表可能是已知的（我有他们的 id）或未知的，那么我可能需要搜索整个表格并比较所有团队。.

这是三个团队的示例数据：

```
 team_id    player_id  ordering   captain    
        117        134        0          N          
        117        55         1          N          
        117        97         2          N          
        117        215        3          N          
        117        165        4          N          
        117        221        5          N          
        117        163        6          N          
        117        128        7          N     >> common player     
        117        180        8          N          
        117        96         9          N          
        117        162        10         N          
        117        88         11         N          
        117        229        12         N          
        117        91         13         N          
        117        105        14         N    
    -----------------------------------------------      
        124        88         0          N          
        124        165        1          N          
        124        92         2          N          
        124        130        3          N          
        124        47         4          N          
        124        221        5          N          
        124        30         6          N          
        124        223        7          N          
        124        105        8          Y          
        124        6          9          N          
        124        96         10         N          
        124        120        11         N          
        124        198        12         N          
        124        128        13         N          >> common player
        124        202        14         N  
-----------------------------------------------      
        125        256        0          N          
        125        58         1          N          
        125        10         2          N          
        125        47         3          N          
        125        103        4          N          
        125        167        5          N          
        125        221        6          N          
        125        128        7          N          >> common player
        125        105        8          N          
        125        96         9          Y          
        125        180        10         N          
        125        210        11         N          
        125        229        12         N          
        125        30         13         N          
        125        33         14         N 
```

如您所见，球员 128 是这三支球队中的常见球员。我还需要找到其他常见的玩家。

到目前为止，我尝试过的是以下查询，我猜它是将每个给予团队与所有其他团队进行比较，并获得每个比较单独存在的任何共同球员。

```
SELECT
  t1.team_id,
  t1.player_id,
  t2.team_id,
  t2.player_id
FROM team_players_order AS t1
  INNER JOIN team_players_order AS t2
    ON (t1.team_id != t2.team_id
        AND t1.player_id = t2.player_id)
WHERE t1.team_id IN(117,124,125)
    AND t2.team_id IN(117,124,125)
ORDER BY t1.team_id, t2.team_id 
```

返回：

```
team_id    player_id  team_id    player_id  
117        221        124        221        
117        88         124        88         
117        96         124        96         
117        105        124        105        
117        128        124        128        
117        165        124        165        
117        180        125        180        
117        221        125        221        
117        229        125        229        
117        96         125        96         
117        105        125        105        
117        128        125        128        
124        128        117        128        
124        165        117        165        
124        221        117        221        
124        88         117        88         
124        96         117        96         
124        105        117        105        
124        128        125        128        
124        30         125        30         
124        221        125        221        
124        47         125        47         
124        96         125        96         
124        105        125        105        
125        128        117        128        
125        180        117        180        
125        221        117        221        
125        229        117        229        
125        96         117        96         
125        105        117        105        
125        128        124        128        
125        221        124        221        
125        30         124        30         
125        47         124        47         
125        96         124        96         
125        105        124        105 
```

但我想要的是：

1.  存在于所有捐赠团队中的玩家（通过他们的 ID）
2.  存在于所有球队中的球员。

注意一旦给出，团队列表可能会达到 100 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:41:46.640

拥有是解决方案

**存在于所有球队的球员**

```
select team_id, player_id, count(*) nb from team_players_order
group by player_id 
having nb > 1 
```

**存在于所有捐赠团队中的玩家**

```
select team_id, player_id, count(*) nb from team_players_order
where team_id in (124, 117)
group by player_id 
having nb > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:38:02.263

您可以使用“HAVING COUNT”来了解哪个玩家在多个团队中。

```
SELECT player_id FROM team_players GROUP BY team_id HAVING COUNT(team_id) > 1 
```

并列出在其他球队中有球员的球队：

```
 SELECT team_id FROM team_players GROUP BY team_id HAVING COUNT(player_id) > 1 
```

希望有帮助！

# php - 从 MySQL 数据库下载文件

> ID：15701445
> 
> 赞同：0
> 
> 时间：2013-03-29T10:27:49.133
> 
> 标签：php, mysql, upload, download

我似乎无法在线下载我要上传到 MySQL 数据库的文件，我只能得到纯文本，主要是模糊的标志。在 localhost 虽然下载没问题。我在线检查了我的数据库，并且在本地都在上传表中上传得很好。我先给你看Upload.php（实际上不叫那个，这也不是整个脚本，它是一个大脚本）：

```
if (isset($_POST['verstuur'])) {
$id = NULL;
if($_FILES['userfile']['size'] > 0)
{
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileSize = $_FILES['userfile']['size'];
$fileType = $_FILES['userfile']['type'];

$fp      = fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);

if(!get_magic_quotes_gpc())
{
    $fileName = addslashes($fileName);
}
$query = "INSERT INTO upload (name, size, type, content ) ".
"VALUES ('$fileName', '$fileSize', '$fileType', '$content')";
mysql_query($query) or die('Fout, query mislukt'); 
$query = "SELECT LAST_INSERT_ID() ID";
$result = mysql_query($query);
while($row = mysql_fetch_array($result)){
$id = $row['ID'];
} 
```

}

好的，我有另一个脚本在其中创建下载链接：

```
$query = "SELECT U_ID, name FROM upload WHERE U_ID = '$opvraag[U_ID]'";
$result = mysql_query($query) or die('Error, query failed');
if(mysql_num_rows($result) == 0)
{
 echo "<td>Geen Bijlage</td>";
} 
else
{
 while(list($id, $name) = mysql_fetch_array($result))
 {
     echo '<td><a href="download.php?id='.$opvraag['U_ID'].'">'.$name.'</a></td>';
 }
} 
```

最后我有download.php

```
if(isset($_GET['id'])) 
{
$id    = $_GET['id'];
$query = "SELECT name, type, size, content " .
     "FROM upload WHERE U_ID = '$id'";
$result = mysql_query($query) or die('Fout, query mislukt');
list($name, $type, $size, $content) =  mysql_fetch_array($result);
header("Content-length: $size");
header("Content-type: $type");
header("Content-Disposition: attachment; filename=$name");
echo stripslashes($content);
exit;
} 
```

数据库表：
名称： 类型：
U_ID int(8) AUTO_INCREMENT
name varchar(255)
size int(8)
type text
content blob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:27:56.697

您可以尝试用以下代码替换您`headers()`的 download.php 中的 3 个调用：

```
 header("Accept-Ranges: bytes");
    header("Keep-Alive: timeout=15, max=100");
    header("Content-Disposition: attachment; filename=$name");
    header("Content-type: $type");
    header("Content-Transfer-Encoding: binary");
    header( "Content-Description: File Transfer"); 
```

# c# - Video Class 存在于两个库中

> ID：15701446
> 
> 赞同：4
> 
> 时间：2013-03-29T10:27:59.410
> 
> 标签：c#, video, monogame, video-player

在我的 Monogame 项目中，我需要播放视频。为此，我使用`Video Class`和`VideoPlayer`上课。但是当我开始解决方案时，VS给了我这个错误：

> 错误 1 ​​'c:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\References\Windows\x86\Microsoft.Xna.Framework 中都存在类型 'Microsoft.Xna.Framework.Media.Video' .Video.dll' 和 'c:\Program Files (x86)\MonoGame\v3.0\Assemblies\WindowsGL\MonoGame.Framework.dll'

我需要`VideoPlayer`在 Microsoft.Xna.Framework.Video.dll 中播放视频的类。

我该如何解决这个问题？

如果有帮助，这里是我想播放视频的代码：

```
namespace play
{
    public class PlayVideoClass
    {
        private readonly  Microsoft.Xna.Framework.Media.Video _video;
        private readonly Microsoft.Xna.Framework.Media.VideoPlayer _player;
        private bool _playVideo;

        public PlayVideoClass()
        {
            _video = Game1.Video;
            _player = new Microsoft.Xna.Framework.Media.VideoPlayer();
            _playVideo = true;
        }
        public void Update()
        {
            if (_playVideo)
            {
                if ((int) _player.State == (int)Microsoft.Xna.Framework.Media.MediaState.Stopped)
                {
                    _player.Play( _video);
                    _playVideo = false;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:16:49.353

我认为我对你的反思有更好的解决方案。您应该创建单独的程序集，该程序集仅引用您要使用的程序集（Microsoft.Xna.Framework.Video.dll）。您可以为 Microsoft.Xna.Framework.Media.Video 类型编写一个包装器。您的包装器应该公开您想在应用程序中使用的所有功能。所以现在这个新程序集可以解析正确的类型，因为它只有一个。你的应用程序不需要知道这个冲突，因为它会使用你的类型。

# couchdb - 如何在 IrisCouch 上解锁 CouchDB 实例？

> ID：15701450
> 
> 赞同：0
> 
> 时间：2013-03-29T10:28:05.533
> 
> 标签：couchdb

我想我已经完全填满了我的 IrisCouch 帐户！蒲团似乎不再响应，卷曲产生大量

```
{"error":"not_found","reason":"missing"} 
```

我怀疑这可能是由于我努力实现 URL 重写。

蒲团可以在 openoki.iriscouch.org/_utils 上访问，但没有显示任何数据库。标题“概览”旁边会出现“正在加载”图像。

同样，在 Futon 中，我可以单击“配置”，但根本不会出现任何详细信息。相反，标题“配置”旁边会出现“加载”图像。

类似的响应出现在状态，尝试在测试套件中运行测试（并删除所有管理员）和验证安装。

卷曲：

```
curl -X GET "http://openoki.iriscouch.org/_log"
{"error":"unauthorized","reason":"Authentication required."}

curl -X GET "http://admin:secret@openoki.iriscouch.org/_log"
{"error":"not_found","reason":"missing"}

curl -X GET "http://admin:secret@openoki.iriscouch.org/_config
{"error":"not_found","reason":"missing"}

curl -X GET "http://admin:secret@openoki.iriscouch.org/_active_tasks"
{"error":"not_found","reason":"missing"} 
```

我做的最后一件事是为 openoki.iriscouch.org（和 .com）创建一个虚拟主机和 url 重写。我无法再访问详细信息，但它类似于

```
{ "from":"",
  "to":"/redgreen/_design/teachers/about.html"
} 
```

关于如何重新控制这个烂摊子的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:51:41.997

有一个“[秘密](https://getsatisfaction.com/iriscouch/topics/reset_couchdb)”替代地址：iriscou.ch

所以我只需要访问 openoki.iriscou.ch/_utils 并删除我在配置下添加的虚拟主机部分。

# silverlight - Silverlight 带有 SeparatorVisibility 在 Headerstyle 中折叠

> ID：15701456
> 
> 赞同：0
> 
> 时间：2013-03-29T10:28:31.083
> 
> 标签：silverlight, xaml

我在数据网格列标题中使用属性“SeparatorVisibility”和值“Collapsed”来禁用标题之间的分隔符。当我的导航器中的缩放为“正常”时，它可以正常工作：

![在此处输入图像描述](../Images/b014364e55c67716915d0ea9331969f7.png)

但是当使用缩放时：

![在此处输入图像描述](../Images/2aa9020ed0087a20a7fab8b8081bb831.png)

分隔符是可见的，我不明白为什么！

这是我的资源字典：

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:dataprimitives="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows.Controls.Data"
xmlns:s="clr-namespace:System;assembly=mscorlib">

<!--Style de l'entête double ligne sans titre au dessus-->
<Style x:Name="HeaderDoubleLine" TargetType="dataprimitives:DataGridColumnHeader" >
    <!--"#FFC9CACA"-->
    <Setter Property="Foreground" Value="#FF000000"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="IsTabStop" Value="False"/>
    <Setter Property="SeparatorBrush" Value="Transparent"/>
    <Setter Property="SeparatorVisibility" Value="Collapsed"/>
    <Setter Property="Padding" Value="8"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="dataprimitives:DataGridColumnHeader">

                <Grid x:Name="Root">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundRectangle" 
                                                Storyboard.TargetProperty="(Fill).Color" To="#FF448DCA"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[3].Color" To="#7FFFFFFF"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[2].Color" To="#CCFFFFFF"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[1].Color" To="#F2FFFFFF"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundRectangle" 
                                                Storyboard.TargetProperty="(Fill).Color" To="#FF448DCA"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[0].Color" To="#D8FFFFFF"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[1].Color" To="#C6FFFFFF"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[2].Color" To="#8CFFFFFF"/>
                                    <ColorAnimation Duration="0" 
                                                Storyboard.TargetName="BackgroundGradient" 
                                                Storyboard.TargetProperty="(Fill).(GradientStops)[3].Color" To="#3FFFFFFF"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SortStates">
                            <VisualState x:Name="Unsorted"/>
                            <VisualState x:Name="SortAscending" />
                            <VisualState x:Name="SortDescending" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Rectangle x:Name="BackgroundRectangle" Fill="#FF1F3B53" Stretch="Fill" Grid.ColumnSpan="2" />
                    <Rectangle x:Name="BackgroundGradient" Stretch="Fill" Grid.ColumnSpan="2">
                        <Rectangle.Fill>
                            <LinearGradientBrush EndPoint=".7,1" StartPoint=".7,0">
                                <GradientStop Color="#FCFFFFFF" Offset="0.015"/>
                                <GradientStop Color="#F7FFFFFF" Offset="0.375"/>
                                <GradientStop Color="#E5FFFFFF" Offset="0.6"/>
                                <GradientStop Color="#D1FFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <StackPanel HorizontalAlignment="Stretch">

                        <Rectangle Margin="0,20,0,0" Fill="#FFC9CACA" VerticalAlignment="Stretch" Stretch="Fill" Width="Auto"  Height="1" Visibility="Visible" />

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                            <Rectangle Margin="-1,0,0,0" Fill="#FFC9CACA" VerticalAlignment="Stretch" HorizontalAlignment="Right" Stretch="Fill"  Width="1"  Height="20" Visibility="Visible" />
                            <ContentPresenter Margin="5,0,0,0" Content="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="right"/>
                        </StackPanel>

                    </StackPanel>

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我将此样式标题应用于我要更改的每个列标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:43:04.540

我找到的唯一解决方案是使用以下命令禁用浏览器缩放：Application.Current.Host.Settings.EnableAutoZoom = false;。——Fabrice Mainguené 4 月 2 日 9:43

# c++ - 无法理解 C++ 中的类定义

> ID：15701458
> 
> 赞同：4
> 
> 时间：2013-03-29T10:28:37.073
> 
> 标签：c++

我是基于磁盘的 R-trees 的新手，尽管我已经编写了基于主内存的 R-Trees。为了理解基于磁盘的 R-Trees，我使用了库“libspatialIndex”。在了解该库时，我遇到了类的奇怪定义，如下所示：

```
class SIDX_DLL IStorageManager
{
public:
    virtual void loadByteArray(const id_type id, uint32_t& len, byte** data) = 0;
    virtual void storeByteArray(id_type& id, const uint32_t len, const byte* const data) = 0;
    virtual void deleteByteArray(const id_type id) = 0;
    virtual ~IStorageManager() {}
}; // IStorageManager 
```

我无法理解这个新的类定义，它在类定义中使用 SIDX_DLL。有人可以给我指点一下 SIDX_DLL 在类定义中代表什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:30:52.170

工具.h

```
47 #if defined _WIN32 || defined _WIN64 || defined WIN32 || defined WIN64
48  #ifdef SPATIALINDEX_CREATE_DLL
49  #define SIDX_DLL __declspec(dllexport)
50  #else
51  #define SIDX_DLL __declspec(dllimport)
52  #endif
53 #else
54  #define SIDX_DLL
55 #endif 
```

那只是一个宏，它将特定于编译器的属性添加到类定义中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:32:54.673

它是一个宏，允许从库客户端和库实现中使用相同的包含。添加实现动态链接所需的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:34:02.040

`SIDX_DLL`是一个宏。它用于将`IStorageManager`符号导出到 dll 中。

这种宏通常定义如下：

```
 #if defined(_MSC_VER) && defined(SIDX_EXPORTS)
 #  define SIDX_DLL __declspec(dllexport)
 #elif defined(_MSC_VER)
 #  define SIDX_DLL __declspec(dllimport)
 #else
 #  define SIDX_DLL
 #endif 
```

`SIDX_EXPORTS`是一个 MSVC 定义的符号，仅在编译 SIDX dll 时才被定义。在这种情况下，`SIDX_DLL`展开为`__declspec(dllexport)`。在所有其他情况下，它扩展为`__declspec(dllimport)`- 将符号导入到使用它的任何地方。

空`SIDX_DLL`的（列表中的最后一个`#else`）用于非 Windows 环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:30:37.790

是定义的。[您可以在http://libspatialindex.github.com/doxygen/Tools_8h_source.html](http://libspatialindex.github.com/doxygen/Tools_8h_source.html)第 54 行阅读相关内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T10:32:29.777

这是一个宏。它可能定义了 dll 导入/导出属性。

转到它的定义 (F12)，你会看到它被定义`__declspec(import)`为`__declspec(export)`

# android - GPS myservice 不会按时间间隔更新

> ID：15701463
> 
> 赞同：0
> 
> 时间：2013-03-29T10:28:49.967
> 
> 标签：android, service, gps

我正在尝试运行用户选择时间间隔的服务，此时 GPS 位置正在更新。

我的应用不更新位置。

我让谷歌地图工作的选择类（以前工作过）：

```
public class selection extends FragmentActivity implements OnMyLocationChangeListener{

    GoogleMap googleMap;
    double latitude=0.0;  
    double longitude=0.0;
    String code_value="";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selection);

        // Getting Google Play availability status
        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        // Showing status
        if....
            // Getting reference to the SupportMapFragment of activity_main.xml
            SupportMapFragment mapFragment  = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

       ....

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                if(checkedId == R.id.rb_normal){
                    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
               ....
                else if(checkedId == R.id.save_location){

                     new Thread(new Runnable() {
                         public void run() {
                            //retrieve this value from configure class
                             code_value=getIntent().getStringExtra("code_value");
                                              postData(Double.toString(latitude),Double.toString(longitude),code_value);
                         }

                     }).start();
                }
      ...

    @Override
    public void onMyLocationChange(Location location) {
        TextView tvLocation = (TextView) findViewById(R.id.tv_location);

        // Getting latitude of the current location
        latitude = location.getLatitude();

        // Getting longitude of the current location
        longitude = location.getLongitude();

        // Creating a LatLng object for the current location
        LatLng latLng = new LatLng(latitude, longitude);

        ...

    }

    public void postData(String lat, String lo ,String code) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet  htget = new HttpGet("www.test.com"+lat+"/"+lo+"/"+code);

        try {
            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(htget);
            String resp = response.getStatusLine().toString();
            Toast.makeText(this, resp, 5000).show();
                       ...

} 
```

我使用 alarmmanager 更新位置的 myservice 类。

```
public class myservice extends IntentService {

    private Context mContext;
    private Handler mHandler;
    public myservice(String name) {
        super(name);
    }

    // call from startService()
    public myservice() {
        super("MyService");
        mHandler = new Handler();
    }

    @Override
    protected void onHandleIntent(Intent intent) {

            String time_value;
            time_value=(String) intent.getStringExtra("time_value");
            final long thetime=Long.parseLong(time_value);

        mContext = getApplicationContext();
        mHandler.post(new Runnable(){

            @Override
            public void run() {

                // Start service using AlarmManager
                Calendar cal = Calendar.getInstance();
                cal.add(Calendar.SECOND, 10);
                Intent intent = new Intent(myservice.this,selection.class);
                PendingIntent pintent = PendingIntent.getService(myservice.this, 0, intent,
                        0);
                AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
                alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                        thetime*1000, pintent);
             // Tell the user about what we did.
                Toast.makeText(myservice.this, "Configured time interval",
                        Toast.LENGTH_LONG).show();

            }
        });
    }
} 
```

我启动服务的配置类：

```
public void onClick(View v) {
        switch (v.getId()){
        case R.id.btn:
             edit11=edit1.getText().toString();
             edit22=edit2.getText().toString();
             Intent i=new Intent(this,selection.class);
             i.putExtra("code_value",edit11);
             Intent k=new Intent(this,myservice.class);
             k.putExtra("time_value",edit22);
             this.startService(k);
             Intent l=new Intent(this,MainActivity.class);
             startActivity(l);  
             break;

     } 
```

# java - 如何从 Android 中的热敏打印机打印？

> ID：15701465
> 
> 赞同：35
> 
> 时间：2013-03-29T10:28:56.400
> 
> 标签：java, android, escaping, point-of-sale, thermal-printer

我正在为具有内置行式打印机的 Android 设备开发一个应用程序。我必须与这台打印机交互并使用它来打印收据上的详细信息，然后用裁纸器自动切割该收据。我在其中看到了一些 ESC 命令，但我不知道如何执行这些 ESC 命令。

**关于卡西欧设备打印机，我有三个主要问题：**

**1.我使用了内置打印机的打印代码，但是打印后切刀没有激活**

```
BuildinEx840 ex840 = new BuildinEx840();
int response = ex840.open();
System.out.println("ex840 open:" + response);

byte[] set = {
    'N', 'A', 'R', 'E', 'S', 'H', 'S', 'H', 'A', 'R', 'M', 'A', (byte) 0x0d, (byte) 0x0a
};

try {        

    ex840.write(set);   

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

try {

    response = ex840.getEndStatus();
    System.out.println("getEndStatus:" + response);
    response = ex840.initCutter();
    ex840.close();    
    System.out.println("initCutter:" + response);

} catch (Exception e) {         
    e.printStackTrace();         
} 
```

**2.我不知道如何在android中向打印机发送ESC命令**

有许多命令，如下所示

```
ESC FF DataPrint,
[code]  <1B>H<OC>H,
[Function] Print all the data in the print area collectively. 
```

我们如何通过编程在android中执行这些ESC命令？

3.**不知道如何按要求的格式打印收据**

有一些 ESC 命令可用于提供左右边距和一些其他命令。那么如何以某种格式打印数据，并可以更改文本的大小以及要打印的文本的其他一些设置。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-09T09:29:50.950

在过去 7 天工作后，我找到了打印的正确方法，然后用裁纸器切割了收据。ESC 命令对于获取与打印机相关的打印和其他任务非常重要。我们必须将这些 ESC CMD 以字节数组的形式传递给行式打印机。

有许多命令，如下所示

```
ESC FF DataPrint,
[code]  <1B>H<OC>H,
[Function] Print all the data in the print area collectively. 
```

因此，只需简单地创建此命令的字节数组并将其传递给打印机。

```
e.g. byte[] print = {0x1b,0x0c}; 
```

现在将其传递给打印机。必须有一些方法，如 getCmd() 或 writeCmd() 等，具体取决于打印机。

我们如何通过编程在android中执行这些ESC命令？下面是执行此操作的代码

```
 BuildinEx840 lpd=new BuildinEx840();
            lpd.setMulticharMode(LinePrinterDeviceBase.CHARACTERSET_USA);
//initialise Cutter
            lpd.initCutter();
            LinePrinter lp=new LinePrinter();
            lp.open(lpd);
            lpd.open();
            try{
                lpd.init();
            }catch(IOException e){
                e.printStackTrace();
            }
            for(int i=0; i<5;i++){
                lp.printNormal("Testing the Line Printer");
            }
            int totalLinefeed=listofItemList.size();
//ESC CMD for line feeds
            byte[] lfs=new byte[]{0x1B,'d', 5};
            sendtoExprinter(lpd,lfs);
//ESC CMD for paper cut
            lfs=new byte[]{0x1B,'i'};
            sendtoExprinter(lpd, lfs);

private void sendtoExprinter(BuildinEx840 dev, byte[] instr) {
        try{
            dev.write(instr);
        }catch(IOException e){
            e.printStackTrace();
        }

    } 
```

**更新：** *通过热敏打印机打印图像*

在某些打印机中，您可以在打印机的非易失性内存中定义图像，然后通过**ESC cmd 1C 70 01 30**从那里打印图像。在其他一些打印机中，您可以在通过热敏打印机打印图像时提供图像的直接路径。

在任何行式打印机中，我们都必须通过此**printerObj.write(command); 传递 ESC CMD；**方式。我要感谢 SO 社区，特别感谢 TheBlastOne 引导我走上正确的道路。

**如果有人在集成热敏打印机方面有任何问题，请随时提问。**

# sql - 按原因应用分组作为变量名称

> ID：15701472
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:29:48.753
> 
> 标签：sql, group-by

```
select CASE (id_referral) 
  WHEN 1 THEN 'Treatment' 
  WHEN 2 THEN 'Medication' 
  WHEN 3 THEN 'Medication' 
  WHEN 4 THEN 'Diagnosis / Tests' 
  WHEN 5 THEN 'Diagnosis / Tests' 
  ELSE 'Other'
  END as referralName ,
  count(id_referral) gCount 
from referralDetails
group by referralName 
```

我收到错误

> 列名“referralName”无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:33:58.087

您不能在 a 中引用列别名，`GROUP BY`因此您有两个选择。

`CASE`您可以在中重用`GROUP BY`：

```
select CASE (id_referral) 
  WHEN 1 THEN 'Treatment' 
  WHEN 2 THEN 'Medication' 
  WHEN 3 THEN 'Medication' 
  WHEN 4 THEN 'Diagnosis / Tests' 
  WHEN 5 THEN 'Diagnosis / Tests' 
  ELSE 'Other'
  END as referralName ,
  count(id_referral) gCount 
from referralDetails
group by CASE (id_referral) 
  WHEN 1 THEN 'Treatment' 
  WHEN 2 THEN 'Medication' 
  WHEN 3 THEN 'Medication' 
  WHEN 4 THEN 'Diagnosis / Tests' 
  WHEN 5 THEN 'Diagnosis / Tests' 
  ELSE 'Other'
  END 
```

或者您可以将查询包装在子查询中：

```
select referralName, count(id_referral) gCount 
from
(
  select CASE (id_referral) 
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END as referralName ,
    id_referral
  from referralDetails
 ) d
 group by referralName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:34:58.733

您可以在子查询中尝试查询：

```
select referralName, count(id_referral) gCount From
(SELECT 
CASE (id_referral )
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END 
 referralName ,
    id_referral
  from referralDetails ) AS TABLE1 GROUP BY Test 
```

或者您可以尝试使用额外的列返回列组计数

```
SELECT * FROM 
(SELECT 
CASE (id_referral )
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END 
 referralName,

ROW_NUMBER() OVER (PARTITION BY  (CASE (id_referral )
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END )  ORDER BY id_referral ) AS NO,

 COUNT(id_referral) OVER(PARTITION BY  (CASE (id_referral )
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END )) AS gCount,

* FROM referralDetails)  AS TABLE1 WHERE no =1 
```

或者

```
SELECT * FROM (SELECT ROW_NUMBER() OVER (PARTITION BY referralName ORDER BY id_referral) AS NO,
COUNT(id_referral) OVER(PARTITION BY referralName) AS gCount,
* FROM
(SELECT CASE (id_referral % 100 )
    WHEN 1 THEN 'Treatment' 
    WHEN 2 THEN 'Medication' 
    WHEN 3 THEN 'Medication' 
    WHEN 4 THEN 'Diagnosis / Tests' 
    WHEN 5 THEN 'Diagnosis / Tests' 
    ELSE 'Other'
    END AS referralName ,* FROM dbo.referralDetails) AS T1)AS T2 WHERE No = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:41:42.857

请尝试以下查询

```
SELECT referralName, count(id_referral) gCount
FROM (SELECT CASE (id_referral) 
  WHEN 1 THEN 'Treatment' 
  WHEN 2 THEN 'Medication' 
  WHEN 3 THEN 'Medication' 
  WHEN 4 THEN 'Diagnosis / Tests' 
  WHEN 5 THEN 'Diagnosis / Tests' 
  ELSE 'Other'
  END as referralName ,
  id_referral
from referralDetails) tbl
group by referralName 
```

# ajax - 在 JSF 2.0 的文件上传自定义组件中未调用 Ajax 加载程序

> ID：15701473
> 
> 赞同：3
> 
> 时间：2013-03-29T10:29:49.737
> 
> 标签：ajax, jsf-2, custom-component

在我当前的项目中，我正在尝试创建一个文件上传自定义组件，因为我们有一个不能使用任何组件库的约束。我们的要求是创建单个文件上传，在选择并上传文件后，它将显示在该组件下方的数据表中。用户将能够下载上传的文件，如果需要也可以删除上传的文件。将有一个 ajax 加载器，需要在上传文件时触发。图形用户界面看起来像这样。

```
 ________________________ __________  ____________
|                       | | Browse  | | Upload    |
|_______________________| |_________| |___________|

______________________________________________
|                                      |      |
|  File1.pdf                            |  *  |
|_______________________________________|_____|
|                                       |     |
|   File2.pdf                           |  *  |
|_______________________________________|_____| 
```

为了创建这个组件，我在 Core JavaServer Pages(3e) 的帮助下创建了自定义组件和 BalusC 的博客，以触发来自 jsf 页面的 ajax 调用 (jsf.ajax.addOnEvent)。下面是 Renderer、xhtml 和 managedbean 的完整代码。目前我使用 ah:outputtext 而不是 h:datatable 来更新页面。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:corejsf="http://corejsf.com">
     <h:head>
    <title>A file upload test</title>
        <h:outputScript name="jsf.js" library="javax.faces" target="head"/>
        <script>
             jsf.ajax.addOnEvent(function(data) {
                var ajaxstatus = data.status; 
                var ajaxloader = document.getElementById("ajaxloader");

                switch (ajaxstatus) {
                case "begin": // This is called right before ajax request is been sent.
                    ajaxloader.style.display = 'block';
                    break;

                case "complete":
                    ajaxloader.style.display = 'none';
                    break;

                case "success":                 // NOOP.
                     break;
             } });
    </script>
      </h:head>
      <h:body>
       <h:form>
            <h:commandButton value="hello"></h:commandButton>
       </h:form>
        <h:form enctype="multipart/form-data">
              Upload a photo of yourself: 
              <corejsf:upload uploadButton="upload"/>
              <h:outputText id="updateText" value="#{user.value}"></h:outputText>
            <h:commandButton action="#{user.submit}" value="Initiate"></h:commandButton>
             </h:form>
                <img id="ajaxloader" src="ajax-loader.gif" style="display: none;" />
        </h:body>
     </html> 
```

渲染器：

```
 package com.corejsf;

  import java.io.File;
  import java.io.IOException;
  import java.io.InputStream;
  import java.io.UnsupportedEncodingException;
  import java.util.Map;

  import javax.el.ELContext;
  import javax.el.ValueExpression;
  import javax.faces.FacesException;
  import javax.faces.application.ResourceDependencies;
  import javax.faces.application.ResourceDependency;
  import javax.faces.component.EditableValueHolder;
  import javax.faces.component.UIComponent;
  import javax.faces.component.UIForm;
  import javax.faces.context.ExternalContext;
  import javax.faces.context.FacesContext;
  import javax.faces.context.ResponseWriter;
  import javax.faces.render.FacesRenderer;
  import javax.faces.render.Renderer;
  import javax.servlet.ServletContext;
  import javax.servlet.http.HttpServletRequest;
  import org.apache.commons.fileupload.FileItem;

  @FacesRenderer(componentFamily="javax.faces.Input",
      rendererType="com.corejsf.Upload")
   public class UploadRenderer extends Renderer {
        public void encodeBegin(FacesContext context, UIComponent component)  
            throws IOException {
         if (!component.isRendered()) return;
         ResponseWriter writer = context.getResponseWriter();
         String ajax = "jsf.ajax.request(this, event,{render:'j_idt11:updateText'}); return false";
         String clientId = component.getClientId(context);
         System.out.println("parentid>>>>>>"+component.getParent().getClientId(context));
         System.out.println(clientId);
         System.out.println("upload button >>>>>>"+(String)component.getAttributes().get("uploadButton"));
          writer.startElement("input", component);
         writer.writeAttribute("type", "file", "type");
         writer.writeAttribute("name", clientId+":INPUT_FILE", "clientId");
         writer.endElement("input");
         writer.startElement("input", component);
         writer.writeAttribute("type", "submit", null);
         writer.writeAttribute("name", clientId + ":FILE_UPLOAD", null);
         writer.writeAttribute("value", "Upload", "value");
         writer.writeAttribute("onclick", ajax, null);
         writer.endElement("input");
         writer.flush();
    }

    public void decode(FacesContext context, UIComponent component) {

   Map<String,String> requestMap = context.getExternalContext ().getRequestParameterMap();
   String clientId = component.getClientId(context);
   System.out.println("getId>>>>>>>"+component.getId());
   if(requestMap.containsKey(clientId+":FILE_UPLOAD")){

       try {
        Thread.sleep(4000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
       System.out.println("true");
       ExternalContext external = context.getExternalContext();
       HttpServletRequest request = (HttpServletRequest) external.getRequest();
       //String clientIdFile = component.getClientId(context);
       FileItem item = (FileItem) request.getAttribute(clientId+":INPUT_FILE");
       System.out.println("filename>>>>"+item.getName()+">>>");
       System.out.println("file blank>>>>"+item.getName().equals(""));
       ELContext elContext = FacesContext.getCurrentInstance().getELContext();
        UserBean userBean = (UserBean) FacesContext.getCurrentInstance().getApplication()
        .getELResolver().getValue(elContext, null, "user");
        try {
            userBean.setUploadedFile(item.getInputStream());
            userBean.setValue(userBean.getUploadedFileList().size());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   }
   else
       System.out.println("false");
     }   
  } 
```

托管豆：

```
 package com.corejsf;

  import java.io.Serializable;

  import javax.el.ELContext;
  import javax.faces.bean.ManagedBean; 
  //import javax.faces.bean.SessionScoped;
  import javax.faces.bean.ViewScoped;
  import javax.faces.context.FacesContext;
  import javax.faces.event.ActionEvent;
  import javax.faces.event.AjaxBehaviorEvent;

  import java.io.InputStream;
  import java.util.ArrayList;

  @ManagedBean(name="user")
  @ViewScoped
  public class UserBean implements Serializable {

private static final long serialVersionUID = 1L;
private String id;
private ArrayList<InputStream> uploadedFileList = new ArrayList<InputStream>();

public ArrayList<InputStream> getUploadedFileList() {
    return uploadedFileList;
}
public void setUploadedFileList(ArrayList<InputStream> uploadedFileList) {
    this.uploadedFileList = uploadedFileList;
}
private int value = 0;

public int getValue() {
    return value;
}
public void setValue(int value) {
    this.value = value;
}
public String getId() { return id; }
public void setId(String newValue) { id = newValue; }

public void setUploadedFile(InputStream inputStream){
    uploadedFileList.add(inputStream);
}
  } 
```

上传过滤器：

```
 package com.corejsf;

   import java.io.File;
   import java.io.IOException;
   import java.util.Collections;
   import java.util.Enumeration;
   import java.util.HashMap;
   import java.util.List;
   import java.util.Map;
   import javax.servlet.Filter;
   import javax.servlet.FilterChain;
   import javax.servlet.FilterConfig;
   import javax.servlet.ServletException;
   import javax.servlet.ServletRequest;
   import javax.servlet.ServletResponse;
   import javax.servlet.http.HttpServletRequest;
   import javax.servlet.http.HttpServletRequestWrapper;
   import org.apache.commons.fileupload.FileItem;
   import org.apache.commons.fileupload.FileUploadException;
   import org.apache.commons.fileupload.disk.DiskFileItemFactory;
   import org.apache.commons.fileupload.servlet.ServletFileUpload;

    public class UploadFilter implements Filter {
        private int sizeThreshold = -1;
        private String repositoryPath;

        public void init(FilterConfig config) throws ServletException {
           repositoryPath = config.getInitParameter(
              "com.corejsf.UploadFilter.repositoryPath");
           try {
           String paramValue = config.getInitParameter(
               "com.corejsf.UploadFilter.sizeThreshold");
           if (paramValue != null) 
               sizeThreshold = Integer.parseInt(paramValue);
           }
           catch (NumberFormatException ex) {
               ServletException servletEx = new ServletException();
               servletEx.initCause(ex);
               throw servletEx;
           }
        }

         public void destroy() {
         }

 public void doFilter(ServletRequest request, 
  ServletResponse response, FilterChain chain) 
  throws IOException, ServletException {

  if (!(request instanceof HttpServletRequest)) {
     chain.doFilter(request, response);
     return;
  }

  HttpServletRequest httpRequest = (HttpServletRequest) request;

  boolean isMultipartContent 
     = ServletFileUpload.isMultipartContent(httpRequest);
  if (!isMultipartContent) {
     chain.doFilter(request, response);
     return;
  }

  DiskFileItemFactory factory = new DiskFileItemFactory();
  if (sizeThreshold >= 0)
     factory.setSizeThreshold(sizeThreshold);
  if (repositoryPath != null) 
     factory.setRepository(new File(repositoryPath));
  ServletFileUpload upload = new ServletFileUpload(factory);

  try {
     @SuppressWarnings("unchecked") List<FileItem> items 
        = (List<FileItem>) upload.parseRequest(httpRequest);
     final Map<String, String[]> map = new HashMap<String, String[]>();
     for (FileItem item : items) {
        String str = item.getString();
        if (item.isFormField())
           map.put(item.getFieldName(), new String[] { str });
        else
           httpRequest.setAttribute(item.getFieldName(), item);
     }

     chain.doFilter(new 
        HttpServletRequestWrapper(httpRequest) {
           public Map<String, String[]> getParameterMap() {
              return map;
           }                   
           // busywork follows ... should have been part of the wrapper
           public String[] getParameterValues(String name) {
              Map<String, String[]> map = getParameterMap();
              return (String[]) map.get(name);
           }
           public String getParameter(String name) {
              String[] params = getParameterValues(name);
              if (params == null) return null;
              return params[0];
           }
           public Enumeration<String> getParameterNames() {
              Map<String, String[]> map = getParameterMap();
              return Collections.enumeration(map.keySet());
           }
        }, response);
  } catch (FileUploadException ex) {
     ServletException servletEx = new ServletException();
     servletEx.initCause(ex);
     throw servletEx;
  }      
 }   
} 
```

标签库.xml：

```
<facelet-taglib version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee">
    <namespace>http://corejsf.com</namespace>
    <tag>
       <tag-name>upload</tag-name>
       <component>
           <component-type>javax.faces.Input</component-type>
           <renderer-type>com.corejsf.Upload</renderer-type>
       </component>
    </tag>
 </facelet-taglib> 
```

我在使用此代码时面临的问题是 ajax 正在更新 h:outputtext 但 ajax 加载器无法正常工作。上传文件时不显示。它应该在开始状态下显示并在完成状态下消失。此外，firefox 错误控制台显示“参考错误：jsf 未定义”消息。

我放了一个：

```
<h:outputScript name="jsf.js" library="javax.faces" target="head"/> 
```

在 h:head 标签内。但这并没有帮助。在 Firefox 中添加此行后，网页没有响应，但它在 IE 上运行，尽管 ajax 加载器在任何情况下都不起作用。

请帮忙。

提前致谢。

# c# - C# winforms 在向 flowlayoutpanel 添加和删除自定义控件时可能出现内存泄漏（taskmanager 中的许多用户对象）

> ID：15701475
> 
> 赞同：1
> 
> 时间：2013-03-29T10:29:51.163
> 
> 标签：c#, winforms, memory-leaks, flowlayoutpanel

我有一个中型 Winforms 应用程序 (dotNET4.0)，我在其上从 flowlayoutpanel 动态添加和删除自定义控件。
根据用户的选择，这些控件的数量会有所不同。

这工作正常，除了我注意到一些内存泄漏。我通过监视任务管理器中的“用户对象”编号来检查这一点。当我将自定义控件添加到 flowlayoutpanel 时，该数字会上升，但在处理这些控件时不会再次下降。

实际上：用户对象的数量下降了很多（可以说从 100% 到 10%：所以 90% 被正确处理，剩下 10% 的内存）......

*结论：*处理用户控件后，一个或多个对象仍保留在内存中。我的猜测是代表或图像，但我一无所知......会不会是静态的东西？

**所以我的实际问题是：**我在哪里没有正确地从用户控件中释放内存，我该如何解决这个问题？你们能帮忙吗？

非常感谢提前！

**这是我的用户控件：请注意，除了***_Costlinereportdata*对象之外
的所有内容都可以处理。 （这应该继续使用，因为它在其他部分被链接和使用）

 *```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Classes.CustomControls
{
public partial class CostLineReport : UserControl, IDisposable
{
    #region CONSTANTS
    public static int pnlWidth = 870;
    public static int pnlHeightBase = 112;
    public static int pnlHeightExtended = 415;
    public static int pnlHeightCollapsed = 30;
    public static Color ColorNeutral = Color.FromArgb(176, 196, 222);
    public static Color ColorApprove = Color.FromArgb(173, 255, 47);
    public static Color ColorDisapprove = Color.FromArgb(255, 99, 71);
    public static Image ImageApprove = Image.FromFile(@"Images\tableAdd.png");
    public static Image ImageDisapprove = Image.FromFile(@"Images\tableDelete.png");
    public static Image ImageDetail = Image.FromFile(@"Images\tableDetail.png");
    public static Image ImageCollapse = Image.FromFile(@"Images\compile-warning.png");
    public static Image ImageViewRecords = Image.FromFile(@"Images\table.png");
    public static Image ImageCalculationInclude = Image.FromFile(@"Images\add.png");
    public static Image ImageCalculationExclude = Image.FromFile(@"Images\delete.png");
    #endregion

    #region FIELDS
    private CostLineReportData _Costlinereportdata;
    private ToolTip ttpApprove;
    private ToolTip ttpDisapprove;
    private ToolTip ttpCollapse;
    private ToolTip ttpDetail;
    private ToolTip ttpViewRecords;
    private ToolTip ttpCalculation;
    #endregion

    #region CTORS
    public CostLineReport(CostLineReportData line)
    {
        InitializeComponent();
        //
        this._Costlinereportdata = line;
        //
        this.picApprove.Click += new EventHandler(Approve);
        this.picDisapprove.Click += new EventHandler(Disapprove);
        this.picDetail.Click += new EventHandler(ResizeControl);
        this.picCollapse.Click += new EventHandler(CollapseControl);
        this.picViewRecords.Click += new EventHandler(ShowRecords);
        this.picCalculation.Click += new EventHandler(SwitchCalculateState);
        //
        this.rtMainData.Text = _Costlinereportdata.Maintext;
        this.rtDetail.Text = _Costlinereportdata.Detailtext; ;
        this.lblTitle.Text = _Costlinereportdata.Title;
        //
        ttpApprove = new ToolTip();
        ttpDisapprove = new ToolTip();
        ttpCollapse = new ToolTip();
        ttpDetail = new ToolTip();
        ttpViewRecords = new ToolTip();
        ttpCalculation = new ToolTip();
        ttpApprove.SetToolTip(this.picApprove, "Approve this line");
        ttpDisapprove.SetToolTip(this.picDisapprove, "Disapprove this line");
        ttpCollapse.SetToolTip(this.picCollapse, "Collapse this line");
        ttpDetail.SetToolTip(this.picDetail, "Show detail");
        ttpViewRecords.SetToolTip(this.picViewRecords, "View associated recordset");
        ttpCalculation.SetToolTip(this.picCalculation, "Include/Exclude from calculation");
        //
        this.picApprove.Image = CostLineReport.ImageApprove;
        this.picDisapprove.Image = CostLineReport.ImageDisapprove;
        this.picDetail.Image = CostLineReport.ImageDetail;
        this.picCollapse.Image = CostLineReport.ImageCollapse;
        this.picViewRecords.Image = CostLineReport.ImageViewRecords;
        this.picCalculation.Image = CostLineReport.ImageCalculationExclude;
        //
        Recolor();
    }
    #endregion

    #region PROPERTIES
    public RichTextBox MainTextBox
    { get { return this.rtMainData; } }
    public RichTextBox DetailTextBox
    { get { return this.rtDetail; } }
    public Label TitleLabel
    { get { return this.lblTitle; } }
    public PictureBox CalculateControl
    { get { return this.picCalculation; } }
    #endregion

    #region METHODS
    private void Approve(object o, EventArgs e)
    {
        _Costlinereportdata.Approve();
        Recolor();
    }
    private void Disapprove(object o, EventArgs e)
    {
        _Costlinereportdata.Disapprove();
        Recolor();
    }
    private void ResizeControl(object o, EventArgs e)
    {
        _Costlinereportdata.SwitchSize();
        switch(_Costlinereportdata.Viewstate)
        {
            case ViewState.Base:
                this.Height = CostLineReport.pnlHeightBase;
                break;
            case ViewState.Extended:
                this.Height = CostLineReport.pnlHeightExtended;
                break;
        }
    }
    private void CollapseControl(object o, EventArgs e)
    {
        _Costlinereportdata.Collapse();
        if (_Costlinereportdata.Collapsed)
            this.Height = CostLineReport.pnlHeightCollapsed;
        else
            this.Height = CostLineReport.pnlHeightBase;
    }
    private void Recolor()
    {
        switch (_Costlinereportdata.Approvalstate)
        {
            case ApprovalState.Approved:
                foreach (Control c in pnlColorIndicator.Controls)
                {
                    if (c is PictureBox)
                        ((PictureBox)c).BackColor = CostLineReport.ColorApprove;
                }
                pnlColorIndicator.BackColor = CostLineReport.ColorApprove;
                break;
            case ApprovalState.Disapproved:
                foreach (Control c in pnlColorIndicator.Controls)
                {
                    if (c is PictureBox)
                        ((PictureBox)c).BackColor = CostLineReport.ColorDisapprove;
                }
                pnlColorIndicator.BackColor = CostLineReport.ColorDisapprove;
                break;
            case ApprovalState.Neutral:
                foreach (Control c in pnlColorIndicator.Controls)
                {
                    if (c is PictureBox)
                        ((PictureBox)c).BackColor = CostLineReport.ColorNeutral;
                }
                pnlColorIndicator.BackColor = CostLineReport.ColorNeutral;
                break;
        }
    }
    private void ShowRecords(object sender, EventArgs e)
    {
        if (this._Costlinereportdata.Costline.LocalData != null)
        {
            using (Forms.frmCostlineRecords f = new Forms.frmCostlineRecords(this._Costlinereportdata.Costline.LocalData))
            {
                f.ShowDialog();
            }
        }
        else
            MessageBox.Show("This line has no records associated to it. The detailed list cannot be shown.",
                            "Can't show form",
                            MessageBoxButtons.OK,
                            MessageBoxIcon.Information);
    }
    private void SwitchCalculateState(object sender, EventArgs e)
    {
        if (this._Costlinereportdata.Calculationstate == CalculationState.Included)
        {
            this._Costlinereportdata.Calculationstate = CalculationState.Excluded;
            this.picCalculation.Image = CostLineReport.ImageCalculationExclude;
        }
        else
        {
            this._Costlinereportdata.Calculationstate = CalculationState.Included;
            this.picCalculation.Image = CostLineReport.ImageCalculationInclude;
        }
    }
    public void SetCalculateState(CalculationState st)
    {
        switch (st)
        {
            case CalculationState.Included:
                this._Costlinereportdata.Calculationstate = CalculationState.Excluded;
                break;
            case CalculationState.Excluded:
                this._Costlinereportdata.Calculationstate = CalculationState.Included;
                break;
        }
        this.SwitchCalculateState(this, null);
    }
    #endregion

    #region INTERFACE_IMEPLEMENTS
    void IDisposable.Dispose()
    {
        this._Costlinereportdata = null;
        this.picApprove.Image.Dispose();
        this.picCalculation.Image.Dispose();
        this.picCollapse.Image.Dispose();
        this.picDetail.Image.Dispose();
        this.picDisapprove.Image.Dispose();
        this.picViewRecords.Image.Dispose();
        this.rtDetail.Dispose();
        this.rtMainData.Dispose();
        this.lblDivider.Dispose();
        this.lblDivider2.Dispose();
        this.lblDivider3.Dispose();
        this.lblDivider4.Dispose();
        this.lblTextDivider.Dispose();
        this.lblTitle.Dispose();
        this.picApprove.Dispose();
        this.picCalculation.Dispose();
        this.picCollapse.Dispose();
        this.picDetail.Dispose();
        this.picDisapprove.Dispose();
        this.picViewRecords.Dispose();
        this.pnlColorIndicator.Dispose();
        ttpApprove.Dispose();
        ttpDisapprove.Dispose();
        ttpCollapse.Dispose();
        ttpDetail.Dispose();
        ttpViewRecords.Dispose();
        ttpCalculation.Dispose();
        base.Dispose(true);
    }
    #endregion
}
} 
```

**这是我的用户控件的内容（就 winform 控件而言）**

```
CostLineReport - System.Windows.Forms.UserControl
-lblDivider - System.Windows.Forms.Label
-lblDivider2 - System.Windows.Forms.Label
-lblDivider3 - System.Windows.Forms.Label
-lblDivider4 - System.Windows.Forms.Label
-lblTextDivider - System.Windows.Forms.Label
-lblTitle - System.Windows.Forms.Label
-lblTopDivider - System.Windows.Forms.Label
-picApprove - System.Windows.Forms.PictureBox
-picCalculation - System.Windows.Forms.PictureBox
-picCollapse - System.Windows.Forms.PictureBox
-picDetail - System.Windows.Forms.PictureBox
-picDisapprove - System.Windows.Forms.PictureBox
-picViewRecords - System.Windows.Forms.PictureBox
-pnlColorIndicator - System.Windows.Forms.Panel
-rtDetail - System.Windows.Forms.RichTextBox
-rtMaindata - System.Windows.Forms.RichTextBox 
```

**这就是我清除所有内容的 flowlayoutpanel 的方式：**

```
while (pnlCenterRightControls.Controls.Count > 0)
{
    pnlCenterRightControls.Controls[0].Dispose();
}
GC.Collect(); 
```

**这就是我添加控件的方式**

*我添加了这个块，因为这也为 User 控件中的一个内部控件添加了一个 Delegate（事件）方法。*

```
foreach (Classes.CustomControls.CostLineReportData c in SelectedCostlineReports)
    {
        Classes.CustomControls.CostLineReport r = c.ToControl();
        r.CalculateControl.Click += delegate(object o, EventArgs e) { GetCostCalculation(); };
        this.pnlCenterRightControls.Controls.Add(r);
    } 
```

**编辑解决方案**
*对于那些感兴趣的人，我已将我的代码更新为以下内容：*

**从 flowlayoutpanel 中删除控件**
*我还在这里删除了事件的订阅者*

```
while (pnlCenterRightControls.Controls.Count > 0)
{
    foreach (Control contr in pnlCenterRightControls.Controls)
    {
        Classes.CustomControls.CostLineReport clrp = contr as Classes.CustomControls.CostLineReport;
        clrp.CalculateControl.Click -= GetCostCalculation;
        clrp.Dispose();
    }
} 
```

**处理我的对象**
*（虽然不处理我的静态图像）*

```
 new public void Dispose()
    {
        this.Dispose(true);
    }
    /// <summary> 
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        this.picApprove.Click -= Approve;
        this.picDisapprove.Click -= Disapprove;
        this.picDetail.Click -= ResizeControl;
        this.picCollapse.Click -= CollapseControl;
        this.picViewRecords.Click -= ShowRecords;
        this.picCalculation.Click -= SwitchCalculateState;
        this._Costlinereportdata = null;
        this.rtDetail.Dispose();
        this.rtMainData.Dispose();
        this.lblDivider.Dispose();
        this.lblDivider2.Dispose();
        this.lblDivider3.Dispose();
        this.lblDivider4.Dispose();
        this.lblTextDivider.Dispose();
        this.lblTitle.Dispose();
        this.lblToplDivider.Dispose();
        this.picApprove.Dispose();
        this.picCalculation.Dispose();
        this.picCollapse.Dispose();
        this.picDetail.Dispose();
        this.picDisapprove.Dispose();
        this.picViewRecords.Dispose();
        this.pnlColorIndicator.Dispose();
        ttpApprove.Dispose();
        ttpDisapprove.Dispose();
        ttpCollapse.Dispose();
        ttpDetail.Dispose();
        ttpViewRecords.Dispose();
        ttpCalculation.Dispose();
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:40:44.430

如果没有可用于通过探查器运行的代码，很难判断，但我注意到的一件事是你不是`-=`你的事件。您的事件的任何处理程序仍将包含对您的对象的引用，因此会使它们没有资格进行垃圾收集。

编辑：

有两组事件需要担心，那些您在内部控制的事件（您需要在您的 dispose 方法中手动删除）和那些引用您控制或其子项的外部事件。

我见过的任何自动方式都是错误的或效果不佳，总的来说，我发现最好手动完成。有关自动删除事件的更多信息，请参阅此答案。

[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:41:15.717

从看起来你应该也处理所有这些对象：

```
ImageApprove.Dispose;
ImageDisapprove.Dispose;
ImageDetail.Dispose;
ImageCollapse.Dispose;
ImageViewRecords.Dispose;
ImageCalculationInclude.Dispose;
ImageCalculationExclude.Dispose; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T01:10:57.807

C# 是垃圾收集的，所以`Dispose`在你的代码中有这么多是没有意义的。

通常，您不必太在意设计者添加的任何内容，而只需关注您自己的代码（应该期望生成的代码是正确的）。

此外，由于`UserControl`已经实现`protected override void Dispose(bool disposing)`，您应该真正覆盖该方法，而不是尝试重新实现接口。

我不明白您的代码甚至可以如何工作......因为您的代码可能`Dispose`在同一个对象上多次调用。我猜预定义的控件会忽略第二次调用，否则你会有异常，因为一个对象已经被释放。

设计者添加的任何控件都将被自动释放。

调用`Dispose`内部对象绝对是一派胡言。每个对象都应该处理自己的对象。总是。时期。

```
picApprove.Image.Dispose();    // BAD CODE!!! 
```

显然，当您手动添加控件并手动连接事件处理程序时，通常必须手动删除两者。尽管您的语法可能是等效的，但我建议您在添加事件时使用相同的简短语法（除了 += 而不是 -=）。这样，更容易确保它们都匹配。采用：

```
r.CalculateControl.Click += GetCostCalculation; 
```

代替：

```
r.CalculateControl.Click += 
    delegate(object o, EventArgs e) { GetCostCalculation(); }; 
```

为什么要为设计器添加的控件手动添加事件处理程序？我看不出在设计器中初始化部分控件和在构造函数中初始化其他部分有什么好处。如果其他人维护该代码并认为事件未正确连接，您只会增加回归错误的风险。

`new public void Dispose()`是另一种完全的无意义。

最后，我发现您的代码还有许多其他问题......它没有遵循许多良好的设计实践。我建议您学习 SOLID 设计模式。

一些不良做法的例子：

*   返回内部控件的公共属性。通常不需要，因为对这些控件进行操作的代码应驻留在此类中。您也可以搜索有关 TDA 原理的信息。
*   UI 和业务代码之间的紧密耦合。
*   函数中重复代码（DRY 原则）`Recolor`。
*   不遵守 .NET 约定的命名法，特别是对于事件处理函数名称。*

# ruby-on-rails-3 - Rails 3 嵌套资源 - 部分形式仅适用于新建或编辑，而不适用于两者

> ID：15701480
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:06.377
> 
> 标签：ruby-on-rails-3, forms, routes

我有嵌套资源，我正在尝试为每个单独的资源创建表单部分，以用于每个资源的新建和编辑操作。

**路线.rb**

```
resources :accounts, shallow: true,   :except => [ :destroy ] do
  resources :service,                 :except => [ :destroy ]
end 
```

如果我在部分表单中使用以下内容，则编辑表单会正确呈现并正确保存更新，但新表单无法呈现并出现错误`undefined method services_path`

**/app/views/services/_service_form.html.erb**

```
<%= simple_form_for @service do |f| %> 
```

如果我在表单部分中使用以下内容，新表单会正确呈现并正确保存对象，但编辑表单无法呈现并出现错误`undefined method account_service_path`

**/app/views/services/_service_form.html.erb**

```
<%= simple_form_for [@account, @service] do |f| %> 
```

如图所示，我已经尝试添加`url: service_path(@service)`到表单块声明的两个版本，但它不能解决任何一个问题。

让这个工作起来肯定会缺少一些明显的东西，我确信过去我已经使用单个表单部分正确地工作了嵌套资源，我只是看不出这次有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:33:45.377

将您的代码更改为以下更改 :service 为 :services

给定您的帐户模型 has_many :services 和服务模型 have belongs_to : account

```
resources :accounts, shallow: true,   :except => [ :destroy ] do
  resources :services,                :except => [ :destroy ]
end 
```

# c - 这个内核代码被破坏了什么？

> ID：15701482
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:16.423
> 
> 标签：c, linux-kernel

这是产生 Oops 的代码部分

```
stuff = vmalloc(10);
if (stuff == NULL) {
    printk("\n Could not allocate memory chunk\n");
} else {
    printk("\n Successfully allocated memory chunk\n");
}
/* Oops here */ 
```

* * *

```
Successfully allocate memory chunk..------------[ cut here ]------------..
WARNING: at mm/slub.c:2929 ksize+0x43/0x7a()..
Hardware name: VMware Virtual Platform..
Pid: 21893, comm: insmod Tainted: G..W  2.6.33.3-85.fc13.i686.PAE #1..
Call Trace:[<c043d625>] warn_slowpath_common+0x65/0x7c[<c04c7a1f>] ? 
ksize+0x43/0x7a[<c043d649>]..warn_slowpath_null+0xd/0x10..
[<c04c7a1f>] ksize+0x43/0x7a..[<d0e6229d>] xt_gtpu_init+0x29d/0x2d1 [xt_SGW_GTPU].. 
[<d0e62000>] ? xt_gtpu_init+0x0/0x2d1 [xt_SGW_GTPU]..[<c0403051>] 
do_one_initcall+0x4c/0x13a..[<c0466623>]..sys_init_module+0xa7/0x1dc..
[<c040885f>] sysenter_do_call+0x12/0x28..---[ end trace e82ed3faa2bc068a ]---..
I got: 4096 bytes of memory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:18:37.987

我会尝试给你一些线索来理解内核告诉你什么。您看到的是内核警告，但它是什么？

一些内核代码需要特定条件才能正确运行。如果用户（即您）不满足要求的条件，代码可以通过两种方式做出反应：

*   它可以纠正它，但会产生一个抱怨的消息：**警告**。这样的代码段将通过使用`WARN_ON(my_condition)`宏来表征。
*   它不会纠正它，但它不能走得更远：它会产生一个糟糕的结果，使用宏会使你的内核崩溃`BUG_ON(my_buggy_condition)`

您的案例击中了第一项（幸运的是；））。该宏将转储有关警告周围的上下文的一些信息。让我们解密它。

`WARNING: at mm/slub.c:2929 ksize+0x43/0x7a()..`清楚地表明`WARN_ON`宏在 mm/slub.c 文件的第 2929 行被击中，在函数中`ksize()`。而且，如果你浏览这个文件（见 Ilya 的回答），第 2929 行是 : `WARN_ON(!PageCompound(page));`。显示剩余的调用堆栈后，您可以识别导致此类警告的入口点。在您的情况下，您似乎向`xt_gtpu_init()`函数传递了一些错误。

我不能告诉你更多，因为你没有公开你的`xt_gtpu_init()`电话，但看起来一些分配标志没有正确设置（[这里](http://lxr.free-electrons.com/source/include/linux/page-flags.h#L345)是`PageCompound()`函数的定义）。

这不是问题，但最后一句话：`vmalloc()`函数希望您提供一个大小是`PAGE_SIZE`. 如果不这样做，它应该将请求的长度四舍五入到最接近的`PAGE_SIZE`倍数。这就是为什么，我想，你`I got: 4096 bytes of memory`稍后会得到这个声明。

# javascript - javascript中typeof的行为

> ID：15701490
> 
> 赞同：2
> 
> 时间：2013-03-29T10:30:35.863
> 
> 标签：javascript, typeof

有人可以解释为什么**typeof**的行为方式如下：

```
typeof 
//Returns: SyntaxError: Unexpected token } (Quite obvious)

"Why am I a " + typeof 
//Returns: SyntaxError: Unexpected token }

"Why am I a " + typeof + ""; 
//Returns: "Why am I a number"

"Why am I a " + typeof + "??"; 
//Returns: "Why am I a number" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:33:31.783

[typeof 不是函数而是一元运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.3)，所以

```
typeof + ""; 
```

是相同的

```
typeof (+ ""); 
```

并将`+something`转换`something`为[一元 + 运算符上 EcmaScript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.6)中精确的数字：

> 一元 + 运算符将其操作数转换为 Number 类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T10:32:59.637

`+"..."`实际上会将字符串解析为数字。这将导致`typeof + ""`返回“数字”，即使返回的数字是`NaN`。

前两种用法是完全错误的，因为`typeof`需要右手边。

### 参考：

*   [`typeof`操作员](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.3)
*   [一元`+`运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.6)

# c# - 为什么模块初始化程序不会为接口使用而触发

> ID：15701491
> 
> 赞同：1
> 
> 时间：2013-03-29T10:30:36.820
> 
> 标签：c#, .net

# 编码

所以我有两个程序集

“AssemblyWithClassAndModuleInit”包含一个类

```
public class MyBaseClass
{
} 
```

"AssemblyWithInterfaceAndModuleInit" 包含一个接口

```
public interface MyInterface
{
} 
```

两者都包含一个模块初始化器

```
public static class ModuleInitializer
{
    public static void Initialize()
    {
        Environment.SetEnvironmentVariable("ModuleInitializer", "true");
    }
} 
```

测试“AssemblyWithClassAndModuleInit”（注意`MyBaseClass`用作 的基础`ClassTests`）

```
[TestFixture]
public class ClassTests : MyBaseClass
{
    [Test]
    public void EnsureModuleInitIsCalled()
    {
        Assert.AreEqual("true", Environment.GetEnvironmentVariable("ModuleInitializer"));
    }
    [Test]
    public void EnsureAssemblyIsLoaded()
    {
        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        Assert.IsTrue(assemblies.Any(x => x.GetName().Name == "AssemblyWithClassAndModuleInit"));
    }
} 
```

测试“AssemblyWithInterfaceAndModuleInit”（注意`MyInterface`用作接口`InterfaceTests`）

```
[TestFixture]
public class InterfaceTests : MyInterface
{
    [Test]
    public void EnsureModuleInitIsCalled()
    {
        Assert.AreEqual("true", Environment.GetEnvironmentVariable("ModuleInitializer"));
    }
    [Test]
    public void EnsureAssemblyIsLoaded()
    {
        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        Assert.IsTrue(assemblies.Any(x => x.GetName().Name == "AssemblyWithInterfaceAndModuleInit"));
    }
} 
```

唯一失败的测试是`InterfaceTests.EnsureModuleInitIsCalled`.

# 问题

那么这是为什么呢？`InterfaceTests`实现的事实不应该`MyInterface`导致模块初始化程序运行吗？

# 我如何注入模块初始化程序

我正在使用 IL 编织。具体[https://github.com/Fody/ModuleInit](https://github.com/Fody/ModuleInit)

它检测到这个

```
public static class ModuleInitializer
{
    public static void Initialize()
    {
        //Init code
    }
} 
```

并添加了这个

```
static <Module>()
{
    ModuleInitializer.Initialize();
} 
```

# 更新

*   顺便说一句，如果我添加一个字段`Type interfaceType = typeof(MyInterface);`，`InterfaceTests`那么所有测试都会通过。
*   编码是针对 .net 4.5 完成的

# 完整来源

这是带有单元测试的重现[https://github.com/SimonCropp/Experiments/tree/master/ModuleInitRepro](https://github.com/SimonCropp/Experiments/tree/master/ModuleInitRepro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:18:25.480

一件明显可能相关的事情：您的测试类派生自 prod 程序集中的基类。因此，创建测试类的实例需要（隐式）调用基类中的构造函数，这意味着需要完全加载和初始化基类，因此需要初始化程序集。

将其与您的接口版本进行比较 - 您在测试类中实现 prod-assembly 接口这一事实在执行时实际上是无关紧要的，因为您没有做任何需要该接口的事情。

我*怀疑*如果你有：

```
public void Foo(MyInterface x)
{
}

[Test]
public void EnsureAssemblyIsLoaded()
{
    Foo(this);
    ... assertions ...
} 
```

那么这*可能会*初始化程序集。如果您在接口中声明了任何方法，并且您从 调用了这些方法之一`Foo`，那么我肯定希望程序集能够被初始化。

# javascript - 为什么不可见时未定义的gridview？

> ID：15701493
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:40.747
> 
> 标签：javascript, asp.net

我有这个 gridview，我想使用这个 gridview 中的信息，但我不想在页面上显示它。所以我设置： `grid.Visible = false`，但现在出现“未定义网格”错误。如果`grid.Visible = true`，一切正常。我有一个检查这个的javascript函数：`if (typeof (grid) !== "undefined")`，但我的网格没有定义。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:32:24.770

It is not rendered. With `grid.Visible` you control the rendering. Look at your HTML code. You will see, there is no code for the `GridView` if you set `grid.Visible = false`.

To hide it, use CSS instead: `display: none`:

```
grid.Style.Add("display", "none"); // not tested 
```

# service - Wix卸载服务问题

> ID：15701495
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:42.887
> 
> 标签：service, wix

所以基本上我要做的是在我的应用程序（运行服务）的安装程序中添加一些附加参数（即SERVICENAME和SERVICEDISPLAYNAME），而不是在安装程序中对它们进行硬编码。此更改后安装运行良好。但是我遇到的问题是当我运行静默卸载时。似乎服务控制在将服务从机器中删除之前并没有停止服务，并且我收到一个对话框，告诉我服务仍在运行，并询问我是否希望在卸载之前停止服务。我应该怎么做才能让它工作（即让服务控制在删除它之前自动停止服务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:28:15.973

[ServiceControl 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_servicecontrol.htm)只是底层[ServiceControl Table](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371634%28v=vs.85%29.aspx)的抽象。也不“做”任何事情。相反，它们只是表达需要做什么。服务的停止由[StopServices Action](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372028%28v=vs.85%29.aspx)执行，它从上述表格中获取它的订单。

在 Windows Installer 中，安装完成后属性不会自动保留。如果您记录安装程序，您可能会发现您的 SERVICENAME 属性为空，并且 StopServices 操作不知道如何处理它。

看看以下内容：

[WiX 工具集的“记住属性”模式](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)

如果您实施此模式，则 SERVICENAME 的数据应在卸载期间恢复，并且

# visual-studio-2010 - 通过宏插入并运行 nuget Package Manager Console 命令

> ID：15701498
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:47.193
> 
> 标签：visual-studio-2010, macros, nuget-package

我想在 Visual Studio 2010 中创建一个宏：

-打开包管理器控制台

- 在其中运行命令

宏录制工具只生成第一期的代码：

```
DTE.ExecuteCommand("View.PackageManagerConsole") 
```

关于如何注入和运行命令的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T12:13:10.657

试试这个： http: [//msdn.microsoft.com/en-us/library/a0003t62 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/a0003t62(v=vs.100).aspx)

有时，这很有帮助，不要尝试在谷歌中搜索主题：在 VS 2010 中运行宏

# javascript - Javascript Rewrite Webpage on the Fly

> ID：15701503
> 
> 赞同：0
> 
> 时间：2013-03-29T10:30:53.160
> 
> 标签：javascript, web-scraping

I have a webpage that looks like this;

```
<HTML><HEAD><META http-equiv="Refresh" content="1"></HEAD><BODY><H3>
DataIneed:   ##.## XX<br>
DataIneed2: ##.## XX
</H2></BODY></HTML> 
```

I need a script I can run on the host computer preferably from inside an html file, that will grab the ##.## after DataIneed: and DataIneed2: (which are numbers formatted like this -50.00 22.75

I do not have control of the site above it is generated from a device and I cannot change it, but all I want is to grab the numbers it generates, and throw them into a webpage I design.

I am trying to do this without having to install any addition software as they would all have to go through a long accreditation process to be allowed on the company network.

I am thinking JavaScript will be my answer, but I'm not sure how to go about this. I have looked on the web, seems to be that I am doing "screen scraping" or "web scraping" but most of the projects I have seen are fine with installing extra software, and also are geared towards actually scraping data off of webpages in bulk.

# wpf - Undo Redo using PostSharp for Nested property or collections

> ID：15701509
> 
> 赞同：1
> 
> 时间：2013-03-29T10:31:16.530
> 
> 标签：wpf, mvvm, observablecollection, postsharp, undo-redo

I am in midway implementing an UndoRedo container for a view model that contains nested properties and ObservableCollection. I am using PostSharp for Exception Handling in the application and thought of reusing it for implementing an undo-redo engine as stated in the article: [http://www.postsharp.net/aspects/examples/undoredo](http://www.postsharp.net/aspects/examples/undoredo)

Although the above article is for windowsForms which had binding limitations, I have made the engine to adopt the rich binding wpf platform and it is working nice for single properties.

I am wondering how to extend the UndoableAttribute to take care of Nested properties and collections. My tries and googling skills have proved futile till now. Any idea, or pointer to some article would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:42:17.653

这真的取决于你所追求的。在对象图上提供撤消功能可能是一项相当复杂的任务。您必须更具体地说明您想要实现的目标。

通常，您可以检测所有嵌套对象并编写一些专门的集合以将所有更改存储在某种全局容器中。

我们正在努力提供这样的功能，作为 PostSharp.Patterns 库未来版本的一部分——它应该适用于 3.1 或 3.2。

# protobuf-net - Protobuf-net annotation in composite objects

> ID：15701514
> 
> 赞同：0
> 
> 时间：2013-03-29T10:31:44.267
> 
> 标签：protobuf-net

Working with objects in protobuf-net, I create, with our code generator, simple POCOS with [ProtoContract] - [ProtoMember(..)]. What I should do with Composite objects, where every simple object has its protobuf-annotation ? e.g

```
 [ProtoContract]
   [ProtoInclude(1, typeof(RetailCustomer)]
    public class Customer
    {
      [ProtoMember(1)]
      public string Name {get;set;}
      [ProtoMember(...)] ..
    }

   [ProtoContract]     
    public class RetailCustomer:Customer
    {

      [ProtoMember(1)]
      public string Demographics {get;set;}
      bool Is Active;
    }

    [ProtoContract]
    public class Order
    {
      [ProtoMember(1)]
      public string Order_No {get;set;}
      [ProtoMember(...)] ..
    }

    How to handle the following ?   
    [ProtoContract]
    public class CustomerOrders
    {
      [ProtoMember(1)]
      public  RetailCustomer customer {get;set;}
      [ProtoMember(2)]
      public  List<Order>  Orders {get;set;}
     [ProtoMember(3)]
      public  int Year   {get;set;}
    } 
```

is this correct ?

thank you.

# java - Rectangle line and Dash Line

> ID：15701515
> 
> 赞同：0
> 
> 时间：2013-03-29T10:31:47.970
> 
> 标签：java, android, paint

If I draw with Rectangle line and after that I want to draw with dash line my rectangle line will be transformed in dash line. I use this code:

This is MyLine.java

```
public class MyLine { //  line
public float x,y;
public float xStart,yStart,xEnd,yEnd;

public Paint paint = new Paint();
Path path = new Path();

public MyLine()
{

    paint.setColor(Color.RED);
    paint.setStyle(Paint.Style.STROKE);
    paint.setPathEffect(new DashPathEffect(new float[]{20,30}, 0));
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(5f);
    path = new Path();
}

public void mouseDown(Path path,float xDown,float yDown){
    path.moveTo(xDown, yDown);
    path.lineTo(xDown, yDown);

    xStart = xDown;
    yStart = yDown;
}

public void mouseUp(Path path,float xUp,float yUp){
    path.lineTo(xUp, yUp);
    xEnd = xUp;
    yEnd = yUp;
}

public void draw(Canvas c){
    paint.setColor(Color.GREEN);
    paint.setStyle(Paint.Style.STROKE);
    paint.setPathEffect(new DashPathEffect(new float[]{10,20}, 0));
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(5f);
    path = new Path();

    c.drawLine(xStart,yStart,xEnd,yEnd,paint);
}

public void changeColor(int color){
    paint = new Paint(paint);
    paint.setColor(color);
    //myPaint.setColor(color);
}

} 
```

Here is some code from CanvasView.java where I think is problem.

```
public void setDashLine(){

    dashedLine = true;
    paint = new Paint();
    paint.setPathEffect(dashEffect);
    paint.setStyle(Paint.Style.STROKE);
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
    myCanvas = new Canvas();
    path = new Path();
}

public void setNormalLine(){
    paint.setColor(Color.RED);
    paint = new Paint();
    paint.setPathEffect(null);
    paint.setStyle(Paint.Style.STROKE);
    paint.setPathEffect(null);
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
    myCanvas = new Canvas();
    path = new Path();
}

protected void onDraw(Canvas canvas) {
paint.setPathEffect(null);
if(bitmap!=null){

    canvas.drawBitmap(bitmap, 0, 0, paint);
     for(MyCircle circle:circleList){// draw circles

         myCanvas.drawCircle(getCircleMidPointX(circle.firstX, circle.lastX),getCircleMidPointY(circle.firstY, circle.lastY),circle.radius,myPaint);
     }

}
for(MyLine line:lineList){ //draw lines
     if(dashedLine)
         line.paint.setPathEffect(dashEffect);
     else
         line.paint.setPathEffect(null);
        canvas.drawLine(line.xStart, line.yStart, line.xEnd, line.yEnd, line.paint);
  }
final OnTouchListener drawLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              undonePaths.clear();
              path.reset();
              myLine = new MyLine();
              myLine.xStart = event.getX();
              myLine.yStart = event.getY();

            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            myLine.xEnd = event.getX();
            myLine.yEnd = event.getY();

            invalidate();
            lineList.add(myLine);
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
};

final OnTouchListener drawDashedLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              myLine = new MyLine();

             return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:

            invalidate();
            lineList.add(myLine); 
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
}; 
```

If you can see something where is wrong please tell me how can make to be useful.

# java - 检测服务器和客户端之间的连接丢失

> ID：15701517
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:31:55.093
> 
> 标签：java, php

服务器如何知道客户端连接丢失？这会触发事件吗？这是否可以存储代码（服务器端），以便它可以在连接丢失发生之前执行？

在以下情况下可能会发生这种连接丢失：

*   闲置太久。
*   客户端终止。

等等

这是我特别要求 Jsp 和 php 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:46:00.373

这取决于您正在谈论的协议，但“连接”通常是通过三次握手建立的，这会导致双方简单地同意他们现在已“连接”。这意味着双方都在一个表中记住在端口*x上有一个到 IP* *abcd*的开放连接，以及这个“连接”与什么上下文相关联。然后将来自该“连接”的所有传入数据传递到关联的上下文。

 *仅此而已，没有真正的“物理”联系；这只是两方之间商定的状态。

根据协议，可以使用适当的数据包正式终止连接。一方将此数据包发送给另一方，告诉它“连接”已终止；双方都删除了表格条目，就是这样。

如果在没有发送此数据包的情况下中断连接，则任何一方都不会知道。只有下一次一方试图向另一方发送数据时，这个问题才会变得明显。

根据协议，如果在一定时间内没有接收到数据，则连接可能会自动被视为陈旧并终止。在这种情况下，会更快地发现死连接，但需要双方之间不断地来回切换。

所以简而言之：是的，有一个服务器事件可以触发，但不保证会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T10:37:14.537

当您关闭一个套接字时，会通知另一端的套接字。但是，如果连接丢失不正常（例如，网络电缆被拔掉，或者计算机断电），那么您可能不会发现。

为了解决这个问题，您可以发送定期消息来检查连接。如果发送失败，则连接已中断。不过，请确保您将套接字设置为仅等待一段合理的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:37:23.023

如果您谈论的是典型的客户端服务器架构，则服务器不应该为与客户端的连接而烦恼。只有客户端应该关心与服务器的连接。客户端应采取措施避免连接被断开，例如定期发送保持活动消息或类似消息以避免超时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:37:25.620

为什么服务器需要担心连接丢失/终止。

服务器的工作是为来自客户端的请求提供服务。就是这样。如果客户端没有从服务器接收到它期望的数据，那么它可以采取适当的措施。如果在服务器为向客户端提供数据而进行一些处理时连接断开；那么服务器也不能做太多的http请求是由客户端发起的。

因此，如果由于某种原因没有得到响应，客户端可以发出新请求。*

# ruby-on-rails - Ruby on Rails, get objects out of contoller

> ID：15701518
> 
> 赞同：0
> 
> 时间：2013-03-29T10:32:02.830
> 
> 标签：ruby-on-rails, controller

My update.html.erb:

```
<% @uploads.each do |upload| %>

        <p><%= upload.name %></p>               
        <p class="grey">

    <%= best_in_place upload, :place, type: :select, collection: [ ["Home", "Home"],["Sauna", "Sauna"]]%>  

            </p>    
  <%end%> 
```

controller:

```
 def show
      @uploads = Upload.all 
  end
  def update
    @uploads = Upload.all
    @upload = Upload.find(params[:id])

    respond_to do |format|
      if @upload.update_attributes(params[:upload])
        format.html { redirect_to @upload, notice: 'Upload was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @upload.errors, status: :unprocessable_entity }
      end
    end
  end 
```

The problem is that I get the error: `undefined method`each' for nil:NilClass` , meaning that my controllers do not pass my object to the variable @uploads. Why do not the do that and how can I fix it? Thanks in advance.

ps. I could write at the top of my view something like this:

```
<% @uploads=Uploads.all%> 
```

But that is not the best idea. Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:39:30.043

如果您的路由是 RESTful 路由，则更新方法是 HTTP PUT 方法，它不应该有模板。您正在寻找的是一个编辑操作：

```
def edit
    @uploads = Upload.all
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:38:08.670

```
<% @uploads.each do |upload| %>

<%end if @uploads.present? %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:49:53.583

@katja：参考您的评论。
update 是一个 HTTP PUT 请求，您无法在其中获取记录，但 edit 是一个获取请求，您可以在编辑操作中获取所有记录。

您可以将 before_filter 回调添加到您的编辑操作。

```
before_filter :get_all_uploads, only: [:edit]  

def get_all_uploads  
  @uploads = Upload.all  
end 
```

在你的 edit.html.erb 你可以做

```
<% @uploads.each do |upload| %>

    <p><%= upload.name %></p>               
    <p class="grey">

<%= best_in_place upload, :place, type: :select, collection: [ ["Home", "Home"],["Sauna", "Sauna"]]%>  

        </p>    
  <% end %> 
```

# java - 插入按钮连接

> ID：15701521
> 
> 赞同：0
> 
> 时间：2013-03-29T10:32:11.707
> 
> 标签：java, database, ms-access

我正在开发一个java程序，后端：MS Access。我写的代码没有错误或异常，所有其他按钮都工作正常。

只有“插入”按钮（用于从 GUI 插入数据库）不起作用.. net beans 没有显示错误。

```
 b1.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed (ActionEvent e)
            {
                String fname=t1.getText();
                String lname=t2.getText();
                String age=t3.getText();

                try{
                    rs.moveToInsertRow();//moves cursor to new row

                    rs.updateString("Fname", fname);
                    rs.updateString("Lname", lname);
                    rs.updateString("age", age);
                    rs.insertRow();

                    //close two variable
                    st.close();
                    rs.close();
                catch(Exception ex){

                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:33:43.597

跟着这些步骤：

1.  添加**ex.printStackTrace();** 在你的 catch 块中。

    ```
     //close two variable
                    st.close();
                    rs.close();
                catch(Exception ex){
                      ex.printStackTrace();

                } 
    ```

2.  运行您的应用程序并尝试插入一条记录

3.  这将抛出错误消息，并且由于这个新代码，它将在您的控制台或日志中显示完整的异常堆栈跟踪。

您可能可以从错误消息中找到问题所在。如果没有将错误消息粘贴到社区以获得进一步的帮助。

# c# - 上传图片并以视图状态保存文件流

> ID：15701523
> 
> 赞同：0
> 
> 时间：2013-03-29T10:32:16.323
> 
> 标签：c#, asp.net

```
 protected void upload_Click(object sender, EventArgs e)
{  
    if (Upload.Value !="")
    {
        System.IO.Stream fs = Upload.PostedFile.InputStream;
        img_uploadStream = Upload.PostedFile.InputStream;
        System.IO.BinaryReader br = new System.IO.BinaryReader(fs);
        Byte[] bytes = CreateThumbnail(br.ReadBytes((Int32)fs.Length),150);
        string base64String = Convert.ToBase64String(bytes, 0, bytes.Length);
        imageField.Src = String.Format("data:{0};base64,{1}", "image/jpeg", base64String);
    }
} 
```

上传图片后，Upload.PostedFile.InputStream 已设置为空值。我想将此输入流保存到 asp.net 视图状态以重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:35:17.823

您可以使用此代码

```
public Byte[] YourImage
{
get
{
if(ViewState["Key"] != null)
{
 return (Byte[]) ViewState["Key"];
}
return null;
}

set
{
  ViewState["Key"] = value;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:37:58.667

在 upload_Click 中设置 ViewState：

```
ViewState["ImageStream"]=Upload.PostedFile.InputStream; 
```

然后，您可以在要使用的页面中的任何位置获取视图状态：

```
System.IO.Stream fstream=(System.IO.Stream)ViewState["ImageStream"]; 
```

# php - 使用 phpexcel 如何设置列格式？

> ID：15701526
> 
> 赞同：3
> 
> 时间：2013-03-29T10:32:24.903
> 
> 标签：php, phpexcel

我正在使用现有的 Excel 文件，第一行包含纯文本，稍后用作模板。然后我将一些列格式更改为货币、会计、日期...等 但是在保存的文件中，新创建的行中的所有单元格似乎都被标记`general`了，尽管原始的纯文本行似乎仍然分配了正确的格式。

我的代码：

```
$xl_tmplt = ((isset($_REQUEST['excel_template']) && $_REQUEST['excel_template'] != "") 
    ? $_REQUEST['excel_template'] 
    : "report_tab1.xlsx");

require_once 'includes/classes/PHPExcel/PHPExcel.php';

$cacheMethod   = PHPExcel_CachedObjectStorageFactory:: cache_to_phpTemp;
$cacheSettings = array('memoryCacheSize' => '8MB');
PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);

$tmp_workbook = PHPExcel_IOFactory::load($tmp_folder_path . '/templates/' . $xl_tmplt);
$tmp_workbook->setActiveSheetIndex(0);

$sheet = $tmp_workbook->getActiveSheet();
$sheet->fromArray($arr, '', 'A2');

$objWriter = PHPExcel_IOFactory::createWriter($tmp_workbook, 'Excel2007');
$objWriter->save($tmp_folder_path . "output/$filename");

$result['type'] = "success";
$result['msg']  = "The file was successfully created."; 
```

知道如何加载具有预定义列格式的 excel 文件并使用它来生成新的 excel 吗？或者在生成过程中更改/设置列或单元格范围的格式？

PS：我对excel不太好，所以我可能以错误的方式设置了列格式。基本上我点击了选择列的列字母，然后在上面的下拉列表中更改了格式。如果这是错误的，请告诉我。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-29T10:43:42.413

请查看以下链接以设置行和单元格样式的示例

[http://phpexcel.codeplex.com/workitem/7333](http://phpexcel.codeplex.com/workitem/7333)

更新：关于格式化数字、文本、日期和货币，请查看以下链接

[PHPExcel 格式化](http://phpexcel.codeplex.com/workitem/16178)

# javascript - OnSuccess of JQ navigate user to another page

> ID：15701528
> 
> 赞同：0
> 
> 时间：2013-03-29T10:32:30.147
> 
> 标签：javascript, jquery, asp.net

Evening All, I have a Jquery function running from my aspx page (When a button is clicked). It runs a [webmethod] which if successful returns to the 'OnSuccess' function. From here I want to navigate the user to: /Project/Invoices/List.aspx

```
 function Onsuccess(CommentSuccessfullyUpdated) {
        if (CommentSuccessfullyUpdated == "TRUE") {
            window.location = Invoices/List.aspx //My attempt, but unsuccessful
        }
        else {
            alert("Invoice/Details- Error: Removing Invoice.");
        }
    } 
```

I think its something to do with window.location but this is as far as I have got..... Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:51:30.650

您的 List.aspx 页面**URL 需要用引号括起来**，`" "`或者`' '`。

```
if (CommentSuccessfullyUpdated == "TRUE") {
    window.location = 'Invoices/List.aspx';
} 
```

# ssl - Windows 8：SSL 证书绑定以编程方式和通过 netsh 均失败

> ID：15701531
> 
> 赞同：0
> 
> 时间：2013-03-29T10:32:55.150
> 
> 标签：ssl, binding, windows-8, certificate, port

我们有一个自动生成证书并使用 httpapi 将其绑定到选定端口的应用程序。在 Windows 7 和 2003/2008 服务器下，这就像一个魅力。证书也可以通过解除绑定的方式重新绑定到其他端口，然后绑定到新的端口。

但是，在 Windows 8 下，只有从旧端口解除绑定才能成功。尝试将证书绑定到新端口值失败，错误代码 1312 显示消息“指定的登录会话不存在。它可能已经终止。”

奇怪的是，当尝试通过**netsh**添加绑定证书时，它也会在提升的控制台中失败，并显示相同的错误和消息（“SSL 证书添加失败，错误：1312|指定的登录会话不存在。它可能已经已终止。”），无论端口号如何。

为了增加悬念，该应用程序有一个安装程序，该安装程序最初在安装时绑定证书，并在卸载时取消绑定。而这件事永远不会失败！安装程序在“Windows 7”操作系统环境下工作，而应用程序在“Windows Vista”下，如果这可能是一个线索。控制台位于“Windows 8”上下文中。

有人在这个操作系统下遇到过类似的问题吗？任何想法为什么会发生这种情况？

任何帮助都非常感谢，在此先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:23:45.403

在我们的证书生成代码中，我们使用 X509Store 类的方法将证书添加到存储中。在 Windows 8 下，即使应用程序以管理员身份运行，这也会使证书“不受信任”。原因可能是 .NET 4.5 中类的不同实现或由于应用程序运行的操作系统上下文而施加的限制。

通过 Process 类调用“certutil.exe”以将证书添加到存储区，从而解决了该问题。

# java - SQL 只返回年份，而不是日期或月份

> ID：15701532
> 
> 赞同：1
> 
> 时间：2013-03-29T10:32:56.263
> 
> 标签：java, mysql, jakarta-ee, jdbc

作为一名 Java 学生，我正在从事一个小型个人项目，我被要求创建一个显示 Mysql 数据库的简单网页。在 mySql 中，我以 DATE 类型声明了我的日期。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/15500f077874894ac4bf3b05978718fc.png)

下面的 java 代码显示了我如何从我的数据库中检索数据。

```
private Destination resultSetRowToCursist(ResultSet resultSet)
            throws SQLException {
        return new Destination (resultSet.getInt("CountryID"),
                resultSet.getString("Destination"),
                resultSet.getDate("DepartureDate"),
                resultSet.getDate("ReturnDate"), 
                resultSet.getInt("Price"),
                resultSet.getInt("AvailableSeats"));
    } 
```

下面是我网页上输出的截图。我网页上的 DepartureDate 和 ReturnDate 格式应反映与数据库中相同的格式

![在此处输入图像描述](../Images/e89d92dd89713e2f375052f6c590efa5.png)

这是我的 JSP 代码

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="styles/default.css">

    <title>Travels</title>
    </head>
    <body>

    <table border=1>

            <tr>

                <th>CountryId</th>
                <th>Country</th>
                <th>DepartureDate</th>

                <th>ReturnDate</th>

                <th>Price</th>
                <th>AvailableSeats</th>

    </tr>

            <c:forEach var="destinationArrayListItem" items="${DestinationArrayList}">

                <tr>

                    <td>${destinationArrayListItem.countryID}</td>
                    <td>${destinationArrayListItem.destination}</td>
                    <td>${destinationArrayListItem.departureDate}</td>
                    <td>${destinationArrayListItem.returnDate}</td>
                    <td>${destinationArrayListItem.price}</td>
                    <td>${destinationArrayListItem.availableSeats}</td>

                </tr>

            </c:forEach>

        </table>

        <br />

        <c:url var="index" value="/IndexServlet" />

        <a class="HPbutton" href="${index}">Home Page</a>

    </body>
    </html> 
```

我的目的地类与构造函数和吸气剂

```
import java.io.Serializable;
import java.sql.Date;

public class Destination implements Serializable {

    private static final long serialVersionUID = 1L;

    private int countryID;

    private String destination;

    private  Date departureDate;
    private  Date returnDate;
    private  int price;
    private  int availableSeats;

    public Destination () {
          this.countryID=0;;

          this.destination="geen";

          this.departureDate= null;
          this.returnDate= null;
          this.price=0;
          this.availableSeats=0;

    }

    public Destination(int countryID, String destination, Date departureDate,
            Date returnDate, int price, int availableSeats) {
        this.countryID = countryID;
        this.destination = destination;
        this.departureDate = departureDate;
        this.returnDate = returnDate;
        this.price = price;
        this.availableSeats = availableSeats;

    }

    public int getCountryID() {
        return countryID;
    }

    public void setCountryID(int countryID) {
        this.countryID = countryID;
    }

    public Date getDepartureDate() {
        return departureDate;
    }

    public void setDepartureDate(Date departureDate) {
        this.departureDate = departureDate;
    }

    public String getDestination() {
        return destination;
    }

    public void setDestination(String destination) {
        this.destination = destination;
    }

    public Date getReturnDate() {
        return returnDate;
    }

    public void setReturnDate(Date returnDate) {
        this.returnDate = returnDate;
    }

    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }

    public int getAvailableSeats() {
        return availableSeats;
    }

    public void setAvailableSeats(int availableSeats) {
        this.availableSeats = availableSeats;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:48:31.183

您使用的是 javax.sql.Date 还是 java.util.Date。记住 EL 标签使用 toString() 方法，可能值得格式化日期，如下面的线程所示：

[将 java.util.Date 转换为字符串](https://stackoverflow.com/questions/5683728/convert-java-util-date-to-string)

另一种方法是按以下方式使用 JSTL 标记：

```
<td><fmt:formatDate value="${destinationArrayListItem.departureDate}" pattern="MM/yyyy" /></td>
<td><fmt:formatDate value="${destinationArrayListItem.returnDate}" pattern="MM/yyyy" /></td> 
```

为此，您必须将 JSTL 库添加到您的 JavaEE 应用程序，如下所示：

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %> 
```

请注意，这与 JSTL 核心不同。

# python - 鼻子测试 - `all_config_files` 和 `user_config_files` 的输出

> ID：15701540
> 
> 赞同：0
> 
> 时间：2013-03-29T10:33:23.367
> 
> 标签：python, nose, nosetests

我有以下目录结构：

```
main/
    |setup.cfg
    |foo.cfg
    |tests/
          |setup.cfg
          |foo.cfg
          |test_simple.py 
```

并测试`test_simple.py`：

```
from nose.tools import *
from nose.config import all_config_files, user_config_files

def test_singe():
    print 'all:', all_config_files()
    print 'user:', user_config_files()
    assert_true(False) 
```

从`main/`我跑`nosetests tests/test_simple.py`，我得到：

```
all: ['setup.cfg']
user: [] 
```

我认为要么`all_config_files`或`user_config_files`将返回所有配置文件。但我只得到顶部`setup.cfg`。

根据[文档](https://nose.readthedocs.org/en/latest/api/config.html)：

```
all_config_files()
    Return path to any existing user config files, plus any setup.cfg
    in the current working directory.

user_config_files()
    Return path to any existing user config files 
```

我希望`main/tests/*.cfg`找到文件。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:39:10.117

根据[源代码](https://github.com/nose-devs/nose/blob/master/nose/config.py)，`user_config_files`只会从用户的主文件夹返回配置：

```
config_files = [
    # Linux users will prefer this
    "~/.noserc",
    # Windows users will prefer this
    "~/nose.cfg"
    ]

...

def user_config_files():
    """Return path to any existing user config files
    """
    return filter(os.path.exists,
                  map(os.path.expanduser, config_files)) 
```

`all_config_files``user_config_files`将从根目录（运行nosetests的地方）返回+ setup.cfg：

```
def all_config_files():
    """Return path to any existing user config files, plus any setup.cfg
    in the current working directory.
    """
    user = user_config_files()
    if os.path.exists('setup.cfg'):
        return user + ['setup.cfg']
    return user 
```

希望有帮助。

# asp.net - SignalR1.0.1 - 维护 connectionId

> ID：15701547
> 
> 赞同：0
> 
> 时间：2013-03-29T10:33:49.197
> 
> 标签：asp.net, signalr, signalr-hub

我正在使用 SignalR 1.0.1，即使在页面刷新时我也想保持连接 ID。
是的，我知道，这是信号器的一个常见问题，所以我也得到了很好的回答，但在所有这些问题中，他们都提到了我的应用程序中缺少的**“IConnectionIdFactory”接口。**

[1) https://stackoverflow.com/questions/9518394/signalr-maintaining-user-connection-ids](https://stackoverflow.com/questions/9518394/signalr-maintaining-user-connection-ids)
[2) http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/](http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/)

在此之前我正在使用 SignalR alpha 版本，并且我已经使用**"IConnectionIdPrefixGenerator"**管理了这个问题。但在新版本中，这个接口也不见了。

谁能指导我如何以正确的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:31:07.480

在 1.0 中不再有任何推荐的模式来设置或维护 SignalR 客户端的连接 ID。我建议创建单个用户组来代替 ConnectionIds。

[SignalR 1.0 beta 连接工厂](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)

如果您不需要使用自定义字符串来处理发送到客户端的消息并且您可以信任您的客户端，则可以在每个 SignalR 请求的查询字符串中包含元数据。

[如何参数化 SignalR 路由？](https://stackoverflow.com/questions/15486171/how-to-parameterize-a-signalr-route/15490737#15490737)

# ios - SDWebImage 在滚动之前不会加载远程图像

> ID：15701556
> 
> 赞同：13
> 
> 时间：2013-03-29T10:34:07.787
> 
> 标签：ios, objective-c, uitableview, lazy-loading, sdwebimage

我正在使用 SDWebImage 库将远程图像加载到使用我创建的自定义单元格类的表格视图中。我只是使用

```
[cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"loading.jpg"]]; 
```

在 cellForRowAtIndexPath: 现在的问题是它只在可见单元格中加载图像，而不是在屏幕外的单元格中，我必须向上和向下滚动才能加载它们。有什么方法可以加载所有图像而无需滚动表格视图。提前致谢！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T20:09:27.370

如果要预取行，可以响应`UIScrollViewDelegate`方法来确定表格滚动何时完成，从而触发行的预取。您可以使用执行预取`SDWebImagePrefetcher`（在我原来的答案中，我对这个有用的类有点不屑一顾，但现在它似乎工作得相对好）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // the details don't really matter here, but the idea is to fetch data, 
    // call `reloadData`, and then prefetch the other images

    NSURL *url = [NSURL URLWithString:kUrlWithJSONData];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {
        if (connectionError) {
            NSLog(@"sendAsynchronousRequest error: %@", connectionError);
            return;
        }

        self.objects = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];

        [self.tableView reloadData];

        [self prefetchImagesForTableView:self.tableView];
    }];
}

// some of the basic `UITableViewDataDelegate` methods have been omitted because they're not really relevant 
```

这是简单的`cellForRowAtIndexPath`（不完全相关，但只是表明如果您使用`SDWebImagePrefetcher`，则不必乱用`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    NSAssert([cell isKindOfClass:[CustomCell class]], @"cell should be CustomCell");

    [cell.customImageView setImageWithURL:[self urlForIndexPath:indexPath] placeholderImage:nil];
    [cell.customLabel setText:[self textForIndexPath:indexPath]];

    return cell;
} 
```

这些`UIScrollViewDelegate`方法在滚动完成时预取更多行

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    // if `decelerate` was true for `scrollViewDidEndDragging:willDecelerate:`
    // this will be called when the deceleration is done

    [self prefetchImagesForTableView:self.tableView];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    // if `decelerate` is true, then we shouldn't start prefetching yet, because
    // `cellForRowAtIndexPath` will be hard at work returning cells for the currently visible
    // cells.

    if (!decelerate)
        [self prefetchImagesForTableView:self.tableView];
} 
```

您显然需要实现一个预取例程。这会获取`NSIndexPath`可见单元格每一侧的单元格的值，获取它们的图像 URL，然后预取该数据。

```
/** Prefetch a certain number of images for rows prior to and subsequent to the currently visible cells
 *
 * @param  tableView   The tableview for which we're going to prefetch images.
 */

- (void)prefetchImagesForTableView:(UITableView *)tableView
{
    NSArray *indexPaths = [self.tableView indexPathsForVisibleRows];
    if ([indexPaths count] == 0) return;

    NSIndexPath *minimumIndexPath = indexPaths[0];
    NSIndexPath *maximumIndexPath = [indexPaths lastObject];

    // they should be sorted already, but if not, update min and max accordingly

    for (NSIndexPath *indexPath in indexPaths)
    {
        if (indexPath.section < minimumIndexPath.section || (indexPath.section == minimumIndexPath.section && indexPath.row < minimumIndexPath.row)) minimumIndexPath = indexPath;
        if (indexPath.section > maximumIndexPath.section || (indexPath.section == maximumIndexPath.section && indexPath.row > maximumIndexPath.row)) maximumIndexPath = indexPath;
    }

    // build array of imageURLs for cells to prefetch

    NSMutableArray *imageURLs = [NSMutableArray array];
    indexPaths = [self tableView:tableView priorIndexPathCount:kPrefetchRowCount fromIndexPath:minimumIndexPath];
    for (NSIndexPath *indexPath in indexPaths)
        [imageURLs addObject:[self urlForIndexPath:indexPath]];
    indexPaths = [self tableView:tableView nextIndexPathCount:kPrefetchRowCount fromIndexPath:maximumIndexPath];
    for (NSIndexPath *indexPath in indexPaths)
        [imageURLs addObject:[self urlForIndexPath:indexPath]];

    // now prefetch

    if ([imageURLs count] > 0)
    {
        [[SDWebImagePrefetcher sharedImagePrefetcher] prefetchURLs:imageURLs];
    }
} 
```

这些是用于获取`NSIndexPath`紧接在可见单元格之前以及紧接在可见单元格之后的行的实用方法：

```
/** Retrieve NSIndexPath for a certain number of rows preceding particular NSIndexPath in the table view.
 *
 * @param  tableView  The tableview for which we're going to retrieve indexPaths.
 * @param  count      The number of rows to retrieve
 * @param  indexPath  The indexPath where we're going to start (presumably the first visible indexPath)
 *
 * @return            An array of indexPaths.
 */

- (NSArray *)tableView:(UITableView *)tableView priorIndexPathCount:(NSInteger)count fromIndexPath:(NSIndexPath *)indexPath
{
    NSMutableArray *indexPaths = [NSMutableArray array];
    NSInteger row = indexPath.row;
    NSInteger section = indexPath.section;

    for (NSInteger i = 0; i < count; i++) {
        if (row == 0) {
            if (section == 0) {
                return indexPaths;
            } else {
                section--;
                row = [tableView numberOfRowsInSection:section] - 1;
            }
        } else {
            row--;
        }
        [indexPaths addObject:[NSIndexPath indexPathForRow:row inSection:section]];
    }

    return indexPaths;
}

/** Retrieve NSIndexPath for a certain number of following particular NSIndexPath in the table view.
 *
 * @param  tableView  The tableview for which we're going to retrieve indexPaths.
 * @param  count      The number of rows to retrieve
 * @param  indexPath  The indexPath where we're going to start (presumably the last visible indexPath)
 *
 * @return            An array of indexPaths.
 */

- (NSArray *)tableView:(UITableView *)tableView nextIndexPathCount:(NSInteger)count fromIndexPath:(NSIndexPath *)indexPath
{
    NSMutableArray *indexPaths = [NSMutableArray array];
    NSInteger row = indexPath.row;
    NSInteger section = indexPath.section;
    NSInteger rowCountForSection = [tableView numberOfRowsInSection:section];

    for (NSInteger i = 0; i < count; i++) {
        row++;
        if (row == rowCountForSection) {
            row = 0;
            section++;
            if (section == [tableView numberOfSections]) {
                return indexPaths;
            }
            rowCountForSection = [tableView numberOfRowsInSection:section];
        }
        [indexPaths addObject:[NSIndexPath indexPathForRow:row inSection:section]];
    }

    return indexPaths;
} 
```

那里有很多，但实际上，`SDWebImage`它`SDWebImagePrefetcher`正在做繁重的工作。

为了完整起见，我在下面包含了我的原始答案。

* * *

原答案：

如果您想使用 进行一些预取`SDWebImage`，可以执行以下操作：

1.  在您的通话中添加一个完成块`setImageWithURL`：

    ```
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        NSLog(@"%s", __FUNCTION__);

        static NSString *cellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        TableModelRow *rowData = self.objects[indexPath.row];

        cell.textLabel.text = rowData.title;
        [cell.imageView setImageWithURL:rowData.url
                       placeholderImage:[UIImage imageNamed:@"placeholder.png"]
                              completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
                                  [self prefetchImagesForTableView:tableView];
                              }];

        return cell;
    } 
    ```

    我必须承认我真的不喜欢`prefetcher`在这里调用我的例程（我希望 iOS 有一些不错的`didFinishTableRefresh`委托方法），但它可以工作，即使它调用例程的次数比我真正想要的要多。我只是确保下面的例程确保它不会发出多余的请求。

2.  无论如何，我编写了一个预取例程来查找例如接下来的十张图像：

    ```
    const NSInteger kPrefetchRowCount = 10;

    - (void)prefetchImagesForTableView:(UITableView *)tableView
    {
        // determine the minimum and maximum visible rows

        NSArray *indexPathsForVisibleRows = [tableView indexPathsForVisibleRows];
        NSInteger minimumVisibleRow = [indexPathsForVisibleRows[0] row];
        NSInteger maximumVisibleRow = [indexPathsForVisibleRows[0] row];

        for (NSIndexPath *indexPath in indexPathsForVisibleRows)
        {
            if (indexPath.row < minimumVisibleRow) minimumVisibleRow = indexPath.row;
            if (indexPath.row > maximumVisibleRow) maximumVisibleRow = indexPath.row;
        }

        // now iterate through our model;
        // `self.objects` is an array of `TableModelRow` objects, one object
        // for every row of the table.

        [self.objects enumerateObjectsUsingBlock:^(TableModelRow *obj, NSUInteger idx, BOOL *stop) {
            NSAssert([obj isKindOfClass:[TableModelRow class]], @"Expected TableModelRow object");

            // if the index is within `kPrefetchRowCount` rows of our visible rows, let's
            // fetch the image, if it hasn't already done so.

            if ((idx < minimumVisibleRow && idx >= (minimumVisibleRow - kPrefetchRowCount)) ||
                (idx > maximumVisibleRow && idx <= (maximumVisibleRow + kPrefetchRowCount)))
            {
                // my model object has method for initiating a download if needed

                [obj downloadImageIfNeeded];
            }
        }];
    } 
    ```

3.  在下载例程中，您可以检查图像下载是否已开始，如果没有，则开始下载。为此，我在我的类（支持我的表的各个行的模型类）中`SDWebImage`保留了一个`weak`指向网络图像操作的指针：`TableModelRow`

    ```
    @property (nonatomic, weak) id<SDWebImageOperation> webImageOperation; 
    ```

    然后我让`downloadImageIfNeeded`例程开始下载，如果它还没有（你可以看到为什么这样做`weak`如此重要......我正在检查该行是否在开始另一个操作之前已经有一个待处理的操作）。我没有对下载的图像做任何事情（出于调试目的，没有记录下载完成的事实），而只是下载并让`SDImageWeb`我跟踪缓存的图像，所以当`cellForRowAtIndexPath`以后请求图像时用户向下滚动，它就在那里，准备就绪并等待。

    ```
    - (void)downloadImageIfNeeded
    {
        if (self.webImageOperation)
            return;

        SDWebImageManager *imageManager = [SDWebImageManager sharedManager];

        self.webImageOperation = [imageManager downloadWithURL:self.url
                                                       options:0
                                                      progress:nil
                                                     completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished) {
                                                         NSLog(@"%s: downloaded %@", __FUNCTION__, self.title);
                                                         // I'm not going to do anything with the image, but `SDWebImage` has now cached it for me
                                                     }];
    } 
    ```

    `imageManager.imageCache`我的一部分认为首先调用实例方法可能更健壮`queryDiskCacheForKey`，但是在进行了一些测试之后，它看起来并不需要（`downloadWithURL`无论如何对我们来说都是这样）。

我应该指出该`SDImageWeb`库确实有一个`SDWebImagePrefetcher`类（请参阅[文档](http://hackemist.com/SDWebImage/doc/Classes/SDWebImagePrefetcher.html)）。类的名称非常有前途，但是查看代码，完全尊重其他优秀的库，这对我来说感觉不是很健壮（例如，它是一个简单的 URL 列表，如果你再做一次，它取消了先前的列表，没有“添加到队列”或类似的概念）。这是一个很有前途的想法，但执行起来有点弱。当我尝试它时，我的用户体验明显受到影响。

所以，我倾向于不使用`SDWebImagePrefetcher`（至少在改进之前），并坚持我的基本预取技术。它不是非常复杂，但它似乎工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:17:01.843

我只需要解决这个确切的问题并且不想要预取器的开销。内置的 imageView 属性肯定会发生一些额外的幕后工作，阻止加载，因为新的 UIImageView 工作得很好。

如果您不介意（或已经）使用 UITableViewCell 的子类，我的解决方案非常干净：

1.  子类 UITableViewCell。
2.  在您的子类中，隐藏 self.imageView。
3.  创建您自己的 UIImageView 子视图并设置*此*视图的图像。

这是我自己的代码的修改版本（此处未记录的是设置框架以匹配 iOS Photo 应用程序专辑封面的大小和位置）：

**YourTableCell.h**

```
@interface YourTableCell : UITableViewCell
    @property (nonatomic, strong) UIImageView *coverPhoto;
@end 
```

**YourTableCell.m**

```
@implementation YourTableCell

@synthesize coverPhoto;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.imageView.image = nil;
        self.coverPhoto = [[UIImageView alloc] init];

        // Any customization, such as initial image, frame bounds, etc. goes here.        

        [self.contentView addSubview:self.coverPhoto];
    }
    return self;
}
//...
@end 
```

**你的TableViewController.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    YourTableCell *cell = (YourTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //...
    [cell.coverPhoto setImageWithURL:coverUrl placeholderImage:nil options:SDWebImageCacheMemoryOnly];
    //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:17:38.947

这是一个示例，您需要为您的目的实现它。
**你的 UITableView 代表：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    YourCustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"YourCustomTableViewCellReuseIdentifier"];

    if (!cell)
    {
        cell = [[[YourCustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                               reuseIdentifier:CellIdentifier];        
    }

    NSString *imageURL = // ... get image url, typically from array
    [cell loadImageWithURLString:imageURL forIndexPath:indexPath]; 

    return cell;
} 
```

**您的自定义 UITableViewCell .h 文件**：

```
#import <UIKit/UIKit.h>
#import "UIImageView+WebCache.h"
#import "SDImageCache.h"

@interface YourCustomTableViewCell
{
    NSIndexPath *currentLoadingIndexPath;
}

- (void)loadImageWithURLString:(NSString *)urlString forIndexPath:(NSIndexPath *)indexPath;

@end 
```

**您的自定义 UITableViewCell .m 文件**：

```
// ... some other methods

- (void)loadImageWithURLString:(NSString *)urlString forIndexPath:(NSIndexPath *)indexPath
{
    currentLoadingIndexPath = indexPath;
    [self.imageView cancelCurrentImageLoad];
    [self.imageView setImage:nil];

    NSURL *imageURL = [NSURL URLWithString:urlString];
    [self.imageView setImageWithURL:imageURL
                   placeholderImage:nil
                            options:SDWebImageRetryFailed
                          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
    {
        if (currentLoadingIndexPath != indexPath)
        {
            return;
        }

        if (error)
        {
            ... // handle error
        }
        else
        {
            [imageView setImage:image];
        }
    }];
}

// ... some other methods 
```

`currentLoadingIndexPath`需要检测我们是否将此单元格重用于另一个图像，而不是在用户滚动表格视图时下载的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T01:43:14.423

我遇到了同样的问题，我发现 UIImageView+WebCache 在有新下载时取消上次下载。

我不确定这是否是作者的意图。所以我`category`在SDWebImage的基础上写了一个新的UIImageView。

便于使用：

```
[cell.imageView mq_setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                   groupIdentifier:@"customGroupID"
                         completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {

                         }]; 
```

查看更多：[ImageDownloadGroup](https://github.com/maquannene/MQImageDownloadGroup)

高级用法：

```
//  create customGroup
MQImageDownloadGroup *customGroup = [[MQImageDownloadGroup alloc] initWithGroupIdentifier:@"tableViewCellGroup"];
customGroup.maxConcurrentDownloads = 99;

//  add to MQImageDownloadGroupManage
[[MQImageDownloadGroupManage shareInstance] addGroup:customGroup];

//  use download group
[cell.imageView mq_setImageWithURL:@"https://xxx"
                   groupIdentifier:@"tableViewCellGroup"
                         completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {

                         }]; 
```

# ios - GKMatchmaker 自定义媒人视图控制器已取消

> ID：15701561
> 
> 赞同：1
> 
> 时间：2013-03-29T10:34:28.907
> 
> 标签：ios, objective-c, cocos2d-iphone

我正在实现一个自定义 matchmaker 视图控制器，并使用 GKMatchmaker 以编程方式使用以下方法为两个玩家找到匹配项：

```
[[GKMatchmaker sharedMatchmaker] findMatchForRequest:request withCompletionHandler:^(GKMatch *thisMatch, NSError *error) 
```

我的自定义 matchmaker 视图控制器有一个按钮，允许玩家通过 [[GKMatchmaker sharedMatchmaker] cancel] 取消比赛。

当玩家 1 取消比赛时，有时 GKMatch 已经与玩家 2 创建。我如何通知玩家 2 玩家 1 已取消比赛并开始搜索另一场比赛？

我想答案可能在于 GKMatchmakerViewController 类和调用委托方法 matchmakerViewControllerWasCancelled 之前的代码。有谁知道我怎么能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:15:20.363

在玩了这个之后，我意识到当玩家在创建 GKMatch 之后但在玩家连接之前取消比赛时，以下函数中的 GKPlayerStateDisconnected 需要很长时间才能被调用：

```
- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state 
```

如果 GKMatch 已创建但玩家未连接，我会在约 15 秒后再次调用 findMatchForRequest 函数来解决此问题。

有兴趣知道人们是否有更优雅的解决方案。

# linux - 需要根据 Linux bash shell 中的另一个文件替换一个文件中的行

> ID：15701564
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:34:36.387
> 
> 标签：linux, shell

我有两个文件，一个作为模板，另一个作为下一个命令的输入文件。我必须根据模板中的值更新我的输入文件

第一个文件如下所示

```
TKTSPEC.2.ASSETATTRID=REVISION&
TKTSPEC.2.REFOBJECTID=31&
TKTSPEC.2.TICKETSPECID=410&
TKTSPEC.2.SECTION=&
TKTSPEC.3.ASSETATTRID=NUM&
TKTSPEC.3.REFOBJECTID=31&
TKTSPEC.3.TICKETSPECID=411&
TKTSPEC.3.SECTION=&
TKTSPEC.4.ASSETATTRID=MPNUM&
TKTSPEC.4.REFOBJECTID=31&
TKTSPEC.4.TICKETSPECID=412&
TKTSPEC.4.SECTION=& 
```

我的模板文件看起来像

```
TKTSPEC.2.ASSETATTRID=REVISION&
TKTSPEC.2.TABLEVALUE=5&
TKTSPEC.3.ASSETATTRID=NUM&
TKTSPEC.3.TABLEVALUE=RDPVS&
TKTSPEC.4.ASSETATTRID=MPNUM&
TKTSPEC.4.TABLEVALUE=NEWPROJECT& 
```

我想要的输出如下

```
TKTSPEC.2.ASSETATTRID=REVISION&
TKTSPEC.2.TABLEVALUE=5&
TKTSPEC.2.REFOBJECTID=31&
TKTSPEC.2.TICKETSPECID=410&
TKTSPEC.2.SECTION=&
TKTSPEC.3.ASSETATTRID=NUM&
TKTSPEC.3.TABLEVALUE=RDPVS&
TKTSPEC.3.REFOBJECTID=31&
TKTSPEC.3.TICKETSPECID=411&
TKTSPEC.3.SECTION=&
TKTSPEC.4.ASSETATTRID=MPNUM&
TKTSPEC.4.TABLEVALUE=NEWPROJECT&
TKTSPEC.4.REFOBJECTID=31&
TKTSPEC.4.TICKETSPECID=412&
TKTSPEC.4.SECTION=& 
```

我必须从我的第一个文件中检查 ASSETATTRID，然后从第二个文件中插入一个具有相应值的新行。第二个文件对每个资产属性都有值。这可以使用 awk 或其他基于 linux 的命令来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:49:17.260

单程：

```
awk -F. 'NR==FNR{getline x;a[$2$3]=x;next}$2$3 in a{print;print a[$2$3];next}1' templatefile inpfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:54:21.330

这个 oneliner 可能适合您：

```
awk 'NR==FNR{k=$0;getline;a[k]=$0;next}$0 in a{$0=$0"\n"a[$0]}1' templ input 
```

# java - Java 对象初始化 - 什么时候需要？

> ID：15701565
> 
> 赞同：1
> 
> 时间：2013-03-29T10:34:39.267
> 
> 标签：java, initialization

我对java初始化很好奇：
什么时候需要初始化这样的对象：

```
String init = new String(""); 
```

哪些对象——比如字符串——不必像上面那样初始化？

```
String init = ""; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:36:32.467

根据您对问题的评论：

> 那么我的问题是哪些对象需要“new Object()”初始化？

你问的是*构造*，而不是初始化。

所有对象都需要由某人构建。由字符串字面量创建的字符串由 JVM 构造。你基本上永远不想使用`new String("text content here")`.

JVM 还构造了其他几个对象，例如`Class`您加载的每个类的对象。但除了 之外`String`，对于您想要与之交互的对象，您通常要么必须显式构造它们（通过`new`），要么从构造它们的方法中接收它们。`String`有点特别，因为它是 Java（我*认为*）中唯一带有文字符号的对象类型。（所有其他文字，如`42`or `false`，都是原语。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T10:46:23.697

基本上，您提到的两种初始化方式之间存在细微差别：当您使用时：

```
String str = new String(""); 
```

在堆上创建一个新`String`对象并`str`指向它。

但在后一种情况下：

```
String str = ""; 
```

[如果字符串池中](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)已经存在具有此值 ("") 的字符串，则将引用初始化为指向它，并且不会创建新对象。如果在字符串池中没有找到，则在字符串池中创建一个新字符串并`str`初始化为指向它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:36:13.693

对于字符串，您几乎总是希望使用第二种形式。对于大多数情况下相同的结果，它的工作量较小。

同样的建议也适用于数字类，例如`Integer`,`Double`等。

在所有其他情况下，您通常没有选择，必须使用第一种形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T10:37:02.730

在 Java 中，必须初始化所有对象。第二种情况`init = ""`也是初始化，除了编译器允许您避免显式调用：对象创建仍然存在。从 Java 5 开始，编译器还“了解”Java 原语的包装器，允许您在需要包装器类的表达式中使用原始常量（这称为[*自动装箱*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)）。

所有局部变量都必须显式初始化，而成员字段可以隐式初始化`null`为原语的默认值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T10:39:16.800

所有对象都必须初始化，`new`但有些对象，例如：

```
 String myString= "";
 Integer myInteger= 2;
 Float myFloat= 2f;
 Double myDouble= 2d;
 Byte myByte = 2; 
```

以及各种数组，可以像 `T[] array = {//list some Ts};

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T10:40:55.980

```
String s1 = "1";
String s2 = new String("2");
int i1 = 1;
int i2 = new Integer(2);
long l1 = 1l;
long l2 = new Long(2l);
float f1 = 1f;
float f2 = new Float(2f);
double d1 = 1d;
double d2 = new Double(2d);
char c1 = '1';
char c2 = new Character('2');
byte b1 = 1;
byte b2 = new Byte((byte) 2);
int[] a1 = {1};
int[] a2 = new int[] {2}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-29T10:41:52.367

大多数类需要显式构造（新的），但是有一些类不需要，这些是自动装箱类（String、Integer、Double 等，以及这些类的数组（使用逗号分隔的列表初始化））和这些是唯一的！

在编译器级别发生的事情实际上只是编译器将隐式构造转换为显式构造（例如，使用 new 的构造）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-29T10:42:50.503

所有对象都需要在使用之前进行初始化。您可以尝试声明：

```
int myPrimitiveInt;
Integer myObjectInt; 
```

但是 myPrimitiveInt 在你给它一个值之前不能使用，并且 myObjectInt 被隐式初始化为 null。要使用其中的任何一个（从对象中获取 null 除外），无论您是否使用构造函数，都需要给它们一个值。

```
myPrimitiveInt = 5;
myObjectInt = new Integer(5);
myObjectInt = 5; 
```

# xml - 是否有可以将 httptext 响应转换为 xmlstring 响应的网络服务？

> ID：15701572
> 
> 赞同：0
> 
> 时间：2013-03-29T10:35:03.140
> 
> 标签：xml, web-services

我正在使用一个返回响应的网络服务，如下所示：

```
result_id=123&result_message="Failed"&... 
```

我使用它的接口通常没有任何花哨的解析方法或任何编码选项。它可以解析xml。

我如何将上述响应变成

```
<result_id>123</result_id><result_message>Failed</result_message> 
```

是否有一些免费使用的网络服务已经在处理这个问题或您能想到的任何其他出路？我正在使用的网络服务没有任何 xml 响应选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:58:41.240

用 & 分割响应。即，如果响应是 varialbe res

```
String[] resArr = res.split("&"); 
```

创建一个将接受两个参数的方法 1) 标记。2) 价值

```
public String getXmlTag(String tag,String val) {
String result = "<tag>val<tag/>";
result.replaceAll("tag",tag);
result.replaceAll("val",val);
return result;
} 
```

您可以对 resArr 中的每个条目进行子字符串化，并获取标记和 val 并将其传递给此方法。并连接以获取 xml。

PS：如果标签名称为 val ，则上述 getXmlTag 将不起作用：P

# java - How to inject HTTP query parameters into beans list or array as method's parameter with JAX-RS by Apache CXF?

> ID：15701573
> 
> 赞同：1
> 
> 时间：2013-03-29T10:35:10.243
> 
> 标签：java, rest, cxf, jax-rs, resteasy

I'm learning JAX-RS by making sample webapp, and I have a question about parameters injection from HTTP request to java method's parameters.

Now, I'm trying to inject query parameters into some beans on sample JAX-RS project , named 'cxftest01' using Apache CXF , which is supposed as HR management in a company.

So, I got started to make some beans classes following class 'Employee'

* * *

```
package com.sample.cxftest01.beans;

public class Employee {
    private Name name;
    private String division;

    public Name getName() { return name; }
    public void setName(Name name) { this.name = name; }
    public String getDivision() { return division; }
    public void setDivision(String division) { this.division = division; }
} 
```

* * *

and next class 'Name'

* * *

package com.sample.cxftest01.beans;

```
public class Name {
    private String first;
    private String last;

    public String getFirst() { return first; }
    public void setFirst(String first) { this.first = first; }
    public String getLast() { return last; }
    public void setLast(String last) { this.last = last; }
} 
```

* * *

and JAX-RS resouce class is next.

* * *

package com.sample.cxftest01.restapi;

```
import java.util.List;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import org.springframework.stereotype.Component;
import com.sample.cxftest01.beans.Employee;

@Component
@Path("employees")
public class EmployeeResource {

    @GET
    @Produces("application/json")
    public Response getPerson(@QueryParam("") Employee employee)
    {
        return Response.ok(employee, MediaType.APPLICATION_JSON ).build();
    }
} 
```

* * *

These codes above worked. When I accessed URL,

```
http://localhost:8080/cxftest01/employees?
    name.first=Joe&name.last=Hayek&division=SoftwareDevelopment 
```

on address bar in my web borowser(I use latest Chrome), the browser displayed next JSON.

```
{"name":{"first":"Joe","last":"Hayek"},"division":"SoftwareDevelopment"} 
```

Next, I planed following senario. If I'll give 2 employees in query parameters like

```
name.first=Joe&name.last=Hayek&division=SoftwareDevelopment&
name.first=Meg&name.last=Tanaka&division=Sales 
```

then I'll be glad to get next JSON as result,

```
[
    {"name":{"first":"Joe","last":"Hayek"},"division":"SoftwareDevelopment"},
    {"name":{"first":"Meg","last":"Tanaka"},"division":"Sales"}
] 
```

So, I modified the method EmployeeResource#getPerson() as following:

```
@GET
@Produces("application/json")
public Response getPersons(@QueryParam("") List<Employee> employees)
{
    return Response.ok(employees, MediaType.APPLICATION_JSON ).build();
} 
```

And I tried to access next URL:

```
http://localhost:8080/cxftest01/employees?
    name.first=Joe&name.last=Hayek&division=SoftwareDevelopment&
    name.first=Meg&name.last=Tanaka&division=Sales 
```

, but the borowser displayed next error message.

**Class java.util.List can not be instantiated**

So I ask next two points.

1) What is the reason why the error indicated by the message above was happened ?

2) If you know how to inject query parameters to beans list or array as a
  parameter of some methods in JAX-RS resouce class, as my senario
  explained above, please teach me.

Best regards.

# c# - Creating Databases and tables using c#

> ID：15701574
> 
> 赞同：0
> 
> 时间：2013-03-29T10:35:10.800
> 
> 标签：c#, sql-server-2005, installation

I have a windows form application created using C#. I have a few databases and tables in SQL server 2005 express edition. To create a setup of my project I wish to attach the databases and tables dynamically while my setup wizard runs on any remote machine.

I tried to write a code which will simply create database and also a try-catch statement which will check if the database exists but everytime execution of try catch statement whenever my application runs may be a problem.

Is this possible by simply attaching the .mdf files with my project as I create the setup wizard ?

Please help. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:49:19.863

创建表：

```
string createString = "CREATE TABLE myTable (column1 INT, column2 NVARCHAR(10))"; //YOUR SQL COMMAND TO CREATE A TABLE
SqlConnection connection = new SqlConnection(YOUR CONNECTION STRING);

SqlCommand create = new SqlCommand(createString , connection);

connection.Open();
create.ExecuteNonQuery();
connection.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T11:03:46.973

您可以将 .mdf 文件复制到根目录中，如果您进行设置，它将在您的设置文件中。我已经做到了。您的连接字符串将是： string.Format("{0}{1}{2}", @"Data Source=.\SQLEXPRESS;AttachDbFilename=", AppDomain.CurrentDomain.BaseDirectory, @"Database.mdf;Integrated Security=真；用户实例=假");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T20:10:12.370

```
string myConnectionString= @"DataSource =...";

SqlConnection dbConnection = new SqlConnection(myConnectionString);

string myCommand = "CREATE TABLE myTable (column1 VARCHAR(10),colunm2 INT)";

SqlCommand dbConnection = new SqlCommand(myCommand,dbConnection);

try
{
dbConnection.Open();

dbCommand.ExecuteNonQuery();
}

catch{}

dbConnection.Close(); 
```

# java - @EmbeddedId 使用 @GenerateValue 自动生成的 id，这种组合不能按需要工作

> ID：15701576
> 
> 赞同：3
> 
> 时间：2013-03-29T10:35:12.363
> 
> 标签：java, hibernate, jpa, jpa-2.0, java-ee-6

我正在尝试使用@EmbeddedId，这是我的代码如下，

```
create table TBL_EMPLOYEE_002(
  ID integer generated always as identity (start with 100,increment by 10), 
  COUNTRY varchar(50),
  NAME varchar(50),
  constraint PK_EMP_00240 primary key(ID,COUNTRY)
) 
```

Embedded类如下，

```
@Embeddable
public class EmployeeIdTwo implements Serializable{
     public EmployeeIdTwo(){}
    public EmployeeIdTwo(String country){
        this.empCountry = country;
    }

    @GeneratedValue(strategy=GenerationType.IDENTITY)
     @Column(name="ID") 
    private Integer employeeId;

    @Column(name="COUNTRY",length=50)
    private String empCountry;

// implementation of hashCode and equals and only getters 
...
} 
```

员工实体如下，

```
@Entity
@Table(name="TBL_EMPLOYEE_002")
public class EmployeeEntitySix implements Serializable{

    public EmployeeEntitySix(){}
    public EmployeeEntitySix(EmployeeIdTwo id,String name){
        this.id = id;
        this.employeeName = name;
    }

    @EmbeddedId    
    private EmployeeIdTwo id;

    @Column(name="NAME")
    private String employeeName;

// getters and setters
} 
```

这是用main方法编写的代码，

```
private static void storVal(EntityManager em){
    EmployeeEntitySix employee = new EmployeeEntitySix(new EmployeeIdTwo("KENYA"), "Henry Olaanga");
    em.persist(employee);
} 
```

但是一旦我运行上面的代码，我就会得到如下异常，

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: Attempt to modify an identity column 'ID'. 
```

如果我的 EmbeddedId 类包含自动生成的列，您能否让我知道我哪里出错了，而不是应该采用什么方法。

只是要知道我使用休眠作为持久性提供者和 JPA 作为持久性 API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:04:59.940

我假设如果`Id`可以轻松且唯一地识别员工，您就不会问这个问题。如果您有能力修改您的表格，我建议您要么制作`Id`可靠的唯一性，要么添加一个自动生成的`UniqueId`列。

其中一些错误实际上来自 DB 模式，而不是来自 JPA/Hibernate。如果您尝试更新数据库没有生成策略的列，这可能是导致您的错误的原因。

您可能还会查看[autoincrement id is not reflect in composite key using JPA](https://stackoverflow.com/questions/4813755/autoincrement-id-is-not-reflecting-in-composite-key-using-jpa)，因为我认为这涵盖了您所询问的内容。

# mysql - 如何从 MySQL 中检索 JSON 数据？

> ID：15701579
> 
> 赞同：37
> 
> 时间：2013-03-29T10:35:18.453
> 
> 标签：mysql, sql, json

我有下表及其关系。我将 JSON 数据存储在 client_services 表中。他们有什么方法可以使用 MySQL 查询来检索 JSON 值，如下所示：

```
SELECT getJson("quota") as quota,
       client_id
FROM client_services
WHERE service_id = 1; 
```

或者我可以进一步规范 client_services 表吗？

表`Services`：

```
+----+-----------------------+--------------------------------------------------------+
| id | name                  | description                                            |
+----+-----------------------+--------------------------------------------------------+
|  1 | MailBox               |                                                        |
|  2 | SMS                   |                                                        |
|  3 | FTP                   |                                                        |
+----+-----------------------+--------------------------------------------------------+ 
```

表`service_features`：

```
+----+------------+----------------------------------+------------------------+
| id | service_id | name                             | description            |
+----+------------+----------------------------------+------------------------+
| 10 |          1 | Forwarding                       | Forward Mail           |
| 11 |          1 | Archive                          | Archive Mail           |
| 12 |          1 | WebMail                          | NULL                   |
| 13 |          1 | IMAP                             | NULL                   |
| 14 |          2 | Web SMS                          | NULL                   |
+----+------------+----------------------------------+------------------------+ 
```

表`client_services`：

```
+-----+-----------+------------+-------------------------------------------------------------------------------------------+
| id  | client_id | service_id | service_values                                                                            |
+-----+-----------+------------+-------------------------------------------------------------------------------------------+
| 100 |      1000 |          1 |{ "quota": 100000,"free_quota":20000,"total_accounts":200,"data_transfer":1000000}         |
| 101 |      1000 |          2 |{ "quota": 200 }                                                                           |
| 102 |      1000 |          3 |{ "data_transfer":1000000}                                                                 |
| 103 |      1001 |          1 |{ "quota": 1000000,"free_quota":2000,"total_accounts":200,"data_transfer":1000000}         |
| 104 |      1001 |          2 |{ "quota": 500 }                                                                           |
| 105 |      1002 |          2 |{ "quota": 600 }                                                                           |
+-----+-----------+------------+-------------------------------------------------------------------------------------------+ 
```

表`client_feature_mappers`：

```
+-----+-------------------+--------------------+-----------+
| id  | client_service_id | service_feature_id | client_id |
+-----+-------------------+--------------------+-----------+
|10000|                100|                 10 |       1000|
|10001|                100|                 11 |       1000|
|10002|                100|                 12 |       1000|
|10003|                100|                 13 |       1000|
|10004|                101|                 14 |       1000|
|10005|                103|                 10 |       1001|
|10006|                101|                 11 |       1001|
|10007|                101|                 12 |       1001|
|10008|                101|                 13 |       1001|
|10009|                105|                 14 |       1002|
+-----+-------------------+--------------------+-----------+ 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2016-07-25T00:31:42.340

由于很多人亲自向我提出过​​这个问题，我想我会给这个答案第二次修改。这是[一个要点，其中包含带有 SELECT、迁移和视图创建的完整 SQL](https://gist.github.com/ti-ka/d0b264324c68fb81743035d98b9cbb8c)以及[一个实时 sql fiddle](http://rextester.com/FCQXL35972) *（fiddle 不保证可用性）*。

假设您有这样的表（名为：TBL_JSON）：

```
 ID   CITY        POPULATION_JSON_DATA
-----------------------------------------------------------------------
 1    LONDON      {"male" : 2000, "female" : 3000, "other" : 600}
 2    NEW YORK    {"male" : 4000, "female" : 5000, "other" : 500} 
```

要选择每个 json 字段，您可以执行以下操作：

```
SELECT 
    ID, CITY,
    json_extract(POPULATION_JSON_DATA, '$.male') AS POPL_MALE,
    json_extract(POPULATION_JSON_DATA, '$.female') AS POPL_FEMALE,
    json_extract(POPULATION_JSON_DATA, '$.other') AS POPL_OTHER
FROM TBL_JSON; 
```

结果：

```
ID  CITY      POPL_MALE  POPL_FEMALE   POPL_OTHER 
-----------------------------------------------------------------
1   LONDON    2000       3000          600
2   NEW YORK  4000       5000          500 
```

根据您的数据大小和 json 复杂性，这可能是一项昂贵的操作。我建议将其用于

1.  将表迁移到拆分数据库（**参见要点中的附录 2-B）**
2.  至少创建一个视图 **（参见要点中的附录 2-C）**

注意：您可能有以双引号（字符串化）***开头的json：***

```
"{"male" : 2000, "female" : 3000, "other" : 600}" 
```

在 Ubuntu 和 Mac OSX Sierra 上使用 Mysql 5.7 进行测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-24T16:13:29.017

您可以使用 MySQL 函数 SUBSTRING_INDEX 来分解 JSON 字符串：

```
SELECT 
SUBSTRING_INDEX(
 SUBSTRING_INDEX(
  SUBSTRING_INDEX( service_values, 'quota', -1),
  '": ', -1),
 ' ', 1) AS quota,
client_id
FROM client_services
WHERE service_id=1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T21:17:04.393

首先，您应该知道上面的模型不是第一范式，这意味着您应该在每个字段中只有一个值。但是，此定义取决于您的应用程序查询处理需求。

因此，如果您只想将一堆 JSON 数据放在一个字段中并按原样返回给应用程序，那就没问题了。您可以返回整个 JSON 数据并让应用程序选择它想要的 JSON 属性。

但是，如果您有查询，如您的情况，有条件或字段表达式来查看 JSON 数据的详细信息，那么这绝对是不行的。这将是查询复杂性和处理缓慢的噩梦。

您当然可以进一步规范化您的表以完全替换 JSON 数据结构。但是，如果您的应用程序需要灵活的模式，这可能是使用 NOSQL 数据库的主要原因，但您却被 MySQL 卡住了，有两种解决方案：

a) 使用 MySQL 5.6 (或 MariaDB v.??) 支持 NoSQL (我还没有查看详细信息) [http://www.computerworld.com/s/article/9236511/MySQL_5.6_tackles_NoSQL_competitors](http://www.computerworld.com/s/article/9236511/MySQL_5.6_tackles_NoSQL_competitors) MariaDB 的动态列：[https： //kb.askmonty.org/en/dynamic-columns/](https://kb.askmonty.org/en/dynamic-columns/)

b) 在没有显式模式的情况下使用 mysql，请参阅此处了解一个非常出色的解决方案，它没有可扩展性问题：[http ://backchannel.org/blog/friendfeed-schemaless-mysql](http://backchannel.org/blog/friendfeed-schemaless-mysql)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-23T06:31:26.473

是的，您绝对可以使用 MySQL 查询（使用 JSON_EXTRACT() 函数）检索 JSON 值。

让我们把你的表包含 json （`client_services`这里的表）：

```
+-----+-----------+------------+-------------------------------------------------------------------------------------------+
| id  | client_id | service_id | service_values                                                                            |
+-----+-----------+------------+-------------------------------------------------------------------------------------------+
| 100 |      1000 |          1 |{ "quota": 100000,"free_quota":20000,"total_accounts":200,"data_transfer":1000000}         |
| 101 |      1000 |          2 |{ "quota": 200 }                                                                           |
| 102 |      1000 |          3 |{ "data_transfer":1000000}                                                                 |
| 103 |      1001 |          1 |{ "quota": 1000000,"free_quota":2000,"total_accounts":200,"data_transfer":1000000}         |
| 104 |      1001 |          2 |{ "quota": 500 }                                                                           |
| 105 |      1002 |          2 |{ "quota": 600 }                                                                           |
+-----+-----------+------------+-------------------------------------------------------------------------------------------+ 
```

要选择每个 JSON 字段，请运行以下查询：

```
SELECT 
    id, client_id, service_id,
    json_extract(service_values, '$.quota') AS quota,
    json_extract(service_values, '$.free_quota') AS free_quota,
    json_extract(service_values, '$.total_accounts') AS total_accounts,
    json_extract(service_values, '$.data_transfer') AS data_transfer
FROM client_services; 
```

所以输出将是：

```
+-----+-----------+------------+-----------------------------------------------------+
| id  | client_id | service_id |  quota | free_quota | total_accounts | data_transfer|
+-----+-----------+------------+-----------------------------------------------------+
| 100 |      1000 |          1 | 100000 |      20000 |            200 |      1000000 |
| 101 |      1000 |          2 |    200 |       null |           null |         null |
| 102 |      1000 |          3 |   null |       null |           null |      1000000 |
| 103 |      1001 |          1 | 100000 |       2000 |            200 |      1000000 |
| 104 |      1001 |          2 |    500 |       null |           null |         null |
| 105 |      1002 |          2 |    600 |       null |           null |         null |
+-----+-----------+------------+-----------------------------------------------------+ 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-15T11:20:54.697

```
SET @a = '[{"x":2,"y":"8"},{"x":"3","y":"7"},{"x":"4","y":6}]' ;

SELECT *
FROM
JSON_TABLE(
@a,
"$[*]" COLUMNS(
xval VARCHAR(100) PATH "$.x",
yval VARCHAR(100) PATH "$.y"
)) AS  jt1; 
```

# c - 从理论上讲，实现是否可以将 unsigned int 提升为 int？

> ID：15701588
> 
> 赞同：4
> 
> 时间：2013-03-29T10:36:00.707
> 
> 标签：c, standards, c99

根据 C99 标准中的以下两个条款：

> **6.2.5-9**
> 
> 有符号整数类型的非负值范围是对应无符号整数类型的子范围，相同值在每种类型中的表示是相同的。
> 
> **6.2.6.2-2**
> 
> 对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。不需要任何填充位；应该只有一个符号位。作为值位的每个位应与相应无符号类型的对象表示中的相同位具有相同的值（如果有符号类型中有 M 个值位，无符号类型中有 N 个，则 M ≤ N ）。

有符号类型（可能）可以表示相应无符号类型可表示的所有数字。例如，如果`unsigned int`使用 31 个值位和 1 个填充位表示类型，并且使用 31 个值位和无填充位表示有符号整数。

是否允许实现这样做？如果是，这是否意味着在这种情况下`unsigned int`将提升为 an （因为两种类型具有相同的转换等级并且可以代表所有代表的值）？`int``int``unsigned int`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:07:36.380

> 有符号类型（可能）可以表示相应无符号类型可表示的所有数字。例如，如果 unsigned int 类型使用 31 个值位和 1 个填充位表示，而有符号 int 类型使用 31 个值位和无填充位表示。是否允许实现这样做？

该标准规定`6.3.1.8 Usual arithmetic conversions`：

> 否则，对两个操作数都执行整数提升。然后将以下规则应用于提升的操作数： 如果两个操作数具有相同的类型，则不需要进一步转换。
> 
> 否则，如果两个操作数都具有有符号整数类型或都具有无符号整数类型，则具有较小整数转换等级的类型的操作数将转换为具有较高等级的操作数的类型。
> 
> 否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。

由于`int`和`unsigned int`具有相同的等级 ( `6.3.1.1 Boolean, characters, and integers`)，`int`将转换为`unsigned int`，但不是相反：

> — 任何无符号整数类型的等级应等于相应的有符号整数类型的等级，如果有的话。

以 为后缀的整数常量`u`始终是无符号的（参见 中的表格`6.4.4.1 Integer constants`）。

`6.3.1.1 Boolean, characters, and integers`第 2 条还告诉我们：

> 可以在可以使用 int 或 unsigned int 的表达式中使用以下内容：
> 
> — 整数类型的对象或表达式，其整数转换等级小于 int 和 unsigned int 的等级。
> 
> — _Bool、int、signed int 或 unsigned int 类型的位域。
> 
> 如果一个 int 可以表示原始类型的所有值，则将该值转换为 int；否则，它将转换为无符号整数。这些被称为整数促销。整数提升不会改变所有其他类型。

因此，不，实现不能合法地转换`unsigned int`为`int`，除非您通过强制转换或分配明确要求。

**编辑**：第 2 条`6.3.1.1 Boolean, characters, and integers`内容如下：

> — 整数类型的对象或表达式，其整数转换等级**小于**int 和 unsigned int 的等级。

（国际标准 ISO/IEC 9899 第二版 1999-12-01）

> — 整数类型的对象或表达式，其整数转换等级**小于或等于**int 和 unsigned int 的等级。

（WG14/N1256 委员会草案 — 2007 年 9 月 7 日 ISO/IEC 9899:TC3）

> — 具有整数类型（**除 int 或 unsigned int 之外**）的对象或表达式，其整数转换等级**小于或等于**int 和 unsigned int 的等级。

（N1548 委员会草案 — 2010 年 12 月 2 日 ISO/IEC 9899:201x，
N1570 委员会草案 — 2011 年 4 月 12 日 ISO/IEC 9899:201x）

只是为了好玩，C++11 的`4.5 Integral promotions [conv.prom]`：

> 如果 int 可以表示源类型的所有值，则整数转换等级 (4.13) 小于 int 等级的除 bool、char16_t、char32_t 或 wchar_t 的整数类型的纯右值可以转换为 int 类型的纯右值; 否则，可以将源纯右值转换为 unsigned int 类型的纯右值。

（N3242=11-0012，
N3337 日期：2012-01-16，
国际标准 ISO/IEC 14882 第三版 2011-09-01）

# c++ - Windows 服务如何控制另一个程序？

> ID：15701593
> 
> 赞同：0
> 
> 时间：2013-03-29T10:36:15.757
> 
> 标签：c++, windows, visual-studio, service

我有一个程序，在该程序中我可以设置用户的权限（称为用户访问管理器），即设置用户控制杆，更改他们的设置等。我希望这个程序作为服务运行并能够访问它本地或远程。然后我会有另一个程序（UI）连接到服务并允许他们控制用户访问管理

我的问题是实现这一目标的最佳方法是什么？以及如何从另一台计算机访问程序的一部分（用户访问管理器）？

//////**编辑**/////// 我希望服务只控制另一个程序的一部分，而不是整个程序。例如，我希望该服务仅运行视觉工作室属性而不运行整个程序..

# c++ - C++ std::container（向量）如何存储其内部（元素地址，按索引访问）？

> ID：15701597
> 
> 赞同：2
> 
> 时间：2013-03-29T10:36:37.657
> 
> 标签：c++, stl, containers, std, stdvector

我正在尝试“破解”游戏（红色警报 3），我尝试制作一个程序来显示我的对手的单位列表。至于那我首先需要找到一个指向我自己的列表的（静态）指针，我可以在单人游戏中做到这一点。

我注意到了这种行为：（通过查看 add_unit 代码更改了哪些地址）：

*   如果尚未构建单位，请为其创建一个新地址（随机？）并将值设置为 1（该类型的单位数量）
*   当单位已经在游戏中建造过一次时，将单位类型的原始地址加 1

这在我看来就像 std::vector 行为。现在我很难找到向量的“基”地址，还有一个更大的问题：如何按索引访问？std::vector 在哪里存储它的元素地址？

额外信息：

代码（从我从程序集中读到的）用 MS Visual C++ 2005 编译（播放需要 MSVCR80 dll）

这是向量中的地址的样子：

![在此处输入图像描述](../Images/d0707843f8d9bc02d67c62a463e75faf.png)

（突出显示的地址是作为第一个元素出现的地址 - 第一个单元构建）

这看起来不像我可以通过添加一个常量值来迭代？

每当添加新地址时，所有其他地址都完全有效并且不会更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:46:54.880

一个典型的（虽然不是强制性的）实现`vector`是有三个连续的词：

```
struct TypicalVector
{
    T * start;
    T * end;
    T * capacity;
}; 
```

元素访问是通过`start[i]`（这就是为什么将`start`指针放在前面很重要，以避免不必要的偏移计算），大小是`end - start`，容量是`capacity - start`。内存分配获取`c * sizeof(T)`字节并设置`start`为已分配内存的地址并设置`capacity`为`start + c`. 元素构造增量`end`。

# wordpress - 如何注册功能类似于 WordPress 侧边栏的 register_widget

> ID：15701599
> 
> 赞同：1
> 
> 时间：2013-03-29T10:36:49.197
> 
> 标签：wordpress, widget, sidebar

我想 register_widget 的功能就像一个侧边栏，可以拖动很多小部件。我以前看到过，与一个插件一起使用，但我忘记了。请参阅屏幕截图以供参考。

![在此处输入图像描述](../Images/5f1ec6543d0f4c9baf3edd4c17137430.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:03:43.703

**(1) 如果要创建小部件区域，请执行以下操作：**

将以下代码添加到函数文件中，确保将其放在 php 标记之间：

```
if ( function_exists('register_sidebar') ){
    register_sidebar(array(
        'name' => 'my_new_widget',
        'before_widget' => '<div id="my-new-sidebar-widget">',
        'after_widget' => '</div>',
        'before_title' => '',
        'after_title' => '',
));
} 
```

为小部件区域命名——例如 my_new_widget 并在之前/之后选项中放置您希望围绕小部件本身或标题显示的代码。

然后转到您希望显示小部件的区域（在您的 header.php、index.php、single.php 等中），然后执行以下操作：

在您的 WordPress 主题编辑器中打开 header.php 文件。

找到您要放置菜单的位置并将以下代码添加到 header.php 文件中：

```
<?php /* Widgetized sidebar */
    if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar('my_new_widget') ) 
```

然后，当您转到仪表板时，您将在外观 >> 小部件中看到一个新的小部件区域。

这是[另一种创建新小部件区域](http://wordpress.org/support/topic/how-to-create-new-widget-area?replies=5)的方法。

* * *

**(2) 如果您正在谈论创建一个新的侧边栏：**

您首先要在functions.php 文件中查找任何现有的“register_sidebar”条目。我的一些人对单个默认侧边栏有以下现有的侧边栏定义：

```
if ( function_exists('register_sidebar') ) {
register_sidebar(array(
'before_widget' => '<li id="%1$s" class="widget %2$s">',
'after_widget' => '</li>',
'before_title' => '<h2 class="widgettitle">',
'after_title' => '</h2>',
));
} 
```

要注册您的第二个侧边栏，我们只需将以下代码添加到 functions.php 文件中：

```
if ( function_exists('register_sidebar') ) {
register_sidebar(array(
'name' => 'Homepage Sidebar',
'id' => 'homepage-sidebar',
'description' => 'Appears as the sidebar on the custom homepage',
'before_widget' => '<div style="height: 280px"></div><li id="%1$s" class="widget %2$s">',
'after_widget' => '</li>',
'before_title' => '<h2 class="widgettitle">',
'after_title' => '</h2>',
));
} 
```

所以基本上，你只需：

*   告诉您的 WordPress 安装，“我们正在添加第二个侧边栏区域，我们将在我们的主题中使用”</li>
*   侧边栏的名称是“主页侧边栏”</li>
*   侧边栏的ID（我们稍后会提到该ID）是“homepage-sidebar”；你可以选择“footer-sidebar”、“second-sidebar”或任何你想要的
*   您添加了描述“在自定义主页上显示为侧边栏”，它将显示在侧边栏的标题下方。

如果您将新的 functions.php 文件上传到您的 WordPress 安装，如果您从 WordPress 仪表板浏览到外观，然后是小部件，您应该会看到新的侧边栏。

# php - 未找到 Zend_Db

> ID：15701601
> 
> 赞同：0
> 
> 时间：2013-03-29T10:36:59.933
> 
> 标签：php, zend-framework

```
use Zend\Db;

$db = Zend_Db::factory('Pdo_Mysql', array(
    'host'     => 'localhost',
    'username' => 'root',
    'password' => '',
    'dbname'   => 'test'
)); 
```

我试图通过关键字'use'来要求Zend_Db，但我得到一个错误，没有类Zend_Db，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:43:07.833

如果您使用的是 ZF1，那么类是`Zend_Db`. 在这种情况下，如果你真的想使用 PHP 5.3 命名空间，那么正确的用法是：

```
use \Zend_Db;

$db = Zend_Db::factory('Pdo_Mysql', array(
    'host'     => 'localhost',
    'username' => 'root',
    'password' => '',
    'dbname'   => 'test'
)); 
```

如果您使用的是 ZF2，则相关组件是`Zend\Db`，但通常使用[模块配置中定义的工厂来](http://zf2.readthedocs.org/en/latest/user-guide/database-and-models.html)创建适配器。

而且，正如其他地方所指出的，搞清楚自动加载会让生活变得更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:40:34.040

在文件开头添加这个

```
 require_once 'Zend/Db.php'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:33:00.510

Zend Framework 1.x 比 PHP 命名空间早了一段时间。`use`因此 ZF1 对关键字之类的东西并不友好。如果您需要使用 Zend Framework 1.x 的组件，使用包含的[自动加载器组件](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader.html)可能会更好。

如果您将该框架用作 MVC 应用程序，那么整个事情就没有实际意义，我建议您花一些时间了解默认配置的工作原理。因为如果您将 ZF1 用作 MVC，则该`Zend_Db`组件将已经在自动加载器上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:05:05.820

不要将下划线名称与斜线混合

```
use Zend_Db as Db

$db = Db::factory('Pdo_Mysql', array(
    'host'     => 'localhost',
    'username' => 'root',
    'password' => '',
    'dbname'   => 'test'
)); 
```

# java - 如果未保存，则删除上传的文件

> ID：15701608
> 
> 赞同：0
> 
> 时间：2013-03-29T10:37:10.150
> 
> 标签：java, jsf-2, image-upload

我已经在 J​​SF 2 上使用 tomahawk 实现了文件上传。用户必须上传和裁剪图像。当用户上传图像时，在显示之前，图像会保存在文件系统中。如果上传图片后，用户移动到另一个链接我想删除上传的文件。有没有办法知道是否未执行某些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:46:39.843

我认为数据库中有一个表，您在其中存储了有关上传文件及其路径的信息。

在服务器上制定一个计划进程，该进程定期运行并检查表中包含有关上传文件的信息以及其他数据库信息。

并从文件系统中删除带有文件的孤立文件记录。

# java - 在单独的线程中捕获 onKeyDown

> ID：15701610
> 
> 赞同：2
> 
> 时间：2013-03-29T10:37:14.113
> 
> 标签：java, android, onkeydown

我在 Activity 中捕获了一个 onKeyDown 事件，但是，我怎么能做一个类来调用它可以替换我所有活动的“onKeyDown”上的事件？

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_BACK || keyCode == 6 || keyCode==KeyEvent.KEYCODE_HOME) { 
  //Do Something
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:11:38.903

创建一个扩展 Activity 的基类，然后让所有类扩展它。在基类中处理 onKeyDown()。

```
public class BaseActivity extends Activity {
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK || keyCode == 6 || keyCode==KeyEvent.KEYCODE_HOME) { 
            // Do Something fancy
        }
    // ...
}

public class MyActivity extends BaseActivity {
    // ...
} 
```

# java - 如何在scriptlet jsp中访问javascript变量

> ID：15701611
> 
> 赞同：1
> 
> 时间：2013-03-29T10:37:15.877
> 
> 标签：java, javascript

我`javascript variable`有话说，

```
var a ='2013-01-03' 
```

我想在我的`scriptlet`. 即] 我有一个`map`包含我的数据。
我想获取`map`对应的`key='2013-01-03'`值`javascript variable 'a'`。

我如何在我的 scriptlet 中使用如下所示的内容。？

```
map.get(a); 
```

我知道`scriptlets`即使在`reloading`我不想访问`variable`我的`scriptlet`. 谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:40:07.157

您需要将客户端数据（javascript）提交到服务器（servlet、jsp）。您可以在不使用 ajax 重新加载页面的情况下做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:20:46.023

您还没有提到要执行操作的操作。假设如果您正在调用 focuslost 那么

```
$('#yourdom').blur(function() {
        serverCall;

    });

function serverCall{
        $('#yourdom').val('2013-01-03')

            $('#form').submit();

    } 
```

在小服务程序中

```
String value=request.getParameter("yourdom");
request.setAttribute("test",value);
RequestDispatcher rd = request.getRequestDispatcher("your.jsp");  
  rd.forward(request,response); 
```

在jsp中

```
<% request.getAttribute("test")  %> 
```

# android - Android 播放器无法使用 akamai 令牌身份验证

> ID：15701621
> 
> 赞同：2
> 
> 时间：2013-03-29T10:38:02.803
> 
> 标签：android, hlsl, akamai, http-token-authentication

我正在开发一个 android 应用程序，其中包含一个从 akamai CDN 播放 hls 流的 videoview。问题是流 url 具有使用 Akamai API 生成的令牌身份验证。问题是我的视频无法播放此流。

以下格式正常播放
[http://xxxxxxx-i.akamaihd.net/hls/live/#####/event1/Playlistaaa_1200.m3u8](http://xxxxxxx-i.akamaihd.net/hls/live/#####/event1/Playlistaaa_1200.m3u8)

以下格式不适用于 android（但适用于三星智能电视等其他开发环境）：http:
[//xxxxxxx-i.akamaihd.net/hls/live/#####/event1/Playlistaaa_1200.m3u8 ??hdnea=st=1364547301~exp=1364547901~acl=/](http://xxxxxxx-i.akamaihd.net/hls/live/#####/event1/Playlistaaa_1200.m3u8??hdnea=st=1364547301~exp=1364547901~acl=/) *~hmac=4baa8ad07af9f31c2d898bd205986e4c470a99b7573cc93918ce9caa234a8d03

有谁知道如何为 android 启用此功能，或者是否有任何解决方法？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T12:54:31.287

与 Akamai 核对后，问题已解决，问题出在查询字符串中的“/”字符中。"/" 应替换为 "%2F"
***工作 URL：***
[http: //xxxxx-i.akamaihd.net/hls/live/XXXX/event1/Playlist.m3u8 ?hdnea=st=1382080396~exp=1382685196~acl = **%2F*** ~hmac=71794db8368c2498fea5fb62c381ce6e51a7ff4628c1225ddfe41411596b5d6e](http://xxxxx-i.akamaihd.net/hls/live/XXXX/event1/Playlist.m3u8?hdnea=st=1382080396~exp=1382685196~acl=%2a%2a/%2a%2a%2a~hmac=71794db8368c2498fea5fb62c381ce6e51a7ff4628c1225ddfe41411596b5d6e)

***非工作网址：***
[http ://xxxxx-i.akamaihd.net/hls/live/XXXX/event1/Playlist.m3u8?hdnea=st=1382080396~exp=1382685196~acl= **/*** ~hmac=71794db8368c2498fea5fb62c381ce6e51a7ff4628c12556dfe41411](http://xxxxx-i.akamaihd.net/hls/live/XXXX/event1/Playlist.m3u8?hdnea=st=1382080396~exp=1382685196~acl=%2a%2a/%2a%2a%2a~hmac=71794db8368c2498fea5fb62c381ce6e51a7ff4628c1225ddfe41411596b5d6e)

Accroding to akamai 这里有一些评论：

1.  Android 2.x / 3.x 设备将不支持 akamai 令牌认证服务
2.  Android 4.x 处理播放列表/片段的 url 的方式有很多错误。如果“/”字符用作请求 master.m3u8 文件的查询字符串的一部分（例如，因为我们使用令牌认证），并且比特率播放列表和分段 url 使用相对 url 定义，Android 4.x 生成错误的绝对网址。这是因为 Android 4.x 获取基本 url 时，将 master.m3u8 url 从第一个字符到最后一个“/”字符，即使这个字符是查询字符串的一部分
3.  Android 4.x HLS 实现对错误的时间戳非常敏感。适用于 iPhone 的流，由于时间戳未对齐（H.264/AAC 数据包的 PTS/DTS）而在 Android 4.x 中不起作用

请注意，此解决方案也适用于：

*   三星智能电视播放器
*   LG智能电视播放器
*   西部数据播放器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:16:35.237

这真的取决于哪个设备——Android 添加了一个 setCookie 方法——在 HC 之后。它允许您以合理的方式开始该过程。

Akamai 有一些标志需要更改才能与 Android 一起使用。我记得它只是一个复选框。

最后，您可以使用第 3 方播放器 - 例如[http://www.nexstreaming.com/](http://www.nexstreaming.com/)来正确处理 HLS。

# java - Java中双打的加法和除法

> ID：15701626
> 
> 赞同：1
> 
> 时间：2013-03-29T10:38:30.673
> 
> 标签：java, double, division, ejml

我在我的项目中使用 EJML 库。我编写了一个计算 SimpleMatrix 行向量方差的方法。在某些时候，我注意到在将等元素向量传递给此方法时，我得到了一个 > 0.0 的方差。

我写这篇文章是为了进一步调查，并惊讶地发现最后一行打印错误，尽管之前的打印没有产生任何输出。

```
// rowVec is a 1xn SimpleMatrix of equal double elements
double one = rowVec.get(0);
for (int i = 0; i < rowVec.getNumElements(); i++) {
    if (rowVec.get(i) - one != 0 || rowVec.get(i) != one) {
        System.out.println(rowVec.get(i)); // no output here
    }
}
// why false below???
System.out.println(one == (rowVec.elementSum() / rowVec.getNumElements()));
// why true below???
System.out.println(one*rowVec.getNumElements() < rowVec.elementSum()); 
```

有人可以解释为什么等元素向量的平均值大于其元素之一吗？

跟进：解决了我的问题：

```
/**
 * Calculates the variance of the argument matrix rounding atoms to the 10th
 * significant figure.
 */
public static double variance(SimpleMatrix m) {
    Preconditions.checkArgument(m != null, "Matrix argument is null.");
    Preconditions.checkArgument(m.getNumElements() != 0, "Matrix argument empty.");
    if (m.getNumElements() == 1) return 0;

    double mean = m.elementSum() / m.getNumElements();
    double sqDiviations = 0;
    for (int i = 0; i < m.getNumElements(); i++) {
        sqDiviations += Math.pow(decimalRoundTo(mean - m.get(i), 10), 2);
    }
    return sqDiviations / m.getNumElements();
}

/** Rounds a double to the specified number of significant figures. */
public static double decimalRoundTo(double d, int significantFigures) {
    double correctionTerm = Math.pow(10, significantFigures);
    return Math.round(d * correctionTerm) / correctionTerm;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:49:01.093

浮点运算是不精确的。当您将`n`相同`double`的 s 相加并将结果除以 时`n`，您并不总是得到您开始时的数字。

例如，以下内容：

```
double x = 0.1;
double y = x + x + x;
System.out.println(y / 3\. - x); 
```

印刷

```
1.3877787807814457E-17 
```

我强烈推荐[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# testing - 如何为所有重要的测试库编写匹配器？

> ID：15701629
> 
> 赞同：3
> 
> 时间：2013-03-29T10:38:45.947
> 
> 标签：testing, jvm, matcher, hamcrest

我目前正在扩展[Degraph](https://github.com/schauder/degraph)以检查是否违反依赖规则。

到目前为止，我已经为[ScalaTest](http://www.scalatest.org/)创建了匹配器，因为这是我最喜欢的 JVM 测试库。但许多其他人更喜欢或不得不使用其他库。所以我也想为那些提供匹配器（或任何适当的等价物）。

另一方面，我很懒，所以我不想为每个可以想象的库提供匹配器。

所以问题是：

是否有某种匹配器库可以在所有（或大多数/许多）测试库中使用？或者也许是一个将 Hamcrest 匹配器转换为所有其他库的匹配器的包装器？

我想支持的库（按重要性顺序）：

*   JUnit
*   ScalaTest
*   最受欢迎的 Groovy 测试库
*   Clojure 最受欢迎的测试库
*   规格2
*   测试NG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:36:35.697

1.  我见过的每一个单元测试框架都会失败一个抛出异常的测试。
2.  Hamcrest`assertThat(T value, Matcher<T> matcher)`会抛出一个`AssertionError`if `matcher.matches(value)`returns `false`。

因此，Hamcrest 应该与大多数测试框架一起开箱即用。对于其他库，例如用于构建模拟对象，您需要`Matcher`本地使用 Hamcrest 的对象或编写集成层。一种方法是创建一种方法来装饰任何匹配器，例如*，

```
ArgumentMatcher<T> decorate(final Matcher<T> matcher) {
    return new ArgumentMatcher() {
        public boolean <T> accepts(T value) {
            return matcher.matches(value);
        }
    }
} 
```

* 这是一个使用理论模拟 API 的人为示例。

# emacs - 如何在 emacs 中清除并重新加载我的 nrepl 会话？

> ID：15701632
> 
> 赞同：4
> 
> 时间：2013-03-29T10:39:00.160
> 
> 标签：emacs, clojure, nrepl

我正在使用 emacs 和 nrepl。我该如何执行以下操作：

1.  退出`nrepl`（目前我只是杀死缓冲区）

2.  重新加载我在`nrepl`.

我试图通过这样做来解决的问题是，当我加载了一个`ns`表单并且它有一个错误时，我无法加载正确的代码，因为它一直给我之前的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T12:11:32.753

> 1）退出nrepl（目前我只是杀死缓冲区）

`M-x nrepl-quit`

> 2）重新加载nrepl中的所有内容。（我在加载ns时遇到这个问题，并且出现错误。然后我无法加载正确的代码，它仍然给我之前的错误）

您可以切换到缓冲区并用于`C-c C-k`加载缓冲区，或者仅用于`C-c C-c`评估表达式。另一种选择是：

```
(use :reload 'my.namespace) 
```

在 REPL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T01:15:02.963

在 repl 上查看 Stuart Sierra 的命名空间管理[工具](https://github.com/clojure/tools.namespace)，并阅读他解释如何有效使用它的博客[文章。](http://thinkrelevance.com/blog/2013/06/04/clojure-workflow-reloaded)通过一点编码纪律，您将不必再退出您的 nrepl（或更少，在任何情况下）。祝你好运。

# c# - 在运行时在属性之间进行选择

> ID：15701635
> 
> 赞同：0
> 
> 时间：2013-03-29T10:39:14.060
> 
> 标签：c#, wcf, attributes, custom-attributes

我有一个服务接口，在不同的情况下需要不同的属性。简而言之，有两种选择：

```
[DispatchByBodyElementBehavior]
public interface FooPortType
{
    [OperationContractAttribute(Action = "", ReplyAction = "*")]
    FooResponse GetResponse(FooRequest request);
} 
```

和

```
public interface FooPortType
{
    [OperationContractAttribute(Action = "FooAction", ReplyAction = "*")]
    FooResponse GetResponse(FooRequest request);
} 
```

我可以使用编译器选项区分这两者，但我想知道是否有某种方法可以在运行时执行此操作，例如基于配置文件中的选项。

谢谢。

**更新**我试图通过在运行时更改属性来解决这个问题，但在那里也遇到了问题（[后续问题](https://stackoverflow.com/questions/15808141/changing-operationcontractattribute-action-doesnt-work)）。当我发现更多信息时，我会更新这个问题。

# mysql - 如何启用explicit_defaults_for_timestamp？

> ID：15701636
> 
> 赞同：43
> 
> 时间：2013-03-29T10:39:15.503
> 
> 标签：mysql

当我尝试启动我的 mySQL 服务器时，我收到消息：

> [警告] 带有隐式 DEFAULT 值的 TIMESTAMP 已弃用。
> 请使用 --explicit_defaults_for_timestamp 服务器选项（有关详细信息，请参阅文档）。

我在以下位置找到答案：
[http ://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp)

但是如何启用呢？在哪里？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-09T08:01:20.947

首先，您还不需要更改任何内容。

> 这些非标准行为仍然是 TIMESTAMP 的默认行为，但自 MySQL 5.6.6 起已弃用，并且此警告在启动时出现

现在，如果你想转向[新的行为](https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp)，你必须`my.cnf`在 [mysqld] 部分中添加这一行。

```
explicit_defaults_for_timestamp = 1 
```

my.cnf（或其他配置文件）的位置因系统而异。如果找不到，请参阅[https://dev.mysql.com/doc/refman/5.7/en/option-files.html](https://dev.mysql.com/doc/refman/5.7/en/option-files.html)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-10-03T07:30:15.687

在您的 mysql 命令行中执行以下操作：

```
mysql> SHOW GLOBAL VARIABLES LIKE '%timestamp%';
+---------------------------------+-------+
| Variable_name                   | Value |
+---------------------------------+-------+
| explicit_defaults_for_timestamp | OFF   |
| log_timestamps                  | UTC   |
+---------------------------------+-------+
2 rows in set (0.01 sec)

mysql> SET GLOBAL explicit_defaults_for_timestamp = 1;
Query OK, 0 rows affected (0.00 sec)

mysql> SHOW GLOBAL VARIABLES LIKE '%timestamp%';
+---------------------------------+-------+
| Variable_name                   | Value |
+---------------------------------+-------+
| explicit_defaults_for_timestamp | ON    |
| log_timestamps                  | UTC   |
+---------------------------------+-------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-21T11:42:09.760

在**Windows**平台上，

1.  找到您的**my.ini**配置文件。
2.  在**my.ini**中转到该`[mysqld]`部分。
3.  添加**`explicit_defaults_for_timestamp=true`**不带引号并保存更改。
4.  启动**mysqld**

这对我有用（**Windows 7 Ultimate 32bit**）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-14T13:33:06.120

对我来说，将不带引号的短语**“explicit_defaults_for_timestamp = ON”**`my.ini`添加到配置文件中很有效。

确保在配置文件中的 [mysqld] 语句下方添加此短语。

您将在`my.ini`下面找到`C:\ProgramData\MySQL\MySQL Server 5.7`是否进行了 MySQL 的默认安装。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-30T10:53:13.870

在你的 mysql 命令行中：`SET explicit_defaults_for_timestamp=1`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-27T13:38:16.133

在 Windows 上，您可以使用选项键运行服务器，无需更改 ini 文件。

`"C:\mysql\bin\mysqld.exe" --explicit_defaults_for_timestamp=1`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-30T15:01:13.650

在我的系统（Windows 8.1）上，问题出在服务器配置上。当我安装它时，服务器第一次工作。但是，我忘记检查“作为服务运行”选项，这导致了所有问题。我尝试了 SO 上所有可能的解决方案，但没有任何效果。所以，我决定重新安装 MySQL Workbench。在执行我之前用于安装 MySQL 工作台的相同 msi 文件时，我重新配置了服务器并允许将服务器作为服务运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-05T08:58:08.877

在 Windows 上 - 打开 my.ini 文件，位于“C:\ProgramData\MySQL\MySQL Server 5.6”，在下一行找到“[mysqld]”（不带引号）添加显式默认值for_timestamp，然后保存更改。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-17T16:56:33.443

我正在使用 Windows 8.1，我使用此命令

```
c:\wamp\bin\mysql\mysql5.6.12\bin\mysql.exe 
```

代替

```
 c:\wamp\bin\mysql\mysql5.6.12\bin\mysqld 
```

它工作正常..

# java - 是否有用于在 java 中制作可配置工具栏的小部件

> ID：15701641
> 
> 赞同：2
> 
> 时间：2013-03-29T10:39:33.833
> 
> 标签：java, swing, toolbar, jtoolbar

是否有用于在 java 中制作可配置工具栏的小部件？

在 swingx 中找不到任何东西，但似乎是一个常见问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:44:49.350

使用 的实例[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)来公开您的应用程序的功能。将这些操作添加到您的工具栏按钮。因为您可以通过调用和来在您的工具栏编辑器中根据需要使用`JToolBar`按钮。[您可以按照此处](https://stackoverflow.com/a/11114200/230513)的建议保留当前设置。`Container``add()``remove()``revalidate()``repaint()`

# dynamics-crm-2011 - 自定义 CRM 2011 时更改名称

> ID：15701642
> 
> 赞同：2
> 
> 时间：2013-03-29T10:39:47.320
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

我自定义了竞选表格，但遇到了一些问题![在此处输入图像描述](../Images/bf1278ed52d05cd4c9dfd0991a25e706.png)

1.如何自定义名称“通用”。我需要名称而不是通用。在哪里更改？或者我应该更改哪个属性？

2.如果我们尝试不能删除锁定符号字段，它说“只允许业务单位”。如何解锁和如何删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:11:23.883

正如 Guido 建议的那样，您可以通过在表单编辑器中打开表单、双击选项卡并更改标签来编辑选项卡的名称。

至于锁定的字段，您必须将该字段标记为不需要，在实体自定义中，发布您的更改，然后您可以从表单中删除该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:50:26.290

任何选项卡的标签都可以由表单编辑器更改，如果您想要一个动态值，您可以使用支持的自定义设置，例如：

```
var firstTab = Xrm.Page.ui.tabs.get(0);
firstTab.setLabel("new tab name"); 
```

如果某个字段被锁定，则表示业务需要（在您的情况下是必须填写的活动名称），您始终可以隐藏该字段并使用 onload、onchange 或 onsave 事件中的 javascript 代码预填充该值.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:12:39.193

也许其他人可以提出更好的（即受支持的）解决方案，但在那之前 - 为什么不找出这些元素的 id 并直接从*onload*中的 JS 编辑它们？不过，让我再说一遍，这样的操作**是不受支持**的。

# ios - 弹出到根视图后推送 UIViewController

> ID：15701644
> 
> 赞同：3
> 
> 时间：2013-03-29T10:39:48.957
> 
> 标签：ios

我有一个使用故事板和导航控制器的应用程序。在我的应用程序流程的某个阶段，我在视图堆栈上获得了大约四个视图，此时我必须弹出所有视图，直到到达根视图。之后我需要手动推送另一个视图。

我尝试了各种没有运气的事情。我尝试使用内置 API 调用：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

此时，我尝试通过引用根视图并调用 segue 方法来调用 push segue。

```
RootView *obj = [[RootView alloc] init];
[obj callSegue]; 
```

或者

```
[self.navigationController performSegueWithIdentifier:@"pushView" sender:self]; 
```

无论如何，我完全被这个难住了。任何人都可以帮忙吗？

**更新：**

谢谢大家的回复。我正在挖掘更多并找到了一个解决方案，我确信这是其中之一。

```
// Reference to navigation controller. Apparently if you use self.navigationController in a popToRootViewController call it sets self.navigationController to nil.
UINavigationController *navigationController = self.navigationController;
[navigationController popToRootViewControllerAnimated:NO];

// Reference to view to push - must set storyboard ID in inspector
ViewToPush *viewRef = (ViewToPush *)[self.storyboard instantiateViewControllerWithIdentifier:@"gameView"];
[navigationController pushViewController:gameView animated:NO]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:42:03.023

这个怎么样？

`[self.navigationController setViewControllers:@[rootViewController, viewControllerTwo] animated:YES];`

这会将您的堆栈设置为您的根，并使用新的控制器和推送动画。如果您需要快速参考`rootViewController`，可以使用`[[self.navigationController viewControllers] objectAtIndex:0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:47:16.930

一个很好的解决方案是使用“Unwind Segue”。基本上，展开转场是一种转场，它会将您带回推送的控制器堆栈，然后`IBAction`在目标控制器中执行一个方法。你想要做的是从你当前的控制器到根的展开segue，然后`performSegueWithIdentifier:`在被调用的方法中调用。

这里有一个关于 unwind segues 的教程：[Tutorial](http://pragmaticstudio.com/blog/2013/2/5/unwind-segues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:49:31.667

Meybe你可以试试这个：

*   `@property`在你的根 VC 中设置一个标志（a ），比如`shouldPushAutomatically`
*   在您调用的 VC 中`[self.navigationController popToRootViewControllerAnimated:YES];`，实现该`prepareForSegue:WithIdentifier:`方法。在此方法中，使用`(MyVC*)segue.destinationViewController`访问您的根 VC 并将 yourflag 设置为`YES`.
*   在`viewDidLoad`您的根 VC 中，尝试调用您的 push segue（实际上，您可能需要在 中调用它`viewDidAppear`）。

不确定这是否可行，但这就是我尝试使其发挥作用的方式。

# c# - 如何在 Ajax SlideShowExtender 中动态添加图像

> ID：15701647
> 
> 赞同：0
> 
> 时间：2013-03-29T10:40:18.603
> 
> 标签：c#, asp.net, web-services, ajaxcontroltoolkit

我正在使用幻灯片扩展器动态创建幻灯片。我的网络服务代码是：-

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static AjaxControlToolkit.Slide[] GetSlides()
{
    AjaxControlToolkit.Slide[] slides = new AjaxControlToolkit.Slide[tblData.Tables[Count_w].Rows.Count];
    for (int i = 0; i < tblData.Tables[Count_w].Rows.Count; i++)
    {
        DataRow dr = tblData.Tables[Count_w].Rows[i];
        slides[i] = new AjaxControlToolkit.Slide(dr["imgurl"].ToString(), dr["header"].ToString(), dr["descr"].ToString());
    }
    Count_w++;
    return slides;
} 
```

关于为什么会发生这种情况的任何线索。我曾尝试在 Web 服务中包含硬编码并且它有效。工作代码： -

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static AjaxControlToolkit.Slide[] GetSlides()
{
    return new AjaxControlToolkit.Slide[] { 
        new AjaxControlToolkit.Slide("Help/1.png", "Add new server", "Login on server"),
        new AjaxControlToolkit.Slide("Help/2.png", "Add new server", "Login success"),
        new AjaxControlToolkit.Slide("Help/3.png", "Add new server", "Create new user"),
        new AjaxControlToolkit.Slide("Help/4.png", "Add new server", "Test user")};
    return slides;
} 
```

谁能告诉我为什么动态人口不起作用。两种方法都返回相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:44:25.860

通过删除多余的斜杠解决了问题。

## 改变这个

```
dr["imgurl"].ToString() 
```

## 这样

```
dr["imgurl"].ToString().Replace("\\", "/") 
```

## 更新代码

```
[WebMethod]
public AjaxControlToolkit.Slide[] GetSlides(DataTable dt)
{
    AjaxControlToolkit.Slide[] slides = new AjaxControlToolkit.Slide[dt.Rows.Count];
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        DataRow dr = dt.Rows[i];
        slides[i] = new AjaxControlToolkit.Slide(dr["imgurl"].ToString().Replace("\\", "/"), dr["header"].ToString(), dr["descr"].ToString());
    }
    return slides;
} 
```

# android - 代码级传输层保护

> ID：15701648
> 
> 赞同：3
> 
> 时间：2013-03-29T10:40:22.027
> 
> 标签：android, security

我正在开发一种工具，它可以扫描 android 应用程序并显示其中发现的漏洞。我被困在 OWASP 漏洞之一，即**传输层保护不足**。我无法找到易受攻击的代码来创建模式，以便我可以使用任何应用程序对其进行交叉检查。如果您有任何与此漏洞相关的易受攻击的代码，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T15:00:07.730

基本上你必须检查的是，加密是否用于网络上的操作。

例如：是否为登录请求启用了 SSL/TLS？是否有任何其他敏感信息通过网络以明文形式传输？SSL 是否以安全的方式配置（例如，没有 SSLv2）？等等。

[您可以在https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet](https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet)上找到一个列表，在防止此特定漏洞时您必须考虑什么。

但是我认为很难检查是否存在某些东西......

我不熟悉 Android 编程，但我会寻找任何未加密的套接字创建或请求，因为这可能就是这种漏洞。

祝你好运 ;-）

# google-chrome - Chrome 扩展中的人脸识别

> ID：15701649
> 
> 赞同：2
> 
> 时间：2013-03-29T10:40:25.603
> 
> 标签：google-chrome, google-chrome-extension, face-recognition

我想创建一个 Chrome 浏览器扩展，它将使用人脸识别算法来自定义个人书签、密码和主题。

在这种情况下，是否有可能使用与 JavaScript 不同的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:54:46.380

您可以使用[Native Client](https://developers.google.com/native-client/) (NaCl) 将 C/C++ 代码编译成可以在 Chrome 中安全运行的形式。只要 NaCl 运行时（由 Pepper API 提供）满足您的需求，这是可行的。您将在应用程序中使用 Javascript 与您的 NaCl 模块进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:59:28.600

我在这里创建了一个 Javascript 人脸识别教程 - [http://jsfiddle.net/ismaelc/fgq7L/](http://jsfiddle.net/ismaelc/fgq7L/)。（免责声明：我为 Mashape 工作）。它使用 photobooth.js 来捕获图像，并使用 Lambda 的人脸识别 API ( [https://www.mashape.com/lambda/face-recognition](https://www.mashape.com/lambda/face-recognition) )。我这样调用 API：

```
 $.ajax({
    url: "https://lambda-face-recognition.p.mashape.com/recognize",
    type: "POST",
    data: fd,
    processData: false,
    contentType: false,
    beforeSend: function (xhr) {
        xhr.setRequestHeader("X-Mashape-Authorization", $("#mashapeKey").val());
    }
}).done(function (result) {
    alert("Received response..");
    var resultObject = JSON.stringify(result);
    alert(resultObject);
}); 
```

您可能还想通过 webRTC - [http://fadomire查看使用 Skybiometry API (](http://fadomire.futureauth.jit.su/) [https://www.mashape.com/skybiometry-1/skybiometry-face-detection-and-recognition#!documentation ) 的演示。](https://www.mashape.com/skybiometry-1/skybiometry-face-detection-and-recognition#!documentation) [futureauth.jit.su/](http://fadomire.futureauth.jit.su/)

您还可以查看 40 多个面部识别 API、库、软件的列表 - [http://blog.mashape.com/post/53379410412/list-of-40-face-detection-recognition-apis](http://blog.mashape.com/post/53379410412/list-of-40-face-detection-recognition-apis)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-29T14:51:06.987

不，必须使用 HTML 和 JavaScript 创建扩展。

# c# - 在 c# 中从 pic 控制器收集数据

> ID：15701656
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:40:56.853
> 
> 标签：c#, pic

任何人都可以向我指出一些可以帮助我解决这个问题的文献和教程。我知道 pic 控制器的编程可以用较旧的语言（例如 c）完成，但是有一些控制器是用一些 .dll 开发的，可以在 .net 框架中使用。我不想对控制器进行编程，只是为了收集数据，并可能打开它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:43:21.817

你可以阅读这篇关于 Pic Controller 的文章

链接：[http ://www.c-sharpcorner.com/UploadFile/mgold/VirtualOscilloscope08292005103442AM/VirtualOscilloscope.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/VirtualOscilloscope08292005103442AM/VirtualOscilloscope.aspx)

# css - 无法垂直滚动

> ID：15701659
> 
> 赞同：0
> 
> 时间：2013-03-29T10:41:09.440
> 
> 标签：css

我有这个页面：

[http://projects.kleelof.com/rr_chat_roulette/](http://projects.kleelof.com/rr_chat_roulette/)

这是一个非常简单的页面，但是由于某种原因，当页面太高时，垂直滚动条不会出现。

有人可以快速看看并告诉我我做错了什么吗？

我将在下面发布 CSS 和相关的 HTML：

CSS：

```
 body
{
    width: 100%;
    background-color: #000000;
    color: #ffffff;
}

#main_area
{
    width: 1000px;
    padding-top: 20px;
    margin-left: auto;
    margin-right: auto;
}

.bottom_text
{
    font-family: 'Source Sans Pro', serif;
} 
```

HTML：

```
 <div id="main_area">
        <center>
            <img src="images/header.png"/>
            <br/><br/>
            <div id="altContent" style="width:900px; background-color:#000000;">
                <h1>rickrose_chat_roulette</h1>
                <p><a href="http://www.adobe.com/go/getflashplayer">Get Adobe Flash player</a></p>
            </div>
            <br/><br/>
            <span class="bottom_text" style="font-size: 24px;">Chatroulette & 

Omegle Alternative for Hot Good Looking People</span>
                <br/><br/>
                <span class="bottom_text" style="font-size: 14px;">

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</span> 
        </center>

    </div> 
```

保重，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:47:35.193

在回答您的问题时，在您的主 CSS 文件中的第 31 行，`html,body{overflow:hidden)`如果您将其更改为`auto`then 将解决您的问题。

# cordova - Phonegap/Cordova 2.4 Inappbrowser 和 Ripple

> ID：15701660
> 
> 赞同：4
> 
> 时间：2013-03-29T10:41:13.893
> 
> 标签：cordova, ripple, inappbrowser

我正在[为 Cordova 2.4 使用 Inappbrowser](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser) ，最后使用 XCode 让它工作，浏览器窗口弹出。我的问题是我们需要能够在 Windows 上进行测试，并且由于需要时间而每次我们进行更改时都不想使用 Phonegap Build 重新编译。PGB 目前也仅限于 Phonegap 2.3。

我在 Windows 7 上的 Google Chrome 中使用 Ripple Phonegap 模拟器来模拟 iOS 应用程序，但我无法让 Inappbrowser 正常工作。所以我的问题真的

1) 是否可以使用 Ripple 来使用 Inappbrowser？

2) 是否可以使用 Ripple 来使用任何 Phonegap api 功能？

3) 我是否仅限于 Phonegap (Cordova) 2.0.0，因为这是最新版本的 Ripple 中可用的版本。

4) 有没有其他方法可以在不重建/编译的情况下测试 Phonegap 的 iOS 功能？

非常感谢，加扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:22:19.417

看起来您可以使用 inAppBrowser 打开浏览器窗口，但是这些事件将不起作用。该项目对此有一个功能要求：

[https://github.com/blackberry/Ripple-UI/issues/701](https://github.com/blackberry/Ripple-UI/issues/701)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T10:46:24.670

在网上到处寻找 sulotion 却一无所获。Ripple 不支持 Inappbroswer 插件。

# javascript - 如何从流星视图的更改事件中更新模型？

> ID：15701662
> 
> 赞同：0
> 
> 时间：2013-03-29T10:41:15.790
> 
> 标签：javascript, meteor

我有一个流星应用程序。它有一个简单的数据模型和编辑屏幕。模型如下：

```
{
   _id: "some_id",
   date: "date",
   attempts: [{k1: "v1"}, {k1: "v2"}, {k1: "v1"}]
} 
```

该模型存储在会话中。编辑画面的组织方式如下：

```
<template name="editModel">
    <form>
        {{#each model.attempts}}
            {{> attempt}}
            <hr/>
        {{/each}}
    </form>
    <button class="btn add-rep">Add</button>
    <hr/>
    <button type="submit" class="btn btn-primary submit-exercise">Submit</button>
</template>

<template name="attempt">
    <label>K1</label>
    <select name="k1">
        <option {{selected k1 "1"}} >1</option>
        <option {{selected k1 "2"}} >2</option>
    </select>
</template> 
```

`attempt`模板基本上只是下拉列表，应该更新对象的`k1`属性。我写了以下代码：

```
function keyChanged (e, t){
    t.data.k1 = t.find("[name='k1']").value;
}

Template.attempt.events = {
    "change select[name='grip']"    : keyChanged
} 
```

但它不起作用，因为`data`它是只读的。问题是：如何更新`attempts`数组中的那个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:06:09.713

您没有为您的集合提供足够的详细信息以继续进行，但您会直接更新您的集合以更改模型的数据，或者使用您正在使用的模型引擎来执行此操作。

例如直接更新您的集合（向该数组添加一些内容）：

```
Collection.update(id_of_record,{attempts : { $addToSet: {k1:"v9"} } }); 
```

所以这会在集合中添加一条新记录。查看[所有可能的操作](http://docs.mongodb.org/manual/reference/operators/)，使用数组上的 mongodb 文档，例如`$addToSet`您目前唯一不能做的就是使用`$`位置运算符

一旦您更新您的集合，相应的模板数据就会使用反应性进行更新。我会小心一点，并在您的用例中使用`{{#isolate}}`&`{{#constant}}`以确保在不重绘整个模板的情况下呈现 HTML 周围的数据。请参阅[反应性隔离](http://docs.meteor.com/#isolate)和[恒定区域](http://docs.meteor.com/#constant)

# android - 不幸的是，在使用cordova和jquery mobile开发android应用程序时，应用程序已停止

> ID：15701664
> 
> 赞同：0
> 
> 时间：2013-03-29T10:41:20.350
> 
> 标签：android, cordova

我不确定是什么导致这运行不正常，当我在我的 android 模拟器中运行应用程序时，它显示错误“不幸的是应用程序已停止”

感谢任何帮助。我的 logCat 错误看起来像这样

```
03-29 10:25:32.717: E/Trace(779): error opening trace file: No such file or directory (2)
03-29 10:25:32.907: E/AndroidRuntime(779): FATAL EXCEPTION: main
03-29 10:25:32.907: E/AndroidRuntime(779): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.parkingtracker/com.example.parkingtracker.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.parkingtracker.MainActivity" on path: /data/app/com.example.parkingtracker-1.apk
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.os.Looper.loop(Looper.java:137)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-29 10:25:32.907: E/AndroidRuntime(779):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 10:25:32.907: E/AndroidRuntime(779):  at java.lang.reflect.Method.invoke(Method.java:511)
03-29 10:25:32.907: E/AndroidRuntime(779):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 10:25:32.907: E/AndroidRuntime(779):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 10:25:32.907: E/AndroidRuntime(779):  at dalvik.system.NativeStart.main(Native Method)
03-29 10:25:32.907: E/AndroidRuntime(779): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.parkingtracker.MainActivity" on path: /data/app/com.example.parkingtracker-1.apk
03-29 10:25:32.907: E/AndroidRuntime(779):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
03-29 10:25:32.907: E/AndroidRuntime(779):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-29 10:25:32.907: E/AndroidRuntime(779):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-29 10:25:32.907: E/AndroidRuntime(779):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-29 10:25:32.907: E/AndroidRuntime(779):  ... 11 more 
```

我的 AndroidManifest.xml 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.parkingtracker"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.parkingtracker.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:46:30.720

它似乎缺少一个名为 MainActivity 的类。正确检查您的 java 类名和包名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T13:26:54.080

对于那些面临同样问题的人，我正在发布解决方案

问题：

在 Eclipse 中创建一个新的 Android 项目后，我在构建路径中包含了 cordova jar，并将我的 html 页面添加到了 assests/www 文件夹中，并在 MainActivity.java 文件中进行了相应的更改。但是在 Android Emulator 中运行应用程序时，它显示错误“不幸的是 HelloWorldCordova 应用程序已意外停止”。

解决方案：请阅读我的要点以找到解决方案

[https://gist.github.com/itsamiths/5276983](https://gist.github.com/itsamiths/5276983)

# java - 如何将工具提示添加到 celltable 中的单元格？

> ID：15701665
> 
> 赞同：4
> 
> 时间：2013-03-29T10:41:21.233
> 
> 标签：java, gwt

我正在使用 gwt cellTable。在这个单元格表中，我有一列包含compositeCell。现在我想为该复合单元格中的所有单元格添加一个工具提示。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:37:18.343

这是一个抽象工具提示列类，您可以扩展它来代替普通的 Column 类：

```
public abstract class MyToolTipColumn<T, C> extends Column<T, C> {

  interface Templates extends SafeHtmlTemplates {

    @Template("<div title=\"{0}\">")
    SafeHtml startToolTip(String toolTipText);

    @Template("</div>")
    SafeHtml endToolTip();

  }

  private static final Templates TEMPLATES = GWT.create(Templates.class);
  private final String toolTipText;

  public MyToolTipColumn(final Cell<C> cell, final String toolTipText) {
    super(cell);
    this.toolTipText = toolTipText;
  }

  @Override
  public void render(final Context context, final T object, final SafeHtmlBuilder sb) {

    sb.append(TEMPLATES.startToolTip(toolTipText));
    super.render(context, object, sb);
    sb.append(TEMPLATES.endToolTip());

  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T18:55:54.983

我使用这个解决方案：

```
cellTable.addCellPreviewHandler(new Handler<Object>() {
  @Override
  public void onCellPreview(CellPreviewEvent<Object> event) {
    if ("mouseover".equals(event.getNativeEvent().getType())) {
      cellTable.getRowElement(event.getIndex()).getCells().getItem(event.getColumn()).setTitle('cell contents go here.');
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:00:19.943

您可以覆盖渲染方法

```
@Override
public void render(
    com.google.gwt.cell.client.Cell.Context context,
    String data, SafeHtmlBuilder sb) {

    super.render(context, data, sb);
    sb.appendHtmlConstant(SafeHtmlUtils.
        fromString("<div title=\"" +titleValue + "\"></div>"););

} 
```

还要检查这个[GWT CellTable 工具提示不能正常工作](https://stackoverflow.com/questions/12833308/gwt-celltable-tooltip-not-working-properly)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T11:03:26.360

如果您想为纯 GWT 表 (com.google.gwt.user.cellview.client. **CellTable ) 添加****工具提示**，我们可以建议以下行。

 **```
Column<String[], SafeHtml> objectNameColumn = new Column<String[], SafeHtml>(new SafeHtmlCell()) {
    @Override
    public SafeHtml getValue(String[] object) {
        String val = (object[index]==null?"":object[index]); 
        return new SafeHtmlBuilder().appendHtmlConstant("<span title='" + 
            new SafeHtmlBuilder().appendEscaped(val).toSafeHtml().asString() + "'>" + val + "</span>").toSafeHtml();
    }
}; 
cellTable.addColumn(objectNameColumn, colLabel); 
```**

# javascript - Android错误的Websocket Phonegap

> ID：15701666
> 
> 赞同：0
> 
> 时间：2013-03-29T10:41:25.543
> 
> 标签：javascript, android, html, cordova, websocket

我正在尝试在我构建的 HTML5 中实现 websocket API，但显然当我使用 PhoneGap 在 Android 中显示 web 时，它不支持 Websocket 标准（Phonegap/cordova 和 android 浏览器），所以我尝试使用插件： [anismiles 的 websocket android phonegap](https://github.com/anismiles/websocket-android-phonegap)

它实际上应该有效，我所做的是：

*   将java源码复制到eclipse里面的phonegap项目
*   创建扩展 websocket 的 websocketlistener
*   将 websocketfactory 附加到 webview（在 org.apache.cordova.example 内
*   并在我的 javascript 中创建 websocket 客户端
*   我在 HTML 脚本中附加了 websocket.js 和 cordova-2.5.0.js

问题是它总是产生一个错误，比如它不能识别 websocket 类型

所以我试图将它包装在 try catch 函数中：

```
try
{
//writeToScreen("websocket");
var wsocket = new WebSocket("122.168.196.27:8081/");
}
catch(err)
{
alert(err.message);
} 
```

我得到了 err.message：

> 对象 [对象对象] 没有方法“getInstance”

我试图修改，但到目前为止没有任何工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T12:56:15.407

试试这个，将“targetSdkVersion”表格从 17 更改为 15 或低于 15。

# iphone - 目标 C. 使用情节提要登录用户

> ID：15701671
> 
> 赞同：0
> 
> 时间：2013-03-29T10:41:42.193
> 
> 标签：iphone, objective-c, login, storyboard, segue

我有一个带有三个视图控制器的故事板，带有按钮 Init 的 init 视图、登录视图控制器和列表视图控制器。当我单击第一个视图控制器中的按钮 init 时，我想验证用户是否登录以便切换到登录视图或列表视图。我怎样才能使用segues（segue条件？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:50:02.247

当用户像这样在 LOGinViewController 中登录时，您可以将登录值存储在用户默认值中

```
-(void) doLogin
{
NSString * str = @"Loged In";
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:str forKey:@"login"];
    [defaults synchronize];
} 
```

并在第一个视图控制器中检查此 NSdefault 值是否为 nil。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *userLogIn = [defaults objectForKey:@"login"];

    if (userLogIn.length !=0) {
        //then user Loged in
    }else
    {
       //then user not Loged in
    } 
```

此代码只是示例，您可以根据需要对其进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:18:39.903

你可以做这样的事情

```
BOOL isLoggedIn = [[NSUserDefaults standardUserDefaults] boolForKey:@"isLoggedIn"];      
NSString *headingStoryboardID = isLoggedIn ? @"YourAlreadyLoggedInVC_ID" : @"YourLoginVC_ID";

if([headingStoryboardID isEqualToString:@"YourAlreadyLoggedInVC_ID"]) {
     AlreadyLoggedInClass *vc1 = (AlreadyLoggedInClass *)[self.storyboard instantiateViewControllerWithIdentifier:@"YourAlreadyLoggedInVC_ID"];
     [self presentViewController:vc2 animated:YES completion:nil];
} else {
     LoginViewController *vc2 = (LoginViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"YourLoginVC_ID"];
     [self presentViewController:vc2 animated:YES completion:nil];
} 
```

OBS：丑陋且未编译的代码，但希望这个概念能够被理解。

**因评论而编辑** 要执行推送 segue，您调用

```
[self.navigationController pushViewController:vc1 animated:YES]; 
```

反而。

# grails - 如何根据环境覆盖 resources.groovy 中的控制器？

> ID：15701680
> 
> 赞同：0
> 
> 时间：2013-03-29T10:42:16.237
> 
> 标签：grails

我有一个场景，我想在功能测试期间覆盖某些控制器，以便在运行时调用模拟控制器。我可以像这样轻松地覆盖 resources.groovy 中的服务：（[在此处](http://grails.org/doc/latest/guide/spring.html#springdsl)和[此处](http://www.objectpartners.com/2013/02/08/grails-testing-mocking-3rd-party-services/)记录。）

```
 // grails-app/conf/spring/resources.groovy
beans = {
    switch(Environment.current) {
        case Environment.TEST:
            expensiveToUseService(MockExpensiveToUseService)

            break
    }
} 
```

当应用程序在测试环境中运行时，这种方法会正确重定向到模拟服务。

但是，与控制器一起使用的相同方法不起作用。这是我目前的尝试：

```
// grails-app/conf/spring/resources.groovy
beans = {
    switch(Environment.current) {
        case Environment.TEST:
            expensiveToUseController(MockExpensiveToUseController)

            break
    }
} 
```

模拟控制器与原始控制器位于同一目录/包中，位于*grails-app/controllers 下。*

我能看到的唯一明显区别是我的服务在代码中被使用它们的控制器显式引用，例如

```
class ExpensiveToUseController { 
    def expensiveToUseService
...
} 
```

另一方面，控制器仅由 Grails 运行时引用。

可能值得一提的是，我没有将现有控制器中的逻辑移到服务中的选项，这将提供一种解决方法。

我在这里缺少什么，还是有另一种方法可以实现这一目标？

**编辑：见下面的答案。**

对于遇到此问题的其他人，我不需要额外的 bean.scope/autowire 参数。这是我的 DSL：

```
beans = {
switch(Environment.current) {
    case Environment.TEST:
        'com.example.ExpensiveToUseController'(com.example.MockExpensiveToUseController)

        break
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:49:34.363

由于它们不是可自动装配的，因此控制器在 spring 上下文中注册在与其完全限定的类名称匹配的 bean 名称下，而不是服务使用的“属性名称”表示。因此，您需要将测试 bean 注册为`com.example.ExpensiveToUseController`而不是`expensiveToUseController`.

但是将环境检查放在控制器本身的“昂贵”操作中可能更容易。我认为*实例化*控制器的行为不会太昂贵，因为默认情况下控制器是原型范围。

# php - php文件调整大小并上传到服务器文件夹

> ID：15701682
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:42:24.627
> 
> 标签：php, mysql

本地图片文件rezised并成功上传到服务器后出现以下错误：

> 警告：imagejpeg() [function.imagejpeg]：无法打开“photo/Desert.jpg”进行写入：D:\hosting\9393253\html\dev\ 中没有此类文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:51:45.557

早些时候在stackoverflow上提出了这个问题。我认为它的路径问题和这个链接 [LINK](https://stackoverflow.com/questions/757008/php-gd-imagejpeg-unable-to-open)

会帮助你。

# php - 无需使用 HTML 和 PHP 重新加载即可更新值

> ID：15701686
> 
> 赞同：0
> 
> 时间：2013-03-29T10:42:43.847
> 
> 标签：php, javascript, html

我想使用 HTML 和 PHP 在不重新加载的情况下用第二个用户更新第一个用户的值。

**用户.html**

```
 <html>
        <head>
        </head>
        <h1>color</h1>
        <body>
          <div id="txtHint">
         <form name="myForm" action="color.php" method="get">
         <tr><td>color<input type='text' name='color' id='clr/></td></tr>
        <tr><td><input type='submit'  id='submit' name='submit' onclick=''/></td></tr>
         </form>
        </div>
        </body>
        </html> 
```

**颜色.php**

```
<?php
$color=$_GET['color'];
?> 
```

例如，用户键入“red”，因此在 PHP 页面中显示“red”：

**user2.html**

```
 <html>
    <head>
    </head>
    <h1>color</h1>
    <body>
      <div id="txtHint">
     <form name="myForm" action="color.php" method="get">
     <tr><td>color<input type='text' name='color' id='clr'/></td></tr>
    <tr><td><input type='submit'  id='submit' name='submit' onclick=''/></td></tr>
     </form>
    </div>
    </body>
    </html> 
```

我想要这样的输出，一旦用户 2 键入任何颜色，用户 1 的颜色也会更改为 user2 颜色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:00:03.897

您将需要 ajax 来执行此操作。

只有 php 页面中的 echo 不能做任何事情。您需要将颜色保存到数据库中。

在 user.html 页面中，您应该定期检查数据库中的更改。在 user2.html 页面中，您需要使用 ajax 更新数据库或执行普通的 post 或 get 方法。

# git - 如何比较 Beyond Compare 中的两个文件夹，然后将它们检入 TFS？

> ID：15701687
> 
> 赞同：0
> 
> 时间：2013-03-29T10:42:47.087
> 
> 标签：git, tfs

这是一个新手工作流程问题。我习惯了 Git，在那个 SCM 中，将外部文件夹合并到我的存储库中并提交和推送所有内容将非常简单。但是，我不确定如何在 TFS 中做到这一点。我没有使用 Visual Studio，我拥有的是 TFS Power Tools 的 shell 扩展和 Eclipse 中的插件。

我想在 TFS 中模拟的工作流程在 Git 中是这样的：

1.  转到我的存储库`C:\myproject`
2.  拿一些其他文件夹，比如`C:\myproject-v2.0`
3.  打开 Beyond Compare 并手动合并`myproject-v2.0`到`myproject`.
    *   注意：这不仅包括文件修改，还包括添加和删除文件，这对 TFS 来说是一种更艰难的场景，至少看起来如此。
4.  `git commit`
5.  `git push`

真正关键的部分是第 3 步 - 我需要使用智能文件夹比较工具，否则，合并文件夹将非常困难。我不能直接在似乎处理一些 TFS 文件状态等的 IDE（在我的情况下为 Eclipse）中工作。

当我尝试使用 TFS 作为 SCM 完成工作流时，我在第 4 步中得到“没有待处理的更改”。我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:25:11.457

工作流之间的唯一区别是您是使用TFS`Server Workspaces`还是`Local Workspaces`在 TFS 中。否则，它是相同的工作流程。

**服务器工作区 - 不删除文件/文件夹**

1.  `Check out`您要比较的文件夹
2.  拿一些其他文件夹，比如....
3.  打开 Beyond Compare 并手动合并
4.  `Check In`文件夹

**本地工作区**- 仅限 TFS 2012

1.  拿一些其他文件夹，比如...
2.  打开 Beyond Compare 并手动合并
3.  `Check In`待定更改。

这两个工作流程之间的关键区别在于您是否需要先`Check Out`访问文件夹。

**更新 - 如果使用服务器工作区并且您正在删除文件，则工作流程**

另外还有[TFS 电动工具](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)。有一个工具可让您将更改同步到文件夹。该工具旨在让您离线工作，然后同步您的更改。

`tfpt online`

1.  拿一些其他文件夹，比如...
2.  打开 Beyond Compare 并手动合并
3.  运行`tfpt online`命令行工具
4.  签入待处理的更改。

**更新 - 如果您在任何地方都使用 Team Explorer，则另一种方式 - 来自@Edward-Thomson**

您还可以在 Team Explorer Everywhere 中使用内置的“返回在线”功能。只需右键单击您的 Java 项目并选择“团队 > 检测本地更改”

# java - JSF 面板定位

> ID：15701689
> 
> 赞同：1
> 
> 时间：2013-03-29T10:42:49.033
> 
> 标签：java, jsf, primefaces

我可以设置面板的位置然后对其进行更新，但是在获取其当前位置时遇到了麻烦。

例如：目前，我的面板位于 (50, 50)。

```
 <h:form id="testForm">
        <p:panel id="pane" style="position: absolute; left:50px; top:50px;">
            <p:panelGrid columns=4>
                <p:outputPanel id="ASlot3" styleClass="slot"/>  
                <p:outputPanel id="ASlot4" styleClass="slot"/>  
                <p:outputPanel id="ASlot5" styleClass="slot"/>  
                <p:outputPanel id="ASlot6" styleClass="slot"/>  
            </p:panelGrid>
        </p:panel>
        <p:draggable id="drg" for="pane"/>

        <p:commandButton id="press" action="#{sbean.press}"/>

    </h:form> 
```

我通过拖动面板来更新它的位置。拖动它后，我按下一个按钮，按住此方法打印“样式”的内容。

```
 //press() method
    UIViewRoot viewRoot = FacesContext.getCurrentInstance().getViewRoot();
    UIComponent component = viewRoot.findComponent("testForm").findComponent("pane");

    Panel p = (Panel) component;

    System.out.println(p.getAttributes().get("style")); 
```

拖动面板并按下按钮后，“样式”不会更新。

那么如何在拖动后获取面板的当前位置？

编辑：顺便说一句，我使用的范围是@ViewScoped

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:07:53.680

默认情况下，PrimeFaces`commandButton`组件使用 Ajax 功能运行，这意味着要让表单提交处理具有 id 的组件，`pane`您需要在`process`属性中声明它。

```
<p:commandButton id="press" action="#{sbean.press}" process="@this pane"
  update="@this pane" /> 
```

另一种选择是简单地处理和更新整个表单。

```
<p:commandButton id="press" action="#{sbean.press}" process="@form"
  update="@form" /> 
```

或者您可以简单地将 Ajax 功能设置为 Off，它将像典型的表单提交控件一样运行。

```
<p:commandButton id="press" action="#{sbean.press}" ajax="false" /> 
```

**编辑：**我看到虽然 Primefaces 可拖动不会将组件的绝对位置更新为服务器的视图状态。这很不幸，但可以使用 hiddenInputs 和 Javascript 来解决。

```
<script type="text/javascript">
  function updatePanelPosition() {
    var panel = jQuery('#testForm\\:pane');
    var hiddenLeftInput = jQuery('#testForm\\:hiddenLeft');
    var hiddenTopInput = jQuery('#testForm\\:hiddenTop');
    var left = panel.css('left');
    var top = panel.css('top');
    hiddenLeftInput.val(left);
    hiddenTopInput.val(top);
  }
</script>

<h:inputHidden id="hiddenLeft" value="#{viewScopedBean.leftProperty}" />
<h:inputHidden id="hiddenTop" value="#{viewScopedBean.topProperty}" />

<p:commandButton id="press" action="#{sbean.press}" process="@form"
   update="@form" onstart="updatePanelPosition()" /> 
```

两个隐藏的输入组件将使用提交之前的当前 left 和 top 属性进行`pane`更新，然后这些值将更新为托管 bean 属性，您将能够在其中获取值。

我知道这看起来很混乱，但最终这确实是托管 bean 的优点，它就像一个视图控制器并包含表示逻辑。

# c# - C# 网络连接问题

> ID：15701691
> 
> 赞同：1
> 
> 时间：2013-03-29T10:43:04.967
> 
> 标签：c#, sockets

我正在尝试为我的笔记本电脑制作一个应用程序，以防我忘记注销，我可以使用我的智能手机通过使用特定的应用程序来注销。所以我通常在想如果你有一个路由器......你有一个问题，因为你没有可以使用的外部IP和端口。为此，我使用此功能来获取外部 IP。

```
 public string adresaIP()
    {
        UTF8Encoding utf8 = new UTF8Encoding();
        WebClient clientWeb = new WebClient();
        String adresaIP = utf8.GetString(clientWeb.DownloadData("http://bot.whatismyipaddress.com"));
        return adresaIP;
    } 
```

但是当我尝试使用 te IpEndPoint 时它不起作用，它给了我一个异常错误，我不知道我做错了什么。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.IO;

namespace bluetooth_LogOff
{
public partial class Form1 : Form
{
    static byte[] buffer { get; set; }
    static Socket soket;

    public Form1()
    {
        InitializeComponent();
        try
        {
            string ip = adresaIP();

            soket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            //soket.Bind(new IPEndPoint(IPAddress.Parse(ip),1234)); <<-- in this way dosen't work 

            soket.Bind(new IPEndPoint(IPAddress.Parse("127.0.0.1"),1234)); // <<- in this way it works....
            soket.Listen(100);

            Socket accept = soket.Accept();
            buffer = new byte[accept.SendBufferSize];
            int bytesRead = accept.Receive(buffer);
            byte[] format = new byte[bytesRead];
            for (int i = 0; i < bytesRead; i++)
            {
                format[i] = buffer[i];
            }
            string primescMesaj = Encoding.ASCII.GetString(format);
            MessageBox.Show(primescMesaj);
            soket.Close();
            accept.Close();

        }
        catch (Exception messaj)
        {
            MessageBox.Show(messaj.ToString());

        }

    }

    private void button1_Click(object sender, EventArgs e)
    {

        label1.Text = adresaIP();

    }
    public string adresaIP()
    {
        UTF8Encoding utf8 = new UTF8Encoding();
        WebClient clientWeb = new WebClient();
        String adresaIP =    `utf8.GetString(clientWeb.DownloadData("http://bot.whatismyipaddress.com"));`
        return adresaIP;
    }
}

} 
```

但有趣的是，如果我输入像“127.0.0.1”这样的地址，它可以工作，但如果我输入字符串地址，它就不会

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:01:31.887

您不能绑定到该地址属于路由器的外部地址。

您应该绑定到笔记本电脑上的地址 0.0.0.0（所有地址），并将路由器配置为转发笔记本电脑端口（或使用 UPnP）。

您无法直接访问笔记本电脑的原因是因为您的路由器与大多数路由器一样是 NAT（网络地址转换）路由器。它允许多台计算机隐藏在一个 IP 地址后面。因此路由器将有一个公共 IP 地址，而您的笔记本电脑和路由器后面的其他设备将有一个私有 IP 地址（例如 192.168.xx 范围内的那些）

大多数 NAT 路由器都可以配置静态端口转发；即特定私有地址中的端口反映在公共IP中的相同或不同端口中。这允许从公共互联网访问内部设备。UPnP 是一种做同样事情的协议，但不需要在路由器上进行手动配置。UPnP 通常是 P2P 应用程序和一些多人游戏在无需人工干预的情况下获得公共可访问端口的方式。这也是为什么 UPnP 可能被视为安全隐患的原因，因为计算机所有者可能不知道此类转发。

# python - 遍历 Python 3 中的总和组合

> ID：15701692
> 
> 赞同：0
> 
> 时间：2013-03-29T10:43:07.127
> 
> 标签：python, itertools

我正在寻找一种方法来查找总和与斐波那契数列元素的所有组合，其中给定的限制等于相同的值。我知道`combinations()`from`itertools`是我们解决此类问题的最佳选择，但由于我是 Python 新手，我想知道如何保留匹配组合（因为只有一个是正确的，因为这不是算法的结束）。

我目前有：

```
 # Call Fibonacci sequence with a given limit:
 def fib1(n): 
     result = []
     a, b = 1, 1
     while a < n:
         result.append(a)
         a, b = b, a + b
     return result

# Wrong code, skeleton:
def zeckendorf(n):
    from itertools import combinations
    seq = fib1(n)
    row = []
    sum = 0
    for i in combinations(seq, len(seq)):
        sum += i
        row.append(i)
        if sum > n:
            sum = 0
            row = []
            continue
        elif sum == n:
            break

    return row 
```

现在我知道第二点在很多方面都是错误的。另外，我犯了一个错误，试图将元组添加到整数。我只需要知道如何使用 itertools 模块分别遍历这些组合的单独元素。只有 sum 'n' 的组合对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:13:27.243

要查找具有所需总和的*所有组合，请将每个组合附加到结果列表中：*

```
def combinations_with_sum(sequence, desired_sum):
    results = []
    for i in range(len(sequence)):
        results.extend([combination for combination in combinations(sequence, i)
                        if sum(combination) == desired_sum])
    return results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:10:26.480

如果我正确理解您要实现的目标，请使用以下代码：

```
def zeckendorf(n):
    seq = fib1(n)
    for i in range(1, len(seq)):
        for comb in itertools.combinations(seq, i):
            if sum(comb) == n:
                return list(comb)
    return [] 
```

如果您需要对此代码的进一步解释，请询问:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-03T21:12:38.817

假设您想找到输入的所有子集 sum <和之间的`max_sum`元素数。`min_terms``max_terms`

这里有几种方法，我包含了整个脚本，以便更容易测试和使用，但基本上你只需要 * `LimitedSums`() 函数来获得答案。

蛮力方法是[遍历所有子集](https://codereview.stackexchange.com/a/147672/22952)并检查每个子集的总和和元素数量。这就是有效的 `SlowLimitedSums()`- 尽管它利用`itertools.combinations()`迭代子集并且不考虑具有多个`max_terms`元素的子集。

可能更有效的方法是只考虑总和小于 的子集`max_sum`。如果您正在递归地构建子集，您可以在当前子集的总和超过 时立即停止递归`max_sum`，假设您的所有输入数字都是非负数，或者元素数超过`max_terms`。这是在`FasterLimitedSums()`.

请注意，在最坏的情况下，您的结果将包含所有`2^len(v)`子集 - 在这种情况下，两个版本的`*LimitedSums()`.

```
import itertools
import random

def SlowLimitedSums(v, max_sum, min_terms=None, max_terms=None):
  min_terms = 0 if min_terms is None else min_terms
  max_terms = len(v) if max_terms is None else max_terms
  return sorted(set(
      sum(c) for nc in range(min_terms, max_terms + 1)
      for c in itertools.combinations(v, nc)
      if sum(c) <= max_sum))

def FasterLimitedSums(v, max_sum, min_terms=None, max_terms=None):
  l = sorted(v)
  n = len(v)
  min_terms = 0 if min_terms is None else min_terms
  max_terms = n if max_terms is None else max_terms
  result = set([])

  def RecursiveSums(s, n_terms, start_pos):
    if start_pos >= n or s > max_sum or n_terms > max_terms:
      return
    if n_terms >= min_terms:
      result.add(s)
    for p in range(start_pos, n):
      RecursiveSums(s + v[p], n_terms + 1, p + 1)

  RecursiveSums(0, 0, -1)
  return sorted(result)

def main():
  mass_list = [4, 1, 8]
  mass = 10
  print(sorted(mass_list + SlowLimitedSums(mass_list, mass, min_terms=2)))
  print(sorted(mass_list + FasterLimitedSums(mass_list, mass, min_terms=2)))

if __name__ == "__main__":
  main() 
```

# lua - Lua - io.read 当我从串口读取时向我发送回声 - 为什么？

> ID：15701694
> 
> 赞同：2
> 
> 时间：2013-03-29T10:43:12.283
> 
> 标签：lua, serial-port, openwrt

我正在 Lua 中编写代码以从串行端口读取，但是当我读取时，我收到带有代码的回显：

```
print("Dragino Uart Test started\n")
while 1 do
    serialin=io.open("/dev/ttyS0","r")
    print(serialin:read())    --print the data
    serialin:close()
end 
```

当我打开 minicom 向他发送一些数据时，我启用本地回显而不是输入“文本”，然后我看到：

> texxtt

然后我需要按回车键在我的 lua 脚本中查看我的消息。

我在 Dragino 中使用 OpenWRT。

看起来它就像一个提示命令，你输入你看到的每一个东西，你需要按 enter 来向你发送命令。

还有其他方法可以读取/写入串行端口吗？

有人可以帮我吗？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:04:34.583

没有参数的`read`方法读取一整行。这就是为什么您需要在文本末尾按 Enter 键的原因。尝试一次读取一个字节`:read(1)`或使用`:read("*a")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T09:02:21.140

我不知道这对某人来说是否仍然是一个问题，但也许这对一些人有帮助。就像 lhf 说的 :read(1) 是这样做的好方法。我在 :read("*a") 上遇到了一些问题。在我看来，最简单的方法是逐个附加答案，例如：

```
rserial=io.open("/dev/ttyS0",'r')
lines = ""
repeat
    local line=rserial:read(1)
    if string.sub(line, 0, 3) == "OED" then  --OED is here the stream ending. This can vary
            EOD = true
            rserial:close()
    elseif line then
            lines = lines .. line 
    end
until EOD == true
print (lines) 
```

# java - 如果我使用 SVNKit，如何管理会话超时？

> ID：15701695
> 
> 赞同：1
> 
> 时间：2013-03-29T10:43:21.153
> 
> 标签：java, session, timeout, svnkit

我正在使用 SVNKit 1.7.8 java API。

```
<dependency>
        <groupId>org.tmatesoft.svnkit</groupId>
        <artifactId>svnkit</artifactId>
        <version>1.7.8</version>
</dependency> 
```

我的问题是用户登录后，会话会在一段时间后（大约 5-10 分钟后）过期，并且需要再次进行身份验证。我想将此超时设置为某个较大的值，以便没有会话超时。但我找不到任何这样的 API ......有什么想法吗？

# spring - Spring STS 和来自视图（JSP 或 JSF）页面的代码完成

> ID：15701697
> 
> 赞同：3
> 
> 时间：2013-03-29T10:43:23.660
> 
> 标签：spring, jsf-2, cdi, sts-springsourcetoolsuite, jboss-tools

使用 JBoss 工具和 CDI 我非常喜欢这样一个事实，即当我编辑 JSF 页面时，我可以访问 CDI bean 并且自动完成功能非常有用。

现在使用 Spring MVC 和 STS，我为视图页面提供值，`model.addAttribute`但是页面编辑器的自动完成功能非常有限。

在编辑 JSF 页面时，是否有另一种编程方式可以让编辑器更加了解我的 bean？谢谢！

# c++ - ADO 命令执行失败

> ID：15701706
> 
> 赞同：1
> 
> 时间：2013-03-29T10:43:53.520
> 
> 标签：c++, networking, ado

我在 ADO 命令对象上使用 Execute 方法来执行存储过程。当网络适配器被禁用和重新启用时，此调用会引发异常

为什么在这种情况下 Execute 会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:03:20.107

Execute 失败，因为底层网络连接已丢失（尽管 Connection 对象的逻辑状态仍将显示为 Open）

你可以做些什么：

*   作为一般规则，请在使用前打开您的连接。使用后立即释放，
*   有一个错误处理过程，在出错时检查连接是否关闭，重新打开它并重新运行命令。

我想答案取决于您对数据库的使用。您还可以想象有一个监视线程，它定期执行简单的选择并在连接关闭时重新打开连接。

# java - 如何在eclipse中创建一个用于存储序列化对象的文件夹？

> ID：15701707
> 
> 赞同：5
> 
> 时间：2013-03-29T10:43:57.407
> 
> 标签：java, eclipse, serialization

我想在我的 Java 代码中序列化一些对象。我不想把它放在硬盘上的某个随机文件夹中。我希望它位于我的 eclipse 项目文件夹中的 A FOLDER 中。如何制作此文件夹并将我的对象存储在其中？

这是一个好习惯吗？如果我尝试从这个项目中制作一个独立的 JAR，会有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T22:32:12.983

下面的源代码显示了如何在当前目录中创建子文件夹：

```
import java.io.File;

public class SourceCodeProgram {

    public static void main(String argv[]) throws Exception {
        File currentFolder = new File(".");
        File workingFolder = new File(currentFolder, "serialized");
        if (!workingFolder.exists()) {
            workingFolder.mkdir();
        }
        System.out.println(workingFolder.getAbsolutePath());
    }
} 
```

当您运行此源代码并刷新 Eclipse 项目时，您应该会`serialized`在 Eclipse 项目结构中看到目录。现在您可以使用它并将所有文件存储在其中。

在我的应用程序中，当我想在硬盘中存储一些数据时，我总是使用用户推荐。我创建`application.properties`包含密钥的文件：

```
working.folder=/example/app-name 
```

应用程序在开始时读取此文件并在需要时创建此文件夹。第二种解决方案可以是“应用程序参数”。当我只需要用户的一两个参数时，我会从命令行读取它。例如，用户使用该命令运行我的应用程序：

```
java -jar app.jar -dir /example/app-name 
```

当用户不提供任何文件夹时，我使用默认文件夹 -**当前目录**。

有用的网址：

*   [如何通过 File 获取当前目录](http://www.java-forums.org/java-io/7174-how-get-current-directory-through-file.html)。
*   [获取 Java 中的当前工作目录](https://stackoverflow.com/questions/4871051/getting-the-current-working-directory-in-java)。
*   [列表项](http://commons.apache.org/proper/commons-cli/)。
*   [args4j](http://args4j.kohsuke.org/)。
*   [用Java读取属性文件](https://stackoverflow.com/questions/8285595/reading-properties-file-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:59:02.847

这取决于那些可序列化对象有什么信息。

此外，如果您想在代码库中拥有一个文件夹（但仅作为文件夹部署），您可以编写代码、写入或读取文件：

```
URL dir_url = ClassLoader.getSystemResource(dir_path);
// Turn the resource into a File object
File dir = new File(dir_url.toURI());
// List the directory
String files = dir.list() 
```

注意目录应该在类路径中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T09:16:41.370

脚步：

1.  在 Package Explorer 中右键单击项目的文件夹
2.  找到“新建”菜单项并将其悬停
3.  在打开的菜单中找到“文件夹”并单击它
4.  为您的文件夹命名
5.  点击底部的“完成”按钮

这将创建一个文件夹，当从 Eclipse 中运行时，该文件夹应该可以从您的工作目录访问。

在运行时摆弄 JAR 文件中的文件是个坏主意。想象一个场景，当有两个或多个 JVM 运行相同的 JAR 时，这也意味着它们使用相同的文件并且读取/写入这些文件可能会导致冲突。您通常希望将这些文件彼此分开。

因此，除非这些文件是只读的，否则不应将它们包含在 JAR 中（否则没问题）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T17:54:54.143

写入用户目录不是更好吗，例如在子文件夹中*`.myApp/`*？

你会做这样的事情来设置/初始化目录：

```
File userDir = new File(System.getProperty("user.home"));
File storageDir = new File(userDir, ".myApp");
if (!storageDir.exists())
    storageDir.mkdir();
// store your file in storageDir 
```

看看[这里](http://en.wikipedia.org/wiki/Home_directory)找出`userDir`通常位于的位置（尽管您不一定需要关心）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-06T19:42:11.777

如果您在 Eclipse 中启动程序，则默认情况下，进程的当前工作目录将是项目的根目录。然后你可以像这样初始化和使用`serialized`在你的项目的根目录中命名的目录：

```
File serializedDir = new File("serialized");
if (!serializedDir.exists()) {
    serializedDir.mkdir();
} 
```

代码中的相对路径将是相对于工作目录的，默认情况下是项目的根目录。您可以在启动器配置中更改默认工作目录。

这是否是一个好的解决方案取决于您的项目。如果您不想/不需要与其他人共享序列化对象，那么我认为这没有任何问题。

当使用 Eclipse 的 Export 功能从项目创建 jar 时，请记住默认情况下会选择该文件夹。您必须明确取消选择它才能从 jar 中排除。（无论如何，最好使用 Maven 或 Ant 来生成 jars 而不是 Eclipse，您只需配置一次，因此无需担心目录被意外包含。）

您可能还想从版本控制中排除该目录。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-07T19:16:08.407

为此，您需要两件事：A）访问/创建特定文件夹 B）实际序列化您的对象并将它们保存到磁盘。

对于A），这里的其他答案肯定会回答这个问题，这些答案显示了如何：1）检查文件夹是否存在。2) 如果文件夹不存在，则创建该文件夹。此外，在 eclipse 中启动的项目将 eclipse 项目文件夹作为工作目录。

对于 B)，您需要使用 FileOutputStream 序列化您的对象。请参阅[http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)。您可以将每个对象序列化到一个单独的文件中，也可以使用包含对所有对象的引用的 ArrayList（或其他一些数据结构）创建一个类。

下面的示例类使用静态方法执行您所要求的操作，因为我不想实例化一个对象。此外，您需要在 eclipse 项目中按 F5 来刷新包资源管理器并查看新文件夹和文件。

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

public class CreateDirAndSerialize {

    public static void main(String args[])
    {
        ArrayList<String> sampleString = new ArrayList<String> ();
        sampleString.add("Test1");
        sampleString.add("Test2");
        sampleString.add("Test2");
        //Get the directory
        File directory = getSerializedDirectory();
        writeObjects(directory, sampleString);
    }

    public static void writeObjects(File directory, Object object)
    {
        try
          {
             FileOutputStream fileOut =
             new FileOutputStream(directory+"//serializedData");
             ObjectOutputStream out =
                                new ObjectOutputStream(fileOut);
             out.writeObject(object);
             out.close();
              fileOut.close();
          }catch(IOException i)
          {
              i.printStackTrace();
          }
    }

    public static File getSerializedDirectory()
    {
        File serializedDir = new File("serialized");
        if (!serializedDir.exists()) {
            serializedDir.mkdir();
        }
        return serializedDir;   
    }

} 
```

作为 eclipse 中的项目所指的问题，以上内容适用于 eclipse 项目中的代码。如果您想与 Eclipse 本身进行交互，我们正在谈论 eclipse 插件开发，这完全是另一回事，因此您需要指定它。

最后，您还可以创建一个自定义类来保存您想要的任何变量，并实例化一个包含所有其他对象的单例对象。然而，在序列化对象时有一些限制，例如： - 带有静态修饰符的对象引用是不可序列化的。

有关一些可序列化的一些规则/提示，请参阅此：[http ://www.xyzws.com/Javafaq/what-are-rules-of-serialization-in-java/208](http://www.xyzws.com/Javafaq/what-are-rules-of-serialization-in-java/208)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T09:39:06.037

您可以忽略 Eclipse 并以编程方式或手动创建目录（和其中的文件）。

然后，在 Eclipse 中刷新您的项目资源管理器视图，瞧，目录和文件是视图的一部分。

# php - 添加虚拟元素以填充 X 个空格

> ID：15701708
> 
> 赞同：0
> 
> 时间：2013-03-29T10:44:03.037
> 
> 标签：php

在具有产品网格布局的网上商店工作。

网格默认为 5 项，向下 4 项：20 项。

使用 CSS，项目`<li>`有理由将它们均匀地隔开。但是，当您的间距小于 5 的倍数时，间距会倾斜，因为对齐间距在该行上的空间少于 5 个项目，从而增加了更多的空白。**见：http:** [//jsfiddle.net/DmgeF/1/](http://jsfiddle.net/DmgeF/1/)

现在，我知道使用`$count_page = $wp_query->post_count`. 每页最多可以列出 200 个项目。

我的想法是在最后一行添加虚拟`<li>`元素，如果它需要 1、2、3 或 4 个额外`<li>`的 s 来平衡间距。

我试过了：

```
// GET MULTIPLES OF 5
$array_main = array_fill(1, 40, null);
array_walk($array_main, function(&$item, $key){ $item = $key * 5; });

// GET $array_main MINUS OTHERS
$minus_1 = $minus_2 = $minus_3 = $minus_4 = array();
foreach($array_main as $key => $value) {
    $minus_1[$key] = $value - 1 ;
    $minus_2[$key] = $value - 2 ;
    $minus_3[$key] = $value - 3 ;
    $minus_4[$key] = $value - 4 ;
} 
```

这导致项目数减去缺失的*n*值`<li>`。

我一直在努力弄清楚的是如何计算`<li>`我需要的失踪人数。

就像是：

```
if($count_page IS A VALUE OF $minus_1) { echo '<li></li>'; }
if($count_page IS A VALUE OF $minus_2) { echo '<li></li><li></li>'; }
if($count_page IS A VALUE OF $minus_3) { echo '<li></li><li></li><li></li>'; }
if($count_page IS A VALUE OF $minus_4) { echo '<li></li><li></li><li></li><li></li>'; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:51:54.240

您需要添加`5 - $count_page % 5`虚拟列表项以使列表项的总数达到 5 的倍数，除非`$count_page % 5 == 0`在这种情况下您不必添加任何虚拟列表项。

# ruby-on-rails - 如何让 Cucumber 不从数据库中删除一条记录？

> ID：15701710
> 
> 赞同：0
> 
> 时间：2013-03-29T10:44:20.727
> 
> 标签：ruby-on-rails

Cucumber 在每次运行前清理 TEST DB。

但是我有几个值应该始终在数据库中。
（“默认”的）。

有没有办法告诉 Cucumber 不要删除某些值？
还是在每次运行之前创建 mb？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:05:59.867

只需将其放在背景部分的给定块中即可。

例如

```
Background:
  Given I have an item that exists

Given /^I have and item that exists$/ do
  Item.create!(item_name: 'Name')
end 
```

希望这可以帮助。

# php - 无法在我的 android 应用程序中使用 XAMPP 服务器在我的数据库中插入值

> ID：15701711
> 
> 赞同：0
> 
> 时间：2013-03-29T10:44:25.103
> 
> 标签：php, android, database, json, xampp

我是 android 编码的新手。我无法在我的数据库中插入值，尽管 logcat 显示我已插入其中，但数据库无法显示我已插入的值。附上所有代码：

AlertDialogManager.java

```
public class AlertDialogManager extends Activity {

// Progress Dialog
private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();
EditText inputQty;
EditText inputPrice;

// url to create new product
private static String url_create_product = "http://10.0.2.2/Schemes_NAV/create_product.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alert_dialog_text_date_entry);

    // Edit Text
    inputPrice = (EditText) findViewById(R.id.et_price);
    inputQty = (EditText) findViewById(R.id.et_qty);

    // Create button
    Button btnCreateProduct = (Button) findViewById(R.id.OkButton);

    // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // creating new product in background thread
            new CreateNewProduct().execute();
        }
    });
}

/**
 * Background Async Task to Create new product
 * */
class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AlertDialogManager.this);
        pDialog.setMessage("Creating..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {
        String Qty = inputQty.getText().toString();
        String price = inputPrice.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("Qty", Qty));
        params.add(new BasicNameValuePair("price", price));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created product
                Intent i = new Intent(getApplicationContext(), Nav.class);
                startActivity(i);

                // closing this screen
                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

} 
```

}

接下来是它的布局，即 alert_dialog_text_date_entry.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
   android:gravity="center"
    >

    <TextView
        android:layout_width="248dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:gravity="left"
        android:text="Qty"
        android:textAppearance="?android:textAppearanceMedium" />

    <EditText
        android:id="@+id/et_qty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:autoText="false"
        android:capitalize="none"
        android:digits="0123456789"
        android:gravity="fill_horizontal"
        android:imeActionLabel="Done"
        android:imeOptions="actionDone"
        android:inputType="phone"
        android:numeric="decimal"
        android:scrollHorizontally="true"
        android:textAppearance="?android:textAppearanceMedium" />

    <TextView
        android:layout_width="248dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:gravity="left"
        android:text="Price"
        android:textAppearance="?android:textAppearanceMedium" />

    <EditText
        android:id="@+id/et_price"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="fill_horizontal"
        android:imeActionLabel="Done"
        android:imeOptions="actionDone"
        android:numeric="decimal"
        android:scrollHorizontally="true"
        android:textAppearance="?android:textAppearanceMedium" 

    <TextView
        android:layout_width="252dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20.0dip"
        android:layout_marginRight="20.0dip"
        android:gravity="left"
        android:text="Buy Date"
        android:textAppearance="?android:textAppearanceMedium" />

    <DatePicker
        android:id="@+id/et_datePicker"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
       android:id="@+id/linearLayout1"
       android:layout_width="302dp"
       android:layout_height="wrap_content" >

  <Button
    android:id="@+id/OkButton"
    android:layout_width="130dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="20.0dip"
    android:text="OK" />

  <Button
    android:id="@+id/cancelButton"
    android:layout_width="130dp"
    android:layout_height="wrap_content"
    android:layout_marginRight="20.0dip"
    android:text="Cancel" />

  </LinearLayout>

  </LinearLayout> 
```

接下来，php文件create_product.php

```
<?php

  // array for JSON response
  $response = array();

 // check for required fields
 if (isset($_POST['Qty']) && isset($_POST['price'])) {

$Qty = $_POST['Qty'];
$price = $_POST['price'];

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// mysql inserting a new row
$result = mysql_query("INSERT INTO schemes(Qty, price) VALUES('$Qty', '$price')");

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Product successfully created.";

    // echoing JSON response
    echo json_encode($response);
} else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

而且，logcat 确实表明它创造了新产品。

```
 D/dalvikvm(686): GC_FOR_MALLOC freed 6754 objects / 755288 bytes in 236ms
 03-29 15:40:09.499: D/Create Response(686): {"message":"Product successfully created.","success":1} 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:53:57.987

您需要将以下两个语句从 doInBackground 移动到 onPreExecute 方法。

```
String Qty = inputQty.getText().toString();
String price = inputPrice.getText().toString(); 
```

doInBackground 在不同的线程上运行，因此无法访问您的活动视图，而 onPreExecute 和 onPostExecute 方法在您的 UI/主线程上运行并且可以访问活动视图。

您的服务器端代码不会验证它收到的任何输入。在您的代码中，doInBackground 为 Quantity 和 Price 发送空白值，如果这些字段上没有数据库约束，则使用这些选项将插入一个带有空白值的行。

# c - 一次在 udp 服务器上创建两个套接字，如何绑定（）？

> ID：15701716
> 
> 赞同：0
> 
> 时间：2013-03-29T10:44:36.350
> 
> 标签：c, windows, winapi, network-programming, udp

我希望在我的 udp 服务器应用程序上实现两个功能。

1.  创建连续接收来自任何客户端的数据的线程。

2.  创建一个线程，在特定时间段后在服务器套接字上连续发送数据并等待客户端的回复。（我实现了这一点，以确保无论何时任何客户端出现故障，都不会从客户端接收到数据，并且服务器会知道客户端已关闭。）

现在，我面临的问题是，由于两个线程共享同一个连接的套接字，每当两个线程尝试同时访问这个套接字时，就会建立死锁。

我发现的解决方案之一是创建两个套接字。一个连续接收数据，另一个套接字用于不时从服务器向客户端发送数据并等待他们的响应，但由于服务器必须被绑定（）并且我已经将我的套接字绑定（）到 INADDR_ANY曾经，我将如何创建一个单独的套接字来从服务器发送数据并等待来自客户端的回复。

请帮我解决这个并发症。

如果还有其他更好的实施方式，请告诉我。
提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:00:56.477

您将不得不使用[非阻塞网络函数](http://www.kegel.com/dkftpbench/nonblocking.html)并使用[互斥锁](https://computing.llnl.gov/tutorials/pthreads/#Mutexes)来确保没有两个线程同时访问套接字。

但是，如果您使用非阻塞函数，则单个线程可能就足够了。使用多个线程可能不会提高性能，但*可能*会使代码更具可读性。

# php - 创建与 wordpress 相同的 .htaccess 重写规则

> ID：15701719
> 
> 赞同：1
> 
> 时间：2013-03-29T10:44:57.157
> 
> 标签：php, .htaccess, url-rewriting, rewrite

我在 .htaccess 中创建重写规则

我有一些问题，我正在创建类似 wordpress 的规则，但我没有正确

我正在写的规则如下

```
`RewriteRule projectDir/(.*)/(.*)/(.*)$ index.php?module=$1&action=$2&id=$3` 
```

在这个 ReFacta 是我的项目目录

我想要的网址和下面一样

```
`http://localhost/projectDir/user/edit/5` 
```

任何想法的朋友？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:54:22.877

你几乎是正确的。你的代码有什么问题，你没有指定`RewriteBase`

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /projectDir
RewriteRule ^(.*)/(.*)/(.*)$ /index.php?module=$1&action=$2&id=$3 [L] 
```

# python - 如何获得 csr_matrix 中列的均值和标准差？

> ID：15701720
> 
> 赞同：8
> 
> 时间：2013-03-29T10:45:08.760
> 
> 标签：python, numpy, scipy, sparse-matrix

我有一个`csr_matrix`通过`scipy.sparse`. 有没有一种方法可以在不必将稀疏矩阵转换为密集矩阵的情况下获得其均值和标准差？

`numpy.mean`似乎只适用于密集向量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T11:39:35.603

由于您正在执行列切片，因此使用 CSC 而不是 CSR 存储矩阵可能会更好。但这取决于您对矩阵的其他操作。

要计算 CSC 矩阵中列的平均值，您可以使用矩阵的[`mean()`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.mean.html#scipy-sparse-csc-matrix-mean)函数。

要有效地计算标准差，只需要付出更多的努力。首先，假设你得到这样的稀疏列：

```
col = A.getcol(colindex) 
```

然后像这样计算方差：

```
N = col.shape[0]
sqr = col.copy() # take a copy of the col
sqr.data **= 2 # square the data, i.e. just the non-zero data
variance = sqr.sum()/N - col.mean()**2 
```

# asp.net - 在动态数据中过滤父级的父级

> ID：15701722
> 
> 赞同：1
> 
> 时间：2013-03-29T10:45:16.170
> 
> 标签：asp.net, asp.net-dynamic-data

我的模型中有以下关系

餐厅 -> 美食 -> 物品

在项目的列表页面上，我需要能够直接按餐厅过滤。如何在 ASP.NET 动态数据应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:52:36.907

我刚刚使用**EntityDataSource**模拟了您的问题，一切正常。考虑两种方法来解决您的问题。

第一种方法是使用**QueryExtender**控件和**SearchExpression**。您可以通过链接[SearchExpression](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.expressions.searchexpression.aspx)和示例找到更多详细信息。

您可以通过链接[多列搜索](http://csharpbits.notaclue.net/2011/01/adding-multi-column-search-to-default.html)从史蒂夫关于动态数据的博客中找到这方面的真实示例。如果你在你的动态数据网站上实现史蒂夫的方法，你需要做的就是改变你的**项目**元数据，例如，

```
[MetadataTypeAttribute(typeof(Item.ItemMetadata))]
[MultiColumnSearch(
    "Item_Name", 
    "Item_Info", 
    "Cuisine.Restaurant.Restaurant_Name")]
public partial class Item
{
    internal sealed class ItemMetadata
    {
        public string Item_Name { get; set; }
        public string Item_Info { get; set; }
        public Cuisine Cuisine { get; set; }
    }
} 
```

现在您可以在自定义*List.aspx*页面上按餐厅名称搜索**项目**（例如）。这是第一种方式。

第二种方法是在**Item** *List.aspx*页面上使用**EntityDataSource的****Where**属性。

 *****简单的例子：

```
<asp:EntityDataSource 
    ID="ItemGridDataSource" 
    runat="server" 
    EnableDelete="true" 
    OnSelecting="ItemGridDataSource_Selecting"
    OnSelected="ItemGridDataSource_OnSelected"
    Where="it.Cuisine.Restaurant.Restaurant_IsClose=false" /> 
```

或者你可以使用

```
protected void Page_Load(object sender, EventArgs e)
{
    ItemGridDataSource.WhereParameters.Add(new Parameter("it.Cuisine.Restaurant.Restaurant_Name", TypeCode.String, yourValueFromDropDownForExample));
} 
```

在代码隐藏中。

更多信息：[实体数据源](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.entitydatasource%28v=vs.100%29.aspx)

**附言**

我想向您推荐一本 Oleg Sych 所著的**ASP.NET Dynamic Data Unleashed**的好书，您可以在其中找到有关 Dynamic Data 中扩展过滤的更多详细信息。*****

# symfony - Symfony2 & phpunit：启用方法覆盖

> ID：15701723
> 
> 赞同：4
> 
> 时间：2013-03-29T10:45:19.620
> 
> 标签：symfony, phpunit, x-http-method-override

我刚开始一个 Symfony2 项目。CRUD 生成工具创建了一个默认控制器和功能测试，我正在对其进行修改以满足我的需要。控制器生成的编辑表单创建以下 HTML：

```
<form action="/app_dev.php/invoice/7" method="post" >
    <input type="hidden" name="_method" value="PUT" />
    <!-- ... -->
</form> 
```

我喜欢重写 HTTP 方法的方法，因为它使我能够在我的应用程序中创建语义路由。现在我正在尝试使用以下功能测试此表单：

```
$crawler = $client->click($crawler->selectLink('Edit')->link());
$form = $crawler->selectButton('Edit')->form(array(
    '_method' => 'PUT',
    // ...
));

$client->submit($form);
$this->assertEquals(302, $client->getResponse()->getStatusCode(), "Unexpected HTTP status code for POST /invoice/<id>/edit"); 
```

当我通过运行来执行测试时`phpunit -c /app`，我的测试失败了，因为状态码是 405 而不是预期的 302。

通过一些调试，我发现 的响应是`MethodNotAllowedHttpException`. 显然，当通过 PHPUnit 运行测试时，[方法覆盖](http://symfony.com/doc/master/cookbook/routing/method_parameters.html)（在内部将 POST 请求结合`_method=PUT`参数映射到 PUT 请求）不会发生。

也就是说，我的问题是：**在执行我的 PHPUnit 测试时，为什么 symfony 不重新识别覆盖的方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:01:07.383

method的第二个参数`form`是一个 http 方法。所以试试这个：

```
$form = $crawler->selectButton('Edit')->form(array(
    // ...
), 'PUT'); 
```

# c# - 如何更改列TableLayoutPanel c#的顺序

> ID：15701725
> 
> 赞同：1
> 
> 时间：2013-03-29T10:45:31.167
> 
> 标签：c#, .net, winforms, visual-studio, tablelayoutpanel

我有一个`TableLayoutPanel`具有 x 列的行的控件。里面的每个单元格都有一个面板控件。
我想在运行时将 x 列与 y 列交换。

我怎样才能做到这一点？

再一次，问题是：**如何更改列的顺序`tablelayoutPanel`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:35:30.867

如果您有对每个 Panel 控件的引用，请使用它们并跳过下面代码的前两行（即，我在下面使用 GetControlFromPosition() 函数来获取对控件的引用）-

```
Control ctr1 = tableLayoutPanel1.GetControlFromPosition(0, 0);
Control ctr2 = tableLayoutPanel1.GetControlFromPosition(1, 1);

tableLayoutPanel1.SetCellPosition(ctr1, new TableLayoutPanelCellPosition(1, 1));
tableLayoutPanel1.SetCellPosition(ctr2, new TableLayoutPanelCellPosition(0, 0)); 
```

用要放置控件的行和列索引替换 0 和 1。

# sql-server - 将存储过程称为准备好的语句是否有意义？

> ID：15701728
> 
> 赞同：0
> 
> 时间：2013-03-29T10:45:37.433
> 
> 标签：sql-server, stored-procedures, prepared-statement

我有 SQL Server 存储过程来插入或更新一些数据（做一些逻辑）。我想从 .net 应用程序中多次调用它来插入/更新许多行。

当存储过程已经编译并且只需要参数时，将存储过程作为准备好的语句调用是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:30:37.700

任何存储过程（如**参数化查询**）也必须在 SQL Server 执行之前**解析一次。**

在解析期间，**执行计划**被确定并存储在 SQL Server 的计划缓存中，并且对该存储过程（或参数化查询）的任何后续调用都将重用该缓存的执行计划。该缓存的执行计划将一直保留在内存中，直到 SQL Server 重新启动，或者直到由于内存压力而必须清除缓存。

所以基本上 - 存储过程（或参数化查询）必须**解析一次**（以确定执行计划）这一事实是没有办法的 - 一旦完成，执行计划就在内存中并且可以重用。这也意味着：对存储过程的第一次调用（自上次 SQL Server 重新启动以来）总是会慢一些——毕竟，需要执行更多的工作——并且任何后续调用都应该明显更快。

# java - 读取目录内容而不是 zip 文件内容

> ID：15701731
> 
> 赞同：0
> 
> 时间：2013-03-29T10:45:47.647
> 
> 标签：java, directory, zipfile, fuse

我有这段代码可以读取 zip 文件内容，但我想读取目录内容而不是 zip 文件（必须将 zip 文件视为目录）。我该怎么办 ？

```
import java.util.HashMap;
import java.util.Map;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

public class ZipFileDataReader {
    private ZipFile zipFile;
    private Map zipEntry2dataReader;

    public ZipFileDataReader(ZipFile zipFile) {
        this.zipFile = zipFile;
        zipEntry2dataReader = new HashMap();
    }

    public synchronized ZipEntryDataReader getZipEntryDataReader(
            ZipEntry zipEntry, long offset, int size) {
        ZipEntryDataReader entryReader = (ZipEntryDataReader) zipEntry2dataReader
                .get(zipEntry.getName());

        if (entryReader == null) {
            entryReader = new ZipEntryDataReader(zipFile, zipEntry);
            zipEntry2dataReader.put(zipEntry.getName(), entryReader);
        }

        return entryReader;
    }

    public synchronized void releaseZipEntryDataReader(ZipEntry zipEntry) {
        zipEntry2dataReader.remove(zipEntry.getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:05:10.197

[这是关于Java File IO](http://www.mkyong.com/tutorials/java-io-tutorials/)的一个很好的大指南。

# javascript - 将 javascript swipe 和 onclick 事件绑定到其中包含 pdf 文档的 iframe

> ID：15701733
> 
> 赞同：0
> 
> 时间：2013-03-29T10:46:05.703
> 
> 标签：javascript, jquery, iframe

我在 html5 中有一个 iframe，它的源是 pdf 文档。想要对 iframe 元素的点击和滑动事件执行一些操作。我已尝试绑定事件，但 iframe 未触发事件。如何为 iframe 捕获这些事件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:48:51.013

*这是不可能的。*

PDF 由 PDF 浏览器插件显示在 iframe 中，就像 Flash 内容由 Flash 插件显示一样。您不能像捕获其他 DOM 事件一样从插件容器视图中捕获事件。

# java - 比扩展 Vector 的堆栈更好

> ID：15701734
> 
> 赞同：2
> 
> 时间：2013-03-29T10:46:12.253
> 
> 标签：java, collections

我刚刚注意到在 Java中`Stack`扩展，参考： [here](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Stack.java)。 比所以慢我可以使用更好的堆栈吗？`Vector``Vector``ArrayList`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:56:02.490

您可以使用基于 ArrayList 而不是 Vector 的 Apache ArrayStack：

[http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/ArrayStack.html](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/ArrayStack.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:21:25.527

java.util.ArrayDeque 具有所有堆栈方法（pop、push、peek）并且速度很快。API*这个类作为栈使用时可能比Stack快，作为队列使用时比LinkedList快。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:51:46.067

我发现当您只需要访问数据结构的正面（和背面）时，LinkedList 做得很好。它增加了复杂性 O(1)，并且从前面也增加了 O(1)。它也永远不必担心调整后备数组的大小。

# c# - 提交带有其他路由参数的实体集合

> ID：15701738
> 
> 赞同：0
> 
> 时间：2013-03-29T10:46:21.920
> 
> 标签：c#, asp.net-mvc, binding

我有一个强类型视图

```
@model IEnumerable<MagazineIndex> 
```

表示用户输入的对象数组。我还有一个下拉列表：

```
@Html.DropDownList("DropDownName",
                   (List<SelectListItem>)ViewData["magazines"],
                   new { id = "DropDownName" }) 
```

当我提交表单时，我收到此错误：

> 没有具有键“DropDownName”的“IEnumerable”类型的 ViewData 项。

我的控制器是这样的：

```
public ActionResult CreateContent(IList<MagazineIndex> indexes,
                                  string DropDownName) 
```

我必须如何更正绑定值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:07:24.693

确保在 HttpPost 操作中填充的`ViewData["magazines"]`方式与在 Get 操作中相同：

```
[HttpPost]
public ActionResult CreateContent(IList<MagazineIndex> indexes, string DropDownName)
{
    ...
    ViewData["magazines"] = ... same stuff as in your GET action
    return View(indexes);
} 
```

仅当您打算在 POST 操作中重新显示相同的视图时才需要这样做。如果您重定向，则不需要它。您需要它的原因非常明显。您的视图需要呈现一个 DropDown 控件，该控件取决于其值。

# mysql - 多个MYSQL查询到多列表

> ID：15701744
> 
> 赞同：0
> 
> 时间：2013-03-29T10:46:42.710
> 
> 标签：mysql

我有三个表，设置如下：

```
Ph
  ID
  time (in the format: datetime)
  Ph

Total suspended solids
  ID
  time (in the format: datetime)
  solids

TEMPERATURE
  ID
  time (in the format: datetime)
  temp 
```

根据下面的示例，温度、ph 值和固体这三个值彼此间隔几秒更新，

```
ID          time                    temp
123335  2013-03-29 21:34:05         26.56
123336  2013-03-29 21:35:05         26.56
123337  2013-03-29 21:36:05         26.56

ID          time                    solids
113886  2013-03-29 21:34:19         146
113887  2013-03-29 21:35:19         146
113888  2013-03-29 21:36:19         146

ID          time                    Ph
62147   2013-03-29 21:34:04         7.39
62148   2013-03-29 21:35:04         7.43
62149   2013-03-29 21:36:04         7.43 
```

我想查询mysql以获得下面的结果（注意我已经从表中省略了秒）

```
time                temp    solids  Ph
2013-03-29 21:34    26.56   146     7.39
2013-03-29 21:35    26.56   146     7.43
2013-03-29 21:36    26.56   146     7.43 
```

请问你能帮我查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:18:08.290

可能有一个更有效的解决方案，但这样的事情应该可以工作......

```
DROP TABLE IF EXISTS ph;
CREATE TABLE Ph(time datetime PRIMARY KEY, Ph DECIMAL(5,2) NOT NULL);

DROP TABLE IF EXISTS tss;
CREATE TABLE tss(time datetime PRIMARY KEY,solids int NOT NULL);

DROP TABLE IF EXISTS temperature;
CREATE TABLE temperature(time datetime NOT NULL PRIMARY KEY,temp DECIMAL(5,2) NOT NULL);

INSERT INTO temperature VALUES 
('2013-03-29 21:34:05',26.56),
('2013-03-29 21:35:05',26.56),
('2013-03-29 21:36:05',26.56);

INSERT INTO tss VALUES 
('2013-03-29 21:34:19',146),
('2013-03-29 21:35:19',146),
('2013-03-29 21:36:19',146);

INSERT INTO ph VALUES
('2013-03-29 21:34:04',7.39),
('2013-03-29 21:35:04',7.43),
('2013-03-29 21:36:04',7.43);

SELECT * 
  FROM ph 
  JOIN tss 
    ON DATE_FORMAT(tss.time,'%Y%m%d%h%i') = DATE_FORMAT(ph.time,'%Y%m%d%h%i') 
  JOIN temperature t 
    ON DATE_FORMAT(t.time,'%Y%m%d%h%i') = DATE_FORMAT(ph.time,'%Y%m%d%h%i');
+---------------------+------+---------------------+--------+---------------------+-------+
| time                | Ph   | time                | solids | time                | temp  |
+---------------------+------+---------------------+--------+---------------------+-------+
| 2013-03-29 21:34:04 | 7.39 | 2013-03-29 21:34:19 |    146 | 2013-03-29 21:34:05 | 26.56 |
| 2013-03-29 21:35:04 | 7.43 | 2013-03-29 21:35:19 |    146 | 2013-03-29 21:35:05 | 26.56 |
| 2013-03-29 21:36:04 | 7.43 | 2013-03-29 21:36:19 |    146 | 2013-03-29 21:36:05 | 26.56 |
+---------------------+------+---------------------+--------+---------------------+-------+

CREATE TABLE normalised AS
SELECT ph.time
     , ph.ph
     , tss.solids
     , t.temp 
  FROM ph 
  JOIN tss 
    ON DATE_FORMAT(tss.time,'%Y%m%d%h%i') = DATE_FORMAT(ph.time,'%Y%m%d%h%i') 
  JOIN temperature t 
    ON DATE_FORMAT(t.time,'%Y%m%d%h%i') = DATE_FORMAT(ph.time,'%Y%m%d%h%i');

SELECT * FROM normalised;
+---------------------+------+--------+-------+
| time                | ph   | solids | temp  |
+---------------------+------+--------+-------+
| 2013-03-29 21:34:04 | 7.39 |    146 | 26.56 |
| 2013-03-29 21:35:04 | 7.43 |    146 | 26.56 |
| 2013-03-29 21:36:04 | 7.43 |    146 | 26.56 |
+---------------------+------+--------+-------+

ALTER TABLE normalised ADD PRIMARY KEY(time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:56:51.333

好的，查询优化器似乎对我之前对大表的回答有一些问题。试试这个解决方案，它适用于依赖子查询：

```
SELECT DATE_FORMAT(timeTable.minuteTime, '%Y-%m-%d %k:%i') time,
T2.temp temp,
S2.solids solids,
P2.Ph Ph
FROM
(
    SELECT minuteTime.minuteTime minuteTime,
    ( SELECT MAX(time) FROM temperature WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 HOUR) tempTime, 
    ( SELECT MAX(time) FROM ph WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 HOUR) phTime,  
    ( SELECT MAX(time) FROM solids WHERE time <= minuteTime.minuteTime AND time >= NOW() - INTERVAL 1 HOUR) solidsTime
    FROM  
    (
        SELECT time + INTERVAL 59 - SECOND( time ) SECOND minuteTime
        FROM Ph
        WHERE time >= NOW() - INTERVAL 1 HOUR AND time <= NOW()
        UNION SELECT time + INTERVAL 59 - SECOND( time ) SECOND
        FROM solids
        WHERE time >= NOW() - INTERVAL 1 HOUR AND time <= NOW()
        UNION SELECT time + INTERVAL 59 - SECOND( time ) SECOND
        FROM temperature
        WHERE time >= NOW() - INTERVAL 1 HOUR AND time <= NOW()
        GROUP BY 1
    ) minuteTime
) timeTable
LEFT JOIN temperature T2 ON T2.time = timeTable.tempTime
LEFT JOIN solids S2 ON S2.time = timeTable.solidsTime
LEFT JOIN ph P2 ON P2.time = timeTable.phTime
ORDER BY minuteTime ASC 
```

我已经设置了三个表，每个表都有大约 800'000 行测试数据。在 MySQL 5.5.30 上，上面的查询运行大约 3.5 秒并返回 61 个结果行。但是您绝对必须在每个时间列上都有索引：

```
ALTER TABLE `ph` ADD INDEX ( `time` ) ;
ALTER TABLE `solids` ADD INDEX ( `time` ) ;
ALTER TABLE `temperature` ADD INDEX ( `time` ) ; 
```

否则，查询不会终止。我相信处理这么多数据的查询不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:30:01.430

我可能有一个无需创建临时表即可工作的解决方案：

```
SELECT DATE_FORMAT(timeTable.minuteTime, '%Y-%m-%d %k:%i') time,
T2.temp temp,
S2.solids solids,
P2.Ph Ph
FROM
(
SELECT MinuteTable.minuteTime minuteTime, 
MAX(T.time) tempTime, 
MAX(S.time) solidsTime, 
MAX(P.time) phTime
FROM  
(
SELECT time + INTERVAL 59 - SECOND( time ) SECOND minuteTime
FROM Ph
WHERE time >= NOW() - INTERVAL 1 HOUR
UNION SELECT time + INTERVAL 59 - SECOND( time ) SECOND
FROM solids
WHERE time >= NOW() - INTERVAL 1 HOUR
UNION SELECT time + INTERVAL 59 - SECOND( time ) SECOND
FROM temperature
WHERE time >= NOW() - INTERVAL 1 HOUR
GROUP BY 1
) MinuteTable
LEFT JOIN temperature T ON T.time <= MinuteTable.minuteTime
LEFT JOIN solids S ON S.time <= MinuteTable.minuteTime
LEFT JOIN ph P ON P.time <= MinuteTable.minuteTime
GROUP BY 1
) timeTable
LEFT JOIN temperature T2 ON T2.time = timeTable.tempTime
LEFT JOIN solids S2 ON S2.time = timeTable.solidsTime
LEFT JOIN ph P2 ON P2.time = timeTable.phTime
ORDER BY minuteTime ASC 
```

为了使这项工作有效地处理具有大量行的表，您肯定希望在三个输入表中的每一个的时间列上都有一个 UNIQUE INDEX。更好的是，如果除了生成 auto_increment ID 之外您真的不需要 ID 列，您甚至可以将时间列设为 PRIMARY KEY。

# c# - 在 c# 中从 URL 读取 xml 时引用未声明的实体“nbsp”？

> ID：15701745
> 
> 赞同：28
> 
> 时间：2013-03-29T10:46:51.070
> 
> 标签：c#, .net, xml

```
 XmlDocument xmldoc = new XmlDocument();
    xmldoc.XmlResolver = null;

    xmldoc.Load("URL");
    XmlWriter xmlWrite = XmlWriter.Create(@Server.MapPath("Test.xml"));
    xmldoc.Save(xmlWrite);
    xmlWrite.Close(); 
```

以上是我用来读取 XML 文件的代码。我正在加载的 XML 包含类似的实体`nbsp;`，因此，代码抛出了 XMLException：

> *引用未声明的实体“nbsp”*

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-29T11:10:12.370

有两种方法可以处理此问题，但对于这两种方法，您都需要对**输入文件进行更改。**

1）在您的输入文件中更改您`&nbsp;`的。`&#160;`使用 Unicode 并避免 XML 文档中的可读实体总是更好。使用纯 Unicode 字符或其数字形式。

2）如果您仍然需要/想要使用`&nbsp;` 您可以在文件中声明一个自定义文档类型，它将为您进行转换：

```
<!DOCTYPE doctypeName [
   <!ENTITY nbsp "&#160;">
]> 
```

出现此问题是因为`&nbsp;`它不是 XML 预定义实体之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-25T16:38:17.913

我今天遇到了同样的问题，我可以通过**将 HTML entity name 更改为 HTML entity number**来解决它。

根据[这个有用的论坛帖子](http://forums.asp.net/t/1219076.aspx/1)，我能够修复此错误。

HTML 实体名称在 XML 中没有得到很好的支持。这就是为什么“不间断空间”——“nbsp”——会触发这个令人沮丧的错误。

解决此问题的最简单方法是使用 HTML 实体编号，这意味着更改`&nbsp;`为`&#160;`.

有关带有名称和编号的 HTML 实体的完整列表，请参阅：

[W3 School 的 HTML 实体参考页面](http://www.w3schools.com/html/html_entities.asp)。

[关于实体集的官方 W3C 页面](http://www.w3.org/TR/xhtml1/dtds.html#h-A2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T18:28:41.557

迟到了，但是如果您不想记住是什么意思，也可以`&nbsp`替换为。`&amp;nbsp;``&#160;`

# ruby-on-rails-3 - Rails 中 Active Record 查询中的查找器方法序列

> ID：15701749
> 
> 赞同：0
> 
> 时间：2013-03-29T10:47:07.610
> 
> 标签：ruby-on-rails-3, activerecord

我正在编写一个复杂的活动记录查询来从多个表中获取数据，该查询有连接、选择、顺序、组、选择位置。

```
 @posts = Post.published.paginate(:order => 'popularity desc, id',
                                          :joins => [:comments, :images, :updates, :user],
                                          :conditions => conditions,
                                          :group => "posts.id",
                                          :select => "posts.id*,
                                          :per_page => 10, 
                                          :page => params[:page]) 
```

我想知道 where ， joins 等按照标准的顺序应该是什么，并最大限度地提高查询的性能。如果有人可以写一个查询来解释这个序列，那就太好了

```
@posts = Post.published.joins(:comments, :images, :updates, :user).where(.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:03:10.703

据我所知，顺序无关紧要。

一个例子是：

```
@posts = Post.published.select('posts.id').
  joins(:comments, :images, :updates, :user).
  where('users.email = ?', 'john@doe.com').
  group('posts.id') 
```

# c++ - 使用模板和新分配时性能不佳

> ID：15701754
> 
> 赞同：2
> 
> 时间：2013-03-29T10:47:33.983
> 
> 标签：c++, templates, new-operator, allocation

`new`在模板类的构造函数中使用关键字分配内存时，有一些非常奇怪的行为：

与未模板化的代码相比，该程序的执行速度非常慢。

为了证明这一点，我做了一个最小的错误复制示例程序：

```
using namespace std;

template<class tempT>
struct templatedClass{

    double* y;

    templatedClass() {
        y=new double[(int)1E6];
    }

    ~templatedClass() {
        delete y;
    }
};

class dummy {};

struct nontemplatedClass{

    double* y;

    nontemplatedClass() {
        y=new double[(int)1E6];
    }

    ~nontemplatedClass() {
        delete y;
    }
};

int main() {
    for(int c=0;c<4000;c++) {
        templatedClass<dummy>* A=new templatedClass<dummy>();
        //nontemplatedClass* A=new nontemplatedClass();
        delete A;
    }
    return(0);
} 
```

使用 g++ 编译它。我的编译器版本是 g++ (Debian 4.7.2-4) 4.7.2

据我了解，模板不应该对程序执行的性能产生任何重大影响，即在运行时模板类的代码甚至不应该与不使用模板的专用类不同。

另外值得注意的是，当使用`malloc`而不是`new`没有性能差异时，一切都运行良好。

所以毕竟这对我来说似乎是 g++ 中的一个错误。

ps 我在使用 valgrind 时在更复杂的代码中发现了这种行为。为 valgrind 欢呼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:13:47.670

如前所述`Zeta`，一个可能的问题是您正在使用`new`then `delete`。这意味着，您可能存在内存泄漏。

您会发现（合法的）建议`delete`用于分配的内存`new`和`delete[]`分配的内存`new[]`......但问题的真相是您不应该调用`delete`or`delete[]`自己，而是依靠智能指针或容器来处理内存释放。

在您的情况下，您应该使用`std::vector<double>`而不是`double*`例如。

然后，正如 Andy 所说，基准优化构建；否则毫无意义。

# algorithm - 斐波那契算法的递归方程

> ID：15701757
> 
> 赞同：3
> 
> 时间：2013-03-29T10:48:01.110
> 
> 标签：algorithm, equation, recurrence

我想找到递归方程来计算时间复杂度

```
 int Fib(int n)
{
    if (n <= 1)
        return n;
    else
        return Fib(n - 1) + Fib(n - 2);
} 
```

我可以求解递推方程，但我很难找到方程和基本情况。

**这是正确的方程式吗？**

T(n)=T(n-1)+T(n-2)+1

**对于基本情况？**

T(0)=0

T(1)=0

**通常如何找到算法的基本情况？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:42:18.770

对于复杂性，此示例中的基本情况通常无关紧要。就我个人而言，我可能会设置`T(0) = 1`, `T(1) = 1`, 基础上什么都不需要零时间。但只要看看你的递归关系。它本身就是一个斐波那契风格的序列，无论基本情况如何，它都将是指数的（几乎）。

基本情况的一般问题是您想要一个具体的答案（“计算需要多长时间`Fib(0)`？”），但复杂性计算中的实际“时间单位”通常定义不明确。准确地说，您应该定义 T(0) 等于一个*constant* `k_1`，并且 T(1) 等于一个*constant* `k_2`，然后从那里开始工作。如果您需要常量的数值来解决递归关系，那么可能出现了问题。

同样，您可以将循环关系设置为`T(n) = T(n-1) + T(n-2) + k_3`。

请注意，如果您的复杂性计算的“时间单位”是“加法执行次数”，忽略其他逻辑，那么您的基本情况在`0`. 如果（例如）添加是由性能超出分析范围的用户提供的函数完成的，这将是一种分析时间的有用方法。

# c# - 使用 ASP.Net 根据表中的内容将 Div 动态添加到我的网页

> ID：15701764
> 
> 赞同：1
> 
> 时间：2013-03-29T10:48:43.773
> 
> 标签：c#, asp.net

我想在我的网页上显示表格中的每条记录，如果表格中的记录增加，div 的数量也应该增加。
我如何使用 ASP.net 实现这一目标。
如果有人可以指导我，因为我是 ASP.Net 的新手，
请提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:54:48.557

如前所述，使用 MVC 将是一个不错的方法，但您必须学习一点才能使用它。根据当前场景，您可以使用专为您想要完成的任务而设计的中继器。

假设您的数据库看起来与此类似..

```
id int  primary key 
name  nvarchar(50) 
```

等等... //假设你现在在你的asp.net页面中有你的数据库数据，`"dataFromDatabase"` 只需定义一个这样的转发器

```
<div id="content">
   <asp:repeater id="repeaterData" runat="server">
   <HeaderTemplate>
     <Table>
        <tr>
           <th>Id:</th>
           <th>Name : </th>
        </tr>
   </HeaderTemplate>
     <ItemTemplate>
       <td><%#Eval("id")%></td>
       <td><%#Eval("name")%></td>
     </ItemTemplate>
   <FooterTemplate>
     </Table>
   </FooterTemplate>
</repeater>
</div> 
```

并在您的 .aspx.cs 页面中

将转发器与您的数据源绑定

```
repeaterData.DataSource = dataFromDatabase
repeaterData.DataBind(); 
```

这就是你需要做的所有事情来让它运行起来......

并且使用`GridView`会更简单，您只需将其拖到`ToolBox`您的 aspx 文件中并在视觉上选择您的数据源，violla 就完成了......不需要编码......虽然您必须为编辑，删除和一些花哨的东西......

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:51:49.400

听起来您正在寻找实现[中继器类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater)。

**编辑** 这里是您从上述链接中请求的一些示例代码：

```
<asp:Repeater
    DataMember="string"
    DataSource="string"
    DataSourceID="string"
    EnableTheming="True|False"
    EnableViewState="True|False"
    ID="string"
    OnDataBinding="DataBinding event handler"
    OnDisposed="Disposed event handler"
    OnInit="Init event handler"
    OnItemCommand="ItemCommand event handler"
    OnItemCreated="ItemCreated event handler"
    OnItemDataBound="ItemDataBound event handler"
    OnLoad="Load event handler"
    OnPreRender="PreRender event handler"
    OnUnload="Unload event handler"
    runat="server"
    Visible="True|False"
>
        <AlternatingItemTemplate>
            <!-- child controls -->
        </AlternatingItemTemplate>
        <FooterTemplate>
            <!-- child controls -->
        </FooterTemplate>
        <HeaderTemplate>
            <!-- child controls -->
        </HeaderTemplate>
        <ItemTemplate>
            <!-- child controls -->
        </ItemTemplate>
        <SeparatorTemplate>
            <!-- child controls -->
        </SeparatorTemplate>
</asp:Repeater> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:59:11.940

您可以使用`gridview`或`repeater`解决您的。

Gridview 基本示例
[http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0](http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0)

中继器基本示例
[http://www.w3schools.com/aspnet/aspnet_repeater.asp](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:59:44.380

如果您对 ASP.NET 完全陌生，我建议您使用 ASP.NET MVC 框架而不是 WebForms。归根结底，这是一个品味问题，但 MVC 框架的设计目标是让编写高质量代码变得容易，所以如果你还是从头开始，你不妨从一开始就学会把它做好。

最好的起点可能是[ASP.NET MVC 的官方站点](http://www.asp.net/mvc)。他们有一个很好的“入门”指南，以及从绝对初学者到高级 Web 开发级别的[大量教程。](http://www.asp.net/mvc/tutorials/mvc-4)

*对所有 WebForms 粉丝的附注：我绝对不是说你不能用 WebForms 编写高质量的代码 - 但是，如果你环顾互联网，你会发现大多数示例结构都很糟糕并且充满了反模式。从 ASP.NET MVC 框架开始，您发现 Web 资源展示良好实践的机会更高，而不是快速破解。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T12:09:19.783

或者：

```
 for(int i= 0;i<10i++){
            label.text="<div>"+something+"</div>"+label.text
        } 
```

# android - Android 拇指不在搜索栏居中？

> ID：15701767
> 
> 赞同：2
> 
> 时间：2013-03-29T10:48:57.387
> 
> 标签：android, slider, seekbar

我已经搜索了几个小时的任何解决方案，但找不到一个。所以这是我的问题，正如我所见，这是一个非常普遍的问题：

![在此处输入图像描述](../Images/7c387c3fd2e53d3cc923c6582d8bd979.png)

搜索栏中的拇指，没有居中...我已经通过 9patch 制作了这个自定义搜索栏。据说我应该在 stackoverflow 的许多响应中将其 minHeight 和 maxHeight 设置为相同的大小。但是即使我设置了它们，它仍然会像这样显示......这真的很令人不安，有什么办法可以解决这个问题吗？

这是xml：

```
<SeekBar
     android:id="@+id/seek"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_centerVertical="true"
     android:layout_marginLeft="@dimen/padding_small"
     android:max="100"
     android:progress="60"
     android:maxHeight="@dimen/playerSeekBarHeight"
     android:minHeight="@dimen/playerSeekBarHeight"
     android:progressDrawable="@drawable/progress_bar_player"
     android:thumb="@drawable/player_sound_thumb"
     android:paddingLeft="6dp"
     android:paddingRight="6dp" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:39:32.830

找不到解决方法，仍然不知道是什么问题。为什么将 minHeight 和 maxHeight 设置为每个人的相同尺寸，但在我的情况下却没有？无论如何，所以我将一些空像素放入拇指图像中并且它可以工作。

但我将不胜感激任何更有效的方式来处理这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T05:38:27.630

是的，最小高度最大高度也对我不起作用。我的问题是当我决定为高分辨率屏幕创建布局时。当我使屏幕中的每一行都变大时，我虽然可以“match_parent”高度，但一切都会好起来的。但不，我有上面的问题。

我通过返回“wrap_content”的高度解决了这个问题，删除了 minHeight 和 maxHeight 标签，然后使用 layout_marginTop 将其向下移动到水平线性布局的中心。

我使用的是默认搜索栏。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:11:28.597

试试这个 seekbar_progress_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <clip >
        <bitmap
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:antialias="true"
            android:dither="false"
            android:filter="false"
            android:gravity="left"
            android:src="@drawable/progress_bar_player">
         </bitmap>
    </clip>
</item> 
```

seekbar_progress.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:id="@android:id/background">
     <nine-patch
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:dither="true"
        android:src="@drawable/whitepatch">
      </nine-patch>
</item>
<item android:id="@android:id/secondaryProgress">
       <clip >
           <shape >
              <gradient
                android:angle="270"
                android:centerColor="#80127fb1"
                android:centerY="0.75"
                android:endColor="#a004638f"
                android:startColor="#80028ac8">
               </gradient>
          </shape>
       </clip>
 </item>
 <item
         android:id="@android:id/progress"
         android:drawable="@drawable/seekbar_progress_bg">
 </item> 
```

xml

```
<SeekBar
                            android:id="@+id/seekbar_bar"
                            style="?android:attr/progressBarStyleHorizontal"
                            android:layout_width="420dip"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="0dip"
                            android:layout_marginTop="12dip"
                            android:maxHeight="9dp"
                            android:minHeight="9dp"
                            android:progressDrawable="@drawable/seekbar_progress"
                            android:thumb="@drawable/player_sound_thumb" /> 
```

从此链接[自定义搜索栏](http://developer-dot-android.blogspot.in/2012/03/custom-seekbar-tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T08:39:15.110

在我的情况下，设置最小高度和最大高度也不起作用。

我通过使用 minHeight 和 maxHeight 值来做到这一点。将 minHeight 设置为比 maxHeight 大近 2 倍或更多对我来说是诀窍。尝试为两者设置不同的值。应该锻炼...

# linq - LINQ - 从选择中计数，没有分组依据

> ID：15701776
> 
> 赞同：0
> 
> 时间：2013-03-29T10:49:22.293
> 
> 标签：linq

Linq 对我来说是全新的，所以如果这真的很愚蠢，我很抱歉。

我正在尝试从带有 where 子句的多表连接中获取计数，而不使用 group by。我已经看到了 group by 的示例，如果需要，我会使用它，但我想知道是否有办法避免它。是 sql 我的查询看起来像这样吗？

```
 SELECT Count(*)
FROM   plans p
       JOIN organizations o
         ON p.org_id = o.org_id
            AND o.deleted IS NULL
       JOIN orgdata od
         ON od.org_id = o.org_id
            AND od.active = 1
       JOIN orgsys os
         ON os.sys_id = od.sys_id
            AND os.deleted IS NULL
WHERE  p.deleted IS NULL
       AND os.name NOT IN ( 'xxxx', 'yyyy', 'zzzz' ) 
```

得到这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:54:03.190

你只需要打电话`Count()`。你*只*计算结果的数量。所以像：

```
var names = new[] { "xxxx", "yyyy", "zzzz" };
var query = from plan in db.Plans
            where plan.Deleted == null
            join organization in db.Organizations
              on plan.OrganizationId equals organization.OrganizationId
            where organization.Deleted == null
            join orgData in db.OrganizationData
              on organization.OrganizationId equals orgData.OrganizationId
            where orgData.Active == 1
            join os on db.OrganizationSystems
              on orgData.SystemId equals os.SystemId
            where os.Deleted == null &&
                  !names.Contains(os.Name)
            select 1; // It doesn't matter what you select here
 var count = query.Count(); 
```

# javascript - 无法捕获图像加载错误/异常

> ID：15701780
> 
> 赞同：2
> 
> 时间：2013-03-29T10:49:54.850
> 
> 标签：javascript

我想在加载图像时发现错误。不幸的是，我无法捕捉到它们，我在控制台中遇到这样的错误。

```
Failed to load resource file:///C:/Users/Ankur/Dropbox/Public/InteractiveGuide/Images/copyright_symbol.jpg 
```

我同时使用了 try catch 块和 .onerror()。这是代码。

```
function preloadImages(arr)
{
    var newimages=[], loadedImages=0, dir="./Images/";
    var arr = (typeof arr!="object")?[arr]:arr;
    for(var i=0; i<arr.length; i++)
    {
        try
        {
            newimages[i]=new Image();
            newimages[i].src = dir+arr[i];
            newimages[i].onload = function()
            {
                loadedImages++;
                if(loadedImages==arr.length)
                {
                    iniScene();
                }
            }
            newimages.onerror = function()
            {
                console.log("Error loading image: "+arr[i]);
            }
        }
        catch(ex)
        {
            console.log("Image Loading Error: "+ex);
        }
    }
} 
```

如何正确捕获错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:50:45.443

问题是您附加`onerror`在*阵列*上而不是单个图像对象上。

你应该这样做：

```
newimages[i].onerror = function() {
    ...
} 
```

# python - 使用通过python中的串行端口连接到笔记本电脑的GSM调制解调器接收的正则表达式解析字符串

> ID：15701782
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:03.183
> 
> 标签：python, regex, string, parsing, gsm

这是我用来轮询通过串行端口连接到我的笔记本电脑的 GSM 调制解调器收到的新消息的功能。我创建了一个串行对象“电话”，用于读取和写入数据。

'phone' 将数据读入列表 x。

当我收到一条新消息时，我得到的响应格式如下：

```
+CMTI: "SM",0 
```

这里0是索引，表示消息在SIM卡上存储的索引位置。以下代码用于轮询列表 x，其中包含我正在从串行端口读取和写入的数据。我正在使用正则表达式来解析已转换为字符串 myRegexableString 的 x 以查看我是否收到通知。

```
def poll(x):
    myRegexableString = "".join(x)
    print "Printing myRegexableString"
    pprint(myRegexableString)
    regex = re.compile(r'\+CMTI: "SM",(\d+)')
    lst = []
    for l in myRegexableString:
        for m in [regex.search(l)]:
            if myRegexableString:
                lst.append(m)
                print "You have received a new message!" 
```

我想将上述代码用于检查网络注册的 AT 命令。在执行其他命令或任何命令时，我也需要轮询新消息，但为了这个问题，我将举网络注册的例子。以下是它在不使用轮询功能的情况下正常运行的方式。

```
AT+CREG? #command

+CREG: 0,1 #response

OK #status 
```

现在这是代码。

```
def register():
   print "Checking for network registration"
   phone.write(b'AT+CREG?\r')
   sleep()
   x=phone.read(50)
   sleep()
   print x 
```

现在假设我在这里包括轮询代码将更改为

```
def register():
       print "Checking for network registeration"
       phone.write(b'AT+CREG?\r')
       sleep()
       x=phone.read(50)
       poll(x)
       sleep()
       print x 
```

我从更改后的代码中得到的输出是

```
Checking for network registeration
Printing myRegexableString
'AT+CREG?\r\r\n+CREG: 0,1\r\n\r\nOK\r\n'
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
You have received a new message!
AT+CREG?

+CREG: 0,1

OK 
```

为什么会打印“您收到一条新消息！” 很多次？

特别是当我没有收到新消息时！

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:21:10.540

您需要做的就是使用`regex.findall(myRegexableString)`. 这将返回匹配*组*的列表，即数字。

```
regex = re.compile(r'\+CMTI: "SM",(\d+)')

def poll(x):
    myRegexableString = "".join(x)
    print "Printing myRegexableString"
    pprint(myRegexableString)
    lst = regex.findall(myRegexableString) 
```

I've moved the `re.compile()` call out of the function, there is no need to re-compile the expression every time.

You are looping over each and every *character* of `myRegexableString`, then you loop over a list with *one* match, then you test if `myRegexableString` is True-ish (which it is if it is not empty). This means that for *every* character in the input you add an empty match (the expression will never match anything in a single character string).

# c++ - Direct3D 导入库的用途是什么？

> ID：15701783
> 
> 赞同：2
> 
> 时间：2013-03-29T10:50:05.123
> 
> 标签：c++, winapi, dll, com, directx

据我了解，这些库通常与显式运行时链接（LoadLibrary）链接，但仍有一些导入库包含库的一小部分的描述符。这是什么原因？

在此先感谢和问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:10:23.203

“导入库”就是：包含要在 DLL 中调用的真实函数地址的小存根。这是一篇很棒的文章，解释[了为什么需要导入库](http://blogs.msdn.com/b/oldnewthing/archive/2009/10/13/9906359.aspx) 您可能还想[在同一个（很棒的）博客上阅读有关链接在 Windows 世界中的工作原理](http://blogs.msdn.com/b/oldnewthing/archive/2009/10/12/9905953.aspx)

如果您对故事的另一端（执行时间）感到好奇，有一些关于 Windows 如何加载所需 DLL 的精彩文章，[例如在 MSDN](http://msdn.microsoft.com/en-us/magazine/cc301727.aspx)和[此处](http://msdn.microsoft.com/en-us/magazine/bb985992.aspx)和[此处](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)，这有助于了解您的程序为何/如何执行不调用 LoadLibrary（直接）

> 当您使用来自另一个 DLL 的代码或数据时，您正在导入它。当任何 PE 文件加载时，Windows 加载器的工作之一是定位所有导入的函数和数据，并使这些地址可用于正在加载的文件。

它是加载程序，根据链接器在 IAT 中编写的内容，为您加载 DLL（
在 NT Insider 上有一篇更有趣的文章，但我在网上找不到）。

它们在那里“使链接器快乐”，提供仅在 DLL 中不存在的信息。

# c++ - C ++搜索单词字符串

> ID：15701784
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:08.013
> 
> 标签：c++, search, for-loop, words

我想创建一个程序，它将通过句子，如果它找到一个字符或一个单词，它将显示它。

想象一个程序在找到第一个字符/单词后立即停止。

```
 string test("This is sentense i would like to find ! "); //his is sentense to be searched
   string look; // word/char that i want to search

   cin >> look;

   for (i = 0; i < test.size(); i++) //i<string size
    {
       unsigned searcher = test.find((look));
       if (searcher != string::npos) {
           cout << "found at : " << searcher;
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:53:22.567

您不需要循环。做就是了：

```
std::cin >> look;
std::string::size_type pos = test.find(look);
while (pos != std::string::npos)
{
    // Found!
    std::cout << "found at : " << pos << std::endl;
    pos = test.find(look, pos + 1);
} 
```

这是一个显示输入字符串结果的[实时示例](http://liveworkspace.org/code/48Ihhx%2461)`"is"`。

# .htaccess - url重写中的可选参数

> ID：15701786
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:13.670
> 
> 标签：.htaccess, url-rewriting

我正在使用 apache 和 .htacess 重写我的网址。

我想在我的 ad.php 页面中有一个可选参数“mess”。我写 ：

```
RewriteRule    ^ad-([A-Za-z0-9-]+)/?$    ad.php?id=$1    [NC,L]
RewriteRule    ^ad-([A-Za-z0-9-]+)-([A-Za-z0-9-]+)/?$    ad.php?id=$1&mess=$2    [NC,L] 
```

但似乎只考虑了第一条规则。ad-100 和 ad-100-1 应该给出不同的东西，但他们没有。当我删除第一条规则时，ad-100 不再起作用（显然）并且 ad-100-1 现在正在起作用，因为它采用了第二条规则。

你知道我怎么能有可选参数吗？我应该将这两条规则合二为一吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:54:25.397

这应该有效：

```
RewriteCond %{REQUEST_URI}             !ad\.php              [NC]
RewriteRule    ^ad-([^-]+)/?$           ad.php?id=$1         [NC,L]
RewriteCond %{REQUEST_URI}             !ad\.php              [NC]
RewriteRule    ^ad-([^-]+)-([^/]+)/?    ad.php?id=$1&mess=$2 [NC,L] 
```

`mess`或者，如果在只有一个参数时将值设为空没有问题，您可以对两个参数使用一个规则。像这样：

```
RewriteCond %{REQUEST_URI}             !ad\.php              [NC]
RewriteRule    ^ad-([^-]+)-?([^/]+)?/? ad.php?id=$1&mess=$2  [NC,L] 
```

# knockout.js - KnockoutJS - 渲染嵌套 observableArray UI 后 UI 未触发 onchange 事件

> ID：15701787
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:24.327
> 
> 标签：knockout.js

我目前可以正常运行，其中下拉列表选择更改将显示一些文本，同时隐藏另一段文本。

**更改下拉列表的值时触发的 javascript：**

```
window.DropdownValueChange = function(event) {
var jqueryValue = $(event);
jqueryValue.closest('td').find('p').hide();

var className = '.' + event.options[event.selectedIndex].value + '-class';
jqueryValue.closest('td').find(className).show();
} 
```

**HTML 对象已更改：**

```
<p class="male-class">I am a male</p>
<p class="female-class">I am a female</p> 
```

但是，最初呈现 HTML 时并非如此。为什么在加载 UI 时 onchange 函数没有正确触发？

[http://jsfiddle.net/djcanseco/duL72/49/](http://jsfiddle.net/djcanseco/duL72/49/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:39:52.353

您`onchange`没有在页面加载时触发。这可以通过向`<p>`标签添加可视数据绑定来解决：

```
 <p class="male-class" data-bind="visible: gender == 'male'">
    I am a male
 </p>
 <p class="female-class" data-bind="visible: gender == 'female'">
    I am a female
 </p> 
```

更新[的小提琴](http://jsfiddle.net/duL72/51/)

# jquery - 使用 jQuery/TinySort 循环通过最高 -> 最低 -> 原始顺序

> ID：15701788
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:27.423
> 
> 标签：jquery, sorting, toggle

下面是一个简单的排序，从低到高排序。

```
$('button').click(function() {
    $('li').tsort();
}); 
```

我需要一种在再次按下按钮时从高到低再到原始顺序的方法。

想想维基百科上的表格标题列。

我最初的计划是为点击次数存储一个变量。有没有更优雅的方法使用 jQuery？

我无法理解 TinySort 如何记住原始订单，但查看文档（[http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)）似乎有一个自定义函数可以返回原始订单。谁能给我一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:20:03.400

如果您的意思是“原始”参数，那么您误解了。如果选择是子选择，那是一个布尔值并且排序到位。（所以这只有在你对 20 个项目的列表中的 10 个项目进行排序时才有效，将未排序的项目留在原来的位置）。

您要做的是首先创建一个 jQuery 对象来存储订单。然后排序，但使用一个新的 jQuery 对象。然后用第一个替换内容。

```
var $Parent = $('ul')
    ,$Original = $Parent.find('li')
    ,isSorted = false
    ,$Button = $('button').click(function() {
        if (isSorted) {
            $Original.appendTo($Parent);
            isSorted = false;
        } else {
            $Parent.find('li').tsort();
            isSorted = true;
        }
    }); 
```

我还没有测试过代码，但我就是这样做的。（哦..这仅适用于单个无序列表）

克

罗恩

# database - 如果集合包含集合，则休眠条件

> ID：15701789
> 
> 赞同：1
> 
> 时间：2013-03-29T10:50:30.530
> 
> 标签：database, hibernate, hibernate-criteria, restriction

我有一个私人课程

```
@Entity
@Table(name = "PK_PRIVS", schema = "dbo")
public class Priv implements java.io.Serializable{

private static final long serialVersionUID = 1L;
private String code;
private String name;
private String description;
private PrivType type;
//...
} 
```

和一个与 Priv 有多对多关系的 Report 类，并包含一组关联的 Privs - privs。

```
@Entity
@Table(name = "REPORT", schema = "dbo")
public class Report implements java.io.Serializable {

//...

private Set<Priv> privs = new HashSet<Priv>(0);

//...

@JsonIgnore
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "REPORT_PK_PRIVS", schema = "dbo", joinColumns = { @JoinColumn(name = "REPORT_ID") }, inverseJoinColumns = { @JoinColumn(name = "PK_PRIVS_CODE") })
public Set<Priv> getPrivs() {
    return this.privs;
}

public void setPrivs(Set<Priv> privs) {
    this.privs = privs;
}

} 
```

现在我有一组字符串，它们是 Priv 类的代码（代码是 Priv 中的主键）。

```
Set<String> privsCodesSet; //set of codes of Priv classes 
```

我需要一个标准，它允许我找到报告，它的 Priv 集中的所有代码都包含在 privsCodesSet 中。例如，如果我有 privsCodeSet = {"code1", "code2"}

带有代码 {"code1"" 的 privs 报告应该在结果中，但带有代码 {"code1", "code2", "code3"} 的 privs 报告不应该。

我也有加入 Priv 和 Report 的课程，但我不确定它是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:58:38.837

这段代码应该可以工作

```
 Criteria reportPrivCriteria = currentSession()
        .createCriteria( Report.class, "r");
    reportPrivCriteria.createAlias("privs", "p");
    reportPrivCriteria.add(Restrictions.in(p.code, privsCodeSet)); 
```

你的 Priv 课上有类似的东西吗？

```
 private Set<Report> reports;

    // ...

    @ManyToMany(mappedBy="privs")
    public Collection<Report> getReports() {
         return reports;
    } 
```

# bugzilla - Bugzilla：错误没有出现（出现在数据库中，一切似乎都很好）

> ID：15701792
> 
> 赞同：0
> 
> 时间：2013-03-29T10:50:40.780
> 
> 标签：bugzilla

我刚刚在本地安装了Bugzilla，似乎一切都很好。我可以创造新的产品和组件。我还可以提交新的错误，它们会显示在数据库中。但是当我想在 Web 界面中查看它们时，它们不会出现。相反，在页面顶部会显示：

```
Product: ARRAY(0x3735378    Component: ARRAY(0x4275650)    Resolution: ARRAY(0x42755a8) 
```

然后在“Zarro Boogs 发现”下方。

网上没找到相关信息，请问大家有类似的问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T03:11:49.653

“找到了扎罗布格斯。” 正在显示，因为在查询中输入的值不正确以显示错误列表。

从显示中可以明显看出，产品：ARRAY(0x3735378 组件：ARRAY(0x4275650) 分辨率：ARRAY(0x42755a8)

这是因为循环问题。检查模板文件或buglist文件中的显示代码并修正循环，即可正常播放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T03:17:47.657

珍妮佛，

是的，这是因为查询中的零值。我们可以通过打印查询并检查 DB 中的值来检查它。

将命名查询（“保存的搜索”）插入数据库，或更新已存在的命名查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T03:00:17.393

请检查 techzilla 数据库中的错误表并验证错误详细信息是否正在更新。与错误列表对应的 cgi 文件是 buglist.cgi。模板文件为：-global/message.html.tmpl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T14:48:53.983

我们有类似的问题。搜索结果列表中未显示错误。当产品名称带有变音符号（例如捷克语、斯洛伐克语等）时，问题**出在产品名称中。**当产品名称为美国 ASCII 时，一切正常。

# c# - 上传多个文件 aspx.net C#

> ID：15701793
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:50:44.610
> 
> 标签：c#, asp.net, file-upload, image-uploading, multifile-uploader

我有以下 HTML 源代码：

```
 <form name="AddTrack" id="add_track_form" action="AddTrack.aspx" method="post" runat="server">

       <input type="file" name="file1"/><br />
            <input type="file" style="margin-right: 52px;" name="file2" /><br />
            <input type="file" style="margin-right: 52px;" name="file3" /><br />
            <input type="file" style="margin-right: 52px;" name="file4" /><br />
        <button type="submit" class="blue-button">הוסף מסלול</button>
    </form> 
```

使用此 ASPX - C# 代码：

```
if (Request.ContentLength != 0)
{
    int Size = Request.Files[0].ContentLength / 1024;
    if (Size <= 512)
    {

        string LocalFile = Request.Files[0].FileName;
        int LastIndex = LocalFile.LastIndexOf(@"\") + 1;
        string File = LocalFile.Substring(LastIndex, LocalFile.Length - LastIndex);
        string Path = Server.MapPath(" ../images/tracks") + "..\\" + File;
        Request.Files[0].SaveAs(Path);
        Response.Write(@"The file was saved: " + Path);
    }
    else
    {
        Response.Write("The file is too big !");
    }
}
else
{
    Response.Write("Unknown Error !");
} 
```

如果我上传一个文件，效果很好，但我上传的上传输入不止一个，它不起作用。

我的问题是为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:09:03.320

据我所知，您只需要添加`enctype="multipart/form-data"`到您的表单中：

```
 <form name="AddTrack" id="add_track_form" action="AddTrack.aspx" method="post" runat="server" enctype="multipart/form-data"> 
```

[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

> 内容类型“application/x-www-form-urlencoded”对于发送大量二进制数据或包含非 ASCII 字符的文本效率低下。**内容类型“multipart/form-data”应用于提交包含文件、非 ASCII 数据和二进制数据的表单。**

您没有使用`asp:FileUpload`自动添加该 enctype 的控件，因此您应该手动执行此操作。

```
for(int i = 0; i < Request.Files.Count; i++) {

    int Size = Request.Files[i].ContentLength / 1024;
    if (Size <= 512)
    {
       string LocalFile = Request.Files[i].FileName;
    //.....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:57:12.833

我建议你使用它`uploadify library`，它是免费的

因为基本上传文件 asp.net 不提供多次下载的可能性

链接：[http ://www.uploadify.com/download/](http://www.uploadify.com/download/)

# java - 1l for long，1f for float，1d for double，字节呢？

> ID：15701795
> 
> 赞同：6
> 
> 时间：2013-03-29T10:50:45.750
> 
> 标签：java, casting, initialization, byte

1l for long，1f for float，1d for double，字节呢？

```
long l = 1l;
float f = 1f;
double d = 1d;
// byte b = 1?; 
```

等价于`byte`什么？它存在吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T10:52:08.073

不，没有后缀可以附加到数字文字以使其成为`byte`.

请参阅Java 语言规范中的[3.10 文字。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T10:52:15.633

您需要像这样转换为字节：

```
byte b = 1;

b = (byte) 5; 
```

因为默认情况下，这些数字常量在 Java 中被视为 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:53:14.310

没有后缀可以附加数字文字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T10:53:49.967

字节没有这样的后缀，请参阅[Java 语言规范第 3.10.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)：

```
DecimalIntegerLiteral:
    DecimalNumeral IntegerTypeSuffix(opt)

IntegerTypeSuffix: one of
    l L 
```

注意`(opt)`表示它是可选的。因此，要分配您需要使用`(byte) 1`.

# c++ - poco c++ 静态链接问题与未定义的符号引用

> ID：15701796
> 
> 赞同：6
> 
> 时间：2013-03-29T10:50:51.923
> 
> 标签：c++, static-linking, poco-libraries

我正在尝试像这样链接到 POCO C++ 库的静态版本：

```
g++ BCCMain.o -L$_POCO_LIBS -Wl,-Bstatic $_POCO_LIBS/libPocoFoundation.a $_POCO_LIBS/libPocoUtil.a $_POCO_LIBS/libPocoXML.a $_POCO_LIBS/libPocoJSON.a -Wl,-Bdynamic -o BCMain 
```

不幸的是，这会导致一些未定义的符号引用错误，例如：

```
Poco::Logger::get(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) 
```

即使`Poco::Logger::get(std::string const&)`实际上是在`libPocoFoundation.a`.

现在，如果我尝试链接到基础库的共享版本，它可以工作：

```
g++ BCCMain.o -L$_POCO_LIBS -Wl,-Bstatic $_POCO_LIBS/libPocoFoundation.a $_POCO_LIBS/libPocoUtil.a $_POCO_LIBS/libPocoXML.a $_POCO_LIBS/libPocoJSON.a -Wl,-Bdynamic -lPocoFoundation -o BCMain 
```

库的静态和共享版本具有相同的符号，所以我发现很难弄清楚我做错了什么。

Ubuntu/利纳罗。g++ 4.6.3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-15T09:31:04.653

我的经验是，静态链接时，链接 Poco 库的顺序很重要。似乎重要的基础是最后一个。

对我有用的顺序是：

1.  实用程序
2.  网
3.  XML
4.  基础

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T20:02:02.197

我设法通过分离编译和链接来解决这个问题。这是我的样子：

**编译：** `g++ -c -std=c++0x -ggdb -I/home/bbogart/src/of_v0071_linux64_release/libs/poco/include` pkg-config opencv --cflags`*.cpp`

**链接：** `g++ *.o -L/home/bbogart/src/of_v0071_linux64_release/libs/poco/lib/linux64/ -lPocoNet -lPocoUtil -lPocoFoundation -lopencv_gpu` pkg-config opencv --libs`-o cameraGrabber`

请注意，您从 lib 名称中省略了“lib”和“.a”。

# java - 获取 java.lang.IncompatibleClassChangeError: in gwt

> ID：15701798
> 
> 赞同：3
> 
> 时间：2013-03-29T10:51:05.033
> 
> 标签：java, gwt

由于，我得到空字符串 `invoiceItem.getDescription()`，但是当我在 gwt 小部件中使用下面的代码时，我得到了
`java.lang.IncompatibleClassChangeError:`Found 接口`com.google.gwt.user.client.Element`，但是应该有类

```
descTextArea.getElement().setAttribute("value", invoiceItem.getDescription()); 
```

任何建议都会很棒。

在此先感谢 MSNaidu

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T11:05:07.807

可能是这个怪癖： [https ://code.google.com/p/google-web-toolkit/issues/detail?id=5252](https://code.google.com/p/google-web-toolkit/issues/detail?id=5252)

“...... AFAICT，它发生在我运行开发模式并对 Eclipse 无法热交换到 JVM 的代码进行更改时发生。刷新应用程序以重新加载开发模式修复它。
这很烦人，但众所周知 JVM 不会热插拔完美……”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:52:21.520

正如@ArtemGr 所说，它发生在热代码替换时（*尤其是代码中的元素*）。

`"value"`您可以简单地做，而不是获取元素和设置 DOM 属性，

```
TextArea area = new TextArea();
area.setValue(invoiceItem.getDescription()); 
```

# c# - VS2012 C# WPF MessageBox 快速打字方法错误

> ID：15701800
> 
> 赞同：2
> 
> 时间：2013-03-29T10:51:15.713
> 
> 标签：c#, visual-studio-2012, messagebox

我正在使用 WPF 在 Visual Studio 2012 C# 中编写一个程序，我喜欢使用 MessageBoxes 进行一些快速调试，并且通常会键入

*mb [标签] [标签]*

要出现以下消息框代码

```
global::System.Windows.Forms.MessageBox.Show("Test"); 
```

但是，我收到错误消息

*命名空间“System.Windows”中不存在类型或命名空间名称“Forms”（您是否缺少程序集引用？）*

编码

```
global::System.Windows.MessageBox.Show("Test"); 
```

虽然我厌倦了每次制作消息框时都必须删除*.Forms ，但效果很好。*

有没有办法改变

*mb [标签] [标签]*

输出行为

```
global::System.Windows.MessageBox.Show("Test"); 
```

代替

```
global::System.Windows.Forms.MessageBox.Show("Test"); 
```

?

非常痛苦

另外，这些（*mb [tab][tab]*）类型的快捷方式的术语是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:53:01.067

那是**代码片段**。为什么不创建自己的[代码片段](http://msdn.microsoft.com/en-us/library/ms165393%28v=vs.80%29.aspx)？

**第 1 步：**将此代码复制到一个新文件并使用`.snippet`扩展名保存。

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
<CodeSnippet Format="1.0.0">
    <Header>
        <Title>wpfmbox</Title>
        <Shortcut>wpfmb</Shortcut>
        <Description>Code snippet for MessageBox.Show</Description>
        <Author>Microsoft Corporation</Author>
        <SnippetTypes>
            <SnippetType>Expansion</SnippetType>
        </SnippetTypes>
    </Header>
    <Snippet>
        <Declarations>
            <Literal>
                <ID>string</ID>
                <ToolTip>String to display</ToolTip>
                <Default>"Test"</Default>
            </Literal>
            <Literal Editable="false">
                <ID>SystemWindowsMessageBox</ID>
                <Function>SimpleTypeName(global::System.Windows.MessageBox)</Function>
            </Literal>
        </Declarations>
        <Code Language="csharp">
    <![CDATA[$SystemWindowsMessageBox$.Show($string$);$end$]]>
        </Code>
    </Snippet>
</CodeSnippet>
</CodeSnippets> 
```

**第 2 步：**从工具 -> 代码片段管理器中，选择`import`并找到您的 .snippet 文件。然后作为位置，最好选择**My Code Snippets**文件夹。

**第 3 步：**在代码中的某处，使用`wpfmb`[tab][tab]。

# assembly - GAS 组装基础知识，获取指数

> ID：15701801
> 
> 赞同：1
> 
> 时间：2013-03-29T10:51:16.863
> 
> 标签：assembly, x86, gnu-assembler

没有很多 GAS 组装教程，所以我非常迷茫。这只是一个简单的程序，在用户输入基数和指数后计算结果。但它不起作用，我认为我的比较语句有问题。您的帮助将不胜感激！谢谢！:)

```
.section .data
    input1: .ascii "Input base number: \0"
    input1Len: .long .-input1
    input2: .ascii "Input exponent: \0"
    input2Len: .long .-input2
    newline: .ascii "\n\0"
    newlineLen: .long .-newline
    output: .ascii "result = "
    outputLen: .long .-output

.section .bss
    .lcomm base, 1
    .lcomm exponent, 1
    .lcomm result, 1
    .lcomm one, 1

.section .text
.globl _start
_start:

#prompt 1st number
movl $4,%eax
movl $1,%ebx
movl $input1,%ecx
movl input1Len, %edx
int $0x80

#get 1st input number
movl $3, %eax
movl $1, %ebx
movl $base, %ecx
int $0x80

#write 1st input number
movl $4,%eax
movl $1,%ebx
movl $base,%ecx
int $0x80

#prompt 2nd number
movl $4,%eax
movl $1,%ebx
movl $input2,%ecx
movl input2Len, %edx
int $0x80   

#get 2nd input number
movl $3, %eax
movl $1, %ebx
movl $exponent, %ecx
int $0x80

#write 2nd input number
movl $4,%eax
movl $1,%ebx
movl $exponent,%ecx
int $0x80

#move base to result
movl (base), %eax
movl %eax, (result)

#check if exponent==1
movl (exponent), %ecx
subl $0x30, %ecx
cmpl $1, %ecx

while:

    movl (base), %eax
    movl (result), %ebx
    subl $0x30, %eax
    subl $0x30, %ebx

    #multiply result and base, then update result
    imull %eax, %ebx
    movl %ebx, (result)
    addl $0x30, %ebx
    movl %ebx, (result) 

    #subtract 1 from ecx, which is the exponent
    subl $1, %ecx

    #compare if ecx is greater than 1
    cmpl $1, %ecx
    jg while

print:

    #write output
    movl $4,%eax
    movl $1,%ebx
    movl $output,%ecx
    movl outputLen, %edx
    int $0x80

    movl $4,%eax
    movl $1,%ebx
    movl $result,%ecx
    movl $1, %edx
    int $0x80

    movl $4,%eax
    movl $1,%ebx
    movl $newline,%ecx
    movl newlineLen, %edx
    int $0x80

_exit:
    movl $1, %eax
    movl %ecx, %ebx
    int $0x80 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:04:20.060

## 一些提示：

```
 # trailing \0 will write an unwanted \0 in the output 
  # you will give the length in the write call anyway
input1: .ascii "Input base number: \0"  

  # as calculated here
input1Len: .long .-input1  

  # you want to read those with movl (base), %eax ...
  # later on !! register size is 4 bytes
  # either resize or use movb (base), %al later on ...
.section .bss 
    .lcomm base, 1
    .lcomm exponent, 1
    .lcomm result, 1

    #get 1st input number
    movl $3, %eax
    movl $1, %ebx
    movl $base, %ecx
      # you should give length 2 in %edx here
      # ... otherwise the old value will be used
      # 2 seems the right choice as it will also read the \n following
    int $0x80 

    #write 1st input number
    movl $4,%eax
    movl $1,%ebx
    movl $base,%ecx
      # you should give length 1 in %edx here
      # ... otherwise the old value will be used 
    int $0x80

   # there's a lot of copying values back and forth
   # going on here ... 
   # better load registers once 
   # => here
while:
    movl (base), %eax
    movl (result), %ebx

   # perform your operations ...

    jg while

   # ... and reassign them
   # => here

print:
   # you'll be in big trouble here 
   # if anything else but
   # --------------------
   #  base=any  exponent=0
   #  base=0    exponent=any
   #  base=1    exponent=any
   #  base=2    exponent=0, 1, 2, 3
   #  base=3    exponent=0, 1, 2
   # --- is given
   #  you'll have to calculate the decimal
   #  representation first ... simply adding 0x30 won't do !! 
```

附加提示：检查指数和`1`初始化可能不是最好的主意。如果它应该是。`result``base``0``result``1`

**编辑：**正如您还询问如何通过正确除以 10 来调整代码以获得大于 9 的结果，我决定添加第二部分。

## 输出更大的数字并除以 10

我不会详细介绍，因为在 stackoverflow 上已经有一个很好的条目（请参阅： [Assembly Language - How to Do Modulo？](https://stackoverflow.com/questions/8021772/assembly-language-how-to-do-modulo)），而是尝试给您一些简短的提示。

正如您似乎已经发现输出较大数字的主要问题是正确计算小数位。这些可以通过继续除以 10 使用余数来填充相应的小数位来计算。例子：

```
123 / 10 = 12 remainder 3
 12 / 10 =  1 remainder 2
  1 / 10 =  0 remainder 1 
```

一旦除法的结果达到 ，该算法就停止`0`。数字的十进制表示只是余数的串联。向上阅读你会得到 "1" 。“2”。"3" = "123" 这正是您正在寻找的表示。

如前所述，x86 上的除法可以通过`div`指令执行。32 位版本将从寄存器读取输入`%edx`并`%eax`解释为 64 位数字`%edx:%eax`和附加参数。前两个寄存器的用法是隐含的`%eax`，`%edx`不能更改。

结果将作为商 in`%eax`和余数 ind`%edx`再次给出，这个赋值是固定的。

将其用于上述算法似乎很简单，因为如果没有小复杂情况，这正是所需的两个值。这种复杂性以相反顺序给出数字的形式出现 - 因此，只需直接打印它们，就会像上面的示例`"321"`那样打印。`"123"`

因此，在能够输出个位数之前，您必须先颠倒它们的顺序。我在尝试中选择的解决方案是先将数字压入堆栈，然后以正确的顺序将它们写入字符串缓冲区，同时再次将它们从堆栈中弹出。

## 例子

我注释掉了您在示例中已经设法实现的任何部分。唯一重复的部分是计算过程，因为我不确定您是否使用了相同的寄存器分配。

```
 .section .bss
.lcomm base, 1  
.lcomm exponent, 1  
.lcomm len, 4
.lcomm string, 10

    # ... perform all the read operations of your example here

calculate:
    # ebx: base
    # ecx: exponent
    # eax: result

    # base
    xor %ebx, %ebx
    movb (base), %bl
    subl $0x30, %ebx

    # exponent
    xor %ecx, %ecx
    movb (exponent), %cl
    subl $0x30, %ecx

    # result
    xor %eax, %eax  # initilize = 0
    # base == 0 ?
    cmpl $0, %ebx
    je prepare
    movl $1, %eax  # initilize = 1

while:
    # exponent == 0 ?
    cmpl $0, %ecx
    je prepare

    # multiply
    imull %ebx, %eax

    subl $1, %ecx   
    jmp while

prepare:
    # eax: result
    # edx: remainder
    # ecx: string
    # ebx: divisor

    movl $0x000a, %ebx
    movl %esp, %ebp
divide:
    xor %edx, %edx
    divl %ebx   # edx:eax / ebx =>  q: eax  mod: edx

    addl $0x30, %edx

    push %edx

    cmpl $0, %eax
    jne divide

    # eax: current digit
    # ebx: string buffer
    # ecx: length  
    mov $string, %ebx
    mov $0, %ecx

reverse:
    pop %eax
    movb %al, (%ebx, %ecx)
    inc %ecx
    cmp %ebp, %esp
    jne reverse

    mov %ecx, (len)

print:
    # ... print all the other stuff of your example here

    # write result
    movl $4,%eax
    movl $1,%ebx
    movl $string, %ecx   
    movl (len), %edx
    int $0x80 
```

# java - 居中文本，不考虑 x 坐标

> ID：15701802
> 
> 赞同：1
> 
> 时间：2013-03-29T10:51:17.317
> 
> 标签：java, pdf, pdf-generation, pdfbox

我修改了 TextToPDF 类来检测内容文件中的一些标签。当找到标签中心时，文本居中。

这不能正常工作，X 坐标似乎不受尊重

当我显示 x：坐标时，我得到：0

0

18.861816

2.9138184

238.31181

9.933823

68.68582

10.347824

40.14981

在生成的 pdf 中，第 6 行应该在第 5 行之前开始，但它在之后开始。

238.31181 > 9.933823 但 pdfbox 似乎说 9.933823 > 238.31181

生成文件的结果 ![在此处输入图像描述](../Images/a394cd4e157801ee8da90f6b555fe8de.png)

此字符串被放入 StringReader 中，用于 createPDFFromText 参数。

```
String rawText = "Children's heart surgery has been suspended with immediate effect at a hospital which is embroiled in a long-running row over the future of paediatric cardiac services in England. \n "
    + "#CENTER#The decision to stop congenital heart surgery at Leeds General Infirmary comes just a day after the High Court quashed plans by the NHS to close its children's unit after ruling the consultation process was flawed.\n "
    + "It follows concerns raised about patients' care including allegations the hospital was avoiding referring children for complex and life-saving treatment at another centre in Newcastle.\n "
    + "Leeds Teaching Hospitals NHS Trust said the temporary measure was being taken to allow an internal review to be conducted following consultation with the Care Quality Commission (CQC)."; 
```

代码

```
public PDDocument createPDFFromText( Reader text ) throws IOException
{
    PDDocument doc = null;
    PDSimpleFont font = PDType1Font.TIMES_ROMAN;
    int fontSize = 12;
    boolean isCentered = false;
    try
    {

        final int margin = 40;
        float height = font.getFontDescriptor().getFontBoundingBox().getHeight()/1000;

        //calculate font height and increase by 5 percent.
        height = height*fontSize*1.05f;
        doc = new PDDocument();
        BufferedReader data = new BufferedReader( text );
        String nextLine = null;
        PDPage page = new PDPage();
        PDPageContentStream contentStream = null;
        float y = -1;
        float maxStringLength = page.getMediaBox().getWidth() - 2*margin;

        // There is a special case of creating a PDF document from an empty string.
        boolean textIsEmpty = true;

        while( (nextLine = data.readLine()) != null )
        {

            // The input text is nonEmpty. New pages will be created and added
            // to the PDF document as they are needed, depending on the length of
            // the text.
            textIsEmpty = false;

            String[] lineWords = nextLine.trim().split( " " );
            int lineIndex = 0;
            while( lineIndex < lineWords.length )
            {
                StringBuffer nextLineToDraw = new StringBuffer();
                float lengthIfUsingNextWord = 0;
                do
                {
                    nextLineToDraw.append( lineWords[lineIndex] );
                    nextLineToDraw.append( " " );
                    lineIndex++;
                    if( lineIndex < lineWords.length )
                    {
                        String lineWithNextWord = nextLineToDraw.toString() + lineWords[lineIndex];
                        lengthIfUsingNextWord =
                            (font.getStringWidth( lineWithNextWord )/1000) * fontSize;
                    }
                }
                while( lineIndex < lineWords.length &&
                       lengthIfUsingNextWord < maxStringLength );
                if( y < margin )
                {
                    // We have crossed the end-of-page boundary and need to extend the
                    // document by another page.
                    page = new PDPage();
                    doc.addPage( page );
                    if( contentStream != null )
                    {
                        contentStream.endText();
                        contentStream.close();
                    }
                    contentStream = new PDPageContentStream(doc, page);
                    contentStream.setFont( font, fontSize );
                    contentStream.beginText();
                    y = page.getMediaBox().getHeight() - margin + height;
                    contentStream.moveTextPositionByAmount(
                        margin, y );

                }
                //System.out.println( "Drawing string at " + x + "," + y );

                if( contentStream == null )
                {
                    throw new IOException( "Error:Expected non-null content stream." );
                }

                String txt = nextLineToDraw.toString();

                if ( txt.indexOf( "#CENTER#" ) != -1 || isCentered )
                {
                    txt = nextLineToDraw.toString().replaceAll( "#CENTER#", "" );

                    PDRectangle pageSize = page.findMediaBox();
                    float stringWidth = font.getStringWidth( txt );
                    float xPosition = ( pageSize.getWidth() - ( 2 * margin ) - ( stringWidth * fontSize ) / 1000f ) / 2f;

                    System.out.println( xPosition );

                    contentStream.moveTextPositionByAmount( xPosition, -height );
                    isCentered = true;
                }
                else
                {
                                            System.out.println( 0);
                    contentStream.moveTextPositionByAmount( 0, -height );
                }

                y -= height;
                contentStream.drawString( nextLineToDraw.toString() );
            }
        }
        if (textIsEmpty)
        {
            doc.addPage(page);
        }

        if( contentStream != null )
        {
            contentStream.endText();
            contentStream.close();
        }
    }
    catch( IOException io )
    {
        if( doc != null )
        {
            doc.close();
        }
        throw io;
    }
    return doc;
} 
```

文件结果可在此处获得：http: [//filebin.ca/br6slMSfOR6/testUnitairePdf.pdf](http://filebin.ca/br6slMSfOR6/testUnitairePdf.pdf) 如您所见，文本未正确居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:28:04.937

问题是（就像@GaborSch 在他对他的回答的评论中猜测的那样）

```
contentStream.moveTextPositionByAmount() 
```

相对于最后一行起作用，而不是相对于某些固定边距。

*详细地：*

该`PDPageContentStream`方法`moveTextPositionByAmount`记录为：

```
/**
 * The Td operator.
 * @param x The x coordinate.
 * @param y The y coordinate.
 * @throws IOException If there is an error writing to the stream.
 */
public void moveTextPositionByAmount( float x, float y ) throws IOException 
```

**Td**运算符又被记录为：

> **tx ty Td**移动到下一行的开头，从当前行的开头偏移 (tx, ty)。tx 和 ty 应表示以未缩放的文本空间单位表示的数字。更准确地说，此操作员应执行以下分配：

![在此处输入图像描述](../Images/915c9ef199c2a91fc586be39d7e435a1.png)

*（参见 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，第 9.4.2 节“文本定位运算符”）*

因此，您必须记住`xPosition`使用的值和

*   要么就在这条线之后

    ```
    contentStream.drawString( nextLineToDraw.toString() ); 
    ```

    插入

    ```
    contentStream.moveTextPositionByAmount( -xPosition, 0 ); 
    ```

    如果线居中；

*   或者等到确定`moveTextPositionByAmount`下一行文本的参数，`xPosition`然后从新的 x 值中减去这个以前的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:18:08.613

也许您正试图将所有文本块相互插入。

您在循环中调用`contentStream.begintText()`，但`contentStream.endText()`在整个循环之外只调用一次。

我不熟悉`TextToPDF`，只是猜测。但在我看来，下一个缩进是正确的，它只是相对于前一个块渲染，**因为前一个块没有正确关闭。**

我建议将`beginText()`s 与`endText()`s 配对，这会有所帮助。

# python - sqlachemy 查询方法是如何工作的？

> ID：15701804
> 
> 赞同：4
> 
> 时间：2013-03-29T10:51:26.850
> 
> 标签：python, syntax, sqlalchemy

我正在学习 sqlachemy，我对 Python 比较陌生。

当我阅读它的文档时，我看到了[这种用法](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#common-filter-operators)，例如：

> query.filter(User.name == 'ed')

Python不会评估表达式`User.name == 'ed'`然后将结果（布尔值）传递给`query.filter`方法吗？

这种语法是如何工作的？Python 是否支持某种类型的运算符覆盖，例如 C++？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:57:43.763

SQLAlchemy 使用各种[特殊的方法挂钩](http://docs.python.org/2/reference/datamodel.html#basic-customization)来重载运算符行为。

对于`==`，该`__eq__()`方法返回编译时表示 SQL 表达式的特殊对象。引用有关“丰富比较”挂钩的文档：

> 按照惯例，`False`返回`True`成功比较。但是，这些方法可以返回任何值，因此如果在布尔上下文中使用比较运算符（例如，在`if`语句的条件中），Python 将调用`bool()`该值来确定结果是真还是假。

请参阅 SQLAlchemy 源代码中的[`ColumnOperators`类](https://bitbucket.org/sqlalchemy/sqlalchemy/src/tip/lib/sqlalchemy/sql/operators.py#cl-212)以了解实现的特定挂钩。

# vim - 以 ; 开头的行的 Vim 自定义突出显示

> ID：15701808
> 
> 赞同：2
> 
> 时间：2013-03-29T10:51:46.903
> 
> 标签：vim, syntax, syntax-highlighting

我想为我的模板文件生成一个自定义突出显示规则`*.tmpl`，即我想标记以开头的行`;`- 这些是注释行。

我在我的`.vimrc`

```
au BufRead,BufNewFile *.tmpl hi tmpl ctermfg=2 ctermbg=3
au BufRead,BufNewFile *.tmpl syn match tmpl /"\zs;\w*\ze"/ 
```

但它没有用。

我将 Vim 7.2 与`+syntax`.

那是我的`.vimrc`

执行病原体#infect() 设置编号

```
set clipboard=unnamedplus
set t_Co=256

syntax enable
set background=dark
let g:solarized_termcolors=256
colorscheme solarized

filetype plugin indent on

let g:Powerline_symbols = 'fancy'
set hlsearch

au BufRead,BufNewFile *.tmpl hi tmpl ctermfg=2 ctermbg=3
au BufRead,BufNewFile *.tmpl syn match tmpl /"\zs;\w*\ze"/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:14:08.197

你的正则表达式：

```
/"\zs;\w*\ze"/ 
```

匹配这样的行：

```
foo";commenttext"
";commenttext"bar
foo";commenttext"bar 
```

但仅`;commenttext`突出显示。

如果你想拥有：

> 我想标记以 ; 开头的行

试试这个：

```
 syn match tmp /^\s*;\w*/ 
```

**请注意**，我使用`\w*`而不是`.*`因为您在正则表达式中编写了它，所以我假设您只想匹配`\w`。如果你想整行，不管有没有空格（或其他`\W`s），使用`.*`，例如：

```
 syn match tmp /^\s*;.*$/ 
```

# python - python根据属性按另一个列表的顺序对对象列表进行排序

> ID：15701811
> 
> 赞同：3
> 
> 时间：2013-03-29T10:52:02.803
> 
> 标签：python, list, sorting

我正在使用 Python 列表排序。

我有两个列表：一个是整数列表，另一个是对象列表，第二个对象列表的属性 id 也是一个整数，我想根据 id 属性对对象列表进行排序，在相同id的顺序出现在第一个列表中，好吧，这是一个例子：

我有`a = [1,2,3,4,5]`

和`b = [o,p,q,r,s]`, 其中 o.id = 2, p.id = 1, q.id = 3, r.id = 5, s.id = 4

我希望我的列表 b 按其 id 出现在列表 a 中的顺序排序，如下所示：

`sorted_b = [p, o, q, s, r]`

当然，我可以通过使用嵌套循环来实现这一点：

```
sorted_b = []
for i in a:
    for j in b:
        if j.id == i:
            sorted_b.append(j)
            break 
```

但这是一种经典的丑陋且非 Python 解决问题的方法，我想知道是否有一种方法可以以一种相当简洁的方式解决这个问题，比如使用 sort 方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T10:56:46.123

```
>>> from collections import namedtuple
>>> Foo = namedtuple('Foo', 'name id') # this represents your class with id attribute
>>> a = [1,2,3,4,5]
>>> b = [Foo(name='o', id=2), Foo(name='p', id=1), Foo(name='q', id=3), Foo(name='r', id=5), Foo(name='s', id=4)]
>>> sorted(b, key=lambda x: a.index(x.id))
[Foo(name='p', id=1), Foo(name='o', id=2), Foo(name='q', id=3), Foo(name='s', id=4), Foo(name='r', id=5)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:27:18.683

这是一个简单的方法：

```
# Create a dictionary that maps from an ID to the corresponding object
object_by_id = dict((x.id, x) for x in b)

sorted_b = [object_by_id[i] for i in a] 
```

如果列表变大，它也可能是最快的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:59:59.817

您可以使用列表推导来做到这一点，但总的来说是一样的。

```
sorted_b = [ y for x in a for y in b if y.id == x ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T11:10:02.333

Python中有一个[排序](http://docs.python.org/2/library/functions.html#sorted)函数。它需要可选的关键字参数`cmp`。您可以将自定义功能传递给那里进行排序。

`cmp`文档中的定义：

> 自定义比较应返回负数、零或正数，具体取决于第一个参数是否被认为小于、等于或大于第二个参数

```
a = [1,2,3,4,5]
def compare(el1, el2):
   if a.index(el1.id) < a.index(el2.id): return -1
   if a.index(el1.id) > a.index(el2.id): return 1
   return 0

sorted(b, cmp=compare) 
```

这更简单，但是我鼓励您使用`key`他在回答中描述的 jamylak 的参数，因为它更 Pythonic 并且在 Python 3 中`cmp`不再支持。

# security - 安全上下文中的 Symfony2 自定义数据被 symfony 覆盖

> ID：15701813
> 
> 赞同：0
> 
> 时间：2013-03-29T10:52:13.053
> 
> 标签：security, symfony, session

我有一种使用自定义数据设置安全上下文的方法：

```
$userEntity = new User();
$userEntity->fromArray($user);

$token           = new UsernamePasswordToken($userEntity, $userEntity->getPassword(), 'secured_area', $userEntity->getRoles());
$session = $this->container->get('session');
$session->set('_security_secured_area', serialize($token));

$this->container->get('security.authentication.manager')->authenticate($token);
$this->container->get('security.context')->setToken($token); 
```

我使用 curl 从另一个应用程序获取用户数据，并希望将其存储为本地“登录用户”。它可以工作，但是在 security.context 中的页面重新加载/重定向之后，我从本地数据库中为具有相同 ID 的用户获取新数据。

我想它可能看起来很复杂，所以问题是：

为什么当我运行`$this->get('security.context')->getToken()->getUser()`Symfony 时从数据库中获取用户，而不是从会话中获取用户？

# java - 用java写文件

> ID：15701817
> 
> 赞同：-2
> 
> 时间：2013-03-29T10:52:23.587
> 
> 标签：java, string

```
String fileNameTemp = new SimpleDateFormat("ddMMyy").format(Calendar.getInstance().getTime());

final String filePath = fileChooser.getSelectedFile().getParent()+"\\"+fileNameTemp+fileChooser.getSelectedFile().getName()+ ".Mp_Lgr2";

FileOutputStream outputStream = new FileOutputStream(filePath);

BufferedOutputStream bos = new BufferedOutputStream(outputStream); 
```

的 `fileNameTemp`值为“290313_4_X634866925_testtemperature9”

如果我不重新修复`fileNameTemp = "290313_4_X634866925_testtemperature9"`

这将是错误的`new FileOutputStream(filePath)`：`File not found Exception` 但是如果我为它设置值`fileNameTemp="290313_4_X634866925_testtemperature9"` 会运行我不知道为什么会这样，希望有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:56:00.087

`fileNameTemp`应该等于`290313`。我不认为您正在构建您期望的路径。在那里调试。

# javascript - JQuery，如果类存在，如何在类中显示类？

> ID：15701818
> 
> 赞同：-2
> 
> 时间：2013-03-29T10:52:26.683
> 
> 标签：javascript, jquery, jquery-selectors, navigation

对于我的 Wordpress 主题，我正在尝试访问并显示具有类 .current-page-item 的列表项中的子菜单

目前我有这个：

```
$(document).ready(function() {
    $(".sub-menu").hide();
    $(".current-page-item").find(".sub-menu").show();
}); 
```

如果我发出警报（'whatup'）；在 if 语句中，它会显示警报，但不会显示（）；具有 .sub-menu 类的 UL

有人可以帮我吗？

编辑：这是 wordpress 生成的 HTML 代码：

```
<ul id="menu-main" class="menu">
    <li id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-4 current_page_item menu-item-11">
        <a href="http://localhost:8080/subfolder/wordpress/">ABOUT COMPANY</a>
        <ul class="sub-menu">
           <li id="menu-item-17" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17"><a href="http://localhost:8080/subfolder/wordpress/?page_id=15">TEAM</a></li>
        </ul>
    </li>
    <li id="menu-item-10" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10">
        <a href="http://localhost:8080/subfolder/wordpress/?page_id=7">COMPANY PHILOSOPHY</a>
        <ul class="sub-menu">
        <li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="http://localhost:8080/subfolder/wordpress/?page_id=19">STRATEGY</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:17:01.677

根据您的 HTML 结构，只需执行以下操作：

```
$("#menu-main").find("li.current_page_item").find("ul.sub-menu").show(); 
```

演示：http: [//jsfiddle.net/u44Yn/1/](http://jsfiddle.net/u44Yn/1/)

请注意，您的代码不起作用，因为您的`li`类`current_page_item`不是`current-page-item`

# jqgrid - JQGrid InlineNav 删除选项

> ID：15701819
> 
> 赞同：1
> 
> 时间：2013-03-29T10:52:36.307
> 
> 标签：jqgrid, delete-row, jqgrid-inlinenav

我正在为我的 jqgrid 使用“inlineNav”。它具有添加、编辑、取消添加所需的所有功能。但找不到任何要删除的东西。我尝试使用“navGrid”删除，但随后出现错误“错误状态：'未找到'。错误代码：404”。

那么可以做些什么吗？

@Oleg 我指望你的帮助！

根据您的建议，我创建了此代码，但它不起作用！你能告诉我出了什么问题吗：

```
var jsonData;
var jsonData1;
var dropdownVal;

function createDataStructure()
{
var mData;
if (document.forms[0].gridData.value == "" )
    "";
else
    mData = document.forms[0].gridData.value
jsonData = {
        "rows": [ mData ]
};
dropdownVal = "12345:Party;12346:Miscellaneous;12347:Conveyance;12348:Staff Welfare";
}

function callGrid()
{
createDataStructure();

"use strict";
var webForm = document.forms[0],
mydata = "",
grid = $("#View1"),
lastSel,
getColumnIndex = function (columnName) {
    var cm = $(this).jqGrid('getGridParam', 'colModel'), i, l = cm.length;
    for (i = 0; i < l; i++) {
        if ((cm[i].index || cm[i].name) === columnName) {
            return i; // return the colModel index
        }
    }
    return -1;
},
onclickSubmitLocal = function (options, postdata) {
    var $this = $(this),
    grid_p = this.p,
    idname = grid_p.prmNames.id,
    grid_id = this.id,
    id_in_postdata = grid_id + "_id",
    rowid = postdata[id_in_postdata],
    addMode = rowid === "_empty",
    oldValueOfSortColumn,
    new_id,
    tr_par_id,
    colModel = grid_p.colModel,
    cmName,
    iCol,
    cm;

    // postdata has row id property with another name. we fix it:
    if (addMode) {
        // generate new id
        new_id = $.jgrid.randId();
        while ($("#" + new_id).length !== 0) {
            new_id = $.jgrid.randId();
        }
        postdata[idname] = String(new_id);
    } else if (typeof postdata[idname] === "undefined") {
        // set id property only if the property not exist
        postdata[idname] = rowid;
    }
    delete postdata[id_in_postdata];

    // prepare postdata for tree grid
    if (grid_p.treeGrid === true) {
        if (addMode) {
            tr_par_id = grid_p.treeGridModel === 'adjacency' ? grid_p.treeReader.parent_id_field : 'parent_id';
            postdata[tr_par_id] = grid_p.selrow;
        }

        $.each(grid_p.treeReader, function (i) {
            if (postdata.hasOwnProperty(this)) {
                delete postdata[this];
            }
        });
    }

    // decode data if there encoded with autoencode
    if (grid_p.autoencode) {
        $.each(postdata, function (n, v) {
            postdata[n] = $.jgrid.htmlDecode(v); // TODO: some columns could be skipped
        });
    }

    // save old value from the sorted column
    oldValueOfSortColumn = grid_p.sortname === "" ? undefined : grid.jqGrid('getCell', rowid, grid_p.sortname);

    // save the data in the grid
    if (grid_p.treeGrid === true) {
        if (addMode) {
            $this.jqGrid("addChildNode", new_id, grid_p.selrow, postdata);
        } else {
            $this.jqGrid("setTreeRow", rowid, postdata);
        }
    } else {
        if (addMode) {
            // we need unformat all date fields before calling of addRowData
            for (cmName in postdata) {
                if (postdata.hasOwnProperty(cmName)) {
                    iCol = getColumnIndex.call(this, cmName);
                    if (iCol >= 0) {
                        cm = colModel[iCol];
                        if (cm && cm.formatter === "date") {
                            postdata[cmName] = $.unformat.date.call(this, postdata[cmName], cm);
                        }
                    }
                }
            }
            $this.jqGrid("addRowData", new_id, postdata, options.addedrow);
        } else {
            $this.jqGrid("setRowData", rowid, postdata);
        }
    }

    if ((addMode && options.closeAfterAdd) || (!addMode && options.closeAfterEdit)) {
        // close the edit/add dialog
        $.jgrid.hideModal("#editmod" + grid_id, {
            gb: "#gbox_" + grid_id,
            jqm: options.jqModal,
            onClose: options.onClose
        });
    }

    if (postdata[grid_p.sortname] !== oldValueOfSortColumn) {
        // if the data are changed in the column by which are currently sorted
        // we need resort the grid
        setTimeout(function () {
            $this.trigger("reloadGrid", [{current: true}]);
        }, 100);
    }

    // !!! the most important step: skip ajax request to the server
    options.processing = true;
    return {};
    },
editSettings = {
    //recreateForm: true,
    jqModal: false,
    reloadAfterSubmit: false,
    closeOnEscape: true,
    savekey: [true, 13],
    closeAfterEdit: true,
    onclickSubmit: onclickSubmitLocal
},
addSettings = {
    //recreateForm: true,
    jqModal: false,
    reloadAfterSubmit: false,
    savekey: [true, 13],
    closeOnEscape: true,
    closeAfterAdd: true,
    onclickSubmit: onclickSubmitLocal
},
delSettings = {
    // because I use "local" data I don't want to send the changes to the server
    // so I use "processing:true" setting and delete the row manually in onclickSubmit
    onclickSubmit: function (options, rowid) {
        var $this = $(this), grid_id = $.jgrid.jqID(this.id), grid_p = this.p,
            newPage = grid_p.page;

        // reset the value of processing option to true to
        // skip the ajax request to 'clientArray'.
        options.processing = true;

        // delete the row
        if (grid_p.treeGrid) {
            $this.jqGrid("delTreeNode", rowid);
        } else {
            $this.jqGrid("delRowData", rowid);
        }
        $.jgrid.hideModal("#delmod" + grid_id, {
            gb: "#gbox_" + grid_id,
            jqm: options.jqModal,
            onClose: options.onClose
        });

        if (grid_p.lastpage > 1) {// on the multipage grid reload the grid
            if (grid_p.reccount === 0 && newPage === grid_p.lastpage) {
                // if after deliting there are no rows on the current page
                // which is the last page of the grid
                newPage--; // go to the previous page
            }
            // reload grid to make the row from the next page visable.
            $this.trigger("reloadGrid", [{page: newPage}]);
        }

        return true;
    },
    processing: true
},
            initDateEdit = function (elem) {
                setTimeout(function () {
                    $(elem).datepicker({
                        dateFormat: 'dd-M-yy',
                        //autoSize: true,
                        showOn: 'button',
                        changeYear: true,
                        changeMonth: true,
                        showButtonPanel: true,
                        showWeek: true
                    });
                }, 100);
            },
            initDateSearch = function (elem) {
                setTimeout(function () {
                    $(elem).datepicker({
                        dateFormat: 'dd-M-yy',
                        //autoSize: true,
                        //showOn: 'button', // it dosn't work in searching dialog
                        changeYear: true,
                        changeMonth: true,
                        showButtonPanel: true,
                        showWeek: true
                    });
                }, 100);
            };

grid.jqGrid({
    datatype: "local",
    data: jsonData.rows,
    localReader: {
        repeatitems: false,
        id: "1"
    },
    colNames: ['Date','Expense Head','Amount', 'Reason','Remarks'],
    colModel: [
        {name:'sdate', index:'sdate', width:200, sorttype: 'date',
            formatter: 'date', formatoptions: {newformat: 'd-M-Y'},
            editable: true, datefmt: 'd-M-Y',
            editoptions: {dataInit: initDateEdit, size: 14},
            searchoptions: {dataInit: initDateSearch},
            editrules: {required: true} },
        {name:'expHead', index:'expHead', width:150, editable:true, sortable:true, edittype:"select", editoptions:{value:dropdownVal}, editrules: {required: true} },
        {name:'expAmt', index:'expAmt', width:100, editable:true, summaryType:'sum', editrules: {required: true} },
        {name:'expReason', index:'expReason', width:200, editable: true,edittype:"textarea", editoptions:{rows:"2",cols:"30"}, editrules: {required: true} },
        {name:'expRemark', index:'expRemark', width:200,editable: true,edittype:"textarea", editoptions:{rows:"2",cols:"30"} }
    ],
    loadtext: "Loading...",
    sortname: 'sdate',
    sortorder: 'desc',
    pager: '#pView1',
    caption: "Expense Table",
    gridview: true,
    rownumbers: true,
    autoencode: true,
    ignoreCase: true,
    viewrecords: true,
    footerrow: true,
    height: "250",
    editurl: 'clientArray',
    beforeSelectRow: function (rowid) {
        if (rowid !== lastSel) {
            $(this).jqGrid('restoreRow', lastSel);
            lastSel = rowid;
        }
        return true;
    },
    ondblClickRow: function (rowid, ri, ci) {
    var $this = $(this), p = this.p;
    if (p.selrow !== rowid) {
        // prevent the row from be unselected on double-click
        // the implementation is for "multiselect:false" which we use,
        // but one can easy modify the code for "multiselect:true"
        $this.jqGrid('setSelection', rowid);
    }
    $this.jqGrid('editGridRow', rowid, editSettings);
},
onSelectRow: function (id) {
    if (id && id !== lastSel) {
        // cancel editing of the previous selected row if it was in editing state.
        // jqGrid hold intern savedRow array inside of jqGrid object,
        // so it is safe to call restoreRow method with any id parameter
        // if jqGrid not in editing state
        if (typeof lastSel !== "undefined") {
            $(this).jqGrid('restoreRow', lastSel);
        }
        lastSel = id;
    }
},
    loadComplete: function () {
        var sum = grid.jqGrid('getCol', 'expAmt', false, 'sum');
        grid.jqGrid('footerData','set', {ID: 'Total:', expAmt: sum});
        jsonData1 = grid.jqGrid('getGridParam', 'data');
        document.forms[0].gridData.value = JSON.stringify(jsonData1);
    },
    loadError: function (jqXHR, textStatus, errorThrown) {
        alert('HTTP status code: ' + jqXHR.status + '\n' +
        'textStatus: ' + textStatus + '\n' +
        'errorThrown: ' + errorThrown);
        alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
    }
});

grid.jqGrid('navGrid', '#pView1', {}, editSettings, addSettings, delSettings, {reloadAfterSubmit:true, beforeSubmit:validate_edit}, {reloadAfterSubmit:true, beforeSubmit:validate_add}, {}, {});
} 
```

我没有提供任何数据，但在将其保存在现场并重新加载后也会出现同样的情况。但是当我点击添加时，表单会打开，当我在输入数据后点击提交时，它就会停止。那么你能告诉我我的代码有什么问题吗？

谢谢你的帮助，你真是个救世主！！！

悉达多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:18:42.320

`inlineNav`不支持删除按钮，但您可以使用`navGrid`. 问题只是`navGrid`通过表单编辑和表单编辑实现的添加按钮不支持`editurl: 'clientArray'`开箱即用的编辑本地网格（ ）。

在[旧答案中](https://stackoverflow.com/a/6800597/315935)，我提出了一种如何在表单编辑中实现删除操作的方法。在[答案中](https://stackoverflow.com/a/5611519/315935)，我甚至发布了如何将表单编辑与本地数据一起使用的方式。[另一个答案](https://stackoverflow.com/a/12296186/315935)包含更新的代码，适用于 jqGrid 的当前版本（4.4.1 和 4.4.4）。我建议您`delSettings`从答案中使用。

# drupal-7 - 为什么 Modernizr 没有加载到 Drupal 7 信息文件中？

> ID：15701820
> 
> 赞同：1
> 
> 时间：2013-03-29T10:52:39.033
> 
> 标签：drupal-7

> 名称 = Lucas 描述 = Drupal-thema gemaakt voor de kinderafdeling AZ St-Lucas Gent。包 = 核心版本 = VERSION 核心 = 7.x 样式表[all][] = style.css
> 
> 脚本[] = 脚本/lib/modernizr.js
> 
> 设置[garland_width] = 流体
> 
> ; drupal.org 打包脚本在 2013-02-20 添加的信息 version = "7.x" project = "drupal" datestamp = "1361393684"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T21:00:01.733

您的 JS 文件可能不在该位置，这意味着 Drupal 将通过省略对不存在文件的调用来自动避免生成 404。

您还可以依赖[Modernizr Drupal 模块](https://drupal.org/project/modernizr)，它会为您处理布局。它还可以通过为您提供刷新文件的 drush 命令以及允许更方便地生成自定义构建的漂亮 API 来更轻松地保持 Modernizr 更新。一探究竟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:52:08.743

请参阅安装说明以使用modernizr [http://drupal.org/project/modernizr](http://drupal.org/project/modernizr)

# php - Amazon FPS CodeIgniter 库

> ID：15701822
> 
> 赞同：2
> 
> 时间：2013-03-29T10:53:01.920
> 
> 标签：php, codeigniter, amazon, payment-gateway

我想知道是否有任何适用于[CodeIgniter的](http://ellislab.com/codeigniter)[Amazon FPS](http://aws.amazon.com/code/Amazon-FPS)库 我已经尝试了来自 Amazon 网站的所有这些资源，但没有一个进行过锻炼。

我已经在所有文件中替换了商家 ID 和密钥`config.ini.php`，但我仍然无法使其正常工作。

所以我想知道是否有任何其他示例，例如发布到 XML 文件然后重定向到亚马逊结帐并使用返回 URL，我认为我可以处理它的验证响应。

请帮我。
PS。我已经阅读了文档，但我仍然无法使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:15:56.473

我知道的唯一一个在 GitHub 上，并且正在进行中。所以你能从中得到多少是值得怀疑的。但是，鉴于您很高兴能够在没有它的情况下简单地使用 API，我会冒着风险，您可能能够为开发过程做出贡献，或者至少让开发人员知道您很高兴他正在创建这个，并且让您知道它何时准备就绪。

[https://github.com/kevinsmith/codeigniter-aws-fps](https://github.com/kevinsmith/codeigniter-aws-fps)

# java - 将选定的文本设置为 JComboBox

> ID：15701824
> 
> 赞同：2
> 
> 时间：2013-03-29T10:53:06.243
> 
> 标签：java, jcombobox

示例代码：

```
yesNoBoxRem.addActionListener(this);
if(e.getSource() == yesNoBoxRem)
    {
        if(yesNoBoxRem.equals("OFF"))
            {
                yesNoBoxSenMang.setSelectedItem("OFF");
                yesNoBoxMangDir.setSelectedItem("OFF");
            }
    } 
```

在这里，我使用了 3 个带有 ON 和 OFF 选项的 JComboBox，当第一个组合框为 OFF 时，如何将 2 和 3 组合框设置为 OFF？我尝试了上述方法但没有结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:59:03.937

试试这个 ：

```
if(yesNoBoxRem.getSelectedItem()=="oFF")
    {
       yesNoBoxSenMang.setSelectedItem("OFF");
       yesNoBoxMangDir.setSelectedItem("OFF");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:02:40.127

使用 getSeletedItem() 方法而不是直接使用 equals()

如下所示，

```
 if(e.getSource() == c1)
    {
        if(c1.getSelectedItem().equals("OFF"))
            {
                c2.setSelectedItem("OFF");
                c3.setSelectedItem("OFF");
            }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:21:17.477

```
if(e.getSource() == yesNoBoxRem)
    {
        if(yesNoBoxRem.getSelectedItem() == "OFF")
            {
                yesNoBoxSenMang.setSelectedItem("OFF");
                yesNoBoxMangDir.setSelectedItem("OFF");
            }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:55:42.230

尝试重新绘制这些项目 yesNoBoxSenMang 和 yesNoBoxMangDir。

# sql-server-2008 - 如何在 SQL Server 2008 中使用没有用户名和密码的 `sqlcmd` 命令？

> ID：15701829
> 
> 赞同：15
> 
> 时间：2013-03-29T10:53:36.547
> 
> 标签：sql-server-2008, authentication, sqlcmd

如何`sqlcmd`以当前登录用户的身份自动运行传递给 的命令，即无需输入用户名和密码？

我只想使用 Windows 身份验证。它是本地服务器。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T10:59:08.813

`sqlcmd`接受`-E`参数，这意味着“使用受信任的连接”... IOW，您的 Windows 凭据。

[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# blackberry - 谷歌地图未在黑莓浏览器中显示

> ID：15701831
> 
> 赞同：0
> 
> 时间：2013-03-29T10:53:38.153
> 
> 标签：blackberry, java-me

大家好，我正在尝试在黑莓浏览器中打开 Google-Map URL，但不幸的是它没有显示 Google-Map。该 URL 在其他操作系统（Android、Iphone、Windows）中运行良好

这是网址：[https](https://maps.google.com/maps?saddr=DT4+8DX&daddr=DT6+3JP) ://maps.google.com/maps?saddr=DT4+8DX&daddr= DT6+3JP 这是我的黑莓代码

```
String address = "https://maps.google.com/maps?saddr=DT4+8DX&daddr=DT6+3JP";
Browser.getDefaultSession().displayPage(address);

// I also tried with this approach 
String address = "https://maps.google.com/maps?saddr=DT4+8DX&
address = getUrlEncodedString(address);

Browser.getDefaultSession().displayPage(address);

private String getUrlEncodedString(String hsURL)
{
    URLEncodedPostData urlEncoder = new URLEncodedPostData("UTF-8", false);
    urlEncoder.setData(hsURL);
    hsURL = urlEncoder.toString();
    return hsURL;
} 
```

请告诉我，为什么这没有显示 G-Map。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:10:31.580

我在诺基亚和黑莓中尝试这样的网址。在这个平台上我发现这个平台不支持通过 url 调用。我认为只有通过 url 开发对谷歌地图的支持的 android（原生于 gogle 地图）和 Iphone 才支持 url。

> 笔记
> 
> 如果您尝试在黑莓浏览器中通过 url 调用谷歌地图，您得到的答案是谷歌页面搜索

# c++ - 将子字符串插入另一个字符串

> ID：15701833
> 
> 赞同：3
> 
> 时间：2013-03-29T10:53:40.673
> 
> 标签：c++, string

我有下一个字符串：

```
string str1 = "1,123456,name1,4";
string str2; 
```

我想将 str1 的字符串（从第 9 个字母到`,`）插入到 str2。

所以 str2 应该是：`name1`

如果`str1 = "2,234567,namenamename,5"`，那么`str2`将是：（`namenamename`再次：从第 9 个字母到`,`）。

我不想使用`strtok`.

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:57:10.757

您可以`std::string::find()`结合使用`std::string::substr()`：

```
std::string::size_type pos = 9;
std::string str1 = "1,123456,name1,4";
std::string::size_type commaPos = str1.find(',', pos);
if (commaPos == std::string::npos)
{
    commaPos = str1.length();
}

std::string str2 = str1.substr(pos, commaPos - pos); 
```

这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx%2459)。

# javascript - 需要一个带有自动完成功能的 js 插件和带有图标的列表项

> ID：15701839
> 
> 赞同：0
> 
> 时间：2013-03-29T10:54:16.157
> 
> 标签：javascript, jquery, autocomplete

我一直在浏览 javascript 插件或具有自动完成功能的下拉组合框和带有图标的列表项的解决方法。

[http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/index.html](http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/index.html)

我在stackoverflow中的一个解决方案中找到了上面的链接，[将带有选项的图像放在下拉列表中](https://stackoverflow.com/questions/4941004/putting-images-with-options-in-a-dropdown-list)

但是这个插件不包含自动完成功能。在我选择列表项之一后，我还需要该图标仍显示在选择中。有人知道具有这些功能的任何解决方法或任何 js 插件吗？

# json - 如何从 soundcloud api 访问返回的 JSON 对象

> ID：15701841
> 
> 赞同：2
> 
> 时间：2013-03-29T10:54:17.393
> 
> 标签：json, api, soundcloud

我正在尝试访问从 soundcloud 返回的 json 对象。我可以使用以下方式访问它

```
var myJSON = $.getJSON("http://api.soundcloud.com/users/<myuserid hidden>/tracks.json?client_id=<myclientid hidden>"); 
```

现在，我知道所有数据都已正确分配给 var myJSON，因为当我将其记录到控制台时，一切都在那里。它返回如下内容：

```
 "[{"kind":"track","id":<trackid>,"created_at":"2012/12/17 21:48:03 +0000","user_id":<myid>,"duration":185147,"commentable":true,"state"....... 
```

但是，当我尝试访问诸如第一首曲目的标题之类的内容时：

```
console.log(myJSON[0].title); 
```

chrome 只是给出了错误 Uncaught TypeError: Cannot read property 'title' of undefined

所以......我可能在这里遗漏了一些非常基本的东西。有人知道我做错了什么吗？非常感谢您的帮助！

编辑：一切都需要在 $.getJSON 调用中完成，如下所示：

```
$.getJSON('http://api.soundcloud.com/users/<userid>/tracks.json?client_id=<client_id>', function(sounds) { **enter whatever code you want to execuse 
```

“功能（声音）”部分是添加的重要部分。显然，访问从 .getJSON 方法之外的 JSON 对象获得的任何内容并不是很简单。（有一些方法，但需要一些我不太了解的解决方法）。soo... 我需要在这里添加我所有的代码。

# visual-studio-2010 - 在 Microsoft 测试管理器的测试运行中分配另一个测试人员

> ID：15701846
> 
> 赞同：1
> 
> 时间：2013-03-29T10:54:32.897
> 
> 标签：visual-studio-2010, visual-studio, testing, integration-testing, microsoft-test-manager

我正在使用 Microsft 测试管理器中的几个步骤来测试一个测试用例。当我运行这个测试用例时，我只想执行几个步骤，然后为这个测试运行分配另一个测试人员。

例如，我有三个步骤。前两个步骤供我测试。在这两个步骤之后，我想停止测试并分配另一个测试人员，以便他可以测试第三步。

![测试用例的三个步骤](../Images/7f8fc65cc61061cb1f2385fc32f5cec2.png)

但是我找不到停止测试并为这个测试用例分配新用户的方法。

有谁知道这是否可能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:35:24.147

这**绝对**是做不到的。当你运行一个`Test Case`新`Test Run`的创建并存储在 tfs 数据库中。为此运行执行的步骤及其结果、注释、附件等已保存且无法编辑。

从测试的角度来看，我认为即使您可以这样做，也不应该这样做。每个测试用例都应该尽可能简单，以便每个人都可以执行它。如果你真的需要这个，也许你应该将测试用例分成两个不同的测试，第二个将第一个作为`prerequisite`.

# regex - Sed 抓取标签和换行符 (Mac OSX)

> ID：15701849
> 
> 赞同：1
> 
> 时间：2013-03-29T10:54:46.490
> 
> 标签：regex, sed

我有这个文本，我需要删除页码：

```
<p class="p3">El gabinete se iba iluminando lentamente ... Por delante de las</p>
<p class="p5"><span class="s4"><i>32</i></span> grandes nubes de un color violeta obscuro...</p>
<p class="p3"> 
```

我需要删除

```
</p>
<p class="p5"><span class="s4"><i>32</i></span> 
```

从中。

到目前为止我有这个

```
sed -E -i '' 's/</p>\n<p class="p[0-9]+"[^>]*><span class=".+">.+<\/span> / /g' Capítulo1.html 
```

但这不起作用，没有`</p>\n`零件就可以工作，但我真的需要捕获和替换它`</p>`。

请注意，这是在 Mac 上，sed 似乎与 Linux 有点不同。段落类也可以是任何以 p 开头后跟数字的东西，类似于 span 类 s 后跟数字，斜体标签可以存在或不存在，中间是页码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:57:07.713

除非换行真的很重要，否则您可以尝试先将它们剥离：

```
tr -d '\n' | sed ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:05:54.367

你错过了转义结束段落标签的正斜杠，试试这个：

`'s/<\/p>\r?\n<p class="p\d+"[^>]*><span class=".+">.+<\/span> / /g' Capítulo1.html`

要获得您所描述的更完整的匹配，请尝试以下操作：

`'s/<\/p>\r?\n<p class="p\d+"[^>]*?><span class="s\d+">(<i>)?\d+(<\/i>)?<\/span>/ /g' Capítulo1.html`

This more specifically narrows down the span class matching, and adds non-greediness to stop any unexpected surprises when a huge chunk of data is removed between a span opening tag and the furthest matching span closing tag.

# php - 如何在jquery中运行php删除查询而不刷新页面

> ID：15701853
> 
> 赞同：0
> 
> 时间：2013-03-29T10:55:14.840
> 
> 标签：php, jquery

我想使用 PHP 从数据库中删除值。

使用表格行并放置一个像**“删除”**`onClick='window.location='page.php?action=del&id=1'`这样的按钮，我在 PHP 中创建了一个类似 and 的函数来删除。

```
if($_REQUEST['action'] == 'del'){
     $req_id = $_REQUEST['id'];
     $del_query = mysql_query("DELETE FROM table WHERE id='$req_id'");
} 
```

它运行良好，但我不想刷新页面。请告诉我如何在不刷新页面的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:08:03.910

```
<button id='delete'>Click Me To Delete</button>

 $('#delete').on('click',function(){

 $.ajax({
    type:'POST',
    url:'page.php',
    data:'action=del&id=1',
    success:function(result){
              //Deleted  
    }

  });

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:58:12.897

尝试这个：

```
<a href="javascript:void(0);" onclick="if('Are you sure you want to delete?'){delData(this,1);}">delete</a>

<script type="text/javascript">
function delData(control,id){
  $.ajax({type:'POST', url:'page.php?action=del&id='+id, success:function(result){
   //alert('deleted');
     $(control).parents('table').eq(0).remove();
   }
  });
}
<script> 
```

**笔记：**

1.  您需要为此添加 jQuery 文件。
2.  这个过程称为ajax。去谷歌上查询。
3.  然后尝试在 post 参数中而不是在查询字符串中传递数据。

**更新：**请注意，现在“this”作为该控件的引用传递给方法 delData。

# c++ - c++：在函数调用中声明函数

> ID：15701854
> 
> 赞同：3
> 
> 时间：2013-03-29T10:55:17.943
> 
> 标签：c++, function-pointers

是否可以将函数定义作为参数传递，如果可以，其语法是什么？如果不是，那是什么原因？我想做类似的事情：

```
double arr1[10], arr2[10];

std::equal(arr1, &(arr1[5]), arr2, (bool(*)(double a, double b){return a == -b;}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T10:56:39.067

您可以为此使用 lambda：

```
std::equal(arr1, arr1 + 5, arr2, [](double a, double b) { return a == -b; }); 
```

# javascript - 如何使用 JavaScript 动态调整 Facebook 评论插件的大小？

> ID：15701855
> 
> 赞同：2
> 
> 时间：2013-03-29T10:55:24.613
> 
> 标签：javascript, css, facebook, facebook-javascript-sdk, facebook-comments

我显示 Facebook 评论插件（例如**.fb-comments**）的 DIV 由 CSS 修复，考虑到如果我无法修改该 CSS，是否可以在加载所有评论后使用纯 JS 解决方案调整评论插件的大小？

```
 <div style='background-color:red;height:200px;' 
       class="fb-comments" data-href="http://example.com" 
       data-num-posts="10"></div> 
```

演示：http: [//jsfiddle.net/8MyV3/1/](http://jsfiddle.net/8MyV3/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:09:24.070

这是很有可能的。

该类`.fb-comments`是通过 CSS 设置的，但您仍然可以使用该`!important`标志来覆盖它。

**让我们开始吧：**

1.  首先你需要覆盖一些 CSS：

    ```
    .fb-comments, .fb-comments * {
        width:100% !important;
    } 
    ```

2.  然后您可以将您的 facebook 评论小部件放在它自己的容器中

    ```
    <div class="fb_container">
            <div class="fb-comments" data-href="http://example.com" data-num-posts="10"></div>
    </div> 
    ```

3.  *可选*- 根据需要使用 CSS 设置样式：

    ```
    .fb_container{
       width: 200px;
    } 
    ```

4.  然后您可以使用 JS 以编程方式更改它：

    ```
     $(".fb_container").css("width","200px"); 
    ```

这是一个[有效的 jsFiddle 示例](http://jsfiddle.net/opherv/fEW5c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T16:13:11.107

这段代码应该可以解决问题：

```
$('.fb-comments').attr('data-width', '200'); 
```

这将使“.fb-comments”宽 200 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T20:31:40.567

需要更新三个元素才能完全调整大小。

```
$('.fb-comments').attr('data-width', '200');
$('.fb-comments span').css('width', '200');
$('.fb-comments span iframe').css('width', '200'); 
```

# google-maps - 使用 V3 同时导航地图和街景

> ID：15701856
> 
> 赞同：0
> 
> 时间：2013-03-29T10:55:32.907
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

[我正在尝试使用 V2 https://google-developers.appspot.com/maps/documentation/javascript/v2/examples/streetview-data?hl=es](https://google-developers.appspot.com/maps/documentation/javascript/v2/examples/streetview-data?hl=es)为 googlemaps 的 V3找出此页面显示的代码但是在使用街景导航时我无法刷新橙色图标的位置....有什么想法吗？

另一点......在两个视图上导航时如何获得实际的纬度？

这是一些代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Zone -</title>
<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false">
</script>
<script>   

$(function(){
function sleep(milliseconds) {
    var start = new Date().getTime();
    for (var i = 0; i < 1e7; i++) {
      if ((new Date().getTime() - start) > milliseconds){
        break;
      }
    }
}

initialize();
});

var map;
var myPano;   
var panoClient;
var nextPanoId;
var panorama;  
function initialize() {
      var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }

      var fenwayPark = new google.maps.LatLng(42.345573,-71.098326);
    var fenwayPOV = {yaw:370.64659986187695,pitch:-20};

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    panoClient = new google.maps.StreetViewService();      
      //map = new GMap2(document.getElementById("map_canvas"));
      map.setCenter(fenwayPark, 15);
      google.maps.event.addListener(map, "click", function(overlay, latlng) {
        // latlng will be null if the info window has been clicked.
        if (latlng) {
          panoClient.getNearestPanorama(latlng, showPanoData);
        }
      });

      var panoramaOptions = {
              position: fenwayPark,
              pov: {                  
                heading: 34,
                pitch: -20
              }
            };
      myPano = new google.maps.StreetViewPanorama(document.getElementById("pano"),panoramaOptions);
      //map.setStreetView(myPano);
      myPano.setPano(fenwayPark, fenwayPOV);

      google.maps.event.addListener(myPano, "error", handleNoFlash);  
      panoClient.getPanoramaByLocation(fenwayPark, 50, processSVData);
      //myPano.setStreetView(myPano);
}

function processSVData(data, status) {
      if (status == google.maps.StreetViewStatus.OK) {
        var marker = new google.maps.Marker({
          position: data.location.latLng,
          map: map,
          title: data.location.description
        });

        google.maps.event.addListener(marker, 'click', function() {

          var markerPanoID = data.location.pano;
          // Set the Pano to use the passed panoID
          myPano.setPano(markerPanoID);
          myPano.setPov({
            heading: 270,
            pitch: 0,
            zoom: 1
          });
          myPano.setVisible(true);
        });
      }
    }
</script>
</head>
<body>
</body>
</html> 
```

# sql-server - SSIS：更新或插入后删除行

> ID：15701859
> 
> 赞同：2
> 
> 时间：2013-03-29T10:55:45.430
> 
> 标签：sql-server, etl, ssis

这是以下情况：我有一张**StudentsA**表，需要与另一台服务器上的另一个表同步，**StudentsB**。这是从 A 到 B 的单向同步。由于表 StudentsA 可以保存大量行，因此我们有一个名为**StudentsSync**的表（在输入服务器上），其中包含自上次从 StudentsA 复制以来已修改的**StudentA**的**ID**给**学生 B** .

我做了以下 SSIS 数据流任务：

![在此处输入图像描述](../Images/13f29af50dda8b4e026e7ff20c9bd27e.png)

唯一的问题是我需要在成功复制或更新后从**StudentSync中删除该行。**像这样的东西：

![在此处输入图像描述](../Images/3074eb0f430c0061d239e492dbcd9abe.png)

知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:51:16.700

可以使用3种方法来实现

1.如果您的`target`表中 `OutputDB`有`TimeStamp`列，例如 `Create`，`modified TimeStamp`然后行已经获得`updated`或`inserted`可以通过编写简单查询获得。您需要在Table`execte sql task`中`Control Flow`的`delete`这些行中写入以下查询。`Sync`

```
Delete from SyncTable
where keyColumn in (Select primary_key from target 
where ModifiedTimeStamp >= GETDATE() or (ModifiedTimeStamp is null
and CreateTimeStamp>=GETDATE())) 
```

我假设与表一起`StudentsA's` `primary key`存在于表中。上述条件基本上检查，如果是，那么列将有日期，否则如果值是，则将有当前日期`Sync``primary key``Target``new row``added``CreateTimeStamp``current``modifiedTimeStamp``null``updated``modifiedTimeStamp`

`TimeStamp`如果您的表中有列，则上述查询将起作用`target`，如果您将数据加载到其中，我认为这些列应该存在`Data Warehouse`

2.您可以使用`MERGE`语法来执行更新和插入。`Control Flow`无需`Execute SQL Task`使用`Data Flow Task`。即使您没有，也可以使用以下查询`TimeStamp columns`

```
DECLARE @Output TABLE ( ActionType VARCHAR(20), SourcePrimaryKey INT)

MERGE StudentsB  AS TARGET
USING StudentsA  AS SOURCE 
ON (TARGET.CommonColumn = SOURCE.CommonColumn) 

WHEN MATCHED 
THEN 
UPDATE SET TARGET.column = SOURCE.Column,TARGET.ModifiedTimeStamp=GETDATE()

WHEN NOT MATCHED BY TARGET THEN 
INSERT (col1,col2,Col3) 
VALUES (SOURCE.col1, SOURCE.col2, SOURCE.Col3)

OUTPUT $action, 
INSERTED.PrimaryKey AS SourcePrimaryKey INTO @Output

Delete from SyncTable
where PrimaryKey in (Select SourcePrimaryKey from @Output
                     where ActionType ='INSERT' or ActionType='UPDATE') 
```

代码没有经过测试，因为我的时间不多了。但至少它应该让你对如何继续有一个公平的想法。.有关`MERGE`语法的更多详细信息，请阅读[this](http://www.mssqltips.com/sqlservertip/1704/using-merge-in-sql-server-to-insert-update-and-delete-at-the-same-time/)和[this](https://stackoverflow.com/questions/4507444/t-sql-merge-finding-out-which-action-it-took)

3.使用`Multicast`组件到`duplicate`数据集`Insert`和。`Update`连接一个`MULTICAST`到`lookmatch`输出和另一个多播到`Lookup No match output`

![在此处输入图像描述](../Images/7c1139ddf87565a5be5a1b1029826317.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:31:02.537

1.  在“更新现有条目”之后和“插入新条目”之后添加一个任务，将学生 ID 添加到一个变量中，该变量将包含要删除的 ID 列表。
2.  将所有任务包含在一个序列容器中。
3.  在序列容器执行后，添加一个任务以从同步表中删除您一直在填充的变量中的所有记录。

# python - 将字符串转换为原始字节

> ID：15701860
> 
> 赞同：4
> 
> 时间：2013-03-29T10:55:46.327
> 
> 标签：python, arrays, string, byte

我编写了一个使用原始字节的程序（我不知道这是否是正确的名称！）但用户会将数据作为纯字符串输入。

如何转换它们？

我已经尝试过一种方法，但它返回一个长度为 0 的字符串！

这是起始字符串：

```
5A05705DC25CA15123C8E4750B80D0A9 
```

这是我需要的结果：

```
\x5A\x05\x70\x5D\xC2\x5C\xA1\x51\x23\xC8\xE4\x75\x0B\x80\xD0\xA9 
```

这是我写的方法：

```
def convertStringToByte(string):
    byte_char = "\\x"
    n=2
    result = ""
    bytesList = [string[i:i+n] for i in range(0, len(string), n)]
    for i in range(0, len(bytesList)):
        bytesList[i] = byte_char + bytesList[i]
    return result 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T11:08:00.583

使用[`binascii.unhexlify()`](http://docs.python.org/2/library/binascii.html#binascii.unhexlify)：

```
import binascii

binary = binascii.unhexlify(text) 
```

相同的模块也有[`binascii.hexlify()`](http://docs.python.org/2/library/binascii.html#binascii.hexlify)镜像操作。

演示：

```
>>> import binascii
>>> binary = '\x5A\x05\x70\x5D\xC2\x5C\xA1\x51\x23\xC8\xE4\x75\x0B\x80\xD0\xA9'
>>> text = '5A05705DC25CA15123C8E4750B80D0A9'
>>> binary == binascii.unhexlify(text)
True
>>> text == binascii.hexlify(binary).upper()
True 
```

The `hexlify()` operation produces *lowercase* hex, but that is easily fixed with a `.upper()` call.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T11:04:23.743

您必须从`5A`（表示十六进制数字的字符串）获取`0x5A`或`90`（整数）并将它们输入`chr()`. 您可以使用 进行第一次转换`int('0x5A', 16)`，因此您会得到类似

```
chr(int('0x5A', 16)) 
```

# android - dalvik 如何查找库？

> ID：15701861
> 
> 赞同：2
> 
> 时间：2013-03-29T10:55:56.087
> 
> 标签：android, dalvik

首先，在 System.java 中，它调用 Runtime 来加载库。

```
public static void loadLibrary(String libName) {
    SecurityManager smngr = System.getSecurityManager();
    if (smngr != null) {
        smngr.checkLink(libName);
    }
    Runtime.getRuntime().loadLibrary(libName, VMStack.getCallingClassLoader());
} 
```

其次，它调用VMStack.getCallingClassLoader()来findLibrary。

```
void loadLibrary(String libraryName, ClassLoader loader) {
    if (loader != null) {
        String filename = loader.findLibrary(libraryName);
        if (filename == null) {
            throw new UnsatisfiedLinkError("Couldn't load " + libraryName + ": " +
                    "findLibrary returned null");
        }
        //....
    }
} 
```

所以，我认为`VMStack.getCallingClassLoader()`是最有意义的。但在其 jni 文件**dalvik_system_VMStack.cpp**中，该`Dalvik_dalvik_system_VMStack_getCallingClassLoader`函数很难学习。最后，dalvik 如何找到Library？

```
static void Dalvik_dalvik_system_VMStack_getCallingClassLoader(const u4* args,
    JValue* pResult){
    ClassObject* clazz =
        dvmGetCaller2Class(dvmThreadSelf()->interpSave.curFrame);

    UNUSED_PARAMETER(args);

    if (clazz == NULL)
        RETURN_PTR(NULL);
    RETURN_PTR(clazz->classLoader);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T19:49:38.220

`VMStack.getCallingClassLoader()`返回声明调用当前方法的方法的类的类加载器。换句话说，如果我的函数`foo()`调用`Runtime.loadLibrary()`，它将返回`foo`的类加载器。

所有这一切的重点是确保在调用者的上下文中加载库`findLibrary`，而不是在`java.lang.Runtime`.

很有可能`findLibrary()`是由 实现的`BaseDexClassLoader`，它调用了`DexPathList.findLibrary()`，它完成了实际工作。有趣的一点是遍历，它是从构造函数的参数`nativeLibraryDirectories`初始化的（从or获取它）。`libraryPath``BaseDexClassLoader``PathClassLoader``DexClassLoader`

对于 Android 应用程序，请查看`android.app.ApplicationLoaders`，它使用`PathClassLoader`. 如果你追溯得足够远，你会看到从`ApplicationInfo.nativeLibraryDir`.

**编辑：**更深入地解决评论......

`/system/lib`来自核心库从环境变量中`java.library.path`提取的属性。`LD_LIBRARY_PATH`特定于应用程序的库目录由框架配置。

构造`PackageManagerService`函数设置 lib 路径`mAppLibInstallDir`，并`setInternalAppNativeLibraryPath()`配置`nativeLibraryDir`.

`DexPathList.splitLibraryPath()`将`java.library.path`路径与特定于 APK 的路径组合在一起。有关订购的说明，请参阅那里的评论。

# .net - XSLT Muenchian 分组 - 奇怪的行为

> ID：15701864
> 
> 赞同：0
> 
> 时间：2013-03-29T10:56:12.977
> 
> 标签：.net, xslt

我在 .NET 的 XSLT 中使用 Muenchian 分组来按日期对指示符元素进行分组。

我的 XML 和 XSLT 的片段：

```
<financials>
  <indicator>
    <date>2010</date>
    <labeltype>2</labeltype>
  </indicator>
  <indicator>
    <date>2009</date>
    <labeltype>2</labeltype>
  </indicator>
  <indicator>
    <date>2008</date>
    <labeltype>2</labeltype>
  </indicator>
  ...
</financials>

<xsl:key name="financialsByDate" match="indicator" use="date" />
<xsl:template match="financials">
    <xsl:for-each select="indicator[generate-id(.) = generate-id(key('financialsByDate', date)[1])]">
      <financial>
         ...
      </financial>
    </xsl:for-each>
  </xsl:template> 
```

此代码在我提取用于测试的小型 XML 文档中运行良好，但在具有更多元素的原始 XML/XSLT 中根本无法运行。

奇怪的是，当我将文本“日期”更改为“foobar”时，它会起作用。

文档中其他地方的其他一些“日期”元素是否可能会影响我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:39:57.793

其他`indicator`元素比其他元素更可能成为问题`date`。Muenchian 分组的本质是`key`应该只匹配您要分组的元素，因此请尝试更具体的键，例如

```
<xsl:key name="financialsByDate"
   match="financials/indicator" use="date" /> 
```

# java - Maven 与 Ant 的对应物是什么 “前缀”属性？

> ID：15701865
> 
> 赞同：2
> 
> 时间：2013-03-29T10:56:22.290
> 
> 标签：java, maven, web-applications, ant

我目前正在将 Java Web Project 构建过程从 Ant 迁移到 Maven。当前进程使用几个特定于环境的属性文件，这些文件在 WAR 文件生成期间根据提供给 Ant 的环境参数插入到主要应用程序属性中。

我无法在 Maven 中轻松复制的功能之一是属性文件前缀，即：

```
<property name="some.env.file" value="someEnv.properties"/>
<property file="${some.env.file}" prefix="some.env"/> 
```

这会为文件中的所有属性添加“some.env”前缀，并且应用程序属性中的所有占位符都包含此前缀，即：

```
some.property=${some.env.propertyOne} 
```

Maven 提供了 pom.xml 过滤器和过滤元素以允许替换属性，但我找不到一种方法来在文件中添加所有属性名称，并将特定于环境的前缀设置为构建参数，这迫使我为 Maven 构建重复属性文件过程。有没有办法在 Maven 中复制这个 Ant 的原始功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:41:58.417

我建议您使用 maven-antrun-plugin 使用前缀通过简单的 ant 任务加载属性文件。并且还启用[`exportAntProperties`](http://maven.apache.org/plugins/maven-antrun-plugin/run-mojo.html#exportAntProperties)，以便 ant 定义的属性在 maven 中可用。

这样的事情将在验证阶段（以及所有后续阶段）在您的 maven 构建中提供由 ant 定义的所有属性。

```
 <plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <configuration>
          <exportAntProperties>true</exportAntProperties>
          <target>
            <property file="${some.env.file}" prefix="some.env"/>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

# c# - 改变另一种形式的不透明度

> ID：15701867
> 
> 赞同：0
> 
> 时间：2013-03-29T10:56:33.327
> 
> 标签：c#, winforms, opacity

我正在制作一个程序，我在程序中有另一个表格，里面有程序的选项。这些选项`Checkboxes`应该启用不透明度。我可以用其他表单更改主表单的不透明度吗？

```
private void useOpacity_CheckedChanged(object sender, EventArgs e)
{
    if (useOpacity.Checked)
    {
         window().Opacity = .75;
    }
} 
```

像这样的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:13:08.063

如果这是父母的子形式，您可以执行以下操作：

```
this.Parent.Invoke((MethodInvoker)delegate {
    Form temp = (Form)this.Parent;
    temp.Opacity = 0.75}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:32:27.187

使用委托

```
public class OptionWindow
{
    public delegate void oppacityDelegate(double value);
    public static event oppacityDelegate oppacity; 
```

调用它

```
private void useOpacity_CheckedChanged(object sender, EventArgs e)
{
     if (useOpacity.Checked)
     {
       oppacity(.75);
     }
} 
```

并在你的高级课程中抓住它

```
OptionWindow.oppacity += ChangeOppacity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:06:13.673

通过`MainWindow`选项窗口的构造函数传递。然后在您的选项窗口中：

```
public class OptionWindow : Form
{
    Form _mainWindow;                       //YOUR PROGRAM IS OF TYPE Form

    public OptionWindow(Form mainWindow)
    {
        this._mainWindow = mainWindow;
    }

    private void useOpacity_CheckedChanged(object sender, EventArgs e)
    {
         if (useOpacity.Checked)
         {
           _mainWindow.Opacity = .75;
         }
     }
} 
```

这是当您使用`OptionWindow`程序中的

```
OptionWindow window = new OptionWindow(this);
window.Show(); 
```

# android - 为什么文件没有被 file.delete() 删除？

> ID：15701873
> 
> 赞同：6
> 
> 时间：2013-03-29T10:56:59.260
> 
> 标签：android, file

我无法从 sdcard 中删除文件。

```
File toDelete = new File(fname);
boolean result=toDelete.delete(); 
```

结果是假的。同一个文件的读取和写入在同一个应用程序中运行。没有打开的流。没有提出异常。我试图在以这种方式删除之前使其可写

```
toDelete.setWritable(true); 
```

没有效果。怎么可能系统可以读写，但不能删除同一个文件？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:59:47.860

使用下面的代码它可以帮助你。

```
 File fdelete = new File(file_dj_path);
        if (fdelete.exists()) {
            if (fdelete.delete()) {
                System.out.println("file Deleted :" + file_dj_path);
            } else {
                System.out.println("file not Deleted :" + file_dj_path);
            }
        } 
```

删除图片后刷新图库

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
 Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

检查这个：[https ://stackoverflow.com/a/10716773/1168654](https://stackoverflow.com/a/10716773/1168654)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:02:27.187

尝试这样做

```
 File fileToDelete = new File(YourPath);
 boolean deleted = fileToDelete.delete(); 
```

重新安装您的卡并检查

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                     Uri.parse("file://"
                               + Environment.getExternalStorageDirectory()))); 
```

# sql - 找到基本集合论思想的 SQL 解决方案

> ID：15701879
> 
> 赞同：3
> 
> 时间：2013-03-29T10:57:18.643
> 
> 标签：sql, select

我有一个如下的数据库表：

```
╔═════════════════╦════════════╗
║ ADVERTISEMENTID ║ CATEGORYID ║
╠═════════════════╬════════════╣
║               1 ║ A          ║
║               1 ║ C          ║
║               2 ║ A          ║
╚═════════════════╩════════════╝ 
```

这基本上意味着：

*   广告**#1**属于两类：**A**和**C**以及
*   广告**#2**属于一类：**A**。

假设用户传递了（**A，B，C**）可能类别的参数。这里两个广告都匹配，因为可能类别的集合包含广告**#1**的所有类别，而可能类别的集合包含广告**#2**的所有类别。

但是，如果用户将另一组可能的类别作为参数传递，例如 ( **A,D** )。这里只有广告**#2**匹配，而广告**#1**不匹配，因为可能的类别集不包含**#1**的所有类别。

现在我不确定如何在 SQL 中表达这一点，即构建一个 SQL 查询，该查询从给定可能类别 ID 的参数的表中检索不同的广告 ID。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:47:58.033

这个问题有很多可能的解决方案，但我使用的是通过过滤`HAVING`子句中的结果。

```
SELECT  advertisementID
FROM    TableName
GROUP   BY advertisementID
HAVING  SUM(CASE WHEN CategoryID IN ('A','B','C') THEN 1 ELSE 0 END) > 0 AND
        SUM(CASE WHEN CategoryID NOT IN ('A','B','C') THEN 1 ELSE 0 END) = 0 
```

*   [SQLFiddle 演示（*用于 A、B、C*）](http://www.sqlfiddle.com/#!2/e16ef/2)
*   [SQLFiddle 演示（*用于 A、D*）](http://www.sqlfiddle.com/#!2/e16ef/3)

简要说明，

```
SUM(CASE WHEN CategoryID IN ('A','B','C') THEN 1 ELSE 0 END) > 0 
```

它的作用是*计算*`CategoryID`给定列表中的匹配项。它应该在列表中至少有一个匹配项。另一个，

```
SUM(CASE WHEN CategoryID NOT IN ('A','B','C') THEN 1 ELSE 0 END) = 0 
```

它计算`CategoryID`给定列表中所有不匹配的内容。这一次，它的值应该为零，以便对结果进行过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:29:41.043

这就是所谓的集合内集合问题。我认为在任何类别中找到匹配项的最佳方法是以下方法：

```
select ADVERTISEMENTID
from t
group by ADVERTISEMENTID
having sum(case when categoryid = 'A' then 1 else 0 end) > 0 or
       sum(case when categoryid = 'B' then 1 else 0 end) > 0 or
       sum(case when categoryid = 'C' then 1 else 0 end) > 0 
```

换句话说，这是`advertisementid`对每个类别值进行汇总并进行单独比较。这些`sum()`陈述正在计算它存在的数量。`or`就是说这些中的任何一个都必须是真的。

对于子集关系，我再添加一个子句来计算不匹配项：

```
select ADVERTISEMENTID
from t
group by ADVERTISEMENTID
having (sum(case when categoryid = 'A' then 1 else 0 end) > 0 or
        sum(case when categoryid = 'B' then 1 else 0 end) > 0 or
        sum(case when categoryid = 'C' then 1 else 0 end) > 0
       ) and
       sum(case when categoryid in ('A', 'B', 'C') then 0 else 1 end) = 0 
```

我喜欢这种方法的原因是因为它很有表现力。如果我们将 更改`or`为`and`，那么我们要求所有三个类别：

```
select ADVERTISEMENTID
from t
group by ADVERTISEMENTID
having sum(case when categoryid = 'A' then 1 else 0 end) > 0 and
       sum(case when categoryid = 'B' then 1 else 0 end) > 0 and
       sum(case when categoryid = 'C' then 1 else 0 end) > 0 
```

如果我们想要至少两个匹配项，我们可以添加`count(distinct)`：

```
select ADVERTISEMENTID
from t
group by ADVERTISEMENTID
having (sum(case when categoryid = 'A' then 1 else 0 end) > 0 or
        sum(case when categoryid = 'B' then 1 else 0 end) > 0 or
        sum(case when categoryid = 'C' then 1 else 0 end) > 0
       ) and
       count(distinct categoryid) >= 2 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:08:17.400

在 sqlfiddle 中使用来自 @JW 的模式，另一个解决方案是：

```
SELECT matchacat.advertisementID
FROM   (select distinct advertisementID
        from   TableName
        where  CategoryID in ('A', 'D')) AS matchacat
LEFT JOIN
      (select distinct advertisementID
      from   TableName
      where  not CategoryID in ('A', 'D'))AS notmatch
ON    (matchacat.advertisementID = notmatch.advertisementID)
WHERE notmatch.advertisementID is null 
```

因此，获取至少匹配一只猫的广告集，然后获取具有不匹配猫的广告集，并使用外连接从第一集中删除第二集。

# java - 如何在运行时访问 jar 的内容？

> ID：15701880
> 
> 赞同：3
> 
> 时间：2013-03-29T10:57:42.113
> 
> 标签：java

如何访问已启动的 jar 文件的内容。我想创建一个包含我需要的所有内容的大 jar 文件，然后在运行时我想将我的 jar 的一些文件复制到外部文件夹中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:01:05.633

你想要[`this.getClass().getClassLoader().getResourceAsStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。例子：

```
InputStream config =
    this.getClass().getClassLoader().getResourceAsStream("config.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:08:03.940

JAR 中的文件不能作为文件访问，因此您必须使用 getResourceAsStream 来读取它们。请参阅[访问可执行 jar 中的文件和文件夹](https://stackoverflow.com/questions/11611704/access-files-and-folders-in-executable-jars)如何访问 jar 中的文件。

接下来，您使用输入流将文件写入文件系统。看：

*   [将 Java InputStream 的内容写入 OutputStream 的简单方法](https://stackoverflow.com/questions/43157/easy-way-to-write-contents-of-a-java-inputstream-to-an-outputstream)

*   [http://www.mkyong.com/java/how-to-convert-inputstream-to-file-in-java/](http://www.mkyong.com/java/how-to-convert-inputstream-to-file-in-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:00:29.657

您可以使用类加载器通过 ClassPath 访问任何文件。从 Class.getResourceAsStream 开始

# bash - Bash 案例没有正确评估价值

> ID：15701885
> 
> 赞同：-1
> 
> 时间：2013-03-29T10:57:47.480
> 
> 标签：bash, switch-statement

## 问题

我有一个脚本，其中包含我希望根据变量的值执行的 case 语句。case 语句似乎要么忽略该值，要么不正确评估它，而是放弃为默认值。

## 情景

我从我们的服务器主机名中提取了一个特定字符，它指示服务器在我们环境中的位置。我们有六个不同的地点：

*   管理（m）：作为基础设施一部分的服务器，例如监控、电子邮件、票务等
*   Development(d)：用于开发代码和应用程​​序功能的服务器
*   Test(t)：用于初始测试代码和应用程​​序功能的服务器
*   实施（i）：将代码推送到用于生产前评估的服务器
*   生产（p）：不言自明
*   服务：客户需要集成的服务器，在他们的项目中提供功能。这些与管理服务器是分开的，因为它们是客户服务器，而管理服务器由我们拥有和运营。

从主机名中提取字符后，我将其传递给 case 块。我希望 case 块能够评估字符并将几行文本添加到我们的 rsyslog.conf 文件中。发生的事情是 case 块返回默认值，除了告诉构建服务器的人由于无法识别的字符而手动配置条目之外什么都不做。

我已经针对我最近构建的服务器手动对此进行了测试，并验证了我从主机名（一个's'）中提取的字符是预期的并且在案例块中占了。

## 编码

```
# Determine which environment our server resides in
host=$(hostname -s)
env=${host:(-8):1}
OLDFILE=/etc/rsyslog.conf
NEWFILE=/etc/rsyslog.conf.new

# This is the configuration we need on every server regardless of environment
read -d '' common <<- EOF 
...
TEXT WHICH IS ADDED TO ALL CONFIG FILES REGARDLESS OF FURTHER CODE EXECUTION
SNIPPED
....
EOF

# If a server is in the Management, Dev or Test environments send logs to lg01
read -d '' lg01conf <<- EOF
# Relay messages to lg01
*.notice @@xxx.xxx.xxx.100
#### END FORWARDING RULE ####
EOF

# If a server is in the Imp, Prod or is a non-affiliated Services zone server send logs to lg02
read -d '' lg02conf <<- EOF
# Relay messages to lg02
*.notice @@xxx.xxx.xxx.101
#### END FORWARDING RULE ####
EOF

# The general rsyslog configuration remains the same; pull it out and write it to a new file
head -n 63 $OLDFILE > $NEWFILE

# Add the common language to our config file
echo "$common" >> $NEWFILE

# Depending on which environment ($env) our server is in, add the appropriate
# remote log server to the configuration with the $common settings.
case $env in
    m) echo "$lg01conf" >> $NEWFILE;;
    d) echo "$lg01conf" >> $NEWFILE;;
    t) echo "$lg01conf" >> $NEWFILE;;
    i) echo "$lg02conf" >> $NEWFILE;;
    p) echo "$lg02conf" >> $NEWFILE;;
    s) echo "$lg02conf" >> $NEWFILE;;
    *) echo "Unknown environment; Manually configure"
esac

# Keep a dated backup of the original rsyslog.conf file
cp $OLDFILE $OLDFILE.$(date +%Y%m%d)
# Replace the original rsyslog.conf file with the new version
mv $NEWFILE $OLDFILE 
```

## 旁白

我已经确定我可以使用 | 将 case 块中的不同代码组组合成单行（总共两行）。操作员。我已经按照上面的方式列出了它，因为这是我遇到问题时它的编码方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:05:38.433

我看不出你的代码有什么问题。也许`;;`在默认子句中添加另一个。要找到问题，请添加 a`set -vx`作为第一行。会显示很多调试信息。

# fpga - 佐世保 GII virtex5 fpga 配置

> ID：15701886
> 
> 赞同：0
> 
> 时间：2013-03-29T10:57:47.557
> 
> 标签：fpga, xilinx, jtag, gii, virtex

我正在使用带有两个 FPGA 的 Sasebo GII 板：Xilinx Spartan 和 Xilinx Virtex5（并且该板有几个单独的 JTAG 接口用于配置 fpgas）。

我在 Linux 下使用 ISE 14.4，但在配置 Virtex 5 FPGA 时遇到了一些麻烦。（斯巴达没有问题）。

我正在使用“影响”将配置文件发送到 FPGA。一开始 Impact 扫描电路板并发现 Spartan FPGA 没有问题，我可以对其进行配置，但是当我将电缆插入另一个接口并按下 Impact 上的扫描时，它说：

“检测到许多未知设备。按是继续或按否停止。”

如果我按下 NO 选项，那么显然什么也没有发生 :-) 如果我点击 YES 失败，我可以手动添加 Virtex5 FPGA，但它无法将配置文件上传到它（甚至在我尝试时失败）检测设备 ID）。

我已经尝试了板上所有的 JTAG 接口，没有。

使用 SPARTAN FPGA 在同一块板上进行相同的操作，所以我被卡住了。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:10:04.580

好吧，我不熟悉那个特定的电路板，但是当涉及到您的 JTAG 问题时，您可以研究很多事情。

*   检查 VCC 的电压，确保它对电路板具有良好的价值
*   确保您的接地连接良好，并且连接器的 GND 和电路板 GND 之间没有太大的阻抗
*   尝试其他 JTAG 连接器，看看您是否发现设备检测有任何差异。
*   尝试在调试模式下运行 IMPACT。捕获数据并查看模式是否正常

还有一点可能与 JTAG 无关，即确保您的 V5 设备具有所需的所有电源，如果有任何电源问题，可能会导致 JTAG 接口的行为与您在此处解释的一样。此外，查看板上是否有任何开关或跳线可以选择不同的配置 V5 设备的方式。这可能是多 FPGA 板的一个大问题，可能 V5 配置为从板上的控制器或其他设备进行编程，而 JTAG 链未设置用于编程。

这些只是不同的想法，它们可能会帮助您朝着正确的方向前进。

* * *

在他们的网站上找到了这个： [董事会用户指南](http://www.morita-tech.co.jp/SASEBO/pdf/SASEBO-GII_QuickStartGuide_Ver1.0_English.pdf)

> To reprogram the flash ROM (ST45DB16D, U11) for the control FPGA (Spartan-3A), attach the configuration cable to CN7\. For configuration, use the provided mcs file sasebo_gii_ctrl.mcs. Reprogram the flash ROM (ST45DB16D, U4) for the cryptographic FPGA (Virtex-5 LX30) with the provided mcs file sasebo_aes_comp_lx30.mcs as well. Connect the configuration cable to CN4. To configure the FPGA immediately after reprog ramming of the flash ROM, cycle the power. Blockquote

This means you can't program the FPGA directly, you need to convert your bit file into MCS file and then load it into the FLASH memory on the board.

# c++ - libstdc++ 私有 basic_streambuf 构造函数

> ID：15701892
> 
> 赞同：3
> 
> 时间：2013-03-29T10:58:29.180
> 
> 标签：c++, c++11, libstdc++

根据 libstdc++ c++11 [status page](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)，流缓冲区被标记为已完成。

然而，看看`<streambuf>`gcc 4.8 附带的构造函数和复制构造函数是`private`（第 799 行）。根据第 27.6.3 节，这些应该受到保护，当 `__cplusplus >= 201103L`在其他地方导致鼻恶魔时，将它们更改为受保护吗？它确实提到了[DR 50](http://www.open-std.org/jtc1/sc22/WG21/docs/lwg-defects.html#50)，如果有的话会导致什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T09:31:26.010

这看起来像是状态页面中的文档错误。

DR 50 是古老的历史，C++11 标准规定了复制操作的语义。

但是，它不像使 libstdc++ 的现有函数那么简单`protected`：赋值运算符不做任何事情，因此需要工作。但我看不出有什么原因会导致鼻恶魔，所以如果你提交一个[Bugzilla](http://gcc.gnu.org/bugs/)报告来提醒我们，它就会得到修复。

# c++ - 如何将“char”转换为“std::string”？

> ID：15701901
> 
> 赞同：-4
> 
> 时间：2013-03-29T10:58:59.750
> 
> 标签：c++, c, string, char

我正在尝试找到**如何将*char*数组转换为*std::string***，但我找不到任何东西可以做到这一点。

如果不可能，**你能解释一下我如何读取 std::string 但通过*scanf()*和*gets()*我不能**。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:01:29.790

从字符数组生成字符串的最简单方法是使用带有指针和长度的构造函数，如下所示：

```
char charArray[] = {'w', 'x', 'y', 'z'};
std:string s(&charArray[1], 2); // s is "xy"
//                ^         ^
//                |         |
//    Pointer to the        |
//    starting position   Length 
```

# python-3.x - Python 3.3：处理 inlineXML

> ID：15701906
> 
> 赞同：0
> 
> 时间：2013-03-29T10:59:17.110
> 
> 标签：python-3.x, xml-parsing, stanford-nlp, inline-xml

在尝试使用 stanford NRE 工具标记命名实体时，我得到了这种输出：

```
A jury in <ORGANIZATION>Marion County Superior Court</ORGANIZATION> was expected to begin deliberations in the case on <DATE>Wednesday</DATE> or <DATE>Thursday</DATE>. 
```

当然，处理任何没有根的 XML 是行不通的，所以我添加了这个：

```
<root>A jury in <ORGANIZATION>Marion County Superior Court</ORGANIZATION> was expected to begin deliberations in the case on <DATE>Wednesday</DATE> or <DATE>Thursday</DATE>.</root> 
```

我尝试使用这种方法构建一棵树：[使用 python 的 lxml 剥离内联标签，](https://stackoverflow.com/questions/6476548/stripping-inline-tags-with-pythons-lxml)但它不起作用......它在行上产生了这个错误`tree = etree.fromstring(text)`：

```
lxml.etree.XMLSyntaxError: xmlParseEntityRef: no name, line 1, column 1793 
```

有谁知道这个的解决方案？或者也许是另一种方法，它允许我从任何带有 inlineXML 标记的文本构建树，只保留标记的标记并删除/忽略文本的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:39:49.730

最后，我没有使用解析器或树，而是使用了正则表达式。这是运行良好且快速的代码：

```
import re
NER = ['TIME','LOCATION','ORGANISATION','PERSON','MONEY','PERCENT','DATA']
entities = {}
for cat in NER:
    regex_cat = re.compile('<'+cat+'>(.*?)</'+cat+'>')
    entities[cat] = re.findall(regex_cat,data) 
```

这里`data`只是一串文本。它使用正则表达式查找指定类别的所有实体，`NER`并将其作为列表存储在字典中。这可以用于所有 inlineXML 字符串，其中`NER`只是字符串中所有可能标记的列表。

# javascript - 无法捕获鼠标位置，因此无法捕获像素数据

> ID：15701907
> 
> 赞同：0
> 
> 时间：2013-03-29T10:59:27.183
> 
> 标签：javascript, jquery, canvas

现在重新发布问题更清楚了。

我所拥有的是一个页面，上面有 x 个图像。我想要做的是能够单击任何图像的任何部分，并使单击的图像中的特定颜色透明。`Turning its Alpha to 0`

所以，图像：

```
<div id="resizeImg" style="width:300px; left:50px;" class="pic">
    <img id="image" src="http://myurl.com/images/3727.jpg" width=300 />
</div>
<div id="resizeImg" style="width:300px; left:50px;" class="pic">
    <img id="image1" src="http://myurl.com/images/3728.jpg" width=300 />
</div>
<div id="resizeImg" style="width:300px; left:50px;" class="pic">
    <img id="image2" src="http://myurl.com/images/3729.jpg" width=300 />
</div> 
```

以下是我正在尝试的，检查员告诉我`ImageData { width=300, height=300, data=Uint8ClampedArray}`

当我单击`data=Uint8ClampedArray`查看其中的内容时，浏览器 (ff) 冻结并询问是否要停止脚本。

所以它陷入了一个循环，当我最终看到时，`data=Uint8ClampedArray it shows 0=255, 1=255, 2=255`即使我点击了红色的东西。

我认为问题在于捕获鼠标位置和点击的像素。

```
// get mouse position

function findPos(obj) {
    var current_left = 0,
        current_top = 0;
    if (obj.offsetParent) {
        do {
            current_left += obj.offsetLeft;
            current_top += obj.offsetTop;
        } while (obj = obj.offsetParent);
        return {
            x: current_left,
            y: current_top
        };
    }
    return undefined;
}

// click
$('[id^=image]').click(function (e) {
    var after = $(this)[0];
    after.src = white2transparent(after);
})

function white2transparent(img) {
    var c = document.createElement('canvas');
    var w = img.width,
        h = img.height;

    c.width = w;
    c.height = h;

    // get the position
    var position = findPos(img);
    var x = img.pageX - position.x;
    var y = img.pageY - position.y;
    var coordinate = "x=" + x + ", y=" + y;

    var ctx = c.getContext('2d');

    ctx.width = w;
    ctx.height = h;
    ctx.drawImage(img, 0, 0, w, h);
    var imageData = ctx.getImageData(0, 0, w, h);

    // show rgb colors in inspector
    console.log(imageData);

    var pixel = imageData.data;

    var r = 0,
        g = 1,
        b = 2,
        a = 3;
    for (var p = 0; p < pixel.length; p += 4) {
        if (
        // this is where I need to return the RGB found and replace 220
        pixel[p + r] >= 220 &&
            pixel[p + g] >= 220 &&
            pixel[p + b] >= 220) {
            pixel[p + a] = 0;
        }
    }

    ctx.putImageData(imageData, 0, 0);

    return c.toDataURL('image/png');
} 
```

这部分是我需要返回 clickde 像素的 RGB 并将 220 替换为每个值的地方

```
if (
    // this is where I need to return the RGB found and replace 220
      pixel[p+r] >= 220 &&
      pixel[p+g] >= 220 &&
      pixel[p+b] >= 220) 
```

**编辑**

当我尝试使用检查器查看坐标时：

```
// show x + y
console.log("x=" + x + ", y=" + y); 
```

它返回`x=NaN, y=NaN`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:50:01.800

如果你想找到鼠标相对于图像的位置，你应该像这样使用点击事件本身

```
$('[id^=image]').click(function (e) {
   // an array representing the relative x\y mouse coordinates within the image
   var relativeMousePosition=[e.pageX-$(this).offset().left,e.pageY-$(this).offset().top];

}) 
```

# apache2 - Zend Server 在 Zend Studio 10 启动时重置为默认值

> ID：15701913
> 
> 赞同：2
> 
> 时间：2013-03-29T10:59:45.567
> 
> 标签：apache2, port, zend-studio, zend-server, document-root

我在 Mac OS X Mountain Lion 上运行 Zend Server 6.0.1 和 Zend Studio 10。因为 Zend Servers Apache 在 Mac OS 上默认侦听端口 10088，所以我在 Apache 配置文件中将其更改为端口 80。此外，我将文档根目录更改为 /Users/username/Sites。两种更改都按应有的方式工作。

不幸的是，每次我启动 Zend Studio 10 时，它都会将我的 Zend 服务器检测为新服务器并自动配置它。它将我的 PHP 服务器设置重置为端口 10088 并删除 Zend 服务器密码。当我将检测到的服务器更改为我的真实设置（端口 80）时，它会持续更改，直到我重新启动 Zend Studio。

谁能告诉我如何让 Zend Server 知道它是 apache 监听端口 80 而不是 10088？这也将解决我的应用程序部署问题，它总是希望部署到 localhost:10088。

# c# - 如何在文本框中获取计算器金额

> ID：15701915
> 
> 赞同：0
> 
> 时间：2013-03-29T10:59:54.873
> 
> 标签：c#, calculator

我有一个应用程序，我想在单击按钮时打开一个计算器，一旦在计算器上执行操作并关闭计算器，我希望该值返回到我的文本框中。我怎样才能实现这个功能。

```
 private void btnDollarTransferHelp_Click(object sender, EventArgs e)
    {
        System.Diagnostics.Process myProcess = System.Diagnostics.Process.Start("calc.exe");
    } 
```

我正在使用 C# 4.0 及其基于窗口的应用程序。

问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:32:16.663

在你的应用程序中实现一个计算器确实更简单：读取另一个进程窗口的内容并非易事！并且在计算器“即将关闭”时收到通知更加困难。

它肯定涉及寡妇 API（FindMessage/SendMessage）（例如参见[https://stackoverflow.com/a/360247/863564](https://stackoverflow.com/a/360247/863564)），可能是[P/Invoke](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)，甚至可能是[挂钩 calc.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589%28v=vs.85%29.aspx)（Spy++ 使用的技术 - - 你需要它来捕获 WM_CLOSE 消息 - 在这里查看当你[关闭窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381396%28v=vs.85%29.aspx)时会发生什么）

（您需要捕获 WM_CLOSE，因为它是从窗口上的控件中获取结果的最新明智时刻）

所以，另一种选择：一个很棒的是[scriptcs](http://scriptcs.net/)，但它可能太多了！快速搜索发现
[了一些](http://flee.codeplex.com/)
[很棒的](http://ncalc.codeplex.com/)
[项目](http://csharpeval.codeplex.com/)

不管怎样，玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:23:42.487

您可以使用 Microsoft 脚本控件在您的 C# 应用程序中实现计算器功能。该控件有一个简单的 Eval() 方法来计算从简单的“2+2”到 VBScript 命令的表达式。更多信息在这里：

[http://msdn.microsoft.com/en-us/library/aa227637(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa227637(v=vs.60).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T10:01:30.180

您可以使用现有的库，例如[http://nclac.codeplex.com](http://nclac.codeplex.com)在您的应用程序中提供计算。

# unix - 复制一个四位数字，并在每行末尾加上前面的文本

> ID：15701922
> 
> 赞同：0
> 
> 时间：2013-03-29T11:00:09.317
> 
> 标签：unix, sed

基本上，我一直在想办法从每行中取出一个四位数字并将其粘贴到行尾，并在前面加上 pass 字样。IE

拿这个文件：

```
Home1234 10.10.10.1
Home1248 10.10.10.2 
Home0934 10.10.10.3 
Home0047 10.10.10.4 
```

之后应该是这样的：

```
Home1234 10.10.10.1 pass1234
Home1248 10.10.10.2 pass1248
Home0934 10.10.10.3 pass0934
Home0047 10.10.10.4 pass0047 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:04:29.880

你可以试试这个：

```
awk '{a=substr($1,5,4); print $0" pass"a}' YOUR_FILE 
```

*   `substr($1,5,4)``NNNN`从`HomeNNNN`var获取和存储`a`
*   `print $0" pass"a`打印所有行加上 var`a`

如果文本并不总是`Home`不同的大小，您可以使用：

```
awk '{a=substr($1,length($1)-3,4); print $0" pass"a}' YOUR_FILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:05:47.293

这个 awk one-liner 可以帮助你：

```
awk '{n=substr($1,length($1)-3);$0=$0" pass"n}1' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:01:39.673

你的问题没有很好地定义（你想用这样的输入做什么：`1234 5678 3333 10.3.5.5`？），但也许：

```
sed '/^\([^ ]*\([0-9]\{4\}\).*\)/s//\1 pass\2/' input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:41:04.490

使用 & 的另一个 sed 变体（粘贴所有匹配的内容）：

```
sed -ie 's/^.*\([0-9]\{4\}\).*/& pass\1/' yourfile 
```

# asp.net - 在单个按钮上插入/更新

> ID：15701927
> 
> 赞同：0
> 
> 时间：2013-03-29T11:00:21.630
> 
> 标签：asp.net, sql

我`modalpopup`有`textboxes`。
在用户到达之前`modal popup`，他要么单击添加要么编辑。
如果他点击添加，所有的`textboxes`都是空的，他可以添加一个新地址。
如果他单击编辑，则`textboxes`已经包含他的地址，他可以编辑他的地址。

现在我有一个 SAVE 按钮，我必须在该按钮上决定文本框中的数据是需要`INSERTED (ADDED)`还是`UPDATED (EDITED)`.
我如何实现这一目标？
我的意思是如何确定用户是否点击了添加或编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:06:09.717

将动作保持在视图中并检查它的值。

如果用户点击编辑然后在editclick

```
ViewStat["Action"]="Edit"; 
```

在保存按钮上检查视图状态值

```
if(ViewStat["Action"]!=null)
{
   if(ViewStat["Action"].ToString()=="Edit")
   {
     //update statement
   }
   else
   {
       //insert statement
   }
} 
```

您还可以在取消单击时将其设置为空或 null

```
ViewState["Action"]=null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:06:41.307

`hidden field`在你的页面中取一个。在添加按钮上单击将其值设置为`"0"`并在编辑按钮上单击将值设置为必须更新的记录的 id。您可以在服务器端检查隐藏字段的值以决定要做什么。

# java - 从 SCJP 6 书理解多线程

> ID：15701930
> 
> 赞同：3
> 
> 时间：2013-03-29T11:00:42.553
> 
> 标签：java, multithreading

以下代码在 SCJP6 书中

```
class ThreadA {
    public static void main(String [] args) {
        ThreadB b = new ThreadB();
        b.start();

        synchronized(b) {
            try {
                System.out.println("Waiting for b to complete...");
                b.wait();
            } catch (InterruptedException e) {}
            System.out.println("Total is: " + b.total);
        }
    }
}

class ThreadB extends Thread { 
     int total;

     public void run() {
         synchronized(this) {
             for(int i=0;i<100;i++) {
                 total += i;
             }
             notify();
         }
     }
 } 
```

前面的代码不会导致死锁，因为线程 a 和 b 都在 b 上锁定（在各自的同步块中）？

我错过了一些东西，但不太确定它是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:05:16.540

最可能的执行如下：

*   `b.start()`和`run`正在执行的方法之间有一点延迟
*   因此，主线程设法获得锁`b`并进入`synchronized`块
*   然后它等待`b`（**释放锁**）
*   当`run`开始执行时，监视器可用（或将很快可用），因此它可以进入`synchronized`块
*   完成后通知`b`它可以停止等待
*   主线程完成。

`run`但是，根据线程调度，先执行也不是不可能，在这种情况下，主线程可能会永远等待`b.wait()`。例如，如果您通过`Thread.sleep(100)`在 之后插入一个小的来帮助这种情况`b.start()`，您应该观察这种行为。

Bottom line: it is a smelly code that could encounter liveness issues (it is not a deadlock per se since the lock is available).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T11:05:09.410

这取决于。

从[等待](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)方法的文档中 -

> 使当前线程等待，直到另一个线程为此对象调用 notify() 方法或 notifyAll() 方法。换句话说，此方法的行为与它只是执行调用 wait(0) 完全相同。
> 
> 当前线程必须拥有该对象的监视器。线程释放此监视器的所有权并等待，直到另一个线程通过调用 notify 方法或 notifyAll 方法通知在此对象的监视器上等待的线程唤醒。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。

所以，如果你考虑这两种情况 -

*   如果先`ThreadA`获得对象的锁`b`，它会等待，导致锁的释放，这将导致`ThreadB`它继续工作。
*   如果`ThreadB`先获得锁，那么它会继续工作，释放锁，然后`ThreadA`开始。接下来，`ThreadA`将等待对象 lock `b`，这可能会导致它永远等待。

# python - ListCtrl 设置字符串项

> ID：15701934
> 
> 赞同：0
> 
> 时间：2013-03-29T11:00:59.423
> 
> 标签：python, list, wxpython

我有一个字符串数组说`['Hello World', 'Goodbye Universe', Let's go to the mall']`，我想放入 ListCtrl 怎么我的代码只打印出数组中每个索引的某些字母。我的代码：

```
self.list = wx.ListCtrl(panel,size=(1000,1000))
self.list.InsertColumn(0,'Rules')
for i in actualrules:
    self.list.InsertStringItem(sys.maxint, i[0]) 
```

实际规则是数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:32:36.043

您的列表 actualrules 在其中一个字符串中有一个单引号，因此您应该用双引号将其括起来，如下所示。

```
 actualrules = ['Hello World', 'Goodbye Universe',
                   "Let's go to the mall"] 
```

在您的 for 循环中，我成为列表的每个项目，然后您通过执行 i[0] 仅获取第一个字母

以下是您的列表的一个工作示例

```
import sys
import wx

class TestFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(TestFrame, self).__init__(*args, **kwargs)

        actualrules = ['Hello World', 'Goodbye Universe',
                       "Let's go to the mall"]

        panel = wx.Panel(self)
        self.list = wx.ListCtrl(panel, size=(1000, 1000), style=wx.LC_REPORT)
        self.list.InsertColumn(0, 'Rules')
        for i in actualrules:
            self.list.InsertStringItem(sys.maxint, i)

        pSizer = wx.BoxSizer(wx.VERTICAL)
        pSizer.Add(self.list, 0, wx.ALL, 5)
        panel.SetSizer(pSizer)

        vSizer = wx.BoxSizer(wx.VERTICAL)
        vSizer.Add(panel, 1, wx.EXPAND)
        self.SetSizer(vSizer)

if __name__ == '__main__':
    wxapp = wx.App(False)
    testFrame = TestFrame(None)
    testFrame.Show()
    wxapp.MainLoop() 
```

# asp.net - ASP.NET MVC4 代码优先 - “无法将文件附加为数据库”异常

> ID：15701935
> 
> 赞同：4
> 
> 时间：2013-03-29T11:01:01.850
> 
> 标签：asp.net, database, entity-framework, asp.net-mvc-4, ef-code-first

我在实体框架中使用 Code First 概念，并且在启动应用程序时不断收到以下异常：

```
Cannot attach the file 'C:\Users\Admin\Documents\Visual Studio 2012\
Projects\Pro\Pro.Web\App_Data\Pro.mdf' as database 'Pro'. 
```

我已经把它放进去了，`Global.asax.cs`但也没有成功：

```
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<ProWebContext>());
        var ctx = new ProWebContext();
        ctx.Database.Initialize(true); 
```

我在 App_Data 目录下检查过，没有创建数据库。此外，在服务器资源管理器下，数据连接下没有任何内容。昨天一切正常，今天根本不工作。我尝试使用 SQL Server Management Studio 连接到 LocalDB，但它说它无法连接到本地数据库。任何想法可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:00:38.483

我找到了解决方案。使用最新的 SQL Server Management Studio，连接到本地数据库没有问题。需要像这样建立连接：

![在此处输入图像描述](../Images/9bc5af0ab50ce066eb5e4c26a0d35b3b.png)

登录后，我们仍然可以看到旧数据库存在，即使 App_Data 目录下和 Visual Studio 服务器资源管理器中的数据连接下没有任何内容。当我们从 SQL Server Management Studio 中删除该数据库并再次启动应用程序时，附加数据库时将不再出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T18:58:05.770

我刚遇到同样的问题，但上面的答案有所帮助，解决方案不同。

就我而言，我正在重用一个已经创建了它的数据库的项目。而且由于配置中的名称相同，因此引发了异常，从而误导了真正的解决方案。

值得检查的是数据库没有被创建并且与你之前使用的不同。更改名称并继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T19:30:30.043

当我看到这个时，我遇到了同样的错误，但我无法使用 SQL Server Management Studio 删除数据库，所以我记得`IDatabaseInitializer`。

为我的 Code First 上下文设置数据库初始化程序解决了这个问题。在我的情况下，添加一个初始化程序以始终删除数据库工作（我在我的上下文的静态构造函数中添加了代码，大多数人在 Global.asax 中添加它）：

```
 static SomeDbContext()
    {
        System.Data.Entity.Database.SetInitializer(new DropCreateDatabaseAlways<SomeDbContext>());
    } 
```

当然还有其他初始化程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T17:43:46.500

我手动删除了 mdf 文件，因此代码将再次重新创建它，并且遇到了同样的问题。我通过在包管理器控制台中运行 update-database 命令解决了这个问题。

# c++ - 动态数组和运算符重载导致内存崩溃

> ID：15701938
> 
> 赞同：0
> 
> 时间：2013-03-29T11:01:14.333
> 
> 标签：c++, arrays, dynamic, memory-leaks, operator-overloading

为了说明我的问题，我最小化了我的来源：

```
#include <iostream>
class vec{
    public:
    float* X;
    int DIM;
    vec(int dimension)
    {
        DIM = dimension;
        X = new float[dimension];
        for (int i=0;i<DIM;i++)
            X[i] = (float) rand()/RAND_MAX;
    }
    ~vec(void){
        delete [] X;
    }

    vec operator-( vec const& rhs )
    {
        vec ans(DIM);
        for (int i=0;i<DIM;i++)
            ans.X[i] = X[i] - rhs.X[i];
        return ans;
    }
};

int main(){
    vec A(5),B(5),C(5);
    C= A-B;
    return 0;
} 
```

当我执行这个程序时，我得到一个堆被破坏的错误。我很确定析构函数是我的问题。带有`C= A-B;`变量的行`ans`会被构造函数销毁，无法返回。是对的吗？如果我删除该行`delete [] X;`一切正常。但它不会释放内存。

我做了功课，并针对这个问题咨询了最著名的搜索引擎之一，但没有找到任何答案。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:03:08.730

`C = A-B`调用默认的复制分配运算符（因为您还没有定义一个）。因此，两个不同的对象将指向同一个动态分配的数组。

You need to read up on the [*Rule of Three*](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three) (in a nutshell: if you define any of the destructor, the copy constructor or the copy-assignment operator, you probably need to define them all).

But preferably, you should avoid using raw arrays entirely; use a container type that manages its own memory.

# formula - Sql Server Analysis Services 中的 DAX 公式

> ID：15701939
> 
> 赞同：0
> 
> 时间：2013-03-29T11:01:19.683
> 
> 标签：formula, dax, ssas-2012

我是 DAX 新手，如何从下表中计算特定玩家的跑动数。我的表名**PlayersData**。例如，要从表中计算 sachin tendulkar 的总运行次数。需要 Dax 公式..

我试过这个来获得表格中出现的virat Kohli：

```
:=COUNTROWS(VALUE(PlayersData[Name] = "Virat Kohli")) 
```

但是，它显示错误..

提前致谢...

![表格](../Images/4df865a8f03be64c849f1f3301de20cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:56:26.343

最后，查询给出了我需要的结果：

**TotalRunsOfKohli:=CALCULATE(SUM('Players Data'[Runs]),'Players Data'[Name]="Virat Kohli")**

# php - JS 包含在包含的 .php 文件中

> ID：15701941
> 
> 赞同：0
> 
> 时间：2013-03-29T11:01:28.977
> 
> 标签：php

我在我的主页上包含了一个 PHP 文件，在 php 文件中还有一个 .js 文件的包含，包含的 php 文件与主页位于不同的目录中，因此找不到包含的 .js 文件。

可视化：

*   主页 - 根
*   包含的 PHP 文件 - 位于文件夹 A 中的文件 A
*   文件 A 中包含的 JS 文件位于文件夹 A 中

但它在根目录而不是文件夹 A 中寻找 .js 文件

我如何获得正确的路径？

它也应该是动态的，我可能不知道文件夹 A 的实际名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:13:04.880

网站：www.yoursite.com

文件夹：

*   /index.php
*   /lib/header.php
*   /联系人/index.php
*   /js/main.js

假设您想将 /js/main.js 文件包含在 /lib/header.php 中，以便在包含 /lib/header.php 的任何地方工作，例如在 /index.php 和 /contacts/index.php 中。

您将在 /lib/header.php 中包含以下内容：

```
<script src="http://www.yoursite.com/js/main.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:03:28.207

使用 .. 表示法遍历文件夹

路径将是`'../script.js'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:16:19.553

如果 include.php 和 xyz.js 在同一个目录中。比

像这样在 include.php 中包含 .js 文件——

```
<script type="text/javascript" language="javascript" src="xyz.js"></script> 
```

如果它不起作用，那么您应该像这样使用相对 URL/SITE URL -

```
<script type="text/javascript" language="javascript" src="http://localhost/folder/xyz.js"></script> 
```

# mysql - MySQL 按 2 列分组，但按特定顺序返回

> ID：15701948
> 
> 赞同：1
> 
> 时间：2013-03-29T11:01:45.613
> 
> 标签：mysql, sql, select, join, greatest-n-per-group

我已经看到了类似问题的答案，但找不到解决此问题的方法。

我需要从三个表中选择相册、单张照片和用户详细信息。我只想为每个用户返回最近的专辑。尝试分组和 SELECT DISTINCT 查询后，我找不到这样做的方法。这是我当前的查询，除了返回来自同一用户的多个专辑外，它工作正常：

```
SELECT 
gallery_albums.title, gallery_albums.siteID, gallery_albums.albumID, gallery_albums.albumDate, gallery_photos.photoID, gallery_albums.userID
FROM gallery_albums, users, gallery_photos
WHERE users.userID = gallery_albums.userID 
AND gallery_photos.albumID = gallery_albums.albumID
GROUP BY gallery_albums.albumID
ORDER BY gallery_albums.albumDate DESC 
LIMIT 0 , 30 
```

工作守则

这是对 aarthi_ram 建议的解决方案的轻微修改

```
SELECT * 
  FROM (
       SELECT gallery_albums.title, gallery_albums.siteID, gallery_albums.albumID, gallery_albums.albumDate, gallery_photos.photoID, gallery_albums.userID, users.fName, users.lName
    FROM gallery_albums, users, gallery_photos
    WHERE users.userID = gallery_albums.userID
    AND gallery_photos.albumID = gallery_albums.albumID
    GROUP BY gallery_albums.albumID
    ORDER BY gallery_albums.albumDate DESC  
  ) AS newTable
  GROUP BY userID
  ORDER BY albumDate DESC
  LIMIT 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:37:04.980

很难想象您的表的架构，但我猜每个表中都有*auto_increment 列*。一个`user`可以有多个`gallery_albums`，也可以包含多个`gallery_photos`。

```
SELECT  a.*, b.*, c.*
FROM    users a
        INNER JOIN gallery_albums b
            ON a.userID = b.userID 
        INNER JOIN gallery_photos c
            ON b.albumID = c.albumID 
        INNER JOIN
        (
            SELECT  userID, MAX(ID) max_ID
            FROM    gallery_albums
            GROUP   BY userID
        ) d ON  b.userID = d.userID AND
                b.ID = d.max_ID
        INNER JOIN
        (
            SELECT  albumID, MAX(ID) max_ID
            FROM    gallery_photos
            GROUP   BY albumID
        ) e ON  c.albumID = e.albumID AND
                c.ID = e.max_ID
ORDER   BY b.albumDate DESC
LIMIT   0, 30 
```

如您所见，`ID`在两个子查询中使用了名为 used 的列：`d`和`e`. 这些列是每个表上的*auto_incremented 列*。如果您有定义其状态的日期列，无论它们是否是最近的，您也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:39:02.037

因此，您正在寻找分组最大值。有几种方法可以解决这个问题。在这种情况下，这样的事情应该起作用：

```
SELECT 
gallery_albums.title, gallery_albums.siteID, gallery_albums.albumID, gallery_albums.albumDate, gallery_photos.photoID, gallery_albums.userID
FROM gallery_albums
LEFT JOIN gallery_albums ga2 ON gallery_albums.albumID = ga2.albumID AND gallery_albums.albumDate < ga2.albumDate
JOIN gallery_photos ON gallery_photos.albumID = gallery_albums.albumID
JOIN users ON users.userID = gallery_albums.userID
WHERE ga2.albumID IS NULL
ORDER BY gallery_albums.albumDate DESC 
```

`gallery_albums ga2`结合条件的 LEFT JOIN`ga2.albumID IS NULL`可以保证您只获得最新专辑。

您可以在 MySQL 文档中找到[另外两个解决方案。](http://dev.mysql.com/doc/refman/5.6/en/example-maximum-column-group-row.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:39:15.067

```
SELECT TOP 1 * FROM (SELECT 
gallery_albums.title, gallery_albums.siteID, gallery_albums.albumID,gallery_albums.albumDate, gallery_photos.photoID, gallery_albums.userID
FROM gallery_albums, users, gallery_photos
WHERE users.userID = gallery_albums.userID 
AND gallery_photos.albumID = gallery_albums.albumID
GROUP BY gallery_albums.albumID
ORDER BY gallery_albums.albumDate DESC 
LIMIT 0 , 30); 
```

可能会奏效。这将有助于从查询生成的结果集中检索第一行。

# php - 多选项表单问题

> ID：15701950
> 
> 赞同：1
> 
> 时间：2013-03-29T11:02:08.527
> 
> 标签：php

嗨，我在 php 中有一个包含多个选项的表单，但它似乎不起作用。我的意思是表单的工作原理是我可以选择多个选项，但是当我处理帖子时，它并没有给我任何东西。这是我的表格（效果很好）

```
print"<select name='Category' size='4' multiple='multiple'>\n";
$db = adodbConnect();
$query = "Select * From nodes";
$result = $db -> Execute($query);
while($row=$result->FetchRow())
{
$cat = $row['id'];
$desc =$row['name'];
print "<option value='$cat'>$desc</option>\n";
}
print "</select>\n"; 
```

这是问题所在，我尝试使用 foreach 来检索选定的选项，但它不会给我任何东西。mysql 的东西是查询工作正常，我以前用过它们，但我试图获取多个值，现在它什么也没做。

```
foreach($_GET['Category'] as $category){
if($category != NULL){
$querytwo = "insert into relationships(id,goingto,data)".
"values(LAST_INSERT_ID(),'$category','')";
$resulttwo = $db -> Execute($querytwo);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:10:02.357

如我所见，您正在使用多个选项选择，因此您需要将选择元素的名称设置为此 name='Category[]'

尝试应用此更改并告诉我结果:)

# python - 使用 matplotlib quiver 更改箭头的大小

> ID：15701952
> 
> 赞同：11
> 
> 时间：2013-03-29T11:02:20.670
> 
> 标签：python, matplotlib

我正在使用 matplotlib 中的 quiver 来绘制矢量场。我想根据产生矢量场的特定箭头的数据数量来更改每个箭头的粗细大小。因此，我要寻找的不是箭头大小的一般比例转换，而是在 quiver 中逐一自定义箭头粗细的方法。是否可以？你能帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T11:20:53.820

控制箭头粗细的参数`linewidths`。`plt.quiver`如果将一维数组值传递给它，则每个箭头的粗细都不同。

例如，

```
widths = np.linspace(0, 2, X.size)
plt.quiver(X, Y, cos(deg), sin(deg), linewidths=widths) 
```

创建从 0 到 2 的线宽。

* * *

```
import matplotlib.pyplot as plt
import numpy as np
sin = np.sin
cos = np.cos

# http://stackoverflow.com/questions/6370742/#6372413
xmax = 4.0
xmin = -xmax
D = 20
ymax = 4.0
ymin = -ymax
x = np.linspace(xmin, xmax, D)
y = np.linspace(ymin, ymax, D)
X, Y = np.meshgrid(x, y)
# plots the vector field for Y'=Y**3-3*Y-X
deg = np.arctan(Y ** 3 - 3 * Y - X)
widths = np.linspace(0, 2, X.size)
plt.quiver(X, Y, cos(deg), sin(deg), linewidths=widths)
plt.show() 
```

产量

![在此处输入图像描述](../Images/e8adc1b87b1d6a717fac9eb6d9325356.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-29T17:48:06.310

@unutbu 的解决方案在 matplotlib 2.0.0 之后没有用（请参阅[此问题](https://github.com/matplotlib/matplotlib/issues/8630)和[此拉取请求](https://github.com/matplotlib/matplotlib/pull/6904)）。从 matplotlib 2.1.2 开始，似乎没有`plt.quiver`哪个参数正式支持箭头宽度的一对一配置。但是仍然存在一些解决方法。

### 方法一

只需使用 Python 的循环和`width`参数。这对于大数据来说会很慢。

```
import matplotlib.pyplot as plt
import numpy as np

# original code by user423805
# https://stackoverflow.com/a/6372413/5989200
xmax = 4.0
xmin = -xmax
D = 20
ymax = 4.0
ymin = -ymax

for y in np.linspace(ymin, ymax, D):
    for x in np.linspace(xmin, xmax, D):
        deg = np.arctan(y ** 3 - 3 * y - x)
        w = 0.005 * (y - ymin) / (ymax - ymin)  # just example...
        plt.quiver(x, y, np.cos(deg), np.sin(deg), width=w)

plt.show() 
```

[![上述代码的结果图像](../Images/d2ba35f24fe746368c32b51251e8f04f.png)](https://i.stack.imgur.com/Bu7Ja.png)

### 方法二

这只是一种解决方法，但`linewidths`如果我们设置`edgecolors`.

```
import matplotlib.pyplot as plt
import numpy as np

# original code by user423805
# https://stackoverflow.com/a/6372413/5989200
xmax = 4.0
xmin = -xmax
D = 20
ymax = 4.0
ymin = -ymax
x = np.linspace(xmin, xmax, D)
y = np.linspace(ymin, ymax, D)
X, Y = np.meshgrid(x, y)
deg = np.arctan(Y ** 3 - 3 * Y - X)
widths = np.linspace(0, 2, X.size)
plt.quiver(X, Y, np.cos(deg), np.sin(deg), linewidths=widths, edgecolors='k')
plt.show() 
```

[![上述代码的结果图像](../Images/a2303c550dc3a062c253889ab291d85d.png)](https://i.stack.imgur.com/jma1f.png)

请注意，matplotlib 的维护者之一 efiring[说](https://github.com/matplotlib/matplotlib/issues/8630#issuecomment-301885921)：

> 所以请把`width`kwarg 和 ; 一起使用`units`。`linewidths`仅用于控制轮廓粗细，当明确要求不同颜色的轮廓时。

# list - 为资源列表生成的 WADL

> ID：15701953
> 
> 赞同：6
> 
> 时间：2013-03-29T11:02:23.703
> 
> 标签：list, jaxb, jersey, jax-rs, wadl

我正在为以下问题苦苦挣扎几天。我在 SO、泽西邮件列表和一般网络中搜索了很多答案，但无法找到这个特定问题的答案。

设置问题域...

我在 Tomcat 7 中使用 Jersey 1.16。

我创建了一个简单的 JAX-RS 资源，如下所示：

```
@Path("/")
@Produces({ "application/xml", "text/plain" })
public class ExampleResource {

    @GET
    public List<Thing> getThings() {
        List<Thing> list = new ArrayList<>();
        list.add(new Thing("a thing 1", "a thing description 1"));
        list.add(new Thing("a thing 2", "a thing description 2"));

        return list;
    }

} 
```

`Thing`是一个看起来像这样的 JAXB 注释 POJO

```
 @XmlRootElement(name = "thing")
        public class Thing {
            private String name;        
            private String description;
// getters, setters and @XmlElement annotations ommited for brevity 
```

我也配置了`WadlGeneratorJAXBGrammarGenerator.class`

当我要求它时，`GET http://localhost:8092/rest`它就像一个魅力 - 返回格式良好的集合`Thing`。

自动生成的 WADL`http://localhost:8092/rest/application.wadl`几乎是完美的，它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<application xmlns="http://wadl.dev.java.net/2009/02">
    <doc xmlns:jersey="http://jersey.java.net/" jersey:generatedBy="Jersey: 1.16 11/28/2012 02:09 PM" />
    <grammars>
        <include href="application.wadl/xsd0.xsd">
            <doc title="Generated" xml:lang="en" />
        </include>
    </grammars>
    <resources base="http://localhost:8092/rest/">
        <resource path="/">
            <method id="getThings" name="GET">
                <response>
                    <ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02"
                        xmlns="" element="thing" mediaType="application/xml" />
                    <representation mediaType="text/plain" />
                </response>
            </method>
        </resource>
    </resources>
</application> 
```

就像我说的，几乎完美，这就是问题所在。

```
<ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02"
                            xmlns="" element="thing" mediaType="application/xml" /> 
```

WADL 没有描述`/getThings`返回一个`List<Thing>`. 相反，它看起来像是在`thing`引用`xsd0.xsd`. 因此，当我将它输入到 wadl2java 中时，它会生成无类型的客户端。为了得到一个`List<Thing>`我必须手动编码它，比如

`List<Thing> asXml = root().getAsXml(new GenericType<List<Thing>>(){});`

有谁知道是否可以自动生成 WADL，以某种方式表明该特定资源正在返回特定类型的资源**列表？**

而且我**不想**创建额外的“ThingList”JAXB 注释类并将其返回到我的球衣资源中。

我几乎可以生成“完美”的 WADL，我缺少的正是这个（希望如此）小片段......

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-22T18:02:39.630

我遇到了同样的问题，并通过生成自己的 WADL 来解决它。

为此，您需要将以下文件添加到您的项目中

application-doc.xml 用于高级 WADL 概述注释

application-grammers.xml，它定义了你的模式的位置（你的 Things 和 Thing 元素和 complextypes ）

resourcedoc.xml ，这是由一个 maven 插件生成的，它读取你的球衣类，其中包含你的响应元素 javadoc 注释。

只需将此 HrWadlGeneratorConfig 类添加到您的项目中，并将其作为 init 参数添加到 jersey servlet

```
 <init-param>
        <param-name>com.sun.jersey.config.property.WadlGeneratorConfig</param-name>
        <param-value>nl.amis.hr.wadl.HrWadlGeneratorConfig</param-value>
    </init-param> 
```

班级

```
 package nl.amis.hr.wadl;                                                                                        

 import com.sun.jersey.api.wadl.config.WadlGeneratorConfig;                                                      
 import com.sun.jersey.api.wadl.config.WadlGeneratorDescription;                                                 
 import com.sun.jersey.server.wadl.generators.WadlGeneratorApplicationDoc;                                       
 import com.sun.jersey.server.wadl.generators.WadlGeneratorGrammarsSupport;                                      
 import com.sun.jersey.server.wadl.generators.resourcedoc.WadlGeneratorResourceDocSupport;                       
 import com.sun.research.ws.wadl.Grammars;                                                                       
 import com.sun.research.ws.wadl.Include;                                                                        
 import com.sun.research.ws.wadl.ObjectFactory;                                                                  

 import java.util.List;                                                                                          

 public class HrWadlGeneratorConfig extends WadlGeneratorConfig {                                                

     @Override                                                                                                   
     public List<WadlGeneratorDescription> configure() {                                                         
         ObjectFactory obj = new ObjectFactory()  ;                                                              
         Grammars gram = obj.createGrammars();                                                                   
         Include e = obj.createInclude();                                                                        
         e.setHref("schema.xsd");                                                                                
         gram.getInclude().add(e);                                                                               

         WadlGeneratorConfigDescriptionBuilder builder = generator(WadlGeneratorApplicationDoc.class)            
         .prop( "applicationDocsStream", "application-doc.xml" )                                                 
         .generator( WadlGeneratorGrammarsSupport.class )                                                        
         .prop( "grammarsStream", "application-grammars.xml" )                                                   
         .generator( WadlGeneratorResourceDocSupport.class )                                                     
         .prop( "resourceDocStream", "resourcedoc.xml" );                                                        

         return builder.descriptions();                                                                          

     }                                                                                                           

 } 
```

这是 Jersey 类的片段，@response.representation.200.qname 指向您自己的 schema.xsd 中的元素

```
 /**
  * Returns the item if existing. 
  * 
  * @response.representation.200.qname employees
  * @response.representation.200.mediaType application/xml,application/json
  * @response.representation.200.doc This is the representation returned by default
  * @response.representation.200.example {@link EmployeeExample#SAMPLE_ITEM}
  *
  *
  * @return the requested item if this service is available
  */
  @GET
  public List<Employee> getEmployees() {
     return  hrBean.getEmployeesFindAll();
  } 
```

以及生成我们由 WADL 生成器使用的 resourcedoc.xml 的 maven pom。

```
 <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.4</version>
            </plugin>
        </plugins>
  </pluginManagement>                                                                                                                   

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>javadoc</goal>
                    </goals>
                    <phase>compile</phase>
                </execution>
            </executions>
            <configuration>
                <encoding>UTF-8</encoding>
                <verbose>false</verbose>
                <show>public</show>
                <subpackages>nl.amis.hr.restful</subpackages>
                <doclet>com.sun.jersey.wadl.resourcedoc.ResourceDoclet</doclet>
                    <docletPath>${path.separator}${project.build.outputDirectory}</docletPath>
                    <docletArtifacts>
                    <docletArtifact>
                          <groupId>nl.amis.hr</groupId>
                          <artifactId>Model</artifactId>
                          <version>1.0-SNAPSHOT</version>
                    </docletArtifact>
                    <docletArtifact>
                        <groupId>com.sun.jersey.contribs</groupId>
                        <artifactId>wadl-resourcedoc-doclet</artifactId>
                        <version>1.17.1</version>
                    </docletArtifact>
                    <docletArtifact>
                        <groupId>com.sun.jersey</groupId>
                        <artifactId>jersey-server</artifactId>
                        <version>1.17.1</version>
                    </docletArtifact>
                    <docletArtifact>
                        <groupId>xerces</groupId>
                        <artifactId>xercesImpl</artifactId>
                        <version>2.6.1</version>
                    </docletArtifact>
                </docletArtifacts>
                <!-- the following option is required as a work around for
                     version 2.5 of the javadoc plugin which will be used
                     by a maven version > 2.0.9 -->
                <useStandardDocletOptions>false</useStandardDocletOptions>
                <additionalparam>-output ${project.build.outputDirectory}/resourcedoc.xml</additionalparam>
            </configuration>
        </plugin> 
```

这是 github 上的完整示例 [https://github.com/biemond/JDeveloper12c_12.1.2/tree/master/RestFulOWSM/WebService](https://github.com/biemond/JDeveloper12c_12.1.2/tree/master/RestFulOWSM/WebService)

# php - 如何重定向到网站的子目录

> ID：15701960
> 
> 赞同：1
> 
> 时间：2013-03-29T11:02:59.643
> 
> 标签：php, redirect, apache

我有一个常见问题解答数据库/网络应用程序，我想将其设置为另一个网站的子目录。例如，我的主要网站是：

www.domain.com

我希望人们输入：

www.domain.com/FAQs

FAQ 数据库的文件来自：

/var/www/常见问题解答

我是编辑 httpd.conf 还是创建某种类型的 .htaccess 文件来创建这种类型的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:06:17.527

如果域的服务器根文件夹已经是 /var/www/ 那么你不需要做任何事情。只需创建 FAQs 目录并在其中粘贴一个索引文件。

但是请注意，对于大多数平台，URL 是区分大小写的。

# ajax - 为什么我必须发出两次 AJAX 请求才能显示 primefaces 我正在使用 primefaces 来显示一组动态列，如下所示： <p:datatable value="#{queryResults}" var="row" style="margin-top:15px;">问问题 问问题 2013-03-29T11:03:03.577 555 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 primefaces 来显示一组动态列，如下所示： <p:datatable value="#{queryResults}" var="row" style="margin-top:15px;"></p:datatable>我的环境是 Tomcat 7 上的 Majorra 2.0.3、PF 3.5、Spring Webflow 2.3 当我点击命令按钮时，我得到了部分响应，但表格没有单元格：即使调用了 java 代码，也会按预期返回行。我第二次按下按钮，调用了相同的 java 代码，但部分响应包含数据表及其单元格，因此它正确显示...... 我想念什么？ 注意：结合数据表+几列，一切正常...... 尝试<p:datatable>单独<h:form>为我解决问题。 ajaxjsf-2primefacesspring-webflow 4 2 回答 2 This answer is useful 0 解决方案是：以下：（阅读手册） p:columns 仅用于显示标题和创建索引变量（columnIndexVar），允许您以“旧式”索引方式访问数据。 手册说： 动态列 如果您不知道要渲染多少列，动态列很方便。Columns 组件用于以编程方式定义列。它需要一个集合作为值，两个迭代器变量称为 var 和 columnIndexVar。<p:datatable var="cars" value="#{tableBean.dynamicCars}" id="carsTable"><p:columns value="#{tableBean.columns}" var="column" columnindexvar="colIndex"><f:facet name="header"></f:facet></p:columns></p:datatable>于 2013-12-11T10:05:33.653 回答 This answer is useful 0 尝试<p:datatable>单独<h:form>为我解决问题。 于 2013-10-08T09:12:34.290 回答 Related 1 ajax - Chrome 扩展 - 发出跨域 AJAX 请求 1 c - 如何在 C 中为嵌入式系统定义堆栈地址范围 1 java-ee-6 - 在集群中的每个节点上运行 EJB 计时器 1 performance - open omp slower than without it 1 php - Always run a specific function in Symfony before saving Entity 3 design-patterns - 设计模式 - 回调 2 c# - Prevent context-switching in timed section of code (or measure then subtract time not actually spent in thread) 0 node.js - 无法访问 postgres 数据库，查询似乎不起作用 1 sql - 关于（过于复杂？）模式的 SQL 架构建议 0 android - 如何在 cocos2d Android 中支持多分辨率？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</h:form></p:datatable></h:form></p:datatable></p:datatable>

> ID：15701961
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ajax, jsf-2, primefaces, spring-webflow

我正在使用 primefaces 来显示一组动态列，如下所示：

```
 <p:dataTable value="#{queryResults}" var="row" style="margin-top:15px;">
         <p:columns value="#{row.cells}" var="cell" headerText="#{cell.field.label}" rendered="#{not cell.field.hidden}">
               <h:outputText value="#{cell.value}" />
          </p:columns>
    </p:dataTable> 
```

我的环境是 Tomcat 7 上的 Majorra 2.0.3、PF 3.5、Spring Webflow 2.3

当我点击命令按钮时，我得到了部分响应，但表格没有单元格：

```
 <div id="alertForm:j_idt58" class="ui-datatable ui-widget" style="margin-top:15px;">
          <table role="grid"><thead><tr role="row"></tr></thead><tfoot></tfoot>
          <tbody id="alertForm:j_idt58_data" class="ui-datatable-data ui-widget-content">
              <tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"></tr>
              <tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"></tr>
              <tr data-ri="2" class="ui-widget-content ui-datatable-even" role="row"></tr>
              <tr data-ri="3" class="ui-widget-content ui-datatable-odd" role="row"></tr>
          </tbody></table></div> 
```

即使调用了 java 代码，也会按预期返回行。我第二次按下按钮，调用了相同的 java 代码，但部分响应包含数据表及其单元格，因此它正确显示......

我想念什么？

注意：结合数据表+几列，一切正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T10:05:33.653

解决方案是：以下：（阅读手册） p:columns 仅用于显示标题和创建索引变量（columnIndexVar），允许您以“旧式”索引方式访问数据。

手册说：

> *动态列 如果您不知道要渲染多少列，动态列很方便。Columns 组件用于以编程方式定义列。它需要一个集合作为值，两个迭代器变量称为 var 和 columnIndexVar。*

```
<p:dataTable var="cars" value="#{tableBean.dynamicCars}" id="carsTable">
    <p:columns value="#{tableBean.columns}" var="column" columnIndexVar="colIndex">
        <f:facet name="header">
            <h:outputText value="#{column}"/>
        </f:facet>
        <h:outputText value="#{cars[colIndex].model}" /> <br />
        <h:outputText value="#{cars[colIndex].year}" /> <br />
        <h:outputText value="#{cars[colIndex].color}"/>
    </p:columns>
</p:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T09:12:34.290

尝试`<p:datatable>`单独`<h:form>`为我解决问题。

# javascript - 如何使用 HTML 和 CSS 解决移动应用程序的固定位置

> ID：15701965
> 
> 赞同：1
> 
> 时间：2013-03-29T11:03:19.783
> 
> 标签：javascript, html, css, jquery-mobile

我正在使用 HTML 和 CSS 为移动应用程序设计一个表单。该表单有一个注册页面，其中包含几个文本字段。页眉和页脚位置是固定的。

我的问题是，当我单击特定文本字段（给定`onfocus`字段的功能）并滚动页面时，屏幕在页眉和页脚中向上移动，因为它们是固定的，但仅选定的字段会位于页眉的顶部。我不明白为什么仅选择的文本字段就会上升并且标题内的其余形式滚动时会发生这种情况。

下图说明了我的问题：

![手机问题](../Images/e6fb6693c53b800c3dd3c5789b2debc3.png)

当我选择用户名文本框并向上滚动时，仅此字段会上升到页眉，其他字段在页眉和页脚内滚动。

注意：这里的页眉和页脚保持固定。

**更新代码**

```
<body>
<div style="background: #000;height: 60px;position: fixed;  padding: 0 10px;width: 96%;z-index: 9999;" id="header-wrap">
    <header class="center">
<h1 id="logo">
<a href="/">My App</a>
</h1>
<h2 class="mob-usrname" style="display:none;">Mark</h2>
</header>
</div>
<section id="main" class="tabs">
<div class="page-wrap">
<h2>Register</h2>
<form class="form" method="post">
<p>
<label for="id_first_name">First name</label>
<input id="id_first_name" class="textinput" type="text" maxlength="30" value="Dan" name="first_name">
<span class="helptext"></span>
</p>
<p>
<label for="id_last_name">Last name</label>
<input id="id_last_name" class="textinput" type="text" maxlength="30" value="Hibma" name="last_name">
<span class="helptext"></span>
</p>
 <p>
<label for="id_email">E-mail address</label>
                <input id="id_email" class="textinput" type="text" maxlength="75" value="mymail@mail.com" name="email">
<span class="helptext"></span>
</p>
<p>
<label for="id_password1">Password</label>
<input id="id_password1" class="textinput" type="password" name="password1">
<span class="helptext"></span>
 </p>
 <p>
<label for="id_password2">Password Confirmation</label>
<input id="id_password2" class="textinput" type="password" name="password2">
<span class="helptext">Enter the same password as above, for verification.</span>
</p>
<p>
<label for="id_phone">Phone</label>
<input id="id_phone" class="textinput" type="text" maxlength="20" value="257-635-4735" name="phone">
<span class="helptext"></span>
</p>
<p>
<label for="id_button">Button</label>
<input id="id_button" class="textinput" type="text" maxlength="32" value="sample" name="button" readonly="readonly">
<span class="helptext"></span>
 </p>
<input id="submit" type="submit" value="Save">
 </form>
 </div>
</section>
<div style="background:#2C2C2C;bottom: 0;display: block !important;height: 60px;line-height: 60px;position: fixed;width: 100%;" class="mobile-footer" style="display:none">
<ul>
<li class="sam">
<a href="/">
<span></span>
<em>My Footer</em>
</a>
 </li>
<li class="mobile-sample sample">
<a href="/sample/logs">
 <span></span>
<em>logs</em>
 </a>
 </li>
</ul>
</div>   
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:22:58.507

*您的Jquery Mobile*页面结构应如下所示。

```
<div data-role="page">

<div data-role="header" data-position="fixed">
    <h1>Page Title</h1>
</div><!-- /header -->

<div data-role="content">
    <p>Page content goes here.</p>
</div><!-- /content -->

<div data-role="footer">
    <h4>Page Footer</h4>
</div><!-- /footer -->

 </div><!-- /page --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:12:40.040

见下面的例子

```
 <body style="margin:0px; padding:0px;">
     <div style="font-size:25px; background:#96F; position:fixed; width:100%;"> HEADER HERE </div>
     <div style="font-size:20px; background:#CCC;">
    MIDDDLES HERE <br />
           <br />
           <br />
           <br />
           <br />MIDDDLES HERE<br />MIDDDLES HERE<br />MIDDDLES HERE<br />MIDDDLES HERE<br />MIDDDLES HERE<br />MIDDDLES HERE<br />MIDDDLES HERE<br />

   </div>
   <div style="font-size:25px; background:#99F; position:fixed; width:100%; bottom:0; "> <br />FOOTER HERE <br /></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:27:18.620

我不太确定发生了什么。但在注册头之前添加几个`<br>`似乎有帮助。

[http://jsfiddle.net/btevfik/M2u8f/](http://jsfiddle.net/btevfik/M2u8f/)

# android - 通过安卓应用分享谷歌地图静态图片

> ID：15701966
> 
> 赞同：4
> 
> 时间：2013-03-29T11:03:22.723
> 
> 标签：android, google-maps, android-intent

我正在开发一款安卓应用程序，我在该应用程序中得到了很长的时间，并希望将其发送到电子邮件和 Facebook

一种方法是分享谷歌静态图片网址

[http://maps.googleapis.com/maps/api/staticmap?center=63.259591,-144.667969&zoom=6&size=400x400%20&markers=color:blue%7Clabel:S%7C62.107733,-145.541936&zoom=15&​​sensor=false](http://maps.googleapis.com/maps/api/staticmap?center=63.259591,-144.667969&zoom=6&size=400x400%20&markers=color:blue%7Clabel:S%7C62.107733,-145.541936&zoom=15&sensor=false)

但是我们可以从这个静态网址附加图片并通过电子邮件或脸书发送...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:42:53.483

这是您可以使用的代码，基本上使用 a`WebView`拍摄快照并将其保存在某处。

```
 private static Bitmap pictureDrawable2Bitmap(PictureDrawable pictureDrawable){
            Bitmap bitmap = Bitmap.createBitmap(pictureDrawable.getIntrinsicWidth(),pictureDrawable.getIntrinsicHeight(), Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            canvas.drawPicture(pictureDrawable.getPicture());
            return bitmap;
        }  
public void getImage()
{
    WebView web=(WebView)findViewById(R.id.your_webviews_id);
                    Picture p=web.capturePicture();
                    SharedPreferences prefs=con.getSharedPreferences("File_COUNT", con.MODE_PRIVATE);
                    //int count=prefs.getInt(//"COUNT", 0);
                    long rand= System.currentTimeMillis();
                    File root=new File(Environment.getExternalStorageDirectory()+"/Maps");
                    root.mkdirs();

                    File save_img=new File(root.getAbsolutePath()+"/"+rand+".png");
                    //OutputStream os;
                    try {
                        Bitmap bmp = pictureDrawable2Bitmap(new PictureDrawable(p)); 
                        FileOutputStream out = new FileOutputStream(save_img.getAbsolutePath());
                        bmp.compress(Bitmap.CompressFormat.PNG, 90, out); 
                        out.close();
                        Toast.makeText(con, "Save successful", Toast.LENGTH_SHORT).show();
                        Intent shareIntent = new Intent(Intent.ACTION_SEND);
                        MimeTypeMap mime = MimeTypeMap.getSingleton();
                        String type = mime.getMimeTypeFromExtension("png");
                        shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(save_img));
                        shareIntent.setType(type);
                        startActivity(Intent.createChooser(shareIntent, "Share Using"));

                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        Toast.makeText(con, "File not able to be saved. Please restart app", Toast.LENGTH_SHORT).show();
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Toast.makeText(con, "I/O error", Toast.LENGTH_SHORT).show();
                    }
} 
```

因此，要发送电子邮件，只需将此图像附加到电子邮件并调用电子邮件`Intent`。

# while-loop - 使用 ANTLR 同时执行 while 和 while

> ID：15701971
> 
> 赞同：2
> 
> 时间：2013-03-29T11:03:32.590
> 
> 标签：while-loop, antlr, do-while, antlr4

早些时候我创建了[这个问题](https://stackoverflow.com/questions/15610183/if-else-statements-in-antlr-using-listeners)，询问如何使用 ANTLR 4 创建 if/else 语句。我得到了一个很好的答案，它还展示了如何执行 while 循环。我已经用我的语言实现了这一点，现在我正在尝试使用几乎相同的原理制作一个 do-while 循环。

对于 while 循环，我的语法如下：

```
count is 0
while count is less than 10
  count+
  if count not equals 10
    write " " + count + ": Getting there..."
  else if count equals 10
    write count + ": The end!"
  end if
end while 
```

这就是我想要的 do-while 循环：

```
count is 0
do
  count+
  write "count is " + count
  if count equals 10
    write "The end!"
  end if
while count is less than 10 
```

我已经对其进行了测试，但是它们都可以工作，但是不能同时工作。以下是我的语法（很抱歉将其全部发布，但我认为这是必要的）。

如果我的`WHILE`和标记在我的和`END_WHILE`标记之上，那么 while 循环有效。但是，如果我在我的 do-while 循环中切换它们。如果我将令牌更改为除了*while*之外的任何东西，那么两者都可以。`DO_WHILE``DO_WHILE_CONDITION``DO_WHILE_CONDITION`

 *无论如何，我可以让它们都使用当前的语法吗？我知道这可能是个问题，因为我对多件事使用相同的关键字，但我希望有办法做到这一点。

```
//////////////////////////////////
// PARSER
//////////////////////////////////

program
 : block EOF
 ;

block
 : (statement (NEW_LINE+ | EOF))*
 ;

statement
 : assignment
 | if_statement
 | while_statement
 | until_statement
 | do_while_statement
 | write
 ;

assignment
 : ID ASSIGN expression # expressionAssignment
 | ID PLUS              # incrementAssignment
 | ID MINUS             # decrementAssignment
 ;

if_statement
 : IF condition_block (ELSE_IF condition_block)* (ELSE NEW_LINE statement_block)? END_IF
 ;

condition_block
 : expression NEW_LINE statement_block
 ;

statement_block
 : block
 ;

while_statement
 : WHILE expression NEW_LINE statement_block END_WHILE
 ;

until_statement
 : UNTIL expression NEW_LINE statement_block END_UNTIL
 ;

do_while_statement
 : DO_WHILE NEW_LINE statement_block DO_WHILE_CONDITION expression
 ;

expression
 : atom                                             # atomExpression
 | expression PLUS expression                       # plusExpression
 | expression MINUS expression                      # minusExpression
 | expression MULTIPLY expression                   # multiplicationExpression
 | expression DIVIDE expression                     # divisionExpression
 | expression PLUS                                  # incrementExpression
 | expression MINUS                                 # decrementExpression
 | expression AND expression                        # andExpression
 | expression OR expression                         # orExpression
 | expression EQUALS expression                     # equalityExpression
 | expression NOT_EQUALS expression                 # notEqualityExpression
 | expression LESS_THAN expression                  # lessThanExpression
 | expression NOT_LESS_THAN expression              # notLessThanExpression
 | expression GREATER_THAN expression               # greaterThanExpression
 | expression NOT_GREATER_THAN expression           # notGreaterThanExpression
 | expression GREATER_THAN_OR_EQUAL expression      # greaterThanOrEqualExpression
 | expression LESS_THAN_OR_EQUAL expression         # lessThanOrEqualExpression
 ;

atom
 : INT                              # integerAtom
 | FLOAT                            # floatAtom
 | BOOLEAN                          # boolAtom
 | ID                               # idAtom
 | STRING                           # stringAtom
 | OPEN_PAR expression CLOSE_PAR    # expressionAtom
 ;

write
 : WRITE expression
 ;

////////////////////////////////// 
// LEXER
//////////////////////////////////

PLUS                        : '+';
MINUS                       : '-';
MULTIPLY                    : '*';
DIVIDE                      : '/';

ASSIGN                      : 'is';
OPEN_CURLY                  : '{';
CLOSE_CURLY                 : '}';
OPEN_PAR                    : '(';
CLOSE_PAR                   : ')';
COLON                       : ':';
NEW_LINE                    : '\r'? '\n';

IF                          : 'if';
ELSE_IF                     : 'else if';
ELSE                        : 'else';
END_IF                      : 'end if';

WHILE                       : 'while';
END_WHILE                   : 'end while';

UNTIL                       : 'until';
END_UNTIL                   : 'end until';

DO_WHILE                    : 'do';
DO_WHILE_CONDITION          : 'while';

EQUALS                      : 'equals';
NOT_EQUALS                  : 'not equals';
LESS_THAN                   : 'is less than';
NOT_LESS_THAN               : 'is not less than';
GREATER_THAN                : 'is greater than';
NOT_GREATER_THAN            : 'is not greater than';
GREATER_THAN_OR_EQUAL       : 'is greater than or equals';
LESS_THAN_OR_EQUAL          : 'is less than or equals';
WRITE                       : 'write';

AND                         : 'and';
OR                          : 'or';
NOT                         : 'not';

BOOLEAN
 : 'TRUE' | 'true' | 'YES' | 'yes'
 | 'FALSE' | 'false' | 'NO' | 'no'
 ;

INT
 : (PLUS | MINUS)? NUMBER+
 ;

FLOAT
 : (PLUS | MINUS)? NUMBER+ ('.' | ',') (NUMBER+)?
 | (PLUS | MINUS)? (NUMBER+)? ('.' | ',') NUMBER+
 ;

NUMBER
 : '0'..'9'
 ;

STRING
 : '"' ( '\\"' | ~["] )* '"'
 ;

ID
 : ('a'..'z' | 'A'..'Z' | '0'..'9')+
 ;

WHITESPACE
 : [ \t]+ -> skip
 ;

COMMENT
 : ( ';;' .*? ';;' | ';' ~[\r\n]* ) -> skip
 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:45:49.860

创建标记时，词法分析器不会*考虑*解析器在某个时刻可能需要什么。检查描述规则的此问答（适用于 v3 和 v4）：[Antlr v3 error with parser/lexer rules](https://stackoverflow.com/questions/9251048/antlr-v3-error-with-parser-lexer-rules)

这意味着在您的情况下，规则`DO_WHILE_CONDITION`：

```
WHILE                       : 'while';
...
DO_WHILE_CONDITION          : 'while'; 
```

永远不会匹配。

除此之外，用空格将关键字“粘合”到彼此通常不是一个好主意。考虑输入何时为`"end  if"`（2 个空格）。更好地创建 2 个标记：an`END`和 an`IF`并在您的解析器规则中使用它们。

尝试这样的事情：

```
program
 : block
 ; 

block
 : NEW_LINE* (statement (NEW_LINE+ | EOF))*
 ;

statement
 : assignment
 | if_statement
 | while_statement
 | until_statement
 | do_while_statement
 | write
 ;

assignment
 : ID IS expression # expressionAssignment
 | ID PLUS          # incrementAssignment
 | ID MINUS         # decrementAssignment
 ;

if_statement
 : IF condition_block (ELSE IF condition_block)* (ELSE NEW_LINE statement_block)? END IF
 ;

condition_block
 : expression NEW_LINE statement_block
 ;

statement_block
 : block
 ;

while_statement
 : WHILE expression NEW_LINE statement_block END WHILE
 ;

until_statement
 : UNTIL expression NEW_LINE statement_block END UNTIL
 ;

do_while_statement
 : DO NEW_LINE statement_block WHILE expression
 ;

// Added unary expressions instead of combining them in the lexer.
expression
 : atom                                            # atomExpression
 | MINUS expression                                # unaryMinusExpression
 | PLUS expression                                 # unaryPlusExpression
 | expression PLUS expression                      # plusExpression
 | expression MINUS expression                     # minusExpression
 | expression MULTIPLY expression                  # multiplicationExpression
 | expression DIVIDE expression                    # divisionExpression
 | expression PLUS                                 # incrementExpression
 | expression MINUS                                # decrementExpression
 | expression AND expression                       # andExpression
 | expression OR expression                        # orExpression
 | expression EQUALS expression                    # equalityExpression
 | expression NOT EQUALS expression                # notEqualityExpression
 | expression IS LESS THAN expression              # lessThanExpression
 | expression IS NOT LESS THAN expression          # notLessThanExpression
 | expression IS GREATER THAN expression           # greaterThanExpression
 | expression IS NOT GREATER THAN expression       # notGreaterThanExpression
 | expression IS GREATER THAN OR EQUALS expression # greaterThanOrEqualExpression
 | expression IS LESS THAN OR EQUALS expression    # lessThanOrEqualExpression
 ;

atom
 : INT                              # integerAtom
 | FLOAT                            # floatAtom
 | bool                             # boolAtom
 | ID                               # idAtom
 | STRING                           # stringAtom
 | OPEN_PAR expression CLOSE_PAR    # expressionAtom
 ;

write
 : WRITE expression
 ;

// By making this a parser rule, you needn't inspect the lexer rule 
// to see if it's true or false.
bool
 : TRUE
 | FALSE
 ;

////////////////////////////////// 
// LEXER
//////////////////////////////////

PLUS                        : '+';
MINUS                       : '-';
MULTIPLY                    : '*';
DIVIDE                      : '/';

OPEN_CURLY                  : '{';
CLOSE_CURLY                 : '}';
OPEN_PAR                    : '(';
CLOSE_PAR                   : ')';
COLON                       : ':';
NEW_LINE                    : '\r'? '\n';

IF                          : 'if';
ELSE                        : 'else';
END                         : 'end';
WHILE                       : 'while';
UNTIL                       : 'until';
DO                          : 'do';
EQUALS                      : 'equals';
NOT                         : 'not';
IS                          : 'is';
LESS                        : 'less';
THAN                        : 'than';
GREATER                     : 'greater';
WRITE                       : 'write';
AND                         : 'and';
OR                          : 'or';

TRUE  : 'TRUE'  | 'true'  | 'YES' | 'yes';
FALSE : 'FALSE' | 'false' | 'NO'  | 'no';

INT
 : DIGIT+
 ;

// (DIGIT+)? is the same as: DIGIT*
FLOAT
 : DIGIT+ [.,] DIGIT*
 | DIGIT* [.,] DIGIT+
 ;

// If a rule can never become a token on its own (an INT will always 
// be created instead of a DIGIT), mark it as a 'fragment'.
fragment DIGIT
 : [0-9]
 ;

// Added support for escaped backslashes.
STRING
 : '"' ( '\\"' | '\\\\' | ~["\\] )* '"'
 ;

// Can it start with a digit? Maybe this is better: [a-zA-Z] [a-zA-Z0-9]*
ID
 : [a-zA-Z0-9]+
 ;

WHITESPACE
 : [ \t]+ -> skip
 ;

COMMENT
 : ( ';;' .*? ';;' | ';' ~[\r\n]* ) -> skip
 ; 
```

哪个解析器都可以毫无问题地构造。另请注意，我对您的语法进行了细微调整（请参阅内联评论）。一元表达式很重要，否则`1-2`会被标记为2个标记，在解析器中`INT`无法匹配为an ！`expression`*

# asp.net-mvc - ajax 调用成功后重新加载页面在 safari 和 IE 浏览器中出现错误

> ID：15701972
> 
> 赞同：1
> 
> 时间：2013-03-29T11:03:35.513
> 
> 标签：asp.net-mvc, jquery, asp.net-ajax

我使用 ajax 调用来插入数据。在ajax调用成功的情况下，我想重新加载页面，所以我在ajax调用中编码为：

```
 myfunction: function (url, form) {

    $.ajax({
        cache: false,
        url: url,
        data: $(form).serialize(),
        type: 'post',
        success: window.location.reload(true),
        complete: this.resetLoadWaiting,
        error: "Failer Message."
    });
}, 
```

这将在 mozila firefox 和 google-crome 上正常工作，但不适用于所有版本的 IE 和 safari 浏览器，它会给出失败消息，如 ajax 调用的错误部分。那么在成功事件中我能做些什么呢？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:37:36.670

我`document.location.reload()`在我的成功活动中使用并在所有浏览器上工作。

# java - 在我的自定义类中使用 sqllite 时活动崩溃 - android

> ID：15701976
> 
> 赞同：0
> 
> 时间：2013-03-29T11:04:03.117
> 
> 标签：java, android

所以我创建了这个类：

```
public class Database extends Activity {
    public SQLiteDatabase db ;

    public void openDb(){
        db = openOrCreateDatabase("myDB",MODE_PRIVATE,null);
        db.close();
    }   
} 
```

在我的主要活动中，我写道：

```
public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Database ODB= new Database ();
        ODB.openDb();

    }
} 
```

当我启动时，我会强制关闭窗口，当我将其放入 try-catch 时，我会得到`NullPointerException`.

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:32:09.950

由于数据库是静态的，为什么要在其他类中尝试打开数据库。

尝试这个

```
public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        db = openOrCreateDatabase("myDB",MODE_PRIVATE,null);

    }} 
```

# javascript - 如何使用格式（小时：分钟：秒）获得两次之间的差异

> ID：15701980
> 
> 赞同：0
> 
> 时间：2013-03-29T11:04:22.000
> 
> 标签：javascript, jquery, html

有 2 个文本框供用户输入时间。如何使用格式（小时：分钟：秒）获得两次之间的差异

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T11:19:52.313

我想你会从那个链接中得到这个想法。

[http://office.microsoft.com/en-in/excel-help/calculate-the-difference-between-two-times-HP010070468.aspx](http://office.microsoft.com/en-in/excel-help/calculate-the-difference-between-two-times-HP010070468.aspx)

[http://office.microsoft.com/en-in/excel-help/calculate-the-difference-between-two-times-HP003056108.aspx](http://office.microsoft.com/en-in/excel-help/calculate-the-difference-between-two-times-HP003056108.aspx)

# ruby - REXML - 存储某个元素

> ID：15701984
> 
> 赞同：0
> 
> 时间：2013-03-29T11:04:33.410
> 
> 标签：ruby, xml, xml-parsing, rexml

这是我的 XML 文件：

```
<performance_summary_response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://cakemarketing.com/affiliates/api/2/">
  <success>true</success>
  <row_count>7</row_count>
  <periods>
    <period>
      <date_range>12 Months</date_range>
      <current_revenue>22369.7000</current_revenue>
      <previous_revenue>3664.1000</previous_revenue>
      <currency_symbol>$</currency_symbol>
    </period>
  </periods>
</performance_summary_response> 
```

我正在使用 REXML 提取 date_range 为 12 个月的 current_revenue 元素。我有以下代码：

```
period = ['12 Months']

data.elements.each('//date_range/..') do |parent|
  if (period.include? parent.elements['date_range/text()'].to_s)
    puts parent.elements['current_revenue']

  end

end 
```

这将打印 22369.7000，但是，我无法仅提取数值并将其分配给变量。我怎么可能这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:25:15.017

对我来说`puts parent.elements['current_revenue']`打印`<current_revenue>22369.7000</current_revenue>`。如果你只想要 22369.7000，你可以使用：

```
 current_revenue = parent.elements['current_revenue'].text 
```

`current_revenue`将是一个字符串，因此您可以使用`to_f`它或其变体将其转换为数字。

# session - CometD 长轮询使会话永不超时

> ID：15701986
> 
> 赞同：2
> 
> 时间：2013-03-29T11:04:37.570
> 
> 标签：session, timeout, polling, cometd

我在 ui 端使用 ExtJs + CometD 和 Spring + Jetty 作为我的应用程序的后端。用户使用 spring 身份验证管理器 (j_spring_security_check) 进行身份验证。正常的 http 请求使用特定的 url 模式 (/myapp)，而 cometd 通信发生在不同的 url 模式 (/cometd) 上。

我在服务器上将会话超时值设置为 30 分钟。一旦用户登录，CometD 活动就会开始（如握手、连接等）。我正在为 cometD 提供 Bayex 传输，以用作 WebSocket 和长轮询。对于不支持 WebSocket 的浏览器，CometD 通信使用长轮询机制进行。

问题是由于 CometD 客户端的长轮询，当 CometD 长轮询的心跳到达时，服务器上的会话超时计数器总是会重置。因此，会话在服务器上永远不会超时。

如果请求来自特定 URL（在我的情况下是 cometD url），是否有办法避免重置会话的会话超时值。

另外，如果我可以删除 cometD 发送到服务器的 HTTP 标头中的 JSSIONID 参数，是否有可能。可能如果我可以从 http 标头中删除 JSESSIONID，那么服务器将不会重置该会话的超时计数器。

谢谢，
布里吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:55:31.963

这已在 CometD 邮件列表中提出，请参阅 [https://groups.google.com/forum/?fromgroups=#!topic/cometd-users/xoTRl3lL9_o](https://groups.google.com/forum/?fromgroups=#!topic/cometd-users/xoTRl3lL9_o)

投票给[http://bugs.cometd.org/browse/COMETD-416](http://bugs.cometd.org/browse/COMETD-416)，它可能包含在 CometD 2.6.0 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-05T03:20:47.533

您需要使用活动扩展。请点击链接

[http://docs.cometd.org/3/reference/#_extensions_activity](http://docs.cometd.org/3/reference/#_extensions_activity)

# javascript - JS 评估安全问题

> ID：15701988
> 
> 赞同：0
> 
> 时间：2013-03-29T11:04:47.977
> 
> 标签：javascript

每个人都说 JS 中的 eval() 函数很糟糕。

实际上我是这样使用它的：

```
eval("document.getElementById('toto').value"); 
```

在我看来，即使用户在“toto”元素中发送恶意输入，这也是安全的。

你能确认一下吗？（我不想让我的应用程序存在漏洞）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:06:47.653

首先，正如 Juhana 在评论中指出的那样：

```
eval("document.getElementById('toto').value"); 
```

只是不必要的使用`eval`，它等同于

```
document.getElementById('toto').value; 
```

现在，**没有**引号：

```
eval(document.getElementById('toto').value); 
```

...它将评估“toto”中`input`的任何代码。`id`

假设这就是你的意思：

执行某人输入的代码似乎有点奇怪`input`，但只要你对三件事没问题，那很好。这三件事是：

1.  `eval`将执行该输入中的任何代码。既然用户把它放在那里，赔率是相当不错的（至少，这是一个“用户当心”的情况）。

2.  `eval`启动一个完整的 JavaScript 解析器。现在，在比眨眼更快的现代浏览器上，所以......

3.  `eval`将在你调用它的上下文中执行你给它的代码，这使得它甚至可以访问该上下文中的*局部*变量。

“`eval`是邪恶的”口头禅与`eval`不必要的使用有关，就像人们有时会做的那样（例如你看到`eval("obj." + nameOfProperty)`的），以及在你无法控制的内容上使用它。

# ios - iOS 6.0 或更高版本中的 MKMapView 内存问题

> ID：15701990
> 
> 赞同：1
> 
> 时间：2013-03-29T11:04:59.747
> 
> 标签：ios, mkmapview

`MKMapview`在 IOS 应用程序中缩放/拖动时，IOS 6.0 是否比`MKMapview`在 5.1 中使用的内存更多`ios5.0`？

`mkmapview`它在放大时给我内存警告`ios6.0`

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView1 viewForAnnotation:(id <MKAnnotation> )annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
        ((MKUserLocation *)annotation).title = kCurrentLocation;
        return nil;
    }

    if (annotation == self.calloutAnnotation)
    {
        CalloutMapAnnotationView *calloutMapAnnotationView=nil;

        if (calloutMapAnnotationView==nil){
            calloutMapAnnotationView = (CalloutMapAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"CalloutAnnotation"];
            calloutMapAnnotationView = [[CalloutMapAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"CalloutAnnotation"];

            UIImageView *calloutImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,285,109)];
            calloutImageView.image = [UIImage loadImageFromBundle:@"map-pop"];
            [calloutMapAnnotationView addSubview:calloutImageView];
            [calloutImageView bringSubviewToFront:calloutMapAnnotationView];

            CGRect frame1,btnframe,btnframe2;
            int font1;

            frame1 = CGRectMake(14,10,270,35);
            //frame for subitle label of map annotation view.
            btnframe = CGRectMake(12,53,80,25);
            btnframe2= CGRectMake(btnframe.size.width+20,btnframe.origin.y,btnframe.size.width+35, btnframe.size.height);
            font1 = 14.0;

            calloutMapAnnotationView.calloutTitleLabel=nil;
            calloutMapAnnotationView.calloutTitleLabel = [[UILabel alloc]initWithFrame:frame1];
            calloutMapAnnotationView.calloutTitleLabel.numberOfLines = 2;
            calloutMapAnnotationView.calloutTitleLabel.layer.cornerRadius=6;
            [calloutMapAnnotationView.calloutTitleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:font1]];
            [calloutMapAnnotationView.calloutTitleLabel setBackgroundColor:[UIColor clearColor]];
            [calloutMapAnnotationView.calloutTitleLabel setTextColor:[UIColor whiteColor]];

            calloutMapAnnotationView.infoButton = [UIButton buttonWithType:UIButtonTypeCustom];
            [calloutMapAnnotationView.infoButton setBackgroundImage:[UIImage loadImageFromBundle:@"blank-btn"] forState:UIControlStateNormal];
            [calloutMapAnnotationView.infoButton setTitle:kInfo forState:UIControlStateNormal];
            [[calloutMapAnnotationView.infoButton titleLabel ]setFont:[UIFont fontWithName:@"Helvetica-Bold" size:font1-1]];
            [calloutMapAnnotationView.infoButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            calloutMapAnnotationView.infoButton.frame = btnframe;
            calloutMapAnnotationView.infoButton.exclusiveTouch = YES;
            [calloutMapAnnotationView.infoButton addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchCancel];
            [calloutMapAnnotationView addSubview:calloutMapAnnotationView.infoButton];
            [calloutMapAnnotationView.infoButton bringSubviewToFront:calloutMapAnnotationView];
            [calloutMapAnnotationView addSubview:calloutMapAnnotationView.calloutTitleLabel];
            //            infoButton=nil;

            calloutMapAnnotationView.routeButton = [UIButton buttonWithType:UIButtonTypeCustom];//inDark
            [calloutMapAnnotationView.routeButton setBackgroundImage:[UIImage loadImageFromBundle:@"blank-btn"] forState:UIControlStateNormal];
            calloutMapAnnotationView.routeButton.frame = btnframe2;
            [calloutMapAnnotationView.routeButton setTitle:kRouteDraw forState:UIControlStateNormal];
            [[calloutMapAnnotationView.routeButton titleLabel ]setFont:[UIFont fontWithName:@"Helvetica-Bold" size:font1-1]];
            [calloutMapAnnotationView.routeButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            calloutMapAnnotationView.routeButton.exclusiveTouch = YES;
            calloutMapAnnotationView.routeButton.tag = well_ID;
            [calloutMapAnnotationView.routeButton addTarget:self action:@selector(showRouteView:) forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchCancel];
            [calloutMapAnnotationView addSubview:calloutMapAnnotationView.routeButton];

        }

        calloutMapAnnotationView.calloutTitleLabel.text = self.titleStr;

        NSLog(@"well id---%d",well_ID);
        calloutMapAnnotationView.infoButton.tag = well_ID;

        int locationId=[[resultDict objectForKey:@"uid"] intValue];

        if(well_ID!=locationId)
        {
            calloutMapAnnotationView.routeButton.hidden = NO;
            calloutMapAnnotationView.routeButton.tag = well_ID;
            [calloutMapAnnotationView.routeButton bringSubviewToFront:calloutMapAnnotationView];
        }else{
            calloutMapAnnotationView.routeButton.hidden = YES;
        }
        calloutMapAnnotationView.parentAnnotationView = self.selectedAnnotationView;
        calloutMapAnnotationView.mapView = mapView;

        return calloutMapAnnotationView;
    } else {
        static NSString *defaultPinID = @"Pin";
        MKAnnotationView* pin = (MKAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier: defaultPinID];
        int annotationValue =[annotation_array indexOfObject:annotation];
        NSString * searchLocationTitle= [annotation title];
        if ( pin == nil ) {
            pin = (MKAnnotationView*) [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier: defaultPinID];
            pin.image = [UIImage loadImageFromBundle:@"logo"];
        }
        pin.canShowCallout = NO;
        if (annotationValue!=0) {
            if([searchLocationTitle isEqualToString:kCurrentLocation])
            {
                pin.image=nil;

            }
            else if([searchLocationTitle isEqualToString:kSearchedLocation])
            {
                pin.image=nil;

            }
            else
            {
                if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
                    pin.frame = CGRectMake(-15, 0, 40,65);
                } else
                {
                    pin.frame = CGRectMake(-15, 0, 45,70);
                }
            }
        }
        else{
            return nil;
        }
        return pin;
    }
    return nil;
} 
```

上面的`viewForannotation`委托方法代码`mkmapView`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:11:22.953

### 由于 6+ 地图视图使用矢量套件，因此在 4/5 中它使用谷歌地图

我必须告诉你，ios6+ 中的 MKMapView 真的很糟糕。我们花了数周时间让它消耗更少的内存，但新的矢量套件会疯狂地使用内存：/

展示整个世界——繁荣 50mb，展示 cupertino + 30，去 la + 30 去华盛顿特区 + 30 左右......

无事可做..哦，有些事情你可以尝试让它变得更好，但最终问题仍然存在。**地图视图无法管理**，我们切换到 google maps sdk。

* * *

### 我们在切换之前所做的事情（有帮助）：

*   我们在多个屏幕上共享一个地图视图。我们有一个 MKMapViewWrapperView 帮助很大，因为地图视图在释放时实际上会“泄漏”，所以我们总是保留它

*   我们有时会切换 mapType... *这听起来很奇怪）导致地图视图释放一些内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T09:13:19.060

我已经确定内存泄漏发生时，当您设置`MKmapview`类型为混合时。发生了这种类型的内存泄漏。

我的建议只是选择卫星

# macos - 如何为 Finder 创建带有图标的文件夹？

> ID：15701996
> 
> 赞同：-2
> 
> 时间：2013-03-29T11:05:12.427
> 
> 标签：macos, icons, finder

如何创建一个带有 Finder 图标的文件夹（就像我使用 Dropbox 安装程序一样）？

![在此处输入图像描述](../Images/0e2a73718a5df0dcb81a37b2de9bd408.png)

知道这也很有趣，作为用户而不是程序员，我该怎么做？有什么工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:01:52.087

现在 Finder 在侧边栏中使用灰色图标，它不会关注文件夹的自定义图标。某些文件夹（例如 Applications 或 Desktop）会获得特殊图标，因为 Finder 知道它们很特殊，但无法告诉 Finder 新类型的特殊文件夹。我相当肯定 Dropbox 使用代码注入黑客来强制使用自己的自定义图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:01:25.637

在 Finder 中获取有关文件的信息，单击以选择文件的图标，然后使用粘贴来粘贴图像。

您也许可以使用 AppleScript 让 Finder 为您执行此操作。

您还可以查看[Candy Bar](http://www.panic.com/blog/2012/08/candybar-mountain-lion-and-beyond)（它是免费的，但不受支持）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:28:24.437

对于 Lion 和 Mountain Lion，您可以使用[Side Effects](http://www.macupdate.com/app/mac/43078/sideeffects)将颜色图标恢复到 Finder 侧边栏。

那时，有两条路线。

对于您示例中的 DropBox 或 Google Drive，它应该已经自行选择了自定义图标，您无需执行任何其他操作。

![在此处输入图像描述](../Images/f55f3455b3f6c1e7bbeb37551c2079d2.png)

对于您可能希望自定义的其他文件夹（或您可能希望拖动到侧边栏中的任何其他项目，从应用程序到文档），如果您希望看到自定义图标，您可以通过执行自行替换它`Get Info`在感兴趣的项目上，然后单击该面板中的图标，然后执行上下文菜单**Paste**，您的自定义图标将出现在该项目上。