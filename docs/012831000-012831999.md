# StackOverflow 问答 12831000-12831999

# javascript - XSS - 将数据发送到脚本的源服务器？

> ID：12831002
> 
> 赞同：0
> 
> 时间：2012-10-11T01:42:53.780
> 
> 标签：javascript, jquery, security, xss

我正在编写一个 JavaScript 应用程序，我计划将代码托管在 CDN 上。现在我计划将此代码包含到我客户的站点中。但是，我有一个问题，我想使用 AJAX 在客户端和服务器之间进行通信。现在，根据我对 XSS 的理解，这是不可能的。

前任：

1.  用户访问 site.com，其中脚本标签的源指向 cdn.somedomain.com 上的文件
2.  cdn.somedomain.com 上的脚本会触发一个事件。
3.  此事件将与 PHP 进行通信。我知道来自 cdn.somedomain.com 的脚本可以请求 site.com 上的文档。但是，是否可以将数据发送回 cdn.somedomain.com 上的 PHP 文件？

感谢您帮助企业家！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:02:57.500

简而言之，我认为这是可能的，但这取决于几件事。同源策略很奇怪，它不允许跨域读取，但允许跨域写入。

我认为实现目标的一种方法是发出 GET 请求（至少通过创建 iframe、img 或任何其他拉取 src 的东西），甚至可能使用 AJAX。如果您的目标是只发送数据，那应该没问题。但是，如果您想回读这些数据，那么我认为这会不那么直接。我现在无法真正回答这个问题——尤其是在不了解有关您的系统设置的更多细节的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:26:47.293

听起来像是对cdn的奇怪使用。通常 cdn 服务于静态资产，所以你不会在那里放一个 php 文件。事实上，cdn 通常根本不会运行动态服务器端代码。您可以通过多种方式解决问题。较新的浏览器支持 CORS 和跨域 ajax。然后，cdn 必须使用 Access-control-* 标头。你也可以看看easyXDM之类的东西，它适用于旧版浏览器。

# c++ - 调用属于另一个类的函数

> ID：12831008
> 
> 赞同：0
> 
> 时间：2012-10-11T01:43:49.057
> 
> 标签：c++

我只是想知道是否有办法从另一个不是派生类的类中调用函数。

例如...

如果我有一个类 Square，它有一个函数 colour，如果我有另一个类 Triangle，完全与 Square 无关，我可以在 Triangle 对象上调用 Square 的颜色函数吗？

我想知道是否可以在这里使用朋友，但从我所阅读的内容来看，它不能，除非我误解了我所阅读的内容。

在不创建继承关系的情况下实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:47:22.043

如果您想要做的是这样的事情：

```
Square s;
Triangle t;
t.colour(); // invoke Square::colour() on a Triangle 
```

我很抱歉，但你不能，除非你在 Triangle 中声明一个简单地模仿什么的`Square::colour`函数。

如果您确实需要共享该函数，一个明智的选择是将其声明为独立的模板函数，如下所示：

```
template<typename Shape>
void colour(Shape s){
  //Do stuff
} 
```

然后为了允许这种访问 Triangle 和 Square 的内部胆量，结交`void colour<Triangle>()`适当`void colour<Square>()`的类的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:52:50.480

答案是否定的，您的要求是不可能的。color 方法封装在 square 中，不会应用于差异类的无关对象。要么继承（从形状 - 我知道你说没有继承），或者也重新实现正方形的颜色方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T01:54:44.663

不，很抱歉让你失望了。但我建议使用基类“形状”，并从该类派生形状。

```
class Abc //Abstract base class
{
    public:
        virtual ~Abc();                             //destructor
        virtual double Color();           
        virtual double Area() const = 0;                  //pure virtual, MUST be overridden
    private:
        //specific variables that apply to all shapes
};

class Square : public Abc //derived class from pure virtual class
{
    public:
        Square();
        virtual double Color();
        virtual double Area() const; //redefine color here
        ~Square(){}
    private:
        //square vars here
}; 
```

# ide - 有没有办法在服务器上运行 Lisp-in-box？

> ID：12831012
> 
> 赞同：0
> 
> 时间：2012-10-11T01:44:15.890
> 
> 标签：ide, centos, common-lisp

我在桌面上运行的版本有 Emacs，一个通用的列表编译器，和 SLIME 一个 lisp IDE。这对于包括互联网协议在内的任何功能的协作和测试都有好处。

我的服务器有 CentOS，所以我相信包管理器是 YUM。谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T06:19:57.110

我不知道你是否可以在服务器上运行 Lisp-in-box，但你可以在服务器上运行带有 SWANK 的 Lisp。然后，您的合作者和您自己将能够使用 `M-x``slime-connect``RET`.

如果您想使用安全连接，只需确保 SWANK 仅在 localhost 上侦听，然后您就可以建立 SSH 隧道。

```
ssh -f -N -L 4005:localhost:4005 $user@$host 
```

奖励：这篇 [博文](http://directed-procrastination.blogspot.fr/2012/07/adventures-in-collaborative-coding-with.html) 是关于使用 Common Lisp 进行协作编码的。

# php - 向类别添加标题属性而不影响核心

> ID：12831016
> 
> 赞同：0
> 
> 时间：2012-10-11T01:44:36.160
> 
> 标签：php, wordpress, wordpress-theming

我当前的设置包括拥有每个帖子的类别。但是每当我将鼠标悬停在类别上时，它都会显示`Show all posts in [category]`.

我环顾四周，看到了一些非常相似的问题，需要多行 php 代码。这肯定不会那么复杂。有没有办法我可以调整以下内容来让它做我想做的事？

```
<?php the_category(' '); ?> 
```

这是返回上述内容的代码。我正在查看法典并`category_description()`找到`get_the_category()`. 我对数组有点陌生，并且在弄清楚它们时遇到了问题。我有点希望这样的事情会起作用：

```
<?php the_category('title=category_description()'); ?> 
```

但事实并非如此。我知道这对你们大多数人来说是一种非常有趣的解决方法，但我完全迷失了。我只想将类别的描述作为标题属性。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:24:33.857

[wordpress 法典](http://codex.wordpress.org/Function_Reference/get_the_category)

使用 get_the_category(); 您可以将所有类别保存到一个变量中。前任：

```
$categories = get_the_categories(); 
```

但是，您可以传递一个可选参数；类别 ID。前任：

```
$categories = get_the_categories(THE_CATEGORY_ID); 
```

无论您是否提供类别 ID，您都必须通过循环运行 $categories。前任：

```
foreach($categories as $category){

} 
```

只有这样，您才能在不修改 wordpress 代码的情况下自定义您的标题属性。前任：

```
foreach($categories as $category){
    echo '<a href="'.get_category_link($category->term_id ).'" title="'.YOUR_CUSTOM_TITLE.'">'.$category->cat_name.'</a>';
} 
```

# perl - 替换 Perl 中的小数字

> ID：12831019
> 
> 赞同：0
> 
> 时间：2012-10-11T01:43:04.050
> 
> 标签：perl, numbers

在一个文本文件中，我有很多行看起来像`(a,b,c)`a、b 和 c 是双精度实数，例如`(8.27605704077856,0.505526531790625,1.15577754382534e-05)`. 有没有一种简单的方法可以在 Perl 中将小于 10e-4 的数字替换为 0？

**编辑：**例如，要处理的文本文件如下所示：

```
\plotinstruction[color,style,width]
points{
(8.27,0.5,1.1e-05)
(8.26,1,4.1e-06)
(8.25,1.5,3e-06)
} 
```

我想写一个新文件：

```
\plotinstruction[color,style,width]
points{
(8.27,0.5,0)
(8.26,1,0)
(8.25,1.5,0)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:50:47.103

也许我错过了一些东西，但也许使用[`map`](http://perldoc.perl.org/functions/map.html)会有所帮助？

```
#!/usr/bin/env perl

use strict;
use warnings;
use Data::Dumper;

my @values = (8.27605704077856, 0.505526531790625, 1.15577754382534e-05);
my @filtered_values = map(($_ > 1e-4) ? $_ : 0, @values);

print Dumper \@filtered_values; 
```

结果：

```
$VAR1 = [
          '8.27605704077856',
          '0.505526531790625',
          0
        ]; 
```

要解析输入，您可以使用正则表达式来提取以逗号分隔的数字字符串，使用`split`它来获取要运行的 Perl 列表`map`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:58:12.020

你可以写：

```
perl -pwe 's/\d[\d.e+-]+/$& < 0.001 && $& > -0.001 ? "0" : $&/ge' < INPUT > OUTPUT 
```

(`-p`意味着一次一行地读入输入，`$_`运行程序，打印出来`$_`，然后再次循环；`-w`启用警告；`-e`意味着程序直接指定为命令行参数；`s///`是正则表达式替换；`/g`意味着它是一个“全局”替换；并且`/e`意味着替换文本应被视为完整的 Perl 表达式，而不是仅具有变量插值的字符串。）

# scala - 使用 Scala 闭包，捕获的变量何时开始存在于 JVM 堆上？

> ID：12831024
> 
> 赞同：5
> 
> 时间：2012-10-11T01:45:38.897
> 
> 标签：scala

相关问题： [Scala 闭包与 Java 内部类相比 -> final VS var](https://stackoverflow.com/questions/12830611/scala-clojures-compared-to-java-innerclasses-final-vs-var)

我想知道 Scala 何时将捕获到闭包中的变量放在堆而不是堆栈上。我正在阅读 Martin Odersky 的 Scala 书，但现在我没有找到这些信息。有人可以解释引擎盖后面是什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T04:39:26.853

scala 中的匿名函数（实际上是任何函数）实际上是一个对象（的实例`Function*`）。当它被实例化时，通过将 val 复制到函数对象的内部字段来完成对 val 的捕获。在函数体中（即在函数对象的`apply`方法中），对捕获的 val 的访问是通过访问这些字段来完成的。

vars 的捕获是类似的，除了编译器必须添加一个间接级别：通过一些隐藏的可变持有者（只是一个具有指向 var 的当前值的可变字段的对象）访问 var 值，这就是被复制到函数对象中的持有者。当写入 var 时（通过本地代码或函数对象），写入的是持有者的字段。这种机制确保本地代码和函数的代码操作相同的数据，并且都可以看到彼此的修改。

所以答案是捕获的 vals 和捕获的 var 都始终存在于堆中（无论是直接作为函数对象的字段，还是作为某个包装对象的字段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:13:08.873

我不知道编译器的内部情况，但这是如何完成的。对于每个局部变量，编译器维护一个初始化为 false 的标志。每当使用变量时，编译器都会检查它是否在不包含变量声明的类或闭包中使用；如果是这样，则标志设置为真。在变量范围的末尾，如果标志仍然为假，则变量可以存在于堆栈中。否则它必须存在于堆上。

# .net - 如何使用 MongoDB 中的时间数据将年/月/日日期解析为更具体的日期？

> ID：12831025
> 
> 赞同：0
> 
> 时间：2012-10-11T01:45:39.470
> 
> 标签：.net, mongodb, datetime, mongodb-.net-driver

我正在努力将我的博客转换为使用`/year/month/day`类型 URL。不过，我在这个概念上遇到了一个非常糟糕的问题。我希望只有小时/分钟的分辨率，但当然我所有的条目都尽可能地以完整的时间存储（我不想改变它）。

我该如何使用 MongoDB 将特定日期解析为不太具体的日期？我正在使用 10gen 的 .Net 官方 MongoDB 映射器。

我的数据模型看起来像：

```
public class BlogEntryData
{
    [BsonId]
    public ObjectId ID;
    public string Title;
    public string Text;
    public DateTime Posted;
    public DateTime Edited;
    public List<string> Tags;
    [BsonDefaultValue(true)]
    public bool Publish;
} 
```

我得到了我的博客的条目

```
var c=Config.GetDB().GetCollection<BlogEntryData>("entries");
BlogEntryData entry;
try
{
    entry=c.FindOneByIdAs<BlogEntryData>(new ObjectId(RouteParams["id"]));
}
catch
{
    throw new HttpException(404,"Blog entry not found");
}

if(entry==null)
{
    throw new HttpException(404,"Blog entry not found");
} 
```

我知道如何将其更改为使用数字搜索字段之类的 ID 而不是 ID，但我从未查询过日期。

另外，顺便说一句，将非规范化的“URL日期”存储为我的条目模型中的字符串会更好吗？如果索引在日期或其他情况下无法正常工作，我只想这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:06:23.673

您的 DateTimes 可以用以下语法在 Mongo 中表示；

```
ISODate("2012-10-11T17:33:51.994Z") 
```

这是规范的、可排序的格式。所以它从年开始，然后是月，然后是日，然后是小时等，所以它对于最具体的顺序来说已经是最少的了。你可以用这个做几件事。

1.  您可以对其进行字符串解析，只需使用字符串的第一部分。但这不太聪明。
2.  *除了*ISODate()之外，您还可以简单地将年份和月份复制为单独的字段。这里的好处是您可以直接引用这些字段，并且可以专门索引它们。
3.  最后，您可以使用范围进行搜索，因此可以使用其速记；

> db.so.find({Posted:{$gt: ISODate("2012-10-11"), $lt:ISODate("2012-10-12")}})

我根本不推荐 1，但 2 和 3 会很好用。

顺便说一句，这两种机制都可以很好地转化为 C# 驱动程序。因此，通过更完整的答案；

```
 var dayOfInterest = new DateTime(2012, 10, 11);
        var rangeOfInterest = dayOfInterest.AddDays(1);

// ...

         var entries = c.FindAs<BlogEntryData>(Query.And(
                                    Query.GT("Posted", dayOfInterest),
                                    Query.LT("Posted", rangeOfInterest)
                         )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:37:31.390

在开始之前，让我确保我正确理解了您的问题。您当前以日期/时间格式存储日期，但希望能够以不那么精细的方式使用和查询日期。如果这是您想知道的，那么我有一个好消息要告诉您：所有这些在 mongodDB 中都非常简单。

首先，您应该阅读[有关此主题的 mongodb 食谱文章，](http://cookbook.mongodb.org/patterns/date_range/)以了解如何在 mongodb 内部查询和索引日期。

其次，一旦你在 c# 中有日期，它就是（我相信，我试图通过一些搜索来确认，但仍然不是 100% 确定）在 c# DateTime 类中。这个类有很多方法可以用来查看不同粒度的日期。有关该主题的更多信息，请查看[microsoft 文档](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

希望这能回答您的问题并为您提供继续享受 mongodb 所需的工具

# android - Android MediaPlayer 无法在 android 4.0 冰淇淋三明治上运行

> ID：12831026
> 
> 赞同：0
> 
> 时间：2012-10-11T01:45:40.793
> 
> 标签：android, android-mediaplayer

我制作了一个使用媒体播放器从在线资源播放媒体的应用程序，它可以在运行 android 2.3.7 姜饼的手机上运行，​​但是当我尝试在另一部运行 android 4.0 的手机上运行它时，它会在播放按钮时崩溃按下。我到处搜索，只是找不到问题的解决方案。任何帮助将不胜感激。我的代码和日志结果如下：

```
import android.annotation.SuppressLint;
import android.app.Activity;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

@SuppressLint({ "UseValueOf", "UseValueOf" })
public class DisplayMessage5 extends Activity
implements Runnable, OnClickListener, OnSeekBarChangeListener {

    private ImageButton play;
    private ImageButton pause;
    private ImageButton stop;
    private MediaPlayer mediaPlayer;
    private SeekBar seekBar;
    private TextView textViewSecs;
    private TextView textViewTotal;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message5);
        play = (ImageButton)findViewById(R.id.play_button);
        pause = (ImageButton)findViewById(R.id.pause_button);
        stop = (ImageButton)findViewById(R.id.stop_button);
        seekBar = (SeekBar)findViewById(R.id.seekBar1);
        textViewSecs = (TextView)findViewById(R.id.progress_text_secs);
        textViewTotal = (TextView)findViewById(R.id.progress_text_mins);
        seekBar.setOnSeekBarChangeListener(this);
        play.setOnClickListener(this);
        pause.setOnClickListener(this);
        stop.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_display_message5, menu);
        return true;
    }

    @Override
    public void run() {
        int currentPosition= 0;
        int total = mediaPlayer.getDuration();
        while (mediaPlayer!=null && currentPosition<total) {
            try {
                Thread.sleep(1000);
                currentPosition= mediaPlayer.getCurrentPosition();
            } catch (InterruptedException e) {
                return;
            } catch (Exception e) {
                return;
            }            
            seekBar.setProgress(currentPosition);
        }

    }

    public void onClick(View v) {
        if (v.equals(play)) {
            if (mediaPlayer != null && mediaPlayer.isPlaying()) return;
            if(seekBar.getProgress() > 0) {
                try {
                    mediaPlayer.prepareAsync();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
                mediaPlayer.start();
                return;
            }
            Uri uri = Uri.parse("myurl");
            mediaPlayer = MediaPlayer.create(this, uri);
            try {
                mediaPlayer.prepareAsync();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            }
            mediaPlayer.start();
            seekBar.setProgress(0);
            seekBar.setMax(mediaPlayer.getDuration());
            new Thread(this).start();
        }

        if (pause.isPressed()) {
            mediaPlayer.pause();
        } 

        if(stop.isPressed()){
            mediaPlayer.stop();
            mediaPlayer.reset();
        }

    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        int progressSecs = (progress / 1000) % 60;
        int progressMins = (progress / 1000) / 60;
        int totalTime = mediaPlayer.getDuration();
        int totalSecs = (totalTime / 1000) % 60;
        int totalMins = ((totalTime / 1000) / 60) % 60;
        int totalHours = totalTime / 1000 / 60 / 60;
        textViewSecs.setText(String.valueOf(String.format("%02d", progressMins)) + ":" + String.valueOf(String.format("%02d", progressSecs)));
        textViewTotal.setText(String.valueOf(String.format("%02d", totalHours)) + ":" + String.valueOf(String.format("%02d", totalMins)) + ":" + String.valueOf(String.format("%02d", totalSecs)));
        if(fromUser){
            mediaPlayer.seekTo(progress);
        }

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {

    }

    @Override
    public void onStopTrackingTouch(SeekBar seekbar) {

    }

} 
```

日志

```
10-10 20:15:47.156: E/AndroidRuntime(15124): FATAL EXCEPTION: main
10-10 20:15:47.156: E/AndroidRuntime(15124): java.lang.NullPointerException
10-10 20:15:47.156: E/AndroidRuntime(15124):    at com.marnis.na.shares.DisplayMessage5.onClick(DisplayMessage5.java:86)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.view.View.performClick(View.java:3511)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.view.View$PerformClick.run(View.java:14105)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.os.Handler.handleCallback(Handler.java:605)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.os.Looper.loop(Looper.java:137)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at android.app.ActivityThread.main(ActivityThread.java:4613)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at java.lang.reflect.Method.invoke(Method.java:511)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
10-10 20:15:47.156: E/AndroidRuntime(15124):    at dalvik.system.NativeStart.main(Native Method)
10-10 20:15:48.119: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:48.176: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:48.686: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:48.686: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:49.186: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:49.186: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:49.686: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:49.686: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:50.186: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:50.186: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:50.686: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:50.686: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:51.196: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:51.196: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:51.696: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:51.696: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:52.196: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:52.196: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:52.696: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:52.696: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:53.198: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:53.198: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:53.706: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:53.706: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:54.206: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:54.206: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:54.706: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:54.706: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:55.206: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:55.216: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:55.706: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:55.716: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:56.207: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:56.216: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:56.706: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:56.706: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:57.206: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:57.206: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:15:57.706: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:15:57.706: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:16:47.626: I/dalvikvm(15124): threadid=3: reacting to signal 3
10-10 20:16:47.666: I/dalvikvm(15124): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:20:47.226: I/Process(15124): Sending signal. PID: 15124 SIG: 9
10-10 20:21:50.226: V/ActivityThread(15667): com.marnis.na.shares white listed for hwui
10-10 20:21:50.536: D/libEGL(15667): loaded /system/lib/egl/libGLES_android.so
10-10 20:21:50.576: D/libEGL(15667): loaded /system/lib/egl/libEGL_tegra.so
10-10 20:21:50.626: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:50.657: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:50.746: D/libEGL(15667): loaded /system/lib/egl/libGLESv1_CM_tegra.so
10-10 20:21:50.766: D/libEGL(15667): loaded /system/lib/egl/libGLESv2_tegra.so
10-10 20:21:50.796: D/OpenGLRenderer(15667): Enabling debug mode 0
10-10 20:21:53.796: D/OpenGLRenderer(15667): Flushing caches (mode 0)
10-10 20:21:55.966: D/MediaPlayer(15667): Couldn't open file on client side, trying server side
10-10 20:21:55.996: E/MediaPlayer(15667): Unable to to create media player
10-10 20:21:56.026: D/MediaPlayer(15667): create failed:
10-10 20:21:56.026: D/MediaPlayer(15667): java.io.IOException: setDataSource failed.: status=0x80000000
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer._setDataSource(Native Method)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:844)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:806)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:761)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer.create(MediaPlayer.java:695)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.media.MediaPlayer.create(MediaPlayer.java:676)
10-10 20:21:56.026: D/MediaPlayer(15667):   at com.marnis.na.shares.DisplayMessage4.onClick(DisplayMessage4.java:77)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.view.View.performClick(View.java:3511)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.view.View$PerformClick.run(View.java:14105)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.os.Handler.handleCallback(Handler.java:605)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.os.Looper.loop(Looper.java:137)
10-10 20:21:56.026: D/MediaPlayer(15667):   at android.app.ActivityThread.main(ActivityThread.java:4613)
10-10 20:21:56.026: D/MediaPlayer(15667):   at java.lang.reflect.Method.invokeNative(Native Method)
10-10 20:21:56.026: D/MediaPlayer(15667):   at java.lang.reflect.Method.invoke(Method.java:511)
10-10 20:21:56.026: D/MediaPlayer(15667):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
10-10 20:21:56.026: D/MediaPlayer(15667):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
10-10 20:21:56.026: D/MediaPlayer(15667):   at dalvik.system.NativeStart.main(Native Method)
10-10 20:21:56.026: D/AndroidRuntime(15667): Shutting down VM
10-10 20:21:56.026: W/dalvikvm(15667): threadid=1: thread exiting with uncaught exception (group=0x40a2f3f8)
10-10 20:21:56.026: E/AndroidRuntime(15667): FATAL EXCEPTION: main
10-10 20:21:56.026: E/AndroidRuntime(15667): java.lang.NullPointerException
10-10 20:21:56.026: E/AndroidRuntime(15667):    at com.marnis.na.shares.DisplayMessage4.onClick(DisplayMessage4.java:79)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.view.View.performClick(View.java:3511)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.view.View$PerformClick.run(View.java:14105)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.os.Handler.handleCallback(Handler.java:605)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.os.Looper.loop(Looper.java:137)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at android.app.ActivityThread.main(ActivityThread.java:4613)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at java.lang.reflect.Method.invoke(Method.java:511)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
10-10 20:21:56.026: E/AndroidRuntime(15667):    at dalvik.system.NativeStart.main(Native Method)
10-10 20:21:56.556: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:56.566: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:57.086: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:57.096: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:57.586: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:57.596: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:58.096: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:58.106: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:58.596: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:58.606: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:59.097: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:59.097: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:21:59.596: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:21:59.596: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:22:00.096: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:22:00.096: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:22:00.597: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:22:00.606: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:22:01.096: I/dalvikvm(15667): threadid=3: reacting to signal 3
10-10 20:22:01.096: I/dalvikvm(15667): Wrote stack traces to '/data/anr/traces.txt'
10-10 20:22:01.306: I/Process(15667): Sending signal. PID: 15667 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:28:08.550

```
if(seekBar.getProgress() > 0) {
    try {
        mediaPlayer.prepareAsync();
    } 
    catch (IllegalStateException e) {
        e.printStackTrace();
    }
        mediaPlayer.start();
        return;
} 
```

发生错误是因为您尝试访问空对象 (mediaPlayer) 的方法。它可能发生在 IF 块中，因为您的 seekBar 的默认值不是 0。在这种情况下，您应该在 onCreate 方法中初始化 mediaPlayer，而不是在 onClick 中。

# java - Java 集合操作

> ID：12831028
> 
> 赞同：0
> 
> 时间：2012-10-11T01:45:59.160
> 
> 标签：java

1.  有没有比我在 add 方法中编码的更好的方法将列表添加到另一个现有列表？
2.  从播放列表中删除歌曲列表的方法是否正确，还是我会遇到并发修改异常？

    ```
    class Playlist
    {
    List<Song> playList;
    public void addSongs(List<Song> songs)
    {
      for(Song s:songs)
      playList.add(s);
    }

    public void removeSongs(List<Song> songs)
    {
      for(Song s:songs)
      if(playList.contains(s))
      playList.remove(s);
    }

    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:48:42.843

要将一个列表中的所有元素添加到另一个列表中，请使用；

[`List.addAll`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#addAll%28java.util.Collection%29)

> 将指定集合中的所有元素附加到此列表的末尾，按照指定集合的​​迭代器返回的顺序

从另一个用途中删除一个列表中的所有元素；

[`List.removeAll`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)

> 从此列表中删除指定集合中包含的所有元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T02:07:16.257

参考您的版本`removeSongs`

> 但是想知道，因为这是在迭代列表时对列表的修改，它是否会导致并发修改异常

假设列表是标准列表类的实例，您的代码不应抛出 CME。

如果您在迭代集合时修改集合（除了您使用`Iterator.remove()`...时），通常会抛出 CME。您的代码正在迭代`songs`和修改`playlist`. 这不会导致显示的代码中出现 CME。

但是，如果*其他代码*`playlist`与此代码同时迭代，*则其他代码*可能会在下次使用其迭代器时获得 CME。同样，如果在您的代码迭代时修改*了其他代码*`songs`，则*此*代码可能会引发 CME。（您需要查看其余代码以确定是否可能出现这些情况。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T01:48:14.543

使用`addAll()`和 `removeAll()`方法：

```
playList.addAll(songs);

playList.removeAll(songs); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T01:50:55.900

实例化你的`List`

```
class Playlist
{
List<Song> playList;
public Playlist(){
 playList = new ArrayList<Song>();
} 
```

这里不需要循环。改为使用`addAll`。

```
public void addSongs(List<Song> songs)
{
  playList.addAll(songs);
} 
```

您在这里也不需要循环。改为使用`removeAll`。

```
public void removeSongs(List<Song> songs)
{
  playList.removeAll(songs);
}

} 
```

# c++ - 我可以从命令行构建 MFC 应用程序吗？

> ID：12831030
> 
> 赞同：2
> 
> 时间：2012-10-11T01:46:34.667
> 
> 标签：c++, visual-c++, mfc

我有所有必要的 MFC 库，它们都在一个名为“atlmc”的目录中。我从[http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/c8556098-6f41-42cb-9de6-38ed24c3faf9创建了一个复制的简单 helloworldmfc.cpp](http://social.msdn.microsoft.com/Forums/en-US/vcmfcatl/thread/c8556098-6f41-42cb-9de6-38ed24c3faf9)

这是代码：

```
#include <afxwin.h>

  class HelloApplication : public CWinApp
  {
  public:     
   virtual BOOL InitInstance();
  };

  HelloApplication HelloApp;

  class HelloWindow : public CFrameWnd
  {        
   CButton* m_pHelloButton;
  public:     
   HelloWindow();
  };

  BOOL HelloApplication::InitInstance()
  {        
   m_pMainWnd = new HelloWindow();       
   m_pMainWnd->ShowWindow(m_nCmdShow);      
   m_pMainWnd->UpdateWindow();      
   return TRUE;
  }

  HelloWindow::HelloWindow()
  {        
   Create(NULL,             
    "Hello World!",               
    WS_OVERLAPPEDWINDOW|WS_HSCROLL,                
    CRect(0,0,140,80));        
   m_pHelloButton = new CButton();
   m_pHelloButton->Create("Hello World!",WS_CHILD|WS_VISIBLE,CRect(20,20,120,40),this,1);
  } 
```

我已经链接了链接器要求的每个库文件等，它们有很多。这是我的构建命令：

> C:\Users\Scruffy\Desktop\MSVC>Bin\cl.exe hellomfc.cpp /EHsc /I atlmfc\include /I Includes /I Includes\Winsdk atlmfc\lib\amd64\nafxcw.lib Libs\libcmt.lib Libs\ Ke rnel32.Lib Libs\User32.Lib Libs\Gdi32.Lib Libs\MSImg32.Lib Libs\ComDlg32.Lib Libs\WinSpool.Lib Libs\AdvAPI32.Lib Libs\Shell32.Lib Libs\ComCtl32.Lib Libs\ShLwApi .Lib Libs\Uuid.lib atlmfc\lib\amd64\atls.lib Libs\Ole32.Lib Libs\OleAut32.Lib Libs\oldnames.lib Libs\WS2_32.Lib Libs\MsWSock.Lib Libs\OleAcc.Lib Libs\comsuppw.l ib 库\GdiPlus.lib 库\Imm32.Lib 库\WinMM.Lib 库\MsXml2.Lib 库\OleDlg.L ib 库\Urlmon.Lib

编译器的回应抱怨`__tmainCRTStartup`找不到。以及关于 _WIN32_WINNT 未定义的其他一些事情，尽管这似乎只是一个警告，而不是一个错误。

这是我通过它运行构建命令后来自 cl.exe 的完整响应：

> Microsoft (R) C/C++ 优化编译器版本 16.00.30319.01 for x64 版权所有 (C) Microsoft Corporation。版权所有。
> 
> hellomfc.cpp _WIN32_WINNT 未定义。默认为 _WIN32_WINNT_MAXVER（参见 WinSDKVer.h） Microsoft (R) 增量链接器版本 10.00.30319.01 版权所有 (C) Microsoft Corporation。版权所有。
> 
> /out:hellomfc.exe hellomfc.obj atlmfc\lib\amd64\nafxcw.lib 库\libcmt.lib 库\Kernel32.Lib 库\User32.Lib 库\Gdi32.Lib 库\MSImg32.Lib 库\ComDlg32.Lib 库\ WinSpool.Lib 库\AdvAPI32.Lib 库\Shell32.Lib 库\ComCtl32.Lib 库\ShLwApi.Lib 库\Uuid.lib atlmfc\lib\amd64\atls.lib 库\Ole32.Lib 库\OleAut32.Lib 库\oldnames .lib 库\WS2_32.Lib 库\MsWSock.Lib 库\OleAcc.Lib 库\comsuppw.lib 库\GdiPlus.lib 库\Imm32.Lib 库\WinMM.Lib 库\MsXml2.Lib 库\OleDlg.Lib 库\Urlmon .Lib libcmt.lib(crt0.obj)：错误 LNK2019：未解析的外部符号 main 在函数 __tmainCRTStartup hellomfc.exe 中引用：致命错误 LNK1120：1 个未解析的外部符号

所以`error LNK2019: unresolved external symbol main referenced in function __tmainCRTStartup hellomfc.exe : fatal error LNK1120: 1 unresolved externals` 似乎是问题所在。这个错误基本上意味着编译器找不到入口点，不是吗？如果是这样，MFC 显然将其 WinMain 隐藏在框架中的某个位置。好的好的，我如何链接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:45:15.230

看来您可能没有指定正确的目标平台（Windows vs Console）并且后者没有被链接。

尝试在命令行上指定 /SUBSYSTEM:WINDOWS 以告诉链接器使用哪个启动过程。它是一个链接器标志，因此需要通过 /link 传递到链接阶段。

# ruby-on-rails - Ruby on Rails 现有的 Sybase 数据库

> ID：12831034
> 
> 赞同：2
> 
> 时间：2012-10-11T01:47:25.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用 Rails 连接到现有的 Sybase 数据库并填充一些选择列表。这是我到目前为止所做的：
1\. 安装和配置
FreeTDS 2\. 安装 TinyTDS gem

如果我执行 command `tsql -S serverName -U userName`，我可以查询数据。我的`config/database.yml`配置如下：

```
development:  
  adapter: sybase  
  host: <sybase_host>  
  port: <port_no>  
  username: <user>  
  password: <password>  
  database: <db> 
```

然后我尝试通过生成模型`rails generate model sybase_db --skip-migration`并编辑创建的`app/models/sybase_db.rb`文件，如下所示：

```
class SybaseDb < ActiveRecord::Base  
  set_table_name "my_sybase_table"  
end 
```

当我尝试在中运行`SybaseDb.new`命令时`rails console`，它似乎不起作用。我对 Rails 很陌生，所以我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:24:43.517

一切都取决于您生成名为 sybase_db 的模型的部分。Rails 中的模型通常链接到数据库中的特定表，而不是整个数据库。Rails 使用命名约定来简化表和列与模型和属性的链接。

例如，如果您有一个`User`带有属性的模型，`name`并且`email`它链接到数据库中的一个名为`users`并具有列的表`name`，`email`那么各种美妙的 Rails 魔法就会起作用。您可以启动 rails 控制台并执行`User.all`以生成数据库中所有用户的集合。或者你可能会做类似的事情

```
> u = User.find_by_email 'joe@example.com'
=> #<User id: 123, email: "joe@example.com", name: "Joe"...>
> u.name
=> "Joe" 
```

但是，如果您有一个现有的数据库，那么您可能需要更详细地向 Rails 解释如何将 Sybase 中的名称映射到 Rails 系统中的名称。你有一个这样的例子——如果你的 Sybase 表是用主键`set_table_name`命名的，但它有列，那么你可以创建一个 Rails 模型，比如`t_user``user_id``name``email`

```
class User < ActiveRecord::Base
  set_table_name "t_user"
  set_primary_key "user_id"
end 
```

[这是 Quora 上有关此主题的讨论，其中包含几个不错的链接](http://www.quora.com/Ruby-on-Rails/Is-it-possible-to-map-Ruby-on-Rails-to-an-already-existing-database-model)，您可以使用这些链接进一步了解。

Depending on how extensive your existing system is, you may find that all of the magic of Rails goes away. Rails helps us avoid all of this mapping this to that, and follows strong naming conventions to give us all sorts of wonderful coolness. If your existing system has strong and predictable naming conventions, and isn't terribly far off from Rails' way, you might be able to use Rails successfully.

# resharper - 如何告诉 ReSharper 使用不在顶部的系统命名空间对使用进行排序？

> ID：12831038
> 
> 赞同：50
> 
> 时间：2012-10-11T01:47:44.387
> 
> 标签：resharper, visual-studio-2012

Visual Studio 可以选择在对系统指令进行排序时将它们放在顶部。

![在此处输入图像描述](../Images/ba0414356f60fc8c4a12d4b9c6a5beac.png)

**如果未选中**此设置，则通过右键单击语句并使用*Organize Usings*功能对 using 语句进行排序，将系统命名空间按字母顺序排列在所有其他命名空间导入中。

但是，ReSharper 似乎不支持此设置，它自己的命名空间导入选项页面上也没有任何类似的设置。它总是表现得好像您希望系统名称空间位于顶部。当您在底部已经有一些并且您让 ReSharper 建议要导入的命名空间时，这尤其令人讨厌，然后您最终在列表的两端都有一些。

有没有办法解决这个问题？或者这只是 ReSharper 中的一个错误/疏忽？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T07:34:25.950

我正在使用 ReSharper 7，至少对我而言，ReSharper 从 Visual Studio 选项中获取了“系统指令排序选项”。

有时，当 VS 和 ReSharper 设置混乱时，从 Tool->Import and Export Settings->Reset all settings 重置 Visual Studio 设置会有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-01T18:37:56.207

我在 ReSharper 8 下再次对此进行了测试，看看它是否已修复，我注意到一些有趣的事情：

*   如果我现有的命名空间首先已经有`System`项目，那么 ReSharper 将在它们下面插入新的命名空间。

*   如果我现有的命名空间在项目*之前*至少有一项`System`，那么 ReSharper 将按字母顺序插入新的命名空间。

*   *无论*Visual Studio 的设置如何， ReSharper 的行为都是相同的。它只考虑现有的命名空间 -*而不是*Visual Studio 的设置。

因此，如果我有以下内容：

```
using A;
using System;
using Z; 
```

然后，如果我使用命名空间中的一个类`B`并按 alt-enter 让 ReSharper 添加命名空间，它将最终变为：

```
using A;
using B;
using System;
using Z; 
```

**但是**，如果我只有这个：

```
using System;
using Z; 
```

我做同样的事情，然后我会得到：

```
using System;
using B;
using Z; 
```

VS的设置是什么并不重要。

我认为这也是 ReSharper 7 中发生的事情，我只是没有注意到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-12T20:20:02.903

如果我剪切了所有的使用，然后我将它们粘贴到它们所在的位置，然后进行排序，它似乎尊重该选项：

`Place 'System' directives first when sorting usings`

我正在 Visual Studio Community 2017 和 Resharper 2018.3.4 上对此进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-10T06:12:56.313

[![截屏](../Images/7589985c23a4518d2527f4a603ac9361.png)](https://i.stack.imgur.com/GrS2d.png)

`ReSharper`| `Options`| `Code Editing`| `C#`| `Syntax Style`| `Reference Qualification and 'using' Directives`|`Place 'System.*' and 'Windows.*' namespaces first when sorting 'using' directives`

取消选择它。

另请参阅此 ReSharper 帮助文档：[代码语法样式：命名空间导入 - 配置命名空间导入首选项](https://www.jetbrains.com/help/resharper/Namespace_Imports_Style.html#style)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T17:17:10.933

**版本：Resharper 2021.2 和 VS Studio 2019 Professional**

在 Resharper 上默认检查与该问题有关的设置： [![在此处输入图像描述](../Images/c1113abff61a19e00835e566a0d8c435.png)](https://i.stack.imgur.com/S117j.png)

但是，仅此一项并没有将“系统”使用放在首位。

但是在检查 VS Studio 设置后，`Ctrl+R,Ctrl+ G`按预期工作： [![在此处输入图像描述](../Images/45e6680c8ef48ea5cc3ce30be8243550.png)](https://i.stack.imgur.com/8MC2Y.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-11-12T16:19:29.597

## 对于 ReSharper 2019.2.3

```
ReSharper -> Options -> Code Editing -> C# -> 
Code Style -> Reference Qualification and 'using' Directives 
```

然后取消选中复选框

```
 Place 'System.*' and 'Windows.*' namespaces first when sorting 'using' directives 
```

# c++ - 用于创建密码的 SHA-256 哈希的 Botan 教程或示例

> ID：12831039
> 
> 赞同：3
> 
> 时间：2012-10-11T01:47:49.363
> 
> 标签：c++, qt, cryptography, qcar-sdk, botan

我正在将 .NET 应用程序的一部分移植到 Linux 上的 Qt。我正在尝试复制 .NET 函数的结果以创建密码 + 盐的 SHA-256 哈希。.NET 代码是

```
return new SHA256Managed().ComputeHash(buffer); 
```

其中 buffer 是连接到密码的盐。

我考虑了几个密码库，包括 QCA 和 Botan，在阅读了一些评论后，我决定尝试 Botan。但是，我没有在文档中找到执行与上面列出的代码等效的位置。

有人可以指出我在精美手册或教程中讨论使用 Botan 创建简单哈希的地方吗？我一直在谷歌搜索几个小时而没有找到解决方案。有很多管道和流的 SHA-256 散列示例，但我还没有找到简单散列计算的示例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T03:33:37.377

我猜你只需要[文档](http://botan.randombit.net/doxygen/classBotan_1_1SHA__256.html)。

做你想做的代码是这样的：

```
#include <vector>
#include <sha2_32.h>

using namespace Botan;

secure_vector<byte> somefunction(std::vector<byte> input) {
    SHA_256 sha;
    return sha.process(input);
} 
```

正如我在评论中提到的，**这是一种非常不安全的存储密码的方式**，因此我建议使用 bcrypt 或 PBKDF2（两者都[在 Botan 中实现](http://botan.randombit.net/passhash.html)）。PBKDF2 也是[.NET 标准库的一部分](https://blogs.msdn.com/b/shawnfa/archive/2004/04/14/generating-a-key-from-a-password.aspx?Redirected=true)，因此没有任何借口可以使用通用哈希函数来代替安全密码哈希函数。

[bcrypt](http://botan.randombit.net/doxygen/namespaceBotan.html#a2cfff27fc2bcb01643e4f39225c8390e)所需要的只是：

```
generate_bcrypt(password, random_number_generator, work_factor) 
```

# javascript - Facebook JS API：如何读取 read_stream 数据？

> ID：12831040
> 
> 赞同：2
> 
> 时间：2012-10-11T01:47:54.227
> 
> 标签：javascript, facebook-graph-api

我正在使用 Facebook JavaScript API 并查看了他们的文档，但找不到以下问题的答案。

在用户授予您的应用程序特定权限（在本例中为 read_stream）后，您如何获取该特定数据？更具体地说，我在登录过程中使用以下内容：

```
function login(){
    alert("[fbCommon]" + ' > login');
    FB.login(function(response) {
        if (response.authResponse) {
            //console.log('Welcome!  Fetching your information.... ');
            alert("[fbCommon]" + ' > login > ' + 'Welcome!  Fetching your information.... ');
            FB.api('/me', function(response) {
                //console.log('Good to see you, ' + response.name + '.');
                alert("[fbCommon]" + ' > login > ' + 'Good to see you, ' + response.name + '.');
            });
        } else {
            alert("[fbCommon]" + ' > login > ' + 'User cancelled login or did not fully authorize.');
            //console.log('User cancelled login or did not fully authorize.');
        }
    }, {scope: 'read_stream'});
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:03:57.220

如果您想要的只是他们的流/提要数据，请更改

```
FB.api('/me', function(response) {...}) 
```

到

```
FB.api('/me/feed', function(response) {...}) 
```

您可以使用值得信赖的[Graph Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=me/feed)来检查这一点

# python - 访问 ipdb 中的类成员

> ID：12831046
> 
> 赞同：1
> 
> 时间：2012-10-11T01:48:57.290
> 
> 标签：python, debugging, python-2.7, ipython

也许这个问题看起来很简单，但我试图从 ipdb 中查看一些成员变量，但我看不出如何。

例子：

```
class MyClass( object ):
    def __init__( self, p ):
        self.__p = p
        pass                   # <--- breakpoint here! 
```

**我确信 p 是正确的**。在调试器中，我输入：

```
ipdb> (self.__p) 
```

我收到以下错误消息：

*** * *AttributeError: 'MyClass' 对象没有属性 '__p'**

似乎**self**是*类*，而不是调试器的*实例*。

关于如何执行我的工作的任何想法？

我在 Kubuntu 12.04 - 64 位的 IPython 0.12.1 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:59:37.897

原因见[这里](http://docs.python.org/tutorial/classes.html#private-variables-and-class-local-references)，这是 Python 拥有“私有”变量的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T09:40:04.907

为了让@dom_beau 的评论可见，我将其评论重新发布为答案。

在**ipdb**中访问“私有”类成员的方法是：

```
ipdb> (self._MyClass__p) 
```

# c# - MVC 模型状态和集合

> ID：12831047
> 
> 赞同：0
> 
> 时间：2012-10-11T01:48:58.507
> 
> 标签：c#, asp.net-mvc, validation, modelstate

我有一个我正在尝试解决的问题。

我有一个网格（表格）类型的布局，它将包含`ViewModels`.

我希望能够验证这些`ViewModels`，然后将给定属性的单元格变为红色，如果它包含错误：

```
 Prop 1 | Prop 2 | Prop 3 | Prop 4
Row 1   x    |        |   x    |
Row 2   x    |    x   |        |   x
Row 3        |    x   |   x    | 
```

x = 红细胞

我的问题是如何使用从服务层填充的模型状态来执行此操作？

我正在使用 AutoMapper 将域对象 (POCO) 映射到 ViewModel，其中 POCO 由服务层提供。

所以基本上：

控制器 --> 服务 --> 返回域对象 --> 映射到视图模型 --> 交给视图。

业务逻辑位于服务层中，我正在考虑将模型状态包装器传递给服务，以使用来自域对象的错误填充模型状态。

我会假设某种关键？

我知道模型状态是每个财产权吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:24:49.743

目前尚不清楚您如何在服务层执行验证，但归根结底，您的 ModelState 中的以下项目必须与它们相关联的错误：

```
Items[0].Prop1
Items[0].Prop3
Items[1].Prop1
Items[1].Prop2
Items[1].Prop4
Items[2].Prop2
Items[2].Prop3 
```

`Items`视图模型上的集合属性的名称在哪里。因此，您必须使用这些键将这些错误添加到 ModelState 中。

# java - Socket.accept() 抛出空指针异常

> ID：12831052
> 
> 赞同：1
> 
> 时间：2012-10-11T01:49:49.583
> 
> 标签：java, sockets, nullpointerexception, p2p

我正在编写一个 p2p 文件共享程序，它将接受连接并充当服务器本身。

它正在处理中，但线路：60

> 套接字 sock1= tcpSocket.accept();

抛出空指针异常，我不知道出了什么问题。什么都试过了。

```
import java.net.*;
import java.io.*;

public class echoer implements Runnable {
    int i,backlog;
    public Socket tcpClient= null;
    public ServerSocket tcpSocket= null;
    public echoer(int tcpPort, int udpPort, int backlog) {
        try {
            this.tcpSocket = new ServerSocket(tcpPort,backlog);
            System.out.println("Server connected to "+ InetAddress.getLocalHost() + "on TCP port " + tcpPort + "and UDP port " + udpPort );
            this.backlog= backlog;
            listening();
        }
        catch (SocketTimeoutException s) {
            System.out.println("timeout");
        }
        catch (IOException ioe) {
            System.out.println("could not listen on port 10009");
            System.exit(-1);
        }
}
public echoer () {

}
void listening(){
        try {
                //i++;
                tcpSocket.getInetAddress();
                System.out.println();

                //Thread t1= new Thread((Runnable) new AcceptInput());
                //t1.start();
                //tcpSocket.accept();
                //System.out.println("Connection accepted");
                //messaging();
                Thread t2 = new Thread((Runnable) new echoer());
                t2.start();
            }
            catch (Exception e) {
                System.out.println("Cannot accept connection");
            }
        }

public void Client(String addr, int port) throws IOException 
{
    System.out.println("address= "+ addr+ "port= "+ port);
    tcpClient = new Socket(addr,port);
}
/*void messaging () {
    System.out.println("Starting Thread");
    Thread t = new Thread((Runnable) new echoer());
    t.start();
}*/
public void run() {
    while (true) {
        try {
            //System.out.println("Listening on "+ InetAddress.getLocalHost().getHostAddress() + "on TCP port " + tcpSocket.getLocalSocketAddress());
            Socket sock1= tcpSocket.accept();
            //Client(InetAddress.getLocalHost().getHostAddress(),tcpSocket.getLocalPort());
            System.out.println("Connection accepted");
            ObjectOutputStream out= new ObjectOutputStream(sock1.getOutputStream());
            //Now start the messaging thread nad pass this sock1 to tcpClient
            /*String line;
            System.out.println("Write a message");
            DataInputStream din= new DataInputStream(tcpClient.getInputStream());
            line= din.readUTF();
            if (line == null) {
                din.close();
                tcpClient.close();
                }
            System.out.println("Recvd message:" + line);*/
            if (sock1 != null) {
            tcpSocket.close();
            }
        }
        catch (IOException o) {
            System.out.println("Read Failed");
            }
        }
    }

    /*catch (IOException i) {
        System.out.println("Last statement");
    }
}*/
public static void main(String[] args) {
    new echoer(Integer.parseInt(args[0]),Integer.parseInt(args[1]),5);

}
}

 class AcceptInput implements Runnable {
    String token;
    public void run () {
        BufferedReader br= new BufferedReader(new InputStreamReader(System.in));
        try {
            token= br.readLine();
        if (token== "connect" ) {
            System.out.print("Enter IP address: ");
            BufferedReader ip= new BufferedReader(new InputStreamReader(System.in));
            //accept ip and port
            // pass ip and port to tcpclient socket to initiate a connection
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T01:58:26.393

这是当前的问题，您调用`new Thread((Runnable) new echoer())`它会启动您的线程。

但是，这会调用 echoer 的空默认构造函数，其中当前没有实际代码！

因此，即使您构建了一次套接字，在您这样做之后，您只需创建一个带有所有新套接字的新 echoer 实例并调用`run()`它

这意味着运行中的所有套接字都是空的，因为它们从未设置过，因此`NullPointerException`当您尝试使用它们时会通过 a 。

# ios - 使用 KIF 测试基于位置的 iOS 应用程序

> ID：12831058
> 
> 赞同：0
> 
> 时间：2012-10-11T01:50:21.793
> 
> 标签：ios, testing, geolocation

我想为一个依赖于位置的iOS应用程序编写测试，比如如果你在地方`A`（我的意思是地理位置）这个testStep应该失败并且应该成功并且在位置`B`情况是相反的，

有没有办法模拟在 KIF 测试的位置，比如为模拟器定义一个 stepForBeingAtLocation ，而不是通过单独为每个测试手动选择一个 gpx 文件，

编辑：为了更清楚，我想在我的测试中进行，所以应该在我的代码中或通过调用外部脚本或以某种自动方式完成，我想运行应该在不同位置发生的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:58:05.327

iOS 模拟器能够模拟不同的位置。

选择 iOS Simulator 应用程序，然后从其 OS X 菜单栏中，查看 Debug -> Location。

# ruby-on-rails - Rails erb 格式化问题，幻影空间

> ID：12831059
> 
> 赞同：0
> 
> 时间：2012-10-11T01:50:23.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

哈！我的模板格式奇怪，我无法理解如何/为什么。

```
<% @poll.questions_all.each do |q| %>
          <td>
            <span class="optionvalue">
              <% if can? :read_full, @poll %>
                <%= resp[:texts][q.id] %>
              <% else %>
                <%= resp[:texts][q.id].nil? ? '' : resp[:texts][q.id].gsub(Question::POISON_WORDS_REGEX, '---') %>
              <% end %>
            </span>
            <% unless q.options.empty? %>
              <%= q.get_matching_option(resp[:texts][q.id])? ": #{q.get_matching_option(resp[:texts][q.id])}" : '' %>
            <% end %>
          </td>
        <% end %> 
```

结果如下：

`A : Playgrounds`

不知道第一个空间是从哪里形成的，所有摆脱它的努力都失败了！生成的标记：

```
<td>
   <span class="optionvalue">
       A
   </span>
       : Playgrounds
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:42:51.810

尝试使用`<%- -%>`erb 标签的版本，这些应该抑制额外的空格：

```
<%- if can? :read_full, @poll -%>
  <%= resp[:texts][q.id] %>
<%- else -%>
  <%= resp[:texts][q.id].nil? ? '' : resp[:texts][q.id].gsub(Question::POISON_WORDS_REGEX, '---') %>
<%- end -%> 
```

我不记得你是否在开始和结束标签中都需要它们，但我建议你试试看你是否能得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:00:45.830

可怕的解决方案，但它的工作原理：

```
 <% @poll.questions_all.each do |q| %>
          <td>
            <span class="optionvalue">
              <% if can? :read_full, @poll %>
                <%= resp[:texts][q.id] %></span><%= q.get_matching_option(resp[:texts][q.id])? ": #{q.get_matching_option(resp[:texts][q.id])}" : '' unless q.options.empty? %>
              <% else %>
                <%= resp[:texts][q.id].nil? ? '' : resp[:texts][q.id].gsub(Question::POISON_WORDS_REGEX, '---') %></span><%= q.get_matching_option(resp[:texts][q.id])? ": #{q.get_matching_option(resp[:texts][q.id])}" : '' unless q.options.empty? %>
              <% end %>
          </td>
        <% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:22:44.670

`erb`如果您将所有内容都保留在一行 HTML 中，我很确定会做正确的事情（而不是添加不需要的行）。

对于这种情况，一般来说，我建议您将用于生成内容的任何逻辑放在视图帮助文件中的方法中（或者如果您觉得懒惰，请在 erb 的代码块中，如本例所示）：

```
<% @poll.questions_all.each do |q| %>
  <% 
    if can? :read_full, @poll
      texts = resp[:texts][q.id]
    else
      texts = (resp[:texts][q.id].nil? ? '' : resp[:texts][q.id].gsub(Question::POISON_WORDS_REGEX, '---'))
    end
    if q.options.empty?
      matching_options = ''
    else 
      matching_options = (q.get_matching_option(resp[:texts][q.id])? ": #{q.get_matching_option(resp[:texts][q.id])}" : '')
    end
  %> 
  <td>
    <span class="optionvalue"><%= texts %></span><%= matching_options %>
  </td>
<% end %> 
```

# php - 如何在同一个 if 语句上有多个条件？

> ID：12831060
> 
> 赞同：-3
> 
> 时间：2012-10-11T01:50:32.843
> 
> 标签：php, if-statement

> **可能重复：**
> [具有多个条件的 php if 语句](https://stackoverflow.com/questions/5593512/php-if-statement-with-multiple-conditions)

```
$style = get_option('background_style');
if ($style == "option1") {
    echo '<div class="background-style1">';
} 
```

如果我希望“选项 1”回显 div 类 .background-style1，这就是我所拥有的，但我想知道如何在“选项 1”之后列出更多选项。

我试过这个：

```
if ($style == "option1", "option2", "option3") 
```

但它不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T01:52:02.713

```
if (in_array($style, array("option1", "option2", "option3")) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T01:55:08.060

```
if ($style == 'option1' or $style == 'option2' or $style == 'option3') {
    // do something...
} 
```

这是在 if 语句中包含多个条件的最基本方法，您也可以使用其他逻辑运算符。有关更多信息，请参见此处：

[http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T01:56:27.577

看你的实际需求。

如果您希望为选项 1、2 和 3 显示相同的 div：

```
 if ($style == "option1" || $style == "option2" || $style == "option3") 
```

如果您想单独解决每个条件，请使用@Freethinker 提到的 switch 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T01:53:58.257

您想要的称为 switch 语句。

```
switch($style)
{
    case 'option1':
    // code for option 1;
    break;
    case 'option2':
    // code for option 2;
    break;
    // etc...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T01:55:07.273

```
if (preg_match('/^option[1-3]$/', $style)) { 
```

# jquery - 有没有办法使用你想要的任何字体？

> ID：12831068
> 
> 赞同：-2
> 
> 时间：2012-10-11T01:51:32.883
> 
> 标签：jquery, css

SVG 字母和字符。你做一个显示：无，直到字符被转换？没有疯狂的插件来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:05:20.277

你看过[`@font-face`](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)吗？

# jquery - Fancybox vs 自动补全

> ID：12831069
> 
> 赞同：1
> 
> 时间：2012-10-11T01:51:54.467
> 
> 标签：jquery, autocomplete, fancybox, jquery-autocomplete

我正在尝试在同一页面添加自动完成和幻想框：

```
<?php //automcomplete // ?>

    <script src="scripts/jquery-1.8.2.js"></script>
    <script src="scripts/ui/jquery.ui.core.js"></script>
    <script src="scripts/ui/jquery.ui.widget.js"></script>
    <script src="scripts/ui/jquery.ui.position.js"></script>
    <script src="scripts/ui/jquery.ui.autocomplete.js"></script>
    <link rel="stylesheet" href="css/demos.css">

<?php //fancybox //?>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="scripts/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="css/fancybox/jquery.fancybox-1.3.4.css" media="screen">
  <script type="text/javascript">
    /* <![CDATA[ */ 
        $(document).ready(function() { $.noConflict();
        $("#various3").fancybox({
                'width'         : '95%',
                'height'        : '95%',
                'autoScale'     : false,
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'type'          : 'iframe'
            })

        });
    /* ]]> */ 
    </script> 
```

似乎存在冲突，但 noconflict 对我不起作用 :( 我有两个问题：1-添加这两个功能是否有任何简单的意思和更简单（我发现 .js 很多，它可以使用所有这些查询使我的页面变慢？（我正在考虑除了添加一个滑块-> 更多 jquery！） 2-如何让 fancybox 使用自动完成功能？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:00:12.280

一个 jQuery 实例应该适用于两个插件，最好是最新版本，因此您可以删除此行

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

# c - 行主要与列主要矩阵乘法

> ID：12831071
> 
> 赞同：4
> 
> 时间：2012-10-11T01:52:13.757
> 
> 标签：c, matrix, row, matrix-multiplication

我目前正在开发一个试图计算矩阵乘法的 C 程序。我已经通过循环遍历第二个矩阵的每一列来完成这项任务，如下所示。

我已将大小设置为 1000。

```
for(i=0;i<size;i++)
{
  for(j=0;j<size;j++)
  {
    for(k=0;k<size;k++)
    {
      matC[i][j]+=matA[i][k]*matB[k][j];
    }
  }
} 
```

我想知道这个实现中有什么问题的访问模式。是什么让行/列访问比另一个更有效？我试图从使用缓存的逻辑方面理解这一点。请帮助我理解这一点。非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T03:51:29.057

如果您正在谈论缓存的使用，那么您可能想要做一些称为循环平铺的事情。您将循环分成小块，以便循环的内部部分存储在缓存中（这些天相当大）。所以你的循环会变成类似的东西（如果你使用指针将矩阵传递给函数）

```
for(j=0;j<size;j+=t)
    for(k=0;k<size;k+=t)
       for(i=0;i<size;i+=t)
          for(ii=i;ii<MIN(i+t,size);ii++)
             for(jj=j;jj<MIN(j+t,size);jj++)
        {       
          var=*(c+ii * size+jj);    //Var is a scalar variable                     
          for(kk=k;kk<MIN(k+t,size);kk++)
              {                      
         var = var + *(a+ii *size +kk) * *(bt +jj * size+ kk);          
              }
          *(c+ii *size +jj) = var;
        } 
```

t 的值取决于您获得的加速比。它可以 t = 64,128,256 等等。您可以在这里使用许多其他技术。循环平铺只是一种有效利用缓存的技术。此外，您可以在发送到乘法函数之前转置 B 矩阵。这样，您将获得矩阵 B 元素的线性访问。为了向您解释更多考虑

```
 A  --------   and B | | | |
             --------         | | | |
             --------         | | | | 
             --------         | | | | 
```

在这里，您将始终考虑将 A 的第一行与 B 的第一列相乘。而且由于您使用的是`C`我相信，CPU 需要额外的努力才能在内存中一个接一个地读取矩阵 B 的所有列。为了简化这些工作，您可以转置矩阵并获取矩阵的行`B'`（本质上只是列`B`）并使用循环平铺缓存最大数量的元素以进行乘法运算。希望这会有所帮助。

# internet-explorer-8 - dojo dijit.form.Select IE8 溢出隐藏

> ID：12831073
> 
> 赞同：1
> 
> 时间：2012-10-11T01:52:27.727
> 
> 标签：internet-explorer-8, dojo, overflow, dijit.form

所以我正在使用 dojo.form.Select 控件，它包含非常长的值，例如...

002900000000000000000000000000000000000000000000000000000000000000000000000000000000000000

出于空间原因，我想截断选定的值

0029000000000000000

在我的CSS中，我设置了以下...

```
#ddl.dijitSelect.glossSelect .dijitButtonText{
   display: inline-block;
   max-width: 470px;
   float: left;
   width:auto;
   overflow: hidden;
   padding-right:5px;
}
#ddl.dijitSelect.glossSelect .dijitButtonNode .dijitInline{
   display: inline-block;
   max-width:460px;
   float: left;
   width:auto;
   margin-right:5px;
   overflow:hidden;
} 
```

此代码适用于除 IE8 之外的所有浏览器

这是IE8 ![ie8选择](../Images/94ee65a9c5ea4dedbdfc38618d675d80.png)

这是其他任何地方，包括其他版本的 IE 7 和 9 ![其他地方](../Images/35ee77ffb2bd67b6569b35e929846f18.png)

# php - PHP静态变量，需要帮助计算函数

> ID：12831074
> 
> 赞同：1
> 
> 时间：2012-10-11T01:52:29.280
> 
> 标签：php

我有一个函数，它接受一个输入变量并通过以下调用输出一个模板：

```
outputhtml($blue_widget);
outputhtml($red_widget);
outputhtml($green_widget); 
```

以及该功能的简化版本：

```
function outputhtml($type)
{

    static $current;
    if (isset($current))
    {
        $current++;
    }
    else
    {
        $current = 0;
    }

//some logic here to determine template to output

return $widget_template;

} 
```

现在这是我的问题。如果我在脚本中调用该函数三次或更多次，我希望输出是一种方式，但如果我只调用该函数两次，那么我有一些 html 更改需要反映在返回的模板中。

那么我如何修改这个函数来确定它是否只有两个调用。事后我不能回去问“嘿功能你只运行了两次吗？”

我很难理解如何告诉一个函数在第二次之后它不会被使用，并且可以使用必要的 html 修改。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T01:56:43.587

```
function outputhtml($type)
{
    static $current = 0;
    $current++;

    //some logic here to determine template to output
    if ($current === 2) {
       // called twice
    }

    if ($current > 2) {
       // called more than twice
    }
    return $widget_template;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:00:03.607

`static $current`使用内部函数是不切实际的；我建议使用对象来维护状态，如下所示：

```
class Something
{
    private $current = 0;

    function outputhtml($type)
    {
        // ... whatever
        ++$this->current;
        return $template;
    }

    function didRunTwice()
    {
        return $this->current == 2;
    }
} 
```

该`didRunTwice()`方法是询问“你跑了两次吗？”。

```
$s = new Something;
$tpl = $s->outputhtml(1);
// some other code here
$tpl2 = $s->outputhtml(2);
// some other code here
if ($s->didRunTwice()) {
    // do stuff with $tpl and $tpl2
} 
```

找出一个函数是否只被调用两次的唯一方法是将测试放在代码的末尾；但也许到那时模板不再可访问？如果没有看到更多代码，就不能说太多。

# ios - MKMapView 在 iOS 6 中调整大小后变为空白

> ID：12831075
> 
> 赞同：3
> 
> 时间：2012-10-11T01:52:29.567
> 
> 标签：ios, uitableview, maps, ios6

当我在 iOS 6 中调整 MKMapView 的大小时，我遇到了一个奇怪的问题。基本上这是我的场景：

我有一个 UITableView 在每个单元格中显示一个 MKMapView。

在 iOS 5 中，它看起来像这样：

[http://cl.ly/image/0e0R1623413s](http://cl.ly/image/0e0R1623413s)

在 iOS 6 中，它看起来像这样：

[http://cl.ly/image/2C041E3B3k1X](http://cl.ly/image/2C041E3B3k1X)

选择单元格时，我调用UITableViewView，EndPupdates块，更改单元格的大小，并使用它调整大小的MKMAPView的自动化蒙版。

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

在 beginUpdates 之后， endUpdates 阻止这是我在 iOS 5 中得到的（它就像魅力一样）：

[http://cl.ly/image/3Q0O0q1S0E3N](http://cl.ly/image/3Q0O0q1S0E3N)

但在 iOS 6 中，MKMapView 变为空白，仅显示“合法”链接

[http://cl.ly/image/443x2r2D3l44](http://cl.ly/image/443x2r2D3l44)

我找不到有关此问题的任何有用信息，对此我感到很疯狂。我得到的关于类似问题的唯一参考是苹果开发者论坛中的这个帖子：

[https://devforums.apple.com/message/733353#733353](https://devforums.apple.com/message/733353#733353)

但是，问题是不同的，唯一的建议是在主线程上做这些事情并且 MKMapView 可见。在我的情况下，动画是在主线程上制作的，并且视图也是可见的，所以这显然不是问题。

有没有人有一些建议，想法或想法来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T09:30:34.047

将我的应用程序升级到 iOS6 后，我遇到了类似的问题。我怀疑它与选择风格有关。我的解决方法是将 selectionStyle 设置为 UITableViewCellSelectionStyleNone。我的地图视图不再消失。你可以试试看是否有帮助。

# hadoop - Hadoop Reduce子中的OOM异常

> ID：12831076
> 
> 赞同：0
> 
> 时间：2012-10-11T01:52:40.623
> 
> 标签：hadoop, mapreduce, out-of-memory

我正在为减少子级获取 OOM 异常（Java 堆空间）。在 reducer 中，我将所有值附加到 StringBuilder，这将是 reducer 进程的输出。值的数量并不多。我试图将值`mapred.reduce.child.java.opts`增加到 512M 和 1024M 但这没有帮助。减速器代码如下。

```
 StringBuilder adjVertexStr = new StringBuilder();
        long itcount= 0;
        while(values.hasNext()) {
            adjVertexStr.append(values.next().toString()).append(" ");
            itcount++;
        }
        log.info("Size of iterator: " + itcount);
        multipleOutputs.getCollector("vertex", reporter).collect(key, new Text(""));
        multipleOutputs.getCollector("adjvertex", reporter).collect(adjVertexStr, new Text("")); 
```

在上面的代码中，我在 3 个地方得到了异常。

1.  在异常堆栈跟踪中，行号指向附加字符串的 while 循环语句。
2.  在最后一行 - collect() 语句。
3.  我有一个集合所有值 - 所以没有重复的值。我后来删除了它。

迭代器的一些样本大小如下：238695、1、13、673、1、1等。这些不是很大的值。为什么我不断收到 OOM 异常？任何帮助对我来说都是有价值的。

堆栈跟踪

```
2012-10-10 21:15:03,929 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 238695                                                                                                   
2012-10-10 21:15:04,190 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,190 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,190 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 13                                                                                                       
2012-10-10 21:15:04,190 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,191 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,193 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 673                                                                                                       
2012-10-10 21:15:04,195 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,196 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,196 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,196 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:04,196 INFO partitioning.UndirectedGraphPartitioner: Size of iterator: 1                                                                                                        
2012-10-10 21:15:09,856 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs`    truncater with mapRetainSize=-1 and reduceRetainSize=-1                                                       
2012-10-10 21:15:09,916 INFO org.apache.hadoop.io.nativeio.NativeIO: Initialized cache for UID to  User mapping with a cache timeout of 14400 seconds.                                                     
2012-10-10 21:15:09,916 INFO org.apache.hadoop.io.nativeio.NativeIO: Got UserName hduser for UID         2006 from the native implementation                                                                      
2012-10-10 21:15:09,922 FATAL org.apache.hadoop.mapred.Child: Error running child :       java.lang.OutOfMemoryError: Java heap space                                                                           
    at java.util.Arrays.copyOf(Arrays.java:2882)                                                                                                                                                      
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)                                                                                                                 
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)                                                                                                                         
    at java.lang.StringBuilder.append(StringBuilder.java:119)                                                                                                                                         
    at partitioning.UndirectedGraphPartitioner$Reduce.reduce(UndirectedGraphPartitioner.java:106)                                                                                            
    at partitioning.UndirectedGraphPartitioner$Reduce.reduce(UndirectedGraphPartitioner.java:82)                                                                                             
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)                                                                                                                         
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)                                                                                                                                   
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)                                                                                                                                           
    at java.security.AccessController.doPrivileged(Native Method)                                                                                                                                     
    at javax.security.auth.Subject.doAs(Subject.java:396)                                                                                                                                             
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)                                                                                                           
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:07:00.823

因此，对于您的示例，您希望将特定键的值作为空格分隔的值列表（作为输出键）输出，并将空文本作为输出值。

您的输出格式将按如下方式使用 reduce 键/值（这将在您的 reducer 代码中）：

```
for (Text value : values) {
    multipleOutputs.getCollector("adjvertex", reporter)
       .collect(key, value);
} 
```

然后，实际的 recordWriter 将使用该键作为逻辑触发器：

当传递的密钥与先前传递的密钥不同时，先前写入的记录将被关闭（例如，写一个制表符后跟一个换行符）。将更新先前的键并将新值写入输出流。

如果键与前一个键相同，则将一个空格后跟值输出到输出流。

在记录写入器的关闭方法中，执行与传递新键相同的逻辑（输出一个制表符，后跟一个换行符）。

希望这是有道理的。您唯一需要注意的是您是否有自定义组比较器（这将导致记录写入器中的先前键比较失败）。还记得在更新之前的密钥跟踪变量时制作密钥的深层副本。

# filter - 如何创建一个过滤器作为一个组件，我应该为注释添加什么？

> ID：12831088
> 
> 赞同：1
> 
> 时间：2012-10-11T01:54:32.600
> 
> 标签：filter, annotations, aem, sling

所以，我正在研究 CQ5。我想将捆绑的组件部署为服务，以过滤和修改 .inifinity.json 输出（来自 sling）到 CQ5。

我能够构建和部署，并且组件和捆绑包都处于活动状态。但是，当页面或调用 infinity.json 时，我在日志中看不到输出。我怀疑是因为服务没有正确安装？或其他一些服务在运行我的服务之前返回呼叫？没有把握。这是我的代码：

```
package com.my.test;
import javax.servlet.*;
import java.io.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import aQute.bnd.annotation.component.*;

@Component(
        provide=Filter.class,
        immediate=true
)
public class TestFilter implements Filter {

    private static final Logger LOGGER = LoggerFactory.getLogger(TestFilter.class);
    private FilterConfig filterConfig;

    public void init (FilterConfig filterConfig)  {
        LOGGER.info ("INIT .");
        this.setFilterConfig(filterConfig);
    }

    public void destroy() {
        LOGGER.info ("Destroy me NOW!!...");
    }

    public void doFilter (ServletRequest request, ServletResponse response, FilterChain chain){
        try
        {
            LOGGER.info ("Within Simple Filter ... :) ");
            LOGGER.info  ("Filtering the Request ...");

          chain.doFilter (request, response);

          LOGGER.info ("Within Simple Filter ... ");
          LOGGER.info ("Filtering the Response ...");

        } catch (IOException io) {
            LOGGER.info ("IOException raised in SimpleFilter");
        } catch (ServletException se) {
            LOGGER.info  ("ServletException raised in SimpleFilter");
        }
    }

    public FilterConfig getFilterConfig() {
        return this.filterConfig;
    }

    public void setFilterConfig (FilterConfig filterConfig){
        this.filterConfig = filterConfig;
    }

} 
```

我在注释中遗漏了什么吗？或者我应该做的任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:17:44.243

[查看此处](http://dev.day.com/discussion-groups/content/lists/cq-google/2011-03/2011-03-03__day_communique_Servlet_Filters_Configuration_in_CQ5_4_Venkat_Vinjamuri.html)和[此处](http://mail-archives.apache.org/mod_mbox/sling-users/201204.mbox/%3CCAE-0ag8GgyuYX-ocuXu7+PC+BDfBGW4m4SAyk8c+ZUyc_2C0+A@mail.gmail.com%3E)的讨论线程，您似乎需要添加注释来设置[sling.filter.scope](http://sling.apache.org/site/filters.html) @Property，并且还需要声明 @Service。

像这样的东西：

```
@Component(
    provide=Filter.class,
    immediate=true
    )
@Service(javax.servlet.Filter.class)
@Properties({
    @Property(name = "sling.filter.scope", value = "request") 
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:05:51.553

Sling 集成测试服务源代码在 [1] 处包含一些过滤器，您可以将其用作示例。正如大卫所说，您可能只是缺少 @Service 注释。

[http://svn.apache.org/repos/asf/sling/trunk/launchpad/test-services/src/main/java/org/apache/sling/launchpad/testservices/filters/](http://svn.apache.org/repos/asf/sling/trunk/launchpad/test-services/src/main/java/org/apache/sling/launchpad/testservices/filters/)

# html - 没有输入功能的文本区域

> ID：12831092
> 
> 赞同：1
> 
> 时间：2012-10-11T01:55:04.533
> 
> 标签：html, textarea, chat

我正在使用文本聊天进行应用程序。我想显示文本输出，但不想自定义编码整个 div，带有滚动条等。

`<textarea>`似乎在接受文本输入方面表现得非常好。如何禁用输入新值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:58:24.807

为了防止在 textarea 中输入，将 readonly 属性添加到它

```
<textarea readonly></textarea> 
```

# spring - Spring+Hibernate+MS SQL：对象引用一个未保存的瞬态实例子对象id（主键）不能为零

> ID：12831096
> 
> 赞同：1
> 
> 时间：2012-10-11T01:55:31.490
> 
> 标签：spring, hibernate

我正在使用 Spring+Hibernate+MS SQL 开发一个 Web 应用程序并遇到一个奇怪的症状：

我的父对象`A`有一个字段引用 ( `FK`) 另一个子对象`B`。在`A`，我有注释

```
@ManyToOne(cascade={CascadeType.PERSIST, CascadeType.MERGE}, fetch=FetchType.EAGER) 
```

当我`Session.SaveOrUpdate`呼吁`A`。一切正常，`B`并且除了一种情况外也保持不变：

当`id field`表 B 的（这是主键）为 0 时，它会给出异常：

> 对象引用了一个未保存的瞬态实例...

如果它不为零，那么一切都很好。

正如大多数人对异常“对象引用未保存的瞬态实例......”所建议的那样，我也尝试将注释更改为

```
@ManyToOne(cascade={CascadeType.ALL}, fetch=FetchType.EAGER). 
```

然后它给了我另一个错误说`Primary key cannot be NULL`......

有人对这个问题有任何意见或解释吗？非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:04:02.287

谢谢你的回复，肯。我将 A 映射如下：

```
@Entity
@Table(name="TableA")
public class TableA implements Serializable {
.....
@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE}, fetch=FetchType.EAGER)
@JoinColumn(name="B_id")
public TableB  getB_id() {      
    return this.b_id;
}
public void setB_id(TableB  p) {        
    this.b_id= p;
}
...
} 
```

和 B 如下：

```
Entity
@Table(name="TableB")
public class TableB implements Serializable {
private int B_id;
private String B_name;
private String B_desc;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="B_id")    
public int getB_id()
{
    return this.B_id;
}
public void setB_id(int id)
{
    this.B_id = id;
}

@Column(name="B_name")
public String B_name()
{
    return this.B_name;
}
} 
```

在调用 session.SaveOrUpdate(a) 之前，我有：

```
TableA tempA = aDao.getA(id); 
TableB tempB =bDao.getB(0);
tempA.setB_id(tempB);
session.SaveOrUpdate(tempA); 
```

# c# - 不同域之间的序列化

> ID：12831098
> 
> 赞同：0
> 
> 时间：2012-10-11T01:56:08.083
> 
> 标签：c#, asp.net, object, serialization, data-transfer-objects

我是序列化的新手。我需要将一个序列化对象从一个网站发送到另一个网站。我在我的第一个网站中使用以下序列化代码

```
 private void Serialize()
    {

        Cuser cat = new Cuser();
        cat.UserNO = 1;
        cat.UerName = "chamara";
        cat.Passwod = "123";
        XmlSerializer ser = new XmlSerializer(cat.GetType());
        StringBuilder sb = new StringBuilder();
        StringWriter writer = new StringWriter(sb);
        ser.Serialize(writer, cat);
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(sb.ToString());
        Response.Redirect("https://site1.com.au");
    } 
```

现在我需要从 site1.com 检索（反序列化）这些数据。我有反序列化代码。我需要知道如何传输这个对象？我是否出于正确的目的使用序列化？希望我的解释足够清楚以理解这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:31:41.320

您可能希望在站点 1 上以表单形式呈现数据，并使用客户端脚本自动将表单发布到站点 2。

# css - 格式化文本?

Textareas are great because of some built in functionality (scrollbars). How can I format `<spans></spans>`of text inside of the `<textarea></code>?<</h1> <blockquote> <p>ID：12831101</p> <p>赞同：49</p> <p>时间：2012-10-11T01:56:49.883</p> <p>标签：css, html, textarea</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：86</p> <p>时间：2012-10-11T02:03:39.013</p> </blockquote> <p>如果您需要自定义您的 textarea，请使用具有该<code>contenteditable</code>属性的另一个元素（如 DIV）重现其行为。</p> <p>它更可定制，更现代的方法，textarea 仅适用于纯文本内容，而不适用于丰富的内容。</p> <pre><code><div id='fake_textarea' contenteditable></div> </code></pre> <p>滚动条可以通过 CSS 溢出属性来重现。</p> <p>您可以在表单中正常使用此假文本区域，即：如果您必须通过 POST 方法提交其内容，您可以执行以下操作（使用 jQuery）：</p> <pre><code><input type='hidden' id='fake_textarea_content' name='foobar' /> </code></pre> <p>...</p> <pre><code>$('#your_form').submit(function() { $('#fake_textarea_content').val($('#fake_textarea').html()); }); </code></pre> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：10</p> <p>时间：2013-07-09T12:17:38.350</p> </blockquote> <p>您不能单独为文本区域的内容设置样式，您必须使用<code><div></code>s 或类似的东西。</p> <p>你想要这样的东西吗：？</p> <p><a href="http://jsfiddle.net/mekwall/XNkDx/" rel="nofollow noreferrer">http://jsfiddle.net/mekwall/XNkDx/</a></p> <pre><code>$('.editable').each(function(){ this.contentEditable = true; }); </code></pre> <p>这允许您编辑 div 的内容，它仍然看起来像一个 textarea，</p> <p><b>粗体现在可以工作了。</b></p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：4</p> <p>时间：2012-10-11T01:58:58.693</p> </blockquote> <p>您不能在<code>TEXTAREA</code>.</p> <p><code>overflow: auto</code>滚动可以通过添加和固定<code>width</code>和/或应用于任何元素<code>height</code>。</p> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：2</p> <p>时间：2012-10-17T12:29:05.290</p> </blockquote> <p>您可以使用 CKEditor 等 Web 的 html 编辑器来格式化文本区域中的数据。检查这个<a href="http://ckeditor.com/" rel="nofollow">http://ckeditor.com/</a></p> <hr/> <h2>回答 #5</h2> <blockquote> <p>赞同：0</p> <p>时间：2013-12-12T12:17:41.687</p> </blockquote> <p>提交“假”文本区域的另一种方法是在表单标签中包含以下行</p> <pre><code><form onsubmit=" $('#fake_textarea_content').val($('#fake_textarea').html());"> </form> </code></pre> </body> </html></textarea>`

# php - 复杂的 jqueryui 对话框

> ID：12831104
> 
> 赞同：0
> 
> 时间：2012-10-11T01:57:49.340
> 
> 标签：php, jquery-ui, jquery

好吧，这是一个自以为是的标题——这对*我来说*很复杂。

**概述：（** 请参阅底部
的屏幕截图和更新。 ）上`$(document).ready`，jQuery/AJAX 建立表格，每行有一个联系人
b。每个表格行，第 3 个单元格，是：`<a id="edit_83">edit</a>`tag -- "83" 是示例，表示来自 db 的 contact_id，因此每个 a tag 将具有在步骤 (d)
c 中使用的唯一 ID 号。在构建表时，为 AJAX 回调中的每个联系人构建 jqueryui 对话框 (autoOpen=false)
d。单击任何编辑锚点时，jquery 会拆分 contact_id 并使用它来显示适当的 jQueryUI 对话框。

**目标：**单击任何表格行中的*编辑*链接会打开一个 jqueryui 对话框，其中包含该联系人的编辑表单。

**问题：**表单打开，但里面没有表单域。事实上，在 DOM 中，每个表格行都缺少注入的表单/div。？？？

* * *

HTML：

```
<div id="contact_table"></div> 
```

* * *

Javascript/jQuery - AJAX 调用：

```
$(document).ready(function() {
$.ajax({
    type: "POST",
    url: "ax_all_ajax_fns.php",
    data: 'request=index_list_contacts_for_client&user_id=' + user_id,
    success: function(data) {
        $('#contact_table').html(data);
        var tbl = $('#injected_table_of_contacts');
        tbl.find("div").each(function() {
            $(this).dialog({
                autoOpen: false,
                height: 400,
                width: 600,
                modal: true,
                buttons: 
                    {
                        Okay: function() {
                            $( this ).dialog( "close" );
                        },
                        Cancel: function() {
                            $( this ).dialog( "close" );
                        }
                    }
            })
        });
    }
});
}); 
```

* * *

AJAX/PHP 1 - ax_all_ajax_fns.php：

```
}else if ($_POST['request'] == 'index_list_contacts_for_client') {
    $user_id = $_POST['user_id'];
    $r = build_contact_table_for_client($user_id);
    echo $r;
} 
```

* * *

AJAX/PHP 2：-functions.php

```
function build_contact_table_for_client($user_id) {
    $aContact_info = get_contact_data_ARRAY_user_id($user_id, 'first_name','last_name','email1','cell_phone', 'contact_id');
    $r = '<table id="injected_table_of_contacts">
            <tr>
                <th width="120">Name</th>
                <th width="200">Email Address</th>
                <th width="100">Cell Phone</th>
                <th>Action</th>
            </tr>
        ';
    while ($rrow = mysql_fetch_array($aContact_info)) {
        $r .= '
            <tr>
                <td>'.$rrow['first_name'].' '.$rrow['last_name'].'</td>
                <td>'.$rrow['email1'].'</td>
                <td>'.$rrow['cell_phone'].'</td>
                <td>
                    <a class="editcontact" id="edit_'.$rrow['contact_id'].'" href="#">edit</a>
                     / 
                    <a class="delcontact" id="del_'.$rrow['contact_id'].'" href="#">del</a>
                    <div id="editThisContact_'.$rrow['contact_id'].'" style="display:none">
                        <form name="editForm" onsubmit="return false;">
                            <p class="instructions">Edit contact information:</p>
                            First Name:<span style="padding:0 20px;">Last Name:</span><br />
                            <input type="hidden" id="fn_'.$rrow['contact_id'].'" value="'.$rrow['first_name'].'">
                            <input type="hidden" id="ln_'.$rrow['contact_id'].'" value="'.$rrow['last_name'].'">
                            Email:<span style="padding:0 20px;">Cell Phone:</span><br />
                            <input type="hidden" id="em_'.$rrow['contact_id'].'" value="'.$rrow['email1'].'">
                            <input type="hidden" id="cp_'.$rrow['contact_id'].'" value="'.$rrow['cell_phone'].'">
                        </form>
                    </div>
                </td>
            </tr>
        ';
    }

    $r .= '</table>';
    return $r;
} 
```

* * *

jQuery - document.click 事件 - 如果注入的代码丢失，它如何找到选择器？

```
$(document).on('click', '.editcontact', function(event) {
    var contact_id = this.id.split( 'edit_' )[1];
    var etc = $( '#editThisContact_' + contact_id );
    etc.dialog("open");
}); 
```

* * *

更新 - 部分解决方案：

现在出现了对话框 - 根据[这篇文章](https://stackoverflow.com/questions/12844920/jquery-find-syntax-error)，取消按钮不合适。但是，注入的代码已经消失了。没有其他任何改变 - 只是通过修复取消按钮位置的语法错误来使对话框代码正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:17:08.377

回答我对原始帖子的评论的问题：你真的已经知道 JSON，它代表 JavaScript Object Notation。这是一个 JSON 对象：

```
{"a":1,"b":2,"c":3} 
```

看起来熟悉？JSON 只是我们已经使用了很长时间的东西的一个花哨的名称（这可能不是 100% 正确，但这是我的看法。）

这个想法是让服务器传回 JSON 对象并让您的 JavaScript 基于它们创建/更新 HTML。在您的场景中，您让 PHP 构建多个 HTML 对话框。相反，你会让你的 PHP 传回一个对象数组，每个对象代表表中的一行，如下所示：

```
{
  "records": 
  [
    { 
      "field a":"value a",
      "field b":"value b"
    },
    // record 2
    { 
      "field a":"value a",
      "field b":"value b"
    }
  ]
} 
```

如果你使用 .getJSON() 从服务器请求，jQuery 会自动读取它并给你一个带有 .records 属性的对象，它是一个对象数组！现在，当他们单击相应记录之一时，您可以使用 JavaScript 更新屏幕上的单个对话框/表单。

注意：您可以让 PHP 只传回一个对象数组，但最好将其包装在上面的对象中。很多时候，您还需要其他信息，例如，当您进行分页搜索结果时，您需要知道记录总数、您所在的页面以及其他数据点。

这样做的另一个好处是服务器的完成速度要快得多。您将所有显示逻辑推送到客户端的计算机上，因此可以从同一服务器提供更多页面。

这是一个真正简短的解释。网络上到处都有教程和示例。您在线使用的任何优秀 Ajax 应用程序（例如 GMail）都使用 JSON 对象，而不是传递大量 HTML 块。这里有一些链接，谷歌还有很多：

*   [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)（将任何变量转换为 JSON 字符串。）
*   [http://www.json.org/example.html](http://www.json.org/example.html)
*   [http://www.w3schools.com/json/default.asp](http://www.w3schools.com/json/default.asp)
*   [http://www.jsonexample.com/](http://www.jsonexample.com/)
*   PHP 示例：[http ://www.electrictoolbox.com/json-data-jquery-php-mysql/](http://www.electrictoolbox.com/json-data-jquery-php-mysql/)
*   另一个 PHP 示例：[http](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/) : //www.jquery4u.com/json/ajaxjquery-getjson-simple/ （此链接中 json-data.php 的替代方法是要走的路，另一种方法很傻！）

还有一些非常好的框架可以帮助完成这个过程。我是[bone.js](http://backbonejs.org/)和[spine.js](http://spinejs.com/)的忠实粉丝。两者都使用 jQuery，都可以帮助您在构建应用程序（如 MVC）时使用最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:19:23.177

当您解决自己的问题时，这很好。当答案是 ID-10-T 错误时就不太好了。

在注入的 HTML 中，注意输入字段的**类型**（屏幕截图 1）。将 type更改为**type="text"**，所有工作都按需要进行。

当概念是新的时，奥卡姆剃刀几乎是遥不可及的。

不过，我仍然不明白为什么我看不到注入的标记..！

# c# - 了解 WPF 控件样式和模板

> ID：12831106
> 
> 赞同：4
> 
> 时间：2012-10-11T01:58:07.773
> 
> 标签：c#, wpf, xaml, templates, styles

我对 .NET/C#/WPF/XAML 比较陌生。我注意到有时控件似乎“缺少”影响样式的最简单属性。因此，`Style`必须使用该类来修改控件的外观。这没关系，但我发现自己在 Google/StackOverflow 上寻找要修改的特定属性的名称。

我正在为**所有**.NET Framework WPF 控件寻找规范且完整的默认控件样式和模板源。

在您回答得太快之前，请继续阅读以了解我的困惑。

在此 Microsoft 文档页面[DataGrid Styles and Templates](http://msdn.microsoft.com/en-us/library/ff506248%28v=vs.100%29.aspx)上，我看到了以下模板`DataGridCell`：

```
<!--Style and template for the DataGridCell.-->
<Style TargetType="{x:Type DataGridCell}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type DataGridCell}">
        <Border x:Name="border"
                BorderBrush="Transparent"
                BorderThickness="1"
                Background="Transparent"
                SnapsToDevicePixels="True">
          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="FocusStates">
              <VisualState x:Name="Unfocused" />
              <VisualState x:Name="Focused" />
            </VisualStateGroup>
            <VisualStateGroup x:Name="CurrentStates">
              <VisualState x:Name="Regular" />
              <VisualState x:Name="Current">
                <Storyboard>
                  <ColorAnimationUsingKeyFrames Storyboard.TargetName="border"
                                                Storyboard.TargetProperty="(Border.BorderBrush).
                      (SolidColorBrush.Color)">
                    <EasingColorKeyFrame KeyTime="0"
                                         Value="{StaticResource DatagridCurrentCellBorderColor}" />
                  </ColorAnimationUsingKeyFrames
                                                >
                </Storyboard>
              </VisualState>
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>
          <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

[此页面来自 MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b967e635-7e76-4c80-a16a-042aa6350030)，显示以下`Style`/ `Trigger`s/ `Setter`s。

```
<SolidColorBrush x:Key="{x:Static DataGrid.FocusBorderBrushKey}" Color="#FF000000"/>
 <Style TargetType="{x:Type DataGridCell}">
 <Setter Property="Background" Value="Transparent"/>
 <Setter Property="BorderBrush" Value="Transparent"/>
 <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="Template">
  <Setter.Value>
  <ControlTemplate TargetType="{x:Type DataGridCell}">
   <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
   <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
   </Border>
  </ControlTemplate>
  </Setter.Value>
 </Setter>
 <Style.Triggers>
  <Trigger Property="IsSelected" Value="True">
  <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
  <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  </Trigger>
  <Trigger Property="IsKeyboardFocusWithin" Value="True">
  <Setter Property="BorderBrush" Value="{DynamicResource {x:Static DataGrid.FocusBorderBrushKey}}"/>
  </Trigger>
 </Style.Triggers>
 </Style> 
```

为什么我在第一个模板中看不到 properties `Background`, `Foreground`, ？`BorderBrush`

我觉得这些`VisualState`东西是参考，但我找不到来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:20:10.150

嗯，ContentPresenter 是一个显示您的内容的控件。VisualState 的东西只是保存控件 DataGridCell 可以遇到的所有 VisualState 的引用。它在包装了 ContentPresenter 的属性边框上放置了一些动画。

您可以重新定义整个样式，我的意思是放置一些其他控件来重新定义内容，并使用 TemplateBinding 来获取外部依赖属性。就像我的意思是你甚至可以`TemplateBinding Background`在边界上使用 VisualState。

```
 <Style TargetType="{x:Type DataGridCell}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type DataGridCell}">
        <Border x:Name="border"
                BorderBrush=BorderBrush}" BorderThickness="{TemplateBinding      BorderThickness}" Background="{TemplateBinding Background}"
                SnapsToDevicePixels="True">
          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="FocusStates">
              <VisualState x:Name="Unfocused" />
              <VisualState x:Name="Focused" />
            </VisualStateGroup>
            <VisualStateGroup x:Name="CurrentStates">
              <VisualState x:Name="Regular" />
              <VisualState x:Name="Current">
                <Storyboard>
                  <ColorAnimationUsingKeyFrames Storyboard.TargetName="border"
                                                Storyboard.TargetProperty="(Border.BorderBrush).
                      (SolidColorBrush.Color)">
                    <EasingColorKeyFrame KeyTime="0"
                                         Value="{StaticResource DatagridCurrentCellBorderColor}" />
                  </ColorAnimationUsingKeyFrames
                                                >
                </Storyboard>
              </VisualState>
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>
          <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter> 
```

这完全有道理。但是，如果您没有为样式指定它们，则意味着它将回退到已为控件定义的默认颜色和背景等。

这是每个dependencyProperty 的一个属性，当新值不覆盖它时回退到默认值。

您可以阅读我的 WPF 教程以获得更多类似的概念： [http ://www.abhisheksur.com/2010/12/wpf-tutorial.html](http://www.abhisheksur.com/2010/12/wpf-tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:01:02.627

在这里，您可以下载 WPF 控件[Default WPF Themes](http://go.microsoft.com/fwlink/?LinkID=158252)的默认样式字典。如果您必须重新设置控件的样式，了解默认样式的工作原理会非常有帮助。

# sql - SQL根据参数选择多个表

> ID：12831111
> 
> 赞同：0
> 
> 时间：2012-10-11T01:58:24.157
> 
> 标签：sql, oracle

我在根据参数选择不同的表时遇到了挑战。[我的问题将与此](https://stackoverflow.com/questions/8381744/sql-select-statement-from-both-tables)非常相似，但这是我的情况：

假设我有一个来自前端的参数列表 [1,2,3,4]

并且基于此参数，我如何在 sql 上的不同表上进行选择？

在 Java 中，我可以这样做：

```
StringBuffer sql = new StringBuffer();
if ( parameter == 1)
    sql.append("Select * from TABLEA");
else if  ( parameter == 2)
    sql.append("Select * from TABLEB");
else if  ( parameter == 3)
    sql.append("Select * from TABLEC");
else if  ( parameter == 4)
    sql.append("Select * from TABLED"); 
```

我怎样才能在 SQL 本身上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:09:52.780

在`Oracle PLSQL`中，您可以这样做：

```
PROCEDURE TEST(
        o_retcd OUT NUMBER,
        o_errmsg OUT VARCHAR2,
        o_currStatus IN OUT SYS_REFCURSOR,
        i_type IN VARRAY --your parameters
              ) 
BEGIN

FOR i IN i_type.FIRST..i_type.LAST
    LOOP
         if i_type(i) = 1 then
          OPEN o_currStatus FOR
            select * from TABLEA;
         elsif i_type(i) = 2 then
          OPEN o_currStatus FOR
            select * from TABLEB;
         elsif i_type(i) = 3 then
          OPEN o_currStatus FOR
            select * from TABLEC;
         elsif i_type(i) = 4 then
          OPEN o_currStatus FOR
            select * from TABLED;
         end if;
    END LOOP;

  EXCEPTION
 --Exception handling
  WHEN OTHERS THEN
      o_retcd := 100;

END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:21:32.263

~~阅读有关[`Dynamic SQL`](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm).~~

基本上，这将是类似的东西

```
 l_query :=    'select * from ' 
             || case l_param 
                when 1 then 'table1'
                when 2 then 'table2'
                end; 
```

~~然后您使用此字符串打开一个游标，根据您的查询实际执行的操作，有几个选项可以执行此操作。~~

没有仔细阅读你的问题。如果您想要一个*纯 sql*解决方案，那么可能没有。好吧，也许仅`union all`用于连接来自不同表的结果集（假设它们具有相似的结构），然后根据您的参数值对其进行过滤。

**更新**：另一种选择是这样的 - 生成 XML 并查询它，但我不完全确定这是一个好习惯 :)

```
10:54:40 SYSTEM@dwh-prod> l                                    
  1  select *                                                  
  2    from xmltable(                                          
  3       '/ROWSET/*'                                          
  4       passing xmltype(                                     
  5          dbms_xmlgen.getxml(                               
  6            'select * from '                                
  7            || case :param                                  
  8               when 1 then 'all_objects'                    
  9               when 2 then 'user_objects'                   
 10               else 'dba_objects'                           
 11               end                                          
 12            ||'  where rownum < 10'                         
 13           )                                                
 14       )                                                    
 15       columns                                              
 16       object_name varchar2(100) path '//ROW/OBJECT_NAME',  
 17       object_type varchar2(100) path '//ROW/OBJECT_TYPE',  
 18       status      varchar2(100) path '//ROW/STATUS'        
 19*    )                                                      
10:54:40 SYSTEM@dwh-prod> exec :param := 1;                    

PL/SQL procedure successfully completed.                       

Elapsed: 00:00:00.01                                           
10:55:00 SYSTEM@dwh-prod> /                                    

OBJECT_NAME          OBJECT_TYPE          STATUS               
-------------------- -------------------- -------------------- 
CON$                 TABLE                VALID                
I_COL2               INDEX                VALID                
I_USER#              INDEX                VALID                
C_TS#                CLUSTER              VALID                
I_OBJ#               INDEX                VALID                
I_CON2               INDEX                VALID                
I_OBJ5               INDEX                VALID                
IND$                 TABLE                VALID                
BOOTSTRAP$           TABLE                VALID                

9 rows selected.                                               

Elapsed: 00:00:00.04                                           
10:55:01 SYSTEM@dwh-prod> exec :param := 2;                    

PL/SQL procedure successfully completed.                       

Elapsed: 00:00:00.00                                           
10:55:06 SYSTEM@dwh-prod> /                                    

OBJECT_NAME          OBJECT_TYPE          STATUS               
-------------------- -------------------- -------------------- 
AQ$DEF$_AQCALL       VIEW                 VALID                
AQ$DEF$_AQERROR      VIEW                 VALID                
AQ$_DEF$_AQCALL_E    QUEUE                VALID                
AQ$_DEF$_AQCALL_F    VIEW                 VALID                
AQ$_DEF$_AQERROR_E   QUEUE                VALID                
AQ$_DEF$_AQERROR_F   VIEW                 VALID                
AQ$_INTERNET_AGENTS  TABLE                VALID                
AQ$_INTERNET_AGENT_P TABLE                VALID                
AQ$_QUEUES           TABLE                VALID

9 rows selected.                               

Elapsed: 00:00:00.04 
```

# algorithm - 开始缓慢增加，结束快速增加的数学函数

> ID：12831113
> 
> 赞同：3
> 
> 时间：2012-10-11T01:58:26.913
> 
> 标签：algorithm, math, data-modeling, polynomial-math

我有数字 x=[0,n]，其中 n>0。我想构造一个函数 y=f(x) 使得值从 0 开始缓慢增加，在接近 n 时增加非常快，当达到 n 时，y 为无穷大。对此建模的好功能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:03:56.790

`1/(n-x) - 1/n`将工作。

还有很多其他函数 log, atan, x^(-k),... 在某些时候会达到无穷大。

`a^y`是另一组快速增长的函数 - 可能更适合编码，因为它可以达到任意大（但有限）的值。

# php - 文件大小（）不显示实际大小

> ID：12831114
> 
> 赞同：2
> 
> 时间：2012-10-11T01:58:39.303
> 
> 标签：php, filesize

> **可能重复：**
> [PHP – 获取目录的大小](https://stackoverflow.com/questions/9163456/php-get-the-size-of-a-directory)

我在一个目录中有 5 个文件，它显示文件大小 = 4096，但是当我删除 4 个文件并且只剩下 1 个文件时，它仍然显示相同的大小。这就是我获取文件大小的方式

```
echo filesize("user_files/".$uid."/".$rs['DirectoryName']); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T02:00:30.453

`filesize`应用于目录并没有给出其内容的大小。它返回文件系统节点的大小，在您的情况下，它占用 4kb。这个大小取决于目录中文件的*数量*。

要获取内容的实际大小 - 您需要获取每个文件的大小并对其进行汇总。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:02:48.283

您可以像这样获取您的总文件夹大小及其子目录

```
$dir = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(__DIR__, FilesystemIterator::SKIP_DOTS));
$size = 0;
foreach ( $dir as $file ) {
    $size += $file->getSize();
}
var_dump($size); 
```

另请注意

> 因为 PHP 的整数类型是有符号的，并且许多平台使用 32 位整数，所以对于大于 2GB 的文件，某些文件系统函数可能会返回意外结果。

# machine-learning - 样本大小和特征向量维度之间的经验法则是什么？

> ID：12831118
> 
> 赞同：1
> 
> 时间：2012-10-11T01:59:11.907
> 
> 标签：machine-learning, neural-network

众所周知，编号越大。在构成特征向量的特征中，训练分类器所需的样本数量越多。在我的例子中，我在一个由大约 256 个特征组成的特征向量的两类问题中使用反向传播多层感知器。

现在我的样本量不是无限的。大约 2000 个正样本和 2000 个负样本。

在制定一些降维程序之前，我想知道 no 之间是否存在任何这种关系。样品和没有。特征向量中的维度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:35:18.583

两者之间没有实际的直接关系，因为必要的训练数据量还取决于模型的复杂性和所使用的训练程序。

从实际的角度来看，我建议首先运行一个简单的判别分类器，看看它如何与所有特征一起工作，然后可能会应用某种特征选择。

# linq - Entity Framework dbset 最有效的删除方式

> ID：12831122
> 
> 赞同：11
> 
> 时间：2012-10-11T02:00:00.563
> 
> 标签：linq, entity-framework, dbset

我有以下内容，并正在寻找一种更有效的方式来删除与循环遍历记录，然后一次删除每个记录（注意使用 Dbset）：

```
 var wcd = dbContext.ProgramDetails.Where(p => p.Id == Id);

     foreach (var wc in wcd.ToList())
     {
        dbContext.ProgramDetails.Remove(wc);
     }

     dbContext.SaveChanges(); 
```

还说如果我们有 1 条记录如下：

```
 var pg = dbContext.Program.Where(p => p.Id == Id && Name == FName); 
```

删除这条记录的最佳方法是什么？

尝试了以下但给出了错误：

```
 var pg = dbContext.Program.Where(p => p.Id == Id && Name == FName);
    dbContext.Program.Remove(wc); 
```

然后我采取了 foreach 只删除一条记录，如上所示，这对于仅 1 条记录并不是最有效的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T02:04:40.970

**EF7 更新**：

```
using (var db = new BloggingContext())
{
  var blog = db.Blogs.First(p => p.Id == Id);
  db.Remove(blog);
  db.SaveChanges();
} 
```

**2015 年 5 月**更新：检查[msdn](https://msdn.microsoft.com/en-us/data/jj713564)和[示例](https://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8/sourcecode?fileId=134759&pathId=1077629233)上的更新文档。使用 EF6 删除实体的示例代码：

```
 public async Task<ActionResult> Delete(Department department) 
 { 
        try 
        { 
            db.Entry(department).State = EntityState.Deleted; 
            await db.SaveChangesAsync(); 
            return RedirectToAction("Index"); 
        } 
        catch (DbUpdateConcurrencyException) 
        { 
            return RedirectToAction("Delete", new { concurrencyError = true, id = department.DepartmentID }); 
        } 
        catch (DataException /* dex */) 
        { 
            //Log the error (uncomment dex variable name after DataException and add a line here to write a log. 
            ModelState.AddModelError(string.Empty, "Unable to delete. Try again, and if the problem persists contact your system administrator."); 
            return View(department); 
        } 
 } 
```

如果您知道 ID 并且没有加载实体，最有效的方法是创建假实体并将其删除

```
var p = new Program  { Id = myId } 
dbContext.Program.Remove(p) 
```

But this won't work if you really have several records with the same id and you need to use `name` field as well to select right one.

Also your last example should be

```
var pg = dbContext.Program.First(p => p.Id == Id && p.Name == FName);
dbContext.Program.Remove(pg); 
```

# python - 极其奇怪的行为：Django 的 cache.get 方法返回不同的值

> ID：12831129
> 
> 赞同：1
> 
> 时间：2012-10-11T02:00:29.520
> 
> 标签：python, django, caching, memcached, couchbase

我正在使用 django 的缓存后端与遵循 memcached 协议的 moxi-client 进行交互。

我的测试代码的结构是这样的。

```
from django.core.cache import cache
key = "test_object_key"
max_errors = 15
errors = 0
total_runs = 0
unexpected_objects_returned = []
while(errors<max_errors):
    total_runs += 1
    obj = cache.get(key)
    if(type(obj)  == ExpectedObject):
        continue
    else:
        unexpected_objects_returned.append(obj)
        errors += 1 
```

第一次返回正确的值。对于接下来的 10 次调用，该方法以相同的顺序返回完全相同的对象。这些对象要么是一个字符列表（通过另一个进程存储在不同的键下），要么是无。在前 10 次命中后，该方法开始返回正确的对象。

如果我使用以下代码实例化缓存对象

```
from django.core.cache import get_cache
cache = get_cache('default') 
```

一切都按预期运行。正因为如此，我希望这个问题出现在 Django 中的某个地方，而不是 moxi-client 或 couchbase 的下游。

我会实施这个解决方案，但是我有一个巨大的 Django 项目，并确保每个文件都包含它会很痛苦。任何有关解决方案的提示将不胜感激。

我正在使用 Django 1.3。

# jsp - 显示标签和 c 选择标签

> ID：12831136
> 
> 赞同：1
> 
> 时间：2012-10-11T02:00:50.557
> 
> 标签：jsp, displaytag

我使用以下代码。但它总是去其他条件。我检查了 value ，并且这些值正确地从 java 传递到了 jsp。有什么遗漏的地方吗？

```
<c:when test="${pCount > 0}">
    <display:column class="colPCount" property="pCount " title="${titlePCount}" sortable="true" headerClass="sortable" />
</c:when>
<c:otherwise>
    <display:column class="colPCount" title="${titlePCount}">&nbsp;-&nbsp;</display:column>
</c:otherwise> 
```

对于 pcount>0 个项目，在显示标签中仍显示为“-”。即使我在第一次条件检查中反转了 pCount<0 之类的检查条件，显示标签始终显示其他条件。它总是指向每个值的其他条件。

编辑：完整代码

```
 <display:table class="displayTable" id="itemList"
        name="${sessionScope.itemList}" requestURI="listItem.action"
        pagesize="15" defaultsort="2" defaultorder="ascending" sort="list">
        <display:column class="colItemName" property="name"
            title="${titleItemName}" sortable="true" headerClass="sortable"/>
        ...
        <c:choose>
        <c:when test="${pCount > 0}">
            <display:column class="colPCount" property="pCount " title="${titlePCount}" sortable="true" headerClass="sortable" />
        </c:when>
        <c:otherwise>
            <display:column class="colPCount" title="${titlePCount}">&nbsp;-&nbsp;</display:column>
        </c:otherwise>
        </c:choose>
    </display:table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:59:52.213

试试这个方法：`${itemList.pCount>0}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:18:10.963

我认为您可能错误地使用了显示标签库。

看起来你想要做的是显示`row.pCount`值是否大于零，否则显示`-`。但是您实际上正在做的是告诉库根据某些内容 ( `pCount`，这可能在您引用它的范围内不存在...或者您将不得不向我们展示更多代码）。

尝试这样的事情：

```
<display:column class="colPCount" title="${titlePCount}" sortable="true" headerClass="sortable">
    <c:choose>
        <c:when test="${row.pCount > 0}">
            <c:out value="${row.pCount}" />
        </c:when>
        <c:otherwise>
            &nbsp;-&nbsp;
        </c:otherwise>
    </c:choose>
</display:column> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:20:51.763

我猜那个变量`pCount = null`. 尝试检查`${not empty pCount and pCount>0}`。

# ios - ios - 使用 JavaScript 验证 UIWebView 表单并在控制器中获取表单字段值

> ID：12831137
> 
> 赞同：0
> 
> 时间：2012-10-11T02:00:59.627
> 
> 标签：ios, ios5, uiwebview

我有一个 UIWebView，我有一个像这样的简单表单：

```
 <form action="http://message/">Your Email: <input id="email" /><br />
        <input type="submit" value="Submit" />
    </form> 
```

现在没有 JS 验证，表单只是在某处提交，我不知道如何获取字段值。我的控制器中只有这样：

```
- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{   
    if ([request.URL.scheme isEqualToString:@"message"]) 
    {
        // RIGHT NOW THIS DOESNT WORK...HOW DO I GET IT RIGHT? :)
        NSString *useremail = [theWebView stringByEvaluatingJavaScriptFromString:@"getEmail()"];
        NSLog(useremail);

    }  

    return YES;
} 
```

我不确定如何让控制器查看字段值以及如何验证 js 中的字段值。

请告诉我如何最好地做到这一点。

我还尝试创建一个 JavaScript 函数来简单地点击请求 url（这就是我真正需要的），但这不是发送请求 url：

```
 <script type="text/javascript">
    function test () 
    {
        // Het the params.
        var name = escape(document.getElementById("name").value);
        var email = escape(document.getElementById("email").value);
        var phone = escape(document.getElementById("phone").value);

        var url="http://www.myurl.com?platform=ios&name="+name+"&email="+email+"&phone="+phone;
        alert(url);

        var ajaxObj = createXMLHttp();
        //var url = 'myrequest.php';
        ajaxObj.open("GET", url, true);
        ajaxObj.onreadystatechange = function() 
        {
            ajaxObj.processRequest();
        }
            ajaxObj.send(null);

            ajaxObj.processRequest = function() 
            {
              if (this.readyState == 4) 
              {
                // got response
              }
            }

        alert("1");
        var req ;

        // Browser compatibility check                  
        if (window.XMLHttpRequest) {
            req = new XMLHttpRequest();
        } else if (window.ActiveXObject) {

            try {
                req = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {

                try {
                    req = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
            }

        }

        var req = new XMLHttpRequest();
        req.open("GET", url ,true);
        req.onreadystatechange = function () 
        {
            //document.getElementById('divTxt').innerHTML = "Contents : " + req.responseText;
        }

        req.send(null);  

       return false;
    }
        </script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T16:33:30.417

像这样的东西怎么样：

```
- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{   
    if ([request.URL.scheme isEqualToString:@"message"]) 
    {
        NSString *useremail = [theWebView stringByEvaluatingJavaScriptFromString:@"escape(document.getElementById(\"email\").value);"];
        NSLog(useremail);

    }  

    return YES;
} 
```

# java - 为 Hadoop 作业指定 UTF-8 编码

> ID：12831138
> 
> 赞同：4
> 
> 时间：2012-10-11T02:01:09.830
> 
> 标签：java, encoding, utf-8, internationalization, hadoop

在我正在编写的 Hadoop 作业中，我希望我的映射器/减速器使用 UTF-8 编码的字符串。如何指定 UTF-8 作为我的系统编码？如果我在本地运行代码，我可以这样做`java -Dfile.encoding="UTF-8"`，但是当我尝试运行时`hadoop jap myjar.jar -Dfile.encoding="UTF-8"`，这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-07T18:43:30.420

我们发现问题在于映射器 java 进程没有 **-Dfile.encoding=UTF-8**。我们必须将其添加到“mapreduce.map.java.opts”。“mapreduce.reduce.java.opts”也一样。

您可以在 XML 配置文件中执行此操作，也可以在 Java 中执行此操作，例如：

config.set("mapreduce.map.java.opts","-Xmx1843M -Dfile.encoding=UTF-8");

有关配置详细信息，请参阅[http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T08:26:43.970

默认情况下，Hadoop 使用`UTF-8`编码，因此您不必提供此类选项。
我假设您使用`Text`您的键/值。根据[javadoc](http://hadoop.apache.org/docs/stable/api/index.html?org/apache/hadoop/io/Text.html)：“此类使用标准 UTF8 编码存储文本”

# shell - 在腻子中登录另一个终端的脚本

> ID：12831139
> 
> 赞同：1
> 
> 时间：2012-10-11T02:01:12.223
> 
> 标签：shell, unix, putty

我在 Windows 中使用腻子。我正在使用 IP：端口号登录腻子。我要做的是我必须编写一个脚本，该脚本将打开另一个腻子终端并使用其用户名和密码登录

目的：-我正在尝试使用脚本自动化我的工作，我有五个用户名和密码，所有终端都应该在腻子中打开，所以有任务。请引导我朝这个方向前进。

我在 ssh shell 中运行我的脚本

我的代码：- `putty.exe -pw "password" username@server.com hello.sh ok-1`

我只有putty的可执行文件，我没有安装putty，只是从另一台机器复制并粘贴exe文件。手动工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:45:48.817

有一些方法可以自动执行此任务，但它们可能不是您最初预期的。

您可以通过 windows 命令行将用户名和密码信息传递给 PuTTY。

```
putty.exe user@server.com -pw password 
```

或者，您可以通过传递 PuTTY.exe 参数在 Windows 快捷方式中预加载信息。[（此答案中提供了更多信息： https](https://superuser.com/a/44117) ://superuser.com/a/44117 ）

这两种方法都意味着存储不可取的**纯文本密码。**您应该将其中一种方法与公钥身份验证结合使用。假设您选择 Windows 快捷方式，您可以为每个用户设置一个快捷方式，该快捷方式将用户名传递给 PuTTY，并且身份验证由存储的 SSH 密钥处理。

（使用 PuTTY 的 SSH 密钥指南：http: [//www.howtoforge.com/how-to-configure-ssh-keys-authentication-with-putty-and-linux-server-in-5-quick-steps](http://www.howtoforge.com/how-to-configure-ssh-keys-authentication-with-putty-and-linux-server-in-5-quick-steps)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:23:39.963

尝试从 ssh shell 中打开另一个 putty 既困难又糟糕。我的建议，选择一个对你来说更容易的：

1.  使用 windows [batch .bat](http://en.wikipedia.org/wiki/Batch_file)打开腻子窗口。
2.  使用shell的后台命令。
3.  打开一个[屏幕](http://www.gnu.org/software/screen/)并使用多个屏幕会话/窗口。

# java - “不是抽象的，不会覆盖抽象方法”错误

> ID：12831141
> 
> 赞同：3
> 
> 时间：2012-10-11T02:01:27.210
> 
> 标签：java, object, compiler-errors, abstract-class, abstract

我收到了这个错误，这让我很困惑。我不知道如何解决它。我知道那里还有其他一些错误，但我现在并不太担心。

这是代码：

```
import java.awt.*;

public abstract class Shape {
// Instance variables
private int x;
private int y;
private Color color;

// Constructor
protected Shape(int x, int y, Color color) {
this.x = x;
this.y = y;
this.color = color;
}

// Abstract methods
 public abstract void draw(Graphics g);
public abstract int getHeight();
public abstract int getWidth();
public abstract void scale();
public abstract double area();

// Other instance methods
public Color getColor() {
return color;
}

public int getX() {
return x;
}

public int getY() {
return y;
}

public void move(int dx, int dy) {
x += dx;
y += dy;
}

public void setColor(Color color) {
this.color = color;
}

public String toString() {
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " + getBlue() + ", " getGreen() + ")"; 
```

} }

以下是类文件：

```
// Represents a circle that can be displayed in a graphics
// context

import java.awt.*;

public class Circle extends Shape {
// Instance variables
private int diameter;
private double scaleFactor = 2;
private double area;

// Constructor
public Circle(int x, int y, Color color, int diameter) {
super(x, y, color);
this.diameter = diameter;
}

 // Instance methods
public void draw(Graphics g) {
g.setColor(getColor());
g.fillOval(getX(), getY(), diameter, diameter);
}

public int getHeight() {
return diameter;
}

public int getWidth() {
return diameter;
}

public void scale(double scaleFactor) {
(double) diameter *= scaleFactor;
}

public double area() {
area = (3.14 * (diameter * diameter)) / 4;
return area;
}

public String toString() {
return "Diameter: " + diameter + "\nWidth: " + getWidth() + "Height: " + getHeight();
}
}

import java.awt.*;

public class Rectangle extends Shape {
// Instance variables
private int width;
private int height;
private double scaleFactor = 2;
private double diameter = width * height;
private double area;

// Constructor
public Rectangle(int x, int y, Color color,
               int width, int height) {
super(x, y, color);
this.width = width;
this.height = height;
}

// Instance methods
public void draw(Graphics g) {
g.setColor(getColor());
g.fillRect(getX(), getY(), width, height);
}

public int getHeight() {
return height;
}

public int getWidth() {
return width;
}

public void scale(double scaleFactor){
width *= scaleFactor;
height *= scaleFactor;
}

public double area() {
    area = (3.14 * (diameter * diameter)) / 4;
    return area;
}

public String toString() {
    return "Diameter: " + diameter + "\nWidth: " + getWidth() + "Height: " +
getHeight();
}
} 
```

这是测试文件：

```
public class ShapeTest
{
public static void main(String[] args)
{
    Color myC = new Color(10, 30, 20);
    Circle myCircle = new Circle(0, 0, myC, 5);
    Rectangle myRectangle = new Rectangle(0, 0, myC, 2, 3);

    System.out.println(myCircle.toString());
    System.out.println(myRectangle.toString()); 

}
} 
```

以下是错误：

```
javac ShapeTest.java
ShapeTest.java:5: cannot find symbol
symbol  : class Color
location: class ShapeTest
    Color myC = new Color(10, 30, 20);
    ^
ShapeTest.java:5: cannot find symbol
symbol  : class Color
location: class ShapeTest
    Color myC = new Color(10, 30, 20);
                    ^
./Shape.java:46: ';' expected
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " +   getBlue() + ", " getGreen() + ")";
                                                                                                   ^
./Shape.java:46: not a statement
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " + g etBlue() + ", " getGreen() + ")";
                                                                                                             ^
./Shape.java:46: cannot find symbol
symbol  : method getRed()
location: class Shape
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " + getBlue() + ", " getGreen() + ")";
                                                               ^
./Shape.java:46: cannot find symbol
symbol  : method getBlue()
location: class Shape
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " + getBlue() + ", " getGreen() + ")";
                                                                                 ^
./Shape.java:46: cannot find symbol
symbol  : method getGreen()
location: class Shape
return "Position: (" + getX() + ", " + getY() + ") Color: (" + getRed() + ", " + getBlue() + ", " getGreen() + ")";
                                                                                                  ^
./Circle.java:16: Circle is not abstract and does not override abstract method scale() in     Shape
public class Circle extends Shape {
   ^
./Circle.java:43: unexpected type
required: variable
found   : value
(double) diameter *= scaleFactor;
^
 ./Rectangle.java:3: Rectangle is not abstract and does not override abstract method scale() in Shape
 public class Rectangle extends Shape {
   ^
10 errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T03:05:22.413

我同意 user1490835 的诊断，但我认为最好解释一下这个错误的原因，以防万一你不确定。

抽象方法是对编译器的承诺，即所有子类（使用抽象方法扩展类的子类）都能够*执行该方法*。实现该承诺的部分原因是子类必须使用*完全相同的标头来*实现抽象方法。*因此，在 Java 运行时中，您可以在任何子*类的实例上调用抽象方法，并且知道您将使用正确的参数等等。

为什么？因为如果子类对该方法使用稍微不同的标头（导致我们试图避免的运行时错误），则代码将不会编译（它会给出*您*遇到的错误）。

* * *

例如，想象一个`A`具有抽象方法`f()`和两个具体子类的抽象类`B`和`C`. 在程序的某个地方，我们有：

```
 A avar;
    if (somevar < othervar) {
        avar = new B();
    } else {
        avar = new C();
    }
    avar.f(); 
```

我们不知道在运行时`avar`是 a`B`还是 a `C`，因为它取决于 if 语句的结果。但我们确实知道这`avar`将是`A`. 由于 的所有子类都`A`必须`f`使用正确的头文件实现（否则程序员会得到你得到的编译错误），我们知道这段代码在运行时不会中断！

* * *

在您的代码中，抽象方法标头与其实现之间的区别是：

```
public abstract void scale(); // no parameter
public void scale(double scaleFactor) { // one parameter 
```

要修复它，请将 double 参数添加到您的抽象方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:10:35.760

我能找到的第一个问题是您已经声明了一个不带参数的 Scale 抽象方法，但是当您扩展抽象类时，您正在实现带参数的 Scale 方法。这就是为什么在您的所有子类中都会引发此错误的原因：

Circle 不是抽象的，不会覆盖 Shape 中的抽象方法 scale()

还出现以下错误：

```
./Shape.java:46: ';' expected

return "Position: (" + getX() + ", " + getY() + ") Color: (" + 
getRed() + getBlue() + ", " getGreen() + ")"; 
```

您忘记在 getGreen 函数之前添加 + 符号，Java 期望它作为行尾，所以这就是错误 ';' 的原因

getRed 符号错误是因为您没有名为 getRed 的函数？等等！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:11:37.493

在使用 Java 中的类之前，您必须先导入该类。

在 ShapeTest.java 中，您需要添加：

```
import Circle;
import Rectangle;
import java.awt.Color; 
```

在 Circle.java 和 Rectangle.java 你需要添加：

```
import Shape; 
```

此外，您还应该确保您的文件在一个包中。见[http://en.wikipedia.org/wiki/Java_package](http://en.wikipedia.org/wiki/Java_package)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T02:14:10.780

嗯，所以它告诉你的原因是，你继承自“Shape”类。该类定义了方法 scale()。

因此，要么在“Circle”和“Rectangle”中实现方法 scale()，要么将它们定义为 asbtract。我建议你只实现 scale() 方法，不要将它们变成抽象的，因为我认为这是你打算做的。

# java - Java：多个类和数组

> ID：12831143
> 
> 赞同：2
> 
> 时间：2012-10-11T02:01:48.647
> 
> 标签：java, arrays

本学期我目前正在学习 Java 课程（对编程完全陌生，并且在多个类和数组方面有点挣扎）。我正在处理的当前程序是使用 2D 数组的数独类型游戏。教师为我们提供了一个关于这个数组中的常数的课程（数独谜题中的初始值）。这是它的代码。

```
public class Constants {
 public static int game[][] = new int[][] {
{ 1, 2, -1, -1, -1, -1, -1, -1, 8 },
{ -1, -1, 4, -1, 8, -1, 7, 1, -1 },
{ -1, -1, -1, -1, 1, -1, 5, 3, -1 },
{ 8, -1, -1, -1, -1, 4, -1, -1, -1 },
{ -1, 4, -1, -1, -1, -1, 6, 5, -1 },
{ 7, 5, -1, 1, -1, -1, -1, -1, -1 },
{ -1, 7, -1, -1, -1, -1, -1, 9, -1 },
{ 3, -1, 1, 8, 5, -1, -1, -1, 6 },
{ 5, 6, -1, 9, -1, 7, -1, -1, -1 } 
}; 
```

-1 的值是指拼图中的空格。

基本上我需要知道的是..我将如何在我的其他类和主要方法中访问这个数组或这些值？再次为对 java 完全陌生，我深表歉意，在此先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T02:04:03.290

您将访问实际`game`变量

```
Constants.game 
```

并且您可以访问数组的各个成员

```
Constants.game[i][j] 
```

where`i`是行，`j`是您尝试访问的元素的列。

# html - 在我的网站上打开链接不起作用

> ID：12831144
> 
> 赞同：0
> 
> 时间：2012-10-11T02:01:51.140
> 
> 标签：html, css

在我的网站上，我有一个链接，我正在努力寻找工作。我有一个遵循正常格式的链接，a href，以 www.youtube.com 作为目标链接，最后是 target=_blank。当我单击该链接时，托管我的网站的网站会显示一条错误消息。当我复制并粘贴实际链接时，我会在最后得到我的网页：

www.example.com/www.youtube.com

这不是我想要的！我希望它在新标签中将用户直接带到 www.youtube.com。有什么帮助吗？

顺便说一句，我输入的实际代码不起作用，所以如果有人想查看代码，请在评论中给我您的电子邮件，我会发送给您。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T02:07:37.720

正如@Interrobang 所说的那样（虽然不是很多话），问题是您`http://`在网址的开头完全没有。省略这部分，或者更重要的是`//`，使浏览器将 url 视为相对于站点，而不是完全与另一个站点相关。

# android - 从 commonsware 无限适配器中检索数据

> ID：12831150
> 
> 赞同：1
> 
> 时间：2012-10-11T02:02:43.277
> 
> 标签：android, listview, baseadapter, commonsware-cwac

最初，我有自己的`Adapter extended the BaseAdapter`，它工作正常。然后，我尝试通过以下代码采用commonsware EndlessAdapter：

```
public class MyEndlessAdapter extends EndlessAdapter {
private RotateAnimation rotate = null;
private View pendingView = null;
private List<Map<String, Object>> mData = null;
private String link, type;
String[] videoInfo= new String[90];
private Bitmap[] thumbnail = new Bitmap[10];
Context context;

public MyEndlessAdapter(Context ctxt, List<Map<String, Object>> data) {
    super(new MyEndlessAdapter(ctxt, data));
    new MyAdapter(ctxt, data);
    context = ctxt;
    rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
            0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate.setDuration(600);
    rotate.setRepeatMode(Animation.RESTART);
    rotate.setRepeatCount(Animation.INFINITE);
}

public List<Map<String, Object>> get() {
    MyAdapter a2 = (MyAdapter) getWrappedAdapter();
    return a2.get();
}

@Override
protected View getPendingView(ViewGroup parent) {
    View row = LayoutInflater.from(parent.getContext()).inflate(
            R.layout.row, null);

    pendingView = row.findViewById(android.R.id.text1);
    pendingView.setVisibility(View.GONE);
    pendingView = row.findViewById(R.id.throbber);
    pendingView.setVisibility(View.VISIBLE);
    startProgressAnimation();

    return (row);
}

public void getInfromation(String type, String link) {
    this.link = link;
    this.type = type;
}

@Override
protected boolean cacheInBackground() {
    SearchYoutube mySearchYoutube = new SearchYoutube();
    String jsonString = mySearchYoutube.YoutubeResult(link);
    Log.i("in AsycTask", "link=  " + link);
    Log.i("in AsycTask", "jsonString=  " + jsonString);
    videoInfo = mySearchYoutube.YoutubeJSONToString(jsonString);
    int arrayLength = mySearchYoutube.GetCounter();
    Log.i("in AsycTask", "arrayLength=  " + arrayLength);
    try {
        for (int j = 4, i = 0; j < arrayLength; j = j + 9, i++) {
            Log.i("Check bitmap", "before, j = " + j + "  ,i = " + i);
            Log.i("Check bitmap", "after" + videoInfo[j]);
            try {
                thumbnail[i] = BitmapFactory
                        .decodeStream((InputStream) new URL(videoInfo[j])
                                .getContent());
            } catch (Exception e) {
                thumbnail[i] = BitmapFactory.decodeResource(
                        context.getResources(), R.drawable.video_default);
            }
        }
        mData = getData(mData);
        return (getWrappedAdapter().getCount() < 200);
    } catch (Exception anyError) {
        return false;
    }
}

@Override
protected void appendCachedData() {
    if (getWrappedAdapter().getCount() < 200) {
        @SuppressWarnings("unchecked")
        MyAdapter a = (MyAdapter) getWrappedAdapter();
        for (int i = 0; i < mData.size(); i++) {
            a.add(mData.get(i));
        }
    }
}

public void startProgressAnimation() {
    if (pendingView != null) {
        pendingView.startAnimation(rotate);
    }
}

public class MyAdapter extends BaseAdapter {
    List<Map<String, Object>> mData;

    public final class ViewHolder {
        public ImageView thumbnail_view;
        public TextView title_view;
        public TextView date_view;
        public TextView duration_view;
        // public Button save_btn;

    }

    private LayoutInflater mInflater;
    ViewHolder holder = null;

    public MyAdapter(Context context, List<Map<String, Object>> data) {
        this.mInflater = LayoutInflater.from(context);
        mData = data;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mData.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        /**
         * Original holder
         * 
         * 
         * */
        // ViewHolder holder = null;
        if (convertView == null) {

            holder = new ViewHolder();

            convertView = mInflater.inflate(R.layout.vlist, null);
            holder.thumbnail_view = (ImageView) convertView
                    .findViewById(R.id.thumbnail_view);
            holder.title_view = (TextView) convertView
                    .findViewById(R.id.title_view);
            holder.date_view = (TextView) convertView
                    .findViewById(R.id.date_view);
            holder.duration_view = (TextView) convertView
                    .findViewById(R.id.duration_view);
            // holder.save_btn =
            // (Button)convertView.findViewById(R.id.save_btn);
            convertView.setTag(holder);
        } else {

            holder = (ViewHolder) convertView.getTag();
        }
        Log.i("position< mData.size()", "count");
        holder.thumbnail_view.setImageBitmap((Bitmap) mData.get(position)
                .get("thumbnail"));
        holder.title_view
                .setText((String) mData.get(position).get("title"));
        holder.date_view.setText((String) mData.get(position).get(
                "uploaded"));
        holder.duration_view.setText((String) mData.get(position).get(
                "duration"));
        // holder.save_btn.setOnClickListener(new
        // myButtonListener(position));

        return convertView;
    }

    public void add(Map<String, Object> map) {

        mData.add(map);
        notifyDataSetChanged();

    }

    public List<Map<String, Object>> get() {
        return mData;
    }

    class myButtonListener implements OnClickListener {
        private int position;

        myButtonListener(int pos) {
            position = pos;
        }

        @Override
        public void onClick(View v) {
            int vid = v.getId();
            Log.i("onClick, button on list", "position is : " + position
                    + "  And vid : " + vid);

        }
    }

}

private List<Map<String, Object>> getData(List<Map<String, Object>> mList) {

    List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();
    if (mList != null||mList == null) {
        list = mList;
    }
    Log.v("In videoInfo List", "length");
    Map<String, Object> map;
    int arrayLength = videoInfo.length;

    for (int j = 0, i = 0; j < arrayLength; j++, i++) {
        map = new HashMap<String, Object>();
        Date d2 = new Date();
        videoInfo[j] = videoInfo[j].replaceAll("Z", "+0800");
        SimpleDateFormat dateformat1 = new SimpleDateFormat(
                "yyyy-MM-dd'T'HH:mm:ss.SSSZ");
        Date youtubeDate = new Date();
        try {
            youtubeDate = dateformat1.parse(videoInfo[j]);
            Log.v("In videoInfo List", "youtubeDate: " + youtubeDate);
        } catch (ParseException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        String time = "";
        String ago = " ago";
        int year, month, day, year2, month2, day2 = 0;
        int hour, minute, seccond, hour2, minute2, seccond2 = 0;
        Calendar calendar = Calendar.getInstance();
        Calendar calendar2 = Calendar.getInstance();
        calendar.setTime(youtubeDate);
        calendar2.setTime(d2);

        year = calendar.get(Calendar.YEAR);
        ;
        year2 = calendar2.get(Calendar.YEAR);
        month = calendar.get(Calendar.MONTH);
        month2 = calendar2.get(Calendar.MONTH);
        day = calendar.get(Calendar.DAY_OF_MONTH);
        day2 = calendar2.get(Calendar.DAY_OF_MONTH);
        hour = calendar.get(Calendar.HOUR_OF_DAY);
        hour2 = calendar2.get(Calendar.HOUR_OF_DAY);
        minute = calendar.get(Calendar.MINUTE);
        minute2 = calendar2.get(Calendar.MINUTE);

        if (year2 - year > 0) {
            time = (year2 - year) + " years ago | ";
            map.put("uploaded", time);
        } else if (month - month > 0) {
            time = (month2 - month) + " months ago | ";
            map.put("uploaded", time);
        } else if (day2 - day > 0) {
            time = (day2 - day) + " days ago | ";
            map.put("uploaded", time);
        } else if (hour2 - hour > 0) {
            time = (hour2 - hour) + " hours ago | ";
            map.put("uploaded", time);
        } else if (minute2 - minute > 0) {
            time = (minute2 - minute) + " minutes ago | ";
            map.put("uploaded", time);
        }

        else {
            map.put("uploaded", "a few seconds ago | ");
        }

        // map.put("uploaded", videoInfo[j]);
        j++;
        map.put("category", videoInfo[j]);
        j++;
        map.put("title", videoInfo[j]);
        j++;
        map.put("description", videoInfo[j]);
        j++;
        map.put("thumbnail", thumbnail[i]);
        map.put("thumbnail_link", videoInfo[j]);
        j++;
        map.put("share_link", videoInfo[j]);
        Log.v("In videoInfo List", "share_link: " + videoInfo[j]);
        j++;
        map.put("youtube_link", videoInfo[j]);
        j++;
        map.put("rtsp", videoInfo[j]);
        Log.v("In videoInfo List", "rtsp: " + videoInfo[j]);
        j++;

        float a = Float.parseFloat(videoInfo[j]);
        int b = (int) a;
        int sec = b % 60;
        int min = b / 60;
        String duration;
        if (sec < 10) {
            duration = min + " : 0" + sec;
        } else {
            duration = min + " : " + sec;
        }
        // videoInfo[j] = duration;
        map.put("duration", duration);
        Log.v("In videoInfo List", "duration: " + duration);
        list.add(map);

    }

    Log.v("In videoInfo List", "list: " + list.size());

    return list;
}
} 
```

现在我想在主 Activity 中单击特定项目时从 mData 检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:51:28.200

你会像以前一样做。`EndlessAdapter`不会更改在诸如a 之`position`类的方法中提供给您的值。`onListItemClick()``ListFragment`

# php - 它没有在 php/html 表中正确显示数据

> ID：12831152
> 
> 赞同：0
> 
> 时间：2012-10-11T02:02:48.660
> 
> 标签：php, html, mysql, sql, database

我在下面有一个“答案”数据库表：

答案表

```
AnswerId SessionId QuestionId Answer
13       AAA       1          A
14       AAC       1          True 
```

现在您可以看到，考试（会议）AAA 中的问题 1 有 1 个答案，而这些是考试（会议）AAC 中问题 1 的 1 个答案。

下面是“问题”表：

问题表：

```
SessionId  QuestionId QuestionContent NoofAnswers ReplyId QuestionMarks OptionId
AAA        1          What is 2+2?    1           1       5             2
AAC        1          Is 3+3 = 6?     1           1       5             25 
```

现在我有一个搜索功能，用户可以从问题中输入一个术语并编译搜索。因此，例如，如果用户输入“2+2”，则结果应显示在 php/html 表中：

```
 QuestionContent Option Type  Number of Answers Answer Number of Replies  Number of Marks
   What is 2+2?    A-D          1                 A      Single             5 
```

但问题是它显示了一个额外的行，它在下面显示：

```
 QuestionContent Option Type  Number of Answers Answer Number of Replies  Number of Marks
   What is 2+2?    A-D          1                 A True    Single             5
   What is 2+2?    A-D          1                 A True    Single             5 
```

现在我的问题是，为什么它显示两行，为什么它在“答案”列下包含答案“真”，而该问题的答案应该只是“A”？我相信这是因为这两个问题具有相同的 QuestionId（问题编号），但它们都属于不同的 SessionId，所以这应该不是问题。

下面是执行查询并输出结果的代码（我已将其简化，以便您更容易阅读并希望看到问题）：

```
<?php

//connect to db

    // Build the query
    $questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, r.ReplyType, 
       q.QuestionMarks 
  FROM Answer an 
  INNER JOIN Question q ON q.QuestionId = an.QuestionId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 
      WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
      GROUP BY an.SessionId, an.QuestionId
      ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
    ";

    // Make the referenced array
    $referencedArray = make_values_referenced(array_merge(
      array(str_repeat("ss", $numTerms)), // types
      $termArray,                         // where
      $termArray                          // order by
    ));

    // Bind parameters
    if (!call_user_func_array(array($stmt, 'bind_param'), make_values_referenced($referencedArray))) {
      die("Error binding parameters: $stmt->error"); 
    }

    // This will hold the search results
    $searchResults = array();
    $searchOption = array();
    $searchNoofAnswers = array();
    $searchAnswer = array();
    $searchReply = array();
    $searchMarks = array();

    // Fetch the results into an array
    if (!$stmt->num_rows()) {
      $stmt->bind_result($dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
      while ($stmt->fetch()) {
        $searchResults[] = $dbQuestionContent;
        $searchOption[] = $dbOptionType;
        $searchNoofAnswers[] = $dbNoofAnswers;
        $searchAnswer[] = $dbAnswer;
        $searchReply[] = $dbReplyType;
        $searchMarks[] = $dbQuestionMarks;
      }
    }

  }

      $questionnum = sizeof($searchResults);

    // If $searchResults is not empty we got results
    if (!empty($searchResults)) {
      echo "<p>Your Search: '$inputValue'</p>";  
      echo"<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
      echo "<table border='1' id='resulttbl'>
      <tr>
      <th class='questionth'>Question</th>
      <th class='optiontypeth'>Option Type</th>
      <th class='noofanswersth'>Number of <br/> Answers</th>
      <th class='answerth'>Answer</th>
      <th class='noofrepliesth'>Number of <br/> Replies</th>
      <th class='noofmarksth'>Number of <br/> Marks</th>
      </tr>\n";
      $script = '';
      foreach ($searchResults as $key=>$question) {
      $script .= 'var key_' . $key . '="' . str_replace('"','\"', $question) . '";' . PHP_EOL;
        echo '<tr class="questiontd">'.PHP_EOL;
        echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
        echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>' . PHP_EOL;
        echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>' . PHP_EOL;
        echo '<td class="answertd">'.htmlspecialchars(implode(' ', $searchAnswer)).'</td>' . PHP_EOL; 
        echo '<td class="noofrepliestd">'.htmlspecialchars($searchReply[$key]).'</td>' . PHP_EOL;
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow(key_$key,'$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";
}
        echo "</table>" . PHP_EOL;
        echo '<script type="text/javascript">' . PHP_EOL;
        echo $script;
        echo '</script>' . PHP_EOL;

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:14:57.290

这里的问题似乎与您定义的数据库架构有关，而不是您使用它的方式，我的意思是答案表上的唯一值似乎应该是 answerID 或 SessionId+QuestionId，所以如果您在查询中使用该表，您还应该包括SessionId 在您与 Question 表的连接条件下，我的意思是至少看起来不同会话中的两个不同问题可以有相同的 questionID 是关键问题。

因此，您的代码应如下所示：

```
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT     Answer SEPARATOR '') AS Answer, r.ReplyType, 
       q.QuestionMarks, q.SessionId
FROM Answer an 
INNER JOIN Question q ON q.QuestionId = an.QuestionId and an.SessionId = q.SessionId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
    WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
    GROUP BY an.SessionId, an.QuestionId
    ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
"; 
```

**UPDATED**上面的 SQL 查询反映到更新的问题

新问题仍然与查询没有指定会话有关，因此跨会话的不同问题可能会混合在一起，我建议您在选择列表中查询 sessionID 以获取正确的数据，并将其隐藏在页面上如果您不想显示它，但请记住，如果您有一些其他详细信息页面来显示问题，您仍然需要将 sessionID 和 QuestionId 完全传递到该页面以识别唯一数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:11:43.963

包括`an.QuestionId`在选择查询中。

```
$questionquery = "
SELECT DISTINCT an.QuestionId,q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, r.ReplyType, 
   q.QuestionMarks 
FROM Answer an 
INNER JOIN Question q ON q.QuestionId = an.QuestionId
JOIN Reply r ON q.ReplyId = r.ReplyId 
JOIN Option_Table o ON q.OptionId = o.OptionId 
  WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
  GROUP BY an.SessionId, an.QuestionId
  ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0)  DESC"))."
 "; 
```

您已使用 group by for`an.QuestionId`但未将其包含在选择列中，因为即将出现多个数据。

# android - 无法从 View 投射到 Chronometer

> ID：12831167
> 
> 赞同：0
> 
> 时间：2012-10-11T02:05:58.123
> 
> 标签：android, chronometer

我做的一切都是对的，我猜？我保存了 xml 文件，但不知道如何解决这个问题。我是新手，请帮助。

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<Chronometer
 android:id="@+id/my_chronometer"
 android:layout_gravity="center_horizontal"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
 />
<Button
 android:id="@+id/buttonstart"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Start"
 />
<Button
 android:id="@+id/buttonstop"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Stop"
 />
<Button
 android:id="@+id/buttonreset"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Reset"
 />
</LinearLayout> 
```

chronometer.java：

![](../Images/bf6ad4e5f5b8f561792cbc51ae2495c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:57:06.423

我认为问题出在您的班级名称上。它与“天文钟”同名。这可能是它的原因。尝试将活动名称替换为其他名称。也许是带有小写字母“c”的“chronometer”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T03:38:19.397

我认为您的代码没有错误，但我认为您错过了 Chronometer 的导入。

请在您的课程中添加此导入，

```
 import android.widget.Chronometer; 
```

祝你好运。

# jquery - 如何使用 mousemove 显示 div，然后在 2 秒后自动隐藏它们

> ID：12831168
> 
> 赞同：0
> 
> 时间：2012-10-11T02:05:57.850
> 
> 标签：jquery

我已经查看了整个网络，但仍然可以做到这一点。我正在使用的 jquery 代码是：

```
$(document).ready(function(){
// Slide top and bottom bars away in all screens except the lobby
    $("#main_content").ajaxStop(function(){

        if($("#content_text").length){
            }
        else{
            $("#top").slideUp(2000);
            $("#btm").slideUp(2000);
            }
    });

// Slide bars back in when the mouse is moved and then away again after 2 seconds

    var fadeout = null;
    $("html").mousemove(function() {

          $("#top").slideDown(2000);
          $("#btm").slideDown(2000);
          if (fadeout != null) {
            clearTimeout(fadeout);
          }
          fadeout = setTimeout(3000, hide_playerlist);
          alert("call back fired");
        });

    function hide_playlist() {
          $("#top").slideUp(2000);
          $("#btm").slideUp(2000);
        }

}); 
```

问题是缪斯移动过于敏感，每次像素移动后都会触发。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:43:05.580

抱歉，我解决了这个问题。这不是鼠标移动敏感度，而是 chrome 和 Internet Explorer 上的 DirectX 操作系统级别的错误（Firefox 和 Opera 都很好）。该错误仅出现在 windows 机器上，并没有发生在 mac 和 linux 上。无论如何，我更新了我的代码以捕获当前位置，并且仅在位置发生变化时才起作用

```
if($("#mediaPlayerWrapper").length){// Slide top and bottom bars when video wrapper is displayed

            $("#top").slideUp(2000); //slide up(hide) DIV's
            $("#btm").slideUp(2000); 

                var timer;      
                $('html').mousemove(function(e) {//slide(show) DIV's down on mouse move
                    if(window.lastX !== e.clientX || window.lastY !== e.clientY){   //Check to see if mouse has movedbefore running code(Temporary solution mousemove envent firing problem on IE and Chrome)

                        $('#top').slideDown(2000);
                        $('#btm').slideDown(2000);
                        clearTimeout(timer);
                        timer = setTimeout(onmousestop, 5000);//call onmousestop after 5 seconds
                        }

                        window.lastX = e.clientX
                        window.lastY = e.clientY

                    });

                var onmousestop = function() {//slide up(hide) DIV's again
                    $('#top').slideUp(2000);
                    $('#btm').slideUp(2000);
            }; 
```

# python - python中的正割方法函数

> ID：12831169
> 
> 赞同：2
> 
> 时间：2012-10-11T02:06:00.980
> 
> 标签：python, function, methods, calculus

我知道这已经在 C/C++ 中解决了，但是我对这些语言不够满意，无法将其转换为 python。我正在尝试在 python中创建[它。](http://en.wikipedia.org/wiki/Secant_method#The_method "这")我能来的最接近的是：

```
#This is meant to work for functions of the form x^a + b = 0

def secant(base, exp=2, it=20):
    def f(x):
        return x**exp - base
    x1 = base / float(exp**2)
    xnm1 = x1 - 5
    xnm2 = x1 + 5
    xn = 0
    for n in range(it):
        q = (xnm1-xnm2)/float(f(xnm1)-f(xnm2))
        xn = xnm1 - (f(xnm1)*q)
        xnm1, xnm2 = xn, xnm1
    return xn

print secant(2, 2) 
```

这将返回错误：

```
Traceback (most recent call last):
  File "/Users/Joe/Desktop/secant.py", line 16, in <module>
    print secant(2, 2)
  File "/Users/Joe/Desktop/secant.py", line 11, in secant
    q = (xnm1-xnm2)/float(f(xnm1)-f(xnm2))
ZeroDivisionError: float division by zero 
```

但是，我能够编写基于此代码的牛顿方法。如果有帮助，这里是：

```
def newton(base, exp=2, it=20):
    def f(x):
        return x**exp - base
    def df(x):
        return exp*(x**(exp-1))
    x1 = base / float(exp**2)
    xnp = x1
    xn = 0
    for n in range(it):
        xn = xnp - ((f(xnp)/df(xnp)))
        xnp = xn
    return xn 
```

以下方法在 20 次迭代后给出了 12 位精度的答案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:59:20.430

您得到除以零误差，因为该算法在 Python 浮点数的精度范围内收敛到答案。除了迭代最大次数（以避免无限循环）之外，您还应该检查最后两个猜测是否“足够接近”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:16:38.553

重要的是浮点数的轮次。在前一种情况下，经过一些迭代，和之间的差异`f(xnm1)`很小`f(xnm2)`，以至于浮点数无法表示它，因此将其四舍五入为零，然后抛出错误。

在后一种中，我们直接使用导数计算该点的斜率，虽然它很小，但它是非零的（但在接下来的迭代中它几乎保持相同的值），所以它不会抛出错误。

这是[一个例子](http://codepad.org/vKdq0XlL)，和[IEEE 浮点数](http://en.wikipedia.org/wiki/IEEE_floating_point)。

# mysql - SQL：选择两次出现的最大值

> ID：12831170
> 
> 赞同：0
> 
> 时间：2012-10-11T02:06:04.647
> 
> 标签：mysql, sql, select

我在 sql 中有一个小问题，我无法找到构建正确语句的方法。当“etud”和“mod”在出现次数中相等时，我只需要在结果中包含具有最大“sess”的行：

```
etud|sess|mod|eta
1------1---M1--nv
1------2---M1--v
2------1---M1--nv
3------1---M1--v
4------1---M1--v 
```

现在我需要的结果是：

```
etud|sess|mod|eta
1------2---M1--v
2------1---M1--nv
3------1---M1--v
4------1---M1--v 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:09:52.840

这实际上只是一个[`MAX()`聚合](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)`etud`，按and分组`mod`：

```
SELECT
  etud,
  MAX(sess) AS sess,
  mod
FROM yourtable
GROUP BY etud, mod 
```

### 编辑问题后更新：

尽管 MySQL 将允许您简单地将列添加到上面的查询中而不将其添加`GROUP BY`到回来（虽然通常它会是第一个）。

要拉入`eta`匹配的剩余列，`MAX(sess)`您可以加入子查询。

```
SELECT
  main.etud,
  maxsess.maxsess AS sess
  main.mod,
  main.eta
FROM
  yourtable
  JOIN (
    SELECT
      etud,
      MAX(sess) AS maxsess,
      mod
    FROM yourtable
    GROUP BY etud, mod
    /* JOIN all 3 columns of the subquery which gets the MAX() against the rest of the table */
  ) maxsess ON main.etud = maxsess.etud AND main.sess = maxsess.maxsess AND main.mod = maxsess.mod 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T02:11:21.993

```
SELECT  etud,max(sess),  mod1
FROM tblA
GROUP BY etud, mod1 
```

SQL FIDDLE[在这里。](http://sqlfiddle.com/#!2/dba65/1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T02:14:13.263

您可以使用[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。我假设您只需要可以通过此查询检索的`sess`每个配对的最大值：`etud-mod`

```
SELECT etud, max(sess) as sess, mod FROM table GROUP BY etud, mod; 
```

但是如果您只想删除 minimum`sess`并获取其他行，那么这是一个解决方案：

```
SELECT etud, sess, mod
FROM table 
JOIN (SELECT etud, min(sess) as sess, mod FROM table GROUP BY etud, mod) AS mintable
  ON table.etud = mintable.etud 
    AND table.mod = mintable.mod
    AND table.sess <> mintable.sess 
```

作为基于您的问题的示例。

```
etud|sess|mod
1------1------M1
1------2------M1
1------3------M1
2------1------M1
2------2------M1 
```

第一个查询将返回

```
etud|sess|mod
1------3------M1
2------2------M1 
```

第二个查询将返回

```
etud|sess|mod
1------2------M1
1------3------M1
2------2------M1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T02:43:19.187

这是 SQL 表和插入：create table esm (etud INT(11), sess INT(11), modval char(3))

```
INSERT INTO esm (etud,sess,modval) VALUES ( 1,1,'M1');
INSERT INTO esm (etud,sess,modval) VALUES ( 1,2,'M1');
INSERT INTO esm (etud,sess,modval) VALUES ( 2,1,'M1');
INSERT INTO esm (etud,sess,modval) VALUES ( 3,1,'M1');
INSERT INTO esm (etud,sess,modval) VALUES ( 4,1,'M1'); 
```

和查询：

```
SELECT esm1.* FROM esm esm1
INNER JOIN (SELECT MIN(etud) as minetud, sess, modval
FROM  esm
GROUP BY   sess, modval) esm2
ON esm1.sess=esm2.sess AND esm1.modval=esm2.modval
WHERE esm1.etud <> minetud; 
```

我的结果与您期望的结果不同，但我认为它们反映了您对问题的陈述。

```
+------+------+--------+
| etud | sess | modval |
+------+------+--------+
|    2 |    1 | M1     | 
|    3 |    1 | M1     | 
|    4 |    1 | M1     | 
+------+------+--------+ 
```

# c# - 在 WPF DataGrid 控件中设置选定单元格的样式

> ID：12831173
> 
> 赞同：2
> 
> 时间：2012-10-11T02:06:12.467
> 
> 标签：c#, wpf, xaml, styles

我正在尝试更改 WPF DataGrid 控件的选定单元格的样式。

style`DataGridCell`和 和有什么不一样`DataGridRow`？我在下面尝试了各种组合，它们都有效。但是，似乎我只需要设置样式**或** 。`DataGridCell``DataGridRow`

**两者兼有**的目的是什么？这告诉我我误解了他们的目的。

样式`DataGridCell`：（在我自己的代码中，我更改了默认颜色）

```
 <Style TargetType="{x:Type DataGridCell}">
 <Style.Triggers>
  <Trigger Property="IsSelected" Value="True">
  <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
  <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  </Trigger>
 </Style.Triggers>
 </Style> 
```

样式`DataGridRow`：（在我自己的代码中，我更改了默认颜色）

```
 <Style TargetType="{x:Type DataGridRow}">
 <Style.Triggers>
  <Trigger Property="IsSelected" Value="True">
  <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
  <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
  </Trigger>
 </Style.Triggers>
 </Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T02:26:03.140

DataGridRow 将应用于整个 Row。如果要设置整行的任何属性，可以使用 DataGridRow。

每个 DataGridRow 都包含一个 DataGridCell 列表。您也可以为此定义样式。如果您不这样做，它将采用 DataGridRow 中的样式。

通常，我们指定后者来定义两个相邻单元格之间的差异，例如指定单元格之间的边距、边界等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-07T14:27:17.880

正如@abhishek 所说......我有一种情况，我需要同时使用行样式和单元格样式，这是我的行样式

```
<!-- Row Style-->
        <Style x:Key="RowStyle" TargetType="{x:Type dg:DataGridRow}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="BorderBrush" Value="Red"/>
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style> 
```

然后我需要在选择时将特定单元格设为白色背景

```
<Style x:Key="TimeCell" TargetType="{x:Type dg:DataGridCell}">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="Foreground" Value="Black"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                </Trigger>
            </Style.Triggers>
        </Style> 
```

并为特定列指定样式

```
<dg:DataGridTemplateColumn Width="120" CellStyle="{StaticResource TimeCell}"> 
```

我希望我想说的很清楚

# wpf - WPF按钮内的png图像

> ID：12831178
> 
> 赞同：3
> 
> 时间：2012-10-11T02:07:07.433
> 
> 标签：wpf, xaml, button, resourcedictionary

我想创建一个内部带有 png 图像的 WPF 按钮，但背景不起作用

```
<Setter Property="Width" Value="30"/>
<Setter Property="Height" Value="30"/>
<Setter Property="Background" Value="Purple"/>

<Setter Property="Template">

    <Setter.Value>
        <ControlTemplate TargetType="Button">

            <Grid>
                <Image Source="../Images/Buttons/logo_30px.png"/>
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>

            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="1"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Opacity" Value="1"/>
                </Trigger>
            </ControlTemplate.Triggers>

        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

我的按钮大小是 30x30，我的图像也是 30x30 像素，并且它有透明区域，当我使用“背景”属性时，它根本不工作。

如何使背景颜色起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T07:22:30.127

您的 ControlTemplate 必须*使用*Background 属性，就像这样：

```
<ControlTemplate TargetType="Button"> 
    <Grid> 
        <Rectangle Fill="{TemplateBinding Background}"/>
        <Image Source="../Images/Buttons/logo_30px.png"/> 
        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/> 
    </Grid> 
    ...
</ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T07:30:30.037

使用`ControlTemplate`标签您正在构建自己的按钮外观。所以您需要使用`Border`或实现（添加）您的自定义背景，`Rectangle`并`Backrgound(Border)` `Fill(Rectangle)`使用`TemplateBinding`.

```
<Rectangle Fill="{TemplateBinding Background}"/> 
```

或者

`<Border Background="{TemplateBinding Background}"/>`

# javascript - 选择单选按钮时，弹出框应显示单选按钮的文本

> ID：12831180
> 
> 赞同：-9
> 
> 时间：2012-10-11T02:07:27.677
> 
> 标签：javascript, html

我有 3 个单选按钮：红色、蓝色和绿色 当我选择三个单选按钮之一时，应该会出现一个弹出框（警报），并且应该显示所选单选按钮的文本（例如：蓝色）。谁能提供它的javascript代码。谢谢你

对此感到抱歉，这是我对 javascript 代码的尝试：

```
function radioEvent (radio) 
{
var dom = document.getElementById("myForm");
  for (var index = 0; index < dom.radioButton.length;index++) 
  {
    if (dom.radioButton[index].checked) 
    {
      radio = dom.radioButton[index].value;
    }
  }
}

<td rowspan = "2" >
<input type="radio" name= "radioButton" value= "radio1"> Excellent<br>
<input type="radio" name="radioButton"  value="radio2" > Very Good <br>
<input type="radio" name="radioButton"  value="radio3" > Good <br>
<input type="radio" name="radioButton"  value="radio4" > Satisfactory
        </td> 
```

我的问题是下一步该怎么做？我很困惑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:39:15.417

我只是在编写 HTML 代码：

```
<input id="a1" type="radio" name="group1" value="Red" onclick="alert('Red');">red <br>
<input id="a2" type="radio" name="group1" value="Blue" onclick="alert('Blue');" > Blue<br>
<input id="a3" type="radio" name="group1" value="Green" onclick="alert('Green');"> green 
```

如果您需要更多代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:15:11.330

```
<script type="text/javascript">
function radioEvent(form) 
{
 for (var i = 0; i < form.radioButton.length; i++) 
 {
    if (form.radioButton[i].checked)
    {
        alert("You chose " + form.radioButton[i].value + ".")
    }
 }
 }
</script>
</head>
<body>
<form>
<input type="radio" name= "radioButton" value= "Excellent"   onclick="radioEvent(this.form);"/> Excellent<br/>
<input type="radio" name="radioButton"  value="Very Good" onclick="radioEvent(this.form);"/> Very Good <br/>
<input type="radio" name="radioButton"  value="Good" onclick="radioEvent(this.form);"/> Good <br/>
<input type="radio" name="radioButton"  value="Satisfactory" onclick="radioEvent(this.form);"/> Satisfactory
</form>
</body>
</html> 
```

# haskell - Haskell - 优化微分方程求解器

> ID：12831187
> 
> 赞同：7
> 
> 时间：2012-10-11T02:09:06.707
> 
> 标签：haskell, ode, differential-equations

我正在学习 Haskell，并尝试尽可能快地用 C 语言编写代码。对于这个练习，我正在为一个简单的一维物理系统编写[欧拉积分器。](http://en.wikipedia.org/wiki/Euler_method)

*   C 代码使用 GCC 4.5.4 和`-O3`. 它在**1.166**秒内运行。
*   Haskell 代码使用 GHC 7.4.1 和`-O3`. 它在**21.3**秒内运行。
*   如果我用 编译 Haskell `-O3 -fllvm`，它会在**4.022**秒内运行。

那么，我是否缺少优化 Haskell 代码的内容？

**PS.：**我使用了以下论点：`1e-8 5`.

C代码：

```
#include <stdio.h>
double p, v, a, t;

double func(double t) {
  return t * t;
}

void euler(double dt) {
  double nt = t + dt;
  double na = func(nt);
  double nv = v + na * dt;
  double np = p + nv * dt;

  p = np;
  v = nv;
  a = na;
  t = nt;
}

int main(int argc, char ** argv) {
  double dt, limit;
  sscanf(argv[1], "%lf", &dt);
  sscanf(argv[2], "%lf", &limit);
  p = 0.0;
  v = 0.0;
  a = 0.0;
  t = 0.0;

  while(t < limit) euler(dt);
  printf("%f %f %f %f\n", p, v, a, t);
  return 0;
} 
```

哈斯克尔代码：

```
import System.Environment (getArgs)

data EulerState = EulerState !Double !Double !Double !Double deriving(Show)
type EulerFunction = Double -> Double

main = do
  [dt, l] <- fmap (map read) getArgs
  print $ runEuler (EulerState 0 0 0 0) (**2) dt l

runEuler :: EulerState -> EulerFunction -> Double -> Double -> EulerState
runEuler s@(EulerState _ _ _ t) f dt limit = let s' = euler s f dt
                                             in case t `compare` limit of
                                                  LT -> s' `seq` runEuler s' f dt limit
                                                  _ -> s'

euler :: EulerState -> EulerFunction -> Double -> EulerState
euler (EulerState p v a t) f dt = (EulerState p' v' a' t')
    where t' = t + dt
          a' = f t'
          v' = v + a'*dt
          p' = p + v'*dt 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T13:23:05.893

[hammar](https://stackoverflow.com/a/12831539/1011995)和[Philip JF](https://stackoverflow.com/a/12831437/1011995)已经提到了关键点。但是，让我收集它们并添加一些解释。

我会从上到下进行。

```
data EulerState = EulerState !Double !Double !Double !Double 
```

您的类型具有严格的字段，因此每当该类型的对象被评估为 WHNF 时，其字段也被评估为 WHNF。在这种情况下，这意味着对象已被完全评估。这很好，但不幸的是，在我们的情况下还不够好。这种类型的对象仍然可以使用指向原始数据的指针来构造，而不是将原始数据解包到构造函数中，这就是加速度字段发生的情况（模循环不直接使用该类型，而是通过组件作为参数）。由于该字段未在 中使用`euler`，因此您得到

```
Rec {
Main.$wrunEuler [Occ=LoopBreaker]
  :: GHC.Prim.Double#
     -> GHC.Prim.Double#
     -> GHC.Types.Double
     -> GHC.Prim.Double#
     -> Main.EulerFunction
     -> GHC.Prim.Double#
     -> GHC.Prim.Double#
     -> (# GHC.Types.Double,
           GHC.Types.Double,
           GHC.Types.Double,
           GHC.Types.Double #) 
```

一个带有盒装参数的循环。这意味着在每次迭代中，一些`Double#`需要装箱，一些需要`Double`拆箱。装箱和拆箱不是非常昂贵的操作，但是在一个本来很紧的循环中，它们可能会消耗大量性能。相同装箱/拆箱问题的另一个实例与 type 的参数`EulerFunction`有关，稍后会详细介绍。`-funbox-strict-fields`正如[Philp JF 所建议的那样](https://stackoverflow.com/a/12831437/1011995)，或者`{-# UNPACK #-}`至少在加速场上的编译指示在这里有帮助，但是只有当函数评估的装箱/拆箱也被消除时，差异才会变得相关。

```
print $ runEuler (EulerState 0 0 0 0) (**2) dt l 
```

你在`(** 2)`这里作为一个论点传递。这与您在 C 中使用的函数不同，相应的 C 函数将是`return pow(t,2);`，并且使用我的 gcc，使用它几乎可以使 C 程序的运行时间增加一倍（不过对于 clang 没有区别）。最大的性能问题是这`(**)`是一个*缓慢*的功能。由于许多参数的`(** 2)`结果不同`\x -> x*x`，因此没有重写规则，因此您确实可以使用 GHC 的本机代码生成器获得该慢速函数（似乎 LLVM 将其替换为`\x -> x*x`尽管如此，因为两个 GHC 后端和铿锵的结果）。如果你通过`(\x -> x*x)`或`(^ 2)`那里而不是`(** 2)`，你得到乘法（有一个重写规则`(^ 2)`从 7.4 开始）。此时，在我的系统上，NCG 生成的代码和 LLVM 生成的代码性能没有太大差异，但 NCG*快*了 10% 左右。

现在的大问题

```
runEuler :: EulerState -> EulerFunction -> Double -> Double -> EulerState
runEuler s@(EulerState _ _ _ t) f dt limit = let s' = euler s f dt
                                             in case t `compare` limit of
                                                  LT -> s' `seq` runEuler s' f dt limit
                                                  _ -> s' 
```

`runEuler`是递归的，因此不能内联。这意味着传递的函数也不能在那里内联，并且每次迭代也传递`dt`and参数。`limit`函数不能被内联意味着在循环中，它的参数在传递给函数之前必须被装箱，然后它的结果必须被拆箱。那是昂贵的。这意味着在内联函数参数后无法进行任何优化。

[如果您进行hammar 建议](https://stackoverflow.com/a/12831539/1011995)的工人/包装器转换和静态参数转换，则可以内`runEuler`联，因此可以内联传递的函数，并且 - 在这种情况下 - 可以消除参数的装箱及其结果的拆箱。此外，甚至更大的影响，在这种情况下，可以消除函数调用并用一台机器操作代替。这导致了一个很好的紧密循环，如图所示

```
 174,208 bytes allocated in the heap
         3,800 bytes copied during GC 
```

相比

```
16,000,174,912 bytes allocated in the heap
     1,475,432 bytes copied during GC 
```

的原始。

总之，使用本机代码生成器的 C 程序速度大约是 C 程序的一半，而我的机器上的 LLVM 后端的速度相同（本机代码生成器不是特别擅长优化循环，而 LLVM 是，因为循环非常在通过 LLVM 编译的许多语言中很常见）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T03:02:05.310

通过[对](http://www.haskell.org/haskellwiki/Worker_wrapper)`runEuler`. _

```
runEuler :: EulerState -> EulerFunction -> Double -> Double -> EulerState
runEuler s f dt limit = go s
  where go s@(EulerState _ _ _ t) = if t < limit then go (euler s f dt) else s 
```

这有助于`f`内联到循环中（这可能也发生在 C 版本中），从而消除了很多开销。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-11T02:47:17.823

我目前没有正常运行的 LLVM，但我得到的结果是两倍

1.  在 GHC 中使用`-O2`而不是`-O3`（虽然我怀疑这很重要，但`-O3`没有维护）
2.  使用`-funbox-strict-fields`
3.  使用`x*x`代替`x ** 2`（与您的 C 代码相同）
4.  将您的“欧拉函数”移动为一个独立的函数，就像在 C 中一样。

IE

```
 func :: EulerFunction
  func x = x * x

  runEuler :: EulerState -> Double -> Double -> EulerState
  runEuler s@(EulerState _ _ _ t) dt limit = let s' = euler s dt
                                             in case t `compare` limit of
                                                  LT -> s' `seq` runEuler s' dt limit
                                                  _ -> s'

  euler :: EulerState -> Double -> EulerState
  euler (EulerState p v a t) dt = (EulerState p' v' a' t')
    where t' = t + dt
          a' = func t'
          v' = v + a'*dt
          p' = p + v'*dt 
```

您可能可以进一步推动它（或者也许像 Dons 这样的 Haskell 性能专家会出现一个解决方案），我什至没有看过它生成的核心，但总的来说，使 Haskell 代码“与 C 一样快”的方法是“用 C 编写并使用 FFI。”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T11:14:52.060

几个参考：

*   [http://www.haskell.org/haskellwiki/Performance](http://www.haskell.org/haskellwiki/Performance)
*   [http://blog.johantibell.com/2010/09/slides-from-my-high-performance-haskell.html](http://blog.johantibell.com/2010/09/slides-from-my-high-performance-haskell.html)
*   [http://donsbot.wordpress.com/2010/03/01/evolving-faster-haskell-programs-now-with-llvm/](http://donsbot.wordpress.com/2010/03/01/evolving-faster-haskell-programs-now-with-llvm/)

以下是代表普通民间传说的传福音。所以带着一粒盐吃。

从比史前语言（如 C、Fortran、Ada 和 C++）更不成熟的任何东西，您都无法在不同的微基准测试中获得稳定的类似 C 的性能。甚至 Java 还没有完全实现。有时你会得到，但有时编译器会失败，而 GHC 经常会失败。

但微基准并不能告诉你一切。

问题在于，在任何地方获得微调的低级 C 代码对于大型项目来说在财务上是不可行的。因此，C 程序最终会出现糟糕的算法、糟糕的架构、没有低级瓶颈，并计划最终重写所有内容。在 C 语言中，调整低级代码很容易，但很难进行大规模的架构更改。在 Haskell 中反之亦然，因此混合使用 Haskell 和 C 编写应该可以让您两全其美。

# jquery - Twitter bootstrap - 为标签式导航添加动画/过渡效果

> ID：12831188
> 
> 赞同：4
> 
> 时间：2012-10-11T02:09:07.113
> 
> 标签：jquery, css, twitter-bootstrap

我使用引导站点中的示例进行了基本的选项卡式导航。如何添加动画效果（淡入和淡出），以便在单击每个选项卡时新内容淡入？

```
 <!--   i have a basic tabbed navigation using the example from the bootstrap site. how can i add an animation effect (fade in and out) so when each tab is clicked the new content is faded in? -->

    <div class="tabbable">
      <ul class="nav nav-tabs nav-stacked span3">
         <li class="active">
          <a href="#myDashboardNav" data-toggle="tab">
        <i class="icon-align-justify"></i>
        My dashboard 
        <span class="badge badge-important">20%</span>
            </a>

    </li>
    <li id="myfeed">
    <a href="#myFeedNav" data-toggle="tab">
    <i class="icon-list-alt"></i>
    My feed   
    <span class="badge badge-important">6</span>
    </a>
    </li>
    <li id="notifications">
    <a href="#notificationsNav" data-toggle="tab">
    <i class="icon-time"></i>
    Notifications <span class="badge badge-important">9</span>
    </a>
    </li>
    </ul>

    <div class="tab-content span8">
    <div class="tab-pane well active" id="myDashboardNav" style="height: 330px">Content1
    </div>
    <div class="tab-pane well" id="myFeedNav" style="height: 330px">Content2

    </div>

    <div class="tab-pane well" id="notificationsNav" style="height: 330px">Content3

    </div>

    </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-16T07:47:49.410

为了使转换生效，应在所有选项卡窗格中添加“淡入淡出”类，并在活动窗格中添加“in”类。（下面的代码是来自 Bootstrap 的示例，经过编辑以包含转换）

**注意**：此代码适用于 Bootstrap 2。对于 v3，请参阅[文档](http://getbootstrap.com/javascript/#tabs)

```
<ul class="nav nav-tabs" id="myTab">
  <li class="active"><a href="#home">Home</a></li>
  <li><a href="#profile">Profile</a></li>
  <li><a href="#messages">Messages</a></li>
  <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active fade in" id="home">...</div>
  <div class="tab-pane fade" id="profile">...</div>
  <div class="tab-pane fade" id="messages">...</div>
  <div class="tab-pane fade" id="settings">...</div>
</div>

<script>
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
})
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T16:40:53.323

正如Twitter Bootstrap 官方页面上[的示例](http://getbootstrap.com/2.3.2/javascript.html#tabs)所解释的那样，您只需为 .tab-pane 元素提供一个`fade`类。

```
<div class="tab-pane active fade in" ...> 
```

不要忘记加载`bootstrap-transition.js`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:56:51.760

使用 history.pushState 或 History.js 或构建[https://github.com/browserstate/ajaxify](https://github.com/browserstate/ajaxify)

这个过程实际上是一个非常复杂且比看起来更先进的过程。

我在[http://cameronspear.com](http://cameronspear.com)的网站在内容中使用了 AJAX 的一种变体，同时更新 URL 并以漂亮的幻灯片效果进行过渡。

一个更简单的选择，您可以将所有内容放在一个页面上，并给每个部分一个唯一的 id 和一个公共类，然后使导航中的链接对应于唯一的 ID，并使用 jQuery，隐藏其他内容区域并显示被点击的那个。

这是一个简单的示例：[http ://codepen.io/CWSpear/pen/naJzl](http://codepen.io/CWSpear/pen/naJzl)

# python - 如何在该字符串的 url conf 中获得正确的正则表达式？

> ID：12831190
> 
> 赞同：2
> 
> 时间：2012-10-11T02:09:43.367
> 
> 标签：python, regex, url, youtube-api

当前的正则表达式是：

```
url(r'^partner/(?P<author>[-\w]+)/(?P<video>\w+)/(?P<title>\w+)/$', 'video_player'), 
```

我一直在尝试一段时间，但无法让它在 title （最后一个参数）将接受以下 2 个示例字符串的情况下工作：

*   Zombie Apocalypse！：您需要从“专家”那里获得的（100 多种）救生技能，或者他们说的？
*   [http://gdata.youtube.com/feeds/api/videos/k8J-72MmTGg/related?v=2](http://gdata.youtube.com/feeds/api/videos/k8J-72MmTGg/related?v=2)

有什么建议吗？

# 编辑

下面是一些在我将其作为标题参数传递时不起作用的文本： 国家棒球名人堂展示了 6 件洋基队季后赛纪念品：1923 年世界大赛的手表；1926 年世界大赛中贝比·鲁斯 (Babe Ruth) 的球棒；1956 年 Don Larsen 完美比赛中 Yogi Berra 的手套；1962 年世界大赛的最后一球；Derek Jeter 1996 年世界大赛的球衣；2000 年地铁系列中的马里亚诺·里维拉 (Mariano Rivera) 的帽子。

[http://www.buzzfeed.com/sports](http://www.buzzfeed.com/sports)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:48:17.800

`\w+`是一个仅匹配字母数字字符和下划线的正则表达式。我将尝试为您提供的示例提供一个严格的解决方案，以及一个可能对您也适用的更通用的解决方案。

由于您喜欢匹配未包含在`w`组中的其他字符，因此您应该创建一个自定义组，添加您需要的特殊字符。要组成一个组，请将其写在括号 [] 之间。要将字符添加到组中，只需将它们一个接一个地写入，除了`-`因为它可以定义一个范围，你必须把它放在前面。对于第一个示例，您需要匹配括号和加号等字符，这些字符对于正则表达式是特殊的，因此必须进行转义。For + -> use + For ( -> use ( 所以第一个例子的正则表达式开始看起来像这样： `[\w\(\)\+]+` 对于正则表达式的备忘单，您可以查看：[备忘单](http://www.cs.tut.fi/~jkorpela/perl/regexp.html)或[可下载](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/) 在开头添加 - 符号以避免范围以及其他转义和非转义字符后。匹配两个字符串的组如下所示：

`[-\w\/\?:=\.\s!\(\)"\+]+`

由于这很复杂，并且您似乎想要获得几乎任何东西作为标题，我推荐特殊组`.`，因为它包含除换行符之外的任何字符。

正则表达式看起来非常简单： `.+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:11:31.847

```
url(r'^partner/(?P<author>[-\w]+)/(?P<video>\w+)/(?P<title>.*)/$', 'video_player'), 
```

应该送你到那里。只需在视频比赛后捕获所有内容，直到决赛 /

# php - php批量更新

> ID：12831197
> 
> 赞同：0
> 
> 时间：2012-10-11T02:10:40.737
> 
> 标签：php, mysql, phpmyadmin

我有一个包含多个字段的 mysql 表：

```
 SNo id status 
```

现在状态已经改变，当我的 php 脚本中 Sno 的值为 1 时，我需要更新它。我不想单独做，因为这可能很耗时。当我拥有它对应的 Sno 值时，除了删除这些列并再次进行插入之外，有没有办法更新状态值。

新状态的价值不是一个常数。让我们假设有 4 个条目的 sno 为 1，并且状态字段最初都是假的。现在假设我想更新它并有一个字符串 true、true、false、false。我希望状态准确地按照它们在表中出现的顺序更新为 true、true、flase、false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:15:16.723

不完全确定您的意思，但我认为您正在寻找：

```
UPDATE `table` SET `status` = 'new status' WHERE `SNo` = '1' 
```

# c - 匹配不在引号内的模式

> ID：12831198
> 
> 赞同：2
> 
> 时间：2012-10-11T02:10:52.643
> 
> 标签：c, regex, pcre

是否可以创建仅当匹配不在引号内时才匹配的 pcre 正则表达式？我已经看到[正则表达式](https://stackoverflow.com/a/10032610)使用积极的前瞻来断言`'`比赛后有偶数个，这在我的情况下几乎可以工作，除了奇数个引号可能出现在`{`and内`}`。

示例字符串：`a 'asdfasdfasdf' {' ' ' as'df'sdf}foo.bar 'asdf' { a' } asdf asdf foo.bar 'asdf' {a'} asdf'asdffoo.barasdf' 'foo.bar' asdf {'''}`

当 foo.bar 不在引号中时，有什么方法可以匹配它吗？

对于我的实际用例，我已经构建了一个解析器来执行此操作，但我首先尝试使用正则表达式来解决它，并且想知道是否缺少一些技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:44:47.193

如果它只是检查出现在引号之外的模式，那么解决方案很简单，您不需要使用前瞻来玩游戏。（复杂的前瞻总是产生异常缓慢的正则表达式的好方法。）知道匹配之前有偶数个引号与知道它后面有偶数个引号一样有效，前者是检查起来更容易和更快，因为它不需要在每个潜在匹配上推测性地匹配整个字符串。但是，您确实需要非贪婪的重复，否则您会找到最后一个可能的匹配而不是第一个。

这是一个简单的例子：

```
^(?:[^']*'[^']*')*?[^']*?foo\.bar
    |-paired 's|         |----------The pattern.
 |-shortest match-|
                   |----|
                   no quotes 
```

但我认为你实际上也想以`{}`某种方式变得特别。我只是猜测，因为您似乎没有明确说明。如果括号可以嵌套，那么正则表达式就不合适了。（“Regexen 数不过来。”）

根据更新的要求（在评论中），

1.  引号隐藏大括号
2.  大括号隐藏引号
3.  大括号和引号都隐藏了目标；和
4.  大括号不嵌套

该解决方案与我上面提出的解决方案没有太大区别；我们只是添加`{[^}]*}`到初始模式中。这是一种可能性：

```
^(?:[^'{]*(?:'[^']*'|{[^}]*}))*?[^'{]*?foo\.bar 
```

这是一个（不是很好）测试；-o 选项使 grep 显示匹配的部分，因此您可以看到每个匹配的结束位置：

```
$ grep -oP "^(?:[^'{]*(?:'[^']*'|{[^}]*}))*?[^'{]*?foo\.bar" <<\EOF
The target string is foo.bar and we should match the first foo.bar
'foo.bar' does not match but foo.bar does
Also, {foo.bar} doesn{'}t match, 'foo.bar' doesn{'}t match, {'foo.bar} doesn{'}t match, but foo.bar does
Note that {braces don't {nest so the end is here} and foo.bar matches}   
EOF 
```

产生：

```
The target string is foo.bar
'foo.bar' does not match but foo.bar
Also, {foo.bar} doesn{'}t match, 'foo.bar' doesn{'}t match, {'foo.bar} doesn{'}t match, but foo.bar
Note that {braces don't {nest so the end is here} and foo.bar 
```

# java - 使用 APACHE POI 处理 docx 文件

> ID：12831205
> 
> 赞同：2
> 
> 时间：2012-10-11T02:11:47.827
> 
> 标签：java, apache, file, apache-poi, docx

我正在尝试从数据库中检索 docx 并尝试通过检查其内容来处理它。我认为 mycode 检索到了我想要的文件，但似乎我还没有完全理解 APACHE POI。我的堆栈跟踪出现错误，说我错误的 POI 有什么想法吗？

这是我加载文件的方式：

```
public void loadFile(String FileName)
{
    InputStream is = null;
    try
    {
        //Connecting to MYSQL Database
        Class.forName(driver).newInstance();
        con = DriverManager.getConnection(url+dbName,userName,password);

        Statement stmt = (Statement) con.createStatement();
        ResultSet rs = stmt.executeQuery("SELECT FILE FROM doccompfiles WHERE FileName = '"+ FileName +"'");

        while(rs.next())
        {
            is = rs.getBinaryStream("FILE");
        }

        HWPFDocument doc = new HWPFDocument(is);
        WordExtractor we = new WordExtractor(doc);

        String[] paragraphs = we.getParagraphText();
        JOptionPane.showMessageDialog(null, "Number of Paragraphs" + paragraphs.length);
        con.close();
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

堆栈跟踪：

```
org.apache.poi.poifs.filesystem.OfficeXmlFileException: The supplied data appears to be in the Office 2007+ XML. You are calling the part of POI that deals with OLE2 Office Documents. You need to call a different part of POI to process this data (eg XSSF instead of HSSF)
at org.apache.poi.poifs.storage.HeaderBlock.<init>(HeaderBlock.java:131)
at org.apache.poi.poifs.storage.HeaderBlock.<init>(HeaderBlock.java:104)
at org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:138)
at org.apache.poi.hwpf.HWPFDocumentCore.verifyAndBuildPOIFS(HWPFDocumentCore.java:106)
at org.apache.poi.hwpf.HWPFDocument.<init>(HWPFDocument.java:174)
at documentComparisor.Database.loadFile(Database.java:156)
at documentComparisor.Home$5.actionPerformed(Home.java:195)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T04:28:03.470

如您所知，目前 MS Office 文档以两种不同的格式存在：一种是 2007 年之前的 MS Office 版本使用的旧格式（例如“.doc”或“.xls”），另一种是基于 XML 的新版本使用的格式（例如“.docx”或“.xlsx”）。

Apache POI 中有不同的部分处理不同的格式。用于处理旧 MS Office 格式文件的关键类的名称通常以“H”开头，用于处理基于 XML 格式的文件的类的名称以“X”开头。

因此，在您处理新格式的示例中，您应该使用 XWPFDocument 而不是 HWPFDocument：

```
XWPFDocument doc = new XWPFDocument(is); 
```

# xcode - 如何在 xcode 4.5 中为多种语言创建 Localizable.strings？

> ID：12831206
> 
> 赞同：1
> 
> 时间：2012-10-11T02:12:09.943
> 
> 标签：xcode

如何`Localizable.strings`在 xcode 4.5 中为多种语言创建一个？

似乎“添加新语言”按钮已丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:25:01.340

选择 Localizable.strings 文件，然后按`Alt``Cmd``0`打开右侧菜单。本地化（文件检查器选项卡）中有一个`Make localized...`按钮。然后，您可以根据需要添加任何语言。

# ruby-on-rails-3 - Heroku Rails 3 Rails.cache.class 在我调用 Rails.application.config.cache_store = :redis_store, "#{url}" 后报告 ActiveSupport::Cache::FileStore

> ID：12831208
> 
> 赞同：3
> 
> 时间：2012-10-11T02:13:24.620
> 
> 标签：ruby-on-rails-3, caching, redis

在哪里`url=redis://redistogo:XXXYYYZZZ@cod.redistogo.com:9362/`

这在我的初始化代码中被调用。

这是其他相关的配置选项：

1) 在生产中.rb

```
config.action_controller.perform_caching = true in my production.rb 
```

2）在我的控制器中：

```
caches_action :show, :layout => false, :if => Proc.new {|c| c.request.query_string.blank?}  
caches_page :get_session_info 
```

3）在初始化程序中：

```
Rails.application.config.cache_store = :redis_store, "#{url}" 
```

PS：我通过在本地机器上运行生产控制台来检查这一点。我实际上重新调用`cache_store`了`Rails.cache.class`. 我还从`heroku run bash`shell（在实际的 Heroku dyno 上）运行控制台，结果相同。

PPS：我想我想改用 memcached

# youtube - 嵌入 Youtube 播放列表，但从随机视频开始

> ID：12831210
> 
> 赞同：9
> 
> 时间：2012-10-11T02:14:09.590
> 
> 标签：youtube, youtube-api

我已经做了很多搜索，但到目前为止找不到解决方案......

我有一个 Youtube 播放列表。我想把它嵌入到一个网站上。但不是总是从第一个视频开始，我希望它从一个随机视频开始，或者至少是一个特定的视频（我可以使用服务器端代码随机选择）。

我查看了 iframe 嵌入 URL 的选项，但看不到允许我对此进行任何控制的参数。有可能吗？

否则我认为我需要在 JavaScript 中使用 API 做一些事情。有人可以粘贴或指向我可以用来完成此操作的一些示例代码吗，因为我之前没有使用过 Youtube API？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T05:45:48.863

在您的服务器上生成一个随机数，然后在 url 中使用 index 参数。这是一个示例，其中播放列表将通过添加 index=7 从第 7 个项目开始。

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/videoseries?list=PL9C5815B418D1508E&index=7" frameborder="0" allowfullscreen></iframe> 
```

另一种选择是使用 js api，调用 loadPlaylist 并包含 index 参数。 [https://developers.google.com/youtube/js_api_reference#loadPlaylist](https://developers.google.com/youtube/js_api_reference#loadPlaylist)

**编辑：由于 Google 引入了 YouTube 的 3.0 API，该`index`参数现在是从零开始的。因此，如果我们想从第 7 个视频开始，我们将修改上面的示例，使用`&index=6`而不是`&index=7`.

（链接：[https](https://developers.google.com/youtube/iframe_api_reference#Queueing_Functions_for_Playlists) ://developers.google.com/youtube/iframe_api_reference#Queueing_Functions_for_Playlists ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T16:13:58.500

根据 Greg 的回答，我制作了这段代码，并且可以正常工作！

```
`
<?php
$min=1;  $max=8;  //the number of videos on your playlist
?>
<object width="746" height="413"><param name="movie" value="http://www.youtube.com/p/CAAA1242CA3E37B4?version=3&hl=es_ES&fs=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>
<?php
//in index the script randomize the numbre between $min $max
echo "
<embed src=\"http://www.youtube.com/p/CAAA1242CA3E7B4?version=3&hl=es_ES&fs=1&index=".rand($min,$max)."\" type=\"application/x-shockwave-flash\" width=\"746\" height=\"413\" allowscriptaccess=\"always\" allowfullscreen=\"true\">
</embed>
";
?>
</object>
` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-27T15:12:53.493

在我的上下文中，我稍微更改了 Mauricio 的编码：

```
 index=<?php print(rand(1,50)) ?> 
```

（我这里直接放了 min 和 max ）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T02:17:09.047

你应该检查[http://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/) 或[http://popcornjs.org/](http://popcornjs.org/)。

这是使用 PopCornJS 的示例： [http ://www.seuratt.net/rhi-popcorn/demos/videojs-playlist.html](http://www.seuratt.net/rhi-popcorn/demos/videojs-playlist.html)

# windows-8 - 了解 Windows Store App 加载 DLL 失败的原因

> ID：12831213
> 
> 赞同：0
> 
> 时间：2012-10-11T02:14:16.367
> 
> 标签：windows-8, microsoft-metro

我尝试在 Windows 8 Store App 中使用[EmguCV库。](http://www.emgu.com/wiki/index.php/Main_Page)以前，它适用于 Windows 7 桌面应用程序项目。

我确保我的 Windows 8 Store App 项目目录 [ *C:\Projects\App2\App2\bin\Debug* ] 包含所有必要的 DLL 文件。

![在此处输入图像描述](../Images/21e6a120567b27c89644cc83d4c76afa.png)

当我通过*本地机器按钮直接在**Microsoft Visual Studio 2012 Ultimate*中执行时 ，出现以下异常。

 *![在此处输入图像描述](../Images/346702cd6c6f9e9777e90cc4ed5384ca.png)

> 异常：抛出：“无法加载 DLL 'opencv_core240'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”（System.DllNotFoundException）抛出 System.DllNotFoundException：“无法加载 DLL 'opencv_core240'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）“

**我的问题是**：我如何知道失败是否是由于我的 Windows 8 Store App**无法找到 DLL 文件**造成的？或者，找到的 DLL 文件不是Windows 8 Store App**所期望的格式？**（这些 DLL 适用于 Windows 7 桌面软件）

*如果原因是由于 Windows 8 Store App 无法识别格式，请在Windows Store ->*下重新编译整个 DLL 项目（OpenCV 源代码是 C++，而充当包装器的 EmguCV 是 C#）*类库（Windows 应用商店应用程序）*会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:27:56.503

如果这些 dll 适用于 Windows 7 桌面应用程序，那么它们将不适用于 Windows 8 Metro 应用程序，因为它是完全不同的平台和 API。您不能在 Windows 8 WinRT 项目中只加载任何 dll。

如果您有 dll 的源代码，您可以尝试将其重新编译为 Windows 运行时组件，但很有可能原始代码使用了 WinRT 中不可用的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:00:31.583

查看以下两篇文章，了解如何使 OpenCV 或其他 3rd 方库与 Windows 8 应用商店应用程序一起工作：

[在带有 Visual C++ 的 Windows 应用商店应用程序中使用 OpenCV](https://stackoverflow.com/questions/14065370/using-opencv-in-a-windows-8-store-app-with-visual-c-2012)

[在 Windows 8 应用商店应用程序（使用 Visual C++ 2012 构建）中使用 C++ 库（使用 Visual C++ 2010 构建）](https://stackoverflow.com/questions/14088917/using-a-c-library-built-using-visual-c-2010-in-a-windows-8-store-app)*

# php - 无法将空格读取为输入文本中的默认值

> ID：12831216
> 
> 赞同：3
> 
> 时间：2012-10-11T02:14:59.533
> 
> 标签：php, html, string, forms, input

我在输入文本表单中输入默认值时遇到了一些问题。例如，如果默认值为“Hello World”，则输入字段将仅显示“Hello”。它只接受第一个单词。我可以做些什么来接受整个字符串吗？

```
<input type='text' name='prod_name' size='30' value=<?=$prname?> /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T02:16:52.480

您需要在`value`属性周围加上引号

```
<input type='text' name='prod_name' size='30' value='<?=$prname?>' /> 
```

注意，`$prname`“Hello World”的值会产生这样的结果：

```
<input type='text' name='prod_name' size='30' value=Hello World> /> 
```

在这种情况下，HTML 认为您的输入值是“Hello”，而“World”是一些不存在的布尔属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T02:17:39.377

像这样使用`'`或`"`获取价值

```
<input type='text' name='prod_name' size='30' value='<?=$prname?>' /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T02:17:43.090

巴巴刚才说的话，我不知道这是否会影响它，但你忘了把 php 放在引号内。

```
value="<?php // code here ?>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T17:10:51.783

（虽然这是一篇旧帖子并且已经有了答案，但我想添加一个不同的案例以供参考：）

就我而言，我的默认值来自查询。我需要在“文本”类型的输入值中设置描述（带空格的文本），我遇到了同样的问题并像这样修复它：

```
<input type="text" name="Description" value="'. $row["Description"].'"> 
```

# haskell - 由于 (-1) 被视为负数，因此减法等于 (+1) 是什么？

> ID：12831217
> 
> 赞同：26
> 
> 时间：2012-10-11T02:15:00.250
> 
> 标签：haskell, pointfree

> **可能重复：**
> [柯里化减法](https://stackoverflow.com/questions/4454559/currying-subtraction)

我开始了我的第一个 haskell 项目，它不是从教程开始的，当然我偶然发现了最简单的东西。

我有以下代码：

```
moveUp y = modifyMVar_ y $ return . (+1)
moveDn y = modifyMVar_ y $ return . (-1) 
```

我花了一些时间来理解为什么我的代码无法编译：我使用了 (-1)，这被视为负数。将减号括起来并没有帮助，因为它是它的前缀并使 1 成为它的第一个参数。

简而言之，这个免费版本是什么？

```
dec :: Num a => a -> a
dec x = x - 1 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-11T02:21:57.980

我相信您想要[命名方便的`subtract`function](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Prelude.html#v%3asubtract)，它的存在正是您发现的原因：

> ```
> subtract :: Num a => a -> a -> a 
> ```
> 
> 一样`flip (-)`。
> 
> 因为`-`在 Haskell 语法中被特殊对待，`(- e)`不是一个节，而是前缀否定的一种应用。但是，`(subtract exp)`相当于不允许的部分。

如果您想在不使用类似 的函数的情况下编写它`subtract`，您可以使用`flip (-)`，如`Prelude`文档所述。但这……有点丑。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T02:24:27.180

如果上述`subtract`内容过于冗长，您可以尝试类似`(+ (-1))`or `(-1 +)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T02:22:20.547

您可以使用该`subtract`功能（在标准前奏曲中）。

```
moveDn y = modifyMVar_ y $ return . (subtract 1) 
```

您还可以使用翻转来重新排序所采用的参数`-`。

```
moveDn y = modifyMVar_ y $ return . (flip (-) 1) 
```

# java - 仅在驱动程序文件中的扫描仪

> ID：12831219
> 
> 赞同：0
> 
> 时间：2012-10-11T02:15:06.430
> 
> 标签：java, java.util.scanner

在 Java 中，如果我通过一个名为 Driver 的文件与多个类进行交互，我是否只需要在该 Driver 文件或所有文件中导入扫描仪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:33:01.823

正如 Hovercraft 所说，将 java.util.Scanner 导入到您希望将其称为“扫描仪”的所有文件中。

# r - 尝试在 ggplot2 中使用 gglocator：vpPathFromVector(names) 中的错误

> ID：12831222
> 
> 赞同：5
> 
> 时间：2012-10-11T02:15:42.103
> 
> 标签：r, ggplot2

我正在尝试在`ggmap`. 我收到以下错误：

```
Error in vpPathFromVector(names) : 
A viewport path must contain at least one viewport name 
```

我在尝试将 gglocator 与 ggmaps 一起使用时发现了它，但是单独使用 ggplot2 也会发生同样的错误。这是它如何出现的示例：

```
library(ggplot2)
library(ggmap)
df <- data.frame(xvar = 1:10, yvar = 1:10)
qplot(xvar, yvar, data = df) + annotate(geom = 'point', x = 3, y = 6)
gglocator(4)

Error in vpPathFromVector(names) : 
A viewport path must contain at least one viewport name 
```

我在 Windows 7 上使用 RStudio v 0.96.331。我有最新版本的 ggplot2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:57:13.367

我使用 gglocator (Windows XP) 有相同的视口错误消息。

将先前版本的 ggplot2 和 gmap 文件夹转移到 R 库和 gglocator 现在再次正常工作。

抱歉，太急于验证使用了哪些版本，但如果需要可以提交。

我的预感是 gglocator 问题出在我今天更新的 ggplot2 中（2012 年 10 月 27 日）。

# grammar - 语法是无限的还是有限的？

> ID：12831224
> 
> 赞同：0
> 
> 时间：2012-10-11T02:16:11.623
> 
> 标签：grammar, bnf

```
S ::= N 
N ::= A B C X  |  D E F X
A ::= edith  | simone
B ::= de  |  ε 
C ::= wharton  | beauvoir
D ::= percy
E ::= bysshe  |  ε
F ::= shelley 
X ::= and S | ε 
```

如果你继续用和 S 替换 X，你似乎可以永远继续下去，但如果它被替换为 ε，那么它就会停止。这会使语法无限还是有限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:57:00.593

## “正式语言的语法”

A `Grammar`, `Automata`,`Regular Expression`都是任何语言的有限表示，其中 Language 可以是有限的或无限的（由任意数量的字符串组成）。

由四个tapuler对象定义的形式语言语法：**G(V [n] , Σ, P, S)**其中

**V [n]** - 是`finite set`变量。
**Σ** - 是`finite set`语言符号（在称为终端的语法中）。
**P** - 是`finite set`生产规则。
**S** - 起始变量，变量集中的元素 ( S ∈ V [n] )。

**[答案]**
所以，在**G(V [n] , Σ, P, S)** `every element is finite that Why Grammar is called finite represent of a Language`中。

> 在你的问题 X 生产**X ::= 和 S | ε** 是一个例子，展示了如何使用语法来生成无穷大的字符串，即使生产规则是有限的！

同样，任何种类的自动机也是`finite represent of a language`。

我想补充：

具有这四个元组的语法可以表示任何类型的语言，这就是为什么语法被称为`conman represent form of any language`. 它在编写解析器方面也有实际用处。

从理论上讲，形式语言的研究是关于以有限形式表示语言，以便可以理解自然和对语言进行分类。

# hadoop - 在 CDH4.0.1 VM 上使用 MRV1 运行 wordcount 示例

> ID：12831226
> 
> 赞同：10
> 
> 时间：2012-10-11T02:16:25.913
> 
> 标签：hadoop, cloudera

[我从https://downloads.cloudera.com/demo_vm/vmware/cloudera-demo-vm-cdh4.0.0-vmware.tar.gz](https://downloads.cloudera.com/demo_vm/vmware/cloudera-demo-vm-cdh4.0.0-vmware.tar.gz)下载了虚拟机

我发现以下列出的服务在系统启动后正在运行。

*   MRV1 服务

hadoop-0.20-mapreduce-jobtracker
hadoop-0.20- mapreduce-tasktracker

*   MRV2 服务

hadoop-yarn-nodemanager
hadoop-yarn-resourcemanager
hadoop-mapreduce-historyserver

*   HDFS 服务

hadoop-hdfs-namenode
hadoop-hdfs-datanode

字数统计示例运行良好并按预期生成输出

```
/usr/bin/hadoop jar /usr/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar wordcount input output 
```

但是，以上运行使用 MRv2 - YARN 框架

我的目标是使用 MRv1 运行。正如 Cloudera 文档中所建议的，我停止了 MRV2 服务，并编辑了 /etc/hadoop/conf/mapred-site.xml

```
 <property>
    <name>mapreduce.framework.name</name>
    <value>yarn</value>
  </property 
```

到“经典”（也尝试过“本地”）

```
 <property>
    <name>mapreduce.framework.name</name>
    <value>classic</value>
  </property 
```

我希望它使用 MRV1（jobtracker 和 tasktracker）运行。但是，我看到以下错误：

```
12/10/10 21:48:39 INFO mapreduce.Cluster: Failed to use org.apache.hadoop.mapred.LocalClientProtocolProvider due to error: Invalid "mapreduce.jobtracker.address" configuration value for LocalJobRunner : "172.30.5.21:8021"
12/10/10 21:48:39 ERROR security.UserGroupInformation: PriviledgedActionException as:cloudera (auth:SIMPLE) cause:java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.
java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.
        at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:121)
        at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:83)
        ...... 
```

有人可以建议可能出了什么问题。为什么错误指向无效配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T11:40:29.217

我认为您的集群仍然指向 MRv2 配置目录，而不是 MRv1。

`hadoop-conf`在集群中指向具有高优先级的 MRv1 配置目录的每个节点中更新/安装替代方案。

然后重新启动所有服务。

例如：

```
$ sudo update-alternatives --install /etc/hadoop/conf hadoop-conf /etc/hadoop/conf.mrv1 50
$ sudo update-alternatives --set hadoop-conf /etc/hadoop/conf.mrv1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T12:30:54.240

**以下答案不是我的，而是问题本身中发布的 OP。**

* * *

我错过了导致上述失败的一件事。确保在 hadoop-env.sh 中，将“export HADOOP_MAPRED_HOME=/usr/lib/hadoop-mapreduce”更改为“export HADOOP_MAPRED_HOME=/usr/lib/hadoop-0.20-mapreduce”。

这个错误有点误导。另外，我已经在 shell 上导出了变量，但是我相信这个会覆盖它（需要验证）。

# php - PHP Imagick：将图像对象复制到另一个图像对象但分辨率更高

> ID：12831231
> 
> 赞同：1
> 
> 时间：2012-10-11T02:17:19.870
> 
> 标签：php, resize, imagick

为什么这不起作用？

```
var_dump($Obj_old_image->getImageResolution());
//array(2) { ["x"]=> float(72) ["y"]=> float(72) } 

$Obj_new_image->setResolution(200, 200);

var_dump($Obj_new_image->getImageResolution());
//array(2) { ["x"]=> float(200) ["y"]=> float(200) } 

$Obj_new_image->setImage($Obj_old_image);

$Obj_new_image->setImageFormat("png");
header("Content-Type: image/png");
echo $Obj_new_image; 
```

它返回相同的分辨率。

这应该在不损失质量的情况下调整 SVG 图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T06:45:59.340

`$Obj_old_image`根据您发布的代码，我不知道它在做什么或在做什么。然而，以下代码将适用于 PHP 和安装的标准 GD 库：

```
// image to be scaled
$rawImgPath = './test.jpg';

// new image size (guessing you know the new size)
$newImgSize['w'] = 200;
$newImgSize['h'] = 200;

// the steps to create the new scaled image
$rawImg = imagecreatefromjpeg($rawImgPath);
$newImg = imagecreatetruecolor($newImgSize['w'], $newImgSize['h']);

// need to know the current width and height of the source image
list($rawImgSize['w'], $rawImgSize['h']) = getimagesize($rawImgPath);

// resize the iamge
imagecopyresampled($newImg,$rawImg, 0,0,0,0,
    $newImgSize['w'],$newImgSize['h'],$rawImgSize['w'],$rawImgSize['h']);

// no longer need the original
imagedestroy($rawImg);

// display scaled image
header('Content-Type: image/png');
imagepng($newImg);

// no longer need the scaled image
imagedestroy($newImg); 
```

这段代码应该可以工作并给出更好的结果，但不适合我。基本上，`imagescale()`是新代码，并且在 PHP 站点上[不是很好的文档。](http://php.net/manual/en/function.imagescale.php)

```
// image to be scaled
$rawImgPath = './test.jpg';

// new image size (guessing you know the new size)
$newImgSize['w'] = 200;
$newImgSize['h'] = 200;

// the steps to create the new scaled image
$rawImg = imagecreatefromjpeg($rawImgPath);
$newImg = imagescale($rawImg, $newImgSize['w'], $newImgSize['h'],
    IMG_BICUBIC_FIXED);

// no longer need the original
imagedestroy($rawImg);

// display scaled image
header('Content-Type: image/png');
imagepng($newImg);

// no longer need the scaled image
imagedestroy($newImg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T15:05:21.633

只需使用 PHP 的 native[`clone`关键字](http://php.net/manual/en/language.oop5.cloning.php)来复制`Imagick`实例。

```
$smallImg = new Imagick('small.png')
$newImg = clone $smallImg;

$newImg->resizeImage(200, 200, Imagick::FILTER_LANCZOS, 1, true);

$newImg->setImageFormat("png");
header("Content-Type: image/png");
echo $newImg; 
```

(last boolean)的`bestfit`参数需要按比例放大。`resizeImage`没有它，Imagick 只会缩小，保持较小的图像不变。

对[`Imagick::resizeImage`文档](http://php.net/manual/en/imagick.resizeimage.php)的评论比较了各种调整大小过滤器的速度。我在 Lanczos 上取得了不错的成绩。

# python - python与数据库交互和解析字符串？

> ID：12831232
> 
> 赞同：-4
> 
> 时间：2012-10-11T02:17:25.633
> 
> 标签：python, sql

我有以下代码

```
from bs4 import BeautifulSoup
from stripogram import html2text
import commands
import os
import urllib2
import sys
import re
import string
response = urllib2.urlopen(sys.argv[1])
html = response.read()
soup = BeautifulSoup(html)
outter = soup.find("div",{"id":"ps-content", "class":"bucket"})
final = outter.find("div", {"class":"buying"})
text = final.findAll(text=True)
asd = str(final)
print os.system("echo '"  +asd + "'| html2text" ) 
```

它输出

```
Publication Date: February 1996  | ISBN-10: 0471121207   | ISBN-13: 978-
0471121206  | Edition: 2 
```

我需要做以下两件事：

1.  阅读所有初始信息，例如**“发布日期：”**或**“ISBN-10”** 并将其识别为属性

2.  在我们知道它是一个属性之后，我想将它上传到一个 sql 数据库，以便发布日期是它所在的列。所有这些都假设是一排。

编辑：我知道如何将数据库与 PHP 和 Java 一起使用。鉴于我的输出，我只要求上传语法。有没有办法写一个“东西：识别属性：值|属性：上面的值模式？

我主要想把上面的答案读入一个数组。其中第一部分，“：”前面的部分是键，它后面的部分（“：”）是值

请评论您的代码。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:31:40.593

看起来您正在尝试抓取网页并将您收集的数据插入数据库。您需要编写的主要组件是筛选出您不感兴趣的垃圾并将您感兴趣的内容（听起来像您对属性感兴趣）存储在 Python 变量中的部分。

从那里，您需要对某种数据库执行插入操作。Sqlite 可能是最容易使用的，因为它可以作为文件存储在硬盘上。导入 sqlite3 并阅读[http://docs.python.org/library/sqlite3.html](http://docs.python.org/library/sqlite3.html)上的文档以开始使用 sqlite3。还有许多其他驱动程序可用于其他数据库。如果您打算使用 SQL 关系数据库，则需要事先设计 SQL 模式。

一般来说，这整个过程很乏味，而且更像是一项任务而不是一个问题，所以我认为没有人会提供你所寻求的代码解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:47:24.640

此时，Python 中几乎所有的数据库 API 都遵循[PEP 249 - Python Database API](http://www.python.org/dev/peps/pep-0249/)。

> 定义此 API 是为了鼓励用于访问数据库的 Python 模块之间的相似性。通过这样做，我们希望实现一致性，从而产生更容易理解的模块、通常更易于跨数据库移植的代码以及 Python 更广泛的数据库连接范围。

因此，这应该为您提供任何数据库的一般语法。

有各种用于数据库访问的库，例如[用于 PostgreSQL 的 Psycopg2](http://www.initd.org/psycopg/)和[用于 SQLite 的 sqlite3 模块](http://docs.python.org/library/sqlite3.html)。您使用哪一个取决于您要连接到的数据库，但此时这并不重要，因为您没有任何代码，所以只需为您喜欢的任何一个编写它，然后您应该能够轻松移植稍后，因为他们都使用 DB API。

# iphone - iPhone BLE：如何获取通话状态和短信背景？

> ID：12831235
> 
> 赞同：1
> 
> 时间：2012-10-11T02:18:08.300
> 
> 标签：iphone, ios, background

我想在 iPhone 有来电或短信时收到通知，然后我会通过 BLE 向远程设备发送一些信息，以便远程设备可以立即执行一些操作，例如警报或振动。

在这里，我对这个关于 iPhone 的应用程序上下文有两个问题：

1.  BLE App如何在iPhone中运行后台监控来电或短信？将“bluetooth-central”添加到 p-list 后，我​​接下来应该做什么？
2.  我应该如何获取来电或消息的状态？

我应该怎么做才能获得越狱 iPhone 的此状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:38:53.460

您将需要使用经典蓝牙来支持所谓的蓝牙 MAP，这将使您能够从您的 iPhone 接收有关收到的任何短信和电话的通知，并将其推送到支持蓝牙 MAP 的设备。我不认为这是通过 BLE 支持的。

[蓝牙 MAP](http://en.wikipedia.org/wiki/Bluetooth_profile#Message_Access_Profile_.28MAP.29)代表消息访问协议。

# scheme - 在球拍中定义一个给定谓词的过程

> ID：12831237
> 
> 赞同：0
> 
> 时间：2012-10-11T02:18:25.697
> 
> 标签：scheme, racket

给定一个测试单个项目的谓词，例如`positive?`，我正在尝试创建`all-are`它的一个版本来测试列表的所有元素是否满足谓词

前任：
`((all-are positive?) '(1 2 3 4)) => #t`
`((all-are even?) '(2 4 5 6 8)) => #f`

`all-are`应该将谓词作为参数并返回一个可以应用于元素列表的新*函数*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:33:26.780

就现有过程而言，这很容易表达：`andmap`-`#t`如果给定谓词在应用于列表中的所有元素时，对所有元素的计算结果为 true，则返回：

```
(define ((all-are predicate) lst)
  (andmap predicate lst)) 
```

我使用一些语法糖来返回一个咖喱​​过程，因为问题指出必须返回一个*函数。*它按预期工作：

```
((all-are positive?) '(1 2 3 4))
> #t

((all-are even?) '(2 4 5 6 8))
> #f 
```

我猜你必须从头开始实施这个过程，而不是像我的解决方案那样使用现有的过程。一个很好的练习是将上面的简短版本（它展示了需要做什么的一般想法）变成只使用基本形式的更简单的东西——这可能是你的老师对你的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:50:29.100

只是试图只使用'foldr'的基础知识，代码结果是：

```
(define (all-are pred l)
   (foldr (λ (x y)
      (and y (pred x))) #t l)) 
```

尝试使用 foldr、foldl 和其他基础知识并找出必要的参数，这将是一个很好的编程实践....希望对您有所帮助！！！

# java - struts中的框架集

> ID：12831238
> 
> 赞同：0
> 
> 时间：2012-10-11T02:19:20.733
> 
> 标签：java, facebook, struts2, frameset

我是新手`Struts 2`。我正在尝试使用`Struts Framework`. `IDE`是`Netbeans-7.2`。我想在一页中制作 3 个部分。

```
例如：Facebook“好友列表”、“墙帖”、“群组列表”。
```

我正在尝试`< html:frame>`在 struts ( `frameset`in `html`) 中使用标签。

我的问题：1.我可以使用`frame`来实现这个功能吗？如果是的话，你能举个例子吗.. 2.有没有其他选择来实现这个功能？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:10:41.463

您可以在 Struts2 中使用图块。**[更多信息](http://tiles.apache.org/faq.html)**。新版本的struts2 已经包含了tiles jar。您只需要为其定义配置文件。 [您可以在此处查看更多关于 struts2 网站的信息](http://struts.apache.org/2.3.4.1/index.html)

[**这里的例子**](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-tiles-example-1.html)

**注意::**从 HTML5 框架集已被弃用。

# objective-c - 在运行时加载 Objective C 类别有什么意义？

> ID：12831240
> 
> 赞同：0
> 
> 时间：2012-10-11T02:19:30.110
> 
> 标签：objective-c, runtime, objective-c-category, memory-efficient

是吗：

为了提高内存效率，不必一直将所有程序的方法存储在 RAM 中？如果是这样，这真的是一个普遍的问题吗？我觉得必须加载新方法的开销会抵消正常大小程序的内存节省，尽管我可以看到它对非常大的程序有什么帮助。

为了增加灵活性？如果是这样，你能举一个例子吗？我发现很难想出一个。

我一直在尝试用谷歌搜索这个问题的答案，但似乎只找到有关*如何*使用类别而不是为什么使用的资源。如果你们中的任何一个人能指出我正确的方向，那就*太棒*了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T02:38:03.950

类别的主要原因是允许您向没有源代码或不想修改源代码的类添加方法。

### 示例 1。

`UIImage`我想要一种通过加载动画 GIF来创建动画的方法。从逻辑上讲，这应该是一个`UIImage`类方法，但我没有 UIKit 框架的源代码（其中包含`UIImage`）。所以我写了一个类别，`UIImage`它添加了一个名为`animatedImageWithAnimatedGIFData:`. 您可以在[我的`uiimage-from-animated-gif`存储库](https://github.com/mayoff/uiimage-from-animated-gif/blob/master/uiimage-from-animated-gif/UIImage%2BanimatedGIF.h)中找到它。

我必须将此方法添加到`UIImage`吗？不，我可以让它成为一个常规的 C 函数，或者我可以创建一个实用程序类（也许命名为`AnimatedGIFLoader`）来保存该方法。但从设计的角度来看，该方法在逻辑上属于`UIImage`.

### 示例 2。

Apple 希望让将字符串绘制到图形上下文中变得容易。在带有 GUI 的程序中，`NSString`有一个 draw 方法是合理的。Apple 拥有 Foundation 框架的源代码（其中包含`NSString`），因此他们可以添加它。但是 Foundation 框架被设计用于各种程序，包括没有任何用户界面的程序。因此 Foundation 中的类对 UIKit 或 AppKit 或 Core Graphics 或任何其他可以绘制图形的更高级别库一无所知。

相反，UIKit 有一个将`drawAtPoint:withFont:`方法添加到`NSString`. AppKit 有一个将`drawAtPoint:withAttributes:`方法添加到`NSString`.

AppKit 和 UIKit 有许多其他类别，它们向 Foundation 类添加方法。例如，UIKit 在`NSObject`、`NSIndexPath`、`NSCoder`等上有类别。

使用类别的另一个原因是将类的实现拆分为多个`.m`文件。如果你有一个大类，你可以将它的一些选择器移动到一个类别中，并在一个单独的源文件中实现类别方法。链接器在创建可执行文件时会自动将类别合并到类中，因此没有运行时损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T17:58:26.560

动态加载类别的一个原因是有条件地这样做。我用它来兼容不同版本的操作系统。

例如，较新版本的系统框架提供了一些我想使用的不错的功能。但是，我的目标是部署到早期版本的操作系统。我可以为旧版本实现（部分）替换新功能，但我想在新版本上使用系统代码。因此，我实现了一个类别，它提供了我对新方法的实现，但我只在旧系统上加载它。我必须避免在较新版本的操作系统上加载它，因为如果我这样做了，该类别将取代系统提供的方法。

# css - 最后一层css下拉菜单只显示一项

> ID：12831244
> 
> 赞同：1
> 
> 时间：2012-10-11T02:20:22.433
> 
> 标签：css, drop-down-menu

我有一个 CSS 下拉菜单，除了一件事：最后一个菜单（第 3 层）只显示列表中的最后一项。

该页面目前在这里： http: [//www.hodentalcompany.com/pages/syringe2.html](http://www.hodentalcompany.com/pages/syringe2.html) 菜单位于文本右栏的底部，“从经销商处订购”

如您所见，最后一个菜单中只显示一个项目。这是CSS：

```
#DealerNav { margin: 0; padding: 0; }
#DealerNav li { list-style-type: none; position: relative; }
#DealerNav li ul { display: none; }
#DealerNav a.first { width:100%; font-size: 100%;font-weight: bold; color: #54ABDF; background-color: #FFF; margin-left:-.5em; }
#DealerNav a { display:block; font-size: 90%; width: 12em; padding: .5em; margin: 2px 0; background-color: #54ABDF; color: #FFF;  }
#DealerNav a:hover { color: #CEF; }
#DealerNav a:hover.first { color: #38B; }
#DealerNav li li a { margin-left:-3.25em; }
#DealerNav li:hover > ul { display: block; }
#DealerNav ul ul a { margin-left:6.45em; margin-top: -2.25em; } 
```

而且，这是简化的代码：

```
<ul id="DealerNav">
  <li><a href="#" class="first">Order from your dealer</a>
    <ul>
    <li><a href="#">BFC Syringe (empty)</a>
            <ul>
            <li><a href="http://www.atlantadental.com" target="_blank">
                Atlanta Dental</a>
            </li>
            <li>
                <a href="http://www.benco.com" target="_blank">
                Benco Dental
                </a>
            </li> 
             <li>  
                <a href="http://www.burkhartdental.com" target="_blank">
                Burkhart Dental</a>
             </li>
             <li>
                <a href="http://www.smartpractice.com/cgi-bin/WebObjects/SmartPracticeStore.woa/wa/gotoStyle?styleNumber=S699230&g=AF_HODENTAL" target="_blank">
                Smart Practice
                </a>
             </li>
       </ul>
    </li>
    <li><a href="#">BFC Complete<br />(prefilled with Vaccu•sil)</a>
          <ul>
          <li>
                <a href="http://practicon.com/Harmony-Intro-Pack/p/70-90122/" target="_blank">
                Practicon Dental
                </a>
             </li>
          </ul>
             </li>
    <li><a href="#">Vaccu•sil Heavy Body</a>
         <ul>
            <li>
                <a href="http://www.atlantadental.com" target="_blank">
                Atlanta Dental</a>
            </li>
            <li>
                <a href="http://www.benco.com" target="_blank">
                Benco Dental
                </a>
            </li> 

             <li>
                <a href="http://www.smartpractice.com/cgi-bin/WebObjects/SmartPracticeStore.woa/wa/gotoStyle?styleNumber=S699230&g=AF_HODENTAL" target="_blank">
                Smart Practice
                </a>
             </li>
       </ul> 
    </li> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:33:44.143

因为您使用了否定词`margin-top`，所以所有子菜单项相互重叠。这会导致只有最后一个子菜单项可见。`position: absolute`您可以使用将子菜单放置在每个菜单项的右侧，而不是使用负边距。看看这个[jsfiddle](http://jsfiddle.net/qu3cs/1/)以了解这种方法的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:43:30.997

尝试更改此 CSS：

```
#DealerNav li:hover > ul {
    display: block;
    position: absolute;
    top: 0px;
}
#DealerNav ul ul a {
    margin-left: 6.45em;
    display: block;
} 
```

# r - 使用 RGoogleDocs 时，有没有办法将带有字符串的列读取为字符串

> ID：12831246
> 
> 赞同：1
> 
> 时间：2012-10-11T02:20:38.783
> 
> 标签：r, google-docs, data-munging

我经常使用 RGoogleDocs。我用它来读取私有数据或只与少数人共享的数据。我知道`read.table`并`read.csv`允许使用`stringsAsFactors=FALSE`.

我想在 RGoogleDocs 中做类似的事情。这是我的典型代码

```
sheets.con <- getGoogleDocsConnection(getGoogleAuth("fjb@gmail.com", ps, service ="wise"))
spreadsheet <- getWorksheets("private spreadsheet",sheets.con)
first <- sheetAsMatrix(spreadsheet$"Sheet 1",header=TRUE, as.data.frame=TRUE, trim=TRUE) #Get one sheet 
```

这几乎总是将字符值读取为因素。我最近一直在使用 data.table 并且一些因素似乎使我的数据在 data.table 中的变化有点麻烦。有没有一种简单的方法可以将非数字列作为字符向量而不是因子来读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:48:59.300

RGoogleDocs 的作者 Duncan Temple Lang 将软件包更新为 0.7-0。他添加`stringsAsFactors`了`getWorksheets()`and`sheetAsMatrix()`函数。

以下是如何将它放入您的 R 中。

```
 install.packages("devtools")
   library(devtools)
   install_github("RGoogleDocs", "duncantl") 
```

现在我的线是

```
 first <- sheetAsMatrix(spreadsheet$"Sheet 1",header=TRUE, as.data.frame=TRUE, trim=TRUE, stringsAsFactors=FALSE) #Get one sheet 
```

# objective-c - 如何在 Mac OS X Lion 上显示双屏

> ID：12831249
> 
> 赞同：2
> 
> 时间：2012-10-11T02:20:50.873
> 
> 标签：objective-c, macos, cocoa

我希望我的应用程序同时显示在笔记本电脑屏幕和带有两个分离的 NSWindow 的外部屏幕上，我找不到任何关于如何实现它的文档。有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:53:52.230

[OS X OpenGL Programming Guide](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_fullscreen/opengl_cgl.html#//apple_ref/doc/uid/TP40001987-CH210-SW4)展示了制作全屏窗口的旧方法：

> 1.  在要接管的显示器上创建一个屏幕大小的窗口：
>     
>     
>     
>     ```
>     NSRect mainDisplayRect = [[NSScreen mainScreen] frame];
>     NSWindow *fullScreenWindow = [[NSWindow alloc] initWithContentRect: mainDisplayRect styleMask:NSBorderlessWindowMask
>         backing:NSBackingStoreBuffered defer:YES]; 
>     ```
>     
>     
> 2.  将窗口级别设置为高于菜单栏。：
>     
>     
>     
>     ```
>     [fullScreenWindow setLevel:NSMainMenuWindowLevel+1]; 
>     ```
>     
>     
> 3.  执行您想要的任何其他窗口配置：
>     
>     
>     
>     ```
>     [fullScreenWindow setOpaque:YES];
>     [fullScreenWindow setHidesOnDeactivate:YES]; 
>     ```
>     
>     
> 4.  创建具有双缓冲 OpenGL 上下文的视图并将其附加到窗口：
>     
>     
>     
>     ```
>     NSOpenGLPixelFormatAttribute attrs[] =
>     {
>         NSOpenGLPFADoubleBuffer,
>         0
>     };
>     NSOpenGLPixelFormat* pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes:attrs];
>     
>     NSRect viewRect = NSMakeRect(0.0, 0.0, mainDisplayRect.size.width, mainDisplayRect.size.height);
>     MyOpenGLView *fullScreenView = [[MyOpenGLView alloc] initWithFrame:viewRect pixelFormat: pixelFormat];
>     [fullScreenWindow setContentView: fullScreenView]; 
>     ```
>     
>     
> 5.  显示窗口：
>     
>     
>     
>     ```
>     [fullScreenWindow makeKeyAndOrderFront:self]; 
>     ```

您可以使用此方法在要绘制到的每个屏幕上创建窗口。如果您使用它仅在一个屏幕上创建一个窗口，另一个屏幕将继续正常运行，而不是被涂黑或被愚蠢的亚麻纹理覆盖。根据您的使用情况，您可能不希望`setHidesOnDeactivate`.

还有一些较低级别的 API 可以完全控制屏幕并阻止操作系统或任何其他应用程序绘制到屏幕上，但它们的使用很少是合理的。

编辑：如果你想拥有一个跨越多个屏幕的渲染的 GL 上下文，你需要创建一个`NSRect`跨越所有屏幕的单一窗口。如果屏幕分辨率不匹配，这可能会导致您的部分窗口不可见，并且低端图形芯片可能会出现一些问题。

# ruby-on-rails - ROR/Hpricot：解析站点并使用正则表达式搜索/比较字符串

> ID：12831250
> 
> 赞同：2
> 
> 时间：2012-10-11T02:21:00.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hpricot

我刚开始使用 Ruby On Rails，并想创建一个简单的网站爬虫，它：

1.  浏览所有 Sherdog 战士的个人资料。
2.  获取裁判的姓名。
3.  将名称与旧名称进行比较（在站点解析期间和文件中）。
4.  打印所有唯一名称并将其保存到文件中。

示例 URL 为：[http ://www.sherdog.com/fighter/Fedor-Emelianenko-1500](http://www.sherdog.com/fighter/Fedor-Emelianenko-1500)

我正在搜索标签条目`<span class="sub_line">Dan Miragliotta</span>`，不幸的是，除了我需要的正确裁判名称之外，相同类型的类用于：

1.  日期。
2.  当裁判员姓名未知时，“N/A”。

我需要用“N/A”字符串以及任何包含数字的字符串丢弃所有结果。我设法做了第一部分，但不知道如何做第二部分。我尝试搜索、思考和试验，但是，在试验和重写之后，设法破坏了整个程序并且不知道如何（正确）修复它：

```
require 'rubygems'
require 'hpricot'
require 'simplecrawler'

# Set up a new crawler
sc = SimpleCrawler::Crawler.new("http://www.sherdog.com/fighter/Fedor-Emelianenko-1500")
sc.maxcount = 1
sc.include_patterns = [".*/fighter/.*$", ".*/events/.*$", ".*/organizations/.*$", ".*/stats/fightfinder\?association/.*$"]

# The crawler yields a Document object for each visited page.
sc.crawl { |document|
# Parse page title with Hpricot and print it
hdoc = Hpricot(document.data)

(hdoc/"td/span[@class='sub_line']").each do |span|
  if span.inner_html == 'N/A' || Regexp.new(".*/\d\.*$").match(span.inner_html)
    # puts "Test"
  else
    puts span.inner_html
    #File.open("File_name.txt", 'a') {|f| f.puts(hdoc.span.inner_html) } 
  end
end
} 
```

我还将感谢有关程序其余部分的想法的帮助：如果程序运行多次，如何正确读取文件中的当前名称，以及如何比较唯一名称？

* * *

编辑：

经过一些建议的改进后，我得到了：

```
require 'rubygems'
require 'simplecrawler'
require 'nokogiri'
#require 'open-uri'

sc = SimpleCrawler::Crawler.new("http://www.sherdog.com/fighter/Fedor-Emelianenko-1500")
sc.maxcount = 1

sc.crawl { |document|
doc = Nokogiri::HTML(document.data)
names = doc.css('td:nth-child(4) .sub-line').map(&:content).uniq.reject { |c| c == 'N/A' }
puts names
} 
```

不幸的是，代码仍然不起作用 - 它返回一个空白。

如果不是`doc = Nokogiri::HTML(document.data)`，我写`doc = Nokogiri::HTML(open(document.data))`，那么它给了我整个页面，但是，解析仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:40:42.297

`hpricot`不再维护。用[nokogiri](http://nokogiri.org/)代替怎么样？

```
names = document.css('td:nth-child(4) .sub-line').map(&:content).uniq.reject { |c| c == 'N/A' }
=> ["Yuji Shimada", "Herb Dean", "Dan Miragliotta", "John McCarthy"] 
```

不同部分的细分：

```
document.css('td:nth-child(4) .sub-line') 
```

这将返回一个带有类名的 html 元素数组，这些元素`sub-line`位于第四个表列中。

```
.map(&:content) 
```

对于前一个数组中的每个元素，返回`element.content`（内部 html）。这相当于`map({ |element| element.content })`。

```
.uniq 
```

从数组中删除重复值。

```
.reject { |c| c == 'N/A' } 
```

删除值为“N/A”的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:05:18.007

您将使用数组数学 (-) 来比较它们：

从当前页面获取裁判

```
current_referees = doc.search('td[4] .sub_line').map(&:inner_text).uniq - ['N/A'] 
```

从文件中读取旧裁判

```
old_referees = File.read('old_referees.txt').split("\n") 
```

使用 Array#- 比较它们

```
new_referees = current_referees - old_referees 
```

写新文件

```
File.open('new_referees.txt','w'){|f| f << new_referees * "\n"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:08:40.113

这将返回所有名称，忽略日期和“N/A”：

```
puts doc.css('td span.sub_line').map(&:content).reject{ |s| s['/'] }.uniq 
```

结果是：

```
Yuji Shimada
Herb Dean
Dan Miragliotta
John McCarthy 
```

将这些添加到文件中并删除重复项留给您作为练习，但我会使用 , 的一些神奇组合`File.readlines`，`sort`然后再编写一些结果`uniq`。`File.open`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:43:23.477

这是最终答案

```
require 'rubygems'
require 'simplecrawler'
require 'nokogiri'
require 'open-uri'

# Mute log messages
module SimpleCrawler
   class Crawler
      def log(message)
      end
   end
end

n = 0  #  Counters how many pages/profiles processed
sc = SimpleCrawler::Crawler.new("http://www.sherdog.com/fighter/Fedor-Emelianenko-1500")
sc.maxcount = 150000
sc.include_patterns = [".*/fighter/.*$", ".*/events/.*$", ".*/organizations/.*$", ".*/stats/fightfinder\?association/.*$"]

old_referees = File.read('referees.txt').split("\n")

sc.crawl { |document|
doc = Nokogiri::HTML(document.data)

current_referees = doc.search('td[4] .sub_line').map(&:text).uniq - ['N/A']
new_referees = current_referees - old_referees

n +=1
# If new referees found, print statistics
if !new_referees.empty? then
    puts n.to_s + ". " + new_referees.length.to_s + " new : " + new_referees.to_s + "\n"
end

new_referees = new_referees + old_referees
old_referees = new_referees.uniq
old_referees.reject!(&:empty?)

# Performance optimization. Saves only every 10th profile.
if n%10 == 0 then 
    File.open('referees.txt','w'){|f| f << old_referees * "\n" }
end
}
File.open('referees.txt','w'){|f| f << old_referees * "\n" } 
```

# php - 在不加载浏览器的情况下渲染视图 - cakephp

> ID：12831251
> 
> 赞同：0
> 
> 时间：2012-10-11T02:21:26.123
> 
> 标签：php, cakephp, pdf-generation

我想知道是否可以在不加载浏览器的情况下呈现动作视图？

我正在使用一个使用 mPDF 生成 PDF 文件的 cakephp 组件。如果您在浏览器中加载操作和视图，该组件运行良好，但是当我想生成 pdf 并将其保存到驱动器时​​，它似乎没有启动，我假设这是因为视图未加载属性。

我使用的组件是：[https ://github.com/segy/Mpdf](https://github.com/segy/Mpdf)

所以基本上我有一个名为 mail_merge 的函数，它使用提到的组件生成 pdf，我需要从同一控制器中的另一个函数调用 mail_merge 函数来生成 pdf，但不加载到浏览器中。

谢谢

更新：

我想出了如何将视图设置为变量，然后将其写入函数中的 pdf。

添加了这个：

```
// RENDER THE VIEW AND SET AS A VARIABLE TO WRITE THE HTML
// --------------------------------------------------------------------------->
$response = $this->render('mail_merge');
$thebody = $response->body();
$this->Mpdf->WriteHTML($thebody); 
```

不幸的是，我的 PDF 仍然不会生成，所以我想问题是别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:20:07.857

试试这个方法：

```
$response = $this->render('mail_merge');
$thebody = $response->body();
$this->Mpdf->WriteHTML($thebody);
$this->Mpdf->Output('filename.pdf'); 
```

# console - exe没有控制台窗口，没有Visual Studio

> ID：12831254
> 
> 赞同：1
> 
> 时间：2012-10-11T02:21:37.013
> 
> 标签：console, hide, exe

首先，我没有使用 Visual Studio，我使用的是记事本和 csc。我想要做的是像Visual Studio的Windows应用程序一样创建exe，也就是说，当你双击exe时根本不会打开任何控制台窗口。我发现了这个：

```
[DllImport("kernel32"]
public static extern IntPtr GetConsoleWindow();

IntPtr window = GetConsoleWindow();
if(window != IntPtr.Zero) ShowWindow(window, 0); 
```

和类似的片段，它们可以工作，但控制台仍然会出现一瞬间。我希望它根本不出现。

此外，使用 Process 类也无济于事，因为 exe 是独立的，需要手动双击，它不是从已经运行的程序中启动的。

我也知道使用 vbs 脚本来启动打开 exe 的 bat 以及其他解决方法，但它们不适合我的需要。

如何编译 exe 以仅在没有任何控制台窗口的情况下打开？这一定是可能的，因为 Visual Studio 的 Windows 应用程序可以做到这一点。为了澄清我什至不想要一个表单，我只想让程序在后台运行，我只是为了比较而指的是 Windows 应用程序，因为它们没有显示控制台。

请不要给我任何愚蠢的答案，例如“使用视觉工作室”或用问题而不是答案来回答。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:27:29.400

你只能走一条路。

1.  将您的（自己的）应用程序创建为 GUI 子系统，而不是 CONSOLE 子系统。
2.  当您运行编译器时 - 使用带有 SW_HIDE (CmdShow) 的 CreateProcess 或 ShellExecute (C++)。不记得了，C#函数中是否有相应的参数，认为- 必须。如果没有 - 使用 WinAPI 启动编译器。

此方法将完全遮盖控制台窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:11:44.190

您可能想要使用非托管库 kernel32.dll 和 FreeConsole 函数。这是一个例子：

```
[DllImport("kernel32.dll")]
static extern bool FreeConsole();

static void Main(string[] args)
{
    FreeConsole();
    // Do other stuff
} 
```

让我知道这是否是您要找的！

# php - Codeigniter 在每个控制器中执行代码

> ID：12831255
> 
> 赞同：0
> 
> 时间：2012-10-11T02:21:40.387
> 
> 标签：php, codeigniter, controller

我对 Codeigniter 比较陌生，所以我可能会以错误的方式处理这个问题。在我的模板的标题中，我有一个显示帐户信息或登录消息的位置。

为了使其正常工作，显然每个控制器都需要具有相同的代码。为了避免这种情况，用户指南说我应该能够扩展 CI_Controller 并自动包含该代码。但是，这对我不起作用。这就是我所拥有的。

应用程序/核心/MY_Controller.php：

```
<?php
class MY_Controller extends CI_Controller {
function __construct()
{
    parent::__construct();
    $this->load->database();
    $this->load->model('user_model');

    if ( $this->user_model->validateToken ( $this->input->cookie('session_token', TRUE) ) ) 
    {
        $data['login_info'] = 'Logged in as '. $this->user_model->getUsernameAsLink($this->input->cookie('session_token', TRUE)).'<BR />
        <a href="/dashboard">Control Panel</a>';
    }
    else
    {
        $data['login_info'] = 'You are not logged in<BR />
        <a href="/account/login">Log In</a>';
    }      
}
}
?> 
```

它引用的模型：

```
<?php
class User_model extends CI_Model {

public function __construct()
{

}

public function validateToken($token)
{
    // Get token from database to check against cookie
    $query = $this->db->query('SELECT `login_token` FROM `Users` WHERE `login_token` = "'.$token.'"');

    // Match Found?
    $rowCount = $query->num_rows();

    if ( $rowCount == 1 ) {
        return true;
    } else {
        return false;
    }
}

public function getUsernameAsLink ( $token )
{
    // Get token from database to check against cookie
    $query = $this->db->query('SELECT `username` FROM `Users` WHERE `login_token` = "'.$token.'"');

    foreach( $query->result() as $row ) {
        $username = $row->username;
    }

    $returnString = '<a href="/profile/'. $username .'">'.ucfirst ( $username ).'</a>';

    return $returnString;    
}
}
?> 
```

我收到通知错误，指出 $data['login_info'] 值不存在。有什么我遗漏的东西来阻止它处理对 MY_Controller 的扩展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:48:01.540

为了`$data`在您的其他控制器中可用，您需要使其可用。尝试将其设置为`$this->data`并在其他控制器中使用相同的东西。

# jquery - 无法让 jquery 文件上传器出现在页面上

> ID：12831257
> 
> 赞同：0
> 
> 时间：2012-10-11T02:21:53.667
> 
> 标签：jquery, file-upload, blueimp

好的，我要在这里拔头发了。我一直在尝试两种不同的文件上传器库，Blueimp 的 jQuery 文件上传器和 Valums 文件上传器。我无法让上传按钮出现在我的页面上。我试图将它放在 jQuery 手风琴 div 内的表单中。我的代码一定有一些问题，阻止它出现在我的目标 div 中，但就控制台中的错误而言，我什么也得不到。只是什么都没有出现。有任何想法吗？这是我的代码的 Blueimp 版本：

HTML：

```
<div id="photo" class="additionsDiv"><br />
                    URL: 
                        <input type="text" name="photourl" size="40"></input>
                        or 
                        <div id="photoUpload">
                            <noscript>
                            <input name="photoUpload" type="file" size="0" /></input>
                            </noscript>
                        </div>
                </div> 
```

Javascript：

```
function addUploaders() {
$('#photoUpload').fileupload(); 
```

};

链接的文件包括：

```
<link type="text/css" href="libraries/blueimp/css/jquery.fileupload-ui.css" rel="stylesheet" />
    <script type="text/javascript" src="libraries/blueimp/js/jquery.fileupload.js"></script>
    <script type="text/javascript" src="libraries/blueimp/js/jquery.fileupload-fp.js"></script>
    <script type="text/javascript" src="libraries/blueimp/js/jquery.fileupload-ui.js"></script>
    <script type="text/javascript" src="libraries/blueimp/js/main.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:31:42.277

如果您正在自定义界面，您应该查看此[链接](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)，了解如何使用自定义上传进度条设置简约界面。. . .

该插件使用自定义类添加自定义跨度以显示所选文件并准备上传。. . .

例如。. 检查这个 blueimp 演示的来源

```
 <!-- The table listing the files available for upload/download -->
    <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table> 
```

我建议您查看非常详细的[文档。](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup). .

# php - 使用 strpos() 匹配数组的一部分，PHP

> ID：12831261
> 
> 赞同：0
> 
> 时间：2012-10-11T02:22:19.273
> 
> 标签：php, strpos

我需要一些有关 strpos() 的帮助。

需要建立一种方法来匹配任何包含`/apple-touch`但还需要保持细节匹配的 URL，例如`"/favicon.gif"`等

目前，匹配项作为数组的一部分单独列出：

```
<?php 

$errorurl = $_SERVER['REQUEST_URI'];
$blacklist = array("/favicon.gif", "/favicon.png", "/apple-touch-icon-precomposed.png", "/apple-touch-icon.png", "/apple-touch-icon-72x72-precomposed.png", "/apple-touch-icon-72x72.png", "/apple-touch-icon-114x114-precomposed.png", "/apple-touch-icon-114x114.png", "/apple-touch-icon-57x57-precomposed.png", "/apple-touch-icon-57x57.png", "/crossdomain.xml");

 if (in_array($errorurl, $blacklist)) { // do nothing }
    else { // send an email about error }

?> 
```

有任何想法吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:30:16.767

除了正则表达式，您还可以删除所有出现的黑名单项目，[`str_replace`](http://www.php.net/manual/en/function.str-replace.php)并将新字符串与旧字符串进行比较：

```
if ( str_replace($blacklist, '', $errorurl) !== $errorurl )
{
  // do nothing
}
else
{
  // send an email about error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:33:40.773

If you want to use regex for this, and you want a single regex string that will capture all the values in your existing blacklist plus match any `apple-touch` string, then something like this would do it.

```
if(preg_match('/^\/(favicon|crossdomain|apple-touch.*)\.(gif|png|xml)$/',$_SERVER['REQUEST_URI']) {
    //matched the blacklist!
} 
```

To be honest, though, that's far more complex than you need.

I'd say you'd be better off keeping the specific values like `favicon.gif` etc in the blacklist array you already have; it'd make it a lot easier when you come to adding more items to the list.

I'd only consider using regex for the `apple-touch` values, since you want to block any variant of them. But even with that, it would likely be simpler if you used `strpos()`.

# hadoop - Hadoop原始比较器

> ID：12831264
> 
> 赞同：0
> 
> 时间：2012-10-11T02:22:44.440
> 
> 标签：hadoop, mapreduce

我正在尝试在原始比较器中实现以下内容，但不确定如何编写？

这里的 tumestamp 字段属于 tyoe LongWritable。

```
if (this.getNaturalKey().compareTo(o.getNaturalKey()) != 0) {
                return this.getNaturalKey().compareTo(o.getNaturalKey());
            } else if (this.timeStamp != o.timeStamp) {
                return timeStamp.compareTo(o.timeStamp);
            } else {
                return 0;
            } 
```

我在这里找到了一个提示，但不确定如何处理 LongWritabel 类型？ [http://my.safaribooksonline.com/book/databases/hadoop/9780596521974/serialization/id3548156](http://my.safaribooksonline.com/book/databases/hadoop/9780596521974/serialization/id3548156)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-11T07:36:17.667

假设我有一个表示一对（字符串 stockSymbol，长时间戳）的 CompositeKey。我们可以对 stockSymbol 字段进行一次分组传递，以将一种类型的所有数据放在一起，然后我们在 shuffle 阶段的“二次排序”使用时间戳长成员对时间序列点进行排序，以便它们到达减速器分区和排序。

```
public class CompositeKey implements WritableComparable<CompositeKey> {
    // natural key is (stockSymbol)
    // composite key is a pair (stockSymbol, timestamp)
    private String stockSymbol;
    private long timestamp;
......//Getter setter omiited for clarity here
@Override
    public void readFields(DataInput in) throws IOException {
        this.stockSymbol = in.readUTF();
        this.timestamp = in.readLong();
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeUTF(this.stockSymbol);
        out.writeLong(this.timestamp);
    }

    @Override
    public int compareTo(CompositeKey other) {
        if (this.stockSymbol.compareTo(other.stockSymbol) != 0) {
            return this.stockSymbol.compareTo(other.stockSymbol);
        } 
        else if (this.timestamp != other.timestamp) {
            return timestamp < other.timestamp ? -1 : 1;
        } 
        else {
            return 0;
        }

    } 
```

现在 CompositeKey 比较器将是：

```
public class CompositeKeyComparator extends WritableComparator {

    protected CompositeKeyComparator() {
        super(CompositeKey.class, true);
    }

    @Override
    public int compare(WritableComparable wc1, WritableComparable wc2) {
        CompositeKey ck1 = (CompositeKey) wc1;
        CompositeKey ck2 = (CompositeKey) wc2;

        int comparison = ck1.getStockSymbol().compareTo(ck2.getStockSymbol());
        if (comparison == 0) {
            // stock symbols are equal here
            if (ck1.getTimestamp() == ck2.getTimestamp()) {
                return 0;
            }
            else if (ck1.getTimestamp() < ck2.getTimestamp()) {
                return -1;
            }
            else {
                return 1;
            }
        }
        else {
            return comparison;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:08:38.450

The best way to correctly implement RawComparator is to extend [WritableComparator](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/io/WritableComparator.java) and override `compare()` method. The WritableComparator is very good written, so you can easily understand it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:22:26.870

它已经从我在`LongWritable`课堂上看到的实现了：

```
/** A Comparator optimized for LongWritable. */ 
  public static class Comparator extends WritableComparator {
    public Comparator() {
      super(LongWritable.class);
    }

    public int compare(byte[] b1, int s1, int l1,
                       byte[] b2, int s2, int l2) {
      long thisValue = readLong(b1, s1);
      long thatValue = readLong(b2, s2);
      return (thisValue<thatValue ? -1 : (thisValue==thatValue ? 0 : 1));
    }
  } 
```

该字节比较是`RawComparator`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:31:49.760

您是否在询问比较 hadoop 提供的 LongWritable 类型的方法？如果是，那么答案就是使用`compare()`方法。[欲了解更多详情，请在此处](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-737/org/apache/hadoop/io/LongWritable.java)向下滚动。

# php - 如何在这个值数组中回显？

> ID：12831270
> 
> 赞同：1
> 
> 时间：2012-10-11T02:23:45.383
> 
> 标签：php, arrays, stdclass

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

```
$response = $amazonEcs->category('DVD')->responseGroup('Large')->search("Matrix Revolutions");
var_dump($response); 
```

我正在使用 var_dump($response)，现在我想知道如何将 Item 的值从 0 获取到 9。

![在此处输入图像描述](../Images/17c0b71ebb912ed067bd1230e40a90d8.png)

![在此处输入图像描述](../Images/9e2baa89705c269fda66320b3ee64668.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:25:58.963

`Item`嵌套在几个对象中。假设您的外部对象是`$response`，您正在寻找：

```
$response->Items->Item[0] 
```

`items`是一个对象`stdClass`，并且`item`是该对象的一个​​属性。 `item`本身是一个数组，具有`0-9`您要查找的键。

这些数组元素中的每一个都是一个对象`stdClass`本身，因此请使用运算符访问其属性（我们在您的输出中看不到）`->`。

```
$response->Items->Item[0]->someProperty
$response->Items->Item[9]->someOtherProperty 
```

*编辑：更改`item`为`Item`，因为它在示例输出中大写。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:30:28.437

使用“->”进入对象，使用 [] 进入数组。

所以，你正在寻找

```
 $response->items->item 
```

使用 foreach 循环：

```
 foreach ($response->items->item as $item)
  {

            // Process $item, which will be $item[0], $item[1].. in each iteration.
   } 
```

# c++ - C++中的抽象类和纯虚方法

> ID：12831271
> 
> 赞同：0
> 
> 时间：2012-10-11T02:24:05.070
> 
> 标签：c++, abstract-class

我有 4 个 C++ 文件、2 个头文件和 2 个 .cc 文件。这只是一个概念证明，但我似乎无法正确理解。

我的第一个标题如下所示：

```
#ifndef INT_LIST_H
#define INT_LIST_H
class IntList
{
  public:

     //Adds item to the end of the list
     virtual void pushBack(int item) = 0;
};
#endif 
```

我的第二个标题使用第一个标题，如下所示：

```
#ifndef ArrayIntList_H
#define ArrayIntList_H
#include "IntList.h"

class ArrayIntList : public IntList
{
    private:
        int* arrayList;
        int* arrayLength;

     public:
        //Initializes the list with the given capacity and length 0
        ArrayIntList(int capacity);

        //Adds item to the end of the list
        virtual void pushBack(int item) = 0;

};
#endif 
```

我的第一个 .cc 文件填充了上一个类的方法：

```
#include <iostream>
#include "ArrayIntList.h"

ArrayIntList::ArrayIntList(int capacity)
{
    //make an array on the heap with size capacity
    arrayList = new int[capacity];
    //and length 0
    arrayLength = 0; 
}

void ArrayIntList::pushBack(int item)
{
    arrayList[*arrayLength] = item;
} 
```

这是我的主要功能：

```
#include <iostream>
#include "ArrayIntList.h"

int main(int argc, const char * argv[])
{
    ArrayIntList s(5);
} 
```

当我在 Xcode 中运行它时，我收到“变量 ArrayIntList 是一个抽象类”的错误，我不明白这是怎么回事，因为我在上面的 .cc 文件中定义了它。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T02:25:36.750

在类 ArrayIntList 上使用这个

```
virtual void pushBack(int item); 
```

而不是这个

```
virtual void pushBack(int item) = 0; 
```

原因是当您将 0 分配给函数声明时，您是在说它是“纯”的，或者未实现。但是你在下面这样做（实现它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T02:28:23.833

您已被`ArrayIntList::pushBack(int item)`声明为纯虚函数。这就是它的 `= 0`作用。`= 0`从 ArrayIntList.h 中删除。

另外：您正在使用 int 指针而不是 int 来跟踪数组长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T02:29:40.170

在 ArrayIntList 类的声明中，您需要从方法声明中删除“= 0”。您可能还需要将 arrayLength 声明为 int 而不是指向 int 的指针。最后，由于您在构造函数中为数组分配内存，因此您应该声明一个析构函数以在对象被销毁时释放内存：

```
class ArrayIntList : public IntList
{
private:
    int* arrayList;
    int arrayLength;

public:
    //Initializes the list with the given capacity and length 0
    ArrayIntList(int capacity);

    virtual ~ArrayIntList() { delete arrayList; }

    //Adds item to the end of the list
    virtual void pushBack(int item);

}; 
```

当然，处理数组列表的最佳方法是使用 a`std::vector<int>`代替，这样您就不必手动处理内存分配和释放

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T02:35:22.520

在类 ArrayIntList 中，您声明了一个纯虚拟“virtual void pushBack(int item) = 0;” 您已经在抽象父 IntList 中声明了它。您需要做的就是将其声明为“virtual void pushBack(int item);”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T04:01:37.210

一个抽象基类不能继承另一个抽象基类，去掉

```
= 0; 
```

从您在 ArrayIntList 中的方程式：

```
virtual void pushBack(int item) = 0; 
```

# python - python如何在'for'循环中处理对象实例化

> ID：12831280
> 
> 赞同：7
> 
> 时间：2012-10-11T02:25:33.963
> 
> 标签：python, memory-management, for-loop, instantiation, reference-counting

我有一个高度复杂的类：

```
class C:
    pass 
```

我有这个测试代码：

```
for j in range(10):
    c = C()
    print c 
```

这使 ：

```
<__main__.C instance at 0x7f7336a6cb00>
<__main__.C instance at 0x7f7336a6cab8>
<__main__.C instance at 0x7f7336a6cb00>
<__main__.C instance at 0x7f7336a6cab8>
<__main__.C instance at 0x7f7336a6cb00>
<__main__.C instance at 0x7f7336a6cab8>
<__main__.C instance at 0x7f7336a6cb00>
<__main__.C instance at 0x7f7336a6cab8>
<__main__.C instance at 0x7f7336a6cb00>
<__main__.C instance at 0x7f7336a6cab8> 
```

可以很容易地看到 Python 开启了两个不同的值。在某些情况下，这可能是灾难性的（例如，如果我们将对象存储在其他一些复杂对象中）。

现在，如果我将对象存储在 List 中：

```
lst = []
for j in range(10):
    c = C()
    lst.append(c)
    print c 
```

我明白了：

```
<__main__.C instance at 0x7fd8f8f7eb00>
<__main__.C instance at 0x7fd8f8f7eab8>
<__main__.C instance at 0x7fd8f8f7eb48>
<__main__.C instance at 0x7fd8f8f7eb90>
<__main__.C instance at 0x7fd8f8f7ebd8>
<__main__.C instance at 0x7fd8f8f7ec20>
<__main__.C instance at 0x7fd8f8f7ec68>
<__main__.C instance at 0x7fd8f8f7ecb0>
<__main__.C instance at 0x7fd8f8f7ecf8>
<__main__.C instance at 0x7fd8f8f7ed40> 
```

这解决了这个问题。

所以现在，我要问一个问题......有没有人可以用复杂的词（我的意思是，深刻的）解释 Python 如何处理对象引用？我想，这是一个优化问题（节省内存，或防止泄漏，......）

非常感谢。

**编辑：** 好的，让我们更具体一点。我很清楚python有时必须收集垃圾......但是，就我而言：

我有一个由 Cython 定义的类返回的列表：管理“节点”列表的“网络”类（网络和节点类都在 a 中定义`Cython extension`）。每个节点都有一个对象 [然后转换为 (void *)] 'userdata' 对象。Nodes 列表是从 cython 内部填充的，而 UserData 是从 Python 脚本内部填充的。所以在python中，我有以下内容：

```
...
def some_python_class_method(self):
    nodes = self.netBinding.GetNetwork().get_nodes()
    ...
    for item in it:
        a_site = PyLabSiteEvent()
        #l_site.append(a_site)        # WARN : Required to get an instance on 'a_site' 
                                      #        that persits - workaround...
    item.SetUserData(a_site) 
```

稍后在相同的 python 类中使用相同的 cython getter 重用此节点列表：

```
def some_other_python_class_method(self, node):
    s_data = node.GetUserData()
    ... 
```

因此，似乎在节点列表的 UserDatas 中进行存储时，我的 python 脚本完全是盲目的，并且正在释放/重用内存。它通过使用附加列表（这里：'l_site'）第二次引用（但显然是python方面的第一次）来工作。这就是为什么我必须更多地了解 Python 本身的原因，但似乎我实现 Python 之间通信的方式并`Cython`负责解决必须面对的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T02:29:38.640

这里不需要“复杂”：在第一个示例中，您没有保留对名称“c”引用的对象的其他引用 - 当在后续迭代中运行“c = C()”行中的代码时在循环中，先前保存在“c”中的一个引用丢失了。

由于标准 Python 使用引用计数来跟踪它应该何时从内存中删除对象，因为此时上一个循环交互的对象的引用计数达到 0，它被销毁，并且它的内存可供其他对象使用。

为什么你有 2 个变化的值？`=`因为在新迭代中的对象被创建的那一刻——即当 Python 执行in右侧的表达式时`c = C()`，前一次迭代的对象仍然存在，由名称引用`c`——所以新对象是在另一个内存中构造的位置。然后，Python 继续分配新对象，`c`在该点前一个对象被销毁，如上所述 - 这意味着在下一次（第 3 次）迭代中，该内存将可用于`C`.

在第二个例子中，新创建的对象从不丢失引用，因此它们的内存根本没有被释放——新对象总是占用一个新的内存位置。

**最重要的是：** 使用 Python 或其他高级语言的目的是*不必*担心内存分配。语言会照顾你。在这种情况下，正如您所注意到的，CPython（标准）实现做了正确的事情。Pypy 或 Jython 等其他实现在上述示例中的每个实例的“内存位置”方面可能具有完全不同的行为，但所有符合要求的实现（包括这 3 个）从Python 程序：（1）它确实可以访问它保留引用的实例，（2）这些实例的数据无论如何都没有损坏或损坏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T02:33:21.413

看起来并不复杂。

在第一个示例中，第二次循环时，0x7f7336a6cb00 处的内存被第一次迭代期间创建的 C 实例占用。因此，Python 为新的 C 对象分配下一个内存块 0x7f7336a6cab8。

但是，一旦您创建第二个 C 对象并将其分配给`c`0x7f7336a6cb00 处的现在孤立对象，就没有任何引用。因此，*第三*次循环 Python 可以重新使用该位置的内存用于新对象。当然，一旦这样做，位于 0x7f7336a6cab8 的对象就不再具有对它的引用，并且该内存位置可以通过循环进行*第四*次回收。

但是，在您的第二个示例中，通过将对象附加到列表中，您将*保留对*您创建的每个对象的引用。由于这些对象总是至少有一个对它们的引用，因此它们“居住”的内存永远无法被释放和回收。因此 Python 每次都会分配新的内存。

第一个例子中产生的危险幻觉就是——一种幻觉。只要您创建的对象存在引用，该对象就会被维护。当不再存在引用时，Python 可以安全地释放对象使用的内存，因为您的程序无法再使用该对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T02:27:57.613

在每个循环期间，您都会更改对象`c`引用的对象，因此无法访问原始对象，Python 可以自由地摆脱它（既然您永远无法再次访问它，为什么还要保留任何对象？）。那时，它在同一位置拥有空闲内存，并且似乎可以重用它。我不确定这有什么令人惊讶的。如果解释器从来没有重用内存，你会很快用完。

当您将对象添加到列表时不会发生这种情况，因为该对象仍然可以访问，因此 Python 无法摆脱它（因为您可能会再次使用它）。

这不应该引起问题，因为 Python 不会在您仍然可以使用对象时摆脱它，因此如果您“将对象存储在某个复杂对象中”，它们将保持可访问性并且它们的内存将不会被重用（至少在物体消失之前）。

# php - 替换php中的文件内容并保存到新文件

> ID：12831288
> 
> 赞同：-1
> 
> 时间：2012-10-11T02:26:35.443
> 
> 标签：php, html, replace, file-get-contents, fwrite

所以我会有一个名为 template.php 的模板文件，里面有：

```
<html>
some other content
<?php $name ?>
</html> 
```

本质上，我想从数据库中提取名称并将其插入 $name 并将整个页面保存为新文件。

所以假设在数据库中，我有一个叫 Joe 的名字，我创建的新文件里面会有以下内容：

```
<html>
some other content
Joe
</html> 
```

我遇到的唯一问题是找到正确的函数来实际替换模板文件中的变量，并能够将其保存到新文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:34:32.553

看看我不久前对[这个问题](https://codereview.stackexchange.com/questions/12211/variable-parsing-php/12216#12216)给出的答案。在那里我解释了“变量解析”通常是如何工作的。

> 当我创建模板加载器时，我通常将[输出缓冲](http://php.net/manual/en/book.outcontrol.php)与 php 一起使用`include`。这允许您在准备好之前将页面作为 php 文件运行，而无需显示其内容。以这种方式“解析”您的 php 文件的优点是您仍然可以运行循环和函数。

这是一个如何使用 PHP 的输出缓冲来创建您想要的内容的示例。

**模板** `template.php`

```
<html>
some other content
<?php $name ?>
</html> 
```

**你的数据库代码和东西在哪里** `index.php`

```
<?php

$name = 'John Doe';

if( /* some sort of caching system */ ) {
  $parsed_template = file_get_contents('parsed_template.html');
}else {
  ob_start();
  include 'template.php';
  $parsed_template = ob_get_clean();

  file_put_contents('parsed_template.html', $parsed_template);
}

echo $parsed_template;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:37:14.827

这不是模板通常的工作方式。您应该有一个模板文件，用变量替换它们的值，并将其显示给用户。您可以缓存这些生成的模板（始终相同的模板），但您永远不会为每个用户创建新的模板文件并将其永久保存。这使得管理和更新应用程序比您想要的更加困难。

我推荐使用像[RainTPL](http://www.raintpl.com/)这样的简单模板系统。这就是我在大多数项目中使用的……它使用起来非常简单，并提供了您需要的所有基本功能。

您也可以只使用 PHP 来解决这个问题……关于 SO 有一些答案涵盖了这一点，所以我不会深入探讨。

*   [使用 PHP 作为模板引擎](https://stackoverflow.com/questions/4977529/using-php-as-template-engine)
*   [在 PHP 上使用模板](https://stackoverflow.com/questions/3988627/using-template-on-php/3989380#3989380)

# java - 限制游戏循环中的绘制处理

> ID：12831289
> 
> 赞同：1
> 
> 时间：2012-10-11T02:26:51.937
> 
> 标签：java, timer, logic, frame-rate, game-loop

我从这里[http://www.koonsolo.com/news/dewitters-gameloop/](http://www.koonsolo.com/news/dewitters-gameloop/)使用下面的代码结构 来设置一个游戏循环，该循环基于设置的 fps 进行处理，但尽可能渲染/绘制。如何在绘图 fps 上实施上限，以免耗尽所有处理能力/电池寿命。或将其限制为垂直同步。

```
const int TICKS_PER_SECOND = 60;
const int SKIP_TICKS = 1000000000 / TICKS_PER_SECOND;
const int MAX_FRAMESKIP = 5;

DWORD next_game_tick = GetTickCount();
int loops;
float interpolation;

bool game_is_running = true;
while( game_is_running ) {

    loops = 0;
    while( GetTickCount() > next_game_tick && loops < MAX_FRAMESKIP) {
        update_game();

        next_game_tick += SKIP_TICKS;
        loops++;
    }

    interpolation = float( GetTickCount() + SKIP_TICKS - next_game_tick )
                    / float( SKIP_TICKS );
    display_game( interpolation );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:00:31.650

我假设你实际上是在做适当的运动插值？否则，渲染速度比游戏更新快是没有意义的：您只会在完全相同的位置再次渲染所有对象。

我建议如下：

*   拨打`Thread.sleep(millis)`电话以停止忙碌循环。可能 a`Thread.sleep(5)`很好，因为您只是要快速检查您是否准备好进行下一次更新。
*   对`display_game`调用进行条件测试，以查看自上次 display_game 以来是否至少经过了一定数量的毫秒。例如，如果您设置为 10 毫秒，那么您的帧速率将被限制为 100 帧。

您的代码中还有一些其他一些不清楚的地方：

*   什么是双字？这真的是Java吗？看起来像一些有趣的 C/C++ 转换？在 Java 中获取当前时间的正常方法是`long time=System.nanoTime()`或类似的......
*   你用的是什么图形框架？如果是 Swing，那么您需要注意您正在运行的线程，因为您不想阻塞 GUI 线程......

最后，您还应该考虑是否要将更新循环与渲染代码分离，并让它们在不同的线程上运行。正确处理这件事比较棘手，因为您可能需要锁定某些对象或拍摄某些对象的快照，以确保在渲染它们时它们不会发生变化，但这将有助于您在多核机器上的性能和可伸缩性（其中大多数是如今！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:34:37.800

我认为您可以更新您的`display_game`以将正在绘制的 FPS 与所需的限制进行比较。如果已达到该限制，您可以为等待时间添加等待时间：

```
 Thread.sleep(500); //wait for 500 milliseconds 
```

# ruby - 避免使用 Enumerable 方法重新计算某些值

> ID：12831290
> 
> 赞同：1
> 
> 时间：2012-10-11T02:26:53.370
> 
> 标签：ruby, iteration, memoization

某些方法，`Enumerable`例如`max_by`，`min_by`，或`find`为迭代的项目评估一些相关值，并返回原始项目之一。我经常想要的不是原始值，而是评估的形式。在这个例子中：

```
max = some_enumerable_object.max_by{|e| some_function(e)}
some_function(max) 
```

`max_by`选择一个项目`max`，但我想要的是价值`some_function(max)`而不是它`max`本身。这样做`some_function(max)`似乎浪费了计算，因为它已经在迭代中进行了评估。有没有办法`some_function(max)`不用重新计算就可以访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:03:55.343

您可以`map`致电`max`：

```
max_value = some_enumerable_object.map { |e| some_function(e) }.max 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:06:42.623

您始终可以使用`map`创建一个包含原始值以及计算值的子数组：

```
max = some_enumerable_object.map{ |o|
  [o, some_function(o)] 
}.max_by{ |o,e| e } 
```

完成后，您可以获取原始值或`max`变量中函数的结果。

# workflow - CMFWorkflow 和标记接口

> ID：12831291
> 
> 赞同：1
> 
> 时间：2012-10-11T02:27:11.133
> 
> 标签：workflow, plone

我目前正在 Plone 中对一个小项目进行原型设计，并在需求仍在不断变化时尽可能多地尝试亲吻。为此，我暂时拒绝创建任何自定义内容类型，并且一直在使用标记界面来区分内容的“类型”。

现在我正在查看工作流，我已经意识到它们与类型绑定，并且似乎没有将它们分配给标记的机制。我想我可以用我自己的版本进行包装`portal_workflow`，寻找标记并在找到时返回适当的工作流程，但是，这感觉不是一个站得住脚的方法。

有没有办法将工作流分配给我错过的标记，或者我应该硬着头皮创建一些轻量级的自定义内容类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:49:05.677

# macos - 如何递归地使用 JpegTran（命令行）来优化子目录中的所有文件？

> ID：12831293
> 
> 赞同：11
> 
> 时间：2012-10-11T02:27:34.417
> 
> 标签：macos, bash, command-line, operating-system, jpeg

我在多个目录中有照片。我想使用 jpegtran （命令行工具）递归地遍历每一个，优化它，并保存它（覆盖它）

如果它们都在一个文件夹中，我会使用它

```
for JPEG in *.jpg ; do jpegtran -optimize $JPEG > $JPEG; done 
```

但我不能让它递归工作并覆盖同一个文件（而不是一个新的文件名）

有小费吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-07T08:10:42.073

[jpegtran 整个目录](https://stackoverflow.com/questions/15835351/jpegtran-whole-directory)

```
find /the/image/path -name "*.jpg" -type f -exec jpegtran -copy none -optimize -outfile {} {} \; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T02:58:17.830

如何使用`find`命令：

```
find /your/dir -name '*.jpg' -exec echo jpegtran -optimize {} \; 
```

运行命令，如果您喜欢输出，请删除`echo`以执行它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T03:00:00.933

**在这种情况下使用find**通常要容易得多，因为您要做的是对几个文件名进行*操作。***find**实用程序将为您提供这些名称。假设您有 GNU（甚至可能是 BSD）工具，以下示例将说明这种常见情况。

例如：

```
$ find ~/images/wallpapers/TEMP/ -type f -iname '*jpg' \
    -exec sh -c 'jpegtran -outfile {}.out -optimize {}; mv {}.out {} ' \; 
```

1.  **find**递归查找 TEMP 文件夹中所有以 jpg 结尾的文件。
2.  对于找到的每个*完整文件路径*（由“{}”表示），**find**将运行给定给 -exec 的命令
3.  **-exec 选项作弊并通过sh**运行多个命令而不是一个命令

 *****笔记***

`cat file > file`不允许，因为同时读取和写入同一个文件不是**bash**中定义明确甚至不支持的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T07:56:49.790

**谈论Python方法：**

首先列出所有路径。

然后：

```
import subprocess
for path in paths:
    for image_name in arr:
            subprocess.call(["jpegtran", "-your", "-instructions"]) 
```

假设您的指令类似于：

`jpegtran -optimize -progressive -scans script_new.txt -outfile progressive.jpg original.jpg`

所以你的指令会是这样的：

```
subprocess.call(["jpegtran", "-optimize", "-progressive", "-scans", f"{scan_name}.txt", "-outfile", name_progressive, name_original]) 
```

为方便起见，name_progressive、name_original 和 scan_name 是变量，使用 f-string 概念。**

# jsf-2 - 如何确定内置组件的渲染器

> ID：12831294
> 
> 赞同：3
> 
> 时间：2012-10-11T02:27:38.503
> 
> 标签：jsf-2

我想为内置组件创建自定义渲染器：`<h:selectOneRadio />` 我想知道，如何确定内置组件的渲染器以创建自己的渲染器并从中扩展？

我想知道一种获取它的机制，以便我可以应用它来确定任何其他内置组件的渲染器，而不仅仅是`<h:selectOneRadio />`.

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:31:11.467

标准 JSF 组件的渲染器类是特定于实现的（Mojarra 和 MyFaces 都有自己的实现），并且注册为`<renderer>`特定于实现的`faces-config.xml`（或它的工件）。

要找到它，你基本上需要先知道组件族和渲染器类型，这样你就可以自己在实现特定的`faces-config.xml`文件中查找渲染器类。

您的出发点是[包`javax.faces.component.html`摘要](http://docs.oracle.com/javaee/7/api/javax/faces/component/html/package-summary.html)。由组件类`<h:selectOneRadio>`表示。[它的 javadoc](http://docs.oracle.com/javaee/7/api/javax/faces/component/html/HtmlSelectOneRadio.html)[`HtmlSelectOneRadio`](http://docs.oracle.com/javaee/7/api/javax/faces/component/html/HtmlSelectOneRadio.html)的介绍性文本说：

> 默认情况下，rendererType 属性必须设置为“ `javax.faces.Radio`”。

有渲染器类型。

[组件系列在同一个 javadoc](http://docs.oracle.com/javaee/7/api/javax/faces/component/html/HtmlSelectOneRadio.html#field.summary)`COMPONENT_FAMILY`的“继承自的字段`UISelectOne`”部分下被指定为常量。点击进入[“常量字段值”](http://docs.oracle.com/javaee/7/api/constant-values.html#javax.faces.component.UISelectOne.COMPONENT_FAMILY)：

> `public static final java.lang.String` `COMPONENT_FAMILY` " `javax.faces.SelectOne`"

有组件族。

现在，我们应该查看特定于实现的`faces-config.xml`文件（或它的工件）。不幸的是，它的位置/名称没有记录在案，但我可以说，在 Mojarra 的情况下，它是`com/sun/faces/jsf-ri-runtime.xml`实现 JAR 文件中的文件（您可以使用 zip 工具提取 JAR 文件）。打开它并查找与组件系列和渲染器类型`<renderer>`匹配的条目：`javax.faces.SelectOne``javax.faces.Radio`

```
<renderer>
    <component-family>javax.faces.SelectOne</component-family>
    <renderer-type>javax.faces.Radio</renderer-type>
    <renderer-class>
         com.sun.faces.renderkit.html_basic.RadioRenderer
    </renderer-class>
</renderer> 
```

最后是它：[`com.sun.faces.renderkit.html_basic.RadioRenderer`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-impl/2.2.0/com/sun/faces/renderkit/html_basic/RadioRenderer.java).

请注意，精确地扩展该类会将您的自定义渲染器与特定的 JSF 实现结合起来。您的渲染器将无法在不同的实现（例如 MyFaces）上重用。为了实现独立，您需要自己编写扩展的整个渲染器`javax.faces.renderer.Renderer`。

### 也可以看看：

*   [如何找出 JSF 组件的组件族和渲染器类型](https://stackoverflow.com/questions/11912476/how-to-findout-component-family-and-renderer-type-of-a-jsf-component)
*   [组件族、组件类型和渲染器类型之间的关系是什么？](https://stackoverflow.com/questions/8076625/jsf-what-is-the-relationship-between-component-family-component-type-and-rend)

# ruby-on-rails - 在 Rails 中访问公共文件

> ID：12831295
> 
> 赞同：4
> 
> 时间：2012-10-11T02:27:54.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想访问`/public/images/dog.jpg`Rails 项目中的文件。是否有一些 URL 路由可以访问它？

我试过`public/images/dog.jpg`and `images/dog.jpg`，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:39:09.670

`images/dog.jpg`是正确的。

但是我会使用`image_path`URL 路由，例如`image_path('dog.jpg')`.

请参阅[http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)

# delphi - Delphi XE2 - 构建 64 位应用程序

> ID：12831305
> 
> 赞同：5
> 
> 时间：2012-10-11T02:29:08.050
> 
> 标签：delphi, 64-bit, delphi-xe2

我知道你应该能够在 Delphi XE2 中构建 x64 应用程序......

我正在使用付费版本，即入门版。

![在此处输入图像描述](../Images/a18421d6194f8a599f8ec45a558a8efc.png)

我也签入了选项，它不会让我更改为 64 位。只有 32。我也在 64 位机器上运行 XE2。

难道是因为我有入门版？如果是这样，那有点荒谬，看看我为这个软件支付了 200 多美元。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T03:34:38.713

阅读[特征矩阵](http://www.embarcadero.com/products/delphi/delphi-feature-matrix)。64 位编译器、OSX 编译器和 FireMonkey 框架在 Starter 版本中不可用。

# ruby-on-rails - Rails - 在错误过程中转义 JavaScript

> ID：12831310
> 
> 赞同：0
> 
> 时间：2012-10-11T02:29:35.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

**我有一个在application.rb**中初始化的自定义错误过程：

```
config.action_view.field_error_proc = Proc.new do |html_tag, object|
  error_msg = object.error_message.join(", ")
  "<span class='field_with_errors' data-error='#{error_msg}'>#{html_tag}</span>".html_safe
end 
```

我想转义javascript，所以我修改它：

```
config.action_view.field_error_proc = Proc.new do |html_tag, object|
  error_msg = object.error_message.join(", ")
  "<span class='field_with_errors' data-error='#{escape_javascript(error_msg)}'>#{html_tag}</span>".html_safe
end 
```

但是我收到以下错误：

```
undefined method `escape_javascript' for #<MyApp::Application:0x00000006edd2e8> 
```

我正在使用**Rails 3.0**

任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T02:40:11.687

您必须包含帮助程序才能使其可用。这应该有效：

```
include ActionView::Helpers::JavaScriptHelper

config.action_view.field_error_proc = Proc.new do |html_tag, object|
  error_msg = object.error_message.join(", ")
  "<span class='field_with_errors' data-error='#{escape_javascript(error_msg)}'>#{html_tag}</span>".html_safe
end 
```

# json - MVC2 到 MVC3 Html.Raw(Json.Encode

> ID：12831314
> 
> 赞同：0
> 
> 时间：2012-10-11T02:29:50.840
> 
> 标签：json, asp.net-mvc-3, asp.net-mvc-2

我有一个用 MVC2 / ASPX / c# 开发的项目。我将它更新为 MVC，它运行良好。当我发布它时才注意到，使用 System.Web.Helpers 得到问题；并手动复制。

由于应用程序非常复杂，我在新项目中开发了额外的组件。我使用了 MVC3 ASPX 视图，在我看来我使用：

```
var series =  <%= Html.Raw(Json.Encode(ViewBag.Series)) %>; 
```

它工作得很好，当我在旧应用程序中集成控制器、视图和母版页时，我收到此错误：

```
The name 'Json' does not exist in the current context 
```

将不胜感激您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:38:06.763

问题出在 System.Web.Helpers 中，我使用的是 2.0 版；它应该是 1.0 版。

# c# - 数据库调用过多 - NHibernate

> ID：12831316
> 
> 赞同：1
> 
> 时间：2012-10-11T02:30:07.860
> 
> 标签：c#, sql, nhibernate

我有一种方法可以循环记录并在每条记录上执行选择。我想要一些指导，以便将所有查询汇总并在一次往返中发送到数据库。我知道 CreateMultiQuery() 和 CreateMultiCriteria() 方法，但我不确定如何在下面的当前代码中实现？

谢谢

```
foreach (Roll roll in attendanceRegisterRolls.Items)
                {
                    RollAttendeeUpdater attendeeUpdater = new RollAttendeeUpdater(enrolmentRepository, roll);
                    attendeeUpdater.**AddNewStudentEnrolmentsAsAttendees();**
                    attendeeUpdater.RefreshEffectiveAttendance(register);
                }

**Constructor**
public RollAttendeeUpdater(IEnrolmentRepository enrolmentRepository, Roll roll)
    {
        _roll = roll;
        _enrolments = enrolmentRepository.GetByRoll(_roll);
    }

public interface IEnrolmentRepository : IRepository<Enrolment>
{
    IEnumerable<Enrolment> GetByRoll(Roll roll);
    bool IsStudyCompleted(string resultCode);
}
public IEnumerable<Enrolment> GetByRoll(Roll roll)
    {
        var query = _session.CreateQuery(
            @"select e 
            from Enrolment e 
            join fetch e.Student 
            where e.Roll.Id.RollNumber = :rollNumber and e.Roll.Id.Year = :year
            order by e.EnrolmentStatus");

        query.SetString("rollNumber", roll.Id.RollNumber);
        query.SetString("year", roll.Id.YearAsTwoDigitString);
        return query.List<Enrolment>();
    }
public void **AddNewStudentEnrolmentsAsAttendees()**
    {

        foreach (Enrolment enrolment in _enrolments)
        {
            Student student = enrolment.Student;

            if (student.IsActive)
                if (_roll.HasAttendee(student.Id) == false)
                    _roll.AddAttendee(student, new DateTimeRange(enrolment.StudyStartDate, enrolment.StudyEndDate));
        }
    }

public virtual bool HasAttendee(string studentId)
    {
        return _attendees.Any(a => a.Student.Id == studentId);
    } 
```

AddNewStudentEnrolmentsAsAttendees() 和 enrolmentRepository.GetByRoll(_roll) 方法返回以下 SQL：

```
select
 enrolment0_.id_enrolment as id1_1_0_,
 enrolledst1_.id_student as id1_10_1_,
 enrolment0_.study_start_date as study2_1_0_,
 enrolment0_.study_end_date as study3_1_0_,
 enrolment0_.id_eft as id4_1_0_,
 enrolment0_.enrolment_date as enrolment5_1_0_,
 enrolment0_.enrolment_start_date as enrolment6_1_0_,
 enrolment0_.enrolment_status as enrolment7_1_0_,
 enrolment0_.fee_band as fee8_1_0_,
 enrolment0_.id_course as id9_1_0_,
 enrolment0_.limitation_date as limitation10_1_0_,
 enrolment0_.result_date as result11_1_0_,
 enrolment0_.roll_number as roll12_1_0_,
 enrolment0_.year as year1_0_,
 enrolment0_.id_student as id14_1_0_,
 enrolment0_.result_code as result15_1_0_,
 enrolledst1_.surname as surname10_1_,
 enrolledst1_.given_names as given3_10_1_,
 enrolledst1_.preferred_name as preferred4_10_1_,
 enrolledst1_.title as title10_1_,
 enrolledst1_.gender as gender10_1_,
 enrolledst1_.tafe_international_id as tafe7_10_1_,
 enrolledst1_.active_ind as active8_10_1_,
 enrolledst1_.date_of_birth as date9_10_1_ 
from dt_modular_enrolment enrolment0_ inner join dt_student enrolledst1_ on enrolment0_.id_student=enrolledst1_.id_student 
where (
enrolment0_.roll_number=? )
and
(
    enrolment0_.year=? )
order by  enrolment0_.enrolment_status; p0 = 'AH0130',
p1 = '12'

SELECT
 attendees0_.roll_number as roll5_1_,
 attendees0_.year as year1_,
 attendees0_.id_class_attendee as id1_1_,
 attendees0_.id_class_attendee as id1_12_0_,
 attendees0_.attendance_start_date as attendance2_12_0_,
 attendees0_.attendance_end_date as attendance3_12_0_,
 attendees0_.enrolled_ind as enrolled4_12_0_,
 attendees0_.roll_number as roll5_12_0_,
 attendees0_.year as year12_0_,
 attendees0_.prospective_ind as prospect7_12_0_,
 attendees0_.student_identification as student8_12_0_ 
FROM dt_class_attendee attendees0_ 
WHERE attendees0_.roll_number=? and
 attendees0_.year=?; p0 = 'AH0130',
p1 = '12' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:25:42.563

也许你应该给 RollAttendeeUpdater 整套要更新的卷 - 然后它有足够的知识来同时为所有卷做一些 GetByRoll() 的变体。

或者，让调用者完成查询并传入卷和注册列表，而不是传递存储库实例。

# java - 从文本文件中读取并用空行分隔记录（java）

> ID：12831317
> 
> 赞同：3
> 
> 时间：2012-10-11T02:30:14.117
> 
> 标签：java, class, file-io, io, arraylist

我被这个问题困住了，请帮忙：我想读取一个txt文件并将内容放入一个ArrayList，格式是这样的：

```
name                Yoshida Shuhei
birthday            8-04-1961
phone               0123456789
email               abc@123.com
medicalHistory      None
address             12 X Street, Suburb, 
                    NSW, Australia

address             13 Y Street, Suburb, VIC, Australia
name                Kazuo Hirai
medicalHistory      None
email               xyz@123.com
phone               0987654321
birthday            26-11-1972 
```

该文件包含多个患者记录，每个患者记录块中的记录可以按任意顺序出现（例如第一个患者的*姓名*在前，但第二个患者的*地址*在前），所有记录之间用**空行**分隔。

我的想法是，如果当前行不是空行，则开始读取患者记录并将它们添加到患者对象中，这是我的代码：

```
public static ArrayList<Patient> getData(String fileName) {
        try {
                File file = new File(fileName);
                Scanner reader = new Scanner(file);
                ArrayList<Patient> recordList = new ArrayList<Patient>();
                ArrayList<MedicalHistory> mhList = new ArrayList<MedicalHistory>();
                int index = -1;
                int mh_index = -1;
                String s;
                Patient p = null;
                MedicalHistory mh = null;
                boolean addressActive = false;
                boolean mhActive = false;

                while (reader.hasNext()) {
                    s = reader.nextLine();
                    Scanner line = new Scanner(s);
                    String cmd;

                    if (!s.trim().isEmpty()) {
                        cmd = line.next();

                        if (cmd.equalsIgnoreCase("name")) {
                            index++;
                            p = new Patient();
                            p.setName(line.nextLine());
                            recordList.add(index, p);
                            addressActive = false;
                            mhActive = false;

                        } else if (cmd.equalsIgnoreCase("address")) {
                            if (line.hasNext()) {
                                p.setAddress(line.nextLine().trim());
                                recordList.set(index, p);
                            }
                            addressActive = true;
                            mhActive = false;

                        } else if (cmd.equalsIgnoreCase("birthday")) {
                            p.setBirthday(line.nextLine());
                            recordList.set(index, p);
                            addressActive = false;
                            mhActive = false;

                        } else if (cmd.equalsIgnoreCase("email")) {
                            if (line.hasNext()) {
                                p.setEmail(line.nextLine());
                                recordList.set(index, p);
                            }
                            addressActive = false;
                            mhActive = false;

                        } else if (cmd.equalsIgnoreCase("phone")) {
                            if (line.hasNextInt()) {
                                p.setPhone(line.nextInt());
                                recordList.set(index, p);
                            }
                            addressActive = false;
                            mhActive = false;

                        } else if (cmd.equalsIgnoreCase("medicalHistory")) {
                            mh = new MedicalHistory();
                            //...parse the medicalHistory
                            addressActive = false;
                            mhActive = true;

                        } else if (addressActive) {
                            String address = p.getAddress() + " " + s.trim();
                            p.setAddress(address);
                            recordList.set(index, p);

                        } else if (mhActive) {
                            //to deal with multiple medical histories
                        } else
                            System.out.println("Error: no command:" + s);
                    }
                }
                reader.close();
                return recordList;
            } catch (Exception e) {
                System.out.println("Error:- " + e.getMessage());
                return null;
            }
    } 
```

问题是，我的代码只能处理**名称**在前的情况；如果第一个非空行以其他命令开头（例如以**address**开头），则不会为其初始化**new Patient()**，并且程序将出错...

那么我应该把**p = new Patient()**放在哪里，无论命令的顺序是什么，程序都可以读取患者记录，然后将数据存储在 Patient 对象中？

任何人都可以改进我的代码并满足这个条件吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:38:00.123

我建议您将每个块读入`HashMap<String,String>`将每个属性映射到文件中的值的 a 中。当块完成时（即，当您看到一个空行或文件末尾时）您可以按照您需要的任何特定属性顺序处理该块，以便正确创建一个`Patient`对象。

或者，使用您当前的逻辑，您只需对其进行一些更改即可执行您想要的操作：

```
. . .
while (reader.hasNext()) {
    s = reader.nextLine();
    Scanner line = new Scanner(s);
    String cmd;

    if (!s.trim().isEmpty()) {
        if (p == null) {
            // starting a new block -- create a new patient record
            p = new Patient();
            recordList.add(p);
        }

        if (cmd.equalsIgnoreCase("name")) {
            index++;
            p.setName(line.nextLine());
            addressActive = false;
            mhActive = false;
        } else if (cmd.equalsIgnoreCase("address")) {
            if (line.hasNext()) {
                p.setAddress(line.nextLine().trim());
            }
            addressActive = true;
            mhActive = false;

        } else if (cmd.equalsIgnoreCase("birthday")) {
            p.setBirthday(line.nextLine());
            addressActive = mhActive = false;
        } else if (cmd.equalsIgnoreCase("email")) {
            if (line.hasNext()) {
                p.setEmail(line.nextLine());
            }
            addressActive = mhActive = false;
        } else if (cmd.equalsIgnoreCase("phone")) {
            if (line.hasNextInt()) {
                p.setPhone(line.nextInt());
            }
            addressActive = mhActive = false;
        } else if (cmd.equalsIgnoreCase("medicalHistory")) {
            mh = new MedicalHistory();
            //...parse the medicalHistory
            addressActive = false;
            mhActive = true;
        } else if (addressActive) {
            String address = p.getAddress() + " " + s.trim();
            p.setAddress(address);
        } else if (mhActive) {
            //to deal with multiple medical histories
        } else
            System.out.println("Error: no command:" + s);
        }
    } else {
        // blank line indicates end of block
        p = null;
    }
}
. . . 
```

注意，修改当前病历（引用`p`）时，不需要`recordList`再次设置of元素；它将自动更新，因为它引用了数组列表中已经存在的对象。有了这个，你根本不需要`index`；`recordList`只要输入仍在同一块中，您只需将新患者记录添加到末尾并继续修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:13:25.153

我的想法是维护哈希表来存储完整的数据..

```
Hashtable<Integer,Hashtable<String,String>> ht = new Hashtable<Integer,Hashtable<String,String>>(); 
```

整数存储患者#，哈希表存储名称、值对。

`("address","<addr>"), ("name","<name>")`

HashMap 不是线程安全的。在多线程环境中运行它可能会出现问题。

# c - 具有多个源的 C 中的 Makefile

> ID：12831321
> 
> 赞同：5
> 
> 时间：2012-10-11T02:30:48.067
> 
> 标签：c, makefile

我目前正在学习 C，现在我正在学习需要编写 Makefile 的教程，但我很难为多个源编写 Makefile。有人可以告诉我如何为多个来源更正 Makefile 的代码吗？所有文件都在同一个目录中，总共有 3 个 C 源文件，如 filename1/2/3 等所示。我正在尝试在单个 makefile 中构建 3 个具有 3 个源文件的单独程序

```
 OPT = -O4              

all: filename1

filename1: filename1.o 
    gcc $(OPT) -o filename1 filename1.o

filename1.o: filename1.c
    gcc $(OPT) -c filename1.c

filename2: filename2.o 
    gcc $(OPT) -o filename2 filename2.o

filename2.o: filename2.c
    gcc $(OPT) -c filename2.c   

filename3: filename3.o 
    gcc $(OPT) -o filename3 filename3.o

filename3.o: filename3.c
    gcc $(OPT) -c filename3.c       
clean:
    rm -f *.o
    rm -f filename1
    rm -f filename2
    rm -f filename3 
```

或者我的代码是否适合我想要它做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T02:40:55.760

好的，鉴于您正在制作三个不同的程序，makefile似乎没有任何**问题。**它应该工作。

一些使它更有用的建议：

1) 声明“所有”和“干净”目标是虚假的。这将阻止 Make 尝试制作名为“all”和“clean”的文件。

```
.PHONY: all clean 
```

2）您可能希望您的“全部”目标构建所有三个程序，而不仅仅是一个，因此将其更改为：

```
all: filename1 filename2 filename3 
```

3）如果您最终使用它来制作三个以上的程序，并且它们都共享相似的构建过程，您可以使用模式匹配将您的规则折叠成一个较小的集合。有关示例，请参见 Martin Beckett 的答案。但是，这不是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T02:46:42.257

您的 makefile 应该可以工作，但可以简化。

该`make`实用程序支持隐式规则。这可以简化常见的操作，例如将 C 源代码文件编译为目标文件并将目标文件编译为可执行文件。

```
CC=gcc
CFLAGS=-O4

all: filename1 filename2 filename3

%.o: %.c
    $(CC) $(CFLAGS) -c $<

%: %.o
    $(CC) $(CFLAGS) -o $* $<

clean:
    rm -f *.o
    rm -f filename1
    rm -f filename2
    rm -f filename3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T02:47:03.650

对于从三个文件构建的三个独立程序，您可以简单地使用：

```
PROGRAMS = filename1 filename2 filename3

all: ${PROGRAMS}

clean:
    rm -f ${PROGRAMS} ${PROGRAMS:=.o} 
```

您可能会添加：

```
CFLAGS = -O4 
```

以获得该级别的优化。您可以使用宏而不是`rm`命令；一般来说，mature 会`makefile`使用很多宏：

```
RM_F = rm -f 
```

如果您的目标是 GNU Make，您可以添加：

```
.PHONY: all clean 
```

而这样的例子不胜枚举。

关键是它已经`make`知道如何构建单文件程序，并且它知道如何将 C 源代码编译为目标文件，因此您不必训练它来做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T02:51:39.443

使用模式匹配：

```
PROGS = filename1 filename2 filename3

all: $(PROGS)

# cancel implicit program rule
%: %.c

%: %.o
    $(CC) $(LDFLAGS) $^ -o $@

%.o: %.c
    $(CC) $(OPT) $(CFLAGS) $^ -c -o $@

clean:
    rm -f $(PROGS) *.o

.PHONY: all clean 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:40:26.103

FWIW，

高温高压

'用于在 $PWD 中构建多个 main() 目标的通用 Makefile'

[Makefile编译多个c程序？](https://stackoverflow.com/questions/5950395/makefile-to-compile-multiple-c-programs/13696012#13696012)

# html - OpenLayers - 清除“地图”div

> ID：12831322
> 
> 赞同：0
> 
> 时间：2012-10-11T02:31:02.647
> 
> 标签：html, jquery-mobile, openlayers

我正在使用 OpenLayers 来显示动态加载的图像。我正在使用的代码是：

```
 var map;
      function init(strURL) {
      map = new OpenLayers.Map('map');

      var options = { numZoomLevels: 3,
                isBaseLayer: true, };

      var graphic = new OpenLayers.Layer.Image(
            'City Lights',
            strURL + "?sc=page",
            new OpenLayers.Bounds(-180, -88.759, 180, 88.759),
            new OpenLayers.Size(580, 288),
            options
        );

    //    graphic.events.on({
    //      loadstart: function () {
    //        OpenLayers.Console.log("loadstart");
    //      },
    //      loadend: function () {
    //        OpenLayers.Console.log("loadend");
    //      }
    //    });

    var jpl_wms = new OpenLayers.Layer.WMS("NASA Global Mosaic",
            "http://t1.hypercube.telascience.org/cgi-bin/landsat7",
            { layers: "landsat7" }, options);

    map.addLayers([graphic, jpl_wms]);

    map.addControl(new OpenLayers.Control.LayerSwitcher());
    map.zoomToMaxExtent();

  } 
```

我当时在按钮单击事件上调用此函数并传递 strURL（图像的来源）。结果是，每次单击都会加载不同的图像并在网页上显示，但不会清除前一个图像。所以我在网页上显示了 5 个不同的图像，点击 5 次，依此类推。

我的javascript知识有限，所以如果这是一个愚蠢的问题，我深表歉意。如何制止这种行为？感谢您的任何帮助。

另外，我不太明白这些行：

```
 var jpl_wms = new OpenLayers.Layer.WMS("NASA Global Mosaic",
        "http://t1.hypercube.telascience.org/cgi-bin/landsat7",
        { layers: "landsat7" }, options); 
```

但我知道这些行是必需的，因为如果我删除它们，我会收到 js 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:37:39.817

所以目前你在每次点击按钮时都调用 init(strURL) ？将该代码分为两部分：

*   在页面加载时，创建地图和图层对象
*   单击按钮时，只需更新现有图像层的 URL。图像层有 setUrl(url) 方法：[http ://dev.openlayers.org/apidocs/files/OpenLayers/Layer/Image-js.html#OpenLayers.Layer.Image.setUrl](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/Image-js.html#OpenLayers.Layer.Image.setUrl)

这是示例，应该解释一下：http: [//jsfiddle.net/mEHrN/6/](http://jsfiddle.net/mEHrN/6/)

关于 var jpl_wms = ... - 它创建 WMS 图层，该图层应显示 Landsat 图像（但该 URL 似乎不起作用）。如果您将其删除，请记住还要将其从 map.addLayers 中删除：

```
map.addLayers([graphic]); 
```

可能这就是为什么你得到 JS 错误的原因。

# magento - 查找已触发的事件

> ID：12831323
> 
> 赞同：1
> 
> 时间：2012-10-11T02:31:04.583
> 
> 标签：magento

如何在 http 请求期间检查 Magento 中所有触发事件的列表？此外，其中有这么多我们如何检查该事件是否已经被声明过。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:54:47.750

Mage::dispatchEvent() 触发 2 个分析器调用。因此，您可以启用 magento 分析，它会向您显示所有已调度的事件。

您还可以查看[Developer Helper](http://www.magentocommerce.com/magento-connect/developer-helper-1724.html)扩展以获取在 config.xml 观察者中定义的所有列表。

# javascript - 将选项选择中的两个值传递给 javascript 函数

> ID：12831324
> 
> 赞同：2
> 
> 时间：2012-10-11T02:31:06.343
> 
> 标签：javascript

我有一个工作税计算器，我需要再添加一个。对于输入 C，我需要有两个与用户选择的城镇相关的已知值。然后，我需要将这些值插入到不同位置的Calculate 函数中，但只有一个值在Calculate2 中的一个位置。就像是：

```
<select name="input_C" id="input_C">
<option value="value1,value2">Acworth</option>
</select>

function Calculate(Atext, Btext, Ctext_value1, Ctext_value2, form)
{
    var A = parseFloat(Atext);
    var B = parseFloat(Btext);
    var C_1 = parseFloat(Ctext_value1);
    var C_2 = parseFloat(Ctext_value2);
    form.Answer.value = ((B/C_1)-A)*C_2;
}

function Calculate2(Atext, Ctext_value2, Dtext, form)
{
    var A = parseFloat(Atext);
    var C_2 = parseFloat(Ctext_value2);
    var D = parseFloat(Dtext);
    form.Answer.value = D-((A*C_2)/1000);
} 
```

但我不知道如何传递这两个值并正确关联它们？

下面的代码有效，但显然缺少与`input_C`. 我确定`document.getElementById("input_C").value`除了其他更改之外，我还需要向 中添加其他内容...

```
function compute() {
    var A = document.getElementById("input_A").value;   
    var B = document.getElementById("input_B").value;
    var C = document.getElementById("input_C").value;
    var D = document.getElementById("input_D").value;

    if (B != "" && D != "") {
        alert("You may only enter either an Assessment or Annual Taxes.");
    } else if (A =="" && B =="" && D =="") {
        alert("You must select your town, enter a Market Value, and either an Assessment or     Annual Taxes to calcuate..");
    } else if (C =="999") {
        alert("You must select your town.");
    } else if (A =="") {
        alert("You must enter a Market Value.");
    } else if (B != "" && C !="") {
        Calculate(A, B, C, document.getElementById("overtax"));
    } else if (D != "" && C !="") {
        Calculate2(A, C, D, document.getElementById("overtax"));
    } else {
        alert("You must select your town, enter a Market Value, and either an Assessment or     Annual Taxes to calcuate.");
   }
}

function Calculate(Atext, Btext, Ctext, form)
{
    var A = parseFloat(Atext);
    var B = parseFloat(Btext);
    var C = parseFloat(Ctext);
    form.Answer.value = ((B-A)*C)/1000;
}

function Calculate2(Atext, Ctext, Dtext, form)
{
    var A = parseFloat(Atext);
    var C = parseFloat(Ctext);
    var D = parseFloat(Dtext);
    form.Answer.value = D-((A*C)/1000);
}

<FORM NAME="Calculator" METHOD="post" id="overtax">
    <P>City/Town:
        <select name="input_C" id="input_C">
            <option value="999">Select Your City/Town</option>
            <option value="20.55">Acworth</option>
        </select>
    </P>
    <P>Market Value: <INPUT TYPE=TEXT NAME="input_A" id="input_A" SIZE=10     onblur="this.value=this.value.replace(/,/g,'')"> <span class="directions">Please enter what you believe your property is worth in today's market</span></P>
    <P>Assessment: <INPUT TYPE=TEXT NAME="input_B" id="input_B" SIZE=10 onblur="this.value=this.value.replace(/,/g,'')"> <span class="directions">Located on your property tax bill or assessment card</span></P>
    <P>OR</P>
    <P>Annual Taxes: <INPUT TYPE=TEXT NAME="input_D" id="input_D" SIZE=10 onblur="this.value=this.value.replace(/,/g,'')"> <span class="directions">Located on your property tax bill or assessment card</span></P>

    <P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onclick="compute();" /></P> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T02:50:17.367

如果我理解正确，您只需要拆分值 String

例如给定这个 HTML

```
<select id="mySelect">
   <option value="100,200">My Value</option>
</select>​ 
```

那么这将为您提供值

```
var value = document.getElementById("mySelect").value;
var split = value.split(",");
var v1 = split[0];
var v2 = split[1]; 
```

例如在[jsfiddle中看到](http://jsfiddle.net/Wenee/5/)

更多关于[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)`split`的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T15:03:42.873

我们可以通过data属性传递，并且可以在js中访问，

```
<OPTION VALUE="1" data-year="2010">One</OPTION>

var year = $(this).find(':selected').data('year'); 
```

# c# - OpenID 领域是否必须是网站的基本 URL？

> ID：12831332
> 
> 赞同：7
> 
> 时间：2012-10-11T02:31:52.367
> 
> 标签：c#, asp.net, .net, openid, dotnetopenauth

作为[这个问题](https://stackoverflow.com/q/12517083/1324019)的延续，我遇到了 dotnetopenauth 的问题。

基本上，我想知道 RP 中指定的领域是否必须是应用程序的实际基本 URL？也就是说，( `http://localhost:1903`)? 鉴于现有的架构，很难删除重定向 - 我尝试将领域设置为基本 OpenId 控制器 ( `http://localhost:1903/OpenId`)，并且手动测试确实生成了 XRDS 文档。但是，应用程序似乎冻结了，EP 日志显示以下错误：

`2012-10-10 15:17:46,000 (GMT-4) [24] ERROR DotNetOpenAuth.OpenId - Attribute Exchange extension did not provide any aliases in the if_available or required lists.`

代码：

依赖方：

```
public ActionResult Authenticate(string RuserName = "")
{
UriBuilder returnToBuilder = new UriBuilder(Request.Url);
returnToBuilder.Path = "/OpenId/Authenticate";
returnToBuilder.Query = null;
returnToBuilder.Fragment = null;

Uri returnTo = returnToBuilder.Uri;
returnToBuilder.Path = "/";
Realm realm = returnToBuilder.Uri;

var response = openid.GetResponse();

if (response == null) {
    if (Request.QueryString["ReturnUrl"] != null && User.Identity.IsAuthenticated) {

    } else {

    string strIdentifier = "http://localhost:3314/User/Identity/" + RuserName;
    var request = openid.CreateRequest(
        strIdentifier,
        realm,
        returnTo);

    var fetchRequest = new FetchRequest();
    request.AddExtension(fetchRequest);
    request.RedirectToProvider();
    }
} else {
    switch (response.Status) {
        case AuthenticationStatus.Canceled:
            break;
        case AuthenticationStatus.Failed:
            break;
        case AuthenticationStatus.Authenticated:
            //log the user in
            break;
    }
}

return new EmptyResult(); 
```

}

提供者：

```
public ActionResult Index()
{
    IRequest request = OpenIdProvider.GetRequest();

    if (request != null) {
        if (request.IsResponseReady) {
            return OpenIdProvider.PrepareResponse(request).AsActionResult();
        }

        ProviderEndpoint.PendingRequest = (IHostProcessedRequest)request;
        return this.ProcessAuthRequest();
    } else {
        //user stumbled on openid endpoint - 404 maybe?
        return new EmptyResult();
    }
 }

public ActionResult ProcessAuthRequest()
    {
        if (ProviderEndpoint.PendingRequest == null) {
            //there is no pending request
            return new EmptyResult();
        }

        ActionResult response;
        if (this.AutoRespondIfPossible(out response)) {
            return response;
        }

        if (ProviderEndpoint.PendingRequest.Immediate) {
            return this.SendAssertion();
        }

        return new EmptyResult();
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T03:40:44.807

你的问题的答案是“不”。领域可以是站点的基本 URL 和 return_to URL 之间的任何 URL。例如，如果您的 return_to URL 是`http://localhost:1903/OpenId/Authenticate`，则以下都是有效领域：

*   `http://localhost:1903/OpenId/Authenticate`
*   `http://localhost:1903/OpenId/`
*   `http://localhost:1903/`

鉴于上面的 return_to，以下*不是*有效领域：

*   `http://localhost:1903/OpenId/Authenticate/` （额外的尾部斜杠）
*   `http://localhost:1903/openid/` （区分大小写！）
*   `https://localhost:1903/` （方案变更）

由于某些 OpenID 提供商（例如 Google）会根据确切的领域 URL 为其用户发布成对的唯一标识符，因此建议将您的领域作为您网站的基本 URL，以便它最稳定（重新设计您的网站不会改变它） . 强烈建议如果它可以是 HTTPS，则将其设置为 HTTPS，因为这允许您的 return_to 为 HTTPS，并且这样更安全（它可以减轻 DNS 中毒攻击）。

日志中出现错误的原因是您的 RP 创建并向`FetchRequest`OpenID 身份验证请求添加了扩展，但您尚未使用您请求的任何实际属性初始化 FetchRequest。

但是，根据您提供的信息，我无法告诉您为什么您的应用程序会冻结。

# mysql - MySQL 报表查询

> ID：12831335
> 
> 赞同：0
> 
> 时间：2012-10-11T02:32:30.890
> 
> 标签：mysql

我有以下数据库模式（我只提到查询所需的每个表的列）：

```
bills
-------
id
amount (decimal)
collection_case_id

collection_case
------------------
id

payments
----------
id
bill_id
amount (decimal)
type (char(2)) - "CH" stands for check payment, field used for polymorphism 

check_payments
---------------
payment_id 
```

对于一组收款案例，我需要获取从支票付款中获得的总利息。在为我的收款案例标准集检索所有账单记录后，我目前正在内存中进行这些计算。对于每张账单，我只需添加收到的支票总和 - 如果收到的支票总和大于账单金额，则账单金额。

例如，我收到的总查询如下所示（收集案例 1 和 2）：

```
select sum(payment.amount) as received 
from bills bill
cross join payments payment inner join check_payments checkpayment 
on 
payment.id=checkpayment.payment_id 
where payment.type='CH'
 and payment.bill_id=bill.id 
 and (bill.collection_case_id in (1 , 2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:48:08.307

不确定这是否是您的意思。

```
select IF(sum(payment.amount) > bill.amount, sum(payment.amount)-bill.amount, 0) as interest  
from bills bill
cross join payments payment inner join check_payments checkpayment 
on 
payment.id=checkpayment.payment_id 
where payment.type='CH'
 and payment.bill_id=bill.id 
 and (bill.collection_case_id in (1 , 2)) 
```

# php - Yii has_many 与两个primary_keys的关系

> ID：12831337
> 
> 赞同：0
> 
> 时间：2012-10-11T02:32:53.787
> 
> 标签：php, yii, has-many, composite-primary-key

我有`mail_conversation`一张`mail_conversation_member`桌子。

`mail_conversation`仅`id`作为`PRIMARY KEY`.

`mail_conversation_member`有`conversation_id`和`user_id`作为`PRIMARY KEY`s。

现在，我想列出一个对话及其所有成员，但它只返回**一个**成员。看来我需要`PRIMARY KEY`在`HAS_MANY`关系中添加第二个。

```
 'message_member' => array(self::HAS_MANY, 'MailConversationMember', 'conversation_id') 
```

我得到了以下对话：

```
 $criteria = new CDbCriteria();
        $criteria->condition = "message_member.user_id = " . Yii::app()->user->id;
        $criteria->order = 'messages.date_created DESC';

        $mail_conversations = MailConversation::model()->with(array('message_member',   'messages'))->findAll($criteria); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:43:33.270

这是因为您拥有的标准。如果您将“message_member”从`with`数组中取出，您可以在进行对话后延迟加载成员。您应该检查 Yii 生成的 SQL 代码，以确认标准被按预期解释。

另外，为什么不在成员类中定义关系：

```
'conversations' => array(self::HAS_MANY, 'MailConversationMember', 'user_id',array(
     'order' => 'messages.date_created DESC',
), 
```

然后，您可以在没有指定标准的情况下进行对话，并在每次对话中拉动成员。

# sql-server - 如何获取具有更新值的表的列表

> ID：12831340
> 
> 赞同：0
> 
> 时间：2012-10-11T02:33:17.393
> 
> 标签：sql-server, sql-server-2005, sql-server-2008-r2, sql-server-2012

大家好，我需要一些帮助来提出一个查询，该查询列出了从某个日期到现在数据已更新的所有表。

我正在使用 SQL Server 2012。

蒂亚！

添加信息：

这是我到目前为止的查询：

```
Select distinct OBJECT_NAME(object_id) As TableName
From sys.dm_db_index_usage_stats
Where user_updates > 0
And last_user_update > cast('07/17/2012' as datetime)
order by TableName 
```

我想获取从 2012 年 7 月 17 日至今更新数据或插入新数据的所有表。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T02:36:37.420

自从几年前离开我的最后一份 DBA 工作以来，我没有在 SQL Server 上做过大量的工作，而是我更专注于 MySQL，但当时我不得不做一些类似的事情，并且发现这篇文章很有帮助。希望它能带来一些启示......

[http://blog.sqlauthority.com/2009/05/09/sql-server-find-last-date-time-updated-for-any-table/](http://blog.sqlauthority.com/2009/05/09/sql-server-find-last-date-time-updated-for-any-table/)

# android - Android：屏幕方向更改后的片段恢复

> ID：12831344
> 
> 赞同：4
> 
> 时间：2012-10-11T02:33:48.107
> 
> 标签：android, android-fragments

我从片段开始，我面临一个问题。我不想在屏幕旋转后恢复我的片段。我的应用程序如下所示：在横向上，我在左侧区域有一个按钮，用于更新右侧区域的 a 标签。如果在纵向模式下，我正在导航到一个新活动。但是，我不想在旋转后保持片段状态。代码如下所示：

左侧区域片段：

```
public class ListFragment extends Fragment implements OnClickListener {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_list, container, false);
    Button button = (Button) view.findViewById(R.id.button1);
    button.setOnClickListener(this);

    return view;
}

@Override
public void onClick(View v) {

    switch (v.getId()) {

    case R.id.button1:
        updateDetail();
        break;

    }
}

public void updateDetail() {
    String newTime = String.valueOf(System.currentTimeMillis());
    DetailFragment fragment = (DetailFragment) getFragmentManager()
            .findFragmentById(R.id.detailFragment);
    if (fragment != null && fragment.isInLayout()) {
        fragment.setText(newTime);
    } else {
        Intent intent = new Intent(getActivity().getApplicationContext(),
                DetailActivity.class);
        intent.putExtra("value", newTime);
        startActivity(intent);
    }
} 
```

}

右区活动：

```
public class DetailActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
        finish();
        return;
    }       

    if (savedInstanceState == null) {
        setContentView(R.layout.activity_detail);
        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            String s = extras.getString("value");
            TextView view = (TextView) findViewById(R.id.detailsText);
            view.setText(s);
        }
    }
} 
```

}

右侧区域片段：

```
public class DetailFragment extends Fragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater
            .inflate(R.layout.fragment_detail, container, false);

    return view;
}

public void setText(String item) {
    TextView view = (TextView) getView().findViewById(R.id.detailsText);
    view.setText(item);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    FragmentManager fm = getFragmentManager();

    DetailFragment fragment = (DetailFragment)fm.findFragmentById(R.id.detailFragment);

    if (fragment == null) {
        fragment = new DetailFragment();
        fragment.setTargetFragment(this, 0);
        fm.beginTransaction().add(R.id.detailFragment, fragment).commit();
    } 
} 
```

}

我可能做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-24T14:23:51.307

您有几个选项可以通过[几种](http://developer.android.com/reference/android/app/Fragment.html#onCreate%28android.os.Bundle%29)方法使用 Bundle 来[保存](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState(android.os.Bundle))和[恢复](http://developer.android.com/reference/android/app/Fragment.html#onViewStateRestored%28android.os.Bundle%29)片段的状态。

或者您可以使用[setRetainInstance](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)方法：

```
onCreate(Bundle save)
{
   super.onCreate(save);
   setRetainInstance(true);
} 
```

请记住，setRetainInstance 方法不适用于 backstack 中的片段。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-24T15:26:41.867

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    int orientation = getResources().getConfiguration().orientation;
    switch (orientation) {
    case Configuration.ORIENTATION_LANDSCAPE:
        getSupportFragmentManager().beginTransaction().replace(R.id.detailFragment, new DetailFragment()).commitAllowingStateLoss();
        getSupportFragmentManager().beginTransaction().remove(new DetailFragment()).commitAllowingStateLoss();
        break;
    case Configuration.ORIENTATION_PORTRAIT:
        getSupportFragmentManager().beginTransaction().replace(R.id.detailFragment, new DetailFragment()).commitAllowingStateLoss();
        getSupportFragmentManager().beginTransaction().remove(new DetailFragment()).commitAllowingStateLoss();
        break;
    }
    super.onConfigurationChanged(newConfig);
} 
```

您可以通过执行检查`onConfigurationChange`并确保您的片段状态不会丢失`commitAllowingStateLoss`

# sql-server - Import empty string(column default value) instead of NULL value when using bcp utility with a external data file and format file

> ID：12831347
> 
> 赞同：1
> 
> 时间：2012-10-11T02:34:20.607
> 
> 标签：sql-server, bcp, data-import

I have a small issue with using bcp import tool. This is the case I have a .csv data file (field separator if | character) and format file. I can import data into the table successfully, but it is importing NULL value instead of empty strings in data file. consider below as sample record in data file

```
col1|col2|||col5|col6 
```

I got output like below

```
col1 col2 NULL NULL col5 col6 
```

but I am expecting below output

```
col1 col2  (empty string) (empty string) col5 col6 
```

in my table definition, default values are empty string, is this due to an issue with data file (bcp data exporting command) or my data importing bcp command.

this is the command I used to import data bcp [database].[table] in M:\data\xx.csv -f M:\format\XX.FMT -S serverName -T

Thanks and All reply are welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:11:18.230

I believe you have to create the column of the table to have default value empty string ""

For example:

```
create table mytable (
  col1 varchar(10) default ""
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T20:56:07.867

You can update from the interface in management studio In the editor properties of the column Default Value or Binding : (' ')

# c# - 如何限制文件上传的大小但显示有意义的响应？

> ID：12831355
> 
> 赞同：2
> 
> 时间：2012-10-11T02:35:40.960
> 
> 标签：c#, asp.net-mvc, upload, httppostedfilebase

我将此添加到我的`web.config`文件中：

```
<httpRuntime maxRequestLength="40960"/> <!-- Limit to 40 megabytes --> 
```

当我尝试上传大于 40 兆字节的内容时，我在 Firefox 中得到了这个：

```
The connection was reset

The connection to the server was reset while the page was loading.

  * The site could be temporarily unavailable or too busy. Try again in a few
    moments.
  * If you are unable to load any pages, check your computer's network
    connection.
  * If your computer or network is protected by a firewall or proxy, make sure
    that Firefox is permitted to access the Web. 
```

有什么方法可以从这个内置的文件大小限制中受益，但实际上显示了一个不错的错误页面？当然，我可以在控制器中进行此检查，但此时流量已经用完，因为巨大的文件已到达我的服务器。

```
if (image.ContentLength > 40960) // 'image' is HttpPostedFileBase 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:46:39.123

在你的 global.asax.cs 中这个怎么样？

```
void Application_Error(object sender, EventArgs e)
{
    if (Request.TotalBytes > 40960 * 1024)
    {
        Server.ClearError();
        Response.Clear();
        Response.Write("File uploaded is greater than 40 MB");
    }

} 
```

# sql - 在 DB2 中截断 Schema 下的所有表

> ID：12831357
> 
> 赞同：2
> 
> 时间：2012-10-11T02:35:56.240
> 
> 标签：sql, database, db2

我想截断在 Linux 服务器上运行的 DB2 中特定模式下的所有表。但我无权 ALTER TABLE 禁用外键约束。

有没有办法做到这一点？

我正在考虑根据表之间的约束执行拓扑排序，但这有点复杂。

关于这个问题有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:57:49.303

你不说你在哪个平台上。此答案特定于 Linux、UNIX 和 Windows 上的 DB2。

如果您对表具有 LOAD、INSERT 和 DELETE 权限，则可以使用带有空文件的 LOAD 命令来截断表，而不管是否存在外键约束：

```
LOAD from /dev/null of del replace into yourschema.yourtable nonrecoverable 
```

这会将所有相关表置于检查挂起状态...一旦您截断了所有表，您将使用该`SET INTEGRITY`语句将所有表置于检查挂起状态。

# javascript - Google Maps API——点击时每个标记的唯一活动图标

> ID：12831358
> 
> 赞同：1
> 
> 时间：2012-10-11T02:36:20.747
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我使用 Google Maps API 有以下 JS：

```
// initialize variables
var infowindow = null;
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var gmarkers = [];

$(document).ready(function () { initialize(); });

function initialize() {

    // directions
    directionsDisplay = new google.maps.DirectionsRenderer();

    var centerMap = new google.maps.LatLng(busipress_map_vars.center_lat , busipress_map_vars.center_long);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var start = busipress_map_vars.path_start;
    var end = busipress_map_vars.path_end;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });

    directionsDisplay.setMap(map);
}

/**
 * show locations
 */
var sites = busipress_map_vars.locations;

/**
 * set markers on map
 */
function setMarkers(map, markers) {

    // default icon
    var defaultIcon = new google.maps.MarkerImage(busipress_map_vars.default_map_icon,
        // This marker is 32 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.default_map_icon_width, busipress_map_vars.default_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.default_map_icon_height));

    // default shadow
    var shadow = new google.maps.MarkerImage(busipress_map_vars.map_icon_shadow,
        // The shadow image is larger in the horizontal dimension
        // while the position and offset are the same as for the main image.
        new google.maps.Size(busipress_map_vars.map_icon_shadow_width, busipress_map_vars.map_icon_shadow_height),
        new google.maps.Point(0,0),
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.map_icon_shadow_height));

    // active icion
    var activeIcon = new google.maps.MarkerImage(busipress_map_vars.active_map_icon,
        // This marker is 20 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.active_map_icon_width, busipress_map_vars.active_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.active_map_icon_width / 2), busipress_map_vars.active_map_icon_height));
    var shape = {
        coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
        type: 'poly'
    };

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            icon: sites[4][0],
            shadow: sites[6][0],
            zIndex: 1,
            html: sites[3]
        });

        google.maps.event.addListener(marker, "click", function () {
            for (var i = 0; i < gmarkers.length; i++) {
               //gmarkers[i].setIcon(defaultIcon);
               gmarkers[i].setIcon(sites[4][0]);
            }
            //this.setIcon(activeIcon);
            this.setIcon(sites[5][0]);

            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
        gmarkers.push(marker);
    }
} 
```

我试图做的是`site`为每个标记映射一个图标（因为它是唯一的），然后单击，将其更改为该站点的活动状态。因此，将其更改为活动图标似乎可行，但使用该重置功能（将所有其他图标更改回默认图标）会将其转换回站点的图标之一，而不是每个单独的图标。有人对为什么会发生这种情况有任何想法吗？

另外，当我第一次研究这个时，我正在使用`defaultIcon`例如（你可以看到它在点击动作中被注释掉了。因为我现在通过本地化 Javascript 来传递图标的 URL，有什么我可以传递的吗？到`new google.maps.Marker`原始声明中所做的大小、原点和点`var defaultIcon`。例如，`sites[4][0]`将有一个图像 URL，但`sites[4][1]`将有宽度和`sites[4][2]`高度。我实际上不确定它是什么如果我没有任何东西，我就会离开，所以这里有点困惑。谢谢！

# 更新

我在想问题可能出在我声明变量的地方，所以我将它们添加到`for loop`并调整了地图标记以使用这些：

```
// initialize variables
var infowindow = null;
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var gmarkers = [];

$(document).ready(function () { initialize(); });

function initialize() {

    // directions
    directionsDisplay = new google.maps.DirectionsRenderer();

    var centerMap = new google.maps.LatLng(busipress_map_vars.center_lat , busipress_map_vars.center_long);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var start = busipress_map_vars.path_start;
    var end = busipress_map_vars.path_end;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });

    directionsDisplay.setMap(map);
}

/**
 * show locations
 */
var sites = busipress_map_vars.locations;

/**
 * set markers on map
 */
function setMarkers(map, markers) {

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];

        // default icon
        var defaultIcon = new google.maps.MarkerImage(sites[4][0],
            // This marker is 32 pixels wide by 32 pixels tall.
            new google.maps.Size(sites[4][1], sites[4][2]),
            // The origin for this image is 0,0.
            new google.maps.Point(0,0),
            // The anchor for this image is the base of the flagpole at 0,32.
            new google.maps.Point((sites[4][1] / 2), sites[4][2]));

        // default shadow
        var shadow = new google.maps.MarkerImage(sites[6][0],
            // The shadow image is larger in the horizontal dimension
            // while the position and offset are the same as for the main image.
            new google.maps.Size(sites[6][1], sites[6][2]),
            new google.maps.Point(0,0),
            new google.maps.Point((sites[6][1] / 2), sites[6][2]));

        // active icion
        var activeIcon = new google.maps.MarkerImage(sites[5][0],
            // This marker is 20 pixels wide by 32 pixels tall.
            new google.maps.Size(sites[5][1], sites[5][2]),
            // The origin for this image is 0,0.
            new google.maps.Point(0,0),
            // The anchor for this image is the base of the flagpole at 0,32.
            new google.maps.Point((sites[5][1] / 2), sites[5][2]));
        var shape = {
            coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
            type: 'poly'
        };

        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            icon: defaultIcon,
            shadow: shadow,
            zIndex: 1,
            html: sites[3]
        });

        google.maps.event.addListener(marker, "click", function () {
            for (var i = 0; i < gmarkers.length; i++) {
               gmarkers[i].setIcon(defaultIcon);
            }
            this.setIcon(activeIcon);

            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
        gmarkers.push(marker);
    }
} 
```

但它仍然将`defaultIcon`所有更改为一个，而不是单个 defaultIcon 图像。这可能与另一个 for 循环中的 for 循环有关，但我不太确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:05:40.393

您需要更改点击侦听器功能：

```
 google.maps.event.addListener(marker, "click", function () {
        for (var i = 0; i < gmarkers.length; i++) {
           gmarkers[i].setIcon(defaultIcon);
        }
        this.setIcon(activeIcon);

        infowindow.setContent(this.html);
        infowindow.open(map, this);
    }); 
```

您需要为每个标记保存“唯一”图标并将其更改回那个，而不是 defaultIcon。最简单的可能是将其保存为标记的属性（即 marker.myDefaultIcon），然后您可以执行以下操作：

```
gmarkers[i].setIcon(gmarkers[i].myDefaultIcon); 
```

[jsfiddle](http://jsfiddle.net/kV6Ys/54/)（再次从您[之前的问题](https://stackoverflow.com/questions/12727840/google-maps-api-v3-active-marker-onclick)修改）

更新：我在您提供的链接上收到一个 javascript 错误：

```
Error: marker[i] is undefined
Source File: http://zslabs.com/jhtwp/wp-content/plugins/busipress/js/map.1349993292.js
Line: 105 
```

105 是这一行：`this.setIcon(marker[i].myActiveIcon);`

这里：

```
 google.maps.event.addListener(marker, "click", function () {
        for (var i = 0; i < gmarkers.length; i++) {
           gmarkers[i].setIcon(gmarkers[i].myDefaultIcon);
        }
        this.setIcon(marker[i].myActiveIcon);

        infowindow.setContent(this.html);
        infowindow.open(map, this);
    }); 
```

我想你想要 this.myActiveIcon。

[jsfiddle 说明了这个概念](http://jsfiddle.net/kV6Ys/55/)（“点”是活动的，没有点是默认的）

# vb.net - 文本框中的日期格式

> ID：12831359
> 
> 赞同：0
> 
> 时间：2012-10-11T02:36:22.370
> 
> 标签：vb.net, numbers, date-format

有人可以帮我格式化吗。在我的文本框中（日期是 10222012）

输出应该是（日期是 10/22/2012）文本应该还在，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:53:08.603

我的头顶上有几种方法。

如果文本来自一个变量，例如：

```
Dim MyText As String = "The date is 10222012" 
```

然后你可以使用 String 函数来获取日期（假设它总是 8 个字符，这可能是一个危险的假设），格式化它并把它放回去：

```
Dim MyDate As String = CType(MyText.Substring(MyText.Length - 8), DateTime).ToString("MM/dd/yyyy")

MyText = MyText.Substring(0, MyText.Length - 8) & MyDate 
```

另一方面，如果日期在一个单独的变量中，比如 DateTime 变量，你可以这样做：

```
Dim MyDateFormatted As String = MyDate.ToString("MM/dd/yyyy") 
```

还有其他方法可以做到这一点。[这里的关键是获取日期并通过DateTime.ToString Method (String)](http://msdn.microsoft.com/en-us/library/zdtaw1bw%28v=vs.100%29.aspx)方法将其转换为您想要的格式，其中括号中的格式字符串告诉您使用什么格式。

**已编辑**

这就是我没有先尝试代码的结果......如果字符串“10222012”未被识别为有效格式，还有另一种方法可以做到这一点：

```
Dim MyText As String = dRecord.Rows(i).Item(iCount).ToString 
Dim MyDate As String = MyText.Substring(MyText.Length - 8)
MyDate  = MyDate.SubString(0, 2) & "/" & MyDate.Substring(2, 2) & "/" & _
          MyDate.Substring(4)
oSheet.Cells(x, iCount - 2) = MyText.Substring(0, _
                              dRecord.Rows(i).Item(iCount).Length - 8) & _
                              MyDate 
```

它有点蛮力和丑陋，但这应该会让你朝着正确的方向前进。您可能能够使用`Insert`（另一个字符串运算符）获得相同的结果，但这可能同样难看。

如果您需要大量进行此转换，我建议将其放入辅助方法中，或者更好的是扩展方法。

**第二次编辑**

您可以很容易地检查空白记录：

```
Dim MyText As String = dRecord.Rows(i).Item(iCount).ToString
If Not String.IsNullOrEmpty(MyText) Then
    ' convert the format here
End If 
```

# java - Java中不兼容的数据类型，数组和整数

> ID：12831361
> 
> 赞同：-1
> 
> 时间：2012-10-11T02:36:44.897
> 
> 标签：java, arrays, sum

我正在尝试获取一个程序，以便它循环并将数组的总和相加。我的代码似乎可以正常工作，但它指出 text[j] in`adding = adding + text[j]`是不兼容的类型（我假设是数据类型）。在代码的前面，我有`int adding = 0;`. 这是错误的代码：

```
for (int j=0;j<=total;j++){
       adding = adding + text[j];
       System.out.println(text[j]);
    } 
```

其中总计是限制因素。如果我放：

```
for (int j=0;j<= total;j++){
       adding = adding + j;
       System.out.println(text[j]);
    } 
```

程序编译但给出 45，这是不正确的。

为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:46:39.703

答案实际上在给出的代码之外。我已将数组设置为 a `String`，而不是`int`应有的 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:47:27.610

如果您的`text[]`is `String[]`or`char[]`顾名思义，那么我相信您正在尝试`text[]`使用后缀`j`or更新元素`adding`，您可以将其写为：

如果是`char[]`那么写

```
 text[j] = (char)(adding + (int)text[j]); 
```

如果是`String[]`那么写

```
 text[j]= text[j]+adding; 
```

按要求。这完全取决于数据类型是`text[]`什么以及您要实现什么？

同样如其中一个答案所建议的那样，如果`total`是数组的长度，则将比较更改`<`为 avoind`ArrayIndexOutOfBoundsException`

您的第二个示例添加`j`到`adding`但打印`text[j]`值，这与添加无关`adding`and `j`。

# drupal-7 - Drupal 7 Forms API - AJAX Forms 错误：检测到非法选择。请联系网站管理员

> ID：12831363
> 
> 赞同：3
> 
> 时间：2012-10-11T02:36:59.343
> 
> 标签：drupal-7, drupal-modules, drupal-forms, drupal-ajax

我设置了一个表单，用户从下拉列表中选择一个项目。选择该项目后，将填充另一个下拉列表。然后根据从第二个下拉列表中选择的值，可能会或可能不会显示字段集。如果显示了字段集，则有一个字段和一个按钮。通过单击按钮，您可以添加同一字段的另一个副本。一旦有多个，也会显示一个删除一个按钮。我从这里得到了代码的基础：http: [//api.drupal.org/api/examples/ajax_example%21ajax_example_graceful_degradation.inc/function/ajax_example_add_more/7](http://api.drupal.org/api/examples/ajax_example%21ajax_example_graceful_degradation.inc/function/ajax_example_add_more/7)

问题是当我第一次单击“添加另一个调查问题”时它可以正常工作并添加一个字段。当我第二次单击它或现在有两个单击删除时，我收到此错误：'已检测到非法选择。请联系网站管理员。'

我究竟做错了什么？

这是我的代码：

```
function touchpoints_addmetric_form($form, &$form_state, $tp_id) {
    $selectedType = isset($form_state['values']['type']) ? $form_state['values']['type'] : FALSE;
    $types = db_query('SELECT * FROM {touchpoints_metric_types}') -> fetchAllKeyed(0, 1);
    $form['#tree'] = TRUE;
    $form['type'] = array(
        '#type' => 'select',
        '#title' => t('Metric Type'),
        '#options' => $types,
        '#required'=>TRUE,
        '#ajax' => array(
            'event' => 'change',
            'wrapper' => 'method-wrapper',
            'callback' => 'touchpoints_method_callback'
        )
    );
    $form['measurementmethod'] = array(
        '#type' => 'select',
        '#title' => t('Measurement Method'),
        '#required'=>TRUE,
        '#prefix' => '<div id="method-wrapper">',
        '#suffix' => '</div>',
        '#options' => _get_methods($selectedType)
    );
    $form['survey'] = array('
        #type' => 'fieldset',
        '#collapsible' => FALSE,
        '#states' => array(
            'visible' => array(
                array(
                    array(':input[name="measurementmethod"]' => array('value' => '5')), 
                    'xor', 
                    array(':input[name="measurementmethod"]' => array('value' => '6')),
                    'xor', 
                    array(':input[name="measurementmethod"]' => array('value' => '7'))
                )
            )
        )
    );
    $form['survey']['contents'] = array(
        '#type' => 'fieldset',
        '#collapsible' => FALSE,
        '#prefix' => '<div id="survey-div">', 
        '#suffix' => '</div>', 
    );
    if (empty($form_state['num_surveys'])) {
        $form_state['num_surveys'] = 1;
    }
    for ($i = 1; $i <= $form_state['num_surveys']; $i++) {
        $form['survey']['contents']['survey_question'][$i] = array(
            '#type' => 'textfield',
            '#title' => t('Survey Question ' . $i),
            '#size' => 70, '#maxlength' => 100, 
        );
    }
    $form['survey']['contents']['addsurvey'] = array(
        '#type' => 'submit',
        '#value' => t('Add Another Survey Question'),
        '#submit' => array('touchpoints_metrics_survey_add_one'),
        '#limit_validation_errors' => array(),
        '#ajax' => array(
            'callback' => 'touchpoints_metrics_survey_callback', 
            'wrapper' => 'survey-div', 
        ), 
    );
    if ($form_state['num_surveys'] > 1) {
        $form['survey']['contents']['removesurvey'] = array(
            '#type' => 'submit',
            '#value' => t('Remove A Survey Question'),
            '#submit' => array('touchpoints_metrics_survey_remove_one'), 
            '#limit_validation_errors' => array(), 
            '#ajax' => array(
                'callback' => 'touchpoints_metrics_survey_callback', 
                'wrapper' => 'survey-div', 
            ), 
        );
    }
    return $form;
}

function _get_methods($selected) {
    if ($selected) {
        $methods = db_query("SELECT * FROM {touchpoints_m_methods} WHERE mt_id=$selected") -> fetchAllKeyed(0, 2);
    } else {
        $methods = array();
    }
    return $methods;
}

function touchpoints_method_callback($form, &$form_state) {
    return $form['measurementmethod'];
}

function touchpoints_metrics_survey_add_one($form, &$form_state) {
    $form_state['num_surveys']++;
    $form_state['rebuild'] = TRUE;
}

function touchpoints_metrics_survey_remove_one($form, &$form_state) {
    if ($form_state['num_surveys'] > 1) {
        $form_state['num_surveys']--;
    }
    $form_state['rebuild'] = TRUE;
}

function touchpoints_metrics_survey_callback($form, &$form_state) {
    return $form['survey']['contents'];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-19T11:56:53.853

实际上，它是 '#validate **d** ' => TRUE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-24T02:16:04.107

我遇到过几次这个错误，这是我发现的：

> 这是 Drupal 的说法“嘿，您尝试使用原始表单定义中未包含的复选框或单选按钮选项提交此表单！这是不允许的。” - 查看更多信息：http://proofgroup.com/blog/2008/jul/debugging_mysterious_illegal_choice_has_been_detected_please_contact_site_administrato#sthash.vDNmqslL.dpuf

而不是自定义代码，也许你应该考虑模块[条件字段](https://drupal.org/project/conditional_fields)

或解决方法：`'#validate' => TRUE` [来源](http://anilmaharjan.com.np/blog/2013/02/an-illegal-choice-has-been-detected-in-drupal-select-field-bypass-validation-for-ajax-loaded-options)

# javascript - 使用 jquery each() 和 jquery 函数制作多个元素

> ID：12831365
> 
> 赞同：0
> 
> 时间：2012-10-11T02:37:25.143
> 
> 标签：javascript, jquery, loops, each, nodes

好吧，我有一个包含多个文本节点的表，我通过 .text() 函数获取并链接到另一个表，其中包含我用作时间线的一行。我尝试输入与正确数据相对应的单个 td 文本值，但我只设法获取循环中的最后一个值，而不是全部获取。这是我的代码：

```
var tHold, divLine, id, dataTitle, dataDescription;

$(".class1").each(function(){
    tHold = $(this);
    $(".class2").each(function(){
        if ($(this).text() == tHold.attr("value")){

            if($('#1').children("div#" + tHold.attr("name")).length == 0){
                dataTitle = '<div class="r">' + $(this).text() + '</div><br/>';
                dataDescription = '<div class="t">' + $(this).parent().children(".x").text() + ': ' + $(this).parent().children(".y").text() + ' (' + $(this).parent().children(".z").text() + ')' + '</div>';
                divLine = $('<div id="' + tHold.attr("name") + '" class="b"  value="' + tHold.attr("value") + '"></div>');
                divLine.append(dataTitle);
                divLine.append(dataDescription);
                $("#1").append(divLine);
            }
            if($('#2').children("div#id" + tHold.attr("name")).length == 0){
                dataTitle = '<div class="r">' + $(this).text() + '</div><br/>';
                dataDescription = '<div class="t">' + $(this).parent().children(".x").text() + ': ' + $(this).parent().children(".y").text() + ' (' + $(this).parent().children(".z").text() + ')' + '</div>';
                divLine = $('<div id="des' + tHold.attr("name") + '" class="c"  value="' + tHold.attr("value") + '"></div>');
                divLine.append(dataTitle);
                divLine.append(dataDescription);
                $("#2").append(divLine);
            }
        }
    });
}); 
```

它已被简化并从整个上下文中删除，但所有重要的都在那里。如何将 dataDescription 设置为具有不同值的多个 div，而不仅仅是我循环的最后一个？

# ruby-on-rails-3 - Heroku 继续使用 gmail 作为我的 smtp 服务器

> ID：12831367
> 
> 赞同：0
> 
> 时间：2012-10-11T02:37:44.750
> 
> 标签：ruby-on-rails-3, heroku, smtp

我曾经在我的 Rails 应用程序中有 gmail_smtp 插件。快到时间了，我换成了山魈。但是 heroku 仍然继续使用 gmail 并搜索我的 gmail 用户名和密码。有人知道如何在 heroku 中改变它吗？这对我来说真的很烦人。

多谢！

# linux - 在 redhat 4.1 中安装 zeromq 时出错

> ID：12831375
> 
> 赞同：1
> 
> 时间：2012-10-11T02:38:49.407
> 
> 标签：linux, redhat, zeromq

我无法`zeromq`在我的机器上安装我的机器是 redhat 4.1 这是错误消息：

```
Making all in src
make[1]: Entering directory `/data/vvlog/zeromq-3.2.0/src'
make  all-am
make[2]: Entering directory `/data/vvlog/zeromq-3.2.0/src'
if /bin/sh ../libtool --tag=CXX --mode=compile g++ -DHAVE_CONFIG_H -I. -I. -I.   -pedantic -Werror -Wall -D_GNU_SOURCE -D_REENTRANT -D_THREAD_SAFE  -DZMQ_FORCE_EPOLL -fvisibility=hidden  -g -O2 -MT libzmq_la-address.lo -MD -MP -MF ".deps/libzmq_la-address.Tpo" -c -o libzmq_la-address.lo `test -f 'address.cpp' || echo './'`address.cpp; \
    then mv -f ".deps/libzmq_la-address.Tpo" ".deps/libzmq_la-address.Plo"; else rm -f ".deps/libzmq_la-address.Tpo"; exit 1; fi
../libtool: line 869: X--tag=CXX: command not found
../libtool: line 902: libtool: ignoring unknown tag : command not found
../libtool: line 869: X--mode=compile: command not found
../libtool: line 1035: *** Warning: inferring the mode of operation is deprecated.: command not found
../libtool: line 1036: *** Future versions of Libtool will require --mode=MODE be specified.: command not found
../libtool: line 1179: Xg++: command not found
../libtool: line 1179: X-DHAVE_CONFIG_H: command not found
../libtool: line 1179: X-I.: command not found
../libtool: line 1179: X-I.: command not found
../libtool: line 1179: X-I.: command not found
../libtool: line 1179: X-pedantic: command not found
../libtool: line 1179: X-Werror: command not found
../libtool: line 1179: X-Wall: command not found
../libtool: line 1179: X-D_GNU_SOURCE: command not found
../libtool: line 1179: X-D_REENTRANT: command not found
../libtool: line 1179: X-D_THREAD_SAFE: command not found
../libtool: line 1179: X-DZMQ_FORCE_EPOLL: command not found
../libtool: line 1179: X-fvisibility=hidden: command not found
../libtool: line 1179: X-g: command not found
../libtool: line 1179: X-O2: command not found
../libtool: line 1179: X-MT: command not found
../libtool: line 1179: Xlibzmq_la-address.lo: command not found
../libtool: line 1179: X-MD: command not found
../libtool: line 1179: X-MP: command not found
../libtool: line 1179: X-MF: command not found
../libtool: line 1179: X.deps/libzmq_la-address.Tpo: No such file or directory
../libtool: line 1179: X-c: command not found
../libtool: line 1231: Xlibzmq_la-address.lo: command not found
../libtool: line 1236: libtool: compile: cannot determine name of library object from `': command not found
make[2]: *** [libzmq_la-address.lo] Error 1
make[2]: Leaving directory `/data/vvlog/zeromq-3.2.0/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/data/vvlog/zeromq-3.2.0/src'
make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:42:54.430

这是一些关于在 redhat 上安装 0MQ的[文档](http://blog.serverdensity.com/building-zeromq-and-pyzmq-on-red-hat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T13:24:01.180

我在自己的 c++ 源代码中遇到了同样的情况。原因是新 libtool 和旧 ltmain.sh 之间的版本兼容性问题。[什么是 ltmain.sh，为什么 automake 说它丢失了？什么是好的自动（make/conf/etc）生成器？](https://stackoverflow.com/questions/2807915/what-is-ltmain-sh-and-why-does-automake-say-it-is-missing-what-is-a-good-auto)页面显示了详细信息以及如何重新生成 ltmain.sh。

# windows-phone-7 - WP7：根据来自另一个 ListBox 的输入填充 ListBox

> ID：12831379
> 
> 赞同：0
> 
> 时间：2012-10-11T02:39:17.183
> 
> 标签：windows-phone-7, listbox, listboxitem, listboxitems

我正在尝试根据另一个 ListBox (ListBox1) 的 selectedItem 将 ListItems 添加到 ListBox (ListBox3) 中。问题是，项目没有添加到列表框中。

这是代码：

```
 private void createlist()
      {
        if (listBox1.SelectedValue.ToString().Equals("EPL"))

        {
            ListBoxItem manchesterunited = new ListBoxItem();
            manchesterunited.Content = "Manchester United";
            listBox3.Items.Add(manchesterunited);
        }
     }

    private void listBox1_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {
        createlist();
    } 
```

createlist() 进行更改并在 ListBox1 的 SelctionChanged() 事件中调用。

C# 和 WP7 编程新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:17:10.540

我认为你的程序没有在 mvvm 结构中运行。

确保你的逻辑是正确的。您可以在
ListBoxItem manchesterunited = new ListBoxItem();行设置断点 确保在 if 代码块中运行这些代码。

在列表框中添加控件的方式是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:36:31.273

在您的视图模型中创建列表`viewmodel`并将其绑定`listbox`到 a 。当用户从中选择项目时，只需使用适当的 List 和 更改 SelectedList 的值。它会完成的。！`list<>``SelectedList``ListBox1``Notify the property changed event`

# opencl - ATI FirePro 上的 PCIe 带宽

> ID：12831381
> 
> 赞同：2
> 
> 时间：2012-10-11T02:39:56.973
> 
> 标签：opencl

我正在尝试测量 ATI FirePro 8750 上的 PCIe 带宽。SDK 中的 amd 应用程序示例 PCIeBandwidth 测量以下传输的带宽：

1.  主机到设备，使用 clEnqueueReadBuffer()。
2.  要托管的设备，使用 clEnqueueWriteBuffer()。

在我的系统（Windows 7，Intel Core2Duo 32 位）上，输出如下所示：

```
Selected Platform Vendor : Advanced Micro Devices, Inc.
Device 0 : ATI RV770
Host to device : 0.412435 GB/s
Device to host : 0.792844 GB/s 
```

此特定卡具有 2 GB DRAM，最大时钟频率为 750 Mhz

1-为什么每个方向的带宽不同？

2-为什么带宽这么小？

另外我知道这种通信是通过 DMA 进行的，所以带宽可能不受 CPU 的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T19:22:06.883

微软研究实验室的这篇[论文](http://research.microsoft.com/pubs/172730/20120625%20UCAA2012_Bittner_Ruf_Final.pdf)给出了为什么 GPU - CPU 之间存在不对称 PCIe 数据传输带宽的一些线索。本文描述了 FPGA 的性能指标——PCIe 上的 GPU 数据传输带宽。它还包括来自 CPU 的指标——PCIe 上的 GPU 数据传输带宽。

引用相关部分

> '还应该注意的是，GPU-CPU 传输本身也表现出某种程度的不对称行为。在 GPU 到 CPU 传输的情况下，GPU 正在启动总线主控写入，GPU 达到最大值 6.18 GByte/Sec。在从 CPU 到 GPU 的相反方向上，GPU 正在启动总线主读取，由此产生的带宽下降到 5.61 GByte/Sec。在我们的观察中，由于协议开销和实现的相对复杂性，对于任何 PCIe 实现，总线主控写入通常比总线主控读取更有效。虽然解决这种不对称的可能方法是通过使用 CPU 启动的总线主控写入来处理 CPU 到 GPU 的方向，但该硬件设施通常在 PC 架构中不可用。'

关于带宽的第二个问题的答案可能是数据传输大小的单位。参见图 2、3、4 和 5。我还在第 1 届 AMD Fusion Conference 上看到了这样的图表。解释是由于协议和设备延迟，数据的 PCIe 传输具有开销。开销对于较小的传输大小更为重要，而对于较大的大小则变得不那么重要。

**你有什么杠杆来控制或提高绩效？**

获得芯片/主板和 GPU 的正确组合是硬件杠杆。具有最大 PCIe 通道数的芯片更好。使用更高规格的 PCIe 协议，PCIe 3.0 优于 PCIe 2.0。所有组件都需要支持更高的标准。

作为程序员控制数据传输大小，是一个非常重要的杠杆。

128K - 256K 字节的传输大小大约占最大带宽的 50%。1M - 2M 字节的传输获得超过 90% 的最大带宽。

# javascript - 创建网页的本地副本

> ID：12831382
> 
> 赞同：2
> 
> 时间：2012-10-11T02:40:07.027
> 
> 标签：javascript, html

客户端是否可以在服务器端请求后存储网页的本地副本，而无需手动保存网页（右键单击+另存为...）？

我有多个客户端显示来自服务器的网页循环。每个页面都有不同的媒体文件，例如图像和 swfs。作为默认缓存机制的替代方案，我希望客户端在从服务器首次加载网页期间，将网页的副本存储到客户端的本地。这样，每次循环加载网页请求时，我都可以减少来自客户端的请求。

每当内容发生变化时，服务器会告诉客户端再次请求页面并覆盖客户端的本地副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:47:52.480

好吧，你可以这样做：

```
localStorage['this_page'] = document.querySelector('html').innerHTML; 
```

当然，这只适用于支持 localStorage 的现代浏览器。没有其他浏览器 API 可以提供存储大量数据的方法。饼干太小了。您可以使用 window.name 作为替代方案，但这更像是一种黑客攻击。

document.querySelector 当然可以用 document.getElementsByTagName('html')[0] 替换，但只要使用 querySelector，因为它在任何地方都支持 localStorage。

# google-apps-script - 谷歌应用脚 本文本框值未传递给 e.parameter.TextBoxName

> ID：12831385
> 
> 赞同：2
> 
> 时间：2012-10-11T02:40:34.857
> 
> 标签：google-apps-script

在下面的代码中，我定义了一个带有名称和 id 的 TextBox。按钮处理程序工作正常，但我无法获得在 TextBox 上输入的值。msgBox 显示，但`e.parameter.matchValue`显示为`undefined`.

*在应用程序的其他部分，我有相同的逻辑，但使用 ListBox 并且工作正常。*

**我究竟做错了什么？**

```
function chooseColumnValueToMatch() {
  var app = UiApp.createApplication().setHeight(150).setWidth(250);
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  var columnName = ScriptProperties.getProperty("columnNameToMatch");

  var h1Line = app.createHTML("<h2>Value to match "+columnName+":</h2>");
  var textPara = app.createHTML("<p>Type the VALUE that the <b>"+columnName+"</b> column must match EXACTLY to send the message.</p>");
  var selectionHandler = app.createServerHandler('chooseColumnValueToMatchSelectionHandler');
  var valueInputBox = app.createTextBox()
      .setTitle("Match value for "+columnName)
      .setName("matchValue")
      .setId("matchValue");
  var submitBtn = app.createButton("Submit", selectionHandler);

  app.add(h1Line)
    .add(textPara)
    .add(valueInputBox)
    .add(submitBtn);
  ss.show(app);
}
function chooseColumnValueToMatchSelectionHandler(e){
  var app = UiApp.getActiveApplication();
  var columnName = ScriptProperties.getProperty("columnNameToMatch");

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var msg = e.parameter.matchValue;

  Browser.msgBox("Value to match "+columnName+" column is:", msg, Browser.Buttons.OK);

  return app;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T05:46:14.047

您必须使用[ServerHandler.addCallbackElement](https://developers.google.com/apps-script/class_serverhandler#addCallbackElement)方法。下面的代码演示了它。方法调用“告诉”GAS 内部，作为参数指向的小部件的值应该传递给处理程序。

如果您有多个小部件，应由处理程序处理，则`addCallbackElement`可以将所有控件放置到面板并仅将面板作为`addCallbackElement`方法参数，而不是调用每个小部件。[本教程第 4.4 点](https://developers.google.com/apps-script/articles/building-sites-app-part1#section4)中的代码显示了这种方式。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var valueInputBox = app.createTextBox()
      .setTitle("Match value for XXX")
      .setName("matchValue")
      .setId("matchValue");
  var selectionHandler = app.createServerHandler('chooseColumnValueToMatchSelectionHandler');
  selectionHandler.addCallbackElement(valueInputBox);
  var submitBtn = app.createButton("Submit", selectionHandler);
  var output = app.createLabel().setId("output"); 
  app.add(valueInputBox).add(submitBtn).add(output);  
  return app;
}

function chooseColumnValueToMatchSelectionHandler(e){
  var app = UiApp.getActiveApplication();
  var output = app.getElementById("output");

  var msg = e.parameter.matchValue;

  output.setText("Value to match XXXX column is: " + msg);

  return app;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:22:55.127

您似乎忘记在处理程序中添加一个 callbackElement

你可以这样尝试：

```
selectionHandler.addCallbackElement(valueInputBox) 
```

在 submitBtn 定义之后

# c# - 从 XNA 4.0 中编译的效果初始化效果类实例

> ID：12831392
> 
> 赞同：1
> 
> 时间：2012-10-11T02:41:33.493
> 
> 标签：c#, xna, xna-4.0, xna-3.0

我想从已经编译到 xnb 的文件中加载效果。

我可以在 XNA 3.0 中使用它

```
Effect (GraphicsDevice, Stream, CompilerOptions, EffectPool) 
```

但我不知道如何在 XNA 4.0 中做到这一点，因为没有这样的构造函数。

任何帮助都感激不尽。

* * *

最后我通过 XNA 4.0 中的新构造函数解决了这个问题：

```
public Effect(GraphicsDevice graphicsDevice, byte[] effectCode); 
```

那是

```
Stream bumpStream = ... //get the file stream
byte[] buffer = new byte[bumpStream.Length];
bumpStream.Read(buffer, 0, buffer.Length);

myFx = new Effect(graphicsDevice, buffer) 
```

完毕！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:40:45.787

如果你想加载一个已经编译成 Xnb 的文件，那很容易。这是一种可以使用 a 的方法`FileStream`：

```
public static Effect FromStream(this Effect e, ContentManager content, FileStream stream)
{
    return content.Load<Effect>(stream.Name);
} 
```

您可能需要进行一些文件路径解析，但它应该可以工作。

当然，您可以跳过整个扩展方法，将代码直接放入您的`Game.cs`文件中。

# xcode - 应用程序突然无法在设备上运行

> ID：12831395
> 
> 赞同：42
> 
> 时间：2012-10-11T02:42:09.453
> 
> 标签：xcode

我一直在我的 ipod 上运行一个我已经开发了一段时间的应用程序，突然间它就无法运行了。我没有更改 xcode 或 macos；我已经删除了派生数据文件夹；我已经重新启动了设备、计算机和 xcode 并进行了清理。

我得到的错误是：“尝试启动 My.app 时无法在 MyDevice 上启动调试服务器”

我的配置文件和设备是绿色的。我不明白我可能会改变什么。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-11T02:43:02.547

重新启动 Xcode 和设备，你应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T08:22:56.887

只需 CMD+shift+K，清理你的项目。完成后，应该可以工作了。至少对我来说。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-11T17:04:07.460

尝试从手机中删除已安装的应用程序。这对我有用，因为上述方法都没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-06T20:27:07.610

我在测试 iOS 测试版时遇到了这个问题。我在设备上更新了 iOS 版本，我不得不重新启动 xcode，然后重新连接到

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-07T05:29:39.090

1.  重启xcode。
2.  从 USB 电缆上拔下 iPhone/iPad（如果使用 USB 电缆连接）。
3.  关闭 wifi 并再次连接（如果您使用的是 wifi 调试）。
4.  清洁项目。
5.  再次运行您的应用程序。

# postgresql - 当名称可以是任何语言时，如何按名称索引 postgres 表？

> ID：12831397
> 
> 赞同：5
> 
> 时间：2012-10-11T02:42:27.723
> 
> 标签：postgresql, localization, indexing, tokenize, string-comparison

我有一个大型的 postgres 位置表（商店、地标等），用户可以通过各种方式进行搜索。当用户想要搜索一个地点的名称时，系统当前会这样做（假设搜索是在咖啡馆上）：

```
lower(location_name) LIKE '%cafe%' 
```

作为查询的一部分。这是非常低效的。禁止如此。我必须让它更快。我试过索引表

```
gin(to_tsvector('simple', location_name)) 
```

并搜索

```
(to_tsvector('simple',location_name) @@ to_tsquery('simple','cafe')) 
```

它工作得很好，并且将搜索时间减少了几个数量级。

但是，位置名称可以是任何语言，包括没有空格分隔的中文等语言。这个新系统找不到任何中文位置，除非我搜索确切的名称，而旧系统可以找到部分名称的匹配项。

所以，我的问题是：我可以让它同时适用于所有语言，还是我走错了路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:21:26.660

如果要优化任意子字符串匹配，一种选择是[使用`pg_tgrm`模块](http://www.postgresql.org/docs/current/static/pgtrgm.html)。添加索引：

```
CREATE INDEX table_location_name_trigrams_key ON table
  USING gin (location_name gin_trgm_ops); 
```

这会将“Simple Cafe”分解为“sim”、“imp”、“mpl”等，并为每行中的每个 trigam 添加一个条目。然后，查询计划器可以自动将此索引用于子字符串模式匹配，包括：

```
SELECT * FROM table WHERE location_name ILIKE '%cafe%'; 
```

此查询将在索引中查找“caf”和“afe”，找到交集，获取这些行，然后根据您的模式检查每一行。（最后的检查是必要的，因为“caf”和“afe”的交集匹配“simple cafe”和“unsafe scaffolding”，而“%cafe%”应该只匹配一个）。随着输入模式变得更长，索引变得更有效，因为它可以排除更多行，但它仍然不如索引整个单词那么有效，所以不要期望性能改进超过`to_tsvector`.

抓住的是，三元组对于三个字符以下的模式根本不起作用。这可能会或可能不会破坏您的应用程序。

* * *

**编辑：**我最初将此添加为评论。

昨晚我大半睡着的时候，我有了另一个想法。创建一个`cjk_chars`函数，该函数接受输入字符串、`regexp_matches`整个 CJK Unicode 范围，并返回任何此类字符的数组，`NULL`如果没有，则返回。在 上添加 GIN 索引`cjk_chars(location_name)`。然后查询：

```
WHERE CASE
  WHEN cjk_chars('query') IS NOT NULL THEN
    cjk_chars(location_name) @> cjk_chars('query')
    AND location_name LIKE '%query%'
  ELSE
    <tsvector/trigrams>
  END 
```

达达，一元！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T04:12:14.540

对于多语言环境中的全文搜索，您需要将每个数据所在的语言与文本本身一起存储。然后，您可以使用 tsearch 函数的语言指定风格来获得正确的词干提取等。

例如给定：

```
CREATE TABLE location(
    location_name text, 
    location_name_language text
); 
```

...加上任何适当的约束，您可能会写：

```
CREATE INDEX location_name_ts_idx
USING gin(to_tsvector(location_name_language, location_name)); 
```

和搜索：

```
SELECT to_tsvector(location_name_language,location_name) @@ to_tsquery('english','cafe'); 
```

无论您做什么，跨语言搜索都会有问题。在实践中，我会使用多种匹配策略：我会将搜索词与配置中的`tsvector`of*和*文本的存储语言进行比较。我可能还会使用 willglynn 建议的基于三元组的方法，然后我会统一显示结果，寻找常用术语。`location_name``simple`

 *您可能会发现 Pg 的全文搜索过于有限，在这种情况下，您可能想查看类似[Lucerne](http://lucene.apache.org/core/) / [Solr](http://lucene.apache.org/solr/)的内容。

请参阅： *[控制全文搜索](http://www.postgresql.org/docs/current/static/textsearch-controls.html)。* [tsearch 字典](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T18:02:15.360

类似于@willglynn 已经发布的内容，我会考虑[**pg_trgm**](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)模块。但最好使用**GiST**索引：

```
CREATE INDEX tbl_location_name_trgm_idx
USING gist(location_name gist_trgm_ops); 
```

`gist_trgm_ops`运算符类通常忽略大小写，并且`ILIKE`与`LIKE`. [引用源代码：](https://github.com/adunstan/postgresql-dev/blob/master/contrib/pg_trgm/trgm.h)

> 注意： IGNORECASE 宏意味着三元组不区分大小写。

我`COLLATE "C"`在这里使用 - 这实际上不是特殊的排序规则（而是字节顺序），因为您的列中显然混合了各种排序规则。排序规则与排序或范围相关，对于基本的相似性搜索，您可以不用它。我会考虑`COLLATE "C"`为您的专栏设置开始。

该索引将为您的第一个简单形式的查询提供支持：

```
SELECT * FROM tbl WHERE location_name ILIKE '%cafe%'; 
```

*   非常快。
*   保留查找部分匹配项的能力。
*   添加模糊搜索功能。
    检查[**`%`**运算符](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#PGTRGM-OP-TABLE)和[`set_limit()`](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#PGTRGM-FUNC-TABLE)。
*   `LIMIT n`GiST 索引对于选择 n 个“最佳”匹配的查询也非常快。您可以添加到上面的查询：

```
ORDER BY location_name <-> 'cafe'
LIMIT 20 
```

`<->` [在此处的手册中](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#PGTRGM-OP-TABLE)阅读有关“距离”运算符的更多信息。

甚至：

```
SELECT *
FROM   tbl
WHERE  location_name ILIKE '%cafe%'        -- exact partial match
OR     location_name %     'cafe'          -- fuzzy match
ORDER  BY 
       (location_name ILIKE 'cafe%') DESC  -- exact beginning first
      ,(location_name ILIKE '%cafe%') DESC -- exact partial match next
      ,(location_name <->   'cafe')        -- then "best" matches
      ,location_name                       -- break remaining ties (collation!)
LIMIT  20; 
```

我在几个应用程序中使用类似的东西以获得（对我而言）令人满意的结果。当然，结合应用多个功能，它会变得有点慢。找到你的甜蜜点...

您可以更进一步，为每种语言创建一个单独的[*部分索引*](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)，并为每种语言使用匹配的排序规则：

```
CREATE INDEX location_name_trgm_idx
USING gist(location_name COLLATE "de_DE" gist_trgm_ops)
WHERE location_name_language = 'German';

-- repeat for each language 
```

**如果**您只想要每个查询的特定语言的结果并且在这种情况下会*非常*快，那只会很有用。*

# iphone - 无法将 safari 上的文件类型与 iphone 应用程序相关联

> ID：12831399
> 
> 赞同：3
> 
> 时间：2012-10-11T02:42:45.733
> 
> 标签：iphone, ios, ipad, safari

我正在制作一个示例应用程序，它可以读取和共享多种文件，包括文档、视频、音频、图像……它最重要的功能之一是与邮件附件和 Safari 相关联。事实上，我确实按照[这里](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application/2781290#2781290)的教程在邮件附件中成功打开了文档，但它在 Safari 上不起作用。我尝试了另一个可以打开文档文件的应用程序，它在 Safari 上运行良好。

这是我的 plist 文件的一部分：

```
 UIFileSharingEnabled

        CFBundleDocumentTypes

                CFBundleTypeIconFiles

                    officedocs-icon50.png
                    officedocs-icon144.png

                CFBundleTypeName
                Office Documents Pro
                LSHandlerRank
                Owner
                CFBundleTypeRole
                Viewer
                LSItemContentTypes

                    public.plain-text
                    public.utf8-plain-text 
                    com.apple.traditional-mac-​plain-text
                    public.rtf
                    com.apple.quicktime-movie (kUTTypeQuickTimeMovie)
                    public.xml
                    public.audio
                    public.movie
                    public.tiff
                    public.image
                    com.microsoft.word.doc
                    com.microsoft.word.docx
                    com.microsoft.excel.xls
                    com.microsoft.excel.xlsx
                    com.adobe.pdf
                    com.microsoft.powerpoint.​ppt
                    com.microsoft.powerpoint.​pptx
                    public.presentation
                    com.apple.keynote.key 
```

# c - 有什么好的算法可以保持网络中多个文件的一致性？

> ID：12831403
> 
> 赞同：2
> 
> 时间：2012-10-11T02:42:58.250
> 
> 标签：c, replication, consistency

什么是保持多个文件一致性的好算法？

这是一个学校项目。我必须在 C 中实现，跨网络进行一些复制。

我有2台服务器，

**服务器 A1 服务器 A2**

两台服务器都有自己的名为“data.txt”的文件

如果我给其中一个写东西，我需要更新另一个。

我还有另一个场景，有 3 个服务器。

**服务器 B1 服务器 B2 服务器 B3**

我需要这些做几乎相同的事情。

虽然这很容易实现。如果一台或两台服务器宕机，当它们重新启动时，它们将不得不自我更新。

我确信有一些算法可以有效地解决这个问题。我知道我想要什么，但我只是不知道我在寻找什么！

有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:06:03.897

这里的基本问题被称为“ [CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)”，它定义了分布式系统可以具有的三个属性：

*   一致性：从系统中读取数据总是返回最新的数据。
*   可用性：每个响应要么成功要么失败（不只是一直等到事情恢复）
*   分区容错：系统可以在其服务器无法相互通信时运行（服务器停机是这种情况的一种特殊情况）

CAP 定理指出你只能拥有其中的两个。如果您的系统是一致的并且是分区容错的，那么它就会失去可用性条件——您可能必须等待分区恢复，然后才能得到响应。如果你有一致性和可用性，当有一个分区或者足够多的服务器停机时，你就会有停机时间。如果您具有可用性和分区容错性，您可能会读取过时的数据，或者必须处理冲突的写入。

请注意，这在读取和写入之间分别适用 - 您可以使用可用和分区容忍系统进行读取，但可以使用一致和可用系统进行写入。这基本上是一个主从系统；在分区中，写入可能会失败（如果它们位于分区的错误一侧），但读取会起作用（尽管它们可能会返回陈旧的数据）。

因此，如果您希望读取可用且分区容错，一个简单的选择是仅将一台主机指定为唯一可以执行写入的主机，并从中同步（例如，使用 cron 脚本中的 rsync 或其他东西 - 在您的 C项目，您只需定期使用一些简单的网络代码复制文件，并在修改后进行额外的复制）。

但是，如果您需要写入的分区容差，那就更复杂了。您可以让两台无法相互通信的服务器都进行写入，然后必须弄清楚哪些数据会胜出。这基本上意味着您需要在同步时比较两个版本并决定哪个版本获胜。这可以像“让最高的时间戳获胜”一样简单，或者您可以使用[Dynamo](http://db.cs.pitt.edu/courses/cs3551/11-1/handouts/10-1.1.1.115.1568.pdf)中的矢量时钟来实现更复杂的策略——这在此处是否合适取决于您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:52:27.180

查看[rsync](http://en.wikipedia.org/wiki/Rsync)以及[Dropbox](http://en.wikipedia.org/wiki/DropBox#Technology)的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:50:50.553

每次对服务器 A 进行写入时，派生一个进程以将相同的内容写入服务器 B。这样，对服务器 A 的所有写入都将复制到服务器 B。如果您有多个服务器，则使分叉的进程写入所有服务器备份服务器。

# python - Python MySQLdb：查询参数作为命名字典

> ID：12831408
> 
> 赞同：11
> 
> 时间：2012-10-11T02:43:35.520
> 
> 标签：python, mysql-python

我想将查询参数作为命名字典传递给`cursor.execute()`方法，以便它们从 SQL 注入中**逃脱。**`MySQLdb`

 **你能解释为什么这会给出`KeyError`：

```
>>> c.execute('select id from users where username=%(user)s', {'user':'bob',})
KeyError: 'user' 
```

MySQLdb 手册[http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)说：

> 参数样式
> 
> 字符串常量，说明接口期望的参数标记格式的类型。设置为`'format'`= ANSI C printf 格式代码，例如`'...WHERE name=%s'`. 如果映射对象用于`conn.execute()`，则接口实际使用`'pyformat'`= Python 扩展格式代码，例如`'...WHERE name=%(name)s'`。但是，API 目前不允许在 paramstyle 中指定一种以上的样式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-29T15:02:18.943

[MySQLdb](https://mysqlclient.readthedocs.io/user_guide.html#mysqldb)允许字典作为查询参数。[此响应](https://stackoverflow.com/a/7929842/1171280)显示了所有不同的方法。您只需要提供一个序列作为这样的参数（元组，字典......）作为“执行”的第二个参数。不要将您的查询格式化为“执行”方法的一个参数，否则您可能会受到 SQL 注入攻击。看：

```
"SELECT * FROM users WHERE username = '%s'" % (user) 
```

想想如果`user`等于一个字符串会发生什么：

```
peter';DROP TABLE users;SELECT * from users where ''=' 
```

另一种方式是安全的，因为它允许 MySQLdb 库处理必要的检查。

我不知道出了什么问题，因为您的查询对我来说很好：

```
# Connect to db
# Open a cursor
stmt = "SELECT * FROM users WHERE username = %(user)s"
cursor.execute(stmt, {"user": "bob"})
user = cursor.fetchone()
print user

{'username': 'bob', 'alias': 'bobby', 'avatar': 'default', 'fullname': 'bob'} 
```

你能给我们更多的信息吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T03:00:00.730

您粘贴的文档中的行可能会回答您的问题：

> 参数占位符只能用于插入列值。**它们不能用于 SQL 的其他部分，例如表名、语句等。****

# android - 如何在android上实现对按钮的手势？

> ID：12831409
> 
> 赞同：0
> 
> 时间：2012-10-11T02:43:39.787
> 
> 标签：android, gesture

我有一个按钮（button1）和两个声音（sound1，sound2），我想对这个按钮实现一个手势。如果单击 Button1，则声音为 sound1，但如果手势触摸 Button1，则声音为 sound2。为了处理声音，我使用了 SoundManager 类。处理触摸我使用多点触控类。

```
public class MyActivity extends MultiTouch {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myactivity);

    SoundManager.getInstance();
    SoundManager.initSounds(this);
    SoundManager.loadSounds();

    Button Button1 = (Button)findViewById(R.id.button1);
    Button1.setOnTouchListener(this);
    Button1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            SoundManager.playSound(1, 1);
        }
    });
     }

 public void onDestroy()
    {
        super.onDestroy();
        SoundManager.cleanup();
    } 
```

}

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-17T08:58:38.373

例如，您可以使用 GestureListener ( [https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#5307216038506006379](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#5307216038506006379) ) 并为您的按钮处理不同的事件或手势类型（触摸、点击、滑动...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T06:50:21.047

点击和触摸没有太大区别。但是，如果您想同时实现这两种功能，则必须制作一个技巧才能使其正常工作。

对于系统而言，如果您想“点击”或“触摸”它，很难决定将手指放在按钮上。为了控制这个，你可以得到时间，按钮被点击/触摸/无论如何......

例如：如果您单击/触摸/开始计数的任何按钮，如果您停止单击/触摸/whateevring，则停止计数。之后很容易： if(time < 1s) else

请注意，最好使用具有相同代码的 Click-Listener 和 TouchListener 并使用计数内容来决定。

我已经实现了它，它工作得很好！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-26T11:11:27.227

动态创建按钮会导致问题。但是如果在你的 xml 文件中创建按钮然后设置

# mysql - 用户使用 php mysql 确定排序或排序

> ID：12831411
> 
> 赞同：1
> 
> 时间：2012-10-11T02:43:54.093
> 
> 标签：mysql, sorting

将订单分配给 mysql 表行的最佳方法是什么？如果我有 1 到 5 行并且我想删除 4，我怎样才能使 5 成为新的 4？如果我将 3 设为新的 1，我需要将 1 添加到其他每一行。可能有 1 或 2 行或一百行。

有没有比手动编程每个意外事件更简单的方法？

提前致谢。

附加：我有一个界面，我可以在其中添加包供客户查看。它们按 id 升序自动排序。我可以按价格、包装名称或其他方式重新订购它们，但我想不时根据自己的喜好任意订购它们。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:00:47.463

假设您的数据库中有一个唯一`order_column`列：

**在位置 x 添加新行：**

*   锁定表
*   更新 position >= x 的所有行并加 1
*   然后在位置 x 插入新行
*   解锁表

**要交换位置 x 和 y：**

*   `UPDATE table SET x=(@temp:=x), x = y, y = @temp;`

[（来源）](http://beerpla.net/2009/02/17/swapping-column-values-in-mysql/)

**要删除位置 x 处的行：**

*   锁定表
*   删除位置 x 处的行
*   更新所有位置 > x 的行并减去 1
*   解锁表

**显示数据：**
仅`ORDER BY`按`order_column`列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:53:32.480

排序的基本方法通常相当于按字母或数字对特定列进行排序。或者，如果您需要的订单无法根据您拥有的数据创建，那么您需要专门添加一列以进行排序，然后创建一个界面来填充数据。听起来你需要稍后做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:57:11.263

除非我完全误解了这个问题：

不理会表格，仅用于在ing 行时`ORDER BY`确定排序。`SELECT`

# c# - 在这种情况下如何将信息从索引传递给视图 - MVC3

> ID：12831413
> 
> 赞同：0
> 
> 时间：2012-10-11T02:44:13.040
> 
> 标签：c#, asp.net-mvc-3

我写了以下代码：

```
public ActionResult Index()
        {                            
            var folders = Directory.GetDirectories(Server.MapPath("~/Content/themes/base/songs"));

            foreach (var folder in folders)
            {
                var movieName = new DirectoryInfo(folder).Name;
                string[] files = Directory.GetFiles(folder);
                string img = string.Empty;
                List<string> song = new List<string>();
                foreach (var file in files)
                {
                    if (Path.GetExtension(file) == ".jpg" ||
                        Path.GetExtension(file) == ".png")
                    {
                        img = Path.Combine(Server.MapPath("~/Content/themes/base/songs"), file);
                    }
                    else 
                    {
                        song.Add(Path.Combine(Server.MapPath("~/Content/themes/base/songs"), file));
                    }
                }
            }
            return View();
        } 
```

我想要做的是传递 20 个带有电影图像的电影名称，每部电影都有大约 4 或 5 首歌曲应该显示在它下面。我已经想出了如何捕获上面的所有这些信息，但我不确定如何将其传递给 Display。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:00:41.573

我猜你应该在你的应用程序中添加一些类。例如 Movie 和 MovieSong，你的 Movie 类应该有类似 IList Images 的东西。然后，您可以轻松地将电影传递给您的视图。

我不确定这段代码是否有效，但你可以尝试这样的事情：

```
public ActionResult Index()
{   
    var movies = new List<Movie>();

    var songsPath = Server.MapPath("~/Content/themes/base/songs");
    var folders = Directory.GetDirectories(songsPath);

    foreach (var folder in folders)
    {
        Movie movie = new Movie();
        movie.MovieName = new DirectoryInfo(folder).Name

        string[] files = Directory.GetFiles(folder);

        foreach (var file in files)
        {
            if (Path.GetExtension(file) == ".jpg" ||
                Path.GetExtension(file) == ".png")
            {
                movie.Images.Add(Path.Combine(songsPath, file));
            }
            else 
            {
                movie.Songs.Add(Path.Combine(songsPath, file));
            }
        }

        movies.add(movie);
    }
    return View(movies);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:58:36.607

**Q1。我不知道如何将它传递给显示**

A. 您需要为此使用 View Model，下面是我为此准备的 ViewModel。

```
public class Movie
{
    public string Name;
    public string ImagePath;
    ....
    ....
    //Add more as per your requirement
} 
```

将您拥有的所有数据推送到这个准备好的模型中。

**Q2。我想做的是传递 20 个电影名称和电影图像，每部电影都有大约 4 或 5 首歌曲应该显示在它下面**

A. 现在您拥有的是电影集合，您需要将此 Movie 类的列表传递给模型。

```
public ActionResult Index()
{   
    var movies = new List<Movie>();

    // populate the data

    return View(movies);
} 
```

**在视图中显示**

```
@model ProjectName.Models.List<Movies>

@foreach(var item in Model)
{
    <h1>Movie Name : </h1> @item.Name
    ....
    .... //etc etc
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:56:34.193

您应该填充模型对象...并将其传递到返回行：

```
var theModel = new MyModel();
...
//All the loading model info

return View(theModel) 
```

在您的视图中，您需要在顶部设置一行，如下所示：

```
@model YourProject.MyModel 
```

然后，您对对象进行循环`@Model`。

# apache - 就好像特定 URL 上没有 Apache 服务器一样

> ID：12831414
> 
> 赞同：0
> 
> 时间：2012-10-11T02:44:30.227
> 
> 标签：apache

当机器上确实没有安装网络服务器，并且用户在网络浏览器中输入机器的 IP 地址或 FQDN 时，用户会从网络浏览器收到真正的“无法连接到服务器”消息。

但是，在安装 Apache Web 服务器后，直接 IP 地址和 FQDN（即 archimedes.example.com）现在将显示默认的“It works！”。页。如何使我的服务器表现得好像这些地方没有服务器（对于 IP 和 FQDN）？

请注意，404 错误不符合条件，因为这表明 Web 服务器可用。

这甚至可能首先做到吗？

这样做的目的是，我只希望我的常规网站，比如真正的网站.com，真正应该在这个服务器上被识别。所有其他真正与任何网站都没有连接的“默认”地址（IP 地址和 FQDN）应该就像一开始就没有 Web 服务器一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:48:28.033

不，这是不可能的，因为要获取浏览器用于请求的主机名，浏览器首先必须成功连接并在请求中发送。到那个时候，你就不能真正拒绝连接了；你能做的最好的就是关闭它们，这将显示为连接重置错误。

# haskell - 用于列表的 Haskell 文件夹

> ID：12831416
> 
> 赞同：2
> 
> 时间：2012-10-11T02:44:44.783
> 
> 标签：haskell

给定以下示例

```
foldr(\ x y -> ........ 
```

如果输入是一个列表，例如 [1,2,3]

什么是x，什么是y？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T02:47:52.630

让我们看一下 的类型`foldr`。

```
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

由于您提供了使用`x`and的函数`y`，因此您可以从类型中看到 x 将是列表 ( `[1,2,3]`) 中的值，并且 y 必须是累加器值，您使用第二个参数将其初始化为`foldr`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T07:03:12.730

的定义`foldr`是

```
foldr f z []     = z
foldr f z (x:xs) = f x (foldr f z xs) 
```

您可以直接在示例中应用它：

```
foldr (\x y -> foo x y) z [1,2,3]
=
(\x y -> foo x y) 1 (foldr (\x y -> foo x y) z [2,3])
=
foo 1 (foldr (\x y -> foo x y) z [2,3]) 
```

`x`也是如此。`1`_ `y`_`foldr (\x y ...) z [2,3])`

一般来说，您可以认为将列表中的`foldr f z`每个替换为，以及替换为。所以= (因为= .`(:)``f``[]``z``foldr f z [a,b,c,d]``f a (f b (f c (f d z)))``[a,b,c,d]``(:) a ((:) b ((:) c ((:) d [])))`

# regex - 如何在grep中为每个文件匹配一次？

> ID：12831417
> 
> 赞同：66
> 
> 时间：2012-10-11T02:44:51.633
> 
> 标签：regex, perl, shell, unix, grep

是否有任何 grep 选项可以让我控制匹配的总数，但在每个文件的第一次匹配时停止？

例子：

如果我这样做，`grep -ri --include '*.coffee' 're' .`我会得到：

```
./app.coffee:express = require 'express'
./app.coffee:passport = require 'passport'
./app.coffee:BrowserIDStrategy = require('passport-browserid').Strategy
./app.coffee:app = express()
./config.coffee:    session_secret: 'nyan cat' 
```

如果我这样做`grep -ri -m2 --include '*.coffee' 're' .`，我会得到这个：

```
./app.coffee:config = require './config'
./app.coffee:passport = require 'passport' 
```

但是，我真正想要的是这个输出：

```
./app.coffee:express = require 'express'
./config.coffee:    session_secret: 'nyan cat' 
```

这样做`-m1`不起作用，因为我得到了这个`grep -ri -m1 --include '*.coffee' 're' .`

```
./app.coffee:express = require 'express' 
```

尝试不使用 grep 例如这`find . -name '*.coffee' -exec awk '/re/ {print;exit}' {} \;`产生了：

```
config = require './config'
    session_secret: 'nyan cat' 
```

**更新：如下所述，GNU grep`-m`选项将每个文件视为计数，而`-m`对于 BSD grep 将其视为全局匹配计数**

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-03-25T10:50:27.747

因此，使用`grep`，您只需要选项[`-l, --files-with-matches`](https://www.gnu.org/software/grep/manual/grep.html#index-_002d_002dfiles_002dwith_002dmatches)。

所有关于`find`,`awk`或 shell 脚本的答案都与问题无关。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-11T02:53:37.227

我认为你可以做类似的事情

```
grep -ri -m1 --include '*.coffee' 're' . | head -n 2 
```

例如从每个文件中选择第一个匹配项，最多选择两个匹配项。

请注意，这需要您`grep`将其`-m`视为每个文件的匹配限制；GNU`grep`确实这样做了，但 BSD`grep`显然将其视为全局匹配限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T03:11:22.383

我会这样做`awk`。

```
find . -name \*.coffee -exec awk '/re/ {print FILENAME ":" $0;exit}' {} \; 
```

如果你不需要递归，你可以用 awk 来做：

```
awk '/re/ {print FILENAME ":" $0;nextfile}' *.coffee 
```

或者，如果您使用的是足够电流的 bash，则可以使用 globstar：

```
shopt -s globstar
awk '/re/ {print FILENAME ":" $0;nextfile}' **/*.coffee 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T03:38:57.670

使用查找和 xargs。找到每个 .coffee 文件并对每个文件执行 -m1 grep

```
find . -print0 -name '*.coffee'|xargs -0 grep -m1 -ri 're' 
```

没有 -m1 的测试

```
linux# find . -name '*.txt'|xargs grep -ri 'oyss'
./test1.txt:oyss
./test1.txt:oyss1
./test1.txt:oyss2
./test2.txt:oyss1
./test2.txt:oyss2
./test2.txt:oyss3 
```

添加-m1

```
linux# find . -name '*.txt'|xargs grep -m1 -ri 'oyss'
./test1.txt:oyss
./test2.txt:oyss1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-11T04:56:17.507

`find . -name \*.coffee -exec grep -m1 -i 're' {} \;`

find 的 -exec 选项为每个匹配的文件运行一次命令（除非您使用`+`而不是`\;`，这使得它的行为类似于 xargs）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T03:37:34.813

你可以在 perl 中轻松地做到这一点，而且没有混乱的跨平台问题！

```
use strict;
use warnings;
use autodie;

my $match = shift;

# Compile the match so it will run faster
my $match_re = qr{$match};

FILES: for my $file (@ARGV) {
    open my $fh, "<", $file;

    FILE: while(my $line = <$fh>) {
        chomp $line;

        if( $line =~ $match_re ) {
            print "$file: $line\n";
            last FILE;
        }
    }
} 
```

唯一的区别是你必须使用 Perl 风格的正则表达式而不是 GNU 风格。 [他们没有太大的不同](http://www.regular-expressions.info/refflavors.html)。

您可以使用[File::Find](https://metacpan.org/module/File%3a%3aFind)在 Perl 中执行递归部分，或使用`find`feed it 文件。

```
find /some/path -name '*.coffee' -print0 | xargs -0 perl /path/to/your/program 
```

# ruby-on-rails - 设计，如何覆盖 send_confirmation_instructions

> ID：12831419
> 
> 赞同：7
> 
> 时间：2012-10-11T02:44:54.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在尝试覆盖方法“send_confirmation_instructions”，如下所示：

[http://trackingrails.com/posts/devise-send-confirmation-mail-manually-or-delay-them](http://trackingrails.com/posts/devise-send-confirmation-mail-manually-or-delay-them)

和：

```
def send_confirmation_instructions
    generate_confirmation_token! if self.confirmation_token.nil?
    ::Devise.mailer.delay.confirmation_instructions(self)
end 
```

这似乎不再适用于最新版本的设计。设计文档展示了如何覆盖控制器而不是模型。关于如何覆盖设计模型的任何建议？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T02:59:21.880

当你设置 Devise 时，你告诉它它正在使用哪个模型（例如用户）；然后它的许多/大部分方法适用于该类。所以这就是你想要覆盖东西的地方。

`lib/devise/models/authenticatable.rb`如果我没看错的话，这是来自设计代码的评论，它几乎准确地描述了你想要做什么。

```
 # This is an internal method called every time Devise needs
  # to send a notification/mail. This can be overriden if you
  # need to customize the e-mail delivery logic. For instance,
  # if you are using a queue to deliver e-mails (delayed job,
  # sidekiq, resque, etc), you must add the delivery to the queue
  # just after the transaction was committed. To achieve this,
  # you can override send_devise_notification to store the
  # deliveries until the after_commit callback is triggered:
  #
  #     class User
  #       devise :database_authenticatable, :confirmable
  #
  #       after_commit :send_pending_notifications
  #
  #       protected
  #
  #       def send_devise_notification(notification)
  #         pending_notifications << notification
  #       end
  #
  #       def send_pending_notifications
  #         pending_notifications.each do |n|
  #           devise_mailer.send(n, self).deliver
  #         end
  #       end
  #
  #       def pending_notifications
  #         @pending_notifications ||= []
  #       end
  #     end
  #
  def send_devise_notification(notification)
    devise_mailer.send(notification, self).deliver
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:06:55.167

为什么不使用[设计异步](https://github.com/mhfs/devise-async)？

```
Usage

Devise >= 2.1.1

Include Devise::Async::Model to your Devise model

class User < ActiveRecord::Base
  devise :database_authenticatable, :confirmable # etc ...

  include Devise::Async::Model # should be below call to `devise`
end

Devise < 2.1.1

Set Devise::Async::Proxy as Devise's mailer in config/initializers/devise.rb:

# Configure the class responsible to send e-mails.
config.mailer = "Devise::Async::Proxy"

All

Set your queuing backend by creating config/initializers/devise_async.rb:

# Supported options: :resque, :sidekiq, :delayed_job
Devise::Async.backend = :resque 
```

# azure - 使用 Azure 保存 XML 文件

> ID：12831421
> 
> 赞同：3
> 
> 时间：2012-10-11T02:45:35.953
> 
> 标签：azure

我有一个 XML 文件保存在我的本地机器（Windows 8）上。

我想允许应用程序将该 XML 推送到 Azure。然后我还需要能够将其作为同步过程调用。

我不确定我需要什么服务，以及 Azure 是否会提供它。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:14:37.473

我建议您使用 Azure 存储 Blob。将 XML 文件作为 BLOB 推送到 Azure 存储 Blob 中，您将获得/拥有访问该文件的 URL。

# iphone - 如何从 CGRectMake 设置 UIView 的框架？

> ID：12831422
> 
> 赞同：0
> 
> 时间：2012-10-11T02:45:40.597
> 
> 标签：iphone, objective-c, ios, cgrectmake

我是 iOS 开发的新手，但最近参加了广泛的速成课程（BNR 指导 iOS 编程）。我正在以模态方式向应用程序添加视图。我目前没有 View Controller，所以我的 AppDelegate 的`application:didFinishLaunchingWithOptions`方法如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    MyUIView *map = [[MapSurface alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    //this one does not work: MyUIView *map = [[MapSurface alloc] initWithFrame:CGRectMake(0, 0, 256, 256)];
    [map setBackgroundColor:[UIColor grayColor]];
    [[self window] addSubview:map];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

视图加载后，我调用添加子视图，但无法使用`CGRectMake`. 它不会出现在屏幕上。我发现唯一有用的是使用屏幕尺寸，但这不是我想要的。这是添加此子视图的代码：

```
UIImage *image = [[UIImage alloc] initWithCGImage:img];//img is a CGImageRef
UIImageView *view = [[UIImageView alloc] initWithImage:image];
CGRect b = CGRectMake(0, 0, 256, 256);
//[view setFrame:b];//nothing shows on screen
//[view setBounds:b];//nothing shows on screen
//[view setBounds:[[UIScreen mainScreen] bounds]];//shows the tan area in the graphic below
[view setFrame:[[UIScreen mainScreen] bounds]];//fills the screen
[map addSubView:view];
CGImageRelease(img); 
```

![棕褐色区域甚至没有填满屏幕！](../Images/3b4e751a9e78ae09bc258211abb12b2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:22:36.690

我正在设置`bounds`属性，而我应该设置`frame`. 进行此更改解决了该问题。

# objective-c - 块中块导致自我保留，__block 不起作用

> ID：12831423
> 
> 赞同：0
> 
> 时间：2012-10-11T02:45:43.977
> 
> 标签：objective-c, ios, block

补充：当我在函数内复制块时出现问题：[块复制]

我已经在使用 __block 来避免保留自我。__block typeof(self) bself = self;

但是，当这个块中有另一个块，并且它使用 bself 时，self 仍然会被保留。

如下面的代码所示，第一个 bself 不会像预期的那样保留 self。然而，第二个自我将保留自我。

```
 __block typeof(self) bself = self;

            [layer start:param1
                  completeHanlder:^{
                      bself.xx = localxx;

                      dispatch_async(dispatch_get_main_queue(), ^(void) {
                          ... ...
                          [bself something];
                      });
                  }
             ]; 
```

有人知道背后的原因吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-26T11:59:09.647

你做错了，但概念是对的，这里是错误：

__堵塞

这用于在您的块中提供强引用。例如，您可以在块之外更改值。

正确的方法是使用 __weak 从您的实例接收弱引用并防止像这样的强循环引用：

```
 __weak typeof(self) bself = self; 
```

而且因为您创建的 __block 保留和强引用:)

# php - PHP/MySQL 结果处理多条记录

> ID：12831434
> 
> 赞同：0
> 
> 时间：2012-10-11T02:47:07.293
> 
> 标签：php, mysql

我目前正在构建一个每月处理一次客户帐户的支付模块。我有一个查询，它获取给定月份的所有客户付款项目，对金额求和，然后将数据发送到支付网关。这很好用，我收到银行的回复确认是或否。如果是，那么我需要使用发票编号更新请求中的所有项目。我正在使用 while 循环获得总和，这是在发送请求之前执行的。网关只能处理一个请求，我不想为每个请求循环遍历每个发票项目，我宁愿对所有未完成的发票项目执行一个请求。

一些代码是：

```
$get_payment_items_query = mysql_query("SELECT * FROM tbl_invoice_item WHERE billing_cycle = date");

while($get_payment_items_result = mysql_fetch_assoc($get_payment_items_query)){
    $invoice_amount = $invoice_amount + $get_payment_items_result['payment_amount'];
} 
```

然后稍后在我从银行收到回复后，我将记录添加到发票表并获取发票 ID，然后执行以下操作：

```
$update_payment_item_query = mysql_query("UPDATE tbl_invoice_item SET status = '" . PAYMENTCOMPLETE . "', invoice_id = '$invoice_id' WHERE invoice_item_id = '" . $get_payment_items_result['invoice_item_id'] . "'"); 
```

这只会更新一条记录，因为更新查询在 while 循环之外。我知道有一种方法可以将记录标识符存储在字符串/数组中并执行单个更新查询，但我真的不知道此类名称的名称，因此无法找到示例。

我希望这是有道理的，但这里有更多细节。

有 5 个项目准备开票。我得到了 5 个项目的总金额。然后，我向支付网关发出一个请求，以收取 5 件商品的费用。银行回复是或否。如果是，我会为付款生成一个发票 ID。然后，我需要使用新创建的发票 ID 更新这 5 个项目。在单个查询中更新 5 个项目是我卡住的地方。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:19:07.650

找到了解决方案。我正在使用 WHERE IN 子句。

在 while 循环中，我创建一个变量来保存需要更新的项目

```
$invoice_item_id .= $get_payment_items_result['invoice_item_id'] . ','; 
```

然后我使用 substring_replace 删除最后一个逗号，然后在我使用的更新查询中

```
WHERE invoice_item_id IN (" . $invoice_item_array . ") 
```

似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:56:46.847

我不知道我是否正确理解了您的问题，但您可以在 where 中使用子查询。在第二个查询的位置使用第一个查询：

WHERE invoice_item_id IN (SELECT invoice_item_id FROM tbl_invoice_item WHERE billing_cycle = date)

# python - 文本文件数据解析行并输出为列

> ID：12831438
> 
> 赞同：8
> 
> 时间：2012-10-11T02:47:17.463
> 
> 标签：python, bash, parsing, scripting

我正在尝试解析测试文件。该文件具有以下格式的用户名、地址和电话：

```
Name: John Doe1
address : somewhere
phone: 123-123-1234

Name: John Doe2
address : somewhere
phone: 123-123-1233

Name: John Doe3
address : somewhere
phone: 123-123-1232 
```

仅适用于近 10k 用户:) 我想做的是将这些行转换为列，例如：

```
Name: John Doe1                address : somewhere          phone: 123-123-1234
Name: John Doe2                address : somewhere          phone: 123-123-1233
Name: John Doe3                address : somewhere          phone: 123-123-1232 
```

我更愿意在其中执行此操作，`bash`但如果您知道如何在 python 中执行此操作也很棒，那么包含此信息的文件位于 /root/docs/information.xml 中。任何提示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T03:00:00.933

一种方法`GNU awk`：

```
awk 'BEGIN { FS="\n"; RS=""; OFS="\t\t" } { print $1, $2, $3 }' file.txt 
```

结果：

```
Name: John Doe1     address : somewhere     phone: 123-123-1234
Name: John Doe2     address : somewhere     phone: 123-123-1233
Name: John Doe3     address : somewhere     phone: 123-123-1232 
```

请注意，我已将输出文件分隔符 ( `OFS`) 设置为两个制表符 ( `\t\t`)。您可以将其更改为您喜欢的任何字符或字符集。HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T03:02:17.933

用一个短`Perl`的单线：

```
$ perl -ne 'END{print "\n"}chomp; /^$/ ? print "\n" : print "$_\t\t"' file.txt 
```

**输出**

```
Name: John Doe1         address : somewhere             phone: 123-123-1234
Name: John Doe2         address : somewhere             phone: 123-123-1233
Name: John Doe3         address : somewhere             phone: 123-123-1232 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T03:04:06.337

使用粘贴，我们可以加入文件中的行：

```
$ paste -s -d"\t\t\t\n" file
Name: John Doe1 address : somewhere     phone: 123-123-1234
Name: John Doe2 address : somewhere     phone: 123-123-1233
Name: John Doe3 address : somewhere     phone: 123-123-1232 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T03:02:57.907

这似乎基本上可以满足您的要求：

```
information = 'information'  # file path

with open(information, 'rt') as input:
    data = input.read()

data = data.split('\n\n')

for group in data:
    print group.replace('\n', '     ') 
```

输出：

```
Name: John Doe1     address : somewhere     phone: 123-123-1234
Name: John Doe2     address : somewhere     phone: 123-123-1233
Name: John Doe3     address : somewhere     phone: 123-123-1232 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T03:06:58.063

我知道你没有提到 awk，但它很好地解决了你的问题：

```
awk 'BEGIN {RS="";FS="\n"} {print $1,$2,$3}' data.txt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T16:44:04.857

这里的大多数解决方案只是重新格式化您正在阅读的文件中的数据。也许这就是你想要的。

如果您确实要解析数据，请将其放入数据结构中。

Python中的这个例子：

```
data="""\
Name: John Doe2
address : 123 Main St, Los Angeles, CA 95002
phone: 213-123-1234

Name: John Doe1
address : 145 Pearl St, La Jolla, CA 92013
phone: 858-123-1233

Name: Billy Bob Doe3
address : 454 Heartland St, Mobile, AL 00103
phone: 205-123-1232""".split('\n\n')      # just a fill-in for your file
                                          # you would use `with open(file) as data:`

addr={}
w0,w1,w2=0,0,0             # these keep track of the max width of the field 
for line in data:
    fields=[e.split(':')[1].strip() for e in [f for f in line.split('\n')]]
    nam=fields[0].split()
    name=nam[-1]+', '+' '.join(nam[0:-1])
    addr[(name,fields[2])]=fields
    w0,w1,w2=[max(t) for t in zip(map(len,fields),(w0,w1,w2))] 
```

现在您可以自由排序、更改格式、放入数据库等。

这将使用该数据打印您的格式，并排序：

```
for add in sorted(addr.keys()):
    print 'Name: {0:{w0}} Address: {1:{w1}} phone: {2:{w2}}'.format(*addr[add],w0=w0,w1=w1,w2=w2) 
```

印刷：

```
Name: John Doe1      Address: 145 Pearl St, La Jolla, CA 92013   phone: 858-123-1233
Name: John Doe2      Address: 123 Main St, Los Angeles, CA 95002 phone: 213-123-1234
Name: Billy Bob Doe3 Address: 454 Heartland St, Mobile, AL 00103 phone: 205-123-1232 
```

这是按姓氏排序的，字典键中使用的名字。

现在按区号排序打印它：

```
for add in sorted(addr.keys(),key=lambda x: addr[x][2] ):
    print 'Name: {0:{w0}} Address: {1:{w1}} phone: {2:{w2}}'.format(*addr[add],w0=w0,w1=w1,w2=w2) 
```

印刷：

```
Name: Billy Bob Doe3 Address: 454 Heartland St, Mobile, AL 00103 phone: 205-123-1232
Name: John Doe2      Address: 123 Main St, Los Angeles, CA 95002 phone: 213-123-1234
Name: John Doe1      Address: 145 Pearl St, La Jolla, CA 92013   phone: 858-123-1233 
```

但是，由于您在索引字典中有数据，您可以将其打印为表格，而不是按邮政编码排序：

```
# print table header
print '|{0:^{w0}}|{1:^{w1}}|{2:^{w2}}|'.format('Name','Address','Phone',w0=w0+2,w1=w1+2,w2=w2+2)
print '|{0:^{w0}}|{1:^{w1}}|{2:^{w2}}|'.format('----','-------','-----',w0=w0+2,w1=w1+2,w2=w2+2)
# print data sorted by last field of the address - probably a zip code
for add in sorted(addr.keys(),key=lambda x: addr[x][1].split()[-1]):
    print '|{0:>{w0}}|{1:>{w1}}|{2:>{w2}}|'.format(*addr[add],w0=w0+2,w1=w1+2,w2=w2+2) 
```

印刷：

```
|      Name      |              Address               |    Phone     |
|      ----      |              -------               |    -----     |
|  Billy Bob Doe3|  454 Heartland St, Mobile, AL 00103|  205-123-1232|
|       John Doe1|    145 Pearl St, La Jolla, CA 92013|  858-123-1233|
|       John Doe2|  123 Main St, Los Angeles, CA 95002|  213-123-1234| 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T02:57:42.760

在 Python 中：

```
results = []
cur_item = None

with open('/root/docs/information') as f:
    for line in f.readlines():
        key, value = line.split(':', 1)
        key = key.strip()
        value = value.strip()

        if key == "Name":
            cur_item = {}
            results.append(cur_item)
        cur_item[key] = value

for item in results:
    # print item 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-11T02:59:06.997

您应该能够使用[`split()`](http://docs.python.org/library/stdtypes.html#str.split)字符串上的方法来解析它：

```
line = "Name: John Doe1"
key, value = line.split(":")
print(key) # Name
print(value) # John Doe1 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-11T03:03:21.783

您可以遍历行并将它们打印在这样的列中 -

```
for line in open("/path/to/data"):
    if len(line) != 1:
        # remove \n from line's end and make print statement
        # skip the \n it adds in the end to continue in our column
        print "%s\t\t" % line.strip(),
    else:
        # re-use the blank lines to end our column
        print 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-11T03:12:29.850

```
#!/usr/bin/env python

def parse(inputfile, outputfile):
    dictInfo = {'Name':None, 'address':None, 'phone':None}
    for line in inputfile:
    if line.startswith('Name'):
        dictInfo['Name'] = line.split(':')[1].strip()
    elif line.startswith('address'):
        dictInfo['address'] = line.split(':')[1].strip()
    elif line.startswith('phone'):
        dictInfo['phone'] = line.split(':')[1].strip()
        s = 'Name: '+dictInfo['Name']+'\t'+'address: '+dictInfo['address'] \
            +'\t'+'phone: '+dictInfo['phone']+'\n'
        outputfile.write(s)

if __name__ == '__main__':
    with open('output.txt', 'w') as outputfile:
    with open('infomation.txt') as inputfile:
        parse(inputfile, outputfile) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-11T04:30:21.800

使用`sed`.

```
cat input.txt | sed '/^$/d' | sed 'N; s:\n:\t\t:; N; s:\n:\t\t:' 
```

1.  第一个管道，`sed '/^$/d'`，删除空行。
2.  第二个管道 ,`sed 'N; s:\n:\t\t:; N; s:\n:\t\t:'`结合了这些线条。

```
姓名：John Doe1 地址：某处电话：123-123-1234
姓名：John Doe2 地址：某处电话：123-123-1233
姓名：John Doe3 地址：某处电话：123-123-1232

```

# ios - UIPickerView 时区

> ID：12831444
> 
> 赞同：0
> 
> 时间：2012-10-11T02:47:38.963
> 
> 标签：ios

如何设置 UIPicker 时区？

我有一个具有动态时区的应用程序，但是当我更改时区时，pickerview 时区不会改变，当我选择一个日期时，显示将具有选定的时区，但它显示的与 pickerview 不同。

帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:43:04.307

我弄清楚了这段代码。

```
 [mDatePicker setTimeZone:[NSTimeZone defaultTimeZone]]; 
```

# ajax - 如何使用 Coldfusion.ajax.submitform 传递未选中的复选框值？

> ID：12831445
> 
> 赞同：3
> 
> 时间：2012-10-11T02:47:39.167
> 
> 标签：ajax, coldfusion

我难住了。我有一个`<cfform>`，我正在使用 cfc 和 Coldfusion.Ajax.submitform 将表单信息保存到数据库中。我的表单使用复选框。我似乎无法弄清楚如果未选中复选框，如何捕获。我读过如果未选中复选框，则不会与表单信息一起发送。我还读到您可以使用`<cfparam>`为复选框提供默认值，这样如果未选中该复选框，它仍然会有一个值，例如`<cfparam name="form.checkbox1" default="0">`. 不幸的是，当我使用 ColdFusion.Ajax.submitForm 时，它似乎不起作用。任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:01:26.403

创建一个正确的答案，以便您可以关闭此问题。

根据 ColdFusion 文档：[http ://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7faf.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7faf.html)

> Cfparam 测试参数（即变量）是否存在，验证其数据，如果未分配默认值，则可选择提供一个。

大多数情况下，它仅用于为几乎任何范围的变量创建默认值。

正如您所发现的，当需要变量时，必须在处理页面中使用 cfparam 标记。cfquery 参数在冷融合服务器的内存中创建变量，并且仅在请求期间可用（除非您使用它将值设置为会话或应用程序等持久范围）。它不会创建表单元素或 javascript 变量

# objective-c - 目标 c - 静态变量令人费解的行为

> ID：12831457
> 
> 赞同：1
> 
> 时间：2012-10-11T02:48:49.397
> 
> 标签：objective-c, c, static

在 .h 文件中，我有以下行（在任何 @interface 块之外）：

`static NSMutableDictionary *dictLookup;`

在相应的 .m 文件中，我尝试在`init`类的方法中初始化该静态：

`dictLookup = [NSMutableDictionary dictionary];`

`dictLookup setValue:@"Hello?" forKey:@"Goodbye"];`

但是，当我插入断点并进行检查时，dictLookup 永远不会变成 nil。

此外，我在编译时收到一个奇怪的警告“未使用的变量 dictLookup”。奇怪的是，如果我删除静态声明，那么我会在方法中的行中收到“未声明的标识符”编译器错误`init`。

从那以后，我发现有更好的方法来做我想做的事。但是这里发生了什么？(1) 为什么我不能将 dictLookup 设置为任何内容？

一些消息来源似乎说，在 C 中，静态变量只能在声明它的文件中使用。(2) 如果是这样，那么为什么编译器不会因 .m 文件中的错误而失败？鉴于（1），这似乎是设计编译器要做的合乎逻辑的事情。

(3) 当我从头开始设计一个新的“测试”项目时，使用一个新的 .h/.m 文件组合，就像描述的那样，我能够设置 dictLookup 和插入键。为什么会出现这种差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:04:11.423

1.  当您在文件中声明`static`变量时，它会在包含标头`.h`的每个文件中重新定义。`.m`将在每个文件中创建一个全新的变量，名称相同。
2.  这不是文件中的错误`.m`：该变量是该文件的本地变量，并且对链接器不可见，因此不存在“多重定义”错误。
3.  那是因为您的测试项目使用了一个`.m`文件。

> 一些消息来源似乎说，在 C 中，静态变量只能在声明它的文件中使用。

这是绝对正确的：`static`变量非常像文件范围的全局变量，它应该在`.m`文件中定义。如果你想共享一个变量，那么它需要是一个全局变量。用关键字在标题中*声明它，像这样*`extern`

```
extern NSMutableDictionary *dictLookup; 
```

然后在这样的文件之一中*定义它：*`.m`

```
NSMutableDictionary *dictLookup; 
```

# java - Struts2 REST 插件：在 JSON 中传递数组

> ID：12831465
> 
> 赞同：2
> 
> 时间：2012-10-11T02:50:55.307
> 
> 标签：java, json, rest, struts2

我的实体类：

```
import java.util.ArrayList;

public class Test {
    private String name;
    private String description;
    private ArrayList<String> countries;

    public Test() {

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public ArrayList<String> getCountries() {
        return countries;
    }

    public void setCountries(ArrayList<String> countries) {
        this.countries = countries;
    }
} 
```

我试图发送的 JSON：

```
{"countries": ["CA", "SG"], "description":"whee", "name": "foo"} 
```

错误：

```
2345447 [http-bio-8080-exec-1] ERROR freemarker.runtime  - Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=countries type interface java.util.List

Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=countries type interface java.util.List
The problematic instruction:
----------
==> ${msgs[0][0]} [on line 76, column 25 in org/apache/struts2/dispatcher/error.ftl]
----------

Java backtrace for programmers:
----------
freemarker.template.TemplateModelException: Method public java.lang.String org.apache.commons.lang.exception.NestableRuntimeException.getMessage(int) threw an exception when invoked on net.sf.json.JSONException: Error while setting property=countries type interface java.util.List
    at freemarker.ext.beans.SimpleMethodModel.exec(SimpleMethodModel.java:130)
    at freemarker.ext.beans.SimpleMethodModel.get(SimpleMethodModel.java:138)
    at freemarker.core.DynamicKeyName.dealWithNumericalKey(DynamicKeyName.java:111)
    at freemarker.core.DynamicKeyName._getAsTemplateModel(DynamicKeyName.java:90)
    at freemarker.core.Expression.getAsTemplateModel(Expression.java:89)
    at freemarker.core.Expression.getStringValue(Expression.java:93)
    at freemarker.core.DollarVariable.accept(DollarVariable.java:76)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.IfBlock.accept(IfBlock.java:82)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.IfBlock.accept(IfBlock.java:82)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:210)
    at freemarker.core.Environment.process(Environment.java:190)
    at freemarker.template.Template.process(Template.java:237)
    at org.apache.struts2.dispatcher.Dispatcher.sendError(Dispatcher.java:797)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:519)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:851)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:278)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
    at freemarker.ext.beans.SimpleMemberModel.unwrapArguments(SimpleMemberModel.java:85)
    at freemarker.ext.beans.SimpleMethodModel.exec(SimpleMethodModel.java:106)
    ... 37 more 
```

设置“名称”和“描述”而不尝试传递“国家”工作 - 值已成功映射。

使用以下 XML 也可以：

```
<com.foo.bar.entity.Test>
<countries>
<string>SG</string>
</countries>
<description>testt</description>
</com.foo.bar.entity.Test> 
```

**更新：**

如果我将列表更改为字符串 []，它会起作用。我可以忍受这一点，但有人知道是否可以向 Struts/rest-plugin/json-plugin 表明我更喜欢 List 而不是数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:02:21.457

尝试这样做

```
private List<String> countries; 
```

`List<>`当 json 解析器发送一个对象并且你的 var 是类型时，可能会发生错误`ArrayList<>`

我们现在不知道解析器将设置什么实例类型，所以总是使用接口而不是实现。

# c# - 如何让 Nuget 2.x 运行解决方案级别的包 Init.ps1？

> ID：12831466
> 
> 赞同：2
> 
> 时间：2012-10-11T02:51:05.290
> 
> 标签：c#, .net, nuget

我通过 .nuget/packages.config 将一些解决方案级别的 NuGet 包附加到 Visual Studio 2010 解决方案。

这些包中的每一个都包含一个 Init.ps1 文件。我正在尝试通过命令行或脚本在我的 CI 服务器上预安装软件包。运行`nuget install .nuget\packages.config -o packages`将包下拉到包文件夹中。但它不运行 Init.ps1 脚本。

如果我尝试对解决方案文件进行 msbuild 调用，它会失败，因为包 Init.ps1 文件安装的所需文件尚未到位。

如果我在 Visual Studio 中打开解决方案，这些包将运行 Init.ps1。

如何在无需打开 Visual Studio 的情况下从命令行/脚本获取 Init.ps1 文件与软件包安装一起触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T20:53:04.750

你能做的最好的就是假装它。通过调用 PowerShell 手动运行脚本。但他们可能有问题。传递给 init.ps1 的 $project 参数是一个 DTE 对象，如果没有 VS 的完整副本，您将无法使其可用。

# php - 如果测试中断，我如何禁用 Web 应用程序中的功能？

> ID：12831468
> 
> 赞同：0
> 
> 时间：2012-10-11T02:51:55.320
> 
> 标签：php, testing, lamp, robustness

我必须为课堂写一个刮板，我想对其进行测试以确保它确实有效。

如果我正在抓取的网站对其网站进行了更改，我希望我们的网站失败并禁用该功能，直到我们更新抓取工具。

假设我使用单元测试来测试刮板，是否有一些工具会每 X 分钟运行一次测试，并在禁用 Y 功能之前查看它是否损坏？

我想我要问的是，我可以利用哪些工具来使我的应用程序更健壮，以便我的用户在我的刮板损坏时不会看到一些奇怪的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:56:19.403

1.  当网站出现意外的 HTML 时，让爬虫抛出自定义异常
2.  编写单元测试以测试爬虫在预期 HTMl 时实际上可以解析网站，并测试该类在无法解析网站时是否抛出自定义异常
3.  在生成网站内容的代码中捕获异常。发送错误消息以记录并向用户显示合适的信息

您还应该将解析的内容保存在本地。万一远程服务器关闭，您可以回退到保存的内容，而不是抛出您的 ScraperParseThingyException。

您可以通过多种方式对此进行监控。最简单的方法是不时留意错误日志。

```
$scraperConfiguration = array(
   'disable_on_error'      => true,
   'notify_on_first_error' => true,
   'notify_email'          => 'scrape-errors@example.com',
);

...

$scraper = new Scraper($scraperConfiguration);
$scrapeResult = $scraper->scrape();

... 
```

正如这个小爬虫[*外观*](http://en.wikipedia.org/wiki/Facade_pattern)所示，您可以配置它的内部错误处理，在这里自动禁用并发送通知以防发生错误。

因为它会被自动禁用，所以您的站点将返回一个空结果，并且在您解决问题之前不再需要太多关注。

此外，您可以在带有测试配置的测试用例中使用它（例如，抛出异常并对其进行测试，而不是发送电子邮件并在错误时禁用），以便您已经在测试中看到，尤其是在开发和维护时组件。

# android - 如何将 setResult() 与 AlertDialog 类一起使用？

> ID：12831477
> 
> 赞同：2
> 
> 时间：2012-10-11T02:54:04.227
> 
> 标签：android, dialog

我正在尝试创建一个单独的类来显示 AlertDialog。问题是，如果我创建一个扩展 Activity 的类并在 Activity 中创建一个 Dialog，我会得到黑色背景而不是透明背景。我用过：

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

在我的清单中，标题和背景被删除，但我没有得到与创建对话框时相同的外观。这是我的代码：

```
public class ConfirmDialog extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Creo el dialogo
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle(getString(R.string.AnalyzerDialogSaveTitle));
        alert.setMessage(getString(R.string.AnalyzerDialogFileName));

        // Creamos un EditView para que el usuario escriba
        final EditText input = new EditText(this);
        alert.setView(input);
        alert.show();

    }

} 
```

我还尝试扩展 AlertDialog 和 Dialog 而不是 Activity，但是当我按下按钮时我无法使用 setResult() 来调用 onActivityResult()，而且我根本无法使用 startActivityForResult() 来调用它。

如何获得一个真正的 Dialog（不是主题，因为它看起来不像使用 AlertDialog 类时的样子）并使用 startActivityForResult 来调用它？

谢谢 ：）

**- - - 编辑 - - -**

我也试过 Theme.Dialog 但它是一样的，因为我没有得到相同的外观。这就是我的意思：

**Android 警报对话框**

![Android 警报对话框](../Images/c96cd0f98b32fb86e1447f9947a973b9.png)

**Theme.Dialog 或 Theme.Traslucent.NoTitleBar**

![Theme.Dialog 或 Theme.Traslucent.NoTitleBar](../Images/2f2d21e7df9cf7108ccd2aa147439985.png)

正如你所看到的，你得到的外观是不一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:56:15.900

要将活动显示为对话框，请使用 android:theme="@android:style/Theme.Dilalog" 而不是 Theme.Translucent.NoTitleBar。

# emacs - 如何在emacs中完成这项工作？

> ID：12831483
> 
> 赞同：0
> 
> 时间：2012-10-11T02:55:26.047
> 
> 标签：emacs

原始字符串是这样的：

```
 # chrom,name,strand,txStart 
```

结果应如下所示：

```
 # $1: chrom
 # $2: name
 # $3: strand
 # $4: txStart 
```

有没有人知道一个快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T04:41:29.643

很多方法。

您可以使用替换中的`\#`计数器进行搜索和替换。那是从零开始的，所以你要么需要在前面添加一个虚拟替换来用完零，要么使用 elisp 替换表达式`\,(1+ \#)`。

`C-x``C-k``TAB`您可以使用键盘宏，并使用或插入计数器`<f3>`。您可以在开始录制时通过提供前缀参数来为该计数器播种。

在 Emacs 24 上，您可以使用自定义格式字符串为标记区域的行编号`C-u``C-x``r``N`，因此您的格式字符串可以是`# $%1d:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:22:50.113

评估以下代码并`foo`在输入行上执行函数。

```
(require 'cl)

(defun foo ()
  (interactive)
  (let* ((str (buffer-substring-no-properties
               (line-beginning-position) (line-end-position)))
         (words-str (and (string-match "# \\(.+\\)$" str)
                         (match-string 1 str)))
         (buf (get-buffer-create "*tmp*")))
    (unless words-str
      (error "Line should be '# word1,word2,...'"))
    (with-current-buffer buf
      (erase-buffer)
      (loop with index = 1
            for word in (split-string words-str ",")
            do
            (progn
              (insert (format "# $%d: %s\n" index word))
              (incf index)))
      (pop-to-buffer buf)))) 
```

# ruby-on-rails - RoR 3.2.5 Railscasts #102：自动完成：表单已预先填充数据（应为空白）

> ID：12831484
> 
> 赞同：0
> 
> 时间：2012-10-11T02:56:05.177
> 
> 标签：ruby-on-rails, search, jquery-autocomplete

我要离开 Railscasts 102。

我当前的问题是页面加载时我的搜索表单已经填充了数据。

我有一个模型、列表和该模型的 5 列：网站、网址、评论、医生和日期。在这种情况下，我只是担心网站。

我的 listings.js.coffee 是

```
jQuery ->
  $('#search').autocomplete
    source: $('#search').data('autocomplete-source') 
```

而我的 index.html.erb 文件（重要部分）是

```
<%= form_tag '/listings', :method => :get do %>
  <%= text_field_tag :search, data: {autocomplete_source: Listing.order(:website).map(&:website)} %>
  <%= submit_tag 'Search', :class => 'echo-search-tag', :name => nil %>
<% end %> 
```

当我加载页面时，搜索表单已经填充了

**{:data=>{:autocomplete_source=>["Doctors4US", "如何变得更好", "Rafael's Epic Doctor Site", "Testing Admin", "WebMD"]}}**

显然，情况不应该如此。JS 控制台给我一个错误：

*未捕获的类型错误：对象# 的属性“源”不是函数*

我看到另一个关于此的 Stack Overflow 帖子，我尝试了该解决方案，但没有任何区别。

注意：当我尝试测试 listings.js.coffee 中的源数据时，例如 ['foo', 'fore', 'food']，自动完成功能正常工作。

另请注意，除了自动完成之外，搜索功能正常工作。

任何输入表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:36:57.797

好的，问题是 text_field_tag 需要 2 个参数，这就是搜索表单预填充数据的原因。

所以我只是为第二个参数添加了 nil

```
<%= text_field_tag :search, nil, data: {autocomplete_source: Listing.order(:website).map(&:website)} %> 
```

瞧！在职的。

现在试图弄清楚如何向Listing.order 和.map 添加多个列（即，不仅有:website，还有:comments、:doctor 和:url）。输入赞赏！

# javascript - XML解析后的“对象”与“对象文档”，IE 9不接受

> ID：12831485
> 
> 赞同：0
> 
> 时间：2012-10-11T02:56:08.657
> 
> 标签：javascript, xml, xslt, dom, internet-explorer-9

在 IE9 中进行 XML 解析后，我遇到了一个问题。当我提醒我解析 XML 的变量时，在除 IE9 之外的所有其他浏览器中，我可以看到文本 [Object]，但在 IE9 中它显示的是 [Object Document]。因此，变量值未分配给输入参数。代码：

```
if (window.DOMParser)
  {
  parser=new DOMParser();
  xmlDoc=parser.parseFromString(txt,"text/xml");
  }
else // Internet Explorer
  {
  xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
  xmlDoc.async=false;
  xmlDoc.loadXML(txt); 
  }

xslProc = xslt.createProcessor();
xslProc.input = xmlDoc; 
```

在 IE9 中，我可以看到 IF 块每次都在执行，xmlDoc 警告为 [Object Document] [仅在 IE9 中]，当我在输入参数（最后一行）中分配 xmlDoc 对象时，代码停止，所有其他浏览器，包括 IE7， IE8 运行良好。任何帮助将不胜感激。提前致谢。

**编辑：** XSLT 格式

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" />
    <xsl:param name="selectedSKU"></xsl:param>
    <xsl:param name="pageName">skuset</xsl:param>
    <xsl:param name="selectedSWATCH"></xsl:param>
    <xsl:param name="colFlag">0</xsl:param>
    <xsl:param name="xslStoreId">10001</xsl:param>
    <xsl:param name="xslLangId">-1</xsl:param>
    <xsl:param name="xslCatalogId">10051</xsl:param>
    <xsl:param name="exitURL"></xsl:param>
    <xsl:param name="iskiosk">0</xsl:param>

    <xsl:param name="AddToCart"></xsl:param>
    <xsl:param name="Qty"></xsl:param>

    <xsl:template match="/">
        <xsl:apply-templates select="//product[@id=$selectedSKU]" />
    </xsl:template>
    <xsl:variable name="label_stars">
        <xsl:value-of select="productcatalog/labels/label[@key='common.stars']" />
    </xsl:variable>
    <xsl:variable name="label_reviews">
        <xsl:value-of select="productcatalog/labels/label[@key='common.reviews']" />
    </xsl:variable>
</xsl:stylesheet> 
```

XSLT 文件很长……所以我附上了一个块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:53:13.693

IE 9 之前的 IE 版本没有自己的 XML 解析器，而是可以使用任何版本的 MSXML 来解析 XML。MSXML（从版本 3 开始）也支持 XSLT 转换。

在 IE 9 中，IE 现在拥有自己的 XML 解析器，您可以使用 from script with`DOMParser`来构造 XML DOM 文档。但是，IE 不支持在此类文档上应用 XSLT 转换，并且 MSXML 不能将 IE 的 DOM 文档用作 XSLT 的输入。

因此，如果您想在 IE 9 中使用 XSLT，您需要确保使用`new ActiveXObject('Microsoft.XMLDOM')`（`new ActiveXObject('Msxml2.DOMDocument.3.0')`目前分别推荐）而不是使用`DOMParser`. 因此，如果您想在浏览器中应用 XSLT，基本上您的功能检查`if (window.DOMParser)`不是正确的方法，而是使用例如

```
var input;

if (window.XSLTProcessor && window.DOMParser) {
  input = new DOMParser().parseFromString(txt, 'application/xml');
}
else if (window.ActiveXObject) {
  input = new ActiveXObject('Msxml2.DOMDocument.3.0');
}

if (input) {
  xslProc = xslt.createProcessor();
  xslProc.input = input;
  ...
} 
```

# c - 初学者：int main()前的语法错误

> ID：12831486
> 
> 赞同：8
> 
> 时间：2012-10-11T02:56:14.890
> 
> 标签：c

我正在尝试运行 Hello World 程序，但出现错误

```
./ex1.c: line 3: syntax error near unexpected token `(`
./ex1.c: line 3: `int main (int argc, char *argv[])' 
```

或者

```
./ex1.c: 3: ./ex1.c: Syntax error: "(" unexpected 
```

或者

```
./ex1.c:3: unknown file attribute: i
./ex1.c:4: parse error near `}' 
```

奇怪的是我之前运行过同样的程序并且没有任何问题。

不确定这些问题是否相关，但问题发生在我安装 Valgrind 以在 Learn C The Hard Way 中运行练习 4 之后。我收到一个错误，说权限被拒绝，我使用`chmod +x`. 然后我所有的`.c`文件都需要他们以前没有的权限。然后我`chmod -R 0777`用我所有的 .c 练习文件为目录做了。所以权限问题是固定的，但是上面的错误开始了。他们可能完成无关，但想包括以防万一。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T02:59:12.587

您不能仅使用;来*运行*文件 你必须先把它*编译*成一个可运行的程序。`.c``./ex1.c`

 *假设你有一台 Linux/OS X 机器，使用`gcc -Wall ex1.c -o ex1`它来编译它（或者，更简单地说，`make ex1`）。然后就可以`./ex1`运行程序了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-08T19:05:38.393

在使用 make "your program name" 编译程序后（如本例中的 make mario），然后只需使用 ./"your program name"（本例中为 ./mario）。运行程序时不要添加 .c。*

# php - 在热图上显示大规模数据会导致网页崩溃

> ID：12831487
> 
> 赞同：1
> 
> 时间：2012-10-11T02:56:16.127
> 
> 标签：php, crash, xampp, heatmap

我有一张热图，用于通过 XAMPP-PHP-PostgreSQL 后端可视化大规模 GPS 数据。

但是，试图可视化大时间间隔的 GPS 数据——例如 14 个月的 24 小时数据——即 240 万行纬度和经度值——导致我的 html 页面崩溃。

我可以可视化大约 900.000 行的数据，但是对于比这更大的数据，我总是会崩溃。

我使用`ini_set('memory_limit', '-1')`并`set_time_limit (60)`绕过 PHP 的时间限制和内存警告，但现在我遇到了这个 Chrome 浏览器崩溃问题。

这可能是什么原因造成的？我检索纬度和经度值的 PHP 代码如下：

```
function getPoints($dateTimeBeg,$dateTimeEnd) //getting the points 
//from the database after providing the start and end date objects
{

    global $con, $coords, $coords_array; //$coords and $coords_array are declared
//at the beginning of the php script

    $query = "SELECT lat, lon FROM mytable WHERE calltime >= '$dateTimeBeg'
    and calltime <= '$dateTimeEnd'"; 

    $res = pg_query($con, $query) or die (pg_last_error($con)); 

    if($res)//if a result exists
    {
        $num_of_rows = pg_num_rows($res);

        if($num_of_rows > 0)
        {
            while($row = pg_fetch_row($res)) //fetch results row by row
            { 
                array_push($coords,array($row[0],$row[1]));      
//push them to the $coords array
            }
            array_push($coords_array,$coords); 
            unset($coords);
//push array $coords array to $coords_array ARRAY
        }
    }
}

$coords_json = json_encode($coords_array); //encode the results as json 
echo $coords_json; //print out the data, heatmap takes the 
//coordinates and takes care of the rest
unset($coords);
pg_close($con); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:09:09.843

看起来您通过 json 将 900,000 多个数据点返回给浏览器并要求浏览器处理映射...您可能没有 php 问题，但存在浏览器过载问题。

您可能会尝试仅将所有其他结果发送到浏览器以查看是否完成（从 db 中选择全部但仅通过 json 返回一半）...这可以告诉您问题出在 php 还是浏览器/JavaScript

# vb.net - VB.NET：如何验证文本框不允许十进制值？

> ID：12831493
> 
> 赞同：0
> 
> 时间：2012-10-11T02:56:55.560
> 
> 标签：vb.net, winforms, decimal

我想知道如何验证文本框以不允许任何十进制值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:11:14.127

我从这个链接得到的这个解决方案（[如何允许用户在 vb.net 的文本框中只输入数字？](https://stackoverflow.com/questions/3413708/how-to-allow-user-to-enter-only-numbers-in-a-textbox-in-vb-net)）

```
 Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
    If (Microsoft.VisualBasic.Asc(e.KeyChar) < 48) _
              Or (Microsoft.VisualBasic.Asc(e.KeyChar) > 57) Then
            e.Handled = True
    End If
    If (Microsoft.VisualBasic.Asc(e.KeyChar) = 8) Then
            e.Handled = False
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:17:40.003

您可以使用[`KeyPress`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress%28v=vs.100%29.aspx)事件并使用[`IsNumeric`](http://msdn.microsoft.com/en-us/library/6cd3f6w1.aspx)函数来捕获数字键。

```
Private Sub TextBox1_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
    If IsNumeric(e.KeyChar) Then
        e.Handled = True
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T14:11:06.747

如果可以，请使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)

由于处理 KeyPress 可能会导致删除/退格/复制/粘贴/...的问题

# perl - 将 DOCX 编码为通过电子邮件发送

> ID：12831498
> 
> 赞同：1
> 
> 时间：2012-10-11T02:57:47.917
> 
> 标签：perl, attachment, mime, docx

我正在编写一个小的 Perl 应用程序来在我工作的内部发送电子邮件，但是我遇到了附件问题。现在，我可以听到你们所有人都在尖叫“使用 MIME::Lite”，但这并不是那么容易——管理规则告诉我，我无法使用 cpan 中的任何东西......

无论如何，我正在使用 MIME::Base64 对我发送的任何附件进行编码。我将 Net::SMTP 用于电子邮件方面。

编码是这样完成的（直接从 Perldoc 页面出来）：

```
my $encoded = "";
use MIME::Base64 qw(encode_base64);
open (FILE, "7857084216_9816ae9bec_b.jpg") or die "$!\n";
while (read(FILE, $buf, 60*57)) {
$encoded .= encode_base64($buf);
} 
```

相关的 Net::SMTP 代码如下：

```
use Net::SMTP;
$smtp = Net::SMTP->new("mailserver",
                Hello => 'somedomain.com.au',
                Timeout => 60,
                Debug => 0,
                );
$smtp->mail(<services\@somedomain.com.au>);
$smtp->to(<me\@somedomain.com.au>);
$smtp->cc(<another\@somedomain.com.au>);
$smtp->data();
$smtp->datasend("Subject: testing 123\n");
$smtp->datasend("To: me\@somedomain.com.au\n");
$smtp->datasend("CC: another\@somedomain.com.au\n");
$smtp->datasend("MIME-Version: 1.0\n");
$smtp->datasend("Content-type: multipart/mixed;\n\tboundary=\"$boundary\"\n");
$smtp->datasend("--$boundary\n");
$smtp->datasend("Content-type: text/html; charset=utf-8\n");
$smtp->datasend("\n");
$smtp->datasend("<p> Test Email!</p>\n");
$smtp->datasend("\n");
$smtp->datasend("--$boundary\n");
$smtp->datasend("Content-type: image/jpeg; name=\"7857084216_9816ae9bec_b.jpg\"\n");
$smtp->datasend("Content-ID: \n");
$smtp->datasend("Content-Disposition: attachment; filename=\"7857084216_9816ae9bec_b.jpg\"\n");
$smtp->datasend("Content-transfer-encoding: base64\n");
$smtp->datasend("\n");
$smtp->datasend("$encoded");
$smtp->datasend("\n");
$smtp->datasend("--$boundary--\n");
$smtp->dataend;
$smtp->quit; 
```

此刻，我将这些电子邮件发送给自己并使用 Outlook 2010 阅读它们发送图像（例如 jpegs）时，我根本没有任何问题 - 据我所知，一切似乎都在逐字节解码. 当我发送纯文本的 docx 类型文件时，一切似乎都很好。但是，当我发送插入图像的 docx 文件时，文件已损坏。

不是邮件发送和附件方面的专家，我有点茫然。我应该如何编码 docx 文件以附加到电子邮件？任何帮助，将不胜感激！

还忘了提及，我已尝试相应地设置内容类型： 内容类型：application/vnd.openxmlformats-officedocument.wordprocessingml.document

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:42:39.457

我以前见过这种情况，通常归结为不正确的 mime 类型或 mime 结构。您提到您尝试添加 mime 类型，因此这可能表明 mime 结构可能有点偏离。我已经在 xslx 和 csv 文件中看到了这一点。由于解码器假定文本，因此 CSV 会出现，但如果您没有正确的二进制数据 Mime，它将始终尝试转换为 ascii。我在 xslx vs docx 中意识到这一点，但我认为同样的原则也适用。

这是我正在生成的示例电子邮件的片段（使用 Mime:Lite），但可能会有所帮助。

```
 From: me@example.com
To: example@example.com
Subject: Example
Content-Transfer-Encoding: binary
Content-Type: multipart/mixed; boundary="_----------=_13433203262384120"

--_----------=_13433203262384120
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html
Content-Disposition: inline

<body>Hello,<br>
<p>EMAIL BODY</p>
<p>Thanks,<br>&nbsp;&nbsp;Blah</body>

--_----------=_13433203262384120
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet; name="sample.xlsx"
Content-Disposition: attachment; filename="sample.xlsx"
Content-Transfer-Encoding: base64

UEsDBBQAAAAIAAFk+kDm/EEvVgEAACQFAAATAAAAW0NvbnRlbnRfVHlwZXNdLnhtbMVUS28CIRC+
N+l/IFybXdRD0zSuHvo4tia1P4DC6BJZIAxa/fed3a32EesjmvQCgfleQ8j0h8vKsgVENN4VvJt3
OAOnvDZuWvDX8WN2wxkm6bS03kHBV4B8OLi86I9XAZAR22HBy5TCrRCoSqgk5j6Ao8rEx0omOsap
CFLN5BREr9O5Fsq7BC5lqdbgg/49TOTcJvawpOs2SQSLnN21wNqr4DIEa5RMVBcLp3+5ZJ8OOTEb
DJYm4BUBOBNbLZrSnw5r4jM9TjQa2EjG9CQrggnt1Sj6gIII+W6ZLUH9ZGIUkMa8IkoOdSINOgsk
CTEZ+Eq901z5CMe7r5+pZh9qubQC08oCntwshghSYwmQKpu3ovusE30qaNfuyQEamX2O7z7O3ryf
....  <Snipped>
ZRQyppbEwDToT079O3NfFSgofVlmcbvM34PqkQQdCmrLiWYxleokviz25OPYvpRw/s64avTwn+uh
SSg4ctedMMaTkj47g3IXX1BLAQIUAxQAAAAIAAFk+kDm/EEvVgEAACQFAAATAAAAAAAAAAEAAAC2
gQAAAABbQ29udGVudF9UeXBlc10ueG1sUEsBAhQDFAAAAAgAAWT6QPWzn3yRAQAAQAMAABAAAAAA
AAAAAQAAALaBhwEAAGRvY1Byb3BzL2FwcC54bWxQSwECFAMUAAAACAABZPpAkg6xSFoBAAC2AgAA
EQAAAAAAAAABAAAAtoFGAwAAZG9jUHJvcHMvY29yZS54bWxQSwECFAMUAAAACAABZPpAyfySzFpy
BAAcqRgAFAAAAAAAAAABAAAAtoHPBAAAeGwvc2hhcmVkU3RyaW5ncy54bWxQSwECFAMUAAAACAAB
ZPpARQtWMQgCAABaBQAADQAAAAAAAAABAAAAtoFbdwQAeGwvc3R5bGVzLnhtbFBLAQIUAxQAAAAI
AABk+kCVKtbcsAEAAFgDAAAPAAAAAAAAAAEAAAC2gY55BAB4bC93b3JrYm9vay54bWxQSwECFAMU
AAAACAABZPpA8XOrpLUFAABVGwAAEwAAAAAAAAABAAAAtoFrewQAeGwvdGhlbWUvdGhlbWUxLnht
bFBLAQIUAxQAAAAIAO1j+kD+7E73UA8AAM1zAAAYAAAAAAAAAAEAAAC2gVGBBAB4bC93b3Jrc2hl
ZXRzL3NoZWV0MS54bWxQSwECFAMUAAAACAAAZPpA7/olcLO/MgAHxsABGAAAAAAAAAABAAAAtoHX
kAQAeGwvd29ya3NoZWV0cy9zaGVldDIueG1sUEsBAhQDFAAAAAgAAWT6QCFo34b0AAAATgMAABoA
AAAAAAAAAQAAALaBwFA3AHhsL19yZWxzL3dvcmtib29rLnhtbC5yZWxzUEsBAhQDFAAAAAgAAWT6
QIB6g4TsAAAAUQIAAAsAAAAAAAAAAQAAALaB7FE3AF9yZWxzLy5yZWxzUEsFBgAAAAALAAsAxgIA
AAFTNwAAAA==

--_----------=_13433203262384120-- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:09:04.693

我发现了这个问题，而且“内容类型”似乎确实有所作为。根据我的发现，我将所有包含 Base64 编码数据的 Content-type 调用替换为以下内容：

```
Content-type: application/octet-stream; 
```

这似乎直接发送了它，Outlook 2010 和 2003 都没有问题。我已经针对二进制文件、纯文本等进行了测试，在我当前的环境中似乎一切正常。

干杯

# android - 优化对只读 sqlite 数据库的快速访问？

> ID：12831504
> 
> 赞同：2
> 
> 时间：2012-10-11T02:58:13.367
> 
> 标签：android, database, performance, sqlite

我有一个庞大的数据库，我希望我的应用程序能够尽快使用它。我正在使用android，因此资源受到更多限制。我知道在 sqlite 数据库中存储大量数据不是一个好主意，但我需要这个。

每个数据库只包含一个表，我只使用它阅读。

你能给我什么建议来尽可能优化数据库。我已经阅读[了这篇](https://stackoverflow.com/questions/784173/what-are-the-performance-characteristics-of-sqlite-with-very-large-database-file)文章，除了 PRAGMA 命令我还能使用什么？

也许有一些特殊**类型**的表被限制为只读查询，但主要是比普通表类型更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:41:16.333

只要您的数据库适合设备，就没有问题；您将有更少的空间用于其他应用程序。

没有特殊的表类型。但是，如果您的查询仅使用表列的子集，并且剩余空间足够，请考虑添加一个或多个[覆盖索引](http://www.sqlite.org/queryplanner.html#covidx)。

只读允许在部署之前在桌面上优化数据库：

*   设置页面大小等；
*   创建有用的索引；
*   [`ANALYZE`](http://www.sqlite.org/lang_analyze.html)
*   [`VACUUM`](http://www.sqlite.org/lang_vacuum.html)

在您的应用程序中，您可能会尝试增加[页面缓存大小](http://www.sqlite.org/pragma.html#pragma_cache_size)，但如果您的工作集大于可用内存，那无论如何也无济于事。无论如何，从闪存中随机读取的速度很快，所以这不是什么大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:24:18.887

巨大是相对的。但最终，设备受限于存储和内存。因此，假设巨大超出了设备的典型限制，您有几个选择。

第一种选择是将您的庞大数据集存储在云中，并且连接的设备可以通过提供云服务以及来自云端的 RESTful API 之类的东西来向设备提供数据，从而提供对该数据的视图。如果设备和应用程序依赖于始终保持连接，那么除非您想要缓存数据，否则您不需要太多的本地存储空间。

另一种方法是偶尔连接的设备（有时离线），您可以在其中提取最相关的数据片段以在设备上工作。在该模型中，您可以离线工作并推/拉回云端。在这个模型中，sqlite 是保存相关数据片的存储机制。

根据评论编辑：

关于优化设备上的内容，请参阅此处的优化常见问题解答：

[http://web.utk.edu/~jplyon/sqlite/SQLite_optimization_FAQ.html](http://web.utk.edu/~jplyon/sqlite/SQLite_optimization_FAQ.html)

（按有效性的粗略顺序）

1.  使用内存数据库
2.  使用 BEGIN TRANSACTION 和 END TRANSACTION
3.  使用索引 使用 PRAGMA cache_size
4.  使用 PRAGMA 同步=OFF
5.  压缩数据库
6.  更换内存分配库
7.  使用 PRAGMA count_changes=OFF

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T09:18:04.357

你还需要关闭日志，因为数据不会改变[http://www.sqlite.org/pragma.html#pragma_journal_mode](http://www.sqlite.org/pragma.html#pragma_journal_mode) PRAGMA journal_mode=OFF

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T06:52:23.717

也许我说的是显而易见的，但您可能应该用以下`SQLITE_OPEN_READONLY`标志打开它[`sqlite3_open`](http://sqlite.org/c3ref/open.html)： 我认为 SQLite 将利用这一事实并优化引擎的行为。

请注意，所有正常的 SQL(ite) 优化技巧仍然适用（例如 VACUUMing 以完成数据库，在创建数据库时设置正确的页面大小，正确的索引等等......）

此外，如果您有多个线程访问应用程序中的数据库，您可能还想尝试一下`SQLITE_OPEN_NOMUTEX`and`SQLITE_OPEN_SHAREDCACHE`标志（尽管它们需要 sqlite3_open_v2）

# c# - 捕获参数的值

> ID：12831508
> 
> 赞同：0
> 
> 时间：2012-10-11T02:58:41.840
> 
> 标签：c#, asp.net-mvc

我真的需要你的帮助，我被困住了，不知道从哪里开始修复。所以我有这个表格，用户可以在其中选择一个案例和各方。我应该保存并传递所选项目的值。我能够保存案例选择，但我无法保存选定的一方。这是我关于收集数据并保存它们的代码片段。

**控制器：**

```
[HttpPost]
    [ValidateInput(false)]
    public ActionResult Create(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)
    {
        if (!ModelState.IsValid)
        {
            viewModel.Time = _timeEntryHelper.Value;
            AddLookupsToViewModel(viewModel);
            return View(viewModel);
        }
        var visitEntry = Mapper.Map<VisitViewModel, VisitEntry>(viewModel);
        visitEntry.VisitDate = _timeEntryHelper.AddTimeToDate(visitEntry.VisitDate);
        visitEntry.UserId = _currentUser.UserId;
        visitEntry.OfficeId = _currentUser.OfficeId;
        try
        {
            _visitEntryService.Create(visitEntry, associatedCasesSelected, selectedParties);
            this.FlashInfo(string.Format(Message.ConfirmationMessageCreate, Resources.Entities.Visit.EntityName));
        }
        catch (RulesException ex)
        {
            ex.CopyTo(ModelState);
        }
        if (ModelState.IsValid)
            return RedirectToAction("Edit", "Case", new { caseId = viewModel.CaseId });
        AddLookupsToViewModel(viewModel);
        return View(viewModel);
    } 
```

**访问入口服务：**

```
public void Create(VisitEntry visitEntry,IList<Guid>caseIds, IList<Guid>partyIds )
    {
        EnsureValid(visitEntry);
        _visitEntryRepository.Save(visitEntry);
        caseIds = AddCurrentCaseToCases(visitEntry.CaseId, caseIds,partyIds);
        foreach (var caseId in caseIds.Distinct())
        {
            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};
            _visitService.Create(visit);
        }
    } 
```

**访问条目存储库：**

```
 public void Save(VisitEntry visitEntry)
    {
        if (visitEntry.VisitEntryId == Guid.Empty)
        {
            visitEntry.VisitEntryId = Guid.NewGuid();
            visitEntry.DateCreated = DateTime.Now;
            DataContext.VisitEntries.InsertOnSubmit(visitEntry);
        }
        else
        {
            var currentVisitEntry = Get(visitEntry.VisitEntryId);
            if (currentVisitEntry == null) throw RepositoryExceptionFactory.Create("VisitEntry", "VisitEntryId");
            currentVisitEntry.DateModified = DateTime.Now;
            currentVisitEntry.VisitDate = visitEntry.VisitDate;
            currentVisitEntry.VisitType =
                DataContext.VisitTypes.SingleOrDefault(vt => vt.VisitTypeId == visitEntry.VisitTypeId);
            currentVisitEntry.Note = visitEntry.Note;
        }
        DataContext.SubmitChanges();
    } 
```

我不确定如何保存选定的一方，因为它正在保存案例信息和选定的案例。感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:01:47.153

保存调用稍早一些，因此您在触发 SubmitChanges 后所做的更改，将 SubmitChanges 移到最后，我相信您应该很高兴

**更新**

我的意思是更改如下代码，看看是否有帮助

**控制器：**

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Create(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)
{
    if (!ModelState.IsValid)
    {
        viewModel.Time = _timeEntryHelper.Value;
        AddLookupsToViewModel(viewModel);
        return View(viewModel);
    }
    var visitEntry = Mapper.Map<VisitViewModel, VisitEntry>(viewModel);
    visitEntry.VisitDate = _timeEntryHelper.AddTimeToDate(visitEntry.VisitDate);
    visitEntry.UserId = _currentUser.UserId;
    visitEntry.OfficeId = _currentUser.OfficeId;
    try
    {
        _visitEntryService.Create(visitEntry, associatedCasesSelected, selectedParties);
        this.FlashInfo(string.Format(Message.ConfirmationMessageCreate, Resources.Entities.Visit.EntityName));
        DataContext.SubmitChanges();
    }
    catch (RulesException ex)
    {
        ex.CopyTo(ModelState);
    }
    if (ModelState.IsValid)
        return RedirectToAction("Edit", "Case", new { caseId = viewModel.CaseId });
    AddLookupsToViewModel(viewModel);
    return View(viewModel);
} 
```

**访问条目存储库：**

```
public void Save(VisitEntry visitEntry)
{
    if (visitEntry.VisitEntryId == Guid.Empty)
    {
        visitEntry.VisitEntryId = Guid.NewGuid();
        visitEntry.DateCreated = DateTime.Now;
        DataContext.VisitEntries.InsertOnSubmit(visitEntry);
    }
    else
    {
        var currentVisitEntry = Get(visitEntry.VisitEntryId);
        if (currentVisitEntry == null) throw RepositoryExceptionFactory.Create("VisitEntry", "VisitEntryId");
        currentVisitEntry.DateModified = DateTime.Now;
        currentVisitEntry.VisitDate = visitEntry.VisitDate;
        currentVisitEntry.VisitType =
            DataContext.VisitTypes.SingleOrDefault(vt => vt.VisitTypeId == visitEntry.VisitTypeId);
        currentVisitEntry.Note = visitEntry.Note;
    }
} 
```

# clojure - Clojure/ClojureScript 中的哪些内容可以帮助创建分布式“蚂蚁”演示？

> ID：12831517
> 
> 赞同：0
> 
> 时间：2012-10-11T02:59:54.190
> 
> 标签：clojure, clojurescript

我假设大多数 Clojure 专家都看过 Rich Hickey 的 ant 演示（[http://gist.github.com/1093917](http://gist.github.com/1093917)和[http://blip.tv/clojure/clojure-concurrency-819147](http://blip.tv/clojure/clojure-concurrency-819147)）。如果要尝试制作同一个应用程序的分布式版本，但基于浏览器，每个浏览器控制一个蚂蚁，Clojure/ClojureScript 是否有任何东西可以帮助`behave`函数的事务性质（假设`behave`在客户端上运行)? 还是 Clojure/ClojureScript 的 STM 功能真的不适合分布式使用？

即，如果在客户端我在 (3,2) 并且想要移动到 (3,3)，并且在我的客户端（浏览器）的世界中（这可能有点陈旧，与 Rich 的原始版本相同）线程有点陈旧）那个方格是空的，但是我将请求发送到服务器，在服务器的世界中那个方格是满的，ClojureScript 中是否有任何分布式 STM 可以告诉我——不，那个方格是满的并且您必须恢复该动作，因此您的下一步必须再次从（3,2）开始。在 Rich 的原始演示文稿中，它是全自动的，内置于​​ Clojure 的 STM 功能中。但是分布式，是否必须更明确，或者是否有内置的功能来做到这一点？

如果这种东西没有内置到 Clojure/ClojureScript 中，还有其他平台可能更合适吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:12:22.917

是的，这可以使用 Clojure（用于后端）和 ClojureScript 或 JavaScript（用于前端）轻松完成。

基本上，客户端 js 代码将使用 websockets 连接到 clojure 服务器，并且在服务器上，您可以将状态包装在一个原子中，每个客户端都可以访问该原子，并且每个客户端都通过连接的 websocket 更新有关状态......你做的类似的事情在聊天 Web 应用程序中。

对于 websocket，您可以使用[Aleph](https://github.com/ztellman/aleph)。

# .net - 如何设置 SuperGridControl 列的 GridSwitchButtonEditControl 的 OnText/OffText？

> ID：12831522
> 
> 赞同：0
> 
> 时间：2012-10-11T03:00:14.927
> 
> 标签：.net, vb.net, controls, dotnetbar

我在我的项目中使用这个网格控件，并且我希望能够编辑具有 GridSwitchButtonEditControl 编辑器类型的整个列的 ON OFF 文本。

组件的文档在[这里](http://www.devcomponents.com/kb2/?p=1265#GridColumn)

但我无法弄清楚如何设置整个列的编辑器控件的默认属性，也无法设置单行列编辑器的属性（根据文档，它是从列的编辑器控件继承的）。

有人可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:59:02.973

这是一种简单的方法：

```
 SetSwitchText(column.EditControl as GridSwitchButtonEditControl);
    SetSwitchText(column.RenderControl as GridSwitchButtonEditControl);

    private void SetSwitchText(GridSwitchButtonEditControl ctl)
    {
        if (ctl != null)
        {
            ctl.OnText = "Yea";
            ctl.OffText = "Nay";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T19:09:03.707

1.  使用自定义值创建您自己的 GridSwitchButtonEditControl 类

    Private Class MyGridSwitchButtonEditControl 继承 GridSwitchButtonEditControl Public Sub New() StretchBehavior = StretchBehavior.Horizo​​ntalOnly OnText = "HELLO" OffText = "BYE" End Sub End Class

2.  创建一个子以使用您自己的编辑器初始化网格

    Private Sub InitializeGrid() Dim pnl = supergridcontrol1.PrimaryGrid Dim column As GridColumn = pnl.Columns("Column6") column.EditorType = GetType(MyGridSwitchButtonEditControl) End Sub

'3。在表单加载调用 InitializeGrid() 来教网格使用您的自定义编辑器

```
Private Sub Fmain_Load(sender As Object, e As EventArgs) Handles MyBase.Load
InitializeGrid()
End sub 
```

这样，您的网格将使用您的自定义编辑器进行初始化。您现在可以看到 OnText 是“HELLO”，OffText 是“BYE”。注意“Column6”是使用Editor的列名（也可以使用index）

希望这可以帮助

来自意大利的问候:)

# r - dcast 可以在没有聚合函数的情况下使用吗？

> ID：12831524
> 
> 赞同：25
> 
> 时间：2012-10-11T03:00:18.650
> 
> 标签：r, reshape2

> **可能重复：**
> [这个 R 重塑应该很简单，但是](https://stackoverflow.com/questions/12829995/this-r-reshaping-should-be-simple-but)

`dcast`来自`reshape2`没有公式且没有重复的作品。以这些示例数据为例：

```
df <- structure(list(id = c("A", "B", "C", "A", "B", "C"), cat = c("SS", 
"SS", "SS", "SV", "SV", "SV"), val = c(220L, 222L, 223L, 224L, 
225L, 2206L)), .Names = c("id", "cat", "val"), class = "data.frame", row.names = c(NA, 
-6L)) 
```

我想要`dcast`这些数据，只是将值制成表格，而不对`value.var`包括 default 在内的任何函数应用任何函数`length`。

在这种情况下，它工作正常。

```
> dcast(df, id~cat, value.var="val")
  id  SS   SV
1  A 220  224
2  B 222  225
3  C 223 2206 
```

但是当有重复变量时，`fun`默认为`length`. 有没有办法避免它？

```
df2 <- structure(list(id = c("A", "B", "C", "A", "B", "C", "C"), cat = c("SS", 
"SS", "SS", "SV", "SV", "SV", "SV"), val = c(220L, 222L, 223L, 
224L, 225L, 220L, 1L)), .Names = c("id", "cat", "val"), class = "data.frame", row.names = c(NA, 
-7L))

> dcast(df2, id~cat, value.var="val")
Aggregation function missing: defaulting to length
  id SS SV
1  A  1  1
2  B  1  1
3  C  1  2 
```

理想情况下，我正在寻找的是添加一个`fun = NA`，因为不要尝试聚合`value.var`. dcasting df2 时我想要的结果：

```
 id  SS  SV
1  A 220 224
2  B 222 225
3  C 223 220
4\. C NA  1 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-11T03:42:18.387

我不认为有办法直接做到这一点，但我们可以添加一个额外的列来帮助我们

```
df2 <- structure(list(id = c("A", "B", "C", "A", "B", "C", "C"), cat = c("SS", 
"SS", "SS", "SV", "SV", "SV", "SV"), val = c(220L, 222L, 223L, 
224L, 225L, 220L, 1L)), .Names = c("id", "cat", "val"), class = "data.frame", row.names = c(NA, 
-7L))

library(reshape2)
library(plyr)
# Add a variable for how many times the id*cat combination has occured
tmp <- ddply(df2, .(id, cat), transform, newid = paste(id, seq_along(cat)))
# Aggregate using this newid and toss in the id so we don't lose it
out <- dcast(tmp, id + newid ~ cat, value.var = "val")
# Remove newid if we want
out <- out[,-which(colnames(out) == "newid")]
> out
#  id  SS  SV
#1  A 220 224
#2  B 222 225
#3  C 223 220
#4  C  NA   1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-11T03:45:09.660

当 Dason 回答我的问题时，我想出了相同的解决方案。

我意识到`dcast`根本不知道如何处理重复。我想出如何欺骗它的方法是添加另一个唯一标识符，这样它就不会被重复混淆。

在这个例子中：

```
df <- ddply(df2, .(cat), function(x){ x$id2 = 1:nrow(x); x})
>  dcast(df, id+id2~cat, value.var="val")[,-2]
  id  SS  SV
1  A 220 224
2  B 222 225
3  C 223 220
4  C  NA   1 
```

# jquery - 为什么可以传递数组而不是选择器？

> ID：12831526
> 
> 赞同：0
> 
> 时间：2012-10-11T03:00:29.087
> 
> 标签：jquery

```
var arr = [1, 2, 3];

$(arr).each(function() { alert(this) }); 
```

这适用于 jQuery，但集合不是由 DOM 元素组成，而是由整数组成。这不应该是不允许的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:14:40.990

该`jQuery`函数（相当于`$`）返回一个**常规**的 jQuery 对象数组。

因此，您的代码片段可以正常工作是非常有意义的，因为它只是一个常规数组。

如果您按照[Paul Irish](http://paulirish.com/2011/11-more-things-i-learned-from-the-jquery-source/)所说的去做并查看源代码，您会发现它使用基本相同的代码

```
$.each(array, function(index, value) {}); 
```

它处理常规数组和对象。

基本上，它不关心数组*中*的内容是否可以工作，它只是遍历数组。

话虽如此，为了清楚起见，您可能应该使用[`$.each()`](http://api.jquery.com/jQuery.each/)变体，因为它更快（更直接），因此有人可以很快看到它是“普通”值的“常规”数组，而不是 jQuery 对象。

语义很重要，人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:13:55.823

正如 Felix Kling 所说，这是他们的决定。

`$(arr).each()`是允许的，但你不应该使用它，因为它被认为效率低于`$.each()`.

来源：[http ://api.jquery.com/each/#comment-40044794](http://api.jquery.com/each/#comment-40044794)

另请阅读：[http ://api.jquery.com/each/#comment-38585086](http://api.jquery.com/each/#comment-38585086)

# java - 使用java获取XML文件中的所有标签

> ID：12831530
> 
> 赞同：6
> 
> 时间：2012-10-11T03:00:48.703
> 
> 标签：java, xml, parsing, dom, sax

嗨，我想获取 XML 中所有标签的列表，如果某些标签带有特定属性，我还想要该属性的值。例如这里是一个具体的例子，

```
<?xml version="1.0" encoding="utf-8"?>
<bbc.mobile.news.view.AVGalleryView android:background="@drawable/gallery_item_selector" android:padding="2.0dip" android:focusable="true" android:layout_width="139.0dip" android:layout_height="130.0dip"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <bbc.mobile.news.view.NewsImageView android:id="@id/galleryItemView" android:background="#00000000" android:padding="0.0dip" android:layout_width="@dimen/thumbnail_width" android:layout_height="@dimen/thumbnail_height" />
    <TextView android:textSize="13.0sp" android:textColor="@color/thumbnail_text" android:ellipsize="end" android:id="@id/articleTitleId" android:background="@color/thumbnail_text_bg" android:paddingLeft="5.0dip" android:paddingTop="2.0dip" android:paddingBottom="5.0dip" android:layout_width="139.0dip" android:layout_height="50.0dip" android:maxLines="2" android:layout_below="@id/galleryItemView" />
    <ImageView android:layout_gravity="center_vertical" android:id="@id/avIconView" android:background="#99000000" android:duplicateParentState="true" android:layout_width="40.0dip" android:layout_height="40.0dip" android:src="@drawable/icon_playvideo_selected" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" />
</bbc.mobile.news.view.AVGalleryView> 
```

我对父子关系不感兴趣，如果存在父子关系，我想迭代到最深的孩子。如果存在于特定元素中，我还想要**android:id**和**android:name属性值。**

问题是您无法知道父子关系的深度以及它在 xml 中的位置。而且您以前也不知道标签名称。我可以考虑在我的代码中使用递归，但我相信有一个更简单的解决方案

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T03:21:11.510

我找到了解决方案，很简单，以前不知道这样`getElementsByTagName("*")`做，这是我的代码，

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(file);
    doc.getDocumentElement().normalize();
    System.out.println("Root element " + doc.getDocumentElement().getNodeName());

    NodeList nodeList=doc.getElementsByTagName("*");
    for (int i=0; i<nodeList.getLength(); i++) 
    {
        // Get element
        Element element = (Element)nodeList.item(i);
        System.out.println(element.getNodeName());
    } 
```

我在[这里找到了解决方案](http://www.roseindia.net/xml/dom/DOMElements.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-04T11:47:43.730

P basak 的回答是完美的。我在下面的代码中使用了 P basak 引用的 url。

```
import java.io.*;
import org.w3c.dom.*;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

public class XMLToTags {

    public static void main(String[] args) {

        try {
            BufferedReader bf = new BufferedReader(
              new InputStreamReader(System.in));
            System.out.print("Enter XML File name: ");
            String xmlFile = bf.readLine();
            File file = new File(xmlFile);
            if(file.exists()){

                DocumentBuilderFactory factory = 
                  DocumentBuilderFactory.newInstance();

                DocumentBuilder builder = factory.newDocumentBuilder();
                org.w3c.dom.Document doc = builder.parse(xmlFile);

                NodeList list = doc.getElementsByTagName("*");
                System.out.println("XML Elements: ");
                for (int i=0; i<list.getLength(); i++) {

                    Element element = (Element)list.item(i);
                    System.out.println(element.getNodeName());
                }
            }
            else{
                    System.out.print("File not found!");
                }
            }
        catch (Exception e) {
            System.exit(1);
        }
    }    
} 
```

# javascript - jQuery Mobile Web App - 单击指向另一个页面的链接 - 页面闪烁内容然后空白

> ID：12831533
> 
> 赞同：0
> 
> 时间：2012-10-11T03:01:18.527
> 
> 标签：javascript, jquery, mobile

这是我之前遇到的一个问题，我仍然不确定它为什么会发生。

有问题的页面是 - [http://nexrem.com/dragontimer/testdir/mobile/index.html](http://nexrem.com/dragontimer/testdir/mobile/index.html)

当您点击选择服务器按钮时，页面会闪烁应该存在的内容，然后是空白！我知道可以解决此问题的一种方法是添加`data-ajax="false"`到链接；但是，如果我这样做，那么我会遇到另一个问题：在 iPhone 上，如果我将页面添加到主屏幕然后运行它 - 单击“选择服务器” - 打开浏览器而不是停留在 Web 应用程序中。

我的目标是让用户能够将页面添加到他们的主屏幕，没有 url 栏，只需从内部运行所有页面。似乎拥有`<meta name="apple-mobile-web-app-capable" content="yes" />`和`data-ajax="false"`在一起是行不通的。

所以基本上有两件事：

*   如何修复屏幕闪烁并显示空白（除非刷新）
*   或者我怎样才能让 Web 应用程序没有工具栏，并且每次用户单击按钮时都不打开浏览器？

谢谢你

**编辑：**这是 index.html 和 servers.html 的代码

index.html - [http://pastebin.com/Qh5s7QRp](http://pastebin.com/Qh5s7QRp)

服务器.html - [http://pastebin.com/Exv2MJrS](http://pastebin.com/Exv2MJrS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:30:13.633

在您的文件`index.html`中，包含`rel="external"`而不是`data-ajax="false"`在您的链接定义中`Select server`。

所以，你应该有这个：

```
<a href="servers.html" data-role="button" data-theme="c" rel="external">Select server</a> 
```

您可能还需要将`data-ajax="false"`包含在`<a>`HTML 文件`index.html`和`servers.html`,链接中的每个 , 替换为`rel="external"`.

* * *

`rel="external"`查看在线文档以获取有关[http://jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)的更多信息：

> 指向其他域或具有**rel="external"**、 **data-ajax="false"**或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（**rel="external"**和**data-ajax="false"**）具有相同的效果，但语义不同： 链接到另一个站点或域时应使用 **rel="external" ，而****data-ajax=" false"**对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是选择链接到外部域的 Ajax 行为。

希望这可以帮助。

# html - html5画布内的无比例绘图

> ID：12831536
> 
> 赞同：0
> 
> 时间：2012-10-11T03:02:00.467
> 
> 标签：html, html5-canvas

我只是想知道这是否可能：假设您有一个可与 HTML5 画布一起使用的绘图应用程序……如果您只是说……画几条线和曲线。然后你可以缩放图像，就好像它是像 inscape 一样的矢量（数学存储）图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:02:29.433

您正在谈论可扩展的矢量图形或 SVG。

如果你不想自己做所有的工作，你可以找到很多用于 JavaScript 的 SVG 库，这很容易。 [拉斐尔](http://raphaeljs.com/)就是这样一个图书馆。

# python - 如何使用 python re 模块解析和匹配搜索引擎 url 中的关键字？

> ID：12831537
> 
> 赞同：0
> 
> 时间：2012-10-11T03:02:03.190
> 
> 标签：python, regex, asciiencoding

来自谷歌的例子：

```
http://www.google.com.co/url?sa=t&rct=j&q=pedro%20gomez%20proyecto%20en%20la%20ciudad%20de%20valledupar&source=web&cd=10&ved=0CFsQFjAJ&url=http%3A%2F%2Fwww.21molino.com%2F1410%2F8911.html 
```

或从 Bing 搜索：

```
http://www.bing.com/search?q=10%2F30+Sand&src=IE-SearchBox&FORM=IE8SRC 
```

我想要解析和匹配`?q=`或`q=`关键字，使用`(?<=)?`python`re`模块。如何将 ascii url 编码中的多个参数传递给 utf-8 以便读取？

在这里需要一些帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:12:16.953

试试这个：

```
[?&]q=([^&#]*) 
```

或者，更好的是：

```
import urlparse
pr = urlparse.urlparse(url)
qs = urlparse.parse_qs(pr.query)['q'] 
```

后者也会自动解码`%`-escapes。

# android - 如何让 Eclipse 识别我的 Nexus 7？

> ID：12831538
> 
> 赞同：2
> 
> 时间：2012-10-11T03:02:03.680
> 
> 标签：android, eclipse, driver, adb

这是我经历的过程：

*   我通过 Eclipse 下载了 USB 驱动程序。
*   然后我进入 Nexus 上的开发人员选项，打开 USB 调试以及模拟位置选项，然后在我的 main.xml 中将调试选项更改为 true。
*   在此之后，我将连接更改为 PTP。
*   然后我连接了我的设备并允许它安装它需要在设备管理器中识别自己的驱动程序。
*   我进入设备管理器，发现我的设备列为相机并更新驱动程序，以便它现在将我的设备列为 Android 复合 ADB 接口。 **这是我遇到麻烦的地方。**

即使它在我的设备管理器中如此列出，我仍然无法在 Eclipse 中发现它。我认为这可能与**它仍然被列为相机以及设备管理器中的 Android 设备**这一事实有关。

我尝试卸载设备的两个驱动程序，然后重新安装，但无济于事。我还尝试在 Eclipse 和命令提示符下重置 adb，但也没有用。我会尝试从我的计算机上删除设备的驱动程序，但我不知道在哪里可以找到它们。

谁能给我任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T03:25:43.320

[从http://www.asus.com/Tablets_Mobile/Nexus_7/#support_Download_32](http://www.asus.com/Tablets_Mobile/Nexus_7/#support_Download_32)下载 USB 驱动程序，然后在设备管理器中安装它。不要忘记勾选“调试模式”（在开发人员选项中）。

我的nexus 7会提示我是否要允许访问，没关系，都会被罚款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:28:43.400

对我来说，在我进入设置--->关于手机--->然后点击“内部版本号”至少 5 到 7 次以启用开发者模式后，我遇到了这个问题。结果我没有意识到在启用开发人员选项后，这只会使选项出现在您的安卓系统中，就像以前的版本一样。然后我回到设置并找到开发人员选项并检查用于调试等，当我在命令提示符下运行“adb devices”并显示它时它工作了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:10:53.610

哇，所以这花了一段时间，但我终于让它工作了。我从我的计算机中删除了所有分期付款的 SDK，然后在不同的位置再次安装它。不知何故，这奏效了。

# nsarray - 快速枚举和选择对象

> ID：12831546
> 
> 赞同：0
> 
> 时间：2012-10-11T03:02:48.697
> 
> 标签：nsarray, enumeration

我有一个数组（tempList），其中填充了从 sqlite 数据源读取的记录。我想根据“区域”对这些记录进行排序。所以我设置了以下 NSMUtableArrays：_Asia、_Africa、_CentralAmerica、_southAmerica。

该方法编译没有任何错误。如果'if' 语句返回true，它会执行'addObject' 但元素不会添加到数组中。

```
- (void) sortIntoRegions: tempList
{
    for (beans *arrayElement in tempList) {
        NSLog(@"region: %@", arrayElement.region);
        if ([arrayElement.region isEqualToString:@"Africa"]) {
            [_africa addObject:arrayElement.name];
        } else if ([arrayElement.region isEqualToString: @"Asia & South Pacific"]) {
            [_asia addObject:arrayElement.name];           
        }
        else if ([arrayElement.region isEqualToString: @"Central America"]) {
            [_centralAmerica addObject:arrayElement];
        } else if ([arrayElement.region isEqualToString: @"South America"]) {
            [_southAmerica addObject:arrayElement];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:07:04.553

我会冒昧地猜测你已经*声明* `_africa`了, `_asia`,`_centralAmerica`和`_southAmerica`to be `NSMutableArray *`，但你还没有*初始化*它们。也就是说，您还没有编写任何这样的代码：

```
_africa = [[NSMutableArray alloc] init];
_asia = [[NSMutableArray alloc] init];
_centralAmerica = [[NSMutableArray alloc] init];
_southAmerica = [[NSMutableArray alloc] init]; 
```

创建对象时，您的实例变量设置为 nil。向 nil发送消息（如`addObject:`）无效（并且不会打印警告或错误消息）。

# mysql - MySQL LEFT JOIN 以防万一？

> ID：12831548
> 
> 赞同：0
> 
> 时间：2012-10-11T03:02:53.727
> 
> 标签：mysql

我有一个表，我想根据一列的值加入不同的表，就像这样（这不起作用，但这是我的例子）：

`SELECT * FROM table1 JOIN (CASE WHEN table1_column1=1 THEN table2 ON table2_column1=table1_column2 END) WHERE table1_column3='hello'`

总而言之，该列中将有 4 个值，调用其他表。这是可行的吗？

编辑：我想我需要澄清我所追求的。根据 table1_column1 的值，我希望 JOIN 获取特定的表和列。例如，如果 t1c1=1，它应该在 table1_column2 上加入 table2_column1。但是，如果 t1c1=2，它应该在 table1_column2 上加入 table5_column1。等等等等等等。

再次 - 这是可行的吗？如果我使用两个单独的查询，它很容易编写脚本。但是，我只想使用一个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:06:41.047

```
SELECT * FROM 
table1 JOIN table2 ON table2_column1=table1_column2 AND table1_column1=1

UNION

 SELECT * FROM 
table1 JOIN table3 ON table2_column1=table1_column2 AND table1_column3='hello' 
```

它可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:06:48.790

```
SELECT * FROM table1 
JOIN  table2 ON table2_column1=table1_column2 and table1_column1=1 
WHERE table1_column3='hello' 
```

# lua - 'if' 语句的 Lua 字节码可以向后跳转吗？

> ID：12831557
> 
> 赞同：6
> 
> 时间：2012-10-11T03:04:07.213
> 
> 标签：lua, bytecode

我正在编写一些可以读取 string.dump() 函数产生的字节码的 Lua 代码。我假设（因为它允许一些优化和更少的编码）所有 OP_JMP 指令在用于 if 语句时都会增加指令指针。从技术上讲，他们可以向后跳，因为他们使用 sBx 值（可以是负数）。我只对标准 Lua 5.1 实现中的 if 语句的字节码感兴趣。

我使用[chunkspy](http://chunkspy.luaforge.net/)（btw 很棒的工具）来查看一些样本的字节码。

这是一个基本的 if 语句：

```
a, b = 1, 2
if a == b then
  print '='
elseif a < b then
  print '<'
else
  print '>'
end 
```

它产生四个跳跃，没有一个是负面的：

```
[08] jmp 4; to [13]
[12] jmp 11; to [24]
[16] jmp 4; to [21]
[20] jmp 3; to [24] 
```

[我尝试在Lua 源代码](https://www.google.ca/search?q=site:www.lua.org/source/5.1%20OP_JMP)中寻找答案，但结果令人困惑（如果我花时间掌握它，我相信它是超级优雅的代码）。

有谁知道 'if' 语句的情况，其中 lua 的 OP_JMP 指令对 sBx 有负值，或者知道它们是否总是正值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:24:33.960

**简短回答：IF 语句不能产生负 JMP**（在任何优化的编译器上，独立于语言）。Lua OP_JMP 对于循环和 goto 语句可能是负数（[http://lua-users.org/wiki/GotoStatement](http://lua-users.org/wiki/GotoStatement)）

长答案：这是因为向后跳转只会由任何编译器生成，如果它需要重复它已经翻译的某些代码（for，while循环......）。如果它踩到一个“新的”IF 语句，它总是会放置一个条件 JMP 和生成的代码/字节码作为下一个指令。

另一方面，“奇怪”的编译器会产生负的 IF 跳转。但这没有意义。为了对某个位置有一个负 IF JMP，过去必须已经跳过那个位置（通过正 JMP），所以它不能在执行速度方面优化代码。

# css - 在外部样式表中不显示背景图像

> ID：12831558
> 
> 赞同：0
> 
> 时间：2012-10-11T03:04:09.530
> 
> 标签：css, image, background

不知道发生了什么，但由于某种原因，在外部样式表中链接时我的背景图像没有显示。

示例1：（工作）

```
<html>
<head>
    ...
</head>
<body style="background: url(images/image.jpg);">
    ...
</body>
</html> 
```

示例 2：（非工作 - 外部 css 文件）

```
body {
    background: url(images/image.jpg);
} 
```

当/如果我使用第一个示例时显示图像，但当我使用第二个示例时不显示图像。

有什么建议么？先谢谢了...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T03:08:35.783

存储外部 CSS 文件的目录可能与放置内联样式的页面目录不同。您可能需要以斜杠开始您的路径。

```
url(/images/image.jpg) 
```

或者返回一个目录，比如

```
url(../images/image.jpg) 
```

# c# - 传入字典的模型项的类型为“yyyy”，但此字典需要类型为“xx”的模型项

> ID：12831560
> 
> 赞同：0
> 
> 时间：2012-10-11T03:04:12.410
> 
> 标签：c#, asp.net-mvc

我有两个模型，我想在一个视图中显示。所以我正在使用

```
 @Html.Partial 
```

这是我的第一个模型。

```
public partial class graduandModel :BaseNopEntityModel 
    {

        public graduandModel()
        {
            this.AvailableCeremony = new List<SelectListItem>();

        }

        public string first_name { get; set; }

        public string middle_name { get; set; }

        public string last_name { get; set; }

        public int student_id { get; set; }

        public int ceremony_id { get; set; }

        public DateTime ceremony_date { get; set; }

        public int graduand_id { get; set; }

        public IList<SelectListItem> AvailableCeremony { get; set; }

        public graduandDegreeModel graduandDegreeGroup { get; set; }

    } 
```

这是我的第二个模型。

```
 public class graduandDegreeModel
    {

        public graduandDegreeModel()
        {
            this.AvailableDegree = new List<SelectListItem>();

        }

        public  string degree_id { get; set; }
        public  int graduand_id { get; set; }

        public  string degree_name { get; set; }

        public IList<SelectListItem> AvailableDegree { get; set; }

    } 
```

这是 mu 控制器

```
public ActionResult CheckData(int ceremony_id, string first_name, string middle_name, string last_name)
        {
          graduandModel model = new graduandModel();

             graduandDegreeModel model_1 = new graduandDegreeModel();
             var graduandList = _graduandService.GetGraduandByStudent(ceremony_id, first_name, middle_name, last_name);             

               if (graduandList.Count != 0)
               {
                   model.ceremony_id = ceremony_id;
                   model.first_name = first_name;
                   model.middle_name = middle_name;
                   model.last_name = last_name;

                  // var degreeList = "";

                   foreach (var c in graduandList)
                   {

                       var degreeList = _graduandDegreeService.getAllDegreeIdBtGraduandId(c.graduand_id);

                       foreach (var d in degreeList)
                       {
                           model_1.AvailableDegree.Add(new SelectListItem() { Text = d.Degree.degree_name, Value = d.degree_id });
                       }
                   }
               }
               return View(model);           

        } 
```

这是我的看法

```
@{
    Layout = "~/Views/Shared/_ColumnsThree.cshtml";
}

@model graduandModel
@using Nop.Web.Models.Hire;
@using Nop.Web.Framework;
@using Telerik.Web.Mvc.UI;
@using System.Linq;

 @using (Html.BeginForm())
 { 
<table  >

 <tr>
    <td >
      Ceremony : 
    </td>
    <td>
       Ceremony at @Model.ceremony_date

    </td>
</tr>

  <tr>
            <td >
              Name :
            </td>
            <td >
               @Model.first_name  @Model.middle_name  @Model.last_name
            </td>
        </tr>

</table>

     <div>

          @Html.Partial("_DegreeDetailsByGraduand", Model.graduandDegreeGroup)

     </div>
 } 
```

这是我的部分观点

```
@{
    Layout = "~/Views/Shared/_ColumnsThree.cshtml";
}

@model graduandDegreeModel
@using Nop.Web.Models.Hire;
@using Nop.Web.Framework;
@using Telerik.Web.Mvc.UI;
@using System.Linq;

<table  >

 <tr>
    <td >
      AAAAAA
    </td>
    <td>
        @Html.DropDownListFor(model => model.degree_id, Model.AvailableDegree)
       @* @Html.ValidationMessageFor(model => model.ceremony_id)*@
    </td>
</tr>

</table> 
```

有错误

```
The model item passed into the dictionary is of type 'Nop.Web.Models.Hire.graduandModel', but this dictionary requires a model item of type 'Nop.Web.Models.Hire.graduandDegreeModel'. 
```

我怎么能爱它？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:00:47.960

您没有为 graduandModel 的 graduandDegreeGroup 属性创建实例。所以这一行：

`@Html.Partial("_DegreeDetailsByGraduand", Model.graduandDegreeGroup)`

会像你说的那样抛出异常。仅仅因为第二个参数是NULL。

您可以尝试修改 graduandModel 的构造函数如下：

```
 public graduandModel()
    {
        this.AvailableCeremony = new List<SelectListItem>();
        this.graduandDegreeGroup = new graduandDegreeModel();

    } 
```

异常应该消失了。您可能还会发现此链接很有帮助：[ASP.NET MVC renderpartial, model item passing into the dictionary is of type](https://stackoverflow.com/questions/8480031/asp-net-mvc-renderpartial-model-item-passed-into-the-dictionary-is-of-type)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:04:45.157

您的另一种选择可能是创建一个新的视图模型，将上述两个模型组合为一个。这样，它就具有此视图所需的所有数据的属性。然后你不需要在调用局部视图时指定模型，它会自动使用父模型。或者，您可能根本不需要使用组合模型将视图分成部分。每个不同的视图都有一个唯一的视图模型并不少见。在某些应用程序中，很少有两个不同的视图需要相同的数据。

组合视图模型：

```
public class CheckDataViewModel 
    {
        public CheckDataViewModel ()
        {
            this.AvailableCeremony = new List<SelectListItem>();
            this.AvailableDegree = new List<SelectListItem>();
        }
        public string first_name { get; set; }
        public string middle_name { get; set; }
        public string last_name { get; set; }
        public int student_id { get; set; }
        public int ceremony_id { get; set; }
        public DateTime ceremony_date { get; set; }
        public int graduand_id { get; set; }
        public IList<SelectListItem> AvailableCeremony { get; set; }
        public graduandDegreeModel graduandDegreeGroup { get; set; }
        public  string degree_id { get; set; }
        public  string degree_name { get; set; }
        public IList<SelectListItem> AvailableDegree { get; set; }
    } 
```

综合观点：

```
@{
    Layout = "~/Views/Shared/_ColumnsThree.cshtml";
}

@model CheckDataViewModel
@using Nop.Web.Models.Hire;
@using Nop.Web.Framework;
@using Telerik.Web.Mvc.UI;
@using System.Linq;

 @using (Html.BeginForm())
 { 
<table  >

 <tr>
    <td >
      Ceremony : 
    </td>
    <td>
       Ceremony at @Model.ceremony_date

    </td>
</tr>

  <tr>
            <td >
              Name :
            </td>
            <td >
               @Model.first_name  @Model.middle_name  @Model.last_name
            </td>
        </tr>

</table>

     <div>

         <table  >

 <tr>
    <td >
      AAAAAA
    </td>
    <td>
        @Html.DropDownListFor(model => model.degree_id, Model.AvailableDegree)
       @* @Html.ValidationMessageFor(model => model.ceremony_id)*@
    </td>
</tr>

</table>

     </div>
 } 
```

# asp.net-mvc-3 - MVC 更改包含而不刷新默认视图

> ID：12831567
> 
> 赞同：0
> 
> 时间：2012-10-11T03:05:09.623
> 
> 标签：asp.net-mvc-3

现在我尝试在 mvc3 中这样做，当我单击刷新或更改页面时，它会刷新整个内容，在此之前会变成一个空白页面。现在我想要的是当我单击刷新按钮或转到另一个视图时，只有页面的某些部分发生了变化。假设我有 3 个： header 、 main 和 footer 。页眉和页脚将是默认设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:40:39.910

您可以`Layout`在 MVC 3 中使用此功能，在您创建的项目中，有一个**Layout.cshtml**文件可供您使用。

布局的作用类似于 .aspx Web 表单中的母版页。

> 该文件位于 Views > Shared > Layout.cshtml

在这里你可以定义所谓的页眉和页脚，在这个文件中是预定义的，现在每当你想在你的视图中使用这个布局时，你只需要在你的视图中包含这一行。

```
@{
   ViewBag.Title = "Some Title";
   Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

此外，如果您在`<header>`和`<footer>`标记之间的某处打开 Layout.cshtml，您会发现以下代码行...

```
<section id="main">
    <div>
    @RenderBody()
    </div>
</section> 
```

在 Layout.cshtml 中编写的`@RenderBody`代码行会自动将视图的内容放在页眉和页脚部分之间

欢迎来到 Stackoverflow！:)

# html - solr如何高亮识别html标签？

> ID：12831570
> 
> 赞同：0
> 
> 时间：2012-10-11T03:05:24.947
> 
> 标签：html, solr, tags, highlight

我有一个关于 Solr 突出显示的问题。

当您通过方法“setHighlightSimplePre”和“setHighlightSimplePost”使用突出显示功能并设置一些html标签时，您会得到一个被html标签包围的突出显示的词。
例如，当您使用“test”进行查询，并将“<b>”设置为 setHighlightSimplePre 的参数，并将“</b>”设置为 setHighlightSimplePost 的参数时，您会得到“<b>test</b>”为字符串形式，只要至少一个字段的值为“test”。

这是一件事。如果一个字段的值类似于“testA <b>testB test”，你会得到“testA <b>testB <b>test</b>”，这意味着你会看到“testA **testB <b>**

我怎么解决这个问题？也就是说，在这个例子中，我想输出像“testA <b>testB **test** ”这样的结果。
有没有办法在突出显示之前识别 html 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:13:06.597

您可以在突出显示之前从内容中删除 html。

或者你可以使用高升类而不是 <b>，比如

```
setHighlightSimplePre('<span class="hilite">');

setHighlightSimplePost('</span>'); 
```

然后覆盖周围内容的样式：

```
div.content b {font-weight: normal;} 
```

并设置高亮文本的样式：

```
.hilite {font-weight: bold; color: yellow;} 
```

# java - Switch 语句出于某种原因不喜欢案例 8。编译器的行为非常奇怪

> ID：12831571
> 
> 赞同：0
> 
> 时间：2012-10-11T03:05:29.410
> 
> 标签：java, syntax-error

这是代码：

```
public static void main(String args[])
    {
        int i=0;
        int m=0;
        double scale;
        boolean exit;
        Shape[] s = new Shape[10];
        while(exit !=true)
        {
            System.out.print("\nChoose an option:\n"+
                    "1-Add a new circle\n"+
                    "2-Add a new rectangle\n"+
                    "3-Delete all shapes\n"+
                    "4-Scale all shapes\n"+
                    "5-Display perimeter of all shapes\n"+
                    "6-Display the area of all shapes\n"+
                    "7-Enter scale factor\n"+
                    "8-Exit program\n");

            Scanner input = new Scanner(System.in);
            m=input.nextInt();

            if(i<=9)
            {
                switch (m)
                {

                 case 1: Circle c = new Circle(0);
                         s[i]=c;
                         i++;
                         break;
                 case 2: Rectangle r = new Rectangle(1,1);
                         s[i]=r;
                         i++;
                         break;

                 case 3: s=null;
                         i=0;
                         break;
                 case 4: for(i=0; i<s.length; i++)
                         {
                             s[i].scaleShape();
                         }
                         break;
                 case 5: for(i=0; i<s.length; i++)
                         {
                            if(s[i] != null)
                            {   
                                System.out.println(s[i].getPerimeter());
                            }
                         }
                         break;
                 case 6: for(i=0; i<s.length; i++)
                         {
                            if(s[i] != null)
                            {
                                System.out.println(s[i].getArea());
                            }
                         }
                         break;
                 case 7: do
                         {
                            System.out.println("\nEnter scale factor");
                            scale=input.nextDouble();
                         }
                         while(scale<0);
                         Shape.setScaleFactor(scale);

                         }
                         break;

                 case 8: System.out.println("Do you want to quit?");
                         break; //Nothing here since loop should terminate it.

                 //default: System.out.println("Number must be 1-8");
                         // break;

              } 

         }
     }
   } 
```

## 奇怪的是，编译器在案例 8 上给我一个错误说：

> 类型不匹配无法从 int 转换为 boolean。

但我没有将任何东西转换为布尔值

> - 令牌“case”上的语法错误断言预期 - 令牌上的语法错误 :, ; 预期的

但是那里的所有命令都有分号

> 表达式必须返回一个值

为什么编译器的行为如此有趣？通常这样的错误很容易找到。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:08:35.413

您的问题是*7*的情况：

```
case 7: do
        {
             System.out.println("\nEnter scale factor");
             scale=input.nextDouble();
        }
        while(scale<0);
        Shape.setScaleFactor(scale);

        } 
```

注意额外的大括号：那是关闭你的`switch`语句，孤立你的`case 8`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T03:07:54.007

```
 } // <-- Why is this here?
                     break;

             case 8: System.out.println("Do you want to quit?"); 
```

你用一个额外的`}`. 删除它，事情可能会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T03:17:49.153

每个人都指出你的代码中有一个额外的括号，我们没有指出的是它来自哪里......

```
while(scale<0); // <-- This isn't going to work....
    Shape.setScaleFactor(scale);
} 
```

它应该是...

```
while(scale<0) {
    Shape.setScaleFactor(scale);
} 
```

下一个问题是，规模如何减少？因为如果你不小心，这可能会导致无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:14:01.597

```
while(scale<0);
Shape.setScaleFactor(scale);

} // Remove this parenthesis.
break; 
```

# nhibernate - 一对一 一对多关系

> ID：12831581
> 
> 赞同：0
> 
> 时间：2012-10-11T03:06:50.993
> 
> 标签：nhibernate

两个实体的映射文件如下，我想为两个实体建立一对多关系，但是“一个”实体的列不是关键列。由于数据库表无法更改，我可以有一个方法来构建它.请帮助我，谢谢。

```
<class name ="Sue" table="[Sue]">
    <id name="ID" column ="ID" type="Guid" />

    <property name="SueSmallType">
        <column name="SueSmallType" sql-type ="nvarchar(Max)" />
    </property>

</class>

<class name ="SueType" table="[SueType]">
    <id name="ID" column ="ID" type="Guid" />

    <property name="Code">
        <column name="Code" sql-type ="nvarchar(Max)" />
    </property>

</class> 
```

例如建立与“SueSmallType”和“Code”的关系，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:23:15.057

property-ref 适用于这种情况，但您将放松延迟加载，因为“SueSmallType”不是引用对象的 Id。

```
<class name ="Sue" table="[Sue]">
    <id name="ID" column ="ID" type="Guid" />

    <many-to-one name="SueType" column="SueSmallType" property-ref="Code"/>
</class>

<class name ="SueType" table="[SueType]">
    <id name="ID" column ="ID" type="Guid" />

    <property name="Code">
        <column name="Code" length="8000" />
    </property>
</class> 
```

请注意，超过某个阈值（例如 8000）的长度属性与将 sqltype 设置为数据库长文本类型（nvarchar(max), text）具有相同的效果

# wordpress - NivoSlider 进入 wordpress 简码

> ID：12831595
> 
> 赞同：0
> 
> 时间：2012-10-11T03:08:56.217
> 
> 标签：wordpress, nivo-slider, shortcode

我已经在我的 wordpress 主题中手动实现了 NivoSlider。一切都很好，现在我需要从我的 index.php 文件中隐藏 div#NivoSlider ，这样滑块只会显示短代码选项。在其他页面或小部件中。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:34:50.567

您可以将 Nivoslider 代码放在自定义 HTML 小部件中，并在您想要调用的地方调用小部件，例如 .... 仅在主页或您想要的任何地方，或者您可以将代码置于特定条件下，如 is_frontpage() 或 is_page('关于'）。

```
<?php if(is_front_page())
{ ?>
    <div id="nivo-slider">
        slider code
    </div>

<?php }
else
{ ?>
    <div id-"normal">

    </div>
<?php }

?> 
```

# android - Android listview firstscreen的项目动画没有效果

> ID：12831598
> 
> 赞同：0
> 
> 时间：2012-10-11T03:09:26.497
> 
> 标签：android, listview, animation

我有一个`listview`活动，每个`listview`项目都有一个`viewswitcher`，并且有两个子视图`viewswitcher`。我在布局 xml 中设置了 viewswitcher 的`android:inAnimation`和属性。`android:outAnimation`当我运行应用程序时，我发现listview的第一个屏幕在`viewswitcher`切换其子视图时没有动画效果，但第一个屏幕中的其他项目没有动画效果。

是什么导致了这个问题？如何解决？

# java - 带有文件而不是数据库的 ContentProvider

> ID：12831599
> 
> 赞同：0
> 
> 时间：2012-10-11T03:09:35.013
> 
> 标签：java, android

我见过很多使用 ContentProvider 与 sqlite 数据库交互的例子。我在某处阅读了说明 ContentProvider 也能够与普通文件交互的文档。但是我们要怎么做呢？到目前为止，我找不到任何与此相关的简单示例，我尝试编写自己的但发现

```
public abstract Cursor query (Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) 
```

返回 Cursor 但不返回文件输入/输出流（或其他等价物。）让我从文件中检索数据。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:51:54.760

当您在应用程序中实现内容提供程序时，如何处理查询功能取决于您。在 qwery 函数中，您可以构造一个 MatrixCursor 并填充条目并返回它，而不是从数据库查询中返回游标。

# python - 数组限制的 Python 简写

> ID：12831600
> 
> 赞同：0
> 
> 时间：2012-10-11T03:09:56.020
> 
> 标签：python, numpy

给定一个`numpy`数组：

```
a = arange(10,20,1) 
```

我经常需要一个包含数组的第一个和最后一个元素的元组：

```
w = a[0],a[-1] 
```

是否有一个方便的 python 切片快捷方式可以在单个引用中执行此操作`a`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T03:17:55.247

是的，使用 Numpy 的*高级索引*：

```
w = a[[0, -1]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:12:17.357

也许你想要：

```
a[::len(a)-1] 
```

这告诉它从头到尾给你一个切片，“step”值比数组的长度小一个（所以取第一个值，然后取一个后面的`len(a)-1`索引，这是最后一个值）。

它似乎在 numpy 中运行良好：

```
>>> import numpy
>>> a = numpy.arange(10, 20, 1)
>>> a
array([10, 11, 12, 13, 14, 15, 16, 17, 18, 19])
>>> a[::len(a)-1]
array([10, 19])
>>> tuple(a[::len(a)-1])
(10, 19) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T03:16:27.353

你可以轻松制作一个

```
>>> from operator import itemgetter
>>> from numpy import arange
>>> a = arange(10,20,1)
>>> first_and_last = itemgetter(0, -1)
>>> first_and_last(a)
(10, 19) 
```

# xna - 你如何编写一个什么都不做的顶点着色器？

> ID：12831601
> 
> 赞同：4
> 
> 时间：2012-10-11T03:09:56.580
> 
> 标签：xna, hlsl

尽管我面临的问题很简单，但我在互联网上的任何地方都找不到答案。我有一个从我正在使用的 RenderTarget 获得的源纹理，然后我将其传递给我的效果。我的效果有一个顶点着色器和一个像素着色器，但像素着色器是重要的。我希望顶点着色器对输入顶点完全不做任何事情。然后输出应该被传递给我的像素着色器，它将对图像执行图像处理（如模糊等）。其结果将被绘制到屏幕上。

所以基本上，我只想要一个顶点着色器，它可以将纹理输入并完全不改变地传递出去。这里没有 3D 几何可言。

这是我为此编写的代码：

```
 float4 VSBasic(float4 vin : POSITION) : POSITION
{
    return vin;
} 
```

这是我的像素着色器，它应该将所有像素变为红色：

```
 float4 PS_GaussianBlur(float2 texCoord : TEXCOORD) : COLOR0
{
    float4 color = float4(0.0f, 0.0f, 0.0f, 1.0f);

    //int kernelLength = min(31, kernelRadius * 2 + 1);
    //for (int i = 0; i < kernelLength; i++)
        //color += tex2D(colorMap, texCoord + offsets[i]) * kernel[i];

    color = float4(1.0f, 0.0f, 0.0f, 1.0f);
    return color;
} 
```

请注意，模糊部分已被注释掉以进行测试。

那我做错什么了？？？

PS 我什至使用顶点着色器的唯一原因是因为 XNA 会抱怨我正在使用冲突的像素/顶点着色器版本，除非我在效果中指定我应该编译 PS_3_0 和 VS_3_0（因为我需要 PS_3_0，我有这个在 PS_2_0 中工作没有顶点着色器）。因此，如果有不同的方法来指定顶点着色器版本而不实际实现顶点着色器，请告诉我。

编辑：澄清一下，我的解决方案在 PS_2_0 中效果很好，但我认为 PS_2_0 没有足够的常量寄存器。我想要做的是将我的着色器扩展到 PS_3_0 以便我可以使用更多的寄存器。然而，当我这样做时，XNA 抱怨 PS_3_0 不向后兼容较低的顶点着色器，所以我不得不制作自己的顶点着色器。但是，我不希望这个顶点着色器做任何事情，因为所有的工作都是在我的像素着色器中完成的。我希望这能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:19:54.510

我不知道你做错了什么，因为你还没有说你是如何渲染的。我假设您正在使用`SpriteBatch`，这是一个坐标系问题。

[您可以在XNA Stock Effects](http://xbox.create.msdn.com/en-US/education/catalog/sample/stock_effects)下载中找到`SpriteBatch`内部使用的着色器。

你会注意到它有一个投影变换。您`SpriteBatch`在客户空间中输入坐标。但渲染实际上发生在光栅空间（投影矩阵将顶点转换到这个空间）。

客户端空间从左上角的 (0,0) 到视口右下角的 (width,height)。

投影空间从左下角的 (-1,-1) 到视口右上角的 (1,1)。

通常，对于全屏效果，最简单的方法是简单地渲染到覆盖光栅空间的固定四边形（即：不要使用`SpriteBatch`，而是使用顶点缓冲区）。您不需要任何投影矩阵，并且您的顶点着色器可以为空。

[如果您确实](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritebatch-and-custom-shaders-in-xna-game-studio-4-0.aspx)想使用`SpriteBatch`. 请注意，为顶点着色器提供的代码实际上是错误的——它不包括投影变换。

另外，我怀疑您没有通过`TEXCOORD0`（并且可能`COLOR0`）通过您的着色器将是一个问题。

# python - 在python中格式化/显示列表

> ID：12831602
> 
> 赞同：0
> 
> 时间：2012-10-11T03:10:05.543
> 
> 标签：python, list, string-formatting

我是 python 新手，我有一个正在运行的代码，它从 Web 服务中提取数据并将其放入列表中并将其写入文本文件。当我运行此代码并打开文本文件时，数据是连续的。我需要在文本文件的每一行中显示 5 个元素，然后转到下一行并写入接下来的 5 个元素，依此类推。希望你能帮助我解决这个问题或建议其他方式来做到这一点。这是代码。

```
f = open("test.txt", "w")

for item in test:
    f.write("%s    |    " % item)
f.close() 
```

结果如下所示：

```
data1, data2, data3, data4, data5, data6, data7, data8...................... 
```

它应该是这种格式：

```
data   |   data2   |   data3   |   data4   |
data5  |   data6   |   data7   |   data8   |
data9  |   data10  |   data11  |   data12  | 
```

我希望我能得到你的意见。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:27:29.437

这些字符不在列表*中*，它们**是**列表。

```
>>> print ''.join(['foo', 'bar', 'baz'])
foobarbaz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:08:29.507

正如@Ignacio 所说，您需要更改打印列表的方式。

```
for line in list_s:
    # f.write("%s\n" % line) 
    f.write(''.join(line)) 
```

如果你想在表格中显示它，你可以像这样格式化每一行：

```
>>> print '{0:10s} {1:10s} {2:10s}'.format('foo', 'bar', 'baz')
foo        bar        baz 
```

或者用线条：

```
>>> print '{0:10s} | {1:10s} | {2:10s}'.format('foo', 'bar', 'baz')
foo        | bar        | baz 
```

有关更多信息，请参阅 Python[输入和输出文档](http://docs.python.org/tutorial/inputoutput.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T07:10:54.413

```
for i, item in enumerate(test):
    if i and i % 4 == 0:
        f.write("\n")
    f.write("%-9s|   " % item) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:44:17.130

什么叫“特殊字符”？您拥有的数据的编码是什么？在继续之前，重要的是您确实了解什么是编码，什么是 unicode，并且您获得的世界和数据不限于主要用于英语的 26 个字母。 [查看这篇文章](http://www.joelonsoftware.com/articles/Unicode.html)以了解它。

也就是说，Python 可以以您选择的编码方式对您的数据进行编码 - 甚至是 ASCII，因此您只能获得 32-127 字符，而根本没有“陌生”字符 - 例如 ã、ç、É - 或者您可以对数据进行编码在 utf-8 中能够使用我们在地球上使用的整个字符数组。但是，如果您只能“编码”Unicode 数据（如果您使用编码字符串方法，Python 会尝试将字节字符串隐式转换为 unicode） - 所以无论如何您都必须知道数据源的编码。一旦您的数据被解码为 un​​icode（在您正在运行的程序中），您可以将其编码为您想要的输出（例如 ASCII 或 "quopri_codec" ），并在您的调用中将“errors”关键字参数设置为“ignore”或“xmlcharrefreplace”进行编码。

为了更好地理解它，请查看Python的[编解码器文档](http://docs.python.org/library/codecs.html)

例如，假设您的输入数据以 iso8859_15 编码（又名 latin1 或 cp1252 put 或 take 2 char 定义），并且您的真正意思是禁止任何非英文字符：

```
s = client.service.GetData('data1')
s = s.decode("iso88159_15").encode("ASCII", errors="ignore")
sr = '<root>%s</root>' % s
root = ET.fromstring(sr) 
```

Otoh，由于您正在对 xml 进行编码，因此将 xml 引用放在您不想处理的字符上应该不会受到伤害 - （因为编码为 utf-8 也不会受到伤害）：

```
s = s.decode("iso88159_15").encode("ASCII", errors="xmlcharrefreplace") 
```

# php - 如何限制为特定数组键打印的字符数

> ID：12831603
> 
> 赞同：0
> 
> 时间：2012-10-11T03:10:06.487
> 
> 标签：php, mysql, arrays, pdo, html-table

下面的脚本使用 PDO 打印基于 MySQL 查询的表：

```
<?php  
//PDO start
$dbh = new PDO(...);
$stmt = $dbh->prepare($query);
$stmt->execute();
$stmt->setFetchMode(PDO::FETCH_ASSOC);
$arrValues = $stmt->fetchAll();   

//create table
print "<table> \n";
print "<tr>\n";

//add table headers
foreach ($arrValues[0] as $key => $useless){ 
print "<th>$key</th>";
}
print "</tr>";

//add table rows
foreach ($arrValues as $row){
    print "<tr>";
    foreach ($row as $key => $val){
        print "<td>$val</td>";

    }
print "</tr>\n";
}
//close the table
print "</table>\n";
?> 
```

这很好用，但是数组中的一个键包含一些很长的段落文本。下面是一个示例 vardump：

```
array
  0 => 
    array
      'Name' => string 'John' (length=5)
      'Day' => string 'Monday' (length=6)
      'Task' => string 'This is a really long task description that is too long to be printed in the table' (length=82)
      'Total Hours' => string '5.00' (length=4) 
```

我希望“任务”键只打印前 50 个字符，最后带有“...”。我不确定如何在 foreach 循环中添加该条件。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:13:34.033

在此处添加条件：

```
foreach ($row as $key => $val){
    print "<td>$val</td>";
} 
```

您将检查它是否超过 50 个字符：

```
$truncate_keys = array("task");
foreach ($row as $key => $val){
    if (strlen($val) > 50 && in_array($key, $truncate_keys)) {
        print "<td>" . substr($val, 0, 50) . "...</td>";
    } else {
        print "<td>$val</td>";
    }
} 
```

请注意：这种方法会在单词中间切断。这个问题已经解决了，而且方法更好；例如，[这个 CodeIgniter 助手](https://github.com/EllisLab/CodeIgniter/blob/develop/system/helpers/text_helper.php)有一个据称可以保持文字完整的解决方案。

# c# - 从 XML 读取的 WinForms DataGridView - 无法过滤 Date，因为它没有意识到属性是 DateTime？

> ID：12831604
> 
> 赞同：0
> 
> 时间：2012-10-11T03:10:18.420
> 
> 标签：c#, xml, winforms, datagridview

我试图能够根据 DateTime 信息（早于或大于某个日期）过滤 DataGridView，但是当我创建过滤器时，它说它无法将字符串与 DateTimes 进行比较，因为它读取了所有信息从 XML 文件作为字符串，我不知道如何键入它们。**任何人都可以帮忙吗？**

**更详细的解释：**我有一个包含信息的 XML 文件，我使用`myDataSet.ReadXML()`. 我在前面的步骤中自己创建了 XML。这是一个示例：

```
<site>
<subsite URL="http://website/home">
    <pages />
    <subsite URL="http://website/home/de-de">
        <pages>
            <page name="default_ex.xml" URL="http://www.my-website.com/home/de-de/default_ex.aspx" CreatedOn="8/23/2012 3:13:47 PM" CreatedBy="Joe Schmoe" LastModifiedOn="8/23/2012 3:17:44 PM" LastModifiedBy="Joe Schmoe" Version="1.0" PublishingStartDate="" PublishingExpirationDate="" ApprovalState="APPROVED" FileSize="1120" CheckedOutUser="" DaysSinceCreated="46" DaysSinceLastModified="46" IsPublicFacing="False"/>
        </pages>
    </subsite>
    <subsite URL="http://website/home/en-us">
        <pages>
            <page name="default_ex.xml" URL="http://www.my-website.com/home/en-us/default_ex.aspx" CreatedOn="8/23/2012 10:40:53 AM" CreatedBy="Joe Schmoe" LastModifiedOn="8/23/2012 2:55:15 PM" LastModifiedBy="Joe Schmoe" Version="2.0" PublishingStartDate="" PublishingExpirationDate="" ApprovalState="APPROVED" FileSize="1122" CheckedOutUser="" DaysSinceCreated="46" DaysSinceLastModified="46" IsPublicFacing="False"/>
        </pages>
    </subsite>
    <subsite URL="http://website/home/fr-fr">
        <pages>
            <page name="default_ex.xml" URL="http://www.my-website.com/home/fr-fr/default_ex.aspx" CreatedOn="8/2012 1:12:30 PM" CreatedBy="Boring Guy" LastModifiedOn="8/23/2012 11:59:41 AM" LastModifiedBy="Joe Schmoe" Version="1.1" PublishingStartDate="" PublishingExpirationDate="" ApprovalState="PENDING" FileSize="955" CheckedOutUser="" DaysSinceCreated="47" DaysSinceLastModified="46" IsPublicFacing="False"/>
        </pages>
    </subsite>
    <subsite URL="http://website/home/ja-jp">
        <pages>
            <page name="default_ex.xml" URL="http://www.my-website.com/home/ja-jp/default_ex.aspx" CreatedOn="8/23/2012 3:50:29 PM" CreatedBy="Mary Poppins" LastModifiedOn="8/23/2012 3:58:28 PM" LastModifiedBy="Mary Poppins" Version="1.0" PublishingStartDate="" PublishingExpirationDate="" ApprovalState="APPROVED" FileSize="1199" CheckedOutUser="" DaysSinceCreated="46" DaysSinceLastModified="46" IsPublicFacing="False"/>
        </pages>
    </subsite>
</subsite> 
```

...然后将其加载到 DataGridView 中，如下所示...：

```
myDataSet.ReadXml(@"MyData.xml");
myDataView = new DataView(myDataSet.Tables["Page"]);
myDataGridView.DataSource = myDataView; 
```

...到目前为止效果很好。我什至可以很容易地过滤它，但是当我尝试基于不应该是字符串的属性（例如“LastModifiedOn”）进行一些过滤时，就像这样......：

```
myDataView.RowFilter = "PublishingExpirationDate > #" + DateTime.Now.Date.ToString() + "#"; 
```

...我收到一个错误，因为就 DataView（或 DataGridView，我不确定）而言，“PublishingExpirationDate”是字符串。**我如何能够根据非字符串列进行过滤？**

*注意：我对 XML 有点陌生，我在前面的步骤中自己在这个项目中创建了 XML，所以如果需要，我可以修改语法以使其工作，我只是不知道如何。*

请和谢谢！- 基思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:39:19.740

您已经确定了问题：您的 XML 文件中的“PublishingExpirationDate”字段被表示为字符串而不是 a `System.DateTime`，因此您的`DateTime`比较失败了。

`DateTime`一种解决方案是在创建 XML 时指定该特定字段的数据类型。

另一种选择是设置[`DataColumn.Expression`属性](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx#Y5077)以使用该`Convert`功能。但是，如果您尝试此操作，您会发现它在“PublishingExpirationDate”字段中具有空值的记录上失败。要解决此问题，请使用该`IIf`函数来确定该字段对于给定记录是否为空，以及它是否替换为任意`DateTime`值，该值将从比较中获得您想要的结果。

您似乎`RowFilter`排除了过去日期为“PublishingExpirationDate”的记录。在这种情况下，您可以将比较日期替换`DateTime.Min`为具有空“PublishingExpirationDate”字段值的记录。

这是您的过滤器的外观：

```
var filter = string.Format("CONVERT(IIF(LEN(PublishingExpirationDate) = 0,'{0}',PublishingExpirationDate),'System.DateTime') > #{1}#", DateTime.MinValue.ToString(), DateTime.Today.ToString());
myDataView.RowFilter = filter; 
```

# jquery - 如何在 ajaxSetup 和 jquery 中使用上下文变量

> ID：12831605
> 
> 赞同：0
> 
> 时间：2012-10-11T03:10:22.323
> 
> 标签：jquery, ajax

我在一个页面上有多个表单，我通过 Ajaxform 插件提交它们，就像这样

```
<td>  <form> form1 </form> </td>
<td>  <form> form2 </form>  </td> 
```

* * *

```
var options = {
            target:        '.ajaxMessage',  
            dataType: 'json',  // pre-submit callback 
            success:     function(data, statusText, xhr, form){ myResponse(data,form)},
            context: { element: this},

            cache: false,
            delegation: true,
            type: 'POST'   }; 

            $(".rform").ajaxForm(options); 
```

在我的 AjaxSetup 中，我有这个

```
beforeSend:function(xhr, settings){

        $this = settings.context.element;       
        alert($this); 
```

但它不起作用，警报说窗口对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:18:49.160

当您创建选项时，“this”指的是窗口。

不确定您要`this`在 中引用什么`beforeSend`，但将其设置为 jQuery 引用可能是最简单的......就像这样：

```
<form id="form1">...</form>
<form id="form2">...</form> 
```

对于您的上下文对象：

```
context: { element: $('#form2') }, 
```

**我看到**评论后更新。**这并不优雅，但您可以使用插件的`beforeSubmit`回调为表单设置一个全局变量（将其传递给该回调），然后在您的`beforeSend`回调中访问它。**

 **将代码放在`beforeSubmit`回调中甚至可能会更好。

（这一切都假设您正在使用[这个 ajaxForm 插件](http://www.malsup.com/jquery/form/#options-object)。）

**更新示例：**

```
var options = {
  ...
  beforeSubmit: function(arr, $form, options) {
     // save the form somewhere we can get it later:
     $.MyActiveForm = $form;
  } 
```

现在在您的 onSend 功能中，您可以访问`$.MyActiveForm`

`onSend`但是，我仍然认为你最好只做你在函数中要做的任何事情， in `beforeSubmit`，除非你需要在那个特定点进行干预。**

# java - 我怎样才能制作一个只接受字母退格和空格键的文本字段

> ID：12831606
> 
> 赞同：0
> 
> 时间：2012-10-11T03:10:34.160
> 
> 标签：java

如果用户键入特殊字符或数字，我需要有一个不显示任何内容的文本字段。我有这个名称文本字段，我需要将其缩小为仅输入的字母。用户还可以退格和移位（通过使用 keypress 或 keytyped 或 keyrelease 哪个更好）

已编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:02:27.760

`DocumentFilter`在这种情况下是你的朋友。

> DocumentFilter，顾名思义，是 Document 变异方法的过滤器

我也会在[MDP 的博客](http://www.jroller.com/dpmihai/entry/documentfilter)中找到一些很好的例子。

# java - Java中的类重载-可能吗？

> ID：12831614
> 
> 赞同：-3
> 
> 时间：2012-10-11T03:11:51.260
> 
> 标签：java, compiler-construction, syntax

除了使用传统的多态性`... extends LinkedList<T>`，**有没有办法在 Java 中重载诸如 String、List 或自定义 MyClass 类之类的类？**.

```
theList.doRandomShuffle(123); or theList.persistOnFile("fileName"); 
```

如果可能的话，混合 C 代码来实现这一点是在桌面上的。任何进一步的建议都会很有用。

更新：好的。字符串类不是一个很好的例子。目的是在不声明新列表`MyList extends LinkedList<T>`或为所需函数创建实用程序类的情况下扩展类。我正在消除两种扩展实现的可能性，并询问是否有更多选择，即使它是核心。

**除此之外的原因是质疑是否可以扩展类，特别是对于 jar 库而不适应 LinkedList impl 的新扩展类。任何。我对没有人确切知道的社区感到非常失望，认为即使是提问也应该开箱即用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:16:56.580

在 Java 中，您不能将方法添加到已定义的类（例如 String）。但是，如果该类不是`final`，您可以扩展它以创建自定义方法。

（从技术上讲，您可以向已定义的类添加方法，但这很麻烦，并且违反了 Java 的使用条款和条件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:14:13.283

您不能覆盖 String 行为，因为该类是最终的。当然，您可以使用自定义类来执行此操作。你能更具体地说明你想要做什么吗？

没有办法做出任何一个示例语句

String.doFunyStuff(123); "doFunny".onMe(1);

在java中合法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:14:34.377

String 类是最终类，不能扩展它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:15:12.720

不，Java 不支持C# 中的[扩展方法之类的东西。](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)您可以做的最好的事情是定义一个静态方法，该方法将 a`String`作为参数，然后对其进行操作，可能返回 a `String`。由于`String`是一个[不可变的类](http://www.javapractices.com/topic/TopicAction.do?Id=29)，因此除了语法之外，应该与您尝试实现的目标没有区别。

# iphone - 我可以使用什么方法来提醒用户他们已经输入了一个位置？

> ID：12831616
> 
> 赞同：0
> 
> 时间：2012-10-11T03:12:10.260
> 
> 标签：iphone, objective-c, ios, core-location

> **可能重复：**
> [iOS 5 的地理围栏 API](https://stackoverflow.com/questions/8473995/geofence-api-for-ios-5)

我的目标：当我的应用程序的用户进入预定义的位置时向他们发送警报。

我考虑过：

1.  设置在主要位置更改时由 iOS 在后台调用的方法。问题是每次 iPhone 重新启动时都必须（或至少*看起来*必须）手动启动此过程。

2.  使用 Event Kit 框架创建基于位置的提醒。我遇到的问题是文档中没有列出允许我以编程方式执行此操作的方法。

任何人都可以提供其他方法来提醒我的用户他们进入预定义位置的建议吗？在阅读 CLLocation 和 EKFramework 的文档时，我是否遗漏了什么？这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:31:22.600

您应该查看 CLLocationManager 上的 startMonitoringForRegion:desiredAccuracy: 方法。

# css - 输入 [type=checkbox] 上是否允许使用 :before 伪元素？

> ID：12831620
> 
> 赞同：16
> 
> 时间：2012-10-11T03:12:26.347
> 
> 标签：css, checkbox, css-selectors

[这个 StackOverflow 答案](https://stackoverflow.com/a/11850353/1127114)描述了如何使用 CSS3 设置复选框的样式而不需要`<label>`：

```
input[type=checkbox]:before {
    content:""; display:inline-block; width:12px; height:12px; background:red;
} 
```

[小提琴](http://jsfiddle.net/hqZt6/1/)

这适用于 Chrome 22，但不适用于 Firefox 15 或 IE 9。

鉴于后两种浏览器缺乏支持，**Chrome 的行为是否符合 CSS3 规范？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T06:30:25.053

这是一片未知的土地；规范并没有把事情弄清楚。[CSS 2.1 规范](http://www.w3.org/TR/CSS21/generate.html#before-after-content)说：

> “笔记。该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。” 而且，有争议的是，INPUT 可以被视为[CSS 2.1 意义上的替换元素](http://www.w3.org/TR/CSS21/conform.html#replaced-element)。

有人可能会认为这些伪元素不能用于不能有任何内容（即带有 EMPTY 声明内容）的元素，例如 IMG 或 INPUT。但是，措辞中提到了 IMG，并且[附录 D](http://www.w3.org/TR/CSS21/sample.html)中有一条规则与 selector `br:before`。

而 CSS3 选择器，作为 CSS3 中少数几个达到推荐状态的部分之一，并*没有*搞清楚。[它说](http://www.w3.org/TR/selectors/#gen-content)：

> “`::before`和`::after`伪元素可用于描述在元素内容之前或之后生成的内容。它们在 CSS 2.1 [CSS21] 中进行了解释。”</p>

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T03:32:11.070

我认为 Chrome 的行为是无效的。如果你[看一下这里](http://www.w3.org/TR/2005/WD-CSS21-20050613/generate.html#before-after-content)，它会说`::before`和`::after`伪元素`content`在目标元素之前或之后添加新元素`content`。输入元素没有`content`; 他们只有一个`value`. 例如，您不能这样做`<input>Pasta</input>`。

如果这一切都是真的，那么 Chrome 的行为似乎是无效的，而 IE 和 Firefox 是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T05:42:53.910

是的，您绝对可以使用该伪类，例如：让我们给出

`"input[type="checkbox"]"` 是相对的和位置

`"input[type="checkbox"]:before"` 绝对。

试试这个，它可以在 chrome 中工作，但不能在 Firefox 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-03T10:12:51.277

是的，这是可能的和跨浏览器！

```
[type=checkbox] {
  appearance: none;
  -webkit-appearance: none; /* Safari */
}

[type=checkbox]::before {
  content: 'a text before';
} 
```

# c++ - 辛不是“工作”吗？

> ID：12831622
> 
> 赞同：0
> 
> 时间：2012-10-11T03:12:47.400
> 
> 标签：c++

所以，这是我的代码。我必须从给定文本中删除所有“a”和“A”（可以是随机的），但这是我得到的文本块示例：

> 敏捷的棕色狐狸跳过一只懒惰的狗。当狐狸绕过弯道时，一只猫跑了。再往前走，一名学生正在参加 CS2433 课程的考试。

我添加了其他几个 cout 只是为了看看发生了什么，看来我的 cin 只接受给定文本的“The”部分来读入。

我不确定发生了什么事？我用来运行带有输入文件的文件的 unix 命令是：./hw5.out < hw5in.txt 我应该使用不同的东西来传递字符串吗？

```
1 #include <iostream>
2 #include <algorithm>
3 using namespace std;
4
5 int main()
6 {
7
8    string str;
9    cin >> str;
10
11    char chars[] = "aA";
12    cout << str;
13    for (unsigned int i = 0; i < str.length(); i++)
14    {
15 
16
17       str.erase (std::remove(str.begin(), str.end(), chars[i]), str.end());
18    }
19    cout << str;
20    for (int i = 0; i < str.length();i++)
21    {
22       if (str[i] == '\n')
23       {
24          str[i] = '\t';
25       }
26    }
27
28 
29    cout << str;
30
31 } 
```

更新：我用getLine命令写了一段时间，将每次迭代连接成一个变量“文本”，然后运行我的一些原始代码所做的，用文本替换所有str。感谢您的回复，我肯定会浏览发布的存储库，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:15:15.840

`>>`当达到空白时，事情就停止了。也许你想要[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)？

```
std::getline(std::cin, str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:30:06.287

扩展@cnicutar 的答案，这里是标准的阅读方式`std::cin`，

```
std::string str;
while (std::getline(std::cin, str))
{
    // str now contains text upto the first newline
} 
```

但是，如果要删除所有“a”和“A”，更好的方法是一次遍历输入流一个字符。

```
std::cin >> std::noskipws; // Do not skip whitespaces in the input stream

std::istream_iterator<char> it(std::cin);
std::istream_iterator<char> end;

std::string result;

// Copy all characters except {'a', 'A') to result
std::copy_if(it, end, std::back_inserter(result),
                [](char c) -> bool { return c != 'a' && c != 'A'; }
                ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:28:45.310

要扩展@cnicutar 的答案并修复代码中的其他一些问题：

```
#include <iostream>
#include <algorithm>
#include <string>

int main()
{
    char* to_remove = "aA";

    while (!std::cin.eof())
    {
        std::string str;
        std::getline(std::cin, str);

        if (std::cin.fail())
        {
            std::cerr << "Error reading from STDIN" << std::endl;
            return 1;
        }

        size_t index = 0;

        while ((index = str.find_first_of(to_remove, index)) != string::npos)
        {
            str.erase(index);
        }

        std::cout << str << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:54:01.897

这是简短且相当简单的。它展示了一种`std::string`从输入流和常见的[擦除删除习语](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Erase-Remove)构造 a 的方法。

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <string>

bool is_aorA(char ch)
{
    return ch == 'a' || ch == 'A';
}

int main()
{
    std::istreambuf_iterator<char> input(std::cin), end;
    std::string str(input, end);

    str.erase(std::remove_if(str.begin(), str.end(), is_aorA), str.end());

    std::cout << str << '\n';
} 
```

在[ideone.com上查看它的实际应用](http://ideone.com/53VRg)

# java - 当主要活动继承 ListActivity 类时，应用程序不起作用

> ID：12831626
> 
> 赞同：1
> 
> 时间：2012-10-11T03:13:10.803
> 
> 标签：java, android, android-listview

我在 Android 4.1 中有一个简单的列表应用程序，当它继承 时`Activity`，它工作得很好......但是当这个相同的应用程序继承 ListActivity 时，它会失败。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:29:55.703

您的布局 xml 文件中可能有一个列表视图。如下更改它。

```
<ListView android:id="@android:id/list" android:layout_width="wrap_content"
android:layout_height="wrap_content"></ListView> 
```

并检查它是否工作

[在这里](http://codinglookseasy.blogspot.in/2012/07/android-list-view-sample.html)查看样品。您可能会发现这很有用。这是一个通过扩展 ListActivity 获得列表视图的示例。

也看看这个[here](http://developer.android.com/reference/android/app/ListActivity.html)

ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。`setContentView()`但是，如果您愿意，您可以通过使用in设置您自己的视图布局来自定义屏幕布局`onCreate()`。为此，您自己的视图必须包含一个具有 id 的 ListView 对象`"@android:id/list"`

# php - PHP preg_match 错误

> ID：12831629
> 
> 赞同：2
> 
> 时间：2012-10-11T03:13:28.217
> 
> 标签：php, preg-match

我一直在扯头发，试图找出这个错误来自哪里。任何解决此错误的帮助将不胜感激。

错误：

```
Warning: preg_match() [function.preg-match]: Compilation failed: range out of order in character class at offset 9 in /home/internet/public_html/z-insert/functions/dns.php on line 526 
```

代码：-line 526 是第 4 个 preg_match

```
if (preg_match('/127\.[0-9]+\.[0-9]+\.[0-9]+/',$mx_ip[$i]) || 
preg_match('/10\.[0-9]+\.[0-9]+\.[0-9]+/',$mx_ip[$i]) ||
preg_match('/192\.168\.[0-9]+\.[0-9]+/',$mx_ip[$i]) ||
preg_match('/172\.[16-31]+\.[0-9]+\.[0-9]+/',$mx_ip[$i])){ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:18:10.340

`[]`包含一个没有顺序的*字符类。*为方便起见，您可以在字符类中创建范围，但它必须具有正确的语法。你不能有范围`6-3`。你需要做这样的事情：

```
(?:1[6-9]|2[0-9]|30|31) 
```

我也不确定是否`+`有故意的，但我猜不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:18:33.907

字符类`[16-31]`无效。

它告诉：匹配任何章程：

1.  一个`1`或任何一个
2.  任何在从`6`到开始的范围内`3`！！！这是无效的范围。
3.  要么`1`

看起来你想匹配范围内的任何数字，`16`直到`31`你可以这样做：

```
1[6-9]|2[0-9]|3[01] 
```

在将整个范围拆分`16-31`为子范围的地方，为每个子范围编写一个正则表达式，并使用`|`（或运算符）将所有子范围包含在内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T03:25:14.140

首先，正如我所评论的，16-31 不是一个有效范围。我建议您阅读正则[`this article`](http://www.regular-expressions.info/numericranges.html)表达式中的数字范围。

作为解决方案，我建议：

* 捕获第二个八位字节并用 php 检查它：

```
$flag = false;
if (preg_match('/172\.(?P<second_octet>\d+)\.\d+\.\d+/',$mx_ip[$i], $match)) {
    if ($match['second_octet']>=16 && $match['second_cotet'] <= 31) {
        $flag = true;
    }
}
if (preg_match('/127\.[0-9]+\.[0-9]+\.[0-9]+/',$mx_ip[$i]) || 
preg_match('/10\.[0-9]+\.[0-9]+\.[0-9]+/',$mx_ip[$i]) ||
preg_match('/192\.168\.[0-9]+\.[0-9]+/',$mx_ip[$i]) || 
$flag
) { ... 
```

* 明确传递从 16 到 31 的数字：

```
$second_octet_range = range(16,31);
preg_match('/172\.(?:'.implode('|', $second_octet_range).')\.\d+\.\d+/',$mx_ip[$i]); 
```

* 使用正则表达式的可读性较差的变体（恕我直言，由于缺乏可读性，不太优选的解决方案 - 您确实需要一些时间来了解第二个八位字节的范围是 16-31，而在前两个解决方案中很明显）：

```
preg_match('/172\.(?:1[6-9]|2[0-9]|3[01])\.\d+\.\d+/',$mx_ip[$i]); 
```

# javascript - 从输入中获取价值到下一页上的输入？

> ID：12831634
> 
> 赞同：1
> 
> 时间：2012-10-11T03:14:08.117
> 
> 标签：javascript, html, session-storage

我在表单中有一个输入字段 - 可以说：

```
<form action="/subscribe">
  <input type="emailadress" id="emailme" value="Email Address" />
  <input type="submit" value="Subscribe" class="cat_button" />
</form> 
```

然后在下一页（subscribe.html）我有一个完整的表格。

我想做的是让用户输入他们的电子邮件地址，然后按订阅。

它带你去 subscribe.html

当您到达该页面时，您的电子邮件地址已被预先填写。

**编辑：**我无法访问服务器端编程——只有 Javascript、HTML 和 CSS。

我正在研究 HTML5 会话存储，但没有运气。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:29:23.847

这当然是可能的。如果您想要一个完全客户端的解决方案，一种方法可能是使用 Javascript 单击侦听器捕获单击事件，选择表单中的两个元素并读取它们的值，然后将这些值放入会话存储中。在 subscribe.html 页面的 Javascript 中，确保从会话存储中读出值并在 subscribe.html 页面中填写适当的输入元素。

第一个html页面的Javascript + jQuery

```
$(document).ready(function() {
("myform").click(function() {
    var useremail = ("selector_for_email").val();
    sessionStore.setitem("useremail", useremail);
    // Don't preventDefault, allow form POSTing
});
}); 
```

第二个html页面的Javascript + jQuery

```
$(document).ready(function() {
        var useremail = sessionStore.getItem("useremail");
        ("input_elem").val(useremail);
    }); 
```

如果您对涉及客户端和服务器的解决方案持开放态度，只需允许用户提交表单（发送 POST 消息）。在订阅的路由处理程序中，读出 POST 数据并使用输入值填充视图模板中的元素。

Python 后端

```
@app.route('/subscribe')
def subscribe():
    if request.method == 'POST':
        useremail = request['name_attr_of_email_input']
        return render_template(subscribe.html, email=useremail) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:23:00.490

要使用 php 执行此操作，您需要做的就是提交您创建的表单（在将 'method="post"' 附加到表单元素之后，并为您的文本输入命名，例如，“emailme ”）。

```
<form action="/subscribe.php" method="post">
  <input type="emailadress" name="emailme" id="emailme" value="Email Address" />
  <input type="submit" value="Subscribe" class="cat_button" />
</form> 
```

从那里，您将 subscribe.html 更改为 .php 文件，并在 subscribe.php 上执行以下操作：

```
<?php
$email_address = $_POST['emailme'];

echo '<input type="emailadress" name="emailme2" id="emailme2" value="' . $email_address . '" />';
?> 
```

或者：

```
<?php
$email_address = $_POST['emailme'];
?>

<input type="emailadress" name="emailme2" id="emailme2" value="<?php echo $email_address; ?>" /> 
```

# java - Jboss 7.1 Final 没有部署我的战争

> ID：12831635
> 
> 赞同：1
> 
> 时间：2012-10-11T03:14:09.710
> 
> 标签：java, web-applications, deployment, jboss, jboss7.x

**这是我收到的错误日志，** **我也突出显示了错误..有什么解决方案可以解决吗？**

```
16:54:56,184 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."hello.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."hello.war".STRUCTURE: Failed to process phase STRUCTURE of deployment "hello.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_20]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_20]
Caused by: **org.jboss.as.server.deployment.DeploymentUnitProcessingException: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018037: Failed to process WEB-INF/lib: "/C:/Share/Jboss/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final/bin/content/hello.war/WEB-INF/lib/activation-1.1.jar"**
    at org.jboss.as.web.deployment.WarStructureDeploymentProcessor.deploy(WarStructureDeploymentProcessor.java:120)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018037: Failed to process WEB-INF/lib: "/C:/Share/Jboss/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final/bin/content/hello.war/WEB-INF/lib/activation-1.1.jar"
    at org.jboss.as.web.deployment.WarStructureDeploymentProcessor.createWebInfLibResources(WarStructureDeploymentProcessor.java:175)
    at org.jboss.as.web.deployment.WarStructureDeploymentProcessor.createResourceRoots(WarStructureDeploymentProcessor.java:153)
    at org.jboss.as.web.deployment.WarStructureDeploymentProcessor.deploy(WarStructureDeploymentProcessor.java:114)
    ... 6 more

**Caused by: java.util.zip.ZipException: error in opening zip file**
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.6.0_20]
    at java.util.zip.ZipFile.<init>(Unknown Source) [rt.jar:1.6.0_20]
    at java.util.jar.JarFile.<init>(Unknown Source) [rt.jar:1.6.0_20]
    at java.util.jar.JarFile.<init>(Unknown Source) [rt.jar:1.6.0_20]
    at org.jboss.vfs.spi.JavaZipFileSystem.<init>(JavaZipFileSystem.java:97)
    at org.jboss.vfs.spi.JavaZipFileSystem.<init>(JavaZipFileSystem.java:83)
    at org.jboss.vfs.VFS.mountZip(VFS.java:408)
    at org.jboss.vfs.VFS.mountZip(VFS.java:434)
    at org.jboss.as.web.deployment.WarStructureDeploymentProcessor.createWebInfLibResources(WarStructureDeploymentProcessor.java:170)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:11:08.690

看起来`activation.war`您的 WAR 中有一个损坏的文件。另外，不要包括`activation.war`. 该库将从服务器中包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T14:47:00.523

令人难以置信的是，自从 v5 以来，这个问题仍然没有解决。当热部署和战争/耳朵完全没问题时，我们一直都有它。在这里感到沮丧！Weblogic 从来没有过这种情况。

# cookies - Cookie 不会跨多个页面 PHP 持续存在

> ID：12831639
> 
> 赞同：1
> 
> 时间：2012-10-11T03:14:37.127
> 
> 标签：cookies, php

我要疯了。我是 PHP 新手

我只是想把一个查询字符串变量放在一个 cookie 中，并让它在网站上的所有页面上都可用。现在发生的情况是，它只在有查询字符串时设置 cookie，而一旦我转到另一个页面，cookie 就消失了。

我所有的 php 页面顶部都有这个代码：

```
<?php

$expire=time()+60*60*24*30;

if (isset($_GET['v'])) {
$thev = $_GET['v'];

if (!isset($_COOKIE["ckv"])) {
setcookie("ckv", $_GET['v'], $expire);
}
} else if (isset($_COOKIE["ckv"])) {
$thev = $_COOKIE["ckv"];
} else {
$thev = 'nothing';
}
?> 
```

1.  第 1 页有效！（显示 cookie）
2.  page1 没有查询字符串有效！（显示 cookie）
3.  第 2 页已损坏。（饼干不见了！）

** 这些是按顺序点击的。所以第 3 页应该显示 cookie

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:23:44.887

我同意上述答案，请考虑使用 SESSIONS 代替 $_COOKIE。它们比 cookie 更灵活、更安全

[http://us3.php.net/manual/en/features.sessions.php](http://us3.php.net/manual/en/features.sessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:51:14.527

我可以看到三个答案。

最有可能的是第 1 页和第 2 页位于不同的目录中。默认情况下，cookie 放置在当前目录中（在浏览器中指定 - 忽略任何包含/apache 重定向等），并将仅适用于该目录及以下目录。如果你有

```
/dir1/page1 
/dir2/page2 
```

那么默认情况下，第 1 页中的 cookie 将不会在第 2 页中可用。

您可以通过指定路径来解决此问题（[请参阅文档](http://php.net/manual/en/function.setcookie.php)）。在这里，您声明 cookie 将应用到的目录 - 最常见的是您将其设置为“/”（根），这意味着适用于应用程序中的任何页面。

* * *

现在有一些问题：

由于您已经在“/dir1/”中获得了一个 cookie，如果您修改代码以包含“/”路径并运行，那么您实际上将有两个 cookie - 一个在“/”，一个在“/”目录1/'。除非您先将其删除，否则您的第 1 页仍将获得“/dir1/”cookie。还要检查'/dir2/' 中是否也没有空白cookie（即，您的代码中没有“空”，而不是空格-这意味着您有一个cookie，但具有空白值）。在子目录中放置 cookie 会导致很多挫败感。

其他可能的原因与缓存有关（确保您没有缓存值）以及不同的域（您不能跨域共享 cookie，如果您想跨子域共享，那么您需要指定根域- 见文档）。

# javascript - 动态加载 js 时，为什么要保留 script type="text/javascript"

> ID：12831644
> 
> 赞同：1
> 
> 时间：2012-10-11T03:15:13.910
> 
> 标签：javascript

```
var ga = document.createElement('script');
ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ?
      'https://ssl' : 'http://www') +
      '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s); 
```

在上面的代码中（在谷歌分析中），
我想知道他们为什么一直写`ga.type = 'text/javascript'`，
我试过不添加它，它在现代浏览器中似乎运行良好
我认为我应该错过一些东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:17:16.687

它曾经需要通过 XHTML 验证器（`type`属性）。但是，无论如何，每个现代浏览器都将块解析`script`为 JavaScript。

但是，HTML5 规范说你可以不使用它，它会默认为`text/javascript`.

# java - 导出无头 Eclipse 应用程序导致“找不到产品的定义插件”错误

> ID：12831648
> 
> 赞同：1
> 
> 时间：2012-10-11T03:16:02.087
> 
> 标签：java, eclipse, eclipse-plugin, headless

按照[这篇文章](http://www.developertesting.com/archives/month200508/20050823-HeadlessHelloWorldInEclipse.html)中的教程，我可以生成在 Eclipse IDE 中工作的无头 Eclipse 插件。

按照[Paul 的建议](https://stackoverflow.com/a/12831435/260127)，我尝试创建一个`.product`文件并将其导出。

事先，我需要进行产品配置，我按照本网站的说明进行操作 - [http://wiki.eclipse.org/FAQ_How_do_I_create_an_Eclipse_product%3F](http://wiki.eclipse.org/FAQ_How_do_I_create_an_Eclipse_product%3F)

这是`productConfiguration.product`自动生成的。

```
<?xml version="1.0" encoding="UTF-8"?>
<?pde version="3.5"?>
<product useFeatures="false" includeLaunchers="true">
   <configIni use="default">
   </configIni>
   <launcherArgs>
      <vmArgsMac>-XstartOnFirstThread -Dorg.eclipse.swt.internal.carbon.smallFonts</vmArgsMac>
   </launcherArgs>
   <plugins>
   </plugins>
</product> 
```

我跟着向导：

![在此处输入图像描述](../Images/72410b7d94e7a024369c13f097a366d2.png)

![在此处输入图像描述](../Images/8c75567f5f8360fa47b16d4d48d520cb.png)

但是，我收到此错误消息。我试过没有`Synchronize before exporting`，我得到了另一个错误。

![在此处输入图像描述](../Images/214e38b058c0aa55d067b40176115a7a.png) ![在此处输入图像描述](../Images/16359d6434dbfbfdacb811f862b450e4.png)

可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T06:21:49.573

您需要将`org.eclipse.core.runtime.products`扩展​​添加到您的插件之一。

```
<extension id="foo" point="org.eclipse.core.runtime.products">
  <product application="com.example.FoorBarApp" name="foo">
     <property name="appName" value="foo"/>
  </product>
</extension> 
```

并将 ID（插件 ID + "." + 扩展 ID）添加到产品配置中。

```
<product id="myplugin.foo" ... 
```

# jquery - jQuery 将除单词和之外的所有内容都大写

> ID：12831652
> 
> 赞同：0
> 
> 时间：2012-10-11T03:16:33.787
> 
> 标签：jquery, css

这是我在首都的菜单

```
<ul class="tabgic">
   <li rel="item_227" class="">
    <div>
      <div> <a class="menu_link_2" href="#">ACCIDENTAL DAMAGE AND PROPERTY</a> </div>
    </div>
   </li> 
</ul> 
```

我想使用 jQuery 并将除单词之外的所有内容都大写，`and`因此输出将是

```
Accidental Damage and Property 
```

我怎样才能做到这一点？

我在看[这个](http://jquerybyexample.blogspot.com/2011/12/jquery-plugin-for-uppercase-lowercase.html)，但不确定这是否可以轻松修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:19:46.907

你可以使用正则表达式。

```
str = str.toLowerCase().replace(/\b[a-z]/g, function(match) {
    return match.toUpperCase();
}).replace(/\bAnd\b/g, "and"); 
```

[js小提琴](http://jsfiddle.net/AjAeD/)。

您不能仅使用 CSS 来做到这一点（至少不能使用您当前拥有的标记）。

[js小提琴](http://jsfiddle.net/w4eHu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:23:54.190

```
var str = 'ACCIDENTAL DAMAGE AND PROPERTY';
var result = str.split(' ').map(function(v){
  v = v.toLowerCase();
  return v.replace(/^[a-z]/, function(a){
    return v === 'and' ? a : a.toUpperCase();
  });
}).join(' ');

console.log(result); //=> Accidental Damage and Property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:30:02.887

**工作演示** [http://jsfiddle.net/pXe44/](http://jsfiddle.net/pXe44/)

希望它适合原因`:)`

**代码**

```
$(document).ready(function() {
    var foo = $('.menu_link_2').text().split(' ');
    var html = '';
    $.each(foo, function() {
        if (this.toLowerCase() != "and") html += this.substring(0, 1).toUpperCase() + this.substring(1).toLowerCase() + ' ';
        else html += this.toLowerCase() + ' ';

    });

    alert(" ===> " + html);

    $('.menu_link_2').html(html);

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:25:42.190

鉴于您提出的输出，我怀疑您实际上想要 Title Case（也称为 Proper Case）。您可以使用链接的插件（它处理标题大小写），或者您可以使用正则表达式自己滚动：

```
// the RegExp  \w{4,}  will capture any word composed of 4 or more characters
// where each character can match A-Z, a-z, 0-9, and _
myString = myString.toLowerCase().replace(/\w{4,}/g, function (match) {
    return match.substring(0, 1).toUpperCase() + match.substring(1);
}); 
```

# google-app-engine - Objectify - 如何声明外键？

> ID：12831656
> 
> 赞同：2
> 
> 时间：2012-10-11T03:17:09.030
> 
> 标签：google-app-engine, foreign-keys, objectify, declare

我正在使用 Google 应用引擎和 Objectify。我找不到如何在 Objectify 中声明外键。

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:19:54.790

Google App Engine 数据存储不是 RDBMS 数据库，因此外键的概念并不特别存在。您可以通过在 B 的 A 中具有 Key 属性来保存从实体 A 到实体 B 的引用。例如，考虑以下内容：

```
@Entity
public class A {
    @Id Long id;
}

@Entity
public class B {
    @Id Long id;
    Key<A> referenceToA;
} 
```

有关 GAE 中数据建模的更多信息，请查看：

*   [JDO 中的实体关系](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)
*   [建模实体关系](https://developers.google.com/appengine/articles/modeling)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:00:35.343

除了thanos所说的之外，您可以通过存储类A的@Id的String/Long来存储类B对类A的引用。这样的优点是节省空间，但缺点是类型安全。如果您只使用 Long 那么它可以是数据存储中任何实体类型的 ID，并且您的 cod 必须确保正确使用它，如果您存储存储 ID 和实体类型的密钥，那么您就更少了您的代码中可能有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T19:10:46.423

你可以简单地做

```
@Entity
public class X {
    @Id Long key;
}

@Entity
public class Y {
    @Id Long key;
    @Index X x;
} 
```

或者

```
@Entity
public class Y {
    @Id Long key;
    @Load @Parent @Index Ref<X> x;
    public User getX() { return this.x.get(); }
    public void setX(X value) { this.x= Ref.Create(value); }
} 
```

**注意**：永远不要忘记 getter/setter（即使是 Id），因为它们决定了您从客户端进行的 REST 调用中的值。

# wordpress - 发布缩略图不适用于 wordpress 主题

> ID：12831661
> 
> 赞同：0
> 
> 时间：2012-10-11T03:17:43.030
> 
> 标签：wordpress, thumbnails

我正在创建自己的自定义 wordpress 主题。

这就是我的主题的 index.php 所具有的：

```
 <?php while (have_posts()) : the_post(); ?>
        <li id="post-<?php the_ID(); ?>">
            <h2><a href="<?php the_permalink(); ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>
            </span>
            <?php if ( has_post_thumbnail()) : ?>
                <a href="<?php the_permalink(); ?>" class="thumb"><img src="<?php the_post_thumbnail(); ?>" /></a>
            <?php endif; ?>
            <div class="post">
                <?php get_the_content(400, "Read more"); ?> <a href="<?php the_permalink(); ?>">Read more</a>.
            </div<br/> 
```

我的functions.php文件有这个：

```
 <?php

 add_theme_support( 'post-thumbnails', array( 'post' ) );
 the_post_thumbnail( array(80,80) );

 ?> 
```

我的网站显示了这一点（图像未加载）：

```
 <a href="http://ipadappbuzz.com/?p=1" class="thumb"><img src="<img width="50" height="50" src="http://ipadappbuzz.com/wp-content/uploads/article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800-50x50.jpg" class="attachment-post-thumbnail wp-post-image" alt="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" title="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" />" /></a>
                            <div class="post">
                 <a href="http://ipadappbuzz.com/?p=1">Read more</a>. 
```

不知道为什么图像源没有正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:21:12.360

您的问题是您的 img src 属性指向另一个 img 的字符串定义：

```
<a href="http://ipadappbuzz.com/?p=1" class="thumb"><img src="<img width="50" height="50" src="http://ipadappbuzz.com/wp-content/uploads/article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800-50x50.jpg" class="attachment-post-thumbnail wp-post-image" alt="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" title="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" />" /></a>
                            <div class="post">
                 <a href="http://ipadappbuzz.com/?p=1">Read more</a>. 
```

这是违规行：

```
<img src="<img width="50" height="50" src="http://ipadappbuzz.com/wp-content/uploads/article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800-50x50.jpg" class="attachment-post-thumbnail wp-post-image" alt="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" title="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" />" /> 
```

需要将其更正为以下内容 - 或类似的内容：

```
<img width="50" height="50" src="http://ipadappbuzz.com/wp-content/uploads/article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800-50x50.jpg" class="attachment-post-thumbnail wp-post-image" alt="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" title="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" /> 
```

现在，至于生成这个的代码：

```
<a href="<?php the_permalink(); ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a> 
```

我不知道`the_permalink()`、`the_title_attribute()`或`the_title()`函数是什么，以及您如何定义它们以及它们返回什么。**但是，我怀疑你在某处引入了一个额外的结束标签**。

更新：

从原始海报更新我的代码来看，我认为您的 PHP 代码应该如下所示：

"类="拇指">"

因为好像 the_post_thumbnail() 正在回显/返回一个 img：

```
<img width="50" height="50" src="http://ipadappbuzz.com/wp-content/uploads/article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800-50x50.jpg" class="attachment-post-thumbnail wp-post-image" alt="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" title="article-new_ehow_images_a00_05_uu_decorate-outdoors-halloween-800x800" /> 
```

# python - 如何修复 django 中的 valueerror 无效文字错误？

> ID：12831664
> 
> 赞同：0
> 
> 时间：2012-10-11T03:17:51.130
> 
> 标签：python, django, url, view, model

我收到此错误：`invalid literal for int() with base 10: 'social'`当我尝试在 /category/social/ 打开页面时。

```
def all_partners(request,category):
    p = Content.objects.filter(category_id=category)
    return render_to_response('reserve/templates/category.html', {'p':p},
        context_instance=RequestContext(request))

class ContentCategory(models.Model):
    content_category = models.CharField('User-friendly name', max_length =  200)
    def __unicode__(self):
        return self.content_category

class Content(models.Model):
    category = models.ForeignKey(ContentCategory)
    external = models.CharField('User-friendly name', max_length =  200, null=True, blank=True)
    host = models.CharField('Video host', max_length = 200, null=True, blank=True)
    slug = models.CharField('slug', max_length = 200, null=True, blank=True)
    def __unicode__(self):
        return self.slug

url(r'^category/(?P<category>[-\w]+)/$', 'all_partners'), 
```

有想法该怎么解决这个吗？我认为错误就在这`"p = Content..."`条线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:25:46.823

在您看来，`category`必须是整数，或者可以转换为 int 的字符串`int('5')`。您必须转到一个不将类别限制为整数的 url：

```
foosite.com/category/social/ 
```

因此，如果 url 的最后一部分映射到`category`参数，那么在视图中，在查询中，它会尝试转换`social`为整数，这会引发错误。

要解决这个问题，您要么必须重新排列 url 模式以仅允许数字，要么更改查询的完成方式。

```
# urls.py
url(r'^category/(?P<category>\d+)/$', 'all_partners'), 
```

或者

```
def all_partners(request,category):
    p = Content.objects.filter(category__content_category=category)
    return render_to_response('reserve/templates/category.html', {'p':p},
        context_instance=RequestContext(request)) 
```

然后它将按名称而不是 id 查找类别。

# postgresql - 如何检查 PostgreSQL 存储过程中是否存在行？

> ID：12831667
> 
> 赞同：19
> 
> 时间：2012-10-11T03:17:58.747
> 
> 标签：postgresql, stored-procedures, plpgsql, exists

我在 postgres 中编写了一个存储过程，我需要检查是否存在一行，然后采取相应的行动。沿线的东西。

```
IF SELECT * FROM foo WHERE x = 'abc' AND y = 'xyz' THEN
  -- do something here
ELSE 
  -- do something else
END; 
```

我用谷歌搜索了一下，但没有得到好的结果。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-11T05:54:04.750

甚至更简单[**`EXISTS`**](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)：

```
IF EXISTS (SELECT FROM foo WHERE x = 'abc' AND y = 'xyz') THEN
    ...
END IF; 
```

看：

*   [PL/pgSQL 检查一行是否存在](https://stackoverflow.com/questions/11892233/pl-pgsql-checking-if-a-row-exists/11892796#11892796)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-11T03:23:55.573

使用[`PERFORM`和`FOUND`自动变量](http://www.postgresql.org/docs/current/static/plpgsql-statements.html)：

```
PERFORM * FROM foo WHERE x = 'abc' AND y = 'xyz';
IF FOUND THEN
    ....
END IF; 
```

*如果返回一行或多*行，这将成功。如果您想将结果限制为恰好一行，则[用于`GET DIAGNOSTICS`获取行数](http://www.postgresql.org/docs/current/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)，或用于`SELECT INTO`将行存储`count(...)`到`DECLARE`d 变量中，然后进行测试。如果没有结果是错误的，请使用`SELECT INTO STRICT`要求仅获取*一行*并将其存储到目标变量中。

做这样的事情时要小心并发问题。如果您尝试编写 upsert/merge 函数，这种方法*将不起作用*。请参阅[“为什么 upsert 如此复杂”](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)。

# language-agnostic - 如何有效地搜索文件系统（算法）？

> ID：12831668
> 
> 赞同：3
> 
> 时间：2012-10-11T03:18:08.887
> 
> 标签：language-agnostic, filesystems, depth-first-search, breadth-first-search, iterative-deepening

深度优先搜索是搜索文件系统的一种可怕方式——实际上，使用 DFS 可能需要很长时间才能找到可能位于非常接近根目录的目录下的文件，因为 DFS 会被另一个深度分散注意力，不相关的目录层次结构。
然而，它的资源需求非常好——它需要保持打开的文件句柄的数量只与层次结构的深度成正比，而不是它的大小。

广度优先搜索是显而易见的解决方案——它非常快。
（上次我测量时，它与我系统上的 DFS 所用的时间大致相同，大约 8 秒。）

然而 BFS 有其自身的问题—— BFS 需要保持打开*大量*目录句柄，可能数百万。（在我的系统上，大约有 100,000 个句柄，这个数字高得离谱。它很容易更多。）

这会导致几个问题：

*   保持打开这么多句柄不仅会消耗内存（无论如何相对便宜），还会消耗许多其他类型的资源，例如虚拟文件系统（网络、挂载目录等）内的文件句柄，以及可能其他有限的内核-级资源。

*   它还给用户带来了其他实际问题：例如，一直处于打开状态的虚拟目录不再可关闭！这意味着，例如，用户可能无法关闭程序、弹出某些设备或关闭某种外部连接。这种方法可能会出现各种问题。

那么，似乎迭代深化就是解决方案。

问题？在实践中非常缓慢。*我的麻烦是大型目录（例如Windows中的WinSxS）会为每个深度级别*
重新枚举，即使它们不需要。上次我尝试这个时，迭代加深比我系统上的 DFS 慢了约 15 倍。所以 8 秒的搜索大约需要 120 秒左右，这是不可接受的。

 *当然，试图跟踪你不应该打开的目录（也许是因为你注意到你不再需要打开它们）通过发现我们在 BFS 中遇到的所有资源问题，首先破坏了使用迭代深化的目的.

所以，这个问题很简单：

如果您正在搜索一个您不熟悉的文件系统，您应该如何着手在速度和可用性之间取得可接受的平衡？有比 BFS 更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:25:58.793

如果您真的对文件的位置没有任何指导，那么我认为您无能为力。您应该尝试使用一些技巧来最小化搜索和搜索时间，但是文件系统会变得支离破碎，您无法知道这一点，因此很难在那里做很多事情。在许多文件系统上，在搜索子目录之前搜索目录中的文件应该更快，特别是如果您正在寻找可能已内联的小文件。使用完整的 BFS 不耗尽内核资源也是一件好事。

即使您只知道文件可能在哪里，这也会有很大帮助。例如，如果它是用户放在某处然后忘记位置的文件，则从主目录、临时目录和驱动器的根目录开始，并执行 DFS，直至达到合理的递归限制（例如 6- 8 会在我的 Windows 或 OS X 机器上找到任何手动放置的文件或自动下载的文件），其理论是用户通常不会意外地得到深树，但自动生成的层次结构可以变得很深。如果该搜索失败，请返回并搜索您之前跳过的深层目录。如果文件*丢失*了，无论如何搜索都会很慢，因此请退回到 DFS 以确保安全，并且在用户继续使用机器时不会导致太多问题。

最重要的是，如果系统有任何类型的搜索索引，请先检查它，即使这意味着要编写更多代码来支持它。*

# xpath - Selenium WebDriver 查找第 n 个元素

> ID：12831677
> 
> 赞同：5
> 
> 时间：2012-10-11T03:19:11.150
> 
> 标签：xpath, selenium, webdriver, selenium-webdriver

我有点陷入问题并且无法解决它我必须访问页面上的第 n 个图像，该图像位于 HTML 内的表格中。我需要单击图像以分别为每一行移动到下一个屏幕

我尝试了此处提供的各种解决方案，但由于我使用的是 findElement(by) 语法，因此我无法使用这些帮助运行我的代码

我的代码是：

```
public void editUser(String userName)
{
    System.out.println("in editUser 1");
    int row = getCellRow(table, userName);
    System.out.println("in editUser 2");

    WebElement  edit = driver.findElement(By.xpath("//*[@class='grid']/tbody/tr[2]/td[8]/a[1]/img"));

    System.out.println("in editUser 3");
    edit.click();
    System.out.println("in editUser 4");
    clickButton(closeButton);
} 
```

错误是：

```
No such element exception. Unable to locate element: {"method":"xpath", selector"://img[@title='User Management'])[2] 
```

Selenium IDE 可以识别我的元素，但不能识别 selenium web 驱动程序！请指教

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T05:24:25.623

例如，使用 [ ] 引用第 n 个元素

```
WebElement  edit = driver.findElement(By.xpath("(//*[@class='grid']//img)[n]")); 
```

其中 n 是元素编号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:42:42.267

由于 html 片段不是一个完整的视图，它无法建议使用的 xpath 是否正确。有了这里介绍的内容，可以建议以下内容继续前进

1.  尝试使用 xpather（firefox 插件）检查使用的 xpath 是否返回您尝试单击的正确图像。
2.  如果上述条件通过，则在 webdriver 尝试找到图像之前加载图像可能存在时间问题。

# jquery - 仅当有新的 json 数据时，如何通过 ajax 检索数据？

> ID：12831678
> 
> 赞同：1
> 
> 时间：2012-10-11T03:19:19.083
> 
> 标签：jquery

我正在填充的字段是一个如下所示的表：

```
<table class="history"></table> 
```

jquery-ajax 看起来像这样：

```
<script type="text/javascript">
    $(document).ready(function() 
    {

        function fetchComments()
        {
            $.ajax({
                    type: 'POST',
                    url: '/members/comment/fetch/',
                    dataType: "json",
                    timeout: 100,
                    success: function(data) 
                    {
                        $.each(data, function(i, data){
                             $(".history").append("<tr><td>" + data.member_id + "</td><td>" + data.comment + "</td></tr>");
                        })                          
                    }
            });
        }

        function clear()
        {
            $(".history").html('');
            fetchComments();

        }
        setInterval(clear, 1000);

    });
</script> 
```

获取 json (/members/comment/fetch) 的页面如下所示：

```
[{"member_id":"2","comment":"horses--"},{"member_id":"2","comment":"kkk"},{"member_id":"2","comment":"sarmen22kkkkkkkkkkkkkj"},{"member_id":"2","comment":"sarmen22kkkkkkkkkkkkkj"},{"member_id":"2","comment":"sarmen22kk"},{"member_id":"2","comment":"sarmen22"},{"member_id":"2","comment":"sarmen"},{"member_id":"2","comment":"lklklk"},{"member_id":"1","comment":"this is admin"},{"member_id":"2","comment":"kkk"},{"member_id":"1","comment":"this is admin 2"},{"member_id":"2","comment":"kkk"}] 
```

创建这个 json 的方式是读取 mysql 中的所有行并输出为 json 格式。我遇到的问题是 setinterval 每秒重新请求 json 并且填充的表表现得非常紧张并且不能顺利填充数据。我该怎么写才能使表格顺利填充。这是我正在创建的一个简单的小聊天应用程序。

ps：它也使页面刷新（以某种方式）所以如果有一个长的数据表并且我向下滚动，刷新会使页面返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:33:43.617

我将首先不清除所有内容并在每次 setInterval 迭代时重新创建表数据，而是仅将新数据附加到表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:39:55.700

您可以使用一些快速的方法。也许将成功数据存储在一个变量中，并在重写表之前检查它是否已更改。

ThatSteveGuy 的回答将是最正确的方法，但是，您可能需要从数据库中返回一个主键来实现它。

```
var lastData = "";
...
success: function(data) 
{
   if (data != lastData)
   {
     lastData = data;
     $(".history").html('');
     ... (foreach data populate the table)
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:49:30.493

首先，**一旦加载了 ajax 请求**（有或没有错误），我将使用该`setTimeout()`函数，而不是使用该函数，这不考虑可能的连接问题/延迟。**`setInterval()`**

 **另外，我会让查询返回每条评论的时间戳，您可以稍后在您的 ajax 请求中发回最新的时间戳，以检索在该时间之后发布的评论。如果您的表中没有此数据，我肯定会将其添加为`UTC_TIMESTAMP()`. 这也可能对您的历史记录有用：

> **某人：**嗨，怎么了？
> （于 2012 年 10 月 11 日上午 6 点 48 分发送）**

# php - PHP匿名函数作为默认参数？

> ID：12831679
> 
> 赞同：3
> 
> 时间：2012-10-11T03:19:34.537
> 
> 标签：php, arguments, anonymous-function

有没有办法在php中做到这一点？

```
//in a class
public static function myFunc($x = function($arg) { return 42+$arg; }) {
   return $x(8); //return 50 if default func is passed in
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T03:34:48.123

PHP 默认函数参数只能是标量或数组类型：

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

[*来自：* PHP 手册 / 函数参数 / 默认参数值](http://www.php.net/manual/functions.arguments.php#functions.arguments.default)

怎么样：

```
public static function myFunc($x = null) {

    if (null === $x) {
        $x = function($arg) { return 42 + $arg; };
    }

    return $x(8); //return 50 if default func is passed in
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T03:35:04.050

您可以使用[func_num_args](http://www.php.net/manual/en/function.func-num-args.php)和[func_get_arg](http://www.php.net/manual/en/function.func-get-arg.php)

```
//in a class 
public static function myFunc() { 
    if (func_num_args() >= 1) {
        $x = func_get_arg(0);
    } else {
        $x = function($arg) { return 42+$arg; }
    }
    return $x(8); //return 50 if default func is passed in 
} 
```

但我同意 tradyblix 的观点，即您可以像处理数据一样

```
//in a class 
public static function myFunc() { 
    if (func_num_args() >= 1) {
        $x = func_get_arg(0);
        $retval = $x(8);
    } else {
        $retval = 42 + 8;
    }
    return $retval; //return 50 if default func is passed in 
} 
```

# ajax - jQuery AJAX 'multipart/form-data' 不发送数据？

> ID：12831680
> 
> 赞同：23
> 
> 时间：2012-10-11T03:19:37.717
> 
> 标签：ajax, jquery, file-upload, multipartform-data

我不知道为什么我无法让 jQuery 传递上传数据，因为 AJAX 对象似乎配置正确，并且正在发送正确的 Content-Type/MIME-Type 标头。

我尝试了两种不同形式的请求——一种是包含在文字中的 FormData 对象，另一种是直接传递 FormData 对象。

不幸的是，无论哪种方式我都无法通过任何方法，并且 $_FILES 和 $_POST 都是空数组。

我希望使用的理想请求如下：

![在此处输入图像描述](../Images/426bdf76321487db9deff754dc393bcb.png)

连同以下代码：

```
var files = new FormData();

$.each(context.prototype.fileData, function(i, obj) { files.append(i, obj.value.files[0]); });

var request = { action: 'upload', id: response.obj.id, data: files };

$.ajax({

    type        : 'POST',
    url         : context.controller,
    data        : request,
    processData : false,
    contentType : 'multipart/form-data',
    mimeType    : 'multipart/form-data',

    success     : function(r) {
        console.log(r);
        //if (errors != null) { } else context.close();

    },

    error       : function(r) { alert('jQuery Error'); }

}); 
```

当我尝试同时导出 $_FILES 和 $_POST 时，唯一的响应（同时查看网络选项卡和控制台）再次只是两个空数组......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-11T03:32:38.810

您必须将`FormData`对象作为数据参数传递

```
var request = new FormData();                   
$.each(context.prototype.fileData, function(i, obj) { request.append(i, obj.value.files[0]); });    
request.append('action', 'upload');
request.append('id', response.obj.id);
$.ajax({

    type        : 'POST',
    url     : context.controller,
    data        : request,
    processData : false,
    contentType : false,                        
    success     : function(r) {
        console.log(r);
        //if (errors != null) { } else context.close();

    },

    error       : function(r) { alert('jQuery Error'); }

}); 
```

# silverlight-4.0 - Silverlight 单元测试 - 本地化

> ID：12831683
> 
> 赞同：2
> 
> 时间：2012-10-11T03:20:07.953
> 
> 标签：silverlight-4.0, tdd

我正在开发 Silverlight 应用程序，但遇到了一个与单元测试相关的问题。这个单元测试的目的是测试本地化。

默认文化是英语，我想测试法国文化。我尝试设置文化和 UI 文化以及 DeploymentItem 属性。但没有成功。

这是我的测试

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
[TestClass]
public class SampleTest
{

   [TestMethod]
   [DeploymentItem(@"Bin\fr", "fr")]
   public void Test Method()
   {
            SetSpecificCurture(false);
            string test = EngineAnomaliesViewStrings.Identifier;
            Note: [EngineAnomaliesViewStrings is my resource file]  

            Assert.AreEqual("Some French Test", test);   
   }

   private void setSpecificCurture(Boolean isUkLable)
        {
            CurrentUserLogged.Details.IsUKLanguage = isUkLable;

            string culture = isUkLable ? "en" : "fr";
            string dateFormat = isUkLable ? "MM/dd/yyyy" : "dd/MM/yyyy";
            Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(culture);
            Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(culture);
            Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern = dateFormat;
            Thread.CurrentThread.CurrentUICulture.DateTimeFormat.ShortDatePattern = dateFormat;

        } 
```

即使通过设置 FR 文化，始终获得英语价值观。

任何人都可以有一个想法来解决这个问题吗？

谢谢，马赫什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:40:07.887

马赫什，

只是为了让其他人知道我们是如何解决这个问题的。正如我们所发现的，解决方案是在 Silverlight UnitTest 项目的 AppMenifest.xml 文件的 Deployment.Parts 节点内添加一个 AssemblyPart。（UnitTest项目xap文件默认不包含fr资源文件）

```
<AssemblyPart Source="fr/MyProject.resources.dll" /> 
```

谢谢。

达克斯

# php - 使用 Count 从总数中获取数字（例如：10 个中的 2 个、10 个中的 3 个）

> ID：12831689
> 
> 赞同：0
> 
> 时间：2012-10-11T03:21:14.097
> 
> 标签：php

我希望能够显示专辑中包含的所有图像中的图像数量（每个艺术家一张专辑）。示例：专辑 2，共 10 张。然后转到下一张图片，我们将获得专辑 3，共 10 张，依此类推。**我可以通过使用函数get_count**然后在我的 HTML 页面上调用该函数和一个**foreach**语句来获取总数。但是，我不知道如何编写代码来获取个人编号。使用的代码：-

```
<?php
function get_count($artist_id) {
  $artist_id = (int)$artist_id;
  $count = array();
  $count_query = mysql_query("
      SELECT `image_album_id`, `artist_id`, COUNT(`image_album_id`) as `image_count` 
      FROM `album_images`
      WHERE `artist_id`=$artist_id AND `member_id`=".$_SESSION['member_id']);
  While ($count_row = mysql_fetch_assoc($count_query)) {
    $count[] = array(
        'id' => $count_row['image_album_id'],
        'album' =>  $count_row['artist_id'],
        'count' => $count_row['image_count']
        );
  }
  return $count;
}
?>

<?php
$count = get_count($artist_id);
foreach ($count as $count){
  echo '',$count['count'],'';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:24:47.307

问题在于`$count`对数组和标量变量重用相同的变量名：

```
$count = get_count($artist_id); 
```

`$count`现在是一个数组。

```
foreach ($count as $count){ 
```

但`$count`现在已经变成了一个标量变量，清除了数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:25:24.623

像这样试试。

```
<?php
function get_count($artist_id) {
$artist_id = (int)$artist_id;
$count = array();
$count_query = mysql_query("SELECT `image_album_id`, `artist_id`, COUNT
(`image_album_id`) as `image_count` 
FROM `album_images`
WHERE `artist_id`=$artist_id AND `member_id`=".$_SESSION['member_id']);
$count_img_row=1;
While ($count_row = mysql_fetch_assoc($count_query)) {
$count[] = array(
'id' => $count_row['image_album_id'],
'album' =>  $count_row['artist_id'],
'count' => $count_row['image_count'],
'image_ord'=>$count_img_row
);
$count_img_row++;
}
return $count;
}
?>

<?php
$count = get_count($artist_id);
foreach ($count as $imgcount){
echo $imgcount['image_ord']." of ".$imgcount['count'];
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:48:47.087

然后像这样尝试

```
<?php
function get_count($artist_id) {
$artist_id = (int)$artist_id;
$count = array();
$count_query = mysql_query("SELECT `image_album_id`, `artist_id`
FROM `album_images`
WHERE `artist_id`=$artist_id AND `member_id`=".$_SESSION['member_id']);
$count_img_row=1;
$total_imgs=mysql_num_rows($count_query);
While ($count_row = mysql_fetch_assoc($count_query)) {
$count[] = array(
'id' => $count_row['image_album_id'],
'album' =>  $count_row['artist_id']
);
$count_img_row++;
}
return $count;
}
?>

<?php
$count = get_count($artist_id);
foreach ($count as $imgcount){
echo $imgcount['image_ord']." of ".$total_imgs;
}
?> 
```

# qt - 接收不到 QTcpSocket 的 readyRead 信号？

> ID：12831691
> 
> 赞同：2
> 
> 时间：2012-10-11T03:21:28.227
> 
> 标签：qt, qtcpsocket, qtnetwork

您使用 QTcpSocket 通过网络发送数据，将 readyRead 信号与您的数据处理程序连接。但是可能没有触发 readyRead 信号。

您可以看到 Wireshark 到达的数据，但 QTcpSocket 不会触发 readyRead 信号。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T03:41:12.203

如果您创建套接字的线程处于模式对话框中，该模式对话框进入其自己的事件循环以防止触发 readyRead 信号，则可能会发生这种情况。

我想出了两个解决方案：
1）使用非模态对话，为对话结果提供信号。
2）在另一个线程中创建套接字。

# multithreading - WPF Window 不断更新 GUI

> ID：12831706
> 
> 赞同：0
> 
> 时间：2012-10-11T03:23:31.103
> 
> 标签：multithreading, memory-leaks, textbox, updates

我在 WPF 中有一个应用程序，它不断更改 GUI 屏幕中的值（更新！）。这会导致内存使用量上升。特别是所有堆中的#of Bytes。私有字节也会增加。为了模拟始终更新 GUI 的类似场景，我使用以下代码创建了一个简单的应用程序。

```
namespace TextFieldUpdateTest 
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        Int32 Counter = 0;
        Thread NewThread;
        private delegate void ForLoop();
        public delegate void LoopHandler(object sender,EventArgs args);
        public event LoopHandler LoopChange;
        public Window1()
        {
            InitializeComponent();
            NewThread = new Thread(new ThreadStart(ForLoop1));
            LoopChange +=new LoopHandler(Window1_LoopChange);
        }

      private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (!NewThread.IsAlive)
        {
            NewThread.Start();
        }
    }

    public void ForLoop1()
    {
        for (; ; )
        {
            LoopChange(0, EventArgs.Empty);
            Thread.Sleep(10);
        }
    }

    public void Window1_LoopChange(object sender,EventArgs args)
    {
        LoopChange -= this.Window1_LoopChange;
        this.Dispatcher.Invoke(new ForLoop(ForLoop2));
        LoopChange +=new LoopHandler(Window1_LoopChange);
    }

    public void ForLoop2()
    {
        Counter++;
        if (Counter % 2 == 0)
        {
            textBox1.Text = "11111";
            textBox2.Text = "22222";
            textBox3.Text = "33333";
            textBox4.Text = "44444";
            textBox5.Text = "55555";
            textBox6.Text = "66666";

        }
        else
        {
            textBox1.Text = "00000";
            textBox2.Text = "77777";
            textBox3.Text = "88888";
            textBox4.Text = "99999";
            textBox5.Text = "10101";
            textBox6.Text = "45454";

        }

    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        if (NewThread.IsAlive) NewThread.Abort();
    }
}
} 
```

XAML 是

```
 <Window x:Class="TextFieldUpdateTest.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="427">
<Grid>
    <Label Height="30" HorizontalAlignment="Left" Margin="42,41,0,0" Name="label1" VerticalAlignment="Top" Width="79">1</Label>
    <Label Height="30" HorizontalAlignment="Left" Margin="42,72,0,0" Name="label2" VerticalAlignment="Top" Width="79">2</Label>
    <Label HorizontalAlignment="Left" Margin="42,101,0,131" Name="label3" Width="79">3</Label>
    <Label HorizontalAlignment="Left" Margin="42,131,0,101" Name="label4" Width="79">4</Label>
    <Label Height="30" HorizontalAlignment="Left" Margin="42,0,0,71" Name="label5" VerticalAlignment="Bottom" Width="79">5</Label>
    <Label Height="30" HorizontalAlignment="Left" Margin="42,0,0,40" Name="label6" VerticalAlignment="Bottom" Width="79">6</Label>
    <TextBox Height="23" Margin="131,43,155,0" Name="textBox1" VerticalAlignment="Top" FontSize="16" />
    <TextBox Height="23" Margin="131,74,155,0" Name="textBox2" VerticalAlignment="Top" FontSize="16" />
    <TextBox Height="23" Margin="131,103,155,0" Name="textBox3" VerticalAlignment="Top"  FontSize="16"/>
    <TextBox Height="23" Margin="131,0,155,106" Name="textBox4" VerticalAlignment="Bottom" FontSize="16" />
    <TextBox Height="23" Margin="131,0,155,78" Name="textBox5" VerticalAlignment="Bottom" FontSize="16" />
    <TextBox Height="23" Margin="131,0,155,47" Name="textBox6" VerticalAlignment="Bottom" FontSize="16" />
    <Button Height="23" HorizontalAlignment="Right" Margin="0,41,22,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click">Button1</Button>
    <Button Height="23" HorizontalAlignment="Right" Margin="0,101,22,0" Name="button2" VerticalAlignment="Top" Width="75" Click="button2_Click">Button2</Button>
</Grid> 
```

现在，我无法运行此代码（编辑：代码已更改，使其编译和运行正常，但内存问题仍然存在，我减少了睡眠时间，使其更明显）。可能是什么原因。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:32:24.343

用于存储信息的数据类（必须实现 INotifyPropertyChanged 以更新 UI 更改）。这解决了内存永远增加的问题。

# javascript - 通过原型继承方法

> ID：12831707
> 
> 赞同：0
> 
> 时间：2012-10-11T03:23:34.310
> 
> 标签：javascript

我写了下面的测试代码，我想`obj.my().showTxt()`显示“test1”，但是什么也没有显示，我犯了什么错误？谢谢！

```
<html>
<body>
Primitive and String Objects
<script type="text/javascript">

    function Class1() {
        this.showTxt = function () { alert(this.name) }
    }

    Object.prototype.my = Class1;

    var obj = new Object();
    obj.name = "test1";

    obj.my().showTxt();

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:43:29.417

似乎问题在于您的函数`Class1`没有返回自身的实例。

这接近你想要达到的目标吗？

```
function Class1() {
    this.show = function() {
        alert('test');
    }

    return this;
}

Object.prototype.my = Class1;

var obj = new Object();

obj.my().show(); 
```

[http://jsfiddle.net/a4ZgF/](http://jsfiddle.net/a4ZgF/)

函数 Class1 返回 undefined（因为它没有 return 语句）。因此 Object.prototype.my 等于未定义，它没有名为 showTxt() 的函数。通过 return this，您现在已经返回了具有该功能的对象。

使用浏览器的调试器将有助于逐步检查每一行并查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:30:52.513

通过一些重新安排，我认为你可以实现你想做的事情。这是一个例子：

```
function Class1() {
    this.name = null;
}

Class1.prototype = {
    showTxt: function () { alert(this.name) }
};

var c = new Class1();
c.name = "test1";

c.showTxt();​ 
```

**[JSFiddle 示例](http://jsfiddle.net/UDPx6/)**

虽然没有真正知道你想要完成什么，但我不确定我们还能在这里做什么。您是否尝试`Object`使用功能扩展每一个`showTxt()`功能？

# iphone - 在情节提要中使用自定义 UI 图形？

> ID：12831713
> 
> 赞同：-1
> 
> 时间：2012-10-11T03:24:40.307
> 
> 标签：iphone, ios, user-interface, storyboard

我觉得这是一个简单的问题，答案很简单，但是在使用情节提要时，我是否仍然可以像以编程方式创建视图控制器时一样为 UIButtons 使用自定义图像？我想使用情节提要创建我的项目流程，然后在视图全部连接并填写内容后返回以根据自己的喜好调整 UI。这可能吗？

谢谢您的帮助！-Taz88

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:48:49.680

有时，当您有问题时，在 Xcode 中尝试一下而不是在 stackoverflow 上询问会更快。

无论如何，是的。您可以`UIButton`使用自己的图像在情节提要中创建自定义 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:51:23.170

只是为了添加其他人所说的内容，您可以使用情节提要执行与视图相关的*所有*操作，您可以通过其他方式生成视图控制器及其视图。您不必从情节提要中生成视图控制器的视图；您可以在代码中创建它，或者从 nib 获取它，就像您以其他方式获取视图控制器一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:49:08.587

是的。单击情节提要上的 UIButton 并将其设置为自定义类型，然后以与普通 .xib 文件相同的方式为其提供图像。

# java - 检查字符串的最快方法是Java中的字母数字

> ID：12831719
> 
> 赞同：29
> 
> 时间：2012-10-11T03:25:00.213
> 
> 标签：java, performance

检查字符串是否仅包含字母数字字符的最快方法是什么。

我有一些代码会占用大量 CPU，我想知道是否有比使用预编译正则表达式更快的方法。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-11T03:30:03.863

使用[String.matches()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)，例如：

```
String myString = "qwerty123456";
System.out.println(myString.matches("[A-Za-z0-9]+")); 
```

这可能不是绝对“最快”的方法。但总的来说，在性能方面试图与编写该语言的“标准库”的人竞争并没有多大意义。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-11T04:03:53.017

我已经编写了使用正则表达式（根据其他答案）与不使用正则表达式进行比较的测试。在运行 Java 1.6 的四核 OSX10.8 机器上进行的测试

有趣的是，使用正则表达式比手动迭代字符串要慢 5-10 倍。此外，该`isAlphanumeric2()`功能比 略快`isAlphanumeric()`。一种支持允许扩展 Unicode 数字的情况，另一种支持仅允许标准 ASCII 数字的情况。

```
public class QuickTest extends TestCase {

    private final int reps = 1000000;

    public void testRegexp() {
        for(int i = 0; i < reps; i++)
            ("ab4r3rgf"+i).matches("[a-zA-Z0-9]");
    }

public void testIsAlphanumeric() {
    for(int i = 0; i < reps; i++)
        isAlphanumeric("ab4r3rgf"+i);
}

public void testIsAlphanumeric2() {
    for(int i = 0; i < reps; i++)
        isAlphanumeric2("ab4r3rgf"+i);
}

    public boolean isAlphanumeric(String str) {
        for (int i=0; i<str.length(); i++) {
            char c = str.charAt(i);
            if (!Character.isLetterOrDigit(c))
                return false;
        }

        return true;
    }

    public boolean isAlphanumeric2(String str) {
        for (int i=0; i<str.length(); i++) {
            char c = str.charAt(i);
            if (c < 0x30 || (c >= 0x3a && c <= 0x40) || (c > 0x5a && c <= 0x60) || c > 0x7a)
                return false;
        }
        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T03:48:40.907

正则表达式可能会非常有效，因为您将指定范围：`[0-9a-zA-Z]`。假设正则表达式的实现代码是有效的，这将只需要对每个范围进行上限和下限比较。这基本上是编译的正则表达式应该做的：

```
boolean isAlphanumeric(String str) {
    for (int i=0; i<str.length(); i++) {
        char c = str.charAt(i);
        if (c < 0x30 || (c >= 0x3a && c <= 0x40) || (c > 0x5a && c <= 0x60) || c > 0x7a)
            return false;
    }

    return true;
} 
```

我看不出你的代码怎么能比这更有效，因为每个字符都需要检查，而且比较真的再简单不过了。

# iphone - 重用视图控制器更好还是分离逻辑更好

> ID：12831720
> 
> 赞同：2
> 
> 时间：2012-10-11T03:25:03.463
> 
> 标签：iphone, ios, xcode, cocoa-touch

我正在使用几种不同的服务来显示来自提要的文章。它们都可以使用一个视图控制器显示，但是我必须创建一个属性来指示用户来自哪个服务，并在每次我想对这些文章做某事时检查它。

我有这种方法的经验——相信我有很多意大利面条代码，只是为了检查它是哪个服务，决定对每个服务做什么，这有点乱。

所以我有两个选择：

*第一 - 为所有服务重新使用 ArticlesViewController，但检查文章来自哪一个，并在我想编辑这些文章时根据它做不同的事情。*

*2nd - 为每个服务制作FacebookArticlesViewController，TwitterArticlesViewController，SinaWeiboArticlesViewController（只是示例），并分离逻辑。*

你认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T03:40:27.710

惊喜第三个选项！

创建一个名为 的协议或基类`ArticlesViewControllerSourceDelegate`。`ArticlesViewController`对于根据文章来源而具有不同逻辑的每个地方，将选择器添加到`ArticlesViewControllerSourceDelegate`.

`ArticlesViewControllerSourceDelegate`然后为每个文章来源制作一个实现或子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:44:12.160

第一个选项更好，因为您不复制任何代码。将来，如果您必须更改 UI，则只需在一处进行更改。如果你采用第二种方法，你将不得不改变所有视图控制器中的东西，你很有可能会错过一些东西。

此外，您可以做的是，创建一个包含所有常见内容的父文章视图控制器，并仅为那些需要大量自定义的文章类型继承单独的文章视图控制器。

如果您的文章中的差异主要与业务逻辑而不是 UI 有关，那么最好让单独的业务层管理所有这些内容。当然，您可以为这些业务层实现我在上面段落中提到的相同类型的继承。

# java - JApplet、JPanel、JButton，必须调整小程序的大小才能重新绘制（）

> ID：12831722
> 
> 赞同：1
> 
> 时间：2012-10-11T03:25:18.353
> 
> 标签：java, swing, button, applet, repaint

我有一个 JButton，在 JPanel 中，在 JApplet 中，单击它时会执行一些操作，更改 JPanel 的内容，然后应该重新绘制。但是，它似乎并没有重绘按钮本身，而 JPanel 也在重绘它的自身。但是，我认为我需要让 JApplet 自己重新绘制。本质上，我会单击其中一个按钮，按钮会改变，但 JLabels 不会出现。一旦我重新调整小程序，或者在浏览器中将其缩小到浏览器的两侧接触到小程序，它就会全部重置并且看起来很棒！其中一个按钮代码如下：

```
reset.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e)
            {
                //resets the vars
            questions = 0;
            wrong = 0;
            correct = 0;
            //clears the JPanel
            overallJP.removeAll();
            //adds new question, and buttons
            rand = generator.nextInt(10);
            JLabel tmp = new JLabel("Answer the Question: "+"\n"+qArr.get(rand).getQuestion());
            overallJP.setSize(new Dimension(500,700));
            overallJP.add(tmp);
            overallJP.add(buttonArea);
            overallJP.repaint();
            setVisible(true);
            repaint();
            }
        }); 
```

其他按钮看起来相似。我认为问题出在底部的 repaint() 上。有没有办法从这个匿名函数内部调用 JApplet 的重绘？重置按钮在小程序的 init() 中声明。如果您有更多问题或需要更多代码，请询问！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:30:04.623

由于您要从面板中删除组件，因此您可能需要重新验证它。尝试添加：`validate();`

编辑：

[Container.validate()](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#validate%28%29)触发容器的重新布局。它应该在容器被修改时调用——在容器显示后添加、删除组件等。

# c# - 在 C# 中更新 Windows 窗体时如何保存更改

> ID：12831729
> 
> 赞同：0
> 
> 时间：2012-10-11T03:26:18.307
> 
> 标签：c#, winforms

```
List<Customer> customers = new List<Customer>();
int id = 0;

public Form1()
{
    InitializeComponent();
}

private void Form1_Load(object sender, EventArgs e)
{

}

private void AddButton_Click(object sender, EventArgs e)
{
    Customer rec1 = new Customer("C0020", "Alfred", "Campbelltown", 1500, 2006);
    Customer rec2 = new Customer("C0021", "Ryder", "Liverpool", 2000, 2008);
    Customer rec3 = new Customer("C0022", "Alison", "Strathfield", 5500, 2012);
    Customer rec4 = new Customer("C0023", "Eliza", "Liverpool", 6000, 2012);
    Customer rec5 = new Customer("C0024", "Natsu", "Campbelltown", 2560, 2011);
    customers.Add(rec1);
    customers.Add(rec2);
    customers.Add(rec3);
    customers.Add(rec4);
    customers.Add(rec5);
}

private void NextButton_Click(object sender, EventArgs e)
{
    int length = customers.Count - 1;

    if (id == length)
    {
        id = 0;
    }
    else
    {
        ++id;
    }

    //Stage 3 Shows the total balance of all records and is displayed

    double total = 0;

    foreach (Customer Total in customers)
        total += Total.Balance; //Total Balance

    double balance = 0;

    foreach (Customer SubTotal in customers)
       balance = customers.Where(c => c.Suburb == "Liverpool").Sum( c => c.Balance);

    //Create a total balance for each suburb

    custID.Text = customers[id].ID.ToString();
    custName.Text = customers[id].Name.ToString();
    custSuburb.Text = customers[id].Suburb.ToString();
    custBal.Text = customers[id].Balance.ToString();
    custYear.Text = customers[id].Year_used.ToString();
    totBalance.Text = total.ToString();
    totSuburb.Text = balance.ToString();

}

private void PrevButton_Click(object sender, EventArgs e)
{
    int length = customers.Count - 1;

    if (id == 0)
    {
        id = length;
    }
    else
    {
        --id;
    }

    custID.Text = customers[id].ID.ToString();
    custName.Text = customers[id].Name.ToString();
    custSuburb.Text = customers[id].Suburb.ToString();
    custBal.Text = customers[id].Balance.ToString();
    custYear.Text = customers[id].Year_used.ToString();

}

private void exitApp_Click(object sender, EventArgs e)
{
    Application.Exit();
}

private void updateButton_Click(object sender, EventArgs e)
{
    customers[id].Name = custName.Text.ToString();
    customers[id].Suburb = custSuburb.Text.ToString();
    customers[id].Balance = double.Parse(custBal.Text);
    customers[id].Year_used = double.Parse(custYear.Text);
    this.Update(customers);
} 
```

我尝试使用更新按钮保存我的更改，但是当我尝试更改名称或余额并点击更新时它似乎没有更新

有任何想法吗？

我已经尝试过 this.Update() 功能，但没有用 :( 将获得帮助

# c++ - 计算文本文件和打印结果中的单个字母 - 错误的输出 c++

> ID：12831733
> 
> 赞同：0
> 
> 时间：2012-10-11T03:26:57.853
> 
> 标签：c++

我正在尝试从命令行读取文件，将字符读入数组，计算字符个性并打印结果。代码编译时没有任何错误，但单个字母计数远高于大文件应有的数量，有时对于小文件根本不计算在内。

```
#include <iostream>
#include <fstream>
#include <string.h> 
#include <cctype> 
#include <algorithm>

using namespace std;

int main(int argc, char **argv){ 
if(argc !=2){
     cout << "usage: " << argv[0] << " <filename>\n";
}
else{
     ifstream myfile (argv[1]); 
     if(!myfile.is_open())  //check to see if file is opened.
        cout << "Can not open your file\n";
    else{
        static int array[26];  //stores the frequency of letters.
        char t;       
    while(!myfile.eof()){     
        while(myfile.get(t)){
            if(isupper(t)){    
                int i = 0;
                do{
                    array[tolower(t)-'a']++;
                    i++;
                }
            while(i < 26);
            }
        }
    int x = 0;
    while(x < 26){
        cout << 'a' + x << ":" << array[x] << endl;
        x++;
    }
    }
    }
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:33:25.933

问题是`myfile.get(t)`从流中提取一个字符并将其放入`t`. 现在，如果读取的字符恰好是大写字母，则您将在数组上迭代 26 次，以增加其小写字母计数。你只需要做一次。

您还需要处理输入流中的非字母字符。

```
while(!myfile.eof()){     
    myfile.get(t);
    if(isalpha(t) { // process only alphabets.
        if(isupper(t)) // convert upper case to lower case
            t = tolower(t);
        array[t-'a']++; // increment the count
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:27:24.890

这不接受命令行上的文件名（仅处理其标准输入），但可能会为可能更简单的通用方法提供一些灵感：

```
#include <ctype.h>
#include <iostream>
#include <vector>
#include <fstream>
#include <iterator>
#include <algorithm>

int main() {
    std::vector<size_t> freqs(26);

    std::for_each(std::istream_iterator<char>(std::cin), 
        std::istream_iterator<char>(),
        [&](char ch) { if(isalpha(ch)) ++freqs[tolower(ch)-'a']; });

    for (int i=0; i<26; i++)
        std::cout << (char)('a'+i) << ":" << freqs[i] << "\n";

    return 0;
} 
```

# sql - 使用不同的 WHERE 子句连接来自两个表的数据

> ID：12831738
> 
> 赞同：0
> 
> 时间：2012-10-11T03:28:09.193
> 
> 标签：sql, sql-server-2008

我需要在两个单独的表上执行各种联接/联合，以将我的结果合并到一个表中。首先，我将分享我所拥有的和我需要的，然后我将分享我当前的非工作解决方案。

我有的：

*   每个表都包含一个执行的操作列表，每个操作都有一个`opPatient`（所有患者都进行过多次手术），`opClassification`（1、2、3 或 4）`opDate`，，，`opPrice`。

*   A`Start`和`End`查询日期。

我需要的：

生成一个带有以下内容的表：

*   所有不同的列表`opPatients`
*   对于每位患者：
    *   `opprice`所有操作的总和
    *   分类为 4 的所有操作的总和`opPrice`（分类 4 仅在 中`table2`）
    *   所有操作的总数
    *   分类为 3 的操作总数
    *   分类为 2 的操作总数
*   上述所有的`WHERE opDate >= @StartDate AND opDate <= EndDate`

当前解决方案（显然不起作用）

*   设置日期`start`和`end`日期（此处没有错误）

    ```
    SET @StartDate = DATEADD(DAY, -(DATEPART(Day, @Date)-1), @Date);    
    SET @EndDate = DATEADD(DAY, -1, (DATEADD(MONTH, 1, @StartDate)));

    SELECT
       Operation = (SELECT DISTINCT operation FROM table1
                    UNION
                    SELECT DISTINCT operation FROM table2),
       TotalPrice = CAST(opPrice) AS MONEY),
       TotalOps = COUNT(*),
       opC4 = COUNT(CASE
                WHEN opClassification = 4 THEN 1 
                ELSE Null                                  
                END) 
                WHERE opDate <= @EndDate AND opDate >= @StartDate 
                FROM table2,            
       opC3 = COUNT (CASE WHEN opClassification = 3 THEN 1 ELSE Null END),
       opC2 = COUNT (CASE WHEN opClassification = 2 THEN 1 ELSE Null END)
     FROM 
        table1, table2
     WHERE 
         table1.opDate <= @EndDate AND table1.opDate >= @StartDate 
     ORDER BY 
         Operation 
    ```

所有帮助、提示和指示将不胜感激！

谢谢！！此致， Nooby 编码器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:23:55.477

根据您的要求，这似乎是您所需要的。

```
SELECT opPatient
, SUM(CASE WHEN opClassification = 1 THEN 1 ELSE 0 END) opC1
, SUM(CASE WHEN opClassification = 2 THEN 1 ELSE 0 END) opC2
, SUM(CASE WHEN opClassification = 3 THEN 1 ELSE 0 END) opC3
, SUM(CASE WHEN opClassification = 4 THEN 1 ELSE 0 END) opC4
, SUM(opPrice) AS TotalPrice
FROM
(
    SELECT * FROM Table1
    UNION ALL
    SELECT * FROM Table2
) AS NewTable
WHERE opDate >= @StartDate AND opDate <= @EndDate 
GROUP BY opPatient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:17:55.473

```
SET @StartDate = DATEADD(DAY, -(DATEPART(Day, @Date)-1), @Date);
SET @EndDate = DATEADD(DAY, -1, (DATEADD(MONTH, 1, @StartDate)));  

SELECT opPatient, 
    -- Totals
    COUNT(opPrice) AS OpsTotal, 
    SUM(opPrice) AS PriceTotal,
    SUM(CASE WHEN opDate >= @StartDate AND opDate <= EndDate THEN opPrice END) AS PriceThisMonth,
    -- Op 4
    SUM(CASE WHEN opClassification = 4 THEN 1 END) AS OpsOp4,
    SUM(CASE WHEN opClassification = 4 THEN opPrice END) AS PriceOp4,
    SUM(CASE WHEN opClassification = 4 AND opDate >= @StartDate AND opDate <= EndDate THEN opPrice END) AS Op4PriceThisMonth,
    -- Op 3
    SUM(CASE WHEN opClassification = 3 THEN 1 END) AS OpsOp4,
    SUM(CASE WHEN opClassification = 3 THEN opPrice END) AS PriceOp4,
    SUM(CASE WHEN opClassification = 3 AND opDate >= @StartDate AND opDate <= EndDate THEN opPrice END) AS Op4PriceThisMonth,
    -- Op 2
    SUM(CASE WHEN opClassification = 2 THEN 1 END) AS OpsOp4,
    SUM(CASE WHEN opClassification = 2 THEN opPrice END) AS PriceOp4,
    SUM(CASE WHEN opClassification = 2 AND opDate >= @StartDate AND opDate <= EndDate THEN opPrice END) AS Op4PriceThisMonth,

FROM (
    SELECT opPatient, opClassification, opDate, opPrice
    FROM Table1
    UNION ALL
    SELECT opPatient, opClassification, opDate, opPrice
    FROM Table1
)
GROUP BY opPatient 
```

# javascript - 如何在单个jsp页面中调用多个servlet表单动作

> ID：12831739
> 
> 赞同：2
> 
> 时间：2012-10-11T03:28:32.453
> 
> 标签：javascript, jsp, servlets

现在，我在单个 jsp 页面中调用了单个 servlet 表单操作。我想在同一个 jsp 页面中调用多个 servlet 表单操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T06:04:39.090

我认为您误解了 Servlet 的工作原理以及它们的用途。请记住，Servlet 用于服务客户端的请求并发送回响应。假设您在第一个 servlet 中处理用户的请求。

为什么要在同一个请求中调用另一个 servlet？是否执行不会在响应中添加任何内容的附加功能？如果是这种情况，那么您可能不需要另一个 servlet。您只需要扩展您的第一个 servlet 的功能。

如果您想调用另一个 servlet 向响应对象添加一些内容，那么最好修改第一个 servlet 的工作方式，并将第二个 servlet 的功能集成到第一个 servlet 中。

如果您的情况是您想将用户重定向到另一个 jsp/servlet 而不关心第一个 servlet 的响应，那么您可以选择`request.sebdRedirect("yourJsp.jsp")`or`request.getRequestDispatcher("yourJsp.jsp").forward(request, response);`这就是它们[的](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect?lq=1)区别。

因此，关闭一切取决于您的业务逻辑......您必须选择适合您需求的选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T05:35:52.017

你不能在一个jsp表单中调用多个servlet，因为form的action属性只接受一个url！

```
<form method="get" action="/yourservlet"> 
<!-- action only accepts a single url! --> 
```

# c# - Application.Run 在 Application.Exit 在同一个线程上之后不起作用

> ID：12831741
> 
> 赞同：4
> 
> 时间：2012-10-11T03:28:49.090
> 
> 标签：c#, .net, winforms, message-pump

我的工作要求是首先显示一个启动屏幕，该屏幕从用户那里获取一些数据，对他进行身份验证并启动另一个表单。因此，我使用 Application.Run 启动初始屏幕，一旦完成，调用 Application.Exit 然后再次调用 Application.Run 以获取新表单。但是，这不会启动新表单。我创建了一个新线程并将其 ApartmentModel 分配为 STA 以启动新表单。

我想了解为什么 Application.Run 在调用 Application.Exit 后不起作用？

示例代码：

```
 Application.Run(SplashForm);  

        if (_authorizationSuccessful)
            Application.Run(new Form2())
        else
        {
            //just close
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:55:44.203

它相当令人费解，但核心问题是它实际上并不是让应用程序保持活动状态的表单。核心帮助类是 ApplicationContext，也作为 Application.Run() 的重载之一公开。当您使用其他重载 Run() 和 Run(Form) 时，Application 类会创建 ApplicationContext 的隐藏实例。它是全局的，就像所有的应用程序属性和方法一样。

因此，当您调用 Application.Exit() 时，会将 ApplicationContext 的全局实例标记为“不再活动”。这使得对 Run(Form) 的*下一次*调用立即退出。

您可以使用自己的 ApplicationContext 实例来解决这个问题。但样板解决方案是在登录表单上使用 ShowDialog() 方法。也是返回“登录成功，让我们继续”状态的好方法，DialogResult 很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:53:36.133

首先，您需要在此表单中显示主表单（在您的情况下为第二表单），您需要调用启动画面（身份验证），直到那时主表单将被隐藏。在启动画面中，您需要使用 this.Close() 而不是 Application.Exit()。关闭启动屏幕后，您需要显示主窗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T06:42:13.020

这样做

```
new SplashScreenForm().ShowDialog();//show splash screen and take user input
new MainForm().Show();//now show the main form
Application.Run();//starts the app 
```

**或者**

```
if (new SplashScreenForm().ShowDialog() == DialogResult.OK)//if its ok to start another form
{
    Application.Run(new MainForm());
} 
```

* * *

## 笔记

> Application.Run(Form) 在当前线程上启动一个消息循环并显示指定的表单。消息循环使表单能够接收 Windows 消息（例如，按键、鼠标单击、绘制失效），以使其显示为响应式并与用户进行交互

所以，当你`Application.Exit()`关闭整个应用程序时，而不是特定的形式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T07:06:38.970

与其把所有东西都拆掉，只是为了重新建立起来，为什么不这样做：

```
var f1 = new Form1();
f1.Show();
Application.Run(); 
```

`Form1`闪屏在哪里。然后当它准备好显示主屏幕时，它可以这样做：

```
var f2 = new Form2();
f2.Show();
this.Close(); 
```

`Form2`主屏幕在哪里。（单个）消息循环始终保持运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T09:14:21.933

当您想退出应用程序时，向 main 方法抛出异常，捕获异常并根据需要退出应用程序。

认为，

```
try
{
    // your code here
}
catch
{
    // Some exception occurred here, and you want to exit here...
    throw;
} 
```

在主程序中捕获异常，主程序代码为：

```
try
{
    Application.Run(new Form1());// <-- This is where you want to run your app
}
catch // <-- Catch here the exception where you want to exit your app
{
    Application.Exit(); //<-- exit app here.
} 
```

# c# - 在不使用 Ghostscript DLL 的情况下将 PDF 转换为图像

> ID：12831742
> 
> 赞同：17
> 
> 时间：2012-10-11T03:29:07.850
> 
> 标签：c#

有什么办法，我可以将 HTML 文档（文件不是 URL）转换为图像，或将 PDF 转换为图像？

我可以使用 Ghostscript DLL 完成上述操作，有没有其他方法，我可以做到这一点，而不使用 Ghostscript DLL？

我正在开发一个 C# Windows 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-01-30T12:55:31.760

最好和免费的 nuget 包，您可以将 Pdf 的每一页保存为 png 并使用自定义 resilution [Docnet.core](https://nugetmusthaves.com/Package/Docnet.Core)，这可以在 .net 核心项目中使用。

他们有 github 和很好的例子，但在这里我想添加我的代码来阅读更多的一页的 en pdf

```
 string webRootPath = _hostingEnvironment.WebRootPath;
        string fullPath = webRootPath + "/uploads/user-manual/file.pdf";
        string fullPaths = webRootPath + "/uploads/user-manual";

        using (var library = DocLib.Instance)
        {
            using (var docReader = library.GetDocReader(fullPath, 1080, 1920))
            {
                for (int i = 1; i < docReader.GetPageCount(); i++)
                {
                    using (var pageReader = docReader.GetPageReader(i))
                    {
                        var bytes = EmailTemplates.GetModifiedImage(pageReader);

                        System.IO.File.WriteAllBytes(fullPaths+"/page_image_" +i+".png", bytes);
                    }
                }

            }
        } 
```

您可以在他们的 github 存储库中找到其他功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T03:35:05.673

使用[**LibPdf**](https://code.google.com/p/lib-pdf/)，用于 PDF 到图像的转换

> [LibPdf](https://code.google.com/p/lib-pdf/)库将 PDF 文件转换为图像。支持的图像格式是 PNG 和 BMP，但您可以轻松添加更多格式。

使用示例：

```
using (FileStream file = File.OpenRead(@"..\path\to\pdf\file.pdf")) // in file
{
    var bytes = new byte[file.Length];
    file.Read(bytes, 0, bytes.Length);
    using (var pdf = new LibPdf(bytes))
    {
        byte[] pngBytes = pdf.GetImage(0,ImageType.PNG); // image type
        using (var outFile = File.Create(@"..\path\to\pdf\file.png")) // out file
        {
            outFile.Write(pngBytes, 0, pngBytes.Length);
        }
    }
} 
```

[**ImageMagick**](http://www.imagemagick.org/script/index.php)，您还应该看看这个免费提供且功能强大的工具。它能够做你想做的事，还提供了一些 .NET 绑定（以及与其他几种语言的绑定）。

最简单的形式，就像写一个命令

```
convert file.pdf imagefile.png 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T04:14:01.153

您可以使用以下任何一个库进行 PDF 到图像的转换

使用下面**的 Aspose.pdf** 链接： [http ://www.aspose.com/docs/display/pdfnet/Convert+all+PDF+pages+to+JPEG+Images](http://www.aspose.com/docs/display/pdfnet/Convert+all+PDF+pages+to+JPEG+Images)

代码示例：

```
Aspose.Pdf.Document pdfDocument = new Aspose.Pdf.Document(MyPdfPath));
using (FileStream imageStream = new FileStream(MyOutputImage.png, FileMode.Create))
{
     Resolution resolution = new Resolution(300);
    PngDevice pngDevice = new PngDevice(resolution);
    pngDevice.Process(pdfDocument.Pages[PageNo], MyOutputImage);
    imageStream.Close();
} 
```

使用下面**的 Bytescout PDF Renderer** 链接： [http ://bytescout.com/products/developer/pdfrenderersdk/convert-pdf-to-png-basic-examples](http://bytescout.com/products/developer/pdfrenderersdk/convert-pdf-to-png-basic-examples)

代码示例：

```
MemoryStream ImageStream = new MemoryStream();
RasterRenderer renderer = new RasterRenderer();
renderer.RegistrationName = "demo";
renderer.RegistrationKey = "demo";
// Load PDF document.
renderer.LoadDocumentFromFile(FilePath);
for (int i = 0; i < renderer.GetPageCount(); i++)
{
    // Render first page of the document to PNG image file.
    renderer.RenderPageToStream(i, RasterOutputFormat.PNG, ImageStream);
}
Image im = Image.FromStream(ImageStream);
im.Save("MyOutputImage.png");
ImageStream.Close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-18T01:01:27.033

试试 Freeware.Pdf2Png，查看以下网址：

PDF转PNG转换器。

```
byte[] png = Freeware.Pdf2Png.Convert(pdf, 1); 
```

[https://www.nuget.org/packages/Freeware.Pdf2Png/1.0.1?_src=template](https://www.nuget.org/packages/Freeware.Pdf2Png/1.0.1?_src=template)

它说麻省理工学院的许可证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-21T14:24:58.017

使用[docnet](https://github.com/GowenGit/docnet)，基于[github](https://github.com/GowenGit/docnet/blob/master/examples/nuget-usage/NugetUsageX64/PdfToImageExamples.cs)上的这个例子，我做到了，非常简单和实用：

[本例中使用的 pdf](https://www.soundczech.cz/temp/lorem-ipsum.pdf)。

```
//...
using Docnet.Core;
using System.IO;
using Docnet.Core.Models;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;

//paths
string pathPdf = @"C:\pathToPdfFile\lorem-ipsum.pdf";
string finalPathWithFileName = @"C:\pathToFinalImageFile\finalFile.png";

//using docnet
using (var docReader = DocLib.Instance.GetDocReader(pathPdf, new PageDimensions(1080, 1920)))
{
    //open pdf file
    using (var pageReader = docReader.GetPageReader(0))
    {
        var rawBytes = pageReader.GetImage();
        var width = pageReader.GetPageWidth();
        var height = pageReader.GetPageHeight();
        var characters = pageReader.GetCharacters();

        //using bitmap to create a png image
        using (var bmp = new Bitmap(width, height, PixelFormat.Format32bppArgb))
        {
            AddBytes(bmp, rawBytes);

            using (var stream = new MemoryStream())
            {
                //saving and exporting
                bmp.Save(stream, ImageFormat.Png);
                File.WriteAllBytes(finalPathWithFileName, stream.ToArray());
            };
        };
    };
};

//extra methods
private static void AddBytes(Bitmap bmp, byte[] rawBytes)
{
    var rect = new Rectangle(0, 0, bmp.Width, bmp.Height);

    var bmpData = bmp.LockBits(rect, ImageLockMode.WriteOnly, bmp.PixelFormat);
    var pNative = bmpData.Scan0;

    Marshal.Copy(rawBytes, 0, pNative, rawBytes.Length);
    bmp.UnlockBits(bmpData);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-07T09:23:18.070

虽然使用带有 ImageMagick 的 Ghostscript 是一个潜在的选择，但它非常慢，每页大约需要 5 秒或更长时间。DocNet 是将 pdf 转换为图像的更好选择。以下代码会将 pdf 文件中的所有页面转换为图像，并且速度很快。

```
 public void SavePDFtoJPGDocnet(string fileName)
    {
        string FilePath = @"C:\SampleFileFolder\doc.pdf";
        string DestinationFolder = @"C:\SampleFileFolder\";

        IDocLib DocNet = DocLib.Instance;

        //you are specifying the max resolution of image on any side, actual resolution will be limited by longer side, 
        //preserving the aspect ratio
        var docReader = DocNet.GetDocReader(
        FilePath,
        new PageDimensions(1440, 2560));

        for (int i = 0; i < docReader.GetPageCount(); i++)
        {
            using (var pageReader = docReader.GetPageReader(i))
            {
                var rawBytes = pageReader.GetImage();

                var width = pageReader.GetPageWidth();
                var height = pageReader.GetPageHeight();

                var characters = pageReader.GetCharacters();

                var bmp = new Bitmap(width, height, PixelFormat.Format32bppArgb);

                DocnetClass.AddBytes(bmp, rawBytes);
                //DocnetClass.DrawRectangles(bmp, characters);

                var stream = new MemoryStream();

                bmp.Save(stream, ImageFormat.Png);

                File.WriteAllBytes(DestinationFolder + "/page_image_" + i + ".png", stream.ToArray());

            }
        }

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-27T03:54:13.577

[Spire.PDF](https://www.e-iceblue.com/Introduce/pdf-for-net-introduce.html)库可用于 PDF 到图像的转换，例如 PDF 到 PNG、JPG、EMF 和 TIFF 等。

以下代码示例展示了如何将 PDF 转换为 PNG：

```
 //Load a PDF
 PdfDocument doc = new PdfDocument();
 doc.LoadFromFile("PdfFilePath");

 //Save to PNG images
 for (int i = 0; i < doc.Pages.Count; i++)
 {
     String fileName = String.Format("ToImage-img-{0}.png", i);
     using (Image image = doc.SaveAsImage(i,300,300))
     {
         image.Save(fileName, System.Drawing.Imaging.ImageFormat.Png);
     }
 }

 doc.Close(); 
```

更多转换示例可以在库的[文档](https://www.e-iceblue.com/Tutorials/Spire.PDF/Spire.PDF-Program-Guide/Spire.PDF-Program-Guide-Content.html)中找到。它还提供[免费的社区版](https://www.e-iceblue.com/Introduce/free-pdf-component.html)，但有一些限制。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-10-22T09:46:54.257

如果有人想使用***Ghostscript.NET***。

Ghostscript.NET -（用 C# 编写）是围绕 Ghostscript 库（32 位和 64 位）最完整的托管包装库，它是 PostScript 语言 PDF 的解释器。

它取决于您必须在机器上安装的可执行文件。这是一个链接，您可以从中查看和下载最新版本的 exe。

> [https://www.ghostscript.com/download/gsdnld.html](https://www.ghostscript.com/download/gsdnld.html)

PS 我在最新版本 9.50 无法计算页数时遇到了一些麻烦。

我更喜欢使用 9.26 版本。

> [https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs926/gs926aw32.exe](https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs926/gs926aw32.exe)
> 
> [https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs926/gs926aw64.exe](https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs926/gs926aw64.exe)

下一步是**从 Nuget 查找并安装 Ghostscript.NET**。我从 CDN url 下载 PDF 并使用**MemoryStream**打开和处理 PDF 文件。这是一个示例代码：

```
using (WebClient myWebClient = new WebClient())
            {
                using (GhostscriptRasterizer rasterizer = new GhostscriptRasterizer())
                {
                    /* custom switches can be added before the file is opened

                    rasterizer.CustomSwitches.Add("-dPrinted");

                    */
                    byte[] buffer = myWebClient.DownloadData(pdfUrl);
                    using (var ms = new MemoryStream(buffer))
                    {
                        rasterizer.Open(ms);
                        var image = rasterizer.GetPage(0, 0, 1);

                        var imageURL = "MyCDNpath/Images/" + filename + ".png";
                        _ = UploadFileToS3(image, imageURL);
                    }
                }
            } 
```

您也可以将它与临时 FileStream 一起使用。这是另一个例子。请注意，该文件是临时的并且具有 DeleteOnClose 标记。

```
using (WebClient myWebClient = new WebClient())
            {
                using (GhostscriptRasterizer rasterizer = new GhostscriptRasterizer())
                {
                    /* custom switches can be added before the file is opened

                    rasterizer.CustomSwitches.Add("-dPrinted");

                    */
                    byte[] buffer = myWebClient.DownloadData(pdfUrl);

                    int bufferSize = 4096;

                    using (var fileStream = System.IO.File.Create("TempPDFolder/" + pdfName, bufferSize, System.IO.FileOptions.DeleteOnClose))
                    {
                        // now use that fileStream to save the pdf stream
                        fileStream.Write(buffer, 0, buffer.Length);
                        rasterizer.Open(fileStream);
                        var image = rasterizer.GetPage(0, 0, 1);

                        var imageURL = "MyCDNpath/Images/" + filename + ".png";

                        _ = UploadFileToS3(image, imageURL);
                    }
                }
            } 
```

希望它能帮助那些努力从 pdf 免费获取高质量图像的人。

# c++ - OBJ 模型渲染差距

> ID：12831743
> 
> 赞同：-1
> 
> 时间：2012-10-11T03:29:11.300
> 
> 标签：c++, opengl, 3d, wavefront

当我渲染使用自己构建的解析器解析的 OBJ Wavefront 模型时，渲染时得到以下结果：

![在此处输入图像描述](../Images/af00e3516484ea603fe906d418d0e371.png)

存在的差距是正常的还是仅仅是由于错误的渲染代码造成的？

这是渲染代码：

```
glPushMatrix();
glColor3f(1.0f, 1.0f, 1.0f);
glScaled(scale, scale, scale);

glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);

for (int i = 0; i < vertices_indexes.size()-3; i+=3) {
    glBegin(GL_TRIANGLE_FAN);
        if (is_normals) glNormal3f(normals.at(normals_indexes[i]).x, normals.at(normals_indexes[i]).y, normals.at(normals_indexes[i]).z);
        glVertex3f(vertices.at(vertices_indexes[i]).x, vertices.at(vertices_indexes[i]).y, vertices.at(vertices_indexes[i]).z);

        if (is_normals) glNormal3f(normals.at(normals_indexes[i+1]).x, normals.at(normals_indexes[i+1]).y, normals.at(normals_indexes[i+1]).z);
        glVertex3f(vertices.at(vertices_indexes[i + 1]).x, vertices.at(vertices_indexes[i + 1]).y, vertices.at(vertices_indexes[i + 1]).z);

        if (is_normals) glNormal3f(normals.at(normals_indexes[i+2]).x, normals.at(normals_indexes[i+2]).y, normals.at(normals_indexes[i+2]).z);
        glVertex3f(vertices.at(vertices_indexes[i + 2]).x, vertices.at(vertices_indexes[i + 2]).y, vertices.at(vertices_indexes[i + 2]).z);
    glEnd();
}

glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T02:44:12.020

您是否检查过您的模型是用三角形而不是四边形创建的？您找到的大多数模型默认以四边形渲染，因此您可以将其加载到 3D 程序（如 Blender 或 Maya）中并将网格转换为三角形（在 Blender 中按 Ctrl+T），或更改解析器以处理四边形.

# php - 按产品过滤订单

> ID：12831745
> 
> 赞同：2
> 
> 时间：2012-10-11T03:29:33.547
> 
> 标签：php, mysql, sql

我是 SQL 开发的新手。我不擅长 SQL 连接:(。

**请帮我编写一个 SQL 查询，从下表中为产品“家用便携式激光脱毛器**”提取以下文件。

**所需文件：**

orders.id、orders.order_price、orders.purchase_date、customers.email、product_orders.qty、products.name

**表一：订单**

```
id  customer_id order_price purchase_date
1   1                   0.20    12/6/2011
2   2                   0.20    12/6/2011
3   1                   0.20    12/6/2011
4   1                   0.20    12/6/2011
5   1                   0.20    12/7/2011
6   3                   199.00  12/7/2011
7   4                   199.00  12/7/2011
8   5                   199.00  12/7/2011
9   6                   199.00  12/7/2011
10  7                   199.00  12/7/2011 
```

**表二：客户**

```
id  email                   name
1   aa@dealboard.com.au aa
2   bb@dealboard.com.au bb
3   cc@live.com.au          cc
4   dd@acgglobal.com    dd
5   ee.heinrich@det.nsw.edu.au  ee
6   ff@optusnet.com.au  ff
7   ssy@hotmail.com         ss 
```

**表 3：产品**

```
id  name
1   A Home Portable Laser Hair Remover
2   Ipad
3   android
4   Asus
5   s
6   10 inch Android
7   A Fabric Steamer Cleaner
8   A Magnetic Fly Screen Door
9   pillopw
10  LCD 
```

**表 4：product_orders**

```
 id orders_id product_id qty
        1   1      1         1
        2   2      1         1
        3   3      1         1
        4   4      1         1
        5   5      2         1
        6   6      1         1
        7   7      1         1
        8   8      1         1
        9   9      1         1
        10  10     1         1 
```

我想提取产品 id 1 的所有订单或按产品过滤订单

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:35:06.157

听起来你想加入所有表：

```
select orders.id, orders.order_price, orders.purchase_date, customers.email,
    product_orders.qty, products.name from orders, customers, product_orders,
    products where
    orders.customer_id = customers.id and
    product_orders.order_id = orders.id and
    products.id = product_orders.product_id and
    products.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:29:33.420

测试这个-

```
SELECT product_orders.id, OC.order_price, OC.purchase_date, OC.email, product_orders.qty, products.name
FROM product_orders 
LEFT JOIN
(SELECT orders.id as oid,orders.order_price,orders.purchase_date,customers.id as cid ,customers.email,customers.name
FROM orders
LEFT JOIN customers
ON orders.customer_id=cutomers.id) as OC
ON
product_orders.orders_id=OC.oid AND
product_orders.product_id=1
LEFT JOIN
products
ON
product_orders.product_id=products.name 
```

# javascript - Javascript：构建分层树

> ID：12831746
> 
> 赞同：16
> 
> 时间：2012-10-11T03:29:36.860
> 
> 标签：javascript

我的数据具有以下属性：

1.  每个条目都有一个唯一的 id (Id)
2.  每个都有一个 Parent 字段，它指向父级的 Id。
3.  一个节点可以有多个子节点，但只有一个父节点。

我第一次尝试构建一棵树如下。这是错误的，因为递归会导致无限循环。即使我解决了它，我也不确定是否有更好的方法来做到这一点。目前，我在 2 次通过。

我希望它尽可能高效，因为我有大量的数据。它还需要动态重建树（根可以是任何节点）

下面程序中有示例数据：

```
 arry = [{"Id":"1", "Name":"abc", "Parent":""}, {"Id":"2", "Name":"abc", "Parent":"1"},
    {"Id":"3", "Name":"abc", "Parent":"2"},{"Id":"4", "Name":"abc", "Parent":"2"}]//for testing 
```

我希望输出是（它可能是错误的嵌套结构，因为我手动编写了它。但是，我希望是一个有效的 JSON 结构，其中节点作为字段“值”，子节点作为数组。）

```
{
 "value": {"Id":"1", "Name":"abc", "Parent":""},
 "children": [
  {
   "value": {"Id":"2", "Name":"abc", "Parent":"1"},
   "children": [
    {
     "value": {"Id":"3", "Name":"abc", "Parent":"2"},
     "children": []
     },
     {
     "value": {"Id":"4", "Name":"abc", "Parent":"2"},
     "children": []
     }
   ]
..
} 
```

示例程序：

```
function convertToHierarchy(arry, root) 
{
//root can be treated a special case, as the id is known
    arry = [{"Id":"1", "Name":"abc", "Parent":""}, {"Id":"2", "Name":"abc", "Parent":"1"},
    {"Id":"3", "Name":"abc", "Parent":"2"},{"Id":"4", "Name":"abc", "Parent":"2"}]//for testing

    var mapping = {}; // parent : [children]
    for (var i = 0; i < array.length; i++) 
    {
        var node = arry[i];

    if (!mapping[node.Id]) { 
          mapping[node.Id] = {value: node, children:[] } ;
        }else{
      mapping[node.Id] = {value: node} //children is already set    
    }

    if (!mapping[node.Parent]) { //TODO what if parent doesn't exist.
                mapping[node.Parent] =  {value: undefined, children:[ {value: node,children:[]} ]};
        }else {//parent is already in the list
        mapping[node.Parent].children.push({value: node,children:[]} )
    }

    }
    //by now we will have an index with all nodes and their children.

    //Now, recursively add children for root element.

    var root = mapping[1]  //hardcoded for testing, but a function argument
    recurse(root, root, mapping)
    console.log(root)

    //json dump
}

function recurse(root, node, mapping)
{
    var nodeChildren = mapping[node.value.Id].children;
    root.children.push({value:node.value, children:nodeChildren})
   for (var i = 0; i < nodeChildren.length; i++) {
        recurse(root, nodeChildren[i], mapping);
    }
    return root;
} 
```

到目前为止，我有 3 个很好的解决方案，并希望投票建议更惯用、更有效的实施。我不确定，利用我的数据的属性，输入数组中只有一个根元素，并且根总是给出，这些实现中的任何一个都可能更好。我还应该学习如何进行基准测试，因为我的要求是重建树的效率（快速/没有太多内存）。例如，输入已经被缓存（数组）并像重建树一样

```
convertToHierarchy(parentid)
....
convertToHierarchy(parentid2)
... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-11T04:00:55.267

这是一个解决方案：

```
var items = [
    {"Id": "1", "Name": "abc", "Parent": "2"},
    {"Id": "2", "Name": "abc", "Parent": ""},
    {"Id": "3", "Name": "abc", "Parent": "5"},
    {"Id": "4", "Name": "abc", "Parent": "2"},
    {"Id": "5", "Name": "abc", "Parent": ""},
    {"Id": "6", "Name": "abc", "Parent": "2"},
    {"Id": "7", "Name": "abc", "Parent": "6"},
    {"Id": "8", "Name": "abc", "Parent": "6"}
];

function buildHierarchy(arry) {

    var roots = [], children = {};

    // find the top level nodes and hash the children based on parent
    for (var i = 0, len = arry.length; i < len; ++i) {
        var item = arry[i],
            p = item.Parent,
            target = !p ? roots : (children[p] || (children[p] = []));

        target.push({ value: item });
    }

    // function to recursively build the tree
    var findChildren = function(parent) {
        if (children[parent.value.Id]) {
            parent.children = children[parent.value.Id];
            for (var i = 0, len = parent.children.length; i < len; ++i) {
                findChildren(parent.children[i]);
            }
        }
    };

    // enumerate through to handle the case where there are multiple roots
    for (var i = 0, len = roots.length; i < len; ++i) {
        findChildren(roots[i]);
    }

    return roots;
}

console.log(buildHierarchy(items));​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T04:10:12.403

这是另一个。这应该适用于多个根节点：

```
function convertToHierarchy() { 

    var arry = [{ "Id": "1", "Name": "abc", "Parent": "" }, 
    { "Id": "2", "Name": "abc", "Parent": "1" },
    { "Id": "3", "Name": "abc", "Parent": "2" },
    { "Id": "4", "Name": "abc", "Parent": "2"}];

    var nodeObjects = createStructure(arry);

    for (var i = nodeObjects.length - 1; i >= 0; i--) {
        var currentNode = nodeObjects[i];

        //Skip over root node.
        if (currentNode.value.Parent == "") {
            continue;
        }

        var parent = getParent(currentNode, nodeObjects);

        if (parent == null) {
            continue;
        }

        parent.children.push(currentNode);
        nodeObjects.splice(i, 1);
    }

    //What remains in nodeObjects will be the root nodes.
    return nodeObjects;
}

function createStructure(nodes) {
    var objects = [];

    for (var i = 0; i < nodes.length; i++) {
        objects.push({ value: nodes[i], children: [] });
    }

    return objects;
}

function getParent(child, nodes) {
    var parent = null;

    for (var i = 0; i < nodes.length; i++) {
        if (nodes[i].value.Id == child.value.Parent) {
            return nodes[i];
        }
    }

    return parent;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-27T13:56:01.233

**虽然上述解决方案确实有效**- 我认为它们**非常缓慢**且未优化，有太多循环和过时的方法（我们将使用**ES6**语法）。我建议使用波纹管优化的解决方案，它会给你带来性能提升。[阅读此博客文章以了解其工作原理。](https://medium.com/@Kivylius/building-a-hierarchical-tree-from-a-list-explained-in-detail-4c4ed60d1f1c)

`javascript`

```
const hierarchy = (data) => {
    const tree = [];
    const childOf = {};
    data.forEach((item) => {
        const { Id, Parent } = item;
        childOf[Id] = childOf[Id] || [];
        item.children = childOf[Id];
        Parent ? (childOf[Parent] = childOf[Parent] || []).push(item) : tree.push(item);
    });
    return tree;
};

// print
console.log(hierarchy([{"Id":"1", "Name":"abc", "Parent":""}, {"Id":"2", "Name":"abc", "Parent":"1"}, {"Id":"3", "Name":"abc", "Parent":"2"},{"Id":"4", "Name":"abc", "Parent":"2"}], { idKey: 'Id', parentKey: 'Parent' }));
```

这里有一些结果和其他海报之间的比较

[![在此处输入图像描述](../Images/fe8b5a461eef776ec147570780e20837.png)](https://i.stack.imgur.com/43sRb.png)

[http://jsben.ch/ekTls](http://jsben.ch/ekTls)

* * *

如果您在此处寻找带有参数的版本以获得**更动态但稍慢的版本**，则如下所示：

```
const hierarchy = (data = [], { idKey = 'id', parentKey = 'parentId', childrenKey = 'children' } = {}) => {
    const tree = [];
    const childrenOf = {};
    data.forEach((item) => {
        const { [idKey]: id, [parentKey]: parentId = 0 } = item;
        childrenOf[id] = childrenOf[id] || [];
        item[childrenKey] = childrenOf[id];
        parentId ? (childrenOf[parentId] = childrenOf[parentId] || []).push(item) : tree.push(item);
    });
    return tree;
} 
```

快乐的黑客

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T05:26:18.063

我会做这样的事情。它处理多个根节点并且是相当可读的IMO。

```
array = [{"Id":"1", "Name":"abc", "Parent":""}, 
    {"Id":"2", "Name":"abc", "Parent":"1"},
    {"Id":"3", "Name":"abc", "Parent":"2"},
    {"Id":"4", "Name":"abc", "Parent":"2"},
    {"Id":"5", "Name":"abc", "Parent":""},
    {"Id":"6", "Name":"abc", "Parent":"5"}];

function buildHierarchy(source)
{

    Array.prototype.insertChildAtId = function (strId, objChild)
    {
        // Beware, here there be recursion
        found = false;
        for (var i = 0; i < this.length ; i++)
        {
            if (this[i].value.Id == strId)
            {
                // Insert children
                this[i].children.push(objChild);
                return true;
            }
            else if (this[i].children)
            {
                // Has children, recurse!
                found = this[i].children.insertChildAtId(strId, objChild);
                if (found) return true;
            }
        }
        return false;
    };

    // Build the array according to requirements (object in value key, always has children array)
    var target = [];
    for (var i = 0 ; i < array.length ; i++)
        target.push ({ "value": source[i], "children": []});

    i = 0;
    while (target.length>i)
    {
        if (target[i].value.Parent)
        {
            // Call recursion to search for parent id
            target.insertChildAtId(target[i].value.Parent, target[i]); 
            // Remove node from array (it's already been inserted at the proper place)
            target.splice(i, 1); 
        }
        else
        {
            // Just skip over root nodes, they're no fun
            i++; 
        }
    }
    return target;
}

console.log(buildHierarchy(array)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-10T09:13:27.560

在 ES6 中实现，带有一个简单的示例输入。可以在浏览器控制台中测试

```
let array = [{ id: 'a', children: ['b', 'c'] }, { id: 'b', children: [] }, { id: 'c', children: ['b', 'd'] }, { id: 'd', children: ['b'] }],
  tree = (data) => {
      let nodes = Object.create(null),
          result = {};
      data.forEach((item) => {
        if (!nodes[item.id]) {
          nodes[item.id] = {id: item.id, children: []}
          result = nodes
        }
        item.children.forEach((child) => {
          nodes[child] = {id: child, children: []}
          nodes[item.id].children.push(nodes[child])
        })
      })
      return result
    }

console.log(tree(array)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-07T23:44:57.640

伙计们，如果我在 nodejs 中使用它并且需要创建嵌套的 ul/li 而不是 json 怎么办？可以请写代码

# cakephp - cakephp 在电子邮件中附加 word 文档

> ID：12831747
> 
> 赞同：0
> 
> 时间：2012-10-11T03:29:46.180
> 
> 标签：cakephp

我正在使用 CakePHP，我需要发送带有附件的电子邮件，这是我的代码

```
function sendAsEmail($data) {
    App::import('Component', 'Email');
    $user = $this->Sender->find('first', array(
        'conditions' => array('Sender.id' => $data['Message']['sender_id']),
    ));
    $Email = new EmailComponent();
    if ($this->useDbConfig == 'test') {
        $Email->delivery = 'debug';
    }

    $Email->sendAs = 'html';
    $Email->from = 'info@admin.ca';
    $Email->return = Configure::read('App.systemAdminEmail');
    $Email->bcc = array($data['Message']['recipient_text']);
    $Email->attachments = $data['Message']['attachments'];
    $Email->subject = $data['Message']['subject'];
    $content = $data['Message']['message'];
    $replyToAddress = isset($data['Message']['reply_to_address']) ? 
        (bool)$data['Message']['reply_to_address'] : false;
    if (!$replyToAddress) {
        $content .= "\n\n".__("Please do not reply to this email", true);
    } elseif (!empty($data['Message']['reply_to'])) {
        $Email->replyTo = $data['Message']['reply_to'];
    }
    if (Configure::read('App.systemAdminEmail')) {
        $Email->additionalParams = '-f'.Configure::read('App.systemAdminEmail');
    }

    $Email->send($content);
    return true;
} 
```

我在 $data['Message']['attachments'] 上有我的附件，但我仍然无法在电子邮件中看到附件

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:27:36.290

`$Email->attachments`期望包含要附加的文件的路径的数组。让你拥有`$data['Message']['attachments']`一系列路径，而不仅仅是文件名......

# jquery - 将代码添加到 jsfiddle

> ID：12831756
> 
> 赞同：1
> 
> 时间：2012-10-11T03:30:21.390
> 
> 标签：jquery, jsfiddle

我想向 jsfiddle 添加一些非常简单的代码，但是当我这样做时，它会破坏其他所有内容。这是我要添加的代码：

```
$("#launcher").click(function(){
  $("#profile_850_HEADER").animate({
    margin-top: "10px"
}, 1500 );
}); 
```

这是 jsfiddle [http://jsfiddle.net/loriensleafs/F3wjg/3/](http://jsfiddle.net/loriensleafs/F3wjg/3/)，我确信这非常简单，但我无法弄清楚，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:31:44.357

`margin-top: "10px"`应该：

```
 marginTop: "10px" 
```

或者

```
 'margin-top': "10px" 
```

或者简单地说（我的首选）：

```
 marginTop: 10 
```

`-`属性名称中不允许使用未加引号的（减号/连字符），这会导致语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:34:36.920

Wat is tis

```
margin - top: "10px" 
```

应该是

```
marginTop : '10px' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:33:24.497

使用 `marginTop: "10px"`而不是`margin-top: "10px"`

# java - 我无法得到两个数组列表的联合

> ID：12831759
> 
> 赞同：0
> 
> 时间：2012-10-11T03:30:53.777
> 
> 标签：java

```
public static <E> ArrayList<E> union
        (ArrayList<E>array1, ArrayList<E>array2)
{
  //arrayUnion will be the arrayList that will be returned
  ArrayList <E> arrayUnion  = new ArrayList <E>(array1);   
  arrayUnion.addAll(array2);
  E current;

  for(int i = 0; i < arrayUnion.size(); i++)
  {
      for(int j = 0; j < arrayUnion.size(); j++)
      {
          current = arrayUnion.get(i);
          if(current.equals(arrayUnion.get(j)))
          {
              arrayUnion.remove(j);
          }
      }
  }

      return arrayUnion;
} 
```

对于我对这种方法的测试，这是输出：

> 第一个列表是 [ww, ee, rr, t, yy]
> 
> 第二个列表是 [ww, ss, ee, dd]
> 
> 两个 ArrayList 的并集是：[ee, t, ww, dd]

什么地方出了错..？我已经被困在这个问题上太久了，我再也不想听到联盟这个词了。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T03:39:12.317

您可以使用 a`Set`来获得联合，它可以更好地处理它。您应该注意到的唯一想法是它可能会改变元素的顺序。

这是一个例子：

```
 List<String> setA = new ArrayList<String>();
    List<String> setB = new ArrayList<String>();

    setA.add("aa");
    setA.add("bb");
    setA.add("cc");

    setB.add("dd");
    setB.add("ee");
    setB.add("ff");

    Set<String> union = new HashSet<String>();
    union.addAll(setA);
    union.addAll(setB);

    System.out.println(setA);
    System.out.println(setB);
    System.out.println(union); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:36:49.240

您立即删除第一个元素（或 i=j 的任何元素），因为它等于自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:43:04.977

您可以更改执行此操作的方式。将 的所有元素添加`array1`到`arrayUnion`. 然后迭代它并为每个项目检查它是否在`array2`（使用`array2.contains(<E>))`。如果它不存在删除它，你最终会得到联合:-)

```
public static <E> ArrayList<E> union(ArrayList<E> array1,
        ArrayList<E> array2) {
    // arrayUnion will be the arrayList that will be returned
    ArrayList<E> arrayUnion = new ArrayList<E>(array1);
    // arrayUnion.addAll(array2);
    E current;

    for (int i = 0; i < arrayUnion.size(); i++) {       
            current = arrayUnion.get(i);
            if(!array2.contains(current)){
                arrayUnion.remove(current);
            }
    }

    return arrayUnion;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T04:04:52.800

您的代码必须检查当前项目是否已自行检查。如果不是，您必须删除该项目并减少`j`一个，因为您必须再次检查在 处替换的项目`j`。我已修改您的代码以适用于您的情况。只需查看要删除的项目的条件检查。

```
public static <E> ArrayList< E > union( ArrayList< E > array1, ArrayList< E > array2 ) {
    // arrayUnion will be the arrayList that will be returned
    ArrayList< E > arrayUnion = new ArrayList< E >( array1 );
    arrayUnion.addAll( array2 );
    E current;

    for ( int i = 0; i < arrayUnion.size( ); i++ ) {

        for ( int j = 0; j < arrayUnion.size( ); j++ ) {
            current = arrayUnion.get( i );

            if ( i != j && current.equals( arrayUnion.get( j ) ) ) {
                arrayUnion.remove( j );
                --j;// This is set to check the item which replace the removed item at previous statement
            }
        }
    }

    return arrayUnion;
} 
```

# java - eclipse 工作区元数据日志崩溃错误

> ID：12831760
> 
> 赞同：1
> 
> 时间：2012-10-11T03:31:02.490
> 
> 标签：java, eclipse, crash-reports, eclipse-juno

我知道这里和其他地方发布了许多类似的错误，但每个错误似乎在日志中都有足够的变化，它们可能需要不同的解决方案。

通过 Marketplace 插件安装 Subversion Export By Revision 0.1.3 后，系统提示我重新启动 Eclipse。然后我得到了这个错误，从那以后 Eclipse 拒绝启动。

发生了错误。查看日志文件 \workspace.metadata.log

值得注意的是，在我重新启动之前，RAP 演示项目仍然处于打开状态。

我已尝试按照其他帖子中的建议重命名 .plugins 文件夹中的一些子文件夹，但仍然出现相同的错误。

```
!SESSION 2012-10-10 17:21:13.312 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_01
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.debug.ui 4 0 2012-10-10 17:21:14.847
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:357)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:569)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 12 more
Root exception:
java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:357)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:569)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

!ENTRY org.eclipse.osgi 4 0 2012-10-10 17:21:15.587
!MESSAGE Application error
!STACK 1
org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Display.error(Display.java:1258)
    at org.eclipse.swt.widgets.Display.checkDevice(Display.java:764)
    at org.eclipse.swt.widgets.Display.addListener(Display.java:626)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.<init>(IDEWorkbenchAdvisor.java:176)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.<init>(IDEWorkbenchAdvisor.java:184)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
!SESSION 2012-10-10 19:45:50.182 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_01
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.debug.ui 4 0 2012-10-10 19:45:51.866
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:357)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:569)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 12 more
Root exception:
java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:357)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:569)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1176)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

!ENTRY org.eclipse.osgi 4 0 2012-10-10 19:45:52.776
!MESSAGE Application error
!STACK 1
org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Display.error(Display.java:1258)
    at org.eclipse.swt.widgets.Display.checkDevice(Display.java:764)
    at org.eclipse.swt.widgets.Display.addListener(Display.java:626)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.<init>(IDEWorkbenchAdvisor.java:176)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor.<init>(IDEWorkbenchAdvisor.java:184)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:26:08.633

我认为您应该尝试将错误填充到主[eclipse bugzilla](https://bugs.eclipse.org/bugs/)中。

# ffmpeg - 如何使用 ffmpeg 的 sws_scale() 调整图片大小？

> ID：12831761
> 
> 赞同：20
> 
> 时间：2012-10-11T03:31:09.940
> 
> 标签：ffmpeg

我想通过使用 ffmpeg 的 func--->sws_scale() 来调整图片的大小。

有没有人知道怎么做？

你有这个函数的源代码吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-11T07:50:29.817

首先你需要创建一个`SwsContext`（你只需要这样做一次）：

```
struct SwsContext *resize;
resize = sws_getContext(width1, height1, AV_PIX_FMT_YUV420P, width2, height2, PIX_FMT_RGB24, SWS_BICUBIC, NULL, NULL, NULL); 
```

您需要两帧进行转换， frame1 是原始帧，您需要显式分配 frame2 ：

```
AVFrame* frame1 = avcodec_alloc_frame(); // this is your original frame

AVFrame* frame2 = avcodec_alloc_frame();
int num_bytes = avpicture_get_size(AV_PIX_FMT_RGB24, width2, height2);
uint8_t* frame2_buffer = (uint8_t *)av_malloc(num_bytes*sizeof(uint8_t));
avpicture_fill((AVPicture*)frame2, frame2_buffer, AV_PIX_FMT_RGB24, width2, height2); 
```

如果您需要调整收到的每一帧的大小，您可以在循环中使用此部分：

```
// frame1 should be filled by now (eg using avcodec_decode_video)
sws_scale(resize, frame1->data, frame1->linesize, 0, height1, frame2->data, frame2->linesize); 
```

请注意，我还更改了像素格式，但您可以对两个帧使用相同的像素格式

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-07T21:45:21.133

**FFmpeg 2.8 中的可运行示例**

基本上使用[arash 的方法](https://stackoverflow.com/a/12834696/895245)，但是可以运行，所以你可以尝试一下。

程序生成一个短视频，然后将其转换为 3 种不同的大小。

`ffmpeg_encoder_init_frame`并且`ffmpeg_encoder_scale`是关键方法。

![](../Images/8bc5b95841f85efb91bf02154340588a.png)

![](../Images/8bc5b95841f85efb91bf02154340588a.png)

![](../Images/8bc5b95841f85efb91bf02154340588a.png)

资源：

```
#include <libavcodec/avcodec.h>
#include <libavutil/imgutils.h>
#include <libavutil/opt.h>
#include <libswscale/swscale.h>

static AVCodecContext *c = NULL;
static AVFrame *frame;
static AVFrame *frame2;
static AVPacket pkt;
static FILE *file;
static struct SwsContext *sws_context = NULL;

static void ffmpeg_encoder_init_frame(AVFrame **framep, int width, int height) {
    int ret;
    AVFrame *frame;
    frame = av_frame_alloc();
    if (!frame) {
        fprintf(stderr, "Could not allocate video frame\n");
        exit(1);
    }
    frame->format = c->pix_fmt;
    frame->width  = width;
    frame->height = height;
    ret = av_image_alloc(frame->data, frame->linesize, frame->width, frame->height, frame->format, 32);
    if (ret < 0) {
        fprintf(stderr, "Could not allocate raw picture buffer\n");
        exit(1);
    }
    *framep = frame;
}

static void ffmpeg_encoder_scale(uint8_t *rgb) {
    sws_context = sws_getCachedContext(sws_context,
            frame->width, frame->height, AV_PIX_FMT_YUV420P,
            frame2->width, frame2->height, AV_PIX_FMT_YUV420P,
            SWS_BICUBIC, NULL, NULL, NULL);
    sws_scale(sws_context, (const uint8_t * const *)frame->data, frame->linesize, 0,
            frame->height, frame2->data, frame2->linesize);
}

static void ffmpeg_encoder_set_frame_yuv_from_rgb(uint8_t *rgb) {
    const int in_linesize[1] = { 3 * frame->width };
    sws_context = sws_getCachedContext(sws_context,
            frame->width, frame->height, AV_PIX_FMT_RGB24,
            frame->width, frame->height, AV_PIX_FMT_YUV420P,
            0, NULL, NULL, NULL);
    sws_scale(sws_context, (const uint8_t * const *)&rgb, in_linesize, 0,
            frame->height, frame->data, frame->linesize);
}

void generate_rgb(int width, int height, int pts, uint8_t **rgbp) {
    int x, y, cur;
    uint8_t *rgb = *rgbp;
    rgb = realloc(rgb, 3 * sizeof(uint8_t) * height * width);
    for (y = 0; y < height; y++) {
        for (x = 0; x < width; x++) {
            cur = 3 * (y * width + x);
            rgb[cur + 0] = 0;
            rgb[cur + 1] = 0;
            rgb[cur + 2] = 0;
            if ((frame->pts / 25) % 2 == 0) {
                if (y < height / 2) {
                    if (x < width / 2) {
                        /* Black. */
                    } else {
                        rgb[cur + 0] = 255;
                    }
                } else {
                    if (x < width / 2) {
                        rgb[cur + 1] = 255;
                    } else {
                        rgb[cur + 2] = 255;
                    }
                }
            } else {
                if (y < height / 2) {
                    rgb[cur + 0] = 255;
                    if (x < width / 2) {
                        rgb[cur + 1] = 255;
                    } else {
                        rgb[cur + 2] = 255;
                    }
                } else {
                    if (x < width / 2) {
                        rgb[cur + 1] = 255;
                        rgb[cur + 2] = 255;
                    } else {
                        rgb[cur + 0] = 255;
                        rgb[cur + 1] = 255;
                        rgb[cur + 2] = 255;
                    }
                }
            }
        }
    }
    *rgbp = rgb;
}

void ffmpeg_encoder_start(const char *filename, int codec_id, int fps, int width, int height, float factor) {
    AVCodec *codec;
    int ret;
    int width2 = width * factor;
    int height2 = height * factor;
    avcodec_register_all();
    codec = avcodec_find_encoder(codec_id);
    if (!codec) {
        fprintf(stderr, "Codec not found\n");
        exit(1);
    }
    c = avcodec_alloc_context3(codec);
    if (!c) {
        fprintf(stderr, "Could not allocate video codec context\n");
        exit(1);
    }
    c->bit_rate = 400000;
    c->width = width2;
    c->height = height2;
    c->time_base.num = 1;
    c->time_base.den = fps;
    c->gop_size = 10;
    c->max_b_frames = 1;
    c->pix_fmt = AV_PIX_FMT_YUV420P;
    if (codec_id == AV_CODEC_ID_H264)
        av_opt_set(c->priv_data, "preset", "slow", 0);
    if (avcodec_open2(c, codec, NULL) < 0) {
        fprintf(stderr, "Could not open codec\n");
        exit(1);
    }
    file = fopen(filename, "wb");
    if (!file) {
        fprintf(stderr, "Could not open %s\n", filename);
        exit(1);
    }
    ffmpeg_encoder_init_frame(&frame, width, height);
    ffmpeg_encoder_init_frame(&frame2, width2, height2);
}

void ffmpeg_encoder_finish(void) {
    uint8_t endcode[] = { 0, 0, 1, 0xb7 };
    int got_output, ret;
    do {
        fflush(stdout);
        ret = avcodec_encode_video2(c, &pkt, NULL, &got_output);
        if (ret < 0) {
            fprintf(stderr, "Error encoding frame\n");
            exit(1);
        }
        if (got_output) {
            fwrite(pkt.data, 1, pkt.size, file);
            av_packet_unref(&pkt);
        }
    } while (got_output);
    fwrite(endcode, 1, sizeof(endcode), file);
    fclose(file);
    avcodec_close(c);
    av_free(c);
    av_freep(&frame->data[0]);
    av_frame_free(&frame);
    av_freep(&frame2->data[0]);
    av_frame_free(&frame2);
}

void ffmpeg_encoder_encode_frame(uint8_t *rgb) {
    int ret, got_output;
    ffmpeg_encoder_set_frame_yuv_from_rgb(rgb);
    ffmpeg_encoder_scale(rgb);
    frame2->pts = frame->pts;
    av_init_packet(&pkt);
    pkt.data = NULL;
    pkt.size = 0;
    ret = avcodec_encode_video2(c, &pkt, frame2, &got_output);
    if (ret < 0) {
        fprintf(stderr, "Error encoding frame\n");
        exit(1);
    }
    if (got_output) {
        fwrite(pkt.data, 1, pkt.size, file);
        av_packet_unref(&pkt);
    }
}

static void encode_example(float factor) {
    char filename[255];
    int pts;
    int width = 320;
    int height = 240;
    uint8_t *rgb = NULL;
    snprintf(filename, 255, "tmp." __FILE__ ".%.2f.h264", factor);
    ffmpeg_encoder_start(filename, AV_CODEC_ID_H264, 25, width, height, factor);
    for (pts = 0; pts < 100; pts++) {
        frame->pts = pts;
        generate_rgb(width, height, pts, &rgb);
        ffmpeg_encoder_encode_frame(rgb);
    }
    ffmpeg_encoder_finish();
    free(rgb);
}

int main(void) {
    encode_example(0.5);
    encode_example(1.0);
    encode_example(2.0);
    return EXIT_SUCCESS;
} 
```

运行：

```
gcc main.c -lavformat -lavcodec -lswresample -lswscale -lavutil -lx264
./a.out
ffplay tmp.main.c.0.50.h264
ffplay tmp.main.c.1.00.h264
ffplay tmp.main.c.2.00.h264 
```

在 Ubuntu 16.04 上测试。[来源在 GitHub 上](https://github.com/cirosantilli/cpp-cheat/blob/d74d415ddaca6ffde410098ab7ef8622ae15b814/ffmpeg/resize.c)。

# svn - 使用maven发布插件的错误

> ID：12831762
> 
> 赞同：1
> 
> 时间：2012-10-11T03:31:13.067
> 
> 标签：svn, tags, maven-release-plugin

我的项目架构是这样的：

```
--Parent
  --Submodule1
  --Submodule2
--pom.xml(main) 
```

Parent 是包含所有 maven 插件配置、librairies 版本等的项目。它是所有项目的父级，也是所有子模块的父级。我在 pom.xml(main) 中配置插件，如下所示：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.3.2</version>
  <configuration>
    <tagBase>svn://192.168.5.213/hxbos/hxecp-src/tags/hxbos</tagBase>
    <branchBase>svn://192.168.5.213/hxbos/hxecp-src/branches/hxbos</branchBase>
    <remotetagging>true</remotetagging>
    <checkModificationExcludes>
      <checkModificationExclude>**/*.log</checkModificationExclude>
      <checkModificationExclude>**/*.jar</checkModificationExclude>
      <checkModificationExclude>**/system*</checkModificationExclude>
    </checkModificationExcludes>
  </configuration>
</plugin> 
```

这是我的单片机信息：

```
<scm>
  <connection>scm:svn:svn://192.168.5.213/hxbos/hxecp-src/trunk/hxbos</connection>
  <developerConnection>scm:svn:svn://192.168.5.213/hxbos/hxecp-src/trunk/hxbos</developerConnection>
  <url>scm:svn:svn://192.168.5.213/hxbos/hxecp-src/trunk/hxbos</url>
</scm> 
```

但是当我使用：mvn release:prepare 时，会发生错误：

```
 The svn tag command failed.
 Command output:
 svn: “svn://192.168.5.213/hxbos/hxecp-src/trunk/hxbos” does not exist in 
 revision 0. 
```

为什么是修订版 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:25:11.477

这里有几件事要检查：

*   我的 SCM URL 如下所示：

    scm:svn:https://subversion.company.com/svn/maven/trunk/corporate-parent

注意`https`部分；你显示`scm:svn:svn`，不知道它是如何工作的。

*   有一个地方让我感到困惑：我使用 https 协议检查了一个现有项目，但 POM 在其 SCM 连接块中有“http”。不匹配导致发布时出现问题。因此，使您用于结帐的协议与 POM 中的 SCM 连接相匹配。如果你做了

    `svn checkout http://192.168.5.213/hxbos/hxecp-src/trunk/hxbos`

那么您的 SCM 块应如下所示：

```
<scm>
    <connection>scm:svn:http://192.168.5.213/hxbos/hxecp-src/trunk/hxbos</connection>
</scm> 
```

*   如果您正在进行多模块构建，请在所有 POM 中定义 SCM 块，不要让它们从父 POM 继承。

*   最后但同样重要的是，确保您使用的是最新版本的发布插件。

* * *

编辑：在 tagBase 和 branchBase URL 中也使用 http: 或 https: （无论您用来执行原始结帐）。我注意到您在这些 URL 中有“svn:”前缀。[文档](http://maven.apache.org/plugins/maven-release-plugin/prepare-mojo.html#tagBase)`tagBase`说“例如，. URL`http://svn.apache.org/repos/asf/maven/plugins/tags`是 SVN URL，不包括 SCM 提供程序和协议。”

# azure - Azure 诊断正在寻找 StorageClient 1.7.0.0，但我使用的是 StorageClient 1.7.1.0

> ID：12831763
> 
> 赞同：0
> 
> 时间：2012-10-11T03:31:30.687
> 
> 标签：azure, storage, diagnostics

我正在使用 Microsoft.WindowsAzure.StorageClient 版本 1.7.1.0，网址为：[https](https://github.com/WindowsAzure/azure-sdk-for-net/tree/sdk_1.7.1) ://github.com/WindowsAzure/azure-sdk-for-net/tree/sdk_1.7.1 。我的项目编译得很好，但是当我运行它时，我收到以下错误：

```
Could not create Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35. 
```

内部例外：

```
Could not load file or assembly 'Microsoft.WindowsAzure.StorageClient, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)":"Microsoft.WindowsAzure.StorageClient, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 
```

我看起来 Microsoft.WindowsAzure.Diagnostics 中的 Microsoft.WindowsAzure.StorageClient 版本 1.7.0.0 存在依赖关系。但是我使用的是 1.7.1.0 版本，据我所知，我不能在同一个项目中同时拥有 1.7.0 和 1.7.1。如果这确实是问题，任何想法如何使 Microsoft.WindowsAzure.Diagnostics 依赖于 1.7.1？

谢谢，库尔特

* * *

更新

* * *

根据下面的建议，我添加了启动任务以使用 gacutil 加载 1.7.0 版本（这很有用[http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/](http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/)）。我有 2 个 WorkerRoles 和 2 个 WebRoles。我现在遇到的问题是，当我编译和运行时，VS2012 将 1.7.0 复制到 WebRoles 各自的 ...\csx\Debug\roles[WebRoleName]\approot 文件夹中，尽管没有直接引用 1.7 版。项目中为 0。以下编译输出显示了当 Azure 尝试加载版本 1.7.1（现在找不到）时引入的错误：

```
System.TypeLoadException: Unable to load the role entry point due to the following exceptions:
-- System.IO.FileLoadException: Could not load file or assembly 'Microsoft.WindowsAzure.StorageClient, Version=1.7.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Microsoft.WindowsAzure.StorageClient, Version=1.7.1.0, Culture=neutral, PublicKeyToken=null'

=== Pre-bind state information ===
LOG: User = BERTIES_MAIN\kurt_000
LOG: DisplayName = Microsoft.WindowsAzure.StorageClient, Version=1.7.1.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///H:/Everything/Current_Work/Web_Apps/Azure/InSysCloud/InSysCloud/InSysCloud/csx/Debug/roles/InSysWatcher/approot
LOG: Initial PrivatePath = H:\Everything\Current_Work\Web_Apps\Azure\InSysCloud\InSysCloud\InSysCloud\csx\Debug\roles\InSysWatcher\approot
Calling assembly : InSysWatcher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: H:\Everything\Current_Work\Web_Apps\Azure\InSysCloud\InSysCloud\InSysCloud\csx\Debug\roles\InSysWatcher\approot\InSysWatcher.dll.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///H:/Everything/Current_Work/Web_Apps/Azure/InSysCloud/InSysCloud/InSysCloud/csx/Debug/roles/InSysWatcher/approot/Microsoft.WindowsAzure.StorageClient.DLL.
WRN: Comparing the assembly name resulted in the mismatch: PUBLIC KEY TOKEN
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

为什么 VS2012 会为 1.7.0 版本添加 DLL，而 1.7.1 在项目本身中被引用，而 1.7.0 版本仅作为内容包含，并在应用启动时加载到 GAC 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:59:33.623

那么，在这种情况下，您将在 web.config/app.config 中使用绑定重定向。但问题是PublicKeyToken。“官方”程序集 1.7.0.0 具有以下 PublicKeyToken：**31bf3856ad364e35**。

现在，由于您自己构建 1.7.1.0 版本，您最终会得到不同的 PublicKeyToken，在这种情况下绑定重定向不起作用。

但是 GAC 就是为此而构建的，以支持程序集的多个版本。我建议如下：

1.  在您的包中包含 1.7.0.0 程序集，但将其添加为内容（而不是作为参考）。
2.  创建一个将程序集部署到 GAC 的启动任务（使用 gacutil），因为该任务[将在开始](https://msdn.microsoft.com/en-us/library/azure/hh180152.aspx)您的角色之前运行。
3.  继续使用 1.7.1.0 和正常的程序集参考。
4.  您的应用程序应为您的代码使用 1.7.1.0，并且诊断程序集应该能够使用 GAC 的 1.7.0.0 版本

我还没有机会对此进行测试，所以我正在寻找您的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T13:18:32.793

看来我可以在我的 web.config 中添加以下参考来解决这个问题：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient"
                          publicKeyToken="31bf3856ad364e35"
                          culture="neutral" />
        <bindingRedirect oldVersion="1.1.0.0"
                         newVersion="1.7.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient"
                          publicKeyToken="31bf3856ad364e35"
                          culture="neutral" />
        <publisherPolicy apply="no" />
      </dependentAssembly>

    </assemblyBinding>
  </runtime> 
```

这实质上允许对 dll 的 v1.1 的引用重新映射到 1.7。

# objective-c - IOS：来自 Json 的 LazyLoad 图像

> ID：12831770
> 
> 赞同：2
> 
> 时间：2012-10-11T03:32:05.563
> 
> 标签：objective-c, ios, json, lazy-loading, nsjsonserialization

我是这种编程语言的新手...我尝试从一些服务器使用 json，成功后使用所有信息，现在我有问题将“lazyload”图像显示到 tableviewcell

我使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)来实现它，这里是我的代码

```
-(UITableViewCell *)tableView :(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NetraCell *cell =(NetraCell *)[tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (cell==nil){
        cell=[[NetraCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"];

        //common settings
        cell.imageView.contentMode = UIViewContentModeScaleAspectFill;
        cell.imageView.frame = CGRectMake(0.0f, 0.0f, 44.0f, 44.0f);
        cell.imageView.clipsToBounds = YES;

        ///get url image from url
        //NSString *path=[[[Deals_array objectAtIndex:indexPath.row] objectForKey:@"image"]objectForKey:@"thumbnail"];

        ////convert image into NSDATA
    //  NSData* imageData = [NSData dataWithContentsOfURL: [NSURL URLWithString: path]];
        ////read NSData Image
    //  UIImage* image = [UIImage imageWithData: imageData];
        //////set rounded imager with NetraImage

    //  image=[ImageManipulator makeRoundCornerImage:image : 30 : 30];

        ////show image into UItableviewCell
    //  cell.imageView.image=image;

    }
    else{
        //cancel loading previous image for cell
        [[AsyncImageLoader sharedLoader] cancelLoadingImagesForTarget:cell.imageView];
    }
    cell.imageView.image = [UIImage imageNamed:@"Placeholder.png"];
    cell.imageView.imageURL = [[[imageURLs objectAtIndex:indexPath.row]objectForKey:@"image"]objectForKey:@"thumbnail"];

    NSString *price=[[[somearray objectAtIndex:indexPath.row] objectForKey:@"price"]objectForKey:@"formatted"];
    ///call image from JSOn

    ///draw to tableviewcell
    if(price!=NULL){
        cell.detailTextLabel.text= [[[Deals_array objectAtIndex:indexPath.row] objectForKey:@"price"]objectForKey:@"formatted"]; //1 draw the price
        //[cell release]
    }
    else{
    cell.detailTextLabel.text= @"Call";

    }
    //draw headline
    cell.textLabel.text=[[Deals_array objectAtIndex:indexPath.row] objectForKey:@"headline"];
    ///draw image

         [UIApplication sharedApplication].networkActivityIndicatorVisible=NO;
    return  cell;
} 
```

这条线是我的形象之路

```
//NSString *path=[[[Deals_array objectAtIndex:indexPath.row] objectForKey:@"image"]objectForKey:@"thumbnail"]; 
```

这是将 pic 分配到 uitableviewcell 的默认方法

```
cell.imageView.imageURL = [imageURLs objectAtIndex:indexPath.row]; 
```

但是当我尝试这种方法时

```
cell.imageView.imageURL = [[[imageURLs objectAtIndex:indexPath.row]objectForKey:@"image"]objectForKey:@"thumbnail"]; 
```

它的错误，主要问题是

1.  为什么会出错？那是我的远程图像路径错误吗？或者我的方法不对

需要你的帮助：）非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:11:19.227

一旦检查您是否在代码中为单元格图像 url 分配了适当的 imageurl，[[[imageURLs objectAtIndex:indexPath.row]objectForKey:@"image"]objectForKey:@"thumbnail"]，然后通过它可以帮助您 [在 UITableView 单元格中延迟加载图像](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Listings/Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40009394-Classes_RootViewController_m-DontLinkElementID_12)

# hadoop - 映射器内组合以及映射器的清理例程何时执行？

> ID：12831772
> 
> 赞同：0
> 
> 时间：2012-10-11T03:32:16.827
> 
> 标签：hadoop, mapreduce, combiners

我正在尝试简单的双元（单词对）计数，我尝试使用简单的“对”方法，现在我只是修改为尝试“条纹”方法，但是在映射器的清理例程中，不知何故我的所有键都是相同的单词对（就像最后一个单词对！）和计数。

例如文本输入是：

> 我的名字是富。Foo 是 Hadoop 的新手。

在映射器中，我的哈希图看起来像：

```
((my, name), 1), ((name, is), 1), ((is, foo), 2), ((is, new), 1), ((new, to), 1), ((to, hadoop), 1) 
```

但是在清理例程中，我尝试打印相同的哈希图，它看起来像

```
((to, hadoop), 1), ((to, hadoop), 1), ((to, hadoop), 2), ((to, hadoop), 1), ((to, hadoop), 1), ((to, hadoop), 1) 
```

我的代码如下所示：

```
Map Class:
private HashMap<TextPair, Integer> h = new HashMap<TextPair, Integer>();;

void map(...) :
    ...
StringTokenizer itr = new StringTokenizer(value.toString());            
left = itr.nextToken();
while(itr.hasMoreTokens()) {
right = itr.nextToken();

if(left != null && right!= null) {
            **//I have to create new TextPair(key object) each time!** 
    key.set(new Text(left.toLowerCase()), new Text(right.toLowerCase()));
    //If key is there, just do count + 1 else add key with value 1
    if(h.containsKey(key)) {
            int total = h.get(key) + 1;         
        h.put(key, total);
    } else {
        System.out.println("key: "+ key.toString()+ " => 1");                       
        h.put(key, 1);
    }
            //context.write(key, one);
    }
    left = right;
}
    ....

void cleanup(...):
   Iterator<Entry<TextPair, Integer>> itr = h.entrySet().iterator();
   while(itr.hasNext()) {
    Entry<TextPair, Integer> entry = itr.next();
    TextPair key = entry.getKey();
    int total = entry.getValue().intValue();
    System.out.println("--- MAP CLEANUP ---: key: "+ key.toString() + " => Total: "+ total);

    context.write(key, new IntWritable(total));
}
... 
```

注意：TextPair 是我的自定义键类。有什么建议吗？

## 编辑1：

地图的清理例程，在所有地图任务完成后最后执行吗？哈希是一种“全局”，它或我的迭代器有问题吗？

## 编辑2：

在散列之前，我必须在 map() 中的每次迭代中创建新的 TextPair Key 对象，这就是问题所在......它已解决，但想知道为什么会这样？我在 Python 中使用了 hash 很多次，它很好，没有痛苦，为什么我每次都需要创建新对象，我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:20:37.660

似乎您不是每次都创建新密钥，而是重复使用该密钥。所以你在这两种情况下得到了相同的分布，并且第一组中的最后一个键在第二组中的任何地方都使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:52:35.210

我假设您正在使用“Hadoop：权威指南”中的 TextPair 类示例？

问题是使用可变对象作为 HashMap 的键值是不安全的。相反，您应该使用不可变键，例如原语。由于指南中的 TextPair 类示例是可变的，因此在通过键对象放置/获取/删除值时可能会出现问题。

解决此问题的一种方法是每次都创建一个新的 TextPair 对象，就像您已经做过的那样。另一种解决方法是使用 SimpleImmutableEntry 类。

我遇到了同样的问题，并通过使用 SimpleImmutableEntry 实现一个版本来解决它。

# command-line - Sass --watch 指定 unix_newlines

> ID：12831774
> 
> 赞同：2
> 
> 时间：2012-10-11T03:32:28.923
> 
> 标签：command-line, sass

我似乎无法让 Sass 使用 unix 换行符输出我的 css 文件，这会导致每次不同的开发人员从 .scss 文件编译并提交编译文件时发生冲突（我们的生产环境目前依赖于编译文件） .

我有 Windows 7、Ruby 1.93 和 sass 3.2.1。这里的[选项](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options)说你可以指定`unix_newlines => true`，但我不知道在我的 watch 命令行中需要去哪里？

这是我目前正在使用的命令：`sass --watch scss/main.scss:css/main.css scss/orange.scss:css/orange/orange.css --style nested`.

添加`--unix_newlines true`不起作用，它说`invalid option: --unix_newlines`

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:35:56.177

从命令行，您应该使用`--unix-newlines`. SASS 参考中指定的`unix_newlines`配置用于在 Ruby 配置文件中使用 - 当用作命令行标志时，下划线变为连字符。

# android - 知道下载我的应用程序的设备的 IP 地址并为设备创建唯一 ID

> ID：12831777
> 
> 赞同：2
> 
> 时间：2012-10-11T03:33:06.530
> 
> 标签：android, tracking

我有一个即将推出的应用程序。我还有一个数据库，我想在其中插入 IP 地址并为已下载或安装我的应用程序的每个设备创建一个唯一 ID。我只是想知道我是否应该为此创建一个单独的活动？成为我的启动器？..如果是，我该如何显示我的启动画面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:49:50.830

您需要做的就是与您的服务器建立一个简单的 HttpConnection，以便您的服务器可以捕获您的 ip 并将其保存在数据库中。创建一个扩展 asyncTask 的类并在`doInBackground()`函数中执行 HttpConnection thingy。
编辑：通过“捕获”，我的意思是您可以`getLocalHost`在您的设备上使用 ip 并将其发送到服务器上的 php 页面。如果该 IP“不存在”，则有一个页面可以简单地接收它并将其存储在数据库中。

# objective-c - viewController 未调用委托方法

> ID：12831778
> 
> 赞同：0
> 
> 时间：2012-10-11T03:33:13.317
> 
> 标签：objective-c, ios, xcode, delegates, protocols

所以这就是正在发生的事情（除了我是一个菜鸟）。

我有两个视图控制器，AddAPlaceViewController 和 showCategoriesViewController。

我在 AddAPlaceVC 中有一个表格单元格，您点击它并打开 showCategoriesVC（它是一个表格视图控制器）（模式）并为您提供十个选项的列表。您点击其中一个或点击取消按钮。

我花了几天时间来理解和弄清楚协议和代表。我想我已经正确设置了它们，但无法弄清楚为什么它们不工作或被呼叫。我已经尝试了各种改变，但到目前为止没有运气。

你们是我唯一的希望！:)

这是代码的重要部分：

添加APlaceViewController.h

```
AddAPlaceViewController.h

#import <UIKit/UIKit.h>
#import "showCategoriesViewController.h"

@interface AddAPlaceViewController : UIViewController <UITextViewDelegate, UITextFieldDelegate, UINavigationControllerDelegate, UIImagePickerControllerDelegate, UIActionSheetDelegate, UITableViewDataSource, UITableViewDelegate, ShowCategoriesViewControllerDelegate> 
```

添加APlaceViewController.m

```
AddAPlaceViewController.m

#import "AddAPlaceViewController.h"
#import "FSQVenue.h"
#import "Categories.h"
//#import "showCategoriesViewController.h"
#import <QuartzCore/QuartzCore.h>

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Un-highlight the selected cell

    [categoryTable deselectRowAtIndexPath:indexPath animated:YES];

    showCategoriesViewController *SCVC = [[showCategoriesViewController alloc] init];

    SCVC = [self.storyboard instantiateViewControllerWithIdentifier:@"showCategories"];

    SCVC.categoryDelegate = self;

    [self.navigationController presentModalViewController:SCVC animated:YES];

}

#pragma mark showCategoriesViewControllerDelegate

-(void)didSelectOptions:(NSInteger )selectedCategory
{
    NSInteger category = selectedCategory;

    NSLog(@"Add Places %d", category);

    [self dismissModalViewControllerAnimated:YES];
}

-(void)didCancelOptions
{
    NSLog(@"Add Places -- Dismiss Button Pressed");

    [self dismissModalViewControllerAnimated:YES];
} 
```

showCategoriesViewController.h

```
showCategoriesViewController.h

#import <UIKit/UIKit.h>

@protocol ShowCategoriesViewControllerDelegate;

@interface showCategoriesViewController : UITableViewController
{
     id<ShowCategoriesViewControllerDelegate>categoryDelegate;
}

@property (nonatomic, weak) id<ShowCategoriesViewControllerDelegate> categoryDelegate;

- (IBAction)cancelButton:(id)sender;

@end

@protocol ShowCategoriesViewControllerDelegate <NSObject>

- (void)didSelectOptions:(NSInteger )selectedCategory;
- (void)didCancelOptions;

@end 
```

showCategoriesViewController.m

```
showCategoriesViewController.m

#import "showCategoriesViewController.h"
#import "Categories.h"

@interface showCategoriesViewController ()

@property (strong, nonatomic) NSArray *categoryArray;

@end

@implementation showCategoriesViewController

@synthesize categoryDelegate = _categoryDelegate;

@synthesize categoryArray;

…

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    [_categoryDelegate didSelectOptions:indexPath.row];
    NSLog(@"Selected IndeXPath %@", cell);
    NSLog(@"Selected IndeXPath GOING TO DELEGATE %d", indexPath.row);

}

- (IBAction)cancelButton:(id)sender {

    [_categoryDelegate didCancelOptions];
    NSLog(@"Button Pressed");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:48:00.290

由于您有 presentModalViewController: 您的**SCVC**，因此您的**AddAPlaceViewController**处于非活动状态。如果您可以使用自定义委托方法将 showCategoriesViewController 创建为 UITableView 的子类，那就更好了。

参考[链接](http://ioscoderef.blogspot.com/2012/09/creating-delegate-for-custom-class.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:40:04.173

最有可能的猜测？在您发布的代码中，您的属性和您的 ivar 都被称为`categoryDelegate`，但您将您的属性视为引用了一个名为 的 ivar `_categoryDelegate`。可能这只是一个错字，但是因为 iOS 允许调用空对象上的方法（并且什么也不做），所以它会默默地失败。将 ivar 重命名为`_categoryDelegate`应该可以修复它。

# javascript - 从 jQuery Mobile GUI/表单元素（如滑块或翻转开关/切换）捕获数据，并存储在 var 中？

> ID：12831779
> 
> 赞同：1
> 
> 时间：2012-10-11T03:33:15.367
> 
> 标签：javascript, jquery, jquery-ui, user-interface, mobile

我有这段代码，它执行没有错误，每次滑块更改时，它都会在调试控制台中显示“**滑块更改**”。但我无法弄清楚如何捕获滑块的值，以便将其存储在 var 中。你能帮忙吗，我希望这是一件简单的事情。

```
$('#page4_Options').live('pageinit', function(event) {

    var slideTime = userOptions.getSlideTime() / 1000; // userOptions is my Object to get/set params from localStorage.

    $("input[id='slider']").val(slideTime).slider("refresh"); // set default slide time when page init's.

    console.log("userOptions.getSlideTime()", userOptions.getSlideTime()); 

    $("#slider").bind("slidestop", function(event, ui) { 
        console.log("** slider change **");
        // How do I capture the new slider value into a var?
     });
}); 
```

这是带有滑块的 HTML，它位于标签中：

```
<div data-role="fieldcontain">
    <label for="slider">Slide Duration (seconds):</label>
    <input type="range" name="slider" id="slider" value="2" min="0" max="60" />
</div> 
```

# php - 有条件的内联 div 样式（帮助！）

> ID：12831780
> 
> 赞同：0
> 
> 时间：2012-10-11T03:33:21.477
> 
> 标签：php, html, css, wordpress

我有 div 我需要出现在每个页面上，但长度取决于确切的页面。

到目前为止，我有这个：

`<div class="above <?php if (is_page(12)) echo 'short'; ?>"> //content </div><!-- end above -->`

我该如何添加一些有用的东西`<?php if (is_page(24, 26, 28)) echo 'med'; ?>` （在第 12 页我需要“短”长度，在第 24、26、28 页我需要 div 的“中”长度）

任何帮助表示赞赏。我刚刚深入研究 php，虽然我确实喜欢它提供的选项，但我还不确定如何将它们组合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:39:38.740

使用这样的东西然后让我知道-

```
if ( is_page(array(24, 26, 28) ) ) {
.....
.....
}

else {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:49:35.827

也许你可以试试这个：

```
<?php if (is_page(12)) { echo 'short';} elseif (is_page(array(24, 26, 28))){echo 'med';} ?> 
```

看看这对你有用吗？

# sql-server - VB.NET：SQLite 到 SQL Server

> ID：12831787
> 
> 赞同：4
> 
> 时间：2012-10-11T03:33:59.903
> 
> 标签：sql-server, vb.net, sqlite

我有一个使用 SQLite 数据库的 vb.net 项目。我通过使用数据集/表适配器来做到这一点。客户很高兴，一切都很好。但是我刚刚听说他们计划将此产品提供给希望使用其 SQL Server 数据库的另一位客户。所以我写这篇文章是为了在开始之前做好心理准备。我不是数据库专家，我真的很享受设置和管理 SQLite 数据库的简单性。

那么关于支持 SQL Server 的最简单方法有什么想法吗？我很高兴将它们并行运行。我可以只制作一个单独的服务/中间件，在计时器上将 SQLite 数据库同步到 SQL Server，而不关心主应用程序在做什么？

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:28:52.697

同步两个数据库是可能的，如果相当复杂的话。您需要一些机制来找出哪些记录已更改，如果两个数据库中都可能有新的更改，您还必须解决冲突。

基于计时器的方法听起来效率不高：在大多数情况下，计时器无事可做；并且在一些数据更改之后，有一段时间数据库不同步。

你不能用 MS SQL Server*替换SQLite 吗？*即，有一些配置设置可以确定您的程序的数据是在 SQLite 中还是在服务器上？

假设已经存在具有所需结构的 SQL Server 数据库，理论上，只需要更改连接字符串并提供一些用户名/密码（如果服务器未配置为自动使用 Windows 登录）。使用的 SQL 方言不应该有任何大的差异。当然，您必须测试所有查询。

# java - 在 swing 中添加带有默认组件的新 jpanel

> ID：12831789
> 
> 赞同：2
> 
> 时间：2012-10-11T03:34:15.397
> 
> 标签：java, swing, jpanel, jtabbedpane, copying

任何人都可以告诉我如何在我单击“添加”按钮时在 jtabbedPane 中添加面板。它就像 google chrome 新标签一样。但问题是，生成的面板必须包含一些默认组件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:42:01.660

请看下面的代码。它向您展示了如何做您需要的事情。

```
public class DemoApp {
    private JTabbedPane tabPane = new JTabbedPane();

    public DemoApp() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("Test");
        frame.setSize(500, 400);
        frame.setLocationRelativeTo(null);

        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());
        frame.getContentPane().add(panel);

        JButton btn = new JButton("Add panel");
        btn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                int index = tabPane.getTabCount() + 1;
                JPanel newPanel = new JPanel();
                newPanel.setLayout(new FlowLayout());
                newPanel.add(new JLabel("Panel " + index));
                tabPane.addTab("Tab " + index, newPanel);
            }
        });
        panel.add(tabPane, BorderLayout.CENTER);
        panel.add(btn, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new DemoApp();
    }
} 
```

# css - 编解码功能，如 cssdeck

> ID：12831790
> 
> 赞同：3
> 
> 时间：2012-10-11T03:34:22.147
> 
> 标签：css, dynamic, recording, code-editor

最近[codemirror](http://codemirror.net)项目引起了我的注意。Jsbin 在幕后使用 codemirror。

在那个网站上花了一些时间后，我找到[了 cssdeck](http://cssdeck.com)。在 cssdeck 内部，他们正在实现一个称为[codecasts](http://cssdeck.com/codecasts)的功能。

Codecasts 让我们记录我们的打字，然后我们可以回放记录的代码。最有趣的是，当我们播放录制的实现时，代码仍然是可编辑的。

看看[这个例子](http://cssdeck.com/labs/creating-tooltips-without-any-extra-markup)。

有谁知道如何创建这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:21:21.957

这不只是记录按键然后回放吗？

大概每个事件都是一个对象，它记录了它所在的窗口、时间（例如，自上一个事件以来经过的毫秒数）和按下的键（包括退格键）。

可能还需要特殊条目来处理鼠标点击改变光标位置。

因此，您可以简单地构建这些按键对象的数组，然后从头开始播放它们。

# sql - 时间戳操作的 SQL 函数是什么？

> ID：12831791
> 
> 赞同：1
> 
> 时间：2012-10-11T03:34:24.170
> 
> 标签：sql, sql-server

我是 SQL 新手，时间函数与 mySQL 不同，所以我很难用有用的时间戳查询找到一个好的站点参考。

我无法找到在 SQL 中执行此查询的正确方法：

```
Id          Timestamp
-----------------------------------
1145744 2012-10-10 18:15:11.500
1145743 2012-10-10 18:15:11.313
1145742 2012-10-10 18:15:11.313
1145741 2012-10-10 18:15:11.253
1145740 2012-10-10 18:15:11.190
1145739 2012-10-10 18:15:11.190
1145738 2012-10-10 18:15:11.127
1145737 2012-10-10 18:15:11.067
1145736 2012-10-10 18:15:11.063
1145735 2012-10-10 18:15:10.940
1145734 2012-10-10 18:15:10.817

SELECT * from table WHERE Timestamp ... RANGE 
```

我需要 2 个时间戳的范围，因此我可以通过以下参数选择行：

1.  第二范围
2.  分钟范围
3.  小时范围
4.  日范围
5.  周范围
6.  月份范围
7.  年份范围

是否有一个函数可以输入 2 个时间戳并获取范围？或者这是我需要的功能组合？

任何好的网站参考都将非常受欢迎。MSDN 网站并没有帮助我隔离正确的做法。我一直在寻找大约一个小时，试图从今天下午 1:30 到下午 1:30 得到最后一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:21:12.387

您可以使用 <code>DATEPART</code> 来获取：

`second, minute, hour, day, week, month, year`

[更多参考](http://msdn.microsoft.com/en-us/library/ms174420%28loband%29.aspx)。

使用`where`条件来获得所需的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:49:37.193

我很难弄清楚你真正想要什么。以下是基于您迄今为止的评论的一些示例：

**10-11 或 1-5**

```
SELECT * from table WHERE Timestamp >= '20121011 10:00'
                      and Timestamp <  '20121011 11:00'
SELECT * from table WHERE Timestamp >= '20121011 01:00'
                      and Timestamp <  '20121011 05:00' 
```

或者如果您需要“今天”自动更改，那么

```
SELECT * from table WHERE Timestamp >= DateAdd(Hour,10,CAST(GetDate() as Date))
                      and Timestamp <  DateAdd(Hour,11,CAST(GetDate() as Date)) 
```

**昨天下午 1:30 - 今天凌晨 3:00**

```
SELECT * from table WHERE Timestamp >= '20121010 13:30'
                      and Timestamp <  '20121011 03:00' 
```

**是的，一天一个小时**
现在，如果您要使用 DATEPART 来解决这个问题，假设 10-11

```
SELECT * from table WHERE DATEPART(hour,Timestamp) = 10 
```

这将持续数天并且不会是[SARGABLE](http://en.wikipedia.org/wiki/Sargable)，即无法在实际上不是您想要的索引上搜索它。

* * *

这些从哪里来？

*   第二范围
*   分钟范围
*   小时范围
*   日范围
*   周范围
*   月份范围
*   年份范围

# iphone - 如何判断 WiFi 是否已打开但未连接？

> ID：12831792
> 
> 赞同：2
> 
> 时间：2012-10-11T03:34:29.740
> 
> 标签：iphone, ios, wifi

我的应用程序是否可以判断用户是否打开了 WiFi 但未连接到 WiFi 网络？我找不到任何方法来确定 WiFi 的开机或关机状态。

（请注意，这个问题不是“我如何判断我是否有 WiFi 连接”。这很容易通过示例可达性代码处理）。

# android - ListFragment 中的 ListView setOnItemClickListener 不起作用

> ID：12831801
> 
> 赞同：0
> 
> 时间：2012-10-11T03:35:12.757
> 
> 标签：android, android-fragments, actionbarsherlock, android-listfragment

我正在开发一个应用程序，它使用 ActionBar 选项卡通过 ListFragment 显示选项列表。列表（和 ListFragment）显示没有问题，但 ListView 的 setOnItemClickListener 似乎不起作用，因为单击列表中的项目时没有任何反应。这是 ListFragment 类的代码：

```
package XXX.XXX;

public class AboutFrag extends SherlockListFragment
{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState)
    {
            View view = inflater.inflate(R.layout.aboutfrag, container, false);

            ListView lv = (ListView) view.findViewById(android.R.id.list);

            String[] items = new String[] {"About 1", "About 2", "About 3"};

            lv.setAdapter(new ArrayAdapter<String>(getActivity(), R.layout.list_item, items));

            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                    switch (position)
                    {
                        case 0:
                          Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://google.com"));
                          startActivityForResult(browserIntent, 0);
                          break;

                        case 1:
                          Intent browserIntent2 = new Intent(Intent.ACTION_VIEW, Uri.parse("http://wikipedia.org"));
                            startActivityForResult(browserIntent2, 0);
                            break;

                        case 2:
                          Intent browserIntent3 = new Intent(Intent.ACTION_VIEW, Uri.parse("http:/android.com");
                            startActivityForResult(browserIntent3, 0);
                            break;
                    }           
                }
              });

            return view;
    }      
} 
```

我假设它不起作用，因为该类返回视图对象，所以 FragmentActivity 无法运行侦听器代码，那么有谁知道如何使它工作？顺便说一句，我正在使用 ActionBarSherlock。提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T05:19:12.417

您还可以覆盖从 SherlockListFragment 继承的 onListItemClick 方法。

如下：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id)
{
      super.onListItemClick(l, v, position, id);

   switch (position)
                    {
                        case 0:
                          Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://google.com"));
                          startActivityForResult(browserIntent, 0);
                          break;

                        case 1:
                          Intent browserIntent2 = new Intent(Intent.ACTION_VIEW, Uri.parse("http://wikipedia.org"));
                            startActivityForResult(browserIntent2, 0);
                            break;

                        case 2:
                          Intent browserIntent3 = new Intent(Intent.ACTION_VIEW, Uri.parse("http:/android.com");
                            startActivityForResult(browserIntent3, 0);
                            break;
                    }

} 
```

# java - 形状不会缩放

> ID：12831804
> 
> 赞同：1
> 
> 时间：2012-10-11T03:35:47.610
> 
> 标签：java

每当我尝试缩放形状时，什么都没有发生，然后控制台停止响应输入。这是设置比例命令：

```
case 7: do
                         {
                            System.out.println("\nEnter scale factor");
                            scale=input.nextDouble();
                         }
                         while(scale<0);
                         Shape.setScaleFactor(scale);
                         break; 
```

这是比例形状命令

```
 case 4: for(i=0; i<s.length; i++)
                         {
                            if(s[i]!=null)
                            {
                              s[i].scaleShape();
                            }
                         }
                         break; 
```

这是主要的方法变量：

```
int i=0;
        int m=0;
        double scale;
        boolean exit=false;
        Shape[] s = new Shape[10]; 
```

以下是shape类中的所有相关方法；

```
private static double scaleFactor;
public static double getScaleFactor()
    {

        return scaleFactor;
    }
    //Set ScaleFactor
    public static void setScaleFactor(double x)
    {

        scaleFactor=x;
    } 
```

这是矩形子类中的 scaleshape 方法

```
private double base;
    private double height;   
@Override public void scaleShape()
    {
        base=base*getScaleFactor(); height=height*getScaleFactor();

    }

        public abstract void scaleShape(); 
```

这是 circle 类中的 set scale 方法：

```
private final double pi = Math.PI;
    private double radius;
 @Override public void scaleShape()
    {
         radius*=getScaleFactor();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:39:07.540

我的猜测是你的问题在这里：

```
do
{
    System.out.println("\nEnter scale factor");
    scale = input.nextDouble();
}
while(scale < 0); 
```

如果添加一些日志记录会发生什么？

```
do
{
    System.out.println("\nEnter scale factor");
    scale = input.nextDouble();
    System.out.println("Scale entered was: " + scale);
    System.out.println("Is scale < 0? " + (scale < 0));
}
while(scale < 0); 
```

如果你没有得到你所期望的，那么阅读 a 可能是值得的，`String`只是为了看看你实际得到了什么输入。你总是可以读取一个字符串，记录它，然后用[`Double.valueOf(String)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)它来转换它。

Another possibility is that it's working, but you never reset `scale` and this is in some sort of loop, so it just continues scaling the shape forever but never stops to ask for input again.

# jakarta-ee - 是否有 JavaMail 提供程序可以放入 JNDI 并直接发送邮件而不使用 MTA？

> ID：12831805
> 
> 赞同：0
> 
> 时间：2012-10-11T03:36:01.073
> 
> 标签：jakarta-ee, smtp, jakarta-mail, jndi, war

我有一个 web 应用程序（Java EE WAR），它有一些简单的职责，在提交表单时向网站所有者发送电子邮件。我正在考虑将它托管在 PaaS 平台上，但他们不提供 SMTP 服务器供我使用。

我想找到一个 JavaMail 提供程序，它允许我`javax.mail.Session`从 JNDI 获取一个，它只是查找收件人的 MX 记录并将邮件发送到那里，而不是简单地将它排队等待与本地 MTA 一起传递。

有谁知道这样做的一个小开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:49:22.757

嗯，我这么想是因为：

1.  我只想向特定域发送电子邮件；和
2.  我控制该域电子邮件的 MX 和 A 记录；和
3.  该 SMTP 服务器期望接收该域的邮件

然后我可以将标准 JavaMail SMTP 提供程序配置为“移交”到目标 MTA。

我会试试然后回来...

# linux - 如何在linux中创建一个进程

> ID：12831806
> 
> 赞同：0
> 
> 时间：2012-10-11T03:36:01.680
> 
> 标签：linux, createprocess

我正在尝试在 linux 中创建一个进程，但是我不断收到错误消息。在我的 c++ 代码中，我只想打开 firefox.exe。这是我的代码：

```
//header files
#include <sys/types.h> 
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <iostream>

using namespace std;

//main function used to run program
int main()
{
    //declaration of a process id variable
    pid_t pid;

    //fork a child process is assigned 
    //to the process id
    pid=fork();

    //code to show that the fork failed
    //if the process id is less than 0
    if(pid<0)
    {
        fprintf(stderr, "Fork Failed");// error occurred
        exit(-1); //exit
    }

    //code that runs if the process id equals 0
    //(a successful for was assigned
    else if(pid==0)
    {
        //this statement creates a specified child process
        execlp("usr/bin","firefox",NULL);//child process
    }

    //code that exits only once a child 
    //process has been completed
    else
    {
        wait(NULL);//parent will wait for the child process to complete
        cout << pid << endl;

        printf("Child Complete");
        exit(0);
    }
} 
```

wait() 函数存在错误。我把它排除在外并尝试了，但什么也没发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:47:09.933

你必须写：

```
execlp("/usr/bin/firefox","firefox",NULL); 
```

您还需要在 execlp 之后放置一个 _exit 以防它失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:50:03.910

我认为您没有`execlp`正确调用。

它不会附加`"firefox"`到`"usr/bin"`. 因为它会搜索`PATH`环境变量，你可以用`execlp("firefox","firefox",NULL)`.

* * *

*旁白：*是的，函数族允许您打破应该命名可执行文件`exec`的名义保证。`argv[0]`抱歉，事情就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T16:18:59.800

要创建一个进程，您可以使用系统调用、fork 调用、execl 调用。要了解如何使用这些调用在 linux 中创建进程，请点击以下链接。我认为它将通过示例帮助您更多地了解流程创建。 [http://www.firmcodes.com/process-in-linux/](http://www.firmcodes.com/process-in-linux/)

# java - Java 摆动线

> ID：12831807
> 
> 赞同：2
> 
> 时间：2012-10-11T03:36:15.703
> 
> 标签：java, android, android-canvas

我有一个不寻常的问题，希望有人可以帮助我。我想用 Canvas (android) 画一条摆动或挥动的线，但我不知道该怎么做。它将是蝌蚪的尾巴，所以理想情况下，我希望它更三角形，一端更大，但这不是必需的。我希望使用路径可以以某种方式实现，但我不确定如何。我用谷歌搜索但找不到解决方案，非常感谢您的建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:10:52.367

创建一个正弦波发生器，它将相位（角度）作为参数开始，并让它返回一个绘图点数组（[x][y]）。然后在画布上绘制这些点。您可以通过随时间将起始相位从 0 更改为 360 来制作线波。你变化的速度x决定了你的线波有多快。

尝试从这里开始使用正弦波发生器：

[http://www.drdobbs.com/jvm/music-components-in-java-creating-oscill/230500178](http://www.drdobbs.com/jvm/music-components-in-java-creating-oscill/230500178)

如果你需要很多蝌蚪，那么这可能是处理器密集型的，在这种情况下，你可以绘制一组正弦波，比如 30，起始角度为 12，然后按顺序将它们绘制到你的画布上。

# string - shell 字符串错误替换

> ID：12831808
> 
> 赞同：18
> 
> 时间：2012-10-11T03:36:24.030
> 
> 标签：string, shell, substitution

我是 shell 编程的新手。我打算在提取 zip 文件后获取目录名称。它的打印声明是

```
$test.sh helloworld.zip
helloworld 
```

我们来看看test.sh：

```
#! /bin/sh
length=echo `expr index "$1" .zip`
a=$1    
echo $(a:0:length} 
```

但是我从编译器得到了错误的替换错误。

当我提到“shell”时。我只是在谈论 shell，因为我不知道 bash 或其他人之间的区别。我只是使用 Ubuntu 10.04 并使用终端。（我正在使用 bash。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T03:50:13.690

如果您的 shell 是最新版本的`bash`，则该[参数扩展](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)表示法应该可以工作。

在许多其他 shell 中，它不起作用，并且`bad substitution`错误是 shell 说“您要求进行参数替换，但它对我没有意义”的方式。

* * *

另外，给定脚本：

```
#! /bin/sh
length=echo `expr index "$1" .zip`
a=$1    
echo $(a:0:length} 
```

第二行导出带有运行生成的命令的`length`值的变量。它不分配给。那应该只是：`echo``expr index "$1" .zip``length`

```
length=$(expr index "${1:?}" .zip) 
```

如果未设置，则`${1:?}`表示法会生成错误（如果在没有参数的情况下调用脚本）。`$1`

最后一行应该是：

```
echo ${a:0:$length} 
```

请注意，如果`$1`保持`filename.zip`，则 的输出`expr index $1 .zip`为 2，因为该字母`i`出现在 中的索引 2 处`filename.zip`。如果打算获取没有`.zip`扩展名的文件的基本名称，那么经典的方法是：

```
base=$(basename $1 .zip) 
```

更现代的方式是：

```
base=${1%.zip} 
```

它们是有区别的; 如果名字是`/path/to/filename.zip`，经典输出是`filename`，现代输出是`/path/to/filename`。您可以通过以下方式获得经典输出：

```
base=${1%.zip}
base=${base##*/} 
```

或者，在经典版本中，您可以通过以下方式获取路径：

```
base=$(dirname $1)/$(basename $1 .zip)`.) 
```

如果文件名可以包含空格，则需要考虑使用双引号，尤其是在调用`basename`and时`dirname`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-10-03T15:42:16.493

尝试使用 bash 运行它。

**bash test.sh helloworld.zip**

-同样地-

“尝试将第一行更改为**#!/bin/bash** ”作为评论回答 – @shellter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T03:53:09.663

试试看`bash`：

```
echo $1
len=$(wc -c <<< "$1")
a="${1}.zip"
echo ${a:0:$len} 
```

调整它以满足您的需求。

# php - 哪个mysql查询有效获取总记录数

> ID：12831810
> 
> 赞同：5
> 
> 时间：2012-10-11T03:36:31.360
> 
> 标签：php, mysql

要获取记录总数，我通常使用以下查询：

```
$total= mysql_num_rows(mysql_query("SELECT id FROM t_statistic WHERE pageid = $pid")); 
```

但我得到了另一个查询，如下所示：

```
$data = mysql_fetch_object(mysql_query("SELECT COUNT(id) AS num_rows FROM t_statistic WHERE pageid = $pid"));
$total = $data->num_rows; 
```

在上面的两个查询之间。哪个更快更有效（当记录总数以百万计时）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T03:38:17.277

我更喜欢第二个查询。它已经为您提供了记录计数，而第一个查询为您提供了 ID 列表（*而不是计数*），尽管它已被过滤，但在某些情况下 ID 在表中存在多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:52:07.933

第二个查询快速有效：

> SELECT COUNT(id) AS num_rows FROM t_statistic WHERE pageid = $pid

如果您了解查询优化。在计算答案时，查询只会在内存中保留计数。并直接给出行数。

作为第一个查询：

> 从 t_statistic WHERE pageid = $pid 中选择 id

将所有选定的行保存在内存中。然后在进一步的操作中计算行数。

所以`second` 查询是最好的两种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:02:06.040

```
1) SELECT COUNT(*) FROM t_statistic WHERE pageid = $pid" --> count(*) counts all rows

2)SELECT COUNT(id) FROM t_statistic WHERE pageid = $pid" --> COUNT(column) counts non-NULLs only

3) SELECT COUNT(1) FROM t_statistic WHERE pageid = $pid" -->COUNT(1) is the same as COUNT(*) because 1 is a non-null expressions

Your use of COUNT(*) or COUNT(column) should be based on the desired output only. 
```

所以。最后我们得到的结果是 count(column) 比 count(*) 更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:49:16.297

绝对是第二个。

一些引擎，比如 MySQL 可以只通过查看索引而不是表的数据来进行计数。

我在具有数百万条记录的数据库上使用了类似以下的内容。

```
SELECT count(*) as `number` FROM `table1`; 
```

比： mysql_num_rows($res); 快得多

顺便说一句：Count(*) 中的 * 基本上意味着它不会查看数据，它只会计算记录，而不是 Count(colname)。

# sql - SQLplus AND 运算符

> ID：12831813
> 
> 赞同：0
> 
> 时间：2012-10-11T03:37:02.363
> 
> 标签：sql, oracle, sqlplus

谁能告诉我下面这个查询有什么问题？从编程的角度来看，它非常有意义，但 sql 似乎并不喜欢它。

> 选择 SNAME，YEAR，GPA 从学生
> WHERE (YEAR >= 5 AND GPA <=3.0) AND (WHERE YEAR <=4 AND GPA <= 2.0)
> ORDER BYYEAR, GPA DESC ;

我收到此错误：

第 2 行出现错误 ORA-00936：缺少表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:39:02.983

问题是您的查询中有两个`WHERE`子句。

此外，您应该使用`OR`运算符而不是 a组合两个布尔表达式`AND`，以便在满足两者中的任何一个时完整的表达式为真：

```
SELECT SNAME, YEAR, GPA 
FROM STUDENT 
WHERE (YEAR >= 5 AND GPA <=3.0) OR (YEAR <=4 AND GPA <= 2.0) 
ORDER BY YEAR, GPA DESC ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:40:24.950

删除条件中的额外`WHERE`关键字。

```
SELECT SNAME, YEAR, GPA 
FROM STUDENT 
WHERE (YEAR >= 5 AND GPA <=3.0) Or (YEAR <=4 AND GPA <= 2.0)
ORDER BY YEAR, GPA DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:40:17.367

尝试将其更改为

```
SELECT  SNAME, 
        YEAR, 
        GPA 
FROM    STUDENT 
WHERE   (YEAR >= 5 AND GPA <=3.0) 
OR  (YEAR <=4 AND GPA <= 2.0) 
ORDER BY YEAR, GPA DESC ; 
```

您指定了`KEYWORD WHERE`两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:57:04.883

在 sql 中，仅在查询中使用条件的一次：

```
 SELECT SNAME, YEAR, GPA 
    FROM STUDENT 
    WHERE (YEAR >= 5 AND GPA <=3.0) OR (YEAR <=4 AND GPA <= 2.0) 
    ORDER BY YEAR, GPA DESC ; 
```

有关详细信息，请遵循语法：

```
 how the rows in the result set will be sorted. This clause is optional.

   Description

    You use the basic SELECT statement shown above to retrieve the
 columns specified in the SELECT clause from the base table specified
 in the FROM clause and store them in a result set.
    The WHERE clause is used to filter the rows in the base table so that
 only those rows that match the search condition are included in the
 result set. If you omit the WHERE clause, all of the rows in the base
 table are included.
    The search condition of a WHERE clause consists of one or more Boolean 
expressions, or predicates, that result in a value of True, False, or 
Unknown. If the combination of all the expressions is True, the row
 being tested is included in the result set. Otherwise, it's not.
    If you include the ORDER BY clause, the rows in the result set are
 sorted in the specified sequence. Otherwise, the sequence of the rows
 is not guaranteed by Oracle. Note
    The syntax shown above does not include all of the clauses 
of the SELECT statement. You'll learn about the other clauses later in this book. 
```

# jquery - 如何延迟 ajax 请求，以便我的 ajax 加载程序停留更长时间

> ID：12831814
> 
> 赞同：-1
> 
> 时间：2012-10-11T03:37:18.810
> 
> 标签：jquery, ajax

我有 ajaxloader 显示并像这样隐藏在我的 ajaxsetup 中

```
beforeSend:function(xhr, settings){
$('.loader').show(); 
```

* * *

```
 complete:function(){
         $('.loader').hide(); 
```

现在请求发生得非常快，我的动画只加载不到一秒钟。

有什么办法可以让我延迟一些动画，让动画在那里停留 3 秒，然后 div 得到更新。

所以基本上它延迟了ajax调用而不仅仅是延迟动画，因为我也不知道ajax请求完成并且动画仍然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:45:31.887

由于我一直不清楚您到底要做什么，所以这里有一个解决方案，它执行以下操作：

1.  您只能更改 jQuery ajax 基础结构 - 您无法更改所有 ajax 调用者，因此您希望在不更改调用代码的情况下从 ajax 函数中执行操作。
2.  当一个ajax调用开始时，立即提出进度，但是延迟发送ajax请求1.5秒。
3.  ajax 调用完成后，隐藏进度状态。

这是代码：

```
// save old function
$.ajaxOld = $.ajax;

// install our global status hide handler
$.ajaxSetup({
    complete: function() {
        $('.loader').hide();
    }
});

// replace ajax call with our own that adds the delay
$.ajax = function() {
    // save state from the original function call for use later
    var args = [].slice.call(arguments);
    var self = this;

    // show progress immediately
    $('.loader').show();

    // call the original ajax function in 1.5 seconds
    setTimeout(function() {
        $.ajaxOld.apply(self, args);
    }, 1500)
} 
```

警告 - 只要没有调用`$.ajax()`期望它返回 jqXHR 对象并且没有使用 ajax 延迟，这将起作用。如果使用了这些，则需要编写一个更复杂的解决方案来阻止成功处理程序和完成处理程序。

* * *

编辑：这些是了解问题所在的较早尝试：

要确保通知在屏幕上显示的时间最短，您可以这样做：

```
beforeSend:function(xhr, settings){
    xhr.startTime = new Date().getTime();
    $('.loader').show();

complete:function(xhr){
    var elapsed = new Date().getTime() - xhr.startTime;
    if (elapsed < 3000) {
        $('.loader').delay(3000 - elapsed).hide(1);
    } else {
        $('.loader').hide();
    } 
```

这将跟踪消息在屏幕上的显示时间，如果 ajax 调用很快，它将延迟隐藏消息直到 3 秒过去。如果 ajax 调用没有快速进行并且消息已经显示了足够长的时间，它会在 ajax 调用完成时将其隐藏。

* * *

如果您想做的是延迟内容的加载并且您正在处理程序中处理结果`complete`，那么您可以这样做：

```
function finishMyAjax(xhr) {
    // load your ajax content
    $('.loader').hide();
}

    beforeSend:function(xhr, settings){
        xhr.startTime = new Date().getTime();
        $('.loader').show();

    complete:function(xhr){
        var elapsed = new Date().getTime() - xhr.startTime;
        var self = this;
        var args = [].slice.call(arguments);
        if (elapsed < 3000) {
            setTimeout(function() {
                finishMyAjax.apply(self, args);
            }, 3000-elapsed);
        } else {
            finishMyAjax.apply(this, arguments);
        } 
```

如果您没有在完整的处理程序中处理所有 ajax 的结果，那么请包含处理结果的代码，以便我可以将其包含在这个想法中。这里的总体思路是记录 ajax 调用开始的时间。如果 ajax 响应到来时，还不到 3 秒，则您设置一个计时器来计算 3 秒内的剩余时间，并在计时器回调中完成响应。如果超过 3 秒，那么您只需继续正常处理结果即可。

这使您永远不会使用超出预期的时间，但总是至少 3 秒。您可以延迟启动 ajax 调用 3 秒，但是如果您的 ajax 调用需要 6 秒才能得到结果，那么整个过程将需要 9 秒，这不是您想要的。在我的方案中，如果 ajax 结果需要 1 秒，您将延迟处理到 3 秒。如果 ajax 结果需要 6 秒，结果将在它进来时被正确处理（没有额外的 3 秒延迟）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:41:15.703

您可以延迟在客户端中隐藏加载程序或使服务器休眠。

在 JavaScript 中：

```
setTimeout(function(){ $('.loader').hide() }, 3000) 
```

或者在回显结果之前在 PHP 中：

```
sleep(3) 
```

假设 PHP 但其他语言具有相同的功能可能会以不同的方式命名。请记住，除了响应时间之外，还有 3 秒的睡眠时间。

**编辑：**如果您想延迟整个请求，请尝试以下操作：

```
function request(delay) {
  // beforeSend logic here
  $('.loader').show();
  setTimeout(function(){
    $.ajax({
      ...
      complete: function() { $('.loader').hide(); }
      ...
    });
  }, delay);
} 
```

然后`request(delay)`只要你需要它就打电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T09:32:21.217

处理 ajax 请求时显示 ajax 加载器的最佳方式

```
 <!DOCTYPE html>
    <html>
    <head>
    <script>
    function loadXMLDoc() {
    document.getElementById("loader").style.display="inline";
    var xmlhttp;
    if (window.XMLHttpRequest) {
      xmlhttp=new XMLHttpRequest();
      }
    else{
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        document.getElementById("loader").style.display="none";
        }
      }
    xmlhttp.open("GET","yourRequestController",true);
    xmlhttp.send();
    }
    </script>
    </head>
    <body>
    <div  id="loader" style="display:none">
    you are seeing this MSG becoz our ajax loader is processing ,
    it will automatically hide when your ajax request is completed
 // place your ajax loader imagae rather than showing a msg
    </div>
    <div id="myDiv">Content Before</div>
    <button type="button" onclick="loadXMLDoc()">Change Content</button>

    </body>
    </html> 
```

它的 w3schools.com ajax 示例，我只是修改了代码以显示 ajax 加载器

# android - 如何在不知道资源名称的情况下遍历另一个 APK 资源的所有可绘制资源

> ID：12831815
> 
> 赞同：2
> 
> 时间：2012-10-11T03:37:23.450
> 
> 标签：android

我找不到如何在我的应用程序中列出另一个应用程序中的所有可绘制对象。

如果我知道名称，我设法获得了可绘制对象，但找不到从 1 到 N 的简单循环的方法。

你们中的任何人都可以提供一个代码模板来做到这一点吗？

以下代码已经有效：

```
mAndromedaAddonContext = createPackageContext( "com.demo.andromeda",
                Context.CONTEXT_IGNORE_SECURITY );
mPlanetsResID[0] = mAndromedaAddonResources.getIdentifier( "planet20111007081421628", "drawable", "com.demo.andromeda" ); 
```

但我想在不使用资源名称的情况下进行迭代。类似的东西： for(int i=0; i

我在清单文件中确实有相同的 sharedUserId 和进程，所以我有权从其他应用程序访问资源。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:10:31.983

首先用于`mAndromedaAddonResources.getAssets()`获取目标应用程序的 AssetManger 实例。

看这里： [https](https://developer.android.com/reference/android/content/res/Resources.html#getAssets) ://developer.android.com/reference/android/content/res/Resources.html#getAssets ()

然后你可以使用

`public final String[] list (String path)`

AssetManager 类中的方法来获取给定路径中所有资产的列表（在您的情况下，它将是您定位的应用程序的 res/drawable 文件夹的路径）。这将为您提供一个字符串列表，其中每个字符串都是一个资产名称。然后，您可以简单地使用您用来获取其标识符的相同代码。

有关 AssetManager 的更多信息： [https ://developer.android.com/reference/android/content/res/AssetManager.html](https://developer.android.com/reference/android/content/res/AssetManager.html)

# maps - 从数组中检索坐标

> ID：12831817
> 
> 赞同：1
> 
> 时间：2012-10-11T03:37:52.520
> 
> 标签：maps, coordinates

我想将我所有的坐标放入一个数组中，并循环显示每个坐标，但使用 Google 函数。

这是在谷歌地图上绘制点的代码：

```
var flightPlanCoordinates = [
    new google.maps.LatLng(37.772323, -122.214897),
    new google.maps.LatLng(21.291982, -157.821856),
    new google.maps.LatLng(-18.142599, 178.431),
    new google.maps.LatLng(-27.46758, 153.027892)
  ]; 
```

我希望能够做这样的事情：

```
var arrPos = new Array([37.772323, -122.214897], [21.291982, -157.821856], [-18.142599, 178.431], etc. );

var flightPlanCoordinates = [ + 
   for (i=0; i<arrPos.length; i++){
      new google.maps.LatLng(arrPos[0]) + ", "
   }
   + "];" 
```

我知道您可以在数组中放置一个循环，但是是否有另一种方法可以从数组中检索点？

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:14:08.300

像这样：

```
For(var i in arrPos){
  new google.maps.LatLng(arrPos[i][0],arrPos[i][1]);
} 
```

问候

托马斯·范拉图姆

# c# - 将图像控件的图像检索为使用generichandler（.ashx）设置的字节数组？

> ID：12831818
> 
> 赞同：0
> 
> 时间：2012-10-11T03:37:53.473
> 
> 标签：c#, asp.net, image, generic-handler

目前我`GenericHandler(.ashx)`用于在图像控件中显示图像。

见下面的代码：

```
[1] .ASPX
    <asp:Image ID="Image1" runat="server" Width="350px" Height="415px" />
[2] .cs(codebehind)
    Image1.ImageUrl = string.Format("GridviewImage.ashx?ItemID={0}", itemID); 
```

现在我需要得到`Image1`一个字节数组（`byte[]`）的图像。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:38:21.813

如果您有多个图像正在流式传输到页面，请将 IsReusable 设置为 true。使用 DataReader 将图像流回，而不是像其他链接那样使用 DataSet。

```
<img src='ImageHandler.ashx?ProductID=<%# Eval("ProductID")%>' alt="<%# Eval("ProductName") %>" 
    title="<%# Eval("ProductName") %>" />

    public class ImageHandler : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            if (context.Request.QueryString["productID"] != null)
            {
                try
                {
                    string ProductID = context.Request.QueryString["ProductID"];
                    if (Convert.ToInt32(ProductID) > 0)
                    {
#if DEBUG
      const string CONN = "Initial Catalog=db1;Data Source=server1;Integrated Security=SSPI;";
#else
      const string CONN = "server=server2;database=db2;uid=un2;pwd=pw2;";
#endif
                        string selectQuery = "SELECT Photo FROM dbo.Products WHERE dbo.Products.ProductID=" + ProductID.ToString();
                        SqlConnection conn = new SqlConnection(CONN);
                        SqlCommand cmd = new SqlCommand(selectQuery, conn);

                        conn.Open();
                        SqlDataReader dr = cmd.ExecuteReader();

                        dr.Read();
                        context.Response.BinaryWrite((Byte[])dr[0]);
                        dr.Close();
                        conn.Dispose();
                        // context.Response.End(); --> caused an "Abort thread" error - this is correct and is a special exception
                    }
                }
                catch (Exception ex)
                {
                    ErrorReporting.LogError(ex);   
                }
            }
            else
                throw new ArgumentException("No ProductID parameter specified");
        }

        public bool IsReusable
        {
            get
            {
                return true;
            }
        }
    } 
```

# vba - 使用 Visual Basic (MS Access 2000) 将原始数据发送到 ZPL 打印机

> ID：12831819
> 
> 赞同：0
> 
> 时间：2012-10-11T03:38:00.333
> 
> 标签：vba, ms-access, printing, zebra-printers, ms-access-2000

这就是我能找到的所有东西，它们都不起作用。

选项比较数据库选项显式

```
 Private Type DOCINFO
      pDocName As String
      pOutputFile As String
      pDatatype As String
  End Type

  Private Declare Function ClosePrinter Lib "winspool.drv" (ByVal _
     hPrinter As Long) As Long
  Private Declare Function EndDocPrinter Lib "winspool.drv" (ByVal _
     hPrinter As Long) As Long
  Private Declare Function EndPagePrinter Lib "winspool.drv" (ByVal _
     hPrinter As Long) As Long
  Private Declare Function OpenPrinter Lib "winspool.drv" Alias _
     "OpenPrinterA" (ByVal pPrinterName As String, phPrinter As Long, _
      ByVal pDefault As Long) As Long
  Private Declare Function StartDocPrinter Lib "winspool.drv" Alias _
     "StartDocPrinterA" (ByVal hPrinter As Long, ByVal Level As Long, _
     pDocInfo As DOCINFO) As Long
  Private Declare Function StartPagePrinter Lib "winspool.drv" (ByVal _
     hPrinter As Long) As Long
  Private Declare Function WritePrinter Lib "winspool.drv" (ByVal _
     hPrinter As Long, pBuf As Any, ByVal cdBuf As Long, _
     pcWritten As Long) As Long

  Private Sub TEST()
      Dim lhPrinter As Long
      Dim lReturn As Long
      Dim lpcWritten As Long
      Dim lDoc As Long
      Dim sWrittenData As String
      Dim MyDocInfo As DOCINFO
      lReturn = OpenPrinter("ZDesigner LP 2844", lhPrinter, 0)
      If lReturn = 0 Then
          MsgBox "The Printer Name you typed wasn't recognized."
          Exit Sub
      End If
      MyDocInfo.pDocName = "AAAAAA"
      MyDocInfo.pOutputFile = vbNullString
      MyDocInfo.pDatatype = vbNullString
      lDoc = StartDocPrinter(lhPrinter, 1, MyDocInfo)
      Call StartPagePrinter(lhPrinter)
       sWrittenData = "N" & vbFormFeed
      sWrittenData = sWrittenData & "q609" & vbFormFeed
      sWrittenData = sWrittenData & "Q203,26" & vbFormFeed
      sWrittenData = sWrittenData & "B26,26,0,UA0,2,2,152,B," & Chr(34) & "603679025109" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "A253,26,0,3,1,1,N," & Chr(34) & "SKU 6205518 MFG 6354" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "A253,56,0,3,1,1,N," & Chr(34) & "2XIST TROPICAL BEACH" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "A253,86,0,3,1,1,N," & Chr(34) & "STRIPE SQUARE CUT TRUNK" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "A253,116,0,3,1,1,N," & Chr(34) & "BRICK" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "A253,146,0,3,1,1,N," & Chr(34) & "X-LARGE" & Chr(34) & vbFormFeed
      sWrittenData = sWrittenData & "P1,1" & vbFormFeed
      lReturn = WritePrinter(lhPrinter, ByVal sWrittenData, _
         Len(sWrittenData), lpcWritten)
      lReturn = EndPagePrinter(lhPrinter)
      lReturn = EndDocPrinter(lhPrinter)
      lReturn = ClosePrinter(lhPrinter)
  End Sub 
```

方法二

```
Option Compare Database

Private Sub crtLabel()

Dim prtDevice As String
Dim strQuote As String

strQuote = Chr(34)
prtDevice = "ZDesigner LP 2844" ' whatever device Access currently has as the default. I have the user select a printer prior to printing, which sets the Access defaut printer

' open printer port
Open prtDevice For Output As #1
' initialize printer
Print #1, "OD" & vbCrLf
Print #1, "N" & vbCrLf
Print #1, "O" & vbCrLf
Print #1, "Q545,B12+23" & vbCrLf
Print #1, "q262" & vbCrLf
Print #1, "UN" & vbCrLf
Print #1, "rN" & vbCrLf
Print #1, "N" & vbCrLf
Print #1, "A4,94,3,3,1,1,N," & strQuote & "1803" & strQuote & vbCrLf
Print #1, "A36,74,3,3,1,1,N," & strQuote & "B" & strQuote & vbCrLf
Print #1, "A64,94,3,3,1,1,N," & strQuote & "079" & strQuote & vbCrLf
Print #1, "A112,8,0,2,1,1,N," & strQuote & strQuote & vbCrLf ' you can replace any string like "1803" with a string variable like SID or AID that gets passed to the sub
Print #1, "A112,32,0,3,1,1,N," & strQuote & strQuote & vbCrLf  ' same here
Print #1, "A112,64,0,1,1,1,N," & strQuote & "04/13/2009" & strQuote & vbCrLf
Print #1, "A130,100,0,1,1,1,N," & strQuote & "SWAB, NASO" & strQuote & vbCrLf
Print #1, "A4,100,0,1,1,1,N," & strQuote & "C146536" & strQuote & vbCrLf
Print #1, "B53,130,0,1,1,0,47,N," & strQuote & "2009-06868" & strQuote & vbCrLf
Print #1, "A112,188,0,1,1,1,N," & strQuote & "" & strQuote & vbCrLf
Print #1, "P1,1" & vbCrLf
Print #1, "O" & vbCrLf
' close printer port
Close #1

End Sub 
```

运行函数后没有任何反应。就像代码根本没有触及打印机一样。

**更新** 方法 1 是最接近打印文件的方法。执行命令后，状态栏有一个打印机图标，显示打印机已被调用并从我的代码接收数据，但仍然没有打印。帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:45:41.980

如果它映射到并行或 COM 端口，您可以直接打开它：

```
open "LPT1:" For Output as #1
' or open "COM1:"
print #1, "SomeData"
Close #1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:04:51.887

我喜欢做的事情类似于您的方法 2，但将其保存到文件（原始打印机数据），然后将文件复制到 UNC 路径。

文件副本“C:\label.txt”\computername\sharename

这对我行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:16:39.873

好的，这就是我设法完成这项工作的方法。不是我想要的最佳选择，但......它有效。

1）我使用相同的功能，但用 C++ 编写，取自这里[http://support.microsoft.com/kb/138594/EN-US](http://support.microsoft.com/kb/138594/EN-US)

```
// RawDataToPrinter - sends binary data directly to a printer
   // 
   // Params:
   //   szPrinterName - NULL terminated string specifying printer name
   //   lpData        - Pointer to raw data bytes
   //   dwCount       - Length of lpData in bytes
   // 
   // Returns: TRUE for success, FALSE for failure.
   // 
   BOOL RawDataToPrinter(LPSTR szPrinterName, LPBYTE lpData, DWORD dwCount)
   {
     HANDLE     hPrinter;
     DOC_INFO_1 DocInfo;
     DWORD      dwJob;
     DWORD      dwBytesWritten;

     // Need a handle to the printer.
     if( ! OpenPrinter( szPrinterName, &hPrinter, NULL ) )
       return FALSE;

     // Fill in the structure with info about this "document."
     DocInfo.pDocName = "My Document";
     DocInfo.pOutputFile = NULL;
     DocInfo.pDatatype = "RAW";
     // Inform the spooler the document is beginning.
     if( (dwJob = StartDocPrinter( hPrinter, 1, (LPSTR)&DocInfo )) == 0 )
     {
       ClosePrinter( hPrinter );
       return FALSE;
     }
     // Start a page.
     if( ! StartPagePrinter( hPrinter ) )
     {
       EndDocPrinter( hPrinter );
       ClosePrinter( hPrinter );
       return FALSE;
     }
     // Send the data to the printer.
     if( ! WritePrinter( hPrinter, lpData, dwCount, &dwBytesWritten ) )
     {
       EndPagePrinter( hPrinter );
       EndDocPrinter( hPrinter );
       ClosePrinter( hPrinter );
       return FALSE;
     }
     // End the page.
     if( ! EndPagePrinter( hPrinter ) )
     {
       EndDocPrinter( hPrinter );
       ClosePrinter( hPrinter );
       return FALSE;
     }
     // Inform the spooler that the document is ending.
     if( ! EndDocPrinter( hPrinter ) )
     {
       ClosePrinter( hPrinter );
       return FALSE;
     }
     // Tidy up the printer handle.
     ClosePrinter( hPrinter );
     // Check to see if correct number of bytes were written.
     if( dwBytesWritten != dwCount )
       return FALSE;
     return TRUE;
   } 
```

我从那里得到了文件 RAWPRN.EXE，把我的 EPL 代码放在一个 txt 文件中。最后使用Shell执行

```
Dim RetVal
RetVal = Shell("cmd .exe /c C:\rawprint\RawPrint.exe ""ZDesigner LP 2844"" ""C:\eplcode.txt""", 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T06:53:48.327

我的斑马解决方案

1.  在 Windows 中创建通用/文本打印机，然后将原始文件发送到此打印机
2.  在 Zebra 打印机高级设置 --> 其他中，有一个直通字符。您可以将原始文本发送到此打印机。

# ios - 工具栏上一个和下一个按钮逻辑

> ID：12831820
> 
> 赞同：1
> 
> 时间：2012-10-11T03:38:04.767
> 
> 标签：ios, xcode, cocoa-touch

我正在使用以下代码使用 UITextField 委托移动到下一个字段，并且我正在向键盘添加一个带有上一个、下一个和确定按钮的工具栏。代码工作正常。

就像您看到的键盘返回按钮逻辑非常通用，使用 UITextField 标记，这很好，因为我将使用这段代码。现在我需要编写上一个和下一个按钮逻辑，我迷路了。有任何想法吗？

**更新**（完整的代码，经过一些修改，感谢@8vius 在聊天中花了一些时间与我一起使它工作）：

```
//
// SigninViewController.m
//

#import "SigninViewController.h"

@implementation SigninViewController

@synthesize firstResponder = _firstResponder;
@synthesize toolbar;
@synthesize email;
@synthesize password;

- (void)move:(UIBarButtonItem*)sender {

    NSInteger tag = self.firstResponder.tag;

    if ([sender.title isEqualToString:@"Anterior"]) {
        tag -= 1;
    } else if ([sender.title isEqualToString:@"Próximo"]) {
        tag += 1;
    }

    UITextField *nextTextField = (UITextField*)[self.view viewWithTag:tag];

    if (nextTextField && tag > 0) {
        [nextTextField becomeFirstResponder];
    } else {
        [self.firstResponder resignFirstResponder];
        self.firstResponder = nil;
    }

}

- (void)ok:(id)sender {
    [self.view endEditing:YES];
    self.firstResponder = nil;
}

- (void)textFieldDidBeginEditing:(UITextField*)textField {
    self.firstResponder = textField;
}

- (BOOL)textFieldShouldReturn:(UITextField*)textField {

    NSInteger tag = textField.tag + 1;

    UITextField *nextTextField = (UITextField*)[self.view viewWithTag:tag];

    if (nextTextField) {
        [nextTextField becomeFirstResponder];
    } else {
        [textField resignFirstResponder];
        self.firstResponder = nil;
    }

    return NO;

}

- (void)viewDidLoad {

    [super viewDidLoad];

    self.email.delegate = self;
    self.password.delegate = self;

    if (self.toolbar == nil)
    {
        self.toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 44)];

        UIBarButtonItem* previous = [[UIBarButtonItem alloc] initWithTitle:@"Anterior" style:UIBarButtonItemStyleBordered target:self action:@selector(move:)];
        UIBarButtonItem* next = [[UIBarButtonItem alloc] initWithTitle:@"Próximo" style:UIBarButtonItemStyleBordered target:self action:@selector(move:)];
        UIBarButtonItem* space = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:(UIBarButtonSystemItemFlexibleSpace) target:nil action:nil];
        UIBarButtonItem* ok = [[UIBarButtonItem alloc] initWithTitle:@"Ok" style:UIBarButtonItemStyleBordered target:self action:@selector(ok:)];

        [self.toolbar setItems:[[NSArray alloc] initWithObjects:previous, next, space, ok, nil]];

        [self.toolbar setTranslucent:YES];
        [self.toolbar setTintColor:[UIColor blackColor]];
    }

    for (UIView* view in self.view.subviews) {
        if ([view isKindOfClass:[UITextField class]]) {
            [(UITextField*)view setInputAccessoryView:toolbar];
        }
    }

}

- (void)viewDidUnload {
    self.email = nil;
    self.password = nil;
    [super viewDidUnload];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:45:38.313

这很简单，当您加载视图时，`tag`根据您希望它们的顺序在文本字段上设置属性，然后您只需遍历字段上的标记元素：

```
- (void)toggleTextfield:(UIBarButtonItem *)sender {
  NSInteger nextTag = self.firstResponder.tag;
  if ([sender.title isEqualToString:@"Previous"] && nextTag > 1) {
    nextTag -= 1
  } else if ([sender.title isEqualToString:@"Next"]) {
    nextTag += 1;
  }

  UITextField *nextTextField = (UITextField *)[self.view viewWithTag:nextTag];
  if (nextTextField) {
    [nextTextField becomeFirstResponder];
  }
} 
```

并跟踪谁是第一响应者：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField {
  self.firstResponder = textField;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
  [textField resignFirstResponder];
  self.firstResponder = nil;
  return YES;
} 
```

当您加载视图时，将按钮绑定到切换操作：

```
 UIBarButtonItem *previousButton = [[UIBarButtonItem alloc] initWithTitle:@"Previous" 
                                                                     style:UIBarButtonItemStyleBordered 
                                                                    target:self
                                                                    action:@selector(toggleTextfield:)];
  UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithTitle:@"Next" 
                                                                     style:UIBarButtonItemStyleBordered 
                                                                    target:self
                                                                    action:@selector(toggleTextfield:)]; 
```

例如，在我的例子中，我在表格视图中设置了我的文本字段，所以在我的`cellForRowAtIndexPath`方法中我将`tag`属性设置`row`为`indexPath`.

**编辑：**您必须设置`firstResponder`属性才能使其工作。

在您的 .h 文件中：

```
@property UIView *firstResponder 
```

在您的 .m 文件中：

```
@synthesize firstResponder = _firstResponder; 
```

# objective-c - 将音频文件转换为 PCM 阵列的最简单方法

> ID：12831823
> 
> 赞同：1
> 
> 时间：2012-10-11T03:38:17.867
> 
> 标签：objective-c, macos, core-audio

将任意格式的音频文件转换为 PCM 数据数组的最简单方法是什么？

我知道`AudioToolbox`框架中有两个选项：`AudioConverterFillComplexBuffer`和`AudioConverterConvertComplexBuffer`.

`Convert`显然“仅适用于没有采样率转换的 PCM 到 PCM 的转换”并且`Fill`泄漏且复杂。必须有一种更简单的方法来使用 CoreAudio API 从现有音频文件中获取 PCM 阵列，而无需重写轮子。任何人？

# android - Android Simple Timer/Timertask 问题

> ID：12831826
> 
> 赞同：4
> 
> 时间：2012-10-11T03:38:45.267
> 
> 标签：android, timer, timertask

我正在尝试让一个基本计时器在 Android 上工作，并且我在 onCreate() 方法中有以下代码：

```
 editText = (EditText) findViewById(R.id.edit_message);
    Timer time = new Timer();     

    time.schedule(new TimerTask() {
        public void run() {
            timesince++;
            editText.setText("Timeran:"+timesince);
            Log.d("TIMER", "TimerTask run");
        }}, 0, 1000); 
```

所以希望它会用一个增加的值（timesince）来更新文本框 - 这是在程序顶部声明的，以及editText ...

但是，（尽管我没有遇到编译问题）当我在模拟器上运行它时它根本不起作用。应用程序显示“blahblahblah 已停止工作......”

我做错了定时器吗？我错过了什么？

非常感谢。

（如果删除此代码，PS App 可以正常工作，所以我知道这部分存在问题。）

编辑：我相信这是我的 logcat 输出，对不起文字墙：

```
10-11 03:40:49.260: E/AndroidRuntime(561): FATAL EXCEPTION: Timer-0
10-11 03:40:49.260: E/AndroidRuntime(561): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:3939)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:714)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:763)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:4012)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.view.View.invalidate(View.java:8454)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView.invalidateCursor(TextView.java:4319)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView.spanChange(TextView.java:7670)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView$ChangeWatcher.onSpanAdded(TextView.java:8020)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.SpannableStringBuilder.sendSpanAdded(SpannableStringBuilder.java:898)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:614)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.SpannableStringBuilder.setSpan(SpannableStringBuilder.java:520)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.Selection.setSelection(Selection.java:76)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.Selection.setSelection(Selection.java:87)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.text.method.ArrowKeyMovementMethod.initialize(ArrowKeyMovementMethod.java:302)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView.setText(TextView.java:3244)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView.setText(TextView.java:3110)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.EditText.setText(EditText.java:78)
10-11 03:40:49.260: E/AndroidRuntime(561):  at android.widget.TextView.setText(TextView.java:3085)
10-11 03:40:49.260: E/AndroidRuntime(561):  at com.example.cultivation.MainActivity$1.run(MainActivity.java:54)
10-11 03:40:49.260: E/AndroidRuntime(561):  at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:44:06.873

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

这就是问题

您必须将更新 ui 的后台任务部分移动到主线程或在您的 UI 线程中创建 mHandler；

**更新：**

从计时器更新 UI：[http ://android-developers.blogspot.com/2007/11/stitch-in-time.html](http://android-developers.blogspot.com/2007/11/stitch-in-time.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:48:47.527

或使用处理程序运行更新文本视图：

```
 private final Runnable mRunnable1 = new Runnable() {

     public void run() {
        timesince++;
        editText.setText("Timeran:"+timesince);
        Log.d("TIMER", "TimerTask run");

 mHandler.postDelayed(mRunnable1, 1000);
 }

 }; 
```

并在`OnCreate()`方法 中调用这一行`mHandler.postDelayed(mRunnable1, 1000);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:46:05.797

尝试`TextView`从 UI 线程更新。尝试使用处理程序。在这里你可以找到一篇很好的文章。[在 Handler 的帮助下更新 textview](http://android-developers.blogspot.in/2007/11/stitch-in-time.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T03:46:27.230

请执行下列操作：

将 Timer 声明为全局变量，并在如下方法中调用 timer 函数：

```
 public void startThread(){
    time.schedule(new TimerTask() {
    public void run() {
        timesince++;
        editText.setText("Timeran:"+timesince);
        Log.d("TIMER", "TimerTask run");
    }}, 0, 1000);
    } 
```

并调用这个`startThread()`函数`onCreate()`

# java - 元建模 Neo4J 数据库

> ID：12831831
> 
> 赞同：0
> 
> 时间：2012-10-11T03:39:00.330
> 
> 标签：java, neo4j, metamodel

对我的 Neo4j 节点和关系进行元建模的最佳方法是什么。我需要这个，因为我只会知道在运行时将创建什么对象/节点。以下是我正在尝试做的一些解释：尝试将有关节点的信息存储在另一个（可能是关系数据库）数据库中 - 它的名称（类型）、isIndexed 以及带有标签名称和类型的属性列表。同样的事情适用于关系加上开始和结束节点。然后当数据到来时，节点和关系将动态构建。

这种类型的建模有什么缺点吗？可能已经有一些项目可以帮助我做到这一点。我已经为 Neo4J 尝试过 Spring Data，但这只是让我创建一个在编译之前应该知道的对象/节点/关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:13:46.717

是的，将对象的类型作为节点属性放在对象模型中是常见的做法，这就是 Spring Data Neo4j [http://www.springsource.org/spring-data/neo4j](http://www.springsource.org/spring-data/neo4j)和 Neo4j Ruby 绑定的方式，[https：/ /github.com/andreasronge/neo4j](https://github.com/andreasronge/neo4j)正在这样做。

# ios - 记录所有带有时间戳的触摸，将触摸数据导出到文件

> ID：12831834
> 
> 赞同：1
> 
> 时间：2012-10-11T03:39:04.717
> 
> 标签：ios, objective-c, timestamp, export, touches

我正在从事一个涉及用户与 iPod 交互的研究项目。应用程序运行大约 10 个小时，我需要记录以下信息：

1) 屏幕被触摸了多少次？

2) 对于每次触摸，它是在哪里触摸的？（按钮内部与外部）

3) 它是什么时候触动的？这最好是一天中的时间，但如果这是不可能的，我可以做回算。

这些信息需要保存，并导出到可以在 Matlab、Igor、Excel 等中操作的文件中。

应用程序本身非常简单。播放声音时，屏幕中间的按钮会闪烁。当按钮内部发生触摸事件时，闪烁和声音停止 30 秒。

我的问题与 2010 [How to record all the user's touches in iPhone app 中的](https://stackoverflow.com/questions/3924945/how-to-record-all-of-the-users-touches-in-iphone-app)问题类似。然而，提问者并没有提供他是如何做到这一点的细节，恐怕我需要比给出的更多的指导。

我会很感激一些建议，或者如果你能指出适当的资源。如果您还可以让我知道代码应该去的一般区域，我将特别感激。我仍然掌握objective-C的窍门。

# javascript - 具有动态内容和弹出窗口的自定义 Twitter 按钮

> ID：12831842
> 
> 赞同：0
> 
> 时间：2012-10-11T03:40:22.403
> 
> 标签：javascript, dynamic, twitter, xhtml, popup

我正在使用以下代码，它完成了我想要它做的 3 件事中的 2 件事，与自定义 Twitter 按钮共享动态内容：

```
<script type="text/javascript">
            // <![CDATA[
            var twtTitle = document.title;
            var twtUrl = location.href;
            var maxLength = 140 - (twtUrl.length + 1);
            if (twtTitle.length > maxLength) {
                twtTitle = twtTitle.substr(0, (maxLength - 3)) + '...';
            }
            var twtLink = 'http://twitter.com/home?status=' + encodeURIComponent(twtTitle + ' ' + twtUrl);
            document.write('<a href="' + twtLink + '" target="_blank"' + '><img src="images/twitter.png"  border="0" alt="Tweet This!" /' + '><' + '/a>');
            // ]]>

        </script> 
```

我希望它做的也是在窗口中弹出而不是全页视图。我对脚本的了解有限，所以我不知道在哪里插入适当的弹出代码。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:45:52.623

而不是 document.write 你需要 window.open。确保事件在单击操作中完成，否则弹出窗口阻止程序会停止您的脚本

```
<script type="text/javascript">
function fbs_click() {
    var twtTitle = document.title;
    var twtUrl = location.href;
    var maxLength = 140 - (twtUrl.length + 1);
    if (twtTitle.length > maxLength) {
        twtTitle = twtTitle.substr(0, (maxLength - 3)) + '...';
    }
    var twtLink = 'http://twitter.com/home?status=' + encodeURIComponent(twtTitle + ' ' + twtUrl);
    window.open(twtLink);
}
</script> 
```

在您的 HTML 中添加您的图像标签，如下所示：

```
<a href="#" onclick="fbs_click();" ><img src="images/twitter.png"  border="0" alt="Tweet This!"></a> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T13:35:56.037

您可以在锚点上放置一个 ID="twitPop" 并使用它。

```
$('#twitPop').click(function(event) {
    var width  = 575,
    height = 400,
    left   = ($(window).width()  - width)  / 2,
    top    = ($(window).height() - height) / 2,
    url    = this.href,
    opts   = 'status=1' +
             ',width='  + width  +
             ',height=' + height +
             ',top='    + top    +
             ',left='   + left;
    window.open(url, 'twitter', opts);
    return false;
}); 
```

# java - 如何在 AppEngine Java 上使用 UserService 登录用户

> ID：12831847
> 
> 赞同：1
> 
> 时间：2012-10-11T03:41:02.740
> 
> 标签：java, google-app-engine

我使用 UserService 来管理我的注册（联合和 OAuth - 混合）。我在应用程序内部的“各个”位置（非 servlet）使用 User.getCurrentUser 来确定当前用户是谁。

我正在分发我的 API 以允许用户调用一些使用 getCurrentUser 的方法。我可以添加一个过滤器并控制我的身份验证，但我不能强制 UserService 登录一个可以在应用程序的其余部分使用的用户 - User.getCurrentUser。

我很难过，现在不知道如何继续。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:51:19.930

If you redirect to the createLoginURL method, it will force the user to signin.

You have to wrap your `getCurrentUser()` API method to detect if it sees a null user and force a login in that case.

like:

```
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser();
if (user == null) {
  session.setAttribute("isLoggedIn", true);
  session.setAttribute("authenticatingSite", "google");
  try {
    response.sendRedirect(userService.createLoginURL(redirectURLAfterLogin); 
```

# ruby-on-rails - 表格仍然没有运气

> ID：12831848
> 
> 赞同：2
> 
> 时间：2012-10-11T03:41:10.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, pagination

我问了一个类似的问题，但我没有找到答案。我想我提供了太多信息，所以这次会简短而甜蜜。

### 描述

我有一个想要在分页项目中呈现的回复表单。因此，当我在该部分中编写代码时，分页项被定义为`@share_item`，它们将如下所示：

```
<% if registered_member?(share_item.user) %> 
```

### 问题

当我想部分呈现表单时会出现问题。省略了一些代码，它看起来有点像

```
<%= form_for(@blob) do |f| %>
<%= f.text_area :content, rows: "2", placeholder: "Reply to @#{share_item.user.name}" %> 
```

`@blob`是定义所有内容的主模型控制器，其中`@share_item`是 的分页项`@blob`。我得到错误`share_item is an undefined model or method`。

### 什么有效

如果我直接在部分中添加表单的 html，我可以添加如下内容：

```
<textarea id="blob_content" name="blob[content]" placeholder="Reply to @<%= share_item.user.name %>">@<%= share_item.user.name %> </textarea> 
```

我不会收到任何错误。

### 我想要的是

我希望能够呈现表单，而不是直接在部分内部添加表单（这很烦人、不可思议且占用空间）。我还有其他类似的代码，我基本上只是在寻找一种解决方案，说明如何在这些情况下通过渲染表单获得与将 HTML 添加到部分中相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:35:08.363

尝试：

```
 <%= form_for(@blob) do |f| %>
 <%= f.text_area :content, rows: "2", placeholder: "Reply to @<%= @share_item.user.name%>" %> 
```

# windows-phone-7 - Windows 8 应用商店应用与 Windows Phone 应用

> ID：12831850
> 
> 赞同：0
> 
> 时间：2012-10-11T03:41:13.293
> 
> 标签：windows-phone-7, windows-8, microsoft-metro

我可以知道，可以

1.  一个 Windows 8 应用商店应用程序源项目 (Metro)，与最初为 Windows Phone 7 创建的二进制引用链接？
2.  一个 Windows 8 应用商店应用程序源项目 (Metro)，与最初为 Windows Phone 8 创建的二进制引用链接？
3.  在 Windows Phone 8 中运行的二进制 Windows 8 应用商店应用程序？

到目前为止，我已经通过使用[Microsoft Face SDK for WP7](http://research.microsoft.com/en-us/projects/facesdk/)编译 Windows 8 Store App 项目来测试 (1) 。我得到一个神秘的编译错误。

```
The "GenerateResource" task failed unexpectedly. System.InvalidOperationException: Item named 'resources/template/background/beard.01.jpg' of type 'System.IO.UnmanagedMemoryStream' cannot be added to the resource file because it is not serializable.

[... more goes here] 
```

那么，我可以知道 [2] 和 [3] 会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T07:34:53.383

据我所知，答案是 1\. 不，2\. 不和 3\. 不。

Windows Phone 7 和 WinRT 是完全不同的平台。
Windows 8 和 Windows Phone 8 共享部分 WinRT，但可用的 API 仍然存在差异。有部分 API 可用于 Windows 8 而不适用于 Windows Phone 8，同样适用于另一个方向。

您可以做的最好的事情是使用面向 WinRT 和 Windows Phone 8 的[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)- 这样您就可以使用两个平台上可用的 API，并且可以在 WP8 和 Windows 8 项目中引用创建的库。

# vhdl - VHDL 多源/悬空信号错误 xst:528

> ID：12831853
> 
> 赞同：0
> 
> 时间：2012-10-11T03:41:44.357
> 
> 标签：vhdl

嘿，伙计们，我正在尝试在 VHDL 中实现 32x6RAM，我发誓在浏览我的源代码后一切看起来都很好，但我似乎无法弄清楚为什么当我尝试创建 S= 时会出现悬空信号/多源错误>AD(0) 到 S=>AD(31)...谁能帮我指出我可能在我的代码中忘记了什么？

```
Code:
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

--Uncomment the following library declaration if instantiating
--any Xilinx primitives in this code.
--library UNISIM;
--use UNISIM.VComponents.all;

entity mm32by6RAM is
    Port ( OE   : in    STD_LOGIC;
           CS   : in    STD_LOGIC;
           RW   : in    STD_LOGIC;
           A    : in    STD_LOGIC_VECTOR (4 downto 0);
           D    : out   STD_LOGIC_VECTOR (5 downto 0));
end mm32by6RAM;

architecture Behavioral of mm32by6RAM is

COMPONENT mm5to32Decoder
    Port ( A    : in    STD_LOGIC_VECTOR (4 downto 0);
           OEB : in     STD_LOGIC;
           Z    : out   STD_LOGIC_VECTOR (31 downto 0));
end COMPONENT;

COMPONENT mm1by6RAM
    Port ( I : in   STD_LOGIC_VECTOR (5 downto 0);
           W : in   STD_LOGIC;
           R : in   STD_LOGIC;
           S : in   STD_LOGIC;
              D : out   STD_LOGIC_VECTOR (5 downto 0));
end COMPONENT;

COMPONENT mmOutputBuffer
    Port ( B    : in    STD_LOGIC_VECTOR(5 downto 0);
           OE   : in    STD_LOGIC;
           D    : out   STD_LOGIC_VECTOR (5 downto 0));
end COMPONENT;

COMPONENT mm3NOR 
    Port ( A : in   STD_LOGIC;
           B : in   STD_LOGIC;
           C : in   STD_LOGIC;
           Z : out      STD_LOGIC);
end COMPONENT;

COMPONENT mmINVERT
    Port ( a : in       STD_LOGIC;
           z : out      STD_LOGIC);
end COMPONENT;

SIGNAL RWnot        :   STD_LOGIC;
SIGNAL N                :   STD_LOGIC;
SIGNAL OB           :   STD_LOGIC_VECTOR (5 downto 0);
SIGNAL AD           :   STD_LOGIC_VECTOR (31 downto 0);
SIGNAL Ram          :   STD_LOGIC_VECTOR (5 downto 0);

begin

gate1       :   mmINVERT            PORT MAP    (a=>RW,     z=>RWnot);
gate2       :   mm3NOR          PORT MAP    (A=>OE,     B=>CS,      C=>RWnot,   Z=>N);
gate3       :   mmOutputBuffer  PORT MAP    (B=>Ram, OE=>N,         D=>OB);
gate4       :   mm5to32Decoder  PORT MAP    (A=>A,  OEB=>CS,        Z=>AD);

gate5       :   mm1by6RAM       PORT MAP    (I=>OB,     W=>RWnot,   R=>RW,  S=>AD(0),   D=>Ram);
gate6       :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(1),   D=>Ram);
--gate7     :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(2),   D=>Ram);
--gate8     :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(3),   D=>Ram);
--gate9     :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(4),   D=>Ram);
--gate10    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(5),   D=>Ram);
--gate11    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(6),   D=>Ram);
--gate12    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(7),   D=>Ram);
--gate13    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(8),   D=>Ram);
--gate14    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(9),   D=>Ram);
--gate15    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(10),  D=>Ram);
--gate16    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(11),  D=>Ram);
--gate17    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(12),  D=>Ram);
--gate18    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(13),  D=>Ram);
--gate19    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(14),  D=>Ram);
--gate20    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(15),  D=>Ram);
--gate21    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(16),  D=>Ram);
--gate22    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(17),  D=>Ram);
--gate23    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(18),  D=>Ram);
--gate24    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(19),  D=>Ram);
--gate25    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(20),  D=>Ram);
--gate26    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(21),  D=>Ram);
--gate27    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(22),  D=>Ram);
--gate28    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(23),  D=>Ram);
--gate29    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(24),  D=>Ram);
--gate30    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(25),  D=>Ram);
--gate31    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(26),  D=>Ram);
--gate32    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(27),  D=>Ram);
--gate33    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(28),  D=>Ram);
--gate34    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(29),  D=>Ram);
--gate35    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(30),  D=>Ram);
--gate36    :   mm1by6RAM       PORT MAP    (I=>OB, W=>RWnot,   R=>RW,  S=>AD(31),  D=>Ram);

end Behavioral; 
```

这是它应该遵守的设计示意图：

[http://www.cse.psu.edu/~kyusun/class/cmpen471/12f/hw/pj4/ram32x6.gif](http://www.cse.psu.edu/~kyusun/class/cmpen471/12f/hw/pj4/ram32x6.gif)

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:56:03.843

您的每个`mm1by6RAM`s 都需要输出一个独特的信号。然后使用 Select 信号`AD`，您可以选择其中哪一个是正确的。

该工具不知道为您执行此操作。

你需要类似的东西：

```
Ram <= Output_from_gate0 when AD(0) = '1' else
       Output_from_gate1 when AD(1) = '1' else
       Output_from_gate2 when AD(2) = '1' else
       ... 
```

# java - Java 基本 GUI 程序收到此错误 "AWT-EventQueue-0" java.lang.NullPointerException"

> ID：12831855
> 
> 赞同：0
> 
> 时间：2012-10-11T03:42:05.377
> 
> 标签：java, swing, nullpointerexception, awt, event-dispatch-thread

我正在尝试构建一个简单的 gui 程序。一切运行良好，因为我在添加一些 GUI 组件（例如 SWING 和 AWT）之前测试了这些类。但是，当我尝试一些输入并按下提交按钮时，它给了我这个错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at com.simpleAccountEntry.SimpleAccountListener.actionPerformed(SimpleAccountListener.java:15)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6389)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3268)
    at java.awt.Component.processEvent(Component.java:6154)
    at java.awt.Container.processEvent(Container.java:2045)
    at java.awt.Component.dispatchEventImpl(Component.java:4750)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4297)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
    at java.awt.Container.dispatchEventImpl(Container.java:2089)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

我从昨天开始尝试调试它，但我找不到出错的地方。我试图检查这个错误代码：

```
 com.simpleAccountEntry.SimpleAccountListener.actionPerformed(SimpleAccountListener.java:15) 
```

它指向这个类：

```
public class SimpleAccountListener implements ActionListener{

    private SimpleAccountActionsPanel listen;

    public SimpleAccountListener(SimpleAccountActionsPanel functionPanel){
        listen = functionPanel;
    }

    public void actionPerformed(ActionEvent e){
        listen.recordPatient(); //SimpleAccountListener.java: 15
    }
} 
```

可以在此类中找到 listen.recordPatient() 以及我编写的其他方法

## 编辑

```
 public class SimpleAccountActionsPanel extends JPanel{

        private SimpleAccountPanel account = new SimpleAccountPanel();
**//Initialize this line
        static private SimpleAccountActionsPanel perform = new SimpleAccountActionsPanel();**

        private DetailsEntry<Details> setPatient = new DetailsEntry<Details>();

        static private JButton submit;
        static private JButton delete;

        public SimpleAccountActionsPanel(){
            this.setLayout(new GridLayout(1,2));

            submit = new JButton("Submit Entries");
            delete = new JButton("Delete Entries");

            submit.setBackground(Color.DARK_GRAY);
            submit.setForeground(Color.ORANGE);

            delete.setBackground(Color.DARK_GRAY);
            delete.setForeground(Color.ORANGE);

            this.add(submit);
            this.add(delete);

            //SimpleAccountPanel varFields = new SimpleAccountPanel();
            SimpleAccountListener performFn = new SimpleAccountListener(perform);
            submit.addActionListener(performFn);
        }

        public void recordPatient(){
            String name = account.getEnterName().getText();
            String dob = account.getEnterDOB().getText();
            String doc = account.getEnterDr().getText();
            String allergy = account.getAllergies().getText();
            String room = account.getEnterRoomNo().getText();
            int convRoom = Integer.parseInt(room);

            setPatient.addEntry(new Details(name, dob, doc, allergy, convRoom));
        }
    } 
```

有人愿意帮助我吗？如果您需要更多我实施的课程，我可以发布它，让我知道提前谢谢。

# 编辑

感谢 Max 和 MadProgrammer，我按照建议的程序初始化了 perform，现在可以完美运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T03:48:50.257

您正在传递对未在 的构造函数中初始化`SimpleAccountListener`的变量的引用，因此是 NPE`perform``SimpleAccountActionsPanel`

```
SimpleAccountListener performFn = new SimpleAccountListener(perform); // <-- perform is not initialised... 
```

我想弄清楚你为什么没有通过`this`？

```
SimpleAccountListener performFn = new SimpleAccountListener(this); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T03:49:00.803

你有这个声明：

```
private SimpleAccountActionsPanel perform; 
```

但`perform`从未初始化，它为空，因此`NullPointerException`. 你将它传递给`SimpleAccountListener`.

# html - 为什么我的 CSS 菜单在下拉菜单中有重叠的文本

> ID：12831857
> 
> 赞同：0
> 
> 时间：2012-10-11T03:42:35.127
> 
> 标签：html, css, drop-down-menu, menu

我无法让我的下拉菜单（子菜单）停止重叠文本。下面是我的 HTML + CSS。

```
<ul class="top-menu">
    <li><a href="index.html" >Events </a></li>
    <li>
        <a href="index-1.html">Store</a>
        <ul>
            <li><a href="index-2.html" >Imagination CD</a></li>
            <li><a href="index-2.html" >Total Relax</a></li>
            <li><a href="index-2.html" >Super Study</a></li>
        </ul>    
    </li>   
    </li>
    <li><a href="index-2.html" class="active">About Us</a></li>
    <li><a href="index-3.html">Contact</a></li>
</ul> 
```

```
.top-menu {
    position: absolute;
    padding: 32px 00 0 10px;
    height: 85px;
}
.top-menu li{
    padding:0 24px 0 0;
}
.top-menu li, .top-menu li a{
    display:block;
    float:left;
}
.top-menu ul, .top-menu ul a{
    position: absolute;
    display: none;
    z-index:999px;
    line-height: 30px;
    top: 12px;
}
.top-menu li a{
    padding:0 0 0 30px;
    color:#4d3925;
    font-size:25px;
    line-height:26px;
    text-decoration:none;
}
.top-menu a:hover, .top-menu .active {
    color:#f29869;
}
.top-menu li:hover ul a,  .top-menu li:hover ul {
    position: abolute;
    display: block;
    padding: 32px 0 0 14px;
    font-size: 16px;
    line-height: 30px;
    z-index: 999px;
} 
```

参考菜单：[http ://www.nicoheins.com/lux/](http://www.nicoheins.com/lux/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:48:29.277

此下拉列表存在许多问题。但是，导致此特定问题的原因是`position:absolute;`您的选择器中的属性`.top-menu ul, .top-menu ul a`。一旦你摆脱它，你的链接将不再堆叠在彼此之上。

但是你仍然需要做更多的工作才能让你的菜单看起来新鲜。

不要插入我自己的工作，但我有一个相当不错的下拉列表（我认为，至少），您可以在 Github 上使用托管。[在这里查看](https://github.com/jmeas/CSS3-Dropdown-With-Fade)。如果您不想要淡入淡出或箭头，您可以删除它们，然后应用您自己的样式。其余的应该按照您的意愿工作。

编辑以解决其他问题：

同样，最初的问题只是要求解决我在此下拉列表中注意到的问题之一。另一个是您的子菜单`ul`将父母`li`s 向右推。您可以通过应用此样式来解决此问题：

```
.top-menu > li {
    position: relative;
}
.top-menu li ul {
    position: absolute;
} 
```

另一个是你所有的`li`s 都被设置为`float:left;`. 您只希望以这种方式设置顶级`li`s 的样式。本节对此进行了说明：

```
.top-menu li, .top-menu li a{
    display:block;
    float:left;
} 
```

将此更改为

```
.top-menu > li, .top-menu > li > a{
    display:block;
    float:left;
} 
```

会解决这个问题，但是你需要重新应用`display:block;`到子菜单`a`。

我想您的下一个问题是子菜单之间的*巨大*间距`a`。这是因为您使用以下代码定位它们：

```
.top-menu li:hover ul a,  .top-menu li:hover ul {
    position: abolute;
    display: block;
    padding: 32px 0 0 14px;
    font-size: 16px;
    z-index: 999px;
} 
```

那`padding-top`是相当大的！确保你的选择器*只*选择你想要的，否则你最终会得到这样的奇怪行为。当您使用像下拉列表这样的东西时，这一点尤其重要，它在`li`s 中包含`li`s，并且它们需要完全不同的样式。

要全面了解选择器，[请查看此页面](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)。

[这里](http://jmeas.com/projects/so/lit/)有一个功能版本。请注意，我试图`css`尽可能少地更改原件。我认为这限制了我编写我认为可以编写的最佳下拉列表的能力。但这确实有效！

[这是一个 JSFiddle](http://jsfiddle.net/amK3c/)，其中包含完全干净的重写代码！。

# python - Python脚本将文件从一台服务器获取到另一台服务器并将它们存储在单独的目录中？

> ID：12831865
> 
> 赞同：6
> 
> 时间：2012-10-11T03:43:44.127
> 
> 标签：python, ssh, scp

我正在努力`server 1`。我需要编写一个 Python 脚本，我需要在其中连接到 a`server 2`并从一个目录中获取某些文件（名称以字母“HM”开头的文件）并将它们放入另一个目录中，该目录需要在运行时创建（因为对于程序的每次运行，都必须创建一个新目录，并且必须将文件转储到那里），在`server 1`.

我需要在 Python 中执行此操作，而且我对这种语言比较陌生。我不知道从哪里开始编写代码。是否有不涉及“压缩”文件的解决方案？我已经查看了 Paramiko，但据我所知，它一次只传输一个文件。我什至看过 glob，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:31:57.990

传输您可能想要查看 paramiko 的文件

```
import os
import paramiko

localpath = '~/pathNameForToday/'
os.system('mkdir ' + localpath)
ssh = paramiko.SSHClient() 
ssh.load_host_keys(os.path.expanduser(os.path.join("~", ".ssh", "known_hosts")))
ssh.connect(server, username=username, password=password)
sftp = ssh.open_sftp()
sftp.get(remotepath, localpath)
sftp.close()
ssh.close() 
```

我你想使用 glob 你可以这样做：

```
import os
import re
import glob

filesiwant = re.compile('^HM.+') #if your files follow a more specific pattern and you don't know regular expressions you can give me a sample name and i'll give you the regex4it
path = '/server2/filedir/'
for infile in glob.glob( os.path.join(path, '*') ):
    if filesiwant.match(infile):
         print "current file is: " + infile 
```

否则一个更简单的选择是使用 os.listdir()

```
import os
for infile in os.listdir('/server2/filedir/'):
    ...` 
```

这是否回答你的问题？如果没有发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:11:38.920

Python 不会是我执行此任务的首选，但您可以使用对系统的调用并运行 mkdir 和 rsync。特别是你可以做

```
import os
os.system("mkdir DIRECTORY")
os.system("rsync -cav user@server2:/path/to/files/HM* DIRECTORY/") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:11:48.367

你可以使用[`fabric`](http://fabfile.org). `fabfile.py`在 server1 上创建：

```
import os
from fabric.api import get, hosts

@hosts('server2')
def download(localdir):
    os.makedirs(localdir)  # create dir or raise an error if it already exists 
    return get('/remote/dir/HM*', localdir)  # download HM files to localdir 
```

并运行：`fab download:/to/dir`从 shell 中的同一目录（`fabfile.py`is to `fab`as `Makefile`is to `make`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:00:54.697

只需使用 ssh 和 tar。无需涉及 Python

```
$ ssh server2 tar cf - HM* | tar xf - 
```

远程 tar 可以通过管道直接进入本地 tar

# iphone - 缩放 uiscrollview 时如何检测滑动手势

> ID：12831871
> 
> 赞同：1
> 
> 时间：2012-10-11T03:44:34.050
> 
> 标签：iphone, ios, uiscrollview

我有`UIImageview`一个子视图`UIScrollview`，我可以使用本教程[http://cocoadevblog.heroku.com/iphone-tutorial-uiimage-with-zooming-tapping-rotation](http://cocoadevblog.heroku.com/iphone-tutorial-uiimage-with-zooming-tapping-rotation)放大或缩小，问题是如何检测滑动手势当我放大`UIScrollview`时，我知道如何实现滑动手势，并且它可以正常工作，除非我放大`UIScrollview`。

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:20:04.433

看看下面的链接，希望它有帮助..

[如何像 iOS Photos 应用一样实现缩放*和*分页](https://stackoverflow.com/questions/10476302/how-to-implement-zooming-and-paging-like-ios-photos-app)

[如何为 UIImageView 随机器实现滑动手势](https://stackoverflow.com/questions/11689519/how-to-implement-swipe-gesture-for-uiimageview-randomizer)

# ajax - 使用 JQUERY、AJAX 减去日期

> ID：12831874
> 
> 赞同：0
> 
> 时间：2012-10-11T03:45:17.910
> 
> 标签：ajax, jquery

我有如下代码：

```
<table>
   <tr>
    <td>Date Start</td>
    <td><input type ="text" name="date" class="validate[required] text-input datepicker TextInput"></td>
   </tr>
   <tr>
    <td>Year Month day</td>
    <td id="showhere">I want to display year,month,day in here by subtraction between date now and date start.</td>
   </tr>
</table> 
```

**我需要：**

我想在现在日期和用户在上面的文本框中输入的日期开始之间减去日期。我不知道如何解决这个问题。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:47:32.523

```
var d1 = new Date(); 
var d2 = new Date("2011/10/11")  
var diff = Math.abs(d1-d2);  // in milliseconds 
```

但是您必须确保输入日期格式正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:12:47.100

首先，为什么要使用文本输入字段来选择日期？这对用户来说会不舒服。使用 jquery datepicker 代替它来提供漂亮的用户界面，并计算之后的日期差异，如下所示：

在此处查看[演示](http://jsfiddle.net/CCLtZ/2/)

```
$(document).ready(function () { 
$(function() {
        $( "#datepicker" ).datepicker({ dateFormat: 'mm/dd/yy' });
    });
    $('button').click(function() {
        var date = $('#datepicker').datepicker('getDate');
        var today = new Date();
        var diff = Math.floor((today - date) / (1000 * 60 * 60 * 24));
        alert(diff);
});   
}); 
```

标记：

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
</head> 
<form>
        <input id="datepicker" type="text" readonly="true"/><br>
    </form>
        <br><button>number of days</button>​ 
```

# java - 在 DAO 外部创建 JDBC 连接

> ID：12831876
> 
> 赞同：3
> 
> 时间：2012-10-11T03:45:26.883
> 
> 标签：java, model-view-controller, jdbc, dao

所以我这个周末刚学完 JDBC，并成功地将我的代码从 main 方法转移到了 MVC 应用程序中。此应用程序的目的是保存球员名单并在需要时显示用户凭据。该程序运行良好，当我请求一个类似...的网址时

```
http://localhost:8084/gmustudent/players?id=1 
```

我得到了那个播放器的正确输出！问题是我在我的 PlayersDAO 类中执行数据库连接，我认为这不是执行此操作的“最佳”方式。所以我有两个问题。

1.  有没有办法在 web.xml 文件或其他文件中执行数据库连接，以便当服务器最初启动时，它会立即执行与数据库的连接并在被询问时准备好查询？
2.  这实际上是在 DAO 中建立连接的更好选择，还是会产生不可预见的负面缺点。AKA 与我的数据库的持续连接正是我不想要的吗？

任何评论或链接将不胜感激。我将分享我目前为我的 DAO 类提供的代码，以便您可以看到我目前拥有的代码。谢谢你们！

```
package com.jdbc.test;

import java.sql.SQLException;
import java.sql.Connection;
import java.sql.Statement;
import java.sql.ResultSet;
import java.sql.DriverManager;

public class PlayersDAO 
{
    public static Players viewPlayer(int id) throws SQLException
    {
        Connection connection = null;
        Statement statement = null;
        ResultSet resultSet = null;
        Players playerObject = null;

        try
        {
            String url = "jdbc:mysql://localhost:3306/gmustudent";
            String username = "root";
            String password = "root";

            try
            {
                Class.forName("com.mysql.jdbc.Driver");
            }
            catch(ClassNotFoundException error)
            {
                System.out.println("Error: " + error.getMessage());
            }

            connection = DriverManager.getConnection(url, username, password);
            statement = connection.createStatement();
            resultSet = statement.executeQuery("SELECT * FROM players WHERE id = " + id);

            if(resultSet.next())
                playerObject = new Players(resultSet.getLong("id"), resultSet.getString("name"), resultSet.getString("position"), resultSet.getString("height"), resultSet.getString("year"), resultSet.getString("hometown"), resultSet.getString("highschool"), resultSet.getString("headshot"));   
        }
        finally
        {
            if (connection != null) try{connection.close();} catch(SQLException ignore) {}
            if (statement != null) try{statement.close();} catch(SQLException ignore) {}
            if (resultSet != null) try{resultSet.close();} catch(SQLException ignore) {}
        }

        return playerObject;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:01:16.967

您可以使用资源在 web.xml 文件中创建数据库连接。我希望本教程对您有所帮助。

[http://viralpatel.net/blogs/database-connection-pooling-tomcat-eclipse-db/](http://viralpatel.net/blogs/database-connection-pooling-tomcat-eclipse-db/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:33:00.127

您可以使用[JDBC 连接池](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)。它可以在应用程序性能、并发性和可扩展性方面提供显着优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T15:20:34.650

恕我直言，它始终是隐藏任何资源的实例化细节的好方法。您可以使用工厂方法来执行此操作。这种方法的优点是您可以随时更改管理资源的方式 - 例如，您可以为每个 DAO 拥有一个 JDBCConnection 实例，或者您可以拥有连接池。您可以随时提供开发特定的数据库连接、测试特定的数据库连接或生产数据库连接。所有这些细节你都可以隐藏做这种方法。

# objective-c - NSView Self 的实际大小

> ID：12831877
> 
> 赞同：1
> 
> 时间：2012-10-11T03:45:27.960
> 
> 标签：objective-c, nsview, self, bounds

我刚刚开始了一个全新的项目 GrafLaboratory 来做一些在 NSView 中绘图的实验。我向主窗口添加了一个自定义视图，并将其配置为在窗口更改其大小时采用它的大小。

我将我的 InitFrameWith 修改为：

```
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSRect r = [self bounds];
    }

    return self;
} 
```

当我第一次启动我的新应用并请求 [self bounds] 时，我得到了正确的值：{{0, 50}, {600, 450}}。然后我通过用鼠标拖动来更改窗口的大小。重新启动我的应用时，initWithFrame 返回相同的值：{{0, 50}, {600, 450}}。

但我新改变了大小。我已经尝试了几件事，但没有成功。

任何线索我做错了什么？

谢谢，罗纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:59:45.800

initWithFrame 仅在您初始化框架内的对象时才相关。

如果是带有自定义绘图的自定义 UIView，请查看：

```
- (void)drawRect:(NSRect)frame 
```

这将在调用 setNeedsDisplay 和/或调整视图大小时调用。

对于一些自定义视图，我在 initWithFrame 中所做的一件事是设置自动调整大小的掩码：

```
 // subviews autoresize
    [self setAutoresizesSubviews:YES];   
    // set resize masks (springs)
    [self setAutoresizingMask:(NSViewMaxXMargin | NSViewMinXMargin |
                              NSViewMaxYMargin | NSViewMinYMargin |
                              NSViewHeightSizable | NSViewWidthSizable)]; 
```

然后在 init 和 drawRect 中，如果矩形发生了变化，我调用我的 layoutViews 方法：

```
- (void)drawRect:(NSRect)frame {
    ...
    // called on resize.  on init, delegate isn't hooked up so we'll skip
    if (!NSEqualRects(_prevRect, [self bounds]))
    {
        [self layoutViews];
    }

    // stash away rect for comparison so layout view code only happens when the rect changes
    _prevRect = [self bounds]; 
```

我的 layoutViews 具有自定义布局逻辑。

希望有帮助。

# java - 什么以及如何构建 Java 框架？

> ID：12831878
> 
> 赞同：2
> 
> 时间：2012-10-11T03:45:29.817
> 
> 标签：java, compiler-construction, frameworks

我知道这个问题有点傻。

我是一名 Java 程序员，以前从未研究过 Java 源代码，我一直在使用 Java（官方）框架（例如 javax.swing. *、java.util.*、java.collection.* 和 blah blah）来构建一些应用程序.

现在我尝试查看 Java 源代码（我是黑盒编程范式的受害者），发现源代码完全是用 Java 编写的。现在，我很困惑，Java 正在使用什么框架（Java 源代码中的那个，我在这里知道有点困惑）来形成我们这么多使用的框架？

真诚地，我希望在 Java 源代码中看到一些汇编类型的代码，但实际上并非如此。我“感觉”我们使用的普通框架（java *...*、javax... *）*并不是 JVM 的最低入口点。一定有比这“更低”的东西。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:03:57.527

大多数 Java 库（您称之为框架）都是用 Java 编写的。解释编译字节码的 JVM 大部分是用 C++ 实现的，并且该库确实包含用低级语言（C 或 C++）编写的“本机”方法。

方法是用较低级别的语言编写的，原因只有两个：平台依赖性（每个平台上必须不同的东西）和性能（一直被使用并受益于本机代码的东西）。

最终结果是几乎所有库都与平台无关，不必为每个平台重写。非 Java 代码的范围仅限于必须是平台特定的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:53:49.447

我不是专家，但...

JVM 将 Java 源代码转换为机器代码。所以这是最低级别，一旦你拥有运行 Java 源代码（JVM）的东西，那么你就可以围绕它（在 Java 中）创建一个框架。

也就是说，仍然有一些本机操作系统函数调用——抱歉，我对它们了解不多。

仅供参考 .NET 是相同的，用 .NET 编写的框架，带有本地调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T05:01:43.493

Java源代码：用Java程序语言编写的一些代码

javac：一个命令行实用程序，用于将Java源代码编译为类文件（包含字节码）

jvm：加载类文件，并执行该文件中的字节码。

字节码：一个指令集，看起来像汇编语言。一条指令的长度是一个字节（这就是为什么它被称为字节码）。

JNI：Java Native Interface（主要由C/C++编写），扩展Java程序能力的接口，用java很难/无法实现，比如一些关于OS的程序。

字节码是这样的：

```
public static void main(java.lang.String[]);
Code:
    0: ldc           #16                 // String a a \"fsd  fsd\" sfd gfd  \"fs  d\"
    2: astore_1
    3: getstatic     #18                 // Field java/lang/System.out:Ljava/io/PrintStream;
    6: aload_1
    7: invokestatic  #24                 // Method t:(Ljava/lang/String;)Ljava/lang/String;
    10: invokevirtual #28                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
    13: return 
```

您可以使用命令实用程序 javap 获取上面的代码。

# php - joomla Virtuemart $addtocart 变量在哪里定义

> ID：12831882
> 
> 赞同：1
> 
> 时间：2012-10-11T03:46:04.953
> 
> 标签：php, joomla, virtuemart

joomla Virtuemart 变量在哪里`$addtocart`定义？
此变量显示添加到购物车按钮。我需要在这个按钮上添加一些类。所以我需要知道这个变量是在哪里定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:59:46.927

**您可以在components\com_virtuemart\themes\default\templates\product_details\includes\addtocart_form.tpl.php**中访问添加到购物车

# matlab - 当 A 和 B 都是大矩阵时，在 MATLAB 中求解 AX=B 中的 X 的有效方法

> ID：12831889
> 
> 赞同：6
> 
> 时间：2012-10-11T03:47:17.917
> 
> 标签：matlab, linear-algebra, sparse-matrix, factorization, matrix-inverse

我有这个问题需要解决`X`in `AX=B`. `A`的数量级为 15000 x 15000，并且是稀疏且对称的。`B`是 15000 X 7500 并且不是稀疏的。求解 X 的最快方法是什么？

我可以想到2种方法。

1.  最简单的方法，`X = A\B`
2.  使用 for 循环，

    ```
    invA = A\speye(size(A))
    for i = 1:size(B,2)
        X(:,i) = invA*B(:,i);
    end 
    ```

有没有比上述两种更好的方法？如果不是，我提到的两者之间哪一个最好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T08:18:04.793

首先要做的事情-永远永远*不会*计算A的逆。除非A是对角矩阵，否则**永远不会稀疏。**尝试一个简单的三对角矩阵。该行本身会杀死您的代码 - 内存方面和性能方面。并且计算倒数在数值上不如其他方法准确。

一般来说，`\`应该适合你。MATLAB 确实认识到您的矩阵是稀疏的并执行稀疏分解。如果你给一个矩阵`B`作为右手边，性能比你只用一个`b`向量求解一个方程组要好得多。所以你这样做是正确的。您可以在这里尝试的唯一其他技术方法是显式调用`lu`、`chol`或`ldl`，具体取决于您拥有的矩阵，并自己执行向后/向前替换。也许你在那里节省了一些时间。

事实上，求解线性方程组的方法，尤其是稀疏系统，很大程度上取决于问题。但在我想象的几乎任何（稀疏）情况下，15k 系统的因式分解应该只需要几分之一秒。这不是当今的大型系统。如果您的代码很慢，这可能意味着您的因素不再那么稀疏了。您需要确保对矩阵进行正确**重新排序**，以在稀疏分解期间最小化填充（添加的非零条目）。这是关键的一步。查看[此页面](http://milamin.sourceforge.net/technical-notes/reordering)以了解有关如何重新排序系统的一些测试和说明。并简要查看[此 SO 线程](https://stackoverflow.com/questions/12630020/minimum-tile-ordering/12636682#12636682)中的示例重新排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T04:12:23.603

由于您可以自己回答两者中哪一个更快，因此我会尝试建议下一个选项。使用 GPU 解决它。很多细节都可以在网上找到，包括这个[SO 帖子](https://stackoverflow.com/questions/11711192/solve-small-symmetric-positive-definite-ax-b-on-gpu-only)、A/b 的[matlab 基准测试等。此外，还有](http://www.mathworks.com/products/parallel-computing/examples.html?file=/products/demos/shipping/distcomp/paralleldemo_gpu_backslash.html)[LAMG](http://code.google.com/p/lamg/)（精益代数多重网格）的 MATLAB 插件。LAMG 是一个快速的图拉普拉斯求解器。它可以在 O(m) 的时间和存储时间内解决 Ax=b。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T05:43:34.367

如果您的矩阵`A`是对称正定矩阵，那么您可以采取以下措施来高效稳定地求解系统：

*   首先，计算 Cholesky 分解，`A=L*L'`。由于你有一个稀疏矩阵，并且你想利用它来加速反演，你不应该`chol`直接应用，这会破坏稀疏模式。相反，请使用[此处](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/sparsity.html#2)描述的一种重新排序方法。
*   然后，解决系统`X = L'\(L\B)`

最后，如果不处理潜在的复数值，则可以替换所有`L'`by `L.'`，这会进一步加速，因为它只是尝试转置而不是计算复共轭。

另一种选择是`pcg`Matlab 中的预处理共轭梯度法。这个在实践中非常流行，因为你可以用速度换取准确性，即减少迭代次数，它会给你一个（通常非常好的）近似解决方案。您也永远不需要显式存储矩阵，但如果您的矩阵不适合内存，则`A`只需能够计算矩阵向量乘积。`A`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T08:47:59.293

如果这需要永远在您的测试中解决，您可能会进入虚拟内存来解决问题。一个 15k 方（完整）矩阵将需要 1.8 GB 的 RAM 来存储在内存中。

```
>> 15000^2*8
ans =
      1.8e+09 
```

您将需要一些重要的 RAM 来解决这个问题，以及 64 位版本的 MATLAB。除非您有足够的 RAM 来解决问题，否则分解不会对您有所帮助。

如果您的矩阵是真正稀疏的，那么您是否使用 MATLAB 的稀疏形式来存储它？如果不是，则 MATLAB 不知道矩阵是稀疏的，并且不使用稀疏分解。

A 有多稀疏？很多人认为半满零的矩阵是“稀疏的”。那将是浪费时间。在这样大小的矩阵上，您需要超过 99% 的零才能真正从矩阵的稀疏分解中获益。这是因为填写。否则，得到的分解矩阵几乎总是几乎满的。

如果您无法获得更多 RAM（您知道 RAM 是 cheeeeeeeeeep，当然，一旦您考虑到尝试解决此问题所浪费的时间），那么您将需要尝试迭代求解器。由于这些工具不会分解您的矩阵，如果它真的是稀疏的，那么它们将不会进入虚拟内存。这是一个巨大的节省。

由于迭代工具通常需要预处理器才能尽可能好地工作，因此可能需要一些研究才能找到最佳的预处理器。

# php - 拉出数组元素

> ID：12831894
> 
> 赞同：2
> 
> 时间：2012-10-11T03:47:51.460
> 
> 标签：php, mysql, arrays

所以我正在 print_r-ing 一个数组，生成如下：

```
while ($twitgroup = mysql_fetch_array($resulttwitter)) {
print_r($twitgroup);
} 
```

我得到这个输出（有多个数组，取决于行）。

```
Array ( [0] => composed [category] => composed [1] => 330 [value] => 330 [2] => 1344384476.94 [timestamp] => 1344384476.94 ) Array ( [0] => elated [category] => elated [1] => 2034 [value] => 2034 [2] => 1344384476.94 [timestamp] => 1344384476.94 ) Array ( [0] => unsure [category] => unsure [1] => 2868 [value] => 2868 [2] => 1344384476.94 [timestamp] => 1344384476.94 ) Array ( [0] => clearheaded [category] => clearheaded [1] => 1008 [value] => 1008 [2] => 1344384476.94 [timestamp] => 1344384476.94 ) Array ( [0] => tired [category] => tired [1] => 2022 [value] => 2022 [2] => 1344384476.94 [timestamp] => 1344384476.94 ) 
```

我希望能够在这里提取个人价值观，但我遇到了麻烦。我正在尝试在这些数组上使用 while 循环，但我认为这可能是错误的。我是否应该使用 foreach 循环，然后在该 foreach 的输出上访问数组的每个元素？

比方说，我要抓取composition，以及committed 的值。我该怎么做？

我非常擅长 Python 中的数组/列表，但我在 PHP 中的数组经验有些欠缺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:16:37.040

利用

```
while ($row = mysql_fetch_assoc($resulttwitter)) {
  $twitgroup[$row['category']] = $row;
}

echo $twitgroup['composed']['value'];     // outputs 330 
echo $twitgroup['composed']['timestamp']; // outputs 1344384476.94 
```

如果你只想`categories`和他们的`values`使用

```
while ($row = mysql_fetch_assoc($resulttwitter)) {
  $twitgroup[$row['category']] = $row['value'];
}

echo $twitgroup['composed'];     // outputs 330 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:55:12.187

替换`mysql_fetch_array`为`mysql_fetch_assoc`以消除重复项。然后这个：

```
while ($twitgroup = mysql_fetch_assoc($resulttwitter)) 
{
    foreach ($twitgroup as $key => $value)
    {
        echo "$key => $value\n";
    }
} 
```

您还可以按名称获取元素：

```
while ($twitgroup = mysql_fetch_assoc($resulttwitter)) 
{
    echo "category => " . $twitgroup["category"] . "\n";
    echo "value => " . $twitgroup["value"] . "\n";
    echo "timestamp => " . $twitgroup["timestamp"] . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:12:05.850

mysql_fetch_array 在结果中包含每个字段两次，一次与数字键相关联，另一次与字段名称相关联。

这就是为什么你有

```
 [0] => composed 
   [category] => composed
   [1] => 330 
   [value] => 330 
```

您可以访问字段，例如：

```
 $twitgroup[0] 
```

或喜欢：

```
 $twitgroup['category'] 
```

因此，您可以访问您的每一行，如：

```
 while ($twitgroup = mysql_fetch_array($resulttwitter)) {
          print $twitgroup['category']; // or print $twitgroup['0'];
          print $twitgroup['value']; // // or print $twitgroup['1'];

          // or by the corresponding numeric indices.

   } 
```

如果您想将结果限制为数字或关联数组，请在 mysql_fetch_array 中添加一个附加标志（result_type）：

```
 mysql_fetch_array ($resulttwitter, MYSQL_ASSOC) // or mysql_fetch_array ($resulttwitter, MYSQL_NUM) 
```

说了这么多，强烈建议不要在 PHP 中使用 mysql_* 函数，因为它们已被弃用。您应该改用 mysqli 或 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T04:13:19.397

这就是你所拥有的：

```
  大批 （
    [0] => 组成
    [类别] => 组成
    [1] => 330  
    [价值] => 330
    [2] => 1344384476.94
    [时间戳] => 1344384476.94
） 大批 （
    [] =>
    [] =>
    ...
) ...

```

PHP 中的数组称为关联数组，因为它们的键可以是整数、字符串或其他任何内容。您有一个包含数组的数组。

要访问各个字段，最方便的是使用 for each 循环。

```
$record=0;
foreach ($array as $k => $subArray) {
    $record++;
    foreach($subArray as $field => $value) {
        printf("%d: %s = %s\n", $record, $field, $value);
    }
} 
```

在我看来，您获取数据的方式有问题，因为一半的字段似乎是多余的。您可以使用字符串键来找出内容。所以不需要 n => name 条目。

如果这无济于事，我想你可以迭代这些值

```
$ix=0;
for ($i=0; $i < (count($array)/2); $i++){
   printf("%s\n", $array[$ix]);
   $ix++;
} 
```

# ios - reloadData 没有被立即调用（一个 NSXMLParserDelegate 困境）

> ID：12831896
> 
> 赞同：2
> 
> 时间：2012-10-11T03:48:03.590
> 
> 标签：ios, uitableview, nsxmlparser, reloaddata

我继承了一些我正在尝试调试的该死的糟糕代码。

我正在使用 NSXMLParser 解析 RSS 提要。在 parser:didEndElement:etc: 中，当每个新项目出现时，我触发另一个调用 UITableView 的 reloadData 方法的方法。但是，调用 reloadData 方法时不会调用它们，而是稍后...在 parserDidEndDocument: ...之后它们都会立即触发。

似乎 reloadData 请求在某个地方排队，阻塞了解析线程。

当我告诉它时，我如何强制 reloadData 触发它，而不是它想要的时候。我的问题是，因为它只在所有新闻项目都加载后才会重新加载——而且有很多——所以 UI 体验不是最理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T06:58:50.103

你的猜想是正确的。只有当程序控制返回到主运行循环时，才对用户界面进行更新。`NSXMLParser`但是完全同步工作：该`parse`方法解析整个 XML 数据（调用委托函数等）并仅在解析完成后返回。`reloadData`因此，呼入没有立即可见的效果`parser:didEndElement:...`。

如果解析您的 XML 数据确实需要太多时间，以至于您不能只`reloadData`在`parse`方法返回时调用，那么您必须将解析操作移至单独的线程：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [myParser parse];
}); 
```

`dispatch_async`立即返回并在后台线程上完成解析。因此，委托方法也会在后台线程上调用。由于 UI 的更新只能在主线程上完成，您可以按照以下步骤进行 `parser:didEndElement:...`：

```
YourType newObject = ... // create new object from XML data
dispatch_async(dispatch_get_main_queue(), ^{
    // assuming that self.dataArray is your data source array for the table view 
    int newRow = [self.dataArray count]; // row number for new object
    [self.dataArray addObject:newObject]; // add to your data source
    // insert row in table view:
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRow inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                          withRowAnimation:UITableViewRowAnimationAutomatic];
}); 
```

使用`insertRowsAtIndexPaths`而不是`reloadData`应该通过动画提供“更流畅”的 UI 更新。

我确实希望我的示例代码中没有太多的语法错误，并且它会有所帮助。否则随时问。

# php - Codeigniter 路由中具有重复名称的正则表达式

> ID：12831897
> 
> 赞同：3
> 
> 时间：2012-10-11T03:48:03.857
> 
> 标签：php, codeigniter

我想要做的是如果我有重复的名称路由，我只使用一个路由而不是使用 3 个路由，但我不确定我需要使用什么正则表达式，有什么建议吗？

现在我有这个

```
product_test_1.html
product_test_2.html
product_test_3.html 
```

我的代码点火器路线

```
$route['product_test_1.html'] = "website/product";
$route['product_test_2.html'] = "website/product";
$route['product_test_3.html'] = "website/product"; 
```

我想要的东西（但它不起作用）

```
$route['/product_test/i'] = "website/product"; 
```

有什么想法可以解决我的问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:52:36.763

尝试这个：

```
$route['product_test_[0-9]+\.html'] = 'website/product'; 
```

这是具体的，你可以得到。`[0-9]`表示任何数字（也可以是`\d`），表示`+`前面标记的 1 个或多个（数字）。

如果您只想捕获任何内容，则`.`标记是“任何字符”，因此您可以替换`[0-9]+`为`.+`，这意味着它将匹配（几乎）任何 1 或更长的字符的字符串。

这会为同一页面创建重复的 url，这通常是不可取的，但也许您特别想要这样。如果没有，您可以考虑通过 301 重定向`.htaccess`。

如果这是您想要的，您也可以将 ID 传递给函数。

```
$route['product_test_([0-9]+)\.html'] = 'website/product/$1'; 
```

括号捕获数字并将其传递给 URL，`$1`因为它是捕获的第一个捕获匹配项。

然后，在您的`website`控制器中，您可以这样声明您的`product`方法：

```
function product($id) 
```

并且`$id`将自动成为我们在 URL 中传递的 ID，取自`product_test_#.html`

# web-services - gen_tcp 收到极高的 CPU

> ID：12831898
> 
> 赞同：9
> 
> 时间：2012-10-11T03:48:11.633
> 
> 标签：web-services, erlang, cpu, recv, gen-tcp

抱歉，我是 Erlang 新手，可能会提出愚蠢的问题。但请帮我解决这个问题。

我已经编写了一个 Erlang 服务器来用 Node.js 替换我正在使用的服务器，它吞噬了我所有的记忆，我祈祷 Erlang 可以成为一种出路。服务器在单元测试和内部测试中正常工作，但在压力测试中面临高 CPU 使用率。

修整下来后，我发现 CPU 突发是由于客户端的 TCP 接收造成的。

```
receiveClientPacket(Sock) ->
  inet:setopts(Sock, [{active, once}, {buffer, ?CLIENTHEARTBEATSIZE}]),
  receive
    {tcp, Sock, Data} ->
      {ok, Data};
    {tcp_closed, Sock} ->
      {error, closed}
    after ?CLIENTRECCEIVETIMEOUT ->
      {error, timeout}
  end. 
```

我尝试在函数开始时让进程休眠 10 小时（以防止它调用接收），CPU 根本没有爆裂。因此我得出结论，CPU的突发是由于TCP接收。（如果我犯了任何错误，请纠正我）

以下是有关我的压力测试的信息：

1.  启动 Erlang 服务器： erl +zdbbl 2097151 -K true +A 128 +P
2.  5000000 将 5000 个客户端连接到每个连接的 Erlang 服务器
3.  客户端每 1 分钟向服务器发送一个 2 字节的数据。
4.  连接完成，（即每分钟只执行 2 个字节的数据），CPU 突发到 ~30%sy（从“顶部”）

我正在为 Erlang 服务器使用 Amazon Linux AMI（大型实例，64 位）。爆裂是因为linux吗？因为我不知道系统将如何用完 CPU。或者是我糟糕的代码的问题？（我相信是这样...）

在实际情况下，我们的服务器不仅可以接收乒乓球，还可以接收消息，这需要更多的负载……这只是第一步……

数以百万计的感谢任何可以拯救我的人。

安妮塔~*

~~~~~~~~~~~~~~~~~~~~~~~

大实例信息（供参考）：

*   7.5 GB 内存
*   4 个 EC2 计算单元（2 个虚拟内核，每个内核有 2 个 EC2 计算单元）
*   850 GB 实例存储
*   64位平台
*   I/O 性能：高

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:34:16.743

这篇关于[使用 OTP 原则构建非阻塞 TCP 服务器的](http://www.trapexit.org/Building_a_Non-blocking_TCP_server_using_OTP_principles)文章可能会让您感兴趣。您还可以看看[Cowboy使用的](https://github.com/extend/cowboy)[Ranch](https://github.com/extend/ranch)，它是Erlang HTTP 服务器，它可以支持大量连接，保持低内存占用。

# css - 如何为当前页面设置“wp_nav_menu”链接的样式？

> ID：12831899
> 
> 赞同：0
> 
> 时间：2012-10-11T03:48:14.380
> 
> 标签：css, wordpress, drop-down-menu

我环顾四周，似乎找不到一种直接的方法来做到这一点。我有一个使用 wp_nav_menu 的下拉菜单的页面列表，我只想将指向您当前所在页面的链接设置为不同的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:00:06.763

您是否尝试过使用选择器`current-menu-item`？这应该工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:24:47.487

在 webfish 样式表的末尾添加此代码

```
 #DropDownMenuNav ul.children,
    #DropDownMenuNav ul.DropDownMenu li.current_page_item
    {
    background: #D0251E; // Any color code you want
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:57:52.883

已经有一个基于它的条件 wordpress 将其视为活动菜单。所以你必须为不同的颜色创建css类，你可以看到当前活动的类，比如'page_item page-item-36 current_page_item'，仅此而已。所以用你想要的属性创建一个类。

# java - java - 如何使用组合框在java swing中进行分页？

> ID：12831910
> 
> 赞同：0
> 
> 时间：2012-10-11T03:49:06.827
> 
> 标签：java, swing, combobox, pagination

我想在 java swing 中使用组合框作为参数进行分页，以定义将显示的行的数量，我也使用按钮 next、previous、back、last ..

这是代码：

```
view.getBtnNextPage().addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            String c = String.valueOf(view.getComboBox().getSelectedItem());

            int a = view.getTable().getRowCount();
            int b = (int) Biodata.countBiodatas();
            if (c.equals("5")) {

                int item = b * a;// 3
                int next = item * a;
                int akhir = b - a;

                refreshTable(Biodata.findBiodataEntries(a + 5 - 5,
                        a + 5 + 6));

            }
        }
    }); 
```

# mysql - 散列 MySQL 数据库架构

> ID：12831918
> 
> 赞同：9
> 
> 时间：2012-10-11T03:49:28.740
> 
> 标签：mysql, checksum

我想对 MySQL 数据库模式（没有数据）进行哈希/签名，以便对其进行校验和，以确保它不会被其他人修改。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T03:51:42.440

据我了解您的问题，您需要表格校验和：

```
checksum table `table` 
```

所以，我猜只是做一个空表的校验和

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-21T08:52:53.500

```
SELECT HEX( CRC32 ( SUM( CRC32( CONCAT(
   COALESCE(TABLE_NAME,''),
   COALESCE(COLUMN_NAME,''),
   COALESCE(ORDINAL_POSITION,''),
   COALESCE(COLUMN_DEFAULT,''),
   COALESCE(IS_NULLABLE,''),
   COALESCE(DATA_TYPE,''),
   COALESCE(CHARACTER_MAXIMUM_LENGTH,''),
   COALESCE(CHARACTER_OCTET_LENGTH,''),
   COALESCE(NUMERIC_PRECISION,''),
   COALESCE(NUMERIC_SCALE,''),
   COALESCE(CHARACTER_SET_NAME,''),
   COALESCE(COLLATION_NAME,''),
   COALESCE(COLLATION_NAME,''),
   COALESCE(COLUMN_TYPE,''),
   COALESCE(COLUMN_KEY,'')
  ) ) ) ) ) AS 'hash'
FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = 'database_name'; 
```

# raycasting - 用于碰撞的射线投射

> ID：12831926
> 
> 赞同：0
> 
> 时间：2012-10-11T03:50:19.803
> 
> 标签：raycasting

嗨，我正在尝试在我的 3d 游戏中实现光线投射以供多种用途

我读过很多关于光线投射的东西，我知道你需要一个原点、方向和长度，我有这些。我遇到的麻烦是找到发射光线的角度，光线投射是检查你面前是否有东西的最佳解决方案吗？我在某处读到光线投射是一种古老而糟糕的技术，如果它是一种糟糕的技术，那么还有哪些其他方法适合拍摄等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:41:45.057

取决于你的需要。光线投射仍然经常用于许多与游戏相关的东西，尤其是物理和碰撞检测。对于第二个，您可以使用基于[Verlet 集成的](http://en.wikipedia.org/wiki/Verlet_integration)[持续碰撞检测](http://en.wikipedia.org/wiki/Collision_detection).. 但这实际上取决于您要解决的问题..

# ajax - 通过 AJAX 来自另一个域的 API 请求

> ID：12831929
> 
> 赞同：0
> 
> 时间：2012-10-11T03:50:36.710
> 
> 标签：ajax, cross-platform

我有一个项目需要从其他站点提取数据，并且他们有一个 API。我想执行 ajax 调用以从其他站点提取数据并填充我的 span 和 div。

所以我继承了我的 ajax 流程：ajax 调用->retriever.php-> API 服务器。

我知道跨域策略，并且我对解决方案做了很多研究，但我仍然不清楚。

我的问题是：

jsonp是否需要服务器合作，我的意思是，我正在与之通信的API服务器是否需要支持jsonp？

第二个问题是，我的项目还有哪些其他解决方案。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:59:31.397

首先，浏览器支持jsonp。其次，您可以为您的项目使用 RPC。

# php - 7 个用户登录帐户被定向到 7 个不同的页面，这个代码有什么问题？

> ID：12831932
> 
> 赞同：1
> 
> 时间：2012-10-11T03:51:13.190
> 
> 标签：php, login

这是我在登录（logging.php）页面中使用的代码..请问我应该怎么做？当尝试登录第一个帐户/其他帐户时..登录页面已加载但未重定向到任何页面相反，它只显示一个空白页.. 或者如果有的话，我的代码是错误的，你能帮助我并提供一个更好的代码来替换它吗？任何答复将不胜感激，谢谢！:) 我非常需要这个项目..

```
<?php

session_start();
  $username = $_POST['username'];
  $password = $_POST['password'];

if ( isset ($_POST['username']) )
{
 $connect = mysql_connect("localhost","root","") or die ("could'nt connect to db");
 mysql_select_db("tesda") or die ("cant connect");
 $sql=("SELECT * FROM login WHERE username='$username'");
 $result=mysql_query($sql);
 $row=mysql_fetch_array($result);

 if($result !=0 )
 {
    while($row=mysql_fetch_assoc($result))
    {
        $username = $row['username'];
        $password = $row['password'];
    }

if($row['name'] == $_POST['name'])
{

    if($_POST['username']=='tesda1'){
    header('Location: expi1.php');
    }
    else if($_POST['username']=='tesda2'){ 
    header('Location: expi2.php');
    }
    else if($_POST['username']=='tesda3'){ 
    header('Location: expi3.php');
    }
    else if($_POST['username']=='tesda4'){ 
    header('Location: expi4.php');
    }
    else if($_POST['username']=='tesda5'){ 
    header('Location: expi5.php');
    }
    else if($_POST['username']=='tesda6'){ 
    header('Location: expi6.php');
    }
    else if($_POST['username']=='tesda7'){ 
    header('Location: expi7.php');
    }
    else if($_SESSION['username']="$dbusername"){
    header('Location: attempt1.php');
    }
    else if($_SESSION['username']="$dbusername"){
    header('Location: attempt2.php');
    }
    else if($_SESSION['username']="$dbusername"){
    header('Location: attempt3.php');
    }
}
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:11:24.847

请看看下面的代码是否有效，我做了一些小改动......

```
 <?php

    session_start();
      $username = $_POST['username'];
      $password = $_POST['password'];

    if ( isset ($_POST['username']) )
    {
     $connect = mysql_connect("localhost","root","") or die ("could'nt connect to db");
     mysql_select_db("tesda") or die ("cant connect");
     $sql="SELECT * FROM login WHERE username='$username' AND password='$password'";
     $result=mysql_query($sql);

     if(mysql_num_rows($result)==1)
     {

        if($_POST['username']=='tesda1'){
        header('Location: expi1.php');
        }
        else if($_POST['username']=='tesda2'){ 
        header('Location: expi2.php');
        }
        else if($_POST['username']=='tesda3'){ 
        header('Location: expi3.php');
        }
        else if($_POST['username']=='tesda4'){ 
        header('Location: expi4.php');
        }
        else if($_POST['username']=='tesda5'){ 
        header('Location: expi5.php');
        }
        else if($_POST['username']=='tesda6'){ 
        header('Location: expi6.php');
        }
        else if($_POST['username']=='tesda7'){ 
        header('Location: expi7.php');
        }

    }else{
        header('Location:wrongattempt.php');
    }
    }

?> 
```

创建一个单独的文件来处理不成功的尝试并显示不成功的尝试次数。

**错误尝试.php**

```
<?php
session_start();
$attempt = ++$_SESSION['count'];
echo 'Number of unsuccessful attempts = '.$attempt;

echo '<a href="login.php">Try again</a>';

?> 
```

在您的登录页面中，在开始时添加以下行。我假设您的登录页面是 login.php。 **登录.php**

```
session start();
if(!isset($_SESSION['count']))
    $SESSION['count']=0; //initialize count session variable. 
```

# java - Primefaces，如何用另一个按钮折叠 layoutUnit？

> ID：12831933
> 
> 赞同：1
> 
> 时间：2012-10-11T03:51:12.333
> 
> 标签：java, javascript, layout, jsf-2, primefaces

我在 Mojarra-2.1.10 上使用 primefaces PrimeFaces-3.4，我的整页布局是[这样](http://www.primefaces.org/showcase/ui/layoutFull.jsf)的。我如何在顶部制作一个按钮，它将折叠西 layoutUnit？

感谢帮助。

PS，早期假设可以这样写：

```
<layoutUnit position="west" widgetVar='westlayout'> ... </layoutUnit>

//button in the top
<button onlick="westlayout.collapse()"></button> 
```

但不幸的是，layoutUnit 不存在 widgetVar 属性。

更新1：发现[类似的问题](https://stackoverflow.com/questions/6398998/primefaces-conditionally-expand-layoutunit?rq=1)，试过了。对我没用，问题是具有更新属性的按钮找不到具有此类标识符的文本，我在一个 layoutUnit 中尝试过，找到了标识符，但也没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T04:50:10.720

根据 Layout Client Side API，您可以通过*layout* widgetWar 切换您的layoutUnit：

```
<p:layout fullPage="true" widgetVar="layoutWdgt">
    <p:layoutUnit position="north" size="100" header="Top" resizable="true" closable="true" collapsible="true">
        <h:form>
            <p:commandButton value="Toggle" onclick="layoutWdgt.toggle('west')"/>
        </h:form>
    </p:layoutUnit>

    ....

    <p:layoutUnit position="west" size="200" header="Left" resizable="true" closable="true" collapsible="true">
        <h:form>
            <h:outputText value="West Layout unit"/>
        </h:form>
    </p:layoutUnit>
    <p:layoutUnit position="center">
        <h:outputText value="Center Layout unit"/>
    </p:layoutUnit>
</p:layout> 
```

* * *

已编辑

从 PrimeFaces 4 开始，仍然支持 id 映射，但不推荐使用 PF('XXX')

对于 PrimeFaces 5.0 及更高版本，您需要使用 PF widgetVar 来调用客户端 API。**因此，您需要使用PF('layoutWdgt').toggle('west')**而不是使用 layoutWdgt.toggle('west') 切换西布局单元

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T17:48:52.640

使用 Primefaces 6.1：

```
<p:layout style="min-width:400px;min-height:200px;" widgetVar="layoutWdgt">
    <p:layoutUnit position="west" size="100" minSize="40" maxSize="200" collapsible="true">
        West
         <p:commandButton value="Collapse" onclick="PF('layoutWdgt').toggle('west')"/>
    </p:layoutUnit>
    <p:layoutUnit position="center">
        Center
    </p:layoutUnit>
</p:layout> 
```**

# mongodb - 无法连接到服务器 127.0.0.1:27017

> ID：12831939
> 
> 赞同：178
> 
> 时间：2012-10-11T03:51:43.457
> 
> 标签：mongodb

我收到以下错误：

```
alex@alex-K43U:/$ mongo
MongoDB shell version: 2.2.0
connecting to: test
Thu Oct 11 11:46:53 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed
alex@alex-K43U:/$ 
```

这是我尝试启动 mongodb 时发生的情况：

```
* Starting database mongodb                                             [fail] 
```

我已经试过了`mongo --repair`

我将 chown 和 chmod 设置为*var、lib 和 data/db 并记录*mongodb。

不知道还能做什么。有什么建议么？

**mongodb.log：**

```
***** SERVER RESTARTED *****

Thu Oct 11 08:29:40 
Thu Oct 11 08:29:40 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Thu Oct 11 08:29:40 
Thu Oct 11 08:29:41 [initandlisten] MongoDB starting : pid=1052 port=27017 dbpath=/var/lib/mongodb 32-bit host=alex-K43U
Thu Oct 11 08:29:41 [initandlisten] 
Thu Oct 11 08:29:41 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Thu Oct 11 08:29:41 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Thu Oct 11 08:29:41 [initandlisten] **       with --journal, the limit is lower
Thu Oct 11 08:29:41 [initandlisten] 
Thu Oct 11 08:29:41 [initandlisten] db version v2.2.0, pdfile version 4.5
Thu Oct 11 08:29:41 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Thu Oct 11 08:29:41 [initandlisten] build info: Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Thu Oct 11 08:29:41 [initandlisten] options: { config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Thu Oct 11 08:29:41 [initandlisten] Unable to check for journal files due to: boost::filesystem::basic_directory_iterator constructor: No such file or directory: "/var/lib/mongodb/journal"
************** 
Unclean shutdown detected.
Please visit http://dochub.mongodb.org/core/repair for recovery instructions.
*************
Thu Oct 11 08:29:41 [initandlisten] exception in initAndListen: 12596 old lock file, terminating
Thu Oct 11 08:29:41 dbexit: 
Thu Oct 11 08:29:41 [initandlisten] shutdown: going to close listening sockets...
Thu Oct 11 08:29:41 [initandlisten] shutdown: going to flush diaglog...
Thu Oct 11 08:29:41 [initandlisten] shutdown: going to close sockets...
Thu Oct 11 08:29:41 [initandlisten] shutdown: waiting for fs preallocator...
Thu Oct 11 08:29:41 [initandlisten] shutdown: closing all files...
Thu Oct 11 08:29:41 [initandlisten] closeAllFiles() finished
Thu Oct 11 08:29:41 dbexit: really exiting now 
```

**编辑：**

我删除了锁，然后进行了 mongod 修复并得到了这个错误：

```
Thu Oct 11 12:05:37 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating 
```

所以我用 sudo 做到了：

```
alex@alex-K43U:~$ sudo mongod --repair
Thu Oct 11 12:05:42 
Thu Oct 11 12:05:42 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Thu Oct 11 12:05:42 
Thu Oct 11 12:05:42 [initandlisten] MongoDB starting : pid=5129 port=27017 dbpath=/data/db/ 32-bit host=alex-K43U
Thu Oct 11 12:05:42 [initandlisten] 
Thu Oct 11 12:05:42 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Thu Oct 11 12:05:42 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Thu Oct 11 12:05:42 [initandlisten] **       with --journal, the limit is lower
Thu Oct 11 12:05:42 [initandlisten] 
Thu Oct 11 12:05:42 [initandlisten] db version v2.2.0, pdfile version 4.5
Thu Oct 11 12:05:42 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Thu Oct 11 12:05:42 [initandlisten] build info: Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Thu Oct 11 12:05:42 [initandlisten] options: { repair: true }
Thu Oct 11 12:05:42 [initandlisten] Unable to check for journal files due to: boost::filesystem::basic_directory_iterator constructor: No such file or directory: "/data/db/journal"
Thu Oct 11 12:05:42 [initandlisten] finished checking dbs
Thu Oct 11 12:05:42 dbexit: 
Thu Oct 11 12:05:42 [initandlisten] shutdown: going to close listening sockets...
Thu Oct 11 12:05:42 [initandlisten] shutdown: going to flush diaglog...
Thu Oct 11 12:05:42 [initandlisten] shutdown: going to close sockets...
Thu Oct 11 12:05:42 [initandlisten] shutdown: waiting for fs preallocator...
Thu Oct 11 12:05:42 [initandlisten] shutdown: closing all files...
Thu Oct 11 12:05:42 [initandlisten] closeAllFiles() finished
Thu Oct 11 12:05:42 [initandlisten] shutdown: removing fs lock...
Thu Oct 11 12:05:42 dbexit: really exiting now 
```

但仍然有同样的问题。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-07-22T17:36:15.587

```
Step 1: Remove lock file.
sudo rm /var/lib/mongodb/mongod.lock

Step 2: Repair mongodb. 
sudo mongod --repair 

Step 3: start mongodb.
sudo start mongodb 
or
sudo service mongodb start

Step 4: Check status of mongodb.
sudo status mongodb 
or   
sudo service mongodb status

Step 5: Start mongo console.
mongo 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-06-20T18:08:51.237

你跑`mongod`前跑了`mongo`吗？

[我按照http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)中的 mongodb 安装说明进行操作，只有`mongo`在实际运行 mongo 进程之前运行时，我才遇到与您相同的错误`mongod`. 我认为安装 mongodb 也会启动它，但您需要手动启动它，`mongod`然后再执行其他需要 mongodb 的操作。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2016-01-17T06:35:27.200

这是因为 mongod 进程已关闭，您必须运行以下命令才能启动 mongod 进程：

```
~$ sudo service mongodb stop

~$ sudo rm /var/lib/mongodb/mongod.lock

~$ sudo mongod --repair --dbpath /var/lib/mongodb

~$ sudo mongod --fork --logpath /var/lib/mongodb/mongodb.log --dbpath /var/lib/mongodb

~$ sudo service mongodb start 
```

希望这可以帮助你。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2012-10-11T03:54:20.040

日志表明 mongodb 正在终止，因为有一个旧的锁文件。

如果您不是并且没有运行日志，请删除锁定文件，运行修复，然后再次启动 mongodb。

如果您正在或曾经在打开日志的情况下运行，请参阅[相关的 Mongo DB 文档](http://www.mongodb.org/display/DOCS/Durability+and+Repair)。请注意，他们说“如果您使用日记功能运行，则不应进行修复以恢复到一致的状态。” 所以如果你在写日记，修理可能会让事情变得更糟。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-07-04T07:16:31.380

尝试

```
sudo service mongodb start 
```

这解决了我的问题。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-10-06T21:19:45.173

**苹果系统**

如果你有 mac 并使用 mongodb4.4，你可以运行：

```
brew services start mongodb-community@4.4 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-07-14T07:10:32.190

检查您的文件系统可用空间，如果它更少，请增加它。这也可能导致 mongo 无法启动。检查 /var/log/mongodb/mongodb.log 文件。

```
ERROR: Insufficient free space for journal files
Please make at least 3379MB available in /var/lib/mongodb/journal or use --smallfiles 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-09-09T12:02:33.357

尝试运行`mongod`之前`mongo`。

`sudo /usr/sbin/mongod`在我的opensuse上

这解决了我的问题，

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-02-01T06:40:39.577

所以首先你必须通过以下命令删除 mongod.lock 文件

```
sudo rm /var/lib/mongodb/mongod.lock 
```

然后通过发出以下命令重新启动 mongo 服务

```
sudo service mongod restart 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-07-22T02:33:22.497

在 Windows 中`cmd`以管理员身份运行：

1.创建目录：

```
mkdir c:\mongo\data\db 
```

2.安装服务：

```
mongod.exe --install --logpath c:\mongo\logs --logappend --bind_ip 127.0.0.1 --dbpath c:\mongo\data\db --directoryperdb 
```

3.启动MongoDB：

```
net start MongoDB 
```

4.启动Mongo Shell：

```
c:\mongo\bin\mongo.exe 
```

这个解决方案对我有用。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-10-11T04:00:08.760

您可以检查`netstat -anp | grep 27017`以查看该端口是否正在被另一个进程使用。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-04-05T12:29:05.943

为了将来参考，请按照以下步骤避免类似错误：

***1.下载MondoDB*** [https://www.mongodb.com/](https://www.mongodb.com/)

***2.打开终端并 cd 进入您的下载***文件夹或保存 mondodb 下载的任何文件夹（确保在 cd 进入之前解压缩 mongodb 文件夹）

```
cd Downloads 
```

***3.将mongodb移动到你的usr/local路径***

```
sudo mv mongodb-osx-... /usr/local/mongodb 
```

***4.cd 进入本地文件夹***

```
cd /usr/local/mongodb 
```

***5.新建一个目录***

```
sudo mkdir -p /data/db 
```

***6.cd进入上面刚刚创建的新目录***

```
cd /data/db 
```

***7.give mongo 权限***

```
sudo chown YourMacUserName /data/db 
```

***8.然后去/打开你的 .bash_profile***

为此，请按照以下步骤操作：

在您的**新终端中**

**1** . `cd` **2** `.pwd` **3** .`ls -l`

检查 .bash_profile 是否出现在终端的文件列表中

***如果不创建 -bash_profile***

**创建 .bash_profile：**

在你的终端

触摸 .bash_profile

***//如果你已经有一个 .bash_profile 跳过这一步***

**第八步：**

接下来 **在您的终端中：**

```
open .bash_profile 
```

在弹出***的 bash 文件***中添加以下内容：

```
MONGO_PATH=/usr/local/mongodb
export PATH=$PATH:$MONGO_PATH/bin 
```

然后**保存**。（文件保存或命令 S/CMD+S）

Step9：回到你的**终端**：

```
source .bash_profile 
```

现在**打开两个终端**。一个将用于您的**mondo 守护程序**，另一个用于您的**mongo**。

***终端 1：*** 在您的终端类型中：mongod

```
mongodb 
```

**输出：** [![蒙戈码头](../Images/247846f31ac483a31e34aba59052e466.png)](https://i.stack.imgur.com/vdsr6.png)

***2号航站楼：***

```
mongo 
```

**输出：** [![蒙戈码头](../Images/6f658e3ba926066bfa783a5c440cf713.png)](https://i.stack.imgur.com/0YYqY.png)

还要确保在终端中启动 mongod 时不会出现以下拼写错误： **这是不正确的**

```
mongo d 
```

发出以下**错误**： **无法连接到 127.0.0.1:27017，在（轮询后检查套接字是否有错误），原因：连接被拒绝**

**这是对的：**

```
mongod 
```

*（mongo 和 d.. mondod*之间不应有空格

 *最后始终记住，**在终端上运行 mongo 之前必须运行 mondod**。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-03-29T19:10:58.963

第一次尝试：

```
sudo service mongod restart 
```

如果您收到错误：活动：失败（结果：退出代码）自 2021 年 3 月 29 日星期一 19:59:07 WEST 以来；3s

这可能是因为 /var/lib/mongodb 和 /tmp/mongodb-27017.lock 上的权限设置错误。您必须将所有者更改为 monogdb 用户

尝试：

```
chown -R mongodb:mongodb /var/lib/mongodb
chown mongodb:mongodb /tmp/mongodb-27017.sock

sudo service mongod restart 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-12-26T07:51:02.953

这对我有用：

```
sudo rm /var/lib/mongodb/mongod.lock    
sudo service mongodb restart 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-03-06T11:52:38.767

在终端中运行这些命令

1)

```
$ sudo service mongod start 
```

2)

```
 $ mongo 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-04-20T15:13:39.860

经过多次尝试，我终于解决了问题......

```
Step 1: ps aux | grep mongo
Step 2: sudo rm /var/lib/mongodb/mongod.lock
Step 3: sudo mongod --repair
Step 4: mongo 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-06-23T09:18:16.970

我遵循了[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat/)上的文档。

配置并重新启动后，我执行`sudo service mongod start`并得到了`... [FAILED]`.

最后，我发现`mongod`已经开始了。我认为将其`yum install`添加到自动启动中。

要检查您`mongod`是否正在运行：`service mongod status`.

希望这可以帮助有同样问题的人。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-01-28T19:53:26.050

此错误可能是由 MongoDB 的绑定 IP 设置引起的。您可以通过以下方式检查 MongoDB 的配置文件

```
$ sudo vi /etc/mongodb.conf 
```

在我的例子中，绑定 IP 设置为服务器的内网地址，如下所示：

```
bind_ip = 10.10.1.14 
#port = 27017 
```

所以我给了mongo一个IP参数来按类型连接到shell：

```
$ mongo 10.10.1.14 
```

如果您更改了配置，请不要忘记重新启动 mongodb 服务。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-02-13T14:57:41.867

我有 mongo 版本 3.2.1 并且必须从中删除锁定文件，`/data/db/`然后运行`mongod`并成功启动。

```
>rm /data/db/mongod.lock
>mongod 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-09-24T14:12:55.107

虽然收到了答案，但我希望讨论`MongoDB`.

![网络错误 MongoDB](../Images/fba9d1b1711efdd8b254815c72c11058.png)

设置安全写入关注点并不是确保我们安全的完整证明方法。假设设置了`w=1`& `j=true`，如果没有从服务器收到写确认怎么办？好吧，很可能是它没有发生，但它可能已经发生了。发生这种情况的原因是存在网络错误 - 我们可能无法收到肯定的响应。因此，我们可以通过选择语言的驱动程序从应用程序发送请求。`mongod`可以成功完成它，然后可能会有 TCP 重置，网络实际上可以以我们永远不会收到响应的方式重置。所以，我们可能会得到一个错误，并且在这个错误上，我们可能会假设我们得到了一个错误。它没有发生，但它可能会发生。

对于插入，可以防范它。这是可能的，因为如果我们让驱动程序创建`_id`并执行插入 - 那么我们可以多次执行该插入，这将是任何伤害。因为，如果我们第一次执行此^(操作)并收到错误，并且由于网络错误而不确定该插入是否完成，那么我们可以再次执行此操作。如果我们再次执行它，请使用exact 执行它`_id`。最坏的情况是当我们尝试插入它时会得到一个重复的键错误。

但是，更新是问题发生的地方。特别是，不是项目有效的更新，例如包含`$ink`命令。所以，我们告诉数据库增加某个字段。那么在这种情况下，如果我们遇到网络错误并且我们不知道更新是否发生。现在，也许我们对值有足够的了解，可以通过它们检查更新是否发生，这很好。但是如果我们不知道该字段在数据库中的起始值，那么我们就不可能知道它是否发生在网络错误的情况下。这种问题在网络良好的情况下极为罕见。

如果我们真的需要不惜一切代价避免它，我们需要做的是通过从数据库中读取文档的完整值然后可能删除它并再次插入它或者只是插入一个新的。

即使写入成功，应用程序也可能收到错误返回的原因：

*   应用程序和服务器之间的网络 TCP 连接在服务器收到写入后但在发送响应之前被重置。
*   服务器在`MongoDB`接收写入和响应之间终止。
*   网络在写入时间和客户端收到写入响应之间发生故障。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-09-08T11:40:15.060

在我的 Windows 操作系统的数据目录中删除 mongod.lock 后，它仍然显示相同的错误消息。我必须使用 --dbpath 运行 mongod 才能使 mongo 命令运行时没有错误。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-12-15T03:51:41.567

这对我有用要停止使用 mongodb：

```
use admin
db.shutdownServer() 
```

并重新启动：

```
sudo service mongod restart 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-01-12T07:54:19.513

我遇到了类似的错误，但根本原因不同。使用自制软件安装 mongodb 后。 [https://docs.mongodb.com/manual/installation/](https://docs.mongodb.com/manual/installation/) 在终端上给出“mongo”命令之前，我必须启动“mongod”服务。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-12-12T12:38:54.533

可能导致此错误的一件事是您的 MongoDb 服务器进程/服务没有运行。检查它是否正在运行，如果没有，那么您也可以尝试从任务管理器启动 MongoDb 服务器服务，如下图所示。

[![在此处输入图像描述](../Images/30d1db67507d966c6d12f0050047705d.png)](https://i.stack.imgur.com/eqtzD.png)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-10-09T17:20:33.297

键入**windows+r** 并输入以下内容

> 服务.msc
> 
> 启动 MongoDB

现在在 mongo.exe 所在的相应路径中的 cmd 中键入“mongo”，它将开始工作。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-07-19T06:24:54.720

1.在d盘D:/data/db新建文件夹

2.在 D:/data/db 上打开终端

3.键入mongod并输入。

4.键入mongo并输入。

而你的 mongodb 已经分层了............

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-09-19T13:31:05.153

刚从`mongod --repair`_`C:\Program Files\MongoDB\Server\4.0\bin`

这是文档[https://docs.mongodb.com/manual/tutorial/recover-data-following-unexpected-shutdown/](https://docs.mongodb.com/manual/tutorial/recover-data-following-unexpected-shutdown/)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-03-27T06:59:44.600

在环境变量中将 bin 添加到 PATH 有帮助。

转到安装路径并将 ../bin 复制到 Windows 环境变量中的 PATH 变量中

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-05-20T15:09:28.517

在本地数据库 mongo 连接到 127.0.0.1:27017 :: 时出错 :: Connection refused ：

尝试使用此命令

**mongod --config /usr/local/etc/mongod.conf --fork**

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-05-03T16:12:00.697

错误：无法连接到服务器 127.0.0.1:27017

这是 WINDOWS 用户在此处输入代码的解决方案 1\. 创建目录：

```
mkdir c:\mongo\data\db 
```

2.  安装服务：首先用cd进入MongoDB程序文件中的bin目录

`mongod.exe --install --logpath`

3.  启动 MongoDB：

    `net start MongoDB`

4.启动Mongo Shell：

```
`c:\mongo\bin\mongo.exe` or 
```

去直到 bin 并输入`mongo`

注意：在管理员模式下打开终端

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2020-03-25T11:13:01.520

如果您使用的是 OS X 系统，则没有`service`命令。所以你将无法执行`sudo service mongod start`.

检查此答案[https://unix.stackexchange.com/a/155746](https://unix.stackexchange.com/a/155746)以获得更多帮助！

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-07-05T20:50:34.593

这项工作是给我的。在 Linux Ubuntu 20 上

1.  sudo systemctl start mongod
2.  sudo systemctl daemon-reload
3.  sudo systemctl start mongod（再次是）
4.  sudo systemctl status mongod（检查 mongo 状态！）
5.  sudo systemctl 启用 mongod
6.  蒙哥

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-12-03T06:53:37.970

> 简单跑两点赞

```
sudo rm /var/lib/mongodb/mongod.lock
sudo mongod --repair 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-07-30T16:01:10.480

我屏蔽了我的 mongod 服务，我必须使用此命令将其删除。

> sudo systemctl unmask mongod

然后重启服务

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2020-07-28T11:35:01.737

示例解决方案 按Window+R 并键入services.msc 以查看机器上的所有服务然后找到MongoDBServer右键单击它并启动它。然后转到 C:\Program Files\MongoDB\Server\4.2\bin 并在命令提示符上键入 mongo。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2020-05-30T11:35:22.463

试试看嘛：

```
sudo service mongod restart 
```

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2020-05-24T19:56:37.330

Ubuntu 18.04LTS：当我完全卸载以前的版本并安装 4.2.6 时出现问题

经过小时的谷歌搜索，我解决了另一个问题

**MongoDB 无法启动 - ***在 fassert() 失败后中止**

**我对无法连接到服务器**的问题感到绝望，因为一切似乎都很好。

最后，我决定重新启动操作系统并猜猜是什么...... BINGO

```
sudo mongo // works like a charm 
```*

# php - 使用“optgroup”选项选择下拉 PHP foreach 循环

> ID：12831941
> 
> 赞同：3
> 
> 时间：2012-10-11T03:52:04.610
> 
> 标签：php, select, foreach, optgroup

我有一个带有 PHP 'foreach' 的下拉菜单，我循环通过它来填充选择选项。这很好用。但是，我想做的是使用“optgroup”选项拥有各种子标签。在我返回的数组中，我有一个“蓝色”、“绿色”和“红色”的“类型”。如何根据 $album['type'] 将选择选项分成几组？

这是我的代码：

```
$query = mysql_query("SELECT * FROM background_albums);
$albums = array();
while($row = mysql_fetch_assoc($query)) {
    array_push($albums, $row);
}

<select name="backgroundList" id="backgroundList">
  <? foreach($albums as $album) { ?>
    <option value="<?=($row['id']);?>"><?=$row['title'];?></option>
  <? } ?>
</select> 
```

这是我想在 foreach 循环中实现的那种事情：

```
if ($album['type'] == 'green')...

<optgroup label="Green Backgrounds">
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
</optgroup>

if ($album['type'] == 'blue')...

<optgroup label="Blue Backgrounds">
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
</optgroup> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T04:07:55.420

尝试

```
<select name="backgroundList" id="backgroundList">
<?php
$album_type = '';
foreach ($albums as $album) {
  if ($album_type != $album['type']) {
    if ($album_type != '') {
      echo '</optgroup>';
    }
    echo '<optgroup label="'.ucfirst($album['type']).' Backgrounds">';
  }
  echo '<option value="'.$album['id'].'">'.htmlspecialchars($album['title']).'</option>';
  $album_type = $album['type'];    
}
if ($album_type != '') {
  echo '</optgroup>';
}
?>
</select> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-07T13:35:11.883

在网上搜索了大量的各种帖子之后......然后进行了大量的试验和错误，我终于找到了一个效果很好的 optgroup 解决方案。

这段代码与 tagrin0 非常相似，但我想我会为它提供更多注释，以帮助其他可能想要清楚地了解如何使这项工作没有太多捏造和解释代码的新手。

希望它可以帮助某人。

**这是表结构...**

opt_id | grp_id | 选择名称 | grp名称 | 选择缩写...

```
echo '<select id="xxx" class="xxx"> select">';
echo '<option >Select an instance...</option>';

$dbc = mysqli_connect('localhost','xxx','xxx','xxx') or die('Error connecting to MySQL server.');

// run your query, something like
// "SELECT <optgroup>_ID, <option>_ID, <optgroup>_Name, <ption>_Name FROM [mysql table this data is stored in] ORDER BY groupID, optionID"

$select = "SELECT * FROM ci_opt ORDER BY grp_id, opt_id";

    $data  = @mysqli_query($dbc, $select) or die(mysql_error());

    // <optgroup> of the previous <option>
    $previous = "";

    // variable to set the first group
    $first_group = true;

    while($row = mysqli_fetch_array($data)) {

        // if this <option> changed <optgroup> from the previous one,
        // then add a new <optgroup>
        if ($row['grpName'] != $previous) {
            if (!$first_group) {
                echo '</optgroup>';
            } else {
                $first_group = false;
            }
            echo '<optgroup label="' . $row['grpName'] . '">';
            $previous = $row['grpName'];
        }

        // echo the current <option>
        // Note: I've also prepared the [onclick] for linking the select to an event

        echo '<option id="'. $row['optAbbrv'] .'" onclick="javascript:void()">' . ucwords($row['optName']) . '</option>';

    }
    // close the last <optgroup> tag
    echo '</optgroup>';
    // close the last <select> tag
    echo '</select>';
    // close the connection
    mysqli_close($dbc); 
```

// 结束 php

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T03:57:57.900

检查类型是否从以前的值更改，然后发出适当的标签。

按类型对查询进行排序：

```
$query = mysql_query("SELECT * FROM background_albums order by type"); //ordered query

[...]

$type = null;

foreach ($albums as $album) {
  if ($album['type'] != $type) {  // type changed
    if ($type !== null) {
      echo '</optgroup>';  // close previous optgroup
    }
    $type = $album['type'];
    echo '<optgroup label="' . htmlspecialchars($type) . '">';  // start optgroup
  }

  [...]
}

echo '</optgroup>';  // close last optgroup 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-13T10:19:28.263

此方法不需要对数组进行排序

```
<select>
    <?php
    <!--  getting the groups to be one unique array -->
    $group= array_values(array_unique(array_column($album, 'type')));
             for ($i=0; $i < count($group); $i++) : ?>
    <!--  for N group print  -->
    <optgroup label="<?=$album[$i];?>">
        <!-- loop trough the hole array to check if you belong to the group -->
        <?php foreach ($album as $value): ?>
        <!-- if you belong then we print -->
        <?php if ($group_level[$i]==$value['type']): ?>
        <option>
            <?=$value['type'];?>
        </option>
        <?php endif ?>
        <?php endforeach ?>
    </optgroup>
    <?php endfor ?>
</select> 
```

# facebook - Facebook、WordPress 和登录

> ID：12831943
> 
> 赞同：-1
> 
> 时间：2012-10-11T03:52:29.307
> 
> 标签：facebook, wordpress

我在[WordPress中制作的网站存在问题，我使用 Facebook](http://en.wikipedia.org/wiki/WordPress) [PHP](http://en.wikipedia.org/wiki/PHP) [SDK](http://en.wikipedia.org/wiki/Software_development_kit)进行了自定义 Facebook 登录，在另一个页面中我使用了 Facebook [JavaScript](http://en.wikipedia.org/wiki/JavaScript) SDK。但是，当我使用其标准登录名（而不是 Facebook 登录名）登录 WordPress 时，当我转到使用 JavaScript SDK 在墙上发帖的页面时，如果有人用另一台计算机登录到这台计算机帐户它连接到该帐户，因此我的解决方案是首先注销所有 Facebook 连接，然后当我转到该页面时，我将使用 JavaScript SDK 再次登录。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:20:28.860

请注意，使用[PHP](http://en.wikipedia.org/wiki/PHP) [SDK](http://en.wikipedia.org/wiki/Software_development_kit)和[JavaScript](http://en.wikipedia.org/wiki/JavaScript) SDK 登录是在不同的会话中。

我确实有一个集成了 PHP 和 JavaScript 登录的应用程序。我发现用户必须同时登录而不是仅使用 JavaScript 或 PHP 登录。

你可以看看`www.wootube.woolei.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:16:25.643

您可以使用任何 sdk 登录，您只需检查会话是否存在，这样您就可以知道用户是否使用 facebook 登录。每当出现问题时，您都可以在单独的会话中获取会话值，以便您可以在任何地方使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:52:06.563

您必须为此清除 Facebook 会话。

每当您创建 Facebook 对象时，它都会检查 Facebook 的会话。在 WordPress 登录中，它将显示 WordPress 用户登录详细信息，但是当您访问具有 Facebook SDK 代码的页面时，它会认为用户已经使用 Facebook 登录。

您可以根据自己的要求制定条件。要销毁会话，请使用[JavaScript](http://en.wikipedia.org/wiki/JavaScript) [SDK](http://en.wikipedia.org/wiki/Software_development_kit)或您正在使用的任何 SDK 的注销功能，然后它会要求您使用 Facebook 登录。

# ruby-on-rails-3.2 - 表单和分页中的 Turbolinks

> ID：12831950
> 
> 赞同：1
> 
> 时间：2012-10-11T03:53:10.600
> 
> 标签：ruby-on-rails-3.2, turbolinks

我想知道是否可以在搜索表单提交和/或 will_paginate 中使用 Turbolinks。

有人对如何使其工作有一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:50:42.420

是的你可以。

将 gem 和 js 添加到 application.js 中，它应该都能按预期工作。轨道魔法！与 will_paginate 一起使用，对 SEO 元素没有影响。

澄清一下，表单提交应该简单地重新更改（此时）。因此，您不会在那里获得性能提升，但行为会像以前一样工作并且不会中断。

# ruby-on-rails - 从数组中删除时删除 Column_names

> ID：12831952
> 
> 赞同：0
> 
> 时间：2012-10-11T03:53:48.883
> 
> 标签：ruby-on-rails, ruby

如果我做：

```
name_array = Model.column_names
name_array.delete_if {|name| ["id","created_at","updated_at"].include?(name)}
pp Model.column_names 
```

该命令将返回一个没有, &列名`Model.column_names`的数组。我的假设是删除名称而不是 Model.column_names 数组。`id``created_at``updated_at``name_array`

导轨 3.0.13 红宝石 1.9.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T04:01:27.857

请参阅[阵列文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_if)：`delete_if`

> 删除块计算为 true 的每个 self 元素。每次调用块时数组都会立即更改，而不是在迭代结束后更改。

因此，当您从中删除元素时`name_array`，实际上是在从中删除它们，`Model.column_names`因为它们指向同一事物。

如果您不想这样做，请在删除之前[复制数组](http://ruby-doc.org/core-1.9.3/Object.html#method-i-dup)：

```
name_array = Model.column_names.dup
name_array.delete_if {|name| ["id","created_at","updated_at"].include?(name)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T04:09:49.377

你也可以使用**拒绝**

```
a = [1,2,3]
a.reject{|x| x>=2}
=> [1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T05:23:53.007

Dup 可以提供帮助，但需要进行重组。dup 创建“浅拷贝”的事实，它具有以下不明显的后果：

```
> arr = Model.column_names.dup
=> ["id", "name", "klasse", "cars_count", "klasse_id"] 
> arr.delete('id')
=> "id" 
> arr
=> ["name", "klasse", "cars_count", "klasse_id"] 
> Model.column_names
=> ["id", "name", "klasse", "cars_count", "klasse_id"] 
> arr.each &:upcase!
=> ["NAME", "KLASSE", "CARS_COUNT", "KLASSE_ID"] 
> Model.column_names
=> ["id", "NAME", "KLASSE", "CARS_COUNT", "KLASSE_ID"] 
```

# java - 如何确定我的应用程序是通过单击应用程序还是单击文档启动的？

> ID：12831957
> 
> 赞同：1
> 
> 时间：2012-10-11T03:54:38.837
> 
> 标签：java, macos, deployment, installation, command-line-arguments

我有一个 Java 应用程序，它被部署为 Mac OS X 上的应用程序包。我修改了 info.plist 以注册我可以处理的文件类型，并使用 eAWT 来注册各种侦听器 ( `AppForegroundListener, AppReOpenedListener, OpenFilesHandler, OpenURIHandler, AppHiddenListener`)。

我的应用程序应按以下方式工作：

*   如果通过单击应用程序启动“新建文档向导”，则会引导用户创建新文档。
*   如果用户单击文档并使用“打开方式”，我的应用程序应该打开该文档而不是执行向导操作。

我的问题：

如何确定我的应用程序是通过单击文档还是应用程序启动的？

*   `args[]``main(String[] args)`无论应用程序如何启动，from始终为空
*   如果应用程序是通过单击文档启动的，则会调用我的侦听器。如果它是直接启动的，似乎不会调用任何事件 - 除非我弹出一些 GUI，否则应用程序将终止。
*   我可以使用不推荐使用的方法`addApplicationListener`。在这种情况下，我会收到一个*应用程序打开事件，但该事件在任何一种情况下都会在**打开文件*事件之前传递，因此也没有帮助。

# java - 字符串比较抛出 NullPointerException

> ID：12831958
> 
> 赞同：0
> 
> 时间：2012-10-11T03:54:43.170
> 
> 标签：java, arrays, string, comparison, nullpointerexception

`Strings`我有一个被调用的数组`letters`。当我尝试执行以下代码行时，我得到一个`NullPointerException`.

```
if(letters[j].equals(tmpst)) 
```

哪里`j`是任意索引小于长度`letters`

`tmpst`是一个这样定义的字符串：

```
char myChar = theWord.charAt(i);
String tmpst = String.valueOf(myChar); 
```

其中`theWord`是长度大于 4 的任意字符串。

完整的代码是：

```
for (int i = 0; i < theWord.length(); i++) { 
        for (int j = 0; j < letters.length; j++) { 

            char myChar = theWord.charAt(i);
            String tmpst = String.valueOf(myChar);

            if(letters[j].equals(tmpst)) { 
                System.out.println("YOU DIDIT!!! :D");
                newWord = newWord + theWord.charAt(i);
            }

        } 
```

有人可以看到我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:58:37.683

您的数组似乎包含一些空引用。你可以用`Arrays.toString(letters)`它来看看它是否属实。

如果您希望即使您的数组包含空值，您的比较仍然有效，您应该将代码更改为如下所示：

```
if(tmpst.equals(letters[j])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:02:29.553

如果表达式`letters.length`评估没有问题，`letters[j]`则为空，这是唯一的可能性。您不能在空引用上调用方法。

如果它是这样的，你应该写一些考虑这种情况的东西：

```
if (letters[j] != null && letters[j].equals(tmpst)) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:05:53.403

您需要了解其中的区别。
例如，有一个`String myString`.Now`myString == null`和 myString.equals("") 是两个不同的东西。
在使用之前`myString.equals("")`，您必须确保您的字符串已初始化且不为空。所以，你的这个错误是因为你的字符串对象在任何索引处都没有初始化。
尝试通过使用来检查它`myString == null`
随时询问您是否有任何歧义:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T07:03:58.907

先检查`!=null`，然后使用`.equals()`方法.....因为`null`不是字符串。所以不能使用用户`.equals()`方法

# entity-framework - DbContext.Entry attaching Entity

> ID：12831961
> 
> 赞同：6
> 
> 时间：2012-10-11T03:55:00.147
> 
> 标签：entity-framework, entity-framework-5, dbcontext

From my research, I read that calling DbContext.Entry(someEntity) would automatically attached the entity to the context.

However, when I do this I find that the entity's state is detached.

Can anyone shed some light on this and how the DbContect.Entry works. I'm using EF 5.0

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T03:57:47.737

If you're wanting to attach an object, what you actually want is [DbSet.Attach](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.attach%28v=vs.103%29.aspx). DbContext.Entry is only giving you information about the entity, and allows you to change the state if it's already been attached.

Here's a [good post](http://msdn.microsoft.com/en-US/data/jj592676) about entity states from MSDN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T12:17:11.837

Since the answer from @Mark Oreta isn't complete:

Following the [link](https://msdn.microsoft.com/en-US/data/jj592676 "MSDN Blog: Entity Framework Add and Attach and Entity States") he posted and reading the whole post revealed some different information: So DbContext.Entry(someEntity) actually is attaching the entity to the context if you set the correlating EntityState you need.

To attach a modified or added entity you could do:

```
using(var yourDbContext = new YourDbContext())
{
    yourDbContext.Entry(yourEntity).State =
        yourEntity.ID == 0 ?
            System.Data.Entity.EntityState.Added :
            System.Data.Entity.EntityState.Modified;
} 
```

To attach an unmodified entity you could do:

```
using(var yourDbContext = new YourDbContext())
{
    yourDbContext.Entry(yourEntity).State = System.Data.Entity.EntityState.Unchanged;
} 
```

# sql - sql查询以查找不同表中存在的子字符串

> ID：12831963
> 
> 赞同：1
> 
> 时间：2012-10-11T03:55:15.780
> 
> 标签：sql

```
Table "sub":
----------------------
sub_ser   ----->column name
----------------------
a1
a2                      
a3
a4
----------------------

Table "zvm"
--------------------------
vms_ser          ->column name
------------------------
a1,a2,a3          

a1,a2

a1 

---------------------- 
```

假设两个表只有一列。需要查询：从表“sub”中获取列“sub_ser”，其中包含所有条目的独立条目，这些条目组合排列，如表“zvm”所示。

例如：对于“zvm”表中的单个条目“a1,a2,a3”，我们需要检查 a1、a2 和 a3 中的每一个是否单独/独立地出现在“sub”表中希望你得到这个问题.. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:34:38.267

```
select distinct sub_ser
from sub
where sub_ser in (
select unnest(string_to_array(vms_ser, ',')) from zvm ) 
```

这将在 PostgreSql 数据库上运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:05:46.087

我认为你必须编写一个程序来完成它。看看[http://forums.mysql.com/read.php?60,78776,148332](http://forums.mysql.com/read.php?60,78776,148332)。使用类似的过程指定`,`为分隔符分别检索 a1、a2 和 a3，然后对表 1 进行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:18:02.627

首先，从“zvm”表中选择，然后从“子”表中单独选择，就像这样 -

```
select distinct sub_ser
from sub
where sub_ser in ('a1','a2','a3') 
```

# android - Galaxy S3 Android WebView 中的 Signal 11 SIGSEGV 崩溃

> ID：12831964
> 
> 赞同：26
> 
> 时间：2012-10-11T03:55:22.877
> 
> 标签：android, html, webview, segmentation-fault, galaxy

我在 Android WebView 中有一个复杂的交互式 HTML5 - 它基本上可以在除 Galaxy S3 之外的所有平台上正常工作。在 Galaxy S3 (Android 4.0.4) 上，每 5 次左右，就在加载完成后，/system/lib/libwebcore.so 尝试访问无效内存和位于 [各种地址的致命信号 11 (SIGSEGV) ] (code=1) 被抛出。

HTML5 是一场小型战斗，敌人出现，用户砍杀他们继续前进。在战斗之间是普通的 html 页面：普通页面 -> HTML5 战斗 -> 普通页面 -> HTML5 战斗 -> 普通页面 -> HTML5 战斗。HTML5 没有做任何特别开箱即用的事情 - 有很多 -webkit-animation 调用......

```
.enemy {
    position:absolute;
    opacity:0;
    -webkit-animation:enemyAnim 0.6s linear 0.2s;
} 
```

...引用了很多 -webkit-keyframes ...

```
@-webkit-keyframes enemyAnim {
from {
 -webkit-transform: matrix(1, 0, 0, 1, 144.25, 150.25) scale(1, 1);
 opacity:1;
}
8.33% {
 -webkit-transform: matrix(1, 0, 0, 1, 189.406, 102.206) scale(1.3066, 1.3066);
 opacity:1;
}
16.66% {
 -webkit-transform: matrix(1, 0, 0, 1, 200.424, 82.649) scale(1.414, 1.414);
 opacity:1;
}
/*…*/ 
```

还有一个相当复杂的 div 树，但没有什么特别的实验性。有一定程度的 Javascript，但即使关闭所有 Javascript 也会出现挂起。

有没有人遇到过 Galaxy S3 与众不同的问题？没有 Android 2.x 设备有这个问题，甚至运行 4.1.1 的 Galaxy Nexus 似乎也没有任何特别的问题。我以前从来没有想过写信给 Stack Overflow，但这真的让我很烦恼......

搜索“Android WebView sigsegv crash”和“4.0.4 WebView sigsegv crash”会出现几个问题，但是：

*   webview.clearCache()/webView.destroyDrawingCache() 似乎没有效果（尽管这个挂起显然是内存问题，在各个地方添加/删除 System.gc() 没有很好的结果） [SIGNAL 11 SIGSEGV crash安卓](https://stackoverflow.com/questions/4973310/signal-11-sigsegv-crash-android)

*   [在 Android 4.0.3 上的 Canvas 上](https://stackoverflow.com/questions/10989120/very-strange-crash-drawing-on-canvas-on-android-4-0-3-a-libc-fatal-signal-11)的 Strange crash drawing 中没有使用 canvas 。[A/libc：致命信号 11 (SIGSEGV)](https://stackoverflow.com/questions/10989120/very-strange-crash-drawing-on-canvas-on-android-4-0-3-a-libc-fatal-signal-11) （是的，我知道 - 调用此页面 HTML5 有点牵强）

*   [在 Webview.clearView () 多次执行 WebView.loadurl() 后](https://stackoverflow.com/questions/12261523/execute-webview-loadurl-after-webview-clearview-multitimes-will-cause-crash)没有使用 clearView () 会导致崩溃

*   [在http://code.google.com/p/android/issues/detail?id=16563](http://code.google.com/p/android/issues/detail?id=16563)中没有使用 preserve-3d

*   我查看了 android webkit 的更改列表，寻找 4.0.4 之后的可疑修复，并认为我有以下问题，但是将 S3 植根并将其带到 4.1.1 并没有解决问题： [https://github。 com/teamgummy/android_external_webkit/commit/61e0d189f2b74650bf72a6a2820f66a8b17c3d06](https://github.com/teamgummy/android_external_webkit/commit/61e0d189f2b74650bf72a6a2820f66a8b17c3d06)

由于一些崩溃是在内存释放（）期间发生的，我知道在崩溃发生时某些东西正在被释放，我的直觉是有些东西在渲染中被释放，这是不应该的。这令人沮丧，因为 SIGSEGV 在物理上应该是不可能使用纯 HTML、JS 和 CSS =/

下面是一个示例崩溃报告。请注意，崩溃位置不限于以下；崩溃报告似乎并没有太大的不同，但位置似乎有所不同。

```
10-08 17:34:06.605: I/DEBUG(524): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
10-08 17:34:06.605: I/DEBUG(524): Build fingerprint: 'samsung/m0xx/m0:4.0.4/IMM76D/I9300XXBLH1:user/release-keys'
10-08 17:34:06.605: I/DEBUG(524): pid: 7443, tid: 7443  >>> cool.tiny.rpg.battle <<<
10-08 17:34:06.605: I/DEBUG(524): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
10-08 17:34:06.605: I/DEBUG(524):  r0 deadbaad  r1 00000001  r2 40000000  r3 00000000
10-08 17:34:06.605: I/DEBUG(524):  r4 00000000  r5 00000027  r6 400d8540  r7 400e74f4
10-08 17:34:06.605: I/DEBUG(524):  r8 01fa7160  r9 00000000  10 bed6a584  fp 41d79970
10-08 17:34:06.605: I/DEBUG(524):  ip ffffffff  sp bed6a2b0  lr 400b9639  pc 400b59c8  cpsr 68000030
10-08 17:34:06.605: I/DEBUG(524):  d0  0000000000000000  d1  4343000000000000
10-08 17:34:06.605: I/DEBUG(524):  d2  43b6800041a00000  d3  41a8000043020000
10-08 17:34:06.610: I/DEBUG(524):  d4  8000000000000000  d5  43aa00003f800000
10-08 17:34:06.610: I/DEBUG(524):  d6  43a4000043430000  d7  43cb000041a00000
10-08 17:34:06.610: I/DEBUG(524):  d8  4082f00000000000  d9  4082f4000000025e
10-08 17:34:06.610: I/DEBUG(524):  d10 4460400000000500  d11 0000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d12 0000000000000000  d13 0000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d14 0000000000000000  d15 0000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d16 4076800000000000  d17 7e37e43c8800759c
10-08 17:34:06.610: I/DEBUG(524):  d18 0000000000000000  d19 0000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d20 3ff0000000000000  d21 8000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d22 0000000000000000  d23 0000000000000000
10-08 17:34:06.610: I/DEBUG(524):  d24 0000000000000000  d25 3ff0000000000000
10-08 17:34:06.610: I/DEBUG(524):  d26 4034000000000000  d27 3ff0000000000000
10-08 17:34:06.610: I/DEBUG(524):  d28 0000000000000000  d29 3ff0000000000000
10-08 17:34:06.610: I/DEBUG(524):  d30 0000000000000000  d31 3ff0000000000000
10-08 17:34:06.610: I/DEBUG(524):  scr 60000010
10-08 17:34:06.750: I/DEBUG(524):          #00  pc 000179c8  /system/lib/libc.so
10-08 17:34:06.750: I/DEBUG(524):          #01  pc 00013852  /system/lib/libc.so
10-08 17:34:06.750: I/DEBUG(524):          #02  pc 00015b90  /system/lib/libc.so (dlfree)
10-08 17:34:06.750: I/DEBUG(524):          #03  pc 00016208  /system/lib/libc.so (free)
10-08 17:34:06.750: I/DEBUG(524):          #04  pc 0010f79c  /system/lib/libwebcore.so (_Z6yyfreePvS_)
10-08 17:34:06.750: I/DEBUG(524):          #05  pc 0010ef70  /system/lib/libwebcore.so
10-08 17:34:06.750: I/DEBUG(524):          #06  pc 003ee8ec  /system/lib/libwebcore.so
10-08 17:34:06.755: I/DEBUG(524):          #07  pc 003eef44  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD1Ev)
10-08 17:34:06.755: I/DEBUG(524):          #08  pc 003eef84  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD0Ev)
10-08 17:34:06.755: I/DEBUG(524):          #09  pc 0019b2ca  /system/lib/libwebcore.so
10-08 17:34:06.755: I/DEBUG(524):          #10  pc 003ec6a0  /system/lib/libwebcore.so (_ZN5Layer14removeChildrenEv)
10-08 17:34:06.755: I/DEBUG(524):          #11  pc 003ec782  /system/lib/libwebcore.so (_ZN5LayerD2Ev)
10-08 17:34:06.760: I/DEBUG(524):          #12  pc 003eef70  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD1Ev)
10-08 17:34:06.760: I/DEBUG(524):          #13  pc 003eef84  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD0Ev)
10-08 17:34:06.760: I/DEBUG(524):          #14  pc 0019b2ca  /system/lib/libwebcore.so
10-08 17:34:06.760: I/DEBUG(524):          #15  pc 003ec6a0  /system/lib/libwebcore.so (_ZN5Layer14removeChildrenEv)
10-08 17:34:06.760: I/DEBUG(524):          #16  pc 003ec782  /system/lib/libwebcore.so (_ZN5LayerD2Ev)
10-08 17:34:06.760: I/DEBUG(524):          #17  pc 003eef70  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD1Ev)
10-08 17:34:06.760: I/DEBUG(524):          #18  pc 003eef84  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD0Ev)
10-08 17:34:06.760: I/DEBUG(524):          #19  pc 0019b2ca  /system/lib/libwebcore.so
10-08 17:34:06.760: I/DEBUG(524):          #20  pc 003ec6a0  /system/lib/libwebcore.so (_ZN5Layer14removeChildrenEv)
10-08 17:34:06.765: I/DEBUG(524):          #21  pc 003ec782  /system/lib/libwebcore.so (_ZN5LayerD2Ev)
10-08 17:34:06.765: I/DEBUG(524):          #22  pc 003eef70  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD1Ev)
10-08 17:34:06.765: I/DEBUG(524):          #23  pc 003eef84  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD0Ev)
10-08 17:34:06.765: I/DEBUG(524):          #24  pc 0019b2ca  /system/lib/libwebcore.so
10-08 17:34:06.765: I/DEBUG(524):          #25  pc 003ec6a0  /system/lib/libwebcore.so (_ZN5Layer14removeChildrenEv)
10-08 17:34:06.765: I/DEBUG(524):          #26  pc 003ec782  /system/lib/libwebcore.so (_ZN5LayerD2Ev)
10-08 17:34:06.765: I/DEBUG(524):          #27  pc 003eef70  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD1Ev)
10-08 17:34:06.765: I/DEBUG(524):          #28  pc 003eef84  /system/lib/libwebcore.so (_ZN7WebCore12LayerAndroidD0Ev)
10-08 17:34:06.770: I/DEBUG(524):          #29  pc 0019b2ca  /system/lib/libwebcore.so
10-08 17:34:06.770: I/DEBUG(524):          #30  pc 003ec6a0  /system/lib/libwebcore.so (_ZN5Layer14removeChildrenEv)
10-08 17:34:06.770: I/DEBUG(524):          #31  pc 003ec782  /system/lib/libwebcore.so (_ZN5LayerD2Ev)
10-08 17:34:06.770: I/DEBUG(524): memory map around addr deadbaad:
10-08 17:34:06.770: I/DEBUG(524): bed4a000-bed6b000 [stack]
10-08 17:34:06.770: I/DEBUG(524): (no map for address)
10-08 17:34:06.770: I/DEBUG(524): ffff0000-ffff1000 [vectors]
10-08 17:34:06.770: I/DEBUG(524): stack:
10-08 17:34:06.770: I/DEBUG(524):     bed6a270  00000001  
10-08 17:34:06.770: I/DEBUG(524):     bed6a274  bed6a2b0  [stack]
10-08 17:34:06.770: I/DEBUG(524):     bed6a278  400e2800  /system/lib/libc.so
10-08 17:34:06.770: I/DEBUG(524):     bed6a27c  0000000c  
10-08 17:34:06.770: I/DEBUG(524):     bed6a280  400e2794  /system/lib/libc.so
10-08 17:34:06.770: I/DEBUG(524):     bed6a284  400e7888  
10-08 17:34:06.770: I/DEBUG(524):     bed6a288  00000000  
10-08 17:34:06.770: I/DEBUG(524):     bed6a28c  400b9639  /system/lib/libc.so
10-08 17:34:06.770: I/DEBUG(524):     bed6a290  00000000  
10-08 17:34:06.770: I/DEBUG(524):     bed6a294  bed6a2c4  [stack]
10-08 17:34:06.770: I/DEBUG(524):     bed6a298  400d8540  /system/lib/libc.so
10-08 17:34:06.770: I/DEBUG(524):     bed6a29c  400e74f4  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2a0  01fa7160  [heap]
10-08 17:34:06.775: I/DEBUG(524):     bed6a2a4  400b87a5  /system/lib/libc.so
10-08 17:34:06.775: I/DEBUG(524):     bed6a2a8  df0027ad  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2ac  00000000  
10-08 17:34:06.775: I/DEBUG(524): #00 bed6a2b0  bed6a2ac  [stack]
10-08 17:34:06.775: I/DEBUG(524):     bed6a2b4  00000001  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2b8  400d8524  /system/lib/libc.so
10-08 17:34:06.775: I/DEBUG(524):     bed6a2bc  00000005  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2c0  bed6a2dc  [stack]
10-08 17:34:06.775: I/DEBUG(524):     bed6a2c4  fffffbdf  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2c8  bed6a2dc  [stack]
10-08 17:34:06.775: I/DEBUG(524):     bed6a2cc  bed6a2dc  [stack]
10-08 17:34:06.775: I/DEBUG(524):     bed6a2d0  400dbaac  /system/lib/libc.so
10-08 17:34:06.775: I/DEBUG(524):     bed6a2d4  400b1857  /system/lib/libc.so
10-08 17:34:06.775: I/DEBUG(524): #01 bed6a2d8  00000130  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2dc  20404040  
10-08 17:34:06.775: I/DEBUG(524):     bed6a2e0  524f4241  /dev/ashmem/dalvik-mark-stack (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2e4  474e4954  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2e8  4e49203a  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2ec  494c4156  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2f0  45482044  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2f4  41205041  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2f8  45524444  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a2fc  49205353  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.775: I/DEBUG(524):     bed6a300  6c64204e  
10-08 17:34:06.775: I/DEBUG(524):     bed6a304  65657266  
10-08 17:34:06.775: I/DEBUG(524):     bed6a308  01f86700  [heap]
10-08 17:34:06.775: I/DEBUG(524):     bed6a30c  406f6a2c  /system/lib/libskia.so
10-08 17:34:06.775: I/DEBUG(524):     bed6a310  406c4ecc  /system/lib/libskia.so
10-08 17:34:06.775: I/DEBUG(524):     bed6a314  3ff00000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a318  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a31c  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a320  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a324  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a328  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a32c  01c9aa08  [heap]
10-08 17:34:06.775: I/DEBUG(524):     bed6a330  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a334  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a338  00000000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a33c  3ff00000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a340  60d00000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a344  60e42ff0  
10-08 17:34:06.775: I/DEBUG(524):     bed6a348  014bb000  
10-08 17:34:06.775: I/DEBUG(524):     bed6a34c  400e74f4  
10-08 17:34:06.775: I/DEBUG(524):     bed6a350  01bc24b0  [heap]
10-08 17:34:06.775: I/DEBUG(524):     bed6a354  400e7550  
10-08 17:34:06.775: I/DEBUG(524):     bed6a358  01f74458  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a35c  400e7528  
10-08 17:34:06.780: I/DEBUG(524):     bed6a360  00000010  
10-08 17:34:06.780: I/DEBUG(524):     bed6a364  400e74f4  
10-08 17:34:06.780: I/DEBUG(524):     bed6a368  01f74460  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a36c  00000000  
10-08 17:34:06.780: I/DEBUG(524):     bed6a370  bed6a584  [stack]
10-08 17:34:06.780: I/DEBUG(524):     bed6a374  400b3ba9  /system/lib/libc.so
10-08 17:34:06.780: I/DEBUG(524):     bed6a378  0211c9a0  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a37c  020d499c  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a380  000097a0  /system/bin/app_process
10-08 17:34:06.780: I/DEBUG(524):     bed6a384  00004000  
10-08 17:34:06.780: I/DEBUG(524):     bed6a388  01d087b8  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a38c  400e7560  
10-08 17:34:06.780: I/DEBUG(524):     bed6a390  01dc6ef8  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a394  400e7528  
10-08 17:34:06.780: I/DEBUG(524):     bed6a398  01fd5378  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a39c  400e7580  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3a0  01ddafa8  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3a4  01ddb008  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3a8  01ed4568  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3ac  400e7580  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3b0  00000068  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3b4  400e74f4  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3b8  01ed4570  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3bc  00000014  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3c0  00000000  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3c4  400b3ba9  /system/lib/libc.so
10-08 17:34:06.780: I/DEBUG(524):     bed6a3c8  00000000  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3cc  01ae77d8  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3d0  01fa7160  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3d4  01fd7d2c  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3d8  00000009  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3dc  4dfa26b2  /dev/ashmem/dalvik-heap (deleted)
10-08 17:34:06.780: I/DEBUG(524):     bed6a3e0  01fa7158  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3e4  01fd7d2c  [heap]
10-08 17:34:06.780: I/DEBUG(524):     bed6a3e8  00000009  
10-08 17:34:06.780: I/DEBUG(524):     bed6a3ec  400b3b95  /system/lib/libc.so 
```

11月30日更新：

在将其缩小到一个简单的测试用例方面，我还有很长的路要走，但我已经将上述 SIGSEGV 复制到从普通 webview 应用程序加载的 2 个 HTML 页面。webview 只是启动并加载：

[http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/crash.html](http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/crash.html)

这些页面相互链接，不一定在第一次查看时崩溃，但最终它们在 Android 4.1.1 模拟器和我的 Galaxy Nexus (4.1.1) 上崩溃 100%。请注意，帖子标题是错误的 - 这肯定不仅仅是 S3。

有趣的是，
- 在我的真实应用程序中使用 webview，重复加载 1 个页面（crash.html 或任何繁重的 HTML5 页面）足以导致 SIGSEGV。
- 使用这个普通的 webview 应用程序进行测试，两个页面需要相互崩溃 - 只是重复加载 1 个页面不会死。
- 在 Android 4.1.1 网络浏览器中加载页面，即使 2 个页面也不够 - 它会死，但需要很多页面。

在错误位置方面，崩溃上有不同的堆栈跟踪，一些与样式表有关，另一些与 HTMLImageElement 的析构函数有关。Android 2.x、iOS、任何其他浏览器都坚如磐石。

Javascript 更改了 DOM，这似乎足以导致这里崩溃……但为什么呢？
乍一看，这让我觉得这是一个垃圾收集问题——我的应用程序会比普通的 webview 应用程序更早地进行垃圾收集，因为它在其他地方使用了更多内存。但是，我没有收到内存错误消息。我将继续努力缩小范围，但任何对如何进行或可能是什么问题有任何想法的人都会真正拥有我永恒不渝的感情。

测试应用代码：

[http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashApp.zip](http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashApp.zip)

测试应用APK：

[http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashApp.apk](http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashApp.apk)

所有 HTML 资源：　

[http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashHTMLPagFull.zip](http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/CrashHTMLPagFull.zip)

测试App的启动代码：

```
 public class MainActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);

    webView.setWebViewClient(new WebViewClient()); 
    webView.setWebChromeClient(new WebChromeClient()); 
    webView.loadUrl("http://static0.kl-uswest.ec2.gumi.sg/static/android4crash/crash.html");
}

 } 
```

2月3日更新：

该问题似乎是由于页面关闭时仍在制作动画的 webkit 动画造成的。我将一次崩溃缩小到一个“myblink”标签：

```
.myblink{-webkit-animation-name:"anime-blink";-webkit-animation-duration:1.2s;-webkit-animation-timing-function:ease-in-out;-webkit-animation-iteration-count:infinite}
@-webkit-keyframes "anime-blink"{0%{opacity:0}
20%{opacity:1}
60%{opacity:1}
100%{opacity:0}
} 
```

当且仅当文本页面使用“myblink”标签时，在文本页面和（无 CSS）画布页面之间循环的测试会崩溃。

我谦虚的假设是：

[活动 webkit 动画的解构器] + [同时加载大量下一页] + [时机不好] = [内存损坏]

我这样说是因为，我可能会遗漏一些东西，动画的内容似乎几乎无关紧要。我试过了：

*   使不透明度始终等于 1
*   用位置变换替换不透明度
*   关闭动画循环
*   将闪烁标签放在图片而不是文本上
*   玩弄关键帧

......但它总是会崩溃。唯一可以阻止崩溃的是关闭动画循环并缩短动画持续时间 - 即如果动画在页面关闭之前完成，崩溃将停止。

现在我已经通过将游戏内动画转换为完全基于画布的解决方案来解决游戏中的崩溃问题；^^ 我知道这很激烈。所以我暂时不会进一步调查，但我仍然很乐意将其缩小到特定的 webkit 源代码。

旁注：我想大声疾呼：

[https://www.codeaurora.org/forums/viewtopic.php?t=450](https://www.codeaurora.org/forums/viewtopic.php?t=450)

...这是相同的问题或非常相似的问题。

11月19日更新：

原来的服务器下线了，所以把上面的测试代码放到了Dropbox里：

[https://dl.dropboxusercontent.com/u/56202247/CrashApp.zip](https://dl.dropboxusercontent.com/u/56202247/CrashApp.zip) [https://dl.dropboxusercontent.com/u/56202247/CrashHTMLPagFull.zip](https://dl.dropboxusercontent.com/u/56202247/CrashHTMLPagFull.zip)

（请注意，CrashApp 应用程序中的 url 必须更改为放置 HTML 页面的任何位置）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T02:22:07.077

我在玩你的 crashApp。

使用设备；■ SHARP ISW16SH ■ LG 擎天柱 Vu L-06D（3~10 页后甚至无法生存）

这些是我经常遇到的错误。致命信号 11 (SIGSEGV) dlfree 中的堆内存损坏 dlmalloc 中的堆内存损坏

显然，存在内存分配或双重释放问题。这不是可以修复的。（除非 NDK）我发现的唯一解决方案是即时热交换 webview。始终在新创建的 web 视图中加载下一页将防止这种情况发生。但是，我似乎无法阻止记忆下降。最终，一旦你的应用成长为一个吃内存的怪物，Android 就会出击。

然后我开始玩两个相同的空活动类。没有 xml。所以，

```
onCreate() {
　　WebView wv = new WebView(context);
　　setContentView( wv );
}

void onDestroy() {
　　ViewGroup vg = (ViewGroup)game_wv.getParent();
　　vg.removeView(game_wv);
　　destroyWebView( game_wv );
　　game_wv = null;

　　super.onDestroy();
　　System.gc();　　//clean up what's freed in webViewLoadComplete (hopefully)
} 
```

我还在 onPageFinished 中调用了另一个 gc，以确保其他活动永远消失。

```
public final class WvClient extends WebViewClient {
　　public void onPageFinished(WebView wv, String url) {
　　　　webViewLoadComplete(game_wv);
　　　　System.gc();　　//clean up the other activity
　　}
} 
```

这是destroyWebView 和webViewLoadComplete。我不太确定某些函数（如 clearAnimation 或 clearDisappearingChildren）或调用的正确顺序是什么。我只是……把所有东西都扔进去了。哈

```
void destroyWebView( WebView wv ){
　　wv.stopLoading();
//　wv.pauseTimers();
　　wv.clearFormData();
　　wv.clearAnimation();
　　wv.clearDisappearingChildren();
　　wv.clearView();
//　wv.clearCache( true );
　　wv.clearHistory();
//　wv.clearMatches();
//　wv.clearSslPreferences();
　　wv.destroyDrawingCache();
　　wv.freeMemory();
　　wv.destroy();
}

void webViewLoadComplete( WebView wv ){
//　wv.stopLoading();
//　wv.pauseTimers();
//　wv.clearFormData();
　　wv.clearAnimation();
　　wv.clearDisappearingChildren();
//　wv.clearView();
////wv.clearCache( true );
//　wv.clearHistory();
////wv.clearMatches();
////wv.clearSslPreferences();
　　wv.destroyDrawingCache();
　　wv.freeMemory();
//　wv.destroy();
} 
```

不知何故，它奏效了……

认为最终的方法可能是使用 NDK？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-26T13:12:59.153

对于 RAM 容量较低的三星设备来说，这是一个长期存在的问题。没有解决办法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:15:19.907

我通过在 html 页面的 HEAD 中禁用格式检测解决了一些低级崩溃，包括 4.0.4 上的崩溃（这是由 Google 的一位朋友建议的）：

```
<meta name="format-detection" content="telephone=no" />
<meta name="format-detection" content="email=no" />
<meta name="format-detection" content="address=no"/> 
```

但是，4.1.1 更新使这些崩溃重新出现在 S3 上，这次我还没有找到解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T19:07:14.673

你不是唯一一个有这个问题的人，我一直在谷歌搜索，似乎和其他人一样[http://developer.samsung.com/forum/thread/why-would-webview-hang-with-galaxy- s3-only/77/181155](http://developer.samsung.com/forum/thread/why-would-webview-hang-with-galaxy-s3-only/77/181155)在 S3 的股票导航器上存在 html 5 的错误（在来自不同国家的不同 rom 上尝试过），我尝试的每个 S3 都崩溃了。尝试过镀铬，效果很好。我确定股票导航器上存在错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T15:57:31.583

[我一直在使用http://fgnass.github.io/spin.js/](http://fgnass.github.io/spin.js/)遇到这个问题（或至少非常相似）

当我把它从页面中取出时，没有问题。似乎也发生在 Android 4.0 和 4.1 但不是 4.3

除了解决它并找到除了 spin.js 微调器之外的其他东西之外，我们还没有找到解决方案。绝对看起来像一个Android问题。令我恼火的是，它似乎并没有更普遍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T16:37:45.120

个人经验：

我尝试了很多东西，比如不使用RelativeLayout，不在webview后面画很多东西，还有更多，正如许多关于这个SIGSEGV 11 Webview问题的StackOverflow帖子所解释的那样。

问题发生（仅？）在 4.1 Android 版本上。

什么对我有用：

*   我停止使用**由 RoundRectShape** “接近” WebView 制成的可绘制对象。也许硬件层和圆角之间有问题？
*   我停止**在 webview 上放置视图**（例如进度视图）。
*   我停止做任何会在 webview 工作时**重新计算布局的东西。**比如在我的屏幕上动态添加一个视图。

尽管如此，有时还是会由于其他原因导致崩溃，主要是在转到另一个活动并返回 WebView 时。在日志中，我可以看到类似“webcoreview: nativeDestroy”之类的内容，这可能意味着某些东西似乎被某人使用然后被某人使用。然后出现 SIGSEGV 11。

但至少，这种情况发生的频率要低得多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-11T09:36:14.007

附和我的情况，因为它有点不同但有相同的症状。我正在通过静态变量*跨设备旋转维护 WebView 实例，但我的错误是`WebView.restoreState`在不需要时调用该实例。

**错误代码：**

```
private static FrameLayout _rootView;
@InjectView(R.id.main_webview)
WebView _webView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    boolean inflatingNow = _rootView == null;
    if (inflatingNow) {
        Container.Log.d(TAG, "onCreateView: rootView null. Recreating views");
        _rootView = (ViewGroup) inflater.inflate(R.layout.fragment_main, container, false);
    }
    else {
        Container.Log.d(TAG, "onCreateView: reusing previousely created views");
        ViewHelper.detachFromParent(_rootView); // Detaching from old container 
    }
    ButterKnife.inject(this, _rootView); // Will assign the _webView variable

    if (inflatingNow) {
        configureWebView(_webView);
    }
    if (savedInstanceState != null) {
        _webView.restoreState(savedInstanceState);
    }
    return _rootView;
} 
```

**固定代码：**

```
private static FrameLayout _rootView;
@InjectView(R.id.main_webview)
WebView _webView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)  {
    boolean inflatingNow = _rootView == null;
    if (inflatingNow) {
        Container.Log.d(TAG, "onCreateView: rootView null. Recreating views");
        _rootView = (ViewGroup) inflater.inflate(R.layout.fragment_main, container, false);
    }
    else {
        Container.Log.d(TAG, "onCreateView: reusing previousely created views");
        ViewHelper.detachFromParent(_rootView); // Detaching from old container 
    }
    ButterKnife.inject(this, _rootView);

    if (inflatingNow) {
        configureWebView(_webView);
        if (savedInstanceState != null) {
            _webView.restoreState(savedInstanceState);
        }
    }
    return _rootView;
} 
```

*) 作为旁注，我认为这是减少设备旋转占用空间的好方法。额外的好处是 webview 在用户所在的位置保持滚动，不需要重新加载页面。请注意，这种方法意味着您在任何给定活动（单例）中一次只使用一个片段。

# c++ - 正则表达式匹配上的基于范围的for循环？

> ID：12831969
> 
> 赞同：4
> 
> 时间：2012-10-11T03:56:08.867
> 
> 标签：c++, c++11

在 C++11 的最终草案中，基于范围的 for 循环可以通过一对迭代器指定要迭代的范围。这使得迭代正则表达式的所有匹配变得容易。使用一对迭代器指定范围的功能后来被删除，并且在 C++11 中不存在。是否还有一种直接的方法来迭代特定正则表达式的所有匹配项？我希望能够做这样的事情：

```
std::regex begin(" 1?2?3?4* ");
std::regex end;

for(auto& match: std::pair(begin, end)) process(*match); 
```

C ++ 11中是否支持这种东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T04:19:39.020

这样做的问题`std::pair`在于它在很多不是有效范围的事情上“有效”。从而导致错误。

C++11 没有为此提供内置解决方案。您可以使用[Boost.Range 的`make_iterator_range`工具轻松构建一个](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)。再说一次，手动操作并不难：

```
template<typename T>
class IterRange
{
  T start;
  T end;
public:
  IterRange(const T &start_, const T &end_) : start(start_), end(end_) {}

  T begin() {return start;}
  T end() {return end;}
};

template<typename T> IterRange<T> make_range(const T &start, const T &end) {return IterRange<T>(start, end);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:27:32.930

您仍然可以使用一对迭代器来指定要迭代的序列。该语句`for(a: c)`本质上是遍历序列`[begin(c), end(c))`。因此，您需要做的就是使用一个`match_results`对象或提供合适`begin`的`end`函数来返回正则表达式迭代器类型之一。

# javascript - 用于离线和预生产的骨干样板路由器的根

> ID：12831973
> 
> 赞同：0
> 
> 时间：2012-10-11T03:56:40.617
> 
> 标签：javascript, html, model-view-controller, backbone.js

我在这里使用主干样板 [https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)

我在静态 html/js 中进行离线开发，并在在线上传到另一个**预生产**站点之前进行离线测试。令我恼火的是路由器在**预生产**中工作但不能离线。这是`root`用于预：

```
 var app = {
    // The root path to run the application.
    root: "/myfolder/"
  }; 
```

这是在线**预制作**的网址：

```
http://www.mywebsite.com/myfolder/index.html 
```

这是离线网址：

```
file:///C:/Users/MyHome/Desktop/MyProject/MyApp/index.html 
```

`root`离线有什么用？有没有办法在`root`我每次上传到预制作时都保持不变？或者路由器根本不能在静态 html 中工作？

ps 这是**main.js中的代码**

```
Backbone.history.start({ pushState: true, root: app.root }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:26:07.387

没关系。做了一些阅读后，pushState 不适用于文件协议

[https://github.com/mtrpcic/pathjs](https://github.com/mtrpcic/pathjs)

[http://html5doctor.com/history-api/](http://html5doctor.com/history-api/)

HTML5 Mozilla 文档并没有说明这一点。

# extjs - extjs 4 中的超薄滚动条

> ID：12831975
> 
> 赞同：0
> 
> 时间：2012-10-11T03:57:21.340
> 
> 标签：extjs, scrollbar, extjs4.1, extjs-mvc

我正在用 extjs 4 mvc 开发一个应用程序。我的滚动条有问题。我的 extjs 组件都没有呈现纤细的滚动条。所有组件只呈现一个丑陋的浏览器滚动条。

```
Ext.define('Complaints.view.ComplaintGrid',{
    extend: 'Ext.grid.Panel',
    alias: 'widget.complaintgrid',
    id: 'complaintGrid',
    cls: 'custom-complaint-grid',   
    store: 'Complaints',

    columns :
    [
        {header: 'Date', dataIndex: 'Date', width: 200},
        {header: 'Data 1', dataIndex: 'data1', width: 200},
        {header: 'Data 2', dataIndex: 'data2', flex: 1},
        {header: 'Complaint', dataIndex: 'Complaint', width: 150},              
    ]   
}) 
```

这是我的应用程序中的一个网格面板的代码。这有两个问题。

1.  垂直滚动条不是纤细的滚动条
2.  出现不必要的水平滚动条

我已将此网格放入容器中。代码如下。

```
Ext.define('Complaints.view.CenterPanel',{
    extend: 'Ext.panel.Panel',
    alias: 'widget.centerpanel',
    cls: 'custom-complaint-grid',
    id: 'centerPan',
    bodyStyle: "padding-left: 20px; padding-top: 10px; padding-right: 15px; background-color:#fff",
    layout: 'card',
    requires: [        
        'Complaints.view.ComplaintGrid', 
        'Complaints.view.ComplaintChart'
    ],
    initComponent: function(){       
        this.tbar = [{height: 50},'->',
            {
                    xtype: 'component',
                    cls: 'topDockTwoBtn',
                    width: 107,
                    height: 40
            },      
            {
                    xtype: 'component',
                    cls: 'topDockSixtyBtn',
                    width: 103,
                    height: 40,                    
            },
            {
                    xtype: 'component',
                    cls: 'topDockOneBtn',
                    width: 105,
                    height: 40
            },
            {
                    xtype: 'component', 
                    cls: 'topDockSrchBtn',
                    width: 72,
                    height: 40
            }
        ];

        this.items = [
            {
                xtype: 'complaintgrid'
            },
            {
                xtype: 'complaintchart'
            }
        ];

        this.bbar = [{height: 50},'->',
            {
                xtype: 'image',
                cls: 'btmDockChrtBtn',
                id: 'chartbutton',
                width: 53,
                height: 40,
                listeners: {
                    el: {
                        click: function() {
                            console.log('click reg');
                            Ext.getCmp('centerPan').getLayout().setActiveItem(1);
Ext.getCmp('centerPan').doLayout();
                            Ext.getCmp('chartbutton').addClass('btmDockChrtBtn-active');
                            Ext.getCmp('gridbutton').removeCls('btmDockGrdBtn-active');
                        }
                    }
                }
            },
            {
                xtype: 'component', 
                cls: 'btmDockGrdBtn',
                width: 58,
                height: 40,
                id: 'gridbutton',
                listeners: {
                    el: {
                        click: function() {
                            console.log('click reg');
                            Ext.getCmp('centerPan').getLayout().setActiveItem(0);
Ext.getCmp('centerPan').doLayout();
                            Ext.getCmp('gridbutton').addClass('btmDockGrdBtn-active');
                            Ext.getCmp('chartbutton').removeCls('btmDockChrtBtn-active');                       
                        }
                    }
                }
            }                
        ];                              
        this.callParent();
    }   
}) 
```

我也玩过 CSS 并覆盖了网格面板的一些类，使其看起来像我想要的那样。任何想法为什么我得到一个水平滚动条而不是在垂直方向得到一个细长的条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:44:01.083

您必须使用 jScrollPane 或 fleXcroll：跨浏览器自定义滚动条。

# javascript - DOM 操纵。一次所有更改

> ID：12831976
> 
> 赞同：1
> 
> 时间：2012-10-11T03:57:34.187
> 
> 标签：javascript, jquery

我有一个我写的简单模块。目的是在页面上使用某个类名下的任何 url 创建链接

下面是完成所有脏活的主要功能

```
generateLinks: function(){
    $('.link-gen').each(function(index, item){
        var replace = $(item).html().replace(_regEx, _linkMarkUp);
        $(item).html(replace);
    });
} 
```

我的理解是我应该尝试一次应用所有 dom 更改，这样我就不需要不断访问 dom。如果我可能要修改页面上的许多不同链接，我将如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:33:38.287

我会尽量回答你的问题的细节。

如果您需要修改页面中的 N 个单独元素，您的选择是：

1.  获取包含所有 N 个单独元素的 HTML 的公共父级的 HTML，并在 RAW HTML 上使用某种搜索和替换来查找每个目标元素中要更改的部分。然后将更改后的 HTML 设置回公共父级。

2.  对整个 HTML 正文执行与上述步骤相同的操作。

3.  在 DOM 中找到您需要修改的每个对象并直接更改其 HTML（就像您当前的代码一样）。

虽然选项 1 和 2 较少 DOM 操作，但它们通常是一种不好的处理方式，因为您要求浏览器做大量繁重的工作，丢弃大量现有的 DOM 对象，再次从头解析原始 HTML，然后创建大量新的 DOM 对象。这还具有清除该 HTML 中所有现有事件处理程序的副作用（因为它们都是新的 DOM 对象）。所以在大多数情况下不推荐使用 1 和 2。

这给您留下了选项 3，这就是您已经在做的事情。要修改 N 个单独的对象，请使用 N 个 DOM 操作 - 每个对象一个。

* * *

我怀疑您阅读的评论是为了解决这样的问题（很多 DOM 操作，但都在一个对象上）：

```
var item = $("#foo");
for (var i = 0; i < collection.length; i++) {
    item.html(item.html() + "<br"> + collection[i]);
} 
```

当这样的事情会好很多时（一个 DOM 操作）：

```
var item = $("#foo");
var newText = "";
for (var i = 0; i < collection.length; i++) {
    newText += "<br"> + collection[i];
}
item.html(item.html() + newText); 
```

# c# - 如何加快 Winforms ListView 项目的删除？

> ID：12831979
> 
> 赞同：4
> 
> 时间：2012-10-11T03:57:42.223
> 
> 标签：c#, .net, winforms, performance, listview

我已经使用`listView.BeginUpdate()`and `listView.EndUpdate()`，但是当我删除例如 25k 中的 100 个项目时，仍然需要大约 10 秒。

有什么想法和技巧可以让它更快吗？

编辑：

```
this.listView.BeginUpdate();
for (int i = this.listView.CheckedItems.Count - 1; i > -1; --i)
{
    this.listView.CheckedItems[i].Remove();
}
this.listView.EndUpdate(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:35:50.717

您可以从这里开始优化：

```
List<int> toRemove = new List<int>();

foreach (ListViewItem item in this.listView.Items)
{
    if (item.Checked) // check other remove conditions here
        toRemove.Add(item.Index);
}

/* sort indices descending, so you'll remove items with higher indices first
   and they will not be shifted when you remove items with lower indices */
toRemove.Sort((x, y) => y.CompareTo(x));
/* in this specific case you can simply use toRemove.Reverse(); 
   or iterate thru toRemove in reverse order
   because it is already sorted ascending.
   But you might want to force sort it descending in some other cases.
*/

this.listView.BeginUpdate();

foreach (int itemIndex in toRemove)
    this.listView.Items.RemoveAt(itemIndex); // use RemoveAt when possible. It's much faster with large collections

this.listView.EndUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:38:24.063

这是因为每次从 Items 中删除元素时，ListView 都必须找到该项目（[遍历列表来这样做](http://fiddler2.com/blog/blog/2013/05/08/building-a-faster-fiddler-with-justtrace-and-justdecompile)）并刷新 CheckedItems 集合（再次迭代所有剩余的项目），因此复杂度为 O^2。

最简单的方法是缓存 SelectedIndices 并使用 listItem.Items.RemoveAt()：

```
var selectedIndices = listView.SelectedIndices.Cast<int>().Reverse().ToList();
listView.BeginUpdate();
foreach (var index in selectedIndices) {
    listView.Items.RemoveAt(index);
}
listView.EndUpdate(); 
```

如果您不想使用 Cast<> 扩展方法，可以将第一行替换为：

```
List<int> oToDelete = new List<int>(SelectedIndices.Count);
foreach (int iX in SelectedIndices)
{
   oToDelete.Add(iX);
}
oToDelete.Reverse(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:53:10.760

ListView 将为从列表中删除的每个项目触发一个事件。您可以尝试通过清除整个 ListView 来避免这种情况，然后立即添加一个新的项目列表，该列表会删除您想要删除的 100 个项目。这只会触发少数事件。

# ios - UIScrollView - 动态加载图像，如何在滚动视图中重新加载更多图像？

> ID：12831987
> 
> 赞同：0
> 
> 时间：2012-10-11T03:58:36.257
> 
> 标签：ios, uiscrollview

`UIScrollView`通过动态加载图像，当滚动结束页面时，如何重新加载`UIScrollView`并将更多新图像加载到此滚动视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:26:55.533

我使用 GMGridView [https://github.com/gmoledina/GMGridView](https://github.com/gmoledina/GMGridView) GMGridView 是 UIScrollView 的子类，可以像 UITableView 重新加载一样动态加载图像。

# ruby - 如果文档在 bash 或 ruby 中为空白，请检查 PDF

> ID：12831990
> 
> 赞同：1
> 
> 时间：2012-10-11T03:58:41.027
> 
> 标签：ruby, bash, pdf

我正在尝试将几个 pdf 文件合并到一页中。我正在使用 ghostcript 合并所有这些，但是当我将一个与空白页合并时出现问题。所以我必须检查每一个是否有空白的 pdf 文档。有没有办法用标准的 bash shell 或 Ruby 语言来做到这一点？

我正在使用 pdffonts 来确定 pdf 是否为空白。我正在使用命令：

> pdffonts 00001.pdf

如果 pdf 为空白，则结果为：

```
name                                type              emb sub uni object ID

------------------------------------ ----------------- --- --- --- --------- 
```

如果 pdf 不为空白，则结果为

```
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
Helvetica                            Type 1            no  no  no       6  0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:53:26.347

我对 bash 编程知之甚少，但编写一个程序似乎可行移动到一个名为 blank_pdfs 的目录。

以下是如何计算 bash 中程序返回的行数。

[同时捕获输出行数和返回代码](https://stackoverflow.com/questions/9623801/capture-number-of-lines-of-output-and-return-code-simultaneously)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:36:35.327

`gs -sDEVICE=bbox`将为您提供文件/页面的最小边界框。对于空页面，它应该*非常小。*

# java - 如何随机化除黑色以外的颜色？

> ID：12831993
> 
> 赞同：0
> 
> 时间：2012-10-11T03:59:26.080
> 
> 标签：java, random, colors

此行
`g.setColor(new Color(numGen.nextInt(256), numGen.nextInt(256), numGen.nextInt(256)));`
生成随机颜色，但出于某种原因我不想在其中包含黑色。我是否可以限制值，例如，仅 80-256 以排除深色。我试过`Math.random`做模，但它不起作用。请帮我。非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:08:00.830

如果您希望将数字随机化在较小的范围内并添加偏移量。

```
private int randomBetween(int min, int max) {
    int range = max - min;
    return min + numGen.nextInt(range);
}

...

g.setColor(new Color(randomBetween(80,256), randomBetween(80,256), randomBetween(80,256))); 
```

这假设您需要每个颜色分量的最小强度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:03:09.323

```
g.setColor(
  new Color(127 + numGen.nextInt(128), 
  new Color(127 + numGen.nextInt(128), 
  new Color(127 + numGen.nextInt(128)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T04:15:26.373

生成 80-256 之间的数字：

css..

```
table {
    font: 11px/24px Verdana, Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    width: 320px;
    }

td {
    border: 1px solid #CCC;
    padding: 0 0.5em;
    } 
```

html....

```
<head>        
</head>
<body>
    <div id='mydiv'></div>
    <button id = "myRandomizeBtn">Randomize</button> 
</body> 
```

javascript...

```
$("#myRandomizeBtn").bind("click",randomizeHandler); 

function randomizeHandler(evt){     
var root=document.getElementById('mydiv');
var tab=document.createElement('table');
tab.className="mytable";
var tbo=document.createElement('tbody');
var row, cell;
var n = 3;  
var data;    

for (i=0; i<n; i++)
{
    row=document.createElement('tr');
    for(var j=0;j<n;j++){
        cell=document.createElement('td');
        data = Math.floor(80+(176*Math.random())); 
        cell.appendChild(document.createTextNode(data));
        row.appendChild(cell);
    }
    tbo.appendChild(row);
}
tab.appendChild(tbo);
root.appendChild(tab);
   } 
```

这是 jsfiddle 的链接......希望它有帮助...... [http://jsfiddle.net/FhyHK/](http://jsfiddle.net/FhyHK/)

# jquery - 我应该将 jQuery 选择器组合到变量中以获得更好的性能吗？

> ID：12831995
> 
> 赞同：0
> 
> 时间：2012-10-11T03:59:32.863
> 
> 标签：jquery, performance, variables, jquery-selectors

> **可能重复：**
> [使用 $this 代替 $(this) 是否提供了性能增强？](https://stackoverflow.com/questions/5724400/does-using-this-instead-of-this-provide-a-performance-enhancement)

所以我正在创建一个像画廊一样占据整个屏幕的剧院，我根据窗口大小更改 div 和图像的大小。为此，我一直在使用：

```
function setSizes()
{
var theaterHeight = $(".theater-wrapper").height();
var theaterWidth = $(".theater-wrapper").width();
}

$(window).on("resize", window, function() {
        setSizes();
    }); 
```

这基本上就是我正在做的选择元素以获取尺寸以设置高度和宽度等，但是窗口调整大小确实有点滞后，我最终有很多选择器并更改了很多 div和图像都在这个函数中，有时初始调用也不能正常工作，反之亦然。所以我的问题是组合选择器会带来更好的性能吗？

像：

```
var $theaterWrapper = $(".theater-wrapper");

var theaterHeight = $theaterWrapper.height();
var theaterWidth = $theaterWrapper.width(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:03:06.043

显然确实如此，因为在后一种情况下，您遍历 DOM 的**时间少**了一次。

如果您使用的选择器是静态选择器，则保存并存储选择器始终是更好的选择...

它还导致代码更小更精简。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:07:48.867

这是一个 JSPerf，您可以按原样使用或修改以更接近您的具体情况：

[http://jsperf.com/combined-jquery-selectors](http://jsperf.com/combined-jquery-selectors)

在我的浏览器（Mac 上的 Chrome）中，您的原始版本运行速度比您建议的优化慢约 4%。在我使用 Safari 的 iPhone 上，它慢了大约 6%。但在我 Mac 上的 Firefox 上，相差 14%。

所以看起来你提出的改进实际上更好。