# StackOverflow 问答 14139000-14139999

# powershell - 如何在 PowerShell 中读取多行多字符串注册表项？

> ID：14139000
> 
> 赞同：3
> 
> 时间：2013-01-03T12:30:58.190
> 
> 标签：powershell, cmdlets

我正在尝试读取“-Dhttp.port”值，但没有运气。

正如您在附图中看到的那样，“选项”是一个子键，我可以使用以下代码段读取“选项”（虽然这也显示了不必要的 PowerShell 项目）

```
Get-ItemProperty $PATH -Name "Options" 
```

现在从多行“选项”中，我想读取特定子键“-Dhttp.port”的值，这里是 80

![在此处输入图像描述](../Images/68ad106d19a0bb27fef61544ff4f7e52.png)

Get-ItemProperty $PATH -Name "Options" 的输出是

![在此处输入图像描述](../Images/5b5f05bd8df23eb454071614fe07ee74.png)

我只想读取“选项”，并从选项键中读取“-Dhttp.port”的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T13:24:41.100

```
PS>( Get-ItemProperty $PATH |select -ExpandProperty Options|where {$_ -match "-Dhttp.port"}).split("=")[1] 
```

# java - 将 Excel 工作表字段值设置为对象并保存

> ID：14139007
> 
> 赞同：0
> 
> 时间：2013-01-03T12:31:14.680
> 
> 标签：java

我的任务是阅读一个 excel 表并创建对象并将其保存到 MongoDb 中。使用 JAVA

我的班级结构

```
public class emp {

    private int empNo;
    private String empName;
    private double  EmpSalary;  
    private Address address;
            <consider setter  and getter>
}

class Address {

    private  String city;
   <consider setter  and getter>

} 
```

我的 Excel 工作表结构是

```
EmpId    EmpName    EmpSalary    City
   10    Nitesh     15000        Nanded 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:37:53.763

您可以尝试 JExcelAPI ：

*   [主页](http://jexcelapi.sourceforge.net/)
*   [教程](http://www.andykhan.com/jexcelapi/tutorial.html)
*   [支持](http://tech.groups.yahoo.com/group/JExcelApi/)
*   [Sourceforge 页面](http://sourceforge.net/projects/jexcelapi/)

请注意，它看起来不再维护，因为上一个版本 (2.6.12) 发布于 2009 年 10 月 26 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:39:09.920

我正在使用 JExcelApi。我加载文件，获取它的字节流（.getBytes（）），然后：

```
 ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(byteStream);
    Workbook w;
    try {
        w = Workbook.getWorkbook(byteArrayInputStream);
        // Get the first sheet
        Sheet sheet = w.getSheet(0);
    ...
    //example of getting sheet cell
    sheet.getCell(x,y).getContents(); 
```

# postgresql - 无法使用 MD5 方法从主机连接到在 VM 上运行的 Postgres

> ID：14139017
> 
> 赞同：11
> 
> 时间：2013-01-03T12:31:31.777
> 
> 标签：postgresql, postgresql-9.1, vagrant

我有一个使用 Vagrant 设置的 VM，上面运行 Postgres（在端口 5432 上），转发到主机上的端口 8280。

我已经为默认用户设置了密码，我可以在本地连接就好了。

我一直在尝试通过端口 8280 设置从主机的访问权限，但我无法让它使用“MD5”作为信任方法。

我已设置`postgresql.conf`监听所有地址：

```
# postgresql.conf
listen_addresses = '*' 
```

我配置`pg_hab.conf`如下：

```
# pg_hab.conf
#TYPE   DATABASE  USER  CIDR-ADDRESS  METHOD
host    all       all   0.0.0.0/0     md5 
```

使用所有这些设置，如果我从主机运行以下命令：

```
psql --host=127.0.0.1 --port=8280 --username=postgres -d mydb -c '\l' 
```

系统提示我输入密码，然后我得到：

```
psql: FATAL:  password authentication failed for user "postgres" 
```

如果我随后将 METHOD 从“md5”更改为“信任”，则不会要求我输入密码，并且可以按预期连接。我的问题是 - 为什么我不能使用“md5”连接，这是我想要做的？我知道我输入的密码是正确的（我已经更改了它），但由于某种原因它不起作用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-10T17:01:49.637

我有同样的问题。问题出在主机端，基本上防火墙阻止了我使用的端口。所以这就是我所做的（我正在使用 OSX Mavericks）

1.  打开端口（主机）

    `sudo ipfw add 7000 allow tcp from any to any dst-port 7001`

2.  修改 Vagrantfile 以允许端口转发

    `config.vm.network "forwarded_port", guest: 5432, host: 7001`

3.  编辑 postgresql.conf（来宾）

    `listen_addresses = '*'`

4.  编辑`pg_hba.conf`（您可能想要更好地调整它）

    `host all all 0.0.0.0/0 md5`

5.  现在，使用端口（在我的情况下为 7001）和“localhost”作为主机地址从主机正常连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:14:18.740

您需要为`postgres`用户设置密码。它默认没有一个，因此您无法连接。

```
ALTER USER postgres PASSWORD 'somepassword'; 
```

您的本地连接可能有效，因为它们使用带有`peer`身份验证的 unix 套接字，而不是 TCP/IP。如果您使用：

```
psql -h 127.0.0.1 -U postgres postgres 
```

在 VM 上，您可能会发现这也失败了，因为您现在实际上是在测试基于 TCP/IP 的连接。

# c# - Entity Framework Include 是否需要 .First()？

> ID：14139018
> 
> 赞同：-1
> 
> 时间：2013-01-03T12:31:36.230
> 
> 标签：c#, entity-framework, linq-to-entities

在创建上下文时设置预加载时，`Include`在 EF 中使用的许多示例如下所示（给定两个相关实体，称为 Resources 和 Variations）：

```
var context = new MyContext();
context.Resources.Include(x => x.Variations).First();
return context; 
```

但其他人不会：

`context.Resources.Include(x => x.Variations);`

只有前者似乎对我有用，但我找不到任何解释为什么需要它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:30:51.637

```
context.Resources.Include(x => x.Variations); 
```

构造一个查询，该查询在执行时会加载所有资源及其变体。然后您丢弃该查询。从不执行查询意味着您不会得到查询的结果，也不会得到执行该查询的副作用。

您可以对资源做一些事情：

```
foreach (var resource in context.Resources.Include(x => x.Variations))
{
    /* ... */
} 
```

或者，如果您只想让对象出现在您的上下文中，

```
using System.Data.Entity;

context.Resources.Include(x => x.Variations).Load(); 
```

据我所知，没有办法设置上下文，以便`.Include`在构造查询时始终隐式执行的效果。您需要将其包含在每个查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:47:32.597

当你这样做

```
context.Resources.Include(x => x.Variations); 
```

你得到一个资源对象的列表。using`.First()`将为您提供该资源列表中的第一个资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:48:01.277

**简而言之：**称为不同实体**加载的**效果。在 Entity Framework 中，有三种加载方式：惰性加载、显式加载和急切加载方法，您可以从中选择，并在代码中相应地使用它们。

换句话说，Entity Framework 支持三种加载相关实体的方式：

*   急切加载
*   延迟加载
*   显式加载

本文详细讨论了上面显示的这三种技术 -[**加载相关实体**](http://msdn.microsoft.com/en-us/data/jj574232.aspx)。

您下面的代码片段正在使用热切加载：

```
context.Resources.Include(x => x.Variations).First(); 
```

> 只有前者似乎对我有用，但我找不到任何解释为什么需要它？

后面的代码片段（没有 的那个`.First()`）对你不起作用，因为相关实体的加载可以使用**急切加载**（参见上面的急切加载相关实体）或**Load 方法**来实现：

```
context.Resources.Include(x => x.Variations).Load();
// or a sample like
// Load the posts related to a given blog
context.Entry(blog).Collection(p => p.Posts).Load(); 
```

**编辑：**如果由于某种原因您对延迟加载感到困惑，那么您可以使用该选项**在 context 中将其关闭**。

```
public MyContext()
    {
        this.Configuration.LazyLoadingEnabled = false;
    } 
```

# jakarta-ee - 消息存储在主题中

> ID：14139020
> 
> 赞同：1
> 
> 时间：2013-01-03T12:31:46.083
> 
> 标签：jakarta-ee, jms, jms-topic

在JMS中，QUEUE的情况下，消息是按FIFO的方式存储的。但是Topic的情况下，消息是如何存储的？是否以 FIFO aur 任何其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:05:27.050

FIFO 也用于主题。这不是队列和主题之间的区别。

队列和主题之间的最大区别在于消息传递模型：点对点与发布/订阅。

*   队列（点对点）：假设只有一个消费者会收到每条消息。如果此时没有消费者在收听，则存储消息直到有消息到达。如果 >1 个消费者，则随机选择一个消费者来获取每条消息。
*   主题（发布/订阅）：假设当前连接的所有消费者都收到发送的每条消息。对于发送的每条消息，安排所有当前连接的消费者获取一份副本。如果当前没有消费者在收听，则丢弃该消息。

对于这个讨论，我忽略了持久主题订阅。这是主题订阅者的一个转折，如果在发送消息时它没有在侦听，则不会为该消费者丢弃消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:31:42.430

JMS 在消息排序方面不会对队列和主题产生影响。但是请注意，消息传递并非在所有情况下都是先进先出的。规范规定：JMS 定义会话发送到目的地的消息必须按照它们发送的顺序接收（参见[http://docs.oracle.com/cd/E19957-01/816-5904-10/816- 5904-10.pdf](http://docs.oracle.com/cd/E19957-01/816-5904-10/816-5904-10.pdf) - 第 4.4.10 章）但有一些限制，例如不同的交付模式或不同的优先级。

在许多环境中，您不会发现一个会话发送的相关消息，因为您会发现多个服务器或进程的并行化 - 因此依赖消息顺序通常不是一个好主意......

# variables - Jade：如何将渲染数据放入上下文变量中

> ID：14139021
> 
> 赞同：0
> 
> 时间：2013-01-03T12:31:46.733
> 
> 标签：variables, pug

假设我传入`{ "data": "hello" }`玉模板，

然后我想给`data`一个变量，比如

```
- var temp = #{data} 
```

但它失败了，我该怎么做是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:40:56.387

我已经解决了，正确的解决方案是

```
- var temp = data 
```

# c# - InProc 与 StateServer

> ID：14139022
> 
> 赞同：4
> 
> 时间：2013-01-03T12:31:49.453
> 
> 标签：c#, asp.net, session, session-state

我们最近从 using 更改`InProc`为`StateServer`用于存储 Session 信息。

我想知道，现在是否可以在不丢失会话信息的情况下更新网站上的配置文件。当我们使用 InProc 并更新资源文件（如语言文件）、Web 配置文件、global.asax 或`App_Code`.

> '你调用的对象是空的'

这会随着 go to 改变`StateServer`吗？在不丢失会话数据的情况下更新这些类型的文件是否安全？我在我们的测试系统上运行了几个测试，看起来它工作正常，但我不是 100% 有信心......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T12:42:17.057

您的查询的一个简单答案是**“是”**

**进一步说...**
- 使用状态服务器，会话被序列化并存储在内存中的单独进程（aspnet_state.exe）中。
- 状态服务器可以在另一台机器上运行。
- 会话是持久的，您不必担心在应用程序重新启动期间您的会话数据会丢失
- 当存储基本类型的数据（例如字符串、整数等）时，在一个测试环境中它比 InProc 慢 15%。
- 如果存储大量对象，序列化/反序列化的成本会影响性能。
- 解决 InProc 模式下的会话状态丢失问题。允许 webfarm 在中央服务器上存储 ASP.NET 会话。状态服务器上的单点故障。

**有关更多信息，请参阅：**
-[会话 inproc 模式到状态服务器的步骤](http://dotnetguts.blogspot.com/2009/06/steps-for-session-inproc-mode-to.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:37:01.360

是的，它确实。一旦您的会话数据在进程外，重新启动工作进程是安全的。您可以通过登录到您的站点来测试它，进行一些涉及会话更新的操作并从任务管理器（或仅触摸 web.config）中终止相应的 w3wp.exe 进程（假设它是 IIS 7+）。

# c++ - SDL 不绘制图像

> ID：14139023
> 
> 赞同：0
> 
> 时间：2013-01-03T12:31:51.890
> 
> 标签：c++, visual-studio-2010, sdl

我目前正在使用 SDL 将图像绘制到屏幕上，它加载图像时没有错误。但是当我将图像绘制到屏幕上时，什么都没有显示。这是我的代码：

图片加载功能：

```
SDL_Surface *d2Sprite::Load(char *file)
{
SDL_Surface *temp = NULL;
SDL_Surface *opt = NULL;

if((temp = SDL_LoadBMP(file)) == NULL)
{
    cout << "Unable to load image '" << file << "'. " << SDL_GetError() << endl;
    return NULL;
}

opt = SDL_DisplayFormatAlpha(temp);
SDL_FreeSurface(temp);

return opt;
} 
```

绘图功能：

```
bool d2Sprite::Draw(SDL_Surface *dest, SDL_Surface *src, int x, int y)
{
if(dest == NULL || src == NULL)
{
    cout << "Unable draw sprite! " << SDL_GetError() << endl;
    return false;
}

SDL_Rect destR;
destR.x = x;
destR.y = y;

SDL_BlitSurface(src, NULL, dest, &destR);

return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:36:05.013

您没有设置用于 blitting 的矩形的[宽度和高度](http://sdl.beuc.net/sdl.wiki/SDL_Rect)`destR`， .

您应该检查 blir 操作的返回值以确定它是否成功。

此外，您可能会遇到 alpha 混合问题，因为您为表面启用了 alpha，但在此之前没有设置它。请参阅`[SDL_BlitSurface()](http://www.libsdl.org/docs/html/sdlblitsurface.html)`文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:29:34.753

你在调用 Draw() 之后是否调用了 SDL_Flip()？你需要这个来翻转你的后缓冲区（blitting 发生的地方）和前缓冲区（屏幕上显示的内容）。

# php - 字符串中的无效 JSON 转义序列

> ID：14139031
> 
> 赞同：7
> 
> 时间：2013-01-03T12:32:18.633
> 
> 标签：php, string, json

我正在使用一个为谷歌地图编码多边形的 MySQL 数据库。当我尝试将查询返回为 json 时，jsonlint 抱怨.. 我不确定它为什么抱怨，我确实尝试在 latlon 中转义“}”，但仍然得到相同的错误。

```
第 20 行的解析错误：
...“纬度”：“}ciuF|a|pNcUr@d@es@
----------------------^
期待 'STRING'、'NUMBER'、'NULL'、'TRUE'、'FALSE'、'{'、'['

```

我的json是：

```
{
    “地图”：[
        {
            "group_id": "0",
            "user_id": "113",
            “团队名字”： ””，
            “笔记”： ””，
            “field_id”：“”，
            "field_name": "西部牧场",
            “field_notes”：“”，
            “创建日期”：“2012 年 12 月 31 日”，
            “英亩”：“”
        }
    ],
    “多边形”：[
        {
            "polygon_id": "",
            “field_id”：“1”，
            “英亩”：“92”，
            "latlon": "}ciuF|a|pNcUr@d@es@fIHXaNtCn@UxCjMlApAfFuBpI}E\ChJdEl@xAtE"
        }
    ]
}

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T12:51:26.500

问题是 C 之前有一个斜杠，它不是有效的转义序列。

"}ciuF|a|pNcUr@d@es@fIHXaNtCn@UxCjMlApAfFuBpI}E `\C`hJdEl@xAtE"

```
JSON.parse('"\\C"'); 
```

这会给你一个语法错误，因为它试图解析字符串`\C`。如果您想要`\`属性值中的文字，则需要对其进行转义。

```
"latlon": "}ciuF|a|pNcUr@d@es@fIHXaNtCn@UxCjMlApAfFuBpI}E\\ChJdEl@xAtE" 
```

[官方语法](http://json.org/)的相关部分：

```
string
    ""
    " chars "
chars
    char
    char chars
char
    any-Unicode-character-
        except-"-or-\-or-
        control-character
    \"
    \\
    \/
    \b
    \f
    \n
    \r
    \t
    \u four-hex-digits 
```

# android - 测试应用内计费：“发 布者无法购买此项目”

> ID：14139034
> 
> 赞同：65
> 
> 时间：2013-01-03T12:32:39.293
> 
> 标签：android, in-app-purchase, in-app-billing

我的应用似乎已准备好在我的设备上对应用内购买程序进行“现实生活”测试。但是，我在 Play 商店中收到“出版商无法购买此商品”错误消息。现在，我应该如何测试这个？我不想为了测试而使用虚拟帐户重新安装手机而丢失手机的配置。在“设置”-“许可证测试”下的开发者控制台中，我在“具有测试访问权限的 GMail 帐户”下添加了我的电子邮件地址，但这并没有改变任何东西......也许我错过了一些简单的方法，但现在它感觉很混乱！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-17T03:02:06.927

开发商不能从她自己那里购买任何东西。要进行全面测试，您需要在开发者控制台中创建一个测试帐户，然后将您的应用安装到作为主帐户的设备上。没有其他办法。请参阅[http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-22T23:52:25.667

这是尝试将所有要求放入一个答案中的一种尝试。这是对我有用的最简单的过程：

1.  设置一个新的 Gmail 帐户，或使用不是您的开发者帐户的现有 Gmail 帐户。
2.  在 Google Play 开发者控制台的设置 > 帐户详细信息 > 许可证测试中列出测试帐户的电子邮件地址。
3.  在您的设备上，转到“设置”>“帐户”，选择您的开发者帐户，点击三点菜单，然后选择“删除”以从设备中删除该帐户。您可以稍后再添加。
4.  构建您的应用程序的签名、发布变体。
5.  将应用程序作为 Alpha 版上传到 Play 商店，发布它，然后等待几个小时使其生效。[或者设置一个内部测试通道以更快地获得更新](https://support.google.com/googleplay/android-developer/answer/3131213#internal_test)。
6.  ~~如果您的设备已经安装了该应用程序的调试版本，则必须将其删除。或者使用[此技术](https://stackoverflow.com/questions/16777534/using-build-types-in-gradle-to-run-same-app-that-uses-contentprovider-on-one-dev)并行运行调试版本和发布版本（但您仍然需要第一次删除调试版本）。~~
7.  ~~将发行版下载到您的设备上。显然，您可以通过直接导航到应用程序 URL 从 Play 商店执行此操作，但每当我尝试此操作时，我都会收到“找不到项目”消息。我将应用程序上传到我自己的服务器，然后从那里下载到设备。~~
8.  将发行版下载到您的设备上。或者使用[此技术](https://stackoverflow.com/questions/18328730/how-to-create-a-release-signed-apk-file-using-gradle)从您的密钥库对 Android Studio 中的发布版本进行签名，然后从 Android Studio 将应用程序部署到您的设备上。
9.  在您的设备上运行发布版本。如果 Play 商店中的 Alpha 版尚未激活，您将看到应用版本未配置为应用内结算的错误消息。如果 Alpha 版已准备好，您将能够继续完成测试过程。
10.  当您进入付款屏幕时，您必须输入真实的付款信息，即使您不会为您的购买付费。我选择使用现有的 PayPal 帐户，而不是将我的信用卡信息添加到我的 Google 测试帐户。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-12T19:59:53.497

同时，我通过将 SKU ID 更改为“android.test.purchased”（参见 [http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)）来帮助自己，允许“某种”遍历购买过程并尝试一下。

但是，在我看来，这不是一个顺利的解决方案，并且只是部分令人满意，因为开发人员没有看到“真实”用户看到和体验了什么，而是从一个带有假名的黑盒子中接收到一些结果代码（甚至以这种方式命名）并且无法超越 Google Play 界面。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-07T18:16:44.827

对于那些仍然被这个烦人的功能所困扰的人，有一个使用最新版本的 android (5+ Lollipop) 的解决方案。

简单的解决方案 1\. 转到设置，然后向下滚动到“用户” 2\. 添加新的测试用户。3.用这个用户打开应用

您现在可以与测试用户一起测试您是否在应用购买中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-19T17:11:21.103

我通过卸载应用程序、转到 Play 商店并切换到我的非开发者帐户并下载和安装应用程序来解决这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-22T09:25:55.223

总结一下自己的坑：

*   在 Alpha 或 Beta 通道中上传您的应用
*   发布您的应用程序（在 beta 或 alpha 通道中发布不会使您的应用程序对除测试人员列表中的人之外的任何人可见）
*   将您的帐户添加到“测试人员”列表
*   转到“测试人员”链接（类似于“ [https://play.google.com/apps/testing/](https://play.google.com/apps/testing/) <package_name>”）并点击“参与”（这是我错过的）
*   发布您的应用内商品
*   构建应用程序的发布（！）版本并将其上传到设备上。
*   确保设备版本和市场版本由相同的发布密钥签名

*   确保市场版本号不小于构建 gradle 中定义的版本号

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-29T16:54:06.577

您正在尝试使用将应用程序上传到商店时使用的同一帐户购买该商品。

如果您使用 abc@gmail.com 在 android 商店上载应用程序并尝试使用 abc@gmail.com 在该应用程序上进行购买，您将收到该错误。

尝试使用另一个 Google Play 商店帐户进行购买，例如在其他人的手机上。

底线：您不能自己购买。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-01T19:35:30.220

我遇到了同样的错误，现在解决了我失败的两个主要原因：
1.我没有激活应用内产品，意味着它们处于非活动模式
2.如果你想测试，你必须添加Beta测试员。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-02T12:57:30.573

我通过以下方式解决了这个问题：
1\. 使用签名 apk
2\. 我没有激活应用内产品，这意味着它们处于非活动模式

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-12T10:18:42.583

我解决了这个错误

1.  使用签名的 apk 进行测试

2.  sku 名称与 inapp 产品名称相同
3.  应用内产品处于活动状态
4.  应用程序必须发布状态显示

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-26T22:58:59.937

当手动将 APK 从 eclipse 安装到我的手机然后手动打开它时，我遇到了同样的问题。正确的程序是将其发送到 Google play 进行 alpha 测试，然后等待几个小时才能发布给您的 alpha 或 beta 测试人员，您当然必须管理、必须创建、必须让他们访问您的应用程序。几个小时后，开发人员将收到一封包含链接的电子邮件，以提供给他的测试人员。一旦发生这种情况，只需将其转发给您的社区。在您的手机中创建一个额外的 google 帐户（属于社区）并打开 gmail 并点击链接。它将引导您进入 google play，您将在其中自动下载应用程序作为测试人员。安装，买气.. tada！！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-26T17:22:13.713

我认为最好的方法是在没有 Google Play 应用内代码的情况下全面测试付费/免费版本的功能。仅在最后，添加应用程序代码以在免费或专业之间切换。将 APK 上传到 alpha 版本，并获得一个从未见过您的开发者帐户或应用程序本身的设备。使用可兑换代码安装并购买它。如果代码有效，则实际付款应该（付款方式不是您的代码库的一部分，它在 Google 方面）

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-12-19T06:34:01.063

我认为您获得此结果的原因是因为您在开发环境中运行了该应用程序。

要测试应用内结算，您需要对应用进行签名。[在此处](https://stackoverflow.com/a/8481104/435605)和[此处](http://developer.android.com/training/in-app-billing/test-iab-app.html)查看更多信息。

这确实很麻烦，并且会延长开发周期:(

# javascript - 在 JavaScript 中返回确认

> ID：14139035
> 
> 赞同：0
> 
> 时间：2013-01-03T12:32:46.457
> 
> 标签：javascript, onbeforeunload, confirm

我在 Chrome 中确认退货有问题。在 Firefox 中是可以的。

```
window.onbeforeunload = function() {
    var result = confirm('Really?');

    if(result) {
        console.log('Do something');
    }
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:46:30.067

你应该从`beforeunload`.

将`confirm`被忽略

> 自 2011 年 5 月 25 日起，HTML5 规范规定在此事件期间可能会忽略对 window.showModalDialog()、window.alert()、window.confirm() 和 window.prompt() 方法的调用。

[见**MDN**](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

```
window.onbeforeunload = function() {
    return 'Date will be lost: are you sure?'; //<= here
} 
```

如果您不返回某些内容，则处理函数中的操作会在页面卸载之前执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:36:18.247

当用户试图离开页面时，您不能使用对话框（在某些浏览器中）。否则，您可以发出持续不断的警报。

# php - 将文件添加到 PHP 中的现有 Zip

> ID：14139037
> 
> 赞同：0
> 
> 时间：2013-01-03T12:32:52.540
> 
> 标签：php, zip, archive

如何通过 PHP 将文件添加到现有的 zip？我有一个`test.zip`包含五个文件的 zip 文件，现在我想在该 zip 中再添加 20 个文件。所以我更新的 zip 将包含 25 个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:55:11.910

```
array_push('sortname','fullpath');                      
$zip = new ZipArchive();
if ($zip->open('/path_to_folder/fileName'.'.zip',ZIPARCHIVE::CREATE) !== TRUE) {
    die ("Could not open archive");
}
foreach ($fileList as $key=>$value) {
    $zip->addFile($key,$value) or die ("ERROR: Could not add file: $f");
}
$zip->close();

it will create new zip if it does not exist,otherwise add files to the same zip file 
```

我在我的公共文件夹中创建了一个名为 index.php 的 zip 文件，其中压缩了 index.php 文件。然后我编写了以下代码以编程方式向其中添加 2 个新文件，它对我来说非常有用

```
$zip = new ZipArchive();
$filename = APPLICATION_PATH."\..\public\index.zip";

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
    exit("cannot open <$filename>\n");
}
try{
    $zip->addFile(APPLICATION_PATH."\..\public\index4.php","index4.php") or die ("ERROR: Could not add file:");
     $zip->addFile(APPLICATION_PATH."\..\public\web.config","web.config") or die ("ERROR: Could not add file:");

}
catch (Exception $e){
    echo  $e->getMessage();exit;
}
echo "numfiles: " . $zip->numFiles . "\n";
echo "status:" . $zip->status . "\n";
$zip->close(); 
```

# c++ - 我可以使用什么 C++ 库来创建和简化贝塞尔曲线

> ID：14139040
> 
> 赞同：1
> 
> 时间：2013-01-03T12:33:11.307
> 
> 标签：c++, bezier, curve, polyline, simplify

在一个程序中，我有一条折线，它是一组点。我需要从中创建贝塞尔曲线，然后使用一些阈值对其进行简化。

是否有任何 C++ 库可以帮助完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:54:15.887

上次我检查 C++ 中贝塞尔曲线的计算时，我没有找到任何适合我需要的东西，所以我写了这个： http: [//libclaw.sourceforge.net/curves.html](http://libclaw.sourceforge.net/curves.html)。

它可能会帮助您定义曲线，但是没有什么特别与它们的简化相关的。

# c++ - 从 C++ 应用程序自动构建 Lua api

> ID：14139058
> 
> 赞同：1
> 
> 时间：2013-01-03T12:34:07.967
> 
> 标签：c++, api, lua, auto-build

我有一个 C++ 应用程序，我想为这个应用程序设计和提供 Lua API，有一些工具可以帮助我吗？也许有一种方法可以标记一些方法并将它们暴露给 Lua API 层？对于其他语言，我见过可以在解析代码后生成 API 的工具，Lua 有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:04:59.140

我真的很欣赏 LuaBridge 非常轻量级的方法，它只包含 1 个（一个！）头文件，可以包含在您的应用程序中

[https://github.com/vinniefalco/LuaBridge](https://github.com/vinniefalco/LuaBridge)

[https://github.com/vinniefalco/LuaBridgeDemo](https://github.com/vinniefalco/LuaBridgeDemo)

```
/** Declare LUA binding for this class
 *
 * @param global_lua
 */
void c_entity::lua_bind(lua_State* L) {
    getGlobalNamespace(L)
        .beginClass<c_entity>("c_entity")
            .addFunction("getSpeed",&c_entity::get_linear_speed)
            .addFunction("getName",&c_entity::get_name)
            .addFunction("getMaxSpeed",&c_entity::get_max_linear_speed)
            .addFunction("getAcceleration",&c_entity::get_max_linear_acceleration)
            .addFunction("getHull",&c_entity::get_hull)
            .addFunction("getArmor",&c_entity::get_armor)
            .addFunction("getShield",&c_entity::get_shield)
            .addCFunction("getStatus",&c_entity::getStatus)
            .addFunction("logTrace",&c_entity::log_trace)
            .addFunction("logInfo",&c_entity::log_info)
            .addFunction("logDebug",&c_entity::log_debug)
            .addFunction("logError",&c_entity::log_error)
        .endClass();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:20:23.333

查看[SWIG](http://www.swig.org)。根据您的需要以及“清除”您的 C/C++ 标头的方式，您可以将整个 .h 文件提供给 SWIG 或选择要导出到 Lua 的函数/类（就像在[这个](http://www.swig.org/Doc2.0/Lua.html#Lua_nn3)基本示例中一样）：

```
%module example
%{
#include "example.h"
%}
int gcd(int x, int y);
extern double Foo; 
```

# css - CSS 预处理器，可以在 @media 查询中定义变量

> ID：14139067
> 
> 赞同：12
> 
> 时间：2013-01-03T12:34:53.503
> 
> 标签：css, less, media-queries, sass

目前，我使用 LESS 作为我的主要 CSS 预处理器。我有（而且我相信很多人都有这种需要）在`@media`查询中定义变量，例如：

```
@media screen and (max-width: 479px) {
    myVar: 10px;
}
@media screen and (min-width: 480px) and (max-width: 767px) {
    myVar: 20px;
}
@media screen and (min-width: 768px) {
    myVar: 30px;
}

.myElement {
    padding: @myVar;
} 
```

由于编译性质，这在 LESS 中不起作用（`@myVar`仅在每个特定的范围内定义`@media`，但不是全局定义）。即使我`@myVar`在媒体查询之前全局定义，它也不会根据媒体查询进行更新，`.myElement`无论如何都会获得该初始值。

所以，问题是，是否有可能在任何其他 CSS 预处理器中实现这一点，或者我们注定要`.myElement`在每个媒体查询中覆盖？在这个最简单的例子中不是问题，但在实际项目中，这可以节省大量时间和复制/粘贴。

**编辑：** 不是解决方案，而是我的特定项目的**解决方法：**

1.  将字体大小设置`<html>`为基本字体大小
2.  `myVar`LESS 变量被定义为[`rem`](http://www.w3.org/TR/css3-values/#font-relative-lengths)而不是`px`作为基本字体大小的衍生物
3.  使用`@media`查询来调整不同媒体的基本字体大小。
4.  **可选**对尚不支持的浏览器使用[REM 单元 polyfill](https://github.com/chuckcarpenter/REM-unit-polyfill)`rem` ( [http://caniuse.com/#search=rem](http://caniuse.com/#search=rem) )。这在 IE 8 及更低版本中不起作用，但不是因为缺乏对`rem`-[它不支持媒体查询](http://caniuse.com/#feat=css-mediaqueries)的支持。因此，无论如何，IE8 及以下版本都会获得全尺寸的无媒体查询样式表。

代码片段：

```
@myVar: .77rem; // roughly 10px, 20px and 30px respectively

html { font-size: 13px }
@media screen and (min-width: 480px) and (max-width: 767px) {
    html { font-size: 26px }
}
@media screen and (min-width: 768px) {
    html { font-size: 39px }
}

.myElement {
    padding: @myVar;
} 
```

这是一个具有更广泛示例的[JSBin](http://jsbin.com/avigot/11/edit)，它将不同字体大小的元素与不同测量的块混合在一起。

轻松灵活地满足我的需求。希望对其他人有所帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T16:13:35.037

让我更直接地回答这个问题：

> “是否有可能在任何其他 CSS 预处理器中实现这一点，或者我们注定要`.myElement`在每个媒体查询中覆盖？”

答案实际上存在于问题中。因为LESS（和其他类似工具）是一个“预处理器”，`@media`在编译时对它没有任何意义，因为它没有查看浏览器的媒体状态来进行预处理。`@media`状态仅在预处理*之后*才相关，此时`@someVariable`已经计算了任何状态。这就是为什么您尝试做的事情行不通的原因。您`@myVar`只能作为 CSS 样式表中的单个值输出，并且该输出发生在浏览器状态被评估之前`@media`。

因此，它与媒体查询的“全局”或“本地”范围无关，而是 LESS 使用变量将代码编译成 CSS 的事实，并且关注的是 CSS（而不是 LESS）`@media`查询信息。

有关使用 LESS 构建媒体查询的进一步讨论，以使它们都在一起而不是分散在整个代码中，请参阅[此问题](https://stackoverflow.com/questions/13503862/media-query-grouping-instead-of-multiple-scattered-media-queries-that-match/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T13:01:29.240

您可以将其重构为将媒体查询放入变量中，然后在元素中使用它们。

例子：

```
@phone: ~"screen and (max-width: 479px)";
@tablet: ~"screen and (min-width: 480px) and (max-width: 767px)";
@desktop: ~"screen and (min-width: 768px)";

.myElement {
  @media @phone { padding: 10px; }
  @media @tablet { padding: 20px; }
  @media @desktop { padding: 30px; }
} 
```

产生：

```
@media screen and (max-width: 479px) {
  .myElement {
    padding: 10px;
  }
}
@media screen and (min-width: 480px) and (max-width: 767px) {
  .myElement {
    padding: 20px;
  }
}
@media screen and (min-width: 768px) {
  .myElement {
    padding: 30px;
  }
} 
```

整个*使媒体查询成为嵌入变量*中的未解析文字并不完全漂亮，但也有助于标准化媒体查询。

它有助于提高可读性，因为 的所有三种*行为*都`.myElement`包含在一个定义中，并且没有在其他地方更改（可能是完全不同的文件），这使得“调试”变得困难。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T13:07:55.133

关于什么：

```
@media screen and (max-width: 479px) {
    .myElement(10px);
}

@media screen and (min-width: 768px) {
    .myElement(30px);
}

.myElement(@myVar) {
    .myElement {
        padding: @myVar;
    }
} 
```

# c# - ContinuousTest / Moose : Here Be Dragons 和一般叠加问题

> ID：14139068
> 
> 赞同：8
> 
> 时间：2013-01-03T12:34:55.670
> 
> 标签：c#, .net, continuous-testing, mightymoose

有没有人在 Mighty Moose / ContinuousTests 中遇到过 Here Be Dragons 警告？ ![在此处输入图像描述](../Images/98f7ccf399a5b0a1b95a6962306fd0da.png)

这被放在一个私有方法旁边，可能是因为它是私有的，因此不容易测试——你可能需要魔法盔甲来测试它。无论如何，我也在一个属性的设置器上找到了这个，所以我试图重现它。现在，在我的代码旁边，我再也看不到任何测试运行指标了。

我怎样才能把那些拿回来？出现的条件是什么？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-10T15:17:38.833

您看到此消息的原因是 ContinuousTests 在提供反馈时考虑的不仅仅是测试覆盖率。使用您在那里看到的边距，您可以获得绿色、黄色或红色。绿色表示更改此代码是相当安全的。黄色表示更改那段代码存在一定风险。红色表示如果您更改此代码，您将自行处理。如果更改，则很有可能会损坏某些东西。如果您将鼠标悬停在该图标上，您可以看到有关风险的一些统计信息。如果您右键单击并选择“ContinuousTests->Get Affected Graph”，您将看到这段代码的耦合图。

当显示“here be dragons”消息时，这意味着您正在查看的代码在代码中的很多地方都被引用，并且似乎没有测试与它耦合或引用它的内容。因此，更改该代码不仅会破坏该方法，还会破坏间接使用它的所有内容。

希望能解释一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-29T07:30:12.467

哇，我可以回答这个问题，但多年后才遇到这个问题 :) 当我编写有问题的软件时，我有足够的资格回答这个问题。

它告诉您的是您的代码无法安全更改。

“当“这里是龙”消息显示时，这意味着您正在查看的代码在代码中的很多地方都被引用，并且似乎没有测试与它耦合或引用它的东西。所以更改该代码你不仅冒着破坏这种方法的风险，而且还有破坏间接使用它的一切的风险。”

非常正确。

它正在看的是

这段代码

这段代码的测试

调用此代码的位置

将此代码调用

测试此代码的调用位置

递归地

它本质上构建了所​​有相关代码的图表（您可以直观地拉出实际图表）以及与该代码相关联的测试，然后对相关代码进行风险分析。作为风险分析的例子，如果我有一个直接测试方法的测试，它被认为比以某种方式覆盖调用链下九层的方法的测试要好得多。

这有意义吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:03:13.660

由于没有人可以解释，我将把它归档`WTF!?!?!`并关闭它。支持请求导致以下结果，这仍然让我有点不知情：

> 这是一个红色的零，但更糟。基本上，它们出现在似乎是一团乱七八糟的代码中，没有经过任何测试。如果我没记错的话，图表中需要有 30 多个颂歌，测试覆盖率为 0 以及一些 il 循环阁楼复杂性

嗯，它是免费的...

# c# - jQuery attr 不起作用

> ID：14139069
> 
> 赞同：1
> 
> 时间：2013-01-03T12:35:00.820
> 
> 标签：c#, jquery, asp.net

我正在使用 asp.net、C#、jQuery 1.8.3/1.7.2

我想在页面加载时将脚本中的文本框“只读”属性更改为“真”或“假”。 ***更新***文本框的值在运行时加载。这是脚本：

```
function hidebtn() {        
    $('#diviv').css({
        "display": "block"
    });

    $("#txtname").attr('ReadOnly', true);
} 
```

如果我写一个警报，它工作正常，现在 div 看起来很好。txtname 属性没有改变。我从代码隐藏中调用此方法，如下所示：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "hidebtn();", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:36:30.637

你应该使用

```
 $("#txtname").prop('readonly', true); //lowercase 
```

prop 是更好的选择。同样适用`checked="checked"`

> 属性和属性之间的区别在特定情况下可能很重要。在 jQuery 1.6 之前，.attr() 方法在检索某些属性时有时会考虑属性值，这可能会导致行为不一致。从 jQuery 1.6 开始，.prop() 方法提供了一种显式检索属性值的方法，而 .attr() 仅检索属性。

这都是关于**HTML 属性与 DOM 属性的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:36:46.947

更改`ReadOnly`为`readonly`

```
$("#txtname").attr('readonly', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:37:16.010

试试这个

```
 $("#txtname").prop('readonly', true); 
```

**更新**

```
$("#<%= txtname.ClientID %>").prop('readonly', true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T12:37:37.097

用这个

```
$("#<%= txtname.ClientID %>") 
```

如下

```
$("#<%= txtname.ClientID %>").attr('ReadOnly', true); 
```

全部一起

```
function hidebtn() {        
$('#diviv').css({
    "display": "block"
});

$("#<%= txtname.ClientID %>").attr('ReadOnly', true);
} 
```

或将控件属性设置`ReadOnly`为`False`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T12:37:33.390

您应该使用它来将输入更改为只读

```
$("#txtname").attr('readonly', 'readonly'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T13:15:11.803

根据[**ClientScriptManager.RegisterStartupScript 文档**](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)，脚本块应在页面完成加载后但在页面`OnLoad`事件触发之前执行。

如果您碰巧在`OnLoad`事件中添加了文本框，那么选择器将永远不会看到找到控件。

无论哪种方式，您都应该检查您的控件在脚本运行时是否存在。
您可以通过执行以下操作来做到这一点：

```
console.log($("#txtname").length); //or
alert($("#txtname").length); 
```

如果长度不是`0`，那么其他东西可能会覆盖您的`readonly`设置。可能在脚本运行或类似之后重新呈现控件。

如果长度是`0`那么您的控件尚未在页面上。

您可以尝试将代码包装在 a`$(document).ready(function(){//yourcode here})`中，看看它是否有所作为。

您可以改为使用 stringbuilder 来构建脚本，并使用`Page.ClientScript.RegisterClientScriptBlock`类似于以下内容：

```
StringBuilder hideBtnScript = new StringBuilder();

hideBtnScript.Append("<script type=\"text/javascript\">");
hideBtnScript.Append("$(document).ready(function() {");
hideBtnScript.Append("$('#diviv').css({'display': 'block'});");
hideBtnScript.Append("$('#txtname').prop('readonly', true);});");
hideBtnScript.Append("</script>");

Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "Call my function", hideBtnScript.ToString(), false); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T06:46:35.813

由于一些渲染问题，似乎没有任何东西可以正常工作。所以我只是用启用/禁用文本框替换了 jQuery 和客户端脚本。

谢谢

# c - 检查输入的产品名称是否唯一的功能

> ID：14139070
> 
> 赞同：-1
> 
> 时间：2013-01-03T12:35:01.020
> 
> 标签：c

我正在尝试开发一个函数，该函数使用 strcmp() 检查输入的产品名称是否已存在于文件中。

这是我的函数，然后当系统要求用户输入产品名称时，我从 void AddProduct() 函数中调用它。问题是该功能不能正常工作，每当用户输入一个新的产品名称时，它一直说它已经存在。

```
bool ProductUnique(char ProductName)
{

      product p;
        bool uniqueproduct = true;
        char productname[50];

        pfp=fopen("products.dat","rb");

    while(1)
    {
    fread(&p,sizeof(p),1,pfp);

    if(feof(pfp))
    {
    break;
    }
    if(strcmp(productname,p.ProductName)==0)
    {
        uniqueproduct = false;
    }
    if(!uniqueproduct)
    {
        printf("Product Name aleady exists!");
    }
    }
    return uniqueproduct;
    fclose(pfp);
} 
```

这是我的 void AddProduct() 函数的一部分

```
void addProduct()
{
    product p1;

    pfp=fopen("products.dat","ab");

    printf("\n========================================================\n\n");
    printf("\t\t Adding a Product\n\n");
    printf("========================================================\n\n");

    char ProductName[100];
    do
    {
        printf("Enter Product Name: \n");
        scanf("%s",ProductUnique(p1.ProductName);
    }while(!ProductUnique(p1.ProductName)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:37:31.717

你从来没有为`productname`. 此外，您似乎混淆了函数的输入参数。我认为应该是`ProductUnique(const char* productname)`，然后你不应该在函数体中有产品名称变量。

编辑：这是固定代码，至少是我发现的错误。我添加了`CHANGED`注释以查看我所做的更改。

```
bool ProductUnique(const char* productname) // CHANGED: FIX THE ARGUMENT
{

      product p;
        bool uniqueproduct = true;
        // char productname[50];  // CHANGED: NOT NEEDED.

        pfp=fopen("products.dat","rb");

    while(1)
    {
    fread(&p,sizeof(p),1,pfp);

    if(feof(pfp))
    {
    break;
    }
    if(strcmp(productname,p.ProductName)==0)
    {
        uniqueproduct = false;
    }
    if(!uniqueproduct)
    {
        printf("Product Name aleady exists!");
    }
    }
    fclose(pfp); // CHANGED: SHOULD CLOSE BEFORE RETURN
    return uniqueproduct;
//    fclose(pfp);  // CHANGED: DON"T DO ANYTHING AFTER RETURN
} 
```

AddProduct() 函数

```
void addProduct()
{
    product p1;

    pfp=fopen("products.dat","ab");

    printf("\n========================================================\n\n");
    printf("\t\t Adding a Product\n\n");
    printf("========================================================\n\n");

    //     char ProductName[100]; // CHANGED: NOT NEEDED
    do
    {
        printf("Enter Product Name: \n");
        scanf("%s",&p1.ProductName); // CHANGED: READ INPUT, DON'T CALL FUNCTION HERE.
    }while(!ProductUnique(p1.ProductName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:39:46.110

这部分应该在`while`

```
 if(!uniqueproduct)
 {
    printf("Product Name aleady exists!");
 } 
```

所以你的代码应该是这样的：

```
while(1)
{
fread(&p,sizeof(p),1,pfp);

if(feof(pfp))
{
break;
}
if(strcmp(productname,p.ProductName)==0)
{
    uniqueproduct = false;
}
}//from while

if(!uniqueproduct)
{
    printf("Product Name aleady exists!");
}
fclose(pfp);
return uniqueproduct; 
```

# excel - 使用按钮在excel中复制行但按钮不应跟随

> ID：14139072
> 
> 赞同：0
> 
> 时间：2013-01-03T12:35:15.203
> 
> 标签：excel, vba

我有很多部分的excel文件。我创建了一个宏，然后在每个部分上都有一个按钮。我已经将~~按钮连接到那个~~宏到那个按钮。

```
 On button click : 
```

*   现有行将复制
*   添加新行
*   超过第一行的内容

一切正常。**问题是每次复制行时按钮也会被复制。**我不想复制那个按钮，它应该保留在前一行。或 按钮应放在最后一行。

这是代码。

```
Sub Button_AddRow()
Dim b As Object, cs As Integer
ActiveSheet.Unprotect
Set b = ActiveSheet.Buttons(Application.Caller)
b.TopLeftCell.Offset(1).EntireRow.Insert
b.TopLeftCell.Offset(1).EntireRow.Insert

b.TopLeftCell.EntireRow.Select
Selection.Copy
b.TopLeftCell.Offset(1).EntireRow.Select
ActiveSheet.Paste
b.TopLeftCell.EntireRow.Select
Selection.Copy
b.TopLeftCell.Offset(2).EntireRow.Select
ActiveSheet.Paste

ActiveSheet.Cells(b.TopLeftCell.Offset(1).Row, 1).Value = ""

ActiveSheet.Protect

End Sub 
```

![看看有多少个按钮，来了，最后只需要一个按钮](../Images/1559acc80a01af32c6d8d7fc6507de16.png)

尝试了很多但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:32:06.827

跟进 iDevelop 的回答，您可以使用 Button 的 TopLeftCell 来获取您想要的行的地址，然后像这样清理您的代码：

```
Option Explicit

Sub Button_AddRow()

Dim b As Object, cs As Integer, cel As String

ActiveSheet.Unprotect

Set b = ActiveSheet.Buttons(Application.Caller)
cel = b.TopLeftCell.Address

Range(cel).Offset(1).EntireRow.Resize(2).Insert

Range(cel).Offset(1).EntireRow.Resize(2).Value = Range(cel).Value

Cells(Range(cel).Offset(1).Row, 1).Value = ""

ActiveSheet.Protect

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:04:54.147

为什么要在代码中引用按钮？您可以使用 ActiveCell：

```
Sub Button_AddRow()
   Dim r As Range
   ActiveSheet.Unprotect
   Set r = ActiveCell.EntireRow
   .... 
```

我想你的问题会消失。当然，用户必须首先单击“右”行上的某个位置。

# testing - JMeter：如何在多个线程中处理 cookie？

> ID：14139074
> 
> 赞同：1
> 
> 时间：2013-01-03T12:35:35.400
> 
> 标签：testing, jmeter, session-cookies

我在 jmeter 中有一个测试计划，其中包含 setUp、tearDown 和一个主线程。

> setUp 线程登录应用程序（打开会话）。
> 
> 主线程执行以在同一会话中执行任务。
> 
> tearDown 线程注销应用程序（关闭会话）。

这是不可能的，因为设置线程的cookies不能在其他线程中使用，所以我们无法在其他线程中获取会话。

请告诉我这怎么可能？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:45:32.403

[您可以使用线程间通信](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)在线程组之间共享数据（包括 cookie）

但我不明白你为什么要这样做。我建议这样做：

```
Thread Group
  HTTP Sampler (login)
  .
  Put your logic here. Maybe you need Loop Controller or Synchronizing Timer here
  .
  HTTP Sampler (logout) 
```

# c++ - c++ 动态结构数组

> ID：14139076
> 
> 赞同：3
> 
> 时间：2013-01-03T12:35:54.600
> 
> 标签：c++

你能帮我组织一个动态的点数组吗？

我已经处理了一个动态的整数数组。但我不知道如何用结构来组织它。

到目前为止，这是我的代码...

```
#include "stdafx.h"
#include <cstdlib>;
#include <iostream>;
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
  int i = 0; // Array index.
  struct Point
  {
    int x;
    int y;
  };
  size_t n = sizeof(int);
  int * points = static_cast<int*>(malloc(n));
  char command;
  do
  {
    cout << "n - Create new point." << endl;
    cout << "q - Quit." << endl;
    cout << "Input a new command: ";
    cin >> command;
    if (command == 'n')
    {
      points[i] = 1;
      i++;
      /* points[i] = new Point();
         points[i].x = 1;
         points[i].y = 1; */
      // cout<<"("<<point1.x<<","<<point1.y<<")";               
    }               
    else if (command == 'q')
    {       
      for (int j = 0; j < i; j++)
        cout << points[j] <<endl;
      system("pause");
      return 0;
    }
    else
    {
      cout << "Please, enter a correct command." << endl << endl << endl;               
    }
  } while (true);
  system("pause");  
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:38:34.507

查看矢量图

`#include <vector>`

[http://www.mochima.com/tutorials/vectors.html](http://www.mochima.com/tutorials/vectors.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:54:21.493

> [**`std::vector`**](http://en.cppreference.com/w/cpp/container/vector)是一个封装动态大小数组的序列容器。

-- [cppreference.com](http://en.cppreference.com/w/cpp/container/vector)

这是您应该在**C++中使用的，而不是像在****C**`struct`中那样动态分配的 s数组。

 **以下是您如何开始将其合并到您的代码中（未经测试）...

```
#include <vector>
#include <iostream>

struct Point
{
    int x;
    int y;
};

typedef std::vector<Point> PointVector;

int main()
{
    using std::cout;
    using std::cin;
    using std::endl;

    PointVector points;

    char command = 0;
    do
    {
        cout << "n - Create new point." << endl;
        cout << "q - Quit." << endl;
        cout << "Input a new command: ";
        cin >> command;

        if (command == 'n')
        {
            Point new_point;
            new_point.x = 1;
            new_point.y = 1;
            points.push_back(new_point);
            cout << "(" << new_point.x << "," << new_point.y << ")\n";
        }
        else if (command == 'q')
        {
            for (PointVector::iterator it = points.begin(), end = points.end();
                it != end;
                ++it)
            {
                cout << "(" << it->x << "," << it->y << ")\n";
            }
            break;
        }
        else
        {
            cout << "Please, enter a correct command." << endl;
        }
    } while(true);
} 
```

## 关键点：

1.  `typedef`s 通常使代码更具可读性
2.  [**`std::vector::push_back()`**](http://en.cppreference.com/w/cpp/container/vector/push_back)添加到容器的末尾，而无需保留索引或过度关注大小。
3.  迭代器（例如 由 返回的迭代器[**`std::vector::begin()`**](http://en.cppreference.com/w/cpp/container/vector/begin)）使访问容器中的元素变得容易，同样无需保留索引。另请参阅[为什么使用迭代器而不是数组索引？](https://stackoverflow.com/questions/131241/why-use-iterators-instead-of-array-indices)
4.  此实现不会`points`像您`malloc()`的基于实现那样泄漏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T13:00:46.627

从外观上看，您正在使用`malloc`获取足够的内存来存储指向 int 的指针。不要使用`malloc`/ `free`。这是 C++，使用`new`或者`delete`如果你真的需要。

值得庆幸的是，在这种情况下，您不必担心动态分配内存，因为您可以按以下方式完成所有这些操作`vector`：

```
// First create a vector of points.
std::vector<Points> points;

// Now create the Point (i'm assuming you were going to read
// it from the input stream here.)
cin >> x >> y;
Point p;
p.x = x;
p.y = y;

// And add it to the vector.
points.push_back( p ); 
```

就这么简单，你不需要担心增加点向量的容量或者最后清除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T12:55:45.890

您可以按照@iedoc 的建议使用向量：

```
#include <iostream>;
#include <vector>;

using namespace std;

struct SPoint
{
    int X;
    int Y;
};

int main()
{
    vector<SPoint> points;

    char command;
    do
    {
        cout << "n - Create new point." << endl;
        cout << "q - Quit." << endl;
        cout << "Input a new command: ";

        cin >> command;

        if (command == 'n')
        {
            int x = 0;
            int y = 0;

            cout << "X: ";
            cin >> x;

            cout << "Y: ";
            cin >> y;

            SPoint point = { x, y};
            points.push_back(point);
        }

        else if (command == 'q')
        {
            for (int i = 0; i < points.size(); ++i)
            {
                cout << "(" << points[i].X << "," << points[i].Y << ")";
            }

            return 0;
        }
        else
        {
            cout << "Please, enter a correct command."<<endl<<endl<<endl;
        }
    }

    while(true);

    return 0;
} 
```**

# javascript - 用另一个数值替换数值

> ID：14139081
> 
> 赞同：4
> 
> 时间：2013-01-03T12:36:10.637
> 
> 标签：javascript, jquery

我的 HTML 中有一个跨度，如下所示，我从后面的代码中分配文本：

```
<span id="NewL1" visible="false"
    runat="server"><span runat="server" id="NewL"></span></span> 
```

文本类似于：“您有 3 个通知”。

我想更改 jQuery 中的数值。我已经尝试过了，但没有任何反应：

```
var notification = $("#NewL");
var numb = notification.text().match(/\d/g);
var finalTotalCount = parseInt(numb) - 1;
notification.text(notification.text().replace(numb, finalTotalCount )); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:38:19.500

所以你有这个 HTML 代码：

```
<span id="NewL1" visible="false" runat="server">
    <span runat="server" id="NewL">you have 3 notifications</span>
</span> 
```

然后，只要您的动态文本`you have 3 notifications`被插入到正确的位置，即在内部`span`.

这是 jsFiddle：http: [//jsfiddle.net/leniel/ykg62/2/](http://jsfiddle.net/leniel/ykg62/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:39:39.987

代替：

```
var finalTotalCount = parseInt(numb) - 1; 
```

和：

```
var finalTotalCount = parseInt(numb[0]) - 1; 
```

`.match(/\d/g)`返回与正则表达式匹配的字符串数组。假设您的文本中只有 1 个数字，您将希望获得该数组的第一个结果。

**编辑**

显然，`parseInt`如果提供了数组，则使用数组中的第一个元素。所以，从技术上讲，我的建议是没有必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:14:07.720

像这样修改你的代码，然后再试一次

```
var notification = $("#NewL");
var numb = notification.text().match(/\d/g)[0];
var finalTotalCount = parseInt(numb) - 1;
notification.text(notification.text().replace(numb, finalTotalCount )); 
```

此外，在您的代码中：

```
<span id="NewL1" visible="false" runat="server">
    <span runat="server" id="NewL"></span>
</span> 
```

你有`span`一个隐藏的`span`*(visible="false")*。因此将无法看到已完成的任何更改。你可以简单地把你的代码像这样然后再试一次：

```
<span runat="server" id="NewL"></span> 
```

# c# - 使用 Microsoft Fakes 模拟 HttpContextBase - 缺少 UserGet 属性

> ID：14139089
> 
> 赞同：2
> 
> 时间：2013-01-03T12:36:31.303
> 
> 标签：c#, asp.net-mvc, unit-testing, mocking

我目前正在尝试使用 Microsoft Fakes Framework 编写一些单元测试。对于特定的单元测试，我必须模拟 Controller.User 属性。所以我为 System.Web 添加了一个假程序集并创建了一个新的 System.Fakes.StubHttpContextBase 实例：

```
var stubHttpContext = new System.Web.Fakes.StubHttpContextBase(); 
```

在下一步中，我想设置 User 属性的返回值。我希望在我的 StubHttpContextBase 实例上找到一个“UserGet”属性，但没有运气：

![没有可用的 UserGet 属性](../Images/125b68681332ed988da345cd55dbffde.png)

真正让我感到困惑的是，MS Fakes 能够为除“用户”属性之外的所有其他属性生成吸气剂。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T18:47:11.110

```
var child = new StubHttpContextBase();
var basecontext=  new ShimHttpContextBase(child) 
    {
        UserGet= () =>   
            new GenericPrincipal(new GenericIdentity("mhu"), new string[0]) 
    };

var conCntx = new ControllerContext();
conCntx.HttpContext = basecontext;
controllerUnderTest.ControllerContext = conCntx; 
```

# javascript - 不使用 JavaScript 设置 scrollTop 和 scrollLeft

> ID：14139091
> 
> 赞同：23
> 
> 时间：2013-01-03T12:36:36.830
> 
> 标签：javascript, css, scrolltop

我有一个关于`scrollTop`和`scrollLeft`属性的问题。我想在不使用 JavaScript (jQuery) 的情况下在我的 div 中设置这些属性。这可能吗？

我的问题是，我有一个解释 HTML 代码的程序，当程序解释代码时，我滚动的 div 的值为零。程序无法读取`scrollTop`or`scrollLeft`值。存在一个 HTML 标记，例如：

```
<div scrollLeft="300" scrollTop="200"></div> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T12:45:06.187

恐怕仅使用 CSS/HTML 是不可能的。

## 编辑 [05.01.2012] - 一个可能的解决方案

我创建了一个适用于以下浏览器的解决方案：

*   火狐 4+
*   野生动物园 5+
*   铬 6+
*   歌剧 11+
*   IE 10+
*   安卓 2.3+

它真的有点hacky，所以看看你是否会使用它。:)

**一点解释**

`autofocus`我在`<input>`-field上使用了 HTML5 属性。由于这将聚焦输入，因此必须将其放入视口。因此它将滚动到给定的位置。要摆脱突出显示的轮廓并且根本看不到输入，您必须设置一些样式。但这仍然迫使 Safari 有一个闪烁的像素，所以我用跨度做了这个技巧，它就像一个叠加层。请注意，您不能简单地使用`display: none`，因为这不会触发自动对焦（仅在 Safari 中测试过）。

**演示**

该演示仅在 Safari 和 Chrome 中运行。IE 和 Firefox 似乎不会在`<iframe>`.

```
div.outer {
  height: 100px;
  width: 100px;
  overflow: auto;
}

div.inner {
  position: relative;
  height: 500px;
  width: 500px;
}

div.inner>input {
  width: 1px;
  height: 1px;
  position: absolute;
  z-index: 0;
  top: 300px;
  left: 200px;
  border: 0;
  outline: 0;
}

div.inner>span {
  width: 1px;
  height: 1px;
  position: absolute;
  z-index: 1;
  top: 300px;
  left: 200px;
  background: white;
}
```

```
<div class="outer">
  <div class="inner">
    <input type="text" autofocus></input>
    <span></span>
  </div>
</div>
```

# c# - C#继承：实现+扩展

> ID：14139097
> 
> 赞同：24
> 
> 时间：2013-01-03T12:37:00.073
> 
> 标签：c#, oop, inheritance

是否可以在`C#`：

```
public class MyClass implements ClassA extends ClassB 
{

} 
```

我需要这个是因为：我有两个类，其中一个`Interface`是我将在我的类中实现的类，但我也想使用另一个类的方法，它可以做一些我想在我的类中使用的东西。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T12:38:32.307

C# 不支持[多重继承](http://en.wikipedia.org/wiki/Multiple_inheritance)。您可以从一个类派生并使用接口来满足您的其他需求。

句法：

```
class MyClass : Foo, IFoo, IBar
{
}

interface IFoo
{
}

interface IBar
{
}

class Foo
{
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T12:41:59.693

试试这个：

```
using System;

public interface A
{
    void DoSmth();
}

public class B
{
    public void OpA() { }
    public void OpB() { }
}

public class ClassC : B, A
{
    public void DoSmth(){}
} 
```

请记住，您不能从特定类级别的两个类继承，它可能只有一个类和任意数量的接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:41:12.783

```
 class Base
    {
    }

    interface I1
    {
    }

    interface I2
    {
    }

    class Derived : Base, I1, I2
    {
    }

    static void Main(String[] args)
    {

        Derived d = new Derived();
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-17T12:26:40.647

它应该如下所示：

```
public class MyClass: ClassB, InterfaceA{
} 
```

ClassB 是*基类*。

InterfaceA 是一个*接口*。

只能扩展一个基类，但可以实现多个接口。

# c# - 带有 Sympy 的 IronPython 脚本

> ID：14139099
> 
> 赞同：2
> 
> 时间：2013-01-03T12:37:14.013
> 
> 标签：c#, python, .net, ironpython, sympy

现在我收到错误：应用程序中的服务器错误。无法导入已键入的名称 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：IronPython.Runtime.Exceptions.ImportException：无法导入名称类型的源错误：第 44 行：expr))；第 45 行：第 46 行：script.Execute(scope); 第 48 行：返回 scope.GetVariable("result");

```
public static string PythonEvaluate(string expr) 
{ 
    var engine = Python.CreateEngine(); var paths = engine.GetSearchPaths();

    paths.Add(@"C:\Python27\Lib\Site-Packages");
    paths.Add(@"C:\sympy");
    engine.SetSearchPaths(paths);

    var scope = engine.CreateScope();

    var script = engine.CreateScriptSourceFromString(string.Format(@"
                import sys
                sys.platform = "win32"  // Default is cli

                from sympy import *
                n = Symbol('n')
                value = {0}

                import clr
                from System import String
                result = clr.Convert(value , String)",
            expr));

    script.Execute(scope);  

    return scope.GetVariable("result");
}

protected void Page_Load(object sender, EventArgs e)
{
    var result = PythonEvaluate("limit((1 + 3/n)**n, n, oo)");
    Label3.Text = result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:42:32.097

我不熟悉在 .NET 中执行 Python 代码，但在 Python 中，每个缩进都有其含义。我猜您需要删除代码的所有前导空格：

```
 // ...
    var script = engine.CreateScriptSourceFromString(string.Format(@"
from sympy import *
value = {0}

import clr
from System import String
result = clr.Convert(value , String)", expr));

    script.Execute(scope); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:02:05.757

正如我在评论中指出的那样，不可能说出你出了什么问题，也没有告诉我们错误是什么，但有可能是你使用`limit`不正确。您需要将符号对象传递给它，而不是 lambda 函数，它需要三个参数，并且无穷大被称为 , `oo`, not `inf`。

```
n = Symbol("n")
limit((1 + 3/n)**n, n, oo) 
```

# android - Spinner does not wrap text -- is this an Android bug?

> ID：14139106
> 
> 赞同：69
> 
> 时间：2013-01-03T12:37:32.093
> 
> 标签：android, android-layout, spinner, android-spinner

If the text of a `Spinner` item is too long to fit into a single line, the text is not wrapped but cut off. This is *only* the case for **API level >= 11**. Here are screenshots of Android **4.2.2** (left) which shows the wrong behavior and Android **2.3.3** (right) where it looks as expected.

![](../Images/62fa33e2802bec87bbdc368da514b87a.png) ![](../Images/f2c8384a97af9b04e821288589d08a11.png)

`android:singleLine="false"` simply gets ignored here. So as all other tries like `android:lines`, `android:minLines`, etc. The `TextView` somehow seems to be much wider than the window width.

I saw other people having the same problem, but no one could find a solution. So, is this a system bug? I don't think this inconsistency between the OS versions can be intended.

* * *

### Please note:

There were some answers suggesting relatively simple solutions.

*   Writing a custom `Adapter` and overriding `getView()` as well as `getDropDownView()`. This is not the solution here, because at this point, there is still the original problem: How does the layout have to look like to handle proper line wrapping?

*   Wrapping the `TextView` of the drop down view into a parent `ViewGroup`. Does not work with `android:layout_width="match_parent"` because the width of the parent strangely seems to be unlimited.

*   Giving the drop down view a fixed width. This is not suitable with the different widths the `Spinner` can have.

*   And of course, no solution is to manually insert `\n`s anywhere into the text.

* * *

### Reproduce with the following code:

**UPDATE:** I also uploaded this as a sample project on [GitHub](https://github.com/robbers/SpinnerBug): [Download](https://github.com/robbers/SpinnerBug/archive/master.zip)

/res/values/arrays.xml:

```
<string-array name="items">
    <item>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt.</item>
    <item>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.</item>
</string-array> 
```

/res/layout/spinner_item.xml:

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="none"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:singleLine="false" /> 
```

Set `Adapter`:

```
spinner.setAdapter(ArrayAdapter.createFromResource(this,
            R.array.items,
            R.layout.spinner_item)); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-11-15T04:44:48.793

In holo theme spinner by default uses dropdown mode. And all moves with overriding default styles just move to switching spinner mode to dialog mode which succesfully wraps multiline text as in api 11\. Instead you can create spinner with `new Spinner(context, Spinner.MODE_DIALOG)` or in xml: `android:spinnerMode="dialog"`. But it's not resolve the problem, because it's dialog, not dropdown.

I have found another solution for this trouble: Override `getDropDownView` method in `ArrayAdapter` and put `setSingleLine(false)` in post method of view. So when view completely created it wraps the text to appropriate lines.

```
@Override
public View getDropDownView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = new TextView(_context);
    }

    TextView item = (TextView) convertView;
    item.setText("asddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd");
    final TextView finalItem = item;
    item.post(new Runnable() {
        @Override
        public void run() {
            finalItem.setSingleLine(false);
        }
    });
    return item;
} 
```

**UPDATE:**

And here is another answer.

Manually wrap listview in PopupWindow and show it under TextView on click and hide it on listItem click.

Simple implementation just to show idea:

```
public class MySpinner extends TextView {
    private PopupWindow _p;
    private ListView _lv;
    public MySpinner(Context context) {
        super(context);
        init();
    }
    public MySpinner(Context context, AttributeSet attributeSet){
        super(context, attributeSet);
        init();
    }

    private void init(){
        setBackgroundResource(R.drawable.spinner_background);
        final List<String> list = new ArrayList<String>();
        list.add("Very long text AAAAAAAAAAAAAAAA");
        list.add("1 Very long text AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");
        list.add("2 Very long text A");
        list.add("3 Very long text AAAAAAAAA");

        setMinimumWidth(100);
        setMaxWidth(200);

        _lv = new ListView(getContext());
        _lv.setAdapter(new ArrayAdapter<String>(getContext(), R.layout.simple_list_item_1, list));
        _lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                _p.dismiss();
                setText(list.get(i));
            }
        });

        setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {

                _p = new PopupWindow(getContext());
                _p.setContentView(_lv);
                _p.setWidth(getWidth());
                _p.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);
                _p.setTouchable(true);
                _p.setFocusable(true);
                _p.setOutsideTouchable(true);
                _p.showAsDropDown(view);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-23T09:05:37.487

Only a combination of solutions here worked for me (tested on Android 5.1 too) :

**spinner_item.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
             android:layout_height="wrap_content">

  <TextView
    android:id="@android:id/text1"
    style="?android:attr/spinnerItemStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="false"
    android:textAlignment="inherit"/>
</LinearLayout> 
```

**code**

```
 final ArrayAdapter<String> spinnerArrayAdapter=new ArrayAdapter<String>(activity,R.layout.spinner_item,android.R.id.text1,spinnerItemsList)
  {
  @Override
  public View getDropDownView(final int position,final View convertView,final ViewGroup parent)
    {
    final View v=super.getDropDownView(position,convertView,parent);
    v.post(new Runnable()
    {
    @Override
    public void run()
      {
      ((TextView)v.findViewById(android.R.id.text1)).setSingleLine(false);
      }
    });
    return v;
    }
  };
  spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-19T06:28:47.640

I have solved this problem by switching to dialog-style spinner:

```
<Spinner
  ...
android:spinnerMode="dialog" /> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-02T18:08:57.603

Adding a LinearLayout around the TextView allows the text to wrap correctly.

Layout (common_domainreferencemodel_spinner_item.xml):

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:padding="4dp">

       <TextView
            android:id="@+id/nameTextView"
            android:singleLine="false"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

</LinearLayout> 
```

Adapter:

```
public class DomainReferenceModelAdapter extends ArrayAdapter<DomainReferenceModel> {

    private List<DomainReferenceModel> objects;
    private LayoutInflater inflater;
    private int oddRowColor = Color.parseColor("#E7E3D1");
    private int evenRowColor = Color.parseColor("#F8F6E9");

    public DomainReferenceModelAdapter(Context context, int resource, List<DomainReferenceModel> objects) {
        super(context, resource, objects);
        this.objects = objects;
        this.inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    static class ViewHolder {
        public TextView nameTextView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return getViewInternal(position, convertView, parent, false);
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        return getViewInternal(position, convertView, parent, true);
    }

    private View getViewInternal(int position, View convertView, ViewGroup parent, boolean isDropdownView) {
        View view = convertView;
        if (view == null) {
            view = inflater.inflate(R.layout.common_domainreferencemodel_spinner_item, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.nameTextView = (TextView) view.findViewById(R.id.nameTextView);
            view.setTag(viewHolder);
        }
        if (isDropdownView) {
            view.setBackgroundColor(position % 2 == 0 ? evenRowColor : oddRowColor);
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        DomainReferenceModel model = objects.get(position);
        holder.nameTextView.setText(model.getName());
        return view;
    }

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-18T04:24:21.600

Achieving multi-line drop-down items on a `Spinner` while using a `Holo` theme isn't possible, from what I've tried.

A workaround solution is to:

*   create a style for the `Spinner` that doesn't inherit from `Holo`. This will enable multi-line drop-down items.
*   Style the Spinner 'manually' so it looks like it's `Holo`-themed.

This produces (showing closed and open states):

![enter image description here](../Images/d91984208f981aa78d6f185d47d9150b.png)

Details of implementation:

There is no way to inherit from a `Holo` theme on the `Spinner` and show multiple lines in the `Spinner` drop-down item as far as I can tell, even if we set the drop-down item's `TextView` `singleLine` attribute to `false` and supply a custom layout. I've also tried keeping the `Holo` style but altering the

```
android:spinnerStyle
android:spinnerItemStyle 
android:spinnerDropDownItemStyle 
```

styles attributes (example of using these attributes [here](https://stackoverflow.com/questions/13703233/style-android-spinner/13902362#13902362)) but I couldn't make it produce a multi-line result.

However, if we override the style for the `Spinner` and don't inherit `spinnerStyle` from `Holo`:

```
 <style name="AppTheme" parent="android:Theme.Holo.Light">
    <item name="android:spinnerStyle">@style/spinnerStyle</item>
</style>

<--no parent attribute-->
 <style name="spinnerStyle">
    <item name="android:clickable">true</item>
</style> 
```

then the drop-down item will support showing multiple lines. But now we have lost the `Holo` theme on the `Spinner` and the closed state looks like a `TextView` not a `Spinner` with no arrow or visual clue it's a `Spinner`. If we instead set `spinnerStyle` parent to: `parent="android:style/Widget.Spinner`:

```
<style name="spinnerStyle" parent="android:style/Widget.Spinner">
    <item name="android:clickable">true</item>
</style> 
```

the `Spinner` closed state will show the arrow but will be styled like the grey pre-Holo `Spinner` which looks out of place in a `Holo` app.

So, a possible solution is then:

*   **Override the theme for `spinnerStyle` and don't use `Holo` for parent.** This will enable multi-line text in the DropDown items.
*   **Change the `Spinner` background to look like it inherits the `Holo` theme.**

Here's an example:

Create a basic Activity:

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Spinner spinner = (Spinner)findViewById(R.id.styled_spinner);

    spinner.setAdapter(ArrayAdapter.createFromResource(this,
            R.array.items,
            R.layout.spinner_item));        
} 
```

Activity layout:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="50dip"
    tools:context=".MainActivity" >

    <Spinner
        android:id="@+id/styled_spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

styles:

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="android:Theme.Holo.Light">
        <item name="android:spinnerStyle">@style/spinnerStyle</item>
    </style>
    <style name="spinnerStyle">
        <item name="android:clickable">true</item>
        <item name="android:background">@drawable/spinner_background_holo_light</item>
    </style>
</resources> 
```

in drawable folder, place spinner_background_holo_light:

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false"
        android:drawable="@drawable/spinner_disabled_holo_light" />
    <item android:state_pressed="true"
        android:drawable="@drawable/spinner_pressed_holo_light" />
    <item android:state_pressed="false" android:state_focused="true"
        android:drawable="@drawable/spinner_focused_holo_light" />
    <item android:drawable="@drawable/spinner_default_holo_light" />
</selector> 
```

and include these drawables in your `drawables-hdpi` folder:

![enter image description here](../Images/0ad2dabd6297dd1c0b8c221fc9ac4107.png) spinner_default_holo_light.9.png

![enter image description here](../Images/83bed4620d003b5db217547602d4a199.png) spinner_disabled_holo_light.9.png

![enter image description here](../Images/4bc736e9d773d506fb4aee1d1e543a97.png) spinner_focused_holo_light.9.png

![enter image description here](../Images/7050c895fd52597aad4e033c35aab426.png) spinner_pressed_holo_light.9.png

This produces a spinner with `Holo`-themed closed state and multi-line items, as shown in the screenshots above.

The drop-down items in this example are not `Holo`-themed but perhaps it's an acceptable trade-off if multi-line display of the drop down items is really important.

In this example, `android:minSdkVersion` was set to `14` and `android:targetSdkVersion` to `17` in Manifest.

`Holo` graphics and the `spinner_background_holo_light.xml` code come from [HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere) Copyright (c) 2012 Christophe Versieux, Sergey Shatunov. See linked-to github project for license details.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-02-27T13:36:51.780

I faced to the same problem. I want to see 2 lines in dropdown list of spinner, but all solutions that I've found seem to me unreasonable to resolve such simple problem. I investigate [Spinner source code](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4.2_r1/android/widget/Spinner.java) and I found If we use **custom .xml** with attribute android:singleLine="false"

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/multiline_spinner_text_view"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:singleLine="false" /> 
```

and **default** ArrayAdapter, following code executed in [ListPopupWindow](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4.2_r1/android/widget/ListPopupWindow.java#ListPopupWindow.DropDownListView.obtainView%28int,boolean%5B%5D%29) everytime

```
 @Override
       View More obtainView(int position, boolean[] isScrap) {
            View view = super.obtainView(position, isScrap);

           if (view instanceof TextView) {
                ((TextView) view).setHorizontallyScrolling(true);
            }

            return view;        
} 
```

and that's why we see only one string line per list row, it 's actually scrolling.

To resolve such problem our view should be **not instance** of TextView, just put your TextView inside FrameLayout or LinearLayout.

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <CheckedTextView
            android:id="@+id/multiline_spinner_text_view"
            android:layout_width="fill_parent"
            android:layout_height="?android:attr/listPreferredItemHeight"
            android:singleLine="false" />

    </LinearLayout> 
```

and

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
               R.layout.multiline_spinner_dropdown_item,R.id.multiline_spinner_text_view,
                awasomeListValues); 
```

This solution works in both spinner mode: MODE_DROPDOWN and MODE_DROPDOWN.Hope it helps you!

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-01T10:57:24.380

I think there is a bug on android. You could try this. Remove the spaces from the text and then display it would work fine. If the length of the textview is < that of the string, it ignores all the characters after the space. For a work-around you could try this :

add a file to res/layout folder named multiline_spinner_dropdown_item.xml with the sample code:

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
style="?android:attr/spinnerDropDownItemStyle"
android:singleLine="false"
android:layout_width="match_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:ellipsize="marquee" /> 
```

and when you are creating the spinner create it from this layout.

Something like :

```
ArrayAdapter.createFromResource(this, items, R.layout.multiline_spinner_dropdown_item); 
```

Basically, copy the android.R.layout.simple_spinner_dropdown_item layout into the project and modify the layout by setting singleLine attribute to false in CheckedTextView.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-28T09:02:57.593

Reading this answer: [textview casting error:- android.widget.LinearLayout cannot be cast to android.widget.TextView](https://stackoverflow.com/questions/29291526/textview-casting-error-android-widget-linearlayout-cannot-be-cast-to-android-w#29293776) and this topic, I could solve this problem: We need a LinearLayout wrapping the TextView (The spinner text) to avoid the text getting out from the screen, but we will have some problems to solve. To start, create the layout (*I called it spinner_dd_item.xml*):

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:id="@+id/simple_spinner_dropdown"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:paddingBottom="5dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="5dp"
            android:textColor="@color/colorAccent"
            tools:text="Hello" />
    </LinearLayout> 
```

The next step is creating an ArrayAdapter instance to set it to the spinner:

```
 ArrayAdapter<CharSequence> arrayAdapter = new ArrayAdapter<CharSequence>(getActivity(), R.layout.spinner_dd_item,
            R.id.simple_spinner_dropdown, hashmapToString(hashMap, keys)) {
        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {
            return getView(position, convertView, parent);
        }
    };
    spinner.setAdapter(arrayAdapter); 
```

Don't forget adding the layout name and the TextView id on the ArrayAdapter because we added the LinearLayout and we need to specify the TextView, and override getDropDownView to get the view that displays the data at the specified position in the data set. Now, we can see the spinner working nice on newer and older android versions

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-27T13:49:43.620

Here's what I did to make it work:

```
ArrayAdapter<KeyValue> adapter = new ArrayAdapter<>(getContext(), R.layout.simple_dropdown_item_multiline, R.id.nameTextView, choices); 
```

And this is the content of "simple_dropdown_item_multiline":

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">

<TextView android:id="@+id/nameTextView"
          style="?android:attr/dropDownItemStyle"
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:ellipsize="marquee"
          android:paddingBottom="@dimen/large"
          android:paddingTop="@dimen/large"
          android:singleLine="false"
          android:textAppearance="?android:attr/textAppearanceLargePopupMenu"/> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-16T04:55:13.200

i just found it that android has existing style for this case

```
final Spinner pelanggaran = (Spinner) findViewById(R.id.pelanggaran);
ArrayAdapter<CharSequence> pelanggaran_adapter = ArrayAdapter.createFromResource(this,R.array.pelanggaran_array, android.R.layout.simple_expandable_list_item_1);
pelanggaran_adapter.setDropDownViewResource(android.R.layout.simple_expandable_list_item_1);
pelanggaran.setAdapter(pelanggaran_adapter); 
```

hope it solved you problem.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-12-28T12:28:55.247

```
ArrayAdapter<?> specAdapter =
   ArrayAdapter.createFromResource(
       getActivity().getBaseContext(),
       aa[position],
       android.R.layout.select_dialog_item);
specAdapter.setDropDownViewResource(android.R.layout.select_dialog_item); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-12T23:10:44.137

I had this same problem and found a solution.

I wanted the text to wrap in the initial display and in the dropdown view as well.

The text was wrapping in the initial display and for the dropdown I had found another solution recommending the use a custom view of a linear layout with fixed width enclosing a textview. This made the dropdown of the spinner look correct, as well as that of the initial selection. However, this caused a major problem on older devices.

The initial display would not refresh and the text took on a stacked look if I tried to select something else. and since it stacked downward adding a background didn't help. ![enter image description here](../Images/e8655238d679f2bfb861fdf57bac3124.png)

As it turns out adapters have a method called setDropDownViewResource() which allows you to set a different view for the dropdown than what is displayed in the spinner's initial selection.

```
 import org.holoeverywhere.widget.Spinner;

 ArrayAdapter adapter1 = ArrayAdapter.createFromResource(this,R.array.array_of_strings,R.layout.simple_list_item_1);
 adapter1.setDropDownViewResource(R.layout.my_simple_list_item_1);
 spQ1.setAdapter(adapter1); 
```

in this example the simple_list_item is the default view supplied by android and my_simple_list_item is

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="300dp"
android:layout_height="wrap_content" >   

<TextView
  android:id="@+id/android:text1"
  android:layout_width="wrap_content"
  android:layout_height="50dp"
  android:ellipsize="marquee"
  android:layout_gravity="center_vertical"
  android:singleLine="false"/>

</LinearLayout> 
```

Now the text wraps inside the dropdown view of the spinner AND in the spinners displayed selection.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-04-16T12:18:35.197

Just wrap `TextView` with `LinearLayout`:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content">
    <TextView
            android:id="@android:id/text1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-25T16:13:04.457

I resolved this issue by adding \n (new line) in the text (as simple as that).

```
<string name="bmr1">sedentary (little or no exercise)</string>
<string name="bmr2">lightly active (light exercise/\nsports 1-3 days/week)</string>
<string name="bmr3">moderately active (moderate exercise/\nsports 3-5 days/week)</string>
<string name="bmr4">very active (hard exercise/\nsports 6-7 days a week)</string>
<string name="bmr5">extra active (very hard exercise/sports &amp;\nphysical job or 2x training)</string> 
```

Looks like this:

[![enter image description here](../Images/cf2d0a866b86e89a8afdc2783f698b99.png)](https://i.stack.imgur.com/fxMai.png)

And this is the layout that the spinner uses as row:

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/default_listview_row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="false"
    android:gravity="center_vertical"
    android:textColor="@android:color/white"
    android:background="@android:color/transparent"
    android:padding="5dp" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-13T13:52:36.370

```
 Spinner sp_type = dialogView.findViewById(R.id.sp_type);
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getFragment().getContext(), android.R.layout.simple_spinner_dropdown_item, getFragment().getResources().getStringArray(R.array.courier_delivery_types_array));
dataAdapter.setDropDownViewResource(android.R.layout.simple_list_item_1); 
```

simple_list_item_1 will display spinner dropdown textview with multiple lines. But spinner selected text shows in single line. We can replace 2nd line with simple_list_item_1 instead of simple_spinner_dropdown_item(For multiple lines)

# android - 如何用 viewpager 片段替换片段

> ID：14139107
> 
> 赞同：2
> 
> 时间：2013-01-03T12:37:31.780
> 
> 标签：android, android-fragmentactivity

我在左侧**Fragment Activity**上有一组按钮。我还创建了两个片段，`webview`并`ViewPagerFragment`带有 3 个`ImageFragments`。问题是当我尝试**用 Viewpager 替换 webview 时，**我无法再滑动，只`ImageFragment`显示 1 个。我不能再扫过它们了。

这是我的 ImageFragment

```
public class ImageFragment extends Fragment {
private int imageResourceId;
OnClickListener listener;
public MyAdapter mAdapter;
public ViewPager mPager;
public ImageFragment(){

}

public static Fragment newInstance() {
    // TODO Auto-generated method stub
    ImageFragment mg = new ImageFragment();
    return mg;
}

public ImageFragment(int imageResourceId) {
    this.imageResourceId = imageResourceId;
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.e("Test", "ImageFragment");

}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.image_layout, container, false);
    View view2 = inflater.inflate(R.layout.pagerview,null);

    mPager = (ViewPager) view.findViewById(R.id.pager);
    Log.d("ImageFragment","mPager = "+mPager.toString());
    mAdapter = new MyAdapterDummy().new MyAdapter(getFragmentManager());
    new setAdapterTask().execute();

    ImageView imageView1 = (ImageView) view.findViewById(R.id.imageView1);
    ImageView imageView2 = (ImageView) view.findViewById(R.id.imageView2);
    ImageView imageView3 = (ImageView) view.findViewById(R.id.imageView3);
    ImageView imageView4 = (ImageView) view.findViewById(R.id.imageView4);
    ImageView imageView5 = (ImageView) view.findViewById(R.id.imageView5);
    ImageView imageView6 = (ImageView) view.findViewById(R.id.imageView6);

    imageView1.setImageResource(imageResourceId);
    imageView2.setImageResource(imageResourceId);
    imageView3.setImageResource(imageResourceId);
    imageView4.setImageResource(imageResourceId);
    imageView5.setImageResource(imageResourceId);
    imageView6.setImageResource(imageResourceId);

    return view;
}

private class setAdapterTask extends AsyncTask<Void,Void,Void>{
      protected Void doInBackground(Void... params) {
            return null;
        }

        protected void onPostExecute(Void result) {
                   mPager.setAdapter(mAdapter);

        }
} 
```

这是适配器

```
public class MyAdapterDummy extends FragmentActivity {
static String TAG = "ViewPagerExample";
MyAdapter mAdapter;
ViewPager mPager;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    FragmentManager mgr = getSupportFragmentManager();

}

public class MyAdapter extends FragmentPagerAdapter {

    public MyAdapter(FragmentManager fm) {

        super(fm);
    }

    public int getCount() {
        return 3;
    }

    public Fragment getItem(int position) {
        Log.d(TAG, "Item Position : " + position);
        switch (position) {
        case 0:
            return new ImageFragment(R.drawable.ic_launcher);
        case 1:
            return new ImageFragment(R.drawable.ic_launcher);
        case 2:
            return new ImageFragment(R.drawable.ic_launcher);

        default:
            return null;

        }
    }

    @Override
    public CharSequence getPageTitle(int position) {
        String str = "Top Listings";
        return str;
    }

} 
```

}

任何帮助，将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:16:22.927

我解决了这个......

您还必须将 ViewPager 转换为片段。我知道它是一个 ViewGroup 但仍然。然后你可以在你的onclick中使用标准的交易替换方法来替换一个片段。

这是有更改的代码。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    l.setItemChecked(position, true);
    Fragment df = DetailsFragment.newInstance();
    Fragment page = FragmentPagerAdapterClass.newInstance();

    if (listener != null) {
        if (position == 0) {
            Log.d(TAG, "Position = " + position);

            getFragmentManager().beginTransaction().remove(DetailsFragment.newInstance());
            getFragmentManager().beginTransaction()
            .replace(R.id.layout_detail, FragmentPagerAdapterClass.newInstance()).commit();
            getFragmentManager().executePendingTransactions();

        } else {
            Log.d(TAG, "Position = " + position);

            McDonalds c = EU.get(position);
            String url = getString(c.url);

            new DetailsFragment().setUrl(url);

               getFragmentManager().beginTransaction().remove(FragmentPagerAdapterClass.newInstance());
            getFragmentManager().beginTransaction()
                .replace(R.id.layout_detail, DetailsFragment.newInstance()).commit();
            getFragmentManager().executePendingTransactions();

            // listener.onCountrySelected(EU.get(position));
        }
    }
} 
```

无论如何....谢谢您的所有支持:)

# air - Corona SDK 对比 土坯空气

> ID：14139110
> 
> 赞同：1
> 
> 时间：2013-01-03T12:37:38.663
> 
> 标签：air, game-physics, coronasdk

我正在使用 ObjectiveC 为 iOS 开发应用程序，现在想为多个平台创建游戏。我已经检查了 Corona SDK（甚至写了一些代码），它看起来不错，昨天我听说 Adob​​e AIR 现在非常成熟，想在开始之前检查一下，甚至写一行代码。我无法决定进入哪个框架：Corona SDK 或 Adob​​e AIR，需要您的帮助。

我阅读了很多关于这个问题的博客，但没有一个能帮助我做出决定……我需要的是用物理、关卡等构建 2D 游戏的最简单方法。我不想自己编写扩展程序支持 iOS 或 Android 上的某些功能。在路上我也进入了 Cocos2D 但这远远超出了我的需求（它太原生了，然后 Corona 相对复杂）

我计划进入的主要市场是 iOS 和 Android（其他支持很好）。任何有使用这两个平台经验的人都可以解释一下每个平台的优缺点。至少帮助我了解未来的支持设备，真正编码一次然后编译到每个操作系统有多难（听说在 AIR 上有时可能需要认真努力，但不知道这是不是真的或为什么.. .)，开发环境或任何其他我想不到的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:49:33.333

这实际上是个人喜好问题。但是，由于有一些游戏编程经验，我发现 CoronaSDK 非常简单易用。我非常喜欢 Lua，所以用它编写应用程序是一种纯粹的乐趣，但我可以想象有人会被这种语言拒之门外。

然而，有一个重要因素不太值得讨论：Corona 旨在制作游戏。从 API 到模拟器，一切都是为简化*游戏*创建而量身定制的。我不太确定 AIR 的情况是否如此，它更普遍。如果您也想创建游戏以外的东西，或者 - 如果您只是想开发一个简单的游戏，它可以是 +。

它还具有很好的内置物理特性。

# python - Python 禁用某些对象的引用计数

> ID：14139111
> 
> 赞同：10
> 
> 时间：2013-01-03T12:37:41.767
> 
> 标签：python, refcounting

这个问题来源于[这里](https://stackoverflow.com/q/14124588/898747)。

我有三个包含 python 对象（`l1`和`l2`）`l3`的大列表。这些列表是在程序启动时创建的，它们总共占用 16GB 的 RAM。该程序将专门用于 linux。

在创建这些列表或这些列表中的对象后，我不需要以任何方式或形式对其进行修改。它们必须保留在内存中，直到程序退出。

我在我的程序中使用 os.fork() 和 multiprocessing 模块来生成多个子进程（目前最多 20 个）。这些子流程中的每一个都需要能够读取三个列表（`l1`和`l2`）`l3`。

我的程序在其他方面运行良好且速度非常快。但是我遇到了内存消耗问题。由于 Linux 上的写时复制方法，我希望每个子进程都可以使用这三个列表而无需将它们复制到内存中。但是，情况并非如此，因为在这些列表中的任何一个中引用任何对象都会增加相关的引用计数，因此会导致整个内存页面被复制。

所以我的问题是：

我可以禁用这些列表中所有对象`l1`的`l2`引用计数吗？`l3`基本上使整个对象（包括元数据，如引用计数）只读，这样它在任何情况下都不会被修改（我认为，这将允许我利用写时复制）。

目前我担心我被迫转向另一种编程语言来完成这项任务，因为我目前不需要的“功能”（引用计数），但仍然强加给我并导致不必要的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:45:02.880

您不能，引用计数是CPython 的*基础*（引用实现，以及您正在使用的实现）。在对象上使用方法会导致引用计数发生变化，项目订阅或属性访问会导致对象从堆栈中添加和删除，堆栈使用引用计数等。你无法解决这个问题。

如果列表的内容没有改变，请使用`tuple()`s 代替。不过，这不会改变他们将被重新计算的事实。

Python 的其他实现（Jython（使用 Java 虚拟机）、IronPython（一种 .NET 运行时语言）或 PyPy（用 Python 实现的 Python，但试验了 JIT 和其他编译器技术）可以自由使用不同的内存管理方法，以及可能会也可能不会解决您的记忆问题。

# html - HTML 电话：私人电话的链接

> ID：14139114
> 
> 赞同：2
> 
> 时间：2013-01-03T12:37:47.907
> 
> 标签：html, ios, mobile, web, tel

当用户触摸移动网页上的电话链接时，试图找出是否有办法将来电者号码保密。我们尝试在电话号码前加上 *67 前缀，但是苹果的 iOS 会在号码带有 * 或 # 时阻止通话，如他们的文档中所述。例如，

```
<a href="tel:*67215-555-5555">call</a> 
```

看起来像一个有效的链接，但不会在 iPhone 上拨打电话。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T12:46:06.213

这是在移动网页中拨打电话的几行代码。

```
<p>Making call from webpage.</p>
<a href='#' id='contact' tel:'+1800229933'>contact: 1800229933</a> 
```

如果您想现场观看，请在您的手机中浏览此网址。 [http://openstrides.com/mobile-openstrides-website/contact.html](http://openstrides.com/mobile-openstrides-website/contact.html)

这是深度学习的有用链接。 [http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)

# c# - WPF C# 自定义面板

> ID：14139117
> 
> 赞同：1
> 
> 时间：2013-01-03T12:37:52.840
> 
> 标签：c#, wpf, xaml, user-controls

我想创建一个用户控件，它的工作方式与经典面板（或画布）控件相同，希望我希望有一些用户无法删除的默认按钮。

我试过这个：

```
namespace WpfApplication1
{
    public class CustomPanel : Canvas
    {
        public CustomPanel()
        {
            Button b = new Button();
            b.Name = "Button1";
            b.Content = "Button1";
            this.Children.Add(b);
        }
    }
} 
```

它可以工作，但是当我编译它并在设计器中创建 CustomPanel 的实例然后尝试插入另一个项目时，在构造函数中创建的 Button 被删除。

这是正确的方法，还是有更好（更有效/优雅）的方法，然后修改构造函数？

提前感谢您的任何努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:57:22.583

您的问题是您在构造函数中将 Button 添加到**Children**对象，然后在 XAML 中实例化它时替换整个**Children对象。**我猜你的 XAML 看起来像这样：？

```
<wpfApplication3:CustomPanel>
   <Button Content="New b"/>
</wpfApplication3:CustomPanel> 
```

如果您像这样启动它，您会看到按钮保持在原位。

```
public MainWindow()
{
    InitializeComponent();
    Loaded += OnLoaded;
}

private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
{
    CustomPanel p = new CustomPanel();
    p.Children.Add(new Button(){Content = "T"});
    gr.Children.Add(p);
} 
```

你可以做的是避免这种情况：

```
public CustomPanel()
{
    Initialized += OnInitialized;
}

private void OnInitialized(object sender, EventArgs eventArgs)
{
    var b = new Button { Name = "Button1", Content = "Button1" };
    Children.Insert(0,b);
} 
```

现在等待 XAML 替换了 Children 对象，然后再添加按钮。

# c# - C#下载和删除文件

> ID：14139126
> 
> 赞同：1
> 
> 时间：2013-01-03T12:38:39.857
> 
> 标签：c#, file, download

> **可能重复：**
> [在 Response.WriteFile() 中使用文件后，何时可以删除文件？](https://stackoverflow.com/questions/200901/when-can-i-delete-a-file-after-using-it-in-response-writefile)

我正在使用以下代码下载临时文件然后将其删除，但是最后一条语句未执行，我该怎么做

```
Response.ContentType = "application/octet-stream";
Response.AddHeader("Content-Disposition", "attachment; filename=" + sFileName);
Response.Clear();
Response.WriteFile(sFilePath);
//Response.WriteFile(Server.MapPath(sFilePath));            
Response.End();
File.Delete(sFilePath); 
```

# java - 为什么 Google Cloud 使用 Google 应用引擎 Java 存储文件的大小小于上传的文件大小

> ID：14139127
> 
> 赞同：1
> 
> 时间：2013-01-03T12:38:49.213
> 
> 标签：java, google-app-engine, google-cloud-storage

将文件上传到 Google Cloud Storage 时，存储文件的大小与原始上传文件的大小不同。存储文件的大小比原始大小要小得多。我的上传servlet如下图所示，

```
public class UploadServlet extends HttpServlet{
    private static final long serialVersionUID = 1L;
    private StorageService storage = new StorageService();
    private static int BUFFER_SIZE =1024 * 1024* 10;
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    @Override
    public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        ServletFileUpload upload = new ServletFileUpload();
        boolean isMultipart = ServletFileUpload.isMultipartContent(req);
        if (!isMultipart) {
            resp.getWriter().println("File cannot be uploaded !");
            return;
        }
        FileItemIterator iter;
        try {
            iter = upload.getItemIterator(req);
            while (iter.hasNext()) {
                FileItemStream item = iter.next();
                String fileName = item.getName();
                String fieldName = item.getFieldName();
                String mime = item.getContentType();
                if (fieldName.equals("file")) {  // the name of input field in html
                    InputStream is1 = item.openStream();
                    try {
                        FileService fileService = FileServiceFactory.getFileService();
                        AppEngineFile file = fileService.createNewBlobFile(mime, fileName);
                        boolean lock = true;
                        FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
                        byte[] b1 = new byte[BUFFER_SIZE];
                        int readBytes1;
                        while ((readBytes1 = is1.read(b1)) != -1) {
                            writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));
                            storage.init(fileName, mime);
                            storage.storeFile(b1, readBytes1);
                        }
                        writeChannel.closeFinally();
                        String blobKey = fileService.getBlobKey(file).getKeyString();
                        Entity input = new Entity("Input");
                        input.setProperty("Input File", blobKey);
                        datastore.put(input);
                        is1.close();
                        storage.destroy();
                    } catch (Exception e) {
                        e.printStackTrace(resp.getWriter());
                    }
                }
            }
        } catch (FileUploadException e) {
            // log error here
        }
    }
} 
```

我的存储代码如下所示，

```
public class StorageService {
    public static final String BUCKET_NAME = "MyBucket";
    private FileWriteChannel writeChannel = null;
    FileService fileService = FileServiceFactory.getFileService();
    private BufferedOutputStream bos = null;
    private static final Logger log = Logger.getLogger(StorageService.class.getName());
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    public void init(String fileName, String mime) throws Exception {
        System.out.println("Storage service:init() method:  file name:"+fileName+" and mime:"+mime);
        log.info("Storage service:init() method:  file name:"+fileName+" and mime:"+mime);
        GSFileOptionsBuilder builder = new GSFileOptionsBuilder()
            .setAcl("public_read")
            .setBucket(BUCKET_NAME)
            .setKey(fileName)
            .setMimeType(mime);
        AppEngineFile writableFile = fileService.createNewGSFile(builder.build());
        boolean lock = true;
        writeChannel = fileService.openWriteChannel(writableFile, lock);
        bos = new BufferedOutputStream(Channels.newOutputStream(writeChannel));
    }
    public void storeFile(byte[] b, int readSize) throws Exception {
        bos.write(b,0,readSize);
        System.out.println(readSize);
        bos.flush();
    }
    public void destroy() throws Exception {
        log.info("Storage service: destroy() method");
        bos.close();
        writeChannel.closeFinally();
    }
    public BlobKey getBlobkey (String filename) {
        BlobKey bk = blobstoreService.createGsBlobKey("/gs/MyBucket/"+filename);
        return bk;
    }
} 
```

当我上传一个 2 MB 的文件时，它只存储 155 个字节。我不明白哪里出错了。

请给我一个想法，

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:12:52.213

在您的 UploadServlet 类中，您对每个文件调用 storage.init(...) 多次，总是重新创建文件。这不应该发生：

```
while ((readBytes1 = is1.read(b1)) != -1) {
    writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));
    storage.init(fileName, mime);                          // <- HERE
    storage.storeFile(b1, readBytes1);
} 
```

您需要将 init 语句移出循环，放在它前面。

# android - 具有活动生命周期的 android AsyncTask

> ID：14139128
> 
> 赞同：6
> 
> 时间：2013-01-03T12:38:53.197
> 
> 标签：android, android-activity, android-asynctask, activity-lifecycle

我正在使用`AsyncTask`以下载我的活动中的图像

流程是这样的：

```
protected void onPreExecute() {
        \\begin animation
}

protected IUpiResponse doInBackground(String... params) {
         \\ download the image
}

protected void onPostExecute(IUpiResponse upiResponse) {
         \\stop the animation
} 
```

直到这里一切都很好，如果我在异步任务工作时进入后台，问题就开始了，有时我在动画停止时得到一个异常空指针，因为视图不再有效（我猜），

如果活动在前台，我可以在停止动画之前检查，但我更喜欢避免这种方法，我还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:03:41.003

我更喜欢避免这种`asyncTask`方法，而是在一个简单的线程中下载图像，这也将它们保存到文件系统等持久层，然后发送一个`Intent`,

**注意：**如果后台活动`Intent`（如果您按照建议在 onResume 和 onPause 中注册和取消注册您的接收器）将不会收到，因此为避免内部出现此类情况，`onResume`您可以检查是否有更新等待您

# websocket - Socket.io，端口 80 上的 HAProxy 无法与趋势科技一起使用

> ID：14139133
> 
> 赞同：2
> 
> 时间：2013-01-03T12:39:05.337
> 
> 标签：websocket, socket.io, haproxy

HAProxy 监听 80 端口，配置类似于[HAProxy + WebSocket Disconnection](https://stackoverflow.com/questions/4360221/haproxy-websocket-disconnection/4737648#4737648)

Socket.io 监听一个私有端口。

对于绝大多数人来说，这很好用。他们通过端口 80 连接，一切都很好。

但是，有些人安装了趋势科技“企业安全无忧”，这会破坏使用 socket.io 的 websocket 连接。如果我强制它使用 xhr-polling，它工作正常。

Engine.io 适用于 Trend 用户，因此 socket.io 如何意识到 websocket 连接失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:30:08.563

你试过ssl版本了吗？（端口 443）我曾经也遇到过端口 80 的问题。强制用户使用 443 可以减少一些无法访问您的应用的人。

# json - 如何在杰克逊生成的 JSON 模式中包含 Bean 验证约束

> ID：14139136
> 
> 赞同：9
> 
> 时间：2013-01-03T12:39:07.743
> 
> 标签：json, jackson, bean-validation

我正在使用 Jersey 1.2（仍在使用 JDK 1.5）并开发了一个 REST Booking Web 资源和一个相关的 Booking POJO。

我使用 Bean Validation 来限制字段的大小/类型，例如

```
@NotNull
@Size(message="invalid size",min=3,max=20)
@Pattern(message="invalid pattern",regexp = "^[A-Za-z]*")
@JsonProperty(value = "forename")
private String forename; 
```

并使用了 Jackson ObjectMapper.generateJsonSchema 类来生成 JSON 模式，但是这忽略了所有验证注释，所以我得到：

```
"forename" : {
  "type" : "string"
} 
```

有没有办法将限制信息作为生成模式的一部分包含在内？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-16T21:26:46.317

看起来 jackson-module-jsonSchema 2.5.0+ 现在支持一些注释：

```
ValidationSchemaFactoryWrapper personVisitor = new    
ValidationSchemaFactoryWrapper();
ObjectMapper mapper = new ObjectMapper();
mapper.acceptJsonFormatVisitor(Person.class, personVisitor);
JsonSchema personSchema = personVisitor.finalSchema(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T18:47:13.257

没有办法做到开箱即用，但是这个扩展模块：

[https://github.com/FasterXML/jackson-module-jsonSchema](https://github.com/FasterXML/jackson-module-jsonSchema)

应该让您修改模式生成器以添加您想要的任何额外信息。警告：这是一个新项目，可能需要您使用 Jackson 核心组件的 2.2.0-SNAPSHOT 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T15:46:21.600

只是说这就是我解决这个问题的方法。我使用了非常好的带有标志的 jsonschema2pojo 插件 - includeJsr303Annotations

```
<build>
        <plugins>
            <plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb2-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.jsonschema2pojo</groupId>
                <artifactId>jsonschema2pojo-maven-plugin</artifactId>
                <version>0.4.11</version>
                <configuration>
                    <includes>
                        <include>*.json</include>
                    </includes>
                    <useJodaDates>true</useJodaDates>
                    <sourceDirectory>${basedir}/src/main/resources/webapi/jsonschema</sourceDirectory>
                    <targetPackage>com.ba.schema.json.jsonschemav02</targetPackage>
                    <includeJsr303Annotations>true</includeJsr303Annotations>
                    <includeHashcodeAndEquals>false</includeHashcodeAndEquals>
                    <includeToString>false</includeToString>
                    <outputDirectory>${project.build.directory}/generated-sources/xjc/</outputDirectory>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

我还没有尝试过 jackson-module-jsonSchema 2.5.0+，因为上面可以满足我的需要。感谢大家的帮助。

# javascript - 方法 selectmenu() 不存在？

> ID：14139137
> 
> 赞同：2
> 
> 时间：2013-01-03T12:39:08.140
> 
> 标签：javascript, jquery, jquery-mobile

你能帮我处理这段代码吗：

javascript：

```
$(document).ready(function() {
            $('#roomresults').append('<option value="ahoj">say hallo</option>');
            $('#roomresults').selectmenu('refresh'); 
            }); 
```

和我的选择：

```
<label for="roomresults"> Results: </label>
<select name="roomresults" id="roomresults" data-theme="c">
</select> 
```

它看起来很简单，但是当我运行它时，我的 javascript 控制台会告诉我

> 未捕获的类型错误：对象 [对象对象] 没有方法“选择菜单”

哪里有问题？谢谢你的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:46:12.383

不要使用这种语法：

```
$(document).ready(function() {
    $('#roomresults').append('<option value="ahoj">say hallo</option>');
    $('#roomresults').selectmenu('refresh'); 
}); 
```

像这样使用它：

```
$(document).live('pageinit',function(e,data){
    $('#roomresults').append('<option value="ahoj">say hallo</option>');
    $('#roomresults').selectmenu('refresh'); 
}); 
```

原因：**$(document).ready(function() {**还不够，此时 jQuery mobile 开始将页面加载到 DOM 中。事件***pageinit***用于检查 jQM 是否加载成功。只有在此事件之后或期间，您可以使用 jQM 功能，例如 selectmenu ***('refresh')***。

您可以在此处找到更多相关信息：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

没有证据的答案是什么：http: [//jsfiddle.net/Gajotres/2wmZK/](http://jsfiddle.net/Gajotres/2wmZK/)

# python - 我需要帮助弄清楚为什么我的正则表达式看起来不是确定性的

> ID：14139140
> 
> 赞同：0
> 
> 时间：2013-01-03T12:39:23.873
> 
> 标签：python, regex

我使用正则表达式从输入文本文件中提取和弦。虽然它大部分时间都在工作，但它在某个文件上失败了。

这是我的正则表达式代码：

```
def getChordMatches(line):
    import re

    notes = "[ABCDEFG]";
    accidentals = "(?:#|##|b|bb)?";
    chords = "(?:maj|min|m|sus|aug|dim)?"
    additions = "[0-9]?"
    chordFormPattern = notes + accidentals + chords + additions
    fullPattern = chordFormPattern + "(?:/%s)?\s" % (notes + accidentals)
    matches = [removeWhitespaces(x) for x in re.findall(fullPattern, line)]
    positions = [x.start() for x in re.finditer(fullPattern, line)]

    return matches, positions 
```

这是它工作时的结果：

```
 line:      Em             C  C/B
 matches: [u'Em', u'C', u'C/B']
position: [5, 20, 23] 
```

此行来自未产生正确结果的文件：

```
 line:   Am           Am/G       D7/F#                 Fmaj7
 matches: [u'Fmaj7']
position: [48] 
```

我应该从哪里开始挖掘？编码、特殊字符、制表符……？

*编辑*

这是上面输出的来源：

```
line = unicode(l, encoding='utf-8') 
matches, positions = getChordMatches(line) 
print '    line:', line 
print ' matches:', matches 
print 'position:', positions 
```

*编辑*

完整的正则表达式模式是：

```
[ABCDEFG](?:#|##|b|bb)?(?:maj|min|m|sus|aug|dim)?[0-9]?(?:/[ABCDEFG](?:#|##|b|bb)?)?\s 
```

*编辑*

失败行的十六进制转储（我认为）：

```
hexdump -s 45 -n 99 input.txt 
000002d 20 41 6d 20 20 20 20 20 20 20 20 20 20 41 6d 2f 
000003d 47 20 c2 a0 20 20 20 20 20 20 44 37 2f 46 23 20 
000004d 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 
000005d 46 6d 61 6a 37 0a 49 20 6c 6f 6f 6b 20 61 74 20 
000006d 79 6f 75 20 61 6c 6c 20 73 65 65 20 74 68 65 20 
000007d 6c 6f 76 65 20 74 68 65 72 65 20 74 68 61 74 27 
000008d 73 20 73 
0000090 
```

*编辑*

正如在接受的答案中提到的，它是由非中断空间引起的。使用`line = unicode(l, encoding='utf-8').replace(u"\u00A0", " ")`可以解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:32:59.463

我怀疑问题与以下两个字节有关：

000003d 47 20 **c2 a0** 20 20 ...

这似乎是一个 UTF-8 编码的不间断空格 (U+00A0)。如果这是你的正则表达式的绊脚石，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T13:38:33.517

我认为问题是你在和弦后给出的字符与 \s 不匹配，而正则表达式需要空格字符。在任何情况下，正则表达式都是错误的，因为它在最后一个和弦之后需要一个空格。

尝试使用 \b 而不是 \s

（评论后编辑）

# c# - C# WPF 将画布保存为图像，包括其子动态

> ID：14139141
> 
> 赞同：1
> 
> 时间：2013-01-03T12:39:26.173
> 
> 标签：c#, .net, wpf, canvas

我是 wpf 开发的新手。我已经在运行时动态地在画布中添加了一个图像，并且我正在尝试将该图像容器（即画布）保存为 png 图像。但我没有正确获得输出图像。我得到一个空白的png图像。谁能告诉我的代码逻辑有什么问题。

**代码**

```
private void CreateSaveBitmap1(string filename, Rect rect)
{
    System.Windows.Controls.Image bg = new System.Windows.Controls.Image();
    bg.Source = new BitmapImage(new Uri(filename, UriKind.Relative));

    Canvas imageCan = new Canvas();
    imageCan.Height = 800;
    imageCan.Width = 1000;

    Canvas.SetLeft(bg, 0);
    Canvas.SetTop(bg, 0);

    bg.RenderTransform = trGrp; //trGrp is the TransformGroup object.

    RenderTargetBitmap rtb = new RenderTargetBitmap((int)imageCan.Width, (int)imageCan.Height, 96d, 96d, System.Windows.Media.PixelFormats.Default);
    rtb.Render(imageCan);

    //var crop = new CroppedBitmap(rtb, new Int32Rect((int)rect.X, (int)rect.Y, (int)rect.Width, (int)rect.Height));            

    BitmapEncoder pngEncoder = new PngBitmapEncoder();
    pngEncoder.Frames.Add(BitmapFrame.Create(rtb));

    using (var fs = System.IO.File.OpenWrite(@"D:\test\nowTest.png"))
    {
        pngEncoder.Save(fs);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:34:23.987

您应该通过调用[UpdateLayout](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout.aspx)或[InvalidateVisual](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatevisual.aspx)来强制画布的初始布局：

```
imageCan.UpdateLayout();

RenderTargetBitmap rtb = ...
rtb.Render(imageCan); 
```

并且可能需要通过设置[BitmapCacheOption.OnLoad](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)来强制立即加载图像：

```
var image = new BitmapImage();
image.BeginInit();
image.CacheOption = BitmapCacheOption.OnLoad;
image.UriSource = new Uri(filename, UriKind.Relative);
image.EndInit();
bg.Source = image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T11:01:44.583

我有过类似的问题。
它不仅会影响 RenderTargetBitmap，还会影响 XPS 和 PDF 输出。不幸的是，真正对我有用的唯一方法有点难看：
我必须将它添加到可视化树中并调用更新布局。

这意味着我在窗口某处有一个画布，添加了它，称为 UpdateLayout，创建了导出并随后将其删除

其他一切（例如克莱门斯所说的）都行不通。所以这个解决方案非常难看，但至少它以某种方式起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T17:27:04.793

您应该更新画布布局

使用 UpdateLayout 方法：MyCanvas.UpdateLayout();

另外，您应该检查画布高度和风度必须大于 0；

th

# c# - C++ vs C# 用于开发 OpenGL 3D 应用程序（不是游戏）

> ID：14139142
> 
> 赞同：2
> 
> 时间：2013-01-03T12:39:38.623
> 
> 标签：c#, c++, opengl, 3d

我有一个大学项目来制作一个 3D 应用程序，它执行以下操作：

1.  一个真实的物理对象在其上带有记录硬件的轨迹上运行（3 轴加速度计和陀螺仪）
2.  我的应用程序从文件中获取存储的信息，并在窗口中生成 3D 模型，在表面上重新创建真实对象的轨迹 - 就像在 3D 空间中移动和旋转的立方体。

通过搜索网络和询问朋友，我发现我应该使用 OpenGL（因为该应用程序应该可以在一段时间后在手持设备上使用）。**问题**是我应该使用哪种语言 - C# 或 C++？我知道，对于游戏来说，C++ 是首选（更快且资源更便宜），但由于这个应用程序更像（如果不完全是）一部短片 3D 电影，长度不超过 2-3 分钟，纹理和对象很少，将实际上有区别吗？

我在最近的项目中更习惯于 C#，现在当我试图回到 C++ 时，我发现它非常困难。所以我确实更喜欢 C#，但如果 C++ 的好处是值得的，我会回到它。另一方面，我对 OpenGL 很陌生，那里的概念让我很头疼。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:44:19.503

你应该使用 C#。如果您对 C++ 不满意，并且对该语言不是很熟悉，那么使用 C++ 是没有意义的，那么您将无法从它的性能中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:43:50.803

不会有明显的差异，尤其是因为您不会使用大量资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T12:43:58.120

**除非您计划渲染大量**3D 网格，否则将C# 与诸如[OpenTK 之](http://www.opentk.com/)类的东西一起使用会很好。如果你更熟悉 C#，我肯定会走这条路。

 **此外，由于您是通过板载硬件与软件模拟来记录对象的物理特性，因此任何一种语言的计算速度优势都将是最小的。

查看[OpenTK Gallery中的示例库](http://www.opentk.com/project/all)**

# c# - 表格到期

> ID：14139147
> 
> 赞同：0
> 
> 时间：2013-01-03T12:39:50.233
> 
> 标签：c#, asp.net, .net, session

在我的表单中，我有一个位于 radajaxpanel 内的计时器。此计时器用于每 1 分钟自动保存一次表单。

现在我的问题是每当调用自动保存时，它都会更新会话超时。但我需要的是在空闲一个小时后显示通知（要求用户更新会话，否则我将注销用户）并忽略自动保存会话超时更新。

更新：

这是代码

```
<telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server">
    <asp:Timer ID="Timer1" runat="server"  OnTick="AutoSaveNotificationCallBackUpdate" Interval="60000" />

</telerik:RadAjaxPanel> 
```

AutoSaveNotificationCallBackUpdate 将进行回发，从而重置我的会话超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:02:32.413

您可以在客户端使用计时器。这是示例代码，不完全是，但可以帮助您弄清楚要做什么。

```
var timer;

function initTimer(){
    clearTimeout(timer);
    timer = setTimeout(function(){
         if(!confirm("Do you want to continue?")) {
              // do some postback to logout, e.g. trigger a logout button 
         }
         else 
              initTimer();
    }, 36000);
}

// in this case, if user does not click in an hour, 
// the confirm dialog will display.
document.onclick = function(){
    // reset the timer every time user click on page
    initTimer();
});

window.onload = function(){
    initTimer();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:03:06.423

您可以将以下代码保存到`interval.js`

```
if(window.intervals)
    ;
else {
    function Interval() {
        var instance=this;
        var a=[];

        Interval.toString=function () {
            return '[Interval]';
        }

        instance.toString=function () {
            return '[object Interval]';
        }

        instance.Register=function (x, code, delay) {
            a[x]=setInterval(code, delay);
        }

        instance.Deregister=function (x) {
            if(x in a)
                clearInterval(a[x]);
        }
    }

    window.intervals=new Interval();
} 
```

然后将其包含在

```
<script src='interval.js'></script> 
```

或者

```
<script src='YourSubfolder/interval.js'></script> 
```

在您的页面中，您可以注册一个间隔：

```
intervals.Register('YourIntervalName', YourMethod, millisecondsInterval); 
```

或注销它：

```
intervals.Deregister('YourIntervalName'); 
```

# enterprise-architect - EA 的包文档 HTML 报告：图表中指向外部网站的不合格超链接

> ID：14139148
> 
> 赞同：0
> 
> 时间：2013-01-03T12:39:54.923
> 
> 标签：enterprise-architect

从 EA 包生成 HTML 报告时，超链接会以这样一种方式导出，以至于在 Internet Explorer 或 Firefox 中显示时它们不起作用。这是因为导出的 HTML 超链接不正确。假设我将超链接元素添加到指向“http://www.google.de”（超链接类型：网站）的图表中，它将生成以下 HTML 代码： `<area shape="rect" coords="73,10,223,30" href="$inet://http://www.google.de">`.

Firefox 将此解析为`file:///C:/temp/test/html/EARoot/$inet://http://www.google.de`，这会导致不采取任何行动。Internet Explorer 单击此按钮会显示错误页面。不过，双击 EA 本身中的超链接是可行的。

问题是：这是来自 HTML 报告器的已知错误，还是我在某处缺少设置？

我正在使用 EA 7.5.845。我希望这不是这个版本的已知错误，因为到目前为止我们不打算升级到任何更新的版本。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:08:18.883

添加网站链接非常简单。只需确保您从下拉列表中选择了正确的链接类型。

我根据您在干净的 Win7 VM 上的 EA 10 中建议的设置创建了一个测试文件。它仍然会在框架集中生成一个区域标记，但该链接在当前稳定的 Firefox 以及预装 Win7 版本的 Internet Explorer 中都可以正常工作。

您可能想自己尝试一下，Sparx 提供了 30 天的免费试用版（请参阅下面的链接）。

有几个关于超链接的错误修正，可以在这里看到：http: [//sparxsystems.com/products/ea/history.html](http://sparxsystems.com/products/ea/history.html)

# html - 如何自动重播 FLV

> ID：14139150
> 
> 赞同：0
> 
> 时间：2013-01-03T12:40:13.447
> 
> 标签：html

您好我正在使用 FLV 媒体播放器，我需要将其配置为自动重播。如何配置它？我在 Dreamweaver 中进行操作。代码是

```
<object type="application/x-shockwave-flash" data="FLVPlayer_Progressive.swf" width="1080" height="880">
  <!--<![endif]-->
  <param name="quality" value="high" />
  <param name="wmode" value="opaque" />
  <param name="scale" value="noscale" />
  <param name="salign" value="lt" />

  <param name="FlashVars" value="&amp;MM_ComponentVersion=1&amp;skinName=Clear_Skin_1&amp;streamName=file:///D%7C/flash/Skytel-D20---Gift&amp;autoPlay=true&amp;autoRewind=true" />
  <param name="swfversion" value="8,0,0,0" />
  <param name="expressinstall" value="Scripts/expressInstall.swf" />
  <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
  <div>
    <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
    <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
  </div>
  <!--[if !IE]>-->
</object>
<!--<![endif]--> 
```

```
<script type="text/javascript">
swfobject.registerObject("FLVPlayer");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:45:54.210

试过这个？

```
<param name="loop" value="true"> 
```

# c# - 使用 MSBuild Extension Pack 和 AssemblyInfo 自动化版本号，为什么添加到现有项目时会失败？

> ID：14139154
> 
> 赞同：0
> 
> 时间：2013-01-03T12:40:23.533
> 
> 标签：c#, assemblyinfo, msbuildextensionpack

我有一个大型项目，其中包含几个解决方案，这些解决方案都包含独特和共享项目的组合。

当我运行所有解决方案的批量构建时，我试图让它们都具有相同的自动递增版本号。

前两位需要固定，后两位自动递增。

这似乎是 MSBuild 扩展包中 AssemblyInfo 类的默认行为

所以我在这里遵循了指南：[http ://www.msbuildextensionpack.com/help/3.5.12.0/html/d6c3b5e8-00d4-c826-1a73-3cfe637f3827.htm](http://www.msbuildextensionpack.com/help/3.5.12.0/html/d6c3b5e8-00d4-c826-1a73-3cfe637f3827.htm)

而且我几乎一无所获。

如果我将以下行添加到一个简单的全新测试项目中：

```
<Import Project="$(MSBuildExtensionsPath)\ExtensionPack\MSBuild.ExtensionPack.VersionNumber.targets"/> 
```

它工作正常。每次在 VS 中构建项目时，它都会更新版本号。

但是，如果我在现有解决方案的第一个项目中添加完全相同的行，则会收到以下错误：

```
Unable to update the AssemblyFileVersion for AssemblyInfo.cs: No stub entry for AssemblyFileVersion was found in the AssemblyInfo file. 
```

AssemblyInfo.cs 的内容是：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
[assembly: AssemblyTitle("")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("")]
[assembly: AssemblyCopyright("")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]
[assembly: ComVisible(false)]
[assembly: Guid("02ecd067-a91c-44bc-a486-a7b097157757")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

几乎与工作测试版本完全相同：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
[assembly: AssemblyTitle("AutoVersionTest")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("Microsoft")]
[assembly: AssemblyProduct("AutoVersionTest")]
[assembly: AssemblyCopyright("Copyright © Microsoft 2013")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]
[assembly: ComVisible(false)]
[assembly: Guid("33c1d540-f9c4-4cc5-86ed-9d8695bf7b4d")]
[assembly: AssemblyVersion("1.0.0103.01")]
[assembly: AssemblyFileVersion("1.0.0103.01")] 
```

那么为什么它在一个中起作用，而在另一个中不起作用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:58:12.073

我会确保 AssemblyInfo.cs 文件物理上在项目中，而不是从另一个项目中链接。

# php - 使 jquery 片段以 IP 为条件

> ID：14139155
> 
> 赞同：1
> 
> 时间：2013-01-03T12:40:29.303
> 
> 标签：php, jquery

有没有办法让这个片段只有在我自己的 IP 访问该网站时才会触发？

```
 $('#preloader').delay(5555).fadeOut(1234,function(){  
           $(this).remove();
        }); 
```

类似（伪代码）：“如果 ip 不是 127.0.0.1，什么也不做。”

（如果这样更容易，我愿意接受 PHP 解决方案。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:42:43.793

Javascript 无法获取访问者的 IP，因此服务器端解决方案是唯一可能的解决方案。试试这个：

```
<?php if ($_SERVER['REMOTE_ADDR'] == '1.1.1.1') { // your IP instead of 1.1.1.1 ?>
    $('#preloader').delay(5555).fadeOut(1234,function(){  
        $(this).remove();
    });
<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:42:50.063

您可以在 PHP 中设置此条件以显示或不显示这部分代码。

```
<? if ($_SERVER['REMOTE_ADDR'] == '127.0.0.1'): ?>
    $('#preloader').delay(5555).fadeOut(1234,function(){  
        $(this).remove();
    });
<? endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:43:44.690

您将使用 javascript 和 jquery 获得 clientIP。您可以使用 JSONP 通过服务器端中继它

[在谷歌搜索时，在 SO http://stackoverflow.com/questions/102605/can-i-lookup-the-ip-address-of-a-hostname-from-javascript](http://zaa.ch/past/2009/7/3/crosssite_http_request_for_jsonip/)上找到了它

```
<script type="application/javascript">
    function getip(json){
      alert(json.ip); // alerts the ip address
    }
</script>

<script type="application/javascript" src="http://jsonip.appspot.com/?callback=getip"></script> 
```

此外，jQuery 可以处理 JSONP，只需传递一个带有回调格式的 url=? $.getJSON 方法的参数，例如：

```
 $.getJSON("http://jsonip.appspot.com?callback=?",
    function(data){
       alert( "Your ip: " + data.ip);
  }); 
```

此示例是在 Google App Engine 上实现的一个非常简单的 JSONP 服务，您可以[在此处](http://zaa.ch/past/2009/7/3/crosssite_http_request_for_jsonip/)查看更多详细信息。

检查服务的来源，是一个小的 Python 脚本，它可以在任何服务器端语言上实现。

如果您不是在寻找跨域解决方案，则可以进一步简化脚本，因为您不需要回调参数，并且返回纯 JSON。

[在这里](http://jsbin.com/ijiha/)运行上面的代码片段。

# ruby-on-rails - ElasticSearch/Tire：查找类似文章

> ID：14139159
> 
> 赞同：4
> 
> 时间：2013-01-03T12:40:46.427
> 
> 标签：ruby-on-rails, search, elasticsearch, tire

我的 Rails 项目使用 Tire gem 实现了 ElasticSearch。我想在名为 description 的字段中查找具有相似文本的记录。我想根据记录的相似程度 (%) 对结果进行排序。

类似 tekst 的示例： 1\. 您好，我的名字是 Tom，我喜欢汽车。2\. 嘿，我是汤姆。我喜欢汽车。3\. Tommy 喜欢玩汽车。

请帮我配置模型。我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:43:13.317

在 Elasticsearch 中，您可以使用[“more like this”](http://www.elasticsearch.org/guide/reference/api/more-like-this.html) API 来查找类似的文档。

在轮胎中，您可以使用[`more_like_this`](https://github.com/karmi/tire-contrib/blob/master/lib/tire/queries/more_like_this/more_like_this.rb)查询，将文本传递给它。有关文档，请参阅[测试用例](https://github.com/karmi/tire-contrib/blob/master/test/queries/more_like_this/more_like_this_test.rb)。

# python - 如何在使用 Python 的 smtplib 发送的电子邮件中获取换行符？

> ID：14139165
> 
> 赞同：32
> 
> 时间：2013-01-03T12:41:16.670
> 
> 标签：python, email, python-2.7, smtplib

我编写了一个脚本，将消息写入文本文件并将其作为电子邮件发送。一切都很顺利，除了电子邮件最终似乎都在一行中。

我添加了换行符`\n`，它适用于文本文件，但不适用于电子邮件。你知道可能的原因是什么吗？

* * *

这是我的代码：

```
import smtplib, sys
import traceback
def send_error(sender, recipient, headers, body):

    SMTP_SERVER = 'smtp.gmail.com'
    SMTP_PORT = 587
    session = smtplib.SMTP('smtp.gmail.com', 587)
    session.ehlo()
    session.starttls()
    session.ehlo
    session.login(sender, 'my password')
    send_it = session.sendmail(sender, recipient, headers + "\r\n\r\n" +  body)
    session.quit()
    return send_it

SMTP_SERVER = 'smtp.gmail.com'
SMTP_PORT = 587
sender = 'sender_id@gmail.com'
recipient = 'recipient_id@yahoo.com'
subject = 'report'
body = "Dear Student, \n Please send your report\n Thank you for your attention"
open('student.txt', 'w').write(body) 

headers = ["From: " + sender,
               "Subject: " + subject,
               "To: " + recipient,
               "MIME-Version: 1.0",
               "Content-Type: text/html"]
headers = "\r\n".join(headers)
send_error(sender, recipient, headers, body) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-03T12:51:10.387

对我们所有人来说不幸的是，并非每种类型的程序或应用程序都使用与 python 相同的标准化。

看着你的问题，我注意到你的标题是：`"Content-Type: text/html"`

这意味着您需要为新行使用 HTML 样式标签，这些标签称为换行符。`<br>`

你的文字应该是：

```
"Dear Student, <br> Please send your report<br> Thank you for your attention" 
```

如果您更愿意使用字符类型的换行符，则必须将标题更改为：`"Content-Type: text/plain"`

您仍然需要将换行符从单字符更改为电子邮件中使用`\n`的双字符。`\r\n`

您的文字将是：

```
"Dear Student, \r\n Please send your report\r\n Thank you for your attention" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-03T13:23:29.477

您已将消息正文声明为具有 HTML 内容 ( `"Content-Type: text/html"`)。换行的 HTML 代码是[`<br>`](http://www.w3schools.com/tags/tag_br.asp). 您应该将内容类型更改为`text/plain`或使用 HTML 标记代替换行符，`\n`因为后者在呈现 HTML 文档时会被忽略。

* * *

作为旁注，还请查看[电子邮件包](http://docs.python.org/2/library/email.html)。有一些类可以为您简化电子邮件消息的定义（[带有示例](http://docs.python.org/2/library/email-examples.html)）。

例如，您可以尝试（未经测试）：

```
import smtplib
from email.mime.text import MIMEText

# define content
recipients = ["recipient_id@yahoo.com"]
sender = "sender_id@gmail.com"
subject = "report reminder"
body = """
Dear Student,
Please send your report
Thank you for your attention
"""

# make up message
msg = MIMEText(body)
msg['Subject'] = subject
msg['From'] = sender
msg['To'] = ", ".join(recipients)

# sending
session = smtplib.SMTP('smtp.gmail.com', 587)
session.starttls()
session.login(sender, 'my password')
send_it = session.sendmail(sender, recipients, msg.as_string())
session.quit() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-07T01:40:25.930

在我的情况下`'\r\n'`没有工作，但`'\r\r\n'`确实如此。所以我的代码是：

```
from email.mime.text import MIMEText
body = 'Dear Student,\r\r\nPlease send your report\r\r\nThank you for your attention'
msg.attach(MIMEText(body, 'plain')) 
```

该消息以多行形式写入，并在 Outlook 中正确显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-23T03:06:57.070

我也遇到过这个。我在行尾发现了一点空白，足以让我的 SMTP 服务识别新行

```
body = 'value of variable x = ' + myVarX + "   \r\n"  \
       + 'value of variable y = ' + myVarY 
```

我认为这更多是 SMTP 问题，而不是 Python 问题，这可以解释此线程中解决方案的范围

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T12:40:56.893

将内容类型标头设置为`Content-Type: text/plain`（`\r\n`末尾带有）允许我发送多行纯文本电子邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-19T21:43:30.967

Outlook 将从它认为是额外内容的纯文本中删除换行符。 [https://support.microsoft.com/en-us/kb/287816](https://support.microsoft.com/en-us/kb/287816)

您可以尝试以下更新以使线条看起来像子弹。这对我有用。

```
body = "Dear Student, \n- Please send your report\n- Thank you for your attention" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-16T19:23:16.407

我也遇到了这个问题，这个线程有助于确定它首先发生的原因。我不知所措，因为我知道我的代码是正确的。我尝试了一些东西，但对我有用的是为正文中的每一行添加一个 \t\n 。

```
from email.mime.text import MIMEText
lines = ['line1', 'line2', 'line3']
body = '\t\n'.join(lines)
msg = MIMEText(body) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-10-27T13:48:02.400

为我添加`\n\n`作品

```
body = """"""

body += "This is message1\n\n"
body += "This is message2" 
```

输出：

```
This is message1
This is message2 
```

# python - 如果值 x == 列表 y 中的任何值：python

> ID：14139167
> 
> 赞同：2
> 
> 时间：2013-01-03T12:41:30.077
> 
> 标签：python, if-statement

我对 python 比较陌生，想做一些类似的事情：

```
if value x == any value in list y:
   write x 
```

这将在函数中运行，因此只有符合特定条件的解决方案才会在生成时写入 csv

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T12:45:25.050

```
>>> x = 8
>>> if x in (1, 2, 3, 5, 8, 13, 21, 34, 55):
        print('x is an early Fibonacci number')
x is an early Fibonacci number 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T12:48:02.983

您可以使用 in 语法：

```
if x in ["a", "b", "c"]
   ... do stuff 
```

而且，如果您关心 x 的出现次数，您可以使用 count：

```
if y.count(x) == 1
  ... do stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:45:35.030

这对你有用吗？

```
x = somevalue
y = somelist
if x in y:
    print x  #not sure if this is what you mean by 'write' 
```

# jenkins - 如何将 Jenkins 指向另一个 .jenkins 主目录？

> ID：14139168
> 
> 赞同：18
> 
> 时间：2013-01-03T12:41:31.753
> 
> 标签：jenkins

我在 Linux 上的特定用户下有工作 /.jenkins 文件夹。我想与另一个用户一起启动 Jenkins，但重新使用另一个用户的 .jenkins 文件夹。我怎样才能做到这一点？詹金斯提供了一些说明，但我不明白:)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-04T06:55:11.777

我认为这可以帮助你。

`JENKINS_HOME`设置指向文件夹的环境变量`.jenkins`并运行 Jenkins 命令。

* * *

外壳应该像

```
export JENKINS_HOME=/usr/jhon/.jenkins

java -jar jenkins.war 
```

* * *

批次应该像

```
 SET JENKINS_HOME=C:\users\jhon\.jenkins

 java -jar jenkins.war 
```

* * *

应该`Powershell`像

```
[Environment]::SetEnvironmentVariable("JENKINS_HOME", "${PWD}\.jenkins")
java -jar jenkins.war 
```

**这会将您的主目录设置为`current-working-directory + './jenkins'`**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-04T10:08:24.123

以下是您的选择：

a) 假设您将 Jenkins 部署到 Tomcat 中，您可以执行以下操作：

在你的 catalina.home/conf/localhost/jenkins.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="/home/enomad/projects/jenkins/jenkins-master/war/target/jenkins" path="" reloadable="true">
 <Environment name="JENKINS_HOME" value="/home/enomad/projects/jenkins-home"
         type="java.lang.String" override="false"/>
</Context> 
```

b) 您可以**导出 JENKINS_HOME=toWhateveryouwant**，正如 Harsha 在上一篇文章中提到的那样

c）您可以扩展您的**JAVA_OPTS**参数并添加**-DJENKINS_HOME=** /path/to/jenkins_home/ 如下所述：[Jenkins Mailing list](http://jenkins.361315.n4.nabble.com/Configuring-Jenkins-td3800471.html)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-22T07:19:03.657

我使用 jenkins 1.639 作为部署在 tomcat 7.0.67 上的战争。我的 JENKINS_HOME 设置为 /home/hims/jenkins

这是我的 /tomcat/bin 目录下的 setenv.sh 文件的入口

**出口 CATALINA_OPTS="-DJENKINS_HOME=/home/hims/jenkins"**

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T07:16:16.453

由于某些奇怪的原因，Jenkins 没有使用我设置的 JENKINS_HOME 环境变量。

我在tomcat启动脚本（/etc/init.d/tomcat）中添加了这一行。

```
 $export JENKINS_HOME=/path/to/jenkins_home/ 
```

现在 jenkins 指向新的 jenkins 主页 :) 这将非常有用，尤其是当您在云上安装 jenkins 时。（在 Ec2 或桉树实例上）

参考：[https ://wiki.jenkins-ci.org/display/JENKINS/Tomcat](https://wiki.jenkins-ci.org/display/JENKINS/Tomcat)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-12T10:35:55.477

或者您可以修改 .bashrc 以便在每次启动控制台时设置环境变量，也就是说，如果您使用 bash 启动 Jenkins。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-04T15:00:30.780

在 Tomcat 5 中，您可以修改 tomcat.conf 并添加路径：

导出 JAVA_OPTS="-DJENKINS_HOME=/home/jenkins"

重启詹金斯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T12:56:13.693

通常，您需要为这些文件设置新用户可以访问的权限。

请参阅此处：**[如何以不同的用户身份运行 jenkins](https://stackoverflow.com/questions/6692330/how-to-run-jenkins-as-a-different-user)** -
特别是*[Sagar](https://stackoverflow.com/a/6694060)*和*[Peter Tran](https://stackoverflow.com/a/7936427)*的答案。

干杯

# silverlight-4.0 - Silverlight UI Dispatcher - 正确实现

> ID：14139171
> 
> 赞同：0
> 
> 时间：2013-01-03T12:41:58.710
> 
> 标签：silverlight-4.0, silverlight-5.0

我对使用 Dispatcher 有点困惑。我在 xap 中有 5 个网格，我正在尝试将每个网格与来自 WCF 服务的数据绑定

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        System.Threading.ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(GetData));
        //This is followed by getting data for other grids
    }

    private void GetData(object state)
    {
        Dispatcher.BeginInvoke(delegate()
          {
              WCFservice.ReadDataCompleted += new EventHandler<ReadDataCompletedEventArgs>(WCFservice_GetData);
              WCFservice.ReadDataAsync();
          });

    }

    void WCFservice_GetData(object sender, ReadDataCompletedEventArgs e)
    {
        //is this correct 
        myGrid.ItemsSource = myCollection;
        //OR should I use dispatcher here as well when I bind to the grid
        Deployment.Current.Dispatcher.BeginInvoke(() => { myGrid.ItemsSource = myCollection; }); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:59:19.997

正确的实现如下

```
private void GetData(object state)
{
    //dont use dispatcher here
          WCFservice.ReadDataCompleted += new EventHandler<ReadDataCompletedEventArgs>(WCFservice_GetData);
          WCFservice.ReadDataAsync();

}

void WCFservice_GetData(object sender, ReadDataCompletedEventArgs e)
{
    //use dispatcher here 
    Deployment.Current.Dispatcher.BeginInvoke(() => { myGrid.ItemsSource = myCollection; }); 
} 
```

# c++ - 建立一棵通用树 - 创建太多兄弟？

> ID：14139176
> 
> 赞同：1
> 
> 时间：2013-01-03T12:42:25.883
> 
> 标签：c++, data-structures, tree

我正在尝试用 c++ 构建一个通用树。我使用的数据结构是一个有 2 个指针的 N​​ode 类。指针 Next 指向该节点的第一个儿子，指针 bros 指向该节点的下一个兄弟。

我的代码有问题，由于某种未知原因，为一个节点创建了无限数量的兄弟，我不知道为什么，希望你能看看，也许会建议我哪里出错了。谢谢！

节点类：

```
class Node { 
private:
    int capacity;
    int price;
    int height;
    int num_of_leafs; // represents the total number of leafs under this branch
    Node* bros;     

public:
    Node* next;

    Node(){
        capacity = 0;          
        price = 0;
        height = 0;
        next = NULL;
        bros = NULL;
    }
    Node(int capacity_){
        capacity = capacity_;  
        price = 0;
        height = 0;
        next = NULL;
        bros = NULL;
    }                

    //should return true if this node has no children, false otherwise.
    bool isLeaf()
    { 
        if (this->next == NULL) { return 1; }
        else { return 0; }
    }

    // This methoed counts the number of leafs sons of this node.
    int Count_Leafs()
    {
        int num = 0;
        if (this->isLeaf()) { return num; }
        else {
            Node* iter = this->next;
            while ( iter != NULL )
            {
                if ( iter->isLeaf() ) { num++ ; } 
                iter = iter->bros;
            }
        }
        return num;
    }

    //this method adds a child to this node.
    void addChild(Node* child)
    {
        if ( child->height != 0 )
        {
            cout << "Node already in tree" ;
            return; }
        if( this->next == NULL ) 
        { 
            this->next = child;
        }
        else {
            Node* iter = this->next;
            while ( iter->getNextBro() != NULL ) { iter = iter->getNextBro(); }
            iter->setNextBro(child);
        }
        child->height = this->height + 1;
    }
        // this methoed checks if current node has brothers
    bool hasBro()
    {
        if ( this->getNextBro() == NULL ) { return 0;}
        else { return 1;}
    }
        Node* getNextBro()
    {
        return bros;
    }

    void setNextBro(Node* next)
    {
        this->bros = next;
    }

    int getHeight()
    {
        return this->height;
    }

    int getNumBros()
    {
        Node* iter = this->bros;
        int num=0;
        while ( iter != NULL )
        {
            num++;
            iter = this->getNextBro();
        }
        return num;
    } 
```

和树的创建：

```
 Node* s8 = new Node(8);
Node* s5 = new Node(5);
Node* s6 = new Node(6);
for(int i=0; i < 2 ; i++){
    s6->addChild(new Node());      
}

Node* s7 = new Node(7);
Node* s2 = new Node(2);
for(int i=0; i < 3 ; i++){
    s2->addChild(new Node());
}

Node* s3 = new Node(3);
Node* s2_2 = new Node(2);  
s2_2->addChild(new Node());

Node* s4 = new Node(4);
 for(int i=0; i < 5 ; i++){
    s4->addChild(new Node());
}

Node* s1 = new Node(1);
 for(int i=0; i < 2 ; i++){
    s1->addChild(new Node());      
}
Node* s2_3 = new Node(2);
 for(int i=0; i < 4 ; i++){
    s2_3->addChild(new Node());
}
Node* s2_4 = new Node(2);  
for(int i=0; i < 3 ; i++){
    s2_4->addChild(new Node());
}
s8->addChild(s5);
cout << "S5 bros: " << s5->getNumBros() << "\n";
cout << "S6 bros: " << s6->getNumBros() << "\n";
s8->addChild(s6);    
cout << "S5 bros: " << s5->getNumBros() << "\n";
s5->addChild(s7);
cout << "S5 bros: " << s5->getNumBros() << "\n";
s5->addChild(s2);
s6->addChild(s3);
s6->addChild(s2_2);
s7->addChild(s4);
s7->addChild(s1);
s3->addChild(s2_3);
s3->addChild(s2_4); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:51:20.387

`getNumBros()`正在迭代`this`而不是`iter`

```
iter = this->getNextBro(); 
```

应该：

```
iter = iter->getNextBro(); 
```

# android - 安卓SurfaceView绘图

> ID：14139177
> 
> 赞同：2
> 
> 时间：2013-01-03T12:42:29.597
> 
> 标签：android, surfaceview

我是安卓新手。我回顾了两个示例[Custom View with User Interaction](http://android-er.blogspot.com/2010/05/custom-view-with-user-interaction.html)和[Android SurfaceView](http://android-er.blogspot.com/2010/05/android-surfaceview.html)。我希望在第二个示例中与第一个示例类似地绘制 cicle。我怎么能做到这一点？第二个问题是：run() 方法何时必须停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:05:28.517

我找到了解决方案。为了 SurfaceView 的正确工作，我必须设置画布的背景。当我完成时，一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:50:21.727

创建一个位图，然后在其画布上绘制，然后将此位图添加到图像视图。

创建位图：

```
 Bitmap bmp = Bitmap.createBitmap(width, height, config); 
```

在位图画布上绘制

```
 Canvas cv = new Canvas(bmp);
    cv.drawCircle(cx, cy, radius, paint) 
```

设置为图像视图

```
 img.setBackgroundDrawable(new BitmapDrawable(bmp)); 
```

希望他对你有所帮助。

# java - 将 CipherParameters 写入文件系统

> ID：14139178
> 
> 赞同：3
> 
> 时间：2013-01-03T12:42:29.570
> 
> 标签：java, security, rsa, bouncycastle, java-io

有什么方法可以将通过 RSAKeyPairGenerator 生成的公钥、私钥写入文件系统（我知道这不是一个好主意，但我需要检查是否可以这样做）？

RSAKeyPairGenerator 将导致 CipherParameters 并且我正在使用为 java 提供的充气城堡安全性。

获取我的密钥的代码如下。

```
 RSAKeyPairGenerator keyPairGenerator = new RSAKeyPairGenerator();

    keyPairGenerator.init(new RSAKeyGenerationParameters(new BigInteger(
            "10001", 16), new SecureRandom(), 1024, 80));

    AsymmetricCipherKeyPair keys = keyPairGenerator.generateKeyPair();
    CipherParameters pubKey = keys.getPublic();
    CipherParameters privKey = keys.getPrivate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T00:41:14.413

将参数转换为实际类型（打印出来`privKey.getClass().getName()`找出它是什么）。RSA 私钥将是一种`RSAPrivateCrtKeyParameters`. 一旦你得到了，你可以简单地检索`BigInteger`组成私钥的 's。那些应该是可序列化的。如果您想在 PKCS#8/PKCS#1 中对其进行编码，那么您应该创建一个 JCE 兼容`RSACrtPrivateKey`实例并调用`getEncoded()`.

# eclipse - 如何在同一个项目和同一个源码库中使用不同版本的Eclipse

> ID：14139187
> 
> 赞同：1
> 
> 时间：2013-01-03T12:42:50.463
> 
> 标签：eclipse, eclipse-cdt

我在一个适用于 Windows、Linux 和 VxWorks 的多平台软件上工作。该软件是用 C 和 C++ 编写的，我们使用：

*   对于 Linux 目标和我们的主要开发环境，我们使用**Eclipse 3.7.2 + CDT 插件**（Ubuntu 12.04 附带的插件）。
*   对于 VxWorks 目标，我们使用 Wind River Workbench，这是一个基于 Windows、**Eclipse 3.7.1 CDT 的程序，由**VxWorks 的制造商 Wind River 提供。
*   对于 Windows 目标，我们使用 Visual Studio。

我的问题是 Linux Eclipse 和 Wind River Workbench 都会在项目的根目录中创建 .project 和 .cproject 文件。由于项目目录是跨平台共享的，因此存在冲突。

我发现的唯一解决方法如下：

```
/.../mysoftware/others/src ---> contains the code
/.../mysoftware/others/inc ---> contains the code
/.../mysoftware/others     ---> where the Wind River Workbench ".something" files are
/.../mysoftware/linux/src  ---> symlink to ../others/src
/.../mysoftware/linux/inc  ---> symlink to ../others/inc
/.../mysoftware/linux      ---> where the Linux Eclipse ".something" files are 
```

这个解决方案非常丑陋，使我的 SCM (Mercurial) 的 Eclipse 插件停止工作，并且仅适用于 Linux。

如何让多个基于 Eclipse 的 IDE 使用它们自己的“.something”文件集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:02:46.843

我建议您不要将这些文件签入 SCM，并将它们添加到 Mercurial 的忽略列表中。

您可以签入这些文件的模板版本（`.project.linux`等`.project.vxworks`），每个开发人员可以`.project`在从 Mercurial 签出项目后手动复制到这些版本。只要它们没有太大变化，这就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:53:05.997

我建议使用一个原始文件夹进行源代码控制操作，并为每个平台使用 2 个不同的文件夹。

您应该使用每个文件夹中的符号链接复制结帐文件夹结构。然后，在每个文件夹中创建所需的 CDT 项目。Eclipse 项目文件将进入该文件夹而不是原始文件夹，因此它们不会发生冲突。

# javascript - fabricjs 系统准备就绪 - 事件

> ID：14139189
> 
> 赞同：1
> 
> 时间：2013-01-03T12:43:07.290
> 
> 标签：javascript, canvas, fabricjs

嗨，fabricjs 贡献者，

根据“维基”，目前没有状态事件 - [https://github.com/kangax/fabric.js/wiki/Working-with-events](https://github.com/kangax/fabric.js/wiki/Working-with-events)。因此无法在“系统就绪”状态下绑定触发器。

当然我可以使用 jQuery(document).ready(function(){...})，但我也想知道 fabricjs 开发人员是否考虑过添加这样的事件或者可以提出一种本地处理它的方法。

感谢您在面料方面的出色工作！

# python - 如何在 PySide 应用程序中隐藏 CMD 窗口

> ID：14139190
> 
> 赞同：1
> 
> 时间：2013-01-03T12:43:10.333
> 
> 标签：python, qt, python-2.7, pyside

我用 PySide 做了一个应用程序。当我运行应用程序时，GUI 会显示，但 CMD 窗口仍然存在。我该如何隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:46:19.677

使用它运行应用程序`pythonw`将隐藏窗口

# html - css，锁定html一个带有图像的标签

> ID：14139191
> 
> 赞同：0
> 
> 时间：2013-01-03T12:43:11.970
> 
> 标签：html, css

有没有办法只用 CSS 图片锁定，当有人有 800x600 分辨率时，他们不会在另一个下浮动。

现在：

分辨率 1600x900

图1 图2 图3

分辨率 800x600

图1

图2

图3

想要的结果：

图1 图2 图3

在这两种分辨率中。如果需要以较小的分辨率滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:45:42.960

您可以使用几个技巧

## 最佳解决方案

在父 div 上，添加与其子元素大小之和对应的最小宽度。您可能需要一个额外的带有溢出的祖父 div:auto 来显示滚动条。

## 好的解决方案，但取决于您的情况

以 % 指定浮动 div 的大小

## 如果这些解决方案都不适合您的情况

在子 div 上，您可以使用 display: table-cell。它将呈现为不能以最小分辨率“破坏”的单元格表

# c++ - 在我的应用程序关闭之前，freopen 不会写入数据

> ID：14139195
> 
> 赞同：2
> 
> 时间：2013-01-03T12:43:41.573
> 
> 标签：c++, c, qt

我正在编写一个 Qt GUI 应用程序（用于进行 XSL 转换）。要将错误消息打印到文件中，我正在使用如下调用：

```
freopen("my-error-file.txt", "w", stderr);
// call to libxslt function, which possibly prints to stderr
fclose(stderr); 
```

我遇到的问题是，虽然 my-error-file.txt 是立即创建的，但它没有任何内容。当我关闭应用程序时，错误内容将写入文件。我认为这是正确的行为，但我真正想要的行为是 my-error-file.txt 写入并立即关闭，无论 GUI 窗口是否关闭。

我错过了函数调用吗？

我试过`fflush(stderr)`了，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:36:15.387

我是个傻瓜。我在 fclose 之前调用了 fflush，但是在调用这些函数之前该函数正在返回。

# php - ajax编码和解码url问题

> ID：14139196
> 
> 赞同：0
> 
> 时间：2013-01-03T12:43:43.043
> 
> 标签：php, jquery, ajax

在通过 ajax 发送到 php 页面之前，如何在 jquery 中对多个 URL 进行编码，以及如何在 php 页面中对其进行解码。

这是html：

```
<form method="post">
<textarea id="multiple_url"></textarea>
<button id="check_url">Check</button>
</form>

<div id="Check_result"></div> 
```

这是jQuery：

```
$('#check_url').click(function(){

var multiple_url = $('#multiple_url').val();

$.ajax({  
type: "POST",  
url: "urls.php",  
data: multiple_url=' +multiple_url,
success: function(results) {  
$('div#Check_result').html(results);
}
});

} 
```

这是urls.php：

```
$multiple_url = $_POST['multiple_url'];

echo $multiple_url; 
```

现在在 textarea 当我这样发布时：

```
http://yahoo.com
http://facebook.com
http://google.com 
```

我得到以下输出：

```
http://yahoo.com http://facebook.com http://google.com 
```

但是当我这样发布时：

```
http://yahoo.com
https://www.facebook.com/photo.php?fbid=540632575958397&set=a.215213765166948.56326.100000349796150&type=1&theater
http://google.com 
```

我得到了损坏的输出，如下所示：

```
http://yahoo.com https://www.facebook.com/photo.php?fbid=540632575958397 
```

这里发生的是它忽略`"&"`了 url 中的所有内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:45:32.727

传递`data`一个对象，而不是一个字符串。

```
data: { multiple_url: $('#multiple_url').val() } 
```

然后，jQuery 将为您处理转义数据。

# webgl - 为什么 webgl blending 不支持 COLOR_LOGIC_OP 模式？

> ID：14139197
> 
> 赞同：2
> 
> 时间：2013-01-03T12:43:43.050
> 
> 标签：webgl

我是 WebGL 的新手。我创建了一个 FBO 并在其上渲染纹理。现在假设通过在 COLOR_LOGIC_OP 模式下混合片段的 R、G、B 和 A 值，在相同坐标中渲染另一个纹理。然后我检查了 WebGL 规范，找不到任何关于混合模式的信息。混合模式还没有实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:03:16.783

简单的答案是因为 WebGL 基于 OpenGL ES 2.0 而[OpenGL ES 2.0 不支持 glLogicOp](http://www.khronos.org/opengles/sdk/docs/man/)。

它[也不在 OpenGL ES 3.0](http://www.khronos.org/opengles/sdk/docs/man3/)中，下一个版本的 WebGL 将基于它，因此它很可能不会在未来的 WebGL 中出现。

# yii-extensions - 如何使用 yii booster 在 Editablefield 中设置动态变量值？

> ID：14139200
> 
> 赞同：2
> 
> 时间：2013-01-03T12:43:44.187
> 
> 标签：yii-extensions

我正在尝试在 URL 参数中传递变量 $time。整个小部件位于 foreach 循环内，`$time`每次执行 lop 时都会更新。现在我面临的问题是 $time （在 url 参数中传递）没有更新。

```
$dataProvider = StaffHours::model()->findAll(); 
  $start = strtotime('12:00am');
  $end = strtotime('12:45am');
for( $i = $start; $i <= $end; $i += 900) 
    {   
     $time = date('g:i A', $i);

     foreach($dataProvider as $data)
       { 
        $monday = unserialize($data->monday);

        $this->widget('bootstrap.widgets.TbEditableField', array(
                     'type' => 'select',
                     'model' => $data,
                     'attribute' => 'monday',
                     'url' => $this->createUrl('staffhours/editstaffhour&Time='.$time ), //url for submit data
                     'source' => array('Online', 'Offline', 'AwayDate'),
                     'enabled' => true,
                     'options' => array('params' => array('time'=>$time),)
                    ));
           }
     } 
```

# mysql - 查询下一个时间间隔

> ID：14139201
> 
> 赞同：2
> 
> 时间：2013-01-03T12:43:48.713
> 
> 标签：mysql, datetime

我试图从 mySQL 表中查询可用的上限“时间范围”

```
+----+----------+---------+
| id | timefrom | timeto  | 
+----+----------+---------+
|  0 | 08:30    | 10:30   |
|  7 | 15:00    | 16:00   |
|  2 | 17:00    | 17:30   |
|  8 | 18:00    | 21:00   |
+----+----------+---------+ 
```

查询结果将是下一个可用时间范围，即 10:30 到 15:00

edit1：id 不在序列中

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:25:42.567

我认为你需要这个：

```
select t1.`timeto`, min(t2.`timefrom`)
from
  yourtable t1 inner join yourtable t2
  on t1.`timeto`<t2.`timefrom`
group by t1.`timeto`
having
  not exists (select null from yourtable t3
              where t1.`timeto`<t3.`timeto`
              and min(t2.`timefrom`)>t3.`timefrom`) 
```

（这只有在间隔不重叠时才有效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:00:43.170

我想我会使用类似的东西

```
SELECT
    t1.*,
    MIN(t2.`timefrom`) AS 'next (timefrom)',
    TIMEDIFF(MIN(t2.`timefrom`),t1.`timeto`) AS 'interval'
FROM `the_table` t1
LEFT OUTER JOIN `the_table` t2
ON t2.`timefrom` > t1.`timeto`
GROUP BY t1.`timefrom`,t1.`timeto`
#HAVING `next` IS NOT NULL 
```

取消注释最后一行与 using`INNER JOIN`而不是`LEFT OUTER JOIN`here 相同。我选择 LOJ 的原因是因为我想查看表中的所有记录，但这当然取决于您。

# php - Mydbr 从一个数据库主机迁移到另一个

> ID：14139203
> 
> 赞同：0
> 
> 时间：2013-01-03T12:43:57.257
> 
> 标签：php, mysql, reporting, mysqldump

我正在尝试将 MYdbr 报告工具从一个数据库主机迁移到另一个。

我在 conf 文件中进行了更改并完成了设置。获取了 mydbr 的数据库转储

但我想知道存储过程存储在哪里？我在任何地方都看不到报告代码。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:35:47.333

使用. `--routines`_`mysqldump`

# .net - 如何在 AfterBuild 中将 ILMerge 与 .NET 4.5 一起使用？

> ID：14139207
> 
> 赞同：11
> 
> 时间：2013-01-03T12:44:05.530
> 
> 标签：.net, msbuild, visual-studio-2012, .net-4.5, ilmerge

我们希望将包含多个项目的解决方案升级到 .NET 4.5。我们已经使用 Visual Studio 2012。我们使用 ILMerge 将程序集合并到单个 EXE。

我们当前用于主项目的 .csproj 文件如下所示：

```
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Release' ">
    <CreateItem Include="@(ReferenceCopyLocalPaths)" Condition="'%(Extension)'=='.dll'">
        <Output ItemName="AssembliesToMerge" TaskParameter="Include" />
    </CreateItem>
    <PropertyGroup>
        <ReferenceAssemblies>C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0</ReferenceAssemblies>
    </PropertyGroup>
    <Message Importance="high" Text="Executing ILMerge...with target platform from $(ReferenceAssemblies)" />
    <Exec Command="&quot;$(SolutionDir)LIB\ILMerge.exe&quot; /out:@(MainAssembly) /internalize /targetplatform:v4,&quot;$(ReferenceAssemblies)&quot; &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" />
    <Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" />
</Target> 
```

这应该如何看待 .NET 4.5？

我在[这里](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx)读到，在 .NET 4.5 中使用 ILMerge 存在一些问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T08:17:36.807

我找不到任何好的文档，但正如[Matt Wrocks 博客文章](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx)和[关于 ILMerge 的另一个问题](https://stackoverflow.com/questions/10137937/c-merge-dll-into-exe-beginners-guide-needed)所建议的那样，我首先尝试使用与 .NET 4 相同的参考程序集路径。

在将我们的 NuGet 包重新定位到 .NET 4.5 之前，这似乎开始工作。（特别是 Microsoft.AspNet.WebApi.Client，它添加了对新的 .NET 4.5 程序集 System.Net.Http.WebRequest 的引用，该程序集之前包含在 NuGet 包中。）

将参考程序集路径更新到 .NET 4.5 后，它起作用了：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5

```
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Release' ">
    <CreateItem Include="@(ReferenceCopyLocalPaths)" Condition="'%(Extension)'=='.dll'">
        <Output ItemName="AssembliesToMerge" TaskParameter="Include" />
    </CreateItem>
    <PropertyGroup>
        <ReferenceAssemblies>C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5</ReferenceAssemblies>
    </PropertyGroup>
    <Message Importance="high" Text="Executing ILMerge...with target platform from $(ReferenceAssemblies)" />
    <Exec Command="&quot;$(SolutionDir)LIB\ILMerge.exe&quot; /out:@(MainAssembly) /internalize /targetplatform:v4,&quot;$(ReferenceAssemblies)&quot; &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" />
    <Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" />
</Target> 
```

在大多数情况下，.NET 4 程序集的路径也可以使用，但在 .NET 4.5 中引用新程序集时，需要更新路径。

请注意，在示例中，ILMerge.exe 被下载到解决方案目录中名为 LIB 的文件夹中。

# jsf - 如何捕捉不存在的对话异常

> ID：14139208
> 
> 赞同：0
> 
> 时间：2013-01-03T12:44:10.533
> 
> 标签：jsf, query-string, cdi, conversation-scope

我有一个链接如下：

```
<h:link outcome="/Pages/Public/producthome.jsf?cid=6">cagtegoryName</h:link> 
```

当我想尝试通过 URL 传递类别 ID 时，它显示以下错误：

> WELD:00032 找不到恢复 id 1 的对话

如果我只是简单地写如下链接

```
<h:link outcome="/Pages/Public/producthome.jsf">categoryName</h:link> 
```

然后它工作正常。我在第一个链接中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:04:48.997

似乎 url 参数名称`cid`被识别为`conversationId`. 请尝试更改参数的名称。举个例子

```
<h:link outcome="/Pages/Public/producthome.jsf?catid=6">cagtegoryName</h:link> 
```

# android - android在彼此下动态添加布局

> ID：14139214
> 
> 赞同：2
> 
> 时间：2013-01-03T12:44:19.700
> 
> 标签：android, android-relativelayout, layout-inflater

我正在尝试在彼此下动态添加多个布局。所以我写了以下代码：

```
 for (int i = 1; i <= layoutCounter; i++) {
        View neu = inflater.inflate(R.layout.vote, parent, false);
        neu.setId(layoutID);

        if (layoutID == 1) {
            params = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            params.addRule(RelativeLayout.BELOW, R.id.txtMultiline);

        } else {

            params = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            params.addRule(RelativeLayout.BELOW, neu.getId());

        }
        neu.setLayoutParams(params);
        parent.addView(neu);

        layoutID++;
    } 
```

txtMultiline 是在 XML 中定义的固定视图。LayoutID 是一个整数，以 1 开头。第一个布局正确添加在 txtMultiline TextView 下。但是所有以下布局都只是添加到父布局（这是一个RelativeLayout）之上。无法得到原因.. else-route 正确执行。但是当尝试将 BELOW 常量应用于我的动态膨胀布局时，它似乎没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T13:16:53.607

也许与：

`params.addRule(RelativeLayout.BELOW, layoutID-1);`

代替：

`params.addRule(RelativeLayout.BELOW, neu.getId());`

在你的其他情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:00:46.313

你可以这样尝试

```
RelativeLayout.LayoutParams rl = new RelativeLayout.LayoutParams(...)

rl.addRule(RelativeLayout.BELOW, anotherview.getId())
rl.addRule(RelativeLayout.ALIGN_PARENT_LEFT)

parentLayout.addView(myView, rl) 
```

# javascript - 日期的正则表达式？

> ID：14139226
> 
> 赞同：1
> 
> 时间：2013-01-03T12:45:16.463
> 
> 标签：javascript, jquery, regex

我试图找到一种测试字符串是否符合当前标准的最佳方法。基本上，我有一个这样的约会：

```
1/17/2013  12:00 AM 
```

月和日字段可以是一位或两位数，而年份总是四位。小时可以是一位数或两位数。分钟字段始终为两位数例如，这也适用：

```
 10/1/2013  1:00 AM 
```

现在，我有这个正则表达式，但它似乎不起作用：

```
/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/(20[1-9][2-9]) (0[1-9]|1[0-2]):([0-5][0-9]) (am|pm)$/ 
```

我这样使用它：

```
 $('input[name=targetMe]').each( function() {
        alert('start')
        if(/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/(20[1-9][2-9]) (0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/.test($(this).val())) {
              alert('passes')
        } else {
              alert('dont')
        }
  }); 
```

我当前的正则表达式是否有问题，或者我应该以其他方式使用它，还是有比这更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:49:18.007

我相信你可以在 Javascript 中使用 parse 方法：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)

所以它会是这样的：

```
$('input[name=targetMe]').each( function() {
    alert('start')
    if(Date.parse($(this).val())) {
          alert('passes')
    } else {
          alert('dont')
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:49:24.880

尝试：

```
/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12]\d|3[01])\/(20[1-9]\d) (0?[1-9]|1[0-2]):([0-5]\d) ([AP]M)$/ 
```

请注意，这匹配从（包括）2010 年到 2099 年的任何年份。您的正则表达式意味着您只需要 2012-2099 年的年份，在这种情况下，请使用类似`20(1[2-9]|[2-9]\d)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:01:30.220

您可以尝试`Date.Parse`尝试确定该字符串是否为有效日期。但是，由于该方法依赖于实现，您还应该阅读有关此的注释 - [javascripts 和 dates what mess](http://blog.dygraphs.com/2012/03/javascript-and-dates-what-mess.html)。

要回答原始问题，如下所示的简单正则表达式就足够了。

```
^([1-9]|1[0-2]?)/([1-9]|[1-2][0-9]|3[0-1])/(19|20)[0-9][0-9] +(0?[0-9]|1[0-2]?):[0-5][0-9] +(a|p)m$ 
```

** 更正以过滤一些不正确的值 - 数字！= 时间 **

`20`如果日期和月份为 1 位或 2 位数字，年份为 4，起始数字以 开头，小时为 1 位或 2 位数字，分钟为 2 位数字，则上述将验证日期。日期和时间用两个空格隔开。

我使用了 RegExp 对象，因为直接输入似乎在`/`表达式结束时被中断。另外，我添加了“i”标志，用于不区分大小写的 am/pm 搜索。要么转义它，要么更改为使用该对象。

```
var regex = "^([1-9]|1[0-2]?)/([1-9]|[1-2][0-9]|3[0-1])/(19|20)[0-9][0-9] +(0?[0-9]|1[0-2]?):[0-5][0-9] +(a|p)m$";

var val = "1/17/2013  12:00 AM";
if(new RegExp(regex, "i").test(val)){
    alert("Success");
} else {
    alert("Fail");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:14:48.013

好的，这是我找到的最终解决方案，它结合了我在这里收到的所有重要意见！

```
$('input[name=targetMe]').each( function() {
    alert('start')
    if(/^([1-9]|1[0-2])\/([1-9]|[1-2][0-9]|3[0-1])\/(19[0-9][0-9]|20[0-9][2-9]) (0[1-9]|1[0-2]):([0-5][0-9]) (am|pm|AM|PM)$/.test($(this).val())) {
          alert('passes')
    } else {
          alert('dont')
    } 
```

});

这将接受 1900 年代或 2000 年代的任何内容，以及日期和月份的个位数和两位数。

# windows-8 - 如何 ActiveSync Windows Mobile 6 到 Windows 8

> ID：14139230
> 
> 赞同：2
> 
> 时间：2013-01-03T12:45:30.017
> 
> 标签：windows-8, windows-mobile-6.5, activesync, windows-mobile-5.0, windows-mobile-6.1

我有一些装有 Windows CE 5、CE 6、Windows Mobile 6.1 和 6.5 的设备。在 XP 和 Windows 7 上与 ActiveSycn 4.5 同步我没有问题。

现在我面对的是新的 Windows 8，我无法连接。有谁知道如何连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:54:36.407

完毕！首先我连接了设备，windows 8 检测到了它，但它无法安装它。然后我在 Windows 8 上执行了 Windows 更新，大约有 20 个更新待处理。这在其他软件包中安装了 Compact 框架 2 和 3.5。重新启动，现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T22:10:39.737

下载 [http://download.microsoft.com/download/0/4/3/0432540e-2d1a-415d-9c9d-a9963e43503e/drvupdate-amd64.exe](http://download.microsoft.com/download/0/4/3/0432540e-2d1a-415d-9c9d-a9963e43503e/drvupdate-amd64.exe) for win8 64bit 并重新连接您的设备。安装过程中几乎没有错误 - 忽略它。

# php - 切换mysql查询比较结果

> ID：14139238
> 
> 赞同：1
> 
> 时间：2013-01-03T12:45:47.543
> 
> 标签：php, mysql

我有一个包含几列的表，其中一个是日期列（data1）。

使用的mysql查询是

```
SELECT * from leads WHERE data1 between date_sub(now(),INTERVAL 1 WEEK) and now() 
```

然后我们从每一行获取数据，运行一些计算并将其存储为单独的变量。

我现在想将此数据与上周的数据（在同一张表中）进行比较，即通过更改 SELECT 查询。

让我展开...

从表中获取本周数据的查询：

```
$sqld = "SELECT * from leads WHERE data1 between date_sub(now(),INTERVAL 1 WEEK) and now()"; 
```

现在我们运行提取数据

```
$result = mysql_query($sqld) or die(mysql_error());

$num_rows = mysql_num_rows($result);

while($row = mysql_fetch_array($result))
{
      $referred = $referred + $row['referred'];
      $invalidated = $invalidated + $row['invalidated'];
      $tobequalified = $tobequalified + $row['tobequalified'];
} 
```

（以上只是我们需要运行来演示的计算片段）。

现在我们根据本周的数据显示结果

```
 <h4>Totals for this week</h4>

            <table class="table stat-table">
                <tbody>
                    <tr>
                        <td class="value"><? echo $num_rows; ?></td>
                        <td class="full">Total leads</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $referred; ?></td>
                        <td class="full">Referred</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $invalidated; ?></td>
                        <td class="full">Invalidated</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $tobequalified; ?></td>
                        <td class="full">To be qualified</td>
                    </tr>

                </tbody>
            </table> 
```

我现在想**更改上面的 $sqld 查询**以选择表中属于**上周**的行，在上面运行相同的计算并在下面显示结果，以便我们可以比较两者。

```
 <h4> Totals for last week</h4>

            <table class="table stat-table">
                <tbody>
                    <tr>
                        <td class="value"><? echo $num_rows; ?></td>
                        <td class="full">Total leads</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $referred; ?></td>
                        <td class="full">Referred</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $invalidated; ?></td>
                        <td class="full">Invalidated</td>
                    </tr>
                    <tr>
                        <td class="value"><? echo $tobequalified; ?></td>
                        <td class="full">To be qualified</td>
                    </tr>

                </tbody>
            </table> 
```

有没有什么方法可以在不复制所有内容并更改 $sqld 查询的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:27:09.560

```
$result1 = mysql_query("SELECT * FROM leads");
$result2 = mysql_query("SELECT * FROM other table");
$arr1 = new Array();
$arr2 = new Array();

while($row = mysql_fetch_array($result, MYSQL_ASSOC))
  {
  $arr1['FirstName'] = $row['your column name'];
  }

while($row = mysql_fetch_array($result, MYSQL_ASSOC))
  {
  $arr2['FirstName'] = $row['your column name'];
  } 
```

现在您有了两个数组（$arr1 和 $arr2），您可以根据需要进行比较...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:32:58.233

我认为您可以创建一个用于重复数据的函数并使用一些参数调用它来更改查询，如下所示

```
somefunction("Previous");
somefunction();

function somefunciton($query = "current") {
    if($query == "Current")
        $sqld = "SELECT * from leads WHERE data1 between date_sub(now(),INTERVAL 1 WEEK) and now()";
    else
        $sqld = "SELECT * from leads WHERE data1 between date_sub(now(),INTERVAL 2 WEEK) and (now(),INTERVAL 1 WEEK)";
    $result = mysql_query($sqld) or die(mysql_error());

    $num_rows = mysql_num_rows($result);

    while($row = mysql_fetch_array($result))
    {
          $referred = $referred + $row['referred'];
          $invalidated = $invalidated + $row['invalidated'];
          $tobequalified = $tobequalified + $row['tobequalified'];
    }
    <h4>Totals for this week</h4>

        <table class="table stat-table">
        <tbody>
            <tr>
            <td class="value"><? echo $num_rows; ?></td>
            <td class="full">Total leads</td>
            </tr>
            <tr>
            <td class="value"><? echo $referred; ?></td>
            <td class="full">Referred</td>
            </tr>
            <tr>
            <td class="value"><? echo $invalidated; ?></td>
            <td class="full">Invalidated</td>
            </tr>
            <tr>
            <td class="value"><? echo $tobequalified; ?></td>
            <td class="full">To be qualified</td>
            </tr>

        </tbody>
        </table>
} 
```

# java - 在 RestFul Webservice 中传递 JSONObject

> ID：14139239
> 
> 赞同：0
> 
> 时间：2013-01-03T12:45:49.773
> 
> 标签：java, json, rest

我正在使用`RestFul Webservice`with`JBoss Server`部署应用程序以接收`JSONObject`我的应用程序`web service`，以测试我是否已为其创建`web service`并编写了测试用例。现在`JSONobject`，当我将 json 对象传递给`@post service`称它为响应`Null Pointer Exception`，即使我尝试将字符串传递给它，它也会响应`null`值。我已经使用`Annotations`如下`webservice`

```
@consumes({Mediatype.APPLICATION_JSON})

@Consumes("application/json") 
```

测试用例为：

```
 @Test
   public void testgetmsg() {
    String msg = "{\"patient\":[{\"id\":\"6\",\"title\":\"Test\"}]}";
    try {
        JSONObject obj = new JSONObject(new JSONTokener(msg));
            WebResource resource = client.resource( "https://localhost:8443/../../resources/create");
        ClientResponse response = resource.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).
                        entity(obj).post(ClientResponse.class,JSONObject.class);
                 }
    } 
```

任何人都可以指导我继续前进吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T08:03:29.427

```
//CLIENT

public static void createStudent() {
    String input = "{\"id\":12,\"firstName\":\"Fade To Black\",\"lastName\":\"Joy\"}";
    ClientResponse response = service.path("class/post")
            .type("application/json").post(ClientResponse.class, input);
    System.out.println("Output from Server .... \n");
    String output = response.getEntity(String.class);
    System.out.println(output);
    System.out.println(response.getStatus()+ "OK");
} 
```

除了使用代码客户端，您还可以使用 add on firefox (POSTER) 将值作为 json 或 formparam ...

```
 // create new student SERVER
   //class

   @POST
   @Path("post")
   @Consumes(MediaType.APPLICATION_JSON)
   @Produces(MediaType.APPLICATION_JSON)
   public Response createStudent(Student st) {
       // add new student 
       StudentDAO.instance.getModelStudent().put("8", st);
       // response status code
       return Response.status(200).entity(st).build();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:08.007

您不需要创建 json 对象，只需传递字符串即可。

你应该

```
 ClientResponse response = resource.type(MediaType.APPLICATION_JSON)
                                   .accept(MediaType.APPLICATION_JSON)
                                   .post(ClientResponse.class, msg); 
```

# c++ - 是否有 NullPointerException 的 C++ 等价物

> ID：14139244
> 
> 赞同：29
> 
> 时间：2013-01-03T12:46:05.690
> 
> 标签：c++, nullpointerexception

Java 和 C#，可能还有许多其他语言，都有一个预定义的异常类，当在不应该使用 null 参数时抛出该异常类。C ++中有类似的东西吗？如果没有，我是否可以使用另一个预定义的异常，或者我应该定义自己的异常？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-03T12:51:30.107

取消引用 NULL 指针在 C++ 中是未定义的行为——这意味着代码看起来可以工作。不保证会抛出异常。您可以使用

[`std::invalid_argument`](https://en.cppreference.com/w/cpp/error/invalid_argument)

异常（为其提供有意义的值 - `"p is NULL"`），但您必须自己进行检查。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T12:47:58.193

通常，在 C++（或 C）中，您**永远不会**取消引用 NULL 指针。这样做有**未定义的行为**（可能是我所知道的任何实现的段错误，但根据标准可能会发生任何事情）。在其他语言中这可能也是一件坏事，但我不知道这些足以断言。

最好是防止这种情况发生，而不是试图从中恢复（无论如何这在 C 或 C++ 中都做不到）。

防止一些相关的程序员错误的常用模式是使用`assert()`内部函数体，例如：

```
int foo(int* myint)
{
  // Ensure myint is not NULL
  assert(myint);

  // Do something with myint
  (*myint)++;

  return *myint;
} 
```

此类`assert()`调用在发布版本中完全被忽略，因此在生产中没有成本。他们只是帮助发展。在调试构建时，如果不满足条件，程序会立即中止并显示非常明确的错误消息。通过调试器运行它，您可以轻松检查调用堆栈以调查确切原因。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T14:15:12.867

C++ 中没有用于取消引用 NULL 指针的标准例外。

如果你想要它，你可以自己实现它。在 UNIX 上设置 SIGSEGV 信号处理程序并从处理程序中抛出异常。在 Windows 上，使用 _set_se_translator() API 安装“结构化异常”处理程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-03T12:50:15.847

`NullReferenceException`FTR，在 C# 中，除非您想被队友刺伤，否则您不会将s 用于任何事情。有一个`ArgumentNullException`用于拒绝空参数的替代方法。NRE 是由运行时抛出的，而不是你。

但请注意，与断言相比，这并没有真正的优势，因为您不应该捕获其中之一：如果它们被抛出，则表明它们存在错误。这些是 Eric Lippert 所说的[愚蠢的异常](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)，它们是你自己的错误，你的代码不应该专门对它们做任何事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-03T12:57:14.363

在几乎所有涉及错误使用空指针（尤其是取消引用它）的情况下，C++ 标准只是简单地保留了未定义的行为。没有提供特定的异常类型（也不会抛出异常）。

不过，我想到了这个规则的一个可能的例外。`std::function`，这是一个可用于包装函数的 C++11 标准库模板，可以分配一个空指针：

```
std::function<void(int)> func = nullptr; 
```

然后，如果您尝试通过执行`func(arg);`for some argument来调用由它包裹的函数`arg`，它将引发`std::bad_function_call`异常。

当然，这并不完全等同于其他语言的空指针异常，因为它的普遍适用性要差得多。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-03T12:54:02.500

在 C++ 下，取消引用空指针将导致未定义的行为，这主要以分段错误结束应用程序。在 Visual Studio 下，您可以使用结构化异常处理 (SEH) 等扩展，这些扩展允许捕获空指针取消引用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-12T18:50:06.050

您可以将指针包装在模板类中，该类为指针提供有限的接口。每当您访问指针并抛出异常时，它都可以进行 nullptr 检查。

# c# - 将顶层窗口覆盖在另一个窗口之上

> ID：14139248
> 
> 赞同：2
> 
> 时间：2013-01-03T12:46:15.893
> 
> 标签：c#, .net, winforms, winapi

在我目前正在开发的软件产品中，我们有几个 3D 视图控件。似乎需要在这些 3D 视图之上有叠加信息。我不会过多介绍背景细节，因为这不是重点，但这里是我们面临的限制：

*   我们必须使用两个不同的 3D 视图控件
*   我们没有他们的源代码
*   它们嵌入在 Windows 窗体控件中，并且我们围绕这些控件的所有 GUI 都在 Windows 窗体中
*   我们使用 .NET Framework 3.5SP1 和 Windows 7

我们希望能够在这些 3D 视图之上显示各种叠加信息和控件，因为我们通常通过在大屏幕上显示全屏 3D 视图来演示我们的产品，而不是显示具有必要信息和控件的 GUI。

过去我们只使用一种类型的 3D 视图，我通过各种涉及反射的技巧来管理我自己用 DirectX 编写的覆盖窗口系统（基于 WorldWind .NET 覆盖小部件，3D 视图确实基于 WorldWind时间）。3D View 产品的下一个版本对渲染核心代码进行了巨大的更改，当然也使这些 hack 不兼容（是的，我知道它来了 :-)）。此外，由于其他产品的不同需求，我们现在正在使用另一种类型的 3D View，也是封闭源代码。

我强调我们没有它们的源代码，因为我们无法访问渲染循环，因此无法挂钩为 3D 引擎制作的窗口系统，例如 CEGUI（自己搜索，我还不允许发布太多超链接，抱歉）。

因此，我有了以下想法：既然我们的 3D 视图嵌入在 winforms 控件中，为什么我们不在普通的 winforms 中编写覆盖控件，并将其覆盖在 3D 视图之上？该解决方案的优点是巨大的：

*   这将与两个 3D 视图兼容，使我们能够在需要时跨引擎重用叠加层
*   我们将能够重用我们已经为 GUI 的其余部分开发的自定义控件或表单。事实上，这是一个相当大的项目，我们开始拥有相当多的此类控件库。

唯一轻微的（！）问题是我们希望能够管理覆盖半透明，就像我在 DirectX 中使用我以前的系统一样。我们不能承受完全不透明的覆盖，因为它会使视图过于混乱。想象一个几乎不可见的覆盖层，例如当鼠标悬停在它上面时变得更加不透明。

Windows 提供了在其他窗口或控件中包含子窗口的可能性（Win32 API 并没有真正在窗口和控件之间产生区别，据我了解，这几乎是 MFC/WinForms 抽象），但由于它不是顶级 -水平窗口，我们无法调整这些的透明度，所以这不是我们可以使用的。我在[这里](http://msdn.microsoft.com/en-us/library/ms632599.aspx "关于 Windows 功能的 MS 文档")看到，这在 Windows 8 上是可能的，但是很快就不可能切换到 Windows 8，因为我们的软件部署在很多机器上，运行 7。

所以我开始了一场激烈的谷歌搜索，讨论如何解决这样的问题。看来我必须将顶级窗口“奴役”到我的 3D 视图控件。我已经在winforms中直接尝试过类似的东西，拥有一个由控件拥有的表单（不是父级的，有明显的区别，在之前链接的MS页面中阅读它），并“跟随”它在屏幕上的动作。正如预期的那样，它有点工作，但问题很难克服。最重要的是剪辑问题。如果所有者控件的父窗体更改其大小，则覆盖窗体仍会完整显示。在我的示例中，我有一个带有菜单的简单表单和一个包含日历的黑色面板（以显示子控件和拥有的控件之间的剪辑差异）。我“被奴役” 包含黑色面板的属性网格的无边框表单。它成功地跟随表格的运动，但如果我缩小主表格，我会得到这个：

[剪辑问题截图](http://i.stack.imgur.com/xfi4L.png)

请注意如何正确裁剪日历（子窗口），而不是覆盖（拥有的窗口）。在最小化/恢复主窗体时，我也会得到奇怪的效果。事实上，我的覆盖在最小化时消失了，但是在恢复时，它只是在主窗体的恢复动画发生时“生成”。但这不是一个问题，我想可以通过处理适当的事件（但哪些事件？）来解决。

据我了解，我必须自己处理至少一些剪辑，使用 win32 API 调用和挂钩。我已经开始记录自己，但这是相当复杂的事情。Win32 API 真是一团糟，而我自己是一名前 Unix 开发人员，通过出色的 .NET 框架介绍了 Windows 编程，我在 Win32 方面没有任何实际经验，因此真的不知道从哪里开始，以及如何开始让自己在这片丛林中成为一条小路……

因此，如果一位 winapi 大师路过，或者如果有人有其他想法来实现我的目标，鉴于上述限制，我会很高兴阅读它:-)

在此先感谢，并为成为这样的 stackoverflow “leecher”而道歉，订阅只是为了问一个问题，但我的工作站上没有直接的互联网访问权限（是的，真的，我必须使用特定的计算机这个），所以参与这个伟大的社区对我来说并不容易。

最后，这是我的示例代码（如果您询问，可以使用设计器代码）：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    Point _myLoc;

    private void formToolStripMenuItem_Click(object sender, EventArgs e)
    {
        var ctrl = new PropertyGrid();
        var obj = this.panel1;
        ctrl.SelectedObject = obj;
        var form = new Form();
        ctrl.Dock = DockStyle.Fill;
        form.Controls.Add(ctrl);
        form.Opacity = 0.7;
        var rect = obj.RectangleToScreen(obj.DisplayRectangle);
        form.StartPosition = FormStartPosition.Manual;
        form.Location = new Point(rect.Left + 10, rect.Top + 10);

        var parentForm = this;
        _myLoc = parentForm.Location;
        form.FormBorderStyle = FormBorderStyle.None;

        parentForm.LocationChanged += (s, ee) => {
            int deltaX = parentForm.Location.X - _myLoc.X;
            int deltaY = parentForm.Location.Y - _myLoc.Y;
            var loc = form.Location;
            form.Location = new Point(loc.X + deltaX, loc.Y + deltaY);
            _myLoc = parentForm.Location;
        };
        form.Show(this.panel1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:20:13.390

`Region`使用属性可以轻松实现剪辑。每个窗口都可以有一个关联的`Region`对象，它定义了窗口渲染约束：

```
static void ManualClipping(Control clipRegionSource, Form formToClip)
{
    var rect = clipRegionSource.DisplayRectangle;
    rect = clipRegionSource.RectangleToScreen(rect);
    rect = formToClip.RectangleToClient(rect);
    rect = Rectangle.Intersect(rect, formToClip.ClientRectangle);
    if(rect == formToClip.ClientRectangle)
    {
        formToClip.Region = null;
    }
    else
    {
        formToClip.Region = new Region(rect);
    }
} 
```

用法：

```
/* ... */
parentForm.SizeChanged += (s, ee) => ManualClipping(panel1, form);
form.Show(this.panel1); 
```

# ruby - 像 String#replace 一样替换 Ruby 中引用的整数值

> ID：14139251
> 
> 赞同：2
> 
> 时间：2013-01-03T12:46:21.773
> 
> 标签：ruby, pointers, reference

我有以下代码：

```
def mymethod(a)
  a.replace("a")
end

mystring = "b"

mymethod(mystring) 

p mystring # => "a" 
```

但我想用 Integer 执行相同的操作

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T12:55:12.120

简短的回答：没有。

长答案：不，这是不可能的。Integer 是一种基本类型，足以没有状态（和状态修改操作）。对整数的每个操作都会生成一个新整数。

*可能*，如果您降到 C 级别，您*可以*就地修改基础值。但我不确定。无论如何，这似乎是一种矫枉过正和错误的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-12T09:52:02.170

-1 表示“做错事”。这可能是一个完全合理的问题——我现在需要这样做：多个对象需要一个共享计数器。

在我看来，最好的方法是创建一个包装类并将整数作为实例变量：

```
class Counter

  def initialize(i = 0)
    @i = i
  end

  def get
    @i
  end

  def set(i)
    @i = i
  end

  def inc(delta = 1)
    @i += delta
  end

end 
```

# php - php中的T_RETURN错误

> ID：14139252
> 
> 赞同：0
> 
> 时间：2013-01-03T12:46:24.537
> 
> 标签：php

我找不到我的错误。它说我在第 34 行有一个 T_RETURN 错误。

```
if ($type == 'post') {
$query = "INSERT INTO=Oktoberfest2013 (First Name, Last Name, Phone, Address, Department,Email Address, Level of Traning) 
VALUES ('$fname','$lname', '$phone', '$address', '$department', '$email', '$level')";
    if(!$mysqli->query($query))(
    return Errormessage: $mysqli->error); 
```

最后一行是第 34 行。

这是其余的代码：

```
require_once('config.php');
function connect() {
$mysqli = new mysqli( DB_HOST, DB_USER, DB_NAME, DB_PASS);

if( $mysqli->connect_error)
    {die('connect_error ('. $mysqli->connect_error .')' 
    . $mysqli->connect_error);

    }

    return $mysqli;
    }

Function insert ($types, $values) {
$mysqli = connect ();

if ($type == 'post') {
$query = "INSERT INTO=Oktoberfest2013 (First Name, Last Name, Phone, Address, Department,Email Address, Level of Traning) 
VALUES ('$fname','$lname', '$phone', '$address', '$department', '$email', '$level')";
    if(!$mysqli->query($query))(
    return Errormessage: $mysqli->error);

    }
   Function select ($query) {
mysqli = connect();

$result=$mysqli->query($query);

While ($obj=$result->fetch_object(:)(
    $result[] =$obj;)

    return $return

    ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T12:48:47.867

```
if(!$mysqli->query($query))(
return Errormessage: $mysqli->error); 
```

您的语句块周围有括号 (..) 而不是花括号 {..}。由于您要返回一个字符串，因此该`return`语句还应格式化为：

```
return 'Errormessage:'.$mysqli->error; 
```

你的`while`循环也有类似的问题，加上更多的无效语法。删除`:`并用花括号替换语句块分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:48:30.307

因为那不是有效的 PHP。您必须将结果连接为字符串才能返回。

`return "Errormessage: " . $mysqli->error;`

正如 w3d 指出的那样，您使用`(`的是`{`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:01:12.303

PHP 报告的行号是它发现错误的位置，不一定是错误的实际位置；您必须检查导致该行的代码。

```
if(!$mysqli->query($query))(
    return Errormessage: $mysqli->error);

    } 
```

您需要始终用花括号将代码块（语句组）括起来。此外，您缺少“错误消息：$mysqli->error”周围的双引号。

```
While ($obj=$result->fetch_object(:)( 
```

（已经不匹配的）括号内不应该只有一个冒号。

```
$query = "INSERT INTO=Oktoberfest2013 (First Name, Last Name, Phone, Address, Department,Email Address, Level of Traning) 
VALUES ('$fname','$lname', '$phone', '$address', '$department', '$email', '$level')"; 
```

SQL 查询的开头附近似乎有一个杂散的等号。顺便说一句，没有理由使用 PHP 的变量插值来插入您的值。你真的应该使用 MySQLi 的[预处理语句](http://php.net/manual/en/mysqli.prepare.php)功能来防止[SQL 注入](//en.wikipedia.org/wiki/SQL_injection)。

# windows - 基于月份复制文件的cmd脚本

> ID：14139255
> 
> 赞同：0
> 
> 时间：2013-01-03T12:46:29.967
> 
> 标签：windows, date, cmd

我正在编写一个脚本来将文件从 ftp 服务器复制到本地。我可以使用 cmd 命令下载文件等。我现在唯一的问题是将文件复制到目标。我想根据月份复制文件。如果当前月份是奇数（如 1 月、3 月、5 月、7 月...等），那么如果月份是偶数（如 2 月、4 月等），则文件应复制到 D:\该文件应复制到 E:\ 我如何使用 cmd 命令脚本来执行此操作。我认为我应该获取当前日期并提取月份并在月份的基础上执行此操作。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:06:11.723

```
@echo off
rem Next line assume that %date% format is MM/DD/YYYY:
rem (change by tokens=2 if format is DD/MM/YYYY)
for /F "tokens=1 delims=/" %%a in ("%date%") do set /A parity=1%%a %% 2
if %parity% equ 1 (
   set drive=D:\
) else (
   set drive=E:\
)
copy the_file... %drive% 
```

# python - 如何从字典中制作一个漂亮的矩阵

> ID：14139258
> 
> 赞同：10
> 
> 时间：2013-01-03T12:46:44.033
> 
> 标签：python, dictionary, matrix

我想制作一个矩阵来制作嵌套字典的列表。但我不知道如何制作矩阵，更不用说如何将我的价值观放入其中。

我的字典看起来像：

```
 {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
    '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
    '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
    '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
    '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
    '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}} 
```

它应该在矩阵中排序，所以它看起来像这样：

```
 1  2  3  4   5   6
     1  -  1  0  0   1   29
     2  13 -  1  0   21  0
     3  0  0  -  1   0   1
     4  1  17 1  -   2   0
     5  39 1  0  0   -   14
     6  0  0  43 1   0   - 
```

我只是试图了解如何制作矩阵：

```
 table=[[for 0 in range(6)] for j in range[6]]
    print table
    for d1 in range(6):
        for d2 in range(6):
            table[d1][d2]=d1+d2+2
    print table 
```

但我有一本字典，而不是列表。我真的迷路了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T12:56:33.427

`import`**[`pandas`](http://pandas.pydata.org)**`as pd`

```
a = pd.DataFrame({'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
                  '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
                  '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
                  '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
                  '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
                  '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}}) 
```

放入`a`：

```
 1   2   3   4   5   6
1 NaN  13   0   1  39   0
2   1 NaN   0  17   1   0
3   0   1 NaN   1   0  43
4   0   0   1 NaN   0   1
5   1  21   0   2 NaN   0
6  29   0   1   0  14 NaN 
```

然后可以打印成您的格式：

```
print a.to_string(na_rep='-') 
```

印刷：

```
 1   2   3  4   5   6
1   -   1   0  0   1  29
2  13   -   1  0  21   0
3   0   0   -  1   0   1
4   1  17   1  -   2   0
5  39   1   0  0   -  14
6   0   0  43  1   0   - 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T13:27:30.443

使用[`str.format()`](http://docs.python.org/2/library/string.html#formatspec)：

```
dic = {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
    '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
    '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
    '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
    '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
    '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}}

strs = "{0:^2} {1:^2} {2:^2} {3:^2} {4:^2} {5:^2} {6:^2}"    

print strs.format(" ", *sorted(dic))

for x in sorted(dic):
    print strs.format(x, *(dic[x].get(y, '-') for y in sorted(dic))) 
```

**输出：**

```
 1  2  3  4  5  6 
1  -  1  0  0  1  29
2  13 -  1  0  21 0 
3  0  0  -  1  0  1 
4  1  17 1  -  2  0 
5  39 1  0  0  -  14
6  0  0  43 1  0  - 
```

您还可以生成`strs`这样的：

```
strs = " ".join("{"+"{0}{1}".format(i, ":^2}") for i in range(7)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T14:08:59.123

一个基于@Ashwini Chaudhary 的解决方案的函数`str.format`可以使用可变长度的字典：

```
def prettyPrint(d,space=5,fill='-'):
    strs = ''.join('{{{0}:^{1}}}'.format(str(i),str(space)) 
                                 for i in xrange(len(d)+1))
    std = sorted(d)
    print strs.format(" ",*std)
    for x in std:
        print strs.format(x,*(d[x].get(y,fill) for y in std)) 

prettyPrint(d) 
```

出去：

```
 1    2    3    4    5    6  
  1    -    1    0    0    1   29  
  2   13    -    1    0   21    0  
  3    0    0    -    1    0    1  
  4    1   17    1    -    2    0  
  5   39    1    0    0    -   14  
  6    0    0   43    1    0    - 
```

或者：

```
prettyPrint(d,space=3,fill='0') 
```

出去：

```
 1  2  3  4  5  6 
 1  0  1  0  0  1 29 
 2 13  0  1  0 21  0 
 3  0  0  0  1  0  1 
 4  1 17  1  0  2  0 
 5 39  1  0  0  0 14 
 6  0  0 43  1  0  0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T13:14:17.217

这是将在屏幕上打印矩阵的python代码。打电话`prettyPrint(data)`。

`table`是一个包含数据的多维数组（矩阵）。

```
import string

data = {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
    '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
    '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
    '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
    '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
    '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}}

def prettyPrint(data):
    count = len(data)

    table = [[0 for x in xrange(count)] for x in xrange(count)]

    print string.ljust(' ', 4),
    for j in range(1, count + 1):
        print string.ljust(`j`, 4),
    print ""

    for i in range(1, count + 1):
        print string.ljust(`i`, 4),

        for j in range(1, count + 1):
            #print string.rjust(`j`, 4),
            if j != i:
                print string.ljust(`data[str(i)][str(j)]`, 4),
                table[i-1][j-1] = data[str(i)][str(j)]
            else:S
                print string.ljust('-', 4),
                table[i-1][j-1] = '-'
        print ""

    print "\nMatrix: \n"
    for row in table:
        print row

prettyPrint(data) 
```

输出：

```
>>> 
     1    2    3    4    5    6    
1    -    1    0    0    1    29   
2    13   -    1    0    21   0    
3    0    0    -    1    0    1    
4    1    17   1    -    2    0    
5    39   1    0    0    -    14   
6    0    0    43   1    0    -    

Matrix: 

[0, 1, 0, 0, 1, 29]
[13, 0, 1, 0, 21, 0]
[0, 0, 0, 1, 0, 1]
[1, 17, 1, 0, 2, 0]
[39, 1, 0, 0, 0, 14]
[0, 0, 43, 1, 0, 0]
>>> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-03T13:17:44.233

这对我有用。它不是很pythonic，因为我不使用列表推导和那种东西，但这种方式更容易阅读和理解：

```
import sys

matrix = {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
          '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
          '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
          '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
          '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
          '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}}

#print the column index
sys.stdout.write ("\t") # empty tab at the beginning
for col_index in range (1, len(matrix)+1):
    sys.stdout.write ("%d\t" % col_index)
print ""

# order the matrix rows, using the dictionary keys
for row_index in sorted (matrix.iterkeys()):
    #print the row index
    sys.stdout.write (str(row_index)+"\t")

    # take each row, and order it by its inner key:
    row = matrix[row_index]
    ordered_row = sorted (row.iterkeys())

    # iterate from 1 to number_of_matrix_rows
    for col_index in range (1, len(matrix)+1):
        # if the current column exists as a key in
        # the row, print it. Otherwise, print "-"
        row_item = "-"
        if str(col_index) in ordered_row:
            row_item = row[str(col_index)]
        sys.stdout.write (str(row_item)+"\t")

    # print next row
    print "" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T13:15:37.023

可能不是一个完美或最有效的解决方案，但它有效：

```
def printMatrix (d):
    # get the amount of characters needed for the maximum number
    numberWidth = len(str(max(max(v.values()) for v in d.values())))

    # function to format the numbers
    formatNumber = lambda x: str(x).rjust(numberWidth)

    keys = sorted(d.keys())
    rows = [' '.join(map(formatNumber, [''] + keys))]

    for r in keys:
        row = [r]
        for k in keys:
            row.append(d[r].get(k, '-'))
        rows.append(' '.join(map(formatNumber, row)))

    print('\n'.join(rows)) 
```

像这样使用：

```
>>> d = { ... }
>>> printMatrix(d)
      1   2   3   4   5   6
  1   -   1   0   0   1  29
  2  13   -   1   0  21   0
  3   0   0   -   1   0   1
  4   1  17   1   -   2   0
  5  39   1   0   0   -  14
  6   0   0  43   1   0   - 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-03T13:32:54.563

以下单行可以将您的字典更改为列表列表（方阵）：

```
[[d[str(i)].get(str(j), '-') for j in range(1, 7)] for i in range(1, 7)] 
```

`d`你的输入字典在哪里。基于此，您可以轻松地以您想要的任何格式进行打印。顺便说一句，除非这是一项学校作业，否则我认为以任何具体格式打印都不重要。将字典更改为类似矩阵的数据结构更有意义。如果只是为了调试，您可以使用`pprint`以获得更好的输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T13:28:27.267

这是一个没有外部库的冗长而灵活的代码，它还返回一个可用的矩阵。

```
dict_matrix = {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
               '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
               '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
               '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
               '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
               '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}}

def matricize_dict(a_dict, x_size, y_size):
    matrix = []

    for i in range(y_size):
        line = []
        for j in range(x_size):
            line.append('-')
        matrix.append(line)

    for i in range(y_size):
        line = dict_matrix[str(i+1)]
        for j in range(x_size):
            try:
                cell = line[str(j+1)]
            except KeyError:
                pass
            else:
                matrix[i][j] = cell
    for item in matrix:
        print(item)

    return matrix

matricize_dict(dict_matrix, 6, 6) 
```

# matlab - Matlab图中不显示无穷大符号

> ID：14139259
> 
> 赞同：8
> 
> 时间：2013-01-03T12:46:44.330
> 
> 标签：matlab, latex, tex, axis-labels, infinity

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:26:03.243

From this I make up that you should use LaTeX as the interpreter, rather than TeX:

[http://www.mathworks.com/matlabcentral/answers/21984](http://www.mathworks.com/matlabcentral/answers/21984)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T16:21:39.407

# login - 如何在登录时挂载/解锁我的自定义（！）ecryptfs 目录？

> ID：14139261
> 
> 赞同：2
> 
> 时间：2013-01-03T12:46:48.670
> 
> 标签：login, kernel, mount, passphrase, ecryptfs

我想我需要**在登录时将用户密钥环中的密钥添加到内核密钥环**，但让我解释一下整个事情：

我有一个自定义`ecryptfs`目录设置了一个巨大的烦人密码，因为[Ubuntu 拒绝实现对关键文件的支持](https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils/+bug/741364)：

**2011**：*不幸的是，由于许可证不兼容（如下所述），我们目前没有针对 ssl 构建 ecryptfs。不过，我打算让这个错误保持开放，并尝试解决这些问题。*

**2012**：*近期内没有改进此功能的计划。这是一项相当大量的工作，但没有开发人员对该功能表现出兴趣。*

我想`ecryptfs`在登录时自动挂载/“解锁”这个目录，而不必手动输入这个烦人的密码。在 Ubuntu (also `ecryptfs`) 中使用加密的主目录时，使用登录密码解包的密钥会发生这种情况，但这不适用于自定义挂载。

对于其他用途（例如`LUKS`），您可以简单地将密钥/密码存储在您的用户密钥环中。但是因为`ecryptfs`在内核中工作，所以这个密钥需要存储在.`kernel keyring`而不是`user keyring`.

`ecryptfs-add-passphrase`手动，您可以使用or将密钥添加到内核密钥环`ecryptfs-manager`，之后您可以根据需要安装和卸载`ecryptfs`目录。但是在重新启动后，这个密钥又消失了，而且有充分的理由。

但是我希望它在我用我的用户登录后自动恢复，这样我就可以`ecryptfs`再次挂载/卸载目录而无需输入它的密码。我怎样才能做到这一点？

**更新**

在**Archlinux**上有一个专门为此目的开发的名为[ecryptfs-simple的工具：](http://xyne.archlinux.ca/projects/ecryptfs-simple/) *ecryptfs-simple 是一个实用程序，供希望以最简单的方式使用 eCryptfs 的用户使用。这个想法是使 eCryptfs 像 EncFS 一样易于使用。*

显然，您可以使用 设置自动挂载`ecryptfs-simple -a`，但此工具不适用于 Ubuntu，而且我不知道此设置是否能在重启后继续存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T18:34:09.627

听起来您想操纵键，因此 keyctl 可能是您的首选武器。除非您指的是我不熟悉的其他一些 Ubuntu 特定的密钥环。从 man keyctl 我可以使用此命令将 root/sudo/(kernel?) 密钥环中的密钥复制到我的用户密钥环中，类似的东西应该适合您：

> sudo keyctl 管道 (wantedkeyid#) | keyctl 填充用户 newkeydesc @u

也许您已经阅读了 ArchWiki 关于使用 eCryptfs 的优秀文章。[https://wiki.archlinux.org/index.php/System_Encryption_with_eCryptfs#Auto-mounting](https://wiki.archlinux.org/index.php/System_Encryption_with_eCryptfs#Auto-mounting) 它有关于使用 Ubuntu 工具或手动 eCryptfs 的信息，以及关于自动挂载（使用 PAM）的部分。或者也许一个简单的 bash 脚本`ecryptfs-add-passphrase`（读取你的密钥文件）和`mount`你的文件夹会更容易？并且 ecryptfs 本身也支持从文件中读取密码`passphrase_passwd_file=`，参见`man ecryptfs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:00:31.273

您需要将密码存储在某处，然后您可以自动挂载文件系统。但这可能是个坏主意——将密钥保存在本地。

# jquery - 从 jquery.get 原始 html 响应中提取数据

> ID：14139264
> 
> 赞同：0
> 
> 时间：2013-01-03T12:47:01.470
> 
> 标签：jquery, ajax

我正在尝试使用 jQuery 制作一个自我更新的元素。这是我的代码：

```
function chart_readyset() {
    $.get("chart.php?live=true", function(data) {
    if(data.replace(/[ \t\r]+/g,"").split('\n').join('') != $("#chart-wrapper").html().replace(/[ \t\r]+/g,"").split('\n').join('')) {
        $("#chart-wrapper").fadeOut('fast').html(data).fadeIn('fast');
    }
    window.setTimeout(chart_readyset, 5000);
  });    
} 
```

正如您所看到的，它从元素的 html 加载数据`chart.php?live=true`并将其与元素的 html 进行比较，然后仅在实际更新数据时才更新它（具有闪烁效果）。我必须从 html 中删除所有空格。

此代码适用于除 IE 之外的所有浏览器。所以我发明了一种看起来更稳定优雅的新方法。使用 PHP，我生成一些哈希码并通过`<meta>`标签传递它：

```
<meta id="hash" hash="25a4f466ee0b2f12fe505dd9a1151456"> 
```

所以现在我需要从响应 html 中提取这些数据。从 DOM 树中提取它非常容易：

```
$('#hash').attr('hash'); 
```

但是我不能对原始的 html 响应做同样的事情。我尝试先对其进行 DOM 化（`$(data).find('#hash').attr('hash')`），但它不起作用（在控制台日志中只有“未定义”）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:49:21.010

用这个：

```
$(data).filter('#hash').attr('hash'); 
```

筛选（）：

将匹配元素集减少为匹配选择器或通过函数测试的元素。

有关更多演示和示例：

[jQuery API 上的 filter()](http://api.jquery.com/filter/)

# c++ - C ++ init-list：使用未初始化的成员初始化其他成员不会发出警告

> ID：14139265
> 
> 赞同：9
> 
> 时间：2013-01-03T12:47:10.183
> 
> 标签：c++, gcc, clang, member-variables, coverity

g++（4.4 和 4.6）、clang++（3.2）和覆盖率，分别使用 -Wall 和 -Wextra（+ 其他一些）或 -Weverything 给我以下代码片段的警告：

```
class B {
    char *t2;
    char *t;

public:
    B() : t2(t), t(new char[100]) {}
}; 
```

我至少会期待一个关于使用未初始化（成员）变量的小警告。

有什么我想念的吗？这是一个通缉的“无警告”情景吗？我的软件中至少有一个（现在有）一个很难找到的错误。

**编辑**：正如在[这个新问题](https://stackoverflow.com/questions/14934911/coverity-and-c-heap-with-new-vs-on-stack-allocation)中所读到的，我意识到在某些情况下， *coverity 会*警告这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:57:09.593

没有充分的理由不在这里发出警告。

G++ 不够聪明，无法诊断构造函数中未初始化的成员，请参阅[http://gcc.gnu.org/PR2972](http://gcc.gnu.org/PR2972)

我有一个正在进行的补丁来修复它，我希望在“今年某个时候”完成

即使使用我的补丁，我也不确定 G++ 是否会发出警告，因为`t2` *已*初始化，但它已初始化为不确定的值。让编译器跟踪这不是微不足道的，但应该是可能的（所以我很惊讶即使 Coverity 错过了它。）运行时工具，比如`valgrind`get it right 。

当我重新访问我的补丁时，我会考虑这种情况，看看我是否可以让它发出警告，而不会增加太多开销（目前我的补丁检查没有初始化程序的成员是否会使数据未初始化，为了抓住这个我还需要检查成员*使用*初始化程序并检查该初始化程序是否依赖于尚未初始化的另一个成员，这需要检查每个成员，这可能会影响具有大量成员的类的编译速度。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:57:03.450

C++ 标准说使用未初始化的变量会导致未定义的行为。它不要求编译器发布关于它的诊断。因此，是否收到警告是 QOI（实施质量）的事情。

# join - 如何使用 join 命令或 awk 打印 un join 行？

> ID：14139269
> 
> 赞同：2
> 
> 时间：2013-01-03T12:47:33.633
> 
> 标签：join, awk

join 命令在 2 个文件中打印 2 个常用字符串。但是有没有办法打印不匹配的字符串？

文件 1

```
a  1
b  2
c  3 
```

文件2

```
a  3
b  3 
```

输出

```
c  3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:51:07.780

使用连接命令：

```
join -a1 -v1 file1 file2 
```

`-a1`= 打印第一个文件的不匹配行。`-v`抑制正常输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:00:46.687

要加入第一个字段，这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$1]; next } !($1 in a)' file2 file1 
```

结果：

```
c  3 
```

# json - Grails - 如何将查询结果（来自 MongoDB）转换为没有冗余字段的 JSON 字符串

> ID：14139270
> 
> 赞同：0
> 
> 时间：2013-01-03T12:47:34.623
> 
> 标签：json, mongodb, grails, grails-domain-class, database

我有以下域类

```
class Settings {
    static constraints = {
        pageID(nullable: false, unique: true)
        lp()
    }

    String pageID
    Map lp
} 
```

我正在像这样查询数据库：

```
...
def query = Settings.where {pageID == id}
def result = query.find() 
```

这是评估结果的屏幕截图： ![在此处输入图像描述](../Images/0149cd23eec8904082da62a35fda9aa3.png)

现在我正在寻找一种将结果格式化为 JSON 的方法，如下所示：

```
{"lp":{"account":"12345678","appKey":"64dsfg64dg64fg65dfg6","domain":"my.domain.com"},"pageID":"123456"} 
```

提取字段的正确方法是什么？如果我可以避免手动获取每个字段，那将是最好的。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:47:48.597

由于我没有找到原生函数，所以我使用@Jinzhao Wu 的方法编写了这个辅助函数：

```
def getDBRecord(Object dc) {
    def jo = new JSONObject()
    def domainClass = new DefaultGrailsDomainClass(dc.class)
    def props = domainClass.getPersistantProperties()
    for (int i = 0; i < props.length; i++) {
        jo.put(props[i].name, dc[props[i].name]);
    }
    return jo;
} 
```

希望能帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:12:36.520

只需使用 gorm 动态查找器：

```
def result = Settings.findByPageId(id)
render result as JSON 
```

# wordpress - 作者帖子的评论总数

> ID：14139271
> 
> 赞同：0
> 
> 时间：2013-01-03T12:47:41.020
> 
> 标签：wordpress

我想显示其他用户为作者的所有帖子提交的评论总数！例如这样的：

```
get_author_posts_total_number_of_comments($author->ID); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:33:29.580

```
function get_author_posts_total_number_of_comments($authorID)
{
    global $wpdb;
    $sql = "SELECT SUM(comment_count) AS total FROM $wpdb->posts WHERE post_author=%d";
    return $wpdb->get_var($wpdb->prepare($sql,$authorID));
} 
```

# javascript - 动态页面中的CK编辑器

> ID：14139273
> 
> 赞同：1
> 
> 时间：2013-01-03T12:47:45.850
> 
> 标签：javascript, ckeditor

我想在动态加载的加载页面中显示一个 Ck 编辑器，我使用了以下 Script ，但只有一个 ck 编辑器出现其他看起来像文本区域？

```
 <script >
            function refer(format, id)
            {

            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                req=new XMLHttpRequest();

            }
            else
            {// code for IE6, IE5
                req=new ActiveXObject("Microsoft.XMLHTTP");

            }
            var strURL="referformat.php?format="+format+"&id="+id;

            if (req)
            {
                req.onreadystatechange = function() {

                    if (req.readyState == 4) {
                        // only if "OK"

                        if (req.status == 200)
                        {

                            //var a=document.getElementById('editor1').value="";
                            // alert(a);

                            // alert('i am here');
                            // CKEDITOR.instances.editor1.setData(req.responseText);
                                document.getElementById('refformat').innerHTML=req.responseText;

                CKEDITOR.replace( 'editor1',
                    {

                        fontSize_sizes : "8px;9px;10px;12px;14px;16px;18px;20px;22px;24px;26px;28px;30px;32px;34px",
                        toolbar :
                        [
                            ['Bold', 'Italic','Underline'],
                            ['Source', '-', 'Undo','Redo'],
                            ['Format','Font','FontSize'],
                            ['TextColor','BGColor'],
                            ['NumberedList','BulletedList','-','Blockquote'],
                            ['Link', 'Unlink','SpecialChar'],
                        ],
                        // Strip CKEditor smileys to those commonly used in BBCode.
                        smiley_images :
                        [
                            'regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','tounge_smile.gif',
                            'embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angel_smile.gif','shades_smile.gif',
                            'cry_smile.gif','kiss.gif'
                        ],
                        smiley_descriptions :
                        [
                            'smiley', 'sad', 'wink', 'laugh', 'cheeky', 'blush', 'surprise',
                            'indecision', 'angel', 'cool', 'crying', 'kiss'
                        ]
                } );

                CKEDITOR.replace( 'editor2', 
                    {

                        fontSize_sizes : "8px;9px;10px;12px;14px;16px;18px;20px;22px;24px;26px;28px;30px;32px;34px",
                        toolbar :
                        [
                            ['Bold', 'Italic','Underline'],
                            ['Source', '-', 'Undo','Redo'],
                            ['Format','Font','FontSize'],
                            ['TextColor','BGColor'],
                            ['NumberedList','BulletedList','-','Blockquote'],
                            ['Link', 'Unlink','SpecialChar'],
                        ],
                        // Strip CKEditor smileys to those commonly used in BBCode.
                        smiley_images :
                        [
                            'regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','tounge_smile.gif',
                            'embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angel_smile.gif','shades_smile.gif',
                            'cry_smile.gif','kiss.gif'
                        ],
                        smiley_descriptions :
                        [
                            'smiley', 'sad', 'wink', 'laugh', 'cheeky', 'blush', 'surprise',
                            'indecision', 'angel', 'cool', 'crying', 'kiss'
                        ]
                } );

                    CKEDITOR.replace( 'editor4', 
                    {

                        fontSize_sizes : "8px;9px;10px;12px;14px;16px;18px;20px;22px;24px;26px;28px;30px;32px;34px",
                        toolbar :
                        [
                            ['Bold', 'Italic','Underline'],
                            ['Source', '-', 'Undo','Redo'],
                            ['Format','Font','FontSize'],
                            ['TextColor','BGColor'],
                            ['NumberedList','BulletedList','-','Blockquote'],
                            ['Link', 'Unlink','SpecialChar'],
                        ],
                        // Strip CKEditor smileys to those commonly used in BBCode.
                        smiley_images :
                        [
                            'regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','tounge_smile.gif',
                            'embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angel_smile.gif','shades_smile.gif',
                            'cry_smile.gif','kiss.gif'
                        ],
                        smiley_descriptions :
                        [
                            'smiley', 'sad', 'wink', 'laugh', 'cheeky', 'blush', 'surprise',
                            'indecision', 'angel', 'cool', 'crying', 'kiss'
                        ]
                } );

                CKEDITOR.replace( 'editor3', 
                    {

                        fontSize_sizes : "8px;9px;10px;12px;14px;16px;18px;20px;22px;24px;26px;28px;30px;32px;34px",
                        toolbar :
                        [
                            ['Bold', 'Italic','Underline'],
                            ['Source', '-', 'Undo','Redo'],
                            ['Format','Font','FontSize'],
                            ['TextColor','BGColor'],
                            ['NumberedList','BulletedList','-','Blockquote'],
                            ['Link', 'Unlink','SpecialChar'],
                        ],
                        // Strip CKEditor smileys to those commonly used in BBCode.
                        smiley_images :
                        [
                            'regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','tounge_smile.gif',
                            'embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angel_smile.gif','shades_smile.gif',
                            'cry_smile.gif','kiss.gif'
                        ],
                        smiley_descriptions :
                        [
                            'smiley', 'sad', 'wink', 'laugh', 'cheeky', 'blush', 'surprise',
                            'indecision', 'angel', 'cool', 'crying', 'kiss'
                        ]
                } );

                //]]>

                        } else {
                            alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                        }
                    }
                }       
                req.open("GET", strURL, true);
                req.send(null);
            }
        }

 </script> 
```

使用这个，我想显示3个ckeditor，但是ckeditor只适用于第一个textarea，剩下的2个文本区ckeditor不起作用，我该如何解决这个问题

外部页面的 HTML 是

```
f(strtolower(str_replace(' ','',$reffername))=='injuryqedltd' && $format=='ia_format' )
                        {
                            ?>
                            <table>
                            <tr>
                            <td>

                                <strong>Findings on Initial Examination</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor2" id="editor2" class="required textarea" title="Enter the Message"><?php echo $result[0]['Initialexam'];?></textarea>

                            </td>
                        </tr>

                         <tr>
                            <td>

                                <strong>Details of Treatment to be Provided</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor3" id="editor3" class="required textarea" title="Enter the Message"><?php echo $result[0]['Detailtreatment'];?></textarea>

                            </td>
                        </tr>
                        <tr>
                            <td>

                                <strong>Benefit of Treatment to be Provided</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor4" id="editor4" class="required textarea" title="Enter the Message"><?php echo $result[0]['BeTreatment'];?></textarea>

                            </td>
                        </tr>
                        </table>

                <?php       }
                 else if(strtolower(str_replace(' ','',$reffername))=='injuryqedltd' && $format=='fa_format' ) {

                     ?>
                            <table>
                            <tr>
                            <td>

                                <strong>Details of Treatment Provided</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor5" id="editor5" class="required textarea" title="Enter the Message"><?php echo $result[0]['Initialexam'];?></textarea>

                            </td>
                        </tr>

                         <tr>
                            <td>

                                <strong>Benefit of Treatment Provided</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor6" id="editor6" class="required textarea" title="Enter the Message"><?php echo $result[0]['Detailtreatment'];?></textarea>

                            </td>
                        </tr>
                        <tr>
                            <td>

                                <strong>Discharge Summary</strong>
                            </td>
                            <td>
                            <textarea  cols="80" rows="10" name="editor7" id="editor7" class="required textarea" title="Enter the Message"><?php echo $result[0]['BeTreatment'];?></textarea>

                            </td>
                        </tr>
                        </table>

                <?php

                }
                else 
                    {
                        $sel="SELECT $format as rff FROM `tbl_referreg` WHERE `ref_id`='".$id."'";
        $reffer=$objAdmin->ExecuteQuery($sel,'select');

?>
          <table><tr>
           <td><strong>Assessment Format:</strong></td>
            <td><textarea cols="80" style="margin-left:32px;"  rows="30" name="editor1" id="editor1" class=" textarea" title="Enter the Message"><?php echo $reffer[0]['rff']; ?></textarea></td></tr></table>

                 <?php }
                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:57:26.187

我试图复制查看 HTML 和 JS 并看到您正在替换 editor1、editor2、editor3 和 editor4，但您也有用于编辑器 5-7 的文本区域。那些是你失踪的吗？如果是这样，只需`.replace(...)`在需要的地方添加。

我首先建议您稍微清理一下代码，以便您和其他人更容易看到发生了什么。这是我用来测试的示例：

```
<textarea cols="80" rows="10" name="editor2" id="editor2" class="required textarea" title="Enter the Message">A</textarea>
<textarea cols="80" rows="10" name="editor3" id="editor3" class="required textarea" title="Enter the Message">B</textarea>
<textarea cols="80" rows="10" name="editor4" id="editor4" class="required textarea" title="Enter the Message">C</textarea>
<textarea cols="80" rows="10" name="editor5" id="editor5" class="required textarea" title="Enter the Message">D</textarea>
<textarea cols="80" rows="10" name="editor6" id="editor6" class="required textarea" title="Enter the Message">E</textarea>
<textarea cols="80" rows="10" name="editor7" id="editor7" class="required textarea" title="Enter the Message">F</textarea>
<textarea cols="80" style="margin-left:32px;" rows="30" name="editor1" id="editor1" class=" textarea" title="Enter the Message">G</textarea>

<script type="text/javascript" src="http://cdn.jsdelivr.net/ckeditor/4.0/ckeditor.js"></script>
<script>
    function refer()
    {
        var config = {                  
            fontSize_sizes : "8px;9px;10px;12px;14px;16px;18px;20px;22px;24px;26px;28px;30px;32px;34px",
            toolbar :
            [
            ['Bold', 'Italic','Underline'],
            ['Source', '-', 'Undo','Redo'],
            ['Format','Font','FontSize'],
            ['TextColor','BGColor'],
            ['NumberedList','BulletedList','-','Blockquote'],
            ['Link', 'Unlink','SpecialChar'],
            ],
            // Strip CKEditor smileys to those commonly used in BBCode.
            smiley_images :
            [
            'regular_smile.gif','sad_smile.gif','wink_smile.gif','teeth_smile.gif','tounge_smile.gif',
            'embaressed_smile.gif','omg_smile.gif','whatchutalkingabout_smile.gif','angel_smile.gif','shades_smile.gif',
            'cry_smile.gif','kiss.gif'
            ],
            smiley_descriptions :
            [
            'smiley', 'sad', 'wink', 'laugh', 'cheeky', 'blush', 'surprise',
            'indecision', 'angel', 'cool', 'crying', 'kiss'
            ]
        };

        CKEDITOR.replace( 'editor1', config);
        CKEDITOR.replace( 'editor2', config);
        CKEDITOR.replace( 'editor4', config);
        CKEDITOR.replace( 'editor3', config);
        // Those got replaced nicely
    }
</script> 
```

# ruby-on-rails - 发送 csv/xls 文件时的 ActionController::Session::CookieStore::CookieOverflow - rails 2.3.5

> ID：14139274
> 
> 赞同：4
> 
> 时间：2013-01-03T12:47:47.307
> 
> 标签：ruby-on-rails

我有一个页面，上面有一个大图表，当你使用它时，url 中有很多参数。

所以我的控制器看起来像这样：

```
def report
   # gather data for report

   respond_to do |format|
      format.html
      format.xls { send_xls_file(@campaigns.uniq) }
      format.csv { send_csv_file(@campaigns.uniq)}
   end

  def send_xls_file(campaigns)
    @campaigns = campaigns
    report_name = "CampaignReport.xls"
    response.headers["Content-Disposition"] = "attachment; filename=#{report_name}"
  end

  # send csv does is similar but creates a csv using fastercsv. 
```

在 xls 的视图中，我创建了 excel 文档

现在，当我在页面上有一个很长的 url 并调用 xls 或 csv 时，我收到此错误：

```
Completed in 3189ms (View: 894, DB: 108) | 200 OK [https://myapp.com/campaign_metrics/report?mycampia%5B%5D=White+Paper+1&mycampia%5B%5D=Talk+Turkey+-+T&mycampia%5B%5D=Nicole+Book+-+T&mycampia%5B%5D=Make+the+Case+-+T&mycampia%5B%5D=Make+the+Case+-+L&mycampia%5B%5D=Make+the+Case+-+F&mycampia%5B%5D=Learn+Sewings+-+T&mycampia%5B%5D=Learn+Sewings+-+L&mycampia%5B%5D=Learn+Sewings+-+F&mycampia%5B%5D=Keys+-+T&mycampia%5B%5D=Keys+-+L&mycampia%5B%5D=Keys+-+F&mycampia%5B%5D=How+to+Tie+-+F&mycampia%5B%5D=Cartoon&mycampia%5B%5D=Best+Practice+SM+-+FB&mycampia%5B%5D=5+Reasons+Flat+-+T&mycampia%5B%5D=5+Reasons+Flat+-+L&top_mycampia%5B%5D=678&top_mycampia%5B%5D=681&top_mycampia%5B%5D=682&top_mycampia%5B%5D=683&top_mycampia%5B%5D=685&top_mycampia%5B%5D=686&top_mycampia%5B%5D=687&top_mycampia%5B%5D=688&top_mycampia%5B%5D=689&top_mycampia%5B%5D=690&top_mycampia%5B%5D=691&top_mycampia%5B%5D=692&top_mycampia%5B%5D=693&top_mycampia%5B%5D=694&top_mycampia%5B%5D=695&top_mycampia%5B%5D=696&top_mycampia%5B%5D=697&top_mycampia%5B%5D=698&top_mycampia%5B%5D=699&top_mycampia%5B%5D=700&top_mycampia%5B%5D=701&top_mycampia%5B%5D=702&top_mycampia%5B%5D=703&top_mycampia%5B%5D=704&top_mycampia%5B%5D=705&top_mycampia%5B%5D=706&top_mycampia%5B%5D=707&top_mycampia%5B%5D=709&top_mycampia%5B%5D=710&top_mycampia%5B%5D=722&top_mycampia%5B%5D=723&top_mycampia%5B%5D=724&top_mycampia%5B%5D=725&top_mycampia%5B%5D=726&top_mycampia%5B%5D=728&top_mycampia%5B%5D=729&top_mycampia%5B%5D=730&top_mycampia%5B%5D=731&top_mycampia%5B%5D=732&top_mycampia%5B%5D=733&top_mycampia%5B%5D=734&top_mycampia%5B%5D=735&top_mycampia%5B%5D=736&top_mycampia%5B%5D=737&top_mycampia%5B%5D=738&top_mycampia%5B%5D=739&top_mycampia%5B%5D=740&date_select_range=7%2F1%2F2012+-+12%2F31%2F2012&submit_action=Submit&graph_option=monthly&mycampia%5B%5D=White+Paper+1&mycampia%5B%5D=Talk+Turkey+-+T&mycampia%5B%5D=Nicole+Book+-+T&mycampia%5B%5D=Make+the+Case+-+T&mycampia%5B%5D=Make+the+Case+-+L&mycampia%5B%5D=Make+the+Case+-+F&mycampia%5B%5D=Learn+Sewings+-+T&mycampia%5B%5D=Learn+Sewings+-+L&mycampia%5B%5D=Learn+Sewings+-+F&mycampia%5B%5D=Keys+-+T&mycampia%5B%5D=Keys+-+L&mycampia%5B%5D=Keys+-+F&mycampia%5B%5D=How+to+Tie+-+F&mycampia%5B%5D=Cartoon&mycampia%5B%5D=Best+Practice+SM+-+FB&mycampia%5B%5D=5+Reasons+Flat+-+T&mycampia%5B%5D=5+Reasons+Flat+-+L&date_select_range=7%2F1%2F2012+-+12%2F31%2F2012&format=xls&graph_option=monthly&graphtype=Actual&report_type=export&sort=campaign&submit_action=Submit&top_mycampia%5B%5D=678&top_mycampia%5B%5D=681&top_mycampia%5B%5D=682&top_mycampia%5B%5D=683&top_mycampia%5B%5D=685&top_mycampia%5B%5D=686&top_mycampia%5B%5D=687&top_mycampia%5B%5D=688&top_mycampia%5B%5D=689&top_mycampia%5B%5D=690&top_mycampia%5B%5D=691&top_mycampia%5B%5D=692&top_mycampia%5B%5D=693&top_mycampia%5B%5D=694&top_mycampia%5B%5D=695&top_mycampia%5B%5D=696&top_mycampia%5B%5D=697&top_mycampia%5B%5D=698&top_mycampia%5B%5D=699&top_mycampia%5B%5D=700&top_mycampia%5B%5D=701&top_mycampia%5B%5D=702&top_mycampia%5B%5D=703&top_mycampia%5B%5D=704&top_mycampia%5B%5D=705&top_mycampia%5B%5D=706&top_mycampia%5B%5D=707&top_mycampia%5B%5D=709&top_mycampia%5B%5D=710&top_mycampia%5B%5D=722&top_mycampia%5B%5D=723&top_mycampia%5B%5D=724&top_mycampia%5B%5D=725&top_mycampia%5B%5D=726&top_mycampia%5B%5D=728&top_mycampia%5B%5D=729&top_mycampia%5B%5D=730&top_mycampia%5B%5D=731&top_mycampia%5B%5D=732&top_mycampia%5B%5D=733&top_mycampia%5B%5D=734&top_mycampia%5B%5D=735&top_mycampia%5B%5D=736&top_mycampia%5B%5D=737&top_mycampia%5B%5D=738&top_mycampia%5B%5D=739&top_mycampia%5B%5D=740&visits=on]
/!\ FAILSAFE /!\  Thu Jan 03 12:33:51 +0000 2013
Status: 500 Internal Server Error
ActionController::Session::CookieStore::CookieOverflow
/usr/lib64/ruby/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:102:in `call'
/usr/lib64/ruby/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/usr/lib64/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/usr/lib64/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/usr/lib64/ruby/gems/1.8/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/usr/lib64/ruby/gems/1.8/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:106:in `call'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:180:in `start'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server:99 
```

我不是故意在我的会话中存储任何东西，似乎 rails 可能将 url 放入会话中并且它太大了？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:15:16.640

您可以考虑将会话存储移动到 ActiveRecord 而不是 cookie。如果您对当前`.xls`处理的实现感到满意，那将是一个简单的修复。问题在于 cookie 存储空间有限：4 kb。

如果您决定迁移到 ActiveRecord 会话存储，请执行以下步骤：

*   在您的`app/config/initializers/session_store.rb`文件中将商店更改为`:active_record_store`

*   那么你应该`rails generate session_migration`和`rake db:migrate`

您可能会想到另一种会话存储：Memcache。它速度更快，在某些情况下使用起来更舒适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:33:58.797

看起来有些东西正在会话中存储长 url - 可能清除？- 这导致了你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T13:00:23.540

错误消息清楚地表明 cookie 存储大小溢出的问题。

您的会话（默认在 cookie 中）需要移动到活动记录存储或内存缓存存储以解决此问题。

对于数据库会话：

```
config.action_controller.session_store = :active_record_store 
```

您需要创建会话表，如下所示

```
rake db:sessions:create
rake db:migrate 
```

或者

对于 Memcache 会话：

```
config.action_controller.session_store = :mem_cache_store 
```

您还需要设置一个内存缓存服务器并将其配置如下

```
config.cache_store = :mem_cache_store, 'localhost', '127.0.0.1:11211',
{:namespace => 'myapp123'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:28:30.967

您收到此错误是因为您的会话已超过 4kb 的限制。

尝试这个

在您的数据库中创建表会话。

```
rake db:sessions:create
rake db:migrate 
```

在 config/initializers/session_store.rb 注释行

```
Application.config.session_store :cookie_store 
```

并添加

```
Application.config.session_store :active_record_store 
```

# android - Android 应用程序在最小化时自动重置

> ID：14139282
> 
> 赞同：1
> 
> 时间：2013-01-03T12:48:29.950
> 
> 标签：android, android-4.0-ice-cream-sandwich

我们设计了一个有点重（9 MB）的混合应用程序。问题是有时，最小化这个应用程序（主页按钮）会使应用程序在后台重置，即它的应用程序缓存丢失并且应用程序从启动屏幕重新加载。最小化后，我们使用平板电脑（Galaxy 800）中的其他应用程序。

只有当我们尝试从启动器中的图标启动应用程序时，我们才会看到这个问题。当我们尝试从最小化列表（最近的应用程序按钮）启动它时，这个问题没有发生。

此问题并非特定于选项卡。它也发生在 Galaxy 3 和 Droid Razr 中。

有什么指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:17:26.073

> 问题是有时，最小化这个应用程序（主页按钮）会使应用程序在后台重置，即它的应用程序缓存丢失并且应用程序从启动屏幕重新加载。

这是完全正常的。

计算机、手机和平板电脑没有无限的 RAM。Android 解决此问题的方法是在用户离开后将您的进程保留一段时间，但最终 Android 会终止您的进程以释放 RAM 以供其他应用程序及其进程使用。[您可以在文档](http://developer.android.com/guide/components/processes-and-threads.html)中阅读有关 Android 进程模型的更多信息。

# java - 使用 cookie 进行 GWT 单元测试

> ID：14139290
> 
> 赞同：0
> 
> 时间：2013-01-03T12:48:53.320
> 
> 标签：java, unit-testing, gwt, cookies

我想用 cookie 对 GWT 项目进行单元测试。我目前正在对代码的身份验证部分进行单元测试。所以我需要能够将 sessionID 存储为 cookie 并在以后检索它。我目前正在使用带有 SyncProxy 的普通 TestCase（不是 GWTTestCase）来测试异步行为。

问题是 SyncProxy 和 Unit Test 都不能像浏览器一样运行并支持 cookie 的管理。有什么想法可以测试吗？

为了完整起见，在尝试测试时，我收到此错误：

```
java.lang.UnsatisfiedLinkError: com.google.gwt.user.client.Cookies.uriEncode(Ljava/lang/String;)Ljava/lang/String;
    at com.google.gwt.user.client.Cookies.uriEncode(Native Method)
    at com.google.gwt.user.client.Cookies.setCookie(Cookies.java:177)
    at com.google.gwt.user.client.Cookies.setCookie(Cookies.java:158)
    at com.projects.client.Authentication.setSesssionCookie(Authentication.java:64)
    at com.projects.client.Authentication$signInCredentialsHandler.onSuccess(Authentication.java:96)
    at com.projects.client.Authentication$signInCredentialsHandler.onSuccess(Authentication.java:1)
    at com.gdevelop.gwt.syncrpc.RemoteServiceInvocationHandler$1.run(RemoteServiceInvocationHandler.java:175) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:17:19.773

Cookie 单元测试方法

1) Cookie 的 GWT 单元测试[http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/CookieTest.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/test/com/google/gwt/user/client/CookieTest.java)

2）目前还不清楚为什么需要测试已经过单元测试的 GWT 代码。如果您的场景是集成测试，那么基于 Selenium 的浏览器测试用例是最好的选择。

3) 使用模拟库或测试实用程序，例如[http://code.google.com/p/gwt-test-utils/](http://code.google.com/p/gwt-test-utils/)

我不会推荐第三种方法。如果您的单元测试变得复杂，那么您的代码就是复杂的或者场景是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:20:32.660

正如 SSR 所说，cookies 已经测试过了，为什么还需要再次测试呢？？我相信您需要一个**cookie 字符串**，以便您可以对您的方法进行单元测试。如果是这种情况，请尝试**模拟该方法并返回您想要的任何字符串，**或者您可以**忽略方法调用**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T09:01:37.453

我也在做同样的事情，这段代码在我的环境中工作。您可以从 cookie 中获取 sessionid。

```
CookieManager cookiemanager = LoginUtils.loginFormBasedJ2EE("hostname", "username", "password");

                    SyncProxy.setBaseURL("baseURI");

                    StandardDispatchService rpcService =  SyncProxy.createProxy(StandardDispatchService.class,
                            new ProxySettings().setCookieManager(cookiemanager));

                    System.out.println(cookiemanager.getCookieStore().getCookies().get(0));
                    String JSESSIONID = cookiemanager.getCookieStore().getCookies().get(0).getValue();

                    rpcService.execute(new XXXAction(XXX,XX)); 
```

# solr - 带有 Amazon Web Services 的 Nutch 2.1（HBase、SOLR）

> ID：14139296
> 
> 赞同：1
> 
> 时间：2013-01-03T12:49:23.117
> 
> 标签：solr, amazon, nutch

我在本地体验了 Nutch 2.1 没有任何困难。我还尝试了 3 台机器分布式集群。我们现在正在讨论是否使用 Amazon Web Services 运行它。我对 AWS 没有太多经验。我的问题是，尝试 Nutch2.1 在云上爬行和索引部件是否有可能和必要。我们会有哪些可能的优势和劣势？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:18:14.423

如果您有一个与 AWS 集群（您计划投资）具有相同容量的集群，那么除了下面的 #1 之外没有任何优势。

在切换到 AWS 之前，您应该考虑以下几个因素：

1.  **抓取主机的位置**：如果您位于欧洲，并且您要抓取的网站托管在很远的地方……比如说澳大利亚。如果您购买位于澳大利亚的 AWS 节点，那么爬取该数据会比从欧洲爬取要快得多。

2.  **成本**：对于使用 AWS 机器，您需要按小时付费。你能负担得起吗？如果不是更好地使用你自己的机器

3.  **当前集群容量**：您当前的集群是否有足够的容量和空间来处理爬取的数据量？我认为在计算速度方面不会有问题，因为 Nutch 在 Hadoop 上运行，Hadoop 旨在在商品硬件上运行。您的集群能否容纳爬虫获取的全部数据。

4.  **数据量**：对正在抓取的数据的粗略估计是多少？如果它更少，那么拥有 AWS 集群就没有意义了。

5.  **时间限制**：是否有完成爬网的时间限制？

如果您是为专业项目执行此操作，则必须考虑这些因素。

如果您这样做是为了娱乐/爱好/学习，请继续使用 AWS 的免费层级节点。这些是亚马逊免费提供的低容量节点。学习新事物很有趣:)

**AWS 的优势：**

1.  无需购买机器来设置集群。除了终端 PC 外，无需任何硬件即可开始使用。
2.  地方性
3.  无需照看机器。如果一个节点严重崩溃，请留下它（这不是你的问题：P）。购买一个新的，将其添加到集群中，然后继续。

**AWS的缺点：**

1.  昂贵。
2.  Copying data to any machine outside AWS cluster is charged.
3.  Your data is NOT persisted when u give up the procured AWS nodes. If u want to persist it, pay them and use the S3 storage service.

# java - 线程未更新 GlassPane 上的进度条

> ID：14139298
> 
> 赞同：0
> 
> 时间：2013-01-03T12:49:25.253
> 
> 标签：java, swing, graphics, graphics2d

在以下应用程序中，我放置了一个按钮，单击它会使 GlassPane 可见，并启动一个更新进度条值的线程。下面是代码：-

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.LinearGradientPaint;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class GlassPaneDownload extends JFrame implements Runnable{
Thread t;
CustomGlassPane jp;

public static void main(String args[])
{
SwingUtilities.invokeLater(new Runnable(){public void run(){new GlassPaneDownload();}});
}

public GlassPaneDownload(){
super("Glass Pane Download Simulation");
setSize(400,400);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setLayout(new FlowLayout());    

jp=new CustomGlassPane();

jp.setOpaque(false);
setGlassPane(jp);

JButton btn=new JButton("Click Here");
btn.addActionListener(new ActionListener(){public void actionPerformed(ActionEvent e){
    //Make Glass Pane visible
    jp.setVisible(true);
    //Start Thread to update Progress Bar
    t=new Thread();
    t.start();
}});
add(btn);
setVisible(true);
}
public void run(){
for(int i=1;i<=100;i++)
{
    jp.setProgress(i);
    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
t=null;
}
}

class CustomGlassPane extends JComponent
{

    private final float pattern[]=new float[]{0.0f,0.499f,0.50f,1.0f};
    private final Color color[]=new Color[]{Color.WHITE,Color.GRAY,Color.BLACK,Color.LIGHT_GRAY};
    private int progress,oldProgress;

    public void paintComponent(Graphics g1)
    {
        super.paintComponent(g1);
        g1.setColor(new Color(1.0f,1.0f,1.0f,0.7f));
        g1.fillRect(0, 0, getWidth(), getHeight());
        g1.setColor(new Color(200,200,255));
        g1.drawRect(100,100,200,20);

        LinearGradientPaint p=new LinearGradientPaint(100,100,200,20,pattern,color);
        Graphics2D g2=(Graphics2D)g1;
        g2.setPaint(p);
        g2.fillRect(100, 100,progress*2, 20);
    }
    public void setProgress(int prog)
    {
        progress=prog;
        repaint(100,100,200,20);
        //repaint();
    }

} 
```

但是，虽然 GlassPane 变得可见但 ProgressBar 没有更新。需要帮助的朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:58:19.667

这是一个典型的错误：您正在使用一个循环阻塞 EDT（事件调度线程）`Thread.sleep()`。EDT 调度所有 GUI 事件：绘画事件、鼠标事件、按键事件、动作事件等...由于您在 EDT 中循环和休眠（在 ActionEvent 期间），它会阻止显示刷新（我敢打赌您的 GUI 在单击按钮后变得无响应）。所以

*   规则 #1：不要阻塞 EDT
*   规则 #2：不要阻塞 EDT，这会直接导致
*   规则 #3：不要`sleep()`在 EDT 中，并且
*   规则 #4：不要在 EDT 中执行任何冗长的操作

要解决此问题，请使用`SwingWorker`或`javax.swing.Timer`。这也可以与传统`Thread`的 's 和`Executors`(thread-pools) 一起使用，但您必须确保所有修改 GUI 的尝试都在 EDT 中执行。

你可能想看看[这个例子](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemoProject/src/components/ProgressBarDemo.java)，它展示了如何结合 JProgressBar 和 SwingWorker

# android - 如何在 ViewPager 中编写按钮单击事件

> ID：14139300
> 
> 赞同：1
> 
> 时间：2013-01-03T12:49:27.277
> 
> 标签：android

这里我的 activity_main.xml 出现在 /res/layout

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <!--
    This title strip will display the currently visible page title, as well as the page
    titles for adjacent pages.

    -->

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

这是我的 MainActivity.java 文件

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;

import android.view.ViewGroup;

public class MainActivity extends FragmentActivity {

    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 2;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return "POS 0"; // getString(R.string.title_section1).toUpperCase();
            case 1:
                return "POS 1";// getString(R.string.title_section2).toUpperCase();
            case 2:
                return "POS 2";// getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view;
            String i = Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER));

            if (i.toString() == Integer.toString(1)) {
                view = inflater.inflate(R.layout.section2, container, false);
            } else {
                view = inflater.inflate(R.layout.section1, container, false);

                // Button button = (Button) view.findViewById(R.id.button1);
                // button.setOnClickListener(new OnClickListener() {
                // if i uncomment this code, button click works but i want it to handle in section1.java file
                // @Override
                // public void onClick(View v) {
                // Activity activity = getActivity();
                //
                // if (activity != null) {
                // Toast.makeText(activity, "sdfsdfsdfds",
                // Toast.LENGTH_LONG).show();
                // }
                // }
                //
                // });

            }

            return view;

        }
    }

} 
```

我有一个名为“Section1”的活动，当我向右滑动时会显示该活动。它上面有一个按钮。如何处理 section1.java 文件中的按钮单击事件？

这是我的 section.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Section1" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="sendMessage"
        android:text="Button" />

</RelativeLayout> 
```

这是 Section1.Java 文件。即使没有触发，也可以单击此处的按钮。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class Section1 extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.section1);

    }

    public void sendMessage(View view) {
        Toast t = Toast.makeText(getApplicationContext(), "sdfsdfsdf",
                Toast.LENGTH_LONG);
        t.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:23:33.057

我和你有同样的问题，今天终于解决了，所以我想我会和你分享

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);   
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
            case 2:
                // The first section of the app is the most interesting -- it offers
                // a launchpad into the other demonstrations in this example application.
                return new LessonFragment();

            default:
                // The other sections of the app are dummy placeholders.
                Fragment fragment = new DummySectionFragment();
                Bundle args = new Bundle();
                args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
                fragment.setArguments(args);
                return fragment;
        }
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();     
            case 1: return getString(R.string.title_section2).toUpperCase();    
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section4).toUpperCase();    
        }
        return null;
    }   
}

/**
 * A fragment that launches other parts of the demo application.
 */
public static class LessonFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.lesson, container, false);

        // Demonstration of a collection-browsing activity.
        rootView.findViewById(R.id.button1)
                .setOnClickListener(new View.OnClickListener() {
                    public void onClick(View view) {
                        Intent intent = new Intent(getActivity(), Test.class);
                        startActivity(intent);
                    }
                });

        return rootView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T18:27:10.030

```
 @Override
    public Fragment getItem(int position) {
     switch(position){
        case 0 : 
        case 1 : 
                  // and so on.
       }
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    } 
```

# java - 如何将传递的 c++ 长指针转换为 java 指针或数组

> ID：14139301
> 
> 赞同：0
> 
> 时间：2013-01-03T12:49:31.997
> 
> 标签：java, swing, pointers, wrapper

我有一个从 c++ 传递到 java 的长指针，它引用图像数据，现在我想从 java 中的这个[指针](http://jna.java.net/javadoc/com/sun/jna/Pointer.html#share%28long%29)中检索数组，我该怎么做我所拥有的是 java 中的 long ptr

我试过这段代码，但我不知道如何让 ptr 引用 _pointer

```
long _pointer=Image.GetCptr();
com.sun.jna.Pointer ptr = new com.sun.jna.Memory(2 * 512 * 512);
short testarr[] = new short [512 * 512];
ptr.read(_pointer, testarr, 0, testarr.length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:40:49.790

根据[jna.java.net 文档](http://jna.java.net/javadoc/com/sun/jna/Pointer.html#read%28long,%20byte%5b%5d,%20int,%20int%29)读取函数有以下参数：

```
public void read(long offset,
             byte[] buf,
             int index,
             int length)

Indirect the native pointer, copying from memory pointed to by native pointer, into the specified array.

Parameters:
    offset - byte offset from pointer into which data is copied
    buf - byte array into which data is copied
    index - array index from which to start copying
    length - number of elements from native pointer that must be copied 
```

1.  如您所见，第一个参数是`byte offset from the pointer data is copied`. 在你的情况下0。
2.  第二个参数是`byte array the data is copied`。在您的情况下，指向实际图像数据的指针或_pointer。
3.  第三个参数`array index in destination`将再次为 0。
4.  第四个参数要复制的字节数似乎是 2*512*512。

希望这对您有所帮助。

# java - java.sql.SQLException：语句已关闭

> ID：14139306
> 
> 赞同：0
> 
> 时间：2013-01-03T12:49:55.513
> 
> 标签：java, sql, spring-mvc, ejb

我正在使用`sql server 2008 R2`. 我正在使用一个`Ejb stateless`. 在那里，我声明了我的数据库类的实例变量，并在 create 方法或实例变量上进行了实例化。

当我调用执行抛出异常的 executeQuery 方法时：

> java.sql.SQLException：语句已关闭。

但如果我在 Ejb 业务方法中定义我的数据库类对象的局部变量，它工作正常。

我不明白为什么会这样。

# php - 未存储php中的会话变量

> ID：14139308
> 
> 赞同：0
> 
> 时间：2013-01-03T12:50:10.960
> 
> 标签：php, session

所以我有这个要求用户和密码的表格：

```
 <?php
    $emmagatzemarSessions="/u/alum/u1920477/public_html/tmp";
    ini_set('session.save_path',$emmagatzemarSessions);
    session_start();
    include 'vars.php'; 
?>
<html>
<h1>Identificacio</h1>
<h3>Introdueix el teu usuari i contrasenya per entrar a oracle</h3>
<hr>
<form action="menu.php" method="post">

    Usuari: 
    <input  type="text" 
            name="user" />
    Contrasenya: 
    <input 
            type="password" 
            name="pass" />

<input type="submit"/>
</form>
<hr>
<?php   

    $_SESSION["user"] = $_POST["user"];
    $_SESSION["pass"] = $_POST["pass"];
?>
</html> 
```

但是，在下一个文件“menu.php”中，它说我无法访问数据库。我插入的用户名和密码是正确的。这是我正在使用的连接代码：

```
 #!/usr/bin/php-cgi
<?php
    $emmagatzemarSessions="/u/alum/u1920477/public_html/tmp";
    ini_set('session.save_path',$emmagatzemarSessions);
    session_start();
    include 'vars.php'; 

    $conn = oci_connect($_SESSION["user"], $_SESSION["pass"], 'oracleps');

    echo("username is: " . $_SESSION["user"]);
    if (!$conn) { 
    echo "<p>No hem pogut connectar amb la BD.</p>";

?>
<html>
        <br><br><br>
        <div id="tornar">
            <li><a href="index.php">Tornar a l'inici</a></li>
        </div>
<?php 
    die;
    }
?>
<head>
<title>Menú empresa</title>
</head>
<body>
<div id="menu">
  <h1>Menú</h1>
</div>
<div id="alta">
  <ul>
    <li><a href="alta.html">Donar d'alta un client</a></li>

    <li><a href="consulta.php">Consultar vehicles disponibles</a></li>

    <li><a href="llogar.html">Llogar un vehicle</a></li>

    <li><a href="retorn.html">Retornar un vehicle llogat</a></li>

    <li><a href="revisio.php">Veure revisions</a></li>
  </ul>
</div>
        <br><br><br>
        <div id="tornar">
            <li><a href="index.php">Tornar a l'inici</a></li>
        </div>
</body>
</html> 
```

我一直在寻找类似的问题，问过我做同样事情的同事，但我不知道为什么这不起作用！如果我能得到你们的帮助，那就太棒了！非常感谢。

使用两个文件的完整代码进行编辑。忽略前 4 行。我希望你们能帮助我，因为我不知道我做错了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:57:13.333

这行代码应该在您要跟踪会话的每个 php 页面的顶部：

```
session_start(); 
```

您还应该始终检查变量是否真的从表单发送，如下所示：

```
if(isset($_SESSION['username']))
{
   // do something
} 
```

如果您确定连接数据库的逻辑没有问题，您应该记录您从表单收到的数据，以检查它是否正确：

```
error_log("username is: " . $_POST["username"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:10:52.123

在只能由用户访问的每个页面上启动会话，如果未设置则重定向用户

```
session_start(); //start session

if (!isset($_SESSION['user'])) {    
redirect_user();    
}

function redirect_user() { //redirect user to home page
    $url = BASE_URL . 'index.php'; // Define the URL.
    ob_end_clean(); // Delete the buffer.
    header("Location: $url");
    exit(); #quit
} 
```

# android - 从不同的活动访问 SharedPreferences

> ID：14139310
> 
> 赞同：0
> 
> 时间：2013-01-03T12:50:14.233
> 
> 标签：android

在第一个（MainActivity）中，我通过 SharedPreferences 保存数据：

```
Editor editor = mGameSettings.edit(); 
                editor.putString(GAME_PREFERENCES_SHOP, Shops.get(lv.getCheckedItemPosition())); 
                editor.commit(); 
```

我可以在重新启动应用程序后从 MainActivity 读取这些数据：

```
if (mGameSettings.contains(GAME_PREFERENCES_SHOP)) 

                Tv2.setText(mGameSettings.getString(GAME_PREFERENCES_SHOP, "")); 
```

但是如何从其他活动中读取和编辑此 SharedPreferences 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:55:27.003

在您的另一个活动中编写以下代码：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
if (sp.contains(MainActivity.GAME_PREFERENCES_SHOP)) //hoping that GAME_PREFERENCES_SHOP is a static constant defined in MainActivity
                Tv2.setText(sp.getString(MainActivity.GAME_PREFERENCES_SHOP, "")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:42:07.570

您可以使用以下代码从不同的应用程序获取首选项值

```
 Context launcherContext = null;
    try {
        final int flags = Context.CONTEXT_IGNORE_SECURITY | Context.CONTEXT_INCLUDE_CODE;
        launcherContext = getApplicationContext().createPackageContext("com.another.package", flags);
    } catch (final NameNotFoundException e) {
        return ;
    }

    final SharedPreferences pref = launcherContext.getSharedPreferences(
            "prefname",
            Context.MODE_WORLD_READABLE | Context.MODE_MULTI_PROCESS);

    final String prefValue = pref.getString("prefname", null);
    Log.i("test", prefValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:00:37.257

您可以使用`same code`. 您只需使用相同的 Prefs 文件名和`key`所需的值。您可以在主活动中声明您的首选项文件名`public static final String PREFS_NAME = "MyPrefsFile";`，然后从应用程序中的任何位置访问它。

例如，在其他活动中：

```
 SharedPreferences mGameSettings = getSharedPreferences(MainActivity.PREFS_NAME, MODE_PRIVATE);
    if (mGameSettings.contains(MainActivity.GAME_PREFERENCES_SHOP)) 
        Tv2.setText(mGameSettings.getString(MainActivity.GAME_PREFERENCES_SHOP, "")); 
```

# java - 如何使用 JFileChooser 读取用户选择的图像文件

> ID：14139313
> 
> 赞同：-3
> 
> 时间：2013-01-03T12:50:36.080
> 
> 标签：java, swing, bufferedimage, jfilechooser

我想读取用户使用 JFileChooser 选择的图像，然后能够获取颜色通道（R，G，B）以及图像的宽度和高度。

这是读取所选图像文件的正确方法吗？

```
File im1 = new File(chooser.getSelectedFile(), null);       
BufferedImage buff =ImageIO.read(im1); 
```

或者是否有更好的方法来读取图像文件以获取其单独颜色通道的值并获取其单独值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:59:26.090

你的代码看起来不错。继续使用宽度、高度和 RGB。

```
File im1 = chooser.getSelectedFile();    
BufferedImage buff = ImageIO.read(im1);

if (buff != null) {
    System.out.println(buff.getWidth() + " " + buff.getHeight());
    System.out.println(buff.getRGB(0, 0));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:57:22.313

我还没有找到任何“更好”的加载图像的方法，所以我相信你做得对。

为了回答您的整个问题，这里有一个如何从图像中获取特定颜色通道的示例。

```
Color c = new Color(image.getRGB());
int red = c.getRed();
int green = c.getGreen();
int blue = c.getBlue(); 
```

# sql-server - SQL Server 2012 智能感知

> ID：14139315
> 
> 赞同：12
> 
> 时间：2013-01-03T12:50:50.163
> 
> 标签：sql-server, intellisense

为什么有时我必须等待智能感知反应，它永远不会发生，有时智能感知工作又好又快？

与服务器的连接不良或某些配置问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:55:05.013

它缓存智能感知信息（这就是您有时需要手动刷新的原因）。当需要刷新/检索时，需要很短的时间；之后它只使用立即可用的缓存信息。

因此，如果您认为智能感知不起作用（例如，没有弹出窗口，或者缺少或过时的信息），只需刷新它：`CTRL`+ `SHIFT`+ `R`（编辑 -> 智能感知 -> 刷新本地缓存）。

记住只有 2008 年以后才支持 Intellisense 也很重要。如果您使用新的 SSMS 连接到 2008 年之前的数据库，您仍然不会获得 Intellisense。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T07:06:46.263

I got this solution in a thread on MSDN site while finding the solution for same issue.

I removed the extension in Visual Studio 2010, and uninstalled SQL Server Data Tools (SSDT) 2010, restarted, and intellisense works fine now.

I'm not sure if that helps since I don't know if you have SSDT installed, but I thought I'd share anyway.

Cheers,

Abhishek

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T14:12:24.520

是的，微软似乎又打破了它。它对我也不起作用。我尝试了从[这里开始](http://www.mssqltips.com/sqlservertip/2591/troubleshooting-intellisense-in-sql-server-management-studio-2012/)的所有步骤，但没有运气。

该文档也有[反馈站点](http://connect.microsoft.com/SQLServer/feedback/details/717063/ssms-intellisense-does-not-function-for-a-contained-user)的链接，但似乎微软甚至没有费心修复这个错误。

抱歉帮不上什么忙...

# c# - 如何显示打开/保存对话框 asp net mvc 4

> ID：14139316
> 
> 赞同：6
> 
> 时间：2013-01-03T12:50:51.820
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, asp.net-mvc-4

我可以请求一个文件并返回它。我不知道如何显示打开/保存对话框。

**看法：**

```
function saveDocument() {
    $.ajax({
        url: '/Operacao/saveDocument',
        type: 'POST',
        DataType: "html",
        success: function (data) {
            //I get the file content here
        }
    });
} 
```

**控制器：**

```
public void saveDocument() {
    Response.ContentType = "image/jpeg";
    Response.AppendHeader("Content-Disposition", "attachment; filename=SailBig.jpg");
    Response.TransmitFile(Server.MapPath("~/MyPDFs/Pdf1.pdf"));    
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:55:49.103

我认为您不能在浏览器中异步下载文件，只需将用户重定向到操作，浏览器就会打开一个保存对话框窗口。在 asp.net mvc 中，您可以使用操作方法来下载文件，从而导致`FileResult`使用基本控制器的`File`方法。

```
public ActionResult SaveDocument()
{   
    string filePath = Server.MapPath("~/MyPDFs/Pdf1.pdf");
    string contentType = "application/pdf";

    //Parameters to file are
    //1\. The File Path on the File Server
    //2\. The content type MIME type
    //3\. The parameter for the file save by the browser

    return File(filePath, contentType, "Report.pdf");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T08:37:36.533

强制 firefox（不适用于 chrome）打开保存对话框的一种方法是将内容类型设置为“application/octet-stream”，并为其提供具有正确扩展名的文件名。

```
public ActionResult SaveDocument()
{   
    string filePath = Server.MapPath("~/MyPDFs/Pdf1.pdf");
    string contentType = "application/octet-stream";  //<---- This is the magic

    //Parameters to file are
    //1\. The File Path on the File Server
    //2\. The content type MIME type
    //3\. The parameter for the file save by the browser

    return File(filePath, contentType, "Report.pdf");
} 
```

# jquery - Jquery .load() 落后一步

> ID：14139327
> 
> 赞同：1
> 
> 时间：2013-01-03T12:51:32.710
> 
> 标签：jquery, spring

我在这样生成的网页上有一个部分。

```
<table>
    <c:forEach items="${personList}" var="person">
        <tr>
            <td>
            </td>
            <td>
                <h2 style="text-align:left;">${person.reviewName}</h2>              
                <h2 style="text-align:right;">by ${person.name}</h2>
            </td>
        </tr>
        <tr>
            <td style="text-align:right;">
                <img src="<c:url value="/resources/${person.id}.jpg" />" >
            </td>
            <td>
                ${person.review}
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
                <div id="${person.id}" class="comment">comments</div>
            </td>
        </tr>
        <tr id="ins${person.id}">
            <td>

            </td>
            <td id="comments${person.id}" style="display:none">
            <div id="ins${person.id}">
                <table>
                        <c:forEach items="${person.comments}" var="comment">
                            <tr>
                                <td>
                                    ${comment} 
                                </td>
                            </tr>
                        </c:forEach>
                </table>
                Add Comment:
                <textarea id="comment${person.id}"></textarea>
                <button onClick="addComment(${person.id})">add Comment</button>
            </div>
            </td>
        </tr>
    </c:forEach>
</table> 
```

当像这样添加新评论时，我正在尝试使用 JQuery.load() 立即更新评论部分。

```
function addComment(id) {
    $.getJSON("addComment", {id:id, comment:$("#comment" + id).val()});
    $("#comments2").load("home #ins2");
} 
```

问题是当我单击添加评论时，它只显示我之前添加的评论，这意味着评论部分总是后面的评论。如果我在添加评论后直接加载页面，它会按原样显示。另一个奇怪的事情是，当我添加评论时，会在评论的顶部插入一个空白行，当我直接加载页面时它不存在/消失。

我认为这可能是某种缓存问题，因此尝试使用将其关闭

```
$.ajaxSetup ({
    cache: false
}); 
```

然而这并没有什么不同。

我真的在这个死胡同。这与我使用 load() 作为 forEach 标签的部分有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:55:32.580

您需要在方法的`success`回调中加载您的评论`getJSON`以等待`getJSON`调用结束，然后再重新加载您的`div`.

```
function addComment(id) {
    $.getJSON("addComment", {id:id, comment:$("#comment" + id).val()}, function(){
        $("#comments2").load("home #ins2");
    });
} 
```

# javascript - 多个 gmap 标记并排而不是在顶部（相同位置时）

> ID：14139332
> 
> 赞同：0
> 
> 时间：2013-01-03T12:51:53.443
> 
> 标签：javascript, jquery, google-maps

我使用 jgmap3（jquery）在谷歌地图上放置了一些标记（自己的图标）。基本上这可以正常工作，但是当一个邮政编码有多个标记时，我会遇到问题。由于顶部的标记 2，第一个标记不可见。有没有办法将它们并排放置？

# php - 我需要使用什么：TDD 中的聚合或组合？

> ID：14139336
> 
> 赞同：1
> 
> 时间：2013-01-03T12:52:10.433
> 
> 标签：php, mocking, tdd, phpunit

我正在使用 TDD。我需要在我的系统中使用原始 SQL 查询。TDD 建议我只需要测试业务逻辑（数据库、邮件发送或文件系统的所有测试都是集成测试）。所以，我将我的 SQL 代码放在一个我想模拟的单独的类中。这是一个代码：

```
// Creating shipping method data provider mock
$shippingMethodDataProviderMock = $this->getMockBuilder('\ordersmanager\Model\Order\ShippingMethod\ShippingMethodDataProvider')->disableOriginalConstructor()->getMock();

// Getting shipping method instance
$emsShippingMethod = ShippingMethodFactory::getShippingMethod('ems', $shippingMethodDataProviderMock); 
```

但我不想将`ShippingMethodProvider`实例传递给`ShippingMethodFactory`客户端代码。

我可以使用组合而不是聚合：`ShippingMethodProvider`在 a 中创建 a`ShippingMethodFactory`并将其传递给`ShippingMethod`构造函数。但在那种情况下，我无法模拟`ShippingMethodProvider`，因为它与客户端代码隔离。

`ShippingMethodFactory`我可以为它创建一个不会经过单元测试的包装器，但会创建一个像这样令人愉快的 API：

```
$emsShippingMethod = ShippingMethodFactory::getShippingMethod('ems'); 
```

但是这个包装器不会被测试。

有什么更好的方法来测试这个并拥有一个好的 API？

# ios - mac osx、ios和xcode的版本兼容性运行最新的ios项目示例

> ID：14139339
> 
> 赞同：-2
> 
> 时间：2013-01-03T12:52:14.970
> 
> 标签：ios, xcode, macos

我一直在尝试运行 IOS 项目的示例。但似乎 xcode 或 ios 不兼容，并且会产生大量错误。我想知道，如何让它运行。我想确定一下，我需要为 mac osx、xcode 和 ios 下载什么来运行所有最新的代码/项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:00:30.480

Xcode 的当前版本（在撰写本文时）是 4.5.2。

自 3.2.6 版以来发生了巨大的变化，您将无法在旧版本中使用新的 SDK 或更新的功能。此外，GitHub 等上的许多项目可能与 Xcode 3.x 不兼容（因为它们使用较新的项目格式或您的版本中不可用的功能）。

简而言之：您应该同时更新 OS X 和 Xcode。

# c# - 实体框架如何只更新模型中的特定字段？

> ID：14139344
> 
> 赞同：2
> 
> 时间：2013-01-03T12:52:33.210
> 
> 标签：c#, entity-framework, refactoring, entity-framework-4.1

我发布了这个问题，但是有一个大笑，我覆盖了我的实际问题，只是发布了代码，然后它被投票关闭。我认为这个问题非常令人担忧并且没有得到公平的震动，所以我再次发布它。

我正在使用实体框架 4.1。我有一个表格，上面有很多字段。表格本身实际上比表格上的字段更多。我正在尝试找到一种方法来仅更新已更改的字段。我在这里找到了一个例子：

[EntityFramework 更新部分模型](https://stackoverflow.com/questions/9820540/entityframework-update-partial-model)

我已将其修改为下面的代码，这样我就不必手动指定 40 多个字段。我希望有一种比下面更清洁的方法来做到这一点。有没有？

警告下面的代码是初稿，相当粗糙。欢迎所有建议。谢谢！

```
 [HttpPost]
    public ActionResult Edit(Location location, FormCollection fields)
    {
        if (ModelState.IsValid)
        {
            //db is my context
            db.Locations.Attach(location);

            StringBuilder sb = new StringBuilder();

            //Get properties of Location object
            PropertyInfo[] pi = typeof(Location).GetProperties();

            //loop over keys of fields submitted by the post
            foreach (string submittedField in fields.Keys)
            {
                //If a property name on the Location object matches a field name
                //of one of the submitted properties then mark the property as 
                //modified
                if (pi.Any(prop => prop.Name.Equals(submittedField)) && 
                    !"ID".Equals(submittedField) )
                {
                    db.Entry(location).Property(submittedField).IsModified = true;
                    sb.AppendLine(submittedField + "Value: " + db.Entry(location).Property(submittedField).CurrentValue );
                }
            }

            LogUtil.WriteCondensed(sb.ToString());

            //Save changes to the database
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(location);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:18:20.430

我不会依赖传递给您的`Edit`操作的内容来了解​​哪些内容可以更新，哪些内容出于安全原因不能更新（请记住，客户端可以更改发布到服务器的内容）。

```
public class YourEntity
{
    public long ID { get; set; }

    // Updatable fields
    public string Field1 { get; set; }
    ....
} 
```

在视图中，为要更新的对象的 ID 使用隐藏字段（剃刀语法）：

```
@model YourEntity
...
@Html.HiddenFor(model => model.ID)
...
@Html.EditorFor(model => model.Field1) 
```

我会：

1.  检查用户是否有权更新实体
2.  使用其 ID 从数据库中检索实际实体
3.  按属性手动更新属性
4.  保存到数据库

控制器：

```
[HttpPost]
public ActionResult Edit(YourEntity model)
{
    try
    {
        yourServiceLayer.Update(User.Identity.Name, model);
    }
    catch (CustomSecurityException)
    {
        ...
    }
} 
```

服务：

```
public class YourServiceLayer
{
    public YourEntity Update(string userName, YourEntity entity)
    {
        // Check user has rights to edit the entity (if necessary)
        if (this.CanUpdate(userName, entity.ID))
        {
            // Gets actual entity from DB
            var yourDbEntity = this.GetByID(entity.ID);

            // Updates each property manually
            yourDbEntity.Field1 = entity.Field1;
            ....

            // Saves to DB
            this.Save(yourDbEntity);
            return yourDbEntity;
        }
        else
        {
            // Security exception
            throw new CustomSecurityException(...);
        }   
    }

    public bool CanUpdate(string userName, long entityID)
    {
        // Insert logic here
        return ....;
    }

    ...
} 
```

如果您有 40 多个字段，那么写起来很无聊，但至少您可以完全控制可以更新的属性和不能更新的属性。

# debian - 在 Debian Squeeze 上调用 javac 时出错

> ID：14139346
> 
> 赞同：1
> 
> 时间：2013-01-03T12:52:42.940
> 
> 标签：debian, java, javac

我们有一个使用 Jetty 服务器的第三方 Java 应用程序，但看起来 JDK 丢失或无法访问它所在的位置？

在 /usr/bin 我看到：

java
javaws
jexec

没有 javac，所以可能没有安装 JDK。

盒子是 Debian “Squeeze”，带有以下内容：

java -version
java version "1.6.0_18" OpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze2) OpenJDK Client VM（build 14.0-b16，混合模式，共享）

这是什么合适的挤压包？
apt-cache search javac
**default-jdk - 标准 Java 或 Java 兼容开发工具包**
**openjdk-6-jdk - OpenJDK 开发工具包 (JDK)**
**sun-java6-jdk - Sun Java(TM) 开发工具包 (JDK) 6** 谢谢！

```
HTTP ERROR 500

Problem accessing /. Reason:

PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required

Caused by:

org.apache.jasper.JasperException: PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required
at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:92)
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:378)
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:119)
at org.apache.jasper.compiler.Jsr199JavaCompiler.compile(Jsr199JavaCompiler.java:208)
at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:384)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:625)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:542)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:271)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:98)
at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:557)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:499)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
at org.eclipse.jetty.server.Server.handle(Server.java:350)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:620)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
at java.lang.Thread.run(Thread.java:636) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:16:54.647

Java通常分为两种：

*   JDK - 包含`javac`编译器的 Java 开发工具包。
*   JRE - Java 运行时环境。

如果你有`/usr/bin/java`，但没有`/usr/bin/javac`安装运行时环境，而不是开发环境。

我建议你以 root 身份运行这样的东西：

```
apt-get install sun-java6-jdk 
```

那应该为您安装编译器。

# javascript - 通过单击内容菜单按钮动态上下移动 div

> ID：14139347
> 
> 赞同：3
> 
> 时间：2013-01-03T12:52:44.320
> 
> 标签：javascript, jquery, html

我的上下文菜单中有一个上移和下移按钮，用于多个 div 放置。单击下移后，我想将我的 div 下移，但我无法这样做。

下面是我目前正在使用的代码。

```
$(".propertyClass").live('click', function(event) {
    tempId = this.parentElement.parentElement.attributes[0].nodeValue;
    $.contextMenu({

        selector : '.propertyClass',
        trigger : 'left',
        callback : function(key, options) {
            var m = "clicked: " + key;
            if (!(key == ""))
                // alert(key);
                optionObject[key](event);
            //window.console && console.log(m) || alert(m);
        },
        items : {
            "moveUp" : {
                name : "Move Up",
                icon : "MoveUp"
            },
            "moveDown" : {
                name : "Move Down",
                icon : "MoveDown"
            },
            "Duplicate" : {
                name : "Duplicate",
                icon : "duplicate"
            },

            "Delete" : {
                name : "Delete",
                icon : "delete"
            },

            "sep1" : "---------",
            "showProperties" : {
                name : "Properties",
                icon : "properties"
            }
        }
    });
});

var optionObject = {

    "moveUp" : function() {
        alert("1");
    },
    "moveDown" : function(event) {
        for ( l = 0; l < workspace.length; l++) {
            //console.log(event.pageX);
            // event.pageX="220px";
            // event.pageY="60px";
        }
    },
    "Duplicate" : function(event) {
        var temp = tempId.split("_");
        switch(temp[0]) {
            case "head":
                createHead(workspace);

                break;
            case "txtBox":
                createTextbox(workspace);
                break;
            case "mob":
                createMobno(workspace);
                break;
            case "txtArea":
                createTextArea(workspace);
                break;
            case "fname":
                createfullName(workspace);
                break;

        }
    },
    "showProperties" : function() {
        $("#propertyDialog").dialog({
            height : 300,
            color : "grey",
            width : 600,
            title : "Properties",
            close : function(event, ui) {
                $("#propertyDialog").html("");
            }
        });

        $("#propertyDialog").html("<div id='propDialogDiv1'>General Settings : <table border='1px solid' cellspacing='0' cellpadding='4'><tr><td><div id='propDialogDiv2'>Text</div></td><td><div id='propDialogDiv3'> <input id='propDialogDiv2' type='text'  onClick='this.contentEditable=true;' value='hii'></div></td></tr><td></td><tr></tr><tr><td id='propDialogDiv2'>Field Details</td></tr><tr><td id='propDialogDiv2'>ID:</td><td>" + tempId + "</td></table></div>");

    },
    "Delete" : function(event) {
        for (var k = 0; k < workspace.length; k++) {
            if (tempId == workspace[k].main.id) {
                $(workspace[k].main).remove();
                workspace.splice(k, 1);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:56:18.323

如果我理解正确，当单击向下箭头时，您希望将上下文菜单中的 div 向下移动（并将其替换为下方的 div）。

为此，只需让您的点击事件使用 insertBefore 并让菜单中的所有 div 成为父菜单 div 的子级。

例如：[https](https://mod.it/ItyD_VPb) ://mod.it/ItyD_VPb（必须在 chrome 中查看，但代码是跨浏览器，查看 main.js 文件）。

上面的示例将在单击时将 2 个 div 中的任何一个放在顶部的底部。

# c# - C#如何在windows xp/7中禁用屏幕键盘声音

> ID：14139349
> 
> 赞同：5
> 
> 时间：2013-01-03T12:52:47.590
> 
> 标签：c#, on-screen-keyboard

我有一个 C# 应用程序在我使用屏幕键盘的 windows xp/7 上运行。

![在此处输入图像描述](../Images/739c7fafcf2d3c4b012148716fb350a9.png)

启用声音时会有延迟，这会导致问题。我想禁用声音。

![在此处输入图像描述](../Images/c24758987a315506eae746970283d1f3.png)

如何通过我的 C# 应用程序代码禁用声音。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:10:06.427

您可以从注册表中禁用它

```
[HKEY_CURRENT_USER\Software\Microsoft\Osk] 
"ClickSound"=dword:00000001 // Related Registry Key 
```

您可以使用此代码更改它

```
RegistryKey key = Registry.CurrentUser; //key gets the value = "HKEY_CURRENT_USER"
RegistryKey oskKey = key.CreateSubKey(@"Software\Microsoft\Osk");// This line opens the "HKEY_CURRENT_USER\Software\Microsoft\Osk" 
oskKey.SetValue("ClickSound", 0); // Set the value of ClickSound to 0(disable) which is 1(enabled) by default. 
```

我还没有测试过，但你可能需要在此之后重新启动 osk.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:42:43.293

您所要做的就是单击任务栏中的音量图标，单击混音器并调整“屏幕键盘”的滑块或单击扬声器将其静音。它必须正在运行才能显示在混音器窗口中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T19:39:28.913

您所要做的就是单击任务栏中的音量图标，单击混音器并调整“屏幕键盘”的滑块或单击扬声器将其静音。它必须正在运行才能显示在混音器窗口中。

兄弟，它也会影响我们不想要的其他媒体声音，

## 您可以从注册表中禁用它

[HKEY_CURRENT_USER\Software\Microsoft\Osk] "ClickSound"=dword:00000001 // 相关注册表项 您可以使用此代码更改它

RegistryKey 键 = Registry.CurrentUser; //key 获取值 = "HKEY_CURRENT_USER" RegistryKey oskKey = key.CreateSubKey(@"Software\Microsoft\Osk");// 这行打开了 "HKEY_CURRENT_USER\Software\Microsoft\Osk" oskKey.SetValue("ClickSound", 0); // 将 ClickSound 的值设置为 0（禁用），默认为 1（启用）。我还没有测试过，但你可能需要在此之后重新启动 osk.exe。

这对我很有用，非常感谢兄弟

# javascript - 导航到另一个页面（也使用相同的 js 文件）时，Javascript 全局变量不会持续存在

> ID：14139351
> 
> 赞同：2
> 
> 时间：2013-01-03T12:52:56.660
> 
> 标签：javascript

我在 angus.js 中共享了这样的 js 代码

```
var g_colour;

function getcolour() {
  return g_colour;
}

function setcolour(colour) {
  g_colour = colour;
} 
```

html页面1和2可以这样访问：

1.html：

```
<html>
<head>
<title>Global javascript example</title>
</head>
<body>
<a href="2.html">Page2</a>
<script src="angus.js"></script>
<form name="frm">
<input type="button" value="Setblue" onclick="setcolour('blue');" />
<input type="button" value="Setyellow" onclick="setcolour('yellow');" />
<input type="button" value="getcolour" onclick="alert(getcolour());" />
</form>
</body>
</html> 
```

2.html：

```
<html>
<head>
<title>Global javascript example page 2</title>
</head>
<body>
<a href="1.html">Page1</a>
<script src="angus.js"></script>
<form name="frm">
<input type="button" value="Setblue" onclick="setcolour('blue');" />
<input type="button" value="Setyellow" onclick="setcolour('yellow');" />
<input type="button" value="getcolour" onclick="alert(getcolour());" />
</form>
</body>
</html> 
```

如果我在一页中设置一种颜色并导航到第 2 页，然后访问该颜色，它将返回未定义。即，我似乎在加载新的 html 页面时创建了一个新的 g_colour 实例。

我希望能够访问一种可以在第 1 页中设置并在第 2 页中访问的顶级变量。如何在 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T12:56:06.200

JS 变量从来没有持久化过，但是有两种方法可以解决这个问题：

1.  饼干
2.  贮存

除了最古老的浏览器之外，所有浏览器都支持 Cookie，但它们可能非常笨拙且难以使用。最重要的是，您的浏览器会在每次页面加载时向服务器发送 cookie，因此如果它仅由 JavaScript 使用，那么它的效率非常低。

相反，您可能应该查看存储选项。

保存项目就像`localStorage.itemname = value;`阅读一样简单`localStorage.itemname`，删除就像文字一样简单`delete localStorage.itemname`

这些值会跨页面加载保存，但不会发送到服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T12:55:43.923

使用本地存储：

```
localStorage.setItem('name', 'value');
var something = localStorage.getItem('name'); 
```

`setItem`在您的第一页上，然后`getItem`在您的第二页上。

与“普通” JavaScript 变量相反，localStorage 在页面加载中持续存在。

“正常”变量在 JS 文件加载（并运行）后立即初始化，但在文件卸载时被销毁，因此当用户离开页面时。

您也可以使用 Cookie，但在 JS 中使用它们有点麻烦，因为它们存储在如下字符串中：

```
'name=value; name1=value1; name2=value2'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T12:56:39.750

每个页面请求都会请求脚本并执行它的副本，即使请求由于缓存而在客户端停止，当前页面仍然从头开始执行它。他们使用相同的代码，是的，但实例不同（即，您在两个不同的上下文中拥有该变量的两个副本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:01:54.723

问题是您的页面 1 正在加载 JavaScript 文件，而您的页面 2 正在再次加载它，因此当页面 2 加载时，您在该 JS 文件的变量中设置的任何内容都将丢失，因为页面 2 将再次初始化 JS 文件。如果您愿意，您可以使用 cookie 来存储值，或者如果您将第 1 页和第 2 页组合起来很简单，但将它们放在不同的 div 中并根据您的逻辑显示/隐藏 div。

# eclipse - 如何在编辑器中添加像按钮这样的 GUI 组件？

> ID：14139353
> 
> 赞同：0
> 
> 时间：2013-01-03T12:53:08.367
> 
> 标签：eclipse, user-interface, eclipse-plugin, swt, eclipse-rcp

我是 RCP 的初学者，今天刚刚开始构建 RCP 应用程序。我想要一个 GUI 组件，如编辑器中的按钮、组合框、复选框。我已经设法在扩展中添加一个编辑器并为它创建一个类。我有编写代码以在 creatPartControl 中创建标签，但它不起作用..我得到一个黑色窗口。我应该像这样添加编辑器吗

```
layout.addStandaloneView(Editor.id, true, IPageLayout.TOP,0.7f,
                layout.getEditorArea());
layout.addStandaloneView(View.ID, true, IPageLayout.BOTTOM,0.4f,
                layout.getEditorArea()); 
```

请帮我解决这个问题。如果可能，请举例说明如何添加编辑器并在其中创建标签和按钮。提前感谢您的帮助，代码在我的 Editor.java 内容中`createPartControl()`

```
parent.setLayout(new GridLayout());
Button b=new Button(parent,SWT.TOGGLE);

b.setText("Hello ");
Label label1 = new Label(parent, SWT.NONE);
label1.setText("First Name");

package com.hello;

import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Label;
import org.eclipse.ui.IEditorInput;
import org.eclipse.ui.IEditorSite;
import org.eclipse.ui.PartInitException;
import org.eclipse.ui.part.EditorPart;

public class Editor extends EditorPart {
    public static final String ID = "TestApplication.editor3";

    public Editor() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void doSave(IProgressMonitor monitor) {
        // TODO Auto-generated method stub

    }

    @Override
    public void doSaveAs() {
        // TODO Auto-generated method stub

    }

    @Override
    public void init(IEditorSite site, IEditorInput input)
            throws PartInitException {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean isDirty() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isSaveAsAllowed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void createPartControl(Composite parent) {
        Label label = new Label(parent, SWT.NONE);
        label.setText("sssssss");
    }

    @Override
    public void setFocus() {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:08:37.210

自从我从事 Eclipse 编辑器工作以来已经有好几年了。这是编辑器的屏幕截图，因此您可以看到我所做的不仅仅是添加一个按钮。

![Cobol 编辑器](../Images/6e0b84ed85507bbd018fb45f1075b243.png)

*   我扩展了 Viewer 类来创建编辑器的 GUI。
*   我扩展了 EditorPart 类来创建编辑器的功能。

由于我正在构建的编辑器类型，我必须创建自己的 Canvas 版本和自己的 IDocument 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:29:06.157

您没有正确初始化编辑器，并且在打开编辑器时会导致问题。填写您的`init()`方法，如下所示，看看这是否有帮助：

```
@Override
public void init(IEditorSite site, IEditorInput input)
        throws PartInitException {
    setSite(site);
    setInput(input);
} 
```

# arrays - 未知维度数组的matlab最大值

> ID：14139354
> 
> 赞同：4
> 
> 时间：2013-01-03T12:53:10.803
> 
> 标签：arrays, matlab, matrix, max

我想计算一个 N×N...×N 数组的最大值，更重要的是它的坐标，而不指定它的尺寸。

例如，让我们采取：

```
A = [2 3];
B = [2 3; 3 4]; 
```

该函数（让我们调用它`MAXI`）应该为 matrix 返回以下值`A`：

```
[fmax, coor] = MAXI(A)

fmax =
   3

coor =
   2 
```

对于矩阵`B`：

```
[fmax, coor] = MAXI(B)

fmax =
    4

coor=
    2   2 
```

主要问题不是开发一个特别适用于一个类的代码，而是开发一个尽可能快地适用于任何输入（具有更高维度）的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T13:19:50.177

要找到绝对最大值，您必须先将输入矩阵转换为列向量并找到最大元素的线性索引，然后将其转换为坐标[`ind2sub`](http://www.mathworks.com/help/matlab/ref/ind2sub.html)。不过，这可能有点棘手，因为`ind2sub`需要指定已知数量的输出变量。为此，我们可以使用元胞数组和[逗号分隔列表](http://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html?s_tid=doc_12b)，如下所示：

```
[fmax, coor] = max(A(:));
if ismatrix(A)
    C = cell(1:ndims(A));
    [C{:}] = ind2sub(size(A), coor);
    coor = cell2mat(C);
end 
```

编辑：我添加了一个附加`if`语句，用于检查输入是矩阵还是向量，如果是后者，它会按原样返回线性索引本身。

在一个函数中，它看起来像这样：

```
function [fmax, coor] = maxi(x)
    [fmax, coor] = max(A(:));
    if ismatrix(A)
        C = cell(1:ndims(A));
        [C{:}] = ind2sub(size(A), coor);
        coor = cell2mat(C);
    end 
```

### 例子

```
A = [2 3; 3 4];
[fmax, coor] = maxi(A)

fmax =
    4

coor =
    2    2 
```

# animation - 在 Windows 8/Metro/Store 中为 RectangleGeometry（在 Image.Clip 中）设置动画

> ID：14139357
> 
> 赞同：3
> 
> 时间：2013-01-03T12:53:33.263
> 
> 标签：animation, windows-8, clipping

我正在尝试为使用`RectangleGeometry`.

但是，我找不到任何解决方案来做到这一点。我已经得出以下结论：

*   Windows Metro 不支持 RectAnimation（此问题的直接解决方案）
*   Windows Metro[不支持剪切](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/451888a6-c26a-4d32-bf02-65119dcfca0a)中的 PathGeometry（[所以我可以做一个解决方法](http://weblogs.asp.net/dwahlin/archive/2008/09/24/animating-clipping-paths-in-silverlight-2.aspx)）
*   Windows Metro 没有`RectAnimationUsingKeyFrames`（[微软提出的另一种解决方案](http://msdn.microsoft.com/en-us/library/ms752062.aspx)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:23:47.580

我最终在 中添加了一个 Transform 并为`RectangleGeometry`它设置了动画：

```
<!-- In the Clip Section -->
<RectangleGeometry 
    x:Name="RectangleGeometry"  
    Rect="0,0,727,400" >
    <RectangleGeometry.Transform>
         <TranslateTransform x:Name="ClipTransform"/>
    </RectangleGeometry.Transform>
</RectangleGeometry>

<!-- Animate the Clip Section -->
<Storyboard x:Name="Anim">
    <DoubleAnimation 
        Duration="0:0:1" 
        To="-100"
        Storyboard.TargetName="ClipTransform"          
        Storyboard.TargetProperty="Y"  />
</Storyboard> 
```

我不知道是否有更好的解决方案，但这个是我找到的。

# eclipse - 在 weblogic 服务器中使用 liferay 启用调试模式？并在 Eclipse 中使用这些服务进行调试？

> ID：14139359
> 
> 赞同：0
> 
> 时间：2013-01-03T12:53:38.267
> 
> 标签：eclipse, debugging, weblogic, liferay

我正在使用 Eclipse`Liferay portal`进行`weblogic server`调试时遇到问题。

我`Eclipse Juno`用`OEPE Pack extension, Oracle Weblogic Server 11gR1 (10.3.5) and Liferay 6.1`.

当我在没有调试选项的情况下启动时，我启动 weblogic 管理服务器 OK 和 liferay 服务器 OK。

但是当我用这行更改本地域文件 setDomainEnv.sh

```
set JAVA_DEBUG=-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=%DEBUG_PORT%,server=y,suspend=n -Djava.compiler=NONE
set JAVA_OPTIONS=%JAVA_OPTIONS% %enableHotswapFlag% -ea -da:com.bea... -da:javelin... -da:weblogic... -ea:com.bea.wli... -ea:com.bea.broker... -ea:com.bea.sbconsole.` 
```

Weblogic 服务启动正常

服务器日志

> 在地址监听传输 dt_socket：8453 java 版本“1.6.0_24”Java(TM) SE 运行时环境（构建 1.6.0_24-b07）Oracle JRockit(R)（构建 R28.1.3-11-141760-1.6.0_24-20110301 -1429-windows-ia32, 编译模式) 使用以下行启动 WLS：E:\Oracle\MIDDLE~1\JROCKI~1.2-4\bin\java -jrockit -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8453, server=y,suspend=n -Djava.compiler=NONE -Xms512m -Xmx512m -Dweblogic.Name=Admin -Djava.security.policy=E:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\weblogic.policy -Dweblogic.ProductionModeEnabled=true -ea -da:com.bea...-da:javelin...-da:weblogic...-ea:com.bea.wli...-ea:com.bea。经纪人... -ea:com.bea.sbconsole... -Dplatform.home=E:\Or acle\MIDDLE~1\WLSERV~1.3 -Dwls.home=E:\Oracle\MIDDLE~1\WLSERV~1.3 \server -Dweblogic.home=E:\Oracle\MIDDLE~1\WLSERV~1。3\server -Ddomain.home=E:\WLS\DO MINI~1\LOCAL_~1 -Does.client.home=E:\Oracle\MIDDLE~1\OES -Doracle.home=E:\Oracle\MIDDLE~ 1\OES -Doracle.security.jps.config=E:\WLS\DOMINI~1\LOCAL_~1\config\oeswlssmconfig\Admin\jps-config.xml -Dweblogic.management.discover=true -Dwlw.iterativeDev= false -Dwlw.testConsole=false -Dwlw.logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_oepe180\profiles \default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\ patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453\WLS\DO MINI~1\LOCAL_~1 -Does.client.home=E:\Oracle\MIDDLE~1\OES -Doracle.home=E:\Oracle\MIDDLE~1\OES -Doracle.security.jps。 config=E:\WLS\DOMINI~1\LOCAL_~1\config\oeswlssmconfig\Admin\jps-config.xml -Dweblogic.management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw。 logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_oepe180\profiles\def ault\sysext_manifest_classpath;E:\Oracle \MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server在地址监听传输 dt_socket：8453\WLS\DO MINI~1\LOCAL_~1 -Does.client.home=E:\Oracle\MIDDLE~1\OES -Doracle.home=E:\Oracle\MIDDLE~1\OES -Doracle.security.jps。 config=E:\WLS\DOMINI~1\LOCAL_~1\config\oeswlssmconfig\Admin\jps-config.xml -Dweblogic.management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw。 logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_oepe180\profiles\def ault\sysext_manifest_classpath;E:\Oracle \MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server在地址监听传输 dt_socket：8453\Oracle\MIDDLE~1\OES -Doracle.security.jps.config=E:\WLS\DOMINI~1\LOCAL_~1\config\oeswlssmconfig\Admin\jps-config.xml -Dweblogic.management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~ 1\patch_oepe180\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle \MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453\Oracle\MIDDLE~1\OES -Doracle.security.jps.config=E:\WLS\DOMINI~1\LOCAL_~1\config\oeswlssmconfig\Admin\jps-config.xml -Dweblogic.management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~ 1\patch_oepe180\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle \MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E: \Oracle\MIDDLE~1\patch_oepe180\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath ;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453management.discover=true -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConso le=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E: \Oracle\MIDDLE~1\patch_oepe180\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath ;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\ sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\d efault\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\ sysext_manifest_classpath weblogic.Server 在地址监听传输 dt_socket：8453

但是当我启动 liferay 服务器失败

Liferay 脚本

```
set DOMAIN_HOME=E:\WLS\Dominio_wls11\local_domain1
call "%DOMAIN_HOME%\bin\startManagedWebLogic.cmd" liferay %*) 
```

服务器日志

> 使用 Java 版本启动 weblogic：错误：传输错误 202：绑定失败：地址已在使用中错误：JDWP 传输 dt_socket 无法初始化，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有传输初始化 [../../ ../src/share/back/debugInit.c:690] 本机方法中的致命错误：JDWP 未初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [错误] 中止 JRockit 中止：未知错误 (50) 使用以下行启动 WLS：E :\Oracle\MIDDLE~1\JROCKI~1.2-4\bin\java -jrockit -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8453,server=y,suspend=n -Djava.compiler=NONE -Xms512m - Xmx512m -Dweblogic.Name=liferay -Djava.security.policy=E:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\weblogic.policy -Dweblogic.ProductionModeEnabled=true -Dweblogic.security.SSL.trustedCAKeyStore=" E：\Oracle\Middleware\wlserver_10.3\server\lib\cacerts" -ea -da:com.bea... -da:javelin... -da:weblogic... -ea:com.bea.wli.. . -ea:com.bea.broker... -ea:com.bea.sbconsole... -Dplatform.home=E:\Oracle\MIDDLE~1\WLSERV~1.3 -Dwls.home=E:\Oracle\ MIDDLE~1\WLSERV~1.3\server -Dweblogic.home=E:\Oracle\MIDDLE~1\WLSERV~1.3\server -Ddomain.home=E:\WLS\DOMINI~1\LOCAL_~1 -Does.client。主页=E:\Oracle\MIDDLE~1\OES -Doracle.home=E:\Oracle\MIDDLE~1\OES -Doracle.security.jps.config=E:\WLS\DOMINI~1\LOCAL_~1\config \oeswlssmconfig\liferay\jps-config.xml -Dweblogic.management.discover=false -Dweblogic.management.server=http://localhost:9819 -Dwlw.iterativeDev=false -Dwlw.testConsole=false -Dwlw.logErrorsToConsole=false -Dweblogic.ext.dirs=E:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_oepe180\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_ocp360\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_jdev1111\profiles\default\sysext_manifest_classpath;E :\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 错误：传输错误 202：绑定失败：地址已在使用中 错误：JDWP 传输 dt_socket 初始化失败，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197 ): 没有初始化传输 [../../../src/share/back/debugInit.c:690] 本机方法中的致命错误：JDWP 没有初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [错误] 中止 JRockit 中止: 未知错误 (50)\Oracle\MIDDLE~1\patch_jdev1111\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 错误：传输错误 202：绑定失败：地址已在使用中 错误：JDWP传输 dt_socket 初始化失败，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有初始化传输 [../../../src/share/back/debugInit.c:690] 本机方法中的致命错误：JDWP没有初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [ERROR] 中止 JRockit 中止：未知错误 (50)\Oracle\MIDDLE~1\patch_jdev1111\profiles\default\sysext_manifest_classpath;E:\Oracle\MIDDLE~1\patch_adfr1111\profiles\default\sysext_manifest_classpath weblogic.Server 错误：传输错误 202：绑定失败：地址已在使用中 错误：JDWP传输 dt_socket 初始化失败，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有初始化传输 [../../../src/share/back/debugInit.c:690] 本机方法中的致命错误：JDWP没有初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [ERROR] 中止 JRockit 中止：未知错误 (50)JDWP 传输 dt_socket 初始化失败，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有传输初始化 [../../../src/share/back/debugInit.c:690] 本机方法中的致命错误： JDWP 没有初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [ERROR] 中止 JRockit 中止：未知错误 (50)JDWP 传输 dt_socket 初始化失败，TRANSPORT_INIT(510) JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有传输初始化 [../../../src/share/back/debugInit.c:690] 本机方法中的致命错误： JDWP 没有初始化传输，jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) [ERROR] 中止 JRockit 中止：未知错误 (50)

为什么liferay服务器会失败？

我认为我需要在 eclipse 中配置服务器以在调试模式下连接到 weblogic。我怎么能这样做？我已经看到我在服务器列表中没有用于 weblogic 的 Liferay 6.1 服务器，只有 Liferay 6.1 服务器到 Tomcat 6 o 7。我尝试安装 Liferay IDE 插件，但由于与 OEPE Pack 的不同冲突而失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:26:55.927

您为两个 JVM 使用相同的调试端口 (8453)。“地址已在使用中”意味着 Java 无法在此端口上创建套接字，因为另一个套接字占用了它。

# ios - 如何切换 UITableView 和 UICollectionView

> ID：14139371
> 
> 赞同：11
> 
> 时间：2013-01-03T12:54:27.637
> 
> 标签：ios, uitableview, user-interface, uicollectionview

我有一个带有按钮的项目，允许用户在列表视图 ( `UITableView`) 和网格视图 ( `UICollectionView`) 之间切换，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T13:10:04.823

假设您的控制器有一个`UITableView`名为的属性`tableView`和一个`UICollectionView`名为 的属性`collectionView`。在您`viewDidLoad`需要添加起始视图。假设它是表格视图：

```
- (void)viewDidLoad
{
    self.tableView.frame = self.view.bounds;
    [self.view addSubview:self.tableView];
} 
```

然后在您的按钮回调中，交换视图：

```
- (void)buttonTapped:(id)sender
{
     UIView *fromView, *toView;

     if (self.tableView.superview == self.view)
     {
         fromView = self.tableView;
         toView = self.collectionView;
     }
     else
     {
         fromView = self.collectionView;
         toView = self.tableView;
     }

     [fromView removeFromSuperview];

     toView.frame = self.view.bounds;
     [self.view addSubview:toView];
} 
```

如果你想要一个花哨的动画，你可以使用`+[UIView transitionFromView:toView:duration:options:completion:]`：

```
- (void)buttonTapped:(id)sender
{
     UIView *fromView, *toView;

     if (self.tableView.superview == self.view)
     {
         fromView = self.tableView;
         toView = self.collectionView;
     }
     else
     {
         fromView = self.collectionView;
         toView = self.tableView;
     }

     toView.frame = self.view.bounds;
     [UIView transitionFromView:fromView
                         toView:toView
                       duration:0.25
                        options:UIViewAnimationTransitionFlipFromRight
                     completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-14T12:37:27.173

处理它的另一种方法是使用一个单一的方法，您可以在其中根据您想要的模式`UICollectionView`切换实现。`UICollectionViewFlowLayout`

为了从 转换`UITableView`为`UICollectionView`，网上有很多教程，例如[this](http://iosdevelopertips.com/user-interface/converting-uitableview-uicollectionview.html)。

# background - 在内容脚本中获取背景变量值

> ID：14139372
> 
> 赞同：3
> 
> 时间：2013-01-03T12:54:32.800
> 
> 标签：background, google-chrome-extension

我有一个`var`后台页面（例如`var x = 23`）。如何在我的内容脚本中获取此变量？我试过这个`content.js`：

```
chrome.extension.getBackgroundPage().x; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:05:38.300

使用消息发送您的数据，并在接收方收听。

[**留言**](http://developer.chrome.com/extensions/messaging.html)

> 由于内容脚本在网页上下文而不是扩展程序的上下文中运行，因此它们通常需要某种方式与扩展程序的其余部分进行通信。例如，RSS 阅读器扩展可能使用内容脚本来检测页面上是否存在 RSS 提要，然后通知背景页面以显示该页面的页面操作图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:08:24.350

您不能[`chrome.extension.getBackgroundPage()`](https://developer.chrome.com/extensions/extension.html#method-getBackgroundPage)在内容脚本中使用，它[不受支持](https://developer.chrome.com/extensions/extension.html#content)，作为消息通信的替代使用[epoch answer](https://stackoverflow.com/questions/14139372/het-background-var-in-content-js/14139546#14139546)。

## 参考：

*   [支持内容脚本](https://developer.chrome.com/extensions/extension.html#content)

# jquery - JavaScript 日期/生日输入字段跳转

> ID：14139375
> 
> 赞同：1
> 
> 时间：2013-01-03T12:54:38.000
> 
> 标签：jquery, input, tabs

我有 3 个内联输入文本字段来输入日期

```
<form>
  <input type="text" name="day" />
  <input type="text" name="month" />
  <input type="text" name="year" />
</form> 
```

有趣的字段是日和月。它们最多可包含 2 个数字。键入日期后，例如“05”，我希望光标跳转到月份字段，以便在所有 3 个输入中键入整个日期，而无需按 Tab 或单击下一个字段。一个限制是，如果用户在一段时间前已经输入了一个日期，那么表单域中会填充该日期，因此日期域可能已经包含“05”。如果我现在单击它，光标不应该已经跳跃，以便我可以进入新的一天。
必须已经存在一些（jquery）代码片段才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T12:59:39.123

试试这个 JS：

```
function moveToNext(field,nextFieldID){
  if(field.value.length >= field.maxLength){
    document.getElementById(nextFieldID).focus();
  }
} 
```

然后将其添加到您的字段中：

```
<input type="text" id="dd" maxlength=2 onkeyup="moveToNext(this,'mm')"/>
<input type="text" id="mm" maxlength=2 onkeyup="moveToNext(this,'yyyy')"/>
<input type="text" id="yyyy" maxlength=4 /> 
```

[例子](http://www.globalguideline.com/JavaScript_Guide/JavaScript_Examples.php?JScript=Jump_to_next_textbox_using_Form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:16:31.700

我使用了这个不错的插件，它完全符合 Merion 的要求：

[Autotab](http://www.mathachew.com/sandbox/jquery-autotab/) : jQuery 自动选项卡和过滤器。

# python - 跨平台部署，安装方便

> ID：14139377
> 
> 赞同：5
> 
> 时间：2013-01-03T12:54:47.767
> 
> 标签：python, batch-file, cross-platform, py2exe, scientific-computing

**编辑**

我考虑过但不太了解的一个选项是例如为 Windows 编写一个批处理脚本：

*   搜索 Python 安装，下载一个并安装（如果不存在）
*   然后安装捆绑包使用`distutils`来处理依赖项。

看起来这*可能*是一个相对优雅和简单的解决方案，但我不确定如何进行 - 有什么想法吗？

**原始问题**

**简单来说**

对于以下场景，您会推荐什么方法？

*   用于创建技术应用程序的 Linux 开发环境
*   现在也可以在 Windows 和 Mac 上部署
*   Python 中的现有代码库
*   `wine`不会安装 Windows 版本的 Python
*   没有可用于创建虚拟 windows/mac 机器的 windows 安装 CD
*   `java`由于现有的代码库，移植会产生大量开销
*   客户不是技术用户，即提供标准 Python 包还不够——确实需要可安装的自包含产品

**背景**

我正在 Linux 下编写技术和科学应用程序，但也需要其中一些可部署在 Windows/MacOs 机器上。

过去我经常使用 Python，但我发现对于不喜欢安装 Python 包的非技术用户来说，创建一个简单的可执行文件（通过使用 eg `py2exe`）很困难，因为我无法获得 Windows 版本的Python 安装使用`wine`.

虽然`java`这似乎是一个不错的选择，但如果可能的话，我想避免从 Python 移植我现有的代码，特别是因为 Python 还允许编写可移植代码。

我意识到我在这里试图涵盖很多基础，因此任何关于最合适的解决方案（即使不完美）的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:01:33.473

我有一个听起来与您尝试做的[项目有点相似的项目，并且自从我通常在 Linux 上开发并移植到 Windows 以来，我已经看到了一些相同的问题。](http://www.nditoolbox.com/)这是一个 Python + wxPython + NumPy + SciPy + matplotlib + 各种其他包，我发现最好的方法是使用[PyInstaller](http://www.pyinstaller.org/)。PyInstaller 在处理第三方 Python 包方面做得非常出色，并且非常轻松地创建了一个 EXE。

我认为，如果您使用的是 py2exe 或 PyInstaller，则或多或少必须在 Windows 上完成，因为 IIRC 有一些 Windows 库必须随之而来。也许您可以运行 Windows EC2 实例？根据您的应用程序的复杂程度，您也许可以使用[Portable Python](http://www.portablepython.com/)或[PyPy](http://pypy.org/download.html)来做一些事情。

我之前曾尝试为 Windows 机器下载 Python 和所需的软件包 - 它可以工作，但它总是有点脆弱。如果您能找到一个安装程序构建器，它可以让您指定依赖项（例如，[高级安装程序](http://www.advancedinstaller.com/)- 不是免费但运行良好），我会先尝试一下，因为它似乎更健壮一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:57:00.663

py2exe 工作得很好，我想你只需要设置一个 Windows 机器（或 VM）就可以用它构建包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:59:38.020

我建议在 windows 端使用 py2exe，然后在 mac 端使用 BuildApplet。这将允许您为不那么精明的用户制作一个简单的应用程序，您可以双击它。

# c# - 在 C# 中有什么清洁 URI 的方法？

> ID：14139385
> 
> 赞同：3
> 
> 时间：2013-01-03T12:55:44.710
> 
> 标签：c#, parsing, url, rtsp

程序中需要类似以下的 URI：

```
rtsp://127.0.0.1:554/live.sdp/
rtsp://127.0.0.1:554/live.sdp
rtsp://127.0.0.1:554
rtsp://127.0.0.1:554/
rtsp://127.0.0.1:554//live.sdp 
```

最后，我只想有一种干净的方式：

```
rtsp://127.0.0.1:554/live.sdp 
```

其中方案（rtsp://）、ip（127.0.0.1）、端口（554）和路径（live.sdp）分别提交。所以我必须确保路径不仅包含斜杠 (/)，不以斜杠 (/live.sdp) 开头，也不以斜杠 (live.sdp/) 结尾，并且 URL不以斜杠结尾 (rtsp://127.0.0.1:554/)，所以我可以在 URL 和路径之间添加一个斜杠，而不用担心会出错。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:19:33.127

使用[UriBuilder](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)类来解析和构造 URI。没有必要重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:27:10.697

试试这个使用`string split and format`;

```
string s1 = ip + ":" + port + "/" + path;
string[] arr = s1.Split(new string[] { "/" }, 
                        StringSplitOptions.RemoveEmptyEntries);

string url = scheme + string.Format("{0}/{1}", arr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:36:10.927

尝试这样的事情

```
var uri = new UriBuilder(String.Format("{0}://{1}:{2}/{3}",protocol,host,port,path)).Uri; 
```

# javascript - 使用 javascript 自动重定向

> ID：14139387
> 
> 赞同：0
> 
> 时间：2013-01-03T12:55:48.060
> 
> 标签：javascript, redirect

谁能看到我要去哪里错了？如果人们长时间不活动，我会尝试将他们重定向到登录页面。

```
<script>
 var time = new Date().getTime();
 $(document.body).bind("mousemove keypress", function(e) {
     time = new Date().getTime();
 });

 function refresh() {
     if(new Date().getTime() - time >= 4200000) 
        window.location.href = '/login.cfm'

     else 

         setTimeout(refresh, 10000);
 }

 setTimeout(refresh, 10000);
</script> 
```

似乎现在可以工作了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:58:22.943

尝试：

```
window.location.href 
```

# c# - 如何在 C# 中使用自定义属性来替换开关中的开关？

> ID：14139389
> 
> 赞同：5
> 
> 时间：2013-01-03T12:55:50.003
> 
> 标签：c#, switch-statement, custom-attributes

我有一个工厂方法，它根据三个枚举值返回正确的子类。一种方法是在开关中使用开关。显然，我不太喜欢这个选项。

我认为另一种选择是在 C# 中使用属性。每个子类都有一个具有这 3 个枚举值的属性，在工厂中，我只需要获取与我在工厂中拥有的枚举值对应的枚举值相同的类。

但是，我对属性很陌生，我没有在网上找到任何合适的解决方案。如果有人能给我一些提示或一些代码行，我真的很感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:11:12.357

首先，声明您的属性并将其添加到您的类中。

```
enum MyEnum
{
    Undefined,
    Set,
    Reset
}

class MyEnumAttribute : Attribute
{
    public MyEnumAttribute(MyEnum value)
    {
        Value = value;
    }

    public MyEnum Value { get; private set; }
}

[MyEnum(MyEnum.Reset)]
class ResetClass
{
}

[MyEnum(MyEnum.Set)]
class SetClass
{
}

[MyEnum(MyEnum.Undefined)]
class UndefinedClass
{
} 
```

然后，您可以使用此代码使用您的枚举和类型创建字典，并动态创建类型。

```
//Populate a dictionary with Reflection
var dictionary = Assembly.GetExecutingAssembly().GetTypes().
    Select(t => new {t, Attribute = t.GetCustomAttribute(typeof (MyEnumAttribute))}).
    Where(e => e.Attribute != null).
    ToDictionary(e => (e.Attribute as MyEnumAttribute).Value, e => e.t);
//Assume that you dynamically want an instance of ResetClass
var wanted = MyEnum.Reset;
var instance = Activator.CreateInstance(dictionary[wanted]);
//The biggest downside is that instance will be of type object.
//My solution in this case was making each of those classes implement
//an interface or derive from a base class, so that their signatures
//would remain the same, but their behaviors would differ. 
```

您可能会注意到，调用`Activator.CreateInstance`并不高效。因此，如果您想稍微提高性能，您可以将字典更改为`Dictionary<MyEnum,Func<object>>`，而不是将类型添加为值，而是添加包装每个类的构造函数并将它们作为对象返回的函数。

**编辑**：我正在添加一个`ConstructorFactory`类，改编自此[页面](http://rogeralsing.com/2008/02/28/linq-expressions-creating-objects/)。

```
static class ConstructorFactory
{
    static ObjectActivator<T> GetActivator<T>(ConstructorInfo ctor)
    {
        var paramsInfo = ctor.GetParameters();
        var param = Expression.Parameter(typeof(object[]), "args");
        var argsExp = new Expression[paramsInfo.Length];
        for (var i = 0; i < paramsInfo.Length; i++)
        {
            Expression index = Expression.Constant(i);
            var paramType = paramsInfo[i].ParameterType;
            Expression paramAccessorExp = Expression.ArrayIndex(param, index);
            Expression paramCastExp = Expression.Convert(paramAccessorExp, paramType);
            argsExp[i] = paramCastExp;
        }
        var newExp = Expression.New(ctor, argsExp);
        var lambda = Expression.Lambda(typeof(ObjectActivator<T>), newExp, param);
        var compiled = (ObjectActivator<T>)lambda.Compile();
        return compiled;
    }

    public static Func<T> Create<T>(Type destType)
    {
        var ctor = destType.GetConstructors(BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance).First();
        Func<ConstructorInfo, object> activatorMethod = GetActivator<Type>;
        var method = typeof(ConstructorFactory).GetMethod(activatorMethod.Method.Name, BindingFlags.Static | BindingFlags.NonPublic);
        var generic = method.MakeGenericMethod(destType);
        dynamic activator = generic.Invoke(null, new object[] { ctor });
        return () => activator();
    }

    delegate T ObjectActivator<out T>(params object[] args);
} 
```

您可以将它用作 的替代品`Activator.CreateInstance`，如果结果被缓存，它会提供更好的性能。

```
var dictionary = Assembly.GetExecutingAssembly().GetTypes().
    Select(t => new { t, Attribute = t.GetCustomAttribute(typeof(MyEnumAttribute)) }).
    Where(e => e.Attribute != null).
    ToDictionary(e => (e.Attribute as MyEnumAttribute).Value, 
                 e => ConstructorFactory.Create<object>(e.t));
var wanted = MyEnum.Reset;
var instance = dictionary[wanted](); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:07:47.887

看看这篇文章：[创建自定义属性](http://msdn.microsoft.com/en-us/library/sw480ze8.aspx)。然后，您可以使用反射（例如[GetCustomAttributes](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.getcustomattributes.aspx)）来获取属性及其值。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:16:35.353

另一种解决方案是使用依赖注入 (DI) 容器。例如使用[Unity](http://unity.codeplex.com/) DI，您可以：

```
// Register a named type mapping
myContainer.RegisterType<IMyObject, MyRealObject1>(MyEnum.Value1.ToString());
myContainer.RegisterType<IMyObject, MyRealObject2>(MyEnum.Value2.ToString());
myContainer.RegisterType<IMyObject, MyRealObject3>(MyEnum.Value3.ToString());
// Following code will return a new instance of MyRealObject1
var mySubclass = myContainer.Resolve<IMyObject>(myEnum.Value1.ToString()); 
```

使用 Unity [的示例：实现 Microsoft Unity（依赖注入）设计模式](http://www.codeproject.com/Articles/254091/Implementing-Microsoft-Unity-Design-Pattern)

当然，您可以使用任何 DI 容器（Castle Windsor、StructureMap、Ninject。这里列出了一些可用的 .NET DI 容器[List of .NET Dependency Injection Containers (IOC)](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T13:12:16.707

```
[AttributeUsage(AttributeTargets.Class)]
    public class SampleClass : Attribute {
        public SampleClass() : base() { }
        public SampleClass(YourEnum attributeValue) : this() { MyAttributeProperty = attributeValue; }
        public YourEnum MyAttributeProperty { get; set; }
    }

    public enum YourEnum { Value1, Value2, Value3 }

    [SampleClass(YourEnum.Value1)]
    public class ExampleValue1Class { }

    public class LoadOnlyClassesWithEnumValue1 {
        public LoadOnlyClassesWithEnumValue1() {

            Type[] allTypes = Assembly.GetExecutingAssembly().GetExportedTypes();
            foreach (var type in allTypes) {
                if (type.GetCustomAttributes(typeof(SampleClass), false).Length > 0) {
                    SampleClass theAttribute = type.GetCustomAttributes(typeof(SampleClass), false).Single() as SampleClass;
                    // this type is using SampleClass - I use .Single() cause I don't expect multiple SampleClass attributes, change ths if you want
                    // specify true instead of false to get base class attributes as well - i.e. ExampleValue1Class inherits from something else which has a SampleClass attribute
                    switch (theAttribute.MyAttributeProperty) {
                        case YourEnum.Value1:
                            // Do whatever
                            break;
                        case YourEnum.Value2:
                            // you want
                            break;
                        case YourEnum.Value3:
                        default:
                            // in your switch here
                            // You'll find the ExampleValue1Class object should hit the Value1 switch
                            break;
                    }
                }
            }
        }
    } 
```

这样，您可以将枚举指定为属性的参数。本质上，这是一个非常简单且轻量级的 DI 容器。对于更复杂的东西，我建议使用 StructureMap 或 NInject 之类的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T13:17:29.757

可以使用属性来保存信息，但最终仍需要做出决策过程，并且可能不会有太大不同；只是增加了属性的复杂性。无论您从哪里获得信息来做出决定，无论是从现有的三个枚举还是从属性中，决策的性质都保持不变。

寻找一种结合这三个枚举的方法可能会更有成效。

枚举可以是任何整数类型，因此消除嵌套（和冗余）开关的最简单方法是将枚举组合在一起。如果枚举是标志值的集合，这是最简单的。也就是说，枚举的每个值都具有二进制字符串中单个位的值（第一位为 1，第二位为 2，第三位为 4，8、16 等等）。

如果每个枚举的值可以连接在一起，它会将选择过程减少到单个 switch 语句。这可能最好通过连接、相乘或相加枚举值来完成——但是它们如何连接在一起取决于枚举，并且在不了解更多细节的情况下很难提供更明确的方向。

# javascript - HTML 网站中的 IMEI

> ID：14139390
> 
> 赞同：0
> 
> 时间：2013-01-03T12:55:59.550
> 
> 标签：javascript, html, mobile, imei

我怎么知道手机的IMEI，

通过**HTML**站点

不使用PhoneGap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:23:16.127

在手机中，只有本机应用程序可以访问 IMEI 号码，而不是 Web 应用程序。因此，如果浏览器具有足够的权限，但该信息未提供给页面，则它可能具有访问权限。这是故意的，因为网站所有者可以实现许多事情，例如跟踪和广告。

所以，如果你真的想拥有 IMEI，你需要创建一个原生应用程序（比如你拒绝的 PhoneGap）并获得权限。如果您的意图只是在您的站点中跟踪用户，您可以在 cookie 中为他/她分配一个唯一的 ID。

# android - android:clickColor 定义样式时出错

> ID：14139396
> 
> 赞同：2
> 
> 时间：2013-01-03T12:56:08.573
> 
> 标签：android, android-layout

我试图在 /values/styles.xml 文件中以这种方式定义样式：

```
<style name="TextAppearance.test" parent="@android:style/TextAppearance">
    <item name="android:typeface">sans</item>
    <item name="android:textColor">@android:color/white</item>
    <item name="android:textSize">15sp</item>
    <item name="android:clickColor">@android:color/red</item>
</style> 
```

但是，日食在样式标记的最后一行显示一个错误，其中包含文本： `error: Error: No resource found that matches the given name: attr 'android:clickColor'.`

我发现某个地方可能需要将构建目标设置为 13。在我的应用程序中，我在 AndroiManifest.xml 中有以下几行：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" /> 
```

知道是什么导致了问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:12:22.530

如果你尝试了每一种可能性，最后它也不起作用，那么你可能会这样做

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="....."/> <!-- pressed -->
    <item android:state_focused="true"
          android:color=".........."/> <!-- focused -->
    <item android:color="..........."/> <!-- default -->
</selector> 
```

# cocoa - “NSCollectionViewItem”的自定义“NSView”：如何从其视图获取或访问集合项或其数据以执行自定义绘制？

> ID：14139401
> 
> 赞同：1
> 
> 时间：2013-01-03T12:56:30.247
> 
> 标签：cocoa, xcode4

我是 XCode 的新手，仍在学习 XCode（目前使用 Xcode 4.5.2）。

基于 Apple 关于**[IconCollection](https://developer.apple.com/library/mac/#samplecode/IconCollection/Introduction/Intro.html)**的教程，我尝试制作一种缩略图视图应用程序，其中 ImageMetada 字段存储在数组中作为 CollectionView 数据源。

以下是一些基本信息：

1.  1个xib文件（**MainMenu.xib**）
2.  1 个窗口，主视图上有一个**CollectionView**和**TableView 。**
3.  1 个对象控制器委托窗口和具有自定义类名称的应用程序名称：**ThumbsViewController**
4.  1 个放置在 xib 上的集合项目的自定义视图（但不在主窗口或其子视图上）由 1 个 ImageView、1 个标签（文本字段）和 2 个按钮组成。此视图使用自定义类：**ThumbViewItem**。第一个按钮用于设置日期信息，第二个按钮用于删除它。我的目的是当我将鼠标放在当前项目上时，仅当在元数据上找不到日期信息时才应启用第一个按钮，而仅当在元数据上找到日期信息时才应启用第二个按钮。我已将每个 iboutlet 设置为**ThumbViewItem.h****文件**（**imgpic、imglabel、imgbtn1 和 imgbtn2**）。这个想法可能有点像 Adob​​e lightroom 4 底部照片集的缩略图视图。
*****   NsCollectionViewItem 的视图出口连接到***ThumbViewItem*** (4)，它的 itemPrototype 出口连接到窗口上的***CollectionView*** (2)*   图像信息的数组 ( **imageInfos** )，包括在 ThumbsViewController.h(3) 上定义的图片和元数据。我打算使用这个数组作为共享数组用于collectionview和tableview*   存储在数组中的数据是在**imageinfo.h**中定义的***名为 imageinfo***的接口。我在上面放了缩略图和元数据字典。****

 ****表格可以正确显示存储在数组中的信息，包括文件名、路径和元数据（日期和 GPS 信息）。但是 CollectionItem 的自定义视图不会。没有图片，没有名字，没有信息。

在调试时，我发现每个 IBOutlet : imgpic、imglabel、imgbtn1 和 imgbtn2 都是空的。

为什么所有 IBOutlet 属性/链接都不起作用？

有什么我忘记了吗？

如何从关联到 collectionitem 的自定义视图中获取存储在 imageinfos 数组中的 imageinfo 以用于自定义绘制目的？

CollectionView ---> Collection Item ---> 自定义视图

例如，在与索引号 4 处的集合项关联的自定义视图上执行自定义绘制时，我如何获得该索引（编号 4）？

我获取索引的代码是将其超级视图作为 collectionview 并在超级视图的子视图上获取其索引，如下所示：

```
-(NSInteger) getIndexInCollection 
{
    return [[[self superview] subviews] indexOfObject:self];
} 
```

这段代码的问题是有时有效，有时无效。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:19:38.187

阅读有关 NSCollectionview 的文档，IconViewPrototype.xib 注意简单的代码使用了一些绑定，在 Collection.xib 中应该确定如何使用 IconViewPrototype.xib 来显示自定义视图，并确保如何根据绑定获取数据源。****

# c# - Lists.ForEach 使用 LINQ/LAMBDA 使用条件进行选择

> ID：14139402
> 
> 赞同：9
> 
> 时间：2013-01-03T12:56:32.007
> 
> 标签：c#, linq

我有列表，我；只想使用 LinQ/LAMBDA 根据某些标准进行选择

我的代码是

```
Lists.ForEach(x => x.IsAnimal == false { /* Do Something */ } ); 
```

我在这部分收到错误“只有赋值、调用、递增、递减和新对象表达式可以用作语句” `x.IsAnimal == false`

我知道我们可以通过 for 循环轻松实现这一点，但我想通过使用 LinQ/LAMBDA 了解更多信息

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T12:58:35.533

在使用 ForEach 之前使用*Where*和*ToList*

```
Lists.Where(x => !x.IsAnimal).ToList().ForEach(...) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-03T13:00:55.127

那是行不通的，因为你不能拥有`false{}`构造。

```
Lists.ForEach(x => { 
                  if(x.IsAnimal){
                       //Do Something
                  }
             } ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T12:58:51.490

请阅读 lambda 表达式的[语法](http://msdn.microsoft.com/en-us/library/bb397687.aspx)： lambda 表达式代表一个方法；前面的部分`=>`是参数列表，后面的部分要么是返回结果的单个表达式，要么是方法体。

您可以在该方法主体中添加您的限制：

```
Lists.ForEach(x => {
                  if (!x.IsAnimal) {
                      // do something
                  }
              }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T12:59:28.357

应该是这样的：

```
things.Where(x => !x.IsAnimal).ToList().ForEach(x => { // do something }); 
```

我可以看到人们抱怨必须建立新列表才能使用 ForEach。你可以用 Select 做同样的事情并坚持使用 IEnumerable：

```
things.Where(x => !x.IsAnimal).Select(x => 
{
    // do something with it
    return x; // or transform into something else.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T13:03:27.433

请记住， lists.foreach 和普通的 foreach 之间*是*有区别的。每个“正常”都使用枚举器，因此更改迭代的列表是非法的。lists.foreach() 不使用枚举器（如果我没记错的话，它在后台使用索引器），因此可以随时更改数组中的项目。

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-27T09:33:42.763

如果你想在不同类型的集合上使用“ForEach”，你应该为 IEnumerable 编写一个扩展：

```
public static class IEnumerableExtension
{
    public static void ForEach<T>(this IEnumerable<T> data, Action<T> action)
    {
        foreach (T d in data)
        {
            action(d);
        }
    }
} 
```

使用此扩展程序，您可以在使用 ForEach 之前进行过滤，并且不必使用过滤后的项目形成新列表：

```
lists.Where(x => !x.IsAnimal).ForEach( /* Do Something */  ); 
```

我更喜欢标准版：

```
foreach (var x in lists.Where(x => !x.IsAnimal)) { /* Do Something */ } 
```

不是很长，很明显是一个有副作用的循环。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-03T13:03:40.360

试试这样的代码：

```
 class A {
    public bool IsAnimal { get; set; }
    public bool Found { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        List<A> lst = new List<A>();

        lst.Add(new A() { IsAnimal = false, Found = false });
        lst.Add(new A() { IsAnimal = true, Found = false  });
        lst.Add(new A() { IsAnimal = true, Found = false  });
        lst.Add(new A() { IsAnimal = false, Found = false  });

        // Here you first iterate to find only items with (IsAnimal == false)
        // then from IEnumerable we need to get a List of items subset
        // Last action is to execute ForEach on the subset where you can put your actions...
        lst.Where(x => x.IsAnimal == false).ToList().ForEach(y => y.Found = true);
    }
} 
```

# php - php mysql 下拉列表

> ID：14139405
> 
> 赞同：0
> 
> 时间：2013-01-03T12:56:38.750
> 
> 标签：php, mysql, drop-down-menu

我有一个显示来自 MySQL 表的数据的 PHP 表单。每一行显然都有不同的数据，我想做的是有一个下拉列表，显示与每行中的数据条目相关的数据。

例如，假设我有两张桌子。Fruit 和 Fruit_Colors，如下：

![在此处输入图像描述](../Images/979111823cda4efaedc11e4e5a33ae13.png) ![在此处输入图像描述](../Images/a9245926394483ea13c06f363f6ba600.png)

因此，如果我的 PHP 表单显示如下，名为 fruits 的 MySQL 数据将在 Fruit 列中显示数据。然后根据字段“Fruit”中的 PHP 表单输出值从 Fruit_Colors 表中获取颜色。所以每一行的下拉列表会有所不同。

![在此处输入图像描述](../Images/b0915c31a3af2953f3524d17a9945cfa.png)

我的 PHP 表格语法是：

```
<table id="hor-minimalist-a">
    <tr>
        <th>ID</th>
        <th>Fruit</th>
        <th>Color</th>
        </tr>
<? while($row = $fruits->fetch(PDO::FETCH_ASSOC)) { ?>
    <tr>
        <td><? echo $row['id']; ?></td>
        <td><? echo $row['fruit']; ?></td>
        <td><SELECT NAME="fruitcolor" id="fruitcolor">
            <OPTION VALUE=0 >
             *// what goes here???*
            </option>
            </SELECT> 
        </td>
    </tr>
<? } ?>
</table> 
```

任何建议我如何完成这项工作将不胜感激。请记住，该表最多可以有 50 行，因此需要一种将“fruit”值传递给下拉列表的动态方式。

我知道的下拉列表人口的语法是：

```
 function fruitcolor_dropdown($db)  
  {    
    $result = $db->query("select color from Fruit_Color where Fruit=*'outputted value'*"); 
    return $result; 
  } 
  $colors= fruitcolor_dropdown($db); 
  while($row = $colors->fetch(PDO::FETCH_ASSOC)) {
  $color=$row["color"];
  $optionsfruitcolors.="<OPTION VALUE=\"$color\">".$color; 
  } 
```

建议一如既往地受到赞赏。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:06:19.753

看一下这个。我们创建一个函数来生成下拉选项。它接受 DB 和 fruit 作为参数 --> 循环并生成 DOM --> 将其输出到浏览器。

**PHP 函数**

```
function getColors($db, $fruit)
{
    $result = $db->query(
            sprintf("select color from Fruit_Color where Fruit = '%s'",
                    $fruit
            )
    );

    $output = '';
    while($row = $result->fetch(PDO::FETCH_ASSOC))
    {
        $output .= sprintf(
                '<option value="%s">%s</option>', 
                $row['color'], 
                $row['color']
        );
    }

    return $output;
} 
```

**模板**

```
<? while($row = $fruits->fetch(PDO::FETCH_ASSOC)) { ?>
    <tr>
        <td><? echo $row['id']; ?></td>
        <td><? echo $row['fruit']; ?></td>
        <td><SELECT NAME="fruitcolor" id="fruitcolor">
             <?php echo getColors($db, $row['fruit']); ?>
            </SELECT> 
        </td>
    </tr>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:10:40.737

当您可以在单个查询中执行两次连接和触发查询时，这将是一个坏主意 - 您可以查看[演示](http://sqlfiddle.com/#!2/d2c73/2)

```
$query = "select f.*,group_concat(color SEPARATOR '|') as fcolor from fruit F Left join fruit_color fc using (fruit) group by fc.fruit"; 
```

上面将是您的查询，您将按如下方式循环它：

```
<? while($row = $fruits->fetch(PDO::FETCH_ASSOC)) { ?>
    <tr>
        <td><? echo $row['id']; ?></td>
        <td><? echo $row['fruit']; ?></td>
        <td><SELECT NAME="fruitcolor" id="fruitcolor">
            <OPTION VALUE=0 >
             <?php 
               $array = explode("|", $fcolor);
               $count = count($array);
               for($loop=0;$loop<$count;$loop) {
                 echo "<option>".$array[$loop]."</option>";
               }                                       
              ?>
            </option>
            </SELECT> 
        </td>
    </tr>
<? } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:02:36.233

在选择框中使用它

```
function fruitcolor_dropdown($db)  
{    
   $result = $db->query("select color from Fruit_Color where Fruit=*'outputted value'*"); 
   return $result;
   while($row = $colors->fetch(PDO::FETCH_ASSOC)) {
      $color=$row["color"];
      $optionsfruitcolors.="<OPTION VALUE=\"$color\">".$color; 
   }  
} 
<select name="fruitcolor" id="fruitcolor">
   <?php  $colors= fruitcolor_dropdown($db); ?> 
</select> 
```

# mobile - qooxdoo JS 框架内的 openlayers

> ID：14139411
> 
> 赞同：0
> 
> 时间：2013-01-03T12:57:13.103
> 
> 标签：mobile, svg, drawing, openlayers, qooxdoo

我在我的移动 JS (qooxdoo) 应用程序中使用 openlayers[绘图](http://openlayers.org/dev/examples/mobile-drawing.html)示例，除了绘图光标在视口上方，我可以绘图，但我看不到光标，我只能在我之后看到绘图向下滚动。

我以[这个](http://demo.qooxdoo.org/devel/mobileshowcase/index.html#%2Fmaps)qooxdoo 示例为基础。我还将 openlayers 示例中的所有 css 规则添加到我的 qooxdoo 样式中。

似乎是一个CSS位置问题，但我似乎找不到它。

任何帮助，将不胜感激。

```
 /**
     * Loads JavaScript library which is needed for the map.
     */
    _loadMapLibrary: function() {

        var self = this;
        var req = new qx.bom.request.Script();

        var options = {
            singleTile: true,
            ratio: 1,
            isBaseLayer: true,
            wrapDateLine: true,
            getURL: function() {
                var center = self._map.getCenter().transform("EPSG:3857", "EPSG:4326"),
                    size = self._map.getSize();
                return [
                this.url, "&center=", center.lat, ",", center.lon, "&zoom=", self._map.getZoom(), "&size=", size.w, "x", size.h].join("");
            }
        };

        req.onload = function() {
            var vector = new OpenLayers.Layer.Vector('Vector Layer', {
                styleMap: new OpenLayers.StyleMap({
                    temporary: OpenLayers.Util.applyDefaults({
                        pointRadius: 16
                    }, OpenLayers.Feature.Vector.style.temporary)
                })
            });

            // OpenLayers' EditingToolbar internally creates a Navigation control, we
            // want a TouchNavigation control here so we create our own editing toolbar
            var toolbar = new OpenLayers.Control.Panel({
                displayClass: 'olControlEditingToolbar'
            });
            toolbar.addControls([
            // this control is just there to be able to deactivate the drawing
            // tools
            new OpenLayers.Control({
                displayClass: 'olControlNavigation'
            }), new OpenLayers.Control.ModifyFeature(vector, {
                vertexRenderIntent: 'temporary',
                displayClass: 'olControlModifyFeature'
            }), new OpenLayers.Control.DrawFeature(vector, OpenLayers.Handler.Point, {
                displayClass: 'olControlDrawFeaturePoint'
            }), new OpenLayers.Control.DrawFeature(vector, OpenLayers.Handler.Path, {
                displayClass: 'olControlDrawFeaturePath'
            }), new OpenLayers.Control.DrawFeature(vector, OpenLayers.Handler.Polygon, {
                displayClass: 'olControlDrawFeaturePolygon'
            })]);

            var osm = new OpenLayers.Layer.OSM();
            osm.wrapDateLine = false;

            map = new OpenLayers.Map({
                div: 'googleMap',
                projection: 'EPSG:900913',
                numZoomLevels: 18,
                controls: [
                new OpenLayers.Control.TouchNavigation({
                    dragPanOptions: {
                        enableKinetic: true
                    }
                }), new OpenLayers.Control.Zoom(), toolbar],
                layers: [osm, vector],
                center: new OpenLayers.LonLat(0, 0),
                zoom: 1,
                theme: null
            });

            // activate the first control to render the "navigation icon"
            // as active
            toolbar.controls[0].activate();
        }

        req.open("GET", this._mapUri);
        req.send();
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:23:15.740

请检查光标类的 z-Index。最好的方法是通过 Chrome 的调试器控制台或 Firebug 来修改 z-Index。

是否有您的应用程序可用的实时示例？

# javascript - 从 twitter 获取推文的 chrome 扩展代码问题

> ID：14139417
> 
> 赞同：0
> 
> 时间：2013-01-03T12:57:35.690
> 
> 标签：javascript, jquery, api, twitter, google-chrome-extension

我正在尝试创建一个 chrome 扩展程序，`perkytweets`该扩展程序在弹出的扩展程序中显示带有井号标签的推文，但没有显示任何内容。

这是 manifest.json 代码

```
 {
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

这是 popup.html 代码

```
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    </style>

    <script src="script.js"></script>
  </head>
  <body>
  </body>
</html> 
```

这是 script.js 代码

```
var req = new XMLHttpRequest();
req.open(
    "GET",
    "http://search.twitter.com/search.atom?q=perkytweets",
    true);
req.onload = showTweets;
req.send(null);

function showTweets()
{
    document.body.appendChild(req.responseXML);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:00:50.043

仅在加载文档时才需要触发请求。尝试将您的代码包装在`onload`处理程序中

```
function showTweets() {
    document.body.appendChild(req.responseXML);
}

var req;
window.onload = function() {
    req = new XMLHttpRequest();
    req.open("GET", "http://search.twitter.com/search.atom?q=perkytweets", true);
    req.onload = showTweets;
    req.send(null);
} 
```

**更新**

您需要允许访问 twitter URL，将其添加到您的清单中：

```
"permissions": [ "http://search.twitter.com/*" ] 
```

所以你的`manifest.json`遗嘱现在看起来像这样：

```
{
    "name": "My First Extension",
    "version": "1.0",
    "manifest_version": 2,
    "description": "The first extension that I made.",
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html"
    },
    "permissions": [
        "http://search.twitter.com/*"
    ]
} 
```

**更新**

`req.responseXML`还不是一个元素，因此不能直接附加到身体，`console.log`你的结果并从那里去。

# r - 在 R 中使用神经网络进行时间序列预测的示例

> ID：14139418
> 
> 赞同：10
> 
> 时间：2013-01-03T12:57:50.220
> 
> 标签：r, neural-network, time-series

任何人都有一个简短的简短教育示例，如何使用神经网络（**R 中的 nnet**）进行预测？**这是R**中时间序列的示例

```
T = seq(0,20,length=200)
Y = 1 + 3*cos(4*T+2) +.2*T^2 + rnorm(200)
plot(T,Y,type="l") 
```

非常感谢

大卫

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T15:13:20.480

我认为您可以使用该`caret`软件包，特别是该`train`功能

> ```
> This function sets up a grid of tuning parameters for a number 
>       of classification and regression routines. 
> ```

```
require(quantmod) 
require(nnet)
require(caret)
T = seq(0,20,length=200)
y = 1 + 3*cos(4*T+2) +.2*T^2 + rnorm(200)
dat <- data.frame( y, x1=Lag(y,1), x2=Lag(y,2))
names(dat) <- c('y','x1','x2')
dat <- dat[c(3:200),] #delete first 2 observations
#Fit model
model <- train(y ~ x1+x2 , 
               dat, 
               method='nnet', 
               linout=TRUE, 
               trace = FALSE)
ps <- predict(model, dat)

#Examine results

plot(T,Y,type="l",col = 2)
lines(T[-c(1:2)],ps, col=3)
legend(5, 70, c("y", "pred"), cex=1.5, fill=2:3) 
```

![在此处输入图像描述](../Images/a37adb6bb34526ffeac6f43af9dab232.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-29T10:56:23.230

@agstudy 提出的解决方案很有用，但样本内拟合并不是样本外预测准确性的可靠指南。预测准确性测量的黄金标准是使用保持样本。从训练样本中删除最后 5 或 10 或 20 个观察值（取决于时间序列的长度），将模型拟合到其余数据，使用拟合模型预测保留样本并简单地比较保留样本的准确性，使用平均绝对偏差 (MAD) 或加权平均绝对百分比误差 (wMAPE)。因此，要做到这一点，您可以通过以下方式更改上面的代码：

```
require(quantmod) 
require(nnet)
require(caret)
t = seq(0,20,length=200)
y = 1 + 3*cos(4*t+2) +.2*t^2 + rnorm(200)
dat <- data.frame( y, x1=Lag(y,1), x2=Lag(y,2))
names(dat) <- c('y','x1','x2')
train_set <- dat[c(3:185),]
test_set <- dat[c(186:200),]
#Fit model
model <- train(y ~ x1+x2 , 
               train_set, 
               method='nnet', 
               linout=TRUE, 
               trace = FALSE)
ps <- predict(model, test_set)

#Examine results

plot(T,Y,type="l",col = 2)
lines(T[c(186:200)],ps, col=3)
legend(5, 70, c("y", "pred"), cex=1.5, fill=2:3) 
```

最后两行输出模型预测的 wMAPE

```
sum(abs(ps-test_set["y"]))/sum(test_set) 
```

# c# - 从 EF 4.3 升级后，EF 5 中的迁移失败

> ID：14139419
> 
> 赞同：0
> 
> 时间：2013-01-03T12:57:53.083
> 
> 标签：c#, .net, entity-framework, .net-4.0, entity-framework-5

我只是想在.Net 4.0 上从 EF 4.3 升级到 EF 5

当我使用运行迁移时，`update-database`我得到了这个：

```
System.Data.MetadataException: Schema specified is not valid. Errors: 
(0,0) : warning 0005: Could not find schema information for the attribute 'Namespace'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Provider'.
(0,0) : warning 0005: Could not find schema information for the attribute 'ProviderManifestToken'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Alias'.
(0,0) : error 0010: The element Schema in namespace http://schemas.microsoft.com/ado/2009/11/edm/ssdl was unexpected for the root element. The expected Schema in one of the following namespaces: http://schemas.microsoft.com/ado/2006/04/edm/ssdl, http://schemas.microsoft.com/ado/2009/02/edm/ssdl.
   at System.Data.Metadata.Edm.StoreItemCollection.Loader.ThrowOnNonWarningErrors()
   at System.Data.Metadata.Edm.StoreItemCollection.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths)
   at System.Data.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest& providerManifest, DbProviderFactory& providerFactory, String& providerManifestToken, Memoizer`2& cachedCTypeFunction)
   at System.Data.Metadata.Edm.StoreItemCollection..ctor(IEnumerable`1 xmlReaders)
   at System.Data.Entity.Migrations.Extensions.XDocumentExtensions.GetStoreItemCollection(XDocument model, DbProviderInfo& providerInfo)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.Diff(XDocument sourceModel, XDocument targetModel, String connectionString)
   at System.Data.Entity.Migrations.DbMigrator.IsModelOutOfDate(XDocument model, DbMigration lastMigration)
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Schema specified is not valid. Errors: 
(0,0) : warning 0005: Could not find schema information for the attribute 'Namespace'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Provider'.
(0,0) : warning 0005: Could not find schema information for the attribute 'ProviderManifestToken'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Alias'.
(0,0) : error 0010: The element Schema in namespace http://schemas.microsoft.com/ado/2009/11/edm/ssdl was unexpected for the root element. The expected Schema in one of the following namespaces: http://schemas.microsoft.com/ado/2006/04/edm/ssdl, http://schemas.microsoft.com/ado/2009/02/edm/ssdl. 
```

在.Net 4.0上有什么办法可以通过这个吗？我知道 EF 5 的某些功能在 .Net 4 上不可用。但我无法升级到 .Net 4.5 或 VS 2012，因为我的 SSD 只有 60GB，目前它只有 4GB 可用空间，所以 VS2012 安装程序赢了不要让我安装它（即使在其他驱动器上）。

Web.config 参考了这个：

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:16:01.743

当您使用 .NET Framework 4 更新数据库时，存储在数据库中的模型似乎具有 v3 架构。.NET Framework 4 中的 EF 组件不理解 v3（仅 v2）架构，因此会出现错误。我相信您需要迁移到 .NET Framework 4.5 和 VS2012。

# api - 贝宝。收取保证金

> ID：14139423
> 
> 赞同：0
> 
> 时间：2013-01-03T12:58:16.467
> 
> 标签：api, transactions, paypal, payment-gateway, payment

我想知道是否可以使用 PayPal 收取“保证金”？

在我的网站上，用户可以为物品（服务）付费。但我不知道如何收取保证金，因为不能保证用户会使用他的 PayPal 帐户付款 - 这样我就可以简单地使用 MassPay API 将押金退还给用户（payer_email）。

但是，即使不创建帐户，PayPal 也允许付款。虽然，用户必须指定他的电子邮件地址，但我不确定将钱寄回该电子邮件地址是否会将钱存入相关的信用卡/借记卡。

是否有一些 API 可以做到这一点？因为物品的收费+保证金不适合我。

我知道，例如，airbnb.com 有一些类似的功能，但我不知道它是如何工作的

如果有人帮助我解决这个问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:39:33.347

听起来您的主要问题是用户可以在没有 PayPal 帐户的情况下结帐。如果是这种情况，可以通过在网站付款首选项下的 PayPal 个人资料中禁用“PayPal Account Optional”功能来轻松解决。这将导致用户登录 PayPal 或创建一个帐户进行支付。

如果您宁愿启用该选项，则有很多方法可以处理保证金和退款，每种方法都有自己的优点和缺点。不过，如果简单地禁用该选项可以解决您的问题，我不会详细介绍所有这些细节。

如果您想了解有关其他选项的更多信息，请告诉我。

# jquery - phonegap jquerymobile 列表项按下事件

> ID：14139427
> 
> 赞同：1
> 
> 时间：2013-01-03T12:58:28.857
> 
> 标签：jquery, cordova, jquery-mobile, iscroll4

我在 Android 上的 phonegap 应用程序有问题。当我点击一个列表项时，点击似乎会进入下一页，并且与我在上一页上按下的位置相同的项目也被按下。

有两种情况会发生这种情况，第一种是按下列表视图项会打开带有子列表的页面。第二个是按下列表项打开一个表单。请注意，如果我长按某个项目，则不会出现此问题。

当应用程序在 iOS 上运行时，这不是问题。

关于如何防止这种情况的任何想法？

编辑：更新后点击处理程序（但仍然受到点击的影响）：

```
 $(parentListView).on('click', 'li', function(event) {
        event.stopPropagation();
        event.stopImmediatePropagation();
        $.mobile.changePage("#care-plans?id=" + this.id + "&" +
                "name=" + this.name, {
            transition : "none",
            });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:45:08.077

可以像这样防止通过 jQM 事件发生故障：

1.  假设您有一个导致跌落事件的按钮，可以像这样防止它：

    ```
    $('#buttonID').on('click', function (event) {
        event.stopPropagation();
        event.stopImmediatePropagation();
    }); 
    ```

2.  类似的解决方案：

    ```
    $('#buttonID').on('click', function (event) {
        return false;
    }); 
    ```

    与第 1 点不同，此解决方案存在问题。 return false 也充当***preventDefault()***。可以在[此处](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)找到有关此解决方案的更多信息。

3.  前 2 个解决方案应该适用于您的情况。最坏的情况，不要在第二页绑定事件。仅在显示事件之前的第二页 pagebefore 中绑定它们，并在 pagehide 事件中再次删除它们。更多关于 jQM 事件顺序的信息可以在[这里](https://stackoverflow.com/a/14010308/1848600)找到。

# javascript - 检查禁用按钮不起作用

> ID：14139429
> 
> 赞同：1
> 
> 时间：2013-01-03T12:58:35.937
> 
> 标签：javascript

我有以下静态编程按钮：

```
<a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)" id="action" disabled="disabled"> 
```

并且想检查按钮是否被禁用，所以我可以设置 preventDefault() 因为，如果它没有设置为禁用（通过另一个函数），按钮必须完成它的工作。

```
<script type="text/javascript">
$(document).ready(function(){    

 // IF ACTION BUTTON IS DISABLED, DISABLE DROPDOWN CLICK
 if ($('#action').is(':disabled')) {
 alert("inside if");
  event.preventDefault();
  return false; 
 };
});
</script> 
```

但它从来没有让我警觉。我可以通过检查元素看到按钮具有 disabled="disabled" 属性，因此它应该可以工作。我究竟做错了什么？

**注意：**我使用的是 jQuery，所以如果适用，请指出:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:02:18.510

```
 if ($('#action').prop('disabled', true)) {
     alert("inside if");
     event.preventDefault();
     return false; 
 }; 
```

# php - 获取 img 标签的路径

> ID：14139431
> 
> 赞同：0
> 
> 时间：2013-01-03T12:58:39.463
> 
> 标签：php

我想用脚本在页面上嵌入图片，所以我需要像这样的路径

```
domain.com/fms/fms_theme/images/no_hos_photo.png 
```

或者

```
/fms/fms_theme/images/no_hos_photo.png 
```

问题是，如何从中获得其中之一

```
/var/www/flyer/data/www/domain.com/fms/fms_theme/images/no_hos_photo.png 
```

这是

```
dirname(__FILE__) 
```

问题是，领域未知，路径未知，图片所在的唯一确定的东西

```
/fms_theme/images/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:02:10.293

尝试这个：

```
$path = "/var/www/flyer/data/www/domain.com/fms/fms_theme/images/no_hos_photo.png";
$relative = substr($path,strlen($_SERVER['DOCUMENT_ROOT'])); 
```

# java - Java 类型泛型作为 GSON 的参数

> ID：14139437
> 
> 赞同：61
> 
> 时间：2013-01-03T12:58:53.783
> 
> 标签：java, generics, gson

在 GSON 中获取您所做的对象列表

```
Gson gson = new Gson();
Type token = new TypeToken<List<MyType>>(){}.getType();
return gson.fromJson(json, token); 
```

它工作得很好，但我想更进一步，让 MyType 参数化，这样我就可以有一个通用函数来用这段代码解析对象列表

```
// the common function 
public <T> List<T> fromJSonList(String json, Class<T> type) {
  Gson gson = new Gson();
  Type collectionType = new TypeToken<List<T>>(){}.getType();
  return gson.fromJson(json, collectionType);
}

// the call
List<MyType> myTypes = parser.fromJSonList(jsonString, MyType.class); 
```

可悲的是返回一个 StringMaps 数组，而不是类型。T 被解释为另一种泛型类型，而不是我的类型。任何解决方法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2017-06-01T09:39:02.317

既然`gson 2.8.0`，您可以使用[`TypeToken#getParametized((Type rawType, Type... typeArguments))`](https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/reflect/TypeToken.java#L310)创建`typeToken`，那么`getType()`应该可以解决问题。

例如：

```
TypeToken.getParameterized(List.class, myType).getType(); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-03T13:17:05.043

泛型在编译时工作。超类型标记起作用的原因是（匿名）内部类可以访问其通用超类（超接口）的类型参数，而这些参数又直接存储在字节码元数据中。

一旦你的 .java 源文件被编译， type 参数`<T>`显然被丢弃了。由于在编译时是不知道的，所以不能存储在字节码中，所以被擦除了，Gson 也无法读取。

**更新**

在 newacct 的回答之后，我尝试实施他在选项 2 中建议的内容，即实施`ParameterizedType`. 代码如下所示（这是一个基本[测试](http://pastebin.com/PV6cP9jc)）：

```
class ListOfSomething<X> implements ParameterizedType {

    private Class<?> wrapped;

    public ListOfSomething(Class<X> wrapped) {
        this.wrapped = wrapped;
    }

    public Type[] getActualTypeArguments() {
        return new Type[] {wrapped};
    }

    public Type getRawType() {
        return List.class;
    }

    public Type getOwnerType() {
        return null;
    }

} 
```

此代码的目的是在内部使用`getFromJsonList()`：

```
public List<T> fromJsonList(String json, Class<T> klass) {
    Gson gson = new Gson();
    return gson.fromJson(json, new ListOfSomething<T>(klass));
} 
```

即使该技术有效并且确实非常聪明（我不知道它，我也不会想到它），这也是最终的成就：

```
List<Integer> list = new Factory<Integer>()
         .getFromJsonList(text, Integer.class) 
```

代替

```
List<Integer> list = new Gson().fromJson(text,
         new TypeToken<List<Integer>>(){}.getType()); 
```

对我来说，所有这些包装都是无用的，即使我同意这`TypeToken`会让代码看起来很讨厌：P

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-03-02T08:12:20.813

```
public static final <T> List<T> getList(final Class<T[]> clazz, final String json)
{
    final T[] jsonToObject = new Gson().fromJson(json, clazz);

    return Arrays.asList(jsonToObject);
} 
```

例子：

```
getList(MyClass[].class, "[{...}]"); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-08-21T09:01:20.100

这是来自@oldergod 的出色回答的完整代码库

```
public <T> List<T> fromJSonList(String json, Class<T> myType) {
    Gson gson = new Gson();
    Type collectionType = TypeToken.getParameterized(List.class, myType).getType();
    return gson.fromJson(json, collectionType);
} 
```

使用

```
List<MyType> myTypes = parser.fromJSonList(jsonString, MyType.class); 
```

希望有帮助

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-11T09:27:37.513

我将[Raffaele 的](https://stackoverflow.com/a/14139700/1502352)方法更进一步并泛化了该类，使其适用于每个 A 类，其中 B 是非参数化类。可能对集合和其他集合有用。

```
 public class GenericOf<X, Y> implements ParameterizedType {

    private final Class<X> container;
    private final Class<Y> wrapped;

    public GenericOf(Class<X> container, Class<Y> wrapped) {
        this.container = container;
        this.wrapped = wrapped;
    }

    public Type[] getActualTypeArguments() {
        return new Type[]{wrapped};
    }

    public Type getRawType() {
        return container;
    }

    public Type getOwnerType() {
        return null;
    }

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-02-27T13:41:43.570

在**Kotlin**中，你可以简单地使用这个函数：

```
inline fun <reified T> fromJson(json: String): T {
  return Gson().fromJson(json, object: TypeToken<T>(){}.type)
} 
```

并像使用它一样

```
val myTypes: List<MyType> = fromJson(jsonString); 
```

它将解析任何对象，包括 gereric 类型为 List。关键字`inline`并`reified`确保该类型不会被删除。

> 有关详细信息，我可以推荐这篇[Medium 帖子](https://medium.com/@imstudio/android-kotlin-how-to-use-typetoken-generics-with-gson-in-kotlin-e2b17c0ac24c)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-03T19:53:31.410

这已在前面的问题中得到解答。基本上，有两种选择：

1.  从调用站点传入`Type`。调用代码将使用`TypeToken`或构建它。
2.  自己构造一个`Type`对应于参数化类型的。这将要求您编写一个实现的类`ParameterizedType`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-12-28T11:23:32.817

如果用 kotlin 编程，我们可以使用`reified type parameter`inline 函数

```
class GenericGson {

    companion object {
        inline fun <reified T : Any> Gson.fromJsonTokenType(jsonString: String): T {
            val type = object : TypeToken<T>() {}.type
            return this.fromJson(jsonString, type)
        }

        inline fun <reified T : Any> Gson.fromJsonType(jsonString: String): T = this.fromJson(jsonString, T::class.java)

        inline fun <reified T : Any> fromJsonTokenType(jsonString: String): T = Gson().fromJsonTokenType(jsonString)

        inline fun <reified T : Any> fromJsonType(jsonString: String): T = Gson().fromJsonType(jsonString)
    }
} 
```

并在您的代码中使用如下

```
val arrayList = GenericGson.fromJsonTokenType<ArrayList<Person>>(json) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-08T16:18:54.863

在 kotlin 中简单使用例如：

**获取地点功能**

`fun getPlaces<T> (jsonString : String, clazz: Class<T>) : T { val places : T = Gson().fromJson(jsonString,clazz) return places }`

**然后你可以用作：**

```
val places = getPlaces(Array<Place>::class.java) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-13T17:13:53.700

这适用于一切。例如具有通用键和值的映射。

```
CustomType type = new CustomType(Map.class, String.class, Integer.class); 
```

所以没有更多的 TokenType。

```
class CustomType implements ParameterizedType {
    private final Class<?> container;
    private final Class<?>[] wrapped;

    @Contract(pure = true)
    public CustomType(Class<?> container, Class<?>... wrapped) {
        this.container = container;
        this.wrapped = wrapped;
    }

    @Override
    public Type[] getActualTypeArguments() {
        return this.wrapped;
    }

    @Override
    public Type getRawType() {
        return this.container;
    }

    @Override
    public Type getOwnerType() {
        return null;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-19T14:32:38.787

对我有用的 Kotlin“ListOfSomething”解决方案：

```
fun <T: Any> getGsonList(json: String, kclass: KClass<T>) : List<T> {

    return getGsonInstance().fromJson<List<T>>(json, ListOfSomething<T>(kclass.java))
}

internal class ListOfSomething<X>(wrapped: Class<X>) : ParameterizedType {

    private val wrapped: Class<*>

    init {
        this.wrapped = wrapped
    }

    override fun getActualTypeArguments(): Array<Type> {
        return arrayOf<Type>(wrapped)
    }

    override fun getRawType(): Type {
        return ArrayList::class.java
    }

    override fun getOwnerType(): Type? {
        return null
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-20T16:56:06.350

```
 public static <T> T getObject(String gsonStr) {
        Gson gson = new GsonBuilder()
                .setLenient()
                .create();
        Type collectionType = new TypeToken< T>(){}.getType();
        return gson.fromJson(gsonStr,
                collectionType);
    } 
```

使用时：

```
Class1 class1=  getObject(jsonStr); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-23T04:07:12.270

```
public <T> List<T> fromJSonList(String json) {
  Gson gson = new Gson();
  Type collectionType = new TypeToken<List<T>>(){}.getType();
  return gson.fromJson(json, collectionType);
}

//Just call
List<MyType> myTypes = parser.<MyType>fromJSonList(jsonString); 
```

# c# - 用于按钮保存的模态弹出 AJAX 扩展

> ID：14139438
> 
> 赞同：0
> 
> 时间：2013-01-03T12:59:08.197
> 
> 标签：c#, asp.net, ajax, modalpopup

我有一个按钮，可以在数据库中保存记录，但希望用户按下按钮以通知注册成功，在另一种情况下通知此类注册存在。可以通过模态弹出扩展 (AJAX)
完成此功能在 asp.net C# 中完成

这是服务器端的代码

```
protected void btnAdd_Click(object sender, EventArgs e)
        {
            if (!DALAtribut.CheckId("SELECT * FROM AtributPhone WHERE ID_Employee = '" + DDLEmployeeCreate.SelectedItem.Value.ToString() + "'"))
            {
                AtributPhone atribut = new AtributPhone()
                {
                    ID = Guid.NewGuid(),
                    ID_Category = Guid.Parse(DDLSubCategoryCreate.SelectedItem.Value),
                    ID_Employee = Guid.Parse(DDLEmployeeCreate.SelectedItem.Value),
                    ID_Institution = Guid.Parse(DDLInstitutionCreate.SelectedItem.Value),
                    ID_Office = Guid.Parse(DDLOfficeCreate.SelectedItem.Value),
                    ID_Phone = Guid.Parse(DDLPhoneCreate.SelectedItem.Value)
                };

                bd.AtributPhones.AddObject(atribut);
                bd.SaveChanges();
                isValid = false;
                //btnAdd.OnClientClick = "return confirm('Registration was successfully added!');";
            }
            gvAtribut.DataBind();
        } 
```

和这里

```
<%@ Page Title="Atribute" Language="C#" MasterPageFile="~/Administrator/SiteAdmin.Master"
    AutoEventWireup="true" CodeBehind="AtributsPhone.aspx.cs" Inherits="ContactData.Administrator.AtributsPhone" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <script type="text/javascript">
        function ShowMyModalPopupSuccess() {
            var modal = $find('mpeSuccess');
            modal.show();
        }
        function HideModalPopupSuccess() {
            var modal = $find('mpeSuccess');
            modal.hide();
        }
        function fnClickSuccess(sender, e) {
            __doPostBack(sender, e);
        }
    </script>
    <asp:ScriptManager ID="smAtribut" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="upAtribut" runat="server">
        <ContentTemplate>
            <table>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                        Institution :
                    </td>
                    <td class="tableCSS">
                        <asp:DropDownList ID="DDLInstitutionCreate" runat="server" AutoPostBack="True" Width="250px"
                            OnSelectedIndexChanged="DDLInstitutionCreate_SelectedIndexChanged" />
                    </td>
                </tr>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                        Phone :
                    </td>
                    <td class="tableCSS">
                        <asp:DropDownList ID="DDLPhoneCreate" runat="server" Width="250px" OnSelectedIndexChanged="DDLPhoneCreate_SelectedIndexChanged"
                            AutoPostBack="True" />
                    </td>
                </tr>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                        Section :
                    </td>
                    <td class="tableCSS">
                        <asp:DropDownList ID="DDLSubCategoryCreate" runat="server" Width="250px" OnSelectedIndexChanged="DDLSubCategoryCreate_SelectedIndexChanged"
                            AutoPostBack="True" />
                    </td>
                </tr>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                        Employee :
                    </td>
                    <td class="tableCSS">
                        <asp:DropDownList ID="DDLEmployeeCreate" runat="server" Width="250px" OnSelectedIndexChanged="DDLEmployeeCreate_SelectedIndexChanged"
                            AutoPostBack="True" OnInit="DDLEmployeeCreate_Init" OnTextChanged="DDLEmployeeCreate_TextChanged" />
                    </td>
                </tr>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                        Office :
                    </td>
                    <td class="tableCSS">
                        <asp:DropDownList ID="DDLOfficeCreate" runat="server" Width="250px" OnSelectedIndexChanged="DDLOfficeCreate_SelectedIndexChanged"
                            AutoPostBack="True" />
                    </td>
                </tr>
                <tr>
                    <td class="tableCSS" style="width: 180px;" align="right">
                    </td>
                    <td class="tableCSS" align="right">
                        <asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="btnAdd_Click" />
                    </td>
                </tr>
            </table>
<asp:Panel ID="pSuccesMessage" runat="server" style="background-color:Gray; display:none;">
            <p style="padding:20px;text-align:center; vertical-align:middle;color:Black;">
            Registration was successfully added!
            </p>
            <div style="padding: 10px; vertical-align: middle" align="center">
            <asp:Button ID="btnOK" runat="server" Text="Ok"/>
            </div>     
            </asp:Panel>
            <asp:ModalPopupExtender ID="mpeSuccess" runat="server"
                PopupControlID="pSuccesMessage"
                TargetControlID="btnAdd" 
                BackgroundCssClass="modalBackground" 
                OkControlID="btnOK"
                OnOkScript="HideModalPopupSuccess()">
            </asp:ModalPopupExtender>
            <asp:GridView ID="gvAtribut" runat="server" AllowPaging="True" AllowSorting="True"
                CellPadding="4" DataKeyNames="ID" DataSourceID="sdsAtribute" ForeColor="#333333"
                GridLines="None" DataMember="DefaultView" AutoGenerateColumns="False" Width="100%">
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                <Columns>
                    <asp:CommandField ShowDeleteButton="True" ButtonType="Image" DeleteImageUrl="~/Styles/delete-img.png" />
                    <asp:BoundField DataField="ID" ReadOnly="True" Visible="False" />
                    <asp:BoundField DataField="EmployeeName" HeaderText="Name" ReadOnly="True"
                        SortExpression="[Employee].[EmployeeName]" />
                    <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="[Employee].[Email]" />
                    <asp:BoundField DataField="Phone" HeaderText="Phone" SortExpression="[PhoneCard].[Phone]" />
                    <asp:BoundField DataField="InternPhone" HeaderText="int. Phone" SortExpression="[PhoneCard].[InternPhone]" />
                    <asp:BoundField DataField="WorkerMobile" HeaderText="Mobile" SortExpression="[Employee].[WorkerMobile]" />
                    <asp:BoundField DataField="NrOffice" HeaderText="Office" SortExpression="[Office].[NrOffice]" />
                </Columns>
                <EditRowStyle BackColor="#999999" />
                <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" Height="50px" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <SortedAscendingCellStyle BackColor="#E9E7E2" />
                <SortedAscendingHeaderStyle BackColor="#506C8C" />
                <SortedDescendingCellStyle BackColor="#FFFDF8" />
                <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
            </asp:GridView>
            <asp:SqlDataSource ID="sdsAtribute" runat="server" ConnectionString="<%$ ConnectionStrings:ContactDataConnectionString %>"
                SelectCommand="SELECT [AtributPhone].[ID],[Employee].[EmployeeName], [Employee].[Email], [PhoneCard].[Phone], [PhoneCard].[InternPhone], [Employee].[WorkerMobile], [Office].[NrOffice] FROM [AtributPhone], [Employee], [PhoneCard], [Office] WHERE [AtributPhone].[ID_Phone] = [PhoneCard].[ID] AND [AtributPhone].[ID_Employee] = [Employee].[ID] AND [AtributPhone].[ID_Office] = [Office].[ID] ORDER BY [Employee].[EmployeeName] ASC"
                DeleteCommand="DELETE FROM AtributPhone WHERE (ID = @ID)"></asp:SqlDataSource>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="DDLInstitutionCreate" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="DDLPhoneCreate" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="DDLSubCategoryCreate" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="DDLEmployeeCreate" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="DDLOfficeCreate" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:59:02.047

这里没有问题，但这应该可以帮助您入门。

试试这个：[http ://www.aspdotnet-suresh.com/2011/03/how-to-show-modalpopup-to-edit-gridview.html](http://www.aspdotnet-suresh.com/2011/03/how-to-show-modalpopup-to-edit-gridview.html)

# symfony - Symfony2 - 如何打印连接表输出

> ID：14139439
> 
> 赞同：0
> 
> 时间：2013-01-03T12:59:14.237
> 
> 标签：symfony, doctrine, twig

我有两个连接的表。随着`print_r`我得到这样的东西

```
Array
(
    [0] => GameShelf\UsersBundle\Entity\Ownership Object
        (
            [id:GameShelf\UsersBundle\Entity\Ownership:private] => 1
            [type:GameShelf\UsersBundle\Entity\Ownership:private] => 1
            [time:GameShelf\UsersBundle\Entity\Ownership:private] => 2010-02-05 11:00:00
            [game:GameShelf\UsersBundle\Entity\Ownership:private] => Doctrine\ORM\PersistentCollection Object
                (
                    [snapshot:Doctrine\ORM\PersistentCollection:private] => Array
                        (
                            [0] => GameShelf\GamesBundle\Entity\Game Object
                                (
                                    [id:GameShelf\GamesBundle\Entity\Game:private] => 1
                                    [parent_id:GameShelf\GamesBundle\Entity\Game:private] => 0
                                    [name:GameShelf\GamesBundle\Entity\Game:private] => Somebody
                                    [slug:GameShelf\GamesBundle\Entity\Game:private] => somebody
                                    [reldate:GameShelf\GamesBundle\Entity\Game:private] => 2010-10-10
                                    [genres:GameShelf\GamesBundle\Entity\Game:private] => 1,2
                                    [platforms:GameShelf\GamesBundle\Entity\Game:private] => 1,2
                                    [developers:GameShelf\GamesBundle\Entity\Game:private] => 1,2
                                    [description:GameShelf\GamesBundle\Entity\Game:private] => Lipsum
                                    [desc_src:GameShelf\GamesBundle\Entity\Game:private] => http://onet.pl
                                    [rate:GameShelf\GamesBundle\Entity\Game:private] => 0
                                    [ownership:GameShelf\GamesBundle\Entity\Game:private] => GameShelf\UsersBundle\Entity\Ownership Object
 *RECURSION*
                                )

                        ) 
```

我想要的是打印`name:GameShelf\GamesBundle\Entity\Game:private] => Somebody`，但我不知道如何。我使用 Twig，我当前的模板是：

```
{% for game in games %}
{{ game.id }}
{% endfor %} 
```

但它只`id`从`Ownership`表中输出。

我的控制器：

```
public function getOwnedAction($type = 1, $user = 1) {
        $games = $this->getDoctrine()
            ->getRepository('GameShelfUsersBundle:Ownership')
            ->getOwned();
        echo '<pre>';
        //print_r($games);
        echo '</pre>';

        return $this->render('GameShelfUsersBundle:Default:index.html.twig',
            array(
                'games' => $games->getGame()
            ));
    } 
```

回购：

```
public function getOwned($type = 1, $user = 1) {
        $query = $this->getEntityManager()
            ->createQuery('
                SELECT o, g FROM GameShelfUsersBundle:Ownership o
                JOIN o.game g
                WHERE o.type = :type
            ')
            ->setParameter('type',$type);

        try {
            return $query->getResult();
        } catch (\Doctrine\ORM\NoResultException $e) {
            return null;
        }
    } 
```

它仅在我设置`getSingleResult`而不是`getResult`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:27:00.167

在 Twig 中，您使用相同的方法来访问实体信息。

[编辑]查看递归后，您可能需要这样做：

```
{% for owners in games %}
    {% for game in owners.getGame() %}
        {{ game.getId() }}
        {{ game.getName() }}
        {{ game.getParentId() }}
        {# etc... #}
    {% endfor %}
{% endfor %} 
```

# windows-runtime - WinRT Xaml 工具包条形图错误？

> ID：14139441
> 
> 赞同：1
> 
> 时间：2013-01-03T12:59:18.717
> 
> 标签：windows-runtime, winrt-xaml, winrt-xaml-toolkit

每当我使用带有 Line 系列列系列（饼系列以外的任何系列）的图表时，我都会遇到此错误：

> 找不到适合指定区域性或中性区域性的任何资源。确保 WinRTXamlToolkit.Controls.DataVisualization.Properties.Resources.resources 在编译时已正确嵌入或链接到程序集“WinRTXamlToolkit.Controls.DataVisualization”，或者所需的所有附属程序集都是可加载且完全签名的

这里有什么问题？

这是 XAML：

```
<charting:Chart Name="columnChart"  Grid.Row="1"  Width="400" Height="400"   >
                            <charting:Chart.Series>
                                <charting:ColumnSeries  ItemsSource="{Binding items}"
                             IndependentValueBinding="{Binding Name}"
                        DependentValueBinding="{Binding Value}"
                        IsSelectionEnabled="True">

                                </charting:ColumnSeries>
                            </charting:Chart.Series>
                        </charting:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:35:58.210

我有同样的问题。将源代码添加到我自己的解决方案本身并没有帮助。我确实设法通过将资源文件的构建操作更改为嵌入式资源来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:29:23.177

确定删除引用并使用 NuGet 再次添加解决了最初的问题，此链接中柱形图的解决方案[WinRT Xaml Toolkit Column Series Error?](https://stackoverflow.com/questions/15596813/winrt-xaml-toolkit-column-series-error)

# java - 除非我在其上调用 append()，否则 JTextArea 不会出现

> ID：14139442
> 
> 赞同：1
> 
> 时间：2013-01-03T12:59:22.090
> 
> 标签：java, eclipse, swing

下面的问题让我大吃一惊，所以我来这里寻求帮助。

经过试验，我最终得到了这段代码：

```
JTextArea chatPanel = null;
JScrollPane scrollPanel = null;

if(chatPanel == null)
{
    chatPanel = new JTextArea("derp");
    chatPanel.setEditable(false);
    chatPanel.setForeground(new Color(10,191,26));
    chatPanel.setOpaque(false);
    scrollPanel = new JScrollPane(chatPanel);
    scrollPanel.setOpaque(false);
    scrollPanel.getViewport().setOpaque(false);
    scrollPanel.setBorder(BorderFactory.createEmptyBorder());
}

//## marked area ##         
scrollPanel.setBounds(9,596,435,138);
pane.add(scrollPanel); 
```

结果？什么都没有出现。我期望的带有“derp”的文本区域不存在，只是一个空的滚动面板。现在，如果我转到 ## 标记区域 ## 并将其替换为：

```
chatPanel.append("Hello."); 
```

**聊天面板在滚动面板中显示良好**，其文本为“derpHello.”。关于发生了什么的任何想法？

*作为记录，窗格是一个简单的容器，具有空布局，否则显示一切正常。声明，仅作记录：*

```
Container pane = getContentPane()
pane.setLayout(null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:24:24.450

我对下面的代码没有问题，我可以看到绿色的“derp”就好了：

```
import java.awt.Color;
import java.awt.Container;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TestTextArea {

    private void initUI() {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextArea chatPanel = null;
        JScrollPane scrollPanel = null;
        Container pane = frame.getContentPane();
        pane.setLayout(null);
        if (chatPanel == null) {
            chatPanel = new JTextArea("derp");
            chatPanel.setEditable(false);
            chatPanel.setForeground(new Color(10, 191, 26));
            chatPanel.setOpaque(false);
            scrollPanel = new JScrollPane(chatPanel);
            scrollPanel.setOpaque(false);
            scrollPanel.getViewport().setOpaque(false);
            scrollPanel.setBorder(BorderFactory.createEmptyBorder());
        }

        // ## marked area ##
        scrollPanel.setBounds(9, 596, 435, 138);
        pane.add(scrollPanel);
        frame.validate();
        frame.setSize(600, 800);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTextArea().initUI();
            }
        });
    }

} 
```

现在，我真的建议您使用适当`LayoutManager`的而不是那个空布局。这将允许您使用`pack()`并`revalidate()`拥有更简单和更易于维护的代码。

您的代码目前还没有说明某些其他内容。尝试放置一个[SSCCE](http://sscce.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:16:39.460

当您使用空字符串对其进行初始化时，您的 JTextArea 中没有任何内容可显示。当你向它附加一些东西时，里面就会有有效的文本。

请注意，您的 JScrollPane 永远不会尝试在内部调整组件的大小（为什么它会允许您滚动？）。因此，您必须在 JTextArea 上设置一个维度。

编辑（在您的代码更正之后）：我可以使用以下代码看到“derp”。

```
public class TextTest extends JFrame {
public TextTest () {
    JPanel pane = new JPanel();
    JTextArea chatPanel = null;
    JScrollPane scrollPanel = null;

    if(chatPanel == null)
    {
        chatPanel = new JTextArea("derp");
        chatPanel.setEditable(false);
        chatPanel.setForeground(new Color(10,191,26));
        chatPanel.setOpaque(false);
        scrollPanel = new JScrollPane(chatPanel);
        scrollPanel.setOpaque(false);
        scrollPanel.getViewport().setOpaque(false);
        scrollPanel.setBorder(BorderFactory.createEmptyBorder());
    }

    //## marked area ##         
    scrollPanel.setBounds(9,596,435,138);
    pane.add(scrollPanel);
    setContentPane(pane);
    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public static void main(String[] args) {
    new TextTest();
}

} 
```

# sql-server - Code First 迁移和存储过程

> ID：14139445
> 
> 赞同：31
> 
> 时间：2013-01-03T12:59:36.697
> 
> 标签：sql-server, asp.net-mvc, entity-framework, code-first

我刚刚创建了一个数据库并完成了我的第一次迁移（只是一个简单的表添加）。现在我想添加一些我刚刚添加的存储过程，方法是编写 sql 并在 Management Studio 中执行它。但如果可能的话，我想在迁移中包含这些存储过程，以便保存它们，并且我可以对它们运行 Up 或 Down 方法。这可能吗？如果可以，需要使用什么语法？还是我只需要使用 Management Studio 添加/编辑/删除它们？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-16T13:44:27.930

我已经这样做了......

在当前的迁移类中 -

```
public partial class MyMigration : DbMigration
{
    public override void Up()
    {
        ... other table creation logic

        // This command executes the SQL you have written
        // to create the stored procedures
        Sql(InstallScript);

        // or, to alter stored procedures
        Sql(AlterScript);
    }

    public override void Down()
    {
        ... other table removal logic

        // This command executes the SQL you have written
        // to drop the stored procedures
        Sql(UninstallScript);

        // or, to rollback stored procedures
        Sql(RollbackScript);
    }

    private const string InstallScript = @"
        CREATE PROCEDURE [dbo].[MyProcedure]
        ... SP logic here ...
    ";

    private const string UninstallScript = @"
        DROP PROCEDURE [dbo].[MyProcedure];
    ";

    // or for alters
    private const string AlterScript = @"
        ALTER PROCEDURE [dbo].[AnotherProcedure]
        ... Newer SP logic here ...
    ";

    private const string RollbackScript = @"
        ALTER PROCEDURE [dbo].[AnotherProcedure]
        ... Previous / Old SP logic here ...
    ";
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-17T01:16:05.977

我正在使用 EF6，`DbMigration`该类提供了创建/更改/删除存储过程的方法

*   创建一个新的存储过程

    ```
    public partial class MyFirstMigration : DbMigration
    {
        public override void Up()
        {
            // Create a new store procedure
            CreateStoredProcedure("dbo.DequeueMessages"
            // These are stored procedure parameters
            , c => new{                
                MessageCount = c.Int()
            },
            // Here is the stored procedure body
            @"
            SET NOCOUNT ON;
            SELECT TOP (@MessageCount)
                *
            FROM
                dbo.MyTable;
            ");
        }

        public override void Down()
        {
            // Delete the stored procedure
            DropStoredProcedure("dbo.DequeueMessages");                
        }
    } 
    ```

*   修改存储过程

    ```
    public partial class MySecondMigration : DbMigration
    {
        public override void Up()
        {
            // Modify an existing stored procedure
            AlterStoredProcedure("dbo.DequeueMessages"
            // These are new stored procedure parameters
            , c => new{                
                MessageCount = c.Int(),
                StatusId = c.Int()
            },
            // Here is the new stored procedure body
            @"
            SET NOCOUNT ON;
            SELECT TOP (@MessageCount)
                *
            FROM
                dbo.MyTable
            WHERE
                StatusId = @StatusId;
            ");
        }

        public override void Down()
        {
            // Rollback to the previous stored procedure
            // Modify an existing stored procedure
            AlterStoredProcedure("dbo.DequeueMessages"
            // These are old stored procedure parameters
            , c => new{                
                MessageCount = c.Int()
            },
            // Here is the old stored procedure body
            @"
            SET NOCOUNT ON;
            SELECT TOP (@MessageCount)
                *
            FROM
                dbo.MyTable;
            ");              
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-06T13:23:34.417

```
namespace QuickProject.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

public partial class CreateStoredProcedure_GellAllAgents : DbMigration
{
    public override void Up()
    {
        CreateStoredProcedure("dbo.GellAllAgents", c => new
        {
            DisplayLength = c.Int(10),
            DisplayStart = c.Int(0),
            UserName = c.String(maxLength: 255, defaultValueSql: "NULL"),
            FullName = c.String(maxLength: 255, defaultValueSql: "NULL"),
            PhoneNumber = c.String(maxLength: 255, defaultValueSql: "NULL"),
            LocationDescription = c.String(maxLength: 255, defaultValueSql: "NULL"),
            AgentStatusId = c.Int(defaultValueSql: "NULL"),
            AgentTypeId = c.Int(defaultValueSql: "NULL")
        }, StoredProcedureBody);
    }

    public override void Down()
    {
        DropStoredProcedure("dbo.GellAllAgents");
    }

    private const string StoredProcedureBody = @"
Declare @FirstRec int, @LastRec int
Set @FirstRec = @DisplayStart;
Set @LastRec = @DisplayStart + @DisplayLength;

With CTE_AspNetUsers as
(
     Select ROW_NUMBER() over (order by AspNetUsers.Id) as RowNum,
         COUNT(*) over() as TotalCount, AspNetUsers.Id, AspNetUsers.FullName, AspNetUsers.UserName, AspNetUsers.PhoneNumber, Locations.Desciption as LocationDescription, Cities.Name as LocationCity, AgentStatus.Name as AgentStatusName, AgentTypes.Name as AgentTypeName
         from AspNetUsers
     join Locations on AspNetUsers.LocationId = Locations.id
     join Cities on Locations.CityId = Cities.Id
     join AgentStatus on AspNetUsers.AgentStatusId = AgentStatus.Id
     join AgentTypes on AspNetUsers.AgentTypeId = AgentTypes.Id
     where (Discriminator = 'Agent' 
         and (@UserName is null or UserName like '%' + @UserName + '%')
         and (@FullName is null or FullName like '%' + @FullName + '%')
         and (@PhoneNumber is null or PhoneNumber like '%' + @PhoneNumber + '%')
         and (@LocationDescription is null or  @LocationDescription like '%' + (select Cities.Name from Cities where Locations.CityId = Cities.Id) + '%' or  @LocationDescription like '%' + Desciption + '%')
         and (@AgentStatusId is null or AgentStatusId = @AgentStatusId)
         and (@AgentTypeId is null or AgentTypeId = @AgentTypeId)
     )
     group by AspNetUsers.Id, AspNetUsers.FullName,AspNetUsers.UserName, AspNetUsers.PhoneNumber, Locations.Desciption, Cities.Name, AgentStatus.Name, AgentTypes.Name
)
Select *
from CTE_AspNetUsers
where RowNum > @FirstRec and RowNum <= @LastRec
";
}
} 
```

结果，当您在 SQL Server 中查看/修改 SP 时，这就是它显示“ALTER PROCEDURE”的原因

[![在此处输入图像描述](../Images/cf235ab6c41130504f054f1047ce0cd8.png)](https://i.stack.imgur.com/y60II.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T07:58:28.770

我将尝试提供不同的视角，因为在 C# 字符串中包含 SQL 代码并不是很吸引人，人们应该期望在提供智能感知的工具（例如 SSMS）中更改此类脚本。

以下解决方案在 ASP.NET Core 2.0 Web API 项目中实现。

1.  使用任何方便的工具维护开发数据库中的程序

2.  生成程序脚本：

    ```
    public class ProcedureItemMetadata
    {
        /// <summary>
        /// SQL server side object identifier
        /// </summary>
        [Key]
        public int ObjectId { get; set; }

        /// <summary>
        /// schema name
        /// </summary>
        public string SchemaName { get; set; }

        /// <summary>
        /// procedure name
        /// </summary>
        public string Name { get; set; }

        /// <summary>
        /// procedure body
        /// </summary>
        public string Definition { get; set; }
    }

    public string GetProceduresScript()
    {
       var query = Context.ProcedureItemMetadata.AsNoTracking().FromSql(@"
          SELECT ao.object_id as ObjectId, SCHEMA_NAME(ao.schema_id) as SchemaName, ao.name, sm.definition
          FROM sys.all_objects ao 
          JOIN sys.sql_modules sm ON sm.object_id = ao.object_id
          WHERE ao.type = 'P'
             and execute_as_principal_id IS NULL
          order by 1;");

          var list = query.ToList();
          string text = string.Join($" {Base.Constants.General.ScriptGeneratorSeparator}\n", list.Select(p => p.Definition));

          // replace create with create or alter
          string replaced = Regex.Replace(text,
             @"(?<create>CREATE\s+PROCEDURE\s+)",
             "CREATE OR ALTER PROCEDURE ", 
             RegexOptions.IgnoreCase);

          return replaced;
    } 
    ```

这是一个手动过程，但允许在开发准备就绪时获取程序。此外，它可以很容易地扩展到其他类型的对象（例如视图）。

3.  在解决方案中创建一个文件夹以保存要在应用程序启动时运行的脚本（例如 _SQL）

4.  在文件夹中复制生成的脚本（例如 all_procedures.sql）

像这样存储脚本的一个优点是 IDE 可能会自动验证语法 + 突出显示的内容等。

5.  创建“种子”代码以在应用程序启动时自动运行

    ```
    private static void EnsureSqlObjects(CustomContext context)
    {
        string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "_Sql");
        foreach (var file in Directory.GetFiles(path, "*.sql"))
        {
            string fileText = File.ReadAllText(file);
            // escaping { } for those rare cases when sql code contains {..}
            // as ExecuteSqlCommand tries to replace them with params values
            fileText = fileText.Replace("{", "{{");
            fileText = fileText.Replace("}", "}}");

            // splitting objects (cannot run more than one DDL in a command)
            string[] ddlParts = fileText.Split(Base.Constants.General.ScriptGeneratorSeparator, StringSplitOptions.RemoveEmptyEntries);
            foreach (string ddl in ddlParts)
            {
                context.Database.ExecuteSqlCommand(ddl);
            }
        }
    } 
    ```

这种方法允许管理通过迁移不容易维护的任何[幂等脚本。](http://www.sqlservercentral.com/articles/Editorial/125719/)

# ruby-on-rails - rails bootstrap-sass 我需要更新引导文件吗？

> ID：14139449
> 
> 赞同：3
> 
> 时间：2013-01-03T12:59:43.940
> 
> 标签：ruby-on-rails, twitter-bootstrap, bootstrap-sass

我将 ROR 与 bootstrap-sass gem 一起使用。这很奇怪，但我不能使用这里列出的一些样式：http: [//twitter.github.com/bootstrap/components.html#labels-badges](http://twitter.github.com/bootstrap/components.html#labels-badges)

我认为这是因为我不是真正的 bootstrap-sass gem - 它是 2.0。所以我将这个 gem 更新到 2.2.2.0，它安装得很好，但没有帮助。

当我检查页面源代码中的样式表文件时，在 localhost/assets/custom.css?body=1 之上，有标题：

/* * 引导程序 2.0.0 * (...)

那么我需要单独更新引导文件吗？如果，我在哪里可以找到它们？

编辑

我做了一些操作： - 手动下载 bootstrap 并将其放入 vendor/assets/stylesheets/bootstrap （我创建了 bootstrap 文件夹） - 将 import "bootstrap" 更改为 import "bootstrap/bootstrap"

它有效，但如果这是一个好的做法，我有异议，所以我做了： -gem clean -gem update -bundle install -deleted the vendor/assets/stylesheets/bootstrap - 我放的所有东西 - 改回导入“bootstrap”和......它似乎工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:38:12.567

您可以尝试在开发环境中进行预编译。

```
bundle exec rake assets:precompile RAILS_ENV=development 
```

但我真的不确定，因为我使用[twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem。它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:50:02.807

您只需要清理以前的 gem，尽管如果您有多个具有不同版本的项目，则不建议这样做。

这篇博文可能会有所帮助[...cleaning-previous-versions-for-gem-like.html](http://blog.zahiduzzaman.com/2013/04/cleaning-previous-versions-for-gem-like.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T15:36:33.943

我做了一些操作： - 手动下载 bootstrap 并将其放入 vendor/assets/stylesheets/bootstrap （我创建了 bootstrap 文件夹） - 将 import "bootstrap" 更改为 import "bootstrap/bootstrap"

它有效，但如果这是一个好的做法，我有异议，所以我做了： -gem clean -gem update -bundle install -deleted the vendor/assets/stylesheets/bootstrap - 我放的所有东西 - 改回导入“bootstrap”和......它似乎工作。

# php - 如何在 cakephp 视图中从布局中调用变量？

> ID：14139451
> 
> 赞同：1
> 
> 时间：2013-01-03T12:59:46.800
> 
> 标签：php, cakephp

我在布局文件中有一个像这样的变量

```
$bmodal =array(
        'data-target'   =>  '#myModal',
        'data-toggle'   =>  'modal'
    ); 
```

我想`$bmodal`在视图文件中调用一个链接来优化代码我该怎么做？任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:01:37.767

视图是在布局之前渲染的，所以你不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:22:06.483

您可以通过帮助程序执行此操作，您可以制作自己的帮助程序，您可以在其中传递链接中的变量。

# spring-roo - 如何在 Spring Roo 中自动设置字段？

> ID：14139457
> 
> 赞同：2
> 
> 时间：2013-01-03T13:00:00.613
> 
> 标签：spring-roo

我有一个 Announcement 类，我可以使用 Roo 生成的标准表单来访问它。该类中的字段之一是“time_created”。标准 Roo 表格要求用户在每次创建公告时填写此信息。相反，我想将 time_created 字段设置为当前时间而不询问用户。罗支持吗？

# mysql - qgis中的mysql连接

> ID：14139462
> 
> 赞同：1
> 
> 时间：2013-01-03T13:00:31.407
> 
> 标签：mysql, qgis

我刚刚在我的 Ubuntu 10 上安装了 Quantum GIS 1.8.0，我想添加 MySql 表作为源但没有连接到 mysql 的选项可以任何人指导我如何连接到 mysql 吗？

Qgis 中可用数据库类型的选项是 MSSQL、ODBC、PostgreSQL 和 ESRI 个人 GEO 数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T15:29:37.053

要添加 MySQL 数据表或矢量图层，只需按照添加新矢量图层的过程：

```
Menu Layer > Add Vector Layer 
```

选择数据库作为源类型。然后您必须通过单击新建来定义连接。

```
Type: Mysql
Name: your connection name
Host: remote or local IP address
Database: database name
Port: leave blank for default 3306
Username: mysql user
Password: mysql user's password 
```

单击测试连接以检查一切是否正常，然后确定。您的连接已保存，您可以使用它：从下拉菜单中选择它，然后单击打开。

[![在此处输入图像描述](../Images/bf3f07792104655c1a4291bfdd046274.png)](https://i.stack.imgur.com/6w0xf.png)

希望这可以帮助

# javascript - javascript“严格”和实例化全局模块

> ID：14139463
> 
> 赞同：2
> 
> 时间：2013-01-03T13:00:34.910
> 
> 标签：javascript, design-patterns

我想`"use strict";`使用 javascript 模式，但在严格警告方面存在一些问题。我有一个“小部件”，例如：

```
var Widget = function () { /* ... */ } 
```

在我这样使用它之前（在模块内）：

```
(function () {
    var w1 = new Widget();
}()); 
```

当我添加`"use strict";`到此上下文时，我收到`"Widget"`未定义的警告：

```
(function () {
    "use strict";
    var w1 = new Widget();      // <- warning here
}()); 
```

这样做的正确方法是什么？

我应该以不同的方式定义我的“小部件”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:00:06.033

在严格模式下，您不会意外创建全局变量。正如您所注意到的，尝试这样做会引发参考错误。因此，您需要命名一个已`Widget`分配的对象：

```
window.Widget = function () { /* ... */ }
(function () {
    "use strict";
    var w1 = new window.Widget();
}()); 
```

更多信息：[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，[www.nczonline.net](http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/)

# ruby-on-rails - Rails @url 实例变量为什么不能作为普通实例变量工作？

> ID：14139474
> 
> 赞同：1
> 
> 时间：2013-01-03T13:00:56.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图使用一个名为的实例变量`@url`

控制器：`@url = "asdasdsa"`

但是当我在视图中调用它时：`<%= @url %>`它是空的......

我确实将名称更改为`@url_test`并且它有效。只是想知道为什么它不适用于 @url ？名称是受保护的还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:32:12.943

这是 rails 3.0.x 中的一个已知问题：

请参阅此 github 问题：[视图正在丢失 @url 实例变量。](https://github.com/rails/rails/issues/2447)

> spastorino 在一年前发表评论
> 不记得为什么，但@url 是 3.0 AP 中的内部 ivar，就是这样。

它应该用 Rails 3.1.0 修复。作为一种解决方法，不要调用您的实例变量`@url`或升级您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:30:55.223

`url`是 Rails 中的保留字。[您可以在此](http://reservedwords.herokuapp.com/)站点上看到更完整的列表（尽管可能不是最新的） 。

# php - 不要显示图像的完整路径，MVC

> ID：14139475
> 
> 赞同：1
> 
> 时间：2013-01-03T13:01:02.087
> 
> 标签：php, html, download

> **可能重复：**
> [如何隐藏实际下载文件夹位置](https://stackoverflow.com/questions/12707589/how-to-hide-the-actual-download-folder-location)

我的每个视图文件夹中都有一个img 文件夹，例如views/Login/img/myImage.png。

为了将其作为图像标记的来源，我必须在服务器上声明图像文件的完整路径，即 localhost:/mysite/public_html/views/Login/img/myImage.png。

无论如何，我不必使用完整路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:11:14.477

使用以下问题的答案：

[读取文件系统并返回](https://stackoverflow.com/questions/13383144/reading-filesystem-and-returning-it)

您可以在您的网站根目录中创建一个图像调用脚本，该脚本将读取图像文件并将其作为图像返回。

```
mysite.com/getImages.php?src=Login/img/myImage.png 
```

在此脚本中，您会将 URL 的前缀添加到*src*查询字符串。

# servicestack - ServiceStack Razor View 使用额外数据包装内容

> ID：14139476
> 
> 赞同：3
> 
> 时间：2013-01-03T13:01:07.517
> 
> 标签：servicestack

我将 ServiceStack 与 Razor 插件一起使用，并从我的服务方法返回响应对象。如果服务使用默认视图，则响应很好，但如果我在服务方法中指定视图，则 http 响应包含围绕内容的附加数据。

这是一个测试服务类：

```
[DefaultView("TestView")]
public class TestService : RestServiceBase<Req>
{
    public override object OnGet(Req request)
    {
        var response = new Req { Data = "Hello" };
        if (string.IsNullOrEmpty(request.Data))
        {
            return response;
        }
        return new HttpResult(response) { View = "TestView" };
    }
} 
```

包含附加内容数据的示例原始响应如下所示：

```
HTTP/1.1 200 OK
Server: nginx/1.2.3
Date: Thu, 03 Jan 2013 12:46:33 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: ServiceStack/3.928 Unix/Mono
X-AspNet-Version: 4.0.30319
Cache-Control: private
Set-Cookie: ss-id=KvFQKAyOkkKMajEFeaLiKQ==; path=/
Set-Cookie: ss-pid=nrv3gwEL6EuRE9B8VpAWZA==; path=/; expires=Mon, 03 Jan 2033 12:43:57 GMT

b1
a4
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Test page</title>
</head>
<body>

<h1>Test page</h1>
<p>Hello</p>

</body>
</html>

0

0 
```

它们看起来像内容长度值和结束标记。我想我有一些错误配置，但不知道是什么。有任何想法吗？

# asp.net-mvc - .net mvc 与 Active Directory 的外键关系

> ID：14139478
> 
> 赞同：1
> 
> 时间：2013-01-03T13:01:11.853
> 
> 标签：asp.net-mvc, active-directory

我正在开发一个 Intranet 应用程序并已成功与 Active Directory 集成。

当我们添加新客户时，我想从下拉列表中分配客户顾问。

我可以使用以下内容填充下拉列表

```
PrincipalContext pc = new PrincipalContext(ContextType.Domain, "DOMAIN", "dc=domain,dc=org");
GroupPrincipal group = GroupPrincipal.FindByIdentity(pc, "customerAdvisors");
ViewBag.Guid = new SelectList(group.Members, "Guid", "DisplayName"); 
```

然后，我想将所选用户的 Guid 与客户数据一起存储在数据库中。

但是，我不确定如何在我的模型中设置外键约束，因为我要加入的表位于 Active Directory 中。

我是否需要在我的数据库中创建一个单独的 Employee 表并同步所需的字段，或者是否有一种简化的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:36:23.590

我从来没有这样做过，但是一些快速的研究使它看起来成为可能。

您可以将您的顾问的指南保存在您的客户身上。AD Guid 可以进入 Guid 数据类型。 [您应该能够使用此方法查询单个用户](http://msdn.microsoft.com/en-us/library/bb383475.aspx)：

UserPrincipal 用户 = UserPrincipal.FindByIdentity(pc, yourUsersGuidAsAString);

不利的一面是，每次您想要客户顾问的信息（例如他们的姓名或电子邮件地址）时，您都必须单独查询 AD。更难使用 ORM。

在我的应用程序中，我有一个不同的用例，但我也将我的应用程序与 AD 集成。我采取的方法是将这些信息保存在我自己的数据库中，而不是每次都点击 AD。很大程度上是因为我的架构让你很难以同样的方式进入 AD。此外，使用 ORM（如我的实体框架）来获取我想要的信息也更容易。这样做的缺点是您需要确保数据库中的信息与 AD 中的信息保持同步。

您必须判断哪种方法对您的架构/用例最有意义。

希望有帮助。

# android - 收到错误“下载失败，因为找不到资源”

> ID：14139482
> 
> 赞同：2
> 
> 时间：2013-01-03T13:01:28.800
> 
> 标签：android, expansion-files

我制作了像 SampleDownloaderActivity 这样的简单示例项目，我设置了 BASE64_PUBLIC_KEY 和扩展文件的版本和长度，将 apk 和扩展文件上传到 Google Play，保存它们并...在运行应用程序后收到这样的消息：“下载失败，因为资源可能找不到”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:12:19.487

您必须将应用程序和扩展文件的草稿上传到 Google Play。

当您的应用正在发布时（从您按下发布到它实际在 Play 上发布之间的时间），扩展文件也不可用，这可能会导致一些混乱。

从文档：

> 因为您的应用程序有时必须在首次打开时手动下载扩展文件，所以测试此过程以确保您的应用程序可以成功查询 URL、下载文件并将它们保存到设备中，这一点很重要。
> 
> 要测试您的应用程序对手动下载过程的实现，您必须将您的应用程序作为“草稿”上传到 Google Play，以使您的扩展文件可供下载：
> 
> 1.  使用 Google Play 开发者控制台上传您的 APK 和相应的扩展文件。
> 2.  填写必要的应用程序详细信息（标题、屏幕截图等）。您可以在发布应用程序之前返回并最终确定这些详细信息。单击保存按钮。不要单击发布。这会将应用程序保存为草稿，这样您的应用程序就不会发布给 Google Play 用户，但您可以使用扩展文件来测试下载过程。
> 3.  使用 Eclipse 工具或 adb 在您的测试设备上安装应用程序。
> 4.  启动应用程序。
> 
> 如果一切正常，您的应用程序应该会在主要活动开始后立即开始下载扩展文件。

有关完整的详细信息，请参阅[测试指南](http://developer.android.com/google/play/expansion-files.html#Testing)。

# css - 浮动：无；格式会影响 div 的背景颜色吗？

> ID：14139485
> 
> 赞同：1
> 
> 时间：2013-01-03T13:01:33.153
> 
> 标签：css, css-float

我试图理解`float`and的行为`clear`。出于这个原因，我创建了一个小示例[（可在 jsfiddle 上获得）](http://jsfiddle.net/faq9h/1/)进行实验：

HTML：

```
<div class="left">A</div>
<div class="custom">B</div>
<div class="left">C</div>
<div class="left">D</div>​ 
```

CSS：

```
div {
    background-color: blue;
    color: red;
    width: 100px;
    height: 100px;
    margin: 3px;
}

.left {
    float: left;
}

.custom {
    float: none;
}​ 
```

首先，我不明白为什么`background-color: blue;`B 的指令似乎丢失了。

![原来的](../Images/36ba9afefb2e425adddc847f4c6a3ea7.png)

其次，我不清楚为什么删除`margin: 3px;`语句会导致：

![删除边距](../Images/23781333fef4a556fdd5a694bb472845.png)

提前感谢您的帮助或链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:09:06.397

B 的指令并没有丢失——只是它周围的浮动元素将文本推到了 div 之外。去掉浮动元素的背景颜色，你可以看得更清楚一些：

[http://jsfiddle.net/faq9h/3/](http://jsfiddle.net/faq9h/3/)

当您删除边距时（如第二张图片中所示），您实际看到的是 C 的背景从 B 文本下方显示出来。

解决此问题的一种快速方法是添加`display: inline-block`到非浮动元素：

[http://jsfiddle.net/faq9h/4/](http://jsfiddle.net/faq9h/4/)

然后您的框将显示为 ACD B。

至于了解发生了什么：[这是一篇很棒的文章](http://css-tricks.com/all-about-floats/)。

# arduino - serial.begin() 做什么？

> ID：14139507
> 
> 赞同：-10
> 
> 时间：2013-01-03T13:03:10.283
> 
> 标签：arduino

我对`serial.begin()`. 例如：

```
serial.begin(baud) 
```

其中“波特”是指波特率。

这个函数的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:04:54.993

谷歌快速搜索：

> 设置串行数据传输的数据速率（以比特/秒（波特）为单位）。要与计算机通信，请使用以下速率之一：300、600、1200、2400、4800、9600、14400、19200、28800、38400、57600 或 115200。但是，您可以指定其他速率 - 例如，通过引脚 0 和 1 与需要特定波特率的组件进行通信。

链接：[http ://arduino.cc/en/Serial/Begin](http://arduino.cc/en/Serial/Begin)

基本上，它以特定的传输速率设置 USART，例如每秒 1200 位。

# php - 在 cron 作业上运行的 PHP 脚本 - 电子邮件警报

> ID：14139510
> 
> 赞同：0
> 
> 时间：2013-01-03T13:03:15.783
> 
> 标签：php, joomla

我正在建立一个 Joomla 网站，但我遇到了一些问题，想知道你们是否可以帮助我。

我正在尝试使警报系统正常工作。

我基本上需要创建一个每 10 分钟运行一次 PHP 脚本的 cron 作业。这个 PHP 脚本基本上应该对数据库进行选择查询，如果特定字段具有特定值，则打开一个网站。

所以，这就是我现在所拥有的：

```
$result = mysql_connect(localhost, myusername, mypassword);
mysql_select_db("database_name");
$result = mysql_query( "SELECT from_table"); 
```

表名是：comments。字段名称为：已发布。

所以我最理想的需要是，如果发布的值 = 0，那么 php 脚本应该打开这个 URL，它会向我发送一条短信[https://www.voipbuster.com/myaccount/sendsms.php?username =xx&密码=xx&from=xx&to=xx&text=警报](https://www.voipbuster.com/myaccount/sendsms.php?username=xx&password=xx&from=xx&to=xx&text=Alert)

如果有任何其他价值，我不希望它做任何事情。

因此，只要有值 0，我就会收到一条短信。

希望这是有道理的，感谢您的耐心阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:11:11.040

切换到 PDO（或 MySQLi）。您使用的 API 已弃用。

（基于无——这是一个猜测）

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$sql = 'SELECT published FROM sometable';
$stmt = $dbh->prepare($sql);
$stmt->execute();
$stmt->setAttribute(PDO::FETCH_ASSOC);
$row = $stmt->fetch();

if( $row['published'] == 0 )
{
    $ch = curl_init(" https://www.voipbuster.com/myaccount/sendsms.php?username=xx&password=xx&from=xx&to=xx&text=Alert");

    curl_exec($ch);
    curl_close($ch);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:59:01.350

获取 Andrew Eddie 的 cron 插件脚本并运行它。然后在发送电子邮件的 cron 组中编写一个插件。 [https://github.com/eddieajau/jc-kodaly](https://github.com/eddieajau/jc-kodaly)

# asp.net-mvc-3 - 如何在 webgrid 中设置动态列标题？

> ID：14139513
> 
> 赞同：0
> 
> 时间：2013-01-03T13:03:37.783
> 
> 标签：asp.net-mvc-3, webgrid

我使用网络网格来显示员工姓名，以及针对每个员工的下拉列表中的项目。对于项目下拉列，我必须将日期显示为从 HTML 帮助程序返回的列标题。即按照下面的代码而不是列标题“SelectedDate”，我必须显示由 Html 帮助器 (DateTime)@Html.GetNextDate((DateTime)item.SelectedDate, 0)) 返回的值。

**下面是视图的快照**

```
 @{
       var grid = new WebGrid(Model.employeeProjectsMapper);
     }

    @grid.GetHtml(
    columns: grid.Columns(
     grid.Column("EmployeeName"),
     grid.Column(
     header: "SelectedDate",
        format:
        @<span>
        @{ var index = Guid.NewGuid().ToString(); }
        @Html.Hidden("employeeProjectsMapper.Index", index)
        @Html.Hidden("employeeProjectsMapper[" + index + "].EmployeeID", (Int64)item.EmployeeID)
        @Html.Hidden("employeeProjectsMapper[" + index + "].SelectedDate",  
       (DateTime)@Html.GetNextDate((DateTime)item.SelectedDate, 0))
        @Html.DropDownList("employeeProjectsMapper[" + index + "].SelectedProject",    
       Model.ProjectList)
        </span>
     )
    )
  ) 
```

任何帮助深表感谢。谢谢苏玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:43:35.170

您可以向视图模型添加一个属性，您的视图是强类型的，并且将包含例如第一条记录的选定日期（因为您在评论部分说所有员工都具有相同的 SelectedDate 值）：

```
public class MyViewModel
{
    public IEnumerable<SelectListItem> ProjectList { get; set; }
    public IEnumerable<EmployeeViewModel> employeeProjectsMapper { get; set; }

    public DateTime SelectedDate { get; set; }
} 
```

然后在您的控制器操作中简单地填充此属性的值：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    model.ProjectList = ...
    model.employeeProjectsMapper = ...

    // set the SelectedDate property from the first employee record
    // that will be used as header in the selected project column
    model.SelectedDate = model.employeeProjectsMapper.First().SelectedDate;

    return View(model);
} 
```

最后在您的视图中，您可以使用此属性使用自定义 HTML 帮助程序设置标题文本：

```
@model MyViewModel

@{
    var grid = new WebGrid(Model.employeeProjectsMapper);
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column("EmployeeName"),
        grid.Column(
            header: ((DateTime)Html.GetNextDate(Model.SelectedDate, 0)).ToShortDateString(),
            format:
                @<span>
                    @{ var index = Guid.NewGuid().ToString(); }
                    @Html.Hidden("employeeProjectsMapper.Index", index)
                    @Html.Hidden("employeeProjectsMapper[" + index + "].EmployeeID", (Int64)item.EmployeeID)
                    @Html.Hidden("employeeProjectsMapper[" + index + "].SelectedDate", (DateTime)Html.GetNextDate((DateTime)item.SelectedDate, 0))
                    @Html.DropDownList("employeeProjectsMapper[" + index + "].SelectedProject", new SelectList(Model.ProjectList, "Value", "Text", item.SelectedProject))
                </span>
        )
    )
) 
```

# yii - Yii 中的组件、扩展和模块有什么区别

> ID：14139519
> 
> 赞同：31
> 
> 时间：2013-01-03T13:04:06.783
> 
> 标签：yii, yii-extensions, yii-components

我是 Yii 框架的新手，刚刚在受保护的文件夹中遇到了**模块**、**扩展**和**组件。**

任何人都可以在理论上和实践上区分所有这些。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-07T14:56:01.153

**组件**是可以帮助您根据模型编写业务逻辑的类。假设您所有的模型文件都使用相同的逻辑，因此可以将逻辑写入组件内部，而不是为每个控制器编写。

**扩展**就像库一样，基本上不依赖于您的模型，因此可以在当前或以后的项目中的任何地方重用。例如编写任何电子邮件扩展名。

**模块**是一个独立的软件单元，由模型、视图、控制器和其他支持组件组成。在许多方面，模块类似于应用程序。主要区别在于模块不能单独部署，它必须驻留在应用程序内部。用户可以像访问普通应用程序控制器一样访问模块中的控制器。

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-04T12:58:38.807

在这里加上我的 2 美分...

**零件**

你自己的类文件，你想用它做一些事情，只针对这个站点。示例是上传应用程序中的 zip 压缩类，某些安全应用程序的自定义加密算法

**延期**

可重复使用的外部类文件或文件组，通常由第 3 方提供。示例是您或其他人构建的 facebook 连接库、从 ebay.com 获取列表的 api 库、从 google 读取的 rss 阅读器库等。

**模块**

一个基于 mini-yii 的站点作为站点的子集，也可以在其他应用程序中重复使用，或者独立构建以使 yii 更加模块化。例如，一个独立于站点但仅使用登录用户信息的论坛模块，一个包含与 openid、facebook 和 google 等多个站点集成的用户身份验证模块

# php - PHP - 从字符串中提取 id 以针对函数运行

> ID：14139524
> 
> 赞同：0
> 
> 时间：2013-01-03T13:04:28.973
> 
> 标签：php

我想知道是否有人可以帮助我。

我从我的数据库中提取一个字符串，其格式类似于 4、3、1、7、38 等...它是一个动态数组，因此它可以是任意数量的数字等

我需要做的是提取每个数字并再次运行它。例如，每个数字代表一个用户 ID，我需要针对一个函数运行每个用户 ID 并返回一个集合结果，所以对于每个 ID，我都需要运行类似的东西

```
$personsdetails = $this->random_model->get_user_details( $useridhere ); 
```

我将如何从数组中获取每个 id 并通过循环运行它以获取每个人的详细信息？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:06:35.820

您可以对创建的数组使用[explode](http://php.net/manual/en/function.explode.php)和[foreach 。](http://php.net/manual/en/control-structures.foreach.php)

```
$userIds = explode(',', $yourstring);
foreach ($userIds as $userId) {
    $personsdetails = $this->random_model->get_user_details( $userId );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:07:42.650

```
$var=explode(',',$database_value); 
```

它以数组形式出现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:10:41.647

$ids_raw = '1,2,3,4,5';

$ids = explode(',', $ids_raw);

foreach($ids 作为 $id){

回声 $id; }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:22:57.043

因为您要引入一维数组，所以我建议使用 for() 循环（个人喜好）。该`explode()`函数将根据您给它的第一个参数拆分字符串。所以在这种情况下，explode 是`$userIDs`用逗号分割字符串`','`。然后我们通过您的函数运行每个数组元素。

```
$userIDs = '1,2,3';
$userIDs = explode(',',$userIDs);

for($x=0;$x<count($userIDs);$x++){
    $personsdetails = $this->random_model->get_user_details($userIDs[$x]);
}; 
```

# c++ - 参数引用有物理变量吗？

> ID：14139525
> 
> 赞同：2
> 
> 时间：2013-01-03T13:04:40.090
> 
> 标签：c++, variables, pointers, parameters

参数引用有物理变量吗？例如在以下代码中：

```
void scalewindowsize (HWND &ownerwin, HWND &childwin)
{
  char buffer[100];
  snprintf (buffer, 100,"%d", (intptr_t)&ownerwin);
  MessageBox (NULL, buffer, "fail", NULL);
  return;
}
scalewindowsize(somewindow, irrelevantwindow);
return; 
```

对 & ownerwin`snprintf`的调用会返回变量 somewindow 的地址吗？或者它会将地址返回给变量ownerwin？如果它会返回 somewindow 的地址，但引用的参数确实仍然创建自己的变量，我该如何访问它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:08:35.247

它将返回两者，因为`somewindow`和`ownerwin`是相同的。这就是引用（别名，具有不同名称的同一个对象），这就是引用传递的作用。

当然，这里有一个微妙之处，如果 case`HWND`没有与 相同的对齐方式`int`，在这种情况下，强制转换将返回不同的地址，但两者的地址仍然相同（尽管不太可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:08:23.987

它会将地址返回给变量`somewindow`（在转换之前）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:10:12.720

引用只是现有对象的别名，它没有自己的存储空间。取 ownerwin 的地址返回 ownerwin 引用的 HWND 对象的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:10:27.203

`&ownerwin`和的指针地址相同`&somewindow`。

# regex - 如何使用正则表达式格式化列表

> ID：14139527
> 
> 赞同：2
> 
> 时间：2013-01-03T13:04:41.027
> 
> 标签：regex, macos, shell, sed

我无法弄清楚如何使这项工作：

我有：

`icon-braille icon-bookmark-empty icon-blogger icon-adult icon-address-book`

而且我要：

`'icon-braille','icon-bookmark-empty','icon-blogger','icon-adult','icon-address-book'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:13:27.410

这是`OSX`友好的`sed "s/ /','/g;s/^/'/;s/$/'/"`：

```
$ echo "icon-braille icon-bookmark-empty" | sed "s/ /','/g;s/^/'/;s/$/'/" 
'icon-braille','icon-bookmark-empty' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:11:10.243

使用 shell 和 sed：

```
echo "'"$(sed "s/ /','/g")"'" 
```

例子：

```
$ echo "'"$(sed "s/ /','/g")"'"
icon-braille icon-bookmark-empty icon-blogger icon-adult icon-address-book
'icon-braille','icon-bookmark-empty','icon-blogger','icon-adult','icon-address-book' 
```

第一行被插入，第二行——产生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:14:13.497

```
 $ echo "icon-braille icon-bookmark-empty icon-blogger icon-adult icon-address-book" | sed -e "s/ \+/','/g" -e "s/^/'/" -e "s/$/'/"
'icon-braille','icon-bookmark-empty','icon-blogger','icon-adult','icon-address-book' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:03:32.010

您可以只使用外壳（假设是 bash）

```
$ list="icon-braille icon-bookmark-empty icon-blogger icon-adult icon-address-book"
$ result=""; sep=""
$ for word in $list; do result+=$sep\'$word\'; sep=,; done
$ echo "$result"
'icon-braille','icon-bookmark-empty','icon-blogger','icon-adult','icon-address-book' 
```

# javascript - 如何在事件的不同 div id 之间显示和切换

> ID：14139528
> 
> 赞同：0
> 
> 时间：2013-01-03T13:04:41.470
> 
> 标签：javascript, html

```
<a id="link1" href="javascript:display('show', 1)">Show</a>

<div id="list1" style="display:none">
VIDEO 1</br>
VIDEO 2</br>
VIDEO 3</br>
</div>
<div id="list2" style="display:none"> 
VIDEO 4</br>
VIDEO 5</br>
VIDEO 6</br>
</div> 
```

当我单击“显示”时，我想显示列表 1。

当我再次单击“显示”时，它必须显示列表 2，而列表 1 将消失/隐藏。

这是我要用于它的 Javascript 代码：

```
function display(action, id)
{
    document.getElementById("List"+id).style.display = "block";
    document.getElementById("link"+id).innerHTML = "MoreVideo";
    action = "freezes";
    document.getElementById("link"+id).onclick=action = "show";

    if(action == "show")
    {
        document.getElementById("List"+id).style.display = "none";
        id = id+ 1;
        document.getElementById("List"+id).style.display = "block";
    }
} 
```

该代码只会显示列表 2...我不知道为什么。

是的，我对 Javascript 很陌生，但我在 PHP 之前做过，但它看起来不像 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:08:27.537

这应该适合你：

去掉 id 参数：

```
<a id="link1" href="javascript:display('show')">Show</a> 
```

```
var id = 2;
function display(action) {
    var div = document.getElementById("List"+id); // Don't 'get' the div that often, save it to a temporary variable.
    div.style.display = "block";
    div.innerHTML = "MoreVideo";
    // action = "freezes"; <-- You're setting `action` to "freezes", preventing the if below from executing
    // div.onclick = action = "show"; <-- That's not valid js

    if(action == "show") {
        div.style.display = "none"; // Hide the current div.
        id = (id === 1)? 2 : 1;      // Set the ID to that of the other div.
        document.getElementById("List"+id).style.display = "block"; // Show the other div.
    }
} 
```

那么，这是什么`id = (id === 1)? 2 : 1;`？

它是以下的简写：

```
if(id === 1){
    id = 2;
}else{
    id = 1;
} 
```

这在和`id`之间切换；`1``2`

# plsql - oracle 报告中的 PL/SQL，增量不起作用

> ID：14139531
> 
> 赞同：0
> 
> 时间：2013-01-03T13:04:48.053
> 
> 标签：plsql, oraclereports

在我的回答中，有 2 行与“。”不同。并将因此打印出来，并应增加“myCounter”。
但是在 myCounter 中的两个打印输出中 1 都没有增加......

```
function R_G_cnFormatTrigger return boolean is
myCounter number :=0;
begin
  -- Automatically Generated from Reports Builder.
  if (mod(myCounter,2) = 0)
  then
    srw.set_foreground_fill_color('gray8');
    srw.set_fill_pattern('solid');
  else
    srw.set_foreground_fill_color('');
    srw.set_fill_pattern('transparant');
  end if;
 if(:CP_WAYBILL_NO <> '.')
    then
        myCounter:=(myCounter+1);
        srw.message(123,'myCounter:'||myCounter);
        return true;
    else
        return false;
 end if;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:21:47.013

当你打印`myCounter`它时，它总是等于`1`，对吧？这是因为你`return true;`在结尾`if(:CP_WAYBILL_NO <> '.')`。

当您`return`在函数中使用时，它会中断执行。`myCounter`是一个局部变量，所以它的值不会被记住。

`myCounter`您可以尝试使用全局变量创建包或`myCounter`从/向临时表读取/写入。

# java - 如何使用 FutureTask 处理超时？

> ID：14139534
> 
> 赞同：2
> 
> 时间：2013-01-03T13:04:50.830
> 
> 标签：java

我有这个令人沮丧的问题：我正在尝试查看下面的代码中是否引发了 TimeoutException，但这从未发生过。它总是打印当前时间 5 次并完成。

```
class MyTask1 implements Callable<Void> {  

    public Void call() throws Exception {  
        for (int i=0; i < 5; i++) {
            System.out.println(new java.util.Date());
            Thread.sleep(1000);
        }
        return null;
    }  
}

public class Timeout {
    public static void main(String[] args) throws Exception {
        FutureTask<Void> futureTask = new FutureTask<Void>(new MyTask1());
        futureTask.run();
        try {
            futureTask.get(1000, TimeUnit.MILLISECONDS); // Check if FutureTask completed in the given time
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        } catch (TimeoutException e) {
            futureTask.cancel(true);
            e.printStackTrace();
        }   
    }
} 
```

我正在使用`Thread.sleep(1000)`该`call()`方法至少需要 5 秒（因为它使用 for 循环完成了 5 次）。我`get()`通过将超时值设置为 1 秒来调用方法。

但是为什么它不抛出 TimeoutException 呢？

这可能是[如何让 FutureTask 在 TimeoutException 之后返回？](https://stackoverflow.com/questions/1281237/how-do-i-get-futuretask-to-return-after-timeoutexception)

但是，如果有人可以提供帮助，那真的很令人沮丧。或者我不明白如何使用 FutureTask 来处理超时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:10:40.980

您需要在单独的线程上运行 FutureTask（例如使用 Executor）。您当前正在同一个线程中运行它，因此在完成`get()`之前不会发生调用`run()`。

更新：

如果您需要有关 Java 线程的帮助，请参阅 oracle 文档中的精彩[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

# winforms - 使用 msdeploy 创建用于安装网站的 Winform 应用程序？

> ID：14139537
> 
> 赞同：1
> 
> 时间：2013-01-03T13:04:56.393
> 
> 标签：winforms, web-deployment

我正在创建一个 winform 应用程序，用于使用 msdeploy 将网站部署到 IIS 7。我的表单上有三个文本框，名为 txtName、txtPort 和 txtSelectedFile。这两个文本框中的输入用于创建命令。以下是字符串连接：

```
string command = "\"%PROGRAMFILES%\\IIS\\Microsoft Web Deploy\\msdeploy.exe\" -verb:sync 
                 -presync:runCommand=\"md %SystemDrive%\\inetpub\\wwwroot\\" + txtName.Text.Trim() + 
                 " & %systemroot%\\System32\\inetsrv\\appcmd add site /name:" + txtName.Text.Trim() + 
                 " /id:22 /bindings:http/*:" + txtPort.Text.Trim() + ": /physicalPath:%SystemDrive%\\inetpub\\wwwroot\\" + 
                 txtName.Text.Trim() + " \" -source:package=" + txtSelectedFile.Text + 
                 " -dest:contentPath=%SystemDrive%\\inetpub\\wwwroot\\" + txtName.Text.Trim(); 
```

我正在使用 ProcessStartInfo 来运行命令。但是网站没有安装。但是，如果我放置一个调试器并捕获名为 command 的变量中的文本并使用命令提示符手动执行它，则该网站将被部署。

# c# - 性能计数器丢失

> ID：14139538
> 
> 赞同：2
> 
> 时间：2013-01-03T13:05:03.513
> 
> 标签：c#, windows, performancecounter

我的问题是某些性能计数器类别有时似乎会丢失，我不明白为什么。

下面的代码将抛出异常，如下所示：

未能查找性能类别

> 错误消息：类别不存在。类别名称：HP EVA 物理磁盘
> 组目标上的类别列表：
> ServiceModelService 4.0。
> 呜呜呜

打印输出包含一长串性能计数器，但不是我想要的。如果我查看 perfmon.exe，我可以找到丢失的类别一次。

我正在使用以下代码来查找类别中的不同计数器。

```
public static string[] GetPerformanceCategory(string CategoryName)
{
    //Console.WriteLine("CategoryName to Search for: " + CategoryName);
    if (string.IsNullOrEmpty(CategoryName))
        throw new NullReferenceException("CategoryName is empty");

    try
    {
        PerformanceCounterCategory perfCat = new PerformanceCounterCategory(CategoryName);

        string[] catInstances = perfCat.GetInstanceNames();
        return catInstances;
    }
    catch(Exception Ex)
    {
        StringBuilder ErrorMsg = new StringBuilder();
        ErrorMsg.AppendLine("Failed to lookup Preformance Category");
        ErrorMsg.AppendLine("Error Msg: " + Ex.Message);
        ErrorMsg.AppendLine("CategoryName: " + CategoryName);
        ErrorMsg.AppendLine("Category list on target:");

        StringBuilder CatList = new StringBuilder();
        var categories = PerformanceCounterCategory.GetCategories();
        foreach (var Cat in categories)
            CatList.AppendLine(Cat.CategoryName);                

        ErrorMsg.AppendLine(CatList.ToString());

        Logger.WriteToLog(ErrorMsg.ToString(), EventLogEntryType.Error);
        return null;
    }      
} 
```

问题归结为，是否有一些“魔法”可以让性能计数器消失？或者也许我需要做一些具体的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T10:27:24.030

我遇到了完全相同的问题，这就是我解决它的方法：

服务器架构（x86 或 x64）和 .net (c#) 构建目标必须相同，否则您的代码无法访问所有性能计数器（如果您的构建目标和服务器不同，则只有一部分性能计数器可用）。

因此，在 Visual Studio 中，右键单击您的项目（在解决方案资源管理器中），然后选择“属性”，然后转到“构建”并选择 x64 作为平台目标（如果您的服务器是 x64，否则选择 x86）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-30T13:41:58.153

更具体一点，您可以检查您的事件查看器并查找 PerfLib 事件。

就我而言，它们被标记为错误。

然后，环顾四周后，我发现了上面解释的两个命令。就我而言，问题出在 perfOS 上。（您可以随时运行`lodctr /q:Perflib`以检查禁用的内容。

然后，运行： lodctr /e:perfOS （或更改 perfOS 以禁用任何服务）

那会做（至少它对我有用）

TLDR：以管理员`/q:perfOs`身份运行 lodctr`lodctr /e:perfOS`

# android - 检测点击灰色单选按钮

> ID：14139541
> 
> 赞同：0
> 
> 时间：2013-01-03T13:05:17.833
> 
> 标签：android

我的应用程序中有一个活动，用户可以在其中选择一些项目，其中一些是免费的，一些是必须购买的。非免费且尚未购买的物品显示为灰色 - 但我想安排一些事情，如果用户尝试选择其中一件灰色的物品，我会检测到这一点并将用户直接带到我的“商店”活动。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:09:24.653

当您实际上不禁用复选框但提供一个看起来像禁用复选框的自定义可绘制对象时，您可以实现这一点。也许您也可以通过设置滤色器或类似方法来实现变灰的外观。

# jquery - TR 表中的测试复选框

> ID：14139543
> 
> 赞同：1
> 
> 时间：2013-01-03T13:05:20.550
> 
> 标签：jquery

我在表格 TR TD 中有一个输入复选框。我捕获对 TR 的单击以执行 stuff_1，但如果我单击复选框，我想执行 stuff_2（而不是 stuff_1）：

HTML：

```
<table>
<TR class="tr">
<TD><INPUT TYPE="CHECKBOX" class="checkbox"></TD>
<TD> Click me 1 to expand</TD>
</TR>

<TR class="tr">
<TD><INPUT TYPE="CHECKBOX" class="checkbox"></TD>
<TD> Click me 2 to expand</TD>
</TR>
</table> 
```

查询：

```
$(".tr").click(function(){
  //Here I would like to do STUFF_1

});

$(".checkbox").change(function() {
  //Here I would like to do STUFF_2

}); 
```

但是每次我单击复选框时，它都会执行 STUFF_1 .... 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:06:49.403

你可以这样做 ：

```
$(".checkbox").click(function(e) {
   e.stopPropagation();
   // do your stuff
}); 
```

[示范](http://jsfiddle.net/vERxc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:12:29.077

尝试以下操作：

```
$(".tr").click(function(e){
  if(e.target.nodeName == "INPUT") return false;
  // do stuff 1     
});

$(".checkbox").change(function() {
    // do stuff 2    
}); 
```

# google-maps - googlemaps 信息窗口弹出不加载动态内容

> ID：14139556
> 
> 赞同：0
> 
> 时间：2013-01-03T13:06:57.257
> 
> 标签：google-maps, infowindow

请帮我解决这个问题。我有以下带有工作地址变量的代码。我尝试向 Infowindow 添加标题，以便当用户单击地图上的标记以查看弹出窗口中的某些内容时。不幸的是，对于所有弹出窗口，我可以看到相同的标题。我测试过，它是一个正确的 js 数组，但只显示来自数组的第一个标题..请帮助解决这个问题..提前谢谢你们！

```
<script type="text/javascript" charset="utf-8">    
var map;
var address = < ? php echo json_encode($adr); ? > ;
var titles = < ? php echo json_encode($ttl); ? > ;
var x = 0;
var nbAddresses = address.length;
var geocoder;
var mark;
var contentString = titles[x];

function init() {
    var moptions = {
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map"), moptions);
    geocoder = new google.maps.Geocoder();
    for (var i = 0; i < nbAddresses; i++) {
        geocoder.geocode({
            'address': address[i]
        }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                mark = new google.maps.Marker({
                    position: results[0].geometry.location,
                    map: map,
                    title: titles[x]
                });
                map.setCenter(results[0].geometry.location);
                x++;
                setInfoWindow();
            }
        });
    }

    function setInfoWindow() {
        google.maps.event.addListener(mark, 'click', function(event) {
            var iwindow = new google.maps.InfoWindow();
            iwindow.setContent(contentString);
            iwindow.open(map, this);
        });
    }
}
window.onload = init;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:19:55.000

改变
x++;
设置信息窗口（）；至

```
setInfoWindow();
x++;   
sets the problem ! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:25:51.717

在程序开始时，您将 contentString 设置为标题数组中的第一个元素

```
var contentString = titles[x]; 
```

然后你在 setInfoWindow 函数中使用这个变量不变。

如果您将 setInfoWindow 更改为像这样接受 contentString 参数怎么办

```
function setInfoWindow(contentString) {... 
```

调用 setInfoWindow 时，传入标题。

```
setInfoWindow(title[x]); 
```

确保在调用此函数后增加 x，因此将 x++ 移动到 setInfoWindow 调用下方。

编辑您还会不时注意到一个奇怪的问题，即某些标题可能出现在错误的标记上。这是因为您同时执行多个地理编码，并且您可能会得到无序的响应。

以下修改将解决该问题。

```
for (var i = 0; i < nbAddresses; i++) {
    geocoder.geocode({
        'address': address[i]
    }, return function(x) {  // we define a function and call it straight away. The function returns another function which is our callback.
        function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                mark = new google.maps.Marker({
                    position: results[0].geometry.location,
                    map: map,
                    title: titles[x]
                });
                map.setCenter(results[0].geometry.location);
                setInfoWindow();
             }
         }
    }(i)); // (i) after the function declaration calls the function and passes in the current value of i
} 
```

所以基本上我们在这里所做的是定义一个函数并使用传入的“i”的当前值立即运行它。然后该函数将返回另一个函数。一旦 goecoding 完成，此函数将运行。但是现在我们有了对“i”的引用，就像定义函数时一样。因此，您不再需要在此函数之外保留 x 的记录，因为 x 将等于 i，这与传递给地理编码器的地址相对应。

这称为闭包。 [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

# android - ListView 中的三个状态检查 TextView

> ID：14139557
> 
> 赞同：1
> 
> 时间：2013-01-03T13:07:24.263
> 
> 标签：android, android-listview, textview

我需要一个具有三种状态（基本上是“忽略”、“包含”和“排除”）的 CheckedTextView，所以我构建了自己的视图并且它可以工作。但是我想将我的 ThreeStateTextView 嵌入到 ListView 中，这不起作用。

ListView 回收视图并且状态丢失。所以我查看了 ListView 代码，看看它如何处理来自 CheckedTextView 的状态：

```
... setupChild(...) {
...
if (mChoiceMode != CHOICE_MODE_NONE && mCheckStates != null) {
    if (child instanceof Checkable) {
        ((Checkable) child).setChecked(mCheckStates.get(position));
    }
}
.... 
```

所以看起来，ListView 存储了一个布尔数组，代表状态。孩子要么是新创建的孩子，要么是回收的孩子。

我的想法是在我自己的 listview 实现中重新实现这个方法，但是这个方法是私有的，所以我不能这样做。这是堆栈跟踪，从 BaseAdapter.getView(...) 开始：

```
xxxxxxAdapter.getView(int, View, ViewGroup) line: 50    (my own BaseAdapter implementation)
ListView(AbsListView).obtainView(int, boolean[]) line: 2159 
ListView.makeAndAddView(int, int, boolean, int, boolean) line: 1831 
ListView.fillDown(int, int) line: 674   
ListView.fillFromTop(int) line: 735 
ListView.layoutChildren() line: 1652    
ListView(AbsListView).onLayout(boolean, int, int, int, int) line: 1994  
ListView(View).layout(int, int, int, int) line: 14003   
ListView(ViewGroup).layout(int, int, int, int) line: 4375 
```

太糟糕了，重要的方法（obtainView 和 setupChild，在获取视图之后立即调用）是私有/默认访问修饰符。

我该怎么做才能使我的三种状态的已检查文本视图在 ListView 中工作？

// 编辑：也许我应该改写我的问题：你有一个 ListView 和你自己的 BaseAdapter 实现，但是你的适配器创建了复杂的视图或使用了 convertView 参数（例如，它创建了一个带有 TextView 和两个复选框的线性布局）。问题是 ListView 不保存复选框的状态。

这是示例布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView android:id="@+id/textview_name" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <CheckBox android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <CheckBox android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:46:47.837

> 你会如何解决这个问题？

没有什么可以阻止您在适配器级别“保持”数组/列表中的行状态。对于您`ThreeStateTextView`，您可以拥有一个带有,并代表您的三个状态`ArrayList`的对象。然后您需要通过查看前一个将 设置为正确（在适配器的方法中）状态。当一行中的 a 的状态发生变化时，您还需要更新它。`Boolean``null``Boolean.TRUE``Boolean.FALSE``ThreeStateTextView``getView``ArrayList``ArrayList``ThreeStateTextView`

# objective-c - 在情节提要中创建独立视图以编程方式使用

> ID：14139564
> 
> 赞同：16
> 
> 时间：2013-01-03T13:07:41.830
> 
> 标签：objective-c, ios, xcode, uistoryboard

我正在尝试`UIView`使用情节提要创建和设计一个，但以`UIActionSheet`编程方式将其包含在其中。这基本上是为了避免使用带有像素的CoreGraphics定位函数

在旧的 xcode 中，我记得可以在没有任何控制器的情况下将 UIView 拖到笔尖上。

视图显然必须连接到类，所以它会有一个 IBOutlet，但不会被添加到`self.view`

让我觉得这应该是可能的一件事是，如果您将 UIView 拖到情节提要中的控制器黑条中，它会像这样弹出到位：

![在 UIView 中捕捉](../Images/d35c00289738b3e12c106f9ca2f3b3c5.png)

但它没有显示在屏幕本身上。这个功能有什么用？我可以以某种方式打开这个视图并设计一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T13:12:41.070

只需创建一个新的 .xib 文件。

1.  右键单击导航器区域中的某处并选择“新建文件...”。
2.  从右侧列表中选择“用户界面”，然后选择“查看”。
3.  单击“下一步”、“下一步”，为您的新视图命名，然后“创建”。
4.  一个新的 .xib 填充将添加到您的项目中。
5.  双击新的 .xib 文件，它会在 Interface Builder（不是 Storyboard）中打开。
6.  根据自己的喜好编辑/设计您的视图。

然后在 Interface Builder 中获得新视图 (.xib) 后，只需创建 UIView 的新子类（*例如 MyView*），将新视图 (.xib) 的类切换到 MyView，创建MyView 在您的控制器中，并将其作为子视图添加到您的其他视图中。

* * *

*为了回答您关于底部***那个小黑条***的问题，它被称为“Dock”，它只是您场景的顶级文档的迷你表示。该扩展坞便于快速将图标拖放到上面并建立连接。[在此处](http://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/Storyboard.html)查看苹果的故事板描述。[Ray Wenderlich 在这里](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)有一个易于理解的故事板教程。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T13:38:06.037

故事板上不能有 a 的`UIView`外部`UIViewController`。我猜这是因为故事板不知道如何识别或实例化当前的 API。这是我自己用过的东西。解决方案是只使用一个 XIB`UIView`并以编程方式加载它（就像以前一样）。我发现对大多数项目使用情节提要，而将 XIB 用于跨多个视图控制器的可重用视图确实可以很好地协同工作。

这是我用来加载 XIB 作为自定义对象的一部分的一些代码，该对象被初始化。

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [[[NSBundle mainBundle] loadNibNamed:@"BannerView" owner:self options:nil] objectAtIndex:0];
        [self addSubview:self.view];
        self.frame = self.view.frame;
    }
    return self;
} 
```

至于将视图拖到故事板上的黑条中。这些视图仍然是 的一部分`UIViewController`，但它们不是顶级视图的“子视图”。我认为文档大纲很好地显示了层次结构。

以下视图在我的主视图层次结构之外有 2.1.1 视图、2.1.2 视图等，因为它们不是我的主视图的子视图。结果是，默认情况下它们不会显示。我确实有`IBOutlets`设置，我有条件地使用标准`addSubview:`和`removeFromSuperview`.

![IB 文件大纲示例](../Images/e7cf97f3af16e03cf2ebb081f1371c59.png)

# css - 我可以将适用于不同浏览器的样式合并到一个 CSS 中吗？

> ID：14139570
> 
> 赞同：0
> 
> 时间：2013-01-03T13:08:19.213
> 
> 标签：css

我的皮肤有以下 CSS：

```
dl.definition dd:last-child {
    margin-bottom: 0;
}
/* IE class */
dl.definition dd.last-child {
    margin-bottom: 0;
} 
```

即使第二个仅用于 IE，是否可以将它们组合成一个？

感谢大家的回答，但我不确定是否有人真的说过我是否可以这样做：

```
dl.definition dd:last-child, 
dl.definition dd.last-child {
    margin-bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:10:38.357

在 **HTML**中添加

```
<!--[if IE]>    
<style>
    dl.definition dd.last-child {
       margin-bottom: 0;
    }
</style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:07:30.173

您希望的解决方案不起作用：

```
dl.definition dd:last-child, 
dl.definition dd.last-child {
    margin-bottom: 0;
} 
```

这不起作用的原因是，就旧版本的 IE 而言，`dd:last-child`它是一个无效的选择器，因此它将丢弃整个块。它也包含一个有效的选择器并不重要；由于无效的，整个东西都被扔掉了。

关于如何改进的一些选项，并为自己省去到处重复代码的麻烦......

1.  升级 IE。有一些可用的 JavaScript 库，例如[Selectivizr](http://selectivizr.com/)或[ie7.js/ie8.js/ie9.js](http://code.google.com/p/ie7-js/)，它们对 IE 进行了修补以使其支持更多的 CSS 选择器。`:last-child`几乎包含在所有这些库中。

2.  降级你的 CSS。您已经在`.last-child`代码中编写了该类以支持旧的 IE 版本，因此只需将其用于所有内容并忘记使用`:last-child`选择器。然后，您只需要一个适用于所有浏览器的选择器。

3.  优雅的退化。删除特定于 IE 的代码，只允许旧 IE 用户看到稍微损坏的页面。只要它不影响可用性，它可能没什么大不了的。您可能没有那么多旧的 IE 用户（并且数量将继续下降），而那些仍在使用旧 IE 的人已经习惯于看到这些天稍微损坏（或更糟）的网站。

4.  重新安排您的布局以使用`:first-child`而不是`:last-child`. `:first-child`有更好的支持（它可以追溯到 IE7，尽管在旧 IE 中存在错误）。

5.  使用像[SASS 或 Less](http://css-tricks.com/sass-vs-less/)之类的 CSS 编译器，这样您就可以在将 CSS 部署到站点时将其转换为真正的 CSS 代码之前，以更合乎逻辑和结构化的形式编写您的 CSS。

希望其中一种解决方案对您有用。我的建议是 Selectivizr 库，但以上任何一个都应该为您提供一个可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:30:05.127

不是您问题的确切答案，但可以在[此处](http://www.edgeofmyseat.com/blog/all/developing-css-for-ie6-and-7)找到 IE6 和 IE7 的解决方法，它告诉您可以在单个 css 文件中使用属性。

[这](http://24ways.org/2005/avoiding-css-hacks-for-internet-explorer/)再次给出了更复杂的解决方案。

同样，您可以在单个 css 文件中使用多个属性，如果它不理解它，浏览器将忽略它。为浏览器的日益智能干杯。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:47:21.863

[IE 的条件注释](http://www.quirksmode.org/css/condcom.html)。您可以指定 IE 的版本，因为您要选择 CSS

# c# - 从任务栏打开 Winform

> ID：14139576
> 
> 赞同：2
> 
> 时间：2013-01-03T13:08:36.917
> 
> 标签：c#, winforms, system-tray

我有一个 Winform，它最初在启动时隐藏。

此后，用户可以自由单击底部的通知图标并根据需要显示它，当它最小化时需要返回系统托盘。

它在托盘中很好地开始 - 没问题。当您第一次单击以显示它时，虽然它出现了，然后有几分之一秒看起来它正在消失，然后又回来了。所以它看起来有点闪烁。

然后，当您将其最小化时，它会按原样进入系统托盘，这很好。当您单击以再次显示它时（在您完成一次之后的任何时间）它会从系统托盘或任务栏滑入，我希望它只是出现，没有小动画。

```
public class Program : Form
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Program());
    }

    private NotifyIcon trayIcon;
    private ContextMenu trayMenu;

    public Program()
    {
        trayMenu = new ContextMenu();
        trayMenu.MenuItems.Add("Exit", OnExit);
        trayMenu.MenuItems.Add("Show", OnShow);
        trayIcon = new NotifyIcon();
        trayIcon.Text = "MyTrayApp";
        trayIcon.Icon = new Icon(SystemIcons.Application, 40, 40);
        trayIcon.ContextMenu = trayMenu;
        trayIcon.Visible = true;
    }

    protected override void OnLoad(EventArgs e)
    {
        Visible = false;
        ShowInTaskbar = false;
        base.OnLoad(e);
    }

    protected override void OnResize(EventArgs e)
    {
        if (this.WindowState == FormWindowState.Minimized)
        {
            Visible = false;
            ShowInTaskbar = false;
        }
        base.OnResize(e);
    }

    private void OnExit(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void OnShow(object sender, EventArgs e)
    {
        Visible = true;
        ShowInTaskbar = true;
        TopMost = true;
        WindowState = FormWindowState.Normal;
    }

    protected override void Dispose(bool isDisposing)
    {
        if (isDisposing)
        {
            trayIcon.Dispose();
        }
        base.Dispose(isDisposing);
    }
} 
```

任何关于如何让它正确显示的指示将不胜感激。

***更新***

我找到了闪烁的原因，它发生在`TopMost`最后设置时，在显示之后，所以它在顶部重新绘制它，这是有道理的。

所以就目前而言，它只是让它在没有动画的情况下出现和消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:29:11.323

编辑：您应该只在 中设置`Visibility`属性`Onload()`，只需使用`Show()`and`Hide()`来避免动画，并确保`WindowState`相应地更改。

我将您的代码放入常规`Form`（不在 Program.cs 文件中）并删除了所有多余的代码。这就是我最终得到的结果，它没有显示“双重”动画。

```
public partial class Form1 : Form
    {
        private NotifyIcon trayIcon;
        private ContextMenu trayMenu;

        public Form1()
        {
            InitializeComponent();

            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Name = "Program";

            trayMenu = new ContextMenu();
            trayMenu.MenuItems.Add("Exit");
            trayMenu.MenuItems.Add("Show", FormShow);
            trayIcon = new NotifyIcon();
            trayIcon.Text = "MyTrayApp";
            trayIcon.Icon = new Icon(SystemIcons.Application, 40, 40);
            trayIcon.ContextMenu = trayMenu;
            trayIcon.Visible = true;
            TopMost = true;
            Resize += new EventHandler(Form1_Resize);
        }

        void Form1_Resize(object sender, EventArgs e)
        {
            if (WindowState == FormWindowState.Minimized)
            {
                ShowInTaskbar = false;
                Hide();
                trayIcon.Visible = true;
            }
        }

        void FormShow(object sender, EventArgs e)
        {
            if (WindowState == FormWindowState.Minimized)
            {
                WindowState = FormWindowState.Normal;
            }
            ShowInTaskbar = true;
            Show();
            Focus();
            trayIcon.Visible = false;
        }

        protected override void OnLoad(EventArgs e)
        {
            Visible = false;
            ShowInTaskbar = false;
        }
    } 
```

# rest - 寻找Java的OAUTH开源jar

> ID：14139579
> 
> 赞同：-2
> 
> 时间：2013-01-03T13:08:49.060
> 
> 标签：rest, oauth, java

我已经在 tomcat 7 上使用 war 发布了一个 java REST API，我正在寻找一个易于部署的开源 OAUTH 代码，我可以将其添加到我的代码中（最好使用 maven POM）并使用它来保护 API。

我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:27:10.853

您看过[Google 的 OAuth Java 客户端](http://code.google.com/p/google-oauth-java-client/wiki/Setup)吗？文档说您可以使用 Maven 将其添加到您的代码中。

# c++ - 是否有可用于不需要安装的 unix 平台的良好 c++ 记录器

> ID：14139584
> 
> 赞同：1
> 
> 时间：2013-01-03T13:09:09.683
> 
> 标签：c++, logging

我正在寻找一个不需要在机器上安装库的 unix 平台上的 c++ 日志库。类似于用于 xml 解析的 pugixml 库的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:13:40.540

您可以始终使用标准`syslog`C API。如果您需要更复杂的功能，您还可以考虑[log4cpp](http://log4cpp.sourceforge.net/ "日志4cpp")。

编辑：似乎我混淆了 log4cpp 与来自 apache 的 log4cxx 不活动。但他们似乎都做得很好。[日志4cxx](http://logging.apache.org/log4cxx/index.html)

另请参阅以下问题以获取替代方案：[log4cpp 入门](https://stackoverflow.com/questions/2209134/getting-started-with-log4cpp-in-windows)

# blogengine.net - 安装 WRGprettyPhoto BlogEngine.NET 扩展时出错

> ID：14139585
> 
> 赞同：1
> 
> 时间：2013-01-03T13:09:17.800
> 
> 标签：blogengine.net

大家好，我的 BlogEngine.NET 存在一些扩展问题，我试图找到一个合理的原因，但我失败了，例如这个扩展 [http://wellroundedgeek.com/post/2010/05/26/每当将WRGprettyPhoto.aspx](http://wellroundedgeek.com/post/2010/05/26/WRGprettyPhoto.aspx)上传到扩展文件夹时，我都会收到此错误页面：

[http://i48.tinypic.com/73m8wi.png](http://i48.tinypic.com/73m8wi.png)

请注意，我在 asphostportal 上托管我的博客，但我的域来自 godaddy

这个你能帮我吗 ...

# r - 如何从大型数据集中优化子集？

> ID：14139586
> 
> 赞同：4
> 
> 时间：2013-01-03T13:09:17.790
> 
> 标签：r

我有这个金融交易数据集，它很大但足够小，可以保存在内存中。

```
R> str(trans)
'data.frame':   130000000 obs. of  5 variables:
 $ id    : int  5 5 5 5 6 11 11 11 11 11 ...
 $ kod   : int  2 3 2 3 38 2 3 6 7 6 ...
 $ ar    : int  329 329 330 330 7 329 329 329 329 329 ...
 $ belopp: num  1531 -229.3 324 -48.9 0 ...
 $ datum : int  36976 36976 37287 37287 37961 36976 36976 37236 37236 37281 ... 
```

我需要遍历它，为每个唯一 ID 提取交易，并进行大量计算。问题是数据集的子集太慢了..

```
R> system.time(
+ sub <- trans[trans$id==15,]
+ )
   user  system elapsed 
   7.80    0.55    8.36

R> system.time(
+ sub <- subset(trans, id == 15)
+ )
   user  system elapsed 
   8.49    1.05    9.53 
```

由于这个数据集中有大约 10m 的唯一 ID，这样的循环将永远持续下去，有什么想法可以加快速度吗？

**编辑** 我已经涉足“data.tables”，索引和排序并没有太多运气..

```
library(data.table)
trans2 <- as.data.table(trans)
trans2 <- trans2[order(id)]
trans2 <- setkey(trans2, id)

R> system.time(
+ sub <- trans2[trans2$id==15,]
+ )
   user  system elapsed 
   7.33    1.08    8.41 

R> system.time(
+ sub <- subset(trans2, id == 15)
+ )
   user  system elapsed 
   8.66    1.12    9.78 
```

**EDIT2**太棒了。

```
R> system.time(
+ sub <- trans2[J(15)]
+ )
   user  system elapsed 
      0       0       0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:49:05.857

`Note:`该帖子已通过将计算的函数从更改为进行编辑`rowSums`（`colSums`在`lapply`data.table 的情况下使用）

我不认为你能比`data.table`. `plyr`这是和之间的基准`data.table`。当然，如果耗时的部分是您的功能，那么您可以使用`doMC`并行运行`plyr`（假设您有很多内核或者您在集群上工作）。否则，我会坚持`data.table`. 这是一个包含大量测试数据和虚拟函数的分析：

```
# create a huge data.frame with repeating id values
len <- 1e5
reps <- sample(1:20, len, replace = TRUE)
x <- data.frame(id = rep(1:len, reps))
x <- transform(x, v1 = rnorm(nrow(x)), v2 = rnorm(nrow(x)))

> nrow(x) 
[1] 1048534 # 1 million rows

# construct functions for data.table and plyr
# method 1
# using data.table
DATA.TABLE <- function() {
    require(data.table)
    x.dt <- data.table(x, key="id")
    x.dt.out <- x.dt[, lapply(.SD, sum), by=id]
}

# method 2
# using plyr
PLYR <- function() {
    require(plyr)
    x.plyr.out <- ddply(x, .(id), colSums)
}

# let's benchmark
> require(rbenchmark)
> benchmark(DATA.TABLE(), PLYR(), order = "elapsed", replications = 1)[1:5]
          test replications elapsed relative user.self
1 DATA.TABLE()           1  1.006     1.00    .992
2       PLYR()           1  67.755   67.351  67.688 
```

在具有 100 万行的 data.frame 上，`data.table`需要`0.992 seconds`. `data.table`使用比较的加速比`plyr`（诚然，在计算列总和上）是`68x`. 根据函数中的计算时间，这种加速会有所不同。但`data.table`仍然会更快。`plyr`是一种拆分应用组合策略。与使用 base 拆分、应用和组合自己相比，我认为您不会获得可比的加速。当然你可以试试。

我运行了 1000 万行的代码。`data.table`跑了 5.893 秒。`plyr`耗时 6300 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:03:52.143

为什么不使用拆分、应用和组合策略？

像这样的东西（没有样本数据我不知道这是否可行）：

```
fastsplit <- function (df) {
  lista <- split(seq(nrow(df)), df$id)
  return(lista)
}

# function to split the data frame into a list by id

lista_split <- fastsplit(trans)

# now, assuming that one of the calculations is, for instance, to sum belopp
# apply the function to each subset

result1 <- lapply(lista_split, function(.indx){

  sum_bellop = sum(trans$belopp[.indx])})

# combine stage
r1 <- do.call(rbind, result1) 
```

提供了上面的代码后，我想说如果你可以使用 SQL，它会更快更容易。也许 sqldf 包可以在这里帮助你？不过我从来没有尝试过。不知道快不快 SQL 中的代码非常简单。要执行与上面的 R 代码相同的操作，只需使用以下内容：

```
select id
       , sum(belopp) as sum_bellop from trans
group by id 
```

这将返回一个包含两列的表，id 和 belopp by id 的总和

# android - 安卓扩展文件

> ID：14139587
> 
> 赞同：4
> 
> 时间：2013-01-03T13:09:17.527
> 
> 标签：android, zip, apk, unzip, apk-expansion-files

我正在尝试做一个包含〜80mo PNG的应用程序（它是一个离线应用程序，所以我必须将它们存储在手机上）。

该应用程序在本地运行良好，但我无法上传 > 50mo 的 apk。所以我正在尝试实现一个包含我所有 PNG 的扩展文件。所以我在 Linux 上使用这个简单的命令：`_zip_ -0 _main.1.com.ctai.irisst.zip_ *_.png_`在我的 /res/drawable-mdpi 上创建我的扩展文件，然后手动将其放入`/Android/data/com.ctai.irisst/`
然后，我使用[此代码](https://stackoverflow.com/questions/7697466/unzip-a-zipped-file-on-sd-card-in-android-application)解压缩手机存储中的所有数据，但是当我开始该应用程序，我只有 10 秒的空白屏幕，然后 Android 告诉我该应用程序没有响应。我可以在文件资源管理器中看到大约 10 个 PNG 图像被解压缩，并且`Logcat`每秒提取 1 个文件。（如果我使用缓冲区，加载我的应用程序仍然需要 >20 秒）

我已经实现了以下库：

```
"downloader_library","licencing_library","Sample_downloader" and "zip_file" 
```

但我暂时并没有真正使用它。（我应该吗？怎么做？）

我的问题很简单，我怎样才能简单地创建一个扩展文件并使用我的图像而不影响用户体验？我没有找到这么多关于扩展文件的教程，也没有示例项目，所以我有点迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:34:45.677

你不需要解压缩你的包。您可以使用以下命令在扩展 ZIP 文件中读取所有 PNG：

```
// Get a ZipResourceFile representing a merger of both the main and patch files
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(appContext,
        mainVersion, patchVersion);

// Get an input stream for a known file inside the expansion file ZIPs
InputStream fileStream = expansionFile.getInputStream(pathToFileInsideZip); 
```

****编辑****

请注意，在上面的代码中，**InputStream**将指向 ZIP 存档中的**文件**，而不是 ZIP 文件本身。例如，如果您将*flower.png*放在 ZIP 存档中名为*background*的目录下，您可以对该文件有一个 InputStream，如下所示：

```
InputStream fileStream = expansionFile.getInputStream("background/flower.png"); 
```

****编辑****

我认为您放置 ZIP 文件的位置不正确。根据开发者指南：

> 如果你的包名是com.example.android，你需要在共享存储空间上创建目录Android/obb/com.example.android/。

测试成功后，您可以通过开发者控制台上传您的扩展 ZIP 和您的 APK。

您是否阅读过[APK 扩展文件](http://developer.android.com/google/play/expansion-files.html)？这很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T20:00:31.577

一些有用的信息对于最终出现在这篇文章中的人来说，因为有一些事情改变了 apk 扩展的工作方式，以及如果你使用 Android Studio 来使库工作。

**注1**

您不能再使用草稿，因为获取扩展文件的链接尚未激活。您必须先使用扩展文件将版本上传到 Alpha 或 Beta。（只能从您上传的第二个 apk 开始添加扩展文件）因此，请确保在单击 APK 下的开发者发布部分中的详细信息时看到列出的 apk 扩展文件。

**笔记2**

如果您使用的是 android studio 并且想要使用下载器库，请不要将包名和 java 文件复制到您自己的应用程序 src 目录中。在eclipse中导入下载器库，选择export => gradle build files。之后，您可以将库作为模块导入 android studio。

**注3**

不确定这一点，但我也认为有必要通过 Play 商店至少下载一次应用程序，并使用测试设备上的帐户访问它。因此，如果您正在使用 alpha，请创建一个 google+ 测试组并将您自己或其他测试设备添加到其中。

**顺便提一句**

使用这些库，很容易实现 apk 扩展下载，只需确保：

1.  您的活动（当下载尚未自动完成时，您想要实现下载扩展包的活动）实现 IDownloaderClient。

2.  您设置服务和接收器并将它们设置在您的清单中。

3.  服务类中的 BASE64_PUBLIC_KEY 是正确的。上传第一个 apk => 在您的应用程序下的开发人员控制台中查看服务和 API => 此应用程序的许可证代码。

此代码用于查看是否可以在设备上找到扩展文件：

```
boolean expansionFilesDelivered() {
    for (XAPKFile xf : xAPKS) {
        String fileName = Helpers.getExpansionAPKFileName(this, xf.mIsMain, xf.mFileVersion);
        Log.i(TAG, "Expansion filename " +fileName);
        if (!Helpers.doesFileExist(this, fileName, xf.mFileSize, false))
            return false;
    }
    return true;
} 
```

它使用 XAPKS 类，它代表一个扩展文件，无论是主文件还是补丁文件，具有一定的文件大小（字节）并与 apk 版本（它第一次添加的那个）相关联。

```
private static class XAPKFile {
        public final boolean mIsMain; // true
        public final int mFileVersion; //example 4
        public final long mFileSize; //example 126515695L
        // example => main expansion that was first introduced in apk version 4 and is 126515695 bytes in size

        XAPKFile(boolean isMain, int fileVersion, long fileSize) {
            mIsMain = isMain;
            mFileVersion = fileVersion;
            mFileSize = fileSize;
        }
    } 
```

使用 google 提供的 zip 工具（com.android.vending.zipfile）直接从扩展文件中读取电影文件和其他内容也很容易。

首先使用库中提供的方法获取扩展文件，参数是整数，代表你的主要扩展apk版本（你需要的扩展包首先添加的apk版本）和补丁apk版本。

```
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(context, APKX_MAIN_APK, APKX_PATCH_APK); 
```

**视频**

要直接从此 zipresourcefile 播放视频：

```
AssetFileDescriptor a = expansionFile.getAssetFileDescriptor(pathToFileInsideZip); 
```

现在从这个assetFileDescriptor你可以得到一个FileDescriptor并在你的媒体播放器中使用它，让你的媒体播放器播放视频的正确语法还需要第二个和第三个参数。无论是你可以从AssetFileDescriptor获得的起始偏移量和长度。

```
player.setDataSource(a.getFileDescriptor(), a.getStartOffset(), a.getLength()); 
```

**其他**

对于所有其他内容（如图像），您只需获取 zipresourcefile 的输入流：

```
expansionFile.getInputStream(pathToFileInsideZip);` 
```

还要确保您不压缩 zip 中的视频以使其正常工作！例如不压缩 .mp4 文件：

```
zip -n .mp4 -r zipfile.zip . -x ".*" -x "*/.*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T10:57:04.997

即使是 zip 文件，它仍然需要存储在 obb 文件夹中。

# javascript - 测量客户带宽

> ID：14139590
> 
> 赞同：1
> 
> 时间：2013-01-03T13:09:36.987
> 
> 标签：javascript, asp.net, html, flash

我使用移动产品，我想更深入地了解我的客户带宽。我更喜欢基于非闪存的解决方案，因为它不能在 iPhone 上运行。

我想过用 JS 编写一些定制的东西，下载一些字节并跟踪完成它的时间。

# jquery - 导航鼠标悬停时背景停电不频闪

> ID：14139591
> 
> 赞同：0
> 
> 时间：2013-01-03T13:09:53.650
> 
> 标签：jquery, navigation

我有一个导航，我想要一个类似于[selfridges](https://www.selfridges.com/)的背景停电。

我在[这里设置了基本功能](http://jsfiddle.net/Flakx/vbc3U/)

jQuery：

```
jQuery('<div class="backmask"></div>').insertAfter('.wrapper');

function removeBlack() {

jQuery('.nav-container').removeClass('navmask');
jQuery('.backmask').fadeOut(300);

}

function addBlack() {

jQuery('.nav-container').addClass('navmask');
jQuery('.backmask').fadeIn(100);

}

jQuery('.nav li').hover(addBlack, removeBlack); 
```

但是，当您将鼠标从一个元素移到另一个元素时，它会闪烁，而不仅仅是保持黑色背景完好无损。

我已经在 2 个函数中尝试了各种“if”语句，并且我一直到一个阶段，我认为是的，它几乎完成了，但是它又失败了。

ps 我不想将#nav li 更改为仅#nav，因为如果我的导航没有延伸导航的整个宽度，我不希望人们将鼠标悬停在空白空间中以使其背景变黑。

有任何想法吗？我只是缺少一个关键的 jquery 选择器吗？例如，将所有这些#nav li 视为一个元素？

谢谢。

＃＃＃编辑

由于 mornaner 的有用回答，这是我现在的代码：

```
jQuery('<div class="backmask"></div>').insertAfter('.wrapper');

function removeBlack() {

jQuery('.nav-container').removeClass('navmask');
jQuery('.backmask').fadeOut(200);

}

function addBlack() {

    jQuery('.nav-container').addClass('navmask');
    jQuery('.backmask').fadeIn(100);

}

jQuery('#pronav li').hover(function(){
 clearTimeout(jQuery(this).data('timeoutId'));
addBlack();
}, function(){
var nav = jQuery('#pronav li');
var timeoutId = setTimeout(function(){
    removeBlack();
}, 80);
//set the timeoutId, allowing us to clear this trigger if the mouse comes back over
nav.data('timeoutId', timeoutId);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:33:33.270

基于[这个答案](https://stackoverflow.com/a/1670561/966865)，我做到了：

```
jQuery('.nav li').hover(function(){
        clearTimeout($(this).data('timeoutId'));
        addBlack();
    }, function(){
        var someElement = $('.nav li');
        var timeoutId = setTimeout(function(){
        removeBlack();
    }, 150);
    //set the timeoutId, allowing us to clear this trigger if the mouse comes back over
    someElement.data('timeoutId', timeoutId);
}); 
```

[**演示**](http://jsfiddle.net/Fap5n/)

你可以调整超时时间，150ms我觉得很流畅，但是如果你觉得太长了可以调低。

# jquery - 2 个按钮没有执行任何功能

> ID：14139594
> 
> 赞同：0
> 
> 时间：2013-01-03T13:10:00.937
> 
> 标签：jquery, html, ajax

我有 2 个按钮，我想执行以下操作，但目前它什么也没做：

启用按钮：

*   按钮 onclick 将访问该`enableHandler()`功能，如果用户确认确认，则将用户导航到 `penaltymarks.php`页面。

禁用按钮：

*   按钮 onclick 将访问该`disableHandler()`功能，如果用户确认确认，则将用户导航到 `completes.php`页面，ajax 将 `completesession.php`在后台导航到页面。

我怎样才能让我的按钮执行上述操作，因为我目前拥有的代码没有发生任何事情。顺便说一句，我是否需要`<form>`标签，因为我的代码中没有包含表单标签。

```
<script type="text/javascript">

$(function() {   

    enableHandler() {
       if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
       {
         $.ajax({
           url: "penaltymarks.php",
           async: false,
           type: "POST"
         });
         return true;
      }
    };

});

$(function() {   

    disableHandler() {
       if (confirm("Are you sure you wish to disable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
       {
         $.ajax({
           url: "sessioncomplete.php",
           async: false,
           type: "POST"
         });
         return true;
      }
    };

});

</script> 
```

**更新：**

```
<table>
<tr>
<td><input type="button" id="enablePenalty" value="Enable Penalty Marks"/></td>
<td><input type="button" id="disablePenalty" value="Do Not Enable Penalty Marks"/></td>
</tr>
</table>

<script type="text/javascript">

 $('#enablePenalty').click(function () {
    if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
    {
      window.location = "penaltymarks.php",
      return true;
    }
 });

  $('#disablePenalty').click(function () {
       if (confirm("Are you sure you wish to disable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
    {
       $.ajax({
           url: "sessioncomplete.php",
           async: false,
           type: "POST"
         });
      window.location = "complete.php",
      return true;
    }
 });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:11:26.470

您根本没有将它们声明为函数，首先您必须这样做

```
$(function() {   

function enableHandler() {
   if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
   {
     $.ajax({
       url: "penaltymarks.php",
       async: false,
       type: "POST"
     });
     return true;
  }
};

}); 
```

然后你抓住按钮并准备事件处理程序。

```
$('.button').click(function(){
    enableHandler();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:12:55.193

您不使用 ajax 功能导航到新页面，`window.location`而是使用。

```
window.location = "penaltymarks.php", 
```

您还需要将代码挂钩以形成，使用 jQuery 您可以执行以下操作：

```
 $('#buttonID').click(function () {
    if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
    {
      window.location = "penaltymarks.php",
      return true;
    }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:27:49.200

这是您的完整工作代码：

```
$(function() {

    function enableHandler() {
        if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) {
            window.location = "penaltymarks.php";
            return true;
        }
    }

    function disableHandler() {
        if (confirm("Are you sure you wish to disable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) {
            $.when($.ajax({
                url: "sessioncomplete.php",
                async: false,
                type: "POST"
            })).then(window.location = "completes.php");
            return true;
        }
    }

    // Enable Button
    $('#button1').click(function() {
        enableHandler();
    });

    // Disable Button
    $('#button2').click(function() {
        disableHandler();
    });

});​ 
```

在`disableHandler`我使用的函数中[$.when](http://api.jquery.com/jQuery.when/)。这在这里用于等待 ajax 调用完成并在其完成跳转到`completes.php`页面之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:19:07.463

而是调用两个未命名的函数来在其中声明您的函数，请尝试使用以下语法：

```
$(document).ready( function(){

   function enableHandler() {
       if (confirm("Are you sure you wish to enable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
       {
         $.ajax({
           url: "penaltymarks.php",
           async: false,
           type: "POST"
         });
         return true;
       }
    };

  function disableHandler() {
   if (confirm("Are you sure you wish to disable Penalty Marks?" + "\n" + "(You cannot change your option once you have confirmed)" + "\n")) 
   {
     $.ajax({
       url: "sessioncomplete.php",
       async: false,
       type: "POST"
     });
     return true;
   }
  };

    //Here you can call functions
    $('#EnableButton').click( enableHandler());

}); 
```

# joomla1.7 - Joomla 1.7.2 模块配置

> ID：14139595
> 
> 赞同：1
> 
> 时间：2013-01-03T13:10:01.320
> 
> 标签：joomla1.7

我是 joomla 的初学者。我已经安装`joomla1.7.2`成功。之后我上传了一个模块名称`MOD_MIXCLOUD_WIDGET`。要启用模块，我去`extention => plugin-manager`并启用模块。

当我单击顶部的链接时，如何在主页中看到模块请有人帮助我`view-site`？

# c# - 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误

> ID：14139600
> 
> 赞同：1
> 
> 时间：2013-01-03T13:10:11.863
> 
> 标签：c#, asp.net, sql-server, nhibernate

我正在为我的 ASP.NET Web 应用程序使用 NHibernate、Persistence API 和 MYSql DB；我有以下 nhibernate 映射文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="JPUMain" transaction-type="RESOURCE_LOCAL">
    <provider>NPersistence.NHibernate.NHibernatePersistence</provider>   
    <class>JDAL.Impl.Entities.Answer</class>   
    <properties>
      <property name="connection.driver_class">NHibernate.Driver.MySqlDataDriver</property>
      <property name="connection.connection_string">Database=DBName;Data Source=localhost;User Id=root;Password=;Charset=utf8;</property>
      <property name="dialect">NHibernate.Dialect.MySQLDialect</property>
      <property name="query.substitutions">true=1;false=0</property>
      <property name="connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
      <property name="show_sql" value="true"/>
      <property name="hbm2ddl.keywords" value="none"/>
      <property name="hbm2ddl.auto" value="validate"/>
    </properties>
  </persistence-unit>
</persistence> 
```

现在我正在使用 ASP.NET 登录控件进行登录。当我在登录页面上提供无效凭据时，预期的行为是它不应该重定向到任何其他页面，并且在处理服务器端的代码后它应该在登录页面本身上显示一条错误消息。我已经调试了我的代码，并且服务器端处理似乎很好，但是在执行验证登录凭据是否正确的服务器端方法后，它的网站挂起。在超时时间之后，它会显示以下错误消息：

```
 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

SQLExpress database file auto-creation error:

The connection string specifies a local Sql Server Express instance using a database location within the application's App_Data directory. The provider attempted to automatically create the application services database because the provider determined that the database does not exist. The following configuration requirements are necessary to successfully check for existence of the application services database and automatically create the application services database:

    If the application is running on either Windows 7 or Windows Server 2008R2, special configuration steps are necessary to enable automatic creation of the provider database. Additional information is available at: http://go.microsoft.com/fwlink/?LinkId=160102\. If the application's App_Data directory does not already exist, the web server account must have read and write access to the application's directory. This is necessary because the web server account will automatically create the App_Data directory if it does not already exist.
    If the application's App_Data directory already exists, the web server account only requires read and write access to the application's App_Data directory. This is necessary because the web server account will attempt to verify that the Sql Server Express database already exists within the application's App_Data directory. Revoking read access on the App_Data directory from the web server account will prevent the provider from correctly determining if the Sql Server Express database already exists. This will cause an error when the provider attempts to create a duplicate of an already existing database. Write access is required because the web server account's credentials are used when creating the new database.
    Sql Server Express must be installed on the machine.
    The process identity for the web server account must have a local user profile. See the readme document for details on how to create a local user profile for both machine and domain accounts. 
```

我的第一个问题是，为什么它试图连接到 SQL Server？我没有在我的应用程序的任何地方使用 SQL Server！

我的第二个问题是，当我提供有效凭据时它工作正常，因为它会验证它们并成功重定向到下一页。此外，如果我提供无效凭据，它会处理服务器端方法以正确验证凭据，但之后它会挂起。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:25:48.730

该错误来自 Login 控件，默认情况下，该控件在您的 App_Data 目录中需要一个 MDF 数据库。

您需要更改您的成员资格提供程序以指向您的 MySQL 实例。

# css - 使用 css 检查单选按钮时影响 div

> ID：14139601
> 
> 赞同：0
> 
> 时间：2013-01-03T13:10:13.230
> 
> 标签：css, radio-button, selector, checked

我正在尝试创建一个**仅 CSS**选择的东西。我有一个带有三个单选按钮的容器。活动单选按钮必须放置在容器的中间（垂直）。单选按钮必须作为一个整体移动，这意味着如果选择顶部单选按钮，则其他两个必须在其下方隔开；如果选择了中间单选按钮，则其他单选按钮必须位于所选单选按钮的上方和下方。这很难解释，但听到的是我到目前为止所得到的。 [http://jsfiddle.net/PaulvdDool/ZwdUL/1/](http://jsfiddle.net/PaulvdDool/ZwdUL/1/)

在此示例中，蓝色按钮位于容器的中间。当我选择绿色按钮时，所有三个按钮都必须向下移动 125px（一个按钮的高度）。但我不能让它工作。

选中一个单选按钮时，我似乎无法影响其他单选按钮。我试图在按钮周围放置一个额外的容器并更改边距顶部，但我无法影响容器。

```
<div id="extracontainer">
<form>
<radiobutton 1 + label>
<radiobutton 2 + label>
<radiobutton 3 + label>
</form>
</div> 
```

我还尝试在按钮上方放置一个额外的 div 并更改高度，但我也无法影响这个 div。

```
<div id="spacer"></div>
<form radiobuttons> 
```

我猜我使用了错误的选择器，做错了其他事情，或者试图用**css**做一些不可能的事情。

任何**CSS**解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:27:41.240

你真正需要的是 jQuery 或其他一些 JavaScript 库（或者如果你是一个原生 js 怪胎，一个纯 JavaScript）。您需要捕获事件，然后更改要更新的相应元素的 CSS 属性。

在这一点上，根本不可能通过 CSS 做到这一点。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:48:26.257

这是可以做到的。这完全取决于具体情况以及文档结构。

我必须为每个标签添加一个类：`cPantsx`其中 x 与裤子收音机的数字相同。

然后我不得不重新排列html，如下所示：

```
<div id="pantscontainer">
    <input type="radio" name="pants" id="pants1" value="pants1" />
    <input type="radio" name="pants" id="pants2" value="pants1" />
    <input type="radio" name="pants" id="pants3" value="pants1" />
    <label for="pants1" class='cPants1'><span></span></label>
    <label for="pants2" class='cPants2'><span></span></label>
    <label for="pants3" class='cPants3'><span></span></label>
</div>​ 
```

一切都必须变成`position:relative;`这样我才能调整容器内的位置。

在那之后，魔法真的在这里发生了：

```
#pantscontainer > input[id="pants1"]:checked ~ .cPants1 span{
    top:125px;   
}
#pantscontainer > input[id="pants1"]:checked ~ .cPants2 span{
    top:-125px;   
}
#pantscontainer > input[id="pants2"]:checked ~ .cPants2 span{
    top:0px;
}
#pantscontainer > input[id="pants2"]:checked ~ .cPants1 span{
    top:0px;
}
#pantscontainer > input[id="pants3"]:checked ~ .cPants3 span{
    top:-125px;
}
#pantscontainer > input[id="pants3"]:checked ~ .cPants1 span{
    top:0px;
}
#pantscontainer > input[id="pants3"]:checked ~ .cPants2 span{
    top:125px;
} 
```

基本上通过调整页面上元素的位置，我能够非常明确地定位有问题的元素，并确保它们总是相互移开。

[这是你小提琴的一个叉子](http://jsfiddle.net/Nsf6C/7/)

我应该提到，这绝不是一个简单的解决方案。它更像是一个纸牌屋。如果您必须添加更多元素，则需要重新编写整个内容。它会扩展，但要做到这一点需要付出很多努力。

# three.js - Dat.gui 与 Three.js

> ID：14139603
> 
> 赞同：0
> 
> 时间：2013-01-03T13:10:19.973
> 
> 标签：three.js, dat.gui

我需要在控件 dat.gui 中放置一个链接来打开一个 html 文件，该怎么做？我已经设置了透明度和复选框的级别，但不知道如何打开链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:38:56.903

这与 Three.js 无关。无论如何，只需像执行其他控件一样传递一个函数变量/成员...它将在 onclick 中创建一个带有您的函数的按钮。例子：

```
var obj = {};
obj.sampleNumber = 1;
obj.sampleLink = function() {
  window.open("myfile.html");
}
var gui = new dat.GUI();
gui.add(obj, 'sampleNumber', -5, 5);
gui.add(obj, 'sampleLink'); 
```

# c++ - 用于 std::vector 强制转换运算符的 C2664

> ID：14139608
> 
> 赞同：0
> 
> 时间：2013-01-03T13:10:31.130
> 
> 标签：c++, visual-studio-2010, casting

指定返回向量的转换运算符会导致错误 C2664。

```
void foo(const std::vector<std::wstring>& s)
{
}

class Wrapper
{
public:
    Wrapper(const std::vector<std::wstring>& s) : m_s(s)
    {
    }
    operator std::vector<std::wstring>() const
    {
        return m_s;
    }
private:
    const std::vector<std::wstring> m_s;
};

Wrapper wrapper(std::vector<std::wstring>());
foo(wrapper);
foo(static_cast<std::vector<std::wstring>>(wrapper)); 
```

我得到：

```
error C2664: '`anonymous-namespace'::foo' : cannot convert parameter 1 from '`anonymous-namespace'::Wrapper (__cdecl *)(std::vector<_Ty> (__cdecl *)(void))' to 'const std::vector<_Ty> &'
with
[
  _Ty=std::wstring
]
Reason: cannot convert from 'overloaded-function' to 'const std::vector<_Ty>'
with
[
  _Ty=std::wstring
]
No constructor could take the source type, or constructor overload resolution was ambiguous 
```

带有 wstring 的相同代码确实有效：

```
void foo(const std::wstring& s)
{
}

class Wrapper
{
public:
    Wrapper(const std::wstring& s) : m_s(s)
    {
    }
    operator std::wstring() const
    {
        return m_s;
    }
private:
    const std::wstring m_s;
};

Wrapper wrapper(std::wstring(L"test"));
foo(wrapper); 
```

这是 Visual Studio 编译器中的错误还是容器在这里有什么特别之处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:12:56.457

[大多数 Vexing Parse](https://en.wikipedia.org/wiki/Most_vexing_parse) -`wrapper`被声明为函数而不是对象。

具体来说，它是一个返回 的函数`Wrapper`，并接受一个指向返回`std::vector<std::wstring>`且不带参数的函数的指针。

构造函数参数`L"test"`在你的代码中避免了这种情况`wstring`，因为它不能是函数声明的一部分，所以声明是一个对象定义。在这种特殊情况下，对代码的最简单修复可能是`0`作为构造函数参数传递给向量，而不是不传递任何参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:17:25.937

只需更改行：

```
Wrapper wrapper(std::vector<std::wstring>()); 
```

进入：

```
std::vector<std::wstring> v;
Wrapper wrapper(v); 
```

您的原始声明`wrapper`被解析为一个函数的声明，该函数返回一个类型的对象`Wrapper`并在输入中接受一个返回 an`std::vector<std::wstring>`且不带参数的函数。

# ruby-on-rails - 使用 Squeel 时可以有条件地在 where 块中添加子句吗？

> ID：14139609
> 
> 赞同：4
> 
> 时间：2013-01-03T13:10:36.340
> 
> 标签：ruby-on-rails, ruby, squeel

首先，我使用带有 Squeel 1.0.13 的 Rails v3.2.9，这就是我想要做的：

我想使用三种识别信息中的任何一种来搜索客户 - 姓名、出生日期 (dob) 和社会保险号 (sin)。结果集必须包含具有任何标识符的任何记录 - 条件的 OR。我以前在 Squeel 中做过这个，它看起来像：

```
scope :by_any, ->(sin, name, dob){ where{(client.sin == "#{sin}") | (client.name =~ "%#{name}%") | (client.dob == "#{dob}")} } 
```

只要我提供所有标识符，它就可以正常工作。但是如果我只有一个名字呢？上述范围导致：

```
SELECT "clients".* FROM "clients" WHERE ((("clients"."sin" IS NULL OR "clients"."name" ILIKE '%John Doe%') OR "clients"."dob" IS NULL)) 
```

这包括 sin 为 null 的客户端集和 dob 为 null 的客户端集，以及请求的名称为“John Doe”的客户端集。

所以输入我尝试有条件地将子句添加到`where`块中。起初，我尝试使用 nil? 方法：

```
def self.by_any (sin, name, dob)
  where do
    (clients.sin == "#{sin}" unless sin.nil?) |
    (clients.name =~ "%#{name}" unless name.nil?) |
    (clients.dob == "#{dob}" unless dob.nil?)
  end 
```

这导致：

```
SELECT "clients".* FROM "clients" WHERE ('t') 
```

提出了许多其他问题，比如那个“t”是怎么回事，但这是一个切线。

没有为每个排列编写 where 子句，有没有办法可以有条件地添加子句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:42:41.503

所以，这不是最漂亮的东西，但它可以满足你的需求。

```
def self.by_any(sin, name, dob)
  where do
    [
      sin.presence && clients.sin == "#{sin}",
      name.presence && clients.name =~ "%#{name}",
      dob.presence && clients.dob == "#{dob}"
    ].compact.reduce(:|)
    # compact to remove the nils, reduce to combine the cases with |
  end
end 
```

基本上，`[a, b, c].reduce(:f)`回报`(a.f(b)).f(c)`。在这种情况下`f`，调用的方法是管道，所以我们得到`(a.|(b)).|(c)`了它，用不太容易混淆的符号表示，是`(a | b) | c`。

它之所以有效，是因为在 Squeel 中，谓词运算符（`==`、`=~`等）返回一个`Predicate`节点，因此我们可以在将它们与 连接之前独立地构造它们`|`。

如果三个都是`nil`，则返回所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:25:39.653

在最终找到[这个相关的帖子之后](https://stackoverflow.com/questions/8045823/how-do-i-write-a-union-chain-with-activerelation)，我蚕食了@bradgonesurfing 的*替代模式*来得到这个解决方案：

```
def self.by_any (sin, name, dob)
  queries = Array.new
  queries << self.by_sin(sin) unless sin.nil?
  queries << self.by_name(name) unless name.nil?
  queries << self.by_dob(dob) unless dob.nil?

  self.where do
    queries = queries.map { |q| id.in q.select{id} }
    queries.inject { |s, i| s | i }
  end
end 
```

其中`self.by_sin`、`self.by_name`和`self.by_dob`是带有过滤器的简单范围。这会产生以下内容：

```
SELECT * 
FROM clients 
WHERE clients.id IN (<subquery for sin>) 
   OR clients.id IN (<subquery for name>) 
   OR clients.id IN (<subquery for dob>) 
```

其中子查询仅在其关联值不为零时才包含。

这有效地允许我将适当的范围联合在一起作为 ActiveRecord::Relation。

# android - Android按钮同时用多个按钮交换多个值

> ID：14139612
> 
> 赞同：1
> 
> 时间：2013-01-03T13:10:38.723
> 
> 标签：android, button

基本上我是android编程的新手，我正在学习它并且也很有趣。我正在尝试使用单词和卡片来构建一个类似拉米的游戏，并将其模拟为按钮。在这里，我在按钮之间交换值时遇到了问题。

这是我的游戏的模拟，

```
[A][C][P] [W][D][G]

     [K][Z][I]

  [empty button] 
```

如果我单击 A 按钮，则 A 按钮的值应替换为空字符串的空按钮。现在 A 在空按钮中，A 按钮应显示空字符串。

我的应用程序在此 switch 语句中将错误作为“不幸地停止工作”作为，

```
public class Play extends Activity
{   
int lastCard = RandomAlphabetGenerator.numOfCards; //52
int pos = lastCard;
int OpenCard0 = RandomAlphabetGenerator.OpenCard;  //27
int OpenCard1 = OpenCard0 + 1;

char[] stringarray = null;
char temp;

final Context context = this;

Button button1,button2,button3,button4,button5,button6,button7,button8,button9,buttonM,buttonFREE;

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.play);

RandomAlphabetGenerator.shuffledDecks = RandomAlphabetGenerator.Random();

stringarray = RandomAlphabetGenerator.shuffledDecks.toCharArray();

addListenerOnButton();
}

public void addListenerOnButton() 
{        
button1 = (Button) findViewById(R.id.Button1);
button2 = (Button) findViewById(R.id.Button2);
button3 = (Button) findViewById(R.id.Button3);
button4 = (Button) findViewById(R.id.Button4);
button5 = (Button) findViewById(R.id.Button5);
button6 = (Button) findViewById(R.id.Button6);
button7 = (Button) findViewById(R.id.Button7);
button8 = (Button) findViewById(R.id.Button8);
button9 = (Button) findViewById(R.id.Button9);
buttonM = (Button) findViewById(R.id.showButton);
buttonFREE = (Button) findViewById(R.id.emptyButton);

button1.setText(RandomAlphabetGenerator.shuffledDecks.substring(0,1)); 
button2.setText(RandomAlphabetGenerator.shuffledDecks.substring(1,2)); 
button3.setText(RandomAlphabetGenerator.shuffledDecks.substring(2,3));
button4.setText(RandomAlphabetGenerator.shuffledDecks.substring(3,4)); 
button5.setText(RandomAlphabetGenerator.shuffledDecks.substring(4,5)); 
button6.setText(RandomAlphabetGenerator.shuffledDecks.substring(5,6)); 
button7.setText(RandomAlphabetGenerator.shuffledDecks.substring(6,7)); 
button8.setText(RandomAlphabetGenerator.shuffledDecks.substring(7,8));
button9.setText(RandomAlphabetGenerator.shuffledDecks.substring(8,9));      

buttonM.setText(RandomAlphabetGenerator.shuffledDecks.substring(OpenCard0,OpenCard1));  

buttonFREE.setText("");

View.OnClickListener handler = new OnClickListener() 
{           
public void onClick(View v)
{ 
switch(v.getId())
{
case R.id.Button1:
button1.setText("");
process(0);
break;
case R.id.Button2:
button2.setText("");
process(1);
break;
case R.id.Button3:
button3.setText("");
process(2);
break;
case R.id.Button4:
button4.setText("");
process(3);
break;
case R.id.Button5:
button5.setText("");
process(4);
break;
case R.id.Button6:
button6.setText("");
process(5);
break;
case R.id.Button7:
button7.setText("");
process(6);
break;
case R.id.Button8:
button8.setText("");
process(7);
break;
case R.id.Button9:
button9.setText("");
process(8);
break;
case R.id.showButton:
buttonM.setText("");
process(OpenCard0);
break;
case R.id.emptyButton:
buttonFREE.setText("");
process(lastCard);
break;          
}       
RandomAlphabetGenerator.shuffledDecks = new String(stringarray);
}

private void process(int k) 
{                
int j=k+1;

if(pos==OpenCard0)
{           
buttonM.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j));
}
else if(pos == lastCard)
{                  
buttonFREE.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j));   
}           
else 
{
switch(pos)
{
case 0: button1.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 1: button2.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 2: button3.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 3: button4.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 4: button5.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 5: button6.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 6: button7.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 7: button8.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
case 8: button9.setText(RandomAlphabetGenerator.shuffledDecks.substring(k,j)); break;
}
}

temp = stringarray[k];    
stringarray[k] = stringarray[pos];  //Program stops here  
stringarray[pos] = temp;  
pos = k; 
}
};
findViewById(R.id.Button1).setOnClickListener(handler);
findViewById(R.id.Button2).setOnClickListener(handler);
findViewById(R.id.Button3).setOnClickListener(handler);
findViewById(R.id.Button4).setOnClickListener(handler);
findViewById(R.id.Button5).setOnClickListener(handler);
findViewById(R.id.Button6).setOnClickListener(handler);
findViewById(R.id.Button7).setOnClickListener(handler);
findViewById(R.id.Button8).setOnClickListener(handler);
findViewById(R.id.Button9).setOnClickListener(handler);
findViewById(R.id.emptyButton).setOnClickListener(handler);
findViewById(R.id.showButton).setOnClickListener(handler);
}   
} 
```

这是 logcat 显示的内容：

```
01-03 17:57:59.761: D/AndroidRuntime(705): Shutting down VM
01-03 17:57:59.761: W/dalvikvm(705): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-03 17:57:59.881: E/AndroidRuntime(705): FATAL EXCEPTION: main
01-03 17:57:59.881: E/AndroidRuntime(705): java.lang.ArrayIndexOutOfBoundsException: length=52; index=52
01-03 17:57:59.881: E/AndroidRuntime(705): at apk.games.wordrummy.Play$1.process(Play.java:158)
01-03 17:57:59.881: E/AndroidRuntime(705):  at apk.games.wordrummy.Play$1.onClick(Play.java:83)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.view.View.performClick(View.java:4084)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.view.View$PerformClick.run(View.java:16966)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.os.Handler.handleCallback(Handler.java:615)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.os.Looper.loop(Looper.java:137)
01-03 17:57:59.881: E/AndroidRuntime(705):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-03 17:57:59.881: E/AndroidRuntime(705):  at java.lang.reflect.Method.invokeNative(Native Method)
01-03 17:57:59.881: E/AndroidRuntime(705):  at java.lang.reflect.Method.invoke(Method.java:511)
01-03 17:57:59.881: E/AndroidRuntime(705):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-03 17:57:59.881: E/AndroidRuntime(705):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-03 17:57:59.881: E/AndroidRuntime(705):  at dalvik.system.NativeStart.main(Native Method) 
```

# iphone - 使用 fft 加速器时出现内存警告

> ID：14139619
> 
> 赞同：1
> 
> 时间：2013-01-03T13:11:02.100
> 
> 标签：iphone, objective-c, ios, accelerator

我在这里发布了一个我使用的函数来获取加速器 fft 。

[在 iPhone 上设置 fft 的加速器框架](https://stackoverflow.com/questions/14120473/setup-the-accelerator-framework-for-fft-on-the-iphone)

它工作得很好。问题是，我实时使用它，所以对于每个新的音频缓冲区，我用新的缓冲区调用这个函数。

由于这些行（可能），我收到了内存警告

```
A.realp = (float *) malloc(nOver2 * sizeof(float));
 A.imagp = (float *) malloc(nOver2 * sizeof(float)); 
```

问题 ：

*   我有另一种方法吗，但要一次又一次地对它们进行 malloc（不要忘记我必须每秒多次用新的缓冲区喂它）

*   我究竟如何释放它们？（代码行）

*   会不会是由于 fft 对系统造成的影响？

任何摆脱这个警告的方法都会对我有很大帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:43:22.503

这些事情应该在程序开始时完成一次：

*   使用类似的代码为缓冲区分配内存`float *buffer = malloc(NumberOfElements * sizeof *buffer);`。
*   创建 FFT 设置，使用类似`FFTSetup setup = vDSP_create_fftsetup(log2n, FFT_RADIX2);`.
*   还要测试返回值。如果`malloc`or`vDSP_create_fftsetup`返回 0，则写入错误消息并退出程序或采取其他异常行为。

这些事情应该在程序结束时完成一次：

*   使用类似`vDSP_destroy_fftsetup(setup);`.
*   释放缓冲区的内存，使用类似`free(buffer);`.

在程序的中间，当您处理样本时，代码应该使用现有的缓冲区和设置。因此，指向缓冲区的变量和设置必须对该代码可见。您可以将它们作为参数传递（可能在结构中组合在一起）或将它们设为全局（这应该只是小程序的临时解决方案）。

应安排您的程序，以便在处理样本时无需分配内存或创建 FFT 设置。

所有分配的内存最终都应该被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:39:20.507

如果您正在 malloc'ing 并且从不释放，您将耗尽内存。确保使用 free() 来“释放”你的内存。

***注意：** *free() 实际上并没有擦除任何内存。它只是告诉系统我们已经完成了内存，它可以用于其他分配。*

```
// Example:

// allocating memory
int *intpointer;
intpointer = malloc(sizeof(int));

// ... do stuff...

// 'Freeing' it when you are done
free(intpointer); 
```

# objective-c - MKOverlayPathView 无法让用户定义 pathWidth

> ID：14139622
> 
> 赞同：1
> 
> 时间：2013-01-03T13:11:10.670
> 
> 标签：objective-c, mapkit, mkoverlay

好的，所以我正在使用 Apples IOS Breadcrumb [Sample Code][1] 。

我有一个名为“lineWidth”的 BreadcrumbViewController.xib 滑块，并有一个 UIlabel 显示正在更改的滑块的值，名为“sliderLabel”。我可以相对轻松地做到这一点。

虽然现在我希望滑块标签中的任何数字都影响 CrumbPath lineWidth 目前位于 CrumbPathView.m

```
{
CrumbPath *crumbs = (CrumbPath *)(self.overlay);

CGFloat lineWidth = MKRoadWidthAtZoomScale(zoomScale); 
```

现在可以将其更改为

```
CGFloat lineWidth = 200; 
```

管他呢。所以我的问题是如何存储位于 BreadcrumbViewController.xib（链接到 BreadcrumbViewController.h &.m）中的 sliderLabel 的值并检索 CrumbPathView.m 中的存储值（INT）？

我还在学习，所以要好。

先感谢您。

# jquery - 使用过滤结果初始化 jQuery 同位素

> ID：14139630
> 
> 赞同：3
> 
> 时间：2013-01-03T13:11:34.493
> 
> 标签：jquery, jquery-isotope

嗨，我正在使用 jQuery Isotope，我有一个像这样的过滤器：

```
<ul class="filter option-set " data-filter-group="date">        
   <li><a class="selected" href="#filter-date-January" data-filter-value=".January">January</a></li>
   <li><a href="#filter-date-April" data-filter-value=".April" class="">April</a></li>
   <li><a href="#filter-date-any" data-filter-value="" class="">ALL</a></li>
 </ul> 
```

即使我对第一个项目使用“选定”类，这些项目也没有按该标准过滤，而是显示全部。我还应该做些什么来让它发挥作用吗？

提前致谢。鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:23:19.890

您可以拆分初始化和过滤。我更喜欢在单独的函数中处理过滤，即：

```
$(function() {
   // isotope init
   $(container).isotope({
       itemSelector: '.item',
       animationOptions: {
           duration: 750,
           easing: 'linear',
           queue: false
       }
   });

   filterItems(); // filter onload

});

var selectedDate = '.January'; // update this var with your UI

var filterItems = function() {
    $('ul.option-set li a').each(function(i, a) {
        if($(a).data('filter-value') == selectedDate) {
            $(a).addClass('selected');
        }
        else {
            $(a).removeClass('selected');
        }
    }); 
   $container.isotope({
        filter: '.selected',
        isAnimate: true
    });
}; 
```

# asp.net - Ckeditor 生成没有所见即所得按钮的简单文本区域

> ID：14139631
> 
> 赞同：1
> 
> 时间：2013-01-03T13:11:36.457
> 
> 标签：asp.net, ckeditor

嗨，我正在尝试在我的 asp.net 网站的另一个页面上添加 ckeditor，但似乎有问题，因为它显示为 textArea。这是我到目前为止所做的：

1.我注册了组件：

```
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %> 
```

2.添加ckeditor javascript文件的路径：

```
 <script type="text/javascript" src="~/js/pluggins/ckeditor/ckeditor.js"></script> 
```

3.添加Ckeditor控制器：

```
<CKEditor:CKEditorControl ID="CKEditor1" runat="server"></CKEditor:CKEditorControl> 
```

我在另一个这样的页面上使用了ckeditor并且它有效。这是我在这里遗漏的东西，因为它只导致一个没有所见即所得属性的文本区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:43:50.183

我的猜测是你的`ckeditor.js`路径可能是错误的或者有一个不相关的 js 错误：

```
<script type="text/javascript" src="~/js/pluggins/ckeditor/ckeditor.js"></script> 
```

js 是您的根路径吗？您是否有另一个 js 错误阻止它初始化？

# asp.net-mvc-4 - 如何在 MVC 应用程序的各个控制器之间共享通用数据结构

> ID：14139632
> 
> 赞同：1
> 
> 时间：2013-01-03T13:11:39.480
> 
> 标签：asp.net-mvc-4

我有一个带有多个控制器和视图的应用程序。当用户浏览各种视图和控制器时，我需要记录导航历史以进行回溯。为此，我决定在从控制器移动到控制器时使用堆栈来推送和弹出导航历史记录。问题是在尝试了很多东西之后

```
static class with static properties, HttpContext.Applicaion property,
HttpContext.Cache property  and also the HttContext.Current.Session property 
```

但是每次我从一个控制器移动到另一个控制器时，这些属性都会被取消，并且在每种情况下都会创建一个新实例。（从控制器到控制器我使用的是 RedirectToAction() 方法

我需要的是一个在整个应用程序中都可用的堆栈，我可以从不同的控制器使用它来获取或设置导航信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:25:09.343

为此，我将使用某种数据库，SQL 或 noSQL。它比使用 Session 更可靠，特别是如果您需要支持负载平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:59:09.087

ASP.NET MVC 实际上是无状态的。

但是，在您的情况下，将导航历史记录存储在 Session 中可能是一个不错的选择。

您不希望将导航历史记录存储在 HttpContext.Application 中，因为历史记录将存储在应用程序级别。这意味着如果您在视图中显示该数据，所有用户都将有权访问该数据。我认为在您的情况下，您有兴趣单独存储每个用户的导航信息。这就是为什么最好使用 Session。

# php - 如何在magento 1.7中制作自定义模块

> ID：14139636
> 
> 赞同：3
> 
> 时间：2013-01-03T13:12:08.937
> 
> 标签：php, magento

**如何在 Magento 中完成以下任务？**

使用控制器/视图/模型方法显示“Hello World”消息。因此，如果我访问[http://example.com/myController](http://example.com/myController)，它将显示字符串“Hello World”。能够在我的网站模板中显示此字符串（例如，页眉、页脚等）将是一个奖励。

如何向这个控制器（或新的控制器，如果需要）添加一个方法，它与模型交互，执行查询`Select * FROM articles where id='10'`并将行（包含列，，，`id`）`title`返回`content`给控制器？

然后使用控制器包含一个视图，该视图将显示这一行。所以去[http://example.com/myController/show_row](http://example.com/myController/show_row)（或类似的东西）会在视图中显示该行。（不需要花哨，只是一个 echo `$row->id`；或类似的东西会起作用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:37:53.970

您最好的选择是从冗长而详细的 Alan Storm 教程开始：[Magento for PHP MVC Developers](http://alanstorm.com/category/magento#magento_for_php_developers)。完成后，继续处理[同一站点](http://alanstorm.com/category/magento)上的所有其他主题，例如 magento API、magento config 等。

[然后，在magento 标签](https://stackoverflow.com/questions/tagged/magento)下的 SO 中检查所有问题和答案。看看[Magento 社区委员会](http://www.magentocommerce.com/boards)。

最后但并非最不重要的一点是，那里有很多教程，在您喜欢的搜索引擎上进行一些搜索，您会发现很多。

# java - 插入 INTO 查询不适用于一种方法但适用于另一种方法

> ID：14139638
> 
> 赞同：1
> 
> 时间：2013-01-03T13:12:14.357
> 
> 标签：java, database, ms-access

我有两种方法，一种有效，另一种不适用于插入查询

```
// this one fails
public void product(String product, String quantity, String price,
        String date) throws SQLException {
    try {       
        statement.execute("INSERT INTO product (productn,quantity,price,date) VALUES ('" +       product + "','" + quantity + "','" + price + "','" + date + "')");
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
}

// this one works
public void customer(String name, String q, String p, String pro)
        throws SQLException {
    try {
        statement.execute("INSERT INTO Customer (name,price,product,quantity) VALUES ('" + name  + "','" + q + "','" + p + "','" + pro + "')");
    } catch (Exception e) {
        System.out.println("problem in Customer insert !");
    }
} 
```

一种工作正常的方法意味着它将数据插入表中，但另一种方法给出以下错误：

```
[Microsoft][ODBC Microsoft Access Driver] Syntax error in INSERT INTO statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:24:22.333

您将有更多机会以这种方式进行操作，这样您就可以更好地检查值的完整性。

```
private static final String insert = "INSERT INTO product (productn,quantity,price,date) VALUES ('"+?+"','"+?+"','"+?+"','"+?+"')";

statement.clearParameters();

statement.set"Type_of_the_value"(1, productn) ;

statement.set"Type_of_the_value"(2, quantity) ;

statement.set"Type_of_the_value"(3, price) ;

statement.set"Type_of_the_value"(4, date) ;

statement.executeUpdate() ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:33:03.873

试试这个：

```
INSERT INTO product ([productn],[quantity],[price],[date]) VALUES ('" + product + "','" + quantity + "','" + price + "','" + date + "') 
```

让我知道它是否有效

# android - 水平列表视图中的固定高度不显示正确的高度

> ID：14139641
> 
> 赞同：0
> 
> 时间：2013-01-03T13:12:17.470
> 
> 标签：android, android-layout

我正在使用[这里](https://github.com/vieux/Android-Horizontal-ListView/blob/master/HorizontalListView.java)`HorizontalListView`提供的，并且我正在尝试显示具有固定高度和宽度的自定义视图，如下所示：

```
public class MyView extends View {

    public MyView(Context context) {
        super(context);

        init();
    }

    private void init() {
        setBackgroundColor((int) (Math.random() * Integer.MAX_VALUE));
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        int h = getHeight(); // shows 255, correct height
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int w = MeasureSpec.makeMeasureSpec(425, MeasureSpec.EXACTLY);
        int h = MeasureSpec.makeMeasureSpec(255, MeasureSpec.EXACTLY);
        super.onMeasure(w, h);
    }

} 
```

当`MyView`以 normal显示时`LinearLayout`，高度和宽度是完美的。但是，当我在 中显示视图时`HorizontalListView`，宽度是完美的，但高度不是。看这个截图：

![在此处输入图像描述](../Images/a56d35c50ae468b431348cf1f4301747.png)

宽度是 425px，这是正确的，高度只有 160px 而不是 255。

在源代码中`HorizontalListView`有这个方法：

```
private void addAndMeasureChild(final View child, int viewPos) {
    LayoutParams params = child.getLayoutParams();
    if(params == null) {
        params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    }

    addViewInLayout(child, viewPos, params, true);
    child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
                MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
} 
```

在这种方法中我应该改变什么，还是有别的东西可以使这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:38:45.320

当你这样做时`int h = MeasureSpec.makeMeasureSpec(255, MeasureSpec.EXACTLY);`，那个 255 值就是一个 PX 值。如果您在 XML 中说高度为 200 **DP**，则该值将根据设备进行调整。不确定显示的屏幕是 HDPI 还是 XHDPI（我猜是后者），它会成倍增加，因此您的 200 DP 在 HDPI 手机（x1.5）中变为 300 PX。您可以在 XML 中使用 PX 值，也可以在 values.xml 中定义[维度](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)DP 值，即 200DP。

偏好是后者。您可以在 XML 中使用该维度值，并在创建视图时从资源中检索该值。这意味着，如果在某个时候你想让它变大，你可以只改变一个值，你就完成了。

**编辑**

我看到你发现了真正的问题。在任何情况下，您仍然应该使用维度方法，它会使您的代码更清晰，并且适用于任何手机（255 只会在特定组合中看起来正确）。

# image - 如何使用 Kinect (X-box) 拍摄的深度图像校准 RGB 图像？

> ID：14139645
> 
> 赞同：0
> 
> 时间：2013-01-03T13:12:26.237
> 
> 标签：image, kinect, rgb, depth, calibration

我需要将从 Kinect（X-box）获得的深度图像映射到 RGB 图像（从 kinect 获取）。问题是深度图像的大小与 RGB 图像的大小不同。我想校准这些图像并获取它们的像素。如何校准它们？我想要两个图像的尺寸完全相同。并且深度图像中的对象应该映射到 rgb 图像中的对象上。

# android - Webview 无法 从预定义的 html 文件中读取

> ID：14139653
> 
> 赞同：1
> 
> 时间：2013-01-03T13:12:55.287
> 
> 标签：android, html, webview

我有一个包含大量文本和基本 html 标记的 html 文件。该文件位于**res/raw**文件夹中。但是，当我尝试从我的 webview 显示这个 html 时，`</br`> 不工作，虽然`<b></b>`很好。**我的最小 SDK 是 8，目标 SDK 是 15。**

这是屏幕截图：

![网络视图截图](../Images/0930b1a31fdce52fe8c56872070f3c7b.png)

这是html文件：

```
<!DOCTYPE HTML>
<article align="center">

Printf(“Hello World ^_^”);</br></br>

<b>This section will explain about the objective of this apps.</b></br>
This apps is designed for those who want to learn Computer Science (programming), with no experience necessary (so you don’t have to worry about your age, background, education, etc. EVERYONE can learn programming!).</br> 
This apps will teach you about the basics of the programming using C languange.</br>
</article> 
```

这是网络视图代码：

```
webChapter.loadUrl("file:///android_res/raw/hello_world.html"); 
```

我试过这个，但没有运气，文件甚至无法读取：

```
webChapter.loadDataWithBaseURL("file:///android_res/raw/", "hello_world.html", "text/html", "UT-8", ""); 
```

感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:19:22.043

使用`<br>`代替`</br>`

[http://www.w3.org/TR/html5/text-level-semantics.html#the-br-element](http://www.w3.org/TR/html5/text-level-semantics.html#the-br-element)

# ravendb - 在 RavenDB 中更改 Id 的值

> ID：14139655
> 
> 赞同：7
> 
> 时间：2013-01-03T13:12:58.203
> 
> 标签：ravendb, unique-constraint

我们有一个名为 Organization 的实体，我们在其上使用 UniqueConstraints-bundle。我们有一个名为 NetName 的属性，它是一个 UniqueConstraint 和一个自动生成的 Id。

由于这是不必要的，我们希望使用 NetName-property 作为 Id。这样我们就不需要 UniqueConstraints 来知道它是唯一的，并且在我们拥有 NetName 时也可以从能够使用 Load 中受益。

在将网络名用作 Id 之前，我们需要稍微清理一下网络名，因此我们创建了一个名为 TempUniqueNetName 的新临时属性，该属性现在包含以下值：

```
"organizations/"+ CleanupId(this.NetName) 
```

所以我们现在准备简单地将该值移动到我们的 Id 中。但我们无法让它工作。我们的问题是，使用下面的 PatchRequest，我们最终在数据库中得到了一个名为 Id 的新属性，但实际的 Id 仍然具有相同的值（见屏幕截图）。是否有更好（正确）的方法来更改 Id 的值？

实体：

```
class Organization {
   public string Id { get; set; }

   [UniqueConstraint]
   public string NetName { get; set; }

   public string TempUniqueNetName{ get; set; }
} 
```

我们想做这样的事情：

```
_documentStore.DatabaseCommands.UpdateByIndex(typeof(Organizations).Name,
            new IndexQuery(),
            new[]
                    {
                        new PatchRequest()
                            {
                                Type = PatchCommandType.Rename,
                                Name = "TempUniqueNetName",
                                Value = new RavenJValue("Id")
                            }
                    }); 
```

![价值没有改变](../Images/a6721f3239cba4cf77f08e966a118b44.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:49:54.283

我认为您不能通过修补来更改文档密钥。它实际上并没有与文档或元数据一起存储 - 它在加载时被复制到 @id 元数据中，让您产生它在那里的错觉，然后 Raven 客户端将它再次复制到文档中您自己的身份属性中。但实际上，它是底层 esent 文档存储中的一个单独值。Raven 必须特别知道如何处理这个问题并为你伪造它。

您可以手动将文档从旧 ID 复制到新 ID 并删除旧 ID，但这可能很耗时。

现在重命名文档键没有一个很好的答案。确实应该有一个 DatabaseCommand 用于重新键入单个文档，并在修补时单独 PatchCommandType 重新键入。也许这将在未来被添加到 raven 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-01T11:09:05.700

您可以在我的 github 存储库中检查 PUT-DELETE 用于更新 ID 的实现。它应该看起来像这样：

```
store.DatabaseCommands.Put(updatedKey, null, document.DataAsJson, newMetadata);
store.DatabaseCommands.Delete(oldKey, null); 
```

[https://github.com/Sevsoad/SagaUpdater/](https://github.com/Sevsoad/SagaUpdater/)

这里还有一些 Raven 文档：

[https://ravendb.net/docs/article-page/3.0/csharp/client-api/commands/documents/put](https://ravendb.net/docs/article-page/3.0/csharp/client-api/commands/documents/put)

# c++ - 继承和 memcpy - 它是如何协同工作的？

> ID：14139656
> 
> 赞同：3
> 
> 时间：2013-01-03T13:13:15.080
> 
> 标签：c++, oop, inheritance, memcpy

我有这个代码：

```
#include <iostream>
#include <string>
#include <cstring>

class Animal
{
public:
    Animal(const std::string &name) : _name(name)
    {
    }
    virtual void Print() const = 0;
    virtual ~Animal() {}
protected:
    std::string _name;
};

class Dog : public Animal
{
public:
    Dog(const std::string &name, const std::string &dogtype) : Animal(name), _dogtype(dogtype)
    {
        Print();
    }
    void Print() const
    {
        std::cout << _name << " of type " << _dogtype << std::endl;
    }
private:
    std::string _dogtype;
};

class Cat : public Animal
{
public:
    Cat(const std::string &name, int weight) : Animal(name), _weight(weight)
    {
        Print();
    }
    virtual void Print() const
    {
        std::cout << _name << " of weight " << _weight << std::endl;
    }
    virtual ~Cat(){}
private:
    int _weight;
};

class Tiger : public Cat
{
public:
    Tiger(const std::string &name, int weight, double speed) : Cat(name, weight), _speed(speed)
    {
        Print();
    }
    void Print() const
    {
        std::cout << _name << " speed " << _speed << std::endl;
    }
    virtual ~Tiger(){std::cout << "Tiger's dtor" << std::endl;}
private:
    int _speed;
};

int main()
{
    Animal *a = new Tiger("theRealKing", 3, 40.5);
    Cat *c = new Cat("silvester", 4);
    memcpy(c, a, sizeof(Cat));
    c->Print(); /// ------------------------
    delete a;
    delete c;
    return 0;
} 
```

在该行中：c->Print()：c 变成老虎之前的行，为什么它打印我这一行：Ross with speed 135081 insted of Ross with speed 3 为什么存在内存问题？为什么它调用的是 Tiger 而不是 cat 的 print 方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T13:14:54.183

它*不能*一起工作。

`memcpy`在这些对象上使用会产生*未定义的行为*，标准允许任何事情发生。

导致问题的不是继承本身，而是虚拟成员函数或自定义构造函数/析构函数的存在。这些使您的对象*失去*了*使用*`memcpy`.

你的类不是*trivially-copyable*的第二个原因 - 它包含一个 type 的成员`std::string`not *trivially-copyable*。

实际上，当您执行`std::string`子对象的按位复制时，您最终会得到两个指向同一内存的指针，并且两个`string`对象都会尝试释放该指针。那会让你的程序崩溃。如果`memcpy`在 v-table 上使用之前没有这样做。

但是当你混合优化时，甚至会发生更奇怪的事情。这就是*未定义行为*的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T13:16:12.533

您应该避免对 中的对象使用 memcpy，`c++`而是使用复制构造函数。

# symfony - 教义自定义存储库错误

> ID：14139667
> 
> 赞同：0
> 
> 时间：2013-01-03T13:13:49.750
> 
> 标签：symfony, doctrine, repository-pattern

我有一个全新的 Symfony2 应用程序，并且我 100% 确定我已经完全按照[http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)进行操作。但是我收到以下错误；

```
Entity 'Core\MainBundle\Entity\LandingPromotions' has no field 'promotionType'. You can therefore not call 'findByPromotionType' on the entities' repository 
```

我不知道我错过了什么。代码如下；

**登陆促销**

```
<?php
namespace Core\MainBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* Core\MainBundle\Entity\LandingPromotions
*
* @ORM\Entity(repositoryClass="Core\MainBundle\Entity\PromotionRepository")
* @ORM\Table(name="landing_promotions")
*/
class LandingPromotions
{
//Normal entity stuff
} 
```

**PromotionRepository.php**

```
namespace Core\MainBundle\Entity;

use Doctrine\ORM\EntityRepository;

class PromotionRepository extends EntityRepository
{
public function findByPromotionType($typeId)
{
}
} 
```

**控制器**

```
namespace Core\MainBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Core\MainBundle\Entity\Game;
use Core\MainBundle\Entity\LandingPromotions as LandingPromotions;

class GameController extends Controller
{
/**
* @Route("{_locale}/games/")
* @Template()
*/
public function indexAction($_locale)
{
$lp_repo = $this->getDoctrine()->getRepository('CoreMainBundle:LandingPromotions');

$lp_repo->findByPromotionType(2);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:04:25.943

经过一番拉扯和诅咒后，我发现实体没有使用 PHP 注释，而是使用 XML 版本。我不知道这是怎么混在一起的，但这将是明天的问题。

# unicode - 使用 PHP 将混合字符串转换为 UTF16

> ID：14139669
> 
> 赞同：-2
> 
> 时间：2013-01-03T13:14:00.983
> 
> 标签：unicode, encoding

我在 PHP 中有一个这样的字符串：

> INPUT = "Γιώργο αν στείλεις αυτό ακριβώς (:

它是同时包含希腊语和拉丁语字符的混合字符串。我希望给定字符串中的所有字符都转换为此字符串

> 输出 = 0022039303B903CE03C103B303BF002003B103BD002003C303C403B503AF03BB03B503B903C2002003B103C503C403CC002003B103BA03C103B903B203CE003C02

如何将输入转换为这种输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:12:18.547

我花了一段时间才弄清楚，但似乎您想要做的是将 UTF-8 字符串转换为其 UTF-16 表示的大写二进制转储。就这么简单：

```
$input = '"Γιώργο αν στείλεις αυτό ακριβώς (:';
$output = mb_strtoupper(bin2hex(mb_convert_encoding($input, 'UTF-16BE', 'UTF-8'))); 
```

后缀表示 Big Endian，根据`BE`您的示例，这似乎是预期的字节顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T13:22:35.163

你试过iconv吗？也许是这样的：（编辑）我了解您的主要目标是能够通过 http 将转换后的字符串传输到您的服务，在这种情况下，您可以在结果上使用**base64_encode()**。查看完整的代码示例：

```
<?php
    $string = str_replace(' ', '', "Γιώργο αν στείλεις αυτό ακριβώς");
    $converted = iconv('UTF-8', 'UTF-16', $string);
    $encoded = base64_encode($converted);

    var_dump($encoded);
    var_dump(iconv('UTF-16', 'UTF-8', base64_decode($encoded)));
?> 
```

你会得到：

**编码：**字符串'/v8DkwO5A84DwQOzA78DsQO9A8MDxAO1A68DuwO1A7kDwgOxA8UDxAPMA7EDugPBA7kDsgPOA8I='（长度=76） **解码：**字符串'Γιώργοανστείλειςαυτόακριβώς'（长度=54）

# ruby-on-rails - 将 gmaps4rails 与主干.js 一起使用

> ID：14139670
> 
> 赞同：1
> 
> 时间：2013-01-03T13:14:02.747
> 
> 标签：ruby-on-rails, backbone.js, coffeescript, gmaps4rails

我正在尝试让 gmaps4rails 与我的主干视图和模板一起工作。

作为一个快速介绍，我正在尝试为事件创建一个页面，当查看每个单独的事件时，它都有一个谷歌地图，其中显示了位置。但是，我不太确定如何将它们联系在一起。

我采取的步骤如下： Gemfile：

```
gem 'gmaps4rails' 
```

然后我运行`rails generate gmaps4rails:install`并将以下内容添加到`application.js`：

```
// GOOGLE MAPS
//= require_directory ./gmaps4rails 
```

然后我修改了我的模型和迁移：

模型：

```
class Event < ActiveRecord::Base
   acts_as_gmappable
   ...
   def gmaps4rails_address
      self.location
   end
end 
```

移民：

```
class CreateEventGmaps < ActiveRecord::Migration
  def change
    add_column :events, :latitude,  :float
    add_column :events, :longitude, :float
    add_column :events, :gmaps, :boolean 
  end
end 
```

然后我运行`rake db:migrate`并使用`rake db:seed`. 每个事件都有一个设置为任意位置的位置，并且在播种时我没有收到任何错误。

对于下一点，我不太确定如何将它们与我的控制器和主干视图联系在一起，到目前为止，我已经添加了以下代码：事件控制器：

```
class EventsController < ApplicationController
  ...
  # GET /events/1
  # GET /events/1.json
  def show
    @event = Event.find(params[:id])
    @json = @event.to_gmaps4rails
    respond_with @event
  end 
```

骨干视图：

```
class CPP.Views.Events.Edit extends Backbone.View
  template: JST['backbone/templates/events/view']

  initialize: ->
    @render()

  render: ->
    $(@el).html(@template(event: @model))
    @ 
```

模板：

```
 <div class="span6" >
    <div class="row">
      <div class="span6">
        <h1 class="section-header"><i class="icon-map-marker"></i> Location</h1>
        <%= gmaps4rails(@json) %>
      </div>
      <div class="span6">
        <div class="event-location">
          <dl>
            <dt>Address</dt>
            <dd><%= @event.get 'location' %></dd>
          </dl>
        </div>
      </div>
    </div> 
```

但是我收到了一个`Uncaught ReferenceError: gmaps4rails is not defined`Javascript 错误。我读过[这个问题](https://stackoverflow.com/questions/10472293/backbone-js-and-gmaps4rails-maps-initialization?rq=1)，这表明您可能无法在 Backbone 视图中执行此操作？

我只是想知道是否有人可以指出我正确的方向！能够在我的页面上显示谷歌地图真是太好了。

谢谢。

# regex - 用 awk 改变字符串的大小写

> ID：14139672
> 
> 赞同：10
> 
> 时间：2013-01-03T13:14:12.370
> 
> 标签：regex, unix, awk

我是awk新手，所以请多多包涵。

目标是更改字符串的大小写，使每个单词的第一个字母为大写，其余字母为小写。（为了简单起见，这里的“单词”被定义为严格的字母字符；所有其他字符都被视为分隔符。）

我从本网站的另一篇文章中学到了一种很好的方法，可以使用以下 awk 命令将每个单词的首字母大写：

`echo 'abce efgh ijkl mnop' | awk '{for (i=1;i <= NF;i++) {sub(".",substr(toupper($i),1,1),$i)} print}'` --> Abcd Efgh Ijkl Mnop

通过在 awk 命令前加上 tr 命令可以轻松完成剩余的字母小写：

`echo 'aBcD EfGh ijkl MNOP' | tr [A-Z] [a-z] | awk '{for (i=1;i <= NF;i++) {sub(".",substr(toupper($i),1,1),$i)} print}'` --> Abcd Efgh Ijkl Mnop

但是，为了了解更多关于 awk 的信息，我想用类似的 awk 结构将除第一个字母以外的所有字母的大小写更改为小写。我使用正则表达式`\B[A-Za-z]+`匹配单词的所有字母，但第一个字母除外，并使用 awk 命令`substr(tolower($i),2)`以小写形式提供相同的字母，如下所示：

`echo 'ABCD EFGH IJKL MNOP' | awk '{for (i=1;i <= NF;i++) {sub("\B[A-Za-z]+",substr(tolower($i),2),$i)} print}'` --> Abcd EFGH IJKL MNOP

请注意，第一个单词已正确转换，但其余单词保持不变。我将非常感谢解释为什么剩余的单词没有正确转换以及如何让他们这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T13:43:31.203

问题是`\B`（零宽度非单词边界）似乎仅在行首匹配，因此`$1`有效，但`$2`后续字段与正则表达式不匹配，因此它们不会被替换并保持大写。不知道为什么`\B`除了第一个字段之外不匹配... B 应该匹配任何单词中的任何位置：

```
echo 'ABCD EFGH IJKL MNOP' | awk '{for (i=1; i<=NF; ++i) { print match($i, /\B/); }}'
2   # \B matches ABCD at 2nd character as expected
0   # no match for EFGH
0   # no match for IJKL
0   # no match for MNOP 
```

无论如何，要实现您的结果（仅大写该行的第一个字符），您可以对`$0`（整行）进行操作，而不是使用`for`循环：

```
echo 'ABCD EFGH IJKL MNOP' | awk '{print toupper(substr($0,1,1)) tolower(substr($0,2)) }' 
```

或者，如果您仍想单独大写每个单词，但`awk`仅使用：

```
awk '{for (i=1; i<=NF; ++i) { $i=toupper(substr($i,1,1)) tolower(substr($i,2)); } print }' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T13:34:09.373

使用`sub()`函数或其他（如`gsub()`等）匹配正则表达式时，最好以以下形式使用：

```
sub(/regex/, replacement, target) 
```

这与您所拥有的不同：

```
sub("regex", replacement, target) 
```

所以你的命令变成：

```
awk '{ for (i=1;i<=NF;i++) sub(/\B\w+/, substr(tolower($i),2), $i) }1' 
```

结果：

```
Abcd Efgh Ijkl Mnop 
```

这篇关于[字符串函数](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)的文章可能值得一读。HTH。

* * *

我应该说有更简单的方法来完成你想要的，例如使用`GNU sed`：

```
sed -r 's/\B\w+/\L&/g' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T14:01:00.773

`sub`我的解决方案是首先使用`substr`您的正则表达式来获取第一部分：

```
echo 'ABCD EFGH IJKL MNOP' | awk '{for (i=1 ; i <= NF ; i++) {sub(substr($i,2),tolower(substr($i,2)),$i)} print }'
Abcd Efgh Ijkl Mnop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T13:29:22.773

您必须在 \B 之前添加另一个 \ 字符

```
 echo 'ABCD EFGH IJKL MNOP' | awk '{for (i=1;i <= NF;i++)
 {sub("\\B[A-Za-z]+",substr(tolower($i),2),$i)} print}' 
```

只需 \B awk 就给了我这个警告：

> awk：命令。行：1：警告：转义序列`\B' treated as plain`B'

# asp.net - Visual Studio 2012 中的 MySQL 连接

> ID：14139675
> 
> 赞同：0
> 
> 时间：2013-01-03T13:14:44.943
> 
> 标签：asp.net, mysql, entity-framework, visual-studio-2012

如何在 Visual Studio Express 2012 中进行 MySQL 连接，因为我想从我的 mysql 生成 ado.net 实体框架模型，我研究了这个[链接](http://social.technet.microsoft.com/wiki/pt-br/contents/articles/10476.instalando-mysql-connector-no-visual-studio-2011-beta.aspx)并在命令窗口中键入以下命令：

`md PastaExtraidos`

然后键入以下命令

`msiexec/ sqlyog502/ qb TARGETDIR= D: \ PastaExtraidos`

但我无法在此目标目录中找到任何文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:48:56.807

使用 Connector/NET，版本 6.6 与 VS2012 兼容，来自[http://dev.mysql.com/downloads/connector/net/6.6.html](http://dev.mysql.com/downloads/connector/net/6.6.html)。

# c# - 在 C# 中通过 SqlDataAdapter 和 DataSet 进行更新

> ID：14139677
> 
> 赞同：0
> 
> 时间：2013-01-03T13:15:06.900
> 
> 标签：c#, sql-server, dataset, dataadapter

我有fol代码

```
 string user = "new user";
 DataSet myDS = new DataSet();
        string sql = string.Format("Select Counter,Occupants From Rooms where Room = '{0}'",room);
        SqlDataAdapter dAdapt = new SqlDataAdapter(sql, cnn);
        dAdapt.Fill(myDS, "Rooms");

        foreach (DataTable dt in myDS.Tables)
        {
            int var =(int) dt.Rows[0].ItemArray[0];
            var--;
            dt.Rows[0].ItemArray[0] = var;
            String occups = dt.Rows[0].ItemArray[1].ToString();
            occups += user;
            dt.Rows[0].ItemArray[1] = occups;
        }
        dAdapt.Update(myDS,"Rooms"); 
```

我正在检索包含两列的单行——计数器（小整数类型）和占用者（文本类型）。我收到一条错误消息，指出**数据类型 text 和 var char 在 equal to 运算符中不兼容**但错误指向`dAdapt.Fill(myDS, "Rooms");`奇怪的行。这里有什么问题？而且我很确定数据库连接已打开，因为我通过打印连接状态进行了检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:40:09.453

除非您为`DataAdaper`.

我不会将记录加载到内存中来更新它。同时，它可能已从另一笔交易中更改。反正效率低下。相反，我会使用一个更新命令：

```
string updateSql = @"
    UPDATE ROOMS SET
        Counter = Counter + 1,
        Occupants = Occupants + ',' + @newUser
    WHERE
        Room = @Room";

using(var con = new SqlConnection(connectionString))
using (var updateCommand = new SqlCommand(updateSql, con))
{
    updateCommand.Parameters.AddWithValue("@newUser", user);
    updateCommand.Parameters.AddWithValue("@Room", room);
    con.Open();
    updateCommand.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:36:46.353

问题出在您的选择中，因为您可以使用语法 that `Room = 'something'`，因为 text 与 = 不兼容。

使用`LIKE`而不是等号`(=)`。

固定查询应如下所示：

```
SELECT Counter,Occupants FROM Rooms WHERE Room LIKE '{0}' 
```

但我建议使用`SqlParameters`而不是`string.Format`，因为它不安全。

# qtp - 如何在 QTP 10.0 中为“Flight Reservation”窗口创建检查点

> ID：14139679
> 
> 赞同：0
> 
> 时间：2013-01-03T13:15:07.137
> 
> 标签：qtp, checkpoint

我正在尝试在我的最后一步/航班预订窗口的下面脚本中插入一个标准检查点。但是当我尝试这样做时，我收到了类似“无法识别”窗口的错误消息。

**我的脚本::**

```
 SystemUtil.Run("C:\Program Files (x86)\HP\QuickTest Professional\samples\flight\app\flight4a.exe")
Dialog("Login").WinEdit("Agent Name:").Set DataTable("userId", dtGlobalSheet)
Dialog("Login").WinEdit("Password:").Set DataTable("PassWord", dtGlobalSheet)
Dialog("Login").WinButton("OK").Click
Window("Flight Reservation").Close 
```

![检查点添加](../Images/a10e02fbcd68f73dfd413574a1f2edd2.png) ![错误信息](../Images/cb05646e52801eb93cc66de9b3989d9e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T08:09:02.823

我被困在同一点，同样的错误消息，我只是手动运行应用程序，我能够创建一个检查点，当 QTP 尝试创建一个检查点时，它会尝试获取属性，当应用程序未运行，因此请确保该应用程序正在后台运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T14:37:22.777

再次手动打开“航班预订”应用程序并在后台保持打开状态，然后尝试右键单击窗口（“航班预订”）。关闭。希望这次你可以设置检查点。

祝测试愉快！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:27:58.253

创建检查点时，QTP 将尝试从您正在测试的应用程序中获取一些属性（`flight.exe`在这种情况下），以使其正常工作，应用程序应该是打开的。

最简单的方法是在录制时添加检查点。

# java - 三路休眠 ORM 映射 - 如何？

> ID：14139683
> 
> 赞同：1
> 
> 时间：2013-01-03T13:15:37.587
> 
> 标签：java, sql, hibernate, orm, hibernate-mapping

我有三个 SQL 表：

```
create table users (
  id serial primary key,
  name text not null unique
);

create table posts (
  id serial primary key,
  data text not null,
  authorId integer not null references users (id)
);

create table ratings (
  id serial primary key,
  name text not null unique
); 
```

一篇文章只能有一位作者，因此`users`<->`posts`关系已经以正常形式建立（如果我错了，请纠正我）。

评级是预定义的常量，如“坏”、“好”或“真棒”，（在实际情况下）附加数据作为评级值、描述或其他字段，为了简洁起见，我在此省略。

接下来我想将评级与用户和帖子相关联。每个帖子可以被每个用户评分一次，也可以被多个用户评分。我想出了以下关系：

```
create table posts_ratings_users_map (
  postId integer not null references posts (id),
  ratingId integer not null references ratings (id),
  userId integer not null references users (id),
  primary key (postId, ratingId, userId)
); 
```

但这里有一个问题：我看不到将它集成到 Hibernate ORM 映射中的方法，以获取（用户、评级）对的每个帖子列表（或集合或任何其他集合）。

这是我现在尝试映射它们的方式：

用户.java：

```
@Entity(name = "users")
public class User {
    @Id
    @Column(nullable = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column(nullable = false)
    private String name;

    @OneToMany
    @JoinColumn(name = "authorId")
    private Set<Post> posts = new HashSet<>();

    // ...
    // getters and setters
    // ...
} 
```

评分.java：

```
@Entity(name = "ratings")
public class Rating {
    @Id
    @Column(nullable = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column(nullable = false)
    private String name;

    @ManyToMany(mappedBy = "ratings")
    private Set<Post> posts = new HashSet<>();

    // ...
    // getters and setters
    // ...
} 
```

Post.java：

```
@Entity(name = "posts")
public class Post {
    @Id
    @Column(nullable = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column(nullable = false)
    private String data;

    @ManyToOne
    @JoinColumn(name = "authorId")
    private User author;

    @ManyToMany
    @JoinTable(
            name = "posts_ratings_users_map",
            joinColumns = { @JoinColumn(name = "ratingId") },
            inverseJoinColumns = { @JoinColumn(name = "postId") }
    )
    private Set<Rating> ratings = new HashSet<>(); // here is the problem. i can relate ratings to this post, but how
                                                   // do i relate them with users which assigned their ratings to this
                                                   // post ?

    // ...
    // getters and setters
    // ...
} 
```

为了将评级和用户对列表与每个帖子相关联，需要更改哪些内容？

**UPD1**

明显错误：posts_ratings_users_map 的 PK 应该是`(postId, userId)`（不包括`ratingId`），否则同一个用户可以对同一个帖子进行不同的评分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:03:41.570

也许稍微改变你的模型。

用户有您所说的已定义的帖子。

为什么不创建一个新实体“UserRating”。

```
@Entity(name = "user_ratings")
public class UserRating {
    @Id
    @Column(nullable = false)
    @GeneratedValue
    private Integer id;

    @ManyToOne(nullable = false)
    @JoinColumn(name = "ratingId")
    private Rating rating;

    @ManyToOne(nullable = false)
    @JoinColumn(name = "authorId")
    private User ratedBy;
 } 
```

现在就你`Post`而不是`ManyToMany`有`OneToMany`关系。使用评级的 id 和用户作为`UserRating`类的键会更理想，但这在 JPA/Hibernate 中不容易建模，这使得它非常复杂。如果你有兴趣看看这些问题

[使用复合主键和注释映射多对​​多](https://stackoverflow.com/questions/6405746/mapping-manytomany-with-composite-primary-key-and-annotation)

[带有额外列的多对多休眠映射？](https://stackoverflow.com/questions/10416263/many-to-many-hibernate-mapping-with-extra-columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:22:54.897

将用户包括在评级类别中

```
@Entity(name = "ratings")
public class Rating {
@Id
@Column(nullable = false)
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;

@Column(nullable = false)
private String name;

@ManyToMany(mappedBy = "ratings")
private Set<Post> posts = new HashSet<>();

@Onetoone
private User ratedBy;

// ...
// getters and setters
// ...
} 
```

# android - MD5 是否保证可用于 Android 中的 MessageDigest？

> ID：14139684
> 
> 赞同：8
> 
> 时间：2013-01-03T13:15:38.570
> 
> 标签：android, md5, message-digest

`MessageDigest.getInstance("MD5")`在我直截了当地忽略可以抛出的检查异常之前，我想知道MD5摘要算法是否保证在所有Android设备中都可用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-28T15:14:35.853

我正在`java.security.NoSuchAlgorithmException: MessageDigest MD5 implementation not found`使用一些设备。这是列表：

GT-I8190
GT-I9100
GT-P3100
GT-S7562
HTC EVO 3D X515m
HTC Sensation 4G
HTC Sensation XL with Beats Audio X315b
LGL86C
LT22i
LT25i
LT26i
LT26ii
LT29i
SAMSUNG-SGH-I727
SGH-T769 SHV
-
E160K
3i
ST217
ST26

和别的。

不过，这主要是针对印度尼西亚的统计数据。有趣的是，统计数据是由 Crittercism 提供的，并且异常也是由 Crittercism 抛出的（看起来它在最新版本中使用了 MD5）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T15:21:49.427

Android JCE（Java Cryptography Extension）基于 bouncycastle 实现，但被剥离了。bouncycastle 提供了大量不同的 MessageDigest，可以在[这里](http://www.java2s.com/Code/Java/Security/Whatisinbouncycastlebouncycastle.htm)找到。

不能保证每台 Android 设备都支持 MD5，但它非常普遍，并且可能会出现在每台设备上，因为它在 bouncycastle 中受支持。如果您想知道设备是否支持 MD5，您可以查看设备支持的算法。更多信息在[这里](https://stackoverflow.com/questions/3683302/how-to-find-out-what-algorithm-encryption-are-supported-by-my-jvm)。

# c++ - Qt：安装 VS2012 LNK1123 转换为 COFF 期间失败

> ID：14139685
> 
> 赞同：6
> 
> 时间：2013-01-03T13:15:41.603
> 
> 标签：c++, qt, visual-studio-2012, qt-creator

**安装**VS2012****后**，我的 Qt 项目不再编译（我的计算机上有 VS2010 和 VS2012）。留言：`LNK1123: failure during conversion to COFF: file invalid or corrupt`。以前只用VS2010就可以了。**

 **对于 VS2012 环境，建议（请参阅[此处](https://stackoverflow.com/questions/10888391/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-c)）：

1.  编译`Enable Incremental Linking NO`
2.  卸载.net 4.5

由于我没有将 Qt 与 VS2012 结合使用（因此没有插件），因此我无法[按上述方式设置项目](https://stackoverflow.com/a/10890428/356726)。我也不能卸载 .net 4.5（另一个项目需要）。

**有没有机会解决这个问题？**我有一些相关的问题

1.  它会是针对 VS2012 C++ 编译器进行编译的解决方案吗？[这里它说](https://stackoverflow.com/questions/13969146/how-to-use-qt5-and-qt-creator-2-6-1-with-compiler-from-vs-2012)我需要自己编译 Qt 5 - 我想避免这样的麻烦
2.  我需要更新 Qt 吗？
3.  或者有没有办法`Incremental Linking to off`像在 VS 项目中一样简单地设置？我需要在构建设置中的哪个位置（下面的屏幕截图）进行设置？

Win 7, x86 QtCreator 2.5.2 Qt 4.8.1 VS2012 Ultimate with Update 1, VS2010 仍然安装

![项目编译设置](../Images/75b8d6ca775915aefb35d9fc4b370a01.png)

- 编辑 - -

我交叉检查了，路径仍然是 VS2010，并且没有包含 .net 4.5 路径。

![路径](../Images/b5985b94a29524e1203b56a329ee04ef.png)

-- 编辑 2 -- 根据惠普的评论

至少我已经尝试关闭我的防病毒软件。同样的问题。此外，我还检查了一些其他较小的 Qt 项目（我是一个零星的 Qt 编码器，所以我在该领域没有足够的经验）。他们确实编译。此外，我在受影响的 Qt 项目中的所有子项目都会编译，只有最后一部分（GUI，使用所有子项目）因上述错误而失败。

- 更进一步 -

在我的`.pro`文件中，我使用以下几行来获取`DEFINE` [hg 版本](https://stackoverflow.com/questions/10550071/qt-automatically-adding-version-for-application)，使用它很长时间。

```
VERSION = $$system(P:/Tools/TortoiseHg/hg parents --template '{latesttag}+{latesttagdistance}')
--- $$system line seems to be the line causing the COFF issue, WHY???
DEFINES += VERSION=\\\"$$VERSION\\\" 
```

拿出这个，我能够重新编译而没有 COFF 错误。但是由于一些混合的 4.8.0 / 4.8.1 库，应用程序崩溃了。然后我浏览了所有子项目，发现重复的构建配置。有时我有两次相同的条目，有时会丢失。更正了它们，应用程序现在运行（仍然没有版本标签）。

![构建配置](../Images/2f6f75cdcbf1bc5e4a7abd77c82286f4.png)

检查了 hg 上的评论`CMD`，似乎没问题。

```
>P:/Tools/TortoiseHg/hg parents --template '{latesttag}+{latesttagdistance}'
'0.8.902+1' 
```

**那么为什么这会导致 COFF 错误，以及为什么配置混乱？**. 猜猜我对这个废话来说太老了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:21:34.003

所有归功于**ba__friend**的提示。原因是[这里](https://stackoverflow.com/questions/10888391/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-c/14144713#14144713)`cvtres.exe`描述的错误。禁用旧的并且一切都很好（至少在我的特定情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:44:54.853

我遇到了这个问题，就我而言，原因是在已经安装了 Visual Studion 2010 的机器上安装了 Visual Studio 2012。我也无法在两个 Visual Studio 中运行 C++ 项目（同样的错误）。有三种解决方案：

1.  临时解决方案：使用Release mod而不是Debug，应用程序运行，但没有调试可用。
2.  下载并安装 Qt MinGW 而不是 VS 版本（两倍大小）
3.  （推荐）安装/重新安装 Visual Studio 2010 的 SP1。

有一个很好的编码！**

# css - 是否可以像 jquery 一样在 google 中托管 twitter bootstrap.css？

> ID：14139688
> 
> 赞同：2
> 
> 时间：2013-01-03T13:16:00.427
> 
> 标签：css, api, twitter, twitter-bootstrap, google-api

> **可能重复：**
> [Twitter Bootstrap 的托管版本（可能是谷歌？）](https://stackoverflow.com/questions/9887867/hosted-version-of-twitter-bootstrap-maybe-google)

截至目前，我正在像这样[从谷歌加载我的 jquery。](http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

Twitter Bootstrap 是github 中[最受欢迎的项目](https://github.com/popular/watched)。我认为它日益流行，而且我很确定许多网站都在使用 bootstrap。

如果有一个集中的 api 来加载引导程序，页面显然会加载得更快，因为它可能已经像 jQuery 一样被缓存在客户端的浏览器中。

像这样的东西

```
<link rel="stylesheet" type="text/css" href="http://bootstrap.twitter.com/2.2.2/bootstrap.min.css" />
<script src="//bootstrap.twitter.com/2.2.2/bootstrap.min.js"></script> 
```

可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T13:16:49.927

讨厌给出这么简单的答案，但是：

[http://www.bootstrapcdn.com](http://www.bootstrapcdn.com)

# .net - 为什么 ServiceSecurityContext.Current 为空？

> ID：14139689
> 
> 赞同：2
> 
> 时间：2013-01-03T13:16:07.420
> 
> 标签：.net, wcf, security, wcf-security

我对 WCF REstful 服务不是很熟悉。

我试图测试我的方法——它从 Db 中删除了一些记录——以及我调用的方法：

ServiceSecurityContext.Current 在某些时候（为了修改 LastModified 属性），我得到 NullArgumentException，因为 .Current 为空。

我正在使用 Windows 身份验证。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T21:10:31.627

可能您正在拨打的电话没有启用身份验证。查看绑定和服务行为，看看是否在那里发现问题。

# html - 具有内联样式的元素内元素的CSS选择器？

> ID：14139690
> 
> 赞同：27
> 
> 时间：2013-01-03T13:16:08.243
> 
> 标签：html, css, css-selectors, inline-styles

是否有 CSS 选择器来定位具有内联样式的元素？那么我可以只使用 CSS 来定位第一个跨度而不是第二个跨度吗？

如果没有，这可以用 jQuery 完成吗？

[http://jsfiddle.net/TYCNE/](http://jsfiddle.net/TYCNE/)

```
<p style="text-align: center;">
    <span>target</span>
</p>

<p>
    <span>not target</span>
</p>
​ 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-29T06:34:52.367

茶会有点晚了，但我想我会分享我找到并使用的解决方案。

如果您可以完全匹配样式属性，@simone 的答案是完美的。但是，如果您需要定位可能具有与之关联的其他内联样式的内联样式属性，您可以使用：

```
p[style*="text-align:center;"] 
```

> “*=”表示“在属性值的任意位置匹配以下值”。

有关其他选择器的更多参考或更多详细信息，请参阅 css-tricks.com 上的此博客文章：

**CSS 选择器上的 Skinny**

[http://css-tricks.com/attribute-selectors/#rel-anywhere](http://css-tricks.com/attribute-selectors/#rel-anywhere)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-03T13:19:35.433

```
p[style="text-align: center;"] {
  color: red;
} 
```

然而，这很丑陋。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-25T01:15:58.667

如果您想将样式应用于特定的规则声明，您也可以使用 style*。这将匹配所有具有内联样式的元素，而不管应用的值如何。

```
div[style*="background-image"] {
  background-size: cover;
  background-repeat: no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T13:18:50.450

利用 ：

```
​p[style] span {
  color: red;   
}​ 
```

# android - 如何在 facebook 上使用 android 中的 graph api 分享

> ID：14139691
> 
> 赞同：0
> 
> 时间：2013-01-03T13:16:11.280
> 
> 标签：android, facebook-graph-api

我想在我的应用程序中共享一个链接。我没有在图形 api 中找到任何用于共享链接的 api。

在 facebook 中分享和发帖有什么区别？如何进行分享？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:25:41.563

您可以使用以下代码在 facebook 上发布到墙上：

```
Bundle parameters = new Bundle();
parameters.putString("message","YOUR_MESSAGE");
parameters.putString("link", "ANY_LINK");
String response = facebook.request("me/feed", parameters,
                    "POST"); 
```

另外要上传图片，您可以使用以下代码：

```
Bundle parameters = new Bundle();
parameters.putString("message","YOUR_MESSAGE");
parameters.putString("caption","ANY_CAPTION");
parameters.putByteArray("picture", "IMAGE_LINK");
String response = facebook.request("me/photos", parameters,
                    "POST"); 
```

希望它会帮助你。

# vb.net - Visual Studio 最后 4 行错误，我不知道为什么

> ID：14139699
> 
> 赞同：-2
> 
> 时间：2013-01-03T13:17:03.973
> 
> 标签：vb.net, visual-studio-2012

```
Public Class Form1
    Private _zkouska1 As New Bitmap("C:\Users\w\Desktop\zkouska1.gif")
    Private _zkouska2 As New Bitmap("C:\Users\w\Desktop\zkouska2.gif")

    Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)
        MyBase.OnPaint(e)

        e.Graphics.DrawImageUnscaled(New Bitmap(_zkouska1), 0, 0)
    End Sub
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        MyNewSub()
    End Sub

    Sub MyNewSub()
        BackColor = Color.Red
        TransparencyKey = BackColor
    End Sub
    Private Sub Example_ControlAdded(ByVal sender As Object, ByVal e As System.Windows.Forms.ControlEventArgs) Handles Me.ControlAdded

        AddHandler e.Control.MouseClick, AddressOf Example_MouseClick
    End Sub

    Private Sub Example_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
        If True Then e.Graphics.DrawImageUnscaled(New Bitmap(_zkouska2), 0, 0) = True
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:28:11.257

您没有具体指出哪些行导致了问题，但是这一行的问题：

```
If True Then e.Graphics.DrawImageUnscaled(New Bitmap(_zkouska2), 0, 0) = True 
```

是 MouseEventArgs 没有 Graphics 成员。也许这里要做的事情是使用 Mouse_Clicked 事件来设置一个变量来跟踪鼠标是否被单击（以及单击位置），并使用 Paint 事件来进行实际的绘图。

因此，您将向该类添加一个布尔变量：

```
Private _clicked As Boolean 
```

将 MouseClicked 事件更改为如下所示：

```
Private Sub Example_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
    _clicked = True
End Sub 
```

添加一个 Paint 事件并创建该事件，如下所示：

```
Private Sub Form1_Paint(sender As System.Object, e As System.Windows.Forms.PaintEventArgs) Handles MyBase.Paint
    If _clicked Then
        e.Graphics.DrawImageUnscaled(New Bitmap(_zkouska2), 0, 0)
    End If
End Sub 
```

# c# - 错误禁止 403 通过 C# 模拟请求

> ID：14139707
> 
> 赞同：2
> 
> 时间：2013-01-03T13:17:30.307
> 
> 标签：c#, httpwebrequest

**范围：**

我正在开发一个 C# 应用程序来模拟[对该站点](https://www.sefaz.rr.gov.br/sintegra/servlet/hwsintco)的查询。我非常熟悉模拟 Web 请求以实现相同的人工步骤，但使用代码代替。

如果您想自己尝试，只需在 CNPJ 框中输入此数字： `08775724000119`然后输入验证码并单击`Confirmar`

我已经处理了验证码，所以这不再是问题了。

**问题：**

一旦我对“CNPJ”执行 POST 请求，就会引发异常：

> 远程服务器返回错误：(403) Forbidden。

**Fiddler 调试器输出：**

[Fiddler 下载链接](http://www.fiddler2.com/fiddler2/)

这是我的浏览器生成的请求，而不是我的代码

```
POST https://www.sefaz.rr.gov.br/sintegra/servlet/hwsintco HTTP/1.1
Host: www.sefaz.rr.gov.br
Connection: keep-alive
Content-Length: 208
Cache-Control: max-age=0
Origin: https://www.sefaz.rr.gov.br
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko)    Chrome/23.0.1271.97 Safari/537.11
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: https://www.sefaz.rr.gov.br/sintegra/servlet/hwsintco
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: GX_SESSION_ID=gGUYxyut5XRAijm0Fx9ou7WnXbVGuUYoYTIKtnDydVM%3D;   JSESSIONID=OVuuMFCgQv9k2b3fGyHjSZ9a.undefined

//    PostData : 
_EventName=E%27CONFIRMAR%27.&_EventGridId=&_EventRowId=&_MSG=&_CONINSEST=&_CONINSESTG=08775724000119&cfield=rice&_VALIDATIONRESULT=1&BUTTON1=Confirmar&sCallerURL=http%3A%2F%2Fwww.sintegra.gov.br%2Fnew_bv.html 
```

**使用的代码示例和参考：**

我正在使用自行开发的库来处理/包装 Post 和 Get 请求。

请求对象与浏览器发出的参数（Host、Origin、Referer、Cookies ..）具有相同的参数（在此处记录了我的提琴手）。

我还设法`ServicePointValidator`使用以下方法设置证书：

```
ServicePointManager.ServerCertificateValidationCallback = 
    new RemoteCertificateValidationCallback (delegate { return true; }); 
```

在所有这些配置之后，我仍然得到禁止的异常。

这是我模拟请求并引发异常的方式

```
 try
        {
            this.Referer = Consts.REFERER;

            // PARAMETERS: URL, POST DATA, ThrownException (bool)
            response = Post (Consts.QUERYURL, postData, true);
        }
        catch (Exception ex)
        {
            string s = ex.Message;
        } 
```

提前感谢您对我的问题的任何帮助/解决方案

**更新1：**

我错过了对生成 cookie 的主页的请求（感谢 @W0lf 指出这一点）

现在还有一件奇怪的事情。Fiddler 没有在请求中显示我的 Cookie，但它们在这里： ![饼干罐](../Images/db4f309d50a2162b3091a0c6b609aadb.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:42:52.730

我使用浏览器发出了成功的请求，并将其记录在 Fiddler 中。

唯一与您的要求不同的是：

*   我的浏览器没有为参数发送任何值`sCallerURL`（我有`sCallerURL=`而不是`sCallerURL=http%3A%2F%2Fwww....`）
*   会话 ID 不同（显然）
*   我有其他`Accept-Language:`价值观（我很确定这不重要）
*   是`Content-Length`不同的（显然）

## 更新

好的，我认为 Fiddler 跟踪来自您的应用程序。如果您没有根据您的请求设置 cookie，请执行以下操作：

*   在发布数据之前，向`https://www.sefaz.rr.gov.br/sintegra/servlet/hwsintco`. 如果您检查响应，您会注意到该网站发送了两个会话 cookie。
*   当您执行 POST 请求时，请确保附上您在上一步中获得的 cookie

如果您不知道如何存储 cookie 并在其他请求中使用它们，请查看[此处](https://stackoverflow.com/a/2972725/390819)。

## 更新 2

### 问题

好的，我设法重现了 403，找出了导致它的原因，并找到了修复方法。

POST 请求中发生的情况是：

*   服务器响应状态 302（临时重定向）和重定向位置
*   浏览器重定向（基本上是 GET 请求）到该位置，同时发布两个 cookie。

.NET 的 HttpWebRequest 尝试无缝地执行此重定向，但在这种情况下存在两个问题（我会考虑 .NET 实现中的错误）：

1.  POST(redirect) 之后的 GET 请求与 POST 请求 ( ) 具有相同的内容类型`application/x-www-form-urlencoded`。对于 GET 请求，不应指定此项

2.  cookie 处理问题（最重要的问题） - 网站发送两个 cookie：`GX_SESSION_ID`和`JSESSIONID`. 第二个有一个指定的路径 ( `/sintegra`)，而第一个没有。

区别在于：浏览器默认`/`为第一个 cookie 分配路径 (root)，而 .NET 为其分配请求 url 路径 ( `/sintegra/servlet/hwsintco`)。

由于这个原因，最后一个 GET 请求（重定向后）`/sintegra/servlet/hwsintpe...`没有获得传入的第一个 cookie，因为它的路径不对应。

### 修复

*   对于重定向问题（带有内容类型的 GET），解决方法是手动进行重定向，而不是依赖 .NET 来解决此问题。

为此，请告诉它不要遵循重定向：

```
postRequest.AllowAutoRedirect = false 
```

然后从 POST 响应中读取重定向位置并手动对其执行 GET 请求。

*   cookie 问题（[也发生在其他人](https://stackoverflow.com/q/292778/390819)身上）

为此，我发现的解决方法是从 CookieContainer 中获取放错位置的 cookie，正确设置它的路径并将其添加回容器中的正确位置。

这是执行此操作的代码：

```
private void FixMisplacedCookie(CookieContainer cookieContainer)
{
    var misplacedCookie = cookieContainer.GetCookies(new Uri(Url))[0];

    misplacedCookie.Path = "/"; // instead of "/sintegra/servlet/hwsintco"

    //place the cookie in thee right place...
    cookieContainer.SetCookies(
        new Uri("https://www.sefaz.rr.gov.br/"), 
        misplacedCookie.ToString());
} 
```

* * *

### 这是使其工作的所有代码：

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace XYZ
{
    public class Crawler
    {

        const string Url = "https://www.sefaz.rr.gov.br/sintegra/servlet/hwsintco";

        public void Crawl()
        {
            var cookieContainer = new CookieContainer();

            /* initial GET Request */
            var getRequest = (HttpWebRequest)WebRequest.Create(Url);
            getRequest.CookieContainer = cookieContainer;
            ReadResponse(getRequest); // nothing to do with this, because captcha is f#@%ing dumb :)

            /* POST Request */
            var postRequest = (HttpWebRequest)WebRequest.Create(Url);

            postRequest.AllowAutoRedirect = false; // we'll do the redirect manually; .NET does it badly
            postRequest.CookieContainer = cookieContainer;
            postRequest.Method = "POST";
            postRequest.ContentType = "application/x-www-form-urlencoded";

            var postParameters =
                "_EventName=E%27CONFIRMAR%27.&_EventGridId=&_EventRowId=&_MSG=&_CONINSEST=&" +
                "_CONINSESTG=08775724000119&cfield=much&_VALIDATIONRESULT=1&BUTTON1=Confirmar&" +
                "sCallerURL=";

            var bytes = Encoding.UTF8.GetBytes(postParameters);

            postRequest.ContentLength = bytes.Length;

            using (var requestStream = postRequest.GetRequestStream())
                requestStream.Write(bytes, 0, bytes.Length);

            var webResponse = postRequest.GetResponse();

            ReadResponse(postRequest); // not interested in this either

            var redirectLocation = webResponse.Headers[HttpResponseHeader.Location];

            var finalGetRequest = (HttpWebRequest)WebRequest.Create(redirectLocation);

            /* Apply fix for the cookie */
            FixMisplacedCookie(cookieContainer);

            /* do the final request using the correct cookies. */
            finalGetRequest.CookieContainer = cookieContainer;

            var responseText = ReadResponse(finalGetRequest);

            Console.WriteLine(responseText); // Hooray!
        }

        private static string ReadResponse(HttpWebRequest getRequest)
        {
            using (var responseStream = getRequest.GetResponse().GetResponseStream())
            using (var sr = new StreamReader(responseStream, Encoding.UTF8))
            {
                return sr.ReadToEnd();
            }
        }

        private void FixMisplacedCookie(CookieContainer cookieContainer)
        {
            var misplacedCookie = cookieContainer.GetCookies(new Uri(Url))[0];

            misplacedCookie.Path = "/"; // instead of "/sintegra/servlet/hwsintco"

            //place the cookie in thee right place...
            cookieContainer.SetCookies(
                new Uri("https://www.sefaz.rr.gov.br/"),
                misplacedCookie.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T12:56:38.703

有时HttpWebRequest需要代理初始化：request.Proxy = new WebProxy();//在我的情况下它不需要参数，但是你可以将它设置为你的代理地址

# spring-mvc - Spring RequestMapping 正则表达式发生

> ID：14139714
> 
> 赞同：0
> 
> 时间：2013-01-03T13:17:59.727
> 
> 标签：spring-mvc

我有一个这样的 url 模式：

[http://xy.com/param1/value1/param2/value2/..../paramN/valueN](http://xy.com/param1/value1/param2/value2/..../paramN/valueN)

我想在 Spring colntroller 中写一个@RequestMapping，但是如果我不知道参数和值有多少，我不知道该怎么办。

有什么方法可以收集所有参数和值吗？或者有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:25:34.560

*   为什么你根本不能使用没有`@PathVariable`s 的标准方式？所以网址会像

`http://xy.com?param1=value1&param2=value2&....&paramN=valueN`

您的注释为：

```
 @RequestMapping("xyz1")
    @ResponseBody
    public String index(@RequestParam(required = false) String param1, @RequestParam(required = false) String param2,
            @RequestParam(required = false) String paramN) {

        return "Param1=" + param1 + ", Param2=" + param1 + ", ParamN=" + paramN;
    }

    @RequestMapping("xyz2")
    @ResponseBody
    public String index2(HttpServletRequest servletRequest) {
        StringBuilder result = new StringBuilder();
        for (Entry<String, String[]> entry : servletRequest.getParameterMap().entrySet()) {
            result.append(entry.getKey());
            result.append('=');
            result.append(Arrays.toString(entry.getValue()));
            result.append(", ");
        }

        return result.toString();
    } 
```

where`@RequestParam`在所有预期参数已知时`servletRequest.getParameterMap()`使用，如果您确实需要动态处理它们，则使用它们。

*   或者，您可以使用[此处](http://java.dzone.com/articles/spring-3-webmvc-optional-path)`@PathVariable`描述的真正可选的 s采用 hackish 方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:34:13.373

我使用的是 Spring ModelAttribute 而不是

# php - 日期格式为“1976-03-06T23:59:59.999Z”

> ID：14139721
> 
> 赞同：-1
> 
> 时间：2013-01-03T13:18:32.190
> 
> 标签：php, date

如何使用这种格式在 PHP 中获取日期？

```
1976-03-06T23:59:59.999Z 
```

我想要该格式的当前日期 + 10 小时。我试过这个：

```
date("Y-m-d",strtotime("+10 hours")); 
```

但我看不到如何获得这种格式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:46:00.463

要准确获得您要查找的内容，您需要执行以下操作：

设置 PHP 时区以确保无论您的服务器或 PHP 时区如何，时间输出都将位于正确的区域（在您的情况下为“Z”）。

```
date_default_timezone_set('UTC'); 
```

然后计算你需要的时间（当前时间加10小时）；

```
$timestamp = time() + (10 * 60 * 60); // now + 10 hours * 60 minutes * 60 seconds 
```

然后转换为格式化的日期。

如果您不关心秒和毫秒，那么请使用 PHP 的内置函数来处理 ISO 8601 日期。

```
echo date('c', $timestamp); // Will output 1976-03-06T23:59Z 
```

否则，您将需要确定当前微秒并手动组合日期字符串。

```
// Get current timestamp and milliseconds 
list($microsec, $timestamp) = explode(" ", microtime()); 

// reduce microtime to 3 dp
$microsec = substr($microsec,0,3); 

// Add 10 hours (36,000 seconds) to the timestamp
$timestamp = (int)$timestamp + (10 * 60 * 60); 

// Construct and echo the date string
echo date('Y-m-d', $timestamp) . 'T' . date('H:i:s', $timestamp) . '.' . $microsec . 'Z'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:44:28.447

这与您正在寻找的非常接近。

```
date('c')
// prints 2013-01-03T18:39:07-05:00 
```

正如其他人所说，检查文档以进行更多定制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:22:32.480

只需将`10 * 60 * 60`秒数添加到当前`time`.

```
date('c', time() + 10 * 60 * 60); 
```

# html - 如何在画布中插入滚动视图容器？

> ID：14139724
> 
> 赞同：0
> 
> 时间：2013-01-03T13:18:53.037
> 
> 标签：html, canvas, html5-canvas

我正在尝试在画布内创建一个滚动视图容器。请注意我不希望整个画布滚动，只有一个子视图，即菜单会在画布上滚动。

我想过使用该`canvas.clip()`方法创建一个蒙版并根据滚动位置移动底层实体，但该`clip()`方法隐藏了画布的所有其他实体。有什么方法可以选择将被剪掉的内容？

任何想法如何去做？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:30.283

是的。在原始画布的顶部叠加*第二个画布*，并使用 CSS z-index 来区分哪一个在另一个之上。然后只需在滚动视图画布上使用剪辑方法。

```
<div id="container">
    <canvas id="canvas"         width="800" height="500"></canvas>
    <canvas id="scroll-view"    width="800" height="500"></canvas>
</div>

div
{
    position:relative;
    width:800px;
    height:500px;
}
canvas
{
    position:absolute;
    left:0;
    top:0;
    display:block;
    width:800px;
    height:500px;
}
#canvas
{
    z-index:1;
}
#scroll-view
{
    z-index:2;
} 
```

# file - SHA-256 或 MD5 用于文件完整性

> ID：14139727
> 
> 赞同：99
> 
> 时间：2013-01-03T13:19:08.090
> 
> 标签：file, hash, md5, sha256

我知道 SHA-256 在安全性等方面优于 MD5，但是，如果我要使用一种仅检查文件完整性的方法（即与密码加密等无关），是否有任何优势使用 SHA-256？

由于 MD5 是 128 位，而 SHA-256 是 256 位（因此是两倍大）...

1.  加密需要两倍的时间吗？

2.  在时间不重要的情况下，例如在备份程序中，只需要文件完整性，有人会反对 MD5 的不同算法，甚至建议不同的技术吗？

3.  使用 MD5 会产生校验和吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-03T13:26:52.757

SHA256 和 MDA5 都是散列算法。他们获取您的输入数据，在本例中是您的文件，并输出一个 256/128 位数字。这个数字是一个校验和。没有进行加密，因为无限数量的输入可能导致相同的哈希值，尽管实际上冲突很少见。

[根据这个答案](https://stackoverflow.com/questions/2722943/is-calculating-an-md5-hash-less-cpu-intensive-than-sha-1-or-sha-2)，SHA256 的计算时间比 MD5 多一些。

顺便说一句，我会说 MD5 可能适合您的需要。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-03T13:22:05.000

To 1)：是的，在大多数 CPU 上，SHA-256 的速度只有 MD5 的 40%。

To 2）：在这种情况下，我会主张与 MD5 不同的算法。我肯定更喜欢被认为是安全的算法。不过，这更多的是一种感觉。在这种情况下，这很重要，而不是现实，例如，如果您的备份系统遇到攻击基于 MD5 的证书的示例案例，那么在这样的示例中，您可能有两个文件具有不同的数据，但具有相同的 MD5 校验和。对于其他情况，这无关紧要，因为 MD5 校验和实际上只有在故意引发时才会发生冲突（= 不同数据的相同校验和）。我不是各种散列（校验和生成）算法的专家，所以我不能建议另一种算法。因此，这部分问题仍然悬而未决。建议的进一步阅读是[Cryptographic Hash Function -](http://en.wikipedia.org/wiki/Cryptographic_hash_function#File_or_data_identifier)维基百科上的文件或数据标识符。在该页面的下方还有一个加密哈希算法列表。

To 3): MD5 是一种计算校验和的算法。使用此算法计算的校验和称为 MD5 校验和。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-01-11T11:32:46.083

每个答案似乎都表明您需要使用安全哈希来完成这项工作，但所有这些都被调整为缓慢以迫使暴力攻击者拥有大量计算能力，并且根据您的需要，这可能不是最佳解决方案。

有专门设计用于尽可能快地散列文件以检查完整性和比较（`murmur`... `XXhash`）的算法。显然，这些不是为安全而设计的，因为它们不符合安全散列算法（即随机性）的要求，但*对于大消息的*冲突率很低。如果您追求的不是安全性而是速度，这些特性使它们成为理想之选。

这种算法和比较的例子可以在这个优秀的答案中找到：[哪种散列算法最适合唯一性和速度？](https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed).

例如，我们在 Q&A 网站上使用`murmur3`对用户上传的图像进行哈希处理，因此即使用户在多个答案中上传相同的图像，我们也只存储一次。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-05T23:35:55.607

底层 MD5 算法不再被认为是安全的，因此虽然 md5sum 非常适合在与安全无关的情况下识别已知文件，但如果文件有可能被故意和恶意篡改，则不应依赖它。在后一种情况下，强烈建议使用更新的散列工具，例如 sha256sum。

因此，如果您只是想检查文件损坏或文件差异，当文件的来源受信任时，MD5 就足够了。如果您要验证来自不受信任来源的文件的完整性，或者通过未加密连接来自受信任来源的文件的完整性，MD5 是不够的。

另一位评论者指出，Ubuntu 和其他人使用 MD5 校验和。Ubuntu 已经迁移到 PGP 和 SHA256，除了 MD5，但更强大的验证策略的文档更难找到。有关详细信息，请参阅[HowToSHA256SUM 页面](https://help.ubuntu.com/community/HowToSHA256SUM)。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-01-03T13:29:37.507

1.  不，它不那么快但没那么慢
2.  对于备份程序，可能需要比 MD5 更快的东西

总而言之，我会说除了文件名之外的 MD5 是绝对安全的。SHA-256 会因为它的大小而变得更慢且更难处理。

您也可以毫无问题地使用比 MD5 更安全的东西。如果没有人试图破解您的文件完整性，这也是安全的。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-03T13:30:09.847

技术上认可 MD5 比 SHA256 更快，因此仅验证文件完整性就足够了，并且性能更好。

您可以查看以下资源：

*   [流行加密算法的速度比较](http://www.cryptopp.com/benchmarks.html)
*   [加密哈希函数的比较](http://en.wikipedia.org/wiki/Comparison_of_cryptographic_hash_functions)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-02-15T08:46:33.360

1.  是的，在大多数 CPU 上，SHA-256 比 MD5 慢 2 到 3 倍，但主要不是因为它的哈希值更长。在此处查看其他答案以及[此 Stack Overflow 问题](https://stackoverflow.com/questions/2722943)的答案。
2.  这是不适合 MD5 的备份方案：
    *   您的备份程序会散列每个要备份的文件。然后它通过其哈希存储每个文件的数据，因此如果您备份同一个文件两次，您最终只会得到一份副本。
    *   攻击者可以使系统备份他们控制的文件。
    *   攻击者知道他们想要从备份中删除的文件的 MD5 哈希值。
    *   然后，攻击者可以使用 MD5 的已知弱点来制作一个新文件，该文件与要删除的文件具有相同的哈希值。备份该文件时，它将替换要删除的文件，并且该文件的备份数据将丢失。
    *   这个备份系统可以通过不替换之前遇到过哈希的文件来加强一点（并提高效率），但是攻击者可以通过抢先备份一个特殊构造的虚假文件来阻止备份具有已知哈希的目标文件具有相同哈希的文件。
    *   显然，大多数系统（备份系统和其他系统）不满足这种攻击实际所需的条件，但我只是想举一个例子，说明 SHA-256 比 MD5 更可取的情况。您正在创建的系统是否属于这种情况不仅取决于 MD5 和 SHA-256 的特性。
3.  是的，像 MD5 和 SHA-256 生成的加密哈希是一种校验和。

快乐散列！

# objective-c - 为什么图像不显示在 UIImageView 中？

> ID：14139731
> 
> 赞同：1
> 
> 时间：2013-01-03T13:19:24.320
> 
> 标签：objective-c, ios, ios6, uiimageview, uiimage

```
UIImage *image = [UIImage imageNamed:[currentPhoto fileName]];
NSLog(@"%@",[currentPhoto fileName]);
[self.currentImage setImage:image]; 
```

它在我想在 UIImageView 上显示的调试区域中显示正确的图像名称。currentImage 是挂在 .h 文件中的插座

是不是因为 iOS 6 的新自动布局功能我没有得到它。它曾经在 iOS 5 中工作。

我的目的是在特定场景的 UIImageView 中显示图像

我还尝试设置我在项目文件夹中复制的默认图像。但我得到一个错误调试区域如下：

```
Could not load the "myImage.png" image referenced from a nib in the bundle with identifier "com.xxx.xxx" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:14:45.940

确保图像名称也带有扩展名（.jpg/.png）。您还为 imageView 定义了 iBoutlet 吗？

此外，如果问题出在自动布局上，您可以在 Xib 中禁用它。从这里学习。 [http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:47:49.767

当您转到 File-->Add Files “ProjectName”时，会弹出下面的窗口。
Xcode 选择的默认选项是“为任何添加的文件夹创建文件夹引用”，如下图所示，它正在产生
**错误（在调试区域中）：**
`Could not load the "myImage.png" image referenced from a nib in the bundle with identifier "com.xxx.xxx"`

![选择了错误的选项](../Images/3b0a49720f0efa751d76545b2dba7f09.png)

**上述问题的解决方案：**
选择Xcode通常选择的“为任何添加的文件夹创建组”这次不是这种情况。

![在此处输入图像描述](../Images/922f606ae6b374906e963b7c225ae022.png)

解决方案是如此简单，但有时会发生愚蠢的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:06:42.677

如果您的图像未添加到项目中，它将无法用于 imageNamed 调用。要加载未添加到项目中的图像，请使用此调用

`UIImage * image = [UIImage imageWithContentsOfFile:imgFilePath];`

# java - Eclipse - libGDX HTML 项目中依赖项目的依赖关系

> ID：14139733
> 
> 赞同：1
> 
> 时间：2013-01-03T13:19:26.537
> 
> 标签：java, android, eclipse, html, libgdx

我正在使用 LibGDX 框架制作游戏。所以我有我的核心项目，我们称之为**Game**，然后是 3 个启动器项目：-desktop、-android 和 -html。但这还不是全部。

我的核心项目**Game**也链接到另一个项目，我们称之为**Custom**，它包含通用且易于重用的代码，可以帮助我节省时间，这是我的 LibGDX 开发的一种个人框架。桌面和 Android 版本一切正常，但是当我启动 Html 版本时，我得到了`java.lang.ClassNotFoundException`关于位于**自定义**项目中的类的信息，这些类被我的核心项目中的类引用或继承。

我真的不知道为什么它在桌面和安卓上运行良好，以及为什么我在 html 版本中出现这些错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:54:08.520

问题解决了，我不得不：

1）在我的**自定义项目的***src*文件夹中添加一个*CustomFile.gwt.xml*文件，其中包含以下文本：

 ***```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit trunk//EN" "http://google-web-toolkit.googlecode.com/svn/trunk/distro-source/core/src/gwt-module.dtd">
<module>
    <source path="com/name/libgdx" />
</module> 
```

`com.name.libgdx`是我的所有子包和 java 源文件位于我的自定义项目中的位置。

2）在我的**Game-html项目的***GwtDefinition.gwt.xml*文件中添加对应的`<inherits />`标签如下：

 ***```
<inherits name="CustomFile"/> // References Custom/src/CustomFile.gwt.xml 
```

现在我有一个更烦人的问题，即 GWT 不支持`java.lang.Thread`该类......******

# jquery - 调整simpledialog2的大小

> ID：14139738
> 
> 赞同：1
> 
> 时间：2013-01-03T13:19:48.823
> 
> 标签：jquery, html, jquery-mobile, hybrid

我在混合 android 开发中使用[simpledialog2 。](http://dev.jtsage.com/jQM-SimpleDialog/demos2/index.html)我想知道是否有任何方法可以在显示之前调整对话框的大小，因为由于一些额外的内容，对话框在横向模式下不适合屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:38:08.563

simpleDialog2 有大小和位置选项：

```
zindex: CSS zIndex
width: CSS width
left: CSS left
top: CSS top 
```

您可以直接在这里找到它们：http: [//dev.jtsage.com/jQM-SimpleDialog/demos2/options.html](http://dev.jtsage.com/jQM-SimpleDialog/demos2/options.html)

这是证据：http: [//jsfiddle.net/Gajotres/kzxS9/](http://jsfiddle.net/Gajotres/kzxS9/)

# entity-framework - 在以下情况下，L2E 加入的最佳方法是什么？

> ID：14139741
> 
> 赞同：0
> 
> 时间：2013-01-03T13:19:55.897
> 
> 标签：entity-framework, linq-to-entities

以下是两张表：

国家 >> CountryId, CountryName 城市 >> CityId, CityName, CountryId

我正在使用存储库模式从数据库生成实体集。（例如，`repository.GetQuery<City>()`）

现在我想编写这样一个查询，当我获取 City 时，它还会为结果集中的相应 Country 生成一个填充。所以我可以像 city.Country.CountryName 一样访问它。

我知道我可以通过加入两个实体集来执行此操作，但这在性能上肯定是昂贵的。可能， .Include<> 可以帮助我实现这一目标。有什么想法/例子来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:33:15.697

由于您使用的是实体框架，我将假设您的 City 对象具有 Country 的导航属性，该属性指向相应的 Country 记录。

因此，除非您特别想使用延迟加载，否则您需要使用 Include。好消息是您可以在存储库内部进行包含，而不必在外部编写该代码。这方面的一个例子可以在[这里](http://www.appetere.com/Blogs/SteveM/May-2012/Passing-Include-statements-into-a-Repository)找到。

让我知道这是否有效。

# mysql - mysqldump命令的windows批处理文件

> ID：14139743
> 
> 赞同：8
> 
> 时间：2013-01-03T13:19:56.347
> 
> 标签：mysql, windows, batch-file

这是我第一次制作 Windows 批处理文件。我不想先做实验，因为它与实时服务器有关。我使用以下 open cmd write 来备份 mySql 数据库

```
mysqldump -u user -p DBname >C:\DBname.sql 
```

然后cmd询问密码

```
password = password 
```

我想制作一个 Windows 批处理文件，点击后我希望执行上述功能。谁能给一些.bat文件相关脚本的说明

到目前为止我写了这个

```
ECHO OFF
mysqldump -u user -p DBname >C:\DBname.sql
GO
SET password = password 
Go 
```

但它仍然提示我输入密码。我希望密码自动输入

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-22T22:13:16.970

上面仍然提示我输入密码，我使用下面的内容使其正常工作。

```
"C:\Program Files (x86)\MySQL\MySQL Server 5.5\bin\mysqldump.exe" -uroot -pDBPass DBName > C:\DBname.sql 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T13:41:53.830

单线：

`mysqldump -u user -p DBname --password YOURPASSWORD > C:\DBname.sql`

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T09:01:50.763

你可以使用这个：

```
"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump.exe" -u root -proot test > D:\DBname.sql 
```

请注意：`-proot`,`p`和`root`必须在一起

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T07:35:12.193

```
"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump.exe" -u root -pmypassword --databases mydatabase --hex-blob > C:\mybackup.sql 
```

粘贴到 bat 文件中，我无法让普通命令在任务调度程序中工作，所以使用了 BAT

您可以省略 --hex-blob，如果您使用的是 blob 列

# c# - 如何在使用泛型类型时指定匿名类型的类型

> ID：14139744
> 
> 赞同：4
> 
> 时间：2013-01-03T13:20:01.577
> 
> 标签：c#, .net, linq, anonymous-types, typeinitializeexception

标题相当混乱。我将尝试用一个例子来解释。考虑下面的代码：

```
String[] str={"Apple","Banana","Cherry","Orange"};
var anoCollection=from e in str select new
                                         {
                                          ch=e[0],
                                          length=e.Length
                                         }
dataGridView.DataSource=anoCollection.ToList(); //TypeInitializationException 
```

我觉得我需要在上面的案例中提到该`ToList<T>()`方法的类型。但是我怎么能在这里提到匿名类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:23:41.677

永远*不可能*直接提及匿名类型，但您不应该这样做。泛型类型推断意味着您不需要指定`<T>`in `.ToList<T>()`- 编译器会自动注入发明的类型。

只有几种方法可以引用匿名类型：

*   via `someObj.GetType()`，其中`someObj`是匿名类型的实例
*   通过泛型，作为 a `T`，通过泛型类型推断调用泛型方法（如 中`ToList()`）
*   反射的各种其他用途，拉入`T`通孔`GetGenericTypeParameters()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:32:02.587

这可能不是您所要求的，但如果您以后想将 DataBoundItem 用于一行，您可以这样做：

```
var item = TypeExtensions.CastByPrototype(row.DataBoundItem, new { ch = 'a', length = 0});
//you can use item.ch and item.length here
Trace.WriteLine(item.ch); 
```

在此方法的支持下：

```
public static class TypeExtensions
{
    public static T CastByPrototype<T>(object obj, T prototype)
    {
        return (T)obj;
    }
} 
```

# java - 为什么GAE Java后台每隔几秒就有/_ah/background调用

> ID：14139745
> 
> 赞同：5
> 
> 时间：2013-01-03T13:20:02.253
> 
> 标签：java, google-app-engine, background

我不断看到 URL /_ah/background 的日志。是因为使用了后台线程吗？谁在拨打这些电话，谁在接听电话。有人知道吗？谢谢！

# javascript - 页面加载时如何获取日历？

> ID：14139748
> 
> 赞同：0
> 
> 时间：2013-01-03T13:20:08.923
> 
> 标签：javascript, html, jsp, datepicker

如何在页面加载时显示日历。如下图。

![在此处输入图像描述](../Images/3c2b8aa110f4892ee3235d59aa853945.png)

我可以在单击输入按钮时获取日历，但现在我想在页面加载时加载日历并获取用户选择的值。

以下是页面加载时我必须获取日历加载的地方

```
<table width="100%">
        <div style="text-align: center; width: 100%;">
            <div style="color: white; font-size: 14pt;">Daily Shipments</div>
        </div>
        <div style="text-align: center; width: 100%;"> Load the calendar here </div>

</table> 
```

请帮我完成这件事。

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:24:26.113

将您用于获取日历的代码放入`window.onload = function() { }` 应该为您做的事情。

# iphone - 将 HTML 字符串解析到 ios

> ID：14139751
> 
> 赞同：0
> 
> 时间：2013-01-03T13:20:12.137
> 
> 标签：iphone, html, ios, ipad

我正在使用 TFHpple 成功地将 html 标签解析到 ios 中，但是在这里我遇到了一个小问题，如果我的 HTML 标签是

```
 <div align="center">
            <b>
                <a href="/?PageName='TeacherPage'&StaffID=194121">
                    <span class="sectionheader">
                        Jessica
                        &nbsp;Cortes
                    </span>
                </a></b><BR>

                <span class="subheader">Migrant Education</span>
                <BR>

                    <img src="/images/Phone.gif" width="22" height="23"> 
                    912-367-8630
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/EmailIconSmall.gif" width="16" height="16" style="vertical-align:bottom" />
                    &nbsp; <a onclick="openme('z','/Common/Email/Email.asp?UserID=194121&SchoolID=786',417,320);return false;" href="#">Email</a>               

                <BR><BR>
                <a href="/?PageName='Teachers'&Category='Teachers'">View All Teachers</a>
                <BR><BR>
                <table cellpadding="4" cellspacing="4" class="subnavtd"> 
```

我正在使用示例将其解析为 ios：`NSString *tutorialsXpathQueryString = @"//div/span[@class='subheader']]";`

现在在其中一个 HTML 页面中没有标签，它只有一个像`912-367-8630`现在这样的数字如何在`NSString *tutorialsXpathQueryString = @"`这个数字中调用它在上面给定的标签中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:27:02.987

您是否能够改造 HTML 输出并将电话号码包装在您可以定位的标签中？如果没有，您可能必须获取父 div 的内部文本值和字符串中的电话号码模式的正则表达式匹配。

# java - HttpServletRequest.getSession(true) 线程安全吗？

> ID：14139753
> 
> 赞同：4
> 
> 时间：2013-01-03T13:20:17.263
> 
> 标签：java, servlets, servlet-filters

我看到很多关于 setAttribute 和 getAttribute 方法是否`HttpSession`是原子的问题。他们不是。但是，每个客户端的实际调用是`request.getSession(true)`原子的吗？

例如，如果您有一个 servlet 过滤器并且客户端发出两个同时到达一条线路`request.getSession(true)`的同时调用，是否会返回相同的会话对象？我认为这样的事情将是特定于容器的？或者您是否保证`getSession`每个请求客户的同步呼叫。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:34:21.713

不它不是。

**Servlet 规范说……**

> 2.3.3.4 线程安全 除了 startAsync 和 complete 方法，请求和响应对象的实现不保证是线程安全的。这意味着它们只能在请求处理线程的范围内使用，或者应用程序必须确保对请求和响应对象的访问是线程安全的。
> 
> 如果应用程序创建的线程使用容器管理的对象，例如请求或响应对象，则必须仅在 3.10 和 5.6 节中定义的对象生命周期内访问这些对象。**请注意，除了 startAsync 和 complete 方法，请求和响应对象不是线程安全的。如果这些对象是在多个线程中访问的，则应同步访问或通过包装器完成访问以添加线程安全性，例如例如，同步方法调用以访问请求属性，或使用本地输出流作为线程内的响应对象。**

你的问题？ **即使它们来自同一个客户端，两个对 getSession 的并发调用是否可能返回不同的 HttpSession 对象？** 答案是“是的，

*   它将返回两个会话对象，
*   两个 Set-Cookies 将被发送到客户端
*   最新的 Set-Cookie 可能会覆盖第一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:00:38.117

不确定您在这里真正关心的是什么：

> 例如，如果您有一个 servlet 过滤器，并且客户端发出两个同时到达线路的同时调用：
> 
> `request.getSession(true)`
> 
> 会返回相同的会话对象吗？

这取决于你所说的*同一个会话对象*是什么意思，即你的意思是`s1 == s2`或`s1.equals(s2)`。我找不到任何说明对象必须相同 ( `==`) 的内容，但即使它们可能都是不同的对象，它们最终*也可以看到*相同的*逻辑*会话。将这些会话对象想象为数据库客户端：它们不是*数据*，但它们都*查看*相同的数据，即它们读取和写入到一个公共位置。

现在，要回答您的问题，我们必须在读取来自同一服务器的任何其他响应之前确定客户端是否发出了第二个请求：必须使用输入（在 URL 或 HTTP 标头中，在cookie 的形式），所以我们有以下场景：

1.  客户端发出请求 #1，获取会话，并在两个同时请求 #2 和 #3 中将会话 ID 发送回服务器：它们将共享会话
2.  客户端几乎同时发出请求#1 和#2，之前没有对同一个应用程序的任何请求。由于没有向服务器提供输入（没有会话 ID），因此创建了两个新会话，即使客户端**没有同时点击 getSession() 行**。根据客户端应用程序，这可能是错误，也可能不是。

所以这根本不是线程的问题。它仅取决于客户端提供的输入。相同的会话 ID，返回相同的会话。不同（或没有）会话 ID，不同的会话。

只是为了正确起见，一个*逻辑*客户端（单个程序，如 Firefox）甚至可以在 N+ 核机器上的 N 个单独线程中发出 N 个请求，但网络通常是共享的。假设它有一个多宿主机器，并且每个 NIC 都连接到一个单独的网络，您将需要您的 servlet 容器来监听多个 IP 地址并拥有 N 个处理器（或内核）。这只是说不需要*同时进行两个调用*，尽管来自同一个客户端的请求完全有可能并行处理并因此同时到达同一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:19:35.200

[API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)中没有任何内容表明该方法是同步的，尽管我不知道该方法内部发生了什么。`getSession(true)`如果不存在，Doing返回一个新会话。检查现有会话并创建新会话是您的关键部分。如果您的线程同时达到这一点，则将创建两个会话并将其返回给您的两个不同的调用实体（过滤器将在您的 servlet 之前和之后应用，因此我不知道您如何做到这一点，但是为了这个问题，让我们假设它可能发生）。如果一个`Session`对象已经存在，那么只会返回那个对象。

# java - 获取身份证号码，如果找到，删除它

> ID：14139754
> 
> 赞同：0
> 
> 时间：2013-01-03T13:20:20.737
> 
> 标签：java, swing

> **可能重复：**
> [Java - 在文件中查找一行并删除](https://stackoverflow.com/questions/1377279/java-find-a-line-in-a-file-and-remove)

我有一个获取 id 号并搜索其记录的代码，如果存在，则显示它。

我要如果找到，删除它的记录。删除行（用户记录）的一种解决方案是创建另一个文件并复制所有行而不找到记录。谁能告诉我另一个解决方案？（简单的解决方案）

我的 BookRecords.txt 文件是这样的：

```
Name        Date        Number

one   2002   22
two   2003   33
three   2004   44
four   2005   55 
```

我要查找的代码：

```
String bookid=jTextField2.getText();
File f=new File("C:\\BookRecords.txt");
try{
    FileReader Bfr=new FileReader(f);
    BufferedReader Bbr=new BufferedReader(Bfr);
    String bs;
    while( (bs=Bbr.readLine()) != null ){
    String[] Ust=bs.split("   ");
    String Bname=Ust[0];
    String Bdate=Ust[1];
    String id = Ust[2];
    if (id.equals(bookid.trim()) 
    jLabel1.setText("Book Found,    "+ Bname + "    " + Bdate);
    break;
        }
      }
    }
catch (IOException ex) {
    ex.printStackTrace();
} 
```

请帮忙删除一行（一条记录）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:27:41.283

处理单个文本文件 - 嗯 - 有点奇怪。但我建议您创建一个新的文本文件（输出）：

```
PrintWriter out = new PrintWriter(new FileWriter("output.txt")); 
```

只写与书的 ID*不匹配的行。*

```
while (...) {
    ...
    if (!id.equals(bookid.trim())) {
        out.println(bs);
    }
}
out.close(); 
```

稍后您可以根据需要重命名文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:10:18.990

找到时用退格符替换文本文件中的整行

> \b

# c# - 将方法从仅将字符串转换为字符串和 int

> ID：14139758
> 
> 赞同：2
> 
> 时间：2013-01-03T13:20:34.640
> 
> 标签：c#, asp.net-mvc, enums

请耐心等待，因为这对我来说是一个困难的概念。我有一个方法`enum`以字符串形式返回项目（用于数据库存储）。这是方法：

```
public static IEnumerable<SelectListItem> GetItemsFromEnum<T>
    (T selectedValue = default(T)) where T : struct
{
    return from name in Enum.GetNames(typeof(T))
       let enumValue = Convert.ToString((T)Enum.
           Parse(typeof(T), name, true))

           select new SelectListItem
           {
               Text = GetEnumDescription(name, typeof(T)),
               Value = enumValue,
               Selected = enumValue.Equals(selectedValue)
           };
} 
```

（注意：`GetEnumDescription`是类中的另一种方法，它使`[Display(Name="")`文本在 UI 中显示友好的内容。）

对于单个选择输入（单选按钮，下拉菜单），这很好用。但是，对于多选（列表框、复选框列表），我正在考虑使用该`enum` `[Flags]`属性作为`int`.

但是，该`GetItemsFromEnum`方法在我使用的情况下不起作用，`[Flags]`并且需要我更改它，以便在`GetItemsFromEnum`方法中分配的值不是 的字符串值`enum`，而是`int`值。

这实际上是一个两部分：

1.  如何修改该方法，使其`enumValue`成为`int`from的值`enum` `[Flags]`（即，如果选择“1 + 2”（两个复选框），则`int`保存的值将是“3”）？
2.  最重要的是，我可以在方法中插入什么样的逻辑，以便我所有其他`enum`的（没有的`[Flags]`）不受影响（即，它仍然转换`ToString`）？我在想一些`if ... else`逻辑，但这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:56:29.573

首先，该`[Flags]`属性不会为枚举的值添加特殊属性，它只是在将其`Enum`格式化为字符串时由类通过反射使用，并让使用您的代码的人知道他们可以安全地对枚举使用按位操作，或者换句话说，没有不希望的结果。

让我们来看看这个枚举：

```
[Flags]
enum MyEnum
{
    Undefined,
    Employee,
    Student
} 
```

让我们以这种方式创建一个变量：

```
var employeeAndStudent = MyEnum.Employee | MyEnum.Student; 
```

该变量如果转换为整数，则等于 3。虽然该`ToString()`方法将打印“Employee, Student”，`Enum.GetNames`但没有为字段 3 分配值——很明显，因为它没有*name*。我可以想到两个解决方案：

1.  您创建自己的`GetNames`，除了定义的名称外，还返回枚举值的所有可能组合，方便地以您的格式打印。

2.  您在枚举中定义标志，如果有很多成员，这可能会变得非常浪费。在我们的例子中，`MyEnum`将变为：

    ```
    [Flags]
    enum MyEnum
    {
        Undefined,
        Employee,
        Student,
        EmployeeAndStudent
    } 
    ```

还有一件事，你的方法似乎有一个错误。这一行：

```
Selected = enumValue.Equals(selectedValue) 
```

试图将枚举类型与字符串进行比较，并且总是会导致错误。你确定那`SelectListItem.Value`应该是 type`string`吗？我建议你检查你的代码。

要直接回答您的问题：

1.  添加`[Flags]`到您的枚举并使用 OR 运算符组合值。
2.  在您的`GetEnumDescription`方法中，检查类型是否具有该`Flags`属性。

# java - Java 程序在尝试调用 powershell 脚本时挂起

> ID：14139759
> 
> 赞同：3
> 
> 时间：2013-01-03T13:20:35.120
> 
> 标签：java, powershell, netbeans

我正在使用 NetBeans 构建一个 GUI，GUI 中的一个按钮需要使用 powershell 脚本。我正在尝试获取脚本的输出并将其放入 GUI 中的 JTextArea 中。这是我到目前为止所拥有的。我做了一些调试，它似乎挂在 while 循环中，但我对它为什么这样做感到困惑。

```
private void runButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          
    try {
        Runtime runtime = Runtime.getRuntime();
        Process proc = runtime.exec("cmd powershell C:/hello1.ps1");
        InputStream is = proc.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader reader = new BufferedReader(isr);
        String line;
        while ((line = reader.readLine()) != null) {
            outputTextArea.setText(line);
        }
        reader.close();
        proc.getOutputStream().close();
    } catch (IOException ex) {
        Logger.getLogger(BatchFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

这是一个简单的 powershell 脚本，我正在尝试让它工作。

```
#Filename: hello1.ps1
Write-Host "Hello World!"
#End of Script 
```

我做了一些研究，我注意到它正在等待其他人，但这只是因为他们忘记关闭进程输出流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-20T22:48:22.927

我遇到了同样的问题。我在 while 循环之前移动了 proc.getOutputStream().close() 并且一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:50:13.467

```
private void runButtonActionPerformed(java.awt.event.ActionEvent evt) {      
    String allOutput = "";                                
    try {
        Runtime runtime = Runtime.getRuntime();
        Process proc = runtime.exec("cmd /c powershell C:/hello1.ps1");
        BufferedReader errorReader = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
        BufferedReader outReader = new BufferedReader(new InputStreamReader(proc.getInputStream()));
        String line;
        while ((line = errorReader.readLine()) != null) {
            allOutput += "\n" + line;
        }
        while ((line = outReader.readLine()) != null) {
            allOutput += "\n" + line;
        }
        int retVal = proc.waitFor();
    } catch (IOException ex) {
        Logger.getLogger(BatchFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
    outputTextArea.setText(allOutput);
} 
```

*   使用 CMD.EXE /c 正确形成命令行
*   检查错误流
*   使用 Process.waitFor() 阅读 Process 类的 java-docs。
*   无需关闭 OutputStream，因为您从不使用它并且程序不应该期望用户输入（java 切换输入和输出的名称很烦人）

*注意*上面的代码未经测试，因此可能存在语法错误等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T00:59:39.320

这是我测试过的代码，请注意在完成后选择“破解”或关闭 STDIN。

```
package test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class Test
{
    private static boolean hack=false;

    public static void main(String[] args) throws IOException
    {
        Runtime rt = Runtime.getRuntime();

        String cmd[];

        if (hack)
            cmd=new String[]{"cmd","/c","C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe","-File","c:\\cygwin\\home\\jpyeron\\test.ps1", "<NUL"};
        else
            cmd=new String[]{"C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe","-File","c:\\cygwin\\home\\jpyeron\\test.ps1"};

        final Process p = rt.exec(cmd);

        Thread stdout = new Thread()
        {
            public void run() 
            {
                InputStream out = p.getInputStream();
                BufferedReader in = new BufferedReader(new InputStreamReader(out)); 
                String line = null; 
                try
                {
                    while ((line = in.readLine()) != null) 
                    { 
                        System.out.println(line); 
                    }
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }              
            };
        };
        stdout.start();

        Thread stderr = new Thread()
        {
            public void run() 
            {
                InputStream err = p.getInputStream();
                BufferedReader in = new BufferedReader(new InputStreamReader(err)); 
                String line = null; 
                try
                {
                    while ((line = in.readLine()) != null) 
                    { 
                        System.out.println(line); 
                    }
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }                
            };
        };
        stderr.start();

        if (hack)
            ;
        else
            p.getOutputStream().close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T12:33:17.927

这对我有帮助：如果没有错误，请不要阅读 InputStream。例如

```
private void takeAction () throws IOException, InterruptedException
{
    String action = getAction (); // A powershell-Command
    Process p = Runtime.getRuntime ().exec ( action );

    InputStream is = p.getErrorStream ();
    if ( 0 < is.available () )
    {
        BufferedReader br = new BufferedReader (
                new InputStreamReader ( is ) );
        String err = br.readLine ();
        while ( null != err )
        {
            System.out.println ( "takeAction() " + err );
            err = br.readLine ();
        }
        p.getOutputStream ().close ();
    }
} 
```

# java - Java：Android：MediaPlayer 有时会返回 null onResume

> ID：14139760
> 
> 赞同：0
> 
> 时间：2013-01-03T13:20:35.407
> 
> 标签：java, android, media-player, onresume

我试图让音乐在我的应用程序上播放，但我遇到了一个我无法弄清楚的问题。当我第一次加载程序时，它工作正常，音乐加载并播放。如果我让手机闲置然后再回来，该应用程序将再次运行。但是第三次​​我让它空闲并返回时，媒体播放器将返回 null 并在恢复时使应用程序崩溃。这是媒体播放器的代码：

```
 public void startMusic(Context context)
{           
    if (music != null){
        if (music.isPlaying()){
            music.stop();
        }
        music.release();
        music = null;
    }

    music = MediaPlayer.create(context, R.raw.song);

    music.setLooping(true);
    musicPlaying = true;   
} 
```

当应用程序遇到`music.setLooping(true);`代码行时会崩溃，说音乐为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:16:53.843

原来我在错误的地方发布了音乐。我在视图中执行此操作，而我应该在活动中执行此操作。

# c++ - C ++ stringstream以固定长度的字符串读取到char数组

> ID：14139764
> 
> 赞同：1
> 
> 时间：2013-01-03T13:21:14.050
> 
> 标签：c++, stringstream

给定数据格式为“int,int,...,int,string,int”，是否可以（仅）使用 stringstream 来正确解码字段？

**[代码]**

```
int main(int c, char** v)
{
    std::string line = "0,1,2,3,4,5,CT_O,6";
    char delimiter[7];
    int id, ag, lid, cid, fid, did, j = -12345;
    char dcontact[4]; // <- The size of <string-field> is known and fixed
    std::stringstream ssline(line);
    ssline >> id >> delimiter[0]
    >> ag >> delimiter[1]
    >> lid >> delimiter[2]
    >> cid >> delimiter[3]
    >> fid >> delimiter[4]
    >> did >> delimiter[5]  // <- should I do something here?
    >> dcontact >> delimiter[6]
    >> j;
    std::cout << id << ":" << ag << ":" << lid << ":" << cid << ":" << fid << ":" << did << ":";
    std::cout << dcontact << "\n";
} 
```

*[输出]* ，粗体部分显示 stringstream 无法仅读取 4 char 到 dcontact。实际上持有超过 4 个字符，留下垃圾数据。`0:1:2:3:4:5:**CT_6,0**:-45689``dcontact``j`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:27:29.687

`operator >> (istream&, char[N])`是的，对于 N没有特定的重载，`char*`因此它认为这是最佳匹配。char* 的重载读取到下一个空白字符，因此它不会在逗号处停止。

您可以将您的 dcontact 包装在一个结构中，并有一个特定的重载来读入您的结构。否则，您可以使用 read，尽管它会破坏您可爱的`>>`运算符链。

```
ssline.read( dcontact, 4 ); 
```

届时将起作用。

顺便说一句，要读取一个分隔符，您可以使用`getline`. （`get`也可以，但`getline`自由函数写入 a`std::string`将意味着您不必猜测长度）。

（请注意，其他人已指定使用`get`而不是`read`，但在您的情况下这将失败，因为您的数组末尾没有额外的字节`dcontact`作为空终止符。如果您想`dcontact`以空终止，则将其设为 5字符并使用“get”，将为您附加空值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:35:25.927

稍微更健壮（`','`正确处理分隔符）：

```
template <char D>
std::istream& delim(std::istream& in)
{
  char c;
  if (in >> c && c != D) in.setstate(std::ios_base::failbit);
  return in;
}

int main()
{
  std::string line = "0,1,2,3,4,5,CT_O,6";
  int id, ag, lid, cid, fid, did, j = -12345;
  char dcontact[5]; // <- The size of <string-field> is known and fixed
  std::stringstream ssline(line);
  (ssline >> id >> delim<','>
          >> ag >> delim<','>
          >> lid >> delim<','>
          >> cid >> delim<','>
          >> fid >> delim<','>
          >> did >> delim<','> >> std::ws
          ).get(dcontact, 5, ',') >> delim<','>
          >> j;
  std::cout << id << ":" << ag << ":" << lid << ":"
            << cid << ":" << fid << ":" << did << ":";
            << dcontact << "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:31:20.320

试试这个

```
 int main(int c, char** v) {
    string line = "0,1,2,3,4,5,CT_O,6";
    char delimiter[7];
    int id, ag, lid, cid, fid, did, j = -12345;
    char dcontact[5]; // <- The size of <string-field> is known and fixed

    stringstream ssline(line);

    ssline >> id >> delimiter[0]
            >> ag >> delimiter[1]
            >> lid >> delimiter[2]
            >> cid >> delimiter[3]
            >> fid >> delimiter[4]
            >> did >> delimiter[5];

    ssline.get(dcontact, 5);

    ssline >> delimiter[6]
            >> j;
    std::cout << id << ":" << ag << ":" << lid << ":" << cid << ":" << fid << ":" << did << ":";
    std::cout << dcontact << "\n" << j;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:33:09.783

问题是`>>`字符串（`std::string`或 C 风格字符串）的运算符实际上实现了单词的语义，具有特定的单词定义。这个决定是任意的（我会把它写成一行），但由于一个字符串可以代表许多不同的东西，他们必须选择一些东西。

通常，解决方案是永远不要`>>`在字符串上使用。定义您想要的类（在这里，可能类似于 `Symbol`），并`>>`为它定义一个尊重其语义的运算符。你的代码会更清晰，你可以根据需要添加各种不变的控件。如果您知道该字段始终恰好是四个字符，则可以执行以下简单操作：

```
class DContactSymbol
{
    char myName[ 4 ];
public:
    //  ...
    friend std::istream&
    operator>>( std::istream& source, DContactSymbol& dest );
    //  ...
};

std::istream&
operator>>( std::istream& source, DContactSymbol& dest )
{
    std::sentry guard( source );
    if ( source ) {
        std::string tmp;
        std::streambuf* sb = source.rdbuf();
        int ch = sb->sgetc();
        while ( source && (isalnum( ch ) || ch == '_') ) {
            tmp += static_cast< char >( ch );
            if ( tmp.size() > sizeof( dest.myName ) ) {
                source.setstate( std::ios_base::failbit );
            }
        }
        if ( ch == source::traits_type::eof() ) {
            source.setstate( std::ios_base::eofbit );
        }
        if ( tmp.size() != sizeof( dest.myName ) ) {
            source.setstate( std::ios_base::failbit );
        }
        if ( source ) {
            tmp.copy( dest.myName, sizeof( dest.myName ) );
        }
    }
    return source;
} 
```

（请注意，与其他一些建议不同，例如 using ，此建议保持所有通常的约定，例如跳过依赖于标志`std::istream::read`的前导空白 。）`skipws`

当然，如果你不能保证 100% 的符号永远是 4 个字符，你应该使用`std::string`它，并相应地修改`>>`操作符。

顺便说一句，您似乎想将四个字符读入 `dcontact`，尽管它只够三个字符（因为 `>>`会插入一个终止符`'\0'`）。如果您阅读的内容超过三个，则您的行为未定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T00:10:42.607

由于字符串的长度是已知的，您可以使用`std::setw(4)`，如

```
ssline >> std::setw(4) >> dcontact >> delimiter[6]; 
```

# c# - 使用 IronPython 在 C# 中运行特定的 Python 函数

> ID：14139766
> 
> 赞同：9
> 
> 时间：2013-01-03T13:21:33.033
> 
> 标签：c#, python, dynamic, ironpython

到目前为止，我有一个简单的类，它包装了一个 python 引擎（IronPython）供我使用。虽然代码看起来很大，但它真的很简单，所以我在这里复制它以便更清楚地解决我的问题。

这是代码：

```
public class PythonInstance
{
    ScriptEngine engine;
    ScriptScope scope;
    ScriptSource source;

    public PythonInstance()
    {
        engine = Python.CreateEngine();
        scope = engine.CreateScope();
    }

    public void LoadCode(string code)
    {
        source = engine.CreateScriptSourceFromString(code, Microsoft.Scripting.SourceCodeKind.Statements);
        source.Compile();
    }

    public void SetVariable(string key, dynamic variable)
    {
        scope.SetVariable(key, variable);
    }

    public void RunCode()
    {
        source.Execute(scope);
    }

    public void CallFunction(string function)
    {
        //?????? no idea what to call here
    }

} 
```

所以，它工作得很好，但它只允许我一次执行所有 python 脚本......但我想做的是能够从 pythos 脚本中调用特定函数。

**所以，我的问题**是：如何在加载的脚本中调用特定的函数？

我试图找到一些信息或教程，但不幸的是找不到任何东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T14:57:15.353

感谢评论中的建议，我能够弄清楚如何使用它。这是我现在拥有的：

```
public class PythonInstance
{
    private ScriptEngine engine;
    private ScriptScope scope;
    private ScriptSource source;
    private CompiledCode compiled;
    private object pythonClass;

    public PythonInstance(string code, string className = "PyClass")
    {
        //creating engine and stuff
        engine = Python.CreateEngine();
        scope = engine.CreateScope();

        //loading and compiling code
        source = engine.CreateScriptSourceFromString(code, Microsoft.Scripting.SourceCodeKind.Statements);
        compiled = source.Compile();

        //now executing this code (the code should contain a class)
        compiled.Execute(scope);

        //now creating an object that could be used to access the stuff inside a python script
        pythonClass = engine.Operations.Invoke(scope.GetVariable(className));
    }

    public void SetVariable(string variable, dynamic value)
    {
        scope.SetVariable(variable, value);
    }

    public dynamic GetVariable(string variable)
    {
        return scope.GetVariable(variable);
    }

    public void CallMethod(string method, params dynamic[] arguments)
    {
        engine.Operations.InvokeMember(pythonClass, method, arguments);
    }

    public dynamic CallFunction(string method, params dynamic[] arguments)
    {
        return engine.Operations.InvokeMember(pythonClass, method, arguments);
    }

} 
```

要测试它：

```
 PythonInstance py = new PythonInstance(@"
class PyClass:
    def __init__(self):
        pass

    def somemethod(self):
        print 'in some method'

    def isodd(self, n):
        return 1 == n % 2
");
        py.CallMethod("somemethod");
        Console.WriteLine(py.CallFunction("isodd", 6)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-04T09:42:45.847

您可以使用 ScriptScope.GetVariable 来获取实际函数，然后您可以像 ac# 函数一样调用它。像这样使用它： C# 代码：

```
var var1,var2=...
ScriptEngine engine = Python.CreateEngine();
ScriptScope scope = engine.CreateScope();
engine.ExecuteFile(@"C:\test.py", scope);
dynamic testFunction = scope.GetVariable("test_func");
var result = testFunction(var1,var2); 
```

Python代码：

```
def test_func(var1,var2):
    ...do something... 
```

花了我一段时间才终于弄明白，这很简单.. 太糟糕了，没有好的 IronPython 文档。希望这可以帮助 ：）

# python - 将 Python 类对象实例转换为 mongodb BSON 字符串

> ID：14139768
> 
> 赞同：6
> 
> 时间：2013-01-03T13:21:40.417
> 
> 标签：python, mongodb, bson

有谁知道可以将类对象转换为 mongodb BSON 字符串的 Python 库？目前我唯一的解决方案是将类对象转换为 JSON，然后将 JSON 转换为 BSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T19:55:19.727

这可以通过将类实例转换为字典（如[Python dictionary from an object's fields](https://stackoverflow.com/questions/61517/python-dictionary-from-an-objects-fields)中所述）然后[`bson.BSON.encode`](http://api.mongodb.org/python/current/api/bson/index.html?highlight=bson#bson.BSON.encode)在结果字典上使用来实现。请注意， 的值`__dict__`将不包含方法，仅包含属性。另请注意，在某些情况下，这种方法可能不会直接起作用。

如果您有需要存储在 MongoDB 中的类，您可能还需要考虑现有的 ORM 解决方案，而不是编写自己的代码。这些列表可以在[http://api.mongodb.org/python/current/tools.html找到](http://api.mongodb.org/python/current/tools.html)

例子：

```
>>> import bson
>>> class Example(object):
...     def __init__(self):
...             self.a = 'a'
...             self.b = 'b'
...     def set_c(self, c):
...             self.c = c
... 
>>> e = Example()
>>> e
<__main__.Example object at 0x7f9448fa9150>
>>> e.__dict__
{'a': 'a', 'b': 'b'}
>>> e.set_c(123)
>>> e.__dict__
{'a': 'a', 'c': 123, 'b': 'b'}
>>> bson.BSON.encode(e.__dict__)
'\x1e\x00\x00\x00\x02a\x00\x02\x00\x00\x00a\x00\x10c\x00{\x00\x00\x00\x02b\x00\x02\x00\x00\x00b\x00\x00'
>>> bson.BSON.encode(e)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/bson/__init__.py", line 566, in encode
    return cls(_dict_to_bson(document, check_keys, uuid_subtype))
TypeError: encoder expected a mapping type but got: <__main__.Example object at         0x7f9448fa9150>
>>> 
```

# android - Android 应用程序崩溃（片段和 xml onclick）

> ID：14139774
> 
> 赞同：21
> 
> 时间：2013-01-03T13:22:00.693
> 
> 标签：android, android-fragments

second_fragment.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/f2_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/f2_textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/f2_tv" />

<Button
    android:id="@+id/f2_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="button"
    android:text="@string/f2_bttn" /> 
```

SecondFragment.java

```
 public class SecondFragment extends Fragment {

    FragmentInterface iface;

    public interface FragmentInterface {
        public void buttonPressed();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        return inflater.inflate(R.layout.second_fragment, container, false);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            iface = (FragmentInterface) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement FragmentInterface");
        }

    }

    public void button(View view) {

    }
} 
```

我是新手，我不知道为什么我的应用程序在按下按钮时崩溃？谁能解释一下？

```
01-03 13:28:25.612: E/AndroidRuntime(1276): FATAL EXCEPTION: main
01-03 13:28:25.612: E/AndroidRuntime(1276): java.lang.IllegalStateException: Could not find a method button(View) in the activity class com.sp.fragments.MainActivity for onClick handler on view class android.widget.Button with id 'f2_button' 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.view.View$1.onClick(View.java:3584) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.view.View.performClick(View.java:4202) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.view.View$PerformClick.run(View.java:17340) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.os.Handler.handleCallback(Handler.java:725) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.os.Handler.dispatchMessage(Handler.java:92) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.os.Looper.loop(Looper.java:137) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.app.ActivityThread.main(ActivityThread.java:5039) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at java.lang.reflect.Method.invokeNative(Native Method) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at java.lang.reflect.Method.invoke(Method.java:511) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at dalvik.system.NativeStart.main(Native Method) 
01-03 13:28:25.612: E/AndroidRuntime(1276): Caused by: java.lang.NoSuchMethodException: button [class android.view.View] 
01-03 13:28:25.612: E/AndroidRuntime(1276): at java.lang.Class.getConstructorOrMethod(Class.java:460) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at java.lang.Class.getMethod(Class.java:915) 
01-03 13:28:25.612: E/AndroidRuntime(1276): at android.view.View$1.onClick(View.java:3577) 
01-03 13:28:25.612: E/AndroidRuntime(1276): ... 11 more 
01-03 13:28:27.563: I/Process(1276): Sending signal. PID: 1276 SIG: 9 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-09-19T13:56:10.647

**活动：**

如果有活动并且如果您`android:onClick`在 XML 中定义属性，那么您只需要在 Activity 中定义一个具有相同名称的方法。

**分段：**

但是，只要您有 Fragment 并且如果您想通过仅定义`android:onClick`属性来定义单击侦听器，那么您必须在调用 Fragment 的实际活动中定义一个具有相同名称的方法。

或者您可以简单地以编程方式实现点击侦听器。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T14:03:15.060

`onClickListener`通过以编程方式设置（而不是通过 XML），您可以省去很多麻烦。这应该可以帮助您做您想做的事情：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.second_fragment, container, false);
    final View button = view.findViewById(R.id.f2_button);
    button.setOnClickListener(
        new OnClickListener() {
            @Override
            public void onClick(View v) {
                /* DO SOMETHING UPON THE CLICK */
            }
        }
    );
    return view;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T13:28:37.293

如果您在 .xml 中定义，则需要在调用片段的**Activity**`onClick="button"`中定义一个名为的方法，而不是在片段本身中定义。`public void button(View v)`

 **```
public class MainActivity extends FragmentActivity{

...

  public void button(View v){
    ...
  }

...

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T13:35:31.340

您的方法按钮必须在 MainActivity 类中定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-26T13:11:45.793

这一直为我工作：（Android工作室）

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.update_credential, container, false);
        Button bt_login = (Button) rootView.findViewById(R.id.btnSend);

        bt_login.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                System.out.println("Hi its me");

            }// end onClick
        });

        return rootView;

    }// end onCreateView 
```**

# jquery - 如何清除ie和firefox中的ajax缓存？

> ID：14139781
> 
> 赞同：0
> 
> 时间：2013-01-03T13:22:31.337
> 
> 标签：jquery, caching, browser-cache

我编写了一个 ajax 调用来更改图像并在 ajax 调用成功时将其显示在浏览器上。但图像在 IE 和 Firefox 上没有变化。它在 Chrome 上运行良好。

```
var url =  "/store/artwork/index/renderSVGFile?"+"docID=<?php echo $docID ?>&unique="+(new Date()).getTime();
    jQuery('*').css('cursor', 'wait');
        jQuery.ajax({
            url: url,
            cache:false,
            type: "POST",
            data: {},
            success: function(data) {
                jQuery('#product-img-template').html("<img src='/path/to/image/<?php echo $docID ?+>.png' />");
                jQuery('#product-img-template').css("position", "relative");
                jQuery('#product-img-template').css("top","-430px");
                jQuery('#product-img-template').css("left","-7px");
                jQuery('#product-img-template').css("height","400px");
                jQuery('#product-img-template').css("margin-bottom","-350px");
                jQuery('#product-img-template').css("z-index","20");
                jQuery('*').css('cursor', 'auto'); 
            },
            failure: function(data) {
                 jQuery('*').css('cursor', 'auto'); 
            }
        }); 
```

我可以看到图像已经更改，但没有显示在浏览器上。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:31:09.390

缓存 false 与您显示的图像无关。所以对于线

```
jQuery('#product-img-template').html("<img src='/path/to/image/<?php echo $docID ?+>.png' />"); 
```

例如，将其更改为此 - 就像您在 ajax url 中所做的那样

```
jQuery('#product-img-template').html("<img src='/path/to/image/<?php echo $docID ?+>.png?" + (new Date()).getTime() + "' />"); 
```

# php - 同时清理 HTML 和 SQL？

> ID：14139783
> 
> 赞同：0
> 
> 时间：2013-01-03T13:22:40.810
> 
> 标签：php, sql, html

现在我正在使用`htmlspecialchars(mysql_escape_string($value))`，但是有没有办法用一个语句而不是嵌套语句来清理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:29:49.173

好吧，没有一个函数可以同时处理它们。您可以使用准备好的语句和 html puffier 类，也许“外观和感觉”会好一点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:43:19.393

`mysql_real_escape_string`最近实际上已经失宠了。

现在首选使用`PDO`or `mysqli`。默认情况下，它们都带有 PHP。他们使用调用`parameterized queries`的东西来访问数据库，而不是让您自己编写 SQL 命令。这意味着您不再需要担心转义，因为查询和变量是分别传递给函数的。

您可以在此处了解有关 PDO 的更多信息：http: [//net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

在相关的说明中，通常将用户提供的输入“按编写时”存储到数据库中，而不是使用`htmlspecialchars`. 然后，您应该使用`htmlspecialchars`它在站点上出现的任何位置转义数据。这是[OWASP](https://www.owasp.org/)推荐的约定。

这是因为您需要根据上下文转义不同的事物。这个字符串：

```
' <script src="http://example.org/malice.js"></script> ]}\\\\-- 
```

...如果将其用作参数`JSON`（引号和反斜杠和`]`需要`}`转义）、`HTML`（引号和`<`s 需要转义）或写成`URL`（几乎所有内容都需要转义），则需要区别对待被逃脱）。如果您需要花时间指导您的 JavaScript 对 HTML 进行反编码，那么您的代码很快就会变得混乱。

这种方法还使修复错误变得更简单：如果您的站点存在内容在单个页面上无法正确转义的错误，那么您可以更新页面并修复所有内容。如果您的站点存在数据错误地存储在数据库中的错误，那么您需要修复数据库中的所有内容（这将花费更长的时间并损害更多的用户）。

# jquery - 如何在 jquery 中的两个不同文本之间切换..？

> ID：14139784
> 
> 赞同：-5
> 
> 时间：2013-01-03T13:22:46.753
> 
> 标签：jquery

如何在 jquery 中的两个不同文本之间切换 ..例如：“hello”和“glad”应该交替显示并连续显示..请有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:25:42.847

你的问题给想象留下了*很多*信息，但是例如这将交换这两个词，每秒一次，在一个元素中`id` `"target"`：

```
var target = $("#target"),
    word = target.text();
setInterval(function() {
    word = word === "hello" ? "glad" : "hello";
    target.text(word);
}, 1000); 
```

[实例](http://jsbin.com/uqegos/1)| [资源](http://jsbin.com/uqegos/1/edit)

或者，如果您想要看起来更漂亮的东西，请淡入淡出：

```
var target = $("#target"),
    word = target.text();
setInterval(function() {
    word = word === "hello" ? "glad" : "hello";
    target.fadeOut('fast', function() {
        target.text(word).fadeIn('fast');
    });
}, 1000); 
```

[实例](http://jsbin.com/uqegos/2)| [资源](http://jsbin.com/uqegos/2/edit)

# java - 动态代理和方法注解

> ID：14139789
> 
> 赞同：0
> 
> 时间：2013-01-03T13:23:02.523
> 
> 标签：java, annotations, dynamic-proxy

我有以下课程：

```
interface Ivisitor{

    @deduceStrategy("...")
    void visit(Icosmos c);
} 
```

访问者实现了这个接口：

```
class Visitor implements Ivisitor{
        @deduceStrategy("...") 
    public void visit(Icosmos c) 
    {
        ....
    }
} 
```

动态代理：

```
public class strategyLoader{
    public static <T> T  create(Class<T> clazz,Object wrap) {
       T object = (T) Proxy.newProxyInstance(strategyLoader.class.getClassLoader(), new Class[] { clazz },new Handler(wrap)); 
       return object;

    }
} 
```

处理程序类的相关部分：

```
public class Handler implements InvocationHandler {
 Object obj;
 public Handler(Object obj) {
 this.obj = obj;
 }

public Object invoke(Object proxy, Method m, Object[] args)
            throws Throwable {
        if (m.isAnnotationPresent(deduceStrategy.class)) {
     Class[] parameterTypes = m.getParameterTypes();
     if((parameterTypes.length==1)&&(**Icosmos.class.isInstance(parameterTypes[0])**))
         {
            ........
         } 
```

我需要根据传递给 Visitor.visit 的 Icosmos 的确切类型加载适当的策略。但是，参数 [0] 永远不会解析为 Icosmos 的实例。如果有人告诉我出路，将不胜感激。客户端调用访问者为：

```
Ivisitor visitor = strategyLoader.create(Ivisitor.class,Visitor.class.newInstance()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:35:54.920

```
Icosmos.class.isInstance(parameterTypes[0]) 
```

完全等同于`parameterTypes[0] instanceof Icosmos`, 并检查对象是否`parameterTypes[0]`是一个实例`Icosmos`（它不是 - 它是 a `java.lang.Class`）。

您真正需要的有两种可能性。一个是

```
Icosmos.class.isAssignableFrom(parameterTypes[0]) 
```

它检查该类是否与`parameterTypes[0]`赋值兼容`Icosmos`，即给定一个由 表示的类的`x`实例`parameterTypes[0]`

```
Icosmos foo = x; 
```

没有演员表是合法的。这将检查第一个形参的*声明*类型是否与`Icosmos`.

第二种选择是

```
args[0] instanceof Icosmos 
```

它检查实际参数值的*运行时*类型，而不是形式参数的声明类型。

# html - CSS：如何裁剪任何尺寸的图像？

> ID：14139790
> 
> 赞同：0
> 
> 时间：2013-01-03T13:23:08.373
> 
> 标签：html, css, image, crop

我有一个网站，用户可以上传他们的照片，我想准备一个页面，在那里我可以很好地显示所有上传的图像。问题是，有人上传了**400x400px**分辨率的图片，有人上传了**1400x800px**的图片，有人上传了**300x500px**的图片。

在页面上，我想打印所有上传的图像，我想打印尺寸为**100x200px**的每张图像。我尝试手动设置图像的尺寸，例如：

```
<img src="img.jpg" style="width: 100px; height: 200px" /> 
```

但是页面看起来很糟糕，所有图像都模糊了。最好的方法是什么？也许要从每个图像显示中裁剪**100x200px的区域吗？**但是怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:25:46.617

在你的情况下，我会试试这个：

*   在每个图像上指定 100px 的宽度
*   用 100x200px 大小的 div 包围您的图像并溢出：隐藏

# python - 如何在matplotlib中添加一条平行于y轴的线？

> ID：14139793
> 
> 赞同：7
> 
> 时间：2013-01-03T13:23:14.380
> 
> 标签：python, matplotlib

我想在 处画一条线`x=c #constant`。

这应该很简单，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T13:28:39.860

您可以使用[`matplotlib.pyplot.axvline()`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.axvline).

```
import matplotlib.pyplot as plt

plt.figure()
plt.axvline(x=0.2)
plt.axvline(x=0.5)
plt.show() 
```

![在此处输入图像描述](../Images/10a69839cc9d2663bba33e466d473082.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-06T03:51:54.910

使用`matplotlib.pyplot`'s`axvline`方法：

```
import matplotlib.pyplot as plt

plt.axvline(x=0.5) 
```

[![在此处输入图像描述](../Images/42f7635d5825da556d9af13937a4f1a9.png)](https://i.stack.imgur.com/mIkau.png)
您还可以设置 y 值的范围：

```
plt.axvline(x=0.5, ymin=0.2, ymax=0.4) 
```

[![在此处输入图像描述](../Images/16e8c5c7f062b4fa774a33dc3efe6c50.png)](https://i.stack.imgur.com/R0qoW.png)
`ymin = 0`和 的默认值`ymax = 1`。

# iphone - 谷歌地图在拖动时不会改变其位置

> ID：14139802
> 
> 赞同：-1
> 
> 时间：2013-01-03T13:23:37.563
> 
> 标签：iphone, objective-c

嗨，当我在文本字段中输入位置名称时，我有文本字段，然后谷歌地图将我定向到该位置，但是如果我在 iphone 中用鼠标拖动谷歌地图，那么它不会改变它的位置，而且当我在地图上双击时，地图也不会缩放位置这是我调用另一个函数并发送位置坐标的方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    NSLog(@"location found... updating region");
    [self addPins:location2d.latitude  lon:location2d.longitude];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:19:26.527

检查您的 MKMapView 上的 userInteraction 是否已启用，并在此处添加您如何将该 MKMapView 添加到视图控制器的代码。

# jquery - 这个 Jquery Post Query 有什么问题？

> ID：14139805
> 
> 赞同：0
> 
> 时间：2013-01-03T13:23:45.703
> 
> 标签：jquery, json, asp.net-mvc-3, post, razor

我有一个 Jquery Post Query。在将请求发送到控制器操作后，它不会让控制继续进行。实际上，我正在通过按钮 ID 对按钮单击执行此操作。我只是在这里发布代码。请建议我在哪里做错了。

**查看代码**

```
 $('#Get').click(function () {
    ItemNo= "4";
    if (ItemNo != "" && ItemNo != '') {
            $.post('@Url.Action("CheckStocktake", "Stocktake")', { ItemNo: ItemNo }, function (data) {

                if (data == "I") {
                    $('#ItemNumber').after("<label class='label' id='inoitem' style='color:red;float:right;'>&nbsp;&nbsp;Item No is not exist in the Items table entry.</label>");
                    e.preventDefault();
                    return false;
                }
                else if (data == "S") {
                    $('#ItemNumber').after("<label class='label' id='inostock' style='color:red;float:right;'>&nbsp;&nbsp;Entered Item No. already exist in Stocktake. Try another.</label>");
                    e.preventDefault();
                    return false;
                }
                else if (data == "F") {
                    alert("");
                    return true;
                }
            });
        } 
```

**控制器代码**

```
 public JsonResult CheckStocktake(string ItemNo)
    {
        bool ifexist = Db.Items.Any(a => a.ItemNo == ItemNo);
        bool stockexist = Db.Stocktakes.Any(b => b.ItemNo == ItemNo);
        if (!ifexist)
        {
            return Json("I", JsonRequestBehavior.AllowGet);
        }
        else if (stockexist)
        {
            return Json("S", JsonRequestBehavior.AllowGet);
        }

        return Json("F", JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:25:59.453

```
$.each(data, function (index, d)
{
    place your if conditions inside this changing data to d.......
} 
```

希望它可以工作，如果没有尝试将您的电话更改为下面....

```
$.getJSON("/Controller/action", { ItemNo: ItemNo }, function (data)
         {
             $.each(data, function (index, d) 
            {
                if condition here as i mentioned above change data to d
            });

        }); 
```

它应该工作让我知道......发生了什么事

# ruby-on-rails - 如何将上传的图像上传到载波

> ID：14139807
> 
> 赞同：0
> 
> 时间：2013-01-03T13:23:47.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, imagemagick, carrierwave

我想上传一张已经上传到我网站的图片。我想向用户展示图书馆，他们会从中选择一个，它也将与新记录相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:44:28.973

您可以参考[carrierwave](https://github.com/jnicklas/carrierwave)主页

```
u = User.new
u.avatar = File.open('somewhere')
u.save! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:46:29.060

Carrierwave 通过提供 url 为您提供上传的此功能。请参阅以下代码示例以获取帮助。它取自 Ryan Bates railscasts。它很简单。 [http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads) 只需添加 :remote_image_url 字段并在您的表单中使用它，输入 url 并将其余部分留给 Rails 和 Carrierwave。

```
class Painting < ActiveRecord::Base
  attr_accessible :gallery_id, :name, :image, :remote_image_url
  belongs_to :gallery
  mount_uploader :image, ImageUploader
end 
```

希望这可以帮助。

# jquery - Firefox 和 Chrome 中的文本发生更改后，无法清除 textarea

> ID：14139808
> 
> 赞同：4
> 
> 时间：2013-01-03T13:24:00.123
> 
> 标签：jquery, google-chrome, firefox, textarea

简单用例：Textarea 和 Button，当单击按钮时，Textarea 中的文本会发生变化。

示例：JS

```
$('button').click(function(){
    $('#t1').text('test');
}); 
```

HTML：

```
<textarea id="t1" cols="10" rows="5"></textarea><button>Clear</button> 
```

[提琴手示例](http://jsfiddle.net/uQ825/)

**但是，当我更改按钮然后单击按钮时，Chrome 和 Firefeox**中的文本不会更改（在 IE10 中它的工作原理是）。（在最新版本的 Chrome 和 Firefox 中测试）

当我调试它并检查 textarea 的文本时，它会显示正确的值。

这是浏览器错误、jQuery 错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:26:19.073

一个`textarea`元素有一个值，所以用`val('')`它来设置它，像这样：

```
$('button').click(function(){
    $('#t1').val('test');
}); 
```

[**示例小提琴**](http://jsfiddle.net/uQ825/2/)

# python - python：在 pdb 中是否可以仅在 n 次命中后启用断点？

> ID：14139817
> 
> 赞同：26
> 
> 时间：2013-01-03T13:24:34.720
> 
> 标签：python, debugging, pdb

在 Eclipse（以及其他几个 IDE）中，有一个选项可以仅在一定数量的命中后打开断点。在 Python 中`pdb`有断点的命中计数，并且有`condition`命令。我如何连接它们？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T13:59:18.867

我找到了答案。实际上这很容易，有一个命令叫做`ignore`let 假设你想在 1000 次命中后在第 9 行的断点处中断：

```
b 9 
```

输出：`Breakpoint 2 at ...`

```
ignore 1 1000 
```

输出：`Will ignore next 1000 crossings of breakpoint 1.`

```
 c 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-03T13:28:57.740

条件断点可以通过 2 种方式设置 -

**FIRST：**指定断点设置时的条件`break`

```
python -m pdb pdb_break.py
> .../pdb_break.py(7)<module>()
-> def calc(i, n):
(Pdb) break 9, j>0
Breakpoint 1 at .../pdb_break.py:9

(Pdb) break
Num Type         Disp Enb   Where
1   breakpoint   keep yes   at .../pdb_break.py:9
        stop only if j>0

(Pdb) continue
i = 0
j = 0
i = 1
> .../pdb_break.py(9)calc()
-> print 'j =', j

(Pdb) 
```

**SECOND：**`condition`条件也可以使用该命令应用于现有断点。参数是断点 ID 和表达式。

```
$ python -m pdb pdb_break.py
> .../pdb_break.py(7)<module>()
-> def calc(i, n):
(Pdb) break 9
Breakpoint 1 at .../pdb_break.py:9

(Pdb) break
Num Type         Disp Enb   Where
1   breakpoint   keep yes   at .../pdb_break.py:9

(Pdb) condition 1 j>0

(Pdb) break
Num Type         Disp Enb   Where
1   breakpoint   keep yes   at .../pdb_break.py:9
        stop only if j>0

(Pdb) 
```

[来源](http://www.doughellmann.com/PyMOTW/pdb/)

**更新：**我写了一个更简单的代码

```
import pdb; pdb.set_trace()
for i in range(100):
    print i 
```

在终端上调试 -

```
$ python 1.py 
> /code/python/1.py(3)<module>()
-> for i in range(100):
(Pdb) l
  1     
  2     import pdb; pdb.set_trace()
  3  -> for i in range(100):
  4         print i
[EOF]
(Pdb) break 4, i==3
Breakpoint 1 at /code/python/1.py:4
(Pdb) break
Num Type         Disp Enb   Where
1   breakpoint   keep yes   at /code/python/1.py:4
    stop only if i==3
(Pdb) c
0
1
2
> /Users/srikar/code/python/1.py(4)<module>()
-> print i
(Pdb) p i
3 
```

# blender - Blender 2.6 节点编辑器一次输出多个图像

> ID：14139819
> 
> 赞同：-1
> 
> 时间：2013-01-03T13:24:40.587
> 
> 标签：blender

我正在尝试一次在 Blender 中输出多个图像。

我有一个场景，例如两个摄像机。我想在节点编辑器中使用两个“文件输出”节点来做到这一点。但它一次只输出一张图像。另一个“文件输出”节点将永远无法工作。而且我也找不到任何地方可以更改输出图像的名称。

这是搅拌机的极限，还是有什么办法可以做到这一点？谢谢！

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:04:38.167

要一次渲染多个摄像机，您需要做一些准备工作。

复制你的场景，链接对象。在新场景中，将您的第二台摄像机设置为活动的（Ctrl+Num0，同时选择第二台摄像机）。

在复合节点编辑器中，使用 2 个渲染层，每个场景一个。选择您的文件输出节点，如果尚未打开，请按“n”以显示属性面板。在属性面板中的活动节点下，单击“添加输入”。（在同一区域，您可以根据需要命名输出文件。）

将带有适当场景的 2 个渲染层链接到“文件输出”节点上的 2 个输入。

您可能需要从原始场景中删除任何渲染层，我不确定。这是一个示例： [https ://dl.dropbox.com/s/b76qaxdo89tnhyb/2013-04-02%2019_59_49-Blender.png](https://dl.dropbox.com/s/b76qaxdo89tnhyb/2013-04-02%2019_59_49-Blender.png)

以及它的输出： [https ://dl.dropbox.com/s/597evwmdyynhu0z/2013-04-02%2020_00_10-MEDIA%20%28M_%29.png](https://dl.dropbox.com/s/597evwmdyynhu0z/2013-04-02%2020_00_10-MEDIA%20%28M_%29.png)

# ios - 有关用于 iOS 音频文件操作的 ExtFileReader C API 的信息

> ID：14139820
> 
> 赞同：1
> 
> 时间：2013-01-03T13:24:44.117
> 
> 标签：ios, audio, core-audio, effects

所以，我需要反转一些音频 *.caf 文件，

我已经看到[这样做的方法](https://stackoverflow.com/questions/7365011/objective-c-ios-reversing-the-bytes-in-nsmutabledata)应该是：

> 您不能只反转字节数据。我使用 CoreAudio 和 AudioUnits 也达到了同样的效果。使用 ExtFileReader C API 将文件读入 lPCM 缓冲区，然后您可以根据需要反转缓冲区。

但我找不到任何使用的文档

> ExtFileReader C API

因此，如果我有一个 *.caf 文件，如何将其读入线性 PCM，我已经检查了[Core Audio 概述](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/CoreAudioFrameworks/CoreAudioFrameworks.html#//apple_ref/doc/uid/TP40003577-CH9-SW1)，但找不到如何完成此操作？

那么，我怎样才能将我的 caf 文件读入线性 PCM？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:16:19.493

ExtendedAudioFile 在 AudioToolbox 框架中。将文件读入您​​想要的任何格式都非常简单。这是读入 32 位浮点非交错线性 PCM 的快速（编译但未经测试）示例：

```
 #import <AudioToolbox/AudioToolbox.h> 
```

...

```
 ExtAudioFileRef audioFile = NULL;
    CFURLRef url = NULL;
    OSStatus err = ExtAudioFileOpenURL(url, &audioFile);

    AudioStreamBasicDescription asbd;
    UInt32 dataSize = sizeof(asbd);
    // get the audio file's format
    err = ExtAudioFileGetProperty(audioFile, kExtAudioFileProperty_FileDataFormat, &dataSize, &asbd);

    // now set the client format to what we want on read (LPCM, 32-bit floating point)
    AudioStreamBasicDescription clientFormat = asbd;
    clientFormat.mFormatID = kAudioFormatLinearPCM;
    clientFormat.mFormatFlags = kAudioFormatFlagIsFloat | kAudioFormatFlagIsNonInterleaved | kAudioFormatFlagIsPacked;
    clientFormat.mBitsPerChannel = 32;
    clientFormat.mBytesPerPacket = 4;
    clientFormat.mFramesPerPacket = 1;
    clientFormat.mBytesPerFrame = 4;

    err = ExtAudioFileSetProperty(audioFile, kExtAudioFileProperty_ClientDataFormat, sizeof(clientFormat), &clientFormat);

    // okay, now the ext audio file is set up to convert samples to LPCM on read
    // get the total number of samples
    SInt64 numFrames = 0;
    dataSize = sizeof(numFrames);
    err = ExtAudioFileGetProperty(audioFile, kExtAudioFileProperty_FileLengthFrames, &dataSize, &numFrames);

    // prepare an audio buffer list to hold the data when we read it from the file

    UInt32 maxReadFrames = 4096; // how many samples will we read in at a time?
    AudioBufferList *bufferList = (AudioBufferList *)malloc(sizeof(AudioBufferList) + sizeof(AudioBuffer) * (asbd.mChannelsPerFrame - 1));
    bufferList->mNumberBuffers = asbd.mChannelsPerFrame;
    for (int ii = 0; ii < bufferList->mNumberBuffers; ++ii) {
        bufferList->mBuffers[ii].mDataByteSize = maxReadFrames * sizeof(float);
        bufferList->mBuffers[ii].mData = malloc(bufferList->mBuffers[ii].mDataByteSize);
        bzero(bufferList->mBuffers[ii].mData, bufferList->mBuffers[ii].mDataByteSize);
        bufferList->mBuffers[ii].mNumberChannels = 1;
    }

    while(numFrames > 0) {
        UInt32 framesToRead = (maxReadFrames > numFrames) ? numFrames : maxReadFrames;
        err = ExtAudioFileRead(audioFile, &framesToRead, bufferList);
        // okay, your LPCM audio data is in `bufferList` -- do whatever processing you'd like!
    }

    // clean up
    for (int ii = 0; ii < bufferList->mNumberBuffers; ++ii) {
        free(bufferList->mBuffers[ii].mData);
    }
    free(bufferList);
    ExtAudioFileDispose(audioFile); 
```

# android - 如何使用 aChartEngine 设置图表值标签方向？

> ID：14139822
> 
> 赞同：2
> 
> 时间：2013-01-03T13:24:45.940
> 
> 标签：android, achartengine

我正在使用`AChartEngine`在我的 Android 应用程序中创建一个简单的条形图。我想知道如何设置出现在每个条形图顶部的标签（图表**值**标签）的方向（垂直）。在我读过的教程中，该类有一个`setChartvalueAngle`方法，`SimpleSeriesRenderer`但该方法似乎不存在（编译时错误 + Javadocs 中没有）。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T08:58:19.453

使用 api renderer.setXLabelsAngle(90);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:36:02.030

在这里，您可以根据自己的选择创建标签..例如..

```
 XYSeries incomeSeries = new XYSeries("Income");
        // Creating an  XYSeries for Expense
        XYSeries expenseSeries = new XYSeries("Expense");
        // Adding data to Income and Expense Series
        for(int i=0;i<x.length;i++){
            incomeSeries.add(i,income[i]);
            expenseSeries.add(i,expense[i]);
        }

        // Creating a dataset to hold each series
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        // Adding Income Series to the dataset
        dataset.addSeries(incomeSeries);
        // Adding Expense Series to dataset
        dataset.addSeries(expenseSeries);

        // Creating XYSeriesRenderer to customize incomeSeries
        XYSeriesRenderer incomeRenderer = new XYSeriesRenderer();
        incomeRenderer.setColor(Color.rgb(130, 130, 230));
        incomeRenderer.setFillPoints(true);
        incomeRenderer.setLineWidth(2);
        incomeRenderer.setDisplayChartValues(true);

        // Creating XYSeriesRenderer to customize expenseSeries
        XYSeriesRenderer expenseRenderer = new XYSeriesRenderer();
        expenseRenderer.setColor(Color.rgb(220, 80, 80));
        expenseRenderer.setFillPoints(true);
        expenseRenderer.setLineWidth(2);
        expenseRenderer.setDisplayChartValues(true);

        // Creating a XYMultipleSeriesRenderer to customize the whole chart
        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
        multiRenderer.setXLabels(0);
        multiRenderer.setChartTitle("Income vs Expense Chart");
        multiRenderer.setXTitle("Year 2012");
        multiRenderer.setYTitle("Amount in Dollars");
        multiRenderer.setZoomButtonsVisible(true);
        for(int i=0; i< x.length;i++){
            multiRenderer.addXTextLabel(i, mMonth[i]);
        }

        // Adding incomeRenderer and expenseRenderer to multipleRenderer
        // Note: The order of adding dataseries to dataset and renderers to multipleRenderer
        // should be same
        multiRenderer.addSeriesRenderer(incomeRenderer);
        multiRenderer.addSeriesRenderer(expenseRenderer);

        // Creating an intent to plot bar chart using dataset and multipleRenderer
        Intent intent = ChartFactory.getBarChartIntent(getBaseContext(), dataset, multiRenderer, Type.DEFAULT);

        // Start Activity
        startActivity(intent);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

试试这个可能对你有帮助..

# sql - 计算列sql的每个值的百分比

> ID：14139823
> 
> 赞同：1
> 
> 时间：2013-01-03T13:24:55.750
> 
> 标签：sql

我想重写这个 sql 查询，以便他在没有匹配项的情况下显示相应年龄范围的 0 记录，并且我希望他此时计算 Member 的每个值的百分比而不是“0”，任何人都可以帮助我如何实现这一目标？

```
SELECT COUNT(Name) * 100 / 
    (select COUNT(*) from 'cities'
    WHERE city= 'Hoeselt' AND Member = '0' ) AS 'perc', 
    CASE 
        WHEN age <= 30 THEN '18-30'
        WHEN age <= 50 THEN '31-50'
        ELSE '50+'
    END AS age, COUNT(*) AS n 
FROM 'cities' 
    WHERE city= 'Hoeselt' AND elected='yes' AND Member= '0'
    GROUP BY CASE
        WHEN age <= 30 THEN '18-30'
        WHEN age <= 50 THEN '31-50'
        ELSE '50+'
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:43:27.247

如果没有 DDL，很难确定这是否适合您。这是帮助人们为您提供最佳解决方案的绝佳工具。 [http://sqlfiddle.com/#!6](http://sqlfiddle.com/#!6)

```
;WITH AgeCat AS
(
    SELECT   MinAge = 18
            ,MaxAge = 30
            ,Descr  = '18-30'   UNION ALL
    SELECT 31, 49, '31-49'      UNION ALL
    SELECT 50, 200, '50+'
)
SELECT   DISTINCT
         C.Descr
        ,Perc   = COUNT(*) OVER (PARTITION BY 0) / COUNT(*) OVER (PARTITION BY A.Descr) * 100
FROM AgeCat A
JOIN Cities C   ON C.Age BETWEEN A.MinAge AND A.MaxAge
WHERE city = 'Hoeselt'
AND elected = 'yes'
AND Member = '0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:13:41.587

我的方法是使用 CTE 来定义年龄组。接下来选择所有年龄组作为“司机”表，在城市信息中留下加入。然后，即使没有匹配项，您也有年龄组：

```
with c as (
    select c.*,
           (CASE WHEN age <= 30 THEN '18-30'
                 WHEN age <= 50 THEN '31-50'
                 ELSE '50+'
             END) as agegrp
    from cities
   )
select COUNT(Name) * 100 / (select COUNT(*) from cities WHERE city= 'Hoeselt' AND Member = '0') as perc,
       driver.agegrp,
       COUNT(*) as n
from (select distinct agegrp from c) as driver left outer join
     c
     on driver.agegrp = c.agegrp
group by driver.agegrp 
```

# .net - .NET - 排序顺序末尾的 Unicode 字符

> ID：14139826
> 
> 赞同：1
> 
> 时间：2013-01-03T13:25:18.910
> 
> 标签：.net, sorting, unicode, collation

我希望有一个字符可以用来在列表中排序时将字符串作为最后一项。请注意，这不一定是防弹的，但考虑到例如`+,_,(`等通常用于在文本之前放置一个字符串（在 ASCII/NTFS 等中）是否有一个字符可以用来在末尾放置一个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:36:12.003

试试这个：

```
Char.ConvertFromUtf32(int.MaxValue); 
```

给出：

> 有效的 UTF32 值介于 0x000000 和 0x10ffff（含）之间，并且不应包括代理代码点值（0x00d800 ~ 0x00dfff）。

然后我想你需要的是这样的：

```
Char.ConvertFromUtf32(0x10ffff); 
```

# java - 检索结果的特定子部分

> ID：14139829
> 
> 赞同：1
> 
> 时间：2013-01-03T13:25:31.630
> 
> 标签：java, google-app-engine, google-cloud-datastore

可以过滤查询以便只返回第 20 到 30 行吗？

这似乎没有在这里提到： [https ://developers.google.com/appengine/docs/java/datastore/queries](https://developers.google.com/appengine/docs/java/datastore/queries)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:29:03.970

> 使用整数偏移量会在返回第一个结果之前跳过指定数量的结果。在上面的示例中替换以下行将返回第六到第十个最高的人，而不是五个最高的人：

```
return pq.asList(FetchOptions.Builder.withOffset(5).limit(5)); 
```

[https://developers.google.com/appengine/docs/java/datastore/queries#Retrieving_Results](https://developers.google.com/appengine/docs/java/datastore/queries#Retrieving_Results)

请注意，实体仍在内部检索，如果您想减少数据存储操作，请考虑使用[查询游标](https://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors)。（[JDO 文档](https://developers.google.com/appengine/docs/java/datastore/jdo/queries#Query_Cursors)）

# delphi - 如何在通用 TList 中获得最大值 ?

> ID：14139830
> 
> 赞同：4
> 
> 时间：2013-01-03T13:25:33.477
> 
> 标签：delphi, delphi-xe2

在 a 中获得最大值的最简单方法是`TList<Integer>`什么？

```
function GetMaximum(AList: TList<Integer>): Integer;
begin
  Assert(AList.Count > 0);
  Result := ?;
end; 
```

我读到 C# 有一个`AList.Max`，在 Delphi 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T15:10:09.603

`MaxValue`这是一个在通用容器上实现的有趣示例：

```
{$APPTYPE CONSOLE}

uses
  System.SysUtils, System.Generics.Defaults, System.Generics.Collections;

type
  TMyList<T> = class(TList<T>)
  public
    function MaxValue: T;
  end;

{ TMyList<T> }

function TMyList<T>.MaxValue: T;
var
  i: Integer;
  Comparer: IComparer<T>;
begin
  if Count=0 then
    raise Exception.Create('Cannot call TMyList<T>.MaxValue on an empty list');
  Comparer := TComparer<T>.Default;
  Result := Self[0];
  for i := 1 to Count-1 do
    if Comparer.Compare(Self[i], Result)>0 then
      Result := Self[i];
end;

var
  IntList: TMyList<Integer>;
  DoubleList: TMyList<Double>;
  StringList: TMyList<string>;

begin
  IntList := TMyList<Integer>.Create;
  IntList.AddRange([10, 5, 12, -49]);
  Writeln(IntList.MaxValue);

  DoubleList := TMyList<Double>.Create;
  DoubleList.AddRange([10.0, 5.0, 12.0, -49.0]);
  Writeln(DoubleList.MaxValue);

  StringList := TMyList<string>.Create;
  StringList.AddRange(['David Heffernan', 'Uwe Raabe', 'Warren P', 'Jens Mühlenhoff']);
  Writeln(StringList.MaxValue);

  Readln;
end. 
```

`low(Integer)`因为当在空列表上调用该方法时，我们无法提出与 I raise an exception 的通用等价物。

输出是：

```
12
 1.20000000000000E+0001
沃伦 P

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T04:13:01.127

这是一个替代答案：使用`Spring.Collections.pas`Spring4D 框架中的单元：（可在此处找到： [http](http://code.google.com/p/delphi-spring-framework/) ://code.google.com/p/delphi-spring-framework/ ）

```
program ListEnumerableDemo;

{$APPTYPE CONSOLE}

uses 
    System.SysUtils 
  , Spring.Collections;

var 
  List: IList<Integer>; 
  Enumerable: IEnumerable<Integer>;

begin 
  try 
    List := TCollections.CreateList<Integer>; 
    List.AddRange([1,6,2,9,54,3,2,7,9,1]);

    Enumerable := List; 
    WriteLn(Enumerable.Max); 
    ReadLn; 
  except 
    on E: Exception do 
      Writeln(E.ClassName, ': ', E.Message); 
  end; 
end. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T13:25:33.477

使用`for .. in`：

```
function GetMaximum(AList: TList<Integer>): Integer;
var
  I: Integer
begin
  Assert(AList.Count > 0);
  Result := Low(Integer);
  for I in AList do
    if I > Result then
      Result := I;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:59:34.907

我同意使用 Spring 集合可能是最简单的方法。然而，可能有理由不使用它们（已经在各处使用 Generics.Collections）。

所以这里是如何制作一个`TEnumerable<T>`以`function Max: T`.

```
type
  Enumerable<T> = record
  private
    source: TEnumerable<T>;
  public
    function Max: T;

    class operator Implicit(const value: TEnumerable<T>): Enumerable<T>;
  end;

class operator Enumerable<T>.Implicit(
  const value: TEnumerable<T>): Enumerable<T>;
begin
  Result.source := value;
end;

function Enumerable<T>.Max: T;
var
  default: IComparer<T>;
  x, y: T;
  flag: Boolean;
begin
  if not Assigned(source) then
    raise EArgumentNilException.Create('Source');
  default := TComparer<T>.Default;

  flag := False;
  for x in source do
  begin
    if flag then
    begin
      if default.Compare(x, y) > 0 then
        y := x;
    end
    else
    begin
      y := x;
      flag := True;
    end;
  end;
  if flag then
    Result := y
  else
    raise EListError.Create('source is empty');
end; 
```

该代码基本上是 .Net`Enumerable.Max<T>`扩展方法的一个端口，来自`System.Linq`. 您可以像在尼克斯示例中一样使用它。

对于那些对二进制大小感兴趣的人来说，有趣的是：链接器能够删除从未使用过的方法。

# c# - 应该使用什么设计模式在 C# 中创建自己的对象约束器？

> ID：14139842
> 
> 赞同：0
> 
> 时间：2013-01-03T13:26:10.350
> 
> 标签：c#, .net, design-patterns

应该使用什么设计模式在 C# 中创建自己的对象容器，目的是存储和检索任何类型的对象、字符串等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:29:00.400

听起来您正在寻找缓存，您可以围绕`Dictionary<TKey, TValue>`例如创建一个包装器

```
public class ObjectContainer
{
    private Dictionary<string, object> cache;

    public ObjectContainer()
    {
        cache = new Dictionary<string, object>();
    }

    public T Fetch<T>(string name)
    {
        object value;
        cache.TryGetValue(name, out value);
        return (T)value;
    }

    public void Add(string name, object value)
    {
        cache.Add(name, value);
    }
}
...

var cache = new ObjectContainer();
cache.Add("data1", 12345);
cache.Add("data2", new ClassName());
var intData = cache.Fetch<int>("data1");
var objData = cache.Fetch<ClassName>("data2"); 
```

# javascript - 创建一个“地毯下”的视差页脚？

> ID：14139846
> 
> 赞同：3
> 
> 时间：2013-01-03T13:26:34.737
> 
> 标签：javascript, jquery, css, parallax

我对在这个网站上提问非常陌生，但是从阅读中学到了很多东西，所以非常感谢！

有点随机，在此页脚上看到了这种令人敬畏的“地毯下”风格的视差效果 - 并寻找一些关于如何将其击倒的指示？

[http://ideaware.co/our_work](http://ideaware.co/our_work)

非常感谢任何帮助！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:45:36.543

相当容易！制作一个绝对定位且 z-index 低于主要内容的页脚。比把它放在你刚刚创建的 div 的 css 中： position:fixed 。另外不要忘记将内容 div 的高位缩短一点，以便看到页脚。

祝你好运！

太模糊了？只要问，我会回答！

[编辑]：

[小提琴示例](http://jsfiddle.net/Me2Dz/1/)

对于示例，我将使用一个`HTML`包含两个`divs`. 第一个是`#content`容器，第二个是`#footer`.

```
<div id="content">
</div>
<div id="footer">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sagittis congue malesuada. Donec a eros ac risus facilisis pellentesque sit amet feugiat orci. Ut adipiscing, arcu sit amet facilisis condimentum, diam arcu tempus erat, at sagittis libero felis quis nisl. Interdum et malesuada fames ac ante ipsum primis in faucibus. Etiam dignissim eros nisi, ut vehicula nulla dictum vel. Aenean quis felis libero. Aliquam vulputate sem eros, sed vehicula sem tincidunt vel.</p>
 </div> 
```

//我在页脚添加了一些文字，这样你就可以实际看到视差效果

我在内容中添加了以下`div`内容`CSS`：

```
 #content {
    width:100%;
    height:1500px;
    margin-bottom:200px;
    background-color:#123456;
       } 
```

请注意将 `margin-bottom`属性设置为等于您的页脚`height`。否则你将无法看到`#footer`div。

对于`css`页脚是：

```
 #footer {
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    height:200px;
    z-index:-1;
    background-color:#000;
       } 
```

请注意，`position`设置为`fixed`。这将保持`#footer`相对于窗口的定位，而不是相对于文档。我也设置了`z-index:-1`. 我这样做了，所以`#footer`将在`#content`. 如果您删除此属性，您会注意到`#footer`将一直结束，`#content`并且视差的效果消失了。

是的！这是所有的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T23:06:57.523

如果页脚没有固定高度，内容流畅，您可以使用（jQuery）：

```
var footerParaHeight = $(".footer").height();
$(".content").css("margin-bottom",footerParaHeight); 
```

使用前面给出的 CSS：

```
.content {
    /*margin being given from jQuery*/
}
.footer {
    position: fixed;
    bottom: 0px;
    left: 0px;
    z-index: -1;
} 
```

# c# - 如何最大化单个 TCP 套接字的吞吐量？

> ID：14139850
> 
> 赞同：3
> 
> 时间：2013-01-03T13:26:51.777
> 
> 标签：c#, .net, performance, sockets

我试图让标准示例“echo”客户端/服务器应用程序尽快运行，我确信网络是一个限制因素。我有一个 1 Gb 的网卡，当我使用资源监视器时，我只能从客户端获得 7 mb。

我了解套接字、消息帧和长度指示器的基础知识，接收长度指示器指示的所有字节。保持活动数据包，半开连接等。

我开始使用标准套接字操作，然后切换到使用异步。（我没有将发送更改为异步，因为有人[似乎知识渊博的人说它不应该有任何影响]）我有完全相同的表现，我只能认为所有材料都假设我有其他工作可以在同一个线程上完成。但是在我的快速测试中，我有一个线程专门用于循环发送和另一个完全不同的线程来接收。

我已经尝试了所有方法，但完全不知道在哪里可以获得更多性能。我使用了 IPerf，它报告的返回速度为每秒 1 吉比特，资源监视器也显示它正在消耗带宽。

即使有人可以为我指出一个更完整的例子。我遇到的大多数都是微不足道的或不完整的。

这是通用代码。

```
class Program
{
private static Socket sock;
private static BlockingCollection<string> queue;
private static int bytesReceived;
private static byte[] dataBuffer;
private static readonly byte[] lengthBuffer = new byte[4];

private static byte[] PrependLengthIndicator(byte[] data)
{
    return BitConverter.GetBytes(data.Length).Concat(data).ToArray();
}

private static void Receive()
{
    if (dataBuffer == null)
    {
        sock.BeginReceive(lengthBuffer, 0, 4, SocketFlags.None, ReceiveCallback, null);
    }
    else
    {
        sock.BeginReceive(dataBuffer, 0, bytesReceived, SocketFlags.None, ReceiveCallback, null);
    }
}

private static void ReceiveCallback(IAsyncResult ar)
{
    bytesReceived += sock.EndReceive(ar);
    if (dataBuffer == null)
    {
        // Currently receiving length indicator
        if (bytesReceived >= 4)
        {
            var length = BitConverter.ToInt32(lengthBuffer, 0);
            dataBuffer = new byte[length];
            bytesReceived = 0;
        }
    }
    else
    {
        if (bytesReceived == dataBuffer.Length)
        {
            // Finished reading
            var request = Encoding.ASCII.GetString(dataBuffer);
            dataBuffer = null;
            bytesReceived = 0;
            queue.Add(request);
        }
    }
    ContinueReading();
}

private static void ContinueReading()
{
    // Read into the appropriate buffer: length or data
    if (dataBuffer != null)
    {
        sock.BeginReceive(dataBuffer, bytesReceived, dataBuffer.Length - bytesReceived, SocketFlags.None, ReceiveCallback, null);
    }
    else
    {
        sock.BeginReceive(lengthBuffer, bytesReceived, lengthBuffer.Length - bytesReceived, SocketFlags.None, ReceiveCallback, null);
    }
}

} 
```

这是服务器部分：

```
static void Main(string[] args)
{
        var listenSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        listenSock.Bind(new IPEndPoint(IPAddress.Parse(ConfigurationManager.AppSettings["LocalIp"]), 3333));
        listenSock.Listen(10);
        Console.WriteLine("Server started...");
        sock = listenSock.Accept();
        Console.WriteLine("Connection accepted.");

        queue = new BlockingCollection<string>();
        Receive();
        var count = 0;
        var sender = new Thread(() =>
            {
                while (true)
                {
                    var bar = queue.Take() + "Resp";
                    count++;
                    var resp = Encoding.ASCII.GetBytes(bar);
                    var toSend = PrependLengthIndicator(resp);
                    if (count % 10000 == 0)
                    {
                        Console.WriteLine(bar);
                    }
                    sock.Send(toSend);
                }
            });
        sender.Start();
    } 
```

这是客户端部分：

```
static void Main(string[] args)
{

    sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        Console.WriteLine("Connecting...");
        sock.Connect(IPAddress.Parse(ConfigurationManager.AppSettings["EndPointIp"]), 3333);
        Console.WriteLine("Connected.");
        Receive();

        var count = 0;
        while(true)
        {
            count++;
            var foo = "Echo-" + count;
            var data = Encoding.ASCII.GetBytes(foo);
            var toSend = PrependLengthIndicator(data);
            sock.Send(toSend);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T14:19:15.830

您正在发送**微小的消息**。想想你需要多少百万个才能使 1 Gbit/sec 链路饱和。对套接字的每次调用都会烧毁 CPU。

**发送更大的消息。**另外，尽量不要一直分配新的缓冲区。不要使用`Enumerable.Concat`连接字节缓冲区，因为它以非常低效的方式逐字节操作。`Array.Copy`与**预分配数组**一起使用。

如果您使用很少的线程切换到**同步 IO**，因为它会更快（真的！它的开销更少）。

**您可以通过运行一个愚蠢的无限发送循环**来确认这个答案是正确的，该循环只是一直同步发送 64KB 的缓冲区。它会使链接饱和。

# python - 在 OSX 上为 virtualenv 设置 Python 32 位和 64 位模式

> ID：14139855
> 
> 赞同：1
> 
> 时间：2013-01-03T13:27:10.910
> 
> 标签：python, macos, virtualenv

我有一个 python 虚拟环境，其唯一目的是使用 wxPython。Mac 上的 wxPython 使用 Carbon 框架，该框架尚未构建为 64 位。因此，我无法在运行 64 位 Python 的 Mac 上运行 wxPython。有没有办法告诉我的安装始终运行 32 位？`arch -i386`每次都用得着越来越烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:30:55.477

如果您正在使用`virtualenv`，则有一个参数`-p`可以指定`PYTHON_EXE`要用于此环境的 。

# java - Hibernate Envers - 不为 createQuery(...).executeUpdate() 编写审计记录，只为 .persist() 和 .merge() 编写审计记录

> ID：14139856
> 
> 赞同：5
> 
> 时间：2013-01-03T13:27:10.793
> 
> 标签：java, spring, hibernate, jboss, hibernate-envers

我有 3 种方式将事物写入数据库

```
public void create(T object) {
    entityManager.persist(object);
}

public void update(T object) {
    object = entityManager.merge(object);
}

public int updateStatus(String id, String status) {

    final int changes =
                entityManager.createQuery("update item set state = :newState," +
                        " last_modified = current_timestamp" +
                        " where id = : id ")
                    .setParameter("newState", status)
                    .setParameter("id", id)
                    .executeUpdate();

            return changes;
} 
```

我遇到的问题是为了让 Hibernate Envers 将审计记录实际写入相应的 x_aud 和 revinfo 数据库表。它仅适用于 '.persist()' 或 '.merge()'。我无法让它为'createQuery(...) **.executeUpdate()** '工作

我是否遗漏了某些东西，或者它只是为此不起作用。问题是，我的很多代码都是使用 .executeUpdate 而不是合并编写的，所以我真的需要它来处理现有代码。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T10:42:50.703

不，如果您使用 executeUpdate，Envers 将无法工作。那是因为更新没有经过Hibernate的事件机制，所以Envers没有机会拦截到变化，写审计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T03:50:49.867

尝试这个 -

```
 public int updateStatus(String id, String status) {

    final int changes =
                entityManager.createQuery("Update Item set state = :newState," +
                        " lastModified = CURRENT_TIMESTAMP" +
                        " where id = : id ")
                    .setParameter("newState", status)
                    .setParameter("id", id)
                    .executeUpdate();

            return changes;
} 
```

以下链接将帮助您了解有关 JPQL 的更多信息 -

[http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T15:14:42.047

看起来**Avinash T.**是对的——如果你想创建原生 SQL 查询，`createNativeQuery(String sqlString)`使用`EntityManager`. `createQuery(String ejbqlString)`仅当您使用 EJB QL 时才可以使用。希望它会有所帮助。

# ruby-on-rails - Rails 委托属性不在@attributes 中，read_attribute 返回 nil

> ID：14139857
> 
> 赞同：1
> 
> 时间：2013-01-03T13:27:24.500
> 
> 标签：ruby-on-rails

我有一个模型，它将一些方法和属性委托给不同的模型，比如说

```
class ModelOne < ActiveRecord::Base
  # this model has some_property column in database
end 
```

和

```
class ModelTwo < ActiveRecord::Base
  belongs_to :model_one

  delegate :some_property, :to => :model_one
end 
```

问题是我可以通过调用该方法而不是通过 read_attribute 来访问“some_property”。

```
> obj1 = ModelTwo.last
> obj1.some_property
=> "some value"
> obj1.read_attribute :some_property
=> nil
> obj1.inspect
=> "#ModelTwo ... , ... , some_property: nil " 
```

可以设置此属性：

```
> obj1.some_property = "some value"
> obj1.inspect
=> "#ModelTwo ... , ... , some_property: "some value" " 
```

所以我可以通过调用它而不是通过 read_attribute 或通过检查来访问委托属性。有没有机会通过read_attribute获取属性值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:41:19.533

如果您查看 read_attribute 的实现：

```
 # File activerecord/lib/active_record/attribute_methods/read.rb, line 128
          def read_attribute(attr_name)
             self.class.type_cast_attribute(attr_name, @attributes, @attributes_cache)
          end 
```

不是基于属性访问器（在您的情况下为 some_property），而是直接访问 @attributes 实例变量，这是有道理的，因为 read_attribute 是允许您绕过访问器的较低级别的 api。因此，你不能做你正在尝试的事情。

这可能不是您正在寻找的答案，但我在您的设计中重新考虑的是为什么您需要通过 read_attribute 访问您的属性。如果您向我们展示您在何处以及如何使用 read_attribute，我将很乐意尝试并进一步帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:29:27.733

也许您应该尝试覆盖 read_attribute 方法。我没有使用 read_attribute，但在类似的情况下，我不得不重写 hash 方法：

```
def [](key)
  value = super
  return value if value
  if super(key+"_id")
    begin
      send(key)
    rescue NoMethodError
    end
  end
end 
```

它不漂亮，并且在没有更准确验证的情况下调用*send(key)*可能存在安全问题。

# css - on:hover 影响选择器及其 :after 部分

> ID：14139866
> 
> 赞同：0
> 
> 时间：2013-01-03T13:27:59.467
> 
> 标签：css, hover

我用 css 做了一个聊天气泡：

```
.bubble 
{
position: relative;
    left: 20%;
width: 250px;
height: 185px;
padding: 0px;
background: #FFFFFF;
border: #817F7F solid 0px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
}

.bubble:after 
{
content: "";
position: absolute;
top: 16.36px;
left: -9px;
border-style: solid;
border-width: 7px 9px 7px 0;
border-color: transparent #FFFFFF;
display: block;
width: 0;
z-index: 1;
} 
```

我想在打开时给气泡和尖头的东西上色`:hover`

```
.bubble:hover  {

background:yellow;    

} 
```

只给 上色`.bubble`，不给`.bubble:after`.

如何为`:after`零件着色？

[这是小提琴](http://jsfiddle.net/sUzPm/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:29:57.857

您需要另一个规则来更改`:after`伪元素内的颜色 on `:hover`：

```
.bubble:hover:after {
    border-color: transparent yellow;
} 
```

[更新的小提琴](http://jsfiddle.net/BoltClock/sUzPm/2)

# spring - 如何在 Hibernate 中打开会话以执行查询

> ID：14139867
> 
> 赞同：0
> 
> 时间：2013-01-03T13:27:58.983
> 
> 标签：spring, hibernate, session

我在我的项目中使用 struts2-spring-hibernate。我正在通过 spring 处理数据库连接，所以我不需要 hibernate.cfg.xml 我需要执行我的查询并且我需要结果

通过使用这些方法，我成功获得了结果

手动打开和关闭会话： 1\. Session session = sessionFactory.openSession(); 2.会话newSession = HibernateUtil.getSessionFactory().openSession();

不手动处理会话 1\. getHibernateTemplate().find(); 2.getSession().createSQLQuery();

我不知道哪种方法最好，请建议我，哪种方法最适合会话

当会话将通过 getHibernateTemplate() 和 getSession() 打开和关闭时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:49:48.297

我将展示我一起使用这些框架的方式。我避免了 HibernateTemplate 的需要，我认为这个类太有限了，我更喜欢直接使用 Session。

一旦你的项目中有 Spring，它应该在你的 Daos 中注入 Hibernate SessionFactory，这样你就可以处理 Session。首先，您需要在 applicationContext.xml 中配置 SessionFactory：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
</bean> 
```

现在您可以使用@Autowired 注解注入 SessionFactory：

```
@Repository
public class HibernateProductDao implements ProductDao {

    private final SessionFactory factory;

    @Autowired
    public HibernateProductDao(final SessionFactory factory) {
        this.factory = factory;
    }

    public List<Product> findAll() {
        return factory.getCurrentSession().createCriteria(Product.class).list();
    }

    public void add(final Product product) {
        factory.getCurrentSession().save(product);
    }
} 
```

这里有一些重要的事情，你应该使用 getCurrentSession() 方法，因为这样你可以让 Spring 控制 Session 生命周期。如果您使用 getSession() 代替，它将成为您的责任，例如，关闭会话。

现在，让我们配置 Struts 2。在您的 web.xml 中：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

您还需要文件 struts.xml，说明 Spring 将制造对象：

```
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.objectFactory" value="spring" />
</struts> 
```

最后，您可以在您的操作中注入道：

```
public class ProductAction {

    private ProductDao dao;

    @Autowired
    public ProductAction(ProductDao dao) {
        this.dao = dao;
    }
} 
```

当然，由于您使用的是 Spring 注解，因此您需要使用[component-scan 扫描](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-annotation-config)包。

这是我发现集成此框架的最佳方式，希望对您有所帮助。

# html - 销售队伍 Qlikview 集成

> ID：14139870
> 
> 赞同：1
> 
> 时间：2013-01-03T13:28:15.093
> 
> 标签：html, salesforce, integration, qlikview

我是 SalesForce 的新手。如果有人能把我推向正确的方向，那就太好了。

我需要做的是将几个 Qlikview 对象嵌入到 SalesForce 页面中。理想情况下，它应该如下所示：标签上的每个销售人员（基本上是任何联系人）以及通常的联系人详细信息（和其他内容）都会有一个部分包含一个简单的 HTML 页面，其中嵌入了 QlikView 对象。

我知道如何将 Qlikview 对象集成到网页中，所以我只需要知道如何将专门创建的网页添加为某个选项卡的一部分。

如果有人可以就如何做到这一点给我一个建议，那就太好了。如果有人可以分享将 Qlikview 集成到 SalesForce 的经验，那就太棒了。

非常感谢。

伊戈尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T16:48:50.617

您可以使用 Qlikview Mashups 将 QlikView 对象集成到 salesforce 用户界面中。

看看以下资源：

QlikView 混搭：[http ://tools.qlikblog.at/QlikView-Mashups](http://tools.qlikblog.at/QlikView-Mashups)

关于 QlikView 和 salesforce.com 集成的一些分步信息（解释票务机制）：http: [//community.qlikview.com/docs/DOC-3730](http://community.qlikview.com/docs/DOC-3730)

希望这可以帮助！

问候斯特凡

# regex - 如何从字符串中删除双字符和空格

> ID：14139872
> 
> 赞同：0
> 
> 时间：2013-01-03T13:28:32.497
> 
> 标签：regex, vb.net, string, double, character

请让我如何从下面的字符串中删除双空格和字符。

字符串 =`Test----$$$$19****45@@@@ Nothing`

干净的字符串 =`Test-$19*45@ Nothing`

我使用了正则表达式`"\s+"`，但它只是删除了双空格，我尝试了其他正则表达式模式，但它太复杂了......请帮助我。

我正在使用 vb.net

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T13:31:35.810

您要做的是创建对任何字符的反向引用，然后删除与该反向引用匹配的以下字符。通常可以使用 pattern `(.)\1+`，它应该只替换为那个反向引用（一次）。这取决于编程语言是如何完成的。

```
Dim text As String = "Test@@@_&aa&&&"
Dim result As String = New Regex("(.)\1+").Replace(text, "$1") 
```

`result`现在将包含`Test@_&a&`. 或者，您可以使用环视来首先不删除该反向引用：

```
Dim text As String = "Test@@@_&aa&&&"
Dim result As String = New Regex("(?<=(.))\1+").Replace(text, "") 
```

**编辑：**包括的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:27:28.270

如需更快的替代方案，请尝试：

```
 Dim text As String = "Test@@@_&aa&&&"

        Dim sb As New StringBuilder(text.Length)
        Dim lastChar As Char
        For Each c As Char In text
            If c <> lastChar Then
                sb.Append(c)
                lastChar = c
            End If
        Next

        Console.WriteLine(sb.ToString()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:32:35.767

这是一种仅用一个替换所有多个非单词字符的 perl 方法：

```
my $String = 'Test----$$$$19****45@@@@ Nothing';
$String =~ s/(\W)\1+/$1/g;
print $String; 
```

**输出：**

```
Test-$19*45@ Nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:37:01.613

这是它在 Java 中的样子......

```
String raw = "Test----$$$$19****45@@@@ Nothing";
String cleaned = raw.replaceAll("(.)\\1+", "$1");
System.out.println(raw);
System.out.println(cleaned); 
```

印刷

```
Test----$$$$19****45@@@@ Nothing
Test-$19*45@ Nothing 
```

# mysql - 如何在大表上优化这个 mysql 连接？

> ID：14139873
> 
> 赞同：5
> 
> 时间：2013-01-03T13:28:33.457
> 
> 标签：mysql, optimization, join, query-optimization

我有一个项目，管理员需要创建多个时事通讯，其中包含一些从网络上抓取的帖子。

抓取完成后，我将帖子插入`posts`表中，并为它们分配一个`feed_id`以识别来源。这是`posts`表的结构（截断）：

```
CREATE TABLE `posts` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `feed_id` int(11) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT NULL,
  `identifier` varchar(255) DEFAULT NULL,
  `published` timestamp NULL DEFAULT NULL,
  `content` longtext,
  ...
  ...
  `is_unread` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

每个管理员（用户）都可以访问一个或多个“提要”。因此，在时事通讯创建页面中，我想向他们展示他们被允许查看的提要中的帖子列表，并且我还显示了一个按钮以将帖子放在该时事通讯的特定类别中，如果用户之前选择了该帖子，我应该给他看，让他从类别中删除。所以我还有一些其他的表：`newsletters`, `categories`, `newsletter_post`, `category_post`. 这是它们的结构：

`newsletters`：

```
CREATE TABLE `newsletters` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT NULL,
  `sent_at` timestamp NULL DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `date` date DEFAULT NULL,
  `topic_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

`categories`：

```
CREATE TABLE `categories` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `topic_id` int(11) NOT NULL,
  `title` varchar(255) DEFAULT NULL,
  `slug` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

`newsletter_post`：

```
CREATE TABLE `newsletter_post` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT NULL,
  `newsletter_id` int(11) NOT NULL,
  `post_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

`category_post`：

```
CREATE TABLE `category_post` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT NULL,
  `category_id` int(11) NOT NULL,
  `post_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

因此，我使用此查询来查找允许提要的帖子，并检查帖子是否属于此特定时事通讯的特定类别的状态：

```
SELECT DISTINCT `posts`.`id`, `published`, `posts`.`title`, `posts`.`content`, `source_name`, `category_id`, `newsletter_id`, `link_href`, categories.title as category_title
FROM `posts`
LEFT JOIN `category_post` ON `posts`.`id` = `category_post`.`post_id`
LEFT JOIN `categories` ON `categories`.`id` = `category_post`.`category_id`
LEFT JOIN `newsletter_post` ON `posts`.`id` = `newsletter_post`.`post_id`
LEFT JOIN `newsletters` ON `newsletters`.`id` = `newsletter_post`.`newsletter_id`
WHERE `feed_id` IN (6, 7) ORDER BY `posts`.`published` DESC LIMIT 40 OFFSET 0 
```

但问题是这太可怕了，而且没有优化。我的`posts`表每个月最多包含 50,000 行，每行平均有 3~10kbs 的数据，所以有时当我尝试运行查询时（管理员经常运行它来制作时事通讯、分页等）mysql 显示这个错误：加入的行太多等等，而且大多数时候它真的很慢。

我在一个查询中完成所有这些操作的原因是因为我希望结果出现在一个 json 响应中，这样我就可以快速向用户展示而无需执行其他请求。

我想知道是否有更好的方法来执行此查询或使用索引或其他方法。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:53:36.933

索引您的帖子表

（feed_id，已发布）

因此数据已经针对您的 WHERE 子句进行了优化，并预先排序以帮助您的 ORDER BY。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:00:02.963

对于读取需求量很大的查询，InnoDB 效率很低。我建议您使用 NoSQL 数据库，但如果您不想要或更改成本太大……您可以试试这个：

1) 就像 Sallar Kaboli 告诉你的那样，你必须在 JOIN 查询中使用的列中索引你的表。例如：

```
 CREATE INDEX index1 ON newsletter_post (post_id); 
```

2) 仅使用重要的列进行连接。

我的意思是，您必须只使用在查询的 SELECT 部分中使用的列。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T14:13:33.600

要完成其他答案，我建议在表上更改此类型`posts`：

1) 更改`feed_id`为`int(4)`。真的你有更多的`int(4)`饲料吗？
2)`is_unread`改为`bit`而不是`int(1)`。我应该说这可能不会改善您在问题中给定的查询，但根据字段名称，正确的类型是`bit`.

这个答案的另一个改进是永远不要`int(11)`对数字或 id 字段使用默认值，分配更具体的类型。使用更小的类型也会改善你的索引。我认为您需要的不仅仅是`int(4)`字段 id。

例如索引和查询`int(3)`列比`int(11)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T13:45:15.300

请在 :: 上创建以下索引索引

```
1) `post_id` in `category_post`
2) `post_id` in `newsletter_post` 
```

# ruby-on-rails - 上限部署：未配置冷生产数据库 - Postgresql

> ID：14139874
> 
> 赞同：1
> 
> 时间：2013-01-03T13:28:35.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, deployment

我正在尝试运行 cap deploy:cold 以使用 postgresql 安装 rails 应用程序，但我无法弄清楚“未配置生产数据库”或其他任何内容是什么意思。

```
* 2013-01-03 08:23:26 executing `deploy:assets:precompile'
* executing "cd /home/deployer/apps/opedio/releases/20130103132324 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
** [out :: 192.155.89.30] rake aborted!
** [out :: 192.155.89.30] production database is not configured
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:in `resolve_string_connection'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in `establish_connection'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:25:in `each'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/releases/20130103131459/config/environment.rb:4:in `<top (required)>'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
** [out :: 192.155.89.30] /home/deployer/apps/opedio/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
** [out :: 192.155.89.30] Tasks: TOP => environment
** [out :: 192.155.89.30] (See full trace by running task with --trace)
command finished in 5983ms
*** [deploy:update_code] rolling back 
```

* 执行“rm -rf /home/deployer/apps/opedio/releases/20130103131459; true”服务器：[“192.155.89.30”] [192.155.89.30] 执行命令命令在 319 毫秒内完成失败：“sh -c 'cd / home/deployer/apps/opedio/releases/20130103131459 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on 192.155.89.30

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:39:07.473

错误消息意味着您没有在 database.yml 中配置生产数据库。

看看你`database.yml`在远程服务器上的情况。

它应该类似于：

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: database_name
  pool: 5
  username: database_user
  password: th3p4ssw0rd
  socket: /path/to/mysql.sock 
```

我建议执行以下操作：

1.) 不要将您的存储`database.yml`在版本控制之下。使用 git 时，只需添加`/config/database.yml`到`.gitignore`文件中（或创建该文件）并提交即可。

2.)`database.yml`在远程服务器上创建`shared/config/`（通过脚本，或手动）。

3.）将`database.yml`您的应用程序中的符号链接到`shared/config`部署中。

```
# /config/deploy.rb:
after 'deploy:finalize_update', 'db:symlink'

namespace :db do
  desc "Symlinks the database.yml"
  task :symlink, :except => { :no_release => true }, :roles => :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
end 
```

您可以在此处阅读有关 database.yml 管理的更全面的文章： [http ://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/](http://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/)

# provisioning - 如何使用 puppetlabs/apt 模块？

> ID：14139875
> 
> 赞同：3
> 
> 时间：2013-01-03T13:28:35.577
> 
> 标签：provisioning, puppet

我正在开发用于通过 Vagrant 配置 VM 的 puppet 清单。我也是傀儡的新手。在尝试使用 puppetlabs/apt 模块时，我遇到了问题：

```
# manifests/default.pp (with commented lines removed)
import "stdlib"
import "apt"

class { 'apt':
  always_apt_update    => false,
  disable_keys         => undef,
  proxy_host           => false,
  proxy_port           => '8080',
  purge_sources_list   => false,
  purge_sources_list_d => false,
  purge_preferences_d  => false
}
apt::release { "sid":} 
```

这是错误消息：

```
Puppet::Parser::AST::Resource failed with error ArgumentError:
Invalid resource type apt::release at /tmp/vagrant-puppet/manifests/default.pp:18
on node vmas1.dokeda.lt 
```

我一直在阅读 puppet 文档；但是，它没有帮助。有人可以向我解释如何正确使用这个模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:40:31.283

我认为自述文件错误地暗示这`apt::release`是一个定义或类型，而实际上[源代码显示它是一个类](https://github.com/puppetlabs/puppetlabs-apt/blob/master/manifests/release.pp)。

相反，尝试这样调用它：

```
class { 'apt::release':
  release_id => 'sid',
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:03:36.967

还要确保不要使用“import”，而是使用“include”。在更新的 puppet 版本中不推荐使用导入。

# java - 从 javaBean 获取属性

> ID：14139879
> 
> 赞同：1
> 
> 时间：2013-01-03T13:28:43.767
> 
> 标签：java, jsf, jsf-2, javabeans

我有一个 applicationScoped bean，我在其中初始化我的 Store。

```
@ManagedBean(name="applicationBean", eager=true)
    @ApplicationScoped
    public class applicationBean implements Serializable {

     private Store store;

        public applicationBean() {
            store = new Store();
        }

        public Store getStore() {
            return store;
        }  

    } 
```

现在我想把我的商店放在我的另一个 Bean 中。

```
@ManagedBean(name="productsBean")
@RequestScoped
public class ProductsBean implements Serializable {

    private List <Product> products;

    public ProductsBean(){

    }

} 
```

如何从我的 applicationScoped Bean 调用 getter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:36:36.820

只需将`@ApplicationScoped`bean 作为托管属性注入 ProductsBean 即可。然后，您将能够访问 Store 属性。

```
@ManagedBean(name="productsBean")
@RequestScoped
public class ProductsBean implements Serializable {

private List <Product> products;

@ManagedProperty(value="#{applicationBean}")
private applicationBean appBean;

public ProductsBean(){

}

} 
```

请记住为属性编写一个设置器，以便 JSF 能够设置它。只是告诉你，Java 语言不鼓励以小写字母 (applicationBean) 开头的类名。

# java - 在 IE8 和 IE9 中禁用 GWT 文本框

> ID：14139881
> 
> 赞同：0
> 
> 时间：2013-01-03T13:28:47.017
> 
> 标签：java, gwt, textbox

我的问题是在 IE8 和 IE9 中禁用了不同的文本框，我已经尝试设置

```
 textbox.setEnabled(true); 
```

但这并没有帮助，这些盒子在 safar、firefox 和 chrome 中运行良好，只有 IE 有问题有人知道为什么吗？

这是使用文本框实现的部分：

```
 public class Text extends Composite {
    private TextBox textBox;
    public Text() {
        ...
        textBox = new TextBox();
        textBox.setEnabled(true);
        textBox.setValue("test");
        textBox.setFocus(true);
        textBox.setReadOnly(false);
        textBox.setWidth("150px");
        textBox.addValueChangeHandler(new ValueChangeHandler<String>() {
        ...
         )};
         textBox.addKeyUpHandler(new KeyUpHandler() {
         ...
         )};

         FlexTable f = new FlexTable();
         f.setWidget(0,0,textBox);

   } 
```

我发现了这个[TEXTBOX FOCUS PROBLEM](http://code.google.com/p/google-web-toolkit/issues/detail?id=5968)但不幸的是，这只是对问题的描述，没有解决方案，这里可能有人知道解决方法吗？

# c# - 模式匹配 c#

> ID：14139904
> 
> 赞同：-5
> 
> 时间：2013-01-03T13:30:23.423
> 
> 标签：c#, regex, pattern-matching

假设我有一个文本文件，其中包含以下行。我想通过匹配（“和”）来获取引号中的两个值，这样我就可以检索 ABC 和 DEF 并将它们放在字符串列表或其他东西中，这样做的最佳方法是什么？太烦人了

如果EXAMPLEA（“ABC”）和EXAMPLEB（“DEF”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:49:03.390

最好的办法...

```
List<string> matches=Regex.Matches(File.ReadAllText(yourPath),"(?<="")[^""]*(?="")")
                          .Cast<Match>()
                          .Select(x=>x.Value)
                          .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:42:45.873

假设双引号之间的值不能包含转义双引号的情况可能如下所示：

```
 var text = "If EXAMPLEA(\"ABC\") AND EXAMPLEB(\"DEF\")";
 Regex pattern = new Regex("\"[^\"]*\"");

 foreach (Match match in pattern.Matches(text))
 {
     Console.WriteLine(match.Value.Trim('"'));
 } 
```

但这只是您可以做到的众多方法之一，也许不是最聪明的方法。自己试试吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:55:16.697

这种模式应该可以解决问题：

\"([^"]*)\"

```
 string str = "If EXAMPLEA(\"ABC\") AND EXAMPLEB(\"DEF\")";
        MatchCollection matched = Regex.Matches(str, @"\""([^\""]*)\""");
        foreach (Match match in matched)
        {
            Console.WriteLine(match.Groups[1].Value);
        } 
```

请注意，引号在实际代码中加倍，以便对其进行转义。并且代码引用组 [1] 来获取括号内的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:06:44.343

```
IEnumerable<string> matches =
    from Match match
    in Regex.Matches(File.ReadAllText(filepath), @"\""([^\""]*)\""")
    select match.Groups[1].Value; 
```

其他人已经发布了一些答案，但我考虑到您只是想要`ABC`并且`DEF`在您的示例中，没有引号并将其保存在`IEnumerable<string>`.

# ruby-on-rails-3 - 为什么我不能在我的 Rspec 类中调用静态函数

> ID：14139905
> 
> 赞同：0
> 
> 时间：2013-01-03T13:30:24.833
> 
> 标签：ruby-on-rails-3, rspec2, rspec-rails

我是 Rails 新手，刚刚开始使用 rspec 版本编写测试：2.11.1。我正在寻找一种方法来为班级中的不同测试播种不同的数据。为此，我在测试本身中创建了一个静态函数。根据我在实例化不同数量的对象时的要求。我有一个函数seed_data，它根据传递给它的数量实例化不同数量的对象。我得到这个例外：

```
NoMethodError: undefined method `seed_data' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_5::Nested_1:0x007fcedd9bea70> 
```

请看下面的示例代码：

```
require 'spec_helper'
require 'go_live_sale'
require 'rspec/expectations'

describe GoLiveSale do

  context "get_go_live_sale_for_sale_ids Function Correctness" do

    describe "Testing get_go_live_sale_for_sale_ids() function correctness " do
      it "should return error when sale_ids is blank" do
         result = GoLiveSale.get_go_live_sale_for_sale_ids({})
         result[:err].should_not be_blank
         result[:err].should  == "err1"
      end

      it "should return all columns corresponding to select field for single go_live_sale" do
        go_live_sales = seed_data(1)
        sale_ids =  go_live_sales.map{ |go_live_sale| go_live_sale.sale_id}
        result = GoLiveSale.get_go_live_sale_for_sale_ids({:sale_ids => sale_ids})
        result[:err].should be_blank
        result[:go_live_sales].count.should_be == 1
        delete_seed_data(go_live_sales)
      end

      it "should return all columns corresponding to select field for multiple go_live_sale" do
        go_live_sales = seed_data(2)
        sale_ids =  go_live_sales.map{ |go_live_sale| go_live_sale.sale_id}
        GoLiveSale.get_go_live_sale_for_sale_ids({:sale_ids => sale_ids})
        result[:err].should be_blank
        result[:message].should be_blank
        result[:go_live_sales].count.should == 2
        delete_seed_data(go_live_sales)
      end

      it "should return selected columns corresponding to select field for single go_live_sale" do
        go_live_sales = seed_data(1)
        sale_ids =  go_live_sales.map{ |go_live_sale| go_live_sale.sale_id}
        result = GoLiveSale.get_go_live_sale_for_sale_ids({:sale_ids => sale_ids, :columns => ["id","sale_id"]})
        result[:err].should be_blank
        result[:go_live_sales].count.should_be == 1
        delete_seed_data(go_live_sales)
      end

      it "should return selected columns corresponding to select field for multiple go_live_sale" do
        go_live_sales = seed_data(2)
        sale_ids =  go_live_sales.map{ |go_live_sale| go_live_sale.sale_id}
        GoLiveSale.get_go_live_sale_for_sale_ids({:sale_ids => sale_ids,  :columns => ["id","sale_id"]})
        result[:err].should be_blank
        result[:message].should be_blank
        result[:go_live_sales].count.should == 2
        delete_seed_data(go_live_sales)
      end

      it "should return error when selecting erroneous columns" do
        go_live_sales = seed_data(2)
        sale_ids =  go_live_sales.map{ |go_live_sale| go_live_sale.sale_id}
        GoLiveSale.get_go_live_sale_for_sale_ids({:sale_ids => sale_ids,  :columns => ["id","random_sale_id"]})
        result[:err].should_not be_blank
        delete_seed_data(go_live_sales)
      end

    end
  end
end

def self.delete_seed_data(go_live_sales)
  go_live_sales.each do |go_live_sale|
    go_live_sale.delete
  end
end

def self.seed_data(number_of_go_live_sale_to_create)
  go_live_sales =[]
  (1..number_of_go_live_sale_to_create).each do |number|
    go_live_sales.push(create_go_live_sale(number))
  end
  return go_live_sales
end

def self.create_go_live_sale(number_to_add)
  go_live_sale  =  GoLiveSale.new
  go_live_sale.start_date = Time.now
  go_live_sale.sale_id = Sale.select("IFNULL(max(id),0)+#{number_to_add} as sale_id").first.try(:sale_id)
  go_live_sale.sale_name = "Test Sale" + go_live_sale.sale_id.to_s
  go_live_sale.sale_type = "Flash Sale"+ go_live_sale.sale_id.to_s
  User.current_user = User.first
  go_live_sale.save
  return go_live_sale
end

RSpec::Matchers.define :be_valid do
  match_for_should do |actual|
    actual[:err].blank?
    actual[:validation_error].blank?
    actual[:is_valid] == true
  end

  match_for_should_not do |actual|
    actual[:err].present?
    actual[:validation_error].present?
    actual[:is_valid] == false
  end

  failure_message_for_should do |actual|
    "Expected validation to pass, but it failed"
  end

  failure_message_for_should_not do |actual|
    "Expected validation to fail, but it passed"
  end
end 
```

我知道这是一些范围问题，或者 rspec 可能不允许您以这种方式编写测试。如果有人可以编写一小段代码来解释如何在这种情况下实例化测试数据，那就太好了。我的 Rails 版本是 3.0.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:42:46.787

您可以摆脱`self.`方法定义中的 并将其移动到`describe GoLiveSale do`块内，然后`seed_data`按预期调用它。

例如：

```
describe GoLiveSale do
  def my_method
  end
  context "some context" do
    it "should call my_method" do
      expect {my_method}.not_to raise_error
    end
  end
end 
```

这个规范应该通过。

# video.js - 带有 video.js 闪存回退的 HTTP 动态流

> ID：14139916
> 
> 赞同：3
> 
> 时间：2013-01-03T13:31:01.693
> 
> 标签：video.js

我正在评估用于直播的 video.js 闪存回退功能。我可以使用 RTMP 或 Adob​​e HTTP 动态流进行流式传输。

然而，似乎不支持任何选项，

这是我的演示设置

```
 <video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="640" height="264"
  poster="http://video-js.zencoder.com/oceans-clip.png"
  data-setup="{}">
   <source src="http://mysite.com:1935/live/android.stream/manifest.f4m" type="video/mp4" />  
   <source src="rtmp://mysite.com/live" type="video/mp4" />
   <source src="http://mysite.com:1935/live/android.stream/playlist.m3u8" type='video/mp4' /> 
```

这是我在萤火虫控制台中看到的

不支持“video/mp4”的指定“type”属性。媒体资源[http://mysite.com:1935/live/android.stream/manifest.f4m](http://mysite.com:1935/live/android.stream/manifest.f4m)加载失败。

不支持“video/mp4”的指定“type”属性。媒体资源 rtmp://mysite.com/live 加载失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:08:27.657

我浏览了 video.js 的源代码（JavaScript 和 ActionScript），但找不到任何对清单文件的支持。这是我也想看到的功能......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T14:44:15.207

video.js 现在支持 Rtmp 一个例子可以通过使用已经打包的文件或这个来看到：

```
<!DOCTYPE html>
<html>
<head>
  <title>Video.js</title>

  <link href="video-js.css" rel="stylesheet" type="text/css">
  <script src="video.js"></script>
  <script>
    videojs.options.flash.swf = "video-js.swf";
  </script>

</head>
<body>

<video id="my_video_1" class="video-js vjs-default-skin" controls
  preload="auto" width="640" height="264" data-setup='{ "techOrder": ["flash"] }'>
  <!-- Stream testing -->
  <source src="rtmp://rtmp.jim.stream.vmmacdn.be/vmma-jim-rtmplive-live/jim" type='rtmp/mp4'>
</video>

      <p>Source from: <a href="http://support.akamai.com/flash/">http://support.akamai.com/flash/</a></p>
</body>
</html> 
```

希望这可以帮助目前陷入困境的任何人，我知道这已经死了一段时间。

# javascript - 使用 javascript 和 chechbox 更改输入类型，如何？

> ID：14139917
> 
> 赞同：1
> 
> 时间：2013-01-03T13:31:04.863
> 
> 标签：javascript, html, input

我想创建一个带有可隐藏和可显示密码输入的注册表单。我试过这个（JS）：

```
function showhide(melyik,hol) {
    var melyiket = document.getElementById(melyik);
    var melyikkel = document.getElementById(hol);

    if (melyikkel.value == '1') {
        document.getElementById(melyikkel).value='0';   
        document.getElementById(melyiket).type='password'; 
    } else {
        document.getElementById(melyikkel).value='1';   
        document.getElementById(melyiket).type='text';                 
    } 
} 
```

形式：

```
<div style="margin-top:20px;">
    <p>SQL host: <input type="text" name="sql_host" value="localhost"/></p>
    <p>SQL adatbázis: <input type="text" name="sql_db"/></p>
    <p>SQL felhasználó: <input type="text" name="sql_user"/></p>
    <p>SQL jelszó: <input type="text" name="sql_password" id="sql_password"/>
        <input type="checkbox" name="show_password_1" id="show_password_1" value="0" onclick="showhide('sql_password','show_password_1');">
    </p>
</div> 
```

我想这样做：如果选中复选框，则密码输入类型为文本。未选中时，密码类型为密码...我编写了此 JavaScript，但无法正常工作。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:36:19.287

用于`.checked`查看复选框是否被选中，而不是值。[这是一个工作示例](http://jsfiddle.net/JTfZC/1/)。

HTML：

```
<input type="password" name="pwd" id="pwd" />
<input type="checkbox" name="show" id="show" onclick="showhide('pwd','show');">​ 
```

JS：

```
function showhide(pwd,show)
{
    var epwd = document.getElementById(pwd);
    var eshow = document.getElementById(show);

    epwd.type = eshow.checked ? 'text' : 'password';                 

}​ 
```

# macos - 如何在 OS X 中绘制工具栏选项卡？

> ID：14139918
> 
> 赞同：2
> 
> 时间：2013-01-03T13:31:06.927
> 
> 标签：macos

如何手动绘制那些用作标签的工具栏按钮？我的意思是这个窗口顶部的控件（见下文）。我认为从技术上讲，它们是放置在工具栏上的单选按钮，或者至少它们是从那里演变而来的。

是否有任何 HITheme* API 来绘制它们？还是我必须使用 CoreUI？我尝试了 CUIDraw `kCUIWidgetButtonSegmentedSCurve`，但这只是提供了一个普通的分段工具栏按钮（就像在查找器窗口的顶部）。我正在寻找的是“设置选项卡”版本：

![在此处输入图像描述](../Images/bee5fb16ea5e569b783e786a382497b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:45:25.447

使用带有“可选”属性集的 NSToolbar + NSToolbarItems 集。这会成功的。 ![截屏](../Images/7b4df6feafc0da29a93279dbeb98d071.png)

# php - 使用波形比较两个音频文件

> ID：14139919
> 
> 赞同：0
> 
> 时间：2013-01-03T13:31:07.573
> 
> 标签：php, python, wav, waveform

> **可能重复：**
> [比较音频文件的两个波形](https://stackoverflow.com/questions/7735871/comparison-of-two-waveforms-of-audio-files)

我找到了一个从 wav 文件生成波形的 php 函数，我对其进行了修改，现在它符合我的需要，它运行良好。

波形似乎对于每个单独的 wav 文件都是如此独特，所以也许可以使用它们的波形比较两个音频文件，看看 b.wav 与 a.wav 有多接近？这是个好主意吗？

我编写了一些 php 函数来逐像素比较两个波形 (JPG)。经过一些测试，我得到以下结果：对于两个不同的音频文件，平均差异是预期结果的 ~97%，但我不知道它在实际代码中将如何工作。

有人可以就这个想法发表意见，也许还有一些有用的提示:)

我正在尝试比较两个音频文件以查看 b.wav 与 a.wav 的接近程度。

PS：我的wav文件几乎一样，唯一的区别是人声。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T13:39:07.557

我在大学里做类似的任务。我使用 C++。

为了比较我做了步骤：

1.  将音频文件拆分为大约 1 秒的块。每个。
2.  计算每个块的快速傅里叶变换 (FFT)。
3.  计算第一个文件的 FFT 和第二个文件的 FFT 之间的相关性。它适用于每个块。
4.  检查所有块相关性超过 80%。这个值对我的项目来说已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:40:43.503

比较波形上的音频是一种方法。但它并没有真正将一个音频文件与另一个匹配。它所匹配的只是一段时间内的幅度差异。因此，如果您的目标是进行比较，那么波形比较是正确的。

如果您真的想比较像 shazam 之类的音频或其他有效的音频，请阅读[how-does-shazam-recognize-song](http://www.soyoucode.com/2011/how-does-shazam-recognize-song)或[An Industrial-Strength Audio Search Algorithm](http://www.ee.columbia.edu/~dpwe/papers/Wang03-shazam.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:42:32.807

在比较信号时，我认为比较图形波形没有多大用处。相反，您应该比较信号本身（`array`s of `float`s 或`int`s）。

有很多信号处理方法可以提供某种相似性度量。首先，我想到了[互相关](http://en.wikipedia.org/wiki/Cross-correlation)函数的简单尝试。

# java - SOAP Web 服务和 Spring Security

> ID：14139924
> 
> 赞同：0
> 
> 时间：2013-01-03T13:31:24.890
> 
> 标签：java, spring-security, soapui

我正在尝试使用 Spring Security 3 保护 SOAP Web 服务。

这是我的配置：

```
<jee:jndi-lookup id="dataSource" jndi-name="jdbc/myDB"
         expected-type="javax.sql.DataSource" />

<http authentication-manager-ref="authenticationManager">
     <intercept-url pattern="/**" access="ROLE_USER" requires-channel="https" />
     <http-basic />
     <logout logout-url="/logout" delete-cookies="JSESSIONID" />
</http>

<authentication-manager id="authenticationManager">
   <authentication-provider>
      <jdbc-user-service data-source-ref="dataSource" />
   </authentication-provider>
</authentication-manager> 
```

Tomcat 针对 SSL 进行了配置，使用了包含服务器私钥的密钥库。我正在使用 SOAPUI 测试 Web 服务。我创建了一个执行服务提供的操作之一的请求。在 Auth 部分，我根据数据库中存在的值添加了测试用户的用户名和密码。发送请求后，我希望创建一个会话并且不需要再次进行身份验证。在 HTTP 响应中，存在 JSESSIONID cookie。当一个网站由相同的机制保护时，用户只输入一次它的凭证，直到它的会话过期，当他需要重新认证时。

我的配置有什么问题？

* * *

编辑：我忘了补充一点，当我多次重新发送相同的请求时，收到的 JSESSIONID cookie 总是有不同的值。对于给定的会话，我是否应该期望它是相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T21:43:37.237

在 TestCase Options 下，您需要打开“Maintain HTTP Session”选项。不幸的是，您必须分别为每个测试用例执行此操作，对此没有全局选项。

# hadoop - 使用 tarball 安装 CDH4

> ID：14139929
> 
> 赞同：0
> 
> 时间：2013-01-03T13:31:59.273
> 
> 标签：hadoop, mapreduce, cloudera, hadoop-yarn

我一直在努力通过 tarball 安装 CDH，没有描述步骤或指南的文档。我确实在服务器上具有 root 访问权限，并希望通过 tarball 在伪模式下安装 CDH4。任何人都可以帮忙吗？在同一台服务器上还安装了 apache hadoop，我想安装这个 CDH，而不影响现有的 apache hadoop。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T14:18:18.843

它不会工作..因为最后 CDH4 将使用您现有的 apache hadoop 正在使用的相同端口..它将工作..如果您关闭现有的 hadoop 集群然后启动您的 CDH4 集群。或者更改 namenode、辅助 namenode、jobtracker、tasktracker 和 datanode 的所有端口号以及它们各自的 Web UI 端口..这有点乏味..如果您提供一些错误日志也会很有帮助..所以我可以突出显示究竟是什么问题。

# sql - 保持'IN'子句的顺序

> ID：14139931
> 
> 赞同：25
> 
> 时间：2013-01-03T13:32:04.013
> 
> 标签：sql, oracle

是否可以保持“IN”条件子句的顺序？

我在 SO 上找到[了这个问题](https://stackoverflow.com/questions/8054511/sql-is-results-order-mapped-to-values-in-in-expression)，但在他的示例中，OP 已经有一个排序的“IN”子句。

我的情况不同，“IN”子句是随机顺序的，像这样：

```
SELECT SomeField,OtherField
FROM TestResult 
WHERE TestResult.SomeField IN (45,2,445,12,789) 
```

我想以 (45,2,445,12,789) 的顺序检索结果。我正在使用 Oracle 数据库。也许SQL中有一个属性可以与条件子句一起使用来指定保持子句的顺序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T13:35:56.650

除非您使用 ORDER BY 子句，否则不会有可靠的排序。

```
SELECT SomeField,OtherField
FROM TestResult 
WHERE TestResult.SomeField IN (45,2,445,12,789)
order by case TestResult.SomeField
         when 45 then 1
         when 2  then 2
         when 445 then 3
         ...
         end 
```

您可以将查询拆分为 5 个查询联合在一起，尽管...

```
SELECT SomeField,OtherField
FROM TestResult 
WHERE TestResult.SomeField = 4
union all
SELECT SomeField,OtherField
FROM TestResult 
WHERE TestResult.SomeField = 2
union all
... 
```

我会更相信前一种方法，它可能会表现得更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-10T10:42:16.497

*在这种情况下，解码函数*很方便，而不是*case 表达式*：

```
SELECT SomeField,OtherField
FROM TestResult 
WHERE TestResult.SomeField IN (45,2,445,12,789)
ORDER BY DECODE(SomeField, 45,1, 2,2, 445,3, 12,4, 789,5) 
```

请注意，出于可读性原因，*值、位置*对（例如*445,3*）保持在一起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T13:37:04.283

试试这个：

```
SELECT T.SomeField,T.OtherField
FROM TestResult T
 JOIN 
   (
     SELECT 1 as Id, 45 as Val FROM dual UNION ALL
     SELECT 2, 2 FROM dual UNION ALL
     SELECT 3, 445 FROM dual UNION ALL
     SELECT 4, 12 FROM dual UNION ALL
     SELECT 5, 789  FROM dual
   ) I
   ON T.SomeField = I.Val
ORDER BY I.Id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T14:20:11.823

还有一种使用字符串函数的替代方法：

```
with const as (select ',45,2,445,12,789,' as vals)
select tr.*
from TestResult tr cross join const
where instr(const.vals, ','||cast(tr.somefield as varchar(255))||',') > 0
order by instr(const.vals, ','||cast(tr.somefield as varchar(255))||',') 
```

我提供这个是因为您可能会发现维护一串值比维护中间表更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-21T03:39:21.737

我能够在我的应用程序中使用（使用 SQL Server 2016）执行此操作

```
select ItemID, iName
  from Items
      where ItemID in (13,11,12,1)
      order by CHARINDEX(' ' + Convert("varchar",ItemID) + ' ',' 13 , 11 , 12 , 1 ') 
```

我使用代码端正则表达式将`\b`（单词边界）替换为空格。就像是...

```
var mylist = "13,11,12,1";
var spacedlist = replace(mylist,/\b/," "); 
```

重要的是，因为我可以在我的场景中缓存结果，直到下次更新相关项目时，查询才在项目创建/修改时运行，而不是在每次查看项目时运行，这有助于最大限度地减少任何性能损失。

# c# - 在复选框上使用 IsMouseOver 更改标签内容

> ID：14139939
> 
> 赞同：0
> 
> 时间：2013-01-03T13:32:48.297
> 
> 标签：c#, wpf, button, triggers

嘿，

我创建了一个按钮，上面有一个复选框。现在，当用户将鼠标悬停在复选框上时，我想更改按钮上的文本。

这是我目前拥有的：

```
 <Button Grid.Row="1" Margin="0,0,136,12" Name="btnRefresh" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="120" Click="btnRefresh_Click">
        <Grid Width="111">
            <CheckBox  Height="16" HorizontalAlignment="Left" Margin="0,2,0,0" Name="cbAutoRefresh" VerticalContentAlignment="Center">
                <CheckBox.Style>
                    <Style TargetType="{x:Type CheckBox}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Content" Value="Auto Refresh" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </CheckBox.Style>
            </CheckBox>
            <Label Name="btnLabel" Margin="32,-4,25,-4">Refresh</Label>
        </Grid>
    </Button> 
```

但是像这样它改变了复选框的内容，我怎样才能改变`btnLabel`内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:39:23.533

目前您只是在修改 ComboBox 的样式，这就是触发器只是更改 ComboBox 内容的原因。

要侦听触发器中的其他控件属性，您可以像这样使用数据绑定：

```
<Label Name="btnLabel" Margin="32,-4,25,-4">
    <Label.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=comboBoxName, Path=IsMouseOver}" Value="False"
                     <Setter Property="Content" Value="Refresh"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ElementName=comboBoxName, Path=IsMouseOver}" Value="True"
                     <Setter Property="Content" Value="Auto Refresh"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Label.Style>

</Label> 
```

# c# - 乘法时的小数精度

> ID：14139941
> 
> 赞同：4
> 
> 时间：2013-01-03T13:32:54.347
> 
> 标签：c#, .net, decimal, precision

给定 2 个值，如下所示：

```
decimal a = 0.15m;
decimal b = 0.85m; 
```

Where `a + b`will always be `1.0m`，两个值都只指定到小数点后 2 位，并且两个值都是`>= 0.0m`和`<= 1.0m`

对于和的所有可能的 Decimal 值，是否**保证**`x == total`始终为`x`真？使用以下计算：`a``b`

```
decimal x = 105.99m;
decimal total = (x * a) + (x * b); 
```

或者是否存在`x == total`仅保留小数点后 2 位但不超过小数点的情况？

如果`a`并且`b`可以指定无限小数位（尽可能多`Decimal`），但只要`a + b = 1.0m`仍然成立，它会有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:49:08.823

十进制以符号、整数和整数指数的形式存储为表示小数位置的数字 10。只要您的整数部分（例如 105.99 中的 105）不够大，那么 a + b 将始终等于 1。并且您的方程式 (x * a) + (x * b) 的结果将始终具有正确的四位小数。

与 float 和 double 不同，精度不会丢失到数据类型的大小（128 位）

来自 MSDN：

> Decimal 值类型表示从正数 79,228,162,514,264,337,593,543,950,335 到负数 79,228,162,514,264,337,593,543,950,335 的十进制数。Decimal 值类型适用于需要大量有效整数和小数位数且无舍入错误的财务计算。Decimal 类型不会消除舍入的需要。相反，它最大限度地减少了由于四舍五入引起的错误。例如，以下代码产生的结果是 0.9999999999999999999999999999 而不是 1

```
decimal dividend = Decimal.One;
decimal divisor = 3;
// The following displays 0.9999999999999999999999999999 to the console
Console.WriteLine(dividend/divisor * divisor); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:51:47.647

`decimal`CLR 中的最大精度为 29 位有效数字。当您使用这种精度时，您实际上是在谈论近似值，尤其是在进行乘法运算时，因为这需要 CLR 必须能够处理的中间结果（另请参见[http://msdn.microsoft.com/en-us /library/364x0z75.aspx](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)）。

如果 x 有 2 位有效数字，例如 a 有 20 位有效数字，则 x * a 的最小精度已经达到 22 位，中间结果可能需要更多精度。

如果 x 总是只有 2 位有效数字，并且您可以将 a 和 b 中的有效数字的数量保持足够低（例如，22 位 - 非常好并且可能远离 27 以处理舍入错误），那么我想（ x * a) + (x * b) 应该是一个非常精确的计算。

最后，a + b 是否总是组成 1.0m 与 a 和 b 的个体精度无关。

# plone - 如何知道结果大脑是基于原型还是基于敏捷的对象？

> ID：14139943
> 
> 赞同：2
> 
> 时间：2013-01-03T13:32:58.387
> 
> 标签：plone, dexterity, archetypes

有没有办法只使用目录搜索产生的大脑来知道一个对象是基于原型还是基于敏捷？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T20:18:24.133

敏捷项目通常将其元类型设置为“敏捷项目”或“敏捷容器”。这在目录元数据中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:05:41.050

我不认为此信息已编入索引，但可以通过获取 FTI 轻松检索。处理大型结果集时可以缓存查找。

我认为这样的事情应该有效：

```
from plone.dexterity.interfaces import IDexterityFTI
from zope.component.hooks import getSite
from Products.CMFCore.utils import getToolByName

def is_dexterity(brain):
    ttool = getToolByName(getSite(), 'portal_types')
    fti = ttol.get(brain.portal_type)
    return IDexterityFTI.providedBy(fti) 
```

# html - 在我的基本 django 模板中呈现静态 html 页面

> ID：14139945
> 
> 赞同：3
> 
> 时间：2013-01-03T13:33:03.163
> 
> 标签：html, django, apache, django-staticfiles

我正在使用 - Django 1.2 - Apache - Mod WSGI 开发一个门户网站

我有几个由 apache 提供的 HTML 文件。

我想在我的基本模板下呈现这些静态 HTML 页面，以保持我的页眉/页脚和动态菜单完好无损。

我可以认为它使用 iframe 的一种方式。另一种方法是在渲染时读取 HTML 文件并返回字符串，但在这种情况下，我失去了 apache 的优势，所以我想知道是否有更好的方法，django 的东西是否提供了任何现有的解决方案?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T13:42:07.583

我不确定这是否正是您所要求的，但是您可以根据需要在带有[`ssi`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#std:templatetag-ssi)and标签的模板中插入一个 html 文件（甚至是另一个模板）：[`include`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#std:templatetag-include)

```
{% ssi '/path/to/file.html' %}
{% include 'relative/path/to/template.html' %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:10:49.700

**编辑：**

*也许您需要在模板系统之外加载 html 文件。那我的方法就不行了。*

一个选项是扩展您的基本模板。

您的基本模板不应该知道子模板，因为这在逻辑上是错误的。

例子：

**base_template.html：**

```
<html>
<div id='header'></div>
{% block content %}
    This text can be left out else it it will shown when nothing is loaded here
{% endblock %} 
```

**sub_template.html：**

```
{% extends "base_template.html" %}

{% block content %}
    <h1>This is my subpage</h1>
{% endblock %} 
```

你可以在这里阅读更多：

[https://docs.djangoproject.com/en/1.2/topics/templates/](https://docs.djangoproject.com/en/1.2/topics/templates/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T13:42:13.937

是的，这是[包含标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)

> 加载模板并使用当前上下文呈现它。这是在模板中“包含”其他模板的一种方式。

很简单

```
{% include "templates/static_template_1.html" %} 
```

或者，如果您在视图端创建一个变量：

```
{% include template_name_variable %} 
```

它与基本模板（包括它们的模板）共享上下文

# android - 开发平板电脑应用程序| 安卓

> ID：14139948
> 
> 赞同：-1
> 
> 时间：2013-01-03T13:33:07.423
> 
> 标签：android, layout, tablet

我为 Android 智能手机（包括 7 英寸平板电脑和 Notes）开发了一个应用程序，我强制应用程序垂直运行（通过 AndroidManifest.Xml）

现在我想为平板电脑（特别是 10.1 英寸）开发相同的应用程序：

1.  它将是相同的 APK，还是创建另一个 APK 更好？
    1.  无论如何要找到设备是否是平板电脑？（屏幕大小什么的）
    2.  如果它是相同的 APK，我如何强制应用程序在智能手机上粘贴在垂直上，而在平板电脑上粘贴在水平上？（这意味着如果应用程序在平板电脑上运行它永远不会旋转到垂直，反之亦然智能手机）
    3.  我如何定义水平布局？！
    4.  如果有人对此有特殊经验，请与我分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:48:16.417

我想给你一些建议。

> 它将是相同的 APK，还是创建另一个 APK 更好？

它应该是一个应用程序。

> 如果它是相同的 APK，我如何强制应用程序在智能手机上粘贴在垂直上，而在平板电脑上粘贴在水平上？（这意味着如果应用程序在平板电脑上运行它永远不会旋转到垂直，反之亦然智能手机）

对于布局问题，请考虑[this](http://developer.android.com/guide/practices/screens_support.html)。这应该会给你一些关于如何实现它的基本想法。

> 我如何定义水平布局？！

对于水平布局，您可以定义单独的布局。您检查屏幕尺寸或任何证明水平布局的东西并设置布局。

> 如果有人对此有特殊经验，请与我分享

我通过使用屏幕尺寸来遵循它，并且我根据尺寸使用了布局。看看[这](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseSWQuali)向你解释了一些事情。

编辑 ：

同样适用于垂直布局。即定义了垂直布局。

水平使用`dp`。通过上面的第一个链接了解它。在那里你可以像下面这样。

> 与密度无关的像素 (dp)
> 定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

# linux - LVS 哈希表的连接调度

> ID：14139953
> 
> 赞同：0
> 
> 时间：2013-01-03T13:33:47.117
> 
> 标签：linux, linux-kernel

LVS 支持连接哈希表，请求消息首先会查找连接是否在 LVS 中进行了哈希处理，如果是，则消息将发送到固定节点。

LVS 还支持一些连接调度方法，比如 Round Robin。从 Round Robin 的描述来看，*每个*请求都是循环的，这对我来说没有意义。如果请求找到一个现有的散列连接，它将被传递到一个固定的节点，并且无法与 Round Robin 平衡。

这个问题让我很困惑，我无法继续，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:18:35.087

当 IPVS 接收到新连接时，它会选择一个真实的服务器来处理该连接。该选择是使用调度程序中的一个完成的。如果连接不是新连接，则将其交给真实服务器，则不使用调度程序。

Round Robin 是一种调度程序，它循环分发所有*新*的连接请求，而不是现有连接的数据包。

# javascript - 如何从javascript函数传递值？

> ID：14139955
> 
> 赞同：-3
> 
> 时间：2013-01-03T13:33:55.023
> 
> 标签：javascript, function, progress-bar

> **可能重复：**
> [如何将 JS 变量传递给 php？](https://stackoverflow.com/questions/3920209/how-to-pass-js-variable-to-php)
> [将javascript变量传递给php？](https://stackoverflow.com/questions/5546675/passing-javascript-variables-to-php)

如何从javascript函数传递值，我有这种代码

```
function next(c,q){
    var y=Number(q);
    var x=Number(c)+1;
    var texta=document.getElementById('myText');
    var content=document.getElementById('woo'+x);
    var page=document.getElementById('paged');
    var thik=document.getElementById('lengthik');

    texta.value=content.value;
    page.value=x;
    thik.value=y;

    var z=100/y;

    //update progress bar
    $("#progressbar").progressbar("option", "value", $("#progressbar").progressbar("option", "value") + z);

    if($("#progressbar").progressbar("option", "value") < 100){
        $("#amount").text($("#progressbar").progressbar("option", "value")+"%");
    }
    else{
        $("#amount").text(100+"%");
    } 

} 
```

我想将 id #progressbar 的新值扔到 php.ini 文件中。这个 id 是动态的，因为它是一个 probresbar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:42:43.073

试试这个：

```
$.ajax({
    type: "GET",
    url: "yourphpfile.php",
    data: "texta=" + texta+ "&content=" + content// texta,contentare javascript variables
    success: function(response){
        if(response != '') {
            //success  do something
        } else {
            // error
        }
    }   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:45:16.397

要在 javascript（在客户端计算机的浏览器上运行）和 PHP（在您的服务器上运行）之间进行通信，您需要使用 ajax。由于您已经在使用 jQuery，我建议使用他们的抽象方法[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)。它看起来像这样：

```
// post value of #progressbar id to my php page
$.ajax({
    url: myPHPPage.php,
    data: JSON.stringify({ progressbarID: '#progressbar' }),
    success: function (dataFromServer) {
        alert('it worked!');
    },
    error: function (jqXHR) {
        alert('something went horribly wrong!');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:06:57.667

所以你有两个选择。Javascript 只能通过 ajax 将变量传递给 PHP。这是因为 javascript 在客户端浏览器上运行，而 PHP 在服务器上运行。

选项 1 - 使用 Ajax。Javascript：

```
//update progress bar
$.ajax({
   type: "POST",
   url: "some.php",
   data: { num: y } //or use q instead of y. its what you passed in
}).done(function(data) {
   $('#amount').text(data);
}); 
```

这是php文件

```
<?php 
//some.php
$complete = $_POST['num'];
$progress = $complete / $total; //you'll have to set what "total" is.

$progress .= '%';

echo $progress;
?> 
```

选项 2 - 在页面加载时使用 PHP，然后使用 javascript 更新进度条。这就像同时使用 PHP 和 Javascript，但从技术上讲，您是在使用 PHP 生成 javascript 代码。

```
function next(c,q){
var y=Number(q);
var x=Number(c)+1;

var complete = (c / <?php echo $total;?>);

//update progress bar
//not sure how your progress bar library works.
//but maybe like this:
$("#progressbar").progressbar({"value" : complete}); 
} 
```

# php - 更改数组顺序（如列）

> ID：14139956
> 
> 赞同：0
> 
> 时间：2013-01-03T13:33:56.453
> 
> 标签：php, arrays, sorting

我想从以下位置更改顺序：

```
$array = array(
    "a" => "bar",
    "b" => "foo",
    "c" => "bar",
    "d" => "foo",
    "e" => "bar",
    "f" => "foo",
    "g" => "bar",
    "h" => "foo",
    "i" => "bar",
    "j" => "foo"
); 
```

至：

```
$array = array(
    "a" => "bar",   "f"=> "foo",
    "b" => "foo",   "g"=> "bar",
    "c" => "bar",   "h"=> "foo",
    "d" => "foo",   "i"=> "bar",
    "e" => "bar",   "j"=> "foo"
); 
```

这一点是我想用数组中的项目填充一个表：

数组不应该这样排序：

```
<table>
<tr><td>Item 1</td><td>Item 2</td></tr>
<tr><td>Item 3</td><td>Item 4</td></tr>
</table> 
```

但是像这样：

```
<table>
<tr><td>Item 1</td><td>Item 3</td></tr>
<tr><td>Item 2</td><td>Item 4</td></tr>
</table> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:57:15.527

无需重新排列原始数组。只需使用 array_chunk 将其分成两对，并在构建 html 时循环遍历它们。

```
$array = array(....);
$size = ceil(count($array) / 2);
list($left, $right) = array_chunk($array, $size, true);
echo '<table>';
while (count($left) > 0) {
    echo '<tr>';
    echo '<td>', key($left), ': ', array_shift($left), '</td>';
    echo '<td>', key($right), ': ', array_shift($right), '</td>';
    echo '</tr>';
}
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:53:37.313

我假设键是字符串还是整数并不重要。

```
$array = array(
    4 => 'd',
    2 => 'b',
    3 => 'c',
    6 => 'f',
    5 => 'e',
    1 => 'a'
);

$x = floor(count( $array ) / 2);
for( $i=1; $i <= $x; $i++ )
{
    $array2[ $i ] = $array[ $i ];
    $array2[ $i + $x ] = $array[ $i + $x ];
} 
```

将输出：

```
$Array2
(
    [1] => a, [4] => d,
    [2] => b, [5] => e,
    [3] => c, [6] => f
) 
```

JB

# java - JAXB 生成错误的类

> ID：14139957
> 
> 赞同：3
> 
> 时间：2013-01-03T13:34:02.867
> 
> 标签：java, xsd, jaxb, jaxb2

从 xsd 文件生成一些类后，这些类有问题。@xmlElementRef 与 required="false" 一起使用，并且不允许使用该属性。我正在使用的 .xsd：

```
<xs:schema xmlns:ns="http://shop.pau.softm.com/xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema"
elementFormDefault="qualified" 
targetNamespace="http://shop.pau.softm.com/xsd">
  <xs:element name="checkOrder">
  <xs:complexType>
  <xs:sequence>
            <xs:element minOccurs="0" name="order" nillable="true" type="ns:Order"/>
         </xs:sequence>
      </xs:complexType>
   </xs:element>
  <xs:complexType name="Order">
  <xs:sequence>
     <xs:element minOccurs="0" name="addressNumber" type="xs:int"/>
     <xs:element minOccurs="0" name="auftragsNummer" type="xs:int"/>
     <xs:element minOccurs="0" name="companyNumber" nillable="true" type="xs:string"/>
     <xs:element maxOccurs="unbounded" minOccurs="0" name="condition" nillable="true" type="ns:Condition"/>
     <xs:element minOccurs="0" name="currency" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="customerId" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="customerReference" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="deliveryAddress" nillable="true" type="ns:Address"/>
     <xs:element minOccurs="0" name="deliveryConditions" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="deliveryType" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="endCustomerId" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="endCustomerReference" nillable="true" type="xs:string"/>
     <xs:element maxOccurs="unbounded" minOccurs="0" name="error" nillable="true" type="ns:Error"/>
     <xs:element minOccurs="0" name="haltDescription" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="haltFlag" type="xs:boolean"/>
     <xs:element minOccurs="0" name="keySalesArea" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="openingHours" nillable="true" type="xs:string"/>
     <xs:element maxOccurs="unbounded" minOccurs="0" name="orderItem" nillable="true" type="ns:OrderItem"/>
     <xs:element minOccurs="0" name="origin" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="tourNumber" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="type" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="warehouseMan" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="warehouseNumber" type="xs:int"/>
     <xs:element minOccurs="0" name="wishedDeliveryDate" nillable="true" type="xs:string"/>
  </xs:sequence>
</xs:complexType>
<xs:complexType name="Condition">
  <xs:sequence>
     <xs:element minOccurs="0" name="description" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="type" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="value" nillable="true" type="xs:decimal"/>
  </xs:sequence>
</xs:complexType>
<xs:complexType name="Address">
<xs:sequence>
     <xs:element minOccurs="0" name="city" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="country" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="createAddress" type="xs:boolean"/>
     <xs:element minOccurs="0" name="name" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="name2" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="name3" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="name4" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="street" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="zip" nillable="true" type="xs:string"/>
  </xs:sequence>
 </xs:complexType>
 <xs:complexType name="Error">
 <xs:sequence>
     <xs:element minOccurs="0" name="code" type="xs:int"/>
     <xs:element minOccurs="0" name="message" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="origin" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="type" nillable="true" type="xs:string"/>
  </xs:sequence>
 </xs:complexType>
 <xs:complexType name="OrderItem">
   <xs:sequence>
     <xs:element minOccurs="0" name="additionalText" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="additionalText2" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="customerProductId" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="eanCodeOrderUnit" nillable="true" type="xs:string"/>
     <xs:element maxOccurs="unbounded" minOccurs="0" name="error" nillable="true" type="ns:Error"/>
     <xs:element minOccurs="0" name="haltDescriptionItem" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="price" nillable="true" type="xs:decimal"/>
     <xs:element minOccurs="0" name="productId" nillable="true" type="xs:string"/>
     <xs:element minOccurs="0" name="quantity" type="xs:double"/>
    </xs:sequence>
</xs:complexType>
<xs:element name="checkOrderResponse">
   <xs:complexType>
    <xs:sequence>
        <xs:element minOccurs="0" name="return" nillable="true" type="ns:Order"/>
     </xs:sequence>
  </xs:complexType>
 </xs:element>
<xs:element name="submitOrder">
<xs:complexType>
<xs:sequence>
        <xs:element minOccurs="0" name="order" nillable="true" type="ns:Order"/>
     </xs:sequence>
  </xs:complexType>
 </xs:element>
<xs:element name="submitOrderResponse">
<xs:complexType>
<xs:sequence>
        <xs:element minOccurs="0" name="return" nillable="true" type="ns:Order"/>
     </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

和结果（部分）

```
package com.softm.pau.shop.xsd;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlType;
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Address", propOrder = {
    "city",
    "country",
    "createAddress",
    "name",
    "name2",
    "name3",
    "name4",
    "street",
    "zip"
})
public class Address {

@XmlElementRef(name = "city", namespace = "http://shop.pau.softm.com/xsd", type =  JAXBElement.class, required = false)
protected JAXBElement<Object> city;
@XmlElementRef(name = "country", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> country;
protected Object createAddress;
@XmlElementRef(name = "name", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> name;
@XmlElementRef(name = "name2", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> name2;
@XmlElementRef(name = "name3", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> name3;
@XmlElementRef(name = "name4", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> name4;
@XmlElementRef(name = "street", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> street;
@XmlElementRef(name = "zip", namespace = "http://shop.pau.softm.com/xsd", type = JAXBElement.class, required = false)
protected JAXBElement<Object> zip; 
```

我怎样才能得到 XmlElement 而不是 XmlElementRef？我必须在 xsd 中更改什么？xsd 是从 wsdl 中提取的，我想使用生成的类来调用 web 服务。

齐格弗里德

好的，这里有一些信息，无法回答我自己的问题......

我正在使用 STS 和 Java6。在我的 build.xml 中编码

```
<!-- JAXB-->
<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath>
        <fileset dir="lib/ct" includes="*.jar" />
    </classpath>
</taskdef>

<target name="gen.java" description="Generates the JAXB business objects">
    <xjc destdir="src/gen" extension="true">
        <schema dir="conf/webapp/WEB-INF/schema" includes="*.xsd" />
        <binding dir="resources" includes="*.xjb" />
    </xjc>
</target> 
```

我的 binding.xjb 看起来像

```
<jxb:bindings version="1.0" 
 xmlns:jxb="http://java.sun.com/xml/ns/jaxb" 
 xmlns:s="http://www.w3.org/2001/XMLSchema" 
 xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
jxb:extensionBindingPrefixes="xjc">

<jxb:bindings schemaLocation="../conf/webapp/WEB-INF/schema/wsinapa.xsd" node="/s:schema">
    <jxb:bindings node="/s:schema/s:element[@name='AccountStatus']">
        <jxb:class name="AccountStatusRequest"/>
    </jxb:bindings>
</jxb:bindings> 
```

在 src 目录中有 2 个应该编译的 .xsd。其中一个编译没有错误，另一个没有。两者都是从 wsdl 文件中提取的。

干杯

齐格弗里德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T13:54:10.917

您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会生成错误的类。该`required`属性已添加到`@XmlElementRef`JAXB 2.2 中的注释中。

*   [http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementRef.html#required()](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementRef.html#required())

您很可能已经在 J​​ava SE 7（包括 JAXB 2.2）中生成了 JAXB 类，并尝试在 Java SE 6（包括 JAXB 2.1）中运行。使用 JAXB 2.2 实现，您可以使用该`-target`标志创建与 JAXB 2.1（或 JAXB 2.0）兼容的代码。

```
xjc -target 2.1 schema.xsd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T14:05:14.433

我认为 xsd 没什么可改变的。尝试如下创建一个绑定文件，比如 simple-binding.xjb。

```
<jaxb:bindings version="2.1" 
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
   <jaxb:globalBindings generateElementProperty="false"/> 
</jaxb:bindings> 
```

然后在从 xsd 生成 java 类时使用此命令。我猜你是`wsimport`与 jdk 一起生成源的。

```
wsimport -b simple-binding.xjb 
```

所以你不会得到标签`XmlElementRef`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-07T17:36:18.590

在我的项目中，发生了同样的问题，因为 XSD 文件中定义的类型的字段之一被重复。因此，JAXB 无法生成正确的 java 类，因为在 java 类中不能有两个同名的字段。作为一种解决方法，JAXB 给了我与原始帖子中相同的奇怪输出。

我知道这个线程已经很老了，但是寻找类似问题的解决方案的人可能会发现这很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T16:49:10.060

如果您使用[maven-jaxb2-plugin](https://java.net/projects/maven-jaxb2-plugin/pages/Home)运行 XJC，您可能会遇到同样的问题。我通过`<specVersion>`在`2.1`我的`pom.xml`. 如下：

```
<plugin>
  <groupId>org.jvnet.jaxb2.maven2</groupId>
  <artifactId>maven-jaxb2-plugin</artifactId>
  <executions>
    <execution>
      ...
      <configuration>
        ...
        <specVersion>2.1</specVersion>
        ...
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# c# - WPF DataGrid 空白行

> ID：14139966
> 
> 赞同：0
> 
> 时间：2013-01-03T13:34:39.213
> 
> 标签：c#, wpf, datagrid, wpfdatagrid, virtualization

我有一个包含大约 500000 个虚拟化项目的 DataGrid。当我使用鼠标滚轮滚动或使用滚动条缓慢上下滚动时，加载新行没有问题，但是当我通过拖动滚动条滚动时（可能超过 200000 条左右的记录，我得到一个空白网格。网格仍然存在空白，直到我重新初始化 ItemsSource。

我正在使用[本教程](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)中的代码，并且我的 GridView 从窗口的数据上下文中加载项目。有没有我遗漏的东西或更可靠的虚拟化这些项目的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:09:11.000

尝试使用 VirtualizingCollection 而不是 AsyncVirtualizingCollection。此外，请确保 IsDeferredScrollingEnabled="True"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:39:28.330

您可以检查您设置为数据网格的数据源的内容。源中有数据吗？

# javascript - 在 div 上切换类 = 在另一个 div 上取消切换类

> ID：14139967
> 
> 赞同：2
> 
> 时间：2013-01-03T13:34:42.520
> 
> 标签：javascript, jquery, ajax

我有一些 div（#div1、#div2、#div3）在点击时会改变外观，它们使用这个脚本切换一个类：

```
$(document).ready(function() {
    $("#parent_div").on('click', '.current_class', function () {
        $(this).toggleClass("new_class");
    });
}); 
```

现在我希望 div 不能同时切换，所以它们的工作方式有点像带有相同的单选按钮`"name"`。

示例：想象三个看起来相同的 div（默认类），然后单击其中一个 div（例如 #div1），然后切换一个新类并更改外观。现在你点击另外两个之一，这个也改变外观（切换类），同时当这个改变外观#div1 变回默认类。

所以这三个中只有一个 div 可以同时切换新类。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:36:14.477

您首先需要从所有 div 中删除该类，然后将其添加到当前的。尝试这个：

```
$("#parent_div").on('click', '.current_class', function () {
    $('#parent_div .new_class').removeClass('new_class'); // remove exisiting
    $(this).addClass("new_class"); // add to current
}); 
```

**更新**

添加了从当前删除类的功能：

```
$("#parent_div").on('click', '.current_class', function () {
    var $this = $(this);
    if (!$this.hasClass('new_class')) {
        $('#parent_div .new_class').removeClass('new_class');
        $this.addClass("new_class");
    }
    else {
        $this.removeClass("new_class");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:36:11.623

利用：

```
$(document).ready(function() {
    $("#parent_div").on('click', '.current_class', function (){
        if($(this).hasClass('.new_class')){
            $(this).removeClass('.new_class');
        }else {
            $('.new_class').removeClass('.new_class');
            $(this).addClass('.new_class');
        }
    });
}); 
```

**更新**：代码现在允许使用类切换当前元素`.new_class`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:43:06.550

这是可能的，但您需要手动重置所有其他 div。

一个例子是：

我有 3 个可用 id 的 div-1、div-2 和 div-3 的 div。我正在使用默认类“默认”和定义类，因此我可以单击它们“可点击”，而我的其他类将被“选中”。

要实现这一点，您需要执行以下操作：

```
$(document).ready(function()  {
    $('#parent-div').on('click, 'clickable', function() {
        $('.selected').removeClass("selected").addClass("default");
        $(this).addClass("selected");
    })
}); 
```

我希望这有帮助。我无法检查语法是否完全正确，但我相信这可以按要求完成工作。

亲切的问候， NDakotaBE

# r - 最佳可视化方法

> ID：14139969
> 
> 赞同：0
> 
> 时间：2013-01-03T13:34:48.830
> 
> 标签：r, graphics, data-visualization

我有看起来像这样的数据：

```
 chr01 chr02 chr03 chr04 chr05 chr06 chr07 chr08 chr09
T10     2     5     3     5     4     1     9     2     3
T11     0     2     1     5     2     1     3     5     4
T65     0     5     1     3     4     1     5     3     1 
```

某些列的列有 0。我想可视化每列中零的数量（可能是每列的 0 百分比内容）。我是 R 用户，首先我想到了使用饼图，但我想知道是否有任何复杂的方式来表示它！？即使我尝试过热图。还有其他方式来表示吗？（底线是我想代表每列 0 的百分比）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:23:07.093

另一种方法是使用`dotplot`- 你只用一个点表示你的值。我会使用 package [lattice](http://cran.r-project.org/web/packages/lattice/index.html)而不是 ggplot2 来执行此操作，但我在下面添加了两种解决方案以防万一：

```
#load df data from @Arun answer, and then...
library(reshape2)#for melt function
dd <- apply(df,2,function(x) mean(x==0)*100)
d1 <- melt(dd)#gets data to long format
d <- data.frame(variable=rownames(d1), d1) 
#lattice dotplot
library(lattice)
dotplot(reorder(variable, value) ~ value, d, col=1, aspect=1, 
        xlab="percentage", ylab="") 
```

![在此处输入图像描述](../Images/e4848776cc6cff5e47e4bc6d70a3c58e.png)

```
#ggplot2 dotplot 
library(ggplot2)
ggplot(d, aes(x = value, y = reorder(variable, value))) + 
  labs(x = "percentage", y = "") +
  geom_point() + 
  theme_bw() 
```

![在此处输入图像描述](../Images/da368f1c06652e9896adf2a45bf3c576.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:44:24.447

表示结果的简单方法是制作条形图。假设您的数据框名为`df`：

```
#Calculate percentage of 0 for each column
pr.0<-apply(df,2,function(x) mean(x==0)*100)
#Plot results
barplot(pr.0,ylab="Percentage") 
```

![在此处输入图像描述](../Images/091e4af003958b44baa1e48792e4d1b3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:20:24.530

您也可以使用[ggplot2](http://docs.ggplot2.org/0.9.3/geom_bar.html)。它为您提供了更多控制权，尽管我不确定这是否是您正在寻找的视觉糖果。`@Didzis`我不确定您是否要求完全不同类型的可视化，或者您是否正在寻找具有更多控制权的条形图（如图所示）。对于第二种情况，`ggplot2`可能有用：

```
require(ggplot2)
df <- structure(list(chr01 = c(2L, 0L, 0L), chr02 = c(5L, 0L, 5L), 
         chr03 = c(3L, 1L, 0L), chr04 = c(0L, 5L, 0L), chr05 = c(0L, 
         2L, 4L), chr06 = c(0L, 0L, 0L), chr07 = c(9L, 3L, 0L), chr08 = c(2L, 
         0L, 3L), chr09 = c(3L, 4L, 1L)), .Names = c("chr01", "chr02", 
         "chr03", "chr04", "chr05", "chr06", "chr07", "chr08", "chr09"
         ), class = "data.frame", row.names = c("T10", "T11", "T65"))
gg.df <- data.frame(chr.id = names(df))
gg.df$cnt <- sapply(df, function(x) sum(x==0)/length(x) * 100)

qplot(factor(chr.id), weight=cnt, data=gg.df, geom="bar", fill=factor(chr.id)) 
```

这给了你：![ggplot2 条形图示例](../Images/ecdd98a4a80034262ebfa904949a2429.png)。
当然，您可以更改此图的每个元素（查看本文开头的链接）。

# ajax - jQuery Ajax 未执行

> ID：14139972
> 
> 赞同：1
> 
> 时间：2013-01-03T13:34:52.387
> 
> 标签：ajax, jquery, jquery-post

问候。

我做了这个 jQuery Ajax 调用，它似乎没有执行。

它确实处理`.live()`呼叫，但不处理`.ajax()`呼叫。

有任何想法吗？

ajax.js 的来源：

```
$("#action_login").live("click", function() {
    var username = $("#login_form input.username").val();
    var password = $("#login_form input.password").val();
    alert("Username: " + username + "/nPassword: " + password);
    $("#login_form .status").ajax({
        type: 'POST',
        url: 'ajax/login.php',
        data: {
            'username': username,
            'password': password
        },
        success: function(data) {
            alert(data);
        },
        error: function(data) {
            alert("error" + data);
        },
        dataType: dataType
    });
}); 
```

它确实调用了第一个`alert();`命令，并使用来自用户名和密码输入的正确值，但之后没有任何反应。

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:38:19.040

`$("#login_form .status")`是对作为参数的`$`函数的调用。`"#login_form .status"`

它返回一个与 非常不同的对象`$`，并且它没有任何`ajax`功能。

所以，更换

```
$("#login_form .status").ajax( 
```

和

```
$.ajax( 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:39:01.113

代替

```
$("#login_form .status").ajax 
```

和

```
$.ajax 
```

# macos - 如何在 Apple 邮件的电子邮件正文中添加小徽标或图像？

> ID：14139976
> 
> 赞同：1
> 
> 时间：2013-01-03T13:35:27.793
> 
> 标签：macos, plugins, applescript, xcode4.5, apple-mail

我是为 Mac OS X 开发 Apple Mail 插件的新手，

所以我不知道如何在任何电子邮件地址之前在电子邮件内容（正文）中添加一个小徽标或图像，

意味着我们还需要检测电子邮件正文中的电子邮件地址，然后在每封电子邮件旁边添加徽标。像这个 ![在此处输入图像描述](../Images/6434a20df9e63c59a98a2eedd6322b91.png)

我怎样才能做到这一点？

# css - 如何使具有不同锚元素的div的整个背景颜色可点击

> ID：14139983
> 
> 赞同：0
> 
> 时间：2013-01-03T13:35:51.650
> 
> 标签：css, html, clickable

我有一个 html，其中一个 div 包含 2 个锚元素。如果我将样式类应用于具有某些背景颜色的单个元素，则整个背景都是可点击的。如果我对 div 应用样式类，则两个锚元素都显示在背景上，但整个背景不可点击，只有单个锚元素可点击。

我不想使用任何 JS 或 jQuery。

```
<div id="" class="AccordionTab" name="">
    <table id="Nickname_table" class="CommonTableClass" cellspacing="0" cellpadding="0" border="0">
        <tbody>
            <tr id="Nickname_tr">
                <td id="Nickname_td">
                    <a id="Nickname" href="#BalanceDisplay">It is my nick Names</a>
                </td>
            </tr>
        </tbody>
    </table>
    <table id="AvailableTag_table" class="CommonTableClass" cellspacing="0" cellpadding="0" border="0">
        <tbody>
            <tr id="AvailableTag_tr">
                 <td id="AvailableTag_td">
                     <a id="AvailableTag" href="#BalanceDisplay" ">hi</a>
                 </td>
            </tr>
       </tbody>
   </table>
</div> 
```

这里 AccordionTab 是具有背景颜色的样式类。

如果我应用它`<a id="AvailableTag" class="AccordionTab" href="#BalanceDisplay" ">hi</a>`

对于单个锚元素，整个背景都是可点击的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:16:12.937

“可点击”是什么意思？

我怀疑您正在尝试仅使用 CSS 编写手风琴式控件。但是，一般来说，CSS 不允许您修改行为。这个责任留给了 JavaScript 的角色。

此外，CSS 允许您仅定位元素及其子元素，而不是其父元素。例如，您不能`Nickname_td`从`Nickname`. 至少在 CSS3 中没有。（[CSS4](http://dev.w3.org/csswg/selectors4/#subject)可能会提供这个，但还有很长的路要走）。

如果您希望根据文档的状态修改行为，恐怕您可能不得不求助于某种 JavaScript。

# batch-file - 如何从 DOS 批处理文件中多次调用可执行文件？

> ID：14139984
> 
> 赞同：0
> 
> 时间：2013-01-03T13:35:53.720
> 
> 标签：batch-file, dos

我想编写一个接受一个强制参数的 MS-DOS 批处理文件`%1`。此参数指定我从批处理文件中调用可执行文件的次数。

简而言之，如何从批处理文件中调用可执行文件（例如， `pdflatex.exe`）次？`%1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:43:23.590

您可以使用 for 循环。

句法：

```
FOR /L %%A IN (1,1,%1) DO pdflatex.exe 
```

有关批处理文件中的 For 循环的更多信息，请使用 Google：batch for

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:43:02.730

你需要做一个基本的循环：

在这里检查这个网站：

[http://tom.paschenda.org/blog/?p=26](http://tom.paschenda.org/blog/?p=26)

```
echo off
SET /a i=0

:loop
IF %i%==%1 GOTO END
    pdflatex.exe
SET /a i=%i%+1
GOTO LOOP

:end 
```

# android - 如何在 Oracle Virtual box 中创建 7" Tablet (1280 * 800) 屏幕分辨率模拟器？

> ID：14139996
> 
> 赞同：1
> 
> 时间：2013-01-03T13:36:15.103
> 
> 标签：android

> **可能重复：**
> [制作华硕 google nexus 7 的模拟器](https://stackoverflow.com/questions/14064998/make-emulator-of-asus-google-nexus-7)

我正在尝试在**Oracle Virtual box 中**使用 dpi=216 Resolution Emulator配置**7" Tablet (1280 * 800) 屏幕。**但我无法解决我的问题。

 ***我的模拟器在 Oracle Virtual Box 中运行良好。*

我正在使用以下链接。 [http://www.andreybutov.com/2011/10/14/how-to-set-up-a-faster-android-emulator/](http://www.andreybutov.com/2011/10/14/how-to-set-up-a-faster-android-emulator/)

请帮助，如何配置7英寸（1280 * 800）平板电脑dpi=216虚拟框。**

# database - 如何使用多个远程数据库构建数据库报告

> ID：14139999
> 
> 赞同：0
> 
> 时间：2013-01-03T13:36:27.680
> 
> 标签：database, web, reporting

有没有人有为由许多独立但相同的数据库组成的系统构建数据库报告的经验 - 哪个数据库无关紧要 - 我只是想要设计理念？我不能将所有数据库“组合”成一个。它们必须是分开的。但是所有数据库的结构都是相同的......

我需要构建一个 Web 界面，允许用户获取一个“全局”报告，该报告将查询所有数据库并构建一个组合报告。

您对模型的外观有何评论？或者你认为我需要提防的任何事情？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:46:38.683

我没有跨数据库报告的第一手经验，我的经验来自我工作的公司销售的产品，它可以从多个数据库创建报告，根据您的描述，我相信您需要“组合”表类型的东西，在在这种情况下，我建议您检测查询中使用的表，并将它们统一在一个临时中间数据库中，例如 Access、SQL Server CE 或 SQLite，然后针对这个临时数据库或表运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:26:41.480

如果您的数据库是 Microsoft SQL Server，那么使用 SQL Server Reporting Services 似乎是一个不错的解决方案。报告生成/显示软件与数据库软件捆绑在一起。

它为您提供了一个 Web 界面，您可以在其中配置来自任意数量的远程数据库的“数据源”，并将来自这些源的数据组合成报告。它是用户友好的，您可以通过 Web 界面进行所有报表设计/配置，而无需编写任何代码。

一些参考资料： [使用 SQL Server 存储过程构建报告](https://stackoverflow.com/questions/12857446/building-report-using-sql-server-stored-procedure)

[http://blog.hoegaerden.be/2009/11/10/reporting-on-data-from-stored-procedures-part-1/](http://blog.hoegaerden.be/2009/11/10/reporting-on-data-from-stored-procedures-part-1/)