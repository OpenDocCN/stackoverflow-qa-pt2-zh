# StackOverflow 问答 14918000-14918999

# ios - 访问发送者的哪些属性被传递到方法中

> ID：14918000
> 
> 赞同：1
> 
> 时间：2013-02-17T04:32:13.993
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, foundation

这可能是一个荒谬的问题，但我的视图控制器中有这样的方法：

```
[self registerProperty:self.currentUser]; 
```

并在执行中`registerProperty:`我想获取字符串“currentUser”。

我这样做是因为我想观察视图控制器“currentUser”的属性，而不是实际的用户对象，所以我可以拦截 setter。

目前，我正在检查 Objective-C 运行时以获取视图控制器的所有属性的列表，并检查属性的值是否等于 currentUser 对象：

```
-(void)registerProperty:(id)property 
{
    for (NSString *propertyName in [self allPropertiesOfClass:[property class]])
        if ([property isEqual:[self valueForKey:propertyName]])
             NSLog(@"The property passed into the method is %@", propertyName);
} 
```

这样做的问题是我可能有两个属性都包含相同的用户对象，在这种情况下，它们中的任何一个都会通过该测试。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:39:45.403

传入要观察其属性的对象，并分别将属性名称作为字符串传入。也就是说，镜像 KVO`-addObserver:...`方法的参数（子集）。

# javascript - 从 javascript 中的 URL 获取 JSON 数据？

> ID：14918003
> 
> 赞同：3
> 
> 时间：2013-02-17T04:32:37.587
> 
> 标签：javascript, json, jquery

我正在尝试从[http://www.xyz.com/abc.json](http://www.xyz.com/abc.json)形式的 URL 检索数据。我一直在尝试以下列方式使用 $.ajax 方法来实现这一点。

```
 var json = (function () {
        var json = null;
        $.ajax({
            'async': false,
            'global': false,
            'url': "http://www.xyz.com/abc.json.",
            'dataType': "json",
            'success': function (data) {
                json = data;
            }
        });
        return json;
    })(); 
```

但是我无法让它运行。我需要遍历检索到的数据并检查一些特定条件。如果 json 数据有一个名称，这可以通过 $.getJSon 轻松实现，但是文件的格式如下：

```
 [{
        "name": "abc",
        "ID": 46 
    }] 
```

因此，我必须先有效地将其转换并存储在 Javascript 对象变量中，然后才能使用它。关于我可能出错的地方有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:04:03.633

看起来您希望将该`data`响应转换为 json 对象，方法是将其包装起来`{` `}`，然后将其传递给 json 解析器。

```
function (data) {
  json = JSON.parse("{\"arr\":"+data+"}").arr;
} 
```

然后要获取您的数据，它将是

```
json[0].name  //"abc" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:57:53.640

所以你的问题是如何将字符串转换为 Json 对象？如果您使用的是 Jquery，您可以执行以下操作：

```
jQuery.parseJSON( jsonString ); 
```

所以你的回报应该是：

```
return jQuery.parseJSON( json ); 
```

[您可以在此处](http://api.jquery.com/jQuery.parseJSON/)阅读文档

# iphone - Xcode Instruments CoreGraphics 泄漏

> ID：14918004
> 
> 赞同：-1
> 
> 时间：2013-02-17T04:32:39.187
> 
> 标签：iphone, ios, objective-c, xcode, memory-leaks

Xcode Instruments 说我有 CGColor Leak。

*   负责图书馆：CoreGraphics
*   负责框架：CGTypeCreateInstance

堆栈将其追溯到“Main”，下面的代码突出显示为错误。

```
int main(int argc, char *argv[]) 
{
    @autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([PDCAppDelegate class]));
    }     
} 
```

有谁知道如何解决这一问题？谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:58:35.663

很可能，您的 PDCAppDelegate 或其拥有的东西正在创建 CGColorRef 并且未能释放它。

# jquery - 仅选择三个具有相同名称的复选框中的一个

> ID：14918011
> 
> 赞同：4
> 
> 时间：2013-02-17T04:34:13.993
> 
> 标签：jquery, html

更新：

我的代码现在是这样的：（有效）。

```
 $(document).ready(function(){
         $("input:checkbox").click(function(){
var group = "input:checkbox[name='"+$(this).attr("name")+"']";
$(group).attr("checked",false);
$(this).attr("checked",true);
 });

          }); 
```

HTML：

```
 <input type="checkbox" name="swimming" class="chb" />
     <input type="checkbox" name="swimming" class="chb" />
     <input type="checkbox" name="swimming" class="chb" /> 
```

* * *

我有一个问卷类型表格，每个问题都有三个复选框，我希望用户只能选择三个中的一个。

我的 HTML 是这样的：

问题一：

```
 <input type="checkbox" name="ballet" />
             <input type="checkbox" name="ballet" />
             <input type="checkbox" name="ballet" /> 
```

问题2：

```
 <input type="checkbox" name="swimming" />
             <input type="checkbox" name="swimming" />
             <input type="checkbox" name="swimming" /> 
```

但这允许用户选择特定问题的所有复选框。我希望它能够从三个中只选择一个。有针对这个的解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T04:59:08.303

[演示](http://jsfiddle.net/R7XTq/2/)在这里

```
$(':checkbox').on('change',function(){
 var th = $(this), name = th.attr('name'); 
 if(th.is(':checked')){
     $(':checkbox[name="'  + name + '"]').not(th).prop('checked',false);   
  }
}); 
```

根据评论，我假设用户必须能够选择前三个复选框中的一个和后三个复选框中的 1 个。因为名称属性不同。[这](http://jsfiddle.net/m5EuS/554/)是演示。

```
 $("input:checkbox").change(function(){
 var group = ":checkbox[name='"+ $(this).attr("name") + "']";
   if($(this).is(':checked')){
     $(group).not($(this)).attr("checked",false);
   }
 }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T05:02:24.420

您可以尝试使用 div。

```
 <div id="checkboxGroup">
<input type="checkbox" name="ballet" />
<input type="checkbox" name="ballet" />
<input type="checkbox" name="ballet" />
</div>

$('#checkboxGroup input[type=checkbox]').change(function() {
if (this.checked) {
    $('#checkboxGroup input[type=checkbox]').not(
                        $(this)).prop('checked', false);
    }
}); 
```

看[小提琴](http://jsfiddle.net/rcarvalhoxavier/kLFG4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T04:56:23.260

单选按钮是要走的路。如果需要，您还可以通过在该输入标签中添加单词“checked”作为属性来预先选择其中一个选项。

```
<input type="radio" name="ballet" value="1" checked />
<input type="radio" name="ballet" value="2" />
<input type="radio" name="ballet" value="3" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T04:36:41.230

这称为 HTML 单选按钮。单选按钮组合在一起，单选按钮的概念是一次只能选择一个组中的一个。

**name**属性是单选按钮组的名称。

```
<input type="radio" name="ballet" value="1" />
<input type="radio" name="ballet" value="2" />
<input type="radio" name="ballet" value="3" /> 
```

**带有单选按钮等组的复选框**

请注意，“x”是类，但“name”属性是您想要的组。

```
$(".x").click( function() {
    var n = $(this).attr('name');
    $("[name=" + n + ']').prop("checked", false);
    $(this).prop("checked", true);
});

<input type="checkbox" name="swimming" class="x" />
             <input type="checkbox" name="swimming" class="x" />
             <input type="checkbox" name="swimming" class="x" />

<br/>

<input type="checkbox" name="diving" class="x" />
             <input type="checkbox" name="diving" class="x" />
             <input type="checkbox" name="diving" class="x" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T04:38:57.807

对于复选框：

```
$("input:checkbox").click(function () {
    $("[name="+$(this).prop('name')+"]").prop("checked", false);
    $(this).prop("checked", true);
}); 
```

您可以改用收音机。

[`Fiddle For Checkboxes`](http://jsfiddle.net/LCX2g/3/)

# java - Java 不支持 SHA-512？

> ID：14918020
> 
> 赞同：5
> 
> 时间：2013-02-17T04:36:43.583
> 
> 标签：java, hash, sha

```
try {
        MessageDigest digest = MessageDigest.getInstance("SHA-512");
        byte[] output = digest.digest(password);

        digest.update(salt);
        digest.update(output);
        return new BigInteger(1, digest.digest());
    } catch (NoSuchAlgorithmException e) {
        throw new UnsupportedOperationException(e);
    } 
```

但我得到了`Exception in thread "main" java.security.NoSuchAlgorithmException: SHA_512 MessageDigest not available`错误

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T04:49:59.723

以下是Java 提供的[标准哈希算法](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#MessageDigest)`MessageDigest`：

*   MD2
*   MD5
*   SHA-1
*   SHA-256
*   SHA-384
*   SHA-512

您可能想要验证您提供给工厂方法的名称。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-17T04:52:37.583

我想说最可能的解释是您的 REAL 代码具有`"SHA_512"`而不是`"SHA-512"`. 当然，这可以解释为什么异常消息中有下划线。

另一种可能性是，由于美国出口限制，您的 JVM 删除了“军事实力”加密算法。但是，我认为这不太可能......

（事实上​​，我[对此](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html)的解读是，SHA-512 无论如何都包含在默认“Sun”提供程序的所有版本中。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-16T14:42:40.490

这是可用于通过 SHA-512 获取哈希字符串的示例方法：

```
private static String getHashCodeFromString(String algorithm, String str) throws NoSuchAlgorithmException {
    MessageDigest md = MessageDigest.getInstance(algorithm);
    md.update(str.getBytes());
    byte byteData[] = md.digest();

    //convert the byte to hex format method 1
    StringBuffer hashCodeBuffer = new StringBuffer();
    for (int i = 0; i < byteData.length; i++) {
        hashCodeBuffer.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
    }
    return hashCodeBuffer.toString();
} 
```

用作`SHA-512`算法。转到以下链接以获取您可以在方法中传递的其他可能的算法名称。[https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#MessageDigest](https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#MessageDigest)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T04:46:39.190

> MessageDigest 类是一个引擎类，旨在提供加密安全消息摘要（如 SHA-1 或 MD5）的功能。加密安全消息摘要采用任意大小的输入（字节数组），并生成固定大小的输出。

[参考](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#MessageDigest)

打印所有`MessageDigest` 提供者 -

```
Provider provider[] = Security.getProviders();
for (Provider pro : provider) {
    System.out.println(pro);
    for (Enumeration e = pro.keys(); e.hasMoreElements();)
        System.out.println("\t" + e.nextElement());

} 
```

幸运`SHA-512`的是存在但`SHA_512`不存在。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-11T10:54:08.100

在 Groovy 语言中，您可以使用以下方法通过 SHA-512 生成哈希字符串。

它完全适合我。

```
public String getHashCodeFromString(String algorithm, String str) throws NoSuchAlgorithmException{
      MessageDigest md = MessageDigest.getInstance(algorithm);
      md.update(str.getBytes());
      def byteData = md.digest() as byte[];

      //convert the byte to hex format method 1
      StringBuffer hashCodeBuffer = new StringBuffer();
      for (int i = 0; i < byteData.length; i++) {
        hashCodeBuffer.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
      }
      return hashCodeBuffer.toString();
    } 
```

# list - SML：非递归过滤列表

> ID：14918022
> 
> 赞同：1
> 
> 时间：2013-02-17T04:36:48.080
> 
> 标签：list, filter, sml

我正在尝试以非递归方式过滤列表，但我不确定如何去做。举个简单的例子，假设我有一个列表 [1, 2, 3, 4, 5, 6, 7]，我想过滤它，以便它返回一个大于 3 的数字列表，即 [4, 5, 6, 7]。

我可以递归地做到这一点没问题，但我被困在这里。不幸的是，我是 sml 的新手，我能想到的最好的方法是使用 map，但我不认为 map 是为此而制作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:40:01.050

你是对的：`map`不是为此而制作的 - 生成的列表`map`将始终与给定的列表具有相同的大小`map`.

`List.filter`然而*是*为此而生的。如果您`List.filter`使用函数作为参数调用，如果数字大于 3，则返回 true，它将完全按照您的意愿进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:10:02.053

提示：尝试使用`foldr`，而不是`map`。

# c++ - C++ 中的空构造函数：

> ID：14918025
> 
> 赞同：11
> 
> 时间：2013-02-17T04:37:18.300
> 
> 标签：c++, constructor

在我的代码中，我正在执行以下操作，但我不确定我是否被“允许”或者它是否是一种好的设计技术。我需要创建一个空的构造函数，但我还需要一个构造函数来初始化给定参数的变量。所以我正在做以下事情：

这是Ch文件。

```
 class C
 {
   private:
    string A;
    double B;
   public:
   //empty constructor
   C();
   C(string, double);  
 } 
```

还有我的 C.cpp 文件：

```
//this is how I declare the empty constructor
 C::C()
  {

  }

  C::C(string a, double b)
  {
         A = a;
         B = b;
  } 
```

我声明空构造函数的方式是正确的，还是需要设置 A=NULL 和 B=0.0？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T08:10:03.503

您的空构造函数不会执行您想要的操作。除非你自己做，`double`否则数据成员不会被零初始化。将`std::string`被初始化为一个空字符串。所以默认构造函数的正确实现就是

```
C::C() : B() {} // zero-initializes B 
```

关于另一个构造函数，您应该更喜欢初始化列表：

```
C::C(const string& a, double b) : A(a), B(b) {} 
```

否则，您正在做的是对默认构造对象的*分配。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-29T12:27:03.710

在 C++11 及更高版本中，您可以使用以下内容生成默认的无参数构造函数：

```
C() = default; 
```

这比 C(){} 更简洁。

这不会初始化成员。在 C++11 中，您可以在同一行声明中初始化成员：

```
int m_member = 0; // this is a class member 
```

这两个功能避免了必须创建自己的无参数构造函数来默认初始化成员。因此，在应用这 2 个功能时，您的课程可能看起来像这样：

```
class C
{
private:
    string A;
    double B = 0;

public:
   C() = default;
   C(string, double);  
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T04:46:39.417

可以这样做并将构造函数留空，但您应该知道未初始化的字段具有未定义的值。`string`是一个类，它的默认构造函数负责它的初始化，但`double`在这里没有初始化（在你的默认构造函数中），它的值是未定义的（它可能是内存中先前存在的任何值）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T13:28:34.463

你是唯一可以回答这个问题的人，因为这**完全**取决于你对默认构造对象的要求。由于您没有提及您的要求是什么，因此无法给出明确的答案。有些人会猜测您应该初始化`B`为 0，但该决定应该基于您的设计，而不是基于“良好”编程实践的各种概念。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T04:44:52.743

A 是`std::string`，您不能将其设置为`NULL`但可以设置为空字符串，并`std::string`具有默认构造函数，默认将其初始化为空字符串。

```
C::C()
:B(0.0)
{
} 
```

也许您需要一个带有默认参数的构造函数构造函数而不是两个构造函数？

```
C(const string& a= "", double b= 0.0)
: A(a),
  B(b)
{
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T04:42:04.743

您可以保持原样。您可以这样做，因为两者`string`和`double`都可以默认构造。这意味着您可以说`string foo;`并且不会出现任何错误。

将此与此处发生的情况进行对比：

```
class Bar{
    private:
        Bar(); //Explicitly private;
};
Bar b; 
```

这里我们得到一个关于没有`Bar::Bar()`找到构造函数的错误。

至于这是否是一个好主意：如果不知道这个类将在什么情况下使用，很难说。也许让它处于未配置的位置是完全明智的。但是对于许多类，例如表示文件的类，允许不指向任何文件的文件对象显然是错误的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T04:45:07.363

你做对了，你可以通过编译你的代码来看到它。您的默认构造函数将通过调用其默认构造函数来初始化字符串和加倍。如果您在类中定义任何构造函数，它将隐藏编译器为您创建的默认构造函数。

您可以通过像这样编写它来改进您的构造函数代码

```
C::C(string a, double b):A(a), b(b)
{
} 
```

# android - 在 Android 4 中启用 android:largeHeap，在 Android 2.3 中禁用它

> ID：14918028
> 
> 赞同：20
> 
> 时间：2013-02-17T04:38:49.097
> 
> 标签：android

目前，我有一段代码，旨在同时在 Android 2.3 和 4+ 中运行

如果`android:largeHeap`在 AndroidManifest.xml 中应用，该代码将执行得更好（大多数情况下不会出现 OutOfMemory 异常）。

```
<application
    android:name=".MyApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:screenOrientation="nosensor"
    android:largeHeap="true" 
```

目前，我`android:minSdkVersion`需要设置为 15 而不是 10（Android 2.3）。如果不是，`android:largeHeap`则在 AndroidManifest.xml 中是不允许的。

```
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" /> 
```

**在单个 APK 中，我如何设置**

*   `android:largeHeap`如果我使用的是 Android 4+，请使用选项
*   `android:largeHeap`如果我使用的是 Android 2.3，请不要使用选项

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-19T06:53:41.960

您还可以在 Honeycomb 中禁用大堆并在 ICS 或 JB 中启用它。只是有点 hacky 什么的。这是我尝试过的。

在我们继续之前，将您的构建目标更改为 Honeycomb、Jelly Bean 或 ICS，以便我们可以放置`android:largeHeap`属性。此外，您可以设置`android:minSdkVersion`为`API 10`.

Android`API 10`不支持大堆。

1.  `values-v14`在文件夹中创建文件`res`夹
2.  我创建`bools.xml`于`values-v14`
3.  `bools.xml`将此值放入`values-v14`

`<bool name="largeheap">true</bool>`

`values`>`bools.xml`或`values-[API VERSION]`>的布尔值，用于`bools.xml`在不同的 API 版本或默认情况下禁用大堆。

```
<bool name="largeheap">false</bool> 
```

将 的值更改`android:largeHeap`为`@bool/largeheap`而不是硬编码`true`或`false`

```
<application
        android:largeHeap="@bool/largeheap"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher">
                ....
</application> 
```

我通过制作内存泄漏应用程序或仅加载巨大的位图来测试此代码，并且它可以正常工作！

祝你好运！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T19:43:34.863

`android:largeHeap="true"`将属性保留在您的`AndroidManifest.xml`. 对于不支持它的版本，应该忽略它。然后，为了支持旧版本，使用`VMRuntime`类设置堆大小（如果需要，通过反射）。

有关此主题的更多信息：[如何增加 android 应用程序的堆大小？](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T07:08:19.253

1.  1.使用目标Android 3.0（API 11）或更高版本构建项目。（项目属性 - Android - 项目构建目标 - 选择 API 级别 11 以上）

2.  在 Manifest 文件中，将 uses-sdk 值更改如下

    <使用-sdk android:minSdkVersion="10" android:targetSdkVersion="11" />

对于 Android 3.0 的早期版本，您可以使用 VMRuntime 类进行内存操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:23:16.530

似乎您在**project.properties**文件中有不正确的目标 sdk，检查它并将目标更改为您的 AndroidManifest 的 targetSdk (15) 并重建项目。

项目属性

```
# Project target.
target=15 
```

PS 我尝试将 android:largeHeap 添加到我的项目 (minSdk = 7, targetSdk = 17) 中，并在所有 Android 版本上正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-09T14:21:12.040

请更改项目属性：

在项目属性 -> Android -> 项目构建目标 -> Google API，API 级别 19（或您需要的任何其他）:)

因此，您可以保留您的最低 SDK 选项而无需更改，例如 8 :)

# model-view-controller - 剑道分离器控制异步加载右面板内容

> ID：14918029
> 
> 赞同：0
> 
> 时间：2013-02-17T04:38:51.857
> 
> 标签：model-view-controller, kendo-ui, partial-views, splitter, panelbar

我有一个带有左/右窗格的剑道分离器控件。在左窗格内，我有一个构建导航菜单的 Kendo 面板栏控件。不幸的是，我从另一个离开公司的开发人员那里继承了这个，我不熟悉剑道控制。

一切正常，但是当用户单击菜单项时，整个页面都会刷新，那是为了鸟！我只想刷新右侧面板。

这是布局页面的代码：

```
<body>
@(Html.Kendo().Splitter().Name("splitter").Panes(panes => {
    panes.Add().Size("220px").Collapsible(true).Content(@<text>
    @Html.Partial("_Panelbar")
    </text>);
panes.Add().Content(@<text>
<section id="main">
    @RenderBody()
</section>
</text>);
}))
<script type="text/javascript">
    $(document).ready(function () {
        $('input[type=text]').addClass('k-textbox');
    });
</script>
@RenderSection("scripts", required: false)
</body> 
```

这是面板部分视图的代码：

```
@(Html.Kendo().PanelBar().Name("panelbar")
.SelectedIndex(0)
.Items(items => {
items.Add().Text("Corporate").Items(corp =>
{
    corp.Add().Text("Vendors").Action("Index", "Vendor");
    corp.Add().Text("Materials").Action("Index", "CostMaterials");
    corp.Add().Text("Packaging").Action("Index", "CostPackaging");
    corp.Add().Text("Reports").Action("UnderConstruction", "Home", new { pageTitle = "Reports" });
});
})) 
```

我尝试用 LoadContentsFrom 方法替换 PanelBar 上的 .Action 方法。这替换了左窗格中的内容。所以我想我的问题是，我如何定位拆分器控件的右侧？

任何帮助，将不胜感激。

谢谢

-亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:15:38.990

你的代码可能是这样的：

```
@(Html.Kendo().PanelBar().Name("panelbar")
.SelectedIndex(0)
.Items(items => {
items.Add().Text("Corporate").Items(corp =>
{
    corp.Add().Text("Vendors").Url("javascript:void(0);")
    .HtmlAttributes(
    new { 
      @class= "helloWorld",
      @data-href="/Vendor/Index"
    });
});
}))        
    <script>
        $document.ready(function(){
            $('.helloWorld').click(function(){
                var href = $(this).attr('data-href');
                $('#main').load(href);
            });
        });
    </script 
```

**更新**

有一件事非常重要：我认为视图与您当前的页面`/Vendor/Index` **具有相同的模板。**

这意味着当您加载`/Vendor/Index`到右侧时。右侧将包括整个内容（再次包括左侧面板）。

***解决方案***

1.  您必须创建一个新视图（模板），其中仅包含您的左侧菜单、横幅、...

然后，您必须删除其他视图的所有模板（将加载到右侧 - /Vendor/Index ， /CostMaterials/Index，...）

2.这种方式不是一个好方法。但我认为它会起作用。

//参考：[在 $.AJAX 加载的 HTML 上使用 Jquery 选择器？](https://stackoverflow.com/questions/405409/use-jquery-selectors-on-ajax-loaded-html)

```
 <script>
    $document.ready(function(){
        $('.helloWorld').click(function(){
            var href = $(this).attr('data-href');
            $.ajax({
              type: 'GET',
              url: href,
              success: function (data){
                var rHtml = $('<html />').html(data);
                $('#main').html(rHtml.find('#main'));
              }   
            });
        });
    });
</script 
```

# iphone - 来自 UIDeviceRGBColor 的 Xcode Instruments 泄漏

> ID：14918039
> 
> 赞同：1
> 
> 时间：2013-02-17T04:40:12.213
> 
> 标签：iphone, ios, objective-c, xcode, memory-leaks

我有一个来自 UIDeviceRGBColor 的泄漏。负责的框架是 +[UIColor allocWithZone:]。我没有使用 ARC。

泄漏来自以下方法。

```
- (void) lAction
{
MKCoordinateRegion mapRegion;
mapRegion.center = mapView.userLocation.coordinate;
mapRegion.span.latitudeDelta = 0.05;
mapRegion.span.longitudeDelta = 0.05;

[mapView setRegion:mapRegion animated: YES];

SettingsViewController *settingsViewController = [[SettingsViewController alloc] 
initWithNibName:@"SettingsViewController" bundle:nil]; 
```

**泄漏来自下一行：**

```
[self presentModalViewController: settingsViewController animated:YES]; 
```

**然后该方法完成如下：**

```
self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:40.0/255.0 
green:43.0/255.0 blue:46.0/255.0 alpha:1.0];
} 
```

有人知道怎么修这个东西吗？谢谢你们！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T04:46:59.930

尝试：

```
SettingsViewController *settingsViewController = [[[SettingsViewController alloc] 
initWithNibName:@"SettingsViewController" bundle:nil] autorelease]; 
```

为了让评论者满意，解释很简单，如果您不使用ARC，则无论何时调用`alloc`，返回对象的保留计数都设置为1。您负责释放它。一种简单的方法是对其调用 autorelease ，它将在主运行循环结束时自动释放它（除非您正在管理自己的自动释放池，但我不会涉及）。您确实想确保只要您需要使用一个对象，您的代码就有保留它的东西，在这种情况下，当您调用

```
[self presentModalViewController: settingsViewController animated:YES]; 
```

在 settingViewController 上调用了一个额外的保留，因此您不必担心在您的方法完成时它会被释放。

我发现 Objective-C 中的内存管理非常简单，但它确实需要额外的代码，而且现在每个人都使用 ARC。如果您只是对现有代码库进行一些小的更改，则无需切换到 ARC，但如果您要继续使用代码库一段时间，切换会更省时. 这很简单，因为 Xcode 将为您完成大部分工作。（见这里：http: [//developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)）。

# asp.net-mvc - 对于 MVC4 控制器中的 Create() 方法，我可以将数据直接从 GET 传递到 POST 服务器端吗？

> ID：14918041
> 
> 赞同：0
> 
> 时间：2013-02-17T04:40:22.187
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

基于另一个问题： [Creating a Child object in MVC4 - Parent's information not being passing to Create() controller](https://stackoverflow.com/questions/14917516/creating-a-child-object-in-mvc4-parents-information-not-being-passed-to-creat)

MVC 是否提供了一种机制来将数据从 HttpGet Create() 发送到 HttpPost Create() 而无需通过客户端？如果我需要将一些对客户端无意义的数据发送到 Post 方法，我如何避免混乱的视图和过度暴露模型属性给潜在的攻击者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:50:49.863

您的 GET 和 POST 操作只是类上的方法。如果您唯一关心的是在某些条件下执行代码块，那么听起来确实没有任何理由在这里使用 POST。

更改您的 POST（删除属性）并使其成为私有方法，以便客户端无法访问。在您的 GET 中，执行您需要执行的任何检查，然后调用该方法。

如果您*确实*需要公开 POST，请将相关代码重构为一个单独的私有方法，您可以从 GET 或 POST 调用该方法。更好的实现将是一个单独的类，该类的方法位于该类以用于重用/测试/SoC。

如果您*在*这里使用数据库，请注意......虽然在 GET 期间有一些正当理由写入数据库，但请注意，在大多数情况下，这不是 GET 的幂等性质（[http://www. w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)）。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:34:46.050

是的 - 正如我在另一个答案中提到的，您可以使用 TempData - 但是您不需要这个。您只使用实体中的 id 和名称，只传递*视图*模型中的那些。您不需要完整的实体。在服务器端确保您的用户可以访问这些记录。例如，如果我正在编辑客户记录，我会确保当前用户可以通过以下方式访问：

```
 var currentUsersCompanyId = GetCurrentUserCompanyId();

ctx.Customers.Single(o=>o.CustomerId = customerId and currentUsersCompanyId == customerId) 
```

根据您控制权限的方式，有多种方法可以做到这一点 - .net 的第三方平台（如 Apprenda）有助于在幕后更自动地做到这一点。

# .htaccess - .htaccess 通过 IP 地址限制/允许到特定页面

> ID：14918042
> 
> 赞同：0
> 
> 时间：2013-02-17T04:40:44.213
> 
> 标签：.htaccess

我正在寻找的是以下内容，但不是限制对整个域的访问，我只想限制特定页面并允许某些 IP 访问它。这可能吗？我搜索的所有地方都只是为了限制整个网站。谢谢你。

```
ErrorDocument 403 http://www.domainname.com
Order deny,allow
Deny from all
Allow from 124.34.48.165
Allow from 102.54.68.123 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-19T09:56:50.253

您可以使用这样的代码

```
<Location /example-map>
  Order deny,allow
  deny from all
  allow from 123.12.12.12
  allow from 123.123.43.43
</Location> 
```

这由 123... 来自允许 ip 的 ip 和 /example-map 位置

由 RedDev

# windows-phone-7 - 在 Windows Phone 8 应用程序中发送一封电子邮件，其中 html 内容设置为该电子邮件的正文？

> ID：14918047
> 
> 赞同：6
> 
> 时间：2013-02-17T04:41:40.157
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

嗨，我正在开发一个 windows phone 8 应用程序，我想从我的应用程序中发送电子邮件。

可以通过这种方式轻松地发送电子邮件：-

```
EmailComposeTask emailComposeTask = new EmailComposeTask(); 
emailComposeTask.To = "someone@example.com";    
emailComposeTask.Cc = "testmail@test.com"; 
emailComposeTask.Subject = "Windows Phone 8"; 
emailComposeTask.Show(); 
```

**但我的疑问是**：-

我有 html 内容（由一个表格组成，其中包含以 html 格式构建的列和行）

1）所以我想在我的Windows Phone 8应用程序中将该html内容设置为我的电子邮件正文并将其发送过来，如何实现这一点？

2）他们是完成这项任务的任何其他方式/替代方案吗？

3）我错过了微软提供的替代方案吗？

请告诉我 。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:23:52.970

将文本/字符串转换为 html 格式，希望这篇文章可以帮助您： http: [//www.blackbeltcoder.com/Articles/strings/converting-text-to-html](http://www.blackbeltcoder.com/Articles/strings/converting-text-to-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T04:52:36.937

> 1）所以我想在我的Windows Phone 8应用程序中将该html内容设置为我的电子邮件正文并将其发送过来，如何实现这一点？

默认情况下，这是不可能的。但是，这篇文章可能会对您有所帮助：[通过 EmailComposeTask 发送 HTML 内容](https://stackoverflow.com/a/19031868/2549049)

> 2）他们是完成这项任务的任何其他方式/替代方案吗？

可能有，但`EmailComposeTask`仅适用于 Windows 手机，因此您应该使用它。

> 3）我错过了微软提供的替代方案吗？

微软只为 Windows 手机提供了这个。[电子邮件撰写任务](https://msdn.microsoft.com/en-us/library/windows/apps/microsoft.phone.tasks.emailcomposetask_properties(v=vs.105).aspx)

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-27T14:25:01.340

您可以简单地使用`string.ToHtml()`which 将整个字符串转换为 html 格式。

# javascript - Accordion 单击时删除 Div

> ID：14918048
> 
> 赞同：2
> 
> 时间：2013-02-17T04:41:55.803
> 
> 标签：javascript, jquery, jquery-ui

我有这个手风琴

```
<div id="accordion" class="accord">
    <h2>
        <a href="#">Item1</a></h2>

    <div>
        Content1
    </div>
    <h2 >
        <a href="#">Item2</a></h2>
    <div>
       Content#2
    </div>
</div>

    $("#accordion").accordion({
        autoHeight: false,
        animated: 'bounceslide',
        icons: { "header": "ui-icon-plus", "headerSelected": "ui-icon-minus" }
    }); 
```

我想在每个项目上添加一个链接以删除该 Acoordion Div，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:20:51.737

```
(function ($) {        $("#accordion").children("div").each(function(index, element) {
$(element).append('<div class="delete">x</div>');
$(element).children('.delete').bind('click', function() {
$(element).hide();
});
});
}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:30:32.523

我看到您没有任何链接可以删除 DIV 部分。

假设你有它，这是我的样本。

```
$('.remove').click(function(e) {
    $(this).parent('div').prev('h2').andSelf().remove();
}); 
```

# c# - 如何在自定义 StackPanel 中为特定的自定义控件创建项目列表？

> ID：14918052
> 
> 赞同：0
> 
> 时间：2013-02-17T04:42:38.767
> 
> 标签：c#, wpf, silverlight, wpf-controls, silverlight-5.0

我想创建一个从 StackPanel 派生的自定义 StackPanel。但要添加项目，我想创建一个特殊列表（可以使用 List<> 或 ObservableCollection<>）。应该是这样的

```
<mc:MyStackPanel>
  <mc:MyStackPanel.Items>
    <mc:MyControl Content="A" />
    <mc:MyControl Content="B" />
    <mc:MyControl Content="C" />
  </mc:MyStackPanel.Items>
</mc:MyStackPanel> 
```

不像这样（目前这个正在工作），

```
<mc:MyStackPanel>
   <mc:MyControl Content="A" />
   <mc:MyControl Content="B" />
   <mc:MyControl Content="C" />
</mc:MyStackPanel> 
```

我尝试使用 ObservableCollection，如果我添加项目，它会完美运行。智能感知也只显示了一个可以添加的 MyControl。

现在，如何从集合中获取列表并将其添加到 StackPanel，即使用 stkPanel.Children.Add()。

我应该改用 Panel 还是如何获取列表并添加到 Panel 中？提前致谢。

PS：我尝试了几个选项，但列表始终为空，包括使用 ItemsControl。所以可能我在这里遗漏了一些观点。再次使用 ItemsControl 不适合我的场景，因为我只想要一种可以添加到面板的控件类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:27:00.707

如何使用 的集合更改事件`ObservableCollection`来保持`Children`属性同步？我还包含了该`ContentProperty`属性，因此您不必在 XAML 中将项目显式添加到集合中，如果您愿意，可以将其删除。

```
[ContentProperty("CustomItems")]
public class MyCustomStackPanel : StackPanel
{
    public MyCustomStackPanel()
    {
        CustomItems = new ObservableCollection<MyUserControl>();
    }

    private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (object element in e.NewItems)
            {
                Children.Add((UIElement) element);
            }
        }

        if (e.OldItems != null)
        {
            foreach (object element in e.OldItems)
            {
                Children.Remove((UIElement)element);
            }
        }
    }

    private ObservableCollection<MyUserControl> _customItems;
    public ObservableCollection<MyUserControl> CustomItems
    {
        get { return _customItems; }
        set
        {
            if(_customItems == value)
                return;

            if (_customItems != null)
                _customItems.CollectionChanged -= OnCollectionChanged;

            _customItems = value;

            if (_customItems != null)
                _customItems.CollectionChanged += OnCollectionChanged;
        }
    }
} 
```

XAML 然后看起来像这样（本地命名空间指向自定义控件所在的项目）

```
<local:MyCustomStackPanel>
    <local:MyUserControl></local:MyUserControl>
</local:MyCustomStackPanel> 
```

# actionscript-3 - 影片剪辑与位图蒙版冲突

> ID：14918053
> 
> 赞同：0
> 
> 时间：2013-02-17T04:42:46.813
> 
> 标签：actionscript-3

我试图揭示这个最初是位图但需要用作位图的影片剪辑图像。由于某种原因它不起作用......它没有抛出任何错误......我需要在用户按下它时屏蔽这个图像......然后与另一个位图进行比较以执行功能。但由于某种原因，正如我之前提到的，它没有成功。有人能帮帮我吗？？这是它的代码...

```
import flash.display.Graphics;
import flash.display.MovieClip;
import flash.display.BitmapData;

var mouseclick:Number=0;
var maskedbg_mc:maskedbg = new maskedbg ();
var masking:Sprite = new Sprite()               

addChild (maskedbg_mc);
maskedbg_mc.x = 18;
maskedbg_mc.y = 343;
var bitmapDataCopy:BitmapData = new BitmapData(742,165,true,0x00FFFFFF);
var b:Bitmap = new Bitmap(bitmapDataCopy);

bitmapDataCopy.draw(maskedbg_mc);

b.mask = masking;
var Testing:BitmapData = new BitmapData(maskedbg_mc.width, maskedbg_mc.height, true, 0x00000000);

addChild(masking);

stage.addEventListener(MouseEvent.MOUSE_DOWN, Pressing);
stage.addEventListener(MouseEvent.MOUSE_MOVE, Moving);
stage.addEventListener(MouseEvent.MOUSE_UP, Lifting);

function Pressing(event:MouseEvent):void {
mouseclick = 1;
}

function Moving(event:MouseEvent):void {
if (mouseclick == 1) {
masking.graphics.beginFill(0x000000);
masking.graphics.drawEllipse(mouseX, mouseY, 70, 60);
masking.graphics.endFill();
}
}

function Lifting(event:MouseEvent):void {
mouseclick = 0;
}

if ( bitmapDataCopy.compare(Testing) ==0 )
{
    trace ("Awesomness")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:23:26.687

俯瞰您的代码，我注意到您没有将“b”（被屏蔽的 DisplayObject）添加到显示列表中，而您正在添加实际上并未在代码中被屏蔽的“maskedbg​​_mc”。你有这两个显示对象的理由吗？

我建议您遵循动作脚本编码约定：

[http://sourceforge.net/adobe/flexsdk/wiki/Coding%20Conventions/](http://sourceforge.net/adobe/flexsdk/wiki/Coding%20Conventions/)

当变量和函数的首字母大写时，您的代码看起来很混乱，它们看起来像类。

# java - 从java执行mysql命令时出错

> ID：14918054
> 
> 赞同：1
> 
> 时间：2013-02-17T04:42:58.407
> 
> 标签：java, mysql

我试图使用 java 执行 mysql 命令，但这总是出错。

```
 String dbName = "dth";
    String dbUser = "root";
    String dbPass = "root";

    String executeCmd = "";
    executeCmd = "mysqldump -u " + dbUser + " -p" + dbPass + " " + dbName + " -r    C:\\backup.sql";

    Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
    int processComplete = runtimeProcess.waitFor();
    if (processComplete == 0) {
        System.out.println("Backup taken successfully");
    } else {
        System.out.println("Could not take mysql backup");
    }

} catch (Exception e) {
    System.out.println(e.getMessage());
} 
```

我尝试了上面的代码，但我无法完成它，一直给我

> CreateProcess error=2, 系统找不到文件指定错误。

我已经通过在该位置创建一个 .sql 文件来尝试它，但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:54:27.017

将 mysqldump 所在的目录添加到路径环境变量中或使用完整路径名，即 c:\directory\mysqldump

# ios6 - 滚动 TableView 影响 SegmentControl 的响应时间

> ID：14918055
> 
> 赞同：0
> 
> 时间：2013-02-17T04:43:11.527
> 
> 标签：ios6, scroll, addsubview, uisegmentedcontrol, nstableheaderview

这可能是一个奇怪的问题，我希望有人以前遇到过。

我使用以下代码向我的 TableView 添加了 SegmentControl：

```
 UIView *headerView = [[UIView alloc] init ];
   [headerView addSubview:resultsSegment];
    self.tableView.tableHeaderView = headerView;

    resultsSegment.frame = CGRectMake(45, 123, 250, 40);
    [self.tableView addSubview:resultsSegment]; 
```

在这些论坛的帮助下，前三行使 Segment 成为 TableView Header 的一部分，以便它保持在原位以进行滚动。伟大的。

但是，这禁用了单击 SegmentControl 的能力。

添加最后一行使这再次成为可能。

SegmentControl 执行出色的 UNTIL 滚动，**然后它变得非常无响应**。它不会引发任何错误，并且最终会接受手指的按压，但您必须在它切换之前点击它 5/6 次。

如果有人能对此有所了解，那就太棒了

您需要的任何额外信息我都会很乐意提供！

编辑 - -

**视图控制器.h**

```
@interface StdTCPTestViewController : UIViewController <UITableViewDataSource, UITableViewDelegate,UIScrollViewDelegate> {
    NSTimer *Timer;
}

@property (nonatomic, strong) NSString *typeOfTest;
@property (nonatomic, strong) NSString *testLocation;
@property (nonatomic, strong) NSString *statusText;
@property (nonatomic, strong) NSString *showResultType;
@property (nonatomic, assign) NSInteger *progressInt;
@property (nonatomic, assign) NSString *testDirection;
@property (strong, nonatomic) IBOutlet UITextView *textView;
@property (strong, nonatomic) IBOutlet UIProgressView *testProgressBar;
@property (strong, nonatomic) IBOutlet UITableView *tableView;
@property (nonatomic, retain) NSArray *ResultTitles;
@property (nonatomic, retain) NSMutableArray *downloadResults;
@property (nonatomic, retain) NSMutableArray *uploadResults;
@property (strong, nonatomic) IBOutlet UISegmentedControl *resultsSegment;

- (IBAction)resultsSwitch:(id)sender; 
```

**选择 ViewController.m 的区域**

```
- (void)viewDidLoad
{

    [resultsSegment setTitle:@"Download" forSegmentAtIndex:0];  // Sets the title for the 1st segment button
    [resultsSegment setTitle:@"Upload" forSegmentAtIndex:1];    // Sets the title for the 2nd segment button

    [super viewDidLoad];

//  UIView *headerView = [[UIView alloc] init ];
//  [headerView addSubview:resultsSegment];
//  self.tableView.tableHeaderView = headerView;

    resultsSegment.frame = CGRectMake(45, 123, 250, 40);
    [self.tableView addSubview:resultsSegment];

    [self APISimpleDemo];
    self.navigationItem.title = typeOfTest; // Set viewcontroller title to the type of test it is   
}

- (IBAction)resultsSwitch:(id)sender {

    if([sender selectedSegmentIndex] == 0){
        showResultType = @"download";
        [self.tableView reloadData];
    }
    else {
        showResultType = @"upload";
        [self.tableView reloadData];
    }
}

#pragma mark Table Definitions 

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;  // Default is 1 if not implemented
{
    return 3;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;

{
    switch (section) {
        case 0:
            return @"";
            break;
        case 1:
            return @"";
            break;
        case 2:

            return @"";
            break;
        default:
            return @"Section Count Error";
            break;
    }

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{

    return 35;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section;
{
    switch (section) {
        case 0:
            return 10;
            break;
        case 1:
            return 22;
            break;
        case 2:

            return 0;
            break;
        default:
            return 22;
            break;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    switch (section) {
    case 0:
        return 3;
        break;
    case 1:
            return 0;
        break;
        case 2:
            return [ResultTitles count];
            break;
    default:
        return 0;
        break;

    }   
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

{
    UITableViewCell *serverLoc = [tableView dequeueReusableCellWithIdentifier:@"speedCell"];

    switch (indexPath.section) {
    case 0:
            switch (indexPath.row) {
                case 0:
                    serverLoc.textLabel.text = @"Test location:";
                    serverLoc.detailTextLabel.text = testLocation;

                break;
                case 1:
                    serverLoc.textLabel.text = @"Status:";
                    serverLoc.detailTextLabel.text = statusText;
                    break;
                case 2:
                    serverLoc.textLabel.text = @"Progress";
                    serverLoc.detailTextLabel.text = [NSString stringWithFormat:@"%ld%%", (long)progressInt];
                    break;
            }
        break;

    case 2:

            if ([showResultType isEqual:@"download"]) {
                serverLoc.textLabel.text = [self.ResultTitles objectAtIndex:indexPath.row];
                serverLoc.detailTextLabel.text = [self.downloadResults objectAtIndex:indexPath.row];
                break;
            }
            else {
                serverLoc.textLabel.text = [self.ResultTitles objectAtIndex:indexPath.row];
                serverLoc.detailTextLabel.text = [self.uploadResults objectAtIndex:indexPath.row];
                break;
            }

           break;
    default:
        break;
    }

    return serverLoc;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:23:50.523

这里可能的问题是您有一个segmentControl，但您将它作为子视图添加到tableHeaderView 和tableView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:03:35.473

我通过将下面的代码从 viewDidLoad 方法移动到 titleForHeaderInSection 解决了滚动时 SegmentControl 无响应的问题

```
 resultsSegment.frame = CGRectMake(45, 123, 250, 40);
            [self.tableView addSubview:resultsSegment]; 
```

现在看起来像这样：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;

{
    switch (section) {
        case 0:
            return @"";
            break;
        case 1:
            resultsSegment.frame = CGRectMake(45, 123, 250, 40);
            [self.tableView addSubview:resultsSegment];
            return @"";
            break;
        case 2:

            return @"";
            break;
        default:
            return @"Section Count Error";
            break;
    }

} 
```

# g++ - C++反汇编程序？

> ID：14918057
> 
> 赞同：0
> 
> 时间：2013-02-17T04:43:23.620
> 
> 标签：g++, decompiling, decompiler

我只想说我现在正在备份所有内容。

我不小心输入了这一行，`g++ -o source.cc source.cc`

我现在有一个二进制文件而不是我的源代码。有谁知道命令行中有一个很好的 C++ 编译器...如果有帮助的话，我有所有的函数原型和结构定义。

# scheme - 消费清单球拍

> ID：14918061
> 
> 赞同：0
> 
> 时间：2013-02-17T04:44:29.703
> 
> 标签：scheme, racket

```
(define-struct restaurant (name address  lod))
(define-struct dish  (name main-ingredient price))

(define lod
  (list
   (make-dish "BNC" "pepper" 15.00)
   (make-dish  "BBQ" "sauce" 20.00)
   (make-dish "BAW" "vanilla" 18.00)
    (make-dish "ACA" "tomato" 15.00)
   (make-dish  "NAM" "onions" 25.00)
   (make-dish "PLA" "milk" 34.00)))

(define lod1
  (list
   (make-dish "AHSH" "carrots" 23.00)
   (make-dish  "PROA" "garlic" 21.00)
   (make-dish "MENE" "eggs" 16.00)
    (make-dish "SAYB" "water" 11.00)
   (make-dish  "WAFA" "chicken" 22.00)
   (make-dish "LDAFK" "chocolate" 10.00)))

(define Sky-Dragon (make-restaurant "Sky Dragon" "23 Cutoiut, NY"  lod))
(define Tomas (make-restaurant "Tomas" "34 Rossi, CA" lod1))

(define restaurant1 Sky-Dragon)
(define restaurant2 Tomas) 
```

我想知道你将如何编写一个函数来消费一家餐厅并产生餐厅的菜肴总数。就像我去餐厅 1 一样，我得到了 6 道菜。希望我做对了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:02:16.333

很简单，只需使用存取程序来检索餐厅的菜肴列表，然后使用内置程序来确定该列表的大小（或“长度”）：

```
(define (number-of-dishes restaurant)
  (<???>                  ; how do we determine the size of a list?
    (<???> restaurant)))  ; how do we access a restaurant's list of dishes? 
```

我会让您弄清楚细节，但请记住 - 每当您使用 定义新结构时`define-struct`，都会自动为其每个字段创建一个访问器过程。例如，`price`a 的 a`dish`是通过调用`dish-price`a获得的`dish`: `(dish-price dish)`。

# java - 生产者线程卡住，但没有阻塞

> ID：14918070
> 
> 赞同：0
> 
> 时间：2013-02-17T04:45:16.020
> 
> 标签：java, multithreading, consumer, producer

根据 JConsole 堆栈跟踪，我有一组生产者-消费者线程，但生产者卡在了一行*不是.*`.put()`

```
class Producer implements Runnable {
    private final BlockingQueue<CopyOnWriteArrayList<Creature>> queue;
    private World myWorld;

    Producer(BlockingQueue<CopyOnWriteArrayList<Creature>> q, World myWorld) {
        queue = q;
        this.myWorld = myWorld;
    }

    public void run() {
        int nextTick = myWorld.myApp.getTick(); //'tick' is the current frame our main loop is on.      
        while (true) {
            if (myWorld.myApp.getTick() >= nextTick) { //if our world has updated to the next frame…
                nextTick = myWorld.myApp.getTick() + 1; //increment the next frame to wait for

                try {
                    for (int i = 0; i < myWorld.getCellController()
                            .getColumns(); i++) {
                        for (int j = 0; j < myWorld.getCellController()
                                .getRows(); j++) {

                            queue.put(myWorld.getCellController().Cells.get(i)
                                    .get(j));
                        }
                    }
                } catch (InterruptedException ex) {
                    System.out.println("INT! ******************************");
                } catch (NullPointerException ex) {
                    System.out.println("NULL! ******************************");
                } catch (ClassCastException ex) {
                    System.out.println("CAST! ******************************");
                } catch (IllegalArgumentException ex) {
                    System.out.println("ARG! ******************************");
                }
            }
        }
    }
} 
```

根据堆栈跟踪，它只是停留`while(true)`在行上，没有通过循环前进，即使它应该。

```
Stack trace:
Name: Producer
State: RUNNABLE
Total blocked: 0  Total waited: 196,958

Stack trace: 
concurrency.Producer.run(Setup.java:25)
java.lang.Thread.run(Thread.java:680) 
```

第 25 行是该`while(true) {`行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:39:00.877

`getTick()`线程安全吗？即在到达刻度值的途中是否有同步的关键字、某种形式的锁、易失性读取或原子变量？如果没有，您的线程可能看不到对滴答计数器所做的并发更改。中断和调试可能会迫使这些更改可见。

此外，您的生产者似乎不应该等待成功`queue.put()`，而是等待应用程序进入下一个刻度。是`myWorld.myApp.getTick()`阻塞吗？如果没有，您的代码将无限循环，除非：

*   有其他线程同时修改tick
*   您的线程被挂起，另一个被唤醒的线程修改了刻度

使用无限循环检查条件的变化（又名轮询/旋转等待）只有在可能发生变化的情况下才有意义。

我建议`waitForTick(int tick)`在对象中实现阻塞和安全发布`myWorld.myApp`。除了线程安全集合之外，还有其他并发组件，如信号量、屏障等，可用于同步不同的线程。

# android - 无法访问包含布局中的元素：Android

> ID：14918077
> 
> 赞同：0
> 
> 时间：2013-02-17T04:46:48.373
> 
> 标签：android, xml, include

我有一个 xml 文件，其中包含一个按钮及其称为**button/xml**

```
<Button
    android:id="@+id/loginButton1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:background="@drawable/button_background"
    android:text="Button" /> 
```

我有另一个名为**login.xml**的布局，其中包含两次 button.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:paddingLeft="30dp"
    android:paddingRight="30dp"
    android:paddingTop="30dp">

    <include
        android:id="@+id/loginUser1"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        layout="@layout/button" />

        <include
            android:id="@+id/loginUser2"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:layout_marginTop="20dp"
            layout="@layout/button" />

</LinearLayout> 
```

现在，当我尝试在我的 Java 类中分别访问每个按钮时，在指向**loginUser1**时出现错误。错误说**NullPointerException**。既然我确定 loginUser1 存在，为什么我仍然收到错误消息？

```
 final LinearLayout layout = (LinearLayout)findViewById(R.id.loginUser1); //null pointer exception HERE!
    final Button button = (Button)layout.findViewById(R.id.loginButton1);
    button.setText("button one"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T05:00:55.530

看看你的日志猫。你应该得到`ClassCastException`而不是`NullPointerException`. 问题是带有 id`R.id.loginUser1`的视图实际上是 a`Button`而不是 a `LinearLayout`。以下代码应该可以正常工作：

```
final Button first = (Button) findViewById(R.id.loginUser1);
final Button second = (Button) findViewById(R.id.loginUser2);

first.setText("button one");
second.setText("button two"); 
```

另外，请注意，`R.id.loginButton1`不再有带有 id 的按钮，因为它的 id 已被`include`标签覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:08:56.647

你应该做这个

final Button first = (Button) findViewById(R.id.loginButton1); first.setText("你的文字");

因为 loginUser1 是一个按钮，而不是一个 LinearLayout。

# node.js - 如何在第一个查询的回调中查询另一个集合。

> ID：14918086
> 
> 赞同：0
> 
> 时间：2013-02-17T04:48:42.163
> 
> 标签：node.js, mongodb, mongoose

所以我定义了一些猫鼬模式。

```
var partSchema = mongoose.Schema({
  name: String,
  system: String,
  team: Array,
  quantity: Number, 
});
var part = mongoose.model('part', partSchema);

var peopleSchema = mongoose.Schema({
  name: String, 
  pass: String, 
  role: String,
  parts: Array
});

var people = mongoose.model('people', peopleSchema); 
```

我想向用户发送基于这些模式的查询，以及更多。像这样...

```
app.get('/', function(req, res){
   people.find(function(err, persons){
     if (err) return handleError(err);
     console.log(persons);
     parts.find(function(err, things){
       res.render('in', { user: req.session.user, people:persons, parts:things });
     });
   });
}); 
```

为了保持异步，我必须嵌套这些调用，对吗？而且我不能嵌套这些调用，因为不再定义“部分”。我想知道我是否可以做到这一点，我该怎么做？抱歉，如果这是一个菜鸟问题，但我已经查了好几天了，似乎还没有找到解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:17:33.350

`'part'`您的模型的变量名称是`part`，而不是`parts`。所以应该是：

```
app.get('/', function(req, res){
   people.find(function(err, persons){
     if (err) return handleError(err);
     console.log(persons);
     part.find(function(err, things){   // <-- Changed on this line
       res.render('in', {user: req.session.user, people:persons, parts:things});
     });
   });
}); 
```

# mysql - 如何为一个人的分组和不同类型的一张表创建一个多和（）

> ID：14918094
> 
> 赞同：0
> 
> 时间：2013-02-17T04:52:18.180
> 
> 标签：mysql

我有一个复杂的 mysql 表，例如：

```
staff     type      value       date

  a       cash       10      2013-02-17
  b       efpos       5      2013-02-16
  c       voucher    20      2013-02-16
  a       cash       10      2013-02-16
  b       efpos       5      2013-02-16
  c       voucher    20      2013-02-15
  a       cash       10      2013-02-15
  b       efpos       5      2013-02-15
  c       voucher    20      2013-02-14 
```

我怎样才能得到这样的桌子？

```
staff     cash      efpos       voucher              total                 date
   a       sum       sum          sum      sum(cash, efpos, voucher)    2013-02-16
   b       sum       sum          sum      sum(cash, efpos, voucher)    2013-02-16
   c       sum       sum          sum      sum(cash, efpos, voucher)    2013-02-16 
```

这意味着我想使用**按人员和日期分组的**每种类型的**单独总和**，以及这三种类型的总数。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:58:32.530

这应该有效。

```
SELECT staff,
SUM(CASE type WHEN 'cash' THEN value ELSE 0 END) as cash,
SUM(CASE type WHEN 'efpos' THEN value ELSE 0 END) as efpos,
SUM(CASE type WHEN 'voucher' THEN value ELSE 0 END) as voucher,
SUM(value) as total

FROM <TABLE_NAME>

GROUP BY staff 
```

但是，使用聚合函数时无法获取日期。这样做也没有意义，因为您不是在日期使用 group by，而是使用工作人员。**

# javascript - 动态改变a的大小 元素

> ID：14918100
> 
> 赞同：1
> 
> 时间：2013-02-17T04:53:21.343
> 
> 标签：javascript, html, function, if-statement

`<div>`当从此 if 语句调用函数时，我试图调整 a的大小。我知道该`if`语句有效，因为当`mTr()`调用该函数时它有效，并且我知道该函数`myFun()`有效，但由于某种原因，函数 myFun() 没有被调用。

```
if (window.screen.height==568) { // iPhone 4"
    document.querySelector("meta[name=viewport]").content="width=320.1";
    myFun("divId");
    mTr();

}
function myFun(id)
{
    var obj = document.getElementById(id);
    if (obj)
    {
        obj.setAttribute("style", "height:300px;");
    }
}
function mTr()
{
    alert("Hello World!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:05:22.107

有几个原因`myFun()`不会被调用：

1.  `window.screen.height`不完全是 568
2.  `document.querySelector("meta[name=viewport]").content="width=320.1";`生成导致脚本执行停止的脚本错误
3.  此代码之前有一些错误导致执行停止
4.  您的代码在加载 DOM 之前执行得太早，因此无法找到相关的 DOM 元素。

首先要做的是检查您的浏览器错误控制台并查看报告了哪些脚本错误（如果有）。

第二件事是`if`在您的 javascript 调试器（内置于大多数浏览器）中的语句上设置断点，然后逐步执行以下每个语句以查看发生了什么。

您还可以`console.log("xxx")`在代码中嵌入语句，以在控制台中创建面包屑跟踪，告诉您发生了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T05:05:06.727

我重新测试了一切。我想我找到了你的问题。您的代码中有错误。

**错误在这里：**

```
document.querySelector("meta[name=viewport]").content="width=320.1"; 
```

**相反，它应该是：**

```
document.querySelector("meta[name=viewport]").setAttribute('content', 'width=320.1'); 
```

**完整的 Javascript：**

```
if (window.screen.height==568) { 

   document.querySelector("meta[name=viewport]").setAttribute('content', 'width=320.1');    
   myFun("divId");
   mTr();
}

function myFun(id)
{
   var obj = document.getElementById(id);
   if (obj)
   {
       obj.setAttribute("style", "height:300px;");
   }
}

function mTr()
{
   alert("Hello World!");
} 
```

你可以在这里测试一下：http: [//jsfiddle.net/KwGwd/](http://jsfiddle.net/KwGwd/)

# c# - 为什么在反射中查看内部类不公开？

> ID：14918102
> 
> 赞同：5
> 
> 时间：2013-02-17T04:53:33.713
> 
> 标签：c#, .net, reflection

AKA 为什么这个测试失败了？

```
[TestFixture]
public class Tests
{
    [Test]
    public void InnerClassShouldBePublic()
    {
        Assert.IsTrue(typeof (InnerClass).IsPublic);
    }

    public class InnerClass
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T05:03:15.687

它失败是因为嵌套类型不被视为[Public](http://msdn.microsoft.com/en-us/library/system.type.ispublic.aspx)，[`NestedPublic`](http://msdn.microsoft.com/en-us/library/system.type.isnestedpublic.aspx)而是被视为。

从[`IsPublic()`MSDN 文档](http://msdn.microsoft.com/en-us/library/system.type.ispublic.aspx)：

> 不要与嵌套类型一起使用；改为使用[`IsNestedPublic`](http://msdn.microsoft.com/en-us/library/system.type.isnestedpublic.aspx)。

# git - Travis CI 上的 git、devscripts、debhelper

> ID：14918103
> 
> 赞同：3
> 
> 时间：2013-02-17T04:53:34.777
> 
> 标签：git, continuous-integration, fixed, travis-ci

我正在编写一个我想在 Travis CI 上测试的工具。

我可以假设包

*   开发脚本
*   去帮手
*   混帐核心

是否存在于我的测试将运行的 CI 环境中？

老实说，我实际上只需要**dch**和**git 。**

我[只是看了他们的食谱](https://github.com/travis-ci/travis-cookbooks/tree/master/ci_environment)，他们似乎没有我需要的东西。

有什么办法可以在 CI 环境中获得我需要的东西吗？

我可以[通过 travis.yml](http://about.travis-ci.org/docs/user/build-configuration/)以某种方式自动安装软件包吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:18:22.220

我在 yaml 中使用**before_install解决了。**这让我可以指定我想运行的任何命令，所以我基本上做到了：

```
language: perl
perl:
    - "5.16"
    - "5.14"
    - "5.12"
    - "5.10"

before_install:
   - sudo apt-get update  -qq
   - sudo apt-get install -qq libjson-xs-perl devscripts git-core debhelper
   - git config --global user.email "test@test.com"
   - git config --global user.name "Mr Test" 
```

# php - 如何检查数据库中已有的空表

> ID：14918106
> 
> 赞同：3
> 
> 时间：2013-02-17T04:54:16.150
> 
> 标签：php, mysql

我正在创建一个站点的管理面板。当管理员输入一个类别时，在数据库中创建一个相同类别名称的表，字段都是相同的..在启动管理员时输入很多类别..那么我该如何检查已经在数据库中创建了一个表..因为所有表都是空的。为了那个原因

我正在尝试这段代码

```
 <?php $con = mysql_connect("localhost","root","");
     if (!$con)
     {die('Could not connect: ' . mysql_error());}
   $sql="SELECT * FROM admin";//(for trial im a changing the name manuaaly)

    $result=@mysql_query($sql);

  if (!$result)

      {
        echo "No table exists";
     }
      else
      {
     echo "yes";
     }
    ?> 
```

但在这它总是显示“不存在表”，如果表在数据库中..我该如何解决这个..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:10:43.660

**不要**为每个类别创建单独的表！
将其设为**一个**，包含所有字段集和一个具有类别名称（或类别 ID，取决于数据库模式）。

这就是数据库如何工作的基础知识。

因此，您只需运行常规查询即可检查此类类别名称是否已存在：

```
SELECT id FROM categories WHERE name = 'name to check'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T05:00:42.940

看看[`INFORMATION_SCHEMA`架构](http://dev.mysql.com/doc/refman/5.1/en/information-schema.html)，特别是[`TABLES`表](http://dev.mysql.com/doc/refman/5.1/en/tables-table.html)。

IE：

```
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = `admin_table_name`; 
```

# vb.net - 如何从网站发布和检索数据

> ID：14918108
> 
> 赞同：1
> 
> 时间：2013-02-17T04:54:26.983
> 
> 标签：vb.net, web, textinput

我正在使用 Windows 窗体应用程序。我有一个名为“tbPhoneNumber”的文本框，其中包含一个电话号码。

我想去网站[http://canada411.com](http://canada411.com)并输入我文本框中的数字，进入网站文本框 ID：“c411PeopleReverseWhat”，然后以某种方式发送点击“查找”（这是一个输入属于到类“c411ButtonImg”）。

之后，我想检索以下 HTML 部分的星号之间的内容：

```
<div id="contact" class="vcard">
        <span><h1 class="fn c411ListedName">**Full Name**</h1></span>
        <span class="c411Phone">**(###)-###-####**</span>
        <span class="c411Address">**Address**</span>
        <span class="adr">
            <span class="locality">**City**</span>
            <span class="region">**Province**</span>
            <span class="postal-code">**L#L#L#**</span>
        </span> 
```

所以基本上我试图将数据发送到输入框中，单击输入按钮并将检索到的值存储到变量中。我想无缝地做到这一点，所以我需要做一些类似 HTTPWebRequest 的事情？还是我使用 WebBrowser 对象？我只是不希望用户看到应用程序正在网站上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T05:59:14.203

我做了很多网站抓取，我会告诉你我是怎么做的。如果我过于具体，请随意跳过，但这是一个普遍要求的主题，应该具体说明。

## 网址简化

我为此使用的库是[htmlagilitypack](http://html-agility-pack.net/?z=codeplex)（它是一个 dll，创建一个新项目并添加对它的引用）。首先要检查的是我们是否必须采取任何特殊步骤才能使用电话号码访问页面。我搜索了约翰史密斯并找到了很多。我输入了其中 2 个结果，发现 url 格式非常简单。那些结果是..

[http://www.canada411.ca/res/7056736767/John-Smith/138223109.html](http://www.canada411.ca/res/7056736767/John-Smith/138223109.html)

[http://www.canada411.ca/res/7052355273/John-Smith/172439951.html](http://www.canada411.ca/res/7052355273/John-Smith/172439951.html)

我测试了是否可以从 url 中删除一些我不知道的值并留下电话号码。结果我可以...

[http://www.canada411.ca/search/re/1/7056736767/-](http://www.canada411.ca/search/re/1/7056736767/-)

[http://www.canada411.ca/search/re/1/7052355273/-](http://www.canada411.ca/search/re/1/7052355273/-)

通过url可以看到url和我们的电话号码中有一些静态区域。由此我们可以为 url 构造一个字符串。

```
Dim phoneNumber as string = "7056736767" 'this could be TextBox1.Text or whatever
Dim URL as string = "http://www.canada411.ca/search/re/1/" + phoneNumber +"/-" 
```

## 使用 XPath 提取值

现在我们已经拨入了页面，让我们检查您在上面提供的 html。您需要页面中的 6 个值，因此我们现在将创建它们...

```
Dim FullName As String
Dim Phone As String
Dim Address As String
Dim Locality As String
Dim Region As String
Dim PostalCode As String 
```

如上所述，我们将使用使用[Xpath](http://www.w3schools.com/xpath/default.asp)的 htmlagilitypack 。很酷的一点是，一旦我们可以在 html 中找到一些唯一标识符，我们就可以使用 Xpath 来查找我们的值。我知道这可能会令人困惑，但它会变得更加清晰。

您需要的所有值都在具有类名的标签中。让我们使用 Xpath 中的类名来查找它们。

```
Dim FullNameXPath As String = "//*[@class='fn c411ListedName']"
Dim PhoneXPath  As String = "//*[@class='c411Phone']"
Dim AddressXPath  As String = "//*[@class='c411Address']"
Dim LocalityXPath  As String = "//*[@class='locality']"
Dim RegionXPath  As String = "//*[@class='region']"
Dim PostalCodeXPath  As String = "//*[@class='postal-code']" 
```

本质上，我们正在查看的是一个字符串，它将通知 htmlagilitypack 要查找的内容。在我们的例子中，文本包含在我们命名的类中。XPath 有很多内容，可能需要一段时间来解释所有内容。不过附带说明...如果您使用 Google Chrome 并突出显示页面上的值，则可以右键单击检查元素。在下面出现的代码中，您可以右键单击该值并复制到 XPath！很有用。

## 基本 HTMLAgilityPack 模板

现在，剩下的就是连接到页面并填充这些变量。

```
Dim Web As New HtmlAgilityPack.HtmlWeb
Dim Doc As New HtmlAgilityPack.HtmlDocument
Doc = Web.Load(URL)
For Each nameResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(FullNameXPath)
     Msgbox(nameResult.InnerText)        
Next 
```

在上面的示例中，我们创建了一个名为 Web 的 HtmlWeb 对象。这是我们项目的实际爬虫。然后我们定义一个 HtmlDocument，它将包含我们转换的和可搜索的页面源。所有这些都是在幕后完成的。然后我们发送 Web 以获取页面源并将其分配给我们创建的 Doc 对象。Doc 是可重用的，幸好我们只需要连接到页面一次。

for 循环在我们的 Doc 中查找与 FullNameXPath 匹配的任何节点，FullNameXPath 之前定义为用于查找名称的 XPath 值。当找到一个节点时，它被分配给 nameResult 变量，并且在循环中我们调用一个消息框来显示我们节点的内部文本。

所以当我们把它们放在一起时

## 完整的工作代码（截至 2013 年 2 月 17 日）

```
Dim phoneNumber As String = "7056736767" 'this could be TextBox1.Text or whatever
Dim URL As String = "http://www.canada411.ca/search/re/1/" + phoneNumber + "/-"
Dim FullName As String
Dim Phone As String
Dim Address As String
Dim Locality As String
Dim Region As String
Dim PostalCode As String
Dim FullNameXPath As String = "//*[@class='fn c411ListedName']"
Dim PhoneXPath As String = "//*[@class='c411Phone']"
Dim AddressXPath As String = "//*[@class='c411Address']"
Dim LocalityXPath As String = "//*[@class='locality']"
Dim RegionXPath As String = "//*[@class='region']"
Dim PostalCodeXPath As String = "//*[@class='postal-code']"
Dim Web As New HtmlAgilityPack.HtmlWeb
Dim Doc As New HtmlAgilityPack.HtmlDocument
Doc = Web.Load(URL)
For Each nameResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(FullNameXPath)
    FullName = nameResult.InnerText
    MsgBox(FullName)
Next
For Each PhoneResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(PhoneXPath)
    Phone = PhoneResult.InnerText
    MsgBox(Phone)
Next
For Each ADDRResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(AddressXPath)
    Address = ADDRResult.InnerText
    MsgBox(Address)
Next
For Each LocalResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(LocalityXPath)
    Locality = LocalResult.InnerText
    MsgBox(Locality)
Next
For Each RegionResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(RegionXPath)
    Region = RegionResult.InnerText
    MsgBox(Region)
Next
For Each postalCodeResult As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes(PostalCodeXPath)
    PostalCode = postalCodeResult.InnerText
    MsgBox(PostalCode)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:00:40.193

是的，这是可能的，我已经使用[selenium 框架](http://docs.seleniumhq.org/)完成了这项工作，该框架旨在测试自动化。但是，它为您提供了执行此操作的工具。

在此处下载 .net：http: [//docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/)

# c++ - 如何渲染背景图像不是二的幂

> ID：14918109
> 
> 赞同：0
> 
> 时间：2013-02-17T04:54:45.450
> 
> 标签：c++, directx, directx-11

我是 DirectX 的新手，我正在尝试渲染尺寸为 300 x 570 像素的纹理。

实现此目的的正确方法是什么？

我使用的是 Windows 8 和功能级别 11_0，并且我可以访问从 *.DDS 文件加载纹理的函数。

但是，据我了解，DDS 纹理的尺寸是 2 的幂，而我的背景纹理没有，因此我无法将背景图像（当前为 .jpg）转换为 .dds 格式。

有人如何有效地渲染这个背景纹理？

# python - 使用 reg 附加列表。表达

> ID：14918122
> 
> 赞同：0
> 
> 时间：2013-02-17T04:57:35.847
> 
> 标签：python, regex

我正在尝试使用“句子”附加一个列表（空），其中有来自不同列表的#（Hashtags）。目前，我的代码给了我一个新列表，其中包含列表中涉及的元素总数，而不是单个句子。

代码片段如下

```
import re

old_list = ["I love #stackoverflow because #people are very #helpful!","But I dont #love hastags",
"So #what can you do","Some simple senetnece","where there is no hastags","however #one can be good"]

new_list = [ ]

for tt in range(0,len(s)):
    for ui in s:
        if bool(re.search(r"#(\w+)",s[tt])) == True :
            njio.append(s[tt]) 
```

请让我知道如何只附加一个句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:05:41.493

我不确定您想要输出什么，但这将保留原始句子及其匹配的主题标签集：

```
>>> import re
>>> old_list = ["I love #stackoverflow because #people are very #helpful!","But I dont #love hastags",
... "So #what can you do","Some simple senetnece","where there is no hastags","however #one can be good"]
>>> hash_regex = re.compile('#(\w+)')
>>> [(hash_regex.findall(l), l) for l in old_list]
[(['stackoverflow', 'people', 'helpful'], 'I love #stackoverflow because #people are very #helpful!'), (['love'], 'But I dont #love hastags'), (['what'], 'So #what can you do'), ([], 'Some simple senetnece'), ([], 'where there is no hastags'), (['one'], 'however #one can be good')] 
```

# ios - 'BOOL' (aka 'signed char') 到 'id' ,objc_setAssociatedObject 的隐式转换

> ID：14918125
> 
> 赞同：5
> 
> 时间：2013-02-17T04:58:12.480
> 
> 标签：ios, objective-c, objective-c-category

我正在使用关联引用作为我的类别属性的存储

头文件包含：

```
@interface UIImageView (Spinning)

@property (nonatomic, assign) BOOL animating;

@end 
```

实施是

```
- (void)setAnimating:(BOOL)value {
    objc_setAssociatedObject(self, animatingKey, value, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
} 
```

但是，我收到上述行的警告

```
Implicit conversion of 'BOOL' (aka 'signed char') to 'id' is disallowed with ARC 
```

如果你知道我在这里做错了什么，请帮助如何避免这个问题

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-17T05:05:21.957

该`objc_setAssociatedObject`函数需要一个 Objective-C 对象作为第三个参数。但是您正试图传入一个非对象`BOOL`值。

这与尝试将 a 添加`BOOL`到`NSArray`. 您需要将`BOOL`.

尝试：

```
objc_setAssociatedObject(self, animatingKey, [NSNumber numberWithBool:value], OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

当然，您稍后需要在获取关联对象时`BOOL`从 中提取值。`NSNumber`

更新：使用现代 Objective-C 你可以：

```
objc_setAssociatedObject(self, animatingKey, @(value), OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:08:16.183

```
void objc_setAssociatedObject(id object, void *key, id value, objc_AssociationPolicy policy) 
```

objc_setAssociatedObject 接受 id 类型的值作为第三个参数，并且您正在尝试将 BOOL 传递给它。所以根据需要进行转换。

# mysql - MySQL 搜索 TEXT 字段以匹配文本，多行上的绝对值

> ID：14918129
> 
> 赞同：1
> 
> 时间：2013-02-17T04:58:36.110
> 
> 标签：mysql, innodb

好的，我在 InnoDB 中有一个表。它有一个名为“spellings”的列，它是一个 TEXT 字段（不是 varchar）。在本专栏中，我有多种拼写方式，每种方式都用换行符分隔。例如其中一行如下：

```
Soulcalibur
Soul Calibur 
```

然后我有另一行包含此信息

```
Soulcalibur II
Soulcalibur 2
Soul Calibur II
Soul Calibur 2 
```

现在假设我想查找包含“Soul Calibur”的行，我正在使用：

```
SELECT * FROM games WHERE spellings LIKE '%Soul Calibur%' 
```

这样做的问题是它返回两行，因为从技术上讲，第二行确实有“Soul Calibur”。在 MySQL 查询中是否有一种方法可以查询 Soul Calibur，它只会在一行上显示包含 EXACTLY Soul Calibur 的字段。在解析换行符后基本上是完全匹配的。

如果我删除 %，它不起作用，因为第一行在技术上是`Soulcalibur\nSoul Calibur`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:23:59.100

我认为您需要使用 char(10) 换行。所以尝试像 CONCAT('%Soul Calibur', CHAR(10), '%')

# macos - 在 Mac OSX 中可以使用 Yesod 二进制文件的位置

> ID：14918131
> 
> 赞同：1
> 
> 时间：2013-02-17T04:59:55.057
> 
> 标签：macos, haskell, yesod

我遵循[了这个](http://www.yesodweb.com/page/quickstart)快速入门教程。

安装*yesod-platform*后，我尝试运行*yesod*命令但没有成功。

难道我做错了什么？

我知道如何解决它 --- 将正确的路径添加到 $PATH。问题是，我只是不知道应该添加哪条路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:09:28.637

似乎添加`/Library/Haskell/bin/`到您的 $PATH 变量可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T09:42:08.160

对我来说，`yesod`最终在`~/.cabal/bin`

# sed - 为什么正则表达式中字符的顺序会影响 sed？

> ID：14918132
> 
> 赞同：1
> 
> 时间：2013-02-17T04:59:56.497
> 
> 标签：sed, regex-group

tv.txt 文件如下：

```
mms://live21.gztv.com/gztv_gz 广州台[可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3]
mms://live21.gztv.com/gztv_news 广州新闻台·直播广州(可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3)
mms://live21.gztv.com/gztv_kids 广州少儿台(可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3)
mms://live21.gztv.com/gztv_econ 广州经济台 
```

我想把它分成三组。

```
sed -r 's/([^ ]*)\s([^][()]*)((\(.+\))*|(\[.+\])*)/\3/'  tv.txt 
```

得到了结果：

```
[可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3]    
(可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3)    
(可于Totem/VLC/MPlayer播放，记得把高宽比设置成4:3) 
```

当我把它写成

```
sed -r 's/([^ ]*)\s([^][()]*)((\(.+\))*|(\[.+\])*)/\3/'  tv.txt 
```

它行不通。

唯一的区别是`[^][()]`和`[^[]()]`; , 转义字符都`[^\[\]()]`不能使其正常运行。

我想知道原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:07:40.853

进入角色类别的[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)规则`]`有点神秘，但是当您仔细考虑时，它们是有道理的。

对于正（非否定）字符类，`]`必须是第一个字符：

```
[]and] 
```

这将任何字符`a`、`n`或识别为字符类的一部分`d`。`]`

对于否定字符类，`]`必须是 之后的第一个字符`^`：

```
[^]and] 
```

`a`这将识别除、或 之外的任何字符`n`，`d`或`]`作为字符类的一部分。

否则，第一个标记`]`后`[`的字符类结束。在一个字符类中，大多数普通的正则表达式特殊字符失去了它们的特殊含义，而其他的（尤其是`-`减号）获得了特殊的含义。（如果你想`-`在字符类中使用 a ，它必须是 'first' 或 last，其中 'first' 的意思是 '在可选之后`^`且仅当`]`它不存在时'。）

在您的示例中：

*   `[^][()]`— 这是一个否定字符类，可以识别除`[`,或, 以外的任何字符`]`，但是`(``)`
*   `[^[]()]`- 这是一个否定字符类，它识别除 之外的任何字符`[`，后跟`()`您正在使用的正则表达式系列中的任何符号，并`]`代表它自己。

# javascript - 定义无值关联数组

> ID：14918133
> 
> 赞同：1
> 
> 时间：2013-02-17T05:00:10.523
> 
> 标签：javascript

我有一个非常大的硬编码索引数组，我想轻松地将其转换为关联数组，因此查找速度要快得多。

```
var arr = ["a", "b", "c"]; 
```

现在我正在遍历 arr 并将它的值与一个值进行比较以查看是否匹配。现在我有数百个元素，它变得相当慢，拥有一个关联数组会更快。

看来我不能只做

```
var arr = {"a", "b", "c"}; 
```

我无法真正添加价值，因为它太慢了。

当然，我可以将元素复制到关联数组或对数组进行排序并进行二进制搜索，但如果能够为数组元素分配默认值并使用上面的语法会容易得多。

我想这是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:03:28.213

```
var mapLookup = arr.reduce(function (accumalator, value) {
    accumalator[value] = true;
    return accumalator;
}, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:03:50.293

为什么不： var arr = {"a":1, "b":1, "c":1};

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T05:05:51.823

大多数现代浏览器都支持`Array.indexOf()`. `-1`如果您的搜索没有结果，这将返回。

你真的有速度问题，还是你只是预先优化？您应该使用的容器是一个数组。你有一个元素数组——它们不与任何其他值相关联，那么为什么要把它们放在地图容器中呢？

此外，听起来你想要一个`set`，你有一组*独特*的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T05:11:53.513

将数组转换为关联数组似乎是最简单且非常快速的：

```
var arr = ["a", "b", "c"];
var arrA = {}; for(var i = 0; i < arr.length; i++) arrA[arr[i]] = 0; 
```

然后只`key in arrA`用于 O(1) 查找。（不必显式地为键提供值的能力会更容易，但是......）

本质上

```
if (key in arrA) ... 
```

替换

```
for(var i = 0; i < arr.length; i++) if (key == arr[i]) ... 
```

当在循环内使用时，这本质上是 O(n) vs O(n^2)。

# haskell - 如何在 Haskell 中定义 Lispy 数据类型？

> ID：14918140
> 
> 赞同：1
> 
> 时间：2013-02-17T05:01:14.067
> 
> 标签：haskell, lisp, gadt

我正在为 Coursera 的 AI 规划课程编写一个 Lispy PDDL 解析器。

如何在 Haskell 中定义 Lispy 数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:01:31.353

它看起来很 Lispy，不是吗？

```
{-# LANGUAGE FlexibleInstances #-}

import Data.List

data S s = T s | S [S s] deriving (Eq)

instance Show (S String) where
 show (T s) = s
 show (S list) = "(" ++ (intercalate " " $ map show list) ++ ")"

sExpr = S [T "define",T "x",T "10",S [T "print",T "hello"],S []]

main = do
 putStrLn $ show sExpr 
```

运行main的结果：

```
(define x 10 (print hello) ()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:12:16.603

我的 Lispy PDDL 解析器：

[https://dl.dropbox.com/u/46434672/Code/LispyPddlParser.hs](https://dl.dropbox.com/u/46434672/Code/LispyPddlParser.hs)

DWR-operators.txt 文件：

[https://spark-public.s3.amazonaws.com/aiplan/resources/DWR-operators.txt](https://spark-public.s3.amazonaws.com/aiplan/resources/DWR-operators.txt)

# struts2 - Struts 2 文件上传在 Chrome 和 Firefox 中工作正常，但在 IE 中不行

> ID：14918144
> 
> 赞同：1
> 
> 时间：2013-02-17T05:02:36.927
> 
> 标签：struts2

我在 Internet Explorer 中为 excel 文件上传 struts 2 文件时遇到问题。它在 Chrome 和 firefox 中运行良好，但我不确定我在 IE 中缺少什么。

这是我拥有的struts配置：

```
<action name="uploadAction" method="submitServiceProfile" class="serviceProfileAction">
             <!-- <interceptor-ref name="exception"/>
             <interceptor-ref name="i18n"/> -->
             <interceptor-ref name="fileUpload">
                 <param name="allowedTypes">application/ms-excel,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</param>
                 <!-- <param name="maximumSize">20480</param> -->
             </interceptor-ref>
             <interceptor-ref name="params">
                 <param name="excludeParams">dojo\..*,^struts\..*</param>
             </interceptor-ref>
             <interceptor-ref name="validation">
                 <param name="excludeMethods">input,back,cancel,browse</param>
             </interceptor-ref>
             <interceptor-ref name="store">
                 <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="someStack"/>

            <result name="success" type="redirectAction">managerPage</result>
             <result name="error" type="redirectAction">managerPage</result>
             <result name="input" type="tiles">homepage</result>

         </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:10:24.140

正如user497087（谢谢！）所建议的那样，我完全删除了allowedTypes，以及interceptor-ref“fileupload”。现在，请求在任何给定的浏览器上都没有问题地进入操作。

# python - 如何在python中复制文件？

> ID：14918148
> 
> 赞同：2
> 
> 时间：2013-02-17T05:03:20.340
> 
> 标签：python, bash, minecraft, osx-leopard, ramdisk

基本上，我想做的是这个（在伪bash-ish代码中）

```
#create ramdisk raid
diskutil erasevolume HFS+ "r1" `hdiutil attach -nomount ram://4661720`;
diskutil erasevolume HFS+ "r2" `hdiutil attach -nomount ram://4661720`;
diskutil createRAID stripe SpeedDisk HFS+ /Volumes/r1 /Volumes/r2;

#copy minecraft server files to ramdisk
cp minecraft_Server /Volumes/SpeedDisk

#start minecraft_server
cd /Volumes/SpeedDisk/minecraft_server
java -Xms2G -Xmx2G -jar minecraft_server.jar nogui

#once I stop the server, copy the files to my harddrive
cd ~
cp /Volumes/SpeedDisk/minecraft_server minecraft_server/ 
```

我不确定如何在现实生活中执行此操作 ^：p 我正在考虑使用 python，但 os.system 复制文件似乎存在问题。

另外，我想知道我完成后是否有办法弹出虚拟磁盘。这一切都将在 Mac OS X Leopard 中完成。我做这一切的原因是为了在不购买 SSD 的情况下加快我的 minecraft 服务器的速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:10:43.580

> 我正在考虑使用 python，但似乎 os.system 用于复制文件存在问题。

...然后使用正确的工具来完成这项工作：

*   [**`shutil.copytree()`**](http://docs.python.org/dev/library/shutil.html#shutil.copytree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:06:51.693

Shell 脚本似乎是此类问题的最佳解决方案（假设您希望它在单个平台上工作`mac osx`）。使用这些命令编写一个 shell 脚本，并在每次要执行这些命令时使用该脚本。

# c++ - 平铺系统 C++ SDL

> ID：14918149
> 
> 赞同：0
> 
> 时间：2013-02-17T05:03:21.703
> 
> 标签：c++, sdl

我一直在为通过 C++ 和 SDL 设计的视频游戏开发平铺系统。代码大致基于lazyfoo.net 上提供的教程，但使用不同的系统将图块绘制到屏幕上。代码的工作方式如下：我有一个名为的类`Map`，它创建另一个名为`Tile`. 它还有一个名为的函数，它从 .map 文件中读取数字并使用两个 for 循环`set_tiles`将它们复制到 ' 的数组中；`tile`一个用于 x，一个用于 y。然后我根据`Tile`'s 的特定变量将每个表面blit 到一个临时贴图。这是实际的代码：

# 地图.cpp

```
SDL_Surface* Map::set_tiles ( SDL_Surface* tile_image ) {
Setup setup;

SDL_Surface* temp_map = NULL;

//Open the map
std::ifstream map ( "Test.map" );

//Catch any errors
if ( map.fail() ) return NULL;

//Initialize the tiles
for ( int y = 0; y < MAP_HEIGHT / TILE_HEIGHT; y++ ) {
    for ( int x = 0; x < MAP_WIDTH / TILE_WIDTH; x++ ) {
        //Determines the tile type
        int tile_type = -1;

        //Read the tile type from the map
        map >> tile_type;

        //Make sure it's a real tile
        if ( tile_type < 0 || tile_type >= TILE_SPRITES ) {
            map.close();
            return NULL;
        }

        //Error check for the .map file
        if ( map.fail() ) {
            map.close();
            return NULL;
        }

        //Add the tile to the array
        tile_array[x][y] = &Tile ( x, y, tile_type );

        //Create the temp. image crop
        SDL_Rect* temp_crop = &tile_array[x][y]->get_crop();

        //Check for crop errors
        if ( ( temp_crop->h || temp_crop->w ) == 0 ) return NULL;

        //Edit the temp. map
        setup.apply_surface ( x * TILE_WIDTH, y * TILE_HEIGHT, tile_image, temp_map, temp_crop );
    }
}

map.close();

//Return the modified map
return temp_map; 
```

}

# 瓷砖.cpp

```
Tile::Tile ( int x, int y, int tile_type ) {
//Get the offsets
box.x = x;
box.y = y;

//Set the collision box
box.w = TILE_WIDTH;
box.h = TILE_HEIGHT;

//Get the tile type
type = tile_type;

//Choose the crop option
crop.w = TILE_WIDTH;
crop.h = TILE_HEIGHT;

switch ( tile_type ) {
case TILE_RED:
    crop.x = 0 * TILE_WIDTH;
    crop.y = 0 * TILE_HEIGHT;
    break;
case TILE_GREEN:
    crop.x = 1 * TILE_WIDTH;
    crop.y = 0 * TILE_HEIGHT;
    break;
case TILE_BLUE:
    crop.x = 2 * TILE_WIDTH;
    crop.y = 0 * TILE_HEIGHT;
    break;
case TILE_CENTER:
    crop.x = 3 * TILE_WIDTH;
    crop.y = 0 * TILE_HEIGHT;
    break;
case TILE_TOP:
    crop.x = 0 * TILE_WIDTH;
    crop.y = 1 * TILE_HEIGHT;
    break;
case TILE_TOPRIGHT:
    crop.x = 1 * TILE_WIDTH;
    crop.y = 1 * TILE_HEIGHT;
    break;
case TILE_RIGHT:
    crop.x = 2 * TILE_WIDTH;
    crop.y = 1 * TILE_HEIGHT;
    break;
case TILE_BOTTOMRIGHT:
    crop.x = 3 * TILE_WIDTH;
    crop.y = 1 * TILE_HEIGHT;
    break;
case TILE_BOTTOM:
    crop.x = 0 * TILE_WIDTH;
    crop.y = 2 * TILE_HEIGHT;
    break;
case TILE_BOTTOMLEFT:
    crop.x = 1 * TILE_WIDTH;
    crop.y = 2 * TILE_HEIGHT;
    break;
case TILE_LEFT:
    crop.x = 2 * TILE_WIDTH;
    crop.y = 2 * TILE_HEIGHT;
    break;
case TILE_TOPLEFT:
    crop.x = 3 * TILE_WIDTH;
    crop.y = 2 * TILE_HEIGHT;
    break;
} 
```

}

问题是`set_tiles`当它被调用时返回一个 NULL 指针。通过一些调试，我发现它一直到最后，然后返回一个 NULL，它不会在 for 循环中的某个地方这样做。我还尝试将所有`tile`crop.x 和y 设置为0，只是为了看看它是否有效，但它没有。

**注意** 问题不是我的图像或 .map 文件。我想我对指针的理解可能有点错误，我可能在调用`apply_surface`.

# 安装程序.cpp

```
void Setup::apply_surface ( int x, int y, SDL_Surface* source, SDL_Surface* &destination, SDL_Rect* clip ) {
//Temporary rectangle to hold the offsets
SDL_Rect offset;

//Get the offsets
offset.x = x;
offset.y = y;

//Blit the surface
SDL_BlitSurface ( source, clip, destination, &offset ); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:45:21.540

`SDL_BlitSurface`将一个表面粘贴到另一个表面。它们都必须初始化，否则函数什么也不做。您正在向它传递一个 NULL 指针。您需要通过调用类似[SDL_CreateRGBSurface](http://wiki.libsdl.org/moin.cgi/SDL_CreateRGBSurface)的方法来初始化指针。

# iphone - ios UIActivityViewController 没有附加图片发送短信

> ID：14918161
> 
> 赞同：2
> 
> 时间：2013-02-17T05:05:38.397
> 
> 标签：iphone, ios, ipad, uiactivityviewcontroller

我正在使用 UIActivityViewController 在 Facebook、电子邮件、Twitter 和短信中分享。除了发短信，一切都很好。当我选择发短信选项时，它不会将图像附加到文本中。这是我的代码：

```
NSMutableArray *tmp=[[NSMutableArray alloc]init];
[tmp addObject:tmpImage];
[tmp addObject:@"Hello"];
NSArray *activityItems =[NSArray arrayWithArray:tmp];
UIActivityViewController *activityVC=[[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityVC animated:YES completion:nil]; 
```

你们中的任何人都知道为什么不将图像附加到发短信的部分吗？

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:27:51.413

当前 iOS 不支持应用内彩信（多媒体消息），仅支持短信。

可能的解决方案包括：

•将图像复制到剪贴板并让用户手动将其粘贴到消息文本框中。（您可以通过 URI 方案“sms://”打开支持彩信的短信应用（只需加载该 URL）

•将图像加载到电子邮件应用程序中，并将电子邮件作为文本消息发送到可以解决问题的任一服务器、iMessages 电子邮件地址或 sms/mms 电子邮件地址（例如如果电子邮件发送到 4043456789@txt.att.net，AT&T 的 404-345-6789 可以收到短信，所有主要运营商的每个电话号码都有一个电子邮件地址）。

# c - 在 C 中使用宏作为函数

> ID：14918164
> 
> 赞同：-1
> 
> 时间：2013-02-17T05:06:50.270
> 
> 标签：c, macros, c-preprocessor

我想输入一个按位计算并交换两个变量的宏

我没有在我的程序中一次又一次地键入该代码，而是决定使用宏作为

```
#define swapVars(p,a,b) {p=a^b;a=^p;b=^p;} 
```

当我在代码中使用宏时

```
int a = 10, b=19;
int swap_dummy = 0; //May contain anything
swapVars(swap_dummy, a, b);
printf("a = %d   | b = %d", a, b); 
```

我在更换时遇到错误。宏定义错了吗？（顺便说一句，应该是）。这种情况下正确的宏是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:13:06.780

`=^`你想要的`^=`不是有效的。虽然尚不清楚为什么在正常分配可以正常工作时使用按位异或。

但真的看到你的问题的评论，为什么这根本不应该是一个宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T05:18:54.917

这个问题很像“我如何以错误的方式解决我的问题？”。

您的宏似乎是异或交换的错误实现。我不会帮助您修复异或交换，而是尝试帮助您以正确的方式解决问题：虽然异或交换是一个有趣的概念，但它没有实际用途。您确定这不是过早的优化吗？

1.  与临时变量交换不同，这不是惯用的。首先，如果你写了一个临时变量 swap，你就不会遇到这个问题。此外，如果您必须花时间向您的同事解释您的代码，那么您可能希望考虑对您的工作场所进行更重要的优化。
2.  在这种情况下，它的定义不如典型的交换。对值使用异`int`或会导致陷阱表示，例如负零。使用陷阱表示是未定义的行为。未定义的行为可能会导致您的程序以非常奇怪的方式出现故障。
3.  编译器在编译更常见和定义明确的代码方面做得更好。让您的编译器为您进行过早的优化。

关于`inline`关键字：过早停止优化。使用简单易读的代码让您的程序正常运行，以便您可以寻求我们的帮助。一旦你有了一个可行的解决方案，如有必要，分析它以找出最重要的优化可能来自哪里。

# php - 通过 php 限制访问管理区域

> ID：14918170
> 
> 赞同：0
> 
> 时间：2013-02-17T05:07:28.630
> 
> 标签：php, codeigniter

我使用codeigniter。我已经有权限访问级别`php`和`mysql`使用会话。我想根据他的访问级别限制注册管理员可以查看的页面。我在数据库中为每个管理员（每个`id_relation`管理员）作为图像：

![在此处输入图像描述](../Images/e870416d48f5904e414d0cfc680f6bf7.png)

上面数据库表中的每个数字都是一个页面，例如：（值子页面和服务列是`json`）

在主页中：`1`is `page 1`, `3`is `page 3`, `5`is`page 5`和 ...

**PHP：（我试过）**

```
$result = $this->db->get_where('access_level', array('id_relation'=>'6572242cc91f61b2f722e31ec55e3c7c'));
$data = array();
foreach($result->result() as $row){
    $data[] = $row->mainpage;       
}

if(in_array('1', $data)){
    echo 'access';
}else{
    echo 'not access';
} // out put is access 
```

现在如何为拥有自己页面`subpage`的三行设置权限？`mainpage 1`例如在上面的数据库中。

在 id`1`中，用户`mainpage`可以访问页面`1`，并且在此主页（第 1 页）中，他可以访问子页面中的第 3、4、6 页，并且在每个子页面中，他都可以访问服务 110。（它们像链一样连接在一起。）

它也适用于其余的行。我的 html 为： http: [//jsfiddle.net/pbNt3/](http://jsfiddle.net/pbNt3/)我用于插入数据的 php 为： http: [//pastebin.com/HpztqSwV](http://pastebin.com/HpztqSwV)

如何允许用户通过 php 访问任何页面（主页面和子页面）和子页面中的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:14:04.713

您如何对您的数据库运行查询以查看是否从 WHERE mainpage = 1 返回了某些内容。

例子 ：

```
SELECT......
FROM........
WHERE (your database flag) = .......... 
```

我在我的应用程序上进行了相同的设置。我有 3 个角色，学生、员工、管理员。然后我使用 if else 语句。现在，根据我对您数据库的了解，只有窗帘人员可以访问页面、子页面和服务。这可以通过简单地查询并查看是否

```
return $whateveryou... 
```

示例 2：

```
function staffmember()
    {
        $username1 = $this->session->userdata('username');
        $sql1 = "SELECT * FROM users WHERE username = :user AND activated = 1";
        $staffmember = $this->db->conn_id->prepare($sql1);
        $staffmember->bindParam(':user', $username1);
        $staffmember->execute();
        $row = $staffmember->fetch();

        if($row['staffmember'] == 1)
        {
            return $staffmember;
        }
    }

    function is_admin()
    {
    $username = $this->session->userdata('username');
    $sql = "SELECT * FROM users WHERE username = :user";
    $is_admin = $this->db->conn_id->prepare($sql);
    $is_admin->bindParam(':user', $username);
    $is_admin->execute();   
    $row = $is_admin->fetch();

        if($row['admin'] == 1)
        {
            return $is_admin;
        }
    } 
```

所以然后在控制器中你做：

```
function index()
    {
        $this->load->model('staff_model');
        if($staffmember = $this->staff_model->staffmember()) //Checks for staff value == 1 
        {
            if($is_admin = $this->staff_model->is_admin()) // Checks for admin value == 1
        {
            $data3['main_content'] = 'admin_view';
            $this->load->view('includes/template', $data3);
        }else{ // If not admin == 1 
            $data['main_content'] = 'staff_homepage_view';
            $this->load->view('includes/template', $data);
        }
        }else{ // If not staff == 1
            $data1['main_content'] = 'student_homepage_view';
            $this->load->view('includes/template', $data1); 
        } 
```

}

希望你能从中得到一些有用的东西。

# delphi - OnMouseMove 没有对象检查器 delphi

> ID：14918180
> 
> 赞同：1
> 
> 时间：2013-02-17T05:10:19.880
> 
> 标签：delphi, onmousemove

我的应用程序有 350 个编辑字段，它们都应该有一个 OnMouseMove 事件。我已经为所有这些生成了这段代码：

```
...

type

...    
procedure Edit1MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
procedure Edit2MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);    
...

implementation

{$R *.dfm}

...    
procedure TForm1.Edit1MouseMove(Sender: TObject; Shift: TShiftState; X,  
  Y: Integer);  
begin 
  Edit1.SetFocus(); 
end;

procedure TForm1.Edit2MouseMove(Sender: TObject; Shift: TShiftState; X,  
  Y: Integer);
begin 
  Edit2.SetFocus(); 
end;    
... 
```

但是我没有去对象检查器双击 OnMouseMove。有没有办法在没有对象检查器的情况下完成这项工作。您是否有示例代码行可以使其适用于第一个编辑字段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T05:56:23.493

您可以创建一次并自己在代码中分配它：

```
type
  TForm1=class(TForm)
    procedure EditMouseMove(Sender: TObject; Shift: TShiftState;
      X, Y: Integer);
    procedure FormCreate(Sender: TObject);
    //...
  end;

implementation

procedure TForm1.EditMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Integer);
var
  CurrEdit: TEdit;
begin
  if (Sender is TEdit) then
  begin
    CurrEdit := TEdit(Sender);
    // Do whatever with CurrEdit
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  Edit1.OnMouseMove := EditMouseMove;
  Edit2.OnMouseMove := EditMouseMove;
  Edit3.OnMouseMove := EditMouseMove;
end; 
```

如果您想为`TEdit`表单上的每个人分配相同的人：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
begin
  for i := 0 to ControlCount - 1 do
    if Controls[i] is TEdit then
      TEdit(Controls[i]).OnMouseMove := EditMouseMove;
end; 
```

# javascript - 在页面加载时使用 JavaScript 在父容器中垂直居中子 div 不是设置位置？

> ID：14918181
> 
> 赞同：4
> 
> 时间：2013-02-17T05:10:23.327
> 
> 标签：javascript, jquery

我正在使用 JavaScript 在流体容器中垂直居中子 div。我基本上是通过计算父容器的高度和子 div 的高度来实现的。然后，我根据高度将子 div 绝对定位在父 div 的中心。我遇到的问题是当页面加载时，它没有设置子 div 的位置。我由此创建了一个函数，并在调整窗口大小时调用它，以便在视口更改时动态重新计算。我将如何开始在页面加载时设置此位置？

```
<div class="lead">
    <div class="message"></div>
</div>

var homepageLead = function () {
var lead = $('.lead'),
    message = $('.message'),
    lead_height = lead.height(),
    message_height = message.height(),
    lead_center = .5 * lead_height,
    message_center = .5 * message_height,
    center = (lead_center - message_center);    
message.css('bottom',center);
}
homepageLead();

$(window).resize(function () {
    homepageLead();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:13:13.880

## 试试这个小提琴：http: [//jsfiddle.net/nRRn6/](http://jsfiddle.net/nRRn6/)

## 使用的CSS：

```
html, body {
   height:100%;
}
.lead {
   width:100%;
   height:100%;
   background:red;
   position:relative;
}
.message {
   width:120px;
   height:200px;
   background:yellow;
   position:absolute;  /* <---required*/
   left:0;             /* <---required*/
   bottom:0;           /* <---required*/
} 
```

## 用过的html：

```
<div class="lead">
    <div class="message"></div>
</div> 
```

## 使用 jQuery：

```
var homepageLead = function () {
    var lead = $('.lead'),
        message = $('.message'),
        lead_height = lead.height(),
        message_height = message.height(),
        lead_center = .5 * lead_height,
        message_center = .5 * message_height,
        center = (lead_center - message_center);
    return message.css('bottom', center);
};

$(function () {
    $(window).resize(function () {
        homepageLead();
    }).resize();
}); 
```

# java - 将单个元素添加到结构数组java中时出错

> ID：14918182
> 
> 赞同：0
> 
> 时间：2013-02-17T05:10:24.623
> 
> 标签：java, arrays

我是 java 新手，在尝试将单个元素添加到结构类型数组时遇到问题。我的数组设置如下：`public apartment availableRoom[] = new apartment[1];` 我的 main 调用一个方法，该方法在应用程序启动后立即对其进行初始化：

```
availableRoom[0] = new apartment(150, 2, 200.00,null);
//this sets default values for room#, beds, price, and guest 
```

我的构造函数像这样获取信息

```
public apartment(int roomNum, int beds, double price, String guest )
    { 
        this.roomNumber = roomNum;
        this.roomBeds = beds;
        this.nightlyFee = price;
        this.roomGuest = guest;
    } 
```

我遇到问题的地方是当我试图将客人分配到房间时。我正在尝试使用`availableRoom[i].roomGuest = name` 用户输入名称并将 i 设置为 0（我检查过）。没有错误，但是当我去打印房间的信息时，它会将每个值都返回为 0，客人返回为 null。谁能看到我做错了什么？（仅供参考，公寓是与主课分开的课程）

主要的

```
public class apartmentMain {

    static apartment action = new apartment();

    public static void main(String[] args) {

        action.createApt();
        action.addGuest(); 
```

公寓.java

```
public void createApt()
    {
       availableRoom[0] = new apartment(150, 2, 200.00,null);
}

public void addGuest()
{

    name = input.next();
    availableRoom[i].roomGuest = name;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:33:38.423

好吧，正如你所说

> 没有错误，但是当我去打印房间的信息时，它会将每个值都返回为 0，客人返回为 null。

我认为，您在不同的对象中设置值并打印不同的对象。如果您只是粘贴打印其值的方式，它可能会有很大帮助。

**需要考虑的事情**

1.  由于您正在获取默认值（如果您不分配任何实例变量，则该实例变量会得到），这意味着您的数组中有一个实际的对象，它已实例化但未初始化。
2.  仔细查看您正在打印哪个对象以及您在哪个对象中设置值。
3.  很有可能在第一个索引处，以某种方式插入了一个新实例化的对象来替换原来的对象。
4.  您正在打印与原始对象不同的对象......一种可能性。
5.  您可能希望摆脱“无参数构造函数”以更好地实际看到问题。试试看。。值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:54:16.250

你的程序不完整。我举了一个小例子，你可以从中猜出你的错误。

```
public class Demo
{
   int x;
   public static void main(String args[])
   {
       Demo d[] = new Demo[2];
       d[0] = new Demo();
       d[1] = new Demo();

       d[0].x = 100;
       d[1].x = 200;

       System.out.println(d[0].x); 
       System.out.println(d[1].x); 
   }
}
Many people get wrong concept in the following code.
       Demo d[] = new Demo[2];

You think a Demo array of 2 elements (with two Demo objects) with object d is created.  
It is wrong.  Infact, two reference variables of type Demo are created.  The two    
reference variables are to be converted int objects before they are used as follows.
       d[0] = new Demo();
       d[1] = new Demo();

With the above code, d[0] and d[1] becomes objects.  Now check your code in these  
lines. 
```

[您可以从Java Reference Variables – Objects – Anonymous objects](http://way2java.com/oops-concepts/reference-variables-anonymous-objects)中找到更多详细信息

# mysql - 将记录带入表 A 不在表 B 中 左外连接

> ID：14918183
> 
> 赞同：1
> 
> 时间：2013-02-17T05:10:26.983
> 
> 标签：mysql, sql, left-join

下面的问题是在我的采访中被问到的。我不知道在这种情况下是否可以使用左外连接

```
CREATE TABLE TableA(Id INT, Name VARCHAR(255));
CREATE TABLE TableB(Id INT);

INSERT INTO TableA(Id, Name)
VALUES (1, 'Person A'),
       (2, 'Person B'),
       (3, 'Person C'),
       (4, 'Person D'),
       (5, 'Person E'),
       (6, 'Person F');

INSERT INTO TableB(Id)
VALUES (1),
       (2),
       (3); 
```

输出应该是

```
Name
Person D
Person E
Person F 
```

两个表。表 A 和表 B。我想要表 A 中不在表 B 中的名称。是否可以通过左外连接来执行此操作。我用纸和笔挣扎了几分钟，然后我在纸上写了一个查询，后来我发现错了。

注意：请不要使用子查询。我做了同样的事情，面试官让我通过左外连接来做到这一点。

让我知道它是否可能。

[SQL小提琴](http://www.sqlfiddle.com/#!2/005e9/10)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:14:26.193

听起来很容易

```
SELECT * FROM TableA a
LEFT JOIN TableB b on b.Id=a.Id
WHERE b.ID is null 
```

那应该给你表中的匹配项。诀窍是要意识到您对 B 侧的空行感兴趣。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-17T05:13:52.013

您可以使用子查询？

```
SELECT Name FROM TableA 
WHERE TableA.ID not in (SELECT TableB.ID From TableB) 
```

# command-line - 来自werl.exe的Erlang透析器？

> ID：14918186
> 
> 赞同：1
> 
> 时间：2013-02-17T05:11:09.033
> 
> 标签：command-line, erlang, dialyzer

我尝试`dialyzer --help`从 werl 命令行运行并挂起。我错过了什么吗？它是否仅适用于 dos shell（我在 XP SP3 上）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:10:27.857

可以从 Erlang shell 中运行 dialyzer（因此，我假设`werl`），但您尝试调用它的方式仅适用于 DOS shell。

请参阅[http://www.erlang.org/doc/man/dialyzer.html](http://www.erlang.org/doc/man/dialyzer.html)底部附近的**使用 Erlang 中的 Dialyzer**

```
1> dialyzer:module_info().
[{exports,[{plain_cl,0},
           {run,1},
           {gui,0},
           {gui,1},
           {plt_info,1},
           {format_warning,1},
           {format_warning,2},
           {module_info,0},
           {module_info,1}]},
 {imports,[]},
 {attributes,[{vsn,[255802808152277240424696594996505155803]}]},
 {compile,[{options,[{outdir,"/private/tmp/homebrew-erlang-R15B01-pQbu/erlang-otp-079e06a/lib/dialyzer/src/../ebin"},
                     warnings_as_errors,warn_missing_spec,warn_untyped_record,
                     warn_unused_import,warn_exported_vars,debug_info]},
           {version,"4.8"},
           {time,{2012,4,13,13,14,35}},
           {source,"/private/tmp/homebrew-erlang-R15B01-pQbu/erlang-otp-079e06a/lib/dialyzer/src/dialyzer.erl"}]}]
2> dialyzer:gui().
ok 
```

# java - 使用java读取具有utf-8编码的文本文件

> ID：14918188
> 
> 赞同：31
> 
> 时间：2013-02-17T05:11:13.957
> 
> 标签：java, netbeans, file-io, encoding

我在使用 utf-8 编码读取文本文件时遇到问题我正在使用带有 netbeans 7.2.1 平台的 java

我已经配置了java项目来处理UTF-8 javaproject==>右键==>properties==>source==>UTF-8

但仍然得到未知字符输出：���� �������� ���� �</p>

编码：

```
File fileDirs = new File("C:\\file.txt");

BufferedReader in = new BufferedReader(
new InputStreamReader(new FileInputStream(fileDirs), "UTF-8"));

String str;

while ((str = in.readLine()) != null) {
    System.out.println(str);
} 
```

还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-17T06:29:23.513

利用

```
 import java.io.BufferedReader;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.io.UnsupportedEncodingException;     
    public class test {
    public static void main(String[] args){

    try {
        File fileDir = new File("PATH_TO_FILE");

        BufferedReader in = new BufferedReader(
           new InputStreamReader(new FileInputStream(fileDir), "UTF-8"));

        String str;

        while ((str = in.readLine()) != null) {
            System.out.println(str);
        }

                in.close();
        } 
        catch (UnsupportedEncodingException e) 
        {
            System.out.println(e.getMessage());
        } 
        catch (IOException e) 
        {
            System.out.println(e.getMessage());
        }
        catch (Exception e)
        {
            System.out.println(e.getMessage());
        }
    }
} 
```

您需要将 UTF-8 放在引号中

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-29T18:47:32.357

您需要使用**Charset**参数指定**InputStreamReader的编码。**

 **```
Charset inputCharset = Charset.forName("ISO-8859-1");
InputStreamReader isr = new InputStreamReader(fis, inputCharset)); 
```

这对我来说是工作。我希望能帮助你。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-17T05:17:43.603

您正在正确读取文件，但问题似乎出在`System.out`. 试试这个来打印`UTF-8`字符串-

```
PrintStream out = new PrintStream(System.out, true, "UTF-8");
out.println(str); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-14T11:49:29.563

好的，我肯定迟到了，但如果您仍在寻找最佳解决方案，我会使用以下（对于 Java 8）

```
 Charset inputCharset = Charset.forName("ISO-8859-1");
    Path pathToFile = ....
    try (BufferedReader br = Files.newBufferedReader( pathToFile, inputCharset )) {
        ...
     } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-02T14:39:23.480

每次发现特殊字符将其标记为��时，我都会遇到同样的问题。为了解决这个问题，我尝试使用编码：ISO-8859-1

```
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("txtPath"),"ISO-8859-1"));

while ((line = br.readLine()) != null) {

} 
```

我希望这可以帮助任何看到这篇文章的人。**

# c - atof 函数的使用有什么问题？

> ID：14918189
> 
> 赞同：5
> 
> 时间：2013-02-17T05:11:26.313
> 
> 标签：c, atof

```
int main()
{
    char str[10]="3.5";
    printf("%lf",atof(str));
    return 0;
} 
```

这是我在 ideone.com 测试的一个简单代码。我得到的输出为

```
-0.371627 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T05:15:59.283

您没有包含 stdlib.h。添加适当的包括：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char str[10]="3.5";
    printf("%lf",atof(str));
    return 0;
} 
```

不包括 stdlib.h，`atof()`是隐式声明的，编译器假定它返回一个 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:13:54.493

它可能是[未定义的行为](https://stackoverflow.com/questions/4264127/correct-format-specifier-for-double-in-printf)。

# css - div 在文本插入时放错了位置，并且文本超出了 div

> ID：14918191
> 
> 赞同：1
> 
> 时间：2013-02-17T05:11:30.727
> 
> 标签：css, layout

这是问题的jsfiddle，[http://jsfiddle.net/B77G2/2/](http://jsfiddle.net/B77G2/2/)

问题是，当我将文本放入 div 时，div 会向下移动（jsfiddle 中带有 home id 的 div 中有文本，您可以删除 t## e 文本以查看它是否正常工作）。如果 div 中没有文本，它看起来很好并且与其他 div 一致，就像它应该的那样。

即使我使用自动换行，文本也会从 div 中删除。

为什么会发生这种情况，我该如何解决？

为了在 jsfiddle 中显示，一切都被缩小了，我希望我的问题很清楚。

这是html

```
<div id="container">
        <div class="fade" id="fade1" onclick="slide('prev')"><</div>
        <div class="fade" id="fade2" onclick="slide('next')">></div>

        <div id="sliding-container">
            <div class="slide leftmost" id="followme">
            </div>

            <div class="slide left" id="projects">

            </div>

            <div class="slide current" id="home">
                <p>Y u do dis :( fjsdahkfjdhsjfhdkjfsdjhfjsk djskfhdjfurt</p> // <---- the div thats being shown in the middle
            </div>

            <div class="slide right" id="knowledge">

            </div>

            <div class="slide rightmost" id="contact">

            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T06:41:30.363

好像是个`vertical-align`问题。尝试明确设置：

```
.slide { vertical-align:top; } 
```

[**小提琴**](http://jsfiddle.net/B77G2/3/)

浏览器有一个稍微复杂的算法来计算浮动元素或显示的`baseline`（默认值） 。给它一个明确的值通常可以解决这个问题。`vertical-align``inline-block``top`

* * *

哦，我差点忘了补充为什么线路没有断线。很简单：Your`white-space:nowrap`被继承给后代元素，它强制文本在一行中。您所要做的就是在到达需要的文本内容之前将其重置`word-wrap`，因此：

```
.slide { white-space: normal; word-wrap: break-word; } 
```

[**小提琴**](http://jsfiddle.net/B77G2/7/)

* * *

对于`vertical-align`解释，它有点复杂，这是默认值的[规范](http://dev.w3.org/csswg/css3-linebox/#vertical-align)`vertical-align`- `baseline`：

> 将元素的“字母”基线与父元素的“字母”基线对齐。如果内联元素没有“字母”基线，则将框的底部（包括替换元素的边距）与父元素的“字母”基线对齐。如果没有父元素或该元素与其父元素之间的流向发生变化，则将主导基线设置为“字母顺序”，否则将其设置为“无变化”。

最好用一个例子来解释。打开这个[小提琴](http://jsfiddle.net/B77G2/4/)。我在幻灯片之间添加了一些文本，代表父母的字母`baseline`。是这张`baseline`图片中的红线：

![在此处输入图像描述](../Images/b5563f5d9f8a6ee48309e24c36983f87.png)

如您所见，当子元素具有字母基线时，父元素和子字母基线都按照规范的第一行对齐：“将元素的'字母'基线与父元素的'字母'基线对齐。”

其他同级幻灯片没有任何非空/仅限空白的 TextNode，因此它们没有要对齐的字母基线，并且规范的第二条语句开始：“如果内联元素没有 '字母'基线，对齐框的底部，包括其边距与父级的'字母'基线。”

# javascript - 我如何将这些放在同一行？

> ID：14918195
> 
> 赞同：3
> 
> 时间：2013-02-17T05:12:31.003
> 
> 标签：javascript, jquery, css

这是一个愚蠢的问题，我会给你的。对于我的生活，我无法弄清楚如何对齐文本和我的颜色选择器。我如何让所有东西都在一条线上，而不是现在的两条线上。看[我的小提琴](http://jsfiddle.net/C7hAY/3/)。我试过摆脱 display:block 和 clear:both 但这似乎没有用。这是我的代码：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Default functionality</title>
<script src="http://code.jquery.com/jquery-1.8.1.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<link href="http://evoluteur.github.com/colorpicker/css/evol.colorpicker.css" rel="stylesheet" /> 
<script src="http://evoluteur.github.com/colorpicker/js/evol.colorpicker.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
    $("#color_picker").colorpicker();
});

</script>
</head>
<body>
    <span>Select a color: <input id="color_picker" value="#92cddc"/></span>
</body>
</html> 
```

请查看我的 css 和 js 小提琴（我不想通过在此处发布所有内容来混淆所有内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:20:06.563

## 尝试使用这种方式：http: [//jsfiddle.net/C7hAY/6/](http://jsfiddle.net/C7hAY/6/)

## html:

```
<span style='display:block; width:320px;'>
  Select a color: <input id="color_picker" value="#92cddc"/>
</span> 
```

## jQuery：

```
$(document).ready(function(){
    $("#color_picker").colorpicker();
    $("#color_picker").parent().css('float','right');
}); 
```

虽然我建议你用`css`.

那里发生什么了：

当您将颜色选择器绑定到输入元素`jQuery wraps it with div`时，如果您不设置该 div 的样式，`will always be in the second line`则`i styled it dynamically with use of jQuery`使用`.parent()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:25:40.637

这是最简单的解决方案：

```
$("span > div").css("display","inline-block"); 
```

**演示：http:** [//jsfiddle.net/C7hAY/12/](http://jsfiddle.net/C7hAY/12/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T05:26:47.080

**问题：**

当您创建颜色选择器时，它会将您的`<input>`元素包装在`div`. 生成的代码将如下所示：

```
<span>Select a color: 
    <div style="width:181px;">
        <input id="color_picker" value="#92cddc" class="colorPicker evo-cp0">
        <div class="evo-colorind" style="background-color:#92cddc"></div>
    </div>
</span> 
```

这就是为什么那里有一个换行符。

**解决方案：** [**现场演示**](http://jsfiddle.net/eUeey/)

只需将样式设置`div`为`display:inline-block;`.

代码：

```
$(document).ready(function(){
    $("#color_picker").colorpicker();

    $("#color_picker").parent().css("display", "inline-block");
}); 
```

# css - 了解 CSS 背景属性

> ID：14918199
> 
> 赞同：-2
> 
> 时间：2013-02-17T05:13:24.260
> 
> 标签：css, background-image

我遇到了某个网站用于实现全屏背景图像的这段 CSS：-

```
html {
background: url(../images/bgrnd.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
color:#ffffff;
} 
```

我查看了所有属性并浏览了 w3schools.com 上的所有背景属性，除了一个之外，我理解了所有内容。*center*参数重复了两次，我不明白为什么，也不明白它属于哪个属性。是用于*背景位置*属性吗？？？但是，我猜只有一个*中心......嗯......所以？*我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:15:12.843

一个中心用于水平对齐，另一个用于垂直对齐（按此顺序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:17:33.900

X 和 Y 坐标。第一个“中心”与“X”相关，第二个与“Y”相关。而且，是的，它与背景位置有关

# linux - 发送 AT 命令时来自 dev/ttyUSB 的无休止数据循环

> ID：14918202
> 
> 赞同：1
> 
> 时间：2013-02-17T05:14:11.597
> 
> 标签：linux, terminal, serial-port, usb, modem

我在向我的 USB 调制解调器发送 AT 命令时遇到问题。起初我尝试了 php-serial 类，但是当我读取数据时，我得到了无限循环和奇怪的数据。然后我尝试调试问题并打开腻子终端，发出命令

```
cat /dev/ttyUSB0 
```

然后发送命令`echo "AT" > /dev/ttyUSB0`之后我总是从 cat /dev/ttyUSB0 得到永无止境的循环，如下所示：

```
AT
AT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^JAT^ 
```

这个循环永远不会结束。在 Windows 上一切正常。我可以通过虚拟 COM 端口连接到 USB 调制解调器并发送命令/获取答案。

问题是为什么我不能从控制台收到“OK”消息，但我得到了这个数据循环而不是这个？

尝试了不同的华为 USB 调制解调器，以及不同的 stty 设置以及华为调制解调器的默认设置：

```
Baud rate: 9600 / 115200
Parity: none
Data bits = 8
Stop bits = 1
Flow control = none 
```

# plugins - 我可以为 Windows 8“人物”应用程序编写插件吗？

> ID：14918203
> 
> 赞同：0
> 
> 时间：2013-02-17T05:14:11.757
> 
> 标签：plugins, windows-8, contacts

当我在 Windows 8“人物”应用程序中查看联系人时，会显示许多不同的选项，具体取决于可用的数据。

![联系示例](../Images/39c3f83084463f004802d3534fe2b510.png)

其中一些是内置函数，但也有一些调用外部程序，例如映射地址或链接到 facebook。

这个应用程序是否可扩展，因为我可以编写一个插件来在此页面上放置另一个选项，以链接到我自己的应用程序或网站以及附加的联系数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:44:46.670

截至今天，内置应用程序（如人脉应用程序）不可扩展。

# python - 如何为我的应用重建索引？

> ID：14918206
> 
> 赞同：0
> 
> 时间：2013-02-17T05:15:58.253
> 
> 标签：python, google-app-engine, python-2.7, indexing, google-search-api

我正在构建看起来像这样工作的索引

```
 doc = search.Document(doc_id=str(article.key()), fields=[
        search.TextField(name='title', value=article.title),
        search.TextField(name='text', value=article.text),
        search.TextField(name='city', value=article.city),
        search.TextField(name='region', value=article.region),
        search.NumberField(name='cityID', value=city_entity.key().id()),
        search.NumberField(name='regionID', value=region_entity.key().id()),
        search.NumberField(name='category', value=int(article.category)),
        search.NumberField(name='constant', value=1),
        search.NumberField(name='articleID', value=article.key().id()),
        search.TextField(name='name', value=article.name)
        ], language='en')
    search.Index(name='article').add(doc) 
```

该应用程序获得了一篇新文章，该文章通过上面似乎有效的代码填充了索引。索引已建立，我可以使用搜索 API 搜索实体。但是我不想要超过 60 天的旧文章，那么我该如何调整呢？实体有一个“创建”和“更新”时间戳：

```
added = db.DateTimeProperty(verbose_name='added', auto_now_add=True)  # readonly
modified = db.DateTimeProperty(verbose_name='modified',
                                   auto_now_add=True) 
```

我应该每 24 小时有一个 cron 作业来重建整个索引，还是每 24 小时有一个 cron 作业从索引中删除最旧的实体？现在我没有将`added`and`modified`变量添加到索引中，这在索引中也很有用，如果我想在索引中搜索某个时间戳（？），所以现在我看到它正在工作，我问我是否也多作用于索引变量并将`added`和`modified`变量添加到索引中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:12:56.210

索引是自动连续构建的，您无法控制此过程。当实体更改（或创建/删除）时，索引会更新。没有办法将某些实体排除在外。

如果您根本不需要旧文件，那么您应该删除它们。

但是在这两种情况下（服务或删除），您都需要使用多个相等过滤器（on `title`、`text`、`city`等）和一个不等过滤器（on `created`），因此您需要[配置一个复合索引](https://developers.google.com/appengine/docs/python/datastore/indexes#Index_Configuration)。

# .htaccess - 我们可以使用 httpd.conf 而不是 .htaccess 作为干净的 URL 吗？

> ID：14918208
> 
> 赞同：0
> 
> 时间：2013-02-17T05:16:10.097
> 
> 标签：.htaccess, apache, httpd.conf, clean-urls

我已经读过，与在 .htaccess 中进行更改相比，httpd.conf 中的设置更改要好得多，因为后者是在运行时解析的，而 .conf 是在启动 Apache 时解析的。那么，是否有可能在 httpd.conf 中拥有所有 .htaccess 功能，或者仅在 .htaccess 中必须完成一些事情。

另外，你能建议如何调试干净的 URL 问题吗？

基本上，我无法让干净的 URL 正常工作。我可以访问 show.php 文件，但无法访问 GET 变量。这是 .conf 设置。

```
RewriteEngine On
RewriteCond %{HTTP_HOST}   !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/show/([^/\.]+)/([^/\.]+)         http://www.example.com/show.php?id=$1&img=$2 [L,R] 
```

我还添加了

```
Options Indexes MultiViews FollowSymlinks
AllowOverride All 
```

在`<Directory "/var/www/html">`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:19:21.213

正如 .htaccess 的[Apache 手册](http://httpd.apache.org/docs/2.2/howto/htaccess.html)中所述，您可以放入 .htaccess 文件中的任何内容都可以放入`<Directory>`块内`httpd.conf`以提高效率。

至于重写 URL 的问题，您的第一个`RewriteCond`似乎只是匹配不匹配的 URL `www.example.com`（`!`前面是否定修饰符）。删除`!`并查看是否可以解决问题。（您可能也应该删除第二个`RewriteCond`，直到您匹配第一个；否则，调试问题将更加困难。）

# ios - GPUImage CannyEdgeDetectionFilter 带有白边？

> ID：14918212
> 
> 赞同：0
> 
> 时间：2013-02-17T05:17:15.823
> 
> 标签：ios, filter, edge-detection, gpuimage

我正在使用 Git 存储库中的 GPUImage 将一些过滤器应用于图像。我注意到边缘检测过滤器（我专门使用 CannyEdgeDetectionFilter）在黑色背景上绘制白色边缘。任何人都知道如何在白色背景上制作黑色边缘 - 或另一个可以做到的过滤器（并且不是重量级的，因为这是我需要从该库中获得的唯一过滤器）。

谢谢托尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:18:19.207

GPUImageColorInvertFilter 可与 GPUImage 一起使用，并且应该可以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:29:43.687

正如加勒特建议的那样，您可以简单地反转该过滤器的颜色以获得您想要的结果。但是，这将在链中引入另一个过滤器，并可能减慢速度。

您可以使用 GPUImageSketchFilter 获得 Sobel 边缘检测滤波器的倒数。两个过滤器之间的唯一区别是片段着色器的倒数第二行，其中返回的颜色是 1.0 减去边缘强度，而不仅仅是边缘强度。

在这里可以对 Canny 边缘检测执行相同的操作，只是您需要将 GPUImageWeakPixelInclusionFilter 替换为在其着色器中的最后一行具有以下内容的内容：

```
 gl_FragColor = vec4(vec3(1.0 - sumTest * pixelTest), 1.0); 
```

您可以复制并粘贴此过滤器的所有其余代码以及 Canny 边缘检测过滤器的所有代码，然后只需更改 Canny 过滤器以使用您的自定义过滤器类而不是 GPUImageWeakPixelInclusionFilter 并提供您的自定义 Canny 边缘检测你自己的名字。

关于使用 Canny 边缘检测过滤器的一个警告：它执行整个四步 Canny 过程，因此它比 Sobel 边缘检测过滤器使用更多内存要慢得多。您可以使用阈值边缘检测过滤器之一以更低的成本获得 Canny 结果的合理近似值。

# javascript - 与字符串比较

> ID：14918216
> 
> 赞同：1
> 
> 时间：2013-02-17T05:17:48.377
> 
> 标签：javascript

我有一些 JavaScript 代码可以根据 Ajax 请求的响应对象中的各种因素创建不同的消息。例如

```
if (response.correct_guess === true){
    message = "your guess was correct
 } 
```

如果用户赢得游戏，'won' 键设置为 'won'

```
won: "won" 
```

因此我希望像这样设置消息

```
else if(response.won === "won") {
          message = "You finished with" + response.seconds + "left on the clock." 
```

然而，这个“else if”并没有被触发

我也试过“==”（即两个等号而不是三个）。你能解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:51:24.367

你的代码是什么意思：

```
if (response.correct_guess === true){
    message = "your guess was correct

}else if(response.won === "won") {
      message = "You finished with" + response.seconds + "left on the clock."
} 
```

*如果*猜对了，`message = "your guess was correct`，就是这样。如果猜测不正确，并且如果用户赢了，`message = "You finished with" + response.seconds + "left on the clock."`

你忘记了，如果控制进入第一个 if，它永远不会到达第二个 else if。在 if-elseif 链中，第一个 if/elseif 块控件进入是它*唯一*会进入的。我不认为你想要那个。你可能想要：

```
if (response.correct_guess === true){
    message = "your guess was correct

}
if(response.won === "won") {
      message = "You finished with" + response.seconds + "left on the clock."
} 
```

# php - 限制 foreach 输出 4 个结果

> ID：14918220
> 
> 赞同：1
> 
> 时间：2013-02-17T05:18:32.693
> 
> 标签：php, foreach

有人请帮助将以下 foreach 代码限制为仅按 desc 顺序输出 4 个结果。非常感谢！

```
foreach( $users_who_like as $id ) :

if ( $id != $user_id )
$output .= ' &middot <a href="' . bp_core_get_user_domain( $id ) . '" title="' . bp_core_get_user_displayname( $id ) . '">' . bp_core_get_user_displayname( $id ) . '</a>';

endforeach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:10:05.853

```
#delete $user_id from array $users_who_like , we would not compare it any times

$users_list = array_diff($users_who_like,array($user_id));

#sort the array 

rsort($users_list);

#set the limit we want to show

$limit = 4;

#use for better than foreach 

for($i=0;$i<$limit;$i++){
    $id = $users_list[$i];

    #do sometings

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:28:06.593

您可以使用`count`并检查它是否`4` 是这样的

```
$count = 4; 

foreach( $users_who_like as $id ){

if ( $id != $user_id )
$output .= ' &middot <a href="' . bp_core_get_user_domain( $id ) . '" title="'.bp_core_get_user_displayname( $id ) . '">' . bp_core_get_user_displayname( $id ) .'</a>';

 if(count <=0)
 break; //will break if statement and foreach

 $count--; // reduce it by one

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T05:27:53.557

您需要在从数据库中选择数据时进行。
用于`ODER BY ... DESC`订购、`LIMIT`限制和`WHERE`过滤当前用户。

# android-layout - 在android中使用不同的活动访问单个xml文件

> ID：14918222
> 
> 赞同：1
> 
> 时间：2013-02-17T05:19:02.507
> 
> 标签：android-layout, android-intent

现在我开发了一个多人（在单个设备中）游戏和倒计时计时器。游戏有 1 个 Activity 和 1 个 xml，倒数计时器也有 1 个 Activity 和 1 个 xml。我想在游戏中添加计时器，在新项目中我设计了一个包含游戏板和计时器的新 xml 文件。如何使用游戏活动和倒数计时器活动访问这个单个 xml 文件？

# java - Android Manifest 仅支持移动设备屏幕

> ID：14918226
> 
> 赞同：2
> 
> 时间：2013-02-17T05:20:03.340
> 
> 标签：java, android, google-play

我在处理`<supports-screens>`Android 清单中的标签时遇到问题。我有 2 个用于同一应用程序的 APK，一个用于平板电脑设备，另一个用于所有其他设备。我的意思是从 7 英寸到 10 英寸的平板设备。我使用 versionCode 3 成功发布了平板电脑的 APK，它仅通过以下标签出现在平板电脑上

```
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="600"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

现在，我正在尝试通过以下方式上传版本代码为 4 的移动设备的 APK

```
 <supports-screens
    android:largeScreens="true"
    android:largestWidthLimitDp="590"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

但是上传AP​​K后我一直收到以下错误

![在此处输入图像描述](../Images/2542fda8c4a3b0d7de6a2324f14cd38b.png)

请记住，根据以下 Android 文档，大屏幕可以是平板电脑或手持设备：

![在此处输入图像描述](../Images/f295e5840ba437c1d8daded15f432a38.png)

请问有人可以帮忙吗？

# unix - Unix：链接命令

> ID：14918229
> 
> 赞同：2
> 
> 时间：2013-02-17T05:20:15.933
> 
> 标签：unix, cd, chain

我知道';' 相当于命令行中的“输入”。但是我有这种情况。

我的目录具有以下配置：目录 A 包含目录 B 和 C。当前在目录 B 中。我执行以下操作：

> > 光盘../

当然，这会把我带到 A。然后我做：

> > CDC

这把我带到了C。

但是，如果我链接这两个命令，再次从 B 开始：

> > (cd ../ ; cd C)

我还留在B。怎么了？为什么不带我去C？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T05:24:49.430

执行时启动的进程`( cd ../; cd C)`有自己的环境，因此也有自己的当前工作目录。这在下面可以证明：

```
dogface@computer ~/A/B
$ ( cd .. ; pwd ; cd C; pwd )
/home/dogface/A
/home/dogface/A/C

dogface@computer ~/A/B
$ pwd
/home/dogface/A/B 
```

现在尝试不使用 '(' 和 ')' ...

```
dogface@computer ~/A/B
$ cd .. ; cd C

dogface@computer ~/A/C
$ pwd
/home/dogface/A/C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T05:22:28.483

尝试这样做：

```
cd .. && cd C 
```

或者，如果您删除括号，您的原始命令应该可以工作：

```
cd ../ ; cd C 
```

括号会导致命令在子 shell 中执行，这就是您看不到目录更改的原因。有关更多详细信息，请参见[此处](https://unix.stackexchange.com/questions/26063/how-are-parenthesis-interpreted-at-the-command-line)。

# windows - 第一个宏汇编程序，无法计算我们未处理的异常

> ID：14918231
> 
> 赞同：0
> 
> 时间：2013-02-17T05:21:41.803
> 
> 标签：windows, assembly, x86

这是我在 masm32 中的第一个汇编程序。使用 vis studio 2012。这只是程序中将输入转换为具有十进制、十六进制和 ascii 输出的 ascii 图表的一个过程。我已经尝试了 8 个小时来解决这个问题，我知道这将是一件非常简单的事情。它完成了所有的计算，但是在弹出和返回阶段它在访问 EIP 时崩溃到一个未处理的异常（我认为）。此外，我所有的寄存器都设置为 0，除了 ebx，我不知道为什么，但这可能与它有关。

*这只是将输入字符串转换为十进制值的过程。**

我的 inputStr 是：

```
inputStr   db  16  DUP(0) 

.code
main proc

   xor      eax, eax
   xor      ebx, ebx
   xor      ecx, ecx
   xor      edx, edx

   lea      esi, outputStr1
   call     PrintString
   lea      esi, inputStr
   call     GetString
   call     StrtoNum

   invoke ExitProcess, 0        ;****This is the next line when it crashes***   
main endp

StrtoNum proc  ;going to hex first
    pushad
    pushfd
    mov     bl, 1        ;mov 1 into bl for later multiplying

whilemorechar:
    mov     al,byte ptr [esi]
    cmp     al, 0       ;stuff
    je      ConvertDone      ;if null then we are done here
       ;esi is pointing to the string to be converted
    ;cmp bl,0
    ;jnz decrement
    cmp     al, 0h
    je      ConvertDec
    sub     al, 30h     ;get first string byte to dec number 0-9
    push    ax         ;push last digit to stack
    inc     esi         ;gets to next string byte
    inc     cl          ;make note of decimal position in string
    jmp     whilemorechar      ;jump for next place in string

ConvertDec:             ;reverse is done, now turn into decimal number
    cmp     cl, 0           ;compare counter to 0
    jz      ConvertDone      ;if counter is 0, start comparing numbers
    pop     ax                  ;pop last on stack
    mul     bl                  ;multiply place value by input byte
    add     dx, ax              ;add decimal value into dl
    mov     al, 10d             ;move 10 into al
    mul     bx                  ;multiply 10 and bl value to get next
    mov     bx, ax              ;mov decimal place into bl for next loop 
    dec     cl                  ;decrement counter
    jmp     ConvertDec          ;loop through again for next decimal place

ConvertDone:    
    mov     ebx, 0  
    popfd                   ;pop flags
    popad                   ;pop registers
    ret                     ;return to caller
StrtoNum endp 
```

# php - 条件更新记录 Codeigniter

> ID：14918232
> 
> 赞同：0
> 
> 时间：2013-02-17T05:21:43.840
> 
> 标签：php, codeigniter, if-statement, sql-update

我想问一下是否可以为`UPDATE`. 首先我有两张桌子。

**`billing_records`**：

```
brecord_id (PK)
date_billed
monthly_rent
water
electricity
total_payable
status (paid/unpaid) 
```

**`payment_records`**

```
payment_id (PK)
date
type_payment (cash/cheque/on_bank)
amount_payable
change
balance
cheque_number
bank_number
brecord_id (FK) 
```

我希望代码在数据库中插入记录期间像这样：

```
IF balance==0 
     UPDATE status to 'paid' from billing_records TABLE
else
     UPDATE total_payable(of billing_records) = balance(of payment_records) 
```

在提交按钮期间，我有两个动作要做，将数据插入`payment_records`和`UPDATE billing_records`。我在付款记录中插入数据没有问题，*只*更新了 billing_records。

我的控制器上的这条线有问题

```
//  4\. call model to save input to database table

$this->m_account_statement->insertPayableRecords($data);

$this->m_account_statement->changeStatusToPaid($brecord_id); 
```

这是我的代码：

控制器：

```
public function managePayment($brecord_id=0){

    if($this->_submit_validate_payment($this->input->post('type_payment'))===FALSE){

        $row = $this->m_account_statement->payableRecord($brecord_id);

        $data['amountPayable'] = $row->result();
        $data['brecord_id'] = $brecord_id;

        return $this->load->view('admin/vrecord_payment',$data);

    } else {

        // 2\. get the inputs    

        $data['payment_id'] = $this->input->post('payment_id');
        $data['amount_payable'] = $this->input->post('amount_payable');
        $data['amount_received'] = $this->input->post('amount_received');
        $data['type_payment'] = $this->input->post('type_payment');
        $data['cheque_number'] = $this->input->post('cheque_number');
        $data['bank_number'] = $this->input->post('bank_number');           
        $data['balance'] = $this->input->post('balance');       
        $data['change'] = $this->input->post('change');
        $data['brecord_id'] = $this->input->post('brecord_id');
        $data['date'] = $this->input->post('date_transaction');     

        //  4\. call model to save input to database table

        $this->m_account_statement->insertPayableRecords($data);

        $this->m_account_statement->changeStatusToPaid($brecord_id);

        //  5\. confirmation of registration

        $this->session->set_flashdata('message',' Successfully Record Payment');

        redirect('caccount_statement/displayTenants');

    }
} 
```

模型：

```
public function changeStatusToPaid($billing_id)
{
    $this->db->query("UPDATE billing_record SET status = 'paid' WHERE brecord_id = $billing_id");
}

public function insertPayableRecords ($data){

    if($this->db->insert('payment_record', $data)){
        return TRUE;
    }

    return FALSE;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:50:19.197

```
public function managePayment($brecord_id=0){
    //check if id is present or not like this:
    if ($brecord_id > 0) {//Update
        // ... put your update code ...
    } else { //Add
        // ... put your add code ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:39:10.680

可以设置一个可以使用此流程的条件。

```
if balance==0 

//then fetch a record for status
//means run a query to get status

//now update

else 
// select some different values for update  
// now update query with fetched values 
```

# ios - 通过上传 zip 文件使用 iTunes Connect 将 iOS 应用程序提交到应用程序商店仍然有效吗？

> ID：14918236
> 
> 赞同：1
> 
> 时间：2013-02-17T05:22:03.327
> 
> 标签：ios, app-store

我们已经完成了项目并使用我们客户的分发配置文件和证书创建了 .xcarchive 文件代码签名。我们的客户没有在他们的计算机上安装 Xcode，也没有任何人精通 Xcode。有没有其他方法可以在不使用 Xcode 的情况下提交到应用商店？像旧方式一样 - 使用 iTunes Connect 并上传 zip 文件？如果是，我们如何创建 zip 文件？

提前致谢！

aobs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:28:46.160

在 iTunes Connect 中上传 zip 文件已经有一段时间了。

除了使用 Xcode，另一个选择是使用 Application Loader 应用程序。登录 iTunes 连接。单击管理您的应用程序。单击下载应用程序加载程序链接。还有一个用户指南的链接。

# javascript - jqplot 仪表问题：c.jqplot 未定义？

> ID：14918237
> 
> 赞同：1
> 
> 时间：2013-02-17T05:22:06.223
> 
> 标签：javascript, jquery, jqplot

有人经历过吗？我是新手，所以我不确定这里到底发生了什么。但是我正在尝试根据文档使用 jqplot 的仪表，但它似乎不起作用。我可以很好地创建条形图、折线图等图表。

包括必要的脚本链接（以及其他需要的）：

```
<script type="text/javascript" src="../plugins/jqplot.meterGaugeRenderer.min.js"></script> 
```

标记

```
<div id='chart6'></div> 
```

js

```
$(document).ready(function () {

    plot6 = $.jqplot('chart6', [[18]], {
        title: 'Network Speed',
        seriesDefaults: {
            renderer: $.jqplot.MeterGaugeRenderer,
            rendererOptions: {
                label: 'MB/s'
            }
        }
    });
}); 
```

萤火虫 说：

TypeError: c.jqplot 未定义 - 在meterGaugeRender js 文件中。

任何帮助将一如既往地不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:46:41.697

看起来您没有包含基本的 jqPlot 库，只是添加了仪表。

# actionscript-3 - As3 中的键盘事件

> ID：14918238
> 
> 赞同：0
> 
> 时间：2013-02-17T05:22:27.473
> 
> 标签：actionscript-3, keyboard

好的，所以我是一个完全的菜鸟。我想用任何键盘按钮在 as3 中推进一个场景。这是我的代码，你能帮我吗？

```
import flash.events.Event;
stage.addEventListener(MouseEvent.CLICK, startGame);
addEventListener(Event.ENTER_FRAME, asteroidMovement);
stage.addEventListener(KeyboardEvent.KEY_DOWN, startGameWithKeys);

stop();

function startGameWithKeys(e:KeyboardEvent){
    removeEventListener(Event.ENTER_FRAME, asteroidMovement);
    stage.removeEventListener(MouseEvent.CLICK, startGame);
    gotoAndStop(1, "Scene 2");
}

function startGame(e:MouseEvent)
{
    removeEventListener(Event.ENTER_FRAME, asteroidMovement);
    stage.removeEventListener(MouseEvent.CLICK, startGame);
    gotoAndStop(1, "Scene 2");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:10:10.233

无需为类似的操作创建两个函数，使用以下代码，

跳到现场陈述也是完美的。

```
 function startGame(e:Event):void
 {
     //Put your code here
     trace(e.type);

     gotoAndStop(1, "Scene 2");
 }

 stage.addEventListener(MouseEvent.CLICK, startGame, false, 0, true);
 stage.addEventListener(KeyboardEvent.KEY_DOWN, startGame, false, 0, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:42:30.473

您的侦听器代码很好，只要您按任意键，它就应该调度。您的场景可能命名不正确。

无论如何，请始终尽量避免使用闪光灯中的场景。如果框架能让您在 Flash IDE 中工作感觉更舒服，请使用框架，但始终避免使用场景。下一步应该使用像 FlashBuilder 这样的开发 IDE 并避免使用时间线代码 :)

# perl - 我需要 perl 的帮助，如何编写代码以哈希的形式获取我的 csv 文件的输出

> ID：14918240
> 
> 赞同：-1
> 
> 时间：2013-02-17T05:22:32.833
> 
> 标签：perl

我需要**perl**方面的帮助，如何编写代码以**散列形式获取 csv 文件的输出。** 输出应该看起来像一个哈希，不需要为输出创建一个哈希，它可以使用数组来完成，这样我就可以格式化我的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:41:54.817

使用提供方法[getline_hr的](https://metacpan.org/module/Text%3a%3aCSV#getline_hr)[Text::CSV](https://metacpan.org/module/Text%3a%3aCSV)。此方法不*返回*整个 CSV 文件，它只返回行的哈希。如果您想要一个包含整个 csv 的哈希值，如何索引它取决于您。

 *```
use Text::CSV;

my $csv = Text::CSV->new;

$csv->column_names( qw/ id col1 col2 / );

while ( not $csv->eof ) {

  my $row = $csv->getline_hr($fh);

  if ( $csv->error_diag ) {
    last if $csv->eof;
    my ( $err, $text ) = $csv->error_diag;
    die $err, $text;
    $csv->SetDiag(0);
    next;
  }

  use Data::Dumper;
  print Dumper $row;

} 
```

您必须将该行添加到哈希数据库中，

```
my %hashdb;
while ( not $csv->eof ) {

  my $row = $csv->getline_hr($fh);

  $hashdb{$row->{id}} = $row;

   ... 
```*

# xslt - XSLT 有点困惑

> ID：14918241
> 
> 赞同：2
> 
> 时间：2013-02-17T05:22:34.820
> 
> 标签：xslt

XSLT 有点麻烦.. 我想我可能完全走错了路.. 试图在一行中显示带有特殊 1 状态的项目的 SKU 的客户名称......然后是带有特殊 2 的客户项目等然后是第 2 部分（我还没有开始）没有状态的项目本身

所以对于这个 XML 文件，输出将是

```
Joe prod1 //special1
Joe prod3 //special2
Joe prod2 //no status
Joe prod4 //no status
Joe prod5 //no status
John Smith prod6 prod8 //special1
John Smith prod7 //no status
John Smith prod9 //no status
John Smith prod10 //no status 
```

目前它有点工作，但问题是如果没有 special1 或 special2 我无法弄清楚如何让它不打印客户名称..

而且我也不确定如何显示没有状态的那些 - 任何帮助将不胜感激！

XML:

```
<customer>
<name>Joe</name>
<order>
    <item>
      <SKU>prod1</SKU>
      <status>special1</status>
    </item>
    <item>
      <SKU>prod2</SKU>
    </item>
    <item>
      <SKU>prod3</SKU>
      <status>special2</status>
    </item>
    <item>
      <SKU>prod4</SKU>
    </item>
    <item>
      <SKU>prod5</SKU>
    </item>
</order>
 </customer>
 <customer
<name>John Smith</name>
<order>
    <item>
      <SKU>prod6</SKU>
      <status>special1</status>
    </item>
    <item>
      <SKU>prod7</SKU>
    </item>
    <item>
      <SKU>prod8</SKU>  
      <status>special1</status>
    </item>
    <item>
     <SKU>prod9</SKU>
</item>
    <item>
      <SKU>prod10</SKU>
    </item>
</order> 
```

XSLT：

```
<!DOCTYPE xsl:stylesheet[ <!ENTITY nl "&#xd;&#xa;"> ]> 
```

```
<xsl:template match="customer">
    <xsl:value-of select="name" /><xsl:apply-templates select="order/item[status='special1']" /><xsl:text>&nl;</xsl:text>
    <xsl:value-of select="name" /><xsl:apply-templates select="order/item[status='special2']" /><xsl:text>&nl;</xsl:text>
</xsl:template>

<xsl:template match="item[status='special1']"><xsl:text> </xsl:text><xsl:value-of select="SKU" /></xsl:template>
<xsl:template match="item[status=special2']"><xsl:text> </xsl:text><xsl:value-of select="SKU" /></xsl:template>

<xsl:template match="text()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:13:46.860

我假设您事先不知道不同状态的集合。因此，如果您不希望您的 XML 可维护（无需在每次添加不同状态时更改它），您可以使用以下解决方案：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" />

    <!-- Use the following key for grouping -->
    <xsl:key name="status-key"
             match="item"
             use="status" />

    <!-- Cache the following operation to avoid doing it several times in the future.
         You can improve performance by changing // to a fixed path in your XML where
         all the items are (e.g. /customers/customer/order/item)  -->
    <xsl:variable name="item-group"
                  select="//item[generate-id(.) = generate-id(key('status-key', status)[1])]" />

    <xsl:template match="customer">

        <!-- Obtain the following values before losing the current context -->
        <xsl:variable name="current-id" select="generate-id(.)" />
        <xsl:variable name="current-name" select="name" />

        <!-- Display the products with a status defined -->
        <xsl:for-each select="$item-group">
            <!-- Obtain list of status for this costumer -->
            <xsl:variable name="customer-status"
                          select="key('status-key', status)[generate-id(../..) = $current-id]" />
            <!-- Print the status information if the costumer has at least one status -->
            <xsl:if test="$customer-status">
                <!-- Display the name of the costumer -->
                <xsl:value-of select="$current-name" />
                <!-- Group the product by status -->
                <xsl:for-each select="$customer-status">
                    <xsl:value-of select="concat(' ', SKU)" />
                </xsl:for-each>
                <!-- Output the status -->
                <xsl:value-of select="concat(' //', status, '&#xa;')" />
            </xsl:if>
        </xsl:for-each>

        <!-- Display the prodcuts without status -->
        <xsl:for-each select="order/item[not(status)]">
            <xsl:value-of select="concat($current-name, ' ', SKU, ' //no-status&#xa;')" />
        </xsl:for-each>

    </xsl:template>

    <xsl:template match="text()" />

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:31:26.417

这是一个“分组”问题的例子。您正在尝试按客户和状态的组合对项目进行分组。解决此问题的方法因您使用的是 XSLT 1.0 还是 XSLT 2.0 而异。在 XSLT 1.0 中，您将使用一种称为 Muenchian Grouping 的技术。您首先定义一个键来保存您正在分组的节点。在这种情况下，您按**客户**和**项目分组**

```
<xsl:key name="items" match="item" use="concat(generate-id(../..), '|', status)" /> 
```

然后，对于您匹配的每个**客户**元素，您将获得每个**项目的不同****状态**元素，如下所示：

 **```
<xsl:apply-templates select="order/item
    [status != '']
    [generate-id() = generate-id(key('items', concat(generate-id(../..), '|', status))[1])]" /> 
```

本质上，这样做是查看客户的每个**项目**并选择在您为状态元素定义的键中首先出现的项目。

然后，在匹配具有状态的项目的模板中，您可以获取具有相同状态的单个项目，如下所示：

```
<xsl:apply-templates select="key('items', concat(generate-id(../..), '|', status))/SKU" /> 
```

选择没有状态的项目要容易得多

```
<xsl:apply-templates select="order/item[not(status != '')]" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>
   <xsl:key name="items" match="item" use="concat(generate-id(../..), '|', status)" />

   <xsl:template match="customer">
      <xsl:apply-templates select="order/item[status != ''][generate-id() = generate-id(key('items', concat(generate-id(../..), '|', status))[1])]" />
      <xsl:apply-templates select="order/item[not(status != '')]" />
   </xsl:template>

   <xsl:template match="item[status !='']">
      <xsl:value-of select="../../name" />
      <xsl:apply-templates select="key('items', concat(generate-id(../..), '|', status))/SKU" />
      <xsl:value-of select="concat(' //', status, '&#13;')" />
   </xsl:template>

   <xsl:template match="item">
      <xsl:value-of select="concat(../../name, ' ', SKU, ' // no status&#13;')" />
   </xsl:template>

   <xsl:template match="SKU">
      <xsl:value-of select="concat(' ', .)" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容：

```
Joe prod1 //special1
Joe prod3 //special2
Joe prod2 // no status
Joe prod4 // no status
Joe prod5 // no status
John Smith prod6 prod8 //special1
John Smith prod7 // no status
John Smith prod9 // no status
John Smith prod10 // no status 
```

如果您使用的是 XSLT2.0，它会变得更简单一些，因为您可以让我们使用**xsl:for-each-group**来处理分组：

```
<xsl:for-each-group select="order/item[status != '']" group-by="status"> 
```

然后要获取包含该组的项目，请使用**current-group()**函数

```
<xsl:apply-templates select="current-group()/SKU" /> 
```

这是完整的 XSLT2.0 样式表，它也应该输出相同的结果：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>

   <xsl:template match="customer">
      <xsl:for-each-group select="order/item[status != '']" group-by="status">
          <xsl:value-of select="../../name" />
          <xsl:apply-templates select="current-group()/SKU" />
          <xsl:value-of select="concat(' //', status, '&#13;')" />          
      </xsl:for-each-group>

      <xsl:apply-templates select="order/item[not(status != '')]" />
   </xsl:template>

   <xsl:template match="item">
      <xsl:value-of select="concat(../../name, ' ', SKU, ' // no status&#13;')" />
   </xsl:template>

   <xsl:template match="SKU">
      <xsl:value-of select="concat(' ', .)" />
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:52:22.933

您最简单的选择只是一个 xsl:if

```
<xsl:template match="customer">
    <xsl:if test="order/item[status='special1']">
        <xsl:value-of select="name" /><xsl:apply-templates select="order/item[status='special1']" /><xsl:text>&nl;</xsl:text>
    </xsl:if>
    <xsl:if test="order/item[status='special2']">
        <xsl:value-of select="name" /><xsl:apply-templates select="order/item[status='special2']" /><xsl:text>&nl;</xsl:text>
    </xsl:if>
</xsl:template> 
```**

# objective-c - NSButton 忽略过于靠近的点击

> ID：14918248
> 
> 赞同：0
> 
> 时间：2013-02-17T05:24:13.867
> 
> 标签：objective-c, cocoa, nsbutton

NSButton 忽略了靠得太近的点击。

如果我慢慢点击，所有点击都会被确认，但如果我开始加快速度，它会在某个时刻停止发送 mouseDown: 事件。如果我然后放慢速度，在某个点上，所有点击都会再次开始传播。

对于这个应用程序中的几个按钮，会发生锤击，并且没有理由不允许它。

我试过 setIgnoresMultiClick:，但它不会改变行为。

我尝试继承 NSButton，覆盖 mouseDown:，重新创建事件对象的副本，但按钮计数设置为 1。

还是没有骰子。

有人知道这里的诀窍吗？

半解决（......虽然有缺点）。

可能有六种方法可以做到这一点，但这是我启用按钮锤击的方法......

```
@interface HammerClickWindow : NSWindow {;;}
@end

@implementation HammerClickWindow
- (void)sendEvent:(NSEvent *)event
{
    if ( event.type == NSLeftMouseDown )
    {
        [super sendEvent:[NSEvent mouseEventWithType:event.type location:event.locationInWindow modifierFlags:event.modifierFlags timestamp:event.timestamp windowNumber:event.windowNumber context:event.context eventNumber:event.eventNumber clickCount:1 pressure:event.pressure]];
    }
}
@end 
```

如果有人知道如何做到这一点，它 (A) 不会影响窗口中 100% 的鼠标按下，并且 (B) 只能影响特定的按钮......那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T21:34:19.993

您需要更改系统偏好设置 - 鼠标 - 双击速度 - 快速

# intellij-idea - 导入 LWJGL 源

> ID：14918249
> 
> 赞同：2
> 
> 时间：2013-02-17T05:24:26.997
> 
> 标签：intellij-idea, import, lwjgl, javadoc

我已经为 lwjgl 导入了已编译的 jar，但是如何为它们导入源代码以便我可以查看源代码？另外，我将如何为它导入javadoc？

这在 Netbeans 中很简单，但在 Intellij 中我看不到该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:46:26.957

在库配置中，您可以附加文件或目录并指定 JavaDoc URL：

![添加](../Images/b0cc29d80cdf2a7a17e2e86cad5804c3.png)

相关文档：

*   [配置模块依赖和库](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)
*   [配置项目和全局库](http://www.jetbrains.com/idea/webhelp/configuring-project-and-global-libraries.html)

# macos - 我升级了我的 cabal-install 吗？

> ID：14918251
> 
> 赞同：31
> 
> 时间：2013-02-17T05:24:58.560
> 
> 标签：macos, haskell, cabal

[我刚刚从它的官方网站](http://hackage.haskell.org/platform/)安装了 Haskell 。之后，按照它的快速入门教程。

我跑：

```
cabal update 
```

显示此消息：

```
Downloading the latest package list from hackage.haskell.org
Note: there is a new version of cabal-install available.
To upgrade, run: cabal install cabal-install 
```

我跑：

```
cabal install cabal-install 
```

并检查更新是否成功

```
cabal update 
```

结果，它从一开始就向我显示了相同的消息：

```
Downloading the latest package list from hackage.haskell.org
Note: there is a new version of cabal-install available.
To upgrade, run: cabal install cabal-install 
```

**那么，我是否升级了 cabal-install？我如何检查我的阴谋集团的版本？**

*重要提示：我使用的是 Mac OS X 的 64 位版本。*

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-18T06:02:19.477

在我的情况下（可能还有其他人？） cabal 最初是`/usr/local/bin`在安装`haskell-platform`. 升级 cabal 时，版本安装到`$HOME/.cabal/bin/cabal`. 你应该把你的 cabal bins 放在更高的地方`$PATH`，像这样：

```
export PATH=$HOME/.cabal/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-17T23:52:45.753

`2012.4.0.0`在 OSX 上安装 Haskell 平台后，我遇到了类似的问题。当我跑的时候`cabal install cabal-install`，它以：

```
cabal: ../ghc-7.4.2/lib/cabal-install-1.16.0.2/bin/cabal: does not exist 
```

所以我猜它的路径在某个地方混淆了。但是，可执行文件实际上已成功构建（检查`~/Library/Haskell/ghc-7.4.2/lib/cabal-install-1.16.0.2/bin/cabal`），我只是将它从那里复制到`~/Library/Haskell/bin`我的路径上。

此后一切正常：

```
$ which cabal
/Users/luke/Library/Haskell/bin/cabal
$ cabal update
Downloading the latest package list from hackage.haskell.org
$ cabal --version
cabal-install version 1.16.0.2
using version 1.16.0.3 of the Cabal library 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-01T23:02:06.613

每个人似乎都在这里遇到了稍微不同的问题。就我而言，`cabal`已成功构建并安装到`~/Library/Haskell/bin`.

如 中所述`~/.cabal/config`，添加`~/Library/Haskell/bin`解决`PATH`了该问题。

以下是中的描述`~/.cabal/config`：

```
-- === Built executables will be installed in:
--     ~/Library/Haskell/bin
--
-- You may wish to place this on your PATH by adding the following
-- line to your ~/.bash_profile:
--     export PATH="$HOME/Library/Haskell/bin:$PATH" 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-10-18T02:32:13.817

在 OS X 10.8 上，我必须添加`/Library/Haskell/bin`到我的 PATH（放在前面`/usr/bin`）。添加修复了错误消息

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-17T05:34:57.863

`cabal --version`为您提供您正在运行的 cabal 版本。如果您想查看您拥有的 cabal-install 版本，请运行`cabal info cabal-install`并查看*安装的版本*行。

对我来说，在 OS X 上*安装的版本*是`[unknown]`, after running `cabal install cabal-install`，这不是很好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-19T22:14:07.100

我也有这个问题。

运行后`which cabal`发现是用`/usr/bin/cabal`的。删除它解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-25T17:45:06.667

在我的情况下，需要结合几个答案来解决这个问题。我将尝试在一个答案中为我遇到的其他任何人提供更全面的解决方案。

*   对于初学者来说，运行`which cabal`向我展示了`/usr/bin/cabal`正在加载的内容，这是指向`/Library/Haskell/ghc-7.8.3-x86_64/bin/cabal`. 我相信正在安装较新版本的 cabal，但此路径特定于单个版本，因此被忽略。添加`/Library/Haskell/bin`到我的前面`$PATH`补救了这种情况。
*   其次，更重要的是，新版本`cabal-install`被安装到我的 cabal 沙箱而不是系统位置。我没有看到任何其他答案表明这一点，但经过一番胡闹后，我发现移出我的应用程序目录允许 cabal 实际安装到系统中。
*   最后，将`--global`标志添加到命令中解决了问题。我的最终命令是`cabal install --global cabal-install`. 在此之后，我终于能够正确更新。

TL;DR：如果您使用 cabal 沙箱，请移出项目目录并运行`cabal install --global cabal-install`. 另外，请按照其他人的建议检查您的`$PATH`变量。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-12T08:43:23.293

似乎 cabal 默认为当前用户在本地安装软件包，因此不会成为 PATH 的一部分。查看 [Cabal 文档](http://www.haskell.org/haskellwiki/Cabal-Install)，特别是步骤 1.2.1，您可以在其中更改配置以默认全局安装（不推荐）。

我安装 cabal 的方式是`cabal --global install cabal-install`但仍然存在路径问题，因为 Haskell 的默认安装按此顺序放置路径，`C:\Program Files\Haskell Platform\2013.2.0.0\lib\extralibs\bin;C:\Program Files\Haskell Platform\2013.2.0.0\bin;`其中第一个路径优先于第二个路径。使用 --global 标志 cabal 安装了`C:\Program Files\Haskell\bin`不在我的路径中但必须在`C:\Program Files\Haskell Platform\2013.2.0.0\lib\extralibs\bin`路径之前添加的二进制文件。

取自文档

> 您必须将 cabal.exe 放在 %PATH% 上的目录中，例如 C:\Program Files\Haskell\bin。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-15T15:56:05.470

就我而言，新版本的 cabal 被安装在我所在项目的 .cabal-sandbox 中。

例如检查版本：

```
./.cabal-sandbox/bin/cabal --version 
```

所以我需要在此之外对其进行升级。这是在 OSX 上。

# haskell - cabal 用 fay 安装麻烦

> ID：14918257
> 
> 赞同：0
> 
> 时间：2013-02-17T05:26:01.743
> 
> 标签：haskell, cabal, cabal-install, fay

我正在尝试运行`cabal install fay fay-base`。但是，我收到以下错误：

```
src/Test/CommandLine.hs:18:9:
    Dynamic linking required, but this is a non-standard build (eg. prof).
    You need to build the program twice: once the normal way, and then
    in the desired way using -osuf to set the object file suffix.
cabal: Error: some packages failed to install:
fay-0.14.1.0 failed during the building phase. The exception was:
ExitFailure 1
fay-base-0.14.1.0 depends on fay-0.14.1.0 which failed to install. 
```

当它要求我“以正常方式安装一次，然后以所需方式安装”时，我不确定它要求我做什么。

有任何想法吗？

原帖：

我正在尝试运行`cabal install fay fay-base`。但是，我收到以下错误：

```
/usr/bin/ld: cannot find -lHSsplit-0.2.1.1-ghc7.4.1
collect2: ld returned 1 exit status
cabal: Error: some packages failed to install:
fay-0.14.1.0 failed during the building phase. The exception was:
ExitFailure 1
fay-base-0.14.1.0 depends on fay-0.14.1.0 which failed to install. 
```

我在另一个包安装时收到了这个错误，但我不记得是哪个（我相信它是游戏包之一，所以更容易放弃）。我试过用谷歌搜索 -lHSsplit 并且找不到任何帮助。

有谁知道我需要安装什么依赖项？

`cabal install split`这已通过按照 Daniel Fischer 的建议安装 split 来解决。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:12:49.267

我用 ghc 7.4.2 将它安装在 Arch 上，不确定您使用的是什么操作系统，但如果您使用的是 GNU/Linux（或不使用），请尝试升级到 7.4.2 并尝试全新安装 fay / fay -根据。

如果您还没有尝试过 cabal-dev，您可能想尝试一下，方法如下： [https ://github.com/faylang/fay/wiki/Installing-and-running](https://github.com/faylang/fay/wiki/Installing-and-running)

向下滚动到 cabal-dev 部分。

# php - 如何编辑“PHP-MySQL-returned”HTML 表并在数据库中更新它

> ID：14918259
> 
> 赞同：0
> 
> 时间：2013-02-17T05:26:11.853
> 
> 标签：php, html, mysql

我有一个简单的 PHP 代码来从 MySQL 数据库表中检索数据。显示此 HTML 表后，我想编辑某些字段，以便在数据库中更新它们。

请告诉我什么和怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:32:19.050

让检索到的数据进入如下表单字段：

```
<input type='text' name='age' value='<?php echo $age; ?>'> 
```

这样，表格就预先填写了列表数据。此外，在表单转到的页面上，将数据（通过 $_POST 到达）写回数据库。

# bash - 如何接受 HTTP Post 并使用参数调用命令行？

> ID：14918262
> 
> 赞同：0
> 
> 时间：2013-02-17T05:26:54.520
> 
> 标签：bash, http, rest

我想通过另一台计算机的 http 请求从命令行（bash）调用 VLC。在这种情况下，一台计算机将充当服务器，并根据它接收到的 http 参数向 VLC 调用不同的选项，而另一台计算机将简单地充当客户端，因为它向带有 VLC 的服务器发送不同的 http 请求。

这可以作为一般性问题提出。在服务器上接受和 http 请求，然后在 bash 上调用 CLI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:40:12.360

最简单的方法是在 Apache 或任何其他 Web 服务器上设置 CGI 脚本，并使用 GET 请求。

如果有东西试图 fetch `http://yourhost/cgi-bin/yourscript?doStuff`，您的脚本将被调用，`$QUERY_STRING`并将包含`doStuff`：

```
#!/bin/bash
echo "Content-type: text/plain"
echo

if [[ $QUERY_STRING == doStuff ]]
then
    yourcommand --here
    echo "Thanks, your stuff is done. "
else
    echo "Unknown stuff to do. Here are my variables:"
    set
fi 
```

请注意您的 HTTP 服务器以哪个用户身份运行您的脚本。

# razor - 使用 FormsAuthentication 方法管理 mvc3 中的安全性

> ID：14918263
> 
> 赞同：0
> 
> 时间：2013-02-17T05:27:15.157
> 
> 标签：razor, forms-authentication

我正在使用。`FormsAuthentication.SetAuthCookie()`它工作正常，但是当我在另一个具有不同数据库的项目中使用相同的方法并同时执行两个项目时，我遇到以下问题：

1.当我登录第一个项目时，它会在第二个项目中使用相同的用户名自动登录，尽管其他数据库不包含该用户名。

有没有办法解决这个问题或者我应该使用其他方法，例如 FormsAuthenticationTicket 或 Sessions.Thanks 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:52:46.580

我发现问题出在相同的 cookie 名称上。当两个 Web 应用程序部署在同一个域中时，当任何人登录时，第二个应用程序将自动登录这两个应用程序，因为它们使用相同的身份验证的 cookie 名称。所以最后我结束了在 web.config 中更改 cookie 名称

```
<authentication mode="Forms">
  <forms name="MynewCookie" loginUrl="~/Account/LogOn" timeout="1" protection="All" slidingExpiration="true" requireSSL="false"/>
</authentication> 
```

# android - Android - 如何在 2 列布局的左侧添加间距？

> ID：14918264
> 
> 赞同：0
> 
> 时间：2013-02-17T05:27:16.477
> 
> 标签：android, android-layout

我有一个像这样的 2 列列表布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_marginLeft="10dp"     
     android:layout_width="fill_parent"

     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/TRAIN_CELL"
         android:layout_width="275dip"
         android:layout_height="wrap_content"
         android:textSize="16sp"/>

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="25dip"
         android:textSize="20sp"
         android:textStyle="bold" 
         android:gravity="center"
         android:textColor="@color/light_best_blue"
         android:layout_height="wrap_content"  
         android:layout_weight="1"/>

</LinearLayout> 
```

但是这行： android:layout_marginLeft="10dp" 不会产生和增加空间的效果。此外，屏幕本身有一个左边距，但列表也没有响应。

有没有办法确保屏幕左侧有间距？

谢谢！

这是代码：

```
private List<HashMap<String, String>> fillMaps;
private SimpleAdapter adapter;

ListView list = null;

    list = (ListView) findViewById(android.R.id.list);

    // My data
    fillMaps = new ArrayList<HashMap<String, String>>();

    adapter = new SimpleAdapter(this, fillMaps, R.layout.questions_list,
            new String[] {"train", "to"}, 
            new int[] {R.id.TRAIN_CELL,  R.id.TO_CELL});        
    //adapter = new ArrayAdapter<Question>(this, R.layout.user_question_list, questions);

    setListAdapter ( adapter );

    ListView lv = getListView();
    lv.setTextFilterEnabled(true); 
```

后来我像这样填充列表：

```
 HashMap<String, String> map = new HashMap<String, String>();                                
                            JSONObject o = obj.getJSONObject(i);

                            String question_id = o.getString("question_id");
                            String question = o.getString("question");
                            String questioner_id = o.getString("member_id");
                            String first_name = o.getString("first_name");
                            String last_name = o.getString("last_name");

                            Question q = new Question ( );
                            q.setQuestion(question);
                            q.setQuestionId(question_id);
                            q.setQuestionByMemberId( questioner_id );

                            q.setAuthorName(first_name + " " + last_name );

                            map.put("train", question);

                            //map.put("from", ">");
                            map.put("to", ">");

                            fillMaps.add(map);
                            questions.add( q ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:39:40.957

尝试改变

```
 android:layout_marginLeft="10dp" 
```

到

```
 android:layout_paddingLeft="10dp" 
```

# perl - 将 TAP::Formatter::JUnit 与 Mojolicious 测试一起使用？

> ID：14918266
> 
> 赞同：1
> 
> 时间：2013-02-17T05:27:21.303
> 
> 标签：perl, testing, mojolicious

我对我的 Mojolicious 应用程序进行了许多测试，并且一切正常，现在我正试图让 Mojolicious 输出到 JUnit XML。我发现`TAP::Formatter::JUnit`它看起来正是我想要的，但我没有掌握如何让 Mojolicious 测试（仅从`script/site.pl test`我的应用程序的根级别运行）来使用它。

我是否遗漏了一些显而易见的东西，或者如果我想将 Mojolicious 的内置测试功能输出到 JUnit XML，我是否无法使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:58:52.877

我查看了[Mojolicious::Command::test](http://search.cpan.org/perldoc?Mojolicious%3A%3ACommand%3A%3Atest)并使用它`Test::Harness`来运行测试套件。该模块是 wrapper over ，我们需要设置`TAP::Harness`其参数。`formatter`我还没有找到任何方法来推动参数（有类似的环境变量`HARNESS_OPTIONS`，但它们不允许参数）。

您可以做的是[为您的应用程序实现新命令](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Adding_commands_to_Mojolicious)。我创建了新的 Mojolicious 应用程序，在应用程序启动时按照上面的指南添加了新的命令命名空间：

```
push @{$self->commands->namespaces}, 'JUnitTest::Command'; 
```

然后我只是复制并替换了最后`Mojolicious::Command::test`几`JUnit::Command::testjunit`行`run`方法：

```
$ENV{HARNESS_OPTIONS} //= 'c';
require Test::Harness;
Test::Harness::runtests(sort @args); 
```

和

```
require TAP::Harness;
my $harness = TAP::Harness->new({
  formatter_class => 'TAP::Formatter::JUnit',
  lib   => \@INC,
  merge => 1,
});
$harness->runtests(sort @args); 
```

运行它

```
perl script/junit_test testjunit 
```

导致此输出：

```
<testsuites>
  <testsuite failures="0" errors="0" tests="3" name="t_basic_t">
    <testcase name="1 - get /"></testcase>
    <testcase name="2 - 200 OK"></testcase>
    <testcase name="3 - content is similar"></testcase>
    <system-out><![CDATA[1..3
ok 1 - get /
ok 2 - 200 OK
ok 3 - content is similar
]]></system-out>
    <system-err></system-err>
  </testsuite>
</testsuites> 
```

希望这可以帮助。

# c - GCC 抱怨缺少对同一文件中函数的引用

> ID：14918269
> 
> 赞同：3
> 
> 时间：2013-02-17T05:27:51.413
> 
> 标签：c, gcc, compiler-errors, undefined-reference

沿着makefile运行，我得到了这个：

```
cc client.o MurmurHash3.o libstorage.a -Wall -lreadline -pthread  -o client
MurmurHash3.o: In function `MurmurHash3_x64_128':
/home/evantandersen/mount/src/MurmurHash3.c:59: undefined reference to `rotl64'
/home/evantandersen/mount/src/MurmurHash3.c:106: undefined reference to `fmix' 
```

并且，`MurmurHash3.c`：

```
inline uint64_t rotl64 ( uint64_t x, int8_t r )
{
  return (x << r) | (x >> (64 - r));
}

//-----------------------------------------------------------------------------
// Finalization mix - force all bits of a hash block to avalanche

inline uint64_t fmix ( uint64_t k )
{
  k ^= k >> 33;
  k *= 0xff51afd7ed558ccd;
  k ^= k >> 33;
  k *= 0xc4ceb9fe1a85ec53;
  k ^= k >> 33;

  return k;
}

//-----------------------------------------------------------------------------

void MurmurHash3_x64_128 ( const void * key, const int len,
                           const uint32_t seed, void * out )
{

  const uint8_t * data = (const uint8_t*)key;
  const int nblocks = len / 16;

  uint64_t h1 = seed;
  uint64_t h2 = seed;

  const uint64_t c1 = 0x87c37b91114253d5;
  const uint64_t c2 = 0x4cf5ad432745937f;

  //----------
  // body

  const uint64_t * blocks = (const uint64_t *)(data);

  for(int i = 0; i < nblocks; i++)
  {
    uint64_t k1 = blocks[i*2+0];
    uint64_t k2 = blocks[i*2+1];

    k1 *= c1; k1  = rotl64(k1,31); k1 *= c2; h1 ^= k1;

    h1 = rotl64(h1,27); h1 += h2; h1 = h1*5+0x52dce729;

    k2 *= c2; k2  = rotl64(k2,33); k2 *= c1; h2 ^= k2;

    h2 = rotl64(h2,31); h2 += h1; h2 = h2*5+0x38495ab5;
  }

  //----------
  // tail

  const uint8_t * tail = (const uint8_t*)(data + nblocks*16);

  uint64_t k1 = 0;
  uint64_t k2 = 0;

  switch(len & 15)
  {
  case 15: k2 ^= ((uint64_t)tail[14]) << 48;
  case 14: k2 ^= ((uint64_t)tail[13]) << 40;
  case 13: k2 ^= ((uint64_t)tail[12]) << 32;
  case 12: k2 ^= ((uint64_t)tail[11]) << 24;
  case 11: k2 ^= ((uint64_t)tail[10]) << 16;
  case 10: k2 ^= ((uint64_t)tail[ 9]) << 8;
  case  9: k2 ^= ((uint64_t)tail[ 8]) << 0;
           k2 *= c2; k2  = rotl64(k2,33); k2 *= c1; h2 ^= k2;

  case  8: k1 ^= ((uint64_t)tail[ 7]) << 56;
  case  7: k1 ^= ((uint64_t)tail[ 6]) << 48;
  case  6: k1 ^= ((uint64_t)tail[ 5]) << 40;
  case  5: k1 ^= ((uint64_t)tail[ 4]) << 32;
  case  4: k1 ^= ((uint64_t)tail[ 3]) << 24;
  case  3: k1 ^= ((int64_t)tail[ 2]) << 16;
  case  2: k1 ^= ((uint64_t)tail[ 1]) << 8;
  case  1: k1 ^= ((uint64_t)tail[ 0]) << 0;
           k1 *= c1; k1  = rotl64(k1,31); k1 *= c2; h1 ^= k1;
  };

  //----------
  // finalization

  h1 ^= len; h2 ^= len;

  h1 += h2;
  h2 += h1;

  h1 = fmix(h1);
  h2 = fmix(h2);

  h1 += h2;
  h2 += h1;

  ((uint64_t*)out)[0] = h1;
  ((uint64_t*)out)[1] = h2;

} 
```

`rotl64`和都`fmix`定义在同一个文件中并且在函数上方`MurmurHash3_x64_128`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T00:42:27.943

如果您要编译为 C99，则编译器不必使用`inline`函数定义，但 GCC 会在优化时使用。当不优化时，它假定`extern`程序中某处有一个正常的定义，这就是它试图链接的内容。

通过定义它，`extern inline`您将其定义为`extern`定义，因此在未优化时，将通过在相同或不同翻译单元中的调用来使用它。

通过定义它，`static inline`您可以将其定义为`static`定义，因此在未优化时将仅通过在同一翻译单元中的调用来使用它。该`inline`定义不能用于解析其他翻译单元中的调用。

有关详细信息，请参阅[http://www.greenend.org.uk/rjk/tech/inline.html 。](http://www.greenend.org.uk/rjk/tech/inline.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:41:43.513

出于某种原因，将定义从

```
inline type name(parameters) 
```

到

```
inline static type name(paramaters) 
```

解决了这个问题。不确定这是否是编译器错误，我必须阅读 C 标准。

编辑：gcc v4.6.3，GNU ld v2.22

打开优化也可以解决错误（不添加 static 关键字），所以我不完全确定发生了什么。

# regex - 在否定字符类中使用 \s 时混淆 grep 行为

> ID：14918274
> 
> 赞同：2
> 
> 时间：2013-02-17T05:28:54.277
> 
> 标签：regex, grep

我有一个匹配“x”的正则表达式，如果它前面有一个非空格字符而不是`"`任意数量的空格字符：

```
[^"\s]\s*x 
```

这在 JavaScript 中按预期工作：

```
$ node
> /[^"\s]\s*x/.test('x')
false
> /[^"\s]\s*x/.test(' x')
false
> /[^"\s]\s*x/.test('" x')
false
> /[^"\s]\s*x/.test(': x')
true 
```

但是，grep 的行为有所不同：

```
$ echo 'x' | grep '[^"\s]\s*x'

$ echo ' x' | grep '[^"\s]\s*x'
 x

$ echo '" x' | grep '[^"\s]\s*x'
" x

$ echo ': x' | grep '[^"\s]\s*x'
: x 
```

这种行为有解释吗？我将如何重写 grep 的正则表达式，使其按预期运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T05:40:29.647

根据[this page](http://www.gnu.org/software/findutils/manual/html_node/find_html/grep-regular-expression-syntax.html) ，其中的反斜杠`[]`是按字面意思理解的。因此，您的否定组不是“不是引号或空格字符”，而是“不是引号、反斜杠或 s”。

试试`[^"[:space:]]`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T05:50:45.817

您可以指示 grep 与`-P`选项兼容 Perl：

```
$ echo 'x' | grep -P '[^"\s]\s*x'

$ echo ' x' | grep -P '[^"\s]\s*x'

$ echo '" x' | grep -P '[^"\s]\s*x'

$ echo ': x' | grep -P '[^"\s]\s*x'
: x 
```

* * *

`-P`编辑：在他们移除开关后在 Mac 上不可能

# android - 与数据库的 Android SQLite 事务被锁定

> ID：14918275
> 
> 赞同：1
> 
> 时间：2013-02-17T05:29:35.513
> 
> 标签：android, sqlite, android-asynctask

我对android世界很陌生。这是我想要完成的。所以我想为加速度计传感器做一个简单的校准会话，它只是收集加速度计数据并在 3 分钟内将它们插入数据库。这是我的代码：

**校准活动**

```
package com.example.calibration;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.os.IBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.example.calibration.AccelsService.LocalBinder;

public class CalibrationActivity extends Activity{
    private final String DEBUG_TAG = CalibrationActivity.class.getSimpleName();
    private TextView mCountdownTv;
    private Button mStartButton;
    private final int countdownPeriod = 10; //3 Minutes

    private AccelsService mService;
    private boolean mBound;

    private Intent mIntent;

    private class myCountdown extends CountDownTimer{
        public myCountdown(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }
        public void onTick(long millisUntilFinished) {
            int minutes = (int) millisUntilFinished / (60*1000);
            int seconds = (int) (millisUntilFinished - minutes*60*1000)/1000;
            if (seconds >= 10){
                mCountdownTv.setText(minutes+":" + seconds);    
            }
            else{
                mCountdownTv.setText(minutes+":0" + seconds);
            }
         }
         public void onFinish() {
            mCountdownTv.setText("Done!");
            mCountdown = null;
            Log.d(DEBUG_TAG,"Done Calibrating! With mBound = "+mBound);
            if (mBound){
                mService.setTransactionStatus(true);
                unbindService(mConnection);
                mBound = false;
            }
            mStartButton.setEnabled(true); 
         }  
    }

    private CountDownTimer mCountdown;

    private ServiceConnection mConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName className, IBinder iservice) {
            LocalBinder binder = (LocalBinder) iservice;
            mService = binder.getService();
            mBound = true;
        }
        @Override
        public void onServiceDisconnected(ComponentName className) {
            mBound = false;
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calibration);

        mCountdownTv = (TextView) findViewById(R.id.countdown_timer);
        mStartButton = (Button) findViewById(R.id.start_button);
    }
    @Override
    protected void onStart(){
        super.onStart();
        mStartButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mIntent = new Intent(CalibrationActivity.this, AccelsService.class);        
                bindService(mIntent,mConnection,Context.BIND_AUTO_CREATE);
                //Start to countdown 3 minutes and stop the service
                if (mCountdown==null){
                    mCountdown = new myCountdown(1000*countdownPeriod, 1000);
                    mCountdown.start();
                }
                //Disable the button after it's clicked
                mStartButton.setEnabled(false);
            }
        });
    }
    @Override
    protected void onStop() {
        super.onStop();
        // Unbind from the service
        Log.d(DEBUG_TAG,"ONSTOP! mBound is "+mBound);
        if (mBound) {
            mService.setTransactionStatus(false);
            unbindService(mConnection);
            mBound = false;
        }
    }
    @Override
    protected void onRestart(){
        super.onRestart();
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_calibration, menu);
        return true;
    }
} 
```

**加速服务：**

```
package com.example.calibration;

import android.app.Service;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.AsyncTask;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class AccelsService extends Service implements SensorEventListener{
    private final String DEBUG_TAG = AccelsService.class.getSimpleName();

    private boolean mTransactionStatus = false;//Indicate if the service should commit the database changes
    // Binder given to clients
    private final IBinder mBinder = new LocalBinder();
    public class LocalBinder extends Binder{
        AccelsService getService() {
            // Return this instance of AccelsService so clients can call public methods
            return AccelsService.this;
        }
    };

    private SensorManager mSensorManager;
    private Sensor mSensor;
    private AccelsDbHelper mDbHelper;
    private SQLiteDatabase mDb;

    @Override
    public void onCreate(){
        super.onCreate();
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d(DEBUG_TAG, "onStartCommand!" );
        return START_STICKY;
    }
    @Override
    public IBinder onBind(Intent intent) {
        startCalibration();
        return mBinder;
    }
    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }
    @Override
    public void onDestroy(){
        super.onDestroy();
        mSensorManager.unregisterListener(AccelsService.this);
        Log.d(DEBUG_TAG, "AccelService got Destroyed!" );
        mDbHelper.close();
    }
    @Override
    public void onSensorChanged(SensorEvent event) {
        Log.d(DEBUG_TAG, "onSensorChanged" );
        new AccelTask().execute(event);
    }
    private class AccelTask extends AsyncTask<SensorEvent,Void,Void> {
        protected Void doInBackground(SensorEvent... events){
            mDb.execSQL("INSERT INTO "+ AccelsDbHelper.ACCELS_TABLE_NAME +" VALUES ( "+ events[0].values[0]
                    +", "+ events[0].values[1] + ", " + events[0].values[2] + ", " + System.currentTimeMillis() + " );");
            return null;
        }
    }
    private void startCalibration(){
        /*Register the Sensor Listener */
        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        mSensor = (Sensor) mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mSensorManager.registerListener(this,mSensor,SensorManager.SENSOR_DELAY_NORMAL);
        Toast.makeText(this, "AccelService starting...", Toast.LENGTH_SHORT).show();

        mDbHelper = new AccelsDbHelper(this);
        mDb = mDbHelper.getWritableDatabase();
        mDb.beginTransaction();
        if (mTransactionStatus){
            try{
                mDb.setTransactionSuccessful();
            }
            finally{
                mDb.endTransaction();
                stopSelf();
            }
        }
    }

    public void setTransactionStatus(boolean isSuccessful){
        mTransactionStatus = isSuccessful;
    }

} 
```

我省略了 SQLiteOpenHelper 类，因为它非常普通。所以点击按钮后，OnSensorChanged() 事件不断被调用，在这个阶段没有错误发生。尽管如此，我认为数据根本没有写入数据库，因为我看不到 Eclipse 上的 DDMS 视图生成的任何数据。然后，代码完成后，我尝试再次单击该按钮。但现在我收到错误“（5）数据库已锁定”。我感到很困惑。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:35:35.580

这在我看来很可疑：

```
mDb.beginTransaction();
if (mTransactionStatus){
    try{
        mDb.setTransactionSuccessful()
    }
    finally{
        mDb.endTransaction();
        stopSelf();
    }
} 
```

除非 mTransactionStatus 为真，否则您似乎不会关闭交易。

# javascript - 如何知道 Backbone model.fetch() 何时完成？

> ID：14918280
> 
> 赞同：11
> 
> 时间：2013-02-17T05:30:59.750
> 
> 标签：javascript, backbone.js, backbone-events, backbone-model

我像这样绑定我的主干模型的更改事件。

```
this.model.on( "change", this.render, this ); 
```

有时我想获取模型的最新版本并强制渲染视图。所以我这样做

```
this.model.fetch(); 
```

不幸的是，model.fetch() 仅在新数据与先前存储在模型中的数据不同时才会触发更改事件。

如何在 fetch 完成时始终触发 this.render 回调，无论它是否触发更改事件？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T22:46:06.037

您可以使用`$.ajax`成功回调，但您也可以只侦听模型上的 Backbone`sync`和`error`事件。`sync`成功调用服务器后`error`触发，调用服务器失败后触发。

```
this.model.on('sync', this.render, this);
this.model.on('error', this.handleError, this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T21:09:41.443

我不知道你的代码结构是什么，但是如果你在你的视图中获取你的模型，你可以使用这样的东西

```
var that = this;
this.model.fetch().done(function () {
    that.render();
}); 
```

否则，如果您在视图之外获取模型，您可以将您的承诺传递给您的视图并制作类似的东西

```
var promise = model.fetch();
// other code here
var view = new View({
    model: model,
    promise: promise
}); 
```

并在您的视图中，例如在初始化

```
View = Backbone.View.extend({
    initialize: function(){
        this.options.promise.done(function () {
            // your code here
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T06:29:28.803

该`fetch`方法可以选择接受成功和错误回调；最简单的解决方案是将您的视图`render`放在成功回调中。您也可以使用返回的 jqXHR 承诺，但如果 AJAX 会成功（每个 jQuery）但模型初始化失败，那么这种用法可能会出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T12:25:15.337

这个解决方案怎么样：

```
// emit fetch:error, fetch:success, fetch:complete, and fetch:start events
fetch: function(options) {
  var _this = this;

  options = options || {};

  var error = options.error;
  var success = options.success;
  var complete = options.complete;

  options.error = function(xhr, textStatus, errorThrown) {
    _this.trigger('fetch:error');
    if (error) error(xhr, textStatus, errorThrown);
  };

  options.success = function(resp) {
    _this.trigger('fetch:success');
    if (success) success.call(options.context, resp);
  };

  options.complete = function() {
    _this.trigger('fetch:complete');
    if (complete) complete();
  };

  _this.trigger('fetch:start');

  return Backbone.Model.prototype.fetch.call(this, options);
} 
```

链接到要点[https://gist.github.com/fedyk/23761ce1236c5673fb84](https://gist.github.com/fedyk/23761ce1236c5673fb84)

# vba - 如何交互式控制PowerPoint中的动画？

> ID：14918281
> 
> 赞同：0
> 
> 时间：2013-02-17T05:31:02.177
> 
> 标签：vba, animation, powerpoint

我正在创建一个幻灯片来演示此页面中的第一个动画[http://www.colorado.edu/physics/2000/bec/what_is_it.html](http://www.colorado.edu/physics/2000/bec/what_is_it.html)，我对 swf 中的动画不太了解，但我知道一些想法如何创建交互式动画 PDF。但是当我将 pdf 嵌入幻灯片时，它只显示了 pdf 的“图像”或真正嵌入了 pdf 查看器并在查看器中显示了 pdf。我正在寻找不同的方法来创建像我上面展示的那样的交互式动画。但是在谷歌上搜索了几次之后，我没有看到任何东西。我正在考虑用 VBA 绘制它，但我不知道从什么开始。那么是否有任何示例或说明如何使用 VBA 动态绘制图形，或者您有更好的主意吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:52:24.430

你总是可以把那种东西留给设计专家。这是一项将复杂信息组织成吸引观众的图形的任务。获得自定义幻灯片设计服务可能会节省大量时间。或者只是浏览预先设计的[动画 Powerpoint 模板](http://www.slideshop.com/powerpoint-animations)，找到最适合您演示需求的模板。

# c++ - XCode 链接器错误、未定义的引用、模板、常量

> ID：14918283
> 
> 赞同：1
> 
> 时间：2013-02-17T05:31:32.573
> 
> 标签：c++, xcode, templates, linker, constants

我有一种使用模板的数组类形式。因为它使用模板，所以在头文件中声明和定义了整个类。

```
template<typename Type>
class KSArray
{
    friend bool operator==(const KSArray &lhs, const KSArray &rhs);
    friend bool operator<(const KSArray &lhs, const KSArray &rhs);

public:
    typedef size_t size_type;
    typedef Type value_type;

    KSArray();
    KSArray(const KSArray &k);
    KSArray& operator=(const KSArray &rhs);
    ~KSArray();
    KSArray(int n);
    KSArray(int n, value_type t);

    value_type& operator[](int index);
    const value_type& operator[](int index) const;

    size_type size() const;
    value_type* begin();
    value_type* begin() const;
    value_type* end();
    value_type* end() const;

private:
    size_type _size;
    value_type* _arrayPtr;
}; 
```

我已经定义了所有函数，除了 == 和 < 运算符之外，它们中的大多数都可以工作。它们定义如下：

```
template<typename Type>
bool operator==(const KSArray<Type> &lhs, const KSArray<Type> &rhs)
{
    if(lhs._arrayPtr==rhs._arrayPtr)
    {
        return true;
    }
    else if(lhs._size==rhs._size)
    {
        for(size_t i=0;i<lhs._size;++i)
        {
            if(lhs->_arrayPtr[i]!=rhs->_arrayPtr[i])
            {
                return false;
            }
            else
            {
                continue;
            }
        }

        return true;
    }
    else
    {
        return false;
    }
}

template<typename Type>
bool operator<(const KSArray<Type> &lhs, const KSArray<Type> &rhs)
{
    if(lhs==rhs)
    {
        return false;
    }
    else
    {
        for(int i=0;i<min(lhs._size,rhs._size);++i)
        {
            if(lhs->_arrayPtr[i]==rhs->arrayPtr[i])
            {
                continue;
            }
            else if(lhs->_arrayPtr[i]<rhs->arrayPtr[i])
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        return (lhs._size<rhs._size);
    }
} 
```

当我在 main 中使用测试文件运行此代码时，出现一些链接器错误：

```
Undefined symbols for architecture x86_64:
  "operator==(KSArray<int> const&, KSArray<int> const&)", referenced from:
      test_class_KSArray_equality_comparisons(Tester&) in ksarray_test.o
      bool operator!=<int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
      bool operator<=<int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
      bool operator><int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
  "operator<(KSArray<int> const&, KSArray<int> const&)", referenced from:
      test_class_KSArray_order_comparisons(Tester&) in ksarray_test.o
      bool operator<=<int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
      bool operator><int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
      bool operator>=<int>(KSArray<int> const&, KSArray<int> const&) in ksarray_test.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

正如错误所暗示的那样，我在其他运算符中使用 == 和 < 运算符，以最小化我必须编写的代码。**从我所做的研究来看，我认为问题在于我对 const 的位置，也许还有 Type。我试过移动它们并调整它们无济于事。有任何想法吗？**

我在 Mac OS X 10.8.2 上使用 XCode 4.6 和 Apple LLVM 4.2 C++ 编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:39:25.933

您能否在构造函数之前尝试**显式**关键字。在我看来，您正面临转换构造函数的问题，并且您的 int 参数正在隐式转换为 KSArray..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:58:52.170

和我的教授交谈后，我发现模板和朋友的工作有点奇怪： http: [//www.parashift.com/c++-faq/template-friends.html](http://www.parashift.com/c++-faq/template-friends.html)

使用上面的链接，我能够弄清楚如何解决我的问题。在我最初的研究中，我不知道这个问题与朋友和模板有关。我认为这是 const 的问题或一些奇怪的东西。

# email - 为什么来自我服务器的电子邮件被热门客户标记为垃圾邮件？

> ID：14918286
> 
> 赞同：3
> 
> 时间：2013-02-17T05:32:09.970
> 
> 标签：email, spam, email-spam, spamassassin

我正在发送单个通知信，但几乎每个服务器都将它们标记为垃圾邮件。

我从“不是垃圾邮件”服务中得到了详细的报告，但无法真正理解其中哪些行很重要。从我通过谷歌搜索收集到的信息来看，一切看起来都还不错，但电子邮件最终还是成为垃圾邮件。

请告诉我，我错过了什么。

[http://isnotspam.com/dreport.php?id=42159&email=gouf@4otaku.ru](http://isnotspam.com/dreport.php?id=42159&email=gouf@4otaku.ru)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T05:47:08.923

要发送电子邮件并使其不被标记为垃圾邮件，您需要确保一些不同的事情。

1.  设置[SPF（发件人策略框架）](http://en.wikipedia.org/wiki/Sender_Policy_Framework)并确保从您在其中指定的服务器发送邮件。
2.  设置[DKIM](http://en.wikipedia.org/wiki/DomainKeys_Identified_Mail)（域名密钥识别电子邮件）
3.  确保您发送电子邮件的服务器没有被任何垃圾邮件服务列入黑名单（看起来它没有被您链接到的那个网站）

有了所有这些，如果邮件的内容看起来可疑，您的邮件仍然可以被标记为垃圾邮件。

亚马逊有一项服务[SES](http://aws.amazon.com/ses/)，我一直在使用它来发送电子邮件，它们使设置大部分内容变得非常容易，到目前为止，我还没有任何通过标记为垃圾邮件的电子邮件发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:42:14.707

我只想权衡一下，有些系统会自动对 .ru TLD 中的任何内容进行评分。它是垃圾邮件发送者最常滥用的顶级域名之一。如果您要发送带有“您的通知”之类主题的通知，或者您是主动发送的，那么您很可能会被标记。

# sqlite - 更新 sqlite db 在 fb 4.6 中引发“没有这样的表”错误

> ID：14918289
> 
> 赞同：0
> 
> 时间：2013-02-17T05:32:19.670
> 
> 标签：sqlite, actionscript-3, apache-flex, flash-builder, flex4.5

我正在使用 FlashBuilder 4.6 并且有一个我正在开发的简单应用程序。它使用 sqlite db，我有 mxml 组件 1.) 让我添加一条新记录 2.) 使用列表组件列出数据库中的记录，然后单击一个时，3.) 使用输入字段修改选定的 db 记录

每个方面都工作正常，数据库创建（如果不存在），列表组件显示所有记录，并且添加新条目工作并成功存储它们......

问题出在 UPDATE 函数中。我知道该表存在于数据库中，因为我使用其他组件来添加新记录并将它们列出...（已验证数据库和表名称在所有函数中都是一致的）但是由于某种原因，当我尝试执行以下操作时它吐出的更新例程

```
SQLError: 'Error #3115: SQL Error.', details:'no such table: 'tblquiz'', operation:'execute', detailID:'2013' 
```

这是我试图运行以允许用户更新数据库记录的 actionscript3 代码：

```
private function updateQuestion():void
        {

            var dbFile:File = File.applicationDirectory.resolvePath("database.db");
            var dbConnection:SQLConnection = new SQLConnection();
            dbConnection.open(dbFile);

            var statement:SQLStatement = new SQLStatement();
            statement.sqlConnection = dbConnection;

            // TAKE THE FORM FIELD VALUES AND USE THIS SQL STATEMENT TO UPDATE THE DATABASE RECORD WHERE THE ID MATCHES DATA.ID
            statement.text = "UPDATE tblquiz SET question = '" + fieldQuestion + "', answerA = '" + fieldAnswerA + "', answerB = '" + fieldAnswerB + "', answerC = '" + fieldAnswerC + "' WHERE id = " + data.id;
            trace(statement.text);

            statement.execute();

            // GO BACK TO THE LIST COMPONENT TO SEE IF THE UPDATE WORKED
            navigator.popView();

        } 
```

我在这里想念什么？引用数据库和表的其他所有内容都可以正常工作我在谷歌搜索中没有发现任何关于此错误的信息。通过 USB 连接的设备和我正在开发的台式机上的 AIR 模拟器上发生错误。

提前致谢！

更新：问题解决了...我在应用程序中使用了不同的数据库路径... applicationDirectory 在某些地方和 applicationStorageDirectory 在其他地方....所以我全部更改为：

```
File.applicationStorageDirectory.resolvePath("database.db"); 
```

...我相信这是适用于 ios 和 android 的方法（尽管目前我只关心 android）。感谢您的帮助-不敢相信我之前错过了。我会责怪睡眠不足。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:02:03.300

问题解决了....原来我在应用程序中使用了不同的数据库路径... applicationDirectory 在某些地方和 applicationStorageDirectory 在其他地方....所以我全部更改为：

```
File.applicationStorageDirectory.resolvePath("database.db"); 
```

...我相信这是适用于 ios 和 android 的方法（尽管目前我只关心 android）。感谢您的帮助-不敢相信我之前错过了。我会责怪睡眠不足。

# c++ - 通过引用将整数向量传递给函数

> ID：14918290
> 
> 赞同：0
> 
> 时间：2013-02-17T05:33:09.950
> 
> 标签：c++, stdvector

我正在将整数文件读入 std::vector。这部分代码工作正常。我通过打印出矢量来检查这一点。

现在，我想通过引用将此向量传递给函数。我想通过引用传递它，以便允许函数修改向量的内容。以下是我的代码 count_comparison.cpp：

```
#include "count_comparison.h"
#include "quicksort.h"

int main() {

  ...     
  long long int comp_num;
  comp_num = quicksort(A,10000,0,9999);

  ...
} 
```

count_comparison.h 有以下内容：

```
...
#include <vector>
std::vector <int> A(10000);
... 
```

quicksort.h 有以下内容：

```
#include <vector>
long long int quicksort(std::vector <int>& A, int n, int l, int r); 
```

quicksort.cpp 有以下内容：

```
#include "quicksort.h"
long long int quicksort(std::vector <int>& A, int n, int l, int r) {

  long long int num;

  if (n == 1) {
    return 0;
  } else {
    // modify A
    // calculate num and return it
    return num;
  }
} 
```

当我使用 g++（安装在 windows 的 cygwin 上）编译 count_comparison.cpp 时，出现以下错误：

```
/tmp/ccNCnqwV.o:count_comparison.cpp:(.text+0xc6): undefined reference to `quicksort(std::vector<int, std::allocator<int> >&, int, int, int)'
collect2: ld returned 1 exit status 
```

知道我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:39:23.263

我猜你只调用`g++`了 with `g++ count_comparison.cpp`，这意味着`quicksort`没有提供的实现。

长话短说，尝试调用`g++ -g -o a.out quicksort.cpp count_compaison.cpp`并查看是否一切正常。

现在说来话长。在 c++ 中，`.cpp`文件可以单独编译，因此任何特定文件中的更新都不会导致从头开始构建整个项目。在文件中编写实现是一种常用的方法，但在链接之前应该单独*编译*`.cpp`每个文件。使用 IDE 时，通常项目配置文件会告诉 IDE 把事情搞清楚。但是，如果您通过命令行工具执行此操作，则应编译每个工具并*链接*它们。一种方便的方法，虽然不是很优雅，但在调用其他实用程序之前调用并让它决定输入文件是用于编译还是链接。`.cpp`*`.cpp`*`g++`**

 **一般来说，在处理较大的项目时，您应该尝试`g++ -c a.o a.cpp`then finally`ld *.o`获取可执行文件。**

# python - 如何通过 Python 将 JSON 从服务器发送回应用程序

> ID：14918291
> 
> 赞同：0
> 
> 时间：2013-02-17T05:33:11.013
> 
> 标签：python, ios, django, heroku, flask

是否可以使用 Python 将 JSON 从服务器发送到我的 iOS 应用程序？

这样的事情是如何实现的？

（Django 或 Flask 都可以）

我在网上搜索过，但只找到了 PHP 教程。

* * *

我曾尝试返回 JSON，但它不起作用 - 或者至少它从未发送到应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:55:47.173

对于烧瓶，您可以使用`jsonify`

```
from flask import jsonify

@app.route("/index/", methods=['GET'])
def index():
    return jsonify(result=result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:42:19.657

基本前提是您的客户端应用程序向 URL 发送请求，服务器以 JSON 响应。

如何创建 JSON 文档并不重要。您可以使用任何语言（甚至是 javascript）来生成 JSON 并将其发回。

对于 django 有[sweetpie](http://django-tastypie.readthedocs.org/en/latest/)、[django-rest](http://django-rest-framework.org/)和[活塞](https://bitbucket.org/jespern/django-piston/wiki/Home)。

对于烧瓶，您可以使用[flask-restful](http://flask-restful.readthedocs.org/en/latest/)。这是一个[完整的例子](http://flask-restful.readthedocs.org/en/latest/quickstart.html#full-example)。

无论您使用哪个库，工作流程都将如下所示：

1.  您的应用程序向 URL 发出请求
2.  您的服务器应用程序（使用上述任何框架编写）拦截此请求。
3.  JSON 文档由您的服务器应用程序生成，并作为响应发回。
4.  您的客户端应用程序读取 JSON 并显示它。

现在，如果您想实现[REST](http://en.wikipedia.org/wiki/Representational_state_transfer) API，那么您可以扩展上述内容以允许来自客户端应用程序的操作。例如，特制请求可以添加新记录、删除记录或查询记录子集。但是，如果您只想将 JSON 文档发送回您的应用程序，则不需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T09:43:58.077

从 django 服务器返回 JSON 的示例：

```
from django.http import HttpResponse, HttpResponseNotFound

class JsonResponse(HttpResponse):
    def __init__(self, content, **kwargs):
        kwargs['content_type'] = 'application/json'
        super(JsonResponse, self).__init__(json.dumps(content), **kwargs)

class JsonDataResponse(HttpResponse):
    """
    Returns a json dumped dict with fields 'message' and 'data'.

    """
    def __init__(self, *args, **kwargs):
        message = None
        data = None
        if len(args) > 0:
            message = args[0]
        if len(args) > 1:
            data = args[1]
        if 'message' in kwargs:
            message = kwargs['message']
        kwargs.pop('message')
        if 'data' in kwargs:
            data = kwargs['data']
            kwargs.pop('data')

        kwargs['content'] = json.dumps(dict(message=message, data=data))

        if 'content_type' not in kwargs:
            kwargs['content_type'] = 'application/json'

        super(JsonDataResponse, self).__init__(**kwargs) 
```

在视图的返回中使用上面定义的类：

```
from place.of.your.definition import JsonResponse

def example_view(request):
    number_of_foo = Foo.objects.filter(...)
    ...
    return JsonResponse({'number_of_foo': number_of_foo}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:13:22.937

如果您使用 django，以下可能会有所帮助：

```
#views.py
import json
from django.http import HttpResponse

def jsonview(request):
    ...
    return HttpResponse(json.dumps(result), mimetype='application/json') 
```

最好还是直接使用json而不是使用

```
from django.core.serializers import serialize
serialize('json', result) #instead of json.dumps(result) 
```

# html - 子元素的 z-index 是父元素本地的吗？

> ID：14918299
> 
> 赞同：5
> 
> 时间：2013-02-17T05:34:31.280
> 
> 标签：html, css, z-index

好的，所以我的 html 中有这个测试设置

```
<div style="position:absolute;left:0px;top:0px;z-index:1;width:200px;height:200px;background-color:red;">
<div style="position:absolute;left:0px;top:0px;z-index:3;width:50px;height:50px;background-color:green;"></div>
</div>

<div style="position:absolute;left:0px;top:0px;z-index:2;width:100px;height:100px;background-color:blue"></div> 
```

我希望蓝色 div 呈现在红色 div 前面，但我希望红色的子 div（绿色）呈现在蓝色前面，查看该代码，如果 z-index 是全局的，它似乎应该可以工作，但它似乎是父元素的本地元素，因为蓝色呈现在红色之上，但绿色不会呈现在顶部，除非我将绿色 div 移出父元素？我怎样才能使用“全局 z-indexes”或其他任何东西。它以这种方式工作对我的实际项目至关重要

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T05:36:54.287

Z 索引始终是本地的或相对于最近定位的祖先（在本例中为父）。CSS中没有全局`z-index`属性。

您必须将果岭`div`移出其父级。

# vb.net - 在 Windows Phone 7 的 Mediaelement 中播放 .mp3

> ID：14918300
> 
> 赞同：0
> 
> 时间：2013-02-17T05:34:54.040
> 
> 标签：vb.net, windows-phone-7, mediaelement

如何在 Windows Phone 7 中播放 .mp3 文件？我搜索了一些解决方案，但没有一个对我有用..

这是我的代码

```
Try

   MediaElement1.Source = New Uri("/The Smashing Pumpkins - Bullet with Butterfly Wings.mp3", UriKind.Relative)

   MediaElement1.Play()

 Catch ex As Exception
   Console.WriteLine(ex)
 End Try 
```

**这是中介**的xaml代码

 **```
<MediaElement Height="120" HorizontalAlignment="Left" Margin="70,94,0,0" Name="MediaElement1" VerticalAlignment="Top" Width="160"/> 
```

我尝试使用**`try and catch`**，但我没有遇到任何错误，我无法在我的应用程序中播放那个 .mp3 文件的原因是什么？**

# css - 代码点火器制作 点击时激活（预期正常的导航行为）

> ID：14918301
> 
> 赞同：0
> 
> 时间：2013-02-17T05:34:56.377
> 
> 标签：css, codeigniter, navigation, uri

经过这里和 CI 用户指南的大量研究（数小时），我已经走到了尽头。

我结合了几个答案来实现我想要的，它按预期工作，但没有设置`<li>`为活动。

看法

```
<ul class="nav">
              <?php
              $query = $this->db->query('SELECT menu_title, menu_url FROM menus');
               foreach($query->result_array() as $row): ?>
                <li <?php if ( $this->uri->uri_string() == $row['menu_url'] ): ?> class="active"<?php endif; ?>><a href="<?=$row['menu_url'] ?>"><?=$row['menu_title']?></a></li>
                <?php endforeach ?>

            </ul> 
```

当它读取时，它会从表格中提取一组导航选项并将它们布置出来（有效），但不会让 css 变为活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:56:17.670

让我试着为你充实一下：

**模型：**

```
class Menu_model extends CI_Model{
 public function get_title_and_url ()
 {
  $query = $this->db->query('SELECT menu_title, menu_url FROM menus');
  return $query->result_array();
 }
} 
```

**控制器：**

您可以通过不同的方式访问它，但现在我只是将菜单设置为自己的控制器。通常我会将菜单逻辑放入一个扩展 CI_Controller 的类中，这样我就可以在其他地方访问它

```
class Menu extends CI_Controller{
 public function __construct ()
 {
   parent::__construct();
   $this->load->model('menu_model','menu');
 }
 public function index ()
 {
   $view['menu_items'] = $this->menu->get_title_and_url();
   $view['current'] = $this->uri->uri_string();
   $this->load->view('menu_view',$view);
 }
} 
```

**看法：**

```
<ul class='nav'>
 <?php foreach($menu_items as $m):?>
   <li <?php echo ($m['menu_url'] == $current ? "class='active'" : "");?>>
     <a href='<?php echo $m['menu_url'];?>'><?php echo $m['menu_title'];?></a>
   </li>
 <?php endforeach;?>
</ul> 
```

我实现这样的方法是创建一个`MY_Controller`类来扩展 CI_Controller，在其中我将有这个用于创建菜单 HTML 的逻辑，然后将其传递给使用菜单的所有页面的母版页模板。这样我就不必在每个视图和控制器中重复自己。

[这](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)值得一看。Phil Sturgeon 有一篇关于这类事情的精彩博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:47:28.040

如果您在 if 条件中打印两个变量并检查该条件是否为真，那将很容易..

我认为在你的情况下`/`会给你带来麻烦，因为......`$this->uri->uri_string()`会`home`像你`/home`在桌子上一样返回......

试试这个

```
<?php if ( '/'.$this->uri->uri_string() == $row['menu_url'] ): ?> class="active"<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:41:18.770

如果您的 $row['menu_url'] 返回 /home 它将不匹配，因为 uri_string 将在没有 / 的情况下返回它

试试这个：

```
<?php
    $query = $this->db->query('SELECT menu_title, menu_url FROM menus');
    foreach($query->result_array() as $row): ?>
    $url = trim($row['menu_url'],"/");
    <li <?php if ( $this->uri->uri_string() == $url): ?> class="active"<?php endif; ?>><a href="<?=$row['menu_url'] ?>"><?=$row['menu_title']?></a></li>
<?php endforeach ?> 
```

就我个人而言，我会打破它并使用三元 if 来使其更清洁但个人喜好。

```
<?php
    $query = $this->db->query('SELECT menu_title, menu_url FROM menus');        
    $uri = $this->uri->uri_string();
    foreach($query->result_array() as $row): ?>
    $url = trim($row['menu_url'],"/");
    <li <?php echo ($uri== $url) ? 'class="active"' : ''; ?>><a href="<?=$row['menu_url'] ?>"><?=$row['menu_title']?></a></li>
<?php endforeach ?> 
```

# ios - iOS UITableView 正在绘制奇怪的单元格

> ID：14918309
> 
> 赞同：2
> 
> 时间：2013-02-17T05:37:02.463
> 
> 标签：ios, uitableview, tableview, uiswitch

我有一个 UITableView，它应该只在第一部分第一行显示一个 UISwitch，但由于某种原因，开关显示在第四部分。此外，当开关打开/关闭时，一个新的 UISwitch 会出现在另一个单元格中。它的行为非常奇怪。任何帮助将不胜感激。

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    PrettyTableViewCell *cell = [tableViewdequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[PrettyTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.tableViewBackgroundColor = tableView.backgroundColor;
    }

    [cell prepareForTableView:tableView indexPath:indexPath];
    cell.cornerRadius = 10;

    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            cell.textLabel.text = @"Push Notifications";
            pushNotificationSwitch = [[UISwitch alloc] init];
            pushNotificationSwitch.on = pushSwitchState;
            cell.accessoryView = pushNotificationSwitch;
            [pushNotificationSwitch addTarget:self action:@selector(pushSwitch:) forControlEvents:UIControlEventValueChanged];
            cell.userInteractionEnabled = YES;
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }
    }

    if  (indexPath.section == 1) {
        if (indexPath.row == 0) {
            cell.textLabel.text = @"Department Based";
            if (departmentBased) {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }
            else {
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
            cell.userInteractionEnabled = YES;
        }
        if (indexPath.row == 1) {
            cell.textLabel.text = @"Location Based (GPS)";
            if (locationBased) {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }
            else {
                cell.accessoryType = UITableViewCellAccessoryNone;
            }            cell.userInteractionEnabled = YES;
        }
    }

    if (departmentBased) {
        if (indexPath.section == 2) {
            if (indexPath.row == 0) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 1) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 2) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 3) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 4) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 5) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 6) {
                cell.textLabel.text = @"xxxxxx";
            }
        }
        if (indexPath.section == 3) {
            if (indexPath.row == 0) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 1) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 2) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 3) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 4) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 5) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 6) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 7) {
                cell.textLabel.text = @"xxxxxx";
            }
            if (indexPath.row == 8) {
                cell.textLabel.text = @"xxxxxx";
            }
        }
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:41:25.403

您正在体验 iOS 中单元格可重用性的影响。您对所有单元格使用相同的单元格标识符，因此当您滚动时，旧单元格将变得可用并从`tableView`.

尝试在以下情况下立即设置`cell.accessoryView`为零：

```
if (cell == nil) {
    cell = [[PrettyTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    cell.tableViewBackgroundColor = tableView.backgroundColor;
}

cell.accessoryView = nil; 
```

或者，为 first 选择一个不同的单元格标识符`indexPath`，确保在出队时考虑到这一点。

```
BOOL firstCell = indexPath.row == 0 && indexPath.section == 0;
NSString *CellIdentifier = firstCell ? @"CellWithSwitch" : @"Cell";

PrettyTableViewCell *cell = 
       [tableViewdequeueReusableCellWithIdentifier: CellIdentifier];

if (cell == nil) {
    cell = [[PrettyTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    cell.tableViewBackgroundColor = tableView.backgroundColor;
} 
```

# json - Gson toJson() 方法无法为扩展 com.mongodb.BasicDBObject 的对象类生成 json 字符串

> ID：14918318
> 
> 赞同：0
> 
> 时间：2013-02-17T05:39:05.470
> 
> 标签：json, mongodb, gson

当我的类扩展 MongoDB 类 com.mongodb.BasicDBObject 时，我在使用 Gson.toJson() 方法生成包含所有成员的字段名称和值的 json 字符串时遇到了麻烦。以下是代码片段：

```
import com.mongodb.BasicDBObject;
...
public class TestMongo extends BasicDBObject {
   protected String objectId;
   protected String userId;
   public TestMongo(String oid, String uid) {
     this.objectId = oid;
     this.userId = uid;
   }
   /* getters and setters... */
} 
```

主要方法测试输出：

```
TestMongo test = new TestMongo("sample object id","sample user id");
System.out.println((new Gson()).toJson(test)); 
```

控制台输出：

{}

有谁知道是否有办法从我的扩展 BasicDBObject 的对象类中获取 json 字符串？

# cakephp - 如何在 cakephp 中为后端控制器创建一个单独的文件夹

> ID：14918329
> 
> 赞同：1
> 
> 时间：2013-02-17T05:40:46.360
> 
> 标签：cakephp, controller, backend, scaffolding

我在我的项目中使用 cakephp。我想创建一个后端面板，以便管理员可以管理所有类型的数据。网址可能是这样的：`http://localhost/cake_project/admin/controller/action`. 我的问题是我可以为后端创建一个单独的控制器文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:21:09.817

[前缀路由](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)可能是您需要的。要为控制器文件指定备用位置，尽管您必须使用[App::build()](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App%3a%3abuild)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T08:19:44.513

你有一个定义 core.php 在`Configure::write('Routing.prefixes', array('admin'));`

route.php 文件放入

```
Router::connect(
    "/{admin}/:controller",
    array('action' => 'index', 'prefix' => admin, admin => true)
); 
```

# sql-server - 比较两个不同表中的值并将它们相乘

> ID：14918337
> 
> 赞同：0
> 
> 时间：2013-02-17T05:41:58.007
> 
> 标签：sql-server

我想不出一个足够好的标题，但这是我的问题。

我在一个应用程序中有几个表，这些表以及其他一些东西将为电力公司的消费者生成每月账单。具体涉及三个表，1）消费者表2）计费历史表3）费率表

对于不同类型的连接，每单位消耗的价格不同，例如，每月消耗多达 50 个单位的**国内连接**将比每月消耗 50 个单位的商业连接低得多的费用。

结构位于[http://www.sqlfiddle.com/#!3/eeab6](http://www.sqlfiddle.com/#!3/eeab6)

Consumers 表中的 application_nature 字段定义了它是 COMMERCIAL 或 DOMESTIC 的连接类型。

billing_history2 表中的 payment_status 存储一个布尔值，指示是否已支付账单。

使用此查询，我生成消费者的总消费和欠款（如果有）。

```
SELECT BILLING_HISTORY2.CONSUMER_ID, count(reading) AS 'DEFAULT PERIOD', SUM(reading) AS 'Total Reading'  from BILLING_HISTORY2 where payment_status=0 GROUP by billing_history2.CONSUMER_ID; 
```

我在这里想要的是生成 1) 基于自上次支付账单以来消耗的总单位的月度账单。2) 基于自该月以来消耗的总单位数的月度账单，然后加上欠款。

有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:19:16.760

1) 查询最后一张账单的支付时间。就像是：

```
SELECT FROM BILLING_HISTORY2 where ID = 'CUSTOMERIDHERE' ORDER BY READING_MONTH_YEAR DESC 
```

2) 获取第一条记录的日期变量并查找在该日期或之后出现的客户的所有读数（这假设人们支付了当天的费用）。

3) 然后，当您遍历与第 2 步中的条件匹配的每条记录时，将总费用添加到变量中。

4) 接下来，如果“payment_status”表示上一个账单尚未支付，请重复步骤 1-3，确保忽略上个月的日期记录（并获取 BEFORE THAT 之前的月份）。此外，仅搜索日期范围内的值。因此，如果之前的账单从 2 月 1 日开始，那么您上个月的范围应该是 1 月 1 日至 1 月。31\. 然后，如果未支付该账单，请搜索 12 月 1 日至 12 月之间的费用。31\. 基本上，您需要一次返回 1 个月，直到找到已付帐单（或不存在的帐单，表示在那之前没有服务），然后将您找到的值加到总金额中。

# python - 通过 UDP 发送字节列表

> ID：14918338
> 
> 赞同：3
> 
> 时间：2013-02-17T05:42:00.457
> 
> 标签：python, sockets, udp

我试图简单地通过 UDP 发送一个字节列表，代码基于示例 Python 套接字模块。客户端/服务器传输适用于字符串。似乎使用字节数组是要走的路，但是，收到的长度似乎取决于内容。发送 1,2,3,4,5,6 可以正常工作，但如果我将 6 更改为 10 或 11，我只会在服务器上收到 5 个字节。Ubuntu 上的 Python 2.7.3。我不明白什么？

客户：

```
data = bytearray([1,2,3,4,5,6])
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(data, (HOST, PORT)) 
```

服务器：

```
class MyUDPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        data = self.request[0].strip()
        socket = self.request[1]
        print len(data)
        idata = map(ord, data)
        print len(idata)
        print idata[0],idata[1],idata[2],idata[3] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T05:45:44.503

10 和 11 分别是换行和制表符的 ASCII 码。strip() 调用正在从数据中删除它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T05:48:20.720

不要使用 strip() - 这是为了从字符串中删除空格和换行符。在您的情况下，它认为 10 是空格并将其删除。

```
>>> len(bytearray([1,2,3,4,5,10]))
6
>>> len(bytearray([1,2,3,4,5,10]).strip())
5 
```

# java - 将数据从服务传递到当前活动

> ID：14918342
> 
> 赞同：0
> 
> 时间：2013-02-17T05:42:51.063
> 
> 标签：java, android, google-cloud-messaging

我正在构建一个使用 GCM 推送消息和通知的聊天应用程序。

在应用程序中，我有一个列出对话线程 ( `ConversationListActivity`) 的活动和一个显示线程内对话的活动 ( `ConversationActivity`)。

我在 GCMIntentService 的 onMessage 方法中捕获新消息。通知有效，消息按预期记录。

```
public class GCMIntentService extends GCMBaseIntentService {
  @Override
  protected void onMessage(Context context, Intent intent) {
    Bundle extras = intent.getExtras();
    String sender = extras.getString("sender");
    String message = extras.getString("message");

    ConversationModel model = new ConversationModel(context);
    model.open();
    model.createMessage(sender, message.trim(), true, true, ConversationMessage.STATUS_SENT);
    model.close();

    this.createMessageNotification(context, sender, message);
  }
} 
```

问题是，如果 GCM 在活动时推送新消息`ConversationActivity`，我不希望它生成通知。相反，我希望对话直接刷新。

`ConversationActivity`每次有来自 GCM 的新消息时，我如何告诉活动刷新消息列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T08:29:16.117

我自己找到了解决方案。我确信这不是最好的方法，但至少它对我有用。

创建一个派生`Handler`用于存储活动的单例类`ConversationActivity`。在该`handleMessage`方法中，处理将从告诉处理程序告诉活动刷新对话的服务分派的消息。

```
public class ActiveMessageHandler extends Handler {

  private static ActiveMessageHandler _instance = new ActiveMessageHandler();
  private Activity _activity = null;

  @Override
  public void handleMessage(Message message) {
    if(message.obj.toString().equals("gcmNewMessage") && _activity != null)
        ((ConversationActivity)_activity).repopulateList();

    super.handleMessage(message);
  }

  public static ActiveMessageHandler instance() {
    return _instance;
  }

  public void setActivity(Activity activity) {
    _activity = activity;
  }

  public Activity getActivity() {
    return _activity;
  }

} 
```

然后，在 中`ConversationActivity`，在处理程序中设置活动属性。

```
public class ConversationActivity extends Activity {
  @Override
  public void onStart() {
    super.onStart();
    ActiveMessageHandler.instance().setActivity(this);
  }

  @Override
  public void onStop() {
    super.onStop();
    ActiveMessageHandler.instance().setActivity(null);
  }
} 
```

最后，在服务中，检查处理程序中的活动是否不为空，并向处理程序发送消息以刷新会话。

```
public class GCMIntentService extends GCMBaseIntentService {
    @Override
    protected void onMessage(Context context, Intent intent) {
        Bundle extras = intent.getExtras();
        String sender = extras.getString("sender");
        String message = extras.getString("message");

        ConversationModel model = new ConversationModel(context);
        model.open();
        model.createMessage(sender, message.trim(), true, true, ConversationMessage.STATUS_SENT);
        model.close();

        // if ConversationActivity is active, send a message to handler to refresh the conversation
        if(ActiveMessageHandler.instance().getActivity() != null)
        {
            Message msg = Message.obtain(ActiveMessageHandler.instance());
            msg.obj = "gcmNewMessage";
            ActiveMessageHandler.instance().sendMessage(msg);

            // Optionally, play a notification sound
            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
            r.play();
        }
        else
            createMessageNotification(context, sender, message);
    }
} 
```

# c# - 如何搜索和查找单词（对大小写不敏感）

> ID：14918346
> 
> 赞同：0
> 
> 时间：2013-02-17T05:44:00.590
> 
> 标签：c#, search, character, uppercase, lowercase

我写了一个代码：

```
string strSearch = textBox1.Text;
XDocument xdoc;
List<string> lstItemsForAdd;
lstItemsForAdd = xdoc.Descendants("name")
                        .Where(item => item.Value.Contains(strSearch))
                        .Select(item => item.Value)
                        .Take(5)
                        .OrderBy(item => item)
                        .ToList(); 
```

现在这段代码对查找的大小写敏感......
我怎么能在不敏感大小写的情况下进行搜索，
但我不想将项目和 strSearch 转换为小写/大写字符
，所以我该怎么做做 ？

谢谢和亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:56:09.450

试试这个

```
string strSearch = textBox1.Text;
XDocument xdoc;
List<string> lstItemsForAdd;
lstItemsForAdd = xdoc.Descendants("name")
                        .Where(item => item.Value.IndexOf(strSearch. StringComparison.OrdinalIgnoreCase) >= 0)
                        .Select(item => item.Value)
                        .Take(5)
                        .OrderBy(item => item)
                        .ToList(); 
```

# java - java.lang.ClassNotFoundException: org.jdom.JDOMException

> ID：14918347
> 
> 赞同：5
> 
> 时间：2013-02-17T05:44:12.880
> 
> 标签：java, rss, jdom, rome

尝试加载 rss 页面时收到以下错误消息：

```
Feb 16, 2013 9:08:44 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [news-feed] in context with path [/publisher] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: org.jdom.JDOMException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at com.sun.syndication.io.SyndFeedOutput.<init>(SyndFeedOutput.java:44) 
```

触发错误的代码行是：

```
 SyndFeedOutput output = new SyndFeedOutput(); 
```

我已经用谷歌搜索了这个错误消息并阅读了几篇关于它的帖子，包括这个网站上的帖子。这些帖子表明将 jdom.jar 添加到构建路径将导致错误消失。但是，我已将与 jdom-2.0.4.jar 捆绑在一起的所有 8 个 jar 文件添加到我在 eclipse 中的构建路径中，但每次尝试加载 rss 页面时错误消息仍然存在。

我想知道问题是否可能与我正在使用 jdom-2.0.4.jar 的事实有关，而这可能是较旧的语法：

```
 SyndFeedOutput output = new SyndFeedOutput(); 
```

此错误消息的其他帖子均来自旧版本的 jdom。也许有一些新的语法可以在新版本的 jdom 中调用 SyndFeedOutput() 的等价物？

谁能帮我解决这个错误信息？

## **编辑：**

为了解决 Nocmear 的建议，我已确认以下 9 个 jar 文件是我的应用程序的构建路径中包含的唯一与 jdom 或 rome 相关的 jar 文件：

```
jaxen-1.1.4.jar  
jdom-2.0.4.jar  
jdom-2.0.4-contrib.jar  
jdom-2.0.4-javadoc.jar  
jdom-2.0.4-junit.jar  
jdom-2.0.4-sources.jar  
rome-1.0.jar  
xercesImpl.jar  
xml-apis.jar 
```

**第二次编辑：**

* * *

正如 rolfl 所建议的，我下载了 jdom-1.1.3 并将其添加到我在 Eclipse 中的应用程序的构建路径中。

当我在网络浏览器中加载 rss 页面时，tomcat 给了我以下错误日志：

```
java.lang.NoClassDefFoundError: org/jdom/JDOMException
    com.sun.syndication.io.SyndFeedOutput.<init>(SyndFeedOutput.java:44)
    publisher.web.NewsFeedServlet.doGet(NewsFeedServlet.java:68)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

java.lang.ClassNotFoundException: org.jdom.JDOMException
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    com.sun.syndication.io.SyndFeedOutput.<init>(SyndFeedOutput.java:44)
    publisher.web.NewsFeedServlet.doGet(NewsFeedServlet.java:68)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

现在包含在我的构建路径中的相关 jar 文件是：

```
ant.jar  
jaxen.jar  
jaxen 1.1.4.jar  
jdom-2.0.4.jar  
jdom-2.0.4-contrib.jar  
jdom-2.0.4-javadoc.jar  
jdom-2.0.4-junit.jar  
jdom-2.0.4-sources.jar  
rome-1.0.jar  
xalan.jar  
xerces.jar  
xercesImpl.jar  
xml-apis.jar 
```

此外，我尝试按照 Nocmear 的建议将这些 jars 添加到 tomcat 中的 bin 文件中，但这只是在 eclipse 中触发了错误消息，所以我将它们放回 eclipse 应用程序中。

也许我不明白人们的建议。或者也许有人可能有其他建议。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T13:34:22.410

您的类路径中有 JDOM 2.x 版本，但代码正在寻找 1.x 版本。

下载 JDOM 1.1.3 并将其与JDOM 2.x 的*一个*（最新）版本一起放入您的类路径中。JDOM 1.x 中的所有包都是 org.jdom.* ... JDOM 2.x 中的所有包都是 org.jdom2.*

请参阅此说明：[JDOM2 迁移](https://github.com/hunterhacker/jdom/wiki/JDOM2-Migration-Issues)

和 JDOM 站点的首页：[向下阅读到项目状态](http://jdom.org/)

罗尔夫

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T04:36:16.200

M8、rome-1.0 依赖于 jdom-1.0。

所以你可能想改变使用 jdom-1.0.jar 而不是 jdom-2.0.x ro jdom-1.1.3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T05:53:31.020

请检查 jar 的版本。您可以导入两个 jar，一个旧的，一个新的，然后删除旧的，或者下载最新的 jar。

# javascript - 如何使用 JS 根据表单输入重定向到特定页面？

> ID：14918348
> 
> 赞同：0
> 
> 时间：2013-02-17T05:45:07.047
> 
> 标签：javascript, forms, redirect

我是 javascript 新手，这可能非常简单明了，但我在任何地方都找不到答案。

我想要一个特定的表单响应来将用户发送到特定页面，例如，键入“one”并按 Enter 会将他们带到页面“/one.html”，如果这有意义的话？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:46:29.250

```
document.location = document.getElementById('yourinputfield').value() + '.html'; 
```

# java - 用于快速渲染的 AffineTransform 与 BufferedImage

> ID：14918352
> 
> 赞同：0
> 
> 时间：2013-02-17T05:46:10.803
> 
> 标签：java, canvas, rendering, bufferedimage, affinetransform

使用画布，渲染具有转换的图像的最快方法是什么：

1.  在渲染对象后使用 AffineTransorm 将图形对象恢复到其原始状态或...
2.  创建一个新的 BufferedImage，在其上绘制内容和转换，然后将其绘制到屏幕上。

我真的不能提供更多信息，我只是在想什么最适合我正在创建的游戏。此外，如果有更快的方法，任何其他建议将不胜感激。

# c# - 匿名类型的交换项位置

> ID：14918355
> 
> 赞同：1
> 
> 时间：2013-02-17T05:46:29.227
> 
> 标签：c#, linq, linq-to-entities, anonymous-types

我使用以下代码填充了匿名类型的排序列表。

```
var list = service.GetTenantsOverview()
                  .TenantsOverview
                  .Cast<TenantOverview>()
                  .Select(t => new { t.TenantId, t.Tenantnumber })
                  .OrderBy(t => t.Tenantnumber)
                  .ToList(); 
```

问题是，我需要将第三个项目移动到第一个位置。这意味着，我想将租户编号“任何”移动到第一个位置。但是没有找到任何合适的方法来做到这一点。

![匿名类型列表生成并排序](../Images/39666f9f7d4878a0828af57ae66f8dd7.png)

对于解决方案，我编写了以下代码。

```
var item = list.First(f => f.Tenantnumber == "Any");
        list.Remove(item);
        list.Insert(0, item); 
```

效果很好。 ![我的问题的解决方案](../Images/3e3be81b7219cfc2235e9c7775365d49.png)

我想知道如何在单个语句中使用 LINQ 完成上述工作？或者是否可以在单个语句中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:50:33.390

尝试按租户编号是否为“Any”进行初始排序（注意默认情况下`false`在前面`true`，因此您需要将其降序排列）：

```
busConfigurationService.GetTenantsOverview()
                       .TenantsOverview
                       .Cast<TenantOverview>()
                       .Select(t => new { t.TenantId, t.Tenantnumber })
                       .OrderByDescending(t => t.Tenantnumber == "Any")
                       .ThenBy(t => t.Tenantnumber)
                       .ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:50:55.510

使用 OrderBy 然后使用 ThenBy

```
yourCurrentQuery.OrderBy(t => t.Tenantnumber == "Any" ? 0 : 1)
                .ThenBy(t => t.Tenantnumber); 
```

[Ani 的答案](https://stackoverflow.com/a/14918378/414076)大多展示了相同的技术，并且肯定会奏效。但是，我通常不喜欢依赖布尔值进行排序，因为我发现它不是很直观。我不希望所有人都会分享我相同的挂断。

# python - 替换数组Python中的整数

> ID：14918357
> 
> 赞同：2
> 
> 时间：2013-02-17T05:47:20.863
> 
> 标签：python, numpy

他们告诉我在问题的[第二部分发布一个新问题](https://stackoverflow.com/questions/14917975/accessing-elements-in-array-python)。

有什么方法可以用我创建的 8 个数组整数替换多维数组中的前 8 个整数，例如：

```
 import Image
    import numpy as np

    im = Image.open("C:\Users\Jones\Pictures\1.jpg")
    pix = im.load() 
array=[0, 3, 38, 13, 7, 18, 3, 715]
    r, g, b = np.array(im).T
    print r[0:8] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T05:57:14.803

试试这个：

```
r[0, :8] = array 
```

看起来您可以阅读[有关 indexing 的 numpy 文档](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)。

# javascript - 表单验证 - 双重验证

> ID：14918362
> 
> 赞同：0
> 
> 时间：2013-02-17T05:48:06.583
> 
> 标签：javascript, forms, validation

我需要验证一个表格，一切正常，除了一个部分。

我需要验证是否未填写“remail”字段，然后检查是否填写了“rsms”字段。
反之亦然（如果“rsms”字段已填写，则检查“remail”字段是否已填写）
如果两者均未填写，则返回 false，并提醒两者均未填写。

我还需要验证，如果“remail”和“rsms”字段都已填写，它会返回 false，并且还会提醒您只能填写一个字段！

我用于其他领域的代码：

```
var x=document.forms["form"]["remail"].value;
if (x==null || x=="")
  {
  alert("The Receivers Email field must be filled out!");
  return false;
  } 
```

请帮忙，
谢谢，
乍得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:59:18.103

```
var remail=document.forms["form"]["remail"].value;
var rsms=document.forms["form"]["rsms"].value;

if (remail==null && rsms ==null){
alert ("Both empty");
return false;
}
else if (remail !=null && rsms !=null){
alert ("Both fill");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:59:55.537

这行得通吗？（请原谅伪代码）

```
if (remail != "") {
    if (rsms != "") {
        // RSMS & REMAIL ARE FILLED
    }
    else {
        // REMAIL IS FILLED, RSMS IS NOT
    }
}
else {
    if (rsms == "") {
        // RSMS & REMAIL ARE NOT FILLED
    }
    else {
        // REMAIL IS NOT FILLED, RSMS IS
    }
} 
```

# iphone - AdMob 中介 SDK 不会投放失败的广告？

> ID：14918370
> 
> 赞同：0
> 
> 时间：2013-02-17T05:49:28.163
> 
> 标签：iphone, ios, objective-c, admob, iad

。H

```
#import <UIKit/UIKit.h>
#import <iAd/iAd.h>

#import "GADBannerView.h"

@interface MasterTableViewController : UITableViewController <GADBannerViewDelegate >{

GADBannerView *bannerView_;

}

@end 
```

.m

```
#import "MasterTableViewController.h"

@interface MasterTableViewController ()

@end

@implementation MasterTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error
{
    NSLog(@"Ad failed");
    bannerView_.hidden = YES;
}

- (void)adViewDidRecieveAd:(GADBannerView *)view
{
    NSLog(@"Ad recieved");
    bannerView_.hidden = NO;
}

- (void) repeatAdRequest
{
    [bannerView_ loadRequest:[GADRequest request]];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [bannerView_ setDelegate:self];

    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

    bannerView_.adUnitID = @"ID_HERE";

    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

    [bannerView_ loadRequest:[GADRequest request]];

} 
```

问题是，当我在手机上完全禁用网络时，没有广告出现（显然），但它也不会抛出`didFailToReceiveAdWithError`. 然后，我在手机上重新启用我的网络，但没有任何反应。如果失败，广告不会刷新？我查看了许多其他声称可以修复它的帖子，`[bannerView_ setDelegate:self];`该应用程序在收到广告或不收到广告时都会抛出。但我似乎无法弄清楚......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T19:26:20.303

问题是你试图在一个 nil 对象上设置委托......在你分配它之前。正确的操作顺序是

```
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
[bannerView_ setDelegate:self]; 
```

# java - 更改 System.in 并使扫描程序使用一个 ByteArrayInputStream？

> ID：14918372
> 
> 赞同：2
> 
> 时间：2013-02-17T05:49:48.367
> 
> 标签：java, testing, junit, user-input

我的任务是编写一个测试程序来评估学生的作业是否有效。学生们正在用 Java 编写一个石头、纸、剪刀游戏，并通过要求用户在命令行中输入来上交一个玩 n 轮游戏的单一班级。所有这些学生都将使用一个或多个 Scanner 对象从控制台读取输入，因此我需要让我的测试程序模拟一些预定的输入并检查预期的输出。我覆盖 System.in，因此当学生调用 时`Scanner myReader = new Scanner(System.in);`，我可以指示输入是什么（使用 ByteArrayInputStream）。要了解我是如何开始的：

```
public class TestRockPaperScissors extends RockPaperScissors{
public static void main(String[] args){
    InputStream stdin = System.in;
    try {
    System.setIn(new ByteArrayInputStream("<test inputs here>".getBytes()));
    RockPaperScissors.main(null); // This will be student code in another file.
    } finally {
        System.setIn(stdin);
    }

} 
```

问题是，这只适用于学生只使用 System.in 创建单个扫描仪的情况。否则，我会收到错误，因为没有输入可供第二个 Scanner 使用 .next() 。

TL;DR... 鉴于我看不到 RockPaperScissors.main(null) 调用的来源，我如何为任意数量的扫描仪模拟控制台输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:52:45.480

Ask the students to write an object that runs RockPaperScissors by getting values from an InputStream, and writing results to a PrintStream, i.e. to write an implementation of the following interface

```
public interface RockPaperScissors {
    void runGame(InputStream in, PrintStream out) throws IOException;
} 
```

That will allow them to test their own program using an instance of their class taking System.in and System.out as argument.

And that will allow you to unit test their program by passing your own ByteArrayInputStream containing the sequence of inputs, and your own ByteArrayOutputStream containing the output generated by the program, that you'll also be able to verify.

BTW, shouldn't the students learn to unit test their own code?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:40:26.900

[您可以使用系统规则](http://stefanbirkner.github.com/system-rules/)库的`StandardOutputStreamLog`和`TextFromStandardInputStream`规则为命令行界面编写更清晰的测试。

```
public class RockPaperScissorsTest() {
  @Rule
  public StandardOutputStreamLog log = new StandardOutputStreamLog();

  @Rule
  public TextFromStandardInputStream systemInMock = emptyStandardInputStream();

  @Test
  public void test1() {
    systemInMock.provideText("<test input>");
    RockPaperScissors.main(null);
    assertTrue(log.getLog().contains("<expected output>"));
  }

  @Test
  public void test2() {
    systemInMock.provideText("<another test input>");
    RockPaperScissors.main(null);
    assertTrue(log.getLog().contains("<expected output>"));
  }
} 
```

# java - 关于访问私有成员变量

> ID：14918373
> 
> 赞同：0
> 
> 时间：2013-02-17T05:49:51.043
> 
> 标签：java

我正在阅读一篇关于私有访问说明符的文章，何时使用私有以及它在以下 url 的封装方面提供了什么好处[关于私有访问说明符](http://javarevisited.blogspot.in/2012/03/private-in-java-why-should-you-always.html)

但是本文中关于访问类外部的私有变量的一件事并不清楚。尽管私有方法或变量在类外部无法访问，但可以通过使用 setAccessible(true) 并在其中更改 private 来通过反射访问它们能见度。

你能不能给我看一个小例子，这样我也能从技术上理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:28:38.230

类的“私有”成员只能在程序中访问，也可以通过它自己的对象访问。即使是同一包中的继承类也无法通过组合访问。观察代码。可以从相同的类方法访问私有变量。

```
class Test
{
private int x = 10;
public void display()
{
       System.out.println(x);
}
}
public class Demo extends Test
{
public static void main(String args[])
{
   Demo d1 = new Demo();
   System.out.println(d1.x);   // error

   Test t1 = new Test();
   System.out.println(t1.x);   // error , it is composition (has-a relationship)     
   t1.display();                       // this works
}
} 
```

我在网上搜索了这个答案。我在 way2java.com 的主题[公共方法和私有变量中找到](http://way2java.com/oops-concepts/public-methods-and-private-variables/)

# vb6 - 如何将组合框值传递给 sql 语句

> ID：14918376
> 
> 赞同：0
> 
> 时间：2013-02-17T05:50:20.917
> 
> 标签：vb6

我正在 vb6.0 中创建一个项目，我的表单名称是 dariissue，组合框名称是 combo1。我想在 sql 语句中传递 combo1 的选定值。我想将此组合框值与 dariissue 表的承包商字段条目相匹配。我想显示结果记录集的报告。我正在使用数据环境->command1->properties 标签来编写 sql 查询。我正在使用以下查询

```
select * from dariissue where contractor like forms!dariissue!combo1 
```

但它显示空白报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:54:55.177

您需要访问组合框的列表值或其 itemData 值（如果您在其中放入任何内容）。

[http://www.vb6.us/tutorials/visual-basic-combo-box-tutorial](http://www.vb6.us/tutorials/visual-basic-combo-box-tutorial)

有一个很好的例子 - 查看 Click 事件部分。只有 'combo1' 将引用控件本身，而不是选定的值。

# ios - 如何通过 iOS 中的 id 将现有值替换为另一个值？

> ID：14918377
> 
> 赞同：1
> 
> 时间：2013-02-17T05:50:26.893
> 
> 标签：ios, objective-c, xcode, uitableview

如何根据索引将值放入特定行的特定文本字段中？我的结果只在底部或最后一个单元格更新......

目前，它要求自己获取当前值。我对这个问题的唯一问题是它不会更新当前行，而是更新索引路径的最后一行。

![在此处输入图像描述](../Images/6c9feeeab579d99f0deb6ce3229c1d4e.png)

.h 文件

//当label1和label 2连接时会导致程序崩溃。连接不能将原型插座作为目标

```
@property (nonatomic, strong) IBOutlet UILabel *label1; //not connected
@property (nonatomic, strong) IBOutlet UILabel *label2; //not connected

@property (nonatomic, weak) IBOutlet UIStepper *stepper; // not conneted
-(IBAction)stepperChangedValue:(UIStepper *)sender; //connected to uistepper 
```

.m 文件

```
-(IBAction)stepperChangedValue:(UIStepper *)sender{

//my incremental number is here
NSInteger i = [sender value];
NSLog(@"value: %i",i);
UITextField *textField = (UITextField*)[self.view viewWithTag:2];
textField.text = [NSString stringWithFormat:@"%d",i ];

//find row #
UITableViewCell *cell = (UITableViewCell *)[[sender superview] superview];
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
NSLog(@"value: %i",indexPath.row); //I have my row index here

//How do I put my sender value back into the correct row of my table?
}

// Return number of sections in table (always 1 for this demo!)
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [myData count];
}

// Return the amount of items in our table (the total items in our array above)
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [myData count];
}

// Return a cell for the table
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // A cell identifier which matches our identifier in IB
    static NSString *CellIdentifier = @"StepperCell";

    // Create or reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Get the cell label using it's tag and set it
    UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
    [cellLabel setText:[myData objectAtIndex:indexPath.row]];

    // get the cell label using it's tag and set it
    UILabel *cellLabel2 = (UILabel *)[cell viewWithTag:2];
    [cellLabel2 setText:@"0"];

    return cell;
} 
```

多谢你们！我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:10:10.583

```
-(IBAction)stepperChangedValue:(UIStepper *)sender{

   //find row #
   UITableViewCell *cell = (UITableViewCell *)[[sender superview] superview];
   NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
   NSLog(@"value: %i",indexPath.row); //I have my row index here

    //my incremental number is here
    NSInteger i = [sender value];
    NSLog(@"value: %i",i);
   cell.textField.text = [NSString stringWithFormat:@"%d",i ]; // textField is an outlet for your textfield in your cell

} 
```

你的代码应该是这样的。您需要`textfield`在获得`cell`. 在您的代码中，您正在更改`textfield`with`tag 2`和 last`cell` `textfield`的文本`tag 2`。所以它也会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T04:11:48.263

您需要使用`UITableViewCell`该类。声明`label`,`outlet`和`action`每个类的方法。

**自定义单元格.h**

```
@property (weak, nonatomic) IBOutlet UILabel *lbl_title;

@property (weak, nonatomic) IBOutlet UIStepper *stepper;

@property (weak, nonatomic) IBOutlet UILabel *lbl_value;

- (IBAction)stepper:(UIStepper *)sender; 
```

**自定义单元格.m**

```
- (IBAction)stepper:(UIStepper *)sender {
NSUInteger value = sender.value;

 lbl_value.text =[NSString stringWithFormat:@"%d",value];

} 
```

# c++ - 确定 Plusequals 运算符语法

> ID：14918384
> 
> 赞同：0
> 
> 时间：2013-02-17T05:51:51.880
> 
> 标签：c++, operators, correctness

我对 c++ 相当陌生，并且正在尝试了解自定义运算符。我目前遇到的问题与定义我自己的 += 运算符以及解决它的最佳方法有关。这涉及一个简单的类，该类具有可以添加的公共 int 成员 (intValue)。据我所知，以下两个代码示例（我一次尝试过一个）在我的程序中的操作完全相同。“完全相同”是指我得到相同的结果并创建相同数量的对象。

哪一个更正确（标准做法），为什么？

```
Utility& operator +=(Utility& left, Utility right)
{
    return left = left + right;
} 
```

或者

```
void operator +=(Utility& left, Utility right)
{
    left = left + right;
} 
```

而且，如果重要的话，他们打电话给接线员：

```
Utility operator +(Utility left, Utility right)
{
    return Utility(left.intValue + right.intValue);
} 
```

每当调用其构造函数时，该类都会打印出一条消息，因此我可以判断是否正在创建一个新对象。基于这两种形式的 += 我在这里尝试导致创建相同数量的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:59:59.987

由于`+=`通常会修改其左侧操作数，因此您通常宁愿*不*根据`operator+`（需要创建一个临时值来保存结果）来实现它。

同样，由于您无法合理地对左操作数进行转换，因此它实际上应该是一个成员函数。

```
Utility &Utility::operator+=(Utility const &right) { 
    intValue += right.intValue;
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T06:07:05.420

通常，人们希望`+=`修改左侧操作数，如果您避免使用它来实现它`operator +`会导致创建一个临时值会更好。

除了，

```
Utility& operator +=(Utility& left, Utility right)
{
    return left = left + right;
} 
```

*在返回结果*的意义上比另一个更好。这使用户能够编写复合表达式，例如：

```
Utility utility1 , utility2;
Utility ut += (utility1 += utility2); 
```

但是如果你可以在`Utility`没有 的情况下修改内部`operator+`，那就更好了。

# mongodb - 无法聚合以使用数组元素返回结果

> ID：14918385
> 
> 赞同：1
> 
> 时间：2013-02-17T05:51:55.570
> 
> 标签：mongodb, aggregation-framework

我有如下文件：

```
{
  "_id" : ...
  "args" : {
    "pos" : [ <x>, <y> ],
     ...
  }
} 
```

我正在尝试使用以下聚合管道获取 <x> 和 <y> 值的最小值和最大值。它运行但我没有得到任何值。

```
db.main.aggregate([
    { '$match': {
        "args.pos": { '$exists': true} }
    },
    { '$project':
        {
            'x': "$args.pos.0",
            'y': "$args.pos.1"
        }
    },
    { '$group':
        {
            '_id': 'pos',
            'xmin': { '$min': '$x' },
            'xmax': { '$max': '$x' },
            'ymin': { '$min': '$y' },
            'ymax': { '$max': '$y' },
            'hits': { '$sum': 1 }
        }
    },
    { '$project': {
        'hits': '$hits',
        'xmin': '$xmin',
        'xmax': '$xmax',
        'ymin': '$ymin',
        'ymax': '$ymax',
        '_id': 0 }
    }
]) 
```

我得到以下输出：

```
{
        "result" : [
                {
                        "xmin" : [ ],
                        "xmax" : [ ],
                        "ymin" : [ ],
                        "ymax" : [ ],
                        "hits" : 281
                }
        ],
        "ok" : 1
} 
```

我尝试了各种不同的方法来访问 <x> 和 <y> 值，但我是新手，显然我错过了一些东西。任何帮助，将不胜感激。

我认为问题是我无法进入阵列。我尝试了以下更简单的查询，但也没有成功：

```
 db.main.findOne({'function':'map'},{"arguments.pos":1})
{
        "_id" : ObjectId("5110407a2c8bea0f0d0000ce"),
        "arguments" : {
                "pos" : [
                        -87.90774999999735,
                        42.11036897863933
                ]
        }
}

db.main.findOne({'function':'map'},{"arguments.pos.0":1})
{
        "_id" : ObjectId("5110407a2c8bea0f0d0000ce"),
        "arguments" : {
                "pos" : [ ]
        }
}

 db.main.findOne({'function':'map'},{"arguments.pos[0]":1})
{ "_id" : ObjectId("5110407a2c8bea0f0d0000ce"), "arguments" : { } } 
```

如果这很重要，我正在从 mongodb 2.2 运行 mongo shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:25:44.883

您不能`pos.0`在投影中使用语法。在 a`find`中，您可以改用`$slice`运算符，[但](https://jira.mongodb.org/browse/SERVER-6074)在`$project`.

但是，您可以通过其他方式执行此操作；使用`$unwind`and another`$group`来提取`x`and`y`值：

```
db.main.aggregate([
    {$match: {'args.pos': {$exists: true}}},
    {$unwind: '$args.pos'},
    {$group: {
        _id: '$_id',
        x: {$first: '$args.pos'},
        y: {$last: '$args.pos'}
    }},
    {$group: {
        _id: null,
        xmin: {$min: '$x'},
        xmax: {$max: '$x'},
        ymin: {$min: '$y'},
        ymax: {$max: '$y'},
        hits: {$sum: 1}
    }},
    {$project: {_id: 0, xmin: 1, xmax: 1, ymin: 1, ymax: 1, hits: 1}}
]) 
```

# javascript - 动态创建json时未终止的字符串文字错误

> ID：14918392
> 
> 赞同：0
> 
> 时间：2013-02-17T05:52:58.020
> 
> 标签：javascript, jquery, django

我正在尝试创建一个 json 变量以传递给幻灯片插件。这是`head`部分中的代码：

```
<script type="text/javascript">
    var photos = []; 
    {% for service in company.services.all %}   
        photos.push({
            "firstline" : "{{service.name}}",
            "secondeline":"{{service.description|truncatewords_html:50}}"
        });
    {% endfor %}
</script> 
```

`service.description`包含 html 标签，使用`description`会导致此错误：

```
unterminated string literal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:59:22.613

您可能没有转义引号。`service.description`, 是 HTML，可能包含一些引号。当你使用 django 只是把它放在 JS 代码中时，由于 django 不知道*字符串*的去向，它不会转义任何东西。因此，“未终止的字符串文字”。

在您的 django 代码中，*首先*使用反斜杠转义字符串中的特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:02:48.517

使用[`escapejs`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escapejs)：

```
{{service.description|truncatewords_html:50|escapesjs}} 
```

# java - “杀死”一个打开的 JFrame

> ID：14918395
> 
> 赞同：0
> 
> 时间：2013-02-17T05:54:02.030
> 
> 标签：java, swing, jdialog

我有一个扩展 JFrame 的类，它代表我的程序的对话框窗口。此对话框通过文本字段接受用户输入。视输入而定，如果需要，窗口还可以使用不同的消息（存储为 JLabel）进行更新。

我注意到，当我单击对话框中的按钮（在我的代码中处理对话框）时，如果我再次激活对话框（通过选择首先启动对话框的控件），我之前输入的文本，并且 JLabel 的状态仍然存在。我正在寻找一种在对话框消失时“杀死”正在运行的实例的方法，因此当它再次出现时，它是“新的”，带有空白文本字段和默认的 JLabel。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:04:10.320

听起来您正在维护对框架的引用。

相反，您可能希望用于`JFrame#setDefaultCloseOperation(JFrame.DISPOSE)`处理原生资源底层的框架，并在需要时重新创建它。

**更新**

完成主代码中的框架后，只需将变量设置为`null`. 在显示框架的代码中，您需要进行`null`检查并根据需要重新创建框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:58:03.897

你试过设置`JFrame#setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:34:26.477

`frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`

如果您有多个打开程序的窗口，这将只关闭一个窗口。当只剩下一个窗口并关闭时，程序停止。

# objective-c - NSBezierPath：创建一个“弯曲”的正方形

> ID：14918396
> 
> 赞同：1
> 
> 时间：2013-02-17T05:54:06.097
> 
> 标签：objective-c, macos, cocoa, nsbezierpath

我想创建一个 NSBezierPath 代表这样的“弯曲”或“臃肿”正方形：

![在此处输入图像描述](../Images/6221d0916bbe73b4f17236f92bc9abbd.png)

我正在努力想出正确的数学来使这个形状完全正确。我浏览了整个互联网，但谷歌搜索这个主题主要是“这就是你如何绘制圆角”，这不是我需要的。

谁能指出我可以用来放置这些曲线的控制点的公式？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:54:46.313

好的; 经过多次试验和错误，我得到了一些有用的东西。下面的代码将绘制一个像这样的形状。（此图像对代码中的#define 语句使用以下值）：

```
#define SIDE_DEFLECTION 18.0f
#define CORNER_RAD 18.0f
#define KAPPA 0.55238f
#define CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION .10
#define SIDE_CENTER_CP_OFFSET 0.60 
```

这些值，给定一个 500x500 像素的视图，将绘制这个形状：

![在此处输入图像描述](../Images/a452c1a3ff07c2a49228be2a08c4c8bd.png)

# 绘图代码

在我的例子中，我在 NSButtonCell 子类中绘制这个形状。因为我知道这个单元格的框架永远不会在我的应用程序中调整大小，所以我可以做一些优化。具体来说，我将 NSBezierPath 存储为 iVar，因此我不必每次都通过 -drawImage 重新创建它...此外，我将 NSShadow 和 NSColor 存储为 iVar，因此也不必重新创建它们。

如果要在调整大小的视图中绘制此形状，则需要稍微调整代码。如果正方形的大小发生剧烈变化，则需要立即手动调整#define 语句的值（否则，拐角看起来不正确。侧曲线过渡到圆角曲线的压痕很少，等等）

下面的代码配置为在 52x52 像素的正方形中绘制相同的形状。一般的做法是设置你想要的“侧偏”和“拐角半径”，然后调整两个“偏移”定义语句（它们是百分比），直到拐角看起来完美。“kappa”的值永远不能改变——它取自我找到的一篇数学论文。

这是优化的绘图代码：

```
 #import "LPProjectIconButtonCell.h"

#define SIDE_DEFLECTION 1.0f
#define CORNER_RAD 4.0f

// Distance (%) control points should be from curve start/end to form perfectly circular rounded corners
#define KAPPA 0.55238f

// Percentage offset (from perfectly circular rounded corner location) that the corner control points use to
// compensate for the fact that our sides are rounded. Without this, we get a rough transition between the
// curve of the side and the start of the corner curve
#define CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION .85

// As the curve approaches each side-center point, this is the percentage of the distance between the side endpoints
// and the side centerpoint where the control point for approaching the centerpoint is located. You are not expected
// to understand the preceeding sentence.
#define SIDE_CENTER_CP_OFFSET 0.60

@implementation LPProjectIconButtonCell

- (void) awakeFromNib
{
    _shadow = [[NSShadow alloc] init];
    [_shadow setShadowBlurRadius:1.0f];
    [_shadow setShadowColor:[NSColor colorWithCalibratedWhite:1.0f alpha:0.2f]];
    [_shadow setShadowOffset:NSMakeSize(0.0f, -1.0f)];

    _borderColor = [[NSColor colorWithCalibratedWhite:0.13 alpha:1.0f] retain];
}

- (void) dealloc
{
    [_path release];
    _path = nil;

    [_shadow release];
    _shadow = nil;

    [_borderColor release];
    _borderColor = nil;

    [super dealloc];
}

- (void) drawImage:(NSImage *)image withFrame:(NSRect)frame inView:(NSView *)controlView
{
    NSGraphicsContext *currentContext = [NSGraphicsContext currentContext];

    // The path never changes because this view never resizes. So we'll save it to be efficient
    if (!_path)
    {
        NSRect rect = NSInsetRect(frame, 2.0f, 2.0f);

        // Create the primary points -- 3 per side
        NSPoint TCenter = NSMakePoint(rect.size.width/2.0f, rect.origin.y);
        NSPoint TLeft = NSMakePoint(rect.origin.x + CORNER_RAD + SIDE_DEFLECTION, rect.origin.y + SIDE_DEFLECTION);
        NSPoint TRight = NSMakePoint(rect.origin.x + rect.size.width - (CORNER_RAD + SIDE_DEFLECTION), rect.origin.y + SIDE_DEFLECTION);

        NSPoint LTop = NSMakePoint(rect.origin.x + SIDE_DEFLECTION, rect.origin.y + CORNER_RAD + SIDE_DEFLECTION);
        NSPoint LCenter = NSMakePoint(rect.origin.x, rect.size.height/2.0f);
        NSPoint LBottom = NSMakePoint(rect.origin.x + SIDE_DEFLECTION, rect.origin.y + rect.size.height - CORNER_RAD - SIDE_DEFLECTION);

        NSPoint BLeft = NSMakePoint(TLeft.x, rect.origin.y + rect.size.height - SIDE_DEFLECTION);
        NSPoint BCenter = NSMakePoint(TCenter.x, rect.origin.y + rect.size.height);
        NSPoint BRight = NSMakePoint(TRight.x, BLeft.y);

        NSPoint RTop = NSMakePoint(rect.origin.x + rect.size.width - SIDE_DEFLECTION, LTop.y);
        NSPoint RCenter = NSMakePoint(rect.origin.x + rect.size.width, LCenter.y);
        NSPoint RBottom = NSMakePoint(RTop.x, LBottom.y);

        // Create corner control points for rounded corners
        // We don't want them to be perfectly circular, because our sides are curved. So we adjust them slightly to compensate for that.
        NSPoint CP_TLeft = NSMakePoint(TLeft.x - (TLeft.x - LTop.x) * KAPPA, TLeft.y + SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION);
        NSPoint CP_LTop = NSMakePoint(LTop.x + SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION, LTop.y - (LTop.y - TLeft.y) * KAPPA);

        NSPoint CP_LBottom = NSMakePoint(LBottom.x + SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION, LBottom.y + (BLeft.y - LBottom.y) * KAPPA);
        NSPoint CP_BLeft = NSMakePoint(BLeft.x - (BLeft.x - LBottom.x) * KAPPA, BLeft.y - SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION);

        NSPoint CP_BRight = NSMakePoint(BRight.x + (RBottom.x - BRight.x) * KAPPA, BRight.y - SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION);
        NSPoint CP_RBottom = NSMakePoint(RBottom.x - SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION, RBottom.y + (BRight.y - RBottom.y) * KAPPA);

        NSPoint CP_RTop = NSMakePoint(RTop.x - SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION, RTop.y - (RTop.y - TRight.y) * KAPPA);
        NSPoint CP_TRight = NSMakePoint(TRight.x + (RTop.x - TRight.x) * KAPPA, TRight.y + SIDE_DEFLECTION * CORNER_CP_OFFSET_FOR_SIDE_DEFLECTION);

        // Create control points for the rounded sides. (The "duplicate" control points are here in case I ever tweak this in the future.)
        NSPoint CP_DepartingTCenterForTLeft = NSMakePoint(TCenter.x - (TCenter.x - TLeft.x) * SIDE_CENTER_CP_OFFSET, TCenter.y);
        NSPoint CP_ApproachingTLeft = TLeft;

        NSPoint CP_DepartingLTopForLCenter = LTop;
        NSPoint CP_ApproachingLCenterFromLTop = NSMakePoint(LCenter.x, LCenter.y - (LCenter.y - LTop.y) * SIDE_CENTER_CP_OFFSET);

        NSPoint CP_DepartingLCenterForLBottom = NSMakePoint(LCenter.x, LCenter.y + (LBottom.y - LCenter.y) * SIDE_CENTER_CP_OFFSET);
        NSPoint CP_ApproachingLBottom = LBottom;

        NSPoint CP_DepartingBLeftForBCenter = BLeft;
        NSPoint CP_ApproachingBCenter = NSMakePoint(BCenter.x - (BCenter.x - BLeft.x) * SIDE_CENTER_CP_OFFSET, BCenter.y);

        NSPoint CP_DepartingBCenterForBRight = NSMakePoint(BCenter.x + (BRight.x - BCenter.x) * SIDE_CENTER_CP_OFFSET, BCenter.y);
        NSPoint CP_ApproachingBRight = BRight;

        NSPoint CP_DepartingRBottomForRCenter = RBottom;
        NSPoint CP_ApproachingRCenterFromRBottom = NSMakePoint(RCenter.x, RCenter.y + (RBottom.y - RCenter.y) * SIDE_CENTER_CP_OFFSET);

        NSPoint CP_DepartingRCenterForRTop = NSMakePoint(RCenter.x, RCenter.y - (RCenter.y - RTop.y) * SIDE_CENTER_CP_OFFSET);
        NSPoint CP_ApproachingRTopFromRCenter = RTop;

        NSPoint CP_DepartingTRightForTCenter = TRight;
        NSPoint CP_ApproachingTCenterFromTRight = NSMakePoint(TCenter.x + (TRight.x - TCenter.x) * SIDE_CENTER_CP_OFFSET, TCenter.y);

        // Draw the bloody square
        NSBezierPath *p = [[NSBezierPath alloc] init];

        [p moveToPoint:TCenter];
        [p curveToPoint:TLeft controlPoint1:CP_DepartingTCenterForTLeft controlPoint2:CP_ApproachingTLeft];
        [p curveToPoint:LTop controlPoint1:CP_TLeft controlPoint2:CP_LTop];
        [p curveToPoint:LCenter controlPoint1:CP_DepartingLTopForLCenter controlPoint2:CP_ApproachingLCenterFromLTop];
        [p curveToPoint:LBottom controlPoint1:CP_DepartingLCenterForLBottom controlPoint2:CP_ApproachingLBottom];
        [p curveToPoint:BLeft controlPoint1:CP_LBottom controlPoint2:CP_BLeft];
        [p curveToPoint:BCenter controlPoint1:CP_DepartingBLeftForBCenter controlPoint2:CP_ApproachingBCenter];
        [p curveToPoint:BRight controlPoint1:CP_DepartingBCenterForBRight controlPoint2:CP_ApproachingBRight];
        [p curveToPoint:RBottom controlPoint1:CP_BRight controlPoint2:CP_RBottom];
        [p curveToPoint:RCenter controlPoint1:CP_DepartingRBottomForRCenter controlPoint2:CP_ApproachingRCenterFromRBottom];
        [p curveToPoint:RTop controlPoint1:CP_DepartingRCenterForRTop controlPoint2:CP_ApproachingRTopFromRCenter];
        [p curveToPoint:TRight controlPoint1:CP_RTop controlPoint2:CP_TRight];
        [p curveToPoint:TCenter controlPoint1:CP_DepartingTRightForTCenter controlPoint2:CP_ApproachingTCenterFromTRight];

        [p closePath];

        _path = p;
    }

    //  We want a slightly white drop shadow on the stroke and fill, giving our square some sense of depth.
    [_shadow set];

    [[NSColor blackColor] set];
    [_path fill];

    // Clip to the bezier path and draw a fill image inside of it.
    [currentContext saveGraphicsState];

        [_path addClip];
        [image drawInRect:frame fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0f respectFlipped:YES hints:nil];

        if (self.isHighlighted)
        {
            // If we're clicked, draw a 50% black overlay to show that
            NSColor *overColor = [NSColor colorWithCalibratedWhite:0.0 alpha:0.5];
            [overColor set];
            [_path fill];
        }

    [currentContext restoreGraphicsState];

    // Stroke the square to create a nice border with a drop shadow at top and bottom.
    [_borderColor set];
    [_path stroke];
}

@end 
```

# html - :first-child 和 :first-letter 令人费解的伪元素语法

> ID：14918397
> 
> 赞同：1
> 
> 时间：2013-02-17T05:54:31.347
> 
> 标签：html, css, css-selectors, pseudo-element

当我遇到一个奇怪的情况时，我正在玩 CSS 选择器。

如果我使用 :first-child 伪元素，我需要在它前面加上一个空格才能工作，如果我不这样做，它将无法工作。但是 :first-letter 伪元素的情况是相反的，它只有在没有空格的情况下才会起作用。

我发现它非常不一致，因为它们都是伪元素。最初我认为这可能只是 IE10 的问题，但我使用 Chrome 和 Firefox 进行了检查，结果相同。有什么我想念的吗？这种行为有原因吗？

这是重现问题的紧凑示例：

```
<!DOCTYPE html>
<html>
<head>
<style>
    * { color: red; }
    #article1 :first-child { color: deepskyblue; }
    article :last-child { color: darkmagenta; }
    #firstLetter:first-letter { color: darkslateblue; }
    #firstLine:first-line { color: darkslateblue; }
</style>
</head>
<body>
    <article id="article1">
        <div>E :first-child </div>
        <div>E :last-child </div>
    </article>                        
    <div id="firstLetter">:first-letter</div>
    <div id="firstLine">:first-line</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T06:10:19.880

您的困惑来自于`:first-child`和`:last-child`是[伪类](http://www.w3.org/TR/CSS21/selector.html#pseudo-class-selectors)，而不是伪元素。它们中的每一个分别表示其父级的第一个和最后一个子级，但是您将它们附加到的元素代表*子*级，而不是*父*级。伪类是对某个元素的*描述*，如果您愿意的话，就像 ID 选择器描述具有该 ID 的元素或属性选择器描述具有该属性的元素一样。因此，选择器`E:first-child`意味着`E`它是其父级的第一个孩子——无论该父级可能是什么——但*不是* `E`.

选择器`#article1:first-child`应该匹配`#article1`，因为它是 的第一个孩子`body`，但它不会匹配 的第`div`一个孩子*。* 匹配 ，因为它是第一个其父母恰好是 的孩子。`#article1``#article1 :first-child``div``#article1`

另一方面，之所以有效`:first-letter`，是因为它们分别匹配每个元素*的*`:first-line`第一个字母和第一行。这就是[伪元素](http://www.w3.org/TR/CSS21/selector.html#pseudo-element-selectors)的含义；*作为*某个其他元素的成员生成的虚拟元素（未在 DOM 中表示） 。

 **请注意，这并不意味着您可以或不能将空间与其中一个一起使用。您可以将任何组合器与任何伪类或伪元素选择器一起使用，或者将其附加到另一个简单选择器链。当使用或不使用组合器时，它们只是意味着不同的东西，这就是为什么你会看到不同的结果。

[可以在此处](https://stackoverflow.com/questions/4195161/any-way-to-select-nth-element-straight/4195253#4195253)找到伪类与伪元素的另一种解释。

如果您不需要支持 IE8 及更早版本，则应使用双冒号表示伪元素，以帮助您将它们与伪类区分开来，所以`::first-letter`和`::first-line`而不是`:first-letter`and `:first-line`。这个符号是在新的[Selectors 模块](http://www.w3.org/TR/selectors/#pseudo-elements)中引入的。**

# android - android软键盘大小写

> ID：14918409
> 
> 赞同：0
> 
> 时间：2013-02-17T05:56:00.000
> 
> 标签：android, keyboard, capitalization

我正在尝试将 Android 示例软键盘设置为首字母大写。这是键盘的正常行为，但我不知道该怎么做（（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-04T07:11:02.843

回答肯定有点晚了，但其他人可能需要这个。

要手动大写键盘，您必须使用所需的转换模式调用您`KeyboardView`的方法。`setShifted (boolean shifted)`

这是一个例子：

```
private KeyboardView mInputView;
...
mInputView.setShifted(true); 
```

但是最好让软键盘通过检查文本编辑器的属性来决定它的大小写模式。例如，电子邮件通常使用小写字母输入。如果您在[此处](https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/src/com/example/android/softkeyboard/SoftKeyboard.java)查看此示例，它有一个名为的方法`updateShiftKeyState(EditorInfo attr)`，用于根据将在其中键入文本的文本编辑器的初始属性自动设置大写模式：

```
/**
 * Helper to update the shift state of our keyboard based on the initial
 * editor state.
 */
private void updateShiftKeyState(EditorInfo attr) {
    if (attr != null 
            && mInputView != null && mQwertyKeyboard == mInputView.getKeyboard()) {
        int caps = 0;
        EditorInfo ei = getCurrentInputEditorInfo();
        if (ei != null && ei.inputType != InputType.TYPE_NULL) {
            caps = getCurrentInputConnection().getCursorCapsMode(attr.inputType);
        }
        mInputView.setShifted(mCapsLock || caps != 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:08:39.693

只需`android:capitalize`在布局中为 textview 设置 xml 属性。[在此处](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3acapitalize)检查属性的可能值

# c# - Getting data from the Database

> ID：14918414
> 
> 赞同：0
> 
> 时间：2013-02-17T05:56:23.413
> 
> 标签：c#, database, oracle

I am designing a web page, i want to get last entry from the column ("call_id) from the table "tbl_CALL" and store in the variable("lastcallId"). can anyone help me for writing he code in c#. Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:01:43.767

There are a lot of questions here such as which technology are you using in C# (ADO.net, Entity Framework, NHibernate, etc.)? Also, it is not clear if the call_id column is asending order. Assuming the key is auto generated and is always ascending, you could write an SQL statement like the following to get the max out.

SELECT MAX(call_id) as "last_call_id" FROM mytable;

Without knowing which technology you are using, it is hard to help more.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:38:53.873

Try this: on your *web.config*:

```
<connectionStrings>
    <add name="OracleDBConnString" connectionString="Provider=MSDAORA;Data Source=[database];User ID=[userID];Password=[yourPassword];"
   providerName="System.Data.OleDB" />
 </connectionStrings> 
```

in your C#:

```
private OleDbConnection conn = new OleDbConnection();
private string _strCon = ConfigurationManager.ConnectionStrings["OracleDBConnString"].ConnectionString;
private OleDbTransaction _trans = null;
DataTable dt = new DataTable();
DataSet ds = new DataSet();
OleDbDataAdapter da = new OleDbDataAdapter();

conn.Open();

strSelectQuery = "SELECT last(call_no) FROM tbl_IThelpdesk"; // here you have to put your query

da.SelectCommand = new OleDbCommand(strSelectQuery, conn);
da.Fill(ds);
dt = ds.Tables[0];

conn.Close(); 
```

Now, the content of your SQL query is now at `dt`. I hope this helps.

# wordpress - 我怎样才能使这个 WordPress 网站更具响应性或流畅性？

> ID：14918415
> 
> 赞同：0
> 
> 时间：2013-02-17T05:56:34.343
> 
> 标签：wordpress, css, responsive-design

我正在尝试使这个 WordPress 网站更流畅或响应更快，这样它就不会在不同的屏幕分辨率下重叠。

我知道@media 属性，但我不确定如何在我的主题中实现它。

是否有一个快速的“1-2-3”，还是更复杂？我正在处理的网站是[我们有问题](http://www.wehaveissues.org)，我不确定它是否响应或流畅，但根据这张截图，我认为不是。

社交图标和反馈不应与文本重叠。

![在此处输入图像描述](../Images/b9cf844efe8aa4fe2a7906c7ead80dbc.png)

感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:27:04.673

要使任何网站或 wordpress 网站具有响应性，请使用 css 媒体查询。

将此添加到 head 标签上方的 header.php 文件中

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

然后在您的 css 文件中添加媒体查询

```
@media all and (max-width: 699px) and (min-width: 520px), (min-width: 1151px) {
 body {
  background: #000;
 } 
```

}

然后您的网站现在可以响应了，当然您必须根据每种尺寸设置您的网站样式，但以上内容应该可以帮助您入门。另请查看这篇[文章](http://webdesignerwall.com/tutorials/css3-media-queries)，其中解释了更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:21:20.860

这是一个非常棘手的话题。您要问的第一个问题是您是否发现您的网站有使用移动设备的流量？

我建议使用网络分析来研究您的流量，例如谷歌自己的网络分析。它为您提供浏览器、操作系统、技术、位置等信息。

然后你真的必须决定它是否值得。有几种工具，我通常推荐：[http ://www.abookapart.com/products/responsive-web-design](http://www.abookapart.com/products/responsive-web-design)

这是一本好书，作者是一个非常棒的人。

As for doing this fast. There's no fast way to do responsive design the right way. It's about targeting the responsiveness to the proper needs.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:24:46.570

> Is there a quick "1-2-3" to this, or is it much more intricate?

*Much* more intricate I'm afraid.

The theme you are running "Flexibility 3" is not adaptive or responsive.

As @coletrain mentions, you may set the initial viewport size using meta tag (note: this does not make your site responsive, it merely sets the initial scale of your site within the devices veiwport).

To make your website play nice on varied viewport sizes you have a few options:

*   Use the **Adaptive** Layout approach, whereby you pick any number of breakpoints for your media queries (those widths at which your websites elements will adjust to new dimensions/layout). Breakpoints are typically chosen to target the more common viewports - e.g. ipad portrait/landscape + iphone portait/landscape.

At each of these breakpoints you would have to specify the new dimensions for all elements on your site that need to scale down (e.g. reducing the width of your #wrap div).

This approach is losing popularity largely because it is fundamentally flawed by only targeting a finite number of viewport sizes, but for those less experienced it may be an accessably low hanging fruit [http://uxdesign.smashingmagazine.com/2012/11/08/ux-design-qa-with-christian-holst/](http://uxdesign.smashingmagazine.com/2012/11/08/ux-design-qa-with-christian-holst/).

*   **Responsive/Fluid**, this method would require you to basically revise many of your websites styles that pertain to the layout/structure and replace the rigid px values with inherently fluid % values.

A VERY crude example here - given a rigid two column layout like your `.postwrap` & `#sidebar` you could change to employ fluid values like:

```
.postwrap {
width: 60%;
}
#sidebar {
 width: 35%;
} 
```

Responsive is highly recommended as when implemented correctly, it "future proofs" for the increasingly varied mobile landscape.

*   (This is what I would do if I was you) You are using WordPress, arguably one of the most powerful characteristics of this platform is the ability to easily change the Look & Feel of you site by swapping themes.

有大量的免费响应式 WP 主题，真的没有理由不拥有一个设计良好且对移动设备友好的主题。去谷歌上查询。

此外，至于您的社交图标重叠问题 - 再次利用 WP 的力量来发挥您的优势，如果您正在寻找“1-2-3”解决方案，请尝试一些不同的插件。

**编辑：**正如@stepquick 所提到的，Ethan Marcottte 的响应式网页设计是一本很好的读物（根据我的经验，A Book Apart 书籍往往是一个很好的“无毛病”资源）。此外，如果您想要更多地动手而不是简单地实现一个打包的主题，您还可以从使用诸如基础[http://foundation.zurb.com/](http://foundation.zurb.com/)之类的框架开始构建您自己的。

# c# - 从数据库中检索后添加值

> ID：14918416
> 
> 赞同：0
> 
> 时间：2013-02-17T05:56:47.113
> 
> 标签：c#, winforms, add

在我的 Windows 应用程序中，我在存储产品价值的数据库中有价格列。

在我的 winform 中，我有一个组合框和列表框。组合框显示数据库中的所有项目。当用户从组合框中选择产品并单击添加时，这些产品将被添加到列表框中。

同时，当用户单击添加项目时，我检索项目的价格并将其传递给添加此值的方法。

但是如何添加多个值，例如我将产品 1、产品 2 从组合框添加到列表框，我想将这些项目的值添加为 550+200 = 750 并将其显示到文本框中。

目前我正在这样做。

要检索价格：

```
public DataSet searchforPrice(string price)
        {
            DataSet dataSet = new DataSet();

            // Create connection object
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "SELECT [Price]  FROM [Product] WHERE [Product Name] ='" + price + "'";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Product");

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            return dataSet;

  } 
```

将项目添加到列表框并显示总价：

```
private void button2_Click(object sender, EventArgs e)
        {
            listBox1.Items.Add(comboBox2.Text);
            maskedTextBox10.Text = addPrice().ToString();

        } 
```

添加在组合框中选择的产品的价格

```
public int addPrice()
    {
        DataSet ds = searchforPrice(comboBox2.Text);
        int price =  Convert.ToInt32(ds.Tables[0].Rows[0]["Price"]);
        return price;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:09:35.777

您的`searchforPrice`方法的参数应该被调用而`product`不是`price`.

现在，您的`addPrice`方法是错误的，因为它不会增加任何价格。它只返回组合中当前选定项目的价格。它应该看起来像这样：

```
public int addPrice()
{
    DataSet ds = searchforPrice(comboBox2.Text);
    int sum = Convert.ToInt32(maskedTextBox10.Text);
    int price =  Convert.ToInt32(ds.Tables[0].Rows[0]["Price"]);
    return sum + price;
} 
```

当然，如果你删除项目，你应该做类似的事情。

IMO，而不是应用此逻辑，您应该将每个项目的价格存储在列表中，并在文本框中显示这些价格的总和。如果您删除项目，重新计算总和会更容易（也更正确）。

# php - 建立我自己的推送通知服务器到客户端（不是电话应用程序）

> ID：14918417
> 
> 赞同：1
> 
> 时间：2013-02-17T05:56:49.097
> 
> 标签：php

我一直在阅读推送通知。我知道苹果和谷歌的手机，称之为两种不同的东西。堆栈上有很多关于谷歌和苹果为他们的手机提供的服务的[帖子](https://stackoverflow.com/questions/12560246/how-to-add-a-push-notification-in-my-own-android-app)。

读到[这](http://en.wikipedia.org/wiki/Push_technology)让我很好奇这是否可能。这基本上是说除了保持连接打开而不是关闭它之外，没有直接的方法可以做到这一点。它提到了一些朝着这个方向发展的新标准。

我有一个 php 服务器 api。目前已设置客户端使用 HTTP GET 来查看是否有任何更新。我虽然因为 90% 的时间没有更新，如果我在有更新时使用 HTTP PUSH 而不是不断检查更新，我不会在我的 MySQL 服务器上节省很多税。

如果这在 PHP 中是可能的，并且有人知道它的教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:00:21.210

当有更新记录最后更新时间时，让您的服务器写入文件怎么样？然后当页面加载时，它会检查该文件并查看上次更新时间。如果那个时间晚于 {cookie-value} 那么它继续到代码的 mySql 部分，如果不是它没有。

不完全是一个推动，但它确实节省了您的 MySQL 工作。当然，它的可行性取决于您拥有什么样的更新以及您对更新任务本身的控制程度。

# meteor - 如何在 Blade 中使用accounts-ui？

> ID：14918418
> 
> 赞同：1
> 
> 时间：2013-02-17T05:56:54.233
> 
> 标签：meteor, node-blade

[Meteor 文档](http://docs.meteor.com/#accountsui)说只需添加`{{loginButtons}}`到您的模板中。如果我没记错的话，这基本上是`|= loginButtons`在 Blade 中。但是，我越来越

> 未捕获的 ReferenceError：未定义 loginButtons

我有`accounts-ui`包裹，所以我不确定它为什么会出错。

有人知道我在做什么错吗？

* * *

将此添加到我的 Blade 模板中：

```
- console.log(Template) 
```

而且我可以看到那里所有的登录信息，所以……它肯定在那里。我只是不知道如何访问它？

![](../Images/92f4ab28f25e2ea6d09a1d492bd0f198.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:07:13.880

好吧，这行得通：

```
!= Template._loginButtons() 
```

我不是特别热衷于使用它，因为它以下划线开头（可能会发生变化）。

# java - 使用同步方法改变输出

> ID：14918421
> 
> 赞同：1
> 
> 时间：2013-02-17T05:57:26.450
> 
> 标签：java, multithreading

我编写了一个多线程和同步递增函数，但它没有显示一致的输出：-

```
$ java Main
count: 999883

$ java Main
count: 1000000

$ java Main
count: 999826

$ java Main
count: 1000000

$ java Main
count: 1000000 
```

我有一个同步计数器：-

```
public class Counter {
    public int count;
    synchronized void inc() {
        count = count+1;
    }
    int getCount() {
        return count;
    }
} 
```

使用计数器对象初始化并将其递增 1000 次的线程类：-

```
public class CountPrimesRunnable implements Runnable {
    private Counter c;

    public CountPrimesRunnable(Counter c) {
        this.c = c;
    }

    public void run() {
        for (int i = 0; i < 1000; i++)
            c.inc();
    }
} 
```

以及一次创建 1000 个线程的 Main 类：-

```
public class Main {
    public static void main(String[] args) {
        int numberOfThreads = 1000;
        Thread[] worker = new Thread[numberOfThreads];
        Counter c = new Counter();
        for (int i = 0; i < numberOfThreads; i++)
            worker[i] = new Thread(new CountPrimesRunnable(c));

        for (int i = 0; i < numberOfThreads; i++)
            worker[i].start();

        System.out.println("count: " + c.count);
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T06:00:49.607

> 但它没有显示一致的输出：-

那是因为，从您的代码中不确定`main`线程​​是否会在所有其他线程完成工作后始终完成。在某些情况下，您得到的结果小于`1000000`，是一些线程在主线程完成后仍然执行的情况。

您可以在每个新创建的线程上调用[`Thread#join()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29) 方法，以确保该`main`方法等待所有这些线程死亡，然后在 for 循环之后继续执行。

因此，您必须添加另一个 for 循环以`join`在每个启动的线程上调用，并且您可以通过将其与第一个循环合并来避免使用第二个 for 循环：

```
for (int i = 0; i < numberOfThreads; i++) {
    worker[i] = new Thread(new CountPrimesRunnable(c));
    worker[i].start();
}

for (int i = 0; i < numberOfThreads; i++) {
    worker[i].join();
} 
```

当您从 a 内部调用 a 时`join`，只有在死亡后才会继续进一步执行。`Thread A``Thread B``Thread B``Thread A`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:11:26.470

```
public class Counter {
    public int count;
    synchronized void inc() {
        count = count+1;
    }

    //this method must also be synchronized for establishing the happens-before relationship
    synchronized int getCount() {
        return count;
    }
} 
```

只有当 get 和 set**在同一个 lock**上同步时，才能保证看到最新的值。

您还需要调用 join 并等待所有线程完成执行。

# mysql - 为什么“更改表”查询需要这么长时间？

> ID：14918422
> 
> 赞同：2
> 
> 时间：2013-02-17T05:57:52.460
> 
> 标签：mysql, database

我想在一个表中添加一个字段，然后运行类似的命令`ALTER Table some_table add some_field varchar(255)`，这需要1个多小时，还没有完成。

该表有大约 800k 行和 1.5GB 容量。但是反正我只是改变结构，表的容量应该没有影响吧？

环境：MYSQL 5 + Ubuntu 11

# xml - 通过命令行解析 XML

> ID：14918423
> 
> 赞同：4
> 
> 时间：2013-02-17T05:57:54.363
> 
> 标签：xml, bash, xpath, xmlstarlet

因此，我有一个 XML 文件，我想使用 xmlstarlet 使用 BASH 脚本等进行解析（或者如果人们可以给我一个示例，则可以使用另一种方法）。

基本结构是这样的：

```
<character>
　   <literal>恵&lt;/literal>
    <misc>
        <stroke_count>10</stroke_count>
    </misc>
    <reading_meaning>
    　　　　<rmgroup>
               <reading r_type="ja_on">ケイ</reading>
               <reading r_type="ja_on">エ&lt;/reading>
    　　　　    <reading r_type="ja_kun">めぐ.む</reading>
               <reading r_type="ja_kun">めぐ.み&lt;/reading>
               <meaning>favor</meaning>
               <meaning>blessing</meaning>
               <meaning>grace</meaning>
               <meaning>kindness</meaning>
           </rmgroup>
　　　　</reading_meaning>
  </character> 
```

那里还有其他一些字段，含义和读数可能会发生变化。基本上我想得到所有的读数、含义、笔划数等，并用 BASH 生成一个 HTML 表。

这也是一个包含许多需要查找的字符的大文件。所以我想用一个脚本来做这个，它接受一个 $1 并使用它来查找基于标签的值。所以理想情况下是：

```
kanjilookup.sh 恵 
```

然后根据内容生成一个html表格。

想法？（我也愿意使用像 xpath 这样的另一个程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:19:52.610

正如@thatotherguy 所建议的那样，您可能希望使用 XSLT 而不是 Bash 来执行此操作。您[*可以*使用 Bash 解析 XML](https://stackoverflow.com/questions/893585/how-to-parse-xml-in-bash)，但它可能会很快变得棘手。

按照@thatotherguy 的建议，您可以拥有一个看起来像这样的 XSLT 样式表：

```
<!-- kanjilookup.xsl -->

<?xml version="1.0" encoding="iso-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:param name="character"/>
  <xsl:output method="html" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!--
  From https://stackoverflow.com/questions/9611569/xsl-how-do-you-capitalize-first-letter
  -->

  <xsl:variable name="vLower" select="'abcdefghijklmnopqrstuvwxyz'"/>
  <xsl:variable name="vUpper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>

  <xsl:template name="capitalize">
    <xsl:param name="string"/>

    <xsl:value-of select=
    "concat(translate(substring(
            $string, 1, 1), $vLower, $vUpper),
            substring($string, 2)
           )
    "/>
  </xsl:template>

  <xsl:template match="/">
    <xsl:if test="string-length($character) = 0 or not(//literal[. = $character])">
      <xsl:message terminate="yes">ERR: No input character given.</xsl:message>
    </xsl:if>
    <xsl:apply-templates select="characters/character[literal[. = $character]]"/>
  </xsl:template>

  <xsl:template match="character">
    <xsl:text disable-output-escaping='yes'>&lt;!DOCTYPE html>
</xsl:text>

    <html>
      <head/>
      <body>
        <table>
          <tbody>
            <xsl:apply-templates/>
          </tbody>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="literal">
    <caption>
      <xsl:value-of select="."/>
    </caption>
  </xsl:template>

  <xsl:template match="stroke_count">
    <tr>
      <td>
        <xsl:call-template name="capitalize">
          <xsl:with-param name="string" select="translate(local-name(), '_', ' ')"/>
        </xsl:call-template>
      </td>
      <td><xsl:value-of select="."/></td>
    </tr>
  </xsl:template>

  <xsl:template match="misc | reading_meaning | rmgroup">
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="reading | meaning">
    <tr>
      <td>
        <xsl:call-template name="capitalize">
          <xsl:with-param name="string" select="local-name()"/>
        </xsl:call-template>
        <xsl:apply-templates select="@r_type"/>
      </td>
      <td>
        <xsl:value-of select="."/>
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="@r_type">
    <xsl:value-of select="concat(' ', '(', ., ')')"/>
  </xsl:template>
</xsl:stylesheet> 
```

假设您有一个名为`characters.xml`：

```
<characters>
  <character>
    <literal>恵&lt;/literal>
    <misc>
      <stroke_count>10</stroke_count>
    </misc>
    <reading_meaning>
      <rmgroup>
        <reading r_type="ja_on">ケイ</reading>
        <reading r_type="ja_on">エ&lt;/reading>
        <reading r_type="ja_kun">めぐ.む</reading>
        <reading r_type="ja_kun">めぐ.み&lt;/reading>
        <meaning>favor</meaning>
        <meaning>blessing</meaning>
        <meaning>grace</meaning>
        <meaning>kindness</meaning>
      </rmgroup>
    </reading_meaning>
  </character>
</characters> 
```

您可以`kanjilookup.xsl`像这样使用 XMLStarlet 在其上运行：

```
xml tr kanjilookup.xsl -s character=恵 characters.xml 
```

这将生成一个如下所示的 HTML 表格（经过漂亮打印后）：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <table>
      <tbody>
        <caption>恵&lt;/caption>
        <tr>
          <td>Stroke count</td>
          <td>10</td>
        </tr>
        <tr>
          <td>Reading (ja_on)</td>
          <td>ケイ</td>
        </tr>
        <tr>
          <td>Reading (ja_on)</td>
          <td>エ&lt;/td>
        </tr>
        <tr>
          <td>Reading (ja_kun)</td>
          <td>めぐ.む</td>
        </tr>
        <tr>
          <td>Reading (ja_kun)</td>
          <td>めぐ.み&lt;/td>
        </tr>
        <tr>
          <td>Meaning</td>
          <td>favor</td>
        </tr>
        <tr>
          <td>Meaning</td>
          <td>blessing</td>
        </tr>
        <tr>
          <td>Meaning</td>
          <td>grace</td>
        </tr>
        <tr>
          <td>Meaning</td>
          <td>kindness</td>
        </tr>
      </tbody>
    </table>
  </body>
</html> 
```

当然，您必须修改 XSLT 样式表以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:13:32.353

现在有了 XQuery，没有理由再使用 XSLT，XQuery 更好了。

例如，使用我的[XQuery 解释器](http://videlibri.sourceforge.net/xidel.html)，您可以直接运行它而无需像这样的附加文件：

```
xidel --printed-node-format xml characters.xml -e "(character:='恵')[2]"  -e - <<<'xquery version "1.0";
(<title>{$character}</title>, 
for $char in //character[literal eq $character] return
  <table>
    <tbody>
      <caption>{$character}</caption>
      <tr>
        <td>Stroke count</td>
        <td>{$char/misc/stroke_count/text()}</td>
      </tr>
      { for $reading in $char//rmgroup/reading return 
        <tr>
          <td>Reading ({$reading/@r_type/data(.)})</td>
          <td>{$reading/text()}</td>
        </tr> } 
      { for $meaning in $char//rmgroup/meaning return 
         <tr>
           <td>Meaning</td>
           <td>{$meaning/text()}</td>
         </tr> } 
   </tbody>
  </table>
)
' 
```

创建一个与 xslt 答案类似的表。（但您需要添加到`<?xml version="1.0" encoding="utf-8"?>`那里发布的characters.xml）

# javascript - 在子 div 的滚动上滚动父 div

> ID：14918430
> 
> 赞同：0
> 
> 时间：2013-02-17T05:59:19.660
> 
> 标签：javascript, jquery, html

我想要一个`#nav`在顶部，但上面`#nav`有一些文本。在`#child`div 的滚动条上，我应该能够滚动主体的主滚动条，然后`#nav`应该固定在顶部！并且应该只滚动`#child`div。

继承人参考.. [http://jsfiddle.net/maUYK/](http://jsfiddle.net/maUYK/)

```
 <p>text</p>
  <p>text</p>
  <p>text</p>
  <p>text</p>
        <ul id="nav">
        <li><a href="#">About Us</a></li>
        <li><a href="#">Our Products</a></li>
        <li><a href="#">FAQs</a></li>
        <li><a href="#">Contact</a></li>
        <li><a href="#">Login</a></li>
        </ul>
  <div id="child">
  <table>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
         <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
        <tr><td>a</td><td>b</td><td>c</td></tr>
  </table>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:40:19.567

```
#nav{
    position:absolute;
       top:200px;
     left:0;
     }

     #nav.fixed{
     position:fixed;
         top:10px;
        } 
```

使用上述样式定位导航并在滚动后修复

有关信息，您可以访问此链接 -`http://addyosmani.com/blog/rocketbar/`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T06:10:00.557

div 的高度太大。给高度200px，没关系。

```
 div {
     overflow: scroll;
     height: 200px;
     width: 520px;
 } 
```

# android - android应用程序中的非英语单词

> ID：14918432
> 
> 赞同：0
> 
> 时间：2013-02-17T05:59:27.993
> 
> 标签：android

我是针对印度市场的内容丰富的应用程序，想用印地语（印度语）显示一些文本。

一种选择是使用文本创建图像并将图像添加到活动中。但是创建和管理各种尺寸的图像变得太复杂了。

有什么方法可以让我在不弄乱图像的情况下显示印地语文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:11:26.877

您应该能够简单地在`TextView`. 如果显示不正确，则可能是字体问题。您可以将自定义字体与您的应用程序打包并以`TextView`非常简单的方式使用它。只需在项目文件夹中放置一个 .ttf 字体文件（它需要支持文本的 Unicode 编码），`./assets`并在活动的`onCreate`方法中包含与此类似的代码：

```
TextView tv = (TextView) findViewById(R.id.view_for_hindi_text);
Typeface font = Typeface.createFromAsset(getAssets(), "MyHindiFont.ttf");
tv.setTypeface(font); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:03:03.540

对于不同的语言，您需要有不同的 strings.xml 文件。

如以下文档所示 [http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

很确定您对印地语的开箱即用支持。

# bash - 这个 crontab 行是做什么的？

> ID：14918433
> 
> 赞同：0
> 
> 时间：2013-02-17T05:59:32.043
> 
> 标签：bash, crontab

脚本[deployment_worker.sh](http://dl.dropbox.com/u/5363697/deployment_worker.sh)是一个控制脚本，负责每两个小时停止和启动一个服务......我认为是这样。显然，crontab 中的这一行做了其他事情，从每当我杀死他时进程从地狱很快回来的事实判断：

```
* */2 * * * /srv/server_ctrl/deployment_worker.sh restart 
```

在[deployment_worker.sh](http://dl.dropbox.com/u/5363697/deployment_worker.sh)的第 45 行：

```
echo "Issuing service start" >> $CONTROL_LOG 
```

我向日志文件发出一行，该行有效地*出现*在日志中，我认为这意味着该文件被某人（不是我！）执行......而我想到的唯一一个是 cron 守护进程……

所以，这是我的问题：

*   上面的 crontab 行是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:05:57.257

每两小时运行一次：

```
 0   */2   *   *   *   <command-to-run> 
```

所以它每分钟运行一次，从上午 12 点到 12:59，然后从上午 2:00 到 2:59，... 等等。

[http://livecronjobs.com/how-to-run-cron-every-2-hour](http://livecronjobs.com/how-to-run-cron-every-2-hour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:03:51.593

`* */2 * * *`平均在凌晨 0 点、凌晨 2 点、凌晨 4 点运行……见`man crontab`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:04:48.533

cron 可以在任何必要的 uid 下运行脚本。如果一个普通用户拥有 cron 权限并将某些内容添加到他们的个人 crontab 中，那么这些 cron 作业将在他们的 ID 下运行。root 可以拥有自己的 crontab，并且还可以控制每个其他用户的 crontab。

这样您的 cron 行就可以作为 root 运行（如果它在 root 的 crontab 中），或者作为其他用户运行。

至于它的作用，它每两个小时运行一次指定的脚本。

# c# - 如何使用 PDFBOX 从单选按钮获取子值

> ID：14918434
> 
> 赞同：0
> 
> 时间：2013-02-17T05:59:42.223
> 
> 标签：c#, .net, pdf, pdfbox

如何使用 PDFBOX 从单选按钮获取子值，下面是我的代码，其中 `row.Cells[1].Value.ToString()`将返回字段名称，其类型为`RadioButton` 字段名称的帮助，我需要获取与当前字段名称关联的子值。现在使用下面的代码，它会在线抛出错误：

```
foreach (object kid in kids)  ----> Object reference not set to an instance of an object. 
```

代码 ：

```
if (row.Cells[2].Value.ToString() == FieldType.RadioButton.ToString())
{
     radioButtonsList.TryGetValue(row.Cells[1].Value.ToString(),out index);
     string RadiValue = row.Cells[1].Value.ToString();
     java.util.ArrayList kids = (java.util.ArrayList)pdfFields.getKids();
           foreach (object kid in kids )
           {
              if (kid is PDCheckbox)
                 {
                    PDCheckbox checkbox = (PDCheckbox)kid;
                    RName = checkbox.getOnValue();
                 }
              possibleValues.Add(RName); 
             } 
```

# c# - 使用嵌套 div 而不是表或流来渲染 RadioButtonList

> ID：14918438
> 
> 赞同：4
> 
> 时间：2013-02-17T06:00:08.587
> 
> 标签：c#, asp.net, css, webforms, radiobuttonlist

我在 C#.NET 3.5 中以编程方式生成一个单选按钮列表，并使用 a`RadioButtonList`来执行此操作。但是，我觉得非常令人沮丧的是该`RepeatLayout`属性，它只能设置为`Flow`or `Table`。

表格用于表格数据，而不是用于显示表格。流动并没有帮助，因为它不适合造型。

我真正想要的是可以用 CSS 处理的 div 嵌套。这可以做到吗？

一些示例来说明我在说什么以及下面的示例代码。

**流程示例**

```
<span id="s1">
    <input id="s1_0" type="radio" value="Answer A" name="s1">
    <label for="s1_0">Answer A</label>
    <br>
    <input id="s1_1" type="radio" value="Answer B" name="s1">
    <label for="s1_1">Answer B</label>
</span> 
```

**表格示例**

```
<table border="0" id="s1">
    <tbody>
        <tr>
            <td><input type="radio" value="Answer A" name="s1" id="s1_0"><label for="s1_0">Answer A</label></td>
        </tr>
        <tr>
            <td><input type="radio" value="Answer B" name="s1" id="s1_1"><label for="s1_1">Answer B</label></td>
        </tr>
    </tbody>
</table> 
```

**我真正想要的**

```
<div id="s1">
    <div>
        <input type="radio" value="Answer A" name="s1" id="s1_0">
        <label for="s1_0">Answer A</label>
    </div>
    <div>
        <input type="radio" value="Answer B" name="s1" id="s1_1">
        <label for="s1_1">Answer B</label>
    </div>
</div> 
```

**我用来生成列表的 C# 代码**

我知道无论解决方案是什么，都不会像这样快速简单，但我把它放在这里是为了让您了解我使用它的上下文。

```
RadioButtonList rbl = new RadioButtonList { RepeatLayout = RepeatLayout.Table };
foreach (ControlValue cv in MasterControl.listControlValues)
{
    rbl.Items.Add(new ListItem(cv.name, cv.value));
}
ControlContainer.Controls.Add(rbl); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:34:17.397

您可能希望使用[WebControlAdapter](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.adapters.webcontroladapter%28v=vs.90%29.aspx)更改`RadioButtonList`呈现方式。

以下是您案例的完整代码：

```
public class RadioButtonListAdapter : WebControlAdapter
{
    protected override void RenderBeginTag(HtmlTextWriter writer)
    {
        writer.RenderBeginTag("div");
    }

    protected override void RenderEndTag(HtmlTextWriter writer)
    {
        writer.RenderEndTag();
    }

    protected override void RenderContents(HtmlTextWriter writer)
    {
        var adaptedControl = (RadioButtonList) Control;
        int itemCounter = 0;

        writer.Indent++;
        foreach (ListItem item in adaptedControl.Items)
        {
            var inputId = adaptedControl.ClientID + "_" + itemCounter++;

            // item div
            writer.RenderBeginTag("div");
            writer.Indent++;

                // input
                writer.AddAttribute("type", "radio");
                writer.AddAttribute("value", item.Value);
                writer.AddAttribute("name", adaptedControl.ClientID);
                writer.AddAttribute("id", inputId);

                if (item.Selected)
                {
                    writer.AddAttribute("checked", "checked");
                }

                writer.RenderBeginTag("input");
                writer.RenderEndTag();

                // label
                writer.AddAttribute("for", inputId);

                writer.RenderBeginTag("label");

                writer.Write(item.Value);

                writer.RenderEndTag();

            // div
            writer.Indent--;
            writer.RenderEndTag();
        }
        writer.Indent--;
    }
} 
```

要将此适配器连接到您的应用程序，您有两种选择。首先是在页面**构造函数**中以编程方式进行：

```
var adapters = Context.Request.Browser.Adapters;
var radioButtonListType = typeof(RadioButtonList).AssemblyQualifiedName;
var adapterType = typeof(RadioButtonListAdapter).AssemblyQualifiedName;
if (!adapters.Contains(radioButtonListType))
{
    adapters.Add(radioButtonListType, adapterType);
} 
```

第二种选择是使用`.browser`文件：

将新的添加`Browser File`到您的项目中。它将驻留在`App_Browsers`文件夹中。然后用以下声明替换内容：

```
<browsers>
    <browser refID="Default">
            <controlAdapters>
                <adapter controlType="System.Web.UI.WebControls.RadioButtonList" 
                         adapterType="<your namespace>.RadioButtonListAdapter" />
            </controlAdapters>
    </browser>
</browsers> 
```

作为参考，您可以使用 ScottGu 发布的[ASP.NET 2.0 Control Adapter Architecture](http://weblogs.asp.net/scottgu/archive/2005/12/21/asp-net-2-0-control-adapter-architecture.aspx)中的链接，它们可以在本主题中提供良好的基础。

还有一个开源[CSS Friendly Control Adapters](http://cssfriendly.codeplex.com/)项目解决了默认 ASP.NET 控件的一些呈现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T14:51:04.620

对于.net 4.5 >

您几乎可以获得该 html，至少是使用 OrderedList（或 UnOrdered）的结构，然后使用 CSS 来获得您喜欢的样式。

```
<asp:RadioButtonList ID="rblTest" runat="server" TextAlign="Left" RepeatDirection="Vertical" RepeatLayout="OrderedList">
   <asp:ListItem Value="1" Text="Option 1"></asp:ListItem>
   <asp:ListItem Value="2" Text="Option 2"></asp:ListItem>
   <asp:ListItem Value="3" Text="Option 3"></asp:ListItem>
</asp:RadioButtonList> 
```

这将呈现 html：

```
<ol id="rblTest">
    <li>
        <label for="rblTest_0">Option 1</label>
        <input id="rblTest_0" type="radio" name="rblTest" value="0">
    </li>
    <li>
        <label for="rblTest_1">Option 2</label>
        <input id="rblTest_1" type="radio" name="rblTest" value="0">
    </li>
    <li>
        <label for="rblTest_2">Option 2</label>
        <input id="rblTest_2" type="radio" name="rblTest" value="0">
    </li>
</ol> 
```

如果您愿意，设置 TextAlign="Right" 会在输入之后为您提供标签。

这与您可以使用 div 进行设置一样接近，但是再一次，用 div 包围整个列表并从该 div 设置 li 和标签 css，您应该被设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:08:50.103

我认为您应该寻找使用 CSS 的解决方法，而不是更改结构。即使我面临这种结构的一些问题，但我的设计团队很容易解决它。

# python-2.7 - 在 python 中运行此二进制搜索方法时出现索引错误

> ID：14918444
> 
> 赞同：0
> 
> 时间：2013-02-17T06:02:48.590
> 
> 标签：python-2.7

```
 def unique(ip):
         file = open("/home/USER/Desktop/ipAddreses.txt",'r')
         list = file.readlines()
         list.sort()
         low = 1
         hi = len(list)
         target = convertToStr(ip)
         if hi > 1:
                 while low <= hi:
                 mid = low + (hi-low)/2
                 if list[mid] == target:
                     file.close()
                     return False            
                 elif list[mid] < target: 
                     low = mid+1
                 else:
                     hi = mid-1
         else:
                 if target == list[0]:
                     return False

file.close()
return True 
```

得到这个错误：

```
 if list[mid] == target:
    IndexError: list index out of range 
```

目的是搜索生成的 ip 地址，以确保所有随机创建的 ip 地址都是唯一的。以前在工作...回到家，现在我收到此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:18:38.850

我没有立即看到如何解决您的代码问题，但如果您只想解决手头的问题，这可能不是最好的方法。

*   一般来说，排序然后进行二进制搜索几乎总是比对数组进行简单的线性搜索更糟糕。排序是 O(n log n)，实际上需要“查看”数组的每个元素至少一次，并且需要将整个文件的至少一个副本存储在内存中。如果您只是遍历文件，您最多只能查看每个元素一次，并且只使用恒定数量的内存。

*   无论如何，您可能不应该自己实现二进制搜索（除非您这样做是为了练习），因为您已经发现很容易出错。改用[模块](http://docs.python.org/2/library/bisect.html)。[_`bisect`](http://docs.python.org/2/library/bisect.html)

*   看起来您的代码中有一个退出路径，您没有明确关闭`file`（`target == list[0]`部分）。这就是为什么`with`陈述很好的原因；他们为您处理。

你可以这样做：

```
def unique(ip):
    ip_str = convertToStr(ip)
    with open("/home/USER/Desktop/ipAddreses.txt", 'r') as f:
         return all(line.rstrip() != ip_str for line in f) 
```

如果你要调用`unique`一堆 ip 地址，你可以避免每次都读取整个文件，并获得更快的查找，使用`set`：

```
with open("/home/USER/Desktop/ipAddreses.txt", 'r') as f:
    ip_addresses = set(line.rstrip() for line in f)

def unique(ip):
    return convertToStr(ip) not in ip_addresses 
```

* * *

也就是说，与[模块](http://hg.python.org/cpython/file/2.7/Lib/bisect.py#l67)[的来源`bisect`](http://hg.python.org/cpython/file/2.7/Lib/bisect.py#l67)相比，似乎不同之处在于您使用`while low <= hi`但他们使用`while lo < hi`，以及您使用`hi = mid - 1`他们使用的地方`hi = mid`。我认为（尽管我没有运行它来确定）如果您要搜索的字符串是列表中最大的字符串，那么您最终会得到`low == hi == len(list)`, 所以你设置`mid = len(list)`，当你这样做时它会中断`list[mid]`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T06:12:59.100

检查 mid 是否存在于列表中。

```
if mid in list:
    if list[mid] == target:
        # ... 
```

# haskell - 连接到系统 GHC

> ID：14918453
> 
> 赞同：12
> 
> 时间：2013-02-17T06:04:16.193
> 
> 标签：haskell, ghc

我知道 GHC API 允许我[作为库](http://www.haskell.org/haskellwiki/GHC/As_a_library)使用，访问编译器功能，例如分析、运行和转换 Haskell 代码。将 GHC 作为包导入的 Haskell 程序在编译时将包含其自己的（部分）GHC 副本，因此即使在未安装 GHC 的系统上也可以执行。

但是，如果我不想在程序中包含 GHC，而是使用系统上安装的 GHC 怎么办？

这样，当给程序一个 Haskell 代码时，它将使用系统的 GHC 来理解它，并在必要时导入所有的包和库（在 GHCi 上可用的）。

1.  GHC（安装在不同系统上）是否提供这样的 API？
2.  如果是这样，系统文档资源是否也提供类似的东西？（通过它我可以从 Haskell 代码中选择一个函数，然后查看类型签名、使用信息等。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:20:33.283

您可以要求最终用户安装[BuildWrapper](http://hackage.haskell.org/package/buildwrapper)或[scion](http://hackage.haskell.org/package/scion)，然后以编程方式与它们交互。如果您不想强制用户安装它们，您可以将他们的代码与您的可执行文件捆绑在一起，并让可执行文件调用系统 GHC 来自己构建它们。

# php - 使用 jQuery 获取动态增长的元素

> ID：14918454
> 
> 赞同：0
> 
> 时间：2013-02-17T06:04:20.773
> 
> 标签：php, jquery, mysql

如果我有这样的动态元素：http: [//jsfiddle.net/kfm5b/2/](http://jsfiddle.net/kfm5b/2/)

```
<select name="roomFac1" id="roomFac1">
  <option selected="selected">Any</option>
</select>
<input type="button" value="Add" class="pmbtn" id="addFac"/>
<input type="button" value="Remove" class="pmbtn" id="removeFac"/>

$(document).ready(function(){
    $('#addFac').click(function(){
        var $objs = $('select[name*=roomFac]');
        var n = $objs.size() + 1;
        var $obj = $objs.first().clone();
        $obj.attr('name', 'roomFac'+n).attr('id', 'roomFac'+n);
        $obj.appendTo($('body'));
    });
    $('#removeFac').click(function(){
        var $objs = $('select[name*=roomFac]');
        if($objs.size() > 1){
           $objs.last().remove();
        }
    });
}); 
```

一旦用户单击提交按钮，我将如何获取其输出以用于 AJAX 提交，例如

```
$("#submit").click(function () {
...
...
var dataString = ....; // how I would I implement the dynamically created elements here s I don't know the size
...
...
$.ajax({
    type: "POST",
    url: "process.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#search_room').html(html);
    }
}); 
```

其次，我会在处理处理的 PHP 文档中放入什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:11:36.493

我猜你正在尝试做这样的事情：

```
$("#submit").on('click', function(e) {
    e.preventDefault();
    var dataString = $.map($('[id^="roomFac"]'), function(val, i) {
       return {val.name : val.value}; //return name and value of elements
    });

    $.ajax({
        type: "POST",
        url: "process.php",
        data: dataString,
        success: function (html) {
            $('#search_room').html(html);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:16:21.203

考虑到您需要将所有选定元素的值放在`dataString`.

```
 $("#submit").click(function () {

    var dataString = "";

        $('select[name*=roomFac]').each(function(){
            dataString+=$(this).val();
            dataString+=",";
        });

        $.ajax({
            type: "POST",
            url: "process.php",
            data: dataString.substring(0, dataString.length - 1);,
            cache: false,
            success: function (html) {
                $('#search_room').html(html);
            }
        });
    }); 
```

一边`php`：

```
 $dataFromClient = $_POST['data'];
    $dataFromClient = explode(',',$dataFromClient);

//now $dataFromClient  will be an array that contains all the values. 
```

# java - 使用 Mockito，如果我使用 @InjectMocks 将一个对象注入到我的模拟中，我如何避免使其他对象无效？

> ID：14918457
> 
> 赞同：0
> 
> 时间：2013-02-17T06:04:55.860
> 
> 标签：java, unit-testing, mockito

```
public class TargetObjectWrapper extends TargetObject {
   @Mock SomeObject myMockOfSomeObject;
   @InjectMocks TargetObject targetObject;

   public TargetObjectWrapper(){
       this.targetObject = mock(originalObject);

       //doAnswer(...).when(...) methods
   } 

   //Override other methods of TargetObject
 } 
```

我正在尝试将特定的模拟对象注入到`targetObject`. 我知道 targetObject 将始终具有具有此特定签名的字段。

这一切都有效，我可以成功注入`myMockOfSomeObject`，并适当地重定向调用。

但是当 TargetObject 类包含像下面这个简单示例这样的其他字段时，当我将请求传递给原始对象时，该字段会被清空并导致空指针异常。

`Log log = LogFactory.getLog(getClass());`

如何避免导致其他对象获取空值？特别是如果其他变量可能会因对象而异（此代码应该是通用的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:42:53.807

在这种情况下，这似乎`spy(..)`不是`mock(...)`正确的方法。虽然我还没有测试过它是否注入了我的模拟对象，但我相信它确实注入了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T02:24:22.500

向您的测试类添加`@RunWith(MockitoJUnitRunner.class)`注释。

# c# - 管理频繁附加数据的最有效方法

> ID：14918458
> 
> 赞同：1
> 
> 时间：2013-02-17T06:04:59.400
> 
> 标签：c#, arrays, list, xna-4.0

我正在开发一个 2D 无限横向滚动游戏。随着玩家向右移动，我继续向世界添加一段随机的图块，使其无缝且“无限”。如下图所示，当视口右侧到达蓝色区域时，会附加随机段。

![插图](../Images/d0c4de4fa17cb425f475af5fdd88b458.png)

我这样做的方式目前工作得很好。问题是我觉得有一种更有效的方法。

世界的瓦片以二维数组表示，附加到世界的函数看起来像这样。

```
Array.Resize<Tile[]>(ref world.Tiles, newWidth);

for (int x = 0; x < newSegment.Width; x++) 
{
    world.Tiles[oldWidth + x] = newSegment.Tiles[x];
} 
```

我知道这`List<T>`对于动态对象集合来说是理想的，但请记住，可能会有*数千*列。如果我假设正确，很多列表项，尤其是嵌套的，会产生很多开销。出于这个原因，我最初选择了数组。

我目前的方法效率低吗？如果是这样，我应该如何经常（平均每 10-15 秒）向世界添加一个随机段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:22:06.807

[LinkedList`<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx) 怎么样？在你的情况下`LinkedList<Tile>`

或者甚至更好，一个[Queue`<T>`](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)？如果您所做的只是将 Tiles 排入队列并移动一个方向（不需要/能够转到前一个 tile（s），则队列可能是开销的最佳选择。）

无论是集合、LinkedList 还是队列，都不需要调整数组的大小，而不是你自己。内存管理是在内部以一种有效的方式完成的。

# matlab - MATLAB 只获取一次函数的输入

> ID：14918459
> 
> 赞同：0
> 
> 时间：2013-02-17T06:05:17.957
> 
> 标签：matlab, input

我希望我的 Taylor 方法能够在执行时提示函数。我尝试使用MATLAB 文档中描述的[input(prompt) 。](http://www.mathworks.com/help/matlab/ref/input.html)问题是，每次在代码中遇到它都会提示我输入函数。

```
function taylorMethod(a, b, h, alpha, order)

    f = @(t, y) input('Enter f(t, y): ');
    fPrime = @(t, y) input('Enter f''(t, y): ');
    taylor2 = @(t, w) f(t, w) + h/2*fPrime(t, w);

    if order > 2
        f2Prime = @(t, y) input('Enter f''''(t, y): ');
        taylor3 = @(t, w) taylor2(t, w) + h^2/factorial(3)*f2Prime(t, w);
        if order == 4
            f3Prime = @(t, y) input('Enter f''''''(t, y): ');
            taylor4 = @(t, w) taylor3(t, w) + h^3/factorial(4)*f3Prime(t, w);
        end
    end

    function res = t(i)
        if i == a
            res = a;
            return;
        end
        res = h + t(i - 1);
    end

    idx = a;
    for i = a:h:b
        fprintf('i = %d; t_i = %.2f; w(i) = %.10f\n', idx, t(idx), w(idx));
        idx = idx + 1;
    end

    function res = w(i)
        j = i - 1;
        if i == a
            res = alpha;
            return;
        end
        if order == 2
            res = w(j) + h*taylor2(t(j), w(j));
        elseif order == 3
            res = w(j) + h*taylor3(t(j), w(j));
        elseif order == 4
            res = w(j) + h*taylor4(t(j), w(j));
        end
        return;
    end

end 
```

我还尝试将用户输入存储在这样的字符串中：

```
fString = input('Enter f(t, y): ', 's');
fPrimeString = input('Enter f''(t, y): ', 's');
f = @(t, y) fString;
fPrime = @(t, y) fPrimeString;
taylor2 = @(t, w) f(t, w) + h/2*fPrime(t, w); 
```

但我得到一个错误：

> 使用 + 矩阵尺寸的错误必须一致。
> 
> taylorMethod>@(t,w)f(t,w)+h/2*fPrime(t,w) 中的错误（第 13 行） taylor2 = @(t, w) f(t, w) + h/2* f素数（t，w）；
> 
> taylorMethod/w 错误（第 47 行） res = w(j) + h*taylor2(t(j), w(j));
> 
> taylorMethod 中的错误（第 35 行） fprintf('i = %d; t_i = %.2f; w(i) = %.10f\n', idx, t(idx), w(idx));

我没有将函数作为参数传递的原因是因为我想对不同的订单使用相同的代码......并且不同的订单不需要相同数量的函数。

有没有一种方法可以提示用户一次使用这些功能，并在整个过程中使用这些功能而无需再次提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:31:11.023

如果要将表达式存储为字符串，可以使用`eval`. 但这是一个非常强大的解决方案；仅当您完全相信输入不会做任何恶意时才使用它。

```
fString = input('Enter f(t, y): ', 's');
fPrimeString = input('Enter f''(t, y): ', 's');
f = @(t, y) eval(fString);
fPrime = @(t, y) eval(fPrimeString);
taylor2 = @(t, w) f(t, w) + h/2*fPrime(t, w); 
```

一种更简洁的方法是将用户输入转换为函数：

```
f = str2func(['@(t, y)' input('Enter f(t, y): ', 's')]);
fPrime = str2func(['@(t, y)' input('Enter f''(t, y): ', 's')]);
taylor2 = @(t, w) f(t, w) + h/2*fPrime(t, w); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:09:14.693

与其要求用户输入，你不能只使用一个单元格数组吗？这解决了不同数量的函数的问题，并使您的代码具有更灵活的用途。

您的代码可能类似于：

```
function taylorMethod(a, b, h, alpha, order, funcs)

    f = funcs{1}; % first element is f(t, y)
    fPrime = funcs{2}; % f'(t, y)
    taylor2 = @(t, w) f(t, w) + h/2*fPrime(t, w);

    if order > 2
        f2Prime = funcs{3}; % f''(t, y)
        taylor3 = @(t, w) taylor2(t, w) + h^2/factorial(3)*f2Prime(t, w);
        if order == 4
            f3Prime = funcs{4}; % f'''(t, y)
            taylor4 = @(t, w) taylor3(t, w) + h^3/factorial(4)*f3Prime(t, w);
        end
    end

   % the rest is the same 
```

你可能会这样称呼

```
taylorMethod(a, b, h, alpha, 3, {@(t, y) y^3, @(t, y) 3*y^2, @(t, y) 6*y}) 
```

提供尽可能多的衍生品（或更多；它不在乎）。

# php - 使用 AJAX 从 PHP 文件中获取响应

> ID：14918462
> 
> 赞同：39
> 
> 时间：2013-02-17T06:05:38.153
> 
> 标签：php, jquery, ajax

所以这是我的问题，我正在使用 AJAX (jQuery) 将表单发布到，`process.php`但页面实际上需要回显一个响应，例如`apple`or `plum`。我不确定如何从中获取响应`process.php`并将其存储为变量...

这是我到目前为止的代码：

```
<script type="text/javascript">
        function returnwasset(){
            alert('return sent');
            $.ajax({
                type: "POST",
                url: "process.php",
                data: somedata;
                success function(){
                    //echo what the server sent back...
                }
            });
        }
    </script> 
```

我还需要`process.php`在 json 中回显响应吗？还是纯文本可以吗？

抱歉，如果这听起来像一个愚蠢的问题，这是我第一次在 Ajax 中做类似的事情。

PS：上面代码中的POST请求如何命名？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-17T06:07:52.113

`<?php echo 'apple'; ?>`几乎是你在服务器上所需要的。

至于 JS 端，服务器端脚本的输出作为参数传递给成功处理函数，所以你有

```
success: function(data) {
   alert(data); // apple
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-08-14T22:09:04.593

好的做法是这样使用：

```
$.ajax({
    type: "POST",
    url: "/ajax/request.html",
    data: {action: 'test'},
    dataType:'JSON', 
    success: function(response){
        console.log(response.blablabla);
        // put on console what server sent back...
    }
}); 
```

php部分是：

```
<?php
    if(isset($_POST['action']) && !empty($_POST['action'])) {
        echo json_encode(array("blablabla"=>$variable));
    }
?> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-17T06:08:50.287

```
<script type="text/javascript">
        function returnwasset(){
            alert('return sent');
            $.ajax({
                type: "POST",
                url: "process.php",
                data: somedata;
                dataType:'text'; //or HTML, JSON, etc.
                success: function(response){
                    alert(response);
                    //echo what the server sent back...
                }
            });
        }
    </script> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-17T06:10:41.930

在您的 PHP 文件中，当您回显数据时使用 json_encode ( [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) )

例如

```
<?php
//plum or data...
$output = array("data","plum");

echo json_encode($output);

?> 
```

在您的 javascript 代码中，当您的 ajax 完成时，json 编码的响应数据可以变成这样的 js 数组：

```
 $.ajax({
                type: "POST",
                url: "process.php",
                data: somedata;
                success function(json_data){
                    var data_array = $.parseJSON(json_data);

                    //access your data like this:
                    var plum_or_whatever = data_array['output'];.
                    //continue from here...
                }
            }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-27T06:32:40.637

```
var data="your data";//ex data="id="+id;
      $.ajax({
       method : "POST",
       url : "file name",  //url: "demo.php"
       data : "data",
       success : function(result){
               //set result to div or target 
              //ex $("#divid).html(result)
        }
   }); 
```

# vba - powerpoint addin 如何获得自己的名称？

> ID：14918464
> 
> 赞同：0
> 
> 时间：2013-02-17T06:06:00.740
> 
> 标签：vba, add-in, powerpoint

我有一个名为“abcde.ppam”的 PowerPoint 插件文件。而且我还添加了一个“Auto_Open”子，以便在 PowerPoint 应用程序启动时运行一些代码。我的问题是如何在“Auto_Open”中获得名称“abcde.ppam”？是否有“ThisAddin.name”或“ThisAddin.path”之类的东西或任何其他解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-09T17:15:47.807

好的，这个方法怎么样。您希望将 WhoAmIToday 重命名为每个加载项唯一的名称。WhoMe_{guid} 之类的。

```
Sub Auto_Open()

    Dim x As Long
    Dim sTemp As String
    Dim sFilename As String

    ' Get the internal name of the add-in
    sTemp = WhoAmIToday

    For x = 1 To Application.AddIns.Count
        On Error Resume Next
        ' Attempt to call the same WhoAmI routine on each addin in the addins collection
        If Application.Run(Application.AddIns(x).Name & "!WhoAmIToday") = sTemp Then
            If Err.Number = 0 Then
                ' Found it; here's the name
                MsgBox Application.AddIns(x).Name
            End If
        End If

    Next

End Sub

Function WhoAmIToday() As String
   WhoAmIToday = "Yes. It's ME"
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:14:45.377

您需要做的就是在加载项的代码中声明一个字符串常量，并将其设置为加载项的名称。

然后你可以做 Application.Addins(MyName).Path 等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T10:01:38.890

好吧，史蒂夫，我必须纠正你。您可以通过调用您在插件中构建的独特函数来识别插件。如果它在那里，即使用户可能已重命名文件，您也知道这就是插件。大致

```
sub getMe()
dim MyAddin as addin
dim oAddin as addin
for each oAddin in application.addins
on error resume next
if (application.run ....uniqueFunction) = "YepItsMe" then
 Set MyAddin = oAddin
 exit for
end if
err.clear
next

'....code acting upon MyAddin

end sub

function uniqueFunction() as string
uniqueFunction="YepItsMe"
end function 
```

# android - 获取列表视图中复选框的位置

> ID：14918465
> 
> 赞同：0
> 
> 时间：2013-02-17T06:06:25.390
> 
> 标签：android, listview, checkbox, onitemclicklistener

我有一个lisview，其中每行有三个文本框和一个复选框，我使用以下代码片段来获取选中复选框的确切位置，它对我很有效，但现在我不想把它放进去， `listView.setOnItemClickListener` 因为我想通过按钮而不是通过单击列表视图的项目或行来删除选中的项目，但是我不知道将这些代码放在哪里来实现我的目标，我会提前感谢您的关注和建议。

```
listView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        CheckBox cbx = (CheckBox)view.findViewById(R.id.ChkOrder);

            int firstPosition = listView.getFirstVisiblePosition();
            for(int i=firstPosition;i<listView.getCount();i++){
            View v=listView.getChildAt(i);
            cbx = (CheckBox)v.findViewById(R.id.ChkOrder);
            if(cbx.isChecked()){

                 Toast.makeText(getApplicationContext(), 
                                 "Checked position " + goods.get(i), 
                                  Toast.LENGTH_SHORT).show();
                 checkedItemPosition=i;

           }
        }

     }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:28:08.133

这将通过将其放在您的首选按钮中并将视图更改为`listview`您在代码中声明的方式来解决：

```
Button Delete=(Button)findViewById(R.id.DeleteButton);
       DeleteGoods.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                /** Getting the position of the currently selected item**/
                //////////////////////////////////
                 CheckBox cbx = (CheckBox)listView.findViewById(R.id.ChkOrder);

                    int firstPosition = listView.getFirstVisiblePosition();
                    for(int i=firstPosition;i<listView.getCount();i++){
                    View v1=listView.getChildAt(i);
                    cbx = (CheckBox)v1.findViewById(R.id.ChkOrder);
                    if(cbx.isChecked()){

                        // Toast.makeText(getApplicationContext(), 
                               //          "Checked position " + goods.get(i), 
                                //          Toast.LENGTH_SHORT).show();
                         checkedItemPosition=i;
                    }
                    } 
```

# javascript - 无需散列或迭代即可检测 URL 更改

> ID：14918466
> 
> 赞同：1
> 
> 时间：2013-02-17T06:07:00.070
> 
> 标签：javascript, html, html5-history

我有一个谷歌即时类型的东西，其中 URL 将通过历史 API 更改。当用户从一个查询转到另一个查询，然后点击后退按钮，没有任何反应时，就会出现问题。地址栏中的 URL 改变了，就是这样。我需要检测何时按下后退/前进按钮，或 URL 何时更改，以及触发和事件。我只关心这个在现代浏览器中的工作，因为无论如何我的网站只能由现代浏览器访问。

我也不想使用迭代，因为这不是即时的，也不像事件那么简单。还有其他更简单的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:28:19.420

每当使用 pushstate 更改 URL 时，windows popstate 事件就会触发，这是您应该使用 ajax 或您正在使用的任何内容更改站点内容的事件，因为它也会在浏览器的后退/前进按钮上触发。在某些浏览器中，它还会在第一次页面加载时触发，因此您还需要检查它。

我真的没有时间用事件处理程序编写一个完整的原生 JS 示例，但这里有一个快速的 jQuery 版本：

```
var checkForFirstLoad = true;

$(window).on({
    load: function() {
        checkForFirstLoad = false;
    },
    popstate:function(e) {
        if (checkForFirstLoad) {
            updatePage(e.originalEvent.state!=null ? e.originalEvent.state.page : document.location.pathname, true);
        }else{
            checkForFirstLoad = false;
        }
    }
});

function updatePage(pageURI, type, switchContent) {
    if (!type) {
        history.pushState({ page: pageURI }, page, pageURI);
    }
    if (switchContent) {
        //replace site content etc.
    }
} 
```

现在这只是一个非常简单的例子，还有很多事情要做，比如检查浏览器支持、检查点击的链接是否与当前 url 具有相同的 href、识别不同的 url 等等。我只是从一个项目中复制了这个对象字面量中有几千行代码，因此您必须弄清楚 popstate 是如何工作的，以及如何在自己的代码中使用它。

# android - 编译 android_npapi.h 文件时的多个预期标识符或 '(' 在 ':' 标记之前

> ID：14918475
> 
> 赞同：0
> 
> 时间：2013-02-17T06:08:03.753
> 
> 标签：android, android-ndk, npapi, browser-plugin

如上所述，此时 android_npapi.h 提供了上述类型的多个错误：

```
struct ANPInterface {
    uint32_t    inSize;     // size (in bytes) of this struct
};

enum ANPLogTypes {
    kError_ANPLogType   = 0,    // error
    kWarning_ANPLogType = 1,    // warning
    kDebug_ANPLogType   = 2     // debug only (informational)
};
typedef int32_t ANPLogType;

struct ANPLogInterfaceV0 : ANPInterface {
    /** dumps printf messages to the log file
        e.g. interface->log(instance, kWarning_ANPLogType, "value is %d", value);
     */
    void (*log)(ANPLogType, const char format[], ...);
};

struct ANPBitmapInterfaceV0 : ANPInterface {
    /** Returns true if the specified bitmap format is supported, and if packing
        is non-null, sets it to the packing info for that format.
     */
    bool (*getPixelPacking)(ANPBitmapFormat, ANPPixelPacking* packing);
}; 
```

从“struct ANPLogInterfaceV0 : ANPInterface”开始，每个包含 ANPInterface 继承的结构定义都会出现上述错误。

有关上述头文件的更多信息：[android_npapi.h](http://code.metager.de/source/xref/android/4.0.3/external-webkit/Source/WebKit/android/plugins/android_npapi.h)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:18:39.147

您是否尝试将代码编译为 C 或 C++？该头文件使用结构继承，这意味着它需要编译为 C++。

# actionscript-3 - Adobe Air 桌面应用程序限制窗口大小

> ID：14918484
> 
> 赞同：0
> 
> 时间：2013-02-17T06:09:42.850
> 
> 标签：actionscript-3, air, resize, window, adobe

我有一个在 Mac 和 PC 上运行的 Adob​​e Air 应用程序。（用 AS3 编码）但是，该应用程序的尺寸为 540 x 960。我的内容隐藏在可见舞台之外，但是如果用户将窗口大小调整到侧面，我的内容就会显示出来，看起来真的很有趣。

**有没有办法阻止用户调整应用程序窗口容器的大小？**

我知道我可以删除窗口，但他们不能在屏幕上拖动应用程序或根据需要将其最小化。有..有一个简单的方法来阻止他们调整大小。

感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:39:12.387

我找到了答案。:)

```
<application....>
    <!-- Normal app stuff like id, name, etc -->
    <initialWindow>
        <!-- Normal initialWindow stuff like content, title, systemChrome -->
        <minimizable>true</minimizable>
        <maximizable>false</maximizable>
        <resizable>false</resizable>
        <width>800</width>
        <height>600</height>
    </initialWindow>
</application> 
```

在这里找到答案：[在 AIR 中，如何创建不可调整大小的窗口应用程序？](https://stackoverflow.com/questions/652791/in-air-how-do-you-create-a-windowed-application-thats-not-resizable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:23:34.523

您实际上可以让窗口调整大小并设置窗口的最大大小。这允许您的用户将其调整为小于您的内容等。

```
... 
<initialWindow>
    <minimizable>true</minimizable>
    <maximizable>false</maximizable>
    <resizable>true</resizable>
    <width>800</width>
    <height>600</height>

    <maxSize>800 600</maxSize>

    ...
</initialWindow> 
```

有关元素的更多信息，请参见此处：http: [//help.adobe.com/en_US/air/build/WSfffb011ac560372f2fea1812938a6e463-8000.html#WSfffb011ac560372f2fea1812938a6e463-7fe7](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f2fea1812938a6e463-8000.html#WSfffb011ac560372f2fea1812938a6e463-7fe7)

要以编程方式更改窗口的尺寸，您需要使用舞台上的 NativeWindow 引用：

```
import flash.display.NativeWindow;

// Simple validity check
if (stage && stage.nativeWindow)
{
    stage.nativeWindow.width = SOME_WIDTH;
    stage.nativeWindow.height = SOME_HEIGHT;
} 
```

# javascript - 是否可以在 javascript/jquery 函数中使用 jinja 值

> ID：14918486
> 
> 赞同：1
> 
> 时间：2013-02-17T06:09:53.007
> 
> 标签：javascript, google-app-engine, jinja2

查看 google web eng 示例；

```
{% for greeting in greetings %}
  {% if greeting.author %}
    <b>{{ greeting.author }}</b> wrote:
  {% else %}
    An anonymous person wrote:
  {% endif %}
  <blockquote>{{ greeting.content|escape }}</blockquote>
{% endfor %} 
```

所以我想要的是：当这个迭代时，我需要以某种方式检查greeting.author 再次检查javascript中存在的一些变量，然后做一些其他的事情。有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T06:24:29.690

```
{% for greeting in greetings %}
  {% if greeting.author %}
    <b>{{ greeting.author }}</b> wrote:
  {% else %}
    An anonymous person wrote:
  {% endif %}
  <blockquote>{{ greeting.content|escape }}</blockquote>
  <script type="text/javascript">
     var greeting_author = "{{ greeting.author }}";
     if(greeting_author === someVariable){
        // do other stuff here
     }
  </script>
{% endfor %} 
```

基本上，您可以将变量打印为 js。记住类型（例如将`""`它们放在字符串周围）。

# c# - EventHandler(Object sender, CustomEvtArgs custEvtArgs)的2个以上参数可能需要什么？

> ID：14918492
> 
> 赞同：-1
> 
> 时间：2013-02-17T06:10:32.513
> 
> 标签：c#, events, generics, delegates, event-handling

当 EventHandler 有超过 2 个参数时，我会看到 C# 代码。

这是一个好习惯吗？

实现自定义事件参数 CustomEvtArgs 时可能的示例有哪些： EvtArgs 类不足以处理事件的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:28:28.577

没有什么能阻止您创建更多参数。EventArgs 派生类通常更易于维护，因为当您添加新参数时（例如：向 SearchEventArgs 类型类添加新字段），您不必重写所有现有方法调用，只需使用新参数即可在新方法中。

# ruby-on-rails - Ruby on Rails：记住状态和 RESTful

> ID：14918501
> 
> 赞同：2
> 
> 时间：2013-02-17T06:11:29.080
> 
> 标签：ruby-on-rails, ruby, rest

我是 Ruby 和 Rails 的新手。

我做了一个简单的应用程序，其中索引页面显示了一个 Cars 表，其中包含品牌、型号和类型（跑车、SUV、豪华车）的列。

我已经做到了，所以我可以单击列标题并按该列排序

我还在表格上方添加了一个表格，每个汽车类型都有一个复选框，用户可以在其中选中/取消选中复选框并单击“提交”，表格将只显示已选中类型的汽车。

我想要做的是按某个列排序，然后选中一些框/单击提交并显示结果，列表仍然排序和过滤。

现在，我可以排序或过滤，但如果我执行一个操作，我的应用程序会忘记前一个操作。

什么是 RESTful 方式来做到这一点？

我是否应该在会话哈希中保留“设置”，并在每次用户发出新的 HTTP 请求时从中构造一个 URI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:49:02.317

在请求 URI 中包含排序/过滤参数有什么问题？例如，当您提交“honda”品牌的过滤器表单时，uri 将类似于`/cars?filter[make]=honda`. 如果您还包括排序选项，则 uri 可能是`/cars?filter[make]=honda&sort_by=make`.

在您的控制器内部，您可以通过 params 哈希访问这些：

```
class CarsController < ApplicationController
  def index
    @filter = params[:filter]  || {}
    @order  = params[:sort_by] || "created_at"

    @cars = Car.where(@filter).order(@order)
  end
end 
```

您可以通过在视图中包含路径助手中的参数来生成这些 uri：

```
link_to "Only show hondas", cars_path(:sort_by => @order, :filter => {:make => "honda"})
link_to "Sort by year",     cars_path(:sort_by => :year,  :filter => @filter) 
```

这样，@filter 和 @order 将在请求之间“持久化”，除非您明确更改它们。（这些链接不是 DRY ......您应该动态生成它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:26:07.253

只要用户登录，会话哈希中保存的任何数据都是可用的。当前的 URI 是什么并不重要。如果你想使用`params`哈希，你只需要破解 URI。

因此，您应该`session[:sortBy] = :make`在选择排序操作时执行类似操作。然后，无论您当前在控制器中访问的任何位置，都改为`params[:sortBy]`拉动。`session[:sortBy]`

我当然在猜测你的符号是什么样的。允许我们查看您自己的一些代码会有所帮助。

# c - 如何交换指针变量以声明一个初始大小未知的数组？

> ID：14918504
> 
> 赞同：0
> 
> 时间：2013-02-17T06:11:53.740
> 
> 标签：c, arrays, pointers, struct

所以我想要一个最初不知道大小的数组（从命令行从用户那里获取），但我想让它全局可访问（在 main 之外）。

所以这就是我所做的：

```
 //.h file declaration
 typedef struct res
 {
   int popultaion[NB_TYPE];
   int alive;
   int birthat[NB_TYPE];
 }res_t;

 //.c file
 res_t* res_first = NULL;

 int main(int argc, char* argv[])
 {
    int no_of_mutants = atoi(argv[1]);
    int i,j = 0;
    srand(time()NULL);
    res_t* tem= res_first;
    for(i = 0; i < no_of_mutants; i++)
    {      

       for(j = 0; i < NB_TYPE; i++)
       {             
         tem->popultaion[j] = rand();
       }
       tem++
    }
    //...other code
  } 
```

我遇到了分段错误。，当我使用 gdb 进行调试时，它似乎在这里得到了 SIGSEGV。

```
 tem->popultaion[j] = rand(); 
```

我有两个问题：

1.  这种尝试使用添加指针构造数组的形式是否有效？尽管地址在技术上应该是有效的，但我在第一次运行时遇到了段错误。
2.  从结构访问数组成员的方式是否有效？（有点确定，但只是想确定一下）？

PS 我知道 malloc 并且可以使用 malloc 实现相同的目标，但我想知道这是否是给我带来问题的原因，然后再更改代码中的其他任何地方，如果是，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:16:27.367

> 这种尝试使用添加指针构造数组的形式是否有效？尽管地址在技术上应该是有效的，但我在第一次运行时遇到了段错误。

为什么要呢？它是`NULL`，因此您的代码会调用**未定义的行为。**您需要做的是在用户输入数组中的项目数时为其分配内存。

```
res_first = malloc(sizeof(*res_first) * NUM_OF_ELEMENTS); 
```

当然，使用后释放它：

```
free(res_first); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:14:34.277

您确实会遇到分段错误，因为您没有分配任何内存。你`res_first`甚至没有初始化，`NULL`所以它指向随机的东西。您需要调用`malloc`以在堆上分配所需大小的数组。也看看`realloc`你是否需要稍后重新分配。

# java - 扩展最终类的通用类型

> ID：14918507
> 
> 赞同：0
> 
> 时间：2013-02-17T06:12:17.143
> 
> 标签：java

在 java 中，Final 类不能被普通类扩展，但可以扩展泛型类型。这意味着什么？例如 Integer 是 JAVA API 中的最终类，该类无法扩展，但以下代码未显示任何错误。

```
public class SampleClass<T extends Integer> {

// memebers

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T06:15:13.677

尽管代码没有显示任何错误，但类型参数的任何实际绑定`T`都必须是`Integer`因为，正如您正确指出的那样，`Integer`是一个`final`类。泛型类型参数虽然使用`extends`关键字，但并未定义实际的类；因此您发布的代码中没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:17:15.243

那是因为编译器期望`T`是类型`Integer`或派生自`Integer`.

既然`Integer`是`final`类，`T`就只能是`Integer`。

仅当您尝试从以下位置**创建**类型时才会发生该错误`Integer`

例如，编译器会在这里抛出错误：

```
class IncompilableInteger extends Integer { } 
```

因为它试图从**创建**一个类型`Integer`，但这不会：

```
class Compilable <T extends Integer> { } 
```

因为它试图**创建**一个包含类型对象的类型——要么是一个`Integer`类型，要么是一个派生自`Integer`但`Integer`本身不同的类型。

# php - 来自数据库列的超链接列表

> ID：14918509
> 
> 赞同：0
> 
> 时间：2013-02-17T06:12:39.653
> 
> 标签：php, html, mysql, hyperlink

我的电影有一个 mysql 数据库

```
id | movietitle | year | imdbnumber 
```

我想将我的电影显示为带有 php sql 查询的超链接列表

像这样

```
<a href="http://www.imdb.com/title/ttIMDBNUMBER/" target="_blank">MOVIETITLE (YEAR)</a><br> 
```

我希望它们按字母排序和分组

例子：

```
T
Titanic (1997)
THX 1138 (1971)

U
Underworld (2003)
... 
```

我怎么能在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:20:55.490

您可以使用 SQL 查询本身对列表进行排序，使用`ORDER BY`.

从数据库中获取数据后，您可以像这样创建每个超链接：

```
<a href="http://www.imdb.com/title/tt<?=$imdbnumber?>/" target="_blank"><?=$movietitle?> <?=$year?></a><br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:36:55.520

如果您不想使用正则表达式，这是解决方案之一。

```
<?php
$movie[0]='Amber';
$movie[1]='babar';
$movie[2]='Aviator';
$movie[3]='Caty boy';

function startsWith($haystack, $needle)
{
    return !strncmp($haystack, $needle, strlen($needle));
}

foreach (range('a', 'z') as $i){
    echo '<h1>'.strtoupper($i).'</h1>';
    foreach($movie as $key){
        if(startsWith(strtolower($key),$i)){
            echo '<li>'.$key.'</li>';
        }
    }
}

?> 
```

上面的输出将是：

```
A
Amber
Aviator
B
Babar
C
Caty boy
D
E
F
G
H
I
J
K
L
M
N
O
P
Q
R
S
T
U
V
W
X
Y
Z 
```

当然，使用 ORDER BY SQL 查询从数据库中填充您的 $movie 数组。那么 $movie 数组可以是这种格式

```
Title - (Year) 
```

您在标题之后添加的内容 - 年份或任何其他细节不会有所不同。条件是您的字符串应以标题开头。所以即使你错过了格式，例如：

```
$movie[0]='Titanic';
$movie[1]='Hulk (2009)'; 
```

该函数仍应按照您在问题陈述中描述的方式对其进行排序。希望能帮助到你。

# java - 获取数组上前一个索引的值

> ID：14918510
> 
> 赞同：0
> 
> 时间：2013-02-17T06:12:45.917
> 
> 标签：java, android, arrays

我这里有两个字符数组，我的目标是得到两个数组的变化并形成一串单词。这个想法就像在拼字游戏中获取新玩过的单词，其中我还需要考虑我之前使用的字符字。（我说清楚了吗？）。我的问题是，我可以得到 OST 但不能得到 P ......请帮助......

这是我的代码

```
Character[][] arr1 = new Character[4][4];
    arr1[0][0] = 'H';
    arr1[0][1] = 'E';
    arr1[0][2] = 'L';
    arr1[0][3] = 'P';
    arr1[1][0] = ' ';
    arr1[1][2] = ' ';
    arr1[1][3] = ' ';
    arr1[2][0] = ' ';
    arr1[2][1] = ' ';
    arr1[2][2] = ' ';
    arr1[2][3] = ' ';
    arr1[3][0] = ' ';
    arr1[3][1] = ' ';
    arr1[3][2] = ' ';
    arr1[3][3] = ' ';

    Character[][] arr2 = new Character[4][4];
    arr2[0][0] = 'H';
    arr2[0][1] = 'E';
    arr2[0][2] = 'L';
    arr2[0][3] = 'P';
    arr2[1][0] = ' ';
    arr2[1][2] = ' ';
    arr2[1][3] = 'O';
    arr2[2][0] = ' ';
    arr2[2][1] = ' ';
    arr2[2][2] = ' ';
    arr2[2][3] = 'S';
    arr2[3][0] = ' ';
    arr2[3][1] = ' ';
    arr2[3][2] = ' ';
    arr2[3][3] = 'T';

    for(i=0;i<4;i++){
        for(j=0;j<4;j++){
            if(arr1[i][j]!=arr2[i][j]){
                s = arr2[i][j];
                t = Character.toString(s);
                out = builder.append(t).toString();
            }
        }
    }
    ok.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            output.setText(out);
            }
    }); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:28:36.817

您无法获得“P”的原因是您的条件在 arr1[0][3]!=arr2[0][3] 为假的情况下无效。在这种情况下，条件检查 if("P"!= "P") 是否为假，因此循环忽略该条件。

但是“O”、“S”、“T”与“”比较，所以会附加“OST”

也许你可以从这里解决，或者解释更多关于需求的信息。

# linux - 使用 egrep -o 后如何进行 egrep

> ID：14918515
> 
> 赞同：0
> 
> 时间：2013-02-17T06:13:23.450
> 
> 标签：linux, bash, shell, grep

我有一个名为 random.html 的文件，其中包含以下行（不是唯一的行）：

```
blahblahblahblah random="whatever h45" blahblahblahblah 
```

我只想得到任何东西，到目前为止我使用了以下内容：

```
egrep -o 'random="([a-z]*[A-Z]*[0-9]*[ ]*)+' 
```

这给了我`random="whatever h45`

我不能`egrep -o ="([a-z]*[A-Z]*[0-9]*[ ]*)+'`一开始就使用，因为这不是我唯一的行，并且会有不需要的行，随机关键字对于区分目的很重要。我试图做一个双重 egrep -o 例如：

```
egrep -o 'random="([a-z]*[A-Z]*[0-9]*[ ]*)+' | egrep -o '="([a-z]*[A-Z]*[0-9]*[ ]*)+' 
```

它会在哪里显示`="whatever h45`但不起作用。我做错了什么还是违法的？我不想使用任何花哨的东西或使用剪切。这应该是非常“基本”的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:14:46.760

您也可以`bash`单独执行此操作：

```
while read -r; do
    [[ $REPLY =~ random=\"([a-zA-Z0-9]+) ]] || continue
    echo ${BASH_REMATCH[1]}
done < file.txt 
```

如果您的版本`grep`支持 Perl 正则表达式，您可以使用回溯断言仅匹配后面的文本`random="`。

```
grep -P -o '(?<=random=\")([a-zA-Z0-9]+)' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:31:33.680

您只是使用了错误的工具，这在 awk 中是微不足道的。有多种解决方案，这里有一个：

```
$ cat file
blahblahblahblah random="whatever h45" blahblahblahblah

$ awk 'match($0,/random="([a-z]*[A-Z]*[0-9]*[ ]*)+/) { print substr($0,RSTART+8,RLENGTH-8) }' file
whatever h45 
```

从您的问题中不清楚您是否想要`whatever`或`whatever h45`或`="whatever h45`或打印字符串的其他部分，所以我只选择了我认为最有可能的那个。不管是什么，都是微不足道的...

顺便说一句，您的正则表达式似乎没有意义，我只是从您的问题中复制了它，以减轻您所拥有的与 awk 解决方案之间的对比。如果您用文字告诉我们它的含义，我们可以为您正确编写它，但我认为最有可能的是它应该是非双引号，例如：

```
$ awk 'match($0,/random="[^"]+/) { print substr($0,RSTART+8,RLENGTH-8) }' file
whatever h45 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:38:49.873

Perl 解决方案的完整性。

```
#% perl -n -e 'print $1, "\n" if m!random="(\S+)!' tt 
```

给

```
whatever
whatever 
```

`tt`在哪里

```
#% cat tt

blahblahblahblah random="whatever h45" blahblahblahblah
blahblahblahblah random="whatever h45" blahblahblahblah 
```

# node.js - Express.js - 类似 ASP.NET 的 MVC 路由

> ID：14918516
> 
> 赞同：2
> 
> 时间：2013-02-17T06:13:45.143
> 
> 标签：node.js, model-view-controller, express

我正在尝试为 Express 设置 MVC 架构。我想要完成的是一种接近 ASP.NET 的路由机制。例如以下路线：

```
/users/detail/1 
```

express 应该调用名为 users.js 的控制器目录下的模块。users.js 模块中有一个名为 detail 的函数。而在函数内部，我可以简单地获取请求参数来获取用户的id。

我的想法是提取用户并使用简单的 require 语句将其映射到 users.js 文件。但是，我如何通过简单地提取上面示例中的“详细信息”路由的动作部分来告诉 express 调用 details() 函数。我可以使用 eval() 但我听说这样做不安全？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:21:19.810

在浏览器端 javascript 中，您通常可以执行以下操作

```
function a () { console.log('called a');
window['a']();    // called a 
```

您可以通过替换为类似`window`的`global`节点

```
function a () { console.log('called a');
global['a']();    // called a 
```

但是，如果您是从另一个文件中提取此功能，则情况会有所不同。假设您有以下文件`a_module.js`：

```
exports.a = function () { console.log('a called'); } 
```

然后在您的主文件中，您可以执行以下操作：

```
var a_mod = require('./a_module.js');
a_mod['a']();      // a called 
```

# android - 如何从android接收数据到php web服务器

> ID：14918517
> 
> 赞同：1
> 
> 时间：2013-02-17T06:13:54.693
> 
> 标签：android, codeigniter

```
StringBuilder sb = new StringBuilder();
sb.append("couponID=1");
sb.append("CouponName=Wendy");
sb.append("couponID=2");
sb.append("CouponName=Wen");
sb.append("couponID=3");
sb.append("CouponName=Danny");
URL Url;
String url="http://example/upload";
try {
Url = new URL(url);
HttpURLConnection conn = (HttpURLConnection) Url.openConnection();
conn.setDoOutput(true);
conn.setRequestMethod("POST");
OutputStreamWriter wr = new OutputStreamWriter(conn
    .getOutputStream());

        wr.write(sb.toString());
wr.flush();
wr.close();
} catch (Exception e) {
       System.out.println(e.toString());

} 
```

使用上面的代码，我正在向服务器发送值，但是服务器如何获取从设备发送的值，并将其添加到表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:58:52.827

而不是`StringBuilder`使用这样的代码：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("id", "12345"));
nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

完整示例： [http ://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

# android - AlarmManager 无需唤醒屏幕即可简单地更新数据

> ID：14918523
> 
> 赞同：0
> 
> 时间：2013-02-17T06:16:40.563
> 
> 标签：android, alarmmanager

AlarmManager 无需唤醒屏幕即可简单地更新数据

我该怎么做呢 ？？我想每隔一段时间在后台更新我的呼叫和数据使用值而不唤醒我的显示屏幕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:27:03.610

最好的方法是通过运行 CountDownTimer 或在服务中运行后台线程来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:57:31.860

对不起我的错。打电话给 gui 被意外地投入使用。即服务调用主页。:( 解决了

安卓新手

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:26:38.567

而不是alarmmanager 写一个服务。它将在后台工作。我认为这些链接会对您有所帮助。 [http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html) [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# drupal - Drupal 中的表 {block_node_type} 用于什么？

> ID：14918527
> 
> 赞同：0
> 
> 时间：2013-02-17T06:17:31.277
> 
> 标签：drupal, drupal-7

表格描述是“根据内容类型设置块的显示标准”。

那么drupal如何与内容类型相关呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:44:42.377

在每个块的可见性设置中，您可以选择在当前节点属于特定内容类型时是否应显示块。

管理器 > 结构 > 块 > [单击块中的“配置”]

这是 Drupal 7 中的新功能。

# ruby-on-rails - 围绕carrierwave_backgrounder 模型编写集成测试的最佳方法是什么？

> ID：14918529
> 
> 赞同：2
> 
> 时间：2013-02-17T06:17:38.530
> 
> 标签：ruby-on-rails, integration-testing, carrierwave, sidekiq

我正在尝试围绕在后台上传文档的 Rails 模型编写集成测试。我正在使用[carrierwave_backgrounder](https://github.com/lardawge/carrierwave_backgrounder) gem 以及[sidekiq](https://github.com/mperham/sidekiq)。代码本身已按预期启动并运行，但我无法弄清楚如何最好地围绕它编写集成测试。我已经尝试`require 'sidekiq/testing/inline'`在我的`spec_helper`文件中添加，但在保存模型后，上传的文档在下一步中仍然为零。我可以剔除它周围的东西，但似乎最好的做法是不要在集成规范中这样做。能够在文件仍在上传时以及之后测试行为会很好。关于如何最好地处理这个问题的任何建议？

# c - C：少一个字段的结构体。我如何有效地声明/使用它？

> ID：14918533
> 
> 赞同：1
> 
> 时间：2013-02-17T06:18:05.153
> 
> 标签：c, struct, variable-declaration, type-declaration

假设我们有两个不同`struct`的，它们大多具有共同的字段，但有一个或两个不同的字段或更少的字段。例如：

```
typedef struct HobbyNodetag {
    char *name; // hobby name
    struct HobbyNodetag* link; // link to next HobbyNode
    int count; // number of times this hobby was mentioned by user
    // more fields... 
    // but identical type/variable name with MyHobbyList
} HobbyNode; // database of entire hobby node; singly linked list

typedef struct MyHobbyTag{
    char *name; // hobby name
    struct MyHobbyTag* link; // linked to next MyHobbyNode
    // more fields... 
    // but identical type/variable name with EntireHobbyList
} MyHobbyNode; // single person's hobby node; singly linked list 
```

我们是否有更高效/优雅`struct`的编码实践来使用以上两个？`struct`拥有两个不同的 s 因为它们共享大部分字段，这难道不是一种浪费吗？

**更新**

我之前的问题具有误导性。上面的例子是节点和单独链接（by `link`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T06:24:03.997

您可以将所有额外字段（存在于第二个结构中但不在第一个结构中）移动到结构类型定义的末尾，然后使用较小的结构作为较大结构的“基础”：

```
struct BaseFoo {
    int count;
    char name[128];
    float value;
};

struct ExtendedFoo {
    struct BaseFoo base;
    struct ExtendedFoo *next;
}; 
```

这个解决方案的好处是你可以拥有“多态性”：因为 C 标准保证在内存中的第一个结构成员之前没有填充，这将工作得很好：

```
void print_name(struct BaseFoo *foo)
{
    printf("Count: %d\n", foo->count);
    printf("Name: %s\n", foo->name);
}

struct ExtendedFoo foo = { /* initialize it */ };
print_name((BaseFoo *)&foo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:21:10.437

你可以做这样的事情，但我相信这不是你所追求的。

```
typedef struct myHobbyTag{
    char *name;
    struct myHobbyTag* link; 

} MyHobbyList; 

typedef struct entireHobbytag {
    MyHobbyList commonPart;

    int count;
} EntireHobbyList; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:28:41.533

如果将所有公共字段移到顶部，则可以使用 C 中的 OOP 声明基类和继承类（在 StackOverflow 上搜索。）

基本上有两种方法可以做到这一点。

1.  您声明一个基类，然后在继承类（具有更多字段）中，您将基类作为成员放在继承类的顶部。

    结构爱好链接；// 普通链接

    ```
    typedef struct baseHobbytag {
        char *name;
        struct hobbyLink* link;
    } BaseHobby; 

    typedef struct myHobbyTag{
        BaseHobby  hobby;
        int count;
        // more fields...
    } HobbyTag; 
    ```

2.  您对所有公共基成员使用#define，并将该#define 放入所有继承类中。

    ```
    #define BASEHOBBY_MEMBERS   \
    char *name;             \
    struct hobbyLink* link;

    // base class
    typedef struct baseHobbytag {
        BASEHOBBY_MEMBERS   
    } BaseHobby;

    // Inherit basehobby    
    typedef struct myHobbyTag{
        BASEHOBBY_MEMBERS   
        int count;
        // more fields...
    } HobbyTag; 
    ```

# textmate2 - 禁用 Textmate 2 中的字符自动配对？

> ID：14918534
> 
> 赞同：21
> 
> 时间：2013-02-17T06:18:05.200
> 
> 标签：textmate2

TextMate 1 有一个名为“自动配对字符（引号等）”的首选项，可让您启用或禁用自动配对功能。

是否可以在 TextMate 2 中禁用此功能？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-22T15:19:36.327

[您可以按照GitHub 上的此问题](https://github.com/textmate/textmate/issues/609)中的说明对给定的捆绑包禁用它。基本上，您必须编辑捆绑包的选项文件并`smartTypingPairs = ( );`在文件末尾附近添加。

我不知道这是否可以使用`.tm_properties`文件进行概括，但欢迎您尝试（并报告您的结果）。

为此还有一个用户默认键：

```
defaults write com.macromates.TextMate disableTypingPairs -bool YES 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-21T18:00:27.927

自动“打字对”是[TextMate 2 的隐藏设置](https://github.com/textmate/textmate/wiki/Hidden-Settings#disabling-auto-paired-characters)

> 当您键入左大括号、括号、引号字符或类似字符时，TextMate 将插入结束字符。

**通过终端禁用：**

```
defaults write com.macromates.TextMate disableTypingPairs YES 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T22:12:56.977

Ruby 编码员的后续行动。禁用自动配对后，您仍然会发现`#`在双引号 ( `"..."`) 字符串中键入内容会扩展为`#{}`. 如果要禁用此功能：

*   “捆绑包”菜单 -> “编辑捆绑包...”
*   在左栏中选择“Ruby”
*   在下一列中选择“其他操作”
*   在第三列中选择“嵌入式代码 - #{...}”
*   关闭抽屉中的“启用此项目”复选框
*   键入 Cmd+S 以保存更新的包

现在您可以`"#`在没有任何自动扩展/配对的情况下输入。如果您喜欢键入`#`并`{`显示第一个但不希望`}`添加结束，则无需禁用该项目，只需在底部窗格中进行编辑以删除尾随`}`：

```
#{${1:$TM_SELECTED_TEXT} 
```

如果您喜欢在字符串中选择文本并键入`#`以将其包含在内`#{...}`，则上述更改将使其非常尴尬，因此请注意。

# android - Edittext：开始输入时更改背景图像

> ID：14918536
> 
> 赞同：1
> 
> 时间：2013-02-17T06:18:27.777
> 
> 标签：android

我已经为edittext使用了背景图像，我希望当我开始输入时它应该改变。怎么做？？？

我用过：

```
editText_username.setOnFocusChangeListener(this);
editText_password.setOnFocusChangeListener(this);

@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(editText_username.hasFocus()){
        editText_username.setBackgroundResource(R.drawable.textarea_blue);
    }else{
        editText_username.setBackgroundResource(R.drawable.textarea_gray);
    }
    if(editText_password.hasFocus()){
        editText_password.setBackgroundResource(R.drawable.textarea_blue);
    }else{
        editText_password.setBackgroundResource(R.drawable.textarea_gray);
    }
   } 
```

edittext 背景图像正在改变。但是当我第一次点击用户名edittext时，背景图像没有改变，当我点击密码时，edittext图像正在改变，当我再次点击用户名edittext时，图像正在改变......为什么会这样？我希望当我第一次单击用户名 edittext 时，仅在那个时候更改背景图像，并且当单击外部 editext 时，颜色应该返回默认颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:26:17.190

```
editText_username.addTextChangedListener(new TextWatcher() {

  @Override
  public void afterTextChanged(Editable s) {
         //change bg afterTextChanged
  }

  @Override
  public void beforeTextChanged(CharSequence s, int start, int count, int after) {
         //change bg beforeTextChanged
  }

  @Override
  public void onTextChanged(CharSequence s, int start, int before, int count) {
         //change bg whenTextChanged
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:24:29.460

焦点改变只是为了确定 EditText 的焦点不是。你应该使用[文本观察器](http://developer.android.com/reference/android/text/TextWatcher.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T12:50:57.527

只需添加一个选择器作为背景，然后将您的特殊背景设置为以状态为中心

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:drawable="@drawable/edit_text_bg_pressed" android:state_focused="true" />
    <item android:drawable="@drawable/edit_text_bg_normal" />

</selector> 
```

# image - 将图像大小调整为选择矩形 Delphi

> ID：14918540
> 
> 赞同：2
> 
> 时间：2013-02-17T06:19:08.707
> 
> 标签：image, delphi, firemonkey

嗨，我不知道为什么这行不通。我有一个图像和一个选择，我希望图像始终与选择的大小和位置相同，所以我把这段代码放在一个计时器中：

```
 procedure TfrmMainUI.tmrUpdateTimer(Sender: TObject);
  var i : integer; 
  begin
    Image1.Width:=Selection1.Width;
    Image1.Height:=Selection1.Height;
    Image1.Position.X:=Selection1.Position.X;
    Image1.Position.Y:=Selection1.Position.Y;
  end; 
```

但它不起作用。

应该发生的是图像调整大小以适应选择，并且它的位置也跟随选择。但是发生的事情是我可以移动和调整选择的大小，并且图像只是停留在它所在的位置并且不会调整大小。

![图像停留在原处](../Images/820ca18efa7762e3bbb4cb2cf239ba4c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:12:41.817

正如@Mike Sutton 在评论中指出的那样，您应该使用`OnTrack`事件`TSelection`来触发对图像的更新。

[文档](http://docwiki.embarcadero.com/Libraries/en/FMX.Objects.TSelection.OnTrack)说：

> OnTrack 事件的事件处理程序在 TSelection 对象正在移动或调整大小的过程中从 MouseMove 方法循环调用。
> 
> 编写自定义 OnTrack 事件处理程序以在 TSelection 正在移动或调整大小的过程中执行特定操作。

您在评论中声明，组件是在运行时动态创建的，而不是在设计时表面上。因此，您还需要在代码中分配您的处理程序。像这样做：

```
Selection1.OnTrack := SelectionTrack; 
```

您的事件处理程序将如下所示：

```
procedure TfrmMainUI.SelectionTrack(Sender: TObject);
begin
  Image1.Width:=Selection1.Width;
  Image1.Height:=Selection1.Height;
  Image1.Position.X:=Selection1.Position.X;
  Image1.Position.Y:=Selection1.Position.Y;
end; 
```

您还在评论中说您需要跟踪许多链接图像和选择的选择更改。您可以像这样修改事件处理程序：

```
procedure TfrmMainUI.SelectionTrack(Sender: TObject);
var
  Selection: TSelection;
  Image: TImage;
begin
  Selection := Sender as TSelection;
  Image := ImageFromSelection(Selection);//you need to implement this function
  Image.Width:=Selection.Width;
  Image.Height:=Selection.Height;
  Image.Position.X:=Selection.Position.X;
  Image.Position.Y:=Selection.Position.Y;
end; 
```

# java - 为什么这个查询无效？

> ID：14918541
> 
> 赞同：0
> 
> 时间：2013-02-17T06:19:15.707
> 
> 标签：java, sql, oracle

为什么这个查询无效？当我只写 SRV_ID 而不是 vt_exam_details.SRV_ID 一切正常

```
 cl_id
, cl_name_last as CUSTOMER
, vt_animals.an_type
, vt_exam_details.SRV_ID
, vt_services.srv_desc
, vt_exam_details.ex_fee
from vt_clients
join vt_animals using (cl_id)
join vt_exam_headers using (an_id)
join vt_exam_details using (ex_id)
join vt_services using (srv_id) 
```

错误：

```
Error at Command Line:5 Column:3
Error report:
SQL Error: ORA-00904: "VT_EXAM_DETAILS"."SRV_ID": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action: 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:51:51.250

因为表`vt_exam_details`不在FROM子句中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:52:41.913

表 VT_EXAM_DETAILS 中是否有 SRV_ID？

# javascript - Kinect 中的多个可拖动图像事件

> ID：14918543
> 
> 赞同：-1
> 
> 时间：2013-02-17T06:19:33.093
> 
> 标签：javascript, dom-events, kineticjs

我正在创建一个带有可拖动图像的脚本，当双击时更改 src 为：[Kinect 中的可拖动图像事件](https://stackoverflow.com/questions/14670896/draggable-image-event-in-kinect)

前面的问题得到了回答并且效果很好，但如果我添加另一个对象，双击时也会更改 src，那么什么都不起作用。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:03:24.907

你必须有一组不同的图像和点击事件。jsfiddle：http: [//jsfiddle.net/bighostkim/8BcXk/](http://jsfiddle.net/bighostkim/8BcXk/)

```
 var imageObj2 = new Image();
    imageObj2.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';
var yoda2 = new Kinetic.Image({
      x: 300,
      y: stage.getHeight() / 2 - 59,
      width: 106,
      height: 118,
      image: imageObj2,
      draggable: true
    });
    layer.add(yoda2);
    var imgIndex2 = 0;
    yoda2.on('click',function() {
        imageObj2.src = images[ imgIndex2++ % 3 ];
        layer.draw();
    }) 
```

# c# - 在 SQL Server 中将两个表加入到 1 个表中

> ID：14918544
> 
> 赞同：0
> 
> 时间：2013-02-17T06:19:56.657
> 
> 标签：c#, sql-server, visual-studio-2010, join, jointable

这里我有两张桌子。一个被调用`table1`并有一个列`word`，它是数据类型`varchar(500)`，看起来像

```
a
pen
book
like
nice
..... 
```

另一个表是`table2`并且有一个`meaning`数据类型列，`ntext`看起来像

```
 one
 a long thin object used for writing  
 reading material 
 to enjoy  
 pleasant
 ....... 
```

现在我想加入 table1 和 table2 并与他们一起制作另一张桌子`table3`

`table3`将有两列是`word`和`meaning`“列，看起来像

```
a      one
pen    a long thin object used for writing 
book   reading material 
like   to enjoy 
nice   pleasant
.....  ....... 
```

我怎样才能在 SQL Server 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:39:12.270

您最好在 table1 中有一个[PRIMARY KEY](http://en.wikipedia.org/wiki/Primary_key)列（我们称之为术语）和 table2 中有一个[FOREIGN KEY](http://en.wikipedia.org/wiki/Foreign_key)列（我们称之为定义）。然后您可以使用这些列连接两个表以获得结果

```
SELECT term, definition
  FROM terms t LEFT JOIN 
       definitions d ON t.termid = d.termid 
```

这是[sqlfiddle](http://sqlfiddle.com/#!3/82113/1)

恕我直言，不需要table3。您只需使用这样的查询来获得所需的结果。

这样，如果需要，您可以为每个术语存储多个定义。

# unix - 如何在 AwesomeWM rc.lua 中输出小写字符串？

> ID：14918546
> 
> 赞同：1
> 
> 时间：2013-02-17T06:20:11.423
> 
> 标签：unix, lua, x11, pango, awesome-wm

我正在使用 AwesomeWM 恶意日期小部件。我正在尝试在 rc.lua 中以这种格式`Feb 17, 12:10 AM`(%b %d, %l:%M:%p) 输出 wibox 中的日期和时间，但我希望`AM`(%p) 为小写。

我试过了：`vicious.register(datewidget, vicious.widgets.date, "<span font-family='terminus' color='#999999'>%b %d, %l:%M:</span> <span variant='smallcaps'%p</span>", 1)`但是该变体属性似乎不起作用。

还有另一种方法可以做到这一点吗？

我完整[的 rc.lua](http://pastebin.com/ThtNDBg6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:56:37.523

您可以使用`string`图书馆的`lower()`电话。

```
os.date( "%b, %I:%M " )..string.lower( os.date("%p") ) 
```

* * *

## 编辑

虽然[Lua PiL](http://www.lua.org/pil/22.1.html)中没有提到它；[strftime](http://linux.die.net/man/3/strftime)也必须格式化为`%P`小写`am`或`pm`.

字符串可以是：

```
os.date( "%b, %I:%M %P" ) 
```

[键盘](http://codepad.org/p7fL49m3)示例。

# c - 在仍然使用 printf-buffering 时避免解析格式字符串

> ID：14918557
> 
> 赞同：-1
> 
> 时间：2013-02-17T06:21:46.373
> 
> 标签：c, printf

在 C 程序中，我使用以下行：`printf("%c", WORD_SEP);`我认为这是不言自明的。

据我了解， printf 将解析 Format-String "%c" 并**在运行时**将其替换为字符 WORD_SEP 。这当然是完全可以避免的，因为 WORD_SEP 是一个编译器#define，因此永远不会改变。

我可以硬编码`printf("*");`哪个会更快，但当然我想保留 #define 以提高可维护性 - 而且它仍然不是最佳的，因为 printf 仍然必须解析字符串。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:28:54.577

非格式化单字符打印：

`putc()`,`putchar()`和`fputc()`

非格式化字符串打印：

`fputs()`，和我的（不那么）最喜欢的`puts()`

附带说明一下，避免使用，`"*"`而不是`'*'`因为，`"*"`在内存中创建一个带有两个字节的空间，一个用于`*`，另一个用于`\0`。无论您想要 1 个单个字符，使用`'*'`而不是`"*"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:36:58.380

希望我没有误读这个问题，但如果你想最终做类似的事情

```
printf("abc %c xyz", WORD_SEP); 
```

实际上没有在运行时插入这个常量单词分隔符，你可以先做

```
#define WORD_SEP "*" 
```

然后做

```
printf("abc " WORD_SEP " xyz"); 
```

这将导致在编译时创建格式字符串。正如下面的评论中提到的，在这种情况下，您需要小心输入一个`%`字符，`WORD_SEP`因为它现在是格式字符串的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T13:21:59.233

> 据我了解， printf 将解析 Format-String "%c" 并在运行时将其替换为字符 WORD_SEP。这当然是完全可以避免的，因为 WORD_SEP 是一个编译器#define，因此永远不会改变。

gcc 确实优化`printf("%c", WORD_SEP);`为调用`putchar('*')`：

```
#include <cstdio>

#define WORD_SEP '*'

int main() {
    printf("%c", WORD_SEP);
} 
```

输出汇编：

```
g++ -S --verbose-asm -o - -DNDEBUG -g -Wall -Wextra -march=native -O3 test.cc | c++filt > test.s 
```

测试.s：

```
main:
    subq    $8, %rsp    
    movl    $42, %edi   
    call    putchar 
    xorl    %eax, %eax  
    addq    $8, %rsp
    ret 
```

gcc 还优化`printf("..." /* no arguments */)`为`puts()`避免解析没有格式说明符的格式字符串。

# jquery - 我应该在对元素做任何事情之前测试它是否存在吗？

> ID：14918558
> 
> 赞同：1
> 
> 时间：2013-02-17T06:21:51.313
> 
> 标签：jquery

假设我有以下 HTML 和 Javascript。在这里，页面上只有 1 个 div，但在任何给定时间，总共可能有 2 个 div（动态插入）。

在 jQuery 中，您是否应该先测试某个元素是否存在，然后再对它进行任何操作，尤其是如果您知道它可能不存在？

我应该用 测试它`if (('#div2).length > 0)`吗？

还是我应该让 jQuery 弄清楚？我知道如果不存在，jQuery 足够聪明，可以知道元素不存在，所以它不会对它做任何事情，也不会抛出错误。但是最好先测试一下它是否存在？最佳实践可能还是有性能差异？

**HTML：**

```
<div id="div1"></div> 
```

**Javascript：**

```
$('#div1').text('Hello World!');

/*
  Should I first test and see if this div exists?
  With if (('#div2').length > 0)
  Or leave it as is and let jQuery handle it
*/
$('#div2').text('Should I have first tested to see if this div existed?'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:26:21.740

我相信您可能不应该在不存在的元素上执行代码。话虽如此，我无法想象在没有匹配元素的选择器上执行操作会产生任何实际问题。所以应该不需要测试它。

jQuery 循环遍历所有匹配的元素以执行操作，所以如果它不匹配任何元素，它将只循环任何内容。除了非常非常小的*潜在*性能提升之外，我看不出你会获得什么。

***“过早的优化是万恶之源。”*** ——唐纳德·克努斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:28:59.787

jQuery 的工厂函数返回的对象是类数组。选定的 DOM 元素将设置为数字索引 ( `{0: elem1, 1:elem2, etc}`)。length 属性将设置为匹配元素的数量。

jQuery 的所有方法都设计为遍历元素集合以执行操作。这基本上意味着`obj.test('foo')`相当于：

```
for (i = 0; i < obj.length; i++) {
    obj[i].textContent = 'foo';
} 
```

如果集合中没有元素，则方法不会执行任何操作，因为迭代器从不迭代。

因此，tl;dr，很少有理由在对选择执行操作之前检查选择是否包含元素。

# php - 将html多次插入php

> ID：14918562
> 
> 赞同：0
> 
> 时间：2013-02-17T06:22:48.720
> 
> 标签：php, html

我有一个执行两个 php 文件的 html 文件（[竖起大拇指/竖起大拇指的测试页](http://stateofdebate.html)）...一个用于竖起大拇指，一个用于竖起大拇指。

我现在需要做的是将此代码插入页面（[辩论状态辩论列表](http://stateofdebate.com)），以便可以对每个辩论标题进行排名并相应地上下移动。

和我一起工作的朋友已经完成了大部分编码工作，包括 PHP 和表格。

我的问题是：有没有办法在页面上的每个辩论标题旁边竖起大拇指，竖起大拇指？到目前为止，我得到的最好的结果是在桌子上方竖起/向下竖起大拇指。

```
//test.html
<html>
<body>

<a href="upvote.php" onClick="alert('You have given this item a thumbs up! You can change          
your vote, or leave it how it is.')"; onMouseOver="return changImage()" onMouseOut=  
"return changImageBack()" ><img
name="jsbutton2" src="Graphics/thumbs-up-unclicked.jpeg" width="75" height="75" border="0"
alt="javascript button"></a>

<script type="text/javascript">
function changImage()
{
document.images["jsbutton2"].src= "Graphics/thumbs-up.jpeg";
return true;
}
function changImageBack()
{
 document.images["jsbutton2"].src = "Graphics/thumbs-up-unclicked.jpeg";
 return true;
}
</script>

<a href="downvote.php" onClick="alert('You have given this item a thumbs down! You can change your vote, or leave it how it is.')"; onMouseOver="return changeImage()" onMouseOut= "return changeImageBack()" ><img
name="jsbutton1" src="Graphics/thumbs-down-unclicked.jpeg" width="75" height="75" border="0"
alt="javascript button"></a>

<script type="text/javascript">
function changeImage()
{
document.images["jsbutton1"].src= "Graphics/thumbs-down.jpeg";
return true;
}
function changeImageBack()
{
 document.images["jsbutton1"].src = "Graphics/thumbs-down-unclicked.jpeg";
 return true;
}
</script>

</body>
    </html>

//upvote.php
<?php

session_start();

?>
<?php
$server = "X"; 
$dbusername = "X"; //database username 
$dbpassword = "X"; //database password 
$dbdatabase = "X"; //database name
$sqlconnect = mysql_connect($server, $dbusername, $dbpassword) or die("Couldn't connect to SQL Server on $server");
$sqldb = mysql_select_db($dbdatabase,$sqlconnect) or die("Couldn't open database $dbdatabase"); 

$sql="INSERT INTO Votes (UID, date, rating)
VALUES
('{$_SESSION['UID']}', CURDATE(), 1)";

if (!mysql_query($sql,$sqlconnect))
  {
  die('Error: ' . mysql_error());
  }

mysql_close($sqlconnect);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:29:32.643

从数据库中检索数据时，当您循环浏览每条数据库记录时，写入表的一行，并在执行此操作时显示缩略图图像。例如：

```
echo "<table>";

while { // loops through DB record matches...

    echo "<tr><td>" . $topic_name;

    if ($thumbs == 'UP') {
        echo "<img src='thumbsup.jpg'>";
    }
    else {
        echo "<img src='thumbsdown.jpg'>";
    }

    // Also, if you want clickable thumb up/down buttons, put them here 
    // and pass hidden form variables with the topic's unique record ID
    // & specific voting action to a submission page. 
    //
    // Sorta like this:
    // <form>
    // <input type='hidden' name='topicid' value='" . $id . ">
    // <input type='hidden' name='action' value='THUMBSUP'>
    // <input type='submit' value='THUMBS UP'>
    // </form>
    // & then repeat for thumbs down, only changing the 'action' field

    echo "</td><tr>";

}

echo "</table>"; 
```

有点道理？？？

# android - 主屏幕小部件上的打开和关闭图像

> ID：14918568
> 
> 赞同：0
> 
> 时间：2013-02-17T06:24:14.793
> 
> 标签：android, android-widget, android-imageview

我在主屏幕小部件上有一个 ImageView，目前图像是静态的。但我想让该图像闪烁，例如自动打开和关闭。

`green -> red -> green`图像像警笛一样不断闪烁。

> 最初图像为红色
> 
> 用户点击红色图像，它的星星从红色快速闪烁到绿色
> 
> 用户标签再次停止闪烁并设置为红色

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:14:20.617

您可以使用`ViewFlipper`in XML 执行此操作。要开始/停止闪烁，您可以使用 remoteview 方法在和`setViewVisibility()`之间切换。`redOnly``redAndGreen`

```
<FrameLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/redOnly"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/red" />

<ViewFlipper
    android:id="@+id/redAndGreen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:animateFirstView="false"
    android:autoStart="true"
    android:flipInterval="700"
    android:measureAllChildren="true">

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/green" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/red" />
</ViewFlipper> 
```

# php - PHP正则表达式检查字符串是拉丁文还是西里尔文

> ID：14918571
> 
> 赞同：0
> 
> 时间：2013-02-17T06:25:09.250
> 
> 标签：php, regex, preg-match

我正在尝试检查用户输入是拉丁文还是西里尔文。我想让用户输入一个只有拉丁字母或西里尔字母的文本。我如何允许一个并拒绝另一个？我不希望用户混合拉丁文和西里尔文。它只是其中之一。我是正则表达式的新手，想不出办法。这是我到目前为止所拥有的。

```
!preg_match("/^([a-zA-Z]+|[\p{Cyrillic}]+)$/u", $inputstr) 
```

另外，开头和结尾的“/”是做什么的？“/u”是做什么的？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:46:48.957

zerkms 链接的文档回答了您的一些问题。

首先，什么是`/`开头和结尾？那是包含您的正则表达式的[分隔符模式。](http://www.php.net/manual/en/regexp.reference.delimiters.php)

第二，什么是`u`？这是将模式字符串视为 unicode的[修饰符。](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

要仅允许一种类型的 char，请使用分组，如下所示：`/^(?:\p{Cyrillic}+|\p{Latin}+)$/u`

这应该匹配西里尔字符或拉丁字符，但不能同时在同一个字符串中。

`(?:stuff)`是匹配但不捕获的分组[子模式。](http://www.php.net/manual/en/regexp.reference.subpatterns.php)

# android - 使用 ListView setSelection() 方法 Android 后 NotifyDataSetChanged 不起作用

> ID：14918572
> 
> 赞同：1
> 
> 时间：2013-02-17T06:25:15.620
> 
> 标签：android, listview, android-listview, notifydatasetchanged

在我的一个应用程序中，我使用 notifyDataSetChanged 刷新列表项，它大部分工作正常但是当我首先使用 ListView 的 SetSelction() 方法时（因为我需要在再次加载列表时显示选择的任何行），那个时间列表永远不会被刷新通过使用 notifyDataSetChanged。

我尝试了不同的技巧，但没有任何帮助。有谁知道为什么 notifyDataSetChange 在这种情况下不起作用以及我们如何解决这个问题。

# python - 用于 SVM 的 OSX 上 PyBrain 上的 libsvm

> ID：14918574
> 
> 赞同：1
> 
> 时间：2013-02-17T06:25:37.993
> 
> 标签：python, macos, svm, libsvm, pybrain

几乎一整天以来，我一直在尝试在 PyBrain 上制作 SVM，但它给出“找不到 LIBSVM 安装。确保 svm.py 和 svmc.* 在 PYTHONPATH 中！”

我分别有 OSX 10.7.5 和 python 2.7.2，我去下载了 libsvm，然后按照 Make 的说明进行操作。基本上解压了它，在主目录中做了一次，在 python 文件夹中做了一次。然后我把它移到python库文件夹中。

还是不行。任何人都可以帮忙吗？有人用 PyBrain 做过 SVM 吗？我什至无法运行他们自己的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T02:02:57.253

LibSVM 不再支持 cross_validation。

[https://github.com/pybrain/pybrain/issues/97](https://github.com/pybrain/pybrain/issues/97)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T09:12:01.440

在您的导出路径中使用 libsvm 版本 2.91 -> python_old [https://github.com/cjlin1/libsvm/releases](https://github.com/cjlin1/libsvm/releases)

# java - 如何在 Java 中每小时创建日志文件

> ID：14918580
> 
> 赞同：0
> 
> 时间：2013-02-17T06:26:37.337
> 
> 标签：java

我想每小时在特定文件夹中创建和存储日志文件。*如何接近*？任何示例都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:29:53.340

不需要额外的努力。使用`DailyRollingFileAppender`where set `Datepattern`- *Rollover 在每个小时的*顶部`'.'yyyy-MM-dd-HH`。

 *例子 -

```
log4j.appender.LOGFILE = org.apache.log4j.DailyRollingFileAppender
log4j.appender.LOGFILE.DatePattern = '.'yyyy-MM-dd-HH
... 
```

参考 - [DailyRollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html)

注意：*不要在 DatePattern 选项的任何地方使用冒号“:”字符。冒号之前的文本被解释为 URL 的协议规范，这可能不是您想要的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:41:04.233

类似的东西：

```
public void run(){
    while(true){
        synchronize(this){
        if(timeLap==1hr)
            file.writeLine();
        }
        else
            Thread.sleep(1hour);
         }
         } 
```

或者您可以使用 API [http://www.vogella.com/articles/Logging/article.html](http://www.vogella.com/articles/Logging/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:28:28.943

您可以使用 logger API(log4j) 每小时生成日志文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T08:15:43.330

您可以创建一个自定义 FileAppender，类似于

```
public class TestFileAppender extends WriterAppender {
    String pattern;

    public void setFile(String file) {
        this.pattern = file;
    }

    public synchronized void update() {
        try {
            closeWriter();
            String folder = new SimpleDateFormat("yyyyMMddHH").format(new Date());
            File file = new File(String.format(pattern, folder));
            file.getParentFile().mkdirs();
            setWriter(new BufferedWriter(new FileWriter(file, true)));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

使用它 log4j 配置

```
log4j.appender.file = test.TestFileAppender
log4j.appender.file.file = xxx/%s/1.log
log4j.appender.file.layout = org.apache.log4j.SimpleLayout 
```

并每小时运行一次 FolderNameChanger

```
class FolderNameChanger extends TimerTask {

    FolderNameChanger() {
        run();
    }

    public void run() {
        Enumeration<Appender> e = Logger.getRootLogger().getAllAppenders();
        while (e.hasMoreElements()) {
            Appender a = e.nextElement();
            if (a instanceof TestFileAppender) {
                ((TestFileAppender) a).update();
            }
        }
    }
} 
```

此任务找到所有 TestFileAppenders 并更改它们的路径*

# c# - 如何将gridview绑定到另一个grid view？

> ID：14918585
> 
> 赞同：0
> 
> 时间：2013-02-17T06:27:45.177
> 
> 标签：c#, mysql, sql, gridview

我`2 gridview`在我的项目中使用，我将员工绑定在一个网格上，我想在第二个网格上显示每个员工的订单。我一直在过滤其他员工，当我点击显示订单按钮时​​，它会显示所有订单，我如何指向正确的索引（选择的员工）？.

我的代码：

```
private void Form3_Load(object sender, EventArgs e)
{
        using (NorthWindDataContext db = new NorthWindDataContext())
        {

            var query =
                from d in db.Employees
                select new
        {
            d.FirstName
        };
            dataGridView1.DataSource = query;
        }

}  

private void displayOrdersToolStripMenuItem_Click(object sender, EventArgs e)
{
        using (NorthWindDataContext db = new NorthWindDataContext())
        {

            var query =
                from o in db.Orders
                select new
                {
                    o.ShipName <----problem  here :(
                };
            dataGridView2.DataSource = query;

        }
} 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:32:11.993

使用[GridView.SelectedValue](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedvalue.aspx)属性。

您需要编写类似于以下内容的内容：

```
private void displayOrdersToolStripMenuItem_Click(object sender, EventArgs e)
{
    using (NorthWindDataContext db = new NorthWindDataContext())
    {

        var query =
            from o in db.Orders.
                Where(item => item.ID == dataGridView1.SelectedValue)
            select new
            {
                o.ShipName <----problem  here :(
            };
        dataGridView2.DataSource = query;

    }
} 
```

# ruby-on-rails - Rails 循环重构

> ID：14918587
> 
> 赞同：1
> 
> 时间：2013-02-17T06:28:15.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个循环来计算记录的总评分。为此，我首先遍历所有子记录（评分），从每一行中提取评分，将其添加到总数中，然后输出总数。

```
<% total = 0 %>
<% for ratings in @post.ratings %>
    <% total = (total + ratings.rating) %>
<% end %>
<%= total %> 
```

我的问题是，简单地说，**这是铁路方式吗？**

它达到了预期的结果，尽管需要 5 行来做到这一点。我担心我会将其他语言的旧习惯带入我的 Rails 项目，我希望有人能澄清是否有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:05:55.127

以下，最好在控制器中，将简洁地做到这一点：

```
@rating = @post.ratings.sum { &:rating } 
```

如果这看起来很神秘，你可能更喜欢

```
@rating = @post.ratings.inject(0) { |sum, p| sum + p.rating } 
```

但是请注意，如果任何评级为空，这将失败，因此您可能需要：

```
@rating = @post.ratings.inject(0) { |sum, p| sum + (p.rating || 0) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:30:41.837

您通常应该将逻辑排除在您的视图之外。我会将该代码放在帮助程序或控制器中，然后调用一个方法来计算总数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:44:47.103

将以下内容放入您的控制器中，然后您只需要`@rating`在您的视图中使用：

```
total = 0
@rating = @post.ratings.each { |r| total += r.rating } 
```

或者您可以将其移至 Post 模型并执行以下操作：

```
def self.total_rating
  total = 0
  ratings.each { |r| total += r.rating }
  total
end 
```

然后只需调用`@post.total_rating`

# sql - 多个表的 SQL 连接

> ID：14918596
> 
> 赞同：1
> 
> 时间：2013-02-17T06:29:01.820
> 
> 标签：sql, database-design, left-join, inner-join

**班级**

*   类 ID (PK)
*   班级名称
*   班级容量

**批**

*   批次编号 (PK)
*   批次名称
*   尺寸
*   状态 {未开始、已注册、已完成}

**批处理类**

*   BatchClassId (PK)
*   批次 ID (FK)
*   类 ID (FK)
*   没有学生

**关系**

*   一个类具有最大容量，因此一个批次可以有多个类，但在给定时间，一个类只能分配给一个批次，状态为 = 已注册（这要从应用程序端验证）

我想获取**当前未分配**给状态不等于已注册批次的**所有类**

这是我试过的，

```
SELECT C.* 
FROM Class C 
LEFT JOIN (
    Batch B 
      INNER JOIN BatchClass BC 
        ON B.BatchId = BC.BatchId
    ) ON C.ClassId = BC.ClassId 
WHERE B.Status <> "Enrolled"; 
```

即使当我尝试 WHERE B.Status = "Enrolled" 时，它也会提供所有已注册批次的课程。我想要的是从上面的 SQL 对我不起作用的对立。

我不确定我的设计或 SQL 语句是否有问题。请帮忙。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:33:08.260

~~这应该可以正常工作：~~

 ~~```
SELECT DISTINCT C.* 
FROM Class AS C 
INNER JOIN BatchClass AS BC ON C.ClassID = BC.ClassID
INNER JOIN Batch      AS B  ON B.BatchId = BC.BatchId 
WHERE B.Status <> 'Enrolled'; 
```~~ 

~~[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/579ca/2)~~

* * *

## 更新 1

试试这个：

```
SELECT C.*
FROM Class AS C 
WHERE c.ClassID NOT IN(SELECT bc.ClassID
                       FROM BatchClass bc
                       INNER JOIN Batch b ON B.BatchId = BC.BatchId
                       WHERE b.status = 'Enrolled'); 
```

[**更新的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!2/2df05/22)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:36:53.233

非常感谢每一位。我想出了一个解决办法。非常感谢 Mohmoud Gamal。演示帮助很大。

这是解决方案。

```
SELECT DISTINCT C.* 
FROM Class AS C
WHERE C.ClassId NOT IN
(SELECT BC.ClassId FROM BatchClass AS BC 
INNER JOIN Batch AS B ON  B.BatchId = BC.BatchId 
WHERE B.Status = 'Enrolled'); 
```

通过这种方式，它返回当前未分配给已注册批次的所有类。[**SQL Fiddle Demo**](http://www.sqlfiddle.com/#!2/2df05/9/0)更清楚地说明了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:01:29.263

我认为您的结果错过了与任何批次无关的类。

```
SELECT C.* FROM Class C 
LEFT JOIN (    
    Batch B
    INNER JOIN BatchClass BC 
    ON B.BatchId = BC.BatchId
) ON C.ClassId = BC.ClassId
WHERE B.Status <> "Enrolled" OR
      B.Status is null; 
```

# wpf - WPF DataGrid 中的 IsSelected 绑定

> ID：14918602
> 
> 赞同：16
> 
> 时间：2013-02-17T06:30:00.047
> 
> 标签：wpf, mvvm, binding, datagrid

我在我的 Model (Class X) Boolean property:`IsSelected`中有，链接到`WPF DataGrid`如下：

```
<DataGrid  SelectedIndex="{Binding SelectedXIndex,Mode=TwoWay}" 
           DataContext="{Binding MyViewModel}" 
           ItemsSource="{Binding ListX}" AutoGenerateColumns="False">
     <DataGrid.RowStyle>
         <Style TargetType="{x:Type DataGridRow}">
             <Setter Property="IsSelected" 
                     Value="{Binding IsSelected, Mode=TwoWay, 
                             UpdateSourceTrigger=PropertyChanged}"/>
         </Style>
     </DataGrid.RowStyle>
</DataGrid> 
```

`ListX`- ObservableCollection

`IsSelecte`- 调用 NotifyPropertyChange

它工作得很好。

但是当我有很多行时，我需要滚动查看它们，然后按下运行以下功能的“全选”按钮，他只选择了一些行而不是全部：（即使所有IsSelected 上的列表为**true** )

```
public void SelectAll()
{
    ListX.All(c => c.IsSelected = true);
} 
```

我不明白为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T06:11:20.790

这就是最终帮助我的原因：

我放入了DataGrid：

```
VirtualizingStackPanel.VirtualizationMode="Standard" 
```

# java - 如何将文本随机分配给 JButton

> ID：14918623
> 
> 赞同：-1
> 
> 时间：2013-02-17T06:34:34.417
> 
> 标签：java, swing, random, jbutton

我正在编写一个数学应用程序，它将随机生成一个数字。我想将该数字随机分配给四个按钮之一。其他三个按钮也将随机分配一个数字。我想要的是：每当程序运行时，它都会将数字作为文本分配给不同的按钮。

现在我的代码只分配随机数`buttonOne`（我不想要）。请帮忙。

```
private void generateFourNumberForSelection(int firstNumber, int secondNumber) 
{
   int total = firstNumber + secondNumber;
   buttonOne.setText("" + total);
   buttonTwo.setText("" + (total + 3));
   buttonThree.setText("" + (total - 2));
   buttonFour.setText("" + (total + 5));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:41:14.143

`buttonOne`仅当,`buttonTwo`和引用相同时`buttonThree`才会发生这种情况`buttonFour``JButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:26:29.323

你可以从下面的代码片段中得到一个粗略的想法：

```
JButton[] buttons = new JButton(4);  // array of buttons
buttons[0] = new JButton("");
.... do same for 1 and 2 buttons
....
buttons[3] = new JButton("");
/******* buttons intialized*********/

// generating random index - using which we will be setting text on random button
Random r = new Random(4);
int rand = r.nextInt();
buttons[rand] = buttons[rand].setText("" + total);  // setting total on random button 
```

# java - 如何确保我的线程/进程在不同的内核上运行

> ID：14918624
> 
> 赞同：1
> 
> 时间：2013-02-17T06:34:45.407
> 
> 标签：java, android, multithreading, performance, android-asynctask

当我在多核设备（如 S3）与单核 android 设备上运行我的多线程 android 应用程序时，我试图衡量我的代码的性能改进。为了衡量性能，我按顺序运行任务而不是并行运行。我已经实现了普通的 Java 线程，这似乎没有什么不同。因此我尝试了 AsynchTask，但我只得到了一点性能提升。

你能告诉我如何编写代码来确保我的每个任务/线程都在不同的内核上运行，而不是在一个内核上运行吗？如果这是不可能的，我怎样才能最大限度地为我的应用程序使用多个内核？

这是执行任务的活动的 onCreate 方法的代码。

```
protected void onCreate(Bundle savedInstanceState)  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_local_executor);

    multiplicationTask t1 = new multiplicationTask();
    t1.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);       

    multiplicationTask t2 = new multiplicationTask();
    t2.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);

    multiplicationTask t3 = new multiplicationTask();
    t3.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);

    multiplicationTask t4 = new multiplicationTask();
    t4.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);

} 
```

这是从 onCreate 方法运行的 AsynchTask

```
class multiplicationTask extends AsyncTask<Integer, Integer, String> {

    protected void onPreExecute()
    {
        Log.v("PrintLN", "Executing Task");
    }

    @Override
    protected String doInBackground(Integer... params) {
     //Do lots of floating point operations that are independent of anything whatsoever
    }

    protected void onPostExecute(String result) {
        Log.v("PrintLN", "Done Task: " + resulting_time);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:42:38.807

Android对此有限制。您不能手动使您的线程在某个核心上运行。最好的方法是您可以使用 ThreadPoolExecutor 来控制线程数。这样 ThreadPoolExecutor 将根据内核的使用情况自动分离线程在内核中运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T06:43:17.230

> 你能告诉我如何编写代码来确保我的每个任务/线程都在不同的内核上运行，而不是在一个内核上运行吗？

这将由 JVM / android 自动处理。如果您没有看到任何性能提升，最可能的原因是：

*   任务不可并行（例如，您计算两个结果，但第二个取决于第一个，因此它们按顺序运行）
*   这些任务不受 CPU 限制（即，如果您读取一个大文件，瓶颈是您的存储速度，而不是 CPU，添加线程也无济于事）
*   你没有启动足够的线程/你启动了太多的线程

我建议您展示创建和启动线程的代码，并在需要更具体的答案时了解任务的作用。

**编辑**

请注意，AsyncTask 的主要用途是运行与 UI 交互的简短后台任务。在你的情况下，一个普通的执行者可能会更好。创建一个的基本语法是：

```
private static final int N_CPUS = Runtime.getRuntime().availableProcessors() + 1;
private final ExecutorService executor = Executors.newFixedThreadPool(N_CPUS); 
```

并使用它：

```
executor.submit(new Runnable() {
    public void run() {
        Log.v("PrintLN", "Executing Task");
        //your code here
        Log.v("PrintLN", "Done Task: " + resulting_time);
    }
}); 
```

完成后不要忘记关闭执行程序。

现在，性能改进将因许多因素而异。在您的情况下，如果任务的生命周期太短，则上下文切换开销（当 CPU 激活一个或另一个线程时）可能足够大，以至于可以抵消多线程的好处。

另一个可能的瓶颈是同步：如果你在线程之间不断地交换数据，这也会导致很多开销。

# cordova - 在 jQuery Mobile 中取消页面显示事件并返回或重定向

> ID：14918626
> 
> 赞同：2
> 
> 时间：2013-02-17T06:35:22.910
> 
> 标签：cordova, jquery-mobile

我在使用 Phonegap 和 jQuery Mobile 开发移动应用程序时遇到了问题。

每次显示页面之前，我都有一个要检查的输入条件，例如`page A`。如果条件为假，我将应用程序导航到另一个页面，例如`page X`。我使用页面事件做到了这一点`pagebeforeshow`。

但我的问题是...

即使我使用了该`pagebeforeshow`事件，页面`page A`也会显示出来。IE; 显示`page A`一次，然后应用程序导航到`page X`。`page A`如果条件错误，我不希望显示此内容。我的意思是，取消该页面显示事件并转到其他页面。

希望你有我问的。

为什么会这样？有没有其他方法可以让我完美地完成我的任务。

任何形式的帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:00:43.767

在这种情况下不要使用**`pagebeforeshow`**事件，这是最后触发的页面事件之一。此时第二页已经创建并准备好显示。这必须在第二页即将创建之前完成。

首先看看我的另一篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，在那里你会发现从第一页到第二页的转换过程中的页面事件列表。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。

现在关于您的问题，这里有一个代码，您可以使用它来解决您的问题。它正在使用**`pagebeforechange`**事件（这是在页面转换期间触发的第一个事件）：

```
$(document).on('pagebeforechange', function(e, data){  
    var to = data.toPage,
        from = data.options.fromPage;

    if (typeof to  === 'string') {
        var u = $.mobile.path.parseUrl(to);
        to = u.hash || '#' + u.pathname.substring(1);
        if (from) from = '#' + from.attr('id');

        if (from === '#index' && to === '#second') {
            alert('Can not transition from #index to #second!');
            e.preventDefault();
            e.stopPropagation();

            // remove active status on a button, if transition was triggered with a button
            $.mobile.activePage.find('.ui-btn-active').removeClass('ui-btn-active ui-focus ui-btn');;
        }  
    }
}); 
```

这是一个活生生的**`jsFiddle`**例子： http: [//jsfiddle.net/Gajotres/3PhKZ/](http://jsfiddle.net/Gajotres/3PhKZ/)，您应该单击下一步按钮来触发页面更改。

# ruby-on-rails - HAML + Bootstrap div.row 和 div.spanX，每 N 个元素新行

> ID：14918628
> 
> 赞同：2
> 
> 时间：2013-02-17T06:35:39.260
> 
> 标签：ruby-on-rails, haml

我找到[了这个问题](https://stackoverflow.com/questions/10282026/how-to-insert-a-block-every-several-div-with-haml)，它的答案正是我试图开始的。但是，它不会产生预期的结果。

给定数组`@items`，我想为每 3 个项目创建一个新行。这是目前我的标记：

```
- @items.each_with_index do |item, index|
  - if index % 3 == 0
    %div.row-fluid
  %div.span4
    %div.item-container
      use item 
```

这导致 html 像这样呈现

```
<div class="row-fluid"></div>
<div class="span4">...</div>
<div class="span4">...</div> 
<div class="span4">...</div>
<div class="row-fluid"></div>
<div class="span4">...</div>
<div class="span4">...</div> 
<div class="span4">...</div> 
```

当然，我想要的是：

```
<div class="row-fluid">
    <div class="span4">...</div>
    <div class="span4">...</div> 
    <div class="span4">...</div>
</div>
<div class="row-fluid">
    <div class="span4">...</div>
    <div class="span4">...</div> 
    <div class="span4">...</div>
</div> 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T07:50:27.277

使用[Array#in_groups_of](http://apidock.com/rails/Array/in_groups_of)划分集合，然后对其进行迭代：

```
- @items = (1..20).to_a
- @items.in_groups_of(3, false).each_with_index do |group, index|
  .row-fluid
    - group.each do |item|
      .span4= "group: #{index}; item: #{item}" 
```

*提示：*您可以省略标签定义并将其默认为`%div`. `%div.span4`变得公正`.span4`等等。

# php - 在单个查询中显示表字段

> ID：14918629
> 
> 赞同：0
> 
> 时间：2013-02-17T06:35:47.027
> 
> 标签：php, sql

**`user_info`**桌子：

*   `ui_id`- PK
*   `name`
*   `created_by`- FK

`users`桌子：

*   `user_id`- PK

*   `username`

我想显示`user_info`表格的内容。该`created_by`字段`user_id`来自用户表，我想`username`在显示时将其更改为。

是否可以在单个查询中进行？请告诉我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:37:59.437

这会做

```
select ui.*, u.username from user_info ui
join users u on u.id = ui.created_by 
```

只需加入表格。

# asp.net - 错误描述：来自 HRESULT 的异常：0x800A0046 (CTL_E_PERMISSIONDENIED)

> ID：14918630
> 
> 赞同：1
> 
> 时间：2013-02-17T06:36:44.900
> 
> 标签：asp.net, vb.net

嗨，任何人都可以建议我如何解决这个错误

```
 **Exception from HRESULT: 0x800A0046 (CTL_E_PERMISSIONDENIED)** 
```

请注意，在将字符串数据写入文件时，很少会抛出此错误。

请找到我在 VB.net 中使用的以下代码

```
Dim fso, file

strResult = "this is the sample string data"

strPath = it is local path only.

fso = CreateObject("Scripting.FileSystemObject")
file = fso.opentextfile(strPath, ForWriting, True)
file.write(strResult)
file.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:02:34.363

抛出错误是因为您没有编辑文件的权限，或者因为该文件正在被另一个进程或另一个用户使用。使用旧的 FileSystemObject 也不是一个好主意。使用 .NET 框架中的托管库，因为它将为您提供更好的错误支持。请参阅下面的示例，了解如何在下面完成相同的事情......

```
 Try
   File.WriteAllText("Your data", "FILE")
 Catch ex As Exception
   MsgBox (ex.Message) 'Or however you want to handle this...
 End Try 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T02:26:14.917

如果没有更多关于您的文件系统是什么样的信息、您拥有什么权限以及您在程序中尝试做什么和使用什么的更多信息，几乎没有办法知道如何为您提供帮助。

但是，由于旧版 DLL 与更新的技术（例如 .Net 1 与 .Net 4.5）混合在一起，我过去曾遇到过这个问题。

.Net 4.5 及更高版本下的旧 DLL 很难管理并确保它们正常运行。它们会导致内存泄漏，它们不正确地尊重内存，并且它们以多种方式被硬编码来做这些天 .Net 4.5 及更高版本会做得更好的事情。

我建议您向我们提供您的项目设置和 COM 引用，因为其中之一很可能是您收到此错误的原因。

这是一个消除的过程。一次删除一个引用，注释掉代码，调试等，直到找到导致问题的罪魁祸首 DLL。然后您需要决定是否使用另一个 DLL、另一个参考或更好，首先不要使用那个有问题的 DLL。

祝你好运，

# ruby-on-rails-3 - Rspec no 方法错误分配

> ID：14918632
> 
> 赞同：0
> 
> 时间：2013-02-17T06:36:51.480
> 
> 标签：ruby-on-rails-3, rspec

在运行测试之前，我显然在我的客户模型中添加了一个名为 ct_ratio 的新字段。当我现在在发票规格上运行测试时，它们失败并显示“无方法错误，ct_ratio=”

客户.rb

```
class Customer < ActiveRecord::Base
attr_accessible :billing_address, :customer_currency, :email, :first_name, :last_name, :mobile,  :name, :payment_terms, :phase_type, :readings_attributes, :pays_vat, :ct_ratio
  before_validation do
 self.ct_ratio ||= 1
 end
end 
```

发票规格

```
describe Invoice do

context 'create_item_from_readings' do
before :each do
  @customer = FactoryGirl.create :customer
  @reading1 = @customer.readings.create! reading1: 100, date_of_reading: 30.days.ago
  @reading2 = @customer.readings.create! reading1: 200, date_of_reading: 20.days.ago
  @reading3 = @customer.readings.create! reading1: 500, date_of_reading: 10.days.ago
  @customer.stub(:unit_cost).and_return(100)
end

it "should create an invoice item for all reading" do
  invoice = Invoice.new customer: @customer, invoice_date: 15.days.ago, due_date: Date.today

  item = invoice.create_item_from_readings
  item.rate.should   == 100
  item.amount.should == 100 * 100
  item.description.should == "Electricity used from #{@reading1.date_of_reading.strftime('%d/%m/%Y')} to #{@reading2.date_of_reading.strftime('%d/%m/%Y')} -    100 units"
end 
```

我将 ct_ratio 添加到 Factory Girl

```
require 'factory_girl'

FactoryGirl.define do

 factory :customer do
 name 'Test Test'
 first_name "Test"
 last_name "Test"
 mobile "00000000"
 billing_address "Kampala"
 payment_terms "Immediate"
 phase_type "Single Phase"
 customer_currency "UGX"
 pays_vat false
 email "test@test.com"
 ct_ratio 1
end

factory :reading do |f|
 f.reading1 100
 f.reading2 150
 f.reading3 200
 f.date_of_reading 30.days.ago
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:04:51.993

这是未运行测试时的常见错误，`rake`并且您的迁移未在测试数据库上运行。

首先运行`RAILS_ENV=test rake db:migrate`并检查您的测试套件。

# domain-driven-design - 使用 DDD 和 ORM 进行工单管理

> ID：14918636
> 
> 赞同：0
> 
> 时间：2013-02-17T06:37:19.650
> 
> 标签：domain-driven-design

我正在构建的软件的中心原则是“工单”

在我看来，WorkOrder 将是一个***“聚合根”***，其中包含有关工作订单的基本信息，例如创建日期、型号/制造商、序列号、采购订单。

除了这些***“价值”***对象之外，还有子***“实体”***或***“聚合”***，例如：

*   序列
*   返工
*   方面
*   报价单
*   消耗品

如果没有相关的工单，上述任何一项都不能/不应该存在。在现有系统中，他们实际上偶尔会这样做，但这是因为缺乏事务或代码检查以确保完整性。它们是孤立的记录，并通过定期清理删除 - 这是我更多地了解 DDD 和 ORM 以加快我们的开发实践的众多原因之一。

> 注意：这可能是题外话，可能会在您的回复中被跳过
> 
> 因为我们主要是使用extJS的基于web的界面，每个列表控件显示上面的每一个，我一直不愿意切换到ORM和DDD。每个列表都通过一个查询数据库的控制器：操作填充（即：当 JS 控件使用 GET 命令调用序列 REST URI 时填充序列列表）。此 GET 命令调用实例化序列对象的控制器并调用*selectAllForWorkorderID*方法
> 
> 我对 ORM 的理解是我会使用存储库来查询这些项目。很好，但是如果这个序列对象（在 DDD 用语中）被认为是 WorkOrder 根的聚合 - 那么我必须首先找到工作订单并通过 WorkOrder 遍历序列。
> 
> 在基于 AJAX Web 的上下文中，这对我来说很有趣 - 但在桌面环境甚至标准的基于 Web 的上下文中，这是可以接受的，因为每次在主列表中选择 WorkOrder 项目时，我只会查询一次 WorkOrder 对象。每个要填充的单独列表不是 6 或 8 次。

我现在可以看到，我们的系统实际上有几个聚合根对象，工单只是少数几个中更复杂的一个：

1.  工作指示
2.  保证
3.  维修订单

是主根。保修取决于工作订单 ID，维修订单可以但并非总是如此。

忽略后者的根源 - 让我只关注 WorkOrder。

当我开始检查现有模型并尝试确定什么是业务逻辑和/或应用程序逻辑时，我有点困惑。“***服务”***与***“聚合根”***的区别。

在当前模型中考虑一种这样的方法：

createWorkOrderFromRpi。

RPI 是经批准的文件，可作为 WorkOrder 的模板——它们规定了“可以”执行的顺序和执行顺序、尺寸、耗材清单等。这完全是一个单独的系统，我认为最好将其描述为***“模块” “***在 DDD 命名法中。

该方法需要查询RPI系统，获取工单头明细、序列表、耗材等。

一旦有了这些数据，它就会调用相关的对象和方法：

1.  WorkOrder.Create（标题详细信息）
2.  Sequence.Create(Sequence Details) - 循环完成 (1:m)
3.  Consumable.Create(Consumable Details) - 循环完成 (1:m)

在遵循 DDD 时，我很想让 WorkOrder ***“聚合根”***提供一个具有相同签名的方法，但我不愿意这样做。

我相信作为 WorkOrder 聚合的每个“***实体”***都符合描述，并且不应该暴露于“***根”***之外的任何东西，除非遍历根本身。在某些情况下，情况并非如此。On second thought, the interface only ever exposes consumables and sequences and such when a work order is selected which would imply a work order must be loaded anyway?!?

此方法必须执行一些基本的业务规则：

1.  具有相同序列号的工作订单尚未在系统中有效（除非已归档），除非它在分包合同中，在这种情况下不要创建新工作，而是接收此工作订单的维修订单。

还有一些***“规则”***，但为了简洁起见，我将它们排除在外。

各个实体执行微业务验证，例如序列号等某些字段具有特定格式，部件号和采购订单号也是如此。

上面给出了我的主要问题或担忧，这种方法最好在***“聚合根”***或***“服务”***中实现吗？

更新 | 最后一个问题......如果聚合根是正确的概念......我需要访问序列，以便我可以更新我将在概念上访问的字段（忽略语法），例如：

WorkOrder.Sequences(0).moveToNext()

如果这个方法是在序列***“实体”***中实现的，那是有道理的。技术细节和业务逻辑的划分在哪里？例如，要将工作订单从一个序列移动到下一个序列，我们更新每个序列的三个时间戳：

date_entered date_started date_finished

设置最后一个时间戳后，下一个序列 date_entered 设置为与前一个序列 date_finished 相同的时间，系统现在知道这是活动序列。那是技术问题。

但是业务规则或约束是：

1.  如果移入历史记录，请勿移动工单
2.  返工时不要移动工单
3.  如果在 subcon 中，请勿移动工单

这些是规则，我希望将它们分开和区分，以便我可以轻松地以规范文档的形式翻译成英文，我可以将管理呈现为动态文档和功能证明。我有点希望这就是 DDD 以干净的方式强制/促进的。这是独立于 DDD 处理的要求吗？这就是 CQS 的用武之地吗？将业务规则与与利益相关者零相关的技术问题分开？

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T19:28:25.037

我认为您的 createWorkOrderFromRpi() 方法应该在“服务”而不是 WorkOrder 聚合根上。然后，此服务方法将调用您的存储库或 DAO 上的方法来创建工作订单。聚合根通常结合实体，但在您的模型上，我认为 RPI 是工作订单聚合根之外的模板或规范。如果 RPI 是聚合的一部分，那么您应该直接将方法放在存储库中并在任何地方调用它，因为存储库也是 DDD 中的业务对象。

关于第二个问题，我相信 WorkOrder Aggregate Root 对于您列出的其他“依赖”实体是完全正确的，即 Sequences Reworks Dimensions QuoteItems Consumables

我很想知道你是如何实现这一点的。

# java - 多线程使用Java Android拆分和下载大文件并将文件合并为一个

> ID：14918638
> 
> 赞同：3
> 
> 时间：2013-02-17T06:37:51.833
> 
> 标签：java, android, file

我正在尝试使用多线程（如拆分）在 android 应用程序中下载一个大文件（任何文件格式），并向服务器发起单独的下载请求，并获取不同部分的数据并将其合并回单个文件。

如果有人知道如何拆分并开始多线程，请分享示例或教程。提前致谢。

# objective-c - 如何限制用户在 Parse 中存储数据并检查注册设备

> ID：14918657
> 
> 赞同：0
> 
> 时间：2013-02-17T06:40:50.087
> 
> 标签：objective-c, database, parse-platform

我有一个包含许多用户、设备和 urls 类的类，它存储每个用户、用户名、设备名称和一些 url。

如果用户 Suleman 在 iPhone 4 中登录到我的应用程序，Class 将包含他的用户 ID 和 Iphone 4。如果同一用户 Suleman 在 iPad 中登录到我的应用程序，则类现在将包含用户 ID 以及他的 iPhone 4 和 iPad。之后，用户从 ipad 和 iphone 向我的 url 类发送一些 url。

**我的第一个问题：**

1.  我怎样才能检查那个用户不能多次注册同一个 iphone 4。仅注册一次设备 ID。

2.  如何检查用户是否只能为每个设备存储 5 个 url。如果用户尝试发送第 6 个 url，它将不会存储，我的应用程序会说您已达到您的有限数据。

在此先感谢... Parse 和 iOS 开发中的全新功能。或者任何更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:10:45.173

我建议您需要某种方法来始终准确地知道是谁在设备上访问您的软件。您不能相信用户将始终使用相同的用户名，并且您不能相信 IP 地址。

我建议使用电子邮件地址。

让他们输入电子邮件以注册设备并向他们发送确认码/链接。这样，您可以跨应用程序跟踪他们的使用情况并限制他们的访问/他们可以注册的设备数量。

# php - “方法名称必须是字符串”的原因

> ID：14918658
> 
> 赞同：-3
> 
> 时间：2013-02-17T06:40:53.010
> 
> 标签：php

```
public function run() { 
$this->step = $this->$_POST("step", 1);
$this->xml = new XMLFile();
$common_data = array(
                    'STEPCONTENT' => $this->get_step_content(),
                    'STEPNUMBER' => $this->step,
                    'STEPTITLE' => $this->get_step_title()
                    ); 
echo $this->parse($this->common_template, $common_data); 
```

这给出了例外：

```
Fatal error: Method name must be a string in
    C:\xampp\htdocs\test\openad\install\InstallOpenAdServer.php on line 674 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:46:06.663

这是罪魁祸首

```
 $this->step = $this->$_POST("step", 1); 
```

您不能将 $_POST 超级全局数组用作函数。如果您尝试从 $_POST 访问变量，您可以简单地执行此操作

```
$this->step = $_POST["step"]; 
```

# java - 关于字符串比较

> ID：14918660
> 
> 赞同：0
> 
> 时间：2013-02-17T06:41:07.727
> 
> 标签：java, string

我正在检查用于字符串压缩的字符串比较方法并探索反编译器中的字符串类，然后才知道基本上有四种方法

```
equals()
equalsIgnoreCase()
compareTo()
compareToIgnore() 
```

现在我想知道我们使用的两种方法之间的区别 equals() 和 compareTo() ，基本上请告知为什么 string 类保留了这两种方法..

```
String tv = "Bravia";
        String television = "Bravia";

        // String compare example using equals
        if (tv.equals(television)) {
            System.out.println("Both tv and television contains same letters and equal by equals method of String");
        }

        // String compare example in java using compareTo
        if (tv.compareTo(television) == 0) {
            System.out.println("Both tv and television are equal using compareTo method of String");
        } 
```

输出 ：-

```
Both tv and television contains same letters and equal by equals method of String
Both tv and television are equal using compareTo method of String 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:43:20.943

`equals()`返回一个`boolean`；`true`/ `false`。字符串 A 是否等于 B？

`compareTo()`返回一个整数，不仅表示字符串是否相等，而且表示哪个字符串比另一个“低”——“低”定义为自然的字母顺序。

对于两个字符串`a`and `b`，`a.equals(b)`当一个 only if`a.compareTo(b)`为真时为真`0`。

例如：

```
String a = "String1";
String b = "String2"; 
```

`a.compareTo(b)`将返回一个负整数（不一定`-1`！），因为按字母顺序，字符串“String1”低于“String2”；如果要按升序对两个字符串进行排序，“String1”会排在第一位。此外，`a.equals(b)`将返回`false`，因为字符串不相等。

然而：

```
String a = "Example";
String b = "Example"; 
```

在这种情况下，`a.compareTo(b)`将返回`0`（因为字符串相等），并且`a.equals(b)`将返回`true`（再次，因为字符串相等）。

关于“ignoreCase”变体：

```
String a = "String1";
String b = "string1"; 
```

在这种情况下，`a.compareToIgnoreCase(b)`将返回`0`；那是因为，当忽略大小写时，两个字符串是相同的。此外，出于同样的原因，`a.equalsIgnoreCase(b)`将返回。`0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:44:20.600

`equals`并`equalsIgnoreCase`返回一个`boolean`值，说“一个等于另一个，或者不等于”

`compareTo`并`compareToIgnoreCase()`返回一个三态整数, `0`,`-1`或`1`

*   `0`如果它们相等，则按顺序比较
*   `1`如果 to 的参数`compareTo*()`在序数上大于您调用的`compareTo*()`对象
*   `-1`如果 to 的参数`compareTo*()`在序数上小于您调用的对象`compareTo*()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:45:42.987

两种方法都需要。String从Object继承equals，实现Comparable接口时需要compareTo。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T06:49:13.927

字符串实现 Comparable 接口，然后绑定到实现 compareTo 方法。

**可露营的界面**

当对象包含在任何已排序的集合中时，它有助于对对象进行排序。因此，当您将字符串放入任何已排序的集合（如 TreeSet）中时，您将如何告诉 java 如何对对象进行排序。这就是 compareTo() 方法出现的地方。集合使用它来对您的对象进行排序。

```
String tv = "Bravia";
    String television = "Bravia";

    // String compare example using equals
    if (tv.equals(television)) {
        System.out.println("Both tv and television contains same letters and equal by equals method of String");
    }

    // String compare example in java using compareTo
    if (tv.compareTo(television) == 0) {
        System.out.println("Both tv and television are equal using compareTo method of String");
    }

    if (tv.compareTo(television) < 0){

    System.out.println("tv comes before  using compareTo method of String");
    }

if (tv.compareTo(television) > 0){

    System.out.println("tv comes after using compareTo method of String");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T06:49:23.970

`compareTo()`：返回负整数、零或正整数，因为此对象小于、等于或大于指定对象。从[比较（）](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)

`equals()`: equals() 方法比较两个对象是否相等，如果相等则返回 true，否则[在此处返回 false source](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)

# vb.net - 填充所有文本框后如何添加新行，而不是替换gridview中的旧行？

> ID：14918662
> 
> 赞同：0
> 
> 时间：2013-02-17T06:41:18.333
> 
> 标签：vb.net, gridview, datagrid, datagridview

我在 vb.net 中编写了程序。在我的页面中，我有 3 个文本框。在 Txt_CardBarcode_TextChanged 中，我写了这段代码：

```
 Try
    Dim stream_CardBarcode As System.IO.MemoryStream = New System.IO.MemoryStream
    Dim cls As New Cls_Barcode
    Dim pic_CardBarcode As System.Drawing.Image = Nothing
    cls.btnEncode(pic_CardBarcode, Txt_CardBarcode.Text.Trim)
    pic_CardBarcode.Save(stream_CardBarcode, System.Drawing.Imaging.ImageFormat.Png)
    Dim f_cardBarcode As IO.FileStream = _
        New IO.FileStream("C:\fafa.png", IO.FileMode.Create, IO.FileAccess.ReadWrite)
    Dim b_cardBarcode As Byte() = stream_CardBarcode.ToArray
    f_cardBarcode.Write(b_cardBarcode, 0, b_cardBarcode.Length)
    f_cardBarcode.Close()
    Dim ds As DS_Test
    ds = New DS_Test
    Dim Val_LabelBarcode() = {stream_CardBarcode.ToArray, Txt_ICCID.Text.Trim}
    ds.Tables(2).Rows.Add(Val_LabelBarcode)
    crp_CardBarcode.SetDataSource(ds.Tables(2))
    Dim frm_CrpCardBarcode As New Frm_RepCardBarcode
    frm_CrpCardBarcode.CrystalReportViewer1.ReportSource = crp_CardBarcode
    GVSimInfo.DataSource = ds.Tables(2)
                ds.Tables(2).Rows.Add(1)
                GVSimInfo.Rows(GVSimInfo.Rows.Count - 1).Cells(0).Value = True
                ds.Tables(2).Rows(0).Item(0) = True
                ds.Tables(2).Rows(0).Item(1) = ""
                ds.Tables(2).Rows(0).Item(2) = Txt_ICCID.Text
                ds.Tables(2).Rows(0).Item(3) = ""
                ds.Tables(2).Rows(0).Item(4) = "" 
```

现在，在运行时，填充 3textbox 后，新行添加到 gridview ，但是当用户想要超过填充文本框时，网格视图中的新行替换旧行！如何设置新行添加到网格视图，而不是替换旧行？

在我的数据集中，我放了 3 个表。表（2）有 2 列以字节数组数据类型保存图像条形码，但在我的 gridview 中，我有 5 列。在运行时给我错误对话框，它是来自它的图像： ![在此处输入图像描述](../Images/7cffbae462b83d4bc5b3c47d1d639c21.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:51:44.087

如果您的 DGV 未绑定到任何数据源：

```
 GVSimInfo.Rows.Add(1); 
```

如果您的 DGV 绑定到某个数据源，则：

```
 ds.Tables(2).Rows.Add(1) 
```

在填充最后一个文本框并且需要新行后添加此代码。

设置您可以使用的值：

```
ds.Tables(2).Rows(0).Item("Column_number") = "your text"

 Try
    Dim stream_CardBarcode As System.IO.MemoryStream = New System.IO.MemoryStream
    Dim cls As New Cls_Barcode
    Dim pic_CardBarcode As System.Drawing.Image = Nothing
    cls.btnEncode(pic_CardBarcode, Txt_CardBarcode.Text.Trim)
    pic_CardBarcode.Save(stream_CardBarcode, System.Drawing.Imaging.ImageFormat.Png)
    Dim f_cardBarcode As IO.FileStream = _
        New IO.FileStream("C:\fafa.png", IO.FileMode.Create, IO.FileAccess.ReadWrite)
    Dim b_cardBarcode As Byte() = stream_CardBarcode.ToArray
    f_cardBarcode.Write(b_cardBarcode, 0, b_cardBarcode.Length)
    f_cardBarcode.Close()
    Dim ds As DS_Test
    ds = New DS_Test
    Dim Val_LabelBarcode() = {stream_CardBarcode.ToArray, Txt_ICCID.Text.Trim}
    ds.Tables(2).Rows.Add(Val_LabelBarcode)
    crp_CardBarcode.SetDataSource(ds.Tables(2))
    Dim frm_CrpCardBarcode As New Frm_RepCardBarcode
    frm_CrpCardBarcode.CrystalReportViewer1.ReportSource = crp_CardBarcode
                ds.Tables(2).Rows.Add(1)
                GVSimInfo.Rows(GVSimInfo.Rows.Count - 1).Cells(0).Value = True
                ds.Tables(2).Rows(0).Item(0) = True
                ds.Tables(2).Rows(0).Item(1) = ""
                ds.Tables(2).Rows(0).Item(2) = Txt_ICCID.Text
                ds.Tables(2).Rows(0).Item(3) = ""
                ds.Tables(2).Rows(0).Item(4) = ""
                GVSimInfo.DataSource = ds.Tables(2)  <------- 
```

# assembly - 描述装配中的流行音乐

> ID：14918663
> 
> 赞同：3
> 
> 时间：2013-02-17T06:41:29.760
> 
> 标签：assembly, x86, cpu-registers

我正在学习IA32。当我想到`popl DEST`指令在做什么时，我认为如下：

```
movl (%esp), DEST
addl $4, %esp 
```

但是当我想到时，我开始怀疑自己`popl %esp`。尽管这可能是一条毫无意义的指令，但我认为可能有更好的方法来概括地描述`popl DEST`指令。你会如何描述它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:06:47.910

以下是英特尔文档中 POP 指令的一小部分伪代码：

```
IF StackAddrSize = 32
  THEN
    IF OperandSize = 32
      THEN
        DEST ← SS:ESP; (* Copy a doubleword *)
        ESP ← ESP + 4;
      ELSE (* OperandSize = 16*)
        ...
    FI;
... 
```

但这里是它具体说的`POP xSP`：

> POP ESP 指令在将旧堆栈顶部的数据写入目标之前递增堆栈指针 (ESP)。

这意味着序列

```
PUSH ESP
POP ESP 
```

没有做任何不寻常的事情，就像这个：

```
PUSH EAX
POP EAX 
```

同样，有一些文字`PUSH xSP`：

> PUSH ESP 指令压入 ESP 寄存器的值，因为它在指令执行之前就存在。如果 PUSH 指令使用内存操作数，其中 ESP 寄存器用于计算操作数地址，则在 ESP 寄存器递减之前计算操作数的地址。

# python - 如何在 Rpy2 中使用 lattice 并将结果保存为 pdf？

> ID：14918666
> 
> 赞同：2
> 
> 时间：2013-02-17T06:42:05.637
> 
> 标签：python, r, lattice, rpy2

我在这里关注 rpy2 的文档（[http://rpy.sourceforge.net/rpy2/doc-2.1/html/graphics.html?highlight=lattice](http://rpy.sourceforge.net/rpy2/doc-2.1/html/graphics.html?highlight=lattice)）。我可以使用`lattice`rpy2 成功地交互式绘图，例如：

```
iris = r('iris')
p = lattice.xyplot(Formula("Petal.Length ~ Petal.Width"),
                   data=iris)
rprint = robj.globalenv.get("print")
rprint(p) 
```

`rprint`显示图表。但是，当我尝试通过首先执行以下操作将图形保存为 pdf 时：

`r.pdf("myfile.pdf")`

然后我的`lattice`电话，它不起作用，而是导致一个空的pdf。如果我对 R 基础做同样的事情（调用`r.pdf`，然后绘图）`ggplot2`，那么我会得到一个工作 pdf。是否`lattice`需要 Rpy2 中的任何特殊内容才能将结果保存到 PDF 文件？以下也不起作用：

```
iris = r('iris')
r.pdf("myfile.pdf")
grdevices = importr('grDevices')
p = lattice.xyplot(Formula("Petal.Length ~ Petal.Width"),
                   data=iris)
rprint = robj.globalenv.get("print")
rprint(p)
grdevices.dev_off() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:44:16.420

`dev.off()`您需要在 print 命令之后进行一些等效的操作。

也就是说，为了将您的图表保存为 pdf，一般大纲是：

```
pdf(...)
print(....)
dev.off() 
```

调用失败`dev.off()`将导致一个空的 pdf 文件。

* * *

从[这个来源](http://rpy.sourceforge.net/rpy2/doc-2.3/html/graphics.html)看来，等价的`rpy2`可能是

```
grdevices.dev_off() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:55:37.020

解决方案是使用：

```
robjects.r["dev.off"]() 
```

出于某种原因，其他变体无法解决问题。

# c# - 查找重复项并合并列表中的项目

> ID：14918668
> 
> 赞同：0
> 
> 时间：2013-02-17T06:42:22.907
> 
> 标签：c#, .net-2.0

我有一个类，它有一个存储字符串值的字典和一个存储无符号 64 位整数的列表。如果它们的字典包含相同的键和值，则该类被认为等于另一个相同类型的类。

我还有一个包含此类的几个实例的静态列表。我想检查此列表中是否有重复的项目。如果有重复，我想合并他们的列表。

这是我认为的伪代码：

```
foreach (var item in StaticList)
{
    if (item.Equals(anotherItem)) // i.e., dictionaries are equal
    {
        item.UInt64List.AddRange(anotherItem.UInt64List);
        StaticList.Remove(anotherItem);
    }
} 
```

如果不借助最新框架添加的功能（我的目标框架是 .NET 2.0，所以没有花哨的 Union、Intersect 等），我如何才能做到这一点？

注意：我已经想出了如何检查两个字典是否相等，我想找到重复项并将它们合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:03:58.000

您必须将所有项目相互比较。

```
for (int i = 0; i < StaticList.Length-1; i++)
{
    var item = StaticList[i];
    for (int j = i+1; j < StaticList.Length;)
    {
        var anotherItem = StaticList[j];
        if (item.Equals(anotherItem)) // i.e., dictionaries are equal
        {
            item.UInt64List.AddRange(anotherItem.UInt64List);
            StaticList.RemoveAt(j); // it has better performance compared to `StaticList.Remove(anotherItem);`
        }
        else
            j++;
    }
} 
```

我不建议使用`foreach`循环，因为您无法在迭代期间修改列表，并且您必须将项目放在另一个列表中并稍后将其删除，这会对存储项目和稍后搜索以删除它们造成很大的性能损失。

# facebook - 如何在 Facebook 应用程序中使用 Facebook Graph API 回复粉丝页面上的私人消息？

> ID：14918676
> 
> 赞同：0
> 
> 时间：2013-02-17T06:43:22.297
> 
> 标签：facebook, facebook-graph-api, facebook-page

如何在 Facebook 应用程序中使用 Facebook Graph API 回复粉丝页面上的私人消息？

*   我能够从粉丝页面检索私人消息
*   我可以使用聊天 API 以用户身份回复（仅限用户对用户）
*   我有有效的令牌
*   我有 read_mailbox、read_page_mailboxes 权限，以及对页面的以下权限：

管理员、
EDIT_PROFILE、
CREATE_CONTENT、
MODERATE_CONTENT、
CREATE_ADS、
BASIC_ADMIN

我正在按照[此处](https://developers.facebook.com/docs/reference/api/page/#conversations)所述进行操作。

[有些人声称已经解决了这个问题](http://developers.facebook.com/bugs/341975239249263?browse=search_511de4580d77f8062326065)。他们是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:38:53.830

您链接到的文档非常清楚地回答了这个问题。

从文档：

```
**How to Reply**

Note that a page can only reply to a user's message. It cannot initiate a private message with a user. Also, a page can respond not more than twice to a user's message before the user has replied back.

You can reply to a user's message by issuing an HTTP POST to /CONVERSATION_ID/messages with the following parameters. A conversation ID look like t_id.216477638451347.

Parameter   Description          Type   Required
message     The body of reply   string      Y 
```

# php - 第二个输入基于第一个输入中选择的内容

> ID：14918678
> 
> 赞同：0
> 
> 时间：2013-02-17T06:43:38.963
> 
> 标签：php, jquery, html, forms

我有两个输入，它们在同一页和同一表格中相互对应。

输入是：

```
Select Event:
<input type="radio" name="type" value="Birthday" id="Birthday" CHECKED /> <label for="Birthday">Birthday</label><br />
<input type="radio" name="type" value="Anniversary" id="Anniversary" /> <label for="Anniversary">Anniversary</label><br />
<input type="radio" name="type" value="Holiday" id="Holiday" /> <label for="Holiday">Holiday</label><br /> 
```

现在我需要将上面选择的输入与下面输入的 VALUE 和 IMG SRC 相对应...

例如，假设如果选择了上面的生日收音机，那么下面的收音机是：

```
<input type="radio" name="design" value="Birthday_design_1" id="1" CHECKED /> <label for="1"><img src="images/Birthday_design_1.jpg" border="0" width="150" height="200" /></label>
<input type="radio" name="design" value="Birthday_design_2" id="2" /> <label for="1"><img src="images/Birthday_design_1.jpg" border="0" width="150" height="200" /></label> 
```

或者，如果上面的周年纪念电台被填满，那么下面的电台将是：

```
<input type="radio" name="design" value="Anniversary_design_1" id="1" CHECKED /> <label for="1"><img src="images/Anniversary_design_1.jpg" border="0" width="150" height="200" /></label>
<input type="radio" name="design" value="Anniversary_design_2" id="2" /> <label for="1"><img src="images/Anniversary_design_1.jpg" border="0" width="150" height="200" /></label> 
```

或者，如果上面填写了假日电台，那么下面的电台将是：

```
<input type="radio" name="design" value="Holiday_design_1" id="1" CHECKED /> <label for="1"><img src="images/Holiday_design_1.jpg" border="0" width="150" height="200" /></label>
<input type="radio" name="design" value="Holiday_design_2" id="2" /> <label for="1"><img src="images/Holiday_design_1.jpg" border="0" width="150" height="200" /></label> 
```

正如您可能看到的那样，输入的 VALUE 也会发生变化，收音机的 IMG SRC 也会发生变化。

请帮忙，我相信这需要jQUERY。

谢谢，
乍得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:56:34.260

您还没有提到前三个按钮的父级。这将更容易绑定更改事件而不会影响页面上的其他按钮。您需要为前三个单选按钮编写更改事件。然后检查 id.and 是否匹配，做相应的事情。

```
$('input:radio').change(
                     function(){
                     if($(this).attr("id")=="Birthday")
                     {
                      //show birthday category buttons
                     }
                     if($(this).attr("id")=="Anniversary")
                     {
                      //show Anniversary category buttons
                     }
                     if($(this).attr("id")=="Holiday")
                      {
                      //show Holiday category buttons
                     }
                     else{
                      //do nothing for other radio buttons....
                      }
                    }
                ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:05:15.643

```
<input group_class="group-1" class="event_radio" type="radio" name="type" value="Birthday" id="Birthday" CHECKED /> <label for="Birthday">Birthday</label><br />
<input group_class="group-2" class="event_radio" type="radio" name="type" value="Anniversary" id="Anniversary" /> <label for="Anniversary">Anniversary</label><br />
<input group_class="group-3" class="event_radio" type="radio" name="type" value="Holiday" id="Holiday" /> <label for="Holiday">Holiday</label><br />

<input class="group-1" type="radio" name="design" value="Birthday_design_1" id="1" CHECKED /> <label class="group-1" for="1"><img src="images/Birthday_design_1.jpg" border="0" width="150" height="200" /></label>
<input class="group-1" type="radio" name="design" value="Birthday_design_2" id="2" /> <label class="group-1" for="2"><img src="images/Birthday_design_1.jpg" border="0" width="150" height="200" /></label>

<input class="group-2" type="radio" name="design" value="Anniversary_design_1" id="3" CHECKED /> <label class="group-2" for="3"><img src="images/Anniversary_design_1.jpg" border="0" width="150" height="200" /></label>
<input class="group-2" type="radio" name="design" value="Anniversary_design_2" id="4" /> <label class="group-2" for="4"><img src="images/Anniversary_design_1.jpg" border="0" width="150" height="200" /></label>

<input class="group-3" type="radio" name="design" value="Holiday_design_1" id="5" CHECKED /> <label class="group-3" for="5"><img src="images/Holiday_design_1.jpg" border="0" width="150" height="200" /></label>
<input class="group-3" type="radio" name="design" value="Holiday_design_2" id="6" /> <label class="group-3" for="6"><img src="images/Holiday_design_1.jpg" border="0" width="150" height="200" /></label> 
```

CSS：

```
.group-1, .group-2, .group-3 { display: none; } 
```

和 javascript：

```
$(document).ready(function () {
    $('.event_radio').click(function () {
        $radio = $(this);

        $('.group-1, .group-2, .group3').fadeOut('fast');

        $('.'+$radio.attr('group_class')).fadeIn('fast');
    });
}); 
```

# javascript - 在 HTML Win 8 应用程序中使用 json 对象，它基本上是我的 WCF 中定义的类的对象列表

> ID：14918685
> 
> 赞同：0
> 
> 时间：2013-02-17T06:44:39.190
> 
> 标签：javascript, html, windows-8

所以我有一个 WCF 服务，它返回一个类的对象列表，它已在我的 WCF 合同中定义，我应该在 Javascript Win 8 应用程序中接收 Json 对象。现在当我做

```
WinJS.xhr({ url: url_final }).then(function (r) {
            var result = JSON.parse(r.responseText);
document.getElementById("greetingOutput").innerText = result;
} 
```

我可以在那个 div 中看到 [object Object] ，知道我如何看到那里的各个元素吗？

我的课是：

```
public class GraphData
    {
        String concerneddate = String.Empty;
        Int32 houroftheday = 0;
        Int32 countathour = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:39:35.980

这一行：

```
 var result = JSON.parse(r.responseText); 
```

制作`result`一个 javascript 对象。现在您可以像这样获取该对象的各个属性：

```
result.concerneddate;
result.houroftheday; 
result.countathour; 
```

我建议您记录实际结果并查看对象的结构。

**更新：**

看到您的评论后，访问属性的方式是：

```
var resultsArray = result.GetGraphDetailsResult;

for (var i in resultsArray){
var ConcernedDate = resultsArray[i].ConcernedDate;
var CountAtHour = resultsArray[i].CountAtHour;
...
} 
```

# vim - golang：为什么终端标准输出不打印出 utf-8 字符？

> ID：14918688
> 
> 赞同：2
> 
> 时间：2013-02-17T06:46:06.380
> 
> 标签：vim, go, iterm

因此`golang`旨在正确处理 unicode/utf-8。

但是，我似乎无法在终端的标准输出中正确打印出 utf-8 字符。

这里最简单的程序： -

```
package main

import "fmt"

func main() {
    fmt.Println("Hello, 世界")
} 
```

执行时，显示编码字符。

```
$ go run hello.go
Hello, ‰∏ñÁïå 
```

我的终端的语言环境设置正确：

```
$ locale
LANG="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_CTYPE="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_ALL="en_US.UTF-8" 
```

我正在使用 vim`set encoding=utf-8`并`set fileencodings=utf-8`包含在我的`.vimrc`文件中。

这实际上可能是一个`vim`问题。我曾经`nano`从头开始编写此脚本并为其命名，`hello2.go`并且打印输出实际上可以`Hello, 世界`正确打印。但是用 创建的原始`hello.go`脚本`vim`只给了我胡言乱语`Hello, ‰∏ñÁïå`。

因此，只需仔细检查我的 vim 创建的`hello.go`脚本是否是 UTF-8 Unicode 文本，我在其`file`上运行命令。像这样：-

```
$ file hello.go
hello.go: C source, UTF-8 Unicode text 
```

那么给了什么？为什么我`hello.go`上面的 vim 创建的脚本会打印出乱码，但我的 nano 创建`hello2.go`的（包含相同的代码行）却没有？

```
$ file hello2.go
hello2.go: C source, UTF-8 Unicode text 
```

事实上，当我打开 vim-created `hello.go`with`nano`时，源代码现在显示为：-

```
package main

import "fmt"

func main() {
        fmt.Println("Hello ‰∏ñÁïå")
} 
```

但是如果我打开同一个 vim-created `hello.go`with `vim`，源代码如下：-

```
package main

import "fmt"

func main() {
    fmt.Println("Hello, 世界")
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T09:41:33.807

这些是我`.vimrc`导致我这个问题的违规行。

```
if has("gui_running")
    set guitablabel=%t%=%m  "Set the label of the tabs
    set nomacatsui anti enc=utf-8 tenc=macroman gfn=Monaco:h11
    " set window size
    set lines=40
    set columns=120
else
    set enc=utf-8 tenc=macroman gfn=Monaco:h11
    set fenc=utf-8
endif 
```

具体来说，`tenc=macroman`是在终端级别搞砸了我的编码。

切换到它`tenc=utf-8`，一切都很好。

在这个我应该看到这个即将到来的问题上浪费了我生命中的 4 个小时！啊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-28T19:38:38.893

该问题很可能与 Windows“命令提示符”（控制台）工具属性中使用的字体有关。

单击左上角的菜单图标，选择“属性”，然后选择“字体”选项卡。在我的 Windows 8.1 机器上，默认值为“光栅字体”，我得到问号 ????? 而不是 Unicode 字符，在 Go Lang 程序中由 UTF8 编码。

解决方案是选择一种 TrueType 字体，“Consolas”或“Lucida Console”

# android - Android 是否支持 3 级或更多级别的嵌套片段？

> ID：14918690
> 
> 赞同：5
> 
> 时间：2013-02-17T06:46:36.433
> 
> 标签：android, android-fragments, android-viewpager

以编程方式添加 3 级嵌套片段时，我遇到了许多崩溃问题。目前，我有一个Activity，它通过它的fragmentManager加载Fragment A，然后通过A的childFragmentManager加载Fragment B，然后从B的childFragmentManager加载Fragment C。

片段最初加载良好。但问题是当碎片被破坏然后重新创建时。你会认为当 Fragment B 被破坏时，Fragment C 也会被破坏。但看起来 Fragment C 被悬空了。

现在，Fragment B 通过 Fragment A 中的 ViewPager 加载。当我从一个页面滑动到另一个页面时，我偶尔会收到以下错误：

```
java.lang.IllegalStateException: Fragement no longer exists for key android:target_state: index 1 
```

如果我从等式中删除片段 C，错误就会消失。如果我将所有片段加载到其父片段管理器（而不是 childFragmentManager）中，它也不会崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:28:14.387

答案是**肯定**的。你可以有3个级别。在我的应用程序中成功使用它。

# windows-phone-7 - 如何以编程方式将附件添加到 Windows Phone 8 应用程序中的电子邮件？

> ID：14918692
> 
> 赞同：2
> 
> 时间：2013-02-17T06:47:10.267
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我正在开发一个 windows phone 8 应用程序，因为我想在我的 windows phone 8 应用程序中向电子邮件添加附件。

1）我们如何将附件（附加文件）添加到电子邮件并发送？

2）EmailComposeTask 不支持附件吗？，如果是这样，还有什么选择？

2）我们可以在Windows Phone 8应用程序中附加文件的各种方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:44:44.407

我目前也在问自己这些问题，并找到了 Ahmed 提到的这个演示库。但是，我想要一个无需购买库的解决方案。

如果您不使用二进制文件，则始终可以将文件内容放在 EmailComposeTask 的正文中。另一种可能性是使用 SkyDrive 并上传您的文件，然后将文件的链接放在电子邮件正文中。

# c# - 如何在 MongoDB 中实现这一点？

> ID：14918694
> 
> 赞同：0
> 
> 时间：2013-02-17T06:47:33.203
> 
> 标签：c#, mongodb, mongodb-.net-driver

我将我的 SQL Server 数据库迁移到了 MongoDB。现在我遇到了一个问题。

```
从AgentStatus a 中选择 * ，
（选择 Max(TimeStamp) 作为 TimeStamp,ExtNo
从代理状态
按 Extno 分组）b
其中 a.[TimeStamp] = b.[TimeStamp] 和 b.ExtNo = a.ExtNo

```

如果我们使用 RMDB，这很简单，但是如何在 MongoDB 中执行这样的查询？或者我必须**更改我的架构**？**如何**？

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:13:17.717

您可以使用聚合框架。假设您有一堆条目：

> db.a.find();

```
{ "_id" : 1, "n" : 1, "d" : ISODate("2012-01-01T00:00:00Z") } 
{ "_id" : 2, "n" : 1, "d" : ISODate("2012-01-12T00:00:00Z") }
{ "_id" : 3, "n" : 1, "d" : ISODate("2012-02-04T00:00:00Z") }
{ "_id" : 4, "n" : 2, "d" : ISODate("2012-01-22T00:00:00Z") }
{ "_id" : 5, "n" : 3, "d" : ISODate("2012-01-07T00:00:00Z") }
{ "_id" : 6, "n" : 2, "d" : ISODate("2011-12-31T00:00:00Z") } 
```

然后，您只需分组和最大值：

```
> db.a.aggregate({$group:{_id:"$n",latest:{$max:"$d"}}}) 
```

这为您提供了每个 n 的记录以及该条目的最新时间戳：

```
> db.a.aggregate({$group:{_id:"$n",latest:{$max:"$d"}}})
{
    "result" : [
            {
                    "_id" : 3,
                    "latest" : ISODate("2012-01-07T00:00:00Z")
            },
            {
                    "_id" : 2,
                    "latest" : ISODate("2012-01-22T00:00:00Z")
            },
            {
                    "_id" : 1,
                    "latest" : ISODate("2012-02-04T00:00:00Z")
            }
    ],
    "ok" : 1
} 
```

# windows - 从 Oracle AFTER INSERT 触发器调用 Windows 服务

> ID：14918695
> 
> 赞同：1
> 
> 时间：2013-02-17T06:48:03.853
> 
> 标签：windows, oracle, service, triggers

我们如何从 Oracle AFTER INSERT 触发器调用 windows 服务（或）dll 文件

任何建议将不胜感激

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:15:40.303

您可以从 plsql 运行操作系统命令。
这可以按照此[AskTom 帖子](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2155105300346643982)或[此](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:952229840241#2717585194628)（11g 之前）中的描述完成

因此，如果您可以从脚本调用服务或 dll，那么这可能会起作用

# objective-c - 设置复合绘图模式导致 NSWindow 上的黑洞/补丁

> ID：14918698
> 
> 赞同：0
> 
> 时间：2013-02-17T06:48:24.887
> 
> 标签：objective-c, cocoa, drawing, quartz-2d

我想画一个形状，在它上面我想画一个更小的透明形状。

```
-(void) drawRect:(NSRect)dirtyRect
{
    //clear everything
    {
        [[NSColor whiteColor] set];
        [[NSBezierPath bezierPathWithRect:dirtyRect] fill];
    }

    NSBezierPath    *thePath = [NSBezierPath bezierPathWithOvalInRect: self.bounds];
    [thePath setLineWidth: 30];
    [[NSColor blueColor] set];
    [thePath stroke];

    [[NSGraphicsContext currentContext] setCompositingOperation: NSCompositeCopy];
    [[NSColor clearColor] set];
    [thePath setLineWidth: 4];
    [thePath stroke];
} 
```

![作为上述程序的结果，我在蓝色椭圆形的中心得到了蓝色椭圆形和黑色椭圆形。](../Images/f2dfeedb8bf39c2192d55651e1efe117.png)

我也尝试过使用 NSImage forst 然后查看，但仍然得到相同的结果。

```
-(void) drawRect:(NSRect)dirtyRect
{
    //clear everything
    {
        [[NSColor whiteColor] set];
        [[NSBezierPath bezierPathWithRect:dirtyRect] fill];
    }

    NSImage* image = [[NSImage alloc] initWithSize:self.frame.size];

    [image lockFocus];

    //clear everything
    {
        [[NSColor whiteColor] set];
        [[NSBezierPath bezierPathWithRect:dirtyRect] fill];
    }

    NSBezierPath    *thePath = [NSBezierPath bezierPathWithOvalInRect: self.bounds];
    [thePath setLineWidth: 30];
    [[NSColor blueColor] set];
    [thePath stroke];

    [[NSGraphicsContext currentContext] setCompositingOperation: NSCompositeCopy];
    [[NSColor clearColor] set];
    [thePath setLineWidth: 4];
    [thePath stroke];

    [image unlockFocus];

    [image drawInRect:self.frame fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:36:00.440

椭圆形显示为黑色，因为默认情况下窗口是不透明的。您已成功在窗口中切割出椭圆形轨道，但由于窗口是不透明的，没有工业激光在显示器上切割相同的椭圆形，您的 Mac 必须在此处显示*一些*颜色。它显示的颜色是`clearColor`：黑色。

解决方案是将窗口设置`opaque`为`NO`.

默认值为`YES`，这很好且高效，但（实际上，*因为*）它会阻止其他窗口的内容显示出来。将其设置为`NO`可以让您通过那条细长的椭圆形轨道看到窗户后面的东西。（如果你填充椭圆会更好，在……呃……窗口中给自己一个更大的窗口。）

![这是关闭窗口不透明的外观。](../Images/65131470a3faddd276c84928e1600e70.png)

（为什么看起来轨道充满了灰色？那是您在那里看到的窗口阴影。当您真正尝试它时，您将能够通过轨道看到系统上的其他窗口，因为您移动窗户周围。）

# crystal-reports - 如何在水晶报表中创建参数字段

> ID：14918700
> 
> 赞同：1
> 
> 时间：2013-02-17T06:48:32.070
> 
> 标签：crystal-reports, report

我想在水晶报表中创建一个在报表运行时显示的参数字段，如果用户选择“选项A”，数据将根据“选项A”显示，但如果用户选择“选项b”，用户必须从“选项C”中选择”和“选项 D”，仅在选择“选项 B”时显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:30:06.870

水晶使这非常棘手（如果我正确解释了您的问题）。

理想情况下，您需要创建自己的前端来运行报告（因为您可以拥有任何您喜欢的复杂逻辑）。

在 Crystal 设计器中，您将获得最接近的方法是创建一个动态的级联参数，其中两层包含您的两个级别的选项。

```
col1, col2
OptA, OptA
OptB, OptC
OptB, OptD 
```

然后，您需要将它们链接到您的主表，否则您最终会得到一堆数据。

# c# - 将 Winforms 应用程序发布到网站

> ID：14918705
> 
> 赞同：0
> 
> 时间：2013-02-17T06:50:35.160
> 
> 标签：c#, visual-studio-2010

我已经构建了一个 Winforms 应用程序，我想发布它。我想在网站[https://sites.google.com/site/satsavvyboardgame/home](https://sites.google.com/site/satsavvyboardgame/home)上有一个链接，我可以让用户下载应用程序并将其安装在他们的计算机上。到目前为止，我还没有找到任何方法将所有内容打包在一个包中，或者成功发布到网络上。发布到网络的 URL 的规范是什么？有没有办法将所有内容打包成一个项目（该站点不允许我上传/下载文件夹），以便用户可以下载一个项目，然后在其中运行它或其他东西？还有另一种我没见过的方法吗？

我正在使用 C# Visual Studio 2010 Express，我的应用程序具有我需要运行的代码和几个 XML 文件。所有这些都是项目的一部分，当我使用 CD 发布设置从文件安装时运行良好。

我以前从未发布过应用程序，因此非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:09:48.610

您有 2 个常规选项：

1.  使用“ClickOnce”，它将在用户每次单击安装时启用自动更新，并具有其他一些好处，例如权限问题较少。

2.  使用“Windows-Installer”，它可以让您更好地控制安装阶段的操作和操作。然而，可耻的是，打包和部署项目类型在 vs2012 中不再存在。您可以使用几个 3rd 方包来创建您的安装项目。

如果用户下载的只是一个简单的独立游戏应用程序，则 ClickOnce 更可取。MSI 适用于更“丰富”的应用程序，应该在机器注册表等中广泛使用。

此链接中的表格将为您提供做出决定所需的数据：http: [//msdn.microsoft.com/en-us/library/142dbbz4 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/142dbbz4(v=vs.80).aspx)

# java - java中的执行器服务-->如何将单线程代码转换为使用执行器

> ID：14918706
> 
> 赞同：7
> 
> 时间：2013-02-17T06:50:51.577
> 
> 标签：java, multithreading, threadpool, executorservice

如果这个问题听起来很愚蠢，请原谅我 - 我刚刚开始使用 Executor。

我有一个以这种方式使用线程的现有 Java 应用程序——基本上使用独立线程——

```
private Thread spawnThread( )
    {

        Thread t = new Thread()
        {
            String taskSnap = task.toString();
            public void run()
            {
                try
                {
                    println( task.run( null ) );
                }catch( InterruptedException e )
                {
                    println( "ITC - " + taskSnap + " interrupted " );
                }
            }
        };
        return t;
    } 
```

从上面可以看出，该函数返回一个新线程。

现在在程序的 main() 函数中，以这种方式创建了一个新线程——

```
 taskThread = spawnThread();

    taskThread.start(); 
```

我想要做的是，创建一个执行器服务（具有固定数量的线程） - >然后将新线程的新线程的创建/任务的执行移交给该执行器。

由于我对 Executor 很陌生，我想知道的是，如何更改上面的代码，以便在线程池中创建一个新线程，而不是形成一个新的单独线程。我看不到任何创建线程的命令（在线程池中）-> 将上述任务交给该线程（而不是像上面那样交给独立线程）。

请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T06:55:02.947

在你的主要，你可以写这样的东西：

```
ExecutorService executor = Executors.newFixedThreadPool(nThreads);
executor.submit(new Runnable() {
    String taskSnap = task.toString();
    public void run() {
            try {
                println(task.run(null));
            } catch( InterruptedException e) {
                println("ITC - " + taskSnap + " interrupted ");
            }
    }
}); 
```

submit 方法将在执行器服务中的一个线程上执行 Runnable。

注意：当你不再需要它时不要忘记关闭执行器服务，否则它会阻止你的程序退出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T06:55:48.253

在询问之前做你的研究。这个想法是创建一个实现 Runnable 的类并使用执行器服务执行它。

示例来自：[Java 并发（多线程） - 教程](http://www.vogella.com/articles/JavaConcurrency/article.html#threadpools)

**worker 的实现（实现 Runnable）：**

```
package de.vogella.concurrency.threadpools;

/** * MyRunnable will count the sum of the number from 1 to the parameter * countUntil and then write the result to the console. * <p> * MyRunnable is the task which will be performed * * @author Lars Vogel * */

public class MyRunnable implements Runnable {
  private final long countUntil;

  MyRunnable(long countUntil) {
    this.countUntil = countUntil;
  }

  @Override
  public void run() {
    long sum = 0;
    for (long i = 1; i < countUntil; i++) {
      sum += i;
    }
    System.out.println(sum);
  }
} 
```

**如何使用执行器服务运行触发工作线程。**

```
package de.vogella.concurrency.threadpools;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Main {
  private static final int NTHREDS = 10;

  public static void main(String[] args) {
    //You can also use Executors.newSingleThreadExecutor() if you just need 1 thread
    ExecutorService executor = Executors.newFixedThreadPool(NTHREDS);
    for (int i = 0; i < 500; i++) {
      Runnable worker = new MyRunnable(10000000L + i);
      executor.execute(worker);
    }
    // This will make the executor accept no new threads
    // and finish all existing threads in the queue.
    executor.shutdown();
    // Wait until all threads are finish
    //while (!executor.isTerminated()) {
    //}
    //System.out.println("Finished all threads");
    //All the threads might not be finished at this point of time. Thread endtime purely depends on the time taken by the processing logic inside your thread.
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T06:58:10.243

你的意思是这样的？

```
class Parallel {
    private ExecutorService pool = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());

    public void shutdown() {
        pool.shutdown();
    }

    public void foo() {
        pool.submit(new Runnable() {
            @Override
            public void run() {
                // put your code here
            }
        });
    }
} 
```

# c# - 无参数构造函数错误。（升级到 autofac 3）

> ID：14918709
> 
> 赞同：1
> 
> 时间：2013-02-17T06:51:18.823
> 
> 标签：c#, asp.net-mvc, autofac

在`application_start()`我有以下代码。创建帐户控制器时，我收到无参数构造函数错误。AccountController 没有无参数构造函数。似乎不再配置autofac？

帐户控制器预期以下内容。

`public AccountController(IFlexMembershipProvider membership, IFlexOAuthProvider openAuth)`

我不确定为什么 autofac 没有注入依赖项？

```
var builder = new ContainerBuilder();

builder.RegisterType<DataContext>()
    .As<IRepository>()
    .As<DbContext>().InstancePerLifetimeScope();

builder.RegisterType<FlexMembershipProvider>().As<IFlexMembershipProvider>();
builder.RegisterType<FlexMembershipProvider>().As<IFlexOAuthProvider>();
builder.RegisterType<FlexRoleProvider>().As<IFlexRoleProvider>();

builder.RegisterType<UserStorage>().As<IFlexUserStore>().InstancePerLifetimeScope();
builder.RegisterType<RoleStorage>().As<IFlexRoleStore>().InstancePerLifetimeScope();
builder.RegisterType<DefaultSecurityEncoder>().As<ISecurityEncoder>().SingleInstance();
builder.RegisterType<AspnetEnvironment>().As<IApplicationEnvironment>();
builder.RegisterType<InvestorService>().As<IInvestorService>();
builder.RegisterType<InvestmentService>().As<IInvestmentService>();
builder.RegisterType<BrokerService>().As<IBrokerService>().As<IListService<Broker>>();
builder.RegisterType<PortfolioManagerService>().As<IListService<PortfolioManager>>();

builder.RegisterModelBinderProvider();

var container = builder.Build();

DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T09:54:28.400

`.Build`在调用该方法之前，您需要注册包含您的控制器的程序集：

```
builder.RegisterControllers(typeof(MvcApplication).Assembly);
var container = builder.Build(); 
```

在此示例中，我假设您的应用程序类被调用`MvcApplication`并获取了它的程序集。如果您的控制器是在不同的程序集中定义的，您应该指定此程序集。

[`documentation of AutoFac`](http://code.google.com/p/autofac/wiki/MvcIntegration3)有一个你可以经历的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T15:47:21.140

在调用 builder.Build 方法之前尝试添加：

```
builder.RegisterSource(new AnyConcreteTypeNotAlreadyRegisteredSource(x => !(x.IsValueType) && !(x.IsAssignableFrom(typeof(string))))); 
```

# c - 在 C 中操作 char 数组后的随机符号

> ID：14918710
> 
> 赞同：-4
> 
> 时间：2013-02-17T06:51:18.963
> 
> 标签：c, arrays

```
void coma(char* str){
int j, i = 0;
int size = strlen(str);
int commas = (size-3)/3;
int left = (size-3)%3;
char tmp[20];

for(j = 0; j<size; i++){
    if(left || commas == 0){
        tmp[i] = str[j++];
        left--;
    }else {
        tmp[i] = ',';
        left = 3;
        commas--;
    }        
}
strcpy(str,tmp);    }

int main(){

char str[0x100];
float x = 5002052.1111;

sprintf(str,"%.2f", x);

coma(str);
printf("%s\n",str);  } 
```

我试图在浮点数上每隔三个位置插入逗号，例如数字“5002052.1111”将是“5,002,052.11”，但是当我运行程序而不是得到我期望的结果时，我得到了正确的答案加上随机符号，如“5,002,052.11@ {"

我注意到，如果我将确切大小的数字放在 char tmp[] 中，它会正常工作，但我需要它来处理任何大小的数字。

我正在使用 gcc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:54:45.290

在调用之前附加`'\0'`到字符串`tmp``strcpy()`

# php - 如何在单个数组中获取两个数组而不丢失 mysql 和 php 中的值？

> ID：14918715
> 
> 赞同：0
> 
> 时间：2013-02-17T06:51:55.767
> 
> 标签：php, mysql, arrays

我从章节 id 的基本表中取出了两个数组。其中一个数组处于章​​节在 1 到 6 之间的状态。类似地，另一个数组处于同一个表中章节介于 7 到 12 之间的状态。

我的第一个查询在哪里

```
$sql1 = 'SELECT s.section_number, s.title,n.description,s.global_order_id, c.commentary FROM section as s 
                INNER JOIN note as n 
                INNER JOIN commentary as c ON s.global_order_id=n.global_order_id and c.global_order_id=n.global_order_id 
                where n.user_id='.Yii::app()->user->id.' and s.chapter_id Between 1 and 6'; 
```

第二个查询是

```
$sql2 = 'SELECT s.section_number, s.title,n.description,s.global_order_id, c.commentary FROM section as s 
                INNER JOIN note as n 
                INNER JOIN commentary as c ON s.global_order_id=n.global_order_id and c.global_order_id=n.global_order_id 
                where n.user_id=' . Yii::app()->user->id . ' and s.chapter_id Between 7 and 12'; 
```

都是一样的，不同的是根据章节的标题。

当我进行数组合并时，只显示一个标题，但我想将双数组变为单个并显示两个标题。我该怎么做？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:55:56.863

您可以通过`UNION`（隐式不同）或`UNION ALL`两个查询直接在 MySQL 中执行此操作，例如：

```
SELECT 
  s.section_number,  
  s.title,
  n.description,
  s.global_order_id, 
  c.commentary 
FROM section as s 
INNER JOIN note as n 
INNER JOIN commentary as c  ON s.global_order_id = n.global_order_id 
                           and c.global_order_id = n.global_order_id 
where n.user_id = '.Yii::app()->user->id.' 
  and s.chapter_id Between 1 and 6
UNION ALL
SELECT 
  s.section_number, 
  s.title,
  n.description,
  s.global_order_id, 
  c.commentary 
FROM section as s 
INNER JOIN note as n 
INNER JOIN commentary as c  ON s.global_order_id = n.global_order_id 
                           and c.global_order_id = n.global_order_id 
where n.user_id=' . Yii::app()->user->id . ' 
  and s.chapter_id Between 7 and 12; 
```

然后仅执行此查询，您会将两个结果集放入来自此查询的一个数组中。

# php - 如何在 PHP 中实现类似 YQL 的 API？

> ID：14918717
> 
> 赞同：1
> 
> 时间：2013-02-17T06:52:22.743
> 
> 标签：php, mysql, yql

我想在 PHP 中创建一个类似于 YQL 的 API，用户可以在其中运行查询来获取数据。任何机构都可以指导我如何实现这一目标吗？我们可以从一个非常基本的查询开始。只需要指导如何在 PHP 和 MYsql 中实现这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-01-11T17:15:57.100

我在此处复制并粘贴了此内容，以便您更好地理解，并且那些将查看它的人将其作为您问题的示例方法。

**这是 mysql 之类的 yql 命令**

**

```
select * from html where url="http://finance.yahoo.com/q?s=yhoo" and
      xpath='//div[@id="yfi_headlines"]/div[2]/ul/li/a' 
```

**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
        yahoo:count="15" yahoo:created="2016-01-11T17:09:07Z" yahoo:lang="en-US">
        <diagnostics>
            <publiclyCallable>true</publiclyCallable>
            <url execution-start-time="1" execution-stop-time="1228" execution-time="1227"><![CDATA[http://finance.yahoo.com/q?s=yhoo]]></url>
            <url execution-start-time="1" execution-stop-time="1228" execution-time="1227"><![CDATA[http://finance.yahoo.com/q?s=yhoo]]></url>
            <user-time>1231</user-time>
            <service-time>2445</service-time>
            <build-version>0.2.369</build-version>
        </diagnostics> 
        <results>
            <a data-ylk="cp:American City Business Journals;o:e;" href="http://us.rd.yahoo.com/finance/external/bizj/SIG=139c9j4lb/*http://www.bizjournals.com/sanjose/news/2016/01/11/yahoo-staff-are-losing-faith-in-the-company-and.html?ana=yahoo">Yahoo staff are losing faith in the company and its leadership</a>
            <a data-ylk="cp:Zacks;o:i;" href="http://finance.yahoo.com/news/technology-stock-roundup-dismal-start-150703080.html">Technology Stock Roundup: Dismal Start to 2016</a>
            <a data-ylk="cp:Forbes;o:e;" href="http://us.rd.yahoo.com/finance/external/forbes/SIG=14082so2n/*http://www.forbes.com/sites/ericjackson/2016/01/11/want-an-instant-2-5-million-bonus-at-yahoo-allegedly-just-threaten-to-quit/?utm_campaign=yahootix&amp;partner=yahootix">Want An Instant $2.5 Million Bonus At Yahoo? Allegedly, Just Threaten To Quit</a>
            <a data-ylk="cp:Barrons.com;o:e;" href="http://us.rd.yahoo.com/finance/external/barrons/SIG=13cgi999q/*http://blogs.barrons.com/techtraderdaily/2016/01/11/yahoo-talk-of-core-sale-in-focus-again-on-nyt-article/?mod=yahoobarrons&amp;ru=yahoo">Yahoo! Talk of 'Core' Sale in Focus Again on NYT Article</a>
            <a data-ylk="cp:Insider Monkey;o:e;" href="http://us.rd.yahoo.com/finance/external/xinsidermonkey/SIG=14d3lit34/*http://www.insidermonkey.com/blog/a-look-at-whitebox-advisors-top-equity-holdings-as-it-prepares-to-close-down-its-mutual-fund-unit-405548/">A Look At Whitebox Advisors Top Equity Holdings As It Prepares To Close Down Its Mutual Fund Unit</a>
            <a data-ylk="cp:Bloomberg;o:i;" href="http://finance.yahoo.com/video/yahoo-said-reconsider-business-sale-142447099.html">Yahoo Said to Reconsider Web Business Sale, Why?</a>
            <a data-ylk="cp:Bloomberg;o:e;" href="http://us.rd.yahoo.com/finance/external/bloomberg/SIG=131lr1djm/*http://www.bloomberg.com/news/videos/2016-01-11/yahoo-said-to-reconsider-web-business-sale-why-?cmpid=yhoo.headline">Yahoo Said to Reconsider Web Business Sale, Why?</a>
            <a data-ylk="cp:CNBC;o:i;" href="http://finance.yahoo.com/video/twitter-shares-down-48-past-134500309.html">Twitter shares down 48% in past year</a>
            <a data-ylk="cp:CNBC;o:e;" href="http://us.rd.yahoo.com/finance/external/cnbc/SIG=112isi8k7/*http://www.cnbc.com/id/103294156?__source=yahoo%7cfinance%7cheadline%7cheadline%7cstory&amp;par=yahoo&amp;doc=103294156">Early movers: BXLT, AEO, HSY, M, APOL, WSM &amp; more</a>
            <a data-ylk="cp:Benzinga;o:i;" href="http://finance.yahoo.com/news/bob-peck-yahoo-separation-bulk-123554615.html">Bob Peck On Yahoo: Separation Is Bulk Of Value</a>
            <a data-ylk="cp:Fox Business Video;o:i;" href="http://finance.yahoo.com/video/time-marissa-mayer-yahoo-ceo-120443101.html">Time for Marissa Mayer to go as Yahoo CEO?</a>
            <a data-ylk="cp:The Wall Street Journal;o:e;" href="http://us.rd.yahoo.com/finance/external/wsj/SIG=134mdgf4d/*http://www.wsj.com/articles/cmo-today-apple-news-falls-short-of-publishers-expectations-1452513606?mod=yahoo_hs">CMO Today: Apple News Falls Short of Publishers' Expectations</a>
            <a data-ylk="cp:Quartz;o:i;" href="http://us.rd.yahoo.com/finance/external/quartz/SIG=12kug5d3h/*http://qz.com/590363/yahoos-plan-a-b-c-d-and-e-for-appeasing-frustrated-investors/?utm_source=YPL">Yahoo’s plan A, B, C, D, and E for appeasing frustrated investors</a>
            <a data-ylk="cp:Bloomberg;o:e;" href="http://us.rd.yahoo.com/finance/external/bloomberg/SIG=136qrbvv6/*http://www.bloomberg.com/news/videos/2016-01-09/yahoo-s-web-business-bloomberg-west-full-show-01-08-?cmpid=yhoo.headline">Yahoo's Web Business: Bloomberg West (Full Show 01/08)</a>
            <a data-ylk="cp:Bloomberg;o:i;" href="http://finance.yahoo.com/video/yahoo-considering-sale-core-biz-234206699.html">Yahoo Considering Sale of Core Biz After Activists’ Push</a>
        </results>
    </query> 
```

访问[此链接](https://developer.yahoo.com/yql/guide/two-minute-tutorial.html)以获得更好的理解。

# javascript - 在 jsviews 中绑定到表单的正确语法（提交 26）

> ID：14918718
> 
> 赞同：1
> 
> 时间：2013-02-17T06:52:31.447
> 
> 标签：javascript, jsrender, jsviews

我正在试验 Boris Moore 的 jsrender/jsviews 库，目前正在使用当前版本（提交 26）。（我意识到 API 不断变化，但想练习使用它）

我看过这里的演示：http: [//borismoore.github.com/jsviews/demos/index.html](http://borismoore.github.com/jsviews/demos/index.html)

但我无法确定`data-link`语法。在一些演示中，语法是`data-link="{:FirstName:}`

我不明白为什么2个冒号。我假设第一个冒号意味着不会进行 HTML 编码，但不知道第二个冒号。

在其他地方，我看到类似`data-link="address.street"`Here 的语法根本没有大括号或冒号。我想知道你什么时候需要，什么时候不需要。另外，我不遵循您如何指定是要单向绑定还是双向绑定。或者，如果您希望绑定触发以响应按键而不是模糊。

这是我想正确设置的示例：

```
<div id="form">
    <p>
        <label>First Name</label>
        <input type="text" name="FirstName" data-link="FirstName"/>
    </p>
    <p>
        <label>Last Name</label>
        <input type="text" name="LastName" data-link="LastName"/>
    </p>
    <p>
        <label>Full Name</label>
        <input type="text" data-link="FirstName + ' ' + LastName"/>
    </p>
    <p>
        <label>Gender</label>
        <select name="Gender">
            <option value="U">Unknown</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>
    </p>
</div>
<script>
   var data =
   {
      FirstName: "Bill",
      LastName: "Willis",
      Gender: "M"
   };

   $("#form").link(true, data);  //What is the 1st parameter (true) about?
</script> 
```

我不知道如何绑定到选择控件。

我将不胜感激有关如何完成此操作的任何解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:20:22.727

`data-link="a.b.c"`是简写语法，等效`data-link="{:a.b.c:}"`于输入的完整语法（它为您提供双向绑定）和`data-link="{:a.b.c}"`大多数其他元素（即不是用于用户输入的表单元素，所以它当然是单向绑定）。

有关详细信息，请参阅[https://github.com/BorisMoore/jsviews/issues/136](https://github.com/BorisMoore/jsviews/issues/136)。

如果您想进行非默认绑定，请使用完整语法，例如使用 convert 或 convertBack ，如 in `data-link="{cvt:a.b.c:cvtBack}"`，或单向绑定输入，如 in `data-link="{:a.b.c}"`。

因此，冒号既指定了绑定的方向，又允许您为该绑定添加转换器。

目前不直接支持单向“源”，但可以通过使用转换器来实现。绑定到选择显示在几个示例中，例如[this one](http://borismoore.github.com/jsviews/demos/step-by-step/04_form-elements.html)或[this one](http://borismoore.github.com/jsviews/demos/step-by-step/05_converters.html.)。

目前触发器是 onblur（或 onchange）——但很快就可以以声明方式设置它。现在它需要代码来实现它 - 就像在[这个例子](https://github.com/BorisMoore/jsviews/blob/master/demos/step-by-step/10_todos.html#L124)中一样。

所有演示的代码都在[这里](https://github.com/BorisMoore/jsviews/tree/master/demos)。

# ios - 使用点击手势时如何获取 UICollectionView 标头的索引路径？

> ID：14918720
> 
> 赞同：2
> 
> 时间：2013-02-17T06:52:44.853
> 
> 标签：ios, objective-c, ios6, uicollectionview

我使用 locationInView 获取接触点并将其传递给集合视图的 indexPathForItemAtPoint。我将获得一个单元格的索引路径，但绝不是 UICollectionReusableView（页眉/页脚），因为它总是返回 nil。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-09T05:07:44.803

标头实际上没有 indexPath；它报告为第 0 行，但该部分中的第一个单元格也是如此。

您可以通过创建具有 Integer 属性的 UITapGestureRecognizer 的简单子类轻松解决此问题，只需将以下接口和空实现放在 View Controller`.m`文件的顶部：

```
@interface HeaderTapRecognizer : UITapGestureRecognizer
@property (nonatomic, assign) NSInteger sectionNumber;
@end

@implementation HeaderTapRecognizer
@end 
```

当您提供补充视图时，只需添加这些识别器之一并设置部分编号：

```
HeaderTapRecognizer *recognizer = [[HeaderTapRecognizer alloc] initWithTarget:self action:@selector(headerTapped:)];
recognizer.sectionNumber = indexPath.section;
[cell addGestureRecognizer:recognizer]; 
```

现在您可以访问操作块中的部分编号：

```
- (void)headerTapped:(id)sender
{
    HeaderTapRecognizer *htr = sender;
    NSInteger sectionNumber = htr.sectionNumber;
    NSLog(@"Header tapped for index Section %d",sectionNumber);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:10:43.017

I would create and attach a `UITapGestureRecognizer` to each header view. Another option would be to provide your a custom subclass of `UIControl` for each header view.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:05:48.343

对此提供帮助可能为时已晚，但也许其他人会像我一样做到这一点。问题是标头没有有意义的 indexPath（它似乎总是返回 0,0）。

无论如何，当我明白这一点时，我正在检查它是否在标题的子视图内，而不是 indexPath：

```
CGPoint point = [sender locationInView:collectionView];
if (CGRectContainsPoint(CGRectMake(0.0f,0.0f,140.0f,140.0f), point))
   NSLog(@"Point was inside header"); 
```

这仅在我的实例中有效，因为我知道标题的大小并且可以安全地假定它在 collectionview 中的位置，因为 collectionView 只有一个部分 (0)。

高温高压

# c - 用 C 程序替换 pipe-shellscript

> ID：14918723
> 
> 赞同：0
> 
> 时间：2013-02-17T06:53:24.660
> 
> 标签：c, bash, pipe

我有以下 Bash 脚本：

`cat | command1 | command2 | command3`

命令永远不会改变。

出于性能原因，我想用一个小的 C 程序替换它，该程序运行命令并相应地创建和分配管道。

有没有办法在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T07:50:07.013

正如其他人所说，您可能不会获得显着的性能优势。
可以合理地假设您运行的命令花费了大部分时间，而不是 shell 脚本将它们粘合在一起，因此即使粘合变得更快，它也几乎不会改变任何东西。

话虽如此，如果你想这样做，你应该使用、`fork()`和`pipe`函数。会给你多个进程。会给你一对文件描述符 - 你写入一个，你可以从另一个读取。 可用于更改文件描述符编号。您可以在一个进程中使用管道的一侧并使其成为文件描述符 1（stdout），而在另一侧您将在另一个进程中创建文件描述符 0（stdin）（不要忘记关闭正常的 stdin、stdout第一的）。（或其变体之一）将用于执行程序。`dup2()``exec()`
`fork`
`pipe``dup2`
`exec`

有很多细节要填写。玩得开心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T08:01:33.190

[这是一个](http://www.cs.loyola.edu/~jglenn/702/S2005/Examples/twopipes.c)几乎可以做到这一点的示例。

处理本身没有性能优势，只有几毫秒的初始化时间。显然，我们不知道您正在执行此操作的上下文，但仅使用`dash`而不是`bash`可能会从您的单个字符更改中获得 80% 的毫秒数`#!`

# java - 使用JPanel绘制直线并获取点坐标

> ID：14918732
> 
> 赞同：2
> 
> 时间：2013-02-17T06:55:11.693
> 
> 标签：java, swing, user-interface, jpanel

我现在完全不知所措。我在 Java 中构建 GUI 的工作不多，我一直在阅读有关 Swing 和 JPanel 的所有内容，我认为我正在尝试做的事情是可能的，我只是还没弄清楚*如何*.

我正在尝试构建一个 GUI，您可以在其中绘制特定绘图区域内的直线，我希望能够获取起点/终点坐标，以便对这些点执行一些数学运算。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T07:21:32.867

我会把代码留给你，所以这里是算法：
1\. 创建一个`JFrame`并添加一个`JPanel`。
2.添加鼠标监听器`JPanel`
3.每次鼠标按下，获取点击的x和y。（起点）
4\. 拖动鼠标时，连续记录x和y。
5\. 松开鼠标后，记录 x 和 y。（结束点）
6\. 您可以使用 class 的`drawLine()`方法`Graphics`或使用`draw()`在`Graphics2D`这种情况下，您将需要 a `Line2D.Double`- 参数保持不变 - start x，start y，end x 和 end y

* * *

这是一张可以更好地解释 lil 的图片： ![在此处输入图像描述](../Images/a03701a43bc3509778d822411e0da8ca.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T07:06:06.803

Start with [Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/) and [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html).

Basically, you going to need a mouse listener to monitor the user interaction with your panel, check out [How to write mouse listeners](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html) for more infor still.

Depending on your needs, if you need to maintain all the click points of the user, you would need to store them in something like a `List`, or if you just need to know the start and end points, the you just need a couple of `Point` objects.

You would be able to use these to paint onto your surface and performing your required calculations.

Remember, in this context, the points are contextual to the container they were generated on. That is 0x0 will be the top left of the container

**Updated**

You could also take advantage of the Shape API, using a `Line2D` to represent the two points. This would make it easier to distinguish between distinct lines/points

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:07:23.940

you need to add the mouse listener on JPanel.

then:

```
public void mouseClicked(MouseEvent me){
if(click==1){
int x1=me.getX();
int y1=me.getY();
click=click+1;
}
else{
int x2=me.getX();
int y2=me.getY();
click=1;
}
}

drawLine(x1,y1,x2,y2) 
```

To draw line with mouse move you can also add mouse motion listener.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T07:03:56.277

这比“用 (x1,y1) 和 (x2, y2) 画直线”方法更难。

您需要一个`Line`（您的自定义）对象，该对象是动态创建并放置在`JPanel`正在侦听`MouseEvent`s 的画布区域`JPanel`本身的。您还需要将 MODEL 与 VIEW 分开，以便您的自定义画布`JPanel`可以正确绘制自己并覆盖`paintComponent()`

这个问题有点模糊，所以我不能提供任何代码。

# node.js - 如何允许用户删除帖子？

> ID：14918734
> 
> 赞同：1
> 
> 时间：2013-02-17T06:55:15.310
> 
> 标签：node.js, http

下面我有一个用户可以发出的帖子请求，如果`_method`删除了带有名称的隐藏表单项，它将向我自己的服务器发出请求到不同的路由并从数据库中删除帖子。这个过程应该如何运作？

```
 app.post("/posts/:id/delete", function(req, res){
  if(req.body._method = "delete"){
    request({
      "method": "delete",
      "url": "/posts/"+req.param.id
    }, function(err, response, body){
      res.redirect("/posts");
    });
  }
});

app.delete("/posts/:id", function(req, res){
  //delete it from the database
  res.redirect("/posts");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:40:39.343

假设 Express/Connect，[`methodOverride()`](http://www.senchalabs.org/connect/methodOverride.html)可能是最简单的选择：

```
app.use(express.bodyParser());
app.use(express.methodOverride()); 
```

但是，`<form action>`and 路由`path`应该匹配：

```
<form action="/posts/{{id}}" method="post">
    <input type="_method" value="delete" />
    <!-- ... -->
</form> 
```

```
app.delete('/posts/:id', function (req, res) {
  //delete it from the database
  res.redirect("/posts");
}); 
```

* * *

[更新] 对于 Express 4 及更新版本，此中间件已移至[`method-override`](https://www.npmjs.com/package/method-override).

# apache - XAMPP 与 Apache 并行

> ID：14918735
> 
> 赞同：1
> 
> 时间：2013-02-17T06:55:21.170
> 
> 标签：apache, xampp, archlinux

我在我的 PC 上安装了“普通”Apache（带有 PHP 和 MySQL），并且我想并行运行 XAMPP。我在 XAMPP 配置中更改了 HTTP（到 81）、MySQL（到 3307）和 SSL（到 4433）的端口，但是当我想启动它时 XAMPP 说：

```
Starting XAMPP for Linux 1.8.1...
XAMPP: Another web server daemon is already running.
XAMPP: Another MySQL daemon is already running.
XAMPP: Starting ProFTPD...
XAMPP for Linux started. 
```

所以只有 FTP 服务器启动（我不需要），Web 服务器不会启动。我真的不知道，问题出在哪里。

我正在使用 Archlinux x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T18:52:50.860

我想您应该阅读：[https](https://wiki.archlinux.org/index.php/LAMP) ://wiki.archlinux.org/index.php/LAMP ，它更好，更专业。

# java - Java 分析器在内部是如何工作的？

> ID：14918736
> 
> 赞同：4
> 
> 时间：2013-02-17T06:55:33.600
> 
> 标签：java, jvm, profiling

我正在研究探查器如何在内部工作。

似乎有一个名为[JVMPI](http://docs.oracle.com/javase/1.4.2/docs/guide/jvmpi/jvmpi.html)的旧 API ，以及一个基于`java.lang.instrument`. 我的想法是分析器检测所有类的字节码，并将通过套接字信息调用的钩子插入给定程序的开放点，从而与分析器建立通信。这是标准方法吗？他们的方法有很大不同吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:08:52.820

作为参考，“ [JVM TI](http://docs.oracle.com/javase/7/docs/technotes/guides/jvmti/)是在 JDK 5.0 中引入的。JVM TI 取代了 Java 虚拟机分析器接口 (JVMPI) 和 Java 虚拟机调试接口 (JVMDI)。” 标准分析器[`jvisualvm`](http://docs.oracle.com/javase/7/docs/technotes/guides/visualvm/index.html)广泛使用 API，例如执行和监视垃圾收集，如此处建议的[那样](https://stackoverflow.com/a/14492574/230513)。[Java Management Extensions](http://docs.oracle.com/javase/7/docs/technotes/guides/visualvm/jmx_connections.html) (JMX) 是通用的通信层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:19:54.420

我不是这方面的专家，但似乎 JVMPI 和 JVMTI 的工作方式不同。

*   JVMPI 似乎通过代理处理启用分析时 JVM 发出的“事件”来工作。似乎事件发出逻辑是内置在 JVM 中的。

*   JVMTI 似乎通过让代理在加载方法时将字节码注入方法来工作（用于分析）。

（这是对相应规格的简要阅读，如上链接。）

# winapi - 直接访问 GDI 绘图上下文像素

> ID：14918739
> 
> 赞同：4
> 
> 时间：2013-02-17T06:55:54.430
> 
> 标签：winapi, buffer, gdi

我想直接从/向绘图上下文读取和写入像素，即在窗口上的绘制操作期间。

我知道 Windows GDI 中有`GetPixel`/`SetPixel`函数，但是对于大型操作，能够直接将像素数据读取和写入内存会好得多。

如何使用标准 GDI 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:41:26.853

您可以创建一个兼容的 DC，位图：

```
HDC     hMemDC = CreateCompatibleDC(hdc);
HBITMAP hBmp   = CreateCompatibleBitmap(hdc, WIDTH, HEIGHT);
SelectObject(hMemDC, hBmp); 
```

接下来，您可以使用[GetDIBits函数来获取位：](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879%28v=vs.85%29.aspx)

```
int GetDIBits(
  _In_     HDC hdc,
  _In_     HBITMAP hbmp,
  _In_     UINT uStartScan,
  _In_     UINT cScanLines,
  _Out_    LPVOID lpvBits,
  _Inout_  LPBITMAPINFO lpbi,
  _In_     UINT uUsage
); 
```

**注意：**您可能需要将 lpvBits 设置为 NULL 以通过 BITMAPINFO（lpbi 参数）获取图像的尺寸和格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:57:19.583

用于[`GetObject`获取`BITMAP`](http://msdn.microsoft.com/en-us/library/aa932477.aspx)包含指向位图数据的指针的[结构。](http://msdn.microsoft.com/en-us/library/aa932477.aspx)

# ios - iOS 相机编程 - 如何在 didOutputSampleBuffer 回调中获取最大分辨率的图像

> ID：14918742
> 
> 赞同：4
> 
> 时间：2013-02-17T06:56:52.653
> 
> 标签：ios, camera

我有这个相机应用程序，我想在 didOutputSampleBuffer 回调中获取最大分辨率图像。现在我在回调中收到的所有帧都是 852 x 640（我使用 iPhone 4 进行测试）。只有当我请求静态图像捕获（通过 captureStillImageAsynchronouslyFromConnection）时，我才会得到一个 - 并且只有一个 - 帧对应于以设备的最高分辨率 - 2592x1936 捕获的实际图像。

是否可以进行设置，以便我在 didOutputSampleBuffer 中不断接收分辨率帧 - 2592x1936？然后我想将其中一些帧保存为回调中的图像，而不必通过 captureStillImageAsynchronouslyFromConnection 来捕获图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:14:56.257

视频输出不支持您在捕获静止图像时看到的全分辨率。查看[使用捕获输出从会话](http://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW26)中获取输出中给出的表格以获取支持的分辨率列表。

如果要更改分辨率，请在相机会话中设置适当的设置，如下所示：

```
cameraSession.sessionPreset = AVCaptureSessionPresetHigh; 
```

请注意，`AVCaptureSessionPresetPhoto`视频捕获是不可能的。

# gps - 如何检测电话是否在特定位置，例如商店或办公室？

> ID：14918745
> 
> 赞同：1
> 
> 时间：2013-02-17T06:57:42.373
> 
> 标签：gps, location

当用户到达物理位置时如何执行操作？估计是用GPS。例如，走进会员商店或办公地点等 - 应用程序会知道并弹出一条消息。

# php - 为什么我的联系表格只有一部分通过>

> ID：14918746
> 
> 赞同：0
> 
> 时间：2013-02-17T06:57:49.160
> 
> 标签：php

我的联系表格似乎只发送了部分信息。

我在设置的任何部分都看不出有什么不同，但系统既不发送电话号码也不发送手机号码。

## 在我的表格中，我有

```
<form method="POST" name="contactform" action="changeofaddressfour.php"> 
<p>
<label for='name'>Your Name:</label> <br>
<input type="text" name="name">
 </p>
 <p>
<label for='email'>Email Address:</label> <br>
<input type="text" name="email"> <br>
 </p>
 <p>
 <label for='phone'>Telephone Number:</label> <br>
 <input type="text" name="phone"> <br>
</p>
 <p>
<label for='mobile'>Mobile Number:</label> <br>
<input type="text" name="mobile"> <br>
 </p>
 <p>
<label for='message'>New Address:</label> <br>
<textarea name="message"></textarea>
 </p>
<input type="submit" value="Submit"><br>
</form> 
```

* * *

在另一页我有

```
 <?php
  $errors = '';
  $myemail = 'antonylambert@c5d.co.uk';//<-----Put Your email address here.
  if(empty($_POST['name']) || empty($_POST['email']) || empty($_POST['message'])) {
   $errors .= "\n Error: all fields are required";
    }
 $name = $_POST['name'];
 $email_address = $_POST['email'];
 $telephone_number = $_POST['phone'];
 $mobile_number = $_POST['mobile'];
   $message = $_POST['message'];
if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]        {2,3})$/i", $email_address)) {
   $errors .= "\n Error: Invalid email address";
 }
 if (empty($errors)) {
 $to = $myemail;
 $email_subject = "Change of Details: $name";
 $email_body = "You have received a new message. "."Here are the details:\n Name: $name      \n Email: $email_address \n Message \n $message";
$headers = "From: $myemail\n";
 $headers .= "Reply-To: $email_address";
mail($to,$email_subject,$email_body,$headers);
 //redirect to the 'ackofdetails' page
 header('Location: ackofdetailsfour.php');
exit();
 }
echo nl2br($errors); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:11:47.750

改变 `$email_body = "You have received a new message. "."Here are the details:\n Name: $name \n Email: $email_address \n Message \n $message";`

到

`$email_body = "You have received a new message. "."Here are the details:\n Name: $name \n Email: $email_address \n Telephone Number: $telephone_number \n Mobile Number: $mobile_number \n Message \n $message";`

# ios - 我可以将我的应用程序从所需的较高 iOS 版本更新为所需的较低 iOS 版本吗？

> ID：14918750
> 
> 赞同：1
> 
> 时间：2013-02-17T06:58:25.143
> 
> 标签：ios, app-store

我是一名 iOS 开发人员。我有一个部署目标为 iOS6 的应用程序。该应用程序已获得批准，现已在 AppStore 上架。我只是想知道我是否可以使用部署目标 iOS5 更新我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:19:15.657

是的，在新的更新中，只需将开发目标更改为您想要的任何内容，然后上传更新。这是一种非常普遍的做法。

# php - 用它的内容替换 div

> ID：14918752
> 
> 赞同：0
> 
> 时间：2013-02-17T06:59:21.297
> 
> 标签：php, regex, html-parsing

我正在尝试过滤 html 代码

该代码包含一个带有行类的 div

我想用那里的内容替换这些 div

例如：

```
<div class="row anotherClass">some html code 1</div>
<div class="row anotherClass">some html code 2</div>
<div class="row anotherClass">some html code 3</div> 
```

输出应该是这样的

```
some html code 1
some html code 2
some html code 3 
```

我写了以下表达式（我对正则表达式不是很好）但是输出html仍然没有很好地过滤有时div开头仍然存在有时div结尾仍然存在

```
$output = preg_replace_callback('/<div class="row (.*?)">(.*)<\/div>/s', function ($matches) {
            return $matches[2];

        }, $output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:24:55.850

你是这个意思吗？

```
<?php

$html = '<div class="row anotherClass">some html code 1</div>
<div class="row anotherClass">some html code 2</div>
<div class="row anotherClass">some html code 3</div>';

$reg = '(<div class="row anotherClass">(.*?)</div>)';
preg_match_all($reg, $html, $divs);

$div_contents = $divs[1];
$divs = $divs[0];

$replaced_html = $html;

for ($i=0; $i < count($divs); $i++) {
    $replaced_html = str_replace($divs[$i], $div_contents[$i], $replaced_html);
}

echo $replaced_html;

?> 
```

# intellij-idea - jetty 9 和 intellij 无法启动

> ID：14918756
> 
> 赞同：4
> 
> 时间：2013-02-17T07:00:37.193
> 
> 标签：intellij-idea, jetty

我正在与 intellij 一起玩一个新项目，但遇到了一些问题。当我尝试从 intellij 12 运行 jetty 9 时，出现此错误

```
"C:\Program Files\Java\jdk1.7.0_13\bin\java" -DSTOP.PORT=0 -Dcom.sun.management.jmxremote= -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -DOPTIONS=jmx -Didea.launcher.port=7553 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\bin" -Dfile.encoding=windows-1252 -classpath "start.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain org.eclipse.jetty.start.Main etc/jetty-jmx.xml C:\Users\willie\AppData\Local\Temp\context9038140457899104277config\jetty-contexts.xml
[2013-02-17 01:49:18,784] Artifact Armor:war exploded: Server is not connected. Press 'Deploy' to start deployment.
2013-02-17 01:49:20.055:WARN:oejx.XmlParser:main: FATAL@file:/C:/Code/jetty-9.0.0.RC0/start.d/ line:1 col:1 : org.xml.sax.SAXParseException; systemId: file:/C:/Code/jetty-9.0.0.RC0/start.d/; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.jetty.start.Main.invokeMain(Main.java:453)
    at org.eclipse.jetty.start.Main.start(Main.java:595)
    at org.eclipse.jetty.start.Main.main(Main.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.xml.sax.SAXParseException; systemId: file:/C:/Code/jetty-9.0.0.RC0/start.d/; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1388)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:998)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:204)
    at org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:220)
    at org.eclipse.jetty.xml.XmlConfiguration.<init>(XmlConfiguration.java:138)
    at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1209)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1160)
    ... 12 more

Usage: java -jar start.jar [options] [properties] [configs]
       java -jar start.jar --help  # for more information

Process finished with exit code -2
Disconnected from server 
```

这是基本系统。我已经删除了配置文件，重新创建了它，我已经下载了另一个码头副本，我已经做了我能想到的一切。奇怪的是 start.d 文件夹中唯一的东西是发行版附带的默认测试 ini 文件。我打开了ini文件引用的xml文件，没有任何问题。我完全被难住了。有谁知道这里会发生什么？

更新，码头从命令行运行得很好，但不是从 Intellij

更新 2，似乎 IntelliJ 进行部署的方式是通过插件，它创建了一个新的 jetty-contexts.xml 文件。该文件似乎是码头不喜欢的。这是文件

```
<?xml version="1.0"  encoding="UTF-8"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
<Configure class="org.eclipse.jetty.server.Server" id="Server">
    <Ref id="DeploymentManager">
        <Call name="addAppProvider">
            <Arg>
                <New class="org.eclipse.jetty.deploy.providers.ContextProvider">
                    <Set name="monitoredDir">C:\Users\willie\AppData\Local\Temp\context7950837742823871110deploy</Set>
                    <Set name="scanInterval">1</Set>
                </New>
            </Arg>
        </Call>
    </Ref>
</Configure> 
```

和一个新的转储，现在我已经删除了测试战争并从配置中删除了 start.d。

```
"C:\Program Files\Java\jdk1.7.0_13\bin\java" -DSTOP.PORT=0 -Dcom.sun.management.jmxremote= -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -DOPTIONS=jmx -Didea.launcher.port=7538 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\bin" -Dfile.encoding=windows-1252 -classpath "start.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain org.eclipse.jetty.start.Main etc/jetty-jmx.xml C:\Users\willie\AppData\Local\Temp\context826007528789372946config\jetty-contexts.xml
[2013-02-17 05:38:31,987] Artifact Armor:war exploded: Server is not connected. Press 'Deploy' to start deployment.
2013-02-17 05:38:33.509:WARN:oejx.XmlConfiguration:main: Config error at <Call name="addAppProvider"><Arg>|????<New class="org.eclipse.jetty.deploy.providers.ContextProvider"><Set name="monitoredDir">C:\Users\willie\AppData\Local\Temp\context7950837742823871110deploy</Set><Set name="scanInterval">1</Set></New>|???</Arg></Call> java.lang.ClassNotFoundException: org.eclipse.jetty.deploy.providers.ContextProvider in file:/C:/Users/willie/AppData/Local/Temp/context826007528789372946config/jetty-contexts.xml
2013-02-17 05:38:33.510:WARN:oejx.XmlConfiguration:main: Config error at <Ref id="DeploymentManager"><Call name="addAppProvider"><Arg>|????<New class="org.eclipse.jetty.deploy.providers.ContextProvider"><Set name="monitoredDir">C:\Users\willie\AppData\Local\Temp\context7950837742823871110deploy</Set><Set name="scanInterval">1</Set></New>|???</Arg></Call></Ref> java.lang.ClassNotFoundException: org.eclipse.jetty.deploy.providers.ContextProvider in file:/C:/Users/willie/AppData/Local/Temp/context826007528789372946config/jetty-contexts.xml
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.jetty.start.Main.invokeMain(Main.java:453)
    at org.eclipse.jetty.start.Main.start(Main.java:595)
    at org.eclipse.jetty.start.Main.main(Main.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.deploy.providers.ContextProvider
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.jetty.util.Loader.loadClass(Loader.java:100)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.nodeClass(XmlConfiguration.java:354)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:743)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.itemValue(XmlConfiguration.java:1111)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.value(XmlConfiguration.java:1016)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.call(XmlConfiguration.java:710)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:407)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.refObj(XmlConfiguration.java:819)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:419)
    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:344)
    at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:262)
    at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1221)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1160)
    ... 12 more

Usage: java -jar start.jar [options] [properties] [configs]
       java -jar start.jar --help  # for more information 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:44:28.387

的使用`org.eclipse.jetty.start.Main`意味着从完整的码头分布中使用。

它只是建立正确的类路径和配置 xml 的引导程序，最终将启动 Jetty。

你的命令行可能（我没有测试过）看起来像这样......

```
"C:\Program Files\Java\jdk1.7.0_13\bin\java" 
  -Djetty.home=C:\path\to\jetty\distribution
  -DSTOP.PORT=0 
  -Didea.launcher.port=7553 
  "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\bin"
  -Dfile.encoding=windows-1252
  -jar start.jar
  "-Dpath=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\lib\idea_rt.jar"
  org.eclipse.jetty.start.Main 
```

请注意，您可能需要以下...

*   定义`jetty.home`属性，以便码头知道在哪里寻找它的文件
*   通过可`-Dpath=${classpath}`配置的方式定义额外的 IntelliJ jar，jetty 将传递到正在运行的服务器中
*   要在中定义 IntelliJ 属性`${jetty.home}/start.ini`
*   要`OPTIONS`在`${jetty.home/start.ini`
*   要在`${jetty.home}/start.ini`
*   将您的自定义`jetty-context.xml`放入`${jetty.home}/webapps/`目录中，或将部署目录（在 中`etc/jetty-deploy.xml`）更改为您的 jetty-context.xml 文件所在的位置。确保对战争文件的引用有意义。

最后，知道您可以使用命令行选项轻松地询问码头服务器类路径的外观，该选项`--version`将根据您配置的内容列出服务器将使用的类路径（按照服务器使用它的顺序）启动引导过程。

# c# - 文本框可见属性

> ID：14918757
> 
> 赞同：2
> 
> 时间：2013-02-17T07:00:44.353
> 
> 标签：c#

我目前正在使用文本框上的可见属性。下面我复制粘贴了我的代码片段。我的表单中有几个文本框。尝试编写它会变得非常乏味，就像我在下面为所有文本框所做的那样。有没有办法将我的代码压缩到几行以使文本框可见？

```
 public void makeVisible()
    {
        textBox1.Visible = true;
        textBox2.Visible = true;
        textBox3.Visible = true;
        textBox4.Visible = true;
        //etc.

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:03:01.267

试试这个：

```
foreach(Control c in Controls)
{
 TextBox tb = c as TextBox;
 if (tb !=null) tb.Visible = false; //or true, whatever.
} 
```

对于有限的文本框：

```
int count = 0;  
int txtBoxVisible = 4;  
foreach(Control c in Controls)
{
    if(count <= txtBoxVisible)
    {
        TextBox tb = c as TextBox;
        if (tb !=null) tb.Visible = false; //or true, whatever.
        count++;
    }
} 
```

您可以`txtBoxVisible`根据自己的需要进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:04:08.253

将文本框放入数组中并循环遍历数组或

将文本框放在面板、网格、组中……并更改该容器的可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:08:08.580

使用类似于以下内容的内容：

```
foreach (TextBox textBox in container.Controls.Cast<Control>().OfType<TextBox>())
{
    textBox.Visible = value;
} 
```

* * *

请参阅以下内容：

[LINQ（语言集成查询）](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)

[Enumerable.Cast 方法](http://msdn.microsoft.com/en-us/library/bb341406.aspx)

[Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

# php - 如何同步两个mysql数据库，当它们都有新条目时

> ID：14918761
> 
> 赞同：3
> 
> 时间：2013-02-17T07:01:17.243
> 
> 标签：php, mysql, database, localhost, sync

我在 localhost 上为我们的局域网（一个 php 应用程序）安装了 mysql 数据库，并且在我的在线服务器上安装了用于远程用户的相同应用程序和数据库的另一个副本。

有几个条目存在主键问题： **如果**用户在在线服务器上输入带有主键 #4 的新记录，而在本地服务器上已经存在带有主键 #4 的不同记录，则应用程序将遇到问题。

**注意：由于带宽有限，我无法将本地服务器联机。所以毫无疑问我应该将在线服务器用于本地和远程**

那么谁能告诉我如何同步我的两个数据库而不会遇到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T13:08:01.897

我建议您使用的是 MySQL Master-Master 复制。我自己在笔记本电脑和主计算机上使用它来相互同步 MySQL 数据库（两个开发环境）。

假设在线服务器是服务器 1，局域网服务器是服务器 2。您应该将以下代码添加到服务器 1 上 MySQL 的 my.ini 文件中

```
#Config for server 1
server-id=1
log-bin=mysql-logbin
log-slave-updates
replicate-same-server-id=0
auto_increment_increment=2
auto_increment_offset=1
report-host=#IP ADDRESS of server 1#
binlog-ignore-db=MySQL 
```

和服务器 2 上的 my.ini 文件

```
#Config for server 2
server-id=2
log-bin=mysql-logbin
log-slave-updates
replicate-same-server-id=0
auto_increment_increment=2
auto_increment_offset=2
report-host=#IP ADDRESS of server 2#
binlog-ignore-db=MySQL 
```

比在 phpmyadmin 中，您可以创建“复制”用户。在服务器 1 上添加一个用户，并使用服务器 1 的用户数据从服务器 2 连接到服务器 1。现在服务器 2 是服务器 1 的从属服务器。相反，您也可以这样做：在服务器 2 上创建一个复制用户，然后将其添加到服务器 1。现在两台服务器都是彼此的主服务器，并且将始终保持同步！

需要考虑的重要一点是，在线服务器需要能够访问 LAN 服务器，因此您可能需要设置网络地址转换或一些端口转发。

如果您不希望两台服务器一直同步，但想要解决主键问题，那么只需将其添加到两台服务器上的 my.ini 即可。

```
#Config for server 1
auto_increment_increment=2
auto_increment_offset=1

#Config for server 2
auto_increment_increment=2
auto_increment_offset=2 
```

现在服务器 1 将只使用 1, 3, 5, 7, 9, 11... 作为主键，服务器 2 将只使用 2, 4, 6, 8, 10, 12... 作为主键。这样你的问题就解决了。

注意：我发现使 Master-Master 复制工作的最佳方法是从两台服务器上的数据库中删除所有内容。比重置所有日志文件（这可以通过从“数据”目录中删除它们并在其他文件中编辑一些数字来手动完成），但也可以通过命令完成（非常节省）。然后，设置复制用户。由于两台服务器都是空的并且没有日志，因此没有任何反应。最后，将所有数据库添加到其中一台服务器，几秒钟内两个数据库应该同步！

祝你好运！

# python - 生成postgresql用户密码

> ID：14918763
> 
> 赞同：12
> 
> 时间：2013-02-17T07:01:35.237
> 
> 标签：python, postgresql

我试图从 Python生成`postgres`使用密码。`hashlib`

```
>>> import hashlib
>>> hashlib.md5("psql123").hexdigest()
2636d1ddc54901f98d011ffe050c0eb7 
```

但是postgresql需要`md5`前缀，所以

```
sudo -u postgres psql
ALTER USER postgres PASSWORD 'md52636d1ddc54901f98d011ffe050c0eb7'; 
```

`psql123`但是，如果我用作密码，身份验证将失败。

如果我使用`passlib`，我很好。见[http://pythonhosted.org/passlib/lib/passlib.hash.postgres_md5.html](http://pythonhosted.org/passlib/lib/passlib.hash.postgres_md5.html)

`psql123`使用密码执行以下操作是可以的。

```
ALTER USER postgres PASSWORD 'md556074e7318bd4cee558faab0678a2fad'; 
```

我不明白警告`passlib`想说什么。可以为`postgres`用户使用此哈希吗？此外，它在文档中的哪个位置说`username`必须是输入的一部分？

我认为这就是为什么`postgres`无法理解`hashlib`. 作为 LDAP 用户，我可以在 shell 中生成密码。postgres 有内置命令吗？有吗`psycopg2`？好像没有。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T16:50:28.500

Postgres 的密码哈希与您所做的非常接近，它只需要包含用户名，如下所示：

```
 pghash = "md5" + hashlib.md5(password + username).hexdigest() 
```

AFAIK，postgres 文档根本没有真正记录这种散列格式，并且似乎假设管理员很少直接处理这些散列:(据我所知，没有用于生成这些散列的内置方法。如果提供给`ALTER USER`命令不符合 postgres 哈希格式，它假定密码尚未经过哈希处理，并在内部处理 - 根据[CREATE ROLE](http://www.postgresql.org/docs/9.1/static/sql-createrole.html "创建角色")的 ENCRYPTED 关键字的文档。（恕我直言，这是一个有缺陷的行为，因为如果哈希取决于用户名，这意味着哈希不能在不同的帐户之间复制和粘贴，当帐户重命名时会中断，并且（猜测熵）只有约 6 位有效盐）。

passlib 的哈希文档顶部的警告可能更清楚。它旨在警告浏览 passlib 文档的人：1）此哈希非常不安全，2）他们不应该将其用于自己的应用程序中，以及 3）它仅适用于使用postgres 用户帐户，因为它是 postgres 对其自己帐户支持的最强（也是唯一）哈希格式。

（如果您尝试使用 postgres 为您自己的应用程序的用户帐户散列密码，我强烈支持 Clodoaldo 的建议，即通过 pgcrypto 扩展使用 bcrypt）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T11:43:28.520

```
alter user postgres ENCRYPTED password 'psql123'; 
```

对于其他用途，请使用该[`pgcrypto`](http://www.postgresql.org/docs/current/interactive/pgcrypto.html)模块。

```
create table "user" (name text, password_hash text);

insert into "user" (name, password_hash) values
('u1', crypt('psql123', gen_salt('bf')));

select * from "user";
 name |                        password_hash                         
------+--------------------------------------------------------------
 u1   | $2a$06$SeH4u4aRtT2Zr39er4eSiONT/0IBQHYMbQXn2RauPJKCYdNX1.58G

select name, password_hash = crypt('psql123', password_hash)
from "user"
;
 name | ?column? 
------+----------
 u1   | t 
```

以登录目标数据库的超级用户身份安装它：

```
create extension pgcrypto; 
```

# c++ - 在 C++ 中，将基类作为复制构造函数的构造函数是否算作复制构造函数？

> ID：14918764
> 
> 赞同：4
> 
> 时间：2013-02-17T07:02:08.170
> 
> 标签：c++, inheritance, copy-constructor, copy-assignment

例如：

```
class Derived : public Base
{
    Derived(const Base &rhs)
    {
        // Is this a copy constructor?
    }
    const Derived &operator=(const Base &rhs)
    {
        // Is this a copy assignment operator?
    }
}; 
```

1.  显示的构造函数是否算作复制构造函数？
2.  显示的赋值运算符算作复制赋值运算符吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T07:03:05.893

> **显示的构造函数是否算作复制构造函数？**

不，它**不算**作**复制构造函数**。
它只是一个**转换构造函数**而不是复制构造函数。

**C++03 标准复制类对象** **第 2 段：**

> 类的非模板构造函数`X`是复制构造函数，如果它的第一个参数是,或类型`X&`，并且没有其他参数或者所有其他参数都有默认参数。`const X&``volatile X&``const volatile X&`

* * *

> **显示的赋值运算符算作复制赋值运算符吗？**

不，它没有。

**C++03 标准 12.8 复制类对象** **第 9 段：**

> 用户声明的复制赋值运算符`X::operator=`是类的非静态非模板成员函数，只有`X`一个类型为`X`、`X&`、或的参数。`const X&``volatile X&``const volatile X&`

* * *

**[在线样品：](http://ideone.com/abwVLb)**

```
#include<iostream>
class Base{};
class Derived : public Base
{
   public:
    Derived(){}
    Derived(const Base &rhs)
    {
       std::cout<<"\n In conversion constructor";
    }
    const Derived &operator=(const Base &rhs)
    {
        std::cout<<"\n In operator=";
        return *this;
    }
};

void doSomething(Derived obj)
{
    std::cout<<"\n In doSomething";
}
int main()
{
    Base obj1;
    doSomething(obj1);

    Derived obj2;
    obj2 = obj1;    
    return 0;
} 
```

**输出：**

```
In conversion constructor
In doSomething
In operator= 
```

# jquery - 在MVC4中通过javascript更新记录的正确方法

> ID：14918765
> 
> 赞同：0
> 
> 时间：2013-02-17T07:02:09.327
> 
> 标签：jquery, asp.net-mvc, fullcalendar

我想通过 mvc4\EF5 中的 javascript async 更新数据库中的记录。
所以，我有 js 对象`Id, StartDate, EndDate`。我应该呈现隐藏的编辑表单、粘贴值和提交表单吗？有没有更简单的方法？我可以向控制器添加一个允许我编辑记录的智能操作吗？（AFAIK，通过 GET 编辑记录是不安全的）。
* 我正在使用[fullcalendar](http://arshaw.com/fullcalendar/docs/event_ui/)并希望在计划事件调整大小时向数据库发送更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:15:45.400

您可以使用以下代码编辑对象：

```
function onUpdate(event) {
    $.post(
        '@Url.Action("Update")', 
        { id: event.id, startdate: event.start, enddate: event.end }
    ).done(function() {
        alert('Update success');
    });
} 
```

您还应该避免通过 GET 请求操作数据。考虑有人会向您发送带有缩小链接的电子邮件（因此您不知道它是什么）以编辑您的记录并单击它的情况。为了防止这种情况添加到您的操作 HttpPost 属性并考虑使用[AntiForgeryToken](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)

# ruby - 了解 Ruby 继承

> ID：14918769
> 
> 赞同：6
> 
> 时间：2013-02-17T07:02:39.280
> 
> 标签：ruby, inheritance

我一直在阅读 Well Grounded Rubyist，它提到了一个类如何继承其超类的实例方法，以便该类的对象能够调用这些实例方法。这是一个例子：

```
class C
  def run_instance_method
    puts "This is an instance method."
  end
  def C.run_class_method
    puts "This is a class method."
  end
end

class D < C
end 
```

根据我所读到的内容，总是描述类 D 将仅继承类 C 的实例方法（在这种情况下，C::run_class_method 不会被 D 继承）。但是，运行上面的代码后，我注意到：

```
D.run_class_method # => "This is a class method." 
```

这是我对为什么会发生这种情况的猜测，如果这是正确的理解，请告诉我。如果存在类 D 的实例 d，并且您尝试运行 d.run_instance_method，则该对象将搜索其方法查找路径，并查看该方法是否在其单例类、它自己的类或它的超类中定义。由于 run_instance_method 是在 C 类中定义的，因此不会出现任何问题，并且会调用 run_instance_method。对于类对象 D（它是 C 和 Object 的子类），如果调用 D.run_class_method，它将再次检查 D 类对象的方法查找路径。同样，Ruby 会在类对象 C 中找到它。

这个推理准确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T08:05:43.293

类方法可以像实例方法一样被继承和覆盖。如果您的父类定义了一个类方法，则子类继承该方法。也就是说，如果你的子类没有定义它自己的类方法，那么它继承自它的超类。

作为建议：当使用显式接收器调用类方法时，应避免依赖继承。始终通过定义它的类调用类方法。否则，依赖您的代码的人很难找到定义类方法的父类。

回到您最初的假设：从子类调用类方法是可能的，因为类方法是`eigenclass`.

```
class C
   # instance methods goes here
   class << self # open the eigenclass
   # class methods go here as instance methods of the eigenclass
   end
end 
```

一般来说，将类方法定义为单独的单例方法而不显式打开特征类会更清楚。

要获得清晰的解释，请阅读David Flanagan 和 Yukihiro Matsumoto[的 The Ruby Programming Language](https://rads.stackoverflow.com/amzn/click/com/0596516177)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:19:42.753

不是很准确。这里隐藏了另一个概念，称为`metaclass`or `eigenclass`。类方法继承自eigenclass。有关它的更多信息，请参阅[Ruby 黑客指南](http://rhg.rubyforge.org/chapter04.html)。（如果您不想全部阅读，只需在页面中搜索“类方法”即可。）

# java - 如何决定一个方法必须同步

> ID：14918770
> 
> 赞同：-1
> 
> 时间：2013-02-17T07:02:45.503
> 
> 标签：java, multithreading

在此[测试线程代码](http://math.hws.edu/javanotes/source/ThreadTest2.java)中的代码中，一个线程调用了两个方法`addToTotal()`，`countPrimes()`但只有前者被标记为同步。

执行时防止交错`countPrimes()`的原因。`countPrimes()`i、min、max、count 等使用的变量不也是共享资源吗？那么`isPrime()`which is called by`countPrimes()`呢？

```
 public class ThreadTest2 {

    private static final int START = 3000000;

    private static int total;

    synchronized private static void addToTotal(int x) {
        total = total + x;
        System.out.println(total + " primes found so far.");
    }

    private static class CountPrimesThread extends Thread {
        int count = 0;
        int min, max;
        public CountPrimesThread(int min, int max) {
            this.min = min;
            this.max = max;
        }
        public void run() {
            count = countPrimes(min,max);
            System.out.println("There are " + count + 
                " primes between " + min + " and " + max);
            addToTotal(count);
        }
    }

    private static void countPrimesWithThreads(int numberOfThreads) {
        int increment = START/numberOfThreads;
        System.out.println("\nCounting primes between " + (START+1) + " and " 
            + (2*START) + " using " + numberOfThreads + " threads...\n");
        long startTime = System.currentTimeMillis();
        CountPrimesThread[] worker = new CountPrimesThread[numberOfThreads];
        for (int i = 0; i < numberOfThreads; i++)
            worker[i] = new CountPrimesThread(START+i*increment+1, START+(i+1)*increment );
        total = 0;
        for (int i = 0; i < numberOfThreads; i++)
            worker[i].start();
        for (int i = 0; i < numberOfThreads; i++) {
            while (worker[i].isAlive()) {
                try {
                    worker[i].join();
                } catch (InterruptedException e) {
                }
            }
        }
        long elapsedTime = System.currentTimeMillis() - startTime;
        System.out.println("\nThe number of primes is " + total + ".");
        System.out.println("\nTotal elapsed time:  " + (elapsedTime/1000.0) + " seconds.\n");
    }

    public static void main(String[] args) {
        int processors = Runtime.getRuntime().availableProcessors();
        if (processors == 1)
            System.out.println("Your computer has only 1 available processor.\n");
        else
            System.out.println("Your computer has " + processors + " available processors.\n");
        int numberOfThreads = 0;
        while (numberOfThreads < 1 || numberOfThreads > 5) {
            System.out.print("How many threads do you want to use  (from 1 to 5) ?  ");
            numberOfThreads = TextIO.getlnInt();
            if (numberOfThreads < 1 || numberOfThreads > 5)
                System.out.println("Please enter 1, 2, 3, 4, or 5 !");
        }
        countPrimesWithThreads(numberOfThreads);
    }

    private static int countPrimes(int min, int max) {
        int count = 0;
        for (int i = min; i <= max; i++)
            if (isPrime(i))
                count++;
        return count;
    }

    private static boolean isPrime(int x) {
        int top = (int)Math.sqrt(x);
        for (int i = 2; i <= top; i++)
            if ( x % i == 0 )
                return false;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T07:08:31.717

`countPrimes`不需要同步，因为它不访问任何共享变量（它只适用于参数和局部变量）。所以没有什么要同步的。

另一方面，`total`变量是从多个线程更新的，需要同步访问以确保正确性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T13:30:08.880

> 执行 countPrimes() 时是什么阻止了交错？

没有。我们不需要阻止它（见下文）。而且由于我们不需要，防止交错将是一件坏事，因为它会降低并行性。

> `countPrimes()`like `i`, `min`, `max,`count`使用的变量不也是共享资源吗？

不，它们是当前线程的本地；即到其`run()`方法调用正在进行的线程。没有其他东西共享它们。

> 那么`isPrime()`which is called by`countPrimes()`呢？

同样的交易。它只使用局部变量，因此不需要同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:09:37.037

synchronized 关键字只是获取某个对象的监视器。如果另一个线程已经拥有监视器，它将必须等待该线程完成，然后才能获取它并继续。任何在公共对象上同步的代码都不能同时运行，因为在任何给定时间只有一个线程可以获取该对象上的监视器。在使用方法的情况下，监视器是隐式的。对于非静态方法，它是调用它的实例，对于静态方法，它是调用它的类型的类。

这是一个可能的原因，但它几乎不能准确指示何时使用关键字。

为了回答这个问题，我想说，只要您不希望两个线程同时执行基于公共监视器的关键部分，您就可以使用同步。您需要这个的情况很多，并且充斥着太多的陷阱和例外，无法完全解释。

您不能通过同步来阻止对整个班级的访问。您可以使每个方法同步，但这仍然不是一回事。另外，它只阻止其他线程在同一监视器上同步时访问关键部分。

# javascript - 在响应模式下单击按钮时如何使“navbar-fixed-bottom”向上滑动？（引导）

> ID：14918773
> 
> 赞同：3
> 
> 时间：2013-02-17T07:03:37.967
> 
> 标签：javascript, html, css, twitter-bootstrap

目前，当在手机屏幕或窄窗口上按下按钮时，底部的 Twitter Bootstrap 导航栏（用作页脚）会“向下”滑动。

我希望菜单“向上”滑动而不是默认的“向下”滑动。关于如何使用 twitter bootstrap 执行此操作的任何想法？

导航栏页脚的视图层使用的代码如下：

```
<footer id="footer" class="navbar navbar-fixed-bottom">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar dropup" data-toggle="collapse" data-target=".show-footer">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <div class="nav-collapse collapse show-footer">
                <nav>
                    <ul class="nav pull-right">
                        <%= g_about_link(yield(:title)) %>
                        <%= g_contact_link(yield(:title)) %>
                        <%= g_faq_link(yield(:title)) %>
                        <%= g_careers_link(yield(:title)) %>
                        <%= g_privacy_link(yield(:title)) %>
                        <%= g_quotes_link(yield(:title)) %>
                        <%= g_terms_link(yield(:title)) %>
                        <li><a href="http://news.railstutorial.org/" target="_blank">News</a></li>

                    </ul>
                </nav>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</footer> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T03:48:21.587

使用 show() 事件回调滚动到页面底部：

[http://jsfiddle.net/Apx5N/2/](http://jsfiddle.net/Apx5N/2/)

```
$(function() {
  $('.collapse.show-footer').on('show', function () {
    $("html, body").animate({ scrollTop: $(document).height() }, "slow");
  });
});

<div class="container">
  ...

  <div class="nav-collapse show-footer collapse"> ... </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-24T00:16:55.107

对于那些使用 Bootstrap 3 的人，事件“show”现在已重命名为“show.bs.collapse”，因此函数如下所示：

```
$(function() {
$('.collapse.show-footer').on('show.bs.collapse', function () {
    $("html, body").animate({ scrollTop: $(document).height() }, "slow");
  });
}); 
```

[引导折叠文档](http://getbootstrap.com/javascript/#collapse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:20:28.543

引导程序中有一个类可以解决所有问题`dropup`。使用它，它会自动弹出下拉菜单的下拉菜单

# javascript - 为什么 concat 空字符比 .toString() 快？

> ID：14918778
> 
> 赞同：4
> 
> 时间：2013-02-17T07:04:18.047
> 
> 标签：javascript, performance, algorithm, optimization

我有这个代码：

```
var boo = 123123; 
```

我想将该数字转换为字符串，并且**conact 字符串**比原生 JavaScript **.toString()**更快：

*更快*：

```
var foo = boo + ""; 
```

*较慢*：

```
var foo = boo.toString(); 
```

jsPerf：http: [//jsperf.com/concat-string-vs-tostring](http://jsperf.com/concat-string-vs-tostring)

为什么**.toString()**比连接空字符慢？最后我想知道使用`+ ""`技术而不是正确的方法是`.toString()`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:06:52.820

结果会因使用的 javascript 引擎而异。在 chrome 上，我得到与 Afshin 相同的结果。

那么为什么实际上一个比另一个慢呢？这是因为在`toString`V8 中将再调用一次 C 函数。您可以尝试自己查看以下内容：

*   在 chrome 中打开空标签（以避免已打开页面的任何副作用）
*   打开开发者工具
*   打开配置文件选项卡并开始新的配置文件
*   转到控制台选项卡并插入`script1`脚本，按 Enter。
*   再次转到 Profile 并停止分析
*   重复相同的`script2`

*   脚本1：`var boo = 123123; var foo = boo + "";`

*   脚本 2：`var boo = 123123; var foo = boo.toString();`

在我的情况下，首先将导致下一个堆栈跟踪：

```
 InjectedScript.evaluate
    InjectedScript._evaluateAndWrap 
```

而第二个：

```
 InjectedScript.evaluate
    InjectedScript._evaluateAndWrap
      InjectedScript._evaluateOn
        evaluate 
```

我认为这更多地与引擎内部有关，而不是官方的 js 规范，并且可能可以优化为使用相同的代码路径。

# iphone - Interface Builder 不允许连接到自定义 UIView 类？

> ID：14918781
> 
> 赞同：9
> 
> 时间：2013-02-17T07:04:25.693
> 
> 标签：iphone, ios, ipad, uiview, iboutlet

使用 Xcode 4.3.3，我无法弄清楚如何将自定义 UIView 类中的插座与在 Interface Builder 中创建的对象连接起来。

在一个 ViewController 中，我有各种按钮、滑块等，我试图将它们组合到视图中。所以，在 IB 的那个 ViewController 中，我添加了 3 个视图。在任何给定时间，只有 1 个视图可见。

我派生了自定义 UIView 类来处理这 3 个视图中的每一个。我的视图控制器实例化了每个类。我在 IB 中选择了视图，打开了身份检查器并将类设置为我的自定义类。但是，当我尝试将连接从视图和/或其组成控件拖动到自定义视图的 .h 文件时，IB 不会添加连接。

IB 允许我通过拖动到父视图控制器的 .h 来添加插座/操作，但不能拖动到自定义视图的 .h 文件。我想一旦我将视图的类设置为我的自定义类，我可以将视图组件的出口拖到我的自定义类而不是视图控制器中。

这个问题似乎与我的相同：[如何将 UIview 插座连接到自定义子视图](https://stackoverflow.com/questions/12975880/how-to-connect-uiview-outlets-to-a-custom-subview)这两种解决方案（手动添加插座和在 IB 中设置视图的类）并没有改变我的行为。这是我添加的手动插座：

customView3.h

```
#import <UIKit/UIKit.h>

@interface customView3 : UIView

@property (retain) IBOutlet customView3 *view3;
@property (retain) IBOutlet UISlider *slider;

@end 
```

customView3.m

```
#import "customView3.h"

@implementation customView3

@synthesize view3, slider;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    // Initialization code
    }
    return self;
}
@end 
```

我在这里想念什么？为了将插座添加到我的自定义 UIView 而不是视图控制器，我还需要设置/检查什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-06T17:15:39.350

请注意，我今天确实让它工作了，但是必须在派生类中手动插入/键入插座，然后我可以从头文件拖动到情节提要中的 UI 元素，但不能反过来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T20:44:28.100

我用苹果打开了一个错误。如果发生任何有趣的事情，我会更新这个答案。

2013 年 10 月 4 日更新：经过大量研究，问题的根源似乎在于 IB 认为我正在尝试将对象连接到类中的属性，然后我将创建一组这样的实例类，然后 IB 将无法判断哪个实例应该处理消息。因此，它不允许连接，因为我认为我（可能）在类的多个实例中从一个对象同时连接到属性的多个副本。

我的观点是我只想要一个自定义 UIView 的实例，并且我应该能够告诉 IB，“不要惊慌，你只处理这个实例。”

我现在专注于一个新项目，还没有机会在 Xcode 5 中重试；但是，鉴于上述信息，我也不乐观它会在 Xcode 5 中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T00:42:33.810

您正在尝试做的事情当然是明智的（IMO）和可能的。然而，在子视图中建立与插座的连接时，XCode 相当古怪。

我发现清理、重建和有时重新启动 XCode 往往会有所帮助，但有时它只是不起作用。在某些情况下，我通过手动创建插座并从插座拖动到控件而不是其他方式来使其工作。

我知道，这不是很有帮助，但我只是想明确说明这*应该*可以工作，而当它不起作用时，这肯定是由于 XCode 中的错误造成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T13:29:24.397

根据我的经验，您将 IBAction 和 IBOutlet 添加到 UIViewController 的子类而不是 UIView 的子类。因此，在 MVC 模型中，您的“1” UIViewController 中包含所有这些 IBOutlets，然后您使用来自这些 IBOutlets 的数据来更新您的视图。

因此，您可以在 IB 中创建 UIViews 对象，然后在代码中创建相应的类，然后将 IB 中的 UIViews 对象的类更改为您的 UIView 子类。只需将所有 IBOutlets 放入包含所有 UIViews 的 UIViewController 中，从 IBOutlets 获取您需要的值，然后将它们传递给（设置）您的 UIView 子类。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-09T06:01:39.917

我遇到了同样的问题并找到了解决方法：

1）打开助手编辑器，左边是customView3.xib，右边是customView3.h

2) ctrl + 从customView3.xib中的UISlider拖动到右边的customView3.h代码

3) 将弹出一个创建新插座连接的选项。

4）命名连接并单击连接

然后它将创建一个连接的 IBOutlet。

# kernel - QNX 内核二进制文件名是什么

> ID：14918783
> 
> 赞同：0
> 
> 时间：2013-02-17T07:05:25.883
> 
> 标签：kernel, qnx, qnx-neutrino

我正在开发一个项目，其中底层内核来自 QNX，所有内核源都以二进制形式提供，例如块驱动程序的 CAM 层以 libcam.a 的形式存在，但找不到应该完整存在的确切内核二进制文件项目的源代码树。

谁能告诉我有什么方法可以找到它？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:26:44.823

正在运行的内核将是 PID 为 1 的进程。使用`ps -e`来查看它。

在我的情况下，它是`procnto`. 如果您正在运行检测内核（用于调试），则它是`procnto-instr`.

```
 ps -e
       PID TTY          TIME CMD
         1 ?        12:25:42 procnto
      4098 ?        00:00:00 pci-bios
      4099 ?        03:40:47 io-usb
      4100 ?        00:00:00 io-hid
      4101 ?        00:00:00 devc-con-hid
      4102 ?        00:58:14 devb-eide
     20487 ?        00:00:00 /sbin/tinit
     20488 ?        00:00:00 slogger
     24585 ?        00:00:25 pipe
     28682 ?        00:10:22 mqueue 
```

根据您制作 IFS 文件的方式，您可以拥有一个 .build 文件，其中包含以下内容：

```
#
# The build file for QNX Neutrino booting on a PC
#
[linker="ntox86-ld -T$QNX_TARGET/x86/lib/nto.link %(h!=0, -Ttext 0x%t%)%(d!=0, -Tdata 0x%d%) -o%o %i %[M -L%^i -uinit_%n -lmod_%n%]"]
[virtual=x86,bios +compress] boot = {
    startup-bios

    # PATH is the *safe* path for executables (confstr(_CS_PATH...))
    # LD_LIBRARY_PATH is the *safe* path for libraries (confstr(_CS_LIBPATH))
    #    i.e. This is the path searched for libs in setuid/setgid executables.
    PATH=/proc/boot:/bin:/usr/bin:/opt/bin LD_LIBRARY_PATH=/proc/boot:/lib:/usr/lib:/lib/dll:/opt/lib procnto 
```

} ...

最后`procnto`一点是告诉引导加载程序使用哪个内核。查看[mkifs](http://www.qnx.com/developers/docs/6.4.1/neutrino/utilities/m/mkifs.html)以获取更多信息。

# sql-server - Importing data from MS Excel to SQL Server 2008 R2

> ID：14918784
> 
> 赞同：0
> 
> 时间：2013-02-17T07:05:52.697
> 
> 标签：sql-server, sql-server-2008, excel, data-import

I've a Microsoft Excel file with 25 columns and I used the data import wizard on SQL Server 2008 R2 studio to import it to already existing table. But, it only maps 14 columns and ignores the rest. Does it have a column number limit or there is a problem with my data?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:16:48.173

你能举一些你的数据的例子吗？

同时...当您执行导入时，我假设您正在访问`Select Source Tables and Views`页面；

![在此处输入图像描述](../Images/9081a35b3cadf7ec9e34b46402a966f0.png)

在此阶段，您可以通过按下`Edit Mappings`按钮来编辑列映射。这将显示以下屏幕；

![在此处输入图像描述](../Images/0c7be4dc3f72867110652784dd0ef967.png)

确保在那里选择了所有列。

此外，在以下屏幕上，它会警告数据中的任何不匹配；

![在此处输入图像描述](../Images/e4c57ac52aa2ca041a2445c2633b9f94.png)

您在这里看到任何警告吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:46:34.870

你可以反过来做。

步骤 1.**[在新表中导入工作表。](https://stackoverflow.com/questions/6123113/how-to-import-an-excel-file-into-sqlserver-2008)**

步骤 2.**[使用批量查询插入您的首选表](https://stackoverflow.com/questions/74162/how-to-do-insert-into-a-table-records-extracted-from-another-table)**

我认为这将解决您的**问题**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T21:07:30.270

尝试以与 ms sql 表相同的格式和结构创建 Excel 列和表结构。打开excel选择行（通过单击行号选择整行）选择整个数据直到数据结束（选择第一行到最后一行）。按 ctrl+c

编辑 ms sql 表，转到可以找到空白的最后一行。

通过单击行按钮选择该行，然后按 ctrl+v。

完成后，您的 excel 数据将被插入到 sql 表中。

我在 MS SQL 2008 中尝试过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T07:46:42.963

我对 SQL Server 不太熟悉，但据此：[Excel 文件导入到 Sql server 2008](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/a7d6aeea-3df8-4d31-bdc1-b5e968e6759e/) - Excel 的列限制为**255**，这远远超出了您的数字。最有可能的问题出在您的数据中，但是如果没有示例，就不可能说出问题所在。

# javascript - Javascript Syntax error: Unexpected token ILLEGAL

> ID：14918786
> 
> 赞同：0
> 
> 时间：2013-02-17T07:05:56.933
> 
> 标签：javascript

When i use the javascript code ( [http://jsfiddle.net/TRyhK/](http://jsfiddle.net/TRyhK/) ) :

```
var test = "@[]
@[]"; 
```

I reiceive a strange error: `SyntaxError: Unexpected token ILLEGAL`. Does anyone know how to fix it? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:11:50.580

字符串文字中的换行符可以表示为`\n`：

```
var test = "@[]\n@[]"; 
```

# jquery - jQuery Scroll to bottom of Div even after it updates?

> ID：14918787
> 
> 赞同：17
> 
> 时间：2013-02-17T07:06:04.060
> 
> 标签：jquery, scroll

So I have a page with a chat-like div that fills up with text. It has a fixed height and width (defined by css).

I need it to scroll to bottom upon every update, here's the JS I've used so far:

```
$("#div1").animate({ scrollTop: $('#div1').height()}, 1000); 
```

It works for a while and then suddenly stops... I think it might have something to do with my set height for the div? I'm not sure.

So what can I do to ensure the div scrolls down to the bottom of it's content (the content is updated using a jQuery/AJAX function)

Thanks in advance!

EDIT: I've also tried `$("#div1").animate({ scrollTop: $('#div1').height()}, 0);` but it still stops scrolling at a certain point...

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-17T07:32:12.470

您是否尝试过`.scrollHeight`：

```
$("#div1").animate({ scrollTop: $("#div1")[0].scrollHeight}, 1000); 
```

[MDN 上的 scollHeight 文档](https://developer.mozilla.org/en-US/docs/Web/API/Element.scrollHeight)

# c++ - Overloading the += operator

> ID：14918790
> 
> 赞同：3
> 
> 时间：2013-02-17T07:06:09.123
> 
> 标签：c++, operator-overloading

I have the following code to overload the + and += operators respectively for the class Date. The operator + was successfully overloaded, and it will take an integer n and increase Date objects by n days. This is done by applying the next_day function n times.

```
inline Date operator+(Date d, int n)
{
    for(char j=1; j<=n; j++){
        d=d.next_day(d);
    }
    return d;
}
inline Date operator+=(Date d, int n)
{
    Date p=d+n;
    return p;
} 
```

Having overloaded the + operator, I'm using it to define the overloading of += as well. But although no errors occurred in compilation, when I use the overloaded += it doesn't seem to have any effect.

Here's my main.cpp:

```
#include <iostream>
#include "Date.h"
using namespace std;

int main() {

Date Initialday = Date (12,1,2012);

Initialday+=1;
cout <<"Next day = "<< Initialday <<endl;

return 0;
} 
```

Running the main function still gives me 12/1/2012 instead of 12/2/2012\. What am I doing wrong? Note: I've already overloaded << to output Date objects in a readable format, so I don't think that's the issue.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T07:24:20.957

简单的解决方法是通过引用获取您的 Date 对象，对其进行修改，然后通过引用返回它。这是 的预期行为`operator+=`。

```
inline Date& operator+=(Date &d, int n)
{
    d = d + n;
    return d;
} 
```

但是，在实施`operator+=`方面`operator+`是倒退的。应该反过来。 `operator+=`应该作用于对象的成员，直接改变它们。那么`operator+`应该按照以下方式实施：

```
inline Date& operator+=(Date& lhs, int rhs)
{
    ... // code here to modify lhs directly

    return lhs;
}

inline Date operator+(Date lhs, int rhs)
{
    return lhs += rhs;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:24:54.027

主要问题是您`+=`正在创建一个新的 Date 对象并返回它。那是错误的语义，而且您没有将该返回值分配给任何东西。操作员应该作用于它所应用的`+=`实例并通过引用返回它：

```
inline Date& operator+=(Date& d, int n) {
   return d = d + n;
} 
```

通常，这将作为成员函数`+`实现，并按照以下方式实现`+=`：

```
class Date
{
 public:
    Date& operator+=(int n) {
       // perform whatever operation is required using
       // the state of the instance.
       return *this;
    }
};

inline Date operator+(Date lhs, int rhs) {
  return lhs += rhs; // calls member +=
} 
```

最简洁的方法是提供一个持续时间类，并根据 a`Date`和 a实现所有运算符`TimeDuration`：

```
struct TimeDuration { .... };

class Date
{
 public:
  Date& operator+= (const TimeDuration& rhs) { .... }
};
inline Date operator+(Date lhs, const TimeDuration& rhs) { return lhs += rhs; } 
```

# verilog - verilog output is delay by 1 clock cycle

> ID：14918791
> 
> 赞同：0
> 
> 时间：2013-02-17T07:06:11.190
> 
> 标签：verilog

i have this sample module

```
module control(input clk,input [5:0] x, input [6:0] y, 
input [7:0] done_gamestate,
output [7:0] gamestateout
    );

    wire [7:0] connector;
    state_ctrl a(clk,x,y,done_gamestate,connector);
    datapath_ctrl b(clk,connector,gamestateout);

endmodule 
```

and here is the output waveform ![enter image description here](../Images/0cbf72539ef1c5ffac5faefca61107fc.png)

Basically, how can we make module b respond at the first positive edge of the clock? It seems that the output is delay by 1 positive edge cycle.

here is the state_ctrl module

```
module state_ctrl(input clk,input [5:0] x, input [6:0] y,
input [7:0] done_gamestate,
output reg [7:0] gamestate
    );
initial begin
gamestate = 0;
end

always@(posedge clk)
begin
case(done_gamestate)
8'b0000_0001 : gamestate <= 8'b0000_0100; // init -> offsets
8'b0000_0100 : gamestate <= 8'b0000_0010; // offsets -> getcells
8'b0000_0010 : gamestate <= 8'b0001_0000; // getcells -> countcells
8'b0001_0000 : gamestate <= 8'b0000_1000; // countcells -> applyrules
8'b0000_1000 : gamestate <= 8'b0010_0000;
8'b0010_0000 : 
    begin
        if(x==8'd62 && y==8'd126)
            gamestate <= 8'b1000_0000;
        else
            gamestate <= 8'b0000_0100;
    end
8'b1000_0000 : gamestate <= 8'b0100_0000; // copy -> delay
8'b0100_0000 : gamestate <= 8'b0000_0100; // delay -> offset
default : begin
    gamestate <= 8'b00000000;
    $display ("error, check done_gamestate %b",done_gamestate); 
    end
endcase
end

endmodule 
```

and here is the datapath_ctrl module

```
module datapath_ctrl(input clk,input [7:0] gamestate,output reg [7:0] gamestateout
    );

initial begin
gamestateout = 0;
end

always@(posedge clk)
begin
   #1 case(gamestate)
    8'b00000001: gamestateout = 8'b00000001; //init
    8'b00000010: gamestateout = 8'b00000010; //getcells
    8'b00000100: gamestateout = 8'b00000100; //offsets
    8'b00001000: gamestateout = 8'b00001000; //applyrules
    8'b00010000: gamestateout = 8'b00010000; //countcells
    8'b00100000: gamestateout = 8'b00100000; //writecell
    8'b01000000: gamestateout = 8'b01000000; //delay
    8'b10000000: gamestateout = 8'b10000000; //copy
    default : begin
    gamestateout = 8'b00000000;
    $display ("error, check gamestate %b",gamestate); 
    end
endcase
end
endmodule 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:25:28.357

没有足够的信息来说明实现中是否存在错误，但我猜测存在 1 个周期延迟，因为它是同步逻辑。数据更改并且在下一个时钟沿采样，因此状态似乎在其输入更改后 1 个周期发生更改。

如果您需要立即更改输出，则必须使用组合逻辑。

# javascript - How to invoke method when foreach is rendered using Knockoutjs

> ID：14918792
> 
> 赞同：0
> 
> 时间：2013-02-17T07:06:11.717
> 
> 标签：javascript, binding, knockout.js, foreach

I create a list of items by means of the foreach binding using Knockout.js. When all the items of the foreach bindings are rendered, I would like to search for an item of a specific class called "focused" and scroll a window to that item.

That will happen only once on page load as I do not add or remove the items.

How can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:25:23.227

You can use property afterRender of foreach binding.

```
<div data-bind="foreach: { data: items, afterRender: doSomething }">
    <div data-bind="text: $data">
</div> 
```

Your viewModel:

```
var vm = {
   doSomethingInvoked: false,
   items: ko.observableArray(['apple', 'banan']),
   doSomething: function (elements) {
       if (!doSomethingInvoked) { // prevent invoking multiple times
           var offsetTop = $(elements).filter('.focus').offset().top;
           $('html,body').scrollTop(offsetTop);
           doSomethingInvoked = true;
       }
   }
}; 
```

# javascript - parse data with event listener?

> ID：14918793
> 
> 赞同：0
> 
> 时间：2013-02-17T07:06:29.947
> 
> 标签：javascript

Is there a way to parse data to a function from the event listener ?

I have this:

```
div.addEventListener('mousedown',run(id),false);

function run(e,id){
   console.log(id);
} 
```

Thing is it executes straight away. The other problem is - if i want to parse the variable `id`, and the `run` function recieves `e` for the event, how do you parse any thing else =/ It's a bit confusing to work out what order `e` is (before or after your designated variables that you want to parse)

The current work around so far was to assign `id` to window so its basically a global... but i'm wondering if parsing via the event is possible at all ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:32:14.007

事件处理程序不直接接受参数，您正在调用函数 run(id)，而不是传递处理程序，这是传递它的方式（使用匿名函数）

[https://developer.mozilla.org/en/docs/DOM/element.addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

```
div.addEventListener('mousedown',function(e){
  doSomething(id);
},false);

function doSomething(id){
  console.log(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:26:03.947

一种方法是创建一个新的侦听器函数，其中`id`变量已经绑定到您想要的值，如下所示：

```
function newListener(id) {
    var listener = function(e) {
        console.log(id);
    }
    return listener;
}
div.addEventListener('mousedown',newListener(id),false); 
```

`newListener(id)`定义了一个新函数，其中`id`变量当时的值在该函数内部可用。然后，当按下鼠标按钮时，javascript 环境将调用*该函数。*

# linux - Difference between FreeBSD scheduler and Linux Scheduler

> ID：14918797
> 
> 赞同：4
> 
> 时间：2013-02-17T07:08:03.440
> 
> 标签：linux, linux-kernel

What are the difference between FreeBSD scheduler and Linux Scheduler ?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T20:23:22.180

有几个调度程序可用。此答案假定默认调度程序：CFS (Linux) 和 ULE (FreeBSD)。

[CFS](http://lxr.linux.no/linux+v3.7.8/kernel/sched/fair.c)是*Completely Fair Scheduler*的缩写。最显着的区别是 CFS 不基于运行队列来进行进程选择。相反，它使用具有 O(log N) 复杂度的红黑树，该树由所花费的 CPU 时间索引。

另一个值得注意的细节是 CFS 使用纳秒来计算时间。从[内核陷阱](http://kerneltrap.org/node/8059)：

> CFS 使用纳秒粒度记帐，不依赖任何 jiffies 或其他 HZ 细节。因此，CFS 调度程序没有“时间片”的概念，也没有任何启发式方法。只有一个中央可调参数：
> 
> ```
>  /proc/sys/kernel/sched_granularity_ns 
> ```
> 
> 可用于将调度程序从“桌面”（低延迟）调整为“服务器”（良好的批处理）工作负载。它默认为适合桌面工作负载的设置。SCHED_BATCH 也由 CFS 调度程序模块处理。

[ULE](http://fxr.watson.org/fxr/source/kern/sched_ule.c)是传统 BSD 调度程序的继承者。它在 SMP 系统和单处理器系统上提供了很大改进的性能。它遵循更传统的设计，带有运行队列和时间片。它力求公平，但可以被指示支持交互过程。

这是ULE 的作者在研究 CFS 源时的一些发现的[链接。](http://jeffr-tech.livejournal.com/12933.html)他们还在评论中讨论了 CFS 调度程序中算法的复杂性（已引起激烈争论）。

两种调度程序都适合桌面使用。有了`kern.sched.interact`set，ULE 有利于交互过程。没有它，CFS 和 ULE 应该同样公平。

ULE 的代码行数大约为 3000 行，而 CFS 正在接近这一数字的两倍。

# iphone - How to change NSURLConnection's priority?

> ID：14918800
> 
> 赞同：2
> 
> 时间：2013-02-17T07:08:17.667
> 
> 标签：iphone, ios, nsurlconnection

I'm working on a music app, which use `ASIHTTPRequest` to access to server's api, and use `NSURLConnection` to download music files.

One music file is 10M or so. When downloading music file, access to server's api will be much more slow than not downloading music file.

So I want to change download connection's priority lower. But there is no API to change priority of `NSURLConnection` or `NSURLRequest`.

How to archive this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:19:44.730

我认为只有 NSOperationQueues 可以优先。这是一个示例的链接： http: [//eng.pulse.me/tag/nsurlconnection/](http://eng.pulse.me/tag/nsurlconnection/)

另一种方法是停止下载音乐文件，并在其他下载完成后恢复它。为此，您可以告诉 ASIHTTP 将下载保存到文件并根据请求恢复。

这是我的一个项目中的一个示例：

```
- (void) executeFileDownloadAtURL:(NSURL *) aURL toDirectory:(NSString *) aDestinationPath;
{
    self.request = [ASIHTTPRequest requestWithURL:aURL];
    [self.request setDownloadDestinationPath:aDestinationPath];
    self.request.downloadProgressDelegate = self.delegate;
    [self.request setAllowResumeForFileDownloads:YES];
    NSString *tmpDir = NSTemporaryDirectory();
    NSString *tempFilePath = [NSString stringWithFormat:@"%@%@", tmpDir, @"TempMovie.mp4"];
    [self.request setTemporaryFileDownloadPath:tempFilePath];
    self.request.showAccurateProgress = YES;
    self.request.delegate = self;
    [self.request startAsynchronous];
} 
```

# java - Configure log4j to Auto create application log files when deleted

> ID：14918802
> 
> 赞同：0
> 
> 时间：2013-02-17T07:08:33.713
> 
> 标签：java, log4j

How to configure log4j to Auto create application log files when deleted manually without restarting the server? Currently we have to restart the server if someone deletes the log files.We are using websphere application server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T11:27:41.643

我认为您在 Web 应用程序中使用 log4j，所以下面的方法可能会有所帮助：

编写一个jsp文件来重新配置log4j。把它放在 webapp flder 中。像这样：

重置.jsp

```
<%
    java.util.Properties pro = new java.util.Properties();
    pro.put("log4j.appender.A1.Threshold","INFO");
    pro.put("log4j.appender.A1","org.apache.log4j.RollingFileAppender");
    pro.put("log4j.appender.A1.File","/var/log/h3cloud.log");
    pro.put("log4j.appender.A1.MaxFileSize","100000KB");
    pro.put("log4j.appender.A1.MaxBackupIndex","5"); 
```

/* 所有 log4j.properties 内容.. */

```
 org.apache.log4j.LogManager.resetConfiguration();
    org.apache.log4j.PropertyConfigurator.configure(pro);
%> 
```

删除“/var/log/tomcat6/h3cloud.log”后，打开http: *//*/reset.jsp*，重新创建新的“/var/log/h3coud.log”。

# python - How to show help for all subparsers in argparse?

> ID：14918804
> 
> 赞同：5
> 
> 时间：2013-02-17T07:08:59.107
> 
> 标签：python, argparse

I have made a Python script that is doing a lot of actions, so it has many options, so I divided it to subparsers that also use parent parsers for common options grouping.

I want a help option that will show the help for all commands with their options, is it possible without overriding the format_help method?

I saw a [similar question](https://stackoverflow.com/questions/13020898/how-to-show-argparse-subcommands-in-groups), but the grouping is not critical for me, I just want the options there.

For example:

```
general_group = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter,add_help=False)
general_group.add_argument('--threads', action='store_true', default=False)
second_group = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter,add_help=False)
second_group.add_argument('--sleep', action='store', default=60, type=int)
parser = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter)
subparsers=parser.add_subparsers(dest='action')
subparsers.add_parser('Restart',parents=[general_group,second_group])
subparsers.add_parser('Start',parents=[general_group])

args = parser.parse_args() 
```

In this case I would like that if someone runs ./script.py -h they'll see the threads option in the help.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T13:36:26.253

问题在于：

```
subparsers=parser.add_subparsers(dest='action')
subparsers.add_parser('Restart',parents=[general_group,second_group])
subparsers.add_parser('Start',parents=[general_group]) 
```

您将`general_group`作为父级添加到子解析器，因此主解析器不知道它们，这导致`./script.py -h`not show `--threads`。如果您打算将其作为所有子解析器的父级，那么您应该将其作为顶级解析器父级：

```
parser = argparse.ArgumentParser(parents=[general_group])
subparsers=parser.add_subparsers(dest='action')
subparsers.add_parser('Restart',parents=[second_group])
subparsers.add_parser('Start') 
```

结果是：

```
$ python script.py -h
usage: script.py [-h] [--threads] {Restart,Start} ...

positional arguments:
  {Restart,Start}

optional arguments:
  -h, --help       show this help message and exit
  --threads 
```

但是请注意，在这种情况下，该选项仅是父解析器的一部分，而不是子解析器的一部分，这意味着以下内容：

```
$python script.py --threads Start 
```

是正确的，而：

```
$ python script.py Start --threads
usage: script.py [-h] [--threads] {Restart,Start} ...
script.py: error: unrecognized arguments: --threads 
```

因为`--threads`不是子解析器“继承”的。如果您还想`--threads`在子解析器中使用，则必须在其`parents`参数中指定它：

```
parser = argparse.ArgumentParser(parents=[general_group])
subparsers=parser.add_subparsers(dest='action')
subparsers.add_parser('Restart',parents=[general_group, second_group])
subparsers.add_parser('Start', parents=[general_group]) 
```

这应该做你想要的：

```
$ python script.py -h
usage: script.py [-h] [--threads] {Restart,Start} ...

positional arguments:
  {Restart,Start}

optional arguments:
  -h, --help       show this help message and exit
  --threads
$ python script.py Start -h
usage: script.py Start [-h] [--threads]

optional arguments:
  -h, --help  show this help message and exit
  --threads 
```

# ruby-on-rails - 保持在rails中的对象计数并显示它

> ID：14918807
> 
> 赞同：0
> 
> 时间：2013-02-17T07:09:06.357
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建一个可以记录用户正确答案并显示它们的应用程序。我如何在会话中访问它并显示它。我将计数设置为全局变量，这可能是错误的开始。

我的应用程序询问一个随机问题，如果用户单击正确答案，它会重新加载包含新问题的页面。如果不正确，它会将他们定向到新页面。我将如何显示正确的答案计数？

我的用户和会话设置类似于 michael hartl 的 ruby​​ on rails 教程。

```
controller.rb

    @@ruby_functs_count = 0

    def ruby_functs
    @symbols = { 
  "abort" => "Terminates program. If an exception is raised (i.e., $! isn't nil), its error message is displayed.",
  "Array( obj)" => "Returns obj after converting it to an array using to_ary or to_a."
 }
@random = []
@random2 = []
  rando = @symbols.sort_by {rand}
  rando = rando.each { |k,v|  @random << k and @random2 << v}
  @sym = @random2[0]
  @answer = @random[0]
  @sym2 = @random[0..10].sort_by {rand}
end

sessions_controller.rb

    class SessionsController < ApplicationController

def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
end

def new
end

def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_to user
    else
        render 'new'
    end
end

ruby_functs.html.erb

    <% for @random in @sym2 
     if @random == @answer
        x = cards_ruby_functs_path %>
        <li class="btn btn-small btn-info flash"><%= link_to "#{@random}", x %></li>
        <% else 
            x = cards_wrong_path %>

            <li class="btn btn-small btn-info flash"><%= link_to "#{@random}", x %></li>
 <% end %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:18:57.067

pfhahf，我不知道从哪里开始......

是的，使用类变量`@@ruby_functs_count`来存储状态是个坏主意。这不是一个全局变量，看起来像`$ruby_functs_count`（使用全局变量更糟）。

你可以做的开始：

**使用 ID**

当您知道答案的 id 时，您可以轻松地将其存储并比较结果：

```
# application_controller
Question = Struct.new(:q, :a)
QUESTIONS = { 
  1 => Question.new("abort", "Terminates..."),
  2 => Question.new("Array( obj)", "Returns..."),
} 
```

此示例使用结构来表示数据并将其存储在一个常量中，以便它可读且易于访问，例如：

```
question = QUESTIONS[1]
question.q # => "about"
question.a # => "Terminates..." 
```

然后，您可以在某些会话字段中跟踪用户交互：

```
session[:answered] ||= [] # init the session key if it's empty
session[:answered] << params[:question_id] # store the id so that you can work on it 
```

我希望这可以帮助您进一步使用您的代码。

# php - How do you make a literal T in a PHP date function?

> ID：14918808
> 
> 赞同：0
> 
> 时间：2013-02-17T07:09:07.760
> 
> 标签：php

I'm trying to make a literal `T` in a PHP `date()` function. I have the following line in my PHP:

> echo date ("F j, Y \a\t g:i A", filemtime($htmlname));

But this, instead of printing out a `T`, it prints out a tab character. I *could* change the `""`s surrounding the date format to `''`, but **that's not what I want.**

In summary, I was wondering if it was possible to make a literal `T` inside of single-quotes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:12:24.757

```
echo date ('F j, Y \a\t g:i A', filemtime($htmlname)); 
```

将日期格式放在单引号而不是双引号中。

# c - How can I get input via file without opening and closing the file in C?

> ID：14918813
> 
> 赞同：0
> 
> 时间：2013-02-17T07:09:49.263
> 
> 标签：c

I want to get input from a file in C without opening and closing it, like with use of `fscanf` or `fgets`. I just want to redirect my stdin to a file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:13:06.537

您始终可以从命令行使用重定向：

```
yourprogram < input_file 
```

像往常一样使用 scanf 进行键盘输入。重定向很好，因为您可以使用相同的程序从文件或键盘获取输入（如果您不使用重定向，输入将来自键盘）。

此外，您可以将输出重定向到文件：

```
yourprogram > output_file 
```

或两者：

```
yourprogram < input_file > output_file 
```

# android - 当 webvView 完成加载网页时，我无法关闭 ProgressDialog

> ID：14918814
> 
> 赞同：0
> 
> 时间：2013-02-17T07:09:49.133
> 
> 标签：android, multithreading, webview, progressdialog

当 webview 完成加载网页时，我想关闭 ProgressDialog，它对我不起作用。这是我的代码：

```
 package com.mcc.ghurbo;

import java.security.PublicKey;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class GhurboActivity extends Activity {
    /** Called when the activity is first created. */ 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        final WebView mywebview=(WebView)findViewById(R.id.webview);
        mywebview.getSettings().setJavaScriptEnabled(true);
        mywebview.setWebViewClient(new WebViewClient());
        final ProgressDialog p=new ProgressDialog(GhurboActivity.this);
        p.show(GhurboActivity.this, "", "Loading...");

        Thread loading=new Thread(){
                public void run(){
                        try {

                              mywebview.loadUrl("http://www.google.com");

                          } 
                        //end of try
                        catch(Exception e ){
                             e.printStackTrace();
                       }// end of catch
                        finally{
                            p.dismiss();
                        }//end of finally
              }//end of run
     };//end of thread
     loading.start();

} 
```

请尽早帮助我。如果不解决此问题，我将无法继续我的进一步工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:33:11.883

尝试以下方法来显示带有 webView 的进度对话框

```
 webView.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url)
            {
                // Start PROGRESS DIALOG
                view.loadUrl(url);
                return true;
            }

           @Override
           public void onPageFinished(WebView view, String url) {

            //HIDE PROGRESS DIALOG LOADING IT HAS FINISHED
          }

        }); 
```

它肯定会帮助你

# html - Twitter bootstrap - 在彼此相邻放置时重叠的前置输入元素

> ID：14918815
> 
> 赞同：2
> 
> 时间：2013-02-17T07:10:15.507
> 
> 标签：html, css, twitter-bootstrap, textinput

我正在尝试使用 display:table 样式将两个输入元素彼此相邻，并在第一个输入上添加一个前置项目。但是，这会导致第二个输入元素与第一个元素重叠。我试过使用 box-sizing:border-box 没有运气。似乎问题是我限制了父 div 的宽度，然后将输入元素的宽度设置为 100%，以便它填满父元素，但这根本不起作用。这是一个 JSfiddle 示例：

HTML

```
<div class="container">
    <div class="row">
        <div class="cell input-prepend">
            <span class="add-on">HI</span>
            <input type="text" />
        </div>
        <div class="cell">
            <input type="number"/>
        </div>
    </div>
</div> 
```

CSS

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 10px;
}

.row {
    display: table-row;
    width: 100px;
}

input[type=text] {
    width: 100%;
}

.cell {
    display: table-cell;
} 
```

[http://jsfiddle.net/5pgPY/7/](http://jsfiddle.net/5pgPY/7/)

目标是获得一堆像上面这样的行，其中文本输入的每个实例都有一些标签，其宽度可能不同，所以我需要一些方法来确保文本输入全部对齐。也许我应该放弃使用前置元素并为此使用单独的 div ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:20:42.637

看不出问题出在哪里。无论如何，这对我有用：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 10px;
}

.row {
    display: table-row;
    width: 200px;
}

input[type=text] {
    width: 100%;
}

.cell {
    margin-right: 60px;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:20:37.300

在您的示例中，您没有在第二个 input 中使用 input-prepend 类，您应该将其编写如下

```
<div class="cell input-prepend">
        <input type="number"/>
    </div> 
```

在 css 中从输入中删除 width=100% 并使用 margin-right

```
 input[type=text] {
       margin-right:10px;

      } 
```

你能检查一下 JSfidlle[更新的 JSfiddle prepend](http://jsfiddle.net/shail/mh3hH/22/)

```
<div class="container">
<div class="row">
    <form class="form-inline">
        <input type="text" class="input-small" placeholder="Email">
        <input type="password" class="input-small" placeholder="Password">
    </form>
    <form class="form-inline">
        <input type="text" class="input-small" placeholder="Email">
        <input type="password" class="input-small" placeholder="Password">
    </form>
</div>
</div> 
```

# android - Storing dates-time scales in a SQLite database table but in only one row

> ID：14918816
> 
> 赞同：0
> 
> 时间：2013-02-17T07:10:17.237
> 
> 标签：android, database, store

I'm trying to do one patient program for veterinary use. I'm creating a SQLite database table which includes patient name, owner name, address etc. But this table should include also when the patient should be made check-up, when it should be vaccinated, when it will take a surgery.(we can say a time scale)... Name, address etc are unique data's; there is only one name, only one address. But the "time scale" is not unique. It will store not only one data. What can I do now? Should I made a new database table for every patient to store these time scales? or should I store more than one data inside a one database row like using string arrays or something else? I think my best choice is storing a new database inside a database table row but is it possible? Some help will be great. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:05:25.943

为什么不这样：

```
 User_Schedule
-------------
create table user_schedule
(
   user_id integer,
   event_type text,
   event_date text // only because it's SQLite
) 
```

 `这样，每个用户都可以拥有 n 个事件，并且您可以为每个事件命名，这样您就可以轻松查询诸如“给我所有即将接种疫苗的用户”之类的内容。`

# ruby-on-rails - Problems with has_secure_password

> ID：14918818
> 
> 赞同：1
> 
> 时间：2013-02-17T07:10:56.617
> 
> 标签：ruby-on-rails, passwords

I'm trying to create a user model that uses `has_secure_password`, I've followed examples from the [Rails documentation](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password) and it still fails.

This is my model:

```
class User < ActiveRecord::Base
  attr_accessible :username, :email, :full_name, :password_digest
  has_secure_password
end 
```

And I'm trying to create a user like so:

```
@user = User.new({
  username: params[:user][:username],
  password: params[:user][:password],
  password_confirmation: params[:user][:password_confirmation],
  email: params[:user][:email],
  full_name: params[:user][:full_name]
})

# I even tried with `@user.new(params[:user])` 
```

However I'm getting this error:

```
Can't mass-assign protected attributes: password, password_confirmation 
```

I've tried searching for solutions on here and google, taken a look at "sample apps" and I appear to be doing the same as they are, except that I'm still getting the error.

Is there something I'm doing wrong or missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:03:30.337

尝试添加`:password, :password_confirmation`到`attr_accessible`，这可能是问题所在。

# java - Why do I need getInputStream for HttpUrlConnection to send request?

> ID：14918819
> 
> 赞同：1
> 
> 时间：2013-02-17T07:11:23.317
> 
> 标签：java, post, applet, request, httpurlconnection

I have some code that sends a POST request to a PHP script from a Java applet:

```
String message = URLEncoder.encode(s, "UTF-8");
URL url = new URL(getCodeBase(), "script.php");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("POST");
connection.setDoOutput(true);

OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());
out.write("message=" + message);
out.close(); 
```

But this doesn't work in sending the request. I have to add code that calls getInputStream() and reads all of the input for this to work. Why is this? What do I do if I only want to only send a request and not receive one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:02:57.823

您不需要，但您必须调用`getInputStream()`或`getResponseCode()`。否则不会发送任何内容，否则您将无法知道调用是否成功。

# .htaccess - Clean URL：Url 重定向 302 而不是显示一个干净的 URL

> ID：14918820
> 
> 赞同：0
> 
> 时间：2013-02-17T07:11:24.710
> 
> 标签：.htaccess, apache, httpd.conf, clean-urls

我正在尝试通过编辑`httpd.conf`文件来创建干净的 URL，但我的页面没有得到干净的 URL，而是被重定向到脏 URL。这是我正在写的条件。

```
RewriteRule ^/show/([^/\.]+)/([^/\.]+) http://www.example.com/show.php?id=$1&img=$2 [L] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:11:41.440

本来应该

```
RewriteRule ^/show/([^/\.]+)/([^/\.]+) /show.php?id=$1&img=$2 [L] 
```

# ios - iOS“图书应用”的 HTML5/CSS/JS 框架？

> ID：14918821
> 
> 赞同：0
> 
> 时间：2013-02-17T07:11:39.123
> 
> 标签：ios, cordova, ibooks

我正在考虑为 iOS 构建某种形式的电子书。通过“某种形式”，我还不确定什么/如何构建它。

变量：

我的技能：我相当擅长前端开发，使用 HTML5、jQuery、CSS 等。我通过 Phonegap 构建了一个 iOS 应用程序。我也是一名平面设计师，所以想保留对布局/排版/等的一些控制。

书的类型：它主要是一本图画书。在页面之间滑动，也许是“点击查看标题/详细信息”。也许某些页面上有一些简单的动画（淡出，滑入......等）。也许有点声音（尽管这不是优先事项）。我真正想要的一个功能是它具有应用内购买功能。例如，免费的 10 页书，应用程序内购买确实获得其他 40 页。

我能想到的选项：

1.  在 Phonegap 中从头开始构建它
2.  使用 Apple 的 iBook Author
3.  使用另一个框架（在我们外部的 Phonegap 内）。

关于#1，这似乎是可行的，尽管我担心我没有利用一些已经为书本型应用程序量身定制的预构建框架。

关于＃2，这看起来很吸引人。它可以处理简单的动画吗？我也不确定是否可以在 iBook 的上下文中进行应用内购买（尽管有一些吸引力，平均而言，iBook 的售价似乎高于应用程序）。

关于#3，这可能是我的主要问题：在过去的一两年里，有没有我不知道的框架是专门为制作 iBook 和/或类似 iBook 的应用程序量身定制的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:54:00.257

我已经为我的公司构建了Phonegap 应用程序和iBooks 应用程序——对于Phonegap，我们使用[Monocle](https://github.com/joseph/monocle)来获得我们想要的分页行为。它不能完美运行（滑动被证明是有问题的，所以我们最终只支持点击），但它允许 HTML/JS/CSS 并且在 iOS UIWebView 中运行良好。我们重新编写了它以使用一些 CSS3 过渡，并且我们必须对它进行更多优化以提高性能（它不能很好地处理大型书籍），但它大部分都有效。

对于 iBooks Author，没有办法进行应用内购买，但在可重排文本方面更好，页面之间的过渡更好。如果您正在尝试构建一本图画书，我会从 iBooks Author 开始（还有构建 HTML 小部件的功能，尽管这可能对您没有帮助），因为您可以更好地控制体验。

# sql-server - 无法从 MS Access 数据项目更改 SQL 后端

> ID：14918824
> 
> 赞同：0
> 
> 时间：2013-02-17T07:12:13.797
> 
> 标签：sql-server, ms-access, adp, access-data-project

我有一个连接到 MS SQL Server 2008 的 MS Access 2010 数据项目 (adp)。根据 Microsoft 的网站，我应该能够从 MS Access 2010 数据项目中修改 SQL 后端。

> 连接到 SQL Server 数据库后，您可以使用数据库设计器、表设计器、查询设计器、查询构建器和SQL 文本编辑器。

但是，我无法按照我想要的方式修改我的所有列。假设我有一张桌子

**Col1 varchar(255)**

我无法在设计视图中将其更改为**varchar(max)**。 **Max**不是 MS Access 中可接受的长度。此外，根据 Microsoft 的文档，不应使用**文本，因为它已被弃用。**因此，我想避免将其作为解决方案。

另一种选择是直接在 SQL Server 上进行更改。但是，这对我不起作用。将有其他开发人员致力于此。其他开发人员均无权访问 SSMS。主要是因为他们是 Access 开发人员，以前从未见过 SSMS，甚至从未接触过 SQL Server。

如何在 MS Access 数据项目中进行此更改？对于这个客户端/服务器模型，我还应该注意什么其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T23:45:18.627

在使用设计表和其他 SQL Server 对象的访问权限时，您必须解决一些字段类型[可比性问题。](https://support.office.com/en-US/article/Create-an-Access-project-B16C8911-1417-43C7-AAEF-2FA9A14A6BA5#__toc257281378)一般来说，我发现 Access 是一个非常有用的前端客户端，用于数据输入表单、程序和 SQL Server 数据报告。但是，我总是使用 SSMS 来创建表、过程、视图……以及所有与 SQL Server 相关的开发任务。

至于您的表设计问题，除了少数数据类型问题外，似乎支持大多数活动。一种选择可能是让您的开发人员将临时 T-SQL 语句发送到服务器，以创建和更改具有不受支持的字段要求的表。一种方法是创建一个带有文本框的访问表单以输入 T-SQL 语句，然后单击按钮调用一些 VBA 以使用[CurrentProject.Connection.Execute(SQLStatement)](https://msdn.microsoft.com/en-us/library/ms675023%28v=vs.85%29.aspx)在服务器上执行。尽管这不是一个漂亮的表格设计 GUI，而且开发人员必须知道 T-SQL 语法才能完成所需的操作。

我的建议是让您的开发人员 SSMS 和一些培训。它真的没有比使用 Access 表设计界面复杂多少……事实上它非常相似。他们肯定会很快把它捡起来。此外，您将带领他们走上知识渊博且富有成效的 SQL Server 开发人员的道路。

# assembly - 汇编代码：加和异或逻辑

> ID：14918827
> 
> 赞同：-4
> 
> 时间：2013-02-17T07:12:36.490
> 
> 标签：assembly

我正在看教科书中的一个谜题，我不确定我是否正确解释了组装说明。我理解它的方式是告诉我找到两个总和为 6005 的数字和 xor 给出 0。

这不意味着数字彼此相等吗？但是，考虑到它们的总和是 6005，它们怎么可能呢？是否有可能找到一对这样的数字，还是我错误地解释了汇编代码？让我知道你的想法！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:30:28.323

这些陈述是矛盾的：

假设它们异或为 0，它们的和为 6005；这意味着两个数字相等；

两个数字要么是对的，要么是受损的

假设对：2k + 2k = 4k = 2(2K) = 2k = 一对数

假设损害 2k + 1 + 2k + 1 = 4k + 2 = 2 (2k + 1) = 2k = 一对数

6005 = 2 (3002) + 1 = 2k + 1 = 损坏数。

所以这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:05:01.890

这取决于拼图的代码和代码所针对的特定 CPU。例如对于 x86：

```
mov   eax, 3002
stc
adc   eax, eax   ; the result is 6005

xor   eax, eax   ; the result zero 
```

# sql - 如何在 SQL Server 2005 中使用 IF 语句？

> ID：14918828
> 
> 赞同：2
> 
> 时间：2013-02-17T07:12:42.630
> 
> 标签：sql, tsql, sql-server-2005, stored-procedures, if-statement

这是我希望`INSERT`在存储过程中使用的场景。

表：

**tbl速率**

*   RateID (pk)
*   给钱打分
*   天数
*   isDailyRate 位

**tblBooking**

*   总钱

在我的 vb 应用程序中，这是声明。我如何将它翻译成 T-SQL？

```
 if !isDaily = True then
      !Totals = (!Days * !Rate)
 else
      !Totals = !Rate
 end if 
```

这是我的存储过程：

```
Create PROCEDURE [dbo].[sp_tblBooking_Add] 
   (
    @RateID     bigint,
    @Rate       money,
    @Days       int,
    @CheckOUT   datetime
   )
AS
BEGIN
    --Below is the logic I want. I can't get the right syntax

    --Declare @myTotals as money
    --Declare @myCheckOut as DateTime

    --if (Select isDailyRate FROM tblRates WHERE (RateID = @RateID)) = True THEN
    --  set myTotals = (@Rate * @Days)
    --  set @CheckOUT   = DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()) + @Days, '12:00') 
    --Else
    --  set myTotals = @Rate
    --  set @CheckOUT   = GETDATE()

    --End if

    INSERT INTO tblBooking(Totals, CheckOUT)
    VALUES(@myTotals, @myCheckOut); 
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:17:27.327

使用`CASE`表达式：

```
INSERT INTO tblBooking (Totals, CheckOUT)
SELECT 
  CASE 
    WHEN idDailyRate = 1 THEN @Rate * @Days 
    ELSE @rate 
  END,
  CASE 
    WHEN idDailyRate = 1 THEN DATEADD(DAY, 
                                      DATEDIFF(DAY, 0, GETDATE()) + @Days, 
                                      '12:00')
    ELSE GETDATE()
  END
FROM tblRates 
WHERE RateID = @RateID; 
```

**或者**，如果它们是标量值，那么您可以将它们选择到变量中并插入它们而不是`INSERT ... INTO ... SELECT`.

* * *

## 更新 1

像这样：

```
Declare @myTotals as money;
Declare @myCheckOut as DateTime;

SELECT 
  @myTotals = CASE 
                WHEN idDailyRate = 1 THEN @Rate * @Days 
                ELSE @rate 
              END,
  @myCheckOut = CASE 
                  WHEN idDailyRate = 1 THEN DATEADD(DAY, 
                                                    DATEDIFF(DAY, 0, GETDATE()) + @Days, 
                                                    '12:00')
                  ELSE GETDATE()
                END
FROM tblRates 
WHERE RateID = @RateID;

INSERT INTO tblBooking (Totals, CheckOUT) VALUES(@myTotals, @myCheckOut ); 
```

但这会给你一个错误，如果从这个表返回的值超过`tblRates`这些变量。

# python - 在 rpy2 中关闭 ggplot2 网格

> ID：14918830
> 
> 赞同：2
> 
> 时间：2013-02-17T07:12:48.987
> 
> 标签：python, r, ggplot2, rpy2

`theme_bw`使用主题时关闭Rpy2中所有网格的正确方法是什么？我知道我可以打开`theme_bw`如下：

`ggplot2.theme_set(ggplot2.theme_bw(12))`

但不确定如何关闭网格。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T08:03:49.467

它基本上与使用 R 中的 ggplot2 时相同的方式完成。

这是一个关闭与 X 轴相交的网格的示例。更多“主题化”情节的方法可以在 ggplot2 的文档和教程中找到。

```
from rpy2.robjects.lib.ggplot2 import ggplot, \
                               aes_string, \
                               geom_histogram, \
                               element_blank, \
                               theme_bw, \
                               theme
from rpy2.robjects import r

nogrid_x_theme = theme(**{'panel.grid.major.x': element_blank(),
                         'panel.grid.minor.x': element_blank()})
iris = r('iris')
p = ggplot(iris) + geom_histogram(aes_string(x = 'Sepal.Width'))
p += theme_bw() + nogrid_x_theme
p.plot() 
```

# unity3d - 没有物理的碰撞

> ID：14918831
> 
> 赞同：0
> 
> 时间：2013-02-17T07:12:55.500
> 
> 标签：unity3d

我正在尝试用最简单的物理原理制作最简单的平台游戏原型（重力下落，左右移动，以及（也许）跳跃）。例如：

```
void Move () {
   if (!isDying || !isDead || !isShooting || !isFalling)
   {
     float amountToMove = Time.deltaTime * Input.GetAxis("Horizontal") * playerSpeed;
     transform.Translate(Vector3.right * amountToMove);
   }
}

void ApplyGravity() {

   float amountToMove = Time.deltaTime * gravity;
   transform.Translate(Vector3.down * amountToMove);

} 
```

问题是我不知道如何在没有物理和 isKinematic 的情况下进行碰撞。我唯一知道的是使用 OnTriggerEnter 函数，因此向所有对象添加了 isTrigger 并写道（Hero.cs）：

```
 void OnTriggerEnter (Collider otherGameObjectCollider) {
   if (otherGameObjectCollider.gameObject.tag == "ground") {
     Debug.Log("ground/wall collision");
   }
} 
```

我知道我需要阻止我的英雄以防止跌倒（行走）穿过地面，但我真的想不出来。

抱歉这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:10:14.047

您可以使用`isFalling`英雄的旗帜来确定他是否处于坠落状态。试试这样：

```
void ApplyGravity() {
   if (isFalling) {
     float amountToMove = Time.deltaTime * gravity;
     transform.Translate(Vector3.down * amountToMove);
   }
}

void OnTriggerEnter (Collider otherGameObjectCollider) {
   if (otherGameObjectCollider.gameObject.tag == "ground") {
     Debug.Log("ground/wall collision");
     isFalling = false;
   }
} 
```

当你的英雄离开平台而不是跳跃时，你应该将 设置`isFalling`为 true 以使他开始下落。

也许您想尝试查看 Unity 官方演示：[3D 平台教程](https://www.assetstore.unity3d.com/#/content/5087)。我相信它包含了构建平台游戏所需的所有技巧和方法。祝你好运。:)

# java - 以编程方式检查java中服务器的可达性

> ID：14918838
> 
> 赞同：1
> 
> 时间：2013-02-17T07:14:26.373
> 
> 标签：java, database, database-connection

在我的应用程序架构中，我有两个数据库服务器主数据库和辅助数据库服务器（副本服务器）。

在我的 java 代码中，我正在与 DB 建立连接以获取一些数据，现在我想要的是我将在我的代码中提供两个 DB 服务器的 IP 地址，并检查哪个 DB 服务器是可访问的，并且只连接那个服务器。但我不知道如何实现它，一种方法是尝试远程登录，但不是一个好的选择，因为出于某些原因我想禁用应用程序服务器上的远程登录。

有没有其他最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T07:21:52.607

就个人而言，我只会尝试连接（使用标准数据库类）并在连接失败时处理异常。

即使您最初确认连接，也没有什么可以阻止在该测试与您实际尝试使用数据库之间发生网络问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:19:20.067

您可以尝试 ping 两台主机并使用响应的主机。这是一个示例程序。

```
 InetAddress address = InetAddress.getByName("172.16.2.0");

        // Try to reach the specified address within the timeout
        // periode. If during this periode the address cannot be
        // reach then the method returns false.
        boolean reachable = address.isReachable(10000);

        System.out.println("Is host reachable? " + reachable); 
```

有关更详细的程序，请参阅 Java 中的此[Ping 程序示例](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/Ping.java)。

# android - Admob Milkmangames 工具不起作用

> ID：14918840
> 
> 赞同：0
> 
> 时间：2013-02-17T07:14:49.170
> 
> 标签：android, flash, admob, cs4

我们正在尝试使用可用的 admon 的 milkman 工具在我们的 android 设备上展示广告，现在在我们未能展示广告之后，我们联系了该服务的创建者，他也未能帮助我们。有没有人实现了这个工具并且可以为我们提供描述符文件和 as3 代码来实现它——下面是我们在 cs4 中所做的：

在我们希望展示广告的框架上----

```
import com.milkmangames.nativeextensions.android.AdMob;
import com.milkmangames.nativeextensions.android.*;
import com.milkmangames.nativeextensions.android.AdMob;
import com.milkmangames.nativeextensions.android.AdMobAdType;
import com.milkmangames.nativeextensions.android.AdMobAlignment;
import com.milkmangames.nativeextensions.android.events.AdMobEvent;

if(AdMob.isSupported)
{
    AdMob.init("xxxxxxxxxxx");
}

AdMob.showAd(AdMobAdType.BANNER,AdMobAlignment.LEFT,AdMobAlignment.CENTER); 
```

然后我们将swc文件添加到库中---然后我们对描述符文件进行更改添加标记，

然后我们添加所有权限——然后像我们这样从命令中添加——

```
 adt -package -target apk-debug -storetype pkcs12 -keystore f:\keys\carp12.p12 -storepass abcd1234 testfile.apk  carmobileversion-app.xml roadf.png road72.png carmobileversion.swf -extdir d:\ane 
```

但是我们不断收到错误，com.extensions.Admob 中的 swf 版本是 11，而根 swf 是 10。我们已经覆盖了 sdk 3.5。

任何人都可以帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:10:36.657

只是为了让每个人都知道，问题已经解决了，这个工具的创建者 alex 帮助了我们，我们只需要使用新发布的文件，我们使用的是旧文件......很棒的工具......

# powershell - 如何将包含大括号的命令传递给powershell？

> ID：14918844
> 
> 赞同：1
> 
> 时间：2013-02-17T07:16:08.420
> 
> 标签：powershell

您可以将 powershell 命令传递给 powershell.exe，如下所示：

```
PowerShell -Command {Get-EventLog -LogName security} 
```

但是如果命令包含`{`or`}`怎么办？如：

```
dir z:\test -fi "*.tmp" -r | ?{$_.creationtime -le (Get-Date).adddays(-30)} | del 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T13:59:02.760

command 参数可以接受脚本块以及字符串，在您的顶部示例中 {} 表示脚本块。因此，只需将您的命令括在“”而不是 {} 中。

```
PowerShell.exe -Command "dir z:\test -fi "*.tmp" -r | ?{$_.creationtime -le (Get-Date).adddays(-30)} | del" 
```

唯一要记住的是，如果您将其指定为上述字符串，则 Command 必须是您指定的最后一个参数，因为它之后的所有内容都被解释为您要运行的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:28:52.893

另一种可能性是对您的命令进行编码：

```
$command = "dir z:\test -fi '.tmp' -r | ?{$_.creationtime -le (Get-Date).adddays(-30)} | del "
$bytes = [System.Text.Encoding]::Unicode.GetBytes($command)
$encodedCommand = [Convert]::ToBase64String($bytes)

powershell.exe -encodedCommand $encodedCommand 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:39:23.670

像这样：

```
PowerShell.exe -Command "dir z:\test -fi "*.tmp" -r | ?{$_.creationtime -le (Get-Date).adddays(-30)} | del" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:21:13.260

使用 Invoke-Expression 可以是一个选项

```
PowerShell -Command {Invoke-Expression "dir z:\test -fi `"*.tmp`" -r | ?{`$_.creationtime -le (Get-Date).adddays(-30)} | del"} 
```

# opengl - 显式统一位置无效

> ID：14918848
> 
> 赞同：2
> 
> 时间：2013-02-17T07:17:00.627
> 
> 标签：opengl, glsl

在 GLSL 顶点着色器中，我有：

```
#version 330
layout (location=0) uniform mat4 wm_;
layout (location=1) uniform mat4 vm_;
...more code... 
```

编译着色器时没有编译错误。后来，我在 glGetUniformLocation 上 assert() 用于 wm_ 和 vm_ 返回着色器源中指定的位置。断言触发，因为 glGetUniformLocation 返回不同的值（它不返回 -1，也就是说，制服没有得到优化，它们被分配了看似有效但不同的位置。）

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:14:38.373

自 GLSL 4.30 起或通过扩展 GL_ARB_explicit_uniform_location 支持显式统一位置。这里的编译器过于宽容，允许使用 GLSL 3.30 中不支持的语法。这应该被视为驱动程序错误。

# json - 为封面艺术解析 lastFm JSON

> ID：14918850
> 
> 赞同：0
> 
> 时间：2013-02-17T07:17:41.303
> 
> 标签：json, foreach, each, last.fm

**这是 JSON**

```
"album":[
        {
           "name":"DD Y Ponle Play",
           "artist":"Jumbo",
           "id":"2528039",
           "url":"http:\/\/www.last.fm\/music\/Jumbo\/DD+Y+Ponle+Play",
           "image":[
              {
                 "#text":"http:\/\/images.amazon.com\/images\/P\/B00005LN6S.01._SCMZZZZZZZ_.jpg",
                 "size":"small"
              },
              {
                 "#text":"http:\/\/images.amazon.com\/images\/P\/B00005LN6S.01._SCMZZZZZZZ_.jpg",
                 "size":"medium"
              },
              {
                 "#text":"http:\/\/images.amazon.com\/images\/P\/B00005LN6S.01._SCMZZZZZZZ_.jpg",
                 "size":"large"
              },
              {
                 "#text":"http:\/\/images.amazon.com\/images\/P\/B00005LN6S.01._SCMZZZZZZZ_.jpg",
                 "size":"extralarge"
              }
           ],
           "streamable":"0",
           "mbid":""
        }, 
```

**这是我的功能**

```
$.each(data.results.albummatches.album , function(){

            $.each(this.image , function(){

                $('.lightbox').append('<img src="'+this["#text"]+'" />');

            });

        }); 
```

基本上一切正常，除了我从图像对象中获得 4 种不同的图像尺寸。但是我只想抓住其中一种尺寸。

在我的一生中，我没有运气指定诸如 this[2]["#text"] 之类的 id，反之亦然。

我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:41:31.113

没关系。只是循环了太多次。

这是答案：

```
$.each(data.results.albummatches.album , function(){

            //this worked
            $('.lightbox').append('<img src="'+this.image[3]['#text']+'" />');

        }); 
```

# android - Android软键盘覆盖EditText？

> ID：14918852
> 
> 赞同：0
> 
> 时间：2013-02-17T07:18:10.380
> 
> 标签：android, listview, android-edittext

如果删除 ListView，EditText 将自动调整屏幕。

如果 ListView 存在此布局，则调整屏幕将不起作用，软键盘覆盖 EditText 框。

为什么 ？怎么修 ？

并试图把这条线显化，但也行不通。

> android:windowSoftInputMode="stateVisible|adjustResize|adjustPan"

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="200dip" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:28:56.317

不要一次使用所有 android:windowSoftInputMode 的三个值，所有的值都有自己的意义。

如果您希望当您打开键盘时您的编辑框应该向上移动并且列表视图应该重新调整大小，那么您可以尝试在清单中使用以下行。

```
android:windowSoftInputMode="adjustResize" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T03:31:48.663

`<activity android:windowSoftInputMode="adjustResize">`在你的清单中使用。第二个在你的添加`android:transcriptMode="alwaysScroll"`属性`<ListView />`

# blackberry - 黑莓无法运行程序“jar”：CreateProcess 错误=2，系统找不到指定的文件

> ID：14918853
> 
> 赞同：1
> 
> 时间：2013-02-17T07:18:47.227
> 
> 标签：blackberry, jar, compiler-errors, executable-jar

我正在开发一个包含许多类文件的 BlackBerry 应用程序；目前有 16 个 Java 类，并且它们不断增加，因为这个应用程序很复杂，有很多屏幕和功能。我正在使用 BlackBerry Java 插件在 Eclipse 中工作。我正在使用黑莓 JRE 6.0。我最近开始收到以下错误：

> 错误：无法运行程序“jar”：CreateProcess error=2，系统找不到指定的文件

我有谷歌这个错误，许多人认为这是由 Java 环境变量路径引起的。但是，我已经检查过了，这方面的一切似乎都很好。我注意到当类的数量增加或类变得更长时，会发生此错误。我通过减少项目中的类数量来消除错误。我创建了单独的项目，在每个项目之间划分了类，并且编译得很好。所以我可以相信源代码没有问题。

任何人都可以指导如何在包含多个类的单个项目中克服此错误。请帮忙。

编辑：我在黑莓支持论坛上遇到了以下内容：

> “我认为最常见的原因（假设您安装了 JDK）是项目中有大量文件，和/或项目目录离根目录很远。
> 
> 问题在于 RAPC 编译器调用 JAR 实用程序，构建一个包含应用程序中所有类文件的命令行。如果命令行长度超过系统允许的最大长度，你会得到这个错误。”

如果这是导致它的原因，如何解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:27:57.310

我很幸运能解决这个错误。[此](http://supportforums.blackberry.com/t5/Java-Development/why-cause-more-then-100-compiled-classes-packaging-I-O-error/td-p/520282)链接对 BlackBerry 支持论坛非常有帮助。对于面临相同问题的其他人，以下步骤解决了我的问题：

1.  右键单击我的电脑。转到属性。
2.  单击高级系统设置。
3.  单击环境变量
4.  突出显示 PATH 并单击编辑。添加 C:\Program Files (x86)\Java\jdk1.6.0_26\bin; 到 PATH 的开头。

第 4 步将 java jar 文件添加到 PATH 变量中，并将其添加到更靠近根的位置。在编译具有多个类的项目时，靠近根目录会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T14:06:39.913

正如错误`Cannot run program "jar"`在 Windows 下所说，这意味着它找不到 jar.exe 可执行文件。

至少在我的情况下，问题是 JAVA_HOME 指向我计算机上的 JRE（在其“bin”文件夹中没有 jar.exe），而不是指向 jar.exe 位于其“bin”下的 JDK “ 文件夹。

解决方案非常简单——将 JAVA_HOME 更改为指向 JDK 根文件夹——在我的例子中是“C:\Program Files\Java\jdk1.7.0_15”。

# java - 如何正确使用 String 中实现的 compareTo 方法？

> ID：14918855
> 
> 赞同：0
> 
> 时间：2013-02-17T07:19:17.127
> 
> 标签：java, string, compareto

所以我创建了一个员工对象和一个驱动程序。驱动程序包含一个Employees 的ArrayList，这个特定的方法返回名字按字母顺序排在第一位的Employee。

让我们在 ArrayList 'staff' 中添加两个员工，并称他们为“a”和“z”。

出于某种原因，当我期望它返回员工“a”时，它总是返回员工“z”。我是否正确使用了 compareTo 方法，还是完全不同？

```
 public Employee first()
    {
        int guy = 0;

        for ( int x = 1 ; x < staff.size() ; x ++ )
        {
            if ( staff.get( x -1 ) instanceof Employee && staff.get( x - 1 ).getName().compareTo( staff.get( x ).getName() ) < 0 )
                guy = x - 1;
        }

        return ( (Employee) staff.get( guy ) );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:26:06.873

无需重新发明轮子。使用自定义比较器并使用`Collections`排序方法。

```
public class NameComparator implements Comparator<Employee> {
    @Override
    public int compare(Employee o1, Employee o2) {
        return o1.getName().compareTo(o2.getName());
    }
}

Collections.sort(yourArrayList, new NameComparator()); 
```

或者，您可以确保您的`Employee`类实现`Comparable<Employee>`并且您可以不使用上面的自定义比较器。这假设您只想根据名称进行比较。

# haskell - 数据种类的问题

> ID：14918867
> 
> 赞同：2
> 
> 时间：2013-02-17T07:21:21.530
> 
> 标签：haskell, gadt, data-kinds

我创建了一个非常简单的示例，说明我在使用 GADT 和 DataKinds 时遇到的问题。我的实际应用程序显然更复杂，但这清楚地抓住了我的情况的本质。我正在尝试创建一个可以返回任何类型为 Test 的值（T1，T2）的函数。有没有办法做到这一点，或者我正在进入依赖类型的领域？这里的问题看起来很相似，但我无法从他们那里找到（或理解）我的问题的答案。我刚刚开始了解这些 GHC 扩展。谢谢。

[类似问题 1](https://stackoverflow.com/questions/12895454/playing-with-datakinds-kind-mis-match-errors)

[类似问题2](https://stackoverflow.com/questions/11243227/binding-name-in-type-signature-using-datakind)

```
{-# LANGUAGE GADTs, DataKinds, FlexibleInstances, KindSignatures #-}

module Test where

data TIdx = TI | TD

data Test :: TIdx -> * where
  T1 :: Int -> Test TI
  T2 :: Double -> Test TD

type T1 = Test TI
type T2 = Test TD

prob :: T1 -> T2 -> Test TIdx
prob x y = undefined 
```

----这里是错误---- Test.hs:14:26:

```
Kind mis-match

The first argument of `Test' should have kind `TIdx',

but `TIdx' has kind `*'

In the type signature for `prob': prob :: T1 -> T2 -> Test TIdx 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T08:20:14.380

您收到的错误消息是因为类型参数 to`Test`需要具有种类`TIdx`，但具有这种种类的唯一类型是`TI`and `TD`。有*种类* 。_`TIdx``*`

如果我理解正确，您要表达的是结果类型`prob`是`Test TI`or `Test TD`，但实际类型是在运行时确定的。但是，这不会直接起作用。返回类型通常必须在编译时知道。

由于 GADT 构造函数每个都映射到 kind 的特定 phatom 类型，因此您可以做的`TIdx`是返回一个结果，该结果使用存在或另一个 GADT 擦除幻像类型，然后稍后使用模式匹配恢复该类型。

例如，如果我们定义两个需要特定类型的函数`Test`：

```
fun1 :: T1 -> IO ()
fun1 (T1 i) = putStrLn $ "T1 " ++ show i

fun2 :: T2 -> IO ()
fun2 (T2 d) = putStrLn $ "T2 " ++ show d 
```

这种类型检查：

```
data UnknownTest where
    UnknownTest :: Test t -> UnknownTest

prob :: T1 -> T2 -> UnknownTest
prob x y = undefined

main :: IO ()
main = do
    let a = T1 5
        b = T2 10.0
        p = prob a b

    case p of
        UnknownTest t@(T1 _) -> fun1 t
        UnknownTest t@(T2 _) -> fun2 t 
```

这里值得注意的是，在-expression 中`case`，即使 `UnknownTest`GADT 已经删除了幻像类型，`T1`and`T2`构造函数也向编译器提供了足够的类型信息，以`t`恢复其确切类型`Test TI`或 `Test TD`在 case 表达式的分支内，允许我们例如调用期望这些特定类型的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:48:49.210

您在这里有两个选择。您可以从参数类型中推断出返回值的类型，或者您不能。

在前一种情况下，您可以优化类型：

```
data Which :: TIdx -> * where
  Fst :: Which TI
  Snd :: Which TD

prob :: Which i -> T1 -> T2 -> Test i
prob Fst x y = x
prob Snd x y = y 
```

在后一种情况下，您必须删除类型信息：

```
prob :: Bool -> T1 -> T2 -> Either Int Double
prob True (T1 x) y = Left x
prob False x (T2 y) = Right y 
```

您还可以使用存在类型擦除类型信息：

```
data SomeTest = forall i . SomeTest (Test i)

prob :: Bool -> T1 -> T2 -> SomeTest
prob True x y = SomeTest x
prob False x y = SomeTest y 
```

在这种情况下，您无法使用 的值做任何有趣的事情`SomeTest`，但在您的真实示例中可能可以。

# java - Libgdx 是否有显示列表的实现？

> ID：14918869
> 
> 赞同：1
> 
> 时间：2013-02-17T07:21:23.463
> 
> 标签：java, opengl, libgdx

我被困在仅使用 OpenGL 1.1 的旧计算机上进行开发。因此，我很感激我可以使用 ImmediateMode10 等，但我看不到在 Libgdx 中创建显示列表的方法。我搜索了 glGenList 但在代码中的任何地方都没有看到它。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:45:17.093

LibGDX 使用为移动设备开发的 OpenGL“ES”子集。它将其映射到桌面上的标准 OpenGL，但通常完整的 OpenGL 不能通过 libGDX 获得。显示列表是[从 OpenGL 中删除以创建 OpenGL ES 1.0 的内容](http://en.wikipedia.org/wiki/OpenGL_ES#OpenGL.C2.A0ES.C2.A01.0)之一。

如果您只对桌面上的 OpenGL Java 绑定感兴趣，并且想要更完整的 OpenGL 支持，[LWJGL](http://www.lwjgl.org/)库[支持显示列表](http://schabby.de/display-lists/)。

# process - 将进程划分为具体意义上的页面是什么意思？

> ID：14918870
> 
> 赞同：5
> 
> 时间：2013-02-17T07:21:29.713
> 
> 标签：process, operating-system, virtual, paging

我理解“进程”概念的方式是它是可执行程序的运行实例。exe 在辅助内存中，它的运行实例在 RAM 中。如果这种理解是正确的，我想知道这个抽象描述的真正含义是什么：'将进程划分为'页面'并在RAM中运行一些页面并将其余页面保存在辅助内存中以便在需要时进行交换'？这里的问题是在虚拟内存的上下文中。

根据主持人的建议，在问题中添加“编程”上下文：

假设我编写了一个小程序来列出从 1 到 100 的数字（或）以打印“Hello world”（或）一些桌面实用程序来扫描文本文件并在桌面窗口中逐个打印文件中的单词。考虑到我拥有的最终可执行文件，一旦这些程序被编译和链接，当我运行可执行文件时，如何将可执行文件“划分”并在 RAM 中部分运行？我该如何把握和想象在某个时间点 RAM 中“应该”什么以及“不应该”的概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:53:12.487

You have it (the division) right there, in the virtual to physical address translation. The virtual address space is split into blocks of one or several kilobytes (typically, all of the same size), each of which can be associated with a chunk (page) of physical memory of the same size.

Those parts of the executable (or process) that haven't been used yet or haven't been used recently need not to be copied into the physical memory from the disk and so the respective portions of the virtual address space may not be associated with physical memory either. When the system becomes low on free physical memory, it may repurpose some pages, saving their contents to the disk if necessary (or not saving, if they contain read-only data/code).

# c# - 在内容页面的 UpdatePanel 中使用按钮不会触发点击事件

> ID：14918874
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:03.980
> 
> 标签：c#, asp.net

我有一个站点母版页和一个内容页。每当我单击内容页面中的按钮时，它都不会触发单击事件方法来执行。

站长代码：

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
</head>

<body background="../../Content/city-balcony@2x.jpg">
    <form id="form1" runat="server">
    <div class="page">

        <div id="header">
            <div id="title">
                <h1>Welcome to E-Meeting</h1>
            </div>

            <div id="logindisplay">
                <% Html.RenderPartial("LogOnUserControl"); %>
            </div> 

            <div id="menucontainer">

                <ul id="menu">              
                    <li><%: Html.ActionLink("Home", "Index", "Home")%></li>
                                <%
                                    if (Request.IsAuthenticated)
                                    {
                                %>
                    <li><%: Html.ActionLink("Chat", "ViewPage1")%></li>
                                <% }
                                %>
                    <li><%: Html.ActionLink("About", "About", "Home")%></li>
                </ul>

            </div>
        </div>

        <div id="main">
            <%="Last communicated at : " + DateTime.Now.ToLongTimeString()%>
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />

            <div id="footer">
            </div>
        </div>
        <br />
        <br />
    </div>
    </form>
</body>
</html> 
```

内容页：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<script runat="server">

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "Modified by click event";
    }
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    ChT
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <h2>ChT</h2>
       <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />        
            <asp:Label ID="Label1" runat="server" Text="On Load"></asp:Label>
        </ContentTemplate>

    </asp:UpdatePanel>

</asp:Content> 
```

每当我单击按钮时，我希望标签文本“通过单击事件修改”，但它保持相同的“加载时”。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:18:46.273

您可以使用 C# 添加方法来触发事件。

1.  双击按钮创建一个按钮点击事件。
2.  添加代码以将标签文本更改为“通过点击事件修改”

例如，

```
protected void Button1_Click(object sender, EventArgs e)｛

Label1.text = "Modified by click event";

｝ 
```

顺便说一句，你可以在你的 aspx 代码中去掉 Text="On Load" 。（您的代码将是：`<asp:Label ID="Label1" runat="server"></asp:Label>`，然后在您的 .cs 文件中添加一个 page_load 方法：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
      Label1.text = "On load";

    } 
```

在这种情况下，当你打开网页时它会显示“加载中”，当你点击按钮时它会显示“Modified by click event”。

希望它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:24:48.577

尝试在更新面板中添加触发器，如下所示：

```
</ContentTemplate> 
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="Button1" EventName="Click" />        
</Triggers> 
```

并检查 ScriptManager***`EnablePartialRendering`***并在它出现时将其删除或将其设置为**`true`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T08:37:02.770

添加`EnableEventValidation="false"` 到内容
页面

```
<%@ Page Title="" EnableEventValidation="false" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %> 
```

它会起作用的

# ajax - 主干.js ，等待外部发布请求完成

> ID：14918875
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:20.087
> 
> 标签：ajax, image, post, backbone.js, upload

我的 index.php 页面上有一个图像上传器，当图像开始上传时（通过将图像拖到上传框上启动），会创建 POST 请求（仅供参考 HTML5 + php Uploader）

```
POST http://localhost:8888/backbone_images/post_file.php 
```

在我的 post_file.php 中，我通过将上传图像的 URL 插入到我的 exit_status 中来检索它，然后在我的脚本中将其分配给全局 javascript 变量“globe”

```
if(move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name'])){
        exit_status($pic['name']);
    } 
```

在我的主干脚本文件中，我检查了 dropbox 中的 drop 事件，它有效，

```
App.Views.AddImage = Backbone.View.extend({
    el: '#addImage',  
    events: {
        'drop': 'submit' 
    }, 
```

所以图像已被拖到保管箱上，我调用我的提交函数来创建一个新模型并将新图像的 url（我通过 javascript 变量传递）分配给我的新模型的 url

```
 submit: function(e) {
        e.preventDefault();  // preventing default submission..
        var newImage = globe;  // assign globe --url of the newly created image--to new model
        var imager = new App.Models.Person({ url: newImage });//creating a new img object
        this.collection.add(imager); 
    } 
```

问题是，当删除图像后触发我的主干提交功能时，我对 /post_file.php 的 POST 尚未运行，因此我的变量 'globe' 不包含新 URL，并且我新创建的模型最终缺少 url

所以问题：在图像删除后执行我的“提交”功能之前，我有什么方法可以等待 POST 在我的主干事件中完成？

我尝试使用：`$.when( $.ajax("/post_file.php") )`在我的提交函数内部，但这只是运行另一个 POST 请求，留下我的变量值，而不是运行原始 POST 请求以检索我正在等待的图像 URL。

我首选的工作流程是

一个。拖动/上传图像，（POST 执行） b. 新模型被添加到上传图片的 URL 集合中，

但我最终不得不先添加一个额外的点击功能，否则 POST 不会完成

一个。拖动/上传图像，（POST 执行） b. 点击提交按钮 c. 模型被添加到集合中

# java - 显示加载 gif 或等待消息，直到 servlet 加载

> ID：14918876
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:35.790
> 
> 标签：java, jsp, servlets, loading

我有一个通过 URL 调用 servlet 的应用程序

```
> "http://server:port/context-root/myservlet" 
```

然后，servlet 调用 Java 类，将查询结果返回给 servlet。servlet 然后通过 JSP 页面（response.redirect）将数据呈现给用户

现在它发生了，当所有这些发生时，无法显示的页面被呈现给用户，直到 JSP 页面准备好显示数据。

如何在调用 servlet 后立即显示加载 gif 或消息，直到 JSP 页面加载了所有必需的数据：

注意：如上所述，我首先调用 servlet，然后是 Java 类，然后是 JSP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:40:57.097

@Sankalp - 调用应用程序（HTML 页面）完全负责对您的 servlet 进行 AJAX 调用。如果您无法控制调用应用程序，这里有一个小技巧可以做 - 要求调用应用程序重新定向到 html 文件，例如应用程序的 index.html 文件。在 index.html 文件中，导出 jQuery javascript 库并进行适当的 ajax 调用，显示加载图像，成功后您可以将页面重定向到所需的 jsp。这里有很多工作要做。

问题：调用应用程序是否向您传递任何参数？它会向您发布数据吗？您的应用程序是在调用应用程序的 IFRAME 中打开还是纯重定向？

所有这些答案，将帮助您决定下一步行动。有很多关于 AJAX 调用和显示堆栈溢出图像的帖子，但这并不能解决您的基本问题。您必须决定流程以及放置 AJAX 代码的位置。AJAX 部分将是最简单的部分。:) ----- 在最后一条评论之后编辑

访问：[jQuery](http://api.jquery.com/jQuery.ajax/)

在您的 HTML 中

```
 <html>
    <head>
     <script src="jquery.min.js"></script> <!-- where you keep your resource file -->
      <script language="javascript" type="text/javascript">
       $(document).ready(function() { //This call will be made when DOM 
            //hierarchy has been fully constructed
            // Handler for .ready() called.
            //Make AJAX Call here so that this simple HTML page 
            ///directly calls the AJAX
            // and decide the future action based on AJAX success / failure
       }); 
      </script>
    </head>
    <body>
    </body>
  </html> 
```

# objective-c - 使用其计数对数组进行迭代继续进行额外的步骤

> ID：14918877
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:46.620
> 
> 标签：objective-c, nsarray, enumeration, comparison-operators

我将这些数组设置为进入 a `NSDictionary`，然后将它们添加到`NSMutableArray`. 这是设置部分。

注意：数组的内容有点随机，因为我只是在尝试一些东西。

现在我期待的是“太棒了！”这个词。只会重复 3 x 3 次，因为 和 的计数`NSMutableArray`都`headArray`只有 3。

那么为什么当我使用操作符符号时它会重复 4 x 3 次`<=`呢？这不应该做 3 次，因为它匹配的计数只有 3 次？

现在我很欣赏节数设置为 0，这可能是一个解释，但它需要为 0 才能位于 UITableView 的顶部。

```
listOfItems = [[NSMutableArray alloc] init];
headerArray = [[NSArray alloc] initWithObjects:@"Country 1", @"Country 2", @"Country 3", nil];

NSArray *countriesToLiveInArray = [NSArray arrayWithObjects:@"Iceland", @"Greenland", @"Switzerland", @"Norway", @"New Zealand", @"Greece", @"Italy", @"Ireland", nil];
NSDictionary *countriesToLiveInDict = [NSDictionary dictionaryWithObject:countriesToLiveInArray forKey:@"Countries"];

NSArray *countriesLivedInArray = [NSArray arrayWithObjects:@"India", @"U.S.A", nil];
NSDictionary *countriesLivedInDict = [NSDictionary dictionaryWithObject:countriesLivedInArray forKey:@"Countries"];

NSArray *thirdArray = [NSArray arrayWithObjects:@"Row 01", @"Row 02", @"Row 03", @"Row 04", nil];
NSDictionary *thirdDictionary = [NSDictionary dictionaryWithObject:thirdArray forKey:@"Countries"]; 
```

* * *

```
if (headerArray.count == listOfItems.count)
{
    for (section = 0; section <= listOfItems.count; section++)
    {
        NSLog(@"AWESOME!!");
    }
} 
```

* * *

```
2013-02-17 20:10:06.323 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.324 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.325 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.326 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.327 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.328 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.330 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.331 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.332 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.332 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.334 TableView[3667:11303] AWESOME!!
2013-02-17 20:10:06.335 TableView[3667:11303] AWESOME!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:29:29.653

不，您正在做的事情适用于 1 索引数组。`NSArray`但是，是 0 索引的。在你的 for 循环中发生的事情是`section`从`0`to `listOfItems.count`，即从 0 到 3，这意味着 4 次迭代（一个分别代表 0、1、2 和 3）。请改用`<`运算符。

请参阅有关半开区间和从零开始的编号的[Wikipedia 文章。](http://en.wikipedia.org/wiki/Zero-based_numbering#Advantages)

# css - 彩色背景上的 Div 闪烁边框

> ID：14918878
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:49.860
> 
> 标签：css, border

如何让div边框闪烁，通过将边框颜色改为黑白即可，但后来我决定保持背景颜色为粉红色，这样会看到白色边框，不应该，通过动态添加边框和删除它，它会扰乱其相邻元素的位置，有没有什么可以让边框变黑透明，或者让它闪烁？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:31:16.643

首先，动画网页元素，尤其是那些在颜色之间交替的元素是巨大的设计禁忌——它会分散用户的注意力，可能会引发癫痫症（如果使用过度），会降低页面渲染性能（并不必要地消耗设备电池），并且其他不良副作用。

但不管怎么说...

您可以通过在将其更改为黑色或白色或其他任何内容之前将其设置`border-color`为不可见的边框。`transparent`这样，当计算盒子流时，边界就在那里，只是不可见。这是一个 CSS2+ 功能。

另一种方法是使用图像边框并将边框图像设置为动画 GIF。这确实需要对图像边框的 CSS3 支持。

# android - Android：将具有多个值的 HTTP 帖子发送到 Web 服务器

> ID：14918879
> 
> 赞同：0
> 
> 时间：2013-02-17T07:22:55.447
> 
> 标签：android

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("id", "12345"));
nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient) 我想添加更多的 id 和 stringdatas，

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("id", "12345"));
nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
nameValuePairs.add(new BasicNameValuePair("id", "12348"));
nameValuePairs.add(new BasicNameValuePair("stringdata", "wassup"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

当我尝试上面的代码时，服务器只获取最后一个 id 和 stringdata 值。如何使用一个 HTTP Post 请求发送多个 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:31:34.013

它只获取最后一个，因为 http 参数必须是唯一的。您可以以编程方式将名称更改为 id1、id2 等，然后在服务器端遍历它们。在这种情况下，我个人会将数据作为 XML 发送。

# c# - 如何拉伸 System.Windows.Media.MediaPlayer？

> ID：14918881
> 
> 赞同：0
> 
> 时间：2013-02-17T07:23:32.737
> 
> 标签：c#, wpf, media-player

我正在尝试使用 MediaPlayer 类显示视频。我正在查看的[codeProject](http://www.codeproject.com/Articles/411827/Using-the-MediaPlayer-in-WPF)上有一个示例。

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            MediaTimeline timeline = 
              new MediaTimeline(new Uri("airplane.mpg", UriKind.Relative));
            timeline.RepeatBehavior = RepeatBehavior.Forever;
            MediaClock clock = timeline.CreateClock();
            MediaPlayer player = new MediaPlayer();
            player.Clock = clock;
            VideoDrawing drawing = new VideoDrawing();
            drawing.Rect = new Rect(0, 0, 300, 200);
            drawing.Player = player;
            DrawingBrush brush = new DrawingBrush(drawing);
            this.Background = brush;
        }
    } 
```

一切都很好，但我不知道如何拉伸视频。除了使用视图框，有谁知道如何使用 System.Windows.Media.Stretch 来更改视频大小？

（请不要建议使用 MediaElement 或 WpfMediakit 或其他一些类或外部库，这个问题专门针对 System.Windows.Media.MediaPlayer）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:11:08.883

好吧，我很笨，其实很简单，

```
 drawing.Rect = new Rect(0, 0, player.NaturalVideoWidth , player.NaturalVideoHeight );
    brush.Stretch =  System.Windows.Media.Stretch.SomeStretchEnum 
```

# playframework-2.0 - 实现 WebSocket 但找不到回调？

> ID：14918882
> 
> 赞同：1
> 
> 时间：2013-02-17T07:23:41.520
> 
> 标签：playframework-2.0

这是我的代码，我或多或少地得到了[这个页面](http://www.playframework.com/documentation/2.0.4/JavaWebSockets)：

```
public static WebSocket<String> testwebsocket() {
    return new WebSocket<String>() {

        //Called when the Websocket Handshake is done
        public void onReady(WebSocket.In<String> in, WebSocket.Out<String> out) {

            //For each event received on the socket
            in.onMessage(new Callback<String>() {
                public void invoke(String event) {

                    //Log events to the console
                    println(event);

                }
            });

        }
    };
} 
```

当我运行它时，我收到一个错误，上面写着“编译错误：找不到符号”，它指的是回调。我想我需要包含一些东西，但我尝试包含一堆库，但我不确定我错过了什么。文档页面上没有关于此的信息。我正在使用 Play Framework 2.0.4 Java 版本。请帮我弄清楚为什么找不到回调符号！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:34:39.867

您必须添加此导入：

```
import play.libs.F.Callback; 
```

如果您想要 websockets 的完整示例，您可以在`samples/java/websocket-sample`Play 副本的文件夹下查看（或查看[此处](https://github.com/playframework/Play20/tree/2.0.4/samples/java/websocket-chat)）。

# android - 关闭片段的正确方法

> ID：14918883
> 
> 赞同：3
> 
> 时间：2013-02-17T07:23:48.940
> 
> 标签：android, android-fragments

这个问题有两个部分。

假设我们有一个 Activity，然后有两个片段：一个 ListFragment 和一个 Fragment（当您从 ListFragment 中单击一个项目时会显示）。

**第1部分**

我应该在哪里关闭片段？我的意思是从设计的角度来看什么是好的。我看到两个选项：一个在片段中声明一个接口并让活动实现它，我们称之为 closeFragment()。这将是一种从片段到活动的通信方式，如开发站点中所示。另一个可能很简单，调用 getActivity().getSupportFragmentManager() 并使用管理器将其关闭。

**第2部分**

我知道如何创建一个片段并替换它，因为它在开发网站上，但我对关闭一个有疑问。我应该如何真正关闭它？类似以下代码的内容是否正确？假设片段被添加到 BackStack。

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
getSupportFragmentManager().popBackStack();
transaction.remove(this);
transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);
transaction.commit(); 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-11T07:54:31.173

```
FragmentManager fm = getFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.remove(this);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);
ft.commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T09:00:23.300

1.  我更喜欢有一个愚蠢的片段，它不知道它在哪里被使用，这样你就可以在任何你想要的活动中使用它，它会有你为它设定的精确目标。当然，你可以为所欲为。

2.  这看起来像是关闭它，但我宁愿替换它。只要您有对它的引用，您也可以随时返回到该片段。

# javascript - 理解这个回退逻辑

> ID：14918884
> 
> 赞同：1
> 
> 时间：2013-02-17T07:23:51.873
> 
> 标签：javascript, logic

我在一个网站上看到了这个返回代码，我正在尝试在我的网站上使用它。我无法理解其中的 toURl 和 refUrl 是如何生成的。请指导他们的结构。谢谢

```
var backtriggered = false;
setTimeout('goBack()',timer);

function goBack() {
  if(backtriggered) return false;
  backtriggered = true;
  toURL=getWelcomeCookie('toURL');
  refURL = getWelcomeCookie('refURL');
  var reg = /(.*)\/sites\/(.*)\/(\d{4})\/(\d{2})\/(\d{2})\/(.*)\/?/;

  if(reg.test(toURL) == false){ 
    document.cookie="toURL"+ "=" +escape(toURL)+";path=/; domain=.mycsnippets.com; expires=Thu, 01-Jan-1900 00:00:01 GMT";
    document.cookie="refURL"+ "=" +escape(toURL)+";path=/; domain=.mycsnippets.com; expires=Thu, 01-Jan-1900 00:00:01 GMT";
 }
  location.href=toURL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:31:42.120

```
document.cookie="toURL"+ "=" +escape(toURL)+";path=/; domain=.mycsnippets.com; expires=Thu, 01-Jan-1900 00:00:01 GMT"; 
```

这一行将一个值放入浏览器的 cookie 存储中。有关更多信息，我认为您应该首先阅读：[http ://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:33:12.003

设置 cookie 的方法有两种：通过服务器响应和通过 javascript。

这段代码所做的是使用 javascript 设置 cookie，这些 cookie 在将 url 设置为目标 url (toURL) 之前说明访问者去过哪里以及他要去哪里。这样，当调用下一页时，它知道返回到在 cookie 中设置为前一个 url 的 url。

# clojure - Clojure - 需要 REPL 中的所有测试命名空间？

> ID：14918896
> 
> 赞同：4
> 
> 时间：2013-02-17T07:25:08.800
> 
> 标签：clojure

假设我有以下命名空间：

```
(ns testsuite.bar ...) 
```

和

```
(ns testsuite.foo ...) 
```

有没有办法要求/使用其中的所有命名空间`testsuite`？

就像是：

```
(use 'testsuite.*)
(run-all-tests) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:54:13.597

不，这不受支持。您必须单独使用/要求。但是，`(run-all-tests)`不需要使用或需要任何测试命名空间，因为它会自动运行来自所有可用（加载）命名空间的所有测试。

# java - 编译简单的 MongoDB + Java 示例

> ID：14918898
> 
> 赞同：0
> 
> 时间：2013-02-17T07:25:59.797
> 
> 标签：java, mongodb

我似乎无法编译一个简单的 MongoDB + Java 示例：

我有这个文件 [https://github.com/mongodb/mongo-java-driver/blob/master/examples/QuickTour.java](https://github.com/mongodb/mongo-java-driver/blob/master/examples/QuickTour.java)

在我的命令行中，我通过执行编译

$ javac -cp mongo-2.10.1.jar QuickTour.java $ java -cp mongo-2.10.1.jar QuickTour

但是它给了我错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: QuickTour
Caused by: java.lang.ClassNotFoundException: QuickTour
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

发生了什么事，我该如何解决？这与我的编译参数有关吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T07:28:15.160

这不是编译时错误。这是您尝试运行`class`. 错误只是说它找不到您要运行的类。该错误几乎总是意味着您弄乱了类路径。

问题是，您忘记将当前目录包含在`classpath`. 添加一个`dot(.)`除了你的`mongo.jar`文件作为参数`-cp`：

```
java -cp .;mongo-2.10.1.jar QuickTour 
```

这假设您`QuickTour`从放置它的同一目录执行您的类。

# java - Eclipse 突然关闭 Java 文件，现在拒绝识别它

> ID：14918902
> 
> 赞同：1
> 
> 时间：2013-02-17T07:26:50.143
> 
> 标签：java, eclipse, eclipse-indigo

我遇到了一个非常奇怪的日食问题。

我正在处理一个项目，我右键单击在另一个类中声明的方法调用，并使用 Eclipse 在项目中方便的查找声明（为我节省了相当多的滚动时间）来运行搜索该特定方法声明。我的搜索窗格应该会弹出一个指向方法声明的链接。因此，我单击该链接，在其中声明该方法的另一个文件会自动打开，并且我搜索过的 Java 文件会从我的编辑器选项卡中消失。

所以我对自己说，“该死的这个旧版本的 eclipse (Indigo) 有一些错误......现在我必须重新打开我的文件并回到我的位置......太棒了！”。但是当我打开文件时，它被视为纯文本文件。所有的文字都是一样的颜色，轮廓不行！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:26:50.143

所以我在输入上述内容时解决了这个问题并决定发布答案，因为它不是一个很好的干净解决方案......而且我怀疑是否存在。

好的，所以文件没有被 eclipse 识别..

所以我打开文件并执行另存为，并将其保存在同一个包中的另一个名称下。然后，我转到我的测试代码并右键单击在 eclipse 已经出错的文件中声明的方法调用，然后去在 project.xml 中搜索声明。果然弹出了两个结果，一个在新保存的文件中，一个在旧文件中。我点击了旧的，仍然是纯文本......没有区别。但后来我点击了新的，我的突出显示又回来了！所以我只是删除了旧文件并进行了重构。

我认为 eclipse 不知何故使文件消失而没有正确关闭它......只是我的猜测，很高兴我很快解决了这个问题，希望任何有同样问题的人都能得到帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-11T16:51:24.483

这发生在我几分钟前。试图关闭/打开项目，重新启动 Eclipse 对我不起作用。

我使用的步骤是：

1.  在虚假文件旁边选择另一个 Java 文件（相同的包）（确保语法突出显示在这个文件上有效）
2.  选择“另存为”并覆盖虚假的。
3.  验证伪造的现在是否具有正确的语法突出显示
4.  用于`git checkout --`检索您的原始文件
5.  等等瞧！

# c# - App.Config 连接字符串

> ID：14918912
> 
> 赞同：2
> 
> 时间：2013-02-17T07:28:37.160
> 
> 标签：c#, winforms, database-connection, connection-string

在我的 Windows 窗体中，我在 app.config 中有连接字符串

```
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="Database"
            connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\Database.accdb"
            providerName="System.Data.OleDb" />
    </connectionStrings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

在所有类中，我都使用以下代码连接到数据库。

```
string connString = ConfigurationManager.ConnectionStrings["Database"].ConnectionString; 
```

但它没有连接到数据库。

有人可以指出错误。

但是，当我在不使用 app.config 的情况下使用此代码时，它可以正常工作。

```
 string connString  = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source = C:\\Users\\Amrit\\Desktop\\Database.accdb; Persist Security Info = False;"; 
```

我怎样才能使 app.config 连接字符串工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:54:23.170

你可以这样做

```
<configuration>
 <appSettings>
   <add key="ApplicationTitle" value="Sample Console Application" />
   <add key="ConnectionString"
       value="Server=localhost;Database=Northwind;Integrated
              Security=false;User Id=sa;Password=;" />
</appSettings> 
```

然后使用`ConfigurationSettings.AppSettings["ConnectionString"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:49:44.593

它接缝（来自评论）您在这两个连接字符串中定位两个不同的数据库文件。第一个位于`App_Data`项目的文件夹中，第二个位于您的桌面上。

每次在 VS 中启动项目时，文件夹中的`App_Data`文件都会复制到输出文件夹（`bin/Debug`或WinForms 项目）。`bin/Release`它会覆盖文件的先前内容，因此每次您从`App_Data`输出文件夹中的文件夹中获得文件的新副本时。要找出答案，请运行程序并执行一些插入操作。然后关闭程序并在输出文件夹中打开数据库文件（而不是在项目中`App_Data`）。

发生这种情况是因为您已将`Copy to Output Directory`数据库文件的属性设置为`Copy always`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T02:05:00.460

您需要设置数据目录。

然后，您可以在 Global.ascx.cs 中的 Application_Start 中设置路径

```
AppDomain.CurrentDomain.SetData("DataDirectory", "C:\Users\Amrit\Desktop"); 
```

[https://stackoverflow.com/a/1409378/2745294](https://stackoverflow.com/a/1409378/2745294)

[https://stackoverflow.com/a/6708279/2745294](https://stackoverflow.com/a/6708279/2745294)

希望这可以帮助。

# wpf - 知道是否选择了整行或 WPF DataGrid 中的列

> ID：14918915
> 
> 赞同：1
> 
> 时间：2013-02-17T07:30:01.637
> 
> 标签：wpf, mvvm, datagrid

如何判断 DataGrid 中的整行是否被选中，

或只有一列

（通过`Binding`or `Command`，我想保留 的原则`MVVM`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:22:19.607

最后，我自己找到了解决方案。

（很奇怪，我在搜索中一无所获。）

这是我所做的：

我将 DataGrid 的两个事件绑定到 ViewModel 中的命令。

```
 <i:EventTrigger EventName="BeginningEdit">
            <i:InvokeCommandAction CommandParameter="{Binding CurrentCell.Column.DisplayIndex, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" Command="{Binding DataContext.ColBeginEdit, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" />
        </i:EventTrigger>
        <i:EventTrigger EventName="CellEditEnding">
            <i:InvokeCommandAction CommandParameter="{Binding CurrentCell.Column.Header, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" Command="{Binding DataContext.ColEndEdit, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" />
        </i:EventTrigger> 
```

在视图模型中，我对命令调用了两个函数：

```
 public void CoulmnBeginEdit(object obj)
    {
        int i;
        if (Int32.TryParse(obj.ToString(), out i))
        {
            if (i > 0)
               this.CurrentCellEdit = i;
        }

    }

    public void CoulmnEndEdit(object obj)
    {
        this.CurrentCellEdit = 0;
    } 
```

如果 CurrentCellEdit 大于 0 则表示行编辑，否则不。

我在 SelectedIndex 上的行号，根据 CurrentCellEdit 我也知道该行中的哪一列编辑。

我希望找到一种更简单的方法，但这是唯一想到的解决方案，**以保持 MVVM 的原则**，我仍在尝试..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:40:49.480

您可以将属性 SelectionUnit 设置为“FullRow”

# gzip - mysqldump 管道 gzip 速度差异

> ID：14918917
> 
> 赞同：1
> 
> 时间：2013-02-17T07:30:31.197
> 
> 标签：gzip, pipe, mysqldump

我正在将mysqldump的结果传递给gzip，gzip的速度似乎大大落后

```
gzip：34.9MiB 0:01:54 [218kiB/s]
mysqldump：735MiB 0:01:54 [5.73MiB/s]

```

2个问题：
1.如果gzip无法赶上，这最终会破坏管道吗？管道是否将所有这些数据保存在内存中？

2\. 我将如何加速 gzip（已经知道 -9 与 -1 压缩选项）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:40:59.493

GZIP 受 CPU 限制。所以你可以像你说的那样降低压缩率，但你不会获得太多的速度。尝试在 LZO 周围戳一下，这要快得多（压缩率不太好，但我发现它是一个很好的权衡）

您可以在这里找到一个很好的基准：http: [//stephane.lesimple.fr/blog/2010-07-20/lzop-vs-compress-vs-gzip-vs-bzip2-vs-lzma-vs-lzma2xz-benchmark-重载.html](http://stephane.lesimple.fr/blog/2010-07-20/lzop-vs-compress-vs-gzip-vs-bzip2-vs-lzma-vs-lzma2xz-benchmark-reloaded.html)

至于你的第一个问题，操作系统会为你做缓冲，你不必担心。即使您的 RAM 不够大，缓冲也会写入磁盘，但 GZIP 仍然会更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:22:10.933

至于加速 gzip，您可以尝试[pigz](http://zlib.net/pigz)，它使用多个处理器/内核。

# php - PHP：从静态文本到显示变量中的值

> ID：14918918
> 
> 赞同：0
> 
> 时间：2013-02-17T07:30:54.147
> 
> 标签：php, variables, conditional

我一直在试图弄清楚我的导师说“而不是静态信息，而是更改该信息以显示变量内的值”时的确切含义。如果我的变量是公司，三星是我的条件，他到底想让我做什么？这是他引用的代码：提前感谢您的任何输入。

```
$company = samsung; 
```

# matlab - 编译 Matlab MEX 文件时出错（Piotr 的 Matlab 工具箱）

> ID：14918919
> 
> 赞同：0
> 
> 时间：2013-02-17T07:31:04.273
> 
> 标签：matlab, gcc, ubuntu, mex

我正在尝试安装 Piotr 的 Matlab 工具箱（[http://vision.ucsd.edu/~pdollar/toolbox/doc/](http://vision.ucsd.edu/~pdollar/toolbox/doc/)），但 mex 文件的编译脚本抱怨：

```
>> toolboxCompile
Compiling.......................................

Warning: You are using gcc version "4.6.3-1ubuntu5)".  The version
     currently supported with MEX is "4.2.3".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/

/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status

mex: link of ' "/home/josh/Desktop/Project/code/toolbox/images/private/assignToBins1.mexglx"' failed.

??? Error using ==> mex at 222
Unable to complete successfully.

Error in ==> toolboxCompile at 36
for i=1:length(fs), mex([fs{i} '.c'],opts{:},[fs{i} '.' mexext]);
end 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T06:22:26.330

**如果您是 Linux（Ubuntu 但应该可以使用其他发行版）用户：**

1.  为了使用一些系统库而不是 Matlab 默认库，请将此环境变量添加到您的 bashrc (~/.bashrc)：

    LD_PRELOAD=/lib/i386-linux-gnu/libc.so.6:/usr/lib/i386-linux-gnu/libstdc++.so.6:/lib/i386-linux-gnu/libgcc_s.so.1;

2.  安装 g++-multilib：

    apt-get install g++-multilib

3.  如果您在 32 位机器上运行，请编辑 toolboxCompile.m 文件并替换代码行：

    “opts = {'-output'}”与“opts = {'CXXFLAGS=-msse2 -msse''-output'}”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:52:16.510

1.  在你在 matlab 中编译 mexfiles 之前，你需要配置你的 mex 编译器。

    在 matlab 中，键入：

    ```
    >> mex -setup 
    ```

    Matlab 会自动检测您在机器上安装了哪些编译器，并允许您选择其中一个。
    在 Linux 机器上，您应该使用 gcc 编译器。

2.  您必须注意的另一件事是确保您的环境变量`$LD_LIBRARY_PATH`指向您的机器库的安装位置。
    在 matlab 中，您可以键入：

    ```
    >> getenv('LD_LIBRARY_PATH') 
    ```

    并确保它是正确的。

3.  尝试编辑`toolboxCompile.m`并添加`-v`到 mex 编译命令以获取有关编译的更多详细信息。

# hadoop - 如何在 Java 中执行 Sqoop？

> ID：14918923
> 
> 赞同：3
> 
> 时间：2013-02-17T07:31:31.800
> 
> 标签：hadoop, hive, sqoop

我创建了一个新的 Java 项目，然后添加了 Library Sqoop 和 Hadoop。（这些库是“hadoop-core-1.1.1.jar、sqoop-1.4.2.jar 等......”。）

然后我尝试了下面的代码：

```
public class MySqoopDriver {
    public static void main(String[] args) {
        String[] str = { "export", "--connect", "jdbc:mysql://localhost/mytestdb", "--hadoop-home",
                "/home/yoonhok/development/hadoop-1.1.1", "--table", "tbl_1", "--export-dir", "hdfs://localhost:9000/user/hive/warehouse/tbl_1",
                "--username", "yoonhok", "--password", "1234"};

        Sqoop.runTool(str);
    }
} 
```

参数是正确的，因为当我在终端中尝试时，它运行良好。

但它没有用。错误信息是：

```
13/02/17 16:23:07 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
13/02/17 16:23:07 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
13/02/17 16:23:07 INFO tool.CodeGenTool: Beginning code generation
13/02/17 16:23:07 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_1` AS t LIMIT 1
13/02/17 16:23:07 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_1` AS t LIMIT 1
13/02/17 16:23:07 INFO orm.CompilationManager: HADOOP_HOME is /home/yoonhok/development/hadoop-1.1.1
Note: /tmp/sqoop-yoonhok/compile/86a3cab62184ad50a3ae11e7cb0e4f4d/tbl_1.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
13/02/17 16:23:08 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-yoonhok/compile/86a3cab62184ad50a3ae11e7cb0e4f4d/tbl_1.jar
13/02/17 16:23:08 INFO mapreduce.ExportJobBase: Beginning export of tbl_1
13/02/17 16:23:09 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/02/17 16:23:09 INFO input.FileInputFormat: Total input paths to process : 1
13/02/17 16:23:09 INFO input.FileInputFormat: Total input paths to process : 1
13/02/17 16:23:09 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-yoonhok/mapred/staging/yoonhok1526809600/.staging/job_local_0001
13/02/17 16:23:09 ERROR security.UserGroupInformation: PriviledgedActionException as:yoonhok cause:java.io.FileNotFoundException: File /user/hive/warehouse/tbl_1/000000_0 does not exist.
13/02/17 16:23:09 ERROR tool.ExportTool: Encountered IOException running export job: java.io.FileNotFoundException: File /user/hive/warehouse/tbl_1/000000_0 does not exist. 
```

当我检查 HDFS 时，文件存在：

```
hadoop fs -ls /user/hive/warehouse/tbl_1
Found 1 items
-rw-r--r--   1 yoonhok supergroup        240 2013-02-16 18:56 /user/hive/warehouse/tbl_1/000000_0 
```

如何在我的 Java 程序中执行 Sqoop？

我尝试了 Processbuilder 和 Process，但我不想使用它们。

我很想用Sqoop API，但听说还没有。

我读[了这个问题](https://stackoverflow.com/questions/9229611/how-to-use-sqoop-in-java-program)，但它对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-27T16:13:44.713

有一个技巧对我来说很容易解决。通过 ssh 你可以直接执行 Sqoop 命令。只是你必须使用的是一个 SSH Java 库

您必须遵循此步骤。

下载 sshxcute java 库：[https](https://code.google.com/p/sshxcute/) ://code.google.com/p/sshxcute/ 并将其添加到包含以下 java 代码的 java 项目的构建路径中

```
import net.neoremind.sshxcute.core.SSHExec;
import net.neoremind.sshxcute.core.ConnBean;
import net.neoremind.sshxcute.task.CustomTask;
import net.neoremind.sshxcute.task.impl.ExecCommand;

public class TestSSH {

   public static void main(String args[]) throws Exception{

    // Initialize a ConnBean object, parameter list is ip, username, password

    ConnBean cb = new ConnBean("192.168.56.102", "root","hadoop");

    // Put the ConnBean instance as parameter for SSHExec static method getInstance(ConnBean) to retrieve a singleton SSHExec instance
    SSHExec ssh = SSHExec.getInstance(cb);          
    // Connect to server
    ssh.connect();
    CustomTask sampleTask1 = new ExecCommand("echo $SSH_CLIENT"); // Print Your Client IP By which you connected to ssh server on Horton Sandbox
    System.out.println(ssh.exec(sampleTask1));
    CustomTask sampleTask2 = new ExecCommand("sqoop import --connect jdbc:mysql://192.168.56.101:3316/mysql_db_name --username=mysql_user --password=mysql_pwd --table mysql_table_name --hive-import -m 1 -- --schema default");
    ssh.exec(sampleTask2);
    ssh.disconnect();   
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:27:44.987

您可以使用“SqoopOptions”在您的 Java 程序中执行 sqoop。

这是一个将 MySql 中的表导入 HDFS 的示例代码。

```
public static void importSQLToHDFS() throws Exception {
    String driver = "com.mysql.jdbc.Driver";
    Class.forName(driver).newInstance();

    Configuration config = new Configuration(); 
    config.addResource(new Path("/.../conf/core-site.xml"));
    config.addResource(new Path("/.../conf/hdfs-site.xml"));

    properties.load(new FileInputStream("/.../sqoopimport.properties"));

    SqoopOptions options = new SqoopOptions();
    options.setDriverClassName(driver);
    options.setHadoopHome("/.../hadoop-0.20.2-cdh3u2");
    options.setConnectString(properties.getProperty("db_connection_string"));
    options.setTableName(properties.getProperty("db_mysql_table_name"));
    options.setUsername(properties.getProperty("db_usr_id"));
    options.setPassword(properties.getProperty("db_passwd"));
    options.setNumMappers(1);
    options.setTargetDir(properties.getProperty("path_export_file"));
    options.setFileLayout(FileLayout.TextFile);

    new ImportTool().run(options);
} 
```

对于导出，请参见下面的示例代码。注意：这里不使用属性文件。确保您已创建要导入数据的表。

```
public static boolean exportHDFSToSQL() throws InstantiationException, IllegalAccessException, ClassNotFoundException {
    try {
         SqoopOptions options=new SqoopOptions();
         options.setConnectString("jdbc:mysql://localhost:3306/dbName");
         options.setUsername("user_name");
         options.setPassword("pwd");
         options.setExportDir("path of file to be exported from hdfs");
         options.setTableName("table_name");
         options.setInputFieldsTerminatedBy(',');
         options.setNumMappers(1);
         new ExportTool().run(options);
    } catch (Exception e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T00:14:09.790

首先让我提一下 Sqoop 1 没有官方客户端 API。尽管以您所做的方式调用 Sqoop 是很常见且有效的。

根据日志，我猜您正在执行 Sqoop 的 java 应用程序在类路径上没有 hadoop 配置。因此，Sqoop 不会获得有关您的集群的信息，而是在“本地”模式下工作。您需要将 hadoop 配置放入您的类路径，以便针对远程集群运行 Sqoop。请在 stackoverflow 上查看以下[条目以获取更多详细信息。](https://stackoverflow.com/questions/14870139/sqoop-export-error-causeorg-apache-hadoop-mapreduce-lib-input-invalidinputexc)

# javascript - 无法让 connect-flash 在重定向时与 express.js 一起使用

> ID：14918929
> 
> 赞同：1
> 
> 时间：2013-02-17T07:32:33.670
> 
> 标签：javascript, node.js, express

好的，由于某种原因，会话闪存在我时可以工作`res.render()`，但是当我尝试设置会话闪存然后重定向时，它不会显示。问题出在以下`else`条款中的联系方式中）...

这是重定向期间记录到控制台的内容：

`{} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} { info: [ 'Thanks we will return your message soon' ] } {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {} {}`

如您所见，消息肯定在其中，但看起来它正在被一个空对象替换。

这是我的代码：

`app.js`

```
var flash = require('connect-flash');

// Grab sessions
var sessionFlash = function(req, res, next) {
  res.locals.messages = req.flash();
  console.log(res.locals.messages);
  next();
}

app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(viewHelpers());
  app.use(express.bodyParser({ uploadDir : './' }));

  app.use(expressValidator);
  app.use(express.methodOverride());

  app.use(express.cookieParser('keyboard cat'));
  app.use(express.session({
    secret: config.secret,
    cookie: {
      maxAge: 365 * 24 * 60 * 60 * 1000
    },
    store: new MongoStore(config.db)
  }));

  app.use(flash());
  app.use(sessionFlash);

  app.use(express.static(__dirname + '/public'));
  app.use(app.router);
}); 
```

`views/layout.jade`

```
- if (typeof message !== 'undefined')
  =message 
```

`controllers/index.js`

```
function controllers(params) {

  controllers.contact = function(req, res) {
    if (errors) {
      // This works as intended
      req.flash('info', 'Please fix the errors below.');

      res.render('contact', {
        title : 'Contact -',
        message: req.flash('info'),
        errors: errors,
        params: params
      });
      return;
    } else {
      // This doesn't work
      req.flash('info', 'Thanks we will return your message soon');
      res.redirect('/');
    }
   };
   return controllers
  }

  module.exports = controllers; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:23:46.023

好吧，您正在重定向到“/”，服务器没有响应。

你`app.get('/', function(req, res){...});`的 app.js 中没有

Flash 消息是在来自同一客户端的两个请求之间的持续时间内存储在服务器上的消息，因此仅在下一个请求中可用。闪光灯不显示，因为您`res.redirect('/');`什么都不做。

# excel - 比较两个文本单元格并显示 Excel 工作表 2010/2007 中第三列的差异

> ID：14918931
> 
> 赞同：1
> 
> 时间：2013-02-17T07:32:42.787
> 
> 标签：excel

我想比较两个包含文本的单元格并显示某种颜色的差异

```
Ex:Cell A:NTR is a great Leader.
   Cell B:Ntr is a Great leader 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:07:20.203

使用 VBA ......

```
Sub CompareInColor()

ActiveSheet.Range("C1").Value = ActiveSheet.Range("A1").Value

For i = 1 To Len(ActiveSheet.Range("A1").Value)
    If (ActiveSheet.Range("A1").Characters(i, 1).Text <> 
        ActiveSheet.Range("B1").Characters(i, 1).Text) Then 
        ActiveSheet.Range("C1").Characters(i, 1).Font.Color = RGB(255, 0, 0)
Next i

End Sub 
```

这仅比较 A1 和 B1...如果您有很多行，则循环遍历您的行。另外，我假设 A1 和 A2 的长度相同，否则可能会出现超出范围的索引错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T15:51:41.493

```
Sub CompareInColor()

ActiveSheet.Range("C1").Value = ActiveSheet.Range("A1").Value

For i = 1 To Len(ActiveSheet.Range("A1").Value)
    If (ActiveSheet.Range("A1").Characters(i, 1).Text <> ActiveSheet.Range("B1").Characters(i, 1).Text) Then
        ActiveSheet.Range("C1").Characters(i, 1).Font.Color = RGB(255, 0, 0)
End If
Next i

End Sub

Sub CompareInColorFlip()

ActiveSheet.Range("D1").Value = ActiveSheet.Range("B1").Value

For i = 1 To Len(ActiveSheet.Range("B1").Value)
    If (ActiveSheet.Range("B1").Characters(i, 1).Text <> ActiveSheet.Range("A1").Characters(i, 1).Text) Then
        ActiveSheet.Range("D1").Characters(i, 1).Font.Color = RGB(255, 0, 0)
End If
Next i

End Sub 
```

这将 A 与 B 进行比较，然后将 C 和 B 的差异更改为 A 的字体，然后将 D 的差异更改为字体

# php - 合并具有 json 值的 3 行

> ID：14918933
> 
> 赞同：0
> 
> 时间：2013-02-17T07:33:09.863
> 
> 标签：php, arrays, json, codeigniter

我在数据库表中有 3 行是`json`数据，我希望它们将它们合并到一个数组中，如何解决？

**第 1 行：** ["11,22,13"]
**第 2 行：** ["48"]
**第 3 行：** ["53,67,70"]

**我希望输出为：`array(11,22,13,48,53,67,70)`**

我试过：

```
$result = $this->db->get_where('table',array('mainpage'=>$mp'));
    $data = array();
    foreach($result->result() as $row){
        $dv = json_decode($row->sbouy);
        $out = array();
        foreach($dv as $idx => $val){
            $out[] = $val;
        }
        echo '<pre>';
        print_r($out); // This is not what I want output
    } 
```

在我的代码中输出为（这不是我想要的输出）：

```
Array
(
    [0] => 11,22,13
)
Array
(
    [0] => 48
)
Array
(
    [0] => 53,67,70
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:40:00.857

用这个

```
 $data = array();
    $out = array();
    foreach($result->result() as $row){
        $dv = json_decode($row->sbouy);

        foreach($dv as $idx => $val){
            $out[] = $val;
        }

    }
    echo '<pre>';
    print_r($out); // This is what you want :) 
```

您必须定义`$out`外部 foreach。你甚至可以使用[array_merge而不是循环](http://php.net/manual/en/function.array-merge.php)

# perl - 如何打印看起来像哈希的数组

> ID：14918936
> 
> 赞同：0
> 
> 时间：2013-02-17T07:33:31.303
> 
> 标签：perl

我是 Perl 的新手，必须编写一个代码，将文件的内容放入数组并打印看起来像**哈希的输出。** 这是一个示例条目：

```
my %amino_acids = (F => ["Phenylalanine", "Phe", ["TTT", "TTC"]]) 
```

输出应完全采用上述格式。

文件行是这样的......

```
"Methionine":"Met":"M":"AUG":"ATG"
"Phenylalanine":"Phe":"F":"UUU, UUC":"TTT, TTC"
"Proline":"Pro":"P":"CCU, CCC, CCA, CCG":"CCT, CCC, CCA, CCG" 
```

我必须在分号后取最后一个密码子并忽略第一组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:35:26.997

您是否打算构建等效哈希？还是您*真的*想要字符串格式？该程序用于[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)从文件构建散列，然后使用转储它，[`Data::Dump`](https://metacpan.org/module/Data%3a%3aDump)以便您也拥有字符串格式。

```
use strict;
use warnings;

use Text::CSV;
use Data::Dump 'dump';

my $csv = Text::CSV->new({ sep_char => ':' });
open my $fh, '<', 'amino.txt' or die $!;

my %amino_acids;
while (my $data= $csv->getline($fh)) {
  $amino_acids{$data->[2]} = [
    $data->[0],
    $data->[1],
    [ $data->[4] =~ /[A-Z]+/g ]
  ];
}

print '$amino_acids = ', dump \%amino_acids; 
```

**输出**

```
$amino_acids = {
  F => ["Phenylalanine", "Phe", ["TTT", "TTC"]],
  M => ["Methionine", "Met", ["ATG"]],
  P => ["Proline", "Pro", ["CCT", "CCC", "CCA", "CCG"]],
} 
```

**更新**

如果您*真的*不想安装模块（这是一个非常简单的过程，并且使代码更加简洁和可靠），那么这就是您所需要的。

```
use strict;
use warnings;

open my $fh, '<', 'amino.txt' or die $!;

print "my %amino_acids = (\n";

while (<$fh>) {
  chomp;
  my @data = /[^:"]+/g;
  my @codons = $data[4] =~ /[A-Z]+/g;
  printf qq{  %s => ["%s", "%s", [%s]],\n},
      @data[2,0,1],
      join ', ', map qq{"$_"}, @codons;
}

print ")\n"; 
```

**输出**

```
my %amino_acids = (
  M => ["Methionine", "Met", ["ATG"]],
  F => ["Phenylalanine", "Phe", ["TTT", "TTC"]],
  P => ["Proline", "Pro", ["CCT", "CCC", "CCA", "CCG"]],
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:59:12.050

假设您实际上想要有效的 perl 作为输出，这将做到：

```
open(my $IN, "<input.txt") or die $!;

while(<$IN>){
    chomp;
    my @tmp = split(':',$_);
    if(@tmp != 5){
        # error on this line
        next;
    }
    my $group = join('","',split(/,\s*/,$tmp[4]));
    print "\$amino_acids{$tmp[2]} = [$tmp[0],$tmp[1],[$group]];\n";
}
close $IN; 
```

使用您的示例行，输出为：

```
$amino_acids{"M"} = ["Methionine","Met",["ATG"]];
$amino_acids{"F"} = ["Phenylalanine","Phe",["TTT","TTC"]];
$amino_acids{"P"} = ["Proline","Pro",["CCT","CCC","CCA","CCG"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:31:43.933

@Borodin 非常感谢您的回答，实际上我不必使用 Text::csv 或 Data::dump。我必须打开一个文件并从文件中构建等效的哈希值。我试图不使用两者，希望它会有所帮助。再次感谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-17T07:42:20.297

Perl 没有打印散列的特殊方法。您可能应该做的是在读取文件时创建一个哈希：

```
while (<FILE>) {
    my @line = split ':'; # split the line into an array
    $amino_acids{$line[0]} = \@line[1..-1]; # take elements 1..end 
} 
```

然后一次打印出一个条目的哈希值：

```
foreach (keys %amino_acids) {
    print "$_ => [", (join ",", @$amino_acids{$_}), "]\n";
} 
```

请注意，我没有编译这个，所以它可能需要少量的工作来完成它。

# c - 从文件中一个一个地读取字符

> ID：14918938
> 
> 赞同：0
> 
> 时间：2013-02-17T07:33:41.100
> 
> 标签：c

我正在尝试一个一个地读取 TXT 文件字符并将其写入 output.txt 文件，每行一个字符的 ASCII 数字。

每当我的代码收到 EOF ASCII 字符时，我都无法读取任何其他字符。（这也发生在 SUB 字符上 - 意味着 DOS 中的 EOF）

这是我的代码（.c）：

```
while (source_size > 0) {
    ch = fgetc(in_file);     //reading file full of ASCII chars
    fprintf(p, "%d\n", ch); // write num to output.txt
     source_size--;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:36:46.753

怎么样？？？？？？

```
while((ch = fgetc(in_file)) != EOF)
   fprintf(p, "%d\n", ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:07:38.710

您没有指定操作系统或其他信息，但 DOS 一词表明您在 Windows 上。可能您打算以二进制模式打开文件（例如“FILE* in_file = fopen(name, "rb")"）。

# javascript - 用 JavaScript 正则表达式匹配每个新行的开头

> ID：14918939
> 
> 赞同：19
> 
> 时间：2013-02-17T07:33:43.283
> 
> 标签：javascript, regex

我有一个可能的字符串`\n`。考虑到：

```
&nbsp;Foo1
&nbsp; Foo2
Foo3&nbsp; Foo4. 
```

我想`&nbsp;`在每一行的开头替换 's，但上面是一个字符串。`^nbsp;`只匹配`&nbsp;`之前的第一个`Foo1`。我想在任何换行符的开头做，寻找`&nbsp;`. 有任何想法吗？

所以，我想要一个匹配上面前两个的正则表达式`&nbsp;`，而不是第三个。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-17T07:35:14.430

您需要`multiline`使用标志启用匹配模式`/m`，以便将每一行作为单独的行进行匹配。

```
/^(?:&nbsp;)+/gm 
```

# php - 在字符前拆分字符串

> ID：14918945
> 
> 赞同：0
> 
> 时间：2013-02-17T07:34:31.990
> 
> 标签：php, split

php。我怎么能把这个字符串分成5个字符串。

```
Tampa Bay 6 Florida 5 (FINAL - OT) 
```

生成此结果的字符串是`$results[$sport][$p]`.

* * *

我想在第一个数字之前将其拆分为 $team1

将数字拆分为 $team1score

将第一个数字之后和第二个数字之前的文本拆分为 $team2

将第二个数字拆分为 $team2score

最后将括号中的内容拆分为 $results

* * *

重要的是不要使用空格进行拆分，因为某些团队名称有多个空格。

有什么帮助吗？看起来很复杂，但对合适的人来说可能很容易。

## 其他一些有用的信息。

我正在尝试将 2 个脚本转换为 PHP。下面的 2 做同样的事情，但幸运的是我没有 PHP 版本。这是下面的windows mobile。这是一个 MSCR 文件

```
msg = "[scores]^NL^"
did = 0
hidewaitcursor
stream = readfile(url)

foreach entry in split(stream, "&nfl", 0)
if (find(entry, "s_left") ne "0")
entry = replace(entry,"%20"," ")
split(entry, "=", 1, a, b)

if (find(entry," at ") ne "0")
if (did eq "0")
msg = msg & "^NL^^NL^[schedule]^NL^"
did = 1
endif
split(b, " at ", 1, team1, team2)
split(team2, "(", 1, team2, info)
split(info, ")", 1, info, j)
else
split(b, " ", 1, team1, b)
split(b, "(", 1, team2, info)
split(info, ")", 1, info, j)
endif

if (find(team2,"^") ne "0")
tmp = team1
team1 = team2
team2 = tmp
endif

team1 = replace(team1,"^","")
team2 = replace(team2,"^","")
info = replace(info,"FINAL","final")

msg = msg & team1 & " - " & team2 & " -- " & info & "^NL^" 
```

这是一个与 MSCR 执行相同操作的 CodeFusuion 脚本

```
<!--- Lets do NFL --->    
<cfset espn = "http://sports.espn.go.com/nfl/bottomline/scores">

<cfhttp url="#espn#" method="get" resolveurl="yes" throwonerror="yes" />
<cfset myArray = arrayNew(1) />
<cfset myResult = #CFHTTP.FileContent# />

<cfif ShowNFLEspnString EQ true>
    <cfoutput>
    <br />
    ESPN NFL String URL: <a href="#espn#">#espn#</a><br />
    <br />
    #myResult#<br />
    <br />
    </cfoutput>
</cfif>

<cfset j = 1 />
<!---parse the urls, don't touch :)--->
<cfset newResult = #REReplace(myResult, "%20%20", "@", "all")# />
<cfset newResult = #REReplace(newResult, "%20", " ", "all")# />
<cfset newResult = #REReplace(newResult, "%26", "", "all")# />
<cfset newResult = #REReplace(newResult, "[(][0-9][)]", "", "all")# />
<cfset newResult = #REReplace(newResult, "[(][0-9][0-9][)]", "", "all")# />
<cfset newResult = #REReplace(newResult, "[(][A-Z][A-Z][)]", "", "all")# />
<cfset newResult = #REReplace(newResult, "\^", "", "all")# />
<cfset newResult = #REReplace(newResult, "[ \t][a-z][a-z][ \t]", "@", "all")# />
<cfset newResult = #REReplace(newResult, "[(]", "@(", "all")# />
<cfset newResult = #REReplace(newResult, "[()]", "", "all")# />

<!---loop over the urls and store the teams in a array--->
<cfloop list="#newResult#" index="i" delimiters="#chr(38)#">
    <!--- Sometimes espn has a item with no teams or scores --->
    <!--- If this is the case, a try catch will keep the loop going so it doesn't crash --->
    <cftry>
        <cfset myArray[j] = listgetat("#i#", 2, "=") />
        <cfset j = j + 1 />
    <cfcatch>
        <!--- Don't care what the extra garbage is --->
    </cfcatch>
    </cftry>
</cfloop>

<cfset gamesArray = arrayNew(1) />
<cfset j = 1 />

<cfloop from="3" to="#arraylen(myArray)#" index="m" step="3">
    <cfset gamesArray[j] = #myArray[m]# & "&"  />
    <cfset j =  j + 1 />
</cfloop>

<!---remove garbage character at the end of the array--->
<cfset delete = #arrayDeleteAt(gamesArray, j-1)# />

<!---turn the array back into a list for fun :)--->
<cfset breakUp = #arrayToList(gamesArray,"")# />
<cfset matchArray = arrayNew(1) />
<cfloop list="#breakUp#" index="z" delimiters="#chr(38)#">
    <cftry>
        <cfset matchup = structNew() />
        <cfset matchup.teamOne = trim(listgetat("#z#", 1, "@")) />

        <!--- Get the score start and end places --->
        <cfset teamOneScoreStringStart = #findoneof("0123456789",matchup.teamOne)#>
        <cfset teamOneScoreStringEnd = #LEN(matchup.teamOne)#>

        <!--- Team 1 Score --->
        <cfif teamOneScoreStringStart EQ 0>
            <cfset matchup.teamOneScore = 0>
        <cfelse>
            <cfset matchup.teamOneScore =#Mid(matchup.teamOne,teamOneScoreStringStart,teamOneScoreStringEnd)#>
        </cfif>
        <!--- Remove Score from teamOne String --->
        <cfif teamOneScoreStringStart NEQ 0>
            <cfset teamOneScoreStringStart = teamOneScoreStringStart - 1>
            <cfset matchup.teamOne = #Mid(matchup.teamOne,1,teamOneScoreStringStart)#>
        </cfif> 

        <cfset matchup.teamTwo = trim(listgetat("#z#", 2, "@")) />

        <!--- Get the score start and end places --->
        <cfset teamTwoScoreStringStart = #findoneof("0123456789",matchup.teamTwo)#>
        <cfset teamTwoScoreStringEnd = #LEN(matchup.teamTwo)#>

        <!--- Team 2 Score --->
        <cfif teamTwoScoreStringStart EQ 0>
            <cfset matchup.teamTwoScore = 0>
        <cfelse>
            <cfset matchup.teamTwoScore =#Mid(matchup.teamTwo,teamTwoScoreStringStart,teamTwoScoreStringEnd)#>
        </cfif>
        <!--- Remove Score from teamTwo String --->
        <cfif teamTwoScoreStringStart NEQ 0>
            <cfset teamTwoScoreStringStart = teamTwoScoreStringStart - 1>
            <cfset matchup.teamTwo = #Mid(matchup.teamTwo,1,teamTwoScoreStringStart)#>
        </cfif> 

        <cfset matchup.matchDate = trim(listgetat("#z#", 3, "@")) />

    <cfcatch>
        <!--- Don't care, just make sure it doesn't crash --->
    </cfcatch>
    </cftry>

    <cfset arrayAppend(matchArray,matchup) />

</cfloop>

<!--- LETS SEE OUR LIVE SCORES!!!! --->
<cfif ShowGameDump EQ true>
    <cfdump var="#matchArray#" />
</cfif>    

<!--- Ok lets do something with our live scores, loop through the array and add total score --->
<!--- This will be our new array to hold our information --->
<cfset matchInfoArray = arrayNew(1)>                
<cfloop from="1" to="#arraylen(matchArray)#" index="i">

    <cfset matchupinfo = structNew() />

    <!--- Set MATCHDATE --->
    <cfset matchupinfo.matchdate = matchArray[i].matchdate>

    <!--- Set TOTAL POINTS --->
    <cfif isnumeric(matchArray[i].teamonescore) AND isnumeric(matchArray[i].teamtwoscore)>
        <cfset matchupinfo.total = (matchArray[i].teamonescore + matchArray[i].teamtwoscore)>
    <cfelse>
        <cfset matchupinfo.total = 0>
    </cfif>

    <!--- Set TEAM ONE --->
    <cfset matchupinfo.teamOne = matchArray[i].teamOne />

    <!--- Set TEAM ONE SCORE --->
    <cfset matchupinfo.teamOneScore = matchArray[i].teamonescore />

    <!--- Set TEAM TWO --->
    <cfset matchupinfo.teamTwo = matchArray[i].teamTwo />

    <!--- Set TEAM ONE SCORE --->
    <cfset matchupinfo.teamTwoScore = matchArray[i].teamtwoscore />

    <!--- Add game info to the array --->
    <cfset arrayAppend(matchInfoArray,matchupinfo) />

</cfloop>

<cfif ShowPassFail EQ true>
    <font size="2" style="color:green;">Live Scoring Template Updated Successfully </font><br /><br /><br /><br />
</cfif>    
<cfset variables.UpdatePassed = true>

<cfcatch type="any">
    <!--- If something went wrong, lets let display an error message and dump the catch --->
    <cfif ShowPassFail EQ true>
        <font size="2" style="color:red;">Live Scoring Template Failed to Update </font><br />
    </cfif>    
    <cfset variables.UpdatePassed = false>
    <cfdump var="#cfcatch#">
</cfcatch>

</cftry>

<!--- Lets make the display a little nicer :) --->
<table width="100%" border="1">

<tr align="center">
    <td>
        Team 1
    </td>
    <td>
        Game Info
    </td>
    <td>
        Team 2
    </td>
</tr>

<cfloop from="1" to="#arraylen(matchInfoArray)#" index="i">

<cfoutput>

    <tr>
        <td width="40%" align="left">
            <table border="0" width="100%">
                <tr>    
                    <td align="center" width="60%">
                        <font size="4">
                            #matchInfoArray[i].teamOne# 
                         </font>
                    </td>
                    <td align="right">
                        <font size="6">
                        #matchInfoArray[i].teamOneScore# &nbsp;
                        </font>
                    </td>
                </tr>
            </table>
        </td>
        <td width="20%" align="center">
            Total: #matchInfoArray[i].total#<br />
            #matchInfoArray[i].matchDate#
        </td>
        <td width="40%">
            <table border="0" width="100%">
                <tr>    
                    <td align="left">
                        <font size="6">
                            &nbsp;
                            #matchInfoArray[i].teamTwoScore#
                        </font>
                    </td>
                    <td align="center" width="60%">
                        <font size="4">
                            #matchInfoArray[i].teamTwo#
                        </font>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</cfoutput>
</cfloop>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:01:23.077

您可以使用[preg_match()](http://www.php.net/manual/en/function.preg-match.php)函数

```
<?php
$string = "Tampa Bay 6 Florida 5 (FINAL - OT)";
$result;

preg_match("/^([^\d]+)(\d+)([^\d]+)(\d+)\s*(\(.*\))$/", $string, $result);

print_r($result);
?> 
```

输出：

> 阵列 ( [0] => 坦帕湾 6 佛罗里达州 5 (决赛 - 加时) [1] => 坦帕湾 [2] => 6 [3] => 佛罗里达州 [4] => 5 [5] => (决赛 -旧））

您可以使用预定义的列索引：

```
$first_team = 1;
$first_team_score = 2;
$result[$first_team];
$result[$first_team_score]; 
```

# android - Android中的列表视图导航

> ID：14918946
> 
> 赞同：0
> 
> 时间：2013-02-17T07:34:32.313
> 
> 标签：android

我在我的 android 应用程序中有一个自定义 Listview，在单击列表项时，我可以导航到其他活动，其中显示了有关列表项的所有详细信息！现在我的问题是，我想通过第二个活动导航到下一个/上一个列表项的详细信息。我该怎么做呢？？

我也是android和stackoverflow的新手..

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:09:00.897

我想这更像是一个设计问题，所以我会这样回答 - 你最好的选择是`ViewPager`在新活动中使用类似 a 的东西，它接收选定的项目位置并使用具有相同项目的底层适配器显示它之前的活动。使用`ViewPager`用户可以在项目之间左右滑动。有关此用法的一个很好的示例，您可能需要查看具有完全相同设计模式的 Play Store 上的“Google Reader”。

# java - 为什么Java不编译这段代码？

> ID：14918955
> 
> 赞同：1
> 
> 时间：2013-02-17T07:36:33.537
> 
> 标签：java, class, abstract-class, abstract

我有一些这样的代码：

```
abstract class ExampleOne {
   int dataOne = 1000;

   abstract void display();
}

class ExampleTwo extends ExampleOne {
   int dataTwo;

   ExampleTwo(int varOne) {
      dataTwo = varOne;
   }

   public void disp() {
      System.out.println("Testing");
   }

   public void display() {
      System.out.println(dataOne);
   }
}

class Example {
   public static void main(String args[]) {
      ExampleOne obj = new ExampleTwo(20);
      obj.disp();
      obj.display();
   }
} 
```

当我编译这个时，我得到一个错误：

```
 obj.disp(); 
                     ^
  symbol:   method disp()
  location: variable obj of type ExampleOne 
```

为什么会这样？

我将实例分配`ExampleTwo`给`ExampleOne`，为什么 Java 不选择`ExampleOne`实例而不是`ExampleTwo`？

同样的概念适用于`dynamic polymorphism`！

为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T07:37:56.067

由于 type of `obj`is `ExampleOne`，编译器会搜索你`obj`在`ExampleOne`类中调用的方法，如果找不到，就会抛出错误。

> 为什么 Java 不选择 ExampleOne 实例而不是 ExampleTwo？

那是因为*编译时检查*是根据*引用类型*而不是*实际对象类型*来完成的。然后在运行时调用的实际方法取决于被引用的*实际对象*。这就是我们所说的方法调用的***动态分派***。

您可以向您的类添加一个抽象`disp()`方法`ExampleOne`，以确保编译器对调用感到满意。

```
abstract class ExampleOne{ 
    int dataOne=1000; 
    abstract void display(); 
    abstract void disp();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T07:38:02.623

您的方法仅在 中定义`ExampleTwo`，但没有在 中定义`ExampleOne`。这会导致编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:38:56.500

您的对象类型是`ExampleOne`. 即使您创建了`ExampleTwo`编译器已知的对象类型（即方法和成员）的实例，`ExampleOne`它也没有声明 disp()。

`disp()`如果您希望它以`ExampleOne`多态方式使用，您应该声明一个抽象方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T07:40:53.410

基类对象只能访问它自己的类`Methods`。但`disp()`不是它的方法。所以这就是你得到错误的原因。

为避免错误，您可以这样做：

```
ExampleTwo obj=new ExampleTwo(20); 
                  obj.disp(); 
                  obj.display(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T07:43:27.500

好，

背后的概念是，通过这个 java 结构，您将使用 ExampleTwo 的版本调用 ExampleOne 的方法。

意味着，您只能调用引用变量类型的方法（在您的情况下是 ExampleOne ）。但是调用的方法版本将是底层对象类型（即ExampleTwo）。它由多态性促进。

这里值得一提的是，您可以将对象分配给其类型或其任何超类的任何引用变量，在层次结构中。

# javascript - 如何停止从我们没有事件对象的第三个函数或插 件传播的事件

> ID：14918963
> 
> 赞同：1
> 
> 时间：2013-02-17T07:37:26.587
> 
> 标签：javascript, jquery

我正在创建一个插件来显示一个模态框。我想在 html 上分配事件，以便在该框外单击，它必须关闭。如果从任何事件处理程序调用插件，它将传播到 body ，并调用关闭函数。我想从插件中停止传播事件。因为我不能要求用户在他们的事件处理程序上添加 event.stopPropagtion()。
我做的一个技巧是在绑定关闭事件上添加 setTimeout，但我知道在某些情况下可能会失败。

那么有没有什么方法可以实现。

**示例代码：**

```
(function ($, window, document, undefined) {

    $.fn.modelBox = function (option) {
        var myoptions = $.extend({}, $.fn.modelBox.defaults, option);

        methods['show'].call(this, myoptions);
        return this;
    };

    //default options
    $.fn.modelBox.defaults = {
        //default options
    }

    //internal method
    var clickEvent=function(e){
        modelBox=e.data.modalBox;
        methods['close'].call(modelBox);
    };

    var methods={
        show:function(option){
            var elm=this,
            elm.show();

            elm.bind('click',function(e){
                e.stopPropagation();
            });

            setTimeout(function(){$('html').bind('click',{modalBox:elm},clickEvent)},1000);

            //want to achieve this without time out

        },
        close:function(){
            var elm=this;
            elm.css('display','none');
            $('html').unbind('click',clickEvent);
        }   
    }               
})(jQuery, window, document);

$(document).ready(function(e) {
    $('#testBut').click(function(e) {
        $('#testDiv').modelBox();

    });
}); 
```

HTML

```
<div id="testDiv"></div>
<input type="button" id="testBut" /> 
```

CSS

```
#testDiv{
    width:400px;
    height:400px;
    background:#CCC;
} 
```

# mysql - 在关系数据库中存储“元数据”的正确方法是什么？

> ID：14918964
> 
> 赞同：4
> 
> 时间：2013-02-17T07:37:45.663
> 
> 标签：mysql, sql, normalization, rdbms

我有一个名为 的表`assets`，其中资产可以属于用户、团队或部门，并且可能属于每个部门的多个。我的问题是资产是高度可变的，并且可以具有与它们相关联的属性，这些属性对于每个资产都是不同的。

前任。这些可能是资产：

```
1.)
type:workbench
cost:200
vendor:Acme Co.
color:black
2.)
type:microscope
serial_no:BH-00102
purchase_date:1337800923
cost:2040 
```

这可能会持续到数百到数千种不同类型的资产。

如何以易于查询的规范化方式存储此类数据，而无需在每次添加新资产类型时更改我的表？一些字段也存在于所有资产中，例如成本。

到目前为止，我认为我应该拥有：

```
assets
id,cost,purchase_date,asset_type_id

asset_types
id,name

division_assets
division_id,asset_id

user_assets
user_id,asset_id 
```

但我不知道将不同的数据放在哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:43:56.927

我建议这样做：

```
assets (

   id
   asset_type_id
   vendor_id
   cost
   purchase_date

)

asset_poperties (

    id
    asset_id
    asset_property_type_id
    value

)

asset_property_types (

     id
     property_type

)

asset_types (

   id
   asset_type

)

vendors (

   id
   vendor

) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T08:49:57.107

当我过去遇到这个问题时，“最佳”答案总是会根据我想在数据库中进行多少处理，以及在客户端代码中处理多少而有所不同。

对于它的价值，过去对我来说最有效的方法通常是每个可选属性都有一个表（特别是每个实体类型不是一个表）。所以，在你上面的例子中

```
assets (as per your example)
asset_types (as per you example)
division_assets (as per your example)
user_assets (as per your example)
colours
  asset_id, colour
weights
  asset_id, weight
serial_numbers
  asset_id, serial_number 
```

当然，根据您需要做出的权衡，这对您来说可能是一个糟糕的选择。就个人而言，我喜欢尽可能明确地保持数据架构，包括数据类型和约束，因此下次出现新属性时更改表没有什么戏剧性的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T07:50:54.560

您可以为asset_metadata 添加另一个表

```
asset_metadata
asset_metadata_id,asset_id,metadata_name,metadata_value 
```

如果要对元数据进行规范化和分类，请将其规范化为：

```
asset_metadata
asset_metadata_id,asset_id,metadata_name_id,metadata_value

metadata_name
metadata_name_id,metadata_name_text 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T08:28:06.103

我建议将成本等常见属性放在常规列中。然后再添加一列，在其中放置所有其他可变资产属性的序列化集合。

```
CREATE TABLE assets (
  asset_id INT AUTO_INCREMENT PRIMARY KEY,
  cost NUMERIC(9,2),
  purchase_date DATE,
  variables TEXT
); 
```

您可以将集合序列化为 JSON 或 XML 或任何您想要的。使用您的应用程序代码最容易处理的任何内容。

```
INSERT INTO assets VALUES (123, 49.95, CURDATE(), 'color: black; vendor: Acme Co.'); 
```

优点是您可以随时向文本 blob 添加新属性。缺点是您不能读取或写入单个属性，您必须将整个集合视为一个块。

但是您可以索引单个属性以使其可搜索。您需要为要搜索的每个属性创建一个新表（但这可能是所有属性的一小部分）：

```
CREATE TABLE asset_color (
  asset_id INT NOT NULL,
  color VARCHAR(10),
  PRIMARY KEY (asset_id, color),
  KEY(color)
); 
```

并非所有资产都记录在此表中，只有那些具有颜色的资产。

然后，您可以对所有具有颜色属性的资产进行索引搜索：

```
SELECT assets.*
FROM assets INNER JOIN asset_color USING (asset_id); 
```

您还可以对具有颜色属性且颜色为黑色的资产进行索引搜索：

```
SELECT assets.*
FROM assets INNER JOIN asset_color USING (asset_id)
WHERE color = 'black'; 
```

实际上没有办法设计一个允许变量属性的*规范化数据库。*所有范式首先要求表是一个关系。根据定义，关系必须具有一组固定的属性。

其他人推荐 EAV 表，但 EAV 中的“值”列不符合具有类型的关系列的定义（其他后果是约束在 EAV 表中不起作用）。因此，EAV 表不是关系，也不能满足任何范式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-20T05:16:12.957

您可以创建两个新表：

1) 在下表中定义多个资产属性（与资产一样多）

资产ID

资产属性

资产值

2)asset_attribute 表

属性ID

资产属性

逻辑是需要首先在asset_attribute 表中定义asset_attributes，然后它可以与任何资产（作为外键，从UI 上的下拉列表中）一起使用（链接/标记）并输入适当的值。

希望这可以帮助。

# c++ - 使用迭代器查找元素的位置

> ID：14918970
> 
> 赞同：1
> 
> 时间：2013-02-17T07:38:11.293
> 
> 标签：c++, vector

如何找到向量中元素的索引？假设向量的快照包含

```
10 12 15 23 43 
```

现在我想插入一个数字。

1-插入15 =>返回2（位置）

2- 插入 50 => push_back() => return 5 (位置)

这是我写的，但是我无法将迭代器转换为整数。

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

vector<int> v;
int insertVector(int a);
int main()
{
   int a;
   cout << "enter number: ";
   cin >> a;
   int pos = insertVector(a);
   cout << pos;   // update
   return 0;    
}

int insertVector(int a)
{
   vector<int>::iterator it;
   it = find(v.begin(), v.end(), a);
   if (it == v.end()) {
      v.push_back(a);
      return v.size();
   }
   return it;   // error
} 
```

更新：

如果我更改`return it;`为`return *it;`，则输出错误。像这样：

```
enter number: 10
1
enter number: 20 
2
enter number: 25
3
enter number: 35
4
enter number: 45  
5
enter number: 5
6
enter number: 25
25   // wrong 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:42:32.450

`insertVector`的返回类型是`int`，但您可以返回一个迭代器。将您的代码更改为：

```
int insertVector(int a)
{
   vector<int>::iterator it;
   vector<int>::iterator begin = v.begin();
   it = find(begin, v.end(), a);
   if (it == v.end()) {
      v.push_back(a);
      return v.size();
   }
   return std::distance(begin, it);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:47:14.280

您可以自己显式迭代向量：（不太优雅，但需要对向量进行一次迭代）

```
int position = 0;
for (it = v.begin(); it != v.end(); ++it; ++position) {
     if (*it == a) {
         return position; 
     }
}

v.push_back(a);
return v.size() - 1; 
```

# ruby - lib/mcollective/agents.rb 第 132 行 yield(replies) 堆栈级别太深并崩溃

> ID：14918971
> 
> 赞同：0
> 
> 时间：2013-02-17T07:38:17.770
> 
> 标签：ruby, puppet

我正在使用 Mcollective 2.2.x，并根据教程编写了一个代理。

名为'hello'的代理有一个名为'speak'的动作，在'speak'动作中，它通过XML-RPC调用python方法，代码如下：

Mcollective 的 Ruby 代理 <--

```
require "xmlrpc/client"

module MCollective
  module Agent
    class Hello<RPC::Agent
      # Basic system inventory, same as the basic discovery agent
      action "speak" do

        server = XMLRPC::Client.new('localhost', nil, 8888)
        s = server.call('testls', request[:msg])

        reply[:resultmsg] = s

      end

    end

  end
end 
```

-->

Python XML-RPC 代码：

<--

```
from SimpleXMLRPCServer import SimpleXMLRPCServer

def testls(msg):
    print(msg)
    return msg

server = SimpleXMLRPCServer(('localhost',8888))
server.register_function(testls)
try:
    server.serve_forever()
finally:
    server.server_close() 
```

-->

* * *

这是我的问题，在 mcollective 运行的情况下，我使用以下命令调用 hello 代理：

```
mco rpc hello speak msg='hello' -v 
```

然后，Mcollective 进程因错误“堆栈级别太深”而崩溃，错误位置是“$mcollective_path/lib/mcollective/agents.rb”第 132 行，代码为“yield(replies) #这是一切崩溃的地方”

但是如果我第一次运行这个命令：

`mco rpc hello speak msg='hello' -v --nr`"（没有处理结果，只有一次）

然后 mco rpc hello speak msg='hello' -v`

现在一切正常，永远不会发生错误

我不知道为什么会这样，这让我发疯

如果有人可以提供帮助，将不胜感激！

# asp.net-mvc-4 - 无法启动mvc4 webapp调试，VS2012(Update 1，Update 2 CTP 3)，Windows 8

> ID：14918972
> 
> 赞同：1
> 
> 时间：2013-02-17T07:38:32.963
> 
> 标签：asp.net-mvc-4, visual-studio-2012, iis-express, iis-8

我无法开始调试 mvc4 webapp。尝试调试应用程序时出现以下错误。

如果我尝试使用 IISExpress

![使用 IIS Express](../Images/563170ad2a1baa3220622a2de4e5be50.png)

并使用vs2012调试服务器

![使用vs2012调试服务器](../Images/c88e553443161d60436765485e75595e.png)

我已经尝试了一些可以从网络上找到的修复程序，这里有一些信息可能有助于解决问题

*   我在管理员模式下运行 Visual Studio
*   如果我尝试使用 IIS express 启动它，它会正常启动而不会出错`c:\Program Files\IIS Express\iisexpress /trace:error`
*   我已将“v4.0”的目标平台值更改为“v4.0.30319”`C:\Users\<username>\Documents\IISExpress\config\applicationhost.config`
*   我正在使用 Windows 8，IIS8 并且`aspnet_iisreg`不工作，所以 iis 配置使用`Turn Windows feature On or Off`
*   我正在使用 VS2012 Ultimate

在我应用 CTP 3 更新并安装 Microsoft 的 Git 扩展之前，它运行良好。我无法在应用更新和安装 Git 扩展之间对其进行测试，但这可能是问题的一部分吗？

我最后的手段是重新安装 vs2012，这将是一项艰巨的任务，安装 Visual Studio 的所有更新，天知道是什么！！！

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T20:54:34.213

我有类似的问题，并通过选中/取消选中 IIS express 选项并重新启动 Visual Studio 来解决![在此处输入图像描述](../Images/88efd0339a6c82b3e534c4410feee5fd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:31:05.663

这是一个已知问题。在这里查看： [https ://connect.microsoft.com/VisualStudio/feedback/details/758876/visual-studio-2012-unable-to-start-program-error-when-debuging-website-on-win8-ie#标签](https://connect.microsoft.com/VisualStudio/feedback/details/758876/visual-studio-2012-unable-to-start-program-error-when-debuging-website-on-win8-ie#tabs)

对我来说，打开可用浏览器列表，选择浏览方式并双击 Internet Explorer - 如果你想使用 IE，它工作正常，你也可以使用其他浏览器进行调试，你会没事的 :)

# php - Parse String - 从字符串中删除一些单词

> ID：14918973
> 
> 赞同：2
> 
> 时间：2013-02-17T07:38:33.187
> 
> 标签：php, string, replace

我有一个像这样的字符串：

```
$text = 'Hello this is my string and texts'; 
```

我在数组中有一些*不允许*的单词：

```
$filtered_words = array(
            'string',
            'text'
        ); 
```

我想用 替换所有过滤后的单词`$text`，`***`所以我写道：

```
$text_array = explode(' ', $text);
        foreach($text_array as $key => $value){
            if(in_array($text_array[$key], $filtered_words)){
                $text = str_replace($text_array[$key], '***', $text);
            }
        }
echo $text; 
```

输出：

```
Hello this is my *** and texts 
```

但我还需要替换为的函数`texts`，`***`因为它还包含过滤后的单词（文本）。

我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T07:46:20.057

您可以立即执行此操作，[`str_replace`](http://php.net/str_replace)支持将数组替换为单个字符串：

```
$text = 'Hello this is my string and texts';

$filtered_words = array(
    'string',
    'texts',
    'text',
);

$zap = '***';

$filtered_text = str_replace($filtered_words, $zap, $text);

echo $filtered_text; 
```

输出（[演示](http://eval.in/10359)）：

```
Hello this is my *** and *** 
```

请注意您首先拥有最大的单词并记住何时`str_replace`处于该模式，它将一个接一个地进行替换 - 就像在您的循环中一样。所以较短的词——如果更早的话——可能是大词的一部分。

如果您需要更安全的东西，您必须首先考虑进行文本分析。如果您不知道您可能想要替换但到目前为止您没有想到的单词，这也可以告诉您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:45:47.573

[str_replace](http://php.net/manual/en/function.str-replace.php)可以接受一个数组作为第一个参数。所以根本不需要任何`for each`循环：

```
$filtered_words = array(
    'string',
    'text'
);
$text = str_replace($filtered_words, '***', $text); 
```

# ruby-on-rails - 低延迟的 Chess Rails 应用程序可能吗？

> ID：14918978
> 
> 赞同：1
> 
> 时间：2013-02-17T07:39:24.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, latency

Rails 是否可以实现低延迟的国际象棋应用程序？Rails 框架主要面向无状态的 afaik。

在 Rails 中实现国际象棋的一种方法是给出一个移动（“请求”），从数据库中读取当前位置，检查移动在当前位置是否有效并计算新位置，将该新位置写入数据库，并将其发送给其他玩家。

这具有无状态的优点，因为请求之间的内存中没有任何内容。但它涉及每次都从数据库中获取当前位置。大概这将对延迟产生重大影响。

假设相反，游戏的位置保留在内存中。移动会更新内存中的位置并向其他玩家发送响应。之后更新数据库。如果游戏在许多 Unicorn/Thin/Mongrel 进程上分片，那么如何将请求路由到该游戏的正确 Unicorn 进程。在我的 Nginx/Lighty/Apache 进程和我的 Unicorn/Thin/Mongrel 进程之间是否需要某种路由进程，该进程有一个将游戏映射到其正确 Unicorn 分片的表？

这种类型的问题让我印象深刻，因为许多其他人一定遇到过。在 Rails 中有没有一种惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:18:50.317

为什么不将所有这些存储在像 RabbitMQ 或 Redis 这样的消息队列中？消息队列是持久的和高性能的。这个 Railscast 使用 beanstalkd（一个不同的消息队列）来介绍一个非常相似的应用程序：[http ://railscasts.com/episodes/243-beanstalkd-and-stalker](http://railscasts.com/episodes/243-beanstalkd-and-stalker)

# c++ - C++11：如何定义一个接受特定类型对象的通用引用的函数？

> ID：14918984
> 
> 赞同：5
> 
> 时间：2013-02-17T07:40:36.267
> 
> 标签：c++, c++11

问题：我正在用 C++11 开发一个程序。我想编写一个同时接受右值引用和左值引用的函数。（即通用参考）。

以下函数接受通用引用参数：

```
template<class T> void function(T&& t){/*SNIP*/} 
```

但是，它接受所有类型的参数。它破坏了函数的类型安全。如果我希望它接受特定类型的参数，我该怎么办？

这是我能想到的解决方案：

```
void function(Class& t){/*SNIP*/}
void function(Class&& t){ function(t); } 
```

然而，它很丑。如果我想更改要接受的参数或更改函数名称，我必须更新函数的两个版本。有比这更好的等价物吗？

编辑：问题解决了。你们俩都回答得很好。我对这两个答案都投了 +1 以表示感谢。我打算把这个问题留几天。得票最多的答案将被接受。

EDIT2：我最终得到以下代码：

```
template < class T,
class=typename std::enable_if<std::is_same<Class, typename std::decay<T>::type>::value>::type //Dummy template parameter
>
void function(T&&){} 
```

EDIT3：我为此目的编写了一个宏定义：

```
#define uRefType(T, typeLimit) class T, class=typename std::enable_if<std::is_same<typename std::decay<T>::type, typeLimit>::value>::type 
```

使用示例：

```
template< uRefType(T, Class) > void function(T&&){} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T07:56:56.400

一种方法是使用`std::enable_if`. `type_traits`这是标题提供的结构。如果布尔条件在编译时评估为 true，则它的定义方式`enable_if<A,B>::type`为类型。否则为空。`B``A`

因此，如果你有一个函数模板

```
template <typename T>
void fun(T &&)
{ /*...*/ } 
```

`T`并且您想确保仅在特定类型时才定义它，您可以使用`enable_if<...>::type`构造而不是返回类型（此处为`void`）。然后将布尔条件`A`定义为：*`T`is`int`*，类型`B`定义为函数的原始返回类型（此处为`void`）。

因此，如果我们只想`fun`定义 if `T`is `int`，我们会得到：

```
#include <type_traits>

template <typename T>
typename std::enable_if<std::is_same<int,typename std::decay<T>::type>::value,void>::type
fun(T &&)
{ }

int main()
{
  int    lvali = 3;
  double lvald = 3.3;

  fun(3);
  fun(lvali);

  // fun(3.3);      // this won't be accepted (not an int)
  // fun(lvald)     // this won't be accepted (not an int)

  return 0;
} 
```

请注意布尔条件如何定义如下（`std::`为了更好的可读性而省略）：

```
is_same<int,typename decay<T>::type>::value 
```

该`decay`语句用于确保无论`T`是`int`或`int &`（以及一些其他特殊情况）都有效。

* * *

进一步说明：这种技巧只有在所讨论的函数的定义对于右值和左值都相同时才真正有用。在许多情况下，情况并非如此（因为右值案例将实现移动，左值不会，或类似的东西）。

两个定义实际上相同的典型情况是当函数体很短并且除了将参数转发给另一个（可能重载的）函数调用之外什么都不做：

```
template <typename T>
void fun(T &&obj)
{ other_fun(std::forward<T>(obj)); } 
```

在这种情况下，不使用任何`enable_if`或其他技巧可能是可以的，因为声明`other_fun`将确保最终只接受某些类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:45:02.620

[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)与 一起使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)：

```
template<class T, 
         class = typename std::enable_if<std::is_same<float, T>::value>::type>
void function(T&& t){/*SNIP*/} 
```

并且（正如我在 jogojapan 的回答中首先指出的，我忘了提及）使用[`std::decay`](http://en.cppreference.com/w/cpp/types/decay)on `T`，as`T&`与 a不同`T`，并且`const T`与 T` 不同：

```
template<
  class T, 
  class = typename std::enable_if<
                       std::is_same<float,
                                    typename std::decay<T>::type>::value>::type>
void function(T&& t){/*SNIP*/} 
```

[请参阅http://ideone.com/ztkHsf](http://ideone.com/ztkHsf)上的演示。

# c# - 如何访问中继器内的控件？

> ID：14918992
> 
> 赞同：1
> 
> 时间：2013-02-17T07:41:37.867
> 
> 标签：c#, asp.net

我在转发器中放置了一个文本框，但我不知道访问这些文本框的 ID 是什么。那么我应该如何访问它们？

```
 <asp:Repeater ID="Repeater1" runat="server" DataSourceID="ObjectDataSource1">
        <ItemTemplate>
            <asp:TextBox ID="TextBox1" runat="server" OnTextChanged="TextBox1_TextChanged" AutoPostBack="true" ></asp:TextBox>
        </ItemTemplate>
    </asp:Repeater> 
```

**请不要使用 FindControl！**

我想要类似于以下代码的内容来访问。

```
TextBox1.Text = "Hi"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:44:00.830

我建议你这样做......

```
// another way to search for asp elements on page

 public static void GetAllControls<T>(this Control control, IList<T> list) where T : Control
        {
            foreach (Control c in control.Controls)
            {
                if (c != null && c is T)
                    list.Add(c as T);
                if (c.HasControls())
                    GetAllControls<T>(c, list);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:56:51.570

典型的方法是在没有大量递归的情况下使用 FindControl（效率不高）连接 OnItemDataBound，甚至在中继器上，并在后面的代码中访问数据行的各个元素。您几乎必须使用 FindControl - 但在这种情况下，您不需要递归到控件集合中。

```
void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

      // This event is raised for the header, the footer, separators, and items.

      // Execute the following logic for Items and Alternating Items.
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {

         if (((Evaluation)e.Item.DataItem).Rating == "Good") {
            ((Label)e.Item.FindControl("RatingLabel")).Text= "<b>***Good***</b>";
         }
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T11:11:04.833

恕我直言，最短的方法是遍历转发器的所有项目，找到所需的控件并使用它做任何你想做的事情。示例，在 VB.NET 中

```
 For Each item As RepeaterItem In Repeater1.Items
     Dim temporaryVariable As TextBox = DirectCast(item.FindControl("TextBox1"), TextBox)
     temporaryVariable.Text = "Hi!"
 Next 
```

但请记住，您必须**在**Repeater1 之后执行此操作。*数据绑定*()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-25T15:02:29.407

您可以使用*Repeater.ItemDataBound*

```
<asp:Repeater id="Repeater1" OnItemDataBound="R1_ItemDataBound" runat="server"> 
```

# php - 带有 JS 的 PHP URL 属性

> ID：14918996
> 
> 赞同：0
> 
> 时间：2013-02-17T07:42:20.820
> 
> 标签：php, javascript, html, url

我正在制作一个 HTML5 游戏，每个级别都有一个新的 HTML 页面。每个级别的结果都存储在一个 JS 变量中。

如何使用 URL 将该信息传递到下一页？

我在想类似的东西

> `www.example.com/level5.php?lvl1=10&lvl2=15&lvl3=13`

等等。

如何将 JS 变量值放入这种类型的地址中？

我不需要用JS访问这些信息，但我只需要添加信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:00:42.343

没有 jQuery：

```
var lvl1 = "10";
var lvl2 = "15";
window.location.href = "www.example.com/level5.php?lvl1="+lvl1+"&lvl2="+lvl2; 
```

然后从这个 URL 使用 GET 在 PHP 中创建变量：

```
$lvl1 = $_GET['lvl1'];
$lvl2 = $_GET['lvl2']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:38:11.510

您可以使用以下代码段访问 Javascript 中的 $_GET-Variables：

```
(function(){ // Import GET Vars
   document.$_GET = [];
   var urlHalves = String(document.location).split('?');
   if(urlHalves[1]){
      var urlVars = urlHalves[1].split('&');
      for(var i=0; i<=(urlVars.length); i++){
         if(urlVars[i]){
            var urlVarPair = urlVars[i].split('=');
            document.$_GET[urlVarPair[0]] = urlVarPair[1];
         }
      }
   }
})(); 
```

要访问它们，请使用：

```
document.$_GET['lvl1'] 
```

信用： http: [//failchad.blogspot.ch/2009/01/accessing-get-variables-in-javascript.html](http://failchad.blogspot.ch/2009/01/accessing-get-variables-in-javascript.html)

要添加信息，请使用来自`@tommyf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:56:06.187

包含每个结果的[会话变量](http://php.net/manual/en/reserved.variables.session.php)怎么样？只要会话处于活动状态（这通常意味着只要浏览器处于打开状态），分数就会在每个级别结束时更新。如果会话中没有分数，则应加载第一级。为了保存进度，您可以提供用户下次需要输入的“进度键”。

作为替代方案，如果您更喜欢只使用 javascript，您可以查看[HTML5 LocalStorage](http://www.linuxforu.com/2012/04/html5-localstorage-offline-web-applications/)。如果您考虑到浏览器已经具有 HTML5 兼容性，那么您的情况可能是一个不错的选择。

GET 参数的问题在于，无论您选择在 url 中存储高分的名称如何，人们都会进行调查并很快能够更改他们的高分以解锁高分带来的任何奖励，甚至达到最高分。垃圾邮件列表（即：排名第一：购买此 blablabla $xx blabla.com（9999999999 点））。LocalStorage 更难作弊（但很容易），而会话变量更难作弊。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T07:45:13.673

您可以使用 jQuery 更改链接的“href”属性值：

```
$("#lvl2link").attr("href","www.example.com/level2.php?lvl1=" + score); 
```

不用jQuery也能达到同样的效果。

这是一个 JSFiddle：http: [//jsfiddle.net/ZPv93/1/](http://jsfiddle.net/ZPv93/1/)