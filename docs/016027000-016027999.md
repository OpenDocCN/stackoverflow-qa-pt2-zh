# StackOverflow 问答 16027000-16027999

# api - Google Apps 脚本和外部 API 授权在标头中失败

> ID：16027002
> 
> 赞同：1
> 
> 时间：2013-04-16T00:53:33.350
> 
> 标签：api, google-apps-script, harvest

试图让这个工作。在参数列表之后，我不断收到 Missing ) 。（第 6 行，文件“代码”）解雇。我已经仔细检查了我的括号，但无济于事。我错过了什么吗？

我希望这是一个合理的问题。谢谢你。

```
function myFunction() {
  var url = "https://company.harvestapp.com/people";
  var headers = {
    "Accept": "application/xml",
    "Content-Type": "application/xml",
    "Authorization": "Basic " + Utilities.base64Encode(dude@dude.com +":"+pw)
     };
  var response = UrlFetchApp.fetch(url,headers);
  var text = response.getResponseCode();
  Logger.log(text);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-11T06:03:15.583

知道了。还要感谢布赖恩。我终于意识到你需要一个“选项”对象来传递方法和标题。

```
function myFunction() {
    var url = "https://swellpath.harvestapp.com/people/";
    var user = "dude@dude.com";
    var password = "supersecurepw";

    var headers = {
        "Accept": "application/xml",
        "Content-Type": "application/xml",
        "Authorization": "Basic "+ Utilities.base64Encode(user+":"+password)
    };

    var options = {
        "method" : "get",
        "headers" : headers 
    };

    var response = UrlFetchApp.fetch(url,options);

    Logger.log(response);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:02:19.780

可能会有其他错误，但是您的第一个问题是您需要将“headers”对象添加到“options”对象，然后执行以下操作

```
 var url = "https://company.harvestapp.com/people";

    var headers = { "Accept": "application/xml",
                   "Content-Type": "application/xml",
                  "Authorization": "Basic " + Utilities.base64Encode(dude@dude.com +":"+pw)
                  };

      var options ={
                    "headers" : headers
                   };
       var response = UrlFetchApp.fetch(url,options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:09:54.990

编辑：

尝试：

```
 "Authorization": "Basic " + Utilities.base64Encode("dude@dude.com:"+pw) 
```

# facebook - OAuth2 新手 - 从 wordpress 插件发布到 facebook 墙

> ID：16027004
> 
> 赞同：2
> 
> 时间：2013-04-16T00:53:39.373
> 
> 标签：facebook, wordpress, oauth-2.0

我真的坚持理解将我为 Wordpress 构建的插件集成到 facebook 所需的步骤，以便它可以发布到目标用户的墙或他们的粉丝页面墙。

具体来说，我坚持理解 OAuth2 以及如何实现它。我对 REST 类型的 API 并不陌生，但似乎有些是在客户端身份验证级别完成的，有些是在服务器级别完成的，以满足我的需要。

这是场景：

WP Admin 下载并安装插件，访问 wp-admin 中的配置页面。创建一个 facebook 应用程序以获取 AppID 和 App Secret 并将它们粘贴到 wp-admin 页面的配置屏幕中的相关框中。这里需要身份验证和授权才能发布到墙上 需要不会过期的令牌，因此服务器可以永久地发布作为其功能的一部分而无需重新验证（当然，除非用户手动断开链接）。

这就是我陷入身份验证和授权部分的地方。

我有一个可见的用户可交互页面，用户单击该按钮以链接到 Facebook。

我是否将用户重定向到这里（将他们从 wp-admin 中带走）然后等待他们返回？

我知道 facebook 返回一个“代码”，然后我用它交换一个“令牌”——对吗？

从一些挖掘我发现我需要请求offline_access。

一旦我有了令牌，我认为我可以很容易地理解 Graph API，因为我只会在我想写一篇文章的每一点将凭据传递给 facebook。

我首先需要枚举用户是管理员的页面，然后允许 wp-admin 从列表中选择特定页面——我想这也在 Graph API 中。

请您帮助消除身份验证/授权系统的迷雾，我对 OAuth2 完全陌生，也从未接触过原始 OAuth。

理论上，当我在授权点的网络客户端中时，我可以使用 Javascript SDK 并使用 AJAX 来更新后端服务器？

提前致谢。詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:17:32.843

你的基本理解是正确的。您需要将用户从您的页面引导到 Facebook `Authorization URL`，让他们授予对您的应用程序的访问权限，以便它可以代表他们发布。作为该过程的一部分，您指定一个`Callback URL`，一旦他们授予对您的应用程序的访问权限，用户将返回到该位置。该过程的最终结果是将访问令牌返回给您的应用程序。

这是一个很好的资源，它准确地解释了正在使用的各种 OAuth 风格所涉及的内容（注意：Facebook 支持 OAuth 2.0）：

[https://github.com/Mashape/mashape-oauth/blob/master/FLOWS.md](https://github.com/Mashape/mashape-oauth/blob/master/FLOWS.md)

如果您正在寻找使用 PHP 编码 Facebook OAuth 的帮助，您应该查看 Temboo 如何简化流程 - 详情请参阅以下链接：

[https://www.temboo.com/library/Library/Facebook/OAuth/](https://www.temboo.com/library/Library/Facebook/OAuth/)

（全面披露：我在 Temboo 工作）

# linux - 自动将输入输入到 Linux 命令行

> ID：16027007
> 
> 赞同：6
> 
> 时间：2013-04-16T00:53:44.453
> 
> 标签：linux, git, bash, ubuntu

如果我有一个提示输入 2 个或更多输入的 linux 命令，如何通过在命令行中定义这些输入将其传递给提示？您可以在命令后面添加一些东西来执行此操作吗？

在下面的示例中，如何运行命令并将用户名和密码传递给它，而无需在系统要求时输入它们？

**询问用户名和密码的示例命令**

```
git clone https://github.com/username/repo.git 
```

*只是一个例子，请不要建议使用 ssh 而不是 http 进行 git clone，或者在命令中公开密码是不安全的*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:19:50.690

“expect”包就是为这种事情而构建的。如果您安装它，请查看“autoexpect”。

例子：

```
autoexpect
# Output: autoexpect started, file is script.exp

# Login with user/pass with ssh - just to test
ssh -o PubkeyAuthentication=no myuser@myhost
<type-password>
<command>
<command>
exit

# Now exit once more to exit autoexpect
# Output: autoexpect done, file is script.exp 
```

接下来是编辑 script.exp 并清理它。有大量关于此的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-12-16T08:17:46.733

我想要赏金，但我不能以 dup 的身份关闭，因为答案在不同的 SE 上。

引用[超级用户的答案](https://superuser.com/questions/1610065/failed-attempt-to-expect-and-send-in-an-expect-script-in-mingw)：

考虑到`expect`它的[手册页](https://linux.die.net/man/1/expect)指出：

> 连接到另一个网络或 BBS（例如，MCI Mail、**CompuServe**）。

Compuserve，那是在法国大革命之前还是之后？反正。

```
spawn "git clone ssh://git@domain.com/myproject.git"
expect "Enter passphrase for key..." { send "myPassword\r" }
read -p "enter..." 
```

也许最后一行是多余的。

[*Ceterum censeo*](https://en.wikipedia.org/wiki/Carthago_delenda_est)：不要那样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-21T06:28:50.123

*注意：Git 要求您使用 git 令牌而不是密码。*

> empty 是一个实用程序，它提供了一个简单的接口来在伪终端会话下执行和/或与进程交互。
> 
> 这个工具在 sed 与 telnet 或 FTP 等交互式程序通信的 shell 脚本编程中绝对有用。
> 
> 在某些情况下，空可以替代 TCL/expect 或其他类似的编程工具。

将下面的代码复制到您的脚本文件中。

通过从命令行提供以下参数（如您所要求的那样）使其可执行并运行脚本：

*   Git repo URI（作为第一个参数）
*   Git 用户名（作为第二个参数）
*   Git 用户令牌（作为第三个参数）

例子：

假设您的脚本文件名是`git_clone.sh`：

```
./git_clone.sh  <GIT_REPO_URI>  <GIT_USERNAME>  <GIT_USER_TOKEN> 
```

```
#!/bin/bash
git_repo="${1}"
git_user="${2}"
git_token="${3}"

empty -f -i in.fifo -o out.fifo -pempty.pid  git clone  

empty -w -i out.fifo -o in.fifo sername  "${git_user}\n"
empty -w -i out.fifo -o in.fifo assword  "${git_token}\n"

exit 0 
```

有关更多详细信息，`empty`请参阅其手册： http: [//manpages.ubuntu.com/manpages/bionic/man1/empty.1.html](http://manpages.ubuntu.com/manpages/bionic/man1/empty.1.html)

*注意：`empty`命令需要通过安装`empty-expect`包可用。*

要在 Ubuntu 18.04 或 16.04 上安装，您可以运行：

```
add-apt-repository "deb http://archive.ubuntu.com/ubuntu $(lsb_release -sc) universe"
apt update;
apt install -y empty-expect 
```

*### 更新：要在 Ubuntu 20.04 中安装软件包，您可以通过运行以下命令`empty-expect`来使用 Ubuntu 18.04（仿生）存储库：`universe`*

```
echo 'deb http://archive.ubuntu.com/ubuntu bionic universe' > /etc/apt/sources.list.d/bionic-universe.list
apt update
apt install -y empty-expect 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-19T11:46:47.377

## 在[bash](/questions/tagged/bash "显示标记为“bash”的问题")下，您可以使用`script`

`script`将生成一个可以在[bash下与之交互的](/questions/tagged/bash "显示标记为“bash”的问题")***tty***，使用. 这可以在不需要的情况下完成：`coproc``expect`

> ```
> NAME
>       script - make typescript of terminal session
> 
> SYNOPSIS
>       script [options] [file]
> 
> DESCRIPTION
>       script  makes  a  typescript  of everything on your terminal session.
>       The terminal data are stored in raw form to the log file and information
>       about timing to another (optional) structured log file. The timing
>       log file is necessary to replay the session later by scriptreplay(1) and to
>       store additional information about the session. 
> ```

### 演示

```
coproc script -f /dev/null 
```

可以返回：

```
[1] 2103233 
```

这会启动一个 subshel​​l，您可以与之交互，

```
while read -t 0 -u ${COPROC[0]};do
    read -t .02 -ru ${COPROC[0]} line
    echo "$line"
done 
```

应该产生类似的东西：

```
Script started, output log file is 'typescript'.
user@hostname:~$ 
```

然后

```
echo >&${COPROC[1]} ssh user@target
while [ ! "$line" ] || [ "${line//*password*}" ];do
    read -t .02 -ru ${COPROC[0]} line
    echo "$line"
done
echo >&${COPROC[1]} TheStrongPasswordInClear
while [ ! "$line" ] || [ "${line//*\$*}" ];do
        read -t .02 -ru ${COPROC[0]} line
    echo "$line"
done 
```

在那里，您可以看到很多行，例如

```
ssh user@target
user@target's password:

Linux target 5.00.0-0-amd64 # Distro ...
issue.net content...
Last login: Sun Dec 19 12:23:37 2021 from somewhere

user@target:~$ 
```

从那里，您可以：

```
getres() {
    while read -t 0 -u ${COPROC[0]};do
        read -t .02 -ru ${COPROC[0]} line
        echo "$line"
    done
}

echo >&${COPROC[1]} uptime
getres 
```

```
uptime
12:38:38 up 21 days,  3:52, 122 users,  load average: 3.20, 2.19, 1.59 
```

最后

```
echo >&${COPROC[1]} exit  
getres 
```

```
exit
logout
Connection to target closed. 
```

# 完整的可执行[bash](/questions/tagged/bash "显示标记为“bash”的问题")脚本

这在`bash 5.1.4(1)-release`, on下运行`GNU/Debian Linux 11.2`：

```
#!/bin/bash
line='' Debug=false

exp1() { # Collect input by bytes, until expected string (1st arg)
    local char attended="*${1}"
    line=
    IFS= read -d '' -ru "${COPROC[0]}" -t 2 -n 1 line
    while IFS= read -d '' -ru "${COPROC[0]}" -t .02 -n 1 char;do
        line+="$char"
        case "$line" in
            *$1 ) $Debug && echo "GOOD ${line@A} match ${attended@A}"
                  return 0;;
        esac
    done
    $Debug && echo "BAD: ${line@A}"
    return 1
}
expect() { # expect <Expected String after> <Command> [switches] [args]
    local expectStr="$1" maxErr=5
    shift
    [ "$1" ] && echo >&"${COPROC[1]}" "$@"
    while ! exp1 "${expectStr}" && ((maxErr--));do sleep .2;done
}
getAns() { # getAns <ResultVar> <Command> [switches] [args]
    local -n res=$1
    res=''
    shift
    local req="$*" maxErr=5
    echo >&"${COPROC[1]}" "$req"
    exp1 "$req"$'\r\n'
    while ! exp1 "$ " && ((maxErr--));do res+="$line" ;sleep .2 ;done
    res+="${line%$'\r\n'*}"
} 
```

```
read -rp target:\  target
read -rsp password:\  pass
echo "${pass//?/*}"

coproc TERM=none script -f /dev/null
IFS= read -ru "${COPROC[0]}" line &&
    $Debug && echo "1 >>> $line <<<"

expect '$ '
expect 'password: ' ssh "$target"
expect '$ ' "$pass"

getAns ut uptime
# shellcheck disable=SC2154 # referenced but not assigned (ut ??)
echo "${ut@A}"

expect '$ '  exit 
```

运行示例：

```
target: user@target
password: ************
ut=' 11:06:20 up 5 days, 2:19, 22 users, load average: 0.74, 1.13, 1.27' 
```

您可能会在我的网站上找到此脚本：[expectScr.sh](https://f-hauri.ch/vrac/expectScr.sh)或[expectScr.sh.txt](https://f-hauri.ch/vrac/expectScr.sh.txt)，准备好获取*资源*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T00:57:03.023

或许这

```
{
  echo user
  echo pass
} | git clone https://github.com/username/repo.git 
```

[`ref`](http://mywiki.wooledge.org/BashGuide/CompoundCommands)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T01:02:36.890

根据您想要这样做的原因，您可能想要探索在没有密码的情况下使用 github 存储库的方法：

[https://help.github.com/articles/managing-deploy-keys](https://help.github.com/articles/managing-deploy-keys)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-22T05:40:05.810

不知道你有没有试过这个。但这在我们执行任何 sudo cmd 并需要输入密码的情况下很有用。你可以在你的情况下试试这个。

但我认为您至少必须提供用户名。

例如 ：

```
sudo -S <<< "password" sudo yum -y update 
```

在你的情况下，它应该是这样的：

```
sudo -S <<< {password} git clone https://github.com/{username}/repo.git 
```

# c# - OracleConnectionStringBuilder 异常

> ID：16027009
> 
> 赞同：1
> 
> 时间：2013-04-16T00:53:55.890
> 
> 标签：c#, winforms, oracle11g

我正在使用 Oracle.DataAccess.Client 访问数据库。它一直都很好，然后突然之间，我会

> 'Oracle.DataAccess.Client.OracleConnectionStringBuilder' 的类型初始化程序引发了异常。内部异常：配置系统初始化失败

从这行命令

> OracleConnectionStringBuilder strBuilder = new OracleConnectionStringBuilder();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:20:08.973

问题解决了。这是因为我之前使用的是 userSettings，然后我切换到 applicationSettings。因此，我需要删除以前由我的应用程序生成的 user.config 文件，现在一切恢复正常。

对于有类似问题的用户，可以在 C:\Users\[userName]\AppData\Local\Technology\[programName] 中找到 user.config

# c# - WinForms EndInit() 在继承的表单上过早调用

> ID：16027010
> 
> 赞同：0
> 
> 时间：2013-04-16T00:54:09.427
> 
> 标签：c#, winforms, inheritance, initialization

我们在继承表单的初始化方面遇到了一个意想不到的问题。我期待这个工作：

```
public class MyChildForm : BaseForm
{

    public MyChildForm() {
        InitializeComponent();
    }
    public overrides void EndInit() {
        base.EndInit();

        //Do special tweaks to buttons on MyChildForm!
        DoYoAwesomeThang(myButton);
    }
} 
```

但是它会崩溃，因为 MyChildForm 上的按钮尚未初始化。经过调查发现这是由于我们在实例化 MyChildForm 时发生的以下事件序列：

1.  BaseForm 构造函数调用

2.  BaseForm.InitializeConstructor() 调用

3.  BaseForm.InitializeConstructor 触发 EndInit()

4.  MyChildForm.EndInit() 被调用....

    ...但是 MyChildForm.InitializeComponent() 还没有调用所以我没有我的按钮！

所以我理解这个问题，但我对为什么我做错了感到困惑。最后，我在 InitializeComponent() 之后将按钮调整放在 MyChildForm 构造函数中，这很有效，但我认为这种事情是 EndInit() 的工作。

我的问题：

1.  将按钮调整放在 EndInit() 中是错误的吗？

2.  在继承的表单上实现 EndInit() 是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:03:17.547

`EndInit`当控件在表单中初始化时，将被多次调用。有时，在调用时会存在尚未初始化的控件`EndInit`。可能，该`Loaded`事件是您正在寻找的。

# windows-8 - API 密钥可以安全地存储在 Windows 应用商店应用程序中吗？

> ID：16027012
> 
> 赞同：2
> 
> 时间：2013-04-16T00:54:28.223
> 
> 标签：windows-8

我想编写一个使用 3rd 方 API 的 Windows Store 应用程序。这个 API 让我花钱，所以我会向使用应用内购买的人收费。

第 3 方将为我提供 API 密钥。有没有办法将此 API 密钥安全地存储在 Windows 应用商店应用程序中？如果有人发现了 API 密钥，他们可以免费使用 API，而我会被收费。

我可以使用 C++ 或 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:01:29.520

没有什么是 100% 安全的。

您打算如何存储 API 密钥？如果你只是把它放在一个字符串中，它会很容易被发现。如果您在使用前对密钥进行加密并在内存中对其进行解密，则将很难找到它。确保对其[进行加密](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:10:54.497

如果您将 API 放在应用程序中，任何有时间对您的产品进行逆向工程的人都可以找到它。

如果密钥不被其他人使用非常重要，我建议制作在线服务并简单地使用您的 Windows Store 应用程序与服务器通信以获得结果。换句话说，只有您的在线服务会以这种方式知道 API 密钥。

如果这不可能，那么您只需要面对这样一个事实，即如果您的应用程序足够了解并且值得“破解”，那么您的密钥将在某个时候被发现。为了让它更难一点，我建议避免使用 C#，因为逆向工程 .NET 应用程序非常容易，即使它们已被混淆。这意味着如果第一种方法不适合您，请使用 C++ 并确保您的密钥已加密。

# ios - 屏幕下方不需要的白条

> ID：16027015
> 
> 赞同：0
> 
> 时间：2013-04-16T00:54:33.830
> 
> 标签：ios, objective-c

我有两个视图控制器，vc1 和 vc2。我从 vc1 转到 vc2，在 vc2 内我使用网络视图播放 youtube 视频。当我回到 vc1 时，我的屏幕下方出现一个白条。这是我的代码。

```
/* From App Delegate to go vc1 */
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    VC1 *vc1 = [[VC1 alloc] init];
    navigationController = [[UINavigationController alloc] init];
    [navigationController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [navigationController setToolbarHidden:YES];
    [navigationController setNavigationBarHidden:YES];
    [navigationController setWantsFullScreenLayout:YES];
    [navigationController pushViewController:vc1 animated:FALSE];
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
}

/* From VC1 to VC2 */
-(IBAction)gotoVC2:(id)sender
{
    VC2 *vc2 = [[VC2 alloc] init];
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.navigationController vc2 animated:YES];
}

/* Setting up YouTube View */
-(void) addYouTubeLink:(UIWebView*)webView url:(NSString*)url
{
    for (UIView* shadowView in [webView.scrollView subviews])
    {
        if ([shadowView isKindOfClass:[UIImageView class]]) {
            [shadowView setHidden:YES];
        }
    }
    NSString *videoHTML = [NSString stringWithFormat:@"<html><head></head><body><iframe class=\"youtube-player\" type=\"text/html\" width=\"420\" height=\"315\" src=\"http://www.youtube.com/embed/%@\" align=\"middle\" frameborder=\"1\"></iframe></body></html>",url];
    [webView loadHTMLString:videoHTML baseURL:nil];
}
/* Going Back to VC1 */
- (IBAction)goBack:(id)sender {
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.navigationController setNavigationBarHidden:YES];
    [appDelegate.navigationController setWantsFullScreenLayout:YES];
    [appDelegate.navigationController popViewControllerAnimated:YES];
} 
```

请参阅下面白条的截图。

![截屏](https://i.stack.imgur.com/oGqKO.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:57:22.443

尝试使用根视图控制器初始化导航控制器。

```
navigationController = [[UINavigationController alloc] initWithRootViewController:vc1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:28:00.423

我不明白为什么要使用 appDelegate.navigation 控制器，因为您可以使用 rootViewController 启动导航控制器，并根据需要推送和弹出另一个控制器。

但是针对您的情况，我认为大约是`frame problem`. 在你的`goback:sender`方法中，在`popViewControllerAnimated:`调整`vc1's frame`你想要的方式之后。为此，我认为您应该`retain`在代码中使用 vc1 控制器。喜欢

```
 @property (nonatomic, strong) UIViewController *vc1; 
```

在您的标题中，并且

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
           VC1 *vc1 = [[VC1 alloc] init];
           self.vc1 = vc1; 
```

我希望它有帮助:)

# core-bluetooth - corebluetooth：iOS 发现了我不需要的特性

> ID：16027020
> 
> 赞同：1
> 
> 时间：2013-04-16T00:55:32.313
> 
> 标签：core-bluetooth

我打电话`[CBeripheral discoverCharacteristics:forService:]`给我正在寻找的特征列表。

回调似乎返回了设备为此服务宣传的`[CBPeripheralDelegate CBPeripheral:didDiscoverCharacteristicsForService:error:]`所有特征，而不仅仅是我要求的那些。

我在发现特征方面缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T20:51:35.740

该方法将返回服务的所有特征。这取决于您使用的硬件以及硬件具有哪些服务/特性。

例如，CC2540 keyfob 设备只有 9 个服务和 25 个特性。尽管有更多的服务/特性可以与 BLE 架构一起使用，但这些是唯一可以与 CC2540 设备一起使用的服务/特性。可以使用 IAR 工作台将特性添加到硬件设备上。

# javascript - jQuery动画变量的宽度

> ID：16027022
> 
> 赞同：2
> 
> 时间：2013-04-16T00:55:49.783
> 
> 标签：javascript, jquery, jquery-animate

我无法在我设置为变量的 div 宽度上获得流畅的动画。它的动画应该类似于进度条。我在[JSfiddle](http://jsfiddle.net/srQVv/)上有一个演示。如何获得流畅的动画？谢谢！

HTML：

```
<div id="pb"><div></div></div>

<a href="#" class="test" data-value="25%">25</a>
<a href="#" class="test" data-value="50%">50</a>
<a href="#" class="test" data-value="75%">75</a>    
<a href="#" class="test" data-value="100%">100</a> 
```

jQuery：

```
$(function () {
    $( "#pb div" ).width("50%");

    $('.test').click( function () {
         var value = parseInt($(this).attr('data-value'));
        var test = $( "#pb div" ).css({width: (value) + '%'});

        $('#pb div').animate({
            width: test,
        }, 1000);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:59:34.617

## ***[`jsFiddle Demo`](http://jsfiddle.net/srQVv/2/)***

你已经在那里了:)

只需在动画中使用您的值，而不是直接通过 css 属性设置宽度，如下所示：

```
$('#pb div').animate({
        width: value+"%",
    }, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:00:48.557

您的行**var test = ...**已经在更改 CSS 宽度。相反，只需使用以下动画功能：

```
$(function () {
    $( "#pb div" ).width("50%");

    $('.test').click( function () {
        var value = parseInt($(this).attr('data-value'));
        test = $( "#pb div" ).animate({width: (value) + '%'});
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T00:59:01.507

您使用`.css`和设置相同的宽度`.animate`，因此它不会有任何动画帧：

```
$(function () {
    $("#pb div").width("50%");

    $('.test').click(function() {
        $('#pb div').stop().animate({
            width: $(this).data('value')
        }, 1000);
    });
}); 
```

**演示：http: [//jsfiddle.net/srQVv/1/](http://jsfiddle.net/srQVv/1/)**

# javascript - Html5 - window.onbeforeunload 捕捉_only_刷新、后退/前进

> ID：16027025
> 
> 赞同：0
> 
> 时间：2013-04-16T00:56:13.457
> 
> 标签：javascript, html

我想用这个：

```
window.onbeforeunload = function () {
    return "u sure?";
} 
```

仅在刷新、前进/后退事件上。目前，此代码可以捕获所有内容。我不希望它捕获链接点击或形成帖子事件。另外，我需要在该函数中包含所有代码，所以我在想，也许有这样的东西（伪代码）：

```
window.onbeforeunload = function () {
    if(it was not a click && it was not a form post)
       return "u sure?";
} 
```

所以，重新假设：是否有可能获得导致 .onbeforeunload 触发的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:59:36.893

我能想到的最简单的解决方案是取消绑定`onbeforeunload`表单提交或链接点击的事件。

```
Array.prototype.forEach.call(document.querySelectorAll('form'), function (elem) {
    elem.addEventListener('submit', function () {
        window.onbeforeunload = function () {}
    });
}); 
```

# spring-mvc - 在 Spring MVC 中，如何根据有效负载将相同的 URL 映射到不同的控制器方法？

> ID：16027034
> 
> 赞同：2
> 
> 时间：2013-04-16T00:57:07.727
> 
> 标签：spring-mvc

我有 POST /users URL 我想根据有效负载传递用户数组或单个用户。我想在春天用不同的方法来映射它。

例如

发布/用户

[ {“名字”：“test1”，“姓氏”：“test1”}，{“名字”：“test2”，“姓氏”：“test2”}]

应该去

控制器的 createBulk(Users[] users) 方法

和

发布/用户

{“名字”：“test1”，“姓氏”：“test1”}，{“名字”：“test2”，“姓氏”：“test2”}

应该去

控制器的 createUser(Users users) 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:29:48.973

不允许在不同的java-class方法上用相同的RequestMethod注解相同的RequestMapping，但是可以根据自己的需求来判断做什么事情（走哪个进程），下面给出一个例子：

```
@RequestMapping(value = "/users", method = RequestMethod.POST)
public String createUser() {
     if (some condition) 
         // do sth. e.g:create bulk
     else
         // do oth. e.g:create user
} 
```

也许对你有帮助:)

# php - 通过 POST 将 NSMutableArray 传递给 PHP

> ID：16027035
> 
> 赞同：0
> 
> 时间：2013-04-16T00:57:10.257
> 
> 标签：php, ios, objective-c

我正在尝试在 PHP Web 服务的帖子中包含一个数组。它似乎不起作用，我相信它一定是某种格式问题，但我不知道如何格式化它。我有以下 iOS 帖子字符串：（我知道如何发布，这不是问题。）

```
NSString *post = [NSString stringWithFormat:@"&action=post_data&start_time=%f&runners=%@&racename=%@&num_splits=%d", timeInterval, runners /* NSMutableArray */, raceName, numberOfSplits]; 
```

"runners" 是 NSMutableArray 并且以这种方式传递它似乎无法正常工作。

我应该如何传递一个数组？我无法更改 PHP，并且该服务需要一个数组。我会将 JSON 对象传递给服务，但这是我无法控制的。

PHP 如下：

```
$runners = $_POST["runners"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:41:14.217

我不清楚 PHP 想要在该参数中获得什么。

如果 PHP 期望在 中找到一个数组`$runners`，那么您需要发送一个包含此内容的 POST 查询（至少）：

```
runners[]=element1&runners[]=element2&... 
```

这将被 PHP 翻译成一个数组

```
{ 'element1', 'element2', ... } 
```

如果您改为发送

```
runners[key1]=element1&runners[key2]=element2&... 
```

那么您将在 PHP 中获得与您编写的结果相同的结果

```
$runners = array(
     'key1' => 'element1',
     'key2' => 'element2',
      ...
); 
```

JSON 与它无关，*除非 PHP 正在做一个`json_decode`on`$runners`* . （您对这种情况只字未提，所以我认为不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T14:43:26.633

伊塞米是对的。要将数组作为 post 变量传递，您需要按以下格式创建 url 字符串：

```
http://myserver.com/test.php?myArray[]=123&myArray[]=456 
```

这是我实现它的方式：

```
NSArray *arrayWithIDs = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:123], [NSNumber numberWithInt:456], nil];
NSString *postVarArrayString = @"";
NSString *separator = @"?";
for (int i=0; i<[arrayWithIDs count]; i++) {
    if (i>0) {
        separator = @"&";
    }
    postVarArrayString = [NSString stringWithFormat:@"%@%@myArray[]=%d", postVarArrayString, separator, [[arrayWithIDs objectAtIndex:i] integerValue]];
}

// url
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:
                                   @"http://myserver.com/test.php"
                                   @"%@"
                                   , postVarArrayString]
             ];

NSLog(@"%@", [url absoluteString]); 
```

# java - 做...而不是循环

> ID：16027037
> 
> 赞同：-1
> 
> 时间：2013-04-16T00:57:15.100
> 
> 标签：java, do-while

我`while`在java中的语句有问题。这是我的代码（我对此很陌生）...

```
import java.text.DecimalFormat;
import java.util.Scanner;

public class ElecticBillLab6 {
    public static void main(String[] args) {

    int accountNumber;
    int customerName;
    int oldMeterReading;
    int newMeterReading;
    int usage;
    double charge = 0;
    String name;
    String lastName;
    String response;
    final double baseCharge = 5.00;
    int yes = 1;
    int no = 2;
    boolean YesResponse;

    Scanner keyBoard = new Scanner(System.in);

    do {

        System.out.print("Customer's first Name? ");
        name = keyBoard.next();
        System.out.print("Customer last name?");
        lastName = keyBoard.next();
        System.out.print("Enter customer account number ");
        accountNumber = keyBoard.nextInt();
        System.out.print("Enter old meter reading ");
        oldMeterReading = keyBoard.nextInt();
        System.out.print("Enter new meter reading ");
        newMeterReading = keyBoard.nextInt();

        usage = (newMeterReading - oldMeterReading);

        if (usage < 301) {
            charge = 5.00;

        } else if (usage < 1001) {
            charge = (5.00 + (.03 * (usage - 300)));
        } else if (usage > 1000) {
            charge = (35.00 + ((usage - 1000) * .02));
        }

        DecimalFormat df = new DecimalFormat("$,###.00");
        System.out.println("PECO ENERGY");
        System.out.println("Customer Account Number " + accountNumber);
        System.out.println("Name on Account " + name + lastName);
        System.out.println("Last Month Meter Reading: " + oldMeterReading);
        System.out.println("This Month Meter Reading: " + newMeterReading);
        System.out.println("Current Usage : " + usage);
        System.out.println("Your current month charges are "
                + (df.format(charge)));

        System.out
                .println("Do you want to enter another customer's meter reading?");
        System.out.print("Enter 1 for yes or 2 for no.");
        response = keyBoard.next();

    } while (response == "1");

}
} 
```

该程序只执行一次，但不能正确循环。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T01:00:57.400

你不能用 == 比较字符串。

利用

```
while(response.equals("1")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T01:00:50.917

尝试：

```
response.equals("1") 
```

`==`应用于字符串仅`true`当它是同一个对象时才返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T01:01:17.277

这`response == "1"`不是`String`在 Java 中比较 s 的方法。

您实际上想要使用`response.equals("1")`它，它将比较两个`String`s 的内容，而不是内存位置。

# windows - windows内核通过网络调试问题

> ID：16027043
> 
> 赞同：1
> 
> 时间：2013-04-16T00:57:41.337
> 
> 标签：windows, windbg, remote-debugging, device-driver, visual-studio-debugging

我正在尝试让 Windows 内核调试通过网络工作。

我的 NIC 在“支持调试的网络适配器”列表中。 [http://msdn.microsoft.com/en-us/library/windows/hardware/hh830880](http://msdn.microsoft.com/en-us/library/windows/hardware/hh830880)

硬件 ID：PCI\VEN_14E4&DEV_166A&SUBSYS_166A14E4&REV_10

我试过用[Visual Studio](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439353%28v=vs.85%29.aspx)设置它，我也试过[手动设置它](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439346%28v=vs.85%29.aspx)。

网卡内置在主板（Tyan s3992）中，有两个端口。我尝试为两者设置busparams，但都没有奏效。两者都不会获得 DHCP 地址。我试图让它与自动私有 IP 地址一起工作，但这也不起作用。我无法在主机和目标之间 ping。我在主机上运行了 netmon，但在“Microsoft 内核调试网络适配器”上看不到任何带有 mac 地址的流量

在设备管理器中，我通过设置 busparams 使用的任何 NIC 都会出现黄色感叹号，并且设备状态显示“此设备无法正常工作，因为 Windows 无法加载此设备所需的驱动程序。（代码 31）”此设备应该在启用网络调试或“Microsoft Kernel Debug Network Adapter”控制它时工作，这是应该发生的事情？

我的系统中有 8gb 的内存。我移除了一些 DIMM，我只尝试了 4gb 的内存，但也没有。

任何帮助，将不胜感激。

目标机器是 Windows Server 2012。

运行：bcdedit /dbgsettings

产生以下输出：

总线参数 4.4.0

关键 32tmoweft93we.1nj5p5surraxg.2y62zugpzjj0p.3salu7uqd9hyg

调试类型 NET

主机 192.168.231.23

端口 50000

dhcp 是的

操作成功完成。

# c++ - std::list 会改变元素在内存中的位置吗？

> ID：16027044
> 
> 赞同：1
> 
> 时间：2013-04-16T00:57:51.840
> 
> 标签：c++

如果我通过指针获取对 std::list 中元素的引用，只要该元素未被删除，该指针是否会保持有效，还是每次我想访问所述元素时都必须遍历列表？

基本上，当添加或删除其他元素时，std::list 会移动元素吗？

我怀疑不是...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:07:49.480

对 a 中元素的引用以及扩展指针在`std::list`大多数操作中都保持有效，但从容器中删除除外。事实上，它们甚至可以通过合并、拼接和交换成员函数移动到另一个列表，并且它们仍然有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T01:00:00.897

根据[C++参考](http://www.cplusplus.com/reference/list/list/insert/)，该`insert()`方法对迭代器的有效性没有影响，该[`remove`](http://www.cplusplus.com/reference/list/list/remove/)方法只影响被移除元素的迭代器的有效性。我怀疑您想保留指向列表中元素的[迭代器，而不是指针。](http://www.cplusplus.com/reference/iterator/)

# sql-server - SQL Server 如何将日期与字符串文字进行比较？

> ID：16027045
> 
> 赞同：10
> 
> 时间：2013-04-16T00:57:54.087
> 
> 标签：sql-server, sql-server-2008, tsql, datetime, sql-server-2005

我正在修改一个查询，这是我的脚本：

```
select 
CASE When EndDate='1/1/1900' 
THEN NULL 
ELSE EndDate END,*
from Members 
```

该脚本只是比较日期，如果是“1/1/1900”则返回`null`，否则返回日期。

我可以在我的数据库中看到日期以以下格式存储：

```
1900-01-01 00:00:00.000 
```

**问题**是当我的模式与存储的模式不同时，SQL Server 如何像这样匹配日期。同样在日期格式中，我没有传递时间元素。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T01:02:13.477

`'1/1/1900'`由于数据类型的优先级，SQL Server 将您传递的字符串文字 ( ) 转换为日期时间值[（因为日期时间的优先级高于字符串类型）](https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-type-precedence-transact-sql)。如果您传递一个无效的日期作为您的字符串，例如`'2/31/1900'`，您将收到一个转换错误 ( `Msg 242`)，因为 SQL Server 不知道 2 月 31 日的含义。它不会尝试匹配看起来像您传递的*字符串，它会将两者都转换为日期的内部表示（在我的评论中有更多内容）。*

在专门处理日期时，不要考虑*格式*，除非您传递字符串文字，`m/d/y`（或者那是`d/m/y`？）是一种糟糕的格式。使用更安全：

```
YYYYMMDD 
```

您的查询应为：

```
SELECT CASE When EndDate = '19000101' 
 THEN NULL ELSE EndDate END, ...other columns...
FROM dbo.Members; 
```

这样，当您通过像 9 月 8 日这样的日期时，它不会被 SQL Server 和其他读者等误解。是`09/08/2013`9 月 8 日还是 8 月 9 日？取决于你在世界的哪个角落，对吧？在您的情况下，这没关系，因为日期和月份是相同的，但情况并非总是如此。请参阅以下文章：

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

（请，请，请完整阅读该链接。）

最后，如果您正在使用`DATETIME/SMALLDATETIME`并且正在查找特定日期的值，则根本不应该使用相等，而应该使用范围查询。例如，要查找`EndDate`2013 年 4 月 15 日的所有行，无论时间如何，您会说：

```
WHERE EndDate >= '20130415'
  AND EndDate <  '20130416' 
```

（[阅读此链接以了解您不想在`BETWEEN`此处](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)使用的原因。）

如果您使用的是 SQL Server 2008 或更高版本，您仍然可以使用 实现此列的可搜索性`CONVERT`，但这是一个罕见的例外 - 通常您不想对列使用函数。

```
WHERE CONVERT(DATE, EndDate) = '20130415' 
```

其他一些评论 - 与您的问题没有直接关系，而是对您的代码的外围观察：

1.  [始终使用架构前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)
2.  [切勿`SELECT *`在生产中使用](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

# mysql - 用新数据替换 MySQL 列数据？

> ID：16027048
> 
> 赞同：1
> 
> 时间：2013-04-16T00:58:26.983
> 
> 标签：mysql, sql, database, sql-update

您好，所以我目前有一个论坛的旧成员表，我正在尝试将其导入我的新数据库以用于新论坛。但是，我想将他们所有的 group_id 列重置为 1，这是一个基本成员。

所以现在他们所有的groups_id都根据他们所在的组分散。我只想进入表'forum_members'并将名为'group_id'的每个人的列更改为'1'

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:00:44.027

做这个：

```
UPDATE forum_members SET group_id = 1; 
```

有关语法的更多信息，请[在此处](http://dev.mysql.com/doc/refman/5.0/en/update.html)`UPDATE`查看 MySQL 参考。

# visual-studio - .TXT 文件使用哪个“内容导入器”？

> ID：16027049
> 
> 赞同：0
> 
> 时间：2013-04-16T00:58:45.793
> 
> 标签：visual-studio, xna

![在此处输入图像描述](https://i.stack.imgur.com/ZKR6S.png)

我将纯文本文件导入到我的 XNA 游戏中，但我不确定要指定哪个 Content Importer 和 Content Processor，有人能指出我正确的方向吗？我不需要对文件做任何特别的事情，它只是纯文本。我认为它不需要一个，因为我只是用 StreamReader 阅读它，所以我想避免将它转换为 . XNB，如果可能的话。

*注意：如果重要的话，我使用的是 C#。我没有标记它，因为它不应该重要。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:16:12.493

你把一些非常简单的事情复杂化了。你根本不需要把它放在你的内容项目中。您应该将它与您的实际应用程序捆绑在一起并将其放在与您的应用程序相同的目录中，或者`Copy To Output Directory`在将其放入常规项目（`Content`如果您确实需要的话，放在文件夹中）之后使用文件上的属性。

之后，它只是打开一个`File.Open`on的 FileStream `"index.txt"`。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:23:10.183

如果您将其导入/拖动到 VS 中的内容文件夹中，您可以像这样访问该文件：

```
using (StreamReader sr = new StreamReader(@"Content\filename.txt")
{
} 
```

这样，您可以从 VS 中轻松访问文本文件，并且在您发布项目时，它会在内容中正确排序。

# python - 使用 Python 将从 GSM 调制解调器读取的消息参数写入 MySQL

> ID：16027052
> 
> 赞同：0
> 
> 时间：2013-04-16T00:58:48.907
> 
> 标签：python, mysql, database, gsm, at-command

我正在从 Python 中的 GSM 调制解调器收到的消息中读取一些数据。

在将这些数据参数写入我的 MySQL 数据库之前，我需要提取它们。

在执行此操作之前，我会分几个阶段解析消息，然后再将其写入数据库。

GSM 调制解调器的读取和写入是通过使用串行对象电话完成的。这个串行对象读入 x ，其中数据临时存储，直到下一次读/写发生。

这是程序中的控制流程：

```
def reading():
     print "Reading all the messages stored on SIM card"
     phone.write(b'AT+CMGL="ALL"\r') #Command to read all the messages
     sleeps()
     x=phone.read(100000000)
     sleeps()
     print x
     print "Now parsing the message!"
     k="".join(x)
     parse(k)
     k=""

def parse(k):
    match = re.finditer("\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\n(.+)\n", k)
    for each in match: 
        break_down(each.group(6)) 
```

这里有多个正在阅读的消息。each.group(6) 包含实际的消息内容。

```
def break_down(s):
    c=s.count('<')
    if c==9:
            res = re.findall('< (.*?) >', s)
            for index in res:
                print index,item
    elif c==7 or c==3:
            temp=parsing(s)
            pprint(list(temp))
    else:
        flag=0
        c=s.count(':')
        if c==8:
            res=s.split(' : ')
            res=[item.strip() for item in s.split(':')]
            for index, item in enumerate(res):
                print index, item
            results = [float(x) for x in s.split(' ') if x.count('.') == 1]
            pprint(results)
            dbinsert(res[0],res[1],res[2],res[3],results[0],results[1],results[2],results[3],flag)
        if c==7:
            flag=1
            res=s.split(' : ')
            res=[item.strip() for item in s.split(':')]
            for index, item in enumerate(res):
                print index, item
            results = [float(x) for x in s.split(' ') if x.count('.') == 1]
            pprint(results)
            dbinsert(res[0],res[1],res[2],res[3],results[0],results[1],results[2],results[3],flag)
def parsing(s):
        for t in s.split('<'):
            for u in t.strip().split('>',1):
                if u.strip(): yield u.strip()

def dbinsert(a,b,c,d,e,f,g,h,flag):
 import MySQLdb
 db = MySQLdb.Connect(host="127.0.0.1", port=3306, user="root", passwd="root", db="ups")
 print "In dbinsert"
 cursor = db.cursor()
 try:
  if flag==0:
   sql = """INSERT INTO data(F1,
          F2, F3, F4, F5, F6, F7, F8)
          VALUES (a.value,b.value,c.value,d.value,e.value,f.value,g.value,h.value)"""
   cursor.execute(sql)
   db.commit()
  elif flag==1:
   sql = """INSERT INTO data(F1,
          F2, F3, F4, F5, F6, F7, F8)
          VALUES (a,b,c,,e,f,g,h)"""
   cursor.execute(sql)
   db.commit()
 except:
  db.rollback()
  db.close() 
```

break_down(s) 能够完全按照要求提取数据。但是，一旦将此数据传递给 dbinsert，数据就不会写入数据库。当我尝试在没有其他代码的情况下使用一些虚拟值单独执行此操作时，没有问题。所以这不是数据库连接问题。

我究竟做错了什么？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:47:22.933

你的正则表达式解析

```
re.finditer("\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\n(.+)\n", k) 
```

似乎太弱了，无法正确涵盖所有可能的情况。从[27.005 开始](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)，`AT+CMGL`文本模式的语法是（对于 SMS-SUBMIT/SMS-DELIVER 是普通的短信）：

```
+CMGL: <index>,<stat>,<oa/da>,[<alpha>],[<scts>][,<tooa/toda>,
<length>]<CR><LF><data>[<CR><LF>
+CMGL: <index>,<stat>,<da/oa>,[<alpha>],[<scts>][,<tooa/toda>,
<length>]<CR><LF><data>[...]] 
```

您的正则表达式期望在第一个数字参数之后总是至少有三个字符串参数，但请注意整个`<alpha>`参数是可选的并且可能不存在。

我不确定这是否是您的全部问题，但无论如何您都应该解决这个问题。如果是我，我会为此放弃正则表达式，而是将行参数解析为特定函数中的参数。

# iphone - iOS - 如何在没有 SDK 显示的中间共享屏幕的情况下在 Google+ 上共享？

> ID：16027057
> 
> 赞同：1
> 
> 时间：2013-04-16T00:59:03.123
> 
> 标签：iphone, objective-c, google-plus

我有一个简单的 iOS 应用程序，我想从中分享 Google+ 上的网址。我已经实现了他们的 SDK（基本上调用[https://plus.google.com/share?url=http://stackoverflow.com ），（注意：](https://plus.google.com/share?url=http://stackoverflow.com) [this](https://stackoverflow.com/questions/10757950/post-to-a-google-plus) SO question中也提到了这一点，但他们并没有真正解决我的具体问题）。

但是有一个中间屏幕需要用户按“分享”。如果可能的话，我不想这样做。

我读过 G+ API 是只读的，但我注意到 Digiback（iOS 的相机应用程序发布到 Google+ 没问题）无需任何交互即可共享。

关于如何做到这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T09:43:21.063

使用当前的 GooglePlus SDK，没有中间共享屏幕就无法共享。

希望这会帮助你。

# session - 如何使用 Flask-KVSession 管理清理过期会话？

> ID：16027059
> 
> 赞同：5
> 
> 时间：2013-04-16T00:59:27.223
> 
> 标签：session, flask

从文档[http://flask-kvsession.readthedocs.org/en/0.3.1/](http://flask-kvsession.readthedocs.org/en/0.3.1/) at `cleanup_sessions()`，它说应该定期调用这个方法来清理过期的会话。

这是否意味着如果我不清理它，会话内存使用量会在应用程序的生命周期内扩大？

如果我不定期清理它们会有什么不好的影响？

在应用程序中安排定期清理的一些好方法是什么？

我可以使用 Redis 作为存储后端并自动设置到期时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-28T06:46:35.090

如果你使用 RedisStore，KVSession 会选择烧瓶配置项 PERMANENT_SESSION_LIFETIME 并自动进行会话清理。仅对于不支持 TimeToLiveMixin 接口的后端，您必须手动完成。

> 过期会话会话将过期，导致它们无效。要自动从后端移除，该后端必须支持 TimeToLiveMixin 接口；支持此功能的示例后端是 RedisStore 和 MemcacheStore。
> 
> 当使用没有生存时间支持的不同后端时，例如通过 FilesystemStore 的平面文件，可以定期调用 cleanup_sessions() 以删除未使用的会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-30T07:35:33.087

您可以注册一个“after_request”或“before_request”来定期处理清理。

```
from flask import Flask

from flask.ext.kvsession import KVSessionExtension
from simplekv.db.sql import SQLAlchemyStore
from sqlalchemy import create_engine, MetaData

# init app
app = Flask(__name__)

# init Flask-KVSession
engine = create_engine('mysql+pymysql://user:password@localhost/kvsession_db')
metadata = MetaData(bind=engine)
store = SQLAlchemyStore(engine, metadata, 'kvsession_table')
metadata.create_all()
kvsession_extension = KVSessionExtension(store, app)

# perdiocally cleanup expired sessions
import time
# do cleanup per day. You may store this value in app.config
SESSION_CLEANUP_INTERVAL = 60 * 60 * 24
deadline = None
@app.after_request
def cleanup_expired_sessions():
    global SESSION_CLEANUP_INTERVAL, deadline
    if deadline is None:
        kvsession_extension.cleanup_sessions(app)
        deadline = time.time() = SESSION_CLEANUP_INTERVAL
    else:
        if time.time() >= deadline:
            # time to do cleanup
            kvsession_extension.cleanup(app)
            # update deadline
            deadline = time.time() + SESSION_CLEANUP_INTERVAL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:26:33.333

您可以使用 Redis，但它仍会存储过期的会话。存储过期会话的含义是您将浪费磁盘空间或 RAM，这对 Redis 尤其不利。

至于安排清理，只需使用运行的 cron 或 upstart 创建一个每日脚本`cleanup_sessions`。或者，您也可以修改`simplekv`以设置密钥的到期时间：[https ://github.com/mbr/simplekv/blob/master/simplekv/memory/redisstore.py](https://github.com/mbr/simplekv/blob/master/simplekv/memory/redisstore.py)

# c# - 遍历 jQuery 中的 SelectList

> ID：16027061
> 
> 赞同：0
> 
> 时间：2013-04-16T00:59:34.703
> 
> 标签：c#, jquery, asp.net-mvc

在我的控制器中，我正在创建一个选择列表；

```
 public string Ajax_GetUnusedDCList(Guid storeId)
    {
        DataRepository.Store thisStore = repo.Where(x => x.id == storeId).SingleOrDefault();
        SelectList list = thisStore.GetStoreUnusedDCList("Store");

        JavaScriptSerializer serializer = new JavaScriptSerializer();
        return serializer.Serialize(list);
    } 
```

然后在我的 jQuery 中，我尝试单步执行每个项目并在此时提醒值；

```
$.ajax({
  url: "/Stores/Ajax_GetUnusedDCList",
  type: 'POST',
  data: { storeId: '041F0D0E-5AD3-4817-9604-3FD81F08BA9B' },
  success: function (data) {
    $(data).each(function (index, val) {
      alert(val.Text);
    });
  }
}); 
```

但是我得到了这样的错误；

> Microsoft JScript 运行时错误：语法错误，无法识别的表达式：[{"Selected":false,"Text":"9321","Value":null}]
> 
> Microsoft JScript 运行时错误：“长度”为空或不是对象
> 
> Microsoft JScript 运行时错误：“未定义”为空或不是对象
> 
> Microsoft JScript 运行时错误：“匹配”为空或不是对象

我要做的就是返回一个 SelectList 并填充一个下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:49:25.770

我认为您可以在不序列化的情况下发送 SelectList 以便您可以使用您的函数本身在客户端访问。作为

```
return Json(listObj,JsonRequestBehaviour.AllowGet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:17:01.600

您已将数据作为字符串获取，因此首先需要将数据转换为 json 对象。

尝试下面的代码在客户端将字符串转换为 json。

```
success: function (data) {
    var json = (typeof data) == 'string' ? eval('(' + data+ ')') : data;
    $(json).each(function (index, val) {
         alert(val.Text);
    });   } 
```

这将有助于解决您的问题。

# ruby-on-rails - Rails fields_for 表单未显示

> ID：16027066
> 
> 赞同：3
> 
> 时间：2013-04-16T01:00:08.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

**products_controller.rb**

```
def new
  @product = Product.new
  @product.build_discount
end 
```

**产品.rb**

```
has_many :discounts, :dependent => :destroy
accepts_nested_attributes_for :discounts
attr_accessible :discounts_attributes 
```

**折扣.rb**

```
belongs_to :product 
```

**_edit_product.html.erb**

```
<%= form_for(product, :html => { :multipart => true  }, :remote => true) do |f| %>
    // STUFF
    <%= f.fields_for :discounts do |discount_form| %>
       //does not show up
    <% end %>
<% end %> 
```

块中的内容`fields_for`不显示。但是，如果我更改`has_many :discounts`为，则会`has_many :discount`显示表单（尝试提交时出现批量分配错误）。

`fields_for`关于为什么表单没有在块中呈现以及为什么在我更改复数形式时它会呈现的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T01:15:16.660

您想要**多**折还是**一**折？

`@product.build_discount`在`has_one`关联中使用，但您的其余代码用于`has_many`

如果您想要**很多**折扣，请将其更改为`@product.discounts.build`

否则，如果您只想要**一个**折扣，请更改以下内容：

`f.fields_for :discount do |discount_form|`并`accepts_nested_attributes_for :discount`为单数。

`@products.discounts.build`不起作用，因为您无法从对象集合中获取关联。例如：

```
@products = Product.all
@discount = @products.discounts.build
# This won't work! You'll get an error

@product = Product.find(params[:id])
@discount = @product.discounts.build
# This will work, since you're running it on a single instance of Product 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:14:51.030

你如何将局部变量传递`product`给你的局部变量`_edit_product.html.erb`？我猜你有一个`new.html.erb`视图来渲染你的部分？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:32:48.353

使用@mind_blank 的答案，我写了这个解决方案：

`@products = current_user.products.each {|product| product.discounts.build}`

表格出现在这一行之后。

# ios6 - 你如何将代码放在后台线程中

> ID：16027073
> 
> 赞同：-1
> 
> 时间：2013-04-16T01:00:33.470
> 
> 标签：ios6, background-process

我正在构建一个下载文件的应用程序，当下载运行时，我想要一个简单的图形，它可以像过去使用的动画 Gif 一样旋转。

所以我有代码来加载这个图像，稍微旋转这个图像，然后重新显示它。

我希望它在下载处于活动状态时继续旋转。

我从网上查看了许多代码，但我认为我对太多信息感到困惑。有没有一种简单的方法可以做到这一点。

我假设我必须建立一个方法来进行旋转和重新显示，当我继续下载时，我可以在这个后台进程中循环到该方法，然后在下载结束时退出后台任务。

我现在运行的示例代码如下：下载

```
 NSString *imagefile = [NSString stringWithFormat:@"https://imoonaws.com/glold/data/%@/mid.png", Path];
    NSURL *url1=[NSURL URLWithString:imagefile];
    NSData *data1 = [NSData dataWithContentsOfURL:url1];
    [data1 writeToFile:fullPath atomically:YES]; 
```

和图像旋转

```
 UIImage *image = [UIImage imageNamed: @"Icon.png"];

UIImage *rotatedImg = [image imageRotatedByDegrees:18];
[_image setImage:rotatedImg]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:20:59.637

```
NSString *imagefile = [NSString stringWithFormat:@"https://imoonaws.com/glold/data/%@/mid.png", Path];
NSURL *url1=[NSURL URLWithString:imagefile];
NSData *data1 = [NSData dataWithContentsOfURL:url1]; 
```

好吧，不要那样做！那是同步下载。正如我在书中 ( [http://www.aeth.com/iOSBook/ch37.html#_http_requests](http://www.apeth.com/iOSBook/ch37.html#_http_requests) ) 中解释的那样，异步下载。

```
UIImage *image = [UIImage imageNamed: @"Icon.png"];
UIImage *rotatedImg = [image imageRotatedByDegrees:18];
[_image setImage:rotatedImg]; 
```

也不要那样做！要旋转图像视图，请不要更改图像，这将需要您在主线程上反复轮询；给它一个旋转动画然后放手！我的书中解释了动画：[http](http://www.apeth.com/iOSBook/ch17.html) ://www.aeth.com/iOSBook/ch17.html - 我向您展示了如何制作旋转动画以及如何永远重复（以及如何在时机成熟时停止动画） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:06:02.360

> 我想我必须建立一个方法

不要假设。下载并制作动画。如果您正确地进行下载，它就*在*后台。如果你正确地做动画，它就在它自己的（不同的）线程中。不会有问题。

你没有说什么不工作或者是否有什么不工作，你没有显示任何代码，那么还能说什么呢？你有一个实际的问题吗？

# wpf - 如何访问 XAML 中的自定义属性

> ID：16027076
> 
> 赞同：0
> 
> 时间：2013-04-16T01:00:44.163
> 
> 标签：wpf, xaml, wpf-controls

我创建了一个 UserControl，它具有一个名为**CustomLabel**的 String 类型的依赖项属性。

该控件包含应显示**CustomLabel**属性值的 Label。

我可以使用**OnLabelPropertyChanged**事件处理程序在代码中执行此操作：

```
public class MyControl : UserControl
{
    public static readonly DependencyProperty LabelProperty = DependencyProperty.Register(
        "Label",
        typeof(String),
        typeof(ProjectionControl),
        new FrameworkPropertyMetadata("FLAT", OnLabelPropertyChanged));

    private static void OnLabelPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs eventArgs)
    {
        ((Label)FindName("myLabel")).Content = (string)GetValue("LabelProperty");
    }
} 
```

我知道 XAML 中必须有更简单的方法，例如：

```
...
<Label Content="{Binding ...point to the Label property... }"/>
... 
```

但是我尝试了很多组合（RelativeSource/Pah、Source/Path、x:Reference，只是写属性名......）但没有任何效果......

我是 WinForms 方面的专家，并且学习过 WPF 一段时间，但这些东西对我来说仍然是陌生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:21:50.657

你可以绑定到`Label`属性

```
<Label Content="{Binding Label}"/> 
```

此外，您可能必须`DataContext`在`UserControl`您的`xaml`

```
<UserControl x:Class="WpfApplication10.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             Name="UI"> // Set a name 

    <Grid DataContext="{Binding ElementName=UI}"> //Set DataContext using the name of the UserControl
        <Label Content="{Binding Label}" />
    </Grid>
</UserControl> 
```

# 完整示例：

代码：

```
public partial class MyUserControl : UserControl
{
    public MyUserControl()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty LabelProperty = DependencyProperty.Register(
      "Label", typeof(String),typeof(MyUserControl), new FrameworkPropertyMetadata("FLAT"));

    public string Label
    {
        get { return (string)GetValue(LabelProperty); }
        set { SetValue(LabelProperty, value); }
    }
} 
```

xml:

```
<UserControl x:Class="WpfApplication10.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             Name="UI">

    <Grid DataContext="{Binding ElementName=UI}">
        <TextBlock Text="{Binding Label}" />
    </Grid>
</UserControl> 
```

# php - 在具有 3 个级别的登录系统中，有什么更好的方法在数据库和登录系统中创建表？

> ID：16027082
> 
> 赞同：0
> 
> 时间：2013-04-16T01:01:00.370
> 
> 标签：php, mysql, login, logic

在具有 3 个级别的登录系统中，有什么更好的方法在数据库和登录系统中创建表？

这三个级别是：“客户”、“附加”和“管理员”。

“客户”将访问您的所有帐户详细信息，您可以注册“附加”。“附加”将只能访问一些细节。“管理员”可以注册新的“客户”。

1）只有一个登录网址并让系统检查用户的级别然后指向正确的页面是否安全？

地点。com/login 如果附加 OR 客户将定向到 -> 站点。com/client 如果管理员将定向到站点。com/管理员

2) 或者最好的方法是为客户端和附加站点创建一个日志文件。com/client/login 和其他管理员站点。com/admin/登录

3) 我想我会创建一个表，其中只包含所有用户的 ID、登录名、密码和级别：客户、附加和管理员，并对该表进行查询以查看用户是否存在以及可用的资源，然后根据 LEVEL 在其他表中查找数据，这是一种安全的做法吗？

4）我还想过使用INNER JOIN对3个表进行扫描，看看用户是否有权访问系统。并且让表中的ca级别数据完全分离。它是一种有效的替代方案吗？

其他想法？备择方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:09:13.690

1.  如果您愿意，单个登录 URL 就足够了。您应该将用户的授权级别链接到他们的身份验证（他们的登录名、电子邮件等）。一旦他们通过身份验证（登录），您就可以从数据库获得他们的授权并将该信息存储在会话中。用户不能触摸它。

2.  我认为这没有任何好处，但如果你愿意，你可以这样做。您仍然需要检查每个页面上的授权级别，以确定登录用户是否能够看到该页面。

3.  这在任何特定方面都不是不安全的，但它似乎具有您可能想要的关系完整性。

4.  这并没有太大的不同，但是为每个访问级别设置一个单独的表是没有意义的。除非访问能力是互斥的，否则您最多需要两张表（一张用于用户，一张用于级别）。如果它们是互斥的，您将需要第三个表用于用户级映射，但您似乎并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:11:01.273

这是一个非常开放的问题。你肯定想要#1 而不是#2。您不想维护 2 种登录方法。只需有 1 个登录页面并决定用户在登录后应该去哪里。

说到#3 或#4，我想你会用#3 走得更远。让你的桌子像这样：

```
ID, login, password, client_permission_level, admin_permission_level 
```

client_permission_level 1 = “附加” client_permission_level 2 = “客户端” admin_permission_level 0 = “非管理员” admin_permission_level 1 = “管理员”

你可以制作一个更复杂的系统，但听起来这会让你开始。而且，您将能够定义更多级别，例如“超级管理员 = 2”或“超级客户 = 3”

# java - 尝试使用 for 循环制作表格，得到“找不到符号错误”

> ID：16027084
> 
> 赞同：-3
> 
> 时间：2013-04-16T01:01:08.457
> 
> 标签：java

我有一项任务要编写一个程序，该程序将采用用户输入的速度和小时数来查找距离。我有一个带有计算方法的类，但需要使用 for 循环来输出一个表格，该表格将显示用户输入的每个小时的旅行小时数，如下所示：

## 小时距离

1 10 2 20 3 30 等

首先，我编写了类来进行计算，但是当我将 for 循环放在一起时，计数器出现错误。

这是具有计算距离的方法的对象类。

```
package distancetraveled;

public class DistanceTraveled {

private double speed;       //speed
private int hours;      //hours
private double distance;    //distance

//distanceTravelled constructor
public DistanceTraveled(double s, int h) {
    speed = s;
    hours = h;
}

// findDistance method
public double findDistance() {
    distance = speed * hours;
    return distance;
}

// setSpeed method
public void setSpeed(double s) {
    s = speed;
}

// set distance method
public void setDistance(int h) {
    h = hours;
}

// getSpeed method
public double getSpeed() {
    return speed;
}

//getDistance method
public double getDistance() {
    return distance;
} 
```

}

以及显示表格的程序：

```
package distancetraveled;

import java.util.Scanner;

public class DistanceTraveledTest {

public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    double testSpeed;
    int testHours;

    System.out.println("What is the speed of the vehicle?");
    testSpeed = input.nextDouble();
    while (testSpeed <= 1){
        System.out.print("The speed must be equal to or greater than one");
        System.out.println("What is the speed of the vehicle?");
        testSpeed = input.nextDouble();
    }

    System.out.println("How many hours has the vehicle been travelling?");
    testHours = input.nextInt();

    while (testHours <= 1){
        System.out.print("The hours must be equal to or greater than one");
        System.out.println("How many hours has the vehicle been traveling?");
        testHours = input.nextInt();
    }

    DistanceTraveled traveller = new DistanceTraveled(testSpeed, testHours);

    System.out.println("Hour\t\tDistance Travelled");
    System.out.println("------------------------------");

    for(i=0;i<=testHours;i++){
           System.out.print(testHours + "\t\t" + traveller.findDistance());

    }

}
} 
```

我敢肯定还有很多其他错误。谢谢大家和任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:04:24.477

`i`您没有在循环中声明变量...

```
for (i = 0; i <= testHours; i++) { 
```

它应该看起来更像...

```
for (int i = 0; i <= testHours; i++) { 
```

**更新**

您的`setDistance`方法也没有正确分配值...

```
public void setDistance(int h) {
    h = hours;
} 
```

应该...

```
public void setDistance(int h) {
    hours = h;
} 
```

*（我相信克里斯托弗已经解决了这个问题）*

您的`DistanceTraveled`班级似乎需要比实际需要的更多信息。因为时间是可变的，我会摆脱它......

相反，我会使用类似...

```
public class DistanceTraveled {

    private double speed;       //speed

    //distanceTravelled constructor
    public DistanceTraveled(double s) {
        speed = s;
    }

    // findDistanceOverTime method
    public double findDistanceOverTime(int hours) {
        return getSpeed() * hours;
    }

    // setSpeed method
    public void setSpeed(double s) {
        s = speed;
    }

    // getSpeed method
    public double getSpeed() {
        return speed;
    }
} 
```

这会产生一个看起来更像...的循环

```
for (int i = 0; i <= testHours; i++) {
    System.out.println(i + "\t\t" + traveller.findDistanceOverTime(i));
} 
```

这让我开始质疑这个`DistanceTraveled`类的有效性，因为它可以很容易地用`static`方法来完成......

```
public class DistanceTraveled {
    public static double findDistanceOverTime(double speed, int hours) {
        return speed * hours;
    }
} 
```

产生一个更像...的循环

```
for (int i = 0; i <= testHours; i++) {
    System.out.println(i + "\t\t" + DistanceTraveled.findDistanceOverTime(testSpeed, i));
} 
```

当然，这都是猜测，取决于您的整体要求......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:11:22.840

你的错误在`DistanceTraveledTest`课堂上。

您的`for`循环有一个未声明的`int`类型变量：

```
for(i=0;i<=testHours;i++){
    System.out.print(testHours + "\t\t" + traveller.findDistance());
} 
```

你可以这样做：

```
for(int i=0;i<=testHours;i++){
    System.out.print(testHours + "\t\t" + traveller.findDistance());
} 
```

或者：

```
int i = 0;
for(i=0;i<=testHours;i++){
    System.out.print(testHours + "\t\t" + traveller.findDistance());
} 
```

另外，在你的`DistanceTraveled`课堂上，你应该考虑`this`为你的 getter 和 setter 使用关键字，而且我认为你有一个左手分配问题：

```
//distanceTravelled constructor
public DistanceTraveled(double s, int h) {
    this.speed = s;
    this.hours = h;
}

// findDistance method
public double findDistance() {
    this.distance = this.speed * this.hours;
    return this.distance;
}

/****************************************************
 * This is where your assignment issue is
 * You are reassigning the passed method variable to the
 * class assigned this.speed
 ****************************************************/
// setSpeed method
public void setSpeed(double s) {
    s = speed;
}

// set distance method
public void setDistance(int h) {
    h = hours;
}

/*****************************************************
 * These and other methods should be like this:
 *****************************************************/
public void setSpeed(double s) {
    this.speed = s;
}

// set distance method
public void setDistance(int h) {
    this.hours = h;
}

// getSpeed method
public double getSpeed() {
    return this.speed;
}

//getDistance method
public double getDistance() {
    return this.distance;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:34:37.663

```
for(int i=0;i<=testHours;i++) 
```

或者你可以

```
int i = 0;
for(;i<=testHours;i++) 
```

# wordpress - 用于 wordpress 表单破坏的引导程序

> ID：16027089
> 
> 赞同：0
> 
> 时间：2013-04-16T01:01:41.243
> 
> 标签：wordpress, forms, twitter-bootstrap

我正在使用 twitter bootstrap 构建一个 wordpress 网站（[http://www.graditudemedia.com/](http://www.graditudemedia.com/)），并在页脚中放置了一个联系表。当视口宽度大于 1215 像素时，它看起来很好，但列在其下方重叠。它不需要响应，所以我尝试删除 bootstrap-responsive.css 并且只会使列重叠而不管视口大小。一种菜鸟，任何帮助将不胜感激。这是表单代码：

```
<div id="contact">
  <div class="container">
    <div class="row">
      <div class="span12 center">
        <h2>Contact Us</h2>
      </div>
    </div>
    <div class="row">
      <div class="12 center">
        <p>It’s about time you did something awesome with your brand. Let’s get started.<p>
        <p>&nbsp;</p>
      </div>
    </div>
    <div class="row">
      <form class="span10 offset1">
        <div class="controls controls-row">
          <div class="span3">
              <div class="input-prepend">
                <span class="add-on">Name</span><input id="prependedInput" type="text">
              </div>
              <div class="input-prepend">
                <span class="add-on">Email</span><input id="prependedInput" type="text">
              </div>
              <div class="input-prepend">
                <span class="add-on">Phone</span><input id="prependedInput" type="text">
              </div>  
          </div>
          <div class="span3">
              <div class="input-prepend">
                <span class="add-on">Company</span><input id="prependedInput" type="text">
              </div>
              <div class="input-prepend">
                <span class="add-on">Website</span><input id="prependedInput" type="text">
              </div>
              <div class="input-prepend">
                <span class="add-on">Budget</span><input id="prependedInput" type="text">
              </div>  
          </div>
          <div class="span3">
              <textarea class="span3" placeholder="Comments"></textarea>
          </div>
        </div>
        <div class="span3 offset3 controls controls-row center">
          <button class="btn btn-large btn-block btn-custom">Submit</button>
        </div>  
      </div>
    </div>
   </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:39:30.653

响应式 CSS @import 确实需要从 style.css 中删除，然后您也应该`<meta name="viewport" content="width=device-width, initial-scale=1.0">`从`header.php`

# openid - Google OpenID 强制提示帐号使用

> ID：16027090
> 
> 赞同：2
> 
> 时间：2013-04-16T01:01:42.633
> 
> 标签：openid

我已经为一个网站实现了 Google OpenID 登录，并且运行良好。如果我已登录 Google 并尝试从我的网站登录，Google 会自动使用已登录的帐户并重定向回我的网站。当我登录到正确的帐户时，这很好。问题是我有多个 Google 帐户，有时我登录到错误的帐户。当 Google 将我重定向回时，我的网站会提示您完成新帐户的设置。

是否可以让 Google 始终询问使用哪个帐户登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T10:32:21.997

我还没有尝试过，但是根据[此处](https://developers.google.com/accounts/docs/OAuth2Login#prompt)的 Google 文档，您可以将身份验证 URI 的提示参数与“select_account”值一起使用

# ruby-on-rails - 将项目推送到heroku时遇到问题

> ID：16027091
> 
> 赞同：1
> 
> 时间：2013-04-16T01:02:04.493
> 
> 标签：ruby-on-rails, ruby, heroku

我正在做 Hartle Ruby on Rails 教程，这是我第一次将项目推送到 heroku，我试图找出问题所在。

```
$ heroku login
email
password
Could not find an existing public key 
Would you like to generate one? [y/n] <--- I hit enter which gave me..
Generating new SSH public key.
Uploading SSH public key /Users/myname/.ssh/id_rsa.pub... done
Authentication successful. 
```

之后我转到下一个命令 heroku create，因为我已经在我想要的目录中，“first_app”

```
$ heroku create
Creating immense-savannah-2464... done, stack is cedar
http://immense-savannah-2464.herokuapp.com/ | git@heroku.com:immense-savannah-2464.git  <--- this is not what Hartl gets in his tutorial so I don't know if this looks right or wrong. 
```

之后我尝试将我的项目推送到heroku：

```
$ git push heroku master
The authenticity of host 'heroku.com (XX.XX.XX.XXX)' can't be established.
RSA key fingerprint is Xb:XX:Xe:XX:Xe:cX:XX:XX:XX:fX:XX:Xc:Xf:cX:XX:ad.
Are you sure you want to continue connecting (yes/no)? <--- I always hit "no" because I don't know if I should hit "yes." After I hit "no" it tells me that the host key verification failed! 
```

知道我做错了什么吗？我被困住了 - 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:12:16.993

您是否已经完成了[此处列出的所有步骤？](https://devcenter.heroku.com/articles/keys)
您需要创建一个公钥/私钥对来将代码部署到 Heroku。

该帖子将引导您完成所有步骤。

我找到[了可能对您有所帮助的答案](https://stackoverflow.com/questions/10755041/cant-push-a-project-to-heroku-fingerprint-problems)。尝试将 [remote "heroku"] 中的项目名称更改为 heroku 在`.git/config`

### 更新

我只是遇到了同样的问题。`yes`当它询问时我输入了它`Are you sure you want to continue connecting (yes/no)?`，然后它仍然无法连接并返回`fatal: The remote end hung up unexpectedly`。

然后我跑了`ssh-keygen -t rsa`，按了几次回车，它起作用了。

自从我将 Rails 文件夹复制到新计算机后，就出现了这个问题。其余的 heroku 命令有效，只有 push 无效。

# django - Django：为什么这个 if 语句会失败？

> ID：16027092
> 
> 赞同：1
> 
> 时间：2013-04-16T01:02:08.890
> 
> 标签：django, django-templates

```
{% for cat in p.categories.all %}
{{ cat }}
{% if cat == "Watches" %}
    <p>test</p>
{% endif %}
{% endfor %} 
```

p 是视图提供的对象，与“类别”具有多对多关系。`{{ cat }}`成功显示`Watches`，这是我一直在试验的测试 cse 的正确类别。不幸的是，if 语句显然失败了，因为没有显示测试段落。我一直在摆弄这个 2 小时并尝试了我能想到的所有条件语句的组合，但我无法弄清楚为什么会失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:32:13.153

除了非常慢之外，最好在后端处理尽可能多的“逻辑”。

创建一个返回布尔值的方法并对其进行测试，如下所示：

```
{% if cat.is_watches %}
    <p>test</p>
{% endif %} 
```

# excel - 检查数组中是否存在值

> ID：16027095
> 
> 赞同：4
> 
> 时间：2013-04-16T01:02:28.930
> 
> 标签：excel, vba

我正在使用[this](https://stackoverflow.com/questions/10951687/how-to-search-for-string-in-ms-access-vba-array) question中的一个函数，但是，它似乎不适用于我的情况。

基本上，这个脚本正在通过一列选择不同的值并`arr`用它们填充数组。首先`If`是检查列是否已经结束，然后为了避免调用空数组我有第一个`IfElse`，最后我想检查一个非空数组的`cell`字符串。如果它不存在，我想添加它。

```
Public Function IsInArray(stringToBeFound As String, arr As Variant) As Boolean
  IsInArray = (UBound(Filter(arr, stringToBeFound)) > -1)
End Function

Sub SelectDistinct()

    Dim arr() As String
    Dim i As Integer
    Dim cells As Range

    Set cells = Worksheets("types").Columns("A").Cells

    i = 0
    For Each cell In cells
        If IsEmpty(cell) Then
            Exit For
        ElseIf i = 0 Then
            ReDim Preserve arr(i)
            arr(UBound(arr)) = cell
            i = i + 1
        ElseIf IsInArray(cell.Value, arr) = False Then
            ReDim Preserve arr(i)
            arr(UBound(arr)) = cell
            i = i + 1
        End If
    Next cell
End Sub 
```

`IsInArray`由于某种原因，它在函数调用时抛出“下标超出范围”错误。有人可以让我知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:16:58.163

这是我将如何使用该`Application.Match`函数而不是另一个 UDF 来处理一维数组的方法。

我已将您的一些 If/ElseIf 逻辑与`Do...While`循环合并，然后使用该`Match`函数检查数组中是否存在单元格值。如果它不存在，则将其添加到数组中并继续到范围中的下一个单元格。

```
Sub SelectDistinct()

Dim arr() As String
Dim i As Integer
Dim cells As Range
Dim cl As Range
Dim foundCl As Boolean

    Set cells = Worksheets("Sheet6").Columns(1).cells

    Set cl = cells.cells(1)

    Do
        If IsError(Application.Match(cl.Value, arr, False)) Then
            ReDim Preserve arr(i)
            arr(i) = cl
            i = i + 1
        Else:
            'Comment out the next line to completely ignore duplicates'
            MsgBox cl.Value & " already exists!"

        End If

        Set cl = cl.Offset(1, 0)
    Loop While Not IsEmpty(cl.Value)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:52:34.463

对函数调用时的“下标超出范围”错误的简短回答`IsInArray`是变量`arr`变暗为`Variant`。要在UDF`Filter`中工作的函数必须变暗为.`IsInArray``arr``String`

您可以尝试以下代码，其中 1) 设置过滤`String`数组，以及 2) 避免`Redim Preserve`在循环中放置（这是一个代价高昂的函数）：

```
Sub FilteredValuesInArray()
'http://stackoverflow.com/questions/16027095/checking-if-value-present-in-array
Dim rng As Range
Dim arrOriginal() As Variant, arrFilteredValues() As String
Dim arrTemp() As String
Dim strPrintMsg As String    'For debugging
Dim i As Long, lCounter As Long

Set rng = Cells(1, 1).CurrentRegion    'You can adjust this how you want
arrOriginal = rng

'Convert variant array to string array
ReDim arrTemp(LBound(arrOriginal) - 1 To UBound(arrOriginal) - 1)
For i = LBound(arrOriginal) To UBound(arrOriginal)
    arrTemp(i - 1) = CStr(arrOriginal(i, 1))
Next i

'Setup filtered values array
ReDim arrFilteredValues(LBound(arrTemp) To UBound(arrTemp))

On Error Resume Next
Do
    arrFilteredValues(lCounter) = arrTemp(0)
    'Save non matching values to temporary array
    arrTemp = Filter(arrTemp, arrTemp(0), False)
    'If error all unique values found; exit loop
    If Err.Number <> 0 Then Exit Do
    lCounter = lCounter + 1
Loop Until lCounter >= UBound(arrFilteredValues)
On Error GoTo 0
'Resize array to proper bounds
ReDim Preserve arrFilteredValues(LBound(arrFilteredValues) To lCounter - 1)

'====DEBUG CODE
For i = LBound(arrFilteredValues) To UBound(arrFilteredValues)
    strPrintMsg = strPrintMsg & arrFilteredValues(i) & vbCrLf
Next i
Debug.Print vbTab & "Filtered values are:" & vbCrLf & strPrintMsg
'====END DEBUG CODE
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T01:00:47.973

这是一个简单但肮脏的hack：

```
Function InStringArray(str As String, a As Variant) As Boolean
    Dim flattened_a As String
    flattened_a = ""

    For Each s In a
        flattened_a = flattened_a & "-" & s
    Next

    If InStr(flattened_a, str) > 0 Then
        InStringArray = True
    Else
        InStringArray = False
    End If
End Function 
```

# sas - 如何在我的项目中包含嵌入的 sas 文件？

> ID：16027099
> 
> 赞同：2
> 
> 时间：2013-04-16T01:02:41.690
> 
> 标签：sas

我正在使用 SAS EP 4.1 并创建嵌入到项目中的 SAS 程序。现在我想编写 %include 语句来包含程序。如何编写语句以指向这些嵌入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T09:22:44.333

有2种：

1.  您可以定义一个 Fileref 并将该 Fileref 提供给 %include 语句。

> 文件名宏目录'c:\maclib\globtxt.sas';
> %包括宏目录；

2.  您可以直接将 SAS 代码的物理路径提供给 %include 语句。

> %include 'c:\maclib\globtxt.sas';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:31:37.783

您需要将程序保存为 .sas 文件，然后您可以包含它们。您可能需要 %include 中的完整路径。

# html - 如何增加提交输入中文本的大小和大小？

> ID：16027101
> 
> 赞同：0
> 
> 时间：2013-04-16T01:03:08.473
> 
> 标签：html, css

有人告诉我应该使用`<button>`s，但有人告诉我，只有当你有一个多行提交按钮时才应该使用；否则，使用`<input type="submit" />`.

所以我有这些字母表中一些字母的提交输入，但它们太小了，它们里面的文本也太小了。

我试图增加它们的高度和宽度，但这似乎没有任何作用。填充增加无济于事，不合理的字体大小（46000％）只会使其大于 5px。

如何增加这些输入的大小和其中的文本？

```
<input class="letter" id="a" type="submit" value="a" />
<input class="letter" id="c" type="submit" value="c" />
<input class="letter" id="e" type="submit" value="e" />
<input class="letter" id="f" type="submit" value="f" />
<input class="letter" id="g" type="submit" value="g" />
<input class="letter" id="h" type="submit" value="h" />
<input class="letter" id="i" type="submit" value="i" />
<input class="letter" id="k" type="submit" value="k" />
<input class="letter" id="l" type="submit" value="l" />
<input class="letter" id="m" type="submit" value="m" />
<input class="letter" id="n" type="submit" value="n" />
<input class="letter" id="o" type="submit" value="o" />
<input class="letter" id="p" type="submit" value="p" />
<input class="letter" id="r" type="submit" value="r" />
<input class="letter" id="s" type="submit" value="s" />
<input class="letter" id="t" type="submit" value="t" /> 
```

我目前没有应用 CSS。HTML5 reset / normalize.css 可能会影响它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:10:05.863

试试这些，无论哪种方式都可以：

**第一种方式：**

使用您的 HTML：

```
<input id="a" type="submit" value="a" /> 
```

使用您的 CSS：

```
input[type=submit]
{
    /* your styles here, You can just increase its font size below*/
    font-size: 10px; 
    font-weight: bold;
    font-family: ariel; 
    background-color: #ffedca;
} 
```

**第二个选项**

使用您的 HTML：

```
<input class="letter" id="a" type="submit" value="a" /> 
```

使用您的 CSS：

```
.letter
{
    /* your styles here, You can just increase its font size below*/
    font-size: 10px; 
    font-weight: bold;
    font-family: ariel; 
    background-color: #ffedca;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:10:28.977

在[http://the-irf.com/dev/](http://the-irf.com/dev/)（页面地址，在评论中披露），显然尝试使用以下 CSS 代码增加字体大小：

```
 .hint input{
        color:#333333;
        color:rgb(51, 51, 51);
        cursor:pointer;
        font-size:161.8%;
        font-size:1.618rem;
    } 
```

但是，它没有任何效果，因为页面没有任何`class`属性可以将类分配`hint`给任何元素。

有属性`id="hint"`，将选择器更改`.hint`为`#hint`使按钮更大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:19:54.433

试试 :: .letter{width:150px}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T18:59:37.630

```
You can write it inside the input button.    
style="font-weight: bold;font-size:20pt;" 
```

作者：Aneel Goplani。理学士 独联体。2002\. 美国。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T01:08:41.110

您可以通过在 css 中设置宽度和高度来调整输入的大小，或者仅通过设置字体大小让它自动调整大小。为了使按钮的尺寸保持一致，您可以设置最小高度和宽度。

在你的 CSS 中：

```
input{
    font-size:36pt;
    min-width:65px;min-height:65px;
} 
```

一个例子在这里 - [http://jsfiddle.net/FfkaV/3](http://jsfiddle.net/FfkaV/3)

# php - 从完整 URL 获取域名

> ID：16027102
> 
> 赞同：41
> 
> 时间：2013-04-16T01:03:11.207
> 
> 标签：php, url

假设有人输入这样的 URL：

```
http://i.imgur.com/a/b/c?query=value&query2=value 
```

我想回来：`imgur.com`

不是`i.imgur.com`

这是我现在拥有的代码

```
$sourceUrl = parse_url($url);
$sourceUrl = $sourceUrl['host']; 
```

但这会返回`i.imgur.com`

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-16T01:10:28.883

检查下面的代码，它应该可以正常工作。

```
<?php

function get_domain($url)
{
  $pieces = parse_url($url);
  $domain = isset($pieces['host']) ? $pieces['host'] : $pieces['path'];
  if (preg_match('/(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i', $domain, $regs)) {
    return $regs['domain'];
  }
  return false;
}

print get_domain("http://mail.somedomain.co.uk"); // outputs 'somedomain.co.uk'

?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-23T09:20:24.173

您需要使用[Public Suffix List](https://publicsuffix.org/)的包。是的，您可以在 parse_url() 或 regex 周围使用字符串函数，但它们会在复杂的 URL 中产生不正确的结果。

我推荐[TLDExtract](https://github.com/layershifter/TLDExtract)进行域解析，这里是示例代码：

```
$url = 'http://i.imgur.com/a/b/c?query=value&query2=value';

parse_url($url, PHP_URL_HOST); // will return 'i.imgur.com'

$extract = new LayerShifter\TLDExtract\Extract();
$result = $extract->parse($url);
$result->getFullHost(); // will return 'i.imgur.com'
$result->getSubdomain(); // will return 'i'
$result->getRegistrableDomain(); // will return 'imgur.com'
$result->getSuffix(); // will return 'com' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-30T22:42:53.120

我使用 publicsuffix.org 找到了一个非常有用的库， **[PHP 域解析器](https://github.com/jeremykendall/php-domain-parser)**是一个用 PHP 实现的基于公共后缀列表的域解析器。

[https://github.com/jeremykendall/php-domain-parser](https://github.com/jeremykendall/php-domain-parser)

```
 <?php 
 // this will do the job

 require_once '../vendor/autoload.php';

 $pslManager = new Pdp\PublicSuffixListManager();
 $parser = new Pdp\Parser($pslManager->getList());
 var_dump($parser->getRegistrableDomain('www.scottwills.co.uk'));
 ?> 
```

> string(16) "scottwills.co.uk"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-09T00:39:24.830

下面的代码应该非常适合这项工作。

```
function get_domain($url){
  $charge = explode('/', $url);
  $charge = $charge[2]; //assuming that the url starts with http:// or https://
  return $charge;
}

echo get_domain('http://www.example.com/example.php'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T08:04:24.980

检查简单代码您可以获得主机、子域、域、扩展名

```
$urls = array("https://www.face.com","www.asdasd.asd","sasdas.com/asdas","sdfsdf.sdf","https://app.abcdlink.com/user/test/");
function getDomainname($a)
{
   $r = "(?P<host>(?:(?P<subdomain>[\w\.]+)\.)?" . "(?P<domain>\w+\.(?P<extension>\w+)))";
   $r = "!$r!";// Delimiters
   preg_match($r, $a, $out);

// if you need only domain then return $out['domain'];
// if you need only host then return $out['host'];
// if you need only subdomain then return $out['subdomain'];
// if you need only extension then return $out['extension'];

// Full Data array
    return $out;

}

$urls = array_map('getDomainname', $urls); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-29T05:27:39.930

```
 if(substr_count($original_url, 'http://')) {
    if(substr_count($original_url, 'www.')) {
        // url style would be 'http://www.abc.xxx/page?param' or http://www.abc.xxx.xx/page?param
        // extract 'abc'
        $temp = explode('.', $original_url);

        $store_url = $temp[1];
        // now 
        // $temp[2] = xxx or xxx/page?param 
        // $temp[3] = null or xx/page?param 

        //if ($temp[3] == null) { // then we are sure that $temp[2]== "xxx/page?param"
                    if(sizeof($temp) > 3) {
            // extract "xxx" from "xxx/page?param" and append to store url so it will be "abc.xxx"  
            $temp = explode('/',$temp[2]);
            $store_url .= '.'.$temp[0];
        }
        else { 
            // then we are sure that $temp[2]== "xxx" and then $temp[3] == "xx/page?param"
            //                  or   $temp[2]== xxx/page?stripped-link from second dot(.)
            if(substr_count($temp[2], '/')) { // in case  $temp[2]== xxx/page?stripped-link from second dot(.)
                // extract "xxx" from "xxx/page?stripped-link" and appent to store url so it will be "abc.xxx"
                $temp = explode('/',$temp[2]);
                $store_url .= '.'.$temp[0]; // "abc".="xxx" ==> abc.xxx
            }
            else { // in case $temp[2]== "xxx" and then $temp[3] == "xx/page?param"
                $store_url .= '.'.$temp[2]; // "abc".="xxx" ==> abc.xxx
                // extract "xx" from "xx/page?param" and appent to store url so it will be "abc.xxx.xx"
                $temp = explode('/',$temp[3]);
                if(strlen($temp[0])==2) {
                    $store_url .= '.'.$temp[0];
                }
            }
        }
    }
    else {
        // url style would be 'http://abc.xxx/page?param' or 'http://abc.xxx.xx/page?param'
        // remove 'http://'
        $temp = substr($original_url, 7);
        // now temp would be either 'abc.xxx/page?param' or 'abc.xxx.xx/page?param'
        // explode with '/'
        $temp = explode('/', $temp);
        $store_url = $temp[0];
    }
}
else if(substr_count($original_url, 'www.')) {
    // url style would be 'www.abc.xxx/page?param' or 'www.abc.xxx.xx/page?param'
    // remove 'www.'
    $temp = substr($original_url, 4);
    // now, $temp would be either "abc.xxx/page?param" or "abc.xxx.xx/page?param"
    // explode with '/'
    $temp = explode('/', $temp);
    $store_url = $temp[0];
}
else {
    // url style would be 'abc.xxx/page?param' or 'abc.xxx.xx/page?param'
    //explode with '/'
    $temp = explode('/', $original_url);
    $store_url = $temp[0];
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-07-27T02:53:37.203

用这个：

```
$uri = "$_SERVER[REQUEST_URI]";<br>
print($uri); 
```

例子：

```
http://exemple.com/?directory<br>
Result:
/?diretory 
```

该命令获取目录而不是域。

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2014-12-01T11:49:41.157

如果您只想要域名，请尝试以下操作：

```
$domain = $_SERVER['SERVER_NAME'];

echo $domain; 
```

# java - 存储与类关联的键的最佳实践

> ID：16027105
> 
> 赞同：6
> 
> 时间：2013-04-16T01:03:19.227
> 
> 标签：java, android

将类中使用的一组键值对存储在单独的接口中是更好的做法，还是将其存储在 strings.xml 中更好？

例如：

```
public interface PreferenceKeys {
    static final String PREF1 = "pref1";
    static final String PREF2 = "pref2";
} 
```

然后在我的代码中作为 PreferenceKeys.PREF1 访问它

对比

在 string.xml 中存储为名称-值对：

```
<string name="PREF1">pref1</string>
<string name="PREF2">pref2</string> 
```

然后在我的课堂上访问它：

```
String pref1 = getResources().getString(R.string.PREF1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:24:46.807

我想分享我为偏好存储所做的事情，我使用了 android 的内置功能，称为[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html). 为了方便访问，我创建了一个`SharedPreferences`名为的包装器`UserModel`，其代码如下：

```
package tv.gsgw.android.garusuta.model;

import id.flwi.util.ActivityUtil;
import tv.gsgw.android.garusuta.constant.DataConstant;
import android.content.Context;

public class UserModel implements DataConstant {
    Context _context;

    private String authKey = "";
    private String email = "";
    private String password = "";
    private String birthdate = "";
    private String prefacture = "";
    private String bloodType = "";
    private String idealBodyType = "";
    private String duration = "";
    private String stability = "";
    private String skin = "";
    private String relationship = "";
    private String height = "";
    private String weight = "";
    private boolean registerDataChange = false;

    public UserModel(Context context){
        this._context = context;
        loadFromPreferences();
    }

    public void loadFromPreferences(){
        setAuthKey(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_AUTHKEY, ""));
        setEmail(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_EMAIL, ""));
        setPassword(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_PASSWORD, ""));
        setBirthdate(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_BIRTHDATE, ""));
        setPrefacture(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_PREFACTURE, ""));
        setBloodType(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_BLOODTYPE, ""));
        setIdealBodyType(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_BODYTYPE, ""));
        setPeriod(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_DURATIONPERIOD, ""));
        setStability(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_STABILITY, ""));
        setSkin(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_SKINTYPE, ""));
        setRelationship(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_RELATIONSHIP, ""));
        setHeight(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_HEIGHT, ""));
        setWeight(ActivityUtil.getSharedPreferenceString(_context, USER_DATA_FIELD_NAME_WEIGHT, ""));
        setRegisterDataChange(ActivityUtil.getSharedPreferenceBoolean(_context, USER_DATA_FIELD_REGISTER_DATACHANGE, false));
    }

    public void saveIntoPreferences(){
        saveIntoPreferences(true);
    }
    public void saveIntoPreferences(boolean datachanged){
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_AUTHKEY, getAuthKey());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_EMAIL, getEmail());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_PASSWORD, getPassword());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_BIRTHDATE, getBirthdate());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_PREFACTURE, getPrefacture());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_BLOODTYPE, getBloodType());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_BODYTYPE, getIdealBodyType());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_DURATIONPERIOD, getPeriod());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_STABILITY, getStability());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_SKINTYPE, getSkin());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_RELATIONSHIP, getRelationship());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_HEIGHT, getHeight());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_NAME_WEIGHT, getWeight());
        ActivityUtil.setSharedPreference(_context, USER_DATA_FIELD_REGISTER_DATACHANGE, datachanged);
    }

    public String getAuthKey() {
        return authKey;
    }

    public void setAuthKey(String authKey) {
        this.authKey = authKey;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getBirthdate() {
        return birthdate;
    }

    public void setBirthdate(String birthdate) {
        this.birthdate = birthdate;
    }

    public String getPrefacture() {
        return prefacture;
    }

    public void setPrefacture(String prefacture) {
        this.prefacture = prefacture;
    }

    public String getBloodType() {
        return bloodType;
    }

    public void setBloodType(String bloodType) {
        this.bloodType = bloodType;
    }

    public String getIdealBodyType() {
        return idealBodyType;
    }

    public void setIdealBodyType(String idealBodyType) {
        this.idealBodyType = idealBodyType;
    }

    public String getPeriod() {
        return duration;
    }

    public void setPeriod(String period) {
        this.duration = period;
    }

    public String getSkin() {
        return skin;
    }

    public void setSkin(String skin) {
        this.skin = skin;
    }

    public String getRelationship() {
        return relationship;
    }

    public void setRelationship(String relationship) {
        this.relationship = relationship;
    }

    public String getHeight() {
        return height;
    }

    public void setHeight(String height) {
        this.height = height;
    }

    public String getWeight() {
        return weight;
    }

    public void setWeight(String weight) {
        this.weight = weight;
    }

    public boolean isRegisterDataChange() {
        return registerDataChange;
    }

    public void setRegisterDataChange(boolean registerDataChange) {
        this.registerDataChange = registerDataChange;
    }

    public String getStability() {
        return stability;
    }

    public void setStability(String stability) {
        this.stability = stability;
    }

    public void setRegistrationChanged(boolean dataChange) {
        this.registerDataChange = dataChange;
    }

    public String toString(){
        String str = "";

        str += "authKey: " + authKey + "\n";
        str += "email: " + email + "\n";
        str += "password: " + password + "\n";
        str += "birthdate: " + birthdate + "\n";
        str += "prefacture: " + prefacture + "\n";
        str += "bloodType: " + bloodType + "\n";
        str += "idealBodyType: " + idealBodyType + "\n";
        str += "duration: " + duration + "\n";
        str += "stability: " + stability + "\n";
        str += "skin: " + skin + "\n";
        str += "relationship: " + relationship + "\n";
        str += "height: " + height + "\n";
        str += "weight: " + weight + "\n";
        str += "registerDataChange: " + (registerDataChange ? "true" : "false") + "\n";

        return str;
    }

} 
```

`DataConstant`在上面的代码中只是一个包含这样的常量变量的类：

```
public static final String USER_DATA_FIELD_NAME_AUTHKEY = "new_AuthKey";
public static final String USER_DATA_FIELD_NAME_EMAIL = "new_Email";
public static final String USER_DATA_FIELD_NAME_PASSWORD = "new_Password";
public static final String USER_DATA_FIELD_NAME_BIRTHDATE = "new_Birthday";
public static final String USER_DATA_FIELD_NAME_PREFACTURE = "new_Prefacture";
public static final String USER_DATA_FIELD_NAME_BLOODTYPE = "new_BloodType";
public static final String USER_DATA_FIELD_NAME_BODYTYPE = "new_IdealBodyType";
public static final String USER_DATA_FIELD_NAME_DURATIONPERIOD = "new_Duration";
public static final String USER_DATA_FIELD_NAME_STABILITY = "new_Stability";
public static final String USER_DATA_FIELD_NAME_SKINTYPE = "new_Skin";
public static final String USER_DATA_FIELD_NAME_RELATIONSHIP = "new_Relationship";
public static final String USER_DATA_FIELD_NAME_HEIGHT = "new_Height";
public static final String USER_DATA_FIELD_NAME_WEIGHT = "new_Weight";
public static final String USER_DATA_FIELD_NAME_PHY_1 = "new_phy1";
public static final String USER_DATA_FIELD_NAME_PHY_2 = "new_phy2"; 
```

这使用了一个实用程序类，该类也创建以帮助`SharedPreferences`更轻松地工作：

```
package id.flwi.util;

/**
 * @author Arief Bayu Purwanto
 */
import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.util.Calendar;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;

public class ActivityUtil {
    public static final String PREFS_NAME = "____MyPrefsFile";

    public static void debugExtra(Bundle extras){
        if( extras != null) {
            Log.i("Log", "printing all extras information");
            java.util.Set<String> keys = extras.keySet();
            java.util.Iterator<String> keyIterator = keys.iterator();
            int index = 0;
            while(keyIterator.hasNext()) {
                Log.i("log", "  extras #" + (++index) + ": " + keyIterator.next());
            }
        } else {
            Log.i("Log", "empty extras");
        }
    }

    public static boolean getSharedPreferenceBoolean(Context c, String preference){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getBoolean(preference, false);
    }
    public static boolean getSharedPreferenceBoolean(Context c, String preference, boolean defaultValue){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getBoolean(preference, defaultValue);
    }
    public static String getSharedPreferenceString(Context c, String preference){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getString(preference, "");
    }
    public static String getSharedPreferenceString(Context c, String preference, String defaultValue){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getString(preference, defaultValue);
    }
    public static int getSharedPreferenceInt(Context c, String preference, int defaultValue){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getInt(preference, defaultValue);
    }

    public static long getSharedPreferenceLong(Context c, String preference, long defaultValue){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        return settings.getLong(preference, defaultValue);
    }

    public static void setSharedPreference(Context c, String preference, boolean prefValue){

        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putBoolean(preference, prefValue);
        editor.commit();
    }

    public static void setSharedPreference(Context c, String preference, Long prefValue){

        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putLong(preference, prefValue);
        editor.commit();
    }

    public static void setSharedPreference(Context c, String preference, int prefValue){

        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt(preference, prefValue);
        editor.commit();
    }
    public static void setSharedPreference(Context c, String preference, String prefValue){
        SharedPreferences settings = c.getSharedPreferences(ActivityUtil.PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString(preference, prefValue);
        editor.commit();
    }

} 
```

使用它非常简单：

1.  要加载数据，您只需调用：

    ```
    UserModel sharedData = new UserModel(getApplicationContext()); 
    ```

2.  要更改或检索数据，只需调用它的关联字段 getter/setter：

    ```
    sharedData.getPassword();
    sharedData.setPassword("new password"); 
    ```

3.  最后，如果您更改字段，请不要忘记致电`saveIntoPreferences`：

    ```
    sharedData.saveIntoPreferences(); 
    ```

希望这有助于解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:12:22.767

在我看来，尽量减少项目中“上下文”的使用，以避免内存泄漏或加载不必要的资源。

共享首选项是一个不错的选择，但需要使用应用程序或活动的上下文。当您想要保留一些动态值时经常使用，是这样吗？

Java 接口仅使用最终成员（静态），并且在代码中非常紧凑且易于使用（记住）。尝试始终使用具有静态不可变成员（如 ip、密码等）。

此外，例如，使用枚举来管理应用程序中的状态或其他事物

```
public  interface Preferences {
    public String HOST = "http://xxx.xxx.xxx.xxx";
    public String PREF1 = "pref1";
    public String PREF2 = "pref2"; 
    public enum Connection { CONNECTED, DISCONNECTED, UNKNOWN }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:40:24.613

使用 java 类或在 sharedPreference 中取决于您，它们之间的差异是您的目的。在我看来，如果你想保存常量，只需使用扩展 Enum 的 java 类。否则，保存在 sharedPreference 中的用户数据、会话数据，您可以参考 ariefbayu 的答案，但在我的建议中使用反射来获取您的字段值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:55:48.490

我更喜欢`strings.xml`用于需要在布局文件中使用的资源。对于需要在类中访问的变量，我更喜欢这种`interface`方式。

# linux - 使用管道的多进程/线程中 unix 上的 PERL SCRIPT 中的 SEGMENTATION FAULT

> ID：16027109
> 
> 赞同：1
> 
> 时间：2013-04-16T01:03:55.567
> 
> 标签：linux, multithreading, perl, multiprocessing, interprocess

我是 perl 中多进程编程过程的新手。我正在尝试编写一个基于多线程多进程的应用程序，它给了我“分段故障”。程序很简单。首先，父进程产生几个进程（使用 fork），每个进程在一段时间后运行，并在随机延迟后死亡。同时，父进程产生相同数量的线程来监听每个新分叉的子进程。我正在使用管道在分叉的进程和从主进程产生的线程之间进行通信。这里的想法是，当一个进程死亡时，应该立即使用相同的管道生成另一个新进程，因此在子例程调用之后无限循环。有一段时间，这可以正常工作，但突然出现分段错误。我该如何调试这样的场景？我的 PERL 版本是 5.8.8

```
#!/usr/local/bin/perl -w
use strict;
use threads;
use threads::shared;
use IO::Pipe;
use warnings;
print "Starting main program\n";
my $ACTIVE_PROCESSES :shared =0;
my $MAX_PROCESSES:shared =5,
my %process_state_list : shared;
my %process_id_list : shared;
$SIG{CHLD} = sub { wait };
my $GLOBAL_COUNT=0;
my @pipe_array=&share([]);
&init_pipes();
&spawn_process();
while(1)
{
for (my $i=0;$i<$MAX_PROCESSES;$i++)
 {
    if ($process_state_list{$i} =~ /INACTIVE/)
    {
        print "Found Process $i is inactive\n"; 
    spawn_next_process($i);
    }
 }
}
print "End of main program from $$\n";

sub init_pipes
{
my $i=0;
for ($i=0;$i< $MAX_PROCESSES; $i++)
  { 
    $pipe_array[$i] = IO::Pipe->new();
    $process_state_list{$i}="INACTIVE";
    print "Pipe $i initialized to $pipe_array[$i]\n";
  }
}
sub spawn_process
{
print "Spawn process called..\n";
while ( $ACTIVE_PROCESSES < $MAX_PROCESSES) 
   {
      $GLOBAL_COUNT++;
      PARENT_create_child();
      PARENT_create_child_listener();
   }
}

sub PARENT_update_child_map
{
my ($i,$cmd)=@_;
if ($cmd =~ /CREATE/)
  {
    for (my $j=0;$j<$MAX_PROCESSES;$j++)
    {
        print "j is $j and process_state_list is $process_state_list{$j}\n";
    if ($process_state_list{$j}=~ /INACTIVE/)
    {
        $process_state_list{$j}="ACTIVE";
        return $j;
    }
    }
  }
}
sub PARENT_create_child()
{
    for (my $i=0;$i<$MAX_PROCESSES;$i++)
     {
        print"--------FORKING CHILD from MAIN PROCESS MAIN PID $$\n";
        my $local_pr_id = PARENT_update_child_map($i,"CREATE");
        my $pid = fork() ;
                if ($pid) {
        # parent
        print "For local_pr_id $local_pr_id CHILD is $pid, PARENT $$\n";
        $ACTIVE_PROCESSES++;
                } 
        elsif ($pid == 0) {
                # child
                child_activator($local_pr_id);
        exit 0;
        } else {
                die "couldnt fork: $!\n";
        }
      }
}
sub PARENT_create_child_listener()
{
print"--------THREADING CHILD LISTENER FROM--$$--\n";
my $i;
for ($i=0;$i<$MAX_PROCESSES;$i++)
{
my $worker_thread = threads->create(sub {\&read_from_child($i)});
$worker_thread->detach();
}
}
sub read_from_child
{
    my $th=threads->self();
    print"--------NOW THREADING:$th->tid()\n";
    my ($pipe_index)=shift;
    print "pipe_index is $pipe_index\n";
    ($pipe_array[$pipe_index])->reader();
    my $filehandle=$pipe_array[$pipe_index];
    while ( <$filehandle> ) {
        my $msg=$_;
        print "CHILD LISTENER received: $msg And current Process ID is $$\n";
        PARENT_msg_from_child($msg);
    }
    print "Exiting read_from_child from $$\n";
}
sub PARENT_msg_from_child()
{
my $msg=shift;
if ($msg =~ /IPC_MSG_PROCESS_EXIT/)
  {
   PARENT_handle_IPC_MSG_PROCESS_EXIT($msg);
  }
if ($msg=~ /IPC_MSG_PROCESS_START/)
  {
   PARENT_handle_IPC_MSG_PROCESS_START($msg);
  }
}
sub PARENT_handle_IPC_MSG_PROCESS_START
{
my $msg=shift;
my @split_array=split(":",$msg);
my $local_pr_id=$split_array[1];
my $process_id=$split_array[2];
$process_state_list{$local_pr_id}="ACTIVE";
$process_id_list{$local_pr_id}=$process_id;
}
sub PARENT_handle_IPC_MSG_PROCESS_EXIT
{
my $msg=shift;
my @split_array=split(":",$msg);
my $local_pr_id=$split_array[1];
print "------------------------\n";
$ACTIVE_PROCESSES--;
$process_state_list{$local_pr_id}="INACTIVE";
my $exists = kill 0, $local_pr_id;
kill(9,$process_id_list{$local_pr_id}) if $exists;
print "Process $process_id_list{$local_pr_id} terminated\n";
}
sub spawn_next_process
{
my $local_pr_id= shift;
print"--------FORKING NEXT CHILD from MAIN PROCESS MAIN PID $$\n";
        $process_state_list{$local_pr_id}="ACTIVE";
        my $pid = fork() ;
                if ($pid) {
        # parent
        print "For local_pr_id $local_pr_id CHILD is $pid, PARENT $$\n";
        $ACTIVE_PROCESSES++;
                } 
        elsif ($pid == 0) {
                # child
                child_activator($local_pr_id);
        exit 0;
        } else {
                die "couldnt fork: $!\n";
        }
}
#################C H I L D -- S E C T I O N####################
sub child_activator {
        sleep (7);
        my $local_pr_id=shift;
        print "In child activator $$\n";
        my $filehandle=$pipe_array[$local_pr_id] ;
        ($pipe_array[$local_pr_id])->writer();
        my $message="IPC_MSG_PROCESS_START:$local_pr_id:$$:";
    print "Sending $message\n";
        print $filehandle $message
            or die "Failed to pass message to child: $!";
        my $random_number = rand();
        sleep(4*$random_number);
        print "Now in child process $$\n";
        print "local_pr_id is $local_pr_id\n";
        $message="IPC_MSG_PROCESS_EXIT:$local_pr_id:";
        print "Sending $message\n";
        print $filehandle $message
            or die "Failed to pass message to child: $!";
}
################# E N D - C H I L D - S E C T I O N########### 
```

**我从中得到的输出非常奇怪**：-

```
<I>xl-mat-02{userxxx}141: perl run_tc.pl
Starting main program
Pipe 0 initialized to IO::Pipe=GLOB(0x169c4830)
Pipe 1 initialized to IO::Pipe=GLOB(0x168632a0)
Pipe 2 initialized to IO::Pipe=GLOB(0x169c4af0)
Pipe 3 initialized to IO::Pipe=GLOB(0x169c4bb0)
Pipe 4 initialized to IO::Pipe=GLOB(0x169c4c70)
Spawn process called..
--------FORKING CHILD from MAIN PROCESS MAIN PID 1520
j is 0 and process_state_list is INACTIVE
For local_pr_id 0 CHILD is 1598, PARENT 1520
--------FORKING CHILD from MAIN PROCESS MAIN PID 1520
j is 0 and process_state_list is ACTIVE
j is 1 and process_state_list is INACTIVE
For local_pr_id 1 CHILD is 1599, PARENT 1520
--------FORKING CHILD from MAIN PROCESS MAIN PID 1520
j is 0 and process_state_list is ACTIVE
j is 1 and process_state_list is ACTIVE
j is 2 and process_state_list is INACTIVE
For local_pr_id 2 CHILD is 1600, PARENT 1520
--------FORKING CHILD from MAIN PROCESS MAIN PID 1520
j is 0 and process_state_list is ACTIVE
j is 1 and process_state_list is ACTIVE
j is 2 and process_state_list is ACTIVE
j is 3 and process_state_list is INACTIVE
For local_pr_id 3 CHILD is 1601, PARENT 1520
--------FORKING CHILD from MAIN PROCESS MAIN PID 1520
j is 0 and process_state_list is ACTIVE
j is 1 and process_state_list is ACTIVE
j is 2 and process_state_list is ACTIVE
j is 3 and process_state_list is ACTIVE
j is 4 and process_state_list is INACTIVE
For local_pr_id 4 CHILD is 1602, PARENT 1520
--------THREADING CHILD LISTENER FROM--1520--
--------NOW THREADING:threads=SCALAR(0x16abfef0)->tid()
pipe_index is 0
--------NOW THREADING:threads=SCALAR(0x16b95010)->tid()
pipe_index is 1
--------NOW THREADING:threads=SCALAR(0x2aaaac0fdfb0)->tid()
pipe_index is 2
--------NOW THREADING:threads=SCALAR(0x2aaaac1e2770)->tid()
pipe_index is 3
--------NOW THREADING:threads=SCALAR(0x2aaaac2c7210)->tid()
pipe_index is 4
In child activator 1598
Sending IPC_MSG_PROCESS_START:0:1598:
In child activator 1599
Sending IPC_MSG_PROCESS_START:1:1599:
In child activator 1600
Sending IPC_MSG_PROCESS_START:2:1600:
In child activator 1601
Sending IPC_MSG_PROCESS_START:3:1601:
In child activator 1602
Sending IPC_MSG_PROCESS_START:4:1602:
Now in child process 1599
local_pr_id is 1
Now in child process 1600
local_pr_id is 2
Sending IPC_MSG_PROCESS_EXIT:2:
Sending IPC_MSG_PROCESS_EXIT:1:
Now in child process 1601
local_pr_id is 3
Sending IPC_MSG_PROCESS_EXIT:3:
***Segmentation fault***
xl-mat-02{userxxx}142: Now in child process 1598
local_pr_id is 0
Sending IPC_MSG_PROCESS_EXIT:0:
Now in child process 1602
local_pr_id is 4
Sending IPC_MSG_PROCESS_EXIT:4:</I> 
```

我无法发现为什么会出现分段错误。就像我说的，我是在多进程环境中编程的新手。所以我可能错过了一些非常基本的东西。任何帮助，将不胜感激。即使您对这种情况下的分段错误有一些基本提示，也请告诉我，因为我一无所知！

# machine-learning - 贝叶斯网络

> ID：16027112
> 
> 赞同：0
> 
> 时间：2013-04-16T01:04:23.523
> 
> 标签：machine-learning, bayesian, bayesian-networks

我是机器学习的新手。

我有一个有 4 个变量 [X1,X2,X3,X4] 的 BN，我有兴趣根据这些变量预测 Y。对于训练数据，我有 [X1,X2,X3,X4,Y]。但是对于实际数据，我只有 [X1,X2,X3] 并且我想预测 Y。此外，我知道 X4 有条件地独立于 X1、X2 和 X3。

这可能吗？有没有标准的技术来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T13:38:07.433

如果有时间戳，即数据是临时的而不是 iid，您应该使用以下之一：

**一世。**马尔可夫链；

**二**、隐马尔可夫模型；

**iii.** 动态贝叶斯网络。

请注意，解决方案的复杂性（和复杂性）从 i 开始增加。至三。

希望这可以帮助。

# c# - 如何从 WCF 中的数据库返回 PDF/二进制数据

> ID：16027117
> 
> 赞同：0
> 
> 时间：2013-04-16T01:05:17.780
> 
> 标签：c#, sql-server, json, wcf-rest

我有一个 WCF-REST 服务，它以 JSON 格式返回数据，从 SQLSERVER 中的数据库读取...返回简单数据，我没有任何问题。

现在，我想返回一个 PDF 文件，该文件位于 varbinary(max) 字段中的数据库中。
在 WCF 休息服务中返回 PDF 数据的正确方法是什么？

[已编辑] 这就是建议的方式。这是课程：

```
 [WebGet(UriTemplate = "/documents/{id}")]
    public ActionResult GetDocument(int id)
    {
        using (var context = new CorrespondenceDataContext())
        {
            var item = context.DocumentsPDFs.Find(id);
            return File(item.Document, "application/pdf", "Document-" + id);
        }
    } 
```

现在我已经完全按照建议做了，但我想它与我的项目不兼容（我对此有点陌生）......
第一个错误：找不到类型或命名空间名称“ActionResult”
第二个错误：System.Data.Linq.Table 不包含查找
第三个错误的定义：System.IO.File 是一种类型，但用作变量

我试图添加 System.Web.MVC，但它没有出现。我的项目是 WCF 服务应用程序...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:35:06.630

```
 [WebGet(UriTemplate = "/documents/{id}")]
    public ActionResult GetDocument(int id)
    {
        using(var context = new CorrespondenceDataContext())
        {
            var item = context.DocumentsPDFs.Find(id);
            return File(item.Document, "application/pdf", "Document-" + id);
        }
    } 
```

# linux - 为编译器保护类似小提琴的 webapp？

> ID：16027118
> 
> 赞同：1
> 
> 时间：2013-04-16T01:05:19.047
> 
> 标签：linux, web-services, security, fork, sandbox

我正计划构建一个 Web 应用程序，让用户编写自己的代码，在浏览器中编译和测试它，比如[phpFiddle](http://phpfiddle.org/)或[Golang 的 tour](http://tour.golang.org/#1)

*   我知道保护这样的服务器会很困难。
*   我知道我可以尝试通过限制对 VM 标准库的访问来保护它（我可能会这样做），但我知道这不足以保护各种攻击，所以它根本不是真正的保护.

这是我正在考虑的处理方式：

*   主从配置，从服务器只能由主服务器访问。从服务器将运行一个服务器，该服务器将根据请求在 chroot 监狱中生成编译器进程，并施加超时，因此如果应用程序运行时间超过指定时间，它将终止应用程序。
*   使用用户绑定的 chroot，我可以很好地控制用户可以访问的内容（特别是因为我的目标语言没有很多依赖项），但我确信仍然存在粗糙的边缘，例如：
    *   如何防止不受信任的程序运行其他独立进程？有没有一种好方法可以拒绝一个进程来分叉或产生任何其他进程？
    *   我可能忽略了哪些其他可能的攻击路线？

我进行了一些搜索以找到好的基于 linux 的沙箱，虽然它们看起来很不错，但对我来说似乎有点矫枉过正，因为我的从服务器本身可以被认为是一个沙箱，因为我会将它们专用编译/运行请求的代码的任务。这就是为什么我在这里而不是在 Serverfault 中问这个问题，因为它似乎与编程相关而不是与服务器配置相关。

# android - 何时在 Android 中使用 res/xml vs.res/layout 文件夹

> ID：16027122
> 
> 赞同：9
> 
> 时间：2013-04-16T01:05:47.893
> 
> 标签：android, android-ui

我正在为我的应用程序创建首选项，并注意到一些示例将 XML 存储在 res/layout 中，而其他示例将它们存储在 res/xml 中。是否有理由或最佳实践将它们存储在一个与另一个中？我的 res/layout 文件夹中已经有一堆布局文件，那么将首选项布局文件放在 res/xml 中是否有意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T02:28:28.263

Prefereces xmls 应该放在 res/xml 文件夹中。res/layout 仅适用于布局 xml。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-12T09:57:35.567

[这](http://developer.android.com/guide/topics/resources/providing-resources.html)是来自谷歌。

**将 res/xml/ 用于可在运行时**通过调用 Resources.getXML()读取的任意 XML 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-13T15:37:38.570

Preference XML 文件位置的最佳实践必须如此处所述[：](http://developer.android.com/guide/topics/ui/settings.html) “您必须将 XML 文件保存在 res/xml/ 目录中。尽管您可以为文件命名任何您想要的名称，但它通常命名为preferences.xml”。

虽然我找不到验证，但您的应用程序的自定义命名空间是 AndroidManifest.xml 文件中指定的包名称。

`xmlns:android="http://schemas.android.com/apk/res/android" package="com.mydomain.app"`

您可以将此命名空间用于引用自定义控件和首选项的自定义 XML 属性。例如，在 XML 文件中包含如下内容：

`xmlns:android="http://schemas.android.com/apk/res/android" xmlns:myname="http://schemas.android.com/apk/res/com.mydomain.app"`

在同一个 XML 文件中包含一些自定义组件：

```
 <com.mydomain.app.MyListPreference
        android:key="pref_item1"
        android:title="@string/item1" 
        android:summary="@string/pref_mysummary"
        myname:someAttr="500" /> 
```

someAttr 仍然需要在 attr.xml 文件的 values 文件夹中定义。attr 在组件的样式中声明如下：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="com.mydomain.app.MyListPreference">
        <attr name="someAttr" format="integer" />
    </declare-styleable> 
</resources> 
```

在定义自定义组件或首选项的类中，您可以使用以下方式获取属性：

```
mDefaultValue = attrs.getAttributeIntValue(
"http://schemas.android.com/apk/res/com.mydomain.app", ATTR_DEFAULT_VALUE, 50); 
```

# vb6 - 表单不活动时如何使用 KeyDown 事件？

> ID：16027124
> 
> 赞同：2
> 
> 时间：2013-04-16T01:06:11.613
> 
> 标签：vb6

当我按 Q 时，我的代码使我的鼠标移开并单击，因此使表单处于非活动状态，并单击那里的任何内容。

现在，当我再次按 Q 时，它不起作用，因为表单处于非活动状态。当表单不活动时，如何使 KeyDown 事件仍然触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:22:10.720

如果您的应用程序没有焦点，则它不能触发`KeyDown`事件。

在这些情况下，您有两种选择。假设您只想监控 1-2 个键，那么您可以使用[RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)函数注册一个热键，如本[例所示](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/c1a24688-d844-4adc-9d85-416a7158c6ba/)。

如果您想监控更多内容，那么使用低级键盘挂钩会更明智。

# python - Python setter 设计模式

> ID：16027125
> 
> 赞同：0
> 
> 时间：2013-04-16T01:06:14.923
> 
> 标签：python, design-patterns

我有这样的课

```
class Ownership:
    like = models.BooleanField()
    queue = models.BooleanField()
    started = models.BooleanField()
    current = models.BooleanField()
    finished = models.BooleanField() 
```

可以通过放置 dict 从 REST API 更新它`{like:True, finished:True...}`。

同时，一些字段也有规则，例如：

如果`like=True`，那么`finished=True`。我遇到的问题是如何正确更新值，当客户发布时，比如说，`{like:True, finished:False}`在这里，如果我们使用 setter 设置完成 = True，那么完成的 setter 会将值重置为 False。

什么是有助于澄清和解决这种情况的好方法/设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:21:30.600

您可以覆盖默认保存方法以验证和更改值

```
class Ownership:
    like = models.BooleanField()
    queue = models.BooleanField()
    started = models.BooleanField()
    current = models.BooleanField()
    finished = models.BooleanField()

    def save(self, *args, **kwargs):
        if self.like:
            self.finished = True
        super(Ownership, self).save(*args, **kwargs) # Call the "real" save() method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:16:05.907

在我看来，您将不得不编写一个在这种情况下返回 HTTP 400 或类似的验证器。也许409更合适？在任何一种情况下，您都可以包含一个错误字符串来解释哪个键/值组合导致了错误。

# delphi - winapi改变亮度

> ID：16027126
> 
> 赞同：3
> 
> 时间：2013-04-16T01:06:18.507
> 
> 标签：delphi, screen, brightness

有什么winapi可以改变屏幕的亮度？

![在此处输入图像描述](https://i.stack.imgur.com/wuzVU.png)

我一直在尝试寻找可以用于 Delphi 的示例或 API，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T03:06:59.417

从 Windows Vista 开始，您可以使用[`GetMonitorBrightness`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd692939%28v=vs.85%29.aspx)和[`SetMonitorBrightness`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd692972%28v=vs.85%29.aspx)功能。

```
function GetMonitorBrightness(
  hMonitor : THandle;
  var   pdwMinimumBrightness : DWORD;
  var   pdwCurrentBrightness : DWORD;
  var   pdwMaximumBrightness : DWORD
) : BOOL; stdcall ; external 'Dxva2.dll' name 'GetMonitorBrightness';

function SetMonitorBrightness(
  hMonitor : THandle;
  dwNewBrightness : DWORD
): BOOL; stdcall ; external 'Dxva2.dll' name 'SetMonitorBrightness'; 
```

另一种选择是使用WMI 类的[`WmiSetBrightness`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394549%28v=vs.85%29.aspx)方法。[`WmiMonitorBrightnessMethods`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394538%28v=vs.85%29.aspx)

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  Variants,
  ComObj;

procedure  SetBrightness(Timeout : Integer; Brightness : Byte);
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\WMI', '', '');
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM WmiMonitorBrightnessMethods Where Active=True','WQL',$00000020);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    FWbemObject.WmiSetBrightness(Timeout, Brightness);
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      SetBrightness(5, 100);
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

**注意**：如果[GetMonitorCapabilities](http://msdn.microsoft.com/en-us/library/windows/desktop/dd692940%28v=vs.85%29.aspx)函数返回 MC_CAPS_BRIGHTNESS 标志，则支持这些函数。

# delphi - 即使使用 TFile 标记为共享读取，也无法再次打开文件

> ID：16027127
> 
> 赞同：3
> 
> 时间：2013-04-16T01:06:24.103
> 
> 标签：delphi, delphi-xe3

鉴于此代码：

```
 FN := 'c:\temp\test_file.log';
  AFile := TFile.Open(FN, TFileMode.fmOpenOrCreate, TFileAccess.faReadWrite, TFileShare.fsRead);
  try
    with TFile.OpenRead(FN) do
    try

    finally
      Free;
    end;

  finally
    AFile.Free;
  end; 
```

尝试在 TFile.OpenRead(FN) 行打开时出现错误：
![在此处输入图像描述](https://i.stack.imgur.com/w3nIV.png)

使用：

```
with TFile.Open('c:\temp\test_file.log', TFileMode.fmOpen, TFileAccess.faRead, TFileShare.fsRead) do
try

finally
  Free;
end; 
```

也会导致同样的错误。就像这样：

```
 FS := TFileStream.Create('c:\temp\test_file.log', fmOpenRead or fmShareDenyWrite);
  try

  finally
    FS.Free;
  end; 
```

但是，我可以愉快地在记事本中打开文件（如只读），或者如果我将初始 TFileShare.fsRead 更改为 TFileShare.fsNone，我无法按预期打开它（在记事本中）。

但是，如果我运行这个虚拟应用程序的两个实例，第一个使用 TFileShare.fsRead 打开我可以打开它。那么我是否无法在同一个应用程序中重新打开文件两次？似乎不对。

如果我最初使用以下命令打开文件：

```
 FS := TFileStream.Create('c:\temp\test_file.log', fmOpenReadWrite or fmShareDenyWrite);
  try

  finally
    FS.Free;
  end; 
```

我可以使用上述方法（使用 fsRead）再次打开它。令人困惑的是单步执行 TFile.Open 代码，它最终执行的代码与上面的 TFileStream.Create 完全相同。

最后注。如果我使用顶部（第一种）方式打开但将其分配给“全局”变量，请删除内部 TFile.OpenRead(FN) 调用，然后尝试通过单击另一个按钮打开文件，错误仍然存​​在。这证明它与嵌套调用无关。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T08:32:26.043

你打电话时

```
TFile.OpenRead(Path) 
```

这是由

```
TFileStream.Create(Path, fmOpenRead, 0) 
```

这反过来又会导致调用

```
FileOpen(Path, fmOpenRead or 0) 
```

最终将`CreateFile`传递`0`称为`dwShareMode`. 并且文档[`CreateFile`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363858.aspx)说`dwShareMode`的`0`意思是：

> 阻止其他进程在请求删除、读取或写入访问权限时打开文件或设备。

换句话说，`TFile.OpenRead(Path)`就是试图以独占共享模式打开文件。由于文件已经打开，这显然会失败。

我认为这`TFile.OpenRead(Path)`是使用错误的共享模式。它应该允许读取访问。但是，即使是这种情况，它也无济于事，因为您的另一个句柄具有写访问权限。

通过避免来解决问题`TFile.OpenRead`。而是像这样打开它：

```
TFileStream.Create(Path, fmOpenRead or fmShareDenyNone) 
```

你必须通过`fmShareDenyNone`。您无法拒绝任何形式的共享，因为您已经打开它进行阅读和写作。

* * *

当我最初写这个答案时，还有一个我没有掌握的问题。确实，`TFile.OpenRead()`总是试图获得独占访问权。但是，您对 的使用（您`TFile.Open()`拨打的第一个电话）也确实会导致独占访问。即使您指定了`TFileShare.fsRead`.

创建文件流的代码`TFile.Open()`如下所示：

```
if Exists(Path) then
  Result := TFileStream.Create(Path, LFileStrmAccess, LFileStrmShare)
else
  Result := TFileStream.Create(Path, fmCreate, LFileStrmShare); 
```

马上，这就是一场灾难。文件创建行为打开文件存在检查是简单而简单的错误。文件创建需要是原子操作。如果文件是在返回之后创建的，但在内部`Exists`调用该文件之前呢？但我猜代码之所以写成这样，是因为没有办法使用，已经传到. 因此，这个可怕的拙劣。`CreateFile``TFileStream.Create``TFileStream.Create``OPEN_ALWAYS``CreateFile`

事实证明，如果选择了该`fmCreate`选项，因为`Exists()`返回`False`，那么您的共享选项将被忽略。那是因为它们被传递给`Rights`参数`TFileStream.Create`而不是与`fmCreate`. 正如[文档](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TFileStream.Create)所说，在 Windows 上，该`Rights`参数被忽略。

所以正确的代码应该是：

```
Result := TFileStream.Create(Path, fmCreate or LFileStrmShare); 
```

if 的另一个分支呢？那肯定也是错的。由于传递给的值`Rights`被忽略，那么肯定会忽略 的值`LFileStrmShare`。好吧，事实证明文件撒谎了。中的代码`TFileStream.Create`如下：

```
constructor TFileStream.Create(const AFileName: string; Mode: Word; Rights: Cardinal);
var
  LShareMode: Word;
begin
  if (Mode and fmCreate = fmCreate) then
  begin
    LShareMode := Mode and $FF;
    if LShareMode = $FF then
      LShareMode := fmShareExclusive; // For compat in case $FFFF passed as Mode
    inherited Create(FileCreate(AFileName, LShareMode, Rights));
    if FHandle = INVALID_HANDLE_VALUE then
      raise EFCreateError.CreateResFmt(@SFCreateErrorEx, [ExpandFileName(AFileName), SysErrorMessage(GetLastError)]);
  end
  else
  begin
    inherited Create(FileOpen(AFileName, Mode or Rights));
    if FHandle = INVALID_HANDLE_VALUE then
      raise EFOpenError.CreateResFmt(@SFOpenErrorEx, [ExpandFileName(AFileName), SysErrorMessage(GetLastError)]);
  end;
  FFileName := AFileName;
end; 
```

查看传递到的`else`分支。这看起来不太像被忽略。`Mode or Rights``FileOpen``Rights`

`TFile.Open`因此，所有这一切都解释了为什么当且仅当文件已经存在时，才能在您的调用中正确设置共享模式。

所以，不仅不能用`TFile.OpenRead`，而且`TFile.Open`也out了。在你领先时退出并完全放弃`TFile`。我不知道 Embarcadero 的 QA 在`TFile`引入时发生了什么，但显然有一个重大失败。将这种失败与奇怪的设计缺陷结合起来`TFileStream.Create`，你就有了一个名副其实的错误工厂。

我提交了一份质量控制报告：[QC#115020](http://qc.embarcadero.com/wc/qcmain.aspx?d=115020)。`TFileStream.Create`非常有趣的是，在不应该使用的地方使用的错误行为`Rights`对于 XE3 来说是新的。我相信这是一种尝试处理`TFile.Open`已被报告为[QC#107005](http://qc.embarcadero.com/wc/qcmain.aspx?d=107005)的虚假代码，该代码被错误地标记为已修复。`TFile.Open`可悲的是，修复叶子的尝试`TFile.Open`仍然坏了，反过来又打破了`TFileStream.Create`以前的工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:39:54.323

从 TFileStream.Create 调用的 FileCreate 和 FileOpen 中的 Mode 中提取具有 windows 访问权限的权限。
[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)在这里用 ShareMode[(Mode and $F0) shr 4] 调用。

TFileMode.fmOpenOrCreate 将调用
TFileStream.Create(Path, fmCreate, LFileStrmShare); 是文件不存在。

行为可以展示

```
function OpenReadShareALL(const Path: string): TFileStream;
begin
  If FileExists(Path) then
    begin
      try
        Result := TFileStream.Create(Path, fmOpenRead or fmShareDenyNone);
        // will work too at lest up to XE since rights are ignored in oder versions
        //Result := TFileStream.Create(Path, fmOpenRead or fmShareDenyNone,fmShareExclusive);
      except
        on E: EFileStreamError do
          raise EInOutError.Create(E.Message);
      end;
    end;
end;

var
  FN:String;
  AFile:TFileStream;
begin
  FN := 'c:\temp\test_file.log';
 // this will lock file at least until Delphi XE if file has to be created
 //AFile := TFile.Open(FN, TFileMode.fmOpenOrCreate, TFileAccess.faReadWrite, TFileShare.fsReadWrite);

 // the following will work
 if Fileexists(FN) then
    AFile := TFileStream.Create(fn,fmOpenRead or fmOpenWrite or fmShareDenyNone)
 else
    AFile := TFileStream.Create(fn,fmCreate  or fmShareDenyNone);      

 // won't work if file does not exists , and will not work with existing file up to at least Delphi XE (fixed in XE 3 , maybe XE 2 too)
 //  AFile := TFileStream.Create(fn,fmCreate or fmOpenReadWrite ,fmShareDenyNone);
  try
    with OpenReadShareAll(FN) do
    try
      Showmessage('Worked');
    finally
      Free;
    end;

  finally
    AFile.Free;
  end;
end; 
```

在 XE3 中，似乎更正了 fmCreate 以外的访问模式的权限忽略

```
inherited Create(FileOpen(AFileName, Mode or Rights)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T06:58:12.023

至少在 Delphi 2010 之前存在类似的问题。基本问题是，如果文件被标记为“创建”，则根本不考虑某些共享标志。你可以阅读更多关于

[http://cc.embarcadero.com/Item/21636](http://cc.embarcadero.com/Item/21636)

至少应该对“旧样式”文件创建进行修复，您可以在其中“或”将标志放在一起。

# apache - 如果我用作反向代理 NGinx，我可以禁用 apache mod_setenvif 吗？

> ID：16027128
> 
> 赞同：0
> 
> 时间：2013-04-16T01:06:28.147
> 
> 标签：apache, http, nginx

我已经在我现有的 apache 服务器前面安装了 Nginx 作为反向代理。我所有的请求都从 Nginx 服务器路由到 Apache。

我可以在我的 apache 服务器中禁用 mod_setenvif 吗？

Web<->Nginx<->Apache

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:17:51.413

`mod_setenvif`如果您不使用该模块提供的任何功能，则可以禁用： `BrowserMatch`、`BrowserMatchNoCase`、`SetEnvIf`和`SetEnvIfNoCase`指令。Nginx 与它无关。

# three.js - 三.js如何制作双面对象

> ID：16027131
> 
> 赞同：26
> 
> 时间：2013-04-16T01:06:47.277
> 
> 标签：three.js, webgl

Blender export obj 不导出双面对象。如何以双面模式渲染对象。我试过这个没有成功：

```
var loader = new THREE.OBJMTLLoader();
    loader.load('models/test.obj');
    loader.addEventListener( 'load', function ( event ) {
        objects = event.content;
        objects.position.set(0,5,0);
        objects.scale.set(1.5,1.5,1.5);
        objects.mesh.doubleSided = true;
        scene.add(objects);
    }); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-16T02:56:12.533

在您的情况下，您将以下内容添加到回调函数中：

```
objects.traverse( function( node ) {
    if( node.material ) {
        node.material.side = THREE.DoubleSide;
    }
}); 
```

的`doubleSided`属性`Mesh`已弃用。它被替换`side`为`Material`

此外，最好从适用于当前版本库的 three.js 示例中学习。

三.js r.57

# object - 发布故事时使用与 OG:URL 不同的链接

> ID：16027132
> 
> 赞同：0
> 
> 时间：2013-04-16T01:06:48.480
> 
> 标签：object, facebook-javascript-sdk, action, facebook-opengraph, facebook-stream-story

我正在使用自定义操作，并且我在与用户单击时间轴上的故事时要访问的页面不同的页面上创建我的 facebook 对象。

有什么办法可以偷偷把正确的 URL 偷回来吗？

例如。要从 XYZ 网站发布故事，会在 ABC 页面上自动生成一个对象供 facebook 使用。我们希望用户点击他们的时间线并仍然访问 XYZ 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:07:24.110

最简单的方法是在您的对象元标记中使用元重定向。

`<META http-equiv="refresh" content="0;URL=http://XYZwebsite">`

# c++ - 从位于服务器不同位置的命令行参数传递的打开文件名

> ID：16027133
> 
> 赞同：0
> 
> 时间：2013-04-16T01:06:48.800
> 
> 标签：c++, linux, file-io, arguments, fopen

我想打开从命令行发送的文件名，但文件位于 /home/docs/cs230 中。以下是我尝试过的代码，但是当我尝试在 linux 中编译时显示错误：

```
int main(int arg, char* args[1]) {
   // Open the file 
   newfile = fopen("/home/docs/cs230/"+args[1], "w+b");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:16:26.900

由于这是 C++，我们可以使用`std::string`这样使用：

```
int main(int arg, char* args[]) {
   // Open the file 
   std::string path( "/home/docs/cs230/" ) ;

   path+= args[1] ;

   std::cout << path << std::endl ;

   FILE *newfile = fopen( path.c_str(), "w+b");
} 
```

Mats 还提出了一个很好的评论，即在 C++ 中我们将使用[fstream](http://www.cplusplus.com/reference/fstream/ofstream/open/)，您可以在链接中阅读更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:18:26.120

由于这是 C++，我建议这样做：

```
int main(int argc, char *argv[])    
// Please don't make up your own names for argc/argv, it just confuses people!
{
    std::string filename = "/home/docs/cs230/";
    filename += argv[1]; 
    newfile = fopen(filename.c_str(), "w+b");
} 
```

[虽然要使其完全使用 C++，但您应该使用`fstream`，而不是 FILE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T04:42:03.150

如果你想坚持使用指针，你可以连接字符串 (char*)

```
const char* path = "/home/docs/cs230/";
int size1 = sizeof(argv[1]);
int size2 = sizeof(path);
const char* result = new char[size1 + size2 + 2];
result[size1 + size2 + 1] = '\0';
memcpy( result, path, size1 );
memcpy( &result[ size1 ], argv[1], size2 ); 
```

不是推荐的选项，但这里有很多可能性。

# apache-flex - 正确的 Flex 3 控件（示例也很好）来显示动态数组

> ID：16027137
> 
> 赞同：1
> 
> 时间：2013-04-16T01:07:16.680
> 
> 标签：apache-flex, datagrid, flex3

我需要显示一个由二维数组对象（类型化对象）表示的表，列标题和行标题来自两个单独的数组对象。包含标头的 Array 对象的大小不同，并且可以变化，二维数据的大小也不同。

DataGrid 允许显示带有标题的列，但我必须指定列数。允许显示此类数据集的控件在哪里？

Flex 3.2，适用于 IE 8

```
 [Bindable]
        private static var _horizontalCodes:Array;
        [Bindable]
        private static var _verticalCodes:Array;

        [Bindable]
        private var stats:Object;

        private function initStats():void {
            stats = new Object();
            for each (var colHeader:String in _horizontalCodes) {
                stats[colHeader] = new Object();
                for each (var verHeader:String in _verticalCodes) {
                    stats[colHeader][verHeader] = 0;
                }
                stats[colHeader]["total"] = 0;
            }
        } 
```

# asp.net - ASPX 文件上单选按钮的客户端验证功能

> ID：16027139
> 
> 赞同：1
> 
> 时间：2013-04-16T01:07:25.943
> 
> 标签：asp.net, client-side-validation

这是一个带有 Javascript 的 ASPX/CS 程序。

我继承了这段代码，我正在尝试完成未完成的验证。我发现单击了验证单选按钮的 javascript 代码，但 aspx 代码没有引用它。

单选按钮被组合在一起，这样当组中的一个被选中时，其他的未被选中。但是，对于初学者来说，我看不到如何利用它。它必须与每个单选按钮提到的“GroupName”有关。

```
<ItemTemplate>
     <%# FormatGroup(Eval("Group").ToString()) %>
          <tr>
               <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<asp:Label ID="lblQuestion" runat="server" Text='<%# Eval("Question") %>'><%# Eval("Question") %></asp:Label></td>
               <td align="center" width="10%"><asp:RadioButton ID="rblEvalQuestion4" runat="server" GroupName='<%# Eval("Question") %>' /></td>
               <td align="center" width="10%"><asp:RadioButton ID="rblEvalQuestion3" runat="server" GroupName='<%# Eval("Question") %>' /></td>
               <td align="center" width="10%"><asp:RadioButton ID="rblEvalQuestion2" runat="server" GroupName='<%# Eval("Question") %>' /></td>
               <td align="center" width="10%"><asp:RadioButton ID="rblEvalQuestion1" runat="server" GroupName='<%# Eval("Question") %>' /></td>
          </tr>
</ItemTemplate> 
```

那么我将如何在 asp 中将 ClientValidationFunction 方法用于单选按钮组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:24:59.033

尝试自定义字段验证器。

添加这段 JavaScript：

```
<script language="javascript" type="text/javascript" >
function ClientValidate(source,args)
{   
    if(document.getElementById("<%= rblEvalQuestion1.ClientID %>").checked || document.getElementById("<%= rblEvalQuestion2.ClientID %>").checked || document.getElementById("<%= rblEvalQuestion3.ClientID %>").checked || document.getElementById("<%= rblEvalQuestion4.ClientID %>").checked)
    {
        args.IsValid = true;
    }
    else
    {
        args.IsValid = false;
    }

}
</script> 
```

将此验证器添加到页面：

```
<asp:CustomValidator id="RadioButtonValidator" runat="server" Display="Dynamic" ErrorMessage="Please select an option." ClientValidationFunction="ClientValidate" OnServerValidate="ServerValidate"></asp:CustomValidator> 
```

而这个方法在后面的代码中：

```
protected void ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = rblEvalQuestion1.Checked || rblEvalQuestion2.Checked || rblEvalQuestion3.Checked || rblEvalQuestion4.Checked;
} 
```

最后，请务必检查是否

```
Page.IsValid 
```

在您提交表单的按钮中。

最后，如果您可以将其重新分解为 RadioButtonList，您可以简单地使用 RequiredFieldValidator，这将使您的生活更容易实现！

# wix - WIX 一个或多个带有预定义变量的条件组件

> ID：16027144
> 
> 赞同：0
> 
> 时间：2013-04-16T01:07:52.650
> 
> 标签：wix

嗨基于环境（UAT，TEST，DEV，PROD）和服务器特定（Server1，Server2 ..）我正在过滤配置文件。

```
<Component Id="cmp39F4D3AA1248B5FE5EB2F92D189B27E1" Directory="dirCFCE6D07D3330FE628276777F0488B18" Guid="{56788F77-A729-47CE-BBA4-9D7D7F175536}">
<File Id="fil10B3B7732D0DDBD4AA773E0B7F34D092" KeyPath="yes" Source="$(var.SDirect.B2CWeb.ProjectDir)Web.ProdBuild.Web1.config.xml" >
<CopyFile Id="SCopy_ConfigPROD1" DestinationProperty="DestFilesWebsiteFolder" DestinationName="Web.config" />
</File>
              <Condition> <![CDATA[ENVPROPERTY~="PROD"]]></Condition>
</Component> 
```

上面的组件工作正常；ENVPROPERTY 属性值是在由 MSIEXEC 安装时通过命令行设置的。

但是，当我将上述语句更改如下时不起作用，安装程序需要检测安装它的计算机名或服务器名，并且基于此，安装程序必须确保部署上述组件。

```
<Component Id="cmp39F4D3AA1248B5FE5EB2F92D189B27E1" Directory="dirCFCE6D07D3330FE628276777F0488B18" Guid="{56788F77-A729-47CE-BBA4-9D7D7F175536}">
<File Id="fil10B3B7732D0DDBD4AA773E0B7F34D092" KeyPath="yes" Source="$(var.SDirect.B2CWeb.ProjectDir)Web.ProdBuild.Web1.config.xml" >
<CopyFile Id="SCopy_ConfigPROD1" DestinationProperty="DestFilesWebsiteFolder" DestinationName="Web.config" />
</File>
    <Condition> <![CDATA[ENVPROPERTY~="PROD" AND ComputerName~="Server1"]]></Condition>
</Component> 
```

任何人都可以帮助设置满足 ENVPROPERTY="PROD" 和 ComputerName="Server1" 的条件语句，即安装 MSI 包的服务器名称（机器）。这样在部署包时，上述组件就会被部署并且不会被跳过。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:45:41.653

公共属性只能在命令行中使用。公共属性的所有字母都应为大写。使用**ComputerName**属性作为**COMPUTERNAME**像另一个一样。

# php - 在 Doctrine 2 ORM 中映射标量数组

> ID：16027149
> 
> 赞同：2
> 
> 时间：2013-04-16T01:08:35.463
> 
> 标签：php, doctrine-orm, associations

是否可以将标量数组映射到 Doctrine 实体中的属性，而无需为数组中的项目创建单独的实体？

情况如下：

*   该实体有一个属性，它是一个字符串数组。
*   数据必须以一对多的类型关系存储在单独的表中。
*   使用 Doctrine 的`array`类型是不可能的，因为它使用 PHP 序列化，并且对于 PHP 和非 PHP 系统，这些数据必须易于阅读。

在我看来，拥有一个实体有点矫枉过正。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:22:38.003

> 数据必须存储在单独的表中

然后你想要一个单独的实体。

> 具有一对多类型关系

实体会为您处理此问题。

> 实体有一个属性，它是一个字符串数组

默认情况下，您将拥有一个实体数组集合，并且可以轻松编写自己的 getter 方法以在必要时返回一个简单的字符串数组。

> 在我看来，拥有一个实体有点矫枉过正。

不，这不对。

> 还有其他解决方案吗？

并非没有重新发明轮子。教义有你需要的一切，准备好了。就像它的设计一样使用它。创建一个单独的实体并定义关系。

# c++ - Boost ASIO：我们是否需要在从 async_read 调用的函数中继续使用 async_read 和 write？

> ID：16027151
> 
> 赞同：0
> 
> 时间：2013-04-16T01:08:38.010
> 
> 标签：c++, boost, boost-asio

我一直在尝试理解 boost 的[http server 3 example](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)中的逻辑。此示例中的请求在 connection.cpp 中的 start() 方法中读取，该方法调用：

```
socket_.async_read_some(boost::asio::buffer(buffer_),
      strand_.wrap(
        boost::bind(&connection::handle_read, shared_from_this(),
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred))); 
```

请注意， async_read_some 方法被[记录为立即返回](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/reference/basic_stream_socket/async_read_some.html)。然后在读取处理程序 ( `connection::handle_read()`) 中，如果 parse 返回，我们可能会再次调用 async_read_some `boost::indeterminate`。`socket_.read_some(buffer)`鉴于我们已经知道我们在一个单独的线程中工作，这有什么好处。我问的原因是我想更改消息解析以按需调用 read_some ，但我想到的方法不适用于异步读取。

另外，一个相关的问题：两者之间有什么区别吗？

`async_read_some()`

和

`boost::thread th([](){ ret = read_some(); handle_read(ret) });`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:04:16.890

Boost.Asio 的[HTTP Server 3](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3)示例的编码方式与线程池的大小无关。因此，不能保证工作将在单独的线程中完成。然而，不可知论的好处是它可以通过更多的连接更好地扩展。例如，考虑[C10K 问题](http://www.kegel.com/c10k.html)检查同时连接的 10000 个客户端。对于 10000 个客户端，同步解决方案可能会遇到各种性能问题或资源限制。此外，异步特性有助于将程序与网络中的行为变化隔离开来。例如，考虑一个具有 3 个客户端和 2 个线程的同步程序，但由于网络噪声增加，其中 2 个客户端具有高延迟。如果两个线程都被阻塞以等待来自其他客户端的数据，则可能会无意中影响第三个客户端。

如果连接数量有限且数量有限，并且每个连接都由一个线程提供服务，那么同步服务器和异步服务器之间的性能差异可能很小。如果可能，通常建议避免混合使用异步和同步编程，因为它可以将复杂的解决方案变成复杂的解决方案。此外，大多数同步算法都可以异步编写。

异步操作和同步操作（即使是在专用线程中运行的操作）之间有两个主要区别：

*   线程安全。如[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/threads.html)中所述：

    > 一般来说，并发使用不同的对象是安全的，但并发使用单个对象是不安全的。

    因此，在同步操作正在进行时，无法安全地启动异步和同步操作，即使该操作是在其自己的线程中调用的。这在半双工协议中可能是最小的，但应该在全双工协议中考虑。

*   能够取消操作。如[this](https://stackoverflow.com/a/11195223/1053968) answer中所述，无法通过`cancel()`Boost.Asio提供的成员函数取消同步操作。相反，应用程序可能需要使用较低级别的机制，例如信号。

# mysql - 关系数据库竞速条件

> ID：16027155
> 
> 赞同：0
> 
> 时间：2013-04-16T01:08:46.123
> 
> 标签：mysql, sql, ruby-on-rails, ruby, postgresql

我正在使用带有 SQL 后端（MySQL 或 Postgres）的 Ruby On Rails（但这并不重要）。
Web 应用程序将是多进程的，有一组应用程序服务器进程在同一个数据库上运行和工作。

我想知道：有没有什么好的和通用的策略来处理比赛条件？

由于它将是一个 DB 密集型应用程序，我可以很容易地看到两个客户端如何尝试同时修改相同的数据。

让我们简化一下情况：

*   两个客户/用户获取相同的数据，这是否同时发生并不重要。
*   它们有两个代表相同数据的网页。
*   后来他们俩都尝试对同一条记录写入一些不兼容的修改。

有没有一种简单的方法来处理这种情况？

我正在考虑使用与每条记录相关联的 id-tokens。此令牌将在记录更新时更改，从而使基于陈旧数据（旧的过期令牌）的任何后续更新尝试无效。

有没有更好的办法？也许已经在 MySQL 中内置了一些东西？我也对这种情况下使用的编码模式感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T01:45:58.910

## 乐观锁定

在 webapps 中处理这个问题的标准方法是使用所谓的“乐观锁定”。

每条记录都有一个唯一的 ID 和一个整数（或时间戳，但整数更好）乐观锁字段。此 oplock 文件在记录创建时初始化为 0。

当您获得记录时，您将获得 oplock 字段。

当您设置记录时，您将 oplock 值设置为您使用`SELECT`加一检索到的 oplock，并且您以`UPDATE`oplock 值仍然是您上次查看时的值为条件：

```
UPDATE thetable
SET field1 = ...,
    field2 = ...,
    oplock = 1
WHERE record_id = ...
  AND oplock = 0; 
```

如果你在另一个会话中输掉了比赛，这个语句仍然会成功，但它会报告零行受影响。这使您可以告诉用户他们的更改与其他用户的更改发生冲突，或者合并他们的更改并重新发送，具体取决于应用程序的该部分中什么是有意义的。

许多框架都提供了工具来帮助实现这一点，并且大多数 ORM 可以开箱即用。[Ruby on Rails 支持乐观锁定](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html)。

在传统应用程序中将乐观锁定与悲观锁定（如下所述）结合使用时要小心。它可以工作，您只需要在所有可乐观锁定的表上添加一个触发器，该触发器会在`UPDATE`if`UPDATE`语句本身没有这样做时增加 oplock 列。我[为 Hibernate oplock 支持编写了一个 PostgreSQL 触发器，](http://wiki.postgresql.org/wiki/Hibernate_oplocks)它应该很容易适应 Rails。如果你要从 Rails 外部更新数据库，你只需要这个，但在我看来，确保安全总是一个好主意。

## 悲观锁定

更传统的方法是开始事务并`SELECT ... FOR UPDATE`在获取您打算修改的记录时执行。然后，当用户思考他们将要做什么并在ting`UPDATE`之前发布已经锁定的记录时，您将事务保持打开和空闲状态。`COMMIT`

这效果不好，我不推荐它。它要求每个用户都有一个开放的、通常是空闲的事务。这可能会导致 PostgreSQL 中的 MVCC 行清理出现问题，并可能导致应用程序中的锁定问题。对于具有高用户数的大型应用程序，它也非常低效。

## 插入比赛

处理比赛`INSERT`需要您在表上有一个合适的应用程序级别的唯一键，因此当它们发生冲突时插入会失败。

# android - BufferedReader 对象适用于 2.3.3 和果冻豆，但不适用于 4.0.4

> ID：16027168
> 
> 赞同：1
> 
> 时间：2013-04-16T01:11:11.370
> 
> 标签：android, bufferedreader

我在 Gingerbread 和 Jelly Bean 中运行我的应用程序没有问题，但在 Honeycomb 上运行时出现错误。以下是创建错误的以下代码：

```
BufferedReader in = new BufferedReader(new InputStreamReader(
            url.openStream())); 
```

其中 url 是引用公共网站上的文本的 URL 对象。之后，我调用以下代码行来提取文本：

```
String inputLine;
String message = "";
while ((inputLine = in.readLine()) != null)
        message = message + inputLine;
in.close(); 
```

但它并没有通过 BufferedReader 代码行。调用该行代码后，我会收到以下错误：

```
04-16 08:36:50.750: W/System.err(5051): android.os.NetworkOnMainThreadException
04-16 08:36:50.750: W/System.err(5051):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1119)
04-16 08:36:50.750: W/System.err(5051):     at java.net.InetAddress.lookupHostByName(InetAddress.java:441)
04-16 08:36:50.750: W/System.err(5051):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:243)
04-16 08:36:50.750: W/System.err(5051):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
04-16 08:36:50.758: W/System.err(5051):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-16 08:36:50.766: W/System.err(5051):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-16 08:36:50.766: W/System.err(5051):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-16 08:36:50.766: W/System.err(5051):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-16 08:36:50.766: W/System.err(5051):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
04-16 08:36:50.766: W/System.err(5051):     at java.net.URL.openStream(URL.java:462)
04-16 08:36:50.766: W/System.err(5051):     at com.hasta.upark.Data.getOccupancy(Data.java:39)
04-16 08:36:50.774: W/System.err(5051):     at com.hasta.upark.MapsActivity.updateMarker(MapsActivity.java:362)
04-16 08:36:50.774: W/System.err(5051):     at com.hasta.upark.MapsActivity$2.run(MapsActivity.java:159)
04-16 08:36:50.774: W/System.err(5051):     at android.os.Handler.handleCallback(Handler.java:605)
04-16 08:36:50.774: W/System.err(5051):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 08:36:50.774: W/System.err(5051):     at android.os.Looper.loop(Looper.java:137)
04-16 08:36:50.774: W/System.err(5051):     at android.app.ActivityThread.main(ActivityThread.java:4697)
04-16 08:36:50.774: W/System.err(5051):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 08:36:50.774: W/System.err(5051):     at java.lang.reflect.Method.invoke(Method.java:511)
04-16 08:36:50.774: W/System.err(5051):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-16 08:36:50.774: W/System.err(5051):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-16 08:36:50.774: W/System.err(5051):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:49:38.760

你的错误的第一行：`android.os.NetworkOnMainThreadException`......它不像你想象的那样发生在后台线程上。仔细检查。

一旦您正确设置并在后台线程上运行（我建议使用 AsyncTask 来简化过程），错误应该会消失。

# excel - 在一定数量的列之后，Excel选项卡到新行

> ID：16027171
> 
> 赞同：0
> 
> 时间：2013-04-16T01:11:26.677
> 
> 标签：excel, row, barcode-scanner, next, vba

我想为使用条形码扫描仪输入数据设置一个 Excel 电子表格。条码扫描器会发送条码，然后发送标签或输入键，具体取决于其编程方式。

基本上我想设置一个 excel 表，我们可以为每个项目扫描 6 个条形码，扫描仪每次跳到下一列，然后当它到达第 6 列时，下一个选项卡将使其移动到新行下一个产品。

我希望这是有道理的。它可以在 MS Word 中完成...例如，如果您创建一个有 6 列的表格并按 Tab 7 次，它将移至下一行。我想在 Excel 中执行此操作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:17:51.603

也许我在这个问题上遗漏了一些东西，但是如果您选择六列并使用“创建列表”命令转换选择，那么每当您切换到一行的最后一个单元格时，您将自动转到下一行。此外，如果您在最后一行，将创建一个新行。我不确定你为什么需要一个宏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:35:38.963

TAB 或 ENTER 键已触发该`SelectionChange`事件。

*因此，如果您出于某些其他原因不需要*使用`Change`事件而不是事件，那么这可能是做同样事情的一种更简洁的方式`SelectionChange`。

```
Option Explicit

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim rngLastColumn As Range

'Note: The {Tab} or {Enter} key triggers selectionChange event.'
' Modify the address of rngLastColumn as needed. It should be one column beyond
' the last column of your inputs, so if input use columns A:F, then it should
' be Range("G:G").

Set rngLastColumn = Range("G:G")
    If Not Intersect(Target, rngValidColumns.Columns(7)) Is Nothing Then
        'Insert a new row:'
        Target.EntireRow.Offset(1, 0).Insert

        'Select the first cell in the new row'
        cells(Target.Row + 1, 1).Select

    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:50:10.660

嗯......经过大量实验从很多地方收集代码片段然后调试，我最终得到了以下 VBA 宏。希望能帮助到你！:)

1.  当`TAB`或`ENTER`键被按下时，`Sub Worksheet_Change`将运行。
2.  它会检查它的列`F`是否被留下......
3.  如果为真 => 插入新行并选择第一个单元格`[A]n`，其中`n`= 行号。

**VBA 宏代码**

```
Private Sub Worksheet_Change(ByVal Target As Range)

    'Do nothing if more than one cell is changed or content deleted   
    If Target.Cells.Count > 1 Or IsEmpty(Target) Then Exit Sub

    'Column F
    If Target.Column = "6" Then

        'Insert new row bellow
        ActiveCell.EntireRow.Offset(1, 0).Insert

        'Select first cell of next row just inserted
        ActiveSheet.Cells(ActiveCell.Row + 1, 1).Select

     End If

End Sub

Private Sub Workbook_Activate()
Application.OnKey "{TAB}", "Worksheet_Change" 'TAB key press
Application.OnKey "~", "Worksheet_Change" 'Keyboard ENTER press
End Sub

Private Sub Workbook_Deactivate()
Application.OnKey "{TAB}"
Application.OnKey "~"
End Sub 
```

# php - 设置两个会话，一个会话和 cookie

> ID：16027173
> 
> 赞同：1
> 
> 时间：2013-04-16T01:12:27.483
> 
> 标签：php

我正在尝试为用户登录时设置会话和 cookie。

当用户访问登录页面时，会设置并启动一个会话，使用`session_start()`它工作得很好，但是当用户现在填写登录表单（使用用户名和密码）并正确检查正确的登录详细信息时，我设置cookie：

```
$one_week = 60*60*24*7;
setcookie("cookiejarcookie", "cookiejar_value", time()+$one_week, '/', 'localhost'); 
```

它不工作，cookie 没有被设置。我试过从脚本顶部调用它，但它不起作用。

设置会话后如何设置cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:18:15.277

尝试在 localhost 上设置 cookie 在大多数浏览器中不起作用。您需要将域值设置为 null、空字符串或 false。我见过的大多数建议是将域值设置为 false。话虽如此，我从来没有理解过编写这样的代码，因为它不是你要部署到生产环境的东西。

请参阅@David 的推荐。我个人使用虚拟化来运行服务器环境并使用主机文件映射假 dns。

我可以提供的一个提示是，您必须在具有阿联酋的最新版本 Windows 上以管理员身份打开编辑器（我使用记事本++ 或写字板）才能编辑相关的主机文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:19:45.790

从我的评论

您不能将 cookie 设置为 localhost，但如果您在主机文件（ /etc/hosts 或 c:\Windows\System32\drivers\etc\hosts ）中添加一个 my.fake.local 应该可以工作。

添加

```
127.0.0.1 my.fake.local 
```

在适当的主机文件中。

# jquery - 使用 jquery 从项目的动态列表中检索一个值

> ID：16027174
> 
> 赞同：0
> 
> 时间：2013-04-16T01:12:27.780
> 
> 标签：jquery, jsp, jstl

首先，如果这是一个重复的问题，我深表歉意。即使我发现了类似的问题，我也找不到我想要的确切解决方案。在我的 JSP 上，我正在遍历项目列表，如下所示。

```
<c:forEach var="entry" items="${xxx}">
                                <form:form action="XXX.do" method="POST" autocomplete="off">
                                    <!-- other fields -->
                                    <input type="hidden" name="ip" id="ip" value="${entry.ipAddress }" />
                                    <input type="button" value="Submit" onclick="fun()"/>
                                </form>
</c:forEach> 
```

在我的 jquery 函数中，我试图用 id 'ip' 检索隐藏字段的值，如下所示：

```
fun() {
    var ip = $('#ip').val();
    //Other stuff
} 
```

现在因为隐藏字段的 id 与列表中所有条目的 'ip' 相同，所以我只检索列表中第一个元素的 'ip' 值。如何获取动态大小列表中第 n 个元素的“ip”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:17:16.537

使用 jQuery 的[`eq`](http://api.jquery.com/eq/)方法：

> 将匹配元素集减少到指定索引处的元素。

`$("[name='ip']").eq(n)`

或与[`:eq`](http://api.jquery.com/eq-selector/)

`$("[name='ip']:eq(n)")`

`n`您感兴趣的第 n 个元素在哪里。

**此外，`id`s 应该是唯一的。不存在它们应该相同的情况。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:18:14.650

除了多个 id 的问题（你应该使用一个类），你可以这样做：

```
var ip = $('input[type="hidden"][name="ip"]:nth-child('+n+')').val(); 
```

# c - 将 .dat 中的值分配给 C 中的数组

> ID：16027176
> 
> 赞同：-1
> 
> 时间：2013-04-16T01:12:44.083
> 
> 标签：c, arrays

这可能是一个简单的问题，但这是我必须要问的，因为我还没有学过。当这些元素来自外部文件时，我不确定如何将元素分配给数组。Whiiich 可能听起来有点令人困惑，它基本上是这样的：

我有 2 个文件（当然是 3 个，但是一旦我学会了如何处理这个问题，我就可以将其应用于另一个文件），gn1.c 和 score.dat。

在 gn1.c 中，我有一个二维数组，其定义如下：

```
int scores[13][4]; 
```

它没有初始化为任何东西。我想为这个数组的每个元素分配一个特定的整数，该整数存储在另一个文件'scores.dat'中。

score.dat 的全部内容如下所示：

```
88 77 85 91 65 72 84 96 50 76 67 89 70 80 90 99 42 65 66 72 80 82 85 83 90 89 93 
98 86 76 85 99 99 99 99 99 84 72 60 66 50 31 20 10 90 95 91 10 99 91 85 80 
```

所以，基本上，我希望 score[0][0] 为 88， score [0][1] 为 77 等等；

这些值将被存储，以便稍后在程序中，我像这样引用它：

```
if(scores[12][3] < 90)
a_ct++; 
```

score[12][3] 将被读取为 80。

那么我正在尝试做的事情是否有特定的语法，或者我是否误解了某种基本语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:17:13.860

您必须使用 fopen、fread 和 fclose 等函数读取文件 - 它们都在 stdio.h 中定义。

您首先必须像这样打开文件：

```
FILE * fp = fopen( "scores.dat", "r" ); // "r" means read. 
```

然后你会用 fread 读取文件，有点像这样：

```
char number[ 2 ];
fread( fp, 1, 2, number ); 
```

然后你会将该数字转换为整数，使用 atoi (asci to integer)

```
scores[ 0 ][ 0 ] = atoi( number ); 
```

你会在一个循环中这样做，直到你读完所有的值。完成后，关闭文件。

```
fclose( fp ); 
```

这里有一些链接可以查看更多信息：

[http://www.cplusplus.com/reference/cstdlib/atoi/](http://www.cplusplus.com/reference/cstdlib/atoi/)

[http://www.cplusplus.com/reference/cstdio/fopen/?kw=fopen](http://www.cplusplus.com/reference/cstdio/fopen/?kw=fopen)

[http://www.cplusplus.com/reference/cstdio/fread/?kw=fread](http://www.cplusplus.com/reference/cstdio/fread/?kw=fread)

[http://www.cplusplus.com/reference/cstdio/fclose/](http://www.cplusplus.com/reference/cstdio/fclose/)

您可能需要参考这些来检查函数是否有错误（为了清楚起见，我在上面的代码中没有这样做）。如果你也对 c++ 感兴趣，它的标准库中的函数也使它变得非常简单。

# deployment - 在应用程序安装中包含驱动程序

> ID：16027179
> 
> 赞同：2
> 
> 时间：2013-04-16T01:13:14.263
> 
> 标签：deployment, driver, installation, installshield

我在 C# 中创建了一个依赖于特定驱动程序（基于 VMulti 的自定义虚拟隐藏驱动程序）的应用程序。

目前，我一切正常，我想将应用程序和驱动程序合并到一个安装包中。截至目前，我的应用程序部分有一个 .exe 文件和一个 .dll 文件。我的驱动程序有一个 .inf 和 .sys 文件、hidkmdf.sys 和 WdfCoInstaller01009.dll（这个 dll 来自 WDK）。我无法通过右键单击 inf 并单击安装的传统方法安装驱动程序。相反，我使用 devcon 来安装它（命令是“安装 inffile.inf hardwareid”）

我尝试使用 InstallShield LE，但我只能安装应用程序，不能安装驱动程序。经过一番搜索，我发现有人使用DIFxAPP来创建驱动程序的安装框架，但是我不确定这是否可以集成到InstallShield中，以便在应用程序安装过程中安装驱动程序。

所以我的主要问题是：将应用程序和驱动程序安装组合到一个包中的最佳和最简单的方法是什么（意味着 setup.exe 将同时安装驱动程序和应用程序）？

我对驱动程序开发和应用程序部署非常陌生，因此欢迎提出任何建议。

谢谢你

编辑：最好该解决方案不需要任何付费工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:02:35.997

实际上，有很多方法可以实现这一点，这取决于您的 Windows 安装程序技能。
您没有为您的应用程序指定目标操作系统，这就是为什么我可以给您一些方法：

1.  [PnpUtil.exe](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550419%28v=vs.85%29.aspx)内部 Windows 7 实用程序（仅适用于 Windows 7）
2.  [DPInst.exe](http://msdn.microsoft.com/en-us/windows/hardware/gg463103.aspx#E1B)包含在[WDK中](http://msdn.microsoft.com/en-US/windows/hardware/gg487428)
3.  [DifXAPI](http://msdn.microsoft.com/en-us/library/ff544834.aspx)合并模块。

您可以通过自定义操作在所有这些实用程序的帮助下安装驱动程序。

注意：您的驱动程序应该被签名，否则您将在静默安装期间收到错误消息。

# list - 最小或足够小

> ID：16027183
> 
> 赞同：4
> 
> 时间：2013-04-16T01:13:57.613
> 
> 标签：list, haskell, minimum

我正在为简单的棋盘游戏编写 Haskell 求解器。我有这个功能：

```
bestMove :: Board -> (Int,Int)
bestMove brd = minimumBy (comparing $ length.choices brd) (remaining brd) 
```

基本上 bestMove 是一种在剩余移动中留下最少选择的移动。然而，我知道没有任何元素会留下少于一种选择。如果找到这样的移动，我该如何编写这个函数来终止搜索最小值？
换句话说，我想要一个返回最小或第一次遇到的元素的函数，该元素足够小（不遍历列表的其余部分）。

这是我的第一个 Haskell 程序，所以它可能非常基础。它是一个回溯求解器，因此不在一个被调用数百万次的函数中遍历整个列表很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T05:11:41.860

我会简化您的问题，因为您没有为某些功能提供类型：

> 给定最小值的已知下限，如何编写一个函数来获取列表的最小值？

这样的函数将具有以下类型：

```
minimum' :: (Ord a) => a -> [a] -> a 
```

... 其中第一个参数是已知的下限（即 1 个选项），第二个参数是要搜索的列表。

我们可以通过组合两个更简单的函数来定义这个函数。第一个函数只是简单地从列表中获取所有元素，直到它到达下限或列表末尾：

```
chop :: (Ord a) => a -> [a] -> [a]
chop minElem as =
    let (prefix, suffix) = span (> minElem) as
    in  case suffix of
            []      -> prefix
            s:uffix -> prefix ++ [s] 
```

然后我们用最少的方式组合它：

```
minimum' minElem = minimum . chop minElem 
```

这是函数式编程中的一种常见模式：组合简单的解决方案来解决复杂的问题。

# sml - 是否有自定义 sml 中缀的字符白名单或黑名单？

> ID：16027185
> 
> 赞同：4
> 
> 时间：2013-04-16T01:14:03.390
> 
> 标签：sml

`infix 3 ..`错误出来。定义自定义中缀时允许或不允许哪些字符？我在哪里可以找到在线列表？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:39:02.130

您可以添加任何非限定标识符。

以下来自 SML 90' 定义

> 以下是Core 中使用的*保留字。*它们不能（除了=）用作标识符。
> 
> ```
> abstype and andalso as case do datatype else
> end exception fn fun handle if in infix
> infixr let local nonfix of op open orelse
> raise rec then type val with withtype while
> ( ) [ ] { } , : ; ... _ | = => -> # 
> ```

……

> 标识符可以是*字母数字*：任何字母、数字或素数 (') 和下划线 (_) 以字母或素数开头的序列，或*符号：以下**符号*的任何非空序列 ：
> 
> ```
> ! % & # + - / : < = > ? @ \ ~ ' ^ | * 
> ```
> 
> 然而，在任何一种情况下，保留字都被排除在外。这意味着例如 # 和 | 不是标识符，而是 ## 和 |=| 是标识符。该规则的唯一例外是符号 =，它是一个保留字，也允许作为标识符来代表相等谓词。

# ios - Phonegap 启动画面 (ios)

> ID：16027186
> 
> 赞同：1
> 
> 时间：2013-04-16T01:14:09.277
> 
> 标签：ios, cordova, splash-screen

我似乎无法显示我的初始屏幕而不是默认屏幕。我的 config.xml 中有这些行：

```
<gap:splash src="splash.png" />
<gap:splash src="splash/screen1.png" gap:platform="ios" width="320" height="480" /> 
```

我在 www 的上根和根中都有 splash.png （不确定哪个是正确的）。我使用的是普通的 iPhone 模拟器（不是 4 或 5），我也尝试过构建/补水并发送到我的 3gs，它仍然使用默认值。我还尝试替换 Resources/splash/ 文件夹中的默认启动屏幕文件，但这也不起作用。

编辑：还尝试输入为 iphone 指定的每种宽度/高度，仍然不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:17:40.517

我忘记了 Phonegap 有时可能是个错误的 POS。我必须从我的设备中删除该应用程序，然后重新添加它（不补水），然后启动屏幕现在显示。但是，仍然无法在模拟器上工作。

# c# - ServiceStack GetRequestFilterAttributes NullReference

> ID：16027190
> 
> 赞同：4
> 
> 时间：2013-04-16T01:14:40.387
> 
> 标签：c#, servicestack

我正在尝试对 ServiceStack 使用新的 API 方法，并且正在构建一个测试控制台应用程序来托管它。到目前为止，我有实例化请求 DTO 的路由，但是在请求到达我的服务的 Any 方法之前，我得到了这个异常：

```
Error Code NullReferenceException 
Message Object reference not set to an instance of an object. 
Stack Trace at ServiceStack.WebHost.Endpoints.Utils.FilterAttributeCache.GetRequestFilterAttributes(Type requestDtoType) at 
ServiceStack.WebHost.Endpoints.EndpointHost.ApplyRequestFilters(IHttpRequest httpReq, IHttpResponse httpRes, Object requestDto) at 
ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) 
```

下面是我使用 IReturn 和 Service 的测试服务（此时我只是试图返回硬编码的结果以查看它的工作）

```
[DataContract]
public class AllAccounts : IReturn<List<Account>>
{
    public AllAccounts()
    {

    }
}
[DataContract]
public class AccountTest : IReturn<string>
{
    public AccountTest()
    {
        this.Id = 4;
    }
    [DataMember]
    public int Id { get; set; }
}

public class AccountService : Service
{
    public AccountService()
    {
    }

    public object Any(AccountTest test)
    {
        return "hello";
    }
    public object Any(AllAccounts request)
    {
        var ret = new List<Account> {new Account() {Id = 3}};
        return ret;
    }
} 
```

所有 ServiceStack 引用都来自 NuGet。我在任何一条路线上都遇到同样的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:27:40.200

查看您的 AppHost 代码和 Configure() 方法中的代码可能会有所帮助。您在上面的代码中提供的任何内容都没有突出显示。下面是我如何使用您提供的代码/类设置一个简单的控制台应用程序。

**初始化并启动 ServiceStack AppHost**

```
class Program
{
    static void Main(string[] args)
    {
        var appHost = new AppHost();
        appHost.Init();
        appHost.Start("http://*:1337/");
        System.Console.WriteLine("Listening on http://localhost:1337/ ...");
        System.Console.ReadLine();
        System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
    }
} 
```

**从 AppHostHttpListenerBase 继承并配置（不为本示例配置任何内容）**

```
public class AppHost : AppHostHttpListenerBase
{
    public AppHost() : base("Test Console", typeof(AppHost).Assembly) { }

    public override void Configure(Funq.Container container)
    {
    }

} 
```

**Dto/请求类**

```
public class Account
{
    public int Id { get; set;  }
}

[Route("/AllAccounts")]
[DataContract]
public class AllAccounts : IReturn<List<Account>>
{
    public AllAccounts()
    {

    }
}

[Route("/AccountTest")]
[DataContract]
public class AccountTest : IReturn<string>
{
    public AccountTest()
    {
        this.Id = 4;
    }
    [DataMember]
    public int Id { get; set; }
} 
```

**处理您的请求的服务代码 - URLS: `localhost:1337/AllAccounts`&`localhost:1337/AccountTest`**

```
public class AccountService : Service
{
    public AccountService()
    {
    }

    public object Any(AccountTest test)
    {
        return "hello";
    }
    public object Any(AllAccounts request)
    {
        var ret = new List<Account> { new Account() { Id = 3 } };
        return ret;
    }
} 
```

# sql - 在 PostgreSQL 中将一行转换为数组

> ID：16027195
> 
> 赞同：1
> 
> 时间：2013-04-16T01:15:36.173
> 
> 标签：sql, arrays, postgresql, row

我有表：

```
Id Code Name
1  001  Marry 
```

我想要这个结果：

```
{1,001,Marry} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T01:19:07.963

使用[数组构造函数](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)：

```
SELECT ARRAY[Id::text, Code::text, Name::text] AS my_arr FROM tbl; 
```

当然，我们需要一个通用类型。数组元素必须是同一类型。每种类型都可以转换为`text`，因此这是显而易见的选择。

# c++ - 找到数组的最小值

> ID：16027199
> 
> 赞同：0
> 
> 时间：2013-04-16T01:16:11.017
> 
> 标签：c++, arrays, min

根据我所学到的，我应该得到数组的最小值，但我得到的却是一个很大的负数，它在我的数组中不存在。

```
int size;
size = sizeof(array) / sizeof(array[0]);

int min;
min = array[0];

for(int i = 1; i <= size; i++) {
    if(array[i] < min){
        min = array[i];
    }
} 
```

但由于某种原因，我得到了一个很大的负数：-9.25596e+061

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T01:17:44.257

```
for(int i = 1; i <= size; i++) {
                //^^^^array index out of bound, since array index starts from 0
   if(array[i] < min){
      min = array[i];
   }
} 
```

您应该只比较数组中的元素。您试图访问不属于数组的内存，因此该内存中有奇怪的值。

您的代码应如下所示：

```
int min = array[0];
for(int i = 1; i < size; i++) {
   if(array[i] < min){
      min = array[i];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:19:30.163

进行比较时，`<= size`意味着您将 1 迭代到数组的末尾。它很可能会获得一些非常巨大的垃圾价值，这将成为最低限度。

用来`for (int i = 1; i < size; ++i) { /* ... */ }`获得你需要的东西。

# xml - 检查 Xquery 中是否存在子字符串

> ID：16027201
> 
> 赞同：2
> 
> 时间：2013-04-16T01:16:12.877
> 
> 标签：xml, xquery

我有一个包含关键字属性的 XML 文档

```
<Books>

    <Book name="Steve Jobs" type="biography" keywords="biography technology apple">

        <Authors>

            <Author>
... 
```

我想找到关键字“传记”的所有“书籍”。我一直无法找到在字符串中搜索的方法。一个人将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:18:41.100

以下 XQuery 返回所有在关键字集中具有“传记”的 Book 元素，由空格分隔（序列由 tokenize 构建，分隔符为空格）

```
doc('yourdoc')//Book['biography' = tokenize(@keywords, '\s')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:23:24.590

您还可以使用：

1.  //Book[contains(@keywords, 'biography')] -- 或
2.  //书[starts-with(@keywords, 'biography')]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:36:59.067

**可以使用这个 XPath 1.0 表达式，这可能比执行标记化更有效**：

```
/*/Book[contains(concat(' ', @keywords, ' '), ' biography ')] 
```

# php - 从字符串中提取特定的字符串模式

> ID：16027205
> 
> 赞同：0
> 
> 时间：2013-04-16T01:16:55.170
> 
> 标签：php, javascript

假设我有：

```
var text1 = "James<>Australia"; 
```

我想提取 James 和 Australia 并将其存储为数组，如下所示

```
extractedText[0] = "james";
extractedText[1] = "Australia"; 
```

我怎么做？

在 php 中，我使用：

```
$extractedText = preg_split("/<>/",$text1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:20:43.553

对于这样的拆分，您实际上不需要正则表达式：

```
$parts = explode('<>', $text1); 
```

在 JavaScript 中转换为：

```
var parts = text1.split('<>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:18:34.497

`split`功能呢？

```
text1.split(/<>/); 
```

或者直接粘贴到 JS 控制台查看结果：

```
"James<>Australia".split(/<>/); 
```

我认为它会以完全相同的方式工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T01:24:57.910

```
var text1 = "James<>Australia";
var extractedText = text1.split(/<>/); 
```

# javascript - 准备好隐藏div

> ID：16027209
> 
> 赞同：-4
> 
> 时间：2013-04-16T01:17:25.280
> 
> 标签：javascript, jquery

此隐藏/显示脚本当前将 div 加载为在下载页面时可见。我要在脚本中更改什么以使#box div 以隐藏状态开始？

```
$(document).ready(function () {
var hidden = false;
$('.arrow').click(function () {
    if (hidden) {
        hidden = false;
        $('#box').slideDown("slow");
    } else {
        hidden = true;
        $('#box').slideUp("slow");
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:18:59.567

## ***[`jsFiddle Demo`](http://jsfiddle.net/aGCxB/1)***

使用 jQuery 的[`hide`](http://api.jquery.com/hide/). 它将设置`#box`为`display:none`. 当点击甚至发生时，该`slide`功能仍然有效。

```
$(document).ready(function () {
 $('#box').hide();//use this
 var hidden = true;
 $('.arrow').click(function () {
  if (hidden) {
    hidden = false;
    $('#box').slideDown("slow");
  } else {
    hidden = true;
    $('#box').slideUp("slow");
  }
 });
}); 
```

或者，正如所[`@undefined`](https://stackoverflow.com/users/848164/undefined)指出的，您可以[`slideToggle`](http://api.jquery.com/slideToggle/)像这样使用：

***[`jsfiddle Demo`](http://jsfiddle.net/aGCxB/2/)***

```
$('#box').hide();//use this
$('.arrow').click(function () {
 $('#box').slideToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:20:11.327

尝试这个

```
$(document).ready(function () {
    $('#box').hide();
    var hidden = true;
    $('.arrow').click(function () {
        if (hidden) {
            hidden = false;
            $('#box').slideDown("slow");
        } else {
            hidden = true;
            $('#box').slideUp("slow");
        }
    });
}); 
```

# debugging - GDB 没有在带有 break _start 或 info files 入口点地址的第一条机器代码指令处停止

> ID：16027218
> 
> 赞同：1
> 
> 时间：2013-04-16T01:18:25.073
> 
> 标签：debugging, gdb, reverse-engineering

我想调试一个我没有符号文件的应用程序。我知道如果我缺少必要的调试信息，就必须在汇编级别进行调试。由于我没有调试符号，我不能直接在方法名称上设置断点，但是我仍然应该能够在地址上设置断点。

所以我只是尝试在入口地址上设置一个断点，这就是我所做的：

```
user@MacBookAir$ gdb
(gdb) file someexecutable
(gdb) info file 
```

最后一个命令返回以下入口点： ![在此处输入图像描述](https://i.stack.imgur.com/ISAJc.png)

得到地址后，我简单地说：

```
(gdb) break *0x0000000100119ec8
(gdb) run 
```

不幸的是，目标应用程序启动时没有在入口点中断，所以我再次尝试，但这次我确实在入口点地址之后的几个地址上设置了断点 - 没有成功。

下一次尝试是尝试[Igor Skochinsky](https://stackoverflow.com/users/422797/igor-skochinsky)在这个问题中发布的解决方案（[在 GDB 中的第一条机器代码指令处停止](https://stackoverflow.com/questions/10483544/stopping-at-the-first-machine-code-instruction-in-gdb)）来设置断点：

```
(gdb) b _start
(gdb) b start 
```

但是这两个命令都导致了相同的错误：

> 没有加载符号表。使用“文件”命令。

嗯，是的，显然我需要调试符号才能正常工作。然后我想也许它只是显示了一个不正确的入口点地址，所以我用命令验证了它：

```
user@MacBookAir$ otool -l someexecutable 
```

并收到以下输出： ![在此处输入图像描述](https://i.stack.imgur.com/3pqRg.png)

所以它似乎与 GDB 返回的入口点相同。现在我不知道我还能尝试什么。:) 也许你们知道我还能尝试什么。任何帮助将不胜感激。如果有不清楚的地方或者我错过了一些重要信息，请留下简短的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:27:09.130

对我来说，这看起来像是 GDB 中的一个错误。我猜 ASLR 会将二进制文件重新定位到另一个地址，但 GDB 不会移动断点。我建议以下之一：

1.  禁用 ASLR：`set disable-aslr on`
2.  设置环境变量`DYLD_NO_PIE=1`
3.  `MH_PIE`从可执行文件的标头中删除标志
4.  将入口点修补到 0xCC。一旦中断，您可以将其修补回原始字节。

# java - 如何在 Java 中识别 MongoDB 中的文档

> ID：16027222
> 
> 赞同：0
> 
> 时间：2013-04-16T01:18:45.363
> 
> 标签：java, mongodb, mongodb-java

我想知道 MongoDB 是否为识别数据库中的文档提供了一些好的模式。假设我已经像这样初始化了一个数据库：

```
public static void main(String[] args) {

MongoClient mongo = new MongoClient("localhost", 27017);
DB db = mongo.getDB("testdb");

DBCollection coll = db.getCollection("mycollection");

BasicDBObject document = new BasicDBObject();
document.put("name", "Mike");
document.put("age", 25);
coll.insert(document);
} 
```

现在如何获取插入数据库的“文档”？我已经知道键/值对查询可以找到文档，例如：

```
BasicDBObject query = new BasicDBObject();
query.put("name", "Mike");
DBObject dbObj = coll.findOne(query); 
```

除了这种键/值对查询之外，还有其他方法可以识别文档吗？

如果要识别集合，可以通过匹配集合名称来完成：

```
DBCollection coll = db.getCollection("mycollection"); 
```

我希望有这样的东西来识别文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:56:26.520

如果您查看后面的`document`对象，`coll.insert(document);`您会发现`_id`驱动程序添加了一个字段。您可以使用此字段/值来查询确切的文档，因为 MongoDB 强制必须有一个`_id`字段并且它必须是唯一的。

把这一切放在一起：

```
public static void main(String[] args) {

    MongoClient mongo = new MongoClient("localhost", 27017);
    DB db = mongo.getDB("testdb");

    DBCollection coll = db.getCollection("mycollection");

    BasicDBObject document = new BasicDBObject();
    document.put("name", "Mike");
    document.put("age", 25);
    coll.insert(document);

    System.out.println(document.get("_id"));

    BasicDBObject query = new BasicDBObject();
    query.put("_id" , document.get("_id"));

    DBObject retrieved = collection.findOne(query);
    System.out.println(retrieved);
} 
```

# html - 怎么做居中

> ID：16027223
> 
> 赞同：0
> 
> 时间：2013-04-16T01:18:48.933
> 
> 标签：html, css, background-image

如何***在背景图像的***`<h1>`两侧`<hr/>`创建居中？

 *我还需要它来处理各种文本长度，为移动查看很好地缩放，并`<hr/>`使其容器的宽度达到 100%。

我想要这个外观，但在背景图像上。 ![纯色背景上的文字](https://i.stack.imgur.com/ahA8W.png)

对于两边都有线条的文本有很多答案（[这里](https://stackoverflow.com/q/2812770/242)、[这里](https://stackoverflow.com/q/9033823/242) 和[这里）](https://stackoverflow.com/q/9015309/242) [，](https://stackoverflow.com/q/12648513/242)但它们都依赖于在文本后面使用纯色背景色，这对我来说不起作用，因为我想把这个on 有一个背景图像。

这是我实现上述外观的方法，它可以很好地处理各种长度的文本和缩放：

**CSS**

```
.title-box {
    height: 2px; 
    background-color: rgb(215, 0, 0); 
    text-align: center;
}
.title-outer {
    background-color:rgb(230, 230, 230); 
    position: relative; 
    top: -0.7em;
}
.title-inner {
    margin:0px 20px; 
    font-size: 17.5px; 
    font-weight:bold; 
    color:rgb(100, 100, 100);
} 
```

**HTML**

```
<div class="title-box">
    <span class="title-outer">
        <span class="title-inner">OUR STORY</span>
    </span>
</div> 
```

我已经尝试过下面的方法，它*有点*工作，但它不能处理各种文本宽度或缩放，因为s`<h1>`和`<hr/>`s 在单独`<div>`的 s 中：

![背景图像上的文字](https://i.stack.imgur.com/hXsMh.png)

**HTML**

```
<div class="row">
    <div class="span4"><hr /></div>
    <div class="span4"><h4>OUR STORY</h4></div>
    <div class="span4"><hr /></div>
</div> 
```

*注意：这是使用 Bootstrap 网格系统的示例，但这不是问题/解决方案的一部分。*

那么有什么想法可以让我获得相同的外观和行为，但没有文本的背景颜色，以便它可以位于背景图像上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-23T12:31:17.493

不需要 JS，这里是纯 CSS 解决方案。

**CSS**

```
.title-hr hr {
    display: inline-block;
    width: 30%;
    margin: 5px 10px;
    border-top: 1px solid #e5e5e5;
} 
```

**HTML**

```
<h1 class="title-hr"><hr />My Title<hr /></h5> 
```

结果：http: [//jsfiddle.net/yptmftr4/](http://jsfiddle.net/yptmftr4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:41:26.183

好的，我已经用这段代码玩了一下，这是我的解决方案。是的，它有点脏，因为我用过`:before`and `:after`，但是可以。

**HTML**

```
<div class="title-box">
    <span id="first" class="title-inner">OUR LOOOoo oooo oOONG STORY</span>
</div>
<div class="title-box">
    <span id="second" class="title-inner">OUR STORY</span>
</div>
<div class="title-box">
    <span id="third" class="title-inner">STORY</span>
</div> 
```

**CSS**

```
.title-box {
    text-align: center;
}
.title-inner {
    margin:0px 20px;
    font-size: 17.5px;
    font-weight:bold;
    position: relative;
    color:rgb(100, 100, 100);
}
.title-inner:after, .title-inner:before {
    content:"";
    float: right;
    position: relative;
    top: 8px;
    height: 2px;
    background: red;
}
.title-inner:before {
    float: left;
} 
```

**jQuery**

```
$(document).ready(function () {

    function work() {
        $(".title-inner").each(function () {
            var full_width = $(window).width();
            var id = $(this).attr("id");
            var title_width = $("#" + id).width();
            var new_width = (full_width - title_width) / 2 - 40;
            $('head').append("<style>#" + id + ":before, #" + id + ":after{width:" + new_width + "px !important;}</style>");
        });
    }
    work();
    $(window).resize(function () {
        work();
    });
}); 
```

[http://jsfiddle.net/ffb3X/4/](http://jsfiddle.net/ffb3X/4/)

因为`:before`并且`:after`不是 DOM 的一部分，所以我使用`.append()`函数在每个标题的头部附加样式标签。

此代码将在页面加载时计算所有内容，因此它是响应式的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T03:56:58.887

此代码最初由[Arbel](https://stackoverflow.com/users/2210457/arbel)发布，但由于某种原因他/她的答案消失了？我正在重新发布它（包括我制作的一些模组），因为它是我最终使用的解决方案。信用到期的信用。

工作 jsFiddle：http: [//jsfiddle.net/pA5Gu/](http://jsfiddle.net/pA5Gu/)

**HTML**

```
<div class="title-box"> 
    <fieldset class="title-outer">
            <legend id="titleInner" class="title-inner">OUR STORY</legend>
    </fieldset>
</div> 
```

**CSS**

```
.title-box { 
    background-image: url('http://imagezo.com/images/1302-green-bubbles-awesome-background-wallpaper.jpg');
    height:100%;
}
.title-outer {
    border-top:2px solid rgb(215, 0, 0);
    background-color: transparent;
}
.title-inner {
    width:auto;
    padding:0px 20px;
    border: 0;
    background-color: transparent;
    font-size: 17.5px; 
    font-weight:bold; 
    color:rgb(255, 255, 255);
} 
```

**jQuery**

```
$(document).ready(function() {
    var legendWidth = $('#titleInner').outerWidth();
    var margin = 'calc((100% - '+legendWidth+'px) / 2)';
    $('#titleInner').css('margin-left', margin);
    $('#titleInner').css('margin-right', margin);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:24:51.710

[http://jsfiddle.net/habo/HrfuH/1/](http://jsfiddle.net/habo/HrfuH/1/)

```
<div class="title-box">
    <div class="myContent">
    <div class="title-outer"><hr /></div>
    <div class="title-inner "><h4>OUR STORY</h4></div>
    <div class="title-outer"><hr /></div>
    </div>
</div>

.myContent{
    display:block;
    width:600px;
    margin:0 auto;
}
.title-box {
    background:#eee;
    height:60px;
}
.title-outer{

}

hr {
    height: 2px;
    background-color:rgb(215, 0, 0);
    margin: 2em 0;
    width:25%;
    float:left;
}

.title-inner {
    margin:0px 20px; 
    font-size: 17.5px; 
    font-weight:bold; 
    color:rgb(100, 100, 100);
    float:left;
} 
```*

# php - Bootstrap Select2 - 无法通过 AJAX 填充

> ID：16027226
> 
> 赞同：1
> 
> 时间：2013-04-16T01:19:03.520
> 
> 标签：php, codeigniter, jquery-select2

我需要一些帮助来弄清楚我做错了什么。我正在尝试使用我的数据库中的用户填充下拉列表。我正在使用 Codeigniter，而 Firebug 给了我错误：

`TypeError: j is undefined`

**看法**

```
 <input id="users" type="hidden">

 <script>
 $("#users").select2({
        width: "element",
        ajax: {
            url: "localhost/index.php/get_clients",
            dataType: 'json',
            data: function (term, page) {
                return {
                    q: term
                };
            },
            results: function (data, page) {
                return { results: data };
            }
        }
  });
  </script> 
```

**控制器**

```
function get_clients() {
    $this->load->model('users_model');
    $result = $this->users_model->get_all_clients();
 } 
```

**模型**

```
 function get_all_clients() {
    $all_clients = $this->db->select('CONCAT(first_name, " ", last_name) as text, id', FALSE)
    ->get('clients')->result();
    $rows = array();
        foreach ($all_clients as $entry) {
            $rows[] = $entry;
        }
        print json_encode($rows);
} 
```

它返回如下内容：

```
 [{"text":"John Smith","id":"433"},{"text":"Paul Sparks","id":"434"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:41:43.283

对不起，我是愚蠢的。我想到了。用户错误。

# c - 如何在C中打开连接到主cmd的新cmd

> ID：16027227
> 
> 赞同：0
> 
> 时间：2013-04-16T01:19:05.090
> 
> 标签：c, pthreads, command-prompt

我对并行编程很陌生。在我的 C 程序中，我需要在不同于主终端的终端上显示我的统计数据。

我是说：

我正在实现一个简单的文本编辑器。在用户编写数据时，我在线程的帮助下保持字母大小。我想随时显示字母大小，但是由于用户在打字时被打断，这是不可能的。因此，我正在考虑打开一个新的命令提示符窗口并在那里显示该字母大小信息。

我怎样才能做到这一点？我在 Ubuntu 中使用 g++ 编译器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:36:28.813

我认为您不需要生成新的外壳来显示该行。如果你想要的是评论框，试试这个（注意：我没有实现任何转义字符，所以退格和转义不起作用）

从这里得到了一点帮助[什么是 Linux 中的 getch() 和 getche() 等价物？](https://stackoverflow.com/questions/7469139/what-is-equivalent-to-getch-getche-in-linux)

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAXLEN 255
#ifdef _WIN32
#include <conio.h>
#else
#include <termios.h>

static struct termios old, newT;

/* Initialize new terminal i/o settings */
void initTermios(int echo)
{
    tcgetattr(0, &old); /* grab old terminal i/o settings */
    newT = old; /* make new settings same as old settings */
    newT.c_lflag &= ~ICANON; /* disable buffered i/o */
    newT.c_lflag &= echo ? ECHO : ~ECHO; /* set echo mode */
    tcsetattr(0, TCSANOW, &newT); /* use these new terminal i/o settings now */
}

/* Restore old terminal i/o settings */
void resetTermios(void)
{
    tcsetattr(0, TCSANOW, &old);
}

/* Read 1 character - echo defines echo mode */
char getch(int echo)
{
    char ch;
    initTermios(echo);
    ch = getchar();
    resetTermios();
  return ch;
}
#endif // _WIN32

int main()
{
    char arrayInput[MAXLEN + 1];
    static char printArray[MAXLEN + 15];
    static char tmp[5];
    char c;
    int i,len=0;
    printf("Begin\n");
    for(i=0;i<MAXLEN;i++)
    {
        putchar('\r');
        c = getch();
        for(len=0;len<MAXLEN;len++)
            putchar(' ');
        putchar('\r');
        arrayInput[i]=c;
        arrayInput[i+1] = '\0';
        strcpy(printArray,"");
        strcpy(printArray,arrayInput);
        strcat(printArray," Size is:: ");
        sprintf(tmp,"%d",i+1);
        strcat(printArray,tmp);
        printf("%s",printArray);
    }
    return 0;
} 
```

# java - 从文本文件中读取并存储在字符串中

> ID：16027229
> 
> 赞同：23
> 
> 时间：2013-04-16T01:19:08.817
> 
> 标签：java, file, file-io

我们如何从文本文件中读取数据并存储在 String 变量中？

是否可以在方法中传递文件名，它会返回文件中的文本字符串。

我必须导入什么样的实用程序？一份声明清单会很棒。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-16T01:27:58.327

这些是必要的进口：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException; 
```

这是一种允许您通过将文件名作为参数传递给文件来读取文件的方法，如下所示：`readFile("yourFile.txt");`

```
String readFile(String fileName) throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(fileName));
    try {
        StringBuilder sb = new StringBuilder();
        String line = br.readLine();

        while (line != null) {
            sb.append(line);
            sb.append("\n");
            line = br.readLine();
        }
        return sb.toString();
    } finally {
        br.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-16T10:11:17.617

> 我们如何从文本文件中读取数据并存储在字符串变量中？

错误，从文件中读取数据并将其存储在 String 变量中。这只是代码。到目前为止还不是一个真正的问题。

> 是否可以在方法中传递文件名，它会返回文件中的文本字符串。

是的，这是可能的。这也是一个非常糟糕的主意。您应该一次处理文件的一部分，例如一次处理一行。在处理任何文件之前将整个文件读入内存会增加延迟；浪费内存；并假设整个文件将适合内存。总有一天不会的。你不想这样做。

# php - 如何在 PHP 中按最高日期列出

> ID：16027232
> 
> 赞同：1
> 
> 时间：2013-04-16T01:19:22.890
> 
> 标签：php

嘿伙计们，所以我在使用以下内容时遇到了一些麻烦：

```
for ($i = 0; $i < count($noncompUsername); $i++)
{
    $tsql ="SELECT firstname,lastname,email,phone,statuschangedate FROM csvdata WHERE username = :username ORDER BY statuschangedate";
    $tgetmeminfo=$DBH->prepare($tsql);
    $tgetmeminfo->execute(array(':username' => $noncompUsername[$i]));
    while ($trow = $tgetmeminfo->fetch(PDO::FETCH_ASSOC)){

        $csvFirst = $trow['firstname'];
        $csvLast = $trow['lastname'];
        $csvEmail = $trow['email'];
        $csvPhone = $trow['phone'];
        $csvDate = $trow['statuschangedate'];
        $timediff = strtotime($date) - strtotime($csvDate);
        $timediff = floor($timediff/86400);

        $sql ="SELECT MailingAdrs FROM insuranceverificationdisclaimer WHERE TraineeUsername = :tusername";
        $getmeminfo=$DBH->prepare($sql);
        $getmeminfo->execute(array(':tusername' => $noncompUsername[$i]));
        while ($row = $getmeminfo->fetch(PDO::FETCH_ASSOC)){

            $csvAddrs = $row['MailingAdrs'];
            $change = 1;
        }
        if($change != 1)
        {
            $csvAddrs = "No address";
        }
        $change = 0;
        echo "$timediff, $csvFirst $csvLast, $csvEmail, $csvPhone, $csvAddrs";
    }
    echo "
    <br>
    ";
} 
```

现在这可行，但我要指出的部分是`$tsql ="SELECT firstname,lastname,email,phone,statuschangedate FROM csvdata WHERE username = :username ORDER BY statuschangedate";`- 现在当我这样做并将 statuschangedate 的整数获取到当前日期并将其打印为整数时，它没有根据日期正确排序。

所以我需要在最旧的日期之前订购它，如下所示......

谢谢！

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:22:01.930

按降序排列日期（使用`DESC`）：

```
... ORDER BY statuschangedate DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T01:32:10.840

如果您想根据`$timediff`您的顺序进行排序，则应将 ORDER 子句更改为：

```
ORDER BY DATEDIFF(:date, statuschangedate) 
```

当然，这实际上应该给出与您已经拥有的相同的顺序，但您至少可以使用此表达式在 PHP 本身中保存一些处理 :)

# scala - 类型类和 scala 集合接口

> ID：16027237
> 
> 赞同：3
> 
> 时间：2013-04-16T01:20:03.047
> 
> 标签：scala, collections, typeclass

我正在尝试实现一个适用于具有 a`map`和`flatMap`方法的类型的函数。我已经做到了`Traversable`，但这不包括`Future`和`Option`直接。所以我决定使用我自己的接口，使用类型类：

```
trait CanMap[A, M[_]] {
  def map[B](l: M[A])(f: A => B): M[B]
  def flatMap[B](l: M[A])(f: A => M[B]): M[B]
} 
```

我已经为`Option`：

```
 implicit def canmapopt[A] = new CanMap[A, Option] {
    def map[B](l: Option[A])(f: A => B): Option[B] = l.map(f)
    def flatMap[B](l: Option[A])(f: A => Option[B]): Option[B] = l.flatMap(f)
  } 
```

这个效果很好。现在我想为 的任何子类型实现它`Traversable`，我尝试了一个非常接近 Option 的实现：

```
 implicit def canmaptrav[A, B, T[B] <: Traversable[B]] = new CanMap[A, T] {
    def map[B](l: T[A])(f: A => B): T[B] = l.map(f)
    def flatMap[B](l: T[A])(f: A => T[B]): T[B] = l.flatMap(f)
  } 
```

但我得到了错误：

```
 type mismatch;  found   : Traversable[B]  required: T[B]  Note: implicit method canmaptrav is not applicable here because it comes after the application point and it lacks an explicit result type 
```

的返回类型`l.map`。我不明白为什么`l.map(f)`会返回 a`Traversable`而不是特定的 type `T[B]`。所以我试图明确地将正确类型的 CanBuildFrom 放在上下文中：

```
 implicit def canmaptrav[A, B, T[B] <: Traversable[B]](implicit cbf: CanBuildFrom[T[A], B, T[B]]) = new CanMap[A, T] {
    def map[B](l: T[A])(f: A => B): T[B] = l.map(f)
    def flatMap[B](l: T[A])(f: A => T[B]): T[B] = l.flatMap(f)
  } 
```

错误仍然存​​在。

知道我哪里出错了吗？这可能很明显，但我对我猜的泛型类型签名感到困惑。

# 更新：解决方案

首先，正如答案所指出的，`CanMap`主要是 Functor/Monad，所以如果你敢，你可以使用*scalaz*来实现它。但是，如果您像我一样想尝试不使用它，这里是解决方案，基于 Kipton Barros 的回答：

```
trait CanMap[A, B, M[_]] {
  def map(l: M[A])(f: A => B): M[B]
  def flatMap(l: M[A])(f: A => M[B]): M[B]
}

implicit def canmapopt[A, B] = new CanMap[A, B, Option] {
  def map(l: Option[A])(f: A => B): Option[B] = l.map(f)
  def flatMap(l: Option[A])(f: A => Option[B]): Option[B] = l.flatMap(f)
}

implicit def canmaptrav[A, B, M[+_]](implicit bf: CanBuildFrom[M[A], B, M[B]], ev: M[A] => TraversableLike[A, M[A]], eb: M[B] => TraversableLike[B, M[B]]) = new CanMap[A, B, M] {
  def map(l: M[A])(f: (A) => B): M[B] = l.map(f)
  def flatMap(l: M[A])(f: A => M[B]): M[B] = l.flatMap[B, M[B]] { (a: A) =>
    f(a)
  }
} 
```

诀窍是使用隐式转换`M[A] => TraversableLike[A, M[A]]`而不是尝试子类型`Traversable`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:51:58.317

第一个问题是该`Traversable` `map`方法的“幕后”发生了很多事情。返回最具体的集合类型需要做一些工作，这就是您需要`CanBuildFrom`. 第二个问题是`Option`没有实现`Traversable`接口，所以它的`map`方法*不*带`CanBuildFrom`.

这是我能得到的最接近的，

```
import scala.collection.generic.CanBuildFrom
import collection.TraversableLike

trait CanMap[A, M[_]] {
  def map[B](l: M[A])(f: A => B)(implicit bf: CanBuildFrom[M[A], B, M[B]]): M[B]
}

object Test {

  // ugly hack to work around nonexistent CanBuildFrom for Option
  implicit def optionBuilder[A, B]: CanBuildFrom[Option[A], B, Option[B]] = null

  implicit def canmapopt[A] = new CanMap[A, Option] {
    def map[B](l: Option[A])(f: A => B)(implicit bf: CanBuildFrom[Option[A], B, Option[B]]): Option[B] = l.map(f)
  }

  implicit def canmaptrav[A, M[_]](implicit ev: M[A] => TraversableLike[A, M[A]]) = new CanMap[A, M] {
    def map[B](l: M[A])(f: (A) => B)(implicit bf: CanBuildFrom[M[A], B, M[B]]): M[B] = l.map(f)
  }

  // example usage

  def mapper[A, B, M[_]](l: M[A])(f: A => B)(implicit cm: CanMap[A,M], bf: CanBuildFrom[M[A], B, M[B]]) = {
    cm.map(l)(f)
  }
  mapper(List(1,2,3))(_ + 1)          // List(2,3,4)
  mapper(Some(2): Option[Int])(_ + 1) // Some(3)
  // (cast to Option[Int] is needed to find the canmapopt implicit)
} 
```

顺便说一句，隐式转换`TraversableLike`使其也适用于数组，

```
 mapper(Array(1,2,3))(_ + 1)         // Array(2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:35:17.103

首先，我尝试了您的两次失败的尝试，但并没有从中受益。然后我决定简单一点，做我自己的 CanMap 实现。我最终得到了这个：

```
 def canmaptrav[A] = new CanMap[A, Traversable]{
    def map[B](l: Traversable[A])(f: A => B): Traversable[B]= l.map(f)
    def flatMap[B](l: Traversable[A])(f: A => Traversable[B]): Traversable[B] = l.flatMap(f)
  } 
```

看起来正是`CanMap[_,Option]`. 假设您正在寻找的子类型适用于这样的用例：

```
canmaptrav[Int].map(List(1,2,3,4))(_ + 1)       //> res0: Traversable[Int] = List(2, 3, 4, 5)
canmaptrav[Int].map(Vector(1,2,3,4))(_ + 1)     //> res1: Traversable[Int] = Vector(2, 3, 4, 5) 
```

现在，如果您希望 res1 和 res0 类型成为具体类型（List、Vector），那么该方法将不得不依赖`CanBuildFrom`from。

顺便说一句，你知道这`CanMap`几乎是 Monad 接口，对吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:09:22.453

[Scalaz](http://github.com/scalaz/scalaz)已经包含了这些类型类，它们被称为`Monad`and `Functor`。一个简短的例子：

```
// map
def foo[F[_] : Functor](xs: F[Int]) = xs.map(_ + 1)

scala> foo(List(1,2,3))
res2: List[Int] = List(2, 3, 4)

// flatMap
def flatten[M[_] : Monad](xs: M[M[Int]]) = xs.flatMap(identity)

scala> flatten(List(List(1,2,3)))
res3: List[Int] = List(1, 2, 3) 
```

**编辑**：

的仿函数实例`Future`可能如下所示：

```
implicit object FutureFunctor extends Functor[Future] {
  def map[A,B](fa: Future[A])(f: A => B) = fa.map(f)
} 
```

# sbt - 您如何开发 SBT 项目本身？

> ID：16027238
> 
> 赞同：3
> 
> 时间：2013-04-16T01:20:05.367
> 
> 标签：sbt, scala-ide, sbt-aspectj

背景：我有一个 Play 2.0 项目，我正在尝试在我的一些类（Java）上使用 jar 中的方面添加一些东西来做 aspectj 编织。（sbt-aspectj 似乎没有这样做，或者我看不出怎么做）。所以我需要添加一个自定义任务，并让它依赖于编译。我已经弄清楚了依赖部分。但是，因为我不知道自己在做什么，所以我想使用 IDE 开发它（我使用的是 Scala-IDE）。由于 sbt 项目（以及因此 Play 项目）是递归定义的，我认为我可以：

1.  将eclipse插件添加到myplay/project/project/plugins.sbt
2.  将 sbt 主 jar（和 aspectj jar）添加到 myplay/project/project/build.sbt：

    libraryDependencies ++= Seq( "org.scala-sbt" % "main" % "0.12.2", "aspectj" % "aspectj-tools" % "1.0.6" )

3.  进入 myplay/项目

4.  运行 sbt，运行 eclipse 任务，然后将项目作为单独的项目导入到 eclipse 中。

我可以做到这一点，尽管 build.scala （和其他 scala 文件）最初并未被视为源代码，但我不得不稍微调整一下构建路径。然而，即使我已经为项目定义了 sbt main，eclipse IDE 和 compile 任务都会给出错误：

```
> compile
[error] .../myplay/project/Build.scala:2: not found: object keys
[error] import keys.Keys._
[error]        ^
[error] .../myplay/project/SbtAspectJ.scala:2: object Configurations is not a member of package sbt
[error] import sbt.Configurations.Compile
[error]            ^
[error] .../myplay/project/SbtAspectJ.scala:3: object Keys is not a member of package sbt
[error] import sbt.Keys._
[error]            ^
[error] three errors found 
```

eclipse 项目在其引用库中既没有显示 main 也没有显示 aspectj-tools。但是，如果我给它一个伪造的版本（例如 0.12.4），重新加载会失败，所以它似乎正在使用依赖项。

所以，... 首先：这是正确的方法吗？第二：如果是这样，为什么不添加库。（第三：请不要让这成为我错过的愚蠢。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-26T18:51:44.370

如果您收到`object Keys is not a member of package sbt`错误，那么您应该检查您是否从基本目录而不是 /project 目录运行 sbt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T04:42:51.847

## sbt-aspectj

> sbt-aspectj 似乎没有这样做，或者我看不出怎么做。

我认为这是真正的问题。已经有一个插件可以完成这项工作，因此请尝试使其工作而不是摆弄构建。使用来自 build.scala 的插件有点棘手。[幸运的是， github](https://github.com/sbt/sbt-aspectj/blob/008e17fded741eff69e838e5b626ffac29412310/src/sbt-test/compile/aspects/project/SampleBuild.scala)上有示例项目：

```
import sbt._
import sbt.Keys._
import com.typesafe.sbt.SbtAspectj.{ Aspectj, aspectjSettings, compiledClasses }
import com.typesafe.sbt.SbtAspectj.AspectjKeys.{ binaries, compileOnly, inputs, lintProperties }

object SampleBuild extends Build {
  ....

  // precompiled aspects
  lazy val tracer = Project(
    "tracer",
    file("tracer"),
    settings = buildSettings ++ aspectjSettings ++ Seq(
      // stop after compiling the aspects (no weaving)
      compileOnly in Aspectj := true,

      // ignore warnings (we don't have the sample classes)
      lintProperties in Aspectj += "invalidAbsoluteTypeName = ignore",

      // replace regular products with compiled aspects
      products in Compile <<= products in Aspectj
    )
  )
} 
```

## 您如何开发 SBT 项目本身？

如果您对构建构建感兴趣，那么首先要去的地方是[入门](http://www.scala-sbt.org/release/docs/Getting-Started/index.html)指南。具体来说，您的问题应该在[.scala Build Definition page](http://www.scala-sbt.org/release/docs/Getting-Started/Full-Def.html)中得到回答。

我认为您希望您的构建能够利用`"aspectj" % "aspectj-tools" % "1.0.6"`. 如果是这样，它应该包含在 中`myplay/project/plugins.sbt`，并且您的代码应该进入`myplay/project/common.scala`或其他内容。如果您想使用 IDE，最好将其构建为 sbt 插件。这样你的代码就会进入`src/main/scala`. 在 sbt 插件结构示例中查看 sbt/sbt-aspectj 或 sbt/sbt-assembly。

# php - 在 CSS 中突出显示悬停时跳过所有其他单元格

> ID：16027240
> 
> 赞同：1
> 
> 时间：2013-04-16T01:20:23.000
> 
> 标签：php, jquery, css, html-table, hover

我有以下代码显示一个 html 单词表及其来自 PHP 关联数组的计数。一个表最多可以有 10 列乘 10 行（它是可变的）：

```
| col1  | col2 | col3  | col4 |
|-------|------|-------|------|
| word1 |  50  | word4 |  25  |
| word2 |  44  | word5 |  21  |
| word3 |  39  | word6 |  16  |, etc. 
```

`<td>`CSS在悬停时突出显示并强调单个单元格。但是，我需要悬停/突出显示/下划线仅在`<td>`带有单词的单元格上工作 - 而不是在数字上。单词总是在奇数列中，而数字总是在偶数列中。

您能否建议执行此操作的代码？我已经读到由于与悬停相关的浏览器问题，我可能需要在 jQuery 中执行此操作。这是我到目前为止所拥有的。先感谢您。:)

```
?>
<table id="word-table">
<?echo "<th>Word Counts</th>";?>
  <tbody>
    <?
      foreach ($rows as $cols) {
        echo '<tr><td>' . implode('</td><td class="nth-child(2n-1)">', $cols) . '</td></tr>';
      }
    ?>
  </tbody>
</table>
<?

#word-table td:nth-child(2n-1) {
    background: #CCFFCC;
}

#word-table td:nth-child(2n) {
    display: block;
    background: #CCE0FF;
    margin-right: 7px;
    text-align: center;
}

#word-table tbody td:hover 
{
    cursor: hand;
    cursor: pointer;
    color: blue;
    text-decoration: underline;
    background: #FFFFCC;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:22:30.843

你不需要 jQuery，你可以使用 CSS。

```
td:nth-child(odd):hover{
  ...
} 
```

在大多数浏览器中都能可靠运行：[http://caniuse.com/css-sel3](http://caniuse.com/css-sel3)
演示：http: [//jsfiddle.net/PV6jV/](http://jsfiddle.net/PV6jV/)

另外，我注意到您正在添加`nth-child(2n-1)`为类 -`:nth-child`是一个伪类，因此您不必实际添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:25:19.950

明确的更好

```
<? foreach ($rows as $cols): ?>
  <tr>
       <td> <?php echo $cols[0]; ?></td>
       <td class="highlight"> <?php echo $cols[1]; ?></td>
       <td> <?php echo $cols[0]; ?></td>
       <td class="highlight"> <?php echo $cols[3]; ?></td>
   </tr>
<?php endforeach; ?> 
```

# javascript - 赋值返回的值

> ID：16027247
> 
> 赞同：55
> 
> 时间：2013-04-16T01:21:26.297
> 
> 标签：javascript, assignment-operator

为什么常规赋值语句（比如， `x = 5`）返回赋值（`5`在这种情况下），而赋值与变量声明（`var x = 5`）结合返回`undefined`？

我通过在 Chrome 浏览器的 Javascript 控制台中执行这些语句获得了返回值：

```
> var x = 5;
undefined
> y = 5;
5 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-16T01:28:02.537

这就是语言的设计方式。它与大多数语言一致。

有一个变量声明返回任何东西`undefined`都是没有意义的，因为你永远不能`var`在表达式上下文中使用关键字。

当您想一次将许多变量设置为相同的值时，将赋值`expression`不是 a`statement`很有用：

```
x = y = z = 2; 
```

它也可以这样使用：

```
x = 2*(y = z); // Set y = z, and x = 2*z 
```

然而，这不是最可读的代码，它可能会更好地写成：

```
y = z;
x = 2*z; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T01:44:23.350

那是因为`var x = 5;`是变量语句，而不是表达式。

该语句的行为[在 ECMAScript 语言参考的第 12.2 节](http://www.ecma-international.org/ecma-262/5.1/#sec-12.2)中描述。

> 1.  评估变量声明列表。
> 2.  返回（正常、空、空）。

这基本上是一个`void`返回值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T02:58:37.027

赋值运算符（即等号） (1) 将右侧操作数（即变量、属性或函数的值或值）分配给左侧操作数（即变量或属性) 然后 (2) 在计算表达式的其余部分之前，赋值表达式（例如，y = 10）成为一个简单的操作数，其值与其右侧操作数（例如，10）相同。这类似于在计算表达式时将被调用的函数替换为其返回值（尽管函数调用在操作顺序中排在第一位，而赋值操作在第十四位）：

```
var x, y, z = 1;
x = z + (y = 2); // x === 3     

function returnTwo () {
    return 2;
}

x = z + returnTwo(); // x === 3 
```

请注意，现在不仅 x 等于 3，而且整个表达式的计算结果为 3。

关键字的目的`var`是将变量绑定到当前作用域。使用关键字声明的变量`var`绑定到声明它们的范围。关键字将`var`最左边的变量（或属性）分配为对评估表达式值的引用：

```
var fun = function () {
    var x = 1;
    var y = x + 1; 
    return y;
}

// The x and y variables are bound to the scope of the fun function. 
```

将`var`关键字与表达式一起使用称为声明。声明是不评估为值的操作，甚至未定义（即使您的控制台正在打印未定义）。此外，声明不能出现在 JavaScript 需要表达式的地方，正如这篇文章的其他答案所示。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T01:26:10.357

当您编写`var x = 5;`它时，它声明`x`并将其值初始化为 5。

这是 a `VariableStatement`，它什么也不返回，

但是`x=5`是一个`expression`将 5 分配给 x。由于没有，JavaScript在普通代码中`x`隐式创建一个全局变量`x`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T01:28:10.490

由于评论和其他一些答案，我编辑了我的答案。

赋值运算符不返回任何内容...在下面的示例中，JS 解析器所做的第一件事是将 5 分配给 y。第二件事是将y分配给x，依此类推。赋值不是`return`（它不是一个函数，在 JS 中它没有 C++ 语法来重载运算符的行为）。`return`比分配更复杂。`return`构造不仅返回一个值，而且关闭当前上下文导致它被销毁。如果没有其他孩子使用它，它也会关闭任何父上下文（关闭模式）。所以请不要告诉我（在评论中）赋值运算符返回任何值。JS 的赋值运算符只是一种语言结构。

这种语言结构在链中很有用（这就是每个人都在谈论返回的原因）：

```
a = x = y = 5; 
```

解析器在全局范围内自动声明任何未声明的变量。如果显式声明变量，则不能同时在链中使用它，如下所示：

```
a = var x = y = 5; 
```

正确使用上述代码将是：

```
var x = y = 5;
a = x; 
```

当然你可以使用方括号，让你的代码更清晰，但这并不意味着代码表现得像一个函数。

此外，您的示例仅适用于 JS 控制台，它不返回而是打印语句或表达式的结果。这意味着JS控制台将声明变量的结果视为`undefined`（创建函数时相同：）`function a() {}`。

# ruby-on-rails - 访问模型关联模型上的数据以执行验证

> ID：16027249
> 
> 赞同：2
> 
> 时间：2013-04-16T01:21:38.797
> 
> 标签：ruby-on-rails

```
class User < ActiveRecord::Base
  belongs_to :school

  validates :email, :email => { :message => "Must be a valid email." }, :format => { :with => /\A[\w+\-.]+@#{Regexp.quote(school.email_domain)}\z/i }

end 
```

我希望能够验证创建用户的电子邮件是否与他们学校的电子邮件域匹配。我通过以下方式创建用户：

```
@school.users.create(params[:user]) 
```

抛出错误：

```
undefined local variable or method `school' for #<Class:0x007f8aaabb0df0> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:31:01.527

您收到该错误是因为您尝试在*类*`#school`的上下文中而不是在类的*实例*中调用该方法，并且是一个实例方法。**`#school`**

 **要在构造验证格式 Regexp 时调用实例方法，可以提供[lambda](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)作为`:with`选项，如下所示：

```
validates :email,
  :message => "Must be a valid email",
  :format => { :with => lambda {|user| /\A[\w+\-.]+@#{Regexp.quote(user.school.email_domain)}\z/i } } 
```

此 lambda 将在您的模型实例上调用，允许您调用`User`实例上的方法，例如`#school`. 有关更多详细信息，请参阅文档[`validates_format_of`](http://api.rubyonrails.org)。**

# android - card.io Mono for Android (Xamarin Studio)

> ID：16027260
> 
> 赞同：8
> 
> 时间：2013-04-16T01:23:23.177
> 
> 标签：android, xamarin.android, xamarin-studio, card.io

有没有人成功地创建了他们愿意分享的可用于 Android 应用程序的 Mono 的 card.io 包装器，或者有人可以阐明我做错了什么？

1.  创建一个新的**Android Java 绑定库**项目
2.  [从card.io SDK 3.0.3](https://www.card.io/download/card.io-android-sdk-3.0.3.zip)添加 .jar 和 .so 文件，确保使用现有的文件夹结构
3.  将以下内容添加到 Transforms/EnumMethods.xml 以解决编译器错误：

    ```
    <mapping jni-class="io/card/payment/CardIOActivity">
        <method jni-name="onActivityResult" parameter="p1" clr-enum-type="Android.App.Result" />
    </mapping> 
    ```

4.  在我的主应用程序中添加对上述库的引用

一切都编译好了，我可以访问 card.io 类：

```
using IO.Card.Payment;

private void WireupScanCardButton()
{
    Log.Debug(this.GetType().Name, "WireupScanCardButton");

    this.ScanCardButton.Click += delegate 
    {
        Log.Debug(this.GetType().Name, "ScanCard.Click");

        var intent = new Intent(this, typeof(CardIOActivity));

        // Required for authentication with card.io
        intent.PutExtra(CardIOActivity.ExtraAppToken, "<MY PRIVATE TOKEN HERE>");

        // Customize these values to suit your needs.
        intent.PutExtra(CardIOActivity.ExtraNoCamera, false);
        intent.PutExtra(CardIOActivity.ExtraSuppressManualEntry, true);
        intent.PutExtra(CardIOActivity.ExtraRequireExpiry, false);
        intent.PutExtra(CardIOActivity.ExtraRequireCvv, false);
        intent.PutExtra(CardIOActivity.ExtraRequireZip, false);

        // Run the Activity
        this.StartActivityForResult(intent, 0);            
    };
} 
```

但是，我总是遇到以下错误：

**此设备无法使用相机读取卡号**

笔记：

*   我尝试在几种不同的物理设备上运行
*   card.io.jar 文件的构建操作为：EmbeddedJar
*   .so 文件的构建操作为：EmbeddedNativeLibrary
*   我已经为 Project **ItemGroup**中的每个 .so 文件明确设置了**Abi**

 **我对 Android/Xamarin 很陌生，所以花更多时间研究而不是编码。

.so 文件似乎不在 .apk 文件中

编辑：

.so 文件似乎确实被编译器拾取。编译后，如果我检查**obj/Release/**文件夹，则有一个子文件夹**native_library_imports**根据支持的 Abi 类型包含适当子文件夹中的 .so 文件。

但是，.so 文件仍然不会出现在最终的 .apk 文件中。

日志输出：

```
04-18 08:12:20.462 D/ActivityAddPaymentSource( 5824): ScanCard.Click
04-18 08:12:20.472 E/ActivityManager(  191): exception bw.write()java.io.IOException: Transport endpoint is not connected
04-18 08:12:20.472 I/ActivityManager(  191): Starting: Intent { cmp=com.onetab.android/io.card.payment.CardIOActivity (has extras) } from pid 5824
04-18 08:12:20.472 D/PowerManagerService(  191): acquireWakeLock flags=0x1 tag=ActivityManager-Launch
04-18 08:12:20.492 D/ActivityAddPaymentSource( 5824): OnPause
04-18 08:12:20.492 E/Sensors (  191): GsSensor: line +83 ~~~handle===0~~en==1~~!n
04-18 08:12:20.502 E/Sensors (  191): GsSensor::setDelay: line +113 ~~~handle===0~~ns==1553152~~!n
04-18 08:12:20.502 E/Sensors (  191): GsSensor::setDelay: line +113 ~~~handle===0~~ns==-2135896001~~!n
04-18 08:12:20.542 W/card.io ( 5824): cardioScanErrorNoDeviceSupport: This device cannot use the camera to read card numbers.
04-18 08:12:20.572 E/ActivityManager(  191): exception bw.write()java.io.IOException: Transport endpoint is not connected
04-18 08:12:20.572 D/PowerManagerService(  191): acquireWakeLock flags=0x1 tag=ActivityManager-Launch
04-18 08:12:20.582 E/Sensors (  191): GsSensor: line +83 ~~~handle===0~~en==0~~!n
04-18 08:12:20.622 D/ActivityAddPaymentSource( 5824): OnResume 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T00:12:52.583

好吧，经过一些实验，我终于解决了这个问题。

1.  按照我原始帖子中的 4 个步骤操作
2.  将 card.io SDK 解压到库项目的根目录，这样你最终会得到一个文件夹结构：**ProjectRoot/libs/`<the sdk files and abi subfolders>`**
3.  将 .jar 文件添加到 Project **Jars**文件夹（选择***添加链接***选项）
4.  将**libs**文件夹添加到项目的根目录（不包括 .jar 文件）
5.  您可能需要手动编辑**.csproj**文件以添加每个**.so**文件的**Abi**目标
***   确保 . **jar**文件具有**EmbeddedJar**的**Build 操作*****   确保**.so**文件具有**EmbeddedNativeLibrary**的**Build 操作******

 *******@tomwhipple - 感谢您的贡献。我试图支持您的回答，但显然我没有足够的声誉。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T15:22:56.780

Android logcat 应该显示更具体的错误消息，但此问题是由于缺少本机库所致。（对于普通的 Android 项目，它们位于`/libs`目录中，具有特定于体系结构的子目录。）

这些是`.so`您提到的 .apk 中缺少的文件。它们包含所有图像处理逻辑，因此如果它们不存在，card.io 将无法扫描。********

# linux-kernel - 在内核 3.8 中，第一个用户进程如何在删除 kernel_execve 时切换到用户模式

> ID：16027267
> 
> 赞同：12
> 
> 时间：2013-04-16T01:24:00.697
> 
> 标签：linux-kernel

在内核 3.8.x 及更高版本中，run_init_process 的定义发生了变化。

以下是内核 3.8 中 run_init_proces 的新定义。

```
 static int run_init_process(const char *init_filename) {
         argv_init[0] = init_filename;
        return do_execve(init_filename,
                (const char __user *const __user *)argv_init,
                 (const char __user *const __user *)envp_init); } 
```

与内核 3.7.x 和旧版本中的定义相比。

```
static int run_init_process(const char *init_filename) {
         argv_init[0] = init_filename;
         return kernel_execve(init_filename, argv_init, envp_init); } 
```

**kernel_execve**中最关键的部分是它会调用 ret_from_kernel_execve，然后它会切换到用户模式。

在新定义中，**kernel_execve**消失了。我的问题是第一个用户进程如何切换到用户模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T05:53:57.027

成功`do_execv()`设置`current`运行新程序的进程（例如 via [`load_elf_binary()`](http://lxr.free-electrons.com/source/fs/binfmt_elf.c?v=3.8#L561)），然后返回 0 到`run_init_process()`，它返回 0 到`kernel_init()`，它也返回 0，并被调用为：

```
 kernel_thread(kernel_init, NULL, CLONE_FS | CLONE_SIGHAND); 
```

这就是来自[https://lwn.net/Articles/520227/](https://lwn.net/Articles/520227/)的规则的用武之地：我们`fn()`在 an 之后返回 0 `execve`，因此“线程将进入由该 execve 创建的用户空间上下文”。

# c - 为什么 MapViewOfFile 会因 ERROR_ACCESS_DENIED 而失败？

> ID：16027268
> 
> 赞同：8
> 
> 时间：2013-04-16T01:24:07.963
> 
> 标签：c, winapi, shared-memory

[`MapViewOfFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761%28v=vs.85%29.aspx)我使用 WinAPI 的功能遇到了这种情况。互联网搜索没有发现任何明显的修复，所以我将在这里分享我的问题和解决方案。

考虑以下代码段：

```
const char *name = "Global\\Object_Name";
unsigned long size = get_object_size();

HANDLE handle = CreateFileMapping(INVALID_HANDLE_VALUE,
                                  NULL,
                                  PAGE_READWRITE,
                                  0,
                                  size,
                                  name);

if (!handle || handle == INVALID_HANDLE_VALUE)
    exit(GetLastError());

bool created = GetLastError() == 0;

void *block = MapViewOfFile( handle,
                             FILE_MAP_ALL_ACCESS,
                             0,
                             0,
                             size);

if (block == NULL)
    exit(GetLastError()); 
```

在一个特殊情况下，`CreateFileMapping`成功返回了一个句柄。`GetLastError`正在回归`ERROR_ALREADY_EXISTS`，所以`created == false`。现在，对 的调用`MapViewOfFile`，使用与我传递给相同的大小`CreateFileMapping`，返回`NULL`并`GetLastError`返回`0x05`: `ERROR_ACCESS_DENIED`。该进程以管理员权限运行。

MSDN 文档并没有真正提到会发生这种情况的任何原因。那么，为什么`CreateFileMapping`成功了，却`MapViewOfFile`失败了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-03T09:22:48.113

经过一番苦恼，我终于在我的应用程序中找到了导致此错误的原因，以防其他人遇到同样的问题，问题不在于 MapViewOfFile 方法，而在于 CreateFileMapping，createFileMapping 的大小应该是文件的大小，而不是要读取的元素的大小，如果您不知道大小，那么它应该为 0，这不适用于 MapViewOfFile，因为要传递的值是您想要的块的长度读/写。

您的代码工作将如下所示：

```
const char *name = "Global\\Object_Name";
unsigned long size = get_object_size();

HANDLE handle = CreateFileMapping(INVALID_HANDLE_VALUE,
                                  NULL,
                                  PAGE_READWRITE,
                                  0,
                                  0,
                                  name);

if (!handle || handle == INVALID_HANDLE_VALUE)
    exit(GetLastError());

bool created = GetLastError() == 0;

void *block = MapViewOfFile( handle,
                             FILE_MAP_ALL_ACCESS,
                             0,
                             0,
                             size);

if (block == NULL)
    exit(GetLastError()); 
```

只是把它放在这里是为了记录我的发现，不幸的是，当你不知道是什么导致它时，很难搜索到这个错误。我希望这可以为其他人节省几个小时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T01:24:07.963

我敢肯定，`ERROR_ACCESS_DENIED`调用`MapViewOfFile`. 在我的特殊情况下，这是由于`size`争论。

暗示在于`created == false`. 它表明该对象`"Global\\Object_Name"`已经被创建。无论出于何种原因，创建调用都会以较小的大小初始化该部分。对于看起来像是疏忽的`CreateFileMapping`情况，即使您要求更大的映射，第二次调用也会很高兴地为您提供已经存在的对象的句柄。

对 now 的调用`MapViewOfFile`失败，因为它请求的视图大于实际部分。

因此，如果您处于第二次调用`MapViewOfFile`失败的类似情况，请检查您尝试映射到的大小。

可能是第二个项目正在使用不同的结构对齐方式进行编译，导致`sizeof()`操作员确定不同的值，或者某些其他大小确定功能未按预期运行。

# php - 如何从 PHP 循环中获取正确的 onclick ID 以进行 Ajax 调用？

> ID：16027272
> 
> 赞同：0
> 
> 时间：2013-04-16T01:24:43.107
> 
> 标签：php, mysql, ajax, onclick

如何从 Ajax GET 命令的 PHP FOR & WHILE 循环组合中获取正确的 mysql id？现在，当我进行测试警报时，每个 href 的 onclick 都会导致最后一个 id 被警报，而不是正确的 id。

```
 <?php 
    $varRank = 1;
    $pRow = 1;
    $pBlock = 1;
       FOR ($pRow == 1; $pRow < 5; $pRow++){    
            WHILE ($pBlock <= $pRow){

            mysql_select_db($database_cms_test, $cms_test);
            $query = "SELECT * WHERE rank=$varRank";
            $result = mysql_query($query) or die();
            $row = mysql_fetch_array($result);

            $scr = '<script type="text/javascript" src="jquery.min.js"></script>' .
            '   <script type="text/javascript">' .
            '       function runCounter(){' .
            '       var currentID = ' . $row['id'] . ';' .
            '       var currentRank = ' . $row['rank'] . ';' .  
            '       alert(\'the current id is \' + '. $row['id'] .');' .                
            '       $.get("counter5.php?id=' . $row['id'] . '");' .
            '       }' .
            '   </script>';

            echo $scr;

            $onclkHTML = '<a href="#" onclick="runCounter();" id="' .    $row['song_name'] . '">' .
            '<img src="images/glossy.jpg" width="30" height="30" align="absmiddle" hspace="10" /></a>';
            echo $onclkHTML;    

            $pBlock++;
            $varRank++;
            }
            $pBlock = 1;  // reset
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:51:19.180

您每次通过循环都重新定义相同的函数。

既然您使用的是 jQuery，为什么不直接绑定一个点击处理程序呢？为这些链接中的每一个赋予一个类，并使用`data-XXX`标签将参数与其关联：

```
$onclkHTML = '<a href="#" class="counter" id="' . $row['song_name'] . ' data-rank=" . $row['rank'] . " data-id=" . $row['id'] . ">' .
        '<img src="images/glossy.jpg" width="30" height="30" align="absmiddle" hspace="10" /></a>';
echo $onclkHTML; 
```

然后只需将处理程序绑定到类：

```
$(function () {
    $(".counter").click(function() {
        var currentId = $(this).data("id");
        var currentRank = $(this).data("rank");
        alert("The current id is " + currentId);
        $.get("counter5.php?id=" + currentId);
    });
}); 
```

# php - 你能找到逻辑/语法错误吗

> ID：16027275
> 
> 赞同：0
> 
> 时间：2013-04-16T01:24:52.820
> 
> 标签：php, mysql, sql, sql-update

我一直在逐行通过我的代码试图找到一个错误，但是我还没有成功。

下面显示的是我的输入和更新文件的片段。

**修改form.php**

```
 <li id="li_1" >
        <label class="description" for="servername">Server Name </label>
        <div>
            <input id="element_1" name="Servername" class="element text medium" type="text" maxlength="255" value="<?php echo $person['servername']; ?>"/> 
        </div><p class="guidelines" id="guide_1"><small>Enter your server name here NOT your server address.</small></p> 
        </li>       <li id="li_2" >
        <label class="description" for="Serveraddress">Server Address </label>
        <div>
            <input id="element_2" name="Serveraddress" class="element text medium" type="text" maxlength="255" value="<?php echo $person['serveraddress']; ?>"/> 
        </div><p class="guidelines" id="guide_2"><small>This will the DNS name of your server</small></p> 
        </li>       <li id="li_3" >
        <label class="description" for="Portnumber">PortNumber </label>
        <div>
            <input id="element_3" name="Portnumber" class="element text medium" type="text" maxlength="255" value="<?php echo $person['portnumber']; ?>"/> 
        </div><p class="guidelines" id="guide_3"><small>This will be the port your server is using.</small></p> 

        <label class="description" for="Status">Server Status </label>
               <div>
            <input id="element_4" name="Status" class="element text medium" type="text" maxlength="255" value="<?php echo $person['status']; ?>"/> 
        </div><p class="guidelines" id="guide_4"><small> Display your Server Status</small></p> 

        </li>       <li id="li_4" >
        <label class="description" for="Description">Server Description </label>
        <div>
            <textarea id="element_5" name="Description" class="element textarea medium" value ="<?php echo $person['description']; ?>"></textarea> 
        </div><p class="guidelines" id="guide_5"><small>Enter server description/rules here.</small></p> 
        </li>

                    <li class="buttons">
                <input type="hidden" name="id" value="<?php echo $_GET['id']; ?>" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Modify" />
        </li>
            </ul>
        </form> 
        <div id="footer">
        </div>
    </div>

    </body>-
</html> 
```

**修改名称.php**

```
<?php

mysql_connect("localhost", "user", "password") or die (mysql_error());
#echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
#echo "Connected to Data Base";
/*$query = "SELECT * FROM table WHERE userId='{$user_id}'";
$result = mysql_query ($query) or die (mysql_error());*/

    if(!isset($_POST['submit'])) {
    $q = "SELECT * FROM addserverame WHERE ID = $_GET[id] AND userId='{$user_id}'";
    $result = mysql_query ($q);
    $person = mysql_fetch_array ($result);
    }

    ?>

<?

if(isset($_POST['submit'])) {
    $u = "UPDATE addserverame SET `servername`='$_POST[Servername]', `serveraddress`='$_POST[Serveraddress]', `portnumber`='$_POST[Portnumber]', `status`='$_POST[Status]', `description`='$_POST[Description]', WHERE ID = $_POST[id] AND userId='{$user_id}'";
    mysql_query($u) or die (mysql_error());
    echo "Server Info Has Been Modified";
}
?> 
```

**问题区域** 更新和回显服务器名称、服务器地址和端口号字段很好，但是回显/更新描述和状态字段不起作用。

我已经多次查看表名，我承认它们是正确的。

这让我相信语法错误可能是罪魁祸首。

谢谢你的时间

本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:27:47.127

`UPDATE`您的语句存在语法错误。您在应该删除`,`的子句之前有额外的内容。`WHERE`

```
UPDATE  addserverame 
SET  `servername`='$_POST[Servername]', 
     `serveraddress`='$_POST[Serveraddress]', 
     `portnumber`='$_POST[Portnumber]', 
     `status`='$_POST[Status]', 
     `description`='$_POST[Description]', -- <<=== REMOVE extra comma HERE
WHERE ID = $_POST[id] AND 
      userId='{$user_id}' 
```

养成对齐代码的习惯，以便轻松发现语法错误。

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# jquery - jQuery UI，如何预选标签

> ID：16027282
> 
> 赞同：2
> 
> 时间：2013-04-16T01:25:44.747
> 
> 标签：jquery, jquery-ui

我读过这个 -[在 jquery UI 选项卡中预先选择启用 ajax 的选项卡](https://stackoverflow.com/questions/9078412/preselecting-ajax-enabled-tab-in-jquery-ui-tabs) 并尝试了 API 文档...

这是最基本的代码... [http://jsfiddle.net/Xa2ur/](http://jsfiddle.net/Xa2ur/)

我希望能够指定选择哪个选项卡，但我能找到的语法不起作用。

我最终会传递一个变量，但如果我不能让硬代码工作，那么采取额外的步骤有什么好处。

任何帮助 - 以及“为什么”我所做的没有工作都非常感谢。

编码

```
$( function() {
    $( "#tabs" ).tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error( function() {
                ui.panel.html( "Couldn't load this tab. We'll try to fix this as soon as possible." );
            });
        }
    });
}); 
```

-- 其他一些代码 --

```
<div id="tabs" >
        <ul>
            <li class="firsttab" ><a href="#tabs-1" >Wedding</a></li>
            <li class="" ><a href="#tabs-2" >Gig Feb 2013</a></li>
            <li class=""><a href="#tabs-3" >Homecoming</a></li>
        </ul>
        <div id="tabs-1" >
            <p>Description: Wedding Info</p>
            <p>photos</p>
        </div>
        <div id="tabs-2" >
            <p>Description: A gig @ TT the Bears</p>
            <p>blog</p>
        </div>
        <div id="tabs-3" >
            Stuff
        </div>
    </div>
    <script>
        $( "#tabs" ).tabs( "option", "active", 2 );
        // i HAVE also tried - $('#tabs').tabs({ selected: "2" });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:28:21.607

```
$( function() {
    $( "#tabs" ).tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error( function() {
                ui.panel.html( "Couldn't load this tab. We'll try to fix this as soon as possible." );
            });
        },
        active:2
    });
}); 
```

# azure - Azure“网站”的高可用性需要多少个实例

> ID：16027284
> 
> 赞同：2
> 
> 时间：2013-04-16T01:26:07.343
> 
> 标签：azure, azure-web-app-service

我需要配置多少个实例以确保我的站点在底层 OS/VM 上执行的*计划维护期间保持可用。*

我了解***Web 角色***的可用性模型，但我不清楚Azure 上的***网站是否相同。***

使用***Web 角色***，您必须在单独的升级域中配置至少 2 个实例，才能从 Microsoft 获得 SLA 并确保您的站点经常可用。这可确保您的站点在 Microsoft 对底层操作系统执行维护时保持可用（更新到较新版本的操作系统映像等）。

***网站***的等效故事是什么？我是否需要有我的网站的两个实例，或者微软是否在他们执行维护之前主动将我的网站移动到一个新的虚拟机（因为网站比 Web 角色更“受管理”，看起来他们可能会这样做)?

免费、共享和保留***网站***之间的答案是否会发生变化？

请注意，我了解在突然的、计划外的停机期间，拥有一个实例意味着我的站点将不可用，直到它在新节点上重新启动。对于我的低容量爱好网站，我并不担心。我更感兴趣的是例行的、有计划的维护活动，这些活动比 VM 或主机硬件的计划外故障更为常见。

**编辑澄清：**显然，拥有 2 个（或更多）保留实例将是高可用性的最佳选择，但对于一个每月仅 120 美元的业余爱好网站来说，这成本太高了。我的问题实际上是单个共享或保留实例是否会因计划维护而例行停机。我特别想知道是否有人对此有具体信息（来自我可能错过的博客文章或与微软支持人员的电话等）。也许答案是“没有人知道，因为微软还没有澄清预览版之外的事情将如何运作”。

我也不想纠结于“高可用性”这个词。我想我只是在寻找“不低可用性”。毕竟，这只是一个爱好网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:26:28.390

请注意，Azure 网站仍**处于预览阶段**。这意味着从来没有 SLA。当网站不再预览时，我建议至少**保留 2 个保留**实例以实现高可用性。

Free 和 Shared 实例都意味着使用配额 - CPU/Memory/Bandwitdth（Shared 没有带宽配额，但仍对 CPU 和内存应用配额）。

`High Availability`在我对该术语的理解中，设置使用配额是有争议的。这就是我建议**Reserved**的原因。实例数相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T19:02:05.457

由于网站仍处于预览阶段，因此没有 SLA，但我也想知道更新期间的停机时间，并在 Twitter 上找到了 Azure 团队成员的解释： [https ://twitter.com/nirmsk/status/342087643779198977](https://twitter.com/nirmsk/status/342087643779198977)

显然，如果当前机器需要重新启动、崩溃或您更改缩放选项（在共享和保留之间），它们会保留使用的机器“缓冲区”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T21:22:57.483

拥有多个实例并不能解决问题，因为您对一个实例所做的任何更改都会自动传播到所有其他实例。

但是，Azure 网站现在支持拥有网站的暂存版本以及在网站的暂存版本和生产版本之间进行交换。这将是您的方案的理想选择。有关更多信息，请参见此处：http: [//azure.microsoft.com/en-us/documentation/articles/web-sites-staged-publishing/](http://azure.microsoft.com/en-us/documentation/articles/web-sites-staged-publishing/)

# c - 创建一个单链表，其中包含 BST 给定范围内的数字

> ID：16027287
> 
> 赞同：1
> 
> 时间：2013-04-16T01:26:26.500
> 
> 标签：c, linked-list, range, binary-search-tree

我有兴趣找到给定范围内的所有整数`BST`。我想知道如果 BST 是用节点创建的，我将如何做这件事，因此我必须使用单链表。返回的链表中项目的顺序无关紧要。

例如考虑如下所示的树，

![在此处输入图像描述](https://i.stack.imgur.com/1CzIn.png)

范围为 [6, 13]，则列表应包括 6->7->8->10->13 或 13->10->8->7->6。正如我所说，返回列表中的顺序无关紧要。

此外，运行时约束是 O(n)，其中 n 是树中的节点数。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:57:58.443

您只需使用 2 个堆栈就可以做到这一点......

让我们从 2 个堆栈开始，1 个是简单的待办事项堆栈（例如包含您应该访问的节点），另一个是带有结果的堆栈。

从根节点开始，如果节点在范围内，则将其推入结果堆栈，并将两个子节点都推入待办事项堆栈。如果超出范围，可能会发生 2 种情况：1.) 它小于我们范围内的最小值 -> 将它的右孩子推入 todo 堆栈 2.) 它大于我们范围内的最大值 -> pus 它是 todo 上的左孩子堆

好的，让我们将其创建为一些有用的算法：

```
List<BSTNode*> FindAllInRange(BSTNode* root, int low, int high)
{
    Stack<BSTNode*> todo;              //< Todo stack
    Stack<BSTNode*> results;           //< Results stack

    // Start with root node
    todo.push(root);

    // While we have nodes to process
    while(todo.size() > 0)
    {
        // Get top node, and pop it from stack
        BSTNode* curr = todo.top();
        todo.pop();

        // If its value is less than the lowest value in range
        if(curr->value < low)
        {
            // Push right children if exists (as it may be higher than lowest value in range)
            if(node->right)
                todo.push(node->right);
        }
        // If its value is greater than the highest value in range
        else if(curr->value > high)
        {
            // Push left children if exists (as it may be lower than highest value in range)
            if(node->left)
                todo.push(node->left);
        }
        // Otherwise (we're in range)
        else
        {
            // Push current node to results stack
            results.push(curr);

            // If right node exists, push it on todo stack
            if(node->right)
                todo.push(node->right);

            // If left node exists, push it on todo stack
            if(node->left)
                todo.push(node->left);
        }
    }

    // Now you just have to convert the stack to list (and possibly sort it, reverse sort it, ...)
    return results.ConvertToList();
} 
```

请注意，这只是类似 C++ 语言的伪代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:24:58.157

如果你有 BST 的基本知识，你应该知道从树中检索一组排序的元素实际上非常简单。如果你熟悉`LVR`/`RVL`遍历你可以跳到“答案”。

**循环遍历树：**

遍历树通常被描述为三个字母的组合`LVR`。`L`离开了。`R`是正确的。`V`访问的意思。

这描述了您在遍历树时遵循的模式。`L`表示如果存在，您将树向下提升到左节点。`R`对。`V`表示对当前节点的一些操作，如打印。它使用重复！这很重要。

现在。如何获得排序集。`LVR`当访问意味着打印或推送时，这很简单。

**示例 - 完整的演练：**

```
 (8) You start in root. `L` - go left. 
  (3) You are in (3). You go `LVR` for this node again - recurrence. `L`
    (1) You are in (1). Now *again* `LVR`.
    However there is no left node so we go to `V` - visit/print 1\. Now `R` - no right node. End. By recurrence we go back to 3.
  (3) - We're done with `L`. We do `V`. Print 3.
  (3) - `R`.
    (6) You are in (6) - `LVR` again. 'L'
      (4) You are in (4) - `L` does not exists. Print 4\. `R` does not exist. Back one level.
    (6) - `V`. Print 6.
    (6) - `R`.
      You are in (7) - `L` does not exists. Print 7\. `R` does not exist. Back one level.
    (6) - `LVR` Done. Back one level.
  (3) - `LVR` Done. Back one level.
(8) - `R`.
  (10) You are in 10\. `L` Does not exist.
  (10) `V`. Print 10.
  (10) `R`.
    (14) You are in 14.
    (14) `L`.
      (13) You are in 13\. `L` does not exists. Print 14\. `R` does not exist. Back one level.
    (14) `V`. Print 14.
    (14) `R`. Does not exist. Back one level.
  (10) Done with `R`. Back one level.
(8) Done with `R`. Back one level.
Haha we were on root node so we are done. 
```

如果你会跟随打印。事实证明，您按从低到高的顺序打印了整套。`RVL`模式会做类似的事情，但是由于您首先向右走，因此您将首先访问最右边的节点，因此顺序将是降序的。由于没有魔法并且您只访问每个节点一次，因此时间复杂度为`O(n)`.

**答案：**

简单的方法。做一个正常的`LVR`遍历。但仅在符合范围的情况下打印数字。稍微困难但更好的平均和极端情况。找到起始节点。然后开始遍历并在每次访问时仅与上限进行比较，并在节点数据超过上限时停止。

当然，您可以使用堆栈或其他东西（如列表）代替打印，以按排序顺序存储元素。

# c++ - 无法将值存储到列表中

> ID：16027290
> 
> 赞同：1
> 
> 时间：2013-04-16T01:27:11.917
> 
> 标签：c++, list

似乎该属性`test aisbn`已成功存储调用`setCode()`,的数据`setDigit()`。但是当我尝试将这些值存储到`list<test> simul`

`setDigit()`list 属性在 code之后取 digit 的值。如何将代码和数字都放入列表属性中？我看不出问题出在哪里。编码：

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <fstream>
#include <list>
using namespace std;

class test
{
    private:
        string code;
        int digit;

    public:
        //constructor
        test(): code(""), digit(0) { }

        //copy constructor
        test(const test &other):
        digit(other.digit)
        { 
            for(unsigned int i=0; i < code.length(); i++)   
                code[i] = other.code[i];
        }

        //set up the private values 
        void setCode(const string &temp, const int num);
        void setCode(const string &temp);
        void setDigit(const int &num);

        //return the value of the pointer character 
        const string &getCode() const;
        const unsigned int getDigit() const;
};

const string& test::getCode() const
{
    return code;
}
const unsigned int test::getDigit() const
{
    return digit;
}
void test::setCode(const string &temp, const int num)   
{
    if((int)code.size() <= num)
    {
        code.resize(num+1);
    }
    code[num] = temp[num];
}
void test::setCode(const string &temp)  
{
    code = temp;
}
void test::setDigit(const int &num)
{
    digit = num;
}

int main()
{
    const string contents = "dfskr-123";

    test aisbn;
    list<test> simul;
    list<test>::iterator testitr;
    testitr = simul.begin();
    int count = 0;

    cout << contents << '\n';
    for(int i=0; i < (int)contents.length(); i++)
    {
        aisbn.setCode(contents);
        aisbn.setDigit(count+1);
        simul.push_back(aisbn);
        count++;
    }
    cout << contents << '\n';

    /*for(; testitr !=simul.end(); simul++)
    {
        cout << testitr->getCode() << "\n";
    }*/

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:33:42.557

看起来您的`for`循环有问题，您需要`for`像这样修改循环：

```
for(testitr = simul.begin(); testitr !=simul.end(); testitr++)
    ^^^^^^^^^^^^^^^^^^^^^^^                         ^^^^^^^^^ 
```

虽然，`push_back`不会使迭代器无效，因为`std::list`我认为在使用它的地方设置迭代器更具可读性。根据您的回复，您还需要修改`copy constructor`：

```
test(const test &other): code(other.code), digit(other.digit) {}
                         ^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:47:06.413

如何使用`vector`

```
std::vector<test> simul;

 for(int i=0; i < (int)contents.length(); i++)
    {
        aisbn.setCode(contents);
        aisbn.setDigit(count+1);
        simul.push_back(aisbn);
        count++;
    } 
```

与容器相关的迭代器、指针和引用无效。否则，只有最后一个迭代器无效。

# jquery - 如何启动我的 jquery 小部件

> ID：16027297
> 
> 赞同：0
> 
> 时间：2013-04-16T01:28:15.520
> 
> 标签：jquery, html, jquery-widgets

我是 jquery 的新手，我正在尝试构建一个小部件来填充页面上的列表。但是，当我单击按钮时，我似乎无法弄清楚如何实际绑定此小部件。我还想在页面加载时运行小部件。

这是我创建的 jquery 小部件（我不确定这是否正确，因为我还没有测试它）：

```
(function ($) {
$.widget('MyProj.conversationreply', {
    options: {
    },
    _create: function () {
        var self = this,
            o = self.options,
            el = self.element,
            $this = $(self.element);

        this.self = self;

        this.ui = {};
        this.ui.widget = $this;
        this.ui.list = $this.find('.reply-list');
    },
    _init: function () {
        this.Load();
    },

    Load: function () {
        var self = this;

        $.ajax({
            url: '/People/Conversation/ListReplies',
            data: self.postData,
            error: function () {
                self._error();
            }
        }).done(function (response) {
            if (window.MyProj.isSuccessful(response)) {

                var html = [];
                $.each(response.list, function (i, item) {
                    var row = $(myProj.utils.template.GetTemplate('conversationReplyListItem').render(item));

                    html.push($('<div />').append(row).html());
                });

                self.ui.list.find('li').trigger('create');
                self.ui.list.listview('refresh');

                self._trigger("refreshed");
            } else {
                self._error(response);
            }
        });

    },

});
})(jQuery); 
```

# php - 如何将变量放在变量值PHP中

> ID：16027300
> 
> 赞同：-6
> 
> 时间：2013-04-16T01:28:29.600
> 
> 标签：php, variables

所以我想在这个链接中放一个变量值“90”，我不知道该怎么做。有谁知道如何做到这一点？抱歉这个愚蠢的问题我对 PHP 编程比较陌生。

```
$url = "http://junna.com/mamba90nina"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:38:37.840

您可以通过创建变量（`$value`正如我在下面所做的那样）然后使用连接`$url`字符串来做到这一点`.`

```
$value = '90';
$url = "http://junna.com/mamba" . $value . "nina"; 
```

# android - 结果android的嵌套集活动

> ID：16027301
> 
> 赞同：5
> 
> 时间：2013-04-16T01:28:37.777
> 
> 标签：android, android-intent

我有 3 个活动。A，B和C。A调用B，B调用C，C的结果应该在A中收到。你能建议怎么做吗？我在调用 C 之后使用 finish() 杀死 B。因此，C 的结果应该直接转到 A Activityonresult。可能吗？？。请提出您的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T01:41:50.860

不要杀死 B，在`A`开始活动`B`中使用`startActivityForResult`和在`B`开始活动`C`中使用`startActivityForResult`then 在 B`onActivityResult`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    super.onActivityResult(requestCode, resultCode, intent);

    setResult(RESULT_OK, intent);
    finish();
} 
```

其中intent 是发回的intent `C`。现在`A`将在`A onActivityResult`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T01:37:38.603

如果你从 A 呼叫 C 怎么办？类似于：A 调用 B；而不是从 B 调用 C，完成它并让 A 调用 C。

除非 C 的结果影响 B。在这种情况下，您别无选择，只能在 B 中处理 C 的结果，并在需要时从那里设置 A 的结果。

# javascript - 如何使用 javascript 访问 textarea 的值？

> ID：16027302
> 
> 赞同：0
> 
> 时间：2013-04-16T01:28:40.977
> 
> 标签：javascript, textarea

在一个 javascript 函数中，我正在根据从另一个站点获取的一些 JSON 数据创建一个文本区域。我在这里创建文本区域：

```
if(type == 'fill-in'){
    var textField = $('<center><div id="response-text"><textarea id="test" name="test" rows="10" cols="80">Answer here</textarea></div></center>').appendTo(panel.root);                        
} 
```

在另一个函数中，我需要获取此文本字段的值并将其发送到另一个站点。我已经以各种方式尝试过使用

```
document.getElementById("test").value 
```

但这给了我一个错误，如果我使用

```
document.getElementByName("test").value 
```

它告诉我该值未定义。文本区域不会自动将其值设置为您在其中键入的任何内容吗？有没有更好的方法来获取正在输入到 textarea 中的内容？

编辑：

getElementById 现在正在工作......不确定我之前在做什么，但我必须尝试过 3-4 次。我为这个毫无意义的问题道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:32:12.917

这是我对代码中实际发生的事情以及为什么你可能会被[变量提升搞砸的最佳](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)**猜测**。

我想您正在尝试动态添加您的文本区域，然后使用`var test = document.getElementById("test");`. 由于[变量提升](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)，声明的变量被**提升到当前作用域的顶部**。这将导致在添加文本区域**之前发生声明。**

由于不清楚 OP 的问题出在哪里，我确实注意到您使用`getElementsByName`不正确。

`getElementByName`应该是[`getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)。一个微妙但显着的差异。由于名称不需要唯一，因此该函数收集具有给定`name`属性的所有 DOM 元素的节点列表。

`getElementById`另一方面返回对元素本身的引用。

[**getElementsByName**](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)：

> 返回 HTML 文档中具有给定名称的元素列表。

[**getElementById**](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)：

> 通过其 ID 返回对元素的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:34:43.857

使用`getElementById`效果很好。您的 HTML 标记一定有问题 - 可能是另一个带有`id`of 的元素`test`。

[**工作小提琴：**](http://jsfiddle.net/VxSJ2/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T01:41:45.960

我假设 Teaxarea 元素已成功加载并存在于 DOM 中。在这种情况下，您的 javascript 甚至在 Textarea 元素在 DOM 中加载和准备好之前就正在加载和执行。

问候，

# azure - 如何为 Azure 网站配置缓存？

> ID：16027306
> 
> 赞同：2
> 
> 时间：2013-04-16T01:29:12.540
> 
> 标签：azure, azure-web-app-service

我试图在一个角色中设置缓存，但我的文档说它需要在同一个 CloudServices 发布项目中才能访问它......

这是我设置缓存集群所遵循的文档。 [http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

我的问题是我的网站是我发布到 Azure 网站的普通 mvc 项目。它不是 WebRole。所以

```
<autoDiscover isEnabled="true" identifier="[cache cluster role name]" /> 
```

绝对不会为我工作。

有没有办法获得缓存集群所在的 ip + 端口和一些凭据，并设置我的网站以能够使用缓存客户端并访问它？

如果没有，有人能给我更多关于如何设置 Windows Azure 共享缓存的最新信息吗？该文档似乎已过时，因为我找不到在管理门户中创建共享缓存的选项... [http://msdn.microsoft.com/en-us/library/windowsazure/gg618005.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg618005.aspx)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:30:56.137

如果您被重定向到新的 HTML 门户，您可以单击屏幕右上角的用户名并选择“以前的门户”链接以返回旧的 Silverlight 门户。

# asp.net - 使用 SPDataSource 对 asp.net GridView 进行排序

> ID：16027310
> 
> 赞同：1
> 
> 时间：2013-04-16T01:29:32.207
> 
> 标签：asp.net, sharepoint, sorting, gridview

我想通过单击列的标题对我的 GridView 进行排序。到目前为止，我声明了一个 SPDataSource

```
<SharePoint:SPDataSource
                runat="server"
                ID="SPdsInventarGrid"
                DataSourceMode="List"
                UseInternalName="true"
                Scope="Recursive"
                SelectCommand="<View><Query><Where><Or><Neq><FieldRef Name='EBS_x002e_CN_x002e_Inventar_x00210' /><Value Type='Text'>Open</Value></Neq><IsNull><FieldRef Name='EBS_x002e_CN_x002e_Inventar_x0028' /></IsNull></Or></Where></Query><ViewFields><FieldRef Name='Title'/><FieldRef Name='ID'/><FieldRef Name='EBS_x002e_CN_x002e_Inventar_x0028'/><FieldRef Name='EBS_x002e_CN_x002e_Inventar_x00210'/><FieldRef </ViewFields></View>">
                <SelectParameters>
                    <asp:Parameter Name="ListName" DefaultValue="Inventar" />
                </SelectParameters>
            </SharePoint:SPDataSource> 
```

然后我根据数据源创建了我的网格

```
 <asp:GridView Visible="true" Width="100%"
                ID="gvInventar"
                AutoGenerateColumns="false" runat="server" CellPadding="2" AllowPaging="false" AllowSorting="true" OnSorted="gvInventar_Sorted" OnSorting="gvInventar_Sorting" GridLines="None" DataSourceID="SPdsInventarGrid" OnRowCommand="gvInventar_RowCommand">
                <Columns>
                    <asp:CommandField ButtonType="Image" ShowEditButton="true" EditImageUrl="/_layouts/images/edit.gif" UpdateImageUrl="/_layouts/images/save.gif" CancelImageUrl="/_layouts/images/delete.gif" />

                    <asp:TemplateField HeaderText="ID">
                        <ItemTemplate>
                            <asp:Label Text='<%# Bind("ID") %>' runat="server" ID="lblIdProduct"></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Title" >
                        <ItemTemplate>
                            <asp:Label Text='<%# Bind("Title") %>' runat="server" ID="lblTitleProduct" ></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Product" SortExpression="Product">
                        <ItemTemplate>
                            <asp:Label Text='<%# Bind("EBS_x002e_CN_x002e_Inventar_x0028") %>' runat="server" ID="lblProduct" "></asp:Label>
                        </ItemTemplate>

                </Columns>
    </asp:GridView> 
```

现在，我有这个函数，我想将当前查询作为字符串获取并在之前添加`<OrderBy>`（我的字段），`<Query>`但是我收到一个错误，说 DataSource 已经被声明（这是真的，因为我想在 asp 中声明）

```
protected void gvInventar_Sorting(object sender, GridViewSortEventArgs e)
    {
        SPQuery q = new SPQuery();
        q.Query = SPdsInventarGrid.SelectCommand;
        switch (e.SortExpression)
        {
            case "Product":
                if (e.SortDirection == SortDirection.Ascending)
                {
                    gvInventar.DataSource = q.Query;
                    gvInventar.DataBind();
                }
                else
                {
                }
               break;
        }
    } 
```

即使它不以这种方式工作，我也不认为修改 Query 是解决方案。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:29:13.923

您无需编写任何自定义代码即可通过单击列标题对 gridview 进行排序，您只需将 的`SortExpression`属性设置`TemplateField`为所需的列名，例如：

```
<Columns>
    <asp:TemplateField HeaderText="ID" SortExpression="ID">
        <ItemTemplate>
            <asp:Label Text='<%# Bind("ID") %>' runat="server" ID="lblIdProduct" />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Title" SortExpression="Title">
        <ItemTemplate>
            <asp:Label Text='<%# Bind("Title") %>' runat="server" ID="lblTitleProduct" />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Product" SortExpression="EBS_x002e_CN_x002e_Inventar_x0028">
        <ItemTemplate>
            <asp:Label Text='<%# Bind("EBS_x002e_CN_x002e_Inventar_x0028") %>' runat="server"
                ID="lblProduct" />
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

现在您可以对所有 3 列进行排序：

![在此处输入图像描述](https://i.stack.imgur.com/xfhNo.jpg)

# jquery - IE缓存ajax请求不执行javascript函数

> ID：16027314
> 
> 赞同：0
> 
> 时间：2013-04-16T01:29:54.497
> 
> 标签：jquery, ajax, internet-explorer, caching, browser

我在客户端通过 jQuery.getScript 加载了一个 javascript 文件，并且我在服务器端设置了 1hr 浏览器缓存的缓存控制标头。看起来 IE 缓存了 ajax 请求，并且文件中存在的函数不在 IE 中执行。在 getScript 调用中设置 false 是否会覆盖从服务器端设置的 1hr 缓存控制标头？

```
var jsCache = true;
    if($.browser.msie){
        jsCache = false;
    }
        if(!initialized){

            $.getScript('thatjsfileurl', function() { 
             $("#welcome").pluginInit({
                start:'newPage'
             });  
             initialized = true;
            },jsCache);
        } 
```

注意：还有Akamai到位，所以不能在servlet端设置浏览器检测代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:10:10.647

根据 getScript的[jQuery 文档，调用](http://api.jquery.com/jQuery.getScript/)没有缓存设置参数，`getScript()`因此您无需对 jsCache 变量执行任何操作。

您可以在 URL 中添加时间戳编号并绕过任何 IE 缓存。

```
 if(!initialized) {
        $.getScript("thatjsfileurl" + "?now=" + new Date().getTime(), function() { 
            $("#welcome").pluginInit({
               start:'newPage'
            });  
            initialized = true;
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:15:25.563

通过测试我发布的上述代码，我自己想出了答案。当我们将变量缓存设置为 false 时，浏览器会覆盖服务器端标头变量（如 cache-control: 1hr 等）。每次 IE 浏览器在缓存设置为 false 时从服务器获取新副本。

```
var jsCache = true;
    if($.browser.msie){
        jsCache = false;
    }
        if(!initialized){

            $.getScript('thatjsfileurl', function() { 
             $("#welcome").pluginInit({
                start:'newPage'
             });  
             initialized = true;
            },jsCache);
        } 
```

# c++ - C ++错误与'运算符不匹配：

> ID：16027315
> 
> 赞同：0
> 
> 时间：2013-04-16T01:30:00.450
> 
> 标签：c++

我正在学习如何使用向量，并且正在编写一个简单的程序，该程序获取一些信息并将其放在向量上，然后将其迭代回来。我的来源是

```
int main ()
{

    int answer= 1;
    int decide;
    int vectCount = 0;
    vector<animal> pet;

    while(answer > 0)
    {    

        pet.push_back(animal());
        cout << "enter the name of the pet" << endl;
        getline(cin,pet[vectCount].name);

            cout << "Please enter the age of the pet" << endl;
            cin >> pet[vectCount].age;

         cout << "enter the weight of the pet" << endl;
         cin >> pet[vectCount].weight;

        do
        {
        cout << "Please enter the size of the pet S/M/L" << endl;
        cin >> pet[vectCount].size;
        }while(pet[vectCount].size != 'L' 
        && pet[vectCount].size != 'M' 
        && pet[vectCount].size != 'S');

        answer = question(decide);

    }
    vector<animal>::iterator i;
    for(i = pet.begin(); i != pet.end(); ++i)
    {

        cout << "The name of the pet is " << *i->name << endl;
        cout << "The age of the pet is " << *i->age << endl;
        cout << "The weight if the pet is " << *i->weight << endl;
        cout << "The size of your pet is " << *i->size;
        if(*i->size == 'S')
        cout << "(-): meow" <<endl;
        if(*i->size == 'M')
        cout << "(---): woof" <<endl;
        if(*i->size == 'L')
        cout << "(------): moooo" <<endl;            
    }
    cout << "Exiting the program" << endl;

    cin.get();
    return 0;
} 
```

我得到的错误是：

> `no match for 'operator*' in '*(&i)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator-> [with _Iterator = animal*, _Container = std::vector<animal, std::allocator<animal> >]()->animal::name'`

谁能帮我找到问题的根源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:32:07.393

这个：

```
*i->size 
```

应该：

```
i->size 
```

运算符（在您的`->`情况下等于`(*i).size`）将自动服从`i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:33:03.743

您收到该错误是因为编译器正在尝试执行以下操作：

```
*(i->name) 
```

这是试图取消引用`i->name`，并且由于`i`是指向对象的指针`name`，它将失败。

而你想要的是：

```
(*i).name 
```

或者

```
i->name 
```

`i`在尝试将名称从结构中取出之前将取消引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:36:19.720

尝试通过更改删除“*”

```
 cout << "The name of the pet is " << *i->name << endl; 
```

至

```
 cout << "The name of the pet is " <<  i->name << endl; 
```

或者

```
 cout << "The name of the pet is " <<  (*i).name << endl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T01:33:36.363

你应该使用：

```
 i -> size 
```

或者

```
 (*i).size 
```

但不是你使用的方式。

# php - htaccess 非 www 到 www，同时保持准确的 url

> ID：16027317
> 
> 赞同：1
> 
> 时间：2013-04-16T01:30:08.587
> 
> 标签：php, .htaccess, zend-framework, mod-rewrite, centos6

我在我的 htaccess 中使用以下内容

```
RewriteCond %{HTTP_HOST} !^www
RewriteRule ^(.*)$ http://www.website.com [R=301,L] 
```

这有效，除了我有这样的网址`website.com/name?query=1`

重写是在输入带有非 www 的 url 时删除 /name

所以`website.com/name?query=1`将重写为`www.website.com/?query=1`

我也在使用 Zend Framework 并在使用时拥有默认的 /public 文件夹

```
RewriteCond %{HTTP_HOST} !^www
RewriteRule ^(.*)$ http://www.website.com/$1 [QSA,R=301,L] 
```

在重写它使链接看起来像这样`www.website.com//public/name?query=1`

我不需要它不写 //public 并且我不想更改站点的结构，因为有很多指向 /public 文件夹的指针

如何让 RewriteRule 将非 www 更改为 www 并且不删除 "name" ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:35:39.023

尝试这个。

```
# No W's to W's keeping all the URI items intact
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www\.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:38:12.840

```
RewriteCond %{HTTP_HOST} !^www
RewriteRule ^(.*)$ http://www.website.com/$1 [QSA,R=301,L] 
```

# ruby-on-rails - compass install bootstrap -> NoMethodError on line ["32"] ... sass-rails-3.2.6/lib/sass/rails/helpers.rb: undefined method `[]' for nil:NilClass

> ID：16027319
> 
> 赞同：0
> 
> 时间：2013-04-16T01:30:27.160
> 
> 标签：ruby-on-rails, twitter-bootstrap, compass-sass, bootstrap-sass

运行此命令后

```
compass install bootstrap 
```

我收到这条消息：

```
identical sass/styles.scss 
```

...

```
identical javascripts/bootstrap-typeahead.js
NoMethodError on line ["32"] of /Users/xxx/.rvm/gems/ruby-1.9.3-p327@favy/gems/sass-rails-3.2.6/lib/sass/rails/helpers.rb: undefined method `[]' for nil:NilClass
Run with --trace to see the full backtrace 
```

在 /Users/xxx/.rvm/gems/ruby-1.9.3-p327@favy/gems/sass-rails-3.2.6/lib/sass/rails/helpers.rb

```
 31     def resolver
 32       options[:custom][:resolver]
 33     end 
```

我尝试了一种解决方法-> [https://gist.github.com/castus/4044953](https://gist.github.com/castus/4044953)

```
def resolver
  if ::Rails::env == "production"
    options[:custom][:resolver]
  else
    Resolver.new(CompassRails.context)
  end
end 
```

&仍然没有运气:)

我的 config/compass.rb 中有这些东西

```
require 'bootstrap-sass' 
```

还有我的 Gemfile

```
source 'http://rubygems.org'

gem "paperclip"
gem 'bootstrap-sass', '~> 2.3.1.0'
gem 'compass-rails'
gem 'bootswatch-rails'

gem 'gmaps4rails'

gem 'rails', '3.2.13'
gem 'activerecord-postgresql-adapter'
gem 'devise'
gem 'sass-rails', '~> 3.2.3'
gem "haml"
gem "haml-rails"

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:05:43.297

如果您使用 Rails 和 Bootstrap-sass，则根本不需要“指南针”。Compass 适用于不使用 Rails 的网站。

以下是安装和引导 sass 的步骤

1.  将其添加到 Gemfile 并`bundle install`

2.  将 application.css 重命名为 application.css.scss

3.  删除application.css.scss中的所有注释，留空

4.  添加`@import bootstrap`

你完成了！将其视为普通的 css 文件并使用 @import 做任何你喜欢的事情。但没有更多`require`的评论！

# javascript - 调试 Javascript：了解如何调用特定函数

> ID：16027326
> 
> 赞同：1
> 
> 时间：2013-04-16T01:31:19.143
> 
> 标签：javascript, debugging

我正在开发一个 Web 应用程序，其中大部分代码都是用 javascript 编写的。这个应用程序使用了backbone.js，它有各种各样的事件监听器。一些视图函数正在监听模型更改事件、url 更改事件或用户交互。很难说出一个特定的函数是如何被调用的。有没有办法获取导致当前调用的函数调用的整个跟踪？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T01:35:29.283

在调试器的函数开始处设置断点。当断点被命中时，然后检查调试器中的调用堆栈，您可以看到导致该点的函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:39:45.343

Firebug for Firefox 将显示堆栈，一旦它在您设置的断点处停止。

您是否需要堆栈用于调试目的？

或者，您是否打算在代码中使用这些信息来做出某种决定？

如果是这种情况，您可以检查变量“this”的值。

# python-3.x - 如何使用 pySerial 模拟像 putty 这样的终端迭代

> ID：16027335
> 
> 赞同：0
> 
> 时间：2013-04-16T01:32:20.247
> 
> 标签：python-3.x, powerpoint, pywin32, win32com

我尝试使用 pySerial 构建一个简单的终端来与我的 PC 中的 COM1 交互，

我创建了 2 个线程，一个用于 READ，另一个用于 Write

然而，

```
def write_comport():
    global  ser,cmd, log_file
    print("enter Q to quit")
    while True:
        cmd = raw_input(">>:")
        # print(repr(var))

        if cmd=='Q':
            ser.close()
            sys.exit()
            log_file.close()
        else:
            ser.write(cmd + '\r\n')
            write_to_file("[Input]"+cmd, log_file)
            time.sleep(1)
        pass

def read_comport():
    global ser, cmd, log_file
    while True:
        element = ser.readline().strip('\n')
        if "~ #" in str(element):
            continue
        if cmd == str(element).strip():
            continue
        if "img" in str(element):
            print("got:"+element)
            beep()

        print element
        write_to_file(cmd, log_file)

    pass
def write_to_file(str,f):
    f.write(str)
    f.flush

def main():
    try:
        global read_thr,write_thr
        beep()
        port_num='COM4'
        baudrate=115200
        init_serial_port(port_num,baudrate)
        read_thr =Thread(target=read_comport)
        read_thr.start()
        write_thr =Thread(target=write_comport)
        write_thr.start()

        while True:
            pass
    except Exception as e:
        print(e)
        exit_prog() 
```

但是我的代码的行为不如 putty 或其他任何东西那么聪明。导致我的功能在阅读器完成时无法检测到。有没有更好的方法来实现这个目标？

顺便说一句，我尝试将日志实时保存到 txt 文件中。但是当我在进程运行期间打开文件时，似乎没有写入我的文本日志文件？

# graphics - 是否可以使用新图像克隆/重新打包精灵表？

> ID：16027339
> 
> 赞同：0
> 
> 时间：2013-04-16T01:32:51.363
> 
> 标签：graphics, cocos2d-iphone, textures, sprite-sheet

这是一个示例场景

项目 A 有一个 2048x2048 的 sprite sheet，解压后，有 50 张 png 图像分布在 sprite sheet 上。

项目 B 需要是一个克隆，但是，它有 50 个不同的 png 图像，它们以完全相同的尺寸和文件名重新创建，但它们是不同的图像。

你能让新图像出现在与项目 A 完全相同的位置吗？生成的精灵表是完全相同的尺寸，只是不同的图像？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:40:45.333

没有区别，你的 spritesheet 有多大。以及什么图像内容。对于您的程序，它只是带有描述的纹理，它允许使用该纹理的不同部分创建精灵帧，并使用精灵帧名称使它们成为别名。您可以拆分您的 spritesheet（创建两个而不是一个）、更改图片等。您唯一需要担心的是，如果您不想更改项目的代码，所有 spriteframe 应该具有相同的名称。哦，如果你不想改变位置，新的 spriteframes 必须有相同的尺寸。正如您所提到的，您已经遵循了这些要求，因此您可以随意使用新的 spritesheet。

# python - 如何在 python 中使用 Pymongo for mongodb 查找过去 5 秒内添加到表中的条目

> ID：16027340
> 
> 赞同：1
> 
> 时间：2013-04-16T01:32:59.430
> 
> 标签：python, mongodb, pymongo

我需要查找添加到我的 mongodb 集合中的条目，这些条目是在过去 10 秒内创建或添加的。

目前我没有时间戳作为我插入到集合中的文档的一部分。通过阅读谷歌的东西，我明白我可以使用 hte object id 以某种方式做到这一点，但我不明白我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:20:47.797

你可以试试：

```
from datetime import datetime
from bson.objectid import ObjectId

newdate = datetime.utcnow() + timedelta(seconds=-10)
dummy_id = ObjectId.from_datetime(newdate)

result = collection.find( { "_id": { "$gt": dummy_id } } ) 
```

# windows - 在 IE8 和 Chrome Windows 7 中悬停时列移动

> ID：16027341
> 
> 赞同：0
> 
> 时间：2013-04-16T01:33:00.007
> 
> 标签：windows, internet-explorer, google-chrome, css, hover

当我将鼠标悬停在行上的最后一个图像上时，我无法理解为什么列会移动。 [http://www.heritageglass.com.au/projects](http://www.heritageglass.com.au/projects)

在我的 Mac 上，它适用于所有浏览器。在 Windows 7 中，它适用于最新版本的 IE 和 Chrome，它**不适**用于 IE8 和 Chrome v26。- IE8 中的客户端视图，所以我必须尽可能接近它。

不幸的是，我无法向您展示测试结果，因为它们是在我们服务器上的开发站点上完成的，但这是我尝试过的，但没有运气：

*   DOCTYPE 有效。
*   添加`<meta http-equiv="X-UA-Compatible"content="IE=edge,chrome=1" />`到开发站点。
*   增加图像所在容器的宽度（组合完整）。
*   消除最后一个孩子的填充权（但仅适用于最后一个图像 - 无用）。
*   将负填充更改为负顶部和左侧。
*   位置：相对于静态和悬停状态。
*   消除边距并改为应用填充。
*   实际列上没有边框，只有图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:29:56.960

检查在 doctype 之前插入的任何空格或无关数据。如果有任何东西，包括空白，IE 将进入怪癖模式。

# prolog - Atan2 和 Prolog

> ID：16027344
> 
> 赞同：0
> 
> 时间：2013-04-16T01:33:07.010
> 
> 标签：prolog

为什么会`atan2(1,3).`产生`false`？

我希望它以弧度返回一个角度，如此处所述：[http ://www.swi-prolog.org/man/arith.html](http://www.swi-prolog.org/man/arith.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:18:29.917

因为您拥有的是事实数据库查询，而您想要的是数学评估。比较一下：

```
?- atan2(1,3).
ERROR: toplevel: Undefined procedure: atan2/2 (DWIM could not correct goal) 
```

对此：

```
?- X is atan2(1,3).
X = 0.3217505543966422. 
```

后一种形式，`is/2`需要使用来触发数学评估。

在更一般的说明中，在数学上下文之外，Prolog 函数不会“返回”，它们统一参数，因此诸如`atan2(1,3)`没有变量的语句应该只会让你`true`、`false`无限循环或其他错误。

# c - 使用指针数组调用函数

> ID：16027347
> 
> 赞同：1
> 
> 时间：2013-04-16T01:33:18.963
> 
> 标签：c, function, pointers, header, extern

我的程序中有以下文件，一个带有某些函数定义的头文件，以及一个带有函数体的程序。

**某事.h**

```
typedef struct _foo {
 int id;
 int lucky_number;
} foo;

typedef void (*pointer_fc)(foo *);

void first(foo *);

void second(foo *);

void third(foo *);

extern pointer_fc fc_bases[3]; 
```

**某事.c**

```
pointer_fc fc_bases[] = {first, second, third};

/* body of functions */ 
```

请注意，在标题中，我定义了一个指向函数的指针数组，并且在`something.c`程序中，函数与数组的每个元素相关联。

假设在某个时刻我需要在`main.c`程序中调用所有 3 个函数。有了这个，我如何使用 extern 指针数组在我的`main.c`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:52:31.443

如果`f1`如下声明为结构体的结构体指针变量`foo`，

```
foo *f1; 
```

然后你可以调用函数 first() 和 second() 如下，

```
pointer_fc fc_bases[] = {first, second};

(*fc_bases[0])(f1);

(*fc_bases[1])(f1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:00:55.270

调用函数指针时会自动取消引用，所以它很简单

```
foo f;
fc_bases[0](&f);
fc_bases[1](&f);
fc_bases[2](&f); 
```

# css - 修复 iframe 高度与包含 div 的高度完全相同

> ID：16027348
> 
> 赞同：1
> 
> 时间：2013-04-16T01:33:26.073
> 
> 标签：css, html, iframe

我有一个简单的 4 面板网页，主要使用 div 和 css 设置。面板 div 是页眉、页脚、菜单和内容。菜单和内容应该是具有相同高度的平行列。

在我将 iframe 放入内容 div 之前，一切正常。内容 div 然后变得比菜单 div 高，即使我将它们设置为相同的高度。我知道 iframe 是原因，因为当我取出 iframe 时不会发生这种情况，但实际上是内容 div（而不是 iframe）太高了。

我怎样才能解决这个问题？有人问了一些类似的问题，但建议的解决方案对我不起作用，除非我做错了什么。这是我的完整代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<style>
    body {
        margin: 0;
        padding: 0;
    }
    #header {
        background-color: #7D110C;
        height:100px;
    }
    #menu { 
        float:left;
        width:300px;
        background-color: lightGrey;
        min-height:500px; /* for modern browsers */
        height:auto !important; /* for modern browsers */
        height:500px; /* for IE5.x and IE6 */
    }
    #content { 
        margin-left:300px;
        background-color: white;
        min-height:500px; /* for modern browsers */
        height:auto !important; /* for modern browsers */
        height:500px; /* for IE5.x and IE6 */
    }
    #content iframe{
        width:100%;
        border:none;
        margin: 0;
        padding: 0;
        background-color: pink;
        min-height:500px; /* for modern browsers */
        height:auto !important; /* for modern browsers */
        height:500px; /* for IE5.x and IE6 */
    }
    #footer { 
        clear:both;
        background-color: #7D110C;
        height:100px;
    }
</style>
</head>

<body>
    <div id="header"></div>
    <div id="menu"></div>
    <div id="content"><iframe id="content_iframe" name="content_iframe"></iframe></div>
    <div id="footer"></div>
</body>

<script type="text/javascript">
    console.log( $('#content').css('height') );
    console.log( $('#content_iframe').css('height') );
</script>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:42:21.497

`height:auto !important;`覆盖`height:500px;`in`#content`和 in `#content iframe`。如果你去掉`height:auto !important;`两个 CSS 类中的 ，它就可以正常工作。[jsFiddle](http://jsfiddle.net/TjgfM/)

好的，这是真正的解决方法，只需将所有内容保持原样并添加`display: block`到`#content iframe`. 这解决了它。iframe 是内联框架，因此有额外的空白。[更新了 jsFiddle](http://jsfiddle.net/TjgfM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:44:31.077

如果你设置了一个固定`height:500px;`的并且 iframe 比这个高，你会在侧面得到一个滚动条。

如果您始终想要一个固定的高度，请同时删除`height: auto !important`和`min-height: 500px`并仅保留`height:500px`。

*   `height-auto`：浏览器计算高度。这是默认设置。
*   `min-height`: 定义最小高度

以下将始终具有相同的高度`menu`。`content`

**HTML**

```
<div id="wrapper">
  <div id="menu"></div>
  <div id="content"><iframe id="content_iframe" name="content_iframe"></iframe></div>
</div> 
```

**CSS**（只需将其添加到已经存在的）

```
#wrapper { display: table; }
#menu { display: table-cell; } /* Remove the float */
#content { display: table-cell; } /* Remove the float */ 
```

请注意，这不适用于 IE7 及以下版本。要么你必须对`menu`and`content`或 javascript 使用固定高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T01:44:54.617

对于现代浏览器，你可以试试这个：

添加`position:relative`到`#content`

从中删除宽度，高度，最小高度`#content iframe`并添加它：

```
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0; 
```

不过，不知道要为 IE 5 和 6 做什么。

# java - 对自定义要求的 hashmap 键进行排序

> ID：16027349
> 
> 赞同：0
> 
> 时间：2013-04-16T01:33:28.517
> 
> 标签：java

假设我有一个带键的哈希图

```
{Sean, Michael, John, Alan, Zach} 
```

现在我想对这些键进行如下排序

```
{John, Alan, Michael, Zach, Sean} 
```

上面的名字只是例子。我知道我们可以使用 TreeSort 进行排序。但是它只提供升序或降序排序。但是我上面的要求并没有具体的排序方式，但需要如上所述。我该如何做到这一点？请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:37:09.587

在字符串周围使用带有 java bean 包装器的自定义[比较器，比如 Integer？](http://java.sun.com/javase/6/docs/api/java/util/Comparator.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T01:42:37.603

hd1 的自定义比较器解决方案是执行此操作的典型方法。但是，如果您只想保留特定的顺序，则始终可以使用 a[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)并按该顺序插入条目。

> Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

要生成条目所在的映射`source`并且键迭代顺序由您指定，`keysInOrder`您可以执行以下操作：

```
public static <K, V>
Map<K, V> mapWithKeysInOrder(
    Map<K, V> source, Iterable<? extends K> keysInOrder) {
  Map<K, V> output = new LinkedHashMap<K, V>(source.size());
  for (K key : keysInOrder) {
    output.put(key, source.get(key);
  }
  return output;
} 
```

# c# - 如何使用字符串作为属性名称从嵌套对象组中查找对象属性值？

> ID：16027366
> 
> 赞同：5
> 
> 时间：2013-04-16T01:35:58.547
> 
> 标签：c#, asp.net-mvc-3

我有一组嵌套的对象，即一些属性是自定义对象。我想使用属性名称的字符串获取层次结构组中的对象属性值，以及某种形式的“查找”方法来扫描层次结构以查找具有匹配名称的属性，并获取其值。

这可能吗？如果可以，怎么办？

非常感谢。

编辑

类定义可能是伪代码：

```
Class Car
    Public Window myWindow()
    Public Door myDoor()
Class Window
    Public Shape()
Class Door
    Public Material()

Car myCar = new Car()
myCar.myWindow.Shape ="Round"
myDoor.Material = "Metal" 
```

有点做作，但我可以通过在某种形式的查找函数中使用魔术字符串“Shape”来“查找”“Shape”属性的值，从顶部对象开始。IE：

```
string myResult = myCar.FindPropertyValue("Shape") 
```

希望 myResult = "Round"。

这就是我所追求的。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T02:29:59.930

根据您在问题中显示的类，您需要递归调用来迭代您的对象属性。你可以重复使用的东西怎么样：

```
object GetValueFromClassProperty(string propname, object instance)
{
    var type = instance.GetType();
    foreach (var property in type.GetProperties())
    {
        var value = property.GetValue(instance, null);
        if (property.PropertyType.FullName != "System.String"
            && !property.PropertyType.IsPrimitive)
        {
            return GetValueFromClassProperty(propname, value);
        }
        else if (property.Name == propname)
        {
            return value;
        }
    }

    // if you reach this point then the property does not exists
    return null;
} 
```

`propname`是您要搜索的属性。你可以这样使用：

```
var val = GetValueFromClassProperty("Shape", myCar ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T01:41:10.100

是的，这是可能的。

```
public static Object GetPropValue(this Object obj, String name) {
    foreach (String part in name.Split('.')) {
        if (obj == null) { return null; }

        Type type = obj.GetType();
        PropertyInfo info = type.GetProperty(part);
        if (info == null) { return null; }

        obj = info.GetValue(obj, null);
    }
    return obj;
}

public static T GetPropValue<T>(this Object obj, String name) {
    Object retval = GetPropValue(obj, name);
    if (retval == null) { return default(T); }

    // throws InvalidCastException if types are incompatible
    return (T) retval;
} 
```

要使用这个：

```
DateTime now = DateTime.Now;
int min = GetPropValue<int>(now, "TimeOfDay.Minutes");
int hrs = now.GetPropValue<int>("TimeOfDay.Hours"); 
```

请参阅此[链接](https://stackoverflow.com/a/1954663/1129189)以供参考。

# python - 除了超类外，两个 Python 类相同 - 如何避免重复？

> ID：16027367
> 
> 赞同：2
> 
> 时间：2013-04-16T01:36:02.050
> 
> 标签：python, oop, inheritance

我在 Python 类 ( `classa`) 中包含了一些功能。`classa`从另一个类继承`supera`。

我想要完全一样的功能，`classa`除了我想从`superb`.

我可以将类复制`classa`到一个新类`classb`，然后更改超类，`classb`但显然这非常俗气，维护头痛，而且我很确定有更好的方法 - 谁能告诉我它是什么？

* * *

**编辑**：感谢到目前为止的回答。我最初应该说 my`classa`在其方法中调用 super 以调用`supera`方法。在将 mixins 视为一种选择时，这似乎具有一定的意义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T01:39:12.490

如果不需要调用任何方法，这可以通过 Python 的多重继承来完成`super()`。

```
class Dog(object):
    name = "Spot"

class Cat(object):
    name = "Whiskers"

class SpeakingAnimalMixin(object):
    def speak(self):
        print "My name is", self.name, "and I can speak!"

class SpeakingDog(SpeakingAnimalMixin, Dog):
    pass

class SpeakingCat(SpeakingAnimalMixin, Cat):
    pass

SpeakingDog().speak() 
```

> 我的名字是 Spot，我会说话！

* * *

如果确实需要`super()`从方法调用，则需要动态创建类。这可以正常工作，但生成的类的名称将不太有用，并且 IDE 和其他静态分析工具可能不太有用。

您可以使用函数创建类，将超类作为参数传递：

```
def make_speaking_animal_class(SpeechlessAnimal):
    class SpeakingAnimal(SpeechlessAnimal):
        def get_name(self):
            return "Speaking " + super(SpeakingAnimal, self).get_name()

        def speak(self):
            print "My name is", self.get_name()

    return SpeakingAnimal

class Dog(object):
    def get_name(self):
        return "Spot"

class Cat(object):
    def get_name(self):
        return "Whiskers"

SpeakingDog = make_speaking_animal_class(Dog)
SpeakingCat = make_speaking_animal_class(Cat)

SpeakingCat().speak() 
```

> 我的名字是会说话的胡须

但是如前所述，该类的`__name__`属性可能不是您所期望的。

```
print SpeakingDog
print SpeakingDog() 
```

```
<class '__main__.SpeakingAnimal'>
<__main__.SpeakingAnimal object at 0x1004a3b50> 
```

您可以通过自己为它们分配唯一`__name__`属性来解决此问题：

```
SpeakingDog.__name__ = 'SpeakingDog'
print SpeakingDog 
```

```
<class '__main__.SpeakingDog'> 
```

^(（感谢[Andrew Jaffe](https://stackoverflow.com/users/12266/andrew-jaffe)在答案中提出这个建议，但他删除了它。）)

还有另一种动态创建类的方法，但我不鼓励你使用它，除非你需要；就更不清楚了。[除了确定对象的类之外，该`type`函数](http://docs.python.org/2/library/functions.html#type)还有第二个用途：它可用于动态创建新类。

以这种方式使用时，该`type`函数采用三个参数：

*   `name`,`__name__`新班级将有。
*   `bases`，新类将继承的基类元组。
*   `dict`，包含新类将具有的方法和属性的字典。

你可以像这样使用它：

```
def make_speaking_animal_class(SpeechlessAnimal, name):
    def get_name(self):
        return "Speaking " + super(SpeakingAnimal, self).get_name()

    def speak(self):
        print "My name is", self.get_name()

    bases = (SpeechlessAnimal,)

    # We need to define SpeakingAnimal in a variable so that get_name can refer
    # to it for the super() call, otherwise we could just return it directly.
    SpeakingAnimal = type(name, bases, {
        'get_name': get_name,
        'speak': speak
    })

    return SpeakingAnimal

class Dog(object):
    def get_name(self):
        return "Spot"

class Cat(object):
    def get_name(self):
        return "Whiskers"

SpeakingDog = make_speaking_animal_class(Dog, 'SpeakingDog')
SpeakingCat = make_speaking_animal_class(Cat, 'SpeakingCat')

SpeakingDog().speak()
SpeakingCat().speak() 
```

> 我的名字是Speaking Spot
> 我的名字是Speaking Whiskers

# sql - vb.net 中的内连接 SQL 语法

> ID：16027369
> 
> 赞同：0
> 
> 时间：2013-04-16T01:36:36.620
> 
> 标签：sql, vb.net, join

这是我的选择 SQL 语法来显示类别选择，但我需要做的是显示根据设备 ID 选择的相应类别

我有 2 张桌子，tblOfficeEquipmentCategory 和 tblOfficeEquipmentProfile

我需要内部加入 tblOfficeEquipmentProfile 以便我可以添加 WHERE equipment_id = '"txtid.text"'

相应的 SQL 语法是什么

```
Public Sub DisplayCategory()
    'based on oe_id
    Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim sqlcommand As SqlCommand

    sqlconn.Open()
    Dim da As New SqlDataAdapter("select * from tblOfficeEquipmentCategory", sqlconn)
    Dim dt As New DataTable
    da.Fill(dt)
    cmbCategory.DataSource = dt
    cmbCategory.ValueMember = "CAT_Name"
    cmbCategory.DisplayMember = "CAT_ID"
    sqlconn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:40:23.423

假设`equipment_id`位于 table`tblOfficeEquipmentProfile`和将`CAT_ID`其链接到 table的列上`tblOfficeEquipmentCategory`。

```
SELECT  a.CAT_Name
FROM    tblOfficeEquipmentCategory a
        INNER JOIN tblOfficeEquipmentProfile b
            ON a.CAT_ID = b.CAT_ID
WHERE   b.equipment_id = @ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:42:20.020

最好开始考虑如何将数据访问与演示代码分开。你需要这样的东西：

```
Public Function DisplayCategory() 
    cmbCategory.ValueMember = "CAT_Name"
    cmbCategory.DisplayMember = "CAT_ID"
    cmbCategory.DataSource = GetEquipmentCategories(Convert.ToInt32(txtid.text))
End Sub

Public Function GetEquipmentCategories(ByVal EquipmentID As Integer) As DataTable
    'based on oe_id

    Dim sql As String = "SELECT a.CAT_ID, a.CAT_Name" & _ 
                       " FROM tblOfficeEquipmentCategory a" & _
                       " INNER JOIN tblOfficeEquipmentProfile b ON a.CAT_ID = b.CAT_ID" & _
                       " WHERE b.equipment_id = @ID"

    Dim result As New DataTable
    Using cn New SqlConnection("server=SKPI-APPS1;Database=EOEMS;integrated security=true"), _
          cmd As new SqlCommand(sql, cn)

        cmd.Parameters.Add("@ID", SqlDbType.Int).Value = EquipmentID

        cn.Open()
        Using rdr As SqlDataReader = cmd.ExecuteReader
            result.Load(rdr)
        End Using
    End Using
    Return result
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T08:08:32.283

```
 Try
        con.Open()
        Dim cmd As New OleDb.OleDbCommand
        Dim dt As New DataTable
        Dim da As New OleDb.OleDbDataAdapter
        Dim sql = "Select  Authors.Au_ID, Authors.Author, [Title Author].ISBN FROM(Authors INNER JOIN [Title Author] ON Authors.Au_ID = [Title Author].Au_ID)"
        cmd.Connection = con
        cmd.CommandText = sql
        da.SelectCommand = cmd
        da.Fill(dt)
        DGV2.DataSource = dt
        con.Close()
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-24T07:48:36.610

```
 Dim sql = "Select  Authors.Au_ID, Authors.Author, [Title Author].ISBN FROM(Authors INNER JOIN [Title Author] ON Authors.Au_ID = [Title Author].Au_ID)" 
```

# javascript - Firebase 排行榜防止作弊

> ID：16027370
> 
> 赞同：3
> 
> 时间：2013-04-16T01:36:38.053
> 
> 标签：javascript, firebase

我需要为客户端在基于 firebase (javascript) 的多人游戏中实现排行榜/得分系统。

现在我的问题是有办法防止在排行榜上作弊吗？

问题是如果我让玩家/客户在游戏结束时写下他们自己的分数，客户总是可以重写分数。

如果可能的话，我不想混淆我的代码。

# sql - 使用 sum 函数过滤掉表中的随机行

> ID：16027371
> 
> 赞同：2
> 
> 时间：2013-04-16T01:36:42.320
> 
> 标签：sql, sqlite

我有一个使用 sqlite 设计的费用表我想构造一个查询以使用表的金额列上的 sum 函数过滤掉一些随机行。

样品`Expense`表

```
Clients          Amounts
A                  1000
B                  3000
C                  5000
D                  2000
E                  6000 
```

假设我希望上表中的总和为 10,000，我想构建一个查询，该查询将返回任意数量的随机行，总和为 10,000

到目前为止我试过

```
SELECT * 
FROM Expense Table 
GROUP BY (Clients) 
HAVING SUM(AMOUNT)=10000 
```

但我什么也没生成

我也尝试过随机函数，但我假设我需要指定一个 LIMIT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:21:39.050

SQLLite 不支持 CTE（特别是递归的），所以我想不出一个简单的方法来做到这一点。也许你最好在你的演示逻辑中这样做。

`UNION`通过 SQL 的一种选择是将多个语句串在一起。使用上面的示例数据，您需要字符串 3`UNIONs`来获得结果：

```
select clients
from expense
where amounts = 10000
union 
select e.clients || e2.clients
from expense e
   inner join expense e2 on e2.rowid > e.rowid
where e.amounts + e2.amounts = 10000 
union 
select e.clients || e2.clients || e3.clients
from expense e
   inner join expense e2 on e2.rowid > e.rowid
   inner join expense e3 on e3.rowid > e2.rowid
where e.amounts + e2.amounts + e3.amounts = 10000 
```

导致 ABE 和 BCD。这适用于总和为 10000 的任何客户组，从 1 到 3。您可以串起更多联合以获取更多客户——这只是一个示例。

[SQL 小提琴演示](http://sqlfiddle.com/#!7/f3b92/1)

（这是一个最多包含 4 个客户端的示例 - [http://sqlfiddle.com/#!7/b01cf/2](http://sqlfiddle.com/#!7/b01cf/2)）。

如果需要，您可能可以使用动态 sql 来构建无限查询，但是，我确实认为这更适合演示方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:04:47.817

您所描述的是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)（在您的情况下，该值等于重量）。

这可以在 SQL 中解决（参见 sgeddes 的答案），但由于 SQL 的面向集合的设计，计算相当复杂且速度非常慢。

将金额读入程序并在那里解决问题会更好（请参阅[维基百科页面上的伪代码](http://en.wikipedia.org/wiki/Knapsack_problem#0-1_knapsack_problem)）。

# html - 嵌入的 youtube 视频打破了我固定的左栏导航菜单

> ID：16027377
> 
> 赞同：1
> 
> 时间：2013-04-16T01:37:33.717
> 
> 标签：html, css, iframe, css-position

我有一个两列布局我有一个包含左右 div 的主 div。

1.  正确的 div 是 float: right
2.  左边的 div 是位置：固定

这些 div 中的每一个都有另一个主 div，我用它来定位内容。在我的右侧 div 中，我有另一个 div 只是为了在其中一个 div 中设置我的内容我有这个

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/72t6iauvX1E?wmode=transparent?rel=0" frameborder="0" allowfullscreen></iframe> 
```

在 Chrome 中，左 div 永远不会保持固定。Safari 在我播放嵌入视频之前它一直保持不变。在 Firefox 中运行良好

我已经使用 ?wmode=transparent 来尝试解决这个问题，但没有运气。

这是我的布局的模型，它已经嵌入了 youtube 视频，并且您可以看到左侧的粉红色 div 未固定删除嵌入的 iframe，您将看到 div 现在已固定，因为其他内容滚动。

[http://jsfiddle.net/2TUaP/](http://jsfiddle.net/2TUaP/)

这真让我抓狂。同样，我已经尝试添加 ?wmode=transparent 和 ?wmode=opaque 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T04:16:26.687

我在列 div 和 YouTube 嵌入方面遇到了类似的问题。大多数（不是全部）视频（使用 PHP 从 MySql DB 中提取的代码）仅在黑匣子中播放音频。有时，该框会从列中弹出并堆叠在 div 下方。在 Safari 中同样的问题，在 Firefox 中运行良好。Webkit 问题？

[http://www.centerproductionsinc.com](http://www.centerproductionsinc.com) 选择任何艺术家资料

我不得不将嵌入堆叠在列 div 之外作为一种解决方法，直到找到真正的解决方案。

# asp.net - iis 将子域重定向到同一子域上的子文件夹

> ID：16027389
> 
> 赞同：4
> 
> 时间：2013-04-16T01:39:04.043
> 
> 标签：asp.net, iis, redirect, web-config, rewrite

我有一个 IIS 站点，我尝试使用 ReWrite 2.0 将特定子域重定向到子文件夹。在我的 IIS 站点中，我将它绑定到两个不同的域：

*   one.example.com
*   两个.example.com

当人们访问 one.example.com 时，我希望它什么也不做。当人们访问[http://two.example.com](http://two.example.com)我希望他们被重定向到[http://two.example.com/subfolder](http://two.example.com/subfolder)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T14:05:32.167

您需要为 HTTP_HOST 添加匹配条件

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="two.example.com Redirect" stopProcessing="false">
                <match url="^\/?$" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern=".*two\.example\.com.*" />
                </conditions>
                <action type="Redirect" redirectType="Found" url="http://two.example.com/subfolder/{R:0}" />
            </rule>
       </rules>
    </rewrite>
</system.webServer> 
```

这是该模块的一个不错的整体参考： [http ://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)

一个很晚的答案，但希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:04.797

我想您使用的是 II7 或更高版本？

IIS 有一个简单的 HTTP 重定向功能，该功能适用​​于 IIS 中列出的每个站点。

确保您在功能视图中。单击您要重定向的站点（在您的情况下为[http://two.example.com](http://two.example.com)）

你应该看到这个。双击 HTTP 重定向![IIS 视图](https://i.stack.imgur.com/2frZm.png)

你应该看到这个。在此处输入您的重定向 URL（在您的情况下为[http://two.example.com/subfolder](http://two.example.com/subfolder)）

![HTTP 重定向视图](https://i.stack.imgur.com/Rt33c.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T08:12:46.433

[这个现有的问题](https://stackoverflow.com/a/7031732/1453921)应该可以解决您的问题

```
<system.webServer>
<rewrite>
    <rules>
        <rule name="Root Hit Redirect" stopProcessing="true">
            <match url="^$" />
            <action type="Redirect" url="/menu_1/MainScreen.aspx" />
        </rule>
    </rules>
</rewrite>
</system.webServer> 
```

# cuda - 用于研究目的的 nVidia GPU：浮点精度

> ID：16027391
> 
> 赞同：3
> 
> 时间：2013-04-16T01:39:19.160
> 
> 标签：cuda, gpgpu, nvidia, floating-point-precision

我正在做我的 AI 博士研究，我已经到了必须开始为我的测试平台使用 CUDA 库的部分。我以前玩过 CUDA，对 GPGPU 的工作原理等有基本的了解，但我对浮点精度感到困扰。

看着 GTX680，我看到 FP64：1/24 FP32，而 Tesla 在 1.31 TFLOPS 有完整的 FP64。我很明白，一张是游戏卡，一张是职业卡。

我问的原因很简单：我买不起特斯拉，但我可能能买到两台 GTX680。虽然主要目标是拥有尽可能多的 CUDA 内核和内存，但浮点精度可能会成为一个问题。

我的问题是：

1.  游戏 GPU 中的小浮点精度有多少折衷？
2.  32位浮点精度的1/24是不是太小了？尤其是与之前的 1/8 FP32 费米相比
3.  由于浮点精度较小，是否存在计算结果错误的风险？即在支持向量机、VSM、矩阵运算、深度信念网络等中，由于浮点数较小，我是否会对算法的结果有问题，或者它是否仅仅意味着运算将花费更长的时间/使用更多的内存？

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T02:12:07.070

这些都是非常主观的问题。

`float`您是否了解 C 或 C++与数据类型之间的区别并不完全清楚`double`。FP32 与 FP64 指的是`float`C`double`或 C++ 中的和。您提到的 1/8 和 1/24 的数字不会影响*精度*，但它们会影响*吞吐量*。您提到的所有 GPU 都具有一些 FP64 双精度功能，因此差异不归结为*性能*，而是*性能*。

了解您关心的代码是否依赖于双精度浮点对您来说非常重要。仅仅说“矩阵运算”之类的东西来理解 FP32 ( `float`) 或 FP64 ( `double`) 是否重要是不够的。

如果您的代码依赖于 FP64 `double`，那么这些性能比（1/8、1/24 等）将是相关的。但是你的代码应该仍然可以运行，也许会更慢。

您还以可能导致混淆的方式使用了一些术语。Tesla 指的是 NVIDIA GPGPU 系列计算产品。最好是指特斯拉家族的特定成员。由于您提到 1.31 TFlops FP，您指的是 Tesla K20X。请注意，K20X 还具有 FP64 吞吐量和 FP32 吞吐量之间的比率（即它甚至可以比 FP32 代码上的 1.31 TFlops 更快）。

如果您的算法依赖于`double`它们仍然可以在您提到的任何产品上运行，并且无论产品如何，结果的准确性都应该相同，但是性能会更低，具体取决于产品。如果您的算法依赖于`float`，那么它们在任何给定产品上的运行速度都会比 快`double`，假设浮点吞吐量是限制因素。

您可能还想考虑[GeForce GTX Titan](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-titan/specifications)。它具有与 Tesla K20/K20x 大致相当的双精度浮点性能。

# javascript - Richfaces：如何使用 javascript 设置工具提示的值

> ID：16027392
> 
> 赞同：0
> 
> 时间：2013-04-16T01:39:20.107
> 
> 标签：javascript, jsf, richfaces

有什么意见吗？我不想使用这样的格式：

```
<rich:toolTip followMouse="true" direction="top-right" mode="ajax" value="#{bean.toolTipContent}" horizontalOffset="5" 

    verticalOffset="5" layout="block">

    <f:facet name="defaultContent">

        <f:verbatim>DEFAULT TOOLTIP CONTENT</f:verbatim>

    </f:facet>

</rich:toolTip> 
```

因为我的 inputtext 没有在我的 java bean 中绑定值。谁能给点建议？

# php - 将 HTML 实体放入 MySQL 数据库时解码它们

> ID：16027395
> 
> 赞同：2
> 
> 时间：2013-04-16T01:39:35.670
> 
> 标签：php, mysql, encoding

我正在尝试正确写入 MySQL 数据库，但它给了我 HTML 实体而不是我想要的字符。

我的页眉包含...

```
<meta charset="utf-8"> 
```

这是我正在使用的代码...

```
$team_name = "Ranieri&#39;s Ghost";
$team_name_converted = html_entity_decode($team_name, ENT_COMPAT, "UTF-8");

mysqli_query($con,"INSERT INTO mydbname (team_name) VALUES ('$team_name_converted') ");

echo $team_name_converted; 
```

*   回显到屏幕：`Ranieri's Ghost`
*   MySQL数据库中的条目：`Ranieri&#39;s Ghost`

我知道这很容易受到 SQL 注入的影响，但我会在修复后对其进行排序。

SQL 表行是一个 VARCHAR (40)，我尝试了排序规则“utf8_roman_ci”、“latin1_swedish_ci”、“utf8_swedish_ci”、“utf8_general_ci”和其他一些，但它似乎没有太大变化。

知道如何让它在`Ranieri's Ghost`没有特殊字符的情况下写入我的 MySQL 数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:41:56.037

您的查询失败，因为您没有转义撇号。您可以通过使用准备好的语句轻松完成此操作（无论如何您都应该使用 mysqli）。在此期间，`$team_name_converted = mysqli_real_escape_string($con, $team_name_converted)`会做。

编辑：`ENT_COMPAT`转换双引号但不转换单引号。使用`ENT_QUOTES`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:43:41.377

改为这样做：

```
$team_name = "Ranieri&#39;s Ghost";
$team_name_converted = html_entity_decode($team_name, ENT_COMPAT, "UTF-8");

$val = mysqli_real_escape_string($con, $team_name_converted);
mysqli_query($con,"INSERT INTO mydbname (team_name) VALUES ('$team_name_converted') ");

echo $team_name_converted; 
```

# paypal - Opencart 贝宝标准未处理

> ID：16027396
> 
> 赞同：0
> 
> 时间：2013-04-16T01:39:41.280
> 
> 标签：paypal, opencart

我疯狂地用谷歌搜索，找不到解决方案。我正在使用带有贝宝标准的 opencart 1.5.5.1。它处理并返回到站点，站点表示订单已处理。但是，用户订单历史记录或管理仪表板中没有显示任何内容。这是设置的概要。

*   交易方式-销售
*   所有状态设置为匹配其标题，即完成状态设置为完成
*   状态设置为启用

关于贝宝网站偏好

*   自动返回：开
*   返回网址[http://www.mydomain.com/store/index.php?route=payment/pp_standard/callback](http://www.mydomain.com/store/index.php?route=payment/pp_standard/callback)
*   支付数据传输：开启
*   加密网站付款：关闭
*   快速结帐：没有
*   即时支付通知网址：[http ://www.mydomain.com/store/index.php?route=payment/pp_standard/callback](http://www.mydomain.com/store/index.php?route=payment/pp_standard/callback)

所以核心问题是用户被带到paypal并在支付后返回到网站，但是，订单不会出现在用户端或所有者/管理员端。任何人有任何想法可能导致麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:46:38.653

好吧，我想通了。这完全是因为我的网上商店密码受到保护。在我开发它时，我不希望它向公众开放，这就是导致付款不回拨到我的网上商店的原因。感谢大家的帮助！

# javascript - 动态创建/创建变量的字典并打印

> ID：16027397
> 
> 赞同：3
> 
> 时间：2013-04-16T01:39:44.740
> 
> 标签：javascript

我想在 alert 中打印 dict a ，（有可能吗？）或在第三个文本区域（三个）中打印`id=p`. 我读过[这个问题](https://stackoverflow.com/questions/957537/how-can-i-print-a-javascript-object)，我用过

```
document.getElementById("p").value=JSON.stringify(a);;
    alert("myObject is " + a.toSource());
    console.log(a); 
```

这些不起作用。例子是：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Example - print the dict</title>
</head>
<body>

<input id = 'button1' type = 'button' value = 'print the dict' onclick="updateHistory()"/>

<script type = 'text/javascript'>

var count ="?foo=1&oo=298529982";

function updateHistory()
{

 var a = new Array();

for (var i = 0; i < document.formparam.elements.length; i++)
{

    var field = document.formparam.elements[i];
    a[field.name] = field.value;
}

document.getElementById("p").value=JSON.stringify(a);;
alert("myObject is " + a.toSource());
console.log(a);
}

</script>
<form method="GET" name="formparam" id="formparam" ><table><tr><td><textarea name="name" >john</textarea></td><td><textarea name="surname">jackold</textarea></td></tr></table></form>
<textarea id="p"></textarea>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:57:03.173

在数组上使用`JSON.stringify()`将像这样遍历数组：

```
for (var i = 0; i < a.length; ++i) {
    // process value of a[i]
} 
```

但是因为您使用 向对象添加属性，所以`a[field.name]`这些属性不会添加到数组项列表中，这与`a.push(value)`. 因此，`JSON.stringify()`将打印`[]`.

您应该：

1.  定义`a`为对象，即`var a = {};`

2.  自己迭代键：

    ```
    for (var k in a) {
        if (a.hasOwnProperty(k)) {
            // process value of a[k]
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T01:48:14.340

`var a = new Array();`

应该

`var a = {};`或者`var a = new Object();`

JavaScript 中没有字典，但是，您可以将对象用作键/值存储。要以 JSON 形式发出警报`object`，您只需执行`alert(JSON.stringify(a));`.

# c# - VB.NET 64bit COM 与 c# 引用的帮助程序程序集类

> ID：16027400
> 
> 赞同：0
> 
> 时间：2013-04-16T01:39:57.303
> 
> 标签：c#, vb.net, excel, 64-bit, com-interop

有一个 VB.net 64 位项目要在 Excel 64 位中引用。我有 VB.net 项目引用的 ac# helper 类。我已经签署了所有项目，并为 Make Com Visible 设置了 VB.net 项目。它构建并运行良好。 **当我将我的 VB.net 项目设置为注册 COM 互操作时，我收到一个错误。**

错误 120 无法注册程序集“E:\KSP\KSP\SealData\bin\x64\Debug 64***[VB].dll”。无法加载文件或程序集“[C# 程序集名称]，版本=1.0.0.0，文化=中性，PublicKeyToken=c89dd9761ce81049”或其依赖项之一。该系统找不到指定的文件。SealDataStage

C# 项目已签名 C# 并在 VB 项目中引用。在某些时候，我得到了编译，安装项目为 VB.net 项目创建了文件和 tlb。现在我无法让它再次构建。我查看了 GAC，但在列表中没有看到我的 dll。所以我不明白这将如何成为一个 gac 冲突。但我不知道该怎么做。

这是我正在关注的帖子，以获得使用 Excel 的解决方案。 [http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)

**更新信息：** 我尝试了以下方法。

1.  引用了 Helper dll
2.  com 和 signed 的所有可能组合。
3.  我使用相同的密钥来签署跨项目和不同的项目

**我让它工作 排序：** 我在 2012 年打开了这个项目。它允许我注册 COM 并且不被签名。如果我签署项目，它会给我与 2010 年相同的错误。所以我猜这是一个签名问题。我读到您可以手动注册未签名的 dll 或 GAC，如果它已签名。从 2010 年开始，我可以手动将 dll 添加到安装项目中。我更愿意在 2010 年为安装项目构建和使用它。

**工作解决方案** 这篇文章给了我答案，并且在 c# [Excel 2010 64 bit can't create .net object](https://stackoverflow.com/questions/2724387/excel-2010-64-bit-cant-create-net-object)

**COM 设置和手动注册 dll 的结合是关键。按照上面帖子中的答案并确保您没有检查注册 COM 选项** 然后您必须使用 64 位 regasm 实用程序。C:\Windows\Microsoft.NET\Framework64\v4.0.30319\regasm "C:\Program Files\Default Company Name\KSP_Setup******.dll" /tlb /codebase

**签名问题解决**了-----我重命名了C#项目。然后我不断收到关于在使用签名程序集编译时找不到旧 dll 名称的错误。我重新创建了所有强名称键并进行了编译。它现在也可以在 VS2010 中运行，并且安装项目可以运行并注册 Com dll。在 COM dll 上的安装项目中，设置属性以注册它。

我的解决方案在 VB.net 中“Eck，我不喜欢在 VB 中工作”无论如何，我想 id 发布工作细节。我必须说有很多错误的信息到处跑。我为此头疼了几天。ConvertByteArrayToSingleArray 方法用于修复 com 将数组作为对象返回的方式。

确保以管理员身份运行 Visual Studio

我通过配置管理器将两个项目的所有编译选项设置为 64 位。为 VB 启用了 Com 并且 c# 不需要 com。

```
Option Strict Off
Option Explicit On
Imports UpgradeUtils.Activex
Imports System
Imports System.Runtime.InteropServices

<Guid("1F249C84-A090-4a5b-B592-FD64C07DAB75"), _
InterfaceType(ComInterfaceType.InterfaceIsDual)> _
Public Interface IclsSealDataStage
    <DispId(1)> Function SetStages(ByRef Starts As Object, ByRef Ends As Object, ByRef Cnt As Integer, ByRef XTIME As Object, ByRef YTORQUE As Object, ByRef YDP As Object, ByRef YOILLEVEL As Object, ByRef YOILTEMP As Object, ByRef YSPEED As Object) As Object
    Sub RegisterInitGlobalVarsDelegates()
End Interface

<ComVisible(True), _
Guid("E42FBD03-96DF-43a7-A491-23E735B32C5C"), _
ProgId("SealDataStage.clsSealDataStage"), _
ClassInterface(ClassInterfaceType.None)> _
Public Class clsSealDataStage
    Inherits ComponentClassHelper
    Implements IclsSealDataStage

    Public Function SetStages(ByRef Starts As Object, ByRef Ends As Object, ByRef Cnt As Integer, ByRef XTIME As Object, ByRef YTORQUE As Object, ByRef YDP As Object, ByRef YOILLEVEL As Object, ByRef YOILTEMP As Object, ByRef YSPEED As Object) As Object Implements IclsSealDataStage.SetStages

        Dim oStarts As Array = ConvertByteArrayToSingleArray(Starts)
        Dim oEnds As Array = ConvertByteArrayToSingleArray(Ends)
        Dim oXTIME As Array = ConvertByteArrayToSingleArray(XTIME)
        Dim oYTORQUE As Array = ConvertByteArrayToSingleArray(YTORQUE)
        Dim oYDP As Array = ConvertByteArrayToSingleArray(YDP)
        Dim oYOILLEVEL As Array = ConvertByteArrayToSingleArray(YOILLEVEL)
        Dim oYOILTEMP As Array = ConvertByteArrayToSingleArray(YOILTEMP)
        Dim oYSPEED As Array = ConvertByteArrayToSingleArray(YSPEED)

        Form1.DefInstance.PlotData(oXTIME, oYTORQUE, oYDP, oYOILLEVEL, oYOILTEMP, oYSPEED)
        'Form1.pg_MouseDown Starts(), Ends()
        Form1.DefInstance.starts_ends(oStarts, oEnds, Cnt)

        Form1.DefInstance.ShowDialog()
        Return VB6.CopyArray(stages) 'Oddly enough these are not suppose to work in 64 but do????

    End Function

    Private Function ConvertByteArrayToSingleArray(ByVal Starts As Object) As Array
        Dim obj As Object = DirectCast(Starts, Object)
        Dim ct As Array = DirectCast(obj, Array)
        Dim content As Single() = New Single(ct.Length) {}
        ct.CopyTo(content, 0)
        Return ct
    End Function 
```

我真的希望这可以从我失去的日子中拯救某人。:-) 如果我确实帮助在这里放下一行。我会每隔一段时间回来看看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:21:10.743

您不能从 64 位应用程序或程序集引用 32 位程序集。

如果您有一个需要注册互操作的程序集，则该程序集*必须*是 32 位。否则不能将其注册为 COM 组件

# android - 对多个按钮使用相同的 xml 文件

> ID：16027401
> 
> 赞同：0
> 
> 时间：2013-04-16T01:40:19.063
> 
> 标签：android, button, android-animation

我的主导航菜单有四个按钮，所有这四个按钮都包含一个图像。我创建了以下 xml 文件来处理点击事件动画：

**配置文件.xml**

```
<?xml version="1.0" encoding="utf-8"?>    
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/profileicon" />
<item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/gradient" />
<item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/gradient" />
<item android:drawable="@drawable/profileicon" /> 
```

以及下面的xml文件来设置效果：

**渐变.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <bitmap android:src="@drawable/profileicon" />
    </item>
    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android" >
            <gradient
                android:angle="90"
                android:centerColor="#880d0d0f"
                android:endColor="#885d5d5e"
                android:startColor="#880f0f10" />
        </shape>
    </item>
</layer-list> 
```

有什么办法可以避免创建新文件 pr. 我有按钮吗？

这就是我的 main_layout 的样子：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    tools:context=".Main" >

    <Button
        android:id="@+id/btn_yourPreferences"
        android:layout_width="256dp"
        android:layout_height="256dp"
        android:layout_alignBottom="@+id/btn_signUp"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="26dp"
        android:layout_marginRight="275dp"
        android:background="@drawable/profile"
        android:onClick="onClickViewPreferences" />

    <Button
        android:id="@+id/btn_yourCompetitions"
        android:layout_width="256dp"
        android:layout_height="256dp"
        android:layout_above="@+id/btn_yourPreferences"
        android:layout_marginBottom="54dp"
        android:layout_marginRight="230dp"
        android:layout_toLeftOf="@+id/btn_yourPreferences"
        android:background="@drawable/signedicon" />

    <Button
        android:id="@+id/btn_signUp"
        android:layout_width="256dp"
        android:layout_height="256dp"
        android:layout_alignLeft="@+id/btn_yourCompetitions"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="36dp"
        android:background="@drawable/yourcompeteicon" />

    <Button
        android:id="@+id/btn_listCompetitions"
        android:layout_width="256dp"
        android:layout_height="256dp"
        android:layout_alignBaseline="@+id/btn_yourCompetitions"
        android:layout_alignBottom="@+id/btn_yourCompetitions"
        android:layout_alignLeft="@+id/btn_yourPreferences"
        android:background="@drawable/listicon"
        android:onClick="onClickViewSearch"
         />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:22:50.113

请执行下列操作。我刚刚对你的代码做了一些小的改动

**配置文件.xml**

```
<?xml version="1.0" encoding="utf-8"?>    
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/gradient" />
<item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/gradient" /> 
```

**渐变.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <gradient
        android:angle="90"
        android:centerColor="#880d0d0f"
        android:endColor="#885d5d5e"
        android:startColor="#880f0f10" />
</shape> 
```

**main_layout.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
tools:context=".Main" >

<ImageButton
    android:id="@+id/btn_yourPreferences"
    android:layout_width="256dp"
    android:layout_height="256dp"
    android:layout_alignBottom="@+id/btn_signUp"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="26dp"
    android:layout_marginRight="275dp"
    android:background="@drawable/profile"
    android:background="@drawable/profileicon"
    android:onClick="onClickViewPreferences" />

<ImageButton
    android:id="@+id/btn_yourCompetitions"
    android:layout_width="256dp"
    android:layout_height="256dp"
    android:layout_above="@+id/btn_yourPreferences"
    android:layout_marginBottom="54dp"
    android:layout_marginRight="230dp"
    android:layout_toLeftOf="@+id/btn_yourPreferences"
    android:background="@drawable/profile"
    android:src="@drawable/signedicon" />

<ImageButton
    android:id="@+id/btn_signUp"
    android:layout_width="256dp"
    android:layout_height="256dp"
    android:layout_alignLeft="@+id/btn_yourCompetitions"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="36dp"
    android:background="@drawable/profile"
    android:src="@drawable/yourcompeteicon" />

<ImageButton
    android:id="@+id/btn_listCompetitions"
    android:layout_width="256dp"
    android:layout_height="256dp"
    android:layout_alignBaseline="@+id/btn_yourCompetitions"
    android:layout_alignBottom="@+id/btn_yourCompetitions"
    android:layout_alignLeft="@+id/btn_yourPreferences"
    android:background="@drawable/profile"
    android:src="@drawable/listicon"
    android:onClick="onClickViewSearch"
     /> 
```

# ios - iOS：在#define 中检查系统版本并做不同的事情，编译器错误

> ID：16027404
> 
> 赞同：1
> 
> 时间：2013-04-16T01:40:56.310
> 
> 标签：ios, objective-c, clang, c-preprocessor

我正在使用`MKReverseGeocoder`iOS < 5 和`CLGeocoder`iOS >= 5，但由于`MKReverseGeocoder`已弃用而收到警告，然后我尝试执行以下操作：

```
#define SYSTEM_LOWER_THAN_5 ([[[UIDevice currentDevice] systemVersion] compare:@"5.0" options:NSNumericSearch] == NSOrderedAscending)

#if SYSTEM_LOWER_THAN_5
@interface TelstraLocationService () <MKReverseGeocoderDelegate>
#else
@interface TelstraLocationService ()
#endif 
```

但我得到一个错误：

> 预处理器表达式开头的标记无效

这是由只能在运行时评估的宏引起的。有没有办法摆脱警告（不改变部署目标）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:11:05.720

如果您的目标是简单地摆脱编译器警告（因为您已经考虑了任何潜在问题并明确决定忽略它），请使用以下编译器指令围绕触发代码：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
    // some code that uses something deprecated
#pragma clang diagnostic pop 
```

您希望尽可能具体，以避免无意中忽略其他有效的弃用警告。如果您在它之前和之后有另一个协议，则围绕它，否则只需`MKReverseGeocoderDelegate`围绕整个 @interface 块：

```
// option 1
@interface TelstraLocationService () <
    SomeProtocol

    #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Wdeprecated-declarations"
          MKReverseGeocoderDelegate
    #pragma clang diagnostic pop

    AnotherProtocol>

// option 2
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"

@interface TelstraLocationService () <MKReverseGeocoderDelegate>

#pragma clang diagnostic pop 
```

将任何对相同编译器指令的调用`reverseGeocoder:didFindPlacemark:`或`reverseGeocoder:didFailWithError:`使用相同的编译器指令都包围起来，以使它们的弃用警告也消失。

# google-maps - 隐藏的背面可见性不适用于 chrome 浏览器中的 google maps api

> ID：16027406
> 
> 赞同：3
> 
> 时间：2013-04-16T01:41:13.503
> 
> 标签：google-maps, google-chrome, google-maps-api-3, visibility, css-transitions

我正在使用 css3 转换来旋转和显示网站的每个页面。
但是我遇到了谷歌地图没有被背面可见性隐藏的问题：隐藏；在 chrome 浏览器中。
您可以在此处看到一个简化的示例：http:
[//jsfiddle.net/xCryV/](http://jsfiddle.net/xCryV/)
在 ie10 或 firefox 中查看时，它工作得非常好。
如果我使用谷歌地图 iframe 而不是 api，它在 chrome 中也可以正常工作，但我需要使用地图 api 来控制地图类型和导航选项，并在页面上显示多个地图。
任何帮助深表感谢。
谢谢。

```
<div id="card">
<div>
    <div id="map_canvas1"></div>
    <!--<iframe width="400" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.ca/maps?q=1600+Amphitheatre+Parkway+Mountain+View,+CA+94043&amp;aq=f&amp;ie=UTF8&amp;hl=en&amp;hq=&amp;hnear=1600+Amphitheatre+Pkwy,+Mountain+View,+California+94043,+United+States&amp;t=m&amp;z=14&amp;ll=37.421401,-122.08537&amp;output=embed"></iframe>-->
</div> 
```

```
setTimeout(function initialize() {
    var settings1 = {
        zoom: 15,
        center: new google.maps.LatLng(37.421401,-122.08537),
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map1 = new google.maps.Map(document.getElementById("map_canvas1"), settings1);
    var companyPos1 = new google.maps.LatLng(37.421401,-122.08537);
    var companyMarker1 = new google.maps.Marker({
        position: companyPos1,
        map: map1,
        title:"Google Inc."
    });
}, 100);

-webkit-transition: 1s ease-in-out;
-moz-transition: 1s ease-in-out;
-o-transition: 1s ease-in-out;
transition: 1s ease-in-out;
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
-o-backface-visibility: hidden;
backface-visibility: hidden;
-webkit-transform: perspective(1000px) rotateX(-180deg);
-moz-transform: perspective(1000px) rotateX(-180deg);
-o-transform: perspective(1000px) rotateX(-180deg);
transform: perspective(1000px) rotateX(-180deg); 
```

# c++ - 如何避免 C++ 中的多线程问题（wxWidgets 和 Cplex）？

> ID：16027407
> 
> 赞同：2
> 
> 时间：2013-04-16T01:41:28.513
> 
> 标签：c++, multithreading, wxwidgets, cplex

我使用用于 GUI 的 wxWidgets 和 IBM ILOG Cplex 用 C++ 编写了一个工具来解决优化问题。

在 wx 事件处理程序调用的函数之一中，我调用了 IBM ILOG Cplex Optimizer，它本身就是多线程代码。

我意识到这会导致带有无意义的内存内容的不确定性错误。

由于我没有编写多线程代码的经验，并且想在不花三周时间学习如何做的情况下离开，我想知道：

是否有一些安全的，可能不优雅的方法来避免这里的问题？（也许比将文件写入磁盘、通过操作系统调用不同的任务并将输出读回更优雅）。

从 wx 线程启动 Cplex 线程是不是一个坏主意？

使用两个可能在内部使用不同库来实现多线程的库通常是一个坏主意吗？（我不知道除了 pthreads 以及 cplex 或 wx 使用什么之外还有什么）。

任何帮助和背景信息表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:37:48.053

根据我的经验，规则是：

> 每个改变显示的 wxWdiget 函数调用都必须在 wxWidget 线程中进行

我对 Cplex 了解不多，但是如果您说它是多线程的，那么您很可能正在调用异步函数并在回调中处理结果。回调绝对不会被 wxWidget 线程调用。如果您随后尝试在回调中显示结果，则您违反了上述规则。那时你会得到很好的小错误，在我的情况下，这通常表现为堆损坏。

要解决这个问题，您必须将回调的结果传递给 wxWidget 线程并在该线程中显示它们。有很多方法可以做到这一点，但全局机制是触发 wxWigdet 上的自定义事件，该事件被传递给 wxWidget 线程。

检查此链接，[http://wiki.wxwidgets.org/Custom_Events](http://wiki.wxwidgets.org/Custom_Events)您需要使用 `wxEvtHandler::AddPendingEvent(wxEvent& event)`

# php - 登录和授权页面（会话）的问题

> ID：16027409
> 
> 赞同：-4
> 
> 时间：2013-04-16T01:41:44.953
> 
> 标签：php

我正在使用 Wordpress 来构建我的网站。我正在创建一个登录系统，供学校登录到我的系统以查看您的信息。当授权登录的用户遇到问题，他们无法进入授权页面，即查看产品页面。

请帮忙。

下面是登录代码。

```
session_start();
if($_SERVER["REQUEST_METHOD"] == "POST") {

// School code and password sent from Form
$myschoolcode = ($_POST['schoolcode']);
$mypassword = ($_POST['password']);

$sql = "SELECT school_id FROM schools_info WHERE SchoolCode = '$myschoolcode' and Password = '$mypassword'";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);
$active = $row['active'];
$count = mysql_num_rows($result);

// If result matched $myschoolcode and $mypassword, table row must be 1 row
if($count == 1) {
session_register("myschoolcode");
$_SESSION['login_school'] = $myschoolcode;

header("location: ../view-products/");
}
else
{
?>
    <script type="text/javascript">
    alert("Your School Code or Password is incorrect, please reenter");
    history.back();
    </script>
    <?php
}

} 
```

下面是查看产品页面代码。

```
session_start();
$school_check = $_SESSION['login_school'];

$ses_sql = mysql_query("SELECT SchoolCode FROM schools_info WHERE SchoolCode = '$school_check' ");

$row = mysql_fetch_array($ses_sql);

$login_session = $row['schoolcode'];

if(!isset($login_session))
{
header("location: ../enter-icas/");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:13:51.913

如果我可以-1，我会的。您的最后一个问题是会话，您的首要问题是您存储的是普通密码？甚至不是一个粗糙的 MD5？甚至没有 mt_rand()？单纯吗？-> 大问题！2nd）您获取您甚至没有过滤或验证的用户输入数据，并立即将其插入查询中，并且您认为您是安全的，因为您使用

> > '$please_inject_me_NOW'

您应该使用 PDO。看看 Php PDO 手册。

好吧，除了我的咆哮，从你的观点来看，我不明白你为什么要从 $_SESSION 变量中进行另一个查询？

如果凭据与您所做的匹配，您所要做的就是设置您的会话变量。

现在在每个视图页面的顶部或在此视图中，例如页面，您所要做的就是：

```
if(!isset($_SESSION['LoggedIn'])){ // If session variable 'LoggedIn' is not set then
        die("Access denied, you must <a href='index.php'><bold>Login</bold></a> to view this page!"); // Die with the message Access Denied, You must Login to view this page!
} else { // If session variable LoggedIn is set then yyyyaaay! Do your thing man.
  .........
} 
```

请阅读我的评论。您必须使用某种密码保护 = [Bcrypt](https://github.com/ircmaxell/password_compat)任何一种？也不要忘记 PDO！

> > 编辑 1

并且不要忘记在实现上述解决方案之前添加 session_start() （虽然你可能已经知道了）

# python - python的函数返回

> ID：16027414
> 
> 赞同：1
> 
> 时间：2013-04-16T01:42:02.147
> 
> 标签：python, function, return

我正在阅读 John Zelle 的 Python 编程 2ed Ch6。我遇到了一个概念问题：他的示例代码说：

```
#addinterest3.py 
def addInterest(balances, rate):
    for i in range(len(balances)):
        balances[i] * (1 + rate)

def test():
    amounts = [1000, 2200, 800, 360]
    rate = 0.05
    addInterest(amounts, rate)
    print(amounts)

test() 
```

上面的代码

> “分配到列表中导致它引用新值。当 Python 进行垃圾收集时，旧值实际上会被清理”

根据这个想法，我尝试了一个 test.py

```
def add(balance, rate):
    balance = balance * (1 + rate)

def test():
    amount = 1000
    rate = 0.5
    amount = add(amount, rate)
    print(amount)

test() 
```

我认为余额也可以通过新值分配，但结果在我的终端中返回“无”。谁能解释它们之间的根本区别是什么？为什么列表赋值不需要使用return来传递值但仍然会被保存，另一方面，我的test.py在函数之后确实需要一个“返回余额”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:49:07.667

你没有得到任何价值的原因`amount`是你的`add`函数没有返回任何东西。

```
def add(balance,rate):
    return balance = balance*(1+rate) 
```

将返回一个将分配给 的值`amount`。

除此之外，开始的代码是错误的。如果您要在 python 中尝试此代码，您会发现它会打印出来：

```
[1000, 2200, 800, 360] 
```

它需要更改为：

```
def addInterest(balances,rate):
    for i in range(len(balances)):
        balances[i] = balances[i]*(1+rate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:56:34.077

正如我所料，如果你将一个列表作为函数参数传递，它就像你传递这个列表上的指针一样。Python 中的赋值语句不复制对象，它们在目标和对象之间创建绑定。因此，如果您更改函数内的列表，您可以看到这些更改。如果您传递变量，则这些变量的副本将在函数内部使用。
作为示例，您还可以尝试以下代码：

```
a = [1, 2]
b = a
a.append(3)
print a, b 
```

输出：

```
[1, 2, 3] [1, 2, 3] 
```

UPS！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:47:28.697

你的`add`函数没有`return`任何作用，所以 Python 会自动让它`None`在最后返回。当你写：

```
amount = add(amount,rate) 
```

`add`返回`None`，所以`amount`设置为`None`。

此外，并非 Python 中的所有对象都是可变的，因此从函数内部修改变量不会达到您的预期。改用`return`：

```
def add(balance,rate):
    return balance * (1 + rate) 
```

# html - 通过 JEditorPane 显示可点击的图像 URL

> ID：16027418
> 
> 赞同：0
> 
> 时间：2013-04-16T01:42:28.153
> 
> 标签：html, url, jeditorpane

我正在制作一个 HTML 编辑器。当我做这样的事情时：

```
<img src='File:///C:/User/Pictures/sample.jpg' alt='Smiley face'> 
```

我希望 JEditorPane 能够识别链接并使其可点击，以便在浏览器中打开。但是，我不希望图片实际显示在窗格中。我只是想让链接变得可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:25:07.327

您可以使用Photoshop将链接添加到图片，然后您可以单击它。

# node.js - 将生成的 ImageMagick 图像存储到没有临时文件的 s3

> ID：16027424
> 
> 赞同：0
> 
> 时间：2013-04-16T01:43:24.397
> 
> 标签：node.js, amazon-s3, imagemagick, meteor, graphicsmagick

我在 node.js 应用程序的服务器端生成一个 PNG，使用 ImageMagick 和 node.js 的 gm 库（ node.js 的[GraphicsMagick](http://aheckmann.github.io/gm/)）。

```
// start with a blank image
var gmImage = gm(100, 100, "#000000ff");

// Draw the stuff on the new blank image 
```

当我使用`gm`库完成绘图后，我将该图像存储到文件系统中：

```
gmImage.write(imagePath, function (err) {
  ...
}); 
```

我现在正在转移到 s3。我想跳过上一步并将图像直接写入 s3 而不使用临时文件。

有没有办法将其写入`gmImage`缓冲区或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:24:34.927

看看 API 的流部分：[https ://github.com/aheckmann/gm#streams](https://github.com/aheckmann/gm#streams)

您应该能够将标准输出通过管道传输到 s3

```
var gmImage = gm(100, 100, "#000000ff");
gmImage.stream(function (err, stdout, stderr) {
  stdout.pipe(s3Stream);
}); 
```

# css - CSS问题，填写表格时标题上升

> ID：16027425
> 
> 赞同：0
> 
> 时间：2013-04-16T01:43:35.703
> 
> 标签：css, header, positioning

我有一个奇怪的 CSS 问题，我不太确定如何解决这个问题。

当我按下我网站上的“登录”按钮并开始输入用户名时，标题会上升。我真的不知道是什么原因造成的。

有任何想法吗？

谢谢！

这是一些代码：

表格：

```
.tooltip-wrap {
  position: fixed;
  display:none;
}

.tooltip-wrap .corner {
    position:relative;
    z-index:100;
    margin-left:-5px;
    width:0;
    height:0;
    border:5px solid transparent;
    border-bottom-color:#fff;
}

.tooltip-text { 
    float:left;
    margin-left:-50%;
    padding:1em 15px;
    background:#fff;
    color:#333;
} 
```

这是上升的部分：

```
.header-navigation.back {
    z-index:-1;
    position:absolute;
    margin-left:0;
    margin-top:-6px;
    border:none;
display:block; height:137px; width:1171px; padding:0px; outline:none; text-indent:-9999px;
background-image:url('xhttp://frenchegg.com/images/backmenu.png');
} 
```

您需要单击用户名并开始输入内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:51:12.210

更改`line-height`输入框的 - 修复问题。

要更改的 HTML：

```
<input type="text" id="text-user" name="user_login" value="Username" style="
    line-height: 15px;
"> 
```

CSS：

```
#text-user{
    line-height: 15px;
} 
```

原因是输入的行高在没有文本的情况下比在文本的情况下要小得多。因此，当您在框中输入内容时，`line-height`扩展的内容就是导致标题被向上推的原因。

**编辑**

我看到你对代码没有运气，所以再做这两件事，你肯定会启动并运行 - 它在这里为我工作。

从 中删除以下内容`.site-header`：

```
padding: 2em 0; 
```

接下来，将`row`样式更改为如下所示：

```
.row{ 
margin: 0 auto; 
padding: 0 30px; 
width: 1171px; 
height: 137px; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:57:45.153

非常奇怪的错误，我无法解释发生了什么。但这与您的`div.header-navigation.back`. 如果你删除它，行为就会消失。

据我所知，您只是将该元素用于背景图像，因此无论如何将其包含在标记中并不是一个好主意。如果你修改你的`.site-header`，你可以在没有额外的情况下达到同样的效果`div`：

```
.site-header {
   background: #0894ff url('http://frenchegg.com/images/backmenu.png') 50% 20px no-repeat;
   background: url('http://frenchegg.com/images/backmenu.png') 50% 20px no-repeat,
               linear-gradient(to bottom, rgba(255,255,255,0.1) 0%,rgba(255,255,255,0) 100%);
} 
```

我无法完全弄清楚你想用渐变实现什么，但我的想法是为那些支持它们的浏览器提供多个背景，并回退到纯色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:16:01.117

我认为解决方案是这样的：

设置`.header-wrap`为具有`overflow:visible`（好吧，删除隐藏的溢出！） - 这意味着您必须将这些字符图形切成平底。

然后，更改`.tooltip-wrap`为`position:absolute;z-index:2;`（不固定）。

我还注意到您的脑海中有占位符 polyfill。这意味着您可以在输入而不是值上使用该属性；像这样：

`<input type="text" name="user_login" placeholder="Username">`

很可爱的网站！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:49:14.587

您可以给它一个 z-index 而不是一个固定位置，并给它一个绝对位置。

# ruby-on-rails - 在 Rails 中上传视频需要哪些数据库列 - Carrierwave、Fog 和 S3

> ID：16027429
> 
> 赞同：2
> 
> 时间：2013-04-16T01:44:08.400
> 
> 标签：ruby-on-rails, video, amazon-s3, carrierwave, fog

我希望用户能够使用carrierwave、fog 和Amazon S3 将视频上传到我的rails 站点。（我还没有尝试实现 S3 进行存储，也不是这个问题的主题。）

我的视频模型和模型保存代码需要哪些数据库列才能使用 Carrierwave 成功保存视频文件？

目前我的视频表有以下内容，但我对我真正需要的内容感到困惑。

```
 class CreateVideoTable < ActiveRecord::Migration

  def up
    create_table :videos do |t|
      t.string :video
      t.integer :user_id
      t.integer :question_id
      t.string :youtube_url
      t.string :type
      t.string :filename
      t.string :checksum
      t.string :path
      t.integer :filesize
      t.integer :width
      t.integer :height
      t.integer :duration
      t.integer :bit_rate

      t.timestamps
    end
      add_index :videos, [:user_id, :question_id]
  end

  def down
    remove_index :videos, [:user_id, :question_id]
    drop_table :videos
  end
end 
```

这是我的视频模型的外观：

```
class Video < ActiveRecord::Base

  attr_accessor :user_id, :question_id, :video, :youtube_url, :type, :filename, :checksum, :path, :filesize, :width, :height, :duration, :bit_rate

  belongs_to :question
  belongs_to :user

  mount_uploader :video, VideoUploader
end 
```

最后是我的carrierwave上传器。

```
class VideoUploader < CarrierWave::Uploader::Base

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def extension_white_list
    %w(ogg ogv 3gp mp4 m4v webm mov m2v 3g2)
    # %w(ogg ogv 3gp mp4 m4v webm mov)
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:57:46.313

别忘了放`storage :fog`

否则，在模型中，您只需要一个字符串列`video`来存储 S3 URL。Carrierwave/fog 将负责其余的工作。如果需要，您当然可以添加更多与您的应用程序相关的列。换句话说，你很高兴:)

另外，初始化程序丢失了，不知道您是否忘记了：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                        # required
    :aws_access_key_id      => 'xxx',                        # required
    :aws_secret_access_key  => 'yyy',                        # required
    :region                 => 'eu-west-1',                  # optional, defaults to 'us-east-1'
    :host                   => 's3.example.com',             # optional, defaults to nil
    :endpoint               => 'https://s3.example.com:8080' # optional, defaults to nil
  }
  config.fog_directory  = 'name_of_directory'                     # required
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

# c# - 根据第一个单词在数组中查找字符串

> ID：16027433
> 
> 赞同：0
> 
> 时间：2013-04-16T01:44:26.257
> 
> 标签：c#, arrays, string, filter

我正在尝试根据必须按顺序排列的 2 个关键字过滤掉一个数组，到目前为止，我得到了这个：

```
string[] matchedOne = Array.FindAll(converList, s => s.Contains(split[1]));

string[] matchedTwo = Array.FindAll(matchedOne, s => s.Contains(split[2]));

if (matchedTwo.Length == 0)
{
    Console.Clear();
    Console.WriteLine("Sorry, Your Conversion is invalid");
    Main();
} 
```

转换列表 =

盎司，克，28.0
盎司，假货，28.0 - 我添加的假货
克，盎司，3.0 - 我添加的假货，例如
磅，盎司，16.0
磅，千克，0.454
品脱，升，0.568
英寸，厘米，2.5
英里,英寸,63360.0

如果用户输入 5, ounce, gram, 当通过“matchedOne”时它会找到；"once,gram,28.0" 和 "ounce,fake,28.0" 。不是现在的“磅，盎司，16.0”和“克，盎司，3.0”。

然后在 "matchedTwo" 中它只会找到 "once,gram,28.0" 而不是 "gram,ounce,3.0"

- 只是补充一点：我不能在“系统;”上使用任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:08:18.250

```
var regex = new Regex(
      string.Format("^.*{0}.*{1}.*$",
      Regex.Escape(split[1]), Regex.Escape(split[2])),
      RegexOptions.IgnoreCase
      | RegexOptions.Multiline
      | RegexOptions.CultureInvariant
      | RegexOptions.IgnorePatternWhitespace
      | RegexOptions.Compiled
    );

Match m = regex.Match(converlist); 
```

基本上只匹配`split[1]`之前的一行`split[2]`

或没有正则表达式

```
string[] match = Array.FindAll(matchedOne, s => s.IndexOf(split[1])==-1?false: s.IndexOf(split[2], s.IndexOf(split[1])) != -1); 
```

和工作转换...

```
const string converlist = "ounce,gram,28.0\r\nounce,fake,28.0\r\ngram, ounce, 3.0\r\npound,ounce,16.0\r\npound,kilogram,0.454\r\npint,litre,0.568\r\ninch, centimetre,2.5\r\nmile,inch,63360.0\r\n";
var split = "5,ounce,gram".Split(new[] { ',' });
var list = converlist.Split(new[]{"\r\n"}, StringSplitOptions.RemoveEmptyEntries).ToList();
var matches = list.FindAll(s =>  s.IndexOf(split[1])==-1?false: s.IndexOf(split[2], s.IndexOf(split[1])) != -1);
var conversionLine = matches[0];
Console.WriteLine(conversionLine);
var conversionFactor = decimal.Parse(conversionLine.Split(new[] { ',' })[2]);
var valueToConvert = decimal.Parse(split[0].Trim());
Console.WriteLine(string.Format("{0} {2}s is {1} {3}s", valueToConvert, conversionFactor * valueToConvert, split[1], split[2])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:53:46.883

上面的答案可以满足您的需要，但是，这也可以。

```
string[] s = { "ounce,gram", "gram,ounce", "pound,carret" };

foreach (string temp in s.Where(x => (x.IndexOf("ounce")>-1) && (x.IndexOf("ounce") < x.IndexOf("gram"))))
            Debug.WriteLine(temp); 
```

# grails - 在 Grails 中，如何使用视图和控制器中的中间连接类处理多对多？

> ID：16027436
> 
> 赞同：0
> 
> 时间：2013-04-16T01:45:04.150
> 
> 标签：grails

假设我有以下域：

```
class Store {
    String name

    static hasMany = [ products: StoreProduct ]
}

class Product {
    String name

    static hasMany = [ stores: StoreProduct ]
}

class StoreProduct {
    BigDecimal discount

    static belongsTo = [ store: Store, product: Product ]
    static mapping = {
        id composite: ['store', 'product']
    } 
```

换句话说，中间域类之间存在多对多关系，`Store`以跟踪每个商店的单个折扣。`Product``StoreProduct`

Grails 内置了对一对多关系的支持，因此您可以传入带有正确字段名称的 ID 列表，控制器会自动将 ID 解析为实体列表。但是，在这种情况下，它是具有中间域类的多对多。

我在`Store`编辑视图中尝试了以下代码，以允许用户选择产品列表：

```
<g:each in="${products}" var="product" status="i">
    <label class="checkbox">
        <input type="checkbox" name="products" value="${product.id}"/>
         ${product.name}
    </label>
</g:each> 
```

但是 Grails 会根据我用于`name`属性的内容引发各种错误。我还尝试了以下`input`名称：

```
products
products.product
products.product.id
product[0].product
product[0].product.id 
```

但它们都不能正常工作。

**我的问题是**，Grails 中是否有对这种关系的内置支持，尤其是在视图方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:55:30.243

更改您的域结构如下：

```
class Store {
    String name

    Set<Product> getProducts() {
       StoreProduct.findAllByStore(this)*.product
    }
}

class Product {
    String name
    Set<Store> getStores() {
        StoreProduct.findAllByProduct(this)*.store
    }
}

import org.apache.commons.lang.builder.HashCodeBuilder
class StoreProduct implements Serializable {

    BigDecimal discount
    Store store
    Product product

    static mapping = {
        id composite: ['store', 'product']
        version false
    }

boolean equals(other) {
    if (!(other instanceof StoreProduct)) {
        return false
    }

    other.store?.id == store?.id &&
        other.product?.id == product?.id
}

int hashCode() {
    def builder = new HashCodeBuilder()
    if (store) builder.append(store.id)
    if (product) builder.append(product.id)
    builder.toHashCode()
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:51:01.823

从上面的域类：-

*   域 (`Store`或`Product`) 中的任何一个都必须通过具有`belongsTo`. 有关详细信息，请参阅[API](http://grails.org/doc/latest/guide/GORM.html#manyToMany)。

*   具有主键的域类 ( `StoreProduct`)应实现。`composite``Serializable`

如果可用，还请提供堆栈跟踪以进行调试。

# facebook - 将电子邮件添加到 publish_stream 范围到 facebook 应用程序

> ID：16027439
> 
> 赞同：0
> 
> 时间：2013-04-16T01:45:21.847
> 
> 标签：facebook, facebook-php-sdk

我有一个 Facebook 应用程序，它每天定期向加入的用户时间线发布一篇文章。目前，我在 *publish_stream* 范围内使用以下 getLoginUrl 代码：

```
$facebook->getLoginUrl(array( 'scope' => 'publish_stream')); 
```

因为，我的网站目前正在运行，并且有用户加入了它的应用程序。我不想做任何可能停止向用户发布文章的冒险。

我的问题是：将电子邮件添加到范围字符串会导致停止向用户发布文章，直到他们下次使用 Facebook 登录 URL 登录？或者只是像往常一样继续发布文章，只有我的应用程序在用户再次登录之前无法知道电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:50:58.873

您的应用程序将继续以相同的方式工作，唯一的区别是您执行此操作的时间

```
$this->facebook->api('/me','GET'); 
```

如果用户没有授予电子邮件权限，将得到这个

```
id
name
first_name
last_name
link
username
gender
locale
age_range 
```

如果用户已授予电子邮件权限，那么您将只有一个包含用户电子邮件的字段：

```
id
name
first_name
last_name
link
username
gender
locale
age_range
email 
```

因此，只要您验证数组电子邮件密钥是否存在，就不用担心您可以添加该范围

# android - 像 iOS 一样的 Android 图像滑块

> ID：16027443
> 
> 赞同：0
> 
> 时间：2013-04-16T01:45:45.063
> 
> 标签：android, android-ui

如何制作包含两个部分的 android 图像滑块。一部分是水平图像滑块（缩略图），第二部分是所选图像的原始图像。这看起来像 ios 中的 ios 水平视图： ![在此处输入图像描述](https://i.stack.imgur.com/jU1Uf.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:30:57.990

你需要使用一个`Gallery`和`ImageView`

1：制作布局：

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">

   <ImageView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="70"/>

    <Gallery
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="30"/>

</LinearLayout> 
```

2：使用适配器初始化图库。

3：为您需要更改上面给出的 imageView 的画廊项目定义 onItemClickListener。

或者，您可以使用此处给出的完整代码： [LINK](http://saigeethamn.blogspot.in/2010/05/gallery-view-android-developer-tutorial.html) （类似于您要执行的操作）

# php - 如何确定函数是否不返回任何内容？

> ID：16027445
> 
> 赞同：2
> 
> 时间：2013-04-16T01:45:48.503
> 
> 标签：php, function, return

有没有办法在 PHP 中使用反射或其他方法来做到这一点？

```
function a{
  return null;
}

function b{

}

$a = a(); // null
$b = b(); // null :( 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:51:09.827

如果你没有显式地返回一些东西，那么函数将`null`默认返回。这就是函数在 PHP 中的工作方式，无法确定函数是否有返回值。

不过，这应该不是问题。如果一个函数返回 null 它通常意味着什么都没有做，或者什么都没有找到，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:06:15.997

当您定义自己的函数时，您应该知道它们是否返回任何内容。

无论如何。一个函数默认返回 null 除非你已经覆盖了返回

```
function A (){   
}

function B(){
 return 'Test';
}

function C(){
return;
}

function CheckValidation ($Var){
    if (is_null($Var)){
        return 'Sample Is Null';
    }else{
        return 'Sample Is Not Null and returned a value!';
    }
}

echo CheckValidation(A()); // Will output: 'Sample Is Null'
echo CheckValidation(B()); // Will output: 'Sample Is Not Null and has returned a value!
echo CheckValidation(C()); // Will output: 'Sample Is Null' 
```

我提供的函数是你将得到的最好的函数，因为如果没有返回，函数默认返回 null 是..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:46:32.260

*介意不要返回它，`null`因为它肯定不会显示任何结果。*

而是尝试在`echo`内部添加一条语句以进行检查或`return`使用值，但在任何一种情况下，您仍然必须使用它`echo`来输出结果.....

另请参阅**PHP.NET**关于如何创建[用户定义函数的正确方法](http://www.php.net/manual/en/functions.user-defined.php)

# javascript - 标头 Access-Control-Allow-Origin:* 在 Spring MVC 上无法正常工作

> ID：16027447
> 
> 赞同：1
> 
> 时间：2013-04-16T01:46:04.550
> 
> 标签：javascript, jquery, rest, spring-mvc, cors

我有一个使用 RESTful Web 服务在 Spring MVC 上运行的 Web 应用程序。我正在尝试从 HTML/Javascript 文件向这些 Web 服务发送 JSON。这是Javascript：

```
$.ajax
(
{
    type: "post",
    data: JSON.stringify(data),
    contentType : "application/json",
    dataType: "json",
    url: "http://localhost/proj/service",
    success: function(data) 
    {
        callback(data);
    }
}
); 
```

以及 Spring MVC 中的映射：

```
@RequestMapping(value = "/proj/service/", method = RequestMethod.POST)  
    public ModelAndView procRequest(@RequestBody String paramsJson, HttpServletResponse resp, WebRequest request_p){        

        resp.setStatus(HttpStatus.CREATED.value());
        resp.setHeader("Location", request_p.getContextPath() + "/proj/service");
        resp.addHeader("Access-Control-Allow-Origin", "*"); 
            //Code
} 
```

出于某种原因，当我从它通过的 ajax 请求中删除 contentType 键时，当然它的格式不正确，因为我希望 Javascript 向我发送 JSON 字符串。但是由于某种原因，如果我离开 contentType 键，我会收到以下错误：

```
XMLHttpRequest cannot load http://localhost:8080/proj/service/. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

我不知道什么可能导致此错误，因为适当的标头在那里。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:33:52.043

标`Content-Type`头触发 CORS 预检请求。您需要修改处理程序以响应`OPTIONS`具有以下标头的请求：

```
resp.addHeader("Access-Control-Allow-Origin", "*");
resp.addHeader("Access-Control-Allow-Methods", "GET,PUT,POST,DELETE");
resp.addHeader("Access-Control-Allow-Headers", "Content-Type"); 
```

这应该向预检请求发送适当的响应，之后浏览器将发出实际请求。您可以在此处了解有关预检请求的更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-24T03:57:57.477

我这样做：

```
 @RequestMapping("/listActions")
public @ResponseBody List<Action> list(HttpServletRequest request, HttpServletResponse response) {
    response.addHeader("Access-Control-Allow-Origin", "*");
    response.addHeader("Access-Control-Allow-Methods", "GET,PUT,POST,DELETE");
    response.addHeader("Access-Control-Allow-Headers", "Content-Type");

    List<Action> actions =  new ArrayList<Action>();
    actions.add(new Action(1, "Do something fantastic"));
    actions.add(new Action(2, "Save the world"));
    actions.add(new Action(3, "Buy beer"));
    actions.add(new Action(4, "Butcher a hog"));
    return actions;
} 
```

# prolog - is 和 = 有什么区别？

> ID：16027449
> 
> 赞同：11
> 
> 时间：2013-04-16T01:46:20.643
> 
> 标签：prolog

我已将这些语句输入到 prolog 解释器中，并且对结果感到困惑。他们不应该返回同样的东西吗？真的？

```
1 ?- 7 = 5 + 2.
false.

2 ?- 7 is 5 + 2.
true. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T03:14:51.837

不，因为在 Prolog`=/2`中并不意味着*assign*，而是*unify*。统一算法对算术一无所知，只知道结构。所以你可以用 Prolog 中的算术表达式做一些在其他语言中很难实现的有趣的事情：

```
?- X = 5 + 2.
X = 5+2. 
```

看起来那里什么也没发生，但实际发生的是 X 被赋予了值“5 + 2”*作为结构*。换一种方式：

```
?- A + B = 5 + 2.
A = 5,
B = 2. 
```

甚至：

```
?- X = 5 + 2, X =.. [Op|_]. 
X = 5+2,
Op = (+). 
```

不过，最后一个可能对整个列表更有意义：

```
?- X = 5 + 2, X =.. Y.
X = 5+2,
Y = [+, 5, 2]. 
```

这是非凡的“univ”运算符的效果`=../2`，它能够在类似 Lisp 的列表和 Prolog 语法之间进行转换，使您能够以通用的方式对结构进行有趣的构造和分解。

现在，`is/2`另一方面，*确实*知道算术。它将左边的参数与右边的算术简化结果统一起来。**请注意**，它只在一个方向上起作用：

```
?- 7 is 5 + 2.
true.

?- 5 + 2 is 7.
false. 
```

你可以说它`=/2`对结构`is/2`感兴趣，对数值相等感兴趣。但这确实意味着教授 Prolog 代数非常容易：

```
simplify(X * Y + X * Z, X * (Y + Z)).  % distributive property
simplify(X, X).

?- simplify(A * 3 + A * 4, Q).
Q = A* (3+4) 
```

现在，这并不完美（请注意，我们得到的是 3+4 而不是 7），要让它变得真正聪明，还有很多工作要做：

```
?- simplify(3 * A + 4 * A, Q).
Q = 3*A+4*A. 
```

但这是另一天的问题。

简而言之：

*   `=/2`触发统一
*   `is/2`触发算术评估

# python - 有没有办法知道 Unicode 字符串是否包含 Python 中的任何中文/日文字符？

> ID：16027450
> 
> 赞同：6
> 
> 时间：2013-04-16T01:46:20.703
> 
> 标签：python

我在 Python 中有一个 Unicode 字符串。我正在寻找一种方法来确定字符串中是否有任何中文/日文字符。如果可能的话，最好能够找到这些字符。

这似乎与语言检测问题有点不同。我的字符串可以是英文和中文文本的混合。

我的代码可以访问 Internet。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:04:48.523

您可以使用 Unicode Script 属性来确定它们通常与什么脚本相关联。

遗憾的是， Python 的`unicodedata`模块没有这个属性。但是，一些第三方模块，例如，`unicodedata2`并[`unicodescript`](https://github.com/ConradIrwin/unicodescript)确实具有此信息。您可以查询它们并检查脚本中是否有任何字符`Han`，对应于中文（以及汉字和汉字）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T03:16:27.320

我尝试`unicodedata`了 nneonneo 在他的回答中提到的 Python 模块，我认为它可能有效。

```
>>> import unicodedata
>>> unicodedata.name('你')
'CJK UNIFIED IDEOGRAPH-4F60'
>>> unicodedata.name('桜')
'CJK UNIFIED IDEOGRAPH-685C'
>>> unicodedata.name('あ')
'HIRAGANA LETTER A'
>>> unicodedata.name('ア')
'KATAKANA LETTER A'
>>> unicodedata.name('a')
'LATIN SMALL LETTER A' 
```

如您所见，汉字和日文采用的汉字都被分类为`CJK UNIFIED IDEOGRAPH`平假名和片假名正确识别。我没有测试韩文字符，但我认为它们也应该属于`CJK UNIFIED IDEOGRAPH`。

此外，如果您只关心它是否是 CJK 字符/字母，这似乎更简单：

```
>>> import unicodedata
>>> unicodedata.category('你')
'Lo'
>>> unicodedata.category('桜')
'Lo'
>>> unicodedata.category('あ')
'Lo'
>>> unicodedata.category('ア')
'Lo'
>>> unicodedata.category('a')
'Ll'
>>> unicodedata.category('A')
'Lu' 
```

根据[这里](http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#General_Category)，`Ll`是小写，`Lu`是大写，`Lo`是其他。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T02:00:42.663

您可以使用此正则表达式`[\u2E80-\u9FFF]`来匹配 CJK 字符。

# c++ - “（void）！ptr”做什么？

> ID：16027453
> 
> 赞同：8
> 
> 时间：2013-04-16T01:46:29.687
> 
> 标签：c++

我在阅读 pugixml 源代码时看到了它，但我真的不知道它为什么在那里。

```
void foo(void* ptr) {
    (void)!ptr;  // What does this line do?
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T01:48:44.937

`(void)ptr;`是抑制“未使用参数”警告的常用方法，当函数签名需要包含比函数使用的更多参数时（例如，在回调中，如果未使用“用户数据”参数），这可能是必要的。

这`!`对我来说是新的，尽管在这种情况下它是多余的，因为返回值只是被丢弃了。

# android - 使用OpenGL-ES（android）画线的最简单方法是什么

> ID：16027455
> 
> 赞同：24
> 
> 时间：2013-04-16T01:46:32.827
> 
> 标签：android, opengl-es

如果我在 opengl-es 中准备了自定义渲染器：

```
public void onDrawFrame(GL10 gl)
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    // here i want to draw line from [0, 0, 0] to [1, 0, 0]
} 
```

画线最简单最快捷的方法是什么？

在普通的 OpenGL 中是：

```
glBegin(GL_LINES);
    glVertex3f(0, 0, 0);
    glVertex3f(1, 0, 0);
glEnd(); 
```

但是如何使用 OpenGL ES 获得相同的效果？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-25T19:46:42.893

我是 OpenGL ES 2.0 的新手，但我创建了一个线类。

```
public class Line {
    private FloatBuffer VertexBuffer;

    private final String VertexShaderCode =
        // This matrix member variable provides a hook to manipulate
        // the coordinates of the objects that use this vertex shader
        "uniform mat4 uMVPMatrix;" +

        "attribute vec4 vPosition;" +
        "void main() {" +
        // the matrix must be included as a modifier of gl_Position
        "  gl_Position = uMVPMatrix * vPosition;" +
        "}";

    private final String FragmentShaderCode =
        "precision mediump float;" +
        "uniform vec4 vColor;" +
        "void main() {" +
        "  gl_FragColor = vColor;" +
        "}";

    protected int GlProgram;
    protected int PositionHandle;
    protected int ColorHandle;
    protected int MVPMatrixHandle;

    // number of coordinates per vertex in this array
    static final int COORDS_PER_VERTEX = 3;
    static float LineCoords[] = {
        0.0f, 0.0f, 0.0f,
        1.0f, 0.0f, 0.0f
    };

    private final int VertexCount = LineCoords.length / COORDS_PER_VERTEX;
    private final int VertexStride = COORDS_PER_VERTEX * 4; // 4 bytes per vertex

    // Set color with red, green, blue and alpha (opacity) values
    float color[] = { 0.0f, 0.0f, 0.0f, 1.0f };

    public Line() {
        // initialize vertex byte buffer for shape coordinates
        ByteBuffer bb = ByteBuffer.allocateDirect(
            // (number of coordinate values * 4 bytes per float)
            LineCoords.length * 4);
        // use the device hardware's native byte order
        bb.order(ByteOrder.nativeOrder());

        // create a floating point buffer from the ByteBuffer
        VertexBuffer = bb.asFloatBuffer();
        // add the coordinates to the FloatBuffer
        VertexBuffer.put(LineCoords);
        // set the buffer to read the first coordinate
        VertexBuffer.position(0);

        int vertexShader = ArRenderer.loadShader(GLES20.GL_VERTEX_SHADER, VertexShaderCode);
        int fragmentShader = ArRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER, FragmentShaderCode);

        GlProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
        GLES20.glAttachShader(GlProgram, vertexShader);   // add the vertex shader to program
        GLES20.glAttachShader(GlProgram, fragmentShader); // add the fragment shader to program
        GLES20.glLinkProgram(GlProgram);                  // creates OpenGL ES program executables
    }

    public void SetVerts(float v0, float v1, float v2, float v3, float v4, float v5) {
        LineCoords[0] = v0;
        LineCoords[1] = v1;
        LineCoords[2] = v2;
        LineCoords[3] = v3;
        LineCoords[4] = v4;
        LineCoords[5] = v5;

        VertexBuffer.put(LineCoords);
        // set the buffer to read the first coordinate
        VertexBuffer.position(0);
    }

    public void SetColor(float red, float green, float blue, float alpha) {
        color[0] = red;
        color[1] = green;
        color[2] = blue;
        color[3] = alpha;
    }

    public void draw(float[] mvpMatrix) {
        // Add program to OpenGL ES environment
        GLES20.glUseProgram(GlProgram);

        // get handle to vertex shader's vPosition member
        PositionHandle = GLES20.glGetAttribLocation(GlProgram, "vPosition");

        // Enable a handle to the triangle vertices
        GLES20.glEnableVertexAttribArray(PositionHandle);

        // Prepare the triangle coordinate data
        GLES20.glVertexAttribPointer(PositionHandle, COORDS_PER_VERTEX,
                                 GLES20.GL_FLOAT, false,
                                 VertexStride, VertexBuffer);

        // get handle to fragment shader's vColor member
        ColorHandle = GLES20.glGetUniformLocation(GlProgram, "vColor");

        // Set color for drawing the triangle
        GLES20.glUniform4fv(ColorHandle, 1, color, 0);

        // get handle to shape's transformation matrix
        MVPMatrixHandle = GLES20.glGetUniformLocation(GlProgram, "uMVPMatrix");
        ArRenderer.checkGlError("glGetUniformLocation");

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv(MVPMatrixHandle, 1, false, mvpMatrix, 0);
        ArRenderer.checkGlError("glUniformMatrix4fv");

        // Draw the triangle
        GLES20.glDrawArrays(GLES20.GL_LINES, 0, VertexCount);

        // Disable vertex array
        GLES20.glDisableVertexAttribArray(PositionHandle);
    }
 } 
```

然后在我的 Render 类中，我创建我的线条对象和一个容器，以便通过迭代项目并在 onDrawFrame 中调用 Line.draw 方法来绘制。

以下是我创建的一些线来制作地平线：

```
 Line eastHorz = new Line();
    eastHorz.SetVerts(10f, 10f, 0f, 10f, -10f, 0f);
    eastHorz.SetColor(.8f, .8f, 0f, 1.0f);
    Line northHorz = new Line();
    northHorz.SetVerts(-10f, 10f, 0f, 10f, 10f, 0f);
    northHorz.SetColor(0.8f, 0.8f, 0f, 1.0f);
    Line westHorz = new Line();
    westHorz.SetVerts(-10f, -10f, 0f, -10f, 10f, 0f);
    westHorz.SetColor(0.8f, 0.8f, 0f, 1.0f);
    Line southHorz = new Line();
    southHorz.SetVerts(-10f, -10f, 0f, 10f, -10f, 0f);
    southHorz.SetColor(0.8f, 0.8f, 0f, 1.0f);
    Lines.add(eastHorz);
    Lines.add(northHorz);
    Lines.add(westHorz);
    Lines.add(southHorz); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-25T07:30:46.563

感谢*Rodney Lambert*您提供的*Line*课程。*但是，在onDrawFrame*中提供一个更简单的调用也会很好，例如：

```
Line vertLine = new Line();
vertLine.SetVerts(-0.5f, 0.5f, 0f, -0.5f, -0.5f, 0f);
vertLine.SetColor(.8f, .8f, 0f, 1.0f);
vertLine.draw(mMVPMatrix); 
```

*vertLine.SetVerts(-0.5f, 0.5f, 0f, -0.5f, -0.5f, 0f);*

绝对在视口内创建一条可见的线

# web-services - 使用 WSDL 动态调用 Web 服务

> ID：16027456
> 
> 赞同：-1
> 
> 时间：2013-04-16T01:46:35.623
> 
> 标签：web-services, apache-camel

我需要使用 WSDL 文件配置骆驼路线端点。

我不知道服务类，也不想将服务类文件放在我的类路径中。我只有 WSDL 文件。

我怎样才能解决我的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:19:49.820

定义camel cxf端点如下

```
<cxf:cxfEndpoint id="testServiceEndpoint" address="http://localhost:9000/web-service/TestService" wsdlURL="TestService.wsdl" serviceClass="com.webservice.AllServiceService" endpointName="s:TestServiceHttpSoap11Endpoint" serviceName="s:TestPutService" xmlns:s="http://webservices/testService"/> 
```

路由配置

```
<route>
    <from uri="cxf:bean:testServiceEndpoint"/>
<to uri="log:output?showAll=true" />
</route> 
```

**请注意，我已经提到了 serviceClass 属性，但是可以通过使用@WebServiceProvider**注释将这个类设为通用以处理所有 Web服务

```
@WebServiceProvider
@ServiceMode(Mode.PAYLOAD)
public class AllServiceService implements Provider<StreamSource> {

    @Override
    public StreamSource invoke(StreamSource request) {
    }
} 
```

# c# - C# 存储一个或多个原语

> ID：16027457
> 
> 赞同：0
> 
> 时间：2013-04-16T01:46:38.250
> 
> 标签：c#, operators, primitive, primitive-types

```
string noOfAccountsString = Console.ReadLine();
int noOfAccounts = int.Parse(noOfAccountsString); 
```

你会说这是不好的做法吗？什么时候可以只存储这些变量之一并在必要时对其执行相关操作？

那么代替上面的会更好吗？

```
int noOfAccounts = int.Parse(Console.ReadLine()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:58:46.093

不一定是不好的做法，只是偏好问题。不好的做法是假设用户将输入一个数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:30:42.557

如果您确定解析会发生，那么您可以立即执行它，我不会认为这是不好的做法。另外，我不会担心应用程序解析数字的速度，除非您这样做很多次。我会在解析之前使用 TryParse，特别是如果它是从用户那里接收的。

如果您在两行而不是一行上执行此操作，您的代码将更具可读性。

# r - 如何根据列名减少表维度

> ID：16027461
> 
> 赞同：2
> 
> 时间：2013-04-16T01:47:00.463
> 
> 标签：r, aggregate

我有一个表格，其格式如下

```
Class1 0.438 0.441 0.442 0.444 0.545 0.546 0.548 0.609 0.651 0.652 0.655 
  DAWO     2     2     0     1     0     0     0     1     1     5     1  
  DRWO     1     1     3     1     1     1     1     0     0     1     0   
  DHWO     1     2     0     0     0     0     0     0     0     0     0 
```

我想通过根据列名合并列并添加值来减小表格的尺寸。例如

```
Class1    0.4   0.5   0.6 
  DAWO     5     0     8      
  DRWO     6     3     1    
  DHWO     3     0     0 
```

这怎么可能？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:03:37.843

```
x <- read.table(header=TRUE, text="      0.438 0.441 0.442 0.444 0.545 0.546 0.548 0.609 0.651 0.652 0.655
DAWO     2     2     0     1     0     0     0     1     1     5     1
DRWO     1     1     3     1     1     1     1     0     0     1     0
DHWO     1     2     0     0     0     0     0     0     0     0     0   ", check.names=F) 
```

请注意，我没有复制 text `Class1`，因此`DAW0`等是原始集中的行名。

首先，进行转置以帮助解决`aggregate`：

```
tx <- as.data.frame(t(x)) 
```

这些是削减。假设值介于 0 和 1 之间。根据需要进行调整。

```
tx$bin <- cut(as.numeric(rownames(tx)), breaks=seq(0,1,.1)) 
```

将值相加，设置名称，然后再次转置：

```
xx <- aggregate(.~bin, data=tx, FUN=sum)
rownames(xx) <- xx$bin
t(xx[-1])
##      (0.4,0.5] (0.5,0.6] (0.6,0.7]
## DAWO         5         0         8
## DRWO         6         3         1
## DHWO         3         0         0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:49:39.450

这是另一种选择。使用@Matthew's answer中的“x”，您可以使用`strtim`您的姓名创建类别，并`sapply`在这些类别中进行汇总。

```
mymatch <- strtrim(names(x), 3)
sapply(unique(mymatch), function(y) rowSums(x[, mymatch == y, drop = FALSE]))
#      0.4 0.5 0.6
# DAWO   5   0   8
# DRWO   6   3   1
# DHWO   3   0   0 
```

或者，使用您的原始数据，您只需要小心一点，记住在获取时删除“Class1”列`rowSums`：

```
mymatch <- strtrim(names(mydf), 3)[-1]
cbind(mydf[1], 
      sapply(unique(mymatch), 
             function(y) rowSums(mydf[-1][, mymatch == y, drop = FALSE])))
#   Class1 0.4 0.5 0.6
# 1   DAWO   5   0   8
# 2   DRWO   6   3   1
# 3   DHWO   3   0   0 
```

最后，经典的“reshape2”方法涉及 a`melt`和`*cast`：

```
> library(reshape2)
> Stacked <- melt(mydf)
Using Class1 as id variables
> dcast(Stacked, Class1 ~ strtrim(variable, 3), fun.aggregate=sum)
  Class1 0.4 0.5 0.6
1   DAWO   5   0   8
2   DHWO   3   0   0
3   DRWO   6   3   1 
```

对于最后两个示例，`mydf`定义为：

```
mydf <- structure(list(Class1 = structure(c(1L, 3L, 2L), .Label = c("DAWO", 
"DHWO", "DRWO"), class = "factor"), `0.438` = c(2L, 1L, 1L), 
    `0.441` = c(2L, 1L, 2L), `0.442` = c(0L, 3L, 0L), `0.444` = c(1L, 
    1L, 0L), `0.545` = c(0L, 1L, 0L), `0.546` = c(0L, 1L, 0L), 
    `0.548` = c(0L, 1L, 0L), `0.609` = c(1L, 0L, 0L), `0.651` = c(1L, 
    0L, 0L), `0.652` = c(5L, 1L, 0L), `0.655` = c(1L, 0L, 0L)), 
.Names = c("Class1", "0.438", "0.441", "0.442", "0.444", "0.545", "0.546", 
"0.548", "0.609", "0.651", "0.652", "0.655"), class = "data.frame", 
row.names = c(NA, -3L)) 
```

# android - 如何使用 Facebook Graph API 检查 Facebook 页面中的位置

> ID：16027465
> 
> 赞同：1
> 
> 时间：2013-04-16T01:47:21.877
> 
> 标签：android, facebook, facebook-graph-api, android-fragments

我正在将 Facebook SDK 3.0 集成到我的 android 应用程序中，我有 facebook 页面 ID，我想向应用程序添加一个签入按钮，此按钮的操作是用户只能检查他/她是否在该位置/靠近这个地方（500M），如果不是我想显示错误警报。

我如何使用图形 API 使用 Facebook sDK 3.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:28:41.857

[如果您有页面 ID，则可以通过向https://graph.facebook.com/page_id](https://graph.facebook.com/page_id)发送请求来查询图形 API

结果应包含该地点的纬度/经度。您可以使用图形资源管理器自己尝试一下

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T22:56:50.403

更新到 api 要求您执行“/{pageId}?fields=location”，然后返回包含各种地理字段的 Location 对象类型。

# php - Twitter API 直接消息

> ID：16027469
> 
> 赞同：1
> 
> 时间：2013-04-16T01:47:41.020
> 
> 标签：php, twitter, twitter-oauth

我正在尝试编写一个脚本，该脚本将使用 POST direct_messages/new 向新关注者发送消息。我的帐户访问级别是读、写和直接消息，但我收到“您的凭据不允许访问此资源”，代码为：220。我不确定这是为什么。我错过了什么吗？

# php - 为什么这个 php 代码只输出一部分？

> ID：16027470
> 
> 赞同：0
> 
> 时间：2013-04-16T01:47:58.753
> 
> 标签：php, list, while-loop, each

```
<?php
    $products = array(
        array("name"=>"apple", "count"=>1),
        array("name"=>"google", "count"=>2),
        array("name"=>"ms", "count"=>4)
    );
    echo "one:<br/>";
    for ($i=0; $i < count($products); $i++) {
        foreach ($products[$i] as $key => $value) {
            echo $key."-".$value.",";
        } 
        echo "<br/>";
    }
    echo "<br/>two:<br/>";
    for ($j=0; $j < count($products); $j++) {
        while(list($k, $v) = each($products[$j])){
            echo $k."|".$v.",";
        }
        echo "<br/>";
    }
?> 
```

这段代码只是输出：

```
one:
name-apple,count-1,
name-google,count-2,
name-ms,count-4,

two: 
```

我想知道为什么这两部分不输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:53:10.437

因为每个子数组的内部数组指针已经在数组的末尾，当你尝试使用`each()`时没有什么可以返回。尝试这个：

```
echo "<br/>two:<br/>";
for ($j=0; $j < count($products); $j++) {
    reset( $products[$j]);
    while(list($k, $v) = each($products[$j])){
        echo $k."|".$v.",";
    }
    echo "<br/>";
} 
```

它所做的只是调用[`reset()`](http://php.net/reset)重置数组指针。

# ios - AVAudioPlayer 仅在后台播放 1 首歌曲

> ID：16027473
> 
> 赞同：0
> 
> 时间：2013-04-16T01:48:17.310
> 
> 标签：ios, avaudioplayer

我有一个 AVAudioPlayer 播放音乐并在当前歌曲完成后自动转到下一首歌曲。这在应用程序打开时完美运行，但当应用程序未打开时，它只会播放下一首歌曲一次。在后台播放一首歌曲后，

`- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag`

不会再被叫了。我有：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

在viewdidload中，但问题仍然存在，有谁知道会导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:19:08.983

您是否检查了 Supporting Files -> YourProject-Info.plist ->`Required background modes`和`App plays audio`该键中的项目？必须将其添加到 plist 才能在后台播放音乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T15:01:45.787

编辑：这是另一种方式，更少的错误：这会每半秒检查一次当前进度（可能更准确的歌曲更改时间更短）。只需调用以下两个选择器之一：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

或者以任何其他方法，这取决于你。

```
-(void ) sel1 {

[self performSelector:@selector(sel2) withObject:nil afterDelay:0.1];
NSLog(@"%f", ( _audioPlayer.duration -  _audioPlayer.currentTime) );

if (( _audioPlayer.duration - _audioPlayer.currentTime) < 0.5) {

    [self nextSong];
}

}

-(void) sel2 {

 [self performSelector:@selector(sel1) withObject:nil afterDelay:0.4];
} 
```

----- //旧方式// -----

如果有人仍在尝试解决这个问题，我发现这是最好的解决方案。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

float remaining = _audioPlayer.duration - _audioPlayer.currentTime;
[self performSelector:@selector(nextSong) withObject:nil afterDelay:remaining];

} 
```

只需在应用程序进入后台后执行选择器。这将强制 AVAudioPlayer 在当前声音结束后立即更改歌曲。您必须小心，因为每次应用程序进入后台都会设置一个新的选择器，它们会堆叠起来（因此它会同时多次调用选择器）。我用一个计数器解决了这个问题，始终保持在 1。像这样：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
if (counter == 0) {
float remaining = _audioPlayer.duration - _audioPlayer.currentTime;
[self performSelector:@selector(nextSong) withObject:nil afterDelay:remaining];
counter ++;
}

}

-(void) nextSong {
counter = 0;

//Next Song Method

} 
```

# c# - 确定字符串中的所有字符是否相同

> ID：16027475
> 
> 赞同：19
> 
> 时间：2013-04-16T01:49:01.140
> 
> 标签：c#, string, contains

我有一种情况，我需要尝试过滤掉虚假的 SSN 号码。从我目前看到的情况来看，如果它们是假的，它们都是相同的数字或 123456789。我可以过滤最后一个，但是有没有一种简单的方法来确定所有字符是否相同？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-16T01:51:57.140

return (ssn. [Distinct()](http://msdn.microsoft.com/en-us/library/bb348436.aspx) .Count() == 1)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T01:51:48.660

这种方法应该可以解决问题：

```
public static bool AreAllCharactersSame(string s)
{
    return s.Length == 0 || s.All(ch => ch == s[0]);
} 
```

解释：如果一个字符串的长度是0，那么当然所有的字符都是一样的。否则，如果字符串的所有字符都等于第一个字符，则它们都是相同的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T01:57:55.240

为了摆脱这个问题，因为我们正在谈论 SSN。您可以检查并使用[此](http://www.codeproject.com/Articles/9505/SSN-Validation-Web-Service)CodeProject 演示项目来验证 SSN。尽管这是在 VB.Net 中，但我想您也可以提出相同的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T01:51:23.740

抓住第一个字符，然后循环。

```
var ssn = "222222222";
var fc = ssn[0];

for(int i=0; i<ssn.Length; i++)
{
    if(ssn[i]!=fc)
        return false;
}

return true; 
```

当然你也应该检查长度`ssn`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-14T18:07:03.027

```
char[] chrAry = inputStr.ToCharArray();
char first = chrAry[0];

var recordSet = from p in chrAry where p != first select p;
return !recordSet.Any(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-20T12:16:31.197

你怎么看：

```
"jhfbgsdjkhgkldhfbhsdfjkgh".Distinct().Skip(1).Any() 
```

为了避免计算字符的整数？你应该在 null 或空之前检查。

# android - Viewpager：获取当前项目位置

> ID：16027476
> 
> 赞同：3
> 
> 时间：2013-04-16T01:49:03.637
> 
> 标签：android, android-viewpager

我正在从pageradapter（到asyctask）传递它的位置

*instanceiteItem（查看集合，int pos）{.execute（pos）；}*

但是**当我滑动到上一页时，它的位置错误**，我怎样才能得到正确的上一个位置？

也许我可以使用 ViewPager getCurrentItem() 来检索当前页面的索引，但是如何将它与我的代码一起使用？

```
public class QuestionPagerAdapter extends PagerAdapter{

    public QuestionPagerAdapter(){
        super();

    }
    @Override
    public int getCount() {
        int qcount = QuestionPagerAdapter.q.getQuestionCount();
        return qcount;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

    @Override
    public Object instantiateItem(View collection, int pos) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View page = inflater.inflate(R.layout.page_quiz, null);

        TextView tv = (TextView)page.findViewById(R.id.questionText);

        QuizFetchTask fft = new QuizFetchTask(tv);
        fft.execute(pos);

            ((ViewPager) collection).addView(page, 0);
        return page;
    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        //Util.Log("destroying" + position);
        ((ViewPager) collection).removeView((View) view);
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T02:27:33.773

您可能正在寻找的是`ViewPager.setOnPageChangeListener`

所以你可以做类似的事情：

```
myViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageScrolled(int i, float v, int i2) {

            }

            @Override
            public void onPageSelected(int i) {
               fft.execute(i)
            }

            @Override
            public void onPageScrollStateChanged(int i) {

            }
        }); 
```

另外，我不确定您在选择页面时尝试执行什么类型的任务，但首先取消前一个任务是有意义的..例如：

```
 @Override
                public void onPageSelected(int i) {
                   fft.cancel(true);
                   fft.execute(i)
                } 
```

所以你不只是产生一堆并发任务......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-27T03:50:22.710

此方法被添加到 ViewPager。所以你可以使用如下。

```
ViewPager viewPager = new ViewPager(...);

...... // set viewpager adapter

obj = viewPagerAdapter.getItem(viewPager.getCurrentItem()); 
```

# asp.net - 用于 Asp.Net 和 MVC 站点混合的表单身份验证单点登录

> ID：16027479
> 
> 赞同：1
> 
> 时间：2013-04-16T01:49:19.143
> 
> 标签：asp.net, asp.net-mvc, forms-authentication, single-sign-on

我有一个使用老式 asp.net (v2.0) 编写的旧应用程序，我需要将它与使用 MVC3、.Net 4.0 编写的新站点集成。（如有需要，旧站可升级至4.0）

这可能吗？我已经阅读了有关在多个站点上使用 SSO 和表单身份验证的信息，但是所有帖子都是关于多个 asp.net 或多个 MVC 站点的——我还没有看到任何关于将两者混合的内容。

如果两个站点都在同一个域下，并且具有相同的机器密钥，这应该工作吗？

编辑：这个问题的附加部分，如果可以使用表单身份验证使 SSO 工作，是否也可以允许这两个应用程序使用相同的会话状态服务，从而在应用程序之间共享会话状态？我知道 sessionid 存储在 cookie 中，所以两个应用程序都可以为单个用户访问相同的会话信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:02:57.607

表单身份验证受域限制（因为默认情况下，cookie 仅限于域（或子域，如果已配置）。如果在同一个域中，则可以。

不过，也可以进行变通以跨域共享身份验证。

一种解决方法是使用 Web 服务进行远程身份验证。每个涉及的站点都将使用相同的服务进行身份验证，即使身份验证仍然是特定于域的，也可以创建一种解决方法，包括将标识值传递给另一个域中的请求。该标识符将用于根据一些通用标识符（用户 ID、电子邮件等）自动验证用户身份。由于我们谈论的是 http 通信，它不一定“必须”是特定于 .net 的，尽管它会简单得多。

还需要考虑 OAuth 开放式身份验证协议。几乎所有主要平台都支持 OAuth，因此它应该与平台无关。但是，我不知道“重定向到您的其他应用程序时的自动身份验证可能违反 OAuth。如果是这种情况，用户将需要单击按钮来确认某些内容。

OAuth 的一个很好的例子就是 Stack Overflow 和整个 Stack Exchange 系列网站。

# php - 始终使用 CodeIgniter 分页类显示上一个和下一个链接

> ID：16027480
> 
> 赞同：6
> 
> 时间：2013-04-16T01:49:33.807
> 
> 标签：php, codeigniter, pagination, codeigniter-2

**问题描述**
当我在第一页时，`previous`链接没有显示，`next`当我在最后一页时，链接也是如此。我设置`$config['prev_link']='previous'`和`$config['next_link']='next'`。

**问题**
如何**始终**使用 CodeIgniter 分页类将不使用的**上一个**和**下一个**链接作为`<p>`标签呈现？

**更新**
最终自己解决。请参阅下面的解决方案。在 v2.1.3 上工作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T13:59:34.630

> **这是解决方案：**

1.  通过创建一个新文件来扩展 Codeigniter 分页类：`MY_Pagination.php`并将其放在`application/library`文件夹中。

2.  将所有变量和类前缀声明从 更改`protected`为`public`。

3.  在 MY_Pagination.php: 中定义两个公共变量，`$display_prev_link`并将`$display_next_link`其设置为`FALSE`.

4.  在 create_links() 函数中，在`if ($this->prev_link !== FALSE && $this->cur_page !== 1)`语句的末尾添加一条`elseif`语句：

    ```
    elseif ($this->display_prev_link && $this->cur_page === 1)
        $output .= $this->prev_tag_open.'<span>'.$this->prev_link.'</span>'.$this->next_tag_close; 
    ```

    以及`elseif`语句末尾的另一个`if ($this->next_link !== FALSE && $this->cur_page < $num_pages)`语句：

    ```
    elseif ($this->display_next_link && $this->cur_page >= $num_pages)
        $output .= $this->next_tag_open.'<span>'.$this->next_link.'</span>'.$this->next_tag_close; 
    ```

**所以现在，**

通过定义`$config['display_prev_link']`and`$config['display_prev_link']`等于`TRUE`or `FALSE`，您可以控制`Previous`and`Next`链接的显示。

这是完整的`application/library/MY_Pagination.php`文件：

```
<?php  

// Extends the Pagination Class
// Add an option of presenting the PREVIOUS and NEXT links when they're not needed.
// by setting $display_prev_link - and - $display_next_link to true

// !!! EDITIONS => LINES 263 AND 316 !!!

defined('BASEPATH') OR exit('No direct script access allowed');

class MY_Pagination extends CI_Pagination {

    public $display_prev_link = false;
    public $display_next_link = false;

    public $base_url        = '';
    public $prefix      = '';
    public $suffix      = '';
    public $total_rows      = 0;
    public $per_page        = 10;
    public $num_links       = 2;
    public $cur_page        = 0;
    public $use_page_numbers    = FALSE;
    public $first_link      = '&lsaquo; First';
    public $next_link       = '&gt;';
    public $prev_link       = '&lt;';
    public $last_link       = 'Last &rsaquo;';
    public $uri_segment     = 3;
    public $full_tag_open   = '';
    public $full_tag_close  = '';
    public $first_tag_open  = '';
    public $first_tag_close = '';
    public $last_tag_open   = '';
    public $last_tag_close  = '';
    public $first_url       = '';
    public $cur_tag_open        = '<strong>';
    public $cur_tag_close   = '</strong>';
    public $next_tag_open   = '';
    public $next_tag_close  = '';
    public $prev_tag_open   = '';
    public $prev_tag_close  = '';
    public $num_tag_open        = '';
    public $num_tag_close   = '';
    public $page_query_string   = FALSE;
    public $query_string_segment = 'per_page';
    public $display_pages   = TRUE;
    public $_attributes     = '';
    public $_link_types     = array();
    public $reuse_query_string   = FALSE;
    public $data_page_attr  = 'data-ci-pagination-page';

    // --------------------------------------------------------------------

    /**
     * Constructor
     *
     * @param   array   $params Initialization parameters
     * @return  void
     */
    public function __construct($params = array())
    {
        $this->initialize($params);
        log_message('debug', 'Pagination Class Initialized');
    }

    // --------------------------------------------------------------------

    /**
     * Initialize Preferences
     *
     * @param   array   $params Initialization parameters
     * @return  void
     */
    public function initialize($params = array())
    {
        $attributes = array();

        if (isset($params['attributes']) && is_array($params['attributes']))
        {
            $attributes = $params['attributes'];
            unset($params['attributes']);
        }

        // Deprecated legacy support for the anchor_class option
        // Should be removed in CI 3.1+
        if (isset($params['anchor_class']))
        {
            empty($params['anchor_class']) OR $attributes['class'] = $params['anchor_class'];
            unset($params['anchor_class']);
        }

        $this->_parse_attributes($attributes);

        if (count($params) > 0)
        {
            foreach ($params as $key => $val)
            {
                if (isset($this->$key))
                {
                    $this->$key = $val;
                }
            }
        }
    }

    // --------------------------------------------------------------------

    /**
     * Generate the pagination links
     *
     * @return  string
     */
    public function create_links()
    {
        // If our item count or per-page total is zero there is no need to continue.
        if ($this->total_rows === 0 OR $this->per_page === 0)
        {
            return '';
        }

        // Calculate the total number of pages
        $num_pages = (int) ceil($this->total_rows / $this->per_page);

        // Is there only one page? Hm... nothing more to do here then.
        if ($num_pages === 1)
        {
            //$uri_page_number = 1;
            //return '';
        }

        // Set the base page index for starting page number
        $base_page = ($this->use_page_numbers) ? 1 : 0;

        // Determine the current page number.
        $CI =& get_instance();

        // See if we are using a prefix or suffix on links
        if ($this->prefix !== '' OR $this->suffix !== '')
        {
            $this->cur_page = (int) str_replace(array($this->prefix, $this->suffix), '', $CI->uri->rsegment($this->uri_segment));
        }

        if ($CI->config->item('enable_query_strings') === TRUE OR $this->page_query_string === TRUE)
        {
            if ($CI->input->get($this->query_string_segment) != $base_page)
            {
                $this->cur_page = (int) $CI->input->get($this->query_string_segment);
            }
        }
        elseif ( ! $this->cur_page && $CI->uri->segment($this->uri_segment) !== $base_page)
        {
            $this->cur_page = (int) $CI->uri->rsegment($this->uri_segment);
        }

        // Set current page to 1 if it's not valid or if using page numbers instead of offset
        if ( ! is_numeric($this->cur_page) OR ($this->use_page_numbers && $this->cur_page === 0))
        {
            $this->cur_page = $base_page;
        }

        $this->num_links = (int) $this->num_links;

        if ($this->num_links < 1)
        {
            show_error('Your number of links must be a positive number.');
        }

        // Is the page number beyond the result range?
        // If so we show the last page
        if ($this->use_page_numbers)
        {
            if ($this->cur_page > $num_pages)
            {
                $this->cur_page = $num_pages;
            }
        }
        elseif ($this->cur_page > $this->total_rows)
        {
            $this->cur_page = ($num_pages - 1) * $this->per_page;
        }

        $uri_page_number = $this->cur_page;

        if ( ! $this->use_page_numbers)
        {
            $this->cur_page = (int) floor(($this->cur_page/$this->per_page) + 1);
        }

        // Calculate the start and end numbers. These determine
        // which number to start and end the digit links with
        $start  = (($this->cur_page - $this->num_links) > 0) ? $this->cur_page - ($this->num_links - 1) : 1;
        $end    = (($this->cur_page + $this->num_links) < $num_pages) ? $this->cur_page + $this->num_links : $num_pages;

        // Is pagination being used over GET or POST? If get, add a per_page query
        // string. If post, add a trailing slash to the base URL if needed
        if ($CI->config->item('enable_query_strings') === TRUE OR $this->page_query_string === TRUE)
        {
            $segment = (strpos($this->base_url, '?')) ? '&amp;' : '?';
            $this->base_url = rtrim($this->base_url).$segment.$this->query_string_segment.'=';
        }
        else
        {
            $this->base_url = rtrim($this->base_url, '/') .'/';
        }

        // And here we go...
        $output = '';
        $query_string = '';

        // Add anything in the query string back to the links
        // Note: Nothing to do with query_string_segment or any other query string options
        if ($this->reuse_query_string === TRUE)
        {
            $get = $CI->input->get();

            // Unset the controll, method, old-school routing options
            unset($get['c'], $get['m'], $get[$this->query_string_segment]);

            if ( ! empty($get))
            {
                // Put everything else onto the end
                $query_string = (strpos($this->base_url, '?') !== FALSE ? '&amp;' : '?')
                        .http_build_query($get, '', '&amp;');

                // Add this after the suffix to put it into more links easily
                $this->suffix .= $query_string;
            }
        }

        // Render the "First" link
        if ($this->first_link !== FALSE && $this->cur_page > ($this->num_links + 1))
        {
            $first_url = ($this->first_url === '') ? $this->base_url : $this->first_url;

            // Take the general parameters, and squeeze this pagination-page attr in there for JS fw's
            $attributes = sprintf('%s %s="%d"', $this->_attributes, $this->data_page_attr, 1);

            $output .= $this->first_tag_open.'<a href="'.$first_url.'"'.$attributes.$this->_attr_rel('start').'>'
                .$this->first_link.'</a>'.$this->first_tag_close;
        }

        // Render the "previous" link
        if ($this->prev_link !== FALSE && $this->cur_page !== 1)
        {
            $i = ($this->use_page_numbers) ? $uri_page_number - 1 : $uri_page_number - $this->per_page;

            // Take the general parameters, and squeeze this pagination-page attr in there for JS fw's
            $attributes = sprintf('%s %s="%d"', $this->_attributes, $this->data_page_attr, (int) $i);

            if ($i === $base_page && $this->first_url !== '')
            {
                $output .= $this->prev_tag_open.'<a href="'.$this->first_url.$query_string.'"'.$attributes.$this->_attr_rel('prev').'>'
                    .$this->prev_link.'</a>'.$this->prev_tag_close;
            }
            else
            {
                $append = ($i === $base_page) ? $query_string : $this->prefix.$i.$this->suffix;
                $output .= $this->prev_tag_open.'<a href="'.$this->base_url.$append.'"'.$attributes.$this->_attr_rel('prev').'>'
                    .$this->prev_link.'</a>'.$this->prev_tag_close;
            }

        } 
// !!!!!!!! START EDITION !!!!!!!!!!
        elseif ($this->display_prev_link && $this->cur_page === 1) {
                $output .= $this->prev_tag_open.'<span>'.$this->prev_link.'</span>'.$this->next_tag_close;
            }
// !!!!!!!! END EDITION !!!!!!!!!!

        // Render the pages
        if ($this->display_pages !== FALSE)
        {
            // Write the digit links
            for ($loop = $start -1; $loop <= $end; $loop++)
            {
                $i = ($this->use_page_numbers) ? $loop : ($loop * $this->per_page) - $this->per_page;

                // Take the general parameters, and squeeze this pagination-page attr in there for JS fw's
                $attributes = sprintf('%s %s="%d"', $this->_attributes, $this->data_page_attr, (int) $i);

                if ($i >= $base_page)
                {
                    if ($this->cur_page === $loop)
                    {
                        $output .= $this->cur_tag_open.$loop.$this->cur_tag_close; // Current page
                    }
                    else
                    {
                        $n = ($i === $base_page) ? '' : $i;
                        if ($n === '' && ! empty($this->first_url))
                        {
                            //$output .= $this->num_tag_open.'<a href="'.$this->first_url.$query_string.'"'.$attributes.$this->_attr_rel('start').'>'
                            //  .$loop.'</a>'.$this->num_tag_close;
                        }
                        else
                        {
                            $append = ($n === '') ? $query_string : $this->prefix.$n.$this->suffix;
                            $output .= $this->num_tag_open.'<a href="'.$this->base_url.$append.'"'.$attributes.$this->_attr_rel('start').'>'
                                .$loop.'</a>'.$this->num_tag_close;
                        }
                    }
                }
            }
        }

        // Render the "next" link
        if ($this->next_link !== FALSE && $this->cur_page < $num_pages)
        {
            $i = ($this->use_page_numbers) ? $this->cur_page + 1 : $this->cur_page * $this->per_page;

            // Take the general parameters, and squeeze this pagination-page attr in there for JS fw's
            $attributes = sprintf('%s %s="%d"', $this->_attributes, $this->data_page_attr, (int) $i);

            $output .= $this->next_tag_open.'<a href="'.$this->base_url.$this->prefix.$i.$this->suffix.'"'.$attributes
                .$this->_attr_rel('next').'>'.$this->next_link.'</a>'.$this->next_tag_close;
        } 
// !!!!!!!! START EDITION !!!!!!!!!!
        elseif ($this->display_next_link && $this->cur_page >= $num_pages) {
            $output .= $this->next_tag_open.'<span>'.$this->next_link.'</span>'.$this->next_tag_close;
        }
// !!!!!!!! END EDITION !!!!!!!!!!

        // Render the "Last" link
        if ($this->last_link !== FALSE && ($this->cur_page + $this->num_links) < $num_pages)
        {
            $i = ($this->use_page_numbers) ? $num_pages : ($num_pages * $this->per_page) - $this->per_page;

            // Take the general parameters, and squeeze this pagination-page attr in there for JS fw's
            $attributes = sprintf('%s %s="%d"', $this->_attributes, $this->data_page_attr, (int) $i);

            $output .= $this->last_tag_open.'<a href="'.$this->base_url.$this->prefix.$i.$this->suffix.'"'.$attributes.'>'
                .$this->last_link.'</a>'.$this->last_tag_close;
        }

        // Kill double slashes. Note: Sometimes we can end up with a double slash
        // in the penultimate link so we'll kill all double slashes.
        $output = preg_replace('#([^:])//+#', '\\1/', $output);

        // Add the wrapper HTML if exists
        return $this->full_tag_open.$output.$this->full_tag_close;
    }

    // --------------------------------------------------------------------

    /**
     * Parse attributes
     *
     * @param   array   $attributes
     * @return  void
     */
    public function _parse_attributes($attributes)
    {
        isset($attributes['rel']) OR $attributes['rel'] = TRUE;
        $this->_link_types = ($attributes['rel'])
                    ? array('start' => 'start', 'prev' => 'prev', 'next' => 'next')
                    : array();
        unset($attributes['rel']);

        $this->_attributes = '';
        foreach ($attributes as $key => $value)
        {
            $this->_attributes .= ' '.$key.'="'.$value.'"';
        }
    }

    // --------------------------------------------------------------------

    /**
     * Add "rel" attribute
     *
     * @link    http://www.w3.org/TR/html5/links.html#linkTypes
     * @param   string  $type
     * @return  string
     */
    public function _attr_rel($type)
    {
        if (isset($this->_link_types[$type]))
        {
            unset($this->_link_types[$type]);
            return ' rel="'.$type.'"';
        }

        return '';
    }

}

/* End of file Pagination.php */
/* Location: ./system/libraries/Pagination.php */ 
```

并且不要忘记设置`$config['$display_prev_link']`并`$config['$display_next_link']`设置为`true`或`false`根据您的需要。

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-25T04:30:08.787

示例：[http ://www.friv100flash.com/](http://www.friv100flash.com/)

```
$config['base_url'] = base_url(); // xác định trang phân trang
$config['total_rows'] = $this->Game_model->count_all(); // xác định tổng số record
$config['per_page'] = 120; // xác định số record ở mỗi trang
$config['uri_segment'] = 1; // xác định segment chứa page number
$config['num_links'] = 7;

$config['display_pages'] = TRUE;
$config['use_page_numbers'] = TRUE;

//Encapsulate whole pagination 
$config['full_tag_open'] = '<ul class="pagination">';
$config['full_tag_close'] = '</ul>';

//First link of pagination
$config['first_link'] = 'First';
$config['first_tag_open'] = '<li>>';
$config['first_tag_close'] = '</li>';

//Customizing the “Digit” Link
$config['num_tag_open'] = '<li>';
$config['num_tag_close'] = '</li>';

//For PREVIOUS PAGE Setup
$config['prev_link'] = 'prev';
$config['prev_tag_open'] = '<li>';
$config['prev_tag_close'] = '</li>';

//For NEXT PAGE Setup
$config['next_link'] = 'Next';
$config['next_tag_open'] = '<li>';
$config['next_tag_close'] = '</li>';

//For LAST PAGE Setup
$config['last_link'] = 'Last';
$config['last_tag_open'] = '<li>';
$config['last_tag_close'] = '</li>';

//For CURRENT page on which you are
$config['cur_tag_open'] = '<li class="active"><a href="#">';
$config['cur_tag_close'] = '</a></li>';
$this->pagination->initialize($config);

if($this->uri->segment(1) == 0)
{
    $offset = 0;
}
else
{
    $offset = ($config['per_page'])*($this->uri->segment(1)-1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:01:14.923

ci\system\libraries\Pagination.php

前

```
 if  ($this->prev_link !== FALSE AND $this->cur_page != 1)
    {
        if ($this->use_page_numbers)
        {
            $i = $uri_page_number - 1;
        }
        else
        {
            $i = $uri_page_number - $this->per_page;
        }

        if ($i == 0 && $this->first_url != '')
        {
            $output .= $this->prev_tag_open.'<a '.$this->anchor_class.'href="'.$this->first_url.'">'.$this->prev_link.'</a>'.$this->prev_tag_close;
        }
        else
        {
            $i = ($i == 0) ? '' : $this->prefix.$i.$this->suffix;
            $output .= $this->prev_tag_open.'<a '.$this->anchor_class.'href="'.$this->base_url.$i.'">'.$this->prev_link.'</a>'.$this->prev_tag_close;
        }

    } 
```

之后（添加最后 3 行）

```
 if  ($this->prev_link !== FALSE AND $this->cur_page != 1)
    {
        if ($this->use_page_numbers)
        {
            $i = $uri_page_number - 1;
        }
        else
        {
            $i = $uri_page_number - $this->per_page;
        }

        if ($i == 0 && $this->first_url != '')
        {
            $output .= $this->prev_tag_open.'<a '.$this->anchor_class.'href="'.$this->first_url.'">'.$this->prev_link.'</a>'.$this->prev_tag_close;
        }
        else
        {
            $i = ($i == 0) ? '' : $this->prefix.$i.$this->suffix;
            $output .= $this->prev_tag_open.'<a '.$this->anchor_class.'href="'.$this->base_url.$i.'">'.$this->prev_link.'</a>'.$this->prev_tag_close;
        }

    }
    else{
         $output .= '<span class="hidden">'.$this->prev_link.'</span>';
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T06:51:26.037

Codeigniter 分页库 pagination.php

```
class CI_Pagination { 

public $limit;

public $active_page;

public $query;

public $url;

function run_query(){
  $CI= &get_instance();
  $query= $CI->db->query($this->query)->result_array();
  return $query;  
}

function result(){
  $CI= &get_instance();
  $limit_start=($this->active_page - 1) * $this->limit;
  $limit_end=$this->limit;
  $query=$this->query.' order by id desc limit '.$limit_start.','.$limit_end;
  $query= $CI->db->query($query)->result_array();
  return $query; 
}

function size(){
  return sizeof($this->run_query());
}

function page_number(){
    ?>
    <ul class="pagination  no-margin">
        <li class="prev <?php if($this->active_page <= '1'){echo 'disabled';}else{echo '';} ?>">
            <a href="<?= $this->url ?>page=<?= $this->active_page-1 ?>">
                <i class="ace-icon fa fa-angle-double-left"></i>
            </a>
        </li>

        <?php 

            if($this->active_page >=10){$i=$this->active_page-8;}else{$i=2;} 

            $end_point=ceil($this->size()/$this->limit);
        ?>

        <li class="<?php if($this->active_page==$i){echo 'active';} ?>">
            <a href="<?= $this->url ?>page=1">1</a>
        </li>

        <li class="<?php if($this->active_page<=10){echo 'hide';} ?>">
            <a href="<?= $this->url ?>page=<?= $this->active_page-1 ?>">...</a>
        </li>

        <?php $n=1; for($i;$i<=$end_point-1;$i++){ if($n++ >=10){break;}?>

            <li class="<?php if($this->active_page==$i){echo 'active';} ?>">
                <a href="<?= $this->url ?>page=<?= $i ?>"><?= $i ?></a>
            </li>

        <?php } ?>

        <li class="<?php if($this->active_page>=($end_point-5)){echo 'hide';} ?>">
                <a href="<?= $this->url ?>page=<?= $this->active_page+1 ?>">...</a>
        </li>

        <li class="<?php if($this->active_page==$i){echo 'active';} ?>">
                <a href="<?= $this->url ?>page=<?= $end_point .'">'. $end_point ?></a>
        </li>

        <li class="next <?php if($this->active_page >=ceil($this->size()/$this->limit)){echo'disabled';}?>">
            <a href="<?= $this->url ?>page=<?= $this->active_page+1 ?>">
                <i class="ace-icon fa fa-angle-double-right"></i>
            </a>
        </li>
    </ul>
<?php
} 
```

}

在 Codeigniter 控制器中

```
$this->load->library('pagination');
        $this->pagination->active_page = $page;
        $this->pagination->url = base_url('admins/popup?');
        $this->pagination->limit='50';
        $this->pagination->query='select * from contact where admin_id like "%'.$data["client_id"][0]["client_id"].'%"';
        $this->pagination->run_query();
        $data['pagination_data'] = $this->pagination->result(); 
```

在 Codeigniter 视图中：

```
foreach ($pagination_data as $fet) { }
$this->pagination->page_number(); 
```

查询：

```
$(document).ready(function(){
            if($('#example >tbody >tr').length <=0){
              var row= document.getElementById("example").insertRow(-1);
              var cell1 = row.insertCell(0).colSpan=12;
              var cell1 = row.insertCell(0);
              cell1.innerHTML = "Result Not Found !";
            }
        }); 
```

# javascript - 我可以创建一个不打开滚动条的元素吗？

> ID：16027481
> 
> 赞同：3
> 
> 时间：2013-04-16T01:49:52.640
> 
> 标签：javascript, html, google-chrome, css

我们有可能部分在屏幕上的浮动面板。窗口/主体在决定是否需要显示滚动条时可以忽略它吗？

当其他元素超出窗口时，我们确实需要滚动条，但不是这个面板。所以溢出：隐藏在身体上是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:57:06.777

如果我理解正确，您应该只能说：

`body { overflow: auto; }`

如果您想控制元素溢出的访问权限，请尝试以下操作：

`body { overflow-x: auto; overflow-y: hidden; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:15:02.737

相对于视口定位的对象`position: fixed`不影响滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:26:08.140

我刚刚举了一个例子来展示这种行为。不过，我对您的布局一无所知。

### HTML

```
<div>
    <div class="pnlContent left"><!-- put as much content as you want here it will put a scroll bar on the body as the content opverflows --> 
        <p>
        Why use Modernizr?
Taking advantage of cool new web technologies is great fun, until you have to support browsers that lag behind. Modernizr 

makes it easy for you to write conditional JavaScript and CSS to handle each situation, whether a browser supports a 

feature or not. It’s perfect for doing progressive enhancement easily.

How it works
Modernizr runs quickly on page load to detect features; it then creates a JavaScript object with the results, and adds 

classes to the html element for you to key your CSS on. Modernizr supports dozens of tests, and optionally includes 

YepNope.js for conditional loading of external .js and .css resources.

            Check out the full list of features that Modernizr detects, or learn more about conditional resource loading 

with Modernizr.</P>
 </div>
 <div class="pnlWrapperNoOf right"> <!-- put as much content as you want here it will just be hidden --> 
        <div class="panel">
            <p>We have floating panels that may be partially in screen. Can the window/body ignore it when it decides if 

scroll bar needs to show?

                We do need scroll bar when other elements go outside of the window, but not this panel. So overflow:hidden 

on the body won't work.</p>
               <p>We have floating panels that may be partially in screen. Can the window/body ignore it when it decides if 

scroll bar needs to show?

                We do need scroll bar when other elements go outside of the window, but not this panel. So overflow:hidden 

on the body won't work.</p>
        </div>
    </div
</div> 
```

### CSS

```
div
{
    border:1px solid #cecece;
}
div.pnlWrapperNoOf
{
    max-height:300px;
    overflow:hidden;
}
div.left
{
    float:left;
    width:49%;
}
div.right
{
    float:right;
    width:49%;
} 
```

# types - C++/CX - 检查对象的类型？

> ID：16027483
> 
> 赞同：0
> 
> 时间：2013-04-16T01:50:07.293
> 
> 标签：types, windows-runtime, c++-cx

是否可以在 C++/CX 中检查对象的类型？

我有一个从 ICustomObject 派生的对象向量，当我从向量中枚举对象时，我想知道实际的对象类型是什么。这样我就知道我应该可以访问该对象的哪些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:37:41.103

您可以使用 dynamic_cast - 如果对象是 MyObjectType 的对象，则结果将为非 null，如果是另一种类型，则结果将为 nullptr。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:23:22.107

我发现这很好用！

```
 Type^ meh = element->GetType(); 
```

# sql-server-2008 - SQL Select，基于多个条件的特定行？

> ID：16027485
> 
> 赞同：0
> 
> 时间：2013-04-16T01:50:17.127
> 
> 标签：sql-server-2008, select

不知道是不是因为我累了，但我似乎无法弄清楚......

我正在寻找一个查询，它将根据几个项目过滤数据......

样本数据：

```
Business_Month  ID  Calls   Transferred Loaded
11/1/2012 0:00  119118  226 16  12/19/12 15:56
12/1/2012 0:00  119118  333 17  1/15/13 23:54
1/1/2013 0:00   119118  284 6   3/13/13 17:49
1/1/2013 0:00   119118  284 6   3/20/13 13:03
1/1/2013 0:00   119118  284 6   3/20/13 13:25
2/1/2013 0:00   119118  219 8   3/20/13 13:25
3/1/2013 0:00   119118  17  0   3/20/13 13:03
3/1/2013 0:00   119118  17  0   3/20/13 13:25
11/1/2012 0:00  120327  216 13  12/19/12 15:56
12/1/2012 0:00  120327  211 12  1/15/13 23:54
1/1/2013 0:00   120327  255 8   3/13/13 17:49
1/1/2013 0:00   120327  255 8   3/20/13 13:03
1/1/2013 0:00   120327  255 8   3/20/13 13:25
2/1/2013 0:00   120327  166 9   3/20/13 13:25
3/1/2013 0:00   120327  13  2   3/20/13 13:03
3/1/2013 0:00   120327  13  2   3/20/13 13:25 
```

我想要返回的是一行，每个业务月，对于每个具有最高加载日期的唯一 ID...

样本输出：

```
Business Month  ID  Calls   Transferred Loaded
11/1/2012 0:00  119118  226 16  12/19/12 15:56
12/1/2012 0:00  119118  333 17  1/15/13 23:54
1/1/2013 0:00   119118  284 6   3/20/13 13:25
2/1/2013 0:00   119118  219 8   3/20/13 13:25
3/1/2013 0:00   119118  17  0   3/20/13 13:25
11/1/2012 0:00  120327  216 13  12/19/12 15:56
12/1/2012 0:00  120327  211 12  1/15/13 23:54
1/1/2013 0:00   120327  255 8   3/20/13 13:25
2/1/2013 0:00   120327  166 9   3/20/13 13:25
3/1/2013 0:00   120327  13  2   3/20/13 13:25 
```

我尝试了不同的东西，但似乎无法弄清楚......我正在使用 MS SQL Server......

希望有人可以提供帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:53:31.430

```
;WITH x AS 
(
  SELECT [Business_Month], ID, Calls, Transferred, Loaded,
    rn = ROW_NUMBER() OVER 
    (PARTITION BY ID, [Business Month] ORDER BY Loaded DESC)
  FROM dbo.yourtable
)
SELECT [Business Month], ID, Calls, Transferred, Loaded
FROM x
WHERE rn = 1
ORDER BY ID, [Business Month]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:00:39.947

您可以使用子查询来获取`max(loaded)`每个值`business_month`，然后将其连接回您的表以获得所需的结果：

```
select t1.Business_Month,
  t1.ID,
  t1.Calls,
  t1.Transferred,
  t1.Loaded
from yourtable t1
inner join
(
  select Business_Month, 
    max(Loaded) MaxLoaded
  from yourtable
  group by Business_Month
) t2
  on t1.Business_Month = t2.Business_Month
  and t1.Loaded = t2.MaxLoaded
order by t1.id, t1.business_month; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bdd7f/4)

# mysql - 通过插件或 MySQL 将资产与条目批量关联

> ID：16027489
> 
> 赞同：0
> 
> 时间：2013-04-16T01:50:28.123
> 
> 标签：mysql, movabletype

我使用 Asset Handler 插件 -- [https://github.com/naoaki011/mt-plugin-assethandler](https://github.com/naoaki011/mt-plugin-assethandler) -- 从我没有使用资产的迁移安装中一次将一大堆资产上传到 MT。我想做的是找到一些自动方法将每个资产与一个条目相关联，其中在条目本身的某处提到了用于每个资产的文件名。

我四处寻找是否有插件可以执行此操作，但没有任何结果。也许一些 MySQL 代码可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:52:08.583

您能否也准确地说“将每个资产与条目相关联”是什么意思？您希望关联出现在 CMS UI 中（列出资产的条目编辑屏幕和引用它“使用”的条目的资产编辑屏幕？）还是您的目标是别的？

如果您需要的是 MT 中对象的有效关联，那么 MT Perl API 是一个很好的途径。我需要一个输入文本/资产的例子和你的预期结果来给你一个例子。

# python - 使用 XML 解析

> ID：16027491
> 
> 赞同：0
> 
> 时间：2013-04-16T01:50:38.177
> 
> 标签：python, list, parsing

我试图解析一个网络博客页面并将某些数据提取到一个列表中。这是xml..

[http://www-01.ibm.com/software/support/lifecycle/rss/PLCWeeklyXMLDownload.xml](http://www-01.ibm.com/software/support/lifecycle/rss/PLCWeeklyXMLDownload.xml)

有多条记录，但我需要从每条记录中提取软件标题、版本号、版本号、ModLevelNumber 和服务终止日期（如果有）并将它们放入列表中

我正在运行 python 代码，但我是 xml 新手，感谢任何帮助

```
 def myDownload():
   import xml.etree.ElementTree as et
   import urllib.request
   response = urllib.request.urlopen("http://www-01.ibm.com/software/support/lifecycle/rss/PLCWeeklyXMLDownload.xml")
   tree = et.parse(response)
   root = tree.getroot()
   aList=[]

   for child in root:
      for node in child.findall("SWTitle"):
        title = node.text
        aList.append(title)
      for nodes in child.findall("Versions"):
        for version in nodes.findall("Version"):
          for release in version.findall("Release_Mods"):
            for mod in release.findall("Release_Mod"):
              rNum = mod.find("releaseNumber")
              rNumber = rNum.text
              nNum = mod.find("modLevelNumber")
              nNumber=nNum.text
              aList.append(rNumber)
              aList.append(nNumer) 
```

任何人都可以帮助调整此代码，因为它似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:25:42.673

使用 lxml 库来解析 xml。ElementTree 不适用于更多嵌套标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:58:19.930

您可以为此使用[lxml](http://lxml.de/tutorial.html)库：

```
import requests
from lxml import etree

r = requests.get('http://www-01.ibm.com/software/support/lifecycle/rss/PLCWeeklyXMLDownload.xml')
xml = r.content
xml_dom = etree.fromstring(xml)

# Iterate over <SWTitleRecord>
for record_node in xml_dom:
    data = {}
    for attr_node in record_node:
        if attr_node.tag == 'SWTitle'
            data['title'] = attr_node.text
        elif attr_node.tag == 'Versions':
            # parse versions
    ... 
```

# html - 验证错误：“此时元素输入上不允许属性只读。”

> ID：16027496
> 
> 赞同：2
> 
> 时间：2013-04-16T01:51:01.470
> 
> 标签：html, validation

当我尝试验证以下 HTML 时：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>test page</title>
    </head>
    <body>
        <input type="text" name="testInput" value="test value" readonly="readonly" style="background-color: #e3e3e3;">
    </body>
</html> 
```

[验证器](http://validator.w3.org/check)给出错误：

```
Line 8, Column 118: Attribute readonly not allowed on element input at this point. 
```

但是在错误详细信息中它说：

```
readonly when type is text, ... 
```

由于这是文本输入，为什么我会收到验证错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:56:25.723

这是 W3C 标记验证器中的错误；我已经提交了一个[错误报告](https://www.w3.org/Bugs/Public/show_bug.cgi?id=21708)。

在等待修复错误（我预计很快会发生）时，请改用[validator.nu](http://validator.nu/)服务。

***更新：***该错误现已修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-07T10:44:57.503

`readonly`仅在以下输入类型上允许使用属性：

*   文本
*   搜索
*   网址
*   电话
*   电子邮件
*   密码
*   日期
*   月
*   星期
*   时间
*   本地日期时间
*   数字

对于任何其他输入类型，如`hidden`，您不允许拥有`readonly`，在这种情况下您可能会得到：

> 错误：此时元素输入上不允许属性只读。

# css - 仅在 Safari Mac OS 中定位固定 CSS

> ID：16027498
> 
> 赞同：1
> 
> 时间：2013-04-16T01:51:03.907
> 
> 标签：css, safari

我目前在一个网站上遇到一个固定的 div 标头问题，该问题仅在带有 Mac OS 的 Safari 中出现。

本质上，有一个 div 的 css 属性为“位置：固定”，但是当在 Safari Mac OS 中滚动时（仅）标题的某些部分保持固定，而另一些则没有。有趣的是，当 javascript/jQuery 插件导致刷新时，固定的标头会快速回到它应该在的位置。

该网站是[http://www.v2.ledcentral.com.au/](http://www.v2.ledcentral.com.au/)。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:57:04.330

我已经看到 position:fixed 经常导致一些跨浏览器问题。我发现一个更好的方法是制作标题，然后在它下面有一个 div，它本身是可滚动的（它们不会滚动标题下的东西）。

```
|---Browser Viewport----|
| |-------------------| ^
| | Title Bar Content | |
| | fixed position    | |
| | can change v-size | |
| |-------------------| |
|                       |
| Main Content          |
| which                 |
| runs                  |
| off                   |
| the                   |
| screen below          v
|-----------------------| 
```

或者

```
|---Browser Viewport----|
|                       |
|  Title Bar Content    |
|  fixed position       |
|  but can change size  |
| |-------------------| |
| |Main Content       ^ |
| |which              | |
| |runs               | |
| |out of             | |
| |this div, below    v                  
| |-------------------| |
|-----------------------| 
```

我希望这能解释我在说什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:55:43.747

当我遇到这种问题时，我用这个 CSS 包装整个“元素/s”：

```
.wrapper {
    width: 100%;
    overflow: hidden;
    position: relative;
} 
```

这段代码片段长期以来一直是我的救世主......

运气，希望对你有帮助

# excel - 如何在一个单元格中获得 20 个随机样本的平均值？对于excel

> ID：16027499
> 
> 赞同：-1
> 
> 时间：2013-04-16T01:51:04.017
> 
> 标签：excel, random, average

如何在一个单元格中获得 20 个随机样本的平均值？for excel 这是为了 excel 中的空间，也是因为我需要它来获取 1000 个这些样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:18:46.830

如果我理解这个问题，你有 1000 个样本并且想要每组 20 个的滚动平均值？

无论如何，为了学习，我决定解决它并提出：

```
=AVERAGE(INDIRECT("R"&(((ROW()-1)*20)+1)&"C"&1,FALSE):INDIRECT("R"&(ROW()*20)&"C"&1,FALSE)) 
```

这假定值为 A1:A1000。这将进入 B1:B##。我真诚地怀疑我是否理解这个问题，但无论如何它很有趣。

# javascript - 创建不同 Kinetic.Image()、image.getImage() 未定义的数组？

> ID：16027502
> 
> 赞同：2
> 
> 时间：2013-04-16T01:51:16.680
> 
> 标签：javascript, kineticjs

我正在使用`javascriptKinetic`.

```
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.2.min.js"></script> 
```

我需要`Kinetic.Images()`用不同的图像创建一个数组。这是我的代码。

```
var imagesRef = ["cNote.gif","dNote.gif","eNote.gif","fNote.gif","gNote.gif","aNote.gif","cNote.gif","cSharpdFlat.gif","dSharpeFlat.gif","fSharpgFlat.gif","gSharpaFlat.gif","aSharpbFlat.gif"];                                                                        
    var imageObjs=[] ;
    var imageObj;
    var images=[];
    var image;
    var imageX = 0;
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 200
      });
      var layer = new Kinetic.Layer();
  function drawImages(){
  for(i=0;i<11;i++){
    var imageObj = new Image();
    imageObjs[i] = imageObj;
    imageObjs[i].src= imagePath + imagesRef[i];

    alert(imageObjs[i].src);
    imageObjs[i].onload = function(){
      alert("imageOnload has been called");
    var image = new Kinetic.Image({
           x:imageX,
           y:0,
           image:imageObjs[i],
           width:75,
           height:75,
           stroke:'black',
           strokeWidth:1,
           strokeEnabled:true
        });

        alert("image has been created");
        alert(image.getImage());
    images[i] = image;
    layer.add(images[i]);
    imageX += 75;
    layer.draw();
    }

  }
   }
stage.add(layer);

</script>

 <input type="button" onclick="drawImages();"id="submit" value="submit" /> 
```

单击按钮时，它应该加载图像。但相反，只有中风`kinetic.image`被加载

所以我看到的是一排矩形，里面没有像它应该的图像。在`imageObjs[i].src`警报“图像已创建”之前，每次迭代循环时都会触发警报。当我尝试时，`alert(image.getImage())`我变得不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:37:53.580

我认为这可能是因为您没有定义 variable `imagePath`。

# android - 在显示内容之前显示进度对话框

> ID：16027512
> 
> 赞同：0
> 
> 时间：2013-04-16T01:52:47.840
> 
> 标签：android, multithreading

```
 progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");
     Thread thread = new Thread() {

        public void run() {
            latch.countDown();
            try{
                sleep(3000);        
                } 
            catch (Exception e) {       
                Log.e("tag", e.getMessage());       
            }

            progressDialog.dismiss();

        }

    };
    thread.start();   listView.setAdapter(adapter); 
```

我想在 3 秒内显示加载，然后显示列表视图，但列表总是立即显示。如何在显示列表视图之前完成线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:07:34.720

你不应该让人们无缘无故地等待。如果您有要加载的内容，请加载它。否则尽可能画出你能画的。

作为对您的特定问题的回答，您需要在线程`setAdapter`休眠 3 秒后让线程（现在该调用在线程之外......我认为您认为该调用阻塞，但这就是线程的全部意义，它在执行其余代码时做自己的事情）。

但是， Thread 不能对您的显示线程做任何事情（除了抛出异常），因此您必须将该`listView.setAdapter(adapter)`调用包装在 a 中`Runnable`并通过 a`Handler`从您的 Thread...调用它。

但不要！

# django - 我可以为 Django 日期时间字段设置特定的默认时间吗？

> ID：16027516
> 
> 赞同：28
> 
> 时间：2013-04-16T01:53:31.843
> 
> 标签：django, datetime, django-models

我有一个几乎总是在晚上 10:00 开始的事件模型，但有时可能会更早/更晚开始。为了让管理员更轻松，我希望时间默认为晚上 10 点，但如果需要可以更改；无论如何都需要设置日期，因此它不需要默认值，但理想情况下它会默认为当前日期。

我意识到我可以使用 datetime.now 来完成后者，但是是否可以（以及如何）将时间设置为特定的默认值？

更新：我得到答案的速度比我想知道哪个（s）做我想要完成的事情要快......在我问之前，我可能应该进一步了解该应用程序。感谢您在此期间的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T23:49:23.557

来自 Django 文档`Field.default`：

> 字段的默认值。这可以是一个值或可调用对象。如果可调用，则每次创建新对象时都会调用它。

所以这样做：

```
from datetime import datetime, timedelta

def default_start_time():
    now = datetime.now()
    start = now.replace(hour=22, minute=0, second=0, microsecond=0)
    return start if start > now else start + timedelta(days=1)  

class Something(models.Model):
    timestamp = models.DateTimeField(default=default_start_time) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-08-04T10:02:20.683

如果您有兴趣将默认值设置为[TimeField](https://docs.djangoproject.com/en/1.8/ref/models/fields/#timefield)：[https ://code.djangoproject.com/ticket/6754](https://code.djangoproject.com/ticket/6754)

不：

```
start = models.TimeField(default='20:00') 
```

改为：

```
import datetime
start = models.TimeField(default=datetime.time(16, 00)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-16T16:29:02.810

`datetime.time(16, 00)`不起作用。

如果`datetime.time(datetime.now())`您试图获取当前时间或`datetime.time(your_date_time)`

**其中 your_date_time = datetime.datetime 对象**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T02:55:22.833

你见过这个吗？[https://docs.djangoproject.com/en/dev/ref/models/fields/#default](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)

这可能就是你要找的。

这里也讨论了：[Django 模型中字段的默认值](https://stackoverflow.com/questions/755857/default-value-for-field-in-django-model)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-16T02:01:26.580

像这样的东西？

```
import datetime

dt = datetime.now()
dt.hour = 22
dt.minute = 0
dt.second = 0 
```

没有上下文很难更具体。

# string - 如何将 MATLAB 数组的所有元素合并为一个字符串？

> ID：16027518
> 
> 赞同：2
> 
> 时间：2013-04-16T01:54:28.990
> 
> 标签：string, matlab, matrix

如果我有这样的事情：

```
m = [0 1 0 0 1 1] 
```

我想把它变成

```
s = '010011' 
```

在 Python 中，这很简单：

```
m = [0, 1, 0, 0, 1, 1]
s = ''.join(m)
# s = '010011' 
```

我如何在 MATLAB 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:58:28.053

请记住，Python 会自动进行类型转换 - Matlab（和大多数其他语言）更挑剔一些。因此，您需要对数组的每个元素手动进行类型转换。我相信

```
myString = sprintf('%1d', m); 
```

应该这样做 - 虽然我实际上无法检查它，因为我家里的电脑上没有 matlab。试试看 - 告诉我这是否不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:04:25.110

我认为另一种方法可能是：

```
s=num2str(m);
s(s==' ')=''; 
```

或者

```
s=regexprep(num2str(m),'[^\w]','') 
```

# amazon-web-services - 使用 FPT/SCP 将文件拉到 S3 的最佳方法是什么？

> ID：16027520
> 
> 赞同：5
> 
> 时间：2013-04-16T01:55:07.550
> 
> 标签：amazon-web-services, amazon-s3

每隔几分钟将 FPT/SCP 文件传输到 S3 的最佳、轻量级方法是什么？所以 wget/curl 可以工作。自定义解决方案也可以工作，也许是 Java 和 DB 来维护状态。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T02:38:11.973

只需使用[`s3cmd`](http://s3tools.org/s3cmd)or[`boto`](http://boto.readthedocs.org/en/latest/)或[S3 命令行工具](http://aws.amazon.com/code/1710)或...嗯...很多其他选项。

基本上你只是发布到 S3 API。您可以使用 AWS 的无数开发工具包以几乎任何语言执行此操作。`s3cmd`但是，它是一个不错的轻量级 CLI 小工具，可能超出您的需要。

您的评论表明您正在寻找稍微不同的东西。以下是基于文件的来源和目的地的一些建议：

*   如果您要将文件**从 EC2 或您的 localhost 移动到 S3**，请使用[`s3cmd`](http://s3tools.org/s3cmd). 如果您需要定期运行它，请考虑使用[cron 作业](http://www.linuxweblog.com/crotab-tutorial)。以下将每五分钟运行一次。

    ```
    */5 * * * * s3cmd sync --delete-removed my_local_directory/ s3://my-bucket/path/ 
    ```

*   如果您将文件**从 S3 移动到 EC2 或您的 localhost**，请使用[`s3cmd`](http://s3tools.org/s3cmd)但反转语法：

    ```
    */5 * * * * s3cmd sync s3://my-bucket/path/ my_local_directory/ 
    ```

*   如果您要将文件**从 localhost 移动到 EC2**，请考虑[`scp`](http://linux.die.net/man/1/scp)或[`rsync`](http://linux.die.net/man/1/rsync)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T00:14:25.520

您可以将 S3 存储桶挂载为本地分区并使用位于服务器文件系统上的 S3 文件。有[许多](https://code.google.com/p/s3fs/)[不错](https://github.com/iij/s3fuse-fvs)的开源工具可用。

但就我而言，我建议您看看我的项目：[RioFS](https://github.com/skoobe/riofs)，一个用于挂载 Amazon S3 存储桶的用户空间文件系统。与其他类似工具相比，项目的目标和主要优势是：简单、操作速度和无错误的代码。

目前该项目处于“beta”状态，但它已经在几个高负载文件服务器上运行了相当长的一段时间（[RioFS](https://github.com/skoobe/riofs)提供了对 ftp / sftp 服务器的 S3 文件的访问）。

我们正在围绕我们的项目建立一个社区，并正在寻找更多的人加入我们的项目，以讨论未来的计划并帮助测试。在我们这边，我们会提供快速的错误修复，并将听取您添加新功能的请求。

快速操作方法：

您可以使用以下命令挂载存储桶（假设您已安装 RioFS 并已导出 AWSACCESSKEYID 和 AWSSECRETACCESSKEY 环境变量）：

`riofs http://s3.amazonaws.com your_bucket_name /path/to/localfolder`

（请参阅项目的描述并运行`riofs --help`以获得有关命令行参数的帮助）

请注意，该项目仍在开发中，可能仍存在许多错误。如果您发现某些事情没有按预期工作：请在项目的 GitHub 页面上填写问题报告。

希望它有所帮助，我们期待看到您加入我们的社区！

# r - 将分类变量重新编码为二进制 (0/1)

> ID：16027521
> 
> 赞同：2
> 
> 时间：2013-04-16T01:55:09.147
> 
> 标签：r, recode

有人可以帮助我使用`ifelse`.

我有一个`data.frame`（dat），其中有一个名为 Q1（`dat$Q1`）的分类变量/因子。`dat$Q1`被编码为 1、2、3 或 4。我需要`data$new1`根据以下规则创建一个新列：

如果`dat$Q1 == 3`那么`dat$new1`应该是`1`。否则，`dat$new1`应该是`0`。

请问最有效的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T01:58:41.987

使用`ifelse`如下：

```
dat$new1 <- ifelse(dat$Q1==3, 1, 0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T02:18:32.443

只是：

```
 dat$new1 <-  0+(dat$Q1==3)  # or use as.numeric(.) 
```

# google-drive-api - 将 Google Drive 的默认文件夹更改为驱动器根目录？(D:)

> ID：16027524
> 
> 赞同：4
> 
> 时间：2013-04-16T01:55:22.027
> 
> 标签：google-drive-api

如何将 Google Drive 文件夹的默认位置更改为驱动器根目录？在这种情况下，D:?

在注册表中的哪个位置，或者此信息保存在哪个配置文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-18T05:04:04.940

这是我在某处发现的笏。

从帐户注销，下次登录时，在第 2 页将有高级设置，可让您更改位置。

此处给出了详细的详细信息。

[http://gappstips.com/docs-tips/view/106/change-the-google-drive-default-folder](http://gappstips.com/docs-tips/view/106/change-the-google-drive-default-folder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T12:24:01.103

编辑2：这种方法可能不再起作用。留下答案供参考。

编辑：谨慎使用，对某些人不起作用...

以下过程不需要您删除并重新下载 Google Drive 文件夹。正如[在这个线程中](http://productforums.google.com/forum/#!topic/drive/2BTBo8G3res)发现的：

1.  通过选择菜单栏中的图标（PC 上的任务栏）并单击“退出”来退出 Drive。
2.  将 Google Drive 文件夹移动到所需位置。
3.  当您再次打开云端硬盘时，云端硬盘图标菜单中会显示一条错误消息，提示您找不到 Google 云端硬盘文件夹。单击该消息。
4.  在弹出的窗口中单击“查找文件夹”，导航到您将其移动到的位置，然后单击“重新连接”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T19:59:04.240

纯粹靠运气——就在辞职之前——我找到了解决办法！我刚刚第十次断开连接并注销。重命名不起作用，它不会接受新文件夹。这次我刚刚没有删除、重命名或移动 Google Drive 文件夹的先前版本，位于 Drive 自动放置的位置。因此，在重新安装（双击下载的 Drive 应用程序图标）并这次登录 Drive 后，我收到一条消息，因为它试图重新下载 Google Drive 文件夹不为空。它现在提示我找到一个新的空文件夹！我能够转到我的另一个硬盘驱动器 - 这是第二个内部硬盘驱动器，但它可能会让我选择任何位置 - 只要我给它一个空文件夹就不会抱怨。顺便说一下，我选择的文件夹没有命名为 Google Drive，因为那是我的偏好。我在 Mac Snow Leopard 上，10.6.8。这是 2014 年 8 月下载的 Google Drive 版本。（我现在需要继续使用这个操作系统，但最新版本的 Drive 或我检查过的任何主要免费云系统都不支持它。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T03:41:46.500

1.  退出 Google 云端硬盘计划
2.  将 google drive 文件夹重命名为其他名称
3.  重新启动并重新登录 Google Drive 程序
4.  您将收到一条错误消息，指出无法找到 google drive 文件夹，并且能够选择一个新位置，创建一个新文件夹，将其命名为“google drive”。

现在将下载驱动器数据。

# loops - pacman 循环问题，图像不显示/移动

> ID：16027526
> 
> 赞同：0
> 
> 时间：2013-04-16T01:56:22.687
> 
> 标签：loops, pygame

好的，所以我在做一个 pacman 任务（在 bascialy pacman 和 ghosts 在屏幕上移动并且 pacman 从他们身上反弹之前发布过，但是当点击鼠标时，ghosts 会反弹他并改变为“害怕的图像”，并且尽我所能告诉我解决了我的本地错误等但是现在我的代码似乎根本没有显示任何精灵当我将最后的框架和边界代码移动到顶部时它们会显示但都在屏幕的一个点上没有移动. 有什么建议吗？

```
import pygame
from random import *

#Core values/images for game 
pygame.init()

#define ghost collisons in orignal mode to alter pacmans movement

def ghost_collision():

    pacman_velocity[0] = randint(-1,1)
    pacman_velocity[1] = randint(-1,1)
    if pacman_velocity[0] < 0:
        pacman = pygame.image.load(PACMAN_LEFT).convert()
    elif pacman_velocity[0] > 0:
        pacman = pygame.image.load(PACMAN_RIGHT).convert()
    return pacman_velocity

#define mode 2 as ghosts changing to scared and bouncing off pacman
def mode_switch():

    global blue_right, orange_right, pink_right,\
          red_right, blue, orange, pink, red
    global mode
    if mode == False:
        mode = True
        blue = pygame.image.load(GHOST_SCARED).convert()
        orange = pygame.image.load(GHOST_SCARED).convert()
        pink = pygame.image.load(GHOST_SCARED).convert()
        red = pygame.image.load(GHOST_SCARED).convert()
    else:
        mode = False
        if blue_right == True:
            blue = pygame.image.load(BLUE_LEFT).convert()
            blue_right = False
        else:
            blue = pygame.image.load(BLUE_RIGHT).convert()
            blue_right = True
    if orange_right == True:
        orange = pygame.image.load(ORANGE_LEFT).convert()
        orange_right = False
    else:
        orange = pygame.image.load(ORANGE_RIGHT).convert()
        orange_right = True
    if pink_right == True:
        pink = pygame.image.load(PINK_LEFT).convert()
        pink_right = False
    else:
        pink = pygame.image.load(PINK_RIGHT).convert()
        pink_right = True
    if red_right == True:
        red = pygame.image.load(RED_LEFT).convert()
        red_right = False
    else:
        red = pygame.image.load(RED_RIGHT).convert()
        red_right = True

PACMAN_LEFT = 'pacman-left.png'
PACMAN_RIGHT = 'pacman-right.png'
BLUE_LEFT = 'blue-left.png'
BLUE_RIGHT = 'blue-right.png'
ORANGE_LEFT = 'orange-left.png'
ORANGE_RIGHT = 'orange-right.png'
PINK_LEFT = 'pink-left.png'
PINK_RIGHT = 'pink-right.png'
RED_LEFT = 'red-left.png'
RED_RIGHT = 'red-right.png'
GHOST_SCARED = 'vulnerable.png'
BOUNCE_SOUND = 'Thump.wav'
SOUND = pygame.mixer.Sound(BOUNCE_SOUND)
WIDTH = 1200
HEIGHT = 800
BACKGROUND_COLOUR = 0, 0, 0
CAPTION = 'Pacman'

pacman_left = True
pacman_right = True
blue_right = False
orange_right = True
pink_right = False
red_right = True
mode = False

frame = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption(CAPTION)
pacman = pygame.image.load(PACMAN_RIGHT).convert()

#Sprites and defined boundaries
pacman_boundary = pacman.get_rect(center = (300,300))
pacman_velocity = [1, 1]
blue = pygame.image.load(BLUE_LEFT).convert()
blue_boundary = pacman.get_rect(center = (300,300))
blue_velocity = [-1, -1]
orange = pygame.image.load(ORANGE_RIGHT).convert()
orange_boundary = pacman.get_rect(center = (300,300))
orange_velocity = [1, -1]
pink = pygame.image.load(PINK_LEFT).convert()
pink_boundary = pacman.get_rect(center = (300,300))
pink_velocity = [-1, 1]
red = pygame.image.load(RED_RIGHT).convert()
red_boundary = pacman.get_rect(center = (300,300))
red_velocity = [1, 1]

finished = False
while not finished:
    pygame.event.pump()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            finished = True
        if event.type == pygame.MOUSEBUTTONUP:
            mode_switch()

    #####################################################
# Boundary sets for all sprite's (could use list but lack skill and time)
if pacman_boundary.left < 0 or pacman_boundary.right > WIDTH:
    SOUND.play()
    pacman_velocity[0] = -1 * pacman_velocity[0]
    if pacman_velocity[0] < 0:
        pacman = pygame.image.load(PACMAN_LEFT).convert()
    elif pacman_velocity[0] > 0:
        pacman = pygame.image.load(PACMAN_RIGHT).convert()
    pacman_velocity[1] = randint(-1,1)

if pacman_boundary.top < 0 or pacman_boundary.bottom > HEIGHT:
    SOUND.play()
    pacman_velocity[1] = -1 * pacman_velocity[1]

if mode == False:        
    if pacman_boundary.colliderect(blue_boundary)\
       or pacman_boundary.colliderect(orange_boundary)\
       or pacman_boundary.colliderect(pink_boundary)\
       or pacman_boundary.colliderect(red_boundary):
        ghost_collision()

    #####################################################

if blue_boundary.left < 0 or blue_boundary.right > WIDTH:
    blue_velocity[0] = -1 * blue_velocity[0]
    if mode == False:
        if blue_right == True:
            blue = pygame.image.load(BLUE_LEFT).convert()
            blue_right = False
        else:
            blue = pygame.image.load(BLUE_RIGHT).convert()
            blue_right = True

if blue_boundary.top < 0 or blue_boundary.bottom > HEIGHT:
    SOUND.play()
    blue_velocity[1] = -1 * blue_velocity[1]

if mode == True:
    if pacman_boundary.colliderect(blue_boundary):

        blue_velocity[0] = randint(-1,1)
        blue_velocity[1] = randint(-1,1)

#####################################################

if orange_boundary.left < 0 or orange_boundary.right > WIDTH:
    orange_velocity[0] = -1 * orange_velocity[0]
    if mode == False:
        if orange_right == True:
            orange = pygame.image.load(ORANGE_LEFT).convert()
            orange_right = False
        else:
            orange = pygame.image.load(ORANGE_RIGHT).convert()
            orange_right = True

if orange_boundary.top < 0 or orange_boundary.bottom > HEIGHT:
    SOUND.play()
    orange_velocity[1] = -1 * orange_velocity[1]

if mode == True:
    if pacman_boundary.colliderect(orange_boundary):
        orange_velocity[0] = randint(-1,1)
        orange_velocity[1] = randint(-1,1)

#####################################################

if pink_boundary.left < 0 or pink_boundary.right > WIDTH:#
    pink_velocity[0] = -1 * pink_velocity[0]
    if mode == False:
        if pink_right == True:
            pink = pygame.image.load(PINK_LEFT).convert()
            pink_right = False
        else:
            pink = pygame.image.load(PINK_RIGHT).convert()
            pink_right = True

if pink_boundary.top < 0 or pink_boundary.bottom > HEIGHT:
    SOUND.play()
    pink_velocity[1] = -1 * pink_velocity[1]

if mode == True:
    if pacman_boundary.colliderect(pink_boundary):
        pink_velocity[0] = randint(-1,1)
        pink_velocity[1] = randint(-1,1)

#####################################################

if red_boundary.left < 0 or red_boundary.right > WIDTH:
    red_velocity[0] = -1 * red_velocity[0]
    if mode == False:
        if red_right == True:
            red = pygame.image.load(RED_LEFT).convert()
            red_right = False
        else:
            red = pygame.image.load(RED_RIGHT).convert()
            red_right = True

if red_boundary.top < 0 or red_boundary.bottom > HEIGHT:
    SOUND.play()
    red_velocity[1] = -1 * red_velocity[1]

if mode == True:
    if pacman_boundary.colliderect(red_boundary):
        red_velocity[0] = randint(-1,1)
        red_velocity[1] = randint(-1,1)

#####################################################

pacman_boundary = pacman_boundary.move(pacman_velocity)
blue_boundary = blue_boundary.move(blue_velocity)
orange_boundary = orange_boundary.move(orange_velocity)
pink_boundary = pink_boundary.move(pink_velocity)
red_boundary = red_boundary.move(red_velocity)
frame.fill(BACKGROUND_COLOUR)
frame.blit(pacman, pacman_boundary)
frame.blit(blue, blue_boundary)
frame.blit(orange, orange_boundary)
frame.blit(pink, pink_boundary)
frame.blit(red, red_boundary)
pygame.display.flip()

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:59:04.787

除非您帖子的格式已关闭，否则您的所有游戏循环逻辑现在似乎都在循环之外。请记住，Python 对缩进很敏感，因此所有代码都以：

```
if pacman_boundary.left < 0 or pacman_boundary.right > WIDTH: 
```

不在循环内：

```
finished = False
while not finished: 
```

你所有的绘图代码都是在游戏循环之后发生的，所以在当前的形式下，它只会被渲染一次，就在`pygame.quit()`被调用之前。

# r - readLines 未知 n

> ID：16027528
> 
> 赞同：0
> 
> 时间：2013-04-16T01:56:24.037
> 
> 标签：r

在 gui（无论是 Windows gui 还是 RStudio 等）中，我可以`readLines`通过指定`n=?`. 如果我不确定正在读取的行数怎么办（即，我有很多行但不知道 n）。如何`readLines`在不指定 n 的情况下在 gui 中使用（从不是外部文件中的脚本读取）？如果您不提供 n，它`readLines`会保持连接打开并继续读取行。点击 esc 会停止该功能，但不会读取任何行。

```
x <- readLines(n=4)
** preparing package for lazy loading
** help
*** installing help indices
** building package indices

x 
```

[这是一个](http://www.youtube.com/watch?v=XpM3vRCSDk0&feature=youtu.be)演示我要问的具体问题的视频。

当海报以奇怪的格式（如下所示）为您提供数据并且您想在不计算所有行的情况下读取它时，这特别有用：

```
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices 
```

**编辑**直到重新打开并且Dason可以回答自己......

Dason 建议使用 ctrl + z 这有效（至少在 Windows 机器上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:11:42.043

两个简单的解决方案。

1.  将文本放入另一个文件，然后阅读。

2.  不要使用`readLines`. 引用正文：

```
x <- strsplit("** preparing package for lazy loading
** help
*** installing help indices
** building package indices
", "\n")

x
[[1]]
[1] "** preparing package for lazy loading" "** help"                               "*** installing help indices"          
[4] "** building package indices" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:47:47.413

在 Windows 环境中选择并复制到剪贴板后：

```
 (clip.input <- readLines( file("clipboard") ) ) 
```

在 Mac/UNIX 中：

```
 (clip.input <- readLines( pipe("pbpaste") ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:12:23.600

您可以在文本周围加上引号并创建一个`textConnection`阅读

```
text <- "** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** preparing package for lazy loading
** help
*** installing help indices
** building package indices"

readLines(textConnection(text))
# [1] "** preparing package for lazy loading" "** help"                              
# [3] "*** installing help indices"           "** building package indices"          
# [5] "** preparing package for lazy loading" "** help"                              
# [7] "*** installing help indices"           "** building package indices"          
# [9] "** preparing package for lazy loading" "** help"                              
#[11] "*** installing help indices"           "** building package indices"          
#[13] "** preparing package for lazy loading" "** help"                              
#[15] "*** installing help indices"           "** building package indices"          
#[17] "** preparing package for lazy loading" "** help"                              
#[19] "*** installing help indices"           "** building package indices" 
```

# iphone - OpenCV 校准代码

> ID：16027529
> 
> 赞同：0
> 
> 时间：2013-04-16T01:56:41.447
> 
> 标签：iphone, ios, opencv, calibration

好吧，这是我为 iPhone 5 校准的尝试。它很糟糕，我不知道为什么。它似乎正确地找到了角落，是的，需要校准 27 张图像。结果是对棋盘的立体主义重新解释。谁能帮我找出错误？我很高兴与世界分享最终版本以及最终参数，这样其他人就不必做这一切了。

```
int board_w = 8; // Board width in squares
int board_h = 5; // Board height
int n_boards = 20; // Maximum number of boards
int board_n = board_w * board_h;//Number of internal corners. 

cv::Size board_sz = cv::Size( board_w, board_h ); // Dimensions of board

cv::vector<cv::vector<cv::Point3f>> object_points; // place to store location of points in 3d. 
cv::vector<cv::vector<cv::Point2f>> image_points; // place to store points in 2d. 

cv::Mat point_counts   =     cv::Mat( n_boards, 1, CV_32SC1 );
cv::Mat intrinsic_matrix  =  cv::Mat( 3, 3, CV_32FC1 );
cv::Mat distortion_coeffs =  cv::Mat( 5, 1, CV_32FC1 );

cv::vector<cv::Mat> rvecs;
cv::vector<cv::Mat> tvecs;

std::vector<cv::Point2f> imageCorners;

for (int i=1; i<27; i++)

{

    NSLog(@"Processing image %d", i);

    NSString *currentPhoto = [[NSString alloc] initWithFormat:@"Board%d", i];

    NSString* pathToImageFile = [[NSBundle mainBundle] pathForResource:currentPhoto ofType:@"jpeg"];

    UIImage* image = [UIImage imageWithContentsOfFile:pathToImageFile];

    cv::Mat imageMat = [self cvMatFromUIImage:image];
    cv::Mat imageMatGray;
    cv::cvtColor(imageMat,imageMatGray,CV_RGB2GRAY);

    // Find chessboard corners:
    int found = cv::findChessboardCorners( imageMat, board_sz, imageCorners, CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS );

    // Get subpixel accuracy on those corners

    cv::cornerSubPix(imageMatGray, imageCorners,  cvSize( 11, 11 ),
                     cvSize( -1, -1 ), cv::TermCriteria( CV_TERMCRIT_EPS+CV_TERMCRIT_ITER, 30, 0.1 ));

    cv::drawChessboardCorners(imageMat, board_sz, imageCorners, found);

    self.image.image = [self UIImageFromCVMat:imageMat];

    cv::vector<cv::Point3f> obj;
    for(int j=0;j<40;j++)
    {
        obj.push_back(cv::Point3f(j/board_h, j%board_h, 0.0f));

    }

    image_points.push_back(imageCorners);
    object_points.push_back(obj);

}

intrinsic_matrix.ptr<float>(0)[0] = 1;
intrinsic_matrix.ptr<float>(1)[1] = 1;

NSString* pathToImageFile2 = [[NSBundle mainBundle] pathForResource:@"Board200" ofType:@"JPG"];

NSLog(pathToImageFile2);

UIImage* image2 = [UIImage imageWithContentsOfFile:pathToImageFile2];
![enter image description here][1]

self.image.image = image2;

cv::Mat distortedImage = [self cvMatFromUIImage:image2];

cv::Mat undistortedImage;

calibrateCamera(object_points, image_points, distortedImage.size(), intrinsic_matrix, distortion_coeffs, rvecs, tvecs);

cv::undistort(distortedImage, undistortedImage, intrinsic_matrix, distortion_coeffs);

image2 = [self UIImageFromCVMat:undistortedImage];

self.image.image = image2; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-20T21:53:33.110

小错误。

```
cv::Size board_sz = cv::Size( board_w, board_h ); // Dimensions of board 
```

应该：

```
cv::Size board_sz = cv::Size( board_h, board_w ); // Dimensions of board 
```

我也在研究这个，所以不确定它是否完美，但这是我发现的一个问题。

# php - HTML 字符的预匹配问题

> ID：16027534
> 
> 赞同：0
> 
> 时间：2013-04-16T01:57:38.130
> 
> 标签：php, html-parsing, preg-match

我真的不确定为什么这不起作用，因为我知道它`(.*?)`应该匹配所有字符。我感觉这可能与 HMTL 中的特殊字符有关？

这是我的代码

```
preg_match( '/butt_box(.*?)img/',$return_string, $returned_val); 
```

这是我要提取的 HTML（尝试提取 butt_box 和之后的第一个 img 标记之间的内容。

```
<table class="butt_box">
        <tbody><tr>
          <td style="width:100%;">
            <div class="product_box3_price" style="padding: 15px 0 0 0; text-align:center;"><strong>Price Unavailable</strong><br>
            </div>
          </td>

          <td>
            <div style="padding: 9px 0 6px 0"><a href="http://www.xxxxxx.com.au/index.php?main_page=product_info&amp;products_id=1399"><img src="includes/templates/theme243/buttons/english/button_goto_prod_details.gif" alt="Go To This Product's Detailed Information" title=" Go To This Product's Detailed Information " width="144" height="36"></a><br>
            </div>
          </td>
        </tr>
        </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:05:01.023

您需要使用`s`PCRE 修饰符来允许点匹配换行符。

```
preg_match( '/butt_box(.*?)img/s',$return_string, $returned_val); 
```

# mysql - 如何将单个 MSSQL 表导出到 MySQL？

> ID：16027535
> 
> 赞同：2
> 
> 时间：2013-04-16T01:57:40.897
> 
> 标签：mysql, sql-server, sql-server-2008, import, export

我有一些表，其中包含来自 MSSQL 2008 r2 的数据，我需要将它们导出到文件然后导入到 MySQL。导出整个数据库将花费太多时间，因为它太大了，我只需要选择几个表。

我在标题上注明“单个”的原因是因为我打算简单地一一导出必要的表。以免事情复杂化。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T07:21:00.413

我知道这是一个旧帖子，但我遇到了类似的问题。

我通过创建一个 php 脚本从 MS SQL 表中选择所有值并将其附加到 MYSQL db 来解决它。一旦你有了所有的数据，你甚至可以创建一个 sql 脚本文件，即如果系统上没有安装 MYSQL。

还有 RedGate 的优秀工具，它可能会给你任何你想要的东西。我自己从未使用过它，但听说过它。

[http://www.red-gate.com/products/sql-development/sql-toolbelt/](http://www.red-gate.com/products/sql-development/sql-toolbelt/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T02:12:52.537

您可以使用导出导入向导从 SQL Server Management Studio 中执行此操作。

请参阅[导出导入向导](http://msdn.microsoft.com/en-us/library/ms140052%28v=sql.105%29.aspx)

在这种情况下，您将使用 SQL Server 数据库表作为源，并将 MySQL 数据库表作为目标。

# java - Android - 显示黑屏的自定义视图

> ID：16027537
> 
> 赞同：0
> 
> 时间：2013-04-16T01:57:48.520
> 
> 标签：java, android, xml, layout

我在这里有一个自定义视图，但不幸的是它显示黑屏。

我的 xml 文件“tester1”

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<view
    class="pap.crowslanding.GameView"
    android:id="@+id/game_view"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</view>
</LinearLayout> 
```

我使用布局的活动似乎很好

```
package pap.crowslanding;

import android.os.Bundle;
import android.widget.Button;

public class Game extends MainActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.tester1);

    //GameView gameView = (GameView) findViewById(R.id.game_view);
    Button button = (Button) findViewById(R.id.sbutton);

}
} 
```

最后，未正确显示的 GameView 活动

```
package pap.crowslanding;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;
import android.view.View;

public class GameView extends SurfaceView {
static final long FPS = 10;
public Bitmap bmp;
public SurfaceHolder holder;
public LoopGameThread loopGameThread;
public Sprite sprite;
public LayoutInflater inflater;

public GameView(Context context) {
    super(context);
    loopGameThread = new LoopGameThread(this);
    holder = getHolder();
    holder.addCallback(new Callback() {

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {

        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            loopGameThread.isStart(true);
            loopGameThread.start();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {

        }

    });
    bmp = BitmapFactory.decodeResource(getResources(), R.drawable.crow);
    sprite = new Sprite(this, bmp);
}
public GameView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO
}

public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    sprite.onDraw(canvas);

}

} 
```

任何帮助将不胜感激，感谢您阅读

编辑：

这是我的 Sprite 的 onDraw()

```
public void onDraw(Canvas canvas) {
    update();

    int srcX = currentFrame * width;
    int srcY = direction * height;

    src = new Rect(srcX, srcY, srcX + width, srcY + height);
    dst = new Rect(x, y, x + width, y + height);
    canvas.drawBitmap(bmp, src, dst, null);
} 
```

不幸的是，精灵和 GameView 在我实现自定义布局之前工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:23:59.450

您的问题是您尝试包含视图的方式：

```
<view
    class="pap.crowslanding.GameView"
    android:id="@+id/game_view"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</view> 
```

这应该是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.mypackage.pap.crowslanding.GameView // <--replace with fully qualified class name
    android:id="@+id/game_view"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:57:46.683

是的，我找到了修复程序，它应该很明显&如果有人遇到我的问题，这里是修复程序。

```
public GameView(Context context) {
    super(context);
    // TODO
}
public GameView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO
}

public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    //PUT YOUR CODE IN HERE
} 
```

我的问题是我将代码放在上下文、上下文中，而且我是新手，所以我无法解释它，也许是因为它位于底部，所以（上下文属性）它最后被初始化并覆盖了我不知道的其他代码。

也许有人可以评论和启发每个人和我自己对我所做的事情。

谢谢

# ip - HTML 如何找到您的 IP

> ID：16027538
> 
> 赞同：0
> 
> 时间：2013-04-16T01:57:54.280
> 
> 标签：ip, client-server

网站如何找到并显示您的 IP？例如，在 whatismyip.org 的顶部，它会显示“您的 IP 是：xxxx”。网站如何做到这一点？我知道它与客户端-服务器通信有关，但我不确定如何从 html 与服务器通信。我可以使用什么库或语言来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:01:02.630

不是“HTML”在做这件事，而是在为 HTML 提供服务的服务器做这件事。要通过网站响应您的计算机，服务器需要知道您的 IP，它从 TCP/IP 握手中获得。服务器只是将此 IP 输出到 HTML 页面中。

示例 PHP 脚本：

```
<html>
...

Your IP: <?php echo $_SERVER['REMOTE_ADDR']; ?>

...
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:19:23.233

HTML 只是一种纯粹用于向在客户端内部运行的浏览器显示格式化文本的语言。它没有获取IP地址等信息的能力。只有服务器端可以获取您的 IP，因为 Web 浏览的工作原理是，当您连接到特定域或网址时，它会将您的浏览器连接到服务器，您的浏览器（客户端）会提供详细信息，例如 IP 和浏览器的客户端名称（例如 Chrome/Safari/Firefox），因此服务器现在具有 IP 地址等信息。为了显示这一点，您可以使用 Web 编程中常见的脚本语言，如 PHP/Python/PERL。

# jquery - JQM 从表单选项中获取值

> ID：16027546
> 
> 赞同：2
> 
> 时间：2013-04-16T01:58:42.327
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-select

我有一些基本的 HTML 即；

```
 <select id="list1">
        <option value="1">Item1</option>
        <option value="2" selected="selected" >Item2</option>
    </select>
    <select id="list2">
        <option value="3">Item3</option>
        <option value="4">Item4</option>
    </select> 
```

默认情况下，我隐藏了 #list2 并在将 #List1 更改为选项值 2 时显示...

```
 $('#list2').hide();

    $('#list1').on('change', function () {
     if ($(this).val() == '2') {
      $('#list2').parent('div').hide();
     } else {
       $('#list2').parent('div').show();
    }
    }); 
```

我想知道的是，如果页面加载时动态选择的值为“2”，我该如何显示列表 2。即不是在事件之后，而是在事件之前。

提前感谢您的任何帮助/建议。我想知道的是，我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:29:52.587

Working example: [http://jsfiddle.net/Gajotres/uX3NL/](http://jsfiddle.net/Gajotres/uX3NL/)

Few things to notice, data-role="none" is added to second select. It will prevent jQuery mobile from showing it even if display is set to none. That's why I am removing that attribute, then showing the select and restyling it with a function **selectmenu**.

**Javascript :**

```
$(document).on('pagebeforeshow', '#index', function(){       
    if($('#list1').find(":selected").val() == 2) {
        $('#list2').removeAttr('data-role').show().selectmenu();
    }
}); 
```

**CSS :**

```
#list2 {
    display: none;
} 
```

**HTML :**

```
 <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <select id="list1">
                <option value="1">Item1</option>
                <option value="2" selected="selected">Item2</option>
            </select>
            <select id="list2" data-role="none">
                <option value="3">Item3</option>
                <option value="4">Item4</option>
            </select>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:21:39.170

您可以在页面加载时触发更改事件

```
$("#list1").trigger("change"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:01:35.503

我使用以下方法使其工作。$('#list2').hide();

```
 var selVal = $("#vlist1 :selected").val() ;

     if (selVal == 2) {

     $('#list2').show(); 
```

# c++ - 8个8位字符数组示意图

> ID：16027547
> 
> 赞同：0
> 
> 时间：2013-04-16T01:58:44.950
> 
> 标签：c++, memory, integer, double, memory-address

下图是 8 个 8 位（1 字节）字符数组使用的内存图。对 8 个 32 位整数和 8 个 64 位双精度数组做类似的图表。

```
 Byte (Character)    1   2   3   4   5   6   7   8
    Index               0   1   2   3   4   5   6   7
    Address             n   n+1 n+2 n+3 n+4 n+5 n+6 n+7 
```

各位大佬知道这是什么意思吗？

32位整数的字节是0001吗？它的地址呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:44:20.283

这个我可以试一试。我相信它只展示了两件事：索引是如何将数据作为数组寻址，而地址是内存中的任意地址。

对于 32 位的情况（假设为小端），您将拥有

```
Word      1                |  2  
Index     0                |  1  
Address   n+0 n+1 n+2 n+3  |  n+4 n+5 n+6 n+7 
```

前 4 个地址字节是 little endian 32 位第一个字。第二个 4 个地址字节是下一个 32 位字。继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:50:56.300

我认为这是一个旨在让您思考数组索引和实际内存地址之间差异的练习。索引 1 处的整数，即`myarray[1]`，将在 address 处找到，`n+4`因为 32 位整数是 4 字节宽。

所以也许 32 位的情况看起来像这样？

```
32-Bit Integer      1     2     3    4    5    6    7    8
Index               0     1     2    3    4    5    6    7
Address             n   n+4   n+8 n+12 n+16 n+20 n+24 n+28 
```

# assembly - MIPS - 打印字符串导致尝试打印数组值时出错

> ID：16027551
> 
> 赞同：1
> 
> 时间：2013-04-16T01:58:56.440
> 
> 标签：assembly, mips

没有任何字符串，这个程序运行良好。但是，当我添加代码块时，上面写着“如果我把这个块拿出来运行”，我会收到一个错误，上面写着“在这里导致错误”。我得到的错误是“0x00400028 处的运行时异常：地址超出范围 0x00000002”

我不知道为什么会收到此错误。我看不出打印字符串会给我一个错误，试图从堆栈中打印一个 int。

我已经尝试解决这个问题几个小时了，但我没有找到 MIPS 的太多帮助或资源，因此任何帮助将不胜感激并标记为有用。

```
.data 
.align 2
list:  .space 40    #an array of 10 ints
blank: .asciiz " "  
mess: .asciiz "The values in the array are "    

.globl main
.text

main:
    jal read

    li $v0, 4
    la $a0, mess
    syscall

    jal print
    jal total
    jal average
    lw $a0, 0($sp)  #load avererage from stack
    li $t0, 1   #print it
    syscall     #causes ERROR here                     ############
    b done      #end program

#reads in 10 digits into array      
read:
    li $v0, 5       #prompts for int
    syscall
    sw $v0, list($t0)   #stores int in array

    addi $t0, $t0, 4    #holds the number 4
    blt $t0, 40, read   #repeats until array is full
    jr $ra          #return to caller

#prints array   
print:
    lw $a0, list($t1)   #loads int from array
    li $v0, 1       #print int
    syscall

    li $v0, 4       #if I take this block out it runs      ########
    la $a0, blank       #
    syscall         #

    addi, $t1, $t1, 4   #counter 
    blt $t1, 40, print  #repeats until array it full
    jr $ra          #return to caller

#adds the total of all array elements 
total:
    lw $t3, list($t2)   #gets ints from array 
    add $s0, $s0, $t3   #adds number to running total
    addi $t2, $t2, 4    #counter 
    blt $t2, 40, total  #repeat until all ints are added
    addi $sp, $sp, -4   #allocate space on array
    sw $s0, 0($sp)      #store total on stack
    jr $ra          #return to caller

#divides the total by 10, for the average       
average:
    lw $a0, 0($sp)      #gets the total from the stack
    addi $t4, $t4, 10   #10 to divide by
    div $a0, $t4 
    mflo $t5
    sw $t5, 0($sp)      #store aveg in stack
    jr $ra      

done: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:53:41.413

你忘了设置`$v0`为 1。我猜你设置`$t0`而不是`$v0`.

# css - 使最后一个元素占据剩余空间

> ID：16027553
> 
> 赞同：0
> 
> 时间：2013-04-16T01:59:11.420
> 
> 标签：css, html

我有以下 HTML：

```
<ul style="width: 100%; height: 33px;">
    <li style="height: 33px; width: 34px;">
        <div>TEST</div>
    </li>
    <li style="height: 33px; width: 34px;">
        <div>TEST</div>
    </li>
    <li style="height: 33px; width: 34px;">
        <div>TEST</div>
    </li>
    <li style="height: 33px;">
        <div>LAST</div>
    </li>
</ul> 
```

和 CSS：

```
ul {
   list-style: none outside none;
    margin: 0;
    overflow: hidden;
    padding: 0;
    border: 1px solid red;
}

li {
    float: left;
    list-style: none outside none;
    margin-bottom: 8px;
    padding-left: 0;
    padding-right: 4px; 
    border: 1px solid blue;
} 
```

我希望最后一个元素占据剩余的位置，所以它在页面的右侧对齐。

怎么做？

谢谢

这是一个小提琴：http: [//jsfiddle.net/PKw9k/](http://jsfiddle.net/PKw9k/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:02:45.297

取下浮子。您也可以删除宽度。

```
li:last-child { float: none; } 
```

[http://jsfiddle.net/PKw9k/1/](http://jsfiddle.net/PKw9k/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:04:22.803

您可以通过`overflow: hidden`在最后一个元素上使用并删除浮动来完成此操作

工作示例：

[http://jsfiddle.net/PKw9k/2/](http://jsfiddle.net/PKw9k/2/)

# python - Python 3.3 - 从列表和 .txt 中读取多项选择然后评分

> ID：16027556
> 
> 赞同：1
> 
> 时间：2013-04-16T01:59:39.580
> 
> 标签：python, list, testing

我已经以三种不同的方式尝试了这个程序，我知道我已经接近了好几次，但是在失败了这么多次之后，我放弃了，需要一双额外的眼睛。我知道这个程序很“简单”，但我知道我想多了。

程序应将正确答案存储在列表中。使用该列表对 20 个问题的测试进行评分。然后阅读该 student.txt 文件以确定学生的回答方式。阅读 .txt 文件后，它应该评分然后显示通过或失败（通过 = 15 或更高）它最终显示总数或正确、不正确的答案以及学生错过的问题列表。

以下是所有三种尝试。任何帮助是极大的赞赏。

* * *

```
answerKey = [ B, D, A, A, C, A, B, A, C, D, B, C, D, A, D, C, C, B, D, A,]

studentExam = [ B, D, A, D, C, A, B, A, C, A, B, C, D, A, D, C, C, B, D, A,]

index = 0 

numCorrect = 0

for answerLine, studentLine in zip (answerKey, studentExam):
    answer = answerLine.split()
    studentAnswer = studentLine.split()

    if studentAnswer != answer:
        print( 'You got that question number', index + 1, 'wrong\n the correct,\
        answer was' ,answer, 'but you answered' , studentAnswer)
        index += 1
    else:
        numCorrect += 1
        index += 1

    grade = int((numCorrect / 20) * 100)

    print (' The number of correctly answered questions: ', numCorrect)

    print (' The number of incorrectly answered questions: ', 20 - numCorrect)

    print (' Your grade is', grade, '%')

    if grade <= 75:
        print (' You have not passed ')
    else:
        print (' Congrats you have passed ')

answerKey.close()
studentExam.close() 
```

* * *

```
# This program stores the correct answer for a test
# then reads students answers from .txt file
# after reading determines and dislpays pass or fail (15 correct to pass)
# Displays number of correct and incorrect answers for student
# then displays the number for the missed question/s

#Creat the answer list
def main ( ): 
    # Create the answer key list
    key = [ B, D, A, A, C, A, B, A, C, D, B, C, D, A, D, C, C, B, D, A,]

    print (key)

# Read the contents of the student_answers.txt and insert them into a list
def read_student( ):
    # Open file for reading
    infile = open ( 'student_answers.txt', 'r' )

    # Read the contents of the file into a list
    student = infile.readlines ( )

    # Close file
    infile.close ( )

    # Strip the \n from each element
    index = 0
    while index < len(student):
        student[index] = student[index].rstrip ( '\n' )

    # Print the contents of the list
    print (student)

# Determine pass or fail and display all results 
def pass_fail(answers, student):

    # Lists to be used to compile amount correct, 
    # amount wrong, and questions number missed
    correct_list = []
    wrong_list = []
    missed_list = []

    # For statement to compile lists
    for ai,bi in zip (key,student):
        if ai == bi:
            correct_list.append(ai)
        else:
            wrong_list.append(ai)
            missed_list.append(ai)

    # Printing results for user
    print(correct_list,' were answered correctly')

    print(wrong_list,' questions were missed')

    # If statement to determine pass or fail
    if len(correct_list) >=15:
        print('Congrats you have passed')
    else: 
        print('Sorry you have faild please study and try, \
         again in 90 days')
        print('Any attempt to retake test before 90 days, \
        will result in suspension of any licenses')

    # Displaying the question number for the incorrect answer
    print ( 'You missed questions number ', missed_list)

main() 
```

* * *

```
a = (1, 'A'),(2,'C'),(3,'B')
b = (1,'A'), (2,'A'),(3,'C')

correct_list = []

wrong_list = []

missed_list = []

for ai, bi in zip (a, b):
    if ai == bi:
        correct_list.append(ai)
    else:
        wrong_list.append(ai)
        missed_list.append(ai)
index(ai)+1

print(correct_list,'answered correct')

print(wrong_list, 'answered wrong')

if len(correct_list) >=2:
    print ('Congrats you have passed')
else:
    print ('Sorry you have faild please study and try again in 90 days')
    print('Any attempt to retake test before 90 days will result in suspension of any     lisences')

print ('Question number missed', missed_list) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:32:18.993

所以，我决定研究你的第二个例子，因为它对我来说是最容易理解的。

这是一个修改后的文件，带有解释，我认为你想要的。我假设学生的答案在一个名为的文本文件中`student_answers.txt`，并且每行有一个答案。

```
#!/usr/bin/env python

def read_student(path):
    with open(path, 'r') as infile:
        contents = infile.read()

    # Automatically gets rid of the newlines.
    return contents.split('\n') 

def pass_fail(answers, student):
    correct_list = []
    wrong_list = []

    # Use the 'enumerate' function to return the index.
    for index, (ai, bi) in enumerate(zip(answers, student)):
        # since problems start with 1, not 0
        problem_number = index + 1 

        if ai == bi:
            correct_list.append(problem_number)
        else:
            wrong_list.append(problem_number)

    # Print the length of the list, not the list itself.
    print(len(correct_list), 'were answered correctly')
    print(len(wrong_list), 'questions were missed')

    if len(correct_list) >= 15:
        print('Congrats, you have passed')
    else: 
        print('Sorry, you have failed. Please study and try again in 90 days')
        print('Any attempt to retake test before 90 days will result in suspension of any licenses')

    # Display each missed number on a separate line
    print ('You missed questions numbers:')
    for num in wrong_list:
        print('    ' + str(num))

def main( ): 
    key = ['B', 'D', 'A', 'A', 'C', 'A', 'B', 'A', 'C', 'D', 'B', 'C', 
        'D', 'A', 'D', 'C', 'C', 'B', 'D', 'A']
    student_answers = read_student('student_answers.txt')
    pass_fail(key, student_answers)

if __name__ == '__main__':
    main() 
```

一些一般性评论：

*   在您的`main`函数中，您创建了一个键，将其打印出来，并尝试在`pass_fail`函数内部访问它。那是行不通的——当你在函数内部创建一个变量时，它不能在函数外部自动访问。您可以采取多种解决方案：
    *   做`key`了一个全局变量。这是一个[不受欢迎的解决方案](https://stackoverflow.com/q/484635/646543)
    *   `key`将变量传递给`pass_fail`函数。这就是我所做的。
*   您读取学生文件的代码有点太复杂了。您可以使用该`with`语句，它会自动为您打开和关闭文件对象 ( `infile`)。同样，Python 提供了内置方法来帮助拆分文本文件中的字符串并删除换行符。此外，对于将来，您还可以像下面这样遍历文件中的每一行，而不是手动循环遍历它：

    ```
    with open('file.txt') as my_file:
         for line in my_file:
             print(line) 
             # The newline is still a part of the string! 
    ```

*   我不知道为什么你在里面有`wrong_list`和`missed_list`变量`pass_fail`。我删除了`missed_list`。

*   `for`您的循环的问题在于您存储的是正确答案，而不是问题编号。[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)为了解决这个问题，我使用了对这类事情非常有用的内置函数。或者，您可以使用一个变量并在每个循环中将其递增一次。
*   你的`print`陈述有点畸形，所以我清理了
*   为用户打印结果时，您不想打印列表。相反，您想打印列表的*长度*。
*   我不知道这是不是故意的，但是您的密钥中没有字符串，而只有字母名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:43:16.887

您的第一个答案相当接近，只是 Python 将 A、B、C 和 D 解释为变量而不是字符。您将评分逻辑留在了 for 循环中。将数组更改为字符而不是变量后，我得到以下结果：

```
 The number of correctly answered questions:  1
 The number of incorrectly answered questions:  19
 Your grade is 5 %
 You have not passed 
 The number of correctly answered questions:  2
 The number of incorrectly answered questions:  18
 Your grade is 10 %
 You have not passed 
 The number of correctly answered questions:  3
 The number of incorrectly answered questions:  17
 Your grade is 15 %
 You have not passed 
You got that question number 4 wrong
 the correct,        answer was ['A'] but you answered ['D']
 The number of correctly answered questions:  3
 The number of incorrectly answered questions:  17
 Your grade is 15 %
 You have not passed 
 The number of correctly answered questions:  4
 The number of incorrectly answered questions:  16
 Your grade is 20 %
 You have not passed 
 The number of correctly answered questions:  5
 The number of incorrectly answered questions:  15
 Your grade is 25 %
 You have not passed 
 The number of correctly answered questions:  6
 The number of incorrectly answered questions:  14
 Your grade is 30 %
 You have not passed 
 The number of correctly answered questions:  7
 The number of incorrectly answered questions:  13
 Your grade is 35 %
 You have not passed 
 The number of correctly answered questions:  8
 The number of incorrectly answered questions:  12
 Your grade is 40 %
 You have not passed 
You got that question number 10 wrong
 the correct,        answer was ['D'] but you answered ['A']
 The number of correctly answered questions:  8
 The number of incorrectly answered questions:  12
 Your grade is 40 %
 You have not passed 
 The number of correctly answered questions:  9
 The number of incorrectly answered questions:  11
 Your grade is 45 %
 You have not passed 
 The number of correctly answered questions:  10
 The number of incorrectly answered questions:  10
 Your grade is 50 %
 You have not passed 
 The number of correctly answered questions:  11
 The number of incorrectly answered questions:  9
 Your grade is 55 %
 You have not passed 
 The number of correctly answered questions:  12
 The number of incorrectly answered questions:  8
 Your grade is 60 %
 You have not passed 
 The number of correctly answered questions:  13
 The number of incorrectly answered questions:  7
 Your grade is 65 %
 You have not passed 
 The number of correctly answered questions:  14
 The number of incorrectly answered questions:  6
 Your grade is 70 %
 You have not passed 
 The number of correctly answered questions:  15
 The number of incorrectly answered questions:  5
 Your grade is 75 %
 You have not passed 
 The number of correctly answered questions:  16
 The number of incorrectly answered questions:  4
 Your grade is 80 %
 Congrats you have passed 
 The number of correctly answered questions:  17
 The number of incorrectly answered questions:  3
 Your grade is 85 %
 Congrats you have passed 
 The number of correctly answered questions:  18
 The number of incorrectly answered questions:  2
 Your grade is 90 %
 Congrats you have passed 
Traceback (most recent call last):
  File "a1.py", line 39, in <module>
    answerKey.close()
AttributeError: 'list' object has no attribute 'close' 
```

最后一个错误是因为您关闭了可能是文件对象的数组，但您已经非常接近了。只是一个小的语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:47:34.387

简短的版本，但可以完成工作。

```
correct = ['B', 'D', 'A', 'A', 'C', 'A', 'B', 'A', 'C', 'D', 'B', 'C', 'D', 'A', 'D', 'C', 'C', 'B', 'D', 'A']
file_handler = open('student_answers.txt','r')
answers = file_handler.readlines()
valid = 0
for element in enumerate(correct):
    if answers[element[0]].rstrip("\n") == element[1]:
        valid += 1
if valid >= 15:
    print("Congrats, you passed with " + str((valid/20)*100) + "%")
else:
    print("Sorry, you failed with " + str((valid/20)*100) + "%") 
```

# ajax - CakePHP JsHelper 在 Jquery Mobile 中打破页面转换

> ID：16027557
> 
> 赞同：0
> 
> 时间：2013-04-16T01:59:45.363
> 
> 标签：ajax, cakephp, jquery-mobile, cakephp-2.3

当我发现控制器中的以下代码破坏了 Jquery Mobile 时，我一直试图弄清楚为什么我的某些页面无法使用 Jquery Mobile 的页面转换：

```
public $components = array(
'RequestHandler');
public $helpers = array('Js'); 
```

我将它包含在我的控制器中，用于使用 JSHelper 运行的 ajax 函数，但如果可以避免的话，使用 Jquery Mobile 比使用 JSHelper 对我来说更重要。我需要一些帮助 a.) 修复 jquery mobile 以使用 JS Helper，或者 b.) 使用 Jquery 编写以下函数以完全避免 JSHelper：

```
<?php
$this->Js->get('#BagUserId')->event('change', 
    $this->Js->request(array(
        'controller'=>'bags',
        'action'=>'ajaxload'
        ), array(
        'update'=>'#user-info',
        'async' => true,
        'method' => 'post',
        'dataExpression'=>true,
        'data'=> $this->Js->serializeForm(array(
            'isForm' => true,
            'inline' => true
            )),
        ))
    );
?> 
```

********编辑****** *****

 **根据 Sam 的回答，我得出以下结论：

```
$('#BagUserId').change(function(){
        var myData = $('#BagUserId').serialize();
        $.ajax({
            dataType: 'html',
            type: "POST",
            evalScripts: true,
            async: true,
            url: myBaseUrl + 'bags/ajaxload',
            data: myData,
                success: function (data){
                    $('#user-info').html(data);
                },
                error: function(){
                        alert('failure');
                        },
        });
    }); 
```

要使 url 正常工作，请在加载其他脚本之前将其包含在默认视图的头部中：

```
<script type="text/javascript">var myBaseUrl = '<?php echo $this->Html->url('/'); ?>';</script>` 
```

通过这种方式，您可以避免 CakePHP 中的 JsHelper（对我而言）在我的控制器的所有视图中导致页面转换错误。谢谢山姆！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:44:08.607

您可能需要以下内容：

```
$('#BagUserId').change(function()){
    $.post('bags/ajaxload', $('#my_form_id').serializeArray());
}; 
```**

# c - 将 uint 写入/读取到二进制文件的问题

> ID：16027562
> 
> 赞同：0
> 
> 时间：2013-04-16T02:00:32.820
> 
> 标签：c, binaryfiles, uint

我正在用 C 将结构写入二进制文件。char* 项和 uint8 项写得很好，但我似乎在编写 uint32 项时遇到了问题。

我的写作代码在这里。

```
void writeOut(record *data){

FILE *fp = fopen("output.bin","w");

int i =0;

    while(data[i].Name != NULL){
        fwrite(data[i].Name, NAME_LEN ,1,fp);   
        fwrite(&data[i].Value1, sizeof(uint8_t) ,1,fp);
        fwrite(&data[i].Value2, sizeof(uint8_t) ,1,fp);
        fwrite(&data[i].Id, sizeof(uint32_t) ,1,fp);
        fwrite(data[i].Text, TEXT_LEN ,1,fp);   
        i++;
    }   
} 
```

对于记录一（十六进制），我的二进制文件看起来像这样（使用“|”来显示指向字段的结尾）： `52 6F 64 27 72 6F 64 00 00 00 00 00 00 00 00 00 00 | 01 | 04 | 72 92 01 00 | 50 72 6F 6A 65 63 74 20 50 65 61 63 65 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00`

或在十二月 `082 111 100 039 114 111 100 000 000 000 000 000 000 000 000 000 000 | 001 | 004 | 114 146 001 000 | 080 114 111 106 101 099 116 032 080 101 097 099 101 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000 000`

问题出在“72 92 01 00”或“114 146 001 000”块中。它打算包含的数字是“103026”

那里的任何人都知道我在哪里出错了吗？

mods注意：不确定我选择的标签，欢迎调整。

- - - - 更新 - - - -

感谢您对 bin 文件的输入。好的，因为它写得正确，我一定是读错了。

这是我阅读的摘录

```
int populateRecordSet(unsigned int pageSize, FILE *recordFile, record** record_set){
// read in data
unsigned char data[RECORD_LEN * pageSize];
int numOfRecords = fread(data, RECORD_LEN, pageSize, recordFile);

// convert to records

int r_pos; //note r_pos is used to show the starting point of a record in the context of the binary file 
int i;
uint32_t test;

for(i=0; i < numOfRecords; i++) {
    r_pos = i * RECORD_LEN;
    memcpy(record_set[i]->Name, data + r_pos, NAME_LEN);
    //ADD NULL AT END JUST IN CASE
    record_set[i]->Name[NAME_LEN] = '\0';

    record_set[i]->Species = *(data + r_pos + (NAME_LEN));

    record_set[i]->Class = *(data + r_pos + (NAME_LEN+SPECIES_LEN));

    //record_set[i]->Id = *(data + r_pos + (NAME_LEN+SPECIES_LEN+CLASS_LEN));
    test = *(data + r_pos + (NAME_LEN+SPECIES_LEN+CLASS_LEN));

    printf("%s::%"PRIu32, record_set[i]->Name,test);
    getchar();

    memcpy(record_set[i]->Guild, data + r_pos + (NAME_LEN+SPECIES_LEN+CLASS_LEN+ID_LEN), GUILD_LEN);
    record_set[i]->Guild[GUILD_LEN] = '\0';
}
getchar();

return i; 
```

}

它在我看来是正确的，它适用于除“Id”之外的所有值

再一次，有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T02:11:48.177

正如其他人所指出的，您的二进制表示看起来是正确的。但是，您应该查看一下用于访问此文件的模式。在编写二进制文件时，您应该以“wb”模式打开，在读取它时应使用“rb”模式。

在 *nix 系统上它并不重要。在 Windows 上，根据我的经验，这很重要。不正确的模式很容易导致后续读取工作不正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T02:04:16.433

没有错。 `72 92 01 00`是将数字 103026 表示为 32 位小端整数的正确字节序列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T02:05:41.460

72 92 01 00 是 103026 十进制的正确十六进制/字节表示，如果您打算将其写入 little-endian（这意味着最不重要的字节在前）。如果您将其写入小端并以大端（首先是最重要的字节）读取它，那是您的问题 - 读取和写入的字节序必须相同。

# c++ - 从数组中找到平均值

> ID：16027566
> 
> 赞同：2
> 
> 时间：2013-04-16T02:00:50.973
> 
> 标签：c++, arrays, average

出于某种原因，我的程序平均得到一个非常奇怪的负数，这是我的代码：

```
int sum, avg;
int size;
size = sizeof(array) / sizeof(array[0]);
sum = 0;
avg = 0;

for(int i = 0; i < size; i++){
    sum += array[i];
}
avg = sum / size 
```

我的输出是：-6.84941e+061

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T02:03:00.950

```
for(int i = 1; i < size; i++){
       //^^should be 0
   sum += array[i];
}
avg = sum / size; //pay attention to truncation when doing integer division 
```

整数除法时要注意截断。例如，`10/20 = 0`在整数除法中。同时，计算总和时需要从 0 开始。

您的代码应如下所示：

```
 //the average may not necessarily be integer
 float avg = 0.0;  //or double for higher precision
 for (int i = 0; i < size; ++i)
 {
     sum += array[i];
 }
 avg = ((float)sum)/size; //or cast sum to double before division 
```

# dom - 更改 ng-show 的值后如何让 angularjs 更新 dom

> ID：16027569
> 
> 赞同：0
> 
> 时间：2013-04-16T02:01:09.973
> 
> 标签：dom, angularjs

我有以下模板

```
<div>
    <div ng-repeat="item in items">
        <div>
        <p><button ng-click="editItem()">Edit</button></p>
    </div>
        <div class="span10">
        <input type="text" value={{item.helpText}} ng-model="question.helpText" required>
        </div>
        <div id="done" ng-show={{item.state}}>
            <div>
                <p><button ng-click="doneEditItem()">Done</button></p>
            </div>
        </div>
    </div>
 </div> 
```

在我的控制器中，我有`item.state = false`最初设置的代码，这`done`会在启动时隐藏 div 并因此隐藏“完成”按钮。在`editItem()`函数中，当用户单击“编辑”按钮时，我有设置 item.state=true 的代码。

我期待当我设置 item.state = true 时，`doneEditItem`按钮会再次可见。目前这没有发生。是否有一些我应该调用的 angularjs 函数可以在设置后使完成按钮可见`item.state=true`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:57:25.547

[ng-show](http://docs.angularjs.org/api/ng.directive%3angShow)与许多 Angular 指令一样，采用[Angular 表达式](http://docs.angularjs.org/guide/expression)。该表达式是针对当前范围进行评估的，因此不需要 {{}} ——实际上它们不能用于需要 Angular 表达式的地方。所以使用`ng-show="item.state"`而不是`ng-show={{item.state}}`.

当您希望 Angular 编译器插入某些内容时，{{}} 会在 HTML 的其他地方使用。例如，`<p>Hello {{name}}</p>`。

# ember.js - Ember 数据嵌套资源 URL

> ID：16027573
> 
> 赞同：0
> 
> 时间：2013-04-16T02:01:37.180
> 
> 标签：ember.js, ember-data

我正在进一步开发博客，从 emberjs.com 博客教程视频开始。当我尝试保存评论以服务 ember-data 时，其余适配器正在发布， `http://localhost/blog/comments`但它应该`http://localhost/blog//posts/1/comments`是嵌套资源。下面是我的代码。

```
var App = Ember.Application.create({
    LOG_TRANSITIONS: true,
    ready: function() {
        this.set('Router.enableLogging', true);
    }
});

App.Router.map(function() {
    this.resource('about');
    this.resource('posts', function() {
        this.resource('post', {
            path: ':post_id'
        });
        this.route('new');
    });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('posts');
    }
});

App.PostsRoute = Ember.Route.extend({
    model: function() {
        return App.Post.find();
    }
});
App.Comment = DS.Model.extend({
    name: DS.attr('string'),
    email: DS.attr('string'),
    text: DS.attr('string'),
    createdAt: DS.attr('date')
});

App.Post = DS.Model.extend({
    title: DS.attr('string'),
    author: DS.attr('string'),
    intro: DS.attr('string'),
    extended: DS.attr('string'),
    publishedAt: DS.attr('date'),
    comments: DS.hasMany('App.Comment', {embedded:'always'})

});

App.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.extend({
        url: 'http://localhost/blog'
    })
});
App.CommentNewController = Ember.ObjectController.extend({
    needs: ["post"],
    saveComment: function(params) {

        console.log("Dinesh is coding");
        console.log("iname:" + params.iname);
        console.log("text:" + params.text);
        console.log("email:" + params.email);
        //params.set('name', params.iname);
        var post = this.get('controllers.post').get('model');
        debugger;
        var comments = post.get('comments');
        comments.createRecord({
            name:params.iname,
            text:params.text,
            email:params.email,
            post_id:post.get('id')
        });
        //this.get('controllers.comments').pushObject(params);
        this.get('store').commit();

    },
    content: {}
    // }
});

App.CommentNewView = Ember.View.extend({
    template: Ember.Handlebars.compile(comment_new_html)
    // controller: App.CommentController

}); 
```

我的评论新观点：

```
<form {{action "saveComment" content  on="submit" validation="true"}}>

<p>{{view Ember.TextField valueBinding="iname" id="iname" placeholder="Name"     required="true"}}<br /></p>
<p>{{view Ember.TextField valueBinding="email" id="email" placeholder="Email" required="true"}}<br /></p>
<p>{{view Ember.TextArea valueBinding="text" id="text" placeholder="Comment" }}</p>
<button type="submit" class="btn">Save Comment</button>
</form> 
```

有没有人遇到过类似的问题？如何为嵌套 url 配置 ember-data？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T15:42:32.217

我遇到了类似的问题并使用了以下路线：

```
App.Router.map(function() {
  this.resource('posts');
  this.resource('post', { path: '/posts/:post_id' }, function() {
    this.resource('comments', function() {
   this.route('new');
      this.route('create');
    });
    this.route('comment', { path: 'comments/:comment_id'});
  });
}); 
```

这给出了一条类似的路线

> /posts/:post_id/comments/:comment_id

我的博客文章中提供了有关带有[示例代码的](https://github.com/ianwdunlop/ember-js-mvc-blog-tutorial)[ember 嵌套资源](http://dev.mygrid.org.uk/blog/?p=97)的更多信息

# c++ - 如何使用 C++ lambda 函数创建 v8::FunctionTemplate？

> ID：16027574
> 
> 赞同：0
> 
> 时间：2013-04-16T02:01:40.713
> 
> 标签：c++, node.js, lambda, v8

我在[这里](https://stackoverflow.com/questions/14004361/v8functiontemplate-referencing-a-non-global-variable)阅读了上一个问题，但似乎有点无关。当 C++ lambda 没有捕获任何内容时，它可以作为`v8::FunctionTemplate`. 但是当它捕捉到我需要的东西时，编译器开始抱怨：

`error: no matching function for call to 'v8::FunctionTemplate::New( BaseContext::New(const v8::Arguments&)::<lambda(const v8::Arguments&)>)`

这是测试代码：

```
int a = 3;

Local<FunctionTemplate> failed = FunctionTemplate::New(
[=, a](const Arguments& args)-> Handle<Value>
{   
    a = a+a;
}); 

Local<FunctionTemplate> success = FunctionTemplate::New(
[](const Arguments &args) -> Handle<Value>
{
    int a = 3;
}); 
```

我想使用 lambda 功能，因为没有理由定义小的静态函数，这些函数实际上会成为另一个函数中的回调。但是捕获和不捕获之间的唯一区别真的让我很困扰，并且错误消息似乎是由 lambda 本身引起的，无论它是否捕获东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:13:22.303

这是因为不捕获的 lambda 可以被视为普通函数指针，而捕获的 lambda 不能。

的第一个参数`FunctionTemplate::New`是一个`InvocationCallback`，它只是一个函数指针。

```
typedef Handle<Value> (*InvocationCallback)(const Arguments& args); 
```

例如，两者都是有效`std::function`对象：

```
// Compiles
function<Handle<Value> (const Arguments&)> cb1 = [](const Arguments &args) -> Handle<Value> {
    int a = 3;
};

// Compiles
function<Handle<Value> (const Arguments&)> cb2 = [=](const Arguments &args) -> Handle<Value> {
    int a = 3;
}; 
```

但只有第一个是有效的回调：

```
// Compiles
InvocationCallback cb1 = [](const Arguments &args) -> Handle<Value> {
    int a = 3;
};

// Does not compile
InvocationCallback cb2 = [=](const Arguments &args) -> Handle<Value> {
    int a = 3;
}; 
```

# wget - 如何批量获取一系列带参数的url

> ID：16027593
> 
> 赞同：0
> 
> 时间：2013-04-16T02:04:28.477
> 
> 标签：wget

我必须检索具有不同参数的 URL 的内容以进行批处理，例如：

[http://www.sitenmae.com/process.php?type=aa&menu=detail&itemid=12345](http://www.sitenmae.com/process.php?type=aa&menu=detail&itemid=12345)

我需要从 12345 到 12445 获取 itemid。

我试图做（在bash下）

wget ' [http://www.sitenmae.com/process.php?type=aa&menu=detail&itemid=12](http://www.sitenmae.com/process.php?type=aa&menu=detail&itemid=12) {345..445}'

但它不起作用。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:38:25.233

`for`你可以用循环编写一个简单的 sh并下载它

```
for i in {12345..12445}
do
   echo "Downloading item $i"
   wget http://www.sitenmae.com/process.php?type=aa&menu=detail&itemid=$i
done 
```

# .net - 调试已安装的 .NET 应用程序

> ID：16027594
> 
> 赞同：0
> 
> 时间：2013-04-16T02:04:32.393
> 
> 标签：.net, debugging, exception, visual-studio-debugging

处理似乎仅在安装了 .NET 4.0 应用程序时出现的错误，该错误仅出现在大约一半已安装该应用程序的机器上。

有没有办法调试安装的文件？

因此，如果文件`C:\Program files\MyProgram\`包含`MyProgram.exe`所有必需的 dll，我可以以某种方式调试`MyProgram.exe`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:09:51.147

如果你有源代码并且 pdb 文件在你想要调试的机器上，你应该能够进行远程调试器会话。这是有关如何设置它 [的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/vstudio/bt727f1t.aspx)

# c# - Consumer 线程如何将结果返回给正确的 Producer 线程？

> ID：16027599
> 
> 赞同：2
> 
> 时间：2013-04-16T02:05:00.523
> 
> 标签：c#, multithreading, concurrency

我有多个生产者线程将数据排入线程安全的“命令优先级队列”。

还有一个“命令阅读器”消费者线程，它将不断检查这个“命令优先级队列”中的数据，将其出列，并进行必要的处理。最终在每次处理之后，需要将结果返回给发出命令的正确生产者线程。

我曾想过让另一个线程安全的“结果队列”将结果排入队列，但问题是如何将数据推送到相关的生产者线程？

或者我可以尝试任何其他优雅的解决方案/机制或架构吗？

谢谢你。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:48:05.903

我通常做的是将“OnCompletion”事件（或任务类 OnCompletion 函数覆盖）添加到排队到线程/s 的数据对象中。当任何线程最终完成对数据的工作时，它会以数据对象作为参数调用“OnComplete”。原始生产者线程可以在将数据对象排队之前将 OnComplete' 事件（或覆盖方法）设置为想要的任何函数。

'OnCompletion' 事件可以表示生产者线程在将任务排队后等待的事件（同步），或者它可以将任务对象排队到生产者线程的私有“returnedData”阻塞队列中，以便它可以每当生产者处理它时，就被出列并处理（异步）。

编辑：数据/任务对象应该包含一个异常和/或errorMessage成员，这样，如果线程遇到数据问题，它可以在调用'OnCompletion'之前适当地设置它。这允许生产者线程查看是否有任何问题。

# actionscript-3 - 如何将此 AS2 代码转换为 AS3 ？（画廊图片）

> ID：16027608
> 
> 赞同：-4
> 
> 时间：2013-04-16T02:06:15.977
> 
> 标签：actionscript-3, actionscript-2

我是一个flash新手。我按照本教程进行操作。这是网址 virtualhacker.wikispaces.com/file/view/funci%C3%B3n+para+el+bot%C3%B3n+Siguiente.pdf/156572951/funci%C3%B3n%20para%20el%20bot%C3%B3n %20Siguiente.pdf

是一个图片库。

我在 AS2 中实现了代码，它运行得很好。教程中缺少此代码

```
 The code to center the images

sput_mc._x=(500-233)/2;
sput_mc._y=(250-50)/2; 
```

和if条件语句代码去图片编号1，

```
if (npictures==5){ npictures=1
            } 
```

没有上面的代码会给你这个错误

```
Error opening URL 'file:/gal/Gallery/undefined' 
```

这是完整的 AS2 代码：

```
var npictures:Number=1
var images:Array=new Array()
images[1]="images/image_01.jpg"
images[2]="images/image_02.jpg"
images[3]="images/image_03.jpg"
images[4]="images/image_04.jpg"

// TO CENTER THE IMAGE
sput_mc._x=(500-233)/2;
sput_mc._y=(250-50)/2;

number_txt.text=npictures
sput_mc.loadMovie(images[npictures])

neut_btn.onPress=function(){
    npictures=Number(number_txt.text)
    sput_mc.loadMovie(images[npictures])
}

prev_btn.onPress=function(){
    npictures--
    number_txt.text=npictures
    sput_mc.loadMovie(images[npictures])
}

//remember the If statement to avoid the error
forw_btn.onPress=function(){
    npictures++
    if (npictures==5){ npictures=1
        }
    number_txt.text=npictures
    sput_mc.loadMovie(images[npictures])
} 
```

有经验的flash AS3 代码高手能看懂AS3 中的代码吗？请帮忙！

///////////////////////////////////////// //////////////////////////////////////// ///////////////////////////////////////// ////////////////////

谢谢你们

我在阅读此**as3 参考资料后做到了**

[http://www.actionscript.org/forums/showthread.php3?p=989392](http://www.actionscript.org/forums/showthread.php3?p=989392) [http://www.flashandmath.com/howtos/imgload/](http://www.flashandmath.com/howtos/imgload/)

**这是一个好方法还是不需要toString的东西或null，addChild？**

```
var npictures:Number=1

//the addChild null
var sput_mc:sput_mc=new sput_mc();
this.addChild(sput_mc);

var images:Array = new Array(
'pic1.jpg', 
'pic2.jpg',
'pic3.jpg',
'pic4.jpg');

sput_mc.x=130;
sput_mc.y=90;

//toString
number_txt.text=npictures.toString();
sput_mc.load(new URLRequest(images[npictures]));

neut_btn.addEventListener(MouseEvent.CLICK,onEntClick);

function onEntClick(e:MouseEvent):void 
{
    number_txt.text=npictures.toString();
    sput_mc.load(new URLRequest(images[npictures]));

}

forw_btn.addEventListener(MouseEvent.CLICK,onForwClick);

function onForwClick(e:MouseEvent):void 
{

    npictures++
    if (npictures==4){ npictures=0
        }       

}

prev_btn.addEventListener(MouseEvent.CLICK,onBacklick);
function onBackClick(e:MouseEvent):void 

{       
        //
    npictures--
    if (npictures==4){ npictures=0
        }
    // toString()   
    number_txt.text=npictures.toString();
    sput_mc.load(new URLRequest(images[npictures]));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:56:40.243

您将遇到的主要区别是：

_x 和 _y 变成了 x 和 y。

`loadMovie`不再存在。您必须使用 a[`Loader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)而不是 a `Sprite`。

事件监听器在 AS3 中不是这样工作的，例如，点击监听器：

```
forw_btn.addEventListener(MouseEvent.CLICK, onForwardClick);

private function onForwardClick(e:MouseEvent):void
{
  //action
} 
```

其余的，我必须同意评论者的观点，你必须自己尝试一下，然后就具体问题寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:24:06.203

不要问这些类型的问题......他们不会帮助其他用户。但是学习 as3 - 说真的，不要让其他人为你做你的工作。但在这里，拿着它——

```
var npictures:Number=1
var images:Array=new Array()
images[1]="images/image_01.jpg"
images[2]="images/image_02.jpg"
images[3]="images/image_03.jpg"
images[4]="images/image_04.jpg"

// TO CENTER THE IMAGE
sput_mc.x=(500-233)/2;
sput_mc.y=(250-50)/2;

number_txt.text=npictures
sput_mc.load(new URLRequest(images[npictures]));

neut_btn.addEventListener(MouseEvent.CLICK, soup);

function soup(e:MouseEvent):void
{
    npictures=Number(number_txt.text)
    sput_mc.load(new URLRequest(images[npictures]));
}

prev_btn.addEventListener(MouseEvent.CLICK, watevadude);

function watevadude(e:MouseEvent):void
    npictures--
    number_txt.text=npictures
    sput_mc.load(new URLRequest(images[npictures]));
}

//remember the If statement to avoid the error
forw_btn.addEventListener(MouseEvent.CLICK, hey);

function hey(e:MouseEvent):void
{
    npictures++;
    if (npictures==5){ npictures=1;
        }
    number_txt.text=npictures;
    sput_mc.load(new URLRequest(images[npictures]));
} 
```

不要问这些问题......我是唯一一个愚蠢到这样做的人，所以不要指望其他人这样做。你为什么不付钱给别人做这件事？或学习 AS3！

# sequelize.js - 瞬态属性

> ID：16027610
> 
> 赞同：2
> 
> 时间：2013-04-16T02:06:43.077
> 
> 标签：sequelize.js

在将对象返回给客户端之前，我想向对象添加其他属性。在它们被序列化时，它们会从对象中省略。有没有办法添加瞬态属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-22T13:27:37.750

您可以通过首先调用 sequlize 调用的序列化函数（即 toJSON() 方法）对返回的对象进行任何更改。

```
var jsonResult = result.toJSON();
jsonResult.newProperty = "New"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-16T05:34:41.010

我认为将类型设置为`DataTypes.VIRTUAL`可能会有所帮助。

例如

```
var Line = sequelize.define("Line", {
    name: {
        type: DataTypes.STRING(50),
        allowNull: false
    },
    projects: {
        type: DataTypes.VIRTUAL
    }
});

Line.findAll().then(function (lines) {
    for (var i = 0; i < lines.length; i++)
        lines[i].projects = [];
    console.log(JSON.stringify(lines));
}); 
```

输出

```
[{"name":"test1","projects":[]},{"name":"test2","projects":[]}] 
```

文档：[http ://docs.sequelizejs.com/en/latest/api/datatypes/](http://docs.sequelizejs.com/en/latest/api/datatypes/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:16:28.493

是的，创建实例方法应该满足您的需求：[http ://www.sequelizejs.com/documentation#models-expansion](http://www.sequelizejs.com/documentation#models-expansion)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-25T19:24:56.993

您可以非常轻松地添加自定义实例或类级别的方法。

```
 const User = sequelize.define('user', { firstname: Sequelize.STRING });

            // Adding a class level method
            User.classLevelMethod = function() {
              return 'foo';
            };

            // Adding an instance level method
            User.prototype.instanceLevelMethod = function() {
              return 'bar';
            }; 
```

当然，您也可以访问实例的数据并生成虚拟 getter：

```
 const User = sequelize.define('user', { firstname: Sequelize.STRING, lastname: Sequelize.STRING });

            User.prototype.getFullname = function() {
              return [this.firstname, this.lastname].join(' ');
            };

            // Example:
            User.build({ firstname: 'foo', lastname: 'bar' }).getFullname() // 'foo bar' 
```

# actionscript-3 - As3 flash 错误“无法访问空对象引用的属性或方法”

> ID：16027616
> 
> 赞同：1
> 
> 时间：2013-04-16T02:07:46.673
> 
> 标签：actionscript-3, flash, syntax-error, flash-cs6

我试图在 Flash 上做一些包含随机数的基本游戏，但每次运行我的场景时都会收到此错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at capacitacion_fla::MainTimeline/frame1()
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at capacitacion_fla::MainTimeline/frame1()
at flash.display::MovieClip/gotoAndStop()
at capacitacion_fla::MainTimeline/fl_ClickToGoToAndStopAtFrame() 
```

我正在学习 flash 和 as3，如果有人能帮助我了解发生了什么，我将不胜感激，我还留给你我的 as3 代码，这些代码都放在第 1 帧上：

```
stop();
import com.greensock.*;
import com.greensock.easing.*;
import flash.events.MouseEvent;
import flash.display.MovieClip;

var blitMask1:BlitMask = new   BlitMask(strip1,strip1.x,strip1.y,strip1.width,207,true,true,0xffffff,true);
var blitMask2:BlitMask = new BlitMask(strip2,strip2.x,strip2.y,strip2.width,207,true,true,0xffffff,true);
// ------- botones ----------

numerico_btn.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame);

function fl_ClickToGoToAndStopAtFrame(event:MouseEvent):void
{
gotoAndStop(1);
}

preguntas_btn.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame_2);

function fl_ClickToGoToAndStopAtFrame_2(event:MouseEvent):void
{
gotoAndStop(2);
}

imagenes_btn.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame_3);

function fl_ClickToGoToAndStopAtFrame_3(event:MouseEvent):void
{
gotoAndStop(3);
}

//------- Fin de los botones ----------

//------------ Escena 1 ----------------------------------------------------
spin_btn.addEventListener(MouseEvent.CLICK, spin);

function spin(event:MouseEvent):void {

var i:int = 1;
while (i <= 2) {
    var newNumber:Number = (randomNumber(0, 19) * 207) + 4968;

    TweenMax.to(this["strip" +i], 2 + (i*.5), {y:strip1.y + newNumber});
    i++;    
}
}

function randomNumber(min:Number, max:Number):Number {
//good
return Math.floor(Math.random() * (1 + max - min) + min);
}
// ----------- fin escena 1 ----------

// ----------- Principio escena 2 -------------------

var blitMask3:BlitMask = new BlitMask( strip1q, strip1q.x, strip1q.y, 392 , strip1q.height, true, true, 0xffff00, true);

preguntas_btn.addEventListener(MouseEvent.CLICK, rodarPreguntas);

function rodarPreguntas(event:MouseEvent):void {

    preguntas_btn.visible = false;

    var newNumber1:Number = (randomNumber1(0, 50)*392) + 21168 ;
    //tween to the relative value of newNumber
    TweenMax.to(strip1q, 4, {x:String(-newNumber1), onComplete:showBtn});       
}

function showBtn(){
preguntas_btn.visible = true;
}

function randomNumber1(min:Number, max:Number):Number {
//good
return Math.floor(Math.random() * (1 + max - min) + min);
}

// ------- Fin escena 2 -------- 
```

我希望有人可以帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T07:52:46.643

错误 1009 告诉您它无法引用按钮、影片剪辑、文本字段等。对您来说一个简单的答案是确保您的按钮具有实例名称。我想您正在使用 CS6 或旧版本的 Flash。在这种情况下，选择一个按钮，例如在舞台上时的 numeric_btn。然后转到属性面板并在实例输入字段中输入 numerico_btn 的名称。

对所有按钮执行此操作。最后，声明这些按钮。例如：

var numerico_btn:SimpleButton;

那应该可以解决您的错误。作为补充，通过添加 numeric_btn.enabled = true; 确保您的按钮已启用。在您的事件侦听器之前。

希望对您和遇到这个最常见的初始问题的其他人有所帮助。

# go - go中的字符串和整数列表？

> ID：16027621
> 
> 赞同：9
> 
> 时间：2013-04-16T02:08:38.550
> 
> 标签：go

我不知道我在做什么，我决定尝试在 go 中使用[列表（文档）](http://golang.org/pkg/container/list/#New)。这是我能想到的最多的

1.  为什么要打印 %v `{0xf840024660 <nil> 0xf840023660 4}`？
2.  为什么将整数与字符串混合时没有收到错误消息？
3.  如何强制类型？（例如仅整数，仅字符串等）

代码：

```
package main

import "fmt"
import "container/list"

func main() {
    ls := list.New()
    ls.PushBack("a")
    ls.PushBack(4)
    ls.PushBack("5")
    fmt.Println(ls)
    ls2 := list.New()
    ls2.PushBack(4)
    ls2.PushBack(8)
    fmt.Printf("%v\naaa\n", *ls2.Front())
    fmt.Println(*ls2.Back())
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-16T02:15:56.363

首先，你可能不想要`container/list`. 您可能正在寻找像 slices 和`append()`. 例如：

```
x := []int { 1, 2, 3 }
x = append(x, 4)
x = append(x, 5, 6) 
```

允许您混合类型的原因`container/list`是它用于`interface{}`保存值，并且任何类型都满足空接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:39:52.593

要回答调用`Front()`and的第一个问题`Back()`，这是因为您要打印出不包含可打印值的[`Element`结构。](http://golang.org/pkg/container/list/#Element)如果你想打印`Element.Value`你必须做的`(*ls2.Front()).Value`。类似的原因也适用于`fmt.Println(ls)`打印奇怪的原因。

# python - AttributeError：“模块”对象没有属性“百分位”

> ID：16027625
> 
> 赞同：2
> 
> 时间：2013-04-16T02:09:17.193
> 
> 标签：python, numpy, percentile

我使用这个函数从[这里](http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.percentile.html)计算百分位数：

```
import numpy as np
a = [12, 3, 45, 0, 45, 47, 109, 1, 0, 3]
np.percentile(a, 25) 
```

但我得到这个错误：

```
AttributeError: 'module' object has no attribute 'percentile' 
```

我也试过

```
import numpy.percentile as np 
```

但我没有得到同样的错误。

我的 numpy 版本是 1.3.0 我尝试升级，但似乎我不会使用它：`[sudo pip install --upgrade scipy][2]`但我发现没有升级。

我的 ubuntu 9.10 版

我的python版本是：2.6.4

我还尝试绕过 numpy.percentile 模块，我在[这里](https://stackoverflow.com/questions/2374640/how-do-i-calculate-percentiles-with-python-numpy)找到了这个：

```
>>> def percentile(N, P):
...     n = int(round(P * len(N) + 0.5))
...     if n > 1:
...         return N[n-2]
...     else:
...         return 0
...
>>> a = [1, 23, 5, 45, 676, 2, 0, 4,3]
>>> a = sorted(a)
>>> a
[0, 1, 2, 3, 5, 4, 23, 45, 676]
#When I call the function using 
>>> percentile(a,0.5)
3 
```

但是当我尝试`0.5 percentile`手动查找时，我发现`5`

谁能帮我解释一下为什么在这些情况下会发生这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T02:15:20.957

该`percentile`功能是在[1.5.x 版本](https://github.com/numpy/numpy/blob/maintenance/1.5.x/numpy/lib/function_base.py)中添加的。您将需要至少升级到该版本。

你试过了吗：

```
sudo pip install numpy==1.7.1 --upgrade 
```

要检查您正在运行的版本，请启动 python 控制台并运行：

```
>>> import numpy
>>> print numpy.__version__ 
```

你也可以这样做：

```
sudo pip freeze | grep numpy 
```

Ubuntu 9.10 numpy 包使用[版本 1.3.03](https://launchpad.net/ubuntu/karmic/i386/python-numpy)。安装 1.7.0 vai pip 版本很可能是成功的，但您的机器默认使用 python-numpy 版本。您可以通过运行删除：

```
sudo apt-get remove python-numpy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-21T09:35:08.970

请升级你的 numpy 包

```
pip install --upgrade numpy==1.19.1 
```

或者

```
sudo pip install --upgrade numpy==1.19.1 
```

# stream - 将 ocaml 函数转换为流

> ID：16027627
> 
> 赞同：4
> 
> 时间：2013-04-16T02:09:23.207
> 
> 标签：stream, ocaml

假设我有以下 OCaml 代码块：

```
let genblocks () =
  let blocks = ref [] in
  let rec loop depth block =
    let iter i = loop (depth - 1) (i :: block) in
    match depth with
      | 0 -> blocks := block :: !blocks
      | _ -> List.iter iter [1;2;3;4]
  in
  loop 4 [];
  !blocks 
```

这会生成一个列表列表：`[[1;1;1;1]; [1;1;1;2]; ...; [4;4;4;4]]`。

现在，我想将其转换为流（使用`Stream`模块或类似的东西）。但是，我不知道如何在保持当前代码的整体递归结构的同时做到这一点。我想保持这种结构的原因是它使我能够在生成过程中轻松地删除包含某些属性的列表。例如，使用这种代码结构，在生成过程中，我可以轻松地删除包含 sublist 的列表`[1;1]`。（以上只是一个玩具示例，我的实际应用更复杂......）。

关于如何将上述代码转换为“流”实例的任何提示/想法/指针？一旦达到零深度，我就无法“回溯”......

**编辑：**另一种看待问题的方式：有没有办法进行转换`genblocks`以摆脱列表引用？这似乎是使其与流兼容所需的第一步。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:26:48.760

我的回答中有三点不同：

1.  演示摆脱可变变量的通用技术

2.  一种特定于算法的技术，可以很容易地生成流

3.  指向通用技术的链接，可将任何生产者转变为点播流

首先，让我们在枚举的基础上使您的算法通用：

```
let genblocks n =
  (* base = [1; ... ; n] *)
  let base = Array.to_list (Array.init n (fun i -> i+1)) in
  let blocks = ref [] in
  let rec loop depth block =
    let iter i = loop (depth - 1) (i :: block) in
    match depth with
      | 0 -> blocks := block :: !blocks
      | _ -> List.iter iter base
  in
  loop n [];
  !blocks 
```

现在不看代码做了什么，有一个非常简单的方法可以摆脱枚举：将任何`A -> B` 使用可变类型的类型`C`函数转换为`A * C -> B * C`接收状态的类型函数，并返回其修改后的值——这就是所谓的“状态单子”。`blocks`因此，我将简单地为您的函数添加一个附加参数`loop`and `iter`，并使其返回 not `unit`but `int list list`：

```
let genblocks n =
  let base = Array.to_list (Array.init n (fun i -> i+1)) in
  let rec loop depth blocks block =
    let iter blocks i = loop (depth - 1) blocks (i :: block) in
    match depth with
      | 0 -> block :: blocks
      | _ -> List.fold_left iter blocks base
  in
  loop n [] [] 
```

现在让我们看看这个算法究竟做了什么：

```
# genblocks 3;;
- : int list list =
[[3; 3; 3]; [2; 3; 3]; [1; 3; 3]; [3; 2; 3]; [2; 2; 3]; [1; 2; 3]; [3; 1; 3];
 [2; 1; 3]; [1; 1; 3]; [3; 3; 2]; [2; 3; 2]; [1; 3; 2]; [3; 2; 2]; [2; 2; 2];
 [1; 2; 2]; [3; 1; 2]; [2; 1; 2]; [1; 1; 2]; [3; 3; 1]; [2; 3; 1]; [1; 3; 1];
 [3; 2; 1]; [2; 2; 1]; [1; 2; 1]; [3; 1; 1]; [2; 1; 1]; [1; 1; 1]] 
```

当使用参数 3 调用时（在您的代码中 4 是硬编码的），此算法返回数字 1、2 和 3 的所有 3 组合。否则，它会枚举以 3 为底的计数系统中的所有三位数（使用 1 和 3 之间的数字，而不是像往常一样使用 0 和 2）。

有一种非常简单的方法可以枚举你在学校学到的数字：从一个数字到下一个数字，只需增加（或减少）它。在您的情况下，列表以“大”数字开始并进入“小”数字，因此我们将递减。事实上，你的基地是 [1; N] 而不是 [0; N-1]，递减函数写成

```
let decr n block =
  let rec decr n = function
    | [] -> raise Exit
    | 1::rest -> n :: decr n rest
    | i::rest -> (i - 1) :: rest
  in try Some (decr n block) with Exit -> None 
```

当我们达到 0 时（在您的系统中，[1;1;1..]），我让它返回 None，以便在此时轻松停止枚举。

```
decr 3 [3;3;3];;
- : int list option = Some [2; 3; 3]
# decr 3 [1;2;3];;
- : int list option = Some [3; 1; 3]
# decr 3 [1;1;1];;
- : int list option = None 
```

从这个函数中枚举所有数字是微不足道的：

```
let start n = Array.to_list (Array.make n n)

let genblocks n =
  let rec gen = function
    | None -> []
    | Some curr -> curr :: gen (decr n curr)
  in gen (Some (start n)) 
```

但重要的一点是，生成的整个状态仅存储在一个值中，即当前数字。所以你可以很容易地把它变成一个流：

```
let genblocks n =
  let curr = ref (Some (start n)) in
  Stream.from (fun _ ->
    match !curr with
      | None -> None
      | Some block ->
        curr := (decr n block);
        Some block
  )

# Stream.npeek 100 (genblocks 3);;
- : int list list =
[[3; 3; 3]; [2; 3; 3]; [1; 3; 3]; [3; 2; 3]; [2; 2; 3]; [1; 2; 3]; [3; 1; 3];
 [2; 1; 3]; [1; 1; 3]; [3; 3; 2]; [2; 3; 2]; [1; 3; 2]; [3; 2; 2]; [2; 2; 2];
 [1; 2; 2]; [3; 1; 2]; [2; 1; 2]; [1; 1; 2]; [3; 3; 1]; [2; 3; 1]; [1; 3; 1];
 [3; 2; 1]; [2; 2; 1]; [1; 2; 1]; [3; 1; 1]; [2; 1; 1]; [1; 1; 1]] 
```

是否有一种通用的方法可以将生产者驱动的函数（根据问题以最自然的节奏累积项目）转换为消费者驱动的函数（由消费者决定一次产生一个元素）？是的，我在以下博客文章中对此进行了解释：

[生成器、迭代器、控制和延续](http://gallium.inria.fr/blog/generators-iterators-control-and-continuations/)

最重要的想法是，您可以通过对代码进行机械但复杂的转换，明确生产者的“上下文”是什么，他的当前状态是什么，编码为复杂的值和控制流（调用已经制作，此时您在哪个条件分支中）。然后将此上下文转换为一个值，您可以将其用作此处使用的“数字”来派生消费者驱动的流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:25:08.537

假设此代码不是家庭作业，那么您几乎可以通过使用[电池](http://ocaml-batteries-team.github.io/batteries-included/hdoc2/BatEnum.html)`Enum`中的模块来翻译您的代码以逐字返回“流” 。即函数和。您可能已经注意到，OCaml 附带的流模块非常小。最好使用替代方案。`Enum.push``Enum.empty`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T15:28:20.650

我遇到了和你类似的问题，所以我开发了一个迭代器模块（它绝对不是新的，但我无法找到一个做同样事情的简单包）

这是一个链接：[https ://github.com/JoanThibault/DAGaml/blob/master/tools/iter.mli](https://github.com/JoanThibault/DAGaml/blob/master/tools/iter.mli)

使用此模块，您可以重新编写代码

```
open IterExtra (* add some handy symbols to manipulate iterators *)
let genblock n = (Iter.range 1 (4+1)) $^ n
val genblock : int -> int list Iter.iter 
```

现在，如果您想使用某些功能对其进行过滤`prune : int list -> bool`：

```
let genblock n = (Iter.range 1 (4+1)) $^ n |> Iter.filter prune
val genblock : int -> int list Iter.iter 
```

最后，您可以使用一些打印功能迭代您的迭代器`print : int list -> unit`：

```
let n = 10;;
Iter.iter print (genblock n);; 
```

# xcode - 如何将标题信息插入 MPMoviePlayerController url？

> ID：16027628
> 
> 赞同：2
> 
> 时间：2013-04-16T02:09:42.087
> 
> 标签：xcode, nsurlconnection, mpmovieplayercontroller, nsurlrequest

我需要使用 http 协议实现视频流服务。我知道如何将 url 设置为 MPMoviePlayerController，以及如何将 headerField 设置为 NSMutableURLRequest，但我不知道如何组合它们。我像下面的代码一样实现，但不工作，我假设是因为二进制数据中没有文件信息。

```
- (void) openUrl
{
    NSMutableURLRequest *reqURL = [NSMutableURLRequest requestWithURL:
                               [NSURL URLWithString:@"http://111.222.33.44/MOV/2013/4/123123123"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

    [reqURL setHTTPMethod:@"GET"];
    [reqURL setValue:@"Mozilla/4.0 (compatible;)" forHTTPHeaderField:@"User-Agent"];
    [reqURL setValue:@"AAA-bb" forHTTPHeaderField:@"Auth-Token"];
    [reqURL setValue:@"bytes=0-1024" forHTTPHeaderField:@"Range"];
    [reqURL setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    [NSURLConnection connectionWithRequest:reqURL delegate:self];

}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{    
    NSLog(@"Received");
    NSError * jsonERR = nil;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"myMove.ts"];

    [data writeToFile:path atomically:YES];
    NSLog(@"copied");
    NSURL *moveUrl = [NSURL fileURLWithPath:path];

    MPMoviePlayerController *player = [[MPMoviePlayerController alloc]init];
    [player setContentURL:moveUrl];
    player.view.frame = self.view.bounds;
    player.controlStyle = MPMovieControlStyleEmbedded;
    [self.view addSubview:player.view];
    [player play];
} 
```

我确认委托方法中有数据，但不知道怎么玩。请有人告诉我怎么玩。Auth-Token 和 Range 是必要的参数。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-07T15:32:17.693

确实，Apple 并没有公开将标头注入`MPMoviePlayerController`' 请求的简单方法。通过一些努力，您可以使用自定义[NSURLProtocol](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/NSURLProtocol_Class/Reference/Reference.html)完成此操作。所以，让我们去做吧！

MyCustomURLProtocol.h：

```
@interface MyCustomURLProtocol : NSURLProtocol <NSURLConnectionDelegate, NSURLConnectionDataDelegate>

@property (nonatomic, strong) NSURLConnection* connection;

@end 
```

MyCustomURLProtocol.m：

```
@implementation  MyCustomURLProtocol

// Define which protocols you want to handle
// In this case, I'm only handling "customProtocol" manually
// Everything else, (http, https, ftp, etc) is handled by the system
+ (BOOL) canInitWithRequest:(NSURLRequest *)request {
    NSURL* theURL = request.URL;
    NSString* scheme = theURL.scheme;
    if([scheme isEqualToString:@"customProtocol"]) {
        return YES;
    }
    return NO;
}

// You could modify the request here, but I'm doing my legwork in startLoading
+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request {
    return request;
}

// I'm not doing any custom cache work
+ (BOOL) requestIsCacheEquivalent:(NSURLRequest *)a toRequest:(NSURLRequest *)b {
    return [super requestIsCacheEquivalent:a toRequest:b];
}

// This is where I inject my header
// I take the handled request, add a header, and turn it back into http
// Then I fire it off
- (void) startLoading {
    NSMutableURLRequest* mutableRequest = [self.request mutableCopy];
    [mutableRequest setValue:@"customHeaderValue" forHTTPHeaderField:@"customHeaderField"];

    NSURL* newUrl = [[NSURL alloc] initWithScheme:@"http" host:[mutableRequest.URL host] path:[mutableRequest.URL path]];
    [mutableRequest setURL:newUrl];

    self.connection = [NSURLConnection connectionWithRequest:mutableRequest delegate:self];
}

- (void) stopLoading {
    [self.connection cancel];
}

// Below are boilerplate delegate implementations
// They are responsible for letting our client (the MPMovePlayerController) what happened

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [self.client URLProtocol:self didFailWithError:error];
    self.connection = nil;
}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.client URLProtocol:self didLoadData:data];
}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageAllowed];
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
    [self.client URLProtocolDidFinishLoading:self];
    self.connection = nil;
}

@end 
```

在您可以使用您的自定义 URL 协议之前，您必须先注册它。在您的 AppDelegate.m 中：

```
#import "MyCustomURLProtocol.h"

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // ... Your normal setup ...

    [NSURLProtocol registerClass:[MyCustomURLProtocol class]];

    return YES;
} 
```

最后，您需要使用 MPMediaPlayerController 使用您的自定义 URL 协议。

```
NSString* theURLString = [NSString stringWithFormat:@"customProtocol://%@%@", [_url host],[_url path]];
_player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:theURLString]]; 
```

MPMoviePlayerController 现在将尝试使用`customProtocol://`而不是 normal发出请求`http://`。使用此设置，我们然后拦截该请求，添加我们的标头，将其转换为 http，然后关闭所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:30:02.713

Go back and read the documentation for `NSURLConnection`, and the URL-loading system in general. `-connection:didReceiveData:` is likely called more than once, as each chunk of the file arrives. You need to handle that, rather than assuming only the complete data arrives all at once.

# javascript - 使用 jQuery 更改当前页面链接的 CSS

> ID：16027629
> 
> 赞同：3
> 
> 时间：2013-04-16T02:09:59.180
> 
> 标签：javascript, jquery, css, dynamic

新编码器在这里，非常感谢您对让我难过的问题的帮助。

我想编写代码来识别适用于当前页面的链接并将不同的 CSS 样式应用于该当前链接。我研究了这个问题，发现最好使用 jQuery 来识别当前链接，然后对其应用一个新类（例如，“.current”）。但是，当我尝试在网站上实现此功能时，它并没有奏效。

这是我正在使用的 HTML：

```
<nav class="main-nav">
   <a href="http://website.com" class="main-nav-link">
      <span class="main-nav-item" id="nav-content"></span>
   </a>
   <a href="http://website.com/calendar" class="main-nav-link">
      <span class="main-nav-item" id="nav-calendar"></span>
   </a>
   <a href="http://website.com/profile" class="main-nav-link">
      <span class="main-nav-item" id="nav-profile"></span>
   </a>
</nav> 
```

这是我应用的 CSS：

```
.main-nav .main-nav-item {
  height: 50px;
  width: 150px;
}

.main-nav #nav-content {
  background: url('/images/content-inactive.png') no-repeat center;
}

.main-nav #nav-calendar {
  background: url('/images/calendar-inactive.png') no-repeat center;
}

.main-nav #nav-profile {
  background: url('/images/profile-inactive.png') no-repeat center;
} 
```

我的目标是更改`background:`当前页面的跨度`<a>`。

这里有一些其他的 StackOverflow 线程已经解决了这个问题，但没有帮助我找到解决方案：

*   [使用 CSS 更改当前页面的链接颜色](https://stackoverflow.com/questions/2397370/how-to-change-the-link-color-of-the-current-page-with-css)
*   [根据当前页面动态改变链接的 CSS](https://stackoverflow.com/questions/9863396/dynamically-change-css-of-link-based-on-current-page)

我并不完全清楚应该将 Javascript 放在哪里，但我目前将它放在该部分`<script type="text/javascript">`之间。`</script>``<header>`

提前感谢你的帮助。:)

--

**更新：**

我目前在页面中有以下代码，但它不起作用。

Javascript：

```
<script>

      $(document).ready(function() {

     // Get the current URL
            var currentUrl = window.location.href;

            // Get the span you want with a combination class and attribute and child jQuery selector
            var currentMenuItem = $(".main-nav-link[href='" + currentUrl + "'] > .main-nav-item");

            // Then add your class
            currentMenuItem.addClass("current");

        });

</script> 
```

和CSS：

```
#nav-content.current {
  background: url('/images/content-active.png') no-repeat center -94px;
} 
```

jQuery 没有将`.current`类添加到活动链接，因此 CSS 甚至没有机会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:33:15.073

`window.location.href`将获得您当前的网址。然后，您需要使用 jQuery 选择器来查找具有该属性`<span class="main-nav-item">`的元素的子元素。将您的课程“当前”应用于该元素，您应该一切顺利。那么这个 JavaScript 怎么样：`<a class="main-nav-link">``href`

```
// Get the current URL
var currentUrl = window.location.href;

// Get the span you want with a combination class and attribute and child jQuery selector
var currentMenuItem = $(".main-nav-link[href='" + currentUrl + "'] > .main-nav-item");

// Then add your class
currentMenuItem.addClass("current"); 
```

把它放在你的脚本标签中并试一试。

一旦你让它工作，确保你添加了正确的 CSS 规则。例如，添加一个规则，为`#nav-content.current`（以及其他所有）加载不同的背景图像。

（关于您当前 CSS 的说明：看起来您对选择器的资格要求过高。如果您不必担心`.main-nav-item`页面上其他任何地方的 s，请不要费心用它`.main-nav`之前的类来限定该类。还有您的 id 选择器（例如`#nav-content`）当然不需要限定，因为它们是唯一的标识符。）

希望这对您有意义并有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:22:56.367

执行此操作的常用方法是将“活动”类添加到您的活动页面链接服务器端。然后，您可以使用 jQuery 为元素设置样式，如下所示：

```
$('.active').css('background-image','images/activebg.png'); 
```

但是正如您所提到的，您需要为每个“活动”元素使用不同的背景，并且您想要使用该链接。（我想你的意思是 URL）。

您可以像这样获取当前页面的 URL：

```
var current_url = window.location.href; 
```

然后，您可以选择具有当前 URL 的链接，如下所示：

```
var $link = $('.main-nav a[href='+current_url +']'); 
```

因此，现在您可以为当前页面链接设置背景活动，如下所示：

```
$link.css('background-image','images/activebg.png'); 
```

现在，如果您有每个链接的自定义活动背景，我建议您创建自己的属性`hover_img`或提供悬停 url 的东西：

```
<a href="http://website.com" class="main-nav-link" hover_img="/images/hover-home.png" > ....
<a href="http://website.com/calendar" class="main-nav-link calendar" hover_img="/images/hover-calendar.png"> .... 
```

等等。

然后，您可以将我的最后一行代码更改为：

```
$link.css('background-image',$link.attr('hover_img')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:19:13.113

在您的脚本页面标签内，您可以使用以下内容：

```
$(document).ready(function() {
    var currentPage = "content"; // <--Change this to the id of your span after the nav-

    //Change the background color now
    $("#nav-" + currentPage).addClass("className");
}); 
```

# branch - citrix 分支中继器性能监控

> ID：16027631
> 
> 赞同：0
> 
> 时间：2013-04-16T02:10:07.637
> 
> 标签：branch, snmp, citrix

我正在开发 citrix 分支中继器，用于通过 snmp oid 进行性能监控，其中 Icasentrate 度量的含义是什么，它是否是累积度量，以及它的单位是什么。你能请任何人提出相关的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T02:30:39.123

可以使用 SNMP 监控分支中继器/云桥。

请参阅[http://www.citrixmonitor.com](http://www.citrixmonitor.com)

# ruby-on-rails-3 - 使用我的 ruby on rails 应用程序实现设计时出现语法错误

> ID：16027634
> 
> 赞同：0
> 
> 时间：2013-04-16T02:10:11.853
> 
> 标签：ruby-on-rails-3, devise

我正在尝试在我的 rails 应用程序中实现设计，并且在我的 header.html.erb 中收到此语法错误

```
 <% if user_signed_in? %>
    Logged in as <strong><%= current.user.email %></strong>.
    <%= link_to 'Edit profile', edit_user_registration_path %>
    <%= link_to 'Logout', destroy_user_session_path, method: :delete %>
<% else %>
    <%= link_to 'Sign up', new_user_registration_path %> | 
    <%= link_to 'Login', new_user_ssession_path %>
<% end %> 
```

这是我收到的错误消息：

> 编译错误/Users/ryanoliver/repos/joyties/app/views/layouts/application.html.erb:14：语法错误，意外'：'，期待'）' ...roy_user_session_path，方法：：删除）;@output_buffer 。安全的...

非常感谢任何帮助

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:19:31.777

之间有一个点 (.) `current`。`email`此外，结束标记后还有一个额外的点 (.)

```
 Logged in as <strong><%= current.user.email %></strong>. <------ 
```

应该

```
Logged in as <strong><%= current_user.email %></strong> 
```

那是你问题的根源；）

为了使它也更好一点，你可以有一个*我的帐户*页面。为此，您将拥有类似的东西

`<%= link_to 'My Account', user_path(current_user) %>`

最终输出：

```
<% if signed_in? %>
        Logged in as <strong><%= current_user.email %></strong>
        <%= link_to 'Edit profile', edit_user_registration_path %>
        <%= link_to 'My Account', user_path(current_user) %>
        <%= link_to 'Logout', destroy_user_session_path, method: :delete %>
    <% else %>
        <%= link_to 'Sign up', new_user_registration_path %> | 
        <%= link_to 'Login', new_user_ssession_path %>
    <% end %> 
```

# java - 自定义 JDBC 驱动程序

> ID：16027641
> 
> 赞同：2
> 
> 时间：2013-04-16T02:11:48.110
> 
> 标签：java, jdbc

我正在编写自己的自定义 JDBC 驱动程序。我想知道如何配置要`DriverManager.getConnection`在客户端代码中传递的 URL 前缀（即，在使用 mysql 连接器时相当于 jdbc:mysql ）？我似乎不断得到`java.sql.SQLException: No suitable driver found`。我的代码目前如下所示：

```
static
{
    try
    {
        CustomDriver driverInst = new CustomDriver();
        DriverManager.registerDriver(driverInst);
    }
    catch (Exception e) { e.printStackTrace(); }
}

public CustomDriver () throws SQLException 
{
    super();
}

@Override
public Connection connect (String url, Properties info) throws SQLException
{
    // this is never called
    return null;
} 
```

测试代码：

```
 Class.forName("CustomDriver");

      System.out.println("Connecting to database...");
      conn = DriverManager.getConnection("customDriver://localhost/testdb"); 
      // throws SQLException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:26:36.867

你需要实施`Driver.boolean acceptsURL(String url)`

```
/**
 * Retrieves whether the driver thinks that it can open a connection
 * to the given URL.  Typically drivers will return <code>true</code> if they
 * understand the subprotocol specified in the URL and <code>false</code> if
 * they do not.
 *
 * @param url the URL of the database
 * @return <code>true</code> if this driver understands the given URL;
 *         <code>false</code> otherwise
 * @exception SQLException if a database access error occurs
 */
boolean acceptsURL(String url) throws SQLException; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:20:11.690

创建一个`java.sql.Driver`包含一行的文本文件 - 驱动程序的完全限定名称。放在`META-INF/services`文件夹里。在这种情况下，DriverManager 将找到并实例化您的驱动程序并在其上调用acceptURL(String url)。

这是让 DriverManager 了解您的驱动程序的方法之一，请参阅 DriverManager API 了解更多信息。

# php - 在 HTML 中呼应 PHP

> ID：16027649
> 
> 赞同：-7
> 
> 时间：2013-04-16T02:12:40.600
> 
> 标签：php, html

`<input/>`PHP 在 HTML wrapper 和`<textarea/>`wrapper内回显有区别吗？

```
 <input id="element_3" name="Portnumber" class="element text medium" type="text" maxlength="255" value="<?php echo $person['portnumber']; ?>"/> 
```

从端口号表中回显数据。

```
 <textarea id="element_5" name="Description" class="element textarea medium" value="<?php echo $person['description']; ?>"></textarea> 
```

没有任何回应。

**问题**

文本区域包装器内的语法是否应该与输入包装器不同以显示回显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:14:08.543

Textarea 没有 value 属性。内容被包装在`<textarea>`标签中：

```
<textarea id="element_5" name="Description" class="element textarea medium">
    <?php echo $person['description']; ?>
</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:13:45.677

尝试：

```
<textarea id="element_5" name="Description" class="element textarea medium>
<?php echo $person['description']; ?>
</textarea> 
```

文本区域与您的常规输入不同，它们没有`value`属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:14:11.433

Textarea 没有值属性

```
 <textarea id="element_5" name="Description" class="element textarea medium"><?php echo $person['description']; ?></textarea> 
```

# javascript - 边界框外观 - 使用 fabricjs 控制自定义

> ID：16027651
> 
> 赞同：7
> 
> 时间：2013-04-16T02:13:15.050
> 
> 标签：javascript, overriding, fabricjs

我想知道有没有办法改变边界框图标，我阅读了fabric.js中的源代码，它为边界框生成方形框，但我想将其更改为圆形或更改为我的自定义外观。你能给我建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-01-27T09:06:33.087

自定义控件的最快方法是编写自己的`_drawControl`函数并使其与 fabricjs 标准兼容以覆盖它。请记住，每次渲染都会调用此函数 9 次，因此请尽量减少代码和绘图。此外，如果您修改上下文 (ctx)，请记住使用`.save`并且`.restore`不要弄乱渲染管道。

FabricJs 将调用函数`top`并`left`为矩形做好准备，因此角将位于`top + size/2`and `left + size/2`，其中 size 为`this.cornerSize`

```
function newControls(control, ctx, methodName, left, top) {
  if (!this.isControlVisible(control)) {
        return;
      }
      var size = this.cornerSize;
      isVML() || this.transparentCorners || ctx.clearRect(left, top, size, size);
      ctx.arc(left + size/2, top + size/2, size/2, 0, 2 * Math.PI, false);
      ctx.stroke();
}

fabric.Object.prototype._drawControl = newControls; 
```

```
function newControls(control, ctx, methodName, left, top) {
  if (!this.isControlVisible(control)) {
        return;
      }
      var size = this.cornerSize;
      this.transparentCorners || ctx.clearRect(left, top, size, size);
      ctx.beginPath();
      ctx.arc(left + size/2, top + size/2, size/2, 0, 2 * Math.PI, false);
      ctx.stroke();
}

fabric.Object.prototype._drawControl = newControls;
fabric.Object.prototype.cornerSize = 15;
var canvas = new fabric.Canvas('c');

canvas.add(new fabric.Rect({width:100, height:100, top:50, left:50}));
canvas.setActiveObject(canvas.getObjects()[0]);
```

```
<script type ="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js"></script>
<canvas id="c" width="400" height="400" style="border:1px solid #ccc"></canvas>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T02:34:01.393

检查这些示例：

[http://fabricjs.com/customization/](http://fabricjs.com/customization/)

示例 2：

```
var canvas = new fabric.Canvas('c3');
  canvas.add(new fabric.Circle({ radius: 30, fill: '#f55', top: 100, left: 100 }));

  canvas.item(0).set({
    borderColor: 'red',
    cornerColor: 'green',
    cornerSize: 6,
    transparentCorners: false
  });
  canvas.setActiveObject(canvas.item(0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T16:04:05.863

这适用于最新版本的 fabricjs（截至目前为 4.4）。

您有一个在线示例[http://fabricjs.com/controls-customization](http://fabricjs.com/controls-customization)，它允许您对全局控件执行基本自定义。

它很简单：

```
fabric.Object.prototype.borderColor = 'blue'; 
```

例如，将边框颜色更改为蓝色。

另一个依赖于fabricjs 4 的演示，[http](http://fabricjs.com/custom-control-render) ://fabricjs.com/custom-control-render ，包含允许您添加自定义控件的示例。把这个留给有兴趣的人。

# php - 为什么这个 javascript 不能按照我们在弹出表单中的目的运行

> ID：16027655
> 
> 赞同：1
> 
> 时间：2013-04-16T02:13:49.790
> 
> 标签：php, javascript, html, jquery

```
 </br> 
```

s_foot"> *

使用 ajax.jquery 作为控制事件。像 $("#save").click(function(){.....});

```
<script type="text/javascript">
var wp;
var posisi;
var pid;
var pname;
var pdate; 
```

在这个脚本上，我尝试通过元素 id 获取值并使用 POST 作为方法。这里 aksi.php 代码

```
 <?php
    //conect to database
    //get the value

 ($_POST['pname']);
        $ProductionDate = htmlspecialchars($_POST['pdate']);
        $save = mssql_query("Insert tblTrnProduct value('$ProductID', '$ProductName', '$WH', '$Posisi', '$ProductionDate')
        WHERE Posisi='$Posisi'");
        if($save){
        echo "sukses";
        }else{
        echo "error";
        }
        }
?> 
```

在 aksi.php 上没有记录任何值。c'z 当我使用时`<?php print_r($_POST) ?>`有一个空结果。当然，当我在浏览器中运行它时，总是说“ERROR..penyimpanan data GAGAL”。有什么问题？请建议...带有代码示例将更加感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:23:24.467

您未能在 jsFiddle 中包含 jQuery。`$ is undefined`浏览器控制台中的错误应该已经提醒您这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:24:03.167

您的小提琴确实有效，您只是忘记包含`jQuery`. 看看这里[http://jsfiddle.net/Rz2PZ/2/](http://jsfiddle.net/Rz2PZ/2/)。但是，我希望您可能包含`jQuery`在您的实际项目中，那么`exit`您的代码中可能不存在该函数吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:25:04.617

jsfiddle.net/

如果你使用 jquery 代码，需要加载 jquery (Frameworks & Extensions 选择框)

# parsing - 为什么 PowerShell 将 `$true -or $false` 解析为 `CommandElement`s？

> ID：16027658
> 
> 赞同：3
> 
> 时间：2013-04-16T02:14:09.920
> 
> 标签：parsing, powershell

在 PowerShell 中，查看如何解析带有逻辑运算符的语句：

```
> $ast = [System.Management.Automation.Language.Parser]::ParseInput("($true) -and ($false)", [ref]$null, [ref]$null)
> $ast.EndBlock.Statements[0].PipelineElements[0].GetType().Name
CommandExpressionAst
> $ast.EndBlock.Statements[0].PipelineElements[0].Expression

运营商：和
左：（真）
正确：（错误）
错误位置：-和
静态类型：System.Boolean
范围：（真）-和（假）
家长：（真）-和（假）

```

正如预期的那样，AST 将其视为二进制表达式。但是，如果删除括号，它将被解析为命令。

```
> $true - 或 $false
真的

> $ast = [System.Management.Automation.Language.Parser]::ParseInput("$true -or $false", [ref]$null, [ref]$null)
> $ast.EndBlock.Statements[0].PipelineElements[0].Gettype().Name
CommandAst

> $ast.EndBlock.Statements[0].PipelineElements[0].CommandElements

StringConstantType : 裸字
值：真
静态类型：System.String
程度：真
父级：真或假

参数名称：或
争论 ：
错误位置：-或
范围：-或
父级：真或假

StringConstantType : 裸字
值：假
静态类型：System.String
范围：错误
父级：真或假

```

我研究了官方 PowerShell 语言规范中的语言语法，但我没有看到它 - 为什么这是一个命令，而不是一个表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:39:58.730

我猜您不希望 PowerShell 在将字符串传递给 ParseInput 之前对其进行评估。在这种情况下，请使用单引号：

```
27> $ast = [System.Management.Automation.Language.Parser]::ParseInput( '$true -or $false', [ref]$null, [ref]$null)
28> $ast.EndBlock.Statements[0].PipelineElements[0].Expression

Operator      : Or
Left          : $true
Right         : $false
ErrorPosition : -or
StaticType    : System.Boolean
Extent        : $true -or $false
Parent        : $true -or $false 
```

# javascript - 如何在 html 或 javascript 中将 Img 附加到 Img

> ID：16027667
> 
> 赞同：2
> 
> 时间：2013-04-16T02:16:16.907
> 
> 标签：javascript, html, css, image, tags

您好我正在尝试制作状态栏，我在上一张图片之后添加了一些图片。让我解释清楚。

我有两个图像（gif）。猜猜白色 10x10 像素和黑色 10x10 像素。

`<Img src='./black.gif>`我在我的主页上使用这个标签。我想放在`<Img src='./white.gif>`后面`<Img src='./black.gif>`。

最后它看起来像这样

■□□■■□■□■

可以使用HTML吗？或任何好主意？

- - - - -添加

谢谢。其实我可以有更多的图像，它不是固定的。例如，我想附加一个与 1-3(green) 4-7(yellow) 8-10(red) 等值对应的图像。并且来自highcharts的数据动态更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:18:20.367

## 解决方案1（首选）：

为什么不能只使用该`background-repeat`属性并使用 Photoshop 创建一个带有黑白方块的图像？如果您不能这样做，请参阅下面的另一种解决方案。

## 解决方案2：

您可以将图像包装在 a 中`div`并给它们 a `float: left`：

**HTML：**

```
<div>
    <div class="image_cont">
        <img src="white.jpg" />
    </div>
    <div class="image_cont">
        <img src="white.jpg" />
    </div>
</div> 
```

**CSS：**

```
.image_cont{
    float: left; /* OR display: inline-block  OR  width: xx px */
} 
```

[**工作示例（JSFiddle）**](http://jsfiddle.net/u8xWZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:52:06.790

我用 jQuery 找到了它。解决方案是使用“附加”并将 img 与 div 容器包装在一起。

和

$('#image_status').append('');

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T02:39:33.313

用 div 容器包装图像并为其分配一个 id 即 (id) 然后使用这个 css 属性：

```
div#id img{
display: inline-block;
} 
```

[jsfiddle](http://jsfiddle.net/arcm111/LZypd/)

# actionscript-3 - 如何将单击事件侦听器分配给 Flex 4 中的绘制路径

> ID：16027670
> 
> 赞同：0
> 
> 时间：2013-04-16T02:16:29.317
> 
> 标签：actionscript-3, apache-flex, path, flex4, flex4.5

我在 mxml 中有一个火花路径：

```
<s:Group id="group" click="clickHandler(event)" >
                <s:Path id="na259" x="385.301" y="140.422" winding="nonZero"   data="M2.01562 0.141602 2.32812 0.110352 2.78125 0.0322266 3.15625 0.0322266 3.59375 0 4.04688 0 4.5625 0.0322266 5.04688 0 5.59375 0 5.95312 0.0166016 6.39062 0.0166016 6.875 0.0478516 7.29688 0.0712891 7.76807 0.0712891 8.29688 0.0947266 8.78125 0.141602
                        9.28125 0.141602 9.6875 0.188477 10.0469 0.219727 10.5625 0.282227 11 0.313477 11.4062 0.360352C11.4062 0.360352 11.7969 0.422852 11.8438 0.438477 11.8906 0.454102 12.3281 0.547852 12.3281 0.547852L12.8281 0.641602 13.3125 0.782227 13.6562 0.860352
                        14.0312 0.985352 14.3906 1.1416 14.7031 1.28223 15.0781 1.43848 15.3594 1.68848 15.6719 1.98535 15.9062 2.29785 16.1875 2.79785 16.25 3.46973 16.1875 4.09473 16.125 4.6416 15.9375 5.17285 15.6875 5.79785 15.3906 6.25098 15.0469 6.73535 14.5938
                        7.15723 14.125 7.42285 13.6719 7.5791 13.208 7.5791 12.5938 7.3291 11.9844 6.90723 11.4062 6.53223 11.0625 6.29785 10.7188 6.03223 10.3438 5.93848 9.96875 6.11035 9.70312 6.37598 9.57812 6.81348 8.3125 7.04785 7.79688 6.92285 7.45312 6.7666 6.98438
                        6.67285 6.23438 6.61035 5.84375 6.6416 5.70312 6.6416 5.53125 6.67285 5.45312 6.8291 5.07812 6.65723 4.6875 6.54785 4.26562 6.48535 3.79688 6.53223 3.3125 6.65723 2.89062 6.98535 2.57812 7.23535 2.22607 7.5791 1.9375 7.8291 1.73438 8.12598 1.39062
                        8.2666 1.03125 8.12598 0.65625 7.8291 0.59375 7.5166 0.4375 7.1416 0.328125 6.68848 0.296875 6.15723 0.234375 5.7041 0.234375 5.23535 0.3125 4.65723 0.234375 4.2627 0.15625 3.84473 0.046875 3.15723 0 2.61035 0.03125 2.04785 0.078125 1.67285 0.21875
                        1.37598 0.46875 1.12598 0.734375 0.766602 1.01562 0.469727 1.39062 0.266602 2.01562 0.141602Z">
                    <s:stroke>
                        <s:SolidColorStroke weight="0.25" caps="none" joints="miter" miterLimit="10"/>
                    </s:stroke>
                </s:Path>
            </s:Group> 
```

所以，我的问题是，我需要精确地使这条路径可点击......而不是它周围的组......该组是一个盒子，所以它不够精确。

这个标签：

```
<s:Path> 
```

bot 是否接受属性“click”，因此我无法为此标签创建 click 事件侦听器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:20:55.447

将您的路径包装成一个组并将组的 mouseEnabledWhereTransparent 属性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:40:17.410

有时会通过使用`Rect`类似的组件来提供帮助

```
<!-- hit area -->
<s:Rect left="0" right="0" top="0" bottom="0">
    <s:fill>
        <s:SolidColor color="#000000" alpha="0"/>
    </s:fill>
</s:Rect>

<s:Group id="group" click="clickHandler(event)" >
                <s:Path id="na259" x="385.301" y="140.422" winding="nonZero"   data="M2.01562 0.141602 2.32812 0.110352 2.78125 0.0322266 3.15625 0.0322266 3.59375 0 4.04688 0 4.5625 0.0322266 5.04688 0 5.59375 0 5.95312 0.0166016 6.39062 0.0166016 6.875 0.0478516 7.29688 0.0712891 7.76807 0.0712891 8.29688 0.0947266 8.78125 0.141602
                        9.28125 0.141602 9.6875 0.188477 10.0469 0.219727 10.5625 0.282227 11 0.313477 11.4062 0.360352C11.4062 0.360352 11.7969 0.422852 11.8438 0.438477 11.8906 0.454102 12.3281 0.547852 12.3281 0.547852L12.8281 0.641602 13.3125 0.782227 13.6562 0.860352
                        14.0312 0.985352 14.3906 1.1416 14.7031 1.28223 15.0781 1.43848 15.3594 1.68848 15.6719 1.98535 15.9062 2.29785 16.1875 2.79785 16.25 3.46973 16.1875 4.09473 16.125 4.6416 15.9375 5.17285 15.6875 5.79785 15.3906 6.25098 15.0469 6.73535 14.5938
                        7.15723 14.125 7.42285 13.6719 7.5791 13.208 7.5791 12.5938 7.3291 11.9844 6.90723 11.4062 6.53223 11.0625 6.29785 10.7188 6.03223 10.3438 5.93848 9.96875 6.11035 9.70312 6.37598 9.57812 6.81348 8.3125 7.04785 7.79688 6.92285 7.45312 6.7666 6.98438
                        6.67285 6.23438 6.61035 5.84375 6.6416 5.70312 6.6416 5.53125 6.67285 5.45312 6.8291 5.07812 6.65723 4.6875 6.54785 4.26562 6.48535 3.79688 6.53223 3.3125 6.65723 2.89062 6.98535 2.57812 7.23535 2.22607 7.5791 1.9375 7.8291 1.73438 8.12598 1.39062
                        8.2666 1.03125 8.12598 0.65625 7.8291 0.59375 7.5166 0.4375 7.1416 0.328125 6.68848 0.296875 6.15723 0.234375 5.7041 0.234375 5.23535 0.3125 4.65723 0.234375 4.2627 0.15625 3.84473 0.046875 3.15723 0 2.61035 0.03125 2.04785 0.078125 1.67285 0.21875
                        1.37598 0.46875 1.12598 0.734375 0.766602 1.01562 0.469727 1.39062 0.266602 2.01562 0.141602Z">
                    <s:stroke>
                        <s:SolidColorStroke weight="0.25" caps="none" joints="miter" miterLimit="10"/>
                    </s:stroke>
                </s:Path>
            </s:Group> 
```

# c# - Linq 到 XML - 从表到 XDocument

> ID：16027672
> 
> 赞同：1
> 
> 时间：2013-04-16T02:16:53.270
> 
> 标签：c#, xml, linq

我想从我的表中生成一个 XDocument（结构不同），但我不断收到以下错误：LINQ to Entities 无法识别方法 'System.String ToString()' 方法。

我知道这是由 Birthdate 引起的，我需要使用 SqlFunctions.StringConvert 但我正在使用 Framework 4.0

关于如何解决这个问题的任何想法？

```
// Newsletter subscriptions
var news = new XDocument(new XDeclaration("1.0", "utf-8", "yes"),
            new XElement("USER",
            from n in _dc.Newsletter_Datas
            where n.Timestamp >= startDate
            select
               new XElement("ROW",
                    new XElement("UTI", n.ID),
                    new XElement("FIRSTNAME", n.FirstName),
                    new XElement("FAMILYNAME", n.LastName),
                    new XElement("GENDER", n.Gender),
                    new XElement("BIRTHDATE", n.BirthDate != null ? n.BirthDate.Value.ToString("yyyy-MM-dd") : "2003-01-01"),
                    new XElement("LANGUAGE", n.Language),
                    new XElement("EMAIL", n.Email),
                    new XElement("STREETNAME", n.StreetName),
                    new XElement("HOUSENR", n.HouseNr),
                    new XElement("BOXNR", n.BoxNr),
                    new XElement("ZIPCODE", n.Zipcode),
                    new XElement("CITY", n.City),
                    new XElement("COUNTRY", n.Country),
                    new XElement("TS", n.Timestamp.ToString("yyyy-MM-dd hh:mm:ss")),
                    new XElement("MESSAGE_ID", "SCNEWS02"),
                    new XElement("OPT_INS",
                        new XElement("OPT_IN",
                            new XElement("OPT_IN_CBP", "01000000000"),
                            new XElement("OPT_IN_INSERT_TS", n.Timestamp.ToString("yyyy-MM-dd hh:mm:ss")),
                            new XElement("OPT_IN_METHOD", "1"),
                            new XElement("OPT_IN_TYPE", n.OptIn),
                            new XElement("OPT_IN_CHANNEL", "2")))))); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:28:59.457

将您的查询分成单独的部分，第一部分是查询本身。这将由实体框架处理。然后将该查询转换为 an`IEnumerable<NewsletterData>` 以使用 LINQ to 对象完成它。实体框架只能做一个简单的投影（您显然没有这样做）。

```
var query =
    from n in _dc.Newsletter_Datas
    where n.Timestamp >= startDate
    select n;
var news = new XDocument(new XDeclaration("1.0", "utf-8", "yes"),
    new XElement("USER",
        from n in query.AsEnumerable() // LINQ to objects
        select new XElement("ROW",
            new XElement("UTI", n.ID),
            new XElement("FIRSTNAME", n.FirstName),
            new XElement("FAMILYNAME", n.LastName),
            new XElement("GENDER", n.Gender),
            new XElement("BIRTHDATE", n.BirthDate != null ? n.BirthDate.Value.ToString("yyyy-MM-dd") : "2003-01-01"),
            new XElement("LANGUAGE", n.Language),
            new XElement("EMAIL", n.Email),
            new XElement("STREETNAME", n.StreetName),
            new XElement("HOUSENR", n.HouseNr),
            new XElement("BOXNR", n.BoxNr),
            new XElement("ZIPCODE", n.Zipcode),
            new XElement("CITY", n.City),
            new XElement("COUNTRY", n.Country),
            new XElement("TS", n.Timestamp.ToString("yyyy-MM-dd hh:mm:ss")),
            new XElement("MESSAGE_ID", "SCNEWS02"),
            new XElement("OPT_INS",
                new XElement("OPT_IN",
                    new XElement("OPT_IN_CBP", "01000000000"),
                    new XElement("OPT_IN_INSERT_TS", n.Timestamp.ToString("yyyy-MM-dd hh:mm:ss")),
                    new XElement("OPT_IN_METHOD", "1"),
                    new XElement("OPT_IN_TYPE", n.OptIn),
                    new XElement("OPT_IN_CHANNEL", "2")
                )
            )
        )
    )
); 
```

# c++ - 为什么分配较大空间时堆地址的增长方向相反？

> ID：16027674
> 
> 赞同：2
> 
> 时间：2013-04-16T02:16:59.203
> 
> 标签：c++, c, memory, operating-system

我正在做一些堆地址增长的实验，发生了一些有趣的事情。（操作系统：CentOS，）

但我不明白，为什么会这样？谢谢！

这是我首先做的：

```
double *ptr[1000];
for (int i=0;i<1000;i++){
    ptr[i] = new double[**10000**];
    cout << ptr[i] << endl;
} 
```

输出是增量的（最后几行）：

```
....
....
0x2481be0
0x2495470
0x24a8d00
0x24bc590
0x24cfe20
0x24e36b0
0x24f6f40
0x250a7d0
0x251e060 
```

然后我将10000改为20000：

```
double *ptr[1000];
for (int i=0;i<1000;i++){
    ptr[i] = new double[**20000**];
    cout << ptr[i] << endl;
} 
```

该地址变得更像堆栈空间的地址（并且递减）：

```
....
....
0x7f69c4d8a010
0x7f69c4d62010
0x7f69c4d3a010
0x7f69c4d12010
0x7f69c4cea010
0x7f69c4cc2010
0x7f69c4c9a010
0x7f69c4c72010
0x7f69c4c4a010
0x7f69c4c22010
0x7f69c4bfa010
0x7f69c4bd2010
0x7f69c4baa010
0x7f69c4b82010 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T02:47:46.763

不同的环境/实现使用不同的策略分配内存，因此没有一个正确的规则。然而，一个常见的模式是对小对象和大对象使用不同的分配策略。

通常，一个运行时会为不同大小的对象提供多个堆，这些堆针对不同的使用模式进行了优化。例如，小对象往往被频繁分配和快速删除，而大对象往往很少被创建并且具有较长的生命周期。

如果你对所有东西都使用一个堆，那么一些小对象将很快散布在你的内存空间中，留下许多中等大小的块可用，但大对象只需要很少或不需要大块。这称为内存碎片，即使名义上您的应用程序有大量可用内存，也可能导致分配失败。

使用不同堆的另一个原因是针对不同的对象大小使用不同的使用跟踪方法。例如，一个实现可能会从操作系统请求一个新的内存块用于大对象，而对于小对象，使用一些较小的操作系统内存块以及由 C 运行时堆管理器处理的子分配。对于大型对象非常有效的内存使用跟踪机制对于较小的对象可能非常昂贵，因为用于跟踪使用的内存成为每个对象实际使用的内存的重要部分。

在您的情况下，我的猜测是运行时在内存空间的开头分配小对象，自下而上，而在结尾附近分配较大的对象，自上而下，以避免碎片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T02:41:50.603

你不会在这里得到很好的答案，因为新函数可以选择它想要分配内存的任何方法。我的猜测是这里的算法将池分为大小分配池，而大分配池向下增长以便它们可以在中间相遇（以免浪费任何空间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:49:12.210

在 UNIX 上，分配器使用 sbrk(2) 和 mmap(2) 从操作系统获取内存。sbrk 返回的地址定义明确，但 mmap 的地址是“任何可用的”。在 Windows 上，分配器使用类似于 mmap 的 VirtualAlloc()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T02:51:35.013

实现可以自由地混合不同的分配方案。在 C++ 中，有数千甚至数百万个相对较小的对象是很正常的，因此库的内存分配例程确保它们打包好并且非常轻量级是有意义的。您对 10000 个双精度的分配是这样做的：它们相隔 80016 个字节 - 80000 个用于 10000 个 8 字节变量和只有 16 个字节的填充。节点特别指出大小与 2 的幂没有关系，而当分配 20000 加倍时，它们每次减少 163840 字节......奇怪的是，正好是 10 * 2^14。这向我表明，以前的分配正在从一个堆中得到满足，该堆旨在通过 C++ 分配支持有效的小对象分配`new`函数，而后者已经越过阈值并且可能被发送到`malloc`来自不同堆的内存，浪费更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T19:13:03.627

从某种意义上说，您很幸运，10000 个双精度数和 20000 个双精度数恰好位于称为 MMAP_THRESHOLD 的临界阈值的相对两侧。

MMAP_THRESHOLD 默认为 128KB。因此，80KB（即 10000 双倍）内存分配请求在堆上提供服务，而 160KB（20000 双倍）内存分配请求由匿名内存映射（通过 mmap 系统调用）提供服务。（请注意，由于其不同的底层内存分配处理机制，对大型内存分配使用内存映射可能会产生额外的惩罚。您可能需要调整 MMAP_THRESHOLD 以获得应用程序的最佳性能。）

在[Linux Man for malloc 中](http://linux.die.net/man/3/malloc)：

> 通常，malloc() 从堆中分配内存，并根据需要调整堆的大小，使用 sbrk(2)。当分配大于 MMAP_THRESHOLD 字节的内存块时，glibc malloc() 实现使用 mmap(2) 将内存分配为私有匿名映射。MMAP_THRESHOLD 默认为 128 kB，但可以使用 mallopt(3) 进行调整。使用 mmap(2) 执行的分配不受 RLIMIT_DATA 资源限制的影响（请参阅 getrlimit(2)）。

# c++ - 新的 C++/C 语法

> ID：16027676
> 
> 赞同：-1
> 
> 时间：2013-04-16T02:17:52.320
> 
> 标签：c++, c

下面的代码是什么意思？`&`符号代表什么 ？

```
布尔 x = 真；
x& = (1 || 0);
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:22:23.570

`x& = (1 || 0);`应该是`x &= (1 || 0);`which mean `x = x & (1 || 0);`which means `x = x & 1`which means it ands 最低有效位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T02:22:32.180

```
x& = (1 || 0);
//^space cannot be here 
```

`&`错了，和之间不能有空格`=`。

如果您的意思是`&=`（复合运算符），那么表达式的意思是：

```
x = x & (1 ||0); 
```

先做逻辑`or`再做`bit and`。它相当于：

```
x = x & 1; 
```

# java - Java 项目架构

> ID：16027677
> 
> 赞同：0
> 
> 时间：2013-04-16T02:18:02.330
> 
> 标签：java

任何人都可以解释一下java项目的项目文件夹的基本架构吗？我知道它包含子文件夹，例如二进制文件的 bin，源文件的 src，外部库的 lib，但我想知道 build.xml、project.xml、.project、build.properties 等文件执行的具体功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:22:53.920

这实际上取决于您使用的工具。例如：

*   例如，如果您使用**Maven**，您的项目应该 `pom.xml`在根目录中有一个，并且通常应该遵循[Maven 目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。
*   如果您使用的是**Ant**，那么您应该有一个`build.xml`.
*   `.project`是**Eclipse**用来存储项目特定配置信息的私有文件。

实际上，您在如何配置项目方面具有相当大的灵活性，但发疯是一个坏主意，因为它只会让其他人感到困惑，并使您的工具设置更加困难。我通常的建议是遵循 Maven 目录布局——这是最接近标准的东西。

# javascript - 跨多个选择框拆分 JSON 数组

> ID：16027687
> 
> 赞同：1
> 
> 时间：2013-04-16T02:19:02.727
> 
> 标签：javascript, json, angularjs

我在我的部分网站中使用 AngularJS，而不是整个网站。我有几个选择框，其中一个依赖于另一个。一个包含国家列表，另一个包含所选国家/地区的城市。

过去，我会将我的 json 拆分为对服务器的 2 个查询，因此当国家/地区发生变化时，它将发送选定的值，并且服务器将相应地返回一个 json 列表，该列表将使用 jquery 插入到选择框中。这一次，使用[http://builtwith.angularjs.org/](http://builtwith.angularjs.org/)作为一种指导方针，我决定将所有内容都作为一个 json 返回，并纯粹在 javascript 中处理此功能。

所以可以说，我的**json**看起来像这样：

```
[
  { "code": 1, "country": "Germany", "cities": [ "Berlin", "Munich" ] },
  { "code": 2, "country": "Italy", "cities": [ "Rome", "Venice" ] },
  { "code": 3, "country": "United Kingdom", "cities": [ "London", "Manchester" ]}
] 
```

我需要国家的所有值作为国家选择框的一个列表，以及另一个选择框的每个城市的列表。

到目前为止，这是**控制器：**

```
angular.module('myApp', [])
    .controller('MyController', ['$scope', '$http', function ($scope, $http) {

        $http.get('/api/locations')
            .success(function (data, status, header, config) {

                $scope.locations = data[0];
                $scope.countryList = [];
                $scope.cityList = [];

                for (var i = 0; i < data.length; i++) {
                    $scope.countryList.push([data[i].code, data[i].country]);
                    for (var j = 0; j < data[i].cities.length; j++) {
                        $scope.cityList.push([data[i].code + '-' + data[i].cities[j], data[i].cities[j]]);
                    }
                }
            });
    }]); 
```

我的选择框：

**国家**：

```
<select ng-model="country" data-ng-options="c for c in countryList"></select> 
```

**城市**：

```
<select data-ng-model="city" data-ng-options="c for c in cityList"></select> 
```

目前，两个选择框都已填充，但它们的文本包含数组的两个值。城市框包含所有城市，而不仅仅是第一个国家的城市。

我不确定我是否走在正确的道路上，或者是否有更简单的方法来实现这一目标。

总结一下，我想知道：

1.  我应该将整个 json 保留为一个请求/响应并在 JS 中处理它吗？
2.  您如何以“官方” angularjs 方式加载每个选择框？
3.  我知道选择框上的 ng-change 属性，但我不确定如何创建查询并根据所选国家/地区更改城市列表值。

这是一个小插曲：[http :](http://plnkr.co/edit/zAcRjSDm9OndxugtsAOs?p=preview) **//plnkr.co/edit/zAcRjSDm9OndxugtsAOs ?p=preview**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:27:51.250

> 我不确定我是否走在正确的道路上，或者是否有更简单的方法来实现这一目标。

是的，您正走在 The Angular Way 的道路上。是的，有一种更简单的方法。

> 我知道选择框上的 ng-change 属性，但我不确定如何创建查询并根据所选国家/地区更改城市列表值。

这是一个分叉的[Plunk](http://plnkr.co/edit/hcN3M7ohREQpKjLMQtWG?p=preview)，它演示了如何根据第一个选择框的输出设置第二个选择框。

国家/地区选择框有 2way 绑定 via `ng-model`，因此结果绑定到一个名为`country`

国家/地区选择框`country.cities`用于其输入，并将所选值绑定到`city`

> 我应该将整个 json 保留为一个请求/响应并在 JS 中处理它吗？

这取决于您如何构建服务。如果您认为将城市与国家分开是没有用的，那么请让它们有界。

否则，您可能希望拥有以下 REST api：

```
get /country //returns array of all countries
get /<countryname>/cities //returns array of all cities in country 
```

缺点是您需要对数据进行多次获取请求。好处是您的 api 更加模块化。但是，这取决于您的用例。

> 您如何以“官方” angularjs 方式加载每个选择框？

您的 plunk 语法 'c for c in cityList' 似乎是正确的。

# javascript - 在哪里可以找到可定制的完整活动/预订日历？

> ID：16027691
> 
> 赞同：-1
> 
> 时间：2013-04-16T02:19:20.370
> 
> 标签：javascript, jquery, plugins, calendar

我正在寻找一个活动/预订日历，其中每个单元格/每一天都是可定制的（我们可以放任何我们喜欢的东西）。

我经常看到允许您将事件作为文本输入的日历。但是，我们需要放入四个文本字段，并为每个单元格以某种方式显示它。

是否有执行此操作的插件（jquery 或其他）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:30:36.420

要实现您正在寻找的所有功能，您需要进行一些修改，但这应该可以解决问题。

**特征**

*   每天选择并为每一天设置标准
*   在您的网站或网页上无限次使用。
*   前端和后端版本。
*   每个版本都可以完全独立于 CSS 进行定制。
*   自动调整大小。
*   您可以更改语言。
*   与任何服务器端脚本兼容。

请参阅：[预订日历专业版](http://codecanyon.net/item/booking-calendar-pro-jquery-plugin/244645)。

另外 - 这不是“最漂亮”的解决方案，所以你可能需要花一些时间来打扮它。这是我在以前的项目中使用过的插件，但找不到任何提供类似或更好功能的插件。

# c# - 如何在 http post 请求中获取图像文件名

> ID：16027693
> 
> 赞同：0
> 
> 时间：2013-04-16T02:19:30.370
> 
> 标签：c#, html, asp.net-mvc

我对 MVC 很陌生，我试图只获取新选择的文件的文件名。

html 代码如下所示：

```
<form action="Url.Action("UploadImage","Util")" method="POST" enctype="multipart/form-data" encoding="multipart/form-data">
<input name="file" type="file" accept="image/*" title="Browse..." />
</form> 
```

.cs 函数如下所示：

```
[HttpPost]
public String UploadImage(HttpPostedFileBase file)
{
     if(file == null) throw new ArgumentNullException("File");
     return file.FileName;
} 
```

我得到的是`data:image/png;base64,add_32x32.png` ，我想要的只是`add_32x32.png`

我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:37:16.823

你可以试试这个只是为了提取文件名

```
 var fileName = Path.GetFileName(file.FileName); 
```

或者在其他情况下你可以做

```
var name = file.FileName.Split(',')[1].ToString(); 
```

# outlook - 不一致的 Outlook 插件事件触发

> ID：16027695
> 
> 赞同：1
> 
> 时间：2013-04-16T02:19:54.310
> 
> 标签：outlook, vsto, office-interop, outlook-addin, outlook-2010

在我的开发机器上，我之前触发了`FormInitializing`和事件。**我在VS 2010**中创建了一个安装包，并安装在安装了**Outlook 2010的普通****Windows 7 Ultimate**上。`FormShowing``RibbonLoad`

 ******插件没有出现在我的会议申请表上。所以我设置了远程调试器，令我惊讶的`RibbonLoad`是，它在上面提到的两个表单事件之前触发了。正在抛出空异常 b\c`RibbonLoad`依赖于`FormRegion`已加载的代码。任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:16:37.577

某些 Outlook 事件没有定义的顺序 -**功能区 UI**和**检查器 UI**是完全不同的组件，尽管它们都显示在同一个窗口中。Outlook 运行时可能会以不同的顺序触发 Ribbon 和 Inspector 事件。如果您需要完成一些初始化，同步这两个事件 (*`RibbonLoad`和) 将是您的工作。`FormInitializing`*您不能假设顺序总是相同的。

`ThisAddIn.Startup`我在之前触发时注意到了同样的行为`ThisAddIn.CreateRibbonExtensibilityObject`，但有时在之后取决于 Outlook 如何触发排序。您可以使用带有同步锁定的静态变量来确保您的初始化代码只被触发一次。

### 这是我用来将`Startup`事件与`RibbonLoad`事件同步的示例：

```
public partial class ThisAddIn
{
  static bool formInitialized = false;
  static readonly object padLock = new Object(); 

   private void ThisAddIn_Startup(object sender, System.EventArgs e)
   {
       lock(padLock) { if (!formInitialized ) { InitializeForm(); } }
       // startup code
    }

   private void InitializeForm() 
   {
      // init code
      formInitialized = true;
   }

   protected override IRibbonExtensibility CreateRibbonExtensibilityObject()
    {
        lock(padLock) { if (!formInitialized) InitializeForm(); }
        // Create ribbon UI
    }
} 
```******

# android - 当设备的屏幕方向设置关闭时，应用程序仍以横向模式旋转

> ID：16027696
> 
> 赞同：2
> 
> 时间：2013-04-16T02:20:15.140
> 
> 标签：android, android-screen-support, android-screen

我通过在清单中的活动上设置 android:screenOrientation="sensorLandscape" 将我的应用程序设置为旋转 180 度。但是当设备中的屏幕方向设置关闭时，应用程序仍在旋转。

我的应用需要在横向模式下旋转 180 度，但在屏幕方向设置关闭时不应旋转。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:30:51.210

我相信你应该使用`landscape`而不是`sensorLandscape`. `sensor`类型属性不遵守方向锁定，并且无论该设置如何仍会旋转。

我似乎无法确定是否`landscape`意味着 90 度和 270 度景观，但试一试——我相信这就是你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:50:39.103

我没有亲自使用过，但从[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)的文档中我可以看到

> **笔记**：当您声明横向或纵向值之一时，它被认为是对活动运行方向的硬性要求。因此，您声明的值允许按 Google Play 等服务进行过滤，因此您的应用程序仅可用于支持您的活动所需方向的设备。例如，如果您声明“landscape”、“reverseLandscape”或“sensorLandscape”，那么您的应用程序将仅适用于支持横向方向的设备。但是，您还应该明确声明您的应用程序需要纵向或横向的元素。例如， 。

所以你可以试试

```
<uses-feature android:name="android.hardware.screen.landscape"/>. 
```

# python - 运行 manage.py sync.db 后无法通过 Django ImportError

> ID：16027700
> 
> 赞同：0
> 
> 时间：2013-04-16T02:21:25.043
> 
> 标签：python, django

对编码非常陌生。我一直在尝试安装这个 tablestacker：[http](http://datadesk.github.io/latimes-table-stacker/) ://datadesk.github.io/latimes-table-stacker/ 我遇到了 manage.py syncdb 的问题，我无法克服这个特定的错误。我的预感是：我的计算机上同时安装了 Python 2.6 和 2.7，但我不确定如何确保一切都在 2.7 上运行。我感觉正在为 2.6 安装东西。

非常感谢任何建议！提前致谢。

这是我的错误：

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/South-0.7.6-py2.7.egg/south/management/commands/__init__.py", line 10, in <module>
    import django.template.loaders.app_directories
  File "/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.5-py2.7.egg/django/template/loaders/app_directories.py", line 23, in <module>
    raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0]))
django.core.exceptions.ImproperlyConfigured: ImportError bakery: No module named bakery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:29:01.270

谢谢，我确实 import south，使用了 python manage.py migrate，并为所有 python2.7 命令（如 pip 和 easy_install）创建了别名，以确保我没有使用 2.6。

# angularjs - ng-include 似乎什么都不做

> ID：16027701
> 
> 赞同：1
> 
> 时间：2013-04-16T02:21:29.660
> 
> 标签：angularjs, angularjs-directive

[http://jsfiddle.net/fresheyeball/5z7bX/](http://jsfiddle.net/fresheyeball/5z7bX/)

```
<script type="text/ng-template" id="/newTrack.html">
  <h1>New Track </h1>
  <p>Hello there</p>
</script>
<div id="overlay" closemodal></div>
<div id="modal"><a id="closeModal" closemodal></a>
    <div id="modalContent" ng-include src="/newTrack.html"></div>
</div> 
```

我希望得到以下结果：

```
<div id="overlay" closemodal></div>
<div id="modal"><a id="closeModal" closemodal></a>
    <div id="modalContent" ng-include src="/newTrack.html">
       <h1>New Track </h1>
       <p>Hello there</p>
    </div>
</div> 
```

但似乎什么也没有发生。真的，我正在尝试从自定义指令中呈现模板，在对其进行了一段时间的跟踪之后，`ng-include`即使以最简单的形式，我似乎也无法开始工作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T02:35:52.370

在小提琴选项下，添加`<body ng-app>`

> src：如果源是字符串常量，请确保将其括在引号中，例如`src="'myPartialTemplate.html'"`. -- [ngInclude 文档](http://docs.angularjs.org/api/ng.directive:ngInclude)

所以`ng-include src="'/newTrack.html'"`

[小提琴](http://jsfiddle.net/Fktwn/)

# html - 在没有 JavaScript 和绝对定位的情况下让 DIV 填充页面的其余部分？

> ID：16027703
> 
> 赞同：2
> 
> 时间：2013-04-16T02:21:33.547
> 
> 标签：html, css

是否有可能在没有 JavaScript 和绝对定位的情况下让这个 DIV 填充页面的其余部分？

```
<html>
    <head>
        <title>Hello World</title>
        <style>
            body { margin: 0; }
            #title_image { float: left; margin: 1em; }
            #title { float: left; margin: 1em; }
            #content { background-color: #808277; clear: both; color: #FEFDDE; }
        </style>
    </head>

    <body>
        <img id="title_image" src="helloworld_small.jpg" />
        <div id="title">
            <h1>Hello World</h1>
            <h3>Home of the Hello World site!</h3>
        </div>
        <div id="content">
            Hello World
        </div>
    </body>
</html> 
```

当我将其设置为时`height`，`100%`它比视口高一点。我认为这并不奇怪，因为它填充了 100% 加上其上方内容的高度。当我设置`position`to`relative`和`bottom`to 时`0`，它只是使其成为内容的高度。我也不认为这很令人惊讶，因为我认为`bottom`仅用于`absolute`定位。当我将标题内容包装在 a 中`div`并将其设置`height`为`20%`然后将`content`div设置`height`为`80%`它最终呈现很像将`content`div设置`height`为`80%`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:02:24.963

我冒昧地创建了一个我认为你的意思的 JSFiddle，我也 html5'd 了它。这很近吗？

[JSFiddle](http://jsfiddle.net/Bushwazi/5A99H/)

```
* {
    margin:0;
    padding:0;
}
html, body {
    height:100%;
}
hgroup {
    padding:2% 1em;
    background:#0f0;
    height:20%;
    display:block;    
}
article {
    background-color:#808277;
    color:#FEFDDE;
    height:72%;
    padding:2% 1em;
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:26:22.650

试着看看这个网站以获得更好的理解。

> [http://www.w3schools.com/html/html_layout.asp](http://www.w3schools.com/html/html_layout.asp)

这可能会帮助你。

# c# - 电子邮件检查程序 POST C# 出现错误 403

> ID：16027705
> 
> 赞同：0
> 
> 时间：2013-04-16T02:21:37.873
> 
> 标签：c#, post, httpwebrequest

我一直在试图弄清楚为什么这个 post 方法没有通过。我一直在使用 Fiddler，并且已经为此工作了几个小时。如果有人可以提供帮助，那就太好了。

```
private string getemail(string user, string pass)
{
    var cookies = new CookieContainer();

    var getRequest = (HttpWebRequest)WebRequest.Create("http://account.mojang.com/migrate");
    cookies = (getRequest as HttpWebRequest).CookieContainer;
    string[] tok = ReadResponse(getRequest).Split(new string[] { "name=\"authenticityToken\" value=\"" }, StringSplitOptions.None);
    string[] toke = tok[1].Split('"');
    string token = toke[0];

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://account.mojang.com/migrate/check");
    request.CookieContainer = cookies;
    request.Method = "POST";
    request.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3");
    request.Headers.Add("Accept-Encoding: gzip,deflate,sdch");
    request.Headers.Add("Accept-Language: en-US,en;q=0.8");
    request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31";
    request.ContentType = "text/plain";
    using (var requestStream = request.GetRequestStream())
    {
        using (var writer = new StreamWriter(requestStream))
        {
            writer.Write("authenticityToken=" + token + "&mcusername=" + user + "&password=" + pass);
        }
    }
    using (var responseStream = request.GetResponse().GetResponseStream()) 
    {
        using (var reader = new StreamReader(responseStream))
        {
            var result = reader.ReadToEnd();
            return result;
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:26:12.050

`StreamWriter`将内容写入请求流后关闭。

```
using (var writer = new StreamWriter(requestStream))
{
  writer.Write("authenticityToken=" + token + "&mcusername=" + user + "&password=" + pass);
  writer.Close();
} 
```

# asp.net - 使用 Active Directory 为 ASP.NET Web 应用程序实现 SSO 的最佳方法是什么？

> ID：16027710
> 
> 赞同：1
> 
> 时间：2013-04-16T02:22:00.520
> 
> 标签：asp.net, active-directory, openid, security, single-sign-on

我的组织有几个面向 Web 的 ASP.NET Web 窗体应用程序。他们目前使用启用了模拟的 Windows 身份验证。Web 应用程序在内部托管，但通过不同的域公开，例如 www.abc.com 和 www.xyz.org。

一个新的要求是，将为这些应用程序的所有用户提供一个登录页面，以便通过它登录。

提出的一些解决方案是：

*   实现由 Active Directory (DotNetOpenAuth) 支持的 OpenId Provider，修改现有应用程序以成为此 OP 的依赖方。
*   通过 MS Forefront 威胁管理网关实施 SSO。

我没有这两个方面的经验。提议的解决方案是否可行？各自的优缺点是什么？还有其他可能更合适的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:39:41.927

OpenId Provider 是一个相当不错的主意。这将是一条更简单的路线，并且网络上有一些很好的细节。

您可能还想查看 Active Directory 联合身份验证服务。

> [http://msdn.microsoft.com/en-us/library/bb897402.aspx](http://msdn.microsoft.com/en-us/library/bb897402.aspx)

转向托管解决方案的企业寻求实施联合服务的情况并不少见，这是微软在设置和创建 Azure 时所期望的——对企业友好。

他们在这里整理了一份综合指南，虽然与您的问题没有直接关系，但确实包含有关联合服务背后技术的大量详细信息。

> [http://msdn.microsoft.com/en-us/library/windowsazure/hh127796.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh127796.aspx)

有关更多想法和信息，特别是利弊，请查看这些文章，它们会更深入地回答它：

> [http://technet.microsoft.com/en-us/magazine/ff721824.aspx](http://technet.microsoft.com/en-us/magazine/ff721824.aspx)
> 
> [http://windowsitpro.com/active-directory/ease-cloud-security-concerns-federated-identity](http://windowsitpro.com/active-directory/ease-cloud-security-concerns-federated-identity)
> 
> [http://www.csoonline.com/article/221034/the-truth-about-federated-identity-management](http://www.csoonline.com/article/221034/the-truth-about-federated-identity-management)

一些 DotNetOpenAuth 想法：

> [http://www.codeproject.com/Articles/325228/Choosing-technologies-for-NET-project](http://www.codeproject.com/Articles/325228/Choosing-technologies-for-NET-project)
> 
> [http://social.msdn.microsoft.com/Forums/en-US/windowsazuresecurity/thread/7a1c4e0c-346c-4008-9e5c-87ba1273b2aa/](http://social.msdn.microsoft.com/Forums/en-US/windowsazuresecurity/thread/7a1c4e0c-346c-4008-9e5c-87ba1273b2aa/)

最后，我们亲自为我的团队解决方案之一选择了 OpenAuth。一旦我们花时间真正理解 RFC（这并不容易，但值得花时间去做），实现就相当轻松了。网络上还有大量资源可以用来掌握实现的窍门。

# cocos2d-iphone - 向 Cocos2D 游戏添加网格的最佳和常用方法是什么

> ID：16027711
> 
> 赞同：2
> 
> 时间：2013-04-16T02:22:05.520
> 
> 标签：cocos2d-iphone, grid

我需要在游戏背景中添加一个网格。它应该是可缩放的，而且我应该能够知道我现在在哪个正方形上绘制另一个对象。我需要这样的东西：![网格](https://i.stack.imgur.com/jcnwM.png)

这样做的最常见和正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:21:49.193

在 CCLayerPanZoom 中使用 tileMap(CCTMXTiledMap)。它易于跟踪网格单击并易于缩放。

# javascript - 在 Phonegap 中调用 wsdl webservice？

> ID：16027712
> 
> 赞同：0
> 
> 时间：2013-04-16T02:22:20.063
> 
> 标签：javascript, android, ios, cordova, wsdl

如何在 Phonegap 中调用 wsdl webservice？是否有任何可用的源代码或任何有用的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:27:51.687

PhoneGap 与您调用哪种 Web 服务无关... Web 服务调用通常使用 jQuery 完成。PhoneGap 只是将您用 HTML、CSS 和 JavaScript 编写的代码打包到应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:52:40.483

Phonegap 是一个框架，有助于连接 UI 和目标 c 代码。

如果要调用 web 服务，可以使用 ajax 调用它，也可以直接从目标 c 代码调用 web 服务。

您将在互联网上获得大量基于 Ajax 的调用和目标 c 的示例。

[这些是从最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript) [http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)开始的几个链接

# github-flavored-markdown - 如何在 Markdown 中转义反斜杠括号 (\[)？

> ID：16027723
> 
> 赞同：60
> 
> 时间：2013-04-16T02:23:35.073
> 
> 标签：github-flavored-markdown

如何在 Markdown for GitHub 中转义“反斜杠方括号”\[\] 序列？该序列产生一个`<pre><code>...</code></pre>`部分。

这只是 Markdown for GitHub 的问题。我可以在这里毫无问题地写它：

\[某物 \]

然而，GitHub中的这段代码会产生

\ 某物

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-03-25T02:30:03.973

这已在 github.com 上修复。我不确定什么时候，但你现在可以用一个反冲来转义方括号。例如

```
\[Hello\] 
```

呈现为

[你好]

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-04-30T22:19:26.460

我已经用反引号包围了我的括号字符串：`[[320,50],[300,250]]`

这变成了： `[[320,50],[300,250]]`所以现在我的数组没有变成链接。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-04T23:30:52.210

这现在已在 GitHub 上修复。所以不再需要转义方括号。要键入`[some text]`，您只需键入：

```
// your markdown
[some text] 
```

这有两个好处：

1.  方括号不再与图形和超链接分开解析。
2.  这意味着我们可以使用`\]`and`\[`来显示乳胶数学，这是编写 LaTeX 的正确方法。（$$ 不是 LaTeX 命令，永远不应使用。）

您可以通过编辑 GitHub 项目的 README.md 来检查这一点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-16T02:36:25.100

写吧：

```
This is a __backslash with a square bracket__: \\\[. 
```

它适用于我的github。

* * *

## 编辑

现在问题已经更新，这是一个更新的答案。
只需在开头和结尾转义所有字符：

`foo \\\[something\\\] bar` 将产生 =>`foo \[something\] bar`

在github上正常工作： [http ://tinypic.com/view.php?pic=oh2xyp&s=6](http://tinypic.com/view.php?pic=oh2xyp&s=6)

* * *

## 编辑 2

刚刚在wiki上试过......你是对的，它在那里不起作用。我想这是因为`[[foobar]]`wiki 语法中的结构具有特殊含义。
我会说你最好的镜头是这样的：（`__\__ __[__ __something__ __\__ __]__`没有代码倒贴）。
奇怪的是，它在这里不起作用，但它在 github wikis 上起作用。

不过，如果您认为这是一个错误，您应该按照他们所说的[在这里](https://help.github.com/articles/github-flavored-markdown)报告它。

# iphone - Xcode 版本 4.6.2 (4H1003) 编译器错误

> ID：16027725
> 
> 赞同：88
> 
> 时间：2013-04-16T02:23:50.253
> 
> 标签：iphone, xcode4.6, ios5

我刚刚更新到 Xcode 版本 4.6.2 (4H10003) 并尝试在模拟器中运行以前工作的应用程序项目并收到以下错误并且构建失败。

> 从不同于编译器 ((clang-425.0.28)) 的分支 ((clang-425.0.27)) 构建的 PCH 文件

出了什么问题，如何解决？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-04-16T02:30:08.717

清理项目；按住 Option 以便您清理整个构建文件夹和中间体。您可能必须退出 Xcode 并在 Finder 中手动丢弃 DerivedData 文件夹的全部内容，正如我在这里描述的：[如何清空缓存和清理所有目标 Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4/6247073#6247073)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-16T04:31:16.967

转到您的项目`Build Settings`，找到一个名为 的设置`Precompiled Headers Cache Path`，然后删除该文件夹

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-16T10:31:58.240

使用`command+shift+k`并再次运行现有项目进行清理。

![在此处输入图像描述](https://i.stack.imgur.com/S2BWv.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-17T05:14:41.463

来自[XCode 4.6.2 发行说明](https://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html)

> ## 已知的问题
> 
> ### 建造
> 
> 在构建以前使用 Xcode 4.6.1 或更早版本构建的产品时，构建失败并出现类似以下错误：
> 
> 从不同于编译器 ((clang-425.0.28)) 的分支 ((clang-425.0.27)) 构建的 PCH 文件
> 
> 要解决此问题，请在构建产品之前选择产品 > 清洁。13663167

表演产品 > 清洁工作

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-04-24T13:56:40.507

我已经尝试了以上所有方法，它在 Xcode UI 中运行良好，但是当我从命令行运行xcodebuild**时****它**仍然失败。

 **这是由于对其他库及其预编译头文件的依赖。从命令行运行时，看起来像 xcodebuild store/reads 从这里预编译的头文件：

```
/var/folders/v0/ztxy9kls7sv05dpmvjgg_xwr0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders 
```

清理该文件夹后，xcodebuild 成功。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-19T11:11:02.487

我不得不手动删除`~/Library/Developer/Xcode/DerivedData/` Clean 对我不起作用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-26T07:13:20.743

特别是如果您从命令行构建或者您有构建脚本，那么清理 xcode 目标是不够的。您必须删除此文件夹。

预编译头的确切位置可以在项目中找到，部分文件夹路径是随机的（我猜），尤其是 /var/folders/xx..xxx/C 之后。

```
Target -> build settings => "Build locations" -> Precompiled headers cached path 
```

运行终端并转到此文件夹并删除（使用命令），

```
#rm -fr SharedPrecompiledHeaders 
```

![在此处输入图像描述](https://i.stack.imgur.com/abmUf.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-26T22:12:09.153

使用“command+shift+k”来清理你的项目，那么你会没事的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-10T04:37:19.123

清理您的项目并运行

产品-> 清洁然后运行。**

# php - HTTP_REFERER 行为 - 需要帮助

> ID：16027735
> 
> 赞同：1
> 
> 时间：2013-04-16T02:24:48.827
> 
> 标签：php, mysql

我有三个单独的页面： modify.php 允许用户选择发布者并为该发布者创建会话变量。

**修改.php**

```
<?php
    session_start();
    require ("../login.php");

    if (!isset($_SESSION['user']))
        header('Location: ../index.php');

    if (isset($_POST['submit'])) {
        $_SESSION['publisher'] = $_POST['publishers'];
        header('Location: modify2.php');
    }

    $user_id = $_SESSION['user'];
    $success = true;

    include ("header.php");
    include ("subnav.php");

    $stmt = $db->prepare
        ("SELECT DISTINCT p.name 
        FROM subscriptions s
        JOIN titles t
            ON s.title = t.id
        JOIN publishers p
            ON t.publisher = p.name
        WHERE s.user=:user
        ORDER by p.name");
    $stmt->bindValue(':user', $user_id, PDO::PARAM_INT);
    $stmt->execute();
    $rows = $stmt->fetchAll();
    $num_rows = count($rows);
    if ($num_rows == 0) {
        $success = false;
        $errors[] = 'You currently have no subscriptions.';
    }
?>

    <h2>Modify Subscriptions</h2>

    <?php
        if (!empty($errors))
            foreach($errors as $error)
                echo $error;
    ?>

<?php
        if ($success == true) { ?>
            <form action="" method="post">
                <ul>
                    <li>
                        Select Publisher:<br>
                        <select name="publishers">
                        <?php
                        foreach($rows as $row) {
                            echo '<option value ="'. $row['name'] . '">' . $row['name'] . '</option>';  
                        }   ?>
                        </select>
                    </li>
                    <li>
                        <input type="submit" value="Select Publisher" name ="submit" id="submit">
                    </li>
                </ul>
            </form>
<?php   } ?>

<?php   
    include ("footer.php");
?> 
```

modify2.php 从 modify.php 接收会话变量“publisher”并检索该发布者的标题。然后它取消设置发布者会话变量有两个原因：1）不再需要它，2）如果这个变量是空的，那么 mofify2.php 知道引用者来自错误的页面

**修改2.php**

```
<?php
    session_start();
    require ("../login.php");

    if (!isset($_SESSION['user']))
        header('Location: ../index.php');

    if (!isset($_SESSION['publisher']))
        header('Location: modify.php');

    $referer = $_SERVER['HTTP_REFERER'];
    if (basename($referer) <> 'modify.php')
        header('Location: modify.php');

    if (isset($_POST['submit'])) {
        $_SESSION['title'] = $_POST['title'];
        unset($_SESSION['publisher']);
        header('Location: modify3.php');
    }

    $user_id = $_SESSION['user'];
    $publisher = $_SESSION['publisher'];

    include ("header.php");
    include ("subnav.php");

    $stmt = $db->prepare
        ("SELECT t.title
        FROM titles t
        JOIN publishers p
            ON t.publisher = p.name
        JOIN subscriptions s
            ON t.id = s.title
        WHERE s.user=:user AND t.publisher=:publisher
        ORDER by t.title");
    $stmt->bindValue(':user', $user_id, PDO::PARAM_INT);
    $stmt->bindValue(':publisher', $publisher, PDO::PARAM_STR);
    $stmt->execute();
    $rows = $stmt->fetchAll();
    $num_rows = count($rows);
    if ($num_rows == 0)
        $errors[] = 'There are currently no titles for that publisher.';
?>

    <h2>Modify Subscriptions</h2>

    <?php
        if (!empty($errors))
            foreach($errors as $error)
                echo $error;
    ?>

    <form action="" method="post">
        <ul>
            <li>
                Select Title:<br>
                <select name="title">
                <?php
                foreach($rows as $row) {
                    echo '<option value ="'. $row['id'] . '">' . $row['title'] . '</option>';  
                }   ?>
                </select>
            </li>
            <li>
                <input type="submit" value="Select Title" name ="submit" id="submit">
            </li>
        </ul>
    </form>

<?php   
    include ("footer.php");
?> 
```

这个文件就是问题所在。无论出于何种原因，我的 http_referer 代码块都会阻止访问该页面。任何帮助，将不胜感激。

**修改3.php**

```
<?php
    session_start();
    require ("../login.php");

    if (!isset($_SESSION['user']))
        header('Location: ../index.php');

    if (!isset($_SESSION['title']))
        header('Location: modify2.php');

    $referer = $_SERVER['HTTP_REFERER'];
    if (basename($referer) <> 'modify2.php');
        header('Location: modify2.php');

    $user_id = $_SESSION['user'];
    $title = $_SESSION['title'];
    $success = false;

    if (isset($_POST['submit'])) {

        $covers = (isset($_POST['covers'])) ? 1 : 0;

        if (empty($_POST['quantity']))
            $errors[] = 'You must enter a quantity!';
        else if (!is_numeric($_POST['quantity']))   
            $errors[] = 'You must enter a number for the quantity field!';
        else if (is_numeric($_POST['quantity']) && $_POST['quantity'] > 5)
            $errors[] = 'If you want to subscribe to more than 5 of the same issue, please contact us';
        else {
            $stmt = $db->prepare("UPDATE subscriptions SET quantity=:quantity, covers=:covers WHERE user=:id AND title=:title");
            $stmt->bindValue(':quantity', $_POST['quantity'], PDO::PARAM_INT);
            $stmt->bindValue(':covers', $covers, PDO::PARAM_INT);
            $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
            $stmt->bindValue(':title', $title, PDO::PARAM_INT);
            $stmt->execute();
            $success = true;
            unset($_SESSION['title']);
        }
    }

    include ("header.php");
    include ("subnav.php");

?>

    <h2>Modify Subscriptions</h2>

    <?php
        if (!empty($errors))
            foreach($errors as $error)
                echo $error;
    ?>

    <?php 
        if ($success == false) { ?>
            <form action="" method="post">
                <ul>
                    <li>
                        <b>Title To Modify:</b><br>
                        <?php 
                        $stmt = $db->prepare("SELECT title FROM titles WHERE id=:title");
                        $stmt->bindValue(':title', $title, PDO::PARAM_STR);
                        $stmt->execute();$rows = $stmt->fetchAll(); 
                        foreach ($rows as $row) {
                            echo $row['title'];
                        }
                        ?>
                    </li>
                    <li>
                        <br><input type="checkbox" name="covers" value="covers"
                        <?php
                            $stmt = $db->prepare("SELECT covers FROM subscriptions WHERE user=:id AND title=:title");
                            $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
                            $stmt->bindValue(':title', $title, PDO::PARAM_INT);
                            $stmt->execute();
                            $rows = $stmt->fetchAll();
                            foreach ($rows as $row)
                                if ($row['covers'] == 1)
                                    echo 'checked';
                        ?>
                        >Check to opt-in for all regular priced covers.
                    </li>
                    <li>
                        <br><b>Quantity Requested:</b> <br>
                        <input type="text" name="quantity" value="<?php $stmt = $db->prepare("SELECT quantity FROM subscriptions WHERE user=:user AND title=:title"); $stmt->bindValue(':user', $user_id, PDO::PARAM_INT); $stmt->bindValue(':title', $title, PDO::PARAM_INT); $stmt->execute(); $rows = $stmt->fetchAll(); foreach ($rows as $row) echo $row['quantity']; ?>">
                    </li>
                    <li>
                        <input type="submit" value="Save Changes" name="submit" id="submit">
                    </li>
                </ul>
            </form>
<?php   } 
        else { ?>
            <p>You have succesfully updated your title!</p>
<?php   }   ?>

<?php   
    include ("footer.php");
?> 
```

如果我取出以下代码块：

```
$referer = $_SERVER['HTTP_REFERER'];
        if (basename($referer) <> 'modify2.php');
            header('Location: modify2.php'); 
```

那么我的页面可以正常工作，但它不会阻止人们手动将其输入浏览器并以错误的方式访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:26:43.090

您不能依赖`Referer`浏览器发送的标头。事实上，他们中的一些人出于“安全”原因提供了欺骗它的选项。

相反，您应该在`$_SESSION`数组中保存一个变量，指示用户是否以正确的方式访问了该页面。

# php - 在链接元样式表中将 css 与 php 连接起来

> ID：16027736
> 
> 赞同：1
> 
> 时间：2013-04-16T02:24:51.060
> 
> 标签：php, css, concatenation, httprequest, css-frameworks

用php将多个css文件串联成一行的方法是什么？

我想减少以下..

```
<link href="reset.css" rel="stylesheet" type="text/css" media="screen">
<link href="grid.css" rel="stylesheet" type="text/css" media="screen">
<link href="commons.css" rel="stylesheet" type="text/css" media="screen"> 
```

进入

```
<link href="concatenator.php+reset.css+grid.css+commons.css" rel="stylesheet" type="text/css" media="screen"> 
```

结果是一个包含所有样式表的 css 或 html 文件

这种方法减少了 http 请求，并为设计人员和开发人员使用 dinamyc 站点配置提供了其他功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-12T11:36:45.103

MatRt 发布的代码很接近，但使用 + 符号而不是 . 附加标志，它似乎并没有实际将 CSS 发送到页面，即使它会打印 CSS。

我设法让这里提供的代码对其进行了一些小调整。这里是：

```
<?php

// Check the parameter and stop if there is no files param
if (empty($_GET['files']))
    die();

// Retrieve the list of files
$files = explode(",", $_GET['files']);
$directoryOfCss = 'C:\xampplite\htdocs\path\to\my\folder\css\\';
$cssContent = "";

// Loop on all potential file and try to retrieve its content
foreach($files as $oneFile)
{
	//echo $directoryOfCss . $oneFile . ".css";
    if (file_exists($directoryOfCss . $oneFile . ".css")){
    	//echo $directoryOfCss . $oneFile . ".css<br>";
        $cssContent .= file_get_contents($directoryOfCss . $oneFile . ".css");
    }
}

// Finally echo the total content of CSS
header("Content-Type: text/css"); 
header("X-Content-Type-Options: nosniff");
header("Content-Type: text/css;X-Content-Type-Options: nosniff;");
echo $cssContent;
```

我从[这篇文章](https://stackoverflow.com/questions/5413107/headercontent-type-text-css-is-working-in-firefox-and-chrome-but-in-inter)中得到了标题部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:31:59.243

您的网址应该更像

```
concatenator.php?files=reset,grid,commons 
```

*注意*：如果您不喜欢，您可以选择其他分隔符`,`

著名的`concatenator.php`可能就像

```
<?php

// Check the parameter and stop if there is no files param
if (empty($_GET['files']))
    die();

// Retrieve the list of files
$files = explode(",", $_GET['files']);
$directoryOfCss = "/absolute/path/to/your/css/files/";
$cssContent = "";

// Loop on all potential file and try to retrieve its content
foreach($files as $oneFile)
{
    if (file_exists($directoryOfCss + $oneFile + ".css"))
        $cssContent += file_get_contents($directoryOfCss + $oneFile + ".css");
}

// Finally echo the total content of CSS
echo $cssContent; 
```

# button - 在滚动上方添加按钮（我猜你不能教老狗新技巧！）

> ID：16027743
> 
> 赞同：0
> 
> 时间：2013-04-16T02:25:16.093
> 
> 标签：button, layout, menu, scroll

星期天我实际上是侧载了我的第一个应用程序！！！简单的，未完成的，几个错误，但它有效。

我的打开屏幕（XML：“event_list.xml”）是一个滚动列表 - 选择一个获取详细信息屏幕。XML 看起来像：（这段代码仍然是一个片段。）

```
 <?xml version="1.0" encoding="utf-8"?>
  <fragment 
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:name="com.dummies.android.taskreminder.EventListFragment"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" /> 
```

行（XML“event_row.xml”）看起来像：

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:textSize="12dp"
        android:padding="2dip" /> 
```

我想在滚动上方的顶部有几个按钮。我能做的最好的是：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:name="com.dummies.android.taskreminder.EventListFragment"
        android:layout_width="fill_parent"
android:layout_height="fill_parent" >
      <Button
          android:id="@+id/btn_Add"
          android:text="@string/add"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />
  </fragment> 
```

但是按钮覆盖了第一个条目！是什么将行与列表屏幕联系起来，如何在滚动（行）上方获得两个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:32:09.243

这就是最终奏效的方法。

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

 <Button  android:id="@+id/btn_Add"
    android:layout_width="50dp"
    android:layout_height="30dp"   
    android:textSize="12dp"
    android:padding="1dip"
    android:text="@string/add" />

  <Button  android:id="@+id/btn_Exit"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12dp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/btn_Add" 
    android:text="@string/exit" />

  <Button  android:id="@+id/btn_Other"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12dp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/btn_Exit" 
    android:text="@string/other" />

 <fragment
    android:name="com.dummies.android.taskreminder.EventListFragment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btn_Add"  />
 </RelativeLayout>   

   <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:textSize="12dp"
    android:padding="2dip" />
<!-- This defines a row in which text can be placed -->
<!--   "text1" is the IDof the view for loading the list with data --> 
```

现在只需要使从详细屏幕（仅限活动）复制的按钮代码在列表屏幕（带片段）中工作：这会产生错误：（findViewById undefined）

```
 mExitButton = (Button)findViewById(R.id.btn_Exit); 
```

这崩溃了：

```
 mExitButton = (Button)getView().findViewById(R.id.btn_Exit); 
```

仍在工作（为时已晚）：

```
 View myFragmentView = inflater.inflate(R.layout.????????, container, false); 
```

# json - JQuery AJAX 和自动填充下拉菜单

> ID：16027744
> 
> 赞同：0
> 
> 时间：2013-04-16T02:25:29.870
> 
> 标签：json, jquery

所以我似乎无法让我的下拉菜单工作。这是代码：

```
$.ajax({
url:"/json/testjson",
cache:true,
success: function(j){
console.log(j);
alert(j);}
}); 
```

这将返回一个有效的 json 字符串：

```
{"data": ["test", "data"], "result": "OK"} 
```

我根本无法触发成功功能。任何地方都没有错误（无论是在萤火虫日志中，也不是在网络日志中，并且来自站点的响应还可以。萤火虫解析器无法解析该 JSON，但 JLINT 验证器对其进行了正确验证。我已尝试设置内容类型到应用程序/json，没有成功。我也试过了，$.getJSON，$.get，什么都没有触发。我也试过

有任何想法吗？

谢谢乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:27:57.887

谢谢HaBo - 答案是删除缓存：真的！

谢谢！Ĵ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:47:44.670

我相信您需要设置`dataType`以`json`确保来自服务器的数据被视为`json`对象。

```
$.ajax({
    url: "/json/testjson",
    dataType: "json",
    cache: true,
    success: function(j) {
        console.log(j);
        alert(j);
    }
}); 
```

看看[$.ajax API](http://api.jquery.com/jQuery.ajax/)。

# r - 如何将 limma ebayes 用于小样本？（R 编程）

> ID：16027745
> 
> 赞同：2
> 
> 时间：2013-04-16T02:25:30.397
> 
> 标签：r, bioconductor

我有以下来自测试和控制的表达数据，每个包含两个样本。

```
> test <- read.table("http://dpaste.com/1059889/plain/")
> control <-read.table("http://dpaste.com/1059891/plain/")
# in reality there are more  genes in each file.

> test
        V1         V2         V3
1   Gene_1 3694.11963 3591.95732
2   Gene_2  791.57558  753.04814
3   Gene_3 2751.34223 2562.46166
4   Gene_4 3068.07188 2651.62906
5   Gene_5  295.00476  247.78944
6   Gene_6 2737.22068 2824.85853
7   Gene_7 1274.54016 1196.54412
8   Gene_8 7011.31102 6703.59308
9   Gene_9  991.71137 1170.66072
10 Gene_10   67.83878   81.69033
11 Gene_11  139.96068  141.97499
12 Gene_12  337.40039  354.96356
13 Gene_13 2861.67548 3132.97426
14 Gene_14 1264.63942 1547.56872    

> control
        V1        V2        V3
1   Gene_1  98.76904 219.95533
2   Gene_2  64.13716 152.69867
3   Gene_3  84.54906 194.95583
4   Gene_4 106.64893 220.18668
5   Gene_5  50.30000  40.20000
6   Gene_6  24.22860  56.13421
7   Gene_7  43.08251  63.50765
8   Gene_8 408.95196 589.50150
9   Gene_9  37.68644  58.33591
10 Gene_10 100.33000 430.00000
11 Gene_11  23.24041  20.00000
12 Gene_12  17.64007  21.34300
13 Gene_13  65.45922  74.02418
14 Gene_14  43.69905  89.19588 
```

我想使用 , 计算 P 值，以查看它们是否使用 **[ebayes](http://www.bioconductor.org/help/course-materials/2010/BioC2010/limma2.pdf)**进行差异表达。

使用标准 t.test 很简单，但我发现它对小样本没有用。

```
 t.test(c(test[2,]$V1,teste[2,]$V3),c(control[2,]$V1,control[2,]$V3)) 
```

有什么办法呢？从帮助文件中不清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T02:56:41.787

有两个步骤——首先你创建一个 4x14 的矩阵——14 个（在你的情况下）基因的 4 个复制。还要创建一个实验设计：一个数据框，一列，`c(1, 1, 0, 0)`表示矩阵的前两列是测试，后两列是控制）。

```
library(limma)
m = as.matrix(cbind(test[, 2:3], control[, 2:3]))
rownames(m) = test[, 1]
d = data.frame(condition=c(1, 1, 0, 0)) 
```

然后你`lmFit`用来拟合线性模型，`eBayes`调整它并计算 p 值：

```
fit = lmFit(m, d)
e = eBayes(fit) 
```

`e`属于 类的对象`MArrayLM`包含 p 值和估计系数，以及一些其他信息：

```
print(e$coefficients)
         condition
# Gene_1  3643.03848
# Gene_2   772.31186
# ...
print(e$p.value)
#            condition
# Gene_1  6.299507e-07
# Gene_2  1.333970e-04
names(e)
#  [1] "coefficients"     "rank"             "assign"           "qr"              
#  [5] "df.residual"      "sigma"            "cov.coefficients" "stdev.unscaled"  
#  [9] "pivot"            "genes"            "Amean"            "method"          
# [13] "design"           "df.prior"         "s2.prior"         "var.prior"       
# [17] "proportion"       "s2.post"          "t"                "df.total"        
# [21] "p.value"          "lods"             "F"                "F.p.value" 
```

顺便说一句，虽然`limma`由于多种原因更好（它计算其他参数，提供更多选项并执行有用的校正），但如果您*确实*想要执行 a`t.test`以获取矩阵中每个基因的 p 值，您可以这样做：

```
pvals = apply(m, 1, function(r) t.test(r ~ d$condition)$p.value) 
```

# jquery - 单击 HTML5 Datalist 选项时的 jQuery 事件

> ID：16027746
> 
> 赞同：20
> 
> 时间：2013-04-16T02:25:34.830
> 
> 标签：jquery, html, option, html-datalist

**我现在拥有的：**

所以我有这个 HTML5 数据列表，里面有很多选项，我有 2 个事件触发。当用户键入与填充选项的名称数组匹配的内容时，例如“Rick Bross”或“Jack Johnson”（keyup）。当用户开始输入名称时触发的另一个事件，它会弹出，用户向下箭头，然后点击“输入”（更改）。

**问题：**

当用户单击其中一个下拉选项，在他输入全名之前以及在对象模糊之前，我需要一个事件来触发。如果用户在完全输入名称之前立即单击一个，则这两个事件仅在输入模糊时触发该函数。

**标记：**

```
<datalist id="potentials">
    <option value="Rick Bross">  
    <option value="Jack Johnson">  
    <option value="Rick Bross">  
    <option value="Rick Bross">   
</datalist> 
```

**Javascript 事件和函数：**

```
window.checkModelData = function(ele)
{
    var name = $(ele).val().replace(" ", "");
    var mod = potentialModels[name];
    if(mod) {
        loadModelData(name);
    }
}

function loadModelData(name) {
    var mod = potentialModels[name];
    $("#address").val(potentialModels[name].address);
    $("#city").val(potentialModels[name].city);
    $("#state").val(potentialModels[name].state);
    $("#email").val(potentialModels[name].email);
    $("#phone").val(potentialModels[name].phone);
    $("#zip").val(potentialModels[name].zip);
}

$("#name").keyup(function(){

    window.checkModelData(this);

});
$("#name").change(function(){

    window.checkModelData(this);
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-03T18:44:27.130

使用该`input`事件而不是其他事件。它实际上旨在涵盖您想要的内容：

```
$("#name").bind('input', function () {
    window.checkModelData(this);
}); 
```

我制作了一个[jsfiddle](http://jsfiddle.net/AAfuX/)供您试用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T08:51:28.597

您还可以在输入字段上收听“选择”事件。

```
$('#name').bind('select', function() {
    // handle input value change
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-05T12:54:26.970

在这里处理仅点击事件是解决方案。

```
$("#book_search").bind('select', function () {
    alert("changed");   
}); 
```

# r - 数据表中不同变量的唯一观测数

> ID：16027748
> 
> 赞同：7
> 
> 时间：2013-04-16T02:25:49.027
> 
> 标签：r, unique, data.table, variable-length

我已使用以下命令将大型数据文件读入 R

```
data <- as.data.set(spss.system.file(paste(path, file, sep = '/'))) 
```

数据集包含不应属于的列，并且仅包含空白。此问题与 R 根据附加到 SPSS 文件 ( [Source](https://stackoverflow.com/questions/7721229/read-spss-extra-variables-fields) ) 的变量标签创建新变量有关。

不幸的是，我无法确定解决问题所需的选项。我已经尝试了所有的：foreign::read.spss、memisc:spss.system.file 和 Hemisc::spss.get，但没有运气。

相反，我想读取整个数据集（带有幽灵列）并手动删除不必要的变量。由于幽灵列仅包含空格，因此我想从我的 data.table 中删除唯一观察数等于 1 的所有变量。

我的数据很大，所以它们以 data.table 格式存储。我想确定一种简单的方法来检查每列中唯一观察值的数量，并删除仅包含一个唯一观察值的列。

```
require(data.table)

### Create a data.table
dt <- data.table(a = 1:10,
                 b = letters[1:10],
                 c = rep(1, times = 10))

### Create a comparable data.frame
df <- data.frame(dt)

### Expected result
unique(dt$a)

### Expected result
length(unique(dt$a)) 
```

但是，我希望计算大型数据文件的 obs 数量，因此不需要按名称引用每一列。我不是 eval(parse()) 的粉丝。

```
### I want to determine the number of unique obs in
  # each variable, for a large list of vars
lapply(names(df), function(x) {
    length(unique(df[, x]))
})

### Unexpected result
length(unique(dt[, 'a', with = F]))  # Returns 1 
```

在我看来，问题在于

```
dt[, 'a', with = F] 
```

返回类“data.table”的对象。这个对象的长度为 1 是有道理的，因为它是一个包含 1 个变量的 data.table。我们知道 data.frames 实际上只是变量列表，因此在这种情况下，列表的长度仅为 1。

这是我将如何使用 data.frame 方式补救解决方案的伪代码：

```
for (x in names(data)) {
  unique.obs <- length(unique(data[, x]))
  if (unique.obs == 1) {
    data[, x] <- NULL
  }
} 
```

任何关于我如何更有效地询问 data.table 中的列的唯一观察数的任何见解都将不胜感激。或者，如果您可以建议在 data.table 中只有一个唯一观察值的情况下如何删除观察结果，那就更好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T02:44:35.500

# 更新：`uniqueN`

从 1.9.6 版本开始，该解决方案有一个内置（优化）版本，即`uniqueN`函数。现在这很简单：

```
dt[ , lapply(.SD, uniqueN)] 
```

* * *

如果要查找每列中唯一值的数量，例如

```
 dt[, lapply(.SD, function(x) length(unique(x)))]
##     a  b c
## 1: 10 10 1 
```

要使您的功能正常工作，您需要使用`with=FALSE`within `[.data.table`，或者简单地使用`[[`（也请阅读`fortune(312)`...）

```
lapply(names(df) function(x) length(unique(dt[, x, with = FALSE]))) 
```

或者

```
 lapply(names(df) function(x) length(unique(dt[[x]]))) 
```

将工作

一步到位

```
dt[,names(dt) := lapply(.SD, function(x) if(length(unique(x)) ==1) {return(NULL)} else{return(x)})]

 # or to avoid calling `.SD` 

dt[, Filter(names(dt), f = function(x) length(unique(dt[[x]]))==1) := NULL] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:47:28.237

其他答案中的方法很好。另一种添加方式，只是为了好玩：

```
for (i in names(DT)) if (length(unique(DT[[i]]))==1) DT[,(i):=NULL] 
```

或者如果可能有重复的列名：

```
for (i in ncol(DT):1) if (length(unique(DT[[i]]))==1) DT[,(i):=NULL] 
```

注意：`(i)`在 LHS 上`:=`是使用 的值`i`而不是名为 的列的技巧`"i"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:41:15.100

这是您的核心问题的解决方案（我希望我做对了）。

```
require(data.table)

### Create a data.table
dt <- data.table(a = 1:10,
                 b = letters[1:10],
                 d1 = "",
                 c = rep(1, times = 10),
                 d2 = "")
dt
     a b d1 c d2
 1:  1 a    1   
 2:  2 b    1   
 3:  3 c    1   
 4:  4 d    1   
 5:  5 e    1   
 6:  6 f    1   
 7:  7 g    1   
 8:  8 h    1   
 9:  9 i    1   
10: 10 j    1 
```

首先，我介绍了两列`d1`，`d2`它们没有任何值。那些你想删除的，对吧？如果是这样，我只需识别这些列并选择`dt`.

```
only_space <- function(x) {
  length(unique(x))==1 && x[1]==""
}
bolCols <- apply(dt, 2, only_space)
dt[, (1:ncol(dt))[!bolCols], with=FALSE] 
```

不知何故，我觉得你可以进一步简化它......

输出：

```
 a b c
 1:  1 a 1
 2:  2 b 1
 3:  3 c 1
 4:  4 d 1
 5:  5 e 1
 6:  6 f 1
 7:  7 g 1
 8:  8 h 1
 9:  9 i 1
10: 10 j 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T23:34:19.200

使用“dplyr”库有一个简单的方法，然后使用 select 函数如下：

图书馆（dplyr）

新数据 <- 选择（旧数据，第一个变量，第二个变量）

请注意，您可以选择任意数量的变量。

然后你会得到你想要的数据类型。

非常感谢，

法达

# sql - 多对多关系，正确实现？

> ID：16027755
> 
> 赞同：1
> 
> 时间：2013-04-16T02:26:22.860
> 
> 标签：sql, relational-database, database-schema

我正在设计一个用于存储租户和地址信息的数据库模式。为了规范化，并且因为我将在地址表中存储多个租户地址，我已经制作了这两个具有多对多关系的单独表和一个“交叉引用”表。此外，存储在我的交叉引用表中的是 AddressTypeID。我这样做是因为地址类型可以在软件中自定义。这对我来说似乎是正确的，这里有改进的余地吗？

![多对多关系模式](https://i.stack.imgur.com/zH5n7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:40:21.637

你的设计看起来不错。出于隐私原因，考虑将 ssn 删除到具有更严格权限的自己的表中。很多查询需要租户；没有多少人需要ssn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:06:59.373

您的地址表未标准化。您应该指向 City、Zip 和 County 的外部表。您不需要指出状态，因为它可以来自 City 或 Zip。

您还可以在租户地址中考虑 valid_from 和 valid_to（可为空）

# c# - 将单个 StyleCop 规则设置为构建错误

> ID：16027757
> 
> 赞同：2
> 
> 时间：2013-04-16T02:26:26.557
> 
> 标签：c#, .net, msbuild, stylecop

根据[此博客](http://blogs.msdn.com/b/sourceanalysis/archive/2008/05/24/source-analysis-msbuild-integration.aspx)，您可以将所有/某些项目设置为将 StyleCop 违规视为构建错误而不是警告：

> 默认情况下，StyleCop 违规将显示为构建警告。**要将 StyleCop 违规转化为构建错误，必须将标志 StyleCopTreatErrorsAsWarnings 设置为 false。**该标志可以设置为机器上的环境变量，也可以在构建环境命令窗口中设置。以这种方式设置标志将导致 StyleCop 违规自动显示为所有启用 StyleCop 构建集成的项目的构建错误。
> 
> **或者，可以在特定项目的项目文件中设置此标志。**再次打开项目的 .csproj 文件，并在文件中找到第一个 PropertyGroup 部分。添加一个新标签以将 StyleCopTreatErrorsAsWarnings 标志设置为 false。

[该文档](http://stylecop.codeplex.com/wikipage?title=Managing%20StyleCop%20Project%20Settings)显示了您可以在哪里打开/关闭单个规则，但它似乎不支持设置严重性，只能完全打开/关闭它们。

是否无法更精细地控制哪些规则会导致错误与警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:42:08.290

它不应该，但如果你真的想要它.. 为什么不呢？

这是一个想法，而不是完整的解决方案。

文件中有两行有用的行`StyleCop.Targets`。第一个导入 StyleCop 任务：

```
<UsingTask AssemblyFile=".\StyleCop.dll" TaskName="StyleCopTask"/> 
```

这个叫它：

```
<StyleCopTask
  ProjectFullPath="$(MSBuildProjectDirectory)"
  SourceFiles="@(StyleCopFiles)"
  AdditionalAddinPaths="@(StyleCopAdditionalAddinPaths)"
  ForceFullAnalysis="$(StyleCopForceFullAnalysis)"
  DefineConstants="$(DefineConstants)"
  TreatErrorsAsWarnings="$(StyleCopTreatErrorsAsWarnings)"
  CacheResults="$(StyleCopCacheResults)"
  OverrideSettingsFile="$(StyleCopOverrideSettingsFile)"
  OutputFile="$(StyleCopOutputFile)"
  MaxViolationCount="$(StyleCopMaxViolationCount)"
        /> 
```

所以你基本上需要调用它两次，第一个指定`TreatErrorsAsWarnings`为`false`（这样如果有任何警告它就会失败），第二个指定为`true`（导致只是警告）。

此外，您将需要使用两个单独的设置文件 - 第一个带有 stylecop 'errors'，第二个带有 'warnings'。

# c++ - C++ while 切换后不会结束，逻辑？

> ID：16027761
> 
> 赞同：1
> 
> 时间：2013-04-16T02:26:44.530
> 
> 标签：c++

我拥有的这个函数调用另一个不返回任何内容的函数，然后如果输入 q，while 语句应该允许退出函数。它不工作。当我输入 q 或 Q 时，它会打印谢谢，再见。然后就像未满足条件一样开始切换。有任何想法吗？

```
void Watch::userInteraction()
{
    daysInMonthSwitch();
    char answer;
    while (answer != 'q' || answer != 'Q')
    {
        cout << "What would you like to do?" << endl;
        cout << "Enter r to run." << endl;
        cout << "Enter c to change time or date." << endl;
        cout << "Enter q to quit." << endl;
        cin >> answer;

        switch(answer)
        {
        case 'r':
            tick();
        break; 
        case 'R':
            tick();
        break;
        case 'c':
            changeTimeOrDate();
        break;
        case 'C':
            changeTimeOrDate();
        break;
        case 'q':
            cout << "Thank you, goodbye";
            break;
        case 'Q':
            cout << "Thank you, goodbye";
            break;
        default :
            userInteraction();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:33:27.043

```
while (answer != 'q' || answer != 'Q') 
```

应该

```
while (answer != 'q' && answer != 'Q') 
```

您还应该初始化`answer`.

此外，这不会导致任何问题，但如果您有两个具有相同操作的开关标签，则可以通过省略将它们组合起来以节省一些行`break`：

```
case 'R':
case 'r':
    tick();
    break; 
```

# javascript - Javascript 在 localhost 中运行时显示不同的效果

> ID：16027763
> 
> 赞同：0
> 
> 时间：2013-04-16T02:26:59.130
> 
> 标签：javascript, ajax

代码人有什么问题。我在本地主机上运行它时遇到问题。当`getModuleData()`用户触发 onclick 事件时调用。module_list div 在第一次加载页面时隐藏，lastSelectedModule 设置为-1。现在，当用户单击单击我按钮时，它将调用`getModuleData()`. 问题是当我单击按钮时，它首先加载新数据然后淡出然后再次淡入。我真正想要发生的是淡出旧数据然后淡入新数据。我尝试使用 console.log() 跟踪它；但输出是。

不是阿贾克斯

阿贾克斯

不是阿贾克斯

阿贾克斯

***html***

一些代码

`<a href='javascript:void(0);' onClick = 'getModuleData(sampleIdid)'><span>Click me</span>`

```
<div id ="module_list"> 
      <div id ="module_content">

      </div>
</div> 
```

***javascript***

```
function getModuleData(id)
{ 
    if(lastSelectedModule === -1){
       var off_set = $('#circular_navigation').offset().top;
       $('#module_list').show(1000,null);
       $('#hr_blue').show();
       animateScroll(off_set,800); 
    }

    if (lastSelectedModule !== id)
    {  
    console.log("Not Ajax");
    $('#module_content').fadeOut(1000,'',null);
    $('#loading').fadeIn(); 
    $('#module_icon_'+lastSelectedModule).removeAttr('style'); 
    document.getElementById('module_icon_'+id).style.cssText = '-moz-box-shadow: 0 0 0 10px #1589FF; -webkit-box-shadow: 0 0 0 10px #1589FF;  box-shadow: 0 0 10px #1589FF;';

        $.ajax({
              type: "GET",
              url: 'getModuleById.php',
              data: "module_id=" + id,  
              success: function(data) { 
              $('#loading').hide(); 
              $('#module_content').fadeIn(1000,null).html(data); 
              var targetOffset = $("#"+id).offset().top  - $('#circular_navigation').outerHeight(true); 
              animateScroll(targetOffset,800); 
                      console.log("Ajax");
            }
        }); 
        lastSelectedModule = id;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:43:00.740

`**[Live demo](http://jsfiddle.net/Qaqjt/2/)**`

您可以使用回调参数`fadeIn`和`fadeOut`方法在效果后立即执行某些操作。所以，做你想做的事情的正确方法是淡出元素，然后改变它并使用回调淡入它。例如：

```
$('#module_content').fadeOut(1000, function() {
    $(this).html('Some new text').fadeIn(1000);
}); 
```

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# ios - addSubview 崩溃 iOS 5.1 但不是 6.1

> ID：16027769
> 
> 赞同：0
> 
> 时间：2013-04-16T02:27:47.103
> 
> 标签：ios, ipad, ios5.1, addsubview

以下在 6.1 中工作正常，但应用程序在 5.1 中崩溃...

```
weeklyHeaderViewController =[[WeeklyHeaderViewController alloc] init];
[self.view addSubview:weeklyHeaderViewController.view]; 
```

这是一个 iPad 应用程序，视图为 939x31 .xib，包含 7 个 UILabel 对。控制器的 viewDidLoad 方法在 7 对之间插入一个 4x30 图像分隔符，然后将视图移动到屏幕底部的位置。

我可以通过 initWithNibName 对其进行跟踪，因此它似乎分配得很好。它在 addSubview 处崩溃并且永远不会到达 viewDidLoad 方法。

关于 5.1，我应该在这里缺少什么东西吗？

任何建议，将不胜感激。

谢谢，

约翰

```
//  WeeklyHeaderViewController.m

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) { 

    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    CGRect myImageRect = CGRectMake(131, 0, 4, 30);
    UIImageView *image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    [self.view addSubview:image];
    [image release];

    myImageRect = CGRectMake(266, 0, 4, 30);
    image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    self.view addSubview:image];
    [image release];

    myImageRect = CGRectMake(400, 0, 4, 30);
    image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    [self.view addSubview:image];
    [image release];

    myImageRect = CGRectMake(535, 0, 4, 30);
    image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    [self.view addSubview:image];
    [image release];

    myImageRect = CGRectMake(670, 0, 4, 30);
    image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    [self.view addSubview:image];
    [image release];

    myImageRect = CGRectMake(804, 0, 4, 30);
    image = [[UIImageView alloc] initWithFrame:myImageRect];
    [image setImage:[UIImage imageNamed:@"weeklyDaySeparator.png"]];
    [self.view addSubview:image];
    [image release];

    self.view.frame = CGRectMake(74, 687-14, self.view.frame.size.width, self.view.frame.size.height); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:48:20.457

感谢 iOSBegginer 提醒我在我的 xib 中取消选中 AutoLayout。

# android - android修改元数据谷歌驱动器

> ID：16027773
> 
> 赞同：1
> 
> 时间：2013-04-16T02:27:57.673
> 
> 标签：android, google-drive-api

所有知道我不知道的事情的人:-)

我遇到了这个实际上可能不是问题的问题，只是一个我不知道自己在做什么的启示。再次！

我正在上传带有一些描述和可索引关键字的 JPEG。奇迹般有效。但是我不知道以后如何添加/修改元数据，而不创建文件的另一个实例。所以，当我添加一张带有“狗”描述的狗的照片时，我最终得到了我想要的东西。但是，如果我尝试使用以下任一方法修改元数据：

```
 gooFl = drvSvc.files().insert(meta).execute(); 
```

或者

```
 gooFl = drvSvc.files().insert(meta,null).execute(); 
```

我最终在 GOOGLE Drive 上得到了一个新文件（同名）。请参阅下面的代码片段：

```
 File meta = new File();
    meta.setTitle("PicOfMyDog.jpg");
    meta.setMimeType("image/jpeg");
    meta.setParents(Arrays.asList(new ParentReference().setId(ymID)));
    File gooFl = null;
    if (bNewJPG == true) {
      meta.setDescription("dog");
      meta.setIndexableText(new IndexableText().setText("dog"));
      gooFl = drvSvc.files().insert(meta, 
       new FileContent("image/jpeg", new java.io.File(fullPath("PicOfMyDog.jpg"))))
       .execute();
    } else {
      meta.setDescription("dick");
      meta.setIndexableText(new IndexableText().setText("dick"));
      // gooFl = drvSvc.files().insert(meta).execute();
      gooFl = drvSvc.files().insert(meta,null).execute();
    }
    if (gooFl != null)
      Log.d("atn", "success  " + gooFl.getTitle()); 
```

这是我要问的“其他”分支。第一个文件有肉类数据“狗”，第二个文件有“迪克”。那么，有什么解决办法。我是否删除前一个实例（以及如何删除）？还有另一种我不知道的语法/方法吗？谢谢你，肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:52:16.587

如果您需要修改元数据，请使用`files.patch`.

```
drvSvc.files().patch(id, meta).execute(); 
```

如果您需要同时修改元数据和文件内容，请使用`files.update`.

```
drvSvc.files().update(id, meta, content).execute(); 
```

插入发出的 POST 请求总是会创建新资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:53:17.990

如果您只想更新元数据，则需要使用[Files.Patch 。](https://developers.google.com/drive/v2/reference/files/patch#examples)`files().insert`总是创建一个新文件。

完整的`File`命令列表和您需要使用的操作可以在[API 参考中找到](https://developers.google.com/drive/v2/reference/#Files)

# bash - 在 bash/unix 中获取上一个日期

> ID：16027776
> 
> 赞同：7
> 
> 时间：2013-04-16T02:28:26.790
> 
> 标签：bash, shell, unix, solaris, solaris-10

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T03:50:11.607

尝试这个：

```
date --date="yesterday" +%Y/%m/%d 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-16T16:29:37.197

您可以使用

```
date -d "30 days ago" +"%d/%m/%Y" 
```

要获取 30 天前的日期，同样您可以将 30 替换为 x 天数

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-30T17:44:33.383

```
dtd="2015-06-19"
yesterday=$( date -d "${dtd} -1 days" +'%Y_%m_%d' )
echo $yesterday; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-24T12:03:56.053

为了使用 date 命令获得 1 天的回溯日期：

`date -v -1d`它将给出 (current date -1) 表示 1 day before 。

`date -v +1d` 这将使 (current date +1) 表示 1 天后。

类似地，下面的书面代码可以用来代替`d`找出年、月等

`y-Year, m-Month w-Week d-Day H-Hour M-Minute
S-Second`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-16T04:58:03.980

这里建议的几个解决方案假设`GNU coreutils`系统上存在。以下应该适用于 Solaris：

```
TZ=GMT+24 date +’%Y/%m/%d’ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-11T09:06:41.923

以下脚本将前一个日期打印到`targetDate`（指定日期或给定日期）

```
targetDate=2014-06-30
count=1
startDate=$( echo `date -d "${targetDate} -${count} days" +"%Y-%m-%d"`)
echo $startDate 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T03:40:38.750

SunOS 附带传统的 BSD 用户空间工具，这些工具通常缺乏预期的现代选项。看看您是否可以获得 XPG 附加组件（类似于[`/usr/xpg4/bin/date`](http://docs.oracle.com/cd/E19082-01/819-2252/6n4i8rtuu/index.html)）或安装 GNU`coreutils`软件包（如果可以）。

同时，您可能需要编写自己的简单日期处理脚本。网上有很多例子，例如 Perl。例如[这个](http://www.unix.com/shell-programming-scripting/193715-perl-one-liner-get-yesterdays-date-format-dd-mmm-yy-i-e-01-jan-12-a.html)：

```
vnix$ perl -MPOSIX=strftime -le 'print strftime("%Y%m", localtime(time-86400))'
201304 
```

（如果您与链接后面的内容进行比较，则稍作调整。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T03:46:15.000

我已使用以下解决方法来获得所需的解决方案。

```
timeA=$(date +%Y%m)
sysD=$(date +%d)
print "Initial sysD $sysD">>LogPrint.log
sysD=$((sysD-1))
print "Final sysD $sysD">>LogPrint.log
finalTime=$timeA$sysD 
```

我希望这对和我面临同样问题的人有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-19T05:36:41.473

```
$ date '+%m/%d/%Y' --- current date

$ TZ=Etc/GMT+24 date  '+%m/%d/%Y'  -- one dayprevious date 
```

适当使用时区

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-19T13:21:28.487

```
date -d "yesterday" '+%Y-%m-%d' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-19T17:51:40.157

试试这个： gdate -d "1 天前" +"%Y/%m/%d"

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-04-16T02:31:14.957

## 问题

您的论点使用反引号，而不是单引号。您也可能没有使用 GNU 日期，或支持您正在使用的标志的*日期版本。*

## 解决方案

正确引用你的论点。例如：

```
$ date -d '1 day ago' +'%Y/%m/%d'
2013/04/14 
```

# ruby - Ruby 中的 SJCL AES-128-CCM 解密

> ID：16027778
> 
> 赞同：9
> 
> 时间：2013-04-16T02:28:29.157
> 
> 标签：ruby, encryption, openssl, aes, sjcl

我正在尝试在 Ruby 中实现 aes-128-ccm 加密字符串的 SJCL 解密。在阅读了一个[类似的问题](https://stackoverflow.com/questions/13563859/decryption-of-aes-created-with-sjcl-js-in-ruby)后，我发现更新版本的 OpenSSL 库应该支持这一点，所以我已经将开发版本从 github 安装到 /opt

执行此操作后，当我运行 /opt/bin/openssl 密码时，我在列表中看不到 aes-128-ccm 密码：

```
ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:SRP-DSS-AES-256-CBC-SHA:SRP-RSA-AES-256-CBC-SHA:DH-DSS-AES256-GCM-SHA384:DHE-DSS-AES256-GCM-SHA384:DH-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA256:DH-RSA-AES256-SHA256:DH-DSS-AES256-SHA256:DHE-RSA-AES256-SHA:DHE-DSS-AES256-SHA:DH-RSA-AES256-SHA:DH-DSS-AES256-SHA:DHE-RSA-CAMELLIA256-SHA:DHE-DSS-CAMELLIA256-SHA:DH-RSA-CAMELLIA256-SHA:DH-DSS-CAMELLIA256-SHA:ECDH-RSA-AES256-GCM-SHA384:ECDH-ECDSA-AES256-GCM-SHA384:ECDH-RSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA:ECDH-ECDSA-AES256-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:CAMELLIA256-SHA:PSK-AES256-CBC-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:SRP-DSS-3DES-EDE-CBC-SHA:SRP-RSA-3DES-EDE-CBC-SHA:EDH-RSA-DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:DH-RSA-DES-CBC3-SHA:DH-DSS-DES-CBC3-SHA:ECDH-RSA-DES-CBC3-SHA:ECDH-ECDSA-DES-CBC3-SHA:DES-CBC3-SHA:PSK-3DES-EDE-CBC-SHA:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:SRP-DSS-AES-128-CBC-SHA:SRP-RSA-AES-128-CBC-SHA:DH-DSS-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:DH-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256:DHE-DSS-AES128-SHA256:DH-RSA-AES128-SHA256:DH-DSS-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA:DH-RSA-AES128-SHA:DH-DSS-AES128-SHA:DHE-RSA-SEED-SHA:DHE-DSS-SEED-SHA:DH-RSA-SEED-SHA:DH-DSS-SEED-SHA:DHE-RSA-CAMELLIA128-SHA:DHE-DSS-CAMELLIA128-SHA:DH-RSA-CAMELLIA128-SHA:DH-DSS-CAMELLIA128-SHA:ECDH-RSA-AES128-GCM-SHA256:ECDH-ECDSA-AES128-GCM-SHA256:ECDH-RSA-AES128-SHA256:ECDH-ECDSA-AES128-SHA256:ECDH-RSA-AES128-SHA:ECDH-ECDSA-AES128-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:SEED-SHA:CAMELLIA128-SHA:IDEA-CBC-SHA:PSK-AES128-CBC-SHA:ECDHE-RSA-RC4-SHA:ECDHE-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:RC4-SHA:RC4-MD5:PSK-RC4-SHA:EDH-RSA-DES-CBC-SHA:EDH-DSS-DES-CBC-SHA:DH-RSA-DES-CBC-SHA:DH-DSS-DES-CBC-SHA:DES-CBC-SHA:EXP-EDH-RSA-DES-CBC-SHA:EXP-EDH-DSS-DES-CBC-SHA:EXP-DH-RSA-DES-CBC-SHA:EXP-DH-DSS-DES-CBC-SHA:EXP-DES-CBC-SHA:EXP-RC2-CBC-MD5:EXP-RC4-MD5 
```

但是如果我运行 /opt/bin/openssl enc -help 2>&1 我会看到“-aes-128-ccm”：

```
-aes-128-cbc               -aes-128-ccm               -aes-128-cfb              
-aes-128-cfb1              -aes-128-cfb8              -aes-128-ctr              
-aes-128-ecb               -aes-128-gcm               -aes-128-ofb              
-aes-128-xts               -aes-192-cbc               -aes-192-ccm              
-aes-192-cfb               -aes-192-cfb1              -aes-192-cfb8             
-aes-192-ctr               -aes-192-ecb               -aes-192-gcm              
-aes-192-ofb               -aes-256-cbc               -aes-256-ccm              
-aes-256-cfb               -aes-256-cfb1              -aes-256-cfb8             
-aes-256-ctr               -aes-256-ecb               -aes-256-gcm              
-aes-256-ofb               -aes-256-xts               -aes128                   
-aes192                    -aes256                    -bf                       
-bf-cbc                    -bf-cfb                    -bf-ecb                   
-bf-ofb                    -blowfish                  -camellia-128-cbc         
-camellia-128-cfb          -camellia-128-cfb1         -camellia-128-cfb8        
-camellia-128-ecb          -camellia-128-ofb          -camellia-192-cbc         
-camellia-192-cfb          -camellia-192-cfb1         -camellia-192-cfb8        
-camellia-192-ecb          -camellia-192-ofb          -camellia-256-cbc         
-camellia-256-cfb          -camellia-256-cfb1         -camellia-256-cfb8        
-camellia-256-ecb          -camellia-256-ofb          -camellia128              
-camellia192               -camellia256               -cast                     
-cast-cbc                  -cast5-cbc                 -cast5-cfb                
-cast5-ecb                 -cast5-ofb                 -des                      
-des-cbc                   -des-cfb                   -des-cfb1                 
-des-cfb8                  -des-ecb                   -des-ede                  
-des-ede-cbc               -des-ede-cfb               -des-ede-ofb              
-des-ede3                  -des-ede3-cbc              -des-ede3-cfb             
-des-ede3-cfb1             -des-ede3-cfb8             -des-ede3-ofb             
-des-ofb                   -des3                      -desx                     
-desx-cbc                  -gost89                    -gost89-cnt               
-id-aes128-CCM             -id-aes128-GCM             -id-aes192-CCM            
-id-aes192-GCM             -id-aes256-CCM             -id-aes256-GCM            
-idea                      -idea-cbc                  -idea-cfb                 
-idea-ecb                  -idea-ofb                  -rc2                      
-rc2-40-cbc                -rc2-64-cbc                -rc2-cbc                  
-rc2-cfb                   -rc2-ecb                   -rc2-ofb                  
-rc4                       -rc4-40                    -rc4-hmac-md5             
-seed                      -seed-cbc                  -seed-cfb                 
-seed-ecb                  -seed-ofb 
```

我使用以下命令重新安装了 ruby​​ 2.0.0p0 和 rvm：（`rvm reinstall 2.0.0 --with-openssl-dir=/opt`在上述文章中给出）。然后跑了`cipher = OpenSSL::Cipher.new('aes-128-ccm')`。返回以下错误：

```
unsupported cipher algorithm (aes-128-ccm) 
```

我的问题是如何在 Ruby 中添加对 AES-128-CCM 的支持/我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T13:44:33.437

好的，我已经成功了，这就是我所做的：

首先从[github](https://github.com/openssl/openssl)获取 OpenSSL 源代码：

```
$ git clone https://github.com/openssl/openssl.git
$ cd openssl/ 
```

如果您想要与我使用的完全相同的版本，请执行以下操作：

```
$ git checkout 5ae8d6bcbaff99423a2608559d738a3fcf7ed6dc -b tmp 
```

现在在某个目录中使用共享库构建 OpenSSL：

```
$ ./config shared --prefix=/home/jbr/local/openssl
$ make depend
$ make
$ make install 
```

确保您有 ccm 支持：

```
$ /home/jbr/local/openssl/bin/openssl enc -help  2>&1 | grep "ccm"
-aes-128-ccm               -aes-128-cfb               -aes-128-cfb1             
-aes-192-cbc               -aes-192-ccm               -aes-192-cfb              
-aes-256-ccm               -aes-256-cfb               -aes-256-cfb1 
```

好的，现在使用 rvm 和新版本的 OpenSSL 安装一个命名的 Ruby：

```
$ rvm install ruby-2.0.0-p195 -n ccm --with-openssl-dir=/home/jbr/local/openssl 
```

此命令为您提供带有 -ccm 后缀的 Ruby 2.0.0 补丁级别 195 版本，它使用您的新 OpenSSL 库。

现在使用新版本的 Ruby：

```
$ rvm use ruby-2.0.0-p195-ccm 
```

并用 irb 进行测试：

```
$ irb
2.0.0p195 :001 > require 'openssl'
 => true
2.0.0p195 :005 > OpenSSL::Cipher.ciphers.include? "aes-128-ccm"
 => true 
```

您现在拥有 aes-128-ccm。

# iis - 开发服务器和生产服务器之间的 IIS 和相对 URL 差异

> ID：16027784
> 
> 赞同：1
> 
> 时间：2013-04-16T02:29:25.623
> 
> 标签：iis, web-applications, asp.net-mvc-4, asp.net-web-api, document-root

我有一个 web.api 应用程序，它位于`http://localhost/Reporter`我的本地 IIS8 服务器上。该站点的索引页面有几个指向其他页面的链接——正确的绝对 url 示例应该是`http://localhost/Reporter/SomeRestApi`. 然后在索引页面中，我有以下内容：

```
<a href="SomeRestApi">The Rest Api</a> 
```

在我的开发网站上，当我单击链接时，我会得到一个有效的 URL。但是当我将它部署到我的生产 IIS 服务器（与我的本地计算机上的版本完全相同）时，当我单击链接时，它会将我带到`http://localhost/SomeRestApi`不正确的位置。应该是`http://localhost/Reporter/SomeRestApi`。

我已经搜索了 IIS 设置，仔细检查了我在本地 IIS 和生产服务器上的项目结构，我能想到的一切，但我找不到任何差异可以解释为什么生产站点上的源或文档根目录似乎不正确.

我正在使用 VS2012 中的工具部署它——也许那里有一些调整？我还能在哪里查看，我还可以检查什么来尝试找出问题？

# c - 我的代码有什么问题？什么是 argv[1]？

> ID：16027785
> 
> 赞同：3
> 
> 时间：2013-04-16T02:29:33.713
> 
> 标签：c, pointers, argv

我试图让用户输入一个字符串，以便打印字符串的长度。我的代码构建成功。但是，当我输入一个单词并按下“输入”时，程序继续运行。我必须输入第二个单词，然后显示第一个字符串的长度。我对 argv[1] 感到困惑。有人可以给我一些提示和提示如何解决这个问题吗？在此先感谢您的时间。

请注意，我不允许使用任何字符串函数。

```
 int main(int argc, char* argv[]){

    char* s=argv[1];

    char input[256];
    s = input;
    printf("Please enter a string: ");
    scanf("%s\n", s);
    int str_length = 0;
    while (s[str_length] != '\0')
    {
        str_length++;
        if (s[str_length] == '\0') break;
    }

    printf("%d\n", str_length);

    return 0;   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T02:34:20.840

`argv[]`是保存您的命令行参数的数组，`argv[1]`是第一个（`argv[0]`当然，除了命令表示本身之外）。您将其分配给`s`then immediate overwrite `s`，因此这里并不真正需要它。

您必须输入*两*行的原因是`\n`输入格式的末尾。它需要任何可以匹配格式字符串后跟换行符的内容，因此`%s\n`正在*吃掉*你的第一个换行符，因此`scanf`必须返回另一个换行符。

`%s`它自己会解决这个问题，但如果你追求的是一整*行*输入，它会引入另一个问题——它只会读取到第一个空格。有关正确的行输入功能，请参见[此处](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。

`scanf("%s")`它进行全行输入，防止缓冲区溢出和检测/清理过长的行，这是输入法中严重缺失的东西。

此外，这里的`if`语句`while`是多余的，因为它`while`本身会捕获字符串的结尾，同时拥有两者`input`并`s`引用同一个数组几乎没有意义（如果你在某个时候进行了更改，这*将*`s`是有意义的，但这不是发生在这里）。

因此，*没有*高级 line iput 功能的变体可能很简单：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char* argv[]) {
    char input[256];
    int str_length = 0;

    printf ("Please enter a string: ");
    scanf ("%s", input);
    while (input[str_length] != '\0')    /* Or consider using strlen() */
        str_length++;

    printf ("%d\n", str_length);

    return 0;
} 
```

如果您输入`Hello`，您会看到它`5`立即打印出来。您还将看到`5`是否输入`Hello Pax`，这是选择高级输入功能的一个原因（另一个非常重要的原因是避免在您的程序中引入缓冲区溢出漏洞）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:35:41.113

argv 用于传递进程参数。这意味着你可以运行你的程序

```
a.out 123 abcd 
```

argv[1] 已经被赋值为 123。你不必像现在这样阅读它。在您当前的代码中，在使用 argv[1] 分配新字符串后，您正在覆盖对新字符串的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:47:01.637

这就是你想要的

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#define MAX 100

int main(int argc, char* argv[]){
    char tmp[MAX];
    printf("Plese enter a string:\n");
    scanf("%s", tmp);
    printf("the length is %d\n", strlen(tmp));

    return 0;   
} 
```

argv 和 argc 又是这样的：argv[0] = a.exe argv[1] = 12345

```
int main(int argc, char* argv[]){
    printf("the length is %d\n", strlen(argv[1]));

    return 0;   
}
/*-------------------- Output --------------------
 > a.out 12345
 the length is 5
  ------------------------------------------------*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T02:34:03.137

只需更改`scanf`行：

```
scanf("%s", s); 
```

正如你所拥有的 ( `scanf("%s\n", s);`)，它需要一个以 结尾的字符序列`\n`，然后是另一个`\n`以指示输入何时完成。

# jquery - 如何将动态创建的 div 附加到容器

> ID：16027791
> 
> 赞同：1
> 
> 时间：2013-04-16T02:30:18.823
> 
> 标签：jquery, dom

我需要在动态 div 中显示来自服务器的消息（注销）。如果我将 div 元素这样编码到页面中，我可以让它工作：

```
<div id="message"></div> 
```

与 css #message{display:none;} 使用这个 js

```
$('#LogOut').on('click', function(e){
    $.ajax({
        type: "POST",
        url: "PHP/LogOut.php",
        success: function(data) {
        $('#message').fadeIn('fast').html('<p><span>Somesite.com</span>' + data + '<a id="close" href="">X</a></p>');
      }
    });
    e.preventDefault();
  }); 
```

我不能让它与.append一起工作，我不想在每一页上硬编码。当您单击注销时，是否有一种动态创建并附加到每个页面上的 div#main 的好方法？除了这个，我没有其他问题，PHP 很好，注销工作正常等等......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:33:01.980

尝试使用[`appendTo`](http://api.jquery.com/appendTo/)：

```
$('<div id="message"></div>').appendTo(document.body).html('<p><span>Somesite.com</span>' + data + '<a id="close" href="">X</a></p>').fadeIn('fast'); 
```

问题`append`是它不返回附加元素，它一直返回父元素。

```
$(document.body).append($('<div></div>')) //returns $(document.body); 
```

# tidy - Jtidy - 不应该在页面源代码中显示 TM 的编码字符（â„¢）？

> ID：16027792
> 
> 赞同：0
> 
> 时间：2013-04-16T02:30:27.483
> 
> 标签：tidy, htmltidy, jtidy

我正在使用 Jtidy 渲染新闻信息，当新闻信息中有 TM 时，页面源将其显示为

'â„¢' 无效...

这是我的代码：

InputStream is = new ByteArrayInputStream(description.getBytes()); 输出流 os=new ByteArrayOutputStream();

```
 Tidy tidy = new Tidy(); 

    tidy.setPrintBodyOnly(true);
    //tidy.setEscapeCdata(true);
    //tidy.setAsciiChars(false); 
```

知道如何显示 TM 代替此编码字符....或如何将 (ISO-8859-1) 设置为 Tidy？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:33:06.360

有一个 HTML 实体，这并不奇怪`&trade;`- 参见例如[http://www.w3.org/TR/WD-entities-961125](http://www.w3.org/TR/WD-entities-961125)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:03.380

通过在 Tidy 上设置 setInputEncoding() 和 setOutputEncoding() 来解决它...

# c# - C# Data Structures for "Home Folder" - should this be its own entity?

> ID：16027796
> 
> 赞同：0
> 
> 时间：2013-04-16T02:30:47.297
> 
> 标签：c#, .net, entity-framework, asp.net-mvc-4, asp.net-web-api

In my application I have Folders that can contain other Folders. They have all sorts of properties like this:

```
public class Folder
    {
        public Folder()
        {
            Sets = new Collection<Set>();
            Folders = new Collection<Folder>();
            Stage = Stage.one;
            IsArchived = false;
            DateCreated = DateTime.Now;
            }

        // Primitive Properties 

        [Required]
        [Key]
        public virtual int FolderId { get; set; }

        public virtual int? ParentFolderId { get; set; }

        [ForeignKey("ParentFolderId")]
        public virtual Folder ParentFolder { get; set; }

        [Required]
        public int UserId { get; set; }

        [Required]
        public virtual string Title { get; set; }

        public virtual string Details { get; set; }

        [Required]
        public virtual Stage Stage { get; set; }

        [Required]
        public virtual bool IsArchived { get; set; }

        [Required]
        public virtual DateTime DateCreated { get; set; }

        [ForeignKey("FolderId")]
        public virtual ICollection<Set> Sets { get; set; }

        [ForeignKey("ParentFolderId")]
        public virtual ICollection<Folder> Folders { get; set; }

    } 
```

Now, each User of the application has a "Home Folder" - a starting point. The Home Folder doesn't need half of the above properties however. I figure I have two options:

1) Use this entity and just add "isHomeFolder" as a property. This is simple but means I'll be sending blank [Required] properties over the wire for JSON requests - Home Folders don't have a title, can't be archived, etc.

2) Create another entity with just the required fields and duplicate the required properties there. This just doesn't seem very DRY, but feels better than the first option.

As a beginner programmer I'm not sure if there are any other options. Is there a standard approach/solution here?

In case it matters, I'm building on Entity Framework Code-First + WebAPI.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:38:54.293

> 2) 创建另一个仅包含必填字段的实体，并在那里复制所需的属性。这看起来不是很干，但感觉比第一个选项好。

这就是为什么 ViewModel 对于避免不必要（过度）发布、发布您不需要的值很重要的原因。此外，为了避免实体中的必填字段，您不希望它们或它们不适用于“特定视图”。实体不一定转化为单个视图。你的案例就是一个活生生的例子。

> 这里有标准方法/解决方案吗？

正如我所提到的，创建一个视图模型并仅复制您需要为其捕获输入的属性。即使您将数据注释放在相同的属性上，这也不会重复您自己。视图模型上的数据注释用于**视图验证**。您实体上的注释用于**域验证**。这不是重复，IMO，因为您的 UI 与您的域是不同的层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:42:02.840

也许您应该创建一个包含公共属性的类。然后，您可以使用两个实现从第一个继承的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:38:57.940

这取决于与文件夹总数相比，您将拥有多少个主文件夹。如果您将拥有比主文件夹更多的二级文件夹（并且您很可能会），那么为什么仅仅为了 10% 或 20% 或请求而费心实施另一个结构。

至于必填字段为空 - 只需使用一些不会在服务器端解析的默认值，你很好;）。

# ios - Cocoapods 将框架导入源代码

> ID：16027798
> 
> 赞同：23
> 
> 时间：2013-04-16T02:31:12.943
> 
> 标签：ios, objective-c, xcode, frameworks, cocoapods

在我的 iOS cocoapod 中，我有一个基本项目：

1.  开源类（.m & .h 文件）
2.  MyFramework.framework（.framework 目录、头文件和 .bundle 资源）

开源类之一调用`import <MyFramework.MyFramework.h>`，因此它可以在其实现中使用 MyFramework 的组件。但正因为如此，我无法让 podspec 通过 spec lint 测试 ( `pod spec lint MyCocoapod.podspec`)。当我运行规范 lint 验证时，它说：

`ERROR | [iOS] [xcodebuild] .../MyFile.h:54:9: fatal error: 'MyFramework/MyFramework.h' file not found`

在调查时，我注意到如果我在 podspec 的 source_files 部分中删除该开源类，则 podspec 确实通过了规范 lint 验证，`s.source_files = 'MyFiles.{h,m}'`. 知道为什么我的班级在规范 lint 验证期间无法导入我的自定义框架吗？

podspec 中的相关代码如下所示：

```
s.preserve_paths      = 'myframework/MyFramework.framework'
s.frameworks          = 'Foundation', 'MyFramework'
s.xcconfig            = { 'FRAMEWORK_SEARCH_PATHS' => '$(SRCROOT)/myframework/' }
s.public_header_files = 'MyFramework.framework/Headers/*.h', 'SourceCode/*.h'
s.source_files        = 'SourceCode/*.{h,m}'  # Crashes here - Source_file imports MyFramework.h. If I take this out, it passes spec lint validation 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T12:52:27.250

**编辑**这个过程现在完全由[`vendored_frameworks`](http://guides.cocoapods.org/syntax/podspec.html#vendored_frameworks)选项处理。这处理保留路径、框架搜索路径和链接到项目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-19T03:47:50.190

要包含一个框架，您可以使用：

`s.vendored_frameworks = 'path/to/SomeFramework.framework'`

要包含捆绑文件，请执行以下操作：

`s.resources ='path/to/SomeBundle.bundle'`

# php - Passing data from php session vertiable to ajax (with some jQuery in between)

> ID：16027801
> 
> 赞同：0
> 
> 时间：2013-04-16T02:31:25.403
> 
> 标签：php, jquery, ajax, security

I want to pass the user id and username stored in the session variable in php with an ajax request.

I know that i can print the values to the html of the page as a hidden text box, or as a jQuery data value, but i feel that this is not secure and that the user can make changes to the value and the ajax call will send that value which would make it in-secure. Please let me know how professionals handle this problem...

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:36:58.540

专业人员通过仔细筛选所有输入、强制执行强密码标准（以便用户无法猜测其他用户的密码）以及将凭据存储在页面上的代码中而不是使用随机生成的会话令牌来映射来处理这个问题用户在服务器上的身份令牌。

通过绕过您的所有客户端代码，客户可以轻松地发送他们想要的任何数据。您必须假设客户端是邪恶的，并从这个角度考虑保护您的服务器。

编辑：

如果您在令牌及其使用方面需要一些帮助，这个问题可能会对您有所帮助：[PHP cookies and member security](https://stackoverflow.com/questions/15981850/php-cookies-and-member-security/15981880#15981880)

如果您是安全新手，我强烈推荐[Web Application Hacker's Handbook](https://rads.stackoverflow.com/amzn/click/com/1118026470)。我读过它，它读起来非常透彻和有趣。

还有一本名为[Web Application Defender's Cookbook](https://rads.stackoverflow.com/amzn/click/com/1118362187)的新书，看起来很有前途，虽然我还没有读过。

# macos - 在 Mac OS 10.8 上将 AVCHD 文件读取到 QTMovie

> ID：16027802
> 
> 赞同：1
> 
> 时间：2013-04-16T02:31:25.847
> 
> 标签：macos, quicktime

我真的很想将 AVCHD 文件读入 QTMovie。我发现 Quicktime 播放器可以在 Mac 10.8 上读取 AVCHD 文件，所以 Mac OS 10.8 是否有 API 可以将 AVCHD 文件读取到 QTMovie 或其他对象。

我尝试了一些功能，例如

*   [[QTMovie alloc] initWithFile:(NSString*)]

*   NewMovieFromDataRef()

但它没有用。

那么有人对此有任何想法吗？

# php - MODx - 资源别名中断插件 - 在 URL 中使用带有“/”的页面？( /resources/page.html )

> ID：16027803
> 
> 赞同：0
> 
> 时间：2013-04-16T02:31:28.177
> 
> 标签：php, plugins, modx, breadcrumbs

我现在有一个 MODx 网站设置，我想知道让我的链接看起来像这样是否合适（我的意思是我的资源别名）：

> myurl.com/help/configuration/basics.html

像这样在 URL 中加上斜杠......这是一种不好的做法吗？我的主要问题是这个[面包屑](http://rtfm.modx.com/display/ADDON/Breadcrumbs)插件似乎不再工作...... :(如果有人愿意帮助我，我想让这个面包屑插件再次运行。

错误：

当说使用面包屑链接到*myurl.com/code/landing.html*页面并且当前页面是**myurl.com/help/configuration/basics.html**时，它会将您重定向到不存在的链接，即看起来像这样：

**myurl.com/help/configuration/code/landing.html** *_*

如您所见，它正在附加新页面 url 的后半部分，但它没有正确删除当前页面的 URL，因为它只删除了当前 URL 直到 '/' 斜杠....

有谁知道如何解决这一问题？可能是一种方法，这样我就可以更改**breadcrumbs.class.php**以获取链接的值，而不是执行当前的“删除”和“附加”操作，就好像我点击了带有“查看”按钮的链接一样在 MODx 管理器上？我不是 php 方面的专家，这是必须的。或者是否有其他替代方法可以在我的链接中创建“/”效果，而不仅仅是将其放在资源别名中？（因为我希望网站遵循逻辑、可读的顺序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:06:16.303

使用 modx 的所有东西，清除缓存，即使你认为这不是问题~ modx 对缓存东西非常积极。

虽然这听起来像是您的基本 href 标签可能设置为`<base href="" />`，但可能在您的模板中它可能看起来像：

```
<base href="[[++site_url]]"></base> 
```

在您的 /core/config/config.inc.php 中将 site_url 动态设置为 $modx_base_url ... 如果该值为空白，则可能导致问题。

还要检查 .htaccess 中的重写规则以查看重写基础是什么。[它应该是 / ]

然后刷新你的缓存... ;)

# c# - 更改自动生成列的数据类型

> ID：16027808
> 
> 赞同：1
> 
> 时间：2013-04-16T02:32:07.533
> 
> 标签：c#, asp.net, gridview

我有一个自动生成列的Gridview...问题是，数据类型都是imageurl。

当 gridview 填充时，url 是标签格式。

我可以将它们定义为有效的模板字段，但要求是自动生成。

我在 MSDN 上读到了这个，但我不知道如何从那里开始

```
private void BUChecker_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:53:27.283

我认为你使用`RowDataBound`如下**如果你不想使用模板字段**

```
protected void RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        //find your cell suppose it is Cell 0
       string imgUrl=e.Row.Cells[0].Text;
       Image img = new Imge();
       img.ImageUrl =imgUrl;
       e.Row.Cells[0].Controls.Add(img);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:42:54.010

你可以在它的`TemplateFields`. 见`GridView`控制'。请参阅[此](http://msdn.microsoft.com/en-us/library/bb288031.aspx)供您参考。

# asp.net-mvc - 实体框架代码优先：如何设计？

> ID：16027809
> 
> 赞同：1
> 
> 时间：2013-04-16T02:32:08.037
> 
> 标签：asp.net-mvc, entity-framework

我有一个 MS-SQL 表，如下所示。

用户表

```
CREATE TABLE [dbo].[Users]( 
[UserId] [uniqueidentifier] NOT NULL    Primary Key,
[UserAccount] [nvarchar](50) NOT NULL       Unique,
[Password] [nvarchar](50) NOT NULL,
[UserEmail] [nvarchar](50) NOT NULL,
[JoinDate] [datetime2](7) NOT NULL,
[LoginDate] [datetime2](7) NULL) 
```

角色表

```
CREATE TABLE [dbo].[Roles](
[RoleId] [uniqueidentifier] NOT NULL    Primary Key,
[RoleName] [nvarchar](50) NOT NULL      Unique,
[Note] [nvarchar](50) NOT NULL,
[RegistDate] [datetime2](7) NOT NULL) 
```

UsersInRoles 表

```
CREATE TABLE [dbo].[UsersInRoles](
[UserId] [uniqueidentifier] NOT NULL,
[RoleId] [uniqueidentifier] NOT NULL,
[SetDate] [datetime2](7) NOT NULL,
PRIMARY KEY CLUSTERED (
[UserId] ASC,
[RoleId] ASC)WITH (
PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY]
GO

ALTER TABLE [dbo].[UsersInRoles]  WITH CHECK ADD FOREIGN KEY([RoleId]) REFERENCES [dbo].[Roles] ([RoleId]) GO
ALTER TABLE [dbo].[UsersInRoles]  WITH CHECK ADD FOREIGN KEY([UserId]) REFERENCES [dbo].[Users] ([UserId]) GO 
```

我试图在 EF Code-First 中表达这一点。

用户实体类

```
public class User
{
    public Guid UserId { get; set; }
    public string UserAccount { get; set; }
    public string Password { get; set; }
    public string UserEmail { get; set; }
    public DateTime JoinDate { get; set; }
    public DateTime LoginDate { get; set; }
} 
```

角色实体类

```
public class Role
{
    public Guid RoleId { get; set; }
    public string RoleName { get; set; }
    public string Note { get; set; }
    public DateTime RegistDate { get; set; }
} 
```

UsersInRole 实体类

```
public class UsersInRole
{   
    public Guid UserId { get; set; }
    public Guid RoleId { get; set; }
    public DateTime SetDate { get; set; }
} 
```

外键的问题，应该如何设计UsersInRoles？

如果有更好的设计，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:04:25.313

如果您正在设计数据库然后使代码符合要求，那么这并不是真正的代码，是吗？听起来您应该在您的 User 类上定义一个角色集合，然后让 EntityFramework 完成构建该中间表的工作。它将处理 FK 关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:25:28.210

我没有尝试运行以下代码，所以我不能 100% 确定。但是我会从...开始

在您的域类中

```
public class User
{
 public Guid UserId { get; set; }
 public string UserAccount { get; set; }
 public string Password { get; set; }
 public string UserEmail { get; set; }
 public DateTime JoinDate { get; set; }
 public DateTime LoginDate { get; set; }
}

public class Role
{
 public Guid RoleId { get; set; }
 public string RoleName { get; set; }
 public string Note { get; set; }
 public DateTime RegistDate { get; set; }
}

public class UsersInRole
{   
 public DateTime SetDate { get; set; }
 virtual User User { get; set; }
 virtual Role Role { get; set; }
} 
```

在您的上下文中，您需要

```
public DbSet<Role> Roles { get; set; }

public DbSet<User> Users { get; set; }

public DbSet<UsersInRole> UsersInRoles { get; set; } 
```

可选地，您可能想要包括

```
public virtual  ICollection<UsersInRole> Roles { get; private set; } 
```

在用户类中

和/或

```
public virtual  ICollection<UsersInRole> Users { get; private set; } 
```

在角色类中将保持相同的数据结构。

# d3.js - 提交表单后，使用流星集合中新插入的数据更新 d3 图表

> ID：16027814
> 
> 赞同：6
> 
> 时间：2013-04-16T02:32:33.987
> 
> 标签：d3.js, meteor

我的 Meteor 应用程序有点简单，它显示了一个 d3 图表，该图表由存储在新插入的 mongodb 文档中的服务器计算数据生成：

*   用户填写一个简单的表单并单击提交按钮
*   服务器使用表单数据执行一些异步工作和 CPU 密集型计算
*   将具有 2 个字段（*formData*和*computedResult* ）的新*Calculus*文档插入到 mongodb *Calculi*集合中
****   SVG 图表使用新计算的数据进行更新***

 ***尽管[阅读了使用 d3 的 Meteor 派对示例](https://github.com/meteor/meteor/blob/master/examples/parties/client/client.js)、[本教程使用 d3 和 Meteor 生成 SVG](http://blog.benmcmahen.com/post/41124327100/using-d3-and-meteor-to-generate-scalable-vector)以及[有关如何构建反应式数据源的截屏视频](http://www.eventedmind.com/posts/meteor-build-a-reactive-data-source)，但我真的很困惑！我很难正确理解 Meteor 中的反应式数据源、模板和依赖项。

*插入新的Calculus*文档后，我似乎无法更新 SVG 图表。

这是我的问题：在提交将文档插入集合的表单后，使用服务器计算的数据自动更新 d3 生成的 SVG 图表的全面、对新手友好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T20:04:54.067

您要么需要让用户订阅 Calculi 集合（[http://docs.meteor.com/#reactivity](http://docs.meteor.com/#reactivity)）中的更改，要么如果您在模板中呈现用户的响应，您可以做出并调用`update()`运行的方法你的 d3 代码。这将在 d3 代码的更新部分更新您的图表。***

# entity-framework - 从数据库生成的实体框架生成空 EDMX

> ID：16027816
> 
> 赞同：2
> 
> 时间：2013-04-16T02:32:40.713
> 
> 标签：entity-framework, entity-framework-5

我尝试按照一些简单的教程开始使用 AdventureWorks 数据库使用实体框架。我已经尝试了几次，我得到了相同的结果。

1.  创建类库
2.  添加 ADO.NET 实体数据模型
3.  选择从数据库生成
4.  创建与 AdventureWorks DB 的连接
5.  选择所有表和视图

结果：生成一个空白 EDMX，告诉我从模型浏览器中拖动项目。当我查看模型浏览器时，没有任何东西可以拖动到 EDMX。

有什么想法我可以尝试吗？

使用 SQLServer 2012 Express Visual Studio 2012 Express (.NET 4.5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-23T18:43:32.370

我遇到了同样的问题。
我的表缺少主键。
添加一个对我有用：表格出现在 .edmx 中

# sql - SQL：“列 'tbl.column' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。”

> ID：16027818
> 
> 赞同：1
> 
> 时间：2013-04-16T02:33:00.570
> 
> 标签：sql, sql-server, node.js

我想知道为什么我会收到以下错误：
`Column 'tbl.column' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.`
当 sql 语句看起来像：
`SELECT tbl.column, MAX(tblOther.columnOtherId) AS otherID FROM (tbl INNER JOIN tblOther ON tbl.columnId = tblOther.columnOtherId) INNER JOIN tblOtherAgain ON tblOther.columnOtherId = tblOtherAgain.columnAgainOtherId WHERE tblOther.columnOtherAgainId = @id`。

当我删除聚合函数**MAX**时，`tblOther.columnOtherId`我没有收到上述错误。那么如何让上面显示的语句正常工作而不会出现显示的错误呢？

DBLibrary：***繁琐的.js***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:34:59.110

您使用了聚合函数`MAX()`，并且子句中有一个未聚合的字段，`SELECT`这就是您需要有`GROUP BY`子句的原因，

```
SELECT  tbl.column, 
        MAX(tblOther.columnOtherId) AS otherID 
FROM    (tbl INNER JOIN tblOther 
            ON tbl.columnId = tblOther.columnOtherId) 
        INNER JOIN tblOtherAgain 
            ON tblOther.columnOtherId = tblOtherAgain.SourceId 
WHERE   tblOther.columnOtherAgainId = @id
GROUP   BY tbl.column 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:35:13.373

```
SELECT tbl.column, MAX(tblOther.columnOtherId) AS otherID FROM (tbl INNER JOIN tblOther ON tbl.columnId = tblOther.columnOtherId) INNER JOIN tblOtherAgain ON tblOther.columnOtherId = tblOtherAgain.columnAgainOtherId WHERE tblOther.columnOtherAgainId = @id
GROUP BY tbl.column 
```

# c# - Utilizing ICommand in WPF -- Command returning null

> ID：16027820
> 
> 赞同：1
> 
> 时间：2013-04-16T02:33:02.260
> 
> 标签：c#, wpf, mvvm, icommand

I am working on a sample ViewModel in WPF and I am currently binding 3 textboxes in the View to `Id`, `FirstName`, and `LastName`. I then have a button click event in the xaml.cs file that executes a method that updates the sample database table. I am trying to wrap my head around MVVM and WPF. I want to take away the button click event and bind to a Command instead. I am using Linq to Sql for the db connection.

When I am debugging the code everything is returning null. Am I on the right path?

Thanks!

Here is part of the VM (I didnt want to post all the code.)

```
public class People
{
    public Guid Id {get; set;}
    public string FirstName {get; set;}
    public string LastName {get; set;}
}

private People mPeople = null;
private Guid mId = Guid.empty;

public People people
{
    get {return mPeople;}
    set {mPeople = value; OnPropertyChanged("people");}
}

public overide void Refresh()    
{      
    Using (DatabaseDataContext dc = new DatabaseDataContext())      
    {
        mId = CurrentUser.Identity;

        var query = from person in dc.PeopleTables 
            where person.PId = mId
            select new People()
            {
                Id = person.PId,
                    FirstName = person.FirstName,
                LastName = person.LastName
            };

        mPeople = query.First();
    }
} 
```

In the VM here is what I am trying with the Commands

```
private RelayCommand mUserUpdate = null;

public ICommand UserUpdate
{
    get
    {
        if(mUserUpdate == null) mUserUpdate = new RelayCommand(p => UpdateUser(p));
        return mUserUpdate;
    }
}

private void UpdateUser(object parameter)
{
    People pe = parameter as People;
    UpdateUser(pe.Id, pe.FirstName, pe.LastName);
}

public static void UpdateUser(Guid Id, string FirstName, string LastName)
{
    DatabaseDataContext DC = new DatabaseDatacontext();

    var User = (from c in DC.GetTable<PeopleTable>()
                where c.PId = mId
            select c).SingleOrDefault();

    if (User == null
    {
        //Do my inserts here 
    }
    else
    {
        try
        {
            User.Id = Id;
        User.FirstName = FirstName;
        User.LastName = LastName;

        DC.SubmitChanges();
        }
        catch
        {
            throw ex;
        }
    }
} 
```

Here is my click event I was using

```
private void btnSave_Click(object sender, RoutedEventArgs e)
{
    UserViewModel.UpdateUser(txtId.Text, txtFirstName.Text, txtLastName.Text);
} 
```

* * *

Yea, I took out the click event and replaced it with

```
<Button Command="{Binding Path=UserUpdate}"/> 
```

I am binding the textboxes like this

```
<TextBox Width="250" Text="{Binding Path=Id}"/> 
</StackPanel> 
<StackPanel Orientation="Horizontal" Margin="0,5,0,0"> 
<Label Content="First Name:" Margin="0,0,4,0"/> 
<TextBox Width="250" Text="{Binding Path=FirstName}"/> 
</StackPanel> 
<StackPanel Orientation="Horizontal" Margin="0,5,0,0"> 
<Label Content="Last Name:" Margin="35,0,4,0"/> 
<TextBox Width="250" Text="{Binding Path=LastName}"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:05:30.030

您可能需要设置命令参数：

```
<Button Command="{Binding UserUpdate}" CommandParameter="{Binding SelectedUser}"/> 
```

如果“SelectedUser”来自您的 VM 而不是当前 UI，则您不需要该参数。只需获取要在 VM 中修改的用户实例的引用即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:27:32.277

就目前而言，您的代码不起作用，因为您期望将 Person 类型的参数传递给不可能的命令（我认为）。

您的视图模型需要如下所示：

```
public class PersonViewModel : *INotifyPropertyChanged base class here*
{
    public PersonViewModel()
    {
        UpdatePersonCommand = new RelayCommand(UpdateUser);
    }

    public Guid Id {get{ return _id;} { set _id = Id; RaisePropertyChanged("Id"); }
    public string FirstName { ... same }
    public string LastName { ... same }

    public ICommand UpdatePersonCommand {get; private set;}

    private void UpdateUser()
    {
        UpdateUser(Id, FirstName, LastName);
    }

    private void UpdateUser(Guid Id, string FirstName, string LastName)
    {
        DatabaseDataContext DC = new DatabaseDatacontext();
        ...
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T02:36:41.747

命令用于按钮`replace`的`Click`事件处理程序。

您应该删除事件处理程序并执行

```
<Button Command="{Binding UserUpdate}"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T14:44:13.487

在 UpdateUser 方法中试试这个

```
Private void UpdateUser(object obj)
{
    UpdateUser(Id, FirstName, LastName);
} 
```

# c# - 内存不足异常。可能来自网络服务

> ID：16027827
> 
> 赞同：-2
> 
> 时间：2013-04-16T02:33:47.903
> 
> 标签：c#, web-services

我解决了 4 个月的内存异常问题。我的客户使用网络服务，他们想让我测试他们的网络服务。在他们的网络服务中，有一个函数调用上传。我在同时上传的 1500 个用户上测试了该功能。我尝试了视觉工作室（GC）的垃圾收集功能。对于 2mb 的文件，没有异常，但是对于 8mb 的文件，仍然存在内存不足的异常。我已经尝试了很多次和很多解决方案，但仍然发生。我现在要疯了。上传时，我查看了所有测试计算机的内存，但内存并没有用完。所以我认为这个问题来自网络服务和服务器。但是我的客户说我必须改进那些从网络服务和服务器到他们的原因。我现在要疯了。你们有这方面的独奏吗？此外，我们的客户不公开代码，我只是使用webservice的功能来测试。另外，当连接到 vps 时，我必须使用 vps 连接他们的 web 服务和网络相当慢。

我必须确保我的测试脚本没有任何问题。这是我测试上传功能的测试脚本。

```
public void UploadNewJob(string HalID, string fileUID, string jobUID, string fileName, out List errorMessages)

{

errorMessages = null;

try

{ 

int versionNumber;

int newVersionNumber;

string newRevisionTag;

datasyncservice.ErrorObject errorObj = new datasyncservice.ErrorObject();

PfgDbJob job = new PfgDbJob();

job.CompanyName = Constant.SEARCH_CN;

job.HalliburtonSalesOffice = Constant.SEARCH_SO;

job.HalliburtonOperationsLocation = Constant.SEARCH_OL;

job.UploadPersonHalId = HalID;

job.CheckOutState = Constant.CHECKOUT_STATE;

job.RevisionTag = Constant.NEW_REVISION_TAG;

var manifestItems = new List();

var newManifestItems = new List();

var manifestItem = new ManifestItem();

if (fileUID == "")

{

if (job.JobUid == Guid.Empty)

job.JobUid = Guid.NewGuid();

if (job.FileUid == Guid.Empty)

job.FileUid = Guid.NewGuid();

}

else

{

Guid JobUid = new Guid(jobUID);

job.JobUid = JobUid;

Guid fileUid = new Guid(fileUID);

job.FileUid = fileUid;

}

// Change the next line when we transfer .ssp files by parts 

manifestItem.PartUid = job.FileUid;

job.JobFileName = fileName;

manifestItem.BinaryFileName = job.JobFileName;

manifestItem.FileUid = job.FileUid;

manifestItem.JobUid = job.JobUid;

manifestItem.PartName = string.Empty;

manifestItem.SequenceNumber = 0;

manifestItems.Add(manifestItem);

errorMessages = DataSyncService.Instance.ValidateForUploadPfgDbJobToDatabase(out newVersionNumber, out newRevisionTag, out errorObj, out newManifestItems, HalID, job, false);

if (manifestItems.Count == 0)

manifestItems = newManifestItems;

if (errorMessages.Count > 0)

{

if (errorMessages.Count > 1 || errorMessages[0].IndexOf("NOT AN ERROR") == -1)

{ 

return;

}

}

//upload new Job 

Guid transferUid;

long a= GC.GetTotalMemory(false);

byte[] fileContents = File.ReadAllBytes(fileName);

fileContents = null;

GC.Collect();

long b = GC.GetTotalMemory(false);

//Assert.Fail((b - a).ToString());

//errorMessages = DataSyncService.Instance.UploadFileInAJob(out transferUid, out errorObj, job.UploadPersonHalId, job, manifestItem, fileContents);

DataSyncService.Instance.UploadPfgDbJobToDatabase(out errorObj, out versionNumber, job.UploadPersonHalId, job, false, manifestItems);

}

catch (Exception ex)

{

Assert.Fail("Error from Test Scripts: " + ex.Message);

}

} 
```

请查看我的测试代码。如果我的测试代码没有任何问题，我必须改进原因不是我的测试代码T_T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:38:13.597

我的猜测是您达到了 .NET 的 2 GB 对象大小限制（1500 * 8MB > 4GB）。
您应该考虑更改为 .NET 4.5 并使用大对象模式 - 请参阅[此处](http://blogs.msdn.com/b/dotnet/archive/2012/07/20/the-net-framework-4-5-includes-new-garbage-collector-enhancements-for-client-and-server-apps.aspx) - 该设置称为 gcAllowVeryLargeObjects。

# java - 未定义 Service_class Service_class.java 类型的 managedQuery 方法

> ID：16027836
> 
> 赞同：0
> 
> 时间：2013-04-16T02:34:32.403
> 
> 标签：java, android, sqlite

这可能是什么原因？我们只是尝试在以下服务类中查询浏览器历史记录，但是 eclipse 会生成错误`The method managedQuery is undefined for the type Service_class Service_class.java`

我们试图遵循日食的建议 - 但它完全打开了另一罐蠕虫。

例子：

```
public class Service_class extends Service {
       String Dirty1 = "www.playboy.com";
        String Dirty2 = "www.penthouse.com";
        String Dirty3 = "www.pornhub.com";
        String Dirty4 = "www.playboy.com";
        String Dirty5 = "www.playboy.com";
        String Dirty6 = "www.playboy.com";
        String Dirty7 = "www.playboy.com";
        String Dirty8 = "www.playboy.com";
        String Dirty9 = "www.playboy.com";
        String Dirty10 = "www.playboy.com";

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
                Browser.BookmarkColumns.URL };
                Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                        projection, null, null, null);
                String urls = "";
                if (cursor.moveToFirst()) {
                String url1 = null;
                String url2 = null;
                do {
                String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

                if (url.toLowerCase().contains(Dirty1)) {
                } else if (url.toLowerCase().contains(Dirty2)) {
                } else if (url.toLowerCase().contains(Dirty3)) {
                } else if (url.toLowerCase().contains(Dirty4)) {
                } else if (url.toLowerCase().contains(Dirty5)) {
                } else if (url.toLowerCase().contains(Dirty6)) {
                } else if (url.toLowerCase().contains(Dirty7)) {
                } else if (url.toLowerCase().contains(Dirty8)) {
                } else if (url.toLowerCase().contains(Dirty9)) {
                } else if (url.toLowerCase().contains(Dirty10)) {
                //if (url.toLowerCase().contains(Filthy)) {
                urls = urls
                + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
                + url + "\n";
                Intent intent = new Intent(Service_class.this, Warning.class);
                Service_class.this.startActivity(intent);
                }
                } while (cursor.moveToNext()); 
            //  tv.setText(urls);

    }

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:37:00.023

服务不存在 managedQuery 函数。它只存在于活动中。您仍然可以进行查询，但您必须管理光标并手动关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:38:54.657

在您的 onCreate 方法中，第 3 行您正在使用托管查询方法。它在哪里定义？

# regex - 正则表达式仅打印可执行文件而不是完整路径

> ID：16027838
> 
> 赞同：0
> 
> 时间：2013-04-16T02:34:35.373
> 
> 标签：regex, text, expression, textwrangler

我有一组键/值对，其中列出了使用完全限定名称的可执行文件，如下所示：

```
 ["exec"] = "/share/home/00288/tg455591/NAMD_2.8b3/NAMD_2.8b3_Linux-x86_64-MVAPICH-Intel-Ranger/namd2", 
```

但是，我想取出目录位置，只打印可执行文件，如下所示：

```
 ["exec"] = "namd2", 
```

如何构造正则表达式来进行此更改？请记住，文件中的所有可执行文件都是不同的，但它们具有相似的格式。该文件的大小约为 6000 行。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:19:00.763

试试这个找到：

```
(?<="exec"] = ")[^"]*?/([^/"]+)(?=") 
```

这要替换：

```
\1 
```

（或 1 美元）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:13:52.540

这个正则表达式成功了：

```
(?<=\["exec"\] = ").+?(?=[^/]+?(?:\.\w+)?") 
```

用。。。来代替：

```
\1\2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:03:47.853

如果我正确理解了这个问题，这个`sed`命令就可以解决问题：

```
sed 's|= .*/|= "|' 
```

# r - & 和 && 有什么区别 | 和 || 在 R?

> ID：16027840
> 
> 赞同：34
> 
> 时间：2013-04-16T02:34:50.140
> 
> 标签：r

为什么有四个逻辑运算符：

```
&, &&
|, || 
```

用法上有什么区别？

是的，我检查了文档，但我有点困惑。文档说：

```
 ‘&amp;’ and ‘&amp;&’ indicate logical AND and ‘|’ and ‘||’ indicate
 logical OR.  The shorter form performs elementwise comparisons in
 much the same way as arithmetic operators.  The longer form
 evaluates left to right examining only the first element of each
 vector.  Evaluation proceeds only until the result is determined.
 The longer form is appropriate for programming control-flow and
 typically preferred in ‘if’ clauses. 
```

我认为一个例子将清楚地展示它们。谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T02:40:19.617

主要区别如下...

1.  长格式（&& 或 ||）短路，这意味着它是否可以通过仅验证第一个元素来识别结果。在做 && 时，如果前两个元素的比较结果为 false，那么比较下一组元素也会导致`False`. 因此，它返回 false。做的时候|| 如果比较结果在前几个元素中为真，我们可以自信地说任何进一步的验证都不会改变结果，所以它返回`True`。

2.  短格式继续为整个向量做，并创建一个结果向量并返回它。

希望这可以帮助。

> & 和 && 表示逻辑 AND 和 | 和 || 表示逻辑或。较短的形式执行元素比较的方式与算术运算符大致相同。较长的形式从左到右评估，仅检查每个向量的第一个元素。仅在确定结果之前进行评估。较长的形式适用于编程控制流，通常在 if 子句中首选。

来源：[http ://stat.ethz.ch/R-manual/R-patched/library/base/html/Logic.html](http://stat.ethz.ch/R-manual/R-patched/library/base/html/Logic.html)

# string - 随机化列表理解时将 Rvar 转换为字符串

> ID：16027845
> 
> 赞同：0
> 
> 时间：2013-04-16T02:35:19.330
> 
> 标签：string, list, haskell, random

嘿，所以我试图从这个列表字符串列表中选择一个随机元素但是当我尝试向列表理解添加选择时......

```
{-# LANGUAGE UnicodeSyntax #-}
import System.Random(randomRIO)
import Data.Random.Extras(choice)
import Data.Char (digitToInt)
...

getConclusion :: String -> String -> [String]
getConclusion operators atoms =
   choice [[atom1] ++ " " ++ [operator] ++ " " ++ [atom2] | atom1 <- atoms, atom2 <-                     atoms, operator <- operators] 
```

...我收到此错误：

```
/home/joe/Documents/haskell/LAG/main/main.hs: line 56, column 4:
Couldn't match type `Data.RVar.RVarT
                         Data.Functor.Identity.Identity [Char]'
                with `[String]'
  Expected type: [String]
    Actual type: Data.RVar.RVar [Char]
  In the return type of a call of `choice'
  In the expression:
    choice
      [[atom1] ++ " " ++ [operator] ++ " " ++ [atom2] |
         atom1 <- atoms, atom2 <- atoms, operator <- operators]
  In an equation for `getConclusion':
      getConclusion operators atoms
        = choice
            [[atom1] ++ " " ++ [operator] ++ " " ++ [atom2] |
               atom1 <- atoms, atom2 <- atoms, operator <- operators] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:50:22.557

看看类型`choice :: [a] -> RVar a`。你的函数应该有 type `String -> String -> RVar String`。the`RVarT Data.Functor.Identity.Identity [Char]`只是 的一个很长的同义词`RVar String`。

# wcf - WCF的问题：是我自己的错吗？

> ID：16027848
> 
> 赞同：0
> 
> 时间：2013-04-16T02:35:33.020
> 
> 标签：wcf, dictionary

我定义了以下方法：

```
 [OperationContract]
    [FaultContract(typeof(UserFriendlyError))]
    bool MakeOutInvoice(Dictionary<string, string> pk, string usergid); 
```

在我的网站中，我添加了服务参考，vs 2010 在下面生成了这些代码：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays")]
public partial class ArrayOfKeyValueOfstringstringKeyValueOfstringstring : object, System.ComponentModel.INotifyPropertyChanged {

    private string keyField;

    private string valueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(IsNullable=true, Order=0)]
    public string Key {
        get {
            return this.keyField;
        }
        set {
            this.keyField = value;
            this.RaisePropertyChanged("Key");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(IsNullable=true, Order=1)]
    public string Value {
        get {
            return this.valueField;
        }
        set {
            this.valueField = value;
            this.RaisePropertyChanged("Value");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName) {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null)) {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
}

   public bool MakeOutInvoice(ArrayOfKeyValueOfstringstringKeyValueOfstringstring[] pk, string usergid) {
        LPM.Web.LPTMSFinancialServiceRef.MakeOutInvoiceRequest inValue = new LPM.Web.LPTMSFinancialServiceRef.MakeOutInvoiceRequest();
        inValue.pk = pk;
        inValue.usergid = usergid;
        LPM.Web.LPTMSFinancialServiceRef.MakeOutInvoiceResponse retVal = ((LPM.Web.LPTMSFinancialServiceRef.ILPTMSFinancialService)(this)).MakeOutInvoice(inValue);
        return retVal.MakeOutInvoiceResult;
    } 
```

在我看来，它应该生成与 WCF 相同的参数。为什么它用字典代替生成新的类型参数？谢谢你的帮助！

# jquery - Adjusting length of string when clicked: jQuery

> ID：16027851
> 
> 赞同：-1
> 
> 时间：2013-04-16T02:35:52.307
> 
> 标签：jquery

How do I **adjust the length of a string** when I've clicked on it? Without complicating the entire code.

Something like strlen in php would be the solution.

See: // This

```
var toggleState = true;
$(document).ready(function() {
    $('.more').on("click", function() {
        if(toggleState) {
            $(this).length(unlimited characters); // This
        } else {
            $(this).length(100 characters); // This
        }
        toggleState = !toggleState;
    });
}); 
```

.length(unlimited characters) is just so that you understand what I mean/what I want to do. I need a solution, doesnt have to be length();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:45:26.023

为什么不尝试这样的事情，而不是依赖任意数量的字符呢？

```
<div class="expandable">Blah blah blah blah... Lots of text here</div>
<a href="javascript:void(null);" class="expandlink">More...</a> 
```

然后使用这个 CSS：

```
.expandable {
    display: inline-block;
    width:90%;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}
.expandable.expanded {
    width:auto;
    display:block;
    white-space:normal;
} 
```

而这个jQuery：

```
$(function() {
    $(".expandlink").click(function() {
        $(this.previousSibling.previousSibling).toggleClass("expanded");
        var t = $(this);
        t.text(t.text() == "More..." ? "Less..." : "More...");
    });
}); 
```

[这](http://jsfiddle.net/u3L34/)是一个演示这一点的 JSFiddle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:47:52.077

您可以使用 css 轻松实现此目的。文本溢出：省略号并单击。

[http://jsfiddle.net/nhzDR/](http://jsfiddle.net/nhzDR/)

### HTML

```
<span class="clsshort">This is a very long text used to check how is everythign happening.This is a very long text used to check how is everythign happening.This is a very long text used to check how is everythign happening</span> 
```

### JS

```
$(document).ready(function() {
    $('.clsshort').on("click", function() {
       $(this).toggleClass("clsshort");
    });
}); 
```

### CSS

```
span.clsshort
{
    width:200px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space: nowrap;
    display:inline-block;
} 
```

# c - gcc 静态库链接与动态链接

> ID：16027854
> 
> 赞同：3
> 
> 时间：2013-04-16T02:35:55.167
> 
> 标签：c, gcc, linker, shared-libraries, static-libraries

我的构建环境是**CentOS 5**。我有一个名为 libcunit 的第三方库。我用 autotools 安装了它，它同时生成`libcunit.a`和`libcunit.so`. 我有自己的应用程序，它与一堆共享库链接。`libcunit.a`位于当前目录中`libcunit.so`，其他共享库位于`/usr/local/lib/`. 当我编译时：

```
gcc -o test test.c -L. libcunit.a -L/usr/local/lib -labc -lyz 
```

我收到一个链接错误：

```
libcunit.a(Util.o): In function `CU_trim_left':
Util.c:(.text+0x346): undefined reference to `__ctype_b'
libcunit.a(Util.o): In function `CU_trim_right':
Util.c:(.text+0x3fd): undefined reference to `__ctype_b' 
```

但是当我编译时`.so`：

```
gcc -o test test.c -L/usr/local/lib -lcunit -labc -lyz 
```

它编译得很好，运行也很好。

为什么与静态链接时会出错`libcunit.a`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:50:54.287

> 为什么静态链接时会出错`libcunit.a`

问题是你`libcunit.a`是建立在一个古老的 Linux 系统上的，并且依赖于已被*删除*的`libc`符号（这些符号被用于，并且在 10 多年前`glibc-2.2`被删除）。`glibc-2.3`更准确地说，这些符号是`hidden`. 它们可用于动态链接到旧二进制文件（例如`libcunit.so`），但没有新代码可以静态链接到它们（您不能创建引用它们的新可执行文件或共享库）。

你可以这样观察：

```
readelf -Ws /lib/x86_64-linux-gnu/libc.so.6 | egrep '\W__ctype_b\W'
   769: 00000000003b9130     8 OBJECT  GLOBAL DEFAULT   31 __ctype_b@GLIBC_2.2.5

readelf -Ws /usr/lib/x86_64-linux-gnu/libc.a | egrep '\W__ctype_b\W'
# no output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T03:22:30.373

没有注意到`libcunit.a`实际上在您的案例中找到了，而 linakge 的问题在于 CUnit 库本身。使用俄语是绝对正确的，他在这里不是在谈论预编译的二进制文件。我们了解您是自己构建的。但是，CUinit 本身似乎依赖于`glibc`不再可用于静态链接的符号。因此，您只有 2 个选项：

1.  向 CUnit 的开发人员提交报告并要求他们修复它；
2.  使用动态链接。

尽管如此，我对您的静态链接风格的建议仍然适用。`-L.`通常是**不好的做法**。CUnit 是第 3 方库，不应放置在包含项目源文件的目录中。它应该以与动态版本相同的方式安装，即就像您`libcunit.so`在`/usr/local/lib`. 如果您`prefix`在 CUnit 的配置阶段向 Autotools 提供，那么 Autotools 将正确安装所有内容。因此，如果您想与 CUnit 进行静态链接，请考虑采用以下形式：

```
gcc -o test test.c -L/usr/local/lib -Wl,-Bstatic -lcunit -Wl,-Bdynamic -labc -lyz 
```

# asp.net-mvc - ASP.NET MVC: How to call actions in one batch?

> ID：16027855
> 
> 赞同：2
> 
> 时间：2013-04-16T02:35:56.033
> 
> 标签：asp.net-mvc

In ASP.NET MVC, by default, we call actions which return JsonResult in separate HTTP AJAX requests.

Is there an easy way to call actions in one HTTP AJAX request without changing too much existing code? Suppose these actions all return JsonResult.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T05:03:06.590

您可以查看使用[jQuery.when](http://api.jquery.com/jQuery.when/)，它允许在所有请求完成时执行回调函数。

```
$.when($.ajax("request1"), $.ajax("request2"), $.ajax("request3"))
 .done(function(data1,  data2, data3){
         // Do something with the data
 }); 
```

或者

```
$.when($.ajax("request1"), $.ajax("request2"), $.ajax("request3"))
.then(successCallback, errorHandler); 
```

**更多示例：**

```
function showData(data1, data2) {
    alert(data1[0].max_id);
    alert(data2[0].max_id);
}

function method1() {
    return $.ajax("http://search.twitter.com/search.json", {
        data: {
            q: 'baid_harsh'
        },
        dataType: 'jsonp'
    });
}

function method2() {
    return $.ajax("http://search.twitter.com/search.json", {
        data: {
            q: 'baid_harsh'
        },
        dataType: 'jsonp'
    });
}

$.when(method1(), method2()).then(showData);​ 
```

这是一个工作的[jsFiddle](http://jsfiddle.net/f4hmL/5/)

参考：

1.  [SO - 如何在 jQuery 中进行批量 ajax 请求？](https://stackoverflow.com/a/6986809/468718)
2.  [SO - jQuery.when 理解](https://stackoverflow.com/a/5291067/468718)

# php - PHP SQL查询，逻辑解析结果

> ID：16027862
> 
> 赞同：0
> 
> 时间：2013-04-16T02:37:24.853
> 
> 标签：php, sql, boolean, logic

我正在尝试根据天气生成逻辑条件，或者使用下面的代码在表中没有值。回显的结果返回为 ["0"]。如何解析，以便 php 可以将值解释为布尔值？

```
$rowExists = mysql_query("SELECT EXISTS(SELECT 1 FROM table_name WHERE column_name = value)");

echo "result: ".json_encode(mysql_fetch_row($rowExists)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:46:05.007

```
$result = mysql_query('SELECT COUNT(*) FROM table_name WHERE column_name = value') or die(mysql_error());
$count  = mysql_result($result, 0, 0);

if ($count > 0) {
    echo 'It exists!';
} 
```

# c - 在 Mac 上创建 32 与 64 的 hello world

> ID：16027863
> 
> 赞同：-4
> 
> 时间：2013-04-16T02:37:38.573
> 
> 标签：c

在 Mac 机器上在 32 和 64 上创建 hello world 有什么区别？它会是什么样子？我确实已经安装了 Xcode 和 gcc，但是 gcc 在终端中运行时给了我 64 位错误！？没有尝试 Xcode IDE，因为不知道从哪里开始 hello world！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:08:14.277

> 在 Mac 机器上在 32 和 64 上创建 hello world 有什么区别？

没有任何。无论是针对 32 位还是 64 位架构，编写良好、符合标准的代码都应该没有什么不同。这对于琐碎和复杂的程序都是如此，并且非常有用，因为它允许您维护用于编译这两种类型的可执行文件的单个代码库。在目标架构之间切换应该像翻转编译器开关一样简单。

只有当你做一些特别深奥的事情时，你才需要为不同的“位数”维护不同的代码。在这种情况下，你会看到这样的丑陋：

```
#ifdef __LP64__
  // 64-bit code
#else
  // 32-bit code
#endif 
```

> gcc 在终端运行时给了我 64 位错误！？

由于您既没有发布 1) 您实际尝试过的代码，也没有发布 2) 编译器生成的确切错误，所以我们真正能做的就是猜测。

假设您的代码在编译为 32 位时可以工作，我的猜测是以下两件事之一是正确的：

1.  你做了一个不可移植的假设，在 32 位架构上是正确的，但在 64 位架构上是错误的。不知道它是什么，但编译器应该会告诉你。注意它的警告并修复你的代码（或者如果绝对必要的话，有条件地保护它，如上所示）。

2.  您的 Mac 是旧型号，配备 32 位处理器，不支持 64 位。如果您拥有正确版本的编译器，您可以在 32 位处理器上编译 64 位代码，但您无法*执行*该代码。它只能在 64 位处理器上执行。

> 没有尝试 Xcode IDE，因为不知道从哪里开始 hello world！

这是完全合理的。Xcode 不会在这里为您提供帮助。您专注于两件事：1）您编写的代码，以及 2）编译器生成的错误。终端可让您轻松访问这两件事。

但是，如果您不习惯从命令行工作，那么安装和使用 IDE 并没有什么坏处。您的目标是学习如何对计算机进行编程，而不是在能够使用终端时炫耀您的极客信誉。如果 GUI 让您更容易阅读和理解正在发生的事情，那么请使用它。

# jquery - socket io - 向单个套接字发送消息

> ID：16027864
> 
> 赞同：0
> 
> 时间：2013-04-16T02:37:54.847
> 
> 标签：jquery, sockets, socket.io, emit

它最初是一个 lynda.com 教程项目

我已经尝试过并*试图让它*发挥作用。我希望能够向特定的聊天成员发送消息（向一个套接字发送消息）。

我看着这个，我*仍然*无法让我的工作。 [Socket.IO - 如何获取已连接套接字/客户端的列表？](https://stackoverflow.com/questions/6563885/socket-io-how-do-i-get-a-list-of-connected-sockets-clients)

我已经尽可能多地删掉了这不是这个问题的一部分。

第一个文件：

```
var io = require('socket.io'), connect = require('connect'), chatter = require('./chatter.js');

var app = connect().use(connect.static('public')).listen(process.env.PORT || 3000);
var chatRoom = io.listen(app);

chatter.setSockets(chatRoom.sockets);

chatRoom.sockets.on("connection", function(socket){
 chatter.connectChatter({
  socket: socket,
  username: socket.id
 });
}); 
```

第二个文件：

```
 var allSockets = null;
        var members = [];

        exports.setSockets = function(sockets){
         allSockets = sockets;
        }

        exports.connectChatter = function(config){
         var exists = false;
         var self;
         for(var i = 0; i < members.length; i++){
          if(members[i].userName == config.username){
           exists = true;
           break;
          }
         }
         if(!exists){
          self = {userName:config.username};
          members.push(self);
         }

         config.socket.emit("welcome",{user:self});
         allSockets.emit("getUsers",{users:members});

        config.socket.on("chat", function(data){

    allSockets.emit("chat", {message:data.message}); //works just fine
             sockets[socket].emit("chat", {message:data.message}); //WILL NOT WORK
             sockets[0].emit("chat", {message:data.message}); //WILL NOT WORK
             socket[0].emit("chat", {message:data.message}); //WILL NOT WORK
             allSockets[socket].emit("chat", {message:data.message}); //WILL NOT WORK
             allSockets[0].emit("chat", {message:data.message}); //WILL NOT WORK

             allSockets.socket(0).emit('chat', {message:data.message}); //DOES NOTHING, BUT DOES NOT BREAK APP 
```

请帮忙。我敢肯定这是愚蠢或愚蠢的事情。我对此很陌生。我只是不知道语法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:13:13.013

好的，让它工作。不知道为什么 Lynda.com 采用这种编码布局，而其他人似乎只是采用 io.sockets.socket 风格。

第一个文件：

```
var io = require('socket.io'), connect = require('connect'), chatter = require('./chatter.js');

var app = connect().use(connect.static('public')).listen(process.env.PORT || 3000);
var chatRoom = io.listen(app);

chatter.setSockets(chatRoom.sockets);

chatRoom.sockets.on("connection", function(socket){
chatter.addSocket(socket);
 chatter.connectChatter({
  socket: socket,
  username: socket.id
 });
}); 
```

第二个文件：

```
var socketList = [];
exports.addSocket = function(s){
 socketList.push(s);
}

var allSockets = null;
        var members = [];

        exports.setSockets = function(sockets){
         allSockets = sockets;
        }

        exports.connectChatter = function(config){
         var exists = false;
         var self;
         for(var i = 0; i < members.length; i++){
          if(members[i].userName == config.username){
           exists = true;
           break;
          }
         }
         if(!exists){
          self = {userName:config.username};
          members.push(self);
         }

         config.socket.emit("welcome",{user:self});
         allSockets.emit("getUsers",{users:members});

        config.socket.on("chat", function(data){
        socketList[0].emit("chat", {message:data.message});
} 
```

希望这对将来的某人有所帮助。

# io - MIPS 文件打开

> ID：16027871
> 
> 赞同：2
> 
> 时间：2013-04-16T02:38:42.120
> 
> 标签：io, mips

我正在尝试使用 MIPS Syscall 13 来简单地打开一个文件，以便我可以读取一些字符串并将它们打印到控制台，但是当我打开文件时文件描述符一直返回为 -1。我检查了文件扩展名，一切似乎都井井有条。在与源代码相同的目录中有一个名为“cards.dat”的文件。这是我的代码。如果有人可以提供帮助，将不胜感激。

```
.data
filename: .asciiz "cards.dat" #file name
textSpace: .space 1050     #space to store strings to be read

.text
main:

li $v0, 13           #open a file
li $a1, 0            # file flag (read)
la $a0, filename         # load file name
add $a2, $zero, $zero    # file mode (unused)
syscall
move $a0, $v0        # load file descriptor
li $v0, 14           #read from file
la $a1, textSpace        # allocate space for the bytes loaded
li $a2, 1050         # number of bytes to be read
syscall  
la $a0, textSpace        # address of string to be printed
li $v0, 4            # print string
syscall 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T20:31:18.140

如果你给 MIPS 一个文件名，就像你在你的代码中一样。MIPS .jar 必须与文件位于同一目录中；不是你的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:21:15.293

当您使用相对路径时，您必须确保工作目录是您期望的目录。也就是说，`cards.dat`需要在程序的工作目录中。代码似乎很好。`filename`如果您知道要打开的文件的确切位置，请尝试使用绝对路径。

例如：

```
filename: .asciiz "c:\\files\\cards.dat" #file name 
```

您可以尝试获取工作目录的另一件事是在您的代码中创建一个文件，然后查看创建该文件的文件系统......为此，使用`$a1`设置为 1（写入标志）的服务 13。

另外，使用后不要忘记使用服务 16 关闭文件句柄。这是您绝对应该做的最佳实践之一。

# extjs4.1 - 如何注册网格列的隐藏事件 Extjs

> ID：16027874
> 
> 赞同：0
> 
> 时间：2013-04-16T02:38:57.930
> 
> 标签：extjs4.1, extjs4.2

有谁知道如何/在哪里注册网格列的隐藏事件？我想知道网格的列何时被隐藏或取消隐藏。

我在 Columns.js 中什么也看不到 我在 Ext.grid.ColumnModel 中看到了一些东西，但是如何在我的控制器中注册 hiddenchange 事件？

我的网格只是一个简单的网格，列数组中定义了列。

```
columns: [
       {//ID
            xtype:'templatecolumn', 
            tpl:'some template',
            header: 'ID',
            hideable:true,
            width:30,
            hidden:false,
            ...
            //other stuff
       },
       ...
       {
        //other columns
       } 
```

我想要做的是在我的控制器寄存器中当用户隐藏一列时得到通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:55:45.927

在控制器中注册您的网格列事件

```
control = {
'#gridId gridcolumn':{ 
    beforehide:function( ths, eOpts ){
      //do whatever
    },
    beforeshow:function( ths, eOpts ){
      //do whatever
    }
} 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-event-beforehide](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-event-beforehide) [http://docs.sencha.com/ext-js/4- 1/#!/api/Ext.grid.column.Column-event-beforeshow](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-event-beforeshow)

不知道我是怎么错过的……我想我熬夜到很晚。

# sql - 在 2008 R2 中创建日期时间序列

> ID：16027875
> 
> 赞同：0
> 
> 时间：2013-04-16T02:39:02.483
> 
> 标签：sql, sql-server-2008-r2

我需要在临时表中创建一个带有分钟可变时间增量的日期时间序列。输出应该类似于使用 5 时的样子

```
2012-12-13 04:20:00.000
2012-12-13 04:25:00.000
2012-12-13 04:30:00.000
2012-12-13 04:35:00.000
2012-12-13 04:40:00.000
2012-12-13 04:50:00.000 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:47:07.903

```
WITH DateTimeSequence
AS
(
  SELECT CONVERT(datetime, '2012-12-13 04:20:00', 120) AS [datetime]    -- Start Date
  UNION ALL
  SELECT DATEADD(mi, 5, [datetime])
  FROM   DateTimeSequence
  WHERE  DATEADD(mi, 5, [datetime]) <= CONVERT(datetime, '2012-12-13 04:50:00', 120)      -- End Date
)
SELECT [datetime]
FROM   DateTimeSequence 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d41d8/12474)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:06:45.033

我建议使用序列表——每个数据库都应该有一个，因为它们非常有用，可以快速轻松地生成日期时间序列。

```
CREATE TABLE Sequence
(Number int PRIMARY KEY) 
```

现在用从 0 到 1,000,000 的整数填充这个表——别担心，你只需要这样做一次。

然后，您可以根据需要生成日期时间序列（最多 1,000,001），其变体为

```
SELECT DATEADD(minute, Number * @stepsize, @StartDateTime)
FROM Sequence
WHERE Number<@NumberRequired 
```

看到这个[SQL Fiddle](http://sqlfiddle.com/#!3/0514d/6)

这通常比使用 CTE 更快，并且几乎与直接从表中检索信息一样快。事实上，您可能会考虑不使用临时表，而是使用它构建一个 SP（或表值函数），因为它的速度大致相同并且更加灵活。

# c++ - 如何从程序中删除日志调试语句

> ID：16027876
> 
> 赞同：5
> 
> 时间：2013-04-16T02:39:10.460
> 
> 标签：c++, logging, boost

我正在`boost::log`用作我的 C++ 程序的记录器。在开发过程中我经常这样使用它，例如：

```
#define LOG(severity) BOOST_LOG_SEV(boost::logger::get(), (severity))
#define LOG_ERR LOG(Severity::error)
#define LOG_INFO LOG(Severity::info)
#define LOG_DEBUG LOG(Severity::debug) 
```

`BOOST_LOG_SEV`,提供的设施在哪里`boost::log`, 而`LOG`, `LOG_ERROR`, `LOG_INFO`,`LOG_DEBUG`是我定义的快捷方式。

简而言之，`BOOST_LOG_SEV`动态比较当前调试严重性与传递给宏本身的严重性，以决定是否发出输出。

这是使用上述宏进行调试的程序示例：

```
// set at compile time
#define MAX_LOG_SEVERITY Severity::debug

int main() {
   // Print all the messages with a
   // Severity <= MAX_LOG_SEVERITY defined before compiling
   boost::log::set_severity(boost::logger::get(), MAX_LOG_SEVERITY); // set_severity() is fictitious just to give you an idea

   // bool err = ...
   if (err)
      LOG_ERR << "An error occurred";
   else 
      LOG_INFO << "Okay;
   LOG_DEBUG << "main() called";
} 
```

现在，在为生产环境发布程序时，使用`Severity::debug`级别调试消息并没有真正意义。我可以通过简单地将它们从输出中减少`MAX_LOG_SEVERITY`到`Severity::info`，但问题是`LOG_DEBUG`不会从可执行代码中删除由 发出的调用。这对效率和对象大小都有不良影响。

代码中充满了日志语句，我真的很想保留`operator<<()`.

在不触及这些语句本身的情况下，是否有更好的宏定义/技巧`LOG_DEBUG`可以使预处理器或编译器（在其优化期间）在`MAX_LOG_SEVERITY`设置为`Severity::debug`常量时“跳过”或“删除”调试语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T03:28:58.033

虽然我不能做出任何保证，但这样的事情可能会奏效。这取决于您的优化器所做的事情以及您对 operator<< 的参数是否有副作用。

```
#ifdef NO_LOG_DEBUG

static class DevNull
{
} dev_null;

template <typename T>
DevNull & operator<<(DevNull & dest, T)
{
    return dest;
}

#define LOG_DEBUG dev_null

#else

#define LOG_DEBUG LOG(Severity::debug)

#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T02:22:25.863

@MartinShobe 接受的答案适用于：

*   g++ (4.7.2)`-O1`及更高版本
*   clang++ (3.4)`-O2`及更高版本
*   带有链接器标志的 Visual Studio (2008)`/OPT:REF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-29T13:30:37.690

接受的答案对我不起作用（MSVC 2019，stdc++17）。

我的解决方案有点古怪。但是优化绝对应该照顾它：

```
#ifdef NDEBUG
#define LOG_DEBUG if (false) std::cout
＃别的
#define LOG_DEBUG if (true) std::cout
＃万一

```

用法：

```
LOG_DEBUG << ... << std::endl;

```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-16T03:04:05.727

关闭程序中的所有优化并加速编译。

/Od 或 boot_log_stop

# javascript - highcharts 工具提示不适用于被黑的甘特图

> ID：16027877
> 
> 赞同：1
> 
> 时间：2013-04-16T02:39:19.563
> 
> 标签：javascript, charts, highcharts

我使用 highcharts 破解的甘特图的工具提示似乎无法正常工作。我从这里使用了 highcharts 团队提供的甘特图：

[http://jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)

我正在使用 UnixTime，这似乎以某种方式抛弃了工具提示。这里-：

[http://jsfiddle.net/bootkick/NFS5M/](http://jsfiddle.net/bootkick/NFS5M/)

```
// Define tasks
var tasks = [{
"name": "a",
    "intervals": [{
    "from": 1366005607000,
        "to": 1366006490000
}]
}, {
"name": "b",
    "intervals": [{
    "from": 1366059607000,
        "to": 1366061858000
}, {
    "from": 1366056006000,
        "to": 1366058223000
}, {
    "from": 1366047007000,
        "to": 1366049299000
}, {
    "from": 1366034407000,
        "to": 1366036682000
}, {
    "from": 1366030808000,
        "to": 1366033050000
}, {
    "from": 1366027208000,
        "to": 1366029512000
}, {
    "from": 1366018209000,
        "to": 1366021296000
}]
}, {
"name": "c",
    "intervals": [{
    "from": 1366018209000,
        "to": 1366019966000
}]
}, {
"name": "d",
    "intervals": [{
    "from": 1366005607000,
        "to": 1366047612000
}, {
    "from": 1366002007000,
        "to": 1366002202000
}]
}];

// re-structure the tasks into line seriesvar series = [];
var series = [];
$.each(tasks.reverse(), function (i, task) {
var item = {
    name: task.name,
    data: []
};
$.each(task.intervals, function (j, interval) {
    item.data.push({
        x: interval.from,
        y: i,
        label: interval.label,
        from: interval.from,
        to: interval.to
    }, {
        x: interval.to,
        y: i,
        from: interval.from,
        to: interval.to
    });

    // add a null value between intervals
    if (task.intervals[j + 1]) {
        item.data.push(
        [(interval.to + task.intervals[j + 1].from) / 2, null]);
    }

});

series.push(item);
});

// create the chart
var chart = new Highcharts.Chart({

chart: {
    renderTo: 'container'
},

title: {
    text: 'Daily activities'
},

xAxis: {
    type: 'datetime'
},

yAxis: {
    tickInterval: 1,
    labels: {
        formatter: function () {
            if (tasks[this.value]) {
                return tasks[this.value].name;
            }
        }
    },
    startOnTick: false,
    endOnTick: false,
    title: {
        text: 'Activity'
    },
    minPadding: 0.2,
    maxPadding: 0.2
},

legend: {
    enabled: false
},

tooltip: {
    formatter: function () {
        return '<b>' + tasks[this.y].name + '</b><br/>' + Highcharts.dateFormat('%H:%M', this.point.options.from) +
            ' - ' + Highcharts.dateFormat('%H:%M', this.point.options.to);
    }
},

plotOptions: {
    line: {
        lineWidth: 9,
        marker: {
            enabled: false
        },
        dataLabels: {
            enabled: true,
            align: 'left',
            formatter: function () {
                return this.point.options && this.point.options.label;
            }
        }
    }
},

series: series

}); 
```

我对 Javascript 和 Highcharts 比较陌生，所以如果有的话，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:19:25.937

我想到了。问题是名称/类别中的从、到时间戳对不是按升序排列的。为了使工具提示正常工作，它们需要按升序排列，这有点奇怪。

# c++ - 提升 json 序列化和 message_queue 段错误

> ID：16027878
> 
> 赞同：0
> 
> 时间：2013-04-16T02:39:20.053
> 
> 标签：c++, serialization, message-queue, boost-interprocess, boost-propertytree

我正在使用 boost 进程间和 ptree 结构进行一些测试，当我尝试读取发送的消息时（或者当我尝试在 json 中解析它时）出现段错误。

我在 debian linux 上使用 boost1.49。

我在 json 中序列化它以供以后使用，并且因为我没有找到任何用于直接序列化 boost 属性三的好文档。

这是我用来测试的代码（commed 说段错误在哪里）：

接收文件

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/interprocess/ipc/message_queue.hpp>
#include <sstream>

struct test_data{
    std::string action;
    std::string name;
    int faceID;
    uint32_t Flags;
    uint32_t freshness;
};

test_data recvData()
{
    boost::interprocess::message_queue::remove("queue");
    boost::property_tree::ptree pt;
    test_data data;
    std::istringstream buffer;
    boost::interprocess::message_queue mq(boost::interprocess::open_or_create,"queue", 1, sizeof(buffer)
    boost::interprocess::message_queue::size_type recvd_size;
    unsigned int pri;
    mq.receive(&buffer,sizeof(buffer),recvd_size,pri);
    std::cout << buffer.str() << std::endl; //the segfault is there
    boost::property_tree::read_json(buffer,pt);
    data.action = pt.get<std::string>("action");
    data.name = pt.get<std::string>("name");
    data.faceID = pt.get<int>("face");
    data.Flags = pt.get<uint32_t>("flags");
    data.freshness = pt.get<uint32_t>("freshness");
    boost::interprocess::message_queue::remove("queue");
    return data;
}   

int main()
{
    test_data test;
    test = recvData();
    std::cout << test.action << test.name << test.faceID << test.Flags << test.freshness << std::endl;
} 
```

发件人.cc

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/interprocess/ipc/message_queue.hpp>
#include <sstream>

struct test_data{
    std::string action;
    std::string name;
    int faceID;
    uint32_t Flags;
    uint32_t freshness;
};

int sendData(test_data data)
{
    boost::property_tree::ptree pt;
    pt.put("action",data.action);
    pt.put("name",data.name);
    pt.put("face",data.faceID);
    pt.put("flags",data.Flags);
    pt.put("freshness",data.freshness);
    std::ostringstream buffer;
    boost::property_tree::write_json(buffer,pt,false);
    boost::interprocess::message_queue mq(boost::interprocess::open_only,"chiappen")
    std::cout << sizeof(buffer) << std::endl;
    mq.send(&buffer,sizeof(buffer),0);
    return 0;
}

int main ()
{
    test_data prova;
    prova.action = "registration";
    prova.name = "prefix";
    prova.Flags = 0;
    prova.freshness = 52;
    sendData(prova);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T04:21:26.953

我知道现在回答有点晚了，但无论如何..您不能将 istringstream 作为接收缓冲区传递。Boost 消息队列只处理原始字节，不处理类似 std 的对象。

要使其工作，您必须使用一个 char 数组或以前用 malloc 保留的任何缓冲区。

前任：

```
char buffer [1024];
mq.receive(buffer, sizeof(buffer), recvd_size, pri); 
```

对于发送它是一样的，你只能发送原始字节，所以你不能使用ostringstream。

希望能帮助到你。

# forms - 带有关键字'#'的from url模式，它不能工作

> ID：16027879
> 
> 赞同：1
> 
> 时间：2013-04-16T02:39:28.920
> 
> 标签：forms, url, rewrite

例如：

`<rule> <from>^/create#name=(.*)$</from> <to>/page/new/success.jsp?name=$1</to> </rule>`

当我输入“/create#name=elvis”这样的uri时，它无法重写并转发到新地址，我现在该怎么办，如何对符号'#'进行转码

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:02:29.707

像这样的工作（逃避`#`标志）吗？

添加类型转发：

```
<rule>
  <from>/create\#name=(.*)</from>
  <to type="forward">/page/new/success.jsp?name=$1</to>
</rule> 
```

添加类型重定向：

```
<rule>
  <from>/create\#name=(.*)</from>
  <to type="redirect">/page/new/success.jsp?name=$1</to>
</rule> 
```

# php - 自定义验证码显示错误数字

> ID：16027885
> 
> 赞同：0
> 
> 时间：2013-04-16T02:39:56.300
> 
> 标签：php

我正在创建一个自定义验证码，它运行良好，但有时它会从中选择一个`$rand_keys`大于显示框数的随机数。我该如何解决？

```
$color = array("red", "blue", "yellow", "white", "green", "purple", "brown", "orange", "pink", "black");
$random_num_box = mt_rand(3,8);

$numbers=array(0,1,2,3,4,5,6,7,8,9);

$rand_keys = array_rand($numbers, $random_num_box);
$ran_box =  mt_rand(0, $random_num_box);

echo "Random number of boxes:  ".$random_num_box."<br /><br />";
echo "<div>";
foreach ($rand_keys as $k=>$v) {
    echo "<div style='width: 20px; height: 20px; border: 1px solid #dcdcdc; margin-right: 2px; display: inline-block; background: ".$color[$numbers[$v]].";'></div>";
}
echo "</div>";

echo "<br />What is the color of box # ". ($ran_box + 1) ."?";
echo "<br />Answer:  ".$color[$rand_keys[$ran_box]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:09:48.257

问题是偶尔你会得到一个比显示的盒子数量大的随机选择的数字。这似乎源于以下两行：

```
$rand_keys = array_rand($numbers, $random_num_box);
$ran_box =  mt_rand(0, $random_num_box); 
```

由于这很难模拟，由于是随机的，最简单的方法是想出一个例子来证明它不起作用。

从研究中，您会发现`array_rand`将采用一个数组并根据第二个参数随机选择项目的数量，在这种情况下为`$random_num_box`。所以我们有以下数组：

```
array(
 [0] => 1,
 [1] => 2,
 [2] => 3
) 
```

现在我们继续得到随机答案（`$ran_box`）。参数将是（对于这个例子）`$random_num_box = 3;`所以运行的命令是

```
$ran_box =  mt_rand(0, 3); 
```

您将获得一个介于 0 和 3（包括）之间的值。由于您的数组的大小仅为 3 (0->2)，因此当您的随机数为 3（或 ）时，您将收到错误消息`$random_num_box`。这是由于试图访问`array[3]`不存在的。

要解决此问题，您必须将最大值减少 1。

```
$rand_keys = array_rand($numbers, $random_num_box);
$ran_box =  mt_rand(0, $random_num_box - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:18:39.463

我认为您只需要从中减去 1`$ran_box`

```
$ran_box =  mt_rand(0, $random_num_box-1); 
```

# python - 创建函数时出现语法错误

> ID：16027887
> 
> 赞同：1
> 
> 时间：2013-04-16T02:40:00.253
> 
> 标签：python

我对 python 很陌生，并且正在研究它。我正在尝试创建一个将创建时间消息的函数。我的代码中的“年份”一词再次突出显示并显示它是无效的语法。代码目前不完整，我需要修复一些问题，我现在有点迷失了。

**我要解决的问题是：**

创建函数时间消息

参数：无

正文：从时间模块导入 asctime 函数使用 asctime 函数中的星期几、空间、月份、空间、日期、空间、年份、空间时间创建新时间线返回新时间线

**我的代码：**

```
def timeMessage():

    from time import asctime
    from time import localtime
    asctime
    localtime
    myTime = timestring
    myTime = myTime.split(" ")
    newTimeline = week + " " + month + " " + day + " " year + " " + localtime
    return newTimeline 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:42:42.500

您需要添加`+`显示您`year`在`" "`.

像这样：

```
def timeMessage():

    from time import asctime
    from time import localtime
    asctime
    localtime
    myTime = timestring
    myTime = myTime.split(" ")
    newTimeline = week + " " + month + " " + day + " " + year + " " + localtime
    return newTimeline 
```

# ios - 如何从 NSDictionary 中的 NSDictionaries 获取所有值？

> ID：16027894
> 
> 赞同：0
> 
> 时间：2013-04-16T02:40:32.520
> 
> 标签：ios, objective-c, json, nsdictionary, flickr

我正在使用 flickr，在示例获取中我得到了这个：

```
{
    "api_key" =     {
        "_content" = 3c6eeeae4711a5f478d3da796750e06b;
    };
    format =     {
        "_content" = json;
    };
    method =     {
        "_content" = "flickr.test.echo";
    };
    nojsoncallback =     {
        "_content" = 1;
    };
    stat = ok;
} 
```

这是一个包含 5 个条目（api_key、format、method、nojsoncallback 和 stat）的字典。前 4 个整体本身就是字典。

首先，我的原始字典中有第 5 个元素，它不是字典，它只是原始字典中的最后一个条目（一个 stat=ok）。此外，我希望每个子条目中的 _content 键出现在我的单个单元格中，但我不想硬编码任何值。我**必须**设置一个数组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T04:11:32.620

`NSDictionary`有一个漂亮的小方法叫做[`valueForKeyPath`](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/valueForKeyPath%3a). 这就是你的救星。

```
[dict valueForKeyPath:@"api_key._content"]
[dict valueForKeyPath:@"format._content"]
[dict valueForKeyPath:@"method._content"]
[dict valueForKeyPath:@"nojsoncallback._content"] 
```

它所做的是遍历键路径并获取`content`每个 JSON 子结构中的值。否则，您将不得不编写一个`for-loop`并循环遍历它。整齐吧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:11:41.597

尝试这个

```
for (NSString *key in dictionary){
    id object = dictionary[key];
    if ([object isKindOfClass:[NSDictionary class]]) {
    //Now you can work on the dictionary object
    }
} 
```

# ruby-on-rails - 如何在 FactoryGirl 中使用自加入关联？

> ID：16027895
> 
> 赞同：2
> 
> 时间：2013-04-16T02:40:47.300
> 
> 标签：ruby-on-rails, factory-bot

我有两个简单的工厂：

```
factory :parent_category, :class => Category do 
  name "Garden"
  parent_id 0
  display_order 1
 end

factory :category do
  association           :parent_id, factory: :parent_category
  name                  "Tools"
  associated_categories ""
  postfix_to_display    ''
  display_order         1
end 
```

但是，当我尝试使用以下方法生成工厂时：

```
f = FactoryGirl.create(:category) 
```

我收到以下错误：

```
NoMethodError: undefined method `to_i' for #<Category:0x007fdf50495c00> 
```

我正在使用 Rails 3.2.12 和 FactoryGirl 4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:46:50.507

尝试：

```
factory :category do
  association :parent, factory: :parent_category
  ...
end 
```

# foreign-keys - 连接三个表的外键

> ID：16027896
> 
> 赞同：1
> 
> 时间：2013-04-16T02:40:47.243
> 
> 标签：foreign-keys

我在这个论坛上发现了类似的问题，但其中任何一个都可以让我想到一个解决方案，所以我认为有人可以知道答案。

我有这个数据库场景：

商品、供应商和订单。这些是表，我还有另外两个表：orders_merchandises 和suppliers_merchandises。

这些表是这样的：

```
merchandises
 -id
 -name

suppliers
 -id
 -name

orders
 -id
 -supplier_id

orders_merchandises
 -order_id
 -merchandise_id

suppliers_merchandises
 -supplier_id
 -merchandise_id 
```

规则是：

供应商只能提供他们能够提供的商品。所以，我有表suppliers_merchandises 来为每个供应商注册他们提供给商店的商品。

因此，订单必须限制供应商仅提供在供应商商品中“预先记录”的商品。

我希望我能解释得足够清楚。

所以，我需要多个表的外键，如下所示：

```
ALTER TABLE suppliers_merchandises
ADD FOREIGN KEY FK_NAME (supplier_id, merchandise_id)
REFERENCES (orders.supplier_id, orders_merchandises.merchandise_id) 
```

但是，不幸的是，这不起作用。

任何人都知道是否有任何方法可以做我想做的事？

它可以在任何 dbms 中。SQLServer、Firebird 或任何其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-02T08:11:11.347

使用复合键和关系：

*   将`supplier_id`列添加到`orders_merchandises`
*   做一个 FK 从`orders_merchandises`到`order`on`(order_id, supplier_id)`
*   创建一个 FK 从`orders_merchandises`到`supplier_merchandises`on`(supplier_id, merchandise_id)`

这会将来自供应商的订单锁定为仅适用于在供应商商品中为他们找到的商品。

您可能希望将主键从代理项更改为复合项，并丢弃现有的竞争 FK。

# php - 安全地取回以表格形式呈现的信息 (PHP)

> ID：16027897
> 
> 赞同：0
> 
> 时间：2013-04-16T02:41:07.617
> 
> 标签：php, forms

假设我有一个如下所示的表单：

```
<form action="/script.php" method="post">
<input name="my_input" length="80" />
<input type="submit" value="submit" />
</form> 
```

现在我还想包含一个数字标识符 - 称之为票证 ID。“这是机票历史记录，您要添加一些内容吗？” 用户不能修改它。

我的问题是......在表单提交中获取该票证 ID 的最安全方法是什么？

完成它没问题，但我的问题是关于安全性。因此，这是我能想到的获取变量的方法：

```
<form action="/script.php" method="post">
<input name="my_input" length="80" />
<input type="hidden" name="ticket_id" value="12345" />
<input type="submit" value="submit" />
</form> 
```

或者

```
<form action="/script.php?ticket_id=12345" method="post">
<input name="my_input" length="80" />
<input type="submit" value="submit" />
</form> 
```

我担心有人可能会制作恶意 POST 并将其提交并将他们的评论附加到不同的票证上。即，从他们自己的服务器/浏览器/工具编写一个 POST。如果我使用 GET 执行此操作，那么他们当然可以通过更改 url 变量来执行此操作 - 也可以使用 POST 执行此操作，对吗？

当然，我可以检查用户是否拥有该票证并进行其他一些验证，但从根本上说，您如何向用户呈现数据并以 HTML 表单安全地再次将其取回？

除了在服务器端创建一个唯一的序列号（“FORM 12345 应该显示票证 id 6789”）记录，然后再检查它之外，还有什么其他的吗？

我在后端使用 PHP 和 MySQL，但我不确定我的问题是否特定于这些技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:24:22.660

使用会话 form.php

```
<?
session_start();
$_SESSION['ticket_id'] = '1234';
?> 
```

脚本.php

```
<?
session_start();
$ticket_id = $_SESSION['ticket_id'];
?> 
```

# ios - ipad 上的谷歌网页字体

> ID：16027900
> 
> 赞同：0
> 
> 时间：2013-04-16T02:41:17.157
> 
> 标签：ios, css, web, fonts, font-face

我正在为我的网站使用一些谷歌网络字体，阿拉伯字体，来自这里[http://www.google.com/fonts/earlyaccess](http://www.google.com/fonts/earlyaccess)

我在我的 css 中导入这些字体

```
@import url(http://fonts.googleapis.com/earlyaccess/droidarabickufi.css);
@import url(http://fonts.googleapis.com/earlyaccess/droidarabicnaskh.css); 
```

字体在任何地方都可以正常工作，但在 ipad 上却不行。我试图用谷歌搜索这个问题，我想出了这个建议 SVG的[Stack question 。](https://stackoverflow.com/questions/13600147/svg-fonts-not-working-on-ios)有关如何为 Google 网络字体获取 SVG 的任何线索？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:19:23.843

我解决了，谷歌字体在这些字体的默认值中没有 SVG 格式，我必须下载它们并获取 SVG 格式，重新包含我的字体，到目前为止它在[iPad Peek](http://ipadpeek.com/)上运行良好，测试它们并得到最终反馈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:47:19.867

我尚未阅读所有使用条款，但它们允许您下载字体。我相信您可以将该字体带到[Font Squirrel](http://www.fontsquirrel.com/tools/webfont-generator)，它会为您生成所需的字体类型（和 CSS @font-face 样式），因此您可以自己托管字体。

# subdomain - 使用 robots.txt 禁止子域 url

> ID：16027901
> 
> 赞同：0
> 
> 时间：2013-04-16T02:41:18.513
> 
> 标签：subdomain, robots.txt

我想问你一个问题...

我有一个域 kiosban.com 和 store.kiosban.com..

我想禁止

```
store.kiosban.com/template/* 
```

我的 store.kiosban.com/robots.txt 上有这个

但是当我查看谷歌网站管理员工具时......在健康菜单>>被阻止的网址上，我得到了

```
robots.txt file                         Blocked URLs    Downloaded  Status
http://www.store.kiosban.com/robots.txt -             Never 
```

我做错什么了吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T10:54:37.573

`www.store.kiosban.com`并且`store.kiosban.com`是不同的主机。您应该在两台主机上都提供 robots.txt，或者更好的是 301 将一种形式重定向到另一种形式。

但这似乎不是你的问题。看起来谷歌只需要一些时间来抓取您的网站。它的 robots.txt。

# mysql - 下面的 SQL 查询是否有效？

> ID：16027902
> 
> 赞同：0
> 
> 时间：2013-04-16T02:41:34.670
> 
> 标签：mysql, sql, performance, database-performance

是否存在更好的方法来执行以下 SQL 查询的功能？我感觉 table1 将被搜索两次，可能可以通过一些技巧来避免这种情况并提高查询的效率，但我就是不知道如何；（这是查询（在 MySQL 中）：

```
SELECT a, SUM(count)
FROM table1
GROUP BY a
HAVING SUM(count) = (SELECT SUM(count) as total FROM table1 GROUP BY a ORDER BY total DESC LIMIT 1) 
```

目标是返回带有主要累加的数字及其累加。

作为 table1 两个字段表，如：

```
a,count
1,10
1,30
1,0
2,1
2,100
2,4
3,10
4,50
4,55 
```

该数据样本的结果是：

```
2,105
4,105 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:51:05.480

```
SELECT a, total FROM 
(SELECT a AS a, SUM(COUNT) AS total
FROM table1
GROUP BY a) AS xyz 
HAVING total = MAX(total) 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:34:39.163

此查询返回包含两列的一行：

1-“a”列的逗号分隔值列表，其中具有最大的“Total”

2- 和最大的总价值

```
select group_concat(a), Total
from
(select a, sum(count) as Total
from table1
group by a) OnTableQuery
group by Total
order by Total desc
limit 1 
```

请注意，它只查询 table1 一次。该查询已经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:49:11.847

我认为您可以通过将您的 HAVING 子选择查询移动到其预查询中来做到这一点。由于它将始终包含一行，因此您不需要任何“JOIN”，并且每次应用 HAVING 时都不必继续重新计算 COUNT(*)。做一次，然后剩下的

```
SELECT 
      a, 
      SUM(count)
   FROM 
      table1,
      ( SELECT SUM(count) as total 
           FROM table1 
           GROUP BY a 
           ORDER BY total DESC 
           LIMIT 1 ) PreQuery
   GROUP BY 
      a
   HAVING 
      SUM(count) = PreQuery.Total 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T05:02:37.477

此子查询仅执行一次，您不必费心创建任何预查询，因为其他答案可能会建议（尽管这样做仍然是正确的，只是不需要）。数据库引擎将意识到，子查询没有使用任何依赖于查询其他部分的变量。您可以使用`EXPLAIN`来查看查询是如何执行的。

更多关于这个答案的主题： [https ://stackoverflow.com/a/658954/1821029](https://stackoverflow.com/a/658954/1821029)

# ruby-on-rails - 让用户通过表单选择关联模型是否存在安全风险？

> ID：16027904
> 
> 赞同：1
> 
> 时间：2013-04-16T02:41:57.897
> 
> 标签：ruby-on-rails, security, activerecord

我有一个用户有客户，客户有费用。我有一个创建新费用的表单，用户需要在该表单上选择费用用于哪个客户。我是这样做的：

```
= form_for(@expense) do |f|
...
   = f.select :client_id, options_from_collection_for_select(@possible_clients, "id", "name"), {:include_blank => true}, :class => "span10" 
```

和控制器：

```
def create
    @expense = Expense.new(params[:expense])
    @expense.user = current_user
    @expense.date = convert_to_db_date(params[:expense][:date])

    respond_to do |format|
      if @expense.save
        format.html { redirect_to expenses_path }
        format.json { render json: @expense, status: :created, location: @expense }
      else
        format.html { render action: "new" }
        format.json { render json: @expense.errors, status: :unprocessable_entity }
      end
    end
  end 
```

和费用模型：

```
 belongs_to :client
  belongs_to :user
  belongs_to :invoice

  ## ACCESSIBLE ##
  attr_accessible :amount, :category, :date, :invoice_id, :note, :reimbursed, :user_id, :client_id 
```

和客户端模型：

```
 belongs_to :user
  has_many :contacts, :dependent => :destroy
  has_many :invoices
  has_many :expenses 
```

所以我只是认为这里有一个很大的安全问题。由于用户可以为与费用相关联的客户提交任何 ID……他们可以分配任何客户，对吧？有没有更好的方法来做到这一点？是否有一些防止安全问题的 Rails 魔法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:56:09.060

你是对的，这是一个安全问题。如果您需要限制对关联记录的访问，您应该始终从服务器端的受限集中进行选择——不要相信客户端会尊重您的意愿。我会从中删除`client_id`，`attr_accessible`并且只允许手动分配它。

处理此问题的最佳方法是创建一个处理费用管理的新类，但如果您正在寻找快速修复，您可以使用控制器操作（但请注意：我不会将其留在控制器中在长期）。

从参数中提取客户 ID，使用它从当前用户的客户中获取记录，然后手动将其分配给费用：

```
client_id = params[:expense].delete(:client_id)
@expense = current_user.expenses.new(params[:expense])
@expense.client = current_user.clients.find(client_id) 
```

# mongodb - 从 MongoDB 集合中选择加权随机文档

> ID：16027906
> 
> 赞同：5
> 
> 时间：2013-04-16T02:42:10.543
> 
> 标签：mongodb, random

[我知道 MongoDB实际上还不支持](https://jira.mongodb.org/browse/SERVER-533)随机记录选择，但我找到了[一些解决方法](https://stackoverflow.com/questions/2824157/random-record-from-mongodb)。

但是，我想选择一个*加权*随机项。使用[mySql 相当容易](https://stackoverflow.com/questions/2417621/mysql-select-random-entry-but-weight-towards-certain-entries)，但我不确定使用 Mongo 的最佳方法。

我正在解决的问题是：我有一个包含抽奖条目的集合，并且根据用户分享/推广比赛的次数，他们获得“额外条目”，以增加他们获胜的机会。我没有复制用户的条目，而是有一个字段记录他们分享比赛的次数。我想用这个数字作为一个乘数来衡量“赢家”的随机选择。

以下是我想到的几种方法：

1.  使用[Cookbook 随机选择方法](http://cookbook.mongodb.org/patterns/random-attribute/)的变体，生成一个随机数*数组*（等于乘数），以使记录更有可能靠近查询的随机点（但 Mongo 不支持数组 [multi-key] 索引，是吗？所以它可能会很慢）
2.  使用地理空间查询的 Cookbook 随机方法的另一种变体，使用半径等于乘数的圆形多边形而不是简单的随机数（如果这甚至可能，我从未使用过 MongoDB 地理索引和查询）
3.  展开新临时集合中的条目，然后使用 MongoDB 随机选择方法之一
4.  避免这个问题，首先将重复的条目存储在 Mongo 中，然后定期随机选择 thingamajig
5.  在 mySql 中保留 MongoID 及其权重乘数的单独索引（不断同步或按需生成）并使用 mySql 进行随机加权选择
6.  在 PHP 中查询一个巨大的数组并希望它不会耗尽内存！：/

我在这里做什么？对于我缺少的明显解决方案，还有其他建议吗？我将做一些试验，看看什么是有效的，但欢迎对我最初的想法提出任何反馈！

性能需要“好”而不是很好，因为这些比赛中没有一个可能会有*数百万*个条目（通常更像 [数] 万个），因此公平/准确性比速度更重要。谢谢。

# python - 一些非常简单的语句，但为什么会产生 UnboundLocalError

> ID：16027907
> 
> 赞同：1
> 
> 时间：2013-04-16T02:42:14.720
> 
> 标签：python

我真的看不出这些陈述有什么问题。我在这里检查了它们是否有许多相同的错误帖子，但我找不到明确的答案。谁能解释一下这个问题？谢谢。

```
myVariable = 10

def printV():
    myVariable = myVariable + 10
    print("inside", myVariable)

printV()

print("outside", myVariable) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:46:23.540

问题是该方法不知道是什么`myVariable`，因为它在本地没有很好的范围。我建议你这样做。

```
myVariable = 10

def printV():
    global myVariable
    myVariable = myVariable + 10
    print("inside", myVariable)

printV()

print("outside", myVariable) 
```

# c# - 如何用最近的鼠标位置重绘一个椭圆

> ID：16027910
> 
> 赞同：1
> 
> 时间：2013-04-16T02:42:33.923
> 
> 标签：c#, graphics, paint, mousemove, mousedown

我希望在 MouseMove() 事件期间在屏幕上绘制一个椭圆，但我希望它只绘制从起点到当前鼠标位置的最新椭圆。目前它正在为每个注册的鼠标位置绘制一个椭圆。如果我简单地使用 MouseDown() 和 MouseUp() 事件，我可以很容易地绘制它而不显示椭圆，但我希望用户在移动鼠标时能够看到椭圆，所以他们可以确切地知道他们把它放在哪里。有谁知道我怎么能做到这一点？

我目前的代码如下：

```
private void pnlDraw_MouseDown(object sender, MouseEventArgs e)
{
    initialX = e.X;
    initialY = e.Y;
    previousX = e.X;
    previousY = e.Y;
    isPainting = true;
}

private void pnlDraw_MouseMove(object sender, MouseEventArgs e)
{
    if (isPainting)
    {
        switch (currentDrawType)
        {

            case DRAWTYPE.ELLIPSE:
            {
                DrawEllipse(e);
                break;
            }
            default:
            {
                break;
            }
        }
    }
}

private void DrawEllipse(MouseEventArgs e)
{
    pen = new Pen(Color.Black);
    Graphics graphics = pnlDraw.CreateGraphics();
    graphics.DrawEllipse(pen, initialX, initialY, e.X - initialX, e.Y - initialY);

    previousX = e.X;
    previousY = e.Y;
    graphics.Dispose();
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:48:48.737

当您在屏幕上绘制某些东西时，您应该做的第一件事就是清除之前显示的内容。否则，您只需在现有图纸上进行绘制。

在 WinForm 中，它通常在`OnBackgroundPaint()`方法中处理，这是一种简单的说法，即它在那里你应该清除背景。

它应该看起来像这样：

```
e.Graphics.FillRectangle(new SolidBrush(MyBackgroundColor), e.ClipRectangle); 
```

或者如果它不是绘图事件：

```
graphics.FillRectangle(new SolidBrush(MyBackgroundColor), 0, 0, MyWidth, MyHeight); 
```

并且应该在它上面绘制任何东西之前调用。这也是您的绘图区已准备好在其上绘制的保证。

# powershell - powershell合并csv

> ID：16027914
> 
> 赞同：5
> 
> 时间：2013-04-16T02:42:41.677
> 
> 标签：powershell, csv, merge

我有一个简单的批处理脚本，可以将多个 csv 文件复制到一个 csv 中，但我似乎无法找到一种方法在 powershell 中以相当的速度做同样的事情。在批处理中它是这样的：

```
Copy "*.csv" Merged.csv 
```

它可以在几秒钟内将大约 20 个 3MB 的 csv 文件复制到一个文件中。

在powershell中，我最接近的是：

```
dir *.csv | Import-Csv | Export-Csv allsites.csv -NoTypeInformation 
```

这种方法需要很长时间。powershell 中是否有一种方法在速度上可以与上面的 DOS 命令相媲美？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:03:51.540

这应该与您的 DOS 命令相同。

```
(get-content *.csv) | set-content Merged.csv 
```

但是任何一个都会在结果文件中出现额外的标题行。

# javascript - 此 Ajax javascript 代码无法正常工作

> ID：16027917
> 
> 赞同：0
> 
> 时间：2013-04-16T02:42:48.637
> 
> 标签：javascript, ajax, function, jquery

所以我一直忙于为客户建立一个网站。现在我需要在菜单点击上做一些 ajax。下面的代码成功地显示了 loading.gif 并且不是 100% 确定它会执行 ajax，因为 dang 页面仍然会在 gif 旋转时加载常规样式。工作，但没有..

无论如何，这里有一个链接：登录是用户名：密码：

单击“朋友”链接查看微调器，下面的代码可通过 firebug 查看。这里的任何帮助都是很好的帮助，这实际上是我第一次弄乱 ajax。

谢谢，尼克

```
<script type="text/javascript">

$(function() {
$(".item-206").click(function() {
    $("#dvloader").show();
    $.load("friends", function(){ $("#dvloader").hide(); });
    return false;
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:45:35.570

您必须告诉它将 html 加载到的位置：

```
$('#div-you-want-to-populate').load("friends", function() { ... }); 
```

如果您制作一个 div id 数组，并将它们命名为与目标 div 相同，您可以执行以下操作：

```
var ids = ['id1', 'id2','id3']; 
for (i=0; i<ids.length, i++) { 
    $('#'+ids[i]).load("friends #"+ids[i], function() { ... });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:49:08.800

利用

```
$('element or id or class').load("friends", function(){ $("#dvloader").hide(); }); 
```

# regex - 使重写语法正确

> ID：16027921
> 
> 赞同：2
> 
> 时间：2013-04-16T02:43:15.933
> 
> 标签：regex, mod-rewrite

我正在尝试编写一个重写器以放入我的 .htaccess 中。我需要完成的是：

[https://abcom/?bunch_of_stuff](https://a.b.com/?bunch_of_stuff)

成为

[https://www.b.com/?bunch_of_stuff](https://www.b.com/?bunch_of_stuff)

即，在 URL 中，我想丢失子域部分（“a.”）并将其替换为“www”。

我已经尝试了很多东西，但我一直在获取原始 URL。我确信这很容易，我只是没有看到它，所以也许一双新的眼睛可以解决这个问题。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:53:01.553

你有没有尝试过这样的事情？

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^a\.b\.com [NC]
RewriteRule ^(.*)$ https://www.b.com/$1 [L,R=301] 
```

# jquery - 使用 Javascript 的活动/悬停状态

> ID：16027923
> 
> 赞同：0
> 
> 时间：2013-04-16T02:43:35.620
> 
> 标签：jquery

我很难为我正在处理的一个手风琴风格的小菜单编写一个活动状态。我有悬停过渡，单击时菜单将保持打开状态，但是，在用户单击并将鼠标移出菜单后，我失去了样式。

我希望样式保持不变，直到单击下一个项目，依此类推。

我在这里工作的例子：http: [//codepen.io/Sektion66/pen/dviJG](http://codepen.io/Sektion66/pen/dviJG)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:46:30.667

单击标题时，您可以使用`toggleClass`给它一个类。然后，您只需使用一些 CSS，就像您已经在做的那样。您无需在悬停时进行样式设置，而是在单击时设置样式。

```
$(document).ready(function() {
    $("ul.dd-header").click(function() {
        var $el = $(this).find('ul.hidden');
        var $opened = $('.toggledDown').not($el);
        $opened.toggleClass('toggledDown');
        $opened.slideToggle();
        $el.toggleClass('toggledDown');
        $el.slideToggle();
        $(this).toggleClass('toggleHeader');
    });
}); 
```

CSS：

```
.toggleHeader{
    border-left: 10px solid @blue;
    background-color: #000;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:54:37.810

基本上，您想要切换定义元素上选定元素的类。

```
$('dd-main').click(function () { $('.selected').removeClass('selected'); $(this).addClass('selected'); } ); 
```

这将从任何其他选定元素中删除样式，然后将类添加到单击的新元素

# javascript - 将复杂的 json 对象绑定到剔除下拉菜单

> ID：16027924
> 
> 赞同：0
> 
> 时间：2013-04-16T02:43:43.860
> 
> 标签：javascript, knockout.js

我有一个复杂的对象被绑定到一个下拉列表。[请参阅 jsfiddle](http://jsfiddle.net/QrvJN/1/)。

1.  这是为下拉菜单绑定到复杂对象的正确方法吗？

2.  下拉列表必须绑定到初始值（当前工作）

3.  更改下拉列表中的选定索引需要更新剔除对象。这是一种工作。调用 save 时更新对象，因此下拉列表的对象值被传递给 Format 对象。-- 然而.. 这个值不会在 UI 中更新。

我不确定是否是映射需要一些工作才能将格式转换为可观察的。从第一次加载开始，SelectedFormat 的值似乎永远不会改变。

任何有关获取此更新对象的 ui 和文本输出的帮助将不胜感激。

**已编辑：**问题使要求更加清晰

```
code on js fiddle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:37:11.177

1）没有比这更容易的了，只需使用 optionsText 指出像这样的成员

```
optionsText: 'Name' 
```

对象引用已经隐含在 optionsValue 中，所以你可以跳过它，如果你想显式设置它，你可以在那里做同样的事情，只指向成员 optionsValue: $data 但它不需要。换句话说，这会做[http://jsfiddle.net/QrvJN/7/](http://jsfiddle.net/QrvJN/7/)

2）值和选项绑定在对象引用上匹配，因此如果初始值和选项列表不共享引用，您需要自己匹配它们。你这样做有点奇怪，我为此做了一个绑定来解决这个问题[http://jsfiddle.net/ewSU2/](http://jsfiddle.net/ewSU2/)

3）如果您检查我的解决方案，则不需要这样做 2）

# mysql - 从mysql中选择放入变量VB.NET

> ID：16027925
> 
> 赞同：5
> 
> 时间：2013-04-16T02:43:56.267
> 
> 标签：mysql, vb.net

我正在尝试使用 VB.NET 从 MySQL 数据库中选择数据

```
Dim conn As New MySqlConnection
    Dim cmd As New MySqlCommand
    conn.ConnectionString = "Server=localhost; user id=root; password=; database=aplikasi_store_testing;"
    cmd.Connection = conn
    conn.Open()

    Dim Number As Integer
    cmd.CommandText = "SELCECT nama_student  FROM student where Id_student ='" & id & "'" 
```

但我不知道如何将选定的查询放入变量中，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T15:02:35.560

```
 Dim StrVar as String
 Dim rd As MySqlDataReader 
 Dim cmd as New MySqlcommand

 cmd.commandtext = "Select student_name from student_table where student_id = @ID"
 cmd.connection = conn
 rd = cmd.ExecuteReader

if rd.read then

    StrVar = rd.GetString(1)

end if
rd.close 
```

使用数据阅读器，您可以将查询结果分配给变量 StrVar，这将派上用场。我使用 GetString 是因为我假设它是字符串类型，而 GetValue 是整数。值“1”表示您要传递给变量的列。

让我知道这个是否奏效。干杯..快乐编码..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T02:54:28.500

您可以使用 ExecuteScalar 方法如下

```
object nama_studentObj = cmd.ExecuteScalar()
if nama_studentObj != null then
  string nama_student= nama_studentObj .ToString() 
```

[完整的示例代码](http://zetcode.com/db/mysqlvb/)

```
 Dim cs As String = "Database=testdb;Data Source=localhost;" _
        & "User Id=testuser;Password=test623"

    Dim stm As String = "SELECT VERSION()"
    Dim version As String
    Dim conn As MySqlConnection

    Try
        conn = New MySqlConnection(cs)
        conn.Open()

        Dim cmd As MySqlCommand = New MySqlCommand(stm, conn)

        version = Convert.ToString(cmd.ExecuteScalar())

        Console.WriteLine("MySQL version: {0}", version)

    Catch ex As MySqlException
        Console.WriteLine("Error: " & ex.ToString())
    Finally
        conn.Close()
    End Try 
```

## 笔记 ：

调用数据库时最好使用参数，如下所示

```
cmd.CommandText = "SELCECT nama_student  FROM student where Id_student = @Id_student" 
```

那么你必须将参数添加为

```
cmd.Parameters.AddWithValue("Id_student", id ) 
```

[如何创建参数化 SQL 查询？我为什么要？](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T03:50:13.010

你可以把它放进`DataSet`

```
Dim conn As New MySqlConnection
Dim cmd As New MySqlCommand
conn.ConnectionString = "Server=localhost; user id=root; password=; database=aplikasi_store_testing;"
cmd.Connection = conn
conn.Open()

Dim id As Integer
cmd.CommandText = "SELECT nama_student  FROM student where Id_student ='" & id & "'" 

Dim da As New MySqlDataAdapter 'DataAdapter can be used to fill DataSet
Dim ds As New DataSet
da.SelectCommand = cmd
da.Fill(ds, "student") 'you can change student with the table name 
```

通过上述命令，您的数据将存储在`DataSet`.

使用示例：

```
ds.Tables("student").Rows.Count 'Get the number of rows in the DataTable
ds.Tables("student").Rows(0).Item("nama_student").ToString 'Get first row of the nama_student field 
```

您可以查看 MSDN 以获取更多信息：

数据集：http: [//msdn.microsoft.com/en-us/library/system.data.dataset.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)

数据表：http: [//msdn.microsoft.com/en-sg/library/system.data.datatable.aspx](http://msdn.microsoft.com/en-sg/library/system.data.datatable.aspx)

数据行：http : [//msdn.microsoft.com/en-sg/library/system.data.datarow.aspx](http://msdn.microsoft.com/en-sg/library/system.data.datarow.aspx)

笔记：

正如@Joel Coehoorn 提到的，尝试查看命令参数[http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlparameter.html](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlparameter.html)

# android - 如何在一个片段中单击并添加另一个片段？

> ID：16027931
> 
> 赞同：0
> 
> 时间：2013-04-16T02:44:42.500
> 
> 标签：android, android-fragments, fragment

如何在一个片段中单击并添加另一个片段？

有一个按钮单击以在一个 Activity 中添加 Fragment。firstFragment 中还有另一个按钮。我想单击按钮并添加 secondFragment。如何实现这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T17:16:51.700

在 Fragment1 中，使用按钮扩展 XML 布局。设置按钮的 onClickListener 并定义一个 onClick 方法。

```
 // In Fragment1...
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.layoutWithButton, container, false);
            Button b = (Button) view.findViewById(R.id.myButton);
            b.setOnClickListener(this);
            return view;
        }
        @Override
        public void onClick(View v) {
        switch (v.getId()) {
            case R.id.layoutWithButton:
                Fragment fragment2 = new Fragment2;
                FragmentTransaction transaction = getActivity().getSupportFragmentManager().beginTransaction();
                transaction.replace(R.id.container, fragment2); // where container is the FrameLayout where Fragment 1 was first placed
                transaction.commit();
                break;
            default:
                break;
        } 
```

根据您希望如何处理您的后台堆栈，您可以`transaction.addToBackStack(null);`根据需要包含。

# groovy - groovyConsole 启动时抛出 java.lang.reflect.InvocationTargetException

> ID：16027932
> 
> 赞同：3
> 
> 时间：2013-04-16T02:44:44.920
> 
> 标签：groovy, groovy-console

我刚刚从 Ubuntu 的软件中心在 Ubuntu Studio 12.10 中安装了 groovy，我正在尝试运行 GroovyConsole，但是当我执行“groovyConsole”时会引发异常：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:108)
    at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:130)
Caused by: java.awt.HeadlessException
    at sun.awt.HeadlessToolkit.getMenuShortcutKeyMask(HeadlessToolkit.java:237)
    at sun.awt.HeadlessToolkit$getMenuShortcutKeyMask.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
    at groovy.swing.SwingBuilder.shortcut(SwingBuilder.groovy:379)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
    at groovy.swing.SwingBuilder.shortcut(SwingBuilder.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
    at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:793)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:776)
    at groovy.util.FactoryInterceptorMetaClass.invokeMethod(FactoryBuilderSupport.java:1287)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at groovy.ui.ConsoleActions.run(ConsoleActions.groovy:27)
    at groovy.util.FactoryBuilderSupport.build(FactoryBuilderSupport.java:1123)
    at groovy.util.FactoryBuilderSupport.build(FactoryBuilderSupport.java:1106)
    at groovy.util.FactoryBuilderSupport$build.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at groovy.ui.Console.run(Console.groovy:298)
    at groovy.ui.Console$run$0.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at groovy.ui.Console.run(Console.groovy:264)
    at groovy.ui.Console$run.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
    at groovy.ui.Console.main(Console.groovy:199)
    ... 6 more 
```

我有openJDK

> java version "1.7.0_15" OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.10.1) OpenJDK Server VM (build 23.7-b01, 混合模式)

groovysh 和 groovy 命令工作正常。有什么建议可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:49:32.703

您可能已经安装了“*无头*”Java，即没有图形库。

> *[无头模式](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)*是缺少显示设备、键盘或鼠标的系统配置。听起来很意外，但实际上您可以在此模式下执行不同的操作，即使是图形数据。

这就是为什么您在`java.awt.HeadlessException`使用它运行 groovyConsole 时遇到问题的原因，以及为什么您解决了安装非无头的 Oracle JDK 的问题（尽管您可以使用 以无头模式运行 java 程序`java -Djava.awt.headless=true`）。

# xcode - Xcode 4.6.2 错误：“无法在所选目标上运行”

> ID：16027934
> 
> 赞同：2
> 
> 时间：2013-04-16T02:44:53.083
> 
> 标签：xcode

我已经有这个问题几个星期了。突然这发生在我的项目中，我无法修复它。它是一个基本的标签栏应用程序，我什至几乎没有开始对其进行大量编码。运行 xcode 4.6.2（也在 4.6 和 4.6.1 上尝试过）。

实际错误说：“无法在选定的目标上运行选定的目标不支持构建选定软件的体系结构。切换到支持该体系结构的目标以运行选定的软件。”

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T05:17:22.413

好吧，这是我的新修复：我（出于某种原因）更改了下面突出显示的行：

![信息列表](https://i.stack.imgur.com/63tkF.png)

我已将其更改`${EXECUTABLE_NAME}`为其他内容。改回来并没有立即解决问题：我必须先单击`+`添加新行，然后删除新行。

我的应用程序现在运行良好

* * *

旧修复：

~~好的，所以是的，这是真的，还有其他类似的问题。他们帮助我找到了一个不同的（和陌生的）解决方案。~~

 ~~1.  我右键单击我的 .xcodeproj 文件并选择“显示包内容”
2.  然后我打开“project.pbxproj”
3.  我将其中的所有文本复制到另一个文件中，从中删除所有文本并保存
4.  这“崩溃”了我不小心在 XCode 中打开的 XCode 项目。
5.  我关闭了我的项目，然后将“project.pbxproj”的原始内容粘贴回“project.pbxproj”
6.  我保存了“project.pbxproj”并关闭了它
7.  再次打开我的 XCode 项目后，我能够在我的设备上运行它！~~ 

对我来说，为什么这行得通是没有意义的，因为我没有修改文件……但确实如此，太棒了！

PS 事先备份您的项目，以防万一。

~~**编辑**：嗯，我的已经停止工作了，我不能用上面的方法来修复它......~~

# python - 从python调用C函数的最佳方法？

> ID：16027942
> 
> 赞同：2
> 
> 时间：2013-04-16T02:46:00.367
> 
> 标签：python, c

我已经用 Python 编写了一个高级电机控制器，并且已经到了想要降低一些级别以获得一些速度的地步，所以我对用 C 编写这些位感兴趣。

我对 C 语言没有太多经验，但我正在研究的数学非常简单，所以我确信我可以用最少的头撞墙来实现。我不确定如何最好地调用这个编译的 C 程序，以便将它的输出通过管道传输回我的高级 python 控制器。

我使用了一些 ctypes，但只是从制造商提供的 DLL 中提取一些函数……不确定在这种情况下这是否是一条合适的路径。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:11:07.860

您可以在[此处](http://csl.name/C-functions-from-Python/)查看本教程。

此外，官方 python 网站上的一个更可靠的示例，[here](http://docs.python.org/2/extending/extending.html#a-simple-example)。

例如，

`sum.h`功能

```
int sum(int a, int b) 
```

一个名为 , 的`module.c`文件

```
#include <Python.h>
#include "sum.h"

static PyObject* mod_sum(PyObject *self, PyObject *args)
{
    int a;
    int b;
    int s;
    if (!PyArg_ParseTuple(args,"ii",&a,&b))
       return NULL;
    s = sum(a,b);
    return Py_BuildValue("i",s);
}

static PyMethodDef ModMethods[] = {
    {"sum", mod_sum, METH_VARARGS, "Description.."},
    {NULL,NULL,0,NULL}
};

PyMODINIT_FUNC initmod(void)
{
    PyObject *m;
    m = Py_InitModule("module",ModMethods);
    if (m == NULL)
       return;
} 
```

Python

```
import module
s = module.sum(3,5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:42:03.497

另一种选择：尝试[numba](http://numba.pydata.org/)。它免费为您提供类似 C 的速度：只需导入 numba 和 @autojit 您的函数，即可获得惊人的速度提升。

如果您有复杂的数据类型将无法工作，但如果您正在循环和跳转数组索引，它可能正是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:43:10.550

你可以使用 SWIG，使用起来非常简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T23:33:03.590

您可以使用 Cython 设置必要的 c 类型并编译您的 python 语法代码。

# javascript - 如何禁用提交按钮？

> ID：16027944
> 
> 赞同：0
> 
> 时间：2013-04-16T02:46:16.603
> 
> 标签：javascript

这是代码如何禁用提交按钮。它似乎对我们不起作用。我希望能够在打开页面时禁用该按钮。您对我们如何解决此问题有任何想法吗？

```
// Script 10.5 - pizza.js
// This script creates a master checkbox.

// Function called when the checkbox's value changes.
// Function toggles all the other checkboxes.
function toggleCheckboxes() {
'use strict';

// Get the master checkbox's value:
var status = document.getElementById('toggle').checked;

// Get all the checkboxes:
var boxes = document.querySelectorAll('input[type="checkbox"]');

// Loop through the checkboxes, starting with the second:
for (var i = 1, count = boxes.length; i < count; i++) {

    // Update the checked property:
    boxes[i].checked = status;

} // End of FOR loop.
}
} // End of toggleCheckboxes() function.

function disabled () {
    if ('')
    {document.getElementById('submit').disabled = false;}
    else
    {document.getElementById('submit').disabled = true;}

// Establish functionality on window load:
window.onload = function() {
'use strict';

// Add an event handler to the master checkbox:
document.getElementById('toggle').onchange = toggleCheckboxes;

document.getElementById('submit').disabled = disabled;

}; 
```

这是html

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Operating Systems</title>
<!--[if lt IE 9]>
<script </script>
<![endif]-->
</head>
<body>
<!-- Script 10.4 - pizza.html -->
<form action="#" method="post" id="theForm">
<fieldset><legend>Create Your Own Pizza</legend>
<div><label>Toppings</label> <input type="checkbox" name="toggle" id="toggle"        value="toggle"> All/None
<p><input type="checkbox" name="ham" id="ham" value="ham"> Ham
<input type="checkbox" name="mushrooms" id="mushrooms" value="mushrooms"> Mushrooms
<input type="checkbox" name="onions" id="onions" value="onions"> Onions
<input type="checkbox" name="sausage" id="sausage" value="sausage"> Sausage
<input type="checkbox" name="greenPeppers" id="greenPeppers" value="greenPeppers">  Green Peppers </p>
</div>
<input type="checkbox" name="terms" id="terms" required> I agree to the terms, whatever they are.
<input type="submit" name="submit" value="Submit" id="submit">
</fieldset>
<div id="output"></div>
</form>
<script src="js/utilities.js"></script>
<script src="js/pizza.js"></script>
<script src="js/modal.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:42:40.637

有几点可以改进：

1.  您应该关闭所有输入标签以避免呈现 HTML 文档时出现任何问题。
2.  `for-loop`应该运行直到`i < (boxes.length - 1)`避免选中 ToS 复选框。或者你可以*只*针对配料`querySelectorAll('p input[type="checkbox"]')`并从 开始`var i = 0`。
3.  的右`disable()`括号位于 和 的右括号`for-loop`之间`toggleCheckboxes()`。
4.  In`disabled()` `#terms`被选中，你想检查它是否是`checked`。如果是，则启用提交按钮 ( `disabled = false`)，否则禁用它 ( `disabled = true`)。
5.  最后，您需要分配`disabled()`给`#terms`'`onclick`函数，以便在每次切换复选框时调用它。

**演示**：http: [//jsfiddle.net/4Rwfs/1](http://jsfiddle.net/4Rwfs/1)

### HTML

```
<form action="#" method="post" id="theForm">
<fieldset>
    <legend>Create Your Own Pizza</legend>
    <div>
        <label>Toppings</label>
        <input type="checkbox" name="toggle" id="toggle" value="toggle">All/None</input>
        <p>
            <input type="checkbox" name="ham" id="ham" value="ham">Ham</input>
            <input type="checkbox" name="mushrooms" id="mushrooms" value="mushrooms">Mushrooms</input>
            <input type="checkbox" name="onions" id="onions" value="onions">Onions</input>
            <input type="checkbox" name="sausage" id="sausage" value="sausage">Sausage</input>
            <input type="checkbox" name="greenPeppers" id="greenPeppers" value="greenPeppers">Green Peppers</input>
        </p>
    </div>
<input type="checkbox" name="terms" id="terms" required> I agree to the terms, whatever they are.</input>
<input type="submit" name="submit" value="Submit" id="submit"></input>
</fieldset>
<div id="output"></div>
</form> 
```

### JavaScript

```
// Script 10.5 - pizza.js
// This script creates a master checkbox.

// Function called when the checkbox's value changes.
// Function toggles all the other checkboxes.
function toggleCheckboxes() {
'use strict';

// Get the master checkbox's value:
var status = document.getElementById('toggle').checked;

// Get all the checkboxes:
var boxes = document.querySelectorAll('p input[type="checkbox"]');

// Loop through the checkboxes, starting with the second:
    for (var i = 0, count = boxes.length; i < count; i++) {

        // Update the checked property:
        boxes[i].checked = status;

    } // End of FOR loop.
} // End of toggleCheckboxes() function.

function disabled () {
    if (document.getElementById('terms').checked)
    {document.getElementById('submit').disabled = false;}
    else
    {document.getElementById('submit').disabled = true;}
}

// Establish functionality on window load:
window.onload = function() {
'use strict';

// Add an event handler to the master checkbox:
document.getElementById('toggle').onchange = toggleCheckboxes;

document.getElementById('submit').disabled = true;

document.getElementById('terms').onchange = disabled;

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:08:01.123

问题不在禁用行中。

你想做什么`if('') {`？此外，在您的`onload`函数中，有一行：

```
'use strict'; 
```

你又想做什么？

见：http: [//jsfiddle.net/ByKEJ/](http://jsfiddle.net/ByKEJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:55:33.760

如果您想在页面加载时禁用提交按钮，请尝试添加：

```
document.getElementById('submit').disabled = true; 
```

除非禁用的函数返回布尔值，否则以下行没有意义：

```
document.getElementById('submit').disabled = disabled; 
```

例如，如果您希望提交按钮在单击时禁用，这将起作用。

```
document.getElementById('submit').onclick = disabled; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:27:19.137

[如何使用 JavaScript 禁用 html 按钮？](https://stackoverflow.com/questions/3014649/how-to-disable-html-button-using-javascript)

我认为这个以前的解决方案可以帮助您动态禁用某些东西

# c# - 如何避免WinRT中的BackgroundTransfer自动解压gzip？

> ID：16027945
> 
> 赞同：0
> 
> 时间：2013-04-16T02:46:20.457
> 
> 标签：c#, windows, windows-8, windows-runtime

当我指定 http URI 时，Windows Store Apps API 中的[DownloadOperation总是解压缩 gz 内容。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.downloadoperation%28v=win.10%29.aspx)有没有办法避免这种情况，比如设置底层 HttpRequest的[DecompressionMethods ？](http://msdn.microsoft.com/en-us/library/system.net.decompressionmethods.aspx)

# sqlalchemy - 如何在 sqlalchemy 中将实例更新到数据库

> ID：16027955
> 
> 赞同：1
> 
> 时间：2013-04-16T02:47:22.733
> 
> 标签：sqlalchemy

我想更新数据库中的一个实例， session.merge() 不起作用，那么，应该使用哪个函数以及如何编码？

# php - 联系表格发送没有数据的电子邮件

> ID：16027956
> 
> 赞同：1
> 
> 时间：2013-04-16T02:47:28.653
> 
> 标签：php, contact-form

您好，我希望有人可以看看我的代码，并给我一个线索，了解可能导致这种情况的原因，因为它让我很难过。当我测试发送按钮时，一切都按承诺进行，我收到了发送的消息和重定向，但电子邮件显示所有字段，而我没有输入任何答案。这是表格：

```
<form action="contactformprocess.php" method="post" enctype="text/plain" name="form1" id="form1">
            <p>
              <label><span class="GoldText">What is your movie about?</span> What are you trying to tell us?<span id="What">
              <textarea name="what" id="what" cols="45" rows="5"></textarea>
              <span id="countWhat">&nbsp;</span><span class="textareaRequiredMsg">Please Fill.</span><span class="textareaMaxCharsMsg">Exceeded maximum number of characters.</span></span></label>
            </p>
            <p>
              <label>Why is this Project Important to you?  <span class="GoldText">What is it's purpose?</span><span id="why">
              <textarea name="why" cols="45" rows="5" id="why"></textarea>
              <span id="countwhy">&nbsp;</span><span class="textareaRequiredMsg">Please Fill.</span><span class="textareaMaxCharsMsg">Exceeded maximum number of characters.</span></span></label>
            </p>
            <p>
              <label>What will people gain from watching it?<br />
              <span class="GoldText">What sentiments are we left with?</span><span id="Contribution">
              <textarea name="contribution" cols="45" rows="5" id="contribution"></textarea>
              <span id="countContribution">&nbsp;</span><span class="textareaMaxCharsMsg">Exceeded maximum number of characters.</span></span></label>
            </p>
            <fieldset>
              <legend>Where and when is it shot? (For dated events)</legend>
              <p>
                <label>Location:
                  <input type="text" name="location" id="location" />
                </label>
              </p>
              <p>
                <label>Date(s): <span id="EventDateStart">
                <input name="eventdatestart" type="text" id="eventdatestart" />
                <span class="textfieldInvalidFormatMsg">Invalid format.</span></span></label>
              to<span id="EventDateEnd">
              <label>
                <input name="eventdateend" type="text" id="eventdateend" />
              </label>
<span class="textfieldInvalidFormatMsg">Invalid format.</span></span>              </p>
              <p>
                <label>Time: <span id="EventTimeStart">
                <input name="eventtimestart" type="text" id="eventtimestart" />
</span></label>
              </p>
            </fieldset>
            <fieldset>
              <legend>Please tell us who you are.</legend>
              <p>
                <label>Name                </label>
                <span id="ClientName">
                <label>
                  <input type="text" name="clientname" id="clientname" />
                </label>
              <span class="textfieldRequiredMsg">Please Fill.</span></span></p>
              <p>
                <label>Phone
                  <input name="phone" type="text" id="phone" value="optional" />
                </label>
              </p>
              <p>
                <label>Email                <span id="OnlineContact">
                <input type="text" name="onlinecontact" id="onlinecontact" />
                <span class="textfieldRequiredMsg">Please Fill.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></label>
              </p>
              <p>
                <label>What other details help clarify your vision?<span id="FinalThoughts">
                  <textarea name="finalthoughts" cols="45" rows="5" id="finalthoughts"></textarea>
                <span id="countFinalThoughts">&nbsp;</span><span class="textareaMaxCharsMsg">Exceeded maximum number of characters.</span></span></label>
              </p>
              <p>
                <label>Send
                  <input name="button" type="submit" id="button" onclick="MM_validateForm('clientname','','R','phone','','NisNum','onlinecontact','','RisEmail','what','','R','why','','R');return document.MM_returnValue" value="Send" />
                </label>
              </p>
            </fieldset>
          </form> 
```

这是php：

```
/* Email Variables */
$emailSubject = 'contactformprocess'; /*Make sure this matches the name of your file*/
$webMaster = 'wavelengthfredy@gmail.com';

/*design by Mark Leroy @ http://www.helpvid.net*/

/* Data Variables */
$what = $_REQUEST['what'];
$why = $_REQUEST['why'];
$contribution = $_REQUEST['contribution'];
$location = $_REQUEST['location'];
$eventdatestart = $_REQUEST['eventdatestart'];
$eventdateend = $_REQUEST['eventdateend'];
$eventtimestart = $_REQUEST['eventtimestart'];
$clientname = $_REQUEST['clientname'];
$phone = $_REQUEST['phone'];
$onlinecontact = $_REQUEST['onlinecontact'];
$finalthoughts = $_REQUEST['finalthoughts'];

$body = <<<EOD
<br><hr><br>
What: $what <br>
Why: $why <br>
Contribution: $contribution <br>
Location: $location <br>
EventDateStart: $eventdatestart <br>
EventDateEnd: $eventdateend <br>
EventTimeStart: $eventtimestart <br>
ClientName: $clientname <br>
Phone: $phone <br>
OnlineContact: $onlinecontact <br>
FinalThoughts: $finalthoughts <br>
EOD;
$headers = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body,
$headers); 
```

我查看了之前的一篇文章，发现大写是一个问题，所以我研究了一下，仍然遇到了这个问题。所有其他细节对我来说都很好......我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:57:21.433

您可以尝试从 HTML 表单中省略 enctype="text/plain"，因为这是非标准的。

但是，更一般地说，如果要使用它，您需要开始学习如何调试代码。调试是处理代码的重要部分。使用“here”文档（<<<EOD 结构）可能会产生细微的错误，因为很难发现在开始时 <<<EOD 之后或 EOD 之前没有空格的要求；在末尾。

我会首先尝试用一个字段替换最后一条语句中的“$body”，以确保数据完全传递给脚本，如下所示：

```
$success = mail($webMaster, $emailSubject, $_REQUEST['what'], $headers); 
```

# ios - 使用 PSTCollectionViewController 时未在子视图控制器中调用 ViewDidLoad

> ID：16027969
> 
> 赞同：1
> 
> 时间：2013-04-16T02:48:56.550
> 
> 标签：ios, uicollectionview, viewdidload, childviewcontroller, pstcollectionview

我使用 PSTCollectionView 作为 UICollectionView 的替代品，以兼容 iOS5（以及 iOS6）。我正在使用情节提要创建我的根视图控制器，然后以编程方式添加 PSTCollecitonViewController。这是代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    DRCollectionVC *collectionVC = [[DRCollectionVC alloc] initWithCollectionViewLayout:[PSTCollectionViewFlowLayout new]];

    [collectionVC.collectionView setFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];

    [self addChildViewController:collectionVC];
    [collectionVC didMoveToParentViewController:self];
    [self.view addSubview:collectionVC.collectionView];

} 
```

我的 DRCollectionVC 是 PSTCollectionViewController 的子类。DRCollectionVC 的 ViewDidLoad 为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.cellCount = 10;
    [self.collectionView registerClass:[DRCell class] forCellWithReuseIdentifier:@"MY_CELL"];

} 
```

上面的 ViewDidLoad 没有被调用。我用 UICollectionView 尝试了类似的方法，这似乎工作得很好。

# java - 使用带链表的冒泡排序

> ID：16027977
> 
> 赞同：0
> 
> 时间：2013-04-16T02:50:21.337
> 
> 标签：java, sorting, linked-list

我正在尝试编写一种方法，该方法将根据每个对象的整数变量（命名优先级）对链表的对象进行排序。我以前用数组列表使用过冒泡排序并且没有遇到任何问题，但是由于某种原因，当我用链表尝试它时，它给了我一个 NullPointerException 并且我不知道我做错了什么。有什么建议吗？

```
public void sortList() {
    boolean flag = true;
    Item temp = null;
    Item position = head;
    Item positionLink = position.link;
    while(flag) {
        flag = false;
        while (position != null) {
            if(position.getPriority() > positionLink.getPriority()) {
                temp.setItem(position);
                position.setItem(positionLink);
                positionLink.link.setItem(temp);
                flag = true;
                position = position.getItem();
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:55:09.030

你没有初始化`temp`

```
 temp.setItem(position); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:36:44.037

顺便说一句，你的算法看起来错了.. item.link 和 item.setItem().. 乱七八糟.. 等等..

应该是这样的：

```
public void sortList() {

    boolean flag = true;
    while (flag) {
        flag = false;

        Item position = head;
        Item positionNext = position.link;
        Item positionPrev = null;

        while (positionNext != null) {
            if(position.getPriority() > positionNext.getPriority()) {

                Item temp = position;
                Item tempNextNext = positionNext.link;
                position = positionNext;
                position.link = temp;
                positionNext = temp;
                positionNext.link = tempNextNext;

                if (positionPrev == null) { // position is head
                    head = position;
                } else {
                    positionPrev.link = position;
                }

                flag = true;
            }
            positionPrev = position;
            position = position.link;
            positionNext = position.link;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T02:27:35.273

```
 public void bubbleSort() {
        boolean swapped;

        do {
        Node curr = first;
        Node prev = null;
        swapped = false;
        while (curr.next != null) {
            Node fwd = curr.next;

            if (curr.item > curr.next.item) {
                /**
                 * 3 pointers involved: prev, temp and temp.next. simply
                 * follow the order
                 * 
                 * prev.next = temp.next; 
                 * temp.next = temp.next.next;
                 * temp.next.next = temp;
                 */

                /**
                 * egde case: prev: can be null temp & temp.next cannot be
                 * null.
                 */

                if (prev != null) {
                    prev.next = fwd;
                } else {
                    first = fwd;
                }
                // advance prev.
                prev = fwd;

                curr.next = fwd.next;
                fwd.next = curr;
                swapped = true;
            } else {
                prev = curr;
                curr = curr.next;
            }
        }
    } while (swapped);
} 
```

# javascript - 为什么我导入js文件的地方会影响我的调用？

> ID：16027978
> 
> 赞同：1
> 
> 时间：2013-04-16T02:50:31.757
> 
> 标签：javascript, jquery

我写了一个简单的测试js文件（`test.js`）如下：

```
jQuery("#h2t").click(function() {
    alert("123");
}); 
```

然后我将它包含在一个 jsp 页面（`test.jsp`）中：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="resources/js/jquery.min.js"></script>
        <script src="resources/js/test.js"></script>
    </head>
    <body>
        <a id="h2t" href="#">test link</a>
    </body>
</html> 
```

但是当我点击超链接时这不起作用`test link`。如果我移动包含代码`after the <a> tag`，它工作正常：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="resources/js/jquery.min.js"></script>
    </head>
    <body>
        <a id="h2t" href="#">test link</a>
        <script src="resources/js/test.js"></script>
    </body>
</html> 
```

谁能告诉我为什么顺序会影响方法的调用，我怎样才能将 js 文件包含在`<head>`字段中并仍然使其工作？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:52:15.783

在 document.ready 函数中调用它

```
jQuery(function() {
    jQuery("#h2t").click(function() {
        alert("123");
    });
}); 
```

或者

```
jQuery(document).ready(function() {
        jQuery("#h2t").click(function() {
            alert("123");
        });
   }); 
```

参考：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T02:56:25.800

顺序非常重要。当脚本加载到头部时，任何立即执行的代码都会运行。如果该代码在页面上查找任何元素，例如一个 with ，`id=h2t`那么它将找不到该元素，因为页面尚未呈现，因此不会执行任何操作。

当脚本加载到正文中时，页面中脚本位置上方呈现的任何元素都将可见。当一个元素被渲染时，它被添加到允许定位它的 DOM（[文档对象模型）中。](http://www.w3.org/DOM/)这就是页面中加载的脚本正确执行的原因。

解决此问题的常用方法是等待文档完成加载所有元素。jQuery 有一个很好的处理程序，它被称为[`ready`](http://api.jquery.com/ready/)，并且它有这个简写符号：

```
$(function(){
 //code to run when the document loads
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T02:57:40.717

页面从上到下加载，因此在第一个脚本中，您的 js 在`#h2t`创建之前执行，因此您将无法选择它。
在您的第二个脚本中，您的 js`#h2t`在 dom 中创建后执行，因此可以使用`jQuery("#h2t")`.

如果您不想将 js 放在元素之后或页面末尾，您可以使用[`$(document).ready`](http://api.jquery.com/ready/)这将等到整个 dom 加载然后执行代码。

```
jQuery(document).ready(function(){
    jQuery("#h2t").click(function() {
        alert("123");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T02:59:15.730

在您的第一个示例中，调用事件绑定时元素`#h2t`尚不存在。在第二个示例中，该元素在调用绑定时已加载。

你应该用一个包装你的绑定调用`$.ready()`：

```
$( document ).ready( function () {
    jQuery("#h2t").click(function() {
        alert("123");
    });
}); 
```

...或使用委托：

```
 jQuery( document ).on( 'click', '#h2t', function() {
        alert("123");
    }); 
```

# c++ - 为什么临时值不能在带有 const 引用参数的构造函数中使用？

> ID：16027982
> 
> 赞同：0
> 
> 时间：2013-04-16T02:50:57.437
> 
> 标签：c++, const-reference

代码如下

```
class A {};
class B
{
public:
    B(const A& a) {}
    void fun() {}
};

int main(int argc, char *argv[])
{
    B b(A());
    b.fun(); // Error: left of '.fun' must have class/struct/union  

    A a;
    B b2(a);
    b2.fun(); //Okay

    return 0;
} 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:53:51.420

编码

```
 B b(A()); 
```

不是声明 的对象`B`，而是声明一个函数的函数声明，该函数`b`返回一个类型的对象`B`并接受一个（未命名的）参数，该参数是一个返回类型的函数`A`（并且不接受任何输入）。（引用下面的链接）。因此，您看到了该错误。

参见[C++ 最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)

# java - Junit 测试用例

> ID：16027983
> 
> 赞同：4
> 
> 时间：2013-04-16T02:50:58.713
> 
> 标签：java, junit, salt

```
public static String generateSaltString() {
    SecureRandom random = new SecureRandom();
    byte[] salt = random.generateSeed(12);

    return byteToBase64(salt);
} 
```

想知道如何使用 Junit 为这种方法编写测试用例。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:03:22.830

首先是 new SecureRandom() 可能会非常慢，因此您可能需要缓存它。看看[这个](https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom)答案和[这个](https://stackoverflow.com/questions/295628/securerandom-init-once-or-every-time-it-is-needed?rq=1)答案。

我会重构你的代码如下

```
public class DoRandomStuff {

private RandomUtil randomUtil;

public DoRandomStuff(RandomUtil randomUtil) {
    this.randomUtil = randomUtil;
}

public String generateSaltString() {
    byte[] salt = randomUtil.generateSeed(12);
    return byteToBase64(salt);
}

public String byteToBase64(byte[] salt) {
    // Do salt generation logic here
    return null;
} 
```

generateSeed 看起来像一个实用方法调用，因此它可以进入一个看起来像这样的类 RandomUtil

```
class RandomUtil {
    private SecureRandom random = new SecureRandom();
    public byte[] generateSeed(int seed) {
        return random.generateSeed(seed);
    }
} 
```

现在您的 DoRandomStuff 测试类将很容易编写。使用 Mockito 等测试框架注入模拟的 randomUtil。使 mockedRandomUtil.generateSeed(int) 方法返回一个固定数字。您的测试实际上是为了检查 byteToBase64() 方法是否正在做它应该做的事情。现在，您的测试用例有了一个确定的数字。您可以将 SecureRandom 在您的测试类中生成的各种数字作为单独的测试用例提供，以检查 byteToBase64() 结果。另外，您的随机数生成代码现在与您的 base64 代码分离。

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:38:07.427

我会测试结果是否不为空，然后多次调用该方法并比较结果以显示每次调用都返回不同的值。

但请记住：这并没有说明您的结果*随机性*的质量！

```
@Test
public void testGenerateSaltString() {
    String salt1 = YourClass.generateSaltString();
    String salt2 = YourClass.generateSaltString();
    String salt3 = YourClass.generateSaltString();
    String salt4 = YourClass.generateSaltString();

    assertNotNull(salt1);
    assertNotNull(salt2);
    assertNotNull(salt3);
    assertNotNull(salt4);

    assertNotEqual(salt1, salt2);
    assertNotEqual(salt1, salt3);
    assertNotEqual(salt1, salt4);

    assertNotEqual(salt2, salt3);
    assertNotEqual(salt2, salt4);

    assertNotEqual(salt3, salt4);
} 
```

考虑到 GaborSch 的评论，我认为测试的实现有点模糊，因为有可能 - 尽管不太可能 - 函数的两次调用将生成相同的盐：

```
@Test
public void testGenerateSaltString() {
    String salt1;
    String salt2;
    int differenceCount = 0;

    for(int i = 0; i < 1000; i++ ) {
        String salt1 = YourClass.generateSaltString();
        String salt2 = YourClass.generateSaltString();

        // null is still inacceptable
        assertNotNull(salt1);
        assertNotNull(salt2);

        if(!salt1.equalsIgnoreCase(salt2)) {
            differenceCount++;
        }
    }

    // check if at least at 95% of all tries resultet in different strings
    // change this value according to your needs
    assertTrue(differenceCount >= 950);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:53:54.650

我可以想到两个测试用例 -

*   检查返回不为空。
*   如果您期望它是 base64，请检查返回是 base64。尽管您是否期望任何随机字符串都没有关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:36:00.957

您可以检查 3 件事：

1.  结果是否为空
2.  如果结果符合形式要求（是一个`Base64`字符串）
3.  如果结果足够随机

例如，下面的代码可以工作。我生成 100 种不同的随机盐，并允许其中最多 1 次匹配。

```
@Test
public void testGenerateSaltString() {

    Set<String> salts = new HashSet<String>();
    int countSame = 0;
    BASE64Decoder decoder = new BASE64Decoder();

    for(int i=0; i<100; i++) {
        String salt = YourClass.generateSaltString();
        assertNotNull(salt);
        try {
            decoder.decodeBuffer(encodedBytes);
       } catch (Exception e) {
           fail("Not Base64");
       }
       if (salts.contains(salt)) {
            sameCount++;
       }
       salts.add(salt);
    }

    assertTrue(countSame <= 1);
} 
```

# javascript - Flash 内容可链接

> ID：16027985
> 
> 赞同：0
> 
> 时间：2013-04-16T02:51:11.103
> 
> 标签：javascript, html, flash

有没有办法让 Flash 内容打开一个新选项卡，指向使用 javascript 或 HTML 单击后指定的链接？

我尝试了很多方法，但似乎无法完成这项工作，而且 Flash 内容本身无法点击链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:02:30.763

Flash 内容**可以**有可点击的链接，因此可能不需要使用 JavaScript 或 HTML。

ActionScript 3 功能`flash.net.navigateToURL(request:URLRequest, window:String)`可用于打开网页，就像打开链接一样。该参数`window`指定在哪个窗口中打开页面（`"_self"`对于同一页面，`"_blank"`在新窗口或选项卡中）。

例如，在 ActionScript 3 中：

```
myButton.addEventListener(MouseEvent.CLICK, clickHandler);
function clickHandler (event:MouseEvent):void {
    var url:URLRequest = new URLRequest("http://example.com");
    flash.net.navigateToURL(url, "_blank");
} 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html)

# c++ - 修改 STL 容器的内容是否安全？

> ID：16027989
> 
> 赞同：2
> 
> 时间：2013-04-16T02:51:39.450
> 
> 标签：c++, stl

这个很基础。

我记得在某处看到一个警告（我现在找不到），大意是您不应该直接修改 STL 容器的内容，因为它可能会对容器的内部记录保存造成严重破坏。从那以后，每当您有要修改的元素时，您都应该使用类似 boost 的 ptr_containers 之类的东西。

这基本上就是我想做的所有事情：

```
int main (int argc, char *argv[]) {
    std::vector<int> jambone;

    jambone.push_back(2);
    jambone.front() = 4;
    std::cout<< jambone.front();
} 
```

我不想在这里用多个线程或任何东西做任何花哨的事情。那应该没问题吧？如果它是一个装满对象的容器，并且我在其中一个上调用了一个 mutator，它会有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T02:59:46.293

我认为您在更新容器时混淆了两件事：

1.  `std::set`更新一个值是不安全的，因为这会改变不变量（看看[当你修改一个 std::set 的元素时会发生什么？](https://stackoverflow.com/questions/908949/what-happens-when-you-modify-an-element-of-an-stdset)）

2.  对于某些容器（尤其是） `std::vector`，如果您的操作（例如`push_back`）使迭代器无效并且您使用的是在操作之前获得的迭代器，则必须小心。

就您的情况而言，我认为您正在做的事情没有问题。

# c++ - C++ strncpy 参数“优化”；覆盖随机内存

> ID：16027993
> 
> 赞同：2
> 
> 时间：2013-04-16T02:52:12.970
> 
> 标签：c++, linux, fuse

首先，我要为未能将问题缩小到足以分享一个重现该错误的简短程序而道歉。

对“随机”的外部库 (FUSE) 调用会`strncpy`覆盖`shared_ptr<mutex>`我的代码中的 a，当我尝试锁定该互斥体时会导致段错误。我用 valgrind 运行我的程序，它没有发现任何内存错误（下面的 valgrind 标志）。当我在 gdb 中运行我的代码并在其上设置一个观察点时`shared_ptr`，它会在调用 strncpy 时中断。gdb 表示所有`strncpy`的参数（dest、src 和 nbytes）都已“优化”，这让我认为它正在为该调用使用未初始化的内存。我是否正确解释了这一点？知道可能是什么原因吗？

这是指针被覆盖时来自 gdb 的堆栈跟踪：

```
#0  __strncpy_ssse3 () at ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:2482
#1  0x0000003245809094 in strncpy (__len=<optimized out>, __src=<optimized out>, __dest=<optimized out>) at /usr/include/bits/string3.h:120
#2  add_name (buf=<optimized out>, bufsize=<optimized out>, s=<optimized out>, name=<optimized out>) at fuse.c:907
#3  0x000000324580997c in try_get_path (f=<optimized out>, nodeid=<optimized out>, name=<optimized out>, path=<optimized out>, wnodep=<optimized out>, need_lock=<optimized out>) at fuse.c:956
#4  0x000000324580a281 in get_path_common (f=<optimized out>, nodeid=<optimized out>, name=<optimized out>, path=<optimized out>, wnode=<optimized out>) at fuse.c:1152
#5  0x0000003245812432 in fuse_lib_unlink (req=<optimized out>, parent=<optimized out>, name=<optimized out>) at fuse.c:1198
#6  0x0000003245817057 in fuse_ll_process_buf (data=0x6f5650, buf=0x7fffffffd850, ch=<optimized out>) at fuse_lowlevel.c:2441
#7  0x000000324581388f in fuse_session_loop (se=0x6f8410) at fuse_loop.c:40
#8  0x000000324580b698 in fuse_loop (f=<optimized out>) at fuse.c:4309
#9  0x000000324581bb8f in fuse_main_common (argc=<optimized out>, argv=<optimized out>, op=<optimized out>, op_size=<optimized out>, user_data=<optimized out>, compat=<optimized out>) at helper.c:355
#10 0x000000000046f1b6 in main (argc=4, argv=0x7fffffffdec8) at ../src/fuse.cpp:100 
```

这是我运行 valgrind 的论点：

```
valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:39:12.710

此错误是创建 a `shared_ptr`with `new`，然后将其类型转换为 a`weak_ptr`并删除它的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T00:12:49.357

> gdb 表示所有`strncpy`的参数（dest、src 和 nbytes）都已“优化”，这让我认为它正在为该调用使用未初始化的内存。我是否正确解释了这一点？

不，这只是意味着优化器已经删除了一些函数序言样板，这些样板将允许调试器可靠地打印函数的参数。这对于任何合理优化级别的简单函数都很常见。

这是一个简单的例子：

```
int
mystrcpy(char *p, const char *q)
{
    while (*p++ = *q++);
} 
```

与您一起编译时，`-g -O0`您会看到它立即将其参数溢出到堆栈中：

```
mystrcpy:
.LFB0:
        .file 1 "t.c"
        .loc 1 5 0
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        movq    %rsp, %rbp
        .cfi_offset 6, -16
        .cfi_def_cfa_register 6
        movq    %rdi, -8(%rbp)      <<< here
        movq    %rsi, -16(%rbp)     <<< and here
        ... 
```

然后编译器生成了关于它的调试信息：

```
 .section        .debug_info
    ...
    .uleb128 0x7
    .string "p"   <<< from char *p
    .byte   0x1
    .byte   0x4
    .long   0x65
    .byte   0x2
    .byte   0x91
    .sleb128 -24  <<< not 100% sure but this is probably related to frame offset
    .uleb128 0x7
    .string "q"
    .byte   0x1
    .byte   0x4
    .long   0x72
    .byte   0x2
    .byte   0x91
    .sleb128 -32   <<< note adjacent to p 
```

当您启动时`-O2 -g`，尽管`-g`功能变得更小：

```
mystrcpy:
.LFB11:
        .file 1 "t.c"
        .loc 1 5 0
        .cfi_startproc
        (at this point we start copying, using the input regs directly) 
```

现在没有参考`p`或`q`调试信息。正如你从这个例子中看到的，你可能可以在寄存器中找到你想要的信息，但是你必须反汇编并理解函数来解释它们。如果你的函数调用了*其他*函数，你可能必须找到你的寄存器溢出到堆栈的位置（对于被调用者保存 regs 可能很远）。

# android - Nexus LG 上的外部存储目录是什么

> ID：16027995
> 
> 赞同：0
> 
> 时间：2013-04-16T02:52:25.923
> 
> 标签：android, android-external-storage

下面的代码片段试图存储一个`Gesture`对象。

```
private Gesture mGesture;
private GestureLibrary store;
store.addGesture("test", mGesture);
store.save(); 
```

我想知道`mGesture`存储在哪里？

紧跟上面的代码，作者给出如下代码：

```
final String path = new File(Environment.getExternalStorageDirectory(),
                    "gestures").getAbsolutePath();
Toast.makeText(this, getString(R.string.save_success, path), Toast.LENGTH_LONG).show(); 
```

所以我猜`mGesture`它存储在由`path`. 但我不知道什么是路径。我试过调试。它给了我类似的东西：“storage/emulated/0/gestures/”。但是我在我的设备上找不到这个目录。顺便说一句，我的设备是nexus 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:01:52.943

是的，同意 gabe，这只是一个建议，但您可以使用 if 和 else 与 mkdirs 一起检查目录或文件夹是否存在，如果它不存在，它将在指定位置创建一个新文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:55:59.043

Nexus 设备没有 SD 插槽。他们假装内部驱动器上的某个地方是 SD 卡。但是该函数返回的确切路径确实存在于您的设备上，否则您无法为其创建文件。

顺便说一句，不要依赖于返回的值在设备之间是相同的。它不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T22:23:55.090

由于 Nexus 4 没有外部 SD（我现在正在使用的 Nexus 5 也是如此），它的操作系统暂时模拟了 SD。因此，调用`Environment.getExternalStorageDirectory()`会返回以下路径：`tempDirPath:/storage/emulated/0/`，但您稍后可以在 访问它`/storage/emulated/legacy`。

尝试通过 访问它`adb shell`，此`legacy`文件夹将存储模拟的外部 SD 的内容。

# eclipse - 我如何将现有的 mercurial repo 与 eclispe IDE 链接

> ID：16027998
> 
> 赞同：0
> 
> 时间：2013-04-16T02:52:34.140
> 
> 标签：eclipse, mercurial, mercurialeclipse

我正在使用 Eclipse 作为 IDE。我有一个文件夹，`/var/www/mysite`其中包含从 mercurial 服务器复制的 repo。我拉动并推动我进入该文件夹并输入 hg pull push 等。

在我的 Eclipse 中，我定义了一个空项目，然后将 Folder 链接到我的`/var/www/mysite`，以便我可以使用 Eclipse 编辑文件。

我现在刚刚安装了 Mercurial Eclipse，现在我可以选择克隆新的 repo。但是有什么方法可以将现有的 mysite 文件夹 repo 与 eclipse 链接起来，因为我在那里有很多东西，而且我不会去 repo 的文件很少。我如何链接它，以便 ni 可以从 Eclipse 中完成所有推拉操作，而不是通过终端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:05:54.820

如果在您链接的项目中，.hg 文件夹位于项目的根目录，这应该可以：在导航器视图中，右键单击项目并选择**Team >> Share..**，然后选择 Mercurial。它将检测现有的 Mercurial 存储库并启用 Mercurial 功能。